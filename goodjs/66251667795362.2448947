!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define([],e):t.LazyLoad=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";function r(t,e){this.settings=o(s,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}"function"==typeof define&&define.amd&&(t=window);const s={src:"data-src",srcset:"data-srcset",selector:".lazyload",root:null,rootMargin:"0px",threshold:0},o=function(){let r={},s=!1,t=0,e=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(s=arguments[0],t++);t<e;t++)!function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s&&"[object Object]"===Object.prototype.toString.call(t[e])?r[e]=o(!0,r[e],t[e]):r[e]=t[e])}(arguments[t]);return r};if(r.prototype={init:function(){if(t.IntersectionObserver){let s=this,t={root:this.settings.root,rootMargin:this.settings.rootMargin,threshold:[this.settings.threshold]};this.observer=new IntersectionObserver(function(t){Array.prototype.forEach.call(t,function(t){var e,r;t.isIntersecting&&(s.observer.unobserve(t.target),e=t.target.getAttribute(s.settings.src),r=t.target.getAttribute(s.settings.srcset),"img"===t.target.tagName.toLowerCase()?(e&&(t.target.src=e),r&&(t.target.srcset=r)):t.target.style.backgroundImage="url("+e+")")})},t),Array.prototype.forEach.call(this.images,function(t){s.observer.observe(t)})}else this.loadImages()},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(this.settings){let s=this;Array.prototype.forEach.call(this.images,function(t){var e=t.getAttribute(s.settings.src),r=t.getAttribute(s.settings.srcset);"img"===t.tagName.toLowerCase()?(e&&(t.src=e),r&&(t.srcset=r)):t.style.backgroundImage="url('"+e+"')"})}},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},t.lazyload=function(t,e){return new r(t,e)},t.jQuery){const s=t.jQuery;s.fn.lazyload=function(t){return(t=t||{}).attribute=t.attribute||"data-src",new r(s.makeArray(this),t),this}}return r});
