!function(){window.vbarNeedLoad=!0;var t=document.createElement("script");t.src=location.protocol+"//astyle.alicdn.com/pkg/@alife/vbar-core/1.9.x/bundle.js?marketId=1688market&scene=market&_dc"+(new Date).getTime(),t.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(t)}(),window.vbarNeedLoad||(define("vdrag",["jquery"],function(a){function t(t,e){this.dom=a(t).eq(0),this.options=e||{},0!==this.dom.length&&this._bindEvents()}return t.prototype.update=function(t){a.extend(this.options,t)},t.prototype._bindEvents=function(){var i,n,o=this;this.dom.on("mousedown.VerticalDrag",function(t){i=t.pageY,a("body").on("selectstart.VerticalDrag",function(t){return t.preventDefault(),t.stopPropagation(),!1})}),a(document).on("mouseup.VerticalDrag",function(){i=void 0,a("body").off("selectstart.VerticalDrag")}).on("mousemove.VerticalDrag",function(t){var e;void 0!==i&&(e=(n=t.pageY)-i,(e=(t=parseInt(o.dom.css("top"),10))+e)<=(o.options.min||0)?e=o.options.min||0:o.options.max&&e>=o.options.max&&(e=o.options.max),e!==t&&o.dom.css({top:e}).trigger("vdrag",e),i=n)})},t}),define("scroller",["jquery","vdrag"],function(n,o){function i(t,e){if(1<(t=n(t)).length)throw"You can not instance so many scroller for one time";if(this.element=t,this.child=t.children().eq(0),t.data("scrollerInitialized"))throw"You can not instance a scroller for multiply times";t.data("scrollerInitialized",!0),this._setup()}return i.prototype.step=100,i.prototype.interval=150,i.prototype.scroll=function(t){var e;this._noScroll()||this._isMoving||((e=this)._stopScroll(),this._isMoving=!0,t="down"===t?this._moveChild("up"):this._moveChild("down"),this._syncBar(t,function(){e._isMoving=!1}))},i.prototype._stopScroll=function(){this.child.stop(!0,!1),this.bar.stop(!0,!1),this._isMoving=!1},i.prototype._atTop=function(){return Math.abs(parseInt(this.child.css("top"),10))<=0},i.prototype._getMaxScrollTop=function(){var t=this.child.height()-this.element.height();return 0<t?t:0},i.prototype._atBottom=function(){var t=Math.abs(parseInt(this.child.css("top"),10));return this._getMaxScrollTop()<=t},i.prototype._moveChildTo=function(t){(t=Math.abs(t))<=0?t=0:t>=this._getMaxScrollTop&&(t=this._getMaxScrollTop()),this.child.stop(!0,!0).animate({top:-t},{duration:this.interval,easing:"swing"})},i.prototype._moveChild=function(t,e){var i=Math.abs(parseInt(this.child.css("top"),10)),n=this._getMaxScrollTop(),i="up"===t?n-i<=this.step?-n:-(i+this.step):i<=this.step?0:-(i-this.step);return this.child.stop(!0,!0).animate({top:i},{duration:this.interval,easing:"swing",complete:e||void 0}),i},i.prototype._getRatio=function(){return(this.element.height()-this.bar.height())/(this.child.height()-this.element.height())},i.prototype._syncBar=function(t,e){t=Math.abs(t);var i=this.element.height()*(this.element.height()/this.child.height());i!==this.bar.height()&&this.bar.height(i);var t=t*this._getRatio(),n=this;this.bar.css({opacity:1}).stop(!0,!0).animate({top:t},this.interval,function(){n._hideBar(),e&&e()})},i.prototype._showBar=function(){this._noScroll()||(this.bar.css({opacity:1}),this.timerForHideBar&&clearTimeout(this.timerForHideBar))},i.prototype._hideBar=function(t){var e=this;this.timerForHideBar&&clearTimeout(this.timerForHideBar),t?e.bar.css({opacity:0}):this.timerForHideBar=setTimeout(function(){e.bar.animate({opacity:0},e.interval)},1e3)},i.prototype._underCursor=null,i.prototype._bindEvents=function(){var e=this;n(document).on("keyup",function(t){if(i.prototype._underCursor){var e=i.prototype._underCursor;switch(t.which){case 40:e.scroll("down");break;case 38:e.scroll("up")}}}),this.element.on("mouseenter mousemove",function(){e._showBar(),e._updateBar(),i.prototype._underCursor=e}).on("mouseleave",function(){e._hideBar(),i.prototype._underCursor=null}).on("DOMMouseScroll mousewheel",function(t){return t.stopPropagation(),t.preventDefault(),0<t.originalEvent.detail||t.originalEvent.wheelDelta<0?e.scroll("down"):e.scroll("up"),!1})},i.prototype._setupChild=function(t){this.child.css({position:"relative",top:t||0,left:0})},i.prototype._updateBar=function(){var t;this._noScroll()?this._hideBar(!0):this.bar.height()!==(t=this.element.height()*(this.element.height()/this.child.height()))&&(this.bar.css({height:t+"px"}),this.barThumb.css({height:t-6+"px"}),this.barBody.css({height:t-6-4+"px"}),this.vdrag.update({max:this._getMaxScrollTop()*this._getRatio()}))},i.prototype._noScroll=function(){return this.element.height()>=this.child.height()},i.prototype._setupBar=function(){var i=this,t=this.element.height()*(this.element.height()/this.child.height());this.bar=n("<div></div>").appendTo(this.element).css({position:"absolute",right:"3px",top:0,width:10,height:t,opacity:0}),this.vdrag=new o(this.bar,{max:this._getMaxScrollTop()}),this.bar.on("vdrag",function(t,e){i._moveChildTo(-e/i._getRatio())});var e=this.barThumb=n("<div></div>").appendTo(this.bar).css({height:t-6+"px",top:"3px",width:"100%",position:"absolute",background:'url("//cbu01.alicdn.com/cms/upload/2014/590/419/1914095_2071302863.png") no-repeat'});this.barBody=n("<div></div>").appendTo(e).css({height:t-6-4+"px",position:"absolute",bottom:0,width:"100%",background:"url(//cbu01.alicdn.com/cms/upload/2014/601/419/1914106_2071302863.png) no-repeat 0 bottom"})},i.prototype._setup=function(){this.element.css({overflow:"hidden",position:"relative"}),this._bindEvents(),this._setupChild(),this._setupBar()},i.prototype.update=function(){this._stopScroll(),this._updateBar()},i}),define("vbar",["exports","require","lofty/lang/observer","lofty/lang/aop","jquery","util/template/2.0","util/localstorage/1.0","util/date/1.0","scroller"],function(d,o,t,e,p,i,n,b,r){d.version="3.0",Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){return n.apply(this instanceof o&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),n=this,o=function(){};return o.prototype=this.prototype,e.prototype=new o,e});var a,s=[].slice,l=new e,c=t.create(),h={bindings:{"click .vbar-hide":"hideVbar","click .vbar-show":"showVbar","click .vbar-menu":"onClickMenu","click .vbar-promotion":"onClickPromotion","click .vbar-tool":"onClickTool","click .vbar-bubble-close":"onCloseBubble","click .vbar-panel-close":"onClosePanel"},init:function(t,e){this.container=t,this.config=e,this.bindEvents(t),p(window).on("resize",function(){u.updateVbar()});var i=this;p("body").on("click",function(t){t=t.target;0===i.container.has(t).length&&u.hidePanels()})},hideVbar:function(){u.hideVbar(),y("fold",this.config.name)},showVbar:function(){u.showVbar(),y("unfold",this.config.name)},_onClickItem:function(t,e){var i=p(t.currentTarget),t=i.attr("data-name"),i=i.hasClass("selected"),e=function(t,e,i){if(!t.length||t.length<=0)return null;for(var n=0,o=t.length;n<o;n++)if(t[n][e]===i)return t[n]}(this.config[e+"s"],"name",t);e&&(e.panel&&(t=e.panel.name,i?(u.close("panel",t),y(t+"_fold",this.config.name)):(u.open("panel",t),y(t+"_unfold",this.config.name))),e.link&&(e=e.link.name,u.open("link",e),y(e+"_unfold",this.config.name)))},onClickMenu:function(t){this._onClickItem(t,"menu")},onClickPromotion:function(t){this._onClickItem(t,"promotion")},onClickTool:function(t){this._onClickItem(t,"tool")},onClosePanel:function(t){t=p(t.currentTarget).closest(".vbar-panel").attr("data-name");u.close("panel",t),y(t+"_fold",this.config.name)},onCloseBubble:function(t){t=p(t.currentTarget).closest(".vbar-bubble").attr("data-name");u.close("bubble",t),y(t+"_fold",this.config.name)},bindEvents:function(a){var s=this;p.each(this.bindings,function(t,e){var i,n,o;t&&((i=t.indexOf(" "))<0?(o=a).on(n=t,p.proxy(s,e)):(n=t.substring(0,i),o=t.substring(i),a.on(n,o,p.proxy(s,e))))})}},u={init:function(t){var n=this;return this.config=t,this.validEvents={render:{promotion:!0,menu:!0,tool:!0,panel:!0,bubble:!0,link:!0},open:{panel:!0,bubble:!0,link:!0},close:{panel:!0,bubble:!0,link:!0}},this.templates={promotion:i.compile(this.template.promotion),menu:i.compile(this.template.menu),tool:i.compile(this.template.tool),panel:i.compile(this.template.panel),bubble:i.compile(this.template.bubble)},!!this.config&&(this.layout=this.initLayout(this.config),p.each(["promotion","menu","tool"],function(t,i){n.config[i+"s"]&&p.each(n.config[i+"s"],function(t,e){n.render(i,e.name),e.bubble&&e.bubble.name&&e.bubble.show&&n.render("bubble",e.bubble.name)})}),this.layout.hide(),this.loadStyle(function(){n.layout.show(),n.updateVbar()}),this._getVbarLocalStatus()&&y("display",this.config.name),this.layout)},initLayout:function(t){var e=i.compile(this.template.layout),t=p(e(t));return t.appendTo(p("body")),t},loadStyle:function(t){o.use("//assets.1688.com/app/vbar/1.0.0/view.css",function(){t&&t()})},updateVbar:function(){var i=this._getVbarLocalStatus();i&&this.config&&this.config.autoHide&&p.each(this.config.autoHide,function(t,e){if(e.min<=p(window).width()&&p(window).width()<=e.max)return i=!1}),this.updateVbarStyle(i),f.showVbar(this.layout,i)},updateVbarStyle:function(t){t?(this.updateMainStyle(),this.updatePanelStyle()):p("div.vbar-main li",this.layout).removeClass("selected")},updateMainStyle:function(){var t=p("div.vbar-main",this.layout),e=p("div.vbar-promotions",t),i=(p("div.vbar-menus",t),p("div.vbar-tools",t)),n=p("ul.vbar-promotions-wrapper",e),o=p("ul.vbar-tools-wrapper",i),a=this.config.promotions,s=this.config.menus,r=this.config.tools,l=0,c=0,t=0;hideWrapperHeight=60,a&&0<a.length&&p.each(a,function(t,e){var i=new Date,n=e.indate&&e.indate.start?b.parseDate(e.indate.start,"yyyy-MM-dd hh:mm:ss"):null,o=e.indate&&e.indate.end?b.parseDate(e.indate.end,"yyyy-MM-dd hh:mm:ss"):null;n&&n.getTime()>i.getTime()||o&&o.getTime()<i.getTime()||e.size&&e.size.height&&(l+=e.size.height)}),c=80,s&&0<s.length&&(c+=63*(s.length-1)),r&&0<r.length&&(t=36*r.length);var h,u,c=p(window).height()-c-hideWrapperHeight;c<=0?h=u=0:l<=0&&0<t?u=t+(h=Math.floor((c-t)/2)):t<=0&&0<l?(u=Math.floor((c-l)/2),h=l+u):(c-=l+t,h=l+Math.floor(c/2),u=t+c-Math.floor(c/2)),n.css({top:h-l}),o.css({top:u-t}),e.css({height:h}),i.css({height:u})},updatePanelStyle:function(){var t=p("li.vbar-panel",this.layout),e=p("div.panel-hd",t),t=p("div.panel-container",t);t&&0<t.length&&t.css({height:p(window).height()-e.height()})},render:function(t,e){if(!this.checkEvent("render",t,e))return!1;var i=this.getItemConfig(t,e);if("link"===t){var n=i&&i.link;return n&&n.href?"function"==typeof n.href?n.href(d):window.open(n.href,n.target):void 0}if("promotion"===t){var o=new Date,a=i.indate&&i.indate.start?b.parseDate(i.indate.start,"yyyy-MM-dd hh:mm:ss"):null,n=i.indate&&i.indate.end?b.parseDate(i.indate.end,"yyyy-MM-dd hh:mm:ss"):null;if(a&&a.getTime()>o.getTime()||n&&n.getTime()<o.getTime())return!1}o=p("[data-type="+t+"][data-name="+e+"]",this.layout);if(o&&0<o.length)return o;var s,e=this.templates[t];return null!==i&&e&&(o=p(e(i)))&&0<o.length&&((e=p("ul.vbar-"+t+"s-wrapper",this.layout))&&0<e.length&&(o.appendTo(e),"panel"===t&&(e=p("div.panel-hd",s=o),(s=p("div.panel-container",s))&&0<s.length&&s.css({height:p(window).height()-e.height()}),new r(s))),i[t]&&i[t].remote&&(s=p(".vbar-"+t+"-wrapper",o),this.renderRemote(i[t].remote,s))),o},renderRemote:function(e,i){var t,n;e&&i&&0<i.length&&(t=p.Deferred(),n=p.Deferred(),e.css&&0<e.css.length&&o.use(e.css,function(){t.resolve()}),e.htm&&0<e.htm.length&&p.ajax({dataType:"jsonp",url:e.htm,data:e.data,timeout:5e3,success:function(t){t.isSuccess&&(t="app"===e.type?t.result[0].html:t.data,0<(t=p(t)).length&&i.html(t),n.resolve())},error:function(){n.resolve()}}),p.when(t,n).done(function(){e.js&&0<e.js.length&&o.use(e.js,function(){e.callback&&e.callback(d,i.children())})}))},open:function(t,e){if(!this.checkEvent("open",t,e))return!1;var i,n,o=this;return this.render(t,e),"panel"===t?(n=this.getItemConfig(t,e),n=(i=p("div.vbar-main li",this.layout)).filter("[data-name="+n.name+"]"),i.removeClass("selected"),n.addClass("selected"),p.when(f.showMain(this.layout,!0)).done(function(){f.showPanel(o.layout,!0,e)})):"bubble"===t&&(p("div.vbar-bubbles li.vbar-bubble[data="+e+"]",this.layout).data("show",!0),p.when(f.showMain(this.layout,!0)).done(function(){f.showBubble(o.layout,!0,e)})),!0},close:function(t,e){return!!this.checkEvent("close",t,e)&&("panel"===t?(p("div.vbar-main li",this.layout).removeClass("selected"),f.showPanel(this.layout,!1,e)):"bubble"===t&&(p("div.vbar-bubbles li.vbar-bubble[data="+e+"]",this.layout).data("show",!1),f.showBubble(this.layout,e,!1)),!0)},hidePanels:function(){p("div.vbar-main li",this.layout).removeClass("selected"),f.showPanel(this.layout,!1)},hidebubbles:function(){f.showBubbles(this.layout,!1)},checkEvent:function(t,e,i){return!!(t&&e&&i)&&(!(!this.validEvents[t]||!this.validEvents[t][e])&&null!==this.getItemConfig(e,i))},updateIcon:function(t,e,i,n){var o=this,a=p("[data-type="+t+"][data-name="+e+"]",this.layout),e=new Image;e.onload=function(){var t=a.find("div.icon"),e=a.find("img.icon");0<t.length?t.css({"background-image":"url("+i+")"}):0<e.length&&e.attr("src",i),o.updateVbarStyle()},e.onerror=function(){var t=a.find("div.icon"),e=a.find("img.icon");0<t.length?t.css({"background-image":"url("+n+")"}):0<e.length&&e.attr("src",n),o.updateVbarStyle()},e.src=i},showVbar:function(){this._setVbarLocalStatus(!0),this.updateVbarStyle(!0),f.showVbar(this.layout,!0)},hideVbar:function(){this._setVbarLocalStatus(!1),this.updateVbarStyle(!1),f.showVbar(this.layout,!1)},_getVbarLocalStatus:function(){try{return!0}catch(t){}return!0},_setVbarLocalStatus:function(t){try{n.setItem("site-vbar-open",t)}catch(t){}},getItemConfig:function(n,o){if(!this.config||!n||!o)return null;var e=this,a=null;return p.each(["promotion","menu","tool"],function(t,i){if(p.each(e.config[i+"s"],function(t,e){if(i===n&&e.name===o||e[n]&&e[n].name===o)return a=p.extend(e,{type:i}),!1}),null!==a)return!1}),a},getItem:function(t,e){var i=p("div.vbar","body");return t&&0<t.length&&(i=p('[data-type="'+t+'"]',i),e&&0<e.length&&(i=p("[data-name="+e+"]",i))),i},template:{layout:'<div class="vbar {{name}} {{if modSpm }}mod-spm{{/if}}" {{if modSpm }}data-spm="{{modSpm}}"{{/if}}>                        <div class="vbar-main" style="display:none">                            <div class="vbar-promotions" data-type="promotions">                                <ul class="vbar-promotions-wrapper"></ul>                            </div>                            <div class="vbar-menus" data-type="menus">                                <ul class="vbar-menus-wrapper"></ul>                            </div>                            <div class="vbar-tools" data-type="tools">                                <ul class="vbar-tools-wrapper"></ul>                            </div>                            <div class="vbar-hide"></div>                        </div>                        <div class="vbar-sub" style="display:none">                            <div class="vbar-tools" data-type="tools">                                <ul class="vbar-tools-wrapper"></ul>                            </div>                            <div class="vbar-show"></div>                        </div>                        <div class="vbar-panels" data-type="panels">                            <div class="vbar-panels-bg"></div>                            <ul class="vbar-panels-wrapper"></ul>                        </div>                        <div class="vbar-bubbles" data-type="bubbles">                            <ul class="vbar-bubbles-wrapper"></ul>                        </div>                    </div>',promotion:'<li class="vbar-promotion {{name}}" title="{{title}}" data-name="{{name}}" data-type="promotion" style="{{if size}}width:{{size.width}}px; height:{{size.height}}px{{/if}}">                           <div class="icon promotion-icon" style="background:url({{icon}}) left bottom no-repeat; {{if size}}width:{{size.width}}px; {{if stretchTop}}height:10000px {{else}}height:{{size.height}}px{{/if}}; margin-left:{{36-size.width}}px{{/if}}">                           </div>                       </li>',menu:'<li class="vbar-menu {{name}}" title="{{title}}" data-name="{{name}}" data-type="menu">                      {{if iconType === "image"}}                      <img class="icon menu-icon" src="{{icon}}"/>                      {{else}}                      <div class="icon menu-icon" style="background-image:url({{icon}});"></div>                      {{/if}}                      <div class="menu-title">{{title}}</div>                  </li>',tool:'<li class="vbar-tool {{name}}" title="{{title}}" data-name="{{name}}" data-type="tool">                      <div class="icon tool-icon" style="background-image:url({{icon}});"></div>                  </li>',panel:'<li class="vbar-panel {{panel.name}}" data-name="{{panel.name}}" data-type="panel">                       <div class="panel-hd">                           <div class="panel-title">{{panel.title}}</div>                           <a href="javascript:;" class="vbar-panel-close" target="_self"></a>                       </div>                       <div class="panel-bd">                           <div class="panel-container">                               <div class="vbar-panel-wrapper">                                   <div class="loading"><img src="//cbu01.alicdn.com/cms/upload/2014/590/188/1881095_2071302863.gif"/></div>                               </div>                           </div>                       </div>                   </li>',bubble:'<li class="vbar-bubble {{bubble.name}}" data-name="{{bubble.name}}" data-hard="{{if bubble.hard}}true{{/if}}" data-show="{{if bubble.show}}true{{/if}}" data-belongtype="{{type}}" data-belongname="{{name}}" data-type="bubble">                        <div class="vbar-bubble-wrapper"></div>                     <a class="vbar-bubble-close" href="javascript:;" target="_self"></a>                    </li>'}},f={showVbar:function(t,e){var i;!t||t.length<=0||(i=this,e?p.when(this.showMain(t,!0)).done(function(){i.showBubbles(t,!0)}):p.when(this.showBubbles(t,!1),this.showPanel(t,!1)).done(function(){p.when(i.showMain(t,!1)).done(function(){i.showBubbles(t,!0)})}))},showMain:function(t,e){var i=p.Deferred();if(t&&!(t.length<=0)){var n=p("div.vbar-main",t),o=p("div.vbar-sub",t);if((!e||n.is(":hidden"))&&(e||o.is(":hidden"))){var a={right:0,opacity:1},s={right:-n.width(),opacity:0},t={right:-o.width(),opacity:0};return e?o.stop(!0,!0).animate(t,150,function(){o.hide(),n.show().stop(!0,!0).animate(a,150,function(){i.resolve()})}):n.stop(!0,!0).animate(s,150,function(){n.hide(),o.show().stop(!0,!0).animate(a,150,function(){i.resolve()})}),d.trigger("show","vbar","main",e),i}}},showPanel:function(t,e,i){if(t&&!(t.length<=0)){var n=this,o=p("div.vbar-main",t),a=p("div.vbar-panels",t),s=p("ul.vbar-panels-wrapper",a),r=p("li.vbar-panel[data-name="+i+"]",a);if(!(e&&!r.is(":hidden")||!e&&a.is(":hidden"))){var l=p.Deferred();return e?(n.showBubbles(t,!1),a.is(":hidden")?(a.find("li.vbar-panel").hide(),r.show(),a.show().stop(!0,!0).animate({right:o.width(),opacity:1},300,function(){l.resolve()})):(a.find("li.vbar-panel").hide(),s.css({top:"100%",opacity:0}),r.show(),s.stop(!0,!0).animate({top:"-100%",opacity:1},300,function(){l.resolve()}))):a.stop(!0,!0).animate({right:-a.width()+o.width(),opacity:0},300,function(){a.hide(),n.showBubbles(t,!0),l.resolve()}),d.trigger("show","panel",i,e),l}}},showBubbles:function(i,n){if(i&&!(i.length<=0)){var o=this,t=p("div.vbar-bubbles li.vbar-bubble",i),a=[],e=p.Deferred();return t.each(function(t,e){e=p(e);a.push(o.showBubble(i,e.data("name"),n))}),p.when(a).done(function(){e.resolve()}),d.trigger("show","bubbles","",n),e}},showBubble:function(t,e,i){if(t&&!(t.length<=0)){var n=p("div.vbar-bubbles",t),o=p("li.vbar-bubble[data-name="+e+"]",n);if(!(o.length<=0||i&&!o.data("show")||!i&&o.is("show"))){var a=p.Deferred();if(i){var s,r=p("div.vbar-main",t),l=p("div.vbar-sub",t),c=r.is(":hidden")?l.is(":hidden")?null:l:r,h="auto",u="auto",t="auto";if(n.show(),c===r){if((s=p("[data-type="+o.data("belongtype")+"][data-name="+o.data("belongname")+"]",r)).length<=0)return!0;o.css({opacity:0,display:"block"}),h=r.width(),u=s.offset().top-p(document).scrollTop()+(s.height()-o.height())/2}else{if(c!==l||!o.data("hard"))return!0;o.css({opacity:0,display:"block"}),s=p("div.vbar-show",l),h=l.width(),t=0<(t=20+(s.height()-o.height())/2)?t:0}o.css({right:h,top:u,bottom:t}),o.show().stop(!0,!0).animate({opacity:1},150,function(){a.resolve()})}else o.stop(!0,!0).animate({opacity:0},150,function(){o.hide(),a.resolve()});return d.trigger("show","bubble",e,i),a}}}},m={_fetchConfigObject:function(t,e){var i=t;/^(https?:)?\/\//i.test(i)||(i="//assets.1688.com/app/vbar/1.0.0/js/"+encodeURIComponent(t)+"-config.js"),o.use(i,function(){var t=o("vbar.config");e(t)})},getConfigNameFromScript:function(){var t=p("script#vbar").get(0);return t&&t.attr("data-config")},checkPointcuts:function(n){p.each(["menu","promotion","tool"],function(t,e){var i=n[e+"s"];p.each(i,function(t,n){n.beforeRender&&d.before("render",e,n.name,n.beforeRender),n.afterRender&&d.after("render",e,n.name,n.afterRender),p.each(["link","panel","bubble"],function(t,e){var i;n[e]&&((i=n[e]).beforeOpen&&d.before("open",e,i.name,i.beforeOpen),i.afterOpen&&d.after("open",e,i.name,i.afterOpen),i.beforeClose&&d.before("close",e,i.name,i.beforeClose),i.afterClose&&d.after("close",e,i.name,i.afterClose),i.beforeRender&&d.before("render",e,i.name,i.beforeRender),i.afterRender&&d.after("render",e,i.name,i.afterRender))})})})},getConfig:function(t,e){t?"object"==typeof t?e(t):"string"==typeof t&&this._fetchConfigObject(t,e):e(null)}};function v(t){window.console&&window.console.error(t)}function g(t,e){if(!t)return-1;for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1}function y(t,e){e?(e="tracelog="+(t=encodeURIComponent(["leftbar",e,t].join("_"))),t="//gm.mmstat.com/btob.6?",void 0!==window.dmtrack?window.dmtrack.clickstat(t,e):(new Image).src=t+"gokey="+encodeURIComponent(e)+"&time="+(new Date).getTime()):window.console&&window.console.error("tracelog needs config name")}d.on=c.on.bind(c),d.off=c.off.bind(c),d.trigger=c.trigger.bind(c),d.getDom=function(){var t=s.call(arguments,0);return u.getItem.apply(u,t)},d.open=function(){var t=s.call(arguments,0);u.open.apply(u,t)},d.render=function(){var t=s.call(arguments,0);u.render.apply(u,t)},d.close=function(){var t=s.call(arguments,0);u.close.apply(u,t)},d.hide=function(){u.hideVbar()},d.show=function(){u.showVbar()},d.config=null,d.init=function(t,i){(p.browser?p.browser.msie&&6===parseInt(p.browser.version,10):/\bMSIE 6/.test(navigator.userAgent)&&!window.opera)||m.getConfig(t,function(t){var e;t?(m.checkPointcuts(t),d.config=t,c.trigger("getConfig",d.config),e=u.init(t),h.init(e,t),i&&i()):v('vbar.init needs a config object or a config name, for example, "default".')})},d.before=function(t,i,n,o){0<=g(["open","close","render"],t)&&l.before(u,t,function(t){var e=t.args[0],t=t.args[1];return i!==e||n!==t||!1!==o(d)})},d.after=function(t,n,o,a){0<=g(["open","close","render"],t)&&l.after(u,t,function(t){var e=t.args[0],i=t.args[1];n===e&&o===i&&a.call(null,d,t.result)})},d.updateIcon=function(t,e,i,n){u.updateIcon(t,e,i,n)},(a=m.getConfigNameFromScript())?d.init(a):o.use(["vbar.config"],function(){a=o("vbar.config"),d.init(a)})}),define(["jquery","vbar","lofty/alicn/aliuser/1.0/aliuser"],function(r,l,t){function e(i){var n,o,a=[];r.each(["promotions","menus","tools"],function(t,e){i[e]&&r.each(i[e],function(t,e){e=e.notify;e&&e.sources&&0<e.sources.length&&(a=a.concat(e.sources))})}),0<a.length&&(n={},o=[],r.each(a,function(t,e){n[e]||(o.push(e),n[e]=1)}),r.each(o,function(t,e){e&&0<e.length&&r.ajax({url:e,dataType:"JSONP",success:function(t){t&&t.topics&&0<t.topics.length&&r.each(t.topics,function(t,e){l.trigger("notify_update",e,!0)})}})}))}null!==t.getLoginId()&&(l.config?e(l.config):l.on("getConfig",e),l.on("notify_update",function(a,s){l.config&&r.each(["promotions","menus","tools"],function(t,n){l.config[n]&&r.each(l.config[n],function(t,e){var i=e.notify;i&&i.topics&&("string"==typeof i.topics&&i.topics===a||r.isArray(i.topics)&&-1<r.inArray(a,i.topics))&&l.getDom(n,e.name).each(function(t,e){var i=r("div.notify",e),n=i.data("topics")||[],o=r.inArray(a,n);s?-1===o&&n.push(a):-1<o&&n.splice(o,1),0===i.length&&((i=r('<div class="notify"></div>')).data("topics",n),i.appendTo(e)),0<n.length?i.show():i.hide()})})})}))}),define(["require","vbar","jquery","lofty/alicn/aliuser/1.0/aliuser","sys/logist/1.0"],function(n,o,a,t,s){o.config?e(o.config):o.on("getConfig",e);var r=t.isLogin();function e(i){a.each(["promotions","menus","tools"],function(t,e){i[e]&&a.each(i[e],function(t,i){a.each(["panel","link","bubble"],function(t,e){i[e]&&i[e].login&&o.before("open",e,i[e].name,function(){return!!r||(0<(t=a("#sys-logist")).length&&!t.is(":hidden")||(n.use("//astyle-src.alicdn.com/sys/css/logist/logist.css"),s.init({source:"bar",tab:"login",onLoginSuccess:function(){window.location.reload()}})),!1);var t})})})})}}));
