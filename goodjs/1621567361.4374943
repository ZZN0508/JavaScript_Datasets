(this.$WP=this.$WP||[]).push(["8rGRxX/VcsofC",(e,t)=>{"use strict";var a,n,s,i,o,r,l,c,d,u,p,m,g,f,k,v,_,b,E,C,h,x,N,w,O,S,P,y,F,D,I=({triggerNext:e,onPopupDismiss:t})=>{var[n]=a.useContext(s),{userId:r,sessionId:d}=a.useContext(i),u="MOBILE"===a.useContext(o).viewportCategory,p=()=>{},m=e||p;return a.useEffect(()=>{(l(d)||r||g(n.page,n.params,u))&&t&&t()},[r,u,t,n,d]),l(d)||r||g(n.page,n.params,u)?null:a.createElement(F,{triggerNext:m,servletName:n.page,onDismiss:()=>{t&&t(),c(d)},trackWouldOpenExplicitPreferences:p,openExplicitPreferences:p,explicitPreferencesEnabled:!1})},A=({localize:e,viewportCategory:t,onDismiss:n,triggerNext:s,adhesionRendered:i,openExplicitPreferences:o,trackWouldOpenExplicitPreferences:r,explicitPreferencesEnabled:l,recordEvent:c,domainName:d,appIntegrationConfig:u,login:p})=>{var[m,g]=a.useState(!1),[f,E]=a.useState(!1),[N,w]=a.useState(void 0),[O,S]=a.useState(!1),{notifyAdhesion:P}=a.useContext(x);P(!O);var y=a.useCallback(()=>{O||S(!0)},[O,S]),F=a.useCallback(()=>{y(),c("facebook_onetap_closed"),n()},[y,c,n]),D=a.useCallback(()=>{g(!0),window.FB.Event.subscribe("xfbml.render",()=>{c("facebook_onetap_rendered")}),window.FB.getLoginStatus(e=>{"connected"===e.status||"not_authorized"===e.status?E(!0):(S(!0),s())})},[g,E,S,s,c]),I=a.useCallback(()=>{var{sdkUrl:e,appId:t,apiVersion:a}=u;if(e&&t&&a){var n=()=>{},i=new Promise(e=>{n=e});!function(e,t,a){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:t,status:!0,cookie:!0}),a()}}(t,a,n),i.then(D)}else s()},[D,u,s]);a.useEffect(()=>{if(O)s();else{c("facebook_onetap_requested");var{sdkUrl:e}=u;k(e||"","MEMX"),I()}},[I,c,s,O,u]);var A,L=a.useCallback(e=>{if(!e)return null;var t=e.split(".",2)[1];if(t){var a=atob(t);try{return JSON.parse(a)}catch(e){c("facebook_onetap_parseSignedRequestFailed")}}return null},[c]),R=a.useCallback(e=>{var t=L(e);t&&t.code&&(v.set("FacebookAuthCode2",t.code,{expires:new Date((new Date).getTime()+5e3),domain:d,path:"/"}),p({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{F()},onSuccess:e=>{e&&e.userId&&(y(),e.hasCreatedMember&&(r&&r(),l&&o&&o()))}}))},[p,y,r,F,d,l,o,L]),T=a.useCallback(()=>{c("facebook_onetap_clicked"),window.FB.getLoginStatus(e=>{if("connected"===e.status){var{authResponse:t}=e;t&&t.accessToken&&R(t.signedRequest)}})},[c,R]),B=a.useCallback(()=>{w(!0)},[w]);if(O||!m||!f)return null;A=i?50:0;var M={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout(()=>{window.FB.XFBML.parse()},50),window.FB.Event.subscribe("auth.authResponseChange",()=>{T()});var V="MOBILE"===t;return a.createElement("div",{className:_("_13PP3UmZ","_5seA5Mso",{"fdgSCRX-":N&&V}),style:{bottom:V?A+"px":"unset"}},a.createElement(C,{onClick:F}),a.createElement("div",{className:"_39vo2u3K"},a.createElement("div",{className:"_2go_bSml"},a.createElement("div",null,M.headline)),a.createElement("p",{className:"C2OeEwFp"},M.subhead),a.createElement("div",{className:"_1iOLA2bX"},a.createElement("div",{className:"_3Nfp_Bpa"},a.createElement("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}}))),a.createElement("div",{className:"_1Pwhi8Gr"},a.createElement(b,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}}))),a.createElement(h,{size:"5x1",position:"sky",callback:B}))},L=({adhesionState:e,triggerNext:t,onPopupDismiss:n})=>{var[{page:l}]=a.useContext(s),u=d.includes(l),{trackWouldOpenExplicitPreferences:p}=N("ONBOARDING","FB_ONETAP"),{open:m,isEnabled:g}=O(),f=a.useCallback(()=>{(u||g||w("account_screen_onb_control"))&&p()},[g,p,u]),k=()=>{},v=()=>{var e=t||k;n&&n(),e()},{localize:_}=E(),b=P(),{viewportCategory:C}=a.useContext(o),{domainName:h}=a.useContext(r),x=S(),F=a.useCallback(e=>{x({module:"facebook_onetap",action:e,context:""+(l||"unknown")})},[l,x]),{locale:I}=a.useContext(r),L=I.code,{userId:R,sessionId:T}=a.useContext(i),[{data:B,fetching:M,error:V}]=y({query:D,variables:{locale:L},pause:!!R});return a.useEffect(()=>{!V&&B&&B.Facebook_getFbConnectConfig||n&&n()},[V,B,n]),M?null:!V&&B&&B.Facebook_getFbConnectConfig?a.createElement(A,{onDismiss:()=>{n&&n(),c(T)},triggerNext:v,adhesionRendered:e,openExplicitPreferences:m,explicitPreferencesEnabled:g,trackWouldOpenExplicitPreferences:f,appIntegrationConfig:B.Facebook_getFbConnectConfig,localize:_,viewportCategory:C,recordEvent:F,domainName:h,login:b}):(v(),null)},R=()=>{var[e,t]=a.useState(!1),[r,c]=a.useState("GOOGLE_ONETAP"),d=(()=>{var[e,t]=a.useState(),[n,s]=a.useState();return a.useEffect(()=>{if(!u()){var e=window.googletag||{cmd:[]};e.cmd.push(()=>{e.pubads().addEventListener("slotRenderEnded",e=>{(null==e?void 0:e.advertiserId)!==p&&s(!0)})})}},[]),a.useEffect(()=>{t(m())},[]),n||e})(),{userId:f,sessionId:k}=a.useContext(i),[{page:v,params:_}]=a.useContext(s),b="MOBILE"===a.useContext(o).viewportCategory;a.useEffect(()=>{l(k)||f||g(v,_,b)?t(!0):e&&t(!1)},[e,f,k,t,v,_,b]);var E=a.useCallback(()=>{c("FACEBOOK_ONETAP")},[c]),C=()=>a.createElement(a.Fragment,null),h=C,x=[],N="registration_dialog";switch(r){case"GOOGLE_ONETAP":x=["google_one_tap","facebook_one_tap"],h=({dismiss:e})=>a.createElement(I,{triggerNext:E,onPopupDismiss:()=>{e()}}),N="google_registration_dialog";break;case"FACEBOOK_ONETAP":x=["google_one_tap","facebook_one_tap"],h=({dismiss:e})=>a.createElement(L,{adhesionState:!!d,onPopupDismiss:()=>{e()}}),N="facebook_registration_dialog"}return n({factory:C,eventTypes:x,key:"skip",tier:100,skip:!0}),n({factory:h,eventTypes:x,key:N,tier:200}),null};return[()=>{F=f.component.onUsage(()=>t("454gno"),"default"),(D=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"FacebookConnectInfoQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locale"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Facebook_getFbConnectConfig"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locale"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sdkUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"apiVersion"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"appId"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":151}}')).__key=0x90736b30f1e1,D.loc.source={body:"90736b30f1e1"},e("default",R)},[e=>a=e,e=>n=e.usePopupHierarchyRender,e=>(s=e.Route,i=e.Visitor,o=e.Device,r=e.Environment),e=>(l=e.shouldSuppressRegistrationDialog,c=e.setRegDialogDismissed,d=e.HOTEL_SERVLETS,u=e.shouldIgnoreAdhesionUnit),e=>(p=e.ADHESION_COLLAPSE_ADVERTISER_ID,m=e.doesAdExistOnPage),e=>g=e.shouldDisableRegDialogForRequiredLoginLithium,e=>(f=e,k=e.importScript),e=>v=e.default,e=>_=e.default,e=>(b=e.UnsafeLocalize,E=e.useLocalize),e=>C=e.CloseIcon,e=>h=e.ListenToGPTSlotRendering,e=>x=e.PromptsContext,e=>N=e.default,e=>w=e.featureIsEnabled,e=>O=e.default,e=>S=e.useGARecorder,e=>P=e.default,e=>y=e.useQuery]]},["cDcdfi","1x56sm","2R4xv2","MWFqPp","Oc3sTL","wU942v","pLbCP4","vmXh3M","jSLlaY","0DsHEV","xegF5W","w2XwHO","HDgDKt","2NwMnm","-i3PJS","x5AnXu","fsml46","mv7yXI","5X2em-"]]);