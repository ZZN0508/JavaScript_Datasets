(window.webpackJsonp=window.webpackJsonp||[]).push([[777],{"Npt/":function(module,exports,__webpack_require__){if("undefined"==typeof window||void 0===window.document)throw new Error("Michelangelo requires a global window and document object.  It is intended to run in the browser, not on the server.");var $=window.$||__webpack_require__("EVdn"),_=__webpack_require__("Yr7j"),d3=__webpack_require__("VphZ");!function(){function f(){}var o,e,C,A,t,P,_,m,y,v,x,b,w,k,S,M,T,D,L,I,E,R,H,O,N=document,l=window,Y=Math,B=Y.round,z=Y.floor,F=Y.ceil,U=Y.max,W=Y.min,G=Y.abs,X=Y.cos,V=Y.sin,j=Y.PI,g=2*j/360,h=navigator.userAgent,a=l.opera,q=/(msie|trident)/i.test(h)&&!a,s=8===N.documentMode,K=/AppleWebKit/.test(h),p=/Firefox/.test(h),Z=/(Mobile|Android|Windows Phone)/.test(h),J="http://www.w3.org/2000/svg",Q=!!N.createElementNS&&!!N.createElementNS(J,"svg").createSVGRect,n=p&&parseInt(h.split("Firefox/")[1],10)<4,u=!Q&&!q&&!!N.createElement("canvas").getContext,c={},tt=0,et=[],d=0,nt="div",it="hidden",rt="highcharts-",ot="visible",at="px",st="none",lt="M",ht="L",ut=/^[0-9]+$/,ct=["plotTop","marginRight","marginBottom","plotLeft"],pt={};(O=l.Highcharts=l.Highcharts?Bt(16,!0):{}).seriesTypes=pt;var dt=O.extend=function(t,e){for(var n in t=t||{},e)t[n]=e[n];return t};function ft(){function r(t,e){var n,i;for(i in"object"!=typeof t&&(t={}),e)e.hasOwnProperty(i)&&((n=e[i])&&"object"==typeof n&&"[object Array]"!==Object.prototype.toString.call(n)&&"renderTo"!==i&&"number"!=typeof n.nodeType?t[i]=r(t[i]||{},n):t[i]=e[i]);return t}var t,e,n=arguments,i={};for(!0===n[0]&&(i=n[1],n=Array.prototype.slice.call(n,2)),e=n.length,t=0;t<e;t++)i=r(i,n[t]);return i}function gt(t,e){return parseInt(t,e||10)}function mt(t){return"string"==typeof t}function yt(t){return t&&"object"==typeof t}function vt(t){return"[object Array]"===Object.prototype.toString.call(t)}function xt(t){return"number"==typeof t}function _t(t){return Y.log(t)/Y.LN10}function bt(t){return Y.pow(10,t)}function wt(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}}function kt(t){return null!=t}function St(t,e,n){var i,r;if(mt(e))kt(n)?t.setAttribute(e,n):t&&t.getAttribute&&(r=t.getAttribute(e));else if(kt(e)&&yt(e))for(i in e)t.setAttribute(i,e[i]);return r}function Mt(t){return vt(t)?t:[t]}var Tt=O.pick=function(){for(var t,e=arguments,n=e.length,i=0;i<n;i++)if(null!=(t=e[i]))return t};function At(t,e){q&&!Q&&e&&void 0!==e.opacity&&(e.filter="alpha(opacity="+100*e.opacity+")"),dt(t.style,e)}function Pt(t,e,n,i,r){t=N.createElement(t);return e&&dt(t,e),r&&At(t,{padding:0,border:st,margin:0}),n&&At(t,n),i&&i.appendChild(t),t}function i(t,e){function n(){}return n.prototype=new t,dt(n.prototype,e),n}function Dt(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function Ct(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)}var Lt,It=O.wrap=function(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(i),n.apply(this,t)}};function Et(t){return 6e4*(v&&v(t)||y||0)}function Rt(t,e){for(var n,i,r,o,a,s,l,h,u,c,p="{",d=!1,f=[];-1!==(s=t.indexOf(p));){if(n=t.slice(0,s),d){for(o=(i=(c=n.split(":")).shift().split(".")).length,a=e,r=0;r<o;r++)a=a[i[r]];c.length&&(l=c.join(":"),h=a,c=u=void 0,c=C.lang,/f$/.test(l)?(u=(u=l.match(/\.([0-9])/))?u[1]:-1,null!==h&&(h=O.numberFormat(h,u,c.decimalPoint,-1<l.indexOf(",")?c.thousandsSep:""))):h=A(l,h),a=h),f.push(a)}else f.push(n);t=t.slice(s+1),p=(d=!d)?"}":"{"}return f.push(t),f.join("")}function Ht(t){return Y.pow(10,z(Y.log(t)/Y.LN10))}function Ot(t,e,n,i,r){var o,a=t,s=t/(n=Tt(n,1));for(e||!(e=[1,2,2.5,5,10])===i&&(1===n?e=[1,2,5,10]:n<=.1&&(e=[1/n])),o=0;o<e.length&&(a=e[o],!(r&&t<=a*n||!r&&s<=(e[o]+(e[o+1]||e[o]))/2));o++);return a*n}function Nt(t,n){for(var i,e=t.length,r=0;r<e;r++)t[r].ss_i=r;for(t.sort(function(t,e){return 0===(i=n(t,e))?t.ss_i-e.ss_i:i}),r=0;r<e;r++)delete t[r].ss_i}function Yt(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n}function zt(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n}function Ft(t,e){for(var n in t)t[n]&&t[n]!==e&&t[n].destroy&&t[n].destroy(),delete t[n]}function Xt(t){e=e||Pt(nt),t&&e.appendChild(t),e.innerHTML=""}function Bt(t,e){t="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw t;l.console&&console.log(t)}function Ut(t,e){return parseFloat(t.toPrecision(e||14))}function Wt(t,e){e.renderer.globalAnimation=Tt(t,e.animation)}A=function(t,e,n){if(!kt(e)||isNaN(e))return C.lang.invalidDate||"";t=Tt(t,"%Y-%m-%d %H:%M:%S");var i,r=new _(e-Et(e)),o=r[b](),a=r[w](),s=r[k](),l=r[S](),h=r[M](),u=C.lang,c=u.weekdays,p=dt({a:c[a].substr(0,3),A:c[a],d:Dt(s),e:s,w:a,b:u.shortMonths[l],B:u.months[l],m:Dt(l+1),y:h.toString().substr(2,2),Y:h,H:Dt(o),k:o,I:Dt(o%12||12),l:o%12||12,M:Dt(r[x]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:Dt(r.getSeconds()),L:Dt(B(e%1e3),3)},O.dateFormats);for(i in p)for(;-1!==t.indexOf("%"+i);)t=t.replace("%"+i,"function"==typeof p[i]?p[i](e):p[i]);return n?t.substr(0,1).toUpperCase()+t.substr(1):t},P={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},O.numberFormat=function(t,e,n,i){var r=C.lang,o=+t||0,a=-1===e?W((o.toString().split(".")[1]||"").length,20):isNaN(e=G(e))?2:e,t=void 0===n?r.decimalPoint:n,e=void 0===i?r.thousandsSep:i,n=o<0?"-":"",r=String(gt(o=G(o).toFixed(a))),i=3<r.length?r.length%3:0;return n+(i?r.substr(0,i)+e:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+e)+(a?t+G(o-r).toFixed(a).slice(2):"")},t={init:function(t,e,n){var i,r,o,a,s,l=t.shift,h=-1<(e=e||"").indexOf("C"),u=h?7:3,c=e.split(" "),p=[].concat(n),n=function(t){for(o=t.length;o--;)t[o]===lt&&t.splice(o+1,0,t[o+1],t[o+2],t[o+1],t[o+2])};if(h&&(n(c),n(p)),t.isArea&&(a=c.splice(c.length-6,6),s=p.splice(p.length-6,6)),l<=p.length/u&&c.length===p.length)for(;l--;)p=[].concat(p).splice(0,u).concat(p);if(t.shift=0,c.length)for(i=p.length;c.length<i;)r=[].concat(c).splice(c.length-u,u),h&&(r[u-6]=r[u-2],r[u-5]=r[u-1]),c=c.concat(r);return a&&(c=c.concat(a),p=p.concat(s)),[c,p]},step:function(t,e,n,i){var r,o=[],a=t.length;if(1===n)o=i;else if(a===e.length&&n<1)for(;a--;)r=parseFloat(t[a]),o[a]=isNaN(r)?t[a]:n*parseFloat(e[a]-r)+r;else o=e;return o}},Lt=$,l.HighchartsAdapter=l.HighchartsAdapter||Lt&&{init:function(i){var e=Lt.fx;Lt.extend(Lt.easing,{easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n}}),Lt.each(["cur","_default","width","height","opacity"],function(n,i){var r,t=e.step;"cur"===i?t=e.prototype:"_default"===i&&Lt.Tween&&(t=Lt.Tween.propHooks[i],i="set"),(r=t[i])&&(t[i]=function(t){var e;if("align"!==(t=n?t:this).prop)return(e=t.elem).attr?e.attr(t.prop,"cur"===i?void 0:t.now):r.apply(this,arguments)})}),It(Lt.cssHooks.opacity,"get",function(t,e,n){return e.attr?e.opacity||0:t.call(this,e,n)}),this.addAnimSetter("d",function(t){var e,n=t.elem;t.started||(e=i.init(n,n.d,n.toD),t.start=e[0],t.end=e[1],t.started=!0),n.attr("d",i.step(t.start,t.end,t.pos,n.toD))}),this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var n=t.length,i=0;i<n;i++)if(!1===e.call(t[i],t[i],i,t))return i},Lt.fn.highcharts=function(){var t,e,n="Chart",i=arguments;return this[0]&&(mt(i[0])&&(n=i[0],i=Array.prototype.slice.call(i,1)),void 0!==(t=i[0])&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new O[n](t,i[1]),e=this),void 0===t&&(e=et[St(this[0],"data-highcharts-chart")])),e}},addAnimSetter:function(t,e){Lt.Tween?Lt.Tween.propHooks[t]={set:e}:Lt.fx.step[t]=e},getScript:Lt.getScript,inArray:Lt.inArray,adapterRun:function(t,e){return Lt(t)[e]()},grep:Lt.grep,map:function(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n[i]=e.call(t[i],t[i],i,t);return n},offset:function(t){return Lt(t).offset()},addEvent:function(t,e,n){Lt(t).bind(e,n)},removeEvent:function(t,e,n){var i=N.removeEventListener?"removeEventListener":"detachEvent";N[i]&&t&&!t[i]&&(t[i]=function(){}),Lt(t).unbind(e,n)},fireEvent:function(t,e,n,i){var r,o=Lt.Event(e),a="detached"+e;!q&&n&&(delete n.layerX,delete n.layerY,delete n.returnValue),dt(o,n),t[e]&&(t[a]=t[e],t[e]=null),Lt.each(["preventDefault","stopPropagation"],function(t,e){var n=o[e];o[e]=function(){try{n.call(o)}catch(t){"preventDefault"===e&&(r=!0)}}}),Lt(t).trigger(o),t[a]&&(t[e]=t[a],t[a]=null),!i||o.isDefaultPrevented()||r||i(o)},washMouseEvent:function(t){var e=t.originalEvent||t;return void 0===e.pageX&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,e,n){var i=Lt(t);t.style||(t.style={}),e.d&&(t.toD=e.d,e.d=1),i.stop(),void 0!==e.opacity&&t.attr&&(e.opacity+="px"),t.hasAnim=1,i.animate(e,n)},stop:function(t){t.hasAnim&&Lt(t).stop()}};var r=l.HighchartsAdapter,Gt=r||{};r&&r.init.call(r,t);var Vt=Gt.adapterRun,jt=Gt.getScript,$t=Gt.inArray,qt=O.each=Gt.each,Kt=Gt.grep,Zt=Gt.offset,Jt=Gt.map,Qt=Gt.addEvent,te=Gt.removeEvent,ee=Gt.fireEvent,ne=Gt.washMouseEvent,ie=Gt.animate,re=Gt.stop,oe=(C={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.1.8/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.1.8/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":O.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Q,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">â—</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Z?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}).plotOptions,r=oe.line;function ae(){var t=C.global,s=t.useUTC,e=s?"getUTC":"get",n=s?"setUTC":"set";_=t.Date||window.Date,y=s&&t.timezoneOffset,v=s&&t.getTimezoneOffset,m=function(t,e,n,i,r,o){var a;return s?(a=_.UTC.apply(0,arguments),a+=Et(a)):a=new _(t,e,Tt(n,1),Tt(i,0),Tt(r,0),Tt(o,0)).getTime(),a},x=e+"Minutes",b=e+"Hours",w=e+"Day",k=e+"Date",S=e+"Month",M=e+"FullYear",T=n+"Milliseconds",D=n+"Seconds",L=n+"Minutes",I=n+"Hours",E=n+"Date",R=n+"Month",H=n+"FullYear"}ae();function se(t){var e,r,n,o=[];return(n=t)&&n.stops?r=Jt(n.stops,function(t){return se(t[1])}):(e=le.exec(n))?o=[gt(e[1]),gt(e[2]),gt(e[3]),parseFloat(e[4],10)]:(e=he.exec(n))?o=[gt(e[1],16),gt(e[2],16),gt(e[3],16),1]:(e=ue.exec(n))&&(o=[gt(e[1]),gt(e[2]),gt(e[3]),1]),{get:function(n){var i;return r?((i=ft(t)).stops=[].concat(i.stops),qt(r,function(t,e){i.stops[e]=[i.stops[e][0],t.get(n)]})):i=o&&!isNaN(o[0])?"rgb"===n?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===n?o[3]:"rgba("+o.join(",")+")":t,i},brighten:function(e){if(r)qt(r,function(t){t.brighten(e)});else if(xt(e)&&0!==e)for(var t=0;t<3;t++)o[t]+=gt(255*e),o[t]<0&&(o[t]=0),255<o[t]&&(o[t]=255);return this},rgba:o,setOpacity:function(t){return o[3]=t,this},raw:t}}var le=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,he=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,ue=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/;function ce(){}(ce.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(t,e){this.element="span"===e?Pt(e):N.createElementNS(J,e),this.renderer=t},animate:function(t,e,n){e=Tt(e,this.renderer.globalAnimation,!0);return re(this),e?(e=ft(e,{}),n&&(e.complete=n),ie(this,t,e)):this.attr(t,null,n),this},colorGradient:function(t,e,n){var i,r,o,a,s,l,h,u,c,p,d=this.renderer,f=[];if(t.linearGradient?i="linearGradient":t.radialGradient&&(i="radialGradient"),i){for(c in r=t[i],o=d.gradients,s=t.stops,u=n.radialReference,vt(r)&&(t[i]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:"userSpaceOnUse"}),r="radialGradient"===i&&u&&!kt(r.gradientUnits)?ft(r,{cx:u[0]-u[2]/2+r.cx*u[2],cy:u[1]-u[2]/2+r.cy*u[2],r:r.r*u[2],gradientUnits:"userSpaceOnUse"}):r)"id"!==c&&f.push(c,r[c]);for(c in s)f.push(s[c]);o[f=f.join(",")]?p=o[f].attr("id"):(r.id=p=rt+tt++,o[f]=a=d.createElement(i).attr(r).add(d.defs),a.stops=[],qt(s,function(t){h=0===t[1].indexOf("rgba")?(h=se(t[1]),l=h.get("rgb"),h.get("a")):(l=t[1],1),t=d.createElement("stop").attr({offset:t[0],"stop-color":l,"stop-opacity":h}).add(a),a.stops.push(t)})),n.setAttribute(e,"url("+d.url+"#"+p+")")}},applyTextShadow:function(t){var e,o=this.element,n=-1!==t.indexOf("contrast"),i={},r=this.renderer.forExport||void 0!==o.style.textShadow&&!q;n&&(i.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(o.style.fill))),K&&(i.textRendering="geometricPrecision"),r?At(o,i):(this.fakeTS=!0,this.ySetter=this.xSetter,e=[].slice.call(o.getElementsByTagName("tspan")),qt(t.split(/\s?,\s?/g),function(t){var n,i,r=o.firstChild;t=t.split(" "),n=t[t.length-1],(i=t[t.length-2])&&qt(e,function(t,e){0===e&&(t.setAttribute("x",o.getAttribute("x")),e=o.getAttribute("y"),t.setAttribute("y",e||0),null===e&&o.setAttribute("y",0)),St(t=t.cloneNode(1),{class:rt+"text-shadow",fill:n,stroke:n,"stroke-opacity":1/U(gt(i),3),"stroke-width":i,"stroke-linejoin":"round"}),o.insertBefore(t,r)})}))},attr:function(t,e,n){var i,r,o,a,s=this.element,l=this;if("string"==typeof t&&void 0!==e&&(i=t,(t={})[i]=e),"string"==typeof t)l=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(i in t)r=t[i],a=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(o||(this.symbolAttr(t),o=!0),a=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),a||(this[i+"Setter"]||this._defaultSetter).call(this,r,i,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,r);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return n&&n(),l},updateShadows:function(t,e){for(var n=this.shadows,i=n.length;i--;)n[i].setAttribute(t,"height"===t?U(e-(n[i].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,n=St(e,"class")||"";return-1===n.indexOf(t)&&St(e,"class",n+" "+t),this},symbolAttr:function(e){var n=this;qt(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(t){n[t]=Tt(e[t],n[t])}),n.attr({d:n.renderer.symbols[n.symbolName](n.x,n.y,n.width,n.height,n)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":st)},crisp:function(t){var e,n={},i=t.strokeWidth||this.strokeWidth||0,r=B(i)%2/2;for(e in t.x=z(t.x||this.x||0)+r,t.y=z(t.y||this.y||0)+r,t.width=z((t.width||this.width||0)-2*r),t.height=z((t.height||this.height||0)-2*r),t.strokeWidth=i,t)this[e]!==t[e]&&(this[e]=n[e]=t[e]);return n},css:function(t){var e,n,i,r=this.styles,o={},a=this.element,s="",l=!r;if(t&&t.color&&(t.fill=t.color),r)for(n in t)t[n]!==r[n]&&(o[n]=t[n],l=!0);if(l){if(e=this.textWidth=t&&t.width&&"text"===a.nodeName.toLowerCase()&&gt(t.width)||this.textWidth,r&&(t=dt(r,o)),this.styles=t,e&&(u||!Q&&this.renderer.forExport)&&delete t.width,q&&!Q)At(this.element,t);else{for(n in i=function(t,e){return"-"+e.toLowerCase()},t)s+=n.replace(/([A-Z])/g,i)+":"+t[n]+";";St(a,"style",s)}e&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var n=this,i=n.element;return Se&&"click"===t?(i.ontouchstart=function(t){n.touchEventFired=_.now(),t.preventDefault(),e.call(i,t)},i.onclick=function(t){(-1===h.indexOf("Android")||1100<_.now()-(n.touchEventFired||0))&&e.call(i,t)}):i["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,n=this.scaleX,i=this.scaleY,r=this.inverted,o=this.rotation,a=this.element;r&&(t+=this.attr("width"),e+=this.attr("height")),e=["translate("+t+","+e+")"],r?e.push("rotate(90) scale(-1,1)"):o&&e.push("rotate("+o+" "+(a.getAttribute("x")||0)+" "+(a.getAttribute("y")||0)+")"),(kt(n)||kt(i))&&e.push("scale("+Tt(n,1)+" "+Tt(i,1)+")"),e.length&&a.setAttribute("transform",e.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var i,r,o={},a=this.renderer,s=a.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,n&&!mt(n)||(this.alignTo=r=n||"renderer",wt(s,this),s.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,r=this.alignTo),n=Tt(n,a[r],a),i=t.align,s=t.verticalAlign,r=(n.x||0)+(t.x||0),a=(n.y||0)+(t.y||0),"right"!==i&&"center"!==i||(r+=(n.width-(t.width||0))/{right:1,center:2}[i]),o[e?"translateX":"x"]=B(r),"bottom"!==s&&"middle"!==s||(a+=(n.height-(t.height||0))/({bottom:1,middle:2}[s]||1)),o[e?"translateY":"y"]=B(a),this[this.placed?"animate":"attr"](o),this.placed=!0,this.alignAttr=o,this},getBBox:function(t){var e,n,i,r,o=this.renderer,a=this.rotation,s=this.element,l=this.styles,h=a*g,u=this.textStr,c=s.style;if(void 0!==u&&(r=["",a||0,l&&l.fontSize,s.style.width].join(","),r=""===u||ut.test(u)?"num:"+u.toString().length+r:u+r),!(e=r&&!t?o.cache[r]:e)){if(s.namespaceURI===J||o.forExport){try{i=this.fakeTS&&function(e){qt(s.querySelectorAll("."+rt+"text-shadow"),function(t){t.style.display=e})},p&&c.textShadow?(n=c.textShadow,c.textShadow=""):i&&i(st),e=s.getBBox?dt({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight},n?c.textShadow=n:i&&i("")}catch(t){}(!e||e.width<0)&&(e={width:0,height:0})}else e=this.htmlGetBBox();o.isSVG&&(n=e.width,i=e.height,q&&l&&"11px"===l.fontSize&&"16.9"===i.toPrecision(3)&&(e.height=i=14),a&&(e.width=G(i*V(h))+G(n*X(h)),e.height=G(i*X(h))+G(n*V(h)))),r&&(o.cache[r]=e)}return e},show:function(t){return this.attr({visibility:t?"inherit":ot})},hide:function(){return this.attr({visibility:it})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,n=this.renderer,i=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&n.buildText(this),this.added=!0,(e=!t||t.handleZ||this.zIndex?this.zIndexSetter():e)||(t?t.element:n.box).appendChild(i),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,n,i=this,r=i.element||{},o=i.shadows,a=i.renderer.isSVG&&"SPAN"===r.nodeName&&i.parentGroup;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,re(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(n=0;n<i.stops.length;n++)i.stops[n]=i.stops[n].destroy();i.stops=null}for(i.safeRemoveChild(r),o&&qt(o,function(t){i.safeRemoveChild(t)});a&&a.div&&0===a.div.childNodes.length;)t=a.parentGroup,i.safeRemoveChild(a.div),delete a.div,a=t;for(e in i.alignTo&&wt(i.renderer.alignedObjects,i),i)delete i[e];return null},shadow:function(t,e,n){var i,r,o,a,s,l,h=[],u=this.element;if(t){for(a=Tt(t.width,3),s=(t.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+Tt(t.offsetX,1)+", "+Tt(t.offsetY,1)+")",i=1;i<=a;i++)o=2*a+1-2*i,St(r=u.cloneNode(0),{isShadow:"true",stroke:t.color||"black","stroke-opacity":s*i,"stroke-width":o,transform:"translate"+l,fill:st}),n&&(St(r,"height",U(St(r,"height")-o,0)),r.cutHeight=o),e?e.element.appendChild(r):u.parentNode.insertBefore(r,u),h.push(r);this.shadows=h}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){t=Tt(this[t],this.element?this.element.getAttribute(t):null,0);return t=/^[\-0-9\.]+$/.test(t)?parseFloat(t):t},dSetter:function(t,e,n){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),n.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(e=(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;e--;)t[e]=gt(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,n){this[e]=t,n.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=N.createElementNS(J,"title"),this.element.appendChild(e)),e.appendChild(N.createTextNode(String(Tt(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,n){"string"==typeof t?n.setAttribute(e,t):t&&this.colorGradient(t,e,n)},visibilitySetter:function(t,e,n){"inherit"===t?n.removeAttribute(e):n.setAttribute(e,t)},zIndexSetter:function(t,e){var n,i,r,o,a,s=this.renderer,l=this.parentGroup,h=(l||s).element||s.box,u=this.element,s=this.added;if(kt(t)&&(u.setAttribute(e,t),this[e]===(t=+t)&&(s=!1),this[e]=t),s){for((t=this.zIndex)&&l&&(l.handleZ=!0),n=h.childNodes,a=0;a<n.length&&!o;a++)r=St(i=n[a],"zIndex"),i!==u&&(gt(r)>t||!kt(t)&&kt(r))&&(h.insertBefore(u,i),o=!0);o||h.appendChild(u)}return o},_defaultSetter:function(t,e,n){n.setAttribute(e,t)}}).yGetter=ce.prototype.xGetter,ce.prototype.translateXSetter=ce.prototype.translateYSetter=ce.prototype.rotationSetter=ce.prototype.verticalAlignSetter=ce.prototype.scaleXSetter=ce.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},ce.prototype["stroke-widthSetter"]=ce.prototype.strokeSetter=function(t,e,n){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],ce.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};function pe(){this.init.apply(this,arguments)}var de,fe,ge;function me(t,e,n,i){this.axis=t,this.pos=e,this.type=n||"",this.isNew=!0,n||i||this.addLabel()}function ye(){for(var t=ge.length,e=0;e<t;e++)ge[e]();ge=[]}pe.prototype={Element:ce,init:function(t,e,n,i,r){var o,a,s=location,i=(o=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(i))).element;t.appendChild(i),-1===t.innerHTML.indexOf("xmlns")&&St(i,"xmlns",J),this.isSVG=!0,this.box=i,this.boxWrapper=o,this.alignedObjects=[],this.url=(p||K)&&N.getElementsByTagName("base").length?s.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(N.createTextNode("Created with Highstock 2.1.8")),this.defs=this.createElement("defs").add(),this.forExport=r,this.gradients={},this.cache={},this.setSize(e,n,!1),p&&t.getBoundingClientRect&&(this.subPixelFix=n=function(){At(t,{left:0,top:0}),a=t.getBoundingClientRect(),At(t,{left:F(a.left)-a.left+at,top:F(a.top)-a.top+at})},n(),Qt(l,"resize",n))},getStyle:function(t){return this.style=dt({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Ft(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&te(l,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(m){function y(t){return i?gt(i):w.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:M&&M.fontSize||w.style.fontSize||12,t).h}function v(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}for(var x,_,b=m.element,w=this,k=w.forExport,t=Tt(m.textStr,"").toString(),e=-1!==t.indexOf("<"),n=b.childNodes,S=St(b,"x"),M=m.styles,T=m.textWidth,i=M&&M.lineHeight,r=M&&M.textShadow,A=M&&"ellipsis"===M.textOverflow,o=n.length,a=T&&!m.added&&this.box;o--;)b.removeChild(n[o]);e||r||A||-1!==t.indexOf(" ")?(x=/<.*style="([^"]+)".*>/,_=/<.*href="(http[^"]+)".*>/,a&&a.appendChild(b),""===(e=e?t.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[t])[e.length-1]&&e.pop(),qt(e,function(t,d){var f,g=0;t=t.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),f=t.split("|||"),qt(f,function(t){if(""!==t||1===f.length){var e,n={},i=N.createElementNS(J,"tspan");if(x.test(t)&&St(i,"style",e=t.match(x)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),_.test(t)&&!k&&(St(i,"onclick",'location.href="'+t.match(_)[1]+'"'),At(i,{cursor:"pointer"}))," "!==(t=v(t.replace(/<(.|\n)*?>/g,"")||" "))){if(i.appendChild(N.createTextNode(t)),g?n.dx=0:d&&null!==S&&(n.x=S),St(i,n),b.appendChild(i),!g&&d&&(!Q&&k&&At(i,{display:"block"}),St(i,"dy",y(i))),T){for(var r,o,a,s=t.replace(/([^\^])-/g,"$1- ").split(" "),l=1<f.length||d||1<s.length&&"nowrap"!==M.whiteSpace,h=[],u=y(i),n=m.rotation,c=t,p=c.length;(l||A)&&(s.length||h.length);)m.rotation=0,a=m.getBBox(!0).width,!Q&&w.forExport&&(a=w.measureSpanWidth(i.firstChild.data,m.styles)),r=T<a,void 0===o&&(o=r),A&&o?(p/=2,""===c||!r&&p<.5?s=[]:(r&&(o=!0),s=[(c=t.substring(0,c.length+(r?-1:1)*F(p)))+(3<T?"â€¦":"")],i.removeChild(i.firstChild))):r&&1!==s.length?(i.removeChild(i.firstChild),h.unshift(s.pop())):(s=h,h=[],s.length&&(St(i=N.createElementNS(J,"tspan"),{dy:u,x:S}),e&&St(i,"style",e),b.appendChild(i)),T<a&&(T=a)),s.length&&i.appendChild(N.createTextNode(s.join(" ").replace(/- /g,"-")));o&&m.attr("title",m.textStr),m.rotation=n}g++}}})}),a&&a.removeChild(b),r&&m.applyTextShadow&&m.applyTextShadow(r)):b.appendChild(N.createTextNode(v(t)))},getContrast:function(t){return 384<(t=se(t).rgba)[0]+t[1]+t[2]?"#000000":"#FFFFFF"},button:function(t,e,n,i,r,o,a,s,l){var h,u,c,p,d,f,g=this.label(t,e,n,l,null,null,null,null,"button"),m=0,l={x1:0,y1:0,x2:0,y2:1};return r=ft({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:l,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r),c=r.style,delete r.style,o=ft(r,{stroke:"#68A",fill:{linearGradient:l,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),p=o.style,delete o.style,a=ft(r,{stroke:"#68A",fill:{linearGradient:l,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),d=a.style,delete a.style,s=ft(r,{style:{color:"#CCC"}},s),f=s.style,delete s.style,Qt(g.element,q?"mouseover":"mouseenter",function(){3!==m&&g.attr(o).css(p)}),Qt(g.element,q?"mouseout":"mouseleave",function(){3!==m&&(h=[r,o,a][m],u=[c,p,d][m],g.attr(h).css(u))}),g.setState=function(t){(g.state=m=t)?2===t?g.attr(a).css(d):3===t&&g.attr(s).css(f):g.attr(r).css(c)},g.on("click",function(t){3!==m&&i.call(g,t)}).attr(r).css(dt({cursor:"default"},c))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=B(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=B(t[2])+e%2/2),t},path:function(t){var e={fill:st};return vt(t)?e.d=t:yt(t)&&dt(e,t),this.createElement("path").attr(e)},circle:function(t,e,n){e=yt(t)?t:{x:t,y:e,r:n},n=this.createElement("circle");return n.xSetter=function(t){this.element.setAttribute("cx",t)},n.ySetter=function(t){this.element.setAttribute("cy",t)},n.attr(e)},arc:function(t,e,n,i,r,o){return yt(t)&&(e=t.y,n=t.r,i=t.innerR,r=t.start,o=t.end,t=t.x),(o=this.symbol("arc",t||0,e||0,n||0,n||0,{innerR:i||0,start:r||0,end:o||0})).r=n,o},rect:function(t,e,n,i,r,o){r=yt(t)?t.r:r;var a=this.createElement("rect"),i=yt(t)?t:void 0===t?{}:{x:t,y:e,width:U(n,0),height:U(i,0)};return void 0!==o&&(i.strokeWidth=o,i=a.crisp(i)),r&&(i.r=r),a.rSetter=function(t){St(this.element,{rx:t,ry:t})},a.attr(i)},setSize:function(t,e,n){var i=this.alignedObjects,r=i.length;for(this.width=t,this.height=e,this.boxWrapper[Tt(n,!0)?"animate":"attr"]({width:t,height:e});r--;)i[r].align()},g:function(t){var e=this.createElement("g");return kt(t)?e.attr({class:rt+t}):e},image:function(t,e,n,i,r){var o={preserveAspectRatio:st};return 1<arguments.length&&dt(o,{x:e,y:n,width:i,height:r}),(o=this.createElement("image").attr(o)).element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,e,n,i,r,o){var a,s,l,h=this.symbols[t],u=h&&h(B(e),B(n),i,r,o),h=/^url\((.*?)\)$/;return u?(a=this.path(u),dt(a,{symbolName:t,x:e,y:n,width:i,height:r}),o&&dt(a,o)):h.test(t)&&(l=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(B((i-e[0])/2),B((r-e[1])/2)))},s=t.match(h)[1],o=c[s]||o&&o.width&&o.height&&[o.width,o.height],(a=this.image(s).attr({x:e,y:n})).isImg=!0,o?l(a,o):(a.attr({width:0,height:0}),Pt("img",{onload:function(){l(a,c[s]=[this.width,this.height])},src:s}))),a},symbols:{circle:function(t,e,n,i){var r=.166*n;return[lt,t+n/2,e,"C",t+n+r,e,t+n+r,e+i,t+n/2,e+i,"C",t-r,e+i,t-r,e,t+n/2,e,"Z"]},square:function(t,e,n,i){return[lt,t,e,ht,t+n,e,t+n,e+i,t,e+i,"Z"]},triangle:function(t,e,n,i){return[lt,t+n/2,e,ht,t+n,e+i,t,e+i,"Z"]},"triangle-down":function(t,e,n,i){return[lt,t,e,ht,t+n,e,t+n/2,e+i,"Z"]},diamond:function(t,e,n,i){return[lt,t+n/2,e,ht,t+n,e+i/2,t+n/2,e+i,t,e+i/2,"Z"]},arc:function(t,e,n,i,r){var o=r.start,a=r.r||n||i,s=r.end-.001,l=r.innerR,h=r.open,u=X(o),n=V(o),i=X(s),s=V(s),o=r.end-o<j?0:1;return[lt,t+a*u,e+a*n,"A",a,a,0,o,1,t+a*i,e+a*s,h?lt:ht,t+l*i,e+l*s,"A",l,l,0,o,0,t+l*u,e+l*n,h?"":"Z"]},callout:function(t,e,n,i,r){var o=W(r&&r.r||0,n,i),a=o+6,s=r&&r.anchorX,l=r&&r.anchorY,r=["M",t+o,e,"L",t+n-o,e,"C",t+n,e,t+n,e,t+n,e+o,"L",t+n,e+i-o,"C",t+n,e+i,t+n,e+i,t+n-o,e+i,"L",t+o,e+i,"C",t,e+i,t,e+i,t,e+i-o,"L",t,e+o,"C",t,e,t,e,t+o,e];return s&&n<s&&e+a<l&&l<e+i-a?r.splice(13,3,"L",t+n,l-6,t+n+6,l,t+n,l+6,t+n,e+i-o):s&&s<0&&e+a<l&&l<e+i-a?r.splice(33,3,"L",t,l+6,t-6,l,t,l-6,t,e+o):l&&i<l&&t+a<s&&s<t+n-a?r.splice(23,3,"L",s+6,e+i,s,e+i+6,s-6,e+i,t+o,e+i):l&&l<0&&t+a<s&&s<t+n-a&&r.splice(3,3,"L",s-6,e,s,e-6,s+6,e,n-o,e),r}},clipRect:function(t,e,n,i){var r=rt+tt++,o=this.createElement("clipPath").attr({id:r}).add(this.defs);return(i=this.rect(t,e,n,i,0).add(o)).id=r,i.clipPath=o,i.count=0,i},text:function(t,e,n,i){var r=u||!Q&&this.forExport,o={};return i&&!this.forExport?this.html(t,e,n):(o.x=Math.round(e||0),n&&(o.y=Math.round(n)),!t&&0!==t||(o.text=t),o=this.createElement("text").attr(o),r&&o.css({position:"absolute"}),i||(o.xSetter=function(t,e,n){for(var i,r=n.getElementsByTagName("tspan"),o=n.getAttribute(e),a=0;a<r.length;a++)(i=r[a]).getAttribute(e)===o&&i.setAttribute(e,t);n.setAttribute(e,t)}),o)},fontMetrics:function(t,e){var n;return t=t||this.style.fontSize,e&&l.getComputedStyle&&(e=e.element||e,t=(n=l.getComputedStyle(e,""))&&n.fontSize),{h:n=(t=/px/.test(t)?gt(t):/em/.test(t)?12*parseFloat(t):12)<24?t+3:B(1.2*t),b:B(.8*n),f:t}},rotCorr:function(t,e,n){var i=t;return e&&n&&(i=U(t*X(e*g),4)),{x:-t/3*V(e*g),y:i}},label:function(t,e,n,i,r,o,a,s,l){var h,u,c,p,d,f,g,m,y=this,v=y.g(l),x=y.text("",0,0,a).attr({zIndex:1}),_=0,b=3,w=0,k=0,S={};function M(){var t,e=x.element.style;u=(void 0===c||void 0===p||v.styles.textAlign)&&kt(x.textStr)&&x.getBBox(),v.width=(c||u.width||0)+2*b+w,v.height=(p||u.height||0)+2*b,g=b+y.fontMetrics(e&&e.fontSize,x).b,m&&(h||(t=B(-_*b)+k,e=(s?-g:0)+k,v.box=h=i?y.symbol(i,t,e,v.width,v.height,S):y.rect(t,e,v.width,v.height,0,S["stroke-width"]),h.isImg||h.attr("fill",st),h.add(v)),h.isImg||h.attr(dt({width:B(v.width),height:B(v.height)},S)),S=null)}function T(){var t=v.styles,e=t&&t.textAlign,n=w+b*(1-_),t=s?0:g;kt(c)&&u&&("center"===e||"right"===e)&&(n+={center:.5,right:1}[e]*(c-u.width)),n===x.x&&t===x.y||(x.attr("x",n),void 0!==t&&x.attr("y",t)),x.x=n,x.y=t}function A(t,e){h?h.attr(t,e):S[t]=e}v.onAdd=function(){x.add(v),v.attr({text:t||0===t?t:"",x:e,y:n}),h&&kt(r)&&v.attr({anchorX:r,anchorY:o})},v.widthSetter=function(t){c=t},v.heightSetter=function(t){p=t},v.paddingSetter=function(t){kt(t)&&t!==b&&(b=v.padding=t,T())},v.paddingLeftSetter=function(t){kt(t)&&t!==w&&(w=t,T())},v.alignSetter=function(t){_={left:0,center:.5,right:1}[t]},v.textSetter=function(t){void 0!==t&&x.textSetter(t),M(),T()},v["stroke-widthSetter"]=function(t,e){t&&(m=!0),k=t%2/2,A(e,t)},v.strokeSetter=v.fillSetter=v.rSetter=function(t,e){"fill"===e&&t&&(m=!0),A(e,t)},v.anchorXSetter=function(t,e){A(e,B(r=t)-k-d)},v.anchorYSetter=function(t,e){A(e,(o=t)-f)},v.xSetter=function(t){v.x=t,_&&(t-=_*((c||u.width)+b)),d=B(t),v.attr("translateX",d)},v.ySetter=function(t){f=v.y=B(t),v.attr("translateY",f)};var P=v.css;return dt(v,{css:function(e){var n;return e&&(n={},e=ft(e),qt(v.textProps,function(t){void 0!==e[t]&&(n[t]=e[t],delete e[t])}),x.css(n)),P.call(v,e)},getBBox:function(){return{width:u.width+2*b,height:u.height+2*b,x:u.x-b,y:u.y-b}},shadow:function(t){return h&&h.shadow(t),v},destroy:function(){te(v.element,"mouseenter"),te(v.element,"mouseleave"),x=x&&x.destroy(),h=h&&h.destroy(),ce.prototype.destroy.call(v),v=y=M=T=A=null}})}},o=pe,dt(ce.prototype,{htmlCss:function(t){var e=this.element,e=t&&"SPAN"===e.tagName&&t.width;return e&&(delete t.width,this.textWidth=e,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=dt(this.styles,t),At(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){var e,n,i,r,t,o,a,s,l,h,u,c,p,d;this.added?(e=this.renderer,n=this.element,i=this.translateX||0,r=this.translateY||0,t=this.x||0,o=this.y||0,s={left:0,center:.5,right:1}[a=this.textAlign||"left"],h=this.shadows,l=this.styles,At(n,{marginLeft:i,marginTop:r}),h&&qt(h,function(t){At(t,{marginLeft:i+1,marginTop:r+1})}),this.inverted&&qt(n.childNodes,function(t){e.invertChild(t,n)}),"SPAN"===n.tagName&&(c=this.rotation,p=gt(this.textWidth),(d=[c,a,n.innerHTML,this.textWidth,this.textAlign].join(","))!==this.cTT&&(u=e.fontMetrics(n.style.fontSize).b,kt(c)&&this.setSpanRotation(c,s,u),(h=Tt(this.elemWidth,n.offsetWidth))>p&&/[ \-]/.test(n.textContent||n.innerText)&&(At(n,{width:p+at,display:"block",whiteSpace:l&&l.whiteSpace||"normal"}),h=p),this.getSpanCorrection(h,u,s,c,a)),At(n,{left:t+(this.xCorr||0)+at,top:o+(this.yCorr||0)+at}),K&&(u=n.offsetHeight),this.cTT=d)):this.alignOnAdd=!0},setSpanRotation:function(t,e,n){var i={},r=q?"-ms-transform":K?"-webkit-transform":p?"MozTransform":a?"-o-transform":"";i[r]=i.transform="rotate("+t+"deg)",i[r+(p?"Origin":"-origin")]=i.transformOrigin=100*e+"% "+n+"px",At(this.element,i)},getSpanCorrection:function(t,e,n){this.xCorr=-t*n,this.yCorr=-e}}),dt(pe.prototype,{html:function(t,e,n){var o=this.createElement("span"),a=o.element,s=o.renderer;return o.textSetter=function(t){t!==a.innerHTML&&delete this.bBox,a.innerHTML=this.textStr=t,o.htmlUpdateTransform()},o.xSetter=o.ySetter=o.alignSetter=o.rotationSetter=function(t,e){o[e="align"===e?"textAlign":e]=t,o.htmlUpdateTransform()},o.attr({text:t,x:B(e),y:B(n)}).css({position:"absolute",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),a.style.whiteSpace="nowrap",o.css=o.htmlCss,s.isSVG&&(o.add=function(t){var e,n,i=s.box.parentNode,r=[];if(this.parentGroup=t){if(!(e=t.div)){for(n=t;n;)r.push(n),n=n.parentGroup;qt(r.reverse(),function(n){var r,t=(t=St(n.element,"class"))&&{className:t};e=n.div=n.div||Pt(nt,t,{position:"absolute",left:(n.translateX||0)+at,top:(n.translateY||0)+at},e||i),r=e.style,dt(n,{translateXSetter:function(t,e){r.left=t+at,n[e]=t,n.doTransform=!0},translateYSetter:function(t,e){r.top=t+at,n[e]=t,n.doTransform=!0}}),It(n,"visibilitySetter",function(t,e,n,i){t.call(this,e,n,i),r[n]=e})})}}else e=i;return e.appendChild(a),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o}),o}}),Q||u||(Ae={init:function(t,e){var n=["<",e,' filled="f" stroked="f"'],i=["position: ","absolute",";"],r=e===nt;"shape"!==e&&!r||i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",r?it:ot),n.push(' style="',i.join(""),'"/>'),e&&(n=r||"span"===e||"img"===e?n.join(""):t.prepVML(n),this.element=Pt(n)),this.renderer=t},add:function(t){var e=this.renderer,n=this.element,i=e.box,r=t&&t.inverted,i=t?t.element||t:i;return r&&e.invertChild(n,i),i.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:ce.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=X(t*g),n=V(t*g);At(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-n,", M21=",n,", M22=",e,", sizingMethod='auto expand')"].join(""):st})},getSpanCorrection:function(t,e,n,i,r){var o,a=i?X(i*g):1,s=i?V(i*g):0,l=Tt(this.elemHeight,this.element.offsetHeight),h=r&&"left"!==r;this.xCorr=a<0&&-t,this.yCorr=s<0&&-l,this.xCorr+=s*e*((o=a*s<0)?1-n:n),this.yCorr-=a*e*(i?o?n:1-n:1),h&&(this.xCorr-=t*n*(a<0?-1:1),i&&(this.yCorr-=l*n*(s<0?-1:1)),At(this.element,{textAlign:r}))},pathToVML:function(t){for(var e=t.length,n=[];e--;)xt(t[e])?n[e]=B(10*t[e])-5:"Z"===t[e]?n[e]="x":(n[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(n[e+5]===n[e+7]&&(n[e+7]+=t[e+7]>t[e+5]?1:-1),n[e+6]===n[e+8]&&(n[e+8]+=t[e+8]>t[e+6]?1:-1)));return n.join(" ")||"x"},clip:function(t){var e,n=this,t=t?(wt(e=t.members,n),e.push(n),n.destroyClip=function(){wt(e,n)},t.getCSS(n)):(n.destroyClip&&n.destroyClip(),{clip:s?"inherit":"rect(auto)"});return n.css(t)},css:ce.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&Xt(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),ce.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=l.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var n;return 9!==(n=(t=t.split(/[ ,]/)).length)&&11!==n||(t[n-4]=t[n-2]=gt(t[n-2])-10*e),t.join(" ")},shadow:function(t,e,n){var i,r,o,a,s,l,h=[],u=this.element,c=this.renderer,p=u.style,d=u.path,f=d=d&&"string"!=typeof d.value?"x":d;if(t){for(s=Tt(t.width,3),l=(t.opacity||.15)/s,i=1;i<=3;i++)o=['<shape isShadow="true" strokeweight="',a=2*s+1-2*i,'" filled="false" path="',f=n?this.cutOffPath(d.value,.5+a):f,'" coordsize="10 10" style="',u.style.cssText,'" />'],r=Pt(c.prepVML(o),null,{left:gt(p.left)+Tt(t.offsetX,1),top:gt(p.top)+Tt(t.offsetY,1)}),n&&(r.cutOff=1+a),o=['<stroke color="',t.color||"black",'" opacity="',l*i,'"/>'],Pt(c.prepVML(o),null,null,r),e?e.element.appendChild(r):u.parentNode.insertBefore(r,u),h.push(r);this.shadows=h}return this},updateShadows:f,setAttr:function(t,e){s?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,n){(n.getElementsByTagName("stroke")[0]||Pt(this.renderer.prepVML(["<stroke/>"]),null,null,n))[e]=t||"solid",this[e]=t},dSetter:function(t,e,n){var i,r=this.shadows;if(this.d=(t=t||[]).join&&t.join(" "),n.path=t=this.pathToVML(t),r)for(i=r.length;i--;)r[i].path=r[i].cutOff?this.cutOffPath(t,r[i].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,n){var i=n.nodeName;"SPAN"===i?n.style.color=t:"IMG"!==i&&(n.filled=t!==st,this.setAttr("fillcolor",this.renderer.color(t,n,e,this)))},opacitySetter:f,rotationSetter:function(t,e,n){n=n.style;this[e]=n[e]=t,n.left=-B(V(t*g)+1)+at,n.top=B(X(t*g))+at},strokeSetter:function(t,e,n){this.setAttr("strokecolor",this.renderer.color(t,n,e))},"stroke-widthSetter":function(t,e,n){n.stroked=!!t,xt(this[e]=t)&&(t+=at),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(e,n,t){"inherit"===e&&(e=ot),this.shadows&&qt(this.shadows,function(t){t.style[n]=e}),"DIV"===t.nodeName&&(e=e===it?"-999em":0,s||(t.style[n]=e?ot:it),n="top"),t.style[n]=e},xSetter:function(t,e,n){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):n.style[e]=t},zIndexSetter:function(t,e,n){n.style[e]=t}},O.VMLElement=Ae=i(ce,Ae),Ae.prototype.ySetter=Ae.prototype.widthSetter=Ae.prototype.heightSetter=Ae.prototype.xSetter,Ce={Element:Ae,isIE8:-1<h.indexOf("MSIE 8.0"),init:function(t,e,n,i){var r;if(this.alignedObjects=[],i=(r=this.createElement(nt).css(dt(this.getStyle(i),{position:"relative"}))).element,t.appendChild(r.element),this.isVML=!0,this.box=i,this.boxWrapper=r,this.cache={},this.setSize(e,n,!1),!N.namespaces.hcv){N.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),n="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{N.createStyleSheet().cssText=n}catch(t){N.styleSheets[0].cssText+=n}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,n,i){var r=this.createElement(),o=yt(t);return dt(r,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:n)-1,height:(o?t.height:i)-1,getCSS:function(t){var e=t.element,n=e.nodeName,i=t.inverted,r=this.top-("shape"===n?e.offsetTop:0),o=this.left,t=o+this.width,e=r+this.height,o={clip:"rect("+B(i?o:r)+"px,"+B(i?e:t)+"px,"+B(i?t:e)+"px,"+B(i?r:o)+"px)"};return!i&&s&&"DIV"===n&&dt(o,{width:t+at,height:e+at}),o},updateClipping:function(){qt(r.members,function(t){t.element&&t.css(r.getCSS(t))})}})},color:function(t,e,n,i){var r,o,a,s,l,h,u,c,p,d,f,g,m,y,v,x,_,b,w,k,S,M,T,A=this,P=/^rgba/,D=st;return t&&t.linearGradient?a="gradient":t&&t.radialGradient&&(a="pattern"),a?(S=t.linearGradient||t.radialGradient,d="",f=t.stops,g=[],m=function(){o=['<fill colors="'+g.join(",")+'" opacity="',u,'" o:opacity2="',h,'" type="',a,'" ',d,'focus="100%" method="any" />'],Pt(A.prepVML(o),null,null,e)},M=f[0],T=f[f.length-1],0<M[0]&&f.unshift([0,M[1]]),T[0]<1&&f.push([1,T[1]]),qt(f,function(t,e){l=P.test(t[1])?(r=se(t[1]),s=r.get("rgb"),r.get("a")):(s=t[1],1),g.push(100*t[0]+"% "+s),e?(u=l,c=s):(h=l,p=s)}),"fill"===n?"gradient"===a?(v=S.x1||S[0]||0,M=S.y1||S[1]||0,T=S.x2||S[2]||0,f=S.y2||S[3]||0,d='angle="'+(90-180*Y.atan((f-M)/(T-v))/j)+'"',m()):(v=S.r,_=x=2*v,b=S.cx,w=S.cy,k=e.radialReference,S=function(){k&&(y=i.getBBox(),b+=(k[0]-y.x)/y.width-.5,w+=(k[1]-y.y)/y.height-.5,x*=k[2]/y.width,_*=k[2]/y.height),d='src="'+C.global.VMLRadialGradientURL+'" size="'+x+","+_+'" origin="0.5,0.5" position="'+b+","+w+'" color2="'+p+'" ',m()},i.added?S():i.onAdd=S,D=c):D=s):D=P.test(t)&&"IMG"!==e.tagName?(r=se(t),o=["<",n,' opacity="',r.get("a"),'"/>'],Pt(this.prepVML(o),null,null,e),r.get("rgb")):((n=e.getElementsByTagName(n)).length&&(n[0].opacity=1,n[0].type="solid"),t),D},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return t=t.join(""),n?-1===(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e):t.replace("<","<hcv:")},text:pe.prototype.html,path:function(t){var e={coordsize:"10 10"};return vt(t)?e.d=t:yt(t)&&dt(e,t),this.createElement("shape").attr(e)},circle:function(t,e,n){var i=this.symbol("circle");return yt(t)&&(n=t.r,e=t.y,t=t.x),i.isCircle=!0,i.r=n,i.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:rt+t,class:rt+t}),this.createElement(nt).attr(e)},image:function(t,e,n,i,r){var o=this.createElement("img").attr({src:t});return 1<arguments.length&&o.attr({x:e,y:n,width:i,height:r}),o},createElement:function(t){return"rect"===t?this.symbol(t):pe.prototype.createElement.call(this,t)},invertChild:function(e,t){var n=this,i=t.style,t="IMG"===e.tagName&&e.style;At(e,{flip:"x",left:gt(i.width)-(t?gt(t.top):1),top:gt(i.height)-(t?gt(t.left):1),rotation:-90}),qt(e.childNodes,function(t){n.invertChild(t,e)})},symbols:{arc:function(t,e,n,i,r){var o=r.start,a=r.end,s=r.r||n||i,l=r.innerR,h=X(o),u=V(o),n=X(a),i=V(a);return a-o==0?["x"]:(s=["wa",t-s,e-s,t+s,e+s,t+s*h,e+s*u,t+s*n,e+s*i],r.open&&!l&&s.push("e",lt,t,e),s.push("at",t-l,e-l,t+l,e+l,t+l*n,e+l*i,t+l*h,e+l*u,"x","e"),s.isArc=!0,s)},circle:function(t,e,n,i,r){return r&&(n=i=2*r.r),r&&r.isCircle&&(t-=n/2,e-=i/2),["wa",t,e,t+n,e+i,t+n,e+i/2,t+n,e+i/2,"e"]},rect:function(t,e,n,i,r){return pe.prototype.symbols[kt(r)&&r.r?"callout":"square"].call(0,t,e,n,i,r)}}},O.VMLRenderer=de=function(){this.init.apply(this,arguments)},de.prototype=ft(pe.prototype,Ce),o=de),pe.prototype.measureSpanWidth=function(t,e){var n=N.createElement("span"),t=N.createTextNode(t);return n.appendChild(t),At(n,e),this.box.appendChild(n),e=n.offsetWidth,Xt(n),e},u&&(O.CanVGRenderer=Ee=function(){J="http://www.w3.org/1999/xhtml"},Ee.prototype.symbols={},ge=[],fe={push:function(t,e){0===ge.length&&jt(e,ye),ge.push(t)}},o=Ee),me.prototype={addLabel:function(){var t,e=this.axis,n=e.options,i=e.chart,r=e.categories,o=e.names,a=this.pos,s=n.labels,l=e.tickPositions,h=a===l[0],u=a===l[l.length-1],r=r?Tt(r[a],o[a],a):a,o=this.label,l=l.info;e.isDatetimeAxis&&l&&(t=n.dateTimeLabelFormats[l.higherRanks[a]||l.unitName]),this.isFirst=h,this.isLast=u,r=e.labelFormatter.call({axis:e,chart:i,isFirst:h,isLast:u,dateTimeLabelFormat:t,value:e.isLog?Ut(bt(r)):r}),kt(o)?o&&o.attr({text:r}):(this.label=o=kt(r)&&s.enabled?i.renderer.text(r,0,0,s.useHTML).css(ft(s.style)).add(e.labelGroup):null,this.labelLength=o&&o.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,n=this.axis,i=t.x,r=n.chart.chartWidth,o=n.chart.spacing,a=Tt(n.labelLeft,W(n.pos,o[3])),s=Tt(n.labelRight,U(n.pos+n.len,r-o[1])),l=this.label,h=this.rotation,u={left:0,center:.5,right:1}[n.labelAlign],c=l.getBBox().width,p=n.slotWidth,d=u,f=1,o={};h?h<0&&i-u*c<a?e=B(i/X(h*g)-a):0<h&&s<i+u*c&&(e=B((r-i)/X(h*g))):(i-u*c<a?p=t.x+p*(1-u)-a:s<i+(1-u)*c&&(p=s-t.x+p*u,f=-1),(p=W(n.slotWidth,p))<n.slotWidth&&"center"===n.labelAlign&&(t.x+=f*(n.slotWidth-p-d*(n.slotWidth-W(c,p)))),(p<c||n.autoRotation&&l.styles.width)&&(e=p)),e&&(o.width=e,n.options.labels.style.textOverflow||(o.textOverflow="ellipsis"),l.css(o))},getPosition:function(t,e,n,i){var r=this.axis,o=r.chart,a=i&&o.oldChartHeight||o.chartHeight;return{x:t?r.translate(e+n,null,null,i)+r.transB:r.left+r.offset+(r.opposite?(i&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:t?a-r.bottom+r.offset-(r.opposite?r.height:0):a-r.translate(e+n,null,null,i)-r.transB}},getLabelPosition:function(t,e,n,i,r,o,a,s){var l=this.axis,h=l.transA,u=l.reversed,c=l.staggerLines,p=l.tickRotCorr||{x:0,y:0},n=Tt(r.y,p.y+(2===l.side?8:-n.getBBox().height/2));return t=t+r.x+p.x-(o&&i?o*h*(u?-1:1):0),e=e+n-(o&&!i?o*h*(u?1:-1):0),c&&(e+=a/(s||1)%c*(l.labelOffset/c)),{x:t,y:B(e)}},getMarkPath:function(t,e,n,i,r,o){return o.crispLine([lt,t,e,ht,t+(r?0:-n),e+(r?n:0)],i)},render:function(t,e,n){var i=this.axis,r=i.options,o=i.chart.renderer,a=i.horiz,s=this.type,l=this.label,h=this.pos,u=r.labels,c=this.gridLine,p=s?s+"Grid":"grid",d=s?s+"Tick":"tick",f=r[p+"LineWidth"],g=r[p+"LineColor"],m=r[p+"LineDashStyle"],y=r[d+"Length"],v=Tt(r[d+"Width"],!s&&i.isXAxis?1:0),x=r[d+"Color"],_=r[d+"Position"],b=this.mark,w=u.step,k=!0,S=i.tickmarkOffset,M=this.getPosition(a,h,S,e),T=M.x,p=M.y,d=a&&T===i.pos+i.len||!a&&p===i.pos?-1:1;n=Tt(n,1),this.isActive=!0,f&&(h=i.getPlotLinePath(h+S,f*d,e,!0),void 0===c&&(g={stroke:g,"stroke-width":f},m&&(g.dashstyle=m),s||(g.zIndex=1),e&&(g.opacity=0),this.gridLine=c=f?o.path(h).attr(g).add(i.gridGroup):null),!e&&c&&h&&c[this.isNew?"attr":"animate"]({d:h,opacity:n})),v&&y&&("inside"===_&&(y=-y),i.opposite&&(y=-y),d=this.getMarkPath(T,p,y,v*d,a,o),b?b.animate({d:d,opacity:n}):this.mark=o.path(d).attr({stroke:x,"stroke-width":v,opacity:n}).add(i.axisGroup)),l&&!isNaN(T)&&(l.xy=M=this.getLabelPosition(T,p,l,a,u,S,t,w),this.isFirst&&!this.isLast&&!Tt(r.showFirstLabel,1)||this.isLast&&!this.isFirst&&!Tt(r.showLastLabel,1)?k=!1:!a||i.isRadial||u.step||u.rotation||e||0===n||this.handleOverflow(M),(k=w&&t%w?!1:k)&&!isNaN(M.y)?(M.opacity=n,l[this.isNew?"attr":"animate"](M),this.isNew=!1):l.attr("y",-9999))},destroy:function(){Ft(this,this.axis)}},O.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},O.PlotLineOrBand.prototype={render:function(){var t,e,n=this,i=n.axis,r=i.horiz,o=n.options,a=o.label,s=n.label,l=o.width,h=o.to,u=o.from,c=kt(u)&&kt(h),p=o.value,d=o.dashStyle,f=n.svgElem,g=[],m=o.color,y=o.zIndex,v=o.events,x={},_=i.chart.renderer;if(i.isLog&&(u=_t(u),h=_t(h),p=_t(p)),l)g=i.getPlotLinePath(p,l),x={stroke:m,"stroke-width":l},d&&(x.dashstyle=d);else{if(!c)return;g=i.getPlotBandPath(u,h,o),m&&(x.fill=m),o.borderWidth&&(x.stroke=o.borderColor,x["stroke-width"]=o.borderWidth)}if(kt(y)&&(x.zIndex=y),f)g?f.animate({d:g},null,f.onGetPath):(f.hide(),f.onGetPath=function(){f.show()},s&&(n.label=s=s.destroy()));else if(g&&g.length&&(n.svgElem=f=_.path(g).attr(x).add(),v))for(e in t=function(e){f.on(e,function(t){v[e].apply(n,[t])})},v)t(e);return a&&kt(a.text)&&g&&g.length&&0<i.width&&0<i.height?(a=ft({align:r&&c&&"center",x:r?!c&&4:10,verticalAlign:!r&&c&&"middle",y:r?c?16:10:c?6:-4,rotation:r&&!c&&90},a),s||(x={align:a.textAlign||a.align,rotation:a.rotation},kt(y)&&(x.zIndex=y),n.label=s=_.text(a.text,0,0,a.useHTML).attr(x).css(a.style).add()),_=[g[1],g[4],c?g[6]:g[1]],x=[g[2],g[5],c?g[7]:g[2]],c=Yt(_),g=Yt(x),s.align(a,!1,{x:c,y:g,width:zt(_)-c,height:zt(x)-g}),s.show()):s&&s.hide(),n},destroy:function(){wt(this.axis.plotLinesAndBands,this),delete this.axis,Ft(this)}};var Gt={getPlotBandPath:function(t,e){e=this.getPlotLinePath(e,null,null,!0),t=this.getPlotLinePath(t,null,null,!0);return t&&e&&t.toString()!==e.toString()?t.push(e[4],e[5],e[1],e[2]):t=null,t},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var n=new O.PlotLineOrBand(this,t).render(),i=this.userOptions;return n&&(e&&(i[e]=i[e]||[],i[e].push(t)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=this.options,i=this.userOptions,r=t.length;r--;)t[r].id===e&&t[r].destroy();qt([n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]],function(t){for(r=t.length;r--;)t[r].id===e&&wt(t,t[r])})}},ve=O.Axis=function(){this.init.apply(this,arguments)};ve.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return O.numberFormat(this.total,-1)},style:ft(oe.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(t,e){var n=e.isX;this.chart=t,this.horiz=t.inverted?!n:n,this.isXAxis=n,this.coll=n?"xAxis":"yAxis",this.opposite=e.opposite,this.side=e.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var i=this.options,r=i.type,o="datetime"===r;this.labelFormatter=i.labels.formatter||this.defaultLabelFormatter,this.userOptions=e,this.minPixelPadding=0,this.reversed=i.reversed,this.zoomEnabled=!1!==i.zoomEnabled,this.categories=i.categories||"category"===r,this.names=this.names||[],this.isLog="logarithmic"===r,this.isDatetimeAxis=o,this.isLinked=kt(i.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=i.minRange||i.maxZoom,this.range=i.range,this.offset=i.offset||0,this.stacks={},this.oldStacks={},this.stacksTouched=0,this.max=null,this.min=null,this.crosshair=Tt(i.crosshair,Mt(t.options.tooltip.crosshairs)[n?0:1],!1);var a,s=this.options.events;for(a in-1===$t(this,t.axes)&&(n&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&n&&void 0===this.reversed&&(this.reversed=!0),this.removePlotBand=this.removePlotBandOrLine,this.removePlotLine=this.removePlotBandOrLine,s)Qt(this,a,s[a]);this.isLog&&(this.val2lin=_t,this.lin2val=bt)},setOptions:function(t){this.options=ft(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],ft(C[this.coll],t))},defaultLabelFormatter:function(){var t,e,n=this.axis,i=this.value,r=n.categories,o=this.dateTimeLabelFormat,a=C.lang.numericSymbols,s=a&&a.length,l=n.options.labels.format,h=n.isLog?i:n.tickInterval;if(l)e=Rt(l,this);else if(r)e=i;else if(o)e=A(o,i);else if(s&&1e3<=h)for(;s--&&void 0===e;)h>=(t=Math.pow(1e3,s+1))&&10*i%t==0&&null!==a[s]&&(e=O.numberFormat(i/t,-1)+a[s]);return e=void 0===e?1e4<=G(i)?O.numberFormat(i,-1):O.numberFormat(i,-1,void 0,""):e},getSeriesExtremes:function(){var i=this,r=i.chart;i.hasVisibleSeries=!1,i.dataMin=i.dataMax=i.ignoreMinPadding=i.ignoreMaxPadding=null,i.buildStacks&&i.buildStacks(),qt(i.series,function(t){var e,n;!t.visible&&r.options.chart.ignoreHiddenSeries||(n=t.options.threshold,i.hasVisibleSeries=!0,i.isLog&&n<=0&&(n=null),i.isXAxis?(e=t.xData).length&&(i.dataMin=W(Tt(i.dataMin,e[0]),Yt(e)),i.dataMax=U(Tt(i.dataMax,e[0]),zt(e))):(t.getExtremes(),e=t.dataMax,kt(t=t.dataMin)&&kt(e)&&(i.dataMin=W(Tt(i.dataMin,t),t),i.dataMax=U(Tt(i.dataMax,e),e)),kt(n)&&(i.dataMin>=n?(i.dataMin=n,i.ignoreMinPadding=!0):i.dataMax<n&&(i.dataMax=n,i.ignoreMaxPadding=!0))))})},translate:function(t,e,n,i,r,o){var a,s=this.linkedParent||this,l=1,h=0,u=i?s.oldTransA:s.transA,c=i?s.oldMin:s.min,i=s.minPixelPadding,r=(s.doPostTranslate||s.isLog&&r)&&s.lin2val,u=u||s.transA;return n&&(l*=-1,h=s.len),s.reversed&&(h-=(l*=-1)*(s.sector||s.len)),e?(t=t*l+h,a=(t-=i)/u+c,r&&(a=s.lin2val(a))):a=l*((t=r?s.val2lin(t):t)-c)*u+h+l*i+(xt(o="between"===o?.5:o)?u*o*s.pointRange:0),a},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,n,i,r){function o(t,e,n){return(t<e||n<t)&&(i?t=W(U(e,t),n):s=!0),t}var a,s,l=this.chart,h=this.left,u=this.top,c=n&&l.oldChartHeight||l.chartHeight,p=n&&l.oldChartWidth||l.chartWidth,d=this.transB;return r=Tt(r,this.translate(t,null,null,n)),t=a=B(r+d),d=n=B(c-r-d),isNaN(r)?s=!0:this.horiz?(d=u,n=c-this.bottom,t=a=o(t,h,h+this.width)):(t=h,a=p-this.right,d=n=o(d,u,u+this.height)),s&&!i?null:l.renderer.crispLine([lt,t,d,ht,a,n],e||1)},getLinearTickPositions:function(t,e,n){var i,r,o=Ut(z(e/t)*t),a=Ut(F(n/t)*t),s=[];if(e===n&&xt(e))return[e];for(i=o;i<=a&&(s.push(i),(i=Ut(i+t))!==r);)r=i;return s},getMinorTickPositions:function(){var t,e,n,i=this.options,r=this.tickPositions,o=this.minorTickInterval,a=[],s=this.pointRangePadding||0,l=this.min-s,h=this.max+s,s=h-l;if(s&&s/o<this.len/3)if(this.isLog)for(n=r.length,e=1;e<n;e++)a=a.concat(this.getLogTickPositions(o,r[e-1],r[e],!0));else if(this.isDatetimeAxis&&"auto"===i.minorTickInterval)a=a.concat(this.getTimeTicks(this.normalizeTimeTickInterval(o),l,h,i.startOfWeek));else for(t=l+(r[0]-l)%o;t<=h;t+=o)a.push(t);return 0!==a.length&&this.trimTicks(a,i.startOnTick,i.endOnTick),a},adjustForMinRange:function(){var e,n,i,r,o,t,a,s,l=this.options,h=this.min,u=this.max,c=this.dataMax-this.dataMin>=this.minRange;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(kt(l.min)||kt(l.max)?this.minRange=null:(qt(this.series,function(t){for(r=t.xData,o=t.xIncrement?1:r.length-1,n=o;0<n;n--)i=r[n]-r[n-1],(void 0===e||i<e)&&(e=i)}),this.minRange=W(5*e,this.dataMax-this.dataMin))),u-h<this.minRange&&(s=[h-(t=((a=this.minRange)-u+h)/2),Tt(l.min,h-t)],c&&(s[2]=this.dataMin),t=[(h=zt(s))+a,Tt(l.max,h+a)],c&&(t[2]=this.dataMax),(u=Yt(t))-h<a&&(s[0]=u-a,s[1]=Tt(l.min,u-a),h=zt(s))),this.min=h,this.max=u},setAxisTranslation:function(t){var r,o=this,a=o.max-o.min,s=o.axisPointRange||0,l=0,h=0,e=o.linkedParent,u=!!o.categories,n=o.transA,c=o.isXAxis;(c||u||s)&&(e?(l=e.minPointOffset,h=e.pointRangePadding):qt(o.series,function(t){var e=u?1:c?t.pointRange:o.axisPointRange||0,n=t.options.pointPlacement,i=t.closestPointRange;s=U(s,e=a<e?0:e),o.single||(l=U(l,mt(n)?0:e/2),h=U(h,"on"===n?0:e)),!t.noSharedTooltip&&kt(i)&&(r=kt(r)?W(r,i):i)}),e=o.ordinalSlope&&r?o.ordinalSlope/r:1,o.minPointOffset=l*=e,o.pointRangePadding=h*=e,o.pointRange=W(s,a),c&&(o.closestPointRange=r)),t&&(o.oldTransA=n),o.translationSlope=o.transA=n=o.len/(a+h||1),o.transB=o.horiz?o.left:o.bottom,o.minPixelPadding=n*l},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var e,n=this,i=n.chart,r=n.options,o=n.isLog,a=n.isDatetimeAxis,s=n.isXAxis,l=n.isLinked,h=r.maxPadding,u=r.minPadding,c=r.tickInterval,p=r.tickPixelInterval,d=n.categories;a||d||l||this.getTickAmount(),l?(n.linkedParent=i[n.coll][r.linkedTo],e=n.linkedParent.getExtremes(),n.min=Tt(e.min,e.dataMin),n.max=Tt(e.max,e.dataMax),r.type!==n.linkedParent.options.type&&Bt(11,1)):(n.min=Tt(n.userMin,r.min,n.dataMin),n.max=Tt(n.userMax,r.max,n.dataMax)),o&&(!t&&W(n.min,Tt(n.dataMin,n.min))<=0&&Bt(10,1),n.min=Ut(_t(n.min),15),n.max=Ut(_t(n.max),15)),n.range&&kt(n.max)&&(n.userMin=n.min=U(n.min,n.minFromRange()),n.userMax=n.max,n.range=null),n.beforePadding&&n.beforePadding(),n.adjustForMinRange(),d||n.axisPointRange||n.usePercentage||l||!kt(n.min)||!kt(n.max)||(e=n.max-n.min)&&(kt(r.min)||kt(n.userMin)||!u||!(n.dataMin<0)&&n.ignoreMinPadding||(n.min-=e*u),kt(r.max)||kt(n.userMax)||!h||!(0<n.dataMax)&&n.ignoreMaxPadding||(n.max+=e*h)),xt(r.floor)&&(n.min=U(n.min,r.floor)),xt(r.ceiling)&&(n.max=W(n.max,r.ceiling)),n.min===n.max||void 0===n.min||void 0===n.max?n.tickInterval=1:l&&!c&&p===n.linkedParent.options.tickPixelInterval?n.tickInterval=c=n.linkedParent.tickInterval:n.tickInterval=Tt(c,this.tickAmount?(n.max-n.min)/U(this.tickAmount-1,1):void 0,d?1:(n.max-n.min)*p/U(n.len,p)),s&&!t&&qt(n.series,function(t){t.processData(n.min!==n.oldMin||n.max!==n.oldMax)}),n.setAxisTranslation(!0),n.beforeSetTickPositions&&n.beforeSetTickPositions(),n.postProcessTickInterval&&(n.tickInterval=n.postProcessTickInterval(n.tickInterval)),n.pointRange&&(n.tickInterval=U(n.pointRange,n.tickInterval)),t=Tt(r.minTickInterval,n.isDatetimeAxis&&n.closestPointRange),!c&&n.tickInterval<t&&(n.tickInterval=t),a||o||c||(n.tickInterval=Ot(n.tickInterval,null,Ht(n.tickInterval),Tt(r.allowDecimals,!(.5<n.tickInterval&&n.tickInterval<5&&1e3<n.max&&n.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(n.tickInterval=n.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e,n=this.options,i=n.tickPositions,r=n.tickPositioner,o=n.startOnTick,a=n.endOnTick;this.tickmarkOffset=this.categories&&"between"===n.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===n.minorTickInterval&&this.tickInterval?this.tickInterval/5:n.minorTickInterval,this.tickPositions=t=i&&i.slice(),t||((t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,n.units),this.min,this.max,n.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max)).length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,(r=r&&r.apply(this,[this.min,this.max]))&&(this.tickPositions=t=r)),this.isLinked||(this.trimTicks(t,o,a),this.min===this.max&&kt(this.min)&&!this.tickAmount&&(e=!0,this.min-=.5,this.max+=.5),this.single=e,i||r||this.adjustTickAmount())},trimTicks:function(t,e,n){var i=t[0],r=t[t.length-1],o=this.minPointOffset||0;e?this.min=i:this.min-o>i&&t.shift(),n?this.max=r:this.max+o<r&&t.pop(),0===t.length&&kt(i)&&t.push((r+i)/2)},getTickAmount:function(){var i,r={},t=this.options,e=t.tickAmount,n=t.tickPixelInterval;(e=!kt(t.tickInterval)&&this.len<n&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick?2:e)||!1===this.chart.options.chart.alignTicks||!1===t.alignTicks||(qt(this.chart[this.coll],function(t){var e=t.options,n=t.horiz,e=[n?e.left:e.top,n?e.width:e.height,e.pane].join(",");r[e]?t.series.length&&(i=!0):r[e]=1}),i&&(e=F(this.len/n)+1)),e<4&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t,e,n=this.tickInterval,i=this.tickPositions,r=this.tickAmount,o=this.finalTickAmt,a=i&&i.length;if(a<r){for(;i.length<r;)i.push(Ut(i[i.length-1]+n));this.transA*=(a-1)/(r-1),this.max=i[i.length-1]}else r<a&&(this.tickInterval*=2,this.setTickPositions());if(kt(o)){for(t=e=i.length;t--;)(3===o&&t%2==1||o<=2&&0<t&&t<e-1)&&i.splice(t,1);this.finalTickAmt=void 0}},setScale:function(){var e,t;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),t=this.len!==this.oldAxisLength,qt(this.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(e=!0)}),t||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=t||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(t,e,n,i,r){var o=this,a=o.chart;n=Tt(n,!0),qt(o.series,function(t){delete t.kdTree}),r=dt(r,{min:t,max:e}),ee(o,"setExtremes",r,function(){o.userMin=t,o.userMax=e,o.eventArgs=r,n&&a.redraw(i)})},zoom:function(t,e){var n=this.dataMin,i=this.dataMax,r=this.options,o=W(n,Tt(r.min,n)),r=U(i,Tt(r.max,i));return this.allowZoomOutside||(kt(n)&&t<=o&&(t=o),kt(i)&&r<=e&&(e=r)),this.displayBtn=void 0!==t||void 0!==e,this.setExtremes(t,e,!1,void 0,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,n=e.offsetLeft||0,i=e.offsetRight||0,r=this.horiz,o=Tt(e.width,t.plotWidth-n+i),a=Tt(e.height,t.plotHeight),i=Tt(e.top,t.plotTop),e=Tt(e.left,t.plotLeft+n),n=/%$/;n.test(a)&&(a=parseFloat(a)/100*t.plotHeight),n.test(i)&&(i=parseFloat(i)/100*t.plotHeight+t.plotTop),this.left=e,this.top=i,this.width=o,this.height=a,this.bottom=t.chartHeight-a-i,this.right=t.chartWidth-o-e,this.len=U(r?o:a,0),this.pos=r?e:i},getExtremes:function(){var t=this.isLog;return{min:t?Ut(bt(this.min)):this.min,max:t?Ut(bt(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,n=e?bt(this.min):this.min,e=e?bt(this.max):this.max;return null===t?t=e<0?e:n:t<n?t=n:e<t&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){t=(Tt(t,0)-90*this.side+720)%360;return 15<t&&t<165?"right":195<t&&t<345?"left":"center"},unsquish:function(){function n(t){return(t=1<(t/=u||1)?F(t):1)*l}var i,r,t,e=this.chart,o=this.ticks,a=this.options.labels,s=this.horiz,l=this.tickInterval,h=l,u=this.len/(((this.categories?1:0)+this.max-this.min)/l),c=a.rotation,p=e.renderer.fontMetrics(a.style.fontSize,o[0]&&o[0].label),d=Number.MAX_VALUE;return s?(t=kt(c)?[c]:u<Tt(a.autoRotationLimit,80)&&!a.staggerLines&&!a.step&&a.autoRotation)&&qt(t,function(t){var e;(t===c||t&&-90<=t&&t<=90)&&(e=(r=n(G(p.h/V(g*t))))+G(t/360))<d&&(d=e,i=t,h=r)}):a.step||(h=n(p.h)),this.autoRotation=t,this.labelRotation=i,h},renderUnsquish:function(){var n,t,e,i=this.chart,r=i.renderer,o=this.tickPositions,a=this.ticks,s=this.options.labels,l=this.horiz,h=i.margin,u=this.categories?o.length:o.length-1,c=this.slotWidth=l&&!s.step&&!s.rotation&&(this.staggerLines||1)*i.plotWidth/u||!l&&(h[3]&&h[3]-i.spacing[3]||.33*i.chartWidth),u=U(1,B(c-2*(s.padding||5))),p={},d=r.fontMetrics(s.style.fontSize,a[0]&&a[0].label),h=s.style.textOverflow,f=0;if(mt(s.rotation)||(p.rotation=s.rotation||0),this.autoRotation)qt(o,function(t){(t=a[t])&&t.labelLength>f&&(f=t.labelLength)}),u<f&&f>d.h?p.rotation=this.labelRotation:this.labelRotation=0;else if(c&&(n={width:u+at},!h))for(n.textOverflow="clip",t=o.length;!l&&t--;)e=o[t],(e=a[e].label)&&("ellipsis"===e.styles.textOverflow&&e.css({textOverflow:"clip"}),e.getBBox().height>this.len/o.length-(d.h-d.f)&&(e.specCss={textOverflow:"ellipsis"}));p.rotation&&(n={width:(f>.5*i.chartHeight?.33*i.chartHeight:i.chartHeight)+at},h||(n.textOverflow="ellipsis")),this.labelAlign=p.align=s.align||this.autoLabelAlign(this.labelRotation),qt(o,function(t){var e=a[t],t=e&&e.label;t&&(n&&t.css(ft(n,t.specCss)),delete t.specCss,t.attr(p),e.rotation=p.rotation)}),this.tickRotCorr=r.rotCorr(d.b,this.labelRotation||0,2===this.side)},hasData:function(){return this.hasVisibleSeries||kt(this.min)&&kt(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,n=this,i=n.chart,r=i.renderer,o=n.options,a=n.tickPositions,s=n.ticks,l=n.horiz,h=n.side,u=i.inverted?[1,0,3,2][h]:h,c=0,p=0,d=o.title,f=o.labels,g=0,m=i.axisOffset,y=i.clipOffset,v=[-1,1,1,-1][h],x=n.hasData();if(n.showAxis=i=x||Tt(o.showEmpty,!0),n.staggerLines=n.horiz&&f.staggerLines,n.axisGroup||(n.gridGroup=r.g("grid").attr({zIndex:o.gridZIndex||1}).add(),n.axisGroup=r.g("axis").attr({zIndex:o.zIndex||2}).add(),n.labelGroup=r.g("axis-labels").attr({zIndex:f.zIndex||7}).addClass(rt+n.coll.toLowerCase()+"-labels").add()),x||n.isLinked)qt(a,function(t){s[t]?s[t].addLabel():s[t]=new me(n,t)}),n.renderUnsquish(),qt(a,function(t){0!==h&&2!==h&&{1:"left",3:"right"}[h]!==n.labelAlign||(g=U(s[t].getLabelSize(),g))}),n.staggerLines&&(g*=n.staggerLines,n.labelOffset=g);else for(e in s)s[e].destroy(),delete s[e];d&&d.text&&!1!==d.enabled&&(n.axisTitle||(n.axisTitle=r.text(d.text,0,0,d.useHTML).attr({zIndex:7,rotation:d.rotation||0,align:d.textAlign||{low:"left",middle:"center",high:"right"}[d.align]}).addClass(rt+this.coll.toLowerCase()+"-title").css(d.style).add(n.axisGroup),n.axisTitle.isNew=!0),i&&(c=n.axisTitle.getBBox()[l?"height":"width"],p=kt(t=d.offset)?0:Tt(d.margin,l?5:10)),n.axisTitle[i?"show":"hide"]()),n.offset=v*Tt(o.offset,m[h]),n.tickRotCorr=n.tickRotCorr||{x:0,y:0},i=2===h?n.tickRotCorr.y:0,i=g+p+(g&&v*(l?Tt(f.y,n.tickRotCorr.y+8):f.x)-i),n.axisTitleMargin=Tt(t,i),m[h]=U(m[h],n.axisTitleMargin+c+v*n.offset,i),o=o.offset?0:2*z(o.lineWidth/2),y[u]=U(y[u],o)},getLinePath:function(t){var e=this.chart,n=this.opposite,i=this.offset,r=this.horiz,o=this.left+(n?this.width:0)+i,i=e.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(t*=-1),e.renderer.crispLine([lt,r?this.left:o,r?i:this.top,ht,r?e.chartWidth-this.right:o,r?i:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,n=this.top,i=this.len,r=this.options.title,o=t?e:n,a=this.opposite,s=this.offset,l=r.x||0,h=r.y||0,u=gt(r.style.fontSize||12),r={low:o+(t?0:i),middle:o+i/2,high:o+(t?i:0)}[r.align],u=(t?n+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:t?r+l:u+(a?this.width:0)+s+l,y:t?u+h-(a?this.height:0)+s:r+h}},render:function(){var t,n,i,r=this,a=r.chart,e=a.renderer,o=r.options,s=r.isLog,l=r.isLinked,h=r.tickPositions,u=r.axisTitle,c=r.ticks,p=r.minorTicks,d=r.alternateBands,f=o.stackLabels,g=o.alternateGridColor,m=r.tickmarkOffset,y=o.lineWidth,v=a.hasRendered&&kt(r.oldMin)&&!isNaN(r.oldMin),x=r.showAxis,_=e.globalAnimation;r.labelEdge.length=0,r.overlap=!1,qt([c,p,d],function(t){for(var e in t)t[e].isActive=!1}),(r.hasData()||l)&&(r.minorTickInterval&&!r.categories&&qt(r.getMinorTickPositions(),function(t){p[t]||(p[t]=new me(r,t,"minor")),v&&p[t].isNew&&p[t].render(null,!0),p[t].render(null,!1,1)}),h.length&&(qt(h,function(t,e){(!l||t>=r.min&&t<=r.max)&&(c[t]||(c[t]=new me(r,t)),v&&c[t].isNew&&c[t].render(e,!0,.1),c[t].render(e))}),m&&(0===r.min||r.single)&&(c[-1]||(c[-1]=new me(r,-1,null,!0)),c[-1].render(-1))),g&&qt(h,function(t,e){e%2==0&&t<r.max&&(d[t]||(d[t]=new O.PlotLineOrBand(r)),n=t+m,i=void 0!==h[e+1]?h[e+1]+m:r.max,d[t].options={from:s?bt(n):n,to:s?bt(i):i,color:g},d[t].render(),d[t].isActive=!0)}),r._addedPlotLB||(qt((o.plotLines||[]).concat(o.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),qt([c,p,d],function(t){function e(){for(i=r.length;i--;)t[r[i]]&&!t[r[i]].isActive&&(t[r[i]].destroy(),delete t[r[i]])}var n,i,r=[],o=_?_.duration||500:0;for(n in t)t[n].isActive||(t[n].render(n,!1,0),t[n].isActive=!1,r.push(n));t!==d&&a.hasRendered&&o?o&&setTimeout(e,o):e()}),y&&(t=r.getLinePath(y),r.axisLine?r.axisLine.animate({d:t}):r.axisLine=e.path(t).attr({stroke:o.lineColor,"stroke-width":y,zIndex:7}).add(r.axisGroup),r.axisLine[x?"show":"hide"]()),u&&x&&(u[u.isNew?"attr":"animate"](r.getTitlePosition()),u.isNew=!1),f&&f.enabled&&r.renderStackTotals(),r.isDirty=!1},redraw:function(){this.render(),qt(this.plotLinesAndBands,function(t){t.render()}),qt(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,n,i=this,r=i.stacks,o=i.plotLinesAndBands;for(e in t||te(i),r)Ft(r[e]),r[e]=null;for(qt([i.ticks,i.minorTicks,i.alternateBands],function(t){Ft(t)}),n=o.length;n--;)o[n].destroy();qt(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){i[t]&&(i[t]=i[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){var n,i=this.crosshair,r=i.animation;!this.crosshair||!1===(kt(e)||!Tt(this.crosshair.snap,!0))||e&&e.series&&e.series[this.coll]!==this?this.hideCrosshair():(Tt(i.snap,!0)?kt(e)&&(n=this.isXAxis?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,null!==(n=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:Tt(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,n)||null)?this.cross?this.cross.attr({visibility:ot})[r?"animate":"attr"]({d:n},r):(r=this.categories&&!this.isRadial,r={"stroke-width":i.width||(r?this.transA:1),stroke:i.color||(r?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:i.zIndex||2},i.dashStyle&&(r.dashstyle=i.dashStyle),this.cross=this.chart.renderer.path(n).attr(r).add()):this.hideCrosshair())},hideCrosshair:function(){this.cross&&this.cross.hide()}},dt(ve.prototype,Gt),ve.prototype.getTimeTicks=function(t,e,n,i){var r,o=[],a={},s=C.global.useUTC,l=new _(e-Et(e)),h=t.unitRange,u=t.count;if(kt(e)){l[T](P.second<=h?0:u*z(l.getMilliseconds()/u)),P.second<=h&&l[D](P.minute<=h?0:u*z(l.getSeconds()/u)),P.minute<=h&&l[L](P.hour<=h?0:u*z(l[x]()/u)),P.hour<=h&&l[I](P.day<=h?0:u*z(l[b]()/u)),P.day<=h&&l[E](P.month<=h?1:u*z(l[k]()/u)),P.month<=h&&(l[R](P.year<=h?0:u*z(l[S]()/u)),c=l[M]()),P.year<=h&&l[H](c-=c%u),h===P.week&&l[E](l[k]()-l[w]()+Tt(i,1)),r=1,(y||v)&&(l=l.getTime(),l=new _(l+Et(l)));for(var c=l[M](),p=l.getTime(),d=l[S](),f=l[k](),g=(P.day+(s?Et(l):60*l.getTimezoneOffset()*1e3))%P.day;p<n;)o.push(p),h===P.year?p=m(c+r*u,0):h===P.month?p=m(c,d+r*u):s||h!==P.day&&h!==P.week?p+=h*u:p=m(c,d,f+r*u*(h===P.day?1:7)),r++;o.push(p),qt(Kt(o,function(t){return h<=P.hour&&t%P.day==g}),function(t){a[t]="day"})}return o.info=dt(t,{higherRanks:a,totalRange:h*u}),o},ve.prototype.normalizeTimeTickInterval=function(t,e){for(var n=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],i=n[n.length-1],r=P[i[0]],o=i[1],a=0;a<n.length&&(i=n[a],r=P[i[0]],o=i[1],!(n[a+1]&&t<=(r*o[o.length-1]+P[n[a+1][0]])/2));a++);return{unitRange:r,count:Ot(t/r,o=r===P.year&&t<5*r?[1,2,5]:o,"year"===i[0]?U(Ht(t/r),1):1),unitName:i[0]}},ve.prototype.getLogTickPositions=function(t,e,n,i){var r=this.options,o=this.len,a=[];if(i||(this._minorAutoInterval=null),.5<=t)t=B(t),a=this.getLinearTickPositions(t,e,n);else if(.08<=t)for(var s,l,h,u,c,p=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],d=z(e);d<n+1&&!c;d++)for(l=p.length,s=0;s<l&&!c;s++)(h=_t(bt(d)*p[s]))>e&&(!i||u<=n)&&void 0!==u&&a.push(u),n<u&&(c=!0),u=h;else{var f=bt(e),g=bt(n),m=r[i?"minorTickInterval":"tickInterval"],r=r.tickPixelInterval/(i?5:1),o=i?o/this.tickPositions.length:o;t=Ot(t=Tt("auto"===m?null:m,this._minorAutoInterval,(g-f)*r/(o||1)),null,Ht(t)),a=Jt(this.getLinearTickPositions(t,f,g),_t),i||(this._minorAutoInterval=t/5)}return i||(this.tickInterval=t),a};var xe,_e=O.Tooltip=function(){this.init.apply(this,arguments)};_e.prototype={init:function(t,e){var n=e.borderWidth,i=e.style,r=gt(i.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":n,r:e.borderRadius,zIndex:8}).css(i).css({padding:0}).add().attr({y:-9999}),u||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,e,n,i){var r=this,o=r.now,a=!1!==r.options.animation&&!r.isHidden&&(1<G(t-o.x)||1<G(e-o.y)),s=r.followPointer||1<r.len;dt(o,{x:a?(2*o.x+t)/3:t,y:a?(o.y+e)/2:e,anchorX:s?void 0:a?(2*o.anchorX+n)/3:n,anchorY:s?void 0:a?(o.anchorY+i)/2:i}),r.label.attr(o),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){r&&r.move(t,e,n,i)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),this.isHidden||(this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},Tt(t,this.options.hideDelay,500)))},getAnchor:function(t,e){var n,i,r=this.chart,o=r.inverted,a=r.plotTop,s=r.plotLeft,l=0,h=0,u=(t=Mt(t))[0].tooltipPos;return(u=this.followPointer&&e?[(e=void 0===e.chartX?r.pointer.normalize(e):e).chartX-r.plotLeft,e.chartY-a]:u)||(qt(t,function(t){n=t.series.yAxis,i=t.series.xAxis,l+=t.plotX+(!o&&i?i.left-s:0),h+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!o&&n?n.top-a:0)}),l/=t.length,h/=t.length,u=[o?r.plotWidth-h:l,this.shared&&!o&&1<t.length&&e?e.chartY-a:o?r.plotHeight-l:h]),Jt(u,B)},getPosition:function(t,e,n){var i,r=this.chart,h=this.distance,u={},c=n.h||0,o=["y",r.chartHeight,e,n.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],a=["x",r.chartWidth,t,n.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],p=Tt(n.ttBelow,r.inverted&&!n.negative||!r.inverted&&n.negative),s=function(t,e,n,i,r,o){var a=n<i-h,s=i+h+n<e,l=i-h-n,i=i+h;if(p&&s)u[t]=i;else if(!p&&a)u[t]=l;else if(a)u[t]=W(o-n,l-c<0?l:l-c);else{if(!s)return!1;u[t]=U(r,e<i+c+n?i:i+c)}},l=function(t,e,n,i){if(i<h||e-h<i)return!1;u[t]=i<n/2?1:e-n/2<i?e-n-2:i-n/2},d=function(t){var e=o;o=a,a=e,i=t},f=function(){!1!==s.apply(0,o)?!1!==l.apply(0,a)||i||(d(!0),f()):i?u.x=u.y=0:(d(!0),f())};return(r.inverted||1<this.len)&&d(),f(),u},defaultFormatter:function(t){var e,n=this.points||Mt(this);return(e=(e=[t.tooltipFooterHeaderFormatter(n[0])]).concat(t.bodyFormatter(n))).push(t.tooltipFooterHeaderFormatter(n[0],!0)),e.join("")},refresh:function(t,e){var n,i,r,o=this.chart,a=this.label,s=this.options,l={},h=[],u=s.formatter||this.defaultFormatter,c=o.hoverPoints,p=this.shared;clearTimeout(this.hideTimer),this.followPointer=Mt(t)[0].series.tooltipOptions.followPointer,n=(i=this.getAnchor(t,e))[0],e=i[1],!p||t.series&&t.series.noSharedTooltip?l=t.getLabelConfig():(o.hoverPoints=t,c&&qt(c,function(t){t.setState()}),qt(t,function(t){t.setState("hover"),h.push(t.getLabelConfig())}),(l={x:t[0].category,y:t[0].y}).points=h,this.len=h.length,t=t[0]),u=u.call(l,this),l=t.series,this.distance=Tt(l.tooltipOptions.distance,16),!1===u?this.hide():(this.isHidden&&(re(a),a.attr("opacity",1).show()),a.attr({text:u}),r=s.borderColor||t.color||l.color||"#606060",a.attr({stroke:r}),this.updatePosition({plotX:n,plotY:e,negative:t.negative,ttBelow:t.ttBelow,h:i[2]||0}),this.isHidden=!1),ee(o,"tooltipRefresh",{text:u,x:n+o.plotLeft,y:e+o.plotTop,borderColor:r})},updatePosition:function(t){var e=this.chart,n=this.label,n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,t);this.move(B(n.x),B(n.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,n){var i,r,o,e=e.dateTimeLabelFormats,a=n&&n.closestPointRange,s="01-01 00:00:00.000",l={millisecond:15,second:12,minute:9,hour:6,day:3},h="millisecond";if(a){for(r in o=A("%m-%d %H:%M:%S.%L",t.x),P){if(a===P.week&&+A("%w",t.x)===n.options.startOfWeek&&o.substr(6)===s.substr(6)){r="week";break}if(a<P[r]){r=h;break}if(l[r]&&o.substr(l[r])!==s.substr(l[r]))break;"week"!==r&&(h=r)}r&&(i=e[r])}else i=e.day;return i||e.year},tooltipFooterHeaderFormatter:function(t,e){var n=t.series,i=n.tooltipOptions,r=i.xDateFormat,o=n.xAxis,a=o&&"datetime"===o.options.type&&xt(t.key),e=i[(e?"footer":"header")+"Format"];return a&&!r&&(r=this.getXDateFormat(t,i,o)),Rt(e=a&&r?e.replace("{point.key}","{point.key:"+r+"}"):e,{point:t,series:n})},bodyFormatter:function(t){return Jt(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}};var be,we,ke,Se=void 0!==N.documentElement.ontouchstart,Me=O.Pointer=function(t,e){this.init(t,e)};Me.prototype={init:function(t,e){var n=e.chart,i=n.events,r=u?"":n.zoomType,o=t.inverted;this.options=e,this.chart=t,this.zoomX=n=/x/.test(r),this.zoomY=r=/y/.test(r),this.zoomHor=n&&!o||r&&o,this.zoomVert=r&&!o||n&&o,this.hasZoom=n||r,this.runChartClick=i&&!!i.click,this.pinchDown=[],this.lastValidTouch={},O.Tooltip&&e.tooltip.enabled&&(t.tooltip=new _e(t,e.tooltip),this.followTouchMove=Tt(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(t,e){var n,i;return t=t||window.event,(t=ne(t)).target||(t.target=t.srcElement),i=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,e||(this.chartPosition=e=Zt(this.chart.container)),e=void 0===i.pageX?(n=U(t.x,t.clientX-e.left),t.y):(n=i.pageX-e.left,i.pageY-e.top),dt(t,{chartX:B(n),chartY:B(e)})},getCoordinates:function(e){var n={xAxis:[],yAxis:[]};return qt(this.chart.axes,function(t){n[t.isXAxis?"xAxis":"yAxis"].push({axis:t,value:t.toValue(e[t.horiz?"chartX":"chartY"])})}),n},runPointActions:function(e){var t,n,i,r,o,a,s=this.chart,l=s.series,h=s.tooltip,u=!!h&&h.shared,c=s.hoverPoint,p=s.hoverSeries,d=s.chartWidth,f=[];if(!u&&!p)for(t=0;t<l.length;t++)!l[t].directTouch&&l[t].options.stickyTracking||(l=[]);if(!u&&p&&p.directTouch&&c?o=c:(qt(l,function(t){i=t.noSharedTooltip&&u,r=!u&&t.directTouch,t.visible&&!i&&!r&&Tt(t.options.enableMouseTracking,!0)&&(a=t.searchPoint(e,!i&&1===t.kdDimensions))&&f.push(a)}),qt(f,function(t){t&&"number"==typeof t.dist&&t.dist<d&&(d=t.dist,o=t)})),o&&(o!==this.prevKDPoint||h&&h.isHidden)){if(u&&!o.series.noSharedTooltip){for(t=f.length;t--;)f[t].clientX===o.clientX&&!f[t].series.noSharedTooltip||f.splice(t,1);f.length&&h&&h.refresh(f,e),qt(f,function(t){t.onMouseOver(e,t!==(p&&p.directTouch&&c||o))})}else h&&h.refresh(o,e),p&&p.directTouch||o.onMouseOver(e);this.prevKDPoint=o}else n=p&&p.tooltipOptions.followPointer,h&&n&&!h.isHidden&&(n=h.getAnchor([{}],e),h.updatePosition({plotX:n[0],plotY:n[1]}));h&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(t){et[xe]&&et[xe].pointer.onDocumentMouseMove(t)},Qt(N,"mousemove",this._onDocumentMouseMove)),qt(s.axes,function(t){t.drawCrosshair(e,Tt(o,c))})},reset:function(t,e){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,o=n.hoverPoints,a=n.tooltip,s=a&&a.shared?o:r;(t=(t=t&&a&&s)&&void 0===Mt(s)[0].plotX?!1:t)?(a.refresh(s),r&&(r.setState(r.state,!0),qt(n.axes,function(t){Tt(t.options.crosshair&&t.options.crosshair.snap,!0)?t.drawCrosshair(null,r):t.hideCrosshair()}))):(r&&r.onMouseOut(),o&&qt(o,function(t){t.setState()}),i&&i.onMouseOut(),a&&a.hide(e),this._onDocumentMouseMove&&(te(N,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),qt(n.axes,function(t){t.hideCrosshair()}),this.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(e,n){var i,r=this.chart;qt(r.series,function(t){i=e||t.getPlotBox(),t.xAxis&&t.xAxis.zoomEnabled&&(t.group.attr(i),t.markerGroup&&(t.markerGroup.attr(i),t.markerGroup.clip(n?r.clipRect:null)),t.dataLabelsGroup&&t.dataLabelsGroup.attr(i))}),r.clipRect.attr(n||r.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,n,i=this.chart,r=i.options.chart,o=t.chartX,a=t.chartY,s=this.zoomHor,l=this.zoomVert,h=i.plotLeft,u=i.plotTop,c=i.plotWidth,p=i.plotHeight,d=this.selectionMarker,f=this.mouseDownX,g=this.mouseDownY,m=r.panKey&&t[r.panKey+"Key"];d&&d.touch||(o<h?o=h:h+c<o&&(o=h+c),a<u?a=u:u+p<a&&(a=u+p),this.hasDragged=Math.sqrt(Math.pow(f-o,2)+Math.pow(g-a,2)),10<this.hasDragged&&(e=i.isInsidePlot(f-h,g-u),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!m&&(d||(this.selectionMarker=d=i.renderer.rect(h,u,s?1:c,l?1:p,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),d&&s&&d.attr({width:G(n=o-f),x:(0<n?0:n)+f}),d&&l&&d.attr({height:G(n=a-g),y:(0<n?0:n)+g}),e&&!d&&r.panning&&i.pan(t,r.panning)))},drop:function(r){var o,a,t,s,l,h,u,c=this,e=this.chart,p=this.hasPinched;this.selectionMarker&&(a={xAxis:[],yAxis:[],originalEvent:r.originalEvent||r},t=this.selectionMarker,s=t.attr?t.attr("x"):t.x,l=t.attr?t.attr("y"):t.y,h=t.attr?t.attr("width"):t.width,u=t.attr?t.attr("height"):t.height,(this.hasDragged||p)&&(qt(e.axes,function(t){var e,n,i;t.zoomEnabled&&kt(t.min)&&(p||c[{xAxis:"zoomX",yAxis:"zoomY"}[t.coll]])&&(e=t.horiz,i="touchend"===r.type?t.minPixelPadding:0,n=t.toValue((e?s:l)+i),i=t.toValue((e?s+h:l+u)-i),a[t.coll].push({axis:t,min:W(n,i),max:U(n,i)}),o=!0)}),o&&ee(e,"selection",a,function(t){e.zoom(dt(t,p?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),p&&this.scaleGroups()),e&&(At(e.container,{cursor:e._cursor}),e.cancelClick=10<this.hasDragged,e.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){(t=this.normalize(t)).preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){et[xe]&&et[xe].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,n=this.chartPosition;t=this.normalize(t,n),!n||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(){var t=et[xe];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;xe=e.index,(t=this.normalize(t)).returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var n;t;){if(n=St(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf(rt+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,n=t.relatedTarget||t.toElement,t=n&&n.point&&n.point.series;!e||e.options.stickyTracking||this.inClass(n,rt+"tooltip")||t===e||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,n=e.hoverPoint,i=e.plotLeft,r=e.plotTop;(t=this.normalize(t)).originalEvent=t,e.cancelClick||(n&&this.inClass(t.target,rt+"tracker")?(ee(n.series,"click",dt(t,{point:n})),e.hoverPoint&&n.firePointEvent("click",t)):(dt(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-i,t.chartY-r)&&ee(e,"click",t)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},Qt(t,"mouseleave",e.onContainerMouseLeave),1===d&&Qt(N,"mouseup",e.onDocumentMouseUp),Se&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},1===d&&Qt(N,"touchend",e.onDocumentTouchEnd))},destroy:function(){for(var t in te(this.chart.container,"mouseleave",this.onContainerMouseLeave),d||(te(N,"mouseup",this.onDocumentMouseUp),te(N,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout),this)this[t]=null}},dt(O.Pointer.prototype,{pinchTranslate:function(t,e,n,i,r,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,n,i,r,o),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,n,i,r,o)},pinchTranslateDirection:function(t,e,n,i,r,o,a,s){var l,h,u,c=this.chart,p=t?"x":"y",d=t?"X":"Y",f="chart"+d,g=t?"width":"height",m=c["plot"+(t?"Left":"Top")],y=s||1,v=c.inverted,x=c.bounds[t?"h":"v"],_=1===e.length,b=e[0][f],w=n[0][f],k=!_&&e[1][f],S=!_&&n[1][f],n=function(){!_&&20<G(b-k)&&(y=s||G(w-S)/G(b-k)),h=(m-w)/y+b,l=c["plot"+(t?"Width":"Height")]/y};n(),(f=h)<x.min?(f=x.min,u=!0):f+l>x.max&&(f=x.max-l,u=!0),u?(w-=.8*(w-a[p][0]),_||(S-=.8*(S-a[p][1])),n()):a[p]=[w,S],v||(o[p]=h-m,o[g]=l),o=v?t?"scaleY":"scaleX":"scale"+d,v=v?1/y:y,r[g]=l,r[p]=f,i[o]=y,i["translate"+d]=v*m+(w-v*b)},pinch:function(t){var e=this,a=e.chart,n=e.pinchDown,i=t.touches,r=i.length,o=e.lastValidTouch,s=e.hasZoom,l=e.selectionMarker,h={},u=1===r&&(e.inClass(t.target,rt+"tracker")&&a.runTrackerClick||e.runChartClick),c={};1<r&&(e.initiated=!0),s&&e.initiated&&!u&&t.preventDefault(),Jt(i,function(t){return e.normalize(t)}),"touchstart"===t.type?(qt(i,function(t,e){n[e]={chartX:t.chartX,chartY:t.chartY}}),o.x=[n[0].chartX,n[1]&&n[1].chartX],o.y=[n[0].chartY,n[1]&&n[1].chartY],qt(a.axes,function(t){var e,n,i,r,o;t.zoomEnabled&&(e=a.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,i=t.toPixels(Tt(t.options.min,t.dataMin)),o=t.toPixels(Tt(t.options.max,t.dataMax)),r=W(i,o),o=U(i,o),e.min=W(t.pos,r-n),e.max=U(t.pos+t.len,o+n))}),e.res=!0):n.length&&(l||(e.selectionMarker=l=dt({destroy:f,touch:!0},a.plotBox)),e.pinchTranslate(n,i,h,l,c,o),e.hasPinched=s,e.scaleGroups(h,c),!s&&e.followTouchMove&&1===r?this.runPointActions(e.normalize(t)):e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var n=this.chart;xe=n.index,1===t.touches.length?(t=this.normalize(t),n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop)&&!n.openMenu?(e&&this.runPointActions(t),this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){et[xe]&&et[xe].pointer.drop(t)}}),(l.PointerEvent||l.MSPointerEvent)&&(be={},we=!!l.PointerEvent,ke=function(t,e,n,i){"touch"!==(t=t.originalEvent||t).pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!et[xe]||(i(t),et[xe].pointer[e]({type:n,target:t.currentTarget,preventDefault:f,touches:function(){var t,e=[];for(t in e.item=function(t){return this[t]},be)be.hasOwnProperty(t)&&e.push({pageX:be[t].pageX,pageY:be[t].pageY,target:be[t].target});return e}()}))},dt(Me.prototype,{onContainerPointerDown:function(t){ke(t,"onContainerTouchStart","touchstart",function(t){be[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){ke(t,"onContainerTouchMove","touchmove",function(t){be[t.pointerId]={pageX:t.pageX,pageY:t.pageY},be[t.pointerId].target||(be[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){ke(t,"onDocumentTouchEnd","touchend",function(t){delete be[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,we?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,we?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(N,we?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),It(Me.prototype,"init",function(t,e,n){t.call(this,e,n),this.hasZoom&&At(e.container,{"-ms-touch-action":st,"touch-action":st})}),It(Me.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Qt)}),It(Me.prototype,"destroy",function(t){this.batchMSEvents(te),t.call(this)}));var Te=O.Legend=function(t,e){this.init(t,e)};Te.prototype={init:function(t,e){var n=this,i=e.itemStyle,r=e.itemMarginTop||0;(this.options=e).enabled&&(n.itemStyle=i,n.itemHiddenStyle=ft(i,e.itemHiddenStyle),n.itemMarginTop=r,n.padding=r=Tt(e.padding,8),n.initialItemX=r,n.initialItemY=r-5,n.maxItemWidth=0,n.chart=t,n.itemHeight=0,n.symbolWidth=Tt(e.symbolWidth,16),n.pages=[],n.render(),Qt(n.chart,"endResize",function(){n.positionCheckboxes()}))},colorizeItem:function(t,e){var n,i,r=this.options,o=t.legendItem,a=t.legendLine,s=t.legendSymbol,l=this.itemHiddenStyle.color,r=e?r.itemStyle.color:l,l=e?t.legendColor||t.color||"#CCC":l,h=t.options&&t.options.marker,u={fill:l};if(o&&o.css({fill:r,color:r}),a&&a.attr({stroke:l}),s){if(h&&s.isMarker)for(n in u.stroke=l,h=t.convertAttribs(h))void 0!==(i=h[n])&&(u[n]=i);s.attr(u)}},positionItem:function(t){var e=this.options,n=e.symbolPadding,i=!e.rtl,r=t._legendItemPos,o=r[0],e=r[1],r=t.checkbox,t=t.legendGroup;t&&t.element&&t.translate(i?o:this.legendWidth-o-2*n-4,e),r&&(r.x=o,r.y=e)},destroyItem:function(e){var t=e.checkbox;qt(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&Xt(e.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(i){var r,o=this.group.alignAttr,a=this.clipHeight||this.legendHeight;o&&(r=o.translateY,qt(this.allItems,function(t){var e,n=t.checkbox;n&&(e=r+n.y+(i||0)+3,At(n,{left:o.translateX+t.checkboxOffset+n.x-20+at,top:e+at,display:r-6<e&&e<r+a-6?"":st}))}))},renderTitle:function(){var t=this.options,e=this.padding,n=t.title,t=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,e-3,e-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=(n=this.title.getBBox()).height,this.offsetWidth=n.width,this.contentGroup.attr({translateY:t})),this.titleHeight=t},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?Rt(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e=this.chart,n=e.renderer,i=this.options,r="horizontal"===i.layout,o=this.symbolWidth,a=i.symbolPadding,s=this.itemStyle,l=this.itemHiddenStyle,h=this.padding,u=r?Tt(i.itemDistance,20):0,c=!i.rtl,p=i.width,d=i.itemMarginBottom||0,f=this.itemMarginTop,g=this.initialItemX,m=t.legendItem,y=t.series&&t.series.drawLegendSymbol?t.series:t,v=y.options,x=this.createCheckboxForItem&&v&&v.showCheckbox,v=i.useHTML;m||(t.legendGroup=n.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=m=n.text("",c?o+a:-a,this.baseline||0,v).css(ft(t.visible?s:l)).attr({align:c?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=n.fontMetrics(s.fontSize,m),this.baseline=this.fontMetrics.f+3+f,m.attr("y",this.baseline)),y.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,m,v,s,l),this.colorizeItem(t,t.visible),x&&this.createCheckboxForItem(t)),this.setText(t),m=m.getBBox(),x=t.checkboxOffset=i.itemWidth||t.legendItemWidth||o+a+m.width+u+(x?20:0),this.itemHeight=m=B(t.legendItemHeight||m.height),r&&this.itemX-g+x>(p||e.chartWidth-2*h-g-i.x)&&(this.itemX=g,this.itemY+=f+this.lastLineHeight+d,this.lastLineHeight=0),this.maxItemWidth=U(this.maxItemWidth,x),this.lastItemY=f+this.itemY+d,this.lastLineHeight=U(m,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],r?this.itemX+=x:(this.itemY+=f+m+d,this.lastLineHeight=m),this.offsetWidth=p||U((r?this.itemX-g-u:x)+h,this.offsetWidth)},getAllItems:function(){var n=[];return qt(this.chart.series,function(t){var e=t.options;Tt(e.showInLegend,!kt(e.linkedTo)&&void 0,!0)&&(n=n.concat(t.legendItems||("point"===e.legendType?t.data:t)))}),n},adjustMargins:function(n,i){var r=this.chart,o=this.options,a=o.align.charAt(0)+o.verticalAlign.charAt(0)+o.layout.charAt(0);this.display&&!o.floating&&qt([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(t,e){t.test(a)&&!kt(n[e])&&(r[ct[e]]=U(r[ct[e]],r.legend[(e+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][e]*o[e%2?"x":"y"]+Tt(o.margin,12)+i[e]))})},render:function(){var t,e,n,i,r=this,o=r.chart,a=o.renderer,s=r.group,l=r.box,h=r.options,u=r.padding,c=h.borderWidth,p=h.backgroundColor;r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,s||(r.group=s=a.g("legend").attr({zIndex:7}).add(),r.contentGroup=a.g().attr({zIndex:1}).add(s),r.scrollGroup=a.g().add(r.contentGroup)),r.renderTitle(),Nt(t=r.getAllItems(),function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),h.reversed&&t.reverse(),r.allItems=t,r.display=e=!!t.length,r.lastLineHeight=0,qt(t,function(t){r.renderItem(t)}),n=(h.width||r.offsetWidth)+u,i=r.lastItemY+r.lastLineHeight+r.titleHeight,i=r.handleOverflow(i),i+=u,(c||p)&&(l?0<n&&0<i&&(l[l.isNew?"attr":"animate"](l.crisp({width:n,height:i})),l.isNew=!1):(r.box=l=a.rect(0,0,n,i,h.borderRadius,c||0).attr({stroke:h.borderColor,"stroke-width":c||0,fill:p||st}).add(s).shadow(h.shadow),l.isNew=!0),l[e?"show":"hide"]()),r.legendWidth=n,r.legendHeight=i,qt(t,function(t){r.positionItem(t)}),e&&s.align(dt({width:n,height:i},h),!0,"spacingBox"),o.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var r,o,e=this,n=this.chart,i=n.renderer,a=this.options,s=a.y,l="top"===a.verticalAlign,h=n.spacingBox.height+(l?-s:s)-this.padding,u=a.maxHeight,c=this.clipRect,p=a.navigation,d=Tt(p.animation,!0),f=p.arrowSize||12,l=this.nav,g=this.pages,m=this.padding,y=this.allItems,s=function(t){c.attr({height:t}),e.contentGroup.div&&(e.contentGroup.div.style.clip="rect("+m+"px,9999px,"+(m+t)+"px,0)")};return"horizontal"===a.layout&&(h/=2),u&&(h=W(h,u)),g.length=0,h<t?(this.clipHeight=r=U(h-20-this.titleHeight-m,0),this.currentPage=Tt(this.currentPage,1),this.fullHeight=t,qt(y,function(t,e){var n=t._legendItemPos[1],i=B(t.legendItem.getBBox().height),t=g.length;(!t||n-g[t-1]>r&&(o||n)!==g[t-1])&&(g.push(o||n),t++),e===y.length-1&&n+i-g[t-1]>r&&g.push(n),n!==o&&(o=n)}),c||(c=e.clipRect=i.clipRect(0,m,9999,0),e.contentGroup.clip(c)),s(r),l||(this.nav=l=i.g().attr({zIndex:1}).add(this.group),this.up=i.symbol("triangle",0,0,f,f).on("click",function(){e.scroll(-1,d)}).add(l),this.pager=i.text("",15,10).css(p.style).add(l),this.down=i.symbol("triangle-down",0,0,f,f).on("click",function(){e.scroll(1,d)}).add(l)),e.scroll(0),t=h):l&&(s(n.chartHeight),l.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var n=this.pages,i=n.length,r=this.currentPage+t,o=this.clipHeight,a=this.options.navigation,s=a.activeColor,l=a.inactiveColor,t=this.pager,a=this.padding;0<(r=i<r?i:r)&&(void 0!==e&&Wt(e,this.chart),this.nav.attr({translateX:a,translateY:o+this.padding+7+this.titleHeight,visibility:ot}),this.up.attr({fill:1===r?l:s}).css({cursor:1===r?"default":"pointer"}),t.attr({text:r+"/"+i}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===i?l:s}).css({cursor:r===i?"default":"pointer"}),n=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:n}),this.currentPage=r,this.positionCheckboxes(n))}};var Ae=O.LegendSymbolMixin={drawRectangle:function(t,e){var n=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-n+1,t.symbolWidth,n,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e=this.options,n=e.marker,i=t.symbolWidth,r=this.chart.renderer,o=this.legendGroup,a=t.baseline-B(.3*t.fontMetrics.b);e.lineWidth&&(t={"stroke-width":e.lineWidth},e.dashStyle&&(t.dashstyle=e.dashStyle),this.legendLine=r.path([lt,0,a,ht,i,a]).attr(t).add(o)),n&&!1!==n.enabled&&(n=n.radius,this.legendSymbol=o=r.symbol(this.symbol,i/2-n,a-n,2*n,2*n).add(o),o.isMarker=!0)}};(/Trident\/7\.0/.test(h)||p)&&It(Te.prototype,"positionItem",function(t,e){function n(){e._legendItemPos&&t.call(i,e)}var i=this;n(),setTimeout(n)});var Pe=O.Chart=function(){this.init.apply(this,arguments)};Pe.prototype={callbacks:[],init:function(t,e){var n,i=t.series;t.series=null,(n=ft(C,t)).series=t.series=i,this.userOptions=t;t=n.chart;this.margin=this.splashArray("margin",t),this.spacing=this.splashArray("spacing",t);var r=t.events;this.bounds={h:{},v:{}},this.callback=e,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=t.showAxes;var o,a=this;if(a.index=et.length,et.push(a),d++,!1!==t.reflow&&Qt(a,"load",function(){a.initReflow()}),r)for(o in r)Qt(a,o,r[o]);a.xAxis=[],a.yAxis=[],a.animation=!u&&Tt(t.animation,!0),a.pointCount=a.colorCounter=a.symbolCounter=0,a.firstRender()},initSeries:function(t){var e=this.options.chart,e=t.type||e.type||e.defaultSeriesType,e=pt[e];return e||Bt(17,!0),(e=new e).init(this,t),e},isInsidePlot:function(t,e,n){var i=n?e:t,e=n?t:e;return 0<=i&&i<=this.plotWidth&&0<=e&&e<=this.plotHeight},redraw:function(t){var n,e,i,r=this.axes,o=this.series,a=this.pointer,s=this.legend,l=this.isDirtyLegend,h=this.hasCartesianSeries,u=this.isDirtyBox,c=o.length,p=c,d=this.renderer,f=d.isHidden(),g=[];for(Wt(t,this),f&&this.cloneRenderTo(),this.layOutTitles();p--;)if((i=o[p]).options.stacking&&(n=!0,i.isDirty)){e=!0;break}if(e)for(p=c;p--;)(i=o[p]).options.stacking&&(i.isDirty=!0);qt(o,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),l=!0)}),l&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1),n&&this.getStacks(),h&&(this.isResizing||(this.maxTicks=null,qt(r,function(t){t.setScale()}))),this.getMargins(),h&&(qt(r,function(t){t.isDirty&&(u=!0)}),qt(r,function(t){var e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,g.push(function(){ee(t,"afterSetExtremes",dt(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(u||n)&&t.redraw()})),u&&this.drawChartBox(),qt(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),a&&a.reset(!0),d.draw(),ee(this,"redraw"),f&&this.cloneRenderTo(!0),qt(g,function(t){t.call()})},get:function(t){for(var e,n,i=this.axes,r=this.series,o=0;o<i.length;o++)if(i[o].options.id===t)return i[o];for(o=0;o<r.length;o++)if(r[o].options.id===t)return r[o];for(o=0;o<r.length;o++)for(n=r[o].points||[],e=0;e<n.length;e++)if(n[e].id===t)return n[e];return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis=Mt(t.xAxis||{}),t=t.yAxis=Mt(t.yAxis||{});qt(n,function(t,e){t.index=e,t.isX=!0}),qt(t,function(t,e){t.index=e}),t=n.concat(t),qt(t,function(t){new ve(e,t)})},getSelectedPoints:function(){var e=[];return qt(this.series,function(t){e=e.concat(Kt(t.points||[],function(t){return t.selected}))}),e},getSelectedSeries:function(){return Kt(this.series,function(t){return t.selected})},setTitle:function(t,e,n){var r=this,i=r.options,o=i.title=ft(i.title,t),i=i.subtitle=ft(i.subtitle,e);qt([["title",t,o],["subtitle",e,i]],function(t){var e=t[0],n=r[e],i=t[1],t=t[2];n&&i&&(r[e]=n=n.destroy()),t&&t.text&&!n&&(r[e]=r.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,class:rt+e,zIndex:t.zIndex||4}).css(t.style).add())}),r.layOutTitles(n)},layOutTitles:function(t){var e=0,n=this.title,i=this.subtitle,r=this.options,o=r.title,a=r.subtitle,s=this.renderer,r=this.spacingBox.width-44;n&&(n.css({width:(o.width||r)+at}).align(dt({y:s.fontMetrics(o.style.fontSize,n).b-3},o),!1,"spacingBox"),o.floating||o.verticalAlign||(e=n.getBBox().height)),i&&(i.css({width:(a.width||r)+at}).align(dt({y:e+(o.margin-13)+s.fontMetrics(o.style.fontSize,i).b},a),!1,"spacingBox"),a.floating||a.verticalAlign||(e=F(e+i.getBBox().height))),i=this.titleOffset!==e,this.titleOffset=e,!this.isDirtyBox&&i&&(this.isDirtyBox=i,this.hasRendered&&Tt(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,n=t.height,t=this.renderToClone||this.renderTo;kt(e)||(this.containerWidth=Vt(t,"width")),kt(n)||(this.containerHeight=Vt(t,"height")),this.chartWidth=U(0,e||this.containerWidth||600),this.chartHeight=U(0,Tt(n,19<this.containerHeight?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,n=this.container;t?e&&(this.renderTo.appendChild(n),Xt(e),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=e=this.renderTo.cloneNode(0),At(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),N.body.appendChild(e),n&&e.appendChild(n))},getContainer:function(){var t,e,n,i,r=this.options.chart;this.renderTo=e=r.renderTo,i=rt+tt++,mt(e)&&(this.renderTo=e=N.getElementById(e)),e||Bt(13,!0),n=gt(St(e,"data-highcharts-chart")),!isNaN(n)&&et[n]&&et[n].hasRendered&&et[n].destroy(),St(e,"data-highcharts-chart",this.index),e.innerHTML="",r.skipClone||e.offsetWidth||this.cloneRenderTo(),this.getChartSize(),t=this.chartWidth,n=this.chartHeight,this.container=e=Pt(nt,{className:rt+"container"+(r.className?" "+r.className:""),id:i},dt({position:"relative",overflow:it,width:t+at,height:n+at,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},r.style),this.renderToClone||e),this._cursor=e.style.cursor,this.renderer=r.forExport?new pe(e,t,n,r.style,!0):new o(e,t,n,r.style),u&&this.renderer.create(this,e,t,n),this.renderer.chartIndex=this.index},getMargins:function(t){var e=this.spacing,n=this.margin,i=this.titleOffset;this.resetMargins(),i&&!kt(n[0])&&(this.plotTop=U(this.plotTop,i+this.options.title.margin+e[0])),this.legend.adjustMargins(n,e),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var n=this,i=n.axisOffset=[0,0,0,0],r=n.margin;n.hasCartesianSeries&&qt(n.axes,function(t){t.getOffset()}),qt(ct,function(t,e){kt(r[e])||(n[t]+=i[e])}),n.setChartSize()},reflow:function(t){var e=this,n=e.options.chart,i=e.renderTo,r=n.width||Vt(i,"width"),o=n.height||Vt(i,"height"),n=t?t.target:l,i=function(){e.container&&(e.setSize(r,o,!1),e.hasUserSize=null)};e.hasUserSize||e.isPrinting||!r||!o||n!==l&&n!==N||(r===e.containerWidth&&o===e.containerHeight||(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(i,100):i()),e.containerWidth=r,e.containerHeight=o)},initReflow:function(){function t(t){e.reflow(t)}var e=this;Qt(l,"resize",t),Qt(e,"destroy",function(){te(l,"resize",t)})},setSize:function(t,e,n){var i,r,o,a=this,s=a.renderer,l=s.globalAnimation;a.isResizing+=1,o=function(){a&&ee(a,"endResize",null,function(){--a.isResizing})},Wt(n,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,kt(t)&&(a.chartWidth=i=U(0,B(t)),a.hasUserSize=!!i),kt(e)&&(a.chartHeight=r=U(0,B(e))),(l?ie:At)(a.container,{width:i+at,height:r+at},l),a.setChartSize(!0),s.setSize(i,r,n),a.maxTicks=null,qt(a.axes,function(t){t.isDirty=!0,t.setScale()}),qt(a.series,function(t){t.isDirty=!0}),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.layOutTitles(),a.getMargins(),a.redraw(n),a.oldChartHeight=null,ee(a,"resize"),!1===l?o():setTimeout(o,l&&l.duration||500)},setChartSize:function(t){var e,n,i,r,o=this.inverted,a=this.renderer,s=this.chartWidth,l=this.chartHeight,h=this.options.chart,u=this.spacing,c=this.clipOffset;this.plotLeft=e=B(this.plotLeft),this.plotTop=r=B(this.plotTop),this.plotWidth=n=U(0,B(s-e-this.marginRight)),this.plotHeight=i=U(0,B(l-r-this.marginBottom)),this.plotSizeX=o?i:n,this.plotSizeY=o?n:i,this.plotBorderWidth=h.plotBorderWidth||0,this.spacingBox=a.spacingBox={x:u[3],y:u[0],width:s-u[3]-u[1],height:l-u[0]-u[2]},this.plotBox=a.plotBox={x:e,y:r,width:n,height:i},r=2*z(this.plotBorderWidth/2),n=F(U(r,c[3])/2),i=F(U(r,c[0])/2),this.clipBox={x:n,y:i,width:z(this.plotSizeX-U(r,c[1])/2-n),height:U(0,z(this.plotSizeY-U(r,c[2])/2-i))},t||qt(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var n=this;qt(ct,function(t,e){n[t]=Tt(n.margin[e],n.spacing[e])}),n.axisOffset=[0,0,0,0],n.clipOffset=[0,0,0,0]},drawChartBox:function(){var t=this.options.chart,e=this.renderer,n=this.chartWidth,i=this.chartHeight,r=this.chartBackground,o=this.plotBackground,a=this.plotBorder,s=this.plotBGImage,l=t.borderWidth||0,h=t.backgroundColor,u=t.plotBackgroundColor,c=t.plotBackgroundImage,p=t.plotBorderWidth||0,d=this.plotLeft,f=this.plotTop,g=this.plotWidth,m=this.plotHeight,y=this.plotBox,v=this.clipRect,x=this.clipBox,_=l+(t.shadow?8:0);(l||h)&&(r?r.animate(r.crisp({width:n-_,height:i-_})):(h={fill:h||st},l&&(h.stroke=t.borderColor,h["stroke-width"]=l),this.chartBackground=e.rect(_/2,_/2,n-_,i-_,t.borderRadius,l).attr(h).addClass(rt+"background").add().shadow(t.shadow))),u&&(o?o.animate(y):this.plotBackground=e.rect(d,f,g,m,0).attr({fill:u}).add().shadow(t.plotShadow)),c&&(s?s.animate(y):this.plotBGImage=e.image(c,d,f,g,m).add()),v?v.animate({width:x.width,height:x.height}):this.clipRect=e.clipRect(x),p&&(a?a.animate(a.crisp({x:d,y:f,width:g,height:m,strokeWidth:-p})):this.plotBorder=e.rect(d,f,g,m,0,-p).attr({stroke:t.plotBorderColor,"stroke-width":p,fill:st,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var e,n,i,r=this,o=r.options.chart,a=r.options.series;qt(["inverted","angular","polar"],function(t){for(e=pt[o.type||o.defaultSeriesType],i=r[t]||o[t]||e&&e.prototype[t],n=a&&a.length;!i&&n--;)(e=pt[a[n].type])&&e.prototype[t]&&(i=!0);r[t]=i})},linkSeries:function(){var n=this,t=n.series;qt(t,function(t){t.linkedSeries.length=0}),qt(t,function(t){var e=t.options.linkedTo;mt(e)&&(e=":previous"===e?n.series[t.index-1]:n.get(e))&&(e.linkedSeries.push(t),t.linkedParent=e,t.visible=Tt(t.options.visible,e.options.visible,t.visible))})},renderSeries:function(){qt(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var r=this,o=r.options.labels;o.items&&qt(o.items,function(t){var e=dt(o.style,t.style),n=gt(e.left)+r.plotLeft,i=gt(e.top)+r.plotTop+12;delete e.left,delete e.top,r.renderer.text(t.html,n,i).attr({zIndex:2}).css(e).add()})},render:function(){var t,e,n,i,r=this.axes,o=this.renderer,a=this.options;this.setTitle(),this.legend=new Te(this,a.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),t=this.plotWidth,e=this.plotHeight=this.plotHeight-13,qt(r,function(t){t.setScale()}),this.getAxisMargins(),n=1.1<t/this.plotWidth,i=1.1<e/this.plotHeight,(n||i)&&(this.maxTicks=null,qt(r,function(t){(t.horiz&&n||!t.horiz&&i)&&t.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&qt(r,function(t){t.render()}),this.seriesGroup||(this.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(a.credits),this.hasRendered=!0},showCredits:function(t){t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text,0,0).on("click",function(){t.href&&(location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position))},destroy:function(){var t,n=this,e=n.axes,i=n.series,r=n.container,o=r&&r.parentNode;for(ee(n,"destroy"),et[n.index]=void 0,d--,n.renderTo.removeAttribute("data-highcharts-chart"),te(n),t=e.length;t--;)e[t]=e[t].destroy();for(t=i.length;t--;)i[t]=i[t].destroy();for(t in qt(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var e=n[t];e&&e.destroy&&(n[t]=e.destroy())}),r&&(r.innerHTML="",te(r),o&&Xt(r)),n)delete n[t]},isReadyToRender:function(){var t=this;return!(!Q&&l==l.top&&"complete"!==N.readyState||u&&!l.canvg)||(u?fe.push(function(){t.firstRender()},t.options.global.canvasToolsURL):N.attachEvent("onreadystatechange",function(){N.detachEvent("onreadystatechange",t.firstRender),"complete"===N.readyState&&t.firstRender()}),!1)},firstRender:function(){var e=this,t=e.options,n=e.callback;e.isReadyToRender()&&(e.getContainer(),ee(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),qt(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),ee(e,"beforeRender"),O.Pointer&&(e.pointer=new Me(e,t)),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),qt(e.callbacks,function(t){void 0!==e.index&&t.apply(e,[e])}),ee(e,"load"),e.cloneRenderTo(!0))},splashArray:function(t,e){var n=e[t],n=yt(n)?n:[n,n,n,n];return[Tt(e[t+"Top"],n[0]),Tt(e[t+"Right"],n[1]),Tt(e[t+"Bottom"],n[2]),Tt(e[t+"Left"],n[3])]}};function De(){}var Ce=O.CenteredSeriesMixin={getCenter:function(){for(var t,e,n=this.options,i=this.chart,r=2*(n.slicedOffset||0),o=i.plotWidth-2*r,a=i.plotHeight-2*r,i=n.center,s=[Tt(i[0],"50%"),Tt(i[1],"50%"),n.size||"100%",n.innerSize||0],l=W(o,a),h=0;h<4;++h)e=s[h],t=h<2||2===h&&/%$/.test(e),s[h]=Ct(e,[o,a,l,s[2]][h])+(t?r:0);return s}};De.prototype={init:function(t,e,n){return this.series=t,this.color=t.color,this.applyOptions(e,n),this.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,this.color=this.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,this},applyOptions:function(t,e){var n=this.series,i=n.options.pointValKey||n.pointValKey;return t=De.prototype.optionsToObject.call(this,t),dt(this,t),this.options=this.options?dt(this.options,t):t,i&&(this.y=this[i]),void 0===this.x&&n&&(this.x=void 0===e?n.autoIncrement():e),this},optionsToObject:function(t){var e={},n=this.series,i=n.options.keys,r=i||n.pointArrayMap||["y"],o=r.length,a=0,s=0;if("number"==typeof t||null===t)e[r[0]]=t;else if(vt(t))for(!i&&t.length>o&&("string"==(i=typeof t[0])?e.name=t[0]:"number"==i&&(e.x=t[0]),a++);s<o;)e[r[s++]]=t[a++];else"object"==typeof t&&((e=t).dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return e},destroy:function(){var t,e=this.series.chart,n=e.hoverPoints;for(t in e.pointCount--,n&&(this.setState(),wt(n,this),n.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(te(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this),this)this[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)this[t=e[n]]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,i=Tt(n.valueDecimals,""),r=n.valuePrefix||"",o=n.valueSuffix||"";return qt(t.pointArrayMap||["y"],function(t){t="{point."+t,e=(e=r||o?e.replace(t+"}",r+t+"}"+o):e).replace(t+"}",t+":,."+i+"f}")}),Rt(e,{point:this,series:this.series})},firePointEvent:function(t,e,n){var i=this,r=this.series.options;(r.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(n=function(t){i.select&&i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),ee(this,t,e,n)}};var Le=O.Series=function(){};function Ie(t,e,n,i,r){var o=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e,this.x=i,this.total=null,this.points={},this.stack=r,this.alignOptions={align:e.align||(o?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":n?"bottom":"top"),y:Tt(e.y,o?4:n?14:-6),x:Tt(e.x,o?n?-6:6:0)},this.textAlign=e.textAlign||(o?n?"right":"left":"center")}Le.prototype={isCartesian:!0,type:"line",pointClass:De,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){function n(t,e){return Tt(t.options.index,t._i)-Tt(e.options.index,e._i)}var i,r,o=this,a=t.series;for(i in o.chart=t,o.options=e=o.setOptions(e),o.linkedSeries=[],o.bindAxes(),dt(o,{name:e.name,state:"",pointAttr:{},visible:!1!==e.visible,selected:!0===e.selected}),u&&(e.animation=!1),r=e.events)Qt(o,i,r[i]);(r&&r.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),o.getColor(),o.getSymbol(),qt(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(e.data,!1),o.isCartesian&&(t.hasCartesianSeries=!0),a.push(o),o._i=a.length-1,Nt(a,n),this.yAxis&&Nt(this.yAxis.series,n),qt(a,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var n,i=this,r=i.options,t=i.chart;qt(i.axisTypes||[],function(e){qt(t[e],function(t){n=t.options,(r[e]===n.index||void 0!==r[e]&&r[e]===n.id||void 0===r[e]&&0===n.index)&&(t.series.push(i),(i[e]=t).isDirty=!0)}),i[e]||i.optionalAxis===e||Bt(18,!0)})},updateParallelArrays:function(n,i){var r=n.series,e=arguments,t="number"==typeof i?function(t){var e="y"===t&&r.toYData?r.toYData(n):n[t];r[t+"Data"][i]=e}:function(t){Array.prototype[i].apply(r[t+"Data"],Array.prototype.slice.call(e,2))};qt(r.parallelArrays,t)},autoIncrement:function(){var t,e=this.options,n=this.xIncrement,i=e.pointIntervalUnit,n=Tt(n,e.pointStart,0);return this.pointInterval=t=Tt(this.pointInterval,e.pointInterval,1),"month"!==i&&"year"!==i||(e=new _(n),t=(e="month"===i?+e[R](e[S]()+t):+e[H](e[M]()+t))-n),this.xIncrement=n+t,n},getSegments:function(){var t,n=-1,i=[],r=this.points,o=r.length;if(o)if(this.options.connectNulls){for(t=o;t--;)null===r[t].y&&r.splice(t,1);r.length&&(i=[r])}else qt(r,function(t,e){null===t.y?(n+1<e&&i.push(r.slice(n+1,e)),n=e):e===o-1&&i.push(r.slice(n+1,e+1))});this.segments=i},setOptions:function(t){var e=this.chart,n=e.options.plotOptions,i=e.userOptions||{},r=i.plotOptions||{},e=n[this.type];return this.userOptions=t,n=ft(e,n.series,t),this.tooltipOptions=ft(C.tooltip,C.plotOptions[this.type].tooltip,i.tooltip,r.series&&r.series.tooltip,r[this.type]&&r[this.type].tooltip,t.tooltip),null===e.marker&&delete n.marker,this.zoneAxis=n.zoneAxis,e=this.zones=(n.zones||[]).slice(),!n.negativeColor&&!n.negativeFillColor||n.zones||e.push({value:n[this.zoneAxis+"Threshold"]||n.threshold||0,color:n.negativeColor,fillColor:n.negativeFillColor}),e.length&&kt(e[e.length-1].value)&&e.push({color:this.color,fillColor:this.fillColor}),n},getCyclic:function(t,e,n){var i,r=this.userOptions,o="_"+t+"Index",a=t+"Counter";e||(kt(r[o])?i=r[o]:(r[o]=i=this.chart[a]%n.length,this.chart[a]+=1),e=n[i]),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||oe[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:Ae.drawLineMarker,setData:function(t,e,n,i){var r,o=this,a=o.points,s=a&&a.length||0,l=o.options,h=o.chart,u=null,c=o.xAxis,p=c&&!!c.categories,d=l.turboThreshold,f=this.xData,g=this.yData,m=o.pointArrayMap,y=m&&m.length,v=(t=t||[]).length;if(e=Tt(e,!0),!1!==i&&v&&s===v&&!o.cropped&&!o.hasGroupedData&&o.visible)qt(t,function(t,e){a[e].update&&a[e].update(t,!1,null,!1)});else{if(o.xIncrement=null,o.pointRange=p?1:l.pointRange,o.colorCounter=0,qt(this.parallelArrays,function(t){o[t+"Data"].length=0}),d&&d<v){for(b=0;null===u&&b<v;)u=t[b],b++;if(xt(u)){for(var x=Tt(l.pointStart,0),_=Tt(l.pointInterval,1),b=0;b<v;b++)f[b]=x,g[b]=t[b],x+=_;o.xIncrement=x}else if(vt(u))if(y)for(b=0;b<v;b++)r=t[b],f[b]=r[0],g[b]=r.slice(1,y+1);else for(b=0;b<v;b++)r=t[b],f[b]=r[0],g[b]=r[1];else Bt(12)}else for(b=0;b<v;b++)void 0!==t[b]&&(o.pointClass.prototype.applyOptions.apply(r={series:o},[t[b]]),o.updateParallelArrays(r,b),p&&kt(r.name)&&(c.names[r.x]=r.name));for(mt(g[0])&&Bt(14,!0),o.data=[],o.options.data=t,b=s;b--;)a[b]&&a[b].destroy&&a[b].destroy();c&&(c.minRange=c.userMinRange),n=!(o.isDirty=o.isDirtyData=h.isDirtyBox=!0)}e&&h.redraw(n)},processData:function(t){var e,n,i,r,o,a,s=this.xData,l=this.yData,h=s.length,u=0,c=this.xAxis,p=this.options,d=p.cropThreshold,f=this.isCartesian;if(f&&!this.isDirty&&!c.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(c&&(o=(a=c.getExtremes()).min,a=a.max),f&&this.sorted&&(!d||d<h||this.forceCrop)&&(s[h-1]<o||s[0]>a?(s=[],l=[]):(s[0]<o||s[h-1]>a)&&(s=(e=this.cropData(this.xData,this.yData,o,a)).xData,l=e.yData,u=e.start,e=!0)),r=s.length-1;0<=r;r--)0<(n=s[r]-s[r-1])&&(void 0===i||n<i)?i=n:n<0&&this.requireSorting&&Bt(15);this.cropped=e,this.cropStart=u,this.processedXData=s,this.processedYData=l,null===p.pointRange&&(this.pointRange=i||1),this.closestPointRange=i},cropData:function(t,e,n,i){for(var r=t.length,o=0,a=r,s=Tt(this.cropShoulder,1),l=0;l<r;l++)if(t[l]>=n){o=U(0,l-s);break}for(;l<r;l++)if(t[l]>i){a=l+s;break}return{xData:t.slice(o,a),yData:e.slice(o,a),start:o,end:a}},generatePoints:function(){var t,e,n,i,r,o=this.options.data,a=this.data,s=this.processedXData,l=this.processedYData,h=this.pointClass,u=s.length,c=this.cropStart||0,p=this.hasGroupedData,d=[];for(a||p||((r=[]).length=o.length,a=this.data=r),i=0;i<u;i++)e=c+i,p?d[i]=(new h).init(this,[s[i]].concat(Mt(l[i]))):(a[e]?n=a[e]:void 0!==o[e]&&(a[e]=n=(new h).init(this,o[e],s[i])),d[i]=n),d[i].index=e;if(a&&(u!==(t=a.length)||p))for(i=0;i<t;i++)i!==c||p||(i+=u),a[i]&&(a[i].destroyElements(),a[i].plotX=void 0);this.data=a,this.points=d},getExtremes:function(t){for(var e,n,i,r,o=this.xAxis,a=this.yAxis,s=this.processedXData,l=[],h=0,o=o.getExtremes(),u=o.min,c=o.max,p=(t=t||this.stackedYData||this.processedYData).length,d=0;d<p;d++)if(n=s[d],e=null!=(i=t[d])&&(!a.isLog||i.length||0<i),n=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(s[d+1]||n)>=u&&(s[d-1]||n)<=c,e&&n)if(r=i.length)for(;r--;)null!==i[r]&&(l[h++]=i[r]);else l[h++]=i;this.dataMin=Yt(l),this.dataMax=zt(l)},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var t,e,n=this.options,i=n.stacking,r=this.xAxis,o=r.categories,a=this.yAxis,s=this.points,l=s.length,h=!!this.modifyValue,u=n.pointPlacement,c="between"===u||xt(u),p=n.threshold,d=n.startFromThreshold?p:0,f=Number.MAX_VALUE,g=0;g<l;g++){var m,y=s[g],v=y.x,x=y.y,_=y.low,b=i&&a.stacks[(this.negStacks&&x<(d?0:p)?"-":"")+this.stackKey];a.isLog&&null!==x&&x<=0&&(y.y=x=null,Bt(10)),y.plotX=t=W(U(-1e5,r.translate(v,0,0,0,1,u,"flags"===this.type)),1e5),i&&this.visible&&b&&b[v]&&(_=(b=(m=b[v]).points[this.index+","+g])[0],x=b[1],_===d&&(_=Tt(p,a.min)),a.isLog&&_<=0&&(_=null),y.total=y.stackTotal=m.total,y.percentage=m.total&&y.y/m.total*100,y.stackY=x,m.setOffset(this.pointXOffset||0,this.barW||0)),y.yBottom=kt(_)?a.translate(_,0,1,0,1):null,h&&(x=this.modifyValue(x,y)),y.plotY=x="number"==typeof x&&x!==1/0?W(U(-1e5,a.translate(x,0,1,0,1)),1e5):void 0,y.isInside=void 0!==x&&0<=x&&x<=a.len&&0<=t&&t<=r.len,y.clientX=c?r.translate(v,0,0,0,1):t,y.negative=y.y<(p||0),y.category=o&&void 0!==o[y.x]?o[y.x]:y.x,g&&(f=W(f,G(t-e))),e=t}this.closestPointRangePx=f,this.getSegments()},setClip:function(t){var e=this.chart,n=e.renderer,i=e.inverted,r=this.clipBox,o=r||e.clipBox,a=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,o.height].join(","),s=e[a],l=e[a+"m"];s||(t&&(o.width=0,e[a+"m"]=l=n.clipRect(-99,i?-e.plotLeft:-e.plotTop,99,i?e.chartWidth:e.chartHeight)),e[a]=s=n.clipRect(o)),t&&(s.count+=1),!1!==this.options.clip&&(this.group.clip(t||r?s:e.clipRect),this.markerGroup.clip(l),this.sharedClipKey=a),t||(--s.count,s.count<=0&&a&&e[a]&&(r||(e[a]=e[a].destroy()),e[a+"m"]&&(e[a+"m"]=e[a+"m"].destroy())))},animate:function(t){var e,n=this.chart,i=this.options.animation;i&&!yt(i)&&(i=oe[this.type].animation),t?this.setClip(i):((t=n[e=this.sharedClipKey])&&t.animate({width:n.plotSizeX},i),n[e+"m"]&&n[e+"m"].animate({width:n.plotSizeX+99},i),this.animate=null)},afterAnimate:function(){this.setClip(),ee(this,"afterAnimate")},drawPoints:function(){var t,e,n,i,r,o,a,s,l,h,u,c,p=this.points,d=this.chart,f=this.options.marker,g=this.pointAttr[""],m=this.markerGroup,y=this.xAxis,v=Tt(f.enabled,y.isRadial,this.closestPointRangePx>2*f.radius);if(!1!==f.enabled||this._hasPointMarkers)for(i=p.length;i--;)r=p[i],e=z(r.plotX),n=r.plotY,s=r.graphic,l=r.marker||{},h=!!r.marker,u=v&&void 0===l.enabled||l.enabled,c=r.isInside,u&&void 0!==n&&!isNaN(n)&&null!==r.y?(o=(t=r.pointAttr[r.selected?"select":""]||g).r,u=0===(a=Tt(l.symbol,this.symbol)).indexOf("url"),s?s[c?"show":"hide"](!0).animate(dt({x:e-o,y:n-o},s.symbolName?{width:2*o,height:2*o}:{})):c&&(0<o||u)&&(r.graphic=s=d.renderer.symbol(a,e-o,n-o,2*o,2*o,h?l:f).attr(t).add(m))):s&&(r.graphic=s.destroy())},convertAttribs:function(t,e,n,i){var r,o,a=this.pointAttrToOptions,s={};for(r in t=t||{},e=e||{},n=n||{},i=i||{},a)o=a[r],s[r]=Tt(t[o],e[r],n[r],i[r]);return s},getAttribs:function(){var t,e,n,i,r,o,a,s=this,l=s.options,h=oe[s.type].marker?l.marker:l,u=h.states,c=u.hover,p=s.color,d=s.options.negativeColor,f={stroke:p,fill:p},g=s.points||[],m=[],y=s.pointAttrToOptions,v=s.hasPointSpecificOptions,x=h.lineColor,_=h.fillColor,b=l.turboThreshold,w=s.zones,k=s.zoneAxis||"y";if(l.marker?(c.radius=c.radius||h.radius+c.radiusPlus,c.lineWidth=c.lineWidth||h.lineWidth+c.lineWidthPlus):(c.color=c.color||se(c.color||p).brighten(c.brightness).get(),c.negativeColor=c.negativeColor||se(c.negativeColor||d).brighten(c.brightness).get()),m[""]=s.convertAttribs(h,f),qt(["hover","select"],function(t){m[t]=s.convertAttribs(u[t],m[""])}),s.pointAttr=m,t=g.length,!b||t<b||v)for(;t--;){if((h=(i=g[t]).options&&i.options.marker||i.options)&&!1===h.enabled&&(h.radius=0),w.length){for(n=w[e=0];i[k]>=n.value;)n=w[++e];n.color&&(i.color=i.fillColor=n.color)}if(v=l.colorByPoint||i.color,i.options)for(a in y)kt(h[y[a]])&&(v=!0);v?(r=[],o=(u=(h=h||{}).states||{}).hover=u.hover||{},l.marker||(o.color=o.color||!i.options.color&&c[i.negative&&d?"negativeColor":"color"]||se(i.color).brighten(o.brightness||c.brightness).get()),o={color:i.color},_||(o.fillColor=i.color),x||(o.lineColor=i.color),h.hasOwnProperty("color")&&!h.color&&delete h.color,r[""]=s.convertAttribs(dt(o,h),m[""]),r.hover=s.convertAttribs(u.hover,m.hover,r[""]),r.select=s.convertAttribs(u.select,m.select,r[""])):r=m,i.pointAttr=r}},destroy:function(){var t,e,n,i,r,o=this,a=o.chart,s=/AppleWebKit\/533/.test(h),l=o.data||[];for(ee(o,"destroy"),te(o),qt(o.axisTypes||[],function(t){(r=o[t])&&(wt(r.series,o),r.isDirty=r.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)(n=l[e])&&n.destroy&&n.destroy();for(i in o.points=null,clearTimeout(o.animationTimeout),o)o[i]instanceof ce&&!o[i].survive&&(t=s&&"group"===i?"hide":"destroy",o[i][t]());for(i in a.hoverSeries===o&&(a.hoverSeries=null),wt(a.series,o),o)delete o[i]},getSegmentPath:function(r){var o=this,a=[],s=o.options.step;return qt(r,function(t,e){var n=t.plotX,i=t.plotY;o.getPointSpline?a.push.apply(a,o.getPointSpline(r,t,e)):(a.push(e?ht:lt),s&&e&&(e=r[e-1],"right"===s?a.push(e.plotX,i):"center"===s?a.push((e.plotX+n)/2,e.plotY,(e.plotX+n)/2,i):a.push(n,e.plotY)),a.push(t.plotX,t.plotY))}),a},getGraphPath:function(){var e,n=this,i=[],r=[];return qt(n.segments,function(t){e=n.getSegmentPath(t),1<t.length?i=i.concat(e):r.push(t[0])}),n.singlePoints=r,n.graphPath=i},drawGraph:function(){var r=this,o=this.options,n=[["graph",o.lineColor||this.color,o.dashStyle]],a=o.lineWidth,s="square"!==o.linecap,l=this.getGraphPath(),h=this.fillGraph&&this.color||st,t=this.zones;qt(t,function(t,e){n.push(["zoneGraph"+e,t.color||r.color,t.dashStyle||o.dashStyle])}),qt(n,function(t,e){var n=t[0],i=r[n];i?i.animate({d:l}):(a||h)&&l.length&&(i={stroke:t[1],"stroke-width":a,fill:h,zIndex:1},t[2]?i.dashstyle=t[2]:s&&(i["stroke-linecap"]=i["stroke-linejoin"]="round"),r[n]=r.chart.renderer.path(l).attr(i).add(r.group).shadow(e<2&&o.shadow))})},applyZones:function(){var n,i,r,o,a,s,l=this,h=this.chart,u=h.renderer,t=this.zones,c=this.clips||[],p=this.graph,d=this.area,f=U(h.chartWidth,h.chartHeight),g=this[(this.zoneAxis||"y")+"Axis"],m=g.reversed,y=h.inverted,v=g.horiz,x=!1;t.length&&(p||d)&&void 0!==g.min&&(p&&p.hide(),d&&d.hide(),r=g.getExtremes(),qt(t,function(t,e){s=m?v?h.plotWidth:0:v?0:g.toPixels(r.min),s=W(U(Tt(n,s),0),f),n=W(U(B(g.toPixels(Tt(t.value,r.max),!0)),0),f),x&&(s=n=g.toPixels(r.max)),o=Math.abs(s-n),a=W(s,n),s=U(s,n),g.isXAxis?(i={x:y?s:a,y:0,width:o,height:f},v||(i.x=h.plotHeight-i.x)):(i={x:0,y:y?s:a,width:f,height:o},v&&(i.y=h.plotWidth-i.y)),h.inverted&&u.isVML&&(i=g.isXAxis?{x:0,y:m?a:s,height:i.width,width:h.chartWidth}:{x:i.y-h.plotLeft-h.spacingBox.x,y:0,width:i.height,height:h.chartHeight}),c[e]?c[e].animate(i):(c[e]=u.clipRect(i),p&&l["zoneGraph"+e].clip(c[e]),d&&l["zoneArea"+e].clip(c[e])),x=t.value>r.max}),this.clips=c)},invertGroups:function(){var n=this,t=n.chart;function e(){var e={width:n.yAxis.len,height:n.xAxis.len};qt(["group","markerGroup"],function(t){n[t]&&n[t].attr(e).invert()})}n.xAxis&&(Qt(t,"resize",e),Qt(n,"destroy",function(){te(t,"resize",e)}),e(),n.invertGroups=e)},plotGroup:function(t,e,n,i,r){var o=this[t],a=!o;return a&&(this[t]=o=this.chart.renderer.g(e).attr({visibility:n,zIndex:i||.1}).add(r)),o[a?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t=this,e=t.chart,n=t.options,i=n.animation,r=i&&!!t.animate&&e.renderer.isSVG&&Tt(i.duration,500)||0,o=t.visible?ot:it,a=n.zIndex,s=t.hasRendered,l=e.seriesGroup,i=t.plotGroup("group","series",o,a,l);t.markerGroup=t.plotGroup("markerGroup","markers",o,a,l),r&&t.animate(!0),t.getAttribs(),i.inverted=!!t.isCartesian&&e.inverted,t.drawGraph&&(t.drawGraph(),t.applyZones()),qt(t.points,function(t){t.redraw&&t.redraw()}),t.drawDataLabels&&t.drawDataLabels(),t.visible&&t.drawPoints(),t.drawTracker&&!1!==t.options.enableMouseTracking&&t.drawTracker(),e.inverted&&t.invertGroups(),!1===n.clip||t.sharedClipKey||s||i.clip(e.clipRect),r&&t.animate(),s||(r?t.animationTimeout=setTimeout(function(){t.afterAnimate()},r):t.afterAnimate()),t.isDirty=t.isDirtyData=!1,t.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,n=this.isDirty,i=this.group,r=this.xAxis,o=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:Tt(r&&r.left,t.plotLeft),translateY:Tt(o&&o.top,t.plotTop)})),this.translate(),this.render(),e&&ee(this,"updatedData"),(n||e)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var n=this.xAxis,i=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:r?i.len-t.chartX+i.pos:t.chartY-i.pos},e)},buildKDTree:function(){var a=this,e=a.kdDimensions;function t(){var t=Kt(a.points||[],function(t){return null!==t.y});a.kdTree=function t(e,n,i){var r,o=e&&e.length;if(o)return r=a.kdAxisArray[n%i],e.sort(function(t,e){return t[r]-e[r]}),{point:e[o=Math.floor(o/2)],left:t(e.slice(0,o),n+1,i),right:t(e.slice(o+1),n+1,i)}}(t,e,e)}delete a.kdTree,a.options.kdSync?t():setTimeout(t)},searchKDTree:function(t,e){var c=this,p=this.kdAxisArray[0],d=this.kdAxisArray[1],f=e?"distX":"dist";if(this.kdTree||this.buildKDTree(),this.kdTree)return function t(e,n,i,r){var o=n.point,a=c.kdAxisArray[i%r],s=o,l=o,h=kt((u=e)[p])&&kt(l[p])?Math.pow(u[p]-l[p],2):null,u=(h||0)+((kt(u[d])&&kt(l[d])?Math.pow(u[d]-l[d],2):null)||0);return l.dist=kt(u)?Math.sqrt(u):Number.MAX_VALUE,l.distX=kt(h)?Math.sqrt(h):Number.MAX_VALUE,h=(l=e[a]-o[a])<0?"right":"left",n[a=l<0?"left":"right"]&&(s=(a=t(e,n[a],i+1,r))[f]<s[f]?a:o),s=n[h]&&Math.sqrt(l*l)<s[f]?(r=t(e,n[h],i+1,r))[f]<s[f]?r:s:s}(t,this.kdTree,this.kdDimensions,this.kdDimensions)}},Ie.prototype={destroy:function(){Ft(this,this.axis)},render:function(t){var e=this.options,n=e.format,n=n?Rt(n,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:it}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:it}).add(t)},setOffset:function(t,e){var n=this.axis,i=n.chart,r=i.inverted,o=n.reversed,a=this.isNegative&&!o||!this.isNegative&&o,s=n.translate(n.usePercentage?100:this.total,0,0,0,1),l=n.translate(0),o=G(s-l),n=i.xAxis[0].translate(this.x)+t,l=i.plotHeight,t=this.label;t&&(t.align(this.alignOptions,null,{x:r?a?s:s-o:n,y:r?l-n-e:a?l-s-o:l-s,width:r?o:e,height:r?e:o}),o=t.alignAttr,t[!1===this.options.crop||i.isInsidePlot(o.x,o.y)?"show":"hide"](!0))}},Pe.prototype.getStacks=function(){var e=this;qt(e.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),qt(e.series,function(t){!t.options.stacking||!0!==t.visible&&!1!==e.options.chart.ignoreHiddenSeries||(t.stackKey=t.type+Tt(t.options.stack,""))})},ve.prototype.buildStacks=function(){var t=this.series,e=Tt(this.options.reversedStacks,!0),n=t.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)t[e?n:t.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<t.length;n++)t[n].setPercentStacks()}},ve.prototype.renderStackTotals=function(){var t,e,n,i=this.chart,r=i.renderer,o=this.stacks,a=this.stackTotalGroup;for(t in a||(this.stackTotalGroup=a=r.g("stack-labels").attr({visibility:ot,zIndex:6}).add()),a.translate(i.plotLeft,i.plotTop),o)for(n in e=o[t])e[n].render(a)},ve.prototype.resetStacks=function(){var t,e,n=this.stacks;if(!this.isXAxis)for(t in n)for(e in n[t])n[t][e].touched<this.stacksTouched?(n[t][e].destroy(),delete n[t][e]):(n[t][e].total=null,n[t][e].cum=0)},ve.prototype.cleanStacks=function(){var t,e,n;if(!this.isXAxis)for(e in t=this.oldStacks?this.stacks=this.oldStacks:t)for(n in t[e])t[e][n].cum=t[e][n].total},Le.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,n,i,r,o,a=this.processedXData,s=this.processedYData,l=[],h=s.length,u=this.options,c=u.threshold,p=u.startFromThreshold?c:0,d=u.stack,f=u.stacking,g=this.stackKey,m="-"+g,y=this.negStacks,v=this.yAxis,x=v.stacks,_=v.oldStacks;for(v.stacksTouched+=1,i=0;i<h;i++)r=a[i],o=s[i],n=this.index+","+i,x[e=(t=y&&o<(p?0:c))?m:g]||(x[e]={}),x[e][r]||(_[e]&&_[e][r]?(x[e][r]=_[e][r],x[e][r].total=null):x[e][r]=new Ie(v,v.options.stackLabels,t,r,d)),(e=x[e][r]).points[n]=[Tt(e.cum,p)],e.touched=v.stacksTouched,"percent"===f?(t=t?g:m,y&&x[t]&&x[t][r]?(t=x[t][r],e.total=t.total=U(t.total,e.total)+G(o)||0):e.total=Ut(e.total+(G(o)||0))):e.total=Ut(e.total+(o||0)),e.cum=Tt(e.cum,p)+(o||0),e.points[n].push(e.cum),l[i]=e.cum;"percent"===f&&(v.usePercentage=!0),this.stackedYData=l,v.oldStacks={}}},Le.prototype.setPercentStacks=function(){var r=this,t=r.stackKey,o=r.yAxis.stacks,a=r.processedXData;qt([t,"-"+t],function(t){for(var e,n,i=a.length;i--;)e=a[i],(e=(n=o[t]&&o[t][e])&&n.points[r.index+","+i])&&(n=n.total?100/n.total:0,e[0]=Ut(e[0]*n),e[1]=Ut(e[1]*n),r.stackedYData[i]=e[1])})},dt(Pe.prototype,{addSeries:function(t,e,n){var i,r=this;return t&&(e=Tt(e,!0),ee(r,"addSeries",{options:t},function(){i=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(n)})),i},addAxis:function(t,e,n,i){var r=e?"xAxis":"yAxis",o=this.options;new ve(this,ft(t,{index:this[r].length,isX:e})),o[r]=Mt(o[r]||{}),o[r].push(t),Tt(n,!0)&&this.redraw(i)},showLoading:function(t){function e(){r&&At(r,{left:n.plotLeft+at,top:n.plotTop+at,width:n.plotWidth+at,height:n.plotHeight+at})}var n=this,i=n.options,r=n.loadingDiv,o=i.loading;r||(n.loadingDiv=r=Pt(nt,{className:rt+"loading"},dt(o.style,{zIndex:10,display:st}),n.container),n.loadingSpan=Pt("span",null,o.labelStyle,r),Qt(n,"redraw",e)),n.loadingSpan.innerHTML=t||i.lang.loading,n.loadingShown||(At(r,{opacity:0,display:""}),ie(r,{opacity:o.style.opacity},{duration:o.showDuration||0}),n.loadingShown=!0),e()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&ie(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){At(e,{display:st})}}),this.loadingShown=!1}}),dt(De.prototype,{update:function(t,e,n,i){var r,o=this,a=o.series,s=o.graphic,l=a.chart,h=a.options,u=a.xAxis&&a.xAxis.names;function c(){o.applyOptions(t),null===o.y&&s&&(o.graphic=s.destroy()),yt(t)&&!vt(t)&&(o.redraw=function(){s&&s.element&&t&&t.marker&&t.marker.symbol&&(o.graphic=s.destroy()),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.redraw=null}),r=o.index,a.updateParallelArrays(o,r),u&&o.name&&(u[o.x]=o.name),h.data[r]=o.options,a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===h.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(n)}e=Tt(e,!0),!1===i?c():o.firePointEvent("update",{options:t},c)},remove:function(t,e){this.series.removePoint($t(this,this.series.data),t,e)}}),dt(Le.prototype,{addPoint:function(t,e,n,i){var r,o,a,s=this,l=s.options,h=s.data,u=s.graph,c=s.area,p=s.chart,d=s.xAxis&&s.xAxis.names,f=u&&u.shift||0,g=["graph","area"],u=l.data,m=s.xData;if(Wt(i,p),n){for(o=s.zones.length;o--;)g.push("zoneGraph"+o,"zoneArea"+o);qt(g,function(t){s[t]&&(s[t].shift=f+1)})}if(c&&(c.isArea=!0),e=Tt(e,!0),s.pointClass.prototype.applyOptions.apply(c={series:s},[t]),a=c.x,o=m.length,s.requireSorting&&a<m[o-1])for(r=!0;o&&m[o-1]>a;)o--;s.updateParallelArrays(c,"splice",o,0,0),s.updateParallelArrays(c,o),d&&c.name&&(d[a]=c.name),u.splice(o,0,t),r&&(s.data.splice(o,0,null),s.processData()),"point"===l.legendType&&s.generatePoints(),n&&(h[0]&&h[0].remove?h[0].remove(!1):(h.shift(),s.updateParallelArrays(c,"shift"),u.shift())),s.isDirty=!0,s.isDirtyData=!0,e&&(s.getAttribs(),p.redraw())},removePoint:function(t,e,n){function i(){o.length===s.length&&s.splice(t,1),o.splice(t,1),r.options.data.splice(t,1),r.updateParallelArrays(a||{series:r},"splice",t,1),a&&a.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&l.redraw()}var r=this,o=r.data,a=o[t],s=r.points,l=r.chart;Wt(n,l),e=Tt(e,!0),a?a.firePointEvent("remove",null,i):i()},remove:function(t,e){var n=this,i=n.chart;t=Tt(t,!0),n.isRemoving||(n.isRemoving=!0,ee(n,"remove",null,function(){n.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,i.linkSeries(),t&&i.redraw(e)})),n.isRemoving=!1},update:function(t,e){var n,i=this,r=this.chart,o=this.userOptions,a=this.type,s=pt[a].prototype,l=["group","markerGroup","dataLabelsGroup"];for(n in(t.type&&t.type!==a||void 0!==t.zIndex)&&(l.length=0),qt(l,function(t){l[t]=i[t],delete i[t]}),t=ft(o,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1),s)this[n]=void 0;dt(this,pt[t.type||a].prototype),qt(l,function(t){i[t]=l[t]}),this.init(r,t),r.linkSeries(),Tt(e,!0)&&r.redraw(!1)}}),dt(ve.prototype,{update:function(t,e){var n=this.chart;t=n.options[this.coll][this.options.index]=ft(this.userOptions,t),this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=void 0,this.init(n,dt(t,{events:void 0})),n.isDirtyBox=!0,Tt(e,!0)&&n.redraw()},remove:function(t){for(var e=this.chart,n=this.coll,i=this.series,r=i.length;r--;)i[r]&&i[r].remove(!1);wt(e.axes,this),wt(e[n],this),e.options[n].splice(this.options.index,1),qt(e[n],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,Tt(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Ee=i(Le);pt.line=Ee,oe.area=ft(r,{threshold:0});Gt=i(Le,{type:"area",getSegments:function(){var i,r,o,t,a=this,e=[],s=[],n=[],l=this.xAxis,h=this.yAxis,u=h.stacks[this.stackKey],c={},p=this.points,d=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(o=0;o<p.length;o++)c[p[o].x]=p[o];for(t in u)null!==u[t].total&&n.push(+t);n.sort(function(t,e){return t-e}),qt(n,function(t){var e,n=0;if(!d||c[t]&&null!==c[t].y)if(c[t])s.push(c[t]);else{for(o=a.index;o<=h.series.length;o++)if(e=u[t].points[o+","+t]){n=e[1];break}i=l.translate(t),r=h.toPixels(n,!0),s.push({y:null,plotX:i,clientX:i,plotY:r,yBottom:r,onMouseOver:f})}}),s.length&&e.push(s)}else Le.prototype.getSegments.call(this),e=this.segments;this.segments=e},getSegmentPath:function(t){var e,n,i=Le.prototype.getSegmentPath.call(this,t),r=[].concat(i),o=this.options,a=i.length,s=this.yAxis.getThreshold(o.threshold);if(3===a&&r.push(ht,i[1],i[2]),o.stacking&&!this.closedStacks)for(e=t.length-1;0<=e;e--)n=Tt(t[e].yBottom,s),e<t.length-1&&o.step&&r.push(t[e+1].plotX,n),r.push(t[e].plotX,n);else this.closeSegment(r,t,s);return this.areaPath=this.areaPath.concat(r),i},closeSegment:function(t,e,n){t.push(ht,e[e.length-1].plotX,n,ht,e[0].plotX,n)},drawGraph:function(){this.areaPath=[],Le.prototype.drawGraph.apply(this);var i=this,r=this.areaPath,o=this.options,t=this.zones,n=[["area",this.color,o.fillColor]];qt(t,function(t,e){n.push(["zoneArea"+e,t.color||i.color,t.fillColor||o.fillColor])}),qt(n,function(t){var e=t[0],n=i[e];n?n.animate({d:r}):i[e]=i.chart.renderer.path(r).attr({fill:Tt(t[2],se(t[1]).setOpacity(Tt(o.fillOpacity,.75)).get()),zIndex:0}).add(i.group)})},drawLegendSymbol:Ae.drawRectangle});pt.area=Gt,oe.spline=ft(r);Ee=i(Le,{type:"spline",getPointSpline:function(t,e,n){var i,r,o,a,s,l,h=e.plotX,u=e.plotY,c=t[n-1],p=t[n+1];return c&&p&&(o=c.plotX,a=c.plotY,s=p.plotX,t=(1.5*u+(l=p.plotY))/2.5,t+=o=(t-(i=(1.5*u+a)/2.5))*((p=(1.5*h+s)/2.5)-h)/(p-(s=(1.5*h+o)/2.5))+u-t,(i+=o)>a&&u<i?t=2*u-(i=U(a,u)):i<a&&i<u&&(t=2*u-(i=W(a,u))),l<t&&u<t?i=2*u-(t=U(l,u)):t<l&&t<u&&(i=2*u-(t=W(l,u))),e.rightContX=p,e.rightContY=t),n?(r=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,s||h,i||u,h,u],c.rightContX=c.rightContY=null):r=[lt,h,u],r}});pt.spline=Ee,oe.areaspline=ft(oe.area);Gt=Gt.prototype,Ee=i(Ee,{type:"areaspline",closedStacks:!0,getSegmentPath:Gt.getSegmentPath,closeSegment:Gt.closeSegment,drawGraph:Gt.drawGraph,drawLegendSymbol:Ae.drawRectangle});pt.areaspline=Ee,oe.column=ft(r,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});Gt=i(Le,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Le.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&qt(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var i,r=this,t=r.options,e=r.xAxis,o=r.yAxis,n=e.reversed,a={},s=0;!1===t.grouping?s=1:qt(r.chart.series,function(t){var e=t.options,n=t.yAxis;t.type===r.type&&t.visible&&o.len===n.len&&o.pos===n.pos&&(e.stacking?(i=t.stackKey,void 0===a[i]&&(a[i]=s++),i=a[i]):!1!==e.grouping&&(i=s++),t.columnIndex=i)});var l=W(G(e.transA)*(e.ordinalSlope||t.pointRange||e.closestPointRange||e.tickInterval||1),e.len),h=l*t.groupPadding,u=(l-2*h)/s,t=W(t.maxPointWidth||e.len,Tt(t.pointWidth,u*(1-2*t.pointPadding))),n=(u-t)/2+(h+((n?s-(r.columnIndex||0):r.columnIndex)||0)*u-l/2)*(n?-1:1);return r.columnMetrics={width:t,offset:n}},translate:function(){var l=this,h=l.chart,t=l.options,e=l.borderWidth=Tt(t.borderWidth,l.closestPointRange*l.xAxis.transA<2?0:1),u=l.yAxis,n=t.threshold,c=l.translatedThreshold=u.getThreshold(n),p=Tt(t.minPointLength,5),n=l.getColumnMetrics(),d=n.width,f=l.barW=U(d,1+2*e),g=l.pointXOffset=n.offset,m=-(e%2?.5:0),y=e%2?.5:1;h.inverted&&(c-=.5,h.renderer.isVML&&(y+=1)),t.pointPadding&&(f=F(f)),Le.prototype.translate.apply(l),qt(l.points,function(t){var e,n=Tt(t.yBottom,c),i=999+G(n),r=W(U(-i,t.plotY),u.len+i),o=t.plotX+g,a=f,s=W(r,n),i=U(r,n)-s;G(i)<p&&p&&(i=p,e=!u.reversed&&!t.negative||u.reversed&&t.negative,s=B(G(s-c)>p?n-p:c-(e?p:0))),t.barX=o,t.pointWidth=d,a=B(o+a)+m-(o=B(o)+m),e=G(s)<.5,i=W(B(s+i)+y,9e4)-(s=B(s)+y),e&&(--s,i+=1),t.tooltipPos=h.inverted?[u.len+u.pos-h.plotLeft-r,l.xAxis.len-o-a/2,i]:[o+a/2,r+u.pos-h.plotTop,i],t.shapeType="rect",t.shapeArgs={x:o,y:s,width:a,height:i}})},getSymbol:f,drawLegendSymbol:Ae.drawRectangle,drawGraph:f,drawPoints:function(){var i,r,o=this,a=this.chart,s=o.options,l=a.renderer,h=s.animationLimit||250;qt(o.points,function(t){var e=t.plotY,n=t.graphic;void 0===e||isNaN(e)||null===t.y?n&&(t.graphic=n.destroy()):(i=t.shapeArgs,e=kt(o.borderWidth)?{"stroke-width":o.borderWidth}:{},r=t.pointAttr[t.selected?"select":""]||o.pointAttr[""],n?(re(n),n.attr(e)[a.pointCount<h?"animate":"attr"](ft(i))):t.graphic=n=l[t.shapeType](i).attr(e).attr(r).add(o.group).shadow(s.shadow,null,s.stacking&&!s.borderRadius))})},animate:function(t){var e=this.yAxis,n=this.options,i=this.chart.inverted,r={};Q&&(t?(r.scaleY=.001,n=W(e.pos+e.len,U(e.pos,e.toPixels(n.threshold))),i?r.translateX=n-e.len:r.translateY=n,this.group.attr(r)):(r.scaleY=1,r[i?"translateX":"translateY"]=e.pos,this.group.animate(r,this.options.animation),this.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&qt(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Le.prototype.remove.apply(e,arguments)}});pt.column=Gt,oe.bar=ft(oe.column);Ee=i(Gt,{type:"bar",inverted:!0});pt.bar=Ee,oe.scatter=ft(r,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">â—</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});Ee=i(Le,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&Le.prototype.drawGraph.call(this)}});pt.scatter=Ee,oe.pie=ft(r,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Re,He,Oe,Ae={type:"pie",isCartesian:!1,pointClass:i(De,{init:function(){De.prototype.init.apply(this,arguments);var t,e=this;return dt(e,{visible:!1!==e.visible,name:Tt(e.name,"Slice")}),t=function(t){e.slice("select"===t.type)},Qt(e,"select",t),Qt(e,"unselect",t),e},setVisible:function(e,t){var n=this,i=n.series,r=i.chart,o=i.options.ignoreHiddenPoint;t=Tt(t,o),e!==n.visible&&(n.visible=n.options.visible=e=void 0===e?!n.visible:e,i.options.data[$t(n,i.data)]=n.options,qt(["graphic","dataLabel","connector","shadowGroup"],function(t){n[t]&&n[t][e?"show":"hide"](!0)}),n.legendItem&&r.legend.colorizeItem(n,e),e||"hover"!==n.state||n.setState(""),o&&(i.isDirty=!0),t&&r.redraw())},slice:function(t,e,n){var i=this.series;Wt(n,i.chart),e=Tt(e,!0),this.sliced=this.options.sliced=t=kt(t)?t:!this.sliced,i.options.data[$t(this,i.data)]=this.options,t=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(t),this.shadowGroup&&this.shadowGroup.animate(t)},haloPath:function(t){var e=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+e.x,n.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var i=this,e=i.points,r=i.startAngleRad;t||(qt(e,function(t){var e=t.graphic,n=t.shapeArgs;e&&(e.attr({r:t.startR||i.center[3]/2,start:r,end:r}),e.animate({r:n.r,start:n.start,end:n.end},i.options.animation))}),i.animate=null)},setData:function(t,e,n,i){Le.prototype.setData.call(this,t,!1,n,i),this.processData(),this.generatePoints(),Tt(e,!0)&&this.chart.redraw(n)},updateTotals:function(){for(var t,e=0,n=this.points,i=n.length,r=this.options.ignoreHiddenPoint,o=0;o<i;o++)t=n[o],e+=r&&!t.visible?0:t.y;for(this.total=e,o=0;o<i;o++)(t=n[o]).percentage=0<e&&(t.visible||!r)?t.y/e*100:0,t.total=e},generatePoints:function(){Le.prototype.generatePoints.call(this),this.updateTotals()},translate:function(n){this.generatePoints();var i,t,e,r,o,a=0,s=this.options,l=s.slicedOffset,h=l+s.borderWidth,u=s.startAngle||0,c=this.startAngleRad=j/180*(u-90),p=(this.endAngleRad=j/180*(Tt(s.endAngle,u+360)-90))-c,d=this.points,f=s.dataLabels.distance,g=s.ignoreHiddenPoint,m=d.length;for(n||(this.center=n=this.getCenter()),this.getX=function(t,e){return i=Y.asin(W((t-n[1])/(n[2]/2+f),1)),n[0]+(e?-1:1)*(X(i)*(n[2]/2+f))},r=0;r<m;r++)o=d[r],e=c+a*p,g&&!o.visible||(a+=o.percentage/100),t=c+a*p,o.shapeType="arc",o.shapeArgs={x:n[0],y:n[1],r:n[2]/2,innerR:n[3]/2,start:B(1e3*e)/1e3,end:B(1e3*t)/1e3},(i=(t+e)/2)>1.5*j?i-=2*j:i<-j/2&&(i+=2*j),o.slicedTranslation={translateX:B(X(i)*l),translateY:B(V(i)*l)},t=X(i)*n[2]/2,e=V(i)*n[2]/2,o.tooltipPos=[n[0]+.7*t,n[1]+.7*e],o.half=i<-j/2||j/2<i?1:0,o.angle=i,h=W(h,f/2),o.labelPos=[n[0]+t+X(i)*f,n[1]+e+V(i)*f,n[0]+t+X(i)*h,n[1]+e+V(i)*h,n[0]+t,n[1]+e,f<0?"center":o.half?"right":"left",i]},drawGraph:null,drawPoints:function(){var e,n,i,r,o,a=this,s=a.chart.renderer,l=a.options.shadow;l&&!a.shadowGroup&&(a.shadowGroup=s.g("shadow").add(a.group)),qt(a.points,function(t){null!==t.y&&(n=t.graphic,r=t.shapeArgs,i=t.shadowGroup,l&&!i&&(i=t.shadowGroup=s.g("shadow").add(a.shadowGroup)),e=t.sliced?t.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(e),n?n.animate(dt(r,e)):(o={"stroke-linejoin":"round"},t.visible||(o.visibility="hidden"),t.graphic=n=s[t.shapeType](r).setRadialReference(a.center).attr(t.pointAttr[t.selected?"select":""]).attr(o).attr(e).add(a.group).shadow(l,i)))})},searchPoint:f,sortByAngle:function(t,n){t.sort(function(t,e){return void 0!==t.angle&&(e.angle-t.angle)*n})},drawLegendSymbol:Ae.drawRectangle,getCenter:Ce.getCenter,getSymbol:f},Ae=i(Le,Ae);pt.pie=Ae,Le.prototype.drawDataLabels=function(){var u,c,p,d=this,f=d.options,g=f.cursor,m=f.dataLabels,t=d.points,e=d.hasRendered||0,y=d.chart.renderer;(m.enabled||d._hasPointLabels)&&(d.dlProcessOptions&&d.dlProcessOptions(m),p=d.plotGroup("dataLabelsGroup","data-labels",m.defer?it:ot,m.zIndex||6),Tt(m.defer,!0)&&(p.attr({opacity:+e}),e||Qt(d,"afterAnimate",function(){d.visible&&p.show(),p[f.animation?"animate":"attr"]({opacity:1},{duration:200})})),u=m,qt(t,function(t){var e,n,i,r,o,a=t.dataLabel,s=t.connector,l=!0,h={};if(c=t.dlOptions||t.options&&t.options.dataLabels,e=Tt(c&&c.enabled,u.enabled),a&&!e)t.dataLabel=a.destroy();else if(e){if(o=(m=ft(u,c)).style,r=m.rotation,e=t.getLabelConfig(),c=m.format?Rt(m.format,e):m.formatter.call(e,m),o.color=Tt(m.color,o.color,d.color,"black"),a)kt(c)?(a.attr({text:c}),l=!1):(t.dataLabel=a=a.destroy(),s&&(t.connector=s.destroy()));else if(kt(c)){for(i in n={fill:m.backgroundColor,stroke:m.borderColor,"stroke-width":m.borderWidth,r:m.borderRadius||0,rotation:r,padding:m.padding,zIndex:1},"contrast"===o.color&&(h.color=m.inside||m.distance<0||f.stacking?y.getContrast(t.color||d.color):"#000000"),g&&(h.cursor=g),n)void 0===n[i]&&delete n[i];a=t.dataLabel=y[r?"text":"label"](c,0,-999,m.shape,null,null,m.useHTML).attr(n).css(dt(o,h)).add(p).shadow(m.shadow)}a&&d.alignDataLabel(t,a,m,null,l)}}))},Le.prototype.alignDataLabel=function(t,e,n,i,r){var o,a=this.chart,s=a.inverted,l=Tt(t.plotX,-999),h=Tt(t.plotY,-999),u=e.getBBox(),c=a.renderer.fontMetrics(n.style.fontSize).b,p=this.visible&&(t.series.forceDL||a.isInsidePlot(l,B(h),s)||i&&a.isInsidePlot(l,s?i.x+1:i.y+i.height-1,s));p&&(i=dt({x:s?a.plotWidth-h:l,y:B(s?a.plotHeight-l:h),width:0,height:0},i),dt(n,{width:u.width,height:u.height}),n.rotation?(o=a.renderer.rotCorr(c,n.rotation),e[r?"attr":"animate"]({x:i.x+n.x+i.width/2+o.x,y:i.y+n.y+i.height/2}).attr({align:n.align})):(e.align(n,null,i),o=e.alignAttr,"justify"===Tt(n.overflow,"justify")?this.justifyDataLabel(e,n,o,u,i,r):Tt(n.crop,!0)&&(p=a.isInsidePlot(o.x,o.y)&&a.isInsidePlot(o.x+u.width,o.y+u.height)),n.shape&&e.attr({anchorX:t.plotX,anchorY:t.plotY}))),p||(e.attr({y:-999}),e.placed=!1)},Le.prototype.justifyDataLabel=function(t,e,n,i,r,o){var a,s,l=this.chart,h=e.align,u=e.verticalAlign,c=!t.box&&t.padding||0;(a=n.x+c)<0&&("right"===h?e.align="left":e.x=-a,s=!0),(a=n.x+i.width-c)>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-a,s=!0),(a=n.y+c)<0&&("bottom"===u?e.verticalAlign="top":e.y=-a,s=!0),(a=n.y+i.height-c)>l.plotHeight&&("top"===u?e.verticalAlign="bottom":e.y=l.plotHeight-a,s=!0),s&&(t.placed=!o,t.align(e,null,r))},pt.pie&&(pt.pie.prototype.drawDataLabels=function(){function t(t,e){return e.y-t.y}var e,n,i,r,o,a,s,l,h,u,c=this,p=c.data,d=c.chart,f=c.options.dataLabels,g=Tt(f.connectorPadding,10),m=Tt(f.connectorWidth,1),y=d.plotWidth,v=d.plotHeight,x=Tt(f.softConnector,!0),_=f.distance,b=c.center,w=b[2]/2,k=b[1],S=0<_,M=[[],[]],T=[0,0,0,0];if(c.visible&&(f.enabled||c._hasPointLabels)){for(Le.prototype.drawDataLabels.apply(c),qt(p,function(t){t.dataLabel&&t.visible&&M[t.half].push(t)}),h=2;h--;){var A,P,D,C,L,I,E=[],R=[],H=M[h],O=H.length;if(O){for(c.sortByAngle(H,h-.5),u=r=0;!r&&H[u];)r=H[u]&&H[u].dataLabel&&(H[u].dataLabel.getBBox().height||21),u++;if(0<_){for(D=W(k+w+_,d.plotHeight),P=U(0,k-w-_);P<=D;P+=r)E.push(P);if(O>(A=E.length)){for((l=[].concat(H)).sort(t),u=O;u--;)l[u].rank=u;for(u=O;u--;)H[u].rank>=A&&H.splice(u,1);O=H.length}for(u=0;u<O;u++){for(var N,Y,z=(N=H[u]).labelPos,F=9999,X=0;X<A;X++)(Y=G(E[X]-z[1]))<F&&(F=Y,C=X);if(C<u&&null!==E[u])C=u;else if(A<O-u+C&&null!==E[u])for(C=A-O+u;null===E[C];)C++;else for(;null===E[C];)C++;R.push({i:C,y:E[C]}),E[C]=null}R.sort(t)}for(u=0;u<O;u++)N=H[u],z=N.labelPos,i=N.dataLabel,s=!1===N.visible?it:"inherit",I=z[1],0<_?(C=(L=R.pop()).i,(I>(a=L.y)&&null!==E[C+1]||I<a&&null!==E[C-1])&&(a=W(U(0,I),d.plotHeight))):a=I,o=f.justify?b[0]+(h?-1:1)*(w+_):c.getX(a===k-w-_||a===k+w+_?I:a,h),i._attr={visibility:s,align:z[6]},i._pos={x:o+f.x+({left:g,right:-g}[z[6]]||0),y:a+f.y-10},i.connX=o,i.connY=a,null===this.options.size&&(I=i.width,o-I<g?T[3]=U(B(I-o+g),T[3]):y-g<o+I&&(T[1]=U(B(o+I-y+g),T[1])),a-r/2<0?T[0]=U(B(r/2-a),T[0]):v<a+r/2&&(T[2]=U(B(a+r/2-v),T[2])))}}0!==zt(T)&&!this.verifyDataLabelOverflow(T)||(this.placeDataLabels(),S&&m&&qt(this.points,function(t){e=t.connector,z=t.labelPos,(i=t.dataLabel)&&i._pos&&t.visible?(s=i._attr.visibility,o=i.connX,a=i.connY,n=x?[lt,o+("left"===z[6]?5:-5),a,"C",o,a,2*z[2]-z[4],2*z[3]-z[5],z[2],z[3],ht,z[4],z[5]]:[lt,o+("left"===z[6]?5:-5),a,ht,z[2],z[3],ht,z[4],z[5]],e?(e.animate({d:n}),e.attr("visibility",s)):t.connector=e=c.chart.renderer.path(n).attr({"stroke-width":m,stroke:f.connectorColor||t.color||"#606060",visibility:s}).add(c.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},pt.pie.prototype.placeDataLabels=function(){qt(this.points,function(t){var e=t.dataLabel;e&&t.visible&&((t=e._pos)?(e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-999}))})},pt.pie.prototype.alignDataLabel=f,pt.pie.prototype.verifyDataLabelOverflow=function(t){var e,n=this.center,i=this.options,r=i.center,o=i.minSize||80,a=o;return null!==r[0]?a=U(n[2]-U(t[1],t[3]),o):(a=U(n[2]-t[1]-t[3],o),n[0]+=(t[3]-t[1])/2),null!==r[1]?a=U(W(a,n[2]-U(t[0],t[2])),o):(a=U(W(a,n[2]-t[0]-t[2]),o),n[1]+=(t[0]-t[2])/2),a<n[2]?(n[2]=a,n[3]=Ct(i.innerSize||0,a),this.translate(n),qt(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),pt.column&&(pt.column.prototype.alignDataLabel=function(t,e,n,i,r){var o=this.chart.inverted,a=t.series,s=t.dlBox||t.shapeArgs,l=Tt(t.below,t.plotY>Tt(this.translatedThreshold,a.yAxis.len)),h=Tt(n.inside,!!this.options.stacking);s&&(i=ft(s),o&&(i={x:a.yAxis.len-i.y-i.height,y:a.xAxis.len-i.x-i.width,width:i.height,height:i.width}),h||(o?(i.x+=l?0:i.width,i.width=0):(i.y+=l?i.height:0,i.height=0))),n.align=Tt(n.align,!o||h?"center":l?"right":"left"),n.verticalAlign=Tt(n.verticalAlign,o||h?"middle":l?"top":"bottom"),Le.prototype.alignDataLabel.call(this,t,e,n,i,r)}),Ae=(Ce=O).Chart,Re=Ce.each,He=Ce.pick,Oe=HighchartsAdapter.addEvent,Ae.prototype.callbacks.push(function(t){function e(){var i=[];Re(t.series,function(t){var e=t.options.dataLabels,n=t.dataLabelCollections||["dataLabel"];(e.enabled||t._hasPointLabels)&&!e.allowOverlap&&t.visible&&Re(n,function(e){Re(t.points,function(t){t[e]&&(t[e].labelrank=He(t.labelrank,t.shapeArgs&&t.shapeArgs.height),i.push(t[e]))})})}),t.hideOverlappingLabels(i)}e(),Oe(t,"redraw",e)}),Ae.prototype.hideOverlappingLabels=function(t){for(var e,n,i,r,o,a,s,l,h,u,c,p,d=t.length,f=0;f<d;f++)(e=t[f])&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),f=0;f<d;f++)for(i=t[f],n=f+1;n<d;++n)r=t[n],i&&r&&i.placed&&r.placed&&0!==i.newOpacity&&0!==r.newOpacity&&(u=i.alignAttr,c=r.alignAttr,p=2*(i.box?0:i.padding),o=u.x,a=u.y,s=i.width-p,l=i.height-p,h=c.x,u=c.y,c=r.width-p,p=r.height-p,o+s<h||h+c<o||a+l<u||u+p<a||((i.labelrank<r.labelrank?i:r).newOpacity=0));Re(t,function(t){var e,n;t&&(n=t.newOpacity,t.oldOpacity!==n&&t.placed&&(n?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=n,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})};var Ne=O.TrackerMixin={drawTrackerPoint:function(){function e(t){for(var e,n=t.target;n&&!e;)e=n.point,n=n.parentNode;void 0!==e&&e!==i.hoverPoint&&e.onMouseOver(t)}var n=this,i=n.chart,r=i.pointer,t=n.options.cursor,o=t&&{cursor:t};qt(n.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),n._hasTracking||(qt(n.trackerGroups,function(t){n[t]&&(n[t].addClass(rt+"tracker").on("mouseover",e).on("mouseout",function(t){r.onTrackerMouseOut(t)}).css(o),Se&&n[t].on("touchstart",e))}),n._hasTracking=!0)},drawTrackerGraph:function(){function e(){l.hoverSeries!==i&&i.onMouseOver()}var t,n,i=this,r=i.options,o=r.trackByArea,a=[].concat(o?i.areaPath:i.graphPath),s=a.length,l=i.chart,h=l.pointer,u=l.renderer,c=l.options.tooltip.snap,p=i.tracker,d=r.cursor,f=d&&{cursor:d},g=i.singlePoints,d="rgba(192,192,192,"+(Q?1e-4:.002)+")";if(s&&!o)for(n=s+1;n--;)a[n]===lt&&a.splice(n+1,0,a[n+1]-c,a[n+2],ht),(n&&a[n]===lt||n===s)&&a.splice(n,0,ht,a[n-2]+c,a[n-1]);for(n=0;n<g.length;n++)t=g[n],a.push(lt,t.plotX-c,t.plotY,ht,t.plotX+c,t.plotY);p?p.attr({d:a}):(i.tracker=u.path(a).attr({"stroke-linejoin":"round",visibility:i.visible?ot:it,stroke:d,fill:o?d:st,"stroke-width":r.lineWidth+(o?0:2*c),zIndex:2}).add(i.group),qt([i.tracker,i.markerGroup],function(t){t.addClass(rt+"tracker").on("mouseover",e).on("mouseout",function(t){h.onTrackerMouseOut(t)}).css(f),Se&&t.on("touchstart",e)}))}};pt.column&&(Gt.prototype.drawTracker=Ne.drawTrackerPoint),pt.pie&&(pt.pie.prototype.drawTracker=Ne.drawTrackerPoint),pt.scatter&&(Ee.prototype.drawTracker=Ne.drawTrackerPoint),dt(Te.prototype,{setItemEvents:function(n,t,e,i,r){var o=this;(e?t:n.legendGroup).on("mouseover",function(){n.setState("hover"),t.css(o.options.itemHoverStyle)}).on("mouseout",function(){t.css(n.visible?i:r),n.setState()}).on("click",function(t){function e(){n.setVisible()}t={browserEvent:t},n.firePointEvent?n.firePointEvent("legendItemClick",t,e):ee(n,"legendItemClick",t,e)})},createCheckboxForItem:function(e){e.checkbox=Pt("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),Qt(e.checkbox,"click",function(t){t=t.target;ee(e.series||e,"checkboxClick",{checked:t.checked,item:e},function(){e.select()})})}}),C.legend.itemStyle.cursor="pointer",dt(Pe.prototype,{showResetZoom:function(){var t=this,e=C.lang,n=t.options.chart.resetZoomButton,i=n.theme,r=i.states,o="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},i,r&&r.hover).attr({align:n.position.align,title:e.resetZoomTitle}).add().align(n.position,!1,o)},zoomOut:function(){var t=this;ee(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var i,e,r=this.pointer,o=!1;!t||t.resetSelection?qt(this.axes,function(t){i=t.zoom()}):qt(t.xAxis.concat(t.yAxis),function(t){var e=t.axis,n=e.isXAxis;(r[n?"zoomX":"zoomY"]||r[n?"pinchX":"pinchY"])&&(i=e.zoom(t.min,t.max),e.displayBtn&&(o=!0))}),e=this.resetZoomButton,o&&!e?this.showResetZoom():!o&&yt(e)&&(this.resetZoomButton=e.destroy()),i&&this.redraw(Tt(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(s,t){var l,h=this,e=h.hoverPoints;e&&qt(e,function(t){t.setState()}),qt("xy"===t?[1,0]:[1],function(t){var e=s[t?"chartX":"chartY"],n=h[t?"xAxis":"yAxis"][0],i=h[t?"mouseDownX":"mouseDownY"],r=(n.pointRange||0)/2,o=n.getExtremes(),a=n.toValue(i-e,!0)+r,r=n.toValue(i+h[t?"plotWidth":"plotHeight"]-e,!0)-r,i=e<i;n.series.length&&(i||a>W(o.dataMin,o.min))&&(!i||r<U(o.dataMax,o.max))&&(n.setExtremes(a,r,!1,!1,{trigger:"pan"}),l=!0),h[t?"mouseDownX":"mouseDownY"]=e}),l&&h.redraw(!1),At(h.container,{cursor:"move"})}}),dt(De.prototype,{select:function(t,e){var n=this,i=n.series,r=i.chart;t=Tt(t,!n.selected),n.firePointEvent(t?"select":"unselect",{accumulate:e},function(){n.selected=n.options.selected=t,i.options.data[$t(n,i.data)]=n.options,n.setState(t&&"select"),e||qt(r.getSelectedPoints(),function(t){t.selected&&t!==n&&(t.selected=t.options.selected=!1,i.options.data[$t(t,i.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t,e){var n=this.series,i=n.chart,r=i.tooltip,o=i.hoverPoint;i.hoverSeries!==n&&n.onMouseOver(),o&&o!==this&&o.onMouseOut(),this.series&&(this.firePointEvent("mouseOver"),!r||r.shared&&!n.noSharedTooltip||r.refresh(this,t),this.setState("hover"),e||(i.hoverPoint=this))},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==$t(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,e=ft(this.series.options.point,this.options).events;for(t in this.events=e)Qt(this,t,e[t]);this.hasImportedEvents=!0}},setState:function(t,e){var n,i=this.plotX,r=this.plotY,o=this.series,a=o.options.states,s=oe[o.type].marker&&o.options.marker,l=s&&!s.enabled,h=s&&s.states[t],u=h&&!1===h.enabled,c=o.stateMarkerGraphic,p=this.marker||{},d=o.chart,f=o.halo,g=this.pointAttr[t=t||""]||o.pointAttr[t];t===this.state&&!e||this.selected&&"select"!==t||a[t]&&!1===a[t].enabled||t&&(u||l&&!1===h.enabled)||t&&p.states&&p.states[t]&&!1===p.states[t].enabled||(this.graphic?(n=s&&this.graphic.symbolName&&g.r,this.graphic.attr(ft(g,n?{x:i-n,y:r-n,width:2*n,height:2*n}:{})),c&&c.hide()):(t&&h&&(n=h.radius,p=p.symbol||o.symbol,(c=c&&c.currentSymbol!==p?c.destroy():c)?c[e?"animate":"attr"]({x:i-n,y:r-n}):p&&(o.stateMarkerGraphic=c=d.renderer.symbol(p,i-n,r-n,2*n,2*n).attr(g).add(o.markerGroup),c.currentSymbol=p)),c&&(c[t&&d.isInsidePlot(i,r,d.inverted)?"show":"hide"](),c.element.point=this)),(a=a[t]&&a[t].halo)&&a.size?(f||(o.halo=f=d.renderer.path().add(d.seriesGroup)),f.attr(dt({fill:se(this.color||o.color).setOpacity(a.opacity).get()},a.attributes))[e?"animate":"attr"]({d:this.haloPath(a.size)})):f&&f.attr({d:[]}),this.state=t)},haloPath:function(t){var e=this.series,n=e.chart,i=e.getPlotBox(),r=n.inverted;return n.renderer.symbols.circle(i.translateX+(r?e.yAxis.len-this.plotY:this.plotX)-t,i.translateY+(r?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),dt(Le.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&ee(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;e.hoverSeries=null,i&&i.onMouseOut(),this&&t.events.mouseOut&&ee(this,"mouseOut"),!n||t.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),this.setState()},setState:function(t){var e,n=this.options,i=this.graph,r=n.states,n=n.lineWidth,o=0;if(this.state!==(t=t||"")&&(!r[this.state=t]||!1!==r[t].enabled)&&(t&&(n=r[t].lineWidth||n+(r[t].lineWidthPlus||0)),i&&!i.dashstyle))for(i.attr(e={"stroke-width":n});this["zoneGraph"+o];)this["zoneGraph"+o].attr(e),o+=1},setVisible:function(e,t){var n,i=this,r=i.chart,o=i.legendItem,a=r.options.chart.ignoreHiddenSeries,s=i.visible;i.visible=e=i.userOptions.visible=void 0===e?!s:e,n=e?"show":"hide",qt(["group","dataLabelsGroup","markerGroup","tracker"],function(t){i[t]&&i[t][n]()}),r.hoverSeries!==i&&(r.hoverPoint&&r.hoverPoint.series)!==i||i.onMouseOut(),o&&r.legend.colorizeItem(i,e),i.isDirty=!0,i.options.stacking&&qt(r.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),qt(i.linkedSeries,function(t){t.setVisible(e,!1)}),a&&(r.isDirtyBox=!0),!1!==t&&r.redraw(),ee(i,n)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),ee(this,t?"select":"unselect")},drawTracker:Ne.drawTrackerGraph}),It(Le.prototype,"init",function(t){var e;t.apply(this,Array.prototype.slice.call(arguments,1)),(e=this.xAxis)&&e.options.ordinal&&Qt(this,"updatedData",function(){delete e.ordinalIndex})}),It(ve.prototype,"getTimeTicks",function(t,e,n,i,r,o,a,s){var l,h,u,c,p,d=0,f=0,g={},m=[],y=-Number.MAX_VALUE,v=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!o||o.length<3||void 0===n)return t.call(this,e,n,i,r);for(c=o.length;f<c;f++){if(p=f&&o[f-1]>i,o[f]<n&&(d=f),f===c-1||o[f+1]-o[f]>5*a||p){if(o[f]>y){for(l=t.call(this,e,o[d],o[f],r);l.length&&l[0]<=y;)l.shift();l.length&&(y=l[l.length-1]),m=m.concat(l)}d=f+1}if(p)break}if(u=l.info,s&&u.unitRange<=P.hour){for(f=m.length-1,d=1;d<f;d++)A("%d",m[d])!==A("%d",m[d-1])&&(g[m[d]]="day",h=!0);h&&(g[m[0]]="day"),u.higherRanks=g}if(m.info=u,s&&kt(v)){for(var x,_,b,w,k,s=m.length,S=s,M=[],T=[];S--;)_=this.translate(m[S]),b&&(T[S]=b-_),M[S]=b=_;for(T.sort(),(w=T[z(T.length/2)])<.6*v&&(w=null),S=m[s-1]>i?s-1:s,b=void 0;S--;)k=b-(_=M[S]),b&&k<.8*v&&(null===w||k<.8*w)?(g[m[S]]&&!g[m[S+1]]?(x=S+1,b=_):x=S,m.splice(x,1)):b=_}return m}),dt(ve.prototype,{beforeSetTickPositions:function(){var n,t,e,i,r=[],o=!1,a=this.getExtremes(),s=a.min,l=a.max,h=this.isXAxis&&!!this.options.breaks,u=this.options.ordinal;if(u||h){if(qt(this.series,function(t,e){if(!1!==t.visible&&(!1!==t.takeOrdinalPosition||h)&&(r=r.concat(t.processedXData),n=r.length,r.sort(function(t,e){return t-e}),n))for(e=n-1;e--;)r[e]===r[e+1]&&r.splice(e,1)}),2<(n=r.length)){for(t=r[1]-r[0],i=n-1;i--&&!o;)r[i+1]-r[i]!=t&&(o=!0);!this.options.keepOrdinalPadding&&(r[0]-s>t||l-r[r.length-1]>t)&&(o=!0)}o?(this.ordinalPositions=r,e=this.val2lin(U(s,r[0]),!0),a=U(this.val2lin(W(l,r[r.length-1]),!0),1),this.ordinalSlope=a=(l-s)/(a-e),this.ordinalOffset=s-e*a):this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=void 0}this.doPostTranslate=u&&o||h,this.groupIntervalFactor=null},val2lin:function(t,e){var n=this.ordinalPositions;if(n){for(var i,r=n.length,o=r;o--;)if(n[o]===t){i=o;break}for(o=r-1;o--;)if(t>n[o]||0===o){i=o+(t-n[o])/(n[o+1]-n[o]);break}return e?i:this.ordinalSlope*(i||0)+this.ordinalOffset}return t},lin2val:function(t,e){var n=this.ordinalPositions;if(n){var i,r,o=this.ordinalSlope,a=this.ordinalOffset,s=n.length-1;if(e)t<0?t=n[0]:s<t?t=n[s]:r=t-(s=z(t));else for(;s--;)if(t>=(i=o*s+a)){r=(t-i)/(o*(s+1)+a-i);break}return void 0!==r&&void 0!==n[s]?n[s]+(r?r*(n[s+1]-n[s]):0):t}return t},getExtendedPositions:function(){var e,n,i=this.chart,r=this.series[0].currentDataGrouping,t=this.ordinalIndex,o=r?r.count+r.unitName:"raw",a=this.getExtremes();return(t=t||(this.ordinalIndex={}))[o]||(e={series:[],getExtremes:function(){return{min:a.dataMin,max:a.dataMax}},options:{ordinal:!0},val2lin:ve.prototype.val2lin},qt(this.series,function(t){(n={xAxis:e,xData:t.xData,chart:i,destroyGroupedData:f}).options={dataGrouping:r?{enabled:!0,forced:!0,approximation:"open",units:[[r.unitName,[r.count]]]}:{enabled:!1}},t.processData.apply(n),e.series.push(n)}),this.beforeSetTickPositions.apply(e),t[o]=e.ordinalPositions),t[o]},getGroupIntervalFactor:function(t,e,n){var i=0,r=n.processedXData,o=r.length,a=[],s=this.groupIntervalFactor;if(!s){for(;i<o-1;i++)a[i]=r[i+1]-r[i];a.sort(function(t,e){return t-e}),n=a[z(o/2)],t=U(t,r[0]),e=W(e,r[o-1]),this.groupIntervalFactor=s=o*n/(e-t)}return s},postProcessTickInterval:function(t){var e=this.ordinalSlope;return e?this.options.breaks?this.closestPointRange:t/(e/this.closestPointRange):t}}),It(Pe.prototype,"pan",function(t,e){var n,i,r,o,a,s,l,h,u,c,p=this,d=p.xAxis[0],f=e.chartX,g=!1;d.options.ordinal&&d.series.length?(u=p.mouseDownX,r=(i=d.getExtremes()).dataMax,o=i.min,a=i.max,s=p.hoverPoints,c=d.closestPointRange,l=(u-f)/(d.translationSlope*(d.ordinalSlope||c)),h={ordinalPositions:d.getExtendedPositions()},u=d.lin2val,c=d.val2lin,h.ordinalPositions?1<G(l)&&(s&&qt(s,function(t){t.setState()}),r>(h=(s=l<0?(n=h,d.ordinalPositions?d:h):(n=d.ordinalPositions?d:h,h)).ordinalPositions)[h.length-1]&&h.push(r),p.fixedRange=a-o,(l=d.toFixedRange(null,null,u.apply(n,[c.apply(n,[o,!0])+l,!0]),u.apply(s,[c.apply(s,[a,!0])+l,!0]))).min>=W(i.dataMin,o)&&l.max<=U(r,a)&&d.setExtremes(l.min,l.max,!0,!1,{trigger:"pan"}),p.mouseDownX=f,At(p.container,{cursor:"move"})):g=!0):g=!0,g&&t.apply(this,Array.prototype.slice.call(arguments,1))}),It(Le.prototype,"getSegments",function(t){var i,r=this.options.gapSize,o=this.xAxis;t.apply(this,Array.prototype.slice.call(arguments,1)),r&&(i=this.segments,qt(i,function(t,e){for(var n=t.length-1;n--;){if(t[n].x<o.min&&t[n+1].x>o.max){i.length=0;break}t[n+1].x-t[n].x>o.closestPointRange*r&&i.splice(e+1,0,t.splice(n+1,t.length-n))}}))}),function(t){"use strict";var c=t.pick,e=t.wrap,n=t.extend,f=HighchartsAdapter.fireEvent,g=t.Axis,i=t.Series;n(g.prototype,{isInBreak:function(t,e){var n=t.repeat||1/0,i=t.from,r=t.to-t.from,n=i<=e?(e-i)%n:n-(i-e)%n;return t.inclusive?n<=r:n<r&&0!=n},isInAnyBreak:function(t,e){var n,i,r,o=this.options.breaks,a=o&&o.length;if(a){for(;a--;)this.isInBreak(o[a],t)&&(n=!0,i=i||c(o[a].showPoints,!this.isXAxis));r=n&&e?n&&!i:n}return r}}),e(g.prototype,"setTickPositions",function(t){if(t.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var e,n=this.tickPositions,t=this.tickPositions.info,i=[];if(!(t&&t.totalRange>=this.closestPointRange)){for(e=0;e<n.length;e++)this.isInAnyBreak(n[e])||i.push(n[e]);this.tickPositions=i,this.tickPositions.info=t}}}),e(g.prototype,"init",function(t,e,n){var d;n.breaks&&n.breaks.length&&(n.ordinal=!1),t.call(this,e,n),this.options.breaks&&((d=this).doPostTranslate=!0,this.val2lin=function(t){for(var e,n=t,i=0;i<d.breakArray.length;i++)if((e=d.breakArray[i]).to<=t)n-=e.len;else{if(e.from>=t)break;if(d.isInBreak(e,t)){n-=t-e.from;break}}return n},this.lin2val=function(t){for(var e,n=t,i=0;i<d.breakArray.length&&!((e=d.breakArray[i]).from>=n);i++)(e.to<n||d.isInBreak(e,n))&&(n+=e.len);return n},this.setExtremes=function(t,e,n,i,r){for(;this.isInAnyBreak(t);)t-=this.closestPointRange;for(;this.isInAnyBreak(e);)e-=this.closestPointRange;g.prototype.setExtremes.call(this,t,e,n,i,r)},this.setAxisTranslation=function(t){g.prototype.setAxisTranslation.call(this,t);var e,n,i,r,o,a,s=d.options.breaks,l=[],h=[],u=0,c=d.userMin||d.min,p=d.userMax||d.max;for(o in s)n=(i=s[o]).repeat||1/0,d.isInBreak(i,c)&&(c+=i.to%n-c%n),d.isInBreak(i,p)&&(p-=p%n-i.from%n);for(o in s){for(r=(i=s[o]).from,n=i.repeat||1/0;c<r-n;)r-=n;for(;r<c;)r+=n;for(a=r;a<p;a+=n)l.push({value:a,move:"in"}),l.push({value:a+(i.to-i.from),move:"out",size:i.breakSize})}for(o in l.sort(function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),e=0,r=c,l)1===(e+="in"===(i=l[o]).move?1:-1)&&"in"===i.move&&(r=i.value),0===e&&(h.push({from:r,to:i.value,len:i.value-r-(i.size||0)}),u+=i.value-r-(i.size||0));d.breakArray=h,f(d,"afterBreaks"),d.transA*=(p-d.min)/(p-c-u),d.min=c,d.max=p})}),e(i.prototype,"generatePoints",function(t){t.apply(this,function(){return Array.prototype.slice.call(arguments,1)}(arguments));var e,n=this.xAxis,i=this.yAxis,r=this.points,o=r.length,a=this.options.connectNulls;if(n&&i&&(n.options.breaks||i.options.breaks))for(;o--;)null===(e=r[o]).y&&!1===a||!n.isInAnyBreak(e.x,!0)&&!i.isInAnyBreak(e.y,!0)||(r.splice(o,1),this.data[o]&&this.data[o].destroyElements())}),e(t.seriesTypes.column.prototype,"drawPoints",function(t){t.apply(this);for(var e,n,i,r,o,a=this.points,s=this.yAxis,l=s.breakArray||[],h=c(this.options.threshold,s.min),u=0;u<a.length;u++)for(o=(n=a[u]).stackY||n.y,r=0;r<l.length;r++)e=!1,h<(i=l[r]).from&&o>i.to||h>i.from&&o<i.from?e="pointBreak":(h<i.from&&o>i.from&&o<i.to||h>i.from&&o>i.to&&o<i.from)&&(e="pointInBreak"),e&&f(s,e,{point:n,brk:i})})}(O);var Ye=Le.prototype,Gt=_e.prototype,ze=Ye.processData,Fe=Ye.generatePoints,Xe=Ye.destroy,Be=Gt.tooltipFooterHeaderFormatter,Ue="number",We={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},Ge={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},Ve=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],je={sum:function(t){var e,n=t.length;if(!n&&t.hasNulls)e=null;else if(n)for(e=0;n--;)e+=t[n];return e},average:function(t){var e=t.length,t=je.sum(t);return typeof t==Ue&&e&&(t/=e),t},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},high:function(t){return t.length?zt(t):t.hasNulls?null:void 0},low:function(t){return t.length?Yt(t):t.hasNulls?null:void 0},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},ohlc:function(t,e,n,i){if(t=je.open(t),e=je.high(e),n=je.low(n),i=je.close(i),typeof t==Ue||typeof e==Ue||typeof n==Ue||typeof i==Ue)return[t,e,n,i]},range:function(t,e){if(t=je.low(t),e=je.high(e),typeof t==Ue||typeof e==Ue)return[t,e]}};Ye.groupData=function(t,e,n,i){for(var r,o,a=this.data,s=this.options.data,l=[],h=[],u=t.length,c=!!e,p=[[],[],[],[]],d="function"==typeof i?i:je[i],f=this.pointArrayMap,g=f&&f.length,m=0;m<=u&&!(t[m]>=n[0]);m++);for(;m<=u;m++){for(;(void 0!==n[1]&&t[m]>=n[1]||m===u)&&(r=n.shift(),void 0!==(o=d.apply(0,p))&&(l.push(r),h.push(o)),p[0]=[],p[1]=[],p[2]=[],p[3]=[],m!==u););if(m===u)break;if(f)for(var y,v=this.cropStart+m,x=a&&a[v]||this.pointClass.prototype.applyOptions.apply({series:this},[s[v]]),_=0;_<g;_++)typeof(y=x[f[_]])==Ue?p[_].push(y):null===y&&(p[_].hasNulls=!0);else typeof(v=c?e[m]:null)==Ue?p[0].push(v):null===v&&(p[0].hasNulls=!0)}return[l,h]},Ye.processData=function(){var t,e=this,n=e.chart,i=e.options,r=i.dataGrouping,o=!1!==e.allowDG&&r&&Tt(r.enabled,n.options._stock);if(e.forceCrop=o,e.groupPixelWidth=null,!(e.hasProcessed=!0)!==ze.apply(e,arguments)&&o){e.destroyGroupedData();var a,s=e.processedXData,l=e.processedYData,h=n.plotSizeX,u=e.xAxis,c=u.options.ordinal,p=e.groupPixelWidth=u.getGroupPixelWidth&&u.getGroupPixelWidth(),d=e.pointRange;if(p){t=!0,e.points=null;var o=u.getExtremes(),n=o.min,o=o.max,f=p*(o-n)/h*(c&&u.getGroupIntervalFactor(n,o,e)||1),c=u.getTimeTicks(u.normalizeTimeTickInterval(f,r.units||Ve),n,o,u.options.startOfWeek,s,e.closestPointRange),l=Ye.groupData.apply(e,[s,l,c,r.approximation]),g=l[0],l=l[1];if(r.smoothed){for(g[a=g.length-1]=o;a--&&0<a;)g[a]+=f/2;g[0]=n}e.currentDataGrouping=c.info,null===i.pointRange&&(e.pointRange=c.info.totalRange),e.closestPointRange=c.info.totalRange,kt(g[0])&&g[0]<u.dataMin&&(u.min===u.dataMin&&(u.min=g[0]),u.dataMin=g[0]),e.processedXData=g,e.processedYData=l}else e.currentDataGrouping=null,e.pointRange=d;e.hasGroupedData=t}},Ye.destroyGroupedData=function(){var n=this.groupedData;qt(n||[],function(t,e){t&&(n[e]=t.destroy?t.destroy():null)}),this.groupedData=null},Ye.generatePoints=function(){Fe.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},Gt.tooltipFooterHeaderFormatter=function(t,e){var n,i=t.series,r=i.options,o=i.tooltipOptions,a=r.dataGrouping,s=o.xDateFormat,l=i.xAxis,e=l&&"datetime"===l.options.type&&a&&xt(t.key)?(r=i.currentDataGrouping,i=a.dateTimeLabelFormats,r?(a=i[r.unitName],1===r.count?s=a[0]:(s=a[1],n=a[2])):!s&&i&&(s=this.getXDateFormat(t,o,l)),s=A(s,t.key),n&&(s+=A(n,t.key+r.totalRange-1)),o[(e?"footer":"header")+"Format"].replace("{point.key}",s)):Be.call(this,t,e);return e},Ye.destroy=function(){for(var t=this.groupedData||[],e=t.length;e--;)t[e]&&t[e].destroy();Xe.apply(this)},It(Ye,"setOptions",function(t,e){var n=t.call(this,e),i=this.type,r=this.chart.options.plotOptions,t=oe[i].dataGrouping;return Ge[i]&&(t=t||ft(We,Ge[i]),n.dataGrouping=ft(t,r.series&&r.series.dataGrouping,r[i].dataGrouping,e.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),n}),It(ve.prototype,"setScale",function(t){t.call(this),qt(this.series,function(t){t.hasProcessed=!1})}),ve.prototype.getGroupPixelWidth=function(){for(var t,e,n=this.series,i=n.length,r=0,o=!1,a=i;a--;)(e=n[a].options.dataGrouping)&&(r=U(r,e.groupPixelWidth));for(a=i;a--;)(e=n[a].options.dataGrouping)&&n[a].hasProcessed&&(t=(n[a].processedXData||n[a].data).length,(n[a].groupPixelWidth||t>this.chart.plotSizeX/r||t&&e.forced)&&(o=!0));return o?r:0},ve.prototype.setDataGrouping=function(e,t){var n;if(t=Tt(t,!0),e=e||{forced:!1,units:null},this instanceof ve)for(n=this.series.length;n--;)this.series[n].update({dataGrouping:e},!1);else qt(this.chart.options.series,function(t){t.dataGrouping=e},!1);t&&this.chart.redraw()},oe.ohlc=ft(oe.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">â—</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});Ee=i(pt.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){pt.column.prototype.getAttribs.apply(this,arguments);var t=this.options,e=t.states,n=t.upColor||this.color,i=ft(this.pointAttr),t=this.upColorProp;i[""][t]=n,i.hover[t]=e.hover.upColor||n,i.select[t]=e.select.upColor||n,qt(this.points,function(t){t.open<t.close&&!t.options.color&&(t.pointAttr=i)})},translate:function(){var e=this.yAxis;pt.column.prototype.translate.apply(this),qt(this.points,function(t){null!==t.open&&(t.plotOpen=e.translate(t.open,0,1,0,1)),null!==t.close&&(t.plotClose=e.translate(t.close,0,1,0,1))})},drawPoints:function(){var e,n,i,r,o,a,s,l=this,t=l.points,h=l.chart;qt(t,function(t){void 0!==t.plotY&&(a=t.graphic,e=t.pointAttr[t.selected?"selected":""]||l.pointAttr[""],i=e["stroke-width"]%2/2,s=B(t.plotX)-i,r=B(t.shapeArgs.width/2),o=["M",s,B(t.yBottom),"L",s,B(t.plotY)],null!==t.open&&(n=B(t.plotOpen)+i,o.push("M",s,n,"L",s-r,n)),null!==t.close&&(i=B(t.plotClose)+i,o.push("M",s,i,"L",s+r,i)),a?a.attr(e).animate({d:o}):t.graphic=h.renderer.path(o).attr(e).add(l.group))})},animate:null});pt.ohlc=Ee,oe.candlestick=ft(oe.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:oe.ohlc.tooltip,threshold:null,upColor:"white"});Gt=i(Ee,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){pt.ohlc.prototype.getAttribs.apply(this,arguments);var t=this.options,e=t.states,n=t.upLineColor||t.lineColor,i=e.hover.upLineColor||n,r=e.select.upLineColor||n;qt(this.points,function(t){t.open<t.close&&(t.lineColor&&(t.pointAttr=ft(t.pointAttr),n=t.lineColor),t.pointAttr[""].stroke=n,t.pointAttr.hover.stroke=i,t.pointAttr.select.stroke=r)})},drawPoints:function(){var e,n,i,r,o,a,s,l,h,u=this,t=u.points,c=u.chart,p=u.pointAttr[""];qt(t,function(t){s=t.graphic,void 0!==t.plotY&&(e=t.pointAttr[t.selected?"selected":""]||p,o=e["stroke-width"]%2/2,a=B(t.plotX)-o,i=t.plotOpen,r=t.plotClose,n=Y.min(i,r),l=Y.max(i,r),h=B(t.shapeArgs.width/2),i=B(n)!==B(t.plotY),r=l!==t.yBottom,n=B(n)+o,l=B(l)+o,l=["M",a-h,l,"L",a-h,n,"L",a+h,n,"L",a+h,l,"Z","M",a,n,"L",a,i?B(t.plotY):n,"M",a,l,"L",a,r?B(t.yBottom):l],s?s.attr(e).animate({d:l}):t.graphic=c.renderer.path(l).attr(e).add(u.group).shadow(u.options.shadow))})}});pt.candlestick=Gt;var $e=pe.prototype.symbols;oe.flags=ft(oe.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),pt.flags=i(pt.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Le.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){pt.column.prototype.translate.apply(this);var t,i,e,n,r,o=this.options,a=this.chart,s=this.points,l=s.length-1,o=o.onSeries,o=o&&a.get(o),h=o&&o.options.step,u=o&&o.points,c=u&&u.length,p=this.xAxis,d=p.getExtremes();if(o&&o.visible&&c)for(o=o.currentDataGrouping,n=u[c-1].x+(o?o.totalRange:0),s.sort(function(t,e){return t.x-e.x});c--&&s[l]&&(t=s[l],!((e=u[c]).x<=t.x&&void 0!==e.plotY&&(t.x<=n&&(t.plotY=e.plotY,e.x<t.x&&!h&&(r=u[c+1])&&void 0!==r.plotY&&(t.plotY+=(t.x-e.x)/(r.x-e.x)*(r.plotY-e.plotY))),c++,--l<0))););qt(s,function(t,e){var n;void 0===t.plotY&&(t.x>=d.min&&t.x<=d.max?t.plotY=a.chartHeight-p.bottom-(p.opposite?p.height:0)+p.offset-a.plotTop:t.shapeArgs={}),(i=s[e-1])&&i.plotX===t.plotX&&(void 0===i.stackIndex&&(i.stackIndex=0),n=i.stackIndex+1),t.stackIndex=n})},drawPoints:function(){for(var t,e,n,i,r,o,a,s,l=this.pointAttr[""],h=this.points,u=this.chart.renderer,c=this.options,p=c.y,d=h.length;d--;)s=(i=h[d]).plotX>this.xAxis.len,0<(t=i.plotX)&&(t-=Tt(i.lineWidth,c.lineWidth)%2),r=i.stackIndex,n=i.options.shape||c.shape,void 0!==(e=i.plotY)&&(e=i.plotY+p-(void 0!==r&&r*c.stackDistance)),o=r?void 0:i.plotX,a=r?void 0:i.plotY,r=i.graphic,void 0!==e&&0<=t&&!s?(s=i.pointAttr[i.selected?"select":""]||l,r?r.attr({x:t,y:e,r:s.r,anchorX:o,anchorY:a}):r=i.graphic=u.label(i.options.title||c.title||"A",t,e,n,o,a,c.useHTML).css(ft(c.style,i.style)).attr(s).attr({align:"flag"===n?"left":"center",width:c.width,height:c.height}).add(this.markerGroup).shadow(c.shadow),i.tooltipPos=[t,e]):r&&(i.graphic=r.destroy())},drawTracker:function(){var n=this.points;Ne.drawTrackerPoint.apply(this),qt(n,function(e){var t=e.graphic;t&&Qt(t.element,"mouseover",function(){0<e.stackIndex&&!e.raised&&(e._y=t.y,t.attr({y:e._y-8}),e.raised=!0),qt(n,function(t){t!==e&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)})})})},animate:f,buildKDTree:f,setClip:f}),$e.flag=function(t,e,n,i,r){return["M",r&&r.anchorX||t,r&&r.anchorY||e,"L",t,e+i,t,e,t+n,e,t+n,e+i,t,e+i,"Z"]},qt(["circle","square"],function(a){$e[a+"pin"]=function(t,e,n,i,r){var o=r&&r.anchorX,r=r&&r.anchorY;return"circle"===a&&n<i&&(t-=B((i-n)/2),n=i),n=$e[a](t,e,n,i),o&&r&&n.push("M",o,r<e?e:e+i,"L",o,r),n}}),o===O.VMLRenderer&&qt(["flag","circlepin","squarepin"],function(t){de.prototype.symbols[t]=$e[t]});function qe(t){var e=Kt(arguments,function(t){return"number"==typeof t});if(e.length)return Math[t].apply(0,e)}Ee=[].concat(Ve);function Ke(t){var e=t.options,n=e.navigator,i=n.enabled,r=e.scrollbar,o=r.enabled,a=i?n.height:0,e=o?r.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=t,this.setBaseSeries(),this.height=a,this.scrollbarHeight=e,this.scrollbarEnabled=o,this.navigatorEnabled=i,this.navigatorOptions=n,this.scrollbarOptions=r,this.outlineHeight=a+e,this.init()}function Ze(t){this.init(t)}Ee[4]=["day",[1,2,3,4]],Ee[5]=["week",[1,2,3]],Gt=void 0===pt.areaspline?"line":"areaspline",dt(C,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:Gt,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:Ee},dataLabels:{enabled:!1,zIndex:2},id:rt+"navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:Z?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Q&&!Z}}),Ke.prototype={drawHandle:function(t,e){var n=this.chart,i=n.renderer,r=this.elementsToDestroy,o=this.handles,a=this.navigatorOptions.handles,s={fill:a.backgroundColor,stroke:a.borderColor,"stroke-width":1};this.rendered||(o[e]=i.g("navigator-handle-"+["left","right"][e]).css({cursor:"ew-resize"}).attr({zIndex:4-e}).add(),a=i.rect(-4.5,0,9,16,0,1).attr(s).add(o[e]),r.push(a),a=i.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(s).add(o[e]),r.push(a)),o[e][n.isResizing?"animate":"attr"]({translateX:this.scrollerLeft+this.scrollbarHeight+parseInt(t,10),translateY:this.top+this.height/2-8})},drawScrollbarButton:function(t){var e,n=this.chart.renderer,i=this.elementsToDestroy,r=this.scrollbarButtons,o=this.scrollbarHeight,a=this.scrollbarOptions;this.rendered||(r[t]=n.g().add(this.scrollbarGroup),e=n.rect(-.5,-.5,o+1,o+1,a.buttonBorderRadius,a.buttonBorderWidth).attr({stroke:a.buttonBorderColor,"stroke-width":a.buttonBorderWidth,fill:a.buttonBackgroundColor}).add(r[t]),i.push(e),e=n.path(["M",o/2+(t?-1:1),o/2-3,"L",o/2+(t?-1:1),o/2+3,o/2+(t?2:-2),o/2]).attr({fill:a.buttonArrowColor}).add(r[t]),i.push(e)),t&&r[t].attr({translateX:this.scrollerWidth-o})},render:function(t,e,n,i){var r,o,a,s,l,h,u=this.chart,c=u.renderer,p=this.scrollbarGroup,d=(this.navigatorGroup,this.scrollbar),f=this.xAxis,g=this.scrollbarTrack,m=this.scrollbarHeight,y=this.scrollbarEnabled,v=this.navigatorOptions,x=this.scrollbarOptions,_=x.minWidth,b=this.height,w=this.top,k=this.navigatorEnabled,S=v.outlineWidth,M=S/2,T=0,A=this.outlineHeight,P=x.barBorderRadius,D=x.barBorderWidth,C=w+M;kt(t)&&!isNaN(t)&&(this.navigatorLeft=r=Tt(f.left,u.plotLeft+m),this.navigatorWidth=o=Tt(f.len,u.plotWidth-2*m),this.scrollerLeft=a=r-m,this.scrollerWidth=s=o+2*m,f.getExtremes&&(!(l=this.getUnionExtremes(!0))||l.dataMin===f.min&&l.dataMax===f.max||f.setExtremes(l.dataMin,l.dataMax,!0,!1)),n=Tt(n,f.translate(t)),i=Tt(i,f.translate(e)),!isNaN(n)&&G(n)!==1/0||(n=0,i=s),f.translate(i,!0)-f.translate(n,!0)<u.xAxis[0].minRange||(this.zoomedMax=W(U(n,i),o),this.zoomedMin=U(this.fixedWidth?this.zoomedMax-this.fixedWidth:W(n,i),0),this.range=this.zoomedMax-this.zoomedMin,i=(f=B(this.zoomedMax))-(n=B(this.zoomedMin)),this.rendered||(k&&(this.navigatorGroup=h=c.g("navigator").attr({zIndex:3}).add(),this.leftShade=c.rect().attr({fill:v.maskFill}).add(h),v.maskInside?this.leftShade.css({cursor:"ew-resize "}):this.rightShade=c.rect().attr({fill:v.maskFill}).add(h),this.outline=c.path().attr({"stroke-width":S,stroke:v.outlineColor}).add(h)),y&&(this.scrollbarGroup=p=c.g("scrollbar").add(),h=x.trackBorderWidth,this.scrollbarTrack=g=c.rect().attr({x:0,y:-h%2/2,fill:x.trackBackgroundColor,stroke:x.trackBorderColor,"stroke-width":h,r:x.trackBorderRadius||0,height:m}).add(p),this.scrollbar=d=c.rect().attr({y:-D%2/2,height:m,fill:x.barBackgroundColor,stroke:x.barBorderColor,"stroke-width":D,r:P}).add(p),this.scrollbarRifles=c.path().attr({stroke:x.rifleColor,"stroke-width":1}).add(p))),u=u.isResizing?"animate":"attr",k&&(this.leftShade[u](v.maskInside?{x:r+n,y:w,width:f-n,height:b}:{x:r,y:w,width:n,height:b}),this.rightShade&&this.rightShade[u]({x:r+f,y:w,width:o-f,height:b}),this.outline[u]({d:[lt,a,C,ht,r+n-M,C,r+n-M,C+A,ht,r+f-M,C+A,ht,r+f-M,C,a+s,C].concat(v.maskInside?[lt,r+n+M,C,ht,r+f-M,C]:[])}),this.drawHandle(n+M,0),this.drawHandle(f+M,1)),y&&p&&(this.drawScrollbarButton(0),this.drawScrollbarButton(1),p[u]({translateX:a,translateY:B(C+b)}),g[u]({width:s}),g=m+n,(s=i-D)<_&&(T=(_-s)/2,s=_,g-=T),this.scrollbarPad=T,d[u]({x:z(g)+D%2/2,width:s}),n=m+n+i/2-.5,this.scrollbarRifles.attr({visibility:12<i?ot:it})[u]({d:[lt,n-3,m/4,ht,n-3,2*m/3,lt,n,m/4,ht,n,2*m/3,lt,3+n,m/4,ht,3+n,2*m/3]})),this.scrollbarPad=T,this.rendered=!0))},addEvents:function(){var t=this.chart.container,e=this.mouseDownHandler,n=this.mouseMoveHandler,i=this.mouseUpHandler,r=[[t,"mousedown",e],[t,"mousemove",n],[document,"mouseup",i]];Se&&r.push([t,"touchstart",e],[t,"touchmove",n],[document,"touchend",i]),qt(r,function(t){Qt.apply(null,t)}),this._events=r},removeEvents:function(){qt(this._events,function(t){te.apply(null,t)}),this._events=void 0,this.navigatorEnabled&&this.baseSeries&&te(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var g,i,m,l,r,y=this,v=y.chart,a=y.scrollbarHeight,t=y.navigatorOptions,x=y.height,e=(y.top,y.baseSeries);y.mouseDownHandler=function(t){t=v.pointer.normalize(t);var e,n=y.zoomedMin,i=y.zoomedMax,r=y.top,o=y.scrollbarHeight,a=y.scrollerLeft,s=y.scrollerWidth,l=y.navigatorLeft,h=y.navigatorWidth,u=y.scrollbarPad,c=y.range,p=t.chartX,d=t.chartY,f=v.xAxis[0],t=Z?10:7;r<d&&d<r+x+o&&((r=!y.scrollbarEnabled||d<r+x)&&Y.abs(p-n-l)<t?(y.grabbedLeft=!0,y.otherHandlePos=i,y.fixedExtreme=f.max,v.fixedRange=null):r&&Y.abs(p-i-l)<t?(y.grabbedRight=!0,y.otherHandlePos=n,y.fixedExtreme=f.min,v.fixedRange=null):l+n-u<p&&p<l+i+u?(y.grabbedCenter=p,y.fixedWidth=c,m=p-n):a<p&&p<a+s&&((i=r?p-l-c/2:p<l?n-.2*c:a+s-o<p?n+.2*c:p<l+n?n-c:i)<0?i=0:h<=i+c&&(i=h-c,e=y.getUnionExtremes().dataMax),i!==n&&(y.fixedWidth=c,e=g.toFixedRange(i,i+c,null,e),f.setExtremes(e.min,e.max,!0,!1,{trigger:"navigator"}))))},y.mouseMoveHandler=function(t){var e,n=y.scrollbarHeight,i=y.navigatorLeft,r=y.navigatorWidth,o=y.scrollerLeft,a=y.scrollerWidth,s=y.range;0!==t.pageX&&((e=(t=v.pointer.normalize(t)).chartX)<i?e=i:o+a-n<e&&(e=o+a-n),y.grabbedLeft?(l=!0,y.render(0,0,e-i,y.otherHandlePos)):y.grabbedRight?(l=!0,y.render(0,0,y.otherHandlePos,e-i)):y.grabbedCenter&&(l=!0,e<m?e=m:r+m-s<e&&(e=r+m-s),y.render(0,0,e-m,e-m+s)),l&&y.scrollbarOptions.liveRedraw&&setTimeout(function(){y.mouseUpHandler(t)},0))},y.mouseUpHandler=function(t){var e,n;l&&(y.zoomedMin===y.otherHandlePos?e=y.fixedExtreme:y.zoomedMax===y.otherHandlePos&&(n=y.fixedExtreme),n=g.toFixedRange(y.zoomedMin,y.zoomedMax,e,n),v.xAxis[0].setExtremes(n.min,n.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:t})),"mousemove"!==t.type&&(y.grabbedLeft=y.grabbedRight=y.grabbedCenter=y.fixedWidth=y.fixedExtreme=y.otherHandlePos=l=m=null)};var n=v.xAxis.length,o=v.yAxis.length;v.extraBottomMargin=y.outlineHeight+t.margin,y.navigatorEnabled?(y.xAxis=g=new ve(v,ft({breaks:e&&e.xAxis.options.breaks,ordinal:e&&e.xAxis.options.ordinal},t.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:n,height:x,offset:0,offsetLeft:a,offsetRight:-a,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),y.yAxis=i=new ve(v,ft(t.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:x,offset:0,index:o,zoomEnabled:!1})),e||t.series.data?y.addBaseSeries():0===v.series.length&&It(v,"redraw",function(t,e){0<v.series.length&&!y.series&&(y.setBaseSeries(),v.redraw=t),t.call(v,e)})):y.xAxis=g={translate:function(t,e){var n=v.xAxis[0],i=n.getExtremes(),r=v.plotWidth-2*a,o=qe("min",n.options.min,i.dataMin),i=qe("max",n.options.max,i.dataMax)-o;return e?t*i/r+o:r*(t-o)/i},toFixedRange:ve.prototype.toFixedRange},It(v,"getMargins",function(t){var e=this.legend,n=e.options;t.apply(this,[].slice.call(arguments,1)),y.top=r=y.navigatorOptions.top||this.chartHeight-y.height-y.scrollbarHeight-this.spacing[2]-("bottom"===n.verticalAlign&&n.enabled&&!n.floating?e.legendHeight+Tt(n.margin,10):0),g&&i&&(g.options.top=i.options.top=r,g.setAxisSize(),i.setAxisSize())}),y.addEvents()},getUnionExtremes:function(t){var e,n=this.chart.xAxis[0],i=this.xAxis,r=i.options,o=n.options;return e=!t||null!==n.dataMin?{dataMin:Tt(r&&r.min,qe("min",o.min,n.dataMin,i.dataMin)),dataMax:Tt(r&&r.max,qe("max",o.max,n.dataMax,i.dataMax))}:e},setBaseSeries:function(t){var e=this.chart;t=t||e.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var t=this.baseSeries,e=t?t.options:{},n=e.data,i=this.navigatorOptions.series,r=i.data;this.hasNavigatorData=!!r,(i=ft(e,i,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0})).data=r||n,this.series=this.chart.initSeries(i),t&&!1!==this.navigatorOptions.adaptToUpdatedData&&(Qt(t,"updatedData",this.updatedDataHandler),t.userOptions.events=dt(t.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var t,e,n,i=this.chart.scroller,r=i.baseSeries,o=r.xAxis,a=o.getExtremes(),s=a.min,l=a.max,h=a.dataMin,u=a.dataMax,c=l-s,p=i.series,d=p.xData,f=!!o.setExtremes,a=l>=d[d.length-1]-(this.closestPointRange||0),d=s<=h;i.hasNavigatorData||(p.options.pointStart=r.xData[0],p.setData(r.options.data,!1),n=!0),d&&(t=(e=h)+c),a&&(t=u,d||(e=U(t-c,p.xData[0]))),f&&(d||a)?isNaN(e)||o.setExtremes(e,t,!0,!1,{trigger:"updatedData"}):(n&&this.chart.redraw(!1),i.render(U(s,h),W(l,u)))},destroy:function(){this.removeEvents(),qt([this.xAxis,this.yAxis,this.leftShade,this.rightShade,this.outline,this.scrollbarTrack,this.scrollbarRifles,this.scrollbarGroup,this.scrollbar],function(t){t&&t.destroy&&t.destroy()}),this.xAxis=this.yAxis=this.leftShade=this.rightShade=this.outline=this.scrollbarTrack=this.scrollbarRifles=this.scrollbarGroup=this.scrollbar=null,qt([this.scrollbarButtons,this.handles,this.elementsToDestroy],function(t){Ft(t)})}},O.Scroller=Ke,It(ve.prototype,"zoom",function(t,e,n){var i,r=this.chart,o=r.options,a=o.chart.zoomType,s=o.navigator,o=o.rangeSelector;return this.isXAxis&&(s&&s.enabled||o&&o.enabled)&&("x"===a?r.resetZoomButton="blocked":"y"===a?i=!1:"xy"===a&&(a=this.previousZoom,kt(e)?this.previousZoom=[this.min,this.max]:a&&(e=a[0],n=a[1],delete this.previousZoom))),void 0!==i?i:t.call(this,e,n)}),It(Pe.prototype,"init",function(t,e,n){Qt(this,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new Ke(this))}),t.call(this,e,n)}),It(Le.prototype,"addPoint",function(t,e,n,i,r){var o=this.options.turboThreshold;o&&this.xData.length>o&&yt(e)&&!vt(e)&&this.chart.scroller&&Bt(20,!0),t.call(this,e,n,i,r)}),dt(C,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),C.lang=ft(C.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),Ze.prototype={clickButton:function(t,e){var n,i,r,o,a,s,l=this,h=l.selected,u=l.chart,c=l.buttons,p=l.buttonOptions[t],d=u.xAxis[0],f=u.scroller&&u.scroller.getUnionExtremes()||d||{},g=f.dataMin,m=f.dataMax,y=d&&B(W(d.max,Tt(m,d.max))),v=p.type,x=p._range,f=p.dataGrouping;if(null!==g&&null!==m&&t!==l.selected){if(u.fixedRange=x,f&&(this.forcedDataGrouping=!0,ve.prototype.setDataGrouping.call(d||{chart:this.chart},f,!1)),"month"===v||"year"===v)d?(s={range:p,max:y,dataMin:g,dataMax:m},n=d.minFromRange.call(s),"number"==typeof s.newMax&&(y=s.newMax)):x=p;else if(x)n=U(y-x,g),y=W(n+x,m);else if("ytd"===v){if(!d)return void Qt(u,"beforeRender",function(){l.clickButton(t)});void 0===m&&(g=Number.MAX_VALUE,m=Number.MIN_VALUE,qt(u.series,function(t){t=t.xData;g=W(t[0],g),m=U(t[t.length-1],m)}),e=!1),r=(s=new _(m)).getFullYear(),n=r=U(g||0,_.UTC(r,0,1)),s=s.getTime(),y=W(m||s,s)}else"all"===v&&d&&(n=g,y=m);c[h]&&c[h].setState(0),c[t]&&c[t].setState(2),d?(d.setExtremes(n,y,Tt(e,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:p}),l.setSelected(t)):(i=u.options.xAxis[0],a=i.range,i.range=x,o=i.min,i.min=r,l.setSelected(t),Qt(u,"load",function(){i.range=a,i.min=o}))}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(e){var n=this,t=e.options.rangeSelector,i=t.buttons||[].concat(n.defaultButtons),r=t.selected,o=n.blurInputs=function(){var t=n.minInput,e=n.maxInput;t&&t.blur&&ee(t,"blur"),e&&e.blur&&ee(e,"blur")};n.chart=e,n.options=t,n.buttons=[],e.extraTopMargin=35,n.buttonOptions=i,Qt(e.container,"mousedown",o),Qt(e,"resize",o),qt(i,n.computeButtonRange),void 0!==r&&i[r]&&this.clickButton(r,!1),Qt(e,"load",function(){Qt(e.xAxis[0],"setExtremes",function(t){this.max-this.min!==e.fixedRange&&"rangeSelectorButton"!==t.trigger&&"updatedData"!==t.trigger&&n.forcedDataGrouping&&this.setDataGrouping(!1,!1)}),Qt(e.xAxis[0],"afterSetExtremes",function(){n.updateButtonStates(!0)})})},updateButtonStates:function(t){var h=this,u=this.chart,c=u.xAxis[0],e=u.scroller&&u.scroller.getUnionExtremes()||c,p=e.dataMin,d=e.dataMax,f=h.selected,g=h.options.allButtonsEnabled,m=h.buttons;t&&u.fixedRange!==B(c.max-c.min)&&(m[f]&&m[f].setState(0),h.setSelected(null)),qt(h.buttonOptions,function(t,e){var n=B(c.max-c.min),i=t._range,r=t.type,o=t.count||1,a=d-p<i,s=i<c.minRange,l="all"===t.type&&c.max-c.min>=d-p&&2!==m[e].state,t="ytd"===t.type&&A("%Y",p)===A("%Y",d);u.renderer.forExport&&e===f||(("month"===r||"year"===r)&&24*{month:28,year:365}[r]*36e5*o<=n&&n<=24*{month:31,year:366}[r]*36e5*o?!0:i===n)&&e!==f?(h.setSelected(e),m[e].setState(2)):!g&&(a||s||l||t)?m[e].setState(3):3===m[e].state&&m[e].setState(0)})},computeButtonRange:function(t){var e=t.type,n=t.count||1,i={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};i[e]?t._range=i[e]*n:"month"!==e&&"year"!==e||(t._range=24*{month:30,year:365}[e]*36e5*n)},setInputValue:function(t,e){var n=this.chart.options.rangeSelector;kt(e)&&(this[t+"Input"].HCTime=e),this[t+"Input"].value=A(n.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime),this[t+"DateBox"].attr({text:A(n.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},showInput:function(t){var e=this.inputGroup,n=this[t+"DateBox"];At(this[t+"Input"],{left:e.translateX+n.x+at,top:e.translateY+at,width:n.width-2+at,height:n.height-2+at,border:"2px solid silver"})},hideInput:function(t){At(this[t+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(t)},drawInput:function(t){var o,a=this,s=a.chart,e=s.renderer.style,n=s.renderer,l=s.options.rangeSelector,i=C.lang,r=a.div,h="min"===t,u=this.inputGroup;this[t+"Label"]=i=n.label(i[h?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(ft(e,l.labelStyle)).add(u),u.offset+=i.width+5,this[t+"DateBox"]=n=n.label("",u.offset).attr({padding:2,width:l.inputBoxWidth||90,height:l.inputBoxHeight||17,stroke:l.inputBoxBorderColor||"silver","stroke-width":1}).css(ft({textAlign:"center",color:"#444"},e,l.inputStyle)).on("click",function(){a.showInput(t),a[t+"Input"].focus()}).add(u),u.offset+=n.width+(h?10:0),this[t+"Input"]=o=Pt("input",{name:t,className:rt+"range-selector",type:"text"},dt({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:e.fontSize,fontFamily:e.fontFamily,top:s.plotTop+at},l.inputStyle),r),o.onfocus=function(){a.showInput(t)},o.onblur=function(){a.hideInput(t)},o.onchange=function(){var t=o.value,e=(l.inputDateParser||_.parse)(t),n=s.xAxis[0],i=n.dataMin,r=n.dataMax;isNaN(e)&&(e=t.split("-"),e=_.UTC(gt(e[0]),gt(e[1])-1,gt(e[2]))),isNaN(e)||(C.global.useUTC||(e+=60*(new _).getTimezoneOffset()*1e3),h?e>a.maxInput.HCTime?e=void 0:e<i&&(e=i):e<a.minInput.HCTime?e=void 0:r<e&&(e=r),void 0!==e&&s.xAxis[0].setExtremes(h?e:n.min,h?n.max:e,void 0,void 0,{trigger:"rangeSelectorInput"}))}},getPosition:function(){var t=this.chart,e=t.options.rangeSelector,t=Tt((e.buttonPosition||{}).y,t.plotTop-t.axisOffset[0]-35);return{buttonTop:t,inputTop:t-10}},render:function(t,e){var n,i,r=this,o=r.chart,a=o.renderer,s=o.container,l=o.options,h=l.exporting&&l.navigation&&l.navigation.buttonOptions,u=l.rangeSelector,c=r.buttons,p=C.lang,d=(r.div,r.inputGroup),f=u.buttonTheme,g=u.buttonPosition||{},m=u.inputEnabled,y=f&&f.states,v=o.plotLeft,x=this.getPosition(),_=r.group,l=r.rendered;l||(r.group=_=a.g("range-selector-buttons").add(),r.zoomText=a.text(p.rangeSelectorZoom,Tt(g.x,v),15).css(u.labelStyle).add(_),n=Tt(g.x,v)+r.zoomText.getBBox().width+5,qt(r.buttonOptions,function(t,e){c[e]=a.button(t.text,n,0,function(){r.clickButton(e),r.isActive=!0},f,y&&y.hover,y&&y.select,y&&y.disabled).css({textAlign:"center"}).add(_),n+=c[e].width+Tt(u.buttonSpacing,5),r.selected===e&&c[e].setState(2)}),r.updateButtonStates(),!1!==m&&(r.div=i=Pt("div",null,{position:"relative",height:0,zIndex:1}),s.parentNode.insertBefore(i,s),r.inputGroup=d=a.g("input-group").add(),d.offset=0,r.drawInput("min"),r.drawInput("max"))),_[l?"animate":"attr"]({translateY:x.buttonTop}),!1!==m&&(d.align(dt({y:x.inputTop,width:d.offset,x:h&&x.inputTop<(h.y||0)+h.height-o.spacing[0]?-40:0},u.inputPosition),!0,o.spacingBox),kt(m)||(m=_.getBBox(),d[d.translateX<m.x+m.width+10?"hide":"show"]()),r.setInputValue("min",t),r.setInputValue("max",e)),r.rendered=!0},destroy:function(){var t,e=this.minInput,n=this.maxInput,i=this.chart,r=this.blurInputs;for(t in te(i.container,"mousedown",r),te(i,"resize",r),Ft(this.buttons),e&&(e.onfocus=e.onblur=e.onchange=null),n&&(n.onfocus=n.onblur=n.onchange=null),this)this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&Xt(this[t])),this[t]=null}},ve.prototype.toFixedRange=function(t,e,n,i){var r=this.chart&&this.chart.fixedRange,n=Tt(n,this.translate(t,!0)),t=Tt(i,this.translate(e,!0)),e=r&&(t-n)/r;return.7<e&&e<1.3&&(i?n=t-r:t=n+r),{min:n,max:t}},ve.prototype.minFromRange=function(){var t,e,n=this.range,i={month:"Month",year:"FullYear"}[n.type],r=this.max,o=new _(r);return"number"==typeof n?(t=this.max-n,e=n):(o["set"+i](o["get"+i]()-n.count),t=o.getTime()),o=Tt(this.dataMin,Number.MIN_VALUE),(t=isNaN(t)?o:t)<=o&&(this.newMax=W((t=o)+e,this.dataMax)),t=isNaN(r)?void 0:t},It(Pe.prototype,"init",function(t,e,n){Qt(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new Ze(this))}),t.call(this,e,n)}),O.RangeSelector=Ze,Pe.prototype.callbacks.push(function(t){var e,n=t.scroller,i=t.rangeSelector;function r(){e=t.xAxis[0].getExtremes(),n.render(e.min,e.max)}function o(){e=t.xAxis[0].getExtremes(),isNaN(e.min)||i.render(e.min,e.max)}function a(t){"navigator-drag"!==t.triggerOp&&n.render(t.min,t.max)}function s(t){i.render(t.min,t.max)}n&&(Qt(t.xAxis[0],"afterSetExtremes",a),It(t,"drawChartBox",function(t){var e=this.isDirtyBox;t.call(this),e&&r()}),r()),i&&(Qt(t.xAxis[0],"afterSetExtremes",s),Qt(t,"resize",o),o()),Qt(t,"destroy",function(){n&&te(t.xAxis[0],"afterSetExtremes",a),i&&(te(t,"resize",o),te(t.xAxis[0],"afterSetExtremes",s))})}),O.StockChart=function(t,e){var n=t.series,i=Tt(t.navigator&&t.navigator.enabled,!0)?{startOnTick:!1,endOnTick:!1}:null,r={marker:{enabled:!1,radius:2}},o={shadow:!1,borderWidth:0};return t.xAxis=Jt(Mt(t.xAxis||{}),function(t){return ft({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},i)}),t.yAxis=Jt(Mt(t.yAxis||{}),function(t){return ft({labels:{y:-2},opposite:Tt(t.opposite,!0),showLastLabel:!1,title:{text:null}},t)}),t.series=null,(t=ft({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:r,spline:r,area:r,areaspline:r,arearange:r,areasplinerange:r,column:o,columnrange:o,candlestick:o,ohlc:o}},t,{_stock:!0,chart:{inverted:!1}})).series=n,new Pe(t,e)},It(Me.prototype,"init",function(t,e,n){var i=n.chart.pinchType||"";t.call(this,e,n),this.pinchX=this.pinchHor=-1!==i.indexOf("x"),this.pinchY=this.pinchVert=-1!==i.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),It(ve.prototype,"autoLabelAlign",function(t){var e,n=this.chart,i=this.options,r=n._labelPanes=n._labelPanes||{},n=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&!r[e=i.top+","+i.height]&&n.enabled?(15===n.x&&(n.x=0),void 0===n.align&&(n.align="right"),r[e]=1,"right"):t.call(this,[].slice.call(arguments,1))}),It(ve.prototype,"getPlotLinePath",function(t,e,n,i,r,o){var a,s,l,h,u,c=this,p=(this.isLinked&&!this.series?this.linkedParent:this).series,d=c.chart,f=d.renderer,g=c.left,m=c.top,y=[],v=[];return"colorAxis"===c.coll?t.apply(this,[].slice.call(arguments,1)):(v=c.isXAxis?kt(c.options.yAxis)?[d.yAxis[c.options.yAxis]]:Jt(p,function(t){return t.yAxis}):kt(c.options.xAxis)?[d.xAxis[c.options.xAxis]]:Jt(p,function(t){return t.xAxis}),p=c.isXAxis?d.yAxis:d.xAxis,qt(p,function(t){var e;kt(t.options.id)&&-1!==t.options.id.indexOf("navigator")||(e=t.isXAxis?"yAxis":"xAxis",e=kt(t.options[e])?d[e][t.options[e]]:d[e][0],c===e&&v.push(t))}),u=v.length?[]:[(c.isXAxis?d.yAxis:d.xAxis)[0]],qt(v,function(t){-1===$t(t,u)&&u.push(t)}),o=Tt(o,c.translate(e,null,null,i)),isNaN(o)||(c.horiz?qt(u,function(t){var e;s=t.pos,h=s+t.len,((a=l=B(o+c.transB))<g||a>g+c.width)&&(r?a=l=W(U(g,a),g+c.width):e=!0),e||y.push("M",a,s,"L",l,h)}):qt(u,function(t){var e;a=t.pos,l=a+t.len,((s=h=B(m+c.height-o))<m||s>m+c.height)&&(r?s=h=W(U(m,s),c.top+c.height):e=!0),e||y.push("M",a,s,"L",l,h)})),0<y.length?f.crispPolyLine(y,n||1):null)}),ve.prototype.getPlotBandPath=function(t,e){var n,i=this.getPlotLinePath(e,null,null,!0),r=this.getPlotLinePath(t,null,null,!0),o=[];if(r&&i&&r.toString()!==i.toString())for(n=0;n<r.length;n+=6)o.push("M",r[n+1],r[n+2],"L",r[n+4],r[n+5],i[n+4],i[n+5],i[n+1],i[n+2]);else o=null;return o},pe.prototype.crispPolyLine=function(t,e){for(var n=0;n<t.length;n+=6)t[n+1]===t[n+4]&&(t[n+1]=t[n+4]=B(t[n+1])-e%2/2),t[n+2]===t[n+5]&&(t[n+2]=t[n+5]=B(t[n+2])+e%2/2);return t},o===O.VMLRenderer&&(de.prototype.crispPolyLine=pe.prototype.crispPolyLine),It(ve.prototype,"hideCrosshair",function(t,e){t.call(this,e),kt(this.crossLabelArray)&&(kt(e)?this.crossLabelArray[e]&&this.crossLabelArray[e].hide():qt(this.crossLabelArray,function(t){t.hide()}))}),It(ve.prototype,"drawCrosshair",function(t,e,n){var i,r,o,a,s,l,h,u,c,p;t.call(this,e,n),kt(this.crosshair.label)&&this.crosshair.label.enabled&&kt(n)&&(r=this.chart,o=this.options.crosshair.label,a=this.isXAxis?"x":"y",s=this.horiz,l=this.opposite,h=this.left,u=this.top,p=this.crossLabel,c=o.format,t="",p=p||(this.crossLabel=r.renderer.label().attr({align:o.align||(s?"center":l?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:s?16:void 0,fill:o.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:Tt(o.padding,2),stroke:o.borderColor||null,"stroke-width":o.borderWidth||0}).css(dt({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},o.style)).add()),(e=s?(i=n.plotX+h,u+(l?0:this.height)):(i=l?this.width+h:0,n.plotY+u))<u||e>u+this.height?this.hideCrosshair():(c||o.formatter||(c="{value"+((t=this.isDatetimeAxis?"%b %d, %Y":t)?":"+t:"")+"}"),p.attr({text:c?Rt(c,{value:n[a]}):o.formatter.call(this,n[a]),x:i,y:e,visibility:ot}),a=p.getBBox(),s?("inside"===this.options.tickPosition&&!l||"inside"!==this.options.tickPosition&&l)&&(e=p.y-a.height):e=p.y-a.height/2,r=s?{left:h-a.x,right:h+this.width-a.x}:{left:"left"===this.labelAlign?h:0,right:"right"===this.labelAlign?h+this.width:r.chartWidth},p.translateX<r.left&&(i+=r.left-p.translateX),p.translateX+a.width>=r.right&&(i-=p.translateX+a.width-r.right),p.attr({x:i,y:e,visibility:ot})))});var Je=Ye.init,Qe=Ye.processData,tn=De.prototype.tooltipFormatter;Ye.init=function(){Je.apply(this,arguments),this.setCompare(this.options.compare)},Ye.setCompare=function(i){this.modifyValue="value"===i||"percent"===i?function(t,e){var n=this.compareValue;return void 0!==t&&(t="value"===i?t-n:t/n*100-100,e&&(e.change=t)),t}:null,this.chart.hasRendered&&(this.isDirty=!0)},Ye.processData=function(){var t,e,n,i=0;if(Qe.apply(this,arguments),this.xAxis&&this.processedYData)for(t=this.processedXData,n=(e=this.processedYData).length;i<n;i++)if(typeof e[i]==Ue&&t[i]>=this.xAxis.min){this.compareValue=e[i];break}},It(Ye,"getExtremes",function(t){t.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),ve.prototype.setCompare=function(e,t){this.isXAxis||(qt(this.series,function(t){t.setCompare(e)}),Tt(t,!0)&&this.chart.redraw())},De.prototype.tooltipFormatter=function(t){return t=t.replace("{point.change}",(0<this.change?"+":"")+O.numberFormat(this.change,Tt(this.series.tooltipOptions.changeDecimals,2))),tn.apply(this,[t])},It(Le.prototype,"render",function(t){this.chart.options._stock&&this.xAxis&&(!this.clipBox&&this.animate?(this.clipBox=ft(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&(re(this.chart[this.sharedClipKey]),this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}))),t.call(this)}),dt(O,{Color:se,Point:De,Tick:me,Renderer:o,SVGElement:ce,SVGRenderer:pe,arrayMin:Yt,arrayMax:zt,charts:et,dateFormat:A,error:Bt,format:Rt,pathAnim:t,getOptions:function(){return C},hasBidiBug:n,isTouchDevice:Z,setOptions:function(t){return C=ft(!0,C,t),ae(),C},addEvent:Qt,removeEvent:te,createElement:Pt,discardElement:Xt,css:At,each:qt,map:Jt,merge:ft,splat:Mt,extendClass:i,pInt:gt,svg:Q,canvas:u,vml:!Q&&!u,product:"Highstock",version:"2.1.8"})}(),function(a){function t(){}var m=a.arrayMin,y=a.arrayMax,k=a.each,u=a.extend,p=a.merge,d=a.map,S=a.pick,v=a.pInt,e=a.getOptions().plotOptions,f=a.seriesTypes,n=a.extendClass,c=a.splat,i=a.wrap,r=a.Axis,o=a.Tick,s=a.Point,l=a.Pointer,h=a.CenteredSeriesMixin,g=a.TrackerMixin,x=a.Series,_=Math,M=_.round,T=_.floor,b=_.max,w=a.Color;function A(t,e,n){this.init.call(this,t,e,n)}u(A.prototype,{init:function(t,e,i){var r=this,n=r.defaultOptions;r.chart=e,r.options=t=p(n,e.angular?{background:{}}:void 0,t),(t=t.background)&&k([].concat(c(t)).reverse(),function(t){var e=t.backgroundColor,n=i.userOptions;t=p(r.defaultBackgroundOptions,t),e&&(t.backgroundColor=e),t.color=t.backgroundColor,i.options.plotBands.unshift(t),n.plotBands=n.plotBands||[],n.plotBands.unshift(t)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var P,D=r.prototype,o=o.prototype,C={getOffset:t,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:t,setCategories:t,setTitle:t},L={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){t=this.options=p(this.defaultOptions,this.defaultRadialOptions,t);t.plotBands||(t.plotBands=[])},getOffset:function(){D.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=h.getCenter.call(this.pane)},getLinePath:function(t,e){var n=this.center;return e=S(e,n[2]/2-this.offset),this.chart.renderer.symbols.arc(this.left+n[0],this.top+n[1],e,e,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){D.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=this.center[2]/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=(this.categories?1:this.pointRange)||this.closestPointRange||0)},setAxisSize:function(){D.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=a.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*S(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):0,S(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var n=this.chart,i=this.center;return t=this.startAngleRad+t,{x:n.plotLeft+i[0]+Math.cos(t)*e,y:n.plotTop+i[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,n){var i,r,o=this.center,a=this.startAngleRad,s=o[2]/2,l=[S(n.outerRadius,"100%"),n.innerRadius,S(n.thickness,10)],h=/%$/,u=this.isCircular,c="polygon"===this.options.gridLineInterpolation?this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(t=Math.max(t,this.min),e=Math.min(e,this.max),u||(l[0]=this.translate(t),l[1]=this.translate(e)),l=d(l,function(t){return t=h.test(t)?v(t,10)*s/100:t}),"circle"!==n.shape&&u?(i=a+this.translate(t),r=a+this.translate(e)):(i=-Math.PI/2,r=1.5*Math.PI,c=!0),this.chart.renderer.symbols.arc(this.left+o[0],this.top+o[1],l[0],l[0],{start:Math.min(i,r),end:Math.max(i,r),innerR:S(l[1],l[0]-l[2]),open:c}));return c},getPlotLinePath:function(n,t){var i,r,o,e=this,a=e.center,s=e.chart,l=e.getPosition(n);return e.isCircular?o=["M",a[0]+s.plotLeft,a[1]+s.plotTop,"L",l.x,l.y]:"circle"===e.options.gridLineInterpolation?(n=e.translate(n))&&(o=e.getLinePath(0,n)):(k(s.xAxis,function(t){t.pane===e.pane&&(i=t)}),o=[],n=e.translate(n),s=i.tickPositions,i.autoConnect&&(s=s.concat([s[0]])),t&&(s=[].concat(s).reverse()),k(s,function(t,e){r=i.getPosition(t,n),o.push(e?"L":"M",r.x,r.y)})),o},getTitlePosition:function(){var t=this.center,e=this.chart,n=this.options.title;return{x:e.plotLeft+t[0]+(n.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[n.align]*t[2]+(n.y||0)}}};i(D,"init",function(t,e,n){var i,r=e.angular,o=e.polar,a=n.isX,s=r&&a,l=e.options,h=n.pane||0;r?(u(this,s?C:L),(i=!a)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):o&&(u(this,L),this.defaultRadialOptions=(i=a)?this.defaultRadialXOptions:p(this.defaultYAxisOptions,this.defaultRadialYOptions)),t.call(this,e,n),s||!r&&!o||(o=this.options,e.panes||(e.panes=[]),this.pane=h=e.panes[h]=e.panes[h]||new A(c(l.pane)[h],e,this),h=h.options,e.inverted=!1,l.chart.zoomType=null,this.startAngleRad=l=(h.startAngle-90)*Math.PI/180,this.endAngleRad=h=(S(h.endAngle,h.startAngle+360)-90)*Math.PI/180,this.offset=o.offset||0,(this.isCircular=i)&&void 0===n.max&&h-l==2*Math.PI&&(this.autoConnect=!0))}),i(o,"getPosition",function(t,e,n,i,r){var o=this.axis;return o.getPosition?o.getPosition(n):t.call(this,e,n,i,r)}),i(o,"getLabelPosition",function(t,e,n,i,r,o,a,s,l){var h,u=this.axis,c=o.y,p=20,d=o.align,f=(u.translate(this.pos)+u.startAngleRad+Math.PI/2)/Math.PI*180%360;return u.isRadial?(h=u.getPosition(this.pos,u.center[2]/2+S(o.distance,-25)),"auto"===o.rotation?i.attr({rotation:f}):null===c&&(c=u.chart.renderer.fontMetrics(i.styles.fontSize).b-i.getBBox().height/2),null===d&&(d=u.isCircular?(p=this.label.getBBox().width>u.len*u.tickInterval/(u.max-u.min)?0:p)<f&&f<180-p?"left":180+p<f&&f<360-p?"right":"center":"center",i.attr({align:d})),h.x+=o.x,h.y+=c):h=t.call(this,e,n,i,r,o,a,s,l),h}),i(o,"getMarkPath",function(t,e,n,i,r,o,a){var s=this.axis;return s.isRadial?["M",e,n,"L",(s=s.getPosition(this.pos,s.center[2]/2+i)).x,s.y]:t.call(this,e,n,i,r,o,a)}),e.arearange=p(e.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">â—</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),f.arearange=n(f.area,{type:"arearange",pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(t){var e=this.chart,n=this.xAxis.postTranslate(t.rectPlotX,this.yAxis.len-t.plotHigh);t.plotHighX=n.x-e.plotLeft,t.plotHigh=n.y-e.plotTop},getSegments:function(){var e=this;k(e.points,function(t){e.options.connectNulls||null!==t.low&&null!==t.high?null===t.low&&null!==t.high&&(t.y=t.high):t.y=null}),x.prototype.getSegments.call(this)},translate:function(){var e=this,r=e.yAxis;f.area.prototype.translate.apply(e),k(e.points,function(t){var e=t.low,n=t.high,i=t.plotY;null===n&&null===e?t.y=null:null===e?(t.plotLow=t.plotY=null,t.plotHigh=r.translate(n,0,1,0,1)):null===n?(t.plotLow=i,t.plotHigh=null):(t.plotLow=i,t.plotHigh=r.translate(n,0,1,0,1))}),this.chart.polar&&k(this.points,function(t){e.highToXY(t)})},getSegmentPath:function(t){for(var e,n=[],i=t.length,r=x.prototype.getSegmentPath,o=this.options,a=o.step,s=HighchartsAdapter.grep(t,function(t){return null!==t.plotLow});i--;)null!==(e=t[i]).plotHigh&&n.push({plotX:e.plotHighX||e.plotX,plotY:e.plotHigh});return s=r.call(this,s),a&&(o.step={left:"right",center:"center",right:"left"}[a=!0===a?"left":a]),r=r.call(this,n),o.step=a,a=[].concat(s,r),this.chart.polar||(r[0]="L"),this.areaPath=this.areaPath.concat(s,r),a},drawDataLabels:function(){var t,e,n,i=this.data,r=i.length,o=[],a=x.prototype,s=this.options.dataLabels,l=s.align,h=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(t=r;t--;)(e=i[t])&&(n=e.plotHigh>e.plotLow,e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,o[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=n,h?(l||(s.align=n?"right":"left"),s.x=s.xHigh):s.y=s.yHigh);for(a.drawDataLabels&&a.drawDataLabels.apply(this,arguments),t=r;t--;)(e=i[t])&&(n=e.plotHigh>e.plotLow,e.dataLabelUpper=e.dataLabel,e.dataLabel=o[t],e.y=e.low,e.plotY=e._plotY,e.below=!n,h?(l||(s.align=n?"left":"right"),s.x=s.xLow):s.y=s.yLow);a.drawDataLabels&&a.drawDataLabels.apply(this,arguments)}s.align=l},alignDataLabel:function(){f.column.prototype.alignDataLabel.apply(this,arguments)},setStackedPoints:t,getSymbol:t,drawPoints:t}),e.areasplinerange=p(e.arearange),f.areasplinerange=n(f.arearange,{type:"areasplinerange",getPointSpline:f.spline.prototype.getPointSpline}),P=f.column.prototype,e.columnrange=p(e.column,e.arearange,{lineWidth:1,pointRange:null}),f.columnrange=n(f.arearange,{type:"columnrange",translate:function(){var r,o=this,a=o.yAxis;P.translate.apply(o),k(o.points,function(t){var e,n=t.shapeArgs,i=o.options.minPointLength;t.tooltipPos=null,t.plotHigh=r=a.translate(t.high,0,1,0,1),t.plotLow=t.plotY,t=t.plotY-(e=r),Math.abs(t)<i?(t+=i=i-t,e-=i/2):t<0&&(e-=t*=-1),n.height=t,n.y=e})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:t,pointAttrToOptions:P.pointAttrToOptions,drawPoints:P.drawPoints,drawTracker:P.drawTracker,animate:P.animate,getColumnMetrics:P.getColumnMetrics}),e.gauge=p(e.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});g={type:"gauge",pointClass:n(s,{setState:function(t){this.state=t}}),angular:!0,drawGraph:t,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var h=this.yAxis,u=this.options,c=h.center;this.generatePoints(),k(this.points,function(t){var e=p(u.dial,t.dial),n=v(S(e.radius,80))*c[2]/200,i=v(S(e.baseLength,70))*n/100,r=v(S(e.rearLength,10))*n/100,o=e.baseWidth||3,a=e.topWidth||1,s=u.overshoot,l=h.startAngleRad+h.translate(t.y,null,null,null,!0);s&&"number"==typeof s?(s=s/180*Math.PI,l=Math.max(h.startAngleRad-s,Math.min(h.endAngleRad+s,l))):!1===u.wrap&&(l=Math.max(h.startAngleRad,Math.min(h.endAngleRad,l))),l=180*l/Math.PI,t.shapeType="path",t.shapeArgs={d:e.path||["M",-r,-o/2,"L",i,-o/2,n,-a/2,n,a/2,i,o/2,-r,o/2,"z"],translateX:c[0],translateY:c[1],rotation:l},t.plotX=c[0],t.plotY=c[1]})},drawPoints:function(){var o=this,t=o.yAxis.center,e=o.pivot,a=o.options,n=a.pivot,s=o.chart.renderer;k(o.points,function(t){var e=t.graphic,n=t.shapeArgs,i=n.d,r=p(a.dial,t.dial);e?(e.animate(n),n.d=i):t.graphic=s[t.shapeType](n).attr({stroke:r.borderColor||"none","stroke-width":r.borderWidth||0,fill:r.backgroundColor||"black",rotation:n.rotation}).add(o.group)}),e?e.animate({translateX:t[0],translateY:t[1]}):o.pivot=s.circle(0,0,S(n.radius,5)).attr({"stroke-width":n.borderWidth||0,stroke:n.borderColor||"silver",fill:n.backgroundColor||"black"}).translate(t[0],t[1]).add(o.group)},animate:function(t){var n=this;t||(k(n.points,function(t){var e=t.graphic;e&&(e.attr({rotation:180*n.yAxis.startAngleRad/Math.PI}),e.animate({rotation:t.shapeArgs.rotation},n.options.animation))}),n.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),x.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){x.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),S(e,!0)&&this.chart.redraw()},drawTracker:g&&g.drawTrackerPoint};f.gauge=n(f.line,g),e.boxplot=p(e.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">â—</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),f.boxplot=n(f.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:t,translate:function(){var n=this.yAxis,t=this.pointArrayMap;f.column.prototype.translate.apply(this),k(this.points,function(e){k(t,function(t){null!==e[t]&&(e[t+"Plot"]=n.translate(e[t],0,1,0,1))})})},drawPoints:function(){var e,n,i,r,o,a,s,l,h,u,c,p,d,f,g,m,y,v=this,t=v.points,x=v.options,_=v.chart.renderer,b=!1!==v.doQuartiles,w=parseInt(v.options.whiskerLength,10)/100;k(t,function(t){a=t.graphic,m=t.shapeArgs,s={},u={},c={},y=t.color||v.color,void 0!==t.plotY&&(e=t.pointAttr[t.selected?"selected":""],p=m.width,d=T(m.x),f=d+p,g=M(p/2),n=T(b?t.q1Plot:t.lowPlot),i=T(b?t.q3Plot:t.lowPlot),r=T(t.highPlot),o=T(t.lowPlot),s.stroke=t.stemColor||x.stemColor||y,s["stroke-width"]=S(t.stemWidth,x.stemWidth,x.lineWidth),s.dashstyle=t.stemDashStyle||x.stemDashStyle,u.stroke=t.whiskerColor||x.whiskerColor||y,u["stroke-width"]=S(t.whiskerWidth,x.whiskerWidth,x.lineWidth),c.stroke=t.medianColor||x.medianColor||y,c["stroke-width"]=S(t.medianWidth,x.medianWidth,x.lineWidth),m=s["stroke-width"]%2/2,y=["M",p=d+g+m,i,"L",p,r,"M",p,n,"L",p,o],b&&(m=e["stroke-width"]%2/2,p=T(p)+m,n=T(n)+m,i=T(i)+m,l=["M",d+=m,i,"L",d,n,"L",f+=m,n,"L",f,i,"L",d,i,"z"]),w&&(m=u["stroke-width"]%2/2,h=["M",p-g*w,r+=m,"L",p+g*w,r,"M",p-g*w,o+=m,"L",p+g*w,o]),m=c["stroke-width"]%2/2,m=M(t.medianPlot)+m,m=["M",d,m,"L",f,m],a?(t.stem.animate({d:y}),w&&t.whiskers.animate({d:h}),b&&t.box.animate({d:l}),t.medianShape.animate({d:m})):(t.graphic=a=_.g().add(v.group),t.stem=_.path(y).attr(s).add(a),w&&(t.whiskers=_.path(h).attr(u).add(a)),b&&(t.box=_.path(l).attr(e).add(a)),t.medianShape=_.path(m).attr(c).add(a)))})},setStackedPoints:t}),e.errorbar=p(e.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">â—</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),f.errorbar=n(f.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:f.arearange?f.arearange.prototype.drawDataLabels:t,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||f.column.prototype.getColumnMetrics.call(this)}}),e.waterfall=p(e.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",dataLabels:{inside:!0},states:{hover:{lineWidthPlus:0}}}),f.waterfall=n(f.column,{type:"waterfall",upColorProp:"fill",pointValKey:"y",translate:function(){var t,e,n,i,r,o,a,s,l,h,u=this.options,c=this.yAxis,p=u.threshold,d=u.stacking;for(f.column.prototype.translate.apply(this),a=s=p,e=0,t=(n=this.points).length;e<t;e++)i=n[e],o=this.processedYData[e],h=i.shapeArgs,l=(r=d&&c.stacks[(this.negStacks&&o<p?"-":"")+this.stackKey])?r[i.x].points[this.index+","+e]:[0,o],i.isSum?i.y=o:i.isIntermediateSum&&(i.y=o-s),r=b(a,a+i.y)+l[0],h.y=c.translate(r,0,1),i.isSum?(h.y=c.translate(l[1],0,1),h.height=Math.min(c.translate(l[0],0,1),c.len)-h.y):i.isIntermediateSum?(h.y=c.translate(l[1],0,1),h.height=Math.min(c.translate(s,0,1),c.len)-h.y,s=l[1]):(0!==a&&(h.height=0<o?c.translate(a,0,1)-h.y:c.translate(a,0,1)-c.translate(a-o,0,1)),a+=o),h.height<0&&(h.y+=h.height,h.height*=-1),i.plotY=h.y=M(h.y)-this.borderWidth%2/2,h.height=b(M(h.height),.001),i.yBottom=h.y+h.height,h=i.plotY+(i.negative?h.height:0),this.chart.inverted?i.tooltipPos[0]=c.len-h:i.tooltipPos[1]=h},processData:function(t){for(var e,n,i,r,o,a=this.options,s=this.yData,l=this.options.data,h=s.length,u=n=i=r=a.threshold||0,c=0;c<h;c++)o=s[c],e=l&&l[c]?l[c]:{},"sum"===o||e.isSum?s[c]=u:"intermediateSum"===o||e.isIntermediateSum?s[c]=n:(u+=o,n+=o),i=Math.min(u,i),r=Math.max(u,r);x.prototype.processData.call(this,t),this.dataMin=i,this.dataMax=r},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},getAttribs:function(){f.column.prototype.getAttribs.apply(this,arguments);var e=this,t=e.options,n=t.states,i=t.upColor||e.color,r=a.Color(i).brighten(.1).get(),o=p(e.pointAttr),t=e.upColorProp;o[""][t]=i,o.hover[t]=n.hover.upColor||r,o.select[t]=n.select.upColor||i,k(e.points,function(t){t.options.color||(0<t.y?(t.pointAttr=o,t.color=i):t.pointAttr=e.pointAttr)})},getGraphPath:function(){for(var t,e,n=this.data,i=n.length,r=this.options.lineWidth+this.borderWidth,o=M(r)%2/2,a=[],s=1;s<i;s++)e=n[s].shapeArgs,e=["M",(t=n[s-1].shapeArgs).x+t.width,t.y+o,"L",e.x,t.y+o],n[s-1].y<0&&(e[2]+=t.height,e[5]+=t.height),a=a.concat(e);return a},getExtremes:t,drawGraph:x.prototype.drawGraph}),e.polygon=p(e.scatter,{marker:{enabled:!1}}),f.polygon=n(f.scatter,{type:"polygon",fillGraph:!0,getSegmentPath:function(t){return x.prototype.getSegmentPath.call(this,t).concat("z")},drawGraph:x.prototype.drawGraph,drawLegendSymbol:a.LegendSymbolMixin.drawRectangle}),e.bubble=p(e.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"});var I,e=n(s,{haloPath:function(){return s.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)},ttBelow:!1});function E(t,e,n){t.call(this,e,n),this.chart.polar&&(this.closeSegment=function(t){var e=this.xAxis.center;t.push("L",e[0],e[1])},this.closedStacks=!0)}function R(t,e){var n,i=this.chart,r=this.options.animation,o=this.group,a=this.markerGroup,s=this.xAxis.center,l=i.plotLeft,h=i.plotTop;i.polar?i.renderer.isSVG&&(!0===r&&(r={}),e?(n={translateX:s[0]+l,translateY:s[1]+h,scaleX:.001,scaleY:.001},o.attr(n),a&&a.attr(n)):(o.animate(n={translateX:l,translateY:h,scaleX:1,scaleY:1},r),a&&a.animate(n,r),this.animate=null)):t.call(this,e)}f.bubble=n(f.scatter,{type:"bubble",pointClass:e,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,zoneAxis:"z",pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(t){var e=this.options.marker,n=S(e.fillOpacity,.5);return t=t||e.fillColor||this.color,t=1!==n?w(t).setOpacity(n).get("rgba"):t},convertAttribs:function(){var t=x.prototype.convertAttribs.apply(this,arguments);return t.fill=this.applyOpacity(t.fill),t},getRadii:function(t,e,n,i){for(var r,o=this.zData,a=[],s="width"!==this.options.sizeBy,l=e-t,h=0,u=o.length;h<u;h++)o[h]<t?a.push(n/2-1):(r=0<l?(o[h]-t)/l:.5,s&&0<=r&&(r=Math.sqrt(r)),a.push(_.ceil(n+r*(i-n))/2));this.radii=a},animate:function(t){var n=this.options.animation;t||(k(this.points,function(t){var e=t.graphic,t=t.shapeArgs;e&&t&&(e.attr("r",1),e.animate({r:t.r},n))}),this.animate=null)},translate:function(){var t,e,n,i=this.data,r=this.radii;for(f.scatter.prototype.translate.call(this),t=i.length;t--;)e=i[t],(n=r?r[t]:0)>=this.minPxSize/2?(e.shapeType="circle",e.shapeArgs={x:e.plotX,y:e.plotY,r:n},e.dlBox={x:e.plotX-n,y:e.plotY-n,width:2*n,height:2*n}):e.shapeArgs=e.plotY=e.dlBox=void 0},drawLegendSymbol:function(t,e){var n=v(t.itemStyle.fontSize)/2;e.legendSymbol=this.chart.renderer.circle(n,t.baseline-n,n).attr({zIndex:3}).add(e.legendGroup),e.legendSymbol.isMarker=!0},drawPoints:f.column.prototype.drawPoints,alignDataLabel:f.column.prototype.alignDataLabel,buildKDTree:t,applyZones:t}),r.prototype.beforePadding=function(){var e=this,t=this.len,n=this.chart,r=0,o=t,a=this.isXAxis,s=a?"xData":"yData",l=this.min,h={},u=_.min(n.plotWidth,n.plotHeight),c=Number.MAX_VALUE,p=-Number.MAX_VALUE,d=this.max-l,f=t/d,g=[];k(this.series,function(t){var i=t.options;!t.bubblePadding||!t.visible&&n.options.chart.ignoreHiddenSeries||(e.allowZoomOutside=!0,g.push(t),a&&(k(["minSize","maxSize"],function(t){var e=i[t],n=/%$/.test(e),e=v(e);h[t]=n?u*e/100:e}),t.minPxSize=h.minSize,t.maxPxSize=h.maxSize,(t=t.zData).length&&(c=S(i.zMin,_.min(c,_.max(m(t),!1===i.displayNegative?i.zThreshold:-Number.MAX_VALUE))),p=S(i.zMax,_.max(p,y(t))))))}),k(g,function(t){var e,n=t[s],i=n.length;if(a&&t.getRadii(c,p,t.minPxSize,t.maxPxSize),0<d)for(;i--;)"number"==typeof n[i]&&(e=t.radii[i],r=Math.min((n[i]-l)*f-e,r),o=Math.max((n[i]-l)*f+e,o))}),g.length&&0<d&&!this.isLog&&(f*=(t+r-(o-=t))/t,k([["min","userMin",r],["max","userMax",o]],function(t){void 0===S(e.options[t[0]],e[t[1]])&&(e[t[0]]+=t[2]/f)}))},I=x.prototype,r=l.prototype,I.searchPointByAngle=function(t){var e=this.chart,n=this.xAxis.pane.center,i=t.chartX-n[0]-e.plotLeft,e=t.chartY-n[1]-e.plotTop;return this.searchKDTree({clientX:180+Math.atan2(i,e)*(-180/Math.PI)})},i(I,"buildKDTree",function(t){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.kdDimensions=2),t.apply(this)}),I.toXY=function(t){var e=this.chart,n=t.plotX,i=t.plotY;t.rectPlotX=n,t.rectPlotY=i,i=this.xAxis.postTranslate(t.plotX,this.yAxis.len-i),t.plotX=t.polarPlotX=i.x-e.plotLeft,t.plotY=t.polarPlotY=i.y-e.plotTop,this.kdByAngle?((n=(n/Math.PI*180+this.xAxis.pane.options.startAngle)%360)<0&&(n+=360),t.clientX=n):t.clientX=t.plotX},f.area&&i(f.area.prototype,"init",E),f.areaspline&&i(f.areaspline.prototype,"init",E),f.spline&&i(f.spline.prototype,"getPointSpline",function(t,e,n,i){var r,o,a,s,l,h,u,c,p,d,f,g;return this.chart.polar?(o=n.plotX,a=n.plotY,s=e[i-1],g=e[i+1],this.connectEnds&&(s=s||e[e.length-2],g=g||e[1]),s&&g&&(l=(1.5*o+s.plotX)/2.5,h=(1.5*a+s.plotY)/2.5,u=(1.5*o+g.plotX)/2.5,c=(1.5*a+g.plotY)/2.5,p=Math.sqrt(Math.pow(l-o,2)+Math.pow(h-a,2)),d=Math.sqrt(Math.pow(u-o,2)+Math.pow(c-a,2)),f=Math.atan2(h-a,l-o),g=Math.atan2(c-a,u-o),g=Math.PI/2+(f+g)/2,Math.abs(f-g)>Math.PI/2&&(g-=Math.PI),l=o+Math.cos(g)*p,h=a+Math.sin(g)*p,u=o+Math.cos(Math.PI+g)*d,c=a+Math.sin(Math.PI+g)*d,n.rightContX=u,n.rightContY=c),i?(r=["C",s.rightContX||s.plotX,s.rightContY||s.plotY,l||o,h||a,o,a],s.rightContX=s.rightContY=null):r=["M",o,a]):r=t.call(this,e,n,i),r}),i(I,"translate",function(t){var e,n,i=this.chart;if(t.call(this),i.polar&&(this.kdByAngle=i.tooltip&&i.tooltip.shared,!this.preventPostTranslate))for(n=(e=this.points).length;n--;)this.toXY(e[n])}),i(I,"getSegmentPath",function(t,e){var n=this.points;return this.chart.polar&&!1!==this.options.connectEnds&&e[e.length-1]===n[n.length-1]&&null!==n[0].y&&(this.connectEnds=!0,e=[].concat(e,[n[0]])),t.call(this,e)}),i(I,"animate",R),f.column&&(l=f.column.prototype,i(l,"animate",R),i(l,"translate",function(t){var e,n,i,r,o=this.xAxis,a=this.yAxis.len,s=o.center,l=o.startAngleRad,h=this.chart.renderer;if(this.preventPostTranslate=!0,t.call(this),o.isRadial)for(r=(n=this.points).length;r--;)e=(i=n[r]).barX+l,i.shapeType="path",i.shapeArgs={d:h.symbols.arc(s[0],s[1],a-i.plotY,null,{start:e,end:e+i.pointWidth,innerR:a-S(i.yBottom,a)})},this.toXY(i),i.tooltipPos=[i.plotX,i.plotY],i.ttBelow=i.plotY>s[1]}),i(l,"alignDataLabel",function(t,e,n,i,r,o){var a;this.chart.polar?(a=e.rectPlotX/Math.PI*180,null===i.align&&(i.align=20<a&&a<160?"left":200<a&&a<340?"right":"center"),null===i.verticalAlign&&(i.verticalAlign=a<45||315<a?"bottom":135<a&&a<225?"top":"middle"),I.alignDataLabel.call(this,e,n,i,r,o)):t.call(this,e,n,i,r,o)})),i(r,"getCoordinates",function(t,r){var o=this.chart,a={xAxis:[],yAxis:[]};return o.polar?k(o.axes,function(t){var e=t.isXAxis,n=t.center,i=r.chartX-n[0]-o.plotLeft,n=r.chartY-n[1]-o.plotTop;a[e?"xAxis":"yAxis"].push({axis:t,value:t.translate(e?Math.PI-Math.atan2(i,n):Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),!0)})}):a=t.call(this,r),a})}(Highcharts);var mustOverride=function(t){throw t+" is abstract and must be overridden"},InheritanceException=function(t){this.message=t,this.name=this.constructor.name},__inherit=function(i,t){var r;if(t(i,function(t){if(r)throw new InheritanceException("must call the ctor function only once");for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);function n(){this.constructor=t}return n.prototype=i.prototype,t.prototype=new n,r=t}),!r)throw new InheritanceException("must call the ctor function with the class constructor");return r},__base=function(t){var n;if(t(function(t){if(n)throw new InheritanceException("must call the ctor function only once");function e(){this.constructor=t}return e.prototype={},t.prototype=new e,n=t}),!n)throw new InheritanceException("must call the ctor function with the class constructor");return n},Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,mike,tZa,uZa,aYa,bYa,CTa,TSa,USa,VSa,WSa,XSa;function vZa(t,e){this.serverTzData=t,this.isIntraday=e}!function(Michelangelo){var UnknownToolColor="#94b14b",__extends=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i},Rejection=__inherit(Error,function(i,t){t(function(t,e,n){i.call(this,e),this.name=t,this.detail=n})});Michelangelo.Rejection=Rejection;var Logger=__base(function(t){var t=t(function(){}),e="undefined"!=typeof console&&"function"==typeof console.log?console:{log:function(){},warn:function(){},error:function(){}};t.log=function(){e.log.apply(e,arguments)},t.warn=function(){e.warn.apply(e,arguments)},t.error=function(){e.error.apply(e,arguments)},t.debug=function(){Michelangelo.isDebugEnabled()&&e.log.apply(e,arguments)}});Michelangelo.Logger=Logger;var Marshal=__base(function(ctor){var klass=ctor(function(){});klass.stringify=function(t){var e,n,i="(function() { return {",r=0;for(e in t)t.hasOwnProperty(e)&&(r&&(i+=","),i+="function"==typeof(n=t[e])?"'"+e+"': "+n.toString():"'"+e+"': "+JSON.stringify(n),r+=1);return i+"}})()"},klass.objectify=function(str){return eval(str)}});Michelangelo.Marshal=Marshal;var Helpers=__base(function(t){t(function(){}).render=function(){throw new Error("Michelangelo.Helpers.render() has been deprecated.  Please use the new jquery syntax instead.\nSee https://github.dowjones.net/MarketData/Michelangelo/blob/master/docs/Jquery-Syntax.md")}});Michelangelo.Helpers=Helpers;var EventManager=__base(function(t){function i(){return r=r||new DirectEventManager}var r=null,t=t(function(){});t.prototype._fire=function(t,e,n){this!==r&&i()._fire(t,e,n)},t.prototype.createNotifier=function(){mustOverride("createNotifier")},t.prototype.on=function(){mustOverride("on")},t.on=function(t,e){return i().on(t,e)}});Michelangelo.EventManager=EventManager;var Notifier=__base(function(t){t=t(function(t,e){this.__notify=t,this.__source=e});t.prototype.notify=function(t,e,n){this.__notify(t,e,this.__source||n)};var e=new t(function(){});t.Null=function(){return e}});Michelangelo.Notifier=Notifier;var DirectEventManager=__inherit(EventManager,function(e,t){var r=1,t=t(function(t){e.call(this),this.__callbacks={},this.__wrapper=t||function(t){t()}});t.prototype.on=function(e,t){var n=this;n.__callbacks[e]||(n.__callbacks[e]={});var i=r++;return this.__callbacks[e][i]=t,function(){var t=n.__callbacks[e];t&&delete t[i]}},t.prototype.createNotifier=function(t){var i=this;return new Notifier(function(t,e,n){i._fire(t,e,n)},t)},t.prototype._fire=function(t,n,i){var r=this;this.__callbacks[t]&&$.each(this.__callbacks[t],function(t,e){r.__wrapper(function(){e(n,i)})}),e.prototype._fire.call(this,t,n,i)}});Michelangelo.DirectEventManager=DirectEventManager;var Environment=__base(function(t){var n=t(function(t){this.__key=t.key||"Custom",this.__name=t.name||"Custom",this.__url=t.url,this.__apiRootUrl=t.apiRootUrl,this.__uiRootUrl=t.uiRootUrl,this.__canUseCustomHeaders=t.canUseCustomHeaders,this.__canUsePost=t.canUsePost,this.__maxGetContentLength=t.maxGetContentLength||1500});n.prototype.name=function(){return this.__name},n.prototype.url=function(){return this.__url},n.prototype.apiRootUrl=function(){return this.__apiRootUrl},n.prototype.uiRootUrl=function(){return this.__uiRootUrl},n.prototype.recentChartsUrl=function(){return this.__recentChartsUrl},n.prototype.canUseCustomHeaders=function(){return this.__canUseCustomHeaders&&!window.XDomainRequest},n.prototype.canUsePost=function(){return this.__canUsePost},n.prototype.key=function(){return this.__key},n.prototype.postPresentationUrl=function(){return this.__apiRootUrl+"/presentation"},n.prototype.presentationDefinitionUrl=function(t){return this.__apiRootUrl+"/definition/"+t},n.prototype.presentationUrl=function(t){return this.__apiRootUrl+"/presentation/"+t},n.prototype.presentationListUrl=function(t){return this.__apiRootUrl+"/user/presentations"+(t?"/list":"")},n.prototype.rawDataParseUrl=function(){return this.__apiRootUrl+"/rawdata/parse"},n.prototype.maxGetContentLength=function(){return this.__maxGetContentLength};function e(){var t="http://"+$(location).attr("host");return""===$(location).attr("port")&&(t+="/Michelangelo.Service.WebHost"),t}var t=n,i=[new t({key:"MuxPublic",name:"Mux (public, production)",url:"http://api.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"http://api.wsj.net/api/michelangelo",uiRootUrl:"http://api.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"MuxStaging",name:"Mux (public, staging)",url:"http://api-staging.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"http://api-staging.wsj.net/api/michelangelo",uiRootUrl:"http://api-staging.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"MuxStagingBarrons",name:"Mux (public, staging, barrons)",url:"https://api-staging.barrons.com/api/michelangelo/timeseries/history",apiRootUrl:"https://api-staging.barrons.com/api/michelangelo",uiRootUrl:"https://api-staging.barrons.com/api/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"MuxPublicBarrons",name:"Mux (public, production, barrons)",url:"https://api.barrons.com/api/michelangelo/timeseries/history",apiRootUrl:"https://api.barrons.com/api/michelangelo",uiRootUrl:"https://api.barrons.com/api/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"MuxLocal",name:"Mux (local)",url:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/timeseries/history",apiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo",uiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"MuxPublicSecure",name:"Mux (public, production, secure)",url:"https://api-secure.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"https://api-secure.wsj.net/api/michelangelo",uiRootUrl:"https://api-secure.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"MuxStagingSecure",name:"Mux (public, staging, secure)",url:"https://api-staging-secure.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"https://api-staging-secure.wsj.net/api/michelangelo",uiRootUrl:"https://api-staging-secure.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"DirectDev",name:"Direct (internal, dev)",url:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/api/timeseries/history",apiRootUrl:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/api/",uiRootUrl:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/ui/",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"Local",name:"Michelangelo (local)",url:e()+"/api/timeseries/history",apiRootUrl:e()+"/api",uiRootUrl:e()+"/ui",canUseCustomHeaders:!0,canUsePost:!0}),new t({key:"DowJonesDataServicesPublic",name:"DJDS (public)",url:"https://services.dowjones.com/michelangelorest.svc/v1/timeSeries",apiRootUrl:"",uiRootUrl:""}),new t({key:"DowJonesDataServicesPublicStaging",name:"DJDS (public, staging)",url:"https://services-staging.dowjones.com/michelangelorest.svc/v1/timeSeries",apiRootUrl:"",uiRootUrl:""}),new t({key:"DowJonesDataServicesLocal",name:"DJDS (local)",url:"http://"+$(location).attr("host")+"/DowJones.DataServices.WebHost/public/michelangelorest.svc/v1/timeseries",apiRootUrl:"",uiRootUrl:""})],r={};$.each(i,function(t,e){r[e.key()]=e}),n.getWellKnownEnvironments=function(){return $.extend([],i)},n.getWellKnownEnvironment=function(t){return r[t]};function o(){return n.getWellKnownEnvironment("MuxPublic")}var a=o();n.ambient=function(t){if(0===arguments.length)return a;if(!t)return a=o(),n;if("string"===$.type(t)){var e=n.getWellKnownEnvironment(t);if(e)return a=e,Logger.debug("Michelangelo ambient environment set to '"+t+"': "+e.name()),n}return t instanceof n?(a=t,Logger.debug("Michelangelo ambient environment set directly: "+t.name())):Logger.error("Michelangelo ambient environment was not changed to '"+t+"'. Valid values are: "+$.map(i,function(t){return"\r\n  "+t.key()+": "+t.name()}).join()+"\r\nor a custom environment definition."),n},n.select=function(t){return 0!==arguments.length&&t?t instanceof n?t:n.getWellKnownEnvironment(t)||(Logger.warn("Could not select an environment for input '"+t+"'; returning ambient environment."),n.ambient()):n.ambient()}});Michelangelo.Environment=Environment;var Entitlement=__base(function(t){var e=null,n=t(function(t){if("string"!==$.type(t))throw"token must be a string";this.__token=t});n.prototype.token=function(){return this.__token},n.prototype.ckey=function(){return this.token()?this.token().substr(0,10):""},n.ambient=function(t){return 0===arguments.length?e:(t?"string"===$.type(t)?(e=new Entitlement(t),Logger.debug("Michelangelo ambient entitlement set to '"+e.token()+"'")):t instanceof n?(e=t,Logger.debug("Michelangelo ambient entitlement set to '"+e.token()+"'")):Logger.error("Michelangelo ambient entitlement was not changed to '"+t+"'. Value must be a token string or an Entitlement instance"):e=n.__defaultEntitlement(),n)},n.select=function(t){return t instanceof n?t:"string"===$.type(t)?new Entitlement(t):n.ambient()},n.__defaultEntitlement=function(){return new n("")},e=n.__defaultEntitlement()});Michelangelo.Entitlement=Entitlement;var Ajax=__base(function(t){t(function(){}).send=function(o,a,t,e,s){try{s=Math.max(0,+s||0);var l=0;a=$.extend(!0,{data:{},params:{},headers:{}},a),t=Environment.select(t),"function"==typeof o?o=o(t):"function"==typeof t[o]&&(o=t[o].call(t));var n=Entitlement.select(e).token();a.params.ckey=n.substr(0,10),t.canUseCustomHeaders()?a.headers["Dylan2010.EntitlementToken"]=n:a.params.entitlementToken=n,"GET"===a.type&&(a.params=$.extend(a.data,a.params),delete a.data);var i=$.map(a.params,function(t,e){return e+"="+encodeURIComponent(t)}).join("&");i&&(o=o+(-1===o.indexOf("?")?"?":"&")+i);function h(t,e,n){try{if(l++<=s)return $.ajax(o,a).fail(function(t,e,n){h(t,0,n)});var i="";if(t.responseText)try{var r=JSON.parse(t.responseText);r.Message&&(i=r.Message,r.ExceptionMessage&&(i+="  (with exception: "+r.ExceptionMessage+")"))}catch(t){}return i||"string"!==$.type(n)||(i=n,n=null),s&&(i+=" (after "+(s+1)+" attempts)"),$.Deferred().reject(new Rejection("AJAX error",i,n))}catch(t){return $.Deferred().reject(new Rejection("AJAX exception",t.message,t))}}return h(null,0,"")}catch(o){return $.Deferred().reject(new Rejection("AJAX exception",o.message,o))}}}),Position={above:0,below:1,onTop:2,overlay:3,compare:4};Michelangelo.Position=Position;var MetaData=(klass=function(){},klass.getLocalRoot=function(){var t="http://"+$(location).attr("host");return""===$(location).attr("port")&&(t+="/Michelangelo.Service.WebHost"),t},klass.AxisTypes=[{name:"Linear",value:"linear"},{name:"Log",value:"logarithmic"}],klass.SeriesChartTypes=[{name:"Line",value:"line"},{name:"Candlesticks",value:"candlestick"},{name:"OHLC",value:"ohlc"},{name:"Area",value:"area"},{name:"Column",value:"column"},{name:"Smoothed",value:"spline"},{name:"Scatter",value:"scatter"},{name:"AreaRange",value:"arearange",special:!0}],klass.DataFormats=[{name:"Auto",value:"Auto"},{name:"CSV",value:"CSV"},{name:"TSV",value:"TSV"}],klass.TimeFrames=[{name:"1 hour",value:"PT1H"},{name:"2 hours",value:"PT2H"},{name:"8 hours",value:"PT8H"},{name:"1 day",value:"D1"},{name:"2 days",value:"D2"},{name:"5 days",value:"D5"},{name:"10 days",value:"D10"},{name:"1 month",value:"P1M"},{name:"3 months",value:"P3M"},{name:"6 months",value:"P6M"},{name:"1 Year",value:"P1Y"},{name:"2 Years",value:"P2Y"},{name:"3 Years",value:"P3Y"},{name:"5 Years",value:"P5Y"},{name:"10 Years",value:"P10Y"},{name:"Yesterday",value:"D1-1"},{name:"All",value:"all"},{name:"YTD",value:"YTD"},{name:"Custom",value:"custom"}],klass.Steps=[{name:"1 minute",value:"PT1M"},{name:"5 minutes",value:"PT5M"},{name:"10 minutes",value:"PT10M"},{name:"15 minutes",value:"PT15M"},{name:"1 hour",value:"PT1H"},{name:"2 hours",value:"PT2H"},{name:"1 day",value:"P1D"},{name:"2 days",value:"P2D"},{name:"3 days",value:"P3D"},{name:"4 days",value:"P4D"},{name:"5 days",value:"P5D"},{name:"Weekly",value:"P7D"},{name:"Monthly",value:"P1M"},{name:"Quarterly",value:"P3M"},{name:"Yearly",value:"P1Y"}],klass.TickerDataPointsList=[{name:"Last",value:"Last"},{name:"Open",value:"Open"},{name:"High",value:"High"},{name:"Low",value:"Low"},{name:"Hybrid",value:"Hybrid"},{name:"Volume",value:"Volume"},{name:"% Change",value:"PercentChange"}],klass.AnimationEasings=["linear","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"],klass.IndicatorPositionList=[{name:"Above",value:Michelangelo.Position.above},{name:"Below",value:Michelangelo.Position.below},{name:"OnTop",value:Michelangelo.Position.onTop},{name:"Overlay",value:Michelangelo.Position.overlay},{name:"Compare",value:Michelangelo.Position.compare}],klass.IndicatorHeightsList=[{name:"Teeny",value:50},{name:"Small",value:100},{name:"Medium",value:200},{name:"Large",value:300},{name:"X-Large",value:400},{name:"Huge",value:500}],klass.AdlIndicator={name:"Accumulation Distribution Line (ADL)",serverKind:"AccumulationDistributionLine",abbreviation:"ADL"},klass.AroonIndicator={name:"Aroon Indicator",serverKind:"AroonIndicator",abbreviation:"Aroon",parameters:[{name:"Period",defaultValue:"25",includeInLabel:!0}]},klass.AverageTrueRange={name:"Average True Range (ATR)",serverKind:"AverageTrueRange",abbreviation:"ATR",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.BollingerBandsIndicator={name:"Bollinger Bands",serverKind:"BollingerBands",isOverlay:!0,abbreviation:"BB",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"Multiplier",defaultValue:"2.0",includeInLabel:!0}]},klass.CommodityChannelIndex={name:"Commodity Channel Index (CCI)",serverKind:"CommodityChannelIndex",abbreviation:"CCI",parameters:[{name:"Period",defaultValue:"20",includeInLabel:!0}]},klass.CompetitorComparison={name:"Competitor Comparison (Beta)",serverKind:"CompetitorComparison",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0}]},klass.DividendsIndicator={name:"Dividends",serverKind:"DividendEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},klass.DmiAndAdx={name:"DMI/ADX",serverKind:"AverageDirectionalIndex",abbreviation:"DMI/ADX",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.EarningsIndicator={name:"Earnings",serverKind:"EarningsEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0},{name:"YearOverYear",defaultValue:!1,inputType:"checkbox",clientOnly:!1}]},klass.ExponentialMovingAverage={name:"Exponential Moving Average",serverKind:"ExponentialMovingAverage",isOverlay:!0,abbreviation:"EMA",parameters:[{name:"Period",isList:!0,defaultValue:"9, 18",includeInLabel:!0}]},klass.FundComparison={name:"Fund Comparison (Beta)",serverKind:"FundComparison",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0},{name:"NumFunds",defaultValue:"5"},{name:"FundType",inputType:"pickList",defaultValue:"ETF",choices:["ETF","MutualFund","Both"]}]},klass.HorizontalLineIndicator={name:"Horizontal Line",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"Value",defaultValue:"10"}]},klass.InsiderTransactions={name:"Insider Transactions (beta)",serverKind:"InsiderTransactions",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},klass.KeltnerChannels={name:"Keltner Channels",serverKind:"KeltnerChannels",isOverlay:!0,abbreviation:"KELT",parameters:[{name:"EMA Period",serverName:"EmaPeriod",defaultValue:"20",includeInLabel:!0},{name:"Multiplier",defaultValue:"2.0",includeInLabel:!0},{name:"ATR Period",serverName:"AtrPeriod",defaultValue:"10",includeInLabel:!0}]},klass.MacdIndicator={name:"MACD",serverKind:"MovingAverageConvergenceDivergence",parameters:[{name:"EMA Period #1",serverName:"EMA1",defaultValue:"12",includeInLabel:!0},{name:"EMA Period #2",serverName:"EMA2",defaultValue:"26",includeInLabel:!0},{name:"Signal Line",serverName:"SignalLine",defaultValue:"9",includeInLabel:!0}]},klass.Momentum={name:"Momentum",serverKind:"Momentum",parameters:[{name:"Period",defaultValue:"12",includeInLabel:!0},{name:"ChartType",inputType:"chartType",defaultValue:"column",clientOnly:!0}]},klass.MoneyFlowIndex={name:"Money Flow Index",serverKind:"MoneyFlowIndex",abbreviation:"MFI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.MovingAverageEnvelopes={name:"Moving Average Envelopes",serverKind:"MovingAverageEnvelopes",isOverlay:!0,abbreviation:"ENV",parameters:[{name:"Period",defaultValue:"9",includeInLabel:!0},{name:"Percent",defaultValue:"0.02",includeInLabel:!0}]},klass.NewsDensity={name:"News Density",serverKind:"NewsDensity",excludeFromLabel:!0,parameters:[{name:"DocTypes",inputType:"docTypesList",isList:"true"},{name:"Significance Flag",inputType:"pickList",defaultValue:"None",choices:["Significant","Prominent","PassingMention","None"]}]},klass.DocTypes=[{name:" ",value:" "},{name:"MarketWatch Common",value:"90, 91, 92, 99, 103, 53, 3"},{name:"WSJDN",value:"424, 425, 463, 115, 25, 421, 449, 473"}],klass.NewsWiresCorporate={name:"NewsWires - ENF - Corporate",serverKind:"NewsWiresCorporate",excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"scatter",clientOnly:!0},{name:"EnfNames",isList:!0,inputType:"biglist",defaultValue:"REV_CUR,PROFIT_CUR,SALES_CUR"}]},klass.OnBalanceVolume={name:"On Balance Volume",serverKind:"OnBalanceVolume"},klass.OpenHighLowLines={name:"Open/High/Low Lines",serverKind:"OpenHighLowLines",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ShowOpen",inputType:"checkbox",defaultValue:!0},{name:"ShowHigh",inputType:"checkbox",defaultValue:!0},{name:"ShowLow",inputType:"checkbox",defaultValue:!0},{name:"ShowPriorClose",inputType:"checkbox",defaultValue:!1},{name:"Show52WeekHigh",inputType:"checkbox",defaultValue:!1},{name:"Show52WeekLow",inputType:"checkbox",defaultValue:!1}]},klass.ParabolicSAR={name:"Parabolic SAR",serverKind:"ParabolicSAR",isOverlay:!0,abbreviation:"SAR",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"line",clientOnly:!0},{name:"AF Begin",serverName:"initial",defaultValue:"0.02",includeInLabel:!0},{name:"AF Increment",serverName:"step",defaultValue:"0.02",includeInLabel:!0},{name:"AF Maximum",serverName:"maximumStep",defaultValue:"0.2",includeInLabel:!0}]},klass.PriceChannels={name:"Price Channels",serverKind:"PriceChannels",abbreviation:"CHAN",isOverlay:!0,parameters:[{name:"Period",defaultValue:"20",includeInLabel:!0}]},klass.PriceToEarningsRanges={name:"P/E Ranges",serverKind:"PriceToEarningsRanges",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"ohlc",clientOnly:!0}]},klass.PriceToEarningsRatio={name:"P/E Ratio",serverKind:"PriceToEarningsRatio"},klass.ProjectedInstrumentSeries={name:"Projected Instrument Series",serverKind:"ProjectedInstrumentSeries",isOverlay:!0,abbreviation:"Projected",parameters:[{name:"TimeFrame",defaultValue:"14",includeInLabel:!0},{name:"Confidence",defaultValue:"90",includeInLabel:!0},{name:"Simulations",defaultValue:"100",includeInLabel:!0},{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0}]},klass.RateOfChange={name:"Rate Of Change (ROC)",serverKind:"RateOfChange",abbreviation:"ROC",parameters:[{name:"Period",defaultValue:"12",includeInLabel:!0}]},klass.RelativeStrengthIndex={name:"Relative Strength Index",serverKind:"RelativeStrengthIndex",abbreviation:"RSI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.RollingDividend={name:"Rolling Dividend",serverKind:"RollingDividend",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"line",clientOnly:!0}]},klass.SimpleMovingAverage={name:"Simple Moving Average",abbreviation:"SMA",serverKind:"SimpleMovingAverage",isOverlay:!0,parameters:[{name:"Period",isList:!0,defaultValue:"9, 18",includeInLabel:!0}]},klass.SplitsIndicator={name:"Splits",serverKind:"SplitEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},klass.StochasticOscillatorFast={name:"Stochastic Oscillator (Fast)",serverKind:"StochasticOscillatorFast",abbreviation:"Fast STO",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"D SMA Period",serverName:"DSMAPeriod",defaultValue:"3",includeInLabel:!0}]},klass.StochasticOscillatorSlow={name:"Stochastic Oscillator (Slow)",serverKind:"StochasticOscillatorSlow",abbreviation:"Slow STO",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"K Smoothing Period",serverName:"KSMAPeriod",defaultValue:"3",includeInLabel:!0},{name:"D SMA Period",serverName:"DSMAPeriod",defaultValue:"3",includeInLabel:!0}]},klass.TotalReturn={name:"Total Return",serverKind:"TotalReturn",isOverlay:!0},klass.TrueStrengthIndex={name:"True Strength Index (TSI)",serverKind:"TrueStrengthIndex",abbreviation:"TSI",parameters:[{name:"Period1",defaultValue:"25",includeInLabel:!0},{name:"Period2",defaultValue:"13",includeInLabel:!0}]},klass.UlcerIndex={name:"Ulcer Index",serverKind:"UlcerIndex",abbreviation:"UI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.UltimateOscillator={name:"Ultimate Oscillator",serverKind:"UltimateOscillator",abbreviation:"ULT",parameters:[{name:"PeriodShort",defaultValue:"7",includeInLabel:!0},{name:"PeriodMiddle",defaultValue:"14",includeInLabel:!0},{name:"PeriodLong",defaultValue:"28",includeInLabel:!0}]},klass.VolatilityFast={name:"Volatility (Fast)",serverKind:"VolatilityFast"},klass.VolatilitySlow={name:"Volatility (Slow)",serverKind:"VolatilitySlow",parameters:[{name:"Period",defaultValue:"21",includeInLabel:!0}]},klass.VolumeAccumulation={name:"Volume Accumulation",serverKind:"VolumeAccumulation"},klass.IndicatorList=[klass.VolumeIndicator={name:"Volume",serverKind:"Volume",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"column",clientOnly:!0}]},klass.AdlIndicator,klass.AroonIndicator,klass.AverageTrueRange,klass.BollingerBandsIndicator,klass.CommodityChannelIndex,klass.CompetitorComparison,klass.DividendsIndicator,klass.DmiAndAdx,klass.EarningsIndicator,klass.ExponentialMovingAverage,klass.FundComparison,klass.KeltnerChannels,klass.HorizontalLineIndicator,klass.InsiderTransactions,klass.MacdIndicator,klass.Momentum,klass.MoneyFlowIndex,klass.MovingAverageEnvelopes,klass.NewsDensity,klass.NewsWiresCorporate,klass.OnBalanceVolume,klass.OpenHighLowLines,klass.ParabolicSAR,klass.PriceChannels,klass.PriceToEarningsRanges,klass.PriceToEarningsRatio,klass.ProjectedInstrumentSeries,klass.RateOfChange,klass.RelativeStrengthIndex,klass.RollingDividend,klass.SimpleMovingAverage,klass.SplitsIndicator,klass.StochasticOscillatorFast,klass.StochasticOscillatorSlow,klass.TotalReturn,klass.TrueStrengthIndex,klass.UlcerIndex,klass.UltimateOscillator,klass.VolatilityFast,klass.VolatilitySlow,klass.VolumeAccumulation,klass.VolumePlus={name:"Volume+",serverKind:"VolumePlus",parameters:[{name:"Period",defaultValue:"50",includeInLabel:!0}]},klass.VortexIndicator={name:"Vortex Indicator",serverKind:"VortexIndicator",abbreviation:"VTX",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.WilliamsPercentR={name:"Williams %R",serverKind:"WilliamsPercentR",abbreviation:"Wm%R",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.Yield={name:"Yield",serverKind:"Yield",excludeFromLabel:!0}],klass.EndPoints={Local:{name:"Michelangelo (local)",url:klass.getLocalRoot()+"/api/timeseries/history",stashUrl:klass.getLocalRoot()+"/api/stash/timeseries",recentChartsUrl:klass.getLocalRoot()+"/api/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxLocal:{name:"Mux (local)",url:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/timeseries/history",stashUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/stash/timeseries",recentChartsUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxPublic:{name:"Mux (public)",url:"http://api.wsj.net/api/michelangelo/timeseries/history",stashUrl:"http://api.wsj.net/api/michelangelo/stash/timeseries",recentChartsUrl:"http://api.wsj.net/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxStaging:{name:"Mux (staging)",url:"http://api-staging.wsj.net/api/michelangelo/timeseries/history",stashUrl:"http://api-staging.wsj.net/api/michelangelo/stash/timeseries",recentChartsUrl:"http://api-staging.wsj.net/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},DowJonesDataServicesLocal:{name:"DJDS (local)",url:"http://"+$(location).attr("host")+"/DowJones.DataServices.WebHost/public/michelangelorest.svc/v1/timeseries",stashUrl:"",recentChartsUrl:""},DowJonesDataServicesPublic:{name:"DJDS (public)",url:"https://services.dowjones.com/michelangelorest.svc/v1/timeSeries",stashUrl:"",recentChartsUrl:""},DowJonesDataServicesPublicStaging:{name:"DJDS (public, staging)",url:"http://services-staging.dowjones.com/michelangelorest.svc/v1/timeSeries",stashUrl:"",recentChartsUrl:""}},klass.EndPointList=[klass.EndPoints.DowJonesDataServicesPublic,klass.EndPoints.DowJonesDataServicesPublicStaging,klass.EndPoints.DowJonesDataServicesLocal,klass.EndPoints.MuxLocal,klass.EndPoints.MuxStaging,klass.EndPoints.MuxPublic,klass.EndPoints.Local],klass),klass;Michelangelo.MetaData=MetaData;var Annotation=__base(function(t){t=t(function(t){t?(_.assign(this,_.cloneDeep(t)),(t=this.data)&&(delete this.data,_.defaults(this,t))):this.id="a",this.type=this.constructor.type()});t.type=function(){throw'must override "type" method on Annotation-derived types'},t.prototype.idify=function(t){return this.makeId!==t&&(this.makeId=t,this.id="a"+t()),this};var n={};t.create=function(t){var e=n[t.type||""];return e?new e(t):null},t._register=function(t){n[t.type()]=t}});Michelangelo.Annotation=Annotation;var IndicatorParameter=function(t){this.value=void 0,this.metaData=t};Michelangelo.IndicatorParameter=IndicatorParameter;var Indicator=__base(function(t){var i=t(function(t){var e,n=this;this.annotations=[],t.seriesId?($.extend(this,t),e=$.map(this.annotations,function(t){return Annotation.create(t)}),t instanceof i?this.annotations=e:(this.annotations=[],$.each(e,function(t,e){n.addAnnotation(e)}))):(this.seriesId="i",this.height=MetaData.IndicatorHeightsList[1].value,this.showAxisTitle=!0,this.axisType="linear",t.isOverlay?this.position=Position.overlay:t.isEvent?this.position=Position.onTop:this.position=Position.below,this.metaData=t,this.buildParametersFromMetaData())});i.prototype.idify=function(n){return this.makeId!==n&&(this.makeId=n,this.seriesId="i"+n(),$.each(this.annotations,function(t,e){e.idify(n)})),this},i.prototype.addAnnotation=function(t){this.annotations.push(t.idify(this.makeId))},i.prototype.getAxisTitle=function(t){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:t&&t.CommonName&&0<t.CommonName.length?t.CommonName:this.metaData.name},i.prototype.buildParametersFromMetaData=function(){var i;this.parameters=[],this.metaData.parameters&&$.each((i=this).metaData.parameters,function(t,e){var n=new Michelangelo.IndicatorParameter(e);e.defaultValue&&(n.value=e.defaultValue),i.parameters.push(n)})}});Michelangelo.Indicator=Indicator;var SeriesParameter=function(t,e,n){this.name=t,this.inputType=e,this.value=n};Michelangelo.SeriesParameter=SeriesParameter;var Series=__base(function(t){var r=t(function(t){var e,n,i=this;this.seriesKind="unknown",this.chartType="line",this.showAxisTitle=!0,this.axisType="linear",this.position=Michelangelo.Position.onTop,this.height=Michelangelo.MetaData.IndicatorHeightsList[3].value,this.canHaveIndicators=!1,this.canEditData=!1,this.desiredDataPoint="Last",this.djid=null,this.tooltipDataPoints=[],this.customToolTipData={},this.parameters=[],this.indicators=[],this.annotations=[],t?($.extend(!0,this,t),e=$.map(this.indicators,function(t){return new Indicator(t)}),n=$.map(this.annotations,function(t){return Annotation.create(t)}),t instanceof r?(this.indicators=e,this.annotations=n):(this.indicators=[],$.each(e,function(t,e){i.addIndicator(e)}),this.annotations=[],$.each(n,function(t,e){i.addAnnotation(e)}))):this.seriesId="s"});r.prototype.idify=function(n){return this.makeId!==n&&(this.makeId=n,this.seriesId="s"+n(),$.each(this.indicators,function(t,e){e.idify(n)}),$.each(this.annotations,function(t,e){e.idify(n)})),this},r.prototype.addIndicator=function(t){this.indicators.push(t.idify(this.makeId))},r.prototype.addAnnotation=function(t){this.annotations.push(t.idify(this.makeId))},r.prototype.addParameter=function(t,e,n){this.parameters.push(new SeriesParameter(t,e,n))},r.prototype.addToRequest=function(){return null},r.prototype.getGuiTitle=function(){return"Generic Series"},r.prototype.getAxisTitle=function(t){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:this.getName(t)},r.prototype.getName=function(){return"Generic Series"},r.prototype.getFieldNames=function(){return[]},r.prototype.recommendedChartType=function(){return""},r.prototype.canPickDataPoint=function(){return!1},r.prototype.canAddExtraTooltips=function(){return!1},r.prototype.canAnnotate=function(){return!0}});Michelangelo.Series=Series;var TickerSeries=(ioa=Series,__extends(joa,ioa),joa.prototype.setTicker=function(t){this.parameters[0].value=t},joa.prototype.getTicker=function(){return this.parameters[0].value},joa.prototype.getGuiTitle=function(){var t=this.getTicker(),e="Ticker Series";return t&&(e+=": "+t),e},joa.prototype.getAxisTitle=function(t){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:t&&t.CommonName&&0<t.CommonName.length?t.CommonName:t?t.CountryCode&&0<t.CountryCode.length?t.CountryCode+":"+t.Ticker:t.Ticker:"Ticker Series"},joa.prototype.getName=function(t){return t?t.CountryCode&&0<t.CountryCode.length?t.CountryCode+":"+t.Ticker:t.Ticker:"Ticker Series"},joa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return e.parseAndSetTicker(this.getTicker(),this.djid)?(e.Kind="Ticker",e.SeriesId=this.seriesId,e.DataTypes=this.getFieldNames(null),e.HideSeries=!1,1<this.parameters.length&&(e.HideSeries=this.parameters[1].value),this.tooltipDataPoints&&0<this.tooltipDataPoints.length&&(e.ToolTipDataTypes=this.tooltipDataPoints),t.Series.push(e),e):null},joa.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},joa.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},joa.prototype.canAddExtraTooltips=function(){return!0},joa),ioa;function joa(t,e){ioa.call(this,t,e),t||(this.seriesKind="TickerSeries",this.chartType="candlestick",this.canHaveIndicators=!0,this.addParameter("Ticker","ticker"),this.addParameter("HideSeries","checkbox"))}Michelangelo.TickerSeries=TickerSeries;var SpreadsheetSeries=(toa=Series,__extends(uoa,toa),uoa.prototype.setKey=function(t){this.parameters[0].value=t},uoa.prototype.getKey=function(){return this.parameters[0].value},uoa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.getKey()&&0<this.getKey().length?(e.Kind="Spreadsheet",e.SeriesId=this.seriesId,e.Key=this.getKey(),e.Dialect=this.parameters[1].value?"Google":"URL",t.Series.push(e),e):null},uoa.prototype.getGuiTitle=function(){var t=this.getKey(),e="Spreadsheet";return t&&(e+=": "+(t=30<t.length?"..."+t.substring(t.length-27):t)),e},uoa.prototype.getName=function(t){return t&&t.CommonName&&0<t.CommonName.length?t.CommonName:"Spreadsheet"},uoa.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},uoa),toa;function uoa(t,e){toa.call(this,t,e),t||(this.seriesKind="SpreadsheetSeries",this.addParameter("Name","spreadsheet","Simple series"),this.addParameter("Google","checkbox",!0))}Michelangelo.SpreadsheetSeries=SpreadsheetSeries;var NewsWiresCorporateSeries=(Eoa=Series,__extends(Foa,Eoa),Foa.prototype.setTicker=function(t){this.parameters[0].value=t},Foa.prototype.getTicker=function(){return this.parameters[0].value},Foa.prototype.getEnfName=function(){return this.parameters[1].value},Foa.prototype.setEnfName=function(t){this.parameters[1].value=t},Foa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return e.parseAndSetTicker(this.getTicker())?(e.Kind="NewsWiresCorporate",e.SeriesId=this.seriesId,e.DataTypes=[this.getEnfName()],t.Series.push(e),e):null},Foa.prototype.getGuiTitle=function(){var t=this.getTicker(),e=this.getEnfName(),n="NewsWires Corporate Series";return t&&(n+=": "+t),e&&(n+=", "+e),n},Foa.prototype.getName=function(t){return t?t.Ticker+", "+t.DesiredDataPoints[0]:"NewsWires Corporate Series"},Foa.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},Foa),Eoa;function Foa(t,e){Eoa.call(this,t,e),t||(this.seriesKind="NewsWiresCorporateSeries",this.chartType="column",this.addParameter("Ticker","ticker"),this.addParameter("ENF Name","enfName","REV_CUR"))}Michelangelo.NewsWiresCorporateSeries=NewsWiresCorporateSeries;var SovereignDebtSeries=(Roa=Series,__extends(Soa,Roa),Soa.prototype.getCountryCode=function(){return this.parameters[0].value},Soa.prototype.setCountryCode=function(t){this.parameters[0].value=t},Soa.prototype.getGuiTitle=function(){var t=this.getCountryCode(),e="Sovereign Debt History Series";return t&&(e+=": "+t),e},Soa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries,n=this.getCountryCode();return n&&0<n.length?(e.Kind="SovereignDebt",e.Key=n,e.SeriesId=this.seriesId,e.DataTypes=this.getFieldNames(null),t.Series.push(e),e):null},Soa.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},Soa.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},Soa.prototype.getName=function(t){return t?t.CommonName&&0<t.CommonName.length?t.CommonName:t.Ticker:"Sov Debt Series"},Soa.prototype.getAxisTitle=function(){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:this.getCountryCode().toUpperCase()+" Sovereign Debt"},Soa),Roa;function Soa(t,e){Roa.call(this,t,e),t||(this.seriesKind="SovereignDebtSeries",this.chartType="line",this.addParameter("Country Code","countryCode"))}Michelangelo.SovereignDebtSeries=SovereignDebtSeries;var textPhraseSeries=(apa=Series,__extends(bpa,apa),bpa.prototype.getPhrases=function(){return this.parameters[0].value},bpa.prototype.setPhrases=function(t){this.parameters[0].value=t},bpa.prototype.getGuiTitle=function(){return"Text Phrase Series"},bpa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.getPhrases()&&0<this.getPhrases().length?(e.Kind="TextPhrases",e.SeriesId=this.seriesId,e.Key=this.getPhrases(),t.Series.push(e),e):null},bpa.prototype.getName=function(t){return t&&t.CommonName&&0<t.CommonName.length?t.CommonName:"Text Phrase(s)"},bpa.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},bpa.prototype.getAxisTitle=function(){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:"Phrase Counts"},bpa),apa;function bpa(t,e){apa.call(this,t,e),t||(this.seriesKind="TextPhraseSeries",this.chartType="column",this.addParameter("Phrases","phrases"))}Michelangelo.TextPhraseSeries=textPhraseSeries;var newsDensitySeries=(jpa=Series,__extends(kpa,jpa),kpa.prototype.getPropertyName=function(){return this.parameters[0].value},kpa.prototype.setPropertyName=function(t){this.parameters[0].value=t},kpa.prototype.getPropertyValue=function(){return this.parameters[1].value},kpa.prototype.setPropertyValue=function(t){this.parameters[1].value=t},kpa.prototype.getGuiTitle=function(){return"News Density Series"},kpa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.getPropertyName()&&0<this.getPropertyName().length&&this.getPropertyValue()&&0<this.getPropertyValue().length?(e.Kind="NewsDensity",e.SeriesId=this.seriesId,e.Key=this.getPropertyName()+"~"+this.getPropertyValue(),t.Series.push(e),e):null},kpa.prototype.getName=function(){return this.getPropertyName()},kpa.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},kpa.prototype.getAxisTitle=function(){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:"Density"},kpa),jpa;function kpa(t,e){jpa.call(this,t,e),t||(this.seriesKind="NewsDensitySeries",this.chartType="column",this.addParameter("Property Name","densityName","MKTW-industry"),this.addParameter("Property Value","densityValue"))}Michelangelo.NewsDensitySeries=newsDensitySeries;var ipoByDateSeries=(spa=Series,__extends(tpa,spa),tpa.prototype.getDate=function(){return this.parameters[0].value},tpa.prototype.setDate=function(t){this.parameters[0].value=t},tpa.prototype.getGuiTitle=function(){var t=this.getDate(),e="IPO Performance";return t&&(e+=": "+t),e},tpa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries,n=this.getDate();return n?(e.Kind="IpoByDate",e.Key=n,e.SeriesId=this.seriesId,e.DataTypes=this.getFieldNames(null),t.Series.push(e),e):null},tpa.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},tpa.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},tpa.prototype.getName=function(t){return t?t.CommonName&&0<t.CommonName.length?t.CommonName:t.Ticker:"IPO Series"},tpa.prototype.getAxisTitle=function(){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:this.getDate().toUpperCase()+" IPOs"},tpa),spa;function tpa(t,e){spa.call(this,t,e),t||(this.seriesKind="IpoByDateSeries",this.chartType="line",this.addParameter("Date","date"))}Michelangelo.IpoByDateSeries=ipoByDateSeries;var RawDataSeries=(Dpa=Series,__extends(Epa,Dpa),Epa.prototype.getGuiTitle=function(){return"Raw Data Series"},Epa.prototype.setData=function(t){this.parameters[0].value=t},Epa.prototype.getName=function(){return this.axisTitle&&0<this.axisTitle.length?this.axisTitle:"Raw Data"},Epa.prototype.recommendedChartType=function(){return"line"},Epa.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.parameters[0].value?(e.Kind="Spreadsheet",e.SeriesId=this.seriesId,e.Key=this.getName(),e.Dialect="RawData",e.RawData=this.parameters[0].value,t.Series.push(e),e):null},Epa),Dpa;function Epa(t,e){Dpa.call(this,t,e),t||(this.seriesKind="RawDataSeries",this.DataFormat="Auto",this.addParameter("","rawData"),this.canEditData=!0)}Michelangelo.RawDataSeries=RawDataSeries;var ChartDefinition=__base(function(t){var o=t(function(t){var e,n,i,r=this;this.version=1,this.showNavigator=!1,this.showRangeSelector=!1,this.showExporting=!1,this.showLegend=!1,this.showTooltips=!0,this.title=null,this.subtitle=null,this.firstAxisOnLeft=!1,this.maxVisibleAxesPerPane=3,this.showTimestamp=!1,this.showIndicatorLabels=!1,this.filterNullSlots=!1,this.includeClosedSlots=!1,this.filterClosedPoints=!0,this.includeOfficialClose=!0,this.injectOpen=!1,this.showPreMarket=!1,this.showAfterHours=!1,this.useExtendedTimeFrame=!0,this.includeMockTick=!0,this.wantPriorClose=!1,this.includeCurrentQuotes=!1,this.resetTodaysAfterHoursPercentChange=!1,this.showYAxisTitle=!0,this.addTimeZoneToXAxisTitle=!0,this.xAxisTitle="Time",this.credit=null,this.showPreMarketBands=!1,this.showAfterHoursBands=!1,this.showClosedBands=!1,this.xAxisCompressed=!1,this.animationSpeed=300,this.animationEasing="linear",this.timeFrame="P6M",this.startDate=null,this.endDate=null,this.step="P1D",this.series=[],this.makeId||(e=1,this.makeId=function(){return e++}),t&&($.extend(!0,this,t),n=$.map(this.series,function(t){var e;switch(t.seriesKind){case"TickerSeries":e=new Michelangelo.TickerSeries(t);break;case"SpreadsheetSeries":e=new Michelangelo.SpreadsheetSeries(t);break;case"TextPhraseSeries":e=new Michelangelo.TextPhraseSeries(t);break;case"RawDataSeries":e=new Michelangelo.RawDataSeries(t);break;case"SovereignDebtSeries":e=new Michelangelo.SovereignDebtSeries(t);break;case"IpoByDateSeries":e=new Michelangelo.IpoByDateSeries(t);break;case"NewsDensitySeries":e=new Michelangelo.NewsDensitySeries(t);break;default:throw"Series kind '"+t.seriesKind+"' is not yet implemented!"}return e}),t instanceof o?this.series=n:(this.series=[],$.each(n,function(t,e){r.addSeries(e)}),0<this.series.length&&this.extensionData&&this.extensionData.annotations&&this.extensionData.annotations.items&&(i=this.series[0],$.each(this.extensionData.annotations.items,function(t,e){i.addAnnotation(Annotation.create(e))}),delete this.extensionData))),this.style=this.style||Michelangelo.EmptyStyle.instance()});o.prototype.addSeries=function(t){this.series.push(t.idify(this.makeId))}});Michelangelo.ChartDefinition=ChartDefinition,Michelangelo.ViewModel=function(){Logger.warn("Michelangelo.ViewModel is deprecated. Use Michelangelo.ChartDefinition instead."),Michelangelo.ChartDefinition.call(this),this.load=function(){throw new Error("Michelangelo.ViewModel.load() is deprecated.  Use the presentation manager's load method instead.\nSee https://github.dowjones.net/MarketData/Michelangelo/blob/master/docs/Jquery-Syntax.md#presentationmanagerload")}};var Repo=__base(function(t){var e,n=t(function(){});n.prototype.get=function(){mustOverride()},n.prototype.getDefinition=function(){mustOverride()},n.prototype.put=function(){mustOverride()},n.prototype.list=function(){mustOverride()},n.ambient=function(t){return arguments.length?(t?t instanceof n?(e=t,Logger.debug("Michelangelo ambient repo set directly.")):Logger.error("Michelangelo ambient repo was not changed. Value must be a Repo."):e=null,n):e=e||new CloudRepo},n.select=function(t){return t instanceof Repo?t:n.ambient()}});Michelangelo.Repo=Repo;var CloudRepo=__inherit(Repo,function(t,e){e=e(function(t){this.__environment=t,this.__dataFetcher=Fetcher.select(null,t,null)});e.prototype.get=function(r){var o=this;return Ajax.send(function(t){return t.presentationUrl(r)},{type:"GET",dataType:"json",cache:!0},this.__environment).then(function(t){if(!t)return $.Deferred().reject("Chart '"+r+"' not found in "+Environment.select(this.__environment).key()+".");var e,n,i=new ChartDefinition(t.definition);return t.data&&(e=JSON.stringify(o.__dataFetcher.buildRequest(i)),delete(n=t.data).version,o.__dataFetcher.setCacheItem(e,n)),{metadata:t.metadata,definition:i}})},e.prototype.getDefinition=function(t){return this.get(t).definition},e.prototype.put=function(t,e){return t?e&&e.definition?e.metadata&&e.metadata.description?("custom"===e.definition.timeFrame&&0===e.definition.step.indexOf("PT")&&(n=JSON.stringify(this.__dataFetcher.buildRequest(e.definition)),(n=this.__dataFetcher.getCacheItem(n))&&((n=n.serverResponse).version="1",e.data=n)),Ajax.send("postPresentationUrl",{type:"POST",params:{user:t},data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",cache:!1},this.__environment)):$.Deferred().reject("A description is required to save the chart"):$.Deferred().reject("A definition is required to save the chart"):$.Deferred().reject("A user ID is required to save the chart");var n},e.prototype.list=function(e){var t=e&&e.userId&&e.userId.trim(),n=e&&e.description&&e.description.trim()&&e.supportPaging;if(!t&&!n)return $.Deferred().reject("userId or description must be specified the the list options");var i={limit:e.limit||10,page:e.page||1};return t&&(i.user=e.userId),n&&(i.description=e.description),Ajax.send(function(t){return t.presentationListUrl(e.supportPaging)},{type:"GET",params:i,cache:!1},this.__environment)}});Michelangelo.CloudRepo=CloudRepo;var Fetcher=__base(function(t){var e,i=t(function(t,e){this.__environment=t,this.__entitlement=e,this.__cache={},this.__requestCount=0});i.prototype.fetch=function(t,e,n){var i=this.buildRequest(t);if(null===i)return $.Deferred().resolve();n.notify("request.built",i,this);var r=JSON.stringify(i),t=this.getCacheItem(r);return(t=t&&t.expiration&&t.expiration<(new Date).getTime()?null:t)||(t=this.__cache[r]={expiration:null,deferred:$.Deferred()},this.sendRequest(i,e,t,n)),t.deferred.promise()},i.prototype.clearCache=function(){this.__cache={}},i.prototype.getCacheItem=function(t){return this.__cache[t]},i.prototype.setCacheItem=function(t,e){(this.__cache[t]={expiration:new Date(864e13).getTime(),deferred:$.Deferred(),serverResponse:e}).deferred.resolve(e)},i.prototype.buildRequest=function(t){var e=new Michelangelo.ServerRequest;return e.TimeFrame=t.timeFrame,e.Step=t.step,e.IncludeMockTick=t.includeMockTick,e.FilterNullSlots=t.filterNullSlots,e.IncludeClosedSlots=t.includeClosedSlots,e.FilterClosedPoints=t.filterClosedPoints,e.IncludeOfficialClose=t.includeOfficialClose,e.InjectOpen=t.injectOpen,e.ShowPreMarket=t.showPreMarket,e.ShowAfterHours=t.showAfterHours,e.UseExtendedTimeFrame=t.useExtendedTimeFrame,e.WantPriorClose=t.wantPriorClose,e.IncludeCurrentQuotes=t.includeCurrentQuotes,e.ResetTodaysAfterHoursPercentChange=t.resetTodaysAfterHoursPercentChange,e.EntitlementToken=Entitlement.select(this.__entitlement).token(),t.startDate&&("number"==typeof t.startDate?e.StartDate=t.startDate:e.StartDate=Date.parse(t.startDate),isNaN(e.StartDate))||t.endDate&&("number"==typeof t.endDate?e.EndDate=t.endDate:e.EndDate=Date.parse(t.endDate),isNaN(e.EndDate))?null:(this.addSeriesToRequest(e,t.series),0===e.Series.length?null:e)},i.prototype.addSeriesToRequest=function(i,t){var r=this;$.each(t,function(t,e){var n=e.addToRequest(i);r.addIndicatorsToRequestSeries(i,n,e.indicators)})},i.prototype.addIndicatorsToRequestSeries=function(t,n,e){$.each(e,function(t,e){var r;e.metaData.serverKind&&((r=new Michelangelo.ServerRequestIndicator).Kind=e.metaData.serverKind,r.SeriesId=e.seriesId,r.Parameters=[],$.each(e.parameters,function(t,e){var n,i;e.metaData.clientOnly||(n=e.metaData.name,e.metaData.serverName&&(n=e.metaData.serverName),e.metaData.isList?(i=e.value.split(","),$.each(i,function(t,e){r.Parameters.push({Name:n,Value:e})})):r.Parameters.push({Name:n,Value:e.value}))}),n.Indicators?n.Indicators.push(r):n.Indicators=[r])})},i.prototype.sendRequest=function(t,e,r,o){try{var a=this,n=Environment.select(this.__environment);0===this.__requestCount&&o.notify("dataFetch.started",null,this),this.__requestCount++;var i={cache:!0,params:{},headers:{},dataType:"json"},s=JSON.stringify(t);encodeURI(s).length>n.maxGetContentLength()&&n.canUsePost()?(i.type="POST",i.data=s,i.contentType="application/json; charset=utf-8",i.params.hash=function(t){var e,n,i=0;if(0===t.length)return i;for(e=0,n=t.length;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return i}(i.data)):(i.type="GET",i.params.json=s),e&&e.showServerPerf&&(i.params.perf=!0);var l="",h=null;e&&n.canUseCustomHeaders()&&(e.sendAkamaiDebugHeaders&&(i.headers.Pragma="akamai-x-cache-on, akamai-x-cache-remote-on, akamai-x-check-cacheable, akamai-x-get-cache-key, akamai-x-get-extracted-values, akamai-x-get-nonces, akamai-x-get-ssl-client-session-id, akamai-x-get-true-cache-key, akamai-x-serial-no, akamai-x-get-request-id"),e.showInternalRequest&&(l+="Q"),e.showInternalGuts&&(l+="G"),e.showInternalResponse&&(l+="R"),e.showInternalStore&&(l+="S"),e.showServerResponse&&(l+="H"),e.showInternalSeries&&(l+="Z"),e.useDebugNow&&(h=e.debugNow)),0<l.length&&(i.headers["X-Mike-Debug"]=l),h&&(i.headers["X-Mike-Now"]=h),Ajax.send("url",i,n,null,1).then(function(t,e,n){var i=t.Debug;t.Debug=null,o.notify("response.received",t,a),a.fireAllHeaderEvents(n,o),a.fireAllDebugEvents(i,o),a.__requestCount--,r.expiration=(new Date).getTime()+6e5,r.serverResponse=t,r.deferred.resolve(t)},function(t){a.fireAllHeaderEvents(null,o),o.notify("error",t,a),a.__requestCount--,r.expiration=new Date(0),r.deferred.reject(new Rejection("Could not fetch data",t.message,t))}).always(function(){0===a.__requestCount&&o.notify("dataFetch.complete",null,a)})}catch(t){return $.Deferred().reject(new Rejection("Data fetch exception",t.message,t))}},i.prototype.fireHeader=function(t,e,n,i,r){var o=null;if(e){var a="";if(i)for(var s=1;;){var l=e.getResponseHeader(n+"-"+s);if(!l)break;a+=l,s+=1}else a=e.getResponseHeader(n);if(a)try{o=JSON.parse(a)}catch(t){r.notify("error","Malformed (truncated?) JSON data in "+n+" header, length="+a.length+".",this),o=null}}r.notify(t,o,this)},i.prototype.fireAllDebugEvents=function(t,e){t&&(null!==t.InternalRequest&&e.notify("internalRequest.received",t.InternalRequest,this),null!==t.Series&&e.notify("internalSeries.received",t.Series,this),null!==t.Guts&&e.notify("internalGuts.received",t.Guts,this),null!==t.Store&&e.notify("internalStore.received",t.Store,this),null!==t.InternalResponse&&e.notify("internalResponse.received",t.InternalResponse,this),null!==t.InternalStitched&&e.notify("internalStitched.received",t.InternalStitched,this),null!==t.Stitched&&e.notify("stitched.received",t.Stitched,this))},i.prototype.fireAllHeaderEvents=function(t,e){this.fireHeader("perf.received",t,"X-DJ-Perf",!1,e)},i.ambient=function(t){return arguments.length?(t?t instanceof i?(e=t,Logger.debug("Michelangelo ambient fetcher set directly.")):Logger.error("Michelangelo ambient fetcher was not changed. Value must be a Fetcher."):e=null,i):e=e||new Fetcher},i.select=function(t,e,n){return t instanceof i?t:e||n?new Fetcher(e,n):i.ambient()}});Michelangelo.Fetcher=Fetcher,Michelangelo.ambience=function(t,e,n,i){var r;1===arguments.length&&$.isPlainObject(t)&&(t=(r=t).environment,e=r.entitlement,n=r.repo,i=r.dataFetcher),t&&Environment.ambient(t),e&&Entitlement.ambient(e),Michelangelo.Repo&&Michelangelo.Repo.ambient(n),Michelangelo.Fetcher&&Michelangelo.Fetcher.ambient(i)};var LineTerminators=__base(function(t){var n={},t=t(function(){});t.registerTerminator=function(t,e){n[t]=e},t.getTerminatorFunc=function(t){return n[t]},t.getLineTerminators=function(){return Cloner.clone(n)},t.isLineTerminator=function(t){return!!n[t]}});function $ra(i){return function(t,e){var n=e.physY-t.physY,t=e.physX-t.physX,t=Math.atan2(n,t);return{physX:e.physX-i*Math.cos(t),physY:e.physY-i*Math.sin(t)}}}Michelangelo.LineTerminators=LineTerminators,LineTerminators.registerTerminator("arrow",function(t,e,n,i){return(t=t.data([1])).enter().append("polygon").classed("arrow",!0).attr("points","0,0 -8,5, -8, -5"),t.attr("transform",i).attr("fill",n).attr("stroke",n).attr("stroke-width",e),{selection:t}}),LineTerminators.registerTerminator("closed-circle",function(t,e,n,i){return(t=t.data([1])).enter().append("circle").classed("closed-circle",!0).attr("r",4),t.attr("transform",i).attr("fill",n),{selection:t,mutator:$ra(4)}}),LineTerminators.registerTerminator("open-circle",function(t,e,n,i){return(t=t.data([1])).enter().append("circle").classed("open-circle",!0).attr("r",8),t.attr("stroke",n).attr("transform",i).attr("fill","transparent"),{selection:t,mutator:$ra(8)}});var Symbol=__base(function(t){function c(){}var n=1,p={},e=t(function(t,e){t=t.trim();t in p&&(t+="-"+(n++).toString()),this.__key=t,this.__type=e,p[t]=this});function h(t){var e=t;return e="object"==typeof t?t.path:e}e.prototype.type=function(){return this.__type},e.equals=function(t,e){var n=_.isUndefined(e)||_.isNull(e);return _.isUndefined(t)||_.isNull(t)?n:!n&&t.__key===e.__key},e.hash=function(){return _.chain(arguments).indexBy(function(t){return t[0].__key}).mapValues(function(t){return t[1]}).value()},e.mergeHashes=function(t,e,n){var i={};n=_.extend({a:c,b:c,both:c},n);for(var r=_.keys(t).sort(),o=_.keys(e).sort(),a=0,s=0;a<r.length&&s<o.length;){var l,h=a<r.length?r[a]:void 0,u=s<o.length?o[s]:void 0;h===u?(l=n.both(p[h],t[h],e[h]),a++,s++):_.isUndefined(u)||h<u?(l=n.a(p[h],t[h]),a++):(l=n.b(p[u],t[u]),s++),void 0!==l&&(i[h]=l)}return i},e.expandHash=function(t){return _.isArray(t)?t.slice(0):_.map(t,function(t,e){return[p[e],t]})},e.applyInPlace=function(t,a,s,l){_.each(t,function(t){var e=t[0].__key;if(e in s){e=s[e];"object"==typeof e&&(0,e.func)(a,l,t[1]);for(var n=h(e).split("."),i=n[0],r=a,o=1;o<n.length;o++)i in r||(r[i]={}),r=r[i],i=n[o];r[i]=t[1]}})},e.hasEffect=function(t,a,s){return _.any(t,function(t){var e=t[0].__key;if(e in s){for(var n=h(s[e]).split("."),i=n[0],r=a,o=1;o<n.length;o++){if(!(i in r))return!0;r=r[i],i=n[o]}return r[i]!==t[1]}})},e.collect=function(a,t){return _.reduce(e.expandHash(t),function(t,e){for(var n=h(e[1]).split("."),i=n[0],r=a,o=1;o<n.length;o++){if(!(i in r))return t;r=r[i],i=n[o]}return i in r&&(t[e[0].__key]=r[i]),t},{})}});Michelangelo.Symbol=Symbol;var SymbolType=__base(function(t){function n(t,e){return t===e}var i={},t=t(function(t,e){this.__name=t,this.__valueEquals=e||n});t.prototype.name=function(){return this.__name},t.prototype.combineValues=function(t,e){return this.__valueEquals(t,e)?t:i},t.multivalue=function(){return i}});Michelangelo.SymbolType=SymbolType;var SymbolTypes={hexColor:new SymbolType("hex-color"),lineThickness:new SymbolType("line-thickness"),lineForm:new SymbolType("line-form"),startLineForm:new SymbolType("start-line-form"),endLineForm:new SymbolType("end-line-form"),text:new SymbolType("text"),fontSize:new SymbolType("font-size"),fontFamily:new SymbolType("font-family"),textAlignment:new SymbolType("text-alignment"),startDate:new SymbolType("start-date"),endDate:new SymbolType("end-date"),startValue:new SymbolType("start-value"),endValue:new SymbolType("end-value"),isConcave:new SymbolType("is-concave")};Michelangelo.SymbolTypes=SymbolTypes;var Symbols={generalColor:new Symbol("general-color",SymbolTypes.hexColor),thickness:new Symbol("thickness",SymbolTypes.lineThickness),lineForm:new Symbol("line-form",SymbolTypes.lineForm),startLineForm:new Symbol("start-line-form",SymbolTypes.startLineForm),endLineForm:new Symbol("end-line-form",SymbolTypes.endLineForm),text:new Symbol("text",SymbolTypes.text),fontSize:new Symbol("font-size",SymbolTypes.fontSize),fontFamily:new Symbol("font-family",SymbolTypes.fontFamily),textAlignment:new Symbol("text-alignment",SymbolTypes.textAlignment),startDate:new Symbol("start-date",SymbolTypes.startDate),endDate:new Symbol("end-date",SymbolTypes.endDate),startValue:new Symbol("start-value",SymbolTypes.startValue),endValue:new Symbol("end-value",SymbolTypes.endValue),isConcave:new Symbol("is-concave",SymbolTypes.isConcave)};Michelangelo.Symbols=Symbols;var Cloner=__base(function(t){t=t(function(){});t.clone=function(t){return $.extend(!0,{},t)},t.shallowClone=function(t){return $.extend({},t)}});Michelangelo.Cloner=Cloner;var DrawingHandler=__base(function(t){t=t(function(){this.__hostElements=[],this.__dirty=!1});t.prototype.context=function(){throw"DrawingHandler subtypes must override context()"},t.prototype._createHostElement=function(t){t=this.context().getHostElement(t).append("g").classed("annotation",!0).classed("event-target",!0).datum(this);return this.__hostElements.push(t),t},t.prototype._applyToHostElements=function(n){$.each(this.__hostElements,function(t,e){n(e)})},t.prototype.add=function(){this.__dirty=!0},t.prototype.update=function(){this.__dirty=!1},t.prototype.refresh=function(t){this.__isUserDrivenAction=t,this.__dirty&&this.update()},t.prototype.remove=function(){this._applyToHostElements(function(t){t.datum(null),t.remove()}),this.__hostElements=[]}});Michelangelo.DrawingHandler=DrawingHandler;var AnnotationHandler=__inherit(DrawingHandler,function(n,t){t=t(function(t,e){n.call(this),this.__annotation=t,this.__context=e,this.__isCreating=!1,this.__overlays=null});t.dragCreate=function(){throw"AnnotationHandler subtypes must provide dragCreate()"},t.prototype.annotation=function(){return this.__annotation},t.prototype.context=function(){return this.__context},t.prototype.createOnNoDrag=function(){return!1},t.prototype.moveTo=function(){this.__dirty=!0},t.prototype.startDrag=function(){},t.prototype.endDrag=function(t){t||this.publish(),this.__dirty=!0},t.prototype.dirty=function(){this.__dirty=!0},t.prototype.getDomainPosition=function(t){var e=t||{},t=this.annotation();return e.annotationId=t.id,e},t.prototype.update=function(){var e=this.context().isSelected(this);this._applyToHostElements(function(t){t.classed("selected",e)}),e?this.__overlays||this.__addOverlays():this.__removeOverlays(),this.__overlays&&this._applyToOverlays(function(t){t.update()}),this.__isUserDrivenAction&&this.context().reportPosition(this.getDomainPosition(),this),n.prototype.update.call(this)},t.prototype.publish=function(){var t=this.context();this.__isCreating?(this.__isCreating=!1,t.publishAdd(this)):t.publishUpdate(this)},t.prototype.getLocation=function(){return Point.Physical(0,0)},t.prototype._createHostElement=function(t){t=n.prototype._createHostElement.call(this,t);return t.attr("mask","url(#"+this.context().maskId()+")"),t},t.prototype.remove=function(t){t&&this.context().publishRemove(this),this.__removeOverlays(),n.prototype.remove.call(this)},t.prototype._applyToOverlays=function(n){this.__overlays&&$.each(this.__overlays,function(t,e){n(e)})},t.prototype.__removeOverlays=function(){this._applyToOverlays(function(t){t.remove()}),this.__overlays=null},t.prototype.__addOverlays=function(){this.__overlays=this._createOverlays(),this._applyToOverlays(function(t){t.add()})},t.prototype.startCreateMode=function(t){var e=this;this.__addOverlays();var n=_.find(this.__overlays||[],function(t){return t.tag&&"start"===t.tag()});n&&(this.__isCreating=!0,this.context().trackDrag([n],t,function(){e.__isCreating=!1,e.createOnNoDrag()?e.context().publishAdd(e):(e.context().select([]),e.remove())}))},t.prototype.handleMouseDown=function(t){if(t.button)return!1;t.stopPropagation(),t.stopImmediatePropagation();var e,n=this,i=this.context();return t.shiftKey?(i.select([this],!0),i.swallowMouseUp()):(e=null,i.isSelected(this)?i.hasSelection()&&(e=function(){return i.select([n])}):i.select([this]),i.trackDrag(null,Point.Physical(t.chartX,t.chartY),e)),!1},t.prototype.handleClick=function(t){return t.stopPropagation(),t.stopImmediatePropagation(),!1},t.prototype._map=function(){return{}},t.prototype.applyAttributes=function(t){_.isPlainObject(t)&&(t=Symbol.expandHash(t)),t=_.select(t,function(t){return t[1]!==SymbolType.multivalue()});var e=this._map();Symbol.applyInPlace(t,this.__annotation,e,this.__context),this.__isCreating||this.context().publishUpdate(this),this.__dirty=!0},t.prototype.accumulateAttributes=function(t){var e=this._map(),e=Symbol.collect(this.__annotation,e);return t?Symbol.mergeHashes(t,e,{both:function(t,e,n){return t.type().combineValues(e,n)}}):e},t.applyLineForm=function(t,e){switch(e){case"dashed":t.attr("stroke-dasharray","6 6");break;case"dotted":t.attr("stroke-dasharray","3 5");break;default:t.attr("stroke-dasharray",null)}},t.neatenPoint=function(t,e){e=(e||1)%2==0?0:.5;return Point.Physical(Math.round(t.physX+e)-e,Math.round(t.physY+e)-e)},t.neatenValue=function(t,e){e=(e||1)%2==0?0:.5;return Math.round(t+e)-e}});Michelangelo.AnnotationHandler=AnnotationHandler;var DragHandle=__inherit(DrawingHandler,function(o,t){t=t(function(t,e,n,i,r){o.call(this),this.__handler=t,this.__moveAction=e,this.__getLocationFn=n,this.__tag=i,this.__handleShape=r,this.__dragging=!1});t.prototype.handler=function(){return this.__handler},t.prototype.tag=function(){return this.__tag},t.prototype.context=function(){return this.__handler.context()},t.prototype.add=function(){var t=this.context();this.__hostElement=this._createHostElement("overlay");var e=this.__hostElement.classed("drag-handle",!0).append("g").attr("transform","translate(0.5 0.5)").attr("filter","url(#"+t.dropShadowId()+")").append("g"),t=this.__handleShape||{shape:"circle",attrs:{r:7,cx:0,cy:0,fill:"#a9f3ff","fill-opacity":.25,stroke:"#46869b"}};e.append(t.shape).attr("fill-opacity",.25).attr(t.attrs),o.prototype.add.call(this)},t.prototype.update=function(){var t=this.getLocation();this.__hostElement.classed("dragging",this.__dragging).select("g").attr("transform","translate("+t.physX+" "+t.physY+")"),o.prototype.update.call(this)},t.prototype.moveTo=function(t){this.__moveAction(t),this.__handler.dirty()},t.prototype.startDrag=function(){this.__dragging=!0,this.__dirty=!0},t.prototype.endDrag=function(t){t||this.__handler.publish(),this.__dragging=!1,this.__dirty=!0},t.prototype.handleMouseDown=function(t){var e=this,n=this.context();return t.shiftKey?n.select([this.__handler],!0):(this.update(),1<n.getSelectionList().length?n.trackDrag(null,Point.Physical(t.chartX,t.chartY),function(){return n.select([e.__handler])}):n.trackDrag([this],Point.Physical(t.chartX,t.chartY))),t.stopImmediatePropagation(),!1},t.prototype.handleClick=function(t){return t.stopPropagation(),!1},t.prototype.getLocation=function(){return this.__getLocationFn()}});Michelangelo.DragHandle=DragHandle;var Tools=__base(function(t){var r={},t=t(function(){}),o={};t.registerHandler=function(e){var n=e.annotationType().type(),i=(o[n]=e).displayInfo();r[n]={symbol:n,displayName:i.name,precedence:i.precedence,createStartMode:function(t){return new InteractionMode(t,n,function(t){return new InteractionState(t,e.annotationType(),i.instruction)})}}},t.getTools=function(){return Cloner.clone(r)},t.createHandler=function(t,e){var n=o[t.type];return n?new n(t,e):null},t.dragCreateHandler=function(t,e,n){t=o[t.type()];return t?t.dragCreate(e,n):null}});Michelangelo.Tools=Tools;var AnnotationContext=__base(function(t){var o=__base(function(t){t=t(function(t){var e=(this.__axis=t).getExtremes(),n=t.toPixels(e.min),e=t.toPixels(e.max);n<=e?(this.__physMin=n,this.__physMax=e,this.__inverted=!1):(this.__physMin=e,this.__physMax=n,this.__inverted=!0)});t.prototype.toDomain=function(t){return this.__axis.toValue(t)},t.prototype.toPhysical=function(t){return this.__axis.toPixels(t)},t.prototype.toVisible=function(t){return this.__inverted?this.__physMax-t*(this.__physMax-this.__physMin):t*(this.__physMax-this.__physMin)+this.__physMin},t.prototype.isInRange=function(t){return this.__physMax>=t&&this.__physMin<=t},t.prototype.constrain=function(t){return t>this.__physMax?this.__physMax:t<this.__physMin?this.__physMin:t}}),t=t(function(t,e,n,i,r){this.__manager=t,this.__xAxis=new o(e),this.__yAxis=new o(n),this.__maskId=i,this.__parentId=r});t.prototype.getYValueForSeries=function(t){return this.__manager.getYValueForSeries(this.__parentId,t)},t.prototype.reportPosition=function(t,e){this.__manager.notify("annotation-update.position",t,e)},t.prototype.toDomainX=function(t){return this.__xAxis.toDomain(t)},t.prototype.toDomainY=function(t){return this.__yAxis.toDomain(t)},t.prototype.toPhysicalX=function(t){return this.__xAxis.toPhysical(t)},t.prototype.toPhysicalY=function(t){return this.__yAxis.toPhysical(t)},t.prototype.toVisibleX=function(t){return this.__xAxis.toVisible(t)},t.prototype.toVisibleY=function(t){return this.__yAxis.toVisible(t)},t.prototype.toDomainPoint=function(t){return Point.Domain(this.__xAxis.toDomain(t.physX),this.__yAxis.toDomain(t.physY))},t.prototype.toPhysicalPoint=function(t){return Point.Physical(this.__xAxis.toPhysical(t.domX),this.__yAxis.toPhysical(t.domY))},t.prototype.toVisiblePoint=function(t){return Point.Physical(this.__xAxis.toVisible(t.domX),this.__yAxis.toVisible(t.domY))},t.prototype.isIn=function(t){return this.__xAxis.isInRange(t.physX)&&this.__yAxis.isInRange(t.physY)},t.prototype.constrain=function(t){return Point.Physical(this.__xAxis.constrain(t.physX),this.__yAxis.constrain(t.physY))},t.prototype.__withEditor=function(t,e){return this.__manager.__editor?t(this.__manager.__editor):e},t.prototype.maskId=function(){return this.__maskId},t.prototype.dropShadowId=function(){return this.__manager.__dropShadowId},t.prototype.getHostElement=function(t){return this.__manager.getLayerElement(t)},t.prototype.idify=function(t){return t.idify(this.__manager.__def.makeId)},t.prototype.select=function(e,n){this.__withEditor(function(t){t.select(e,n)})},t.prototype.isSelected=function(e){return this.__withEditor(function(t){return t.isSelected(e)},!1)},t.prototype.hasSelection=function(){return 0<this.getSelectionList().length},t.prototype.getSelection=function(){return this.__withEditor(function(t){return t.getSelection()},{})},t.prototype.getSelectionList=function(){return this.__withEditor(function(t){return t.getSelectionList()},[])},t.prototype.trackDrag=function(e,n,i){return this.__withEditor(function(t){return t.trackDrag(e,n,i)},!1)},t.prototype.addHandler=function(t){t=Tools.createHandler(t,this);t&&(this.__manager.addHandler(t),t.add())},t.prototype.dragCreate=function(t,e){t=Tools.dragCreateHandler(t,this,e);t&&(this.idify(t.annotation()),this.__manager.addHandler(t),this.select([t]),t.add(),t.startCreateMode(e))},t.prototype.swallowMouseUp=function(){this.__withEditor(function(t){t.swallowMouseUp()})},t.prototype.publishAdd=function(t){this.__manager.editExecutor().addAnnotation(this.__parentId,t.annotation())},t.prototype.publishUpdate=function(t){this.__manager.editExecutor().updateAnnotation(this.__parentId,t.annotation())},t.prototype.publishRemove=function(t){this.__manager.editExecutor().removeAnnotation(this.__parentId,t.annotation().id)}}),InteractionModeBase=__base(function(t){t=t(function(t){this.__name=t||"none"});t.prototype.name=function(){return this.__name},t.prototype.instructionText=function(){return null},t.prototype.handleMouseDown=function(){},t.prototype.handleMouseMove=function(){},t.prototype.handleMouseUp=function(){},t.prototype.handleClick=function(){},t.prototype.handleKeyDown=function(){},t.prototype.handleKeyPress=function(){},t.prototype.start=function(){},t.prototype.cancel=function(){}}),InteractionMode=__inherit(InteractionModeBase,function(i,t){t=t(function(t,e,n){i.call(this,e),this.__context=t,n?"function"===$.type(n)?this.__state=n(this):this.__state=n:this.__state=new InteractionState(this)});t.prototype.context=function(){return this.__context},t.prototype.instructionText=function(){return this.__state.instructionText()},t.prototype.handleClick=function(t){return this.__transition(this.__state.handleClick(t))},t.prototype.handleMouseDown=function(t){return this.__transition(this.__state.handleMouseDown(t))},t.prototype.handleMouseMove=function(t){return this.__transition(this.__state.handleMouseMove(t))},t.prototype.handleMouseUp=function(t){return this.__transition(this.__state.handleMouseUp(t))},t.prototype.handleKeyPress=function(t){return this.__transition(this.__state.handleKeyPress(t))},t.prototype.handleKeyDown=function(t){return this.__transition(this.__state.handleKeyDown(t))},t.prototype.__transition=function(t){return!t||(this.__state=t,!1)}}),SelectInteractionMode=__inherit(InteractionModeBase,function(e,t){t=t(function(t){e.call(this,"select"),this.__editor=t});t.prototype.instructionText=function(){return"Click to select an annotation; Shift+click to select multiple annotations."},t.prototype.__getHandlerForElement=function(t){for(;t&&!(t instanceof SVGSVGElement);){var e=d3.select(t).datum();if(e&&e instanceof DrawingHandler)return e;t=t.parentElement||t.parentNode}return null},t.prototype.handleMouseDown=function(t){var e=this.__getHandlerForElement(t.target);if(e){var n=e.handleMouseDown;if(n)return n.call(e,t)}return t.shiftKey||(this.__editor.select([]),this.__editor.swallowMouseUp()),t.stopPropagation(),t.stopImmediatePropagation(),!1},t.prototype.handleKeyDown=function(t){return 46!==t.keyCode&&8!==t.keyCode||(this.__editor.deleteSelected(),t.stopPropagation(),t.stopImmediatePropagation()),!1}}),InteractionState=__base(function(t){t=t(function(t,e,n){this.__mode=t,this.__instructionText=n||"",this.__annotationType=e});t.prototype.instructionText=function(){return this.__instructionText},t.prototype.mode=function(){return this.__mode},t.prototype.handleClick=function(){return this},t.prototype.handleMouseDown=function(t){var e=Point.Physical(t.chartX,t.chartY),n=this.__mode.context();return n&&n.dragCreate(this.__annotationType,e),t.stopPropagation(),t.preventDefault(),null},t.prototype.handleMouseMove=function(){return this},t.prototype.handleKeyDown=function(t){return 27===t.keyCode?this.handleEscape():this},t.prototype.handleKeyPress=function(){return this},t.prototype.handleEscape=function(){return null}});Michelangelo.InteractionState=InteractionState;var ChartDefinitionEditExecutor=__base(function(t){t=t(function(t){this.__def=t;var n={};$.each(t.series,function(t,e){n[e.seriesId]=e,$.each(e.indicators,function(t,e){n[e.seriesId]=e})}),this.__map=n});t.prototype.addAnnotation=function(t,e){e=Annotation.create(e);return this.__map[t].addAnnotation(e),e.id},t.prototype.removeAnnotation=function(t,n){var i=this.__map[t];$.each(i.annotations,function(t,e){if(e.id===n)return i.annotations.splice(t,1),!1})},t.prototype.updateAnnotation=function(t,n){t=this.__map[t];$.each(t.annotations,function(t,e){if(e.id===n.id)return $.extend(!0,e,n),!1})}});Michelangelo.ChartDefinitionEditExecutor=ChartDefinitionEditExecutor;var DragTracking=function(t,e){this.offset=t,this.target=e},DragTracker=(yxa.prototype.handleMouseUp=function(t){t.stopPropagation(),t.stopImmediatePropagation(),this.__engaged?this.__endAction($.map(this.__tracking,function(t){return t.target})):this.__noDragAction()},yxa.prototype.handleMouseMove=function(n){this.__engaged||Math.sqrt(Math.pow(n.chartX-this.__dragStart.physX,2)+Math.pow(n.chartY-this.__dragStart.physY,2))>this.__startDelta&&(this.__engaged=!0,$.each(this.__tracking,function(t,e){e.target.startDrag()})),this.__engaged&&$.each(this.__tracking,function(t,e){e.target.moveTo(Point.Physical(n.chartX-e.offset.physX,n.chartY-e.offset.physY))}),n.stopPropagation(),n.stopImmediatePropagation()},yxa.prototype.cancel=function(){$.each(this.__tracking,function(t,e){e.target.endDrag(!0)})},yxa);function yxa(t,n,e,i){this.__engaged=!1,this.__startDelta=3,this.__dragStart=n,this.__endAction=e,this.__noDragAction=i||function(){},this.__tracking=$.map(t,function(t){var e=t.getLocation();return new DragTracking(Point.Physical(n.physX-e.physX,n.physY-e.physY),t)})}Michelangelo.DragTracker=DragTracker;var PublicEditor=__base(function(t){t=t(function(t){this.__realEditor=t});t.prototype.mode=function(t){if(!arguments.length)return this.__realEditor.mode();var e=this;return this.__realEditor.refresh(function(){return e.__realEditor.mode(t)})},t.prototype.modes=function(){return this.__realEditor.modes()},t.prototype.deleteSelected=function(){var t=this;return this.__realEditor.refresh(function(){return t.__realEditor.deleteSelected()})},t.prototype.end=function(){return this.__realEditor.end()},t.prototype.instructionText=function(){return this.__realEditor.instructionText()},t.prototype.select=function(t,e){var n=this;return this.__realEditor.refresh(function(){return n.__realEditor.select(t,e)})},t.prototype.getSelection=function(){return __base.mapValues(this.__realEditor.getSelection(),function(t,e){return e.annotation()})},t.prototype.getSelectionList=function(){return _.map(this.__realEditor.getSelectionList(),function(t){return t.annotation()})},t.prototype.isSelected=function(t){return this.__realEditor.isSelected(t)},t.prototype.getSelectionDescription=function(){return this.__realEditor.getSelectionDescription()},t.prototype.applyToSelection=function(t){var e=this;return this.__realEditor.refresh(function(){return e.__realEditor.applyToSelection(t)})},t.prototype.getSelectionVersion=function(){return this.__realEditor.getSelectionVersion()}}),AnnotationEditor=__base(function(t){t=t(function(t,e){this.__manager=t,this.__context=e;var n={symbol:"select",displayName:"Select",precedence:0};this.__modes=$.map(Tools.getTools(),function(t){return{symbol:t.symbol,displayName:t.displayName,precedence:t.precedence}}),e?(this.__modes.sort(function(t,e){return t.precedence-e.precedence}),this.__modes=[n].concat(this.__modes)):this.__modes=[n],this.__eventFilter=".annotations-"+t.id(),this.__selection={},this.__selectionList=[],this.__selectionVersion=0,this.__mode=new InteractionModeBase,this.mode(null),this.__publicEditor=new PublicEditor(this)});t.prototype.publicEditor=function(){return this.__publicEditor},t.prototype.context=function(){return this.__context},t.prototype.refresh=function(t){return this.__manager.refresh(t)},t.prototype.mode=function(t){return arguments.length?(this.__mode.cancel(),this.__mode=null,t&&"select"!==t&&(e=this.__manager.tools()[t])&&(this.__mode=e.createStartMode(this.__context)),this.__mode=this.__mode||new SelectInteractionMode(this),this.__mode.start(),this):this.__mode.name();var e},t.prototype.modes=function(){return this.__modes},t.prototype.instructionText=function(){return this.__mode.instructionText()},t.prototype.end=function(){var t=this.__manager;t&&(this.unrender(),this.__mode.cancel(),this.__manager=null,t.endEdit())},t.prototype.render=function(e){var n=this.__selection;$.each(n,function(t){t in e?n[t]=e[t]:delete n[t]});var t=this.__manager.svgElement();this._subscribe(t,"mousedown",this.__handleMouseDown,this),this._subscribe(t,"mousemove",this.__handleMouseMove,this),this._subscribe(document,"mouseup",this.__handleMouseUp,this),this._subscribe(t,"click",this.__handleClick,this),this._subscribe(document,"keydown",this.__handleKeyDown,this),this._subscribe(document,"keypress",this.__handleKeyPress,this),this.__selectionVersion++},t.prototype.unrender=function(){$(this.__manager.containerElement()).off(this.__eventFilter),$(this.__manager.svgElement()).off(this.__eventFilter),$(document).off(this.__eventFilter)},t.prototype._subscribe=function(t,e,n,i){var r=this;$(t).on(e+this.__eventFilter,function(t){return r.__dispatchInContext(i||r,n,t)})},t.prototype._subscribeForHandler=function(t,i){var r=this;$(this.__manager.svgElement()).on(t+this.__eventFilter,".event-target",function(t){return function(t,e){var n=d3.select(t).datum()||null;if(n){t=n[i];if(t)return r.__dispatchInContext(n,t,e)}return!0}(this,t)})},t.prototype.__dispatchInContext=function(e,n,i){var r=this;return this.__manager.event(function(){var t;return i&&i.originalEvent&&(t=r.__manager.chart().pointer.normalize(i.originalEvent),$.extend(i,{chartX:t.chartX,chartY:t.chartY})),n.call(e,i)})},t.prototype.trackDrag=function(t,e,n){var i=this;i.__dragTracker&&(i.__dragTracker.cancel(),i.__dragTracker=null),i.__manager.__userDrivenAction=!0,t=t||i.getSelection(),this.__dragTracker=new DragTracker(t,e,function(t){$.each(t,function(t,e){e.endDrag(!1)}),i.__manager.__userDrivenAction=!1},n)},t.prototype.endCreatingItem=function(){this.mode(null)},t.prototype.select=function(t,e){var i=this;e?$.each(t,function(t,e){var n=e.annotation().id;n in i.__selection?delete i.__selection[n]:i.__selection[n]=e,e.dirty()}):($.each(this.__selection,function(t,e){e.dirty()}),this.__selection={},$.each(t,function(t,e){(i.__selection[e.annotation().id]=e).dirty()})),this.__selectionList=_.map(this.__selection,function(t){return t}),this.__selectionVersion++},t.prototype.getSelection=function(){return $.extend({},this.__selection)},t.prototype.getSelectionList=function(){return $.extend([],this.__selectionList)},t.prototype.isSelected=function(t){return t.annotation().id in this.__selection},t.prototype.getSelectionDescription=function(){return _.chain(this.__selection).reduce(function(t,e){return e.accumulateAttributes(t)},null)},t.prototype.applyToSelection=function(e){_.chain(this.__selection).each(function(t){t.applyAttributes(e)},null),this.__selectionVersion++},t.prototype.getSelectionVersion=function(){return this.__selectionVersion},t.prototype.deleteSelected=function(){var n=this;$.each(this.__selection,function(t,e){n.__manager.removeHandler(e),e.remove(!0)}),this.select([])},t.prototype.swallowMouseUp=function(){this.__swallowMouseUp=!0},t.prototype.__handleClick=function(t){this.__mode.handleClick(t)},t.prototype.__handleMouseUp=function(t){this.__dragTracker?(this.__dragTracker.handleMouseUp(t),this.__dragTracker=null):this.__swallowMouseUp?(t.stopPropagation(),t.stopImmediatePropagation()):this.__transition(this.__mode.handleMouseUp(t)),this.__swallowMouseUp=!1},t.prototype.__handleMouseMove=function(t){this.__dragTracker?this.__dragTracker.handleMouseMove(t):this.__transition(this.__mode.handleMouseMove(t))},t.prototype.__handleKeyDown=function(t){this.__transition(this.__mode.handleKeyDown(t))},t.prototype.__handleMouseDown=function(t){this.__transition(this.__mode.handleMouseDown(t))},t.prototype.__handleKeyPress=function(t){this.__transition(this.__mode.handleKeyPress(t))},t.prototype.__transition=function(t){t&&this.mode(null)}}),AnnotationManager=__base(function(t){t=t(function(t,e,n){this.__id=t,this.__notifier=e,this.__eventWrapper=n||function(t){return t()},this.__nextSubId=1,this.__dropShadowId=this.__makeId("dropShadow"),this.__handlers={},this.__axisInfo={},this.__parentContexts={},this.__tools=Tools.getTools(),this.__editExecutor=null});t.prototype.__makeId=function(t){return t+"-"+this.__id+"-"+this.__nextSubId++},t.prototype.getYValueForSeries=function(e,t){var n=this.__chart,i=_.find(n.series,function(t){return t.userOptions.sourceId===e});if(!i)return null;i=i.userOptions.id;return t(n.get(i),this.__determineSeriesYPoint)},t.prototype.__determineSeriesYPoint=function(t){if(!t.series.options.compare)return t.y;var e=t.series.compareValue;return 100*(t.y/e-1)},t.prototype.render=function(t,e,n,i){this.unrender(),this.__chart=t,this.__renderModel=e,this.__def=n,this.__editExecutor=i,this.__container=t.container,this.__$container=$(this.__container),this.__$svg=this.__$container.find("svg"),this.__svg=this.__$svg.get(0),this.__svg_d3=d3.select(this.__svg),this.__defs_d3=this.__svg_d3.select("defs"),this.__style_d3=this.__defs_d3.append("style").attr("type","text/css"),this.__group_d3=d3.select(t.renderer.g().attr("zIndex",3.5).addClass("annotations").add().element),this.__overlay_d3=d3.select(t.renderer.g().attr("zIndex",3.75).addClass("annotation-overlays").add().element),this.__background_d3=d3.select(t.renderer.g().attr("zIndex",2.5).addClass("annotation-background").add().element),this.__defs_d3.append("filter").attr("id",this.__dropShadowId).attr("x","-10%").attr("y","-10%").attr("width","200%").attr("height","200%").call(function(t){t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1"),t.append("feOffset").attr("dx","2").attr("dy","2").attr("result","offsetblur"),t.append("feFlood").attr("flood-color","#000").attr("flood-opacity","50%"),t.append("feComposite").attr("in2","offsetblur").attr("operator","in"),t.append("feMerge").call(function(t){t.append("feMergeNode"),t.append("feMergeNode").attr("in","SourceGraphic")})});var a=this;this.__handlers={};var s=a.__chart.xAxis[0];this.__axisInfo={},this.__parentContexts={},$.each(this.__renderModel.panes,function(t,e){$.each(e.axes,function(t,e){var n=e.axisStyle.__mikeId,i=e.getActualAxis(a.__chart),r=a.__makeId("annotationMask"),o=a.__defs_d3.append("mask").attr("id",r).append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","#FFF");a.__axisInfo[n]={axis:i,maskId:r,rect_d3:o},$.each(e.series,function(t,e){var n=new AnnotationContext(a,s,i,r,e.sourceId);a.__parentContexts[e.sourceId]=n,$.each(e.annotations,function(t,e){n.addHandler(e)})})})}),this.__updateMasks(),this.__setStyles(),this.__editor&&this.__editor.render(this.__handlers),this.refresh()},t.prototype.__updateMasks=function(){var r=this.__chart.xAxis[0],o=r.getExtremes();$.each(this.__axisInfo,function(t,e){var n=e.axis,i=n.getExtremes();e.rect_d3.attr("x",r.toPixels(o.min)).attr("y",n.toPixels(i.max)).attr("width",r.toPixels(o.max)-r.toPixels(o.min)).attr("height",n.toPixels(i.min)-n.toPixels(i.max))})},t.prototype.__setStyles=function(){this.__editor?this.__style_d3.text(".highcharts-grid, .highcharts-axis, .highcharts-series-group { pointer-events: none }</style>"):this.__style_d3.text("")},t.prototype.redraw=function(){$.each(this.__handlers,function(t,e){e.update()}),this.__updateMasks()},t.prototype.refresh=function(t){var n=this;try{t&&t()}finally{$.each(this.__handlers,function(t,e){e.refresh(n.__userDrivenAction)})}},t.prototype.event=function(t){var e=this;this.refresh(function(){e.__eventWrapper(t)})},t.prototype.unrender=function(){this.__editor&&this.__editor.unrender(),this.__chart=null,this.__axisInfo={},this.__parentContexts={}},t.prototype.canEdit=function(t){if(t)return"string"===$.type(t.seriesId)&&this.__parentContexts[t.seriesId];for(var e in this.__handlers)if(this.__handlers.hasOwnProperty(e))return!0;return!1},t.prototype.edit=function(t){if(!this.canEdit(t))return this.__editor;t=t&&"string"===$.type(t.seriesId)&&this.__parentContexts[t.seriesId]||null;return this.__editor&&this.__editor.context()===t||(this.__editor&&this.endEdit(!0),this.__setStyles(),this.__editor=new AnnotationEditor(this,t),this.__notifier.notify("edit.started",null,this)),this.__editor},t.prototype.editor=function(){return this.__editor?this.__editor.publicEditor():null},t.prototype.endEdit=function(t){var e=this.__editor;e&&(this.__editor=null,e.end(),t||this.__notifier.notify("edit.ended",null,this),this.__setStyles())},t.prototype.notify=function(t,e,n){this.__notifier.notify(t,e,n)},t.prototype.id=function(){return this.__id},t.prototype.chart=function(){return this.__chart},t.prototype.svgElement=function(){return this.__svg},t.prototype.containerElement=function(){return this.__container},t.prototype.tools=function(){return this.__tools},t.prototype.editExecutor=function(){return this.__editExecutor},t.prototype.eventWrapper=function(){return this.__eventWrapper},t.prototype.addHandler=function(t){this.__handlers[t.annotation().id]=t},t.prototype.removeHandler=function(t){delete this.__handlers[t.annotation().id]},t.prototype.getLayerElement=function(t){switch(t){case"background":return this.__background_d3;case"overlay":return this.__overlay_d3;default:return this.__group_d3}}}),Point=__base(function(t){t=t(function(){});t.Domain=function(t,e){return{domX:t,domY:e}},t.Physical=function(t,e){return{physX:t,physY:e}},t.AddDomain=function(t,e){return Point.Domain(t.domX+e.domX,t.domY+e.domY)},t.AddPhysical=function(t,e){return Point.Physical(t.physX+e.physX,t.physY+e.physY)},t.PhysicalDifference=function(t,e){return Point.Physical(t.physX-e.physX,t.physY-e.physY)}});Michelangelo.Point=Point;var Rect=__base(function(t){t=t(function(){});t.Domain=function(t,e,n,i){return{domTop:Math.min(t,n),domLeft:Math.min(e,i),domBottom:Math.max(t,n),domRight:Math.max(e,i)}},t.Physical=function(t,e,n,i){return{physTop:Math.min(t,n),physLeft:Math.min(e,i),physBottom:Math.max(t,n),physRight:Math.max(e,i)}},t.FromPhysical=function(t,e){return Rect.Physical(t.physY,t.physX,e.physY,e.physX)},t.FromDomain=function(t,e){return Rect.Domain(t.domY,t.domX,e.domY,e.domX)}});Michelangelo.Rect=Rect;var PaletteColorDefinition=__base(function(t){t=t(function(){});t.prototype.displayName=function(){return this.__displayName},t.prototype.symbol=function(){return this.__symbol},t.prototype.rgbHex=function(){return this.__rgbHex}});Michelangelo.PaletteColorDefinition=PaletteColorDefinition;var LineWidthDefinition=__base(function(t){t=t(function(){});t.prototype.displayName=function(){return this.__displayName},t.prototype.symbol=function(){return this.__symbol},t.prototype.physicalWidth=function(){return this.__physicalWidth}});Michelangelo.LineWidthDefinition=LineWidthDefinition;var LineFormDefinition=__base(function(t){t=t(function(){});t.prototype.displayName=function(){return this.__displayName},t.prototype.symbol=function(){return this.__symbol}});Michelangelo.LineFormDefinition=LineFormDefinition;var EllipseAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{center:Point.Domain(0,0),control1:Point.Domain(0,0),control2:Point.Domain(0,0),color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});t.type=function(){return"ellipse"},Annotation._register(t)});Michelangelo.EllipseAnnotation=EllipseAnnotation,__inherit(AnnotationHandler,function(o,t){var i=t(function(t,e){o.call(this,t,e)});i.annotationType=function(){return EllipseAnnotation},i.displayInfo=function(){return{name:"Ellipse",precedence:50,instruction:"Click and drag in the chart to draw a circle or ellipse."}},i.dragCreate=function(t,e){var n=new EllipseAnnotation;return n.center=t.toDomainPoint(e),n.control1=t.toDomainPoint(e),n.control2=t.toDomainPoint(e),new i(n,t)};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);i.prototype._map=function(){return e},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={center:_.clone(t.center),control1:_.clone(t.control1),control2:_.clone(t.control2)}},i.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("region",!0).attr("visibility","collapse").append("ellipse").classed("fill",!0).attr("cx",0).attr("cy",0).attr("rx",1e-6).attr("ry",1e-6).attr("fill","none").attr("stroke","none").attr("opacity",.25),this.__hostElement.append("ellipse").classed("outline",!0).attr("cx",0).attr("cy",0).attr("rx",1e-6).attr("ry",1e-6).attr("fill","none").attr("stroke","none"),o.prototype.add.call(this)};function a(t,e){var n=t.physX-e.physX,e=t.physY-e.physY;return Math.sqrt(n*n+e*e)}function s(t,e){return Math.atan2(e.physY-t.physY,e.physX-t.physX)}i.prototype.update=function(){var t=this.context(),e=this.annotation(),n=AnnotationHandler.neatenPoint(t.toPhysicalPoint(e.center),2),i=AnnotationHandler.neatenPoint(t.toPhysicalPoint(e.control1),e.borderThickness||1),r=AnnotationHandler.neatenPoint(t.toPhysicalPoint(e.control2),e.borderThickness||1),t=a(i,n),r=a(r,n),i=180*s(i,n)/Math.PI;this.__hostElement.attr("visibility",null).select(".fill").attr("cx",n.physX).attr("cy",n.physY).attr("rx",t).attr("ry",r).attr("transform","rotate("+i+","+n.physX+","+n.physY+")").attr("fill",e.color||UnknownToolColor);n=this.__hostElement.select(".outline").attr("cx",n.physX).attr("cy",n.physY).attr("rx",t).attr("ry",r).attr("transform","rotate("+i+","+n.physX+","+n.physY+")").attr("stroke",e.borderThickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.borderThickness);AnnotationHandler.applyLineForm(n,e.borderForm),o.prototype.update.call(this)},i.prototype.__moveControl=function(t,e,n,i,r){i=i||1;var o=this.context(),t=o.toPhysicalPoint(t),i=s(t,e)+Math.PI/2*(i/Math.abs(i)),n=a(t,r?e:o.toPhysicalPoint(n));return{control:o.toDomainPoint(e),otherControl:o.toDomainPoint(Point.Physical(t.physX+Math.cos(i)*n,t.physY+Math.sin(i)*n))}},i.prototype._createOverlays=function(){var e=this,n=this.annotation();return[new DragHandle(this,function(t){t=e.__moveControl(n.center,t,n.control2,1,e.__isCreating);n.control1=t.control,n.control2=t.otherControl},function(){return e.context().toPhysicalPoint(n.control1)},"start"),new DragHandle(this,function(t){t=e.__moveControl(n.center,t,n.control1,-1,e.__isCreating);n.control2=t.control,n.control1=t.otherControl},function(){return e.context().toPhysicalPoint(n.control2)})]},i.prototype.moveTo=function(t){var e=this.annotation(),n=this.__initialDragData,i=this.context();e.center=i.toDomainPoint(Point.AddPhysical(t,i.toPhysicalPoint(n.center))),e.control1=i.toDomainPoint(Point.AddPhysical(t,i.toPhysicalPoint(n.control1))),e.control2=i.toDomainPoint(Point.AddPhysical(t,i.toPhysicalPoint(n.control2))),o.prototype.moveTo.call(this,t)},Tools.registerHandler(i)});var LineAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{start:{domX:0,domY:0,form:"none"},end:{domX:0,domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});t.type=function(){return"line"},Annotation._register(t)});Michelangelo.LineAnnotation=LineAnnotation;var ValueLineAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{domY:0,start:{domX:0,form:"none"},end:{domX:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});t.type=function(){return"value line"},Annotation._register(t)});Michelangelo.ValueLineAnnotation=ValueLineAnnotation;var TimeLineAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{domX:0,start:{domY:0,form:"none"},end:{domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});t.type=function(){return"time line"},Annotation._register(t)});Michelangelo.TimeLineAnnotation=TimeLineAnnotation;var DataPointCalloutAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{domX:0,isEndPointHorizontal:!1,start:{domY:0,form:"none"},end:{domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});t.type=function(){return"datapoint callout"},Annotation._register(t)}),EffectiveEnds,LineHandlerBase,LineHandler,ValueLineHandler,TimeLineHandler,DataPointCalloutHandler;Michelangelo.DataPointCalloutAnnotation=DataPointCalloutAnnotation;var EffectiveEnds=__base(function(t){t(function(t,e){this.inherited=t,this.hitable=e})}),LineHandlerBase=__inherit(AnnotationHandler,function(s,t){t=t(function(t,e){s.call(this,t,e)});t.prototype.createOnNoDrag=function(){return!!this.constraint()},t.prototype.getDomainPosition=function(t){return s.prototype.getDomainPosition.call(this,t)},t.prototype.constraint=function(){return null};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.endLineForm,"end.form"]);t.prototype._map=function(){return e},t.prototype.add=function(){this.__hostElement=this._createHostElement("foreground"),this.__hostElement.classed("line",!0).attr("visibility","collapse").append("line").classed("line hit-helper",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("style","stroke-width: 5px; stroke: white").attr("opacity",0),this.__hostElement.append("line").classed("start-extension",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end-extension",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("line visible",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),s.prototype.add.call(this)},t.prototype.update=function(){var t=this.annotation(),e=this.physicalStart(),n=this.physicalEnd(),i=this.__updateLineExt(e,n,t.start.form,t.form,".start-extension"),r=this.__updateLineExt(n,e,t.end.form,t.form,".end-extension"),o=AnnotationHandler.neatenPoint(i.inherited,t.thickness||1),a=AnnotationHandler.neatenPoint(r.inherited,t.thickness||1),n=this.__applyLineTerminator(".terminator.start",t.start.form,a,o,t.thickness||1,t.color||UnknownToolColor),e=this.__applyLineTerminator(".terminator.end",t.end.form,o,a,t.thickness||1,t.color||UnknownToolColor);n&&(o=n(a,o)),e&&(a=e(o,a));a=this.__hostElement.attr("visibility",null).select(".line.visible").attr("x1",o.physX).attr("y1",o.physY).attr("x2",a.physX).attr("y2",a.physY).attr("stroke",t.thickness<=0?"none":t.color||UnknownToolColor).attr("stroke-width",t.thickness||1);AnnotationHandler.applyLineForm(a,t.form),this.__hostElement.select(".line.hit-helper").attr("x1",i.hitable.physX).attr("y1",i.hitable.physY).attr("x2",r.hitable.physX).attr("y2",r.hitable.physY),s.prototype.update.call(this)},t.prototype.__applyArrow=function(t,e,n,i,r,o){var a=180*Math.atan2(i.physY-n.physY,i.physX-n.physX)/Math.PI,n=this.__hostElement.selectAll(t);"arrow"===e?((n=n.data([1])).enter().append("polygon").classed(t.replace(/\./g," "),!0).attr("points","0,0 -8,5, -8, -5"),n.attr("transform","translate("+i.physX+" "+i.physY+") rotate("+a+") ").attr("fill",o).attr("stroke",o).attr("stroke-width",r)):n.remove()},t.prototype.__applyLineTerminator=function(t,e,n,i,r,o){var a=180*Math.atan2(i.physY-n.physY,i.physX-n.physX)/Math.PI,s=this.__hostElement.selectAll(t),n=LineTerminators.getTerminatorFunc(e);if(e&&n){a=n(s,r,o,"translate("+i.physX+" "+i.physY+") rotate("+a+") ");return(s=a.selection).classed(t.replace(/\./g," "),!0),a.mutator}s.remove()},t.prototype.__updateLineExt=function(t,e,n,i,r){var o;if(!n||"none"===n||LineTerminators.isLineTerminator(n))this.__hostElement.selectAll(r).attr("visibility","hidden"),o=new EffectiveEnds(t,t);else{var a=this.context(),s=this.annotation(),l=Math.atan2(t.physY-e.physY,e.physX-t.physX),h=t.physY===e.physY?Point.Physical(t.physX>=e.physX?a.toVisibleX(1):a.toVisibleX(0),t.physY):(a=t.physY<e.physY?a.toVisibleY(1):a.toVisibleY(0),Point.Physical(t.physX+(t.physY-a)/Math.tan(l),a)),u=this.__hostElement.selectAll(r).attr("visibility",null).attr("x1",h.physX).attr("y1",h.physY).attr("x2",t.physX).attr("y2",t.physY).attr("stroke",s.color||UnknownToolColor).attr("stroke-width",s.thickness||1);if(i===(n="inherit"===n?i:n))u.attr("visibility","hidden"),o=new EffectiveEnds(h,h);else switch(n){case"dashed":u.attr("stroke-dasharray","6 6"),o=new EffectiveEnds(t,h);break;case"dotted":u.attr("stroke-dasharray","3 5"),o=new EffectiveEnds(t,h);break;default:u.attr("stroke-dasharray",null),o=new EffectiveEnds(t,h)}}return o},t.prototype._createOverlays=function(){var e=this;return[new DragHandle(this,function(t){e.physicalStart(t)},function(){return e.physicalStart()}),new DragHandle(this,function(t){e.physicalEnd(t)},function(){return e.physicalEnd()},"start")]},t.prototype.moveTo=function(t){var e=this.context();this.physicalStart(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.end))),s.prototype.moveTo.call(this,t)}}),LineHandler=__inherit(LineHandlerBase,function(n,t){var i=t(function(t,e){n.call(this,t,e)});i.annotationType=function(){return LineAnnotation},i.displayInfo=function(){return{name:"Line",precedence:10,instruction:"Click and drag in the chart to draw a line."}},i.prototype.getDomainPosition=function(){var t=this.annotation(),e=[{field:"startX",label:"Start X",value:t.start.domX},{field:"startY",label:"Start Y",value:t.start.domY},{field:"endX",label:"End X",value:t.end.domX},{field:"endY",label:"End X",value:t.end.domY}],t=this.physicalStart(),t={positionData:e,annotationName:i.displayInfo().name,physicalPosition:t};return n.prototype.getDomainPosition.call(this,t)},i.dragCreate=function(t,e){var n=new LineAnnotation,e=t.toDomainPoint(e);return n.start={domX:e.domX,domY:e.domY,form:"none"},n.end={domX:e.domX,domY:e.domY,form:"none"},new LineHandler(n,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){return arguments.length?(_.assign(this.annotation().start,this.context().toDomainPoint(t)),this):this.context().toPhysicalPoint(this.annotation().start)},i.prototype.physicalEnd=function(t){return arguments.length?(_.assign(this.annotation().end,this.context().toDomainPoint(t)),this):this.context().toPhysicalPoint(this.annotation().end)},Tools.registerHandler(i)}),ValueLineHandler=__inherit(LineHandlerBase,function(n,t){var i=t(function(t,e){n.call(this,t,e)});i.annotationType=function(){return ValueLineAnnotation},i.displayInfo=function(){return{name:"Value Line",precedence:10.1,instruction:"Click and drag in the chart to draw a value line."}};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startValue,"domY"]);i.prototype._map=function(){return e},i.prototype.getDomainPosition=function(){var t=[{field:"yValue",label:"Y Axis Value",value:this.annotation().domY,valueType:"dollar"}],e=this.physicalStart(),e={positionData:t,annotationName:i.displayInfo().name,physicalPosition:e};return n.prototype.getDomainPosition.call(this,e)},i.prototype.constraint=function(){return"value"},i.dragCreate=function(t,e){var n=new ValueLineAnnotation;return n.domY=t.toDomainY(e.physY),n.start={domX:t.toDomainX(e.physX),form:"inherit"},n.end={domX:t.toDomainX(e.physX+1),form:"inherit"},new ValueLineHandler(n,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={domY:t.domY,start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.start.domX=e.toDomainX(t.physX),n.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(n.start.domX),e.toPhysicalY(n.domY))},i.prototype.physicalEnd=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.end.domX=e.toDomainX(t.physX),n.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(n.end.domX),e.toPhysicalY(n.domY))},Tools.registerHandler(i)}),TimeLineHandler=__inherit(LineHandlerBase,function(n,t){var i=t(function(t,e){n.call(this,t,e)});i.annotationType=function(){return TimeLineAnnotation},i.displayInfo=function(){return{name:"Time Line",precedence:10.2,instruction:"Click and drag in the chart to draw a time line."}};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startDate,"domX"]);i.prototype._map=function(){return e},i.prototype.getDomainPosition=function(){var t=[{field:"xValue",label:"Date",value:this.annotation().domX,valueType:"date"}],e=this.physicalStart(),e={positionData:t,annotationName:i.displayInfo().name,physicalPosition:e};return n.prototype.getDomainPosition.call(this,e)},i.prototype.constraint=function(){return"time"},i.dragCreate=function(t,e){var n=new TimeLineAnnotation;return n.domX=t.toDomainX(e.physX),n.start={domY:t.toDomainY(e.physY),form:"inherit"},n.end={domY:t.toDomainY(e.physY+1),form:"inherit"},new TimeLineHandler(n,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={domX:t.domX,start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.domX=e.toDomainX(t.physX),n.start.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(n.domX),e.toPhysicalY(n.start.domY))},i.prototype.physicalEnd=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.domX=e.toDomainX(t.physX),n.end.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(n.domX),e.toPhysicalY(n.end.domY))},Tools.registerHandler(i)}),DataPointCalloutHandler=__inherit(LineHandlerBase,function(i,t){var n=t(function(t,e){i.call(this,t,e)});n.annotationType=function(){return DataPointCalloutAnnotation};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.startDate,{path:"start.domX",func:function(t,e,n){n=o(e,n);t.start.domY=n}}]);function o(t,a){return t.getYValueForSeries(function(t,e){var n=0<t.data.length?t.data:t.groupedData,i={diff:1/0},r={diff:-1/0};n.forEach(function(t){var e=t.x-a,t={point:t,diff:e};e<0?r=e>r.diff?t:r:i=e<i.diff?t:i});var o=r.point,t=i.point,n=e(o),t=(e(t)-n)/(t.x-o.x);return(a-o.x)*t+n})}n.prototype._map=function(){return e},n.displayInfo=function(){return{name:"Data Point Callout",precedence:10,instruction:"Click on the chart to add. Click and drag the outside box to rotate."}},n.prototype.getDomainPosition=function(){var t=this.annotation(),e=[{field:"xValue",label:"Date",value:t.start.domX,valueType:"date"},{field:"startY",label:"Value",value:t.start.domY,valueType:"dollar"}],t=this.physicalStart(),t={positionData:e,annotationName:n.displayInfo().name,physicalPosition:t};return i.prototype.getDomainPosition.call(this,t)},n.prototype._createOverlays=function(){var e=this;return[new DragHandle(this,function(t){e.physicalStart(t)},function(){return e.physicalStart()},"start"),new DragHandle(this,function(t){e.rotateLine(t)},function(){return e.physicalEnd()},"",{shape:"rect",attrs:{x:-7.5,y:0,height:15,width:15,fill:"#FA1E1E",stroke:"#46869b"}})]},n.dragCreate=function(t,e){var n=new DataPointCalloutAnnotation,i=t.toDomainX(e.physX),r=o(t,n.domX=i);return n.start={domY:r,domX:i,form:"none"},n.end={domY:t.toDomainY(e.physY),domX:i,form:"none"},new DataPointCalloutHandler(n,t)},n.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={domX:t.domX,start:_.clone(t.start),end:_.clone(t.end)}},n.prototype.physicalStart=function(t){var e=this.context(),n=this.annotation();if(!arguments.length)return Point.Physical(e.toPhysicalX(n.start.domX),e.toPhysicalY(n.start.domY));var i=e.toDomainX(t.physX),e=o(e,i);return n.start.domX=i,n.start.domY=e,this},n.prototype.physicalEnd=function(t){var e,n=this.context(),i=this.annotation();if(!arguments.length)return r=i.isEndPointHorizontal?(e=i.end.domX,i.start.domY):(e=i.start.domX,i.end.domY),Point.Physical(n.toPhysicalX(e),n.toPhysicalY(r));var r=n.toDomainX(t.physX),n=n.toDomainY(t.physY);i.end.domX=r,i.end.domY=n},n.prototype.rotateLine=function(t){var e=this.physicalStart(),n=t.physX-e.physX,i=e.physY-t.physY,t=(0,{topSnap:function(t,e){return{physX:t.physX,physY:e.physY,isHorizontal:!1}},leftSnap:function(t,e){return{physX:e.physX,physY:t.physY,isHorizontal:!0}},bottomSnap:function(t,e){return{physX:t.physX,physY:e.physY,isHorizontal:!1}},rightSnap:function(t,e){return{physX:e.physX,physY:t.physY,isHorizontal:!0}}}[45<=(n=Math.atan2(i,n)*(180/Math.PI))&&n<=135?"topSnap":n<=-135||135<=n?"leftSnap":-45<=n&&n<=45?"rightSnap":-135<=n&&n<=-45?"bottomSnap":void 0])(e,t);this.annotation().isEndPointHorizontal=t.isHorizontal,this.physicalEnd(t)},n.prototype.moveTo=function(t,e){var n=this.context();if(!e)return this.physicalStart(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.start))),void this.physicalEnd(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.end)));this.physicalStart(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.end))),i.prototype.moveTo.call(this,t)},Tools.registerHandler(n)}),RegionAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{from:Point.Domain(0,0),to:Point.Domain(0,0),color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});t.type=function(){return"region"},Annotation._register(t)});Michelangelo.RegionAnnotation=RegionAnnotation,__inherit(AnnotationHandler,function(i,t){var r=t(function(t,e){i.call(this,t,e)});r.annotationType=function(){return RegionAnnotation},r.displayInfo=function(){return{name:"Region",precedence:40,instruction:"Click and drag in the chart to highlight a region."}},r.dragCreate=function(t,e){var n=new RegionAnnotation;return n.from=t.toDomainPoint(e),n.to=t.toDomainPoint(e),new r(n,t)};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);r.prototype._map=function(){return e},r.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={from:_.clone(t.from),to:_.clone(t.to)}},r.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("region",!0).attr("visibility","collapse").append("rect").classed("fill",!0).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("stroke","none").attr("opacity",.25),this.__hostElement.append("rect").classed("outline",!0).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("stroke","none"),i.prototype.add.call(this)},r.prototype.update=function(){var t=this.context(),e=this.annotation(),t=Rect.FromPhysical(AnnotationHandler.neatenPoint(t.toPhysicalPoint(e.from),e.borderThickness||1),AnnotationHandler.neatenPoint(t.toPhysicalPoint(e.to),e.borderThickness||1));this.__hostElement.attr("visibility",null).select(".fill").attr("x",t.physLeft).attr("y",t.physTop).attr("width",t.physRight-t.physLeft).attr("height",t.physBottom-t.physTop).attr("fill",e.color||UnknownToolColor);t=this.__hostElement.select(".outline").attr("x",t.physLeft).attr("y",t.physTop).attr("width",t.physRight-t.physLeft).attr("height",t.physBottom-t.physTop).attr("stroke",e.borderThickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.borderThickness);AnnotationHandler.applyLineForm(t,e.borderForm),i.prototype.update.call(this)},r.prototype._createOverlays=function(){var e=this.context(),n=this.annotation();return[new DragHandle(this,function(t){n.from.domX=e.toDomainX(t.physX)},function(){return e.toPhysicalPoint(Point.Domain(n.from.domX,(n.from.domY+n.to.domY)/2))}),new DragHandle(this,function(t){n.to.domX=e.toDomainX(t.physX)},function(){return e.toPhysicalPoint(Point.Domain(n.to.domX,(n.from.domY+n.to.domY)/2))}),new DragHandle(this,function(t){n.from.domY=e.toDomainY(t.physY)},function(){return e.toPhysicalPoint(Point.Domain((n.from.domX+n.to.domX)/2,n.from.domY))}),new DragHandle(this,function(t){n.to.domY=e.toDomainY(t.physY)},function(){return e.toPhysicalPoint(Point.Domain((n.from.domX+n.to.domX)/2,n.to.domY))}),new DragHandle(this,function(t){n.from=e.toDomainPoint(t)},function(){return e.toPhysicalPoint(n.from)}),new DragHandle(this,function(t){n.to=e.toDomainPoint(t)},function(){return e.toPhysicalPoint(n.to)},"start"),new DragHandle(this,function(t){n.to.domX=e.toDomainX(t.physX),n.from.domY=e.toDomainY(t.physY)},function(){return e.toPhysicalPoint(Point.Domain(n.to.domX,n.from.domY))}),new DragHandle(this,function(t){n.from.domX=e.toDomainX(t.physX),n.to.domY=e.toDomainY(t.physY)},function(){return e.toPhysicalPoint(Point.Domain(n.from.domX,n.to.domY))})]},r.prototype.moveTo=function(t){var e=this.context(),n=this.annotation();n.from=e.toDomainPoint(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.from))),n.to=e.toDomainPoint(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.to))),i.prototype.moveTo.call(this,t)},Tools.registerHandler(r)});var TextAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{location:location,text:"Text",font:"Arial",fontSize:5,alignment:"left",color:UnknownToolColor})});t.type=function(){return"text"},Annotation._register(t)});Michelangelo.TextAnnotation=TextAnnotation,__inherit(AnnotationHandler,function(n,t){var i=t(function(t,e){n.call(this,t,e)});i.annotationType=function(){return TextAnnotation},i.displayInfo=function(){return{name:"Text",precedence:100,instruction:"Click in the chart to add text."}},i.prototype.createOnNoDrag=function(){return!0},i.dragCreate=function(t,e){var n=new TextAnnotation;return n.location=t.toDomainPoint(e),new i(n,t)};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.text,"text"],[Symbols.fontFamily,"font"],[Symbols.fontSize,"fontSize"],[Symbols.textAlignment,"alignment"]);i.prototype._map=function(){return e},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={location:_.clone(t.location)}},i.prototype.add=function(){this.__hostElement=this._createHostElement("foreground"),this.__hostElement.classed("text",!0).attr("visibility","collapse"),n.prototype.add.call(this)},i.prototype.update=function(){var i=this,t=this.context(),r=this.annotation(),s=AnnotationHandler.neatenPoint(t.toPhysicalPoint(r.location),2),l="start";switch(r.alignment){case"right":l="end";break;case"center":l="middle"}this.__hostElement.attr("visibility",null).selectAll("text").remove();var h=Math.max(6,Math.abs(t.toVisibleY(1)-t.toVisibleY(0))*(r.fontSize||5)/100);_.chain(r.text.replace(/<\/?p>/g,"").split(/\n/)).map(function(t,e){var o,a,t=_.chain((o={strong:0,em:0,noop:0},a=[],t.replace(/([^<]+)|<(\/)?(strong|b)?(em|i)?>/g,function(t,e,n,i,r){r=i?"strong":r?"em":"noop";e?a.push({text:e,tag:(o.strong?"b":"")+(o.em?"i":"")}):n?o[r]--:o[r]++}),a)).select(function(t){return 0<t.text.length}).value(),n=i.__hostElement.append("text").attr("x",s.physX).attr("y",s.physY+h*e).attr("fill",r.color||UnknownToolColor).attr("font-family",r.font||"Arial").attr("font-size",h).attr("text-anchor",l).attr("style","cursor: default");_.each(t,function(t){n.append("tspan").text(t.text.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")).attr("xml:space","preserve").attr("style","font-weight: "+(-1===t.tag.indexOf("b")?"normal":"bold")+"; font-style: "+(-1===t.tag.indexOf("i")?"normal":"italic"))})}),n.prototype.update.call(this)},i.prototype._createOverlays=function(){var e=this.context(),n=this.annotation();return[new DragHandle(this,function(t){n.location=e.toDomainPoint(t)},function(){return e.toPhysicalPoint(n.location)},"start")]},i.prototype.moveTo=function(t){var e=this.context();this.annotation().location=e.toDomainPoint(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.location))),n.prototype.moveTo.call(this,t)},Tools.registerHandler(i)});var TimeRangeAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{startTime:0,endTime:0,color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});t.type=function(){return"time range"},Annotation._register(t)});Michelangelo.TimeRangeAnnotation=TimeRangeAnnotation;var TimeRangeHandler=__inherit(AnnotationHandler,function(i,t){var n=t(function(t,e){i.call(this,t,e)});n.annotationType=function(){return TimeRangeAnnotation},n.displayInfo=function(){return{name:"Time Range",precedence:20,instruction:"Click and drag in the chart to highlight a time range."}},n.dragCreate=function(t,e){var n=new TimeRangeAnnotation;return n.startTime=t.toDomainX(e.physX),n.endTime=t.toDomainX(e.physX),new TimeRangeHandler(n,t)};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"],[Symbols.startDate,"startTime"],[Symbols.endDate,"endTime"]);n.prototype._map=function(){return e},n.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={startTime:t.startTime,endTime:t.endTime}},n.prototype.getDomainPosition=function(){var t=this.annotation(),e=[{field:"startDate",label:"Start Date",value:t.startTime,valueType:"date"},{field:"endDate",label:"End Date",value:t.endTime,valueType:"date"}],t=this.physicalStart(),t={positionData:e,annotationName:n.displayInfo().name,physicalPosition:t};return i.prototype.getDomainPosition.call(this,t)},n.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("time-range",!0).attr("visibility","collapse").append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("opacity",.25),this.__hostElement.append("line").classed("start",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),i.prototype.add.call(this)},n.prototype.update=function(){var t=this.context(),e=this.annotation(),n=Rect.Physical(t.toVisibleY(1),AnnotationHandler.neatenValue(t.toPhysicalX(e.startTime),e.borderThickness||1),t.toVisibleY(0),AnnotationHandler.neatenValue(t.toPhysicalX(e.endTime),e.borderThickness||1)),t=this.__hostElement.attr("visibility",null).select("line.start").attr("x1",n.physLeft).attr("y1",n.physTop).attr("x2",n.physLeft).attr("y2",n.physBottom).attr("stroke",e.borderThickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.borderThickness||1);AnnotationHandler.applyLineForm(t,e.borderForm);t=this.__hostElement.select("line.end").attr("x1",n.physRight).attr("y1",n.physTop).attr("x2",n.physRight).attr("y2",n.physBottom).attr("stroke",e.borderThickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.borderThickness||1);AnnotationHandler.applyLineForm(t,e.borderForm),this.__hostElement.select("rect").attr("x",n.physLeft).attr("y",n.physTop).attr("width",n.physRight-n.physLeft).attr("height",n.physBottom-n.physTop).attr("fill",e.color||UnknownToolColor),i.prototype.update.call(this)},n.prototype._createOverlays=function(){var e=this;return[new DragHandle(this,function(t){e.physicalStart(t)},function(){return e.physicalStart()}),new DragHandle(this,function(t){e.physicalEnd(t)},function(){return e.physicalEnd()},"start")]},n.prototype.physicalStart=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.startTime=e.toDomainX(t.physX),this):Point.Physical(e.toPhysicalX(n.startTime),e.toVisibleY(.5))},n.prototype.physicalEnd=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.endTime=e.toDomainX(t.physX),this):Point.Physical(e.toPhysicalX(n.endTime),e.toVisibleY(.5))},n.prototype.moveTo=function(t){var e=this.context(),n=this.annotation();n.startTime=e.toDomainX(t.physX+e.toPhysicalX(this.__initialDragData.startTime)),n.endTime=e.toDomainX(t.physX+e.toPhysicalX(this.__initialDragData.endTime)),i.prototype.moveTo.call(this,t)},Tools.registerHandler(n)}),ValueRangeAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{start:0,end:0,color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});t.type=function(){return"value range"},Annotation._register(t)});Michelangelo.ValueRangeAnnotation=ValueRangeAnnotation;var ValueRangeHandler=__inherit(AnnotationHandler,function(i,t){var n=t(function(t,e){i.call(this,t,e)});n.annotationType=function(){return ValueRangeAnnotation},n.displayInfo=function(){return{name:"Time Range",precedence:20,instruction:"Click and drag in the chart to highlight a value range."}},n.prototype.getDomainPosition=function(){var t=this.annotation(),e=[{field:"startValue",label:"From",value:t.start,valueType:"dollar"},{field:"endValue",label:"To",value:t.end,valueType:"dollar"}],t=this.physicalStart(),t={positionData:e,annotationName:n.displayInfo().name,physicalPosition:t};return i.prototype.getDomainPosition.call(this,t)},n.dragCreate=function(t,e){var n=new ValueRangeAnnotation;return n.start=t.toDomainY(e.physY),n.end=t.toDomainY(e.physY),new ValueRangeHandler(n,t)};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"],[Symbols.startValue,"start"],[Symbols.endValue,"end"]);n.prototype._map=function(){return e},n.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={start:t.start,end:t.end}},n.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("time-range",!0).attr("visibility","collapse").append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("opacity",.25),this.__hostElement.append("line").classed("start",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),i.prototype.add.call(this)},n.prototype.update=function(){var t=this.context(),e=this.annotation(),n=Rect.Physical(AnnotationHandler.neatenValue(t.toPhysicalY(e.start),e.borderThickness||1),t.toVisibleX(0),AnnotationHandler.neatenValue(t.toPhysicalY(e.end),e.borderThickness||1),t.toVisibleX(1)),t=this.__hostElement.attr("visibility",null).select("line.start").attr("x1",n.physLeft).attr("y1",n.physTop).attr("x2",n.physRight).attr("y2",n.physTop).attr("stroke",e.borderThickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.borderThickness||1);AnnotationHandler.applyLineForm(t,e.borderForm);t=this.__hostElement.select("line.end").attr("x1",n.physLeft).attr("y1",n.physBottom).attr("x2",n.physRight).attr("y2",n.physBottom).attr("stroke",e.borderThickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.borderThickness||1);AnnotationHandler.applyLineForm(t,e.borderForm),this.__hostElement.select("rect").attr("x",n.physLeft).attr("y",n.physTop).attr("width",n.physRight-n.physLeft).attr("height",n.physBottom-n.physTop).attr("fill",e.color||UnknownToolColor),i.prototype.update.call(this)},n.prototype._createOverlays=function(){var e=this;return[new DragHandle(this,function(t){e.physicalStart(t)},function(){return e.physicalStart()}),new DragHandle(this,function(t){e.physicalEnd(t)},function(){return e.physicalEnd()},"start")]},n.prototype.physicalStart=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.start=e.toDomainY(t.physY),this):Point.Physical(e.toVisibleX(.5),e.toPhysicalY(n.start))},n.prototype.physicalEnd=function(t){var e=this.context(),n=this.annotation();return arguments.length?(n.end=e.toDomainY(t.physY),this):Point.Physical(e.toVisibleX(.5),e.toPhysicalY(n.end))},n.prototype.moveTo=function(t){var e=this.context(),n=this.annotation();n.start=e.toDomainY(t.physY+e.toPhysicalY(this.__initialDragData.start)),n.end=e.toDomainY(t.physY+e.toPhysicalY(this.__initialDragData.end)),i.prototype.moveTo.call(this,t)},Tools.registerHandler(n)}),CurvedLineAnnotation=__inherit(Annotation,function(e,t){t=t(function(t){e.call(this,t),_.defaults(this,{start:{domX:0,domY:0,form:"arrow"},end:{domX:0,domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid",isConcave:!0})});t.type=function(){return"curved line"},Annotation._register(t)}),CurvedLineHandler;Michelangelo.CurvedLineAnnotation=CurvedLineAnnotation;var CurvedLineHandler=__inherit(AnnotationHandler,function(l,t){t=t(function(t,e){l.call(this,t,e)});t.annotationType=function(){return CurvedLineAnnotation},t.displayInfo=function(){return{name:"Curved Line",precedence:15,instruction:"Click and drag to create quarter circle line"}},t.prototype.createOnNoDrag=function(){return!!this.constraint()},t.prototype.constraint=function(){return"date"};var e=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.isConcave,"isConcave"]);function h(){var t=Math.PI/2,i={stroke:"none"},r=d3.scale.linear().domain([0,59]).range([0,t]),o=20;function e(t){var e=d3.svg.line.radial().interpolate("basis").radius(o).angle(function(t,e){return r(e)}),n=d3.range(60);return t.datum(n).attr(i).attr("d",e),t}return e.radius=function(t){return arguments.length?(o=t,e):o},e.attrs=function(t){return arguments.length?(i=t,e):i},e}function u(t,e,n){var i=e.physX-t.physX,e=0<=(n?e.physY-t.physY:t.physY-e.physY);return 0<=i?e?"Q1":"Q4":e?"Q2":"Q3"}t.prototype._map=function(){return e},t.prototype.add=function(){this.__hostElement=this._createHostElement("foreground");var t=this.__hostElement.classed("curved-line",!0).attr("visibility","collapse"),e=h().attrs({fill:"none","stroke-width":"5px",stroke:"white",opacity:"0"});t.append("path").call(e).classed("curved-line hit-helper",!0),t.append("path").call(h()).classed("curved-line visible",!0),l.prototype.add.call(this)},t.prototype.update=function(){var t,e=this.annotation(),n=this.physicalStart(),i=this.physicalEnd(),r=AnnotationHandler.neatenPoint(n,e.thickness||1),o=AnnotationHandler.neatenPoint(i,e.thickness||1),a=r.physY-o.physY,n=(t=e.isConcave,i=u(s=r,n=o),n=s.physY-n.physY,"translate("+(i={Q1:{concave:{rotation:-90,getTranslation:function(t,e){return[t+e.physX,e.physY]}},convex:{rotation:90,getTranslation:function(t,e){return[e.physX,e.physY-t]}}},Q2:{concave:{rotation:0,getTranslation:function(t,e){return[e.physX-t,e.physY]}},convex:{rotation:180,getTranslation:function(t,e){return[e.physX,e.physY-t]}}},Q3:{concave:{rotation:-90,getTranslation:function(t,e){return[e.physX+t,e.physY]}},convex:{rotation:90,getTranslation:function(t,e){return[e.physX,e.physY-t]}}},Q4:{concave:{rotation:0,getTranslation:function(t,e){return[e.physX-t,e.physY]}},convex:{rotation:180,getTranslation:function(t,e){return[e.physX,e.physY-t]}}}}[i][t?"concave":"convex"]).getTranslation(n,s)+"), rotate("+i.rotation+")"),s=this.__hostElement,i={fill:"none",stroke:e.color||UnknownToolColor,"stroke-width":e.thickness||1,transform:n},a=h().radius(a).attrs(i),i=s.attr("visibility",null).select(".curved-line.visible").call(a);AnnotationHandler.applyLineForm(i,e.form);n=a.attrs({fill:"none","stroke-width":"5px",stroke:"white",opacity:"0",transform:n});s.select(".curved-line.hit-helper").call(n),this.__applyLineTerminator(".terminator.start",e.start.form,r,o,e.thickness||1,e.color||UnknownToolColor,e.isConcave),l.prototype.update.call(this)},t.prototype.__applyLineTerminator=function(t,e,n,i,r,o,a){var s={Q1:{concave:90,convex:180},Q2:{concave:90,convex:0},Q3:{concave:-90,convex:0},Q4:{concave:-90,convex:180}}[u(n,i)][a?"concave":"convex"],i=this.__hostElement.selectAll(t),a=LineTerminators.getTerminatorFunc(e);if(e&&a){s=a(i,r,o,"translate("+n.physX+" "+n.physY+") rotate("+s+") ");return(i=s.selection).classed(t.replace(/\./g," "),!0),s.mutator}i.remove()},t.prototype._createOverlays=function(){var e=this;return[new DragHandle(this,function(t){e.physicalStart(t)},function(){return e.physicalStart()},"start"),new DragHandle(this,function(t){e.physicalEnd(t)},function(){return e.physicalEnd()},"",{shape:"circle",attrs:{r:10,cx:0,cy:0,fill:"#41BAC1","fill-opacity":.5,stroke:"#41BAC1"}})]},t.dragCreate=function(t,e){var n=new CurvedLineAnnotation,i=t.toDomainPoint(e),e=t.toDomainPoint({physX:e.physX-70,physY:e.physY-70});return n.start={domX:i.domX,domY:i.domY,form:"arrow"},n.end={domX:e.domX,domY:e.domY,form:"none"},new CurvedLineHandler(n,t)},t.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={start:_.clone(t.start),end:_.clone(t.end)}},t.prototype.physicalStart=function(t){var e=this.context(),n=this.annotation();if(!arguments.length)return this.context().toPhysicalPoint(n.start);var i=this.physicalStart(),r=Point.PhysicalDifference(t,i),i=this.physicalEnd(),r=Point.AddPhysical(i,r);return n.end.domX=e.toDomainX(r.physX),n.end.domY=e.toDomainY(r.physY),_.assign(n.start,e.toDomainPoint(t)),this},t.prototype.physicalEnd=function(t){var e=this.context(),n=this.annotation();if(!arguments.length)return this.context().toPhysicalPoint(n.end);var i=this.physicalStart(),r=u(i,t,!0),o=-1<["Q1","Q3"].indexOf(r)?1:-1,r=t.physX-i.physX,r=i.physY+r*o,o=e.toDomainX(t.physX),r=e.toDomainY(r);return n.end.domX=o,n.end.domY=r,this},t.prototype.moveTo=function(t){var e=this.context();this.physicalStart(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(t,e.toPhysicalPoint(this.__initialDragData.end))),l.prototype.moveTo.call(this,t)},Tools.registerHandler(t)}),PostProcessor=__base(function(t){function u(t,e){var n,i=document.createElementNS("http://www.w3.org/2000/svg",t);for(n in e)n&&i.setAttribute(n,e[n]);return i}function c(t,e,n){return t=u(t,n),e&&(n=[],e.fontSize&&n.push("font-size:"+e.fontSize),e.fontFamily&&n.push("font-family:"+e.fontFamily),e.color&&n.push("fill:"+e.color),n.length&&t.setAttribute("style",n.join(";"))),t}function p(t,e){return t&&t.mikeStyle&&t.mikeStyle[e]?t.mikeStyle[e]:{}}function l(a,t,s,e){var l=p(e,"indicatorLabels"),h=(e=s.xAxis[0]).toPixels(e.getExtremes().min);$.each(t.panes,function(t,e){var n,i,r=e.axes[0].getActualAxis(s),o=r.toPixels(r.getExtremes().max),r=(n=[],i=null,$.each(e.axes,function(t,e){0<e.labels.length?n.push(e.labels.slice(0)):e.title&&!i&&(i=e.title)}),0===n.length&&i&&n.push(i),n.join(", "));r&&(e=c("text",l.style,{x:h,y:o,"z-index":1}),o=u("tspan",{dy:"1em"}),e.appendChild(o),o.appendChild(document.createTextNode(r)),a.append(e))})}t=t(function(){});t.exec=function(t,e,n){var i,r,o=$(n.container).find("svg"),a=t.def(),s=e.style;a.showTimestamp&&function(t,e){var n=p(s,"timestamp"),i="%m/%d/%y %l:%M %P";n.dateFormat&&(i=n.dateFormat);i=Highcharts.dateFormat(i,new Date),e=c("text",n.style,{x:e.renderWidth()-2,y:e.renderHeight()-2,"z-index":1,"text-anchor":"end"});e.appendChild(document.createTextNode(i)),t.append(e)}(o,t),a.showIndicatorLabels&&l(o,e,n,s),i=o,(r=p(s,"injectCss"))&&0<r.length&&(0<(a=i.find("defs")).length&&(i=u("style",{type:"text/css"}),r=r.join(" "),i.appendChild(document.createTextNode(r)),a.append(i)));n={svg:o,quotes:e.quotes,chart:n};t.notify("svg.ready",n)}});Michelangelo.PostProcessor=PostProcessor;var RenderContext=__base(function(t){t=t(function(t,e,n,i,r,o){this.__host=t,this.__def=e,this.__renderSize=n,this.__notifier=i||Michelangelo.Notifier.Null(),this.__immediate=!!r,this.__editExecutor=o});t.prototype.host=function(){return this.__host},t.prototype.def=function(){return this.__def},t.prototype.renderWidth=function(){return this.__renderSize.width},t.prototype.renderHeight=function(){return this.__renderSize.height},t.prototype.notify=function(t,e){this.__notifier.notify(t,e)},t.prototype.notifier=function(){return this.__notifier},t.prototype.immediate=function(){return this.__immediate},t.prototype.editExecutor=function(){return this.__editExecutor}});Michelangelo.RenderContext=RenderContext;var Renderer=__base(function(t){t=t(function(){});t.prototype.measure=function(){mustOverride()},t.prototype.render=function(){mustOverride()},t.prototype.unrender=function(){mustOverride()},t.prototype.edit=function(){return null},t.prototype.editor=function(){return null},t.prototype.canEdit=function(){return!1}}),HighstockRenderer=__inherit(Renderer,function(r,t){t=t(function(t,e,n,i){r.call(this),this.__lastDataGrouping=null,this.__notifier=e,this.__chart=null,this.__annotationManager=i?{render:function(){},redraw:function(){},unrender:function(){},edit:function(){},canEdit:function(){return!1},editor:function(){return null}}:new AnnotationManager(t,e,n)});t.prototype.edit=function(t){this.__annotationManager.edit(t)},t.prototype.editor=function(){return this.__annotationManager.editor()},t.prototype.canEdit=function(t){return this.__annotationManager.canEdit(t)},t.prototype.__isEditing=function(){return!!this.__annotationManager.editor()},t.prototype.measure=function(t,e){this.__renderModel=null;var n=t.def();try{var i={width:t.renderWidth(),height:t.renderHeight()};if(!e)return"auto"===i.height&&(i.height=300),i;var r=this.__assimilateStyle(n);t.notify("style.hook",{style:r,model:n}),this.__renderModel=new Michelangelo.RenderModel(e,n,r,i),t.notify("renderModel.built",this.__renderModel,this)}catch(e){throw t.notify("presentation.error",e,this),e}return this.__renderModel.size},t.prototype.render=function(e,t){var n=this,i=e.def();try{if(this.unrender(e.notifier()),!this.__renderModel)return this.__renderEmptyChart(i,e),$.Deferred().reject();var r=[],o=new Michelangelo.ToolTipRepository(this.__renderModel.tzData,t.TimeInfo),a=this.__buildChartConfig(i,e,t,this.__renderModel,o,r);return this.__renderModel.style.highchartsStyles&&$.extend(!0,a,this.__renderModel.style.highchartsStyles),e.notify("chartConfig.built",a,this),e.notify("tooltip.info",o,this),a.chart.events={redraw:function(){n.__annotationManager.redraw(),e.notify("chart.redrawn",null,this)}},new Highcharts.StockChart(a,function(t){try{n.__chart=t,n.__annotationManager.render(t,n.__renderModel,i,e.editExecutor()),n.__detectDataGroupingChanges(e,t),PostProcessor.exec(e,n.__renderModel,t)}catch(t){Michelangelo.Logger.log("Unhandled error in Michelangelo HighStock render callback:"),Michelangelo.Logger.log(t)}}),e.notify("bluegrass.subscribe",r,this),$.Deferred().resolve()}catch(t){return e.notify("presentation.error",t,this),$.Deferred().reject(t)}},t.prototype.unrender=function(t){this.__annotationManager.unrender(),this.__renderModel&&t.notify("bluegrass.unsubscribe",null,this),this.__chart&&(t=this.__chart,this.__chart=null,t.destroy()),this.__annotationHandlers=[]},t.prototype.privateDataOmgMakeThisGoAway=function(){return{chart:this.__chart}},t.prototype.__fontHack=function(){Michelangelo.Logger.debug("FONT HACK:");var t=$(this.__chart.container).find("svg");0!==t.length?(0===(t=t.find("defs").first()).length&&Michelangelo.Logger.debug("...no defs..."),t.append('<style type="text/css"><![CDATA[ @import url(http://fonts.googleapis.com/css?family=Walter+Turncoat); ]]></style>'),Michelangelo.Logger.debug("...font HACKED!")):Michelangelo.Logger.debug("...no SVG...")},t.prototype.__assimilateStyle=function(t){var e={};return $.extend(!0,e,Michelangelo.DefaultStyle.instance()),t.style&&$.extend(!0,e,t.style),e.highchartsYAxisStyle={},e.highchartsStyles.yAxis&&(e.highchartsYAxisStyle=e.highchartsStyles.yAxis,e.highchartsStyles.yAxis=void 0),e},t.prototype.__renderEmptyChart=function(t,e){t=this.__buildSkeletonChartConfig(t,e);e.notify("chartConfig.built",t,this),this.__chart=new Highcharts.StockChart(t),this.__chart.showLoading("No data to display")},t.prototype.__buildChartConfig=function(h,u,c,p,d,f){var g=this,m=this.__buildSkeletonChartConfig(h,u);if(!c)return m;p.title&&0<p.title.length&&(m.title={text:h.title}),p.subtitle&&0<p.subtitle.length&&(m.subtitle={text:h.subtitle}),m.legend.enabled=p.layoutContext.showLegend,m.credits.enabled=p.layoutContext.showCredits,c.TimeInfo&&c.TimeInfo.IsIntraday&&(m.rangeSelector.buttons=[{type:"minute",count:30,text:"30m"},{type:"hour",count:1,text:"1h"},{type:"hour",count:2,text:"2h"},{type:"hour",count:4,text:"4h"},{type:"day",count:1,text:"1d"},{type:"all",text:"All"}]),p.xAxis.showTitle&&(m.xAxis.title={text:p.xAxis.title}),m.xAxis.ordinal=p.xAxis.compressed,$.extend(!0,m.xAxis,{labels:{enabled:p.xAxis.showLabels}}),p.xAxis.min&&p.xAxis.max&&(m.xAxis.min=p.xAxis.min,m.xAxis.max=p.xAxis.max,m.xAxis.startOnTick=!1,m.xAxis.endOnTick=!1),m.xAxis.plotBands=[],$.each(p.xAxis.plotBands,function(t,e){var n={from:e.from,to:e.to,color:e.color,label:{text:e.name}};e.labelStyle&&$.extend(!0,n.label,e.labelStyle),m.xAxis.plotBands.push(n)}),m.xAxis.plotLines=[],$.each(p.xAxis.plotLines,function(t,e){m.xAxis.plotLines.push(e)}),p.isCompare&&(m.plotOptions.series.compare="percent");var o={};return $.each(p.panes,function(t,e){o.renderPane=e,$.each(e.axes,function(t,i){var e={opposite:!i.onLeft,title:{text:i.title},labels:{enabled:i.showLabels},plotLines:[],top:i.top,height:i.height,offset:i.offset,type:i.type};h.style&&h.style.mikeStyle&&((r=h.style.mikeStyle.multipleAxisExtensionFactorForIndicators)&&!isNaN(Number(r))&&(i.isIndicatorAxis?e.maxPadding=Number(r):0<$.grep(o.renderPane.axes,function(t){return t.isIndicatorAxis}).length&&(e.minPadding=Number(r)))),e.labels.formatter=function(){var t,e,n;return 1e4<=this.axis.tickInterval&&!i.labelUnitSymbol?(n=1,t="",1e10<=this.axis.tickInterval?(n=1e9,t="b"):1e7<=this.axis.tickInterval?(n=1e6,t="m"):1e4<=this.axis.tickInterval&&(n=1e3,t="k"),e=Highcharts.numberFormat(this.value/n,0)+t):((n=0)<=(t=this.axis.tickInterval+"").indexOf(".")&&(n=t.length-t.indexOf(".")-1),i.maxLabelDecimals&&n>i.maxLabelDecimals&&(n=i.maxLabelDecimals),i.disallowOneDecimal&&1===n&&(n=2),e=Highcharts.numberFormat(this.value,n),n=!1,"boolean"==typeof i.addYAxisUnits?n=i.addYAxisUnits:"string"==typeof i.addYAxisUnits&&("all"===i.addYAxisUnits?n=!0:"none"===i.addYAxisUnits?n=!1:"first"===i.addYAxisUnits?n=this.isFirst:"last"===i.addYAxisUnits&&(n=this.isLast)),(n=!i.labelUnitSymbol?!1:n)&&(i.labelSuffix?e+=i.labelUnitSymbol:e=i.labelUnitSymbol+e)),e};var n,r=null;h.style.mikeStyle&&h.style.mikeStyle.yAxisLabelsPadding&&(n=Number(h.style.mikeStyle.yAxisLabelsPadding),isNaN(n)||(r=n)),h.style.mikeStyle&&h.style.mikeStyle.yAxisLabelsOutside?(n=r||4,i.onLeft?(e.labels.align="right",e.labels.x=-n):(e.labels.align="left",e.labels.x=n)):h.style.mikeStyle&&!1===h.style.mikeStyle.yAxisLabelsOutside&&(i.onLeft?(e.labels.align="left",r&&(e.labels.x=r)):(e.labels.align="right",r&&(e.labels.x=-r))),$.extend(!0,e,i.axisStyle);var l=m.yAxis.length;m.yAxis.push(e),$.each(i.series,function(t,n){var e,i,r,o,a,s=Michelangelo.ServerResponseHelpers.findSeriesByResponseId(c,n.responseId);s&&(e={id:n.id,type:n.chartType,name:n.seriesName,yAxis:l,data:null,tooltip:{valueDecimals:3},sourceId:n.sourceId},(h.includeMockTick||c.TimeInfo.IsIntraday)&&s.BlueGrassChannels&&0<s.BlueGrassChannels.length&&(i=new Michelangelo.BlueGrassUpdater(h,p,n,c,u.notifier(),function(){return g.__chart}),$.each(s.BlueGrassChannels,function(t,e){f.push({channel:e.ChannelName,callback:function(t){i.messageHandler(i,t)}})})),n.seriesOptions&&$.extend(!0,e,n.seriesOptions),a=new Michelangelo.DataPointBuilder(s,c.TimeInfo,p.tzData,d,n.id),e.data=a.build(n.fieldNames),r={ticker:s.Ticker,countryCode:s.CountryCode,commonName:s.CommonName,instrumentType:s.InstrumentType,dataPoints:n.fieldNames,isIndicator:n.isIndicator,extraData:{}},s.ExtraData&&$.each(s.ExtraData,function(t,e){"PriorClose"===e.Name&&(r.extraData.priorClose={value:e.Value,hints:{decimals:3,suffix:!0,unitSymbol:""}})}),d.setCustomData(n.id,n.customToolTipData),d.setSeriesData(n.id,r),s.FormatHints&&$.each(n.fieldNames,function(t,e){d.setFormatHints(n.id,e,{decimals:s.FormatHints.DecimalPlaces,suffix:s.FormatHints.Suffix,unitSymbol:s.FormatHints.UnitSymbol})}),s.ToolTipDataPoints&&$.each(s.ToolTipDataPoints,function(t,e){"PercentChange"===e&&d.setFormatHints(n.id,e,{decimals:3,suffix:!0,unitSymbol:"%"})}),s.ExtraToolTips&&$.each(s.ExtraToolTips,function(t,e){d.addPoint(e.DateUtc,n.id,e.Name,e.Value)}),("line"===n.chartType||"area"===n.chartType||"spline"===n.chartType)&&1===e.data.length&&s.ExtraData&&c.TimeInfo.IsIntraday&&(o=s.ExtraData.filter(function(t){return"MostRecentOpen"===t.Name})[0],a=s.ExtraData.filter(function(t){return"MostRecentLast"===t.Name})[0],o&&a&&o.Date&&a.Date&&o.Value&&a.Value&&(e.data=[[p.tzData.utcToLocal(o.Date),o.Value],[p.tzData.utcToLocal(a.Date),a.Value]])),m.series.push(e))}),$.each(i.events,function(t,i){var r,e,n=Michelangelo.ServerResponseHelpers.findEventByResponseId(c,i.responseId);n&&(r={id:i.id,type:i.chartType,name:i.seriesName,yAxis:l,data:[],tooltip:{valueDecimals:3}},e={ticker:n.Ticker,countryCode:n.CountryCode,dataPoints:["Value"],isEvent:!0},d.setSeriesData(i.id,e),$.each(n.DataPoints,function(t,e){var n;e.Value&&(n=null,i.eventStyle&&(n=i.eventStyle.unchangedImageUrl,e.Change&&(0<e.Change?n=i.eventStyle.upImageUrl:e.Change<0&&(n=i.eventStyle.downImageUrl))),e={x:e.EventDate,y:e.Value},n&&(e.marker={symbol:"url("+n+")"}),r.data.push(e))}),m.series.push(r))}),i.plotLines&&c&&c.TimeInfo&&!p.isCompare&&g.__addPlotLines(c,m,p,i,e,l)})}),p.applyHighStockCandleHack&&g.__addNullSeries(m,p.tzData,c.TimeInfo),m},t.prototype.__addNullSeries=function(t,e,n){if(n&&n.Ticks){for(var i={id:"$$candle-hack",type:"line",name:"$$candle-hack",yAxis:0,data:[],showInLegend:!1},r=0;r<n.Ticks.length;r++){var o=+n.Ticks[r],o=e.utcToLocal(o);i.data.push([o,null])}t.series.push(i)}},t.prototype.__addPlotLines=function(t,e,n,i,r,o){var a,s,l;t&&t.TimeInfo&&t.TimeInfo.Ticks&&(a=[],s=Math.floor(t.TimeInfo.Ticks.length/2),l=n.tzData.utcToLocal(t.TimeInfo.Ticks[s]),$.each(i.plotLines,function(t,e){var n=e.value;r.plotLines.push(e),a.push([l,n])}),0<a.length&&e.series.push({id:"pl-"+o,type:"scatter",yAxis:o,data:a,marker:{enabled:!1},showInLegend:!1}))},t.prototype.__buildSkeletonChartConfig=function(t,e){var n=+t.animationSpeed,n=0!=n&&{duration:n,easing:t.animationEasing};return{chart:{renderTo:e.host()},credits:{enabled:!1,text:t.credit},exporting:{enabled:t.showExporting},legend:{enabled:!1},loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"}},navigator:{enabled:t.showNavigator},plotOptions:{series:{compare:void 0,animation:!e.immediate()&&n,enableMouseTracking:t.showTooltips&&!this.__isEditing()}},rangeSelector:{enabled:t.showRangeSelector,buttons:void 0},scrollbar:{enabled:!1},subtitle:void 0,title:void 0,tooltip:{enabled:t.showTooltips&&!this.__isEditing(),crosshairs:[!0,!0]},xAxis:{},yAxis:[],series:[]}},t.prototype.__detectDataGroupingChanges=function(t,e){var n=_.map(t.def().series,function(t){return t.seriesId}),e=_.chain(e.series).filter(function(t){return 0===t.options.id.indexOf("rs-")&&_.contains(n,t.options.sourceId)}).map(function(t){return _.assign({seriesId:t.options.sourceId,dataGrouping:_.isObject(t.currentDataGrouping)?_.pick(t.currentDataGrouping,["unitName","unitRange"]):null})}).valueOf(),e={hasAnyDataGrouping:_.some(e,function(t){return _.isObject(t.dataGrouping)}),series:e};_.isEqual(this.__lastDataGrouping,e)||t.notify("chart.dataGroupingChanged",e,this),this.__lastDataGrouping=e}});Michelangelo.HighstockRenderer=HighstockRenderer;var BlueGrassChannelEntry=__base(function(t){t=t(function(t){this.channelName=t,this.notifier=null,this.handlers={};var e=this;this.callback=function(n){e.notifier&&n&&n.h&&n.h.t&&e.notifier.notify("bg.message",{name:n.h.t,message:n}),$.each(e.handlers,function(t,e){e.callback(n)})}});t.prototype.setNotifier=function(t){this.notifier=t},t.prototype.addHandler=function(t,e){t in this.handlers?Logger.debug("Duplicate call to addHandler, channel='"+this.channelName+"', id='"+t+"'"):this.handlers[t]=e},t.prototype.removeHandler=function(t){delete this.handlers[t]},t.prototype.hasHandlers=function(){for(var t in this.handlers)if(this.handlers.hasOwnProperty(t))return!0;return!1},t.prototype.subscribe=function(t,e){e&&(e.subscribe(this.channelName,this.callback),this.notifier&&this.notifier.notify("bg.addChannel",{name:this.channelName}),Logger.debug("...BG subscribed to channel '"+this.channelName+"'..."))},t.prototype.unsubscribe=function(t,e){e&&(e.unsubscribe(this.channelName,this.callback),this.notifier&&this.notifier.notify("bg.removeChannel",{name:this.channelName}),Logger.debug("...BG unsubscribed from channel '"+this.channelName+"'..."))}}),BlueGrassClient=__base(function(t){function i(t,e,n){t.connection=e,t.onConnectionEventEx(t.connection,n)}t=t(function(t){this.bgRunTime=t,this.channels={},this.connected=!1,this.connectTimer=null,this.connectAttempts=0,this.connection=null,this.notifier=null;var n=this;1===n.bgRunTime.getConnection.length?n.bgRunTime.getConnection(function(t,e){i(n,t,e)}):n.connectTimer=setInterval(function(){Logger.debug("...BG event timer..."),n.connectAttempts+=1;var t=n.bgRunTime.getConnection();t&&t.isOpen()?(i(n,t,"init"),clearInterval(n.connectTimer),n.connectTimer=null):30<n.connectAttempts&&clearInterval(n.connectTimer)},500)});t.prototype.setNotifier=function(n){this.notifier=n,$.each(this.channels,function(t,e){e.setNotifier(n)})},t.prototype.onConnectionEvent=function(){},t.prototype.onConnectionEventEx=function(n,t){Logger.debug("...onConnectionEventEx, event='"+t+"'..."),this.connected=!0;var i=this;$.each(this.channels,function(t,e){e.subscribe(i.bgRunTime,n)})},t.prototype.unsubscribe=function(n){var i=this;$.each(i.channels,function(t,e){e.removeHandler(n),e.hasHandlers()||(i.connected&&e.unsubscribe(i.bgRunTime,i.connection),delete i.channels[t])})},t.prototype.subscribe=function(i,t){var r=this;$.each(t,function(t,e){var n=r.channels[e.channel];n?n.addHandler(i,e):(n=new BlueGrassChannelEntry(e.channel),(r.channels[e.channel]=n).addHandler(i,e),n.setNotifier(r.notifier),r.connected&&n.subscribe(r.bgRunTime,r.connection))})}});Michelangelo.BlueGrassClient=BlueGrassClient;var BlueGrassUpdater=__base(function(t){t(function(t,e,n,i,r,o){if(this.model=t,this.seriesId=n.id,this.enabled=!0,this.warned=!1,this.dataGroupingWarned=!1,this.unhandledWarned=!1,this.pointUpdateNotified=!1,this.pointAddNotified=!1,this.delayNotified=!1,this.__notifier=r,this.__chartAccessor=o,Michelangelo.isDebugEnabled()&&(window.bgDebugStats={delayed:0}),this.tzData=e.tzData,this.lastTick=function(t){for(var e=0,n=0;n<t.Series.length;n++)for(var i=t.Series[n],r=i.DataPoints.length-1;0<r;r--)if(function(t){if(!t||0===t.length)return!1;for(var e=0;e<t.length;e++)if(t[e])return!0;return!1}(i.DataPoints[r])){e<r&&(e=r);break}var o=t.TimeInfo.Ticks[e];return Michelangelo.Logger.debug("-> BG setup, last="+e+", lastTick="+new Date(o).toTimeString()),o}(i),this.step=i.TimeInfo.Step,"ohlc"===n.chartType||"candlestick"===n.chartType)return Logger.debug("BGUpdater: Chart type '"+n.chartType+"' is not yet handled."),void(this.enabled=!1);if(1===n.fieldNames.length&&"Last"!==n.fieldNames[0])return Logger.debug("BGUpdater: only charts for 'Last' data point can be updated."),void(this.enabled=!1);if(!i.TimeInfo.IsIntraday)return i.TimeInfo.IsIntraday||t.includeMockTick?!i.TimeInfo.IsIntraday&&t.includeMockTick?(this.enabled=!0,void(this.handler=new BlueGrassEodMockTickHandler)):void Logger.debug("BGUpdater: unknown case."):(Logger.debug("BGUpdater: EOD charts w/o mock tick are not yet implemented."),void(this.enabled=!1));this.enabled=!0;t=t&&t.style&&t.style.mikeStyle&&t.style.mikeStyle.shiftChartOnBlueGrassTick||!1;this.handler=new BlueGrassIdayLineHandler(i.TimeInfo,e.tzData,this,t)}).prototype.messageHandler=function(t,e){var n,i;t.enabled&&t.handler&&((n=e.b)&&n.z&&0!==n.z.length&&(i=r(n.z),t.lastQuoteDate&&i<=t.lastQuoteDate||(t.lastQuoteDate=i,(e=t.__chartAccessor())?(e=e.get(t.seriesId))?t.handler.handleQuote(t.handler,e,n,i):t.warned||(Logger.debug("BGUpdater: Series '"+t.seriesId+"' not found."),t.warned=!0):t.warned||(Logger.debug("BGUpdater: Chart was not found."),t.warned=!0))))};var r=function(t){var e=parseInt(t);return isNaN(e)&&(t=0<=t.indexOf("-")||0<=t.indexOf("+")?t.substring(6,t.length-7):t.substring(6,t.length-2),e=parseInt(t)),e}});Michelangelo.BlueGrassUpdater=BlueGrassUpdater;var BlueGrassEodMockTickHandler=__base(function(t){t(function(){}).prototype.handleQuote=function(t,e,n){e=e.data[e.data.length-1],n=n.l;e.update(n)}}),BlueGrassIdayLineHandler=__base(function(t){t(function(t,e,n,i){this.updater=n,this.tzData=e,this.step=t.Step,this.shift=i}).prototype.handleQuote=function(t,e,n,i){var r=i-t.updater.lastTick;if(r<0)return this.delayNotified||(this.delayNotified=!0,Logger.log("BGUpdater: point before chart start: quoteDate="+new Date(i).toTimeString()+", lastTick="+new Date(t.updater.lastTick).toTimeString())),void(window.bgDebugStats&&(window.bgDebugStats.delayed+=1));r=Math.round(r/t.step),r=this.tzData.utcToLocal(t.updater.lastTick+r*t.step),n=n.l;t.updater.__notifier.notify("bg.tick",{x:r,y:n},t.updater),function(t,e,n,i){var r;if(!(t.data&&0<t.data.length))return t.xData?(i.dataGroupingWarned||(i.dataGroupingWarned=!0,Logger.log("BGUpdater: Series is in data grouping mode; BG updates not implemented. Try disabling data grouping in your style.")),1):(i.unhandledWarned||(i.unhandledWarned=!0,Logger.log("BGUpdater: Don't know how to update series.")),0);for(r=0;r<t.data.length-1;r++){var o=t.data[r];if(o.x===e)return o.update(n),i.pointUpdateNotified||(i.pointUpdateNotified=!0,Logger.log("BGUpdater: Point updated! (this message will only appear once)")),1}}(e,r,n,t.updater)||(e.addPoint([r,n],!0,t.shift,!0),this.pointAddNotified||(this.pointAddNotified=!0,Logger.log("BGUpdater: Point added! (this message will only appear once)")))}}),PresentationManager=__base(function(t){var i=__base(function(t){function i(t,e){if($.isNumeric(t)){if(0<t)return t}else switch(t){case"host":return Michelangelo.Logger.warn("'host' size is deprecated; use 'fill' instead."),"fill";case"fill":case"auto":return t}return e}function p(t,e){return"auto"===t?"auto":"fill"===t?e:t}var r=1,t=t(function(t,e,n){var i=this;this.__version=0,this.__hostElement=t,this.__id="michelangelo-presentation-"+r++,this.__config=$.extend(!0,{entitlement:null,environment:null,dataFetcher:null,bluegrassClient:null,eventWrapper:null,promiseWrapper:null},e||{}),this.__def=null,this.__template=null,this.__style=null,this.__tooltipFormatter=null,this.__renderSize={},this.__measuredSize={},this.__hostWatchId=null,this.__decorator=n,this.__eventManager=new DirectEventManager(this.__config.eventWrapper),this.__notifier=this.__eventManager.createNotifier(n),this.__dataFetcher=Fetcher.select(this.__config.dataFetcher,this.__config.environment,this.__config.entitlement),this.__promiseWrapper=this.__config.promiseWrapper||function(t){return t},this.__renderer=new HighstockRenderer(this.__id,this.__notifier,this.__config.eventWrapper),this.size({width:"fill",height:"auto"}),this.__config.bluegrassClient&&(this.__config.bluegrassClient.setNotifier(this.__notifier),this.__eventManager.on("bluegrass.subscribe",function(t){i.__config.bluegrassClient.subscribe(i.__id,t)}),this.__eventManager.on("bluegrass.unsubscribe",function(){i.__config.bluegrassClient.unsubscribe(i.__id)})),this.__eventManager.on("edit.started",function(){i.render(!0)}),this.__eventManager.on("edit.ended",function(){i.render(!0)}),this.__eventManager.on("tooltip.info",function(t){i.__tooltipFormatter&&i.__tooltipFormatter.tooltipRepo&&i.__tooltipFormatter.tooltipRepo(t)})});t.prototype.id=function(){return this.__id},t.prototype.hostElement=function(){return this.__hostElement},t.prototype.version=function(){return this.__version},t.prototype.remove=function(){null!==this.__hostWatchId&&clearInterval(this.__hostWatchId),this.__renderer.unrender(this.__notifier),$(this.__hostElement).html(""),delete this.__hostElement.__michelangeloPresentationManager__,this.__fire("presentationManager.removed")},t.prototype.size=function(t){var e=this.__renderSize;if(0===arguments.length)return $.extend({},e);if(!$.isPlainObject(t))return Logger.error("Could not set presentation render size from '"+t+"'"),this;var n={width:i(t.width,e.width),height:i(t.height,e.height)};return n.width===e.width&&n.height===e.height||(this.__renderSize=n,this.__renderedParentSize=null,this.__version++,this.__manageHostWatch()),this},t.prototype.load=function(t){var e=this;return Repo.select(e.__config.repo).get(t).then(function(t){return e.def(t.definition),e.__decorator})},t.prototype.render=function(n){if(!this.__def)return this.__promiseWrapper($.Deferred().reject());try{var i,r,t,e,o=this,a=this.__version,s=new Michelangelo.Notifier(function(t,e){switch(t){case"dataFetch.started":o.__fire("refresh.started");break;case"dataFetch.complete":o.__fire("refresh.complete");break;default:o.__fire(t,e)}}),l=o.__parentSize(),h=(c=o.__renderSize,{width:p(c.width,l.width),height:p(c.height,l.height)});"function"==typeof this.__style?(t=this.__style(this.__def,h))instanceof ChartDefinition?i=new ChartDefinition(t):(i=new ChartDefinition(t.def),r=t.executor):(i=new ChartDefinition(this.__def)).style=this.__style||i.style,this.__tooltipFormatter&&this.__tooltipFormatter.formatter&&(e={highchartsStyles:{tooltip:{useHTML:!0,shared:!0,formatter:this.__tooltipFormatter.formatter}}},$.extend(!0,i.style,e)),!r&&this.__def instanceof ChartDefinition&&(r=new ChartDefinitionEditExecutor(this.__def));var u=this.__dataFetcher.fetch(i,this.__config.debugModel,s).then(function(t){if(a===o.__version){s.notify("response.ready",t);var e=new RenderContext(o.__hostElement,i,h,o.__notifier,n),e=o.__renderer.measure(e,t);e.width=(isNaN(e.width)?l:e).width,e.height=(isNaN(e.height)?l:e).height,o.__measuredSize={width:e.width,height:e.height},$(o.__hostElement).css(e),o.__renderedParentSize=o.__parentSize();e=new RenderContext(o.__hostElement,i,e,o.__notifier,n,r);return o.__renderer.render(e,t)}}).then(function(){return o.__decorator},function(t){return $.Deferred().reject(t,o.__decorator)});return this.__promiseWrapper(u)}catch(n){return this.__fire("presentation.error",n),this.__promiseWrapper($.Deferred().reject(n))}var c},t.prototype.getConfig=function(){return this.__config},t.prototype.getMeasuredSize=function(){return this.__measuredSize},t.prototype.def=function(t){return 0===arguments.length?this.__def:(this.__def!==t&&(this.__def=t||{}),this.__version++,this)},t.prototype.style=function(t){return arguments.length?(this.__style="object"==typeof t?$.extend(!0,{},t):t,this):this.__style},t.prototype.tooltipFormatter=function(t){return arguments.length?(this.__tooltipFormatter=t,this):this.__tooltipFormatter},t.prototype.editor=function(){return this.__renderer.editor()},t.prototype.edit=function(t){return this.__renderer.edit(t),this},t.prototype.canEdit=function(t){return this.__renderer.canEdit(t)},t.prototype.__fire=function(t,e){this.__notifier.notify(t,e,this)},t.prototype.on=function(t,e){return this.__eventManager.on(t,e)},t.prototype.__manageHostWatch=function(){var e=this,t=this.__renderSize,t="fill"===t.width||"fill"===t.height;t||null===this.__hostWatchId?t&&null===this.__hostWatchId&&(this.__hostWatchId=setInterval(function(){var t=e.__parentSize();!e.__renderedParentSize||t.width===e.__renderedParentSize.width&&t.height===e.__renderedParentSize.height||(e.__version++,e.render(!0))},100)):(clearInterval(this.__hostWatchId),this.__hostWatchId=null)},t.prototype.__parentSize=function(){var t=$(this.__hostElement.parentNode);return{width:t.width(),height:t.height()}}}),n=t(function(t,e){var n=new i(t,e,this);this.__impl=function(){return n},n.__fire("presentationManager.created")});n.prototype.getRenderedAxesBoundaries=function(){var t=this.__impl().__renderer.__chart,e=t.xAxis[0].getExtremes(),t=t.yAxis[0].getExtremes();return{x:{min:e.min,max:e.max},y:{min:t.min,max:t.max}}},n.prototype.id=function(){return this.__impl().id()},n.prototype.hostElement=function(){return this.__impl().hostElement()},n.prototype.version=function(){return this.__impl().version()},n.prototype.remove=function(){this.__impl().remove()},n.prototype.size=function(){var t=this.__impl();return t.size.apply(t,arguments)},n.prototype.getMeasuredSize=function(){var t=this.__impl();return t.getMeasuredSize.apply(t,arguments)},n.prototype.style=function(){var t=this.__impl();return t.style.apply(t,arguments)},n.prototype.tooltipFormatter=function(){var t=this.__impl();return t.tooltipFormatter.apply(t,arguments)},n.prototype.load=function(t){return this.__impl().load(t)},n.prototype.render=function(){var t=this.__impl();return t.render.apply(t,arguments)},n.prototype.getConfig=function(){return this.__impl().getConfig()},n.prototype.def=function(){var t=this.__impl();return t.def.apply(t,arguments)},n.prototype.editor=function(){return this.__impl().editor()},n.prototype.edit=function(){var t=this.__impl();return t.edit.apply(t,arguments)},n.prototype.canEdit=function(){var t=this.__impl();return t.canEdit.apply(t,arguments)},n.prototype.on=function(t,e){return this.__impl().on(t,e)},n.getFrom=function(t){t=t.__michelangeloPresentationManager__;return t instanceof n?t:null},n.createIn=function(t,e){n.removeFrom(t);e=new PresentationManager(t,e);return t.__michelangeloPresentationManager__=e},n.getFromOrCreateIn=function(t,e){return n.getFrom(t)||n.createIn(t,e)},n.removeFrom=function(t){t=n.getFrom(t);t&&t.remove()},n.prototype.extensionFactories=function(){return Logger.warn("extensionFactories are no longer required and will be deprecated."),this}});Michelangelo.PresentationManager=PresentationManager;var DebugViewModel=__base(function(t){t=t(function(){this.showMikeModel=!1,this.showDemoModel=!1,this.showServerRequest=!1,this.showServerResponse=!1,this.showInternalSeries=!1,this.showChartConfig=!1,this.showRenderModel=!1,this.showInternalRequest=!1,this.showInternalGuts=!1,this.showInternalStore=!1,this.showInternalResponse=!1,this.showServerPerf=!1,this.showBlueGrass=!1,this.sendAkamaiDebugHeaders=!1,this.useDebugNow=!1});return t.prototype.wireUpDebug=function(t){var e=this;t.on("request.built",function(t){e.serverRequest=t}),t.on("response.received",function(t){e.serverResponse=t}),t.on("renderModel.built",function(t){e.renderModel=$.extend(!0,{},t),delete e.renderModel.serverResponse,delete e.renderModel.model}),t.on("chartConfig.built",function(t){t=$.extend(!0,{},t);t.chart&&t.chart.renderTo&&"string"!==$.type(t.chart.renderTo)&&(t.chart.renderTo=t.chart.renderTo.toString()),e.chartConfig=t}),t.on("perf.received",function(t){e.showPerfGraph(t)}),t.on("internalRequest.received",function(t){e.internalRequest=t}),t.on("internalSeries.received",function(t){e.internalSeries=t}),t.on("internalGuts.received",function(t){e.internalGuts=t}),t.on("internalStore.received",function(t){e.internalStore=t}),t.on("internalResponse.received",function(t){e.internalResponse=t}),t.on("internalStitched.received",function(t){e.internalStitchedResponse=t}),t.on("stitched.received",function(t){e.stitchedResponse=t})},t.prototype.wrapText=function(t){if(!t)return"";for(var e="",n=0,i=0;i<t.length;i++)50<n&&(n=0,e+="<br/>"),e+=t.charAt(i),n+=1;return e},t.prototype.showPerfGraph=function(t){var e,i,r,o;this.showServerPerf&&"#serverPerfChartDiv".length&&t&&0!==t.length&&(e=this,i={chart:{type:"columnrange",renderTo:"serverPerfChartDiv",inverted:!0},credits:{enabled:!1},exporting:{enabled:!1},title:{text:"Server Performance Measures"},xAxis:{categories:[]},yAxis:{title:{text:"Time (ticks)"},endOnTick:!1,minPadding:0,maxPadding:0,startOnTick:!1},tooltip:{crosshairs:[!0,!0],useHTML:!0,formatter:function(){return'<table><tr><th colspan="2" style="font-weight: bold">'+this.point.name+'</th></tr><tr><td>URL:</td><td><a href="'+this.point.url+'">'+e.wrapText(this.point.url)+"</a></td></tr><tr><td>Start:</td><td>"+this.point.startTime+"</td></tr><tr><td>Elapsed:</td><td>"+Highcharts.numberFormat(this.point.elapsed,4)+" ms</td></tr></table>"}},legend:{enabled:!1},series:[{name:"Times",data:[]}]},r=t[0].StartTicks,o=90,$.each(t,function(t,e){i.xAxis.categories.push(e.Name);var n=e.StartTicks-r,e={low:n,high:n+e.ElapsedTicks,name:e.Name,url:e.Url,startTime:e.StartTime,elapsed:e.ElapsedMilliseconds};i.series[0].data.push(e),o+=18}),$("#serverPerfChartDiv").height(o),e.perfChart=new Highcharts.Chart(i))},t});Michelangelo.DebugViewModel=DebugViewModel;var PresentationHook=__base(function(t){function n(t,e,n){var i=t.id().replace(/-/g,"_"),r=(r=window||{}).mike||(r.mike={});(i=r[i]||(r[i]={pm:t})).def=t.def(),i[e]=n}t(function(){}).hook=function(e){e.on("request.built",function(t){n(e,"serverRequest",t)}),e.on("response.received",function(t){n(e,"serverResponse",t)}),e.on("renderModel.built",function(t){n(e,"renderModel",t)}),e.on("chartConfig.built",function(t){n(e,"chartConfig",$.extend(!0,{},t))}),e.on("tooltip.info",function(t){n(e,"tooltipRepo",t)})}}),DebugCookieWrangler=__base(function(t){t=t(function(){});t.isEnabled=function(){return-1!==document.cookie.indexOf("letsGetMikey=enabled")},t.clearCookie=function(){document.cookie="letsGetMikey=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},t.setCookie=function(){document.cookie="letsGetMikey=enabled; expires=Tue, 19 Jan 2038 03:14:07 GMT"}});Michelangelo.isDebugEnabled=function(){return DebugCookieWrangler.isEnabled()},Michelangelo.disableDebug=function(){return DebugCookieWrangler.clearCookie(),DebugCookieWrangler.isEnabled()},Michelangelo.enableDebug=function(){return DebugCookieWrangler.setCookie(),DebugCookieWrangler.isEnabled()},EventManager.on("presentationManager.created",function(t,e){Michelangelo.isDebugEnabled()&&PresentationHook.hook(e)});var IFrameComm=__base(function(t){t=t(function(){this.__secret="dwh:"});t.prototype.buildMessage=function(t){t=JSON.stringify(t);return this.__secret+t},t.prototype.parseMessage=function(t){if(!t||0!==t.indexOf(this.__secret))return null;t=t.substr(this.__secret.length);return JSON.parse(t)}});Michelangelo.IFrameComm=IFrameComm;var IFrameLoader=__base(function(t){t=t(function(t,e){var n={hostElement:t,hostId:$(t).attr("id"),parentId:e};this.__state=function(){return n},this.__comm=new Michelangelo.IFrameComm});t.loadIn=function(t,e){var n=new IFrameLoader(t,e);return window.addEventListener("message",function(t){n.receiveMessage.call(n,t)},!1),n.getAmbience(),n},t.prototype.receiveMessage=function(t){var e=this.__state(),t=this.__comm.parseMessage(t.data);t&&"ambient"===t.kind&&(Michelangelo.ambience(t.environment,t.entitlementToken),e.chartId=t.chartId,e.containerSize=t.containerSize,e.renderSize=t.renderSize,e.callbacks=Michelangelo.Marshal.objectify(t.callbacks),e.style=Michelangelo.Marshal.objectify(t.style),e.defOverride=JSON.parse(t.defOverride),e.cssUrls=JSON.parse(t.cssUrls),e.cssText=JSON.parse(t.cssText),e.tooltipFormatterConfig=JSON.parse(t.tooltipFormatterConfig),e.tooltip=Michelangelo.Marshal.objectify(t.tooltip),this.doLoad())},t.prototype.getAmbience=function(){var t={kind:"getAmbience",hostId:this.__state().parentId};parent.postMessage(this.__comm.buildMessage(t),"*")},t.prototype.doLoad=function(){var o=this.__state(),a=this;return function(t){if(t&&0!==t.length)for(var e=document.getElementsByTagName("head")[0],n=0;n<t.length;n++){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t[n],i.media="all",e.appendChild(i)}}(o.cssUrls),function(t){if(t&&0!==t.length)for(var e=document.getElementsByTagName("head")[0],n=0;n<t.length;n++){var i=document.createElement("style");i.type="text/css",i.appendChild(document.createTextNode(t[n])),e.appendChild(i)}}(o.cssText),Repo.ambient().get(o.chartId).then(function(t){o.model=t.definition,$.extend(!0,o.model,o.defOverride);var e,n=$(o.hostElement).presentation({}).def(o.model).style(o.style).size(o.renderSize),i=null,t=Michelangelo.ToolTipFormatter;if("object"==typeof o.tooltip&&("object"==typeof o.tooltip.config&&(i=o.tooltip.config),"function"==typeof o.tooltip.formatter&&(t=o.tooltip.formatter)),i=i||o.tooltipFormatterConfig,n.tooltipFormatter(new t(i)),o.callbacks)for(var r in o.callbacks)!o.callbacks.hasOwnProperty(r)||"function"==typeof(e=o.callbacks[r])&&n.on(r,e);n.render().then(function(){var t={kind:"chartRendered",hostId:o.parentId,renderSize:o.renderSize,containerSize:o.containerSize,measuredSize:n.getMeasuredSize()};parent.postMessage(a.__comm.buildMessage(t),"*")})})}});$.fn.extend({presentation:function(t){return this.length?t?PresentationManager.createIn(this[0],t):PresentationManager.getFrom(this[0]):null}}),$.fn.extend({loadFramed:function(t){return this.length?IFrameLoader.loadIn(this[0],t):null}})}(Michelangelo=Michelangelo||{}),TSa=Michelangelo=Michelangelo||{},USa=function(t,e,n){for(var i=0;i<e.length;i++){var r,o=e[i].index;-1!==o&&"NaN"!==(r=t[o])||(r=null),n.push(r)}},VSa=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];if(r)for(var o=0;o<e.DesiredDataPoints.length;o++)r===e.DesiredDataPoints[o]&&n.push({name:r,index:o});else n.push({name:"null",index:-1})}return n},WSa=function(t){if(!t||!t.ToolTipDataPoints||0===t.ToolTipDataPoints.length)return null;var n=t.DesiredDataPoints.length,i=[];return $.each(t.ToolTipDataPoints,function(t,e){i.push({name:e,index:n+t})}),i},XSa=function(u,c,p,d,f){this.build=function(t){t&&0!==t.length||(t=u.DesiredDataPoints);var e=[],n=VSa(t,u);if(!n||0===n.length)return e;for(var i=WSa(u),r=0;r<u.DataPoints.length;r++){var o=u.DataPoints[r],a=+c.Ticks[r],s=[a=p.utcToLocal(a)];if(USa(o,n,s),i)for(var l=0;l<i.length;l++){var h=i[l];d.addPoint(a,f,h.name,o[h.index])}e.push(s)}return e}},TSa.DataPointBuilder=XSa,CTa=Michelangelo=Michelangelo||{},CTa.ToolTipRepository=function(t,e){function r(t){return n[t]||(n[t]={}),n[t]}var n={tzData:t,timeInfo:{spansMoreThan12Months:31556908800<e.LastTick-e.FirstTick,step:e.Step,isIntraday:e.IsIntraday}};this.getData=function(){return n},this.addPoint=function(t,e,n,i){e=r(e);e.points||(e.points=[]),e.points[t]||(e.points[t]=[]),e.points[t].push({name:n,value:i})},this.setFormatHints=function(t,e,n){t=r(t);t.hints||(t.hints={}),t.hints[e]=n},this.setCustomData=function(t,e){r(t).customData=e},this.setSeriesData=function(t,e){r(t).seriesData=e},this.getTzData=function(){return n.tzData},this.getTimeInfo=function(){return n.timeInfo},this.getPoints=function(t,e){e=r(e);return e&&e.points&&e.points[t]&&0<e.points[t].length?e.points[t]:null},this.getCustomData=function(t){return r(t).customData||{}},this.getSeriesData=function(t){return r(t).seriesData||{}},this.getFormatHints=function(t,e){t=r(t);return t.hints?t.hints[e]:null}},CTa.ToolTipHierarchy=function(){},CTa.ToolTipFormatter=function(t){var v=this;this.showDateRange=!0,t&&!1===t.showDateRange&&(this.showDateRange=!1);var x=null;this.tooltipRepo=function(t){if(0===arguments.length)return x;x=t};var s={iday:{main:"%m/%d/%Y %I:%M %p",group:"%I:%M %p"},eod:{main:"%m/%d/%Y",group:"%m/%d/%Y"}};t&&t.dateFormats&&$.extend(!0,s,t.dateFormats);var l=[{unit:"millisecond",factor:1},{unit:"second",factor:1e3},{unit:"minute",factor:6e4},{unit:"hour",factor:36e5},{unit:"day",factor:864e5},{unit:"week",factor:6048e5},{unit:"month",factor:26784e5},{unit:"year",factor:31556952e3}];this._formatHeader=function(t){var e=[];if(!x)return e;var n=x.getTimeInfo(),i=x.getTzData(),r=s.eod;n.isIntraday?r=s.iday:n.spansMoreThan12Months&&s.eodAndChartSpansMoreThanTwelveMonths&&(r=s.eodAndChartSpansMoreThanTwelveMonths);var o,a=Highcharts.dateFormat(r.main,t.x);return v.showDateRange&&t.series.currentDataGrouping&&(o=t.series.currentDataGrouping,o=function(t,e,n){for(var i,r=0;r<l.length;r++)if((i=l[r]).unit===e)return t+i.factor*n;return CTa.Logger.log("Time unit "+e+" is not yet handled!"),t}(t.x,o.unitName,o.count),a+=" to "+Highcharts.dateFormat(r.group,o)),n.isIntraday&&(a+=" "+i.getAbbreviation(t.x)),e.push('<div class="mike-tip">'),e.push('<span class="mike-tip-date">'+a+"</span>"),e};function _(t,e,n,i){if("string"==typeof e)return e;var r=null;return x&&n&&(r=x.getFormatHints(t,n)),b(e,r=r||{decimals:3,unitSymbol:null},i="PercentChange"===n?0:i)}var b=function(t,e,n){var i=Highcharts.numberFormat(t,e.decimals);e.unitSymbol&&(e.suffix?i+=e.unitSymbol:i=e.unitSymbol+i);e="";return'<span class="mike-tip-val'+(e=$.isNumeric(n)?n<t?" mike-tip-up":t<n?" mike-tip-down":" mike-tip-unchanged":e)+'">'+i+"</span>"};this.formatter=function(){var a,s,l,h,u,c,p,d,f,t,t=this.points||(t=this,"[object Array]"===Object.prototype.toString.call(t)?this:[this]),g={decimals:3,unitSymbol:"%",suffix:!0},m=v._formatHeader(t[0]),y=t[0].x;return $.each(t,function(t,i){a=i.series,u=a.userOptions.id,p=!(c=[]),f=null,x&&(l=x.getCustomData(u),(h=x.getSeriesData(u))&&(c=h.dataPoints,p=h.isIndicator,h.extraData&&h.extraData.priorClose&&(f=h.extraData.priorClose.value))),d="mike-tip-name",d+=p?" mike-tip-indi":" mike-tip-series",m.push('<span class="'+d+'" style="color: '+a.color+'">'),m.push('<span class="mike-tip-bullet">â—</span>'),m.push('<span class="mike-tip-label">'+a.name+"</span>");var r,e=!!i.point.change||0===i.point.change,n="",o="";r=e?i.y/(.01*(100+i.point.change)):f,c&&(0===c.length?(n=_(u,i.y,null,r),o=""):1===c.length&&(n=_(u,i.y,c[0],r),o=c[0])),e?m.push(b(i.point.change,g,0)):m.push(n),m.push("</span>"),e&&l&&l.showLastPriceInCompareMode&&m.push('<span class="mike-tip-data"><span class="mike-tip-label">'+o+"</span>"+n+"</span>"),c&&1<c.length&&$.each(c,function(t,e){var n;m.push('<span class="mike-tip-data"><span class="mike-tip-label">'+e+"</span>"+_(u,i.point[n="last"===(n=(n=e).charAt(0).toLowerCase()+n.slice(1))?"close":n],e,r)+"</span>")}),x&&(s=x.getPoints(y,u))&&$.each(s,function(t,e){var n=r;"PercentChange"===e.name?n=0:"Volume"===e.name&&(n=null),m.push('<span class="mike-tip-data"><span class="mike-tip-label">'+e.name+"</span>"+_(u,e.value,e.name,n)+"</span>")}),l&&h&&(h.extraData&&l.showPriorClose&&h.extraData.priorClose&&m.push('<span class="mike-tip-data"><span class="mike-tip-label">Prior Close</span>'+b(h.extraData.priorClose.value,h.extraData.priorClose.hints,null)+"</span>"),l.showTicker&&m.push('<span class="mike-tip-data"><span class="mike-tip-label">Ticker</span>'+h.ticker+"</span>"),l.showCountryCode&&m.push('<span class="mike-tip-data"><span class="mike-tip-label">Country Code</span>'+h.countryCode+"</span>"),l.showCommonName&&m.push('<span class="mike-tip-data"><span class="mike-tip-label">Common Name</span>'+h.commonName+"</span>"),l.showInstrumentType&&m.push('<span class="mike-tip-data"><span class="mike-tip-label">Instrument Type</span>'+h.instrumentType+"</span>"))}),m.push("</div>"),m.join("")}},function(p){var t=(e.prototype.shouldHide=function(t){return!!(t&&t.minChartWidth&&this.size.width<t.minChartWidth)||!!(t&&t.minChartHeight&&this.size.height<t.minChartHeight)},e.prototype.scanSeries=function(){var i=this,r=!1,o=!1,a=!1;i.serverResponse&&i.serverResponse.TimeInfo&&(a=i.serverResponse.TimeInfo.IsIntraday),$.each(this.model.series,function(t,e){var n;null!==i.tzData||(n=p.ServerResponseHelpers.findSeriesBySeriesId(i.serverResponse,e.seriesId))&&0<n.length&&$.each(n,function(t,e){null===i.tzData&&(e.TimeZoneData?i.tzData=new p.TimeZoneData(e.TimeZoneData,a):e.UtcOffset&&e.TimeZoneAbbreviation&&(e={SwitchDateUtc:0,UtcOffsetBeforeSwitch:e.UtcOffset,UtcOffsetAfterSwitch:e.UtcOffset,IsDstBeforeSwitch:!1,IsDstAfterSwitch:!1,StandardAbbreviation:e.TimeZoneAbbreviation,DaylightAbbreviation:e.TimeZoneAbbreviation,ShortAbbreviation:e.TimeZoneAbbreviation},i.tzData=new p.TimeZoneData(e,a)))}),e.position===p.Position.compare&&(i.isCompare=!0),"TickerSeries"===e.seriesKind&&("candlestick"===e.chartType||"ohlc"===e.chartType?r=!0:o=!0)}),null===i.tzData&&(i.tzData=new p.TimeZoneData(null,a)),this.isCompare&&(this.mainAxis.labelUnitSymbol="%",this.mainAxis.labelSuffix=!0,this.mainAxis.addYAxisUnits="all"),!r||o||this.model.filterNullSlots||(i.applyHighStockCandleHack=!0)},e.prototype.processSeries=function(){var h=this,u=!1;h.serverResponse&&h.serverResponse.TimeInfo&&(u=h.serverResponse.TimeInfo.IsIntraday),$.each(this.model.series,function(r,l){var t=p.ServerResponseHelpers.findSeriesBySeriesId(h.serverResponse,l.seriesId);t&&0!==t.length&&$.each(t,function(t,o){0===r&&u&&(h.model.xAxisCompressed||h.model.filterNullSlots||0===h.model.timeFrame.indexOf("D1")&&(h.xAxis.min=h.tzData.utcToLocal(h.serverResponse.TimeInfo.TimeFrameStart),h.xAxis.max=h.tzData.utcToLocal(h.serverResponse.TimeInfo.TimeFrameEnd)),(h.model.showPreMarketBands||h.model.showAfterHoursBands||h.model.showClosedBands)&&h.style&&h.style.mikeStyle&&o.MarketSessions&&0<o.MarketSessions.length&&$.each(o.MarketSessions,function(t,e){var n,i,r,o,a,s,l;"Trading"===e.Kind||"Closed"===e.Kind&&!h.model.showClosedBands||"PreMarket"===e.Kind&&!h.model.showPreMarketBands||"AfterMarket"===e.Kind&&!h.model.showAfterHoursBands||(n=e.Kind[0].toLowerCase()+e.Kind.slice(1),i=h.tzData.utcToLocal(e.Start),r=h.tzData.utcToLocal(e.End),(o=h.style.mikeStyle.marketBands)&&o.enabled&&((s=new p.RenderPlotBand(i,r)).name=e.Kind,s.color=o.color,s.labelStyle=o.labelStyle,o[n]&&((l=o[n]).color&&(s.color=l.color),l.name&&(s.name=l.name)),h.xAxis.plotBands.push(s)),(o=h.style.mikeStyle.marketLines)&&(l={},$.extend(!0,s={},o.left),$.extend(!0,l,o.right),o[n]&&(o[n].left&&$.extend(!0,s,o[n].left),o[n].right&&$.extend(!0,l,o[n].right)),s.enabled&&(a=new p.RenderPlotLine(i,s),h.xAxis.plotLines.push(a)),l.enabled&&(a=new p.RenderPlotLine(r,l),h.xAxis.plotLines.push(a))))})),o.DjId&&(l.djid=o.DjId);var n=new p.RenderSeries(o.ResponseId,!1,l.seriesId,l.annotations);n.fieldNames=l.getFieldNames(o),n.customToolTipData=l.customToolTipData,n.customToolTipData.showLastPriceInCompareMode=_.some(l.tooltipDataPoints,function(t){return"Last"===t}),n.chartType=l.chartType,n.seriesName=l.getName(o),h.style.seriesStyles&&h.style.seriesStyles[l.seriesKind]&&(e=h.style.seriesStyles[l.seriesKind],n.seriesOptions="function"==typeof e?e(l.chartType):e);var e=function(t,e){var n,i=null;if(t.DesiredDataPoints)for(n=0;n<t.DesiredDataPoints.length;n++)"PercentChange"===t.DesiredDataPoints[n]&&(i=n);if(!i&&t.ToolTipDataPoints)for(n=0;n<t.ToolTipDataPoints.length;n++)"PercentChange"===t.ToolTipDataPoints[n]&&(i=n+t.DesiredDataPoints.length);if(null!==i)for(n=t.DataPoints.length;0<=n;n--)if(t.DataPoints[n]&&t.DataPoints[n][i])return{value:t.DataPoints[n][i],tick:e.Ticks[n]};return null}(o,h.serverResponse.TimeInfo);(o.CurrentQuote||e)&&(i={ticker:o.Ticker,countryCode:o.CountryCode,commonName:o.CommonName,utcOffset:o.UtcOffset,timeZoneAbbreviation:o.TimeZoneAbbreviation,seriesId:n.id},o.CurrentQuote&&(i.quoteDateUtc=o.CurrentQuote.DateUtc,i.quoteLast=o.CurrentQuote.Last,i.quoteNetChange=o.CurrentQuote.NetChange,i.quoteChangePercent=o.CurrentQuote.ChangePercent,i.hintUnitSymbol=o.CurrentQuote.UnitSymbol,i.hintSuffix=o.CurrentQuote.Suffix,i.hintDecimalPlaces=o.CurrentQuote.DecimalPlaces),e&&(i.chartChangePercent=e.value,i.chartChangeDateUtc=e.tick),h.quotes.push(i)),o.BlueGrassChannels&&$.each(o.BlueGrassChannels,function(t,e){n.blueGrassChannels.push(e.ChannelName)});var i=0===r,a=h.determinePane(l,null,i),s=h.determineAxis(l,a,o,i,null);s.series.push(n),$.each(l.indicators,function(t,e){var n,i=p.ServerResponseHelpers.findSeriesBySeriesId(h.serverResponse,e.seriesId),r=null;null===(r=i&&0<i.length?i[0]:r)?null===(n=p.ServerResponseHelpers.findEventBySeriesId(h.serverResponse,e.seriesId))?null===(i=p.ServerResponseHelpers.findAggregateBySeriesId(h.serverResponse,e.seriesId))?e.metaData===p.MetaData.HorizontalLineIndicator&&h.processHorizontalLine(e,s):h.processAggregate(e,i,s,o.ExtraData):h.processEvent(e,n,a,s):h.processIndicator(e,r,a,s)})})})},e.prototype.processEvent=function(t,e,n,i){n=this.determinePane(t,n,!1),n=this.determineAxis(t,n,e,!1,i),i=new p.RenderEvent(e.ResponseId);e.Ticker?i.seriesName=e.Ticker+" "+t.metaData.name:i.seriesName=t.metaData.name,n.events.push(i),i.eventStyle=this.style.eventStyles[t.metaData.serverKind],t.parameters[0].value&&(n.isHidden=!0,$.extend(!0,n.axisStyle,{title:{text:null},labels:{enabled:!1}})),function(t){if(t&&t.length){if(1===t.length)return 1;for(var e=t[0].Value,n=1;n<t.length;n++)if(t[n].Value!==e)return;return 1}}(e.DataPoints)&&(e=e.DataPoints[0].Value,n.axisStyle.min=e-1,n.axisStyle.max=e+1)},e.prototype.processAggregate=function(t,e,n,i){var r,o;e.DataPoints&&(r=e.DataPoints.slice(),i&&$.each(i,function(t,e){"PriorClose"===e.Name&&r.push({Name:"priorClose",Value:e.Value})}),o=this.style.aggregateStyles[t.metaData.serverKind],$.each(r,function(t,e){e.Value&&(e=new p.RenderPlotLine(e.Value,o[e.Name]||{}),n.plotLines.push(e))}))},e.prototype.processHorizontalLine=function(t,e){t=parseFloat(t.parameters[0].value),t=new p.RenderPlotLine(t);e.plotLines.push(t)},e.prototype.processIndicator=function(t,e,n,i){var r=this.style.indicatorStyles[t.metaData.serverKind],n=this.determinePane(t,n,!1),i=this.determineAxis(t,n,e,!1,i);this.buildSeriesForIndicator(t,e,i,r),r&&r.axisStyle&&$.extend(!0,i.axisStyle,r.axisStyle)},e.prototype.determinePane=function(t,e,n){var i;return n||t.position===p.Position.compare?i=this.mainPane:t.position===p.Position.overlay||t.position===p.Position.onTop?i=null!==e?e:this.mainPane:(i=new p.RenderPane,t.position===p.Position.above?this.panes.unshift(i):this.panes.push(i)),i.height||(i.height=t.height),i},e.prototype.determineAxis=function(t,e,n,i,r){var o;return i?o=this.mainAxis:t.position===p.Position.overlay&&null!==r?o=r:(t.position===p.Position.overlay||t.position===p.Position.compare)&&0<e.axes.length?o=e.axes[0]:((o=new p.RenderYAxis(this.style.highchartsYAxisStyle)).isIndicatorAxis=t instanceof p.Indicator,e.axes.push(o),e.axes.length>this.model.maxVisibleAxesPerPane&&(o.isHidden=!0,$.extend(!0,o.axisStyle,{title:{text:null},labels:{enabled:!1}}))),o.isHidden||(o.showLabels=!this.shouldHide(this.style.mikeStyle.hideYAxisLabels),o.setLabels(n,this.style),!o.title&&this.model.showYAxisTitle&&t.showAxisTitle&&!this.shouldHide(this.style.mikeStyle.hideYAxisTitle)&&(o.title=t.getAxisTitle(n))),o.type=t.axisType,o},e.prototype.buildSeriesForIndicator=function(n,i,r,t){var o,a,s,l,e,h,u,c;i&&(t&&(o=t.seriesStyles),a=null,$.each(n.parameters,function(t,e){"chartType"===e.metaData.inputType&&(a=e.value)}),s=[],"ohlc"===a||"candlestick"===a?(l=new p.RenderSeries(i.ResponseId,!0,n.seriesId,n.annotations),u=h=null,t=1<i.DesiredDataPoints.length?(e=i.DesiredDataPoints[0],i.DesiredDataPoints[1]):e=i.DesiredDataPoints[0],"candlestick"===a&&(h=e,u=t),l.seriesName=n.metaData.name,l.fieldNames=[h,e,t,u],l.chartType=a,o&&(l.seriesOptions=o[0]),s.push(l)):"arearange"===a?((l=new p.RenderSeries(i.ResponseId,!0,n.seriesId,n.annotations)).seriesName=n.metaData.name,l.fieldNames=["Low","High"],l.chartType=a,o&&(l.seriesOptions=o[0]),s.push(l)):$.each(i.DesiredDataPoints,function(t,e){(l=new p.RenderSeries(i.ResponseId,!0,n.seriesId,n.annotations)).fieldNames=[e],l.seriesName=e,a&&(l.chartType=a),o&&(l.seriesOptions=o[t]),s.push(l)}),$.each(s,function(t,e){r.series.push(e)}),!s.length||n.metaData.excludeFromLabel||n.metaData.isEvent||(u=n.metaData.name,n.metaData.abbreviation&&(u=n.metaData.abbreviation),c=[],n.parameters&&$.each(n.parameters,function(t,e){var n;e.metaData.includeInLabel&&(n=e.value,e.metaData.isList&&(n=n.replace(/\s+/g,"")),c.push(n))}),0<c.length&&(u+="("+c.join(",")+")"),r.labels.push(u)))},e);function e(t,e,n,i){this.isCompare=!1,this.tzData=null,this.serverResponse=t,this.model=e,this.style=n,this.size=$.extend({width:"fill",height:"auto"},i),this.quotes=[],this.mainPane=new p.RenderPane;var r={showLegend:!(this.panes=[this.mainPane]),showCredits:!1,showTitle:!1,showSubtitle:!1};this.layoutContext=r,this.shouldHide(this.style.mikeStyle.hideLegend)||("boolean"==typeof e.showLegend?r.showLegend=e.showLegend:"number"==typeof e.showLegend&&(i=0,this.model.series&&(i=this.model.series.length),r.showLegend=e.showLegend<=i)),r.showCredits=null!==e.credit&&0<e.credit.length&&!this.shouldHide(this.style.mikeStyle.hideCredits),this.shouldHide(this.style.mikeStyle.hideTitle)||(this.title=e.title,this.title&&(r.showTitle=!0)),this.shouldHide(this.style.mikeStyle.hideSubtitle)||(this.subtitle=e.subtitle,this.subtitle&&(r.showSubtitle=!0)),this.xAxis=new p.RenderXAxis,this.xAxis.showLabels=!this.shouldHide(this.style.mikeStyle.hideXAxisLabels),this.mainAxis=new p.RenderYAxis(n.highchartsYAxisStyle),this.mainPane.axes.push(this.mainAxis),this.scanSeries(),this.processSeries(),e.xAxisTitle&&!this.shouldHide(this.style.mikeStyle.hideXAxisTitle)&&(this.xAxis.title=e.xAxisTitle,e.addTimeZoneToXAxisTitle&&t&&t.TimeInfo&&t.TimeInfo.IsIntraday&&(this.xAxis.title=this.tzData.addTimeZoneToTitle(this.xAxis.title,t.TimeInfo.FirstTick,t.TimeInfo.LastTick)),this.xAxis.showTitle=!0),this.xAxis.compressed=e.xAxisCompressed,new p.RenderLayout(this.model,this.panes,this.style,this.size,r).doLayout()}p.RenderModel=t;p.RenderPane=function(){this.height=void 0,this.axes=[]};p.RenderXAxis=function(){this.plotBands=[],this.plotLines=[],this.compressed=!0,this.showTitle=!1,this.title=void 0,this.showLabels=!0,this.min=void 0,this.max=void 0};var n,t=(n=1,i.prototype.setLabels=function(t,e){t&&t.FormatHints&&(null!==t.FormatHints.UnitSymbol&&!this.labelUnitSymbol&&e.mikeStyle.addYAxisUnits&&(this.labelUnitSymbol=t.FormatHints.UnitSymbol,this.labelSuffix=t.FormatHints.Suffix,this.addYAxisUnits=e.mikeStyle.addYAxisUnits),e.mikeStyle.maxYAxisLabelDecimals?this.maxLabelDecimals=e.mikeStyle.maxYAxisLabelDecimals:t.FormatHints.DecimalPlaces&&!this.maxLabelDecimals&&(this.maxLabelDecimals=t.FormatHints.DecimalPlaces),e&&e.mikeStyle&&e.mikeStyle.disallowOneDecimalOnYAxis&&(this.disallowOneDecimal=!0))},i.prototype.getActualAxis=function(t){var e=this.axisStyle.__mikeId;return $.grep(t.yAxis,function(t){return t.options.__mikeId===e})[0]},i);function i(t){this.top=void 0,this.height=void 0,this.offset=void 0,this.onLeft=!1,this.title=void 0,this.labelUnitSymbol=void 0,this.labelSuffix=void 0,this.addYAxisUnits=void 0,this.maxLabelDecimals=void 0,this.disallowOneDecimal=!1,this.isHidden=!1,this.showLabels=!0,this.type="linear",this.axisStyle={},$.extend(!0,this.axisStyle,t),this.axisStyle.__mikeId=n++,this.plotLines=[],this.series=[],this.events=[],this.labels=[]}p.RenderYAxis=t;p.RenderPlotLine=function(t,e){this.width=1,this.dashStyle="Solid",this.color="Green",this.zIndex=4,$.extend(!0,this,e),this.value=t};p.RenderPlotBand=function(t,e){this.from=t,this.to=e,this.color="#F0F0F0",this.labelStyle=void 0,this.name="Band",this.zIndex=2};r.nextId=0,t=r;function r(t,e,n,i){r.nextId+=1,this.id="rs-"+p.RenderSeries.nextId,this.isIndicator=e,this.sourceId=n,this.annotations=i||[],this.responseId=t,this.seriesName=t,this.chartType="line",this.fieldNames=[],this.seriesOptions=void 0,this.dataParameter=void 0,this.blueGrassChannels=[]}p.RenderSeries=t;o.nextId=0,t=o;function o(t){o.nextId+=1,this.id="re-"+o.nextId,this.responseId=t,this.seriesName=t,this.chartType="scatter"}p.RenderEvent=t}(Michelangelo=Michelangelo||{}),aYa=Michelangelo=Michelangelo||{},bYa=function(){function t(t,e,n,i,r){this.model=t,this.panes=e,this.style=n,this.size=i,this.context=r}t.prototype.__doHorizontalLayout=function(){var r=this;$.each(this.panes,function(t,e){var i=0;$.each(e.axes,function(t,e){var n=i%2==0;e.onLeft=n?r.model.firstAxisOnLeft:!r.model.firstAxisOnLeft,e.isHidden?e.offset=-75:(e.offset=75*Math.floor(i/2),i+=1)})})},t.prototype.__getTitleHeight=function(){var t=0;return this.context.showTitle&&(t+=30),this.context.showSubtitle&&(t+=20),t},t.prototype.__getRangeSelectorHeight=function(){return this.model.showRangeSelector?35:0},t.prototype.__getNavigatorHeight=function(){return this.model.showNavigator?52:0},t.prototype.__getLegendHeight=function(){var t,e,n=0;return this.context.showLegend&&(n=45,(t=this.style.highchartsStyles&&this.style.highchartsStyles.legend?this.style.highchartsStyles.legend:null)&&(e=!t.verticalAlign||"bottom"===t.verticalAlign,!t.floating&&e&&"left"!==t.align&&"right"!==t.align||(n=0))),n},t.prototype.determineHeight=function(){var t=53;t+=this.__getRangeSelectorHeight(),t+=this.__getTitleHeight(),t+=this.__getNavigatorHeight(),t+=this.__getLegendHeight();for(var e=0;e<this.panes.length;e++)t+=this.panes[e].height;return t};function l(t){return Math.floor(100*t)+"%"}return t.prototype.__doVerticalLayout=function(){for(var t,e=0,n=0;n<this.panes.length;n++)e+=this.panes[n].height,0<n&&(e+=20);var i=20/e,r=0;for(n=0;n<this.panes.length;n++){var o=this.panes[n],a=o.height/e;for(0<n&&(r+=i),t=0;t<o.axes.length;t++){var s=o.axes[t];s.top=l(r),s.height=l(a)}r+=a}},t.prototype.doLayout=function(){this.__doHorizontalLayout(),this.__doVerticalLayout(),"auto"===this.size.height&&(this.size.height=this.determineHeight())},t}(),aYa.RenderLayout=bYa,function(t){t.ServerRequest=function(){this.Step="P1D",this.TimeFrame="P6M",this.StartDate=void 0,this.EndDate=void 0,this.EntitlementToken="f9471dd374424d13bcc79e5ca933473e",this.IncludeMockTick=!0,this.FilterNullSlots=!0,this.FilterClosedPoints=!0,this.IncludeClosedSlots=!1,this.IncludeOfficialClose=!0,this.InjectOpen=!1,this.ShowPreMarket=!1,this.ShowAfterHours=!1,this.UseExtendedTimeFrame=!1,this.WantPriorClose=!1,this.IncludeCurrentQuotes=!1,this.ResetTodaysAfterHoursPercentChange=!1,this.Series=[]};var e=(n.prototype.parseAndSetTicker=function(t,e){return!(!t&&!e||(e?(this.Key=e,this.Dialect="DjId"):"vid:"===t.substring(0,4)?(this.Key=t.substring(4),this.Dialect="VarastoId"):(this.Key=t,/.*\/.*\/.*\/.*/.test(t)?this.Dialect="Charting":this.Dialect="Mktw"),0))},n);function n(){}t.ServerRequestSeries=e;t.ServerRequestIndicator=function(){this.Parameters=[]};t.ServerRequestIndicatorParameter=function(){};i.findSeriesBySeriesId=function(t,n){var i=null;return t&&t.Series&&$.each(t.Series,function(t,e){e.SeriesId===n&&(i?i.push(e):i=[e])}),i},i.findSeriesByResponseId=function(t,n){var i=null;return t&&t.Series&&$.each(t.Series,function(t,e){e.ResponseId!==n||(i=e)}),i},i.findAggregateBySeriesId=function(t,n){var i=null;return t&&t.Aggregates&&$.each(t.Aggregates,function(t,e){e.SeriesId!==n||(i=e)}),i},i.findEventBySeriesId=function(t,n){var i=null;return t&&t.Events&&$.each(t.Events,function(t,e){e.SeriesId!==n||(i=e)}),i},i.findEventByResponseId=function(t,n){var i=null;return null!==t&&t.Events&&$.each(t.Events,function(t,e){e.ResponseId!==n||(i=e)}),i},e=i;function i(){}t.ServerResponseHelpers=e}(Michelangelo=Michelangelo||{}),function(t){var e=(n.instance=function(){return n._instance=null===n._instance?{}:n._instance},n._instance=null,n);function n(){}t.EmptyStyle=e;i.instance=function(){return i._instance=null===i._instance?i.makeInstance():i._instance},i.makeInstance=function(){var t={highchartsStyles:{plotOptions:{area:{threshold:null},line:{connectNulls:!1},scatter:{tooltip:{headerFormat:"{point.x:%d-%b-%Y}",pointFormat:"<br /><b>{series.name}: {point.y:.2f}</b>"}}},xAxis:{dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %b",week:"%e %b",month:"%b %y",year:"%Y"}}},mikeStyle:{yAxisLabelsOutside:!1,addYAxisUnits:"all",shiftChartOnBlueGrassTick:!1,timestamp:{style:{fontSize:"10px",color:"#A0A0A0"}},indicatorLabels:{style:{fontSize:"10px",color:"#A0A0A0"}}},indicatorStyles:[],eventStyles:[],aggregateStyles:[],seriesStyles:[]};return t.mikeStyle.marketBands={enabled:!0,labelStyle:{rotation:-90,align:"center",verticalAlign:"top",textAlign:"right",style:{color:"#A0A0A0",fontSize:"6pt"}},color:"rgba(150, 150, 255, 0.1)",closed:{color:"#C0C0C0"},preMarket:{name:"Pre-Market"},afterMarket:{name:"After-Hours"}},t.mikeStyle.marketLines={left:{enabled:!1},right:{enabled:!1}},t.indicatorStyles.AroonIndicator={axisStyle:{endOnTick:!1,min:0,max:101},seriesStyles:[{color:"green"},{color:"red"}]},t.indicatorStyles.BollingerBands={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},t.indicatorStyles.CommodityChannelIndex={axisStyle:{gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:100,width:1,dashStyle:"Solid",color:"LightGray"},{value:0,width:1,dashStyle:"DashDot",color:"LightGray"},{value:-100,width:1,dashStyle:"Solid",color:"LightGray"}]}},t.indicatorStyles.CompetitorComparison={seriesStyles:[{lineWidth:0,fillColor:"rgba(80, 80, 80, 0.2)"}]},t.indicatorStyles.FundComparison={seriesStyles:[{lineWidth:0,fillColor:"rgba(80, 80, 80, 0.2)"}]},t.indicatorStyles.KeltnerChannels={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},t.indicatorStyles.MovingAverageConvergenceDivergence={seriesStyles:[{color:"blue"},{color:"red"},{color:"black",type:"column"}]},t.indicatorStyles.NewsDensity={seriesStyles:[{type:"column"}]},t.indicatorStyles.ParabolicSAR={seriesStyles:[{lineWidth:0,marker:{enabled:!0,symbol:"circle"}}]},t.indicatorStyles.PriceChannels={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},t.indicatorStyles.PriceToEarningsRanges={seriesStyles:[{color:"black"}]},t.indicatorStyles.RelativeStrengthIndex={axisStyle:{min:0,max:100,gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:70,width:1,dashStyle:"Solid",color:"LightGray"},{value:30,width:1,dashStyle:"Solid",color:"LightGray"}]}},t.indicatorStyles.RollingDividend={seriesStyles:[{connectNulls:!0}]},t.indicatorStyles.Volume={seriesStyles:[{color:"black"}]},t.indicatorStyles.VolumePlus={seriesStyles:[{color:"black",type:"column"},{color:"red",type:"column"},{color:"orange"}]},t.indicatorStyles.VortexIndicator={axisStyle:{gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:1.1,width:1,dashStyle:"Solid",color:"LightGray"},{value:1,width:1,dashStyle:"DashDot",color:"LightGray"},{value:.9,width:1,dashStyle:"Solid",color:"LightGray"}]},seriesStyles:[{color:"green"},{color:"red"}]},t.indicatorStyles.WilliamsPercentR={axisStyle:{min:-100,max:0,gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:-20,width:1,dashStyle:"Solid",color:"LightGray",label:{text:"Overbought"}},{value:-50,width:1,dashStyle:"DashDot",color:"LightGray"},{value:-80,width:1,dashStyle:"Solid",color:"LightGray",label:{text:"Oversold",y:12}}]}},t.aggregateStyles.OpenHighLowLines={open:{color:"Red"},high:{color:"Blue"},low:{color:"Blue"}},t.eventStyles.DividendEvents={upImageUrl:"../images/event-dividend-inc.svg",downImageUrl:"../images/event-dividend-dec.svg",unchangedImageUrl:"../images/event-dividend-nc.svg"},t.eventStyles.EarningsEvents={upImageUrl:"../images/event-earnings-inc.svg",downImageUrl:"../images/event-earnings-dec.svg",unchangedImageUrl:"../images/event-earnings-nc.svg"},t.eventStyles.SplitEvents={upImageUrl:"../images/event-split-inc.svg",downImageUrl:"../images/event-split-dec.svg",unchangedImageUrl:"../images/event-split-nc.svg"},t.eventStyles.InsiderTransactions={upImageUrl:"../images/green-bubble.png",downImageUrl:"../images/red-bubble.png",unchangedImageUrl:"../images/red-bubble.png"},t.seriesStyles.TickerSeries=function(t){return"column"===t?{dataGrouping:{approximation:"close"}}:null},t.seriesStyles.TextPhraseSeries={connectNulls:!0},t},i._instance=null,e=i;function i(){}t.DefaultStyle=e}(Michelangelo=Michelangelo||{}),tZa=Michelangelo=Michelangelo||{},vZa.prototype.isDst=function(t){return!!this.serverTzData&&(t<this.serverTzData.SwitchDateUtc?this.serverTzData.IsDstBeforeSwitch:this.serverTzData.IsDstAfterSwitch)},vZa.prototype.utcToLocal=function(t){return this.isIntraday&&this.serverTzData?t<this.serverTzData.SwitchDateUtc?t+6e4*this.serverTzData.UtcOffsetBeforeSwitch:t+6e4*this.serverTzData.UtcOffsetAfterSwitch:t},vZa.prototype.getAbbreviation=function(t){return this.serverTzData?this.isDst(t)?this.serverTzData.DaylightAbbreviation:this.serverTzData.StandardAbbreviation:null},vZa.prototype.addTimeZoneToTitle=function(t,e,n){e=this.getAbbreviation(e),n=this.getAbbreviation(n);return e&&n?e===n?t+" ("+e+")":t+" ("+e+"/"+n+")":t},uZa=vZa,tZa.TimeZoneData=uZa,mike=Michelangelo=Michelangelo||{},(mike.versions||(mike.versions={})).core="2.0.2073","object"==typeof window&&(window.Michelangelo=window.Michelangelo||Michelangelo),module.exports=window.Michelangelo},VphZ:function(n,t,i){!function(t){var e={};"d3"in t&&(e.d3=t.d3),n.exports=i("bljh"),"d3"in e?t.d3=e.d3:delete t.d3}.call(this,i("yLpj"))},Yr7j:function(t,d,f){!function(u,c){var p;!function(){var or="Expected a function",ar="__lodash_placeholder__",sr="[object Arguments]",lr="[object Array]",hr="[object Boolean]",ur="[object Date]",cr="[object Error]",pr="[object Function]",dr="[object Number]",fr="[object Object]",gr="[object RegExp]",mr="[object String]",yr="[object Float32Array]",vr="[object Float64Array]",xr="[object Int8Array]",_r="[object Int16Array]",br="[object Int32Array]",wr="[object Uint8Array]",kr="[object Uint16Array]",Sr="[object Uint32Array]",Mr=/\b__p \+= '';/g,Tr=/\b(__p \+=) '' \+/g,Ar=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pr=/&(?:amp|lt|gt|quot|#39|#96);/g,Dr=/[&<>"'`]/g,Cr=RegExp(Pr.source),Lr=RegExp(Dr.source),Ir=/<%-([\s\S]+?)%>/g,Er=/<%([\s\S]+?)%>/g,Rr=/<%=([\s\S]+?)%>/g,Hr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Or=/^\w*$/,Nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Yr=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,zr=RegExp(Yr.source),Fr=/[\u0300-\u036f\ufe20-\ufe23]/g,Xr=/\\(\\)?/g,Br=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ur=/\w*$/,Wr=/^0[xX]/,Gr=/^\[object .+?Constructor\]$/,Vr=/^\d+$/,jr=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,$r=/($^)/,qr=/['\n\r\u2028\u2029\\]/g,Kr=(l="[A-Z\\xc0-\\xd6\\xd8-\\xde]",s="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(l+"+(?="+l+s+")|"+l+"?"+s+"|"+l+"+|[0-9]+","g")),Zr=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Jr=-1,Qr={};Qr[yr]=Qr[vr]=Qr[xr]=Qr[_r]=Qr[br]=Qr[wr]=Qr["[object Uint8ClampedArray]"]=Qr[kr]=Qr[Sr]=!0,Qr[sr]=Qr[lr]=Qr["[object ArrayBuffer]"]=Qr[hr]=Qr[ur]=Qr[cr]=Qr[pr]=Qr["[object Map]"]=Qr[dr]=Qr[fr]=Qr[gr]=Qr["[object Set]"]=Qr[mr]=Qr["[object WeakMap]"]=!1;var to={};to[sr]=to[lr]=to["[object ArrayBuffer]"]=to[hr]=to[ur]=to[yr]=to[vr]=to[xr]=to[_r]=to[br]=to[dr]=to[fr]=to[gr]=to[mr]=to[wr]=to["[object Uint8ClampedArray]"]=to[kr]=to[Sr]=!0,to[cr]=to[pr]=to["[object Map]"]=to["[object Set]"]=to["[object WeakMap]"]=!1;var e={"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss"},n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},t={function:!0,object:!0},r={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},o={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},a=t[typeof d]&&d&&!d.nodeType&&d,s=t[typeof u]&&u&&!u.nodeType&&u,l=a&&s&&"object"==typeof c&&c&&c.Object&&c,a=t[typeof self]&&self&&self.Object&&self,t=t[typeof window]&&window&&window.Object&&window,eo=(s&&s.exports,l||t!==(this&&this.window)&&t||a||this);function no(t,e){if(t!==e){var n=null===t,i=void 0===t,r=t==t,o=null===e,a=void 0===e,s=e==e;if(e<t&&!o||!r||n&&!a&&s||i&&s)return 1;if(t<e&&!n||!s||o&&!i&&r||a&&r)return-1}return 0}function io(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function ro(t,e,n){if(e!=e)return go(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function oo(t){return"function"==typeof t||!1}function ao(t){return null==t?"":t+""}function so(t,e){for(var n=-1,i=t.length;++n<i&&-1<e.indexOf(t.charAt(n)););return n}function lo(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function ho(t,e){return no(t.criteria,e.criteria)||t.index-e.index}function uo(t){return e[t]}function co(t){return n[t]}function po(t,e,n){return e?t=r[t]:n&&(t=o[t]),"\\"+t}function fo(t){return"\\"+o[t]}function go(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var o=t[r];if(o!=o)return r}return-1}function mo(t){return!!t&&"object"==typeof t}function h(t){return t<=160&&9<=t&&t<=13||32==t||160==t||5760==t||6158==t||8192<=t&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function yo(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;)t[n]===e&&(t[n]=ar,o[++r]=n);return o}function vo(t){for(var e=-1,n=t.length;++e<n&&h(t.charCodeAt(e)););return e}function xo(t){for(var e=t.length;e--&&h(t.charCodeAt(e)););return e}function _o(t){return i[t]}var bo=function t(e){var M=(e=e?bo.defaults(eo.Object(),e,bo.pick(eo,Zr)):eo).Array,n=e.Date,i=e.Error,c=e.Function,r=e.Math,o=e.Number,d=e.Object,p=e.RegExp,a=e.String,v=e.TypeError,s=M.prototype,l=d.prototype,h=a.prototype,u=c.prototype.toString,y=l.hasOwnProperty,f=0,g=l.toString,m=eo._,x=p("^"+u.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=e.ArrayBuffer,b=e.clearTimeout,w=e.parseFloat,k=r.pow,S=l.propertyIsEnumerable,T=Re(e,"Set"),A=e.setTimeout,P=s.splice,D=e.Uint8Array,C=Re(e,"WeakMap"),L=r.ceil,I=Re(d,"create"),E=r.floor,R=Re(M,"isArray"),H=e.isFinite,O=Re(d,"keys"),N=r.max,Y=r.min,z=Re(n,"now"),F=e.parseInt,X=r.random,B=o.NEGATIVE_INFINITY,U=o.POSITIVE_INFINITY,W=C&&new C,G={};function V(t){if(mo(t)&&!hi(t)&&!(t instanceof q)){if(t instanceof $)return t;if(y.call(t,"__chain__")&&y.call(t,"__wrapped__"))return Je(t)}return new $(t)}function j(){}function $(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function q(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function K(){this.__data__={}}function Z(t){var e=t?t.length:0;for(this.data={hash:I(null),set:new T};e--;)this.push(t[e])}function J(t,e){t=t.data;return("string"==typeof e||di(e)?t.set.has(e):t.hash[e])?0:-1}function Q(t,e){var n=-1,i=t.length;for(e=e||M(i);++n<i;)e[n]=t[n];return e}function tt(t,e){for(var n=-1,i=t.length;++n<i&&!1!==e(t[n],n,t););return t}function et(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function nt(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[++r]=a)}return o}function it(t,e){for(var n=-1,i=t.length,r=M(i);++n<i;)r[n]=e(t[n],n,t);return r}function rt(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ot(t,e,n,i){var r=-1,o=t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function at(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function st(t,e,n,i){return void 0!==t&&y.call(i,n)?t:e}function lt(t,e,n){for(var i=-1,r=Ri(e),o=r.length;++i<o;){var a=r[i],s=t[a],l=n(s,e[a],a,t,e);(l==l?l===s:s!=s)&&(void 0!==s||a in t)||(t[a]=l)}return t}function ht(t,e){return null==e?t:ct(e,Ri(e),t)}function ut(t,e){for(var n=-1,i=null==t,r=!i&&Oe(t),o=r?t.length:0,a=e.length,s=M(a);++n<a;){var l=e[n];s[n]=r?Ne(l,o)?t[l]:void 0:i?void 0:t[l]}return s}function ct(t,e,n){n=n||{};for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}function pt(t,e,n){var i=typeof t;return"function"==i?void 0===e?t:Kt(t,e,n):null==t?Qi:"object"==i?Rt(t):void 0===e?ir(t):Ht(t,e)}function dt(n,i,r,t,e,o,a){var s;if(void 0!==(s=r?e?r(n,t,e):r(n):s))return s;if(!di(n))return n;var l,h=hi(n);if(h){if(t=(l=n).length,c=new l.constructor(t),t&&"string"==typeof l[0]&&y.call(l,"index")&&(c.index=l.index,c.input=l.input),s=c,!i)return Q(n,s)}else{var u=g.call(n),c=u==pr;if(u!=fr&&u!=sr&&(!c||e))return to[u]?function(t,e){var n=t.constructor;switch(u){case"[object ArrayBuffer]":return Zt(t);case hr:case ur:return new n(+t);case yr:case vr:case xr:case _r:case br:case wr:case"[object Uint8ClampedArray]":case kr:case Sr:var i=t.buffer;return new n(e?Zt(i):i,t.byteOffset,t.length);case dr:case mr:return new n(t);case gr:var r=new n(t.source,Ur.exec(t));r.lastIndex=t.lastIndex}return r}(n,i):e?n:{};if(c=(c?{}:n).constructor,s=new(c=!("function"==typeof c&&c instanceof c)?d:c),!i)return ht(s,n)}a=a||[];for(var p=(o=o||[]).length;p--;)if(o[p]==n)return a[p];return o.push(n),a.push(s),(h?tt:At)(n,function(t,e){s[e]=dt(t,i,r,e,n,o,a)}),s}V.support={},V.templateSettings={escape:Ir,evaluate:Er,interpolate:Rr,variable:"",imports:{_:V}};var ft=function(t){var e;return di(t)&&(gt.prototype=t,e=new gt,gt.prototype=void 0),e||{}};function gt(){}function mt(t,e,n){if("function"!=typeof t)throw new v(or);return A(function(){t.apply(void 0,n)},e)}function yt(t,e){var n=t?t.length:0,i=[];if(!n)return i;var r=-1,o=Le(),a=o==ro,s=a&&200<=e.length?re(e):null,l=e.length;s&&(o=J,a=!1,e=s);t:for(;++r<n;){var h=t[r];if(a&&h==h){for(var u=l;u--;)if(e[u]===h)continue t;i.push(h)}else o(e,h,0)<0&&i.push(h)}return i}var vt=ne(At),xt=ne(Pt,!0);function _t(t,i){var r=!0;return vt(t,function(t,e,n){return r=!!i(t,e,n)}),r}function bt(t,i){var r=[];return vt(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r}function wt(t,i,e,r){var o;return e(t,function(t,e,n){if(i(t,e,n))return o=r?e:t,!1}),o}function kt(t,e,n,i){i=i||[];for(var r=-1,o=t.length;++r<o;){var a=t[r];mo(a)&&Oe(a)&&(n||hi(a)||li(a))?e?kt(a,e,n,i):rt(i,a):n||(i[i.length]=a)}return i}var St=ie(),Mt=ie(!0);function Tt(t,e){return St(t,e,Hi)}function At(t,e){return St(t,e,Ri)}function Pt(t,e){return Mt(t,e,Ri)}function Dt(t,e){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var a=e[n];pi(t[a])&&(o[++r]=a)}return o}function Ct(t,e,n){if(null!=t){for(var i=0,r=((e=void 0!==n&&n in Ke(t)?[n]:e).length);null!=t&&i<r;)t=t[e[i++]];return i&&i==r?t:void 0}}function Lt(t,e,n,i,r,o){return t===e||(null==t||null==e||!di(t)&&!mo(e)?t!=t&&e!=e:function(t,e,n,i,r,o,a){var s=hi(t),l=hi(e),h=lr,u=lr;s||((h=g.call(t))==sr?h=fr:h!=fr&&(s=xi(t))),l||((u=g.call(e))==sr?u=fr:u!=fr&&xi(e));var c=h==fr,l=u==fr,u=h==u;if(u&&!s&&!c)return function(t,e){switch(h){case hr:case ur:return+t==+e;case cr:return t.name==e.name&&t.message==e.message;case dr:return t!=+t?e!=+e:t==+e;case gr:case mr:return t==e+""}return!1}(t,e);if(!r){c=c&&y.call(t,"__wrapped__"),l=l&&y.call(e,"__wrapped__");if(c||l)return n(c?t.value():t,l?e.value():e,i,r,o,a)}if(!u)return!1;a=a||[];for(var p=(o=o||[]).length;p--;)if(o[p]==t)return a[p]==e;o.push(t),a.push(e);r=(s?Te:Ae)(t,e,n,i,r,o,a);return o.pop(),a.pop(),r}(t,e,Lt,n,i,r,o))}function It(t,e,n){var i=e.length,r=i,o=!n;if(null==t)return!r;for(t=Ke(t);i--;){var a=e[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<r;){var s=(a=e[i])[0],l=t[s],h=a[1];if(o&&a[2]){if(void 0===l&&!(s in t))return!1}else{s=n?n(l,h,s):void 0;if(!(void 0===s?Lt(h,l,n,!0):s))return!1}}return!0}function Et(t,i){var r=-1,o=Oe(t)?M(t.length):[];return vt(t,function(t,e,n){o[++r]=i(t,e,n)}),o}function Rt(t){var e=Ee(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null!=t&&t[n]===i&&(void 0!==i||n in Ke(t))}}return function(t){return It(t,e)}}function Ht(n,i){var r=hi(n),o=ze(n)&&Be(i),a=n+"";return n=Ze(n),function(t){if(null==t)return!1;var e=a;if(t=Ke(t),(r||!o)&&!(e in t)){if(null==(t=1==n.length?t:Ct(t,Ft(n,0,-1))))return!1;e=ln(n),t=Ke(t)}return t[e]===i?void 0!==i||e in t:Lt(i,t[e],void 0,!0)}}function Ot(e){return function(t){return null==t?void 0:t[e]}}function Nt(t,e){for(var n=t?e.length:0;n--;){var i,r=e[n];r!=i&&Ne(r)&&P.call(t,i=r,1)}return t}function Yt(t,e){return t+E(X()*(e-t+1))}var zt=W?function(t,e){return W.set(t,e),t}:Qi;function Ft(t,e,n){var i=-1,r=t.length;(n=void 0===n||r<n?r:+n||0)<0&&(n+=r),r=n<(e=(e=null!=e&&+e||0)<0?r<-e?0:r+e:e)?0:n-e>>>0,e>>>=0;for(var o=M(r);++i<r;)o[i]=t[i+e];return o}function Xt(t,i){var r;return vt(t,function(t,e,n){return!(r=i(t,e,n))}),!!r}function Bt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ut(t,n,i){var e=Pe(),r=-1;return n=it(n,function(t){return e(t)}),Bt(Et(t,function(e){return{criteria:it(n,function(t){return t(e)}),index:++r,value:e}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=no(r[i],o[i]);if(l){if(s<=i)return l;var h=n[i];return l*("asc"===h||!0===h?1:-1)}}return t.index-e.index}(t,e,i)})}function Wt(t,e){var n=-1,i=Le(),r=t.length,o=i==ro,a=o&&200<=r,s=a?re():null,l=[];s?(i=J,o=!1):(a=!1,s=e?[]:l);t:for(;++n<r;){var h=t[n],u=e?e(h,n,t):h;if(o&&h==h){for(var c=s.length;c--;)if(s[c]===u)continue t;e&&s.push(u),l.push(h)}else i(s,u,0)<0&&((e||a)&&s.push(u),l.push(h))}return l}function Gt(t,e){for(var n=-1,i=e.length,r=M(i);++n<i;)r[n]=t[e[n]];return r}function Vt(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Ft(t,i?0:o,i?o+1:r):Ft(t,i?o+1:0,i?r:o)}function jt(t,e){(o=t)instanceof q&&(o=o.value());for(var n=-1,i=e.length;++n<i;)var r=e[n],o=r.func.apply(r.thisArg,rt([o],r.args));return o}function $t(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?i=1+o:r=o}return r}return qt(t,e,Qi,n)}function qt(t,e,n,i){e=n(e);for(var r=0,o=t?t.length:0,a=e!=e,s=null===e,l=void 0===e;r<o;){var h=E((r+o)/2),u=n(t[h]),c=void 0!==u,p=u==u,u=a?p||i:s?p&&c&&(i||null!=u):l?p&&(i||c):null!=u&&(i?u<=e:u<e);u?r=h+1:o=h}return Y(o,4294967294)}function Kt(o,a,t){if("function"!=typeof o)return Qi;if(void 0===a)return o;switch(t){case 1:return function(t){return o.call(a,t)};case 3:return function(t,e,n){return o.call(a,t,e,n)};case 4:return function(t,e,n,i){return o.call(a,t,e,n,i)};case 5:return function(t,e,n,i,r){return o.call(a,t,e,n,i,r)}}return function(){return o.apply(a,arguments)}}function Zt(t){var e=new _(t.byteLength);return new D(e).set(new D(t)),e}function Jt(t,e,n){for(var i=n.length,r=-1,o=N(t.length-i,0),a=-1,s=e.length,l=M(s+o);++a<s;)l[a]=e[a];for(;++r<i;)l[n[r]]=t[r];for(;o--;)l[a++]=t[r++];return l}function Qt(t,e,n){for(var i=-1,r=n.length,o=-1,a=N(t.length-r,0),s=-1,l=e.length,h=M(a+l);++o<a;)h[o]=t[o];for(var u=o;++s<l;)h[u+s]=e[s];for(;++i<r;)h[u+n[i]]=t[o++];return h}function te(s,l){return function(t,i,e){var r=l?l():{};if(i=Pe(i,e,3),hi(t))for(var n=-1,o=t.length;++n<o;){var a=t[n];s(r,a,i(a,n,t),t)}else vt(t,function(t,e,n){s(r,t,i(t,e,n),n)});return r}}function ee(l){return ai(function(t,e){var n=-1,i=null==t?0:e.length,r=2<i?e[i-2]:void 0,o=2<i?e[2]:void 0,a=1<i?e[i-1]:void 0;for("function"==typeof r?(r=Kt(r,a,5),i-=2):i-=(r="function"==typeof a?a:void 0)?1:0,o&&Ye(e[0],e[1],o)&&(r=i<3?void 0:r,i=1);++n<i;){var s=e[n];s&&l(t,s,r)}return t})}function ne(o,a){return function(t,e){var n=t?Ie(t):0;if(!Xe(n))return o(t,e);for(var i=a?n:-1,r=Ke(t);(a?i--:++i<n)&&!1!==e(r[i],i,r););return t}}function ie(l){return function(t,e,n){for(var i=Ke(t),r=n(t),o=r.length,a=l?o:-1;l?a--:++a<o;){var s=r[a];if(!1===e(i[s],s,i))break}return t}}function re(t){return I&&T?new Z(t):null}function oe(o){return function(t){for(var e=-1,n=Ki(Ui(t)),i=n.length,r="";++e<i;)r=o(r,n[e],e);return r}}function ae(i){return function(){var t=arguments;switch(t.length){case 0:return new i;case 1:return new i(t[0]);case 2:return new i(t[0],t[1]);case 3:return new i(t[0],t[1],t[2]);case 4:return new i(t[0],t[1],t[2],t[3]);case 5:return new i(t[0],t[1],t[2],t[3],t[4]);case 6:return new i(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new i(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=ft(i.prototype),n=i.apply(e,t);return di(n)?n:e}}function se(r){return function t(e,n,i){i&&Ye(e,n,i)&&(n=void 0);n=Me(e,r,void 0,void 0,void 0,void 0,void 0,n);return n.placeholder=t.placeholder,n}}function le(n,i){return ai(function(t){var e=t[0];return null==e?e:(t.push(i),n.apply(void 0,t))})}function he(l,h){return function(t,e,n){if(1==(e=Pe(e=n&&Ye(t,e,n)?void 0:e,n,3)).length){n=function(t,e,n){for(var i=-1,r=t.length,o=h,a=o;++i<r;){var s=t[i],l=+e(s);n(l,o)&&(o=l,a=s)}return a}(t=hi(t)?t:qe(t),e,l);if(!t.length||n!==h)return n}return i=e,r=l,s=a=o=h,vt(t,function(t,e,n){n=+i(t,e,n);(r(n,a)||n===o&&n===s)&&(a=n,s=t)}),s;var i,r,o,a,s}}function ue(i,r){return function(t,e,n){if(e=Pe(e,n,3),hi(t)){n=io(t,e,r);return-1<n?t[n]:void 0}return wt(t,e,i)}}function ce(i){return function(t,e,n){return t&&t.length?io(t,e=Pe(e,n,3),i):-1}}function pe(i){return function(t,e,n){return wt(t,e=Pe(e,n,3),i,!0)}}function de(l){return function(){for(var r=arguments.length,t=l?r:-1,e=0,o=M(r);l?t--:++t<r;){var n=o[e++]=arguments[t];if("function"!=typeof n)throw new v(or);!s&&$.prototype.thru&&"wrapper"==Ce(n)&&(s=new $([],!0))}for(t=s?-1:r;++t<r;)var i=Ce(n=o[t]),a="wrapper"==i?De(n):void 0,s=a&&Fe(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?s[Ce(a[0])].apply(s,a[3]):1==n.length&&Fe(n)?s[i]():s.thru(n);return function(){var t=arguments,e=t[0];if(s&&1==t.length&&hi(e)&&200<=e.length)return s.plant(e).value();for(var n=0,i=r?o[n].apply(this,t):e;++n<r;)i=o[n].call(this,i);return i}}}function fe(i,r){return function(t,e,n){return"function"==typeof e&&void 0===n&&hi(t)?i(t,e):r(t,Kt(e,n,3))}}function ge(i){return function(t,e,n){return"function"==typeof e&&void 0===n||(e=Kt(e,n,3)),i(t,e,Hi)}}function me(i){return function(t,e,n){return"function"==typeof e&&void 0===n||(e=Kt(e,n,3)),i(t,e)}}function ye(o){return function(t,i,e){var r={};return i=Pe(i,e,3),At(t,function(t,e,n){n=i(t,e,n);r[e=o?n:e]=t=o?t:n}),r}}function ve(i){return function(t,e,n){return t=ao(t),(i?t:"")+we(t,e,n)+(i?"":t)}}function xe(i){var r=ai(function(t,e){var n=yo(e,r.placeholder);return Me(t,i,void 0,e,n)});return r}function _e(h,u){return function(t,e,n,i){var r,o,a,s,l=arguments.length<3;return"function"==typeof e&&void 0===i&&hi(t)?h(t,e,n,l):(r=t,o=Pe(e,i,4),a=n,s=l,u(r,function(t,e,n){a=s?(s=!1,t):o(a,t,e,n)}),a)}}function be(l,h,u,c,p,d,f,g,m,y){var v=128&h,x=1&h,_=2&h,b=8&h,w=4&h,k=16&h,S=_?void 0:ae(l);return function t(){for(var e=arguments.length,n=e,i=M(e);n--;)i[n]=arguments[n];if(c&&(i=Jt(i,c,p)),d&&(i=Qt(i,d,f)),b||k){var r=t.placeholder,o=yo(i,r);if((e-=o.length)<y){var a=g?Q(g):void 0,s=N(y-e,0);h|=b?32:64,h&=~(b?64:32),w||(h&=-4);a=[l,h,u,b?i:void 0,b?o:void 0,b?void 0:i,b?void 0:o,a,m,s],s=be.apply(void 0,a);return Fe(l)&&je(s,a),s.placeholder=r,s}}r=x?u:this,s=_?r[l]:l;return g&&(i=function(t,e){for(var n=t.length,i=Y(e.length,n),r=Q(t);i--;){var o=e[i];t[i]=Ne(o,n)?r[o]:void 0}return t}(i,g)),v&&m<i.length&&(i.length=m),(s=this&&this!==eo&&this instanceof t?S||ae(l):s).apply(r,i)}}function we(t,e,n){t=t.length;if(t>=(e=+e)||!H(e))return"";t=e-t;return ji(n=null==n?" ":n+"",L(t/n.length)).slice(0,t)}function ke(t){var n=r[t];return function(t,e){return(e=void 0!==e&&+e||0)?(e=k(10,e),n(t*e)/e):n(t)}}function Se(o){return function(t,e,n,i){var r=Pe(n);return null==n&&r===pt?$t(t,e,o):qt(t,e,r(n,i,1),o)}}function Me(t,e,n,i,r,o,a,s){var l=2&e;if(!l&&"function"!=typeof t)throw new v(or);var h,u,c=i?i.length:0;c||(e&=-97,i=r=void 0),c-=r?r.length:0,64&e&&(h=i,u=r,i=r=void 0);var p,d,f,g=l?void 0:De(t),a=[t,e,n,i,r,h,u,o,a,s];return g&&(function(t,e){var n=t[1],i=e[1],r=n|i,o=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&8==n;if(!(r<128)&&!o)return;1&i&&(t[2]=e[2],r|=1&n?0:4);var a,n=e[3];n&&(a=t[3],t[3]=a?Jt(a,n,e[4]):Q(n),t[4]=a?yo(t[3],ar):Q(e[4])),(n=e[5])&&(a=t[5],t[5]=a?Qt(a,n,e[6]):Q(n),t[6]=a?yo(t[5],ar):Q(e[6])),(n=e[7])&&(t[7]=Q(n)),128&i&&(t[8]=null==t[8]?e[8]:Y(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(a,g),e=a[1],s=a[9]),a[9]=null==s?l?0:t.length:N(s-c,0)||0,e=1==e?(p=a[0],d=a[2],f=ae(p),function t(){return(this&&this!==eo&&this instanceof t?f:p).apply(d,arguments)}):(32!=e&&33!=e||a[4].length?be:function(a,t,s,l){var h=1&t,u=ae(a);return function t(){for(var e=-1,n=arguments.length,i=-1,r=l.length,o=M(r+n);++i<r;)o[i]=l[i];for(;n--;)o[i++]=arguments[++e];return(this&&this!==eo&&this instanceof t?u:a).apply(h?s:this,o)}}).apply(void 0,a),(g?zt:je)(e,a)}function Te(t,e,n,i,r,o,a){var s=-1,l=t.length,h=e.length;if(l!=h&&!(r&&l<h))return!1;for(;++s<l;){var u=t[s],c=e[s],p=i?i(r?c:u,r?u:c,s):void 0;if(void 0!==p){if(p)continue;return!1}if(r){if(!at(e,function(t){return u===t||n(u,t,i,r,o,a)}))return!1}else if(u!==c&&!n(u,c,i,r,o,a))return!1}return!0}function Ae(t,e,n,i,r,o,a){var s=Ri(t),l=s.length;if(l!=Ri(e).length&&!r)return!1;for(var h=l;h--;){var u=s[h];if(!(r?u in e:y.call(e,u)))return!1}for(var c=r;++h<l;){var p=t[u=s[h]],d=e[u],f=i?i(r?d:p,r?p:d,u):void 0;if(!(void 0===f?n(p,d,i,r,o,a):f))return!1;c=c||"constructor"==u}if(!c){var g=t.constructor,m=e.constructor;if(g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0}function Pe(t,e,n){var i=(i=V.callback||Ji)===Ji?pt:i;return n?i(t,e,n):i}var De=W?function(t){return W.get(t)}:nr;function Ce(t){for(var e=t.name,n=G[e],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Le(t,e,n){var i=(i=V.indexOf||an)===an?ro:i;return t?i(t,e,n):i}var Ie=Ot("length");function Ee(t){for(var e=zi(t),n=e.length;n--;)e[n][2]=Be(e[n][1]);return e}function Re(t,e){e=null==t?void 0:t[e];return fi(e)?e:void 0}function He(t,e,n){null==t||ze(e,t)||(t=1==(e=Ze(e)).length?t:Ct(t,Ft(e,0,-1)),e=ln(e));e=null==t?t:t[e];return null==e?void 0:e.apply(t,n)}function Oe(t){return null!=t&&Xe(Ie(t))}function Ne(t,e){return e=null==e?9007199254740991:e,-1<(t="number"==typeof t||Vr.test(t)?+t:-1)&&t%1==0&&t<e}function Ye(t,e,n){if(!di(n))return!1;var i=typeof e;if("number"==i?Oe(n)&&Ne(e,n.length):"string"==i&&e in n){e=n[e];return t==t?t===e:e!=e}return!1}function ze(t,e){var n=typeof t;return!!("string"==n&&Or.test(t)||"number"==n)||!hi(t)&&(!Hr.test(t)||null!=e&&t in Ke(e))}function Fe(t){var e=Ce(t);if(e in q.prototype){e=V[e];if(t===e)return 1;e=De(e);return e&&t===e[0]}}function Xe(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}function Be(t){return t==t&&!di(t)}function Ue(t,e){t=Ke(t);for(var n=-1,i=e.length,r={};++n<i;){var o=e[n];o in t&&(r[o]=t[o])}return r}function We(t,i){var r={};return Tt(t,function(t,e,n){i(t,e,n)&&(r[e]=t)}),r}var Ge,Ve,je=(Ve=Ge=0,function(t,e){var n=Un(),i=16-(n-Ve);if(Ve=n,0<i){if(150<=++Ge)return t}else Ge=0;return zt(t,e)});function $e(t){for(var e=Hi(t),n=e.length,i=n&&t.length,r=!!i&&Xe(i)&&(hi(t)||li(t)),o=-1,a=[];++o<n;){var s=e[o];(r&&Ne(s,i)||y.call(t,s))&&a.push(s)}return a}function qe(t){return null==t?[]:Oe(t)?di(t)?t:d(t):Xi(t)}function Ke(t){return di(t)?t:d(t)}function Ze(t){if(hi(t))return t;var r=[];return ao(t).replace(Nr,function(t,e,n,i){r.push(n?i.replace(Xr,"$1"):e||t)}),r}function Je(t){return t instanceof q?t.clone():new $(t.__wrapped__,t.__chain__,Q(t.__actions__))}var Qe=ai(function(t,e){return mo(t)&&Oe(t)?yt(t,kt(e,!1,!0)):[]});function tn(t,e,n){return t&&t.length?Ft(t,(e=(n?Ye(t,e,n):null==e)?1:e)<0?0:e):[]}function en(t,e,n){var i=t?t.length:0;return i?Ft(t,0,(e=i-(+(e=(n?Ye(t,e,n):null==e)?1:e)||0))<0?0:e):[]}var nn=ce(),rn=ce(!0);function on(t){return t?t[0]:void 0}function an(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=n<0?N(i+n,0):n;else if(n){var r=$t(t,e);return r<i&&(e==e?e===t[r]:t[r]!=t[r])?r:-1}return ro(t,e,n||0)}var sn=ai(function(t){for(var e=t.length,n=e,i=M(void 0),r=Le(),o=r==ro,a=[];n--;){var s=t[n]=Oe(s=t[n])?s:[];i[n]=o&&120<=s.length?re(n&&s):null}var l=t[0],h=-1,u=l?l.length:0,c=i[0];t:for(;++h<u;)if(s=l[h],(c?J(c,s):r(a,s,0))<0){for(n=e;--n;){var p=i[n];if((p?J(p,s):r(t[n],s,0))<0)continue t}c&&c.push(s),a.push(s)}return a});function ln(t){var e=t?t.length:0;return e?t[e-1]:void 0}var hn=ai(function(t,e){var n=ut(t,e=kt(e));return Nt(t,e.sort(no)),n});function un(t){return tn(t,1)}var cn=Se(),pn=Se(!0),dn=ai(function(t){return Wt(kt(t,!1,!0))});function fn(t,e,n,i){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=Ye(t,e,i=n)?void 0:e,e=!1);var r=Pe();return null==n&&r===pt||(n=r(n,i,3)),(e&&Le()==ro?function(t,e){for(var n,i=-1,r=t.length,o=-1,a=[];++i<r;){var s=t[i],l=e?e(s,i,t):s;i&&n===l||(n=l,a[++o]=s)}return a}:Wt)(t,n)}function gn(t){if(!t||!t.length)return[];var e=-1,n=0;t=nt(t,function(t){if(Oe(t))return n=N(t.length,n),!0});for(var i=M(n);++e<n;)i[e]=it(t,Ot(e));return i}function mn(t,e,n){if(!t||!t.length)return[];t=gn(t);return null==e?t:(e=Kt(e,n,4),it(t,function(t){return ot(t,e,void 0,!0)}))}var yn=ai(function(t,e){return Oe(t)?yt(t,e):[]}),vn=ai(gn);function xn(t,e){var n=-1,i=t?t.length:0,r={};for(!i||e||hi(t[0])||(e=[]);++n<i;){var o=t[n];e?r[o]=e[n]:o&&(r[o[0]]=o[1])}return r}var _n=ai(function(t){var e=t.length,n=2<e?t[e-2]:void 0,i=1<e?t[e-1]:void 0;return 2<e&&"function"==typeof n?e-=2:(n=1<e&&"function"==typeof i?(--e,i):void 0,i=void 0),t.length=e,mn(t,n,i)});function bn(t){t=V(t);return t.__chain__=!0,t}function wn(t,e,n){return e.call(n,t)}var kn=ai(function(e){return e=kt(e),this.thru(function(t){return function(t,e){for(var n=-1,i=t.length,r=-1,o=e.length,a=M(i+o);++n<i;)a[n]=t[n];for(;++r<o;)a[n++]=e[r];return a}(hi(t)?t:[Ke(t)],e)})}),Sn=ai(function(t,e){return ut(t,kt(e))}),Mn=te(function(t,e,n){y.call(t,n)?++t[n]:t[n]=1});function Tn(t,e,n){return(hi(t)?et:_t)(t,e="function"!=typeof(e=n&&Ye(t,e,n)?void 0:e)||void 0!==n?Pe(e,n,3):e)}function An(t,e,n){return(hi(t)?nt:bt)(t,e=Pe(e,n,3))}var Pn=ue(vt),Dn=ue(xt,!0),Cn=fe(tt,vt),Ln=fe(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},xt),In=te(function(t,e,n){y.call(t,n)?t[n].push(e):t[n]=[e]});function En(t,e,n,i){var r=t?Ie(t):0;return Xe(r)||(r=(t=Xi(t)).length),n="number"!=typeof n||i&&Ye(e,n,i)?0:n<0?N(r+n,0):n||0,"string"==typeof t||!hi(t)&&vi(t)?n<=r&&-1<t.indexOf(e,n):!!r&&-1<Le(t,e,n)}var Rn=te(function(t,e,n){t[n]=e}),Hn=ai(function(t,n,i){var r=-1,o="function"==typeof n,a=ze(n),s=Oe(t)?M(t.length):[];return vt(t,function(t){var e=o?n:a&&null!=t?t[n]:void 0;s[++r]=e?e.apply(t,i):He(t,n,i)}),s});function On(t,e,n){return(hi(t)?it:Et)(t,e=Pe(e,n,3))}var Nn=te(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Yn=_e(ot,vt),zn=_e(function(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n},xt);function Fn(t,e,n){if(n?Ye(t,e,n):null==e)return 0<(i=(t=qe(t)).length)?t[Yt(0,i-1)]:void 0;var i,r=-1,o=bi(t),a=(i=o.length)-1;for(e=Y(!(e<0)&&+e||0,i);++r<e;){var s=Yt(r,a),l=o[s];o[s]=o[r],o[r]=l}return o.length=e,o}function Xn(t,e,n){return(hi(t)?at:Xt)(t,e="function"!=typeof(e=n&&Ye(t,e,n)?void 0:e)||void 0!==n?Pe(e,n,3):e)}var Bn=ai(function(t,e){if(null==t)return[];var n=e[2];return n&&Ye(e[0],e[1],n)&&(e.length=1),Ut(t,kt(e),[])}),Un=z||function(){return(new n).getTime()};function Wn(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new v(or);var i=t;t=e,e=i}return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var Gn=ai(function(t,e,n){var i,r=1;return n.length&&(i=yo(n,Gn.placeholder),r|=32),Me(t,r,e,n,i)}),Vn=ai(function(t,e){for(var n=-1,i=(e=e.length?kt(e):Ei(t)).length;++n<i;){var r=e[n];t[r]=Me(t[r],1,t)}return t}),jn=ai(function(t,e,n){var i,r=3;return n.length&&(i=yo(n,jn.placeholder),r|=32),Me(e,r,t,n,i)}),$n=se(8),qn=se(16);function Kn(i,r,t){var o,a,s,l,h,u,c,p,d=0,f=!1,g=!0;if("function"!=typeof i)throw new v(or);function e(t,e){e&&b(e),a=u=c=void 0,t&&(d=Un(),s=i.apply(h,o),u||a||(o=h=void 0))}function m(){var t=r-(Un()-l);t<=0||r<t?e(c,a):u=A(m,t)}function y(){e(g,u)}function n(){var t,e,n;return o=arguments,l=Un(),h=this,c=g&&(u||!p),!1===f?t=p&&!u:(n=(e=f-(l-(d=!a&&!p?l:d)))<=0||f<e)?(a=a&&b(a),d=l,s=i.apply(h,o)):a=a||A(y,e),n&&u?u=b(u):u||r===f||(u=A(m,r)),t&&(n=!0,s=i.apply(h,o)),!n||u||a||(o=h=void 0),s}return r=!(r<0)&&+r||0,!0===t?g=!(p=!0):di(t)&&(p=!!t.leading,f="maxWait"in t&&N(+t.maxWait||0,r),g="trailing"in t?!!t.trailing:g),n.cancel=function(){u&&b(u),a&&b(a),a=u=c=void(d=0)},n}var Zn=ai(function(t,e){return mt(t,1,e)}),Jn=ai(mt),Qn=de(),ti=de(!0);function ei(i,r){if("function"!=typeof i||r&&"function"!=typeof r)throw new v(or);function o(){var t=arguments,e=r?r.apply(this,t):t[0],n=o.cache;return n.has(e)?n.get(e):(t=i.apply(this,t),o.cache=n.set(e,t),t)}return o.cache=new ei.Cache,o}var ni=ai(function(n,i){if(i=kt(i),"function"!=typeof n||!et(i,oo))throw new v(or);var r=i.length;return ai(function(t){for(var e=Y(t.length,r);e--;)t[e]=i[e](t[e]);return n.apply(this,t)})}),ii=xe(32),ri=xe(64),oi=ai(function(t,e){return Me(t,256,void 0,void 0,void 0,kt(e))});function ai(o,a){if("function"!=typeof o)throw new v(or);return a=N(void 0===a?o.length-1:+a||0,0),function(){for(var t=arguments,e=-1,n=N(t.length-a,0),i=M(n);++e<n;)i[e]=t[a+e];switch(a){case 0:return o.call(this,i);case 1:return o.call(this,t[0],i);case 2:return o.call(this,t[0],t[1],i)}for(var r=M(a+1),e=-1;++e<a;)r[e]=t[e];return r[a]=i,o.apply(this,r)}}function si(t,e){return e<t}function li(t){return mo(t)&&Oe(t)&&y.call(t,"callee")&&!S.call(t,"callee")}var hi=R||function(t){return mo(t)&&Xe(t.length)&&g.call(t)==lr};function ui(t,e,n,i){i=(n="function"==typeof n?Kt(n,i,3):void 0)?n(t,e):void 0;return void 0===i?Lt(t,e,n):!!i}function ci(t){return mo(t)&&"string"==typeof t.message&&g.call(t)==cr}function pi(t){return di(t)&&g.call(t)==pr}function di(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function fi(t){return null!=t&&(pi(t)?x.test(u.call(t)):mo(t)&&Gr.test(t))}function gi(t){return"number"==typeof t||mo(t)&&g.call(t)==dr}function mi(t){var e,n;return!(!mo(t)||g.call(t)!=fr||li(t)||!(y.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(Tt(t,function(t,e){n=e}),void 0===n||y.call(t,n))}function yi(t){return di(t)&&g.call(t)==gr}function vi(t){return"string"==typeof t||mo(t)&&g.call(t)==mr}function xi(t){return mo(t)&&Xe(t.length)&&!!Qr[g.call(t)]}function _i(t,e){return t<e}function bi(t){var e=t?Ie(t):0;return Xe(e)?e?Q(t):[]:Xi(t)}function wi(t){return ct(t,Hi(t))}var ki=ee(function o(a,s,l,h,u){if(!di(a))return a;var c=Oe(s)&&(hi(s)||xi(s)),p=c?void 0:Ri(s);return tt(p||s,function(t,e){var n,i,r;mo(t=p?s[e=t]:t)?function(t,e,n,i,r,o,a){for(var s=o.length,l=e[n];s--;)if(o[s]==l)return t[n]=a[s];var h=t[n],u=r?r(h,l,n,t,e):void 0,e=void 0===u;e&&(Oe(u=l)&&(hi(l)||xi(l))?u=hi(h)?h:Oe(h)?Q(h):[]:mi(l)||li(l)?u=li(h)?wi(h):mi(h)?h:{}:e=!1),o.push(l),a.push(u),e?t[n]=i(u,l,r,o,a):(u==u?u!==h:h==h)&&(t[n]=u)}(a,s,e,o,l,h=h||[],u=u||[]):(n=a[e],void 0===(i=(r=void 0===(i=l?l(n,t,e,a,s):void 0))?t:i)&&(!c||e in a)||!r&&(i==i?i===n:n!=n)||(a[e]=i))}),a}),Si=ee(function(t,e,n){return n?lt(t,e,n):ht(t,e)}),Mi=le(Si,function(t,e){return void 0===t?e:t}),Ti=le(ki,function t(e,n){return void 0===e?n:ki(e,n,t)}),Ai=pe(At),Pi=pe(Pt),Di=ge(St),Ci=ge(Mt),Li=me(At),Ii=me(Pt);function Ei(t){return Dt(t,Hi(t))}var Ri=O?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Oe(t)?$e(t):di(t)?O(t):[]}:$e;function Hi(t){if(null==t)return[];for(var e,n=(n=(t=!di(t)?d(t):t).length)&&Xe(n)&&(hi(t)||li(t))&&n||0,i=t.constructor,r=-1,o="function"==typeof i&&i.prototype===t,a=M(n),s=0<n;++r<n;)a[r]=r+"";for(e in t)s&&Ne(e,n)||"constructor"==e&&(o||!y.call(t,e))||a.push(e);return a}var Oi=ye(!0),Ni=ye(),Yi=ai(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=it(kt(e),a),Ue(t,yt(Hi(t),e));var i=Kt(e[0],e[1],3);return We(t,function(t,e,n){return!i(t,e,n)})});function zi(t){t=Ke(t);for(var e=-1,n=Ri(t),i=n.length,r=M(i);++e<i;){var o=n[e];r[e]=[o,t[o]]}return r}var Fi=ai(function(t,e){return null==t?{}:"function"==typeof e[0]?We(t,Kt(e[0],e[1],3)):Ue(t,kt(e))});function Xi(t){return Gt(t,Ri(t))}var Bi=oe(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function Ui(t){return(t=ao(t))&&t.replace(jr,uo).replace(Fr,"")}var Wi=oe(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Gi=ve(),Vi=ve(!0);function ji(t,e){var n="";if(t=ao(t),(e=+e)<1||!t||!H(e))return n;for(;e%2&&(n+=t),t+=t,e=E(e/2););return n}var $i=oe(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),l=oe(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function qi(t,e,n){var i=t;return(t=ao(t))?(n?Ye(i,e,n):null==e)?t.slice(vo(t),xo(t)+1):t.slice(so(t,e+=""),lo(t,e)+1):t}function Ki(t,e,n){return n&&Ye(t,e,n)&&(e=void 0),(t=ao(t)).match(e||Kr)||[]}var Zi=ai(function(t,e){try{return t.apply(void 0,e)}catch(t){return ci(t)?t:new i(t)}});function Ji(t,e,n){return n&&Ye(t,e,n)&&(e=void 0),mo(t)?tr(t):pt(t,e)}function Qi(t){return t}function tr(t){return Rt(dt(t,!0))}e=ai(function(e,n){return function(t){return He(t,e,n)}}),o=ai(function(e,n){return function(t){return He(e,t,n)}});function er(i,t,e){var n,r;null==e&&(((o=(r=(n=di(t))?Ri(t):void 0)&&r.length?Dt(t,r):void 0)?o.length:n)||(o=!1,e=t,t=i,i=this));var o=o||Dt(t,Ri(t)),a=!0,s=-1,l=pi(i),h=o.length;!1===e?a=!1:di(e)&&"chain"in e&&(a=e.chain);for(;++s<h;){var u=o[s],c=t[u];i[u]=c,l&&(i.prototype[u]=function(n){return function(){var t=this.__chain__;if(a||t){var e=i(this.__wrapped__);return(e.__actions__=Q(this.__actions__)).push({func:n,args:arguments,thisArg:i}),e.__chain__=t,e}return n.apply(i,rt([this.value()],arguments))}}(c))}return i}function nr(){}function ir(t){return ze(t)?Ot(t):(n=t+"",e=Ze(t),function(t){return Ct(t,e,n)});var e,n}var rr,C=ke("ceil"),xt=ke("floor"),z=he(si,B),R=he(_i,U),B=ke("round");return V.prototype=j.prototype,($.prototype=ft(j.prototype)).constructor=$,(q.prototype=ft(j.prototype)).constructor=q,K.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},K.prototype.get=function(t){return"__proto__"==t?void 0:this.__data__[t]},K.prototype.has=function(t){return"__proto__"!=t&&y.call(this.__data__,t)},K.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},Z.prototype.push=function(t){var e=this.data;"string"==typeof t||di(t)?e.set.add(t):e.hash[t]=!0},ei.Cache=K,V.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new v(or);var n=t;t=e,e=n}return t=H(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}},V.ary=function(t,e,n){return n&&Ye(t,e,n)&&(e=void 0),Me(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:N(+e||0,0))},V.assign=Si,V.at=Sn,V.before=Wn,V.bind=Gn,V.bindAll=Vn,V.bindKey=jn,V.callback=Ji,V.chain=bn,V.chunk=function(t,e,n){e=(n?Ye(t,e,n):null==e)?1:N(E(e)||1,1);for(var i=0,r=t?t.length:0,o=-1,a=M(L(r/e));i<r;)a[++o]=Ft(t,i,i+=e);return a},V.compact=function(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var o=t[e];o&&(r[++i]=o)}return r},V.constant=function(t){return function(){return t}},V.countBy=Mn,V.create=function(t,e,n){var i=ft(t);return(e=n&&Ye(t,e,n)?void 0:e)?ht(i,e):i},V.curry=$n,V.curryRight=qn,V.debounce=Kn,V.defaults=Mi,V.defaultsDeep=Ti,V.defer=Zn,V.delay=Jn,V.difference=Qe,V.drop=tn,V.dropRight=en,V.dropRightWhile=function(t,e,n){return t&&t.length?Vt(t,Pe(e,n,3),!0,!0):[]},V.dropWhile=function(t,e,n){return t&&t.length?Vt(t,Pe(e,n,3),!0):[]},V.fill=function(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Ye(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((i=void 0===i||r<i?r:+i||0)<0&&(i+=r),r=i<(n=(n=null!=n&&+n||0)<0?r<-n?0:r+n:n)?0:i>>>0,n>>>=0;n<r;)t[n++]=e;return t}(t,e,n,i)):[]},V.filter=An,V.flatten=function(t,e,n){var i=t?t.length:0;return n&&Ye(t,e,n)&&(e=!1),i?kt(t,e):[]},V.flattenDeep=function(t){return t&&t.length?kt(t,!0):[]},V.flow=Qn,V.flowRight=ti,V.forEach=Cn,V.forEachRight=Ln,V.forIn=Di,V.forInRight=Ci,V.forOwn=Li,V.forOwnRight=Ii,V.functions=Ei,V.groupBy=In,V.indexBy=Rn,V.initial=function(t){return en(t,1)},V.intersection=sn,V.invert=function(t,e,n){n&&Ye(t,e,n)&&(e=void 0);for(var i=-1,r=Ri(t),o=r.length,a={};++i<o;){var s=r[i],l=t[s];e?y.call(a,l)?a[l].push(s):a[l]=[s]:a[l]=s}return a},V.invoke=Hn,V.keys=Ri,V.keysIn=Hi,V.map=On,V.mapKeys=Oi,V.mapValues=Ni,V.matches=tr,V.matchesProperty=function(t,e){return Ht(t,dt(e,!0))},V.memoize=ei,V.merge=ki,V.method=e,V.methodOf=o,V.mixin=er,V.modArgs=ni,V.negate=function(t){if("function"!=typeof t)throw new v(or);return function(){return!t.apply(this,arguments)}},V.omit=Yi,V.once=function(t){return Wn(2,t)},V.pairs=zi,V.partial=ii,V.partialRight=ri,V.partition=Nn,V.pick=Fi,V.pluck=function(t,e){return On(t,ir(e))},V.property=ir,V.propertyOf=function(e){return function(t){return Ct(e,Ze(t),t+"")}},V.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=Le(),r=t.length;++n<r;)for(var o=0,a=t[n];-1<(o=i(e,a,o));)P.call(e,o,1);return e},V.pullAt=hn,V.range=function(t,e,n){n&&Ye(t,e,n)&&(e=n=void 0),t=+t||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,r=N(L((e-t)/((n=null==n?1:+n||0)||1)),0),o=M(r);++i<r;)o[i]=t,t+=n;return o},V.rearg=oi,V.reject=function(t,i,e){var n=hi(t)?nt:bt;return i=Pe(i,e,3),n(t,function(t,e,n){return!i(t,e,n)})},V.remove=function(t,e,n){var i=[];if(!t||!t.length)return i;var r=-1,o=[],a=t.length;for(e=Pe(e,n,3);++r<a;){var s=t[r];e(s,r,t)&&(i.push(s),o.push(r))}return Nt(t,o),i},V.rest=un,V.restParam=ai,V.set=function(t,e,n){if(null==t)return t;for(var i=e+"",r=-1,o=(e=null!=t[i]||ze(e,t)?[i]:Ze(e)).length,a=o-1,s=t;null!=s&&++r<o;){var l=e[r];di(s)&&(r==a?s[l]=n:null==s[l]&&(s[l]=Ne(e[r+1])?[]:{})),s=s[l]}return t},V.shuffle=function(t){return Fn(t,U)},V.slice=function(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Ye(t,e,n)&&(e=0,n=i),Ft(t,e,n)):[]},V.sortBy=function(t,i,e){if(null==t)return[];e&&Ye(t,i,e)&&(i=void 0);var r=-1;return i=Pe(i,e,3),Bt(Et(t,function(t,e,n){return{criteria:i(t,e,n),index:++r,value:t}}),ho)},V.sortByAll=Bn,V.sortByOrder=function(t,e,n,i){return null==t?[]:(i&&Ye(e,n,i)&&(n=void 0),Ut(t,e=!hi(e)?null==e?[]:[e]:e,n=!hi(n)?null==n?[]:[n]:n))},V.spread=function(e){if("function"!=typeof e)throw new v(or);return function(t){return e.apply(this,t)}},V.take=function(t,e,n){return t&&t.length?Ft(t,0,(e=(n?Ye(t,e,n):null==e)?1:e)<0?0:e):[]},V.takeRight=function(t,e,n){var i=t?t.length:0;return i?Ft(t,(e=i-(+(e=(n?Ye(t,e,n):null==e)?1:e)||0))<0?0:e):[]},V.takeRightWhile=function(t,e,n){return t&&t.length?Vt(t,Pe(e,n,3),!1,!0):[]},V.takeWhile=function(t,e,n){return t&&t.length?Vt(t,Pe(e,n,3)):[]},V.tap=function(t,e,n){return e.call(n,t),t},V.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new v(or);return!1===n?i=!1:di(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Kn(t,e,{leading:i,maxWait:+e,trailing:r})},V.thru=wn,V.times=function(t,e,n){if((t=E(t))<1||!H(t))return[];var i=-1,r=M(Y(t,4294967295));for(e=Kt(e,n,1);++i<t;)i<4294967295?r[i]=e(i):e(i);return r},V.toArray=bi,V.toPlainObject=wi,V.transform=function(t,i,r,e){var n=hi(t)||xi(t);return i=Pe(i,e,4),null==r&&(r=n||di(t)?(e=t.constructor,n?hi(t)?new e:[]:ft(pi(e)?e.prototype:void 0)):{}),(n?tt:At)(t,function(t,e,n){return i(r,t,e,n)}),r},V.union=dn,V.uniq=fn,V.unzip=gn,V.unzipWith=mn,V.values=Xi,V.valuesIn=function(t){return Gt(t,Hi(t))},V.where=function(t,e){return An(t,Rt(e))},V.without=yn,V.wrap=function(t,e){return Me(e=null==e?Qi:e,32,void 0,[t],[])},V.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n,i=arguments[t];Oe(i)&&(n=n?rt(yt(n,i),yt(i,n)):i)}return n?Wt(n):[]},V.zip=vn,V.zipObject=xn,V.zipWith=_n,V.backflow=ti,V.collect=On,V.compose=ti,V.each=Cn,V.eachRight=Ln,V.extend=Si,V.iteratee=Ji,V.methods=Ei,V.object=xn,V.select=An,V.tail=un,V.unique=fn,er(V,V),V.add=function(t,e){return(+t||0)+(+e||0)},V.attempt=Zi,V.camelCase=Bi,V.capitalize=function(t){return(t=ao(t))&&t.charAt(0).toUpperCase()+t.slice(1)},V.ceil=C,V.clone=function(t,e,n,i){return e&&"boolean"!=typeof e&&Ye(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?dt(t,e,Kt(n,i,1)):dt(t,e)},V.cloneDeep=function(t,e,n){return"function"==typeof e?dt(t,!0,Kt(e,n,1)):dt(t,!0)},V.deburr=Ui,V.endsWith=function(t,e,n){e+="";var i=(t=ao(t)).length;return n=void 0===n?i:Y(!(n<0)&&+n||0,i),0<=(n-=e.length)&&t.indexOf(e,n)==n},V.escape=function(t){return(t=ao(t))&&Lr.test(t)?t.replace(Dr,co):t},V.escapeRegExp=function(t){return(t=ao(t))&&zr.test(t)?t.replace(Yr,po):t||"(?:)"},V.every=Tn,V.find=Pn,V.findIndex=nn,V.findKey=Ai,V.findLast=Dn,V.findLastIndex=rn,V.findLastKey=Pi,V.findWhere=function(t,e){return Pn(t,Rt(e))},V.first=on,V.floor=xt,V.get=function(t,e,n){e=null==t?void 0:Ct(t,Ze(e),e+"");return void 0===e?n:e},V.gt=si,V.gte=function(t,e){return e<=t},V.has=function(t,e){if(null==t)return!1;var n=y.call(t,e);if(!n&&!ze(e)){if(null==(t=1==(e=Ze(e)).length?t:Ct(t,Ft(e,0,-1))))return!1;e=ln(e),n=y.call(t,e)}return n||Xe(t.length)&&Ne(e,t.length)&&(hi(t)||li(t))},V.identity=Qi,V.includes=En,V.indexOf=an,V.inRange=function(t,e,n){return e=+e||0,void 0===n?(n=e,e=0):n=+n||0,t>=Y(e,n)&&t<N(e,n)},V.isArguments=li,V.isArray=hi,V.isBoolean=function(t){return!0===t||!1===t||mo(t)&&g.call(t)==hr},V.isDate=function(t){return mo(t)&&g.call(t)==ur},V.isElement=function(t){return!!t&&1===t.nodeType&&mo(t)&&!mi(t)},V.isEmpty=function(t){return null==t||(Oe(t)&&(hi(t)||vi(t)||li(t)||mo(t)&&pi(t.splice))?!t.length:!Ri(t).length)},V.isEqual=ui,V.isError=ci,V.isFinite=function(t){return"number"==typeof t&&H(t)},V.isFunction=pi,V.isMatch=function(t,e,n,i){return n="function"==typeof n?Kt(n,i,3):void 0,It(t,Ee(e),n)},V.isNaN=function(t){return gi(t)&&t!=+t},V.isNative=fi,V.isNull=function(t){return null===t},V.isNumber=gi,V.isObject=di,V.isPlainObject=mi,V.isRegExp=yi,V.isString=vi,V.isTypedArray=xi,V.isUndefined=function(t){return void 0===t},V.kebabCase=Wi,V.last=ln,V.lastIndexOf=function(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(n<0?N(i+n,0):Y(n||0,i-1))+1;else if(n){n=t[r=$t(t,e,!0)-1];return(e==e?e===n:n!=n)?r:-1}if(e!=e)return go(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1},V.lt=_i,V.lte=function(t,e){return t<=e},V.max=z,V.min=R,V.noConflict=function(){return eo._=m,this},V.noop=nr,V.now=Un,V.pad=function(t,e,n){var i=(t=ao(t)).length;if((e=+e)<=i||!H(e))return t;e=(e-i)/2,i=E(e);return(n=we("",L(e),n)).slice(0,i)+t+n},V.padLeft=Gi,V.padRight=Vi,V.parseInt=function(t,e,n){return e=(n?Ye(t,e,n):null==e)?0:e&&+e,t=qi(t),F(t,e||(Wr.test(t)?16:10))},V.random=function(t,e,n){var i=null==t,r=null==(e=n&&Ye(t,e,n)?n=void 0:e);if(null==n&&(r&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,r=!0)),t=+t||0,(r=i&&r?!(e=1):r)?(e=t,t=0):e=+e||0,n||t%1||e%1){n=X();return Y(t+n*(e-t+w("1e-"+((n+"").length-1))),e)}return Yt(t,e)},V.reduce=Yn,V.reduceRight=zn,V.repeat=ji,V.result=function(t,e,n){var i=null==t?void 0:t[e];return pi(i=void 0===i?void 0===(i=null!=t&&!ze(e,t)?null==(t=1==(e=Ze(e)).length?t:Ct(t,Ft(e,0,-1)))?void 0:t[ln(e)]:i)?n:i:i)?i.call(t):i},V.round=B,V.runInContext=t,V.size=function(t){var e=t?Ie(t):0;return Xe(e)?e:Ri(t).length},V.snakeCase=$i,V.some=Xn,V.sortedIndex=cn,V.sortedLastIndex=pn,V.startCase=l,V.startsWith=function(t,e,n){return t=ao(t),n=null==n?0:Y(!(n<0)&&+n||0,t.length),t.lastIndexOf(e,n)==n},V.sum=function(t,e,n){return 1==(e=Pe(e=n&&Ye(t,e,n)?void 0:e,n,3)).length?function(t,e){for(var n=t.length,i=0;n--;)i+=+e(t[n])||0;return i}(hi(t)?t:qe(t),e):(i=e,r=0,vt(t,function(t,e,n){r+=+i(t,e,n)||0}),r);var i,r},V.template=function(a,t,e){var n=V.templateSettings;e&&Ye(a,t,e)&&(t=e=void 0),a=ao(a),t=lt(ht({},e||t),n,st);var s,l,n=lt(ht({},t.imports),n.imports,st),i=Ri(n),r=Gt(n,i),h=0,n=t.interpolate||$r,u="__p += '",n=p((t.escape||$r).source+"|"+n.source+"|"+(n===Rr?Br:$r).source+"|"+(t.evaluate||$r).source+"|$","g"),o="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Jr+"]")+"\n";a.replace(n,function(t,e,n,i,r,o){return n=n||i,u+=a.slice(h,o).replace(qr,fo),e&&(s=!0,u+="' +\n__e("+e+") +\n'"),r&&(l=!0,u+="';\n"+r+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),u+="';\n";t=t.variable;t||(u="with (obj) {\n"+u+"\n}\n"),u=(l?u.replace(Mr,""):u).replace(Tr,"$1").replace(Ar,"$1;");u="function("+(t||"obj")+") {\n"+(t?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}",t=Zi(function(){return c(i,o+"return "+u).apply(void 0,r)});if(t.source=u,ci(t))throw t;return t},V.trim=qi,V.trimLeft=function(t,e,n){var i=t;return(t=ao(t))?(n?Ye(i,e,n):null==e)?t.slice(vo(t)):t.slice(so(t,e+"")):t},V.trimRight=function(t,e,n){var i=t;return(t=ao(t))?(n?Ye(i,e,n):null==e)?t.slice(0,xo(t)+1):t.slice(0,lo(t,e+"")+1):t},V.trunc=function(t,e,n){var i,r=30,o="...";if(null!=(e=n&&Ye(t,e,n)?void 0:e)&&(di(e)?(i="separator"in e?e.separator:i,r="length"in e?+e.length||0:r,o="omission"in e?ao(e.omission):o):r=+e||0),r>=(t=ao(t)).length)return t;e=r-o.length;if(e<1)return o;r=t.slice(0,e);if(null==i)return r+o;if(yi(i)){if(t.slice(e).search(i)){var a,s,l=t.slice(0,e);for((i=!i.global?p(i.source,(Ur.exec(i)||"")+"g"):i).lastIndex=0;a=i.exec(l);)s=a.index;r=r.slice(0,null==s?e:s)}}else t.indexOf(i,e)==e||-1<(e=r.lastIndexOf(i))&&(r=r.slice(0,e));return r+o},V.unescape=function(t){return(t=ao(t))&&Cr.test(t)?t.replace(Pr,_o):t},V.uniqueId=function(t){var e=++f;return ao(t)+e},V.words=Ki,V.all=Tn,V.any=Xn,V.contains=En,V.eq=ui,V.detect=Pn,V.foldl=Yn,V.foldr=zn,V.head=on,V.include=En,V.inject=Yn,er(V,(rr={},At(V,function(t,e){V.prototype[e]||(rr[e]=t)}),rr),!1),V.sample=Fn,V.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Fn(t,e)}):Fn(this.value())},V.VERSION="3.10.1",tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){V[t].placeholder=V}),tt(["drop","take"],function(i,r){q.prototype[i]=function(t){var e=this.__filtered__;if(e&&!r)return new q(this);t=null==t?1:N(E(t)||0,0);var n=this.clone();return e?n.__takeCount__=Y(n.__takeCount__,t):n.__views__.push({size:t,type:i+(n.__dir__<0?"Right":"")}),n},q.prototype[i+"Right"]=function(t){return this.reverse()[i](t).reverse()}}),tt(["filter","map","takeWhile"],function(t,e){var i=e+1,r=2!=i;q.prototype[t]=function(t,e){var n=this.clone();return n.__iteratees__.push({iteratee:Pe(t,e,1),type:i}),n.__filtered__=n.__filtered__||r,n}}),tt(["first","last"],function(t,e){var n="take"+(e?"Right":"");q.prototype[t]=function(){return this[n](1).value()[0]}}),tt(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");q.prototype[t]=function(){return this.__filtered__?new q(this):this[n](1)}}),tt(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?Rt:ir;q.prototype[t]=function(t){return this[n](i(t))}}),q.prototype.compact=function(){return this.filter(Qi)},q.prototype.reject=function(e,t){return e=Pe(e,t,1),this.filter(function(t){return!e(t)})},q.prototype.slice=function(t,e){t=null!=t&&+t||0;var n=this;return n.__filtered__&&(0<t||e<0)?new q(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),n=void 0!==e?(e=+e||0)<0?n.dropRight(-e):n.take(e-t):n)},q.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},q.prototype.toArray=function(){return this.take(U)},At(q.prototype,function(h,t){var u=/^(?:filter|map|reject)|While$/.test(t),c=/^(?:first|last)$/.test(t),p=V[c?"take"+("last"==t?"Right":""):t];p&&(V.prototype[t]=function(){function t(t){return c&&n?p(t,1)[0]:p.apply(void 0,rt([t],e))}var e=c?[1]:arguments,n=this.__chain__,i=this.__wrapped__,r=!!this.__actions__.length,o=i instanceof q,a=e[0],s=o||hi(i),l={func:wn,args:[t],thisArg:void 0},r=(o=s&&u&&"function"==typeof a&&1!=a.length?s=!1:o)&&!r;if(c&&!n)return r?((i=i.clone()).__actions__.push(l),h.call(i)):p.call(void 0,this.value())[0];if(c||!s)return this.thru(t);i=r?i:new q(this),i=h.apply(i,e);return i.__actions__.push(l),new $(i,n)})}),tt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?h:s)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);V.prototype[t]=function(){var e=arguments;return r&&!this.__chain__?n.apply(this.value(),e):this[i](function(t){return n.apply(t,e)})}}),At(q.prototype,function(t,e){var n,i=V[e];i&&(n=i.name,(G[n]||(G[n]=[])).push({name:e,func:i}))}),G[be(void 0,2).name]=[{name:"wrapper",func:void 0}],q.prototype.clone=function(){var t=new q(this.__wrapped__);return t.__actions__=Q(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Q(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Q(this.__views__),t},q.prototype.reverse=function(){var t;return this.__filtered__?((t=new q(this)).__dir__=-1,t.__filtered__=!0):(t=this.clone()).__dir__*=-1,t},q.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=hi(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Y(e,t+a);break;case"takeRight":t=N(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,o=o.end,s=o-a,l=i?o:a-1,h=this.__iteratees__,u=h.length,c=0,p=Y(s,this.__takeCount__);if(!n||r<200||r==s&&p==s)return jt(i&&n?t.reverse():t,this.__actions__);var d=[];t:for(;s--&&c<p;){for(var f=-1,g=t[l+=e];++f<u;){var m=h[f],y=m.iteratee,m=m.type,y=y(g);if(2==m)g=y;else if(!y){if(1==m)continue t;break t}}d[c++]=g}return d},V.prototype.chain=function(){return bn(this)},V.prototype.commit=function(){return new $(this.value(),this.__chain__)},V.prototype.concat=kn,V.prototype.plant=function(t){for(var e,n=this;n instanceof j;){var i=Je(n);e?r.__wrapped__=i:e=i;var r=i,n=n.__wrapped__}return r.__wrapped__=t,e},V.prototype.reverse=function(){function t(t){return n&&n.__dir__<0?t:t.reverse()}var e=this.__wrapped__;if(e instanceof q){var n=e;return(n=(n=this.__actions__.length?new q(this):n).reverse()).__actions__.push({func:wn,args:[t],thisArg:void 0}),new $(n,this.__chain__)}return this.thru(t)},V.prototype.toString=function(){return this.value()+""},V.prototype.run=V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=function(){return jt(this.__wrapped__,this.__actions__)},V.prototype.collect=V.prototype.map,V.prototype.head=V.prototype.first,V.prototype.select=V.prototype.filter,V.prototype.tail=V.prototype.rest,V}();eo._=bo,void 0===(p=function(){return bo}.call(d,f,d,u))||(u.exports=p)}.call(this)}.call(this,f("YuTi")(t),f("yLpj"))},bljh:function(Os,Ns,Ys){var zs;!function(){var E={version:"3.5.6"},r=[].slice,p=function(t){return r.call(t)},R=this.document;function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function H(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(R)try{p(R.documentElement.childNodes)[0].nodeType}catch(t){p=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),R)try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var e=this.Element.prototype,n=e.setAttribute,i=e.setAttributeNS,o=this.CSSStyleDeclaration.prototype,a=o.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){i.call(this,t,e,n+"")},o.setProperty=function(t,e,n){a.call(this,t,e+"",n)}}function l(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function h(t){return null===t?NaN:+t}function u(t){return!isNaN(t)}function t(o){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;o(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<o(t[r],e)?i=r:n=1+r}return n}}}E.ascending=l,E.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},E.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},E.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},E.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=t[o])&&i<=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(i<n&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e.call(t,t[o],o))&&i<=i){n=r=i;break}for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(i<n&&(n=i),r<i&&(r=i))}return[n,r]},E.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)u(n=+t[o])&&(i+=n);else for(;++o<r;)u(n=+e.call(t,t[o],o))&&(i+=n);return i},E.mean=function(t,e){var n,i=0,r=t.length,o=-1,a=r;if(1===arguments.length)for(;++o<r;)u(n=h(t[o]))?i+=n:--a;else for(;++o<r;)u(n=h(e.call(t,t[o],o)))?i+=n:--a;if(a)return i/a},E.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),e=+t[i-1],n=n-i;return n?e+n*(t[i]-e):e},E.median=function(t,e){var n,i=[],r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)u(n=h(t[o]))&&i.push(n);else for(;++o<r;)u(n=h(e.call(t,t[o],o)))&&i.push(n);if(i.length)return E.quantile(i.sort(l),.5)},E.variance=function(t,e){var n,i,r=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<r;)u(n=h(t[s]))&&(a+=(i=n-o)*(n-(o+=i/++l)));else for(;++s<r;)u(n=h(e.call(t,t[s],s)))&&(a+=(i=n-o)*(n-(o+=i/++l)));if(1<l)return a/(l-1)},E.deviation=function(){var t=E.variance.apply(this,arguments);return t&&Math.sqrt(t)};var c=t(l);function d(t){return t.length}E.bisectLeft=c.left,E.bisect=E.bisectRight=c.right,E.bisector=function(n){return t(1===n.length?function(t,e){return l(n(t),e)}:n)},E.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},E.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},E.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},E.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=E.min(arguments,d),n=new Array(e);++t<e;)for(var i,r=-1,o=n[t]=new Array(i);++r<i;)o[r]=arguments[r][t];return n},E.transpose=function(t){return E.zip.apply(E,t)},E.keys=function(t){var e,n=[];for(e in t)n.push(e);return n},E.values=function(t){var e,n=[];for(e in t)n.push(t[e]);return n},E.entries=function(t){var e,n=[];for(e in t)n.push({key:e,value:t[e]});return n},E.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--a]=i[e];return n};var L=Math.abs;function f(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function v(){this._=Object.create(null)}function g(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function m(t){return"\0"===(t+="")[0]?t.slice(1):t}function y(t){return g(t)in this._}function x(t){return(t=g(t))in this._&&delete this._[t]}function _(){var t,e=[];for(t in this._)e.push(m(t));return e}function b(){var t,e=0;for(t in this._)++e;return e}function w(){for(var t in this._)return!1;return!0}function k(){this._=Object.create(null)}function C(t){return t}function S(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=M.length;n<i;++n){var r=M[n]+e;if(r in t)return r}}E.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],o=function(t){for(var e=1;t*e%1;)e*=10;return e}(L(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(i=t+n*++a)>e;)r.push(i/o);else for(;(i=t+n*++a)<e;)r.push(i/o);return r},E.map=function(t,e){var n=new v;if(t instanceof v)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var a in t)n.set(a,t[a]);return n},f(v,{has:y,get:function(t){return this._[g(t)]},set:function(t,e){return this._[g(t)]=e},remove:x,keys:_,values:function(){var t,e=[];for(t in this._)e.push(this._[t]);return e},entries:function(){var t,e=[];for(t in this._)e.push({key:m(t),value:this._[t]});return e},size:b,empty:w,forEach:function(t){for(var e in this._)t.call(this,m(e),this._[e])}}),E.nest=function(){var c,p,d={},f=[],e=[];function g(n,t,i){if(i>=f.length)return p?p.call(d,t):c?t.sort(c):t;for(var e,r,o,a,s=-1,l=t.length,h=f[i++],u=new v;++s<l;)(a=u.get(e=h(r=t[s])))?a.push(r):u.set(e,[r]);return o=n?(r=n(),function(t,e){r.set(t,g(n,e,i))}):(r={},function(t,e){r[t]=g(n,e,i)}),u.forEach(o),r}return d.map=function(t,e){return g(e,t,0)},d.entries=function(t){return function n(t,i){if(i>=f.length)return t;var r=[],o=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}(g(E.map,t,0),0)},d.key=function(t){return f.push(t),d},d.sortKeys=function(t){return e[f.length-1]=t,d},d.sortValues=function(t){return c=t,d},d.rollup=function(t){return p=t,d},d},E.set=function(t){var e=new k;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},f(k,{has:y,add:function(t){return this._[g(t+="")]=!0,t},remove:x,values:_,size:b,empty:w,forEach:function(t){for(var e in this._)t.call(this,m(e))}}),E.behavior={},E.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=function(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}(t,e,e[n]);return t};var M=["webkit","ms","moz","Moz","o","O"];function T(){}function A(){}function P(r){var o=[],i=new v;function t(){for(var t,e=o,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}return t.on=function(t,e){var n=i.get(t);return arguments.length<2?n&&n.on:(n&&(n.on=null,o=o.slice(0,n=o.indexOf(n)).concat(o.slice(n+1)),i.remove(t)),e&&o.push(i.set(t,{on:e})),r)},t}function O(){E.event.preventDefault()}function D(){for(var t,e=E.event;t=e.sourceEvent;)e=t;return e}function N(r){for(var o=new A,t=0,e=arguments.length;++t<e;)o[arguments[t]]=P(o);return o.of=function(n,i){return function(t){try{var e=t.sourceEvent=E.event;t.target=r,E.event=t,o[t.type].apply(n,i)}finally{E.event=e}}},o}E.dispatch=function(){for(var t=new A,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=P(t);return t},A.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},E.event=null,E.requote=function(t){return t.replace(I,"\\$&")};var I=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Y={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function z(t){return Y(t,U),t}var F=function(t,e){return e.querySelector(t)},X=function(t,e){return e.querySelectorAll(t)},B=function(t,e){var n=t.matches||t[S(t,"matchesSelector")];return(B=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(F=function(t,e){return Sizzle(t,e)[0]||null},B=(X=Sizzle).matchesSelector),E.selection=function(){return E.select(R.documentElement)};var U=E.selection.prototype=[];function W(t){return"function"==typeof t?t:function(){return F(t,this)}}function G(t){return"function"==typeof t?t:function(){return X(t,this)}}U.select=function(t){var e,n,i,r,o=[];t=W(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,h=i.length;++l<h;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return z(o)},U.selectAll=function(t){var e,n,i=[];t=G(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(e=p(t.call(n,n.__data__,s,r))),e.parentNode=n);return z(i)};var V={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j(e,n){return e=E.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function $(t){return t.trim().replace(/\s+/g," ")}function q(t){return new RegExp("(?:^|\\s+)"+E.requote(t)+"(?:\\s+|$)","g")}function K(t){return(t+"").trim().split(/^|\s+/)}function Z(n,i){var r=(n=K(n).map(J)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function J(i){var r=q(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",$(n+" "+i))):t.setAttribute("class",$(n.replace(r," ")))}}function Q(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function tt(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function et(n){return"function"==typeof n?n:(n=E.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}}function nt(){var t=this.parentNode;t&&t.removeChild(this)}function it(t){return{__data__:t}}function rt(t){return function(){return B(this,t)}}function ot(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,o=t[n],a=0,s=o.length;a<s;a++)(r=o[a])&&e(r,a,n);return t}function at(t){return Y(t,st),t}E.ns={prefix:V,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.slice(0,e),t=t.slice(e+1)),V.hasOwnProperty(n)?{space:V[n],local:t}:t}},U.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=E.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(j(e,t[e]));return this}return this.each(j(t,e))},U.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=K(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!q(t[r]).test(e))return!1;return!0}for(e in t)this.each(Z(e,t[e]));return this}return this.each(Z(t,e))},U.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(Q(n,t[n],e));return this}if(i<2){i=this.node();return H(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(Q(t,e,n))},U.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(tt(e,t[e]));return this}return this.each(tt(t,e))},U.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},U.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},U.append=function(t){return t=et(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},U.insert=function(t,e){return t=et(t),e=W(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},U.remove=function(){return this.each(nt)},U.data=function(t,f){var e,n,i=-1,r=this.length;if(!arguments.length){for(t=new Array(r=(e=this[0]).length);++i<r;)(n=e[i])&&(t[i]=n.__data__);return t}function o(t,e){var n,i,r=t.length,o=e.length,a=Math.min(r,o),s=new Array(o),l=new Array(o),h=new Array(r);if(f){for(var u,c=new v,p=new Array(r),d=-1;++d<r;)c.has(u=f.call(n=t[d],n.__data__,d))?h[d]=n:c.set(u,n),p[d]=u;for(d=-1;++d<o;)(n=c.get(u=f.call(e,i=e[d],d)))?!0!==n&&((s[d]=n).__data__=i):l[d]=it(i),c.set(u,!0);for(d=-1;++d<r;)!0!==c.get(p[d])&&(h[d]=t[d])}else{for(d=-1;++d<a;)n=t[d],i=e[d],n?(n.__data__=i,s[d]=n):l[d]=it(i);for(;d<o;++d)l[d]=it(e[d]);for(;d<r;++d)h[d]=t[d]}l.update=s,l.parentNode=s.parentNode=h.parentNode=t.parentNode,g.push(l),m.push(s),y.push(h)}var g=at([]),m=z([]),y=z([]);if("function"==typeof t)for(;++i<r;)o(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<r;)o(e=this[i],t);return m.enter=function(){return g},m.exit=function(){return y},m},U.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},U.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=rt(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return z(r)},U.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];0<=--r;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},U.sort=function(t){t=function(n){return arguments.length||(n=l),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},U.each=function(i){return ot(this,function(t,e,n){i.call(t,t.__data__,e,n)})},U.call=function(t){var e=p(arguments);return t.apply(e[0]=this,e),this},U.empty=function(){return!this.node()},U.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var o=n[i];if(o)return o}return null},U.size=function(){var t=0;return ot(this,function(){++t}),t};var st=[];function lt(r,e,n){var i="__on"+r,t=r.indexOf("."),o=ut;0<t&&(r=r.slice(0,t));var a=ht.get(r);function s(){var t=this[i];t&&(this.removeEventListener(r,t,t.$),delete this[i])}return a&&(r=a,o=ct),t?e?function(){var t=o(e,p(arguments));s.call(this),this.addEventListener(r,this[i]=t,t.$=n),t._=e}:s:e?T:function(){var t,e,n,i=new RegExp("^__on([^.]+)"+E.requote(r)+"$");for(e in this)(t=e.match(i))&&(n=this[e],this.removeEventListener(t[1],n,n.$),delete this[e])}}E.selection.enter=at,(E.selection.enter.prototype=st).append=U.append,st.empty=U.empty,st.node=U.node,st.call=U.call,st.size=U.size,st.select=function(t){for(var e,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var h=-1,u=r.length;++h<u;)(o=r[h])?(e.push(i[h]=n=t.call(r.parentNode,o.__data__,h,s)),n.__data__=o.__data__):e.push(null)}return z(a)},st.insert=function(t,e){return arguments.length<2&&(a=this,e=function(t,e,n){var i,r=a[n].update,o=r.length;for(n!=l&&(l=n,s=0),s<=e&&(s=e+1);!(i=r[s])&&++s<o;);return i}),U.insert.call(this,t,e);var a,s,l},E.select=function(t){var e;return"string"==typeof t?(e=[F(t,R)]).parentNode=R.documentElement:(e=[t]).parentNode=s(t),z([e])},E.selectAll=function(t){var e;return"string"==typeof t?(e=p(X(t,R))).parentNode=R.documentElement:(e=t).parentNode=null,z([e])},U.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(lt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(lt(t,e,n))};var ht=E.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ut(n,i){return function(t){var e=E.event;E.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{E.event=e}}}function ct(t,e){var n=ut(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}R&&ht.forEach(function(t){"on"+t in R&&ht.remove(t)});var pt,dt=0;function ft(t){var n,i,r=".dragsuppress-"+ ++dt,o="click"+r,a=E.select(H(t)).on("touchmove"+r,O).on("dragstart"+r,O).on("selectstart"+r,O);return(pt=null==pt?!("onselectstart"in t)&&S(t.style,"userSelect"):pt)&&(n=s(t).style,i=n[pt],n[pt]="none"),function(t){var e;a.on(r,null),pt&&(n[pt]=i),t&&(e=function(){a.on(o,null)},a.on(o,function(){O(),e()},!0),setTimeout(e,0))}}E.mouse=function(t){return mt(t,D())};var gt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function mt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i,r=n.createSVGPoint();return gt<0&&(((i=H(t)).scrollX||i.scrollY)&&(i=(n=E.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),gt=!(i.f||i.e),n.remove())),gt?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function yt(){return E.event.changedTouches[0].identifier}E.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=D().changedTouches),e)for(var i,r=0,o=e.length;r<o;++r)if((i=e[r]).identifier===n)return mt(t,i)},E.behavior.drag=function(){var g=N(n,"drag","dragstart","dragend"),m=null,t=i(T,E.mouse,H,"mousemove","mouseup"),e=i(yt,E.touch,C,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function i(u,c,p,d,f){return function(){var i,t=E.event.target,r=this.parentNode,o=g.of(this,arguments),a=0,s=u(),e=".drag"+(null==s?"":"-"+s),n=E.select(p(t)).on(d+e,function(){var t,e,n=c(r,s);n&&(t=n[0]-h[0],e=n[1]-h[1],a|=t|e,o({type:"drag",x:(h=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e}))}).on(f+e,function(){c(r,s)&&(n.on(d+e,null).on(f+e,null),l(a&&E.event.target===t),o({type:"dragend"}))}),l=ft(t),h=c(r,s);i=m?[(i=m.apply(this,arguments)).x-h[0],i.y-h[1]]:[0,0],o({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(m=t,n):m},E.rebind(n,g,"on")},E.touches=function(n,t){return(t=arguments.length<2?D().touches:t)?p(t).map(function(t){var e=mt(n,t);return e.identifier=t.identifier,e}):[]};var vt=1e-6,xt=Math.PI,_t=2*xt,bt=_t-vt,wt=xt/2,kt=xt/180,St=180/xt;function Mt(t){return 0<t?1:t<0?-1:0}function Tt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function At(t){return 1<t?0:t<-1?xt:Math.acos(t)}function Pt(t){return 1<t?wt:t<-1?-wt:Math.asin(t)}function Dt(t){return((t=Math.exp(t))+1/t)/2}function Ct(t){return(t=Math.sin(t/2))*t}var Lt=Math.SQRT2;E.interpolateZoom=function(t,e){var r=t[0],o=t[1],a=t[2],n=e[0],t=e[1],e=e[2],s=n-r,l=t-o,n=s*s+l*l,h=Math.sqrt(n),t=(e*e-a*a+4*n)/(2*a*2*h),n=(e*e-a*a-4*n)/(2*e*2*h),u=Math.log(Math.sqrt(t*t+1)-t),c=Math.log(Math.sqrt(n*n+1)-n)-u,p=(c||Math.log(e/a))/Lt;function i(t){var e=t*p;if(c){var n=Dt(u),i=a/(2*h)*(n*(i=Lt*e+u,((i=Math.exp(2*i))-1)/(i+1))-((i=Math.exp(u))-1/i)/2);return[r+i*s,o+i*l,a*n/Dt(Lt*e+u)]}return[r+t*s,o+t*l,a*Math.exp(Lt*e)]}return i.duration=1e3*p,i},E.behavior.zoom=function(){var e,s,n,i,v,r,o,a,l,x={x:0,y:0,k:1},h=[960,500],u=Rt,c=250,p=0,_="mousedown.zoom",d="mousemove.zoom",f="mouseup.zoom",b="touchstart.zoom",w=N(g,"zoomstart","zoom","zoomend");function g(t){t.on(_,C).on(Et+".zoom",y).on("dblclick.zoom",I).on(b,L)}function k(t){return[(t[0]-x.x)/x.k,(t[1]-x.y)/x.k]}function S(t){x.k=Math.max(u[0],Math.min(u[1],t))}function M(t,e){var n;e=[(n=e)[0]*x.k+x.x,n[1]*x.k+x.y],x.x+=t[0]-e[0],x.y+=t[1]-e[1]}function T(t,e,n,i){t.__chart__={x:x.x,y:x.y,k:x.k},S(Math.pow(2,i)),M(s=e,n),t=E.select(t),(t=0<c?t.transition().duration(c):t).call(g.event)}function m(){o&&o.domain(r.range().map(function(t){return(t-x.x)/x.k}).map(r.invert)),l&&l.domain(a.range().map(function(t){return(t-x.y)/x.k}).map(a.invert))}function A(t){p++||t({type:"zoomstart"})}function P(t){m(),t({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function D(t){--p||(t({type:"zoomend"}),s=null)}function C(){var t=this,e=E.event.target,n=w.of(t,arguments),i=0,r=E.select(H(t)).on(d,function(){i=1,M(E.mouse(t),o),P(n)}).on(f,function(){r.on(d,null).on(f,null),a(i&&E.event.target===e),D(n)}),o=k(E.mouse(t)),a=ft(t);ls.call(t),A(n)}function L(){var l,h=this,u=w.of(h,arguments),c={},p=0,r=".zoom-"+E.event.changedTouches[0].identifier,a="touchmove"+r,s="touchend"+r,d=[],o=E.select(h),f=ft(h);function g(){var t=E.touches(h);return l=x.k,t.forEach(function(t){t.identifier in c&&(c[t.identifier]=k(t))}),t}function t(){var t=E.event.target;E.select(t).on(a,m).on(s,y),d.push(t);for(var e=E.event.changedTouches,n=0,i=e.length;n<i;++n)c[e[n].identifier]=null;var r,o=g(),t=Date.now();1===o.length?(t-v<500&&(r=o[0],T(h,r,c[r.identifier],Math.floor(Math.log(x.k)/Math.LN2)+1),O()),v=t):1<o.length&&(r=o[0],t=o[1],o=r[0]-t[0],t=r[1]-t[1],p=o*o+t*t)}function m(){var t,e,n=E.touches(h);ls.call(h);for(var i,r,o,a=0,s=n.length;a<s;++a,e=null)if(t=n[a],e=c[t.identifier]){if(o)break;r=t,o=e}e&&(i=(i=t[0]-r[0])*i+(i=t[1]-r[1])*i,i=p&&Math.sqrt(i/p),r=[(r[0]+t[0])/2,(r[1]+t[1])/2],o=[(o[0]+e[0])/2,(o[1]+e[1])/2],S(i*l)),v=null,M(r,o),P(u)}function y(){if(E.event.touches.length){for(var t,e=E.event.changedTouches,n=0,i=e.length;n<i;++n)delete c[e[n].identifier];for(t in c)return void g()}E.selectAll(d).on(r,null),o.on(_,C).on(b,L),f(),D(u)}t(),A(u),o.on(_,null).on(b,t)}function y(){var t=w.of(this,arguments);i?clearTimeout(i):(ls.call(this),e=k(s=n||E.mouse(this)),A(t)),i=setTimeout(function(){i=null,D(t)},50),O(),S(Math.pow(2,.002*It())*x.k),M(s,e),P(t)}function I(){var t=E.mouse(this),e=Math.log(x.k)/Math.LN2;T(this,t,k(t),E.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Et=Et||("onwheel"in R?(It=function(){return-E.event.deltaY*(E.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(It=function(){return E.event.wheelDelta},"mousewheel"):(It=function(){return-E.event.detail},"MozMousePixelScroll")),g.event=function(t){t.each(function(){var a=w.of(this,arguments),e=x;cs?E.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},A(a)}).tween("zoom:zoom",function(){var n=h[0],t=h[1],i=s?s[0]:n/2,r=s?s[1]:t/2,o=E.interpolateZoom([(i-x.x)/x.k,(r-x.y)/x.k,n/x.k],[(i-e.x)/e.k,(r-e.y)/e.k,n/e.k]);return function(t){var e=o(t),t=n/e[2];this.__chart__=x={x:i-e[0]*t,y:r-e[1]*t,k:t},P(a)}}).each("interrupt.zoom",function(){D(a)}).each("end.zoom",function(){D(a)}):(this.__chart__=x,A(a),P(a),D(a))})},g.translate=function(t){return arguments.length?(x={x:+t[0],y:+t[1],k:x.k},m(),g):[x.x,x.y]},g.scale=function(t){return arguments.length?(x={x:x.x,y:x.y,k:+t},m(),g):x.k},g.scaleExtent=function(t){return arguments.length?(u=null==t?Rt:[+t[0],+t[1]],g):u},g.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],g):n},g.size=function(t){return arguments.length?(h=t&&[+t[0],+t[1]],g):h},g.duration=function(t){return arguments.length?(c=+t,g):c},g.x=function(t){return arguments.length?(r=(o=t).copy(),x={x:0,y:0,k:1},g):o},g.y=function(t){return arguments.length?(a=(l=t).copy(),x={x:0,y:0,k:1},g):l},E.rebind(g,w,"on")};var It,Et,Rt=[0,1/0];function Ht(){}function Ot(t,e,n){return this instanceof Ot?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ot?new Ot(t.h,t.s,t.l):Kt(""+t,Zt,Ot):new Ot(t,e,n)}(E.color=Ht).prototype.toString=function(){return this.rgb()+""};e=(E.hsl=Ot).prototype=new Ht;function Nt(t,e,n){var i,r;function o(t){return Math.round(255*(360<(t=t)?t-=360:t<0&&(t+=360),t<60?i+(r-i)*t/60:t<180?r:t<240?i+(r-i)*(240-t)/60:i))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:1<e?1:e,i=2*(n=n<0?0:1<n?1:n)-(r=n<=.5?n*(1+e):n+e-n*e),new Vt(o(t+120),o(t),o(t-120))}function Yt(t,e,n){return this instanceof Yt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Yt?new Yt(t.h,t.c,t.l):(i=(t instanceof Ft?t:t=Jt((t=E.rgb(t)).r,t.g,t.b)).l,r=t.a,o=t.b,0<i?new Yt(Math.atan2(o,r)*St,Math.sqrt(r*r+o*o),i):new Yt(NaN,NaN,i)):new Yt(t,e,n);var i,r,o}e.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ot(this.h,this.s,this.l/t)},e.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ot(this.h,this.s,t*this.l)},e.rgb=function(){return Nt(this.h,this.s,this.l)};o=(E.hcl=Yt).prototype=new Ht;function zt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Ft(n,Math.cos(t*=kt)*e,Math.sin(t)*e)}function Ft(t,e,n){return this instanceof Ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Ft?new Ft(t.l,t.a,t.b):t instanceof Yt?zt(t.h,t.c,t.l):Jt((t=Vt(t)).r,t.g,t.b):new Ft(t,e,n)}o.brighter=function(t){return new Yt(this.h,this.c,Math.min(100,this.l+Xt*(arguments.length?t:1)))},o.darker=function(t){return new Yt(this.h,this.c,Math.max(0,this.l-Xt*(arguments.length?t:1)))},o.rgb=function(){return zt(this.h,this.c,this.l).rgb()},E.lab=Ft;var Xt=18,c=Ft.prototype=new Ht;function Bt(t,e,n){t=(t+16)/116,n=t-n/200;return new Vt(Gt(3.2404542*(e=.95047*Ut(e=t+e/500))-1.5371385*(t=+Ut(t))-.4985314*(n=1.08883*Ut(n))),Gt(-.969266*e+1.8760108*t+.041556*n),Gt(.0556434*e-.2040259*t+1.0572252*n))}function Ut(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function Wt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function Gt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function Vt(t,e,n){return this instanceof Vt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof Vt?new Vt(t.r,t.g,t.b):Kt(""+t,Vt,Nt):new Vt(t,e,n)}function jt(t){return new Vt(t>>16,t>>8&255,255&t)}function $t(t){return jt(t)+""}c.brighter=function(t){return new Ft(Math.min(100,this.l+Xt*(arguments.length?t:1)),this.a,this.b)},c.darker=function(t){return new Ft(Math.max(0,this.l-Xt*(arguments.length?t:1)),this.a,this.b)},c.rgb=function(){return Bt(this.l,this.a,this.b)};e=(E.rgb=Vt).prototype=new Ht;function qt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Kt(t,e,n){t=t.toLowerCase();var i,r,o=0,a=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(te(i[0]),te(i[1]),te(i[2]))}return(r=ee.get(t))?e(r.r,r.g,r.b):(null==t||"#"!==t.charAt(0)||isNaN(r=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&r)>>4,o|=o>>4,a=240&r,a|=a>>4,s=15&r,s|=s<<4):7===t.length&&(o=(16711680&r)>>16,a=(65280&r)>>8,s=255&r)),e(o,a,s))}function Zt(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(r=l<.5?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=0<l&&l<1?0:i),new Ot(i,r,l)}function Jt(t,e,n){var i=Wt((.4124564*(t=Qt(t))+.3575761*(e=Qt(e))+.1804375*(n=Qt(n)))/.95047),r=Wt(.2126729*t+.7151522*e+.072175*n);return Ft(116*r-16,500*(i-r),200*(r-Wt((.0193339*t+.119192*e+.9503041*n)/1.08883)))}function Qt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function te(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}e.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new Vt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new Vt(30,30,30)},e.darker=function(t){return new Vt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},e.hsl=function(){return Zt(this.r,this.g,this.b)},e.toString=function(){return"#"+qt(this.r)+qt(this.g)+qt(this.b)};var ee=E.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ne(t){return"function"==typeof t?t:function(){return t}}function ie(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),re(t,e,i,n)}}function re(r,o,a,t){var n,s={},l=E.dispatch("beforesend","progress","load","error"),h={},u=new XMLHttpRequest,c=null;function e(){var t,e,n,i=u.status;if(!i&&((n=(e=u).responseType)&&"text"!==n?e.response:e.responseText)||200<=i&&i<300||304===i){try{t=a.call(s,u)}catch(t){return void l.error.call(s,t)}l.load.call(s,t)}else l.error.call(s,u)}return"onload"in(u=this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(r)?new XDomainRequest:u)?u.onload=u.onerror=e:u.onreadystatechange=function(){3<u.readyState&&e()},u.onprogress=function(t){var e=E.event;E.event=t;try{l.progress.call(s,u)}finally{E.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?h[t]:(null==e?delete h[t]:h[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(o=null==t?null:t+"",s):o},s.responseType=function(t){return arguments.length?(c=t,s):c},s.response=function(t){return a=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(p(arguments)))}}),s.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),u.open(t,r,!0),null==o||"accept"in h||(h.accept=o+",*/*"),u.setRequestHeader)for(var i in h)u.setRequestHeader(i,h[i]);return null!=o&&u.overrideMimeType&&u.overrideMimeType(o),null!=c&&(u.responseType=c),null!=n&&s.on("error",n).on("load",function(t){n(null,t)}),l.beforesend.call(s,u),u.send(null==e?null:e),s},s.abort=function(){return u.abort(),s},E.rebind(s,l,"on"),null==t?s:s.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}ee.forEach(function(t,e){ee.set(t,jt(e))}),E.functor=ne,E.xhr=ie(C),E.dsv=function(r,o){var e=new RegExp('["'+r+"\n]"),p=r.charCodeAt(0);function a(t,e,n){arguments.length<3&&(n=e,e=null);var i=re(t,o,null==e?s:l(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?s:l(t)):e},i}function s(t){return a.parse(t.responseText)}function l(e){return function(t){return a.parse(t.responseText,e)}}function n(t){return t.map(h).join(r)}function h(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,i){var r;return a.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},a.parseRows=function(r,t){var e,o,a={},s={},n=[],l=r.length,h=0,i=0;function u(){if(l<=h)return s;if(o)return o=!1,a;var t=h;if(34===r.charCodeAt(t)){for(var e=t;e++<l;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return h=e+2,13===(n=r.charCodeAt(e+1))?(o=!0,10===r.charCodeAt(e+2)&&++h):10===n&&(o=!0),r.slice(t+1,e).replace(/""/g,'"')}for(;h<l;){var n,i=1;if(10===(n=r.charCodeAt(h++)))o=!0;else if(13===n)o=!0,10===r.charCodeAt(h)&&(++h,++i);else if(n!==p)continue;return r.slice(t,h-i)}return r.slice(t)}for(;(e=u())!==s;){for(var c=[];e!==a&&e!==s;)c.push(e),e=u();t&&null==(c=t(c,i++))||n.push(c)}return n},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var n=new k,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(h).join(r)].concat(t.map(function(e){return i.map(function(t){return h(e[t])}).join(r)})).join("\n")},a.formatRows=function(t){return t.map(n).join("\n")},a},E.csv=E.dsv(",","text/csv"),E.tsv=E.dsv("\t","text/tab-separated-values");var oe,ae,se,le,he,ue=this[S(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ce(){var t=pe(),t=de()-t;24<t?(isFinite(t)&&(clearTimeout(le),le=setTimeout(ce,t)),se=0):(se=1,ue(ce))}function pe(){var t=Date.now();for(he=oe;he;)t>=he.t&&(he.f=he.c(t-he.t)),he=he.n;return t}function de(){for(var t,e=oe,n=1/0;e;)e=e.f?t?t.n=e.n:oe=e.n:(e.t<n&&(n=e.t),(t=e).n);return ae=t,n}function fe(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}E.timer=function(t,e,n){var i=arguments.length;i<2&&(e=0);i={c:t,t:(n=i<3?Date.now():n)+e,f:!1,n:null};ae?ae.n=i:oe=i,ae=i,se||(le=clearTimeout(le),se=1,ue(ce))},E.timer.flush=function(){pe(),de()},E.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ge=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*L(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});E.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=E.round(t,fe(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ge[8+n/3]};var me=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ye=E.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=E.round(t,fe(t,e))).toFixed(Math.max(0,Math.min(20,fe(t*(1+1e-15),e))))}});function ve(t){return t+""}var xe=E.time={},_e=Date;function be(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){we.setUTCDate.apply(this._,arguments)},setDay:function(){we.setUTCDay.apply(this._,arguments)},setFullYear:function(){we.setUTCFullYear.apply(this._,arguments)},setHours:function(){we.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){we.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){we.setUTCMinutes.apply(this._,arguments)},setMonth:function(){we.setUTCMonth.apply(this._,arguments)},setSeconds:function(){we.setUTCSeconds.apply(this._,arguments)},setTime:function(){we.setTime.apply(this._,arguments)}};var we=Date.prototype;function ke(i,o,a){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function s(t){return o(t=i(new _e(t-1)),1),t}function r(t,e){return o(t=new _e(+t),e),t}function l(t,e,n){var i=s(t),r=[];if(1<n)for(;i<e;)a(i)%n||r.push(new Date(+i)),o(i,1);else for(;i<e;)r.push(new Date(+i)),o(i,1);return r}(i.floor=i).round=t,i.ceil=s,i.offset=r,i.range=l;var e=i.utc=Se(i);return(e.floor=e).round=Se(t),e.ceil=Se(s),e.offset=Se(r),e.range=function(t,e,n){try{var i=new(_e=be);return i._=t,l(i,e,n)}finally{_e=Date}},i}function Se(i){return function(t,e){try{var n=new(_e=be);return n._=t,i(n,e)._}finally{_e=Date}}}xe.year=ke(function(t){return(t=xe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),xe.years=xe.year.range,xe.years.utc=xe.year.utc.range,xe.day=ke(function(t){var e=new _e(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),xe.days=xe.day.range,xe.days.utc=xe.day.utc.range,xe.dayOfYear=function(t){var e=xe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=xe[t]=ke(function(t){return(t=xe.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=xe.year(t).getDay();return Math.floor((xe.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});xe[t+"s"]=e.range,xe[t+"s"].utc=e.utc.range,xe[t+"OfYear"]=function(t){var e=xe.year(t).getDay();return Math.floor((xe.dayOfYear(t)+(e+n)%7)/7)}}),xe.week=xe.sunday,xe.weeks=xe.sunday.range,xe.weeks.utc=xe.sunday.utc.range,xe.weekOfYear=xe.sundayOfYear;var Me={"-":"",_:" ",0:"0"},Te=/^\s*\d+/,Ae=/^%/;function Pe(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",t=r.length;return i+(t<n?new Array(n-t+1).join(e)+r:r)}function De(t){return new RegExp("^(?:"+t.map(E.requote).join("|")+")","i")}function Ce(t){for(var e=new v,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Le(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function Ie(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n));return e?(t.U=+e[0],n+e[0].length):-1}function Ee(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n));return e?(t.W=+e[0],n+e[0].length):-1}function Re(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function He(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+2));return e?(t.y=(t=+e[0])+(68<t?1900:2e3),n+e[0].length):-1}function Oe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ne(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Ye(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function ze(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+3));return e?(t.j=+e[0],n+e[0].length):-1}function Fe(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function Xe(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Be(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function Ue(t,e,n){Te.lastIndex=0;e=Te.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function We(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",t=L(e)/60|0,e=L(e)%60;return n+Pe(t,"0",2)+Pe(e,"0",2)}function Ge(t,e,n){Ae.lastIndex=0;e=Ae.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function Ve(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}E.locale=function(t){return{numberFormat:(b=t.decimal,s=t.thousands,l=t.grouping,n=t.currency,w=l&&s?function(t,e){for(var n=t.length,i=[],r=0,o=l[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),i.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=l[r=(r+1)%l.length];return i.reverse().join(s)}:C,function(t){var t=me.exec(t),s=t[1]||" ",l=t[2]||">",h=t[3]||"-",e=t[4]||"",u=t[5],c=+t[6],p=t[7],d=t[8],f=t[9],g=1,m="",y="",v=!1,x=!0,d=d&&+d.substring(1);switch((u||"0"===s&&"="===l)&&(u=s="0",l="="),f){case"n":p=!0,f="g";break;case"%":g=100,y="%",f="f";break;case"p":g=100,y="%",f="r";break;case"b":case"o":case"x":case"X":"#"===e&&(m="0"+f.toLowerCase());case"c":x=!1;case"d":v=!0,d=0;break;case"s":g=-1,f="r"}"$"===e&&(m=n[0],y=n[1]),"r"!=f||d||(f="g"),null!=d&&("g"==f?d=Math.max(1,Math.min(21,d)):"e"!=f&&"f"!=f||(d=Math.max(0,Math.min(20,d))));var f=ye.get(f)||ve,_=u&&p;return function(t){var e=y;if(v&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===h?"":h;g<0?(t=(r=E.formatPrefix(t,d)).scale(t),e=r.symbol+y):t*=g;var i,r,o=(t=f(t,d)).lastIndexOf(".");r=o<0?(a=x?t.lastIndexOf("e"):-1)<0?(i=t,""):(i=t.substring(0,a),t.substring(a)):(i=t.substring(0,o),b+t.substring(o+1)),!u&&p&&(i=w(i,1/0));var a=m.length+i.length+r.length+(_?0:n.length),o=a<c?new Array(a=c-a+1).join(s):"";return _&&(i=w(o+i,o.length?c-r.length:1/0)),n+=m,t=i+r,("<"===l?n+t+o:">"===l?o+n+t:"^"===l?o.substring(0,a>>=1)+n+t+o.substring(a):n+(_?t:o+t))+e}}),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths;function h(s){var l=s.length;function t(t){for(var e,n,i,r=[],o=-1,a=0;++o<l;)37===s.charCodeAt(o)&&(r.push(s.slice(a,o)),null!=(n=Me[e=s.charAt(++o)])&&(e=s.charAt(++o)),(i=_[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),a=o+1);return r.push(s.slice(a,o)),r.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&_e!==be,t=new(n?be:_e);return"j"in e?t.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(t.setFullYear(e.y,0,1),t.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(t.getDay()+5)%7:e.w+7*e.U-(t.getDay()+6)%7)):t.setFullYear(e.y,e.m,e.d),t.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?t._:t},t.toString=function(){return s},t}function u(t,e,n,i){for(var r,o,a=0,s=e.length,l=n.length;a<s;){if(l<=i)return-1;if(37===(r=e.charCodeAt(a++))){if(o=e.charAt(a++),!(o=b[o in Me?e.charAt(a++):o])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}h.utc=function(t){var n=h(t);function e(t){try{var e=new(_e=be);return e._=t,n(e)}finally{_e=Date}}return e.parse=function(t){try{_e=be;var e=n.parse(t);return e&&e._}finally{_e=Date}},e.toString=n.toString,e},h.multi=h.utc.multi=Ve;var c=E.map(),p=De(o),d=Ce(o),f=De(a),g=Ce(a),m=De(s),y=Ce(s),v=De(l),x=Ce(l);r.forEach(function(t,e){c.set(t.toLowerCase(),e)});var _={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:h(e),d:function(t,e){return Pe(t.getDate(),e,2)},e:function(t,e){return Pe(t.getDate(),e,2)},H:function(t,e){return Pe(t.getHours(),e,2)},I:function(t,e){return Pe(t.getHours()%12||12,e,2)},j:function(t,e){return Pe(1+xe.dayOfYear(t),e,3)},L:function(t,e){return Pe(t.getMilliseconds(),e,3)},m:function(t,e){return Pe(t.getMonth()+1,e,2)},M:function(t,e){return Pe(t.getMinutes(),e,2)},p:function(t){return r[+(12<=t.getHours())]},S:function(t,e){return Pe(t.getSeconds(),e,2)},U:function(t,e){return Pe(xe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Pe(xe.mondayOfYear(t),e,2)},x:h(n),X:h(i),y:function(t,e){return Pe(t.getFullYear()%100,e,2)},Y:function(t,e){return Pe(t.getFullYear()%1e4,e,4)},Z:We,"%":function(){return"%"}},b={a:function(t,e,n){f.lastIndex=0;e=f.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){p.lastIndex=0;e=p.exec(e.slice(n));return e?(t.w=d.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){v.lastIndex=0;e=v.exec(e.slice(n));return e?(t.m=x.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){m.lastIndex=0;e=m.exec(e.slice(n));return e?(t.m=y.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return u(t,_.c.toString(),e,n)},d:Ye,e:Ye,H:Fe,I:Fe,j:ze,L:Ue,m:Ne,M:Xe,p:function(t,e,n){e=c.get(e.slice(n,n+=2).toLowerCase());return null==e?-1:(t.p=e,n)},S:Be,U:Ie,w:Le,W:Ee,x:function(t,e,n){return u(t,_.x.toString(),e,n)},X:function(t,e,n){return u(t,_.X.toString(),e,n)},y:He,Y:Re,Z:Oe,"%":Ge};return h}(t)};var b,s,l,n,w};o=E.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function je(){}E.format=o.numberFormat,E.geo={},je.prototype={s:0,t:0,add:function(t){qe(t,this.t,$e),qe($e.s,this.s,this),this.s?this.t+=$e.t:this.s=$e.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var $e=new je;function qe(t,e,n){var i=n.s=t+e,r=i-t;n.t=t-(i-r)+(e-r)}function Ke(t,e){t&&Je.hasOwnProperty(t.type)&&Je[t.type](t,e)}E.geo.stream=function(t,e){t&&Ze.hasOwnProperty(t.type)?Ze[t.type](t,e):Ke(t,e)};var Ze={Feature:function(t,e){Ke(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ke(n[i].geometry,e)}},Je={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Qe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Qe(n[i],e,0)},Polygon:function(t,e){tn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)tn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ke(n[i],e)}};function Qe(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function tn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Qe(t[n],e,1);e.polygonEnd()}E.geo.area=function(t){return en=0,E.geo.stream(t,An),en};var en,nn,rn,on,an,sn,ln,hn,un,cn,pn,dn,fn,gn,mn,yn,vn,xn,_n,bn,wn,kn,Sn,Mn,Tn=new je,An={sphere:function(){en+=4*xt},point:T,lineStart:T,lineEnd:T,polygonStart:function(){Tn.reset(),An.lineStart=Pn},polygonEnd:function(){var t=2*Tn;en+=t<0?4*xt+t:t,An.lineStart=An.lineEnd=An.point=T}};function Pn(){var n,i,s,l,h;function r(t,e){e=e*kt/2+xt/4;var n=(t*=kt)-s,i=0<=n?1:-1,r=i*n,o=Math.cos(e),a=Math.sin(e),n=h*a,e=l*o+n*Math.cos(r),r=n*i*Math.sin(r);Tn.add(Math.atan2(r,e)),s=t,l=o,h=a}An.point=function(t,e){An.point=r,s=(n=t)*kt,l=Math.cos(e=(i=e)*kt/2+xt/4),h=Math.sin(e)},An.lineEnd=function(){r(n,i)}}function Dn(t){var e=t[0],n=t[1],t=Math.cos(n);return[t*Math.cos(e),t*Math.sin(e),Math.sin(n)]}function Cn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ln(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function In(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function En(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Rn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Hn(t){return[Math.atan2(t[1],t[0]),Pt(t[2])]}function On(t,e){return L(t[0]-e[0])<vt&&L(t[1]-e[1])<vt}function Nn(t,e){kn.push(Sn=[fn=t,mn=t]),e<gn&&(gn=e),yn<e&&(yn=e)}function Yn(t,e){var n,i,r,o,a,s=Dn([t*kt,e*kt]);bn?(r=Ln(bn,s),Rn(n=Ln([r[1],-r[0],0],r)),n=Hn(n),o=t-vn,r=n[0]*St*(i=0<o?1:-1),(o=180<L(o))^(i*vn<r&&r<i*t)?(a=n[1]*St)>yn&&(yn=a):o^(i*vn<(r=(r+360)%360-180)&&r<i*t)?(a=-n[1]*St)<gn&&(gn=a):(e<gn&&(gn=e),yn<e&&(yn=e)),o?t<vn?Wn(fn,t)>Wn(fn,mn)&&(mn=t):Wn(t,mn)>Wn(fn,mn)&&(fn=t):fn<=mn?(t<fn&&(fn=t),mn<t&&(mn=t)):vn<t?Wn(fn,t)>Wn(fn,mn)&&(mn=t):Wn(t,mn)>Wn(fn,mn)&&(fn=t)):Nn(t,e),bn=s,vn=t}function zn(){Mn.point=Yn}function Fn(){Sn[0]=fn,Sn[1]=mn,Mn.point=Nn,bn=null}function Xn(t,e){var n;bn?wn+=180<L(n=t-vn)?n+(0<n?360:-360):n:(xn=t,_n=e),An.point(t,e),Yn(t,e)}function Bn(){An.lineStart()}function Un(){Xn(xn,_n),An.lineEnd(),L(wn)>vt&&(fn=-(mn=180)),Sn[0]=fn,Sn[1]=mn,bn=null}function Wn(t,e){return(e-=t)<0?e+360:e}function Gn(t,e){return t[0]-e[0]}function Vn(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}E.geo.bounds=(Mn={point:Nn,lineStart:zn,lineEnd:Fn,polygonStart:function(){Mn.point=Xn,Mn.lineStart=Bn,Mn.lineEnd=Un,wn=0,An.polygonStart()},polygonEnd:function(){An.polygonEnd(),Mn.point=Nn,Mn.lineStart=zn,Mn.lineEnd=Fn,Tn<0?(fn=-(mn=180),gn=-(yn=90)):vt<wn?yn=90:wn<-vt&&(gn=-90),Sn[0]=fn,Sn[1]=mn}},function(t){if(yn=mn=-(fn=gn=1/0),kn=[],E.geo.stream(t,Mn),r=kn.length){kn.sort(Gn);for(var e=1,n=[s=kn[0]];e<r;++e)Vn((o=kn[e])[0],s)||Vn(o[1],s)?(Wn(s[0],o[1])>Wn(s[0],s[1])&&(s[1]=o[1]),Wn(o[0],s[1])>Wn(s[0],s[1])&&(s[0]=o[0])):n.push(s=o);for(var i,r,o,a=-1/0,s=(e=0,n[r=n.length-1]);e<=r;s=o,++e)o=n[e],(i=Wn(s[1],o[0]))>a&&(a=i,fn=o[0],mn=s[1])}return kn=Sn=null,fn===1/0||gn===1/0?[[NaN,NaN],[NaN,NaN]]:[[fn,gn],[mn,yn]]}),E.geo.centroid=function(t){nn=rn=on=an=sn=ln=hn=un=cn=pn=dn=0,E.geo.stream(t,jn);var e=cn,n=pn,i=dn,t=e*e+n*n+i*i;return t<1e-12&&(e=ln,n=hn,i=un,rn<vt&&(e=on,n=an,i=sn),(t=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[Math.atan2(n,e)*St,Pt(i/Math.sqrt(t))*St]};var jn={sphere:T,point:$n,lineStart:Kn,lineEnd:Zn,polygonStart:function(){jn.lineStart=Jn},polygonEnd:function(){jn.lineStart=Kn}};function $n(t,e){t*=kt;var n=Math.cos(e*=kt);qn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function qn(t,e,n){on+=(t-on)/++nn,an+=(e-an)/nn,sn+=(n-sn)/nn}function Kn(){var r,o,a;function i(t,e){t*=kt;var n=Math.cos(e*=kt),i=n*Math.cos(t),n=n*Math.sin(t),t=Math.sin(e),e=Math.atan2(Math.sqrt((e=o*t-a*n)*e+(e=a*i-r*t)*e+(e=r*n-o*i)*e),r*i+o*n+a*t);rn+=e,ln+=e*(r+(r=i)),hn+=e*(o+(o=n)),un+=e*(a+(a=t)),qn(r,o,a)}jn.point=function(t,e){t*=kt;var n=Math.cos(e*=kt);r=n*Math.cos(t),o=n*Math.sin(t),a=Math.sin(e),jn.point=i,qn(r,o,a)}}function Zn(){jn.point=$n}function Jn(){var i,r,h,u,c;function o(t,e){t*=kt;var n=Math.cos(e*=kt),i=n*Math.cos(t),r=n*Math.sin(t),o=Math.sin(e),a=u*o-c*r,s=c*i-h*o,l=h*r-u*i,n=Math.sqrt(a*a+s*s+l*l),t=h*i+u*r+c*o,e=n&&-At(t)/n,t=Math.atan2(n,t);cn+=e*a,pn+=e*s,dn+=e*l,rn+=t,ln+=t*(h+(h=i)),hn+=t*(u+(u=r)),un+=t*(c+(c=o)),qn(h,u,c)}jn.point=function(t,e){i=t,r=e,jn.point=o,t*=kt;var n=Math.cos(e*=kt);h=n*Math.cos(t),u=n*Math.sin(t),c=Math.sin(e),qn(h,u,c)},jn.lineEnd=function(){o(i,r),jn.lineEnd=Zn,jn.point=$n}}function Qn(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function ti(){return!0}function ei(t,e,n,i,s){var l=[],h=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(On(n,i)){s.lineStart();for(var r=0;r<e;++r)s.point((n=t[r])[0],n[1]);s.lineEnd()}else{var o=new ii(n,t,null,!0),a=new ii(n,null,o,!1);o.o=a,l.push(o),h.push(a),o=new ii(i,t,null,!1),a=new ii(i,null,o,!0),o.o=a,l.push(o),h.push(a)}}}),h.sort(e),ni(l),ni(h),l.length){for(var r=0,o=n,a=h.length;r<a;++r)h[r].e=o=!o;for(var u,c,p=l[0];;){for(var d=p,f=!0;d.v;)if((d=d.n)===p)return;u=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(r=0,a=u.length;r<a;++r)s.point((c=u[r])[0],c[1]);else i(d.x,d.n.x,1,s);d=d.n}else{if(f)for(r=(u=d.p.z).length-1;0<=r;--r)s.point((c=u[r])[0],c[1]);else i(d.x,d.p.x,-1,s);d=d.p}}while(u=(d=d.o).z,f=!f,!d.v);s.lineEnd()}}}function ni(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function ii(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ri(y,v,x,_){return function(i,a){var s,n=v(a),M=i.invert(_[0],_[1]),e={point:r,lineStart:o,lineEnd:l,polygonStart:function(){e.point=f,e.lineStart=g,e.lineEnd=m,s=[],h=[]},polygonEnd:function(){e.point=r,e.lineStart=o,e.lineEnd=l,s=E.merge(s);var t=function(t,e){var n=M[0],i=M[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Tn.reset();for(var s=0,l=e.length;s<l;++s){var h=e[s],u=h.length;if(u)for(var c=h[0],p=c[0],d=c[1]/2+xt/4,f=Math.sin(d),g=Math.cos(d),m=1;;){var y=(t=h[m=m===u?0:m])[0],v=t[1]/2+xt/4,x=Math.sin(v),_=Math.cos(v),b=y-p,w=0<=b?1:-1,k=w*b,S=xt<k,v=f*x;if(Tn.add(Math.atan2(v*w*Math.sin(k),g*_+v*Math.cos(k))),o+=S?b+w*_t:b,S^n<=p^n<=y&&(Rn(k=Ln(Dn(c),Dn(t))),Rn(w=Ln(r,k)),((w=(S^0<=b?-1:1)*Pt(w[2]))<i||i===w&&(k[0]||k[1]))&&(a+=S^0<=b?1:-1)),!m++)break;p=y,f=x,g=_,c=t}}return(o<-vt||o<vt&&Tn<0)^1&a}(0,h);s.length?(d||(a.polygonStart(),d=!0),ei(s,si,t,x,a)):t&&(d||(a.polygonStart(),d=!0),a.lineStart(),x(null,null,1,a),a.lineEnd()),d&&(a.polygonEnd(),d=!1),s=h=null},sphere:function(){a.polygonStart(),a.lineStart(),x(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function r(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&a.point(t,e)}function t(t,e){e=i(t,e);n.point(e[0],e[1])}function o(){e.point=t,n.lineStart()}function l(){e.point=r,n.lineEnd()}var h,u,c=ai(),p=v(c),d=!1;function f(t,e){u.push([t,e]);e=i(t,e);p.point(e[0],e[1])}function g(){p.lineStart(),u=[]}function m(){f(u[0][0],u[0][1]),p.lineEnd();var t,e=p.clean(),n=c.buffer(),i=n.length;if(u.pop(),h.push(u),u=null,i)if(1&e){var r,o=-1;if(0<(i=(t=n[0]).length-1)){for(d||(a.polygonStart(),d=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(oi))}return e}}function oi(t){return 1<t.length}function ai(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:T,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function si(t,e){return((t=t.x)[0]<0?t[1]-wt-vt:wt-t[1])-((e=e.x)[0]<0?e[1]-wt-vt:wt-e[1])}var li=ri(ti,function(h){var u,c=NaN,p=NaN,d=NaN;return{lineStart:function(){h.lineStart(),u=1},point:function(t,e){var n,i,r,o,a,s=0<t?xt:-xt,l=L(t-c);L(l-xt)<vt?(h.point(c,p=0<(p+e)/2?wt:-wt),h.point(d,p),h.lineEnd(),h.lineStart(),h.point(s,p),h.point(t,p),u=0):d!==s&&xt<=l&&(L(c-d)<vt&&(c-=d*vt),L(t-s)<vt&&(t-=s*vt),n=c,i=p,r=t,o=e,a=Math.sin(n-r),p=L(a)>vt?Math.atan((Math.sin(i)*(l=Math.cos(o))*Math.sin(r)-Math.sin(o)*(r=Math.cos(i))*Math.sin(n))/(r*l*a)):(i+o)/2,h.point(d,p),h.lineEnd(),h.lineStart(),h.point(s,p),u=0),h.point(c=t,p=e),d=s},lineEnd:function(){h.lineEnd(),c=p=NaN},clean:function(){return 2-u}}},function(t,e,n,i){var r;null==t?(r=n*wt,i.point(-xt,r),i.point(0,r),i.point(xt,r),i.point(xt,0),i.point(xt,-r),i.point(0,-r),i.point(-xt,-r),i.point(-xt,0),i.point(-xt,r)):L(t[0]-e[0])>vt?(t=t[0]<e[0]?xt:-xt,i.point(-t,r=n*t/2),i.point(0,r),i.point(t,r)):i.point(e[0],e[1])},[-xt,-xt/2]);function hi(l,h,u,c){return function(t){var e=t.a,n=t.b,i=e.x,r=e.y,o=0,a=1,s=n.x-i,e=n.y-r,n=l-i;if(s||!(0<n)){if(n/=s,s<0){if(n<o)return;n<a&&(a=n)}else if(0<s){if(a<n)return;o<n&&(o=n)}if(n=u-i,s||!(n<0)){if(n/=s,s<0){if(a<n)return;o<n&&(o=n)}else if(0<s){if(n<o)return;n<a&&(a=n)}if(n=h-r,e||!(0<n)){if(n/=e,e<0){if(n<o)return;n<a&&(a=n)}else if(0<e){if(a<n)return;o<n&&(o=n)}if(n=c-r,e||!(n<0)){if(n/=e,e<0){if(a<n)return;o<n&&(o=n)}else if(0<e){if(n<o)return;n<a&&(a=n)}return 0<o&&(t.a={x:i+o*s,y:r+o*e}),a<1&&(t.b={x:i+a*s,y:r+a*e}),t}}}}}}function ui(_,b,w,k){return function(r){var i,u,o,a,s,l,h,c,p,d,f,g=r,t=ai(),m=hi(_,b,w,k),e={point:n,lineStart:function(){e.point=x,u&&u.push(o=[]),p=!(d=!0),h=c=NaN},lineEnd:function(){i&&(x(a,s),l&&p&&t.rejoin(),i.push(t.buffer())),e.point=n,p&&r.lineEnd()},polygonStart:function(){r=t,i=[],u=[],f=!0},polygonEnd:function(){r=g,i=E.merge(i);var t=function(t){for(var e=0,n=u.length,i=t[1],r=0;r<n;++r)for(var o,a=1,s=u[r],l=s.length,h=s[0];a<l;++a)o=s[a],h[1]<=i?o[1]>i&&0<Tt(h,o,t)&&++e:o[1]<=i&&Tt(h,o,t)<0&&--e,h=o;return 0!==e}([_,k]),e=f&&t,n=i.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),y(null,null,1,r),r.lineEnd()),n&&ei(i,M,t,y,r),r.polygonEnd()),i=u=o=null}};function y(t,e,n,i){var r=0,o=0;if(null==t||(r=S(t,n))!==(o=S(e,n))||T(t,e)<0^0<n)for(;i.point(0===r||3===r?_:w,1<r?k:b),(r=(r+n+4)%4)!==o;);else i.point(e[0],e[1])}function v(t,e){return _<=t&&t<=w&&b<=e&&e<=k}function n(t,e){v(t,e)&&r.point(t,e)}function x(t,e){var n,i=v(t=Math.max(-1e9,Math.min(1e9,t)),e=Math.max(-1e9,Math.min(1e9,e)));u&&o.push([t,e]),d?(a=t,s=e,d=!1,(l=i)&&(r.lineStart(),r.point(t,e))):i&&p?r.point(t,e):m(n={a:{x:h,y:c},b:{x:t,y:e}})?(p||(r.lineStart(),r.point(n.a.x,n.a.y)),r.point(n.b.x,n.b.y),i||r.lineEnd(),f=!1):i&&(r.lineStart(),r.point(t,e),f=!1),h=t,c=e,p=i}return e};function S(t,e){return L(t[0]-_)<vt?0<e?0:3:L(t[0]-w)<vt?0<e?2:1:L(t[1]-b)<vt?0<e?1:0:0<e?3:2}function M(t,e){return T(t.x,e.x)}function T(t,e){var n=S(t,1),i=S(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ci(t){var e=0,n=xt/3,i=Hi(t),t=i(e,n);return t.parallels=function(t){return arguments.length?i(e=t[0]*xt/180,n=t[1]*xt/180):[e/xt*180,n/xt*180]},t}function pi(t,e){var t=Math.sin(t),n=(t+Math.sin(e))/2,i=1+t*(2*n-t),r=Math.sqrt(i)/n;function o(t,e){e=Math.sqrt(i-2*n*Math.sin(e))/n;return[e*Math.sin(t*=n),r-e*Math.cos(t)]}return o.invert=function(t,e){e=r-e;return[Math.atan2(t,e)/n,Pt((i-(t*t+e*e)*n*n)/(2*n))]},o}E.geo.clipExtent=function(){var e,n,i,r,o,a,s={stream:function(t){return o&&(o.valid=!1),(o=a(t)).valid=!0,o},extent:function(t){return arguments.length?(a=ui(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o&&(o.valid=!1,o=null),s):[[e,n],[i,r]]}};return s.extent([[0,0],[960,500]])},(E.geo.conicEqualArea=function(){return ci(pi)}).raw=pi,E.geo.albers=function(){return E.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},E.geo.albersUsa=function(){var n,r,o,a,s=E.geo.albers(),l=E.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=E.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){n=[t,e]}};function c(t){var e=t[0],t=t[1];return n=null,r(e,t),n||(o(e,t),n)||a(e,t),n}return c.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,e=(t[1]-n[1])/e;return(.12<=e&&e<.234&&-.425<=i&&i<-.214?l:.166<=e&&e<.234&&-.214<=i&&i<-.115?h:s).invert(t)},c.stream=function(t){var n=s.stream(t),i=l.stream(t),r=h.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},c.precision=function(t){return arguments.length?(s.precision(t),l.precision(t),h.precision(t),c):s.precision()},c.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),h.scale(t),c.translate(s.translate())):s.scale()},c.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],i=+t[1];return r=s.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(u).point,o=l.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+vt,i+.12*e+vt],[n-.214*e-vt,i+.234*e-vt]]).stream(u).point,a=h.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+vt,i+.166*e+vt],[n-.115*e-vt,i+.234*e-vt]]).stream(u).point,c},c.scale(1070)};var di,fi,gi,mi,yi,vi,xi={point:T,lineStart:T,lineEnd:T,polygonStart:function(){fi=0,xi.lineStart=_i},polygonEnd:function(){xi.lineStart=xi.lineEnd=xi.point=T,di+=L(fi/2)}};function _i(){var n,i,r,o;function a(t,e){fi+=o*t-r*e,r=t,o=e}xi.point=function(t,e){xi.point=a,n=r=t,i=o=e},xi.lineEnd=function(){a(n,i)}}var bi={point:function(t,e){t<gi&&(gi=t),yi<t&&(yi=t),e<mi&&(mi=e),vi<e&&(vi=e)},lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T};function wi(){var n=ki(4.5),i=[],r={point:t,lineStart:function(){r.point=e},lineEnd:a,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=a,r.point=t},pointRadius:function(t){return n=ki(t),r},result:function(){if(i.length){var t=i.join("");return i=[],t}}};function t(t,e){i.push("M",t,",",e,n)}function e(t,e){i.push("M",t,",",e),r.point=o}function o(t,e){i.push("L",t,",",e)}function a(){r.point=t}function s(){i.push("Z")}return r}function ki(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Si,Mi={point:Ti,lineStart:Ai,lineEnd:Pi,polygonStart:function(){Mi.lineStart=Di},polygonEnd:function(){Mi.point=Ti,Mi.lineStart=Ai,Mi.lineEnd=Pi}};function Ti(t,e){on+=t,an+=e,++sn}function Ai(){var r,o;function n(t,e){var n=t-r,i=e-o,i=Math.sqrt(n*n+i*i);ln+=i*(r+t)/2,hn+=i*(o+e)/2,un+=i,Ti(r=t,o=e)}Mi.point=function(t,e){Mi.point=n,Ti(r=t,o=e)}}function Pi(){Mi.point=Ti}function Di(){var n,i,r,o;function a(t,e){var n=t-r,i=e-o,i=Math.sqrt(n*n+i*i);ln+=i*(r+t)/2,hn+=i*(o+e)/2,un+=i,cn+=(i=o*t-r*e)*(r+t),pn+=i*(o+e),dn+=3*i,Ti(r=t,o=e)}Mi.point=function(t,e){Mi.point=a,Ti(n=r=t,i=o=e)},Mi.lineEnd=function(){a(n,i)}}function Ci(n){var i=4.5,r={point:t,lineStart:function(){r.point=e},lineEnd:a,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=a,r.point=t},pointRadius:function(t){return i=t,r},result:T};function t(t,e){n.moveTo(t+i,e),n.arc(t,e,i,0,_t)}function e(t,e){n.moveTo(t,e),r.point=o}function o(t,e){n.lineTo(t,e)}function a(){r.point=t}function s(){n.closePath()}return r}function Li(A){var P=.5,D=Math.cos(30*kt),b=16;function e(t){return(b?i:n)(t)}function n(n){return Ei(n,function(t,e){t=A(t,e),n.point(t[0],t[1])})}function i(i){var n,r,o,a,s,l,h,u,c,p,d,f,g={point:t,lineStart:e,lineEnd:y,polygonStart:function(){i.polygonStart(),g.lineStart=v},polygonEnd:function(){i.polygonEnd(),g.lineStart=e}};function t(t,e){t=A(t,e),i.point(t[0],t[1])}function e(){u=NaN,g.point=m,i.lineStart()}function m(t,e){var n=Dn([t,e]),e=A(t,e);C(u,c,h,p,d,f,u=e[0],c=e[1],h=t,p=n[0],d=n[1],f=n[2],b,i),i.point(u,c)}function y(){g.point=t,i.lineEnd()}function v(){e(),g.point=x,g.lineEnd=_}function x(t,e){m(n=t,e),r=u,o=c,a=p,s=d,l=f,g.point=m}function _(){C(u,c,h,p,d,f,r,o,n,a,s,l,b,i),g.lineEnd=y,y()}return g}function C(t,e,n,i,r,o,a,s,l,h,u,c,p,d){var f,g,m,y,v,x,_,b,w,k,S=a-t,M=s-e,T=S*S+M*M;4*P<T&&p--&&(f=i+h,g=r+u,m=o+c,y=Math.sqrt(f*f+g*g+m*m),w=Math.asin(m/=y),v=L(L(m)-1)<vt||L(n-l)<vt?(n+l)/2:Math.atan2(g,f),x=(k=A(v,w))[0],_=k[1],(P<(k=M*(b=x-t)-S*(w=_-e))*k/T||.3<L((S*b+M*w)/T-.5)||i*h+r*u+o*c<D)&&(C(t,e,n,i,r,o,x,_,v,f/=y,g/=y,m,p,d),d.point(x,_),C(x,_,v,f,g,m,a,s,l,h,u,c,p,d)))}return e.precision=function(t){return arguments.length?(b=0<(P=t*t)&&16,e):Math.sqrt(P)},e}function Ii(t){this.stream=t}function Ei(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ri(t){return Hi(function(){return t})()}function Hi(t){var n,e,i,r,o,a,s=Li(function(t,e){return[(t=n(t,e))[0]*l+r,o-t[1]*l]}),l=150,h=480,u=250,c=0,p=0,d=0,f=0,g=0,v=li,m=C,x=null,y=null;function _(t){return[(t=i(t[0]*kt,t[1]*kt))[0]*l+r,o-t[1]*l]}function b(t){return(t=i.invert((t[0]-r)/l,(o-t[1])/l))&&[t[0]*St,t[1]*St]}function w(){i=Qn(e=zi(d,f,g),n);var t=n(c,p);return r=h-t[0]*l,o=u+t[1]*l,k()}function k(){return a&&(a.valid=!1,a=null),_}return _.stream=function(t){return a&&(a.valid=!1),(a=Oi(v(e,s(m(t))))).valid=!0,a},_.clipAngle=function(t){return arguments.length?(v=null==t?(x=t,li):(r=(x=+t)*kt,g=Math.cos(r),m=0<g,y=L(g)>vt,ri(p,function(a){var s,l,h,u,c;return{lineStart:function(){u=h=!1,c=1},point:function(t,e){var n,i,r=[t,e],o=p(t,e),e=m?o?0:f(t,e):o?f(t+(t<0?xt:-xt),e):0;!s&&(u=h=o)&&a.lineStart(),o!==h&&(n=d(s,r),(On(s,n)||On(r,n))&&(r[0]+=vt,r[1]+=vt,o=p(r[0],r[1]))),o!==h?(c=0,o?(a.lineStart(),n=d(r,s),a.point(n[0],n[1])):(n=d(s,r),a.point(n[0],n[1]),a.lineEnd()),s=n):y&&s&&m^o&&(e&l||!(i=d(r,s,!0))||(c=0,m?(a.lineStart(),a.point(i[0][0],i[0][1]),a.point(i[1][0],i[1][1]),a.lineEnd()):(a.point(i[1][0],i[1][1]),a.lineEnd(),a.lineStart(),a.point(i[0][0],i[0][1])))),!o||s&&On(s,r)||a.point(r[0],r[1]),s=r,h=o,l=e},lineEnd:function(){h&&a.lineEnd(),s=null},clean:function(){return c|(u&&h)<<1}}},Ui(r,6*kt),m?[0,-r]:[-xt,r-xt])),k()):x;function p(t,e){return Math.cos(t)*Math.cos(e)>g}function d(t,e,n){var i=[1,0,0],r=Ln(Dn(t),Dn(e)),o=Cn(r,r),a=r[0],s=o-a*a;if(!s)return!n&&t;var l=Ln(i,r),h=En(i,g*o/s);In(h,En(r,-g*a/s));var u=l,c=Cn(h,u),i=Cn(u,u),o=c*c-i*(Cn(h,h)-1);if(!(o<0)){r=Math.sqrt(o),a=En(u,(-c-r)/i);if(In(a,h),a=Hn(a),!n)return a;var p,s=t[0],l=e[0],o=t[1],n=e[1];l<s&&(p=s,s=l,l=p);t=l-s,e=L(t-xt)<vt;if(!e&&n<o&&(p=o,o=n,n=p),e||t<vt?e?0<o+n^a[1]<(L(a[0]-s)<vt?o:n):o<=a[1]&&a[1]<=n:xt<t^(s<=a[0]&&a[0]<=l)){i=En(u,(-c+r)/i);return In(i,h),[a,Hn(i)]}}}function f(t,e){var n=m?r:xt-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}var r,g,m,y},_.clipExtent=function(t){return arguments.length?(m=(y=t)?ui(t[0][0],t[0][1],t[1][0],t[1][1]):C,k()):y},_.scale=function(t){return arguments.length?(l=+t,w()):l},_.translate=function(t){return arguments.length?(h=+t[0],u=+t[1],w()):[h,u]},_.center=function(t){return arguments.length?(c=t[0]%360*kt,p=t[1]%360*kt,w()):[c*St,p*St]},_.rotate=function(t){return arguments.length?(d=t[0]%360*kt,f=t[1]%360*kt,g=2<t.length?t[2]%360*kt:0,w()):[d*St,f*St,g*St]},E.rebind(_,s,"precision"),function(){return n=t.apply(this,arguments),_.invert=n.invert&&b,w()}}function Oi(n){return Ei(n,function(t,e){n.point(t*kt,e*kt)})}function Ni(t,e){return[t,e]}function Yi(t,e){return[xt<t?t-_t:t<-xt?t+_t:t,e]}function zi(t,e,n){return t?e||n?Qn(Xi(t),Bi(e,n)):Xi(t):e||n?Bi(e,n):Yi}function Fi(n){return function(t,e){return[(t+=n)>xt?t-_t:t<-xt?t+_t:t,e]}}function Xi(t){var e=Fi(t);return e.invert=Fi(-t),e}function Bi(t,e){var r=Math.cos(t),o=Math.sin(t),a=Math.cos(e),s=Math.sin(e);function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,t=Math.sin(t)*n,n=Math.sin(e),e=n*r+i*o;return[Math.atan2(t*a-e*s,i*r-n*o),Pt(e*a+t*s)]}return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,t=Math.sin(t)*n,n=Math.sin(e),e=n*a-t*s;return[Math.atan2(t*a+n*s,i*r+e*o),Pt(e*r-i*o)]},n}function Ui(s,l){var h=Math.cos(s),u=Math.sin(s);return function(t,e,n,i){var r=n*l;null!=t?(t=Wi(h,t),e=Wi(h,e),(0<n?t<e:e<t)&&(t+=n*_t)):(t=s+n*_t,e=s-.5*r);for(var o,a=t;0<n?e<a:a<e;a-=r)i.point((o=Hn([h,-u*Math.cos(a),-u*Math.sin(a)]))[0],o[1])}}function Wi(t,e){e=Dn(e);e[0]-=t,Rn(e);t=At(-e[1]);return((-e[2]<0?-t:t)+2*Math.PI-vt)%(2*Math.PI)}function Gi(t,e,n){var i=E.range(t,e-vt,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Vi(t,e,n){var i=E.range(t,e-vt,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function ji(t){return t.source}function $i(t){return t.target}E.geo.path=function(){var i,e,r,n,o,a=4.5;function s(t){return t&&("function"==typeof a&&n.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(n)),E.geo.stream(t,o)),n.result()}function l(){return o=null,s}return s.area=function(t){return di=0,E.geo.stream(t,r(xi)),di},s.centroid=function(t){return on=an=sn=ln=hn=un=cn=pn=dn=0,E.geo.stream(t,r(Mi)),dn?[cn/dn,pn/dn]:un?[ln/un,hn/un]:sn?[on/sn,an/sn]:[NaN,NaN]},s.bounds=function(t){return yi=vi=-(gi=mi=1/0),E.geo.stream(t,r(bi)),[[gi,mi],[yi,vi]]},s.projection=function(t){return arguments.length?(r=(i=t)?t.stream||(n=t,e=Li(function(t,e){return n([t*St,e*St])}),function(t){return Oi(e(t))}):C,l()):i;var n,e},s.context=function(t){return arguments.length?(n=null==(e=t)?new wi:new Ci(t),"function"!=typeof a&&n.pointRadius(a),l()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(n.pointRadius(+t),+t),s):a},s.projection(E.geo.albersUsa()).context(null)},E.geo.transform=function(i){return{stream:function(t){var e,n=new Ii(t);for(e in i)n[e]=i[e];return n}}},Ii.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},E.geo.projection=Ri,E.geo.projectionMutator=Hi,(E.geo.equirectangular=function(){return Ri(Ni)}).raw=Ni.invert=Ni,E.geo.rotation=function(e){function t(t){return(t=e(t[0]*kt,t[1]*kt))[0]*=St,t[1]*=St,t}return e=zi(e[0]%360*kt,e[1]*kt,2<e.length?e[2]*kt:0),t.invert=function(t){return(t=e.invert(t[0]*kt,t[1]*kt))[0]*=St,t[1]*=St,t},t},Yi.invert=Ni,E.geo.circle=function(){var e,r,o=[0,0],n=6;function i(){var t="function"==typeof o?o.apply(this,arguments):o,n=zi(-t[0]*kt,-t[1]*kt,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=St,t[1]*=St}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(o=t,i):o},i.angle=function(t){return arguments.length?(r=Ui((e=+t)*kt,n*kt),i):e},i.precision=function(t){return arguments.length?(r=Ui(e*kt,(n=+t)*kt),i):n},i.angle(90)},E.geo.distance=function(t,e){var n=(e[0]-t[0])*kt,i=t[1]*kt,r=e[1]*kt,o=Math.sin(n),t=Math.cos(n),e=Math.sin(i),n=Math.cos(i),i=Math.sin(r),r=Math.cos(r);return Math.atan2(Math.sqrt((o=r*o)*o+(o=n*i-e*r*t)*o),e*i+n*r*t)},E.geo.graticule=function(){var e,n,i,r,o,a,s,l,h,u,c,p,d=10,f=d,g=90,m=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:t()}}function t(){return E.range(Math.ceil(r/g)*g,i,g).map(c).concat(E.range(Math.ceil(l/m)*m,s,m).map(p)).concat(E.range(Math.ceil(n/d)*d,e,d).filter(function(t){return L(t%g)>vt}).map(h)).concat(E.range(Math.ceil(a/f)*f,o,f).filter(function(t){return L(t%m)>vt}).map(u))}return v.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(p(s).slice(1),c(i).reverse().slice(1),p(l).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.majorExtent(t).minorExtent(t):v.minorExtent()},v.majorExtent=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],l=+t[0][1],s=+t[1][1],i<r&&(t=r,r=i,i=t),s<l&&(t=l,l=s,s=t),v.precision(y)):[[r,l],[i,s]]},v.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],e<n&&(t=n,n=e,e=t),o<a&&(t=a,a=o,o=t),v.precision(y)):[[n,a],[e,o]]},v.step=function(t){return arguments.length?v.majorStep(t).minorStep(t):v.minorStep()},v.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],v):[g,m]},v.minorStep=function(t){return arguments.length?(d=+t[0],f=+t[1],v):[d,f]},v.precision=function(t){return arguments.length?(y=+t,h=Gi(a,o,90),u=Vi(n,e,y),c=Gi(l,s,90),p=Vi(r,i,y),v):y},v.majorExtent([[-180,-90+vt],[180,90-vt]]).minorExtent([[-180,-80-vt],[180,80+vt]])},E.geo.greatArc=function(){var e,n,i=ji,r=$i;function o(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}return o.distance=function(){return E.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},o.source=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,o):i},o.target=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,o):r},o.precision=function(){return arguments.length?o:0},o},E.geo.interpolate=function(t,e){return n=t[0]*kt,i=t[1]*kt,d=e[0]*kt,r=e[1]*kt,t=Math.cos(i),o=Math.sin(i),e=Math.cos(r),a=Math.sin(r),s=t*Math.cos(n),l=t*Math.sin(n),h=e*Math.cos(d),u=e*Math.sin(d),c=2*Math.asin(Math.sqrt(Ct(r-i)+t*e*Ct(d-n))),p=1/Math.sin(c),(d=c?function(t){var e=Math.sin(t*=c)*p,n=Math.sin(c-t)*p,i=n*s+e*h,t=n*l+e*u,e=n*o+e*a;return[Math.atan2(t,i)*St,Math.atan2(e,Math.sqrt(i*i+t*t))*St]}:function(){return[n*St,i*St]}).distance=c,d;var n,i,r,o,a,s,l,h,u,c,p,d},E.geo.length=function(t){return Si=0,E.geo.stream(t,qi),Si};var qi={sphere:T,point:T,lineStart:function(){var o,a,s;function n(t,e){var n=Math.sin(e*=kt),i=Math.cos(e),r=L((t*=kt)-o),e=Math.cos(r);Si+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=s*n-a*i*e)*r),a*n+s*i*e),o=t,a=n,s=i}qi.point=function(t,e){o=t*kt,a=Math.sin(e*=kt),s=Math.cos(e),qi.point=n},qi.lineEnd=function(){qi.point=qi.lineEnd=T}},lineEnd:T,polygonStart:T,polygonEnd:T};function Ki(r,o){function t(t,e){var n=Math.cos(t),i=Math.cos(e),n=r(n*i);return[n*i*Math.sin(t),n*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=o(n),r=Math.sin(i),i=Math.cos(i);return[Math.atan2(t*r,n*i),Math.asin(n&&e*r/n)]},t}var Zi=Ki(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(E.geo.azimuthalEqualArea=function(){return Ri(Zi)}).raw=Zi;var Ji=Ki(function(t){t=Math.acos(t);return t&&t/Math.sin(t)},C);function Qi(t,e){function n(t){return Math.tan(xt/4+t/2)}var i=Math.cos(t),r=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(n(e)/n(t)),o=i*Math.pow(n(t),r)/r;return r?(a.invert=function(t,e){var n=o-e,e=Mt(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(o/e,1/r))-wt]},a):nr;function a(t,e){0<o?e<-wt+vt&&(e=-wt+vt):wt-vt<e&&(e=wt-vt);e=o/Math.pow(n(e),r);return[e*Math.sin(r*t),o-e*Math.cos(r*t)]}}function tr(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),r=n/i+t;return L(i)<vt?Ni:(o.invert=function(t,e){e=r-e;return[Math.atan2(t,e)/i,r-Mt(i)*Math.sqrt(t*t+e*e)]},o);function o(t,e){e=r-e;return[e*Math.sin(i*t),r-e*Math.cos(i*t)]}}(E.geo.azimuthalEquidistant=function(){return Ri(Ji)}).raw=Ji,(E.geo.conicConformal=function(){return ci(Qi)}).raw=Qi,(E.geo.conicEquidistant=function(){return ci(tr)}).raw=tr;var er=Ki(function(t){return 1/t},Math.atan);function nr(t,e){return[t,Math.log(Math.tan(xt/4+e/2))]}function ir(t){var r,o=Ri(t),a=o.scale,s=o.translate,l=o.clipExtent;return o.scale=function(){var t=a.apply(o,arguments);return t===o?r?o.clipExtent(null):o:t},o.translate=function(){var t=s.apply(o,arguments);return t===o?r?o.clipExtent(null):o:t},o.clipExtent=function(t){var e,n,i=l.apply(o,arguments);return i===o?(r=null==t)&&(e=xt*a(),n=s(),l([[n[0]-e,n[1]-e],[n[0]+e,n[1]+e]])):r&&(i=null),i},o.clipExtent(null)}(E.geo.gnomonic=function(){return Ri(er)}).raw=er,nr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-wt]},(E.geo.mercator=function(){return ir(nr)}).raw=nr;var rr=Ki(function(){return 1},Math.asin);(E.geo.orthographic=function(){return Ri(rr)}).raw=rr;var or=Ki(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ar(t,e){return[Math.log(Math.tan(xt/4+e/2)),-t]}function sr(t){return t[0]}function lr(t){return t[1]}function hr(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Tt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function ur(t,e){return t[0]-e[0]||t[1]-e[1]}(E.geo.stereographic=function(){return Ri(or)}).raw=or,ar.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-wt]},(E.geo.transverseMercator=function(){var t=ir(ar),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ar,E.geom={},E.geom.hull=function(t){var p=sr,d=lr;return arguments.length?e(t):(e.x=function(t){return arguments.length?(p=t,e):p},e.y=function(t){return arguments.length?(d=t,e):d},e);function e(t){if(t.length<3)return[];for(var e=ne(p),n=ne(d),i=t.length,r=[],o=[],a=0;a<i;a++)r.push([+e.call(this,t[a],a),+n.call(this,t[a],a),a]);for(r.sort(ur),a=0;a<i;a++)o.push([r[a][0],-r[a][1]]);var s=hr(r),l=hr(o),h=l[0]===s[0],u=l[l.length-1]===s[s.length-1],c=[];for(a=s.length-1;0<=a;--a)c.push(t[r[s[a]][2]]);for(a=+h;a<l.length-u;++a)c.push(t[r[l[a]][2]]);return c}},E.geom.polygon=function(t){return Y(t,cr),t};var cr=E.geom.polygon.prototype=[];function pr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function dr(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,t=t[1],n=n[1],e=e[1]-t,i=i[1]-n,s=(s*(t-n)-i*(r-o))/(i*a-s*e);return[r+s*a,t+s*e]}function fr(t){var e=t[0],t=t[t.length-1];return!(e[0]-t[0]||e[1]-t[1])}cr.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},cr.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},cr.clip=function(t){for(var e,n,i,r,o,a,s=fr(t),l=-1,h=this.length-fr(this),u=this[h-1];++l<h;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-s)-1],n=-1;++n<i;)pr(a=e[n],u,r)?(pr(o,u,r)||t.push(dr(o,a,u,r)),t.push(a)):pr(o,u,r)&&t.push(dr(o,a,u,r)),o=a;s&&t.push(t[0]),u=r}return t};var gr,mr,yr,vr,xr,_r=[],br=[];function wr(){Nr(this),this.edge=this.site=this.circle=null}function kr(t){var e=_r.pop()||new wr;return e.site=t,e}function Sr(t){Lr(t),yr.remove(t),_r.push(t),Nr(t)}function Mr(t){for(var e,n,i,r,o=t.x,a=t.y,s=yr._;s;)if((i=Tr(s,a)-o)>vt)s=s.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return Tr(n,e);t=t.site;return t.y===e?t.x:1/0}(s,a))>vt)){-vt<i?(e=s.P,n=s):-vt<r?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var l,h,u,c,p,d,f,g,m,y,v=kr(t);if(yr.insert(e,v),e||n){if(e===n)return Lr(e),n=kr(e.site),yr.insert(v,n),v.edge=n.edge=Er(e.site,v.site),Cr(e),Cr(n),0;n?(Lr(e),Lr(n),h=(l=e.site).x,y=l.y,u=t.x-h,f=t.y-y,p=(c=n.site).x-h,d=c.y-y,Rr(n.edge,l,c,y={x:(d*(g=u*u+f*f)-f*(m=p*p+d*d))/(f=2*(u*d-f*p))+h,y:(u*m-p*g)/f+y}),v.edge=Er(l,t,null,y),n.edge=Er(t,c,null,y),Cr(e),Cr(n)):v.edge=Er(e.site,v.site)}}function Tr(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,t=l-e;if(!t)return s;a=s-i,n=1/o-1/t,e=a/t;return n?(-e+Math.sqrt(e*e-2*n*(a*a/(-2*t)-l+t/2+r-o/2)))/n+i:(i+s)/2}function Ar(t){this.site=t,this.edges=[]}function Pr(t,e){return e.angle-t.angle}function Dr(){Nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,h=i.y-s,u=o.x-a,n=2*(l*(e=o.y-s)-h*u);if(!(-1e-12<=n)){var i=l*l+h*h,o=u*u+e*e,h=(e*i-h*o)/n,n=(l*o-u*i)/n,e=n+s,c=br.pop()||new Dr;c.arc=t,c.site=r,c.x=h+a,c.y=e+Math.sqrt(h*h+n*n),c.cy=e,t.circle=c;for(var p=null,d=xr._;d;)if(c.y<d.y||c.y===d.y&&c.x<=d.x){if(!d.L){p=d.P;break}d=d.L}else{if(!d.R){p=d;break}d=d.R}xr.insert(p,c),p||(vr=c)}}}}function Lr(t){var e=t.circle;e&&(e.P||(vr=e.N),xr.remove(e),br.push(e),Nr(e),t.circle=null)}function Ir(t,e){this.l=t,this.r=e,this.a=this.b=null}function Er(t,e,n,i){var r=new Ir(t,e);return gr.push(r),n&&Rr(r,t,e,n),i&&Rr(r,e,t,i),mr[t.i].edges.push(new Hr(r,t,e)),mr[e.i].edges.push(new Hr(r,e,t)),r}function Rr(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Hr(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Or(){this._=null}function Nr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Yr(t,e){var n=e,i=e.R,e=n.U;e?e.L===n?e.L=i:e.R=i:t._=i,i.U=e,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function zr(t,e){var n=e,i=e.L,e=n.U;e?e.L===n?e.L=i:e.R=i:t._=i,i.U=e,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Fr(t){for(;t.L;)t=t.L;return t}function Xr(t,m){var e,n,i,r=t.sort(Br).pop();for(gr=[],mr=new Array(t.length),yr=new Or,xr=new Or;;)if(i=vr,r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x))r.x===e&&r.y===n||(mr[r.i]=new Ar(r),Mr(r),e=r.x,n=r.y),r=t.pop();else{if(!i)break;!function(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];Sr(t);for(var l=o;l.circle&&L(n-l.circle.x)<vt&&L(i-l.circle.cy)<vt;)o=l.P,s.unshift(l),Sr(l),l=o;s.unshift(l),Lr(l);for(var h=a;h.circle&&L(n-h.circle.x)<vt&&L(i-h.circle.cy)<vt;)a=h.N,s.push(h),Sr(h),h=a;s.push(h),Lr(h);for(var u=s.length,c=1;c<u;++c)h=s[c],l=s[c-1],Rr(h.edge,l.site,h.site,r);l=s[0],(h=s[u-1]).edge=Er(l.site,h.site,null,r),Cr(l),Cr(h)}(i.arc)}m&&(function(t){for(var e,n=gr,i=hi(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)(!function(t,e){var n=t.b;if(n)return 1;var i=t.a,r=e[0][0],o=e[1][0],a=e[0][1],s=e[1][1],l=t.l,h=t.r,u=l.x,c=l.y,p=h.x,e=h.y,l=(u+p)/2;if(e===c){if(l<r||o<=l)return;if(p<u){if(i){if(i.y>=s)return}else i={x:l,y:a};n={x:l,y:s}}else{if(i){if(i.y<a)return}else i={x:l,y:s};n={x:l,y:a}}}else if(l=(c+e)/2-(h=(u-p)/(e-c))*l,h<-1||1<h)if(p<u){if(i){if(i.y>=s)return}else i={x:(a-l)/h,y:a};n={x:(s-l)/h,y:s}}else{if(i){if(i.y<a)return}else i={x:(s-l)/h,y:s};n={x:(a-l)/h,y:a}}else if(c<e){if(i){if(i.x>=o)return}else i={x:r,y:h*r+l};n={x:o,y:h*o+l}}else{if(i){if(i.x<r)return}else i={x:o,y:h*o+l};n={x:r,y:h*r+l}}return t.a=i,t.b=n,1}(e=n[r],t)||!i(e)||L(e.a.x-e.b.x)<vt&&L(e.a.y-e.b.y)<vt)&&(e.a=e.b=null,n.splice(r,1))}(m),function(){for(var t,e,n,i,r,o,a,s,l,h,u=m[0][0],c=m[1][0],p=m[0][1],d=m[1][1],f=mr,g=f.length;g--;)if((i=f[g])&&i.prepare())for(a=(o=i.edges).length,r=0;r<a;)e=(l=o[r].end()).x,n=l.y,h=(s=o[++r%a].start()).x,t=s.y,(L(e-h)>vt||L(n-t)>vt)&&(o.splice(r,0,new Hr((s=i.site,l=l,h=L(e-u)<vt&&vt<d-n?{x:u,y:L(h-u)<vt?t:d}:L(n-d)<vt&&vt<c-e?{x:L(t-d)<vt?h:c,y:d}:L(e-c)<vt&&vt<n-p?{x:c,y:L(h-c)<vt?t:p}:L(n-p)<vt&&vt<e-u?{x:L(t-p)<vt?h:u,y:p}:null,(s=new Ir(s,null)).a=l,s.b=h,gr.push(s),s),i.site,null)),++a)}());var o={cells:mr,edges:gr};return yr=xr=gr=mr=null,o}function Br(t,e){return e.y-t.y||e.x-t.x}Ar.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Pr),e.length},Hr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Or.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Fr(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Yr(this,n),n=(t=n).U),n.C=!1,i.C=!0,zr(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(zr(this,n),n=(t=n).U),n.C=!1,i.C=!0,Yr(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i=t.U,r=t.L,o=t.R,a=r?o?Fr(o):r:o;if(i?i.L===t?i.L=a:i.R=a:this._=a,r&&o?(n=a.C,a.C=t.C,((a.L=r).U=a)!==o?(i=a.U,a.U=t.U,t=a.R,i.L=t,(a.R=o).U=a):(a.U=i,t=(i=a).R)):(n=t.C,t=a),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Yr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,zr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Yr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,zr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Yr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,zr(this,i),t=this._;break}}while(e.C=!0,i=(t=i).U,!t.C);t&&(t.C=!1)}}},E.geom.voronoi=function(t){var e=sr,n=lr,i=e,r=n,h=Ur;return t?o(t):(o.links=function(e){return Xr(p(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(u){var c=[];return Xr(p(u)).cells.forEach(function(t,e){for(var n,i,r=t.site,o=t.edges.sort(Pr),a=-1,s=o.length,l=o[s-1].edge,h=l.l===r?l.r:l.l;++a<s;)n=h,h=(l=o[a].edge).l===r?l.r:l.l,e<n.i&&e<h.i&&(i=h,(r.x-i.x)*(n.y-r.y)-(r.x-n.x)*(i.y-r.y)<0)&&c.push([u[e],u[n.i],u[h.i]])}),c},o.x=function(t){return arguments.length?(i=ne(e=t),o):e},o.y=function(t){return arguments.length?(r=ne(n=t),o):n},o.clipExtent=function(t){return arguments.length?(h=null==t?Ur:t,o):h===Ur?null:h},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):h===Ur?null:h&&h[1]},o);function o(i){var r=new Array(i.length),o=h[0][0],a=h[0][1],s=h[1][0],l=h[1][1];return Xr(p(i),h).cells.forEach(function(t,e){var n=t.edges,t=t.site;(r[e]=n.length?n.map(function(t){t=t.start();return[t.x,t.y]}):t.x>=o&&t.x<=s&&t.y>=a&&t.y<=l?[[o,l],[s,l],[s,a],[o,a]]:[]).point=i[e]}),r}function p(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/vt)*vt,y:Math.round(r(t,e)/vt)*vt,i:e}})}};var Ur=[[-1e6,-1e6],[1e6,1e6]];function Wr(t){return t.x}function Gr(t){return t.y}function Vr(t,e){t=E.rgb(t),e=E.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+qt(Math.round(n+o*t))+qt(Math.round(i+a*t))+qt(Math.round(r+s*t))}}function jr(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Jr(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function $r(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function qr(t,i){var e,n,r,o=Kr.lastIndex=Zr.lastIndex=0,a=-1,s=[],l=[];for(t+="",i+="";(e=Kr.exec(t))&&(n=Zr.exec(i));)(r=n.index)>o&&(r=i.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(e=e[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:$r(e,n)})),o=Zr.lastIndex;return o<i.length&&(r=i.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(i=l[0].x,function(t){return i(t)+""}):function(){return i}:(i=l.length,function(t){for(var e,n=0;n<i;++n)s[(e=l[n]).i]=e.x(t);return s.join("")})}E.geom.delaunay=function(t){return E.geom.voronoi().triangles(t)},E.geom.quadtree=function(t,v,x,_,w){var k,S=sr,M=lr;return(k=arguments.length)?(S=Wr,M=Gr,3===k&&(w=x,_=v,x=v=0),e(t)):(e.x=function(t){return arguments.length?(S=t,e):S},e.y=function(t){return arguments.length?(M=t,e):M},e.extent=function(t){return arguments.length?(null==t?v=x=_=w=null:(v=+t[0][0],x=+t[0][1],_=+t[1][0],w=+t[1][1]),e):null==v?null:[[v,x],[_,w]]},e.size=function(t){return arguments.length?(null==t?v=x=_=w=null:(v=x=0,_=+t[0],w=+t[1]),e):null==v?null:[_-v,w-x]},e);function e(t){var e,n,i,r,o,a,s,l,h=ne(S),u=ne(M);if(null!=v)o=v,a=x,s=_,l=w;else if(s=l=-(o=a=1/0),n=[],i=[],r=t.length,k)for(y=0;y<r;++y)(e=t[y]).x<o&&(o=e.x),e.y<a&&(a=e.y),e.x>s&&(s=e.x),e.y>l&&(l=e.y),n.push(e.x),i.push(e.y);else for(y=0;y<r;++y){var c=+h(e=t[y],y),p=+u(e,y);c<o&&(o=c),p<a&&(a=p),s<c&&(s=c),l<p&&(l=p),n.push(c),i.push(p)}var d=s-o,f=l-a;function g(t,e,n,i,r,o,a,s){var l,h,u;isNaN(n)||isNaN(i)||(t.leaf?(l=t.x,h=t.y,null!=l?(L(l-n)+L(h-i)<.01||(u=t.point,t.x=t.y=t.point=null,m(t,u,l,h,r,o,a,s)),m(t,e,n,i,r,o,a,s)):(t.x=n,t.y=i,t.point=e)):m(t,e,n,i,r,o,a,s))}function m(t,e,n,i,r,o,a,s){var l=.5*(r+a),h=.5*(o+s),u=l<=n,c=h<=i,p=c<<1|u;t.leaf=!1,u?r=l:a=l,c?o=h:s=h,g(t=t.nodes[p]||(t.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,o,a,s)}f<d?l=a+d:s=o+f;var b={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){g(b,t,+h(t,++y),+u(t,y),o,a,s,l)},visit:function(t){!function t(e,n,i,r,o,a){var s,l;e(n,i,r,o,a)||(s=.5*(i+o),l=.5*(r+a),(n=n.nodes)[0]&&t(e,n[0],i,r,s,l),n[1]&&t(e,n[1],s,r,o,l),n[2]&&t(e,n[2],i,l,s,a),n[3]&&t(e,n[3],s,l,o,a))}(t,b,o,a,s,l)},find:function(t){return d=t[0],f=t[1],_=1/0,function t(e,n,i,r,o){if(!(y<n||v<i||r<g||o<m)){var a,s;!(a=e.point)||(s=(s=d-e.x)*s+(s=f-e.y)*s)<_&&(s=Math.sqrt(_=s),g=d-s,m=f-s,y=d+s,v=f+s,x=a);for(var l=e.nodes,h=.5*(n+r),u=.5*(i+o),c=(u<=f)<<1|h<=d,p=c+4;c<p;++c)if(e=l[3&c])switch(3&c){case 0:t(e,n,i,h,u);break;case 1:t(e,h,i,r,u);break;case 2:t(e,n,u,h,o);break;case 3:t(e,h,u,r,o)}}}(b,g=o,m=a,y=s,v=l),x;var d,f,g,m,y,v,x,_}},y=-1;if(null==v){for(;++y<r;)g(b,t[y],n[y],i[y],o,a,s,l);--y}else t.forEach(b.add);return n=i=t=e=null,b}},E.interpolateRgb=Vr,E.interpolateObject=jr,E.interpolateNumber=$r,E.interpolateString=qr;var Kr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zr=new RegExp(Kr.source,"g");function Jr(t,e){for(var n,i=E.interpolators.length;0<=--i&&!(n=E.interpolators[i](t,e)););return n}function Qr(t,e){for(var n=[],i=[],r=t.length,o=e.length,a=Math.min(t.length,e.length),s=0;s<a;++s)n.push(Jr(t[s],e[s]));for(;s<r;++s)i[s]=t[s];for(;s<o;++s)i[s]=e[s];return function(t){for(s=0;s<a;++s)i[s]=n[s](t);return i}}E.interpolate=Jr,E.interpolators=[function(t,e){var n=typeof e;return("string"==n?ee.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Vr:qr:e instanceof Ht?Vr:Array.isArray(e)?Qr:"object"==n&&isNaN(e)?jr:$r)(t,e)}],E.interpolateArray=Qr;function to(){return C}var eo=E.map({linear:to,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return oo},cubic:function(){return ao},sin:function(){return lo},exp:function(){return ho},circle:function(){return uo},elastic:function(e,n){var i;return arguments.length<2&&(n=.45),i=arguments.length?n/_t*Math.asin(1/e):(e=1,n/4),function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*_t/n)}},back:function(e){return e=e||1.70158,function(t){return t*t*((e+1)*t-e)}},bounce:function(){return co}}),no=E.map({in:C,out:io,"in-out":ro,"out-in":function(t){return ro(io(t))}});function io(e){return function(t){return 1-e(1-t)}}function ro(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function oo(t){return t*t}function ao(t){return t*t*t}function so(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function lo(t){return 1-Math.cos(t*wt)}function ho(t){return Math.pow(2,10*(t-1))}function uo(t){return 1-Math.sqrt(1-t*t)}function co(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function po(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function fo(t){var e,n=[t.a,t.b],i=[t.c,t.d],r=mo(n),o=go(n,i),a=mo(((a=i)[0]+=(e=-o)*n[0],a[1]+=e*n[1],a))||0;n[0]*i[1]<i[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-i[0],i[1]))*St,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(o,a)*St:0}function go(t,e){return t[0]*e[0]+t[1]*e[1]}function mo(t){var e=Math.sqrt(go(t,t));return e&&(t[0]/=e,t[1]/=e),e}E.ease=function(t){var e,n=t.indexOf("-"),i=0<=n?t.slice(0,n):t,n=0<=n?t.slice(n+1):"in",i=eo.get(i)||to;return e=(n=no.get(n)||C)(i.apply(null,r.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},E.interpolateHcl=function(t,e){t=E.hcl(t),e=E.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):180<o?o-=360:o<-180&&(o+=360),function(t){return zt(n+o*t,i+a*t,r+s*t)+""}},E.interpolateHsl=function(t,e){t=E.hsl(t),e=E.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):180<o?o-=360:o<-180&&(o+=360),function(t){return Nt(n+o*t,i+a*t,r+s*t)+""}},E.interpolateLab=function(t,e){t=E.lab(t),e=E.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return Bt(n+o*t,i+a*t,r+s*t)+""}},E.interpolateRound=po,E.transform=function(t){var n=R.createElementNS(E.ns.prefix.svg,"g");return(E.transform=function(t){var e;return null!=t&&(n.setAttribute("transform",t),e=n.transform.baseVal.consolidate()),new fo(e?e.matrix:yo)})(t)},fo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yo={a:1,b:0,c:0,d:1,e:0,f:0};function vo(t,e){var i,r=[],o=[],n=E.transform(t),a=E.transform(e),s=n.translate,l=a.translate,h=n.rotate,u=a.rotate,t=n.skew,e=a.skew,n=n.scale,a=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:$r(s[0],l[0])},{i:3,x:$r(s[1],l[1])})):l[0]||l[1]?r.push("translate("+l+")"):r.push(""),h!=u?(180<h-u?u+=360:180<u-h&&(h+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:$r(h,u)})):u&&r.push(r.pop()+"rotate("+u+")"),t!=e?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:$r(t,e)}):e&&r.push(r.pop()+"skewX("+e+")"),n[0]!=a[0]||n[1]!=a[1]?(i=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:i-4,x:$r(n[0],a[0])},{i:i-2,x:$r(n[1],a[1])})):1==a[0]&&1==a[1]||r.push(r.pop()+"scale("+a+")"),i=o.length,function(t){for(var e,n=-1;++n<i;)r[(e=o[n]).i]=e.x(t);return r.join("")}}function xo(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function _o(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function bo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function wo(t){t.fixed|=2}function ko(t){t.fixed&=-7}function So(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Mo(t){t.fixed&=-5}E.interpolateTransform=vo,E.layout={},E.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(function(t){for(var a=t.source,e=t.target,n=function(t){if(a===t)return a;for(var e=bo(a),n=bo(t),i=e.pop(),r=n.pop(),o=null;i===r;)o=i,i=e.pop(),r=n.pop();return o}(e),i=[a];a!==n;)a=a.parent,i.push(a);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}(t[n]));return e}},E.layout.chord=function(){var m,y,v,x,_,b,w,e={},k=0;function t(){var t,e,n,i,r,o={},a=[],s=E.range(x),l=[];for(m=[],y=[],t=0,i=-1;++i<x;){for(e=0,r=-1;++r<x;)e+=v[i][r];a.push(e),l.push(E.range(x)),t+=e}for(_&&s.sort(function(t,e){return _(a[t],a[e])}),b&&l.forEach(function(t,n){t.sort(function(t,e){return b(v[n][t],v[n][e])})}),t=(_t-k*x)/t,e=0,i=-1;++i<x;){for(n=e,r=-1;++r<x;){var h=s[i],u=l[h][r],c=v[h][u],p=e,d=e+=c*t;o[h+"-"+u]={index:h,subindex:u,startAngle:p,endAngle:d,value:c}}y[h]={index:h,startAngle:n,endAngle:e,value:(e-n)/t},e+=k}for(i=-1;++i<x;)for(r=i-1;++r<x;){var f=o[i+"-"+r],g=o[r+"-"+i];(f.value||g.value)&&m.push(f.value<g.value?{source:g,target:f}:{source:f,target:g})}w&&S()}function S(){m.sort(function(t,e){return w((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(x=(v=t)&&v.length,m=y=null,e):v},e.padding=function(t){return arguments.length?(k=t,m=y=null,e):k},e.sortGroups=function(t){return arguments.length?(_=t,m=y=null,e):_},e.sortSubgroups=function(t){return arguments.length?(b=t,m=null,e):b},e.sortChords=function(t){return arguments.length?(w=t,m&&S(),e):w},e.chords=function(){return m||t(),m},e.groups=function(){return y||t(),y},e},E.layout.force=function(){var t,c,p,d,f,r={},g=E.dispatch("start","tick","end"),m=[1,1],y=.9,o=To,a=Ao,v=-30,x=Po,_=.1,b=.64,w=[],k=[];function e(t){t.px=E.event.x,t.py=E.event.y,r.resume()}return r.tick=function(){if((c*=.99)<.005)return g.end({type:"end",alpha:c=0}),!0;for(var t,e,n,i,r,o,a,s,l=w.length,h=k.length,u=0;u<h;++u)n=(e=k[u]).source,(r=(a=(i=e.target).x-n.x)*a+(s=i.y-n.y)*s)&&(a*=r=c*d[u]*((r=Math.sqrt(r))-p[u])/r,s*=r,i.x-=a*(o=n.weight/(i.weight+n.weight)),i.y-=s*o,n.x+=a*(o=1-o),n.y+=s*o);if((o=c*_)&&(a=m[0]/2,s=m[1]/2,u=-1,o))for(;++u<l;)(e=w[u]).x+=(a-e.x)*o,e.y+=(s-e.y)*o;if(v)for(function t(e,n,i){var r,o=0,a=0;if(e.charge=0,!e.leaf)for(var s,l=e.nodes,h=l.length,u=-1;++u<h;)null!=(s=l[u])&&(t(s,n,i),e.charge+=s.charge,o+=s.charge*s.cx,a+=s.charge*s.cy);e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),r=n*i[e.point.index],e.charge+=e.pointCharge=r,o+=r*e.point.x,a+=r*e.point.y),e.cx=o/e.charge,e.cy=a/e.charge}(t=E.geom.quadtree(w),c,f),u=-1;++u<l;)(e=w[u]).fixed||t.visit(function(s){return function(t,e,n,i){if(t.point!==s){var r,o=t.cx-s.x,a=t.cy-s.y,i=i-e,e=o*o+a*a;if(i*i/b<e)return e<x&&(r=t.charge/e,s.px-=o*r,s.py-=a*r),!0;t.point&&e&&e<x&&(r=t.pointCharge/e,s.px-=o*r,s.py-=a*r)}return!t.charge}}(e));for(u=-1;++u<l;)(e=w[u]).fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*y,e.y-=(e.py-(e.py=e.y))*y);g.tick({type:"tick",alpha:c})},r.nodes=function(t){return arguments.length?(w=t,r):w},r.links=function(t){return arguments.length?(k=t,r):k},r.size=function(t){return arguments.length?(m=t,r):m},r.linkDistance=function(t){return arguments.length?(o="function"==typeof t?t:+t,r):o},r.distance=r.linkDistance,r.linkStrength=function(t){return arguments.length?(a="function"==typeof t?t:+t,r):a},r.friction=function(t){return arguments.length?(y=+t,r):y},r.charge=function(t){return arguments.length?(v="function"==typeof t?t:+t,r):v},r.chargeDistance=function(t){return arguments.length?(x=t*t,r):Math.sqrt(x)},r.gravity=function(t){return arguments.length?(_=+t,r):_},r.theta=function(t){return arguments.length?(b=t*t,r):Math.sqrt(b)},r.alpha=function(t){return arguments.length?(t=+t,c?c=0<t?t:0:0<t&&(g.start({type:"start",alpha:c=t}),E.timer(r.tick)),r):c},r.start=function(){for(var s,t,l=w.length,h=k.length,e=m[0],n=m[1],u=0;u<l;++u)(t=w[u]).index=u,t.weight=0;for(u=0;u<h;++u)"number"==typeof(t=k[u]).source&&(t.source=w[t.source]),"number"==typeof t.target&&(t.target=w[t.target]),++t.source.weight,++t.target.weight;for(u=0;u<l;++u)t=w[u],isNaN(t.x)&&(t.x=i("x",e)),isNaN(t.y)&&(t.y=i("y",n)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(p=[],"function"==typeof o)for(u=0;u<h;++u)p[u]=+o.call(this,k[u],u);else for(u=0;u<h;++u)p[u]=o;if(d=[],"function"==typeof a)for(u=0;u<h;++u)d[u]=+a.call(this,k[u],u);else for(u=0;u<h;++u)d[u]=a;if(f=[],"function"==typeof v)for(u=0;u<l;++u)f[u]=+v.call(this,w[u],u);else for(u=0;u<l;++u)f[u]=v;function i(t,e){if(!s){for(s=new Array(l),o=0;o<l;++o)s[o]=[];for(o=0;o<h;++o){var n=k[o];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var i,r=s[u],o=-1,a=r.length;++o<a;)if(!isNaN(i=r[o][t]))return i;return Math.random()*e}return r.resume()},r.resume=function(){return r.alpha(.1)},r.stop=function(){return r.alpha(0)},r.drag=function(){if(t=t||E.behavior.drag().origin(C).on("dragstart.force",wo).on("drag.force",e).on("dragend.force",ko),!arguments.length)return t;this.on("mouseover.force",So).on("mouseout.force",Mo).call(t)},E.rebind(r,g,"on")};var To=20,Ao=1,Po=1/0;function Do(t,e){return E.rebind(t,e,"sort","children","value"),(t.nodes=t).links=Ho,t}function Co(t,e){for(var n,i,r=[t];null!=(t=r.pop());)if(e(t),(i=t.children)&&(n=i.length))for(;0<=--n;)r.push(i[n])}function Lo(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function Io(t){return t.children}function Eo(t){return t.value}function Ro(t,e){return e.value-t.value}function Ho(t){return E.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}E.layout.hierarchy=function(){var s=Ro,l=Io,h=Eo;function u(t){var e,n,i,r,o=[t],a=[];for(t.depth=0;null!=(e=o.pop());)if(a.push(e),(i=l.call(u,e,e.depth))&&(n=i.length)){for(;0<=--n;)o.push(r=i[n]),r.parent=e,r.depth=e.depth+1;h&&(e.value=0),e.children=i}else h&&(e.value=+h.call(u,e,e.depth)||0),delete e.children;return Lo(t,function(t){var e,n;s&&(e=t.children)&&e.sort(s),h&&(n=t.parent)&&(n.value+=t.value)}),a}return u.sort=function(t){return arguments.length?(s=t,u):s},u.children=function(t){return arguments.length?(l=t,u):l},u.value=function(t){return arguments.length?(h=t,u):h},u.revalue=function(t){return h&&(Co(t,function(t){t.children&&(t.value=0)}),Lo(t,function(t){var e;t.children||(t.value=+h.call(u,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},u},E.layout.partition=function(){var n=E.layout.hierarchy(),i=[1,1];function e(t,e){e=n.call(this,t,e);return function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,l=-1;for(i=e.value?i/e.value:0;++l<a;)t(s=o[l],n,s=s.value*i,r),n+=s}}(e[0],0,i[0],i[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,t(n[o]));return 1+i}(e[0])),e}return e.size=function(t){return arguments.length?(i=t,e):i},Do(e,n)},E.layout.pie=function(){var u=Number,c=Oo,p=0,d=_t,f=0;function g(n){var e,t=n.length,i=n.map(function(t,e){return+u.call(g,t,e)}),r=+("function"==typeof p?p.apply(this,arguments):p),o=("function"==typeof d?d.apply(this,arguments):d)-r,a=Math.min(Math.abs(o)/t,+("function"==typeof f?f.apply(this,arguments):f)),s=a*(o<0?-1:1),l=(o-t*s)/E.sum(i),t=E.range(t),h=[];return null!=c&&t.sort(c===Oo?function(t,e){return i[e]-i[t]}:function(t,e){return c(n[t],n[e])}),t.forEach(function(t){h[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*l+s,padAngle:a}}),h}return g.value=function(t){return arguments.length?(u=t,g):u},g.sort=function(t){return arguments.length?(c=t,g):c},g.startAngle=function(t){return arguments.length?(p=t,g):p},g.endAngle=function(t){return arguments.length?(d=t,g):d},g.padAngle=function(t){return arguments.length?(f=t,g):f},g};var Oo={};function No(t){return t.x}function Yo(t){return t.y}function zo(t,e,n){t.y0=e,t.y=n}E.layout.stack=function(){var c=C,p=Bo,d=Uo,f=zo,g=No,m=Yo;function y(t,e){if(!(n=t.length))return t;for(var n,i,r,o=(s=t.map(function(t,e){return c.call(y,t,e)})).map(function(t){return t.map(function(t,e){return[g.call(y,t,e),m.call(y,t,e)]})}),a=p.call(y,o,e),s=E.permute(s,a),o=E.permute(o,a),l=d.call(y,o,e),h=s[0].length,u=0;u<h;++u)for(f.call(y,s[0][u],r=l[u],o[0][u][1]),i=1;i<n;++i)f.call(y,s[i][u],r+=o[i-1][u][1],o[i][u][1]);return t}return y.values=function(t){return arguments.length?(c=t,y):c},y.order=function(t){return arguments.length?(p="function"==typeof t?t:Fo.get(t)||Bo,y):p},y.offset=function(t){return arguments.length?(d="function"==typeof t?t:Xo.get(t)||Uo,y):d},y.x=function(t){return arguments.length?(g=t,y):g},y.y=function(t){return arguments.length?(m=t,y):m},y.out=function(t){return arguments.length?(f=t,y):f},y};var Fo=E.map({"inside-out":function(t){for(var e,n=t.length,i=t.map(Wo),r=t.map(Go),o=E.range(n).sort(function(t,e){return i[t]-i[e]}),a=0,s=0,l=[],h=[],u=0;u<n;++u)e=o[u],a<s?(a+=r[e],l.push(e)):(s+=r[e],h.push(e));return h.reverse().concat(l)},reverse:function(t){return E.range(t.length).reverse()},default:Bo}),Xo=E.map({silhouette:function(t){for(var e,n,i=t.length,r=t[0].length,o=[],a=0,s=[],l=0;l<r;++l){for(n=e=0;e<i;e++)n+=t[e][l][1];a<n&&(a=n),o.push(n)}for(l=0;l<r;++l)s[l]=(a-o[l])/2;return s},wiggle:function(t){var e,n,i,r,o,a,s,l,h,u=t.length,c=t[0],p=c.length,d=[];for(d[0]=l=h=0,n=1;n<p;++n){for(r=e=0;e<u;++e)r+=t[e][n][1];for(s=c[n][o=e=0]-c[n-1][0];e<u;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}d[n]=l-=r?o/r*s:0,l<h&&(h=l)}for(n=0;n<p;++n)d[n]-=h;return d},expand:function(t){for(var e,n,i=t.length,r=t[0].length,o=1/i,a=[],s=0;s<r;++s){for(n=e=0;e<i;e++)n+=t[e][s][1];if(n)for(e=0;e<i;e++)t[e][s][1]/=n;else for(e=0;e<i;e++)t[e][s][1]=o}for(s=0;s<r;++s)a[s]=0;return a},zero:Uo});function Bo(t){return E.range(t.length)}function Uo(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Wo(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function Go(t){return t.reduce(Vo,0)}function Vo(t,e){return t+e[1]}function jo(t,e){return $o(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function $o(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function qo(t){return[E.min(t),E.max(t)]}function Ko(t,e){return t.value-e.value}function Zo(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function Jo(t,e){(t._pack_next=e)._pack_prev=t}function Qo(t,e){var n=e.x-t.x,i=e.y-t.y,e=t.r+e.r;return n*n+i*i<.999*e*e}function ta(t){if((e=t.children)&&(a=e.length)){var e,n,i,r,o,a,s=1/0,l=-1/0,h=1/0,u=-1/0;if(e.forEach(ea),(n=e[0]).x=-n.r,n.y=0,x(n),1<a&&((i=e[1]).x=i.r,i.y=0,x(i),2<a))for(ia(n,i,r=e[2]),x(r),Zo(n,r),Zo(n._pack_prev=r,i),i=n._pack_next,v=3;v<a;v++){ia(n,i,r=e[v]);for(var c=0,p=1,d=1,f=i._pack_next;f!==i;f=f._pack_next,p++)if(Qo(f,r)){c=1;break}if(1==c)for(o=n._pack_prev;o!==f._pack_prev&&!Qo(o,r);o=o._pack_prev,d++);c?(p<d||p==d&&i.r<n.r?Jo(n,i=f):Jo(n=o,i),v--):(Zo(n,r),x(i=r))}for(var g=(s+l)/2,m=(h+u)/2,y=0,v=0;v<a;v++)(r=e[v]).x-=g,r.y-=m,y=Math.max(y,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=y,e.forEach(na)}function x(t){s=Math.min(t.x-t.r,s),l=Math.max(t.x+t.r,l),h=Math.min(t.y-t.r,h),u=Math.max(t.y+t.r,u)}}function ea(t){t._pack_next=t._pack_prev=t}function na(t){delete t._pack_next,delete t._pack_prev}function ia(t,e,n){var i,r,o=t.r+n.r,a=e.x-t.x,s=e.y-t.y;o&&(a||s)?(i=e.r+n.r,e=.5+((o*=o)-(i*=i))/(2*(r=a*a+s*s)),r=Math.sqrt(Math.max(0,2*i*(o+r)-(o-=r)*o-i*i))/(2*r),n.x=t.x+e*a+r*s,n.y=t.y+e*s-r*a):(n.x=t.x+o,n.y=t.y)}function ra(t,e){return t.parent==e.parent?1:2}function oa(t){var e=t.children;return e.length?e[0]:t.t}function aa(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function sa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function la(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],e=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),e<0&&(i+=e/2,e=0),{x:n,y:i,dx:r,dy:e}}function ha(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]}function ua(t){return t.rangeExtent?t.rangeExtent():ha(t.range())}function ca(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function pa(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}E.layout.histogram=function(){var c=!0,p=Number,d=qo,f=jo;function n(t,e){for(var n,i,r=[],o=t.map(p,this),a=d.call(this,o,e),s=f.call(this,a,o,e),l=(e=-1,o.length),h=s.length-1,u=c?1:1/l;++e<h;)(n=r[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<h)for(e=-1;++e<l;)(i=o[e])>=a[0]&&i<=a[1]&&((n=r[E.bisect(s,i,1,h)-1]).y+=u,n.push(t[e]));return r}return n.value=function(t){return arguments.length?(p=t,n):p},n.range=function(t){return arguments.length?(d=ne(t),n):d},n.bins=function(e){return arguments.length?(f="number"==typeof e?function(t){return $o(t,e)}:ne(e),n):f},n.frequency=function(t){return arguments.length?(c=!!t,n):c},n},E.layout.pack=function(){var a,s=E.layout.hierarchy().sort(Ko),l=0,h=[1,1];function e(t,e){var n,i=s.call(this,t,e),r=i[0],t=h[0],e=h[1],o=null==a?Math.sqrt:"function"==typeof a?a:function(){return a};return r.x=r.y=0,Lo(r,function(t){t.r=+o(t.value)}),Lo(r,ta),l&&(n=l*(a?1:Math.max(2*r.r/t,2*r.r/e))/2,Lo(r,function(t){t.r+=n}),Lo(r,ta),Lo(r,function(t){t.r-=n})),function t(e,n,i,r){var o=e.children;if(e.x=n+=r*e.x,e.y=i+=r*e.y,e.r*=r,o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,i,r)}(r,t/2,e/2,a?1:1/Math.max(2*r.r/t,2*r.r/e)),i}return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(a=null==t||"function"==typeof t?t:+t,e):a},e.padding=function(t){return arguments.length?(l=+t,e):l},Do(e,s)},E.layout.tree=function(){var h=E.layout.hierarchy().sort(null).value(null),m=ra,u=[1,1],c=null;function e(t,e){var n,i,r,o,a,s,t=h.call(this,t,e),l=t[0],e=function(){for(var t,e={A:null,children:[l]},n=[e];null!=(t=n.pop());)for(var i,r=t.children,o=0,a=r.length;o<a;++o)n.push((r[o]=i={_:r[o],parent:t,children:(i=r[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return e.children[0]}();return Lo(e,p),e.parent.m=-e.z,Co(e,d),c?Co(l,f):(Co(r=i=n=l,function(t){t.x<n.x&&(n=t),t.x>i.x&&(i=t),t.depth>r.depth&&(r=t)}),o=m(n,i)/2-n.x,a=u[0]/(i.x+m(i,n)/2+o),s=u[1]/(r.depth||1),Co(l,function(t){t.x=(t.x+o)*a,t.y=t.depth*s})),t}function p(o){var t=o.children,e=o.parent.children,g=o.i?e[o.i-1]:null;t.length?(function(){for(var t,e=0,n=0,i=o.children,r=i.length;0<=--r;)(t=i[r]).z+=e,t.m+=e,e+=t.s+(n+=t.c)}(),t=(t[0].z+t[t.length-1].z)/2,g?(o.z=g.z+m(o._,g._),o.m=o.z-t):o.z=t):g&&(o.z=g.z+m(o._,g._)),o.parent.A=function(t,e){if(g){for(var n,i=t,r=t,o=g,a=i.parent.children[0],s=i.m,l=r.m,h=o.m,u=a.m;o=aa(o),i=oa(i),o&&i;)a=oa(a),(r=aa(r)).a=t,0<(n=o.z+h-i.z-s+m(o._,i._))&&(f=e,c=(d=o).a.parent===t.parent?d.a:f,p=void 0,p=(d=n)/((f=t).i-c.i),f.c-=p,f.s+=d,c.c+=p,f.z+=d,f.m+=d,s+=n,l+=n),h+=o.m,s+=i.m,u+=a.m,l+=r.m;o&&!aa(r)&&(r.t=o,r.m+=h-l),i&&!oa(a)&&(a.t=i,a.m+=s-u,e=t)}var c,p,d,f;return e}(o,o.parent.A||e[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function f(t){t.x*=u[0],t.y=t.depth*u[1]}return e.separation=function(t){return arguments.length?(m=t,e):m},e.size=function(t){return arguments.length?(c=null==(u=t)?f:null,e):c?null:u},e.nodeSize=function(t){return arguments.length?(c=null==(u=t)?null:f,e):c?u:null},Do(e,h)},E.layout.cluster=function(){var l=E.layout.hierarchy().sort(null).value(null),h=ra,u=[1,1],c=!1;function e(t,e){var i,n=l.call(this,t,e),r=n[0],o=0;Lo(r,function(t){var e,n=t.children;n&&n.length?(t.x=(e=n).reduce(function(t,e){return t+e.x},0)/e.length,t.y=1+E.max(n,function(t){return t.y})):(t.x=i?o+=h(t,i):0,t.y=0,i=t)});var t=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(r),e=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(r),a=t.x-h(t,e)/2,s=e.x+h(e,t)/2;return Lo(r,c?function(t){t.x=(t.x-r.x)*u[0],t.y=(r.y-t.y)*u[1]}:function(t){t.x=(t.x-a)/(s-a)*u[0],t.y=(1-(r.y?t.y/r.y:1))*u[1]}),n}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(c=null==(u=t),e):c?null:u},e.nodeSize=function(t){return arguments.length?(c=null!=(u=t),e):c?u:null},Do(e,l)},E.layout.treemap=function(){var n,i=E.layout.hierarchy(),u=Math.round,r=[1,1],o=null,h=sa,a=!1,c="squarify",p=.5*(1+Math.sqrt(5));function d(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function f(t){var e=t.children;if(e&&e.length){var n,i,r=h(t),o=[],a=e.slice(),s=1/0,l="slice"===c?r.dx:"dice"===c?r.dy:"slice-dice"===c?1&t.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(d(a,r.dx*r.dy/t.value),o.area=0;0<(i=a.length);)o.push(i=a[i-1]),o.area+=i.area,s="squarify"!==c||(n=function(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),r<n&&(r=n));return e*=e,(i*=i)?Math.max(e*r*p/i,i/(e*o*p)):1/0}(o,l))<=s?(a.pop(),n):(o.area-=o.pop().area,g(o,l,r,!1),l=Math.min(r.dx,r.dy),1/(o.length=o.area=0));o.length&&(g(o,l,r,!0),o.length=o.area=0),e.forEach(f)}}function s(t){var e=t.children;if(e&&e.length){var n,i=h(t),r=e.slice(),o=[];for(d(r,i.dx*i.dy/t.value),o.area=0;n=r.pop();)o.push(n),o.area+=n.area,null!=n.z&&(g(o,n.z?i.dx:i.dy,i,!r.length),o.length=o.area=0);e.forEach(s)}}function g(t,e,n,i){var r,o=-1,a=t.length,s=n.x,l=n.y,h=e?u(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);++o<a;)(r=t[o]).x=s,r.y=l,r.dy=h,s+=r.dx=Math.min(n.x+n.dx-s,h?u(r.area/h):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);++o<a;)(r=t[o]).x=s,r.y=l,r.dx=h,l+=r.dy=Math.min(n.y+n.dy-l,h?u(r.area/h):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=h,n.dx-=h}}function l(t){var e=n||i(t),t=e[0];return t.x=0,t.y=0,t.dx=r[0],t.dy=r[1],n&&i.revalue(t),d([t],t.dx*t.dy/t.value),(n?s:f)(t),a&&(n=e),e}return l.size=function(t){return arguments.length?(r=t,l):r},l.padding=function(n){return arguments.length?(h=null==(o=n)?sa:"function"==(e=typeof n)?function(t){var e=n.call(l,t,t.depth);return null==e?sa(t):la(t,"number"==typeof e?[e,e,e,e]:e)}:("number"==e&&(n=[n,n,n,n]),t),l):o;function t(t){return la(t,n)}var e},l.round=function(t){return arguments.length?(u=t?Math.round:Number,l):u!=Number},l.sticky=function(t){return arguments.length?(a=t,n=null,l):a},l.ratio=function(t){return arguments.length?(p=t,l):p},l.mode=function(t){return arguments.length?(c=t+"",l):c},Do(l,i)},E.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=E.random.normal.apply(E,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=E.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},E.scale={};var da={floor:C,ceil:C};function fa(n,t,e,i){var r=[],o=[],a=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=s;)r.push(e(n[a-1],n[a])),o.push(i(t[a-1],t[a]));return function(t){var e=E.bisect(n,t,1,s)-1;return o[e](r[e](t))}}function ga(t,e){return E.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ma(t,e){return pa(t,(n=ya(t,e)[2])?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:da);var n}function ya(t,e){null==e&&(e=10);var n=ha(t),i=n[1]-n[0],t=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),i=e/i*t;return i<=.15?t*=10:i<=.35?t*=5:i<=.75&&(t*=2),n[0]=Math.ceil(n[0]/t)*t,n[1]=Math.floor(n[1]/t)*t+.5*t,n[2]=t,n}function va(t,e){return E.range.apply(E,ya(t,e))}function xa(t,e,n){var i,r=ya(t,e);if(n){var o=me.exec(n);if(o.shift(),"s"===o[8]){var a=E.formatPrefix(Math.max(L(r[0]),L(r[1])));return o[7]||(o[7]="."+ba(a.scale(r[2]))),o[8]="f",n=E.format(o.join("")),function(t){return n(a.scale(t))+a.symbol}}o[7]||(o[7]="."+(i=o[8],e=ba((t=r)[2]),i in _a?Math.abs(e-ba(Math.max(L(t[0]),L(t[1]))))+ +("e"!==i):e-2*("%"===i))),n=o.join("")}else n=",."+ba(r[2])+"f";return E.format(n)}E.scale.linear=function(){return function t(n,i,r,o){var a,s;function e(){var t=2<Math.min(n.length,i.length)?fa:ca,e=o?_o:xo;return a=t(n,i,e,r),s=t(i,n,e,Jr),l}function l(t){return a(t)}return l.invert=function(t){return s(t)},l.domain=function(t){return arguments.length?(n=t.map(Number),e()):n},l.range=function(t){return arguments.length?(i=t,e()):i},l.rangeRound=function(t){return l.range(t).interpolate(po)},l.clamp=function(t){return arguments.length?(o=t,e()):o},l.interpolate=function(t){return arguments.length?(r=t,e()):r},l.ticks=function(t){return va(n,t)},l.tickFormat=function(t,e){return xa(n,t,e)},l.nice=function(t){return ma(n,t),e()},l.copy=function(){return t(n,i,r,o)},e()}([0,1],[0,1],Jr,!1)};var _a={s:1,g:1,p:1,r:1,e:1};function ba(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}E.scale.log=function(){return function t(e,l,h,u){function c(t){return(h?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function p(t){return h?Math.pow(l,t):-Math.pow(l,-t)}function o(t){return e(c(t))}return o.invert=function(t){return p(e.invert(t))},o.domain=function(t){return arguments.length?(h=0<=t[0],e.domain((u=t.map(Number)).map(c)),o):u},o.base=function(t){return arguments.length?(l=+t,e.domain(u.map(c)),o):l},o.nice=function(){var t=pa(u.map(c),h?Math:ka);return e.domain(t),u=t.map(p),o},o.ticks=function(){var t=ha(u),e=[],n=t[0],i=t[1],r=Math.floor(c(n)),o=Math.ceil(c(i)),a=l%1?2:l;if(isFinite(o-r)){if(h){for(;r<o;r++)for(var s=1;s<a;s++)e.push(p(r)*s);e.push(p(r))}else for(e.push(p(r));r++<o;)for(s=a-1;0<s;s--)e.push(p(r)*s);for(r=0;e[r]<n;r++);for(o=e.length;e[o-1]>i;o--);e=e.slice(r,o)}return e},o.tickFormat=function(t,e){if(!arguments.length)return wa;arguments.length<2?e=wa:"function"!=typeof e&&(e=E.format(e));var n,i=Math.max(.1,t/o.ticks().length),r=h?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/p(r(c(t)+n))<=i?e(t):""}},o.copy=function(){return t(e.copy(),l,h,u)},ga(o,e)}(E.scale.linear().domain([0,1]),10,!0,[1,10])};var wa=E.format(".0e"),ka={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Sa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}E.scale.pow=function(){return function t(e,n,i){var r=Sa(n),o=Sa(1/n);function a(t){return e(r(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(r)),a):i},a.ticks=function(t){return va(i,t)},a.tickFormat=function(t,e){return xa(i,t,e)},a.nice=function(t){return a.domain(ma(i,t))},a.exponent=function(t){return arguments.length?(r=Sa(n=t),o=Sa(1/n),e.domain(i.map(r)),a):n},a.copy=function(){return t(e.copy(),n,i)},ga(a,e)}(E.scale.linear(),1,[0,1])},E.scale.sqrt=function(){return E.scale.pow().exponent(.5)},E.scale.ordinal=function(){return function t(s,l){var r,h,u;function c(t){return h[((r.get(t)||("range"===l.t?r.set(t,s.push(t)):NaN))-1)%h.length]}function p(e,n){return E.range(s.length).map(function(t){return e+n*t})}return c.domain=function(t){if(!arguments.length)return s;s=[],r=new v;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,s.push(e));return c[l.t].apply(c,l.a)},c.range=function(t){return arguments.length?(h=t,u=0,l={t:"range",a:arguments},c):h},c.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],i=s.length<2?(n=(n+i)/2,0):(i-n)/(s.length-1+e);return h=p(n+i*e/2,i),u=0,l={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=i=Math.round((n+i)/2),0):(i-n)/(s.length-1+e)|0;return h=p(n+Math.round(r*e/2+(i-n-(s.length-1+e)*r)/2),r),u=0,l={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[+i],o=(t[1-i]-r)/(s.length-e+2*n);return h=p(r+o*n,o),i&&h.reverse(),u=o*(1-e),l={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[+i],o=t[1-i],a=Math.floor((o-r)/(s.length-e+2*n));return h=p(r+Math.round((o-r-(s.length-e)*a)/2),a),i&&h.reverse(),u=Math.round(a*(1-e)),l={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return u},c.rangeExtent=function(){return ha(l.a[0])},c.copy=function(){return t(s,l)},c.domain(s)}([],{t:"range",a:[[]]})},E.scale.category10=function(){return E.scale.ordinal().range(Ma)},E.scale.category20=function(){return E.scale.ordinal().range(Ta)},E.scale.category20b=function(){return E.scale.ordinal().range(Aa)},E.scale.category20c=function(){return E.scale.ordinal().range(Pa)};var Ma=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map($t),Ta=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map($t),Aa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map($t),Pa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map($t);function Da(){return 0}E.scale.quantile=function(){return function t(n,i){var r;function e(){var t=0,e=i.length;for(r=[];++t<e;)r[t-1]=E.quantile(n,t/e);return o}function o(t){if(!isNaN(t=+t))return i[E.bisect(r,t)]}return o.domain=function(t){return arguments.length?(n=t.map(h).filter(u).sort(l),e()):n},o.range=function(t){return arguments.length?(i=t,e()):i},o.quantiles=function(){return r},o.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},o.copy=function(){return t(n,i)},e()}([],[])},E.scale.quantize=function(){return function t(e,n,i){var r,o;function a(t){return i[Math.max(0,Math.min(o,Math.floor(r*(t-e))))]}function s(){return r=i.length/(n-e),o=i.length-1,a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]},a.range=function(t){return arguments.length?(i=t,s()):i},a.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/r+e,t+1/r]},a.copy=function(){return t(e,n,i)},s()}(0,1,[0,1])},E.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[E.bisect(e,t)]}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=t,i):n},i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},i.copy=function(){return t(e,n)},i}([.5],[0,1])},E.scale.identity=function(){return function t(n){function e(t){return+t}return(e.invert=e).domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return va(n,t)},e.tickFormat=function(t,e){return xa(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},E.svg={},E.svg.arc=function(){var S=La,M=Ia,T=Da,A=Ca,P=Ea,D=Ra,C=Ha;function e(){var t=Math.max(0,+S.apply(this,arguments)),e=Math.max(0,+M.apply(this,arguments)),n=P.apply(this,arguments)-wt,i=D.apply(this,arguments)-wt,r=Math.abs(i-n),o=i<n?0:1;if(e<t&&(a=e,e=t,t=a),bt<=r)return L(e,o)+(t?L(t,1-o):"")+"Z";var a,s,l,h,u,c,p,d,f,g,m,y,v,x,_,b=0,w=0,k=[];return(s=(+C.apply(this,arguments)||0)/2)&&(r=A===Ca?Math.sqrt(t*t+e*e):+A.apply(this,arguments),o||(w*=-1),e&&(w=Pt(r/e*Math.sin(s))),t&&(b=Pt(r/t*Math.sin(s)))),e?(u=e*Math.cos(n+w),c=e*Math.sin(n+w),p=e*Math.cos(i-w),l=e*Math.sin(i-w),h=Math.abs(i-n-2*w)<=xt?0:1,w&&Oa(u,c,p,l)===o^h&&(x=(n+i)/2,u=e*Math.cos(x),c=e*Math.sin(x),p=l=null)):u=c=0,t?(g=t*Math.cos(i-b),m=t*Math.sin(i-b),y=t*Math.cos(n+b),d=t*Math.sin(n+b),f=Math.abs(n-i+2*b)<=xt?0:1,b&&Oa(g,m,y,d)===1-o^f&&(v=(n+i)/2,g=t*Math.cos(v),m=t*Math.sin(v),y=d=null)):g=m=0,.001<(a=Math.min(Math.abs(e-t)/2,+T.apply(this,arguments)))?(w=t<e^o?0:1,b=u-(x=null==y?[g,m]:null==p?[u,c]:dr([u,c],[y,d],[p,l],[g,m]))[0],n=c-x[1],i=p-x[0],v=l-x[1],n=1/Math.sin(Math.acos((b*i+n*v)/(Math.sqrt(b*b+n*n)*Math.sqrt(i*i+v*v)))/2),i=Math.sqrt(x[0]*x[0]+x[1]*x[1]),null!=p?(x=Na(null==y?[g,m]:[y,d],[u,c],e,v=Math.min(a,(e-i)/(1+n)),o),_=Na([p,l],[g,m],e,v,o),a===v?k.push("M",x[0],"A",v,",",v," 0 0,",w," ",x[1],"A",e,",",e," 0 ",1-o^Oa(x[1][0],x[1][1],_[1][0],_[1][1]),",",o," ",_[1],"A",v,",",v," 0 0,",w," ",_[0]):k.push("M",x[0],"A",v,",",v," 0 1,",w," ",_[0])):k.push("M",u,",",c),null!=y?(i=Na([u,c],[y,d],t,-(_=Math.min(a,(t-i)/(n-1))),o),n=Na([g,m],null==p?[u,c]:[p,l],t,-_,o),a===_?k.push("L",n[0],"A",_,",",_," 0 0,",w," ",n[1],"A",t,",",t," 0 ",o^Oa(n[1][0],n[1][1],i[1][0],i[1][1]),",",1-o," ",i[1],"A",_,",",_," 0 0,",w," ",i[0]):k.push("L",n[0],"A",_,",",_," 0 0,",w," ",i[0])):k.push("L",g,",",m)):(k.push("M",u,",",c),null!=p&&k.push("A",e,",",e," 0 ",h,",",o," ",p,",",l),k.push("L",g,",",m),null!=y&&k.push("A",t,",",t," 0 ",f,",",1-o," ",y,",",d)),k.push("Z"),k.join("")}function L(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return e.innerRadius=function(t){return arguments.length?(S=ne(t),e):S},e.outerRadius=function(t){return arguments.length?(M=ne(t),e):M},e.cornerRadius=function(t){return arguments.length?(T=ne(t),e):T},e.padRadius=function(t){return arguments.length?(A=t==Ca?Ca:ne(t),e):A},e.startAngle=function(t){return arguments.length?(P=ne(t),e):P},e.endAngle=function(t){return arguments.length?(D=ne(t),e):D},e.padAngle=function(t){return arguments.length?(C=ne(t),e):C},e.centroid=function(){var t=(+S.apply(this,arguments)+ +M.apply(this,arguments))/2,e=(+P.apply(this,arguments)+ +D.apply(this,arguments))/2-wt;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Ca="auto";function La(t){return t.innerRadius}function Ia(t){return t.outerRadius}function Ea(t){return t.startAngle}function Ra(t){return t.endAngle}function Ha(t){return t&&t.padAngle}function Oa(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function Na(t,e,n,i,r){var o=t[0]-e[0],a=t[1]-e[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),l=s*a,h=-s*o,u=t[0]+l,c=t[1]+h,p=e[0]+l,d=e[1]+h,r=(u+p)/2,a=(c+d)/2,s=p-u,o=d-c,t=s*s+o*o,e=n-i,i=u*d-p*c,u=(o<0?-1:1)*Math.sqrt(e*e*t-i*i),d=(i*o-s*u)/t,p=(-i*s-o*u)/t,c=(i*o+s*u)/t,o=(-i*s+o*u)/t,u=d-r,t=p-a,r=c-r,a=o-a;return r*r+a*a<u*u+t*t&&(d=c,p=o),[[d-l,p-h],[d*n/e,p*n/e]]}function Ya(h){var u=sr,c=lr,p=ti,d=Fa,e=d.key,f=.7;function n(t){var e,n=[],i=[],r=-1,o=t.length,a=ne(u),s=ne(c);function l(){n.push("M",d(h(i),f))}for(;++r<o;)p.call(this,e=t[r],r)?i.push([+a.call(this,e,r),+s.call(this,e,r)]):i.length&&(l(),i=[]);return i.length&&l(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(c=t,n):c},n.defined=function(t){return arguments.length?(p=t,n):p},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?d=t:(d=za.get(t)||Fa).key,n):e},n.tension=function(t){return arguments.length?(f=t,n):f},n}E.svg.line=function(){return Ya(C)};var za=E.map({linear:Fa,"linear-closed":function(t){return Fa(t)+"Z"},step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return 1<n&&r.push("H",i[0]),r.join("")},"step-before":Xa,"step-after":Ba,basis:Ga,"basis-open":function(t){if(t.length<4)return Fa(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(Va(qa,o)+","+Va(qa,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Ka(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[Va(qa,a),",",Va(qa,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ka(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,h=-1;++h<=n;)(i=t[h])[0]=e*i[0]+(1-e)*(o+(r=h/n)*s),i[1]=e*i[1]+(1-e)*(a+r*l);return Ga(t)},cardinal:function(t,e){return t.length<3?Fa(t):t[0]+Ua(t,Wa(t,e))},"cardinal-open":function(t,e){return t.length<4?Fa(t):t[1]+Ua(t.slice(1,-1),Wa(t,e))},"cardinal-closed":function(t,e){return t.length<3?Fa(t):t[0]+Ua((t.push(t[0]),t),Wa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Fa(t):t[0]+Ua(t,function(t){for(var e,n,i,r,o=[],a=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Za(r,o);++e<n;)i[e]=(a+(a=Za(o,o=t[e+1])))/2;return i[e]=a,i}(t),s=-1,l=t.length-1;++s<l;)e=Za(t[s],t[s+1]),L(e)<vt?a[s]=a[s+1]=0:9<(r=(n=a[s]/e)*n+(i=a[s+1]/e)*i)&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i);for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}(t))}});function Fa(t){return t.join("L")}function Xa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Ba(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Ua(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Fa(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),1<e.length){s=e[1],o=t[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var h=2;h<e.length;h++,l++)o=t[l],s=e[h],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}return n&&(n=t[l],i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+n[0]+","+n[1]),i}function Wa(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function Ga(t){if(t.length<3)return Fa(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",Va(qa,a),",",Va(qa,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Ka(l,a,s);return t.pop(),l.push("L",i),l.join("")}function Va(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}za.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ja=[0,2/3,1/3,0],$a=[0,1/3,2/3,0],qa=[0,1/6,2/3,1/6];function Ka(t,e,n){t.push("C",Va(ja,e),",",Va(ja,n),",",Va($a,e),",",Va($a,n),",",Va(qa,e),",",Va(qa,n))}function Za(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ja(t){for(var e,n,i,r=-1,o=t.length;++r<o;)n=(e=t[r])[0],i=e[1]-wt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Qa(f){var g=sr,m=sr,y=0,v=lr,x=ti,_=Fa,e=_.key,b=_,w="L",k=.7;function n(t){var e,n,i,r=[],o=[],a=[],s=-1,l=t.length,h=ne(g),u=ne(y),c=g===m?function(){return n}:ne(m),p=y===v?function(){return i}:ne(v);function d(){r.push("M",_(f(a),k),w,b(f(o.reverse()),k),"Z")}for(;++s<l;)x.call(this,e=t[s],s)?(o.push([n=+h.call(this,e,s),i=+u.call(this,e,s)]),a.push([+c.call(this,e,s),+p.call(this,e,s)])):o.length&&(d(),o=[],a=[]);return o.length&&d(),r.length?r.join(""):null}return n.x=function(t){return arguments.length?(g=m=t,n):m},n.x0=function(t){return arguments.length?(g=t,n):g},n.x1=function(t){return arguments.length?(m=t,n):m},n.y=function(t){return arguments.length?(y=v=t,n):v},n.y0=function(t){return arguments.length?(y=t,n):y},n.y1=function(t){return arguments.length?(v=t,n):v},n.defined=function(t){return arguments.length?(x=t,n):x},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?_=t:(_=za.get(t)||Fa).key,b=_.reverse||_,w=_.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(k=t,n):k},n}function ts(t){return t.radius}function es(t){return[t.x,t.y]}function ns(){return 64}function is(){return"circle"}function rs(t){t=Math.sqrt(t/xt);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}E.svg.line.radial=function(){var t=Ya(Ja);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(Xa.reverse=Ba).reverse=Xa,E.svg.area=function(){return Qa(C)},E.svg.area.radial=function(){var t=Qa(Ja);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},E.svg.chord=function(){var i=ji,r=$i,o=ts,a=Ea,s=Ra;function e(t,e){var n=l(this,i,t,e),e=l(this,r,t,e);return"M"+n.p0+h(n.r,n.p1,n.a1-n.a0)+((n.a0==e.a0&&n.a1==e.a1?u(n.r,n.p1,n.r,n.p0):u(n.r,n.p1,e.r,e.p0)+h(e.r,e.p1,e.a1-e.a0)+u(e.r,e.p1,n.r,n.p0))+"Z")}function l(t,e,n,i){var r=e.call(t,n,i),e=o.call(t,r,i),n=a.call(t,r,i)-wt,i=s.call(t,r,i)-wt;return{r:e,a0:n,a1:i,p0:[e*Math.cos(n),e*Math.sin(n)],p1:[e*Math.cos(i),e*Math.sin(i)]}}function h(t,e,n){return"A"+t+","+t+" 0 "+ +(xt<n)+",1 "+e}function u(t,e,n,i){return"Q 0,0 "+i}return e.radius=function(t){return arguments.length?(o=ne(t),e):o},e.source=function(t){return arguments.length?(i=ne(t),e):i},e.target=function(t){return arguments.length?(r=ne(t),e):r},e.startAngle=function(t){return arguments.length?(a=ne(t),e):a},e.endAngle=function(t){return arguments.length?(s=ne(t),e):s},e},E.svg.diagonal=function(){var i=ji,r=$i,o=es;function e(t,e){var n=i.call(this,t,e),t=r.call(this,t,e),e=(n.y+t.y)/2,t=[n,{x:n.x,y:e},{x:t.x,y:e},t];return"M"+(t=t.map(o))[0]+"C"+t[1]+" "+t[2]+" "+t[3]}return e.source=function(t){return arguments.length?(i=ne(t),e):i},e.target=function(t){return arguments.length?(r=ne(t),e):r},e.projection=function(t){return arguments.length?(o=t,e):o},e},E.svg.diagonal.radial=function(){var t=E.svg.diagonal(),e=es,i=t.projection;return t.projection=function(t){return arguments.length?i((n=e=t,function(){var t=n.apply(this,arguments),e=t[0],t=t[1]-wt;return[e*Math.cos(t),e*Math.sin(t)]})):e;var n},t},E.svg.symbol=function(){var n=is,i=ns;function e(t,e){return(os.get(n.call(this,t,e))||rs)(i.call(this,t,e))}return e.type=function(t){return arguments.length?(n=ne(t),e):n},e.size=function(t){return arguments.length?(i=ne(t),e):i},e};var os=E.map({circle:rs,cross:function(t){t=Math.sqrt(t/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ss)),t=e*ss;return"M0,"+-e+"L"+t+",0 0,"+e+" "+-t+",0Z"},square:function(t){t=Math.sqrt(t)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/as),t=e*as/2;return"M0,"+t+"L"+e+","+-t+" "+-e+","+-t+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/as),t=e*as/2;return"M0,"+-t+"L"+e+","+t+" "+-e+","+t+"Z"}});E.svg.symbolTypes=os.keys();var as=Math.sqrt(3),ss=Math.tan(30*kt);U.transition=function(t){for(var e,n,i=cs||++fs,r=ys(t),o=[],a=ps||{time:Date.now(),ease:so,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var h=this[s],u=-1,c=h.length;++u<c;)(n=h[u])&&vs(n,u,r,i,a),e.push(n)}return us(o,r,i)},U.interrupt=function(t){return this.each(null==t?ls:hs(ys(t)))};var ls=hs(ys());function hs(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function us(t,e,n){return Y(t,ds),t.namespace=e,t.id=n,t}var cs,ps,ds=[],fs=0;function gs(t,i,r,o){var a=t.id,s=t.namespace;return ot(t,"function"==typeof r?function(t,e,n){t[s][a].tween.set(i,o(r.call(t,t.__data__,e,n)))}:(r=o(r),function(t){t[s][a].tween.set(i,r)}))}function ms(t){return null==t&&(t=""),function(){this.textContent=t}}function ys(t){return null==t?"__transition__":"__transition_"+t+"__"}function vs(h,u,c,p,t){var d,f=h[c]||(h[c]={active:0,count:0}),g=f[p];g||(d=t.time,g=f[p]={tween:new v,time:d,delay:t.delay,duration:t.duration,ease:t.ease,index:u},t=null,++f.count,E.timer(function(t){var i,r,e=g.delay,n=he,o=[];if(n.t=e+d,e<=t)return a(t-e);function a(t){if(f.active>p)return l();var e=f[f.active];e&&(--f.count,delete f[f.active],e.event&&e.event.interrupt.call(h,h.__data__,e.index)),f.active=p,g.event&&g.event.start.call(h,h.__data__,u),g.tween.forEach(function(t,e){(e=e.call(h,h.__data__,u))&&o.push(e)}),r=g.ease,i=g.duration,E.timer(function(){return n.c=s(t||1)?ti:s,1},0,d)}function s(t){if(f.active!==p)return 1;for(var t=t/i,e=r(t),n=o.length;0<n;)o[--n].call(h,e);return 1<=t?(g.event&&g.event.end.call(h,h.__data__,u),l()):void 0}function l(){return--f.count?delete f[p]:delete h[c],1}n.c=a},0,d))}ds.call=U.call,ds.empty=U.empty,ds.node=U.node,ds.size=U.size,E.transition=function(t,e){return t&&t.transition?cs?t.transition(e):t:E.selection().transition(t)},(E.transition.prototype=ds).select=function(t){var e,n,i,r=this.id,o=this.namespace,a=[];t=W(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var h=this[s],u=-1,c=h.length;++u<c;)(i=h[u])&&(n=t.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),vs(n,u,o,r,i[o][r]),e.push(n)):e.push(null)}return us(a,o,r)},ds.selectAll=function(t){var e,n,i,r,o,a=this.id,s=this.namespace,l=[];t=G(t);for(var h=-1,u=this.length;++h<u;)for(var c=this[h],p=-1,d=c.length;++p<d;)if(i=c[p]){o=i[s][a],n=t.call(i,i.__data__,p,h),l.push(e=[]);for(var f=-1,g=n.length;++f<g;)(r=n[f])&&vs(r,f,s,a,o),e.push(r)}return us(l,s,a)},ds.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=rt(t));for(var r=0,o=this.length;r<o;r++){i.push(e=[]);for(var a,s=0,l=(a=this[r]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return us(i,this.namespace,this.id)},ds.tween=function(e,n){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(e):ot(this,null==n?function(t){t[r][i].tween.remove(e)}:function(t){t[r][i].tween.set(e,n)})},ds.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?vo:Jr,r=E.ns.qualify(t);function o(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}return gs(this,"attr."+t,e,r.local?function(n){return null==n?a:(n+="",function(){var e,t=this.getAttributeNS(r.space,r.local);return t!==n&&(e=i(t,n),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(n){return null==n?o:(n+="",function(){var e,t=this.getAttribute(r);return t!==n&&(e=i(t,n),function(t){this.setAttribute(r,e(t))})})})},ds.attrTween=function(t,i){var r=E.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},ds.style=function(i,t,r){var e=arguments.length;if(e<3){if("string"!=typeof i){for(r in e<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}function o(){this.style.removeProperty(i)}return gs(this,"style."+i,t,function(n){return null==n?o:(n+="",function(){var e,t=H(this).getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=Jr(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},ds.styleTween=function(i,r,o){return arguments.length<3&&(o=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,H(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),o)}})},ds.text=function(t){return gs(this,"text",t,ms)},ds.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},ds.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=E.ease.apply(E,arguments)),ot(this,function(t){t[i][n].ease=e}))},ds.delay=function(i){var r=this.id,o=this.namespace;return arguments.length<1?this.node()[o][r].delay:ot(this,"function"==typeof i?function(t,e,n){t[o][r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[o][r].delay=i}))},ds.duration=function(i){var r=this.id,o=this.namespace;return arguments.length<1?this.node()[o][r].duration:ot(this,"function"==typeof i?function(t,e,n){t[o][r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[o][r].duration=i}))},ds.each=function(i,e){var r=this.id,o=this.namespace;if(arguments.length<2){var t=ps,n=cs;try{cs=r,ot(this,function(t,e,n){ps=t[o][r],i.call(t,t.__data__,e,n)})}finally{ps=t,cs=n}}else ot(this,function(t){t=t[o][r];(t.event||(t.event=E.dispatch("start","end","interrupt"))).on(i,e)});return this},ds.transition=function(){for(var t,e,n,i=this.id,r=++fs,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var h,u=0,c=(h=this[s]).length;u<c;u++)(e=h[u])&&vs(e,u,o,r,{time:(n=e[o][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return us(a,o,r)},E.svg.axis=function(){var b,w=E.scale.linear(),k=xs,S=6,M=6,T=3,A=[10],P=null;function n(t){t.each(function(){var t,e=E.select(this),n=this.__chart__||w,i=this.__chart__=w.copy(),r=null==P?i.ticks?i.ticks.apply(i,A):i.domain():P,o=null==b?i.tickFormat?i.tickFormat.apply(i,A):C:b,a=e.selectAll(".tick").data(r,i),s=a.enter().insert("g",".domain").attr("class","tick").style("opacity",vt),l=E.transition(a.exit()).style("opacity",vt).remove(),h=E.transition(a.order()).style("opacity",1),u=Math.max(S,0)+T,c=ua(i),p=e.selectAll(".domain").data([0]),d=(p.enter().append("path").attr("class","domain"),E.transition(p));s.append("line"),s.append("text");var f,g,m,y,v,x,_=s.select("line"),r=h.select("line"),e=a.select("text").text(o),p=s.select("text"),a=h.select("text"),o="top"===k||"left"===k?-1:1;"bottom"===k||"top"===k?(t=bs,f="x",m="y",g="x2",y="y2",e.attr("dy",o<0?"0em":".71em").style("text-anchor","middle"),d.attr("d","M"+c[0]+","+o*M+"V0H"+c[1]+"V"+o*M)):(t=ws,f="y",m="x",g="y2",y="x2",e.attr("dy",".32em").style("text-anchor",o<0?"end":"start"),d.attr("d","M"+o*M+","+c[0]+"H0V"+c[1]+"H"+o*M)),_.attr(y,o*S),p.attr(m,o*u),r.attr(g,0).attr(y,o*S),a.attr(f,0).attr(m,o*u),i.rangeBand?(x=(v=i).rangeBand()/2,n=i=function(t){return v(t)+x}):n.rangeBand?n=i:l.call(t,i,n),s.call(t,n,i),h.call(t,i,i)})}return n.scale=function(t){return arguments.length?(w=t,n):w},n.orient=function(t){return arguments.length?(k=t in _s?t+"":xs,n):k},n.ticks=function(){return arguments.length?(A=arguments,n):A},n.tickValues=function(t){return arguments.length?(P=t,n):P},n.tickFormat=function(t){return arguments.length?(b=t,n):b},n.tickSize=function(t){var e=arguments.length;return e?(S=+t,M=+arguments[e-1],n):S},n.innerTickSize=function(t){return arguments.length?(S=+t,n):S},n.outerTickSize=function(t){return arguments.length?(M=+t,n):M},n.tickPadding=function(t){return arguments.length?(T=+t,n):T},n.tickSubdivide=function(){return arguments.length&&n},n};var xs="bottom",_s={top:1,right:1,bottom:1,left:1};function bs(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function ws(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}E.svg.brush=function(){var y,v,x=N(T,"brushstart","brush","brushend"),_=null,b=null,w=[0,0],k=[0,0],S=!0,M=!0,r=Ss[0];function T(t){t.each(function(){var t=E.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(r,C);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ks[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",T.empty()?"none":null);var i,t=E.transition(t),e=E.transition(e);_&&(i=ua(_),e.attr("x",i[0]).attr("width",i[1]-i[0]),P(t)),b&&(i=ua(b),e.attr("y",i[0]).attr("height",i[1]-i[0]),D(t)),A(t)})}function A(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+w[+/e$/.test(t)]+","+k[+/^s/.test(t)]+")"})}function P(t){t.select(".extent").attr("x",w[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function D(t){t.select(".extent").attr("y",k[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function o(){var l,t,n,i=this,e=E.select(E.event.target),r=x.of(i,arguments),o=E.select(i),a=e.datum(),s=!/^(n|s)$/.test(a)&&_,h=!/^(e|w)$/.test(a)&&b,u=e.classed("extent"),c=ft(i),p=E.mouse(i),d=E.select(H(i)).on("keydown.brush",function(){32==E.event.keyCode&&(u||(l=null,p[0]-=w[1],p[1]-=k[1],u=2),O())}).on("keyup.brush",function(){32==E.event.keyCode&&2==u&&(p[0]+=w[1],p[1]+=k[1],u=0,O())});function f(){var t=E.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),u||(E.event.altKey?(l=l||[(w[0]+w[1])/2,(k[0]+k[1])/2],p[0]=w[+(t[0]<l[0])],p[1]=k[+(t[1]<l[1])]):l=null),s&&g(t,_,0)&&(P(o),e=!0),h&&g(t,b,1)&&(D(o),e=!0),e&&(A(o),r({type:"brush",mode:u?"move":"resize"}))}function g(t,e,n){var i,r=ua(e),o=r[0],a=r[1],s=p[n],e=n?k:w,r=e[1]-e[0];return u&&(o-=s,a-=r+s),t=(n?M:S)?Math.max(o,Math.min(a,t[n])):t[n],u?i=(t+=s)+r:(s=l?Math.max(o,Math.min(a,2*l[n]-t)):s)<t?(i=t,t=s):i=s,(e[0]!=t||e[1]!=i)&&(n?v=null:y=null,e[0]=t,e[1]=i,1)}function m(){f(),o.style("pointer-events","all").selectAll(".resize").style("display",T.empty()?"none":null),E.select("body").style("cursor",null),d.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),c(),r({type:"brushend"})}E.event.changedTouches?d.on("touchmove.brush",f).on("touchend.brush",m):d.on("mousemove.brush",f).on("mouseup.brush",m),o.interrupt().selectAll("*").interrupt(),u?(p[0]=w[0]-p[0],p[1]=k[0]-p[1]):a?(t=+/w$/.test(a),a=+/^n/.test(a),n=[w[1-t]-p[0],k[1-a]-p[1]],p[0]=w[t],p[1]=k[a]):E.event.altKey&&(l=p.slice()),o.style("pointer-events","none").selectAll(".resize").style("display",null),E.select("body").style("cursor",e.style("cursor")),r({type:"brushstart"}),f()}return T.event=function(t){t.each(function(){var i=x.of(this,arguments),r={x:w,y:k,i:y,j:v},t=this.__chart__||r;this.__chart__=r,cs?E.select(this).transition().each("start.brush",function(){y=t.i,v=t.j,w=t.x,k=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Qr(w,r.x),n=Qr(k,r.y);return y=v=null,function(t){w=r.x=e(t),k=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=r.i,v=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},T.x=function(t){return arguments.length?(r=Ss[!(_=t)<<1|!b],T):_},T.y=function(t){return arguments.length?(r=Ss[!_<<1|!(b=t)],T):b},T.clamp=function(t){return arguments.length?(_&&b?(S=!!t[0],M=!!t[1]):_?S=!!t:b&&(M=!!t),T):_&&b?[S,M]:_?S:b?M:null},T.extent=function(t){var e,n,i,r,o;return arguments.length?(_&&(e=t[0],n=t[1],b&&(e=e[0],n=n[0]),y=[e,n],_.invert&&(e=_(e),n=_(n)),n<e&&(o=e,e=n,n=o),e==w[0]&&n==w[1]||(w=[e,n])),b&&(i=t[0],r=t[1],_&&(i=i[1],r=r[1]),v=[i,r],b.invert&&(i=b(i),r=b(r)),r<i&&(o=i,i=r,r=o),i==k[0]&&r==k[1]||(k=[i,r])),T):(_&&(y?(e=y[0],n=y[1]):(e=w[0],n=w[1],_.invert&&(e=_.invert(e),n=_.invert(n)),n<e&&(o=e,e=n,n=o))),b&&(v?(i=v[0],r=v[1]):(i=k[0],r=k[1],b.invert&&(i=b.invert(i),r=b.invert(r)),r<i&&(o=i,i=r,r=o))),_&&b?[[e,i],[n,r]]:_?[e,n]:b&&[i,r])},T.clear=function(){return T.empty()||(w=[0,0],k=[0,0],y=v=null),T},T.empty=function(){return!!_&&w[0]==w[1]||!!b&&k[0]==k[1]},E.rebind(T,x,"on")};var ks={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ss=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],c=xe.format=o.timeFormat,e=c.utc,o=e("%Y-%m-%dT%H:%M:%S.%LZ");function Ms(t){return t.toISOString()}function Ts(e,r,t){function o(t){return e(t)}function a(t,e){var n=(t[1]-t[0])/e,i=E.bisect(Ps,n);return i==Ps.length?[r.year,ya(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/Ps[i-1]<Ps[i]/n?i-1:i]:[Ls,ya(t,e)[2]]}return o.invert=function(t){return As(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(As)},o.nice=function(e,n){var t=o.domain(),i=ha(t),i=null==e?a(i,10):"number"==typeof e&&a(i,e);function r(t){return!isNaN(t)&&!e.range(t,As(+t+1),n).length}return i&&(e=i[0],n=i[1]),o.domain(pa(t,1<n?{floor:function(t){for(;r(t=e.floor(t));)t=As(t-1);return t},ceil:function(t){for(;r(t=e.ceil(t));)t=As(+t+1);return t}}:e))},o.ticks=function(t,e){var n=ha(o.domain()),i=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],As(+n[1]+1),e<1?1:e)},o.tickFormat=function(){return t},o.copy=function(){return Ts(e.copy(),r,t)},ga(o,e)}function As(t){return new Date(t)}c.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ms:o,Ms.parse=function(t){t=new Date(t);return isNaN(t)?null:t},Ms.toString=o.toString,xe.second=ke(function(t){return new _e(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),xe.seconds=xe.second.range,xe.seconds.utc=xe.second.utc.range,xe.minute=ke(function(t){return new _e(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),xe.minutes=xe.minute.range,xe.minutes.utc=xe.minute.utc.range,xe.hour=ke(function(t){var e=t.getTimezoneOffset()/60;return new _e(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),xe.hours=xe.hour.range,xe.hours.utc=xe.hour.utc.range,xe.month=ke(function(t){return(t=xe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),xe.months=xe.month.range,xe.months.utc=xe.month.utc.range;var Ps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ds=[[xe.second,1],[xe.second,5],[xe.second,15],[xe.second,30],[xe.minute,1],[xe.minute,5],[xe.minute,15],[xe.minute,30],[xe.hour,1],[xe.hour,3],[xe.hour,6],[xe.hour,12],[xe.day,1],[xe.day,2],[xe.week,1],[xe.month,1],[xe.month,3],[xe.year,1]],Cs=c.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",ti]]),Ls={range:function(t,e,n){return E.range(Math.ceil(t/n)*n,+e,n).map(As)},floor:C,ceil:C};Ds.year=xe.year,xe.scale=function(){return Ts(E.scale.linear(),Ds,Cs)};var Is=Ds.map(function(t){return[t[0].utc,t[1]]}),Es=e.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",ti]]);function Rs(t){return JSON.parse(t.responseText)}function Hs(t){var e=R.createRange();return e.selectNode(R.body),e.createContextualFragment(t.responseText)}Is.year=xe.year.utc,xe.scale.utc=function(){return Ts(E.scale.linear(),Is,Es)},E.text=ie(function(t){return t.responseText}),E.json=function(t,e){return re(t,"application/json",Rs,e)},E.html=function(t,e){return re(t,"text/html",Hs,e)},E.xml=ie(function(t){return t.responseXML}),void 0===(zs="function"==typeof(zs=E)?zs.call(Ns,Ys,Ns,Os):zs)||(Os.exports=zs),this.d3=E}()}}]);
