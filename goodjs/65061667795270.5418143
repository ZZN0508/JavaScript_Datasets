var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.arrayFromIterator=function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i},$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))},function(){function t(e){this.els={el:e,headerWrapEl:e.querySelector(".key-feature-tab__header-wrap"),tabEl:e.querySelector(".tab"),containerEl:e.querySelector(".key-feature-tab__container"),slideEls:e.querySelectorAll(".key-feature-tab__slide"),innerWrapEls:e.querySelectorAll(".key-feature-tab__inner-wrap"),videoCtaEls:e.querySelectorAll(".key-feature-tab__cta--video"),popupVideoEl:e.querySelector(".popup-video")},this.lazyLoad=window.sg.common.lazyLoad,this.tab=window.sg.common.tab,this.video=window.sg.common.video,this.popupVideo=window.sg.common.popupVideo,this.isVisible=window.sg.common.utils.isVisible,this.getCurrentDevice=window.sg.common.utils.getCurrentDevice,this.isKeyFeatureTabShow=!1,this.moveStartX=0,this.isMoving=!1,this.swiperJumpDirection="",this.isSwiperTransitionUse=!0,this.tabSelect=this.swiperMove=this.isSwiping=!1,this.applyVideoControlEvent=!0,this.isRtl=window.sg.common.utils.isRtl,this.init()}var e=window.sg.common.$q;t.prototype.init=function(){t.instances.has(this.els.el)||(t.instances.set(this.els.el,this),this.swiper=new Swiper(this.els.containerEl,{speed:500}),this.setAccessibility(),this.prepareInteraction(),this.setHeaderTextColor(0),this.bindEvents(),this.checkKeyFeatureTabShow(),this.setCarouselHeight())},t.prototype.checkKeyFeatureTabShow=function(){this.isVisible(this.els.el)&&!this.isKeyFeatureTabShow?(this.isKeyFeatureTabShow=!0,this.lazyLoad.setLazyLoad(),this.playVideo()):!this.isVisible(this.els.el)&&this.isKeyFeatureTabShow&&(this.isKeyFeatureTabShow=!1,this.pauseVideo())},t.prototype.playVideo=function(){var e;this.applyVideoControlEvent&&((e=this.swiper.slides[this.swiper.activeIndex].querySelector(".key-feature-tab__background-wrap .video"))&&this.video.play(e),(e=this.swiper.slides[this.swiper.activeIndex].querySelector(".key-feature-tab__inner-wrap .video"))&&this.video.play(e))},t.prototype.stopVideo=function(){var e;this.applyVideoControlEvent&&((e=this.swiper.slides[this.swiper.activeIndex].querySelector(".key-feature-tab__background-wrap .video video"))&&(e.pause(),e.currentTime=0),(e=this.swiper.slides[this.swiper.activeIndex].querySelector(".key-feature-tab__inner-wrap .video video"))&&(e.pause(),e.currentTime=0))},t.prototype.pauseVideo=function(){var e;this.applyVideoControlEvent&&((e=this.swiper.slides[this.swiper.activeIndex].querySelector(".key-feature-tab__background-wrap .video video"))&&e.pause(),(e=this.swiper.slides[this.swiper.activeIndex].querySelector(".key-feature-tab__inner-wrap .video video"))&&e.pause())},t.prototype.setHeaderTextColor=function(){var e="",t=this.els.innerWrapEls[this.swiper.activeIndex];this.els.headerWrapEl.classList.remove("text-color--black"),this.els.headerWrapEl.classList.remove("text-color--white"),t.classList.contains("text-color--black")?e="text-color--black":t.classList.contains("text-color--white")&&(e="text-color--white"),this.els.headerWrapEl.classList.add(e)},t.prototype.bindEvents=function(){var i=this;this.els.tabEl.addEventListener("tabSelect",function(e){i.swiperMove?i.swiperMove=!1:(i.tab.setSelectDisabled(i.els.tabEl,!0),i.stopVideo(),i.tabSelect=!0,e.detail>i.swiper.activeIndex+1?(i.swiper.realPrevIndex=i.swiper.activeIndex,i.swiper.slides[e.detail].insertAdjacentElement("beforebegin",i.swiper.slides[i.swiper.activeIndex]),i.swiper.update(),i.isSwiperTransitionUse=!1,i.swiper.slideTo(e.detail-1,0),i.swiper.update(),i.isSwiperTransitionUse=!0,i.swiperJumpDirection="right"):e.detail<i.swiper.activeIndex-1&&(i.swiper.realPrevIndex=i.swiper.activeIndex,i.swiper.slides[e.detail].insertAdjacentElement("afterend",i.swiper.slides[i.swiper.activeIndex]),i.swiper.update(),i.isSwiperTransitionUse=!1,i.swiper.slideTo(e.detail+1,0,!1),i.swiper.update(),i.isSwiperTransitionUse=!0,i.swiperJumpDirection="left"),i.swiper.slideTo(e.detail))}),this.swiper.on("slideChange",function(){i.isSwiperTransitionUse&&(i.applyVideoControlEvent=!1,i.lazyLoad.setLazyLoad(),[].concat($jscomp.arrayFromIterable(i.els.slideEls)).forEach(function(e){e.classList.remove("key-feature-tab__slide--active-left-side"),e.classList.remove("key-feature-tab__slide--active-right-side")}),i.els.headerWrapEl.classList.add("key-feature-tab__header-wrap--interaction"),setTimeout(function(){i.els.headerWrapEl.classList.remove("key-feature-tab__header-wrap--interaction")},600),i.setHeaderTextColor(),i.tabSelect?i.tabSelect=!1:(i.swiperMove=!0,i.tab.selectTab(i.els.tabEl,i.swiper.activeIndex)))}),this.swiper.on("slideChangeTransitionEnd",function(){i.isSwiperTransitionUse&&(i.lazyLoad.setLazyLoad(),i.applyVideoControlEvent=!0,i.prepareInteraction(),"right"===i.swiperJumpDirection?(i.swiper.slides[i.swiper.realPrevIndex].insertAdjacentElement("beforebegin",i.swiper.slides[i.swiper.activeIndex-1]),i.swiper.update()):"left"===i.swiperJumpDirection&&(i.swiper.slides[i.swiper.realPrevIndex].insertAdjacentElement("afterend",i.swiper.slides[i.swiper.activeIndex+1]),i.swiper.update()),i.setAccessibility(),i.isSwiping&&"mobile"!==i.getCurrentDevice()||i.playVideo(),i.isSwiping=!1,i.swiperJumpDirection="",i.tab.setSelectDisabled(i.els.tabEl,!1))}),this.els.containerEl.addEventListener("mousedown",function(e){i.slideMoveStart(e)}),this.els.containerEl.addEventListener("mousemove",function(e){i.slideMoving(e)}),this.els.containerEl.addEventListener("mouseup",function(e){i.slideMoveEnd(e)}),this.els.containerEl.addEventListener("touchstart",function(e){i.slideMoveStart(e)}),this.els.containerEl.addEventListener("touchmove",function(e){i.slideMoving(e)}),this.els.containerEl.addEventListener("touchend",function(e){i.slideMoveEnd(e)}),[].concat($jscomp.arrayFromIterable(this.els.slideEls)).forEach(function(e){e.addEventListener("mouseenter",function(){i.pauseVideo()}),e.addEventListener("mouseleave",function(){i.playVideo()})}),[].concat($jscomp.arrayFromIterable(this.els.innerWrapEls)).forEach(function(e){[].concat($jscomp.arrayFromIterable(e.querySelectorAll(".cta"))).forEach(function(e){e.addEventListener("focus",function(){i.pauseVideo()}),e.addEventListener("focusout",function(){i.playVideo()})})}),[].concat($jscomp.arrayFromIterable(this.els.videoCtaEls)).forEach(function(e,t){e.addEventListener("click",function(){i.applyVideoControlEvent=!1,i.popupVideo.open(i.els.popupVideoEl,t,e)})}),this.els.popupVideoEl&&this.els.popupVideoEl.addEventListener("popupVideoClose",function(){i.applyVideoControlEvent=!0}),document.addEventListener("scroll",function(){i.checkKeyFeatureTabShow()}),window.addEventListener("resize",function(){i.applyVideoControlEvent&&i.checkKeyFeatureTabShow(),i.setCarouselHeight()}),window.addEventListener("orientationchange",function(){i.applyVideoControlEvent&&i.checkKeyFeatureTabShow()})},t.prototype.slideMoveStart=function(e){this.moveStartX=e.offsetX||e.touches[0].pageX,this.isMoving=!0},t.prototype.slideMoving=function(e){var t;!this.isMoving||((t=(e.offsetX||e.touches[0].pageX)-this.moveStartX)<=-20||20<=t)&&e.preventDefault()},t.prototype.slideMoveEnd=function(e){e=(e.offsetX||e.changedTouches[0].pageX)-this.moveStartX,this.isRtl()?50<=e&&!this.swiper.isEnd?(this.stopVideo(),this.isSwiping=!0,this.swiper.slideTo(this.swiper.activeIndex+1)):e<=-50&&!this.swiper.isBeginning&&(this.stopVideo(),this.isSwiping=!0,this.swiper.slideTo(this.swiper.activeIndex-1)):e<=-50&&!this.swiper.isEnd?(this.stopVideo(),this.isSwiping=!0,this.swiper.slideTo(this.swiper.activeIndex+1)):50<=e&&!this.swiper.isBeginning&&(this.stopVideo(),this.isSwiping=!0,this.swiper.slideTo(this.swiper.activeIndex-1)),this.moveStartX=0,this.isMoving=!1},t.prototype.prepareInteraction=function(){var i=this;[].concat($jscomp.arrayFromIterable(this.els.slideEls)).forEach(function(e,t){t<i.swiper.activeIndex?e.classList.add("key-feature-tab__slide--active-left-side"):t>i.swiper.activeIndex&&e.classList.add("key-feature-tab__slide--active-right-side")})},t.prototype.setAccessibility=function(){var i=this;[].concat($jscomp.arrayFromIterable(this.swiper.slides)).forEach(function(e,t){t===i.swiper.activeIndex?(e.removeAttribute("aria-hidden"),[].concat($jscomp.arrayFromIterable(e.querySelectorAll(".cta"))).forEach(function(e){e.removeAttribute("tabindex"),e.removeAttribute("aria-hidden")})):(e.setAttribute("aria-hidden","true"),[].concat($jscomp.arrayFromIterable(e.querySelectorAll(".cta"))).forEach(function(e){e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")}))})},t.prototype.setCarouselHeight=function(){var t;this.els.el.offsetWidth<1440?(t=0,"desktop"===this.getCurrentDevice()?t=810*this.els.el.offsetWidth/1440:"mobile"===this.getCurrentDevice()&&(t=640*this.els.el.offsetWidth/360),[].concat($jscomp.arrayFromIterable(this.els.slideEls)).forEach(function(e){e.querySelector(".key-feature-tab__slide-inner").style.height=t+"px"})):[].concat($jscomp.arrayFromIterable(this.els.slideEls)).forEach(function(e){e.querySelector(".key-feature-tab__slide-inner").removeAttribute("style")})},t.instances=new WeakMap;var i={initAll:function(){[].concat($jscomp.arrayFromIterable(document.querySelectorAll(".key-feature-tab"))).forEach(function(e){t.instances.has(e)||new t(e)})}};window.sg.components.keyFeatureTab=i,e.ready(function(){return i.initAll()})}();
