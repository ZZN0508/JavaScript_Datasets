OK.util.isIEMetro()&&document.documentElement.classList.add("ie-metro"),function(e){var n=e.getElementById("topPanel");n&&n.addEventListener("click",(function(e){var n=(e.target||e.srcElement).tagName.toLowerCase();OK.Layers.stack.length&&"input"!=n&&"a"!=n&&OK.Layers.unregisterLast("topPanelClick")}))}(document),OK.showOnlineUsers={top:0,doResize:function(){}},OK.hideFeed=function(e){var n=document.getElementById(e);n&&OK.css.display(n,0)},function(){var e,n=[],t=[],r=1,o={},i=function(e,n,t){if(OK.fn.isDebug()&&console.log("layer._call('"+e+"', '"+JSON.stringify(n)+"', '"+JSON.stringify(t)+"') topLayer = "+JSON.stringify(p())),o.hasOwnProperty(e))for(var r=0,i=o[e].length;r<i;r++)try{o[e][r].call(null,n,t)}catch(e){}},l=function(e){return e.replace(/st\.(fwd|layer\.direction)\=.*?(&|$)/g,"")};var a=function(e,t){if(n.length)if(n[n.length-1].preventCloseOnEsc)OK.logging.logger.success("layerManager","escDisabledForLayer",n[n.length-1].id);else{var r=n.pop();r?(u(r),n.length||d(),s(),null!==r.redirectAfterClose&&(OK.navigation.redirect?OK.navigation.redirect(r.redirectAfterClose):window.location.assign(r.redirectAfterClose)),i(r.id,!1,t),OK.logging.logger.success("layerManager","unregister",r.id),OK.logging.logger.success("layerManager",e,r.id)):OK.logging.logger.success("layerManager","popFailed")}else OK.logging.logger.success("layerManager","stackEmpty")},s=function(){var e=!n.length||1==n.length&&("posting_form"==n[0].id||"video_player"==n[0].id||0===n[0].id.indexOf("dd-menu"));if(1==n.length&&"modal_hook"==n[0].id){var t=document.getElementById("hook_Modal_popLayerModal");t&&t.classList.contains("layer__disabled")&&(e=!0)}require(["OK/OhManager"],(function(n){n.switchScrolling(e)}))};function g(){var e=OK.hookModel.getHookById("ForthColumnTopBannerInner");e&&e.handle()}var c=function(){OK.loader.use(["jQuery"],(function(){$("body").on("click.popLayers",".modal_overlay, .modal-new_close_ovr, .layer_ovr, .ic_close, #hook_Block_PromoMainLayer .layerPanelClose, .js-close-layer",(function(e){a("shadowClick"),e.stopImmediatePropagation()})).on("keydown.popLayers",(function(t){var r=n[n.length-1];r&&r.keyHandler.call(this,t),27!==t.keyCode||e||(e=!0,a("esc"),t.preventDefault(),t.stopPropagation())})).on("keyup.popLayers",(function(n){e=!1,27===n.keyCode&&n.preventDefault(),n.stopPropagation()}))})),g()},d=function(){OK.loader.use(["jQuery"],(function(){e=!1,$("body").off(".popLayers")})),require(["OK/ToolbarGrowl"],(function(e){e.showAny()})),g()},u=function(e){e.deactivateFn.call(e.hookInstance)},f=function(){return 0!=n.length},p=function(){return f()?n[n.length-1].id:null};OK.Layers={register:function(e,t,r,o,l,a){OK.loader.execRequire("OK/ToolbarGrowl",(function(e){e.hideAll()}));for(var g={id:e,deactivateFn:t,hookInstance:r=r||null,preventCloseOnEsc:o=o||!1,keyHandler:l=l||function(){},redirectAfterClose:a=a||null},d=!1,u=0;u<n.length;u++)n[u].id==g.id&&(d=!0,n.splice(u,1),OK.logging.logger.success("layerManager","reRegister",g.id));n.push(g),1!=n.length||d||c(),i(g.id,!0),s(),OK.logging.logger.success("layerManager","register",g.id)},remove:function(e){for(var t,r=0;r<n.length;r++)n[r].id==e&&((t=n.splice(r,1))&&t[0]&&i(t[0].id,!1),OK.logging.logger.success("layerManager","unregister",e));t||OK.logging.logger.success("layerManager","unregisterLayerNotFound",e),!n.length&&t&&d(),s()},isAnyLayerOpened:f,isLayerOpened:function(e){if(n)for(var t=0;t<n.length;t++){if(n[t].id==e)return!0}return!1},unregisterAll:function(){for(var e=n.length;e>0;e--)a("unregisterAll")},unregisterLast:a,unregisterById:function(e,t){for(var r=0;r<n.length;r++)if(n[r].id===e){var o=n[r];n.splice(r,1),o?(u(o),n.length||d(),s(),null!==o.redirectAfterClose&&(OK.navigation.redirect?OK.navigation.redirect(o.redirectAfterClose):window.location.assign(o.redirectAfterClose)),i(o.id,!1,t),OK.logging.logger.success("layerManager","unregister",o.id)):OK.logging.logger.success("layerManager","popFailed")}},stack:n,push:function(e){if(!(r<=1)){e=l(e),t.push({link:e});var n=t.length-r;n>0&&t.splice(0,n)}},pop:function(){if(r<=1||0==t.length)return null;if(t.splice(t.length-1,1),0==t.length)return null;var e=t[t.length-1],n=e.link;return e.attrs&&(n+=e.attrs),t.splice(t.length-1,1),"undefined"!=typeof navigateOnUrlFromJS?navigateOnUrlFromJS(n):require(["OK/PopLayerPhoto"],(function(e){e.handleOnNavigate(n)})),n},lastUrl:function(){if(0===t.length)return"";var e=t[t.length-1];return e?e.link:""},changeAttrs:function(e,n){if(0!=t.length){var r=t[t.length-1].link.indexOf("?")>=0?"&":"?";r+="st.fwd=",e=encodeURIComponent(e),r+=n?"on&st.lastelem="+e:"off&st.firstelem="+e,t[t.length-1].attrs=r}},clear:function(){t=[]},replace:function(e){r<=1||0==t.length||(e=l(e),t[t.length-1]={link:e})},setMaxSize:function(e){r=e},onLayerShown:OK.fn.empty,onLayerHidden:OK.fn.empty,subscribe:function(e,n){o.hasOwnProperty(e)?o[e].push(n):o[e]=[n]},unsubscribe:function(e,n){if(n){var t=o[e].indexOf(n);t>-1&&o[e].splice(t,1)}else o[e]=[]},getTopLayerId:p},OK.historyManager.isHistorySupported()&&!window.onpopstate&&(window.onpopstate=function(e){e.state&&OK.Layers.unregisterAll()})}(),require(["OK/utils/throttle"],(function(e){window.addEventListener("resize",e(100,(function(){OK.setContentWidth()})))})),function(){if(null!=document.getElementById("sc")){var e=OK.scrollBar.width,n=document.createElement("style"),t=".fake-toolbar {width: "+e+"px}.scroll-right-indent { right: "+e+"px !important; }.scroll-right-padding { padding-right: "+e+"px !important; }.scroll-right-margin { margin-right: "+e+"px !important; }",r=document.getElementsByTagName("head")[0];if(OK.util.isIEMetro()||(t+="html.oh #hook_PopLayer_popLayer, html.oh .topPanel, html.oh .modal, html.oh .scroll-modal-indent {border-right:"+e+"px transparent solid}"),r.appendChild(n),n.styleSheet)n.styleSheet.cssText=t;else{var o=document.createTextNode(t);n.appendChild(o)}}}(),window.addEventListener("message",(function(e){"ok_ping"==e.data&&e.source.postMessage("ok_pong","*")}),!1),require(["OK/StartupTimingLogger"],(function(e){e.activate()})),require(["OK/DetectUsageGoogleTranslate"]);