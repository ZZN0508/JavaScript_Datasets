!function(){var JSON;void 0===JSON&&(JSON=function(){function f(t){return t<10?"0"+t:t}JSON={},"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var a,n,r,i,o,s=gap,d=e[t];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),typeof(d="function"==typeof rep?rep.call(e,t,d):d)){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(d)){for(i=d.length,a=0;a<i;a+=1)o[a]=str(a,d)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(i=rep.length,a=0;a<i;a+=1)"string"==typeof rep[a]&&(r=str(n=rep[a],d))&&o.push(quote(n)+(gap?": ":":")+r);else for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(r=str(n,d))&&o.push(quote(n)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}return"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,a){var n;if(indent=gap="","number"==typeof a)for(n=0;n<a;n+=1)indent+=" ";else"string"==typeof a&&(indent=a);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var a,n,r=t[e];if(r&&"object"==typeof r)for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(void 0!==(n=walk(r,a))?r[a]=n:delete r[a]);return reviver.call(t,e,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),JSON}())}(),$(function(){$.extend({brand:function(main,sub,btn,json){var data=json.data,tempHTML=["<li>选品牌</li>"],temp_id=[],temp_name=[],obj;for(obj in data){for(var brand in data[obj])"string"==typeof data[obj][brand].id&&(temp_id.push(data[obj][brand].id),temp_name.push(data[obj][brand].zhName));tempHTML.push('<li class="sgroup">'+obj.toUpperCase()+"</li>");for(var i=0,len=temp_id.length;i<len;i++){var json_id=temp_id[i],json_name=temp_name[i];tempHTML.push('<li class="noption" value="'+json_id+'">'+json_name+"</li>")}temp_id=[],temp_name=[]}$(main).append(tempHTML.join(""));var brandTitle=$("[node-type=brandTitle]",$(".searchCars")),typeTitle=$("[node-type=typeTitle]",$(".searchCars"));$("[node-type=brand]",$(".searchCars")).on("click",function(){return $(main).show(),$(sub).hide(),!1}),$("[node-type=type]",$(".searchCars")).on("click",function(){return $(sub).attr("disabled")&&"disabled"===$(sub).attr("disabled")||($(sub).show(),$(main).hide()),!1}),$(main).on("click","li:not(.sgroup)",function(e){var tempHTML=[],temp_id=[],temp_name=[],_target=e.target,pid=$(_target).attr("value");function afterGetData(json){json=eval(json);var data=json.data,obj;for(obj in data){for(var serial in data[obj].serialList)0!=data[obj].serialList[serial].serialId&&(temp_id.push(data[obj].serialList[serial].serialId),temp_name.push(data[obj].serialList[serial].serialName));if(0==temp_id.length)tempHTML.push('<li value="">暂无相关车系</li>');else{tempHTML.push('<li class="sgroup">'+data[obj].corpName+"</li>");for(var i=0,len=temp_id.length;i<len;i++){var json_id=temp_id[i],json_name=temp_name[i];tempHTML.push('<li class="noption" value="'+json_id+'">'+json_name+"</li>")}}temp_id=[],temp_name=[]}$(sub).append(tempHTML.join("")),1===$(sub).children().length&&$(sub).attr("disabled","disabled")}$(sub).empty().removeAttr("disabled").append("<li>选车型</li>"),brandTitle.text($(_target).text()),serialListDataFromApi[pid]?afterGetData(serialListDataFromApi[pid]):void 0!==xjStorage&&xjStorage.get("serialListDataFromApi_"+pid)&&+new Date-xjStorage.get("serialListDataFromApi_"+pid).timeStamp<=864e5&&xjStorage.get("serialListDataFromApi_"+pid).data?afterGetData(xjStorage.get("serialListDataFromApi_"+pid).data):$.getJSON(getSerialListUrl+pid,function(t){serialListDataFromApi[pid]=t;try{xjStorage.set("serialListDataFromApi_"+pid,{data:t,timeStamp:+new Date})}catch(t){}afterGetData(t)}),$(main).attr("value",pid),$(main).hide(),typeTitle.text("选车型"),e.stopPropagation()}),$(sub).on("click","li:not(.sgroup)",function(t){var e=t.target,a=$(e).attr("value");typeTitle.text($(e).text()),$(sub).attr("value",a).hide(),t.stopPropagation()}),$("body").on("click",function(t){$(sub).hide(),$(main).hide()}),btn&&""!=btn&&$(btn).click(function(){var t=$(sub).attr("value"),e=$(main).attr("value"),a="//db.auto.sina.com.cn/";return a+="选品牌"!=e&&""!=e&&"0"!==e&&e?"选车型"!=t&&""!=t&&"0"!==t&&t?t+"/?indexflag=sinahome&bid="+e+"&subid="+t:"?indexflag=sinahome&bid="+e:"?indexflag=sinahome",window.open(a),!1})}}),$("#J_tType").attr("disabled","disabled");var getBrandListUrl="",getCarBySerialIdUrl="",getSerialListUrl="",getSerialInfoUrl="",getCarInfoByCarIdsUrl="",carBySerialIdDataFromApi={},serialListDataFromApi={},serialInfoDataFromApi={},carInfoDataFromApi={},xj_cars_changing=!1,xj_car_brand_changing=!1,xjStorage,node,node0,node,node0,getCarInfoByCarIdsUrl="auto.sina.com.cn"===location.hostname?(getBrandListUrl="//auto.sina.cn/api/db/getBrandList.d.json?callback=?",getCarBySerialIdUrl="//auto.sina.cn/api/db/getCarBySerialId.d.json?status=1&callback=?&serialid=",getSerialListUrl="//db.auto.sina.com.cn/api/cms/car/getSerialList.json?callback=?&sellStatus=1&brandid=",getSerialInfoUrl="//auto.sina.cn/api/db/getSerialInfo.d.json?callback=?&serialids=","//auto.sina.cn/api/db/getCarInfoByCarIds.d.json?callback=?&carids="):"db.auto.sina.com.cn"===location.hostname?(getBrandListUrl="//db.auto.sina.com.cn/api/cms/car/getBrandList.json",getCarBySerialIdUrl="//db.auto.sina.com.cn/api/cms/car/getCarBySerialId.json?status=1&serialid=",getSerialListUrl="//db.auto.sina.com.cn/api/cms/car/getSerialList.json?sellStatus=1&brandid=",getSerialInfoUrl="//db.auto.sina.com.cn/api/cms/car/getSerialInfo.json?serialids=","//db.auto.sina.com.cn/api/cms/car/getCarInfoByCarIds.json?carids="):(getBrandListUrl="//db.auto.sina.com.cn/api/cms/car/getBrandList.json?callback=?",getCarBySerialIdUrl="//db.auto.sina.com.cn/api/cms/car/getCarBySerialId.json?status=1&callback=?&serialid=",getSerialListUrl="//db.auto.sina.com.cn/api/cms/car/getSerialList.json?callback=?&sellStatus=1&brandid=",getSerialInfoUrl="//db.auto.sina.com.cn/api/cms/car/getSerialInfo.json?callback=?&serialids=","//db.auto.sina.com.cn/api/cms/car/getCarInfoByCarIds.json?callback=?&carids=");window.localStorage&&"undefined"!=typeof JSON&&(xjStorage={set:function(t,e){localStorage.setItem(t,JSON.stringify(e))},get:function(t){return $.parseJSON(localStorage.getItem(t))}}),void 0!==xjStorage?xjStorage.get("brandListDataFromApi")&&xjStorage.get("brandListDataFromApiTime")&&+new Date-xjStorage.get("brandListDataFromApiTime")<=5184e6?$.brand("#J_tBrand","#J_tType","#J_searchType",xjStorage.get("brandListDataFromApi")):(node=document.createElement("script"),node.onreadystatechange=function(){var t=node.readyState;"loaded"!==t&&"complete"!==t||(node.onreadystatechange=null,t=$.parseJSON('{"status":"0","msg":"success","data":'+JSON.stringify(g_brand_list_data)+"}"),xjStorage.set("brandListDataFromApi",t),xjStorage.set("brandListDataFromApiTime",+new Date),$.brand("#J_tBrand","#J_tType","#J_searchType",t))},node.onload=function(){var t=$.parseJSON('{"status":"0","msg":"success","data":'+JSON.stringify(g_brand_list_data)+"}");xjStorage.set("brandListDataFromApi",t),xjStorage.set("brandListDataFromApiTime",+new Date),$.brand("#J_tBrand","#J_tType","#J_searchType",t)},node.onerror=function(){$.getJSON(getBrandListUrl,function(t){xjStorage.set("brandListDataFromApi",t),xjStorage.set("brandListDataFromApiTime",+new Date),$.brand("#J_tBrand","#J_tType","#J_searchType",t)})},node.setAttribute("charset","utf-8"),node.src="//www.sinaimg.cn/qc/js/brandList.min.js",node0=document.getElementsByTagName("script")[0],node0.parentNode.insertBefore(node,node0)):"undefined"!=typeof JSON?(node=document.createElement("script"),node.onload=function(){var t=$.parseJSON('{"status":"0","msg":"success","data":'+JSON.stringify(g_brand_list_data)+"}");$.brand("#J_tBrand","#J_tType","#J_searchType",t)},node.onerror=function(){$.getJSON(getBrandListUrl,function(t){$.brand("#J_tBrand","#J_tType","#J_searchType",t)})},node.setAttribute("charset","utf-8"),node.src="//www.sinaimg.cn/qc/js/brandList.min.js",node0=document.getElementsByTagName("script")[0],node0.parentNode.insertBefore(node,node0)):$.getJSON(getBrandListUrl,function(t){$.brand("#J_tBrand","#J_tType","#J_searchType",t)})});
