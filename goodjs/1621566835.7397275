(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{147:function(n,t,e){"use strict";e.d(t,"f",(function(){return M})),e.d(t,"g",(function(){return C})),e.d(t,"h",(function(){return T})),e.d(t,"i",(function(){return J})),e.d(t,"j",(function(){return H})),e.d(t,"b",(function(){return E})),e.d(t,"a",(function(){return z})),e.d(t,"e",(function(){return R})),e.d(t,"c",(function(){return P})),e.d(t,"d",(function(){return $}));var a,i,r,c,o,l,u=e(24),s=e.n(u),v=e(26),d=e(3),f=e(20),h=e(4),g=e(0),m=e(52),p=["uk","us","au"],b=["business","commentisfree","culture","environment","media","money","sport","technology"],w=[{tid:"section",tname:"sectionName"},{tid:"keywordIds",tname:"keywords"},{tid:"seriesId",tname:"series"},{tid:"authorIds",tname:"author"}],y=[{type:"content",indexInRecord:1},{type:"front",indexInRecord:2}],k=Math.floor(Date.now()/864e5),j=(1!==(i=(a=new Date).getDay()||7)&&a.setHours(-24*(i-1)),Math.floor(a.getTime()/864e5)),I=!1,x=function(n){c=n,d.a.local.set("gu.history.summary",n)},O=function(){return r=r||d.a.local.get("gu.history")||[]},_=function(){return c||(c=d.a.local.get("gu.history.summary"),Object(h.a)(c)&&Object(h.a)(c.tags)&&"number"==typeof c.periodEnd||(c={periodEnd:k,tags:{},showInMegaNav:!0})),c},z=function(n){var t=_();delete t.tags[n],x(t)},R=function(n){var t=O().find((function(t){return t[0]===n}));return!!(t&&t[1]>1)},A=function(n){var t=new RegExp("^(".concat(p.join("|"),")/(").concat(b.join("|"),")$")),e=new RegExp("^(".concat(p.join("|"),")/"));if(n){var a=n.replace(/^\/|\/$/g,"");a.match(t)&&(a=a.replace(e,""));var i=a.split("/");return 2===i.length&&i[0]===i[1]&&(a=[i[0]].join("/")),a}return""},E=function(n){var t=n&&n.flush;return o=!t&&o||function(n){var t=_().tags,e=Object.keys(t),a=Object.assign({},{number:100,weights:{},thresholds:{}},n);return a.whitelist&&(e=e.filter((function(n){return a.whitelist.includes(n)}))),a.blacklist&&(e=e.filter((function(n){return!a.blacklist.includes(n)}))),e.map((function(n){var e=t[n],i=y.reduce((function(n,t){return n+function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=0,i=n.reduce((function(n,e){var i=e[0],r=e[1];return a+=r,n+t*(9+r)*(90-i)}),0);return a<e?0:i}(e[t.indexInRecord],a.weights[t.type],a.thresholds[t.type])}),0);return{idAndName:[n,e[0]],rank:i}})).filter(Boolean).sort((function(n,t){return n.rank-t.rank})).slice(-a.number).map((function(n){return n.idAndName})).reverse()}({blacklist:l=l||Object(v.a)(".js-navigation-header .js-top-navigation a").map((function(n){return A(Object(f.c)(Object(v.a)(n).attr("href")))})),number:10,weights:{content:1,front:5},thresholds:{content:5,front:1}})},N=function(n){return(n||"").split(",")[0]},M=function(n){var t,e=n.pageId,a=0;n.isFront||((t=O().filter((function(n){var t=Array.isArray(n),i=t&&n[0]===e;return a=i?n[1]:a,t&&!i}))).unshift([e,a+1]),function(n){r=n,d.a.local.set("gu.history",n)}(t.slice(0,50)))},C=function(n,t){var e=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,e=t-n.periodEnd;return 0!==e&&(n.periodEnd=t,Object.keys(n.tags).forEach((function(t){var a=n.tags[t],i=y.map((function(n){if(a[n.indexInRecord]){var t=a[n.indexInRecord].map((function(n){var t=n[0]+e;return t<90&&t>=0&&[t,n[1]]})).filter(Boolean);return t.length>1||1===t.length&&t[0][0]<10?t:[]}return[]}));i.some((function(n){return n.length}))?n.tags[t]=[a[0]].concat(i):delete n.tags[t]}))),n}(_(),t),a=A(n.pageId),i=!1,r=w.reduceRight((function(t,e){var r=A(N(n[e.tid])),c=r&&N(n[e.tname]);return r&&c&&(t[r]=c),i=i||r===a,t}),{});Object.keys(r).forEach((function(n){var t=r[n],a=e.tags[n]||[];y.forEach((function(n){a[n.indexInRecord]=a[n.indexInRecord]||[]})),a[0]=t;var c=a[i?2:1],o=c.find((function(n){return 0===n[0]}));o?o[1]+=1:c.unshift([0,1]),e.tags[n]=a})),x(e)},D=function(){return Object(v.a)(".js-global-navigation")},B=function(){D().each((function(n){s.a.mutate((function(){Object(v.a)(".js-global-navigation__section--history",n).remove()}))})),I=!1},F=function(n,t){return'<li class="inline-list__item">\n        <a href="/'.concat(n[0],'" class="button button--small button--tag button--secondary" data-link-name="').concat(t+1," | ").concat(n[1],'">').concat(n[1],"</a>\n    </li>")},T=function(){var n;if(!1!==_().showInMegaNav){I&&B();var t=E();t.length&&(n='<li class="global-navigation__section js-global-navigation__section--history" data-link-name="shortcuts">\n                        <span class="global-navigation__title global-navigation__title--history">recently visited</span>\n                        <ul class="global-navigation__children global-navigation__children--history">\n                            '.concat(t.map(F).join(""),'\n                            <a class="button button--small button--tag button--tertiary" href="/preferences" data-link-name="edit">edit these</a>\n                        </ul>\n                    </li>'),s.a.mutate((function(){D().prepend(n)})),I=!0)}},H=function(){return!1!==_().showInMegaNav},J=function(n){var t=_();t.showInMegaNav=n,t.showInMegaNav?T():B(),x(t)},P=function(n){if(!n.isFront&&!Object(g.d)(m.a.name)){var t=d.a.local.get("gu.history.dailyArticleCount")||[];if(t[0]&&t[0].day&&t[0].day===k)t[0].count+=1;else{t.unshift({day:k,count:1});var e=k-60,a=t.findIndex((function(n){return n.day&&n.day<e}));a>0&&t.splice(a)}d.a.local.set("gu.history.dailyArticleCount",t)}},$=function(n){if(!n.isFront&&!Object(g.d)(m.a.name)){var t=d.a.local.get("gu.history.weeklyArticleCount")||[];if(t[0]&&t[0].week&&t[0].week===j)t[0].count+=1;else{t.unshift({week:j,count:1});var e=j-365,a=t.findIndex((function(n){return n.week&&n.week<e}));a>0&&t.splice(a)}d.a.local.set("gu.history.weeklyArticleCount",t)}}},161:function(n,t){n.exports={markup:'<span class="inline-paid-content inline-commercial"><svg viewBox="0 0 351 227" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="0" d="m0 31.6h123v-15.7-15.7h-123v31.4"/><mask id="1" fill="#fff"><use xlink:href="#0"/></mask></defs><g fill="none" fill-rule="evenodd"><path fill="#005689" d="m0 0h351v52h-351z"/><g transform="translate(174 14)"><path d="m4.2 26.8c.1-.8.6-1.8 1.9-1.9h4.5c1.3 0 1.9 1.1 1.9 1.9 0 1.7-1.1 2.3-4.4 2.3-2.9 0-4.1-1.2-4-2.3m6-14.2c0 3-.7 3.4-1.8 3.4-1.2 0-2.1-.4-2.1-3.4 0-3.1.9-3.9 2.1-3.9 1.2 0 1.8 1.1 1.8 3.9m-3.9 7.4c-.6 0-1.3-.4-1.3-1 0-.4.3-.9.7-1.2.8.3 1.6.3 2.6.3 4.1 0 6.9-1.9 6.9-5.5 0-1.6-.7-2.4-1.7-3.4l2.7.7v-3.2l-4.3.8c-1-.4-2.4-.8-3.7-.8-4.1 0-6.9 2.2-6.9 5.7 0 2.2 1.1 3.7 2.6 4.6l.1.1c-.9.6-2.8 2.1-2.8 3.8 0 1.3.8 2.5 2.5 2.9-1.8.4-3.8 1.3-3.8 3.4 0 2.2 3.1 4.2 8.1 4.2 6.2 0 8.7-3 8.7-6.8 0-3.2-1.5-4.7-5-4.7h-5.5m17 4.1c.2 0 .5 0 .7-.1 1.8-.2 3.5-1.1 4.4-2.2v2.2l6.3-.8v-1.1l-1.6-1.1v-14.2h-.5l-6.3 1.2v1.4l2.1.9v9.6c-.6.4-1.3.7-2.2.7-1.3 0-2.5-.4-2.5-2.3v-11.6h-.5l-6.3 1.3v1.4l2.1.8v8.6c0 2.8 1.2 5.1 4.4 5.1m72.8-2.9c-1 0-2.1-.6-2.1-2.4 0-1.3 1.3-2.5 2.5-2.6l1.2-.3v4.5c0 0-1 .8-1.6.8m-1.2-12c2 0 2.8 1.1 2.8 3.1v1.8l-3.2.6c-3.1.6-5.5 1.5-5.5 4.9 0 2.7 1.8 4.6 4.4 4.6 2 0 3.9-.9 4.6-2.3h.2c.3 1.7 1.7 2.3 3.4 2.3 1.3 0 2.5-.3 3-.8v-1.1l-1.5-.8v-9.5c0-3.7-2.7-4.9-7-4.9-2.8 0-4.5.7-6 1.4v4.1h2.5l1.1-3.2c.6-.2 1.2-.2 1.4-.2m-52.9 12c-1 0-2.1-.6-2.1-2.4 0-1.3 1.3-2.5 2.5-2.6l1.2-.3v4.5c0 0-1 .8-1.6.8m-1.2-12c2 0 2.8 1.1 2.8 3.1v1.8l-3.2.6c-3.1.6-5.5 1.5-5.5 4.9 0 2.7 1.8 4.6 4.4 4.6 2 0 3.9-.9 4.6-2.3h.2c.3 1.7 1.7 2.3 3.4 2.3 1.3 0 2.5-.3 3-.8v-1.1l-1.5-.8v-9.5c0-3.7-2.7-4.9-7-4.9-2.8 0-4.5.7-6 1.4v4.1h2.5l1.1-3.2c.6-.2 1.2-.2 1.4-.2m10 .4l1.6.8v11l-1.6.8v1.6h8.9v-1.6l-2.1-.8v-8.6c.9-.7 2.2-1 3.6-1 .5 0 .8.1 1.2.2v-4.7c-.2-.1-.4-.1-.6-.1-1.7 0-3.2 1.2-4.1 3.3v-3.4h-.5l-6.3 1.1v1.6m22-1.8c-.6-.5-1.7-.7-2.6-.7-3.9 0-7.6 2.3-7.6 8.8 0 6.3 3.7 8.3 6.2 8.3 2 0 3.4-.9 4-1.8h.2v1.7h.5l6.2-.7v-1.2l-1.6-.9v-20.8h-.5l-6.6 1.1v1.5l1.9.8v4.1m0 12.8c-.4.3-.9.6-1.7.6-2.1 0-3.1-1.7-3.1-5.7 0-4.6 1.3-6.1 2.9-6.1.9 0 1.5.3 1.8.7v10.5m7.4-12.6v1.5l1.6.8v11l-1.6.8v1.6h8.4v-1.6l-1.6-.8v-14.4h-.5l-6.3 1.1m4.4-7.7c-1.6 0-2.8 1.3-2.8 2.9 0 1.6 1.3 2.8 2.8 2.8 1.5 0 2.8-1.3 2.8-2.8-.1-1.6-1.3-2.9-2.8-2.9m20.3 23.5h8.4v-1.6l-1.6-.8v-10.5c.6-.5 1.5-.6 2.3-.6 1.5 0 1.9.5 1.9 2.2v8.9l-1.6.8v1.6h8.4v-1.6l-1.6-.8v-10c0-3-1.1-4.4-3.7-4.4-2.2 0-4.3.8-5.7 2.1v-2.2h-.5l-6.5 1.2v1.4l1.7.8v11l-1.6.8v1.6" fill="#fff" mask="url(#1)" transform="translate(44)"/><path d="m2.1 19c0 3 1.5 4.9 4.7 4.9 1.6 0 3.3-.4 4.3-1.2v-2c-.4.2-1 .3-1.5.3-1.5 0-2.2-.8-2.2-2.4v-8.7h3.7v-2.6h-3.7v-3.9l-5.3.8v3.2l-2.1.5v2.1h2.1v9.2m17.3 4.5v-1.6l-1.6-.8v-10.3c.6-.5 1.7-.9 2.5-.9 1.5 0 2.3.8 2.2 2.2v8.9l-1.6.8v1.6h8.4v-1.6l-1.6-.8v-10c0-3-1.7-4.4-4-4.4-2.2 0-4.5.7-5.9 2v-8.9h-.5l-6.3 1.1v1.6l2.1.8v17.9l-1.6.8v1.6h7.9m17.3-15c1.3 0 2 .9 2 5l-4.4.4c.1-4.2.9-5.4 2.4-5.4m6.9 7c0-6.8-2.7-8.9-6.8-8.9-4.7 0-7.9 3.3-7.9 8.6 0 5.5 2.9 8.5 8.3 8.5 2.9 0 5.1-1.4 5.9-2.5v-1.6c-1.1.4-2 .6-4 .6-2.9 0-4.9-1.7-4.9-4.8h9.5" fill="#aadce6"/></g><path fill="#fff" d="m0 50h351v177h-351z"/><g fill="#d8d8d8"><path d="m54 58h187v72h-187z"/><path d="m6 58h42v7h-42z"/><path d="m248 58h42v72h-42z"/><path d="m150 136h42v72h-42z"/></g><path fill="#f6a623" d="m248 136h91v72h-91z"/><g fill="#d8d8d8"><path d="m54 136h91v72h-91z"/><path d="m297 58h42v72h-42z"/><path d="m199 136h42v72h-42z"/></g></g></svg></span>'}},271:function(n,t,e){"use strict";e.d(t,"a",(function(){return a}));var a=new Promise((function(n){window.guardian.css.loaded?n():window.guardian.css.onLoad=n}))},292:function(n,t,e){"use strict";var a=e(11),i=e(3),r=e(104),c=e(128),o=document.location,l=function(n){Object(r.c)(n)},u=function(n){if(n.validTarget)return n.target.hasAttribute("data-sponsor")?Object(r.f)(n.target):void(n.sameHost?n.samePage?function(n){n.tag&&Object(r.e)(n.target,n.tag)}(n):function(n){var t={path:o.pathname,tag:n.tag||"untracked",time:(new Date).getTime()};i.a.session.set("gu.analytics.referrerVars",t)}(n):function(n){Object(r.a)(n.target,n.tag)}(n))};t.a={init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.location&&(o=n.location),a.a.on("module:clickstream:interaction",l),a.a.on("module:clickstream:click",(function(n){Object(c.b)([["c-analytics",function(){u(n)}]])}))},trackClick:u,trackNonClickInteraction:l}}}]);
//# sourceMappingURL=graun.commercial-hosted~enhanced.js.map