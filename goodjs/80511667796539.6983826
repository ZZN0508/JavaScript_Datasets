(window.webpackJsonp=window.webpackJsonp||[]).push([["channels"],{3010:function(n,e,t){"use strict";t.r(e);var o,i,a=(t("99af"),t("d3b7"),t("ddb0"),t("2909")),r=t("5530"),l=t("487a"),s=t.n(l),l=(t("d81d"),t("96cf"),t("1da1")),c=t("7085"),u=t("7ad6"),d=(i=Object(l.a)(regeneratorRuntime.mark(function n(e){var t,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=new AbortController,t=o.signal,i=e?"?offset=".concat(e):"",n.prev=3,n.next=6,fetch("".concat(c.b,"/channels").concat(i),{signal:t});case 6:return a=n.sent,n.next=9,a.json();case 9:return a=n.sent,a=a.channels,n.abrupt("return",a.map(function(n){return Object(u.a)(n,150)}));case 14:n.prev=14,n.t0=n.catch(3),console.log(n.t0);case 17:return n.abrupt("return",[]);case 18:case"end":return n.stop()}},n,null,[[3,14]])})),function(n){return i.apply(this,arguments)}),l=t("856b"),f=t.n(l),h=t("5d14"),v=t("7f9f"),l=t("f4ec"),l={name:"Channels",metaInfo:{title:"Channels",meta:[{name:"description",content:"Channels.",vmid:"description"},{name:"keywords",content:"channels"}]},directives:{infiniteScroll:s.a},data:function(){return{isLoading:!0,channels:[]}},setup:function(n,e){var t=Object(h.a)(d),i=t.loading,a=t.canLoad,t=t.load;return Object(r.a)({isMoreLoading:i,canLoadMore:a,loadMoreChannels:t},Object(v.a)(e))},computed:{channelPlaceholderImg:function(){return f.a},dummyChannels:function(){return Object(a.a)(new Array(6).keys())}},methods:{getChannelImgUrl:l.a,handleLoadMoreChannels:function(){var e=this;this.isMoreLoading||this.isLoading||!this.canLoadMore||this.loadMoreChannels().then(function(n){n&&(e.channels=[].concat(Object(a.a)(e.channels),Object(a.a)(n)))})}},mounted:function(){window.scroll(0,0)},created:function(){var e=this;this.isLoading=!0,d().then(function(n){e.channels=n,e.isLoading=!1})},beforeDestroy:function(){o&&o.abort()}},t=(t("6bf9"),t("2877")),l=Object(t.a)(l,function(){var h=this,n=h.$createElement,v=h._self._c||n;return v("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:h.handleLoadMoreChannels,expression:"handleLoadMoreChannels"}]},[h.channels&&!h.isLoading?v("div",{staticClass:"Channels container"},h._l(h.channels,function(n,e){var t=n.id,i=n.code,a=n.img,o=n.psName,r=n.psAbout,l=n.videos,s=n.ntAddress,c=n.psInNetwork,u=n.channelUrl,d=n.psAddress,f=n.useNtUrl,n=n.ntUrl;return v("div",{key:e,staticClass:"Channels__card"},[v("XxxChannelCard",{attrs:{img:1===a?h.getChannelImgUrl(t,150):h.channelPlaceholderImg,name:o,code:i,addresses:1===c?[s,i]:[d],externalUrl:1===c&&1===f?n:u,videos:l,about:r,"has-placeholder-img":0===a,"is-follow-loading":h.isChannelFollowLoading(t),"is-followed":h.isChannelFollowed(t),to:"/"+i},on:{"follow-click":function(n){return h.handleChannelFollow(t)}}})],1)}),0):h._e(),h.isLoading||h.isMoreLoading?v("div",[v("div",{staticClass:"Channels container"},h._l(h.dummyChannels,function(n){return v("div",{key:n,staticClass:"Channels__card"},[v("XxxChannelCard",{attrs:{"is-loading":""}})],1)}),0),v("XxxSpinner",{staticClass:"mx-auto"})],1):h._e()])},[],!1,null,"834ebbd6",null);e.default=l.exports},"487a":function(n,e,t){n.exports=function(){"use strict";var a="@@InfiniteScroll",d=function(n,e){var t,i,a,o,r,l=function(){n.apply(o,r),i=t};return function(){if(o=this,r=arguments,t=Date.now(),a&&(clearTimeout(a),a=null),i){var n=e-(t-i);n<0?l():a=setTimeout(function(){l()},n)}else l()}},s=function(n){return n===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):n.scrollTop},i=document.defaultView.getComputedStyle,f=function(n){var e=n;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var t=i(e).overflowY;if("scroll"===t||"auto"===t)return e;e=e.parentNode}return window},c=function(n){return n===window?document.documentElement.clientHeight:n.clientHeight},u=function(n){return n===window?s(window):n.getBoundingClientRect().top+s(window)},o=function(n){var e=n.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},r=function(){if(!this.binded){this.binded=!0;var e=this,n=e.el,t=n.getAttribute("infinite-scroll-throttle-delay"),i=200;t&&(i=Number(e.vm[t]||t),(isNaN(i)||i<0)&&(i=200)),e.throttleDelay=i,e.scrollEventTarget=f(n),e.scrollListener=d(h.bind(e),e.throttleDelay),e.scrollEventTarget.addEventListener("scroll",e.scrollListener),this.vm.$on("hook:beforeDestroy",function(){e.scrollEventTarget.removeEventListener("scroll",e.scrollListener)});var a=n.getAttribute("infinite-scroll-disabled"),o=!1;a&&(this.vm.$watch(a,function(n){e.disabled=n,!n&&e.immediateCheck&&h.call(e)}),o=Boolean(e.vm[a])),e.disabled=o;var r=n.getAttribute("infinite-scroll-distance"),l=0;r&&(l=Number(e.vm[r]||r),isNaN(l)&&(l=0)),e.distance=l;var s=n.getAttribute("infinite-scroll-immediate-check"),c=!0;s&&(c=Boolean(e.vm[s])),e.immediateCheck=c,c&&h.call(e);var u=n.getAttribute("infinite-scroll-listen-for-event");u&&e.vm.$on(u,function(){h.call(e)})}},h=function(n){var e=this.scrollEventTarget,t=this.el,i=this.distance;if(!0===n||!this.disabled){var a=s(e),o=a+c(e),r=!1;if(e===t)r=e.scrollHeight-o<=i;else{var l=u(t)-u(e)+t.offsetHeight+a;r=o+i>=l}r&&this.expression&&this.expression()}},e={bind:function(e,n,t){e[a]={el:e,vm:t.context,expression:n.value};var i=arguments;e[a].vm.$on("hook:mounted",function(){e[a].vm.$nextTick(function(){o(e)&&r.call(e[a],i),e[a].bindTryCount=0;var n=function n(){e[a].bindTryCount>10||(e[a].bindTryCount++,o(e)?r.call(e[a],i):setTimeout(n,50))};n()})})},unbind:function(n){n&&n[a]&&n[a].scrollEventTarget&&n[a].scrollEventTarget.removeEventListener("scroll",n[a].scrollListener)}},n=function(n){n.directive("InfiniteScroll",e)};return window.Vue&&(window.infiniteScroll=e,Vue.use(n)),e.install=n,e}()},"5d14":function(n,e,t){"use strict";t.d(e,"a",function(){return i});var a=t("750b");function i(n){var e=Object(a.e)(!1),t=Object(a.e)(!0),i=Object(a.e)(0);return{loading:e,load:function(){return e.value=!0,i.value+=100,n(i.value).then(function(n){return e.value=!1,0===n.length?t.value=!1:n})},canLoad:t}}},"6bf9":function(n,e,t){"use strict";var i=t("95f6");t.n(i).a},"856b":function(n,e,t){n.exports=t.p+"img/channel-placeholder.bab27720.png"},"95f6":function(n,e,t){}}]);
