var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,b){function c(t){t=t||function(){},reqwest({url:"https://fragment.tmall.com/umsite/data_products",data:{},type:"json",crossOrigin:!0,error:function(e){console.log("API error: [/data/products] "+e)},success:function(e){console.log("data_products: ",e),t(e)}})}var S,T;S=this,T=function(){function c(e){var t=(t=A.exec(e.url))&&t[1]||w.location.protocol;return z.test(t)?B.test(e.request.status):e.request.response}function d(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[C]&&(e.request.onreadystatechange=I,(c(e)?t:n)(e.request)))}}function f(e,t){var n,a=t.headers||{};a.Accept=a.Accept||K.accept[t.type]||K.accept["*"];var s="undefined"!=typeof FormData&&t.data instanceof FormData;for(n in t.crossOrigin||a[E]||(a[E]=K.requestedWith),a[D]||s||(a[D]=t.contentType||K.contentType),a)a.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,a[n])}function g(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function h(e,t){return e+(/\?/.test(e)?"&":"?")+t}function j(e,t,n,a){var s=F++,i=e.jsonpCallback||"callback",r=e.jsonpCallbackName||m.getcallbackPrefix(s),o=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),c=a.match(o),l=x.createElement("script"),d=0,e=-1!==navigator.userAgent.indexOf("MSIE 10.0");return c?"?"===c[3]?a=a.replace(o,"$1="+r):r=c[3]:a=h(a,i+"="+r),w[r]=function(e){l.data=e},l.type="text/javascript",l.src=a,l.async=!0,void 0===l.onreadystatechange||e||(l.htmlFor=l.id="_reqwest_"+s),l.onload=l.onreadystatechange=function(){return!(l[C]&&"complete"!==l[C]&&"loaded"!==l[C]||d)&&(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(l.data),y.removeChild(l),void(d=1))},y.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,n({},"Request is aborted: timeout",{}),y.removeChild(l),d=1}}}function e(e,t){var n,a=this.o,s=(a.method||"GET").toUpperCase(),i="string"==typeof a?a:a.url,r=!1!==a.processData&&a.data&&"string"!=typeof a.data?m.toQueryString(a.data):a.data||null,o=!1;return"jsonp"!=a.type&&"GET"!=s||!r||(i=h(i,r),r=null),"jsonp"==a.type?j(a,e,t,i):((n=a.xhr&&a.xhr(a)||L(a)).open(s,i,!1!==a.async),f(n,a),g(n,a),w[H]&&n instanceof w[H]?(n.onload=e,n.onerror=t,n.onprogress=function(){},o=!0):n.onreadystatechange=d(this,e,t),a.before&&a.before(n),o?setTimeout(function(){n.send(r)},200):n.send(r),n)}function i(e,t){this.o=e,this.fn=t,l.apply(this,arguments)}function k(e){return null===e?void 0:e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function l(a,b){function c(e){for(a.timeout&&clearTimeout(h.timeout),h.timeout=null;0<h._completeHandlers.length;)h._completeHandlers.shift()(e)}function d(d){var e=a.type||d&&k(d.getResponseHeader("Content-Type")),f,i;d="jsonp"===e?d:h.request;try{f=M.dataFilter(d.responseText,e),i=f,d.responseText=i}catch(a){}if(i)switch(e){case"json":try{d=w.JSON?w.JSON.parse(i):eval("("+i+")")}catch(a){return g(d,"Could not parse JSON in response",a)}break;case"js":d=eval(i);break;case"html":d=i;break;case"xml":d=d.responseXML&&d.responseXML.parseError&&d.responseXML.parseError.errorCode&&d.responseXML.parseError.reason?null:d.responseXML}for(h._responseArgs.resp=d,h._fulfilled=!0,b(d),h._successHandler(d);0<h._fulfillmentHandlers.length;)d=h._fulfillmentHandlers.shift()(d);c(d)}function f(){h._timedOut=!0,h.request.abort()}function g(e,t,n){for(e=h.request,h._responseArgs.resp=e,h._responseArgs.msg=t,h._responseArgs.t=n,h._erred=!0;0<h._errorHandlers.length;)h._errorHandlers.shift()(e,t,n);c(e)}this.url="string"==typeof a?a:a.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var h=this;b=b||function(){},a.timeout&&(this.timeout=setTimeout(function(){f()},a.timeout)),a.success&&(this._successHandler=function(){a.success.apply(a,arguments)}),a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)}),a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)}),this.request=e.call(this,d,g)}function m(e,t){return new i(e,t)}function p(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function o(e,t){function n(e){e&&!e.disabled&&t(o,p(e.attributes.value&&e.attributes.value.specified?e.value:e.text))}var a,s,i,r,o=e.name,c=e.tagName.toLowerCase();if(!e.disabled&&o)switch(c){case"input":/reset|button|image|file/i.test(e.type)||(a=/checkbox/i.test(e.type),s=/radio/i.test(e.type),i=e.value,(a||s)&&!e.checked||t(o,p(a&&""===i?"on":i)));break;case"textarea":t(o,p(e.value));break;case"select":if("select-one"===e.type.toLowerCase())n(0<=e.selectedIndex?e.options[e.selectedIndex]:null);else for(r=0;e.length&&r<e.length;r++)e.options[r].selected&&n(e.options[r])}}function n(){for(var e,i=this,t=0;t<arguments.length;t++)/input|select|textarea/i.test((e=arguments[t]).tagName)&&o(e,i),function(e,t){for(var n,a,s=0;s<t.length;s++)for(a=e[u](t[s]),n=0;n<a.length;n++)o(a[n],i)}(e,["input","select","textarea"])}function q(){return m.toQueryString(m.serializeArray.apply(null,arguments))}function r(){var a={};return n.apply(function(e,t){e in a?(a[e]&&!J(a[e])&&(a[e]=[a[e]]),a[e].push(t)):a[e]=t},arguments),a}function v(e,t,n,a){var s,i,r,o=/\[\]$/;if(J(t))for(i=0;t&&i<t.length;i++)r=t[i],n||o.test(e)?a(e,r):v(e+"["+("object"==(void 0===r?"undefined":_typeof(r))?i:"")+"]",r,n,a);else if(t&&"[object Object]"===t.toString())for(s in t)v(e+"["+s+"]",t[s],n,a);else a(e,t)}var w=a,s;if("document"in w)var x=b,u="getElementsByTagName",y=x[u]("head")[0];else try{s=require("xhr2")}catch(a){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}var z=/^http/,A=/(^\w+):\/\//,B=/^(20\d|1223)$/,C="readyState",D="Content-Type",E="X-Requested-With",F=0,G="XMLHttpRequest",H="XDomainRequest",I=function(){},J="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},K={contentType:"application/x-www-form-urlencoded",requestedWith:G,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},L=function(e){if(!0!==e.crossOrigin)return w[G]?new XMLHttpRequest:s?new s:new ActiveXObject("Microsoft.XMLHTTP");var t=w[G]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(w[H]){t=/^https?/;if(a.location.href.match(t)[0]!==e.url.match(t)[0])throw new Error("XDomainRequest: requests must be targeted to the same scheme as the hosting page.");return new XDomainRequest}throw new Error("Browser does not support cross-origin requests")},M={dataFilter:function(e){return e}};return i.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){l.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},m.serializeArray=function(){var a=[];return n.apply(function(e,t){a.push({name:e,value:t})},arguments),a},m.serialize=function(){if(0===arguments.length)return"";var e=Array.prototype.slice.call(arguments,0),t=e.pop();return("map"==(t=(t=t&&t.nodeType&&e.push(t)?null:t)&&t.type)?r:"array"==t?m.serializeArray:q).apply(null,e)},m.toQueryString=function(e,t){function n(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=r(e)+"="+r(t)}var a,s,i=[],r=encodeURIComponent;if(J(e))for(s=0;e&&s<e.length;s++)n(e[s].name,e[s].value);else for(a in e)e.hasOwnProperty(a)&&v(a,e[a],t||!1,n);return i.join("&").replace(/%20/g,"+")},m.getcallbackPrefix=function(){return"reqwest_"+ +new Date+(Math.random()+"").slice(-6)},m.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new i(e,t)},m.ajaxSetup=function(e){for(var t in e=e||{})M[t]=e[t]},m},"undefined"!=typeof module&&module.exports?module.exports=T():"function"==typeof define&&define.amd?define(T):S.reqwest=T();var d=function(){};d.prototype={init:function(){this.config=a.umengMessageConfig||{},this.demo=a.umengMessageDemo,this.createDom()},createDom:function(){this.dom=b.createElement("div"),this.dom.className="umeng_message",this.config.hide&&(this.dom.style.display="none");var e=this.config&&this.config.dom||{},t=e.right||0,n=e.bottom||24,e=e.zIndex||2147483647;this.dom.style.right=t+"px",this.dom.style.bottom=n+"px",this.dom.style.zIndex=e,b.body.appendChild(this.dom),this.createIcons(),this.createMi()},loadCSS:function(){},loadJS:function(e){var t=b.createElement("script");t.setAttribute("src",e),b.getElementsByTagName("head")[0].appendChild(t)},createIcons:function(){this.icons=b.createElement("ul"),this.icons.className="umeng_message_icons",this.dom.appendChild(this.icons)},createService:function(){function n(e){for(var t=e.target;t&&t.parentNode&&t!==a.dom;)t=t.parentNode;t!==a.dom&&(s(),b.body.removeEventListener("click",n,!1))}var a=this,s=function(){a.dom.classList.remove("active_service")},e=b.createElement("li");e.className="umeng_message_icon_service",e.innerHTML='\n\t\t\t\t\t<span class="umeng_message_icon"><i class="umeng_message_iconfont" style="font-size:24px;">&#xe622;</i></span>\n\t\t  \t\t\t<span class="umeng_message_text">在线<br/>客服</span>\n\t\t  \t\t',this.icons.insertBefore(e,this.formDom),e.addEventListener("click",function(){var e=a.dom.classList;e.remove("active_code"),e.remove("active_app_code"),e.remove("active_form"),e.contains("active_service")?e.remove("active_service"):e.add("active_service"),b.body.addEventListener("click",n,!1)},!1),this.dplus(e,"mouseenter","gndj_rkxf",{rkmc:"在线客服"}),this.dplus(e,"click","gndj_rk",{rkmc:"在线客服"})},createLink:function(e){var t=b.createElement("li");t.innerHTML='\n\t\t\t\t<a href="//account.umeng.com/feedback" target="_blank">\n\t\t\t\t\t<span class="umeng_message_icon">\n\t\t  \t\t\t\t<i class="umeng_message_iconfont">&#xe605;</i>\n\t\t  \t\t\t</span>\n\t\t  \t\t\t<span class="umeng_message_text">反馈<br/>中心</span>\n\t\t  \t\t\t'+(!0===e.data?"<sup>&bull;</sup>":"")+"\n\t\t\t\t</a>\n\t\t  \t\t",t.className="umeng_message_icon_links",this.icons.insertBefore(t,this.codeDom),this.dplus(t,"mouseenter","gndj_rkxf",{rkmc:"反馈中心"}),this.dplus(t,"mousedown","gndj_rk",{rkmc:"反馈中心"},!0)},createForm:function(){function n(e){for(var t=e.target;t&&t.parentNode&&t!==c.dom;)t=t.parentNode;t!==c.dom&&(a(),b.body.removeEventListener("click",n,!1))}function e(){c.formData={questionInfo:"",ticketCategoryId:"",company:"",name:"",telephone:"",ticketTemplateId:""},Object.keys(c.formChild).map(function(e){c.formChild[e].classList.remove("error"),c.formChild[e].value=""}),b.querySelector(".umeng_message_form_inner").classList.remove("sending"),b.querySelector(".umeng_message_form_inner").classList.remove("success"),b.querySelector(".umeng_message_form_inner").classList.remove("error")}var c=this,a=function(){c.dom.classList.remove("active_form")},t=b.createElement("li");t.innerHTML='\n\t\t\t\t<span class="umeng_message_icon"><i class="umeng_message_iconfont">&#xe613;</i></span>\n    \t\t\t<span class="umeng_message_text">商务<br/>咨询</span>\n\t\t\t',t.className="umeng_message_icon_form",this.icons.appendChild(t),(this.formDom=t).addEventListener("click",function(){var e=c.dom.classList;e.remove("active_code"),e.remove("active_app_code"),e.remove("active_service"),e.contains("active_form")?e.remove("active_form"):e.add("active_form"),b.body.addEventListener("click",n,!1)},!1);var l=b.createElement("div");l.className="umeng_message_form",l.innerHTML='\n\t\t\t\t<div class="umeng_message_form_title">请输入如下咨询内容：</div>\n\t\t\t\t<div class="umeng_message_form_inner'+(this.isLogin?" islogin":"")+'">\n\t\t\t\t\t<div class="umeng_message_form_item umeng_message_form_select_wrapper">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="text" placeholder="选择要咨询的产品（必填）" disabled/>\n\t\t\t\t\t\t\t<i class="umeng_message_iconfont">&#xe61a;</i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<ul class="umeng_message_form_select">\n\t\t\t\t\t\t\t<li>加载中...</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_item umeng_message_form_item_company">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="text" placeholder="输入你的公司或产品名称"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_item umeng_message_form_item_name">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="text" placeholder="联系人姓名（必填）"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_item  umeng_message_form_item_telephone">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="text" placeholder="联系人手机号（必填）"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_item">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<textarea placeholder="请描述您的详细诉求（必填）" class="umeng_message_form_item_questionInfo"></textarea>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_footer">\n\t\t\t\t\t\t<button>提 交</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_loading">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<svg class="lds-spinner" width="100px"  height="100px"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: none;"><g transform="rotate(0 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(30 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(60 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(90 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(120 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(150 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(180 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(210 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(240 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(270 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(300 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(330 50 50)">\n  <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#449cfa">\n    <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate>\n  </rect>\n</g></svg>\n<p>提交中...</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="umeng_message_form_error"></div>\n\t\t\t\t\t<div class="umeng_message_form_info">\n\t\t\t\t\t\t提交成功！\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',this.dom.appendChild(l),t.style.display="none",this.createAppDownload(),this.createCode(),this.createScrollTop();t=l.querySelector(".umeng_message_form_footer > button");this.formData={questionInfo:"",ticketCategoryId:"",company:"",name:"",telephone:"",ticketTemplateId:""},this.formChild={ticketCategoryId:l.querySelector(".umeng_message_form_select_wrapper input"),questionInfo:l.querySelector(".umeng_message_form_item_questionInfo"),company:l.querySelector(".umeng_message_form_item_company input"),name:l.querySelector(".umeng_message_form_item_name input"),telephone:l.querySelector(".umeng_message_form_item_telephone input")},Object.keys(this.formChild).map(function(e){"ticketCategoryId"!==e&&(c.formChild[e].onkeyup=function(){s(e,c.formChild[e])},c.formChild[e].onblur=function(){setTimeout(function(){m(e,c.formChild[e])},50)})});var s=function(e,t){c.formData[e]=t.value},m=function(e,t){c.formData[e]&&""!=c.formData[e]?t.classList.remove("error"):t.classList.add("error")};b.querySelector(".umeng_message_form_error").onclick=function(){e()},b.querySelector(".umeng_message_form_info").onclick=function(){e()},t.onclick=function(){var e,t,n,a,s,i,r,o;Object.keys(c.formChild).map(function(e){c.isLogin&&"ticketCategoryId"!==e&&"questionInfo"!==e||m(e,c.formChild[e])}),l.querySelector(".error")||((e=b.querySelector(".umeng_message_form_inner")).classList.add("sending"),t=(r=c.formData).questionInfo,n=r.ticketCategoryId,a=r.ticketTemplateId,s=r.company,i=r.name,r=r.telephone,(o=new XMLHttpRequest).open("post","//account.umeng.com/api/ticket/create",!0),o.withCredentials=!0,o.onload=function(){4===o.readyState&&(e.classList.remove("sending"),200===o.status?e.classList.add("success"):(e.classList.add("error"),e.querySelector(".umeng_message_form_error").innerHTML=JSON.parse(o.responseText).msg))},o.onerror=function(){e.classList.remove("sending"),e.classList.add("error"),e.querySelector(".umeng_message_form_error").innerHTML="未知错误，请刷新或者联系客服！"},o.send(JSON.stringify({questionInfo:t,ticketCategoryId:n,ticketTemplateId:a,data:{company:s,name:i,telephone:r}})))}},createTicketCategoryTree:function(e){var n=this,a=this.dom.getElementsByClassName("umeng_message_form_select_wrapper")[0],t=a.getElementsByTagName("label")[0],s=a.getElementsByTagName("input")[0],i=a.getElementsByTagName("ul")[0];i.innerHTML="",e.map(function(t){var e=b.createElement("li");e.innerHTML=t.name,i.appendChild(e),e.onclick=function(){s.value=t.name,n.formData.ticketCategoryId=t.id,n.formChild.ticketCategoryId.classList.remove("error");var e=t.children.filter(function(e){return"商务咨询"==e.name});n.formData.ticketTemplateId=e[0]&&e[0].id,o()}});function r(e){for(var t=e.target;t&&t.parentNode&&t!==a;)t=t.parentNode;t!==a&&(o(),b.body.removeEventListener("click",r,!1))}var o=function(){a.classList.remove("active")};t.onclick=function(){a.classList.add("active"),b.body.addEventListener("click",r,!1)}},createCode:function(){function n(e){for(var t=e.target;t&&t.parentNode&&t!==a.dom;)t=t.parentNode;t!==a.dom&&(s(),b.body.removeEventListener("click",n,!1))}var a=this,s=function(){a.dom.classList.remove("active_code")},e=b.createElement("li");e.innerHTML='\n\t\t\t\t<span class="umeng_message_icon"><i class="umeng_message_iconfont">&#xe67e;</i></span>\n    \t\t\t<span class="umeng_message_text">关注<br/>我们</span>\n\t\t\t',e.className="umeng_message_icon_code",this.icons.appendChild(e),this.codeDom=e;var t=b.createElement("div");t.className="umeng_message_code",t.innerHTML='\n\t\t\t\t<div>\n\t\t\t\t\t<img src="//img.alicdn.com/tfs/TB1wPbsaYGYBuNjy0FoXXciBFXa-176-176.png" alt="" />\n\t\t\t\t\t<p>友盟全域数据</p>\n\t\t\t\t\t<span>前沿的数据行业新风向</span>\n\t\t\t\t</div>\n\t\t\t',this.dom.appendChild(t),e.addEventListener("click",function(){var e=a.dom.classList;e.remove("active_service"),e.remove("active_form"),e.remove("active_app_code"),e.contains("active_code")?e.remove("active_code"):e.add("active_code"),b.body.addEventListener("click",n,!1)},!1),this.dplus(e,"mouseenter","gndj_rkxf",{rkmc:"二维码"}),this.dplus(e,"click","gndj_rkxf",{rkmc:"二维码"})},createAppDownload:function(){var e,a,t,n,s,i,r=this,o=(this.config||{}).qrCode||{};o.hide||(e=function(){var e=r.dom.classList;e.remove("active_service"),e.remove("active_form"),e.remove("active_code"),e.contains("active_app_code")?e.remove("active_app_code"):e.add("active_app_code"),b.body.addEventListener("click",t,!1)},a=function(){r.dom.classList.remove("active_app_code")},t=function e(t){for(var n=t.target;n&&n.parentNode&&n!==r.dom;)n=n.parentNode;n!==r.dom&&(a(),b.body.removeEventListener("click",e,!1))},(n=b.createElement("li")).innerHTML='\n\t\t\t\t<span class="umeng_message_icon">'+(o.btn||"掌上<br>友盟")+'</span>\n\t\t\t\t\t<span class="umeng_message_text">'+(o.btnHover||"掌上<br>友盟")+"</span>\n\t\t\t",n.className="umeng_message_icon_app_code",this.icons.appendChild(n),this.codeDom=n,(s=b.createElement("div")).className="umeng_message_app_code",0<Object.keys(o).length?o.extra?(i=o.extra.reduce(function(e,t){return e+('\n\t\t\t\t\t\t<div style="margin-left: 20px;">\n\t\t\t\t\t\t\t<img src="'+(t.img||"//img.alicdn.com/tfs/TB1tmkCctTfau8jSZFwXXX1mVXa-1280-1280.png")+'" alt="" />\n\t\t\t\t\t\t\t<p>'+(t.title||"微信扫一扫")+"</p>\n\t\t\t\t\t\t\t<span>"+(t.desc||"方便快捷实时数据查看"))+"</span>\n\t\t\t\t\t\t</div>"},'\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img src="'+(o.img||"//img.alicdn.com/tfs/TB1tmkCctTfau8jSZFwXXX1mVXa-1280-1280.png")+'" alt="" />\n\t\t\t\t\t\t<p>'+(o.title||"微信扫一扫")+"</p>\n\t\t\t\t\t\t<span>"+(o.desc||"方便快捷实时数据查看")+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t"),s.innerHTML=i):(console.log("qrConf2",o),s.innerHTML='\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img src="'+(o.img||"//img.alicdn.com/tfs/TB1tmkCctTfau8jSZFwXXX1mVXa-1280-1280.png")+'" alt="" />\n\t\t\t\t\t\t<p>'+(o.title||"微信扫一扫")+"</p>\n\t\t\t\t\t\t<span>"+(o.desc||"方便快捷实时数据查看")+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t"):s.innerHTML='\n\t\t\t\t<div style="margin-right: 20px;">\n\t\t\t\t\t<img src="'+(o.img||"//img.alicdn.com/tfs/TB1tmkCctTfau8jSZFwXXX1mVXa-1280-1280.png")+'" alt="" />\n\t\t\t\t\t<p>'+(o.title||"微信扫一扫")+"</p>\n\t\t\t\t\t<span>"+(o.desc||"方便快捷实时数据查看")+'</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<img src="'+(o.img2||"//img.alicdn.com/tfs/TB1s5TCMZfpK1RjSZFOXXa6nFXa-512-512.png")+'" alt="" />\n\t\t\t\t\t<p>'+(o.title2||"友盟+客户端")+"</p>\n\t\t\t\t\t<span>"+(o.desc2||"苹果/安卓版U-App统计")+"</span>\n\t\t\t\t</div>",this.dom.appendChild(s),n.addEventListener("mouseover",e,!1),n.addEventListener("mouseout",e,!1),this.dplus(n,"mouseenter","gndj_rkxf_hover",{rkmc:o.btnHover||"app下载"}),this.dplus(n,"click","gndj_rkxf",{rkmc:o.btnHover||"app下载"}))},createScrollTop:function(){var e=this.config&&this.config.scroll||{};if(!(!1!==e.show))return null;var t,n=e.target||b.documentElement,s=e.visibilityHeight||100,i=b.createElement("li");i.style.display=0<(n.scrollTop||b.body.scrollTop)-s?"block":"none",i.innerHTML='\n\t\t\t\t<span class="umeng_message_icon"><i class="umeng_message_iconfont">&#xe895;</i></span>\n    \t\t\t<span class="umeng_message_text">返回<br/>顶部</span>\n\t\t\t',i.addEventListener("click",function(){var t=setInterval(function(){var e=Math.floor(.8*(n.scrollTop||b.body.scrollTop));n.scrollTop=e,(b.body.scrollTop=e)<5&&clearInterval(t)},20)}.bind(this),!1),this.icons.appendChild(i),this.scrollDom=i,a.addEventListener("scroll",function(){clearTimeout(t),t=setTimeout(function(){i.style.display=0<(n.scrollTop||b.body.scrollTop)-s?"block":"none"},100)},!1),this.dplus(i,"mouseenter","gndj_rkxf",{rkmc:"回到顶部"}),this.dplus(i,"click","gndj_rkxf",{rkmc:"回到顶部"})},createServicePopup:function(e,s){var i=this;this.tab=[],this.list=[];var t=b.querySelector(".umeng_message_container")||b.createElement("div");t.className="umeng_message_container",t.innerHTML=null,this.servicePop=b.createElement("div"),this.servicePop.className="umeng_message_inner";var n=b.createElement("div");n.className="umeng_message_title",n.innerHTML="选择要咨询的产品：";var r=b.createElement("ul");r.className="umeng_message_tab",e.map(function(e,t){var n=b.createElement("li");n.innerHTML=e.name,n.addEventListener("click",i.showContainer.bind(i,t),!1),r.appendChild(n),i.tab.push(n)});var o=b.createElement("div");o.className="umeng_message_lists",e.map(function(e){var t=b.createElement("div");t.className="umeng_message_list";var n,a=b.createElement("ul");a.className="umeng_message_list_ul",e.list_prods.map(function(e){var t,n;"adplus_taotrack"!==e.code&&((t=b.createElement("li")).innerHTML='<a href="javascript:;" title="'+e.name+" - "+e.title+'"><span>'+e.name+"</span></a>",a.appendChild(t),e.alicare_outer_link?t.addEventListener("click",i.jumpUrl.bind(i,e.alicare_outer_link),!1):(n=s+"&from="+e.alicare_from+"&sourceId=1523174451",t.addEventListener("click",i.showMi.bind(i,n),!1)),i.dplus(t,"click","zxcp_gndj",{cplm:e.name}))}),t.appendChild(a),e.phoneNum&&((n=b.createElement("div")).className="umeng_message_phone",n.innerHTML="热线电话："+e.phoneNum,t.appendChild(n)),o.appendChild(t),i.list.push(t)}),t.appendChild(n),this.servicePop.appendChild(r),this.servicePop.appendChild(o),t.appendChild(this.servicePop),this.dom.appendChild(t);var c=0;e.map(function(e,t){-1!==a.location.href.indexOf(e.code)&&(c=t)}),this.showContainer(c)},showContainer:function(n){var a=this;n=n||0,this.tab.map(function(e,t){n===t?(e.classList.add("active"),a.list[t].classList.add("active")):(e.classList.remove("active"),a.list[t].classList.remove("active"))})},createMi:function(){this.mi=b.createElement("div"),this.mi.className="umeng_message_mi",this.dom.appendChild(this.mi);var e=b.createElement("div");e.className="umeng_message_mi_close umeng_message_iconfont",e.innerHTML="&#xe789;",this.mi.appendChild(e),e.addEventListener("click",this.closeMi.bind(this),!1),this.iframe=b.createElement("iframe"),this.iframe.style.cssText="width:100%;height:100%;border:0 none;",this.iframe.scrolling="no",this.mi.appendChild(this.iframe),a.addEventListener("message",function(e){try{t=JSON.parse(e.data)}catch(e){t={}}var e=t,t=e.code,e=e.source;102===t&&"alicare-dialog"===e&&a.location.reload()})},showMi:function(t){var n;this.isLogin?(n=e.aliMeURL+"?callback=umengMessageRefreshAliMiURL",umengMessage.loadJS(n),this.iframe.src=t,this.mi.classList.remove("hide"),this.mi.classList.add("show"),this.dom.classList.remove("active_service")):a.location.href="//passport.umeng.com/login?redirectURL="+encodeURIComponent(a.location.href)},jumpUrl:function(e){this.isLogin?a.open(e):a.location.href="//passport.umeng.com/login?redirectURL="+encodeURIComponent(a.location.href)},closeMi:function(){this.mi.classList.remove("show"),this.mi.classList.add("hide")},dplus:function(e,t,n,s,i){e.addEventListener(t,function(){var e=a.dplus||{track:function(e,t){console.log(e,t)},track_links:function(e,t,n){console.log(e,t,n)}};i?(console.log(b.querySelector(".umeng_message_icon_links a")),e.track_links(".umeng_message_icon_links a",n,s,function(){},500)):e.track(n,s)},!1)},showService:function(e){e.dom&&this.servicePop&&e.dom.appendChild(this.servicePop);for(var t=this.servicePop.getElementsByClassName("umeng_message_lists")[0].getElementsByTagName("li"),n=0;n<t.length;n++)t[n].style.width=e.itemWidth,e.event.map(function(e){t[n].addEventListener(e.trigger,e.callback,!1)})}};var e={loginInfo:"//passport.umeng.com/api/user/publicHeader",menuData:"//www.umeng.com/tms/jsonp/www/data/products",messageExist:"//account.umeng.com/api/ticket/message/exist",ticketExist:"//account.umeng.com/api/ticket/exist",aliMeURL:"//passport.umeng.com/api/user/aliMeUrl",ticketCategoryTree:"//account.umeng.com/api/ticket/category/tree"};a.umengMessage=new d;var f=function(){var n;umengMessage.init(),!0===a.umengMessageDemo&&(e.loginInfo="//dip.alibaba-inc.com/api/v2/services/schema/mock/73568",e.messageExist="//dip.alibaba-inc.com/api/v2/services/schema/mock/73556",e.ticketExist="//dip.alibaba-inc.com/api/v2/services/schema/mock/73486",e.aliMeURL="//dip.alibaba-inc.com/api/v2/services/schema/mock/73963",e.ticketCategoryTree="//dip.alibaba-inc.com/api/v2/services/schema/mock/73534"),a.umengMessageGetLoginInfo=function(t){t=null!=t.data.umplus_uc_loginid&&null!=t.data.umplus_uc_token||"taobao"==t.data.source;umengMessage.isLogin=t,umengMessage.createForm(),umengMessage.createService(),c(function(t){n=t||[];t=e.aliMeURL+"?callback=umengMessageGetAliMiURL";umengMessage.loadJS(t)});t=e.ticketExist+"?callback=umengMessageGetTicketData";umengMessage.loadJS(t),e.ticketCategoryTree},a.umengMessageGetTicketCategoryTreeURL=function(e){e&&e.data&&e.data[0]&&umengMessage.createTicketCategoryTree(e.data)},a.umengMessageGetAliMiURL=function(e){e=e&&e.data&&e.data.url||"";umengMessage.createServicePopup(n,e),a.umengMessageGetAliMiURL=void 0},a.umengMessageRefreshAliMiURL=function(e){console.log("umengMessageRefreshAliMiURL",e);e=e&&e.data&&e.data.url||"";umengMessage.createServicePopup(n,e)},a.umengMessageGetMessageData=function(e){umengMessage.createLink(e),a.umengMessageGetMessageData=void 0},a.umengMessageGetTicketData=function(t){t&&t.data&&!0===t.data&&(t=e.messageExist+"?callback=umengMessageGetMessageData",umengMessage.loadJS(t))};var t=e.loginInfo+"?callback=umengMessageGetLoginInfo";umengMessage.loadJS(t)},g={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};if(!(g.versions.android||g.versions.iPhone||a.ActiveXObject&&b.documentMode&&parseInt(b.documentMode)<10))if(!0===a.umengMessageDemo)f();else{var h=b.getElementsByTagName("SCRIPT"),j="";if(h&&0<h.length)for(var k in h)h[k].src&&h[k].src.match(/umeng_message\.js$/)&&(j=h[k].src.replace(/(.*)umeng_message\.js$/,"$1"));var i=b.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",j+"umeng_message.css"),b.getElementsByTagName("head")[0].appendChild(i),i.addEventListener("load",function(){f()},!1)}}(window,document);
