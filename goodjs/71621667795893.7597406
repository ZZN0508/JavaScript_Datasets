function ifeng_Scroll(t,e,i){this.IsAutoScroll=!0,this.IsSmoothScroll=!0,this.PauseTime=1e3,this.Direction="N",this.ControllerType="click",this.BackCall=null,this.Step=1,this.Speed=10,this.container=t,this.NextButton=this.$(i),this.PreviousButton=this.$(e),this.ScrollElement=this.$(t),this.UlElement=this.$(t).getElementsByTagName("ul")[0],this.UlElement.innerHTML+=this.UlElement.innerHTML,this.UlSpace,this.LiSpace}ifeng_Scroll.prototype={lastpos:0,curPos:0,curTimeoutId:null,curIntervalScrollTimeoutId:null,ScrollElementPos:0,$:function(t){return document.getElementById(t)},Init:function(){this.UlSpace="E"==this.Direction?this.UlElement.offsetWidth:this.UlElement.offsetHeight,(this.LiSpace<=0||null==this.LiSpace)&&(this.LiSpace=parseInt(this.UlSpace/this.UlElement.getElementsByTagName("li").length)),this.UlSpace=this.LiSpace*this.UlElement.getElementsByTagName("li").length,"E"==this.Direction?this.$(this.container).style.width=this.UlSpace+"px":this.$(this.container).style.height=this.UlSpace+"px",this.ScrollElement.style.overflow="visible",this.ScrollElement.parentNode.style.overflow="hidden","E"==this.Direction?this.ScrollElement.style.width="10000px":this.ScrollElement.style.height="10000px",this.UlElement.style.float="left",this.ScrollType="E"==this.Direction?"left":"top",this.Bind(this,this.PreviousButton,this.ControllerType,"Pre"),this.Bind(this,this.NextButton,this.ControllerType,"Next"),this.ScrollElement.onmouseover=this.GetFunction(this,"MouseOver"),this.ScrollElement.onmouseout=this.GetFunction(this,"MouseOut")},Reset:function(){this.Pause(),this.ScrollElement.style[this.ScrollType]="0px"},Bind:function(t,e,i,s){e&&("click"==i?e.onclick=this.GetFunction(this,s):(e.onmousedown=this.GetFunction(this,"MouseDown",s),e.onmouseup=this.GetFunction(this,"MouseUp")),e.onmouseover=this.GetFunction(this,"MouseOver"),e.onmouseout=this.GetFunction(this,"MouseOut"))},Start:function(){this.IsAutoScroll&&(this.IsSmoothScroll?this.SmoothScroll():this.IntervalScroll())},Pause:function(){clearTimeout(this.curTimeoutId),clearTimeout(this.curIntervalScrollTimeoutId)},MouseOver:function(){clearTimeout(this.mouseoutTimeoutId),this.mouseoverTimeoutId=setTimeout(this.GetFunction(this,"Pause"),10)},MouseOut:function(){clearTimeout(this.mouseoverTimeoutId),this.mouseoutTimeoutId=setTimeout(this.GetFunction(this,"Start"),10)},MouseDown:function(t){var e,i="Pre"==t?(e=2*this.Step,curPos=parseInt(this.ScrollElement.style[this.ScrollType]),curPos=curPos||0,0==curPos&&(this.ScrollElement.style[this.ScrollType]=-this.UlSpace/2+"px",this.curPos=-this.UlSpace/2),0):(e=2*-this.Step,-this.UlSpace/2);moveParams={from:this.curPos,to:i,step:e,controller:"MouseDown:"+t,callback:this.GetFunction(this,"ScrollFinish")},this.RunScroll(moveParams)},MouseUp:function(){clearTimeout(this.curTimeoutId)},Pre:function(){var t=0==(parseInt(this.ScrollElement.style[this.ScrollType])||0)?(this.ScrollElement.style[this.ScrollType]=-this.UlSpace/2+"px",this.curPos=-this.UlSpace/2,-this.UlSpace/2+this.LiSpace):this.curPos%this.LiSpace==0?this.curPos+this.LiSpace:parseInt(this.curPos/this.LiSpace)*this.LiSpace;moveParams={from:this.curPos,to:t,step:2*this.Step,controller:"Previous",callback:this.GetFunction(this,"ScrollFinish")},this.RunScroll(moveParams)},Next:function(){_to=this.curPos%this.LiSpace==0?this.curPos-this.LiSpace:(parseInt(this.curPos/this.LiSpace)-1)*this.LiSpace,moveParams={from:this.curPos,to:_to,step:2*-this.Step,controller:"Next",callback:this.GetFunction(this,"ScrollFinish")},this.RunScroll(moveParams)},IntervalScroll:function(){var t=parseInt(this.curPos/this.LiSpace)*this.LiSpace-this.LiSpace,t={from:this.curPos,to:t,step:-this.Step,controller:"IntervalScroll",callback:this.GetFunction(this,"ScrollFinish")};this.RunScroll(t)},SmoothScroll:function(){var t=-this.UlSpace/2,t={from:this.curPos,to:t,step:-this.Step,controller:"SmoothScroll",callback:this.GetFunction(this,"ScrollFinish")};this.RunScroll(t)},RunScroll:function(t){this.Scroll(t)},Scroll:function(t){var e=Math.abs(t.to-this.curPos)<Math.abs(t.step)?t.to-this.curPos:t.step;this.ScrollElement.style[this.ScrollType]=t.from+e+"px",this.curPos=parseInt(this.ScrollElement.style[this.ScrollType]),clearTimeout(this.curTimeoutId),this.curPos!=t.to?(e={from:this.curPos,to:t.to,step:t.step,controller:t.controller,callback:t.callback},this.curTimeoutId=setTimeout(this.GetFunction(this,"Scroll",e),this.Speed)):(t.callback&&t.callback(),"SmoothScroll"==t.controller?this.SmoothScroll():"IntervalScroll"==t.controller?(this.curIntervalScrollTimeoutId&&clearTimeout(this.curIntervalScrollTimeoutId),this.curIntervalScrollTimeoutId=setTimeout(this.GetFunction(this,"IntervalScroll"),this.PauseTime)):-1!=t.controller.indexOf("MouseDown")&&(derection=t.controller.split(":")[1],this.MouseDown(derection)))},ScrollFinish:function(){this.curPos<=-this.UlSpace/2?this.ScrollElement.style[this.ScrollType]="0px":0<=this.curPos&&(this.ScrollElement.style[this.ScrollType]=-this.UlSpace/2+"px"),this.curPos=parseInt(this.ScrollElement.style[this.ScrollType]),this.BackCall&&this.BackCall()},GetFunction:function(t,e,i){return function(){t[e](i)}}};
