(this.$WP=this.$WP||[]).push(["8rGRxX/VcsofC",(e,t)=>{"use strict";var P,f,h,x,N,w,k,O,S,_,b,v,E,a,y,F,D,I,A,L,R,T,B,M,V,X,G,q,r,z,C=({triggerNext:e,onPopupDismiss:t})=>{var[a]=P.useContext(h),{userId:n,sessionId:s}=P.useContext(x),i="MOBILE"===P.useContext(N).viewportCategory,o=()=>{},e=e||o;return P.useEffect(()=>{(k(s)||n||E(a.page,a.params,i))&&t&&t()},[n,i,t,a,s]),k(s)||n||E(a.page,a.params,i)?null:P.createElement(r,{triggerNext:e,servletName:a.page,onDismiss:()=>{t&&t(),O(s)},trackWouldOpenExplicitPreferences:o,openExplicitPreferences:o,explicitPreferencesEnabled:!1})},U=({localize:e,viewportCategory:t,onDismiss:a,triggerNext:r,adhesionRendered:n,openExplicitPreferences:s,trackWouldOpenExplicitPreferences:i,explicitPreferencesEnabled:o,recordEvent:l,domainName:c,appIntegrationConfig:d,login:u})=>{var[p,m]=P.useState(!1),[g,f]=P.useState(!1),[k,_]=P.useState(void 0),[b,v]=P.useState(!1),E=P.useContext(T)["notifyAdhesion"];E(!b);var C=P.useCallback(()=>{b||v(!0)},[b,v]),h=P.useCallback(()=>{C(),l("facebook_onetap_closed"),a()},[C,l,a]),x=P.useCallback(()=>{m(!0),window.FB.Event.subscribe("xfbml.render",()=>{l("facebook_onetap_rendered")}),window.FB.getLoginStatus(e=>{"connected"===e.status||"not_authorized"===e.status?f(!0):(v(!0),r())})},[m,f,v,r,l]),N=P.useCallback(()=>{var t,e,a,n,{sdkUrl:s,appId:i,apiVersion:o}=d;s&&i&&o?(t=()=>{},s=new Promise(e=>{t=e}),e=i,a=o,n=t,window.fbAsyncInit=()=>{window.FB.init({appId:e,version:a,status:!0,cookie:!0}),n()},s.then(x)):r()},[x,d,r]);P.useEffect(()=>{var e;b?r():(l("facebook_onetap_requested"),e=d["sdkUrl"],y(e||"","MEMX"),N())},[N,l,r,b,d]);var w=P.useCallback(e=>{if(!e)return null;var t=e.split(".",2)[1];if(t){t=atob(t);try{return JSON.parse(t)}catch(e){l("facebook_onetap_parseSignedRequestFailed")}}return null},[l]),O=P.useCallback(e=>{e=w(e);e&&e.code&&(F.set("FacebookAuthCode2",e.code,{expires:new Date((new Date).getTime()+5e3),domain:c,path:"/"}),u({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{h()},onSuccess:e=>{e&&e.userId&&(C(),e.hasCreatedMember&&(i&&i(),o&&s&&s()))}}))},[u,C,i,h,c,o,s,w]),S=P.useCallback(()=>{l("facebook_onetap_clicked"),window.FB.getLoginStatus(e=>{"connected"===e.status&&(e=e["authResponse"],e&&e.accessToken&&O(e.signedRequest))})},[l,O]),E=P.useCallback(()=>{_(!0)},[_]);if(b||!p||!g)return null;n=n?50:0,e={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout(()=>{window.FB.XFBML.parse()},50),window.FB.Event.subscribe("auth.authResponseChange",()=>{S()});t="MOBILE"===t;return P.createElement("div",{className:D("_13PP3UmZ","_5seA5Mso",{"fdgSCRX-":k&&t}),style:{bottom:t?n+"px":"unset"}},P.createElement(L,{onClick:h}),P.createElement("div",{className:"_39vo2u3K"},P.createElement("div",{className:"_2go_bSml"},P.createElement("div",null,e.headline)),P.createElement("p",{className:"C2OeEwFp"},e.subhead),P.createElement("div",{className:"_1iOLA2bX"},P.createElement("div",{className:"_3Nfp_Bpa"},P.createElement("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}}))),P.createElement("div",{className:"_1Pwhi8Gr"},P.createElement(I,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}}))),P.createElement(R,{size:"5x1",position:"sky",callback:E}))},W=({adhesionState:e,triggerNext:t,onPopupDismiss:a})=>{var[{page:n}]=P.useContext(h),s=S.includes(n),i=B("ONBOARDING","FB_ONETAP")["trackWouldOpenExplicitPreferences"],{open:o,isEnabled:r}=V(),l=P.useCallback(()=>{(s||r||M("account_screen_onb_control"))&&i()},[r,i,s]),c=()=>{},d=()=>{var e=t||c;a&&a(),e()},u=A()["localize"],p=G(),m=P.useContext(N)["viewportCategory"],g=P.useContext(w)["domainName"],f=X(),k=P.useCallback(e=>{f({module:"facebook_onetap",action:e,context:""+(n||"unknown")})},[n,f]),_=P.useContext(w)["locale"],b=_.code,{userId:_,sessionId:v}=P.useContext(x),[{data:E,fetching:_,error:C}]=q({query:z,variables:{locale:b},pause:!!_});return P.useEffect(()=>{!C&&E&&E.Facebook_getFbConnectConfig||a&&a()},[C,E,a]),_?null:!C&&E&&E.Facebook_getFbConnectConfig?P.createElement(U,{onDismiss:()=>{a&&a(),O(v)},triggerNext:d,adhesionRendered:e,openExplicitPreferences:o,explicitPreferencesEnabled:r,trackWouldOpenExplicitPreferences:l,appIntegrationConfig:E.Facebook_getFbConnectConfig,localize:u,viewportCategory:m,recordEvent:k,domainName:g,login:p}):(d(),null)},n=()=>{var[e,t]=P.useState(!1),[a,n]=P.useState("GOOGLE_ONETAP"),s=(()=>{var[e,t]=P.useState(),[a,n]=P.useState();return P.useEffect(()=>{var e;_()||(e=window.googletag||{cmd:[]}).cmd.push(()=>{e.pubads().addEventListener("slotRenderEnded",e=>{(null==e?void 0:e.advertiserId)!==b&&n(!0)})})},[]),P.useEffect(()=>{t(v())},[]),a||e})(),{userId:i,sessionId:o}=P.useContext(x),[{page:r,params:l}]=P.useContext(h),c="MOBILE"===P.useContext(N).viewportCategory;P.useEffect(()=>{k(o)||i||E(r,l,c)?t(!0):e&&t(!1)},[e,i,o,t,r,l,c]);var d=P.useCallback(()=>{n("FACEBOOK_ONETAP")},[n]),u=()=>P.createElement(P.Fragment,null),p=u,m=[],g="registration_dialog";switch(a){case"GOOGLE_ONETAP":m=["google_one_tap","facebook_one_tap"],p=({dismiss:e})=>P.createElement(C,{triggerNext:d,onPopupDismiss:()=>{e()}}),g="google_registration_dialog";break;case"FACEBOOK_ONETAP":m=["google_one_tap","facebook_one_tap"],p=({dismiss:e})=>P.createElement(W,{adhesionState:!!s,onPopupDismiss:()=>{e()}}),g="facebook_registration_dialog"}return f({factory:u,eventTypes:m,key:"skip",tier:100,skip:!0}),f({factory:p,eventTypes:m,key:g,tier:200}),null};return[()=>{r=a.component.onUsage(()=>t("454gno"),"default"),(z=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"FacebookConnectInfoQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locale"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Facebook_getFbConnectConfig"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locale"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sdkUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"apiVersion"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"appId"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":151}}')).__key=0x90736b30f1e1,z.loc.source={body:"90736b30f1e1"},e("default",n)},[e=>P=e,e=>f=e.usePopupHierarchyRender,e=>(h=e.Route,x=e.Visitor,N=e.Device,w=e.Environment),e=>(k=e.shouldSuppressRegistrationDialog,O=e.setRegDialogDismissed,S=e.HOTEL_SERVLETS,_=e.shouldIgnoreAdhesionUnit),e=>(b=e.ADHESION_COLLAPSE_ADVERTISER_ID,v=e.doesAdExistOnPage),e=>E=e.shouldDisableRegDialogForRequiredLoginLithium,e=>y=(a=e).importScript,e=>F=e.default,e=>D=e.default,e=>(I=e.UnsafeLocalize,A=e.useLocalize),e=>L=e.CloseIcon,e=>R=e.ListenToGPTSlotRendering,e=>T=e.PromptsContext,e=>B=e.default,e=>M=e.featureIsEnabled,e=>V=e.default,e=>X=e.useGARecorder,e=>G=e.default,e=>q=e.useQuery]]},["cDcdfi","1x56sm","2R4xv2","MWFqPp","Oc3sTL","wU942v","pLbCP4","vmXh3M","jSLlaY","0DsHEV","xegF5W","w2XwHO","HDgDKt","2NwMnm","-i3PJS","x5AnXu","fsml46","mv7yXI","5X2em-"]]);
