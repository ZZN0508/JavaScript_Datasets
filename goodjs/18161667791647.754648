function TaaSDynamic(){var a=window["cookies-browser"]||raptor.require("ebay.cookies");this.readCookie=function(t,n){return a.readCookie(t,n)},this.writeCookielet=function(t,n,e,i,r){a.writeCookielet(t,n,e,i,r)},this.readMultiLineCookie=function(t,n){a.readMultiLineCookie(t,n)},this.writeMultiLineCookie=function(t,n,e,i,r){a.writeMultiLineCookie(t,n,e,i,r)},this.writeCookie=function(t,n,e){a.writeCookie(t,n,e)}}var TaaSDynamicObj=new TaaSDynamic;function attachTrackingListener(t,n){window.jQuery?$(document).on(t,n):document.addEventListener(t,n,!1)}window.triggerTracking=function(t,n){var e=document.createEvent("CustomEvent");e.initCustomEvent(t,!1,!1,n),document.dispatchEvent(e)};var idmapRoverURL,$trk=null;function TaaSIdMapTracker(){this.roverService=function(t){"https:"==window.location.protocol||!t||TaaSDynamicObj.readCookie("dp1","idm")||(idmapRoverURL=t,window.jQuery?$(window).on("load",this.sendRequest):window.addEventListener("load",this.sendRequest,!1))},this.sendRequest=function(){idmapRoverURL=-1<idmapRoverURL.indexOf("?")?idmapRoverURL+"&":idmapRoverURL+"?",idmapRoverURL+="cb=TaaSIdMapTrackerObj.handleResponse",idmapRoverURL=encodeURI(idmapRoverURL)+"&cache="+Math.random();var t=document.createElement("script");t.setAttribute("src",idmapRoverURL),t.setAttribute("type","text/javascript"),document.body.appendChild(t)},this.setCookieExpiration=function(t){"number"==typeof t&&0<t&&TaaSDynamicObj.writeCookielet("dp1","idm","1",t/86400,"")},this.handleResponse=function(t){if(t&&1<t.length){for(var n=t.length-1,e=0;e<n;e++)this.createImage(t[e]);this.setCookieExpiration(t[n])}},this.createImage=function(t){var n;t&&1<t.length&&((n=document.createElement("IMG")).width="1",n.height="1",n.src=t,n.alt="",document.body.appendChild(n))}}!function(){function e(t){for(var n=1;n<arguments.length;n++){var e,i=arguments[n];for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t}function t(t){var n=$trk=this;e(n,n.config=t),n.image=document.createElement("img"),n.image.style.display="none",n.rover.sync&&n.image.attr("src",n.rover.sync),n.originalPSI=n.currentPSI=t.psi,attachTrackingListener("click",n.onBody),attachTrackingListener("mousedown",n.onMouse),attachTrackingListener("rover",n.onRover),attachTrackingListener("track",n.onTrack),attachTrackingListener("pulsar",n.onPulsar),attachTrackingListener("TRACKING_UPDATE_PSI",n.trackingUpdatePSI),attachTrackingListener("ADD_LAYER_PSI",n.addLayerPSI),attachTrackingListener("CLEAR_LAYER_PSI",n.clearLayerPSI)}function o(n,t,e){if(n&&"object"==typeof n){var i=[];return Object.keys(n).forEach(function(t){i.push(t+"="+n[t])}),t=i.join(t||","),e?encodeURIComponent(t):t}return e?encodeURIComponent(n):n}e(t.prototype,{codes:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxy-_!".split(""),sizes:{p:4,c:1,m:3,l:3},start:{p:1,c:5,m:6,l:9},target:function(t){return t.tagName?t:t.target},attrib:function(t,n){return t.getAttribute?t.getAttribute(n):null},valid:function(t,n){return n&&0<n.indexOf(".ebay.")?t:null},trackable:function(t){var n=$trk;return(t=t.tagName).match(/^a$|area/i)?n.valid(t,t.href):t.match(/input/)&&t.type.match(/submit/i)&&t.form?n.valid(t,form.action):null},click:function(t){for(var n=$trk,t=n.target(t),e=null;t&&t.tagName;t=t.parentNode)if(e=e||n.trackable(t),n.attrib(t,"_sp"))return n.clickElement(t,e);n.pid&&n.track(n.pid)},clickElement:function(t,n){var e=$trk,t=e.attrib(t,"_sp");e.track(t.split(";")[0],n?e.attrib(n,"_l"):null)},track:function(t,n){var e=$trk,i=t.split(".");t.match(/p\d+/)||i.push(e.pid),n&&i.push(n);for(var r=TaaSDynamicObj.readCookie("ds2","sotr"),a=e.chars(r&&"b"==r.charAt(0)?r:"bzzzzzzzzzzz"),o=0,c=i.length;o<c;o++)if(null!=(s=i[o].match(/([pcml])(\d+)/)))for(var l=s[1],r=e.sizes[l],l=e.start[l],s=e.chars(e.encode(s[2],r)),d=0;d<r;d++)a[l+d]=s[d];for(o=0,c=a.length,r="";o<c;)r=r.concat(a[o++]);TaaSDynamicObj.writeCookielet("ds2","sotr",r)},chars:function(t){for(var n=0,e=t.length,i=[];n<e;)i.push(t.charAt(n++));return i},encode:function(t,n){for(var e=$trk.codes,i="";64<=t;t=t/64|0)i=e[t%64]+i;return(i=(0<=t?e[t]:"")+i).concat("zzzz").substring(0,n)},onBody:function(t){$trk.click(t)},onMouse:function(){TaaSDynamicObj.writeCookielet("ebay","psi",$trk.currentPSI)},onTrack:function(t,n){var e=n.trksid;e&&$trk.track(e,n.trklid)},onRover:function(t,n){if(null!=t.detail&&null!=t.detail)n=t.detail;else if(!n||"object"!=typeof n)return;var e,i,r=$trk,a=n.imp,t=r.rover.uri+(a?r.rover.imp:r.rover.clk);delete n.imp,a&&(i=o(a,"&",!0)),n&&(n.ts=Date.now(),e=o(n,"&",!0)),e&&0<e.length&&(t+=(t.indexOf("?")<0?"?":"&")+"trknvp="+e),i&&0<i.length&&(t+=(t.indexOf("?")<0?"?":"&")+"imp="+i),r.image.src=t},onPulsar:function(t,n,e){"undefined"!=typeof _plsUBTTQ&&(void 0!==n&&null!=n||null==t.detail||(Array.isArray(t.detail)?(n=t.detail[0],e=t.detail[1]):n=t.detail),void 0!==n&&null!=n&&(n=(t=JSON.parse(JSON.stringify(n))).eventProperty,void 0!==e&&null!=e&&(e=JSON.parse(JSON.stringify(e)),void 0!==n&&null!=n&&(n.actionKind=e.actionKind)),null!=t.eventFamily&&null!=t.eventAction&&_plsUBTTQ.push(["customEvts",t.eventFamily,t.eventAction,n])))},trackingUpdatePSI:function(t,n){(n=null!=t.detail&&null!=t.detail?t.detail:n)&&n.psi&&(self.currentPSI=n.psi),n&&n.callback&&"function"==typeof n.callback&&n.callback.call(self)},addLayerPSI:function(t,n){(n=null!=t.detail&&null!=t.detail?t.detail:n)&&n.psi&&(self.currentPSI+=n.psi)},clearLayerPSI:function(){self.currentPSI=self.originalPSI}}),window.TaaSTrackingCore=t}();var tracking=tracking||{};tracking.roversync=tracking.roversync&&void 0===QUnit||function(){function o(t){for(var n=t+"=",e=document.cookie.split(";"),i=0;i<e.length;i++)if(0==(t=(t=e[i]).trim()).indexOf(n))return n=t.indexOf("="),t.substring(n+1);return null}function t(){try{s=Date.now();var t=function(){var t=document.getElementById("roversyncimg");if(null!=t)return{img:t,method:"id"};for(var n=document.body.lastChild,e=/^(http|https):\/\/rover.*.ebay.*\/roversync\/*/i,i=0;i<=40&&null!=n;i++)if(null!=n){if(null!=n.src&&e.test(n.src))return{img:t=n,method:"sibling"};n=n.previousSibling}return{img:t,method:null}}();u=t.method,(d=null!=t.img)&&(p=t.img.src);var n,e,i,r=o("npii"),a=t.img;m=null!=a&&void 0!==a&&(1==a.naturalWidth&&1==a.naturalHeight||1==a.width&&1==a.height),!d&&null!=r||d&&m&&null!=r||(e={hostname:f,hasImg:d,imgFindMethod:u,nonsession:o("nonsession"),npii:r,roversyncImgStatus:m,s:o("s"),winLoc:window.location},e=h=null==e?null:(t=encodeURIComponent,n="host="+e.hostname+"&ifm="+e.imgFindMethod+"&hasImg ="+e.hasImg+"&hasNons="+(null!=e.nonsession)+"&hasNpii="+(null!=e.npii)+"&hasSess="+(null!=e.s)+"&nonSess="+t(e.nonsession)+"&npii="+t(e.npii)+"&ris="+e.roversyncImgStatus+"&s="+t(e.s)+"&winLoc="+t(e.winLoc),"/?_trkparms="+t(n)),(i=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).withCredentials=!1,i.open("GET",e,!0),i.send("")),l=Date.now()}catch(t){c=t}}var c,l,s,d,u,m,n,p,h,e=Date.now(),f=window.location.hostname,i=100,i=null==(i=o("roversyncSampling"))||isNaN(i)?null==tracking._RSRandomSamplingPct||isNaN(tracking._RSRandomSamplingPct)?2:tracking._RSRandomSamplingPct:Number(i);return Math.random()<i/100?(n=!0,window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t)):n=!1,{getVersion:function(){return"1.3"},logStatus:function(){console.log("err="+c+(null!=c?" err.description="+c.description+" err.message="+c.message+" err.name="+c.name+" err.number="+c.number:"")+" hasImg="+d+" handEndTime="+l+" handStartTime="+s+" handElapsedMs="+(l-s)+" hostname="+f+" imgFindMethod="+u+" roversyncImgStatus="+m+" sampling="+n+" startTime="+e+" url1="+p+" url2="+h)}}}();
