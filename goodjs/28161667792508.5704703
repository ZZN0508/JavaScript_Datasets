var CryptoJS=CryptoJS||function(u){var e={},t=e.lib={},n=t.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}};function i(){}var c=t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var s=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=s<<24-(i+r)%4*8}else if(65535<n.length)for(r=0;r<o;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=u.ceil(t/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*u.random()|0);return new c.init(t,e)}}),o=e.enc={},r=o.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(n,t/2)}},s=o.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(n,t)}},a=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},f=t.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=a.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,r=i/(4*o),s=(r=e?u.ceil(r):u.max((0|r)-this._minBufferSize,0))*o,i=u.min(4*s,i);if(s){for(var a=0;a<s;a+=o)this._doProcessBlock(n,a);var f=n.splice(0,s);t.sigBytes-=i}return new c.init(f,i)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(t.Hasher=f.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new p.HMAC.init(n,t).finalize(e)}}}),e.algo={});return e}(Math);!function(o){var e=CryptoJS,t=e.lib,n=t.WordArray,i=t.Hasher,t=e.algo,r=[],m=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var t=2,n=0;n<64;)!function(e){for(var t=o.sqrt(e),n=2;n<=t;n++)if(!(e%n))return;return 1}(t)||(n<8&&(r[n]=e(o.pow(t,.5))),m[n]=e(o.pow(t,1/3)),n++),t++}();var l=[],t=t.SHA256=i.extend({_doReset:function(){this._hash=new n.init(r.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],f=n[5],u=n[6],c=n[7],p=0;p<64;p++){p<16?l[p]=0|e[t+p]:(d=l[p-15],h=l[p-2],l[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+l[p-7]+((h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+l[p-16]);var d=i&o^i&r^o&r,h=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&f^~a&u)+m[p]+l[p],c=u,u=f,f=a,a=s+h|0,s=r,r=o,o=i,i=h+(((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+d)|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+f|0,n[6]=n[6]+u|0,n[7]=n[7]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=o.floor(n/4294967296),t[15+(64+i>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=i._createHelper(t),e.HmacSHA256=i._createHmacHelper(t)}(Math),function(){var e=CryptoJS.lib.Base,a=CryptoJS.enc.Utf8;CryptoJS.algo.HMAC=e.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,i=4*n;(t=t.sigBytes>i?e.finalize(t):t).clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),o=e.words,r=t.words,s=0;s<n;s++)o[s]^=1549556828,r[s]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(q){"use strict";var i,j,r,J=3e5,X=5e3,U="0.0.1",s=["startTimer","stopTimer","sendTimer","sendMetric","setPageGroup","getPageGroup","resetPageGroup","setABTest","getABTest","resetABTest","setDimension","resetDimension","setSessionID","getSessionID","startSession","incrementSessionLength","setSessionLength","getSessionLength","subscribe"],G=["before_beacon","beacon"],K=0,o=!1,N=!1,F=+new Date;function $(e,t){i||("function"==typeof XDomainRequest||"object"==typeof XDomainRequest?(o=!0,i=function(){return new XDomainRequest}):"function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest?i=function(){return new XMLHttpRequest}:"function"==typeof require?i=function(){return new(require("xmlhttprequest").XMLHttpRequest)}:q&&void 0!==q.ActiveXObject&&(i=function(){return new q.ActiveXObject("Microsoft.XMLHTTP")}));var n=i();"function"==typeof t&&(o?n.onload=function(){t(n.responseText)}:n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)}),n.open("GET",e,!0),n.send()}if(j="undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):void 0!==q?q.setImmediate?q.setImmediate.bind(q):q.msSetImmediate?q.msSetImmediate.bind(q):q.webkitSetImmediate?q.webkitSetImmediate.bind(q):q.mozSetImmediate?q.mozSetImmediate.bind(q):function(e){setTimeout(e,10)}:function(e){setTimeout(e,10)},void 0!==q)if(void 0!==q.performance&&"function"==typeof q.performance.now)N=q.performance.now.bind(q.performance);else if(void 0!==q.performance)for(var e=["webkitNow","msNow","mozNow"],K=0;K<e.length;K++)if("function"==typeof q.performance[e[K]]){N=q.performance[e[K]];break}function E(e){"object"==typeof console&&"function"==typeof console.warn&&console.warn("mPulse: "+e)}function a(e,t,n){n=n||{};var o=e,r=t,s="//c.go-mpulse.net/api/v2/config.json",i=!1,u={},c=!1,p=!1,a=[],f=!1,d=!1,h=!1,m={},l={},y=!1,g={},v={},w={},x=-1,S=N(),b=0,_={};for(K=0;K<G.length;K++)_[G[K]]=[];function B(e){return-1!==e.indexOf("http://")||-1!==e.indexOf("https://")||(i?e="https:"+e:void 0===q?-1===e.indexOf("http:")&&(e="http:"+e):void 0!==q&&"file:"===q.location.protocol&&-1===e.indexOf("http:")&&(e="http:"+e)),e}function P(){var e,t,n=s,i=+new Date;return-1!==n.indexOf("?")?n+="&":n+="?",n+="key="+o,n+="&t="+i,B(n+="&s="+(e=o,t=r,i=i,void 0===CryptoJS||"function"!=typeof CryptoJS.HmacSHA256?"":CryptoJS.HmacSHA256("key="+e+"&t="+i,t).toString()))}function T(e){try{var t,n=JSON.parse(e);for(t in n)n.hasOwnProperty(t)&&(u[t]=n[t])}catch(e){return void(p=!1)}if(y||k(u.session_id),g={},w={},l={},u.PageParams){var i=u.PageParams.customMetrics,o=u.PageParams.customTimers,r=u.PageParams.customDimensions;if(i)for(K=0;K<i.length;K++){var s=i[K];g[s.name]=s.label}if(o)for(K=0;K<o.length;K++){var a=o[K];w[a.name]=a.label}if(r)for(K=0;K<r.length;K++){var f=r[K];l[f.name]=f.label}}c=p=!0,setTimeout(H,J),j(D)}function H(){var e;""!==s&&(e=P(),c&&(e+="&r="),$(e,T))}function C(e,t,n){a.push({type:e,name:t,value:n,group:d,ab:h,dimensions:function(){var e,t={};for(e in m)m.hasOwnProperty(e)&&(t[e]=m[e]);return t}(),when:+new Date})}function D(e){if(0!==a.length)if(p){var t,n=a.shift(),i=n.type,o=n.name,r=n.value,s={};for(t in"boolean"!=typeof n.group&&(s["h.pg"]=n.group),"boolean"!=typeof n.ab&&(s["h.ab"]=n.ab),s.when=n.when,n.dimensions)n.dimensions.hasOwnProperty(t)&&(void 0!==l[t]?s[l[t]]=n.dimensions[t]:E("Custom Dimension '"+t+"' is not defined"));"metric"===i?void 0!==g[o]?(s[g[o]]=r,A(s)):E("Custom Metric '"+o+"' is not defined"):"timer"===i&&(void 0!==w[o]?(s.t_other=w[o]+"|"+r,A(s)):E("Custom Timer '"+o+"' is not defined")),j(D)}else f&&!e||(f=!0,setTimeout(function(){D(!0)},X))}function A(e){e.d=u.site_domain,e["h.key"]=u["h.key"],e["h.d"]=u["h.d"],e["h.cr"]=u["h.cr"],e["h.t"]=u["h.t"],e["http.initiator"]="api",!(e["rt.start"]="api")!==y&&(e["rt.si"]=y,e["rt.ss"]=Math.round(S+F),e["rt.sl"]=b),e.api=1,e["api.v"]=2,e["api.l"]="js",e["api.lv"]=U,R("before_beacon",e);var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+(void 0===e[t]||null===e[t]?"":encodeURIComponent(e[t])));var i=B(u.beacon_url),i=i+(-1<i.indexOf("?")?"&":"?")+n.join("&");R("beacon",e),$(i)}function I(e,t){return"string"!=typeof e||"number"!=typeof t||t<0?-1:(C("timer",e,t=Math.round(t)),j(D),t)}function M(e){void 0!==e&&void 0!==m[e]&&delete m[e]}function z(e){"string"!=typeof e&&"number"!=typeof e||(y=e="number"==typeof e?""+e:e)}function O(){return y}function k(e){return z(e||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),L(0),y}function L(e){"number"!=typeof e||e<0||(b=e)}function R(e,t){for(var n=0;n<_[e].length;n++)_[e][n](t)}return void 0!==n.configUrl&&(s=n.configUrl),n.forceSSL&&(i=!0),H(),{startTimer:function(e){return"string"!=typeof e?-1:(v[++x]={time:N(),name:e},x)},stopTimer:function(e){if("number"!=typeof e||e<0)return-1;var t=v[e],n=0;return t?(n=Math.round(N()-t.time),I(t.name,n),delete v[e],n):-1},sendTimer:I,sendMetric:function(e,t){"string"==typeof e&&(void 0!==t&&"number"!=typeof t||(C("metric",e,t=void 0===t?1:t),j(D)))},setPageGroup:function(e){"string"==typeof e&&(d=e)},getPageGroup:function(){return d},resetPageGroup:function(){d=!1},setABTest:function(e){return"string"==typeof e&&(!1!==/^[a-zA-Z0-9_ -]{1,25}$/.test(e)&&(h=e,!0))},getABTest:function(){return h},resetABTest:function(){h=!1},setDimension:function(e,t){void 0!==e&&(void 0!==t?m[e]=t:M(e))},resetDimension:M,setSessionID:z,getSessionID:O,startSession:k,incrementSessionLength:function(){b++},setSessionLength:L,getSessionLength:function(){return b},subscribe:function(e,t){_.hasOwnProperty(e)&&"function"==typeof t&&_[e].push(t)},parseConfig:T}}N||(void 0!==q&&q.performance&&q.performance.timing&&q.performance.timing.navigationStart&&(F=q.performance.timing.navigationStart),N="undefined"!=typeof Date&&Date.now?function(){return Date.now()-F}:function(){return+new Date-F});var t,n,f=!1,u={};function c(){}for(void 0!==q&&(n=(t=q).mPulse),r={version:U,noConflict:function(){return t.mPulse=n,r},init:function(e,t,n){if(n=n||{},void 0!==e){if(void 0!==t){if(void 0!==n.name&&void 0!==u[n.name])return u[n.name];t=a(e,t,n);if(!1===f){f=t;for(var i=0;i<s.length;i++){var o=s[i];r[o]=f[o]}}return void 0!==n.name&&(u[n.name]=t),t}E("init(): You need to specify a secretKey")}else E("init(): You need to specify an apiKey")},getApp:function(e){return u[e]},stop:function(e){void 0!==u[e]&&delete u[e]}},K=0;K<s.length;K++)r[s[K]]=c;"function"==typeof define&&define.amd?define([],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:void 0!==t&&(t.mPulse=r)}("undefined"!=typeof window?window:void 0);
