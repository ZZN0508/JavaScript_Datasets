!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.dmmma?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).tracertUtil={})}(this,function(t){"use strict";function o(t,e,n){t&&((e=e||window.document).addEventListener?e.addEventListener(t,n,arguments.length<=3||void 0===arguments[3]||arguments[3]):e.attachEvent?e.attachEvent("on".concat(t),n):e[t]=n)}function i(t,e,n){t&&((e=e||window.document).removeEventListener?e.removeEventListener(t,n,arguments.length<=3||void 0===arguments[3]||arguments[3]):e.detachEvent?e.detachEvent("on".concat(t),n):e[t]=n)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t){if(t){if("string"==typeof t)return l(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n,r=t||{};for(n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(r[n]=e[n]);return r}function f(t,e){var n="";try{n=RegExp("(?=\\?|\\&|\\b|^)".concat(t,"\\=(.+?)(?=\\&|$)")).exec(e),n=decodeURIComponent(n=n?"".concat(n[1]):"")}catch(t){console.warn(t)}return n}function p(t){var e=window.AlipayJSBridge;return e&&e.startupParams&&e.startupParams[t]}var m="_TRACERT_COOKIE_";function g(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"^",r=[];if(t instanceof Array)r=t;else if(t instanceof Object)for(e in t)t.hasOwnProperty(e)&&r.push("".concat(e,"=").concat(t[e]));return r.join(n)}function v(t){if("string"!=typeof t)return null;var e=t.split(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"^");if(-1===t.indexOf("="))return e;for(var n,r=e.length,o={},i=0;i<r;i++)(n=e[i])&&(o[(n=n.split("="))[0]]=n[1]||"");return o}function y(t,e){var n,r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,"".concat(t.getFullYear()).substr(4-RegExp.$1.length))),r)RegExp("(".concat(n,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[n]:"00".concat(r[n]).substr("".concat(r[n]).length)));return e}function b(t){return t&&encodeURIComponent(t).replace(/'/g,"%27")}var w=d,S=g,_="data-aspm",E="data-aspm-click",T=["A","AREA"];function x(e){try{return[].slice.call(e)}catch(t){for(var n=[],r=e.length,o=0;o<r;o++)n.push(e[o]);return n}}function O(){return window.performance&&window.performance.timing?!!window.performance.timing.loadEventEnd:"complete"===window.document.readyState}function I(t,e){return t&&t.getAttribute&&t.getAttribute(e)||""}function A(t){return null!==t&&"object"===h(t)&&1===t.nodeType}function P(t){return!(!t||!A(t)||t===document.body||t===document.documentElement)}function k(t){var e=t;if(!P(e))return"";for(var n="";e&&e!==document.body&&!(n=I(e,_));)e=e.parentNode;return n}function C(t){var e=t;if(!P(e))return"null";do{if(T.includes(e.tagName)||e.hasAttribute(E))return e}while((e=e.parentNode)&&e&&e.tagName&&"BODY"!==e.tagName&&e!==document.body&&!I(e,_));return null}function j(t){var e=t;if(!P(e))return"";if(!(e=!T.includes(e.tagName)&&!e.hasAttribute(E)?C(e):e))return"";var t=I(e,E),n=e.tagName;if(("string"==typeof t||T.includes(n))&&!t){for(var r=0,o=e;A(o)&&n===o.tagName&&r++,o=o.previousSibling;);t=r}return"".concat(t)}function D(t){var t=t&&t.getAttribute?t.getAttribute("data-aspm-param"):"",e={};if(t){var n=t.split("^");if(-1===t.indexOf("="))e=n;else for(var r,o=n.length,i=0;i<o;i++)(r=n[i])&&(e[(r=r.split("="))[0]]=r[1]||"")}return e}function L(t){if(!t||!t.hasAttribute)return{};if(!t.hasAttribute("data-aspm-content"))return{};var e=t.getAttribute("data-anewChinfo")||"",n=t.getAttribute("data-new-ascm")||"",t=t.getAttribute("data-ascm")||n;return{param5:"newChinfo=".concat(e,"^scm=").concat(t),newScm:n}}function M(t,e){var n=e||t.getBoundingClientRect(),e=document.documentElement.clientHeight,t=Math.min(e,Math.max(n.top,0));return(Math.max(0,Math.min(n.top+n.height,e))-t)/n.height||1}function R(t){if(!t)return"";for(var e=[];t&&1===t.nodeType;){for(var n=1,r=t.previousSibling;r;)r.localName===t.localName&&n++,r=r.previousSibling;e.unshift("".concat(t.localName.toLowerCase(),"[").concat(n,"]")),t=t.parentNode}return e.length?"/".concat(e.join("/")):""}function N(t){if(!t)return 0;if(t.clientHeight<=0||t.clientWidth<=0)return 0;var e=t.getBoundingClientRect(),n=e.left,r=e.top,o=e.right,i=e.bottom,a=window,c=a.innerHeight,t=a.innerWidth;if(i<0||c<r||o<0||t<n)return 0;e=Math.max(0,r),a=Math.max(0,n),c=Math.min(c,i);return Math.floor((Math.min(t,o)-a)*(c-e)/((o-n)*(i-r))*100)}function B(t){return t&&t.tagName&&"string"==typeof t.tagName?t.tagName:""}var U="180020010000000339";function H(t,e){var n,r,o,i;console&&console.warn&&console.warn("[Tracker]",t),n=t,r=e,z()&&(t=void 0===(i=r._v)?"":i,(o={}).yuyan_id=U,o.code=11,o.msg=n?b(n.message||""):"",o.d1=n?b(n.name||""):"",o.d2=(e=n.stack,i=n.message,n=void 0===(n=n.name)?"":n,b(i=(i=(i=(void 0===e?"":e).replace(void 0===i?"":i,"")).replace(n,""))&&i.length&&250<i.length?i.slice(0,250):i)),o.d3=t||"",o.d4=$(r),o.d5=W(),o.fullURL=location?b(location&&location.href||""):"",function(t){var e="https://mdap.alipay.com/loggw/dwcookieLogGet.do";try{var n=z();n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("data=".concat(t,"&time=").concat((new Date).getTime()))}catch(n){try{(new Image).src="".concat(e,"?data=").concat(t,"&time=").concat((new Date).getTime())}catch(t){console&&console.warn&&console.warn("[Tracker]",t)}}}(["D-AE",y(new Date,"yyyy-MM-dd hh:mm:ss.S"),"","","2","","",q(r),"1000","102023","bmmonitor","2",$(r),"","","","","","","","","","","","","","","","",F(),"","","","","","",Object.keys(o).map(function(t){return"".concat(b(t),"=").concat(b(o[t]))}).join("^")]))}function F(){return navigator&&navigator.userAgent?b(navigator.userAgent.replace(/,/g,"-")):""}function q(t){return t?b(t.role_id||t.roleId||t.cUserId||t.backupUserId||t.bucUserId||""):""}function W(){return navigator&&navigator.connection&&navigator.connection.effectiveType?b(navigator.connection.effectiveType):""}function $(t){if(!t)return"";var e=t.spmAPos||"",t=t.spmBPos||"";return e&&t?b("".concat(e,".").concat(t)):""}function z(){var e=null;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}}return e}function J(t){var e={is:!1,name:"",version:""},n=t.match(/AliApp\S+\b\)/gi);e.is=/(T-UA)|(TBIOS)|(WindVane)|(AliApp)/i.test(t);try{e.name=n?n[0].match(/\(\w+-*\w*/)[0].split("(")[1]:"",e.version=n?n[0].match(/(\d+\.*)+/gi)[0]:""}catch(t){}return e}function V(){var t=window?J(window.navigator.userAgent):{name:"non-browser"};return-1<["AF","AFW","BK","AM","APHK","KB","Snail"].indexOf(t.name)}var G={},K="-1",X=navigator.userAgent||"",Y=navigator.appVersion||"",Q=navigator.vendor||"";function Z(t){return Object.prototype.toString.call(t)}var tt=[["wp",function(t){return-1!==t.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==t.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==t.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["ios",function(t){return/\bcpu(?: iphone)? os /.test(t)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==t.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",/\bandroid[\/\- ]?([0-9.x]+)?/],["linux","linux"]],et=[["qq",/\bm?qqbrowser\/([0-9.]+)/],["ie",/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["uc",function(t){return t.indexOf("ucbrowser/")<0?/\buc\/[0-9]/.test(t)?/\buc\/([0-9.]+)/:t.indexOf("ucweb")<0?/\b(?:ucbrowser|uc)\b/:/\bucweb[\/]?([0-9.]+)?/:/\bucbrowser\/([0-9.]+)/}],["android",function(t){if(-1!==t.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/]];var nt={name:"na",version:K};function rt(e,t,n,r){var o=nt;!function(t,e){for(var n=0,r=t.length;n<r&&!1!==e.call(t,t[n],n);n++);}(t,function(t){t=function(t,e,n){var r="[object Function]"===Z(e)?e.call(null,n):e;if(!r)return null;if(e={name:t,version:K,codename:""},"android"===t&&(e.type=-1<n.indexOf("Mobi")?"phone":"pad"),"ios"===t&&(e.type=-1<n.indexOf("iPhone")?"phone":"pad"),t=Z(r),!0===r)return e;if("[object String]"===t){if(-1!==n.indexOf(r))return e}else{if("[object Object]"===Z(r))return r.hasOwnProperty("version")&&(e.version=r.version),e;if(r.exec){n=r.exec(n);if(n)return e.version=2<=n.length&&n[1]?n[1].replace(/_/g,"."):K,e}}}(t[0],t[1],e);if(t)return o=t,!1}),n.call(r,o.name,o.version)}var ot=function(t){t=(t||"").toLowerCase();var r={};return rt(t,tt,function(t,e){var n=parseFloat(e);r.os={name:t,version:n,fullVersion:e},r.os[t]=n},r),rt(t,et,function(t,e){var n=parseFloat(e);r.browser={name:t,version:n,fullVersion:e},r.browser[t]=n},r),r};(G=ot("".concat(X," ").concat(Y," ").concat(Q))).parse=ot,G._checkApp=J,G.app=G._checkApp(X);var it=G,at={},ct={},Q=null,st=(Q||(n(pt,[{key:"getEventSequence",value:function(t,e){return ct[e]||(ct[e]={}),ct[e]&&ct[e][t]?++ct[e][t]:(ct[e]||(ct[e]={}),ct[e][t]=1,ct[e][t])}},{key:"getSequence",value:function(t){return at[t]?++at[t]:(at[t]=1,at[t])}}]),Q=new pt),Q),ut="__tracert_sequence",lt="__tracert_sequence_id",dt="__tracert_event_sequence",ft={http:"http",AlipayJSBridge:"AlipayJSBridge"};function pt(){e(this,pt)}Object.freeze(ft);var ht={autoClick:"autoClick",remoteLog:"remoteLog",pageMonitor:"pageMonitor",reportData:"reportData",semLog:"semLog",handleUEPEvent:"handleUEPEvent",reportUEPData:"reportUEPData"};function mt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,r=e,e=n._v,e=void 0===e?"":e,n=n._instanceId,n=void 0===n?"":n;return t===ht.autoClick&&(r.param||(r.param={}),r.param.param4||(r.param.param4={}),r.param.param4=gt(r.param.param4,"autoClick",e,n)),t===ht.remoteLog&&(r.param4||(r.param4=""),r.param4=gt(r.param4,r.actionId||"",e,n)),t===ht.pageMonitor&&(r.param||(r.param={}),r.param=gt(r.param,"pageMonitor",e,n)),t===ht.reportData&&(r.spmDetail||(r.spmDetail={}),r.spmDetail=gt(r.spmDetail,"reportData",e,n),r.spmDetail["".concat(dt,"_pageMonitor")]=st.getEventSequence("pageMonitor",n)),r}function gt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,o="string"==typeof t,t=o?v(t):t;return t.sdkVersion=n,t[lt]=r,t[ut]=st.getSequence(r),t[dt]=st.getEventSequence(e,r),o?g(t):t}function vt(t){var e=t.tracert,n=t.type,r=t.jsApiType,o=void 0===r?"remoteLog":r,i=t.errorHandler;if(!e)throw Error("request tracert");var a,c,s,u,r=t.data,l=void 0===r?{}:r,d=e.server,f=e.taskId,p=e.verifyServer;switch(e.debug&&console&&console.log&&console.log(l),n){case ft.http:try{a=l,c=e._v,s=void 0===c?"":c,u=e._instanceId,(c=a)&&c.length&&("D-AE"===(a=c[0])&&(c[36]=gt(c[36],c[9],s,u)),"DW-COOKIE"===a&&(c[8]=gt(c[8],c[3],s,u))),l=c}catch(t){H(t,e)}yt(d,l,"",e),f&&p&&yt(p,l,f,e);break;case ft.AlipayJSBridge:try{l=mt(o,l,e)}catch(t){H(t,e)}Et(l,o,e,i);break;default:yt(d,l,f,e)}}function yt(t,e,n,r){var o=r.openSendBeacon,o=void 0!==o&&o;t?!e||e.length&&0===e.length?H(Error("ç©ºæ•°æ®"),r):o&&_t()?(o=bt(e,n),o=new Blob([o],{type:"application/x-www-form-urlencoded"}),navigator.sendBeacon(wt(t,e,r).url,o)):St(t,e,n,r):H(Error("è¯·é…ç½®TracertæœåŠ¡æŽ¥æ”¶åœ°å€"),r)}function bt(t,e){return e?"data=".concat(b(t.join()),"&time=").concat((new Date).getTime(),"&taskId=").concat(e):"data=".concat(b(t.join()),"&time=").concat((new Date).getTime())}function wt(t,e,n){var r=n.bizType,o=n.spmAPos,i="",a=it.os.name;return a&&"na"!==a||(a="PC"),e&&e.length&&("D-AE"===(n=e[0])&&(i=e[9]),"DW-COOKIE"===n&&(i=e[3])),{url:"https://collect.alipay.com/dwcookie"===t||"https://loggwpre.alipay.com/dwcookie"===t?"".concat(t,"?biztype=").concat(r,"&eventid=").concat(i,"&productid=").concat(a,"&spmAPos=").concat(o):t,bizType:r,eventid:i,productid:a}}function St(t,e,n,r){var o=z();o&&(o.open("POST",wt(t,e,r).url,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(bt(e,n)))}function _t(){return!!(navigator&&navigator.sendBeacon&&"function"==typeof navigator.sendBeacon&&Blob&&"function"==typeof Blob)}function Et(e,n,r,o){try{window&&window.AlipayJSBridge?window.AlipayJSBridge.call(n,e,function(t){-1<[1,4].indexOf(t.error)&&(o&&o(e,r),H(Error("".concat(n||""," AlipayJSBridge is Empty")),r))}):my&&my.canIUse(n)?my.call(n,e):H(Error("".concat(n||""," AlipayJSBridge is Empty")),r)}catch(n){o&&o(e,r),H(n,r)}}function Tt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}Object.freeze(ht);var ot="object"==typeof global&&global&&global.Object===Object&&global,X="object"==typeof self&&self&&self.Object===Object&&self,xt=ot||X||Function("return this")(),Ot=function(){return xt.Date.now()},It=/\s/,At=/^\s+/;var G=xt.Symbol,Q=Object.prototype,Pt=Q.hasOwnProperty,kt=Q.toString,Ct=G?G.toStringTag:void 0,jt=Object.prototype.toString,Dt=G?G.toStringTag:void 0;function Lt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Dt&&Dt in Object(t)?function(t){var e=Pt.call(t,Ct),n=t[Ct];try{var r=!(t[Ct]=void 0)}catch(t){}var o=kt.call(t);return r&&(e?t[Ct]=n:delete t[Ct]),o}(t):jt.call(t)}function Mt(t){return null!=t&&"object"==typeof t}function Rt(t){return"symbol"==typeof t||Mt(t)&&"[object Symbol]"==Lt(t)}var Nt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Ut=/^0o[0-7]+$/i,Ht=parseInt;function Ft(t){if("number"==typeof t)return t;if(Rt(t))return NaN;if("string"!=typeof(t=Tt(t)?Tt(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e:t))return 0===t?t:+t;t=(e=t)&&e.slice(0,function(t){for(var e=t.length;e--&&It.test(t.charAt(e)););return e}(e)+1).replace(At,"");var e=Bt.test(t);return e||Ut.test(t)?Ht(t.slice(2),e?2:8):Nt.test(t)?NaN:+t}var qt=Math.max,Wt=Math.min;function $t(r,n,t){var o,i,a,c,s,u,l=0,d=!1,f=!1,e=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function p(t){var e=o,n=i;return o=i=void 0,l=t,c=r.apply(n,e)}function h(t){var e=t-u;return void 0===u||n<=e||e<0||f&&a<=t-l}function m(){var t,e=Ot();if(h(e))return g(e);s=setTimeout(m,(t=n-(e-u),f?Wt(t,a-(e-l)):t))}function g(t){return s=void 0,e&&o?p(t):(o=i=void 0,c)}function v(){var t=Ot(),e=h(t);if(o=arguments,i=this,u=t,e){if(void 0===s)return l=e=u,s=setTimeout(m,n),d?p(e):c;if(f)return clearTimeout(s),s=setTimeout(m,n),p(u)}return void 0===s&&(s=setTimeout(m,n)),c}return n=Ft(n)||0,Tt(t)&&(d=!!t.leading,a=(f="maxWait"in t)?qt(Ft(t.maxWait)||0,n):a,e="trailing"in t?!!t.trailing:e),v.cancel=function(){void 0!==s&&clearTimeout(s),o=u=i=s=void(l=0)},v.flush=function(){return void 0===s?c:g(Ot())},v}function zt(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Tt(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),$t(t,e,{leading:r,maxWait:e,trailing:o})}var Jt={AUTO:"auto",MIX:"mix",MANUAL:"manual"},Vt={CLICK:"clicked",EXPOSURE:"exposure",INPUT:"input",SCROLL:"scroll",TOUCH:"touch"},Gt=[Vt.CLICK,Vt.EXPOSURE,Vt.INPUT,Vt.SCROLL,Vt.TOUCH],ot=Object.freeze({__proto__:null,INPUT_TYPE:{NONE:"",TEXT:"text",SELECT:"select",TEXTAREA:"textarea",CHECKBOX:"checkbox",RADIO:"radio"},TAG_NAME:{INPUT:"INPUT",SELECT:"SELECT",TEXTAREA:"TEXTAREA",LABEL:"LABEL"},INPUT_ELEMENT_TYPES:{TEXT:"text",CHECKBOX:"checkbox",RADIO:"radio",PASSWORD:"password",URL:"url",EMAIL:"email",TEL:"tel",FILE:"file",SEARCH:"search",NUMBER:"number",DATETIME:"datetime",DATE:"date",MONTH:"month",WEEK:"week",DATETIME_LOCAL:"datetime-local",RANGE:"range"},COMBINE_TYPE:Jt,EVENT_TYPE:Vt,EVENT_TYPES:Gt}),Kt=1,Xt="__uepElementId",Yt=[],Qt=[],Zt=zt(ie,500,{leading:!1});function te(t){return t?(t[Xt]||(t[Xt]="".concat(Kt++)),t[Xt]):""}function ee(t,e){switch(t.actionId){case"exposure":return function(t,e){e=(1<arguments.length&&void 0!==e?e:{}).percent;return{state:0<(e=void 0===e?t?N(t):100:e)?"start":"end",percent:e}}(e,t);case"clicked":return(n=e)?{text:"SELECT"!==B(r=n.target||n.srcElement)||(r=r.options[r.selectedIndex])?(r.textContent||"").trim().slice(0,20):"",xPos:n.clientX,yPos:n.clientY,clickable:!0}:null}var n,r;return t}function ne(t,e){vt({tracert:e,type:ft.AlipayJSBridge,data:t,jsApiType:ht.remoteLog})}function re(e,n){e.combineEventArray&&e.combineEventArray.forEach(function(t){delete t.uep,t.context=e.context,ne(t,n)})}function oe(t){var e=0<arguments.length&&void 0!==t?t:{},t=e.context;delete e.context,V()?re(e,t):vt({tracert:t,type:ft.AlipayJSBridge,data:e,jsApiType:ht.handleUEPEvent,errorHandler:re})}function ie(){Yt.length&&(oe({eventArray:Yt,context:this}),this.debug&&console.log("eventArray",Yt),Yt.length=0),Qt.length&&(oe({combineEventArray:Qt,context:this}),this.debug&&console.log("combineEventArray",Qt),Qt.length=0)}function ae(t,e){delete t.uep,vt({tracert:e,type:ft.AlipayJSBridge,data:t,jsApiType:ht.reportData})}function ce(){for(var t=0,e={};t<arguments.length;t++){var n,r=arguments[t];for(n in r)e[n]=r[n]}return e}var se=function t(p){function h(t,e,n){var r,o;if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(n=ce({path:"/"},h.defaults,n)).expires&&((o=new Date).setMilliseconds(o.getMilliseconds()+864e5*n.expires),n.expires=o),n.expires=n.expires?n.expires.toUTCString():"";try{r=JSON.stringify(e),/^[\{\[]/.test(r)&&(e=r)}catch(t){}e=p.write?p.write(e,t):encodeURIComponent(e+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(t+"")).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var i,a="";for(i in n)n[i]&&(a+="; "+i,!0!==n[i]&&(a+="="+n[i]));return document.cookie=t+"="+e+a}t||(r={});for(var c=document.cookie?document.cookie.split("; "):[],s=/(%[0-9A-Z]{2})+/g,u=0;c.length>u;u++){var l=c[u].split("="),d=l.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var f=l[0].replace(s,decodeURIComponent),d=p.read?p.read(d,f):p(d,f)||d.replace(s,decodeURIComponent);if(this.json)try{d=JSON.parse(d)}catch(t){}if(t===f){r=d;break}t||(r[f]=d)}catch(t){}}return r}}return(h.set=h).get=function(t){return h.call(h,t)},h.getJSON=function(){return h.apply({json:!0},[].slice.call(arguments))},h.defaults={},h.remove=function(t,e){h(t,"",ce(e,{expires:-1}))},h.withConverter=t,h}(function(){});n(ue,[{key:"set",value:function(){var t=[].slice.call(arguments);t.length<2?this._set(t):this._set(a({},t[0],t[1]),t[2]||{})}},{key:"get",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],t="".concat(m,"_").concat(t),n=function(t,e){var n=1<arguments.length&&void 0!==e?e:{},e=window.localStorage&&window.localStorage.getItem(t)||se.get(t,n);if(se.get(t,n)&&window.localStorage)try{window.localStorage.setItem(t,e),se.remove(t,n)}catch(t){console&&console.warn&&console.warn("localstorage error")}return e}(t,n);return r&&(t=t,window.localStorage&&window.localStorage.removeItem(t),se.remove(t,e)),n}},{key:"_set",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t&&0!==Object.keys(t).length)for(var n in t)t.hasOwnProperty(n)&&function(e,n,r){if(r=2<arguments.length&&void 0!==r?r:{},!n||n.length<400||!r.cookie&&window.localStorage)if(window.localStorage)try{window.localStorage.setItem(e,n)}catch(t){se.set(e,n,r)}else se.set(e,n,r);else console&&console.warn&&console.warn("Tracert cookie set too long")}("".concat(m,"_").concat(n),t[n],e)}}]),X=new ue;function ue(){e(this,ue)}n(le,[{key:"initIframe",value:function(){if(this._iframe)return this._iframe;var t=document.createElement("iframe");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-100px",t.style.bottom="-100px",t.style.width="-100px",t.setAttribute("src","https://tracert.alipay.com/cross.html"),t.onload=function(){t.style.display="none"};try{document.body.appendChild(t)}catch(t){}return this._iframe=t}}]),Q=new le;function le(){e(this,le),this._iframe=null}var de=Array.isArray,G=G?G.prototype:void 0,fe=G?G.toString:void 0;function pe(t){if("string"==typeof t)return t;if(de(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,pe)+"";if(Rt(t))return fe?fe.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}var G=xt["__core-js_shared__"],he=(G=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",me=Function.prototype.toString,ge=/^\[object .+?Constructor\]$/,ve=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ye(t,e){t=null==t?void 0:t[e];return!Tt(e=t)||he&&he in e||!(function(t){if(Tt(t)){t=Lt(t);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}}(e)?ve:ge).test(function(t){if(null!=t){try{return me.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(e))?void 0:t}var be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,we=/^\w*$/,Se=ye(Object,"create"),_e=Object.prototype.hasOwnProperty,Ee=Object.prototype.hasOwnProperty;function Te(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xe(t,e){for(var n,r=t.length;r--;)if((n=t[r][0])===e||n!=n&&e!=e)return r;return-1}Te.prototype.clear=function(){this.__data__=Se?Se(null):{},this.size=0},Te.prototype.delete=function(t){t=this.has(t)&&delete this.__data__[t];return this.size-=t?1:0,t},Te.prototype.get=function(t){var e=this.__data__;if(Se){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return _e.call(e,t)?e[t]:void 0},Te.prototype.has=function(t){var e=this.__data__;return Se?void 0!==e[t]:Ee.call(e,t)},Te.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Se&&void 0===e?"__lodash_hash_undefined__":e,this};var Oe=Array.prototype.splice;function Ie(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ie.prototype.clear=function(){this.__data__=[],this.size=0},Ie.prototype.delete=function(t){var e=this.__data__,t=xe(e,t);return 0<=t&&(t==e.length-1?e.pop():Oe.call(e,t,1),--this.size,!0)},Ie.prototype.get=function(t){var e=this.__data__,t=xe(e,t);return t<0?void 0:e[t][1]},Ie.prototype.has=function(t){return-1<xe(this.__data__,t)},Ie.prototype.set=function(t,e){var n=this.__data__,r=xe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Ae=ye(xt,"Map");function Pe(t,e){var n=t.__data__;return("string"==(t=typeof e)||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e)?n["string"==typeof e?"string":"hash"]:n.map}function ke(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ce(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");function i(){var t=arguments,e=o?o.apply(this,t):t[0],n=i.cache;return n.has(e)?n.get(e):(t=r.apply(this,t),i.cache=n.set(e,t)||n,t)}return i.cache=new(Ce.Cache||ke),i}ke.prototype.clear=function(){this.size=0,this.__data__={hash:new Te,map:new(Ae||Ie),string:new Te}},ke.prototype.delete=function(t){t=Pe(this,t).delete(t);return this.size-=t?1:0,t},ke.prototype.get=function(t){return Pe(this,t).get(t)},ke.prototype.has=function(t){return Pe(this,t).has(t)},ke.prototype.set=function(t,e){var n=Pe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ce.Cache=ke;var je,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/\\(\\)?/g,Me=(je=(G=Ce(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(De,function(t,e,n,r){o.push(n?r.replace(Le,"$1"):e||t)}),o},function(t){return 500===je.size&&je.clear(),t})).cache,G);function Re(t,a,e){t=null==t?void 0:function(t,e){for(var n,r,o=0,i=(r=t,(e=de(n=a)?n:function(t,e){if(!de(t)){var n=typeof t;return"number"==n||"symbol"==n||"boolean"==n||null==t||Rt(t)||we.test(t)||!be.test(t)||null!=e&&t in Object(e)}}(n,r)?[n]:Me(null==n?"":pe(n))).length);null!=t&&o<i;)t=t[function(t){if("string"==typeof t||Rt(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e[o++])];return o&&o==i?t:void 0}(t,a);return void 0===t?e:t}n(Ne,[{key:"start",value:function(){this.isVisDataMode="true",console.log("start"),O()?this.delayedInit():window.addEventListener("load",this.delayedInit)}},{key:"stop",value:function(){this.isVisDataMode="false",console.log("stop"),this.delShowDataDom()}}]),G=Ne;function Ne(){var f=this;e(this,Ne),this.version="0.0.1",this.isMiniApp=!1,this.isInitSdk=!1,this.customDisplayList={},this.isVisDataMode="true",this.A="",this.B="",this.spmABList=[],this.initCount=0,this.insuranceTime=0,this.otherShowDataDomList=Object.create(null),this.showDataDomList=Object.create(null),this.oldShowDataDomList=!1,this.repeatPoint={},this.scrollTime=Date.now(),this.delayedInit=function(){f.start=!0,f.initSDK(),f.hashChangePage()},this.getAB=function(t){return f.A&&!t||(f.A=f.getA()||""),f.B&&!t||(f.B=f.getB()||""),f.A&&f.B?"".concat(f.A,".").concat(f.B):null},this.getB=function(){return I(document.body,_)||I(document.body,"data-aspm-b")},this.getA=function(){for(var t,e=x(document.getElementsByTagName("meta")),n=e.length,r=0;r<n;r++){var o=e[r],i=I(o,"name"),a=I(o,"content");switch(i){case _:case"data-aspm-a":t=a}if(t)break}return"a1877"===t||"a1180"===t?null:t},this.initSDK=function(){var t=f;t.getAB(!0)?t.changePage(!0):(t.initCount++,t.initCount<6&&setTimeout(function(){t.initSDK()},666),console.warn("æœªèƒ½èŽ·å–ABä½"))},this.hashChangePage=function(){console.log("å…¼å®¹å®¹å™¨é¢„åŠ è½½");var n=f;window.addEventListener("hashchange",function(){var t=n.getA(),e=n.getB();n.A===t&&n.B===e||(n.initCount=0,n.initSDK())})},this.changeAB=function(t,e){t&&e?(f.A=t,f.B=e):console.warn("aï¼Œbä½ä¸å®Œæ•´")},this.changePage=function(t){var e=f;e.startGetData.bind(f)(),t&&e.eventListener()},this.isminiAppDom=function(){document.getElementById("show_data_communication")?f.isMiniApp||(f.isMiniApp=!0,f.miniAppListener()):f.isMiniApp=!1},this.miniAppListener=function(){var n=f,r=document.getElementById("show_data_communication");if(r){var t=Re(r,"textContent");if(t)try{var e=JSON.parse(t);n.setSPMData(e)}catch(n){console.log(n)}new MutationObserver(function(){var t=r.textContent;if(t)try{var e=JSON.parse(t);n.setSPMData(e)}catch(t){console.log(t)}}).observe(r,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["textContent"]})}},this.eventListener=function(){var n,r,o,i;f.isInitSdk||(f.isInitSdk=!0,n=f,window.addEventListener("resize",function(){n.throttleStartGetData()},!0),window.addEventListener("touchstart",function(){n.scrollTime=Date.now(),n.scrollCompensate()},!0),window.addEventListener("scroll",function(){n.scrollTime=Date.now(),n.scrollCompensate()},!0),window.addEventListener("touchmove",function(){n.scrollTime=Date.now(),n.scrollCompensate()},!0),document.addEventListener("resume",function(){n.getAB()&&n.changePage()},!1),r=document.body,o={attributes:!0,childList:!0,subtree:!0},(i=new MutationObserver(function(t){var e=!1;t&&t.length&&0<t.length&&t.forEach(function(t){"BODY"!==t.target.nodeName&&"TracertWebShowData"!==t.target.id&&(e=!0)}),e&&(i.disconnect(),setTimeout(function(){i.observe(r,o)},6),n.throttleStartGetData(),n.throttleisMiniAppDom())})).observe(r,o),window.requestAnimationFrame(n.idleGetData),n.dispatchReadyEvent())},this.scrollCompensate=function(){Date.now()-f.scrollTime<1500&&(f.throttleStartGetData(),setTimeout(function(){f.scrollCompensate()},6))},this.idleGetData=function(t){t=t||0,setTimeout(666<t-f.insuranceTime?function(){f.insuranceTime=t,window.requestAnimationFrame(f.idleGetData)}:function(){f.throttleLangStartGetData(),f.insuranceTime=t,window.requestAnimationFrame(f.idleGetData)},666)},this.dispatchReadyEvent=function(){window.dispatchEvent(new Event("webShowDataReady"))},this.setSPMData=function(t){Tt(t)&&(f.customDisplayList=t||{},f.throttleStartGetData())},this.setSPMDataDom=function(){var o,i;"true"===f.isVisDataMode&&(o=f.customDisplayList,i=Object.create(null),Object.keys(o).forEach(function(n){var t,e,r=o[n];r.unShowCurrent||(!(t=f.getDomData("".concat(n),r))||(e=f.addDom(t))&&(i[t.name]=e)),r.children&&Object.keys(r.children).forEach(function(t){var e=r.children[t],t=f.getDomData("".concat(n,".").concat(t),e);!t||(e=f.addDom(t))&&(i[t.name]=e)})}),f.otherShowDataDomList=i)},this.startGetData=function(){f.showDataDomList=Object.create(null),f.setSPMDataDom();var t=document.body;f.getData(t.children),f.setDataDom()},this.setDataDom=function(){"true"===f.isVisDataMode?(Object.assign(f.showDataDomList,f.otherShowDataDomList),f.oldShowDataDomList?f.changeShowDataDom():f.createShowDataDom()):f.delShowDataDom()},this.changeShowDataDom=function(){if("true"===f.isVisDataMode){f.setSPMDataDom();var t=document.querySelectorAll("#TracertWebShowData");if(t&&1<t.length)return f.delShowDataDom(),void f.createShowDataDom();var a=t[0];a&&a.children&&0<a.children.length?(x(a.children).forEach(function(t){var e,n,r,o=t.getAttribute("data-showdataid"),i=f.showDataDomList[o];i?(e=i.width,n=i.height,r=i.top,t.style.transform="translate(".concat(i.left,"px, ").concat(r,"px)"),t.style.maxHeight="".concat(n,"px"),t.style.maxWidth="".concat(e,"px"),delete f.showDataDomList[o]):a.removeChild(t)}),t=Object.keys(f.showDataDomList),f.showDataDomList&&0<t.length&&t.forEach(function(t){a.appendChild(f.parseDom(f.showDataDomList[t].str))})):(f.delShowDataDom(),f.createShowDataDom())}},this.createShowDataDom=function(){var t,e,n;"true"===f.isVisDataMode&&(f.setSPMDataDom(),t=document.createDocumentFragment(),(e=document.createElement("div")).id="TracertWebShowData",n="",Object.keys(f.showDataDomList).forEach(function(t){n+=f.showDataDomList[t].str}),e.innerHTML=n,t.appendChild(e),document.getElementsByTagName("body")[0].appendChild(t),f.oldShowDataDomList=!0)},this.delShowDataDom=function(){var t=document.querySelectorAll("#TracertWebShowData");t&&0<t.length&&t.forEach(function(e){e&&e.children&&0<e.children.length?x(e.children).forEach(function(t){e.removeChild(t)}):document.body.removeChild(e)})},this.getShowSpmCPos=function(t){var e=I(t,_)||I(t,"data-spmv")||"";return e?{spm:e}:(e=I(t,"data-aspm-c")||"")?{spm:e,type:"C"}:null},this.getShowSpmDPos=function(t){var e=I(t,"data-spmv")||I(t,E);return e?{spm:e}:(e=I(t,"data-aspm-d"))?{spm:e,type:"D"}:null},this.getRect=function(t){var e=t.getBoundingClientRect(),e=s({},JSON.parse(JSON.stringify(e))),t=window.getComputedStyle(t).zIndex;return e.zIndex=t="auto"===t?null:Number(t)+1,e},this.cName="",this.getData=function(t){"true"===f.isVisDataMode&&x(t).forEach(function(t){var e,n,r;!A(t)||0<M(t,n=f.getRect(t))&&((e=f.getShowSpmCPos(t))&&(f.cName=e.spm,!(e=f.getDomData("".concat(e.spm),n,e.type))||(r=f.addDom(e))&&(f.showDataDomList[e.name]?f.repeatPoint[e.name]=1+f.repeatPoint[e.name]||0:f.showDataDomList[e.name]=r)),(r=f.getShowSpmDPos(t))&&(!(n=f.getDomData("".concat(f.cName,".").concat(r.spm),n,r.type))||(r=f.addDom(n))&&(f.showDataDomList[n.name]?f.repeatPoint[n.name]=1+f.repeatPoint[n.name]||0:f.showDataDomList[n.name]=r)),t.children&&f.getData(t.children))})},this.addDom=function(){},this.parseDom=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},this.changeOthenAB=function(t){console.log("changeOthenAB",t)},this.addOtherAB=function(t,e){t===f.A&&e===f.B||(e="".concat(t,".").concat(e),f.spmABList.includes(e)||(f.spmABList.push(e),f.changeOthenAB([e].concat(u(f.spmABList)))))},this.getSPMFullName=function(t,e){var n=null,r=null,o=null,i=null;if(t&&"string"==typeof t){var a=t.split("."),c=a.length;if(e)"C"===e&&(o=t),"D"===e&&(c<"2"?i=t:(i=a[c-1],o=a[c-2]));else{for(var s=c;s--;){var u=a[s].substring(0,1);"a"===u&&(n=n||a[s]),"b"===u&&(r=r||a[s]),"c"===u&&(o=o||a[s]),"d"===u&&(i=i||a[s])}c=a[c-1];c&&(d=Number(c),("number"==typeof(l=d)||Mt(l)&&"[object Number]"==Lt(l))&&l!=+l||(i=d))}}n&&r&&f.addOtherAB(n,r);var l=f.A,d=f.B,l=l||f.getA(),d=d||f.getB();return i?{id:"".concat(n||l,".").concat(r||d,".").concat(o,".").concat(i),type:"D"}:{id:"".concat(n||l,".").concat(r||d,".").concat(o),type:"C"}},this.getDomData=function(t,e,n){n=f.getSPMFullName(t,n);return{rect:e,name:n.id,type:n.type}},this.throttleStartGetData=zt(this.startGetData,6),this.throttleLangStartGetData=zt(this.startGetData,666),this.throttleisMiniAppDom=zt(this.isminiAppDom,600)}t.Cookies=se,t.CrossIframe=Q,t.ShowData=G,t.addEvent=o,t.addMexOption=function(t,e){var n=t||{},t=e||{};return t.spmId&&"mergeExpose"===t.actionId&&3===t.spmId.split(".").length&&(n[e=t.spmId]||(n[e]={},n[e]=w({},t))),n},t.addSequence=gt,t.addToExObj=function(t,e){var n=t||{},r=e||{};return r.spmId&&"mergeExpose"===r.actionId?(3===r.spmId.split(".").length&&(n[t=r.spmId]||(n[t]={}),e="",r.param4&&r.param4.rid?(e=r.param4.rid,delete r.param4.rid):e="",n[t][e]||(n[t][e]=[]),n[t][e].push(r.param4)),n):null},t.config=ot,t.cookiesPrefix=m,t.dealExtra=function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r={};for(e in t)t.hasOwnProperty(e)&&(r[0===e.indexOf(n)?e:n+e]=t[e]);return r},t.debounce=function(n,r){var o,i=arguments,a=this;return function(){var t=a,e=i;clearTimeout(o),o=setTimeout(function(){o=null,n.apply(t,e)},r)}},t.decode=function(t){return t?decodeURIComponent(t):""},t.detect=it,t.encode=b,t.formatExObj=function(t,e){var n=[],r=["fullURL","mBizScenario","mPageState","mPageName","version"];if("object"===h(t))for(var o in t)if(t.hasOwnProperty(o)){var i={};e?i=w(i,e[o]):(i.spmId=o,i.actionId="mergeExpose");var a=[];if(t[o].options)i.param4=S(t[o].options.param4);else{for(var c in t[o])if(t[o].hasOwnProperty(c)){for(var s=[],u=t[o][c],l=0;u.length>l;l++){var d,f=[],p=u[l];for(d in p)p.hasOwnProperty(d)&&-1===r.indexOf(d)&&f.push("".concat(d,"|").concat(p[d]));s.push(f.join(";"))}a.push("rid|".concat(c,":").concat(s.join("&")))}i.param4="exposed=".concat(a.join("__"))}n.push(i)}return n},t.getApFloatVersion=function(t){var e=t||window.navigator.userAgent;if(!RegExp("aliapp\\(".concat("ap"),"i").test(e))return 0;var n=/alipayclient\/(\d+)\.?(\d+)?\.?(\d+)?/i.exec(e),r=0;return n&&(t=n[1]||0,e=n[2]||0,n=n[3]||0,+e<10&&(e="0".concat(e)),+n<10&&(n="0".concat(n)),r=parseFloat("".concat(t,".").concat(e).concat(n))),r},t.getAttr=I,t.getContentParam=L,t.getDPosDom=C,t.getDomConfig=function(t){var t=t&&t.getAttribute?t.getAttribute("data-aspm-config"):"",e={};if(t){var n=t.split("^");if(-1===t.indexOf("="))e=n;else for(var r,o=n.length,i=0;i<o;i++)(r=n[i])&&(e[(r=r.split("="))[0]]=r[1]||"")}return e},t.getDomExpoPercent=N,t.getDomParam=D,t.getHttpObj=z,t.getHttpSendUrl=wt,t.getMetaPageName=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"pagename",e=x(window.document.getElementsByTagName("meta")),n="",r=0;e.length>r;r++){var o=e[r],i=I(o,"name"),o=I(o,"content");if(o&&i&&i===t){n=o;break}}return n},t.getMetaSpm=function(t){for(var e,n,r,o,i,a=x(t||document.getElementsByTagName("meta")),c=a.length,s=0;s<c;s++){switch(n=I(e=a[s],"name"),r=I(e,"content"),n){case _:i=r;break;case"data-bizType":o=r}if(i&&o)break}t={};return i&&(t.spmAPos=i),o&&(t.bizType=o),t},t.getNetwork=W,t.getPageMaxZindex=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=u(document.all).map(function(t){return+window.getComputedStyle(t).zIndex||0});return e.length?Math.max.apply(Math,u(e)):t},t.getSendValue=bt,t.getSpm=$,t.getSpmBPos=function(){return I(document.body,_)},t.getSpmCPos=k,t.getSpmDPos=j,t.getTagName=B,t.getUA=F,t.getUserId=q,t.getValue=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:location.search;if(!t)return"";var n="";return n=""===(n=f(t,e))?p(t):n},t.getValueFromSearch=f,t.getValueFromStartupParams=p,t.getXPath=R,t.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}},t.isDom=A,t.isLoaded=O,t.isViewDom=P,t.isWechat=function(){return"undefined"!=typeof WeixinJSBridge||"undefined"!=typeof QQJSBridge||!(!window.navigator||!(-1<window.navigator.userAgent.toLowerCase().indexOf("micromessenger")||-1<window.navigator.userAgent.toLowerCase().indexOf("qq")||-1<window.navigator.userAgent.toLowerCase().indexOf("toutiaomicroapp")||void 0!==window.navigator.wxuserAgent))},t.jsApiSendBefore=mt,t.jsApiTypeEnum=ht,t.load=function(t){"interactive"===document.readyState||"complete"===document.readyState?t():o("DOMContentLoaded",document,t)},t.log=function(t){var e=t.params,n=void 0===e?{}:e,r=t.e,o=t.context,i=t.combineType,a=n.actionId,e=void 0===a?n.type:a;-1!==Gt.indexOf(e)?(t=r?r.target||r.srcElement||r:null,a=n.param4?v(n.param4):null,t=s(s({},ee(n,r)),{},{type:e===Vt.CLICK?"click":e,timestamp:n.eventTime,xpath:R(t),target:te(t),spm:n.spmId,scm:n.newScm||n.scm,params:s({},a),bizCode:n.bizType,combineType:i||"manual"}),delete n.newScm,(a=p("uepCombineMode"))||delete t.combineType,a&&i!==Jt.AUTO?Qt.push(s(s({},n),{},{uep:t})):Yt.push(t),ie.call(o)):ne(n,o)},t.logPv=function(t,e){V()?ae(t,e):vt({tracert:e,type:ft.AlipayJSBridge,data:t,jsApiType:ht.reportUEPData,errorHandler:ae})},t.nodeListToArray=x,t.objToStr=g,t.objectAssign=d,t.ownAddEventListener=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]||arguments[3];return o(t,e,n,r),function(){i(t,e,n,r)}},t.removeEvent=i,t.reportError=H,t.request=vt,t.requestIdleCallback=function t(e){return("requestIdleCallback"in window?t:setTimeout)(e)},t.requestTypeEnum=ft,t.sendAlipayJSBridge=Et,t.sendHttpRequest=yt,t.sendXhrPost=St,t.spmDPosMarkAttr=E,t.spmDataKey=_,t.storage=X,t.strToObj=v,t.supportsSendBeacon=_t,t.throttleLog=function(t){var e=t.params,n=t.event,r=t.context,o=t.combineType,i=n?n.target||n.srcElement||n:null,t=function(t,e){var n=j(t),r="";if(!e.spmAPos||!e.spmBPos||!n)return"";var o=n.split("."),i=!0;1===o.length&&o.unshift(k(t));for(var a=0;a<2;a++)if(!o[a]){i=!1;break}return r=i?[e.spmAPos,e.spmBPos].concat(o).join("."):r}(i,r),n=t&&D(i),e=s({timestamp:Date.now(),spm:t,scm:t&&((t=L(t=i))&&t.param5?t.newScm||v(t.param5).scm:""),params:s({},n),combineType:o,xpath:R(i),target:te(i)},e);p("uepCombineMode")||delete e.combineType,Yt.push(e),Zt.call(r)},t.timeFormat=y,t.url={parse:function(t){var e=t.split("//"),n=e[0],r=e[1]||"",o=r.split("/")[0],i=o.split(":"),a=i[0],c=i[1]||"",s=r.replace(o,"").split("#"),e=s[0],i=s[1]||"",r=i?"#".concat(i):null,s=e.split("?"),i=s[0],s=s[1]||"",u={protocol:n,slashes:!0,auth:null,host:o,port:c||null,hostname:a,hash:r,search:s?"?".concat(s):null,query:s||null,pathname:i,path:e,href:t,format:function(){return"".concat(u.protocol,"//").concat(u.host).concat(u.path).concat(u.hash||"")}};return u}},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},t.visibleProportion=M,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertCore=e(t.tracertUtil)}(this,function(u){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function l(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function c(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function b(){return o.Date.now()}var n="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")(),i=/\s/,f=/^\s+/;var n=o.Symbol,r=Object.prototype,p=r.hasOwnProperty,h=r.toString,m=n?n.toStringTag:void 0,g=Object.prototype.toString,v=n?n.toStringTag:void 0;var w=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,_=/^0o[0-7]+$/i,E=parseInt;function T(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||null!=e&&"object"==typeof e&&"[object Symbol]"==(null==(e=e)?void 0===e?"[object Undefined]":"[object Null]":v&&v in Object(e)?function(t){var e=p.call(t,m),n=t[m];try{var r=!(t[m]=void 0)}catch(t){}var o=h.call(t);return r&&(e?t[m]=n:delete t[m]),o}(e):g.call(e)))return NaN;var e;if("string"!=typeof(t=y(t)?y(n="function"==typeof t.valueOf?t.valueOf():t)?n+"":n:t))return 0===t?t:+t;t=(n=t)&&n.slice(0,function(t){for(var e=t.length;e--&&i.test(t.charAt(e)););return e}(n)+1).replace(f,"");var n=S.test(t);return n||_.test(t)?E(t.slice(2),n?2:8):w.test(t)?NaN:+t}var x=Math.max,O=Math.min;function I(r,n,t){var o,i,a,c,s,u,l=0,d=!1,f=!1,e=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function p(t){var e=o,n=i;return o=i=void 0,l=t,c=r.apply(n,e)}function h(t){var e=t-u;return void 0===u||n<=e||e<0||f&&a<=t-l}function m(){var t,e=b();if(h(e))return g(e);s=setTimeout(m,(t=n-(e-u),f?O(t,a-(e-l)):t))}function g(t){return s=void 0,e&&o?p(t):(o=i=void 0,c)}function v(){var t=b(),e=h(t);if(o=arguments,i=this,u=t,e){if(void 0===s)return l=e=u,s=setTimeout(m,n),d?p(e):c;if(f)return clearTimeout(s),s=setTimeout(m,n),p(u)}return void 0===s&&(s=setTimeout(m,n)),c}return n=T(n)||0,y(t)&&(d=!!t.leading,a=(f="maxWait"in t)?x(T(t.maxWait)||0,n):a,e="trailing"in t?!!t.trailing:e),v.cancel=function(){void 0!==s&&clearTimeout(s),o=u=i=s=void(l=0)},v.flush=function(){return void 0===s?c:g(b())},v}function A(t){console&&console.warn&&console.warn("Tracert deprecatedï¼š".concat(t))}var P=document;return n=[{key:"before",value:function(t,e){var n=this._beforeEvObj;if(!n[t])throw Error("ç›®æ ‡æ–¹æ³•ä¸æ”¯æŒè¯¥äº‹ä»¶");if("function"!=typeof e)throw Error("ç›‘å¬å™¨ä¸æ˜¯å‡½æ•°");n[t].push(e)}},{key:"_runBeforeFns",value:function(t,e){var n=this._beforeEvObj[t]||[];if(!n||!n.length)return!0;for(var r=0;n.length>r;r++)if(!1===n[r].call(this,e))return console&&console.debug&&console.debug("Tracert before fns: ".concat(t," stop propagation")),!1;return!0}},{key:"after",value:function(t,e){var n=this._afterEvObj;if(!n[t])throw Error("ç›®æ ‡æ–¹æ³•ä¸æ”¯æŒè¯¥äº‹ä»¶");if("function"!=typeof e)throw Error("ç›‘å¬å™¨ä¸æ˜¯å‡½æ•°");"start"===t&&this.ready?e():n[t].push(e)}},{key:"_runAfterFns",value:function(t,e){var n=this._afterEvObj[t]||[];if(n&&n.length)for(var r=0;n.length>r;r++)n[r].call(this,e)}},{key:"init",value:function(){}},{key:"load",value:function(t){u.load(t)}},{key:"onReady",value:function(t){this.ready?t&&t():document.addEventListener("TracertOnReady",function(){t&&t()})}},{key:"_start",value:function(){function e(){n.load(function(){if(!n.ready){var t;n.get("_isMain")&&((t=u.getMetaSpm()).spmAPos=n.spmAPos||t.spmAPos,n.spmBPos||(t.spmBPos=u.getSpmBPos()),n.set(t)),n.ready=!0;for(var e=0;n.apiCashList.length>e;e++)n.call.apply(n,n.apiCashList[e]);n._runAfterFns("start"),n.apiCashList=[]}})}var n=this;this.pluginReady&&this.started?e():(document.addEventListener("TracertPluginReady",function(t){n.started&&n._instanceId===t._instanceId&&e()}),document.addEventListener("TracertStart",function(t){n.pluginReady&&n._instanceId===t._instanceId&&e()}))}},{key:"start",value:function(){this.run(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"run",value:function(){this.set(l(l({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),{},{started:!0}));var t=document.createEvent("HTMLEvents");t._isMain=!!this._isMain,t._instanceId=this._instanceId,t.initEvent("TracertStart",!0,!0),document.dispatchEvent(t),this.autoLogPv&&this.call("logPv",{combineType:u.config.COMBINE_TYPE.MIX})}},{key:"addSideEffects",value:function(){var t=[].slice.call(arguments);"function"==typeof t[0]&&(this._sideEffects.includes(t)||this._sideEffects.push(t))}},{key:"clearSideEffects",value:function(){if(!this._sideEffects||!this._sideEffects.length)return!0;for(var t=0;this._sideEffects.length>t;t++){var e=this._sideEffects[t],n=e.slice(1);e[0]&&e[0](n)}return!0}},{key:"loadPlugins",value:function(t){if(t&&t.length){this._plugins=t;for(var e=0;t.length>e;e++)this.loadPlugin(t[e])}}},{key:"loadPlugin",value:function(t){var e=this;t&&(window["tracert".concat(t)]&&"function"==typeof window["tracert".concat(t)]||"function"==typeof t)&&("function"==typeof t?t:window["tracert".concat(t)])(this,function(){var t;e._pluginLoadCnt++,e._pluginLoadCnt===e._plugins.length&&(e.set({pluginReady:!0}),(t=document.createEvent("HTMLEvents"))._isMain=!!e._isMain,t._instanceId=e._instanceId,t.initEvent("TracertPluginReady",!0,!0),document.dispatchEvent(t))})}},{key:"call",value:function(){var t=[].slice.call(arguments);if(!t[0]||"run"!==t[0]&&"start"!==t[0]||this.set({started:!0}),this.ready){if(!this[t[0]]||"function"!=typeof this[t[0]])return console.warn("æœªæ‰¾åˆ°æ–¹æ³•ï¼š".concat(t[0])),null;var e=t.slice(1),e=this.optionsHandle(e),e=this[t[0]].apply(this,e)}else this.apiCashList.push(t);return e}},{key:"optionsHandle",value:function(t){return t&&t.length&&t.forEach(function(t){t&&(t.spmid&&(t.spmId=t.spmid),t.seedid&&(t.seedId=t.seedid),t.ucid&&(t.ucId=t.ucid))}),t}},{key:"get",value:function(t){return this[t]}},{key:"set",value:function(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._runBeforeFns("set",e),e.eventName&&u.objectAssign(e,{eventType:e.eventName}),"object"===a(e.mdata)&&(e.mdata=l(l({},this.mdata),e.mdata));var n={};Object.keys(e).forEach(function(t){var r;e[t]instanceof Function?(r=e[t],n[t]=function(){try{for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(o,e)}catch(t){u.reportError(t,o)}}):n[t]=e[t]}),u.objectAssign(this,n)}},{key:"getSysInfo",value:function(t){return this.sysInfo[t]}},{key:"setSysInfo",value:function(){u.objectAssign(this.sysInfo,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"config",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A("config å·²åºŸå¼ƒï¼è¯·ä½¿ç”¨ set æ–¹æ³•"),this.set(t)}},{key:"remoteLog",value:function(){}},{key:"logPv",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._runBeforeFns("logPv",t)&&(this._logPv(t),this._runAfterFns("logPv",t))}},{key:"_logPv",value:function(){}},{key:"report",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.params,r=e.spmId;r&&(e=(t=r.split("."))[0],t=t[1],e&&t&&this.set({spmAPos:e,spmBPos:t})),"object"===a(n)&&this.set({mdata:l(l({},this.mdata),n)}),this.set({_calledLogPv:!!r}),this.call("logPv")}},{key:"pageState",value:function(){this.set({state:0<arguments.length&&void 0!==arguments[0]?arguments[0]:""}),this.call("logPv")}},{key:"pageName",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";A("å·²åºŸå¼ƒ"),this.set({name:t})}},{key:"setPageState",value:function(){this.call("pageState",0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")}},{key:"time",value:function(){var t="".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:""),e=this.timeMap;t&&!e[t]&&(e[t]=+new Date)}},{key:"timeEnd",value:function(){var t="".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:""),e=this.timeMap;if(!t||!e[t])return"";var n=e[t],n=+new Date-n;return delete e[t],n}},{key:"_goRemotelog",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(t.seedId||t.spmId){var e=t.spmId||t.spmid||"",n=e.split(".").length,r=this.spmAPos,o=this.spmBPos;if(r&&o)switch(n){case 1:case 2:if(""===e)break;if(0!==e.indexOf("c"))break;e=[r,o,e].join(".")}var i={ucId:t.ucId,seedId:t.seedId,spmId:e,actionId:t.actionId,logLevel:t.logLevel||this.logLevel,param4:t.mdata||{}};t.type&&(i.type=t.type),t.params&&"object"===a(t.params)&&(t.params.length?u.objectAssign(i,{param1:t.params[0]||"",param2:t.params[1]||"",param3:t.params[2]||""}):(n=t.mdata||{},u.objectAssign(n,t.params),u.objectAssign(i.param4,n))),!t.timeKey||(t=this.call("timeEnd",t.timeKey))&&(i.param4.consume=t),this.call("remoteLog",i)}else console.warn("è¯·å¡«å…¥åŸ‹ç‚¹seedIdæˆ–spmId")}},{key:"info",value:function(){this._goRemotelog(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"error",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};u.objectAssign(t,{type:"error",actionId:"exception"}),this._goRemotelog(t)}},{key:"click",value:function(){var e,n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=i.combineType,c=void 0===a?"manual":a,s=i.event,t={spmId:t,extra:r,options:o,currentConfig:i};this._runBeforeFns("click",t)&&(o=r.extraSpmIds,t.extra.extraSpmIds&&delete t.extra.extraSpmIds,r=(i=t.spmId.split(":"))[1]?{seedDesc:i[1]}:{},u.objectAssign(r,u.dealExtra(t.extra,this.paramPrefix)),e={param1:this.url,param2:i[0],param4:r,seedId:this.seedIdCfg.clkSeedId,actionId:u.config.EVENT_TYPE.CLICK,spmId:i[0]},this.fullLinkAndChInfo&&(r=t.extra.newChinfo||"",i=t.extra.entityId||t.extra.scm||"",r&&i&&(i={param5:"newChinfo=".concat(r,"^scm=").concat(i)},u.objectAssign(t.options,i))),u.objectAssign(e,t.options),this.set({lastClkSpm:t.spmId}),this.call("remoteLog",l({},e),!0,s,c),o&&o.length&&o.forEach(function(t){n.call("remoteLog",l(l({},e),{},{extraPageId:t}),!0,s,c)}),this._runAfterFns("click",t))}},{key:"expo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"up",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},i=o.combineType,a=void 0===i?"manual":i,i=o.event,t={spmId:t,offset:e,extra:n,options:r,currentConfig:o};this._runBeforeFns("expo",t)&&(e={param1:this.url,param2:t.spmId,param3:t.offset,param4:u.dealExtra(t.extra,this.paramPrefix),seedId:this.seedIdCfg.expoSeedId,actionId:u.config.EVENT_TYPE.EXPOSURE,spmId:t.spmId},this.fullLinkAndChInfo&&(n=t.extra.newChinfo||"",o=t.extra.entityId||t.extra.scm||"",n&&o&&(o={param5:"newChinfo=".concat(n,"^scm=").concat(o)},u.objectAssign(e,o),u.objectAssign(t.options,o))),u.objectAssign(e,r),r=r&&r.force,this.expoObj=this.expoObj||{},r||!1!==this.expoObj[t.spmId]?(this.expoOnce&&(this.expoObj[t.spmId]=!1),this.call("remoteLog",e,!1,i,a),this._runAfterFns("expo",t)):console.warn("ç‚¹ä½ ".concat(t.spmId," å·²ç»æ›å…‰è¿‡äº†")))}},{key:"calc",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};A("calc å·²åºŸå¼ƒ");n={param1:this.url,param2:t,param3:e,param4:u.dealExtra(n,this.paramPrefix),seedId:this.seedIdCfg.calcSeedId,actionId:"timestamp"};this.call("remoteLog",n)}},{key:"expoContent",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"";this.expo(t,"up",r,{param5:"newChinfo=".concat(n,"^scm=").concat(e||o),newScm:o})}},{key:"clickContent",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"";this.click(t,r,{param5:"newChinfo=".concat(n,"^scm=").concat(e||o),newScm:o})}}],t(k.prototype,n),k;function k(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,k);var e={autoLogPv:!0,eventType:"click",autoExpo:!1,bizType:"H5behavior",state:"",name:"",logLevel:"2",mdata:{},seedIdPrefix:"",seedIdSuffix:"",spmAPos:"",spmBPos:"",bizScenario:u.getValue("bizScenario")||"",paramPrefix:"",debug:!1,server:"",taskId:"",verifyServer:"",lastClkSpm:"",url:location.href.split(/\?|#|;jsessionid=/)[0],referSPM:"",srcSpm:"",sessionIdKey:"tracert-session-key",seedIdCfg:{pageSeedId:"H5_MTRACKER_AP_PAGE",clkSeedId:"H5_MTRACKER_AP_CLK",calcSeedId:"H5_MTRACKER_AP_CALC",expoSeedId:"H5_MTRACKER_AP_EXPO",syslogSeedId:"H5_MTRACKER_AP_SYSLOG"},_plugins:[],platformType:"",ready:!1,apiCashList:[],timeMap:{},expoOnce:!1,_wap_intervalEx:400,_wap_interval:300,_wap_mgObjIndex:0,_wap_exObjIndex:0,_wap_mgTdObjIndex:0,_expoMergeItvObj:0,hasExpoMerge:!1,fmtedExObjArr:[],fmtedExObj:{},fmtedExOptions:{},cacheExObjArr:[],cacheMrExObjArr:[],expotTimeout:300,expoObj:{},expoType:function(t){u.addEvent("scroll",P,function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return y(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),I(t,e,{leading:r,maxWait:e,trailing:o})}(t,300,{leading:!1,trailing:!0}))},expoSection:[-.3,.3],_beforeEvObj:{logPv:[],click:[],expo:[],set:[],send:[]},_afterEvObj:{start:[],logPv:[],click:[],expo:[]},_sideEffects:[],_pluginLoadCnt:0,sysInfo:{},_v:"",_instanceId:u.uuid()};u.objectAssign(e,t),u.objectAssign(this,e);var n=window.TracertCmdCache;if(n&&n.length)for(var r=0;n.length>r;r++){var o=[].slice.call(n[r]),o=function(t){if(Array.isArray(t))return t}(i=o)||c(i)||s(i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],o=o.slice(1);this.call.apply(this,[i].concat(function(t){if(Array.isArray(t))return d(t)}(o=o)||c(o)||s(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}this._start()}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t=t||self).tracertMonitor=e(t.tracertUtil)}(this,function(util){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};for(var n,r={},o=Object.keys(t),i=0;o.length>i;i++)e.indexOf(n=o[i])<0&&(r[n]=t[n]);return r}function _objectWithoutProperties(t,e){if(null==t)return{};var n,r=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;o.length>i;i++)e.indexOf(n=o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}var version="0.1.37",errorCodeEnums={JS:1,REQUEST:2,PROMISEREJECTION:3,ASSETS:4};function getResourceErrorSrc(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.src||t.href;return e="img"===t.tagName.toLowerCase()&&0===e.indexOf("data:")?e.split(",")[0]:e}function getTime(){function t(t){return(t<10?"0":"").concat(t)}var e=new Date;return"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate())," ").concat(t(e.getHours()),":").concat(t(e.getMinutes()),":").concat(t(e.getSeconds()),":").concat(e.getMilliseconds())}function getXPath(t,e){var n=t.id?"".concat(t.id):"",r=t.className?"".concat(t.className):"",o=t.tagName.toLowerCase(),i=n||r,a=[];n&&a.push('[@id="'.concat(n,'"]')),r&&a.push('[@class="'.concat(r,'"]'));a="".concat(o).concat(i?a.join(""):"");return t.parentNode&&t.parentNode.tagName&&e-1!=0?"".concat(getXPath(t.parentNode,e-1),">").concat(a):a}function safelyPush(t,e,n){var r=n||20;if(t&&e){n<=r&&n||(n=r),t.push(e);r=t.length-r;return t=0<r?t.slice(r):t}}function generateIdentifier(t){return[t.code,t.uid,t.page,t.msg||""].join("_")}function getUserId(t){return t&&(t.role_id||t.roleId||t.cUserId||t.backupUserId||t.bucUserId)||""}var objectAssign=util.objectAssign,doc=document,docEl=doc.documentElement,startTime=(new Date).getTime(),fieldLenLimt=660,limitFields=["code","msg"],encodeValue=function(t){return encodeURIComponent(t).replace(/'/g,"%27")};function objToStr(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"^",r=[];if(t instanceof Array)r=t;else if(t instanceof Object){var o,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?encodeValue:function(t){return t};for(e in t)t.hasOwnProperty(e)&&(o=i(t[e]),r.push("".concat(e,"=").concat(o)))}return r.join(n)}function initSessionId(t){var e,n;t.sessionId||((n=(n=window.sessionStorage)||{})[e=t.sessionIdKey]||(n[e]="".concat(util.uuid(),"_").concat(Date.now())),t.set({sessionId:n[e]}))}function getNetwork(){return navigator&&navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:""}function filterParam(t,e){objectAssign(e,this.mdata||{}),e.title=document.title,e.dom_cnt=document.getElementsByTagName("*").length,e.delay=(new Date).getTime()-startTime,e.scroll_top=docEl.scrollTop+doc.body.scrollTop,e.content_height=Math.max(docEl.clientHeight,docEl.offsetHeight,docEl.scrollHeight),e.last_action=this._lastAction,e.monitorConfigFailed=this._monitorConfigFailed?1:0,e.network=getNetwork(),e.spmId=t;var n=this.refSpm||this.referSPM||"";e.ref=this.refUrl,e.referSPM=n,e.fullURL=this.fullURL||location.href,e.source_appid=this.spmAPos,this._spmId&&(e._spmId=this._spmId),this._refSpm&&(e._refSpm=this._refSpm),this.cOfflineVer&&(e.c_offline_ver=this.cOfflineVer),this.cAppId&&(e.c_app_id=this.cAppId);t=[version],n=this._v;if(n&&t.push("h5:".concat(n)),e.tracert_ver=t.join(";"),"object"===_typeof(e)){var r,o,i=e;for(r in i)i.hasOwnProperty(r)&&"string"==typeof i[r]&&(limitFields.indexOf(r)<0&&!/^[dmc]\d+$/.test(r)||i[r].length>fieldLenLimt&&(i[r]=i[r].slice(0,fieldLenLimt)),o=i[r].replace(/\s+/g," "),i[r]="fullURL"===r&&300<o.length?o.slice(0,300):o)}return e}function getUA(){return navigator.userAgent?navigator.userAgent.replace(/,/g,"%2C"):""}function packFinalData(t){var e=t.spmId,n=t.seedId,r=t.param4,o=r.__sid||this.sessionId||util.uuid();delete r.__sid;function i(t){return(t<10?"0":"").concat(t)}var a=new Date,t=getUserId(this),c=["D-AE","".concat(a.getFullYear(),"-").concat(i(a.getMonth()+1),"-").concat(i(a.getDate())," ").concat(i(a.getHours()),":").concat(i(a.getMinutes()),":").concat(i(a.getSeconds()),":").concat(a.getMilliseconds()),this.clientId,"","2","",o,t,1e3,n,"H5behavior",this.logLevel,"","","","","","","","","","","","","","".concat(window.innerWidth||"","x").concat(window.innerHeight,"x").concat(window.devicePixelRatio),"","","",getUA(),"","","",objToStr(this.sysInfo),"",""];1===r.s3&&1===r.code?c.push(objToStr(r,"^",!0)):(r=filterParam.call(this,e,r),c.push(objToStr(r,"^",!0)));for(var s=0;c.length>s;s++)"string"==typeof c[s]&&(c[s]=c[s].replace(/,/g,"%2C"));return c}function sendData(t){var e=window.encodeURIComponent;this.debug&&console.log(t),this._httpLog(e(t.join()))}function bridgeLog(t){window.AlipayJSBridge?window.AlipayJSBridge.call("handleLoggingAction",{actionType:"reportEvent",params:{eventId:this.seedIdCfg.exceptionSeedId||this._defaultExceptionSeedId,bizType:"bmmonitor",extData:t||{}}}):this._warn("éžå®¹å™¨çŽ¯å¢ƒï¼Œä¸èƒ½è°ƒç”¨ handleLoggingAction")}function remoteLog(t){this.init(),initSessionId(this);var e=t.param4,n=t.spmId;if(window.AlipayJSBridge&&e&&10<e.code){var r,o=filterParam.call(this,n,e);for(r in delete o.__sid,o._ua=getUA(),o.spmId=n,o)o.hasOwnProperty(r)&&"string"==typeof o[r]&&(o[r]=encodeValue(o[r]));bridgeLog.call(this,o)}else{t=packFinalData.call(this,t);sendData.call(this,t)}}function log(t){try{var e=this._preproccess(t);if(!e)return;if(void 0!==e.sampleRate&&Math.random()>e.sampleRate)return void this._warn("å½“å‰å·²è®¾ç½®é‡‡æ ·çŽ‡ ".concat(e.sampleRate,"ï¼Œæœªè¢«é‡‡é›†"));this._runBeforeFns("send",e);var n=e.bmAppid||this._bmAppId;remoteLog.call(this,{spmId:this.spmAPos&&this.spmBPos?"".concat(this.spmAPos,".").concat(this.spmBPos):"",seedId:this.seedIdCfg.exceptionSeedId||this._defaultExceptionSeedId,param4:_objectSpread2({pid:this.pid||"",bm_appid:n,bm_sid:this._bmSprintId,env:this._env||""},e)})}catch(t){this._warn("Tracert å¼‚å¸¸ä¸ŠæŠ¥å¤±è´¥:",t)}}function getMonitorConfig(t){for(var e=null,n=0;this._monitorConfigs.length>n;n++)this._monitorConfigs[n].code===t.code&&(e=this._monitorConfigs[n]);return e}function filterOptions(t,e){for(var n,r={},o=0;e.fields.length>o;o++)r[e.fields[o]]=!0;for(n in t)!r[n]&&/^[dmc]\d+$/.test(n)&&delete t[n];return t}function preproccess(t){if(!t)return!1;if(1===t.code&&1===t.s3)return t;if("function"==typeof this.beforeLog){try{o=this.beforeLog(t)}catch(t){}if(!1===o)return this._warn("å½“å‰ç”±äºŽ beforeLog è¿”å›ž falseï¼Œæœªè¢«é‡‡é›†"),!1;"object"===_typeof(o)&&(t=o)}for(var e=generateIdentifier(_objectSpread2({},t,{uid:getUserId(this),page:this.fullURL||location.href})),n=!1,r=0;this._trackedLogs.length>r;r++)if(this._trackedLogs[r]===e){n=!0;break}if((null==t.oncePerSession?this:t).oncePerSession&&n)this._warn("å½“å‰ç”±äºŽ OncePerSession ç­–ç•¥ï¼Œæœªè¢«é‡‡é›†");else{if(this._monitorConfigInited||this._monitorConfigFailed){if(this._monitorConfigFailed)return t;if(void 0!==t.bmAppid&&this._bmAppId!==t.bmAppid)return t;var o=getMonitorConfig.call(this,t);return!!o&&(o.isDeleted||!o.isActive?(this._warn("å½“å‰ç›‘æŽ§é¡¹å·²å…³é—­"),!1):(void 0===t.sampleRate&&(t.sampleRate=o.sampleRate),n||this._trackedLogs.push(e),filterOptions(t,o)))}safelyPush(this._cacheLogs,t)}}function handleErrorOptions(t,e){var n,r,o,i=t.target||t.srcElement;i&&("unhandledrejection"!==t.type?i instanceof HTMLElement?(n=getResourceErrorSrc(i),r=i.tagName.toLowerCase(),o=void 0===(o=i.alt)?"":o,e({code:errorCodeEnums.ASSETS,msg:n||"",s1:r,s2:getXPath(i,5),s3:o})):t.error&&t.error.stack?this.logError(t.error):e({code:errorCodeEnums.JS,msg:t.message,s3:0}):(t=t.reason||{}).message&&t.stack?this.logError(t,{code:errorCodeEnums.PROMISEREJECTION}):(t=t.message||("string"==typeof t?t:JSON.stringify(t)),e({code:errorCodeEnums.PROMISEREJECTION,msg:t})))}function handleErrorOptions$1(t,e){try{handleErrorOptions.call(this,t,e)}catch(t){this._warn("handleErrorOptions failed",t)}}var win=window;function interfaceRegister(u){var t,o,c,e;"XMLHttpRequest"in win&&(t=win.XMLHttpRequest.prototype,o=t.open,t.open=function(t,e){this.__tracertMonitor__={method:t,url:e||"",status_code:null};for(var n=Array(arguments.length),r=0;n.length>r;++r)n[r]=arguments[r];o.apply(this,n)},c=t.send,t.send=function(i){var n,a=this;function r(){if(a.__tracertMonitor__&&4===a.readyState)try{var t=a.__tracertMonitor__.url;if(0!==a.status){var e=t.split("?")[0],n=t.split("?")[1]||"",r="string"==typeof i?i:JSON.stringify(i),o=a.response+"";if(2048<o.length&&(o="[too large]"),a.status<200||299<a.status){if(e===u.server)return void u._warn("Tracert ä¸ŠæŠ¥å¼‚å¸¸",r);u.logRequestError({type:"http",status:a.status,url:e,method:a.__tracertMonitor__.method,query:n,data:r,response:o,traceId:u.traceId||""})}}}catch(t){u._warn("Tracert æŽ¥å£å¼‚å¸¸ä¸ŠæŠ¥å¤±è´¥:",t)}}"onreadystatechange"in a&&"function"==typeof a.onreadystatechange?(n=a.onreadystatechange,a.onreadystatechange=function(){for(var t=Array(arguments.length),e=0;t.length>e;++e)t[e]=arguments[e];r.apply(this,t),n.apply(this,t)}):a.onreadystatechange=r;for(var t=Array(arguments.length),e=0;t.length>e;++e)t[e]=arguments[e];return c.apply(this,arguments)}),"fetch"in win&&(e=win.fetch,win.fetch=function(){for(var c=Array(arguments.length),t=0;c.length>t;++t)c[t]=arguments[t];var s="GET";return c[1]&&c[1].method&&(s=c[1].method.toUpperCase()),e.apply(this,c).then(function(a){return new Promise(function(e){try{var t=c[0],n=t.split("?")[0],r=t.split("?")[1]||"",o=c[1]&&c[1].body||"",i="string"==typeof o?o:JSON.stringify(o);a.clone().text().then(function(t){a.ok||u.logRequestError({type:"http",status:a.status,url:n,method:s,query:r,data:i,response:2048<(t||"").length?"[too large]":t,traceId:u.traceId||""})}).then(function(){e(a)},function(t){e(a)})}catch(t){e(a)}})})})}function _typeof$1(t){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);t.length>e;e++)n[e]=t[e];return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _iterableToArrayLimit(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var checkEnv=function(){var t=window.navigator.userAgent,e="";return t.match(/iphone|ipad|iPod/gi)&&(e="iOS"),t.match(/android/gi)&&(e="Android"),t.match(/Firefox/gi)&&(e="Firefox"),t.match(/Chrome/gi)&&(e="Chrome"),!t.match(/Chrome/gi)&&t.match(/Safari/gi)&&(e="Safari"),t.match(/Opera/gi)&&(e="Opera"),e=t.match(/MSIE/gi)?"IE":e};function checkAndriodSpecial(){return!0}var generateHandler=function(t){switch(t){case"iOS":return{filter:function(t){return t.indexOf("[native code]")<0&&0<=t.indexOf("@")}};case"Android":return{filter:function(t,e){return e&&t.indexOf("nonymous")<0&&checkAndriodSpecial()}};default:return{filter:function(){return!0}}}};function safeAdd(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function bitRotateLeft(t,e){return t<<e|t>>>32-e}function md5cmn(t,e,n,r,o,i){return safeAdd(bitRotateLeft(safeAdd(safeAdd(e,t),safeAdd(r,i)),o),n)}function md5ff(t,e,n,r,o,i,a){return md5cmn(e&n|~e&r,t,e,o,i,a)}function md5gg(t,e,n,r,o,i,a){return md5cmn(e&r|n&~r,t,e,o,i,a)}function md5hh(t,e,n,r,o,i,a){return md5cmn(e^n^r,t,e,o,i,a)}function md5ii(t,e,n,r,o,i,a){return md5cmn(n^(e|~r),t,e,o,i,a)}function binlMD5(t,e){var n,r,o,i;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var a=1732584193,c=-271733879,s=-1732584194,u=271733878,l=0;t.length>l;l+=16)a=md5ff(n=a,r=c,o=s,i=u,t[l],7,-680876936),u=md5ff(u,a,c,s,t[l+1],12,-389564586),s=md5ff(s,u,a,c,t[l+2],17,606105819),c=md5ff(c,s,u,a,t[l+3],22,-1044525330),a=md5ff(a,c,s,u,t[l+4],7,-176418897),u=md5ff(u,a,c,s,t[l+5],12,1200080426),s=md5ff(s,u,a,c,t[l+6],17,-1473231341),c=md5ff(c,s,u,a,t[l+7],22,-45705983),a=md5ff(a,c,s,u,t[l+8],7,1770035416),u=md5ff(u,a,c,s,t[l+9],12,-1958414417),s=md5ff(s,u,a,c,t[l+10],17,-42063),c=md5ff(c,s,u,a,t[l+11],22,-1990404162),a=md5ff(a,c,s,u,t[l+12],7,1804603682),u=md5ff(u,a,c,s,t[l+13],12,-40341101),s=md5ff(s,u,a,c,t[l+14],17,-1502002290),a=md5gg(a,c=md5ff(c,s,u,a,t[l+15],22,1236535329),s,u,t[l+1],5,-165796510),u=md5gg(u,a,c,s,t[l+6],9,-1069501632),s=md5gg(s,u,a,c,t[l+11],14,643717713),c=md5gg(c,s,u,a,t[l],20,-373897302),a=md5gg(a,c,s,u,t[l+5],5,-701558691),u=md5gg(u,a,c,s,t[l+10],9,38016083),s=md5gg(s,u,a,c,t[l+15],14,-660478335),c=md5gg(c,s,u,a,t[l+4],20,-405537848),a=md5gg(a,c,s,u,t[l+9],5,568446438),u=md5gg(u,a,c,s,t[l+14],9,-1019803690),s=md5gg(s,u,a,c,t[l+3],14,-187363961),c=md5gg(c,s,u,a,t[l+8],20,1163531501),a=md5gg(a,c,s,u,t[l+13],5,-1444681467),u=md5gg(u,a,c,s,t[l+2],9,-51403784),s=md5gg(s,u,a,c,t[l+7],14,1735328473),a=md5hh(a,c=md5gg(c,s,u,a,t[l+12],20,-1926607734),s,u,t[l+5],4,-378558),u=md5hh(u,a,c,s,t[l+8],11,-2022574463),s=md5hh(s,u,a,c,t[l+11],16,1839030562),c=md5hh(c,s,u,a,t[l+14],23,-35309556),a=md5hh(a,c,s,u,t[l+1],4,-1530992060),u=md5hh(u,a,c,s,t[l+4],11,1272893353),s=md5hh(s,u,a,c,t[l+7],16,-155497632),c=md5hh(c,s,u,a,t[l+10],23,-1094730640),a=md5hh(a,c,s,u,t[l+13],4,681279174),u=md5hh(u,a,c,s,t[l],11,-358537222),s=md5hh(s,u,a,c,t[l+3],16,-722521979),c=md5hh(c,s,u,a,t[l+6],23,76029189),a=md5hh(a,c,s,u,t[l+9],4,-640364487),u=md5hh(u,a,c,s,t[l+12],11,-421815835),s=md5hh(s,u,a,c,t[l+15],16,530742520),a=md5ii(a,c=md5hh(c,s,u,a,t[l+2],23,-995338651),s,u,t[l],6,-198630844),u=md5ii(u,a,c,s,t[l+7],10,1126891415),s=md5ii(s,u,a,c,t[l+14],15,-1416354905),c=md5ii(c,s,u,a,t[l+5],21,-57434055),a=md5ii(a,c,s,u,t[l+12],6,1700485571),u=md5ii(u,a,c,s,t[l+3],10,-1894986606),s=md5ii(s,u,a,c,t[l+10],15,-1051523),c=md5ii(c,s,u,a,t[l+1],21,-2054922799),a=md5ii(a,c,s,u,t[l+8],6,1873313359),u=md5ii(u,a,c,s,t[l+15],10,-30611744),s=md5ii(s,u,a,c,t[l+6],15,-1560198380),c=md5ii(c,s,u,a,t[l+13],21,1309151649),a=md5ii(a,c,s,u,t[l+4],6,-145523070),u=md5ii(u,a,c,s,t[l+11],10,-1120210379),s=md5ii(s,u,a,c,t[l+2],15,718787259),c=md5ii(c,s,u,a,t[l+9],21,-343485551),a=safeAdd(a,n),c=safeAdd(c,r),s=safeAdd(s,o),u=safeAdd(u,i);return[a,c,s,u]}function binl2rstr(t){for(var e="",n=32*t.length,r=0;r<n;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}function rstr2binl(t){var e=[];for(e[(t.length>>2)-1]=void 0,r=0;e.length>r;r+=1)e[r]=0;for(var n=8*t.length,r=0;r<n;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}function rstrMD5(t){return binl2rstr(binlMD5(rstr2binl(t),8*t.length))}function rstrHMACMD5(t,e){var n,r=rstr2binl(t),o=[],i=[];for(o[15]=i[15]=void 0,16<r.length&&(r=binlMD5(r,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],i[n]=1549556828^r[n];return e=binlMD5(o.concat(rstr2binl(e)),512+8*e.length),binl2rstr(binlMD5(i.concat(e),640))}function rstr2hex(t){for(var e,n="",r=0;t.length>r;r+=1)e=t.charCodeAt(r),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n}function str2rstrUTF8(t){return unescape(encodeURIComponent(t))}function rawMD5(t){return rstrMD5(str2rstrUTF8(t))}function hexMD5(t){return rstr2hex(rawMD5(t))}function rawHMACMD5(t,e){return rstrHMACMD5(str2rstrUTF8(t),str2rstrUTF8(e))}function hexHMACMD5(t,e){return rstr2hex(rawHMACMD5(t,e))}function md5(t,e,n){return e?(n?rawHMACMD5:hexHMACMD5)(e,t):(n?rawMD5:hexMD5)(t)}var ErrorStack=(_createClass(wp,[{key:"makeReg",value:function(){return"iOS"!==this.env?null:/(?:\s*)\w+(?=@)|(?:@).*?(?=:\d*:)|(?::)\d*(?=:)|(?::)\d*$/g}},{key:"stackFormatter",value:function(t){var e=t.message,a=[],c="Android"===this.env,s="iOS"===this.env,n=t.stack.split("\n").filter(this.stackFilter);n.shift();var t=n.join("\n"),u=this.makeReg();return u?n.map(function(t){var e,n,r,o,i=t.match(u);return i?(o=void 0===(r=(n=_slicedToArray(i,4))[0])?"":r,i=void 0===(e=n[1])?"":e,e=void 0===(r=n[2])?"":r,n=void 0===(r=n[3])?"":r,r=c?o.split(".").reverse()[0]:o,o=s?1:0,a.push("at ".concat(r," (").concat(i.substr(o),":").concat(e.substr(o),":").concat(n.substr(o),")"))):a.push(t),null}):a=n,{hash:this.encryptStack(e,a),message:e,stackList:a,stackStr:t}}},{key:"encryptStack",value:function(t,e){e=[].concat(_toConsumableArray(e.slice(0,6)),_toConsumableArray(e.slice(7,8)),_toConsumableArray(e.slice(9,10)),_toConsumableArray(e.slice(11,12)),_toConsumableArray(e.slice(13,14))).join(";");return md5("".concat(t,":").concat(e))}}]),wp),STACK_LENGTH_LIMIT=20,ChromeREGEX=/^\s*at .*? ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::\d+)?(?::\d+)?\)?\s*$/i,GeckoREGEX=/^\s*.*?(?:\(.*?\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::\d+)?(?::\d+)?\s*$/i,WinJSREGEX=/^\s*at (?:(?:\[object object\])?.+ )?\(?((?:file|ms-appx|https?|blob):.*?):\d+(?::\d+)?\)?\s*$/i;function wp(t){_classCallCheck(this,wp),this.env=t||checkEnv(),this.stackFilter=generateHandler(this.env).filter}function parseStack(t){for(var e=t.slice(0,STACK_LENGTH_LIMIT),t=["",""],n={},r=1,o=0;e.length>o;o+=1){var i=ChromeREGEX,a=(e[o]||"").match(i);null!==(a=null===(a=null===a?(e[o]||"").match(i=GeckoREGEX):a)?(e[o]||"").match(i=WinJSREGEX):a)&&(void 0===(a=n[i=a[1]])&&(n[i]="#".concat(r,"#"),r+=1,a=n[i]),e[o]=e[o].replace(i,a))}0<e.length&&(t[1]=e.map(function(t){return t.trim()}).join(""));var c,s="";for(c in n)n.hasOwnProperty(c)&&(s+="".concat(c,"@").concat(n[c],";"));return s=s.replace(/;$/,""),t[0]=s,t.join("").replace(/\^/g,"").replace(/=/g,"").replace(/,/g,"")}function unParseStack(t){var e=t&&t.split("")||[];if(!e[0]||!e[1])return t;for(var n={},r=e[0].split(";"),o=0;r.length>o;o+=1){var i=r[o]&&r[o].split("@#");n["#".concat(i[1])]=i[0]}return e[1].replace(/#[0-9]+#/g,function(t){return n[t]||""}).replace(/\u0004/g,"^").replace(/\u0005/g,"=").replace(/\u0006/g,",").split("")}"undefined"==typeof process||_typeof$1(process);var helper={compressStack:function(t){return parseStack(t)},uncompressStack:function(t){return unParseStack(t)}},compressStack=helper.compressStack;function hashDetection(t,e){try{var n=new XMLHttpRequest;n.open("GET","https://dataservice.alipayobjects.com/alertserver/hash/".concat(t),!0),n.send(),n.onreadystatechange=function(){4===n.readyState&&200!==n.status&&304!==n.status&&e(1)}}catch(t){this._warn("hash ç›‘æµ‹å¤±è´¥",t)}}var es=new ErrorStack;function logError(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};try{var r,o,i,a=n.code||errorCodeEnums.JS,c="";t&&t.stack&&(r=es.stackFormatter(t),o=r.hash,i=r.stackList,o&&i&&i.length&&hashDetection(o,function(){e.log({code:errorCodeEnums.JS,s1:o,s2:compressStack(i),s3:1})}),c=o),this.log(_objectSpread2({code:a,msg:t.message,s10:c},n))}catch(t){this._warn("Tracert å¼‚å¸¸ä¸ŠæŠ¥å¤±è´¥:",t)}}function logHttpError(t){var e=t.status,n=t.url,r=t.method,o=t.query,i=t.data,a=t.response,c=t.traceId,s=t.code,t=_objectWithoutProperties(t,["status","url","method","query","data","response","traceId","code"]),t=_objectSpread2({code:s||2,msg:"".concat(r.toUpperCase()," ").concat(n)},t);e&&(t.s1=e),o&&(t.s2=o),i&&(t.s3=i),a&&(t.s4=a),c&&(t.s5=c),this.log(t)}function logRequestError(t){try{if(!t)return;var e=t.type;"http"===(void 0===e?"http":e)&&logHttpError.call(this,t)}catch(t){this._warn("Tracert æŽ¥å£å¼‚å¸¸ä¸ŠæŠ¥å¤±è´¥:",t)}}var win$1=window,metaFieldMap={bm_app_id:"_bmAppId",bm_sprint_id:"_bmSprintId",env:"_env"},context={_monitorInited:!1,_monitorConfigInited:!1,_monitorConfigFailed:!1,_defaultExceptionSeedId:"102023",_bmAppId:"",_bmSprintId:"",_cachedHttpLines:[],_env:"",_cacheLogs:[],_trackedLogs:[],_monitorConfigs:[],_lastAction:"0".concat(getTime(),""),log:log,logError:logError,logRequestError:logRequestError,_preproccess:preproccess,_handleErrorOptions:handleErrorOptions$1,_initException:function(t){if(!this._monitorInited){for(var e=util.nodeListToArray(window.document.getElementsByTagName("meta")),n={},r=0,o=0;e.length>o;o++){var i=e[o],a=util.getAttr(i,"name"),i=util.getAttr(i,"content"),a=metaFieldMap[a];a&&i&&!this[a]&&(n[a]=i,r++)}t.TRACERT_ENV&&(n._env=t.TRACERT_ENV),r&&this.set(n),this._monitorInited=!0}},getErrorEventHandler:function(e){return function(t){e.isErrorHandler=!0,e._handleErrorOptions(t,function(t){e.log(t)})}},initMonitorConfigs:function(t){var t=t.monitors,e=void 0===t?[]:t;if(!this._disableInterface)for(var n=0;e.length>n;n++){var r=e[n];if(r.code===errorCodeEnums.REQUEST&&r.isActive&&!r.isDeleted){interfaceRegister(this);break}}this.set({_monitorConfigs:e}),this._monitorConfigInited=!0,this._onMonitorConfigInited()},_onMonitorConfigInited:function(){var t=this._cacheLogs;if(t.length){for(var e=0;t.length>e;e++)this.log(t[e]);this._cacheLogs=[]}},_warn:function(){var t;"object"===_typeof(win$1)&&win$1.console&&"function"==typeof win$1.console.warn&&this.debug&&(t=Array.prototype.slice.call(arguments),win$1.console.warn.apply(null,["[Tracert Debug]".concat(t[0])].concat(t.slice(1))))},_debug:function(){var t;"object"===_typeof(win$1)&&win$1.console&&"function"==typeof win$1.console.log&&this.debug&&(t=Array.prototype.slice.call(arguments),win$1.console.log.apply(null,["[Tracert Debug]".concat(t[0])].concat(t.slice(1))))}},win$2=window,doc$1=win$2.document;function register(e){try{if(!doc$1)return e.warn("å½“å‰ä¸ºéž web çŽ¯å¢ƒï¼Œä¸æ”¯æŒæŠ¥é”™ç›‘å¬ä¸Žæ’ä»¶ä½¿ç”¨"),this;if(e.isErrorHandler)return e.warn("é”™è¯¯äº‹ä»¶å·²ç›‘å¬"),0;util.addEvent("error",win$2,e.getErrorEventHandler(e)),util.addEvent("unhandledrejection",win$2,e.getErrorEventHandler(e))}catch(t){e.warn("Tracert åŠ è½½å¼‚å¸¸æ’ä»¶å¤±è´¥")}}function errorHandler(t){this._monitorConfigInited=!0,this._monitorConfigFailed=!0,this._onMonitorConfigInited(),this._warn("Tracert èŽ·å–æœåŠ¡ç«¯é…ç½®å¤±è´¥ï¼š",t)}function addScript(t){var e=this,n=errorHandler.bind(this),r=document.createElement("script");r.src=t,r.onerror=function(t){t.stopPropagation(),n.call(e,t)},document.head.appendChild(r),setTimeout(function(){e._monitorConfigInited||n.call(e,"è¶…æ—¶")},5e3)}function fetchConfig(Tracert){var onError=errorHandler.bind(Tracert);if(!Tracert._bmAppId)return setTimeout(function(){onError("æ²¡æœ‰ bmAppid")});var isPre="pre"===Tracert._env,url="https://render.alipay.com/p/alertserver".concat(isPre?"_pre":"","/").concat(Tracert._bmAppId,"_config/index.js");window.AlipayJSBridge?window.AlipayJSBridge.call("httpRequest",{url:url,method:"GET",contentType:"application/json"},function(res){if(res&&200===res.status)try{eval(res.data)}catch(t){onError(t)}else onError("æœªæ‰¾åˆ°é…ç½®")}):addScript.call(Tracert,url)}function fetchConfig$1(t){try{fetchConfig(t)}catch(t){errorHandler.call(this)}}function send(t,e){t.postMessage(JSON.stringify(e),"*")}var verifyKey="__TRACERT_MONITOR_verify";function verify(r){var o,t=util.CrossIframe.initIframe();util.addEvent("load",t,function(){send(o=t.contentWindow,{type:"storage",action:"get",key:verifyKey})}),util.addEvent("message",window,function(t){try{var e,n=JSON.parse(t.data);"getStorage"===n.type&&n.key===verifyKey&&((e=JSON.parse(n.value)||{})[r._bmAppId]=1,o&&send(o,{type:"storage",action:"set",key:verifyKey,value:JSON.stringify(e)}))}catch(t){}})}function setVerify(t){t._bmAppId?util.load(function(){verify(t),setTimeout(function(){alert("è¯·å…³é—­è¯¥é¡µé¢æŸ¥çœ‹éªŒè¯ç»“æžœ"),setTimeout(function(){window.parent&&window.parent.close&&window.parent.close()})},100)}):alert("æœªèŽ·å–åˆ°åº”ç”¨ID")}var spliter="",doc$2=document,docEl$1=doc$2.documentElement;function setLastAction(t,e){try{var n=[],r="click"===t.type;n.push(r?1:2);var o=r?"".concat(getXPath(t.target,5)):"";n.push(o),n.push(getTime());var i=r?"".concat(t.x,"x").concat(t.y):"".concat(docEl$1.scrollLeft+doc$2.body.scrollLeft,"x").concat(docEl$1.scrollTop+doc$2.body.scrollTop);n.push(i);var a=t.target&&t.target.innerText,c=a?"".concat(a.slice(0,8)):"";n.push(c),e._lastAction=n.join(spliter)}catch(t){}}function lastAction(e){var n;util.addEvent("scroll",document,function(t){n||(n=!0,setTimeout(function(){n=!1},300),setLastAction(t,e))}),util.addEvent("click",document,function(t){setLastAction(t,e)})}function getQueries(){for(var t={},e=window.location.search.substring(1).split("&").map(function(t){return t.split("=")}),n=0;e.length>n;n++){var r=e[n];t[r[0]]=r[1]}return t}function handlePreCapture(e){var t=window.g_monitor;if(t){var n,r=t.listener,o=void 0===r?{}:r,r=t.events,i=void 0===r?[]:r;for(n in o)o.hasOwnProperty(n)&&(util.removeEvent(n,window,o[n]),delete o[n]);for(var a=0;i.length>a;a++)e._handleErrorOptions(i[a],function(t){e.log(t)});t.events=[]}}var throttleWait=0,maxRecordLen=10,cachedHttpLineData=[];function sendHttpRequest(t){try{var e=new XMLHttpRequest;e.open("POST","https://mdap.alipay.com/loggw/dwcookieLogGet.do",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("data=".concat(t,"&time=").concat((new Date).getTime()))}catch(e){try{(new Image).src="".concat(this.server,"?data=").concat(t,"&time=").concat((new Date).getTime())}catch(t){this._warn("Tracert é€šè¿‡ IMG ä¸ŠæŠ¥å¤±è´¥.",t)}}}var sendAll=null;function httpLog(t){0===throttleWait?sendHttpRequest(t):(cachedHttpLineData.push(t),sendAll&&sendAll())}function throttle(r){var o=null;return function(){var t=this,e=arguments;function n(){clearTimeout(o),o=null,r.apply(t,e)}maxRecordLen>cachedHttpLineData.length?o=o||setTimeout(function(){n()},throttleWait):n()}}function getHttpLog(){return throttleWait=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,sendAll=throttle(function(){var t;cachedHttpLineData.length&&(t=cachedHttpLineData.join("$$"),cachedHttpLineData=[],sendHttpRequest(t))}),httpLog}function getInfoFromBridge(e){try{var t=window.AlipayJSBridge;t.call("getUserInfo",function(t){e.cUserId=t.userId}),t.call("getStartupParams",function(t){e.cOfflineVer=t.version,t.version&&(e.cAppId=t.appId)})}catch(t){setTimeout(function(){e._warn("è°ƒç”¨å®¹å™¨æŽ¥å£èŽ·å–ä¿¡æ¯å¤±è´¥",t)})}}function init(t,e){var n,r;!t._monitorInited&&e&&"object"===_typeof(e)&&(n=void 0===(r=e.autoCapture)||r,r=void 0===(r=e.httpThrottle)?{}:r,t.set({_bmAppId:e.bmAppid,_bmSprintId:e.bmSprintId,_disableInterface:!!e.disableInterface,oncePerSession:!!e.oncePerSession,beforeLog:e.beforeLog}),t._httpLog=getHttpLog(r.wait||0),r=getQueries(),t._initException(r),fetchConfig$1(t),window.AlipayJSBridge?getInfoFromBridge(t):document.addEventListener("AlipayJSBridgeReady",function(){getInfoFromBridge(t)},!1),"1"===r.TRACERT_VERIFY&&setVerify(t),handlePreCapture(t),n&&register(t),lastAction(t))}window.hashDetection=hashDetection;var index=function(e,t){return e.set(_objectSpread2({},context)),init(e,e.monitorOptions),e.after("start",function(){init(e,e.monitorOptions)}),e.before("set",function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).monitorOptions;init(e,t)}),t(),e};return index}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginPerformance=e(t.tracertUtil)}(this,function(s){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var t,e,n,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=(e=t={path:void 0,exports:{},require:function(t,e){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},n="undefined"!=typeof self?self:o,o=function(){if("object"==typeof window){var t,a=window,c={0:"navigate",1:"reload",2:"back_forward"},s=["unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart"];return a&&a.performance&&"object"==typeof a.performance&&a.performance.timing?"function"==typeof a.performance.getEntries&&"function"==typeof a.performance.getEntriesByType&&"function"==typeof a.performance.getEntriesByName&&"function"==typeof a.performance.now&&a.performance.timeOrigin?a.performance:{_entry:function(){for(var t=a.performance.timing,e=t.navigationStart||t.redirectStart||t.fetchStart,n={entryType:"navigation",initiatorType:"navigation",name:a.location.href,startTime:0,duration:t.loadEventEnd?t.loadEventEnd-e:0,redirectCount:a.performance.navigation.redirectCount,type:c[a.performance.navigation.type]},r=0;r<s.length;r++){var o=s[r],i=t[o];n[o]=i?i-e:0}return n}(),timeOrigin:a.performance.timing.navigationStart,getEntries:function(){return[this._entry]},getEntriesByType:function(t){return"navigation"!==t?[]:[this._entry]},getEntriesByName:function(t){return t!==a.location.href?[]:[this._entry]},now:function(){return Date.now()-a.performance.timing.navigationStart}}:t}},e.exports?e.exports=o():n.timing2=o(),t.exports),p="number"==typeof __PAINTY_STACK_LIMIT__?__PAINTY_STACK_LIMIT__:100;function h(){return("object"==typeof performance&&"function"==typeof performance.now?performance:Date).now()}var m=["connectEnd","connectStart","decodedBodySize","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domainLookupEnd","domainLookupStart","duration","encodedBodySize","fetchStart","loadEventEnd","loadEventStart","redirectCount","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","transferSize","type","unloadEventEnd","unloadEventStart","workerStart","firstPaint","firstContentfulPaint","firstMeaningfulPaint"];var g=[10240,51200,102400,204800,512e3],v=g.length+1;function i(t){return/^.*font.*\.svg(\?|$|#)/.test(t.name)}var y=function(t){return"script"===t.initiatorType&&-1<t.name.indexOf(".js")},b=function(t){return"link"===t.initiatorType&&-1<t.name.indexOf(".css")},w=function(t){return"h2"===t.nextHopProtocol},S=function(t){return"img"===t.initiatorType||/\.(jpg|jpeg|png|bmp|webp|svg|ico)(\?|$|#)/.test(t.name)&&!i(t)},_=function(t){return"iframe"===t.initiatorType},E=function(t){return"css"===t.initiatorType&&(/\.(ttf|eot|woff)(\?|$|#)/.test(t.name)||i(t))},T=function(t){return t.decodedBodySize>t.encodedBodySize},x=function(t){return t.encodedBodySize>t.transferSize},O=function(t){return t.workerStart},I=function(t){return t.reduce(function(t,e){return t+e.encodedBodySize},0)},A=null;function P(t,e){t={pid:"tracert",msg:t.message,code:e,page:location.href,c1:(t.stack||"").slice(0,500),c2:(t.stack||"").slice(500,1e3),c3:(t.stack||"").slice(1e3,1500)};(new Image).src="//gm.mmstat.com/fsp.1.1?".concat(s.objToStr(t,"&"))}function k(t,e){if("object"===u(e)&&!t.metricsSent)try{var n=e.getEntriesByType("navigation")[0],r=function(t,e){if("object"!==u(t)||"function"!=typeof t.getEntriesByType)return[];var n=[],r=t.getEntriesByType("navigation");if(!r||0===r.length)return[];var o=r[0],i=function(t){if("object"!==u(t))return[];var e=t.getEntriesByType("paint"),n={};return e.length&&(t=(e.filter(function(t){return"first-paint"===t.name})[0]||{}).startTime,e=(e.filter(function(t){return"first-contentful-paint"===t.name})[0]||{}).startTime,n.firstPaint=parseFloat(t),n.firstContentfulPaint=parseFloat(e)),n}(t),a={firstMeaningfulPaint:e};return m.forEach(function(t){t=o[t]||i[t]||a[t];n.push(null==t||"number"==typeof t&&isNaN(t)?"-":"number"==typeof t?parseFloat(t.toFixed(2)):t)}),n}(e,A),o=function(t,e){if("object"!==u(t))return[];var n=t.getEntriesByType("resource").filter(function(t){return t.startTime&&e>t.startTime});if(0===n.length)return[];var o,r=n.filter(y),i=n.filter(b),a=n.filter(S),c=n.filter(E),t=n.filter(_);return{metrics:[{name:"resourceCount",field:"rcnt",val:n.length},{name:"resourceSize",field:"rsize",val:I(n)},{name:"jsCount",field:"jscnt",val:r.length},{name:"jsSize",field:"jssize",val:I(r)},{name:"cssCount",field:"csscnt",val:i.length},{name:"cssSize",field:"csssize",val:I(i)},{name:"imageCount",field:"imgcnt",val:a.length},{name:"imageSize",field:"imgsize",val:I(a)},{name:"fontCount",field:"fontcnt",val:c.length},{name:"fontSize",field:"fontsize",val:I(c)},{name:"iframeCount",field:"iframecnt",val:t.length},{name:"iframeSize",field:"iframesize",val:I(t)},{name:"Http2EnabledCount",field:"h2cnt",val:n.filter(w).length},{name:"compressedResourceCount",field:"crcnt",val:n.filter(T).length},{name:"cachedResourceCount",field:"carcnt",val:n.filter(x).length},{name:"serviceWorkerResourceCount",field:"swrcnt",val:n.filter(O).length}],imageGroupMetrics:(o=a,g.reduce(function(t,e,n){var r=g[n-1]||0,n={name:"imageSizeGroup".concat(n,"Count"),field:"img_".concat(n),val:o.filter(function(t){return e>t.encodedBodySize&&t.encodedBodySize>r}).length};return t.concat(n)},[]).concat({name:"imageSizeGroup".concat(v,"Count"),field:"img_".concat(v),val:o.filter(function(t){return t.encodedBodySize>g[g.length-1]}).length}))}}(e,n.duration),i=(a=e,c=n.duration,"object"!==u(a)?[]:a.getEntriesByType("resource").filter(function(t){return-1<["xmlhttprequest","fetch"].indexOf(t.initiatorType)&&c>=t.startTime}).map(function(t){return[t.name.split("?")[0],t.startTime,t.transferSize,Math.round(t.responseStart-t.startTime),t.duration]}));t.send(t.seedIdCfg.perfSeedId,d(d({nav:r.join("_")},(o.metrics||[]).reduce(function(t,e){return d(d({},t),{},l({},e.field,Math.round(e.val)))},{})),{},{img_group:(o.imageGroupMetrics||[]).map(function(t){return t.val}).join("_"),network:navigator.connection&&navigator.connection.effectiveType||"-",partial:0===n.duration?1:0,ajax:i.map(function(t){return t.join("-")}).join("_"),title:document.title,visible:document.hidden?0:1})),t.metricsSent=!0}catch(t){P(t,12)}var a,c}function a(t){if("object"!==u(f))return t;try{n=function(t){A=t},"object"==typeof window&&"object"==typeof f&&("function"==typeof n&&(o=n),i=[],a=function t(){if("function"==typeof MutationObserver){var e=new MutationObserver(function(){i.push({t:h(),domCnt:document.getElementsByTagName("*").length}),i.length===p&&r()});return e.observe(document,{childList:!0,subtree:!0}),e.disconnect.bind(e)}var n=setTimeout(function(){i.push({t:h(),domCnt:document.getElementsByTagName("*").length}),(i.length===p?r:t)()},200);return function(){clearTimeout(n)}}(),"number"==typeof n?setTimeout(r,n):(c=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),window.addEventListener(c?"pagehide":"beforeunload",r))),"function"==typeof f.setResourceTimingBufferSize&&f.setResourceTimingBufferSize(500);var e=!!navigator.userAgent.match(/iPhone|iPad|iPod/i);s.ownAddEventListener(e?"pagehide":"beforeunload",window,function(){return k.bind(null,t,f)},!1)}catch(t){P(t,11)}function r(){var t;a(),"object"==typeof f&&"function"==typeof f.getEntriesByType&&(t=f.getEntriesByType("navigation"))&&t.length&&(t=t[0],o(function(t){var n=t.records,e=t.start,r=t.timeout,o=t.load;if(0===n.length)return"number"==typeof r?r:0;"number"==typeof o&&n.forEach(function(t){t.weight=Math.pow(.5,Math.abs(parseFloat(t.t)-o)/1e3)});t=n.map(function(t,e){if(0===e)return 0;e=n[e-1];return t.domCnt===e.domCnt?0:(t.domCnt-e.domCnt)/(t.t-e.t)*("number"==typeof t.weight?t.weight:1)}),r=Math.max.apply(null,t),r=t.indexOf(r);return n[r].t-e}({records:i,start:t.startTime,timeout:n,load:t.duration})))}var n,o,i,a,c;return t}return function(t,e){return a(t),e(),t}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginClickAndExpo=e(t.tracertUtil)}(this,function(y){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){return window.getComputedStyle(t,e)}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=e[o];if(t.call(r,i,o,e))return i;o++}},configurable:!0,writable:!0});var m=16,w=["deer-analysis-render-container","mocha"],S=[200,50],_=["svg","i","p","iframe","pre"],g=["label","input","button","img","iframe"],E=["svg","iframe","form","table"],l=["ul","header","section","article","aside"];function v(t){if(Object.keys)return Object.keys(t);var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n}function T(t,e){var n=v(t);if(0!==n.length){for(var r=0;n.length>r;r++)if(Math.abs(n[r]-e)<=5)return t[n[r]]++,0;t[e]=1}else t[e]=1}function x(t,e){if(!t||!t.children)return[];t=[].slice.call(t.children)||[];return e?t.filter(e):t}function O(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,n=x(t,function(t){return 8!==t.nodeType}),r=n.length;if("ul"===y.getTagName(t).toLowerCase())return!0;if(r<=1&&r<e)return!1;if(100<r)return!1;for(var o="",i=!0,a={},c={},s={},u=0,l=0;l<r;l++){var d=n[l],f=(f=d,"div"===(f=y.getTagName(f).toLowerCase())||"span"===f?"span":f);if(-1!==g.indexOf(f))return!1;if(400<d.offsetWidth&&400<d.offsetHeight)return!1;(m>d.offsetWidth||m>d.offsetHeight)&&u++,T(a,Math.max(5,d.offsetWidth)),T(c,Math.max(5,d.offsetHeight));for(var p=0;d.classList.length>p;p++){var h=d.classList[p];s[h]=(s[h]||0)+1}if(i=o?o===f:i,o=f,!i)return!1}return i&&u<r/2&&-1!==function(t){if(Object&&Object.values)return Object.values(t);var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(t[e]);return n}(s).indexOf(r)&&v(a).length<=2&&v(c).length<=r/2}function I(t){var e={};if(!t.attributes)return{};for(var n=0;t.attributes.length>n;n++){var r=t.attributes[n];e[r.name]=r.value}return e}function d(t){for(;t&&t.childNodes&&t.childNodes.length;){var e=[].slice.call(t.childNodes);if(e.find(function(t){return 3===t.nodeType}))return 1;t=e.filter(function(t){return!!y.getTagName(t)}).sort(function(t,e){return t.offsetWidth<24?1:t.offsetLeft-e.offsetLeft})[0]}return t&&[].slice.call(t.childNodes||[]).find(function(t){return 3===t.nodeType})}for(var e=["div","span","a","p","button","ul","li","ol","img","h1","h2","h3","h4","h5","h6","form"],a={},c=0;c<16;c++)a[e[c]]=c;function p(t){return function(t,e){e=t.split(1<arguments.length&&void 0!==e?e:">");return Array.isArray(e)?e:[e]}(t,">").map(function(t){var e=t.split(":"),t=e[0],e=e[1],t=a.hasOwnProperty(t)?"".concat(a[t].toString(16)):t,e=e?e.replace(/nth-child\((\d+)\)/g,function(t,e){return"".concat(e)}).replace(/nth-of-type\((\d+)\)/g,function(t,e){return"t".concat(e)}):"";return"".concat(t).concat(e?"".concat("`").concat(e):"")}).join(">")}function s(t){var e=t.indexOf("\n");return(t=-1!==e?t.substring(0,e):t).trim().substring(0,15)}function u(t){if(!t||5===t.nodeType)return"";if(3===t.nodeType)return window.Text&&t instanceof Text?t.wholeText:t;if(!function(e){try{return e instanceof HTMLElement}catch(t){return"object"===o(e)&&1===e.nodeType&&"object"===o(e.style)&&"object"===o(e.ownerDocument)}}(t))return"";switch(y.getTagName(t).toLowerCase()){case"img":return"img:".concat(t.src);case"canvas":return"canvas"}var e=t.childNodes||[],n=x(t),r=I(t);return 0===e.length||function(t){for(var e=0;t.length>e;e++)if(3===t[e].nodeType)return 1}(e)||0===n.length?t.innerText||r.placeholder||r.alt||b(t,":before").content||b(t,":after").content:u(n[0])}function h(t){var e=u(t);if(e&&"string"==typeof e)return s(e.replace(/\s/g,""));if(!t||3<x(t).length)return"";e=t.innerText;return e?s(e):x(t.parentNode).length<3?s(h(t.parentNode)):""}function A(t){var e=x(t);return e&&e.length?1===e.length?s(A(e[0])):(e=x(t))&&e.length?s(h(t=[].slice.call(e).sort(function(t,e){return t.offsetWidth<24?1:t.offsetLeft-e.offsetLeft})[0])):"":h(t)}function P(t){var e=b(t);return!e||"SCRIPT"===t.tagName||"none"===e.display||"relative"===e.position&&null===t.offsetParent||"absolute"===e.position&&(Math.abs(parseFloat(e.left)+t.offsetWidth)<5||Math.abs(parseFloat(e.top)+t.offsetHeight)<5)||t.offsetWidth<5||t.offsetHeight<5}function k(t){t=t.getAttribute("id");return t&&t.substring(0,10)}function C(t){return t.classList&&t.classList.length?".".concat([].slice.call(t.classList,0,2).join(".")):""}function j(t){return(t.id?k:C)(t)}function D(t){return t.offsetWidth*t.offsetHeight}function L(t){var e=x(t);if(e.length<2||3<e.length)return!1;if(O(t,2))return!1;var n=t.offsetWidth,r=e[0],o=r.offsetWidth,t=r.offsetHeight,e=parseInt(b(r).lineHeight,10)||16;return 200<=o&&.9*n<=o&&(!t||e<=t&&t<=4*e)&&!!d(r)}function M(t){var e=t;if(e.__possibleBlock)return!0;if("a"===y.getTagName(t).toLowerCase())return!1;if(e.id&&-1!==w.indexOf(e.id))return!1;if(O(e))return!1;t=x(e);return!(!t||!t.length)&&200<=e.offsetWidth&&50<=e.offsetHeight}function R(t){if(!t)return!1;var e=window.getComputedStyle(t);return"BODY"!==y.getTagName(t)&&"fixed"===e.position&&function(t,e){var n=1<arguments.length&&void 0!==e?e:1;if(!t)return!1;var r=t.getBoundingClientRect(),e=window.innerHeight/2,t=Math.abs(r.top+r.height/2-e)<50,e=window.innerWidth/2,e=Math.abs((r.right-r.left)/2-e)<50;return 1===n?t||e:t&&e}(t)&&function(t){if(!t)return!1;var e=window.getComputedStyle(t);return Math.abs(t.offsetWidth-window.innerWidth)<50&&Math.abs(t.offsetHeight-window.innerHeight)<50&&("fixed"===e.position||t.offsetParent===document.body)}(t)}window.getNodeText=h,window.getFirstNodeText=u,window.getBlockTitle=A,window.possibleBlock=M,window.possibleHeadedBlock=L;var N=["data-node-selector","data-block-selector"];function B(t,e){var n=e||document.body;if(t===n||t===document.body)return"body";if(arguments.length<=2||void 0===arguments[2]||arguments[2])for(var r=0;r<2;r++)if(t&&t[N[r]])return t[N[r]];for(var o=t,i=[];i.unshift(function(t){var e,n=y.getTagName(t).toLowerCase(),r=t.parentNode;if(O(t.parentNode)&&r.children&&r.children.length){for(var o=0,i=0;r.children.length>i;i++){var a=r.children[i];if(y.getTagName(a).toLowerCase()===n&&o++,a===t)break}return"".concat(n,":nth-of-type(").concat(o,")")}for(var c=0;r.children.length>c;c++)if(r.children[c]===t){e=c+1;break}return"".concat(n,":nth-child(").concat(e,")")}(o)),o.parentNode&&o.parentNode!==document.body&&o.parentNode!==n&&(o=o.parentNode););return i.join(">")}window._getSelector=B,window._isModal=R;var U={};function H(t,e){var n=arguments.length<=1||void 0===e||e;return t.map(function(t){var e=t.node,t=t.selector||B(e,document.body,n);return e["data-block-selector"]=t,{block:e,selector:p(t)}})}function F(t,e){var n=document.querySelector(t);if(n&&function(t,e){if(t.contains&&"function"==typeof t.contains)return t.contains(e);var n=e;do{if(t===n)return 1}while(n=n&&n.parentNode)}(n,e))return n;n=U[t];if(n){t=B(n);return n["data-block-selector"]=t,U[t]=n}return null}function q(t,e){var n=1<arguments.length&&void 0!==e?e:{time:0,cnt:0},r=n.time,e=n.cnt,n={};if(!t)return n;var o=t.exposedTime+(void 0===r?0:r),i=t.exposedCnt+(void 0===e?0:e);return t.empty()&&document.body.contains(t.dom)?n[p(B(t.dom))]={time:o,cnt:i,title:t.title,type:t.type,id:k(t.dom),cls:C(t.dom)}:y.objectAssign(n,t.children.reduce(function(t,e){return y.objectAssign(t,q(e,{time:o,cnt:i}))},n)),n}var W=(t($,[{key:"visible",value:function(){return!!this.dom&&!P(this.dom)&&(t=this.dom,e=(r=(o=window.visualViewport)?[o.offsetLeft,o.offsetTop,o.width,o.height]:[0,0,window.innerWidth,window.innerHeight])[1],n=r[0]+r[3],r=(o=t.getBoundingClientRect()).top,t=o.bottom,o=o.height,r<=e&&n<=t||e<=r&&t<=n||e<=r&&n-r>=Math.min(300,o/2)||t<=n&&t-e>=Math.min(300,o/2));var t,e,n,r,o}},{key:"pause",value:function(){this.empty()?this.unexposed(!0):[].concat(this.children.filter(function(t){return t.pause()}))}},{key:"expo",value:function(){if(!this.empty())return[].concat(this.children.filter(function(t){return t.expo()}));var t=this.dom;return this.visible()?(this.exposed(),[t]):(this.unexposed(),[])}},{key:"getExposed",value:function(t){return q(this,t)}},{key:"exposed",value:function(){return this.lastExposingTime?this.exposedTime+=Date.now()-this.lastExposingTime:this.exposedCnt++,this.lastExposingTime=Date.now(),this.exposedTime}},{key:"unexposed",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.lastExposingTime&&(t=Date.now()-this.lastExposingTime,(e||500<t)&&(this.exposedTime+=t)),this.lastExposingTime=0,this.exposedTime}},{key:"empty",value:function(){return!this.children.length}},{key:"update",value:function(t){var e=this;t.forEach(function(t){return e.insert(t.node,t.type)}),H(t,!1)}},{key:"contains",value:function(t){return this.dom!==t&&this.dom.contains(t)}},{key:"insert",value:function(e,t){var n,r=this;this.children=this.children.filter(function(t){return r.contains(t.dom)}),this.children.find(function(t){return t.dom===e})||((n=this.children.find(function(t){return t.contains(e)}))?n.insert(e,t):this.children.push(new $(e,t)))}}]),$);function $(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,e=1<arguments.length?arguments[1]:void 0;n(this,$),this.dom=document.body,this.children=[],this.selector="",this.lastExposingTime=0,this.exposedTime=0,this.exposedCnt=0,this.title="",this.type="",this.dom=t,this.type=e,this.title=A(t),this.expo()}function z(){return new W}var J=y.addEvent,V=y.debounce,G=y.storage,K=y.getAttr;function X(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!t)return[];for(var o=[],e=[],n=function(t){for(var e,n=[],r=[],o=0;t.length>o;o++){var i=t[o];i&&((e=i).id&&-1!==w.indexOf(e.id)||-1!==_.indexOf(y.getTagName(e).toLowerCase())||P(i)?r:n).push(i)}return{ordered:n,disorderd:r}}(t),i=n.ordered,a=n.disorderd,c=0;a.length>c;c++){var s=a[c];!function t(e,n){var r=1<arguments.length&&void 0!==n?n:3;if(0!==r){var o=x(e);if(0===o.length)return e.clientHeight>S;for(var i=0;o.length>i;i++){var a=o[i],c=b(a);if(("absolute"===c.position||c.float)&&50<a.clientHeight)return 1;if(t(a,r-1))return 1}}}(s)||(s.__possibleBlock=!0,i.push(s))}i.sort(function(t,e){return D(t)-D(e)});for(var u,l,d=0;i.length>d;d++){var f,p=i[d],h=x(p);if(K(p,"data-aspm"))o=o.concat({node:p,type:"spm",selector:K(p,"data-aspm")});else if(p&&y.getTagName(p)&&-1!==E.indexOf(y.getTagName(p).toLowerCase()))o=o.concat([{node:p,type:"short"}]);else if(function(t){var e=x(t);if(200<e.length)return 1;for(var n=0;e.length>n;n++)if(I(e[n]).hasOwnProperty("contenteditable"))return 1}(p))o=o.concat([{node:p,type:"ugc"}]);else if(O(p))o=o.concat([{node:r[0],type:"list"}]);else if(R(p))o=o.concat([{node:p,type:"modal"}]);else if(l=(l=p).getBoundingClientRect(),Math.abs(l.width-window.innerWidth)<=50&&l.height<=120&&l.y<=l.height)o=o.concat([{node:p,type:"header"}]);else if(u=void 0,u=(l=p).getBoundingClientRect(),Math.abs(u.width-window.innerWidth)<=50&&u.height<=120&&Math.abs(u.bottom-(l.offsetParent||document.body).offsetHeight)<=50)o=o.concat([{node:p,type:"footer"}]);else{if(L(p))if("continue"===function(){var t=X(h,[p].concat(r)),e=[],n=[];return t.forEach(function(t){("pattern"===t.type?e:n).push(t)}),o=o.concat(e&&e.length?e.concat(n):[{node:p,type:"pattern"}]),"continue"}())continue;p.offsetWidth>document.body.offsetWidth?o=o.concat(X(h,[p].concat(r))):M(p)?1!==h.length?(f=X(h,[p].concat(r),!0))&&f.length?o=o.concat(f):e.push({node:p,type:"stashed"}):(f=X(h,[p].concat(r),!0),o=o.concat(f&&f.length?f:[{node:p,type:"hoist"}])):e.push({node:p,type:"stashed"})}}if(1<o.length){for(var m=0,g=r[0]||t[0],v=0;o.length>v;v++)if("list"===o[v].type&&m++,o[v].node===r[0]){if(g.__possibleBlock){o=o.concat([{node:g.parentNode,type:"hoist"}]);break}return[{node:g,type:"merge"}]}if(m>=o.length/2)return[{node:g,type:"hoist"}]}return o=e.length?i.length/2>o.length?[{node:r[0]||t[0],type:"end"}]:o.concat(e):o}window._pickLayout=X;var Y=(t(Z,[{key:"events",value:function(){var e=this;J("blur",window,this.pause),J("focus",window,this.resume),J("visibilitychange",document,function(t){"hidden"===document.visibilityState?e.pause(t):"visible"===document.visibilityState&&e.resume()}),J("scroll",window,V(function(){return e.log()},200)),J("beforeunload",window,function(){e.expoTree.expo();var t=q(e.expoTree);G.set("exposed","".concat(encodeURIComponent(location.href),"|").concat(JSON.stringify(t)))}),this.tracert.before("logPv",function(){e.restore(),e.expoTree.expo();var t=q(e.expoTree);G.set("exposed","".concat(encodeURIComponent(location.href),"|").concat(JSON.stringify(t))),U={},e.expoTree=z(),e.timeoutLog()})}},{key:"cacheLayout",value:function(){var t=X([document.body]);return this.expoTree.update(t),this.layout}},{key:"get",value:function(){return this.layout}}]),Z),Q=y.strToObj;function Z(t){var i=this;n(this,Z),this.layout={},this.expoTree=null,this.paused=!1,this.pause=function(t){t.target!==window&&t.target!==document||i.paused||(i.expoTree.pause(),i.paused=!0)},this.resume=function(){i.paused&&(i.expoTree.expo(),i.paused=!1)},this.restore=function(){var t=i.tracert,e=G.get("exposed",{},!0);if(e){var n=e.split("|"),e=n[0],n=n[1];try{var r=decodeURIComponent(e),o=function(t,e){var n,r,o,e=1<arguments.length&&void 0!==e?e:2500,i=[];for(n in t)t.hasOwnProperty(n)&&(o=(r=t[n]).time,i.push({time:o,text:[n,o,"",r.cnt,r.type,r.id,r.cls].join("")}));for(var a=i.sort(function(t,e){return e.time-t.time}),c=[],s=e,u=0;a.length>u;u++){var l=a[u].text,l=void 0===l?"":l;if(l.length>s)break;s-=l.length,c.push(l)}return c.join("")}(JSON.parse(n));r===i.tracert.refUrl&&t.after("start",function(){t.call("expo","deer_expo","",{expo:o})})}catch(t){}}},this.timeout=null,this.timeoutLog=function(){i.log(),i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(function(){return i.log()},500)},this.log=function(){i.paused||(i.cacheLayout(),i.expoTree.empty()||(i.expoTree.expo(),G.set("exposed","".concat(encodeURIComponent(location.href),"|").concat(JSON.stringify(q(i.expoTree))))))},this.tracert=t,this.expoTree=z(),this.events()}window.isList=O;var tt=document&&document.body?.5*document.body.scrollWidth:0;function et(t){var e=t;if(t instanceof SVGElement&&"svg"!==y.getTagName(t).toLowerCase())try{return et(t.ownerSVGElement)}catch(t){return console.debug("Failed to get ownerSVGElement"),{node:parent,type:5}}var n=[];do{if(t.id&&-1!==w.indexOf(t.id))return null;var r=I(t);if(t["data-block"]&&t["data-node-selector"])return{node:t,type:"CACHED",nodeSelector:t["data-node-selector"]};if(r["data-aspm"])break;if(r["data-aspm-click"])return{node:t,nodeSelector:"".concat(r["data-aspm-click"]),spm:!0,type:0};if("a"===y.getTagName(t).toLowerCase())return{node:t,type:1}}while(-1===g.indexOf(y.getTagName(t).toLowerCase())?(r=b(t).cursor||"default",n.push({node:t,type:3,cursor:r})):n.push({node:t,type:2}),t.parentNode&&t.parentNode!==document.body&&(t=t.parentNode));for(var o=0;n.length>o;o++){var i=n[o],a=i.type;if(2===a)return{node:i.node,type:a}}var c,s,u=function t(e,n,r){var o=2<arguments.length&&void 0!==r?r:0;return e&&e.length&&n&&n.length&&!(n.length>e.length-o)?(Array.isArray(n[0])?n[0]:[n[0]]).find(function(t){return e[o].cursor===t})?1===n.length?0===o?null:e[o-1].node:t(e,n.slice(1),o+1):t(e,n,o+1):null}(n,["pointer",["default","auto"]]);return u?{node:u,type:3}:(s=(c=e).offsetWidth,u=c.offsetHeight,-1!==l.indexOf(y.getTagName(c).toLowerCase())||s*u<256||Math.max(s,u)>tt||!d(c)&&!b(c).backgroundImage?null:{node:e,type:4})}function nt(t,e,n){var r=e.block,o=e.blockSelector,i=n.node,a=n.nodeSelector,c=n.nodeType,s=n.clickDom,u="";r&&(u=A(r),a=a||B(i,r));var l=h(t),d=s&&s.getAttribute?s.getAttribute("data-aspm-param"):"";return e={dom:t,extraParams:Q(d),clickDom:s,node:i,nodeSelector:a,nodeMeta:{id:j(i),type:c,err:4===i.type&&"pointer"!==b(i).cursor},nodeId:j(i),nodeText:encodeURIComponent(l),block:r,blockTitle:encodeURIComponent(u),blockSelector:o,blockMeta:r?{id:j(r)}:null,clickText:encodeURIComponent(l)},n=e.dom,t=e.extraParams,d=e.block,s=e.blockTitle,a=e.blockId,c=e.node,i=e.nodeId,u=e.nodeSelector,o=e.nodeText,r=e.clickText,e=(l=e.blockSelector)||B(d),d&&(d["data-block-selector"]=e,U[l]=d),c&&(c["data-block"]=e,e=u||B(c,d),c["data-node-selector"]=e,U[e]=c),{dom:n,extraParams:t,node:u||B(c),nodeText:o,nodeId:i,block:(l||B(d)).replace(/\[data-aspm="([\w-]+)"\]/g,function(t,e){return e}),blockTitle:s,blockId:a,clickText:r}}var rt,ot,it,at,ct=window,st="nameStorage:",ut=/^([^=]+)(?:=(.*))?$/,lt=encodeURIComponent,dt=decodeURIComponent,ft={},pt={};function ht(){var t,e,n=[],r=!0;for(e in ft)ft.hasOwnProperty(e)&&(r=!1,t=ft[e]||"",n.push(lt(e)+"="+lt(t)));ct.name=r?rt:st+lt(rt)+"?"+n.join("&")}!function(t){if(t&&0===t.indexOf(st)){var e=t.split(/[:?]/);e.shift(),rt=dt(e.shift())||"";for(var n,r,o=e.join("").split("&"),i=0,a=o.length;i<a;i++)(r=o[i].match(ut))&&r[1]&&(n=dt(r[1]),r=dt(r[2])||"",ft[n]=r)}else rt=t||""}(ct.name),pt.setItem=function(t,e){t&&void 0!==e&&(ft[t]=e+"",ht())},pt.getItem=function(t){return ft.hasOwnProperty(t)?ft[t]:null},pt.removeItem=function(t){ft.hasOwnProperty(t)&&(ft[t]=null,delete ft[t],ht())},pt.clear=function(){ft={},ht()},pt.valueOf=function(){return ft},pt.toString=function(){var t=ct.name;return 0===t.indexOf(st)?t:st+t},it="beforeunload",at=function(){ht()},(ot=ct)&&(ot.addEventListener?ot.addEventListener(it,at,!1):ot.attachEvent&&ot.attachEvent("on"+it,function(t){at.call(ot,t)}));var mt=ct.nameStorage=pt,gt=y.url,vt="https://render.alipay.com/p/s/deer-analysis-render/index.js?_t=".concat(Date.now()),yt="https://render.alipay.com/p/s/deer-analysis-render/index.css?_t=".concat(Date.now()),bt="data-extra-spm",wt=[];function St(t){t.refreshExtraClickListeners=function(){wt.forEach(function(t){var e,e=(e=2,function(t){if(Array.isArray(t))return t}(t=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());y.removeEvent("click",e[0],e[1])}),wt=[];for(var t=document.querySelectorAll("[data-extra-spm]"),e=0;t.length>e;e++)!function(t){var e,n;!t||(e=t.getAttribute(bt))&&(n=e,y.addEvent("click",t,e=function(e){e&&n&&(e.extraSpmIdSet||(e.extraSpmIdSet={}),n.split(",").forEach(function(t){e.extraSpmIdSet[t]=!0}))}),wt.push([t,e]))}(t[e])},t.refreshExtraClickListeners()}var _t=y.addEvent,Et=y.inIframe;return function(e,t){var n,d=e;return!Et()&&window.getComputedStyle&&document.body.classList&&(e._layout?r(e._layout):e.before("set",function(t){t.hasOwnProperty("_layout")&&r(t._layout)}),_t("click",document.body,function(u){var l=function(r){if(!r||r===document.body)return null;var t=et(r);if(!t)return null;var e=t.node,n=t.type,o=t.node;if("CACHED"===n){var i=e["data-block"],a=F(i,e);if(a)return nt(r,{block:a,blockSelector:i},{node:e,nodeSelector:t.nodeSelector,clickDom:o})}var c=t.nodeSelector;if(0===n&&-1!==c.indexOf(".")){i=c.split("."),t=i[0],i=i[1];return nt(r,{block:document.querySelector('[data-aspm="'.concat(t,'"]')),blockSelector:t},{node:e,nodeSelector:i,nodeType:n,clickDom:o})}for(var s=e,u=!1,l="",d=[];s&&s.parentNode&&s.parentNode!==document.body;){var f=s=s.parentNode,p=I(s);if(p["data-aspm"]){u=!0,l='[data-aspm="'.concat(p["data-aspm"],'"]');break}d.unshift(f)}if(u)return nt(r,{block:s,blockSelector:l},{node:e,nodeSelector:c,nodeType:n,clickDom:o});for(;s=d.pop();)if(s["data-block-selector"]){var h=s["data-block-selector"],m=F(h,s);if(!m)continue;return nt(r,{block:m,blockSelector:h},{node:e,nodeSelector:c||B(e,m),clickDom:o})}return n=function(){for(var t=r,e=[t];t.parentNode&&t.parentNode!==document.body;){var n=t.parentNode;e.push(n),t=n}return e}(),(n=function(t,e){for(var n=e.length;0<n;n--)for(var r=e[n],o=0;t.length>o;o++){var i=t[o].block;if(i===r)return i}return!1}(H(X([document.body])),n))?nt(r,{block:n,blockSelector:B(n)},{node:e,nodeSelector:c||B(e,n),clickDom:o}):null}(u.target);l&&setTimeout(function(){var t=u.extraSpmIdSet,e=t?Object.keys(t):[],n=l.node,r=l.nodeText,o=l.nodeId,i=l.block,a=l.blockTitle,c=l.blockId,s=l.extraParams;n&&i&&d.after("start",function(){d.call("click","".concat(p(i),".").concat(p(n)),function(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}({nodeText:r,nodeId:o,blockTitle:a,blockId:c,extraSpmIds:e},s))})},0)}),St(d)),t(),d;function r(t){n||(n=new Y(e,{layout:t}),e.set({_expo:n}),y.load(function(){var t;(function(t){if(!t)return{};var e=t.split("&");if(!e.length)return{};for(var n={},r=0;e.length>r;r++){var o=(e[r]||"").split("=");n[o[0]]=o[1]||""}return n}(gt.parse(location.href).query).deer_tracert_token||mt.getItem("deer_tracert_token"))&&((t=document.createElement("script")).type="text/javascript",t.src="".concat(vt),document.getElementsByTagName("HEAD").item(0).appendChild(t),(t=document.createElement("link")).href=yt,t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(t))}))}}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginClientSession=e(t.tracertUtil)}(this,function(t){"use strict";var c=t.Cookies,s=t.uuid,u=".alipay.com",e="".concat(t.cookiesPrefix,"_SESSION");function o(){var t=c.get(e)||s();return c.set(e,t,{expires:new Date((new Date).getTime()+18e5),cookie:!0}),t}var i=t.objectAssign;return function(t,e){var r=t;return o(),r.before("logPv",function(t){var e=function(t){function e(t,e,n){return c.set("tree",[t,e,n].join(""),r),{_trid:e,_trll:n}}var r={domain:document.domain&&-1!==document.domain.indexOf(u)?u:null,cookie:!0,expires:new Date((new Date).getTime()+18e5)},n=s();if(!t)return{};var o=c.get("tree",r,!0);if(!o)return e(t,n,1);var i=o.split(""),a=i[0],o=i[1],i=i[2];return a!==t?e(a,n,1):e(a,o,parseInt(i,10)+1)}(r.spmAPos),n=o();t.__sid=n,i(t,e)}),e(),r}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginFullfillRef=e(t.tracertUtil)}(this,function(t){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=t.addEvent,a=t.storage,c=t.nodeListToArray,s=t.getAttr,u=t.url,o=".alipay.com",r=(t=[{key:"getMetaSpmId",value:function(){for(var t=c(window.document.getElementsByTagName("meta")),e="",n=0;t.length>n;n++){var r=t[n],o=s(r,"name"),r=s(r,"content");r&&o&&"pagename"===o&&(e=r)}return e&&"".concat(this.tracert.spmAPos,".").concat(encodeURIComponent(e))}},{key:"cache",value:function(){var t=this.tracert.fullURL||"",t=[t=150<t.length?this.tracert.url:t,"".concat(this.tracert.spmAPos,".").concat(this.tracert.spmBPos),this.getMetaSpmId()];a.set("fullfill_ref",t.join(""),{domain:this.cookiesDomain,cookie:!0})}},{key:"get",value:function(){var t=a.get("fullfill_ref",{domain:this.cookiesDomain},!0);if(!t)return null;var e=t.split(""),n=e[0],r=e[1],o=e[2],t=u.parse(this.tracert.refUrl),e=u.parse(n);return"object"===i(t)&&"object"===i(e)&&t.host===e.host?{fullUrl:n,refSpm:r,metaSpmId:o}:null}}],e(l.prototype,t),l);function l(t){var r=this;!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.tracert=t,this.isAlipayDomain=document.domain&&-1!==document.domain.indexOf(o),this.cookiesDomain=this.isAlipayDomain?o:null,this.tracert.before("logPv",function(t){t=t||{};var e=r.get(),n=r.getMetaSpmId();n&&r.tracert.set({_spmId:n}),e&&e.metaSpmId&&(t._refSpm=e.metaSpmId,r.tracert.set({_refSpm:t._refSpm})),r.tracert.refUrl&&"-"!==r.tracert.refUrl&&e&&(r.tracert.set({refUrl:e.fullUrl}),r.tracert.referSPM||r.tracert.set({referSPM:e.refSpm}))}),n("click",window.document.body,function(t){r.cache(t.target)})}return function(t,e){var n=t,t=new r(n);return n.set({fullfillRef:t}),e(),n}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginTimeOnPage=e(t.tracertUtil)}(this,function(t){"use strict";function e(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=t.addEvent,r=t.storage,o=(e(i.prototype,[{key:"start",value:function(){this._start_timestamp=Date.now(),this._time_consumed=0,this.lastClickEle=null,this.lastClickText=""}},{key:"bindEventListeners",value:function(){n("blur",window,this.pause),n("focus",window,this.resume),n("beforeunload",window,this.cache)}},{key:"gettimeConsuming",value:function(){return this.paused?this._time_consumed:this._time_consumed+(Date.now()-this._start_timestamp)}},{key:"getTime",value:function(){var t=r.get("residual",{},!0);if(!t)return null;var e=t.split("|"),n=e[0],e=e[1];try{if(decodeURIComponent(n)===this._tracert_inst.refUrl)return e}catch(t){return null}return null}}]),i);function i(t){var n=this;!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.pause=function(t){t.target===window&&(n.paused=!0,n._time_consumed+=Date.now()-n._start_timestamp)},this.resume=function(){n.paused&&(n._start_timestamp=Date.now())},this.cache=function(){var t=location.href,e=n.gettimeConsuming();r.set("residual","".concat(encodeURIComponent(t),"|").concat(e))},this._tracert_inst=t,this.paused=!1,this.start(),this.bindEventListeners()}return function(t,e){var n=t;n.before("logPv",function(t){var e=n.timeConsuming.getTime();e&&(t._consume=e),t._title=20<(t=document.title).length?"".concat(t.substring(0,10)).concat(t.substring(t.length-10),"|").concat(t.length-20):t,n.timeConsuming.cache(),n.timeConsuming.start()});t=new o(n);return n.set({timeConsuming:t}),e(),n}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginLayout=e(t.tracertUtil)}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var o=t.addEvent,i=t.storage;function a(t){return 30<t.length?t.substr(0,30):t}function c(t){for(var e=t.node;;){var n=function(t){t=t||[];for(var e,n,r,o=[],i=0;t.length>i;i++)0,n=(e=t[i]).offsetWidth,r=e.offsetHeight,"none"!==e.style.display&&20<=Math.min(n,r)&&200<=Math.max(n,r)&&e.children&&0<e.children.length&&o.push(t[i]);return o}(e.children),r=n.length;if(1<r)return n.map(function(t){return{node:t,area:t.offsetWidth*t.offsetHeight}});if(1!==r)return null;e=n[0]}}function s(t){for(var e=0<arguments.length&&void 0!==t?t:7,t=document.body,n=[{node:t,area:t.offsetWidth*t.offsetHeight}],r=1;;){var o=function t(e){var n;e=e||[];for(var r=0;e.length>r;r++){var o=e[r];o.isLeaf||o.children&&!(o=t(o.children))||n&&n.area>=o.area||(n=o)}return n}(n);if(!o)break;var i=c(o);if(i?r-1+i.length>e?(o.children=i.splice(0,e-r+1),r=e):r+=(o.children=i).length-1:o.isLeaf=!0,e<=r)break}return n}function u(t,e,n){var r=2<arguments.length&&void 0!==n?n:0,o=e||[];return t.forEach(function(t){var e,e="".concat(r,"").concat((e=t.node)===document.body?"body":e.className?".".concat(a(e.className)):a(e.nodeName.toLowerCase()));o.push(e),t&&t.children&&u(t.children,o,r+1)}),e?null:o.join("")}var l=(n(m,[{key:"getLayout",value:function(){return s(1/0)}},{key:"cache",value:function(){var t;this.cached||(t=s(),i.set("layout","".concat(location.href,"|").concat(u(t))),this.cached=!0)}},{key:"get",value:function(){this.cached=void 0;var t=i.get("layout",{},!0);if(!t)return null;t=t.split("|");return t[0]===this.tracert.refUrl?t[1]:null}}]),m),d=t.addEvent,f=t.storage,p=(n(h,[{key:"cache",value:function(t){var e=this.getText(t),n=this.getSectionHead(t),t="";n&&(t=this.getSectionTitle(n)),f.set("clickReferer","".concat(location.href,"").concat(this.format(e),"").concat(this.format(t)))}},{key:"get",value:function(){var t=f.get("clickReferer",{},!0);if(!t)return null;var e=t.split(""),t=e[2];return e[0]===this.tracert.refUrl?"".concat(e[1],"").concat(t):null}},{key:"getSectionTitle",value:function(t){for(;t&&t.children&&t.children.length;)t=[].slice.call(t.children).sort(function(t,e){return t.offsetWidth<24?1:t.offsetLeft-e.offsetLeft})[0];return this.getText(t)}},{key:"getSectionHead",value:function(t){for(;t.parentNode;){var e=t,n=t=t.parentNode,r=n.offsetWidth;if(200<=r&&r<document.body.offsetWidth){var o=n.children;if(o&&o.length){n=o.length;if(2<=n&&n<=3&&o[0]!==e){n=o[0],e=n.offsetWidth,o=n.offsetHeight;if(!(e<200||e<.9*r||o<14||60<o))return n}}}}return null}},{key:"getText",value:function(t){if(this.isTooManyChildren(t,3))return"";var e=t.innerText;return e||(t=t.parentNode,this.isTooManyChildren(t,3)||(e=t.innerText)),e}},{key:"format",value:function(t){if(!t)return"";var e=t.length;return 20<e?"...".concat(t.substr(e-20)):t}},{key:"isTooManyChildren",value:function(t,o){function i(t){var e=t.children;if(e){var n=e.length;if(o>=(a+=n)&&n)for(var r=0;r<n;r++)if(i(e[r]),o<a)return}}var a=0;return i(t),o<a}}]),h);function h(t){var n=this;e(this,h),this.tracert=t,this.tracert.before("logPv",function(t){var e=n.get();e&&(t._clickReferer=e)}),d("click",document.body,function(t){n.cache(t.target)})}function m(t){var n=this;e(this,m),(this.tracert=t).before("logPv",function(t){var e=n.get();e&&(t._layout=e)}),this.cache(),o("click",document.body,function(){n.cache()}),o("unload",window,function(){n.cache()})}return function(t,e){var n=t,r=new l(n),t=new p(n);return n.set({_layout:r,clickReferer:t}),e(),n}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertPluginAutoLogPv=e(t.tracertUtil)}(this,function(t){"use strict";function e(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=t.url;function o(){return document.body&&document.body.innerText&&document.body.innerText.length||0}var n=(t=[{key:"start",value:function(){var t=this;this.interval=setTimeout(function(){t.check(),t.start()},500)}},{key:"stop",value:function(){console.log("stop"),clearTimeout(this.interval),this.interval=void 0}},{key:"check",value:function(){var t=window.location.href,e=this.diff(t);e&&(this.tracert.call("set",{refUrl:this.curUrl,referSPM:"".concat(this.tracert.spmAPos,".").concat(this.tracert.spmBPos),url:e.isHashSinglePage?e.format():t.split(/\?|#/)[0],fullURL:t}),this.tracert.call("logPv",e.isHashSinglePage?{}:{_nohash:1})),this.curUrl=t,this.curUrlObj=e||r.parse(t),this.curDocLen=o()}},{key:"diff",value:function(t){if(t===this.curUrl)return!1;var e=r.parse(t),n=e.hash,t=this.curUrlObj;return e.path===t.path&&function(t,e){e=1<arguments.length&&void 0!==e?e:{};return JSON.stringify(0<arguments.length&&void 0!==t?t:{})===JSON.stringify(e)}(e.query,t.query)?n!==t.hash&&!this.isAnchor(n)&&(e.isHashSinglePage=!0,e.hash=this.cleanHash(e.hash),e):e}},{key:"isAnchor",value:function(t){return!(!t||"#"===t)&&"/"!==(t=t.substr(1))[0]&&document.getElementById(decodeURI(t))&&Math.abs(this.curDocLen-o())<5}},{key:"cleanHash",value:function(t){if(!t)return t;var e=t.indexOf("?");return t=-1!==e?t.substr(0,e):t}}],e(i.prototype,t),i);function i(t){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.tracert=t,this.curUrl=t.get("fullURL");var e=this.curUrlObj=r.parse(this.curUrl);this.curDocLen=o();var n=e.hash,t=this.isAnchor(n);t||(e.hash=this.cleanHash(n)),this.tracert.call("set",{url:t?this.curUrl.split(/\?|#/)[0]:e.format()}),this.tracert.call("addSideEffects",this.stop.bind(this)),this.start()}return function(t,e){var r=t,o=new n(r);return r.set({monitor:o}),r.before("set",function(t){var e,n;t&&t.pathName&&r.spmAPos&&(o.stop(),e=t.pathName,n=r.pathName,r._spmId&&(r._refSpm=r._spmId),r.fullURL=location.href,r._spmId="".concat(r.spmAPos,".").concat(encodeURIComponent(e)),n&&(r.refUrl=r.url,r.referSPM="".concat(r.spmAPos,".").concat(r.spmBPos),r.url=location.href.split(/\?|#|;jsessionid=/)[0],r.spmBPos=t.spmBPos||r.spmBPos,r.call("logPv")))}),e(),r}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@alipay/tracert-util")):"function"==typeof define&&define.dmmma?define(["@alipay/tracert-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).tracertWeb=e(t.tracertUtil)}(this,function(g){"use strict";function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function o(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var c,n,i,a,s=window,u="nameStorage:",l=/^([^=]+)(?:=(.*))?$/,d=encodeURIComponent,f=decodeURIComponent,p={},h={};function m(){var t,e,n=[],r=!0;for(e in p)p.hasOwnProperty(e)&&(r=!1,t=p[e]||"",n.push(d(e)+"="+d(t)));s.name=r?c:u+d(c)+"?"+n.join("&")}!function(t){if(t&&0===t.indexOf(u)){var e=t.split(/[:?]/);e.shift(),c=f(e.shift())||"";for(var n,r,o=e.join("").split("&"),i=0,a=o.length;i<a;i++)(r=o[i].match(l))&&r[1]&&(n=f(r[1]),r=f(r[2])||"",p[n]=r)}else c=t||""}(s.name),h.setItem=function(t,e){t&&void 0!==e&&(p[t]=e+"",m())},h.getItem=function(t){return p.hasOwnProperty(t)?p[t]:null},h.removeItem=function(t){p.hasOwnProperty(t)&&(p[t]=null,delete p[t],m())},h.clear=function(){p={},m()},h.valueOf=function(){return p},h.toString=function(){var t=s.name;return 0===t.indexOf(u)?t:u+t},i="beforeunload",a=function(){m()},(n=s)&&(n.addEventListener?n.addEventListener(i,a,!1):n.attachEvent&&n.attachEvent("on"+i,function(t){a.call(n,t)}));var y=s.nameStorage=h,b=g.load,w=g.CrossIframe;function S(t,e){t.postMessage(JSON.stringify(e),"*")}var _=(h=[{key:"receive",value:function(t){var e;if(t.data){try{e=JSON.parse(t.data)}catch(t){return}if(e.type)switch(e.type){case"getStorage":for(this.pending=!1;this.queue.length;)(0,this.queue[0])(e),this.queue.shift();break;case"iframOnload":this.iframeOnLoad()}}}},{key:"iframeOnLoad",value:function(){this.iframeLoaded=!0,this.executeCachedQuery()}},{key:"executeCachedQuery",value:function(){if(this.cachedQuery.length)for(var t=0;this.cachedQuery.length>t;t++){var e=function(t){if(Array.isArray(t))return t}(n=this.cachedQuery[t])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t){if(t){if("string"==typeof t)return r(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,void 0):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=e[0],e=e.slice(1);this[n].apply(this,e)}var n}},{key:"set",value:function(t,e,n){this.iframeLoaded?(n&&"function"==typeof n&&this.queue.push(n),S(this.iframe.contentWindow,{type:"storage",action:"set",key:t,value:e})):this.cachedQuery.push(["set",t,e,n])}},{key:"get",value:function(t,e){var n=this.iframe.contentWindow;this.iframeLoaded?(e&&"function"==typeof e&&this.queue.push(e),this.pending||(S(n,{type:"storage",action:"get",key:t}),this.pending=!0)):this.cachedQuery.push(["get",t,e])}}],t(A.prototype,h),A),E=g.isWechat,T="TRACERT_REF_",x={_guid:function(){return g.uuid()},_initCrossStorage:function(t){E()||(t._crossStorage=new _)},_initClientId:function(n){var r=window.localStorage,o=n.sessionIdKey;r&&(r[o]||(r[o]="".concat(this._guid(),"_").concat(Date.now())),n.set({clientId:r[o]}),n._crossStorage&&n._crossStorage.get(o,function(t){var e=t.value;o===t.key&&(t=e||r[o],n.set({clientId:t}),e||n._crossStorage.set(o,t),r[o]!==t&&(r[o]=t))}))},_initChInfo:function(t){var e;t.chInfo||(e=g.getValue("chInfo")||g.getValue("chinfo"))&&t.set({chInfo:e})},_initVerify:function(t){var e=g.getValue("tracertTaskId"),n=g.getValue("tracertVerifyServer");e&&t.set({taskId:e}),n&&t.set({verifyServer:n})},_initPageId:function(t){var e;t.get("pageId")||(e="".concat(t.spmAPos,".").concat(t.spmBPos,"_").concat(this._guid(),"_").concat(Date.now()),t.set({pageId:e}))},_initFromUrlOrStorage:function(t,e){for(var n=0;e.length>n;n++){var r,o=e[n],i=g.getValue(o)||y.getItem("".concat(T).concat(o));i&&((r={})[o]=i,t.set(r))}},_initRefs:function(e){var t;this._initFromUrlOrStorage(e,["referSPM"]),e.ignoreNameStorage||void 0!==(t=e._isMain)&&t&&(window.onunload=function(){var t=e.spmAPos&&e.spmBPos?[e.spmAPos,e.spmBPos].join("."):"";console.log("webMain",e._isMain),t&&y.setItem("".concat(T,"referSPM"),t)})}},O=g.objectAssign,I={eventType:"click",fullURL:location.href,server:"https://collect.alipay.com/dwcookie",openSendBeacon:!1,refUrl:document.referrer||"-",seedIdCfg:{pageSeedId:"10012",clkSeedId:"10032",expoSeedId:"10022",perfSeedId:"10074",exceptionSeedId:"102022"},_v:"web",verifyServer:"https://log.alipay.com/realTimeNonNativeLogCheck/uploadLog.json",init:function(){this._calledInited||(x._initCrossStorage(this),x._initClientId(this),x._initChInfo(this),x._initPageId(this),x._initRefs(this),x._initVerify(this),this._calledInited=!0)},_logPv:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=this.spmAPos&&this.spmBPos?[this.spmAPos,this.spmBPos].join("."):"",t=document.getElementsByTagName("meta")["extra-page-spm"];[null].concat(t&&t.content?t.content.split(","):[]).forEach(function(t){e.call("remoteLog",{seedId:e.seedIdCfg.pageSeedId,spmId:r,extraPageId:t,param4:o({},n)})})},remoteLog:function(t){this.init();t=this._packFinalData(t);this._send(t)},_packFinalData:function(t){var e=t.spmId,n=t.seedId,r=t.param4,o=t.extraPageId;O(r,this.mdata||{});var i=r.__sid||x._guid();if(delete r.__sid,r.spmId=e,n!==this.seedIdCfg.pageSeedId&&n!==this.seedIdCfg.perfSeedId){var a=this.spmAPos,c=this.spmBPos;switch(e.split(".").length){case 1:if(""===e)break;r.spmId=[a,c,e].join(".");break;case 2:r.spmId=[a,c,e].join(".")}}var s=new Date,u=this.refSpm||this.referSPM||"";r.ref=this.refUrl,r.referSPM=u,this.chInfo&&(r.chInfo=this.chInfo),r.fullURL=this.fullURL,r.source_appid=this.spmAPos,this._spmId&&(r._spmId=this._spmId),this._refSpm&&(r._refSpm=this._refSpm),this.platformType&&(r.mPlatformType=this.platformType),this.bucUserId&&(r.__BUC_ID=this.bucUserId);var l=this.userType;if(!l)switch(l="3",this.spmAPos){case"a385":case"a369":l="2";break;case"a316":l="1"}r.__ut=l;t=this.role_id||this.roleId||this.backupUserId||(r&&"3"===r.__ut?this.bucUserId:"")||"";if(r.clientID=this.clientId,"object"===v(r)){var d,f,p=r;for(d in p)p.hasOwnProperty(d)&&"string"==typeof p[d]&&(f=p[d].replace(/,/g,"%2C").replace(/\s+/g," ").replace(/=/g,"%3D"),p[d]="fullURL"===d&&300<f.length?f.slice(0,300):f)}for(var u=function(t){return(t<10?"0":"").concat(t)},h=["D-AE","".concat(s.getFullYear(),"-").concat(u(s.getMonth()+1),"-").concat(u(s.getDate())," ").concat(u(s.getHours()),":").concat(u(s.getMinutes()),":").concat(u(s.getSeconds()),":").concat(s.getMilliseconds()),this.clientID,"","2","",i,t,1e3,n,this.bizType,this.logLevel,o||this.pageId,"","","","","","","","","","","","","".concat(window.innerWidth||"","x").concat(window.innerHeight,"x").concat(window.devicePixelRatio),"","","",navigator.userAgent,"","","",g.objToStr(this.sysInfo),"","",g.objToStr(r)],m=0;h.length>m;m++)"string"==typeof h[m]&&(h[m]=h[m].replace(/,/g,"%2C"));return h},_send:function(t){g.request({tracert:this,type:g.requestTypeEnum.http,data:t})},send:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"10032",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;this._runBeforeFns("send",e),this.remoteLog({spmId:n||"".concat(this.spmAPos,".").concat(this.spmBPos),seedId:t,param4:e})}};function A(){var e=this;!function(t){if(!(t instanceof A))throw new TypeError("Cannot call a class as a function")}(this),this.iframe=null,this.iframeLoaded=!1,this.userId=null,this.pending=!1,this.queue=[],this.cachedQuery=[],b(function(){window.addEventListener("message",function(t){return e.receive(t)},!1),e.iframe=w.initIframe()})}return function(t,e){return t.set(o({},I)),e(),t}});var win=window,Tracert,plugins;win.Tracert&&!win.Tracert._isInit&&!win.Tracert._isRenderInit||(Tracert=new win.tracertCore({_isMain:!0}),Tracert.set({userType:"1",spmAPos:"a1911",spmBPos:"b18234"}),Tracert.setSysInfo({v:"2f39b"}),plugins=[win.tracertWeb,win.tracertMonitor,win.tracertPluginPerformance,win.tracertPluginClickAndExpo,win.tracertPluginClientSession,win.tracertPluginFullfillRef,win.tracertPluginTimeOnPage,win.tracertPluginLayout,win.tracertPluginAutoLogPv],Tracert.loadPlugins(plugins),win.Tracert=Tracert);
