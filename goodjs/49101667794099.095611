(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{369:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return I}),n(43),n(100);var i,o=n(113),c=n(17),a=n(18),s=n(9),r=(n(46),n(29),n(54),n(38),n(910),n(1)),u=(n(6),n(13),n(53),n(11),n(22),n(25),n(26),n(4),n(8)),l=n(12);function g(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Object(s.a)(n);return e=i?(t=Object(s.a)(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Object(a.a)(this,e)}}(v=i=i||{}).EVENT_TRACKED="eventTracked",v.EVENT_REGISTERED="eventRegistered";var d=(Object(l.a)(k,[{key:"log",value:function(t,e){e=new CustomEvent(t.toString(),{detail:{data:e}});document.dispatchEvent(e)}}]),k),f=(Object(l.a)(b,[{key:"publish",value:function(e){if(this.subscribers[e.type])return this.subscribers[e.type].forEach(function(t){return t.handle(e)}),this}},{key:"subscribe",value:function(t,e){return this.subscribers[e]||(this.subscribers[e]=[]),-1===this.subscribers[e].indexOf(t)&&this.subscribers[e].push(t),this}}]),b),e=(Object(l.a)(p,[{key:"handle",value:function(t){this.bus&&this.isHandleable(t)&&this.bus.publish(this.getEvent(t))}}]),p),v=(Object(l.a)(h,[{key:"getCookie",value:function(e){var t=document.cookie.split(/;\s*/).map(function(t){return t.split("=",2)}).filter(function(t){return t[0]===e});return t.length?decodeURI(t[0][1]):null}},{key:"isTouchScreen",value:function(){return!!("ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof DocumentTouch)}},{key:"getBrowserPayload",value:function(){return{recognized:this.getCookie("recognized"),touch_screen:this.isTouchScreen()}}},{key:"getUserContextData",value:function(){return this.userContext}},{key:"getBackendPayload",value:function(){return window.Applet&&window.Applet.getVar("event_data")||{}}},{key:"getData",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Object.assign({},n.reduce(function(t,e){return Object.assign(t,e)},{}),t)}},{key:"merge",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Object.assign.apply(null,e.concat([{}]).reverse());return Object.keys(i).reduce(function(t,n){return Object.assign(t,Object(r.a)({},n,e.reduce(function(t,e){return e&&void 0!==e[n]?e[n]:t},i[n])))},{})}},{key:"handle",value:function(t){var e=this.getBackendPayload(),n=this.getBrowserPayload(),i=this.getUserContextData();this.send(this.merge(e,t,{data:this.getData(t.data,n,i,e.data)}))}}]),h);function h(t){Object(u.a)(this,h),this.userContext=t}function p(){Object(u.a)(this,p)}function b(){Object(u.a)(this,b),this.subscribers={}}function k(){Object(u.a)(this,k)}var m,y=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"isHandleable",value:function(t){return t.event&&(!Array.isArray(t.trackers)||!t.trackers.length||-1<t.trackers.indexOf("gtm"))}},{key:"getEvent",value:function(t){return{type:"gtm",gtmEvent:t.gtmEvent,event:t.event,sublocation:t.sublocation,label:t.label||t.element,value:t.value,data:t.data}}}]),n}(e),w=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"isHandleable",value:function(t){return t.trackingEvent&&(1==+t.trackingGtm||!t.hasOwnProperty("trackingGtm"))}},{key:"getEvent",value:function(t){return{type:"gtm",gtmEvent:t.trackingGtmEvent,event:t.trackingEventAlias||t.trackingEvent,sublocation:t.trackingSublocation,label:t.trackingLabel||t.trackingElement,value:t.trackingValue,data:t.trackingData}}}]),n}(e),E=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"normalize",value:function(t){return Object.assign({},t.data,{event:t.gtmEvent||"ga",eventAction:t.event||" ",eventCategory:t.sublocation||" ",eventLabel:t.label||" ",eventValue:t.value||" "})}},{key:"send",value:function(t){var e=window.dataLayer;e&&e.push(this.normalize(t))}}]),n}(v),O=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"isHandleable",value:function(t){return t.event&&(!Array.isArray(t.trackers)||!t.trackers.length||-1<t.trackers.indexOf("olog"))}},{key:"getEvent",value:function(t){return{type:"olog",event:t.event,location:t.location,locationDefault:t.locationDefault,sublocation:t.sublocation,label:t.label||t.element,data:t.data}}}]),n}(e),_=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"isHandleable",value:function(t){return!!t.ologEvent||t.trackingEvent&&(1==+t.trackingOlog||!t.hasOwnProperty("trackingOlog"))}},{key:"getEvent",value:function(t){return{type:"olog",event:t.ologEvent||t.trackingEventAlias||t.trackingEvent,location:t.ologLocation||t.trackingLocation,locationDefault:t.trackingLocationDefault,sublocation:t.ologSublocation||t.trackingSublocation,label:t.trackingLabel||t.trackingElement,referrer:t.ologReferrer,data:t.ologData||t.trackingData}}}]),n}(e),x=function(t){Object(c.a)(r,t);var a=g(r);function r(t,e){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};return Object(u.a)(this,r),(n=a.call(this,{user_uid:t.config.userUid,organization_uid:t.config.organizationUid,visitor_id:t.config.visitorId,organization_type_title:t.config.organizationTypeTitle})).olog=t,n.oLogEvent=e,n.pageLocation=i,n}return Object(l.a)(r,[{key:"getBrowserPayload",value:function(){return Object.assign(Object(o.a)(Object(s.a)(r.prototype),"getBrowserPayload",this).call(this),{userAgent:window.navigator.userAgent,language:window.navigator.language||window.navigator.userLanguage,platform:window.navigator.platform})}},{key:"getData",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return(Array.isArray(t)&&t.length?t:[t]).map(function(t){return Object.assign({},n.reduce(function(t,e){return Object.assign(t,e)},{}),t)})}},{key:"send",value:function(e){var t=new this.oLogEvent({event:e.event,location:e.location||e.locationDefault||this.pageLocation(),referrer:e.referrer,sublocation:e.sublocation,data:e.data.map(function(t){return Object.assign({event_label:e.label},t)}),timestamp:+new Date});return this.olog.sendEvent(t)}}]),r}(v),j=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"isHandleable",value:function(t){return t.event&&(!Array.isArray(t.trackers)||!t.trackers.length||-1<t.trackers.indexOf("snowplow"))}},{key:"getEvent",value:function(t){return{type:"snowplow",event:t.event,event_label:t.label||t.element,location:t.location,locationDefault:t.locationDefault,sublocation:t.sublocation,value:t.value,data:t.data}}}]),n}(e),R=function(t){Object(c.a)(n,t);var e=g(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"isHandleable",value:function(t){return t.trackingEvent&&(1==+t.trackingSnowplow||!t.hasOwnProperty("trackingSnowplow"))}},{key:"getEvent",value:function(t){return{type:"snowplow",event:t.trackingEventAlias||t.trackingEvent,event_label:t.trackingLabel||t.trackingElement,location:t.trackingLocation,locationDefault:t.trackingLocationDefault,sublocation:t.trackingSublocation,value:t.trackingValue,data:t.trackingData}}}]),n}(e),A=function(t){Object(c.a)(a,t);var i=g(a);function a(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return Object(u.a)(this,a),(e=i.call(this,t)).userContext=t,e.pageLocation=n,e}return Object(l.a)(a,[{key:"getPayload",value:function(n){var e=["type","data","locationDefault"];return this.merge({location:n.locationDefault},Object.assign(Object.keys(n).filter(function(t){return-1===e.indexOf(t)}).reduce(function(t,e){return Object.assign(t,Object(r.a)({},e,n[e]))},{}),n.data))}},{key:"send",value:function(t){var e=window.dataLayer,t=this.getPayload(t);t.location=t.location||this.pageLocation(),t.location&&!t.location.startsWith("widget_")||console.warn("location is invalid",t),e?e.push({event_payload:void 0},{event:"snowplow",event_payload:t}):console.warn("dataLayer is not available, unable to send payload",t)}}]),a}(v),D=(Object(l.a)(L,[{key:"addPublisher",value:function(t){return t.bus=this.bus,this.publishers.push(t),this}},{key:"addSubscriber",value:function(e,t){var n=this;return t.forEach(function(t){n.subscribers[t]||(n.subscribers[t]=[]),-1===n.subscribers[t].indexOf(e)&&(n.subscribers[t].push(e),n.bus.subscribe(e,t))}),this}},{key:"getLocation",value:function(t){var e=t.location||t.trackingLocation,n=this.config.upTracking&&this.config.upTracking.location,i=(this.config.Applet&&this.config.Applet.getVar("event_data")||{}).location,t=t.locationDefault||t.trackingLocationDefault;return e||n||i||t}},{key:"track",value:function(t){var e=this;t["trackingEvent"in t?"trackingLocation":"location"]=this.getLocation(t);var n=this.modifyEvent(t);return new Promise(function(t){e.publishers.forEach(function(t){t.handle(n)}),e.logger.log(i.EVENT_TRACKED,n),t()})}},{key:"setLocation",value:function(t){this.config.upTracking.location=t}},{key:"modifyEvent",value:function(t){return this.config.upTracking?(this.config.upTracking.eventModifiers||[]).reduce(function(t,e){return e instanceof Function?e(t):t},t):t}},{key:"pageView",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["snowplow"];this.config.upTracking.pageViewSent||(this.config.upTracking.pageViewSent=!0,this.track({trackers:t,event:"impression",sublocation:"page",label:"general_pv"}))}},{key:"addEventModifier",value:function(t){this.config.upTracking.eventModifiers||(this.config.upTracking.eventModifiers=[]),"function"==typeof t&&this.config.upTracking.eventModifiers.push(t)}}]),L),T=/bot|googlebot|crawler|spider|robot|crawling/i,P=(n(41),n(84),[{name:"xs",minWidth:0,maxWidth:480},{name:"sm",minWidth:480,maxWidth:768},{name:"md",minWidth:768,maxWidth:992},{name:"lg",minWidth:992,maxWidth:1200},{name:"xl",minWidth:1200,maxWidth:Number.MAX_VALUE}]);function L(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;Object(u.a)(this,L),this.bus=t,this.logger=e,this.config=n,this.publishers=[],this.subscribers={},this.config.upTracking=this.config.upTracking||{}}(n=m=m||{}).IOS_APP_REFERRER="mobile_app_ios",n.ANDROID_APP_REFERRER="mobile_app_android",n.MOBILE_WEB_IOS_REFERRER="mobile_web_ios",n.MOBILE_WEB_ANDROID_REFERRER="mobile_web_android",n.MOBILE_WEB_OTHER_REFERRER="mobile_web_other",n.DESKTOP_REFERRER="desktop";var z,S=(C.prototype.setApi=function(t){this.api=t},C.prototype.sendEvent=function(t,e){if(void 0===e&&(e={}),i=window.navigator.userAgent,T.test(i))return Promise.reject();var n,i,a,r=this.config,o=r.userNid,c=r.visitorId,s=r.organizationUid,u=r.mobileNativeApp,l=r.organizationTypeTitle,g={log_guid:z="page"===t.event?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}):z,screensize:(i=window,a=i.innerWidth,P.find(function(t){var e=t.minWidth,t=t.maxWidth;return e<=a&&a<t}).name),referrer:(r=window,i=u,u=m.DESKTOP_REFERRER,i&&i.platform?u="android"===(n=i.platform)?m.ANDROID_APP_REFERRER:"ios"===n?m.IOS_APP_REFERRER:void 0:(i=!1,n=r.navigator.userAgent||r.navigator.vendor||r.opera,(i=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n.substr(0,4)))||i)&&(i=r.navigator.userAgent,r=m.MOBILE_WEB_OTHER_REFERRER,/Android/.test(i)?r=m.MOBILE_WEB_ANDROID_REFERRER:/iPad|iPhone|iPod/.test(i)&&(r=m.MOBILE_WEB_IOS_REFERRER),u=r)),u),organization_uid:s,organization_type_title:l};e.eventContext&&Object.assign(g,e.eventContext),t.screensize=g.screensize,t.referrer=g.referrer,Array.isArray(t.data)&&t.data.forEach(function(t){Object.assign(t,g)});c={id:o||c,data:t};c.data=JSON.stringify(t);t="/api/o2/v1/logging/:id.json".replace(":id",c.id);return this.api.url(t).options({}).headers(this.getHeaders(e)).json(c).post()},C.prototype.getHeaders=function(t){var e=this.config,n=e.XOdeskReferrer,i=e.userNid,a=e.visitorId,e=e.visitorApiKey,r={"X-Odesk-Referrer":n||"desktop"};return!i&&a&&e&&(r["X-Odesk-Visitor"]=e),t&&t.headers&&Array.isArray(t.headers)&&t.headers.forEach(function(t){Object.assign(r,t)}),r},C),W=function(e){var n=this;this.data=[{}],this.timestamp=e.timestamp||Date.now(),Object.keys(e).map(function(t){n[t]=e[t]})};function C(t){this.config=t;var e=this.config,t=e.userNid,e=e.visitorId;t||e||console.warn("Unable to identify user, check olog configuration")}function I(t){var i=t.store,e=t.$http,a=t.app;function n(){var t=i.state.user,e=i.state.orgs&&i.state.orgs.current,n=i.state.visitor;return{olog:{userUid:t&&t.id,userNid:t&&t.nid,organizationUid:e&&e.id,organizationTypeTitle:e&&e.typeTitle,visitorId:n.id,visitorApiKey:i.state.tracking.visitorApiKey,mobileNativeApp:a.$isNativeApp},userContext:{user_uid:t&&t.id,organization_uid:e&&e.id,organization_type_title:e&&e.typeTitle,visitor_id:n.id}}}var r=n(),t=r.olog,r=r.userContext,o=new S(t);o.api=e({auth:i.getters["context/isUser"],handleApiErrors:!1,csrf:!1});var e=function(){return i.state.tracking&&i.state.tracking.location},c=new E(r),s=new A(r,e),r=new d,r=new D(new f,r);return r.addPublisher(new y).addPublisher(new w).addSubscriber(c,["gtm"]).addPublisher(new j).addPublisher(new R).addSubscriber(s,["snowplow"]).addPublisher(new O).addPublisher(new _).addSubscriber(new x(o,W,e),["olog"]),r.pageView(),r.setUserConfig=function(){var t=n();o.config=t.olog,c.userContext=t.userContext,s.userContext=t.userContext},r}},910:function(t,e,n){"use strict";var i=n(911),a=n(124);n(161)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return i.def(a(this,"WeakSet"),t,!0)}},i,!1,!0)},911:function(t,e,n){"use strict";function o(t){return t._l||(t._l=new i)}function i(){this.a=[]}function a(t,e){return h(t.a,function(t){return t[0]===e})}var c=n(127),s=n(101).getWeak,r=n(35),u=n(39),l=n(125),g=n(126),d=n(102),f=n(60),v=n(124),h=d(5),p=d(6),b=0;i.prototype={get:function(t){t=a(this,t);if(t)return t[1]},has:function(t){return!!a(this,t)},set:function(t,e){var n=a(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,n,i,a){var r=t(function(t,e){l(t,r,n,"_i"),t._t=n,t._i=b++,t._l=void 0,null!=e&&g(e,i,t[a],t)});return c(r.prototype,{delete:function(t){if(!u(t))return!1;var e=s(t);return!0===e?o(v(this,n)).delete(t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!u(t))return!1;var e=s(t);return!0===e?o(v(this,n)).has(t):e&&f(e,this._i)}}),r},def:function(t,e,n){var i=s(r(e),!0);return!0===i?o(t).set(e,n):i[t._i]=n,t},ufstore:o}}}]);
