!function(s){var m,f,i,c,l,u,h,d,r,a,t,k,p,_,g,w,v,y,x,L,O,I,T,b,E,A,S,M,C,D,P,R,N,n,V,o,H,F,W,j,e,B;s.MunchkinTracker||(m=s.document,f=m.location,i=encodeURIComponent,h=c=!1,d=u=l=null,r=[],a=function(e,t,n,o){try{function i(){try{n.apply(this,arguments)}catch(e){}}e.addEventListener?e.addEventListener(t,i,o||!1):e.attachEvent&&e.attachEvent("on"+t,i),r.push([e,t,i,o])}catch(e){}},t=function(e,t,n,o){try{e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}catch(e){}},p=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},_=(k=function(e){return null!=e})(s.XMLHttpRequest)&&k((new s.XMLHttpRequest).withCredentials),g=function(t){var n,o=null;if(k(t))if(0===t.length)o="";else try{o=decodeURIComponent(t)}catch(e){if(-1!==(n=t.indexOf("?")))try{o=decodeURIComponent(t.substr(0,n))+t.substr(n)}catch(e){}k(o)||(o=String(t))}return o},I={customName:null,notifyPrefix:null,wsInfo:null,altIds:[],visitorToken:null,cookieLifeDays:730,clickTime:350,cookieAnon:!0,mkt_tok:null,domainLevel:null,domainSelectorV2:!(O=function(a){var e,t,n=m.cookie,o={id:null,token:null};if(a=i(a),o.store=function(e,t,n,o){var i=a+"="+y(this,":"),r=new Date;0<e?r.setTime(r.getTime()+864e5*e):r.setTime(r.getTime()-1),i+="; expires="+r.toGMTString(),t&&(i+="; path="+t),n&&-1!==n.indexOf(".")&&(i+="; domain="+n),o&&(i+="; secure"),m.cookie=i},""!==n)for(n=n.split(";"),e=0;e<n.length;e+=1)if(0===(t=n[e].replace(/^\s+|\s+$/g,"")).indexOf(a+"=")){n=t.substring(a.length+1),e=w(n),k(e.id)&&k(e.token)?x(o,e):x(o,w(n,":"));break}return o}),replayDetectLimit:5e3,httpsOnly:!(L=function(e,t,n){var o=e.split("."),i=o.length,r=2;if(k(t))r=t;else if(k(n)&&n)"com"!==o[i-1]&&(t=RegExp("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"),4===i&&t.test(e)?r=4:2===o[i-1].length&&1<i&&"co"===o[i-2]&&(r=3));else if(2<o[i-1].length)r=2;else{if(2!==o[i-1].length)return e;r=3}for(;o.length>r&&2<o.length;)o.shift();return o.join(".")}),asyncOnly:!(x=function(e,t){var n=null;if(k(t)&&k(e))for(n in e)e.hasOwnProperty(n)&&k(t[n])&&(e[n]=t[n])}),useBeaconAPI:!0,anonymizeIP:!(y=function(e,t){var n=null,o=[];if(k(e))for(n in e)e.hasOwnProperty(n)&&"function"!=typeof e[n]&&null!==e[n]&&o.push(i(n)+(k(t)?t:"=")+i(e[n]));return o.join("&")}),apiOnly:!(v=function(e){try{var t=m.createElement("a");return t.href=e,w(t.search.substr(1))}catch(e){return null}}),externalSource:null,orgId:null,_ecid:null,_itpMitigationForAll:!(w=function(e,t){for(var n,o,i={},r=k(t)?t:"=",a=e.split("&"),c=a.length,l=0;l<c;l+=1)n=a[l].split(r),k(n)&&1<n.length&&(o=n.shift(),n=n.join(r),i[g(o)]=g(n));return i})},b=T=null,E=s.navigator.cookieEnabled||m.hasOwnProperty("cookie")&&(0<m.cookie.length||-1<(m.cookie="testcookie=test; max-age=10000").indexOf.call(m.cookie,"testcookie=test;")),A=!1,S=[],M=null,C=function(e,t,n){var o=new s.XMLHttpRequest;if(o.open("GET",e,!0!==t),o.onreadystatechange=function(){2<=o.readyState&&o.abort()},t)try{o.timeout=n}catch(e){}try{o.send()}catch(e){}},D=function(e,t,n,o,i){e=e+t+"&"+y(n)+"&"+y(o),I.useBeaconAPI&&window.navigator&&window.navigator.sendBeacon?window.navigator.sendBeacon(e):(n=(new Date).getTime(),i=!i&&!I.asyncOnly,0===t.indexOf("webevents/visitWebPage?")&&(i=!1),_?C(e,i,I.clickTime):new s.Image(1,1).src=e,M=n+I.clickTime)},P=function(e,t){t={x:e.clientX,y:e.clientY,el:t,time:(new Date).getTime()};return!!(k(B)&&t.x===B.x&&t.y===B.y&&t.el===B.el&&t.time<B.time+I.replayDetectLimit)||(B=t,!1)},R=function(){var e=m.getElementsByName("_mkt_trk"),t=0,n="";for(k(b)&&(n="id:"+b.id+"&token:"+b.token),t=0;t<e.length;t+=1)"hidden"===e[t].type&&(e[t].value=n)},N=function(e,t,n,o){var i,r=null,a=f.hostname,c=f.protocol,l="webevents/"+e;if(A){if(i=window.navigator)e:{if("string"==typeof(i=window.navigator.userAgent)&&i){if(0<=i.indexOf("AdsBot")||0<=i.indexOf("Wget")||0<=i.indexOf("msnbot")){i=!0;break e}if(0<=i.indexOf("Mozilla")&&(0<=i.indexOf("slurp")||0<=i.indexOf("bot"))){i=!0;break e}}i=!1}if(!i&&k(b)&&(t._mchId=b.id,t._mchTk=b.token,k(I.mkt_tok)&&(t.mkt_tok=I.mkt_tok),k(I.wsInfo)&&(t._mchWs=I.wsInfo),"clickLink"===e&&(t._mchCn=k(I.customName)?I.customName:""),t._mchHo=a,t._mchPo=f.port,k(t._mchRu)||(t._mchRu=g(f.pathname)),t._mchPc=c,t._mchVr="160",k(a)&&0!==a.length&&"file:"!==c))for(r in I.anonymizeIP&&(t.aip=1),k(I.externalSource)&&(t._mchEs=I.externalSource),k(d)&&(t._mchEcid=d),l+="?_mchNc="+(new Date).getTime(),D(I.notifyPrefix,l,t,n,o),I.altIds)I.altIds.hasOwnProperty(r)&&(a=I.altIds[r],t._mchId=a,D(I.notifyPrefix.replace(/\w{3}\-\w{3}\-\w{3}\.mktoresp\.com/i,a+".mktoresp.com"),l,t,n,o))}else S.push(["post",arguments])},n=function(e){var t=e||s.event,n=t.target||t.srcElement,o={},i=t.which,r=t.button;if((i=!((!k(i)||1!==i&&2!==i)&&(!k(r)||0!==r&&1!==r&&4!==r)))&&!t._mchDone){for(t._mchDone=!0,t=n,-1<(i=f.href||f).indexOf("#")&&(i=i.substring(0,i.indexOf("#")));"A"!==t.tagName&&"AREA"!==t.tagName&&k(t.parentNode);)t=t.parentNode;t=t===m||t===s||"A"!==t.tagName&&"AREA"!==t.tagName?null:(n=t.href.replace(/^\s+|\s+$/g,""),k(n)&&0<n.length&&0!==n.indexOf("#")&&0!==n.indexOf(i+"#")&&0!==n.indexOf("javascript")&&0!==n.indexOf("mailto")&&!p(t,"mchNoDecorate")?t:null),k(t)&&!P(e,t)&&(o._mchHr=g(t.href),N("clickLink",o))}},V=function(e){if(A){if(null!==b)return b;var t=L(f.hostname,I.domainLevel,I.domainSelectorV2),n=O("_mkto_trk"),o=!1!==I.httpsOnly;return k(n.id)||I.cookieAnon||e?(n.id=T,k(n.token)||(k(I.visitorToken)&&"VISITOR_MKTTOK_REPLACE"!==I.visitorToken?n.token=I.visitorToken:n.token="_mch-"+t+"-"+(new Date).getTime()+"-"+(Math.floor(9e4*Math.random())+1e4)),n.store(I.cookieLifeDays,"/",t,o),o&&(n=O("_mkto_trk")),!o||k(n.id)?(b=n,R(),n):void 0):null}S.push(["createTrackingCookie",arguments])},o=function(){V(!0)},H=function(e){var t=e.onclick;e.onclick="function"==typeof t?function(){return o.apply(e,arguments),t.apply(e,arguments)}:o},F=function(e){var t=L(f.hostname,I.domainLevel,I.domainSelectorV2),n=O("mkto_opt_out"),o=!1!==I.httpsOnly;e?(n.id=!0,n.store(730,"/",t,o),(e=O("_mkto_trk")).id&&e.store(0,"/",t,o)):n.store(0,"/",t,o)},W=function(){c&&k(u)&&h?window.fetch("https://"+u+"/getCookie?_mchId="+T+"&_mchTd="+l,{credentials:"include"}).then(function(e){if(e.ok)return e.body;throw Error("status ${response.status}")}).catch(function(e){window.console.warn("getCookie failed - ",e),window.localStorage.removeItem("_mktoLpDomain_"+T+"_"+l),window.localStorage.removeItem("_mktoSecureLp_"+T),u=null}).finally(j):j()},j=function(){if(!A){A=!0;for(var e,t=V(k(I.mkt_tok)),n={},o={};0<S.length;)switch(e=S.shift(),e[0]){case"createTrackingCookie":t=V.apply(m,e[1]);break;case"post":N.apply(m,e[1])}if(k(I._ecid))d=I._ecid;else e:{if(e=I.orgId,k(window.Visitor)&&k(e))try{var i=window.Visitor.getInstance(e);if(k(i)){d=e+":"+i.getLocationHint()+":"+i.getMarketingCloudVisitorID();break e}}catch(e){}for(var r,i=RegExp("AMCV_([A-Za-z0-9]+%40AdobeOrg)=([^;]+)","g"),a=[];null!==(r=i.exec(m.cookie));){var c,l=decodeURIComponent(r[1]);k(e)&&l!==e||null===(c=/MCMID%7C([^%]+)/.exec(r[2]))||(r=/MCAAMLH-[^%]+%7C([0-9]+)/.exec(r[2]),a.push(l+":"+(k(r)?r[1]:"")+":"+c[1]))}d=a.join(";")}if(k(t))I.apiOnly||(n._mchCn=k(I.customName)?I.customName:"",o._mchHa=g(f.hash),o._mchRe=g(m.referrer),o._mchQp=g(f.search.substr(1).replace(/&/g,"__-__")),N("visitWebPage",n,o,!0));else if(!(I.cookieAnon||k(s.Mkto)&&k(s.Mkto.formSubmit))){for(t=[],o=(n=m.forms).length,c=0;c<o;c+=1)if(p(n[c],"lpeRegForm"))for(a=(i=n[c].elements).length,e=0;e<a;e+=1)"submit"!==i[e].type||p(i[e],"mchNoDecorate")||t.push(i[e]);for(n=0;n<t.length;n+=1)H(t[n])}}},e={ASSOCIATE_LEAD:"associateLead",CLICK_LINK:"clickLink",VISIT_WEB_PAGE:"visitWebPage",init:function(e,t){if(E&&k(e)&&0!==e.length){T=(T=e).toUpperCase();var n,o,i="",r=v(s.location.toString()),a=null;if(I.notifyPrefix=f.protocol+"//"+T+".mktoresp.com/",k(t)&&(window.console.debug('Munchkin.init("%s") options:',e,t),x(I,t)),k(r)&&(k(r.mkt_tok)&&(I.mkt_tok=r.mkt_tok),k(r.lpview)&&(i=r.lpview),k(r.marketo_opt_out)&&(a=r.marketo_opt_out)),!k(I.mkt_tok))if(r=v(m.referrer),k(r.mkt_tok))I.mkt_tok=r.mkt_tok;else if(k(r.enid)&&k(r.type))for(o in r)r.hasOwnProperty(o)&&"enid"!==o&&"type"!==o&&(-1<o.indexOf("mkt_tok")||-1<r[o].indexOf("mkt_tok"))&&(n=v(o+"="+r[o]),k(n.mkt_tok)&&(I.mkt_tok=n.mkt_tok));if("preview"!==i||!/\/lpeditor\/preview$/.test(f.pathname)){if(null===a){if(i=O("mkto_opt_out"),k(i.id))return void F(!0)}else{if("true"===a)return void F(!0);"false"===a&&F(!1)}i=-1<(o=window.navigator.userAgent.toLowerCase()).indexOf("safari"),o=/ version\/([0-9]+.[0-9]+)/.exec(o),c=i&&o&&12.1<=parseFloat(o[1])||I._itpMitigationForAll,l=L(f.hostname,I.domainLevel,I.domainSelectorV2),u=window.localStorage.getItem("_mktoLpDomain_"+T+"_"+l),(c=k(u)&&-1<m.cookie.indexOf("_mkto_trk=")?!1:c)&&window.fetch?(h="true"===window.localStorage.getItem("_mktoSecureLp_"+T),k(u)?W():window.fetch(f.protocol+"//"+T+".mktoutil.com/mktoutil/lpDomain?_mchId="+T+"&_mchTd="+l).then(function(e){if(e.ok)return e.json();throw Error("status ${response.status}")}).catch(function(e){window.console.warn("getLpDomain failed - ",e)}).then(function(e){k(e)&&k(e.domain)&&(window.localStorage.setItem("_mktoLpDomain_"+T+"_"+l,u=e.domain),window.localStorage.setItem("_mktoSecureLp_"+T,h=e.isSecure))}).finally(W)):j()}}},munchkinFunction:function(e,t,n){var o={},i={},r=null;switch(k(n)&&(o._mchKy=n),e){case"associateLead":for(r in t)t.hasOwnProperty(r)&&(o["_mchAt"+r]=t[r]);V(!0),N("associateLead",o),window.console.warn("The Munchkin Associate Lead Method is being deprecated and will be removed in a future release. For more information, visit https://developers.marketo.com/?p=7696");break;case"clickLink":k(t.href)&&(o._mchHr=o._mchLr=t.href,N("clickLink",o));break;case"visitWebPage":k(t.url)&&(o._mchRu=t.url),k(t.params)&&(o._mchQp=t.params),k(t.name)&&(o._mchCn=t.name),i._mchRe=g(m.referrer),N("visitWebPage",o,i)}},createTrackingCookie:function(e){V(e)}},Date.prototype.getTimeAlias=Date.prototype.getTime,a(s,"beforeunload",function(){for(var e;0<r.length;)e=r.shift(),t.apply(this,e);if(k(M))for(;(e=new Date).getTimeAlias()<M;);}),a(m,"click",n,!0),function(t){function e(e){"readystatechange"===e.type&&"complete"!==m.readyState||o||(o=!0,t.call(s,e.type||e))}function n(){try{r.doScroll("left")}catch(e){return void s.setTimeout(n,50)}e("poll")}var o=!1,i=!0,r=m.documentElement;if("complete"===m.readyState)t.call(s,"lazy");else{if(m.createEventObject&&r.doScroll){try{i=!s.frameElement}catch(e){}i&&n()}a(m,"DOMContentLoaded",e),a(m,"readystatechange",e),a(s,"load",e)}}(function(){R();var e=0;if(k(m.links))for(e=0;e<m.links.length;e+=1)a(m.links[e],"click",n,!0)}),s.MunchkinTracker=s.Munchkin=e,s.mktoMunchkin=e.init,s.mktoMunchkinFunction=e.munchkinFunction)}(window);
