define("modules/clean/form",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/core/cookies","modules/core/exception","modules/core/i18n"],function(e,t,r,o,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post_request=t.add_vars=t.submit=void 0,o=r.__importStar(o);var i=s.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."});function u(a,e,n){void 0===n&&(n=!1),Object.entries(e||{}).forEach(function(e){var t=e[0],r=e[1];!0===n&&(null===(e=null==(s=a.querySelector('input[name="'+t+'"]'))?void 0:s.parentElement)||void 0===e||e.removeChild(s));var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",t),s.setAttribute("value",r),a.appendChild(s)})}t.submit=function(e,a,n,t){return o.FormWebRequest({url:e.getAttribute("action"),data:(s={},Array.from(e.querySelectorAll("input, select, textarea")).forEach(function(e){var t=e.name;if(t){var r=void 0;if("checkbox"===e.type)r=e.checked?"True":"";else if("radio"===e.type){if(!e.checked)return;r=e.value}else r=e.value;t in s?("string"==typeof s[t]&&(s[t]=[s[t]]),s[t].push(r)):s[t]=r}}),s),skipErrorHandling:!0,success:function(e,t,r){var s=Array.from(function(e){if(0!==e.indexOf("err:"))return[!0,e];var t=e.substr(4);try{return[!1,JSON.parse(t)]}catch(e){return[!1,t||i]}}(r.responseText)),r=s[0],s=s[1];return(r?a:n)(s)},error:function(e,t,r){return n(i)},complete:t});var s},t.add_vars=u,t.post_request=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={}),n.assert(null!=e,"post_request missing action");var s=document.createElement("form");s.style.display="none",s.setAttribute("action",e),s.setAttribute("method","POST"),r.target&&s.setAttribute("target",r.target),t.t=a.Cookies.read("__Host-js_csrf"),u(s,t),document.body.appendChild(s),s.submit()}}),define("modules/clean/react/input",["require","exports","tslib","classnames","create-react-class","react","react-dom","react-dom-factories","prop-types","lodash","jquery","ts-keycode-enum","modules/clean/react/form_error_mixin","modules/clean/react/sprite","modules/core/cancelable_promise","modules/core/i18n"],function(r,e,s,l,t,a,n,p,o,d,f,c,h,m,v,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textarea=e.text=e.password=e.password_strength_meter=void 0,l=s.__importDefault(l),t=s.__importDefault(t),a=s.__importDefault(a),n=s.__importStar(n),p=s.__importDefault(p),o=s.__importDefault(o),d=s.__importStar(d),f=s.__importDefault(f),h=s.__importDefault(h);var g=a.default.createElement;function b(t,e){var r=function(e){if(e<=t)return"password-input-dot-selected"},s="password-input-meter",r=p.default.div({className:s=(e=void 0===e?!1:e)?"password-input-meter-standalone":s,ref:"meter"},p.default.div({className:"password-input-dot "+r(4)}),p.default.div({className:"password-input-dot "+r(3)}),p.default.div({className:"password-input-dot "+r(2)}),p.default.div({className:"password-input-dot "+r(1)}));return e?p.default.span({className:"standalone-password-meter-container"},r):r}e.password_strength_meter=b;a=function(i,u){return t.default({displayName:i+"."+u,propTypes:{expandable:o.default.bool,expandedWidthOffset:o.default.number,animationCurve:o.default.string,animationDuration:o.default.number,onCloseClick:o.default.func,defaultValue:o.default.string,value:o.default.string,autofocus:o.default.bool,autoresize:o.default.bool,inline:o.default.bool,className:o.default.string,valueLink:o.default.object,variant:o.default.string,id:o.default.string,label:o.default.string,afterRender:o.default.func,onClick:o.default.func,onFocus:o.default.func,onBlur:o.default.func,onKeyDown:o.default.func,onChange:o.default.func,compatiblePlaceholder:o.default.bool,placeholder:o.default.string,measureStrength:o.default.bool,error:o.default.shape({message_text:o.default.string,message_html:o.default.string}),closeOnBlur:o.default.bool},mixins:[h.default],getDefaultProps:function(){return{errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1}},getInitialState:function(){return{inputWidth:0,expanded:!1,value:this.props.defaultValue}},zxcvbnPromise:void 0,componentWillMount:function(){var t=this;this.props.measureStrength&&(this.zxcvbnPromise=v.makeCancelable(new Promise(function(e,t){r(["zxcvbn"],e,t)}).then(s.__importStar)),this.zxcvbnPromise.then(function(e){e=e.default;t.setState({zxcvbn:e})}))},componentWillUnmount:function(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},componentDidMount:function(){this._renderFinished();var e=n.findDOMNode(this.refs.inputComponent).offsetWidth;return this.setState({inputWidth:e})},componentDidUpdate:function(){return this._renderFinished()},render:function(){var e={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===u},t={"text-input":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===i};if(t[this.props.variant||"standard"]=!0,null!=this.props.className)for(var r=0,s=Array.from(this.props.className.split(/\s/));r<s.length;r++)t[s[r]]=!0;var a=this.renderErrorIfEnabled(),n=void 0;(null!=this.props.error&&this.props.error.message_text||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(n=this.state.errorWrapperIdName);var o=d.omit(this.props,"expandable","expandedWidthOffset","animationCurve","animationDuration","onCloseClick","defaultValue","value","autofocus","autoresize","inline","className","valueLink","variant","id","name","label","afterRender","onClick","onFocus","onBlur","onKeyDown","onChange","compatiblePlaceholder","placeholder","measureStrength","error","error-after","disable-errors","errorWrapperClassName","closeOnBlur"),o=p.default[i](d.assignIn({id:this.props.id,name:this.props.name,"aria-describedby":n,className:l.default(e),type:u,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:"inputComponent",placeholder:this.props.placeholder||""},o));return p.default.div({className:l.default(t)},this.props["error-after"]?void 0:a,p.default.div({className:"text-input-wrapper"},this._renderPasswordStrengthBar(),o,this.props.expandable?p.default.a({href:"#",onClick:this.onCloseClick,ref:"closeButton",className:"close-button u-mar-left-xs"},g(m.Sprite,{group:"web",name:"xclose",alt:_.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})})):void 0,this.props.label&&!(this.props.value||null!=this.props.valueLink&&this.props.valueLink.value||this.state.value)?p.default.label({htmlFor:this.props.id},this.props.label):void 0),this.props["error-after"]?a:void 0)},getValue:function(){return n.findDOMNode(this.refs.inputComponent).value},setValue:function(e){return n.findDOMNode(this.refs.inputComponent).value=e,this.setState({value:e})},resizeComponent:function(){var e=n.findDOMNode(this.refs.inputComponent),t=f.default(e);return t.css("height","1px"),t.css("height",e.scrollHeight+"px")},_renderPasswordStrengthBar:function(){return this.props.measureStrength?b(this.state.score):null},_renderFinished:function(){return this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0},onCloseClick:function(e){if(null!=e&&e.preventDefault(),this.props.expandable){var t=f.default(n.findDOMNode(this.refs.closeButton)),r=f.default(n.findDOMNode(this.refs.inputComponent));return t.stop().animate({opacity:0},this.props.animationDuration),r.stop().animate({width:this.state.inputWidth},this.props.animationDuration,this.props.animationCurve),"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e),this.setState({expanded:!1})}"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e)},onChangeInternal:function(e){if("function"==typeof this.props.onChange&&this.props.onChange(e),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(e.target.value):this.setState({value:e.target.value})),this.props.measureStrength){var t=this.state.zxcvbn&&e.target.value?Math.max(1,this.state.zxcvbn(e.target.value).score):0;return this.setState({score:t})}},onFocusInternal:function(e){var t=this;if("function"==typeof this.props.onFocus&&this.props.onFocus(e),!1!==this.props.expandable){var r=f.default(e.target),s=f.default(n.findDOMNode(this.refs.closeButton)),a=this.state.inputWidth;0===a&&(a=n.findDOMNode(this.refs.inputComponent).offsetWidth,this.setState({inputWidth:a}));e=a+this.props.expandedWidthOffset,a=e-parseInt(r.css("padding-right"))+s.width()/2;return s.css({left:a}),r.stop().animate({width:e},this.props.animationDuration,this.props.animationCurve,function(){return s.stop().animate({opacity:1},t.props.animationDuration)}),this.setState({expanded:!0})}},onBlurInternal:function(e){var t=e.target.value;return!0===this.props.closeOnBlur&&0===t.length&&this.onCloseClick(),"function"==typeof this.props.onBlur?this.props.onBlur(e):void 0},onKeyDownInternal:function(e){if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),null!=this.state.expanded!=0&&e.keyCode===c.Key.Escape)return e.target.blur(),this.onCloseClick()}})};e.password=a("input","password"),e.text=a("input","text"),e.textarea=a("textarea","text")}),define("modules/clean/react/form_error_mixin",["require","exports","tslib","react-dom-factories","prop-types","lodash"],function(e,t,r,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=r.__importDefault(s),a=r.__importDefault(a),n=r.__importStar(n),a={propTypes:{errorWrapperClassName:a.default.string,errorWrapperIdName:a.default.string,"disable-errors":a.default.bool,"error-after":a.default.bool,error:a.default.shape({message_text:a.default.string,message_html:a.default.string})},getInitialState:function(){return{errorWrapperIdName:this.props.errorWrapperIdName||n.uniqueId("error-message")}},renderErrorIfEnabled:function(){if(!this.props["disable-errors"])return this.renderError()},renderError:function(){return null!=(null!=this.props.error?this.props.error.message_html:void 0)?s.default.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName,dangerouslySetInnerHTML:{__html:this.props.error.message_html}}):s.default.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName},null!=this.props.error?this.props.error.message_text:void 0)}},t.default=a}),define("prod_assets_web_modules/react-addons-linked-state-mixin",function(){"use strict";function t(e,t){this.value=e,this.requestChange=t}var r={createStateSetter:function(o,i){return function(e,t,r,s,a,n){n=i.call(o,e,t,r,s,a,n);n&&o.setState(n)}},createStateKeySetter:function(e,t){var r,s,a,n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=(r=e,s=t,a={},function(e){a[s]=e,r.setState(a)}))},Mixin:{createStateSetter:function(e){return r.createStateSetter(this,e)},createStateKeySetter:function(e){return r.createStateKeySetter(this,e)}}};return{linkState:function(e){return new t(this.state[e],r.createStateKeySetter(this,e))}}});
