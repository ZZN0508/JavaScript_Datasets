(window.webpackJsonp=window.webpackJsonp||[]).push([["people"],{"487a":function(e,t,n){e.exports=function(){"use strict";var i="@@InfiniteScroll",d=function(e,t){var n,o,i,r,a,l=function(){e.apply(r,a),o=n};return function(){if(r=this,a=arguments,n=Date.now(),i&&(clearTimeout(i),i=null),o){var e=t-(n-o);e<0?l():i=setTimeout(function(){l()},e)}else l()}},c=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},o=document.defaultView.getComputedStyle,f=function(e){var t=e;while(t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType){var n=o(t).overflowY;if("scroll"===n||"auto"===n)return t;t=t.parentNode}return window},s=function(e){return e===window?document.documentElement.clientHeight:e.clientHeight},u=function(e){return e===window?c(window):e.getBoundingClientRect().top+c(window)},r=function(e){var t=e.parentNode;while(t){if("HTML"===t.tagName)return!0;if(11===t.nodeType)return!1;t=t.parentNode}return!1},a=function(){if(!this.binded){this.binded=!0;var t=this,e=t.el,n=e.getAttribute("infinite-scroll-throttle-delay"),o=200;n&&(o=Number(t.vm[n]||n),(isNaN(o)||o<0)&&(o=200)),t.throttleDelay=o,t.scrollEventTarget=f(e),t.scrollListener=d(p.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)});var i=e.getAttribute("infinite-scroll-disabled"),r=!1;i&&(this.vm.$watch(i,function(e){t.disabled=e,!e&&t.immediateCheck&&p.call(t)}),r=Boolean(t.vm[i])),t.disabled=r;var a=e.getAttribute("infinite-scroll-distance"),l=0;a&&(l=Number(t.vm[a]||a),isNaN(l)&&(l=0)),t.distance=l;var c=e.getAttribute("infinite-scroll-immediate-check"),s=!0;c&&(s=Boolean(t.vm[c])),t.immediateCheck=s,s&&p.call(t);var u=e.getAttribute("infinite-scroll-listen-for-event");u&&t.vm.$on(u,function(){p.call(t)})}},p=function(e){var t=this.scrollEventTarget,n=this.el,o=this.distance;if(!0===e||!this.disabled){var i=c(t),r=i+s(t),a=!1;if(t===n)a=t.scrollHeight-r<=o;else{var l=u(n)-u(t)+n.offsetHeight+i;a=r+o>=l}a&&this.expression&&this.expression()}},t={bind:function(t,e,n){t[i]={el:t,vm:n.context,expression:e.value};var o=arguments;t[i].vm.$on("hook:mounted",function(){t[i].vm.$nextTick(function(){r(t)&&a.call(t[i],o),t[i].bindTryCount=0;var e=function e(){t[i].bindTryCount>10||(t[i].bindTryCount++,r(t)?a.call(t[i],o):setTimeout(e,50))};e()})})},unbind:function(e){e&&e[i]&&e[i].scrollEventTarget&&e[i].scrollEventTarget.removeEventListener("scroll",e[i].scrollListener)}},e=function(e){e.directive("InfiniteScroll",t)};return window.Vue&&(window.infiniteScroll=t,Vue.use(e)),t.install=e,t}()},"53c9":function(e,t,n){"use strict";var o=n("c938");n.n(o).a},"5d14":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("750b");function o(e){var t=Object(i.e)(!1),n=Object(i.e)(!0),o=Object(i.e)(0);return{loading:t,load:function(){return t.value=!0,o.value+=100,e(o.value).then(function(e){return t.value=!1,0===e.length?n.value=!1:e})},canLoad:n}}},bea6:function(e,t,n){"use strict";n.r(t);var r,o,i=(n("99af"),n("d3b7"),n("ddb0"),n("2909")),a=n("5530"),l=n("487a"),c=n.n(l),l=(n("d81d"),n("96cf"),n("1da1")),s=n("15fd"),u=n("7085"),d=(o=Object(l.a)(regeneratorRuntime.mark(function e(t){var n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new AbortController,n=r.signal,o=t?"?offset=".concat(t):"",e.prev=3,e.next=6,fetch("".concat(u.b,"/people").concat(o),{signal:n});case 6:return i=e.sent,e.next=9,i.json();case 9:return i=e.sent,i=i.people,e.abrupt("return",i.map(function(e){var t=e.image,e=Object(s.a)(e,["image"]);return Object(a.a)({img:t},e)}));case 14:return e.prev=14,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}},e,null,[[3,14]])})),function(e){return o.apply(this,arguments)}),l=n("c5bc"),f=n.n(l),p=n("5d14"),l=n("03c4"),v=n("694d"),l={name:"People",metaInfo:{title:"People",meta:[{name:"keywords",content:"people"},{name:"description",content:"People."}]},directives:{infiniteScroll:c.a},setup:function(e,t){var n=Object(p.a)(d),o=n.loading,i=n.canLoad,n=n.load;return Object(a.a)({isMoreLoading:o,canLoadMore:i,loadMorePeople:n},Object(v.a)(t))},data:function(){return{isLoading:!0,people:[]}},computed:{userPlaceholderImg:function(){return f.a},dummyPeople:function(){return Object(i.a)(new Array(6).keys())}},methods:{getPersonImgUrl:l.a,handleLoadMorePeople:function(){var t=this;this.isMoreLoading||this.isLoading||!this.canLoadMore||this.loadMorePeople().then(function(e){e&&(t.people=[].concat(Object(i.a)(t.people),Object(i.a)(e)))})}},mounted:function(){window.scroll(0,0)},created:function(){var t=this;this.isLoading=!0,d().then(function(e){t.people=e,t.isLoading=!1})},beforeDestroy:function(){r&&r.abort()}},n=(n("53c9"),n("2877")),l=Object(n.a)(l,function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:a.handleLoadMorePeople,expression:"handleLoadMorePeople"}]},[a.people&&!a.isLoading?l("div",{staticClass:"People container"},a._l(a.people,function(e,t){var n=e.id,o=e.img,i=e.code,r=e.name,e=e.videos;return l("div",{key:t,staticClass:"People__card"},[l("XxxPersonCard",{attrs:{img:1===o?a.getPersonImgUrl(n,150):a.userPlaceholderImg,code:i,name:r,videos:e,"is-followed":a.isPersonFollowed(n),"is-follow-loading":a.isPersonFollowLoading(n),to:"/people/"+(i||n)},on:{"follow-click":function(e){return a.handlePersonFollow(n)}}})],1)}),0):a._e(),a.isLoading||a.isMoreLoading?l("div",[l("div",{staticClass:"People container"},a._l(a.dummyPeople,function(e){return l("div",{key:e,staticClass:"People__card"},[l("XxxPersonCard",{attrs:{"is-loading":""}})],1)}),0),l("XxxSpinner",{staticClass:"mx-auto"})],1):a._e()])},[],!1,null,"0e2191ad",null);t.default=l.exports},c938:function(e,t,n){}}]);
