YUI.add("af-sync",function(d){"use strict";var f=d.Af.Transport,p=d.Object.owns;function e(){}e._NON_ATTRS_CFG=["resource","readonly","consolidate","syncContext","postForRead","crumbForGET"],e.prototype={resource:"",consolidate:!0,readonly:!1,syncContext:{},postForRead:!1,crumbForGET:!0,initializer:function(e){p(e=e||{},"resource")&&(this.resource=e.resource||"")},sync:function(){var o,t,e,r=this,c=arguments[0];arguments[1]===r?(((o=arguments[2]).error||o.success)&&(e=function(e,r){e?o.error&&o.error(e):o.success&&o.success(r)}),t={},d.Object.each(o,function(e,r){"error"!==r&&"success"!==r&&"parse"!==r&&(t[r]=e)}),r._sync(c,t,e)):r._sync.apply(r,arguments)},_sync:function(e,r,o){var t,c,s,n,a,i={},u=this;if(u.readonly&&"read"!==e)return o("Read-only");switch(r&&(p(r,"resource")||p(r,"params")||p(r,"context")||(r={params:r})),t=r.resource||u.resource,(s=d.Af.Utils.objectMerge({config:{consolidate:!!u.consolidate,post_for_read:u.postForRead,crumbForGET:u.crumbForGET}},u.syncContext,r.context)).config.id_param=n=u.idAttribute||"id",(a=u.get(u.idAttribute||"id"))&&(i[n]=a),i=d.merge(i,r.params),e){case"create":case"update":return c=r.body||u.toJSON(),void f[e](t,i,c,s,o);case"read":case"delete":return void f[e](t,i,s,o);default:o("Invalid action: "+e)}}},d.namespace("Af").Sync=e},"@VERSION@",{requires:["af-transport","af-utils"]});
