define("global_nav/1/global_nav",["newsletter-hover/1/hover-newsletter-center-id","search/1/typeahead"],function(r,s){"use strict";return{defaults:{disableSharebar:!1},loggedIn:"",currentUrl:"",appID:"",settings:{},init:function(a){var e=this;e.settings=$.extend({},e.defaults,a),webmd.global_nav&&!0===webmd.global_nav.disableSharebar&&(e.settings.disableSharebar=!0),e.loggedIn=webmd.cookie.exists("WBMD_AUTH"),e.currentUrl=window.location.href,e.appID=webmd.appid||1,require.config({paths:{"webmd.m.socialshareplugin":"socialshareplugin/2/webmd.m.socialshareplugin.min"}}),e.initializeShareBar(e.settings.disableSharebar),$(".global-nav-sign-in a").attr("href","https://member.webmd.com/signin?appid="+e.appID+"&returl="+e.currentUrl),$("#global-nav-search, #global-nav-sharebar-search").on("mousedown focus",function(){$(".global-nav-logo, .global-nav-upper-reg-links, .global-sharebar-container").addClass("global-nav-search-expanded")}).on("blur",function(){$(".global-nav-logo, .global-nav-upper-reg-links, .global-sharebar-container").removeClass("global-nav-search-expanded")}),e.loggedIn&&$(".global-nav-right-container").addClass("logged-in"),webmd.url.getParam("fixed")&&$("body").addClass("fixed-nav"),webmd.url.getParam("progress")&&e.initializeProgressBar(),window.s_business_reference&&"Tool - Slide Show"!==window.s_business_reference&&"Tool - RMQ"!==window.s_business_reference&&$(".global-nav-container").addClass("is-fixed"),e.moveFeaturedTopics(),$("body").on("click",'[data-metrics-module="nl-mast"] a',function(a){a.preventDefault(),$(".global-nav-primary-mask").trigger("click"),r.onDemand()}),s.init("global-nav-search-form"),s.init("global-nav-sharebar-search-form")},moveFeaturedTopics:function(){$(".global-nav-featured-topics").each(function(){var a=$(this).data("link");$('[data-metrics-module="'+a+'"]').find(".global-nav-megamenu-container .row:last-child").append($(this))})},initializeProgressBar:function(){var a=2<=$("body").height()/$(window).height(),e=$("body").scrollTop(),r=$(window).height(),s=$("body").height();a&&($(".global-nav-container").append('<div class="global-nav-progress-bar"></div>'),$(".global-nav-progress-bar").css("width",e/(s-r)*100+"%"),$(window).scroll(function(){e=$("body").scrollTop(),s=$("body").height(),r=$(window).height(),$(".global-nav-progress-bar").css("width",e/(s-r)*100+"%")}))},initializeShareBar:function(a){var e=$(".global-nav-container");!0!==a&&(e.trigger("global-nav-sharebar-init-before"),e.append(webmd.substitute('<div class="global-sharebar-container"><div class="global-sharebar-wrapper"><div class="global-sharebar-plugin"></div><span class="share-title">{title}</span><div class="global-nav-subscribe" data-metrics-module="nl-mast"><a class="button" href="https://member.webmd.com/subscribe" data-metrics-type="ad-hoc" data-metrics-link="sub">Subscribe</a></div><div class="global-nav-search-container"><form id="global-nav-sharebar-search-form" action="/search/search_results/default.aspx" data-metrics-module="srch-bar-sticky" _lpchecked="1"><input required="" aria-label="Enter search terms" autocomplete="off" id="global-nav-sharebar-search" class="typeahead-search" type="text" name="query" placeholder="Search"><button aria-label="Search" type="submit" class="global-nav-search-submit" data-metrics-link="submit"></button><ul class="global-nav-search-list typeahead-output"></ul></form></div></div></div>',{title:$('meta[property="og:title"]').attr("content")})),this.initSocialShare(".global-sharebar-plugin"),$(window).scroll(function(){1100<$(this).scrollTop()?e.addClass("share-mode"):e.removeClass("share-mode")}),setTimeout(function(){$(".global-sharebar-container *").on("focus",function(){e.addClass("share-mode")}),$(".global-sharebar-container *").on("blur",function(){e.removeClass("share-mode")})},500),e.trigger("global-nav-sharebar-init-after"))},initSocialShare:function(e){require(["webmd.m.socialshareplugin","css!socialshareplugin/2/socialshareplugin.min.css"],function(a){$(e).socialshareplugin({baseHtmlTmpl:'<div class="plugin plugin-socialshare" data-metrics-module="sharebar-m"></div>',shareOrder:["facebook","twitter","pinterest"]})})}}});
