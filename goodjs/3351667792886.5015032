YUI.add("stencil-source",function(o,t){"use strict";function e(t){this.constructor.superclass.constructor.call(this,t)}var s=function(t,e){t.skipInsert||"string"!=typeof t.content||(t.node.set("innerHTML",t.content),t.node.setData("source-loaded",!0)),e&&e(t)},n=function(){};n.prototype={execute:function(t,e,n){t.getData("source-loaded")&&!e.force||this.fetch(t,n)},callback:function(t){t.node.hasAttribute("data-tmpl")?this.renderTemplate(t):s(t)},renderTemplate:function(e){var n,c=e.node,i={},a=c.getAttribute("data-tmpl");o.use("mjata-template","mjata-util",o.bind(function(t){(n=this.parseAttrs(a))&&t.Mjata.Template.render(n.change,e.content,null,function(t,e){s({node:c,content:e},i.callback)})},this))},parseAttrs:function(t){return t?o.Mjata.Util.strParseKV(t):null}},o.Stencil.BaseSource=n,o.extend(e,o.Stencil.BasePlugin,{execute:function(t,c){var i=o.Stencil.Hosts.Source;c=c||{},(t=t||o.Stencil.getNodeList(this._node)).each(function(e){var n=e.getAttribute("data-source-plugin");n&&(i[n]?i[n].execute(e,c,this.callback):o.use("stencil-source-"+n,o.bind(function(t){i[n]&&i[n].execute(e,c,this.callback)},this)))},this)}},{NS:"StencilSource"}),o.augment(e,o.Stencil.BaseSource),o.Stencil.registerPlugin(e,"Source"),o.Stencil.Hosts.Source=o.augment({},o.Plugin.Host,!1,null)},"@VERSION@",{requires:["node","oop","pluginhost","mjata-util"]});
