!function(){var o;function s(e,t,i){document.fullscreenEnabled||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?(e.style.position="fixed",e.style.width="100%",e.style.top="0",e.style.left="0",e.style.background="#fff",e.style.setProperty("height","100%","important"),t.style.setProperty("height","100%","important"),i.style.position="fixed",i.style.bottom="20px",i.style.left="48%",window.riddleAPI.isFullScreen=!0):(e.style.position="static",e.style.top="0",e.style.left="0",e.style.width=o,e.style.setProperty("height","auto"),i.style.position="static",window.riddleAPI.isFullScreen=!1)}function e(){for(var e=document.body.getElementsByClassName("riddle_target");e.length;)t(e[0])}function t(e){e.className="riddle-target-initialised";var t="data-riddle-"+riddleAPI.riddles.length;e.setAttribute(t,"");var i=e.getElementsByTagName("iframe");if(0==i.length){var n=e.getAttribute("data-url")||e.getAttribute("data-game");if(!n)return;e.innerHTML+='<iframe src="'+n+'"></iframe>'}n=i[0].style;n.border="none",n.width="100%",n.position="absolute",(n.opacity=0)==e.getElementsByClassName("rid-load").length&&(i=e.getAttribute("data-fg")||"#1486cd",n=e.getAttribute("data-bg")||"#fff",e.insertAdjacentHTML("beforeend","<style>["+t+"] .rid-load {background: "+n+";}["+t+"] .rid-load i {background: "+i+';}.rid-load {border: 1px solid #cfcfcf!important;padding-top: 56%;border-radius: 5px;position: relative;}.rid-load p {position: absolute;top: 50%;left: 50%;margin: -8px}.rid-load i {position: absolute;width: 16px;height: 16px;border-radius: 3px;left: -25px;-webkit-animation: 1s infinite rid-icon;animation: 1s infinite rid-icon;-webkit-transform: scale(.4) rotate(62deg);transform: scale(.4) rotate(62deg);opacity: 0;}.rid-load i+i {-webkit-animation-delay: .17s;animation-delay: .17s;left: 0;}.rid-load i+i+i {-webkit-animation-delay: .34s;animation-delay: .34s;left: 25px;}@-webkit-keyframes rid-icon {50% {   opacity: 1;-webkit-transform: scale(1) rotate(62deg);}}@keyframes rid-icon {50% {opacity: 1;transform: scale(1) rotate(62deg);}}</style><div class="rid-load"><p><i></i><i></i><i></i></p></div>')),riddleAPI.riddles.push(e),r()}window.riddleAPI?"loading"!=document.readyState&&e():(window.riddleAPI={init:t,update:e,riddles:[],toggleFullScreen:function(e){var t,i,n,d,l=(d=document.querySelectorAll('[data-rid-id="'+e+'"]'))[0].getElementsByTagName("iframe")[0],a=document.getElementById("riddleFullScreenButton-"+e),r=document.body;null==o&&(o=d[0].style.width),0==window.riddleAPI.isFullScreen?(e=r,t=d[0],i=l,n=a,r="",e.requestFullscreen?(e.requestFullscreen(),r="fullscreenchange"):e.msRequestFullscreen?(e.msRequestFullscreen(),r="MSFullscreenChange"):e.mozRequestFullScreen?(e.mozRequestFullScreen(),r="mozfullscreenchange"):e.webkitRequestFullScreen&&(e.webkitRequestFullScreen(),r="webkitfullscreenchange"),document.addEventListener(r,function(){s(t,i,n)})):(d=d[0],l=l,a=a,document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),s(d,l,a))},isFullScreen:!1},window.addEventListener("message",function(e){if("object"==typeof e.data)for(var t=0;t<riddleAPI.riddles.length;t++){var i,n=riddleAPI.riddles[t],d=n.getElementsByTagName("iframe")[0];if(e.source==d.contentWindow){if(e.data.riddleHeight){var l=d.style;if(window.riddleAPI.isFullScreen||l.setProperty("height",e.data.riddleHeight+"px","important"),0==l.opacity){l.opacity=1,l.position="static";for(var a=riddleAPI.riddles[t].getElementsByClassName("rid-load");0<a.length;)a[0].parentNode.removeChild(a[0])}null!=window.parent&&window.parent.postMessage({riddleHeight:e.data.riddleHeight+55,riddleId:e.data.riddleId},"*"),-1!=window.location.href.indexOf("?")&&n.getElementsByTagName("iframe")[0].contentWindow.postMessage({riddleQueryString:window.location.href.split("?")[1]},"*"),n.getElementsByTagName("iframe")[0].contentWindow.postMessage({riddleParentLocation:window.location.href},"*"),r()}e.data.riddleEvent&&window.onRiddleEvent&&window.onRiddleEvent(e.data.riddleEvent,d),"page-change"!=e.data.riddleEvent||"false"==n.getAttribute("data-auto-scroll")||e.data.isUnrolledQuiz?"page-change"==e.data.riddleEvent&&"false"==n.getAttribute("data-auto-scroll")&&(c(),r()):(i=0,isNaN(n.getAttribute("data-auto-scroll-offset"))||(i=n.getAttribute("data-auto-scroll-offset")),d.scrollIntoView(!0),window.scrollBy(0,-10-i),r()),e.data.riddleEvent&&"answer-poll"==e.data.riddleEvent.action&&"false"==n.getAttribute("data-auto-scroll")&&c(),null!=e.data.redirectToCustomLandingpagePath&&null!=e.data.redirectToCustomLandingpageData&&(d=e.data.redirectToCustomLandingpagePath,i=e.data.redirectToCustomLandingpageData,(n=window.parent.document.createElement("form")).setAttribute("method","post"),n.setAttribute("action",d),(d=window.parent.document.createElement("input")).setAttribute("type","hidden"),d.setAttribute("name","data"),d.setAttribute("value",i),n.appendChild(d),window.parent.document.body.appendChild(n),n.submit())}}},!1),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e());var i=0;function r(){for(var e=0;e<riddleAPI.riddles.length;e++){var t=riddleAPI.riddles[e].getElementsByTagName("iframe")[0],i=t.getBoundingClientRect().top+window.scrollY||window.pageYOffset,n=window.scrollY||window.pageYOffset,d=n+window.innerHeight;t.contentWindow.postMessage({iframeOffetTop:i,viewtop:n,viewbottom:d},"*"),function(e,t,i,n){{var d;null!=e&&null!=t&&null!=i&&n.src!=n.parentElement.getAttribute("data-embed-url")&&-1==n.src.indexOf("riddle.com")&&(d=e+n.parentElement.getBoundingClientRect().height,(t<=e&&e<=i||t<=d&&d<=i)&&(n.src=n.parentElement.getAttribute("data-embed-url")))}}(i,n,d,t)}}function c(){var e=document.documentElement;i=(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}document.addEventListener("scroll",function(e){0!=i&&(window.scrollTo(0,i),i=0),r()})}();
