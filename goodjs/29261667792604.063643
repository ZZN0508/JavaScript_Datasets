(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,r){var y,m;y="undefined"!=typeof window?window:this,(m={}).EventTarget=function(){"use strict";function e(){this._handlers={}}return e.prototype={constructor:e,on:function(e,t){for(var r=this._handlers[e],n=0,i=(r=void 0===r?this._handlers[e]=[]:r).length;n<i;n++)if(r[n]===t)return;r.push(t)},fire:function(e,t){var r,n,i,a={type:e,data:t};if((r=this._handlers[a.type])instanceof Array)for(n=0,i=(r=r.concat()).length;n<i;n++)r[n].call(this,a)},off:function(e,t){var r,n,i=this._handlers[e];if(i instanceof Array)for(r=0,n=i.length;r<n;r++)if(i[r]===t){i.splice(r,1);break}}},e}(),m.NativeDOM={type:"native",query:function(e,t){return e.querySelector(t)},queryAll:function(e,t){return e.querySelectorAll(t)},on:function(e,t,r){e.addEventListener(t,r,!1)},off:function(e,t,r){e.removeEventListener(t,r,!1)}},m.DOM=m.NativeDOM,m.DOMEventDelegate=function(){"use strict";var n=["click","mouseover","mouseout","mousedown","mouseup","mouseenter","mouseleave","mousemove","keydown","keyup","submit","change","contextmenu","dblclick","input","focusin","focusout"];function e(e,t,r,n){for(var i,a=0;a<e.length;a++)t["on"+(i=e[a])]&&r.call(n,i)}function t(e,t,r){this.element=e,this._handler=t,this._eventTypes=r||n,this._boundHandler={},this._attached=!1}return t.prototype={constructor:t,_handleEvent:function(e){var t=function(e){for(var t,r=!1,n=!1;!r&&e&&e.parentNode&&!n;)r=(t=e)&&t.hasAttribute("data-type"),n=(t=e)&&t.hasAttribute("data-module"),r||(e=e.parentNode);return r?e:null}(e.target),r=t?t.getAttribute("data-type"):"";this._handler["on"+e.type](e,t,r)},attachEvents:function(){this._attached||(e(this._eventTypes,this._handler,function(e){var t=this;function r(){t._handleEvent.apply(t,arguments)}m.DOM.on(this.element,e,r),this._boundHandler[e]=r},this),this._attached=!0)},detachEvents:function(){e(this._eventTypes,this._handler,function(e){m.DOM.off(this.element,e,this._boundHandler[e])},this)}},t}(),m.Context=function(){"use strict";function e(e,t){this.application=e,this.element=t}return e.prototype={constructor:e,broadcast:function(e,t){this.application.broadcast(e,t)},getService:function(e){return this.application.getService(e)},hasService:function(e){return this.application.hasService(e)},getConfig:function(e){return this.application.getModuleConfig(this.element,e)},getGlobal:function(e){return this.application.getGlobal(e)},getGlobalConfig:function(e){return this.application.getGlobalConfig(e)},reportError:function(e){this.application.reportError(e)},getElement:function(){return this.element}},e}(),m.Application=function(){"use strict";var s={},u={},n=[],r={},l={},c={},t=!1,i=null,a=new m.EventTarget;function o(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function d(e){if("function"!=typeof i){if(s.debug)throw e;a.fire("error",{exception:e})}else i(e)}function f(e,t){"function"==typeof e[t]&&e[t].apply(e,Array.prototype.slice.call(arguments,2))}function h(e){for(var t,r,n,i=[],a={},o=e.instance.behaviors||[],s=0;s<o.length;s++)n=o[s],"behaviorInstances"in e||(e.behaviorInstances={}),r=e.behaviorInstances,t=l[n],n in a?d(new Error('Behavior "'+n+'" cannot be specified twice in a module.')):t?(r[n]||(r[n]=t.creator(e.context)),i.push(r[n])):d(new Error('Behavior "'+n+'" not found')),a[n]=!0;return i}function p(e,t,r){r=new m.DOMEventDelegate(t,r,s.eventTypes);e.push(r),r.attachEvents()}function g(e){return c[e.id]}function v(e,t,r){null!==e.onmessage&&"object"==typeof e.onmessage&&e.onmessage.hasOwnProperty(t)?e.onmessage[t].call(e,r):-1!==function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}(e.messages||[],t)&&e.onmessage.call(e,t,r)}return o(a,{init:function(e){return o(s,e||{}),this.startAll(document.documentElement),this.fire("init"),t=!0,this},destroy:function(){return this.stopAll(document.documentElement),s={},u={},r={},n=[],l={},t=!(c={}),this},isStarted:function(e){return"object"==typeof g(e)},start:function(e){var t,r=(t=e.getAttribute("data-module"))?t.split(" ")[0]:"",n=u[r];if(!n)return d(new Error('Module type "'+r+'" is not defined.')),this;if(!this.isStarted(e)){e.id||(e.id="mod-"+r+"-"+n.counter),n.counter++,t=new m.Context(this,e),n=n.creator(t),s.debug||function(e,n){var t,r;for(t in e)"function"==typeof(r=e[t])&&(e[t]=function(r,e){return function(){var t=n+"."+r+"() - ";try{return e.apply(this,arguments)}catch(e){e.methodName=r,e.objectName=n,e.name=t+e.name,e.message=t+e.message,d(e)}}}(t,r))}(n,r);for(var i=h(c[e.id]=e={moduleName:r,instance:n,context:t,element:e,eventDelegates:[]}),a=0,o=i.length;a<o;a++)f(i[a],"init");f(e.instance,"init"),function(e){var t=e.eventDelegates,r=h(e);p(t,e.element,e.instance);for(var n=0;n<r.length;n++)p(t,e.element,r[n])}(e)}return this},stop:function(e){var t=g(e);if(t){!function(e){for(var t=e.eventDelegates,r=0;r<t.length;r++)t[r].detachEvents();e.eventDelegates=[]}(t);for(var r=h(t),n=r.length-1;0<=n;n--)f(r[n],"destroy");f(t.instance,"destroy"),delete c[e.id]}else if(s.debug)return d(new Error("Unable to stop module associated with element: "+e.id)),this;return this},startAll:function(e){for(var t=m.DOM.queryAll(e,"[data-module]"),r=0,n=t.length;r<n;r++)this.start(t[r]);return this},stopAll:function(e){for(var t=m.DOM.queryAll(e,"[data-module]"),r=0,n=t.length;r<n;r++)this.stop(t[r]);return this},addModule:function(e,t){return void 0!==u[e]?d(new Error("Module "+e+" has already been added.")):u[e]={creator:t,counter:1},this},getModuleConfig:function(e,t){var r=g(e),n=null;if(r&&r.config)n=r.config;else{var i=m.DOM.query(e,'script[type="text/x-config"]');if(i)try{n=JSON.parse(i.text)}catch(t){d(new Error("Module with id "+e.id+" has a malformed config."))}r&&(r.config=n)}return n?void 0===t?n:t in n?n[t]:null:null},addService:function(e,t){return void 0!==r[e]?d(new Error("Service "+e+" has already been added.")):r[e]={creator:t,instance:null},this},getService:function(e){var t=r[e];if(t){if(!t.instance){if(function(e){for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return 1}(e))return d(new ReferenceError("Circular service dependency: "+n.join(" -> ")+" -> "+e)),null;n.push(e),t.instance=t.creator(a),n.pop()}return t.instance}return d(new Error('Service "'+e+'" not found')),null},hasService:function(e){return r.hasOwnProperty(e)},addBehavior:function(e,t){return void 0!==l[e]?d(new Error("Behavior "+e+" has already been added.")):l[e]={creator:t,instance:null},this},broadcast:function(e,t){var r,n,i,a;for(n in c)if(c.hasOwnProperty(n))for(v((i=c[n]).instance,e,t),a=h(i),r=0;r<a.length;r++)v(a[r],e,t);return this.fire("message",{message:e,messageData:t}),this},getGlobal:function(e){return e in y?y[e]:null},getGlobalConfig:function(e){return void 0===e?s:e in s?s[e]:null},setGlobalConfig:function(e){return t?d(new Error("Cannot set global configuration after application initialization")):o(s,e),this},setErrorHandler:function(e){i=e},reportError:d,reportWarning:function(e){var t;s.debug?(t=this.getGlobal("console"))&&t.warn&&t.warn(e):a.fire("warning",e)},reportInfo:function(e){var t;!s.debug||(t=this.getGlobal("console"))&&t.info&&t.info(e)}})}(),void 0===(t=function(){return m}.apply(t,[]))||(e.exports=t)},,function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"e",function(){return o}),r.d(t,"c",function(){return s}),r.d(t,"d",function(){return u});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}},,function(e,t,r){var n=r(133);e.exports=function(e,t,r){t=null==e?void 0:n(e,t);return void 0===t?r:t}},,,,,function(e,w,k){"use strict";!function(e,t,r){k.d(w,"i",function(){return n}),k.d(w,"f",function(){return a}),k.d(w,"m",function(){return o}),k.d(w,"k",function(){return s}),k.d(w,"d",function(){return l}),k.d(w,"c",function(){return c}),k.d(w,"b",function(){return d}),k.d(w,"a",function(){return f}),k.d(w,"g",function(){return h}),k.d(w,"h",function(){return p}),k.d(w,"l",function(){return b}),k.d(w,"j",function(){return _}),k.d(w,"e",function(){return E});var u=k(18);function n(){return"[object process]"===Object.prototype.toString.call(void 0!==e?e:0)}k(77);var i={};function a(){return n()?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}function o(){var e=a(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){e=new Uint16Array(8);t.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return t(e[0])+t(e[1])+t(e[2])+t(e[3])+t(e[4])+t(e[5])+t(e[6])+t(e[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function s(e){if(!e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var r=t[6]||"",e=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+r+e}}function l(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function c(e){var t=a();if(!("console"in t))return e();var r=t.console,n={};["debug","info","warn","error","log","assert"].forEach(function(e){e in t.console&&r[e].__sentry_original__&&(n[e]=r[e],r[e]=r[e].__sentry_original__)});e=e();return Object.keys(n).forEach(function(e){r[e]=n[e]}),e}function d(e,t,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||r||"Error"}function f(t,r){void 0===r&&(r={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(r).forEach(function(e){t.exception.values[0].mechanism[e]=r[e]})}catch(t){}}function h(){try{return document.location.href}catch(e){return""}}function p(e){try{for(var t=e,r=[],n=0,i=0,a=" > ".length,o=void 0;t&&n++<5&&!("html"===(o=function(e){var t,r,n,i,a=e,o=[];if(!a||!a.tagName)return"";if(o.push(a.tagName.toLowerCase()),a.id&&o.push("#"+a.id),(e=a.className)&&Object(u.k)(e))for(t=e.split(/\s+/),i=0;i<t.length;i++)o.push("."+t[i]);var s=["type","name","title","alt"];for(i=0;i<s.length;i++)r=s[i],(n=a.getAttribute(r))&&o.push("["+r+'="'+n+'"]');return o.join("")}(t))||1<n&&80<=i+r.length*a+o.length);)r.push(o),i+=o.length,t=t.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}var g=Date.now(),v=0,y={now:function(){var e=Date.now()-g;return v=e=e<v?v:e},timeOrigin:g},m=function(){if(n())try{return r.require("perf_hooks").performance}catch(e){return y}var e=a().performance;return e&&e.now?(void 0===e.timeOrigin&&(e.timeOrigin=e.timing&&e.timing.navigationStart||g),e):y}();function b(){return(m.timeOrigin+m.now())/1e3}function _(e,t){if(!t)return 6e4;var r=parseInt(""+t,10);if(!isNaN(r))return 1e3*r;t=Date.parse(""+t);return isNaN(t)?6e4:t-e}function E(e){try{return e&&"function"==typeof e&&e.name||"<anonymous>"}catch(e){return"<anonymous>"}}}.call(this,k(111),k(56),k(181)(e))},,,,,,,,function(e,t,r){"use strict";function n(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return g(e,Error)}}function i(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function a(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function o(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e){return"undefined"!=typeof Event&&g(e,Event)}function d(e){return"undefined"!=typeof Element&&g(e,Element)}function f(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function h(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function p(e){return l(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function g(e,t){try{return e instanceof t}catch(e){return!1}}r.d(t,"d",function(){return n}),r.d(t,"e",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"k",function(){return s}),r.d(t,"i",function(){return u}),r.d(t,"h",function(){return l}),r.d(t,"f",function(){return c}),r.d(t,"c",function(){return d}),r.d(t,"j",function(){return f}),r.d(t,"m",function(){return h}),r.d(t,"l",function(){return p}),r.d(t,"g",function(){return g})},,function(e,t,r){var n=r(84),i=r(22),a=r(60);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==n(e)}},,function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(78),a=r(247),o=r(148),s=r(125),u=n(function(e,t,r){var n,i=1;return r.length&&(n=s(r,o(u)),i|=32),a(e,i,t,r,n)});u.placeholder={},e.exports=u},,function(e,t,r){var n=r(397),i=r(243);e.exports=function(e,t){return null!=e&&i(e,t,n)}},,,,function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var n=r(540),i=r(541),a=r(292),o=r(542);e.exports=function(e,t){return n(e)||i(e,t)||a(e,t)||o()}},,,function(e,t,r){var n=r(84),i=r(29);e.exports=function(e){if(!i(e))return!1;e=n(e);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},,function(e,i,h){"use strict";!function(r){h.d(i,"b",function(){return e}),h.d(i,"e",function(){return t}),h.d(i,"d",function(){return s}),h.d(i,"c",function(){return f}),h.d(i,"a",function(){return n}),h(3);var u=h(18),l=h(351),o=h(10),a=h(77);function e(e,t,r){if(t in e){var n=e[t],r=r(n);if("function"==typeof r)try{r.prototype=r.prototype||{},Object.defineProperties(r,{__sentry_original__:{enumerable:!1,value:n}})}catch(e){}e[t]=r}}function t(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function c(e){if(Object(u.d)(e)){var t=e,r={message:t.message,name:t.name,stack:t.stack};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}if(Object(u.f)(e)){var n,i=e,a={};a.type=i.type;try{a.target=Object(u.c)(i.target)?Object(o.h)(i.target):Object.prototype.toString.call(i.target)}catch(e){a.target="<unknown>"}try{a.currentTarget=Object(u.c)(i.currentTarget)?Object(o.h)(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){a.currentTarget="<unknown>"}for(n in"undefined"!=typeof CustomEvent&&Object(u.g)(e,CustomEvent)&&(a.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i);return a}return e}function s(e,t,r){void 0===r&&(r=102400);var n,i=f(e,t=void 0===t?3:t);return n=i,n=JSON.stringify(i),~-encodeURI(n).split(/%..|./).length>r?s(e,t-1,r):i}function d(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==r&&e===r?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":Object(u.l)(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+Object(o.e)(e)+"]":e}function f(e,r){try{return JSON.parse(JSON.stringify(e,function(e,t){return function e(t,r,n,i){if(void 0===n&&(n=1/0),void 0===i&&(i=new l.a),0===n)return function(e){var t=Object.prototype.toString.call(e);return"string"==typeof e?e:"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":(e=d(e),Object(u.i)(e)?e:t)}(r);if(null!=r&&"function"==typeof r.toJSON)return r.toJSON();t=d(r,t);if(Object(u.i)(t))return t;var a,o=c(r),s=Array.isArray(r)?[]:{};if(i.memoize(r))return"[Circular ~]";for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=e(a,o[a],n-1,i));return i.unmemoize(r),s}(e,t,r)}))}catch(e){return"**non-serializable**"}}function n(e,t){void 0===t&&(t=40);var r=Object.keys(c(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return Object(a.d)(r[0],t);for(var n=r.length;0<n;n--){var i=r.slice(0,n).join(", ");if(!(i.length>t))return n===r.length?i:Object(a.d)(i,t)}return""}}.call(this,h(56))},function(e,t,r){var n=r(140),i=r(78),a=r(508),o=r(215),i=i(function(e){return e.push(void 0,a),n(o,void 0,e)});e.exports=i},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return E}),r.d(t,"c",function(){return S}),r.d(t,"d",function(){return x});function u(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function l(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var r=new PerformanceObserver(function(e){return e.getEntries().map(t)});return r.observe({type:e,buffered:!0}),r}}catch(e){}}function c(t,r){function n(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),r&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function d(e,t,r){var n;return function(){0<=t.value&&(r||b.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(n||0),!t.delta&&void 0!==n||(n=t.value,e(t)))}}function f(){return a<0&&(a=o(),_(),m(function(){setTimeout(function(){a=o(),_()},0)})),{get timeStamp(){return a}}}function s(e,t){g||(g=t,v=e,n=new Date,p(removeEventListener),h())}function h(){var t;0<=v&&v<n-k&&(t={entryType:"first-input",name:g.type,target:g.target,cancelable:g.cancelable,startTime:g.timeStamp,processingStart:g.timeStamp+v},y.forEach(function(e){e(t)}),y=[])}function p(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,T,w)})}var g,v,n,y,m=function(t){addEventListener("pageshow",function(e){e.persisted&&t(e)},!0)},b=new("function"==typeof WeakSet?WeakSet:Set),i=function(e,t){function r(e){e.hadRecentInput||(i.value+=e.value,i.entries.push(e),n())}var n,i=u("CLS",0),a=l("layout-shift",r);a&&(n=d(e,i,t),c(function(){a.takeRecords().map(r),n()}),m(function(){i=u("CLS",0),n=d(e,i,t)}))},a=-1,o=function(){return"hidden"===document.visibilityState?0:1/0},_=function(){c(function(e){e=e.timeStamp;a=e},!0)},E=function(t,r){function e(e){"first-contentful-paint"===e.name&&(s&&s.disconnect(),e.startTime<i.timeStamp&&(a.value=e.startTime,a.entries.push(e),b.add(a),n()))}var n,i=f(),a=u("FCP"),o=performance.getEntriesByName("first-contentful-paint")[0],s=o?null:l("paint",e);(o||s)&&(n=d(t,a,r),o&&e(o),m(function(e){a=u("FCP"),n=d(t,a,r),requestAnimationFrame(function(){requestAnimationFrame(function(){a.value=performance.now()-e.timeStamp,b.add(a),n()})})}))},w={passive:!0,capture:!0},k=new Date,T=function(e){var t,r,n,i;function a(){s(r,n),i()}function o(){i()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(r=t,n=e,i=function(){removeEventListener("pointerup",a,w),removeEventListener("pointercancel",o,w)},addEventListener("pointerup",a,w),addEventListener("pointercancel",o,w)):s(t,e))},S=function(e,t){function r(e){e.startTime<n.timeStamp&&(i.value=e.processingStart-e.startTime,i.entries.push(e),b.add(i),o())}var n=f(),i=u("FID"),a=l("first-input",r),o=d(e,i,t);a&&c(function(){a.takeRecords().map(r),a.disconnect()},!0),a&&m(function(){i=u("FID"),o=d(e,i,t),y=[],v=-1,g=null,p(addEventListener),y.push(r),h()})},x=function(t,r){function e(e){var t=e.startTime;t<a.timeStamp&&(o.value=t,o.entries.push(e)),n()}var n,i,a=f(),o=u("LCP"),s=l("largest-contentful-paint",e);s&&(n=d(t,o,r),i=function(){b.has(o)||(s.takeRecords().map(e),s.disconnect(),b.add(o),n())},["keydown","click"].forEach(function(e){addEventListener(e,i,{once:!0,capture:!0})}),c(i,!0),m(function(e){o=u("LCP"),n=d(t,o,r),requestAnimationFrame(function(){requestAnimationFrame(function(){o.value=performance.now()-e.timeStamp,b.add(o),n()})})}))}},,function(e,t,r){var n=r(202),r=r(204)(function(e,t,r){n(e,t,r)});e.exports=r},function(r,i,a){var s;!function(){function o(e,t,r,n,i){this._listener=t,this._isOnce=r,this.context=n,this._signal=e,this._priority=i||0}function n(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function t(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){t.prototype.dispatch.apply(e,arguments)}}o.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(t=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,t),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},t.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,t,r,n){var i,a=this._indexOfListener(e,r);if(-1!==a){if((i=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else i=new o(this,e,t,r,n),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},_addBinding:function(e){for(var t=this._bindings.length;this._bindings[--t]&&e._priority<=this._bindings[t]._priority;);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var r,n=this._bindings.length;n--;)if((r=this._bindings[n])._listener===e&&r.context===t)return n;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,r){return n(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return n(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){n(e,"remove");t=this._indexOfListener(e,t);return-1!==t&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,r=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=r),n)for(t=this._bindings.slice(),this._shouldPropagate=!0;t[--n]&&this._shouldPropagate&&!1!==t[n].execute(r););}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=t;e.Signal=t,void 0===(s=function(){return e}.call(i,a,i,r))||(r.exports=s)}()},function(e,t,r){e.exports=r(535)},function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"d",function(){return c}),r.d(t,"b",function(){return d}),r.d(t,"c",function(){return h});var s=r(3),u=r(10),i=r(53),a=r(119),o=(n.prototype._invokeClient=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=this.getStackTop();i&&i.client&&i.client[e]&&(t=i.client)[e].apply(t,s.d(r,[i.scope]))},n.prototype.isOlderThan=function(e){return this._version<e},n.prototype.bindClient=function(e){(this.getStackTop().client=e)&&e.setupIntegrations&&e.setupIntegrations()},n.prototype.pushScope=function(){var e=this.getStack(),e=0<e.length?e[e.length-1].scope:void 0,e=a.a.clone(e);return this.getStack().push({client:this.getClient(),scope:e}),e},n.prototype.popScope=function(){return void 0!==this.getStack().pop()},n.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},n.prototype.getClient=function(){return this.getStackTop().client},n.prototype.getScope=function(){return this.getStackTop().scope},n.prototype.getStack=function(){return this._stack},n.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},n.prototype.captureException=function(e,t){var r=this._lastEventId=Object(u.m)(),n=t;if(!t){t=void 0;try{throw new Error("Sentry syntheticException")}catch(e){t=e}n={originalException:e,syntheticException:t}}return this._invokeClient("captureException",e,s.a({},n,{event_id:r})),r},n.prototype.captureMessage=function(e,t,r){var n=this._lastEventId=Object(u.m)(),i=r;if(!r){r=void 0;try{throw new Error(e)}catch(e){r=e}i={originalException:e,syntheticException:r}}return this._invokeClient("captureMessage",e,t,s.a({},i,{event_id:n})),n},n.prototype.captureEvent=function(e,t){var r=this._lastEventId=Object(u.m)();return this._invokeClient("captureEvent",e,s.a({},t,{event_id:r})),r},n.prototype.lastEventId=function(){return this._lastEventId},n.prototype.addBreadcrumb=function(e,t){var r,n,i,a,o=this.getStackTop();o.scope&&o.client&&(i=(n=o.client.getOptions&&o.client.getOptions()||{}).beforeBreadcrumb,r=void 0===i?null:i,(n=void 0===(i=n.maxBreadcrumbs)?100:i)<=0||(i=Object(u.l)(),a=s.a({timestamp:i},e),null!==(e=r?Object(u.c)(function(){return r(a,t)}):a)&&o.scope.addBreadcrumb(e,Math.min(n,100))))},n.prototype.setUser=function(e){var t=this.getStackTop();t.scope&&t.scope.setUser(e)},n.prototype.setTags=function(e){var t=this.getStackTop();t.scope&&t.scope.setTags(e)},n.prototype.setExtras=function(e){var t=this.getStackTop();t.scope&&t.scope.setExtras(e)},n.prototype.setTag=function(e,t){var r=this.getStackTop();r.scope&&r.scope.setTag(e,t)},n.prototype.setExtra=function(e,t){var r=this.getStackTop();r.scope&&r.scope.setExtra(e,t)},n.prototype.setContext=function(e,t){var r=this.getStackTop();r.scope&&r.scope.setContext(e,t)},n.prototype.configureScope=function(e){var t=this.getStackTop();t.scope&&t.client&&e(t.scope)},n.prototype.run=function(e){var t=c(this);try{e(this)}finally{c(t)}},n.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return i.a.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},n.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},n.prototype.startTransaction=function(e){return this._callExtensionMethod("startTransaction",e)},n.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},n.prototype._callExtensionMethod=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=l().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);i.a.warn("Extension method "+e+" couldn't be found, doing nothing.")},n);function n(e,t,r){void 0===t&&(t=new a.a),this._version=r=void 0===r?3:r,this._stack=[],this._stack.push({client:e,scope:t}),this.bindClient(e)}function l(){var e=Object(u.f)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function c(e){var t=l(),r=h(t);return p(t,e),r}function d(){var e=l();return f(e)&&!h(e).isOlderThan(3)||p(e,new o),(Object(u.i)()?function(e){try{var t=l().__SENTRY__;if(!t||!t.extensions||!t.extensions.domain)return h(e);var r,n=t.extensions.domain.active;return n?(f(n)&&!h(n).isOlderThan(3)||(r=h(e).getStackTop(),p(n,new o(r.client,a.a.clone(r.scope)))),h(n)):h(e)}catch(t){return h(e)}}:h)(e)}function f(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub}function h(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new o),e.__SENTRY__.hub}function p(e,t){return e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,1)}},function(e,t,r){"use strict";r.d(t,"c",function(){return o}),r.d(t,"d",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"e",function(){return l}),r.d(t,"a",function(){return c}),r.d(t,"f",function(){return d}),r.d(t,"h",function(){return f}),r.d(t,"j",function(){return h}),r.d(t,"g",function(){return p}),r.d(t,"i",function(){return g}),r.d(t,"k",function(){return v}),r.d(t,"m",function(){return y}),r.d(t,"l",function(){return m});var i=r(3),a=r(42);function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Object(a.b)();if(n&&n[e])return n[e].apply(n,i.d(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function o(e,t){var r;try{throw new Error("Sentry syntheticException")}catch(e){r=e}return n("captureException",e,{captureContext:t,originalException:e,syntheticException:r})}function s(e,t){var r;try{throw new Error(e)}catch(e){r=e}return n("captureMessage",e,"string"==typeof t?t:void 0,i.a({originalException:e,syntheticException:r},"string"!=typeof t?{captureContext:t}:void 0))}function u(e){return n("captureEvent",e)}function l(e){n("configureScope",e)}function c(e){n("addBreadcrumb",e)}function d(e,t){n("setContext",e,t)}function f(e){n("setExtras",e)}function h(e){n("setTags",e)}function p(e,t){n("setExtra",e,t)}function g(e,t){n("setTag",e,t)}function v(e){n("setUser",e)}function y(e){n("withScope",e)}function m(e){return n("startTransaction",i.a({},e))}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n,i={};r.r(i),r.d(i,"FunctionToString",function(){return a}),r.d(i,"InboundFilters",function(){return h});var a=(g.prototype.setupOnce=function(){n=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.__sentry_original__||this;return n.apply(r,e)}},g.id="FunctionToString",g),o=r(3),s=r(119),u=r(42),l=r(53),c=r(10),d=r(77),f=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],h=(p.prototype.setupOnce=function(){Object(s.b)(function(e){var t=Object(u.b)();if(!t)return e;var r=t.getIntegration(p);if(r){t=t.getClient(),t=t?t.getOptions():{},t=r._mergeOptions(t);if(r._shouldDropEvent(e,t))return null}return e})},p.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(l.a.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(c.d)(e)),!0):this._isIgnoredError(e,t)?(l.a.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(c.d)(e)),!0):this._isDeniedUrl(e,t)?(l.a.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Object(c.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(l.a.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Object(c.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},p.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},p.prototype._isIgnoredError=function(e,r){return!(!r.ignoreErrors||!r.ignoreErrors.length)&&this._getPossibleEventMessages(e).some(function(t){return r.ignoreErrors.some(function(e){return Object(d.a)(t,e)})})},p.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var r=this._getEventFilterUrl(e);return!!r&&t.denyUrls.some(function(e){return Object(d.a)(r,e)})},p.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var r=this._getEventFilterUrl(e);return!r||t.allowUrls.some(function(e){return Object(d.a)(r,e)})},p.prototype._mergeOptions=function(e){return{allowUrls:o.d(this._options.whitelistUrls||[],this._options.allowUrls||[],(e=void 0===e?{}:e).whitelistUrls||[],e.allowUrls||[]),denyUrls:o.d(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:o.d(this._options.ignoreErrors||[],e.ignoreErrors||[],f),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},p.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},r=t.type,n=void 0===r?"":r,i=t.value,a=void 0===i?"":i;return[""+a,n+": "+a]}catch(t){return l.a.error("Cannot extract message for event "+Object(c.d)(e)),[]}return[]},p.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var r=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return r&&r[r.length-1].filename||null}return null}catch(t){return l.a.error("Cannot extract url for event "+Object(c.d)(e)),null}},p.id="InboundFilters",p);function p(e){this._options=e=void 0===e?{}:e,this.name=p.id}function g(){this.name=g.id}},,function(e,t,r){var n=r(232),r="object"==typeof self&&self&&self.Object===Object&&self,r=n||r||Function("return this")();e.exports=r},,,,function(e,t){e.exports=function(e){return void 0===e}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},,function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(10),i=Object(n.f)(),a="Sentry Logger ",r=(o.prototype.disable=function(){this._enabled=!1},o.prototype.enable=function(){this._enabled=!0},o.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(n.c)(function(){i.console.log(a+"[Log]: "+e.join(" "))})},o.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(n.c)(function(){i.console.warn(a+"[Warn]: "+e.join(" "))})},o.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(n.c)(function(){i.console.error(a+"[Error]: "+e.join(" "))})},o);function o(){this._enabled=!1}i.__SENTRY__=i.__SENTRY__||{};var s=i.__SENTRY__.logger||(i.__SENTRY__.logger=new r)},,function(e,t,r){var n=r(416);e.exports=function(e){return n(e,5)}},,function(e,t,r){var n=r(240),i=r(241),a=r(86);e.exports=function(e){return(a(e)?n:i)(e)}},function(e,t){function u(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return r(e),0}s.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(s){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=s.apply(e,o);function i(e){u(n,t,r,i,a,"next",e)}function a(e){u(n,t,r,i,a,"throw",e)}i(void 0)})}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,,function(e,t,r){var n=r(84),i=r(185),a=r(60),o=Function.prototype,r=Object.prototype,s=o.toString,u=r.hasOwnProperty,l=s.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;e=i(e);if(null===e)return!0;e=u.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&s.call(e)==l}},,function(e,t,r){var a=r(129),o=r(29);e.exports=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),a(e,t,{leading:n,maxWait:t,trailing:i})}},,function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return l});var a=r(3),o=r(43),s=r(10),u=0;function n(){return 0<u}function l(t,n,i){if(void 0===n&&(n={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(n){return t}function e(){var r=Array.prototype.slice.call(arguments);try{i&&"function"==typeof i&&i.apply(this,arguments);var e=r.map(function(e){return l(e,n)});return(t.handleEvent||t).apply(this,e)}catch(t){throw u+=1,setTimeout(function(){--u}),Object(o.m)(function(e){e.addEventProcessor(function(e){e=a.a({},e);return n.mechanism&&(Object(s.b)(e,void 0,void 0),Object(s.a)(e,n.mechanism)),e.extra=a.a({},e.extra,{arguments:r}),e}),Object(o.c)(t)}),t}}try{for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}catch(t){}t.prototype=t.prototype||{},e.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:e}),Object.defineProperties(e,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(e,"name").configurable&&Object.defineProperty(e,"name",{get:function(){return t.name}})}catch(t){}return e}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n,i=r(18);(r=n=n||{}).PENDING="PENDING",r.RESOLVED="RESOLVED",r.REJECTED="REJECTED";var a=(o.prototype.toString=function(){return"[object SyncPromise]"},o.resolve=function(t){return new o(function(e){e(t)})},o.reject=function(r){return new o(function(e,t){t(r)})},o.all=function(e){return new o(function(r,n){var i,a;Array.isArray(e)?0!==e.length?(i=e.length,a=[],e.forEach(function(e,t){o.resolve(e).then(function(e){a[t]=e,0==--i&&r(a)}).then(null,n)})):r([]):n(new TypeError("Promise.all requires an array as input."))})},o.prototype.then=function(n,i){var e=this;return new o(function(t,r){e._attachHandler({done:!1,onfulfilled:function(e){if(n)try{t(n(e))}catch(e){return void r(e)}else t(e)},onrejected:function(e){if(i)try{t(i(e))}catch(e){return void r(e)}else r(e)}})})},o.prototype.catch=function(e){return this.then(function(e){return e},e)},o.prototype.finally=function(i){var a=this;return new o(function(e,t){var r,n;return a.then(function(e){n=!1,r=e,i&&i()},function(e){n=!0,r=e,i&&i()}).then(function(){(n?t:e)(r)})})},o);function o(e){var r=this;this._state=n.PENDING,this._handlers=[],this._resolve=function(e){r._setResult(n.RESOLVED,e)},this._reject=function(e){r._setResult(n.REJECTED,e)},this._setResult=function(e,t){r._state===n.PENDING&&(Object(i.m)(t)?t.then(r._resolve,r._reject):(r._state=e,r._value=t,r._executeHandlers()))},this._attachHandler=function(e){r._handlers=r._handlers.concat(e),r._executeHandlers()},this._executeHandlers=function(){var e;r._state!==n.PENDING&&(e=r._handlers.slice(),r._handlers=[],e.forEach(function(e){e.done||(r._state===n.RESOLVED&&e.onfulfilled&&e.onfulfilled(r._value),r._state===n.REJECTED&&e.onrejected&&e.onrejected(r._value),e.done=!0)}))};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}},function(e,t,r){"use strict";r.d(t,"b",function(){return h}),r.d(t,"e",function(){return p}),r.d(t,"h",function(){return g}),r.d(t,"f",function(){return v}),r.d(t,"d",function(){return y}),r.d(t,"g",function(){return m}),r.d(t,"c",function(){return b}),r.d(t,"a",function(){return _}),r.d(t,"i",function(){return E});var n=r(44),i=r(224),a=r(42),o=r(10),s=r(68),u=r(155),l=r(67),c=r(219),d=r(220),f=r(221),t=r(222),r=r(223),h=[new n.a.InboundFilters,new n.a.FunctionToString,new c.a,new d.a,new f.a,new t.a,new r.a];function p(e){var t;void 0===(e=void 0===e?{}:e).defaultIntegrations&&(e.defaultIntegrations=h),void 0===e.release&&(t=Object(o.f)()).SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id),Object(i.a)(u.a,e)}function g(e){(e=void 0===e?{}:e).eventId||(e.eventId=Object(a.b)().lastEventId());var t=Object(a.b)().getClient();t&&t.showReportDialog(e)}function v(){return Object(a.b)().lastEventId()}function y(){}function m(e){e()}function b(e){var t=Object(a.b)().getClient();return t?t.flush(e):s.a.reject(!1)}function _(e){var t=Object(a.b)().getClient();return t?t.close(e):s.a.reject(!1)}function E(e){return Object(l.b)(e)()}},,,function(e,t,r){"use strict";var n="function"==typeof fetch?fetch:function(n,i){return i=i||{},new Promise(function(e,t){var r,s=new XMLHttpRequest;for(r in s.open(i.method||"get",n),i.headers)s.setRequestHeader(r,i.headers[r]);function u(){var n,i=[],a=[],o={};return s.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(e,t,r){i.push(t=t.toLowerCase()),a.push([t,r]),n=o[t],o[t]=n?n+","+r:r}),{ok:1==(s.status/200|0),status:s.status,statusText:s.statusText,url:s.responseURL,clone:u,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(s.responseXML)},blob:function(){return Promise.resolve(new Blob([s.response]))},headers:{keys:function(){return i},entries:function(){return a},get:function(e){return o[e.toLowerCase()]},has:function(e){return e.toLowerCase()in o}}}}s.withCredentials="include"==i.credentials,s.onload=function(){e(u())},s.onerror=t,s.send(i.body)})};t.a=n},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n,r=r(3),i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r]);return e}),a=(n=Error,r.b(o,n),o);function o(e){var t=this.constructor,r=n.call(this,e)||this;return r.message=e,r.name=t.prototype.constructor.name,i(r,t.prototype),r}},,function(e,t,r){var n=r(507),i=r(57);e.exports=function(e){return null==e?[]:n(e,i(e))}},function(e,t,r){var n=r(288);e.exports=function(e,t,r){return null==e?e:n(e,t,r)}},function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"a",function(){return s});var n=r(18);function i(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function a(e,t){var r=e,n=r.length;if(n<=150)return r;n<t&&(t=n);e=Math.max(t-60,0);e<5&&(e=0);t=Math.min(e+140,n);return(t=n-5<t?n:t)===n&&(e=Math.max(t-140,0)),r=r.slice(e,t),0<e&&(r="'{snip} "+r),t<n&&(r+=" {snip}"),r}function o(e,t){if(!Array.isArray(e))return"";for(var r=[],n=0;n<e.length;n++){var i=e[n];try{r.push(String(i))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function s(e,t){return!!Object(n.k)(e)&&(Object(n.j)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},function(e,t,r){var n=r(122),i=r(236),a=r(182);e.exports=function(e,t){return a(i(e,t,n),e+"")}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){var o=r(536);e.exports=function(e,t){if(null==e)return{};var r,n=o(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}},function(e,t){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(3),s=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/;function i(e){var t=null,r=e&&e.framesToPop;try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,n=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,i=e.stacktrace.split("\n"),a=[],o=0;o<i.length;o+=2){var s=null;(t=r.exec(i[o]))?s={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=n.exec(i[o]))&&(s={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),s&&(!s.func&&s.line&&(s.func="?"),a.push(s))}return a.length?{message:f(e),name:e.name,stack:a}:null}(e))return a(t,r)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,r,n=[],i=e.stack.split("\n"),a=0;a<i.length;++a){if(r=s.exec(i[a])){var o=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=d.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),o={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||"?",args:o?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=l.exec(i[a]))o={url:r[2],func:r[1]||"?",args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=u.exec(i[a])))continue;r[3]&&-1<r[3].indexOf(" > eval")&&(t=c.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=t[1],r[4]=t[2],r[5]=""):0!==a||r[5]||void 0===e.columnNumber||(n[0].column=e.columnNumber+1),o={url:r[3],func:r[1]||"?",args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!o.func&&o.line&&(o.func="?"),n.push(o)}return n.length?{message:f(e),name:e.name,stack:n}:null}(e))return a(t,r)}catch(e){}return{message:f(e),name:e&&e.name,stack:[],failed:!0}}function a(e,t){try{return n.a({},e,{stack:e.stack.slice(t)})}catch(t){return e}}function f(e){e=e&&e.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}},function(e,t,r){var n=r(105),i=r(360),a=r(361),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(o&&o in Object(e)?i:a)(e)}},function(e,t,r){var n=r(368),i=r(371);e.exports=function(e,t){t=i(e,t);return n(t)?t:void 0}},function(e,t,r){var n=r(33),i=r(183);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},function(e,t,r){var n=r(240),i=r(424),a=r(86);e.exports=function(e){return a(e)?n(e,!0):i(e)}},function(e,t,r){"use strict";var n=r(442)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=r(443),i=Math.max;e.exports=function(e){return i(0,n(e))}},function(e,t,r){},function(e,t,r){"use strict";var o=r(276),a=r(457),s=r(273),u=r(271),l=r(461);(e.exports=function(e,t){var r,n,i,a;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],o(e)?(r=l.call(e,"c"),n=l.call(e,"e"),a=l.call(e,"w")):n=!(r=a=!0),a={value:t,configurable:r,enumerable:n,writable:a},i?s(u(i),a):a}).gs=function(e,t,r){var n,i;return"string"!=typeof e?(i=r,r=t,t=e,e=null):i=arguments[3],o(t)?a(t)?o(r)?a(r)||(i=r,r=void 0):r=void 0:(i=t,t=r=void 0):t=void 0,e=o(e)?(n=l.call(e,"c"),l.call(e,"e")):!(n=!0),e={get:t,set:r,configurable:n,enumerable:e},i?s(u(i),e):e}},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var n="sentry.javascript.browser",i="5.18.1"},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.exports=r},,function(e,t,r){"use strict";r.d(t,"c",function(){return o}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return l});var n=r(18),i=r(35),a=r(83);function o(e){var t=l(e.stack),e={type:e.name,value:e.message};return t&&t.length&&(e.stacktrace={frames:t}),void 0===e.type&&""===e.value&&(e.value="Unrecoverable error caught"),e}function s(e,t,r){e={exception:{values:[{type:Object(n.f)(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:"Non-Error "+(r?"promise rejection":"exception")+" captured with keys: "+Object(i.a)(e)}]},extra:{__serialized__:Object(i.d)(e)}};return t&&(t=l(Object(a.a)(t).stack),e.stacktrace={frames:t}),e}function u(e){return{exception:{values:[o(e)]}}}function l(e){if(!e||!e.length)return[];var t=e,r=t[0].func||"",e=t[t.length-1].func||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(t=t.slice(1)),(t=-1!==e.indexOf("sentryWrapped")?t.slice(0,-1):t).slice(0,50).map(function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}}).reverse()}},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var a,s=r(3),o=r(18),u=r(53),l=r(10),c=r(35),i=r(176),d=Object(l.f)(),f={},h={};function n(e){if(!h[e])switch(h[e]=!0,e){case"console":"console"in d&&["debug","info","warn","error","log","assert"].forEach(function(n){n in d.console&&Object(c.b)(d.console,n,function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];g("console",{args:e,level:n}),r&&Function.prototype.apply.call(r,d.console,e)}})});break;case"dom":"document"in d&&(d.document.addEventListener("click",b("click",g.bind(null,"dom")),!1),d.document.addEventListener("keypress",_(g.bind(null,"dom")),!1),["EventTarget","Node"].forEach(function(e){e=d[e]&&d[e].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(Object(c.b)(e,"addEventListener",function(n){return function(e,t,r){return t&&t.handleEvent?("click"===e&&Object(c.b)(t,"handleEvent",function(t){return function(e){return b("click",g.bind(null,"dom"))(e),t.call(this,e)}}),"keypress"===e&&Object(c.b)(t,"handleEvent",function(t){return function(e){return _(g.bind(null,"dom"))(e),t.call(this,e)}})):("click"===e&&b("click",g.bind(null,"dom"),!0)(this),"keypress"===e&&_(g.bind(null,"dom"))(this)),n.call(this,e,t,r)}}),Object(c.b)(e,"removeEventListener",function(n){return function(e,t,r){try{t=t&&(t.__sentry_wrapped__||t)}catch(e){}return n.call(this,e,t,r)}}))}));break;case"xhr":"XMLHttpRequest"in d&&(r=XMLHttpRequest.prototype,Object(c.b)(r,"open",function(a){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,r=e[1];n.__sentry_xhr__={method:Object(o.k)(e[0])?e[0].toUpperCase():e[0],url:e[1]},Object(o.k)(r)&&"POST"===n.__sentry_xhr__.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);function i(){if(4===n.readyState){try{n.__sentry_xhr__&&(n.__sentry_xhr__.status_code=n.status)}catch(e){}g("xhr",{args:e,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}}return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?Object(c.b)(n,"onreadystatechange",function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(),r.apply(n,e)}}):n.addEventListener("readystatechange",i),a.apply(n,e)}}),Object(c.b)(r,"send",function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),r.apply(this,e)}}));break;case"fetch":Object(i.c)()&&Object(c.b)(d,"fetch",function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n={args:e,fetchData:{method:(void 0===(r=e)&&(r=[]),"Request"in d&&Object(o.g)(r[0],Request)&&r[0].method?String(r[0].method).toUpperCase():r[1]&&r[1].method?String(r[1].method).toUpperCase():"GET"),url:"string"==typeof(r=void 0===(r=e)?[]:r)[0]?r[0]:"Request"in d&&Object(o.g)(r[0],Request)?r[0].url:String(r[0])},startTimestamp:Date.now()};return g("fetch",s.a({},n)),i.apply(d,e).then(function(e){return g("fetch",s.a({},n,{endTimestamp:Date.now(),response:e})),e},function(e){throw g("fetch",s.a({},n,{endTimestamp:Date.now(),error:e})),e})}});break;case"history":Object(i.b)()&&(n=d.onpopstate,d.onpopstate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=d.location.href;if(g("history",{from:a,to:a=r}),n)return n.apply(this,e)},Object(c.b)(d.history,"pushState",t),Object(c.b)(d.history,"replaceState",t));break;case"error":E=d.onerror,d.onerror=function(e,t,r,n,i){return g("error",{column:n,error:i,line:r,msg:e,url:t}),!!E&&E.apply(this,arguments)};break;case"unhandledrejection":w=d.onunhandledrejection,d.onunhandledrejection=function(e){return g("unhandledrejection",e),!w||w.apply(this,arguments)};break;default:u.a.warn("unknown instrumentation type:",e)}function t(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n=2<e.length?e[2]:void 0;return n&&(r=a,n=String(n),g("history",{from:r,to:a=n})),i.apply(this,e)}}var n,r}function p(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(f[e.type]=f[e.type]||[],f[e.type].push(e.callback),n(e.type))}function g(e,t){var r,n;if(e&&f[e])try{for(var i=s.e(f[e]||[]),a=i.next();!a.done;a=i.next()){var o=a.value;try{o(t)}catch(t){u.a.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+Object(l.e)(o)+"\nError: "+t)}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}var v,y,m=0;function b(t,r,n){return void 0===n&&(n=!1),function(e){v=void 0,e&&y!==e&&(y=e,m&&clearTimeout(m),n?m=setTimeout(function(){r({event:e,name:t})}):r({event:e,name:t}))}}function _(n){return function(e){var t;try{t=e.target}catch(e){return}var r=t&&t.tagName;r&&("INPUT"===r||"TEXTAREA"===r||t.isContentEditable)&&(v||b("input",n)(e),clearTimeout(v),v=setTimeout(function(){v=void 0},1e3))}}var E=null,w=null},function(e,t,r){"use strict";var n,i;r.d(t,"a",function(){return n}),(t=n=n||{}).Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed",(i=n=n||{}).fromHttpCode=function(e){return 200<=e&&e<300?i.Success:429===e?i.RateLimit:400<=e&&e<500?i.Invalid:500<=e?i.Failed:i.Unknown}},,function(e,t,r){r=r(46).Symbol;e.exports=r},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(134);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,r){var n=r(389);e.exports=function(e){var t=n(e),e=t%1;return t==t?e?t-e:t:0}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&-1<e&&e%1==0&&e<t}},function(e,t,r){var l=r(193),c=r(194);e.exports=function(e,t,r,n){var i=!r;r=r||{};for(var a=-1,o=t.length;++a<o;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),(i?c:l)(r,s,u)}return r}},,function(e,t,r){"use strict";var n=r(88);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){var n=r(511),i=r(520),a=r(122),o=r(22),s=r(522);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):n(e):s(e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(300),i=r(73),a=r(68),o=(l.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},l.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then(function(){return t.remove(e)}).then(null,function(){return t.remove(e).then(null,function(){})}),e):a.a.reject(new i.a("Not adding Promise due to buffer limit reached."))},l.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},l.prototype.length=function(){return this._buffer.length},l.prototype.drain=function(r){var n=this;return new a.a(function(e){var t=setTimeout(function(){r&&0<r&&e(!1)},r);a.a.all(n._buffer).then(function(){clearTimeout(t),e(!0)}).then(null,function(){e(!0)})})},l),s=(u.prototype.sendEvent=function(e){throw new i.a("Transport Class has to implement `sendEvent` method")},u.prototype.close=function(e){return this._buffer.drain(e)},u);function u(e){this.options=e,this._buffer=new o(30),this._api=new n.a(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}function l(e){this._limit=e,this._buffer=[]}},function(e,t,r){var n=r(78),d=r(106),f=r(127),h=r(87),p=Object.prototype,g=p.hasOwnProperty,n=n(function(e,t){e=Object(e);var r=-1,n=t.length,i=2<n?t[2]:void 0;for(i&&f(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],o=h(a),s=-1,u=o.length;++s<u;){var l=o[s],c=e[l];(void 0===c||d(c,p[l])&&!g.call(e,l))&&(e[l]=a[l])}return e});e.exports=n},function(e,t,r){e.exports=r(532)},,function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return l});var a=r(18),o=r(10),s=r(101),u=r(83);function n(e,t,r){if(void 0===r&&(r={}),Object(a.e)(e)&&e.error)return e=e.error,Object(s.b)(Object(u.a)(e));if(Object(a.a)(e)||Object(a.b)(e)){var n=e,i=n.name||(Object(a.a)(n)?"DOMError":"DOMException"),n=n.message?i+": "+n.message:i,i=l(n,t,r);return Object(o.b)(i,n),i}if(Object(a.d)(e))return Object(s.b)(Object(u.a)(e));if(Object(a.h)(e)||Object(a.f)(e)){n=e;return i=Object(s.a)(n,t,r.rejection),Object(o.a)(i,{synthetic:!0}),i}return i=l(e,t,r),Object(o.b)(i,""+e,void 0),Object(o.a)(i,{synthetic:!0}),i}function l(e,t,r){e={message:e};return(r=void 0===r?{}:r).attachStacktrace&&t&&(t=Object(u.a)(t),t=Object(s.d)(t.stack),e.stacktrace={frames:t}),e}},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return s});var u=r(3),l=r(68),c=r(18),n=r(10),i=(a.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},a.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},a.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,setTimeout(function(){t._scopeListeners.forEach(function(e){e(t)}),t._notifyingListeners=!1}))},a.prototype._notifyEventProcessors=function(n,i,a,o){var s=this;return void 0===o&&(o=0),new l.a(function(t,e){var r=n[o];null===i||"function"!=typeof r?t(i):(r=r(u.a({},i),a),(Object(c.m)(r)?r.then(function(e){return s._notifyEventProcessors(n,e,a,o+1).then(t)}):s._notifyEventProcessors(n,r,a,o+1).then(t)).then(null,e))})},a.prototype.setUser=function(e){return this._user=e||{},this._notifyScopeListeners(),this},a.prototype.setTags=function(e){return this._tags=u.a({},this._tags,e),this._notifyScopeListeners(),this},a.prototype.setTag=function(e,t){var r;return this._tags=u.a({},this._tags,((r={})[e]=t,r)),this._notifyScopeListeners(),this},a.prototype.setExtras=function(e){return this._extra=u.a({},this._extra,e),this._notifyScopeListeners(),this},a.prototype.setExtra=function(e,t){var r;return this._extra=u.a({},this._extra,((r={})[e]=t,r)),this._notifyScopeListeners(),this},a.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},a.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},a.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},a.prototype.setTransaction=function(e){return this.setTransactionName(e)},a.prototype.setContext=function(e,t){var r;return this._contexts=u.a({},this._contexts,((r={})[e]=t,r)),this._notifyScopeListeners(),this},a.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},a.prototype.getSpan=function(){return this._span},a.prototype.getTransaction=function(){var e=this.getSpan();if(e&&e.spanRecorder&&e.spanRecorder.spans[0])return e.spanRecorder.spans[0]},a.clone=function(e){var t=new a;return e&&(t._breadcrumbs=u.d(e._breadcrumbs),t._tags=u.a({},e._tags),t._extra=u.a({},e._extra),t._contexts=u.a({},e._contexts),t._user=e._user,t._level=e._level,t._span=e._span,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=u.d(e._eventProcessors)),t},a.prototype.update=function(e){if(!e)return this;if("function"!=typeof e)return e instanceof a?(this._tags=u.a({},this._tags,e._tags),this._extra=u.a({},this._extra,e._extra),this._contexts=u.a({},this._contexts,e._contexts),e._user&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint)):Object(c.h)(e)&&(this._tags=u.a({},this._tags,e.tags),this._extra=u.a({},this._extra,e.extra),this._contexts=u.a({},this._contexts,e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint)),this;e=e(this);return e instanceof a?e:this},a.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._notifyScopeListeners(),this},a.prototype.addBreadcrumb=function(e,t){e=u.a({timestamp:Object(n.l)()},e);return this._breadcrumbs=void 0!==t&&0<=t?u.d(this._breadcrumbs,[e]).slice(-t):u.d(this._breadcrumbs,[e]),this._notifyScopeListeners(),this},a.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},a.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},a.prototype.applyToEvent=function(e,t){return this._extra&&Object.keys(this._extra).length&&(e.extra=u.a({},this._extra,e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=u.a({},this._tags,e.tags)),this._user&&Object.keys(this._user).length&&(e.user=u.a({},this._user,e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=u.a({},this._contexts,e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span&&(e.contexts=u.a({trace:this._span.getTraceContext()},e.contexts)),this._applyFingerprint(e),e.breadcrumbs=u.d(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=0<e.breadcrumbs.length?e.breadcrumbs:void 0,this._notifyEventProcessors(u.d(o(),this._eventProcessors),e,t)},a);function a(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}function o(){var e=Object(n.f)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function s(e){o().push(e)}},,function(e,t,r){var n=r(22),i=r(178),a=r(362),o=r(234);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:a(o(e))}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(393),i=r(60),r=Object.prototype,a=r.hasOwnProperty,o=r.propertyIsEnumerable,n=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!o.call(e,"callee")};e.exports=n},function(e,a,o){!function(e){var t=o(46),r=o(394),n=a&&!a.nodeType&&a,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,t=i&&i.exports===n?t.Buffer:void 0,r=(t?t.isBuffer:void 0)||r;e.exports=r}.call(this,o(141)(e))},function(e,t){e.exports=function(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&"__lodash_placeholder__"!==o||(e[r]="__lodash_placeholder__",a[i++]=r)}return a}},function(e,t,r){var n=r(414),i=r(180),a=r(415),o=r(260),s=r(250),u=r(84),l=r(233),c=l(n),d=l(i),f=l(a),h=l(o),p=l(s),r=u;(n&&"[object DataView]"!=r(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=r(new i)||a&&"[object Promise]"!=r(a.resolve())||o&&"[object Set]"!=r(new o)||s&&"[object WeakMap]"!=r(new s))&&(r=function(e){var t=u(e),e="[object Object]"==t?e.constructor:void 0,e=e?l(e):"";if(e)switch(e){case c:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case h:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=r},function(e,t,r){var i=r(106),a=r(86),o=r(109),s=r(29);e.exports=function(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?a(r)&&o(t,r.length):"string"==n&&t in r)&&i(r[t],e)}},,function(e,t,r){var m=r(29),b=r(506),_=r(239),E=Math.max,w=Math.min;e.exports=function(n,r,e){var i,a,o,s,u,l,c=0,d=!1,f=!1,t=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function h(e){var t=i,r=a;return i=a=void 0,c=e,s=n.apply(r,t)}function p(e){var t=e-l;return void 0===l||r<=t||t<0||f&&o<=e-c}function g(){var e,t=b();if(p(t))return v(t);u=setTimeout(g,(e=r-(t-l),f?w(e,o-(t-c)):e))}function v(e){return u=void 0,t&&i?h(e):(i=a=void 0,s)}function y(){var e=b(),t=p(e);if(i=arguments,a=this,l=e,t){if(void 0===u)return c=t=l,u=setTimeout(g,r),d?h(t):s;if(f)return clearTimeout(u),u=setTimeout(g,r),h(l)}return void 0===u&&(u=setTimeout(g,r)),s}return r=_(r)||0,m(e)&&(d=!!e.leading,o=(f="maxWait"in e)?E(_(e.maxWait)||0,r):o,t="trailing"in e?!!e.trailing:t),y.cancel=function(){void 0!==u&&clearTimeout(u),i=l=a=u=void(c=0)},y.flush=function(){return void 0===u?s:v(b())},y}},,function(e,t,r){var n=r(438),i=r(235),a=r(108),o=r(234);e.exports=function(e,t,r){return e=o(e),r=null==r?0:n(a(r),0,e.length),t=i(t),e.slice(r,r+t.length)==t}},,function(e,t,r){var i=r(121),a=r(107);e.exports=function(e,t){for(var r=0,n=(t=i(t,e)).length;null!=e&&r<n;)e=e[a(t[r++])];return r&&r==n?e:void 0}},function(e,t,r){var n=r(84),i=r(60);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},function(e,t,r){r=r(85)(Object,"create");e.exports=r},function(e,t,r){var n=r(376),i=r(377),a=r(378),o=r(379),r=r(380);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=r,e.exports=s},function(e,t,r){var n=r(106);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(382);e.exports=function(e,t){e=e.__data__;return n(t)?e["string"==typeof t?"string":"hash"]:e.map}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},,function(e,t,r){var n=r(395),i=r(143),r=r(184),r=r&&r.isTypedArray,n=r?i(r):n;e.exports=n},function(e,t){e.exports=function(t){return function(e){return t(e)}}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var i=r(146),a=r(29);e.exports=function(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=i(n.prototype),r=n.apply(t,e);return a(r)?r:t}}},function(e,t,r){var n=r(29),i=Object.create;function a(){}e.exports=function(e){if(!n(e))return{};if(i)return i(e);a.prototype=e;e=new a;return a.prototype=void 0,e}},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t=t||Array(n);++r<n;)t[r]=e[r];return t}},function(e,t){e.exports=function(e){return e.placeholder}},function(e,t,r){var n=r(136),i=r(417),a=r(418),o=r(419),s=r(420),r=r(421);function u(e){e=this.__data__=new n(e);this.size=e.size}u.prototype.clear=i,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=r,e.exports=u},function(e,t,r){"use strict";e.exports=r(448)("forEach")},function(e,t,r){"use strict";e.exports=r(471)()?globalThis:r(472)},,function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(103),i=r(68),a=(o.prototype.sendEvent=function(e){return i.a.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:n.a.Skipped})},o.prototype.close=function(e){return i.a.resolve(!0)},o);function o(){}},function(e,t,r){"use strict";r.r(t);var n=r(221);r.d(t,"GlobalHandlers",function(){return n.a});var i=r(219);r.d(t,"TryCatch",function(){return i.a});var a=r(220);r.d(t,"Breadcrumbs",function(){return a.a});var o=r(222);r.d(t,"LinkedErrors",function(){return o.a});var s=r(223);r.d(t,"UserAgent",function(){return s.a})},function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n,i,a=r(3),o=r(300),s=r(303),u=r(10),l=r(53),t=r(302),c=r(231),d=r(176),f=r(68),h=r(118),p=r(299),g=r(301),v=(i=t.a,a.b(E,i),E.prototype._setupTransport=function(){if(!this._options.dsn)return i.prototype._setupTransport.call(this);var e=a.a({},this._options.transportOptions,{dsn:this._options.dsn});return new(this._options.transport||(Object(d.a)()?p:g).a)(e)},E.prototype.eventFromException=function(e,t){var r=t&&t.syntheticException||void 0,r=Object(h.b)(e,r,{attachStacktrace:this._options.attachStacktrace});return Object(u.a)(r,{handled:!0,type:"generic"}),r.level=c.a.Error,t&&t.event_id&&(r.event_id=t.event_id),f.a.resolve(r)},E.prototype.eventFromMessage=function(e,t,r){void 0===t&&(t=c.a.Info);var n=r&&r.syntheticException||void 0,n=Object(h.a)(e,n,{attachStacktrace:this._options.attachStacktrace});return n.level=t,r&&r.event_id&&(n.event_id=r.event_id),f.a.resolve(n)},E),y=r(220),m=r(98),b=(n=s.a,a.b(_,n),_.prototype._prepareEvent=function(e,t,r){return e.platform=e.platform||"javascript",e.sdk=a.a({},e.sdk,{name:m.a,packages:a.d(e.sdk&&e.sdk.packages||[],[{name:"npm:@sentry/browser",version:m.b}]),version:m.b}),n.prototype._prepareEvent.call(this,e,t,r)},_.prototype._sendEvent=function(e){var t=this.getIntegration(y.a);t&&t.addSentryBreadcrumb(e),n.prototype._sendEvent.call(this,e)},_.prototype.showReportDialog=function(e){void 0===e&&(e={});var t,r,n=Object(u.f)().document;n&&(this._isEnabled()?(t=e.dsn||this.getDsn(),e.eventId?t?((r=n.createElement("script")).async=!0,r.src=new o.a(t).getReportDialogEndpoint(e),e.onLoad&&(r.onload=e.onLoad),(n.head||n.body).appendChild(r)):l.a.error("Missing `Dsn` option in showReportDialog call"):l.a.error("Missing `eventId` option in showReportDialog call")):l.a.error("Trying to call showReportDialog with Sentry Client is disabled"))},_);function _(e){return n.call(this,v,e=void 0===e?{}:e)||this}function E(){return null!==i&&i.apply(this,arguments)||this}},function(e,t){e.exports=function(e){return null==e}},function(e,t,r){var c=r(439)("jsonp");e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={});var n,i,a=(t=t||{}).prefix||"__jp",o=t.name||a+d++,s=t.param||"callback",u=null!=t.timeout?t.timeout:6e4,a=encodeURIComponent,t=document.getElementsByTagName("script")[0]||document.head;function l(){n.parentNode&&n.parentNode.removeChild(n),window[o]=f,i&&clearTimeout(i)}return u&&(i=setTimeout(function(){l(),r&&r(new Error("Timeout"))},u)),window[o]=function(e){c("jsonp got",e),l(),r&&r(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+s+"="+a(o)).replace("?&","?"),c('jsonp req "%s"',e),(n=document.createElement("script")).src=e,t.parentNode.insertBefore(n,t),function(){window[o]&&l()}};var d=0;function f(){}},function(e,t,n){"use strict";var i=n(271),a=n(272),o=n(447);e.exports=function(e){var t,r=i(arguments[1]);return r.normalizer||0!==(t=r.length=a(r.length,e.length,r.async))&&(r.primitive?!1===t?r.normalizer=n(482):1<t&&(r.normalizer=n(483)(t)):r.normalizer=!1===t?n(484)():1===t?n(488)():n(489)(t)),r.async&&n(490),r.promise&&n(491),r.dispose&&n(497),r.maxAge&&n(498),r.max&&n(501),r.refCounter&&n(503),o(e,r)}},function(e,t){e.exports=function(){var e,t=[],r=Array.prototype.slice.call(arguments),n=r.length,i=0;if(!n)throw new Error("zip requires at least one argument");for(e=0;e<n;e++){if(!Array.isArray(r[e]))throw new Error("all arguments must be arrays");var a=r[e].length;i<a&&(i=a)}for(e=0;e<i;e++){for(var o=[],s=0;s<n;s++){if(!Array.isArray(r[s]))throw new Error("all arguments must be arrays");o[s]=r[s][e]}t[e]=o}return t}},function(e,t,r){var i=r(192),a=r(86),o=r(20),s=r(108),u=r(75),l=Math.max;e.exports=function(e,t,r,n){e=a(e)?e:u(e),r=r&&!n?s(r):0;n=e.length;return r<0&&(r=l(n+r,0)),o(e)?r<=n&&-1<e.indexOf(t,r):!!n&&-1<i(e,t,r)}},function(e,t,r){var n=r(509);n.Template=r(510).Template,n.template=n.Template,e.exports=n},function(e,t,r){var i=r(283),a=r(113),o=r(525),s=r(22),u=r(127);e.exports=function(e,t,r){var n=s(e)?i:o;return r&&u(e,t,r)&&(t=void 0),n(e,a(t,3))}},function(e,t,r){var n=r(205);e.exports=function(e,t){return n(e,t)}},function(e,t,r){var n=r(537),i=r(538),a=r(292),o=r(539);e.exports=function(e){return n(e)||i(e)||a(e)||o()}},function(e,t,r){var n=r(212);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(543),i=r(544);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},function(t,e,r){var n=r(99),i=r(212),a=r(545),o=r(546);function s(e){var r="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(e)}t.exports=s},function(e,t,r){r=r(592)();e.exports=r},,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(10);function i(e,t){var r="transaction"===e.type,t={body:JSON.stringify(e),url:r?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};return r&&(e=JSON.stringify({event_id:e.event_id,sent_at:new Date(1e3*Object(n.l)()).toISOString()})+"\n"+JSON.stringify({type:e.type})+"\n"+t.body,t.body=e),t}},,,,function(e,t,r){var n=r(78),i=r(247),a=r(148),o=r(125),s=n(function(e,t){var r=o(t,a(s));return i(e,64,void 0,t,r)});s.placeholder={},e.exports=s},function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"c",function(){return n}),r.d(t,"d",function(){return u}),r.d(t,"b",function(){return l});var i=r(53),a=r(10);function o(){if(!("fetch"in Object(a.f)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function s(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function n(){if(!o())return!1;var e=Object(a.f)();if(s(e.fetch))return!0;var t=!1,r=e.document;if(r&&"function"==typeof r.createElement)try{var n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=s(n.contentWindow.fetch)),r.head.removeChild(n)}catch(e){i.a.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function u(){if(!o())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function l(){var e=Object(a.f)(),t=e.chrome,t=t&&t.app&&t.app.runtime,e="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!t&&e}},,function(e,t,r){var n=r(22),i=r(134),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},function(e,t,r){var n=r(365),i=r(381),a=r(383),o=r(384),r=r(385);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=r,e.exports=s},function(e,t,r){r=r(85)(r(46),"Map");e.exports=r},,function(e,t,r){var n=r(387),n=r(238)(n);e.exports=n},function(e,t){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},function(e,a,o){!function(e){var t=o(232),r=a&&!a.nodeType&&a,n=r&&"object"==typeof e&&e&&!e.nodeType&&e,i=n&&n.exports===r&&t.process,t=function(){try{return n&&n.require&&n.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=t}.call(this,o(141)(e))},function(e,t,r){r=r(242)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,r){var n=r(146),r=r(187);function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}i.prototype=n(r.prototype),e.exports=i.prototype.constructor=i},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(249),r=r(256);e.exports=n?function(e){return n.get(e)}:r},function(e,t,r){var n=r(146),r=r(187);function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}i.prototype=n(r.prototype),e.exports=i.prototype.constructor=i},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},function(e,t,r){var n=r(192);e.exports=function(e,t){return!(null==e||!e.length)&&-1<n(e,t,0)}},function(e,t,r){var n=r(408),i=r(409),a=r(410);e.exports=function(e,t,r){return t==t?a(e,t,r):n(e,i,r)}},function(e,t,r){var i=r(194),a=r(106),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var n=e[t];o.call(e,t)&&a(n,r)&&(void 0!==r||t in e)||i(e,t,r)}},function(e,t,r){var n=r(237);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){var n=r(427),r=r(262),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,r=a?function(t){return null==t?[]:(t=Object(t),n(a(t),function(e){return i.call(t,e)}))}:r;e.exports=r},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},function(e,t,r){var n=r(267);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t,r){"use strict";e.exports=r(467)()?Array.from:r(468)},function(e,t,r){"use strict";var i=r(485),a=r(89),o=r(112),s=Array.prototype.indexOf,u=Object.prototype.hasOwnProperty,l=Math.abs,c=Math.floor;e.exports=function(e){var t,r,n;if(!i(e))return s.apply(this,arguments);for(r=a(o(this).length),e=arguments[1],t=e=isNaN(e)?0:0<=e?c(e):a(this.length)-c(l(e));t<r;++t)if(u.call(this,t)&&(n=this[t],i(n)))return t;return-1}},function(n,e,t){"use strict";!function(e,t){function a(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}function r(e){var t,r,n=document.createTextNode(""),i=0;return new e(function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(n.data=i=++i%2;r;)e=r.shift(),r.length||(r=null),e()}).observe(n,{characterData:!0}),function(e){a(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,n.data=i=++i%2)}}n.exports=function(){if("object"==typeof e&&e&&"function"==typeof e.nextTick)return e.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(a(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof WebKitMutationObserver)return r(WebKitMutationObserver)}return"function"==typeof t?function(e){t(a(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(a(e),0)}:null}()}.call(this,t(111),t(152).setImmediate)},,function(e,t,r){var l=r(149),c=r(281),d=r(245),f=r(504),h=r(29),p=r(87),g=r(282);e.exports=function n(i,a,o,s,u){i!==a&&d(a,function(e,t){var r;u=u||new l,h(e)?f(i,a,t,o,n,s,u):(r=s?s(g(i,t),e,t+"",i,a,u):void 0,c(i,t,r=void 0===r?e:r))},p)}},function(e,t,r){var n=r(86),i=r(60);e.exports=function(e){return i(e)&&n(e)}},function(e,t,r){var n=r(78),u=r(127);e.exports=function(s){return n(function(e,t){var r=-1,n=t.length,i=1<n?t[n-1]:void 0,a=2<n?t[2]:void 0,i=3<s.length&&"function"==typeof i?(n--,i):void 0;for(a&&u(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&s(e,o,r,i)}return e})}},function(e,t,r){var o=r(513),s=r(60);e.exports=function e(t,r,n,i,a){return t===r||(null==t||null==r||!s(t)&&!s(r)?t!=t&&r!=r:o(t,r,n,i,e,a))}},function(e,t,r){var n=r(179),i=r(514),r=r(515);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=r,e.exports=a},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},function(e,t,r){var n=r(244),n=r(526)(n);e.exports=n},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,r){var l=r(196),c=r(534);e.exports=function e(t,r,n,i,a){var o=-1,s=t.length;for(n=n||c,a=a||[];++o<s;){var u=t[o];0<r&&n(u)?1<r?e(u,r-1,n,i,a):l(a,u):i||(a[a.length]=u)}return a}},function(r,e){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.exports=n},,function(e,t,r){"use strict";r.r(t);var n=r(114);r.d(t,"BaseTransport",function(){return n.a});var i=r(299);r.d(t,"FetchTransport",function(){return i.a});var a=r(301);r.d(t,"XHRTransport",function(){return a.a})},function(e,t,r){var i=r(202),r=r(204)(function(e,t,r,n){i(e,t,r,n)});e.exports=r},function(e,t,r){var n=r(211);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},,,function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(3),a=r(10),o=r(35),s=r(67),i=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],u=(l.prototype._wrapTimeFunction=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0];return e[0]=Object(s.b)(r,{mechanism:{data:{function:Object(a.e)(n)},handled:!0,type:"instrument"}}),n.apply(this,e)}},l.prototype._wrapRAF=function(t){return function(e){return t.call(this,Object(s.b)(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(a.e)(t)},handled:!0,type:"instrument"}}))}},l.prototype._wrapEventTarget=function(i){var e=Object(a.f)(),e=e[i]&&e[i].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(Object(o.b)(e,"addEventListener",function(n){return function(e,t,r){try{"function"==typeof t.handleEvent&&(t.handleEvent=Object(s.b)(t.handleEvent.bind(t),{mechanism:{data:{function:"handleEvent",handler:Object(a.e)(t),target:i},handled:!0,type:"instrument"}}))}catch(e){}return n.call(this,e,Object(s.b)(t,{mechanism:{data:{function:"addEventListener",handler:Object(a.e)(t),target:i},handled:!0,type:"instrument"}}),r)}}),Object(o.b)(e,"removeEventListener",function(n){return function(e,t,r){try{t=t&&(t.__sentry_wrapped__||t)}catch(e){}return n.call(this,e,t,r)}}))},l.prototype._wrapXHR=function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(function(r){r in n&&"function"==typeof n[r]&&Object(o.b)(n,r,function(e){var t={mechanism:{data:{function:r,handler:Object(a.e)(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(t.mechanism.data.handler=Object(a.e)(e.__sentry_original__)),Object(s.b)(e,t)})}),r.apply(this,e)}},l.prototype.setupOnce=function(){var e=Object(a.f)();this._options.setTimeout&&Object(o.b)(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Object(o.b)(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Object(o.b)(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&Object(o.b)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:i).forEach(this._wrapEventTarget.bind(this))},l.id="TryCatch",l);function l(e){this.name=l.id,this._options=n.a({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(3),a=r(42),i=r(231),o=r(10),s=r(77),u=r(102),l=(c.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Object(a.b)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Object(o.d)(e)},{event:e})},c.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:i.a.fromString(e.level),message:Object(s.b)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(Object(s.b)(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}Object(a.b)().addBreadcrumb(t,{input:e.args,level:e.level})},c.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?Object(o.h)(e.event.target):Object(o.h)(e.event)}catch(e){t="<unknown>"}0!==t.length&&Object(a.b)().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name})},c.prototype._xhrBreadcrumb=function(e){e.endTimestamp&&(e.xhr.__sentry_own_request__||Object(a.b)().addBreadcrumb({category:"xhr",data:e.xhr.__sentry_xhr__,type:"http"},{xhr:e.xhr}))},c.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Object(a.b)().addBreadcrumb({category:"fetch",data:e.fetchData,level:i.a.Error,type:"http"},{data:e.error,input:e.args}):Object(a.b)().addBreadcrumb({category:"fetch",data:n.a({},e.fetchData,{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},c.prototype._historyBreadcrumb=function(e){var t=Object(o.f)(),r=e.from,n=e.to,i=Object(o.k)(t.location.href),e=Object(o.k)(r),t=Object(o.k)(n);e.path||(e=i),i.protocol===t.protocol&&i.host===t.host&&(n=t.relative),i.protocol===e.protocol&&i.host===e.host&&(r=e.relative),Object(a.b)().addBreadcrumb({category:"navigation",data:{from:r,to:n}})},c.prototype.setupOnce=function(){var r=this;this._options.console&&Object(u.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r._consoleBreadcrumb.apply(r,n.d(e))},type:"console"}),this._options.dom&&Object(u.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r._domBreadcrumb.apply(r,n.d(e))},type:"dom"}),this._options.xhr&&Object(u.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r._xhrBreadcrumb.apply(r,n.d(e))},type:"xhr"}),this._options.fetch&&Object(u.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r._fetchBreadcrumb.apply(r,n.d(e))},type:"fetch"}),this._options.history&&Object(u.a)({callback:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r._historyBreadcrumb.apply(r,n.d(e))},type:"history"})},c.id="Breadcrumbs",c);function c(e){this.name=c.id,this._options=n.a({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r(3),o=r(42),a=r(231),i=r(53),s=r(102),u=r(18),l=r(10),c=r(118),d=r(67),f=(h.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(i.a.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(i.a.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},h.prototype._installGlobalOnErrorHandler=function(){var a=this;this._onErrorHandlerInstalled||(Object(s.a)({callback:function(e){var t=e.error,r=Object(o.b)(),n=r.getIntegration(h),i=t&&!0===t.__sentry_own_request__;!n||Object(d.a)()||i||(i=r.getClient(),e=Object(u.i)(t)?a._eventFromIncompleteOnError(e.msg,e.url,e.line,e.column):a._enhanceEventWithInitialFrame(Object(c.b)(t,void 0,{attachStacktrace:i&&i.getOptions().attachStacktrace,rejection:!1}),e.url,e.line,e.column),Object(l.a)(e,{handled:!1,type:"onerror"}),r.captureEvent(e,{originalException:t}))},type:"error"}),this._onErrorHandlerInstalled=!0)},h.prototype._installGlobalOnUnhandledRejectionHandler=function(){var i=this;this._onUnhandledRejectionHandlerInstalled||(Object(s.a)({callback:function(e){var t=e;try{"reason"in e?t=e.reason:"detail"in e&&"reason"in e.detail&&(t=e.detail.reason)}catch(e){}var r=Object(o.b)(),n=r.getIntegration(h),e=t&&!0===t.__sentry_own_request__;if(!n||Object(d.a)()||e)return!0;e=r.getClient(),e=Object(u.i)(t)?i._eventFromIncompleteRejection(t):Object(c.b)(t,void 0,{attachStacktrace:e&&e.getOptions().attachStacktrace,rejection:!0});e.level=a.a.Error,Object(l.a)(e,{handled:!1,type:"onunhandledrejection"}),r.captureEvent(e,{originalException:t})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},h.prototype._eventFromIncompleteOnError=function(e,t,r,n){var i,a=Object(u.e)(e)?e.message:e;return!Object(u.k)(a)||(e=a.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i))&&(i=e[1],a=e[2]),this._enhanceEventWithInitialFrame({exception:{values:[{type:i||"Error",value:a}]}},t,r,n)},h.prototype._eventFromIncompleteRejection=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+e}]}}},h.prototype._enhanceEventWithInitialFrame=function(e,t,r,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];n=isNaN(parseInt(n,10))?void 0:n,r=isNaN(parseInt(r,10))?void 0:r,t=Object(u.k)(t)&&0<t.length?t:Object(l.g)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:n,filename:t,function:"?",in_app:!0,lineno:r}),e},h.id="GlobalHandlers",h);function h(e){this.name=h.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=n.a({onerror:!0,onunhandledrejection:!0},e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var i=r(3),n=r(119),a=r(42),o=r(18),s=r(101),u=r(83),l=(c.prototype.setupOnce=function(){Object(n.b)(function(e,t){var r=Object(a.b)().getIntegration(c);return r?r._handler(e,t):e})},c.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&Object(o.g)(t.originalException,Error)))return e;t=this._walkErrorTree(t.originalException,this._key);return e.exception.values=i.d(t,e.exception.values),e},c.prototype._walkErrorTree=function(e,t,r){if(void 0===r&&(r=[]),!Object(o.g)(e[t],Error)||r.length+1>=this._limit)return r;var n=Object(u.a)(e[t]),n=Object(s.c)(n);return this._walkErrorTree(e[t],t,i.d([n],r))},c.id="LinkedErrors",c);function c(e){void 0===e&&(e={}),this.name=c.id,this._key=e.key||"cause",this._limit=e.limit||5}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(3),i=r(119),a=r(42),r=r(10),o=Object(r.f)(),s=(u.prototype.setupOnce=function(){Object(i.b)(function(e){if(Object(a.b)().getIntegration(u)){if(!o.navigator||!o.location)return e;var t=e.request||{};return t.url=t.url||o.location.href,t.headers=t.headers||{},t.headers["User-Agent"]=o.navigator.userAgent,n.a({},e,{request:t})}return e})},u.id="UserAgent",u);function u(){this.name=u.id}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(42),i=r(53);function a(e,t){!0===t.debug&&i.a.enable();var r=Object(n.b)(),t=new e(t);r.bindClient(t)}},function(e,t,r){var n=r(108);e.exports=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=n(e),function(){if(--e<1)return t.apply(this,arguments)}}},function(e,t,r){var n=[r(40)];void 0===(r="function"==typeof(r=function(o){var e,s,r,n,i,t,a,u;function l(e,t){if(e.indexOf)return e.indexOf(t);for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function c(e,t){t=l(e,t);-1!==t&&e.splice(t,1)}function d(e,t){return"[object "+t+"]"===Object.prototype.toString.call(e)}function f(e){return d(e,"RegExp")}function h(e){return d(e,"Array")}function p(e){return"function"==typeof e}function g(e){return null===e||"null"===e?null:"true"===e||"false"!==e&&(void 0===e||"undefined"===e?void 0:""===e||isNaN(e)?e:parseFloat(e))}function v(){this.bypassed=new o.Signal,this.routed=new o.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function y(e,t,r,n){var i=f(e),a=n.patternLexer;this._router=n,this._pattern=e,this._paramsIds=i?null:a.getParamIds(e),this._optionalParamsIds=i?null:a.getOptionalParamsIds(e),this._matchRegexp=i?e:a.compilePattern(e,n.ignoreCase),this.matched=new o.Signal,this.switched=new o.Signal,t&&this.matched.add(t),this._priority=r||0}return s=""===/t(.+)?/.exec("t")[1],v.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new v},addRoute:function(e,t,r){r=new y(e,t,r,this);return this._sortedInsert(r),r},removeRoute:function(e){c(this._routes,e),e._destroy()},removeAllRoutes:function(){for(var e=this.getNumRoutes();e--;)this._routes[e]._destroy();this._routes.length=0},parse:function(e,t){if(e=e||"",t=t||[],this.ignoreState||e!==this._prevMatchedRequest&&e!==this._prevBypassedRequest){var r,n=this._getMatchedRoutes(e),i=0,a=n.length;if(a)for(this._prevMatchedRequest=e,this._notifyPrevRoutes(n,e),this._prevRoutes=n;i<a;)(r=n[i]).route.matched.dispatch.apply(r.route.matched,t.concat(r.params)),r.isFirst=!i,this.routed.dispatch.apply(this.routed,t.concat([e,r])),i+=1;else this._prevBypassedRequest=e,this.bypassed.dispatch.apply(this.bypassed,t.concat([e]));this._pipeParse(e,t)}},_notifyPrevRoutes:function(e,t){for(var r,n=0;r=this._prevRoutes[n++];)r.route.switched&&this._didSwitch(r.route,e)&&r.route.switched.dispatch(t)},_didSwitch:function(e,t){for(var r,n=0;r=t[n++];)if(r.route===e)return!1;return!0},_pipeParse:function(e,t){for(var r,n=0;r=this._piped[n++];)r.parse(e,t)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(e){for(var t=this._routes,r=t.length;t[--r]&&e._priority<=t[r]._priority;);t.splice(r+1,0,e)},_getMatchedRoutes:function(e){for(var t,r=[],n=this._routes,i=n.length;(t=n[--i])&&((!r.length||this.greedy||t.greedy)&&t.match(e)&&r.push({route:t,params:t._getParamsArray(e)}),this.greedyEnabled||!r.length););return r},pipe:function(e){this._piped.push(e)},unpipe:function(e){c(this._piped,e)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},(e=new v).VERSION="0.12.2",e.NORM_AS_ARRAY=function(e,t){return[t.vals_]},e.NORM_AS_OBJECT=function(e,t){return[t]},y.prototype={greedy:!1,rules:void 0,match:function(e){return this._matchRegexp.test(e=e||"")&&this._validateParams(e)},_validateParams:function(e){var t,r=this.rules,n=this._getParamsObject(e);for(t in r)if("normalize_"!==t&&r.hasOwnProperty(t)&&!this._isValidParam(e,t,n))return!1;return!0},_isValidParam:function(e,t,r){var n=this.rules[t],i=r[t],a=!1,o=0===t.indexOf("?");return null==i&&this._optionalParamsIds&&-1!==l(this._optionalParamsIds,t)?a=!0:f(n)?(o&&(i=r[t+"_"]),a=n.test(i)):h(n)?(o&&(i=r[t+"_"]),a=this._isValidArrayRule(n,i)):p(n)&&(a=n(i,e,r)),a},_isValidArrayRule:function(e,t){if(!this._router.ignoreCase)return-1!==l(e,t);"string"==typeof t&&(t=t.toLowerCase());for(var r,n=e.length;n--;)if(("string"==typeof(r=e[n])?r.toLowerCase():r)===t)return!0;return!1},_getParamsObject:function(e){for(var t,r,n=this._router.shouldTypecast,i=this._router.patternLexer.getParamValues(e,this._matchRegexp,n),a={},o=i.length;o--;)r=i[o],this._paramsIds&&(0===(t=this._paramsIds[o]).indexOf("?")&&r&&(r=function(e,t){for(var r,n,i,a=(e||"").replace("?","").split("&"),o=-1,s={};r=a[++o];)n=r.indexOf("="),i=r.substring(0,n),n=decodeURIComponent(r.substring(n+1)),!1!==t&&(n=g(n)),i in s?h(s[i])?s[i].push(n):s[i]=[s[i],n]:s[i]=n;return s}(a[t+"_"]=r,n),i[o]=r),s&&""===r&&-1!==l(this._optionalParamsIds,t)&&(i[o]=r=void 0),a[t]=r),a[o]=r;return a.request_=n?g(e):e,a.vals_=i,a},_getParamsArray:function(e){var t=this.rules?this.rules.normalize_:null;return(t=t||this._router.normalizeFn)&&p(t)?t(e,this._getParamsObject(e)):this._getParamsObject(e).vals_},interpolate:function(e){e=this._router.patternLexer.interpolate(this._pattern,e);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},v.prototype.patternLexer=(r=/[\\.+*?\^$\[\](){}\/'#]/g,n=/^\/|\/$/g,i=/\/$/g,t=/(?:\{|:)([^}:]+)(?:\}|:)/g,a={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},u=1,function(){var e,t;for(e in a)a.hasOwnProperty(e)&&((t=a[e]).id="__CR_"+e+"__",t.save="save"in t?t.save.replace("{{id}}",t.id):t.id,t.rRestore=new RegExp(t.id,"g"))}(),{strict:function(){u=2},loose:function(){u=1},legacy:function(){u=3},getParamIds:function(e){return m(t,e)},getOptionalParamsIds:function(e){return m(a.OP.rgx,e)},getParamValues:function(e,t,r){e=t.exec(e);return e&&(e.shift(),r&&(e=function(e){for(var t=e.length,r=[];t--;)r[t]=g(e[t]);return r}(e))),e},compilePattern:function(e,t){return(e=e||"")&&(1===u?e=e.replace(n,""):3===u&&(e=e.replace(i,"")),e=b(e,"rgx","save"),e=b(e=e.replace(r,"\\$&"),"rRestore","res"),1===u&&(e="\\/?"+e)),2!==u&&(e+="\\/?"),new RegExp("^"+e+"$",t?"i":"")},interpolate:function(e,s){if(s=s||{},"string"!=typeof e)throw new Error("Route pattern should be a string.");return a.OS.trail||(a.OS.trail=new RegExp("(?:"+a.OS.id+")+$")),e.replace(a.OS.rgx,a.OS.save).replace(t,function(e,t){var r;if(t="?"===t.substr(0,1)?t.substr(1):t,null!=s[t]){if("object"==typeof s[t]){var n,i,a=[];for(i in s[t])if(h(n=s[t][i]))for(var o in n)"[]"==i.slice(-2)?a.push(encodeURI(i.slice(0,-2))+"[]="+encodeURI(n[o])):a.push(encodeURI(i+"="+n[o]));else a.push(encodeURI(i+"="+n));r="?"+a.join("&")}else r=String(s[t]);if(-1===e.indexOf("*")&&-1!==r.indexOf("/"))throw new Error('Invalid value "'+r+'" for segment "'+e+'".')}else{if(-1!==e.indexOf("{"))throw new Error("The segment "+e+" is required.");r=""}return r}).replace(a.OS.trail,"").replace(a.OS.rRestore,"/")}}),e;function m(e,t){var r,n=[];for(e.lastIndex=0;r=e.exec(t);)n.push(r[1]);return n}function b(e,t,r){var n,i;for(i in a)a.hasOwnProperty(i)&&(n=a[i],e=e.replace(n[t],n[r]));return e}})?r.apply(t,n):r)||(e.exports=r)},function(e,t,r){var i=r(530),a=r(531),o=r(113),s=r(22),u=r(127);e.exports=function(e,t,r){var n=s(e)?i:a;return r&&u(e,t,r)&&(t=void 0),n(e,o(t,3))}},function(e,t,r){var n=r(612),i=r(211),a=r(113),o=r(78),s=r(203),u=r(210),o=o(function(e,t){var r=u(t);return s(r)&&(r=void 0),s(e)?n(e,i(t,1,s,!0),a(r,2)):[]});e.exports=o},,function(e,t,r){"use strict";r.r(t),r.d(t,"Severity",function(){return i.a}),r.d(t,"Status",function(){return a.a}),r.d(t,"addGlobalEventProcessor",function(){return o.b}),r.d(t,"addBreadcrumb",function(){return s.a}),r.d(t,"captureException",function(){return s.c}),r.d(t,"captureEvent",function(){return s.b}),r.d(t,"captureMessage",function(){return s.d}),r.d(t,"configureScope",function(){return s.e}),r.d(t,"getHubFromCarrier",function(){return u.c}),r.d(t,"getCurrentHub",function(){return u.b}),r.d(t,"Hub",function(){return u.a}),r.d(t,"makeMain",function(){return u.d}),r.d(t,"Scope",function(){return o.a}),r.d(t,"startTransaction",function(){return s.l}),r.d(t,"setContext",function(){return s.f}),r.d(t,"setExtra",function(){return s.g}),r.d(t,"setExtras",function(){return s.h}),r.d(t,"setTag",function(){return s.i}),r.d(t,"setTags",function(){return s.j}),r.d(t,"setUser",function(){return s.k}),r.d(t,"withScope",function(){return s.m}),r.d(t,"BrowserClient",function(){return l.a}),r.d(t,"defaultIntegrations",function(){return c.b}),r.d(t,"forceLoad",function(){return c.d}),r.d(t,"init",function(){return c.e}),r.d(t,"lastEventId",function(){return c.f}),r.d(t,"onLoad",function(){return c.g}),r.d(t,"showReportDialog",function(){return c.h}),r.d(t,"flush",function(){return c.c}),r.d(t,"close",function(){return c.a}),r.d(t,"wrap",function(){return c.i}),r.d(t,"SDK_NAME",function(){return d.a}),r.d(t,"SDK_VERSION",function(){return d.b}),r.d(t,"Integrations",function(){return g}),r.d(t,"Transports",function(){return p});var n=r(3),i=r(231),a=r(103),o=r(119),s=r(43),u=r(42),l=r(155),c=r(69),d=r(98),f=r(44),h=r(10),t=r(154),p=r(214),r={},h=Object(h.f)();h.Sentry&&h.Sentry.Integrations&&(r=h.Sentry.Integrations);var g=n.a({},r,f.a,t)},function(e,t,r){"use strict";var n,i;r.d(t,"a",function(){return n}),(t=n=n||{}).Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical",(i=n=n||{}).fromString=function(e){switch(e){case"debug":return i.Debug;case"info":return i.Info;case"warn":case"warning":return i.Warning;case"error":return i.Error;case"fatal":return i.Fatal;case"critical":return i.Critical;default:return i.Log}}},function(t,e,r){!function(e){e="object"==typeof e&&e&&e.Object===Object&&e;t.exports=e}.call(this,r(56))},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(235);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(105),i=r(139),a=r(22),o=r(134),n=n?n.prototype:void 0,s=n?n.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t,r){var u=r(140),l=Math.max;e.exports=function(a,o,s){return o=l(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,r=l(e.length-o,0),n=Array(r);++t<r;)n[t]=e[o+t];for(var t=-1,i=Array(o+1);++t<o;)i[t]=e[t];return i[o]=s(n),u(a,this,i)}}},function(e,t,r){var n=r(85),r=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t){var a=Date.now;e.exports=function(r){var n=0,i=0;return function(){var e=a(),t=16-(e-i);if(i=e,0<t){if(800<=++n)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}},function(e,t,r){var n=r(390),i=r(29),a=r(134),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=i(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=n(e);var t=s.test(e);return t||u.test(e)?l(e.slice(2),t?2:8):o.test(e)?NaN:+e}},function(e,t,r){var c=r(392),d=r(123),f=r(22),h=r(124),p=r(109),g=r(142),v=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r,n=f(e),i=!n&&d(e),a=!n&&!i&&h(e),o=!n&&!i&&!a&&g(e),s=n||i||a||o,u=s?c(e.length,String):[],l=u.length;for(r in e)!t&&!v.call(e,r)||s&&("length"==r||a&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||p(r,l))||u.push(r);return u}},function(e,t,r){var n=r(144),i=r(396),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t,r=[];for(t in Object(e))a.call(e,t)&&"constructor"!=t&&r.push(t);return r}},function(e,t){e.exports=function(t,r){return function(e){return t(r(e))}}},function(e,t,r){var s=r(121),u=r(123),l=r(22),c=r(109),d=r(183),f=r(107);e.exports=function(e,t,r){for(var n=-1,i=(t=s(t,e)).length,a=!1;++n<i;){var o=f(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&d(i)&&c(o,i)&&(l(e)||u(e))}},function(e,t,r){var n=r(245),i=r(57);e.exports=function(e,t){return e&&n(e,t,i)}},function(e,t,r){r=r(398)();e.exports=r},function(e,t,r){var n=r(122);e.exports=function(e){return"function"==typeof e?e:n}},function(e,t,r){var h=r(248),p=r(399),g=r(400),v=r(251),y=r(412),m=r(188),b=r(413),_=r(258),E=r(259),w=r(108),k=Math.max;e.exports=function(e,t,r,n,i,a,o,s){var u=2&t;if(!u&&"function"!=typeof e)throw new TypeError("Expected a function");var l,c,d=n?n.length:0;d||(t&=-97,n=i=void 0),o=void 0===o?o:k(w(o),0),s=void 0===s?s:w(s),d-=i?i.length:0,64&t&&(l=n,c=i,n=i=void 0);var f=u?void 0:m(e),o=[e,t,r,n,i,l,c,a,o,s];return f&&b(o,f),e=o[0],t=o[1],r=o[2],n=o[3],i=o[4],!(s=o[9]=void 0===o[9]?u?0:e.length:k(o[9]-d,0))&&24&t&&(t&=-25),r=t&&1!=t?8==t||16==t?g(e,t,s):32!=t&&33!=t||i.length?v.apply(void 0,o):y(e,t,r,n):p(e,t,r),E((f?h:_)(r,o),e,t)}},function(e,t,r){var n=r(122),i=r(249);e.exports=i?function(e,t){return i.set(e,t),e}:n},function(e,t,r){r=r(250),r=r&&new r;e.exports=r},function(e,t,r){r=r(85)(r(46),"WeakMap");e.exports=r},function(e,t,r){var T=r(252),S=r(253),x=r(401),A=r(145),O=r(254),R=r(148),L=r(411),D=r(125),P=r(46);e.exports=function s(u,l,c,d,f,h,p,g,v,y){var m=128&l,b=1&l,_=2&l,E=24&l,w=512&l,k=_?void 0:A(u);return function e(){for(var t,r=arguments.length,n=Array(r),i=r;i--;)n[i]=arguments[i];if(E&&(o=R(e),t=x(n,o)),d&&(n=T(n,d,f,E)),h&&(n=S(n,h,p,E)),r-=t,E&&r<y){var a=D(n,o);return O(u,l,s,e.placeholder,c,n,a,g,v,y-r)}var o=b?c:this,a=_?o[u]:u,r=n.length;return g?n=L(n,g):w&&1<r&&n.reverse(),m&&v<r&&(n.length=v),(a=this&&this!==P&&this instanceof e?k||A(a):a).apply(o,n)}}},function(e,t){var f=Math.max;e.exports=function(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,u=t.length,l=f(a-o,0),c=Array(u+l),d=!n;++s<u;)c[s]=t[s];for(;++i<o;)(d||i<a)&&(c[r[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}},function(e,t){var p=Math.max;e.exports=function(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,u=-1,l=t.length,c=p(a-s,0),d=Array(c+l),f=!n;++i<c;)d[i]=e[i];for(var h=i;++u<l;)d[h+u]=t[u];for(;++o<s;)(f||i<a)&&(d[h+r[o]]=e[i++]);return d}},function(e,t,r){var d=r(255),f=r(258),h=r(259);e.exports=function(e,t,r,n,i,a,o,s,u,l){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);l=[e,t,i,c?a:void 0,c?o:void 0,c?void 0:a,c?void 0:o,s,u,l],r=r.apply(void 0,l);return d(e)&&f(r,l),r.placeholder=n,h(r,e,t)}},function(e,t,r){var n=r(186),i=r(188),a=r(257),o=r(403);e.exports=function(e){var t=a(e),r=o[t];if("function"!=typeof r||!(t in n.prototype))return!1;if(e===r)return!0;r=i(r);return!!r&&e===r[0]}},function(e,t){e.exports=function(){}},function(e,t,r){var o=r(402),s=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",r=o[t],n=s.call(o,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}},function(e,t,r){var n=r(248),n=r(238)(n);e.exports=n},function(e,t,r){var n=r(405),i=r(406),a=r(182),o=r(407);e.exports=function(e,t,r){t+="";return a(e,i(t,o(n(t),r)))}},function(e,t,r){r=r(85)(r(46),"Set");e.exports=r},function(e,a,o){!function(e){var t=o(46),r=a&&!a.nodeType&&a,n=r&&"object"==typeof e&&e&&!e.nodeType&&e,t=n&&n.exports===r?t.Buffer:void 0,i=t?t.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();t=e.length,t=i?i(t):new e.constructor(t);return e.copy(t),t}}.call(this,o(141)(e))},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(196),i=r(185),a=r(195),r=r(262),r=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=i(e);return t}:r;e.exports=r},function(e,t,r){var n=r(265),i=r(195),a=r(57);e.exports=function(e){return n(e,a,i)}},function(e,t,r){var n=r(196),i=r(22);e.exports=function(e,t,r){t=t(e);return i(e)?t:n(t,r(e))}},function(e,t,r){var n=r(265),i=r(263),a=r(87);e.exports=function(e){return n(e,a,i)}},function(e,t,r){r=r(46).Uint8Array;e.exports=r},function(e,t,r){var n=r(197);e.exports=function(e,t){t=t?n(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}},function(e,t,r){var n=r(146),i=r(185),a=r(144);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(i(e))}},function(e,t){e.exports=function(e,t,r){var n=-1,i=e.length;(r=i<r?i:r)<0&&(r+=i),i=r<(t=t<0?i<-t?0:i+t:t)?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}},function(e,t,r){"use strict";var n=r(88),i=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return i.call(arguments,function(e){n(e)&&function(e,t){for(var r in e)t[r]=e[r]}(Object(e),t)}),t}},function(e,t,r){"use strict";var n=r(89);e.exports=function(e,t,r){return isNaN(e)?0<=t?r&&t?t-1:t:1:!1!==e&&n(e)}},function(e,t,r){"use strict";e.exports=r(451)()?Object.assign:r(452)},function(e,t,r){"use strict";function n(e,t){return t}var i,a,o,s,u,l=r(89);try{Object.defineProperty(n,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===n.length?(i={configurable:!0,writable:!1,enumerable:!1},a=Object.defineProperty,e.exports=function(e,t){return t=l(t),e.length===t?e:(i.value=t,a(e,"length",i))}):(s=r(275),u=[],o=function(e){var t,r=0;if(u[e])return u[e];for(t=[];e--;)t.push("a"+(++r).toString(36));return new Function("fn","return function ("+t.join(", ")+") { return fn.apply(this, arguments); };")},e.exports=function(e,t){if(t=l(t),e.length===t)return e;t=o(t)(e);try{s(t,e)}catch(e){}return t})},function(e,t,r){"use strict";var i=r(112),a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols;e.exports=function(t,r){var n,e=Object(i(r));if(t=Object(i(t)),s(e).forEach(function(e){try{a(t,e,o(r,e))}catch(e){n=e}}),"function"==typeof u&&u(e).forEach(function(e){try{a(t,e,o(r,e))}catch(e){n=e}}),void 0!==n)throw n;return t}},function(e,t,r){"use strict";e.exports=function(e){return null!=e}},function(e,t,r){"use strict";var n=r(474);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n=r(79),s=r(150),u=Function.prototype.call;e.exports=function(e,i){var a={},o=arguments[2];return n(i),s(e,function(e,t,r,n){a[t]=u.call(i,o,e,t,r,n)}),a}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=r,e.exports.default=r},function(e,t,r){var n=r(194),i=r(106);e.exports=function(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t,r){var v=r(206),y=r(283),m=r(207);e.exports=function(e,t,r,n,i,a){var o=1&r,s=e.length,u=t.length;if(s!=u&&!(o&&s<u))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var c=-1,d=!0,f=2&r?new v:void 0;for(a.set(e,t),a.set(t,e);++c<s;){var h,p=e[c],g=t[c];if(void 0!==(h=n?o?n(g,p,c,t,e,a):n(p,g,c,e,t,a):h)){if(h)continue;d=!1;break}if(f){if(!y(t,function(e,t){if(!m(f,t)&&(p===e||i(p,e,r,n,a)))return f.push(t)})){d=!1;break}}else if(p!==g&&!i(p,g,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d}},function(e,t,r){var n=r(29);e.exports=function(e){return e==e&&!n(e)}},function(e,t){e.exports=function(t,r){return function(e){return null!=e&&e[t]===r&&(void 0!==r||t in Object(e))}}},function(e,t,r){var n=r(521),i=r(243);e.exports=function(e,t){return null!=e&&i(e,t,n)}},function(e,t,r){var d=r(193),f=r(121),h=r(109),p=r(29),g=r(107);e.exports=function(e,t,r,n){if(!p(e))return e;for(var i=-1,a=(t=f(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var u,l=g(t[i]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;i!=o&&(u=s[l],void 0===(c=n?n(u,l,s):void 0)&&(c=p(u)?u:h(t[i+1])?[]:{})),d(s,l,c),s=s[l]}return e}},function(e,t,r){var h=r(206),p=r(191),g=r(290),v=r(207),y=r(533),m=r(208);e.exports=function(e,t,r){var n=-1,i=p,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=g;else if(200<=a){var l=t?null:y(e);if(l)return m(l);o=!1,i=v,u=new h}else u=t?[]:s;e:for(;++n<a;){var c=e[n],d=t?t(c):c,c=r||0!==c?c:0;if(o&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),s.push(c)}else i(u,d,r)||(u!==s&&u.push(d),s.push(c))}return s}},function(e,t){e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t,r){var n=r(291);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},,function(e,t,r){var u=r(133),l=r(288),c=r(121);e.exports=function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=u(e,o);r(s,o)&&l(a,c(o,e),s)}return a}},function(e,t,r){var n=r(216),i=r(236),a=r(182);e.exports=function(e){return a(i(e,void 0,n),e+"")}},,,function(e,t,r){var n=r(613);e.exports=function(e){var t=e.length;return t?e[n(0,t-1)]:void 0}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n,t=r(3),i=r(171),o=r(103),s=r(10),u=r(176),l=r(68),c=r(53),r=r(114),d=Object(s.f)(),a=(n=r.a,t.b(f,n),f.prototype.sendEvent=function(e){var a=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:e,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var t=Object(i.a)(e,this._api),r={body:t.body,method:"POST",referrerPolicy:Object(u.d)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add(new l.a(function(n,i){d.fetch(t.url,r).then(function(e){var t,r=o.a.fromHttpCode(e.status);r!==o.a.Success?(r===o.a.RateLimit&&(t=Date.now(),a._disabledUntil=new Date(t+Object(s.j)(t,e.headers.get("Retry-After"))),c.a.warn("Too many requests, backing off till: "+a._disabledUntil)),i(e)):n({status:r})}).catch(i)}))},f);function f(){var e=null!==n&&n.apply(this,arguments)||this;return e._disabledUntil=new Date(Date.now()),e}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(631),i=r(35),a=(o.prototype.getDsn=function(){return this._dsnObject},o.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",r=e.port?":"+e.port:"";return t+"//"+e.host+r+(e.path?"/"+e.path:"")+"/api/"},o.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},o.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},o.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},o.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},o.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},o.prototype._encodedAuth=function(){var e={sentry_key:this._dsnObject.user,sentry_version:"7"};return Object(i.e)(e)},o.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},o.prototype.getRequestHeaders=function(e,t){var r=this._dsnObject,n=["Sentry sentry_version=7"];return n.push("sentry_client="+e+"/"+t),n.push("sentry_key="+r.user),r.pass&&n.push("sentry_secret="+r.pass),{"Content-Type":"application/json","X-Sentry-Auth":n.join(", ")}},o.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t,r=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",i=[];for(t in i.push("dsn="+r.toString()),e)if("user"===t){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.length?n+"?"+i.join("&"):n},o);function o(e){this.dsn=e,this._dsnObject=new n.a(e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n,t=r(3),i=r(171),o=r(103),s=r(68),u=r(10),l=r(53),a=(n=r(114).a,t.b(c,n),c.prototype.sendEvent=function(e){var a=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:e,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var t=Object(i.a)(e,this._api);return this._buffer.add(new s.a(function(r,n){var e,i=new XMLHttpRequest;for(e in i.onreadystatechange=function(){var e,t;4===i.readyState&&((e=o.a.fromHttpCode(i.status))!==o.a.Success?(e===o.a.RateLimit&&(t=Date.now(),a._disabledUntil=new Date(t+Object(u.j)(t,i.getResponseHeader("Retry-After"))),l.a.warn("Too many requests, backing off till: "+a._disabledUntil)),n(i)):r({status:e}))},i.open("POST",t.url),a.options.headers)a.options.headers.hasOwnProperty(e)&&i.setRequestHeader(e,a.options.headers[e]);i.send(t.body)}))},c);function c(){var e=null!==n&&n.apply(this,arguments)||this;return e._disabledUntil=new Date(Date.now()),e}},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(53),i=r(73),a=r(153),o=(s.prototype._setupTransport=function(){return new a.a},s.prototype.eventFromException=function(e,t){throw new i.a("Backend has to implement `eventFromException` method")},s.prototype.eventFromMessage=function(e,t,r){throw new i.a("Backend has to implement `eventFromMessage` method")},s.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(e){n.a.error("Error while sending event: "+e)})},s.prototype.getTransport=function(){return this._transport},s);function s(e){this._options=e,this._options.dsn||n.a.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}},function(e,t,r){"use strict";r.d(t,"a",function(){return g});var o=r(3),s=r(119),n=r(631),u=r(18),l=r(53),c=r(68),d=r(10),i=r(35),a=r(77),f=r(42),h=[];function p(e){var t={};return function(e){var t,r,n=e.defaultIntegrations&&o.d(e.defaultIntegrations)||[],e=e.integrations,i=[];Array.isArray(e)?(t=e.map(function(e){return e.name}),r=[],n.forEach(function(e){-1===t.indexOf(e.name)&&-1===r.indexOf(e.name)&&(i.push(e),r.push(e.name))}),e.forEach(function(e){-1===r.indexOf(e.name)&&(i.push(e),r.push(e.name))})):i="function"==typeof e?(i=e(n),Array.isArray(i)?i:[i]):o.d(n);n=i.map(function(e){return e.name});return-1!==n.indexOf("Debug")&&i.push.apply(i,o.d(i.splice(n.indexOf("Debug"),1))),i}(e).forEach(function(e){t[e.name]=e,e=e,-1===h.indexOf(e.name)&&(e.setupOnce(s.b,f.b),h.push(e.name),l.a.log("Integration installed: "+e.name))}),t}var g=(v.prototype.captureException=function(e,t,r){var n=this,i=t&&t.event_id;return this._processing=!0,this._getBackend().eventFromException(e,t).then(function(e){i=n.captureEvent(e,t,r)}),i},v.prototype.captureMessage=function(e,t,r,n){var i=this,a=r&&r.event_id;return this._processing=!0,(Object(u.i)(e)?this._getBackend().eventFromMessage(""+e,t,r):this._getBackend().eventFromException(e,r)).then(function(e){a=i.captureEvent(e,r,n)}),a},v.prototype.captureEvent=function(e,t,r){var n=this,i=t&&t.event_id;return this._processing=!0,this._processEvent(e,t,r).then(function(e){i=e&&e.event_id,n._processing=!1}).then(null,function(e){l.a.error(e),n._processing=!1}),i},v.prototype.getDsn=function(){return this._dsn},v.prototype.getOptions=function(){return this._options},v.prototype.flush=function(e){var r=this;return this._isClientProcessing(e).then(function(t){return clearInterval(t.interval),r._getBackend().getTransport().close(e).then(function(e){return t.ready&&e})})},v.prototype.close=function(e){var t=this;return this.flush(e).then(function(e){return t.getOptions().enabled=!1,e})},v.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=p(this._options))},v.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return l.a.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},v.prototype._isClientProcessing=function(n){var i=this;return new c.a(function(e){var t=0,r=0;clearInterval(r),r=setInterval(function(){i._processing?(t+=1,n&&n<=t&&e({interval:r,ready:!1})):e({interval:r,ready:!0})},1)})},v.prototype._getBackend=function(){return this._backend},v.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},v.prototype._prepareEvent=function(e,t,r){var n=this,i=this.getOptions().normalizeDepth,a=void 0===i?3:i,i=o.a({},e,{event_id:e.event_id||(r&&r.event_id?r.event_id:Object(d.m)()),timestamp:e.timestamp||Object(d.l)()});this._applyClientOptions(i),this._applyIntegrationsMetadata(i);e=t;r&&r.captureContext&&(e=s.a.clone(e).update(r.captureContext));t=c.a.resolve(i);return(t=e?e.applyToEvent(i,r):t).then(function(e){return"number"==typeof a&&0<a?n._normalizeEvent(e,a):e})},v.prototype._normalizeEvent=function(e,t){if(!e)return null;var r=o.a({},e,e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return o.a({},e,e.data&&{data:Object(i.c)(e.data,t)})})},e.user&&{user:Object(i.c)(e.user,t)},e.contexts&&{contexts:Object(i.c)(e.contexts,t)},e.extra&&{extra:Object(i.c)(e.extra,t)});return e.contexts&&e.contexts.trace&&(r.contexts.trace=e.contexts.trace),r},v.prototype._applyClientOptions=function(e){var t=this.getOptions(),r=t.environment,n=t.release,i=t.dist,t=t.maxValueLength,t=void 0===t?250:t;void 0===e.environment&&void 0!==r&&(e.environment=r),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=Object(a.d)(e.message,t));i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=Object(a.d)(i.value,t));e=e.request;e&&e.url&&(e.url=Object(a.d)(e.url,t))},v.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,e=Object.keys(this._integrations);t&&0<e.length&&(t.integrations=e)},v.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},v.prototype._processEvent=function(e,i,t){var a=this,r=this.getOptions(),o=r.beforeSend,r=r.sampleRate;if(!this._isEnabled())return c.a.reject("SDK not enabled, will not send event.");var s="transaction"===e.type;return!s&&"number"==typeof r&&Math.random()>r?c.a.reject("This event has been sampled, will not send event."):new c.a(function(r,n){a._prepareEvent(e,t,i).then(function(e){if(null!==e){var t=e;if(i&&i.data&&!0===i.data.__sentry__||!o||s)return a._sendEvent(t),void r(t);e=o(e,i);if(void 0===e)l.a.error("`beforeSend` method has to return `null` or a valid event.");else if(Object(u.m)(e))a._handleAsyncBeforeSend(e,r,n);else{if(null===(t=e))return l.a.log("`beforeSend` returned `null`, will not send event."),void r(null);a._sendEvent(t),r(t)}}else n("An event processor returned null, will not send event.")}).then(null,function(e){a.captureException(e,{data:{__sentry__:!0},originalException:e}),n("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)})})},v.prototype._handleAsyncBeforeSend=function(e,t,r){var n=this;e.then(function(e){null!==e?(n._sendEvent(e),t(e)):r("`beforeSend` returned `null`, will not send event.")}).then(null,function(e){r("beforeSend rejected with "+e)})},v);function v(e,t){this._integrations={},this._processing=!1,this._backend=new e(t),(this._options=t).dsn&&(this._dsn=new n.a(t.dsn))}},,function(e,t,r){var n=r(386),r=r(78)(function(e,t){return n(e,1,t)});e.exports=r},function(e,t){e.exports=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n}},function(e,t,r){var n=r(244),i=r(246);e.exports=function(e,t){return e&&n(e,i(t))}},,function(e,t,r){var n=r(241),i=r(126),a=r(123),o=r(22),s=r(86),u=r(124),l=r(144),c=r(142),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||c(e)||a(e)))return!e.length;var t,r=i(e);if("[object Map]"==r||"[object Set]"==r)return!e.size;if(l(e))return!n(e).length;for(t in e)if(d.call(e,t))return!1;return!0}},function(e,t,r){var i=r(270),a=r(127),o=r(108);e.exports=function(e,t,r){var n=null==e?0:e.length;return n?(r=r&&"number"!=typeof r&&a(e,t,r)?(t=0,n):(t=null==t?0:o(t),void 0===r?n:o(r)),i(e,t,r)):[]}},function(e,t,r){var s=r(113),u=r(527);e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=s(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return u(e,i),r}},function(e,t,r){var n=r(289);e.exports=function(e){return e&&e.length?n(e):[]}},function(e,t,r){var i=r(192),a=r(108),o=Math.max;e.exports=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;r=null==r?0:a(r);return r<0&&(r=o(n+r,0)),i(e,t,r)}},,function(e,t,r){var n=r(584),r=r(295)(function(e,t){return null==e?{}:n(e,t)});e.exports=r},,,,,,,,,,,,,,,,,,,function(e,t,r){var n=r(211),i=r(113),a=r(78),o=r(289),s=r(203),u=r(210),a=a(function(e){var t=u(e);return s(t)&&(t=void 0),o(n(e,1,s,!0),i(t,2))});e.exports=a},,,function(e,t,r){var n=r(139),i=r(113),a=r(294),o=r(266);e.exports=function(e,r){if(null==e)return{};var t=n(o(e),function(e){return[e]});return r=i(r),a(e,t,function(e,t){return r(e,t[0])})}},,,,,,,,function(e,t,r){var n=r(190),i=r(209),a=r(246),o=r(22);e.exports=function(e,t){return(o(e)?n:i)(e,a(t))}},function(e,t,r){var n=r(298),i=r(614),a=r(22);e.exports=function(e){return(a(e)?n:i)(e)}},,,function(e,t,r){e.exports=function n(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){0;var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}r=a[t]={exports:{}};i[t][0].call(r.exports,function(e){return s(i[t][1][e]||e)},r,r.exports,n,i,a,o)}return a[t].exports}for(var e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(c(r=this._events[e]))return!1;if(u(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(l(r))for(i=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,a=0;a<n;a++)o[a].apply(this,i);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var r;if(!u(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,u(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(r=c(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){if(!u(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,i,a;if(!u(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||u(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(u(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?u(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(u(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}n=this.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=s.normalizePath(n.path),s.buildURLFromParts(n)):t;var i=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");!i.netLoc&&i.path&&"/"!==i.path[0]&&(a=o.exec(i.path),i.netLoc=a[1],i.path=a[2]),i.netLoc&&!i.path&&(i.path="/");var a,e={scheme:i.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(e.netLoc=i.netLoc,"/"===n.path[0])||(n.path?(a=(a=i.path).substring(0,a.lastIndexOf("/")+1)+n.path,e.path=s.normalizePath(a)):(e.path=i.path,n.params||(e.params=i.params,n.query||(e.query=i.query)))),null===e.path&&(e.path=r.alwaysNormalize?s.normalizePath(n.path):n.path),s.buildURLFromParts(e)},parseURL:function(e){e=n.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof r&&"object"==typeof t?t.exports=s:"object"==typeof r?r.URLToolkit=s:this.URLToolkit=s},{}],3:[function(e,t,r){var f=arguments[3],h=arguments[4],p=arguments[5],g=JSON.stringify;t.exports=function(e,t){for(var r=Object.keys(p),n=0,i=r.length;n<i;n++){var a=r[n],o=p[a].exports;if(o===e||o&&o.default===e){s=a;break}}if(!s){for(var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={},n=0,i=r.length;n<i;n++)u[a=r[n]]=a;h[s]=[Function(["require","module","exports"],"("+e+")(self)"),u]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[s]=s,h[l]=[Function(["require"],"var f = require("+g(s)+");(f.default ? f.default : f)(self);"),c];var d={};!function e(t){for(var r in d[t]=!0,h[t][1]){r=h[t][1][r];d[r]||e(r)}}(l);c="("+f+")({"+Object.keys(d).map(function(e){return g(e)+":["+h[e][0]+","+g(h[e][1])+"]"}).join(",")+"},{},["+g(l)+"])",l=window.URL||window.webkitURL||window.mozURL||window.msURL,c=new Blob([c],{type:"text/javascript"});if(t&&t.bare)return c;l=l.createObjectURL(c),c=new Worker(l);return c.objectURL=l,c}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var n=h(e(5)),i=h(e(8)),a=h(e(9)),o=h(e(10)),s=h(e(59)),u=h(e(7)),l=h(e(6)),c=h(e(50)),d=h(e(16)),f=h(e(15)),e=h(e(14));function h(e){return e&&e.__esModule?e:{default:e}}r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:a.default,fpsController:o.default,audioStreamController:l.default,audioTrackController:u.default,subtitleStreamController:e.default,subtitleTrackController:f.default,timelineController:d.default,cueHandler:c.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,14:14,15:15,16:16,5:5,50:50,59:59,6:6,7:7,8:8,9:9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},v=u(e(35)),i=u(e(34)),y=u(e(37)),a=e(33),m=e(54),o=u(e(52));function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,i.default),n(l,[{key:"destroy",value:function(){this.clearTimer(),i.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t,r,n,i,a=e.frag;"main"===a.type&&(this.timer||(this.timer=setInterval(this.onCheck,100)),this._bwEstimator||(t=this.hls,i=e.frag.level,r=t.levels[i].details.live,n=t.config,i=e=void 0,i=r?(e=n.abrEwmaFastLive,n.abrEwmaSlowLive):(e=n.abrEwmaFastVoD,n.abrEwmaSlowVoD),this._bwEstimator=new o.default(t,i,e,n.abrEwmaDefaultEstimate)),this.fragCurrent=a)}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,n=r.loader,i=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return m.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=n.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*r.duration/s){var u=e.levels,l=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),c=u[r.level],d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,c=a.total||Math.max(a.loaded,Math.round(r.duration*d/8)),d=t.currentTime,c=(c-a.loaded)/l,f=(y.default.bufferInfo(t,d,e.config.maxBufferHole).end-d)/s;if(f<2*r.duration/s&&f<c){for(var h=void 0,p=void 0,p=r.level-1;i<p;p--){var g=u[p].realBitrate?Math.max(u[p].realBitrate,u[p].bitrate):u[p].bitrate;if((h=r.duration*g/(6.4*l))<f)break}h<c&&(m.logger.warn("loading too slow, abort fragment loading and switch to level "+p+":fragLoadedDelay["+p+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+h.toFixed(1)+"<"+c.toFixed(1)+":"+f.toFixed(1)),e.nextLoadLevel=p,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),e.trigger(v.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t,r,n=e.frag;"main"!==n.type||isNaN(n.sn)||(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(n=((t=this.hls.levels[n.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,r=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:n,duration:r},t.realBitrate=Math.round(8*n/r)),e.frag.bitrateTest&&((r=e.stats).tparsed=r.tbuffered=r.tload,this.onFragBuffered(e)))}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;!0===t.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered||(e=t.tparsed-t.trequest,m.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(e,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)}},{key:"onError",value:function(e){switch(e.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,r,n,i,a,o,s,u){for(var l=i;n<=l;l--){var c=u[l].details,d=c?c.totalduration/c.fragments.length:t,f=!!c&&c.live,h=l<=e?o*r:s*r,p=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,c=p*d/h;if(m.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(h)+"/"+p+"/"+d+"/"+a+"/"+c),p<h&&(!c||f&&!this.bitrateTestDelay||c<a))return l}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this._nextABRAutoLevel;return t=-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(y.default.bufferInfo(a,u,n.maxBufferHole).end-u)/l,f=this._findBestLevel(o,s,c,i,t,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(0<=f)return f;m.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");e=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,a=n.abrBandWidthFactor,u=n.abrBandWidthUpFactor;return 0!=d||(l=this.bitrateTestDelay)&&(e=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-l,m.logger.trace("bitrate test took "+Math.round(1e3*l)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),a=u=1),f=this._findBestLevel(o,s,c,i,t,d+e,a,u,r),Math.max(f,0)}}]),n=l;function l(e){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,v.default.FRAG_LOADING,v.default.FRAG_LOADED,v.default.FRAG_BUFFERED,v.default.ERROR));return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(t),t}r.default=n},{33:33,34:34,35:35,37:37,52:52,54:54}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},_=s(e(48)),E=s(e(37)),c=s(e(25)),w=s(e(35)),i=s(e(34)),u=s(e(38)),a=s(e(55)),k=e(33),T=e(54),S=e(51);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}var l="STOPPED",x="IDLE",A="KEY_LOADING",O="FRAG_LOADING",R="FRAG_LOADING_WAITING_RETRY",L="WAITING_TRACK",d="PARSING",f="PARSED",D="BUFFER_FLUSHING",P="ERROR",C="WAITING_INIT_PTS",n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,i.default),n(h,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),i.default.prototype.destroy.call(this),this.state=l}},{key:"onInitPtsFound",value:function(e){var t=e.id,r=e.frag.cc,e=e.initPTS;"main"===t&&(this.initPTS[r]=e,this.videoTrackCC=r,T.logger.log("InitPTS for cc:"+r+" found from video track:"+e),this.state===C&&this.tick())}},{key:"startLoad",value:function(e){var t;this.tracks?(t=this.lastCurrentTime,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),(this.fragLoadError=0)<t&&-1===e?(T.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=x):(this.lastCurrentTime=this.startPosition||e,this.state="STARTING"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.startPosition=e,this.state=l)}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=l}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r=this.hls,n=r.config;switch(this.state){case P:case"PAUSED":case D:break;case"STARTING":this.state=L,this.loadedmetadata=!1;break;case x:var i=this.tracks;if(!i)break;if(!this.media&&(this.startFragRequested||!n.startFragPrefetch))break;if(this.loadedmetadata)y=this.media.currentTime;else if(void 0===(y=this.nextLoadPosition))break;var a=this.mediaBuffer||this.media,o=E.default.bufferInfo(a,y,n.maxBufferHole),s=o.len,u=o.end,l=this.fragPrevious,c=n.maxMaxBufferLength,d=this.audioSwitch,f=this.trackId;if((s<c||d)&&f<i.length){if(void 0===(t=i[f].details)){this.state=L;break}if(!d&&!t.live&&l&&l.sn===t.endSN&&(!this.media.seeking||this.media.duration-u<l.duration/2)){this.hls.trigger(w.default.BUFFER_EOS,{type:"audio"}),this.state="ENDED";break}var h=t.fragments,s=h.length,c=h[0].start,i=h[s-1].start+h[s-1].duration,p=void 0;if(d)if(t.live&&!t.PTSKnown)T.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),u=0;else if(u=y,t.PTSKnown&&y<c){if(!(o.end>c||o.nextStart))return;T.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=c+.05}if(t.initSegment&&!t.initSegment.data)p=t.initSegment;else if(u<=c){if(p=h[0],null!==this.videoTrackCC&&p.cc!==this.videoTrackCC&&(p=(0,S.findFragWithCC)(h,this.videoTrackCC)),t.live&&p.loadIdx&&p.loadIdx===this.fragLoadIdx){var g=o.nextStart||c;return T.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(g+.05)),void(this.media.currentTime=g+.05)}}else{var d=void 0,v=n.maxFragLookUpTolerance,o=l?h[l.sn-h[0].sn+1]:void 0,g=function(e){var t=Math.min(v,e.duration);return e.start+e.duration-t<=u?1:e.start-t>u&&e.start?-1:0};(d=u<i?(i-v<u&&(v=0),o&&!g(o)?o:_.default.search(h,g)):h[s-1])&&(c=(p=d).start,l&&p.level===l.level&&p.sn===l.sn&&(p.sn<t.endSN?(p=h[p.sn+1-t.startSN],T.logger.log("SN just loaded, load next one: "+p.sn)):p=null))}if(p)if(p.decryptdata&&null!=p.decryptdata.uri&&null==p.decryptdata.key)T.logger.log("Loading key for "+p.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+f),this.state=A,r.trigger(w.default.KEY_LOADING,{frag:p});else{if(T.logger.log("Loading "+p.sn+", cc: "+p.cc+" of ["+t.startSN+" ,"+t.endSN+"],track "+f+", currentTime:"+y+",bufferEnd:"+u.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,p.loadCounter){p.loadCounter++;var y=n.fragLoadingLoopThreshold;if(p.loadCounter>y&&Math.abs(this.fragLoadIdx-p.loadIdx)<y)return void r.trigger(w.default.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:p})}else p.loadCounter=1;p.loadIdx=this.fragLoadIdx,this.fragCurrent=p,this.startFragRequested=!0,isNaN(p.sn)||(this.nextLoadPosition=p.start+p.duration),r.trigger(w.default.FRAG_LOADING,{frag:p}),this.state=O}}break;case L:(e=this.tracks[this.trackId])&&e.details&&(this.state=x);break;case R:var m=performance.now(),p=this.retryDate,b=(a=this.media)&&a.seeking;(!p||p<=m||b)&&(T.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=x);break;case C:m=this.videoTrackCC;if(void 0===this.initPTS[m])break;b=this.waitingFragment;b?m!==(b=b.frag.cc)?(e=this.tracks[this.trackId]).details&&e.details.live&&(T.logger.warn("Waiting fragment CC ("+b+") does not match video track CC ("+m+")"),this.waitingFragment=null,this.state=x):(this.state=O,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null):this.state=x}}},{key:"onMediaAttached",value:function(e){e=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);e=this.config;this.tracks&&e.autoStartLoad&&this.startLoad(e.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(T.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){"ENDED"===this.state&&(this.state=x),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){T.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state="PAUSED",this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=x,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,r=e.id,n=this.tracks[r],i=t.totalduration,e=0;T.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live?(i=n.details)&&0<t.fragments.length?(u.default.mergeDetails(i,t),e=t.fragments[0].start,t.PTSKnown?T.logger.log("live audio playlist sliding:"+e.toFixed(3)):T.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,T.logger.log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,n.details=t,this.startFragRequested||(-1===this.startPosition&&(t=t.startTimeOffset,isNaN(t)?this.startPosition=0:(T.logger.log("start time offset found in playlist, adjust startPosition to "+t),this.startPosition=t)),this.nextLoadPosition=this.startPosition),this.state===L&&(this.state=x),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===A&&(this.state=x,this.tick())}},{key:"onFragLoaded",value:function(e){var t,r,n,i,a,o,s,u=this.fragCurrent,l=e.frag;this.state===O&&u&&"audio"===l.type&&l.level===u.level&&l.sn===u.sn&&(r=(t=(s=this.tracks[this.trackId]).details).totalduration,n=u.level,i=u.sn,a=u.cc,o=this.config.defaultAudioCodec||s.audioCodec||"mp4a.40.2",l=this.stats=e.stats,"initSegment"===i?(this.state=x,l.tparsed=l.tbuffered=performance.now(),t.initSegment.data=e.payload,this.hls.trigger(w.default.FRAG_BUFFERED,{stats:l,frag:u,id:"audio"}),this.tick()):(this.state=d,this.appended=!1,this.demuxer||(this.demuxer=new c.default(this.hls,"audio")),s=this.initPTS[a],l=t.initSegment?t.initSegment.data:[],t.initSegment||void 0!==s?(this.pendingBuffering=!0,T.logger.log("Demuxing "+i+" of ["+t.startSN+" ,"+t.endSN+"],track "+n),this.demuxer.push(e.payload,l,o,null,u,r,!1,s)):(T.logger.log("unknown video PTS for continuity counter "+a+", waiting for video PTS before demuxing audio frag "+i+" of ["+t.startSN+" ,"+t.endSN+"],track "+n),this.waitingFragment=e,this.state=C))),this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===d&&(r=void 0,(t=e.tracks).video&&delete t.video,(r=t.audio)&&(r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(w.default.BUFFER_CODECS,t),T.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]"),(r=r.initSegment)&&(r={type:"audio",data:r,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[r]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(w.default.BUFFER_APPENDING,r))),this.tick()))}},{key:"onFragParsingData",value:function(t){var e,r,n,i,a=this,o=this.fragCurrent,s=t.frag;o&&"audio"===t.id&&"audio"===t.type&&s.sn===o.sn&&s.level===o.level&&this.state===d&&(e=this.trackId,n=this.tracks[e],r=this.hls,isNaN(t.endPTS)&&(t.endPTS=t.startPTS+o.duration,t.endDTS=t.startDTS+o.duration),T.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),u.default.updateFragPTSDTS(n.details,o,t.startPTS,t.endPTS),s=this.audioSwitch,n=this.media,o=!1,s&&n&&(n.readyState?(n=n.currentTime,T.logger.log("switching audio track : currentTime:"+n),n>=t.startPTS&&(T.logger.log("switching audio track : flushing all audio"),this.state=D,r.trigger(w.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.audioSwitch=!(o=!0),r.trigger(w.default.AUDIO_TRACK_SWITCHED,{id:e}))):(this.audioSwitch=!1,r.trigger(w.default.AUDIO_TRACK_SWITCHED,{id:e}))),i=this.pendingData,this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&i.push({type:t.type,data:e,parent:"audio",content:"data"})}),!o&&i.length&&(i.forEach(function(e){a.state===d&&(a.pendingBuffering=!0,a.hls.trigger(w.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick())}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===d&&(this.stats.tparsed=performance.now(),this.state=f,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){e=e.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){var t;"audio"===e.parent&&((t=this.state)!==d&&t!==f||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))}},{key:"_checkAppendedParsed",value:function(){var e,t,r;this.state!==f||this.appended&&this.pendingBuffering||(r=this.fragCurrent,e=this.stats,t=this.hls,r&&(this.fragPrevious=r,e.tbuffered=performance.now(),t.trigger(w.default.FRAG_BUFFERED,{stats:e,frag:r,id:"audio"}),r=this.mediaBuffer||this.media,T.logger.log("audio buffered : "+a.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,t.trigger(w.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=x),this.tick())}},{key:"onError",value:function(e){var t,r,n,i=e.frag;if(!i||"audio"===i.type)switch(e.details){case k.ErrorDetails.FRAG_LOAD_ERROR:case k.ErrorDetails.FRAG_LOAD_TIMEOUT:e.fatal||((t=this.fragLoadError)?t++:t=1,t<=(r=this.config).fragLoadingMaxRetry?(this.fragLoadError=t,i.loadCounter=0,n=Math.min(Math.pow(2,t-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout),T.logger.warn("audioStreamController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.state=R):(T.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=P));break;case k.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case k.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case k.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case k.ErrorDetails.KEY_LOAD_ERROR:case k.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==P&&(this.state=e.fatal?P:x,T.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case k.ErrorDetails.BUFFER_FULL_ERROR:"audio"!==e.parent||this.state!==d&&this.state!==f||(r=this.mediaBuffer,n=this.media.currentTime,r&&E.default.isBuffered(r,n)&&E.default.isBuffered(r,n+.5)?((n=this.config).maxMaxBufferLength>=n.maxBufferLength&&(n.maxMaxBufferLength/=2,T.logger.warn("audio:reduce max buffer length to "+n.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.state=x):(T.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=D,this.hls.trigger(w.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})))}}},{key:"onBufferFlushed",value:function(){var t=this,e=this.pendingData;e&&e.length?(T.logger.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(w.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=f):(this.state=x,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,T.logger.log("audio stream:"+t+"->"+e))},get:function(){return this._state}}]),h);function h(e){!function(e){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,w.default.MEDIA_ATTACHED,w.default.MEDIA_DETACHING,w.default.AUDIO_TRACKS_UPDATED,w.default.AUDIO_TRACK_SWITCHING,w.default.AUDIO_TRACK_LOADED,w.default.KEY_LOADED,w.default.FRAG_LOADED,w.default.FRAG_PARSING_INIT_SEGMENT,w.default.FRAG_PARSING_DATA,w.default.FRAG_PARSED,w.default.ERROR,w.default.BUFFER_CREATED,w.default.BUFFER_APPENDED,w.default.BUFFER_FLUSHED,w.default.INIT_PTS_FOUND));return t.config=e.config,t.audioCodecSwap=!1,t.ticks=0,t._state=l,t.ontick=t.tick.bind(t),t.initPTS=[],t.waitingFragment=null,t.videoTrackCC=null,t}r.default=n},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,51:51,54:54,55:55}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},a=l(e(35)),i=l(e(34)),o=e(54),s=e(33);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(c,i.default),n(c,[{key:"destroy",value:function(){this.cleanTimer(),i.default.prototype.destroy.call(this)}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onError",value:function(e){e.fatal&&e.type===s.ErrorTypes.NETWORK_ERROR&&this.cleanTimer()}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,e=e.audioTracks||[],r=!1;this.tracks=e,this.hls.trigger(a.default.AUDIO_TRACKS_UPDATED,{audioTracks:e});var n=0;e.forEach(function(e){return e.default&&!r?(t.audioTrack=n,void(r=!0)):void n++}),!1===r&&e.length&&(o.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(o.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())}},{key:"setAudioTrackInternal",value:function(e){var t,r,n,i;0<=e&&e<this.tracks.length&&(this.cleanTimer(),this.trackId=e,o.logger.log("switching to audioTrack "+e),i=this.tracks[e],t=this.hls,n=i.type,r=i.url,t.trigger(a.default.AUDIO_TRACK_SWITCH,n={id:e,type:n,url:r}),t.trigger(a.default.AUDIO_TRACK_SWITCHING,n),i=i.details,!r||void 0!==i&&!0!==i.live||(o.logger.log("(re)loading playlist for audioTrack "+e),t.trigger(a.default.AUDIO_TRACK_LOADING,{url:r,id:e})))}},{key:"updateTrack",value:function(e){var t,r;0<=e&&e<this.tracks.length&&(this.cleanTimer(),this.trackId=e,o.logger.log("updating audioTrack "+e),t=(r=this.tracks[e]).url,r=r.details,!t||void 0!==r&&!0!==r.live||(o.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(a.default.AUDIO_TRACK_LOADING,{url:t,id:e})))}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),n=c;function c(e){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,a.default.MANIFEST_LOADING,a.default.MANIFEST_LOADED,a.default.AUDIO_TRACK_LOADED,a.default.ERROR));return e.ticks=0,e.ontick=e.tick.bind(e),e}r.default=n},{33:33,34:34,35:35,54:54}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},u=o(e(35)),i=o(e(34)),d=e(54),l=e(33);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,i.default),n(s,[{key:"destroy",value:function(){i.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){t=this.sourceBuffer.audio;if(.1<Math.abs(t.timestampOffset-e.start)){r=t.updating;try{t.abort()}catch(e){r=!0,d.logger.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(d.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.start),t.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video||e.levels.length&&e.audio,n=0;e.altAudio&&(t||r)&&d.logger.log((n=(t?1:0)+(r?1:0))+" sourceBuffer(s) expected"),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;t&&(e=this.mediaSource=new MediaSource,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),e.addEventListener("sourceopen",this.onmso),e.addEventListener("sourceended",this.onmse),e.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(e))}},{key:"onMediaDetaching",value:function(){d.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){d.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(u.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){d.logger.log("media source opened"),this.hls.trigger(u.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){d.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){d.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){this.audioTimestampOffset&&(e=this.sourceBuffer.audio,d.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset),this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var r=this.parent,e=this.segments.reduce(function(e,t){return t.parent===r?e+1:e},0);this.hls.trigger(u.default.BUFFER_APPENDED,{parent:r,pending:e}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){d.logger.error("sourceBuffer error:",e),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e,t=this.sourceBuffer;for(e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t,r=this.sourceBuffer,n=this.mediaSource;for(t in e)if(!r[t]){var i=e[t],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;d.logger.log("creating sourceBuffer("+o+")");try{var s=r[t]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[t]={codec:a,container:i.container},i.buffer=s}catch(e){d.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){d.logger.error("sourceBuffer error:",e.event),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t,r=this.sourceBuffer,n=e.type;for(t in r)n&&t!==n||r[t].ended||(r[t].ended=!0,d.logger.log(t+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){r=e[r];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}d.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){d.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){e=e.details;0!==e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var i in r)if(r[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);e=e.duration;(n>this._msDuration&&e<n||e===1/0||isNaN(e))&&(d.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){d.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void d.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending&&(r&&r.length)){var n=r.shift();try{var i=t[n.type];i?i.updating?r.unshift(n):(i.ended=!1,this.parent=n.parent,i.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){d.logger.error("error while trying to append buffer:"+t.message),r.unshift(n);n={type:l.ErrorTypes.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],n.details=l.ErrorDetails.BUFFER_FULL_ERROR,n.fatal=!1,void e.trigger(u.default.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return d.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],n.fatal=!0,void e.trigger(u.default.ERROR,n);n.fatal=!1,e.trigger(u.default.ERROR,n)}}}}},{key:"flushBuffer",value:function(e,t,r){var n,i,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(d.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in l)if(!r||c===r){if((n=l[c]).ended=!1,n.updating)return d.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(a=n.buffered.start(i),o=n.buffered.end(i),u=-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,t):(s=Math.max(a,e),Math.min(o,t)),.5<Math.min(u,o)-s)return this.flushBufferCounter++,d.logger.log("flush "+c+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),n.remove(s,u),!1}catch(e){d.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else d.logger.warn("abort flushing too many retries");d.logger.log("buffer flushed")}return!0}}]),n=s;function s(e){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED));return e._msDuration=null,e._levelDuration=null,e.onsbue=e.onSBUpdateEnd.bind(e),e.onsbe=e.onSBUpdateError.bind(e),e.pendingTracks={},e.tracks={},e}r.default=n},{33:33,34:34,35:35,54:54}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},i=o(e(35));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,o(e(34)).default),n(s,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){s.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)}},{key:"getMaxLevel",value:function(r){var n=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return s.isLevelAllowed(t,n.restrictedLevels)&&t<=r});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=s.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=s.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e){return-1===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,r){if(!e||!e.length)return-1;for(var n,i=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=r)&&(!(n=e[a+1])||o.width!==n.width||o.height!==n.height)){i=a;break}}return i}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),n=s;function s(e){return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED))}r.default=n},{34:34,35:35}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},u=o(e(35)),i=o(e(34)),l=e(54);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,i.default),n(s,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,r){var n,i,a,o,s=performance.now();t&&(this.lastTime&&(a=s-this.lastTime,n=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,i=1e3*n/a,(a=this.hls).trigger(u.default.FPS_DROP,{currentDropped:n,currentDecoded:o,totalDroppedFrames:r}),0<i&&n>a.config.fpsDroppedMonitoringThreshold*o&&(o=a.currentLevel,l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o&&(-1===a.autoLevelCapping||a.autoLevelCapping>=o)&&(a.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:a.currentLevel}),a.autoLevelCapping=o,a.streamController.nextLevelSwitch()))),this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=t)}},{key:"checkFPSInterval",value:function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))}}]),n=s;function s(e){return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,u.default.MEDIA_ATTACHING))}r.default=n},{34:34,35:35,54:54}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},i=s(e(35)),a=s(e(34)),d=s(e(27));function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default),n(u,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,r=e.samples,n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=d.default.getID3Frames(r[i].data);if(a){var o=r[i].pts,s=i<r.length-1?r[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var l,c=a[u];d.default.isTimeStampFrame(c)||((l=new n(o,s,"")).value=c,this.id3Track.addCue(l))}}}}}]),n=u;function u(e){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA));return e.id3Track=void 0,e.media=void 0,e}r.default=n},{27:27,34:34,35:35}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},d=o(e(35)),i=o(e(34)),f=e(54),h=e(33),s=o(e(37));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,i.default),n(u,[{key:"destroy",value:function(){this.cleanTimer(),this._manualLevel=-1}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){function r(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)}var t,n=[],i=[],a={},o=!1,s=!1,u=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase());if(e.levels.forEach(function(e){e.videoCodec&&(o=!0),l&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(s=!0);var t=a[e.bitrate];void 0===t?(a[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),o&&s?n.forEach(function(e){e.videoCodec&&i.push(e)}):i=n,(i=i.filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||r("audio",t))&&(!e||r("video",e))})).length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var c=0;c<i.length;c++)if(i[c].bitrate===t){this._firstLevel=c,f.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}u.trigger(d.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:o,altAudio:0<e.audioTracks.length})}else u.trigger(d.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:u.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t,r=this._levels,n=this.hls;0<=e&&e<r.length?(this.cleanTimer(),this._level!==e&&(f.logger.log("switching to level "+e),(t=r[this._level=e]).level=e,n.trigger(d.default.LEVEL_SWITCH,t),n.trigger(d.default.LEVEL_SWITCHING,t)),(r=(t=r[e]).details)&&!0!==r.live||(r=t.urlId,n.trigger(d.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r}))):n.trigger(d.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(e.fatal)e.type===h.ErrorTypes.NETWORK_ERROR&&this.cleanTimer();else{var t,r=e.details,n=this.hls,i=void 0,a=void 0,o=!1;switch(r){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=e.context.level,o=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:i=e.level}void 0!==i&&((a=this._levels[i]).loadError?a.loadError++:a.loadError=1,1<(t=a.url.length)&&a.loadError<t?(a.urlId=(a.urlId+1)%t,a.details=void 0,f.logger.warn("level controller,"+r+" for level "+i+": switching to redundant stream id "+a.urlId)):-1===this._manualLevel&&i?(f.logger.warn("level controller,"+r+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,i-1)):a&&a.details&&a.details.live?(f.logger.warn("level controller,"+r+" on live stream, discard"),o&&(this._level=void 0)):r!==h.ErrorDetails.LEVEL_LOAD_ERROR&&r!==h.ErrorDetails.LEVEL_LOAD_TIMEOUT||((a=n.media)&&s.default.isBuffered(a,a.currentTime)&&s.default.isBuffered(a,a.currentTime+.5)?(n=n.config.levelLoadingRetryDelay,f.logger.warn("level controller,"+r+", but media buffered, retry in "+n+"ms"),this.timer=setTimeout(this.ontick,n),e.levelRetry=!0):(f.logger.error("cannot recover "+r+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0)))}}},{key:"onFragLoaded",value:function(e){e=e.frag;!e||"main"!==e.type||(e=this._levels[e.level])&&(e.loadError=0)}},{key:"onLevelLoaded",value:function(e){var t,r,n=e.level;n===this._level&&((r=this._levels[n]).loadError=0,(t=e.details).live?(n=1e3*(t.averagetargetduration||t.targetduration),(r=r.details)&&t.endSN===r.endSN&&(n/=2,f.logger.log("same live playlist, reload twice faster")),n-=performance.now()-e.stats.trequest,n=Math.max(1e3,Math.round(n)),f.logger.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(this.ontick,n)):this.timer=null)}},{key:"tick",value:function(){var e,t,r=this._level;void 0===r||!this.canload||(e=this._levels[r])&&e.url&&(t=e.urlId,this.hls.trigger(d.default.LEVEL_LOADING,{url:e.url[t],level:r,id:t}))}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),n=u;function u(e){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,d.default.MANIFEST_LOADED,d.default.LEVEL_LOADED,d.default.FRAG_LOADED,d.default.ERROR));return e.ontick=e.tick.bind(e),e._manualLevel=-1,e}r.default=n},{33:33,34:34,35:35,37:37,54:54}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},h=l(e(48)),c=l(e(37)),u=l(e(25)),d=l(e(35)),i=l(e(34)),o=l(e(38)),a=l(e(55)),f=e(33),p=e(54);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}var g="STOPPED",v="IDLE",y="KEY_LOADING",m="FRAG_LOADING",b="FRAG_LOADING_WAITING_RETRY",_="WAITING_LEVEL",E="PARSING",w="PARSED",k="BUFFER_FLUSHING",T="ERROR",n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(S,i.default),n(S,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),i.default.prototype.destroy.call(this),this.state=g}},{key:"startLoad",value:function(e){var t,r,n;this.levels?(t=this.lastCurrentTime,r=this.hls,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(n=r.startLevel)&&(this.bitrateTest=!(n=0)),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1),0<t&&-1===e&&(p.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=g)}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=g,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case T:break;case k:this.fragLoadError=0;break;case v:this._doTickIdle();break;case _:var e=this.levels[this.level];e&&e.details&&(this.state=v);break;case b:var t=performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v)}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var n=this.loadedmetadata?r.currentTime:this.nextLoadPosition,i=e.nextLoadLevel,a=this.levels[i];if(a){var o=a.bitrate,s=void 0,s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength;s=Math.min(s,t.maxMaxBufferLength);o=c.default.bufferInfo(this.mediaBuffer||r,n,t.maxBufferHole),t=o.len;if(!(s<=t)){p.logger.trace("buffer length of "+t.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;a=a.details;if(void 0===a||a.live&&this.levelLastLoaded!==i)this.state=_;else{i=this.fragPrevious;if(!a.live&&i&&i.sn===a.endSN&&t&&!o.nextStart&&Math.min(r.duration,i.start+i.duration)-Math.max(o.end,i.start)<=Math.max(.2,i.duration)){i={};return this.altAudio&&(i.type="video"),this.hls.trigger(d.default.BUFFER_EOS,i),void(this.state="ENDED")}this._fetchPayloadOrEos(n,o,a)}}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=t.end,c=void 0;if(r.initSegment&&!r.initSegment.data)c=r.initSegment;else if(r.live){t=this.config.initialLiveManifestSize;if(o<t)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+t);if(null===(c=this._ensureFragmentAtLivePoint(r,l,s,u,n,a,o)))return}else l<s&&(c=a[0]);(c=c||this._findFragment(s,n,o,a,l,u,r))&&this._loadFragmentOrKey(c,i,r,e,l)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,n,i,a,o){var s=this.hls.config,u=this.media,l=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;return t<Math.max(r-s.maxFragLookUpTolerance,n-c)&&(r=this.liveSyncPosition=this.computeLivePosition(r,e),p.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+r.toFixed(3)),t=r,u&&u.readyState&&u.duration>r&&(u.currentTime=r),this.nextLoadPosition=r),e.PTSKnown&&n<t&&u&&u.readyState?null:(this.startFragRequested&&!e.PTSKnown&&(i&&((u=i.sn+1)>=e.startSN&&u<=e.endSN&&(e=a[u-e.startSN],i.cc===e.cc&&p.logger.log("live playlist, switching playlist, load frag with next SN: "+(l=e).sn)),l||(l=h.default.search(a,function(e){return i.cc-e.cc}))&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)),l||(l=a[Math.min(o-1,Math.round(o/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))),l)}},{key:"_findFragment",value:function(e,t,r,n,i,a,o){var s=this.hls.config,u=void 0,l=void 0,c=s.maxFragLookUpTolerance,d=t?n[t.sn-n[0].sn+1]:void 0,f=function(e){var t=Math.min(c,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};return(l=i<a?(a-c<i&&(c=0),d&&!f(d)?d:h.default.search(n,f)):n[r-1])&&(f=(u=l).sn-o.startSN,r=t&&u.level===t.level,l=n[f-1],n=n[1+f],t&&u.sn===t.sn&&(r&&!u.backtracked?u.sn<o.endSN?(o=t.deltaPTS)&&o>s.maxBufferHole&&t.dropped&&f?(u=l,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):p.logger.log("SN just loaded, load next one: "+(u=n).sn):u=null:u.backtracked&&(n&&n.backtracked?(p.logger.warn("Already backtracked from fragment "+n.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+n.sn),u=n):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,l?(l.loadCounter&&l.loadCounter--,(u=l).backtracked=!0):f&&(u=null))))),u}},{key:"_loadFragmentOrKey",value:function(e,t,r,n,i){var a=this.hls,o=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(p.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;o=o.fragLoadingLoopThreshold;if(e.loadCounter>o&&Math.abs(this.fragLoadIdx-e.loadIdx)<o)return void a.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(d.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new u.default(a,"main")),void(this.state=m)}p.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=y,a.trigger(d.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(t){return h.default.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),c.default.isBuffered(r,e)?t=this.getBufferedFrag(e):c.default.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)&&((e=t)!==this.fragPlaying&&(this.hls.trigger(d.default.FRAG_CHANGED,{frag:e}),t=e.level,this.fragPlaying&&this.fragPlaying.level===t||this.hls.trigger(d.default.LEVEL_SWITCHED,{level:t}),this.fragPlaying=e))}},{key:"immediateLevelSwitch",value:function(){var e;p.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,t=void 0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,c.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e,t,r,n,i=this.media;i&&i.readyState&&(e=n=void 0,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(t=this.getBufferedFrag(i.currentTime))&&1<t.startPTS&&this.flushMainBuffer(0,t.startPTS-1),n=i.paused?0:(r=this.hls.nextLoadLevel,t=this.levels[r],(r=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*t.bitrate/(1e3*r)+1:0),(e=this.getBufferedFrag(i.currentTime+n))&&(e=this.followingBufferedFrag(e))&&((n=this.fragCurrent)&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(e.maxStartPTS,Number.POSITIVE_INFINITY)))}},{key:"flushMainBuffer",value:function(e,t){this.state=k;t={startOffset:e,endOffset:t};this.altAudio&&(t.type="video"),this.hls.trigger(d.default.BUFFER_FLUSHING,t)}},{key:"onMediaAttached",value:function(e){e=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||p.logger.log("media seeking to "+t.toFixed(3));var n,i,a=this.mediaBuffer||e,o=c.default.bufferInfo(a,t,this.config.maxBufferHole);this.state===m?(n=this.fragCurrent,0===o.len&&n&&(i=r.maxFragLookUpTolerance,a=n.start-i,i=n.start+n.duration+i,t<a||i<t?(n.loader&&(p.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=v):p.logger.log("seeking outside of buffer but within currently loaded fragment range"))):"ENDED"===this.state&&(0===o.len&&(this.fragPrevious=0),this.state=v),e&&(this.lastCurrentTime=t),this.state!==m&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,e=e?e.currentTime:void 0;isNaN(e)||p.logger.log("media seeked to "+e.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){p.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(d.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,n=this.levels[r],i=t.totalduration,a=0;p.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=r,t.live?(e=n.details)&&0<t.fragments.length?(o.default.mergeDetails(e,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,e),t.PTSKnown?p.logger.log("live playlist sliding:"+a.toFixed(3)):p.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,p.logger.log("live playlist - first load, unknown sliding")):t.PTSKnown=!1,n.details=t,this.hls.trigger(d.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(r=t.startTimeOffset,isNaN(r)?t.live?(this.startPosition=this.computeLivePosition(a,t),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(r<0&&(p.logger.log("negative start time offset "+r+", count from end of last fragment"),r=a+i+r),p.logger.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r),this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===_&&(this.state=v),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===y&&(this.state=v,this.tick())}},{key:"onFragLoaded",value:function(e){var t,r,n,i,a,o=this.fragCurrent,s=e.frag;this.state===m&&o&&"main"===s.type&&s.level===o.level&&s.sn===o.sn&&(n=e.stats,a=(t=this.levels[o.level]).details,p.logger.log("Loaded  "+o.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+o.level),this.bitrateTest=!1,this.stats=n,!0===s.bitrateTest&&this.hls.nextLoadLevel?(this.state=v,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(d.default.FRAG_BUFFERED,{stats:n,frag:o,id:"main"}),this.tick()):"initSegment"===s.sn?(this.state=v,n.tparsed=n.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(d.default.FRAG_BUFFERED,{stats:n,frag:o,id:"main"}),this.tick()):(this.state=E,r=a.totalduration,i=o.level,s=o.sn,n=this.config.defaultAudioCodec||t.audioCodec,this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),n=(n=void 0===n?this.lastAudioCodec:n)&&(-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,p.logger.log("Parsing "+s+" of ["+a.startSN+" ,"+a.endSN+"],level "+i+", cc "+o.cc),s=(s=this.demuxer)||(this.demuxer=new u.default(this.hls,"main")),i=!((i=this.media)&&i.seeking)&&(a.PTSKnown||!a.live),a=a.initSegment?a.initSegment.data:[],s.push(e.payload,a,n,t.videoCodec,o,r,i,void 0))),this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===E){var n,i,a=e.tracks;for(n in a.audio&&this.altAudio&&delete a.audio,(i=a.audio)&&(r=this.levels[this.level].audioCodec,t=navigator.userAgent.toLowerCase(),r&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===t.indexOf("firefox")&&(r="mp4a.40.5"),-1!==t.indexOf("android")&&"audio/mpeg"!==i.container&&p.logger.log("Android: force audio codec to "+(r="mp4a.40.2")),i.levelCodec=r,i.id=e.id),(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(d.default.BUFFER_CODECS,a),a){i=a[n],p.logger.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;o&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(d.default.BUFFER_APPENDING,{type:n,data:o,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(t){var r=this,e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===E){var i=this.levels[this.level],n=e;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),p.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(n.dropped=t.dropped,n.dropped){if(!n.backtracked)return p.logger.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=v,this.fragPrevious=n,void this.tick();p.logger.warn("Already backtracked on this fragment, appending with the gap")}else n.backtracked=!1;var n=o.default.updateFragPTSDTS(i.details,n,t.startPTS,t.endPTS,t.startDTS,t.endDTS),a=this.hls;a.trigger(d.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:n,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===E&&(r.appended=!0,r.pendingBuffering=!0,a.trigger(d.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===E&&(this.stats.tparsed=performance.now(),this.state=w,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t,r=!!e.url,e=e.id;r||(this.mediaBuffer!==this.media&&(p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v),(t=this.hls).trigger(d.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),t.trigger(d.default.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1)}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,e=!!this.hls.audioTracks[t].url;!e||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=e,this.tick()}},{key:"onBufferCreated",value:function(e){var t,r=e.tracks,n=void 0,i=void 0,a=!1;for(t in r){var o=r[t];"main"===o.id?(n=o,"video"===(i=t)&&(this.videoBuffer=r[t].buffer)):a=!0}a&&n?(p.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){var t;"main"===e.parent&&((t=this.state)!==E&&t!==w||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))}},{key:"_checkAppendedParsed",value:function(){var e,t,r;this.state!==w||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer||this.media,p.logger.log("main buffered : "+a.default.toString(t.buffered)),(r=this._bufferedFrags.filter(function(e){return c.default.isBuffered(t,(e.startPTS+e.endPTS)/2)})).push(e),this._bufferedFrags=r.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e,(r=this.stats).tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(d.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=v),this.tick())}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r,n,i=this.media,a=i&&c.default.isBuffered(i,i.currentTime)&&c.default.isBuffered(i,i.currentTime+.5);switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:e.fatal||((r=this.fragLoadError)?r++:r=1,r<=(n=this.config).fragLoadingMaxRetry||a||t.autoLevel&&t.level?(this.fragLoadError=r,t.loadCounter=0,n=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout),p.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=b):(p.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=T));break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(a?(this._reduceMaxBufferLength(t.duration),this.state=v):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=T));break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==T&&(e.fatal?(this.state=T,p.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==_||(this.state=v));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==E&&this.state!==w||(a?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e,t,r,n,i,a,o,s,u=this.media,l=this.config;u&&u.readyState&&(e=u.currentTime,r=(t=this.mediaBuffer||u).buffered,!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,s=u.seeking?e:this.startPosition,n=c.default.isBuffered(t,s),o=r.start(0),(e!==s||!n&&Math.abs(s-o)<l.maxSeekHole)&&(p.logger.log("target start position:"+s),n||p.logger.log("target start position not buffered, seek to buffered.start(0) "+(s=o)),p.logger.log("adjust currentTime from "+e+" to "+s),u.currentTime=s)):this.immediateSwitch?this.immediateLevelSwitchEnd():(a=c.default.bufferInfo(u,e,0),i=!(u.paused||u.ended||0===u.buffered.length),e!==this.lastCurrentTime?(this.stallReported&&(p.logger.warn("playback not stuck anymore @"+e+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0):i&&(t=performance.now(),r=this.hls,this.stalled?(n=t-this.stalled,o=a.len,s=this.nudgeRetry||0,o<=.5&&n>1e3*l.lowBufferWatchdogPeriod?(this.stallReported||(this.stallReported=!0,p.logger.warn("playback stalling in low buffer @"+e),r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:o})),a=(i=a.nextStart)-e,i&&a<l.maxSeekHole&&0<a&&(this.nudgeRetry=++s,a=s*l.nudgeOffset,p.logger.log("adjust currentTime from "+u.currentTime+" to next buffered @ "+i+" + nudge "+a),u.currentTime=i+a,this.stalled=void 0,r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:i+a-e}))):.5<o&&n>1e3*l.highBufferWatchdogPeriod&&(this.stallReported||(this.stallReported=!0,p.logger.warn("playback stalling in high buffer @"+e),r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:o})),this.stalled=void 0,this.nudgeRetry=++s,s<l.nudgeMaxRetry?(s=(o=u.currentTime)+s*l.nudgeOffset,p.logger.log("adjust currentTime from "+o+" to "+s),u.currentTime=s,r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(p.logger.error("still stuck in high buffer @"+e+" after "+l.nudgeMaxRetry+", raise fatal error"),r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})))):(this.stalled=t,this.stallReported=!1))))}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=v,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var t=this.mediaBuffer||this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return c.default.isBuffered(t,(e.startPTS+e.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=v,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,p.logger.log("main stream:"+t+"->"+e),this.hls.trigger(d.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getBufferedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),S);function S(e){!function(e){if(!(e instanceof S))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,e,d.default.MEDIA_ATTACHED,d.default.MEDIA_DETACHING,d.default.MANIFEST_LOADING,d.default.MANIFEST_PARSED,d.default.LEVEL_LOADED,d.default.KEY_LOADED,d.default.FRAG_LOADED,d.default.FRAG_LOAD_EMERGENCY_ABORTED,d.default.FRAG_PARSING_INIT_SEGMENT,d.default.FRAG_PARSING_DATA,d.default.FRAG_PARSED,d.default.ERROR,d.default.AUDIO_TRACK_SWITCHING,d.default.AUDIO_TRACK_SWITCHED,d.default.BUFFER_CREATED,d.default.BUFFER_APPENDED,d.default.BUFFER_FLUSHED));return t.config=e.config,t.audioCodecSwap=!1,t.ticks=0,t._state=g,t.ontick=t.tick.bind(t),t}r.default=n},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,54:54,55:55}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},i=u(e(35)),a=u(e(34)),o=e(54);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,a.default),n(l,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})}},{key:"nextFrag",value:function(){var e;null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length&&(e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift(),this.hls.trigger(i.default.FRAG_LOADING,{frag:e}))}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){e=e.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;o.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(r){var n=this.vttFragSNsProcessed[r.id],i=this.vttFragQueues[r.id],a=this.currentlyProcessing?this.currentlyProcessing.sn:-1;r.details.fragments.forEach(function(e){var t;-1<n.indexOf(e.sn)||e.sn===a||(t=e,i.some(function(e){return e.sn===t.sn}))||(e.trackId=r.id,i.push(e))}),this.nextFrag()}}]),n=l;function l(e){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,i.default.ERROR,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED));return t.config=e.config,t.vttFragSNsProcessed={},t.vttFragQueues=void 0,t.currentlyProcessing=null,t.currentTrackId=-1,t}r.default=n},{34:34,35:35,54:54}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},i=u(e(35)),a=u(e(34)),o=e(54);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,a.default),n(l,[{key:"_onTextTracksChanged",value:function(){if(this.media){for(var e=-1,t=function(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}(this.media.textTracks),r=0;r<t.length;r++)"showing"===t[r].mode&&(e=r);this.subtitleTrack=e}}},{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.media.textTracks.addEventListener("change",this.trackChangeListener))}},{key:"onMediaDetaching",value:function(){this.media&&(this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,e=e.subtitles||[];this.tracks=e,this.trackId=-1,this.hls.trigger(i.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:e}),e.forEach(function(e){e.default&&(t.subtitleTrack=e.id)})}},{key:"onTick",value:function(){var e,t=this.trackId,r=this.tracks[t];r&&(void 0!==(e=r.details)&&!0!==e.live||(o.logger.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(i.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t})))}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(o.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){var t,r;0<=e&&e<this.tracks.length&&(this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,o.logger.log("switching to subtitle track "+e),t=this.tracks[e],this.hls.trigger(i.default.SUBTITLE_TRACK_SWITCH,{id:e}),void 0!==(r=t.details)&&!0!==r.live||(o.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(i.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e})))}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),n=l;function l(e){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.MANIFEST_LOADING,i.default.MANIFEST_LOADED,i.default.SUBTITLE_TRACK_LOADED));return e.tracks=[],e.trackId=-1,e.media=void 0,e}r.default=n},{34:34,35:35,54:54}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},s=c(e(35)),i=c(e(34)),o=c(e(49)),u=c(e(58)),l=e(54);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(f,i.default),n(f,[{key:"addCues",value:function(e,t,r,n){for(var i,a,o=this.cueRanges,s=!1,u=o.length;u--;){var l=o[u],c=(i=l[0],a=l[1],c=t,Math.min(a,r)-Math.max(i,c));if(0<=c&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],r),s=!0,.5<c/(r-t)))return}s||o.push([t,r]),this.Cues.newCue(this[e],t,r,n)}},{key:"onInitPtsFound",value:function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(!0===n["textTrack"+e])return n}return null}},{key:"createTextTrack",value:function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)}},{key:"destroy",value:function(){i.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){d(this.textTrack1),d(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)d(t[r])}}},{key:"onManifestLoaded",value:function(e){var n,i=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT&&(this.tracks=e.subtitles||[],n=this.media?this.media.textTracks:[],this.tracks.forEach(function(e,t){var r=void 0;t<n.length&&(!(t=n[t])||t.label!==e.name||t.textTrack1||t.textTrack2||(r=t)),(r=r||i.createTextTrack("subtitles",e.name,e.lang)).mode=e.default?"showing":"hidden",i.textTracks.push(r)}))}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t,r,i,a,o=e.frag,n=e.payload;"main"===o.type?((r=o.sn)===this.lastSn+1||(t=this.cea608Parser)&&t.reset(),this.lastSn=r):"subtitle"===o.type&&(n.byteLength?void 0!==this.initPTS?((r=this.vttCCs)[o.cc]||(r[o.cc]={start:o.start,prevCC:this.prevCC,new:!0},this.prevCC=o.cc),i=this.textTracks,a=this.hls,u.default.parse(n,this.initPTS,r,o.cc,function(e){var n=i[o.trackId];e.forEach(function(t){if(!n.cues.getCueById(t.id))try{n.addCue(t)}catch(e){var r=new window.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,n.addCue(r)}}),a.trigger(s.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:o})},function(e){l.logger.log("Failed to parse VTT cue: "+e),a.trigger(s.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o})})):this.unparsedVttFrags.push(e):this.hls.trigger(s.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o}))}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:"extractCea608Data",value:function(e){for(var t,r,n,i=31&e[0],a=2,o=[],s=0;s<i;s++)t=e[a++],r=127&e[a++],n=127&e[a++],0==r&&0==n||0!=(4&t)&&0==(3&t)&&(o.push(r),o.push(n));return o}}]),n=f;function f(e){!function(e){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var i,a,t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e,s.default.MEDIA_ATTACHING,s.default.MEDIA_DETACHING,s.default.FRAG_PARSING_USERDATA,s.default.MANIFEST_LOADING,s.default.MANIFEST_LOADED,s.default.FRAG_LOADED,s.default.LEVEL_SWITCHING,s.default.INIT_PTS_FOUND));return t.hls=e,t.config=e.config,t.enabled=!0,t.Cues=e.config.cueHandler,t.textTracks=[],t.tracks=[],t.unparsedVttFrags=[],t.initPTS=void 0,t.cueRanges=[],t.config.enableCEA708Captions&&(a=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},(i=t).cea608Parser=new o.default(0,{newCue:function(e,t,r){var n;i.textTrack1||((n=i.getExistingTrack("1"))?(i.textTrack1=n,d(i.textTrack1),a(i.textTrack1,i.media)):(n=i.createTextTrack("captions",i.config.captionsTextTrack1Label,i.config.captionsTextTrack1LanguageCode))&&(n.textTrack1=!0,i.textTrack1=n)),i.addCues("textTrack1",e,t,r)}},{newCue:function(e,t,r){var n;i.textTrack2||((n=i.getExistingTrack("2"))?(i.textTrack2=n,d(i.textTrack2),a(i.textTrack2,i.media)):(n=i.createTextTrack("captions",i.config.captionsTextTrack2Label,i.config.captionsTextTrack1LanguageCode))&&(n.textTrack2=!0,i.textTrack2=n)),i.addCues("textTrack2",e,t,r)}})),t}r.default=n},{34:34,35:35,49:49,54:54,58:58}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),i);function i(e,t){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.subtle=e,this.aesIV=t}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}},{key:"initTable",value:function(){for(var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],r=this.invSubMix,s=r[0],u=r[1],l=r[2],c=r[3],d=new Uint32Array(256),f=0,h=0,p=0,p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var g=h^h<<1^h<<2^h<<3^h<<4;e[f]=g=g>>>8^255&g^99;var v=d[t[g]=f],y=d[v],m=d[y],b=257*d[g]^16843008*g;n[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,o[f]=b,s[g]=(b=16843009*m^65537*y^257*v^16843008*f)<<24|b>>>8,u[g]=b<<16|b>>>16,l[g]=b<<8|b>>>24,c[g]=b,f?(f=v^d[d[d[m^v]]],h^=d[d[h]]):f=h=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);for(var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,e=this.invSubMix,f=e[0],h=e[1],p=e[2],g=e[3],v=void 0,y=void 0,o=0;o<a;o++)o<i?v=u[o]=t[o]:(y=v,o%i==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[o/i|0]<<24):6<i&&o%i==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),u[o]=v=(u[o-i]^y)>>>0);for(s=0;s<a;s++)o=a-s,y=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?y:f[c[y>>>24]]^h[c[y>>>16&255]]^p[c[y>>>8&255]]^g[c[255&y]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var n,i,a,o,s,u,l=this.keySize+6,c=this.invKeySchedule,d=this.invSBox,f=this.invSubMix,h=f[0],p=f[1],g=f[2],v=f[3],r=this.uint8ArrayToUint32Array_(r),y=r[0],m=r[1],b=r[2],_=r[3],E=new Int32Array(e),w=new Int32Array(E.length),k=void 0,T=void 0,S=void 0,x=void 0,A=void 0,O=void 0,R=void 0,L=void 0,D=this.networkToHostOrderSwap;t<E.length;){for(a=D(E[t]),o=D(E[t+1]),s=D(E[t+2]),u=D(E[t+3]),A=a^c[0],O=u^c[1],R=s^c[2],L=o^c[3],n=4,i=1;i<l;i++)k=h[A>>>24]^p[O>>16&255]^g[R>>8&255]^v[255&L]^c[n],T=h[O>>>24]^p[R>>16&255]^g[L>>8&255]^v[255&A]^c[n+1],S=h[R>>>24]^p[L>>16&255]^g[A>>8&255]^v[255&O]^c[n+2],x=h[L>>>24]^p[A>>16&255]^g[O>>8&255]^v[255&R]^c[n+3],A=k,O=T,R=S,L=x,n+=4;k=d[A>>>24]<<24^d[O>>16&255]<<16^d[R>>8&255]<<8^d[255&L]^c[n],T=d[O>>>24]<<24^d[R>>16&255]<<16^d[L>>8&255]<<8^d[255&A]^c[n+1],S=d[R>>>24]<<24^d[L>>16&255]<<16^d[A>>8&255]<<8^d[255&O]^c[n+2],x=d[L>>>24]<<24^d[A>>16&255]<<16^d[O>>8&255]<<8^d[255&R]^c[n+3],n+=3,w[t]=D(k^y),w[t+1]=D(x^m),w[t+2]=D(S^b),w[t+3]=D(T^_),y=a,m=o,b=s,_=u,t+=4}return w.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},s=o(e(17)),u=o(e(20)),l=o(e(18)),a=e(33),c=e(54);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}n(d,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(t,r,n,i){var e,a,o=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(c.logger.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new l.default),e.expandKey(r),i(e.decrypt(t,0,n))):(this.logEnabled&&(c.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1),a=this.subtle,this.key!==r&&(this.key=r,this.fastAesKey=new u.default(a,r)),this.fastAesKey.expandKey().then(function(e){new s.default(a,n).decrypt(t,e).catch(function(e){o.onWebCryptoError(e,t,r,n,i)}).then(function(e){i(e)})}).catch(function(e){o.onWebCryptoError(e,t,r,n,i)}))}},{key:"onWebCryptoError",value:function(e,t,r,n,i){this.config.enableSoftwareAES?(c.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(c.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),n=d;function d(e,t){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=t,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}r.default=n},{17:17,18:18,20:20,33:33,54:54}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),i);function i(e,t){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.subtle=e,this.key=t}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},h=a(e(22)),p=e(54),g=a(e(27));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}n(o,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var i=this._audioTrack,a=g.default.getID3Data(e,0),o=90*g.default.getTimeStamp(a),s=0,u=o,l=e.length,c=a.length,d=[{pts:u,dts:u,data:a}];c<l-1;)if(h.default.isHeader(e,c)&&c+5<l){h.default.initTrackConfig(i,this.observer,e,c,i.manifestCodec);var f=h.default.appendFrame(i,e,c,o,s);if(!f){p.logger.log("Unable to parse AAC frame");break}c+=f.length,u=f.sample.pts,s++}else g.default.isHeader(e,c)?(a=g.default.getID3Data(e,c),d.push({pts:u,dts:u,data:a}),c+=a.length):c++;this.remuxer.remux(i,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=g.default.getID3Data(e,0);if(n&&void 0!==g.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(h.default.probe(e,t))return p.logger.log("ADTS sync word found !"),!0;return!1}}]),n=o;function o(e,t,r){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=r,this.remuxer=t}r.default=n},{22:22,27:27,54:54}],22:[function(e,t,r){"use strict";var d=e(54),f=e(33),e={getAudioConfig:function(e,t,r,n){var i,a,o,s=navigator.userAgent.toLowerCase(),u=n,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&t[r+2])>>>6);if(!((i=(60&t[r+2])>>>2)>l.length-1))return a=(1&t[r+2])<<2,a|=(192&t[r+3])>>>6,d.logger.log("manifest codec:"+n+",ADTS data:type:"+c+",sampleingIndex:"+i+"["+l[i]+"Hz],channelConfig:"+a),n=/firefox/i.test(s)?6<=i?(c=5,o=new Array(4),i-3):(c=2,o=new Array(2),i):-1!==s.indexOf("android")?(c=2,o=new Array(2),i):(c=5,o=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=i?i-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=i&&1==a||/vivaldi/i.test(s))||!n&&1==a)&&(c=2,o=new Array(2)),i)),o[0]=c<<3,o[0]|=(14&i)>>1,o[1]|=(1&i)<<7,o[1]|=a<<3,5===c&&(o[1]|=(14&n)>>1,o[2]=(1&n)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:l[i],channelCount:a,codec:"mp4a.40."+c,manifestCodec:u};e.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+i})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.getHeaderLength(e,t),r=t+(r=t+5<e.length?this.getFullFrameLength(e,t):r);if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1},initTrackConfig:function(e,t,r,n,i){e.samplerate||(i=this.getAudioConfig(t,r,n,i),e.config=i.config,e.samplerate=i.samplerate,e.channelCount=i.channelCount,e.codec=i.codec,e.manifestCodec=i.manifestCodec,d.logger.log("parsed codec:"+e.codec+",rate:"+i.samplerate+",nb channel:"+i.channelCount))},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,r,n,i){var a=this.getFrameDuration(e.samplerate),n=this.parseFrameHeader(t,r,n,i,a);if(n){i=n.stamp,a=n.headerLength,n=n.frameLength,i={unit:t.subarray(r+a,r+a+n),pts:i,dts:i};return e.samples.push(i),e.len+=n,{sample:i,length:n+a}}},parseFrameHeader:function(e,t,r,n,i){var a=e.length,o=this.getHeaderLength(e,t),e=this.getFullFrameLength(e,t);if(0<(e-=o)&&t+o+e<=a)return{headerLength:o,frameLength:e,stamp:r+n*i}}};t.exports=e},{33:33,54:54}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},k=a(e(35)),T=e(33),g=a(e(19)),S=a(e(21)),x=a(e(29)),A=a(e(32)),O=a(e(28)),R=a(e(45)),L=a(e(46));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}n(o,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,r,n,i,a,o,s,u,l,c,d,f){if(0<e.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method){var t=this.decrypter;null==t&&(t=this.decrypter=new g.default(this.observer,this.config));var h,p=this;try{h=performance.now()}catch(e){h=Date.now()}t.decrypt(e,r.key.buffer,r.iv.buffer,function(e){var t;try{t=performance.now()}catch(e){t=Date.now()}p.observer.trigger(k.default.FRAG_DECRYPTED,{stats:{tstart:h,tdecrypt:t}}),p.pushDecrypted(new Uint8Array(e),r,new Uint8Array(n),i,a,o,s,u,l,c,d,f)})}else this.pushDecrypted(new Uint8Array(e),r,new Uint8Array(n),i,a,o,s,u,l,c,d,f)}},{key:"pushDecrypted",value:function(e,t,r,n,i,a,o,s,u,l,c,d){if(!(E=this.demuxer)||o&&!this.probe(e)){for(var f=this.observer,h=this.typeSupported,p=this.config,g=[{demux:S.default,remux:R.default},{demux:O.default,remux:R.default},{demux:A.default,remux:R.default},{demux:x.default,remux:L.default}],v=0,y=g.length;v<y;v++){var m=g[v],b=m.demux.probe;if(b(e)){var _=this.remuxer=new m.remux(f,p,h,this.vendor),E=new m.demux(f,_,p,h);this.probe=b;break}}if(!E)return void f.trigger(k.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var w=this.remuxer;(o||s)&&(E.resetInitSegment(r,n,i,l),w.resetInitSegment()),o&&(E.resetTimeStamp(d),w.resetTimeStamp(d)),"function"==typeof E.setDecryptData&&E.setDecryptData(t),E.append(e,a,u,c)}}]),n=o;function o(e,t,r,n){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}r.default=n},{19:19,21:21,28:28,29:29,32:32,33:33,35:35,45:45,46:46}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=n(e(23)),s=n(e(35)),u=e(54),l=n(e(1));function n(e){return e&&e.__esModule?e:{default:e}}r.default=function(n){var i=new l.default;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))};function a(e,t){n.postMessage({event:e,data:t})}n.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var r=JSON.parse(t.config);n.demuxer=new o.default(i,t.typeSupported,r,t.vendor);try{(0,u.enableLogs)(!0===r.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}a("init",null);break;case"demux":n.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),i.on(s.default.FRAG_DECRYPTED,a),i.on(s.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(s.default.FRAG_PARSED,a),i.on(s.default.ERROR,a),i.on(s.default.FRAG_PARSING_METADATA,a),i.on(s.default.FRAG_PARSING_USERDATA,a),i.on(s.default.INIT_PTS_FOUND,a),i.on(s.default.FRAG_PARSING_DATA,function(e,t){var r=[],e={event:e,data:t};t.data1&&(e.data1=t.data1.buffer,r.push(t.data1.buffer),delete t.data1),t.data2&&(e.data2=t.data2.buffer,r.push(t.data2.buffer),delete t.data2),n.postMessage(e,r)})}},{1:1,23:23,35:35,54:54}],25:[function(u,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},l=i(u(35)),c=i(u(23)),d=i(u(24)),p=u(54),f=u(33),h=i(u(1));function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return e&&e.__esModule?e:{default:e}}r(g,[{key:"destroy",value:function(){var e=this.w;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null);var t=this.observer;t&&(t.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,r,n,i,a,o,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,c=i.decryptdata,d=this.frag,f=!(d&&i.cc===d.cc),h=!(d&&i.level===d.level),d=d&&i.sn===d.sn+1,d=!h&&d;f&&p.logger.log(this.id+":discontinuity detected"),h&&p.logger.log(this.id+":switch detected"),this.frag=i,u?u.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:l,discontinuity:f,trackSwitch:h,contiguous:d,duration:a,accurateTimeOffset:o,defaultInitPTS:s},[e]):(u=this.demuxer)&&u.push(e,c,t,r,n,l,f,h,d,a,o,s)}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case l.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),r=g;function g(r,e){!function(e){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this),this.hls=r,this.id=e;var i=this.observer=new h.default,t=r.config;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))};var n=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);i.on(l.default.FRAG_DECRYPTED,n),i.on(l.default.FRAG_PARSING_INIT_SEGMENT,n),i.on(l.default.FRAG_PARSING_DATA,n),i.on(l.default.FRAG_PARSED,n),i.on(l.default.ERROR,n),i.on(l.default.FRAG_PARSING_METADATA,n),i.on(l.default.FRAG_PARSING_USERDATA,n),i.on(l.default.INIT_PTS_FOUND,n);var a={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(t.enableWorker&&"undefined"!=typeof Worker){p.logger.log("demuxing in webworker");n=void 0;try{var s=u(3),n=this.w=s(d.default);this.onwmsg=this.onWorkerMessage.bind(this),n.addEventListener("message",this.onwmsg),n.onerror=function(e){r.trigger(l.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},n.postMessage({cmd:"init",typeSupported:a,vendor:o,id:e,config:JSON.stringify(t)})}catch(e){p.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),n&&URL.revokeObjectURL(n.objectURL),this.demuxer=new c.default(i,a,t,o),this.w=void 0}}else this.demuxer=new c.default(i,a,t,o)}t.default=r},{1:1,23:23,24:24,3:3,33:33,35:35,54:54}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},i=e(54),n=(n(a,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");n.set(e.subarray(r,r+t)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&i.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){for(var t=8,r=8,n=0;n<e;n++)t=0===(r=0!==r?(t+this.readEG()+256)%256:r)?t:r}},{key:"readSPS",value:function(){var e,t,r,n,i=0,a=0,o=0,s=0,u=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(u(),e=u(),l(5),f(3),u(),p(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=c();if(3===v&&f(1),p(),p(),f(1),d())for(r=3!==v?8:12,n=0;n<r;n++)d()&&g(n<6?16:64)}p();var v=c();if(0===v)c();else if(1===v)for(f(1),h(),h(),t=c(),n=0;n<t;n++)h();p(),f(1),v=c(),p=c(),0===(l=l(1))&&f(1),f(1),d()&&(i=c(),a=c(),o=c(),s=c());var y=[1,1];if(d()&&d())switch(u()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(v+1)-2*i-2*a),height:(2-l)*(p+1)*16-(l?2:4)*(o+s),pixelRatio:y}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),a);function a(e){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{54:54}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}(s,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(e,t){for(var r=t,n=0;s.isHeader(e,t);)n+=10,n+=s._readSize(e,t+6),s.isFooter(e,t+10)&&(n+=10),t+=n;if(0<n)return e.subarray(r,r+n)}},{key:"_readSize",value:function(e,t){var r=0,r=(127&e[t])<<21;return r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]}},{key:"getTimeStamp",value:function(e){for(var t=s.getID3Frames(e),r=0;r<t.length;r++){var n=t[r];if(s.isTimeStampFrame(n))return s._readTimeStamp(n)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=s._readSize(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}},{key:"getID3Frames",value:function(e){for(var t=0,r=[];s.isHeader(e,t);){for(var n=s._readSize(e,t+6),i=(t+=10)+n;t+8<i;){var a=s._getFrameData(e.subarray(t)),o=s._decodeFrame(a);o&&r.push(o),t+=a.size+10}s.isFooter(e,t)&&(t+=10)}return r}},{key:"_decodeFrame",value:function(e){return"PRIV"===e.type?s._decodePrivFrame(e):"T"===e.type[0]?s._decodeTextFrame(e):"W"===e.type[0]?s._decodeURLFrame(e):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}}},{key:"_decodePrivFrame",value:function(e){if(!(e.size<2)){var t=s._utf8ArrayToStr(e.data),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}}},{key:"_decodeTextFrame",value:function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=s._utf8ArrayToStr(e.data.subarray(1));t+=r.length+1;t=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:t}}t=s._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:t}}}},{key:"_decodeURLFrame",value:function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=s._utf8ArrayToStr(e.data.subarray(1));t+=r.length+1;t=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:t}}t=s._utf8ArrayToStr(e.data);return{key:e.type,data:t}}},{key:"_utf8ArrayToStr",value:function(e){for(var t,r=void 0,n="",i=0,a=e.length;i<a;){var o=e[i++];switch(o>>4){case 0:return n;case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(o);break;case 12:case 13:r=e[i++],n+=String.fromCharCode((31&o)<<6|63&r);break;case 14:r=e[i++],t=e[i++],n+=String.fromCharCode((15&o)<<12|(63&r)<<6|(63&t)<<0)}}return n}}]),s);function s(){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},h=o(e(27)),i=e(54),p=o(e(30));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}n(s,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var i=h.default.getID3Data(e,0),a=90*h.default.getTimeStamp(i),o=i.length,s=e.length,u=0,l=0,c=this._audioTrack,d=[{pts:a,dts:a,data:i}];o<s;)if(p.default.isHeader(e,o)){var f=p.default.appendFrame(c,e,o,a,u);if(!f)break;o+=f.length,l=f.sample.pts,u++}else h.default.isHeader(e,o)?(i=h.default.getID3Data(e,o),d.push({pts:l,dts:l,data:i}),o+=i.length):o++;this.remuxer.remux(c,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=h.default.getID3Data(e,0);if(n&&void 0!==h.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(p.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),n=s;function s(e,t,r){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=r,this.remuxer=t}r.default=n},{27:27,30:30,54:54}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},e=e(35),s=e&&e.__esModule?e:{default:e},a=Math.pow(2,32)-1,n=(n(u,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(e,t,r,n){var i,a;e&&e.byteLength?(a={},(i=this.initData=u.parseInitSegment(e)).audio&&(a.audio={container:"audio/mp4",codec:t,initSegment:n?e:null}),i.video&&(a.video={container:"video/mp4",codec:r,initSegment:n?e:null}),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:a})):(t&&(this.audioCodec=t),r&&(this.videoCodec=r))}},{key:"append",value:function(e,t,r,n){var i=this.initData;i||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),i=this.initData);var a,o=this.initPTS;void 0===o&&(a=u.getStartDTS(i,e),this.initPTS=o=a-t,this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:o})),u.offsetStartDTS(i,e,o),o=u.getStartDTS(i,e),this.remuxer.remux(i.audio,i.video,null,null,o,r,n,e)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){if(8<=e.length){e=u.bin2str(e.subarray(4,8));return 0<=["moof","ftyp","styp"].indexOf(e)}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t}},{key:"writeUint32",value:function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}},{key:"findBox",value:function(e,t){var r,n,i,a,o,s=[];if(e.data?(a=e.start,n=e.end,e=e.data):(a=0,n=e.byteLength),!t.length)return null;for(r=a;r<n;)o=1<(i=u.readUint32(e,r))?r+i:n,u.bin2str(e.subarray(r+4,r+8))===t[0]&&(1===t.length?s.push({data:e,start:r+8,end:o}):(i=u.findBox({data:e,start:r+8,end:o},t.slice(1))).length&&(s=s.concat(i))),r=o;return s}},{key:"parseInitSegment",value:function(e){var i=[];return u.findBox(e,["moov","trak"]).forEach(function(e){var t,r,n=u.findBox(e,["tkhd"])[0];n&&(r=0===n.data[n.start]?12:20,t=u.readUint32(n,r),(n=u.findBox(e,["mdia","mdhd"])[0])&&(r=0===n.data[n.start]?12:20,r=u.readUint32(n,r),!(e=u.findBox(e,["mdia","hdlr"])[0])||(e={soun:"audio",vide:"video"}[u.bin2str(e.data.subarray(e.start+8,e.start+12))])&&(i[t]={timescale:r,type:e},i[e]={timescale:r,id:t})))}),i}},{key:"getStartDTS",value:function(r,e){var e=u.findBox(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),e=r[e].timescale||9e4;return(u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],r=u.readUint32(e,4);return 1===t&&(r*=Math.pow(2,32),r+=u.readUint32(e,8)),r})[0]||1/0)/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0}},{key:"offsetStartDTS",value:function(r,e,i){u.findBox(e,["moof","traf"]).map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),n=r[e].timescale||9e4;u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],r=u.readUint32(e,4);0===t?u.writeUint32(e,4,r-i*n):(r*=Math.pow(2,32),r+=u.readUint32(e,8),r-=i*n,t=Math.floor(r/(1+a)),r=Math.floor(r%(1+a)),u.writeUint32(e,4,t),u.writeUint32(e,8,r))})})})}}]),u);function u(e,t){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.remuxer=t}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{35:35}],30:[function(e,t,r){"use strict";var s={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){i=n+i*(10368e4/a.sampleRate),i={unit:t.subarray(r,r+a.frameLength),pts:i,dts:i};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(i),e.len+=a.frameLength,{sample:i,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=!!(2&e[t+2]);if(1!=r&&0!=i&&15!=i&&3!=a){i=1e3*s.BitratesMap[14*(3==r?3-n:3==n?3:4)+i-1],a=s.SamplingRateMap[3*(3==r?0:2==r?1:2)+a],o=o?1:0;return{sampleRate:a,channelCount:e[t+3]>>6==3?1:2,frameLength:3==n?(3==r?12:6)*i/a+o<<2:(3==r?144:72)*i/a+o|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4,n=t+(n=r&&r.frameLength?r.frameLength:n);if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}};t.exports=s},{}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},e=e(19),i=e&&e.__esModule?e:{default:e},n=(n(a,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(t,r,n,i){var a=t[r].unit,e=a.subarray(16,a.length-a.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),o=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e),a.set(e,16),i||o.decryptAacSamples(t,r+1,n)})}},{key:"decryptAacSamples",value:function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e}},{key:"decryptAvcSample",value:function(t,r,n,i,a,o){var s=this.discardEPB(a.data),e=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(e.buffer,function(e){a.data=u.getAvcDecryptedUnit(s,e),o||u.decryptAvcSamples(t,r,n+1,i)})}},{key:"decryptAvcSamples",value:function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}}}]),a);function a(e,t,r,n){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.decryptdata=r,this.discardEPB=n,this.decrypter=new i.default(e,t)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{19:19}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},h=o(e(22)),s=o(e(30)),L=o(e(35)),k=o(e(26)),i=o(e(31)),D=e(54),P=e(33);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}n(u,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new i.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:n,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=n}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,a,o,s,u,l=e.length,c=!1;this.contiguous=r;var d=this.pmtParsed,f=this._avcTrack,h=this._audioTrack,p=this._id3Track,g=f.id,v=h.id,y=p.id,m=this._pmtId,b=f.pesData,_=h.pesData,E=p.pesData,w=this._parsePAT,k=this._parsePMT,T=this._parsePES,S=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),A=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this);for(l-=l%188,i=0;i<l;i+=188)if(71===e[i]){if(a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2],1<(48&e[i+3])>>4){if((s=i+5+e[i+4])===i+188)continue}else s=i+4;switch(o){case g:a&&(b&&(u=T(b))&&S(u,!1),b={data:[],size:0}),b&&(b.data.push(e.subarray(s,i+188)),b.size+=i+188-s);break;case v:a&&(_&&(u=T(_))&&(h.isAAC?x:A)(u),_={data:[],size:0}),_&&(_.data.push(e.subarray(s,i+188)),_.size+=i+188-s);break;case y:a&&(E&&(u=T(E))&&O(u),E={data:[],size:0}),E&&(E.data.push(e.subarray(s,i+188)),E.size+=i+188-s);break;case 0:a&&(s+=e[s]+1),m=this._pmtId=w(e,s);break;case m:a&&(s+=e[s]+1);var R=k(e,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=R.avc)&&(f.id=g),0<(v=R.audio)&&(h.id=v,h.isAAC=R.isAAC),0<(y=R.id3)&&(p.id=y),c&&!d&&(D.logger.log("reparse from beginning"),c=!1,i=-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(L.default.ERROR,{type:P.ErrorTypes.MEDIA_ERROR,details:P.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(u=T(b))?(S(u,!0),f.pesData=null):f.pesData=b,_&&(u=T(_))?((h.isAAC?x:A)(u),h.pesData=null):(_&&_.size&&D.logger.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=_),E&&(u=T(E))?(O(u),p.pesData=null):p.pesData=E,null==this.sampleAes?this.remuxer.remux(h,f,p,this._txtTrack,t,r,n):this.decryptAndRemux(h,f,p,this._txtTrack,t,r,n)}},{key:"decryptAndRemux",value:function(e,t,r,n,i,a,o){var s;e.samples&&e.isAAC?(s=this).sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)}):this.decryptAndRemuxAvc(e,t,r,n,i,a,o)}},{key:"decryptAndRemuxAvc",value:function(e,t,r,n,i,a,o){var s;t.samples?(s=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,a,o)}):this.remuxer.remux(e,t,r,n,i,a,o)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r,n){var i,a={audio:-1,avc:-1,id3:-1,isAAC:!0},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){D.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=i);break;case 21:-1===a.id3&&(a.id3=i);break;case 219:if(!n){D.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=i);break;case 3:case 4:r?-1===a.audio&&(a.audio=i,a.isAAC=!1):D.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:D.logger.warn("HEVC stream type found, not supported for now");break;default:D.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a}},{key:"_parsePES",value:function(e){var t,r,n,i,a,o,s=0,u=e.data;if(!e||0===e.size)return null;for(;u[0].length<19&&1<u.length;){var l=new Uint8Array(u[0].length+u[1].length);l.set(u[0]),l.set(u[1],u[0].length),u[0]=l,u.splice(1,1)}if(1!==((t=u[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&(4294967295<(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)&&(i-=8589934592),64&n?(4294967295<(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(a-=8589934592),54e5<i-a&&(D.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a)):a=i),o=(n=t[8])+9,e.size-=o;for(var c=new Uint8Array(e.size),d=0,f=u.length;d<f;d++){var h=(t=u[d]).byteLength;if(o){if(h<o){o-=h;continue}t=t.subarray(o),h-=o,o=0}c.set(t,s),s+=h}return r&&(r-=n+3),{data:c,pts:i,dts:a,len:r}}},{key:"pushAccesUnit",value:function(e,t){var r,n;e.units.length&&e.frame&&(n=(r=t.samples).length,!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++),e.debug.length&&D.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(h,e){function p(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}}var g,v,y,m=this,b=this._avcTrack,t=this._parseAVCNALu(h.data),_=this.avcSample,E=!1,w=this.pushAccesUnit.bind(this);h.data=null,_&&t.length&&(w(_,b),_=this.avcSample=p(!1,h.pts,h.dts,"")),t.forEach(function(e){switch(e.type){case 1:v=!0,_.frame=!0;var t=e.data;E&&4<t.length&&(2!==(l=new k.default(t).readSliceType())&&4!==l&&7!==l&&9!==l||(_.key=!0));break;case 5:v=!0,(_=_||(m.avcSample=p(!0,h.pts,h.dts,""))).key=!0,_.frame=!0;break;case 6:v=!0,(g=new k.default(m.discardEPB(e.data))).readUByte();for(var r=0,n=0,i=!1,a=0;!i&&1<g.bytesAvailable;){for(r=0;r+=a=g.readUByte(),255===a;);for(n=0;n+=a=g.readUByte(),255===a;);if(4===r&&0!==g.bytesAvailable){if(i=!0,181===g.readUByte()&&49===g.readUShort()&&1195456820===g.readUInt()&&3===g.readUByte()){var o=g.readUByte(),s=31&o,u=[o,g.readUByte()];for(y=0;y<s;y++)u.push(g.readUByte()),u.push(g.readUByte()),u.push(g.readUByte());m._insertSampleInOrder(m._txtTrack.samples,{type:3,pts:h.pts,bytes:u})}}else if(n<g.bytesAvailable)for(y=0;y<n;y++)g.readUByte()}break;case 7:if(E=v=!0,!b.sps){var l=(g=new k.default(e.data)).readSPS();b.width=l.width,b.height=l.height,b.pixelRatio=l.pixelRatio,b.sps=[e.data],b.duration=m._duration;var c=e.data.subarray(1,4),d="avc1.";for(y=0;y<3;y++){var f=c[y].toString(16);d+=f=f.length<2?"0"+f:f}b.codec=d}break;case 8:v=!0,b.pps||(b.pps=[e.data]);break;case 9:v=!1,_&&w(_,b),_=m.avcSample=p(!1,h.pts,h.dts,"");break;case 12:v=!1;break;default:v=!1,_&&(_.debug+="unknown NAL "+e.type+" ")}_&&v&&_.units.push(e)}),e&&_&&(w(_,b),this.avcSample=null)}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(0<r){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;0<=n;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e,t=this.avcSample,r=void 0;return r=(t=!t||0===t.units.length?(e=this._avcTrack.samples)[e.length-1]:t)?(t=t.units)[t.length-1]:r}},{key:"_parseAVCNALu",value:function(e){var t,r,n,i,a,o,s,u,l=0,c=e.byteLength,d=this._avcTrack,f=d.naluState||0,h=f,p=[],g=-1;for(-1===f&&(i=31&e[g=0],f=0,l=1);l<c;)t=e[l++],f=f?1!==f?t?1===t?(0<=g?(n={data:e.subarray(g,l-f-1),type:i},p.push(n)):(a=this._getLastNalUnit())&&(h&&l<=4-h&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-h)),0<(r=l-f-1))&&((o=new Uint8Array(a.data.byteLength+r)).set(a.data,0),o.set(e.subarray(0,r),a.data.byteLength),a.data=o),l<c?(i=31&e[g=l],0):-1):0:3:t?0:2:t?0:1;return 0<=g&&0<=f&&(n={data:e.subarray(g,c),type:i,state:f},p.push(n)),0===p.length&&(s=this._getLastNalUnit())&&((u=new Uint8Array(s.data.byteLength+e.byteLength)).set(s.data,0),u.set(e,s.data.byteLength),s.data=u),d.naluState=f,p}},{key:"discardEPB",value:function(e){for(var t=e.byteLength,r=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;for(var i=t-r.length,a=new Uint8Array(i),o=0,n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),a[n]=e[o];return a}},{key:"_parseAACPES",value:function(e){var t,r,n,i,a,o,s=this._audioTrack,u=e.data,l=e.pts,c=this.aacOverFlow,d=this.aacLastPTS;for(c&&((e=new Uint8Array(c.byteLength+u.byteLength)).set(c,0),e.set(u,c.byteLength),u=e),r=0,i=u.length;r<i-1&&!h.default.isHeader(u,r);r++);if(!r||(o=r<i-1?(a="AAC PES did not start with ADTS header,offset:"+r,!1):(a="no ADTS header found in AAC PES",!0),D.logger.warn("parsing error:"+a),this.observer.trigger(L.default.ERROR,{type:P.ErrorTypes.MEDIA_ERROR,details:P.ErrorDetails.FRAG_PARSING_ERROR,fatal:o,reason:a}),!o)){for(h.default.initTrackConfig(s,this.observer,u,r,this.audioCodec),t=0,o=h.default.getFrameDuration(s.samplerate),c&&d&&(o=d+o,1<Math.abs(o-l)&&(D.logger.log("AAC: align PTS for overlapping frames by "+Math.round((o-l)/90)),l=o));r<i;)if(h.default.isHeader(u,r)&&r+5<i){var f=h.default.appendFrame(s,u,r,l,t);if(!f)break;r+=f.length,n=f.sample.pts,t++}else r++;c=r<i?u.subarray(r,i):null,this.aacOverFlow=c,this.aacLastPTS=n}}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,r=t.length,n=0,i=0,a=e.pts;i<r;)if(s.default.isHeader(t,i)){var o=s.default.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return 564<=e.length&&71===e[0]&&71===e[188]&&71===e[376]}}]),n=u;function u(e,t,r,n){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}r.default=n},{22:22,26:26,30:30,31:31,33:33,35:35,54:54}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},a=e(54),o=e(33),e=e(35),s=e&&e.__esModule?e:{default:e};function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i(l,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===n(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){try{!function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}.call(this,e,t).call()}catch(t){a.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(s.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),i=l;function l(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}r.default=i},{33:33,35:35,54:54}],35:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],37:[function(e,t,r){"use strict";t.exports={isBuffered:function(e,t){if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0;return!1},bufferInfo:function(e,t,r){if(e){for(var n=e.buffered,i=[],a=0;a<n.length;a++)i.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(i,t,r)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var n,i,a,o,s,u=[];for(e.sort(function(e,t){return e.start-t.start||t.end-e.end}),s=0;s<e.length;s++){var l,c=u.length;c?(l=u[c-1].end,e[s].start-l<r?e[s].end>l&&(u[c-1].end=e[s].end):u.push(e[s])):u.push(e[s])}for(n=s=0,i=a=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(d<=t+r&&t<f)i=d,n=(a=f)-t;else if(t+r<d){o=d;break}}return{len:n,start:i,end:a,nextStart:o}}}},{}],38:[function(e,t,r){"use strict";var h=e(54),p={mergeDetails:function(e,t){var r,n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=e.fragments,s=t.fragments,u=0;if(i<n)t.PTSKnown=!1;else{for(var l=n;l<=i;l++){var c=o[a+l],d=s[l];d&&c&&(u=c.cc-d.cc,isNaN(c.startPTS)||(d.start=d.startPTS=c.startPTS,d.endPTS=c.endPTS,d.duration=c.duration,d.backtracked=c.backtracked,d.dropped=c.dropped,r=d))}if(u)for(h.logger.log("discontinuity sliding from playlist, take drift into account"),l=0;l<s.length;l++)s[l].cc+=u;if(r)p.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(0<=a&&a<o.length)for(var f=o[a].start,l=0;l<s.length;l++)s[l].start+=f;t.PTSKnown=e.PTSKnown}},updateFragPTSDTS:function(e,t,r,n,i,a){var o=r;isNaN(t.startPTS)||(s=Math.abs(t.startPTS-r),isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS));var s=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.startDTS=i,t.endDTS=a,t.duration=n-r;var u,l,r=t.sn;if(!e||r<e.startSN||r>e.endSN)return 0;for(r=r-e.startSN,(u=e.fragments)[r]=t,l=r;0<l;l--)p.updatePTS(u,l,l-1);for(l=r;l<u.length-1;l++)p.updatePTS(u,l,l+1);return e.PTSKnown=!0,s},updatePTS:function(e,t,r){var n=e[t],i=e[r],e=i.startPTS;isNaN(e)?i.start=t<r?n.start+n.duration:Math.max(n.start-i.duration,0):t<r?(n.duration=e-n.start,n.duration<0&&h.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-e,i.duration<0&&h.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=p},{54:54}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},i=l(e(2)),a=l(e(35)),o=e(33),v=l(e(43)),y=l(e(41)),m=l(e(42)),b=l(e(13)),_=l(e(12)),E=l(e(11)),w=e(54),k=l(e(1)),s=e(4);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}n(T,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return e&&t}},{key:"version",get:function(){return"0.7.11"}},{key:"Events",get:function(){return a.default}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return T.defaultConfig||s.hlsDefaultConfig},set:function(e){T.defaultConfig=e}}]),n(T,[{key:"destroy",value:function(){w.logger.log("destroy"),this.trigger(a.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){w.logger.log("attachMedia"),this.media=e,this.trigger(a.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){w.logger.log("detachMedia"),this.trigger(a.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=i.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),w.logger.log("loadSource:"+e),this.url=e,this.trigger(a.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;w.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})}},{key:"stopLoad",value:function(){w.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){w.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){w.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){w.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){w.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){w.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){w.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){w.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){w.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),n=T;function T(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);var r,n=T.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(r in n)r in e||(e[r]=n[r]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,w.enableLogs)(e.debug),this.config=e,this._autoLevelCapping=-1;var i=this.observer=new k.default;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i);var a=this.abrController=new e.abrController(this),o=new e.bufferController(this),s=new e.capLevelController(this),u=new e.fpsController(this),l=new v.default(this),c=new y.default(this),d=new m.default(this),f=new E.default(this),h=[this.levelController=new _.default(this),this.streamController=new b.default(this)],p=e.audioStreamController;p&&h.push(new p(this)),this.networkControllers=h;var g=[l,c,d,a,o,s,u,f];(p=e.audioTrackController)&&(f=new p(this),this.audioTrackController=f,g.push(f)),(p=e.subtitleTrackController)&&(p=new p(this),this.subtitleTrackController=p,g.push(p)),[e.subtitleStreamController,e.timelineController].forEach(function(e){e&&g.push(new e(t))}),this.coreComponents=g}r.default=n},{1:1,11:11,12:12,13:13,2:2,33:33,35:35,4:4,41:41,42:42,43:43,54:54}],40:[function(e,t,r){"use strict";t.exports=e(39).default},{39:39}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},i=l(e(35)),a=l(e(34)),o=e(33),s=e(54);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(c,a.default),n(c,[{key:"destroy",value:function(){var e,t=this.loaders;for(e in t){var r=t[e];r&&r.destroy()}this.loaders={},a.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=this.hls.config;t.loaded=0,n&&(s.logger.warn("abort previous fragment loader for type:"+r),n.abort());var n=this.loaders[r]=t.loader=new(void 0!==i.fLoader?i.fLoader:i.loader)(i),e=void 0,e={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},r=t.byteRangeStartOffset,t=t.byteRangeEndOffset;isNaN(r)||isNaN(t)||(e.rangeStart=r,e.rangeEnd=t),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(e,t,i)}},{key:"loadsuccess",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e=e.data,r=r.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:e,frag:r,stats:t,networkDetails:n})}},{key:"loaderror",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})}},{key:"loadtimeout",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})}},{key:"loadprogress",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,t=t.frag;t.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:t,stats:e,networkDetails:n})}}]),n=c;function c(e){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,i.default.FRAG_LOADING));return e.loaders={},e}r.default=n},{33:33,34:34,35:35,54:54}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},o=l(e(35)),i=l(e(34)),a=e(33),s=e(54);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(c,i.default),n(c,[{key:"destroy",value:function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},i.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=t.decryptdata,a=i.uri;a!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new e.loader(e),this.decrypturl=a,this.decryptkey=null,r={url:a,frag:t,responseType:"arraybuffer"},a={timeout:e.fragLoadingTimeOut,maxRetry:e.fragLoadingMaxRetry,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},e={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(r,a,e)):this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){r=r.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),n=c;function c(e){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,o.default.KEY_LOADING));return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}r.default=n},{33:33,34:34,35:35,54:54}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},i=s(e(2)),d=s(e(35)),a=s(e(34)),f=e(33),w=s(e(47)),k=e(54);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,l=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),S=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,x=(n(g,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=i.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),g),A=(n(p,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new x).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=i.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){var e,t,r;return this._byteRange||(e=this._byteRange=[],this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,e[0]=r||0):e[0]=parseInt(t[1]),e[1]=parseInt(t[0])+e[0])),this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),p),n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,a.default),n(h,[{key:"destroy",value:function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},a.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var n=r.context;if(n&&n.url===e)return void k.logger.trace("playlist request ongoing");k.logger.warn("abort previous loader for type:"+t.type),r.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,n=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,n=i.manifestLoadingMaxRetryTimeout):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,n=i.levelLoadingMaxRetryTimeout,k.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader=new(void 0!==i.pLoader?i.pLoader:i.loader)(i),t.url=e,t.responseType="",s={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:n},n={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,s,n)}},{key:"resolve",value:function(e,t){return i.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r,n=[];for(c.lastIndex=0;null!=(r=c.exec(e));){var i={},a=i.attrs=new w.default(r[1]);i.url=this.resolve(r[2],t);var o=a.decimalResolution("RESOLUTION");if(o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME,s=a.CODECS)for(var s=s.split(/[ ,]+/),u=0;u<s.length;u++){var l=s[u];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}n.push(i)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=[],o=0;for(l.lastIndex=0;null!=(n=l.exec(e));){var s={},u=new w.default(n[1]);u.TYPE===r&&(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=r,s.default="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=this.resolve(u.URI,t)),s.lang=u.LANGUAGE,s.name||(s.name=s.lang),i&&(s.audioCodec=i),s.id=o++,a.push(s))}return a}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return 2<r.length?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,n){var i,a,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new x,c=0,d=null,f=new A;for(T.lastIndex=0;null!==(i=T.exec(e));){var h,p=i[1];if(p){f.duration=parseFloat(p);var g=(" "+i[2]).slice(1);f.title=g||null,f.tagList.push(g?["INF",p,g]:["INF",p])}else if(i[3])isNaN(f.duration)||(p=o++,f.type=n,f.start=s,f.levelkey=l,f.sn=p,f.level=r,f.cc=c,f.baseurl=t,f.relurl=(" "+i[3]).slice(1),u.fragments.push(f),s+=(d=f).duration,f=new A);else if(i[4])f.rawByteRange=(" "+i[4]).slice(1),d&&(h=d.byteRangeEndOffset)&&(f.lastByteRangeEndOffset=h);else if(i[5])f.rawProgramDateTime=(" "+i[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(i=i[0].match(S),a=1;a<i.length&&void 0===i[a];a++);var v=(" "+i[a+1]).slice(1),y=(" "+i[a+2]).slice(1);switch(i[a]){case"#":f.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":u.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(v);break;case"TARGETDURATION":u.targetduration=parseFloat(v);break;case"VERSION":u.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(v);break;case"KEY":var m=new w.default(v),b=m.enumeratedString("METHOD"),_=m.URI,m=m.hexadecimalInteger("IV");b&&(l=new x,_&&0<=["AES-128","SAMPLE-AES"].indexOf(b)&&(l.method=b,l.baseuri=t,l.reluri=_,l.key=null,l.iv=m));break;case"START":var E=new w.default(v).decimalFloatingPoint("TIME-OFFSET");isNaN(E)||(u.startTimeOffset=E);break;case"MAP":E=new w.default(v);f.relurl=E.URI,f.rawByteRange=E.BYTERANGE,f.baseurl=t,f.level=r,f.type=n,f.sn="initSegment",u.initSegment=f,f=new A;break;default:k.logger.warn("line parsed but not handled: "+i)}}}return(f=d)&&!f.relurl&&(u.fragments.pop(),s-=f.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(e,t,r){var n,i,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=e.data,s=e.url,u=r.type,l=r.id,c=r.level,e=this.hls;(this.loaders[u]=void 0)!==s&&0!==s.indexOf("data:")||(s=r.url),t.tload=performance.now(),0===o.indexOf("#EXTM3U")?0<o.indexOf("#EXTINF:")?(r="audioTrack"!==u&&"subtitleTrack"!==u,n=isNaN(c)?isNaN(l)?0:l:c,(n=this.parseLevelPlaylist(o,s,n,"audioTrack"===u?"audio":"subtitleTrack"===u?"subtitle":"main")).tload=t.tload,"manifest"===u&&e.trigger(d.default.MANIFEST_LOADED,{levels:[{url:s,details:n}],audioTracks:[],url:s,stats:t,networkDetails:a}),t.tparsed=performance.now(),n.targetduration?r?e.trigger(d.default.LEVEL_LOADED,{details:n,level:c||0,id:l||0,stats:t,networkDetails:a}):"audioTrack"===u?e.trigger(d.default.AUDIO_TRACK_LOADED,{details:n,id:l,stats:t,networkDetails:a}):"subtitleTrack"===u&&e.trigger(d.default.SUBTITLE_TRACK_LOADED,{details:n,id:l,stats:t,networkDetails:a}):e.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"invalid targetduration",networkDetails:a})):(n=this.parseMasterPlaylist(o,s)).length?(l=this.parseMasterPlaylistMedia(o,s,"AUDIO",n[0].audioCodec),o=this.parseMasterPlaylistMedia(o,s,"SUBTITLES"),l.length&&(i=!1,l.forEach(function(e){e.url||(i=!0)}),!1===i&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(k.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main"}))),e.trigger(d.default.MANIFEST_LOADED,{levels:n,audioTracks:l,subtitles:o,url:s,stats:t,networkDetails:a})):e.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no level found in manifest",networkDetails:a}):e.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no EXTM3U delimiter",networkDetails:a})}},{key:"loaderror",value:function(e,t){var r,n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":r=f.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=f.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:a.url,loader:a,response:e,context:t,networkDetails:i})}},{key:"loadtimeout",value:function(e,t){var r,n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":r=f.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=f.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:a.url,loader:a,context:t,networkDetails:i})}}]),h);function h(e){u(this,h);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,d.default.MANIFEST_LOADING,d.default.LEVEL_LOADING,d.default.AUDIO_TRACK_LOADING,d.default.SUBTITLE_TRACK_LOADING));return e.loaders={},e}function p(){u(this,p),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function g(){u(this,g),this.method=null,this.key=null,this.iv=null,this._uri=null}r.default=n},{2:2,33:33,34:34,35:35,47:47,54:54}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},a=Math.pow(2,32)-1,n=(n(d,null,[{key:"init",value:function(){for(var e in d.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})d.types.hasOwnProperty(e)&&(d.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);d.HDLR_TYPES={video:t,audio:r};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);d.STTS=d.STSC=d.STCO=i,d.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);d.FTYP=d.box(d.types.ftyp,t,i,t,r),d.DINF=d.box(d.types.dinf,d.box(d.types.dref,n))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t}},{key:"hdlr",value:function(e){return d.box(d.types.hdlr,d.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return d.box(d.types.mdat,e)}},{key:"mdhd",value:function(e,t){t*=e;var r=Math.floor(t/(1+a)),t=Math.floor(t%(1+a));return d.box(d.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"mdia",value:function(e){return d.box(d.types.mdia,d.mdhd(e.timescale,e.duration),d.hdlr(e.type),d.minf(e))}},{key:"mfhd",value:function(e){return d.box(d.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?d.box(d.types.minf,d.box(d.types.smhd,d.SMHD),d.DINF,d.stbl(e)):d.box(d.types.minf,d.box(d.types.vmhd,d.VMHD),d.DINF,d.stbl(e))}},{key:"moof",value:function(e,t,r){return d.box(d.types.moof,d.mfhd(e),d.traf(r,t))}},{key:"moov",value:function(e){for(var t=e.length,r=[];t--;)r[t]=d.trak(e[t]);return d.box.apply(null,[d.types.moov,d.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(d.mvex(e)))}},{key:"mvex",value:function(e){for(var t=e.length,r=[];t--;)r[t]=d.trex(e[t]);return d.box.apply(null,[d.types.mvex].concat(r))}},{key:"mvhd",value:function(e,t){t*=e;var r=Math.floor(t/(1+a)),t=Math.floor(t%(1+a)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d.box(d.types.mvhd,t)}},{key:"sdtp",value:function(e){for(var t,r=e.samples||[],n=new Uint8Array(4+r.length),i=0;i<r.length;i++)t=r[i].flags,n[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return d.box(d.types.sdtp,n)}},{key:"stbl",value:function(e){return d.box(d.types.stbl,d.stsd(e),d.box(d.types.stts,d.STTS),d.box(d.types.stsc,d.STSC),d.box(d.types.stsz,d.STSZ),d.box(d.types.stco,d.STCO))}},{key:"avc1",value:function(e){for(var t,r,n=[],i=[],a=0;a<e.sps.length;a++)r=(t=e.sps[a]).byteLength,n.push(r>>>8&255),n.push(255&r),n=n.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)r=(t=e.pps[a]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(t));var o=d.box(d.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(i))),s=e.width,u=e.height,l=e.pixelRatio[0],c=e.pixelRatio[1];return d.box(d.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,d.box(d.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d.box(d.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,c>>24,c>>16&255,c>>8&255,255&c])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var t=e.samplerate;return d.box(d.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),d.box(d.types.esds,d.esds(e)))}},{key:"mp3",value:function(e){var t=e.samplerate;return d.box(d.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}},{key:"stsd",value:function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?d.box(d.types.stsd,d.STSD,d.mp4a(e)):d.box(d.types.stsd,d.STSD,d.mp3(e)):d.box(d.types.stsd,d.STSD,d.avc1(e))}},{key:"tkhd",value:function(e){var t=e.id,r=e.duration*e.timescale,n=e.width,i=e.height,e=Math.floor(r/(1+a)),r=Math.floor(r%(1+a));return d.box(d.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}},{key:"traf",value:function(e,t){var r=d.sdtp(e),n=e.id,i=Math.floor(t/(1+a)),t=Math.floor(t%(1+a));return d.box(d.types.traf,d.box(d.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),d.box(d.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t])),d.trun(e,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,d.box(d.types.trak,d.tkhd(e),d.mdia(e))}},{key:"trex",value:function(e){e=e.id;return d.box(d.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,t){var r,n,i,a,o,s=e.samples||[],u=s.length,e=12+16*u,l=new Uint8Array(e);for(l.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),r=0;r<u;r++)n=(o=s[r]).duration,i=o.size,a=o.flags,o=o.cts,l.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*r);return d.box(d.types.trun,l)}},{key:"initSegment",value:function(e){d.types||d.init();var t=d.moov(e);return(e=new Uint8Array(d.FTYP.byteLength+t.byteLength)).set(d.FTYP),e.set(t,d.FTYP.byteLength),e}}]),d);function d(){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},F=a(e(36)),H=a(e(35)),W=e(54),z=a(e(44)),V=e(33);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}n(o,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,n,i,a,o){var s,u,l,c,d,f,h;this.ISGenerated?o&&(d=this._initPTS,s=this._PTSNormalize,u=e.inputTimeScale||t.inputTimeScale,c=f=1/0,(l=e.samples).length&&(f=c=s(l[0].pts-u*i,d)),(l=t.samples).length&&(l=l[0],f=Math.min(f,s(l.pts-u*i,d)),c=Math.min(c,s(l.dts-u*i,d))),f!==1/0&&(d=d-f,Math.abs(d)>10*u&&(W.logger.warn("timestamp inconsistency, "+(d/u).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=f,this._initDTS=c,this.observer.trigger(H.default.INIT_PTS_FOUND,{initPTS:f})))):this.generateIS(e,t,i),this.ISGenerated&&(e.samples.length?(e.timescale||(W.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i)),f=this.remuxAudio(e,i,a,o),t.samples.length&&(h=void 0,f&&(h=f.endPTS-f.startPTS),t.timescale||(W.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,a,h,o))):(h=void 0,(h=t.samples.length?this.remuxVideo(t,i,a,o):h)&&e.codec&&this.remuxEmptyAudio(e,i,a,h))),r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(H.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var n,i,a=this.observer,o=e.samples,s=t.samples,u=this.typeSupported,l="audio/mp4",c={},d={tracks:c},f=void 0===this._initPTS;f&&(n=i=1/0),e.config&&o.length&&(e.timescale=e.samplerate,W.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(l="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),c.audio={container:l,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:z.default.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(n=i=o[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&s.length&&(e=t.inputTimeScale,t.timescale=e,c.video={container:"video/mp4",codec:t.codec,initSegment:z.default.initSegment([t]),metadata:{width:t.width,height:t.height}},f&&(n=Math.min(n,s[0].pts-e*r),i=Math.min(i,s[0].dts-e*r),this.observer.trigger(H.default.INIT_PTS_FOUND,{initPTS:n}))),Object.keys(c).length?(a.trigger(H.default.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,f&&(this._initPTS=n,this._initDTS=i)):a.trigger(H.default.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,n,i){var a,o,s=8,u=e.timescale,l=e.samples,c=[],d=l.length,f=this._PTSNormalize,h=this._initDTS,p=this.nextAvcDts,g=this.isSafari;g&&(r|=l.length&&p&&(i&&Math.abs(t-p/u)<.1||Math.abs(l[0].pts-p-h)<u/5)),r||(p=t*u),l.forEach(function(e){e.pts=f(e.pts-h,p),e.dts=f(e.dts-h,p)}),l.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var v=l.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(v<0){W.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(v/90)+" ms to overcome this issue");for(var y=0;y<l.length;y++)l[y].dts+=v}var i=l[0],m=Math.max(i.dts,0),b=Math.max(i.pts,0),t=Math.round((m-p)/90);r&&t&&(1<t?W.logger.log("AVC:"+t+" ms hole between fragments detected,filling it"):t<-1&&W.logger.log("AVC:"+-t+" ms overlapping between fragments detected"),m=p,l[0].dts=m,b=Math.max(b-t,p),l[0].pts=b,W.logger.log("Video/PTS/DTS adjusted: "+Math.round(b/90)+"/"+Math.round(m/90)+",delta:"+t+" ms")),i=l[l.length-1],r=Math.max(i.dts,0),t=Math.max(i.pts,0,r),g&&(a=Math.round((r-m)/(l.length-1)));for(var _=0,E=0,w=0;w<d;w++){for(var k=l[w],T=k.units,S=T.length,x=0,A=0;A<S;A++)x+=T[A].data.length;E+=x,_+=S,k.length=x,k.dts=g?m+w*a:Math.max(k.dts,m),k.pts=Math.max(k.pts,k.dts)}i=E+4*_+8;try{o=new Uint8Array(i)}catch(e){return void this.observer.trigger(H.default.ERROR,{type:V.ErrorTypes.MUX_ERROR,details:V.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:i,reason:"fail allocating video mdat "+i})}var O=new DataView(o.buffer);O.setUint32(0,i),o.set(z.default.types.mdat,4);for(var R=0;R<d;R++){for(var L,D,P,C=l[R],I=C.units,M=0,F=void 0,N=0,j=I.length;N<j;N++){var U=I[N],B=U.data,U=U.data.byteLength;O.setUint32(s,U),s+=4,o.set(B,s),s+=U,M+=4+U}F=g?Math.max(0,a*Math.round((C.pts-C.dts)/a)):(R<d-1?a=l[R+1].dts-C.dts:(P=this.config,L=C.dts-l[0<R?R-1:R].dts,P.stretchShortVideoTrack?(D=P.maxBufferHole,P=P.maxSeekHole,Math.floor(Math.min(D,P)*u)<(P=(n?b+n*u:this.nextAudioPts)-C.pts)?((a=P-L)<0&&(a=L),W.logger.log("It is approximately "+P/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=L):a=L),Math.round(C.pts-C.dts)),c.push({size:M,duration:a,cts:F,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:C.key?2:1,isNonSync:C.key?0:1}})}this.nextAvcDts=r+a;var G,r=e.dropped;e.len=0,e.nbNalu=0,e.dropped=0,c.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((G=c[0].flags).dependsOn=2,G.isNonSync=0),e.samples=c,G=z.default.moof(e.sequenceNumber++,m,e),e.samples=[];r={data1:G,data2:o,startPTS:b/u,endPTS:(t+a)/u,startDTS:m/u,endDTS:this.nextAvcDts/u,type:"video",nb:c.length,dropped:r};return this.observer.trigger(H.default.FRAG_PARSING_DATA,r),r}},{key:"remuxAudio",value:function(e,t,r,n){var i,a,o,s,u,l=e.inputTimeScale,c=l/e.timescale,d=(e.isAAC?1024:1152)*c,f=this._PTSNormalize,h=this._initDTS,p=!e.isAAC&&this.typeSupported.mpeg,g=e.samples,v=[],y=this.nextAudioPts;if((r|=g.length&&y&&(n&&Math.abs(t-y/l)<.1||Math.abs(g[0].pts-y-h)<20*d))||(y=t*l),g.forEach(function(e){e.pts=e.dts=f(e.pts-h,y)}),g.sort(function(e,t){return e.pts-t.pts}),n&&e.isAAC)for(var m=0,b=y;m<g.length;){var _=g[m],E=_.pts-b,w=Math.abs(1e3*E/l);if(E<=-d)W.logger.warn("Dropping 1 audio frame @ "+(b/l).toFixed(3)+"s due to "+w+" ms overlap."),g.splice(m,1),e.len-=_.unit.length;else if(d<=E&&w<1e4&&b){var k=Math.round(E/d);W.logger.warn("Injecting "+k+" audio frame @ "+(b/l).toFixed(3)+"s due to "+Math.round(1e3*E/l)+" ms gap.");for(var T=0;T<k;T++){var S=Math.max(b,0);(a=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(W.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=_.unit.subarray()),g.splice(m,0,{unit:a,pts:S,dts:S}),e.len+=a.length,b+=d,m++}_.pts=_.dts=b,b+=d,m++}else Math.abs(E),_.pts=_.dts=b,b+=d,m++}for(var x=0,A=g.length;x<A;x++){var O=g[x],R=O.unit,O=O.pts;if(void 0!==u)i.duration=Math.round((O-u)/c);else{var L=Math.round(1e3*(O-y)/l),D=0;if(r&&e.isAAC&&L){if(0<L&&L<1e4)D=Math.round((O-y)/d),W.logger.log(L+" ms hole between AAC samples detected,filling it"),0<D&&((a=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a=R.subarray()),e.len+=D*a.length);else if(L<-12){W.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(y/l).toFixed(3)+"s/"+(O/l).toFixed(3)+"s/"+-L+"ms"),e.len-=R.byteLength;continue}O=y}if(s=Math.max(0,O),!(0<e.len))return;var L=p?e.len:e.len+8,P=p?0:8;try{o=new Uint8Array(L)}catch(e){return void this.observer.trigger(H.default.ERROR,{type:V.ErrorTypes.MUX_ERROR,details:V.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating audio mdat "+L})}p||(new DataView(o.buffer).setUint32(0,L),o.set(z.default.types.mdat,4));for(var C=0;C<D;C++)(a=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(W.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=R.subarray()),o.set(a,P),P+=a.byteLength,i={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},v.push(i)}o.set(R,P);L=R.byteLength;P+=L,v.push(i={size:L,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),u=O}var I=0,M=v.length;if(2<=M&&(I=v[M-2].duration,i.duration=I),M){this.nextAudioPts=y=u+c*I,e.len=0,e.samples=v,t=p?new Uint8Array:z.default.moof(e.sequenceNumber++,s/c,e),e.samples=[];n=s/l,I=y/l,M={data1:t,data2:o,startPTS:n,endPTS:I,startDTS:n,endDTS:I,type:"audio",nb:M};return this.observer.trigger(H.default.FRAG_PARSING_DATA,M),M}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,n){var i=e.inputTimeScale,a=i/(e.samplerate||i),o=this.nextAudioPts,s=(void 0!==o?o:n.startDTS*i)+this._initDTS,i=n.endDTS*i+this._initDTS,u=1024*a,l=Math.ceil((i-s)/u),c=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(W.logger.warn("remux empty Audio"),c){for(var d=[],f=0;f<l;f++){var h=s+f*u;d.push({unit:c,pts:h,dts:h}),e.len+=c.length}e.samples=d,this.remuxAudio(e,t,r)}else W.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var r,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(r=e.samples[s]).pts=(r.pts-a)/i,r.dts=(r.dts-o)/i;this.observer.trigger(H.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(r=e.samples[o]).pts=(r.pts-a)/i;this.observer.trigger(H.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=r;return e}}]),n=o;function o(e,t,r,n){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=t,this.typeSupported=r;r=navigator.userAgent;this.isSafari=n&&-1<n.indexOf("Apple")&&r&&!r.match("CriOS"),this.ISGenerated=!1}r.default=n},{33:33,35:35,36:36,44:44,54:54}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},e=e(35),c=e&&e.__esModule?e:{default:e},n=(n(i,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,n,i,a,o,s){var u=this.observer,l="";e&&(l+="audio"),t&&(l+="video"),u.trigger(c.default.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:l,nb:1,dropped:0}),u.trigger(c.default.FRAG_PARSED)}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{35:35}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=(function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}(o,[{key:"decimalInteger",value:function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"hexadecimalInteger",value:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){e=n.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(i.lastIndex=0;null!==(t=i.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r}}]),o);function o(e){for(var t in function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),e="string"==typeof e?o.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=a},{}],48:[function(e,t,r){"use strict";t.exports={search:function(e,t){for(var r,n,i=0,a=e.length-1;i<=a;){var o=t(n=e[r=(i+a)/2|0]);if(0<o)i=1+r;else{if(!(o<0))return n;a=r-1}}return null}}},{}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)}function u(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t}var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},g=(n(S,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),S),v=(n(T,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),T),y=(n(k,[{key:"equals",value:function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=100)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(1<e)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){144<=e&&this.backSpace();var t=s(e);100<=this.pos?p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}},{key:"clearFromPos",value:function(e){for(var t=e;t<100;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,r=0;r<100;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),k),m=(n(w,[{key:"reset",value:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14}},{key:"equals",value:function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&a<p.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[n+o])}}this.currRow=t;var s=this.rows[this.currRow];null!==e.indent&&(a=e.indent,a=Math.max(a-1,0),s.setCursor(e.indent),e.color=s.chars[a].penState.foreground);e={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(e)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){var e;null!==this.nrRollUpRows?(p.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),p.log("INFO","Rolling up")):p.log("DEBUG","roll_up but nrRollUpRows not set yet")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],r="",n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(e?t.push("Row "+(n+1)+": '"+i+"'"):t.push(i.trim()))}return r=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):r}},{key:"getTextAndFormat",value:function(){return this.rows}}]),w),b=(n(E,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){var e;p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),E),n=(n(_,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var r,n,i,a=!1;this.lastTime=e,p.setTime(e);for(var o=0;o<t.length;o+=2)n=127&t[o],i=127&t[o+1],0!=n||0!=i?(p.log("DATA","["+u([t[o],t[o+1]])+"] -> ("+u([n,i])+")"),(r=(r=(r=!(r=this.parseCmd(n,i))?this.parseMidrow(n,i):r)||this.parsePAC(n,i))||this.parseBackgroundAttributes(n,i))||(a=this.parseChars(n,i))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(a):p.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+u([n,i])+" orig: "+u([t[o],t[o+1]])))):this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var r=null;if(!((20===e||28===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+u([e,t])+") is dropped"),!0;var n=this.channels[(r=20===e||23===e?1:2)-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"parseMidrow",value:function(e,t){var r;return(17===e||25===e)&&32<=t&&t<=47&&((r=17===e?1:2)!==this.currChNr?(p.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),p.log("DEBUG","MIDROW ("+u([e,t])+")"),!0))}},{key:"parsePAC",value:function(e,t){if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);var r=e<=23?1:2,n=this.interpretPAC((64<=t&&t<=95?1==r?l:d:1==r?c:f)[e],t);return this.channels[r-1].setPAC(n),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"interpretPAC",value:function(e,t){var r=t,e={color:null,italics:!1,indent:null,underline:!1,row:e};return e.underline=1==(1&(r=95<t?t-96:t-64)),r<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((r-16)/2),e}},{key:"parseChars",value:function(e,t){var r,n=null,i=null,a=null;return 17<=(a=25<=e?(n=2,e-8):(n=1,e))&&a<=19?(r=t,p.log("INFO","Special char '"+s(r=17===a?t+80:18===a?t+112:t+144)+"' in channel "+n),i=[r]):32<=e&&e<=127&&(i=0===t?[e]:[e,t]),i&&(t=u(i),p.log("DEBUG","Char codes =  "+t.join(",")),this.lastCmdA=null,this.lastCmdB=null),i}},{key:"parseBackgroundAttributes",value:function(e,t){var r,n;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=h[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),this.channels[(e<24?1:2)-1].setBkgData(r),this.lastCmdA=null,!(this.lastCmdB=null))}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),_);function _(e,t,r){o(this,_),this.field=e||1,this.outputs=[t,r],this.channels=[new b(1,t),new b(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}function E(e,t){o(this,E),this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function w(){o(this,w),this.rows=[];for(var e=0;e<15;e++)this.rows.push(new y);this.currRow=14,this.nrRollUpRows=null,this.reset()}function k(){o(this,k),this.chars=[];for(var e=0;e<100;e++)this.chars.push(new v);this.pos=0,this.currPenState=new g}function T(e,t,r,n,i,a){o(this,T),this.uchar=e||" ",this.penState=new g(t,r,n,i,a)}function S(e,t,r,n,i){o(this,S),this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}r.default=n},{}],50:[function(e,t,r){"use strict";var f=e(57),e={newCue:function(e,t,r,n){for(var i,a,o,s,u,l=window.VTTCue||window.TextTrackCue,c=0;c<n.rows.length;c++)if(o=!0,s=0,u="",!(i=n.rows[c]).isEmpty()){for(var d=0;d<i.chars.length;d++)i.chars[d].uchar.match(/\s/)&&o?s++:(u+=i.chars[d].uchar,o=!1);(i.cueStartTime=t)===r&&(r+=1e-4),a=new l(t,r,(0,f.fixLineBreaks)(u.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=7<c?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}};t.exports=e},{57:57}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findFragWithCC=function(e,t){return n.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})};var e=e(48),n=e&&e.__esModule?e:{default:e}},{48:48}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},e=e(53),i=e&&e.__esModule?e:{default:e},n=(n(a,[{key:"sample",value:function(e,t){t=8e3*t/(e=Math.max(e,this.minDelayMs_)),e/=1e3;this.fast_.sample(e,t),this.slow_.sample(e,t)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),a);function a(e,t,r,n){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new i.default(t),this.fast_=new i.default(r)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{53:53}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(a){var o=self.console[a];return o?function(){for(var e,t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=(e=a,t=n[0],"["+e+"] > "+t)),o.apply(self.console,n)}:i}r.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":n(e))){!function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach(function(e){o[e]=t[e]?t[e].bind(t):s(e)})}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},r.logger=o},{}],55:[function(e,t,r){"use strict";t.exports={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},{}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var _={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function E(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function w(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)e[r]=n[r]}return e}function e(e,t,r){var n=this,i=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),a={};i?n=document.createElement("custom"):a.enumerable=!0,n.hasBeenReset=!1;var o="",s=!1,u=e,l=t,c=r,d=null,f="",h=!0,p="auto",g="start",v=50,y="middle",m=50,b="middle";if(Object.defineProperty(n,"id",w({},a,{get:function(){return o},set:function(e){o=""+e}})),Object.defineProperty(n,"pauseOnExit",w({},a,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(n,"startTime",w({},a,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",w({},a,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",w({},a,{get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",w({},a,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",w({},a,{get:function(){return f},set:function(e){e="string"==typeof(e=e)&&!!_[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",w({},a,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",w({},a,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",w({},a,{get:function(){return g},set:function(e){e=E(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",w({},a,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",w({},a,{get:function(){return y},set:function(e){e=E(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",w({},a,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",w({},a,{get:function(){return b},set:function(e){e=E(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),n.displayState=void 0,i)return n}return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}()},{}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fixLineBreaks=void 0;function n(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var e=e(56),s=e&&e.__esModule?e:{default:e};function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new n,this.regionList=[]}function u(){this.values=Object.create(null)}function l(e,t,r,n){var i,a,o=n?e.split(n):[e];for(i in o)"string"!=typeof o[i]||2===(a=o[i].split(r)).length&&t(a[0],a[1])}u.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var c=new s.default(0,0,0),d="middle"===c.align?"middle":"center";function f(r,e,o){var n=r;function t(){var e,e=(e=r.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null;function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}if(null===e)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){r=r.replace(/^\s+/,"")}if(i(),e.startTime=t(),i(),"--\x3e"!==r.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);r=r.substr(3),i(),e.endTime=t(),i(),function(e,t){var a=new u;l(e,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){a.set(e,o[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),i=n[0];a.integer(e,i),a.percent(e,i)&&a.set("snapToLines",!1),a.alt(e,i,["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start",d,"end"]);break;case"position":n=t.split(","),a.percent(e,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start",d,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",d,"end","left","right"])}},/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical","");e=a.get("line","auto");"auto"===e&&-1===c.line&&(e=-1),t.line=e,t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100),t.align=a.get("align",d);e=a.get("position","auto");"auto"===e&&50===c.position&&(e="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=e}(r,e)}function h(e){return e.replace(/<br(?: \/)?>/gi,"\n")}i.prototype={parse:function(e){var t,n=this;function r(){for(var e=0,t=h(t=n.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var i=(t=r()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:t=r(),n.state){case"HEADER":/:/.test(t)?l(t,function(e,t){"Region"===e&&console.log("parse region",t)},/:/):t||(n.state="ID");continue;case"NOTE":t||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){n.state="NOTE";break}if(!t)continue;if(n.cue=new s.default(0,0,""),n.state="CUE",-1===t.indexOf("--\x3e")){n.cue.id=t;continue}case"CUE":try{f(t,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==t.indexOf("--\x3e");if(!t||o&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=t;continue;case"BADCUE":t||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},r.fixLineBreaks=h,r.default=i},{56:56}],58:[function(e,t,r){"use strict";function p(e,t,r){return e.substr(r||0,t.length)===t}function g(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var e=e(57),v=e&&e.__esModule?e:{default:e},e={parse:function(e,o,n,i,t,r){var e=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",u=0,l=0,c=0,a=[],d=void 0,f=!0,h=new v.default;h.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==l?r=n.ccOffset=t.start:function(e,t){var r=e[i],n=e[r.prevCC];if(!n||!n.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,r.new=!1;for(;n&&n.new;)e.ccOffset+=r.start-n.start,r.new=!1,n=e[(r=n).prevCC];e.presentationOffset=t}(n,c)),c&&(r=c+n.ccOffset-n.presentationOffset),e.startTime+=r-l,e.endTime+=r-l,e.id=g(e.startTime)+g(e.endTime)+g(e.text),e.text=decodeURIComponent(escape(e.text)),0<e.endTime&&a.push(e)},h.onparsingerror=function(e){d=e},h.onflush=function(){d&&r?r(d):t(a)},e.forEach(function(t){if(f){if(p(t,"X-TIMESTAMP-MAP=")){f=!1,t.substr(16).split(",").forEach(function(e){p(e,"LOCAL:")?s=e.substr(6):p(e,"MPEGTS:")&&(u=parseInt(e.substr(7)))});try{u-=o=o<0?o+8589934592:o,e=s,r=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0,l=(isNaN(r)||isNaN(n)||isNaN(i)||isNaN(a)?-1:(r+=1e3*n,r+=6e4*i,r+=36e5*a))/1e3,c=u/9e4,-1===l&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(f=!1)}var e,r,n,i,a;h.parse(t+"\n")}),h.flush()}};t.exports=e},{57:57}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},s=e(54),n=(n(i,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e=this.context,t="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(r){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},{key:"readystatechange",value:function(e){var t,r=e.currentTarget,n=r.readyState,i=this.stats,a=this.context,o=this.config;!i.aborted&&2<=n&&(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n?200<=(t=r.status)&&t<300?(i.tload=Math.max(i.tfirst,performance.now()),n=e=void 0,n="arraybuffer"===a.responseType?(e=r.response).byteLength:(e=r.responseText).length,i.loaded=i.total=n,e={url:r.responseURL,data:e},this.callbacks.onSuccess(e,i,a,r)):i.retry>=o.maxRetry||400<=t&&t<499?(s.logger.error(t+" while loading "+a.url),this.callbacks.onError({code:t,text:r.statusText},a,r)):(s.logger.warn(t+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))}},{key:"loadtimeout",value:function(){s.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);e=this.callbacks.onProgress;e&&e(r,this.context,null,t)}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{54:54}]},{},[40])(40)},function(Jt,Qt,Zt){!function(Xt){var $t;!function(){var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){if(r.get||r.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},s=("undefined"==typeof window||window!==this)&&void 0!==Xt&&null!=Xt?Xt:this;function e(e,t){if(t){for(var r=s,n=e.split("."),i=0;i<n.length-1;i++){var a=n[i];a in r||(r[a]={}),r=r[a]}(a=t(i=r[n=n[n.length-1]]))!=i&&null!=a&&o(r,n,{configurable:!0,writable:!0,value:a})}}function n(e,t,r){return e.call.apply(e.bind,arguments)}function i(t,r,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(r,e)}}return function(){return t.apply(r,arguments)}}function u(e,t,r){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:i).apply(null,arguments)}function l(e){var t=[];return function e(t,r,n){if(null==r)n.push("null");else{if("object"==typeof r){if("array"==function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}(r)){var i=r;r=i.length,n.push("[");for(var a="",o=0;o<r;o++)n.push(a),e(t,a=i[o],n),a=",";return n.push("]"),0}if(!(r instanceof String||r instanceof Number||r instanceof Boolean)){for(i in n.push("{"),o="",r)Object.prototype.hasOwnProperty.call(r,i)&&"function"!=typeof(a=r[i])&&(n.push(o),d(i,n),n.push(":"),e(t,a,n),o=",");return n.push("}"),0}r=r.valueOf()}switch(typeof r){case"string":d(r,n);break;case"number":n.push(isFinite(r)&&!isNaN(r)?String(r):"null");break;case"boolean":n.push(String(r));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof r)}}}(new r,e,t),t.join("")}function r(){}e("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(e,t||0)}}),e("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}}),e("Number.isInteger",function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}});var a={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},c=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function d(e,t){t.push('"',e.replace(c,function(e){var t=a[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),a[e]=t),t}),'"')}function m(e){e=String(e);try{return JSON.parse(e)}catch(e){}throw Error("Invalid JSON string: "+e)}function b(e){try{return"object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify(e):l(e)}catch(e){}throw Error("Could not stringify object")}var f=2,h=200,p=5e3,g="",v={};var y="";function _(e){return e&&"number"==typeof e?(Date.now()-e).toString():null}var E=!1,w={"/v1/open":{link_identifier:"\\d+"},"/v1/pageview":{event:"pageview"},"/v1/dismiss":{event:"dismiss"}},k=!1;function T(e,t){if(e||t){for(var r="https://bnc.lt/a/"+e+"?",n="tags alias channel feature stage campaign type duration sdk source data".split(" "),i=0;i<n.length;i++){var a=n[i],o=t[a];if(o)if("tags"===a&&Array.isArray(o))for(var s=0;s<o.length;s++)r=("?"===r[r.length-1]?r+a:r+"&"+a)+"="+encodeURIComponent(o[s]);else("string"==typeof o&&0<o.length||"number"==typeof o)&&("data"===a&&"string"==typeof o&&(o=I(o)),r=("?"===r[r.length-1]?r+a:r+"&"+a)+"="+encodeURIComponent(o))}return r}}function S(e){e&&(e.ga=null,e.M=null,e.G=null,e.v=null,e.C=null,e.B=null,e.o&&delete e.o,e.s&&delete e.s,e.c.remove("branch_view_enabled"),Ne(e.c,{},!0))}function x(e,r,t){return e=e.replace(/\$(\d)/g,function(e,t){return r[parseInt(t,10)-1]}),t&&(e+="\n Failure Code:"+t),e}function A(e){return{data:e.data||"",data_parsed:e.data_parsed||{},has_app:e.has_app||null,identity:e.identity||null,referring_identity:e.referring_identity||null,referring_link:e.referring_link||null}}function O(){return ee()?document.referrer:String(window.location)}function R(e){e.source="web-sdk";var t=e.data;switch(typeof t){case"string":try{t=m(t)}catch(e){t={_bncNoEval:!0}}break;case"object":break;default:t={}}t.$canonical_url||(t.$canonical_url=O()),t.$og_title||(t.$og_title=N("title")),t.$og_description||(t.$og_description=N("description")),t.$og_image_url||(t.$og_image_url=N("image")),t.$og_video||(t.$og_video=N("video")),"string"==typeof t.$desktop_url&&(t.$desktop_url=t.$desktop_url.replace(/#r:[a-z0-9-_]+$/i,"").replace(/([\?\&]_branch_match_id=\d+)/,""));try{m(t)}catch(e){t=l(t)}return e.data=t,e}function L(e){if(!e||"string"!=typeof e)return"";var t=document.createElement("a");return t.href=e,e=t.pathname&&t.pathname.split("/").filter(function(e){return""!==e}),Array.isArray(e)&&e.length?e[e.length-1]+t.search:t.search}function D(e,t){if(e&&"object"==typeof e||(e={}),!t||"object"!=typeof t)return e;for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function P(){var e=navigator.userAgent;return e.match(/android/i)?"android":e.match(/ipad/i)?"ipad":e.match(/i(os|p(hone|od))/i)?"ios":e.match(/\(BB[1-9][0-9]*\;/i)?"blackberry":e.match(/Windows Phone/i)?"windows_phone":!!(e.match(/Kindle/i)||e.match(/Silk/i)||e.match(/KFTT/i)||e.match(/KFOT/i)||e.match(/KFJWA/i)||e.match(/KFJWI/i)||e.match(/KFSOWI/i)||e.match(/KFTHWA/i)||e.match(/KFTHWI/i)||e.match(/KFAPWA/i)||e.match(/KFAPWI/i))&&"kindle"}function C(){var e,t=navigator.userAgent;if(/^((?!chrome|android|crios|fxios).)*safari/i.test(t))e:{if((t=/version\/([^ ]*)/i.exec(t))&&t[1])try{if(11<=parseFloat(t[1])){e=!0;break e}}catch(e){}e=!1}else e=!1;return e}function I(e){var t,r,n,i,a,o,s="",u=0;for(e=e.replace(/\r\n/g,"\n"),r="",n=0;n<e.length;n++)(i=e.charCodeAt(n))<128?r+=String.fromCharCode(i):(127<i&&i<2048?r+=String.fromCharCode(i>>6|192):(r+=String.fromCharCode(i>>12|224),r+=String.fromCharCode(i>>6&63|128)),r+=String.fromCharCode(63&i|128));for(e=r;u<e.length;)i=(t=e.charCodeAt(u++))>>2,t=(3&t)<<4|(r=e.charCodeAt(u++))>>4,a=(15&r)<<2|(n=e.charCodeAt(u++))>>6,o=63&n,isNaN(r)?o=a=64:isNaN(n)&&(o=64),s=s+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o);return s}function M(e,t,r){"function"==typeof e.addEventListener?e.addEventListener(t,r,void 0):"function"==typeof e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function F(e){return e?(-1<e.indexOf("://")?e=e.split("://")[1]:"/"===e.charAt(0)&&(e=e.slice(1)),e):null}function N(e){var t;return e=String(e),t=t||null,t=(e=document.querySelector('meta[property="og:'+e+'"]'))&&e.content?e.content:t}function j(){var e=document.getElementsByTagName("meta"),t={};if(!e||0===e.length)return t;for(var r,n,i={hostedIOS:null,hostedAndroid:null,applinksIOS:null,applinksAndroid:null,twitterIOS:null,twitterAndroid:null},a=0;a<e.length;a++)(e[a].getAttribute("name")||e[a].getAttribute("property"))&&e[a].getAttribute("content")&&(r=e[a].getAttribute("name"),n=e[a].getAttribute("property"),3===(n=(r=r||n).split(":")).length&&"branch"===n[0]&&"deeplink"===n[1]&&("$ios_deeplink_path"===n[2]?i.hostedIOS=F(e[a].getAttribute("content")):"$android_deeplink_path"===n[2]?i.hostedAndroid=F(e[a].getAttribute("content")):t[n[2]]=e[a].getAttribute("content")),"al:ios:url"===r&&(i.applinksIOS=F(e[a].getAttribute("content"))),"twitter:app:url:iphone"===r&&(i.twitterIOS=F(e[a].getAttribute("content"))),"al:android:url"===r&&(i.applinksAndroid=F(e[a].getAttribute("content"))),"twitter:app:url:googleplay"===r&&(i.twitterAndroid=F(e[a].getAttribute("content"))));return i&&"object"==typeof i&&Object.keys(i).length&&(i.hostedIOS?t.$ios_deeplink_path=i.hostedIOS:i.applinksIOS?t.$ios_deeplink_path=i.applinksIOS:i.twitterIOS&&(t.$ios_deeplink_path=i.twitterIOS),i.hostedAndroid?t.$android_deeplink_path=i.hostedAndroid:i.applinksAndroid?t.$android_deeplink_path=i.applinksAndroid:i.twitterAndroid&&(t.$android_deeplink_path=i.twitterAndroid),t.hasOwnProperty("$ios_deeplink_path")&&t.hasOwnProperty("$android_deeplink_path")&&t.$ios_deeplink_path===t.$android_deeplink_path&&(t.$deeplink_path=t.$ios_deeplink_path)),t}function U(){var t;try{navigator.languages&&0<navigator.languages.length?t=navigator.languages[0]:navigator.language&&(t=navigator.language),t=t.substring(0,2).toUpperCase()}catch(e){t=null}return t}function B(t,e){var r=[];return e.forEach(function(e){-1===t.indexOf(e)&&r.push(e)}),r}var G=["purchase"],H="event name is either missing, of the wrong type or not valid. Please specify 'purchase' as the event name.",W="commerce_data is either missing, of the wrong type or empty. Please ensure that commerce_data is constructed correctly.",z="Please remove the following keys from the root of commerce_data: ",V="Please remove the following keys from commerce_data.products: ",K="commerce_data.products must be an array of objects",q="Each product in the products list must be an object";function Y(e){return"string"!=typeof e?null:e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function X(e,t,r){if(r){if("object"==typeof r&&!Object.keys(r).length)return e;e[t]=r}return e}var $="ADD_TO_CART ADD_TO_WISHLIST VIEW_CART INITIATE_PURCHASE ADD_PAYMENT_INFO PURCHASE SPEND_CREDITS SEARCH VIEW_ITEM VIEW_ITEMS RATE SHARE COMPLETE_REGISTRATION COMPLETE_TUTORIAL ACHIEVE_LEVEL UNLOCK_ACHIEVEMENT".split(" "),J="transaction_id revenue currency shipping tax coupon affiliation search_query description".split(" ");function Q(e,t){return e&&t&&("array"===t?Array.isArray(e):typeof e===t&&!Array.isArray(e))}function Z(e){var t=X({},"http_origin",document.URL),t=X(t,"user_agent",navigator.userAgent);return t=X(t,"language",U()),t=X(t,"screen_width",screen.width),t=X(t,"screen_height",screen.height),t=X(t,"http_referrer",document.referrer),t=X(t,"browser_fingerprint_id",e.B),t=X(t,"developer_identity",e.C),t=X(t,"sdk","web"),X(t,"sdk_version","2.45.0")}function ee(){return window.self!==window.top}function t(){var e="true";try{window.top.location.search&&(e="true")}catch(e){return}return"true"===e}function te(e){return e||(ee()?t()?window.top.document.referrer:"":document.referrer)}function re(e){if(Q(e,"object")&&Object.keys(e).length){for(var t in e)e.hasOwnProperty(t)&&(e[t]=Q(e[t],"object")||Q(e[t],"array")?b(e[t]):e[t].toString());return e}}function ne(e,t){e=e?D({},e):{};return t&&0<Object.keys(t).length?0<Object.keys(e).length?D(e,t):D({},t):e}function ie(e){""!==g&&e.setAttribute("nonce",g)}function ae(n,i){return function(e,t,r){if(E)return!1;if("number"==typeof r||r)if(0===i){if("object"!=typeof r)return x("API request $1, parameter $2 is not $3",[e,t,"an object"])}else if(3===i){if(!(r instanceof Array))return x("API request $1, parameter $2 is not $3",[e,t,"an array"])}else if(2===i){if("number"!=typeof r)return x("API request $1, parameter $2 is not $3",[e,t,"a number"])}else if(4===i){if("boolean"!=typeof r)return x("API request $1, parameter $2 is not $3",[e,t,"a boolean"])}else{if("string"!=typeof r)return x("API request $1, parameter $2 is not $3",[e,t,"a string"]);if(1!==i&&!i.test(r))return x("API request $1, parameter $2 is not $3",[e,t,"in the proper format"])}else if(n)return x("API request $1 missing parameter $2",[e,t]);return!1}}var oe=/^[0-9]{15,20}$/;function se(e){return D(e,{browser_fingerprint_id:ae(!0,oe),identity_id:ae(!0,oe),sdk:ae(!0,1),session_id:ae(!0,oe)})}var ue={destination:"https://api.branch.io",endpoint:"/v1/open",method:"POST",a:{browser_fingerprint_id:ae(!1,oe),alternative_browser_fingerprint_id:ae(!1,oe),identity_id:ae(!1,oe),link_identifier:ae(!1,1),sdk:ae(!1,1),options:ae(!1,0),initial_referrer:ae(!1,1),tracking_disabled:ae(!1,4)}},le={destination:"https://app.link",endpoint:"/_r",method:"GET",Y:!0,a:{sdk:ae(!0,1),_t:ae(!1,oe),branch_key:ae(!0,1)}},ce={destination:"",endpoint:"",method:"GET",f:{link_url:ae(!0,1)},a:{click:ae(!0,1)}},de={destination:"https://bnc.lt",endpoint:"/c",method:"POST",f:{link_url:ae(!0,1)},a:{sdk:ae(!1,1),phone:ae(!0,1)}},fe={destination:"https://api.branch.io",endpoint:"/v1/referralcode",method:"POST",a:se({amount:ae(!0,2),bucket:ae(!1,1),calculation_type:ae(!0,2),creation_source:ae(!0,2),expiration:ae(!1,1),location:ae(!0,2),prefix:ae(!1,1),type:ae(!0,1)})},he={destination:"https://api.branch.io",endpoint:"/v1/referralcode",method:"POST",f:{code:ae(!0,1)},a:se({})},pe={destination:"https://api.branch.io",endpoint:"/v1/applycode",method:"POST",f:{code:ae(!0,1)},a:se({})},ge={destination:"https://api.branch.io",endpoint:"/v1/logout",method:"POST",a:se({session_id:ae(!0,oe)})},ve={destination:"https://api.branch.io",endpoint:"/v1/profile",method:"POST",a:se({identity_id:ae(!0,oe),identity:ae(!0,1)})},ye={destination:"https://api.branch.io",endpoint:"/v1/referrals",method:"GET",f:{identity_id:ae(!0,oe)},a:se({})},me={destination:"https://api.branch.io",endpoint:"/v1/credithistory",method:"GET",a:se({begin_after_id:ae(!1,oe),bucket:ae(!1,1),direction:ae(!1,2),length:ae(!1,2),link_click_id:ae(!1,oe)})},be={destination:"https://api.branch.io",endpoint:"/v1/credits",method:"GET",a:se({branch_key:ae(!0,1),identity:ae(!0,1)})},_e={destination:"https://api.branch.io",endpoint:"/v1/redeem",method:"POST",a:se({amount:ae(!0,2),bucket:ae(!0,1),identity_id:ae(!0,oe)})},Ee={destination:"https://api.branch.io",endpoint:"/v1/url",method:"POST",Aa:"obj",a:se({alias:ae(!1,1),campaign:ae(!1,1),channel:ae(!1,1),data:ae(!1,1),feature:ae(!1,1),identity_id:ae(!0,oe),stage:ae(!1,1),tags:ae(!1,3),type:ae(!1,2),source:ae(!1,1),instrumentation:ae(!1,1)})},we={destination:"https://api.branch.io",endpoint:"/v1/deepview",Y:!0,method:"POST",a:se({campaign:ae(!1,1),_t:ae(!1,oe),channel:ae(!1,1),data:ae(!0,1),feature:ae(!1,1),link_click_id:ae(!1,1),open_app:ae(!1,4),append_deeplink_path:ae(!1,4),stage:ae(!1,1),tags:ae(!1,3),deepview_type:ae(!0,1),source:ae(!0,1)})},ke={destination:"https://api.branch.io",endpoint:"/v1/has-app",method:"GET",a:{browser_fingerprint_id:ae(!0,oe),instrumentation:ae(!1,1)}},Te={destination:"https://api.branch.io",endpoint:"/v1/event",method:"POST",a:se({event:ae(!0,1),metadata:ae(!0,0),initial_referrer:ae(!1,1),tracking_disabled:ae(!1,4)})},Se={destination:"https://api.branch.io",endpoint:"/v1/event",method:"POST",a:se({event:ae(!0,1),metadata:ae(!1,0),initial_referrer:ae(!1,1),commerce_data:ae(!0,0)})},xe={destination:"https://api.branch.io",endpoint:"/v2/event/standard",method:"POST",a:{name:ae(!0,1),user_data:ae(!0,1),custom_data:ae(!1,1),event_data:ae(!1,1),content_items:ae(!1,1)}},Ae={destination:"https://api.branch.io",endpoint:"/v2/event/custom",method:"POST",a:{name:ae(!0,1),user_data:ae(!0,1),custom_data:ae(!1,1)}},Oe={destination:"https://api.branch.io",endpoint:"/v1/pageview",method:"POST",a:se({event:ae(!0,1),metadata:ae(!1,0),initial_referrer:ae(!1,1),tracking_disabled:ae(!1,4),branch_view_id:ae(!1,1),no_journeys:ae(!1,4),user_language:ae(!1,1),open_app:ae(!1,4),has_app_websdk:ae(!1,4),source:ae(!1,1),feature:ae(!1,1),is_iframe:ae(!1,4),data:ae(!1,0),callback_string:ae(!1,1),journey_displayed:ae(!1,4),audience_rule_id:ae(!1,1),journey_dismissals:ae(!1,0)})},Re={destination:"https://api.branch.io",endpoint:"/v1/dismiss",method:"POST",a:se({event:ae(!0,1),metadata:ae(!1,0),initial_referrer:ae(!1,1),tracking_disabled:ae(!1,4),branch_view_id:ae(!1,1),no_journeys:ae(!1,4),user_language:ae(!1,1),open_app:ae(!1,4),has_app_websdk:ae(!1,4),source:ae(!1,1),feature:ae(!1,1),is_iframe:ae(!1,4),data:ae(!1,0),callback_string:ae(!1,1),journey_displayed:ae(!1,4),audience_rule_id:ae(!1,1),journey_dismissals:ae(!1,0)})};function Le(e){for(var t,r=0;r<e.length;r++)if((t="function"==typeof(t=this[e[r]])?t():t).isEnabled())return t.u={},t}function De(e){return"branch_session"===e||"branch_session_first"===e?e:"BRANCH_WEBSDK_KEY"+e}function Pe(e){return"true"===e||"false"!==e&&e}function Ce(e){return"branch_session"===e||"branch_session_first"===e||0===e.indexOf("BRANCH_WEBSDK_KEY")}function Ie(e){var t=(e=e.trim()).indexOf("=");return{name:e.substring(0,t),value:Pe(e.substring(t+1,e.length))}}function Me(e){var n;try{n=e&&localStorage?localStorage:sessionStorage}catch(e){return{isEnabled:function(){return!1}}}return{getAll:function(){if(void 0===n)return null;var e,t=null;for(e in n)e.indexOf("BRANCH_WEBSDK_KEY")||(null===t&&(t={}),t[e.replace("BRANCH_WEBSDK_KEY","")]=Pe(n.getItem(e)));return t},get:function(e,t){return Pe((t&&localStorage?localStorage:n).getItem(De(e)))},set:function(e,t,r){(r&&localStorage?localStorage:n).setItem(De(e),t)},remove:function(e,t){(t&&localStorage?localStorage:n).removeItem(De(e))},clear:function(){Object.keys(n).forEach(function(e){e.indexOf("BRANCH_WEBSDK_KEY")||n.removeItem(e)})},isEnabled:function(){try{return n.setItem("test",""),n.removeItem("test"),!0}catch(e){return!1}}}}function Fe(e,t){try{return m(e.get(t?"branch_session_first":"branch_session",t))||null}catch(e){return null}}function Ne(e,t,r){e.set("branch_session",l(t)),r&&e.set("branch_session_first",l(t),!0)}function je(e,t){var r;t&&(r=D(r=Fe(e)||{},t),e.set("branch_session",l(r)))}function Ue(){}function Be(e,t,r,n,i){var a=Date.now(),o=y;!e.g&&C()&&e.g++;var s="branch_callback__"+e.g++;e=0<=t.indexOf("branch.io")?"&data=":"&post_data=",r="POST"===n?encodeURIComponent(I(l(r))):"";var u=window.setTimeout(function(){window[s]=function(){},X(v,o,_(a)),i(Error("Request timed out"),null,504)},p);window[s]=function(e){window.clearTimeout(u),i(null,e)},n=t+(t.indexOf("?")<0?"?":"")+(r?e+r:"")+(0<=t.indexOf("/c/")?"&click=1":"")+"&callback="+s,e=function(){i(Error("Request blocked by client, probably adblock"),null)},r=function(){X(v,o,_(a));try{"function"==typeof this.remove?this.remove():this.parentNode.removeChild(this)}catch(e){}delete window[s]},(t=document.createElement("script")).type="text/javascript",t.async=!0,t.src=n,ie(t),!(n=document.getElementsByTagName("head"))||n.length<1?e():(n[0].appendChild(t),M(t,"error",e),M(t,"load",r))}function Ge(e,t,r,n,i){function a(){n.get("use_jsonp")||t.Y?Be(e,l,r,t.method,o):function(e,t,r,n,i,a){var o=Date.now(),s=y,u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");u.ontimeout=function(){X(v,s,_(o)),a(Error("Request timed out"),null,504)},u.onerror=function(e){a(Error(e.error||"Error in API: "+u.status),null,u.status)},u.onreadystatechange=function(){var t;if(4===u.readyState)if(X(v,s,_(o)),200===u.status){try{t=m(u.responseText)}catch(e){t={}}a(null,t,u.status)}else 402===u.status?a(Error("Not enough credits to redeem."),null,u.status):"4"!==u.status.toString().substring(0,1)&&"5"!==u.status.toString().substring(0,1)||(u.responseURL&&u.responseURL.includes("v2/event")?a(u.responseText,null,u.status):a(Error("Error in API: "+u.status),null,u.status))};try{u.open(n,t,!0),u.timeout=p,u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(r)}catch(o){i.set("use_jsonp",!0),Be(e,t,r,n,a)}}(e,l,c,t.method,n,o)}function o(e,t,r){e&&0<d&&"5"===(r||"").toString().substring(0,1)?(d--,window.setTimeout(function(){a()},h)):i(e,t)}if(y="/v1/pageview"===t.endpoint&&r&&r.journey_displayed?t.endpoint+"-1-brtt":t.endpoint+"-brtt",("/v1/url"===t.endpoint||"/v1/has-app"===t.endpoint)&&1<Object.keys(v).length&&(delete v["-brtt"],r.instrumentation=b(D({},v)),v={}),E)for(var s=["browser_fingerprint_id","alternative_browser_fingerprint_id","identity_id","session_id"],u=0;u<s.length;u++)r.hasOwnProperty(s[u])&&delete r[s[u]];if((s=function(e,r,t){function n(e,t){if(void 0===t&&(t={}),e.branch_key&&u.test(e.branch_key))return t.branch_key=e.branch_key,t;if(e.app_id&&s.test(e.app_id))return t.app_id=e.app_id,t;if(!e.instrumentation)throw Error(x("API request $1 missing parameter $2",[r.endpoint,"branch_key or app_id"]));t.instrumentation=e.instrumentation}var i,a,o=r.destination+r.endpoint,s=/^[0-9]{15,20}$/,u=/key_(live|test)_[A-Za-z0-9]{32}/;if("/v1/has-app"===r.endpoint)try{r.f=n(t,r.f)}catch(e){return{error:e.message}}if(void 0!==r.f)for(i in r.f)if(r.f.hasOwnProperty(i)){if(a="function"==typeof r.f[i]?r.f[i](r.endpoint,i,t[i]):a)return{error:a};o+="/"+t[i]}var l={};if(void 0!==r.a&&"/v1/pageview"!==r.endpoint&&"/v1/dismiss"!==r.endpoint){for(i in r.a)if(r.a.hasOwnProperty(i)){if(a=r.a[i](r.endpoint,i,t[i]))return{error:a};void 0!==(a=t[i])&&""!==a&&null!==a&&(l[i]=a)}}else"/v1/pageview"!==r.endpoint&&"/v1/dismiss"!==r.endpoint||D(l,t);if("POST"===r.method||"/v1/credithistory"===r.endpoint)try{t=n(t,l)}catch(e){return{error:e.message}}return"/v1/event"===r.endpoint&&(l.metadata=b(l.metadata||{}),l.hasOwnProperty("commerce_data")&&(l.commerce_data=b(l.commerce_data||{}))),"/v1/pageview"!==r.endpoint&&"/v1/dismiss"!==r.endpoint||!l.metadata||(l.metadata=b(l.metadata||{})),"/v1/open"===r.endpoint&&(l.options=b(l.options||{})),{data:function e(t,r,n){if(void 0===r)return"";var i,a=[];if(r instanceof Array){for(t=0;t<r.length;t++)a.push(encodeURIComponent(n)+"="+encodeURIComponent(r[t]));return a.join("&")}for(i in r)r.hasOwnProperty(i)&&(r[i]instanceof Array||"object"==typeof r[i]?a.push(e(t,r[i],n?n+"."+i:i)):a.push(encodeURIComponent(n?n+"."+i:i)+"="+encodeURIComponent(r[i])));return a.join("&")}(e,l,""),url:o.replace(/^\//,"")}}(e,t,r)).error)return i(Error(b({message:s.error,endpoint:t.endpoint,data:r})));var l,c="";"GET"===t.method?l=s.url+"?"+s.data:(l=s.url,c=s.data);var d=f;if(E&&function(e,t){var r=document.createElement("a");if(r.href=e,"/"!=(r=r.pathname)[0]&&(r="/"+r),!(r=w[r]))return 1;if(0<Object.keys(r).length){if(!t)return 1;for(var n in r){var i=new RegExp(r[n]);if(!t.hasOwnProperty(n)||!i.test(t[n]))return 1}}}(l,r))return k?o(Error("Requested operation cannot be completed since tracking is disabled"),null,300):o(null,{},200);a()}function He(e){e&&e.parentNode.removeChild(e)}function We(e,t){e&&!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))&&(e.className+=" "+t)}function ze(e){var t=document.body;t&&t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," "))}function Ve(e){return document.body.currentStyle?document.body.currentStyle[e.replace(/(\-\w)/g,function(e){return e[1].toUpperCase()})]:window.getComputedStyle(document.body).getPropertyValue(e)}function Ke(e){function a(e){function t(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)/100}function r(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)/100}if(!e)return 0;var n=e.replace(/[0-9,\.]/g,"");e=e.match(/\d+/g);var i=parseInt(0<e.length?e[0]:"0",10);return parseInt({px:function(e){return e},em:function(e){return document.body.currentStyle?e*a(document.body.currentStyle.fontSize):e*parseFloat(window.getComputedStyle(document.body).fontSize)},rem:function(e){return document.documentElement.currentStyle?e*a(document.documentElement.currentStyle.fontSize):e*parseFloat(window.getComputedStyle(document.documentElement).fontSize)},vw:function(e){return e*r()},vh:function(e){return e*t()},vmin:function(e){return e*Math.min(t(),r())},vmax:function(e){return e*Math.max(t(),r())},"%":function(){return document.body.clientWidth/100*i}}[n](i),10)}return(a("76px")+a(e)).toString()+"px"}function qe(e,t){return"#branch-banner-iframe { position: "+("top"!==t||e?"fixed":"absolute")+"; }\n"}function Ye(e,t){if(e.w||e.L){if(e.w){for(var r="",n=0;n<5;n++)r+='<span class="star"><svg class="star" fill="#555555" height="12" viewBox="3 2 20 19" width="12"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/><path d="M0 0h24v24H0z" fill="none"/><foreignObject display="none"><span class="star"></span></foreignObject></svg>',e.w>n&&(r+=n+1>e.w&&e.w%1?'<span class="half"><svg fill="#555555" height="12" viewBox="3 2 20 19" width="12"><defs><path d="M0 0h24v24H0V0z" id="a"/></defs><clipPath id="b"><use overflow="visible" xlink:href="#a"/></clipPath><path clip-path="url(#b)" d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/></svg><foreignObject display="none"><span class="half"></span></foreignObject></span>':'<span class="full"><svg fill="#555555" height="12" viewBox="3 2 20 19" width="12"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/><path d="M0 0h24v24H0z" fill="none"/><foreignObject display="none"><span class="full"></span></foreignObject></svg> </span>'),r+="</span>";r='<span class="stars">'+r+"</span>"}else r="";r='<div class="reviews">'+r+(e.L?'<span class="review-count">'+e.L+"</span>":"")+"</div>"}else r="";return'<div class="content'+(e.theme?" theme-"+e.theme:"")+'"><div class="right">'+t+'</div><div class="left">'+(e.ha?"":'<div id="branch-banner-close" class="branch-animation" aria-label="Close">&times;</div>')+'<div class="icon"><img src="'+e.icon+'" alt="Application icon"></div><div class="details vertically-align-middle"><div class="title">'+e.title+"</div>"+r+'<div class="description">'+e.description+"</div></div></div></div>"}function Xe(t,r,e,n){function i(){a(),l.style.background="#FFD4D4",u.className="error",setTimeout(function(){l.style.background="#FFFFFF",u.className=""},2e3)}function a(){l.removeAttribute("disabled"),u.removeAttribute("disabled"),l.style.opacity="1",u.style.opacity="1",c.style.opacity="0"}var o,s,u=t.getElementById("branch-sms-phone"),l=t.getElementById("branch-sms-send"),c=t.getElementById("branch-loader-wrapper"),d=t.getElementById("branch-sms-form-container");u&&(s=u.value,/^\d{7,}$/.test(s.replace(/[\s()+\-\.]|ext/gi,""))?(Wt(r,"willSendBannerSMS"),l.setAttribute("disabled",""),u.setAttribute("disabled",""),l.style.opacity=".4",u.style.opacity=".4",c.style.opacity="1",u.className="",r.sendSMS(s,n,e,function(e){e?(Wt(r,"sendBannerSMSError"),i()):(Wt(r,"didSendBannerSMS"),(o=t.createElement("div")).className="branch-icon-wrapper",o.id="branch-checkmark",o.style="opacity: 0;",o.innerHTML=window.ActiveXObject?'<span class="checkmark">&#x2713;</span>':'<svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 98.5 98.5" enable-background="new 0 0 98.5 98.5" xml:space="preserve"><path class="checkmark" fill="none" stroke-width="8" stroke-miterlimit="10" d="M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"/></svg>',d.appendChild(o),l.style.opacity="0",u.style.opacity="0",c.style.opacity="0",setTimeout(function(){o.style.opacity="1"},20),u.value="",setTimeout(function(){d.removeChild(o),a()},3e3))})):i())}function $e(t,i,r,a){function n(e,t){var r,n;"function"==typeof e&&(t=e,e={}),e=e||{},"top"===i.position?u.style.top="-76px":"bottom"===i.position&&(u.style.bottom="-76px"),"number"==typeof i.K?a.set("hideBanner",(r=i.K,(n=new Date).setDate(n.getDate()+r)),!0):a.set("hideBanner",!0,!0),e.X?("top"===i.position?document.body.style.marginTop=d:"bottom"===i.position&&(document.body.style.marginBottom=h),ze("branch-banner-is-active"),He(u),He(document.getElementById("branch-css")),t()):(setTimeout(function(){He(u),He(document.getElementById("branch-css")),t()},270),setTimeout(function(){"top"===i.position?document.body.style.marginTop=d:"bottom"===i.position&&(document.body.style.marginBottom=h),ze("branch-banner-is-active")},20))}function e(){"top"===i.position?u.style.top="0":"bottom"===i.position&&(u.style.bottom="0"),Wt(t,"didShowBanner")}if(!function(e){var t=a.get("hideBanner",!0);if(!(e.pa&&navigator&&Number(navigator.doNotTrack))){try{"string"==typeof t&&(t=m(t))}catch(e){t=!1}var t="number"==typeof t?new Date>=new Date(t):!t,r=e.K;return"number"==typeof r&&(r=!1),!document.getElementById("branch-banner")&&!document.getElementById("branch-banner-iframe")&&(t||r)&&(e.ra&&!P()||e.O&&"android"===P()||e.sa&&"ipad"===P()||e.T&&"ios"===P()||e.P&&"blackberry"===P()||e.S&&"windows_phone"===P()||e.R&&"kindle"===P())}}(i))return Wt(t,"willNotShowBanner"),null;Wt(t,"willShowBanner");var o,s,u=(f=i,p=a,o='<div id="branch-sms-form-container">'+(P()?'<a id="branch-mobile-action" class="button" href="#" target="_parent">'+((Fe(p)||{}).has_app?f.ma:f.ia)+"</a>":'<div class="branch-icon-wrapper" id="branch-loader-wrapper" style="opacity: 0;"><div id="branch-spinner"></div></div><div id="branch-sms-block"><form id="sms-form"><input type="phone" aria-label="Enter phone number" class="branch-animation" name="branch-sms-phone" id="branch-sms-phone" placeholder="'+f.oa+'"><button type="submit" id="branch-sms-send" class="branch-animation button">'+f.qa+"</button></form></div>")+"</div>",f.D?((s=document.createElement("iframe")).src="about:blank",s.style.overflow="hidden",s.scrolling="no",s.id="branch-banner-iframe",s.className="branch-animation",ie(s),document.body.appendChild(s),o='<html><head></head><body class="'+("ios"===(p=P())||"ipad"===p?"branch-banner-ios":"android"===p?"branch-banner-android":"branch-banner-desktop")+'"><div id="branch-banner" class="branch-animation">'+Ye(f,o)+"</body></html>",s.contentWindow.document.open(),s.contentWindow.document.write(o),s.contentWindow.document.close()):((s=document.createElement("div")).id="branch-banner",s.className="branch-animation",s.innerHTML=Ye(f,o),document.body.appendChild(s)),s);p=u,o=".branch-banner-is-active { -webkit-transition: all 0.375s ease; transition: all 00.375s ease; }\n#branch-banner { width:100%; z-index: 99999; font-family: Helvetica Neue, Sans-serif; -webkit-font-smoothing: antialiased; -webkit-user-select: none; -moz-user-select: none; user-select: none; -webkit-transition: all 0.25s ease; transition: all 00.25s ease; }\n#branch-banner .button{ border: 1px solid "+((f=i).buttonBorderColor||("dark"===f.theme?"transparent":"#ccc"))+"; background: "+(f.buttonBackgroundColor||"#fff")+"; color: "+(f.buttonFontColor||"#000")+"; cursor: pointer; margin-top: 0px; font-size: 14px; display: inline-block; margin-left: 5px; font-weight: 400; text-decoration: none;  border-radius: 4px; padding: 6px 12px; transition: all .2s ease;}\n#branch-banner .button:hover {  border: 1px solid "+(f.buttonBorderColorHover||("dark"===f.theme?"transparent":"#BABABA"))+"; background: "+(f.buttonBackgroundColorHover||"#E0E0E0")+"; color: "+(f.buttonFontColorHover||"#000")+";}\n#branch-banner .button:focus { outline: none; }\n#branch-banner * { margin-right: 4px; position: relative; line-height: 1.2em; }\n#branch-banner-close { font-weight: 400; cursor: pointer; float: left; z-index: 2;padding: 0 5px 0 5px; margin-right: 0; }\n#branch-banner .content { width:100%; overflow: hidden; height: 76px; background: rgba(255, 255, 255, 0.95); color: #333; "+("top"===f.position?"border-bottom":"border-top")+': 1px solid #ddd; }\n#branch-banner-close { color: #000; font-size: 24px; top: 14px; opacity: .5; transition: opacity .3s ease; }\n#branch-banner-close:hover { opacity: 1; }\n#branch-banner .title { font-size: 18px; font-weight:bold; color: #555; }\n#branch-banner .description { font-size: 12px; font-weight: normal; color: #777; max-height: 30px; overflow: hidden; }\n#branch-banner .icon { float: left; padding-bottom: 40px; margin-right: 10px; margin-left: 5px; }\n#branch-banner .icon img { width: 63px; height: 63px; margin-right: 0; }\n#branch-banner .reviews { font-size:13px; margin: 1px 0 3px 0; color: #777; }\n#branch-banner .reviews .star { display:inline-block; position: relative; margin-right:0; }\n#branch-banner .reviews .star span { display: inline-block; margin-right: 0; color: #555; position: absolute; top: 0; left: 0; }\n#branch-banner .reviews .review-count { font-size:10px; }\n#branch-banner .reviews .star .half { width: 50%; overflow: hidden; display: block; }\n#branch-banner .content .left { padding: 6px 5px 6px 5px; }\n#branch-banner .vertically-align-middle { top: 50%; transform: translateY(-50%); -webkit-transform: translateY(-50%); -ms-transform: translateY(-50%); }\n#branch-banner .details > * { display: block; }\n#branch-banner .content .left { height: 63px; }\n#branch-banner .content .right { float: right; height: 63px; margin-bottom: 50px; padding-top: 22px; z-index: 1; }\n#branch-banner .right > div { float: left; }\n#branch-banner-action { top: 17px; }\n#branch-banner .content:after { content: ""; position: absolute; left: 0; right: 0; top: 100%; height: 1px; background: rgba(0, 0, 0, 0.2); }\n#branch-banner .theme-dark.content { background: rgba(51, 51, 51, 0.95); }\n#branch-banner .theme-dark #branch-banner-close{ color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, .15); }\n#branch-banner .theme-dark .details { text-shadow: 0 1px 1px rgba(0, 0, 0, .15); }\n#branch-banner .theme-dark .title { color: #fff; }\n#branch-banner .theme-dark .description { color: #fff; }\n#branch-banner .theme-dark .reviews { color: #888; }\n#branch-banner .theme-dark .reviews .star span{ color: #fff; }\n#branch-banner .theme-dark .reviews .review-count{ color: #fff; }\n',"ios"!==(s=P())&&"ipad"!==s||!f.T?"android"===s&&f.O?o+="#branch-banner { position: absolute; }\n#branch-banner .content .left .details .title { font-size: 12px; }\n#branch-mobile-action { white-space: nowrap; }\n#branch-banner .content .left .details .description { font-size: 11px; font-weight: normal; }\n@media only screen and (min-device-width: 320px) and (max-device-width: 350px) { #branch-banner .content .right { max-width: 120px; } }\n@media only screen and (min-device-width: 351px) and (max-device-width: 400px) and (orientation: landscape) { #branch-banner .content .right { max-width: 150px; } }\n@media only screen and (min-device-width: 401px) and (max-device-width: 480px) and (orientation: landscape) { #branch-banner .content .right { max-width: 180px; } }\n#branch-banner #branch-banner-close,#branch-banner .theme-dark #branch-banner-close { height:17px; width: 17px; text-align: center; font-size: 15px; top: 24px;  border-radius:14px; border:0; line-height:14px; color:#b1b1b3; background:#efefef; padding: 0; opacity: 1; }\n#branch-banner .button { top: 0; text-decoration:none; border-bottom: 3px solid #A4C639; padding: 0 10px; height: 24px; line-height: 24px; text-align: center; color: #fff; margin-top: 2px;  font-weight: bold; background-color: #A4C639; border-radius: 5px; }\n#branch-banner .button:hover { border-bottom:3px solid #8c9c29; background-color: #c1d739; }\n":"blackberry"===s&&f.P||"windows_phone"===s&&f.S||"kindle"===s&&f.R?o+="#branch-banner { position: absolute; }\n#branch-banner .content .left .details .title { font-size: 12px; }\n#branch-mobile-action { white-space: nowrap; }\n#branch-banner .content .left .details .description { font-size: 11px; font-weight: normal; }\n@media only screen and (min-device-width: 320px) and (max-device-width: 350px) { #branch-banner .content .right { max-width: 120px; } }\n@media only screen and (min-device-width: 351px) and (max-device-width: 400px) and (orientation: landscape) { #branch-banner .content .right { max-width: 150px; } }\n@media only screen and (min-device-width: 401px) and (max-device-width: 480px) and (orientation: landscape) { #branch-banner .content .right { max-width: 180px; } }\n":(o+="#branch-banner { position: fixed; min-width: 600px; }\n#branch-sms-block * { vertical-align: bottom; font-size: 15px; }\n#branch-sms-block { display: inline-block; }\n#branch-banner input{ border: 1px solid #ccc;  font-weight: 400;  border-radius: 4px; height: 30px; padding: 5px 7px 4px; width: 145px; font-size: 14px;}\n#branch-banner input:focus { outline: none; }\n#branch-banner input.error { color: rgb(194, 0, 0); border-color: rgb(194, 0, 0); }\n#branch-banner .branch-icon-wrapper { width:25px; height: 25px; vertical-align: middle; display: inline-block; margin-top: -18px; }\n@keyframes branch-spinner { 0% { transform: rotate(0deg); -webkit-transform: rotate(0deg); -ms-transform: rotate(0deg); } 100% { transform: rotate(360deg); -webkit-transform: rotate(360deg); -ms-transform: rotate(360deg); } }\n@-webkit-keyframes branch-spinner { 0% { transform: rotate(0deg); -webkit-transform: rotate(0deg); -ms-transform: rotate(0deg); } 100% { transform: rotate(360deg); -webkit-transform: rotate(360deg); -ms-transform: rotate(360deg); } }\n#branch-spinner { -webkit-animation: branch-spinner 1s ease-in-out infinite; animation: branch-spinner 1s ease-in-out infinite; transition: all 0.7s ease-in-out; border:2px solid #ddd; border-bottom-color:#428bca; width:80%; height:80%; border-radius:50%; -webkit-font-smoothing: antialiased !important; }\n#branch-banner .theme-dark input { border-color: transparent; }\n",o=window.ActiveXObject?o+"#branch-banner .checkmark { color: #428bca; font-size: 22px; }\n":o+"#branch-banner .checkmark { stroke: #428bca; stroke-dashoffset: 745.74853515625; stroke-dasharray: 745.74853515625; -webkit-animation: dash 2s ease-out forwards; animation: dash 2s ease-out forwards; }\n@-webkit-keyframes dash { 0% { stroke-dashoffset: 745.748535 15625; } 100% { stroke-dashoffset: 0; } }\n@keyframes dash { 0% { stroke-dashoffset: 745.74853515625; } 100% { stroke-dashoffset: 0; } }\n"):o+="#branch-banner { position: absolute; }\n#branch-banner .content .left .details .title { font-size: 12px; }\n#branch-mobile-action { white-space: nowrap; }\n#branch-banner .content .left .details .description { font-size: 11px; font-weight: normal; }\n@media only screen and (min-device-width: 320px) and (max-device-width: 350px) { #branch-banner .content .right { max-width: 120px; } }\n@media only screen and (min-device-width: 351px) and (max-device-width: 400px) and (orientation: landscape) { #branch-banner .content .right { max-width: 150px; } }\n@media only screen and (min-device-width: 401px) and (max-device-width: 480px) and (orientation: landscape) { #branch-banner .content .right { max-width: 180px; } }\n",o+=f.ea,f.D&&(o+="body { margin: 0; }\n",(s=document.createElement("style")).type="text/css",s.id="branch-iframe-css",ie(s),s.innerHTML="body { -webkit-transition: all 0.375s ease; transition: all 00.375s ease; }\n#branch-banner-iframe { box-shadow: 0 0 5px rgba(0, 0, 0, .35); width: 1px; min-width:100%; left: 0; right: 0; border: 0; height: 76px; z-index: 99999; -webkit-transition: all 0.25s ease; transition: all 00.25s ease; }\n"+(P()?qe(f.la,f.position):qe(f.fa,f.position)),(document.head||document.getElementsByTagName("head")[0]).appendChild(s)),(s=document.createElement("style")).type="text/css",s.id="branch-css",s.innerHTML=o,ie(s),(o=(o=f.D?p.contentWindow.document:document).head||o.getElementsByTagName("head")[0])&&"function"==typeof o.appendChild&&o.appendChild(s),"top"===f.position?p.style.top="-76px":"bottom"===f.position&&(p.style.bottom="-76px"),r.channel=r.channel||"app banner";var l=i.D?u.contentWindow.document:document;P()?(i.open_app=i.na,i.append_deeplink_path=i.ba,i.make_new_link=i.ka,i.deepview_type="banner",t.deepview(r,i),(c=l.getElementById("branch-mobile-action"))&&(c.onclick=function(e){e.preventDefault(),t.deepviewCta()})):l.getElementById("sms-form")?l.getElementById("sms-form").addEventListener("submit",function(e){e.preventDefault(),Xe(l,t,i,r)}):u.onload=function(){(l=u.contentWindow.document).getElementById("sms-form")&&l.getElementById("sms-form").addEventListener("submit",function(e){e.preventDefault(),Xe(l,t,i,r)})};var c=Ve("margin-top"),d=document.body.style.marginTop,f=Ve("margin-bottom"),h=document.body.style.marginBottom,p=l.getElementById("branch-banner-close");return p&&(p.onclick=function(e){e.preventDefault(),Wt(t,"willCloseBanner"),n({},function(){Wt(t,"didCloseBanner")})}),We(document.body,"branch-banner-is-active"),"top"===i.position?document.body.style.marginTop=Ke(c):"bottom"===i.position&&(document.body.style.marginBottom=Ke(f)),i.X?e():setTimeout(e,20),n}Le.prototype.local=function(){return Me(!0)},Le.prototype.session=function(){return Me(!1)},Le.prototype.cookie=function(){return{getAll:function(){for(var e={},t=document.cookie.split(";"),r=0;r<t.length;r++){var n=Ie(t[r]);n&&n.hasOwnProperty("name")&&n.hasOwnProperty("value")&&Ce(n.name)&&(e[n.name.replace("BRANCH_WEBSDK_KEY","")]=n.value)}return e},get:function(e){e=De(e);for(var t=document.cookie.split(";"),r=0;r<t.length;r++){var n=Ie(t[r]);if(n&&n.hasOwnProperty("name")&&n.hasOwnProperty("value")&&n.name===e)return n.value}return null},set:function(e,t){document.cookie=De(e)+"="+t+"; path=/"},remove:function(e){n(e,!0)},clear:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var r=Ie(e[t]);r&&r.hasOwnProperty("name")&&Ce(r.name)&&n(r.name,!1)}},isEnabled:function(){return navigator.cookieEnabled}};function n(e,t){t&&(e=De(e)),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}},Le.prototype.pojo={getAll:function(){return this.u},get:function(e){return this.u[e]||null},set:function(e,t){this.u[e]=t},remove:function(e){delete this.u[e]},clear:function(){this.u={}},isEnabled:function(){return!0}},Ue.prototype.g=0;var Je,Qe=1,Ze="top",et="absolute",tt="76px",rt=!1,nt=!1,it=[],at=window.innerHeight,ot=window.innerWidth;window.innerHeight<window.innerWidth&&(at=window.innerWidth,ot=window.innerHeight);var st=0,ut=0,lt=/<script type="application\/json">((.|\s)*?)<\/script>/,ct=/<script type="text\/javascript">((.|\s)*?)<\/script>/,dt=/<style type="text\/css" id="branch-css">((.|\s)*?)<\/style>/,ft=/#branch-banner-spacer {((.|\s)*?)}/,ht=/margin-bottom: (.*?);/,pt=/<script id="journeyLinkData" type="application\/json">((.|\s)*?)<\/script>/,gt=null,vt=null,yt=!1,mt=!1,bt=!1,_t=!1,Et=!1,wt="",kt=[],Tt=null;function St(e){if(e=e.match(lt))return m(e[1])}function xt(e,t,r,n,i,a,o){var s=Lt;n&&i&&(Array.prototype.forEach.call(i.contentWindow.document.querySelectorAll("#branch-mobile-action"),function(e){e.addEventListener("click",function(){Wt(gt,"didClickJourneyCTA",Tt),_t=!0,n(),Rt(i)})}),At(".branch-banner-continue","didClickJourneyContinue",r,i,e,t,a,o,s),At(".branch-banner-close","didClickJourneyClose",r,i,e,t,a,o,s))}function At(e,c,d,f,h,p,g,v,y){Array.prototype.forEach.call(f.contentWindow.document.querySelectorAll(e),function(e){e.addEventListener("click",function(){var e,t,r,n,i,a,o,s,u,l;e=c,t=d,r=f,n=h,i=p,a=g,s=y,l=(o=v)?0:function(e){var t;if("number"==typeof(e=e.globalDismissPeriod))return e=-1===e||(t=new Date).setSeconds(t.getSeconds()+e)}(a),Wt(gt,e,Tt),_t=!0,Rt(r),o||(void 0!==l&&t.set("globalJourneysDismiss",l,!0),l=n,n=i,(t=(t=(i=t).get("journeyDismissals",!0))?m(t):{})[n]={view_id:l,dismiss_time:Date.now()},i.set("journeyDismissals",b(t),!0),a.dismissRedirect?window.location=a.dismissRedirect:(u=function(){gt.removeListener(u);var e,t,r,n=(e=s,t={},(r=j())&&0<Object.keys(r).length&&(t.hosted_deeplink_data=r),e.I(Ot(null,t),null,gt,!0));gt.b(Re,n,function(e,t){!e&&"object"==typeof t&&t.template&&s.N(t,null,!1)&&s.J(t.template,n,n.branch_view_id||t.event_data.branch_view_data.id,t.event_data.branch_view_data,!1)})},gt.addListener("branch_internal_event_didCloseJourney",u)))})})}function Ot(e,t){return D({url:e&&e.url||O(),user_agent:navigator.userAgent,language:navigator.language,screen_width:screen.width||-1,screen_height:screen.height||-1},t||{})}function Rt(e,t){var r;bt&&!mt&&(document.body.style.transition="all 00.375s ease",document.getElementById("branch-banner-iframe").style.transition="all 00.25s ease",r=document.getElementById("branch-iframe-css").innerHTML+"\n",document.getElementById("branch-iframe-css").innerHTML="",document.getElementById("branch-iframe-css").innerHTML=r+"body { -webkit-transition: all 0.375s ease; }\n#branch-banner-iframe { -webkit-transition: all 0.25s ease; }\n"),"top"===Ze?e.style.top="-"+tt:"bottom"===Ze&&(e.style.bottom="-"+tt),Wt(gt,"willCloseJourney",Tt),setTimeout(function(){He(e),He(document.getElementById("branch-css")),He(document.getElementById("branch-iframe-css")),He(document.getElementById("branch-journey-cta")),(!mt||_t)&&it&&0<it.length?it.forEach(function(e){e.style.marginTop=0}):(Et=mt,wt=Ze,kt=it),"top"===Ze?document.body.style.marginTop=st:"bottom"===Ze&&(document.body.style.marginBottom=ut),ze("branch-banner-is-active"),ze("branch-banner-no-scroll"),Wt(gt,"didCloseJourney",Tt),t||Wt(gt,"branch_internal_event_didCloseJourney",Tt),yt=!1},mt?0:270)}var Lt={};function Dt(e,t){var r,n={banner_id:Je};if(a=e.match(pt)){var i=a[1],a="";try{a=m(i)}catch(e){}if(a){var o=["browser_fingerprint_id","app_id","source","open_app","link_click_id"];if((i=a.journey_link_data)&&"object"==typeof i&&!Array.isArray(i)&&0<Object.keys(i).length&&o&&Array.isArray(o)&&0<o.length)for(var s in i)i.hasOwnProperty(s)&&-1<o.indexOf(s)&&delete i[s];n=D(n,a)}}if(Tt=n,n=t?"OPEN":"GET",et=(a=St(s=e))&&a.bannerHeight&&a.position&&a.sticky?(tt=a.bannerHeight,Ze=a.position,a.sticky):(s=s.match(ft))?(Ze="top",(s=s[1].match(ht))&&(tt=s[1]),"absolute"):(Ze="bottom","fixed"),-1===tt.indexOf("vh")&&-1===tt.indexOf("%")||(tt=(s=tt.indexOf("vh")?tt.slice(0,-2):tt.slice(0,-1))/100*at+"px",s<100?nt=!0:rt=!0),(s=St(e))&&(t&&s&&s.ctaText&&s.ctaText.has_app?r=s.ctaText.has_app:s&&s.ctaText&&s.ctaText.no_app&&(r=s.ctaText.no_app),n=r,it=[],s&&s.injectorSelector&&(r=document.querySelectorAll(s.injectorSelector))))for(s=0;s<r.length;s++)it.push(r[s].parentElement);r=(r=e.match(dt))?r[1]:void 0,(s=e.match(ct))&&(s=s[1],(a=document.createElement("script")).id="branch-journey-cta",ie(a),a.innerHTML=s,document.body.appendChild(a));var u,a=(s=e).match(lt),i=s.match(ct),o=s.match(dt),t=s.match(pt);a&&(s=s.replace(lt,"")),i&&(s=s.replace(ct,"")),o&&(s=s.replace(dt,"")),e=s=t?s.replace(pt,""):s,(s=document.createElement("iframe")).src="about:blank",s.style.overflow="hidden",s.scrolling="no",s.id="branch-banner-iframe",s.className="branch-animation",s.title="Branch Banner",s.setAttribute("aria-label","Branch Banner"),ie(s),document.body.appendChild(s),a='<html><head></head><body class="'+("ios"===(a=P())||"ipad"===a?"branch-banner-ios":"android"===a?"branch-banner-android":"branch-banner-desktop")+'">'+e+"</body></html>",s.contentWindow.document.open(),s.contentWindow.document.write(a),s.contentWindow.document.close(),function(){var e=document.createElement("style");e.type="text/css",e.id="branch-iframe-css";var t=+(st=Ve("margin-top")).slice(0,-2),r=+(ut=Ve("margin-bottom")).slice(0,-2),n=+tt.slice(0,-2);"top"===Ze?document.body.style.marginTop=(+n+t).toString()+"px":"bottom"===Ze&&(document.body.style.marginBottom=(+n+r).toString()+"px"),0<it.length&&it.forEach(function(e){var t,r=window.getComputedStyle(e);(t=r?rt&&"fixed"===r.getPropertyValue("position"):t)||(e.style.marginTop=tt)}),"top"===wt&&wt!==Ze&&Et&&kt&&0<kt.length&&kt.forEach(function(e){e.style.marginTop=0}),Et=!1,wt="",_t=!(kt=[]),e.innerHTML=(r=n="",document.body.style.transition="",document.getElementById("branch-banner-iframe")&&(document.getElementById("branch-banner-iframe").style.transition=""),bt||(n="body { -webkit-transition: all 0.375s ease; }\n",document.body.style.transition="all 00.375s ease",r="-webkit-transition: all 0.25s ease; transition: all 00.25s ease;"),(n||"")+"#branch-banner-iframe { box-shadow: 0 0 5px rgba(0, 0, 0, .35); width: 1px; min-width:100%; left: 0; right: 0; border: 0; height: "+tt+"; z-index: 99999; "+r+" }\n#branch-banner-iframe { position: "+et+"; }\n@media only screen and (orientation: landscape) { body { "+("top"===Ze?"margin-top: ":"margin-bottom: ")+(rt?ot+"px":tt)+"; }\n#branch-banner-iframe { height: "+(rt?ot+"px":tt)+"; }"),ie(e),document.head.appendChild(e)}(),(a=document.createElement("style")).type="text/css",a.id="branch-css",a.innerHTML=r,ie(a),(r=s.contentWindow.document).head.appendChild(a),(nt||rt)&&(l=r.getElementsByClassName("branch-banner-content")[0])&&(l.style.height=tt),"top"===Ze?s.style.top="-"+tt:"bottom"===Ze&&(s.style.bottom="-"+tt);try{var l=r.getElementsByClassName("branch-banner-content")[0],c=window.getComputedStyle(l).getPropertyValue("background-color").split(", ");c[3]&&!parseFloat(c[3])&&(s.style.boxShadow="none")}catch(e){}return s.contentWindow.document.getElementById("branch-mobile-action").innerHTML=n,Wt(gt,"willShowJourney",Tt),u=s,We(document.body,"branch-banner-is-active"),rt&&"fixed"===et&&We(document.body,"branch-banner-no-scroll"),setTimeout(function(){"top"===Ze?u.style.top="0":"bottom"===Ze&&(u.style.bottom="0"),Wt(gt,"didShowJourney",Tt),yt=!0},20),s}Lt.N=function(e,t,r){return!(document.getElementById("branch-banner")||document.getElementById("branch-banner-iframe")||document.getElementById("branch-banner-container")||!P()||!e.event_data||!e.template||!r&&((e=!(e=!e.event_data.branch_view_data.id||t&&t.no_journeys)?!0===(t=(e=gt).c.get("globalJourneysDismiss",!0))||t>Date.now()||(e.c.remove("globalJourneysDismiss",!0),!1):e)&&(Lt.za=1)))},Lt.ja=function(e){gt.b(Oe,{event:"pageview",journey_displayed:!0,audience_rule_id:e.audience_rule_id,branch_view_id:e.branch_view_id},function(){})},Lt.J=function(e,t,r,n,i){Je=r;var a=n.audience_rule_id,o=document.getElementById("branch-iframe-css");o&&o.parentElement.removeChild(o),(o=document.createElement("div")).id="branch-banner",document.body.insertBefore(o,null),We(o,"branch-banner-is-active");var s=!1,u=t.callback_string,l=null,c=null,d=gt.c;if(e){var f=St(e)||{},h=window.setTimeout(function(){window[u]=function(){}},p);if(window[u]=function(e){window.clearTimeout(h),s||xt(r,a,d,c=e,l,f,i)},vt=l=Dt(e,t.has_app_websdk),null===l)return void(s=!0);xt(r,a,d,c,l,f,i),v["journey-load-time"]=(Date.now()-window.performance.timing.navigationStart).toString()}document.body.removeChild(o),E||i||Lt.ja(n)};var Pt,Ct={androidAppIndexingTagsPresent:!(Lt.I=function(e,t,r,n){gt=r,e=e||{},bt=(t=t||{}).disable_entry_animation||!1,mt=t.disable_exit_animation||!1;var i,a=D({},r.H),o=Fe(r.c)||{},s=!!o.hasOwnProperty("has_app")&&o.has_app,u=r.c.get("journeyDismissals",!0),l=(t.user_language||U()||"en").toLowerCase()||null,c=te(Ht(r));return(i=t.branch_view_id)||(i="_branch_view_id".replace(/[\[\]]/g,"\\$&"),i=(i=new RegExp("[?&]"+i+"(=([^&#]*)|&|#|$)").exec(O()))&&i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):""),i=i||null,r=t.make_new_link?null:L(Ht(r)),a.event=n?"dismiss":"pageview",a.metadata=e,a=X(a,"initial_referrer",c),a=X(a,"branch_view_id",i),a=X(a,"no_journeys",t.no_journeys),a=X(a,"is_iframe",ee()),(a=X(a,"journey_dismissals",u)).user_language=l,a.open_app=t.open_app||!1,a.has_app_websdk=s,a.feature="journeys",a.callback_string="branch_view_callback__"+Qe++,a.data||(a.data={}),a.data=D(j(),a.data),a.data=D(function(){var t=/^\$journeys_\S+$/,r=(o||{}).data,n={};if(!r)return{};switch(typeof r){case"string":try{r=m(r)}catch(e){r={}}break;case"object":break;default:r={}}return Object.keys(r).forEach(function(e){t.test(e)&&(n[e]=r[e])}),n}(),a.data),r&&(a.data.link_click_id=r),R(a)}),iosAppIndexingTagsPresent:!1,androidDetailsComplete:!1,iosDetailsComplete:!1},It={};function Mt(e){"android"===e&&Ct.androidDetailsComplete&&Nt(Ft("android-app://"+It.androidPackageName+"/"+It.androidURL)),"ios"===e&&Ct.iosDetailsComplete&&Nt(Ft("ios-app://"+It.iosAppId+"/"+It.iosURL))}function Ft(e){var t={"~channel":"Firebase App Indexing","~feature":"Auto App Indexing",$canonical_url:O()};if("object"==typeof It.data)for(var r in It.data)It.data.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=It.data[r]);return e+(-1<e.indexOf("?")?"&":"?")+"link_click_id=a-"+btoa(b(t))}function Nt(e){var t=document.createElement("link");t.setAttribute("rel","alternate"),t.setAttribute("href",e),document.head.appendChild(t)}function jt(e){"android"===e&&"string"==typeof It.androidPackageName&&"string"==typeof It.androidURL&&(Ct.androidDetailsComplete=!0,Mt("android")),"ios"===e&&"string"==typeof It.iosAppId&&"string"==typeof It.iosURL&&(Ct.iosDetailsComplete=!0,Mt("ios"))}function Ut(e){for(var t=document.getElementsByTagName("meta"),r=0;r<t.length;r++){var n=t[r];"ios"===e&&"al:ios:app_store_id"===n.getAttribute("property")&&(It.iosAppId=n.getAttribute("content")),"ios"===e&&"al:ios:url"===n.getAttribute("property")&&(It.iosURL=n.getAttribute("content").replace("://","/")),"android"===e&&"al:android:package"===n.getAttribute("property")&&(It.androidPackageName=n.getAttribute("content")),"android"===e&&"al:android:url"===n.getAttribute("property")&&(It.androidURL=n.getAttribute("content").replace("://","/"))}jt(e)}function Bt(a,o,s){return function(){var t,n,i=this,e=arguments[arguments.length-1];a&&"function"==typeof e?(t=Array.prototype.slice.call(arguments,0,arguments.length-1)||[],n=e):(n=function(){},t=Array.prototype.slice.call(arguments)),i.$(function(r){function e(e,t){try{if(e&&!a)throw e;1===a?n(e):2===a&&n(e,t)}finally{r()}}if(!s){if(1===i.j)return e(Error(x("Branch SDK initialization pending and a Branch method was called outside of the queue order")),null);if(2===i.j)return e(Error(x("Branch SDK initialization failed, so further methods cannot be called",i.i,i.l)),null);if(0===i.j||!i.j)return e(Error(x("Branch SDK not initialized")),null)}t.unshift(e),o.apply(i,t)})}}function Gt(){if(!(this instanceof Gt))return Pt=Pt||new Gt;var t;this.$=(t=[],function(e){t.push(e),1===t.length&&function e(){t.length&&t[0](function(){t.shift(),e()})}()}),this.c=new Le(["session","cookie","pojo"]),this.ca=new Ue,this.g=[],this.V="web2.45.0",this.i=this.j=0,this.l=null}function Ht(e){var t=Fe(e.c);return(t=t&&t.referring_link)?t:(e=e.c.get("click_id"))?"https://bnc.lt/c/"+e:null}function Wt(e,t,r){for(var n=0;n<e.g.length;n++)e.g[n].event&&e.g[n].event!==t||e.g[n].listener(t,r)}function zt(e,t,r){r=r||{};try{e.H=m(b(r))}finally{e.H=e.H||{}}t()}Gt.prototype.b=function(e,t,r){return this.U&&(t.app_id=this.U),this.h&&(t.branch_key=this.h),(e.a&&e.a.session_id||e.f&&e.f.session_id)&&this.G&&(t.session_id=this.G),(e.a&&e.a.identity_id||e.f&&e.f.identity_id)&&this.v&&(t.identity_id=this.v),(e.a&&e.a.link_click_id||e.f&&e.f.link_click_id)&&this.Z&&(t.link_click_id=this.Z),(e.a&&e.a.sdk||e.f&&e.f.sdk)&&this.V&&(t.sdk=this.V),(e.a&&e.a.browser_fingerprint_id||e.f&&e.f.browser_fingerprint_id)&&this.B&&(t.browser_fingerprint_id=this.B),E&&(t.tracking_disabled=E),Ge(this.ca,e,t,this.c,function(e,t){r(e,t)})},Gt.prototype.init=Bt(2,function(a,e,o){function r(){var e,t;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),t&&!s.da&&(s.da=!0,document.addEventListener(t,function(){document[e]||(i(null),"function"==typeof s.s&&s.s())},!1))}function n(e,t){if(t&&((r=t).link_click_id&&(s.Z=r.link_click_id.toString()),r.session_id&&(s.G=r.session_id.toString()),r.identity_id&&(s.v=r.identity_id.toString()),r.link&&(s.M=r.link),r.referring_link&&(n=r.referring_link,r.referring_link=n?"http"!==n.substring(0,4)?"https://bnc.lt"+n:n:null),!r.click_id&&r.referring_link&&(r.click_id=L(r.referring_link)),s.B=r.browser_fingerprint_id,t=r,E||Ne(s.c,t,c),s.j=3,t.data_parsed=t.data&&0!==t.data.length?m(t.data):{}),e)return s.j=2,s.i||(s.i=1,s.l=e.message),a(e,t&&A(t));var r,n;try{a(e,t&&A(t))}catch(e){}finally{s.renderFinalize()}e={},t=X(t={},"$og_title",N("title")),t=X(t,"$og_description",N("description")),t=X(t,"$og_image_url",N("image")),t=(t=X(t,"$og_video",N("video")))&&0<Object.keys(t).length?t:null,e=X(e,"og_data",t),e=X(e,"hosted_deeplink_data",j()),e=X(e,"title",0<(t=document.getElementsByTagName("title")).length?t[0].innerText:null),e=X(e,"description",(t=document.querySelector('meta[name="description"]'))&&t.content?t.content:null),t=(e=X(e,"canonical_url",(t=document.querySelector('link[rel="canonical"]'))&&t.href?t.href:null))&&0<Object.keys(e).length?e:{},e=Q(o.metadata,"object")?o.metadata:null;(e=e&&ne(t.hosted_deeplink_data,e))&&0<Object.keys(e).length&&(t.hosted_deeplink_data=e);var i=Lt.I(Ot(o,t),o,s,!1);s.renderQueue(function(){s.b(Oe,i,function(e,t){e||"object"!=typeof t||(e=!!i.branch_view_id,Lt.N(t,o,e)?Lt.J(t.template,i,i.branch_view_id||t.event_data.branch_view_data.id,t.event_data.branch_view_data,e):Wt(gt,"willNotShowJourney")),E&&(k=!0)})})}function i(r){var e={sdk:"2.45.0",branch_key:s.h},n=Fe(s.c)||{},t=Fe(s.c,!0)||{};t.browser_fingerprint_id&&(e._t=t.browser_fingerprint_id),C()||s.b(le,e,function(e,t){e&&(s.i=3,s.l=e.message),t&&(n.browser_fingerprint_id=t)}),s.b(ke,{browser_fingerprint_id:n.browser_fingerprint_id},function(e,t){e&&(s.i=4,s.l=e.message),e||!t||n.has_app||(n.has_app=!0,je(s.c,n),Wt(s,"didDownloadApp")),r&&r(null,n)})}v["init-began-at"]=(Date.now()-window.performance.timing.navigationStart).toString();var s=this;-(s.j=1)<e.indexOf("key_")?s.h=e:s.U=e,o=o&&Q(o,"object")?o:{},f=(s.F=o)&&o.retries&&Number.isInteger(o.retries)?o.retries:f,h=o&&o.retry_delay&&Number.isInteger(o.retry_delay)?o.retry_delay:h,p=o&&o.timeout&&Number.isInteger(o.timeout)?o.timeout:p,g=o&&o.nonce?o.nonce:g,E=!(!o||!o.tracking_disabled||!0!==o.tracking_disabled),k=!1,E&&S(s),e=Fe(s.c);var u,l=(o&&void 0!==o.branch_match_id&&null!==o.branch_match_id?o.branch_match_id:null)||function(){try{var e=(ee()&&t()?window.top:window).location.search.substring(1).match(/_branch_match_id=([^&]*)/);if(e&&1<=e.length)return e[1]}catch(e){}}()||function(){try{var e=(ee()&&t()?window.top:window).location.hash.match(/r:([^&]*)/);if(e&&1<=e.length)return e[1]}catch(e){}}(),c=!e||!e.identity_id;s.A=!!s.c.get("branch_view_enabled"),e&&e.session_id&&!l?(je(s.c,{data:""}),je(s.c,{referring_link:""}),r(),i(n)):(e={sdk:"2.45.0",branch_key:s.h},(u=Fe(s.c,!0)||{}).browser_fingerprint_id&&(e._t=u.browser_fingerprint_id),C()?s.b(ue,{link_identifier:l,browser_fingerprint_id:l||u.browser_fingerprint_id,alternative_browser_fingerprint_id:u.browser_fingerprint_id,options:o,initial_referrer:te(Ht(s))},function(e,t){e&&(s.i=2,s.l=e.message),e||"object"!=typeof t||(t.branch_view_enabled&&(s.A=!!t.branch_view_enabled,s.c.set("branch_view_enabled",s.A)),l&&(t.click_id=l)),r(),n(e,t)}):s.b(le,e,function(e,t){return e?(s.i=3,s.l=e.message,n(e,null)):void s.b(ue,{link_identifier:l,browser_fingerprint_id:l||t,alternative_browser_fingerprint_id:u.browser_fingerprint_id,options:o,initial_referrer:te(Ht(s))},function(e,t){e&&(s.i=2,s.l=e.message),e||"object"!=typeof t||(t.branch_view_enabled&&(s.A=!!t.branch_view_enabled,s.c.set("branch_view_enabled",s.A)),l&&(t.click_id=l)),r(),n(e,t)})}))},!0),Gt.prototype.renderQueue=Bt(0,function(e,t){this.aa?t():(this.m=this.m||[],this.m.push(t)),e(null,null)}),Gt.prototype.renderFinalize=Bt(2,function(e){this.m&&0<this.m.length&&(this.m.forEach(function(e){e.call(this)}),delete this.m),this.aa=!0,e(null,null)}),Gt.prototype.data=Bt(2,function(e){var t=A(Fe(this.c));t.referring_link=Ht(this),t.data_parsed=t.data&&0!==t.data.length?m(t.data):{},e(null,t)}),Gt.prototype.first=Bt(2,function(e){e(null,A(Fe(this.c,!0)))}),Gt.prototype.setIdentity=Bt(2,function(r,n){var i=this;this.b(ve,{identity:n},function(e,t){e&&r(e),i.v=(t=t||{}).identity_id?t.identity_id.toString():null,i.M=t.link,i.C=n,t.referring_data_parsed=t.referring_data?m(t.referring_data):null,je(i.c,t),r(null,t)})}),Gt.prototype.logout=Bt(1,function(r){var n=this;this.b(ge,{},function(e,t){e&&r(e),t={data_parsed:null,data:null,referring_link:null,click_id:null,link_click_id:null,identity:null,session_id:(t=t||{}).session_id,identity_id:t.identity_id,link:t.link,device_fingerprint_id:n.ga||null},n.M=t.link,n.G=t.session_id,n.v=t.identity_id,n.C=t.identity,je(n.c,t),r(null)})}),Gt.prototype.getBrowserFingerprintId=Bt(2,function(e){e(null,(Fe(this.c,!0)||{}).browser_fingerprint_id||null)}),Gt.prototype.track=Bt(1,function(n,e,t,i){var a;t=t||{},g=(i=i||{}).nonce?i.nonce:g,"pageview"===e?((e=ne(j(),t))&&0<Object.keys(e).length&&(t.hosted_deeplink_data=e),a=Lt.I(Ot(i,t),i,this,!1),this.b(Oe,a,function(e,t){var r;e||"object"!=typeof t||(r=!!a.branch_view_id,Lt.N(t,i,r)?Lt.J(t.template,a,a.branch_view_id||t.event_data.branch_view_data.id,t.event_data.branch_view_data,r):Wt(gt,"willNotShowJourney")),"function"==typeof n&&n.apply(this,arguments)})):this.b(Te,{event:e,metadata:D({url:O(),user_agent:navigator.userAgent,language:navigator.language},t),initial_referrer:te(Ht(this))},function(e,t){"function"==typeof n&&n.apply(this,arguments)})}),Gt.prototype.logEvent=Bt(1,function(t,e,r,n){e=Q(e,"string")?e:null,r=Q(r,"object")?r:null,-1<$.indexOf(e)?(n=Q(n,"array")?n:null,r=function(e){if(!e||!Object.keys(e).length)return null;for(var t=B(J,Object.keys(e)),r={},n=0;n<t.length;n++){var i=t[n];r[i]=e[i],delete e[i]}return{custom_data:re(r),event_data:e}}(r),this.b(xe,{name:e,user_data:b(Z(this)),custom_data:b(r&&r.custom_data||{}),event_data:b(r&&r.event_data||{}),content_items:b(n||[])},function(e){return t(e||null)})):this.b(Ae,{name:e,user_data:b(Z(this)),custom_data:b(re(r)||{})},function(e){return t(e||null)})}),Gt.prototype.link=Bt(2,function(r,e){var n=R(e),i=this.h;this.b(Ee,n,function(e,t){return e?r(null,T(i,n)):void r(null,t&&t.url)})}),Gt.prototype.sendSMS=Bt(1,function(r,t,e,n){function i(e){a.b(de,{link_url:e,phone:t},function(e){r(e||null)})}var a=this;(n="function"==typeof n||null==n?{}:n).make_new_link=n.make_new_link||!1,e.channel&&"app banner"!==e.channel||(e.channel="sms");var o=Ht(a);o&&!n.make_new_link?i(L(o)):a.b(Ee,R(e),function(e,t){if(e)return r(e);e=t.url;/(bnc.lt\/|app\.link\/)/.test(e)||(e="https://bnc.lt/"+((t=e)?(t=-1<t.indexOf("://")?t.split("://")[1]:t).substring(t.indexOf("/")+1):null)),a.b(ce,{link_url:e,click:"click"},function(e,t){return e?r(e):void i(t.click_id)})})}),Gt.prototype.deepview=Bt(1,function(r,e,t){var n=this;(t=t||{}).deepview_type=void 0===t.deepview_type?"deepview":"banner",e.data=D(j(),e.data),e=R(e=ee()?D({is_iframe:!0},e):e);var i=T(this.h,e);!t.open_app&&null!==t.open_app&&void 0!==t.open_app||(e.open_app=!0),e.append_deeplink_path=!!t.append_deeplink_path,e.deepview_type=t.deepview_type;var a=Ht(n);a&&!t.make_new_link&&(e.link_click_id=L(a)),e.banner_options=t,n.s=u(this.b,n,we,e,function(e,t){return e?(E||(n.o=function(){window.top.location=i}),r(e)):("function"==typeof t&&(n.o=t),void r(null))}),n.s()}),Gt.prototype.deepviewCta=Bt(1,function(e){return void 0===this.o?e(E?Error("Requested operation cannot be completed since tracking is disabled"):Error("Cannot call Deepview CTA, please call branch.deepview() first"),null):(window.event&&(window.event.preventDefault?window.event.preventDefault():window.event.returnValue=!1),Wt(this,"didDeepviewCTA"),this.o(),void e())}),Gt.prototype.referrals=Bt(2,function(e){this.b(ye,{},e)}),Gt.prototype.getCode=Bt(2,function(e,t){t.type="credit",t.creation_source=t.creation_source||2,this.b(fe,t,e)}),Gt.prototype.validateCode=Bt(1,function(e,t){this.b(he,{code:t},e)}),Gt.prototype.applyCode=Bt(1,function(e,t){this.b(pe,{code:t},e)}),Gt.prototype.credits=Bt(2,function(e){this.b(be,{branch_key:this.h,identity:this.C},e)}),Gt.prototype.creditHistory=Bt(2,function(e,t){this.b(me,t||{},e)}),Gt.prototype.redeem=Bt(1,function(t,e,r){this.b(_e,{amount:e,bucket:r},function(e){t(e||null)})}),Gt.prototype.addListener=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e=null),t&&this.g.push({listener:t,event:e||null})},Gt.prototype.removeListener=function(t){t&&(this.g=this.g.filter(function(e){if(e.listener!==t)return e}))},Gt.prototype.setBranchViewData=Bt(1,function(e,t){zt.call(null,this,e,t)}),Gt.prototype.closeJourney=Bt(1,function(e){var t=this;t.renderQueue(function(){return vt&&yt?(Wt(t,"didCallJourneyClose",Tt),void Rt(vt,!0)):e("Journey already dismissed.")}),e()}),Gt.prototype.banner=Bt(1,function(e,t,r){r=r||{},zt.call(null,this,function(){},r),void 0===t.showAgain&&void 0!==t.forgetHide&&(t.showAgain=t.forgetHide);var n={icon:Y(t.icon)||"",title:Y(t.title)||"",description:Y(t.description)||"",L:"number"==typeof t.reviewCount&&0<t.reviewCount?Math.floor(t.reviewCount):null,w:"number"==typeof t.rating&&t.rating<=5&&0<t.rating?Math.round(2*t.rating)/2:null,ma:Y(t.openAppButtonText)||"View in app",ia:Y(t.downloadAppButtonText)||"Download App",qa:Y(t.sendLinkText)||"Send Link",oa:Y(t.phonePreviewText)||"(999) 999-9999",D:void 0===t.iframe||t.iframe,T:void 0===t.showiOS||t.showiOS,sa:void 0===t.showiPad||t.showiPad,O:void 0===t.showAndroid||t.showAndroid,P:void 0===t.showBlackberry||t.showBlackberry,S:void 0===t.showWindowsPhone||t.showWindowsPhone,R:void 0===t.showKindle||t.showKindle,ra:void 0===t.showDesktop||t.showDesktop,ha:!!t.disableHide,K:"number"==typeof t.forgetHide?t.forgetHide:!!t.forgetHide,pa:void 0!==t.respectDNT&&t.respectDNT,position:t.position||"top",ea:t.customCSS||"",la:void 0!==t.mobileSticky&&t.mobileSticky,fa:void 0===t.desktopSticky||t.desktopSticky,va:t.buttonBorderColor||"",ta:t.buttonBackgroundColor||"",xa:t.buttonFontColor||"",wa:t.buttonBorderColorHover||"",ua:t.buttonBackgroundColorHover||"",ya:t.buttonFontColorHover||"",ka:!!t.make_new_link,na:!!t.open_app,X:!!t.immediate,ba:!!t.append_deeplink_path};void 0!==t.showMobile&&(n.T=t.showMobile,n.O=t.showMobile,n.P=t.showMobile,n.S=t.showMobile,n.R=t.showMobile),r.data=D(j(),r.data);var i=this;i.renderQueue(function(){i.W=$e(i,n,r,i.c)}),e()}),Gt.prototype.closeBanner=Bt(0,function(e){var t=this;t.renderQueue(function(){t.W&&(Wt(t,"willCloseBanner"),t.W(function(){Wt(t,"didCloseBanner")}))}),e()}),Gt.prototype.autoAppIndex=Bt(1,function(e,t){t=t||{};var r=document.getElementsByTagName("link"),n=r.length;if(n)for(var i=0;i<n;i++){var a=r[i],o=a.href;o&&(o.includes("ios-app")&&(Ct.iosAppIndexingTagsPresent=!0,a.setAttribute("href",Ft(o))),o.includes("android-app")&&(Ct.androidAppIndexingTagsPresent=!0,a.setAttribute("href",Ft(o))))}It=t,Ct.androidAppIndexingTagsPresent||(jt("android"),Ct.androidDetailsComplete||Ut("android")),Ct.iosAppIndexingTagsPresent||(jt("ios"),Ct.iosDetailsComplete||Ut("ios")),Ct.iosDetailsComplete||Ct.androidDetailsComplete?e(null):e("Firebase App Indexing tags were not added to your webpage. Please check your configuration.")}),Gt.prototype.trackCommerceEvent=Bt(1,function(r,n,i,a){var o=this;o.renderQueue(function(){var e,t,t=(t=i,(e=n)&&"string"==typeof e&&-1!==G.indexOf(e.toLowerCase())?t&&"object"==typeof t&&Object.keys(t).length?function(e){var t="sku name price quantity brand category variant".split(" "),r=B("common type transaction_id currency revenue revenue_in_usd exchange_rate shipping tax coupon affiliation persona products".split(" "),Object.keys(e));if(r.length)return z+r.join(", ");var n,i=[];if(e.hasOwnProperty("products")){if(!Array.isArray(e.products))return K;if(e.products.forEach(function(e){"object"!=typeof e&&(n=q),i=i.concat(B(t,Object.keys(e)))}),n)return n;if(i.length)return V+i.join(", ")}return null}(t)||null:W:H);if(t)return r(Error(t));o.b(Se,{event:n,metadata:D({url:document.URL,user_agent:navigator.userAgent,language:navigator.language},a||{}),initial_referrer:te(Ht(o)),commerce_data:i},function(e){r(e||null)})}),r()}),Gt.prototype.disableTracking=Bt(1,function(e,t){!1===t||"false"===t?(k=E=!1,this.h&&this.F&&(!0===this.F.tracking_disabled&&delete this.F.tracking_disabled,this.init(this.h,this.F))):void 0!==t&&!0!==t&&"true"!==t||(S(this),k=E=!0,this.closeBanner(),this.closeJourney()),e()});var Vt=new Gt;if(window.branch&&window.branch._q)for(var Kt=window.branch._q,qt=0;qt<Kt.length;qt++){var Yt=Kt[qt];Vt[Yt[0]].apply(Vt,Yt[1])}void 0===($t=function(){return Vt}.call(Qt,Zt,Qt,Jt))||(Jt.exports=$t),window&&(window.branch=Vt)}()}.call(this,Zt(56))},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=(i.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},i.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},i);function i(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}},,,,,,,,,function(e,t,r){var n=r(105),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{var n=!(e[s]=void 0)}catch(e){}var i=o.call(e);return n&&(t?e[s]=r:delete e[s]),i}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var r=r(363),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=r(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(n,function(e,t,r,n){i.push(r?n.replace(a,"$1"):t||e)}),i});e.exports=r},function(e,t,r){var n=r(364);e.exports=function(e){var e=n(e,function(e){return 500===t.size&&t.clear(),e}),t=e.cache;return e}},function(e,t,r){var o=r(179);function s(n,i){if("function"!=typeof n||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");function a(){var e=arguments,t=i?i.apply(this,e):e[0],r=a.cache;return r.has(t)?r.get(t):(e=n.apply(this,e),a.cache=r.set(t,e)||r,e)}return a.cache=new(s.Cache||o),a}s.Cache=o,e.exports=s},function(e,t,r){var n=r(366),i=r(136),a=r(180);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},function(e,t,r){var n=r(367),i=r(372),a=r(373),o=r(374),r=r(375);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=r,e.exports=s},function(e,t,r){var n=r(135);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t,r){var n=r(33),i=r(369),a=r(29),o=r(233),s=/^\[object .+?Constructor\]$/,u=Function.prototype,r=Object.prototype,u=u.toString,r=r.hasOwnProperty,l=RegExp("^"+u.call(r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(n(e)?l:s).test(o(e))}},function(e,t,r){var r=r(370),n=(r=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!n&&n in e}},function(e,t,r){r=r(46)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e){e=this.has(e)&&delete this.__data__[e];return this.size-=e?1:0,e}},function(e,t,r){var n=r(135),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(135),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},function(e,t,r){var n=r(135);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(137),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,e=n(t,e);return!(e<0||(e==t.length-1?t.pop():i.call(t,e,1),--this.size,0))}},function(e,t,r){var n=r(137);e.exports=function(e){var t=this.__data__,e=n(t,e);return e<0?void 0:t[e][1]}},function(e,t,r){var n=r(137);e.exports=function(e){return-1<n(this.__data__,e)}},function(e,t,r){var i=r(137);e.exports=function(e,t){var r=this.__data__,n=i(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},function(e,t,r){var n=r(138);e.exports=function(e){e=n(this,e).delete(e);return this.size-=e?1:0,e}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(138);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(138);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var i=r(138);e.exports=function(e,t){var r=i(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},function(e,t){e.exports=function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,r)},t)}},function(e,t,r){var n=r(388),i=r(237),r=r(122);e.exports=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var n=r(239);e.exports=function(e){return e?(e=n(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,r){var n=r(391),i=/^\s+/;e.exports=function(e){return e&&e.slice(0,n(e)+1).replace(i,"")}},function(e,t){var r=/\s/;e.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(84),i=r(60);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(84),i=r(183),a=r(60),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[n(e)]}},function(e,t,r){r=r(242)(Object.keys,Object);e.exports=r},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&r.call(e,t)}},function(e,t){e.exports=function(u){return function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[u?o:++n];if(!1===t(i[s],s,i))break}return e}}},function(e,t,r){var a=r(145),o=r(46);e.exports=function(t,e,r){var n=1&e,i=a(t);return function e(){return(this&&this!==o&&this instanceof e?i:t).apply(n?r:this,arguments)}}},function(e,t,r){var l=r(140),n=r(145),c=r(251),d=r(254),f=r(148),h=r(125),p=r(46);e.exports=function(a,o,s){var u=n(a);return function e(){for(var t=arguments.length,r=Array(t),n=t,i=f(e);n--;)r[n]=arguments[n];i=t<3&&r[0]!==i&&r[t-1]!==i?[]:h(r,i);return(t-=i.length)<s?d(a,o,c,e.placeholder,void 0,r,i,void 0,void 0,s-t):l(this&&this!==p&&this instanceof e?u:a,this,r)}}},function(e,t){e.exports=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}},function(e,t){e.exports={}},function(e,t,r){var n=r(186),i=r(189),a=r(187),o=r(22),s=r(60),u=r(404),l=Object.prototype.hasOwnProperty;function c(e){if(s(e)&&!o(e)&&!(e instanceof n)){if(e instanceof i)return e;if(l.call(e,"__wrapped__"))return u(e)}return new i(e)}c.prototype=a.prototype,e.exports=c.prototype.constructor=c},function(e,t,r){var n=r(186),i=r(189),a=r(147);e.exports=function(e){if(e instanceof n)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e,t){var r=/\{\n\/\* \[wrapped with (.+)\] \*/,n=/,? & /;e.exports=function(e){e=e.match(r);return e?e[1].split(n):[]}},function(e,t){var i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(1<r?"& ":"")+t[n],t=t.join(2<r?", ":" "),e.replace(i,"{\n/* [wrapped with "+t+"] */\n")}},function(e,t,r){var i=r(190),a=r(191),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(r,n){return i(o,function(e){var t="_."+e[0];n&e[1]&&!a(r,t)&&r.push(t)}),r.sort()}},function(e,t){e.exports=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},function(e,t,r){var o=r(147),s=r(109),u=Math.min;e.exports=function(e,t){for(var r=e.length,n=u(t.length,r),i=o(e);n--;){var a=t[n];e[n]=s(a,r)?i[a]:void 0}return e}},function(e,t,r){var f=r(140),n=r(145),h=r(46);e.exports=function(s,e,u,l){var c=1&e,d=n(s);return function e(){for(var t=-1,r=arguments.length,n=-1,i=l.length,a=Array(i+r),o=this&&this!==h&&this instanceof e?d:s;++n<i;)a[n]=l[n];for(;r--;)a[n++]=arguments[++t];return f(o,c?u:this,a)}}},function(e,t,r){var s=r(252),u=r(253),l=r(125),c=Math.min;e.exports=function(e,t){var r=e[1],n=t[1],i=r|n,a=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!(i<131)&&!a)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var o,r=t[3];return r&&(o=e[3],e[3]=o?s(o,r,t[4]):r,e[4]=o?l(e[3],"__lodash_placeholder__"):t[4]),(r=t[5])&&(o=e[5],e[5]=o?u(o,r,t[6]):r,e[6]=o?l(e[5],"__lodash_placeholder__"):t[6]),(r=t[7])&&(e[7]=r),128&n&&(e[8]=null==e[8]?t[8]:c(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}},function(e,t,r){r=r(85)(r(46),"DataView");e.exports=r},function(e,t,r){r=r(85)(r(46),"Promise");e.exports=r},function(e,t,r){var p=r(149),g=r(190),v=r(193),y=r(422),m=r(423),b=r(261),_=r(147),E=r(426),w=r(428),k=r(264),T=r(266),S=r(126),x=r(429),A=r(430),O=r(269),R=r(22),L=r(124),D=r(434),P=r(29),C=r(436),I=r(57),M=r(87),F={};F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object DataView]"]=F["[object Boolean]"]=F["[object Date]"]=F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object Symbol]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Error]"]=F["[object Function]"]=F["[object WeakMap]"]=!1,e.exports=function r(n,i,a,e,t,o){var s,u=1&i,l=2&i,c=4&i;if(void 0!==(s=a?t?a(n,e,t,o):a(n):s))return s;if(!P(n))return n;var d=R(n);if(d){if(s=x(n),!u)return _(n,s)}else{var f=S(n),e="[object Function]"==f||"[object GeneratorFunction]"==f;if(L(n))return b(n,u);if("[object Object]"==f||"[object Arguments]"==f||e&&!t){if(s=l||e?{}:O(n),!u)return l?w(n,m(s,n)):E(n,y(s,n))}else{if(!F[f])return t?n:{};s=A(n,f,u)}}u=(o=o||new p).get(n);if(u)return u;o.set(n,s),C(n)?n.forEach(function(e){s.add(r(e,i,a,e,n,o))}):D(n)&&n.forEach(function(e,t){s.set(t,r(e,i,a,t,n,o))});var h=d?void 0:(c?l?T:k:l?M:I)(n);return g(h||n,function(e,t){h&&(e=n[t=e]),v(s,t,r(e,i,a,t,n,o))}),s}},function(e,t,r){var n=r(136);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var i=r(136),a=r(180),o=r(179);e.exports=function(e,t){var r=this.__data__;if(r instanceof i){var n=r.__data__;if(!a||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(n)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(110),i=r(57);e.exports=function(e,t){return e&&n(t,i(t),e)}},function(e,t,r){var n=r(110),i=r(87);e.exports=function(e,t){return e&&n(t,i(t),e)}},function(e,t,r){var i=r(29),a=r(144),o=r(425),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return o(e);var t,r=a(e),n=[];for(t in e)("constructor"!=t||!r&&s.call(e,t))&&n.push(t);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var n=r(110),i=r(195);e.exports=function(e,t){return n(e,i(e),t)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}},function(e,t,r){var n=r(110),i=r(263);e.exports=function(e,t){return n(e,i(e),t)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,r){var i=r(197),a=r(431),o=r(432),s=r(433),u=r(268);e.exports=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return a(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return o(e);case"[object Set]":return new n;case"[object Symbol]":return s(e)}}},function(e,t,r){var n=r(197);e.exports=function(e,t){t=t?n(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}},function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,r){var r=r(105),r=r?r.prototype:void 0,n=r?r.valueOf:void 0;e.exports=function(e){return n?Object(n.call(e)):{}}},function(e,t,r){var n=r(435),i=r(143),r=r(184),r=r&&r.isMap,n=r?i(r):n;e.exports=n},function(e,t,r){var n=r(126),i=r(60);e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},function(e,t,r){var n=r(437),i=r(143),r=r(184),r=r&&r.isSet,n=r?i(r):n;e.exports=n},function(e,t,r){var n=r(126),i=r(60);e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},function(e,t){e.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=t<=e?e:t)),e}},function(r,i,n){!function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(i=r.exports=n(440)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t,r,n=this.useColors;e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+i.humanize(this.diff),n&&(n="color: "+this.color,e.splice(1,0,n,"color: inherit"),e[r=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,n))},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}.call(this,n(111))},function(e,s,t){var u;function r(e){function o(){if(o.enabled){var n=o,e=+new Date,t=e-(u||e);n.diff=t,n.prev=u,n.curr=e,u=e;for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];i[0]=s.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var r=s.formatters[t];return"function"==typeof r&&(t=i[a],e=r.call(n,t),i.splice(a,1),a--),e}),s.formatArgs.call(n,i),(o.log||s.log||console.log.bind(console)).apply(n,i)}}return o.namespace=e,o.enabled=s.enabled(e),o.useColors=s.useColors(),o.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return s.colors[Math.abs(r)%s.colors.length]}(e),"function"==typeof s.init&&s.init(o),o}(s=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e),s.names=[],s.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,n=0;n<r;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){for(var t=0,r=s.skips.length;t<r;t++)if(s.skips[t].test(e))return!1;for(t=0,r=s.names.length;t<r;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=t(441),s.names=[],s.skips=[],s.formatters={}},function(e,t){function i(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(r,e){e=e||{};var t,n=typeof r;if("string"==n&&0<r.length)return function(e){if(!(100<(e=String(r)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(r);if("number"==n&&!1===isNaN(r))return e.long?i(t=r,864e5,"day")||i(t,36e5,"hour")||i(t,6e4,"minute")||i(t,1e3,"second")||t+" ms":864e5<=(t=r)?Math.round(t/864e5)+"d":36e5<=t?Math.round(t/36e5)+"h":6e4<=t?Math.round(t/6e4)+"m":1e3<=t?Math.round(t/1e3)+"s":t+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(444),i=Math.abs,a=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*a(i(e)):e}},function(e,t,r){"use strict";e.exports=r(445)()?Math.sign:r(446)},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},function(e,t,r){"use strict";var a=r(79),o=r(150),s=r(90),u=r(449),l=r(272);e.exports=function e(t){var r,n,i;if(a(t),(r=Object(arguments[1])).async&&r.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!r.force?t:(n=l(r.length,t.length,r.async&&s.async),i=u(t,n,r),o(s,function(e,t){r[t]&&e(r[t],i,r)}),e.__profiler__&&e.__profiler__(i),i.updateEnv(),i.memoized)}},function(e,t,r){"use strict";var s=r(79),u=r(112),l=Function.prototype.bind,c=Function.prototype.call,d=Object.keys,f=Object.prototype.propertyIsEnumerable;e.exports=function(a,o){return function(r,n){var e,i=arguments[2],t=arguments[3];return r=Object(u(r)),s(n),e=d(r),t&&e.sort("function"==typeof t?l.call(t,r):void 0),"function"!=typeof a&&(a=e[a]),c.call(a,e,function(e,t){return f.call(r,e)?c.call(n,i,r[e],e,r,t):o})}}},function(e,t,r){"use strict";var v=r(450),y=r(274),m=r(91),n=r(464).methods,b=r(465),_=r(481),E=Function.prototype.apply,w=Function.prototype.call,k=Object.create,T=Object.defineProperties,S=n.on,x=n.emit;e.exports=function(i,t,e){var a,o,s,r,n,u,l,c,d,f,h,p=k(null),g=!1!==t?t:isNaN(i.length)?1:i.length;return e.normalizer&&(u=_(e.normalizer),o=u.get,s=u.set,r=u.delete,n=u.clear),null!=e.resolvers&&(h=b(e.resolvers)),f=o?y(function(e){var t,r,n=arguments;if(h&&(n=h(n)),null!==(t=o(n))&&hasOwnProperty.call(p,t))return l&&a.emit("get",t,n,this),p[t];if(r=1===n.length?w.call(i,this,n[0]):E.call(i,this,n),null===t){if(null!==(t=o(n)))throw v("Circular invocation","CIRCULAR_INVOCATION");t=s(n)}else if(hasOwnProperty.call(p,t))throw v("Circular invocation","CIRCULAR_INVOCATION");return p[t]=r,c&&a.emit("set",t,null,r),r},g):0===t?function(){var e;if(hasOwnProperty.call(p,"data"))return l&&a.emit("get","data",arguments,this),p.data;if(e=arguments.length?E.call(i,this,arguments):w.call(i,this),hasOwnProperty.call(p,"data"))throw v("Circular invocation","CIRCULAR_INVOCATION");return p.data=e,c&&a.emit("set","data",null,e),e}:function(e){var t,r=arguments;if(h&&(r=h(arguments)),t=String(r[0]),hasOwnProperty.call(p,t))return l&&a.emit("get",t,r,this),p[t];if(r=1===r.length?w.call(i,this,r[0]):E.call(i,this,r),hasOwnProperty.call(p,t))throw v("Circular invocation","CIRCULAR_INVOCATION");return p[t]=r,c&&a.emit("set",t,null,r),r},a={original:i,memoized:f,profileName:e.profileName,get:function(e){return h&&(e=h(e)),o?o(e):String(e[0])},has:function(e){return hasOwnProperty.call(p,e)},delete:function(e){var t;hasOwnProperty.call(p,e)&&(r&&r(e),t=p[e],delete p[e],d&&a.emit("delete",e,t))},clear:function(){var e=p;n&&n(),p=k(null),a.emit("clear",e)},on:function(e,t){return"get"===e?l=!0:"set"===e?c=!0:"delete"===e&&(d=!0),S.call(this,e,t)},emit:x,updateEnv:function(){i=a.original}},u=o?y(function(e){var t=arguments;h&&(t=h(t)),null!==(t=o(t))&&a.delete(t)},g):0===t?function(){return a.delete("data")}:function(e){return h&&(e=h(arguments)[0]),a.delete(e)},e=y(function(){var e=arguments;return 0===t?p.data:(h&&(e=h(e)),e=o?o(e):String(e[0]),p[e])}),g=y(function(){var e=arguments;return 0===t?a.has("data"):(h&&(e=h(e)),null!==(e=o?o(e):String(e[0]))&&a.has(e))}),T(f,{__memoized__:m(!0),delete:m(u),clear:m(a.clear),_get:m(e),_has:m(g)}),a}},function(n,e,t){"use strict";var i=t(273),a=t(456),o=t(88),s=Error.captureStackTrace;n.exports=function(e){var t=new Error(e),r=arguments[1],e=arguments[2];return o(e)||a(r)&&(e=r,r=null),o(e)&&i(t,e),o(r)&&(t.code=r),s&&s(t,n.exports),t}},function(e,t,r){"use strict";e.exports=function(){var e=Object.assign;return"function"==typeof e&&(e(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var o=r(453),s=r(112),u=Math.max;e.exports=function(t,r){var n,e,i,a=u(arguments.length,2);for(t=Object(s(t)),i=function(e){try{t[e]=r[e]}catch(e){n=n||e}},e=1;e<a;++e)o(r=arguments[e]).forEach(i);if(void 0!==n)throw n;return t}},function(e,t,r){"use strict";e.exports=r(454)()?Object.keys:r(455)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(88),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";var n=r(88),i={function:!0,object:!0};e.exports=function(e){return n(e)&&i[typeof e]||!1}},function(e,t,r){"use strict";var n=r(458),i=/^\s*class[\s{/}]/,a=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!i.test(a.call(e))}},function(e,t,r){"use strict";var n=r(459);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(460);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(276),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(i,typeof e)}},function(e,t,r){"use strict";e.exports=r(462)()?String.prototype.contains:r(463)},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},function(e,t,r){"use strict";var i,a,n,o=r(91),s=r(79),u=Function.prototype.apply,l=Function.prototype.call,c=Object.create,d=Object.defineProperty,f=Object.defineProperties,h=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0},g=function(e,t){var r,n;return s(t),n=this,i.call(this,e,r=function(){a.call(n,e,r),u.call(t,this,arguments)}),r.__eeOnceListener__=t,this},r={on:i=function(e,t){var r;return s(t),h.call(this,"__ee__")?r=this.__ee__:(r=p.value=c(null),d(this,"__ee__",p),p.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:g,off:a=function(e,t){var r,n,i,a;if(s(t),!h.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(a=0;i=n[a];++a)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[a?0:1]:n.splice(a,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:n=function(e){var t,r,n,i,a;if(h.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,a=new Array(r-1),t=1;t<r;++t)a[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)u.call(n,this,a)}else switch(arguments.length){case 1:l.call(i,this);break;case 2:l.call(i,this,arguments[1]);break;case 3:l.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),t=1;t<r;++t)a[t-1]=arguments[t];u.call(i,this,a)}}},v={on:o(i),once:o(g),off:o(a),emit:o(n)},y=f({},v);e.exports=t=function(e){return null==e?c(y):f(Object(e),v)},t.methods=r},function(e,t,r){"use strict";var n=r(466),i=r(88),a=r(79),o=Array.prototype.slice,s=function(r){return this.map(function(e,t){return e?e(r[t]):r[t]}).concat(o.call(r,this.length))};e.exports=function(e){return(e=n(e)).forEach(function(e){i(e)&&a(e)}),s.bind(e)}},function(e,t,r){"use strict";var n=r(198),i=Array.isArray;e.exports=function(e){return i(e)?e:n(e)}},function(e,t,r){"use strict";e.exports=function(){var e,t=Array.from;return"function"==typeof t&&(t=t(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";var h=r(469).iterator,p=r(478),g=r(479),v=r(89),y=r(79),m=r(112),b=r(88),_=r(480),E=Array.isArray,w=Function.prototype.call,k={configurable:!0,enumerable:!0,writable:!0,value:null},T=Object.defineProperty;e.exports=function(e){var t,r,n,i,a,o,s,u,l,c,d=arguments[1],f=arguments[2];if(e=Object(m(e)),b(d)&&y(d),this&&this!==Array&&g(this))t=this;else{if(!d){if(p(e))return 1!==(a=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(E(e)){for(i=new Array(a=e.length),r=0;r<a;++r)i[r]=e[r];return i}}i=[]}if(!E(e))if(void 0!==(l=e[h])){for(s=y(l).call(e),t&&(i=new t),u=s.next(),r=0;!u.done;)c=d?w.call(d,f,u.value,r):u.value,t?(k.value=c,T(i,r,k)):i[r]=c,u=s.next(),++r;a=r}else if(_(e)){for(a=e.length,t&&(i=new t),n=r=0;r<a;++r)c=e[r],r+1<a&&55296<=(o=c.charCodeAt(0))&&o<=56319&&(c+=e[++r]),c=d?w.call(d,f,c,n):c,t?(k.value=c,T(i,n,k)):i[n]=c,++n;a=n}if(void 0===a)for(a=v(e.length),t&&(i=new t(a)),r=0;r<a;++r)c=d?w.call(d,f,e[r],r):e[r],t?(k.value=c,T(i,r,k)):i[r]=c;return t&&(k.value=null,i.length=a),i}},function(e,t,r){"use strict";e.exports=r(470)()?r(151).Symbol:r(473)},function(e,t,r){"use strict";var n=r(151),i={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag]}},function(e,t,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},function(e,t){function r(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")}e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(e,t,r){"use strict";var n,i,a,o=r(91),s=r(277),u=r(151).Symbol,l=r(475),c=r(476),d=r(477),f=Object.create,h=Object.defineProperties,r=Object.defineProperty;if("function"==typeof u)try{String(u()),a=!0}catch(e){}else u=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return n(e)},e.exports=n=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?u(t):(r=f(i.prototype),t=void 0===t?"":String(t),h(r,{__description__:o("",t),__name__:o("",l(t))}))},c(n),d(n),h(i.prototype,{constructor:o(n),toString:o("",function(){return this.__name__})}),h(n.prototype,{toString:o(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:o(function(){return s(this)})}),r(n.prototype,n.toPrimitive,o("",function(){var e=s(this);return"symbol"==typeof e?e:e.toString()})),r(n.prototype,n.toStringTag,o("c","Symbol")),r(i.prototype,n.toStringTag,o("c",n.prototype[n.toStringTag])),r(i.prototype,n.toPrimitive,o("c",n.prototype[n.toPrimitive]))},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,r){"use strict";var i=r(91),r=Object.create,a=Object.defineProperty,o=Object.prototype,s=r(null);e.exports=function(e){for(var t,r,n=0;s[e+(n||"")];)++n;return s[e+=n||""]=!0,a(o,t="@@"+e,i.gs(null,function(e){r||(r=!0,a(this,t,i(e)),r=!1)})),t}},function(e,t,r){"use strict";var n=r(91),i=r(151).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:n("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",i&&i.iterator||e("iterator")),match:n("",i&&i.match||e("match")),replace:n("",i&&i.replace||e("replace")),search:n("",i&&i.search||e("search")),species:n("",i&&i.species||e("species")),split:n("",i&&i.split||e("split")),toPrimitive:n("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:n("",i&&i.toStringTag||e("toStringTag")),unscopables:n("",i&&i.unscopables||e("unscopables"))})}},function(e,t,r){"use strict";var n=r(91),i=r(277),a=Object.create(null);e.exports=function(t){return Object.defineProperties(t,{for:n(function(e){return a[e]||(a[e]=t(String(e)))}),keyFor:n(function(e){for(var t in i(e),a)if(a[t]===e)return t})})}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&i(n.call(e))}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},function(e,t,r){"use strict";var n=r(79);e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:n(e.get)},void 0!==e.set?(t.set=n(e.set),e.delete&&(t.delete=n(e.delete)),e.clear&&(t.clear=n(e.clear))):t.set=t.get,t)}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n=e.length;if(!n)return"";for(t=String(e[r=0]);--n;)t+=""+e[++r];return t}},function(e,t,r){"use strict";e.exports=function(i){return i?function(e){for(var t=String(e[0]),r=0,n=i;--n;)t+=""+e[++r];return t}:function(){return""}}},function(e,t,r){"use strict";var l=r(199),n=Object.create;e.exports=function(){var a=0,s=[],u=n(null);return{get:function(e){var t,r=0,n=s,i=e.length;if(0===i)return n[i]||null;if(n=n[i]){for(;r<i-1;){if(-1===(t=l.call(n[0],e[r])))return null;n=n[1][t],++r}return-1!==(t=l.call(n[0],e[r]))&&n[1][t]||null}return null},set:function(e){var t,r=0,n=s,i=e.length;if(0===i)n[i]=++a;else{for(n[i]||(n[i]=[[],[]]),n=n[i];r<i-1;)-1===(t=l.call(n[0],e[r]))&&(t=n[0].push(e[r])-1,n[1].push([[],[]])),n=n[1][t],++r;-1===(t=l.call(n[0],e[r]))&&(t=n[0].push(e[r])-1),n[1][t]=++a}return u[a]=e,a},delete:function(e){var t,r=0,n=s,i=u[e],a=i.length,o=[];if(0===a)delete n[a];else if(n=n[a]){for(;r<a-1;){if(-1===(t=l.call(n[0],i[r])))return;o.push(n,t),n=n[1][t],++r}if(-1===(t=l.call(n[0],i[r])))return;for(e=n[1][t],n[0].splice(t,1),n[1].splice(t,1);!n[0].length&&o.length;)t=o.pop(),(n=o.pop())[0].splice(t,1),n[1].splice(t,1)}delete u[e]},clear:function(){s=[],u=n(null)}}}},function(e,t,r){"use strict";e.exports=r(486)()?Number.isNaN:r(487)},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&!e({})&&e(NaN)&&!e(34)}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";var i=r(199);e.exports=function(){var t=0,r=[],n=[];return{get:function(e){e=i.call(r,e[0]);return-1===e?null:n[e]},set:function(e){return r.push(e[0]),n.push(++t),t},delete:function(e){e=i.call(n,e);-1!==e&&(r.splice(e,1),n.splice(e,1))},clear:function(){r=[],n=[]}}}},function(e,t,r){"use strict";var l=r(199),n=Object.create;e.exports=function(o){var i=0,s=[[],[]],u=n(null);return{get:function(e){for(var t,r=0,n=s;r<o-1;){if(-1===(t=l.call(n[0],e[r])))return null;n=n[1][t],++r}return-1!==(t=l.call(n[0],e[r]))&&n[1][t]||null},set:function(e){for(var t,r=0,n=s;r<o-1;)-1===(t=l.call(n[0],e[r]))&&(t=n[0].push(e[r])-1,n[1].push([[],[]])),n=n[1][t],++r;return-1===(t=l.call(n[0],e[r]))&&(t=n[0].push(e[r])-1),n[1][t]=++i,u[i]=e,i},delete:function(e){for(var t,r=0,n=s,i=[],a=u[e];r<o-1;){if(-1===(t=l.call(n[0],a[r])))return;i.push(n,t),n=n[1][t],++r}if(-1!==(t=l.call(n[0],a[r]))){for(e=n[1][t],n[0].splice(t,1),n[1].splice(t,1);!n[0].length&&i.length;)t=i.pop(),(n=i.pop())[0].splice(t,1),n[1].splice(t,1);delete u[e]}},clear:function(){s=[[],[]],u=n(null)}}}},function(e,t,r){"use strict";var f=r(198),i=r(278),h=r(275),p=r(274),g=r(200),v=Array.prototype.slice,y=Function.prototype.apply,m=Object.create;r(90).async=function(e,o){var s,u,l,c=m(null),d=m(null),a=o.memoized,n=o.original;o.memoized=p(function(e){var t=arguments,r=t[t.length-1];return"function"==typeof r&&(s=r,t=v.call(t,0,-1)),a.apply(u=this,l=t)},a);try{h(o.memoized,a)}catch(e){}o.on("get",function(t){var r,n,i;if(s){if(c[t])return"function"==typeof c[t]?c[t]=[c[t],s]:c[t].push(s),void(s=null);r=s,n=u,i=l,s=u=l=null,g(function(){var e;hasOwnProperty.call(d,t)?(e=d[t],o.emit("getasync",t,i,n),y.call(r,e.context,e.args)):(s=r,u=n,l=i,a.apply(n,i))})}}),o.original=function(){var e,t,r,a;return s?(e=f(arguments),t=function e(t){var r,n,i=e.id;if(null!=i){if(delete e.id,r=c[i],delete c[i],r)return n=f(arguments),o.has(i)&&(t?o.delete(i):(d[i]={context:this,args:n},o.emit("setasync",i,"function"==typeof r?1:r.length))),"function"==typeof r?a=y.call(r,this,n):r.forEach(function(e){a=y.call(e,this,n)},this),a}else g(y.bind(e,this,arguments))},r=s,s=u=l=null,e.push(t),a=y.call(n,this,e),t.cb=r,s=t,a):y.call(n,this,arguments)},o.on("set",function(e){s?(c[e]?"function"==typeof c[e]?c[e]=[c[e],s.cb]:c[e].push(s.cb):c[e]=s.cb,delete s.cb,s.id=e,s=null):o.delete(e)}),o.on("delete",function(e){var t;hasOwnProperty.call(c,e)||d[e]&&(t=d[e],delete d[e],o.emit("deleteasync",e,v.call(t.args,1)))}),o.on("clear",function(){var e=d;d=m(null),o.emit("clearasync",i(e,function(e){return v.call(e.args,1)}))})}},function(e,t,r){"use strict";var n=r(278),i=r(492),a=r(493),o=r(495),h=r(280),p=r(200),s=Object.create,g=i("then","then:finally","done","done:finally");r(90).promise=function(u,l){var c=s(null),d=s(null),f=s(null);if(!0===u)u=null;else if(u=a(u),!g[u])throw new TypeError("'"+o(u)+"' is not valid promise mode");l.on("set",function(r,e,t){var n=!1;if(!h(t))return d[r]=t,void l.emit("setasync",r,1);c[r]=1,f[r]=t;function i(e){var t=c[r];if(n)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");t&&(delete c[r],d[r]=e,l.emit("setasync",r,t))}function a(){n=!0,c[r]&&(delete c[r],delete f[r],l.delete(r))}var o=u;if("then"===(o=o||"then")){var s=function(){p(a)};"function"==typeof(t=t.then(function(e){p(i.bind(this,e))},s)).finally&&t.finally(s)}else if("done"===o){if("function"!=typeof t.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");t.done(i,a)}else if("done:finally"===o){if("function"!=typeof t.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof t.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");t.done(i),t.finally(a)}}),l.on("get",function(e,t,r){var n,i;c[e]?++c[e]:(n=f[e],i=function(){l.emit("getasync",e,t,r)},h(n)?"function"==typeof n.done?n.done(i):n.then(function(){p(i)}):i())}),l.on("delete",function(e){var t;delete f[e],c[e]?delete c[e]:hasOwnProperty.call(d,e)&&(t=d[e],delete d[e],l.emit("deleteasync",e,[t]))}),l.on("clear",function(){var e=d;d=s(null),c=s(null),f=s(null),l.emit("clearasync",n(e,function(e){return[e]}))})}},function(e,t,r){"use strict";var n=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return n.call(arguments,function(e){t[e]=!0}),t}},function(e,t,r){"use strict";var n=r(112),i=r(494);e.exports=function(e){return i(n(e))}},function(e,t,r){"use strict";var n=r(279);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},function(e,t,r){"use strict";var n=r(496),i=/[\n\r\u2028\u2029]/g;e.exports=function(e){e=n(e);return(e=100<e.length?e.slice(0,99)+"":e).replace(i,function(e){return JSON.stringify(e).slice(1,-1)})}},function(e,t,r){"use strict";var n=r(279);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},function(e,t,r){"use strict";var i=r(79),a=r(150),o=r(90),s=Function.prototype.apply;o.dispose=function(r,e,t){var n;if(i(r),t.async&&o.async||t.promise&&o.promise)return e.on("deleteasync",n=function(e,t){s.call(r,null,t)}),void e.on("clearasync",function(e){a(e,function(e,t){n(t,e)})});e.on("delete",n=function(e,t){r(t)}),e.on("clear",function(e){a(e,function(e,t){n(t,e)})})}},function(e,t,r){"use strict";var s=r(198),u=r(150),l=r(200),c=r(280),d=r(499),f=r(90),h=Function.prototype,p=Math.max,g=Math.min,v=Object.create;f.maxAge=function(t,i,a){var r,e,n,o;(t=d(t))&&(r=v(null),e=a.async&&f.async||a.promise&&f.promise?"async":"",i.on("set"+e,function(e){r[e]=setTimeout(function(){i.delete(e)},t),"function"==typeof r[e].unref&&r[e].unref(),o&&(o[e]&&"nextTick"!==o[e]&&clearTimeout(o[e]),o[e]=setTimeout(function(){delete o[e]},n),"function"==typeof o[e].unref&&o[e].unref())}),i.on("delete"+e,function(e){clearTimeout(r[e]),delete r[e],o&&("nextTick"!==o[e]&&clearTimeout(o[e]),delete o[e])}),a.preFetch&&(n=!0===a.preFetch||isNaN(a.preFetch)?.333:p(g(Number(a.preFetch),1),0))&&(o={},n=(1-n)*t,i.on("get"+e,function(t,r,n){o[t]||(o[t]="nextTick",l(function(){var e;"nextTick"===o[t]&&(delete o[t],i.delete(t),a.async&&(r=s(r)).push(h),e=i.memoized.apply(n,r),a.promise&&c(e)&&("function"==typeof e.done?e.done(h,h):e.then(h,h)))}))})),i.on("clear"+e,function(){u(r,function(e){clearTimeout(e)}),r={},o&&(u(o,function(e){"nextTick"!==e&&clearTimeout(e)}),o={})}))}},function(e,t,r){"use strict";var n=r(89),i=r(500);e.exports=function(e){if((e=n(e))>i)throw new TypeError(e+" exceeds maximum possible timeout");return e}},function(e,t,r){"use strict";e.exports=2147483647},function(e,t,r){"use strict";var i=r(89),a=r(502),o=r(90);o.max=function(e,t,r){var n;(e=i(e))&&(n=a(e),e=r.async&&o.async||r.promise&&o.promise?"async":"",t.on("set"+e,r=function(e){void 0!==(e=n.hit(e))&&t.delete(e)}),t.on("get"+e,r),t.on("delete"+e,n.delete),t.on("clear"+e,n.clear))}},function(e,t,r){"use strict";var c=r(89),d=Object.create,f=Object.prototype.hasOwnProperty;e.exports=function(n){var i,a=0,o=1,s=d(null),u=d(null),l=0;return n=c(n),{hit:function(e){var t=u[e],r=++l;if(s[r]=e,u[e]=r,!t)return++a<=n?void 0:(e=s[o],i(e),e);if(delete s[t],o===t)for(;!f.call(s,++o);)continue},delete:i=function(e){var t=u[e];if(t&&(delete s[t],delete u[e],--a,o===t)){if(!a)return l=0,void(o=1);for(;!f.call(s,++o);)continue}},clear:function(){a=0,o=1,s=d(null),u=d(null),l=0}}}},function(e,t,r){"use strict";var i=r(91),a=r(90),o=Object.create,s=Object.defineProperties;a.refCounter=function(e,t,r){var n=o(null),r=r.async&&a.async||r.promise&&a.promise?"async":"";t.on("set"+r,function(e,t){n[e]=t||1}),t.on("get"+r,function(e){++n[e]}),t.on("delete"+r,function(e){delete n[e]}),t.on("clear"+r,function(){n={}}),s(t.memoized,{deleteRef:i(function(){var e=t.get(arguments);return null!==e&&n[e]?!--n[e]&&(t.delete(e),!0):null}),getRefCount:i(function(){var e=t.get(arguments);return null!==e&&n[e]||0})})}},function(e,t,r){var h=r(281),p=r(261),g=r(268),v=r(147),y=r(269),m=r(123),b=r(22),_=r(203),E=r(124),w=r(33),k=r(29),T=r(63),S=r(142),x=r(282),A=r(505);e.exports=function(e,t,r,n,i,a,o){var s,u,l,c=x(e,r),d=x(t,r),f=o.get(d);f?h(e,r,f):((s=void 0===(l=a?a(c,d,r+"",e,t,o):void 0))&&(f=!(u=b(d))&&E(d),t=!u&&!f&&S(d),l=d,u||f||t?l=b(c)?c:_(c)?v(c):f?p(d,!(s=!1)):t?g(d,!(s=!1)):[]:T(d)||m(d)?m(l=c)?l=A(c):k(c)&&!w(c)||(l=y(d)):s=!1),s&&(o.set(d,l),i(l,d,n,a,o),o.delete(d)),h(e,r,l))}},function(e,t,r){var n=r(110),i=r(87);e.exports=function(e){return n(e,i(e))}},function(e,t,r){var n=r(46);e.exports=function(){return n.Date.now()}},function(e,t,r){var n=r(139);e.exports=function(t,e){return n(e,function(e){return t[e]})}},function(e,t,r){var s=r(202),u=r(29);e.exports=function e(t,r,n,i,a,o){return u(t)&&u(r)&&(o.set(r,t),s(t,r,void 0,e,o),o.delete(r)),t}},function(e,t,r){!function(_){var E=/\S/,t=/\"/g,r=/\n/g,n=/\r/g,i=/\\/g,a=/\u2028/,o=/\u2029/;function w(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function k(e,t,r){if(t.charAt(r)==e.charAt(0)){for(var n=1,i=e.length;n<i;n++)if(t.charAt(r+n)!=e.charAt(n))return;return 1}}_.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},_.scan=function(e,t){var r,n,i,a,o,s,u=e.length,l=0,c=null,d="",f=[],h=!1,p=0,g=0,v="{{",y="}}";function m(){0<d.length&&(f.push({tag:"_t",text:new String(d)}),d="")}function b(e,t){if(m(),e&&function(){for(var e=!0,t=g;t<f.length;t++)if(!(e=_.tags[f[t].tag]<_.tags._v||"_t"==f[t].tag&&null===f[t].text.match(E)))return;return e}())for(var r,n=g;n<f.length;n++)f[n].text&&((r=f[n+1])&&">"==r.tag&&(r.indent=f[n].text.toString()),f.splice(n,1));else t||f.push({tag:"\n"});h=!1,g=f.length}for(t&&(t=t.split(" "),v=t[0],y=t[1]),p=0;p<u;p++)0==l?k(v,e,p)?(--p,m(),l=1):"\n"==e.charAt(p)?b(h):d+=e.charAt(p):1==l?(p+=v.length-1,l="="==(c=(r=_.tags[e.charAt(p+1)])?e.charAt(p+1):"_v")?(a=p,s=o=void 0,o="="+y,s=(i=e).indexOf(o,a),a=w(i.substring(i.indexOf("=",a)+1,s)).split(" "),v=a[0],y=a[a.length-1],p=s+o.length-1,0):(r&&p++,2),h=p):k(y,e,p)?(f.push({tag:c,n:w(d),otag:v,ctag:y,i:"/"==c?h-v.length:p+y.length}),d="",p+=y.length-1,l=0,"{"==c&&("}}"==y?p++:"}"===(n=f[f.length-1]).n.substr(n.n.length-1)&&(n.n=n.n.substring(0,n.n.length-1)))):d+=e.charAt(p);return b(h,!0),f};var l={_t:!0,"\n":!0,$:!0,"/":!0};_.stringify=function(e,t,r){return"{code: function (c,p,i) { "+_.wrapMain(e.code)+" },"+function e(t){var r,n=[];for(r in t.partials)n.push('"'+u(r)+'":{name:"'+u(t.partials[r].name)+'", '+e(t.partials[r])+"}");return"partials: {"+n.join(",")+"}, subs: "+function(e){var t,r=[];for(t in e)r.push('"'+u(t)+'": function(c,p,t,i) {'+e[t]+"}");return"{ "+r.join(",")+" }"}(t.subs)}(e)+"}"};var s=0;function u(e){return e.replace(i,"\\\\").replace(t,'\\"').replace(r,"\\n").replace(n,"\\r").replace(a,"\\u2028").replace(o,"\\u2029")}function c(e){return~e.indexOf(".")?"d":"f"}function d(e,t){var r="<"+(t.prefix||"")+e.n+s++;return t.partials[r]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+u(r)+'",c,p,"'+(e.indent||"")+'"));',r}function e(e,t){t.code+="t.b(t.t(t."+c(e.n)+'("'+u(e.n)+'",c,p,0)));'}function f(e){return"t.b("+e+");"}_.generate=function(e,t,r){s=0;var n={code:"",subs:{},partials:{}};return _.walk(e,n),r.asString?this.stringify(n,t,r):this.makeTemplate(n,t,r)},_.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},_.template=_.Template,_.makeTemplate=function(e,t,r){var n=this.makePartials(e);return n.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(n,t,this,r)},_.makePartials=function(e){var t,r={subs:{},partials:e.partials,name:e.name};for(t in r.partials)r.partials[t]=this.makePartials(r.partials[t]);for(t in e.subs)r.subs[t]=new Function("c","p","t","i",e.subs[t]);return r},_.codegen={"#":function(e,t){t.code+="if(t.s(t."+c(e.n)+'("'+u(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',_.walk(e.nodes,t),t.code+="});c.pop();}"},"^":function(e,t){t.code+="if(!t.s(t."+c(e.n)+'("'+u(e.n)+'",c,p,1),c,p,1,0,0,"")){',_.walk(e.nodes,t),t.code+="};"},">":d,"<":function(e,t){var r={partials:{},code:"",subs:{},inPartial:!0};_.walk(e.nodes,r);t=t.partials[d(e,t)];t.subs=r.subs,t.partials=r.partials},$:function(e,t){var r={subs:{},code:"",partials:t.partials,prefix:e.n};_.walk(e.nodes,r),t.subs[e.n]=r.code,t.inPartial||(t.code+='t.sub("'+u(e.n)+'",c,p,i);')},"\n":function(e,t){t.code+=f('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+c(e.n)+'("'+u(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=f('"'+u(e.text)+'"')},"{":e,"&":e},_.walk=function(e,t){for(var r,n=0,i=e.length;n<i;n++)(r=_.codegen[e[n].tag])&&r(e[n],t);return t},_.parse=function(e,t,r){return function e(t,r,n,i){for(var a=[],o=null,s=null,u=n[n.length-1];0<t.length;){if(s=t.shift(),u&&"<"==u.tag&&!(s.tag in l))throw new Error("Illegal content in < super tag.");if(_.tags[s.tag]<=_.tags.$||function(e,t){for(var r=0,n=t.length;r<n;r++)if(t[r].o==e.n)return e.tag="#"}(s,i))n.push(s),s.nodes=e(t,s.tag,n,i);else{if("/"==s.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+s.n);if(o=n.pop(),s.n!=o.n&&!function(e,t,r){for(var n=0,i=r.length;n<i;n++)if(r[n].c==e&&r[n].o==t)return 1}(s.n,o.n,i))throw new Error("Nesting error: "+o.n+" vs. "+s.n);return o.end=s.i,a}"\n"==s.tag&&(s.last=0==t.length||"\n"==t[0].tag)}a.push(s)}if(0<n.length)throw new Error("missing closing tag: "+n.pop().n);return a}(e,0,[],(r=r||{}).sectionTags||[])},_.cache={},_.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},_.compile=function(e,t){var r=_.cacheKey(e,t=t||{}),n=this.cache[r];if(n){var i,a=n.partials;for(i in a)delete a[i].instance;return n}return n=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[r]=n}}(t)},function(e,t,r){!function(e){function c(e,t,r){var n;return t&&"object"==typeof t&&(void 0!==t[e]?n=t[e]:r&&t.get&&"function"==typeof t.get&&(n=t.get(e))),n}e.Template=function(e,t,r,n){this.r=(e=e||{}).code||this.r,this.c=r,this.options=n||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(e,t,r){return""},v:function(e){return e=s(e),o.test(e)?e.replace(t,"&amp;").replace(r,"&lt;").replace(n,"&gt;").replace(i,"&#39;").replace(a,"&quot;"):e},t:s,render:function(e,t,r){return this.ri([e],t||{},r)},ri:function(e,t,r){return this.r(e,t,r)},ep:function(e,t){var r=this.partials[e],n=t[r.name];if(r.instance&&r.base==n)return r.instance;if("string"==typeof n){if(!this.c)throw new Error("No compiler available.");n=this.c.compile(n,this.options)}if(!n)return null;if(this.partials[e].base=n,r.subs){for(key in t.stackText||(t.stackText={}),r.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);n=function(e,t,r,n,i,a){function o(){}function s(){}s.prototype=(o.prototype=e).subs;var u=new o;for(var l in u.subs=new s,u.subsText={},u.buf="",u.stackSubs=n=n||{},u.subsText=a,t)n[l]||(n[l]=t[l]);for(l in n)u.subs[l]=n[l];for(l in u.stackPartials=i=i||{},r)i[l]||(i[l]=r[l]);for(l in i)u.partials[l]=i[l];return u}(n,r.subs,r.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=n},rp:function(e,t,r,n){e=this.ep(e,r);return e?e.ri(t,r,n):""},rs:function(e,t,r){var n=e[e.length-1];if(d(n))for(var i=0;i<n.length;i++)e.push(n[i]),r(e,t,this),e.pop();else r(e,t,this)},s:function(e,t,r,n,i,a,o){return(!d(e)||0!==e.length)&&(o=!!(e="function"==typeof e?this.ms(e,t,r,n,i,a,o):e),!n&&o&&t&&t.push("object"==typeof e?e:t[t.length-1]),o)},d:function(e,t,r,n){var i,a=e.split("."),o=this.f(a[0],t,r,n),s=this.options.modelGet,u=null;if("."===e&&d(t[t.length-2]))o=t[t.length-1];else for(var l=1;l<a.length;l++)o=void 0!==(i=c(a[l],o,s))?(u=o,i):"";return!(n&&!o)&&(n||"function"!=typeof o||(t.push(u),o=this.mv(o,t,r),t.pop()),o)},f:function(e,t,r,n){for(var i=!1,a=!1,o=this.options.modelGet,s=t.length-1;0<=s;s--)if(void 0!==(i=c(e,t[s],o))){a=!0;break}return a?i=!n&&"function"==typeof i?this.mv(i,t,r):i:!n&&""},ls:function(e,t,r,n,i){var a=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(s(e.call(t,n)),t,r)),this.options.delimiters=a,!1},ct:function(e,t,r){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,r)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,r,n,i,a,o){t=t[t.length-1],e=e.call(t);return"function"==typeof e?!!n||(n=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(e,t,r,n.substring(i,a),o)):e},mv:function(e,t,r){t=t[t.length-1],e=e.call(t);return"function"==typeof e?this.ct(s(e.call(t)),t,r):e},sub:function(e,t,r,n){var i=this.subs[e];i&&(this.activeSub=e,i(t,r,this,n),this.activeSub=!1)}};var t=/&/g,r=/</g,n=/>/g,i=/\'/g,a=/\"/g,o=/[&<>\"\']/;function s(e){return String(null==e?"":e)}var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)},function(e,t,r){var n=r(512),i=r(519),a=r(286);e.exports=function(t){var r=i(t);return 1==r.length&&r[0][2]?a(r[0][0],r[0][1]):function(e){return e===t||n(e,t,r)}}},function(e,t,r){var h=r(149),p=r(205);e.exports=function(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var u=(s=r[i])[0],l=e[u],c=s[1];if(o&&s[2]){if(void 0===l&&!(u in e))return!1}else{var d,f=new h;if(!(void 0===(d=n?n(l,c,u,e,t,f):d)?p(c,l,3,n,f):d))return!1}}return!0}},function(e,t,r){var d=r(149),f=r(284),h=r(516),p=r(518),g=r(126),v=r(22),y=r(124),m=r(142),b="[object Object]",_=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,n,i,a){var o=v(e),s=v(t),u=o?"[object Array]":g(e),l=s?"[object Array]":g(t),c=(u="[object Arguments]"==u?b:u)==b,s=(l="[object Arguments]"==l?b:l)==b,l=u==l;if(l&&y(e)){if(!y(t))return!1;c=!(o=!0)}if(l&&!c)return a=a||new d,o||m(e)?f(e,t,r,n,i,a):h(e,t,u,r,n,i,a);if(!(1&r)){c=c&&_.call(e,"__wrapped__"),s=s&&_.call(t,"__wrapped__");if(c||s)return i(c?e.value():e,s?t.value():t,r,n,a=a||new d)}return!!l&&(a=a||new d,p(e,t,r,n,i,a))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(105),l=r(267),c=r(106),d=r(284),f=r(517),h=r(208),n=n?n.prototype:void 0,p=n?n.valueOf:void 0;e.exports=function(e,t,r,n,i,a,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new l(e),new l(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return c(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=f;case"[object Set]":s=s||h;if(e.size!=t.size&&!(1&n))return!1;var u=o.get(e);if(u)return u==t;n|=2,o.set(e,t);s=d(s(e),s(t),n,i,a,o);return o.delete(e),s;case"[object Symbol]":if(p)return p.call(e)==p.call(t)}return!1}},function(e,t){e.exports=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n}},function(e,t,r){var m=r(264),b=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,n,i,a){var o=1&r,s=m(e),u=s.length;if(u!=m(t).length&&!o)return!1;for(var l=u;l--;){var c=s[l];if(!(o?c in t:b.call(t,c)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var h=!0;a.set(e,t),a.set(t,e);for(var p=o;++l<u;){var g,v=e[c=s[l]],y=t[c];if(!(void 0===(g=n?o?n(y,v,c,t,e,a):n(v,y,c,e,t,a):g)?v===y||i(v,y,r,n,a):g)){h=!1;break}p=p||"constructor"==c}return!h||p||(d=e.constructor)!=(f=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof f&&f instanceof f)&&(h=!1),a.delete(e),a.delete(t),h}},function(e,t,r){var a=r(285),o=r(57);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,a(i)]}return t}},function(e,t,r){var i=r(205),a=r(5),o=r(287),s=r(178),u=r(285),l=r(286),c=r(107);e.exports=function(r,n){return s(r)&&u(n)?l(c(r),n):function(e){var t=a(e,r);return void 0===t&&t===n?o(e,r):i(n,t,3)}}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(523),i=r(524),a=r(178),o=r(107);e.exports=function(e){return a(e)?n(o(e)):i(e)}},function(e,t){e.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(e,t,r){var n=r(133);e.exports=function(t){return function(e){return n(e,t)}}},function(e,t,r){var a=r(209);e.exports=function(e,n){var i;return a(e,function(e,t,r){return!(i=n(e,t,r))}),!!i}},function(e,t,r){var s=r(86);e.exports=function(a,o){return function(e,t){if(null==e)return e;if(!s(e))return a(e,t);for(var r=e.length,n=o?r:-1,i=Object(e);(o?n--:++n<r)&&!1!==t(i[n],n,i););return e}}},function(e,t,r){var o=r(528),s=r(109),u=Array.prototype.splice;e.exports=function(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i,a=t[r];r!=n&&a===i||(s(i=a)?u.call(e,a,1):o(e,a))}return e}},function(e,t,r){var n=r(121),i=r(210),a=r(529),o=r(107);e.exports=function(e,t){return t=n(t,e),null==(e=a(e,t))||delete e[o(i(t))]}},function(e,t,r){var n=r(133),i=r(270);e.exports=function(e,t){return t.length<2?e:n(e,i(t,0,-1))}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},function(e,t,r){var a=r(209);e.exports=function(e,n){var i=!0;return a(e,function(e,t,r){return i=!!n(e,t,r)}),i}},function(e,t,r){var n=r(110),i=r(204),a=r(87),i=i(function(e,t){n(t,a(t),e)});e.exports=i},function(e,t,r){var n=r(260),i=r(256),r=r(208),i=n&&1/r(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;e.exports=i},function(e,t,r){var n=r(105),i=r(123),a=r(22),o=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},function(e,t,r){var n=function(o){"use strict";var e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(o){a=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,a,o,s,t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),n=new _(n||[]);return t._invoke=(i=e,a=r,o=n,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return w()}for(o.method=e,o.arg=t;;){var r=o.delegate;if(r){var n=function e(t,r){var n=t.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method))return c;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(n,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,c;n=n.arg;return n?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}(r,o);if(n){if(n===c)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===s)throw s="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s="executing";n=l(i,a,o);if("normal"===n.type){if(s=o.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(s="completed",o.method="throw",o.arg=n.arg)}}),t}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var c={};function d(){}function f(){}function h(){}var p={};p[n]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(E([])));t&&t!==e&&u.call(t,n)&&(p=t);var g=h.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function y(o,s){var t;this._invoke=function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){e=l(o[e],o,r);if("throw"!==e.type){var a=e.arg,r=a.value;return r&&"object"==typeof r&&u.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,i)})}i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function E(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function e(){for(;++r<t.length;)if(u.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return e.next=e}}return{next:w}}function w(){return{value:void 0,done:!0}}return((f.prototype=g.constructor=h).constructor=f).displayName=a(h,i,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},o.awrap=function(e){return{__await:e}},v(y.prototype),y.prototype[r]=function(){return this},o.AsyncIterator=y,o.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var a=new y(s(e,t,r,n),i);return o.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},v(g),a(g,i,"Generator"),g[n]=function(){return this},g.toString=function(){return"[object Generator]"},o.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return a.type="throw",a.arg=r,n.next=e,t&&(n.method="next",n.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),b(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,i=r.completion;return"throw"===i.type&&(n=i.arg,b(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},o}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t){e.exports=function(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}},function(e,t,r){var n=r(291);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(e){return typeof e}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(n,e,t){var i=t(212),a=t(547);function o(e,t,r){return a()?n.exports=o=Reflect.construct:n.exports=o=function(e,t,r){var n=[null];n.push.apply(n,t);n=new(Function.bind.apply(e,n));return r&&i(n,r.prototype),n},o.apply(null,arguments)}n.exports=o},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var n=r(294),i=r(287);e.exports=function(r,e){return n(r,e,function(e,t){return i(r,t)})}},,,,,,,,function(e,t,r){var l=r(189),n=r(295),c=r(188),d=r(257),f=r(22),h=r(255);e.exports=function(u){return n(function(i){var a=i.length,e=a,t=l.prototype.thru;for(u&&i.reverse();e--;){var r=i[e];if("function"!=typeof r)throw new TypeError("Expected a function");t&&!s&&"wrapper"==d(r)&&(s=new l([],!0))}for(e=s?e:a;++e<a;)var r=i[e],n=d(r),o="wrapper"==n?c(r):void 0,s=o&&h(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?s[d(o[0])].apply(s,o[3]):1==r.length&&h(r)?s[n]():s.thru(r);return function(){var e=arguments,t=e[0];if(s&&1==e.length&&f(t))return s.plant(t).value();for(var r=0,n=a?i[r].apply(this,e):t;++r<a;)n=i[r].call(this,n);return n}})}},,,,,,,,,,,,,,,,,,,,function(e,t,r){var h=r(206),p=r(191),g=r(290),v=r(139),y=r(143),m=r(207);e.exports=function(e,t,r,n){var i=-1,a=p,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;r&&(t=v(t,y(r))),n?(a=g,o=!1):200<=t.length&&(a=m,o=!1,t=new h(t));e:for(;++i<s;){var c=e[i],d=null==r?c:r(c),c=n||0!==c?c:0;if(o&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;u.push(c)}else a(t,d,n)||u.push(c)}return u}},function(e,t){var r=Math.floor,n=Math.random;e.exports=function(e,t){return e+r(n()*(t-e+1))}},function(e,t,r){var n=r(298),i=r(75);e.exports=function(e){return n(i(e))}},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});var l=r(3),c=r(73),d=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w\.-]+)(?::(\d+))?\/(.+)/,n=(i.prototype.toString=function(e){var t=this.host,r=this.path,n=this.pass,i=this.port,a=this.projectId;return this.protocol+"://"+this.user+((e=void 0===e?!1:e)&&n?":"+n:"")+"@"+t+(i?":"+i:"")+"/"+(r&&r+"/")+a},i.prototype._fromString=function(e){var t=d.exec(e);if(!t)throw new c.a("Invalid Dsn");var r,n=l.c(t.slice(1),6),i=n[0],a=n[1],o=n[2],s=void 0===o?"":o,u=n[3],e=n[4],t=void 0===e?"":e,o="",e=n[5],n=e.split("/");1<n.length&&(o=n.slice(0,-1).join("/"),e=n.pop()),e&&(r=e.match(/^\d+/))&&(e=r[0]),this._fromComponents({host:u,pass:s,path:o,projectId:e,port:t,protocol:i,user:a})},i.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},i.prototype._validate=function(){var t=this;if(["protocol","user","host","projectId"].forEach(function(e){if(!t[e])throw new c.a("Invalid Dsn: "+e+" missing")}),!this.projectId.match(/^\d+$/))throw new c.a("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new c.a("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new c.a("Invalid Dsn: Invalid port "+this.port)},i);function i(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}},,,function(e,t,r){e.exports=function n(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){0;var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}r=a[t]={exports:{}};i[t][0].call(r.exports,function(e){return s(i[t][1][e]||e)},r,r.exports,n,i,a,o)}return a[t].exports}for(var e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(c(r=this._events[e]))return!1;if(u(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(l(r))for(i=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,a=0;a<n;a++)o[a].apply(this,i);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var r;if(!u(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,u(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(r=c(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){if(!u(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,i,a;if(!u(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||u(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(u(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?u(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(u(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}n=this.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=s.normalizePath(n.path),s.buildURLFromParts(n)):t;var i=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");!i.netLoc&&i.path&&"/"!==i.path[0]&&(a=o.exec(i.path),i.netLoc=a[1],i.path=a[2]),i.netLoc&&!i.path&&(i.path="/");var a,e={scheme:i.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(e.netLoc=i.netLoc,"/"===n.path[0])||(n.path?(a=(a=i.path).substring(0,a.lastIndexOf("/")+1)+n.path,e.path=s.normalizePath(a)):(e.path=i.path,n.params||(e.params=i.params,n.query||(e.query=i.query)))),null===e.path&&(e.path=r.alwaysNormalize?s.normalizePath(n.path):n.path),s.buildURLFromParts(e)},parseURL:function(e){e=n.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof r&&"object"==typeof t?t.exports=s:"object"==typeof r?r.URLToolkit=s:this.URLToolkit=s},{}],3:[function(e,t,r){var f=arguments[3],h=arguments[4],p=arguments[5],g=JSON.stringify;t.exports=function(e,t){for(var r=Object.keys(p),n=0,i=r.length;n<i;n++){var a=r[n],o=p[a].exports;if(o===e||o&&o.default===e){s=a;break}}if(!s){for(var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={},n=0,i=r.length;n<i;n++)u[a=r[n]]=a;h[s]=[Function(["require","module","exports"],"("+e+")(self)"),u]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[s]=s,h[l]=[Function(["require"],"var f = require("+g(s)+");(f.default ? f.default : f)(self);"),c];var d={};!function e(t){for(var r in d[t]=!0,h[t][1]){r=h[t][1][r];d[r]||e(r)}}(l);c="("+f+")({"+Object.keys(d).map(function(e){return g(e)+":["+h[e][0]+","+g(h[e][1])+"]"}).join(",")+"},{},["+g(l)+"])",l=window.URL||window.webkitURL||window.mozURL||window.msURL,c=new Blob([c],{type:"text/javascript"});if(t&&t.bare)return c;l=l.createObjectURL(c),c=new Worker(l);return c.objectURL=l,c}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var n=s(e(5)),i=s(e(6)),a=s(e(7)),o=s(e(8)),e=s(e(48));function s(e){return e&&e.__esModule?e:{default:e}}r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:e.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:a.default,fpsController:o.default,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{48:48,5:5,6:6,7:7,8:8}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},v=u(e(30)),i=u(e(29)),y=u(e(32)),a=e(28),m=e(46),o=u(e(44));function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,i.default),n(l,[{key:"destroy",value:function(){this.clearTimer(),i.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t,r,n,i,a=e.frag;"main"===a.type&&(this.timer||(this.timer=setInterval(this.onCheck,100)),this._bwEstimator||(t=this.hls,i=e.frag.level,r=t.levels[i].details.live,n=t.config,i=e=void 0,i=r?(e=n.abrEwmaFastLive,n.abrEwmaSlowLive):(e=n.abrEwmaFastVoD,n.abrEwmaSlowVoD),this._bwEstimator=new o.default(t,i,e,n.abrEwmaDefaultEstimate)),this.fragCurrent=a)}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,n=r.loader,i=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return m.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=n.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*r.duration/s){var u=e.levels,l=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),c=u[r.level],d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,c=a.total||Math.max(a.loaded,Math.round(r.duration*d/8)),d=t.currentTime,c=(c-a.loaded)/l,f=(y.default.bufferInfo(t,d,e.config.maxBufferHole).end-d)/s;if(f<2*r.duration/s&&f<c){for(var h=void 0,p=void 0,p=r.level-1;i<p;p--){var g=u[p].realBitrate?Math.max(u[p].realBitrate,u[p].bitrate):u[p].bitrate;if((h=r.duration*g/(6.4*l))<f)break}h<c&&(m.logger.warn("loading too slow, abort fragment loading and switch to level "+p+":fragLoadedDelay["+p+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+h.toFixed(1)+"<"+c.toFixed(1)+":"+f.toFixed(1)),e.nextLoadLevel=p,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),e.trigger(v.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t,r,n=e.frag;"main"!==n.type||isNaN(n.sn)||(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(n=((t=this.hls.levels[n.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,r=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:n,duration:r},t.realBitrate=Math.round(8*n/r)),e.frag.bitrateTest&&((r=e.stats).tparsed=r.tbuffered=r.tload,this.onFragBuffered(e)))}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;!0===t.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered||(e=t.tparsed-t.trequest,m.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(e,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)}},{key:"onError",value:function(e){switch(e.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,r,n,i,a,o,s,u){for(var l=i;n<=l;l--){var c=u[l].details,d=c?c.totalduration/c.fragments.length:t,f=!!c&&c.live,h=l<=e?o*r:s*r,p=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,c=p*d/h;if(m.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(h)+"/"+p+"/"+d+"/"+a+"/"+c),p<h&&(!c||f&&!this.bitrateTestDelay||c<a))return l}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this._nextABRAutoLevel;return t=-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(y.default.bufferInfo(a,u,n.maxBufferHole).end-u)/l,f=this._findBestLevel(o,s,c,i,t,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(0<=f)return f;m.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");e=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,a=n.abrBandWidthFactor,u=n.abrBandWidthUpFactor;return 0!=d||(l=this.bitrateTestDelay)&&(e=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-l,m.logger.trace("bitrate test took "+Math.round(1e3*l)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),a=u=1),f=this._findBestLevel(o,s,c,i,t,d+e,a,u,r),Math.max(f,0)}}]),n=l;function l(e){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,v.default.FRAG_LOADING,v.default.FRAG_LOADED,v.default.FRAG_BUFFERED,v.default.ERROR));return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(t),t}r.default=n},{28:28,29:29,30:30,32:32,44:44,46:46}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},u=o(e(30)),i=o(e(29)),d=e(46),l=e(28);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,i.default),n(s,[{key:"destroy",value:function(){i.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){t=this.sourceBuffer.audio;if(.1<Math.abs(t.timestampOffset-e.start)){r=t.updating;try{t.abort()}catch(e){r=!0,d.logger.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(d.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.start),t.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video||e.levels.length&&e.audio,n=0;e.altAudio&&(t||r)&&d.logger.log((n=(t?1:0)+(r?1:0))+" sourceBuffer(s) expected"),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;t&&(e=this.mediaSource=new MediaSource,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),e.addEventListener("sourceopen",this.onmso),e.addEventListener("sourceended",this.onmse),e.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(e))}},{key:"onMediaDetaching",value:function(){d.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){d.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(u.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){d.logger.log("media source opened"),this.hls.trigger(u.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){d.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){d.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){this.audioTimestampOffset&&(e=this.sourceBuffer.audio,d.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset),this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var r=this.parent,e=this.segments.reduce(function(e,t){return t.parent===r?e+1:e},0);this.hls.trigger(u.default.BUFFER_APPENDED,{parent:r,pending:e}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){d.logger.error("sourceBuffer error:",e),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e,t=this.sourceBuffer;for(e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t,r=this.sourceBuffer,n=this.mediaSource;for(t in e)if(!r[t]){var i=e[t],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;d.logger.log("creating sourceBuffer("+o+")");try{var s=r[t]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[t]={codec:a,container:i.container},i.buffer=s}catch(e){d.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){d.logger.error("sourceBuffer error:",e.event),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t,r=this.sourceBuffer,n=e.type;for(t in r)n&&t!==n||r[t].ended||(r[t].ended=!0,d.logger.log(t+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){r=e[r];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}d.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){d.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){e=e.details;0!==e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var i in r)if(r[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);e=e.duration;(n>this._msDuration&&e<n||e===1/0||isNaN(e))&&(d.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){d.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void d.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending&&(r&&r.length)){var n=r.shift();try{var i=t[n.type];i?i.updating?r.unshift(n):(i.ended=!1,this.parent=n.parent,i.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){d.logger.error("error while trying to append buffer:"+t.message),r.unshift(n);n={type:l.ErrorTypes.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],n.details=l.ErrorDetails.BUFFER_FULL_ERROR,n.fatal=!1,void e.trigger(u.default.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return d.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],n.fatal=!0,void e.trigger(u.default.ERROR,n);n.fatal=!1,e.trigger(u.default.ERROR,n)}}}}},{key:"flushBuffer",value:function(e,t,r){var n,i,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(d.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in l)if(!r||c===r){if((n=l[c]).ended=!1,n.updating)return d.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(a=n.buffered.start(i),o=n.buffered.end(i),u=-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,t):(s=Math.max(a,e),Math.min(o,t)),.5<Math.min(u,o)-s)return this.flushBufferCounter++,d.logger.log("flush "+c+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),n.remove(s,u),!1}catch(e){d.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else d.logger.warn("abort flushing too many retries");d.logger.log("buffer flushed")}return!0}}]),n=s;function s(e){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED));return e._msDuration=null,e._levelDuration=null,e.onsbue=e.onSBUpdateEnd.bind(e),e.onsbe=e.onSBUpdateError.bind(e),e.pendingTracks={},e.tracks={},e}r.default=n},{28:28,29:29,30:30,46:46}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},i=o(e(30));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,o(e(29)).default),n(s,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){s.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)}},{key:"getMaxLevel",value:function(r){var n=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return s.isLevelAllowed(t,n.restrictedLevels)&&t<=r});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=s.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=s.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e){return-1===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,r){if(!e||!e.length)return-1;for(var n,i=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=r)&&(!(n=e[a+1])||o.width!==n.width||o.height!==n.height)){i=a;break}}return i}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),n=s;function s(e){return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED))}r.default=n},{29:29,30:30}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},u=o(e(30)),i=o(e(29)),l=e(46);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,i.default),n(s,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,r){var n,i,a,o,s=performance.now();t&&(this.lastTime&&(a=s-this.lastTime,n=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,i=1e3*n/a,(a=this.hls).trigger(u.default.FPS_DROP,{currentDropped:n,currentDecoded:o,totalDroppedFrames:r}),0<i&&n>a.config.fpsDroppedMonitoringThreshold*o&&(o=a.currentLevel,l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o&&(-1===a.autoLevelCapping||a.autoLevelCapping>=o)&&(a.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:a.currentLevel}),a.autoLevelCapping=o,a.streamController.nextLevelSwitch()))),this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=t)}},{key:"checkFPSInterval",value:function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))}}]),n=s;function s(e){return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,u.default.MEDIA_ATTACHING))}r.default=n},{29:29,30:30,46:46}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},i=s(e(30)),a=s(e(29)),d=s(e(22));function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default),n(u,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,r=e.samples,n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=d.default.getID3Frames(r[i].data);if(a){var o=r[i].pts,s=i<r.length-1?r[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var l,c=a[u];d.default.isTimeStampFrame(c)||((l=new n(o,s,"")).value=c,this.id3Track.addCue(l))}}}}}]),n=u;function u(e){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA));return e.id3Track=void 0,e.media=void 0,e}r.default=n},{22:22,29:29,30:30}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},d=o(e(30)),i=o(e(29)),f=e(46),h=e(28),s=o(e(32));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,i.default),n(u,[{key:"destroy",value:function(){this.cleanTimer(),this._manualLevel=-1}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){function r(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)}var t,n=[],i=[],a={},o=!1,s=!1,u=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase());if(e.levels.forEach(function(e){e.videoCodec&&(o=!0),l&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(s=!0);var t=a[e.bitrate];void 0===t?(a[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),o&&s?n.forEach(function(e){e.videoCodec&&i.push(e)}):i=n,(i=i.filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||r("audio",t))&&(!e||r("video",e))})).length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var c=0;c<i.length;c++)if(i[c].bitrate===t){this._firstLevel=c,f.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}u.trigger(d.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:o,altAudio:0<e.audioTracks.length})}else u.trigger(d.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:u.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t,r=this._levels,n=this.hls;0<=e&&e<r.length?(this.cleanTimer(),this._level!==e&&(f.logger.log("switching to level "+e),(t=r[this._level=e]).level=e,n.trigger(d.default.LEVEL_SWITCH,t),n.trigger(d.default.LEVEL_SWITCHING,t)),(r=(t=r[e]).details)&&!0!==r.live||(r=t.urlId,n.trigger(d.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r}))):n.trigger(d.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(e.fatal)e.type===h.ErrorTypes.NETWORK_ERROR&&this.cleanTimer();else{var t,r=e.details,n=this.hls,i=void 0,a=void 0,o=!1;switch(r){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=e.context.level,o=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:i=e.level}void 0!==i&&((a=this._levels[i]).loadError?a.loadError++:a.loadError=1,1<(t=a.url.length)&&a.loadError<t?(a.urlId=(a.urlId+1)%t,a.details=void 0,f.logger.warn("level controller,"+r+" for level "+i+": switching to redundant stream id "+a.urlId)):-1===this._manualLevel&&i?(f.logger.warn("level controller,"+r+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,i-1)):a&&a.details&&a.details.live?(f.logger.warn("level controller,"+r+" on live stream, discard"),o&&(this._level=void 0)):r!==h.ErrorDetails.LEVEL_LOAD_ERROR&&r!==h.ErrorDetails.LEVEL_LOAD_TIMEOUT||((a=n.media)&&s.default.isBuffered(a,a.currentTime)&&s.default.isBuffered(a,a.currentTime+.5)?(n=n.config.levelLoadingRetryDelay,f.logger.warn("level controller,"+r+", but media buffered, retry in "+n+"ms"),this.timer=setTimeout(this.ontick,n),e.levelRetry=!0):(f.logger.error("cannot recover "+r+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0)))}}},{key:"onFragLoaded",value:function(e){e=e.frag;!e||"main"!==e.type||(e=this._levels[e.level])&&(e.loadError=0)}},{key:"onLevelLoaded",value:function(e){var t,r,n=e.level;n===this._level&&((r=this._levels[n]).loadError=0,(t=e.details).live?(n=1e3*(t.averagetargetduration||t.targetduration),(r=r.details)&&t.endSN===r.endSN&&(n/=2,f.logger.log("same live playlist, reload twice faster")),n-=performance.now()-e.stats.trequest,n=Math.max(1e3,Math.round(n)),f.logger.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(this.ontick,n)):this.timer=null)}},{key:"tick",value:function(){var e,t,r=this._level;void 0===r||!this.canload||(e=this._levels[r])&&e.url&&(t=e.urlId,this.hls.trigger(d.default.LEVEL_LOADING,{url:e.url[t],level:r,id:t}))}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),n=u;function u(e){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,d.default.MANIFEST_LOADED,d.default.LEVEL_LOADED,d.default.FRAG_LOADED,d.default.ERROR));return e.ontick=e.tick.bind(e),e._manualLevel=-1,e}r.default=n},{28:28,29:29,30:30,32:32,46:46}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},h=l(e(43)),c=l(e(32)),u=l(e(20)),d=l(e(30)),i=l(e(29)),o=l(e(33)),a=l(e(47)),f=e(28),p=e(46);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}var g="STOPPED",v="IDLE",y="KEY_LOADING",m="FRAG_LOADING",b="FRAG_LOADING_WAITING_RETRY",_="WAITING_LEVEL",E="PARSING",w="PARSED",k="BUFFER_FLUSHING",T="ERROR",n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(S,i.default),n(S,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),i.default.prototype.destroy.call(this),this.state=g}},{key:"startLoad",value:function(e){var t,r,n;this.levels?(t=this.lastCurrentTime,r=this.hls,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(n=r.startLevel)&&(this.bitrateTest=!(n=0)),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1),0<t&&-1===e&&(p.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=g)}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=g,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case T:break;case k:this.fragLoadError=0;break;case v:this._doTickIdle();break;case _:var e=this.levels[this.level];e&&e.details&&(this.state=v);break;case b:var t=performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v)}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var n=this.loadedmetadata?r.currentTime:this.nextLoadPosition,i=e.nextLoadLevel,a=this.levels[i];if(a){var o=a.bitrate,s=void 0,s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength;s=Math.min(s,t.maxMaxBufferLength);o=c.default.bufferInfo(this.mediaBuffer||r,n,t.maxBufferHole),t=o.len;if(!(s<=t)){p.logger.trace("buffer length of "+t.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;a=a.details;if(void 0===a||a.live&&this.levelLastLoaded!==i)this.state=_;else{i=this.fragPrevious;if(!a.live&&i&&i.sn===a.endSN&&t&&!o.nextStart&&Math.min(r.duration,i.start+i.duration)-Math.max(o.end,i.start)<=Math.max(.2,i.duration)){i={};return this.altAudio&&(i.type="video"),this.hls.trigger(d.default.BUFFER_EOS,i),void(this.state="ENDED")}this._fetchPayloadOrEos(n,o,a)}}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=t.end,c=void 0;if(r.initSegment&&!r.initSegment.data)c=r.initSegment;else if(r.live){t=this.config.initialLiveManifestSize;if(o<t)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+t);if(null===(c=this._ensureFragmentAtLivePoint(r,l,s,u,n,a,o)))return}else l<s&&(c=a[0]);(c=c||this._findFragment(s,n,o,a,l,u,r))&&this._loadFragmentOrKey(c,i,r,e,l)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,n,i,a,o){var s=this.hls.config,u=this.media,l=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;return t<Math.max(r-s.maxFragLookUpTolerance,n-c)&&(r=this.liveSyncPosition=this.computeLivePosition(r,e),p.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+r.toFixed(3)),t=r,u&&u.readyState&&u.duration>r&&(u.currentTime=r),this.nextLoadPosition=r),e.PTSKnown&&n<t&&u&&u.readyState?null:(this.startFragRequested&&!e.PTSKnown&&(i&&((u=i.sn+1)>=e.startSN&&u<=e.endSN&&(e=a[u-e.startSN],i.cc===e.cc&&p.logger.log("live playlist, switching playlist, load frag with next SN: "+(l=e).sn)),l||(l=h.default.search(a,function(e){return i.cc-e.cc}))&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)),l||(l=a[Math.min(o-1,Math.round(o/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))),l)}},{key:"_findFragment",value:function(e,t,r,n,i,a,o){var s=this.hls.config,u=void 0,l=void 0,c=s.maxFragLookUpTolerance,d=t?n[t.sn-n[0].sn+1]:void 0,f=function(e){var t=Math.min(c,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};return(l=i<a?(a-c<i&&(c=0),d&&!f(d)?d:h.default.search(n,f)):n[r-1])&&(f=(u=l).sn-o.startSN,r=t&&u.level===t.level,l=n[f-1],n=n[1+f],t&&u.sn===t.sn&&(r&&!u.backtracked?u.sn<o.endSN?(o=t.deltaPTS)&&o>s.maxBufferHole&&t.dropped&&f?(u=l,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):p.logger.log("SN just loaded, load next one: "+(u=n).sn):u=null:u.backtracked&&(n&&n.backtracked?(p.logger.warn("Already backtracked from fragment "+n.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+n.sn),u=n):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,l?(l.loadCounter&&l.loadCounter--,(u=l).backtracked=!0):f&&(u=null))))),u}},{key:"_loadFragmentOrKey",value:function(e,t,r,n,i){var a=this.hls,o=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(p.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;o=o.fragLoadingLoopThreshold;if(e.loadCounter>o&&Math.abs(this.fragLoadIdx-e.loadIdx)<o)return void a.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(d.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new u.default(a,"main")),void(this.state=m)}p.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=y,a.trigger(d.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(t){return h.default.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),c.default.isBuffered(r,e)?t=this.getBufferedFrag(e):c.default.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)&&((e=t)!==this.fragPlaying&&(this.hls.trigger(d.default.FRAG_CHANGED,{frag:e}),t=e.level,this.fragPlaying&&this.fragPlaying.level===t||this.hls.trigger(d.default.LEVEL_SWITCHED,{level:t}),this.fragPlaying=e))}},{key:"immediateLevelSwitch",value:function(){var e;p.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,t=void 0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,c.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e,t,r,n,i=this.media;i&&i.readyState&&(e=n=void 0,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(t=this.getBufferedFrag(i.currentTime))&&1<t.startPTS&&this.flushMainBuffer(0,t.startPTS-1),n=i.paused?0:(r=this.hls.nextLoadLevel,t=this.levels[r],(r=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*t.bitrate/(1e3*r)+1:0),(e=this.getBufferedFrag(i.currentTime+n))&&(e=this.followingBufferedFrag(e))&&((n=this.fragCurrent)&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(e.maxStartPTS,Number.POSITIVE_INFINITY)))}},{key:"flushMainBuffer",value:function(e,t){this.state=k;t={startOffset:e,endOffset:t};this.altAudio&&(t.type="video"),this.hls.trigger(d.default.BUFFER_FLUSHING,t)}},{key:"onMediaAttached",value:function(e){e=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||p.logger.log("media seeking to "+t.toFixed(3));var n,i,a=this.mediaBuffer||e,o=c.default.bufferInfo(a,t,this.config.maxBufferHole);this.state===m?(n=this.fragCurrent,0===o.len&&n&&(i=r.maxFragLookUpTolerance,a=n.start-i,i=n.start+n.duration+i,t<a||i<t?(n.loader&&(p.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=v):p.logger.log("seeking outside of buffer but within currently loaded fragment range"))):"ENDED"===this.state&&(0===o.len&&(this.fragPrevious=0),this.state=v),e&&(this.lastCurrentTime=t),this.state!==m&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,e=e?e.currentTime:void 0;isNaN(e)||p.logger.log("media seeked to "+e.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){p.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(d.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,n=this.levels[r],i=t.totalduration,a=0;p.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=r,t.live?(e=n.details)&&0<t.fragments.length?(o.default.mergeDetails(e,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,e),t.PTSKnown?p.logger.log("live playlist sliding:"+a.toFixed(3)):p.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,p.logger.log("live playlist - first load, unknown sliding")):t.PTSKnown=!1,n.details=t,this.hls.trigger(d.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(r=t.startTimeOffset,isNaN(r)?t.live?(this.startPosition=this.computeLivePosition(a,t),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(r<0&&(p.logger.log("negative start time offset "+r+", count from end of last fragment"),r=a+i+r),p.logger.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r),this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===_&&(this.state=v),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===y&&(this.state=v,this.tick())}},{key:"onFragLoaded",value:function(e){var t,r,n,i,a,o=this.fragCurrent,s=e.frag;this.state===m&&o&&"main"===s.type&&s.level===o.level&&s.sn===o.sn&&(n=e.stats,a=(t=this.levels[o.level]).details,p.logger.log("Loaded  "+o.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+o.level),this.bitrateTest=!1,this.stats=n,!0===s.bitrateTest&&this.hls.nextLoadLevel?(this.state=v,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(d.default.FRAG_BUFFERED,{stats:n,frag:o,id:"main"}),this.tick()):"initSegment"===s.sn?(this.state=v,n.tparsed=n.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(d.default.FRAG_BUFFERED,{stats:n,frag:o,id:"main"}),this.tick()):(this.state=E,r=a.totalduration,i=o.level,s=o.sn,n=this.config.defaultAudioCodec||t.audioCodec,this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),n=(n=void 0===n?this.lastAudioCodec:n)&&(-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,p.logger.log("Parsing "+s+" of ["+a.startSN+" ,"+a.endSN+"],level "+i+", cc "+o.cc),s=(s=this.demuxer)||(this.demuxer=new u.default(this.hls,"main")),i=!((i=this.media)&&i.seeking)&&(a.PTSKnown||!a.live),a=a.initSegment?a.initSegment.data:[],s.push(e.payload,a,n,t.videoCodec,o,r,i,void 0))),this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===E){var n,i,a=e.tracks;for(n in a.audio&&this.altAudio&&delete a.audio,(i=a.audio)&&(r=this.levels[this.level].audioCodec,t=navigator.userAgent.toLowerCase(),r&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===t.indexOf("firefox")&&(r="mp4a.40.5"),-1!==t.indexOf("android")&&"audio/mpeg"!==i.container&&p.logger.log("Android: force audio codec to "+(r="mp4a.40.2")),i.levelCodec=r,i.id=e.id),(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(d.default.BUFFER_CODECS,a),a){i=a[n],p.logger.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;o&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(d.default.BUFFER_APPENDING,{type:n,data:o,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(t){var r=this,e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===E){var i=this.levels[this.level],n=e;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),p.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(n.dropped=t.dropped,n.dropped){if(!n.backtracked)return p.logger.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=v,this.fragPrevious=n,void this.tick();p.logger.warn("Already backtracked on this fragment, appending with the gap")}else n.backtracked=!1;var n=o.default.updateFragPTSDTS(i.details,n,t.startPTS,t.endPTS,t.startDTS,t.endDTS),a=this.hls;a.trigger(d.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:n,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===E&&(r.appended=!0,r.pendingBuffering=!0,a.trigger(d.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===E&&(this.stats.tparsed=performance.now(),this.state=w,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t,r=!!e.url,e=e.id;r||(this.mediaBuffer!==this.media&&(p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v),(t=this.hls).trigger(d.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),t.trigger(d.default.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1)}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,e=!!this.hls.audioTracks[t].url;!e||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=e,this.tick()}},{key:"onBufferCreated",value:function(e){var t,r=e.tracks,n=void 0,i=void 0,a=!1;for(t in r){var o=r[t];"main"===o.id?(n=o,"video"===(i=t)&&(this.videoBuffer=r[t].buffer)):a=!0}a&&n?(p.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){var t;"main"===e.parent&&((t=this.state)!==E&&t!==w||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))}},{key:"_checkAppendedParsed",value:function(){var e,t,r;this.state!==w||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer||this.media,p.logger.log("main buffered : "+a.default.toString(t.buffered)),(r=this._bufferedFrags.filter(function(e){return c.default.isBuffered(t,(e.startPTS+e.endPTS)/2)})).push(e),this._bufferedFrags=r.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e,(r=this.stats).tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(d.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=v),this.tick())}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r,n,i=this.media,a=i&&c.default.isBuffered(i,i.currentTime)&&c.default.isBuffered(i,i.currentTime+.5);switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:e.fatal||((r=this.fragLoadError)?r++:r=1,r<=(n=this.config).fragLoadingMaxRetry||a||t.autoLevel&&t.level?(this.fragLoadError=r,t.loadCounter=0,n=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout),p.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=b):(p.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=T));break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(a?(this._reduceMaxBufferLength(t.duration),this.state=v):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=T));break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==T&&(e.fatal?(this.state=T,p.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==_||(this.state=v));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==E&&this.state!==w||(a?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e,t,r,n,i,a,o,s,u=this.media,l=this.config;u&&u.readyState&&(e=u.currentTime,r=(t=this.mediaBuffer||u).buffered,!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,s=u.seeking?e:this.startPosition,n=c.default.isBuffered(t,s),o=r.start(0),(e!==s||!n&&Math.abs(s-o)<l.maxSeekHole)&&(p.logger.log("target start position:"+s),n||p.logger.log("target start position not buffered, seek to buffered.start(0) "+(s=o)),p.logger.log("adjust currentTime from "+e+" to "+s),u.currentTime=s)):this.immediateSwitch?this.immediateLevelSwitchEnd():(a=c.default.bufferInfo(u,e,0),i=!(u.paused||u.ended||0===u.buffered.length),e!==this.lastCurrentTime?(this.stallReported&&(p.logger.warn("playback not stuck anymore @"+e+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0):i&&(t=performance.now(),r=this.hls,this.stalled?(n=t-this.stalled,o=a.len,s=this.nudgeRetry||0,o<=.5&&n>1e3*l.lowBufferWatchdogPeriod?(this.stallReported||(this.stallReported=!0,p.logger.warn("playback stalling in low buffer @"+e),r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:o})),a=(i=a.nextStart)-e,i&&a<l.maxSeekHole&&0<a&&(this.nudgeRetry=++s,a=s*l.nudgeOffset,p.logger.log("adjust currentTime from "+u.currentTime+" to next buffered @ "+i+" + nudge "+a),u.currentTime=i+a,this.stalled=void 0,r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:i+a-e}))):.5<o&&n>1e3*l.highBufferWatchdogPeriod&&(this.stallReported||(this.stallReported=!0,p.logger.warn("playback stalling in high buffer @"+e),r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:o})),this.stalled=void 0,this.nudgeRetry=++s,s<l.nudgeMaxRetry?(s=(o=u.currentTime)+s*l.nudgeOffset,p.logger.log("adjust currentTime from "+o+" to "+s),u.currentTime=s,r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(p.logger.error("still stuck in high buffer @"+e+" after "+l.nudgeMaxRetry+", raise fatal error"),r.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})))):(this.stalled=t,this.stallReported=!1))))}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=v,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var t=this.mediaBuffer||this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return c.default.isBuffered(t,(e.startPTS+e.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=v,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,p.logger.log("main stream:"+t+"->"+e),this.hls.trigger(d.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getBufferedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),S);function S(e){!function(e){if(!(e instanceof S))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,e,d.default.MEDIA_ATTACHED,d.default.MEDIA_DETACHING,d.default.MANIFEST_LOADING,d.default.MANIFEST_PARSED,d.default.LEVEL_LOADED,d.default.KEY_LOADED,d.default.FRAG_LOADED,d.default.FRAG_LOAD_EMERGENCY_ABORTED,d.default.FRAG_PARSING_INIT_SEGMENT,d.default.FRAG_PARSING_DATA,d.default.FRAG_PARSED,d.default.ERROR,d.default.AUDIO_TRACK_SWITCHING,d.default.AUDIO_TRACK_SWITCHED,d.default.BUFFER_CREATED,d.default.BUFFER_APPENDED,d.default.BUFFER_FLUSHED));return t.config=e.config,t.audioCodecSwap=!1,t.ticks=0,t._state=g,t.ontick=t.tick.bind(t),t}r.default=n},{20:20,28:28,29:29,30:30,32:32,33:33,43:43,46:46,47:47}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),i);function i(e,t){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.subtle=e,this.aesIV=t}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}},{key:"initTable",value:function(){for(var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],r=this.invSubMix,s=r[0],u=r[1],l=r[2],c=r[3],d=new Uint32Array(256),f=0,h=0,p=0,p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var g=h^h<<1^h<<2^h<<3^h<<4;e[f]=g=g>>>8^255&g^99;var v=d[t[g]=f],y=d[v],m=d[y],b=257*d[g]^16843008*g;n[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,o[f]=b,s[g]=(b=16843009*m^65537*y^257*v^16843008*f)<<24|b>>>8,u[g]=b<<16|b>>>16,l[g]=b<<8|b>>>24,c[g]=b,f?(f=v^d[d[d[m^v]]],h^=d[d[h]]):f=h=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);for(var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,e=this.invSubMix,f=e[0],h=e[1],p=e[2],g=e[3],v=void 0,y=void 0,o=0;o<a;o++)o<i?v=u[o]=t[o]:(y=v,o%i==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[o/i|0]<<24):6<i&&o%i==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),u[o]=v=(u[o-i]^y)>>>0);for(s=0;s<a;s++)o=a-s,y=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?y:f[c[y>>>24]]^h[c[y>>>16&255]]^p[c[y>>>8&255]]^g[c[255&y]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var n,i,a,o,s,u,l=this.keySize+6,c=this.invKeySchedule,d=this.invSBox,f=this.invSubMix,h=f[0],p=f[1],g=f[2],v=f[3],r=this.uint8ArrayToUint32Array_(r),y=r[0],m=r[1],b=r[2],_=r[3],E=new Int32Array(e),w=new Int32Array(E.length),k=void 0,T=void 0,S=void 0,x=void 0,A=void 0,O=void 0,R=void 0,L=void 0,D=this.networkToHostOrderSwap;t<E.length;){for(a=D(E[t]),o=D(E[t+1]),s=D(E[t+2]),u=D(E[t+3]),A=a^c[0],O=u^c[1],R=s^c[2],L=o^c[3],n=4,i=1;i<l;i++)k=h[A>>>24]^p[O>>16&255]^g[R>>8&255]^v[255&L]^c[n],T=h[O>>>24]^p[R>>16&255]^g[L>>8&255]^v[255&A]^c[n+1],S=h[R>>>24]^p[L>>16&255]^g[A>>8&255]^v[255&O]^c[n+2],x=h[L>>>24]^p[A>>16&255]^g[O>>8&255]^v[255&R]^c[n+3],A=k,O=T,R=S,L=x,n+=4;k=d[A>>>24]<<24^d[O>>16&255]<<16^d[R>>8&255]<<8^d[255&L]^c[n],T=d[O>>>24]<<24^d[R>>16&255]<<16^d[L>>8&255]<<8^d[255&A]^c[n+1],S=d[R>>>24]<<24^d[L>>16&255]<<16^d[A>>8&255]<<8^d[255&O]^c[n+2],x=d[L>>>24]<<24^d[A>>16&255]<<16^d[O>>8&255]<<8^d[255&R]^c[n+3],n+=3,w[t]=D(k^y),w[t+1]=D(x^m),w[t+2]=D(S^b),w[t+3]=D(T^_),y=a,m=o,b=s,_=u,t+=4}return w.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},s=o(e(12)),u=o(e(15)),l=o(e(13)),a=e(28),c=e(46);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}n(d,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(t,r,n,i){var e,a,o=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(c.logger.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new l.default),e.expandKey(r),i(e.decrypt(t,0,n))):(this.logEnabled&&(c.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1),a=this.subtle,this.key!==r&&(this.key=r,this.fastAesKey=new u.default(a,r)),this.fastAesKey.expandKey().then(function(e){new s.default(a,n).decrypt(t,e).catch(function(e){o.onWebCryptoError(e,t,r,n,i)}).then(function(e){i(e)})}).catch(function(e){o.onWebCryptoError(e,t,r,n,i)}))}},{key:"onWebCryptoError",value:function(e,t,r,n,i){this.config.enableSoftwareAES?(c.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(c.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),n=d;function d(e,t){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=t,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}r.default=n},{12:12,13:13,15:15,28:28,46:46}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),i);function i(e,t){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.subtle=e,this.key=t}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},h=a(e(17)),p=e(46),g=a(e(22));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}n(o,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var i=this._audioTrack,a=g.default.getID3Data(e,0),o=90*g.default.getTimeStamp(a),s=0,u=o,l=e.length,c=a.length,d=[{pts:u,dts:u,data:a}];c<l-1;)if(h.default.isHeader(e,c)&&c+5<l){h.default.initTrackConfig(i,this.observer,e,c,i.manifestCodec);var f=h.default.appendFrame(i,e,c,o,s);if(!f){p.logger.log("Unable to parse AAC frame");break}c+=f.length,u=f.sample.pts,s++}else g.default.isHeader(e,c)?(a=g.default.getID3Data(e,c),d.push({pts:u,dts:u,data:a}),c+=a.length):c++;this.remuxer.remux(i,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=g.default.getID3Data(e,0);if(n&&void 0!==g.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(h.default.probe(e,t))return p.logger.log("ADTS sync word found !"),!0;return!1}}]),n=o;function o(e,t,r){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=r,this.remuxer=t}r.default=n},{17:17,22:22,46:46}],17:[function(e,t,r){"use strict";var d=e(46),f=e(28),e={getAudioConfig:function(e,t,r,n){var i,a,o,s=navigator.userAgent.toLowerCase(),u=n,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&t[r+2])>>>6);if(!((i=(60&t[r+2])>>>2)>l.length-1))return a=(1&t[r+2])<<2,a|=(192&t[r+3])>>>6,d.logger.log("manifest codec:"+n+",ADTS data:type:"+c+",sampleingIndex:"+i+"["+l[i]+"Hz],channelConfig:"+a),n=/firefox/i.test(s)?6<=i?(c=5,o=new Array(4),i-3):(c=2,o=new Array(2),i):-1!==s.indexOf("android")?(c=2,o=new Array(2),i):(c=5,o=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=i?i-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=i&&1==a||/vivaldi/i.test(s))||!n&&1==a)&&(c=2,o=new Array(2)),i)),o[0]=c<<3,o[0]|=(14&i)>>1,o[1]|=(1&i)<<7,o[1]|=a<<3,5===c&&(o[1]|=(14&n)>>1,o[2]=(1&n)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:l[i],channelCount:a,codec:"mp4a.40."+c,manifestCodec:u};e.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+i})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.getHeaderLength(e,t),r=t+(r=t+5<e.length?this.getFullFrameLength(e,t):r);if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1},initTrackConfig:function(e,t,r,n,i){e.samplerate||(i=this.getAudioConfig(t,r,n,i),e.config=i.config,e.samplerate=i.samplerate,e.channelCount=i.channelCount,e.codec=i.codec,e.manifestCodec=i.manifestCodec,d.logger.log("parsed codec:"+e.codec+",rate:"+i.samplerate+",nb channel:"+i.channelCount))},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,r,n,i){var a=this.getFrameDuration(e.samplerate),n=this.parseFrameHeader(t,r,n,i,a);if(n){i=n.stamp,a=n.headerLength,n=n.frameLength,i={unit:t.subarray(r+a,r+a+n),pts:i,dts:i};return e.samples.push(i),e.len+=n,{sample:i,length:n+a}}},parseFrameHeader:function(e,t,r,n,i){var a=e.length,o=this.getHeaderLength(e,t),e=this.getFullFrameLength(e,t);if(0<(e-=o)&&t+o+e<=a)return{headerLength:o,frameLength:e,stamp:r+n*i}}};t.exports=e},{28:28,46:46}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},k=a(e(30)),T=e(28),g=a(e(14)),S=a(e(16)),x=a(e(24)),A=a(e(27)),O=a(e(23)),R=a(e(40)),L=a(e(41));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}n(o,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,r,n,i,a,o,s,u,l,c,d,f){if(0<e.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method){var t=this.decrypter;null==t&&(t=this.decrypter=new g.default(this.observer,this.config));var h,p=this;try{h=performance.now()}catch(e){h=Date.now()}t.decrypt(e,r.key.buffer,r.iv.buffer,function(e){var t;try{t=performance.now()}catch(e){t=Date.now()}p.observer.trigger(k.default.FRAG_DECRYPTED,{stats:{tstart:h,tdecrypt:t}}),p.pushDecrypted(new Uint8Array(e),r,new Uint8Array(n),i,a,o,s,u,l,c,d,f)})}else this.pushDecrypted(new Uint8Array(e),r,new Uint8Array(n),i,a,o,s,u,l,c,d,f)}},{key:"pushDecrypted",value:function(e,t,r,n,i,a,o,s,u,l,c,d){if(!(E=this.demuxer)||o&&!this.probe(e)){for(var f=this.observer,h=this.typeSupported,p=this.config,g=[{demux:S.default,remux:R.default},{demux:O.default,remux:R.default},{demux:A.default,remux:R.default},{demux:x.default,remux:L.default}],v=0,y=g.length;v<y;v++){var m=g[v],b=m.demux.probe;if(b(e)){var _=this.remuxer=new m.remux(f,p,h,this.vendor),E=new m.demux(f,_,p,h);this.probe=b;break}}if(!E)return void f.trigger(k.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var w=this.remuxer;(o||s)&&(E.resetInitSegment(r,n,i,l),w.resetInitSegment()),o&&(E.resetTimeStamp(d),w.resetTimeStamp(d)),"function"==typeof E.setDecryptData&&E.setDecryptData(t),E.append(e,a,u,c)}}]),n=o;function o(e,t,r,n){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}r.default=n},{14:14,16:16,23:23,24:24,27:27,28:28,30:30,40:40,41:41}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=n(e(18)),s=n(e(30)),u=e(46),l=n(e(1));function n(e){return e&&e.__esModule?e:{default:e}}r.default=function(n){var i=new l.default;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))};function a(e,t){n.postMessage({event:e,data:t})}n.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var r=JSON.parse(t.config);n.demuxer=new o.default(i,t.typeSupported,r,t.vendor);try{(0,u.enableLogs)(!0===r.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}a("init",null);break;case"demux":n.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),i.on(s.default.FRAG_DECRYPTED,a),i.on(s.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(s.default.FRAG_PARSED,a),i.on(s.default.ERROR,a),i.on(s.default.FRAG_PARSING_METADATA,a),i.on(s.default.FRAG_PARSING_USERDATA,a),i.on(s.default.INIT_PTS_FOUND,a),i.on(s.default.FRAG_PARSING_DATA,function(e,t){var r=[],e={event:e,data:t};t.data1&&(e.data1=t.data1.buffer,r.push(t.data1.buffer),delete t.data1),t.data2&&(e.data2=t.data2.buffer,r.push(t.data2.buffer),delete t.data2),n.postMessage(e,r)})}},{1:1,18:18,30:30,46:46}],20:[function(u,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},l=i(u(30)),c=i(u(18)),d=i(u(19)),p=u(46),f=u(28),h=i(u(1));function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return e&&e.__esModule?e:{default:e}}r(g,[{key:"destroy",value:function(){var e=this.w;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null);var t=this.observer;t&&(t.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,r,n,i,a,o,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,c=i.decryptdata,d=this.frag,f=!(d&&i.cc===d.cc),h=!(d&&i.level===d.level),d=d&&i.sn===d.sn+1,d=!h&&d;f&&p.logger.log(this.id+":discontinuity detected"),h&&p.logger.log(this.id+":switch detected"),this.frag=i,u?u.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:l,discontinuity:f,trackSwitch:h,contiguous:d,duration:a,accurateTimeOffset:o,defaultInitPTS:s},[e]):(u=this.demuxer)&&u.push(e,c,t,r,n,l,f,h,d,a,o,s)}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case l.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),r=g;function g(r,e){!function(e){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this),this.hls=r,this.id=e;var i=this.observer=new h.default,t=r.config;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))};var n=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);i.on(l.default.FRAG_DECRYPTED,n),i.on(l.default.FRAG_PARSING_INIT_SEGMENT,n),i.on(l.default.FRAG_PARSING_DATA,n),i.on(l.default.FRAG_PARSED,n),i.on(l.default.ERROR,n),i.on(l.default.FRAG_PARSING_METADATA,n),i.on(l.default.FRAG_PARSING_USERDATA,n),i.on(l.default.INIT_PTS_FOUND,n);var a={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(t.enableWorker&&"undefined"!=typeof Worker){p.logger.log("demuxing in webworker");n=void 0;try{var s=u(3),n=this.w=s(d.default);this.onwmsg=this.onWorkerMessage.bind(this),n.addEventListener("message",this.onwmsg),n.onerror=function(e){r.trigger(l.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},n.postMessage({cmd:"init",typeSupported:a,vendor:o,id:e,config:JSON.stringify(t)})}catch(e){p.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),n&&URL.revokeObjectURL(n.objectURL),this.demuxer=new c.default(i,a,t,o),this.w=void 0}}else this.demuxer=new c.default(i,a,t,o)}t.default=r},{1:1,18:18,19:19,28:28,3:3,30:30,46:46}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},i=e(46),n=(n(a,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");n.set(e.subarray(r,r+t)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&i.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){for(var t=8,r=8,n=0;n<e;n++)t=0===(r=0!==r?(t+this.readEG()+256)%256:r)?t:r}},{key:"readSPS",value:function(){var e,t,r,n,i=0,a=0,o=0,s=0,u=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(u(),e=u(),l(5),f(3),u(),p(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=c();if(3===v&&f(1),p(),p(),f(1),d())for(r=3!==v?8:12,n=0;n<r;n++)d()&&g(n<6?16:64)}p();var v=c();if(0===v)c();else if(1===v)for(f(1),h(),h(),t=c(),n=0;n<t;n++)h();p(),f(1),v=c(),p=c(),0===(l=l(1))&&f(1),f(1),d()&&(i=c(),a=c(),o=c(),s=c());var y=[1,1];if(d()&&d())switch(u()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(v+1)-2*i-2*a),height:(2-l)*(p+1)*16-(l?2:4)*(o+s),pixelRatio:y}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),a);function a(e){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{46:46}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}(s,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(e,t){for(var r=t,n=0;s.isHeader(e,t);)n+=10,n+=s._readSize(e,t+6),s.isFooter(e,t+10)&&(n+=10),t+=n;if(0<n)return e.subarray(r,r+n)}},{key:"_readSize",value:function(e,t){var r=0,r=(127&e[t])<<21;return r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]}},{key:"getTimeStamp",value:function(e){for(var t=s.getID3Frames(e),r=0;r<t.length;r++){var n=t[r];if(s.isTimeStampFrame(n))return s._readTimeStamp(n)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=s._readSize(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}},{key:"getID3Frames",value:function(e){for(var t=0,r=[];s.isHeader(e,t);){for(var n=s._readSize(e,t+6),i=(t+=10)+n;t+8<i;){var a=s._getFrameData(e.subarray(t)),o=s._decodeFrame(a);o&&r.push(o),t+=a.size+10}s.isFooter(e,t)&&(t+=10)}return r}},{key:"_decodeFrame",value:function(e){return"PRIV"===e.type?s._decodePrivFrame(e):"T"===e.type[0]?s._decodeTextFrame(e):"W"===e.type[0]?s._decodeURLFrame(e):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}}},{key:"_decodePrivFrame",value:function(e){if(!(e.size<2)){var t=s._utf8ArrayToStr(e.data),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}}},{key:"_decodeTextFrame",value:function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=s._utf8ArrayToStr(e.data.subarray(1));t+=r.length+1;t=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:t}}t=s._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:t}}}},{key:"_decodeURLFrame",value:function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=s._utf8ArrayToStr(e.data.subarray(1));t+=r.length+1;t=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:t}}t=s._utf8ArrayToStr(e.data);return{key:e.type,data:t}}},{key:"_utf8ArrayToStr",value:function(e){for(var t,r=void 0,n="",i=0,a=e.length;i<a;){var o=e[i++];switch(o>>4){case 0:return n;case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(o);break;case 12:case 13:r=e[i++],n+=String.fromCharCode((31&o)<<6|63&r);break;case 14:r=e[i++],t=e[i++],n+=String.fromCharCode((15&o)<<12|(63&r)<<6|(63&t)<<0)}}return n}}]),s);function s(){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},h=o(e(22)),i=e(46),p=o(e(25));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}n(s,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var i=h.default.getID3Data(e,0),a=90*h.default.getTimeStamp(i),o=i.length,s=e.length,u=0,l=0,c=this._audioTrack,d=[{pts:a,dts:a,data:i}];o<s;)if(p.default.isHeader(e,o)){var f=p.default.appendFrame(c,e,o,a,u);if(!f)break;o+=f.length,l=f.sample.pts,u++}else h.default.isHeader(e,o)?(i=h.default.getID3Data(e,o),d.push({pts:l,dts:l,data:i}),o+=i.length):o++;this.remuxer.remux(c,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=h.default.getID3Data(e,0);if(n&&void 0!==h.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(p.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),n=s;function s(e,t,r){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=r,this.remuxer=t}r.default=n},{22:22,25:25,46:46}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},e=e(30),s=e&&e.__esModule?e:{default:e},a=Math.pow(2,32)-1,n=(n(u,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(e,t,r,n){var i,a;e&&e.byteLength?(a={},(i=this.initData=u.parseInitSegment(e)).audio&&(a.audio={container:"audio/mp4",codec:t,initSegment:n?e:null}),i.video&&(a.video={container:"video/mp4",codec:r,initSegment:n?e:null}),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:a})):(t&&(this.audioCodec=t),r&&(this.videoCodec=r))}},{key:"append",value:function(e,t,r,n){var i=this.initData;i||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),i=this.initData);var a,o=this.initPTS;void 0===o&&(a=u.getStartDTS(i,e),this.initPTS=o=a-t,this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:o})),u.offsetStartDTS(i,e,o),o=u.getStartDTS(i,e),this.remuxer.remux(i.audio,i.video,null,null,o,r,n,e)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){if(8<=e.length){e=u.bin2str(e.subarray(4,8));return 0<=["moof","ftyp","styp"].indexOf(e)}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t}},{key:"writeUint32",value:function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}},{key:"findBox",value:function(e,t){var r,n,i,a,o,s=[];if(e.data?(a=e.start,n=e.end,e=e.data):(a=0,n=e.byteLength),!t.length)return null;for(r=a;r<n;)o=1<(i=u.readUint32(e,r))?r+i:n,u.bin2str(e.subarray(r+4,r+8))===t[0]&&(1===t.length?s.push({data:e,start:r+8,end:o}):(i=u.findBox({data:e,start:r+8,end:o},t.slice(1))).length&&(s=s.concat(i))),r=o;return s}},{key:"parseInitSegment",value:function(e){var i=[];return u.findBox(e,["moov","trak"]).forEach(function(e){var t,r,n=u.findBox(e,["tkhd"])[0];n&&(r=0===n.data[n.start]?12:20,t=u.readUint32(n,r),(n=u.findBox(e,["mdia","mdhd"])[0])&&(r=0===n.data[n.start]?12:20,r=u.readUint32(n,r),!(e=u.findBox(e,["mdia","hdlr"])[0])||(e={soun:"audio",vide:"video"}[u.bin2str(e.data.subarray(e.start+8,e.start+12))])&&(i[t]={timescale:r,type:e},i[e]={timescale:r,id:t})))}),i}},{key:"getStartDTS",value:function(r,e){var e=u.findBox(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),e=r[e].timescale||9e4;return(u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],r=u.readUint32(e,4);return 1===t&&(r*=Math.pow(2,32),r+=u.readUint32(e,8)),r})[0]||1/0)/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0}},{key:"offsetStartDTS",value:function(r,e,i){u.findBox(e,["moof","traf"]).map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),n=r[e].timescale||9e4;u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],r=u.readUint32(e,4);0===t?u.writeUint32(e,4,r-i*n):(r*=Math.pow(2,32),r+=u.readUint32(e,8),r-=i*n,t=Math.floor(r/(1+a)),r=Math.floor(r%(1+a)),u.writeUint32(e,4,t),u.writeUint32(e,8,r))})})})}}]),u);function u(e,t){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.remuxer=t}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{30:30}],25:[function(e,t,r){"use strict";var s={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){i=n+i*(10368e4/a.sampleRate),i={unit:t.subarray(r,r+a.frameLength),pts:i,dts:i};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(i),e.len+=a.frameLength,{sample:i,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=!!(2&e[t+2]);if(1!=r&&0!=i&&15!=i&&3!=a){i=1e3*s.BitratesMap[14*(3==r?3-n:3==n?3:4)+i-1],a=s.SamplingRateMap[3*(3==r?0:2==r?1:2)+a],o=o?1:0;return{sampleRate:a,channelCount:e[t+3]>>6==3?1:2,frameLength:3==n?(3==r?12:6)*i/a+o<<2:(3==r?144:72)*i/a+o|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4,n=t+(n=r&&r.frameLength?r.frameLength:n);if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}};t.exports=s},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},e=e(14),i=e&&e.__esModule?e:{default:e},n=(n(a,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(t,r,n,i){var a=t[r].unit,e=a.subarray(16,a.length-a.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),o=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e),a.set(e,16),i||o.decryptAacSamples(t,r+1,n)})}},{key:"decryptAacSamples",value:function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e}},{key:"decryptAvcSample",value:function(t,r,n,i,a,o){var s=this.discardEPB(a.data),e=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(e.buffer,function(e){a.data=u.getAvcDecryptedUnit(s,e),o||u.decryptAvcSamples(t,r,n+1,i)})}},{key:"decryptAvcSamples",value:function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}}}]),a);function a(e,t,r,n){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.decryptdata=r,this.discardEPB=n,this.decrypter=new i.default(e,t)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{14:14}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},h=o(e(17)),s=o(e(25)),L=o(e(30)),k=o(e(21)),i=o(e(26)),D=e(46),P=e(28);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return e&&e.__esModule?e:{default:e}}n(u,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new i.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:n,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=n}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,a,o,s,u,l=e.length,c=!1;this.contiguous=r;var d=this.pmtParsed,f=this._avcTrack,h=this._audioTrack,p=this._id3Track,g=f.id,v=h.id,y=p.id,m=this._pmtId,b=f.pesData,_=h.pesData,E=p.pesData,w=this._parsePAT,k=this._parsePMT,T=this._parsePES,S=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),A=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this);for(l-=l%188,i=0;i<l;i+=188)if(71===e[i]){if(a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2],1<(48&e[i+3])>>4){if((s=i+5+e[i+4])===i+188)continue}else s=i+4;switch(o){case g:a&&(b&&(u=T(b))&&S(u,!1),b={data:[],size:0}),b&&(b.data.push(e.subarray(s,i+188)),b.size+=i+188-s);break;case v:a&&(_&&(u=T(_))&&(h.isAAC?x:A)(u),_={data:[],size:0}),_&&(_.data.push(e.subarray(s,i+188)),_.size+=i+188-s);break;case y:a&&(E&&(u=T(E))&&O(u),E={data:[],size:0}),E&&(E.data.push(e.subarray(s,i+188)),E.size+=i+188-s);break;case 0:a&&(s+=e[s]+1),m=this._pmtId=w(e,s);break;case m:a&&(s+=e[s]+1);var R=k(e,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=R.avc)&&(f.id=g),0<(v=R.audio)&&(h.id=v,h.isAAC=R.isAAC),0<(y=R.id3)&&(p.id=y),c&&!d&&(D.logger.log("reparse from beginning"),c=!1,i=-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(L.default.ERROR,{type:P.ErrorTypes.MEDIA_ERROR,details:P.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(u=T(b))?(S(u,!0),f.pesData=null):f.pesData=b,_&&(u=T(_))?((h.isAAC?x:A)(u),h.pesData=null):(_&&_.size&&D.logger.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=_),E&&(u=T(E))?(O(u),p.pesData=null):p.pesData=E,null==this.sampleAes?this.remuxer.remux(h,f,p,this._txtTrack,t,r,n):this.decryptAndRemux(h,f,p,this._txtTrack,t,r,n)}},{key:"decryptAndRemux",value:function(e,t,r,n,i,a,o){var s;e.samples&&e.isAAC?(s=this).sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)}):this.decryptAndRemuxAvc(e,t,r,n,i,a,o)}},{key:"decryptAndRemuxAvc",value:function(e,t,r,n,i,a,o){var s;t.samples?(s=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,a,o)}):this.remuxer.remux(e,t,r,n,i,a,o)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r,n){var i,a={audio:-1,avc:-1,id3:-1,isAAC:!0},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){D.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=i);break;case 21:-1===a.id3&&(a.id3=i);break;case 219:if(!n){D.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=i);break;case 3:case 4:r?-1===a.audio&&(a.audio=i,a.isAAC=!1):D.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:D.logger.warn("HEVC stream type found, not supported for now");break;default:D.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a}},{key:"_parsePES",value:function(e){var t,r,n,i,a,o,s=0,u=e.data;if(!e||0===e.size)return null;for(;u[0].length<19&&1<u.length;){var l=new Uint8Array(u[0].length+u[1].length);l.set(u[0]),l.set(u[1],u[0].length),u[0]=l,u.splice(1,1)}if(1!==((t=u[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&(4294967295<(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)&&(i-=8589934592),64&n?(4294967295<(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(a-=8589934592),54e5<i-a&&(D.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a)):a=i),o=(n=t[8])+9,e.size-=o;for(var c=new Uint8Array(e.size),d=0,f=u.length;d<f;d++){var h=(t=u[d]).byteLength;if(o){if(h<o){o-=h;continue}t=t.subarray(o),h-=o,o=0}c.set(t,s),s+=h}return r&&(r-=n+3),{data:c,pts:i,dts:a,len:r}}},{key:"pushAccesUnit",value:function(e,t){var r,n;e.units.length&&e.frame&&(n=(r=t.samples).length,!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++),e.debug.length&&D.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(h,e){function p(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}}var g,v,y,m=this,b=this._avcTrack,t=this._parseAVCNALu(h.data),_=this.avcSample,E=!1,w=this.pushAccesUnit.bind(this);h.data=null,_&&t.length&&(w(_,b),_=this.avcSample=p(!1,h.pts,h.dts,"")),t.forEach(function(e){switch(e.type){case 1:v=!0,_.frame=!0;var t=e.data;E&&4<t.length&&(2!==(l=new k.default(t).readSliceType())&&4!==l&&7!==l&&9!==l||(_.key=!0));break;case 5:v=!0,(_=_||(m.avcSample=p(!0,h.pts,h.dts,""))).key=!0,_.frame=!0;break;case 6:v=!0,(g=new k.default(m.discardEPB(e.data))).readUByte();for(var r=0,n=0,i=!1,a=0;!i&&1<g.bytesAvailable;){for(r=0;r+=a=g.readUByte(),255===a;);for(n=0;n+=a=g.readUByte(),255===a;);if(4===r&&0!==g.bytesAvailable){if(i=!0,181===g.readUByte()&&49===g.readUShort()&&1195456820===g.readUInt()&&3===g.readUByte()){var o=g.readUByte(),s=31&o,u=[o,g.readUByte()];for(y=0;y<s;y++)u.push(g.readUByte()),u.push(g.readUByte()),u.push(g.readUByte());m._insertSampleInOrder(m._txtTrack.samples,{type:3,pts:h.pts,bytes:u})}}else if(n<g.bytesAvailable)for(y=0;y<n;y++)g.readUByte()}break;case 7:if(E=v=!0,!b.sps){var l=(g=new k.default(e.data)).readSPS();b.width=l.width,b.height=l.height,b.pixelRatio=l.pixelRatio,b.sps=[e.data],b.duration=m._duration;var c=e.data.subarray(1,4),d="avc1.";for(y=0;y<3;y++){var f=c[y].toString(16);d+=f=f.length<2?"0"+f:f}b.codec=d}break;case 8:v=!0,b.pps||(b.pps=[e.data]);break;case 9:v=!1,_&&w(_,b),_=m.avcSample=p(!1,h.pts,h.dts,"");break;case 12:v=!1;break;default:v=!1,_&&(_.debug+="unknown NAL "+e.type+" ")}_&&v&&_.units.push(e)}),e&&_&&(w(_,b),this.avcSample=null)}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(0<r){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;0<=n;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e,t=this.avcSample,r=void 0;return r=(t=!t||0===t.units.length?(e=this._avcTrack.samples)[e.length-1]:t)?(t=t.units)[t.length-1]:r}},{key:"_parseAVCNALu",value:function(e){var t,r,n,i,a,o,s,u,l=0,c=e.byteLength,d=this._avcTrack,f=d.naluState||0,h=f,p=[],g=-1;for(-1===f&&(i=31&e[g=0],f=0,l=1);l<c;)t=e[l++],f=f?1!==f?t?1===t?(0<=g?(n={data:e.subarray(g,l-f-1),type:i},p.push(n)):(a=this._getLastNalUnit())&&(h&&l<=4-h&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-h)),0<(r=l-f-1))&&((o=new Uint8Array(a.data.byteLength+r)).set(a.data,0),o.set(e.subarray(0,r),a.data.byteLength),a.data=o),l<c?(i=31&e[g=l],0):-1):0:3:t?0:2:t?0:1;return 0<=g&&0<=f&&(n={data:e.subarray(g,c),type:i,state:f},p.push(n)),0===p.length&&(s=this._getLastNalUnit())&&((u=new Uint8Array(s.data.byteLength+e.byteLength)).set(s.data,0),u.set(e,s.data.byteLength),s.data=u),d.naluState=f,p}},{key:"discardEPB",value:function(e){for(var t=e.byteLength,r=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;for(var i=t-r.length,a=new Uint8Array(i),o=0,n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),a[n]=e[o];return a}},{key:"_parseAACPES",value:function(e){var t,r,n,i,a,o,s=this._audioTrack,u=e.data,l=e.pts,c=this.aacOverFlow,d=this.aacLastPTS;for(c&&((e=new Uint8Array(c.byteLength+u.byteLength)).set(c,0),e.set(u,c.byteLength),u=e),r=0,i=u.length;r<i-1&&!h.default.isHeader(u,r);r++);if(!r||(o=r<i-1?(a="AAC PES did not start with ADTS header,offset:"+r,!1):(a="no ADTS header found in AAC PES",!0),D.logger.warn("parsing error:"+a),this.observer.trigger(L.default.ERROR,{type:P.ErrorTypes.MEDIA_ERROR,details:P.ErrorDetails.FRAG_PARSING_ERROR,fatal:o,reason:a}),!o)){for(h.default.initTrackConfig(s,this.observer,u,r,this.audioCodec),t=0,o=h.default.getFrameDuration(s.samplerate),c&&d&&(o=d+o,1<Math.abs(o-l)&&(D.logger.log("AAC: align PTS for overlapping frames by "+Math.round((o-l)/90)),l=o));r<i;)if(h.default.isHeader(u,r)&&r+5<i){var f=h.default.appendFrame(s,u,r,l,t);if(!f)break;r+=f.length,n=f.sample.pts,t++}else r++;c=r<i?u.subarray(r,i):null,this.aacOverFlow=c,this.aacLastPTS=n}}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,r=t.length,n=0,i=0,a=e.pts;i<r;)if(s.default.isHeader(t,i)){var o=s.default.appendFrame(this._audioTrack,t,i,a,n);if(!o)break;i+=o.length,n++}else i++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return 564<=e.length&&71===e[0]&&71===e[188]&&71===e[376]}}]),n=u;function u(e,t,r,n){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}r.default=n},{17:17,21:21,25:25,26:26,28:28,30:30,46:46}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},a=e(46),o=e(28),e=e(30),s=e&&e.__esModule?e:{default:e};function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i(l,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===n(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){try{!function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}.call(this,e,t).call()}catch(t){a.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(s.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),i=l;function l(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}r.default=i},{28:28,30:30,46:46}],30:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],32:[function(e,t,r){"use strict";t.exports={isBuffered:function(e,t){if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0;return!1},bufferInfo:function(e,t,r){if(e){for(var n=e.buffered,i=[],a=0;a<n.length;a++)i.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(i,t,r)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var n,i,a,o,s,u=[];for(e.sort(function(e,t){return e.start-t.start||t.end-e.end}),s=0;s<e.length;s++){var l,c=u.length;c?(l=u[c-1].end,e[s].start-l<r?e[s].end>l&&(u[c-1].end=e[s].end):u.push(e[s])):u.push(e[s])}for(n=s=0,i=a=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(d<=t+r&&t<f)i=d,n=(a=f)-t;else if(t+r<d){o=d;break}}return{len:n,start:i,end:a,nextStart:o}}}},{}],33:[function(e,t,r){"use strict";var h=e(46),p={mergeDetails:function(e,t){var r,n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=e.fragments,s=t.fragments,u=0;if(i<n)t.PTSKnown=!1;else{for(var l=n;l<=i;l++){var c=o[a+l],d=s[l];d&&c&&(u=c.cc-d.cc,isNaN(c.startPTS)||(d.start=d.startPTS=c.startPTS,d.endPTS=c.endPTS,d.duration=c.duration,d.backtracked=c.backtracked,d.dropped=c.dropped,r=d))}if(u)for(h.logger.log("discontinuity sliding from playlist, take drift into account"),l=0;l<s.length;l++)s[l].cc+=u;if(r)p.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(0<=a&&a<o.length)for(var f=o[a].start,l=0;l<s.length;l++)s[l].start+=f;t.PTSKnown=e.PTSKnown}},updateFragPTSDTS:function(e,t,r,n,i,a){var o=r;isNaN(t.startPTS)||(s=Math.abs(t.startPTS-r),isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS));var s=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.startDTS=i,t.endDTS=a,t.duration=n-r;var u,l,r=t.sn;if(!e||r<e.startSN||r>e.endSN)return 0;for(r=r-e.startSN,(u=e.fragments)[r]=t,l=r;0<l;l--)p.updatePTS(u,l,l-1);for(l=r;l<u.length-1;l++)p.updatePTS(u,l,l+1);return e.PTSKnown=!0,s},updatePTS:function(e,t,r){var n=e[t],i=e[r],e=i.startPTS;isNaN(e)?i.start=t<r?n.start+n.duration:Math.max(n.start-i.duration,0):t<r?(n.duration=e-n.start,n.duration<0&&h.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-e,i.duration<0&&h.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=p},{46:46}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},i=l(e(2)),a=l(e(30)),o=e(28),v=l(e(38)),y=l(e(36)),m=l(e(37)),b=l(e(11)),_=l(e(10)),E=l(e(9)),w=e(46),k=l(e(1)),s=e(4);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}n(T,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return e&&t}},{key:"version",get:function(){return"0.7.11"}},{key:"Events",get:function(){return a.default}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return T.defaultConfig||s.hlsDefaultConfig},set:function(e){T.defaultConfig=e}}]),n(T,[{key:"destroy",value:function(){w.logger.log("destroy"),this.trigger(a.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){w.logger.log("attachMedia"),this.media=e,this.trigger(a.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){w.logger.log("detachMedia"),this.trigger(a.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=i.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),w.logger.log("loadSource:"+e),this.url=e,this.trigger(a.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;w.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})}},{key:"stopLoad",value:function(){w.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){w.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){w.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){w.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){w.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){w.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){w.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){w.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){w.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),n=T;function T(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);var r,n=T.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(r in n)r in e||(e[r]=n[r]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,w.enableLogs)(e.debug),this.config=e,this._autoLevelCapping=-1;var i=this.observer=new k.default;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[e].concat(r))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i);var a=this.abrController=new e.abrController(this),o=new e.bufferController(this),s=new e.capLevelController(this),u=new e.fpsController(this),l=new v.default(this),c=new y.default(this),d=new m.default(this),f=new E.default(this),h=[this.levelController=new _.default(this),this.streamController=new b.default(this)],p=e.audioStreamController;p&&h.push(new p(this)),this.networkControllers=h;var g=[l,c,d,a,o,s,u,f];(p=e.audioTrackController)&&(f=new p(this),this.audioTrackController=f,g.push(f)),(p=e.subtitleTrackController)&&(p=new p(this),this.subtitleTrackController=p,g.push(p)),[e.subtitleStreamController,e.timelineController].forEach(function(e){e&&g.push(new e(t))}),this.coreComponents=g}r.default=n},{1:1,10:10,11:11,2:2,28:28,30:30,36:36,37:37,38:38,4:4,46:46,9:9}],35:[function(e,t,r){"use strict";t.exports=e(34).default},{34:34}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},i=l(e(30)),a=l(e(29)),o=e(28),s=e(46);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(c,a.default),n(c,[{key:"destroy",value:function(){var e,t=this.loaders;for(e in t){var r=t[e];r&&r.destroy()}this.loaders={},a.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=this.hls.config;t.loaded=0,n&&(s.logger.warn("abort previous fragment loader for type:"+r),n.abort());var n=this.loaders[r]=t.loader=new(void 0!==i.fLoader?i.fLoader:i.loader)(i),e=void 0,e={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},r=t.byteRangeStartOffset,t=t.byteRangeEndOffset;isNaN(r)||isNaN(t)||(e.rangeStart=r,e.rangeEnd=t),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(e,t,i)}},{key:"loadsuccess",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e=e.data,r=r.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:e,frag:r,stats:t,networkDetails:n})}},{key:"loaderror",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})}},{key:"loadtimeout",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})}},{key:"loadprogress",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,t=t.frag;t.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:t,stats:e,networkDetails:n})}}]),n=c;function c(e){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,i.default.FRAG_LOADING));return e.loaders={},e}r.default=n},{28:28,29:29,30:30,46:46}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},o=l(e(30)),i=l(e(29)),a=e(28),s=e(46);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(c,i.default),n(c,[{key:"destroy",value:function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},i.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=t.decryptdata,a=i.uri;a!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new e.loader(e),this.decrypturl=a,this.decryptkey=null,r={url:a,frag:t,responseType:"arraybuffer"},a={timeout:e.fragLoadingTimeOut,maxRetry:e.fragLoadingMaxRetry,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},e={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(r,a,e)):this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){r=r.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),n=c;function c(e){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,o.default.KEY_LOADING));return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}r.default=n},{28:28,29:29,30:30,46:46}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},i=s(e(2)),d=s(e(30)),a=s(e(29)),f=e(28),w=s(e(42)),k=e(46);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,l=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),S=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,x=(n(g,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=i.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),g),A=(n(p,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new x).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=i.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){var e,t,r;return this._byteRange||(e=this._byteRange=[],this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,e[0]=r||0):e[0]=parseInt(t[1]),e[1]=parseInt(t[0])+e[0])),this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),p),n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,a.default),n(h,[{key:"destroy",value:function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},a.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var n=r.context;if(n&&n.url===e)return void k.logger.trace("playlist request ongoing");k.logger.warn("abort previous loader for type:"+t.type),r.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,n=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,n=i.manifestLoadingMaxRetryTimeout):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,n=i.levelLoadingMaxRetryTimeout,k.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader=new(void 0!==i.pLoader?i.pLoader:i.loader)(i),t.url=e,t.responseType="",s={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:n},n={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,s,n)}},{key:"resolve",value:function(e,t){return i.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r,n=[];for(c.lastIndex=0;null!=(r=c.exec(e));){var i={},a=i.attrs=new w.default(r[1]);i.url=this.resolve(r[2],t);var o=a.decimalResolution("RESOLUTION");if(o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME,s=a.CODECS)for(var s=s.split(/[ ,]+/),u=0;u<s.length;u++){var l=s[u];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}n.push(i)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=[],o=0;for(l.lastIndex=0;null!=(n=l.exec(e));){var s={},u=new w.default(n[1]);u.TYPE===r&&(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=r,s.default="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=this.resolve(u.URI,t)),s.lang=u.LANGUAGE,s.name||(s.name=s.lang),i&&(s.audioCodec=i),s.id=o++,a.push(s))}return a}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return 2<r.length?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,n){var i,a,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new x,c=0,d=null,f=new A;for(T.lastIndex=0;null!==(i=T.exec(e));){var h,p=i[1];if(p){f.duration=parseFloat(p);var g=(" "+i[2]).slice(1);f.title=g||null,f.tagList.push(g?["INF",p,g]:["INF",p])}else if(i[3])isNaN(f.duration)||(p=o++,f.type=n,f.start=s,f.levelkey=l,f.sn=p,f.level=r,f.cc=c,f.baseurl=t,f.relurl=(" "+i[3]).slice(1),u.fragments.push(f),s+=(d=f).duration,f=new A);else if(i[4])f.rawByteRange=(" "+i[4]).slice(1),d&&(h=d.byteRangeEndOffset)&&(f.lastByteRangeEndOffset=h);else if(i[5])f.rawProgramDateTime=(" "+i[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(i=i[0].match(S),a=1;a<i.length&&void 0===i[a];a++);var v=(" "+i[a+1]).slice(1),y=(" "+i[a+2]).slice(1);switch(i[a]){case"#":f.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":u.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(v);break;case"TARGETDURATION":u.targetduration=parseFloat(v);break;case"VERSION":u.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(v);break;case"KEY":var m=new w.default(v),b=m.enumeratedString("METHOD"),_=m.URI,m=m.hexadecimalInteger("IV");b&&(l=new x,_&&0<=["AES-128","SAMPLE-AES"].indexOf(b)&&(l.method=b,l.baseuri=t,l.reluri=_,l.key=null,l.iv=m));break;case"START":var E=new w.default(v).decimalFloatingPoint("TIME-OFFSET");isNaN(E)||(u.startTimeOffset=E);break;case"MAP":E=new w.default(v);f.relurl=E.URI,f.rawByteRange=E.BYTERANGE,f.baseurl=t,f.level=r,f.type=n,f.sn="initSegment",u.initSegment=f,f=new A;break;default:k.logger.warn("line parsed but not handled: "+i)}}}return(f=d)&&!f.relurl&&(u.fragments.pop(),s-=f.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(e,t,r){var n,i,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=e.data,s=e.url,u=r.type,l=r.id,c=r.level,e=this.hls;(this.loaders[u]=void 0)!==s&&0!==s.indexOf("data:")||(s=r.url),t.tload=performance.now(),0===o.indexOf("#EXTM3U")?0<o.indexOf("#EXTINF:")?(r="audioTrack"!==u&&"subtitleTrack"!==u,n=isNaN(c)?isNaN(l)?0:l:c,(n=this.parseLevelPlaylist(o,s,n,"audioTrack"===u?"audio":"subtitleTrack"===u?"subtitle":"main")).tload=t.tload,"manifest"===u&&e.trigger(d.default.MANIFEST_LOADED,{levels:[{url:s,details:n}],audioTracks:[],url:s,stats:t,networkDetails:a}),t.tparsed=performance.now(),n.targetduration?r?e.trigger(d.default.LEVEL_LOADED,{details:n,level:c||0,id:l||0,stats:t,networkDetails:a}):"audioTrack"===u?e.trigger(d.default.AUDIO_TRACK_LOADED,{details:n,id:l,stats:t,networkDetails:a}):"subtitleTrack"===u&&e.trigger(d.default.SUBTITLE_TRACK_LOADED,{details:n,id:l,stats:t,networkDetails:a}):e.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"invalid targetduration",networkDetails:a})):(n=this.parseMasterPlaylist(o,s)).length?(l=this.parseMasterPlaylistMedia(o,s,"AUDIO",n[0].audioCodec),o=this.parseMasterPlaylistMedia(o,s,"SUBTITLES"),l.length&&(i=!1,l.forEach(function(e){e.url||(i=!0)}),!1===i&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(k.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main"}))),e.trigger(d.default.MANIFEST_LOADED,{levels:n,audioTracks:l,subtitles:o,url:s,stats:t,networkDetails:a})):e.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no level found in manifest",networkDetails:a}):e.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no EXTM3U delimiter",networkDetails:a})}},{key:"loaderror",value:function(e,t){var r,n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":r=f.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=f.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:a.url,loader:a,response:e,context:t,networkDetails:i})}},{key:"loadtimeout",value:function(e,t){var r,n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":r=f.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=f.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:a.url,loader:a,context:t,networkDetails:i})}}]),h);function h(e){u(this,h);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,d.default.MANIFEST_LOADING,d.default.LEVEL_LOADING,d.default.AUDIO_TRACK_LOADING,d.default.SUBTITLE_TRACK_LOADING));return e.loaders={},e}function p(){u(this,p),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function g(){u(this,g),this.method=null,this.key=null,this.iv=null,this._uri=null}r.default=n},{2:2,28:28,29:29,30:30,42:42,46:46}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},a=Math.pow(2,32)-1,n=(n(d,null,[{key:"init",value:function(){for(var e in d.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})d.types.hasOwnProperty(e)&&(d.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);d.HDLR_TYPES={video:t,audio:r};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);d.STTS=d.STSC=d.STCO=i,d.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);d.FTYP=d.box(d.types.ftyp,t,i,t,r),d.DINF=d.box(d.types.dinf,d.box(d.types.dref,n))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t}},{key:"hdlr",value:function(e){return d.box(d.types.hdlr,d.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return d.box(d.types.mdat,e)}},{key:"mdhd",value:function(e,t){t*=e;var r=Math.floor(t/(1+a)),t=Math.floor(t%(1+a));return d.box(d.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"mdia",value:function(e){return d.box(d.types.mdia,d.mdhd(e.timescale,e.duration),d.hdlr(e.type),d.minf(e))}},{key:"mfhd",value:function(e){return d.box(d.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?d.box(d.types.minf,d.box(d.types.smhd,d.SMHD),d.DINF,d.stbl(e)):d.box(d.types.minf,d.box(d.types.vmhd,d.VMHD),d.DINF,d.stbl(e))}},{key:"moof",value:function(e,t,r){return d.box(d.types.moof,d.mfhd(e),d.traf(r,t))}},{key:"moov",value:function(e){for(var t=e.length,r=[];t--;)r[t]=d.trak(e[t]);return d.box.apply(null,[d.types.moov,d.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(d.mvex(e)))}},{key:"mvex",value:function(e){for(var t=e.length,r=[];t--;)r[t]=d.trex(e[t]);return d.box.apply(null,[d.types.mvex].concat(r))}},{key:"mvhd",value:function(e,t){t*=e;var r=Math.floor(t/(1+a)),t=Math.floor(t%(1+a)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d.box(d.types.mvhd,t)}},{key:"sdtp",value:function(e){for(var t,r=e.samples||[],n=new Uint8Array(4+r.length),i=0;i<r.length;i++)t=r[i].flags,n[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return d.box(d.types.sdtp,n)}},{key:"stbl",value:function(e){return d.box(d.types.stbl,d.stsd(e),d.box(d.types.stts,d.STTS),d.box(d.types.stsc,d.STSC),d.box(d.types.stsz,d.STSZ),d.box(d.types.stco,d.STCO))}},{key:"avc1",value:function(e){for(var t,r,n=[],i=[],a=0;a<e.sps.length;a++)r=(t=e.sps[a]).byteLength,n.push(r>>>8&255),n.push(255&r),n=n.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)r=(t=e.pps[a]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(t));var o=d.box(d.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(i))),s=e.width,u=e.height,l=e.pixelRatio[0],c=e.pixelRatio[1];return d.box(d.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,d.box(d.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d.box(d.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,c>>24,c>>16&255,c>>8&255,255&c])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var t=e.samplerate;return d.box(d.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),d.box(d.types.esds,d.esds(e)))}},{key:"mp3",value:function(e){var t=e.samplerate;return d.box(d.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}},{key:"stsd",value:function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?d.box(d.types.stsd,d.STSD,d.mp4a(e)):d.box(d.types.stsd,d.STSD,d.mp3(e)):d.box(d.types.stsd,d.STSD,d.avc1(e))}},{key:"tkhd",value:function(e){var t=e.id,r=e.duration*e.timescale,n=e.width,i=e.height,e=Math.floor(r/(1+a)),r=Math.floor(r%(1+a));return d.box(d.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}},{key:"traf",value:function(e,t){var r=d.sdtp(e),n=e.id,i=Math.floor(t/(1+a)),t=Math.floor(t%(1+a));return d.box(d.types.traf,d.box(d.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),d.box(d.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t])),d.trun(e,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,d.box(d.types.trak,d.tkhd(e),d.mdia(e))}},{key:"trex",value:function(e){e=e.id;return d.box(d.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,t){var r,n,i,a,o,s=e.samples||[],u=s.length,e=12+16*u,l=new Uint8Array(e);for(l.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),r=0;r<u;r++)n=(o=s[r]).duration,i=o.size,a=o.flags,o=o.cts,l.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*r);return d.box(d.types.trun,l)}},{key:"initSegment",value:function(e){d.types||d.init();var t=d.moov(e);return(e=new Uint8Array(d.FTYP.byteLength+t.byteLength)).set(d.FTYP),e.set(t,d.FTYP.byteLength),e}}]),d);function d(){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},F=a(e(31)),H=a(e(30)),W=e(46),z=a(e(39)),V=e(28);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}n(o,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,n,i,a,o){var s,u,l,c,d,f,h;this.ISGenerated?o&&(d=this._initPTS,s=this._PTSNormalize,u=e.inputTimeScale||t.inputTimeScale,c=f=1/0,(l=e.samples).length&&(f=c=s(l[0].pts-u*i,d)),(l=t.samples).length&&(l=l[0],f=Math.min(f,s(l.pts-u*i,d)),c=Math.min(c,s(l.dts-u*i,d))),f!==1/0&&(d=d-f,Math.abs(d)>10*u&&(W.logger.warn("timestamp inconsistency, "+(d/u).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=f,this._initDTS=c,this.observer.trigger(H.default.INIT_PTS_FOUND,{initPTS:f})))):this.generateIS(e,t,i),this.ISGenerated&&(e.samples.length?(e.timescale||(W.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i)),f=this.remuxAudio(e,i,a,o),t.samples.length&&(h=void 0,f&&(h=f.endPTS-f.startPTS),t.timescale||(W.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,a,h,o))):(h=void 0,(h=t.samples.length?this.remuxVideo(t,i,a,o):h)&&e.codec&&this.remuxEmptyAudio(e,i,a,h))),r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(H.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var n,i,a=this.observer,o=e.samples,s=t.samples,u=this.typeSupported,l="audio/mp4",c={},d={tracks:c},f=void 0===this._initPTS;f&&(n=i=1/0),e.config&&o.length&&(e.timescale=e.samplerate,W.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(l="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),c.audio={container:l,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:z.default.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(n=i=o[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&s.length&&(e=t.inputTimeScale,t.timescale=e,c.video={container:"video/mp4",codec:t.codec,initSegment:z.default.initSegment([t]),metadata:{width:t.width,height:t.height}},f&&(n=Math.min(n,s[0].pts-e*r),i=Math.min(i,s[0].dts-e*r),this.observer.trigger(H.default.INIT_PTS_FOUND,{initPTS:n}))),Object.keys(c).length?(a.trigger(H.default.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,f&&(this._initPTS=n,this._initDTS=i)):a.trigger(H.default.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,n,i){var a,o,s=8,u=e.timescale,l=e.samples,c=[],d=l.length,f=this._PTSNormalize,h=this._initDTS,p=this.nextAvcDts,g=this.isSafari;g&&(r|=l.length&&p&&(i&&Math.abs(t-p/u)<.1||Math.abs(l[0].pts-p-h)<u/5)),r||(p=t*u),l.forEach(function(e){e.pts=f(e.pts-h,p),e.dts=f(e.dts-h,p)}),l.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var v=l.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(v<0){W.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(v/90)+" ms to overcome this issue");for(var y=0;y<l.length;y++)l[y].dts+=v}var i=l[0],m=Math.max(i.dts,0),b=Math.max(i.pts,0),t=Math.round((m-p)/90);r&&t&&(1<t?W.logger.log("AVC:"+t+" ms hole between fragments detected,filling it"):t<-1&&W.logger.log("AVC:"+-t+" ms overlapping between fragments detected"),m=p,l[0].dts=m,b=Math.max(b-t,p),l[0].pts=b,W.logger.log("Video/PTS/DTS adjusted: "+Math.round(b/90)+"/"+Math.round(m/90)+",delta:"+t+" ms")),i=l[l.length-1],r=Math.max(i.dts,0),t=Math.max(i.pts,0,r),g&&(a=Math.round((r-m)/(l.length-1)));for(var _=0,E=0,w=0;w<d;w++){for(var k=l[w],T=k.units,S=T.length,x=0,A=0;A<S;A++)x+=T[A].data.length;E+=x,_+=S,k.length=x,k.dts=g?m+w*a:Math.max(k.dts,m),k.pts=Math.max(k.pts,k.dts)}i=E+4*_+8;try{o=new Uint8Array(i)}catch(e){return void this.observer.trigger(H.default.ERROR,{type:V.ErrorTypes.MUX_ERROR,details:V.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:i,reason:"fail allocating video mdat "+i})}var O=new DataView(o.buffer);O.setUint32(0,i),o.set(z.default.types.mdat,4);for(var R=0;R<d;R++){for(var L,D,P,C=l[R],I=C.units,M=0,F=void 0,N=0,j=I.length;N<j;N++){var U=I[N],B=U.data,U=U.data.byteLength;O.setUint32(s,U),s+=4,o.set(B,s),s+=U,M+=4+U}F=g?Math.max(0,a*Math.round((C.pts-C.dts)/a)):(R<d-1?a=l[R+1].dts-C.dts:(P=this.config,L=C.dts-l[0<R?R-1:R].dts,P.stretchShortVideoTrack?(D=P.maxBufferHole,P=P.maxSeekHole,Math.floor(Math.min(D,P)*u)<(P=(n?b+n*u:this.nextAudioPts)-C.pts)?((a=P-L)<0&&(a=L),W.logger.log("It is approximately "+P/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=L):a=L),Math.round(C.pts-C.dts)),c.push({size:M,duration:a,cts:F,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:C.key?2:1,isNonSync:C.key?0:1}})}this.nextAvcDts=r+a;var G,r=e.dropped;e.len=0,e.nbNalu=0,e.dropped=0,c.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((G=c[0].flags).dependsOn=2,G.isNonSync=0),e.samples=c,G=z.default.moof(e.sequenceNumber++,m,e),e.samples=[];r={data1:G,data2:o,startPTS:b/u,endPTS:(t+a)/u,startDTS:m/u,endDTS:this.nextAvcDts/u,type:"video",nb:c.length,dropped:r};return this.observer.trigger(H.default.FRAG_PARSING_DATA,r),r}},{key:"remuxAudio",value:function(e,t,r,n){var i,a,o,s,u,l=e.inputTimeScale,c=l/e.timescale,d=(e.isAAC?1024:1152)*c,f=this._PTSNormalize,h=this._initDTS,p=!e.isAAC&&this.typeSupported.mpeg,g=e.samples,v=[],y=this.nextAudioPts;if((r|=g.length&&y&&(n&&Math.abs(t-y/l)<.1||Math.abs(g[0].pts-y-h)<20*d))||(y=t*l),g.forEach(function(e){e.pts=e.dts=f(e.pts-h,y)}),g.sort(function(e,t){return e.pts-t.pts}),n&&e.isAAC)for(var m=0,b=y;m<g.length;){var _=g[m],E=_.pts-b,w=Math.abs(1e3*E/l);if(E<=-d)W.logger.warn("Dropping 1 audio frame @ "+(b/l).toFixed(3)+"s due to "+w+" ms overlap."),g.splice(m,1),e.len-=_.unit.length;else if(d<=E&&w<1e4&&b){var k=Math.round(E/d);W.logger.warn("Injecting "+k+" audio frame @ "+(b/l).toFixed(3)+"s due to "+Math.round(1e3*E/l)+" ms gap.");for(var T=0;T<k;T++){var S=Math.max(b,0);(a=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(W.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=_.unit.subarray()),g.splice(m,0,{unit:a,pts:S,dts:S}),e.len+=a.length,b+=d,m++}_.pts=_.dts=b,b+=d,m++}else Math.abs(E),_.pts=_.dts=b,b+=d,m++}for(var x=0,A=g.length;x<A;x++){var O=g[x],R=O.unit,O=O.pts;if(void 0!==u)i.duration=Math.round((O-u)/c);else{var L=Math.round(1e3*(O-y)/l),D=0;if(r&&e.isAAC&&L){if(0<L&&L<1e4)D=Math.round((O-y)/d),W.logger.log(L+" ms hole between AAC samples detected,filling it"),0<D&&((a=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a=R.subarray()),e.len+=D*a.length);else if(L<-12){W.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(y/l).toFixed(3)+"s/"+(O/l).toFixed(3)+"s/"+-L+"ms"),e.len-=R.byteLength;continue}O=y}if(s=Math.max(0,O),!(0<e.len))return;var L=p?e.len:e.len+8,P=p?0:8;try{o=new Uint8Array(L)}catch(e){return void this.observer.trigger(H.default.ERROR,{type:V.ErrorTypes.MUX_ERROR,details:V.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating audio mdat "+L})}p||(new DataView(o.buffer).setUint32(0,L),o.set(z.default.types.mdat,4));for(var C=0;C<D;C++)(a=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(W.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=R.subarray()),o.set(a,P),P+=a.byteLength,i={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},v.push(i)}o.set(R,P);L=R.byteLength;P+=L,v.push(i={size:L,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),u=O}var I=0,M=v.length;if(2<=M&&(I=v[M-2].duration,i.duration=I),M){this.nextAudioPts=y=u+c*I,e.len=0,e.samples=v,t=p?new Uint8Array:z.default.moof(e.sequenceNumber++,s/c,e),e.samples=[];n=s/l,I=y/l,M={data1:t,data2:o,startPTS:n,endPTS:I,startDTS:n,endDTS:I,type:"audio",nb:M};return this.observer.trigger(H.default.FRAG_PARSING_DATA,M),M}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,n){var i=e.inputTimeScale,a=i/(e.samplerate||i),o=this.nextAudioPts,s=(void 0!==o?o:n.startDTS*i)+this._initDTS,i=n.endDTS*i+this._initDTS,u=1024*a,l=Math.ceil((i-s)/u),c=F.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(W.logger.warn("remux empty Audio"),c){for(var d=[],f=0;f<l;f++){var h=s+f*u;d.push({unit:c,pts:h,dts:h}),e.len+=c.length}e.samples=d,this.remuxAudio(e,t,r)}else W.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var r,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(r=e.samples[s]).pts=(r.pts-a)/i,r.dts=(r.dts-o)/i;this.observer.trigger(H.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(r=e.samples[o]).pts=(r.pts-a)/i;this.observer.trigger(H.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=r;return e}}]),n=o;function o(e,t,r,n){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e,this.config=t,this.typeSupported=r;r=navigator.userAgent;this.isSafari=n&&-1<n.indexOf("Apple")&&r&&!r.match("CriOS"),this.ISGenerated=!1}r.default=n},{28:28,30:30,31:31,39:39,46:46}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},e=e(30),c=e&&e.__esModule?e:{default:e},n=(n(i,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,n,i,a,o,s){var u=this.observer,l="";e&&(l+="audio"),t&&(l+="video"),u.trigger(c.default.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:l,nb:1,dropped:0}),u.trigger(c.default.FRAG_PARSED)}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.observer=e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{30:30}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=(function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}(o,[{key:"decimalInteger",value:function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"hexadecimalInteger",value:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){e=n.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(i.lastIndex=0;null!==(t=i.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r}}]),o);function o(e){for(var t in function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),e="string"==typeof e?o.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=a},{}],43:[function(e,t,r){"use strict";t.exports={search:function(e,t){for(var r,n,i=0,a=e.length-1;i<=a;){var o=t(n=e[r=(i+a)/2|0]);if(0<o)i=1+r;else{if(!(o<0))return n;a=r-1}}return null}}},{}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},e=e(45),i=e&&e.__esModule?e:{default:e},n=(n(a,[{key:"sample",value:function(e,t){t=8e3*t/(e=Math.max(e,this.minDelayMs_)),e/=1e3;this.fast_.sample(e,t),this.slow_.sample(e,t)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),a);function a(e,t,r,n){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new i.default(t),this.fast_=new i.default(r)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{45:45}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(i,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(a){var o=self.console[a];return o?function(){for(var e,t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=(e=a,t=n[0],"["+e+"] > "+t)),o.apply(self.console,n)}:i}r.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":n(e))){!function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach(function(e){o[e]=t[e]?t[e].bind(t):s(e)})}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},r.logger=o},{}],47:[function(e,t,r){"use strict";t.exports={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},{}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},s=e(46),n=(n(i,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e=this.context,t="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(r){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},{key:"readystatechange",value:function(e){var t,r=e.currentTarget,n=r.readyState,i=this.stats,a=this.context,o=this.config;!i.aborted&&2<=n&&(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n?200<=(t=r.status)&&t<300?(i.tload=Math.max(i.tfirst,performance.now()),n=e=void 0,n="arraybuffer"===a.responseType?(e=r.response).byteLength:(e=r.responseText).length,i.loaded=i.total=n,e={url:r.responseURL,data:e},this.callbacks.onSuccess(e,i,a,r)):i.retry>=o.maxRetry||400<=t&&t<499?(s.logger.error(t+" while loading "+a.url),this.callbacks.onError({code:t,text:r.statusText},a,r)):(s.logger.warn(t+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))}},{key:"loadtimeout",value:function(){s.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);e=this.callbacks.onProgress;e&&e(r,this.context,null,t)}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.default=n},{46:46}]},{},[35])(35)}]]);
