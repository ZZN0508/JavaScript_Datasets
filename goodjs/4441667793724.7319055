function pgvGetCookieByName(e){e=Tcss.d.cookie.match(new RegExp("(^|\\s)"+e+"([^;]*)(;|$)"));return null==e?pvNone:unescape(e[2])}function pgvRealSetCookie(e){Tcss.d.cookie=e+";path=/;domain="+Tcss.domainToSet+";expires=Sun, 18 Jan 2038 00:00:00 GMT;"}function pgvGetDomainInfo(){void 0!==pvCurDomain&&""!=pvCurDomain&&(Tcss.dm=pvCurDomain),void 0!==pvCurUrl&&""!=pvCurUrl&&(Tcss.url=escape(pvCurUrl)),Tcss.arg==pvNone&&(Tcss.arg="")}function pgvIsPgvDomain(){var e=Tcss.dm.split("."),t=Tcss.dm;return 3<=e.length&&"qq"==e[e.length-2]&&(t=e[e.length-3]),!/(^qzone$)|(^cache$)|(^ossweb-img$)|(^ring$)|(^im$)|(^fo$)|(^shuqian$)|(^photo$)|(^pet$)|(^r2$)|(^bar$)|(^client$)|(^music$)|(^pay$)|(^sg$)|(^vip$)|(^show$)|(^qqtang$)|(^safe$)|(^service$)|(^love$)|(^mail$)|(^qqgamecdnimg$)|(^netbar$)|(^dnf$)|(^qqgame$)|(^mgp$)|(^magic$)|(^city$)|(^1314$)|(^wb$)|(^qun$)|(^aq$)|(^17roco$)|(^minigame$)|(^cf$)|(^zg$)|(^pc$)|(^shurufa$)|(^live$)|(\.3366\.com$)/.test(t)}function pgvGetRefInfo(){var e;void 0!==pvRefDomain&&""!=pvRefDomain&&(Tcss.rdm=pvRefDomain),Tcss.rdm=Tcss.rdm==pvNone?"":Tcss.rdm,void 0!==pvRefUrl&&""!=pvRefUrl&&(Tcss.rurl=pvRefUrl),Tcss.rurl==pvNone&&(Tcss.rurl=""),Tcss.rarg==pvNone&&(Tcss.rarg=""),pgvIsPgvDomain()&&(""!=Tcss.rdm||(e=Tcss.l.href.match(new RegExp("[?&#](((pgv_ref)|(ref)|(ptlang))=[^&#]+)(#|&|$)")))&&(Tcss.rdm=null==e[1]?"":escape(e[1])),(e=Tcss.l.href.match(new RegExp("[?&#](pref=[^&#]+)(&|#|$)")))&&(Tcss.rdm=null==e[1]?"":escape(e[1])))}function pgvGetColumn(){Tcss.column="","undefined"!=typeof vsPgvCol&&""!=vsPgvCol&&(Tcss.column+=vsPgvCol)}function pgvGetTopic(){Tcss.subject="","undefined"!=typeof pvCSTM&&""!=pvCSTM&&(Tcss.subject=pvCSTM)}function trimUin(e){var t=pvNone;return e!=pvNone&&(""==(t=(e=e.replace(new RegExp("[^0-9]","gm"),"")).replace(new RegExp("^0+","gm"),""))&&(t=pvNone)),t}function pgvGetNewRand(){var e=trimUin(pgvGetCookieByName("uin_cookie=")),t=trimUin(pgvGetCookieByName("adid=")),o=trimUin(pgvGetCookieByName("uin=")),n=trimUin(pgvGetCookieByName("luin=")),s=trimUin(pgvGetCookieByName("clientuin=")),r=trimUin(pgvGetCookieByName("pt2gguin=")),a=trimUin(pgvGetCookieByName("zzpaneluin=")),i=trimUin(pgvGetCookieByName("o_cookie=")),c=pgvGetCookieByName("pgv_pvid=");return 13<i.length&&pgvRealSetCookie("o_cookie="),o!=pvNone?(pgvRealSetCookie("o_cookie="+o),"&nrnd="+o):n!=pvNone?(pgvRealSetCookie("o_cookie="+n),"&nrnd="+n):r!=pvNone?(pgvRealSetCookie("o_cookie="+r),"&nrnd="+r):e!=pvNone?(pgvRealSetCookie("o_cookie="+e),"&nrnd="+e):i!=pvNone?"&nrnd="+i:t!=pvNone?(pgvRealSetCookie("o_cookie="+t),"&nrnd="+t):s!=pvNone?(pgvRealSetCookie("o_cookie="+s),"&nrnd="+s):a!=pvNone?(pgvRealSetCookie("o_cookie="+a),"&nrnd="+a):c!=pvNone?"&nrnd=F"+c:"&nrnd=-"}function hotClick(){document.addEventListener?document.addEventListener("click",clickEvent,!1):document.attachEvent&&document.attachEvent("onclick",clickEvent),window.addEventListener?window.addEventListener("onbeforeunload",staybounce,!1):window.attachEvent&&window.attachEvent("onbeforeunload",staybounce)}function getScrollXY(){return document.body.scrollTop?{x:document.body.scrollLeft,y:document.body.scrollTop}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}}function clickEvent(e){var t=(e=e||window.event).clientX+getScrollXY().x-document.getElementsByTagName("body")[0].offsetLeft,o=e.clientY+getScrollXY().y-document.getElementsByTagName("body")[0].offsetTop;if(!(t<0||o<0))try{var n=1;void 0!==e.srcElement&&"[object]"==e.srcElement&&void 0!==e.srcElement.parentElement&&"[object]"==e.srcElement.parentElement&&(n=0),pvClickCount+=n;var s=new Image(1,1);s.src="//trace.qq.com/collect?pj=8888&url="+escape(location.href)+"&w="+screen.width+"&x="+t+"&y="+o+"&v="+n+"&u="+trimUin(pgvGetCookieByName("o_cookie")),delete s}catch(e){}}function tracert(){var e;pgvIsPgvDomain()&&(sendUrl=new Image(1,1),e=escape(window.location.href),e="pj=1990&dm="+Tcss.dm+"&url="+Tcss.url+"&arg="+Tcss.arg+"&rdm="+Tcss.rdm+"&rurl="+Tcss.rurl+"&rarg="+Tcss.rarg+"&icache="+Tcss.pgUserType+"&uv=&nu=&ol=&loc="+e+"&column="+Tcss.column+"&subject="+Tcss.subject+pgvGetNewRand()+"&rnd="+Math.round(1e5*Math.random()),sendUrl.src="//trace.qq.com/collect?"+e,e=trimUin(pgvGetCookieByName("o_cookie=")),1!=pvSetupHot||e==pvNone||e%10!=3||/\/a\//.test(location.href)||(hotClick(),e=new Date,pvStartTime=e.getTime()))}function staybounce(){dt=new Date;var e=dt.getTime(),t=new Image(1,1);t.src="//trace.qq.com/collect?pj=8887&url="+escape(location.href)+"&t="+parseInt((e-pvStartTime)/1e3)+"&v="+pvClickCount+"&u="+trimUin(pgvGetCookieByName("o_cookie")),delete t}var pvNone="-",pvStartTime=0,sendUrl,pvClickCount=0,pvSetupHot=1,pvCurDomain="",pvCurUrl="",pvRefDomain="",pvRefUrl="",pvRepeatCount;void 0===pvRepeatCount&&(pvRepeatCount=1),function(){function tcss(e){this.url=[],this.init(e)}function loadScript(e){var t=document.createElement("script"),o=document.getElementsByTagName("script")[0];t.src=e,t.type="text/javascript",t.async=!0,o.parentNode.insertBefore(t,o)}var _d,_l,_b,_n="-",_params,_curDomain,_curUrl,_domainToSet,_refDomain,_refUrl,_image,_ext,_hurlcn,_tt,_ch=0,_crossDomain=0;_ver="tcss.3.1.5",_speedTestUrl="//jsqmt.qq.com/cdn_djl.js",window.Tcss={};var _pgvVersion="function"==typeof tracert&&"function"==typeof pgvGetColumn&&"function"==typeof pgvGetTopic&&"function"==typeof pgvGetDomainInfo&&"function"==typeof pgvGetRefInfo,_rep;void 0===_rep&&(_rep=1),tcss.prototype={init:function(e){if(_params=e||{},_d=document,!_params.statIframe&&window!=top)try{_d=top.document}catch(e){}void 0===_d&&(_d=document),_l=_d.location,_b=_d.body,_pgvVersion&&(Tcss.d=_d,Tcss.l=_l),_ext=[],_hurlcn=[],_tt=[]},run:function(){var e,t=(new Date).getTime();_cookie.init(),this.url.push(this.getDomainInfo()),this.coverCookie(),_cookie.setCookie("ssid"),_cookie.save(),this.url.unshift("//pingfore."+this.getCookieSetDomain(_curDomain)+"/pingd?"),this.url.push(this.getRefInfo(_params));try{navigator.cookieEnabled?this.url.push("&pvid="+_cookie.setCookie("pgv_pvid",!0)):this.url.push("&pvid=NoCookie")}catch(e){this.url.push("&pvid=NoCookie")}this.url.push(this.getMainEnvInfo()),this.url.push(this.getExtendEnvInfo()),Tcss.pgUserType="",(_params.pgUserType||_params.reserved2)&&(e=_params.pgUserType||_params.reserved2,e=escape(e.substring(0,256)),Tcss.pgUserType=e,_tt.push("pu="+Tcss.pgUserType)),_pgvVersion&&(pgvGetColumn(),pgvGetTopic(),this.url.push("&column="+Tcss.column+"&subject="+Tcss.subject),tracert()),this.url.push("&vs="+_ver),_cookie.setCookie("ts_uid",!0),e=(new Date).getTime(),_ext.push("tm="+(e-t)),_ch&&_ext.push("ch="+_ch),t=_params.extParam?_params.extParam+"|":"",this.url.push("&ext="+escape(t+_ext.join(";"))),this.url.push("&hurlcn="+escape(_hurlcn.join(";"))),this.url.push("&rand="+Math.round(1e5*Math.random())),"undefined"==typeof _speedMark?this.url.push("&reserved1=-1"):this.url.push("&reserved1="+(new Date-_speedMark));t=this.getSud();t&&_tt.push("su="+escape(t.substring(0,256))),this.url.push("&tt="+escape(_tt.join(";"))),this.sendInfo(this.url.join("")),1!=_crossDomain||(t=this.getParameter("tcss_rp_dm",_d.URL))!=Tcss.dm&&(t=this.url.join("").replace(/\?dm=(.*?)\&/,"?dm="+t+"&"),this.sendInfo(t)),_params.hot&&(document.attachEvent?document.attachEvent("onclick",function(e){pgvWatchClick(e)}):document.addEventListener("click",function(e){pgvWatchClick(e)},!1)),_params.repeatApplay&&"true"==_params.repeatApplay&&void 0!==_rep&&(_rep=1)},getSud:function(){if(_params.sessionUserType)return _params.sessionUserType;var e=_params.sudParamName||"sessionUserType";return this.getParameter(e,_d.URL)},coverCookie:function(){var e,t,o,n;_params.crossDomain&&"on"==_params.crossDomain&&(e=this.getParameter("tcss_uid",_d.URL),t=this.getParameter("tcss_sid",_d.URL),o=this.getParameter("tcss_refer",_d.URL),n=this.getParameter("tcss_last",_d.URL),t&&e&&(_crossDomain=1,_cookie.setCookie("ssid",!1,t),_cookie.save(),_cookie.setCookie("ts_refer",!0,o),_cookie.setCookie("ts_last",!0,n),_cookie.setCookie("pgv_pvid",!0,e)))},getDomainInfo:function(e){var t=_l.hostname.toLowerCase();return _params.virtualDomain&&(_hurlcn.push("ad="+t),t=_params.virtualDomain),this.getCurrentUrl(),Tcss.dm=t,_pgvVersion&&pgvGetDomainInfo(),_curDomain=Tcss.dm,_domainToSet||(_domainToSet=this.getCookieSetDomain(_l.hostname.toLowerCase()),_pgvVersion&&(Tcss.domainToSet=_domainToSet)),e&&(Tcss.dm+=".hot"),"dm="+Tcss.dm+"&url="+Tcss.url},getCurrentUrl:function(){var e,t="",o=_n,t=_curUrl=escape(_l.pathname);""!=_l.search&&(o=escape(_l.search.substr(1))),!_params.senseParam||(e=this.getParameter(_params.senseParam,_d.URL))&&(t+="_"+e),_params.virtualURL&&(_hurlcn.push("au="+t),t=_params.virtualURL),Tcss.url=t,Tcss.arg=o},getRefInfo:function(e){var t=_n,o=_n,n=_n,s=_d.referrer,r=e.tagParamName||"ADTAG",a=this.getParameter(r,_d.URL);-1<(e=s.indexOf("://"))&&((r=s.match(/(\w+):\/\/([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i))&&(t=r[2],o=r[4]+(r[5]||""))),-1!=s.indexOf("?")&&(e=s.indexOf("?")+1,n=s.substr(e));var i,e=t;_params.virtualRefDomain&&(t!=_n&&_hurlcn.push("ard="+t),t=_params.virtualRefDomain),_params.virtualRefURL&&(o!=_n&&_hurlcn.push("aru="+escape(o)),o=_params.virtualRefURL),a&&(i=t+o,t="ADTAG",o=a),_refDomain=t,_refUrl=escape(o),_refDomain!=_n&&("ADTAG"!=_refDomain||e!=_n)||(c=_cookie.get("ts_last=",!0))!=_n&&_ext.push("ls="+c),_cookie.setCookie("ts_last",!0,escape((_l.hostname+_l.pathname).substring(0,128)));e=_cookie.get("ts_refer=",!0);e!=_n&&_ext.push("rf="+e);var c=_l.hostname;return _params.inner&&(c=","+c+","+_params.inner+","),_refDomain==_n||-1<(","+c+",").indexOf(_refDomain)||1==_crossDomain||((o=escape((_refDomain+o).substring(0,128)))!=e&&(_ch=2),_cookie.setCookie("ts_refer",!0,o)),Tcss.rdm=_refDomain,Tcss.rurl=_refUrl,Tcss.rarg=escape(n),_pgvVersion&&pgvGetRefInfo(),i?"&rdm="+Tcss.rdm+"&rurl="+Tcss.rurl+"&rarg="+Tcss.rarg+"&or="+i:"&rdm="+Tcss.rdm+"&rurl="+Tcss.rurl+"&rarg="+Tcss.rarg},getMainEnvInfo:function(){var e="";try{var t=_n,o=_n,n=_n,s=navigator;self.screen&&(t=screen.width+"x"+screen.height,o=screen.colorDepth+"-bit"),s.language?n=s.language.toLowerCase():s.browserLanguage&&(n=s.browserLanguage.toLowerCase()),e="&scr="+t+"&scl="+o+"&lang="+n+"&java="+(s.javaEnabled()?1:0)+"&pf="+s.platform+"&tz="+(new Date).getTimezoneOffset()/60}catch(e){}finally{return e}},getExtendEnvInfo:function(){var e="";try{var t=_l.href,o=_n;e+="&flash="+this.getFlashInfo(),_b.addBehavior&&(_b.addBehavior("#default#homePage"),_b.isHomePage(t)&&(e+="&hp=Y")),_b.addBehavior&&(_b.addBehavior("#default#clientCaps"),o=_b.connectionType),e+="&ct="+o}catch(e){}finally{return e}},getFlashInfo:function(){var f=_n,n=navigator;try{if(n.plugins&&n.plugins.length){for(var i=0;i<n.plugins.length;i++)if(-1<n.plugins[i].name.indexOf("Shockwave Flash")){f=n.plugins[i].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(var i=12;5<=i;i--)try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+i+"');");if(fl){f=i+".0";break}}catch(e){}}catch(e){}return f},getParameter:function(e,t){if(e&&t){e=new RegExp("(\\?|#|&)"+e+"=([^&^#]*)(#|&|$)"),e=t.match(e);return e?e[2]:""}return""},getCookieSetDomain:function(e){for(var t,o,n=[],s=0,r=0;r<e.length;r++)"."==e.charAt(r)&&(n[s]=r,s++);return t=n.length,-1<e.indexOf(".cn")&&t--,o="qq.com",1==t?o=e:1<t&&(o=e.substring(n[t-2]+1)),o},watchClick:function(e){try{var t,o,n,s=!0,r="",a=window.event?window.event.srcElement:e.target;switch(a.tagName){case"A":r="<A href="+a.href+">"+a.innerHTML+"</a>";break;case"IMG":r="<IMG src="+a.src+">";break;case"INPUT":r="<INPUT type="+a.type+" value="+a.value+">";break;case"BUTTON":r="<BUTTON>"+a.innerText+"</BUTTON>";break;case"SELECT":r="SELECT";break;default:s=!1}s&&(o=(t=new tcss(_params)).getElementPos(a),_params.coordinateId&&(n=t.getElementPos(document.getElementById(_params.coordinateId)),o.x-=n.x),t.url.push(t.getDomainInfo(!0)),t.url.push("&hottag="+escape(r)),t.url.push("&hotx="+o.x),t.url.push("&hoty="+o.y),t.url.push("&rand="+Math.round(1e5*Math.random())),t.url.unshift("//pinghot."+this.getCookieSetDomain(_curDomain)+"/pingd?"),t.sendInfo(t.url.join("")))}catch(e){}},getElementPos:function(e){if(null===e.parentNode||"none"==e.style.display)return!1;var t=navigator.userAgent.toLowerCase(),o=null,n=[];if(e.getBoundingClientRect){var s=e.getBoundingClientRect(),r=Math.max(document.documentElement.scrollTop,document.body.scrollTop),a=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),i=document.body.clientTop,c=document.body.clientLeft;return{x:s.left+a-c,y:s.top+r-i}}if(document.getBoxObjectFor){s=document.getBoxObjectFor(e);r=e.style.borderLeftWidth?Math.floor(e.style.borderLeftWidth):0,i=e.style.borderTopWidth?Math.floor(e.style.borderTopWidth):0,n=[s.x-r,s.y-i]}else{if(n=[e.offsetLeft,e.offsetTop],(o=e.offsetParent)!=e)for(;o;)n[0]+=o.offsetLeft,n[1]+=o.offsetTop,o=o.offsetParent;(-1<t.indexOf("opera")||-1<t.indexOf("safari")&&"absolute"==e.style.position)&&(n[0]-=document.body.offsetLeft,n[1]-=document.body.offsetTop)}for(o=e.parentNode||null;o&&"BODY"!=o.tagName&&"HTML"!=o.tagName;)n[0]-=o.scrollLeft,n[1]-=o.scrollTop,o=o.parentNode||null;return{x:n[0],y:n[1]}},sendClick:function(){_params.hottag&&(this.url.push(this.getDomainInfo(!0)),this.url.push("&hottag="+escape(_params.hottag)),this.url.push("&hotx=9999&hoty=9999"),this.url.push("&rand="+Math.round(1e5*Math.random())),this.url.unshift("//pinghot."+this.getCookieSetDomain(_curDomain)+"/pingd?"),this.sendInfo(this.url.join("")))},pgvGetArgs:function(){this.getDomainInfo();var e=[];return e.push("tcss_rp_dm="+Tcss.dm),e.push("tcss_uid="+_cookie.get("pgv_pvid=",!0)),e.push("tcss_sid="+_cookie.get("ssid=",!0)),e.push("tcss_refer="+_cookie.get("ts_refer=",!0)),e.push("tcss_last="+_cookie.get("ts_last=",!0)),e.join("&")},sendInfo:function(e){_image=new Image(1,1),(Tcss.img=_image).onload=_image.onerror=_image.onabort=function(){_image.onload=_image.onerror=_image.onabort=null,Tcss.img=null},_image.src=e}};var _cookie={sck:[],sco:{},init:function(){var e=this.get("pgv_info=",!0);if(e!=_n)for(var t=e.split("&"),o=0;o<t.length;o++){var n=t[o].split("=");this.set(n[0],unescape(n[1]))}},get:function(e,t){var o=t?_d.cookie:this.get("pgv_info=",!0),n=_n,s=o.indexOf(e);return-1<s&&(s+=e.length,-1==(e=o.indexOf(";",s))&&(e=o.length),t||-1<(t=o.indexOf("&",s))&&(e=Math.min(e,t)),n=o.substring(s,e)),n},set:function(e,t){this.sco[e]=t;for(var o=!1,n=this.sck.length,s=0;s<n;s++)if(e==this.sck[s]){o=!0;break}o||this.sck.push(e)},setCookie:function(e,t,o){var n=_l.hostname;if((s=_cookie.get(e+"=",t))!=_n||o)s=o||s;else{switch(e){case"ts_uid":_ext.push("nw=1");break;case"ssid":_ch=1}var s=t?"":"s",o=(new Date).getUTCMilliseconds();s+=Math.round(2147483647*Math.abs(Math.random()-1))*o%1e10}if(t)switch(e){case"ts_uid":this.saveCookie(e+"="+s,n,this.getExpires(1051200));break;case"ts_refer":this.saveCookie(e+"="+s,n,this.getExpires(259200));break;case"ts_last":this.saveCookie(e+"="+s,n,this.getExpires(30));break;default:this.saveCookie(e+"="+s,_domainToSet,"expires=Sun, 18 Jan 2038 00:00:00 GMT;")}else this.set(e,s);return s},getExpires:function(e){var t=new Date;return t.setTime(t.getTime()+60*e*1e3),"expires="+t.toGMTString()},save:function(){var e;_params.sessionSpan&&(e=new Date).setTime(e.getTime()+60*_params.sessionSpan*1e3);for(var t="",o=this.sck.length,n=0;n<o;n++)t+=this.sck[n]+"="+this.sco[this.sck[n]]+"&";var t="pgv_info="+t.substr(0,t.length-1),s="";e&&(s="expires="+e.toGMTString()),this.saveCookie(t,_domainToSet,s)},saveCookie:function(e,t,o){_d.cookie=e+";path=/;domain="+t+";"+o}};window.pgvMain=function(e,t){var o="";_ver=t?(o=t,"tcsso.3.1.5"):(o=e,"tcss.3.1.5");try{if(_pgvVersion&&(void 0!==pvRepeatCount&&1==pvRepeatCount?(_rep=1,pvRepeatCount=2):_rep=2),1!=_rep)return;_rep=2,new tcss(o).run()}catch(e){}},window.pgvSendClick=function(e){new tcss(e).sendClick()},window.pgvWatchClick=function(e){new tcss(e).watchClick(e)},window.pgvGetArgs=function(e){return new tcss(e).pgvGetArgs()}}();
