try{!function(e,t,n,r){"use strict";function o(e,n,t){var r=e[n];e[n]=function(){var e=r.apply(this,arguments);return t.apply(this,arguments),e}}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(){e.obApi.dispatch.apply(e.obApi,arguments)}var c="//tr.outbrain.com",d="PAGE_VIEW",s="product";i.version=e.obApi.version,i.loaded=e.obApi.loaded,i.marketerId=e.obApi.marketerId,i.queue=e.obApi.queue;var u=e.obApi=i;function p(e){for(var n=(m().split("?")[1]||"").split(/&/),t=0;t<n.length;t++)if(0===n[t].indexOf(e+"="))return n[t].split("=")[1].split("#")[0];return""}function m(){var n="";try{n=window.top.location.href||document.location.href}catch(e){n=document.location.href}return n||""}u.obtpVersion="1.4.1";var l,f,v,b,h,g,w,_,y,I,k,A,E,R={get:function(e){if(!document.cookie)return"";var n="";try{n=decodeURIComponent(document.cookie)}catch(e){}var t=n.indexOf(e+"=");if(t<0)return"";var r=t+(e+"=").length,t=n.indexOf(";",r),t=0<t?t:document.cookie.length;return n.substring(r,t)},set:function(e,n,t,r){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);o="expires="+o.toUTCString(),o=encodeURIComponent(e)+"="+encodeURIComponent(n)+"; "+o+"; path=/;";r&&(o+="domain="+r+";"),document.cookie=o}},O=(b=v=!(f=[]),h=function(e,n){var t,r=e.name===d;e.contentType!==s||!n||(t=e.content&&e.content.id)&&I(t,e.marketerId),g(100)?w.apply(null,arguments):(_(e,n),r&&n&&y(e))},g=function(e){return Math.floor(100*Math.random())+1<=e},w=function(e,n){e=E(e);delete e.content,delete e.contentType,e.optOut=n?"false":"true";n=n?N():"";n&&(e.ob_click_id=n),(new t).src=c+"/unifiedPixel?"+k(e)+"&bust="+C()},_=function(e,n){e=E(e);delete e.content,delete e.contentType,e.optOut=n?"false":"true";n=n?N():"";n&&(e.ob_click_id=n),(new t).src=c+"/pixel?"+k(e)+"&bust="+C()},y=function(e){(new t).src="//amplifypixel.outbrain.com/pixel?mid="+e.marketerId+"&"+k({dl:e.dl||""})+"&bust="+C()},I=function(e,n){(new t).src="//dr.outbrain.com/pixel?mid="+n+"&pid="+e+"&bust="+C()},k=function(e){var n,t=["dl","name"],r=[];for(n in e)e.hasOwnProperty(n)&&(-1<t.indexOf(n)?r.push(n+"="+encodeURIComponent(e[n])):r.push(n+"="+e[n]));return r.join("&")},A=function(e){for(var n=[],t={},r=0;r<e.length;r++)t[e[r]]||n.push(e[r]),t[e[r]]=!0;return n},E=function(e){var n,t={};for(n in e)t[n]=e[n];return t},function(){var e=arguments;if(!e[1])throw new Error("can't dispatch pixel, event name is missing");var n=e[0],t=e[2]&&"object"==typeof e[2]?e[2]:{};!1===a(u.marketerId)&&(u.marketerId=[u.marketerId]);var r,o=A(u.marketerId),i={};for(r in t)i[r]=t[r];"track"===(i.marketerId=o.toString(),i.obApiVersion=u.version,i.obtpVersion=u.obtpVersion,i.name=e[1].replace(/ /g,"-"),i.dl=m(),n)?(W(i,n),e=i,b?h(e,l):(f.push(e),v||(v=!0,P.checkHasConsent(function(e){for(b=!0,l=!!e;0<f.length;)h(f.shift(),l)})))):T(T.LOG_TYPES.ERROR,"Command type "+n+" is not recognized",i.name)});function C(){return Math.random().toString().replace(".","")}function N(){var e=p("ob_cvr_pixel_domain"),n=p("dicbo");return n?(R.set("outbrain_click_id",n,1,e),n):R.get("outbrain_click_id")}obApi.dispatch=O;var S,L,G,P=(S=0,{checkHasConsent:function(e){function t(){clearTimeout(S),window.removeEventListener?window.removeEventListener("message",n,!1):window.detachEvent&&window.detachEvent("message",n,!1),e.apply(e,arguments)}function n(e){var n;try{n=e&&"string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){t(!0)}n&&n.__cmpReturn&&o(t,n.__cmpReturn.returnValue,n.__cmpReturn.success)}var r,o=function(e,n,t){if((!t||!n||!n.vendorConsents||void 0===n.vendorConsents[164]||!0===n.vendorConsents[164])&&function(e){if(!e)return 1;var n,t=!0;for(n in e)if(e.hasOwnProperty(n)&&(t=!1,e[n]))return 1;return t}(n.purposeConsents))return e(!0);e(!1)};try{if(S=setTimeout(function(){t.call(e,!0)},500),window.__cmp)r=t,"function"==typeof window.__cmp?window.__cmp("getVendorConsents",[164],function(e,n){o(r,e,n)}):r(!0);else{var i,a=window;try{for(;!i&&(a.frames.__cmpLocator&&(i=a),a!==window.top);)a=a.parent}catch(e){i=window.top}if(window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent&&window.attachEvent("message",n,!1),!i)return void t({msg:"CMP not found"},!1);i.postMessage({__cmpCall:{command:"getVendorConsents",parameter:[164],callId:"obamplify"}},"*")}}catch(e){throw t(!0),e}}}),T=(n.pushState&&n.replaceState&&e.addEventListener&&(o(n,"pushState",D=function(e,n,t){r.href!==G&&t&&(G=r.href,obApi("track",d))}),o(n,"replaceState",D),e.addEventListener("popstate",D,!1)),L=e.postMessage||function(){},x.LOG_TYPES={LOG:"log",WARNING:"warning",INFO:"info",ERROR:"error"},x);function x(e,n,t){L({action:"log",type:e,message:n,name:t?t.replace(/ /g,"-"):""},"*")}var V,U,Y,D,W=(V={USD:1,CAD:1,EUR:1,GBP:1,ILS:1,AUD:1,MXN:1,BRL:1,SEK:1,SGD:1,RUB:1,NZD:1,INR:1,JPY:1,PHP:1,CHF:1},U=new RegExp("^[A-Za-z0-9]+[A-Za-z0-9-]*$"),Y=new RegExp("^[0-9]+[.0-9]*$"),function(e,n){var t=e.contentType===s,r=e.content&&e.content.id;return!t||r&&("number"==typeof r||"string"==typeof r)?e.orderValue&&!e.currency?(T(T.LOG_TYPES.WARNING,"Order value reported but no currency is declared",e.name),!1):e.currency&&!V.hasOwnProperty(e.currency)?(T(T.LOG_TYPES.WARNING,"Currency not recognized",e.name),!1):e.orderValue&&!Y.test(e.orderValue)?(T(T.LOG_TYPES.WARNING,"Order value can only be a positive number",e.name),!1):e.name===d||U.test(e.name)?!(e.name!==d&&100<e.name.length&&(T(T.LOG_TYPES.WARNING,"Event name length cannot exceed 100 characters",e.name),1)):(T(T.LOG_TYPES.WARNING,"Event Name invalid",e.name),!1):(T(T.LOG_TYPES.WARNING,"content id is not string or number",e.name),!1)}),M="outbrain_cid_fetch";(function(){for(var e=!1;u.queue.length;){var n=u.queue.shift();if(n[1]===d&&!n[2]){if(e)continue;e=!0}u.dispatch.apply(u,n)}})(),R.get("outbrain_click_id")||R.get(M)||p("dicbo")||(obApi.setCachedClickId=((D=document.createElement("script")).src=c+"/cachedClickId?marketerId="+(a(obApi.marketerId)?obApi.marketerId.join(","):obApi.marketerId),document.body.appendChild(D),function(e){var n;"NoClickId"===e?R.set(M,!0,5/1440):(n=p("ob_cvr_pixel_domain"),R.set("outbrain_click_id",e,1,n))}))}(window,(document,Image),history,location)}catch(e){(new Image).src="//tr.outbrain.com/log?obApiVersion="+obApi.version+"&obtpVersion="+obApi.obtpVersion+"&msg="+encodeURIComponent('{"error":"LOAD", "obApiVersion": '+obApi.version+', "marketerID": '+obApi.marketerId+', "referrer": '+document.referrer+', "extra": {"name":"'+e.name+'","line":"'+(e.lineNumber||e.line)+'","script":"'+(e.fileName||e.sourceURL||e.script)+'","stack":"'+(e.stackTrace||e.stack)+'","message":"'+e.message+'"}}')}
