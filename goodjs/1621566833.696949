(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{114:function(e,t,n){"use strict";var i=n(5),r=n.n(i),s=n(10),o=n.n(s),a=n(12),h=n(85);function u(e,t,n){var i,r,s,o,a,h,u;for(this.version="1.0.1",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(t,10)>0?t:0,this.salt="string"==typeof e?e:"","string"==typeof n&&(this.alphabet=n),i="",r=0,o=this.alphabet.length;r!==o;r++)-1===i.indexOf(this.alphabet[r])&&(i+=this.alphabet[r]);if(this.alphabet=i,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(r=0,o=this.seps.length;r!==o;r++)-1===(s=this.alphabet.indexOf(this.seps[r]))?this.seps=this.seps.substr(0,r)+" "+this.seps.substr(r+1):this.alphabet=this.alphabet.substr(0,s)+" "+this.alphabet.substr(s+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(1===(a=Math.ceil(this.alphabet.length/this.sepDiv))&&a++,a>this.seps.length?(h=a-this.seps.length,this.seps+=this.alphabet.substr(0,h),this.alphabet=this.alphabet.substr(h)):this.seps=this.seps.substr(0,a)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),u=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,u),this.seps=this.seps.substr(u)):(this.guards=this.alphabet.substr(0,u),this.alphabet=this.alphabet.substr(u))}u.prototype.encode=function(){var e,t,n=Array.prototype.slice.call(arguments);if(!n.length)return"";for(n[0]instanceof Array&&(n=n[0]),e=0,t=n.length;e!==t;e++)if("number"!=typeof n[e]||n[e]%1!=0||n[e]<0)return"";return this._encode(n)},u.prototype.decode=function(e){return e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]},u.prototype.encodeHex=function(e){var t,n,i;if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(t=0,n=(i=e.match(/[\w\W]{1,12}/g)).length;t!==n;t++)i[t]=parseInt("1"+i[t],16);return this.encode.apply(this,i)},u.prototype.decodeHex=function(e){var t,n,i=[],r=this.decode(e);for(t=0,n=r.length;t!==n;t++)i+=r[t].toString(16).substr(1);return i},u.prototype._encode=function(e){var t,n,i,r,s,o,a,h,u,c,l,f=this.alphabet,p=e.length,d=0;for(i=0,r=e.length;i!==r;i++)d+=e[i]%(i+100);for(n=t=f[d%f.length],i=0,r=e.length;i!==r;i++)s=e[i],o=n+this.salt+f,f=this.consistentShuffle(f,o.substr(0,f.length)),t+=a=this.hash(s,f),i+1<p&&(h=(s%=a.charCodeAt(0)+i)%this.seps.length,t+=this.seps[h]);for(t.length<this.minHashLength&&(u=(d+t[0].charCodeAt(0))%this.guards.length,(t=this.guards[u]+t).length<this.minHashLength&&(u=(d+t[2].charCodeAt(0))%this.guards.length,t+=this.guards[u])),c=parseInt(f.length/2,10);t.length<this.minHashLength;)(l=(t=(f=this.consistentShuffle(f,f)).substr(c)+t+f.substr(0,c)).length-this.minHashLength)>0&&(t=t.substr(l/2,this.minHashLength));return t},u.prototype._decode=function(e,t){var n,i,r,s,o=[],a=0,h=new RegExp("["+this.guards+"]","g"),u=e.replace(h," "),c=u.split(" ");if(3!==c.length&&2!==c.length||(a=1),void 0!==(u=c[a])[0]){for(n=u[0],u=u.substr(1),h=new RegExp("["+this.seps+"]","g"),a=0,i=(c=(u=u.replace(h," ")).split(" ")).length;a!==i;a++)r=c[a],s=n+this.salt+t,t=this.consistentShuffle(t,s.substr(0,t.length)),o.push(this.unhash(r,t));this._encode(o)!==e&&(o=[])}return o},u.prototype.consistentShuffle=function(e,t){var n,i,r,s,o,a;if(!t.length)return e;for(s=e.length-1,o=0,a=0;s>0;s--,o++)a+=n=t[o%=t.length].charCodeAt(0),r=e[i=(n+o+a)%s],e=(e=e.substr(0,i)+e[s]+e.substr(i+1)).substr(0,s)+r+e.substr(s+1);return e},u.prototype.hash=function(e,t){var n="",i=t.length;do{n=t[e%i]+n,e=parseInt(e/i,10)}while(e);return n},u.prototype.unhash=function(e,t){var n,i=0;for(n=0;n<e.length;n++)i+=t.indexOf(e[n])*Math.pow(t.length,e.length-n-1);return i};function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,"a",function(){return m});var f=parseInt(1e10*Math.random(),10),p=Object(a.a)(),d=function(e){if(0!==e.indexOf(".")){var t=/[0-9A-Za-z]+/.exec(e);return null!==t&&t[0]===e&&parseInt(e,36)}var n=e.substr(1,2);return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).salt;return new u(void 0===t?null:t).decode(e)[0]}(e.substr(3),{salt:n})},g=function(e){var t=parseInt(25*Math.random()+10,10).toString(36)+parseInt(25*Math.random()+10,10).toString(36);return".".concat(t).concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.salt,i=void 0===n?null:n,r=t.length;return new u(i,void 0===r?32:r).encode(e)}(e,{salt:t,length:0}))},m=function(e){var t=e.env,n=e.legacy,i=void 0===n||n,s=new h.a({namespace:"bf-xdomain-tracking",cookieName:"bf_visit",daysExpiry:1e4,env:t});return s.get().then(function(e){var t=function(e){var t=decodeURIComponent(e).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=r()(t,2),i=n[0],s=n[1];return l(l({},e),{},o()({},i,s))},{}),n=t.u,i=t.uuid;return{legacyIdentifier:d(n||""),identifier:i}}(e),n=t.legacyIdentifier,a=t.identifier,h=g(f);return i?n||(s.set(encodeURIComponent("u=".concat(h,"&uuid=").concat(a||p,"&v=2"))),f):a||n?a||String(n):(s.set(encodeURIComponent("u=".concat(h,"&uuid=").concat(p,"&v=2"))),p)})}},12:function(e,t,n){"use strict";t.a=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^function(){try{return crypto.getRandomValues(new Uint8Array(1))[0]}catch(e){return 255*Math.random()}}()&15>>e/4).toString(16)})}},19:function(e,t,n){"use strict";function i(e,t){var n=e.match(t);return n&&n.length?n[0]:null}var r={getBuzzfeedSubdomainOrWildcard:function(e){var t=i(e,"(dev|stage|www).(buzzfeed|buzzfeednews).(com|io)$");return t||i(e,".?[a-z]+.[a-z]+$")},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(e,"=");if("undefined"==typeof document)return t;for(var i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(n))return s.substring(n.length,s.length)}return t},set:function(e){var t=e.name,n=e.value,i=e.days,r=e.domain,s="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),s="; expires=".concat(o.toGMTString())}var a="";return void 0!==r&&(a="; domain=".concat(r)),console.debug("cookies.set domain "+"".concat(a)),document.cookie="".concat(t,"=").concat(n).concat(s).concat(a,"; path=/")},remove:function(e,t){return this.set({name:e,value:"",days:-1,domain:t})}};t.a=r},247:function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}},26:function(e,t){function n(e,t,n,i,r,s,o){try{var a=e[s](o),h=a.value}catch(e){return void n(e)}a.done?t(h):Promise.resolve(h).then(i,r)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise(function(r,s){var o=e.apply(t,i);function a(e){n(o,r,s,a,h,"next",e)}function h(e){n(o,r,s,a,h,"throw",e)}a(void 0)})}}},27:function(e,t,n){"use strict";var i={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},r=Array.prototype.slice;function s(e){var t=e.length;return t?1===t?[e[0]]:2===t?[e[0],e[1]]:3===t?[e[0],e[1],e[2]]:r.call(e,0):[]}function o(e,t){return e===t||e!=e&&t!=t}function a(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}var h=function(){function e(e){this.keys=[],this.values=[],this.options=e;var t="function"==typeof e.isMatchingKey;t?this.getKeyIndex=this._getKeyIndexFromMatchingKey:e.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey="function"==typeof e.transformKey,this.shouldCloneArguments=this.canTransformKey||t,this.shouldUpdateOnAdd="function"==typeof e.onCacheAdd,this.shouldUpdateOnChange="function"==typeof e.onCacheChange,this.shouldUpdateOnHit="function"==typeof e.onCacheHit}return Object.defineProperty(e.prototype,"size",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){return{keys:s(this.keys),size:this.size,values:s(this.values)}},enumerable:!0,configurable:!0}),e.prototype._getKeyIndexFromMatchingKey=function(e){var t=this.options,n=t.isMatchingKey,i=t.maxSize,r=this.keys,s=r.length;if(!s)return-1;if(n(r[0],e))return 0;if(i>1)for(var o=1;o<s;o++)if(n(r[o],e))return o;return-1},e.prototype._getKeyIndexForMany=function(e){var t=this.options.isEqual,n=this.keys,i=n.length;if(!i)return-1;if(1===i)return this._getKeyIndexForSingle(e);var r,s,o=e.length;if(o>1){for(var a=0;a<i;a++)if((r=n[a]).length===o){for(s=0;s<o&&t(r[s],e[s]);s++);if(s===o)return a}}else for(a=0;a<i;a++)if((r=n[a]).length===o&&t(r[0],e[0]))return a;return-1},e.prototype._getKeyIndexForSingle=function(e){var t=this.keys;if(!t.length)return-1;var n=t[0],i=n.length;if(e.length!==i)return-1;var r=this.options.isEqual;if(i>1){for(var s=0;s<i;s++)if(!r(n[s],e[s]))return-1;return 0}return r(n[0],e[0])?0:-1},e.prototype.orderByLru=function(e,t,n){for(var i=this.keys,r=this.values,s=i.length,o=n;o--;)i[o+1]=i[o],r[o+1]=r[o];i[0]=e,r[0]=t;var a=this.options.maxSize;s===a&&n===s?(i.pop(),r.pop()):n>=a&&(i.length=r.length=a)},e.prototype.updateAsyncCache=function(e){var t=this,n=this.options,i=n.onCacheChange,r=n.onCacheHit,s=this.keys[0],o=this.values[0];this.values[0]=o.then(function(n){return t.shouldUpdateOnHit&&r(t,t.options,e),t.shouldUpdateOnChange&&i(t,t.options,e),n},function(e){var n=t.getKeyIndex(s);throw-1!==n&&(t.keys.splice(n,1),t.values.splice(n,1)),e})},e}();t.a=function e(t,n){if(void 0===n&&(n={}),function(e){return"function"==typeof e&&e.isMemoized}(t))return e(t.fn,a(t.options,n));if("function"!=typeof t)throw new TypeError("You must pass a function to `memoize`.");var r=n.isEqual,u=void 0===r?o:r,c=n.isMatchingKey,l=n.isPromise,f=void 0!==l&&l,p=n.maxSize,d=void 0===p?1:p,g=n.onCacheAdd,m=n.onCacheChange,v=n.onCacheHit,y=n.transformKey,b=a({isEqual:u,isMatchingKey:c,isPromise:f,maxSize:d,onCacheAdd:g,onCacheChange:m,onCacheHit:v,transformKey:y},function(e){var t={};for(var n in e)i[n]||(t[n]=e[n]);return t}(n)),O=new h(b),w=O.keys,x=O.values,I=O.canTransformKey,k=O.shouldCloneArguments,S=O.shouldUpdateOnAdd,C=O.shouldUpdateOnChange,D=O.shouldUpdateOnHit,T=function e(){var n=k?s(arguments):arguments;I&&(n=y(n));var i=w.length?O.getKeyIndex(n):-1;if(-1!==i)D&&v(O,b,e),i&&(O.orderByLru(w[i],x[i],i),C&&m(O,b,e));else{var r=t.apply(this,arguments),o=k?n:s(arguments);O.orderByLru(o,r,w.length),f&&O.updateAsyncCache(e),S&&g(O,b,e),C&&m(O,b,e)}return x[0]};return T.cache=O,T.fn=t,T.isMemoized=!0,T.options=b,T}},28:function(e,t,n){"use strict";function i(e){return e+"|expiration"}var r=function(){try{return localStorage.setItem("ls_test",!0),localStorage.removeItem("ls_test"),!0}catch(e){return!1}}(),s={set:function(e){r&&void 0!==e&&(localStorage.setItem(e.key,e.value),e.expires&&localStorage.setItem(i(e.key),Date.now()+e.expires))},get:function(e){return r?function(e){var t=localStorage.getItem(i(e));return t&&t<=Date.now()}(e)?(this.remove(e),null):localStorage.getItem(e):null},sessionSet:function(e){r&&void 0!==e&&sessionStorage.setItem(e.key,e.value)},sessionGet:function(e){return r?sessionStorage.getItem(e):null},remove:function(e){r&&(localStorage.removeItem(i(e)),localStorage.removeItem(e))},clear:function(){r&&localStorage.clear()}};t.a=s},48:function(e,t,n){var i=n(247);e.exports=function(e,t){if(null==e)return{};var n,r,s=i(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}},66:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(5);function i(e){return(e+="").indexOf("#")>-1?e.substr(e.indexOf("#"),e.length):""}function r(e){return(e+="").indexOf("#")>-1?e.substr(0,e.indexOf("#")):e}function s(e){return e.indexOf("?")>-1}function o(e){return e=function(e){if(!s(e))return e;var t=i(e);return(e=r(e)).substr(0,e.indexOf("?"))+t}(e=r(e))}},85:function(e,t,n){"use strict";var i=n(18),r=n.n(i),s=n(107),o=n.n(s),a=n(19),h=function(e){return e.match(/^stage\./)?"https://".concat(e):"https://www.".concat(e)},u=function(){function e(t){var n=this,i=t.sourceOfTruthDomain,s=t.localDomain,o=t.namespace,a=t.env,h=void 0===a?"dev":a,u=t.updateInterval,c=void 0===u?3e5:u,l=t.iframeTimeout,f=void 0===l?3e3:l;r()(this,e),this.sourceOfTruthDomain=i,this.localDomain=s,this.env=h,this.namespace=o,this.iframeTimeout=f,this.cookies={},i!==s&&this.initIframe().then(function(){setInterval(n.updateFromIframe.bind(n),c)}).catch(function(){})}return o()(e,[{key:"get",value:function(e){var t=this;return this.sourceOfTruthDomain===this.localDomain?Promise.resolve(a.a.get(e)):this.initIframe().then(function(){return t.cookies[e]||a.a.get(e)}).catch(function(){return a.a.get(e)})}},{key:"set",value:function(e){var t=this,n=e.name,i=e.value,r=e.days,s=e.secureOnly,o=void 0===s||s;a.a.set({name:n,value:i,days:r,domain:this.localDomain}),this.sourceOfTruthDomain!==this.localDomain&&this.initIframe().then(function(){var e={namespace:t.namespace,msgType:"destination-sync-write",cookieName:n,cookieVal:i,expiresDays:r,secureOnly:o},s=h(t.sourceOfTruthDomain);t.iframe.contentWindow.postMessage(JSON.stringify(e),s)}).catch(function(){return a.a.set({name:n,value:i,days:r,domain:t.localDomain})})}},{key:"cleanup",value:function(){if(this.boundOnMessage&&window.removeEventListener("message",this.boundOnMessage),this.iframe){var e=new ErrorEvent({message:"XDomainCookies were cleaned up before ready"});this.iframe.dispatchEvent(e),this.iframe.remove()}this.iframeReady=null}},{key:"initIframe",value:function(){var e=this;if(this.iframeReady)return this.iframeReady;var t=new Promise(function(t,n){e.boundOnMessage=function(n){e.onMessage(n,t)},window.addEventListener("message",e.boundOnMessage),e.createIframe(n)});return this.iframeReady=Promise.race([function(e){return new Promise(function(t,n){var i={type:"timeout",msg:"".concat(e,"ms timeout exceeded")};setTimeout(function(){return n(i)},e)})}(this.iframeTimeout),t]).catch(function(t){throw"prod"===e.env&&window.raven&&window.raven.captureException("timeout"===t.type?new Error("Destination Sync: ".concat(t.msg)):t),console.error(t),t}),this.iframeReady}},{key:"createIframe",value:function(e){var t="xdomaincookies-".concat(this.namespace),n=document.getElementById(t);if(n)return n.addEventListener("error",function(t){e(t)}),this.iframe=n,void(this.iframe.dataset.loaded&&this.updateFromIframe());var i=JSON.stringify({namespace:this.namespace,windowOrigin:window.location.origin}),r=document.createElement("iframe");r.style.display="none",r.addEventListener("error",function(t){e(t)}),r.id=t,r.src=function(e,t){return"".concat(h(e),"/").concat("destination-sync.html","#").concat(encodeURIComponent(t))}(this.sourceOfTruthDomain,i),this.iframe=r,document.body.appendChild(r)}},{key:"updateFromIframe",value:function(){var e={namespace:this.namespace,msgType:"destination-sync-read"},t=h(this.sourceOfTruthDomain);this.iframe.contentWindow.postMessage(JSON.stringify(e),t)}},{key:"onMessage",value:function(e,t){var n={};try{n=JSON.parse(e.data)}catch(e){}n.namespace===this.namespace&&("destination-sync-init"===n.msgType&&(this.iframe.dataset.loaded=!0),"destination-sync-init"!==n.msgType&&"destination-sync-read"!==n.msgType||(this.cookies=n.cookies),t())}}]),e}(),c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.hostname,t=e.split(".")[0];return t&&"stage"!==t&&-1===["buzzfeed","buzzfeednews","tasty","huffingtonpost","huffpost"].indexOf(t)&&e.split(".").length>=3&&(e=e.substring(t.length+1)),e},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"dev"===e?"dev.buzzfeed.io":"prod"===e||"app-west"===e?"buzzfeed.com":"stage.buzzfeed.com"},f=function(){function e(t){var n=t.cookieName,i=t.daysExpiry,s=t.env,o=t.namespace,a=t.sourceOfTruthDomain,h=t.throttleTimer,f=void 0===h?null:h,p=t.secureOnly,d=void 0===p||p,g=t.localDomain,m=void 0===g?c():g;r()(this,e),s="live"===s?"prod":s,this.xDomainCookies=new u({sourceOfTruthDomain:a||l(s),namespace:o,localDomain:m,env:s}),this.cookieName=n,this.daysExpiry=i,this.secureOnly=d,this.throttleTimer=f,this.inMemoryValue=null}return o()(e,[{key:"get",value:function(){var e=this;return this.throttle?Promise.resolve(this.inMemoryValue):this.xDomainCookies.get(this.cookieName).then(function(t){return e.inMemoryValue=t,e.resetThrottle(),t})}},{key:"set",value:function(e){return this.inMemoryValue=e,this.xDomainCookies.set({name:this.cookieName,value:e,days:this.daysExpiry,secureOnly:this.secureOnly})}},{key:"resetThrottle",value:function(){var e=this;this.throttleTimer&&(this.throttle=setTimeout(function(){e.throttle=null},this.throttleTimer))}}]),e}();t.a=f}}]);