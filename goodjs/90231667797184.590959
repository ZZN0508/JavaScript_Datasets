function Hashtable(){this.Clear=function(){this.Table=new Array},this.ContainsKey=function(e){var t,i=!1;for(t in this.Table)if(t==e&&null!=this.Table[t]){i=!0;break}return i},this.Get=function(e){e=this.Table[e];return e||null},this.Put=function(e,t){null==e||null==t||(this.Table[e]=t)},this.Remove=function(e){var t=this.Table[e];return this.Table[e]=null,t},this.Table=new Array}function PersonalizationCookie(){this.CookieName="PC_1_0",this.ValueDelimiter="|",this.origFieldOrder=[];var t="lsid",i="segg",n="site",s="ct",a="ut",o="pt",r="pfid",c="zip",u="RPC",h="preview",l="AOC",f="known",d="source_code",P="source_code_applied",G="ECI",m="GUID",p="lastUpdate",k="lastSent",g="segment",S="locale";this.GetLastSessionId=function(){return this.Get(t)},this.SetLastSessionId=function(e){checkNameValuePair(t,e)&&this.Put(t,e)},this.GetSegmentGroup=function(){return this.Get(i)},this.SetSegmentGroup=function(e){checkNameValuePair(i,e)&&this.Put(i,e)},this.GetSegmentId=function(){return this.Get(g)},this.SetSegmentId=function(e){checkNameValuePair(g,e)&&(this.Put(g,e),this.ContainsKey("seg")&&this.Remove("seg"))},this.GetSite=function(){return this.Get(n)},this.SetSite=function(e){checkNameValuePair(n,e)&&this.Put(n,e)},this.GetCustomerType=function(){return this.Get(s)},this.SetCustomerType=function(e){checkNameValuePair(s,e)&&this.Put(s,e)},this.GetUserType=function(){return this.Get(a)},this.SetUserType=function(e){checkNameValuePair(a,e)&&this.Put(a,e)},this.GetProfileType=function(){return this.Get(o)},this.SetProfileType=function(e){checkNameValuePair(o,e)&&this.Put(o,e)},this.GetProfileId=function(){return this.Get(r)},this.SetProfileId=function(e){checkNameValuePair(r,e)&&this.Put(r,e)},this.GetZipCode=function(){return this.Get(c)},this.SetZipCode=function(e){checkNameValuePair(c,e)&&this.Put(c,e)},this.GetRpcList=function(){return this.Get(u)},this.SetRpcList=function(e){checkNameValuePair(u,e)&&this.Put(u,e)},this.GetRpcCode=function(){return this.Get(u)},this.SetRpcCode=function(e){checkNameValuePair(u,e)&&this.Put(u,e)},this.GetIsPreviewMode=function(){return this.Get(h)},this.SetIsPreviewMode=function(e){checkNameValuePair(h,e)&&this.Put(h,e)},this.GetAocList=function(){return this.Get(l)},this.SetAocList=function(e){checkNameValuePair(l,e)&&this.Put(l,e)},this.GetAccountInfo=function(){return this.Get("accts")},this.GetIsKnown=function(){return this.Get(f)},this.SetIsKnown=function(e){checkNameValuePair(f,e)&&this.Put(f,e)},this.GetSourceCode=function(){return this.Get(d)},this.SetSourceCode=function(e){checkNameValuePair(d,e)&&this.Put(d,e)},this.GetECI=function(){return this.Get(G)},this.SetECI=function(e){checkNameValuePair(G,e)&&this.Put(G,e)},this.GetGUID=function(){return this.Get(m)},this.SetGUID=function(e){checkNameValuePair(m,e)&&this.Put(m,e)},this.GetLastUpdate=function(){return this.Get(p)},this.SetLastUpdate=function(e){checkNameValuePair(p,e)&&this.Put(p,e)},this.GetLastSent=function(){return this.Get(k)},this.SetLastSent=function(e){checkNameValuePair(k,e)&&this.Put(k,e)},this.GetSourceCodeKeyAppliedFor=function(){return this.Get(P)},this.SetSourceCodeKeyAppliedFor=function(e){checkNameValuePair(P,e)&&this.Put(P,e)},this.GetLocale=function(){return this.Get(S)},this.SetLocale=function(e){checkNameValuePair(S,e)&&this.Put(S,e)},this.Persist=PersistValues,this.Init=Parse,this.Init()}function Parse(){var e=GetCookie(this.CookieName);if(e){var t=e.split(this.ValueDelimiter);if(t)for(var i=0;i<t.length;i++){var n=t[i].split("=");n&&2==n.length&&checkNameValuePair(n[0],n[1])&&("seg"==n[0]?(this.origFieldOrder.push("segment"),this.SetSegmentId(decodeURIComponent(n[1])),SetPersonaCookie(this.CookieName,null,-30)):(this.origFieldOrder.push(n[0]),this.Put(n[0],decodeURIComponent(n[1]))))}}}function PersistValues(){var e=genLastUpdatedDate();this.SetLastUpdate(e),this.SetLastSent(e);for(var t,i="",n=0;n<this.origFieldOrder.length;n++)i+=this.origFieldOrder[n]+"="+encodeURIComponent(this.Get(this.origFieldOrder[n])),i+=this.ValueDelimiter;for(t in this.Table)"function"!=typeof this.Table[t]&&(null==this.Table[t]||arrayContains(this.origFieldOrder,t)||(i+=t+"="+encodeURIComponent(this.Table[t]),i+=this.ValueDelimiter));SetPersonaCookie(this.CookieName,i,365),SetPersonaCookie("GW",this.GetCustomerType()+"|"+this.GetUserType()+"|"+this.GetProfileType()+"|"+this.GetSegmentId()+"|"+this.GetSegmentGroup()+"|"+this.GetSite())}function arrayContains(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}function SetPersonaCookie(e,t,i){var n=GetCookieDomain_LegacyMode(),s=new Date;s.setDate(s.getDate()+i),document.cookie=e+"="+t+(i?";expires="+s.toGMTString():"")+";path=/"+(n?";domain="+n:"")}function GetCookieDomain_LegacyMode(){var e=null,t=document.domain.split(".");return e=2<=t.length?t[t.length-2]+"."+t[t.length-1]:e}function GetCookieDomain(){var e,t=null;for(e in[".chase.com",".cardmemberservices.com"])if(0<window.location.toString().indexOf(e)){t=e;break}return t}function GetCookie(e){var t=document.cookie.indexOf(e+"=");if(-1==t)return null;t=t+e.length+1,e=document.cookie.indexOf(";",t);return-1==e&&(e=document.cookie.length),unescape(document.cookie.substring(t,e))}function checkNameValuePair(e,t){var i=!1;if(t&&0<t.length)switch(e){case"zip":new RegExp("^\\d{5}-?(\\d{4})?$").test(t)&&(i=!0);break;case"source_code":case"source_code_applied":4==t.length&&(i=!0);break;case"lsid":case"segg":i=!0;break;case"seg":case"segment":3==t.length&&(i=!0);break;case"site":case"ct":case"ut":case"pt":case"pfid":i=!0;break;case"RPC":new RegExp("^([A-Za-z0-9]{3,4}|,)*,$").test(t)&&(i=!0);break;case"preview":i=!0;break;case"AOC":new RegExp("^([A-Za-z0-9]{1,5}|,)*,$").test(t)&&(i=!0);break;case"known":new RegExp("^(Y|N)$").test(t)&&(i=!0);break;case"ECI":i=!0;break;case"GUID":new RegExp("^[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}$").test(t)&&(i=!0);break;case"lastUpdate":case"lastSent":new RegExp("^\\d{4}-\\d{2}-\\d{2}$").test(t)&&(i=!0);break;case"locale":case"accts":i=!0}return i}function genLastUpdatedDate(){var e=new Date,t=e.getMonth()+1,i=e.getDate();return t<10&&(t="0"+t),i<10&&(i="0"+i),e.getFullYear()+"-"+t+"-"+i}PersonalizationCookie.prototype=new Hashtable;
