var LoginRadiusSDK=function(){function o(e){if(window[e]){e=window[e];try{return e.setItem("test","1"),e.removeItem("test"),1}catch(e){return}}}function e(e){return(o("localStorage")&&null!==localStorage.getItem(e)&&void 0!==localStorage.getItem(e)&&""!==localStorage.getItem(e)?localStorage:o("sessionStorage")&&null!==sessionStorage.getItem(e)&&void 0!==sessionStorage.getItem(e)&&""!==sessionStorage.getItem(e)?sessionStorage:documentCookies).getItem(e)}function n(e,t){var n=!0;o("localStorage")&&(localStorage.setItem(e,t),n=!1),o("sessionStorage")&&(sessionStorage.setItem(e,t),n=!1),n&&documentCookies.setItem(e,t,"",window.location)}function i(){for(var e=s.location.hash?s.location.hash.substr(1).split("&"):[],t={},n=0;n<e.length;n++){var o=e[n].split("=");t[o[0]]=decodeURIComponent(o[1])}return t}function a(e){var t,n=[];for(t in e)n.push(t+"="+encodeURIComponent(e[t]));s.location.hash=n.join("&")}var s;(s=window).hash={get:function(e){var t=i();return e?t[e]:t},add:function(e){var t,n=i();for(t in e)n[t]=e[t];a(n)},remove:function(e){e="string"==typeof e?[e]:e;for(var t=i(),n=0;n<e.length;n++)delete t[e[n]];a(t)},clear:function(){a({})}};var u={},l={Description:"The access token is not valid",ErrorCode:906,Message:"The LoginRadius access token is invalid, please use the correct or valid access token in order to process this request."},c={Description:"The provided LoginRadius API key is invalid, please use a valid API key of your LoginRadius account.",ErrorCode:920,Message:"API key is invalid"},r={isauthenticated:!1,setLoginCallback:function(e){r.onlogin=e}};documentCookies={getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,o,i,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="",c=function(e){if(1/0===e)return"Fri, 31 Dec 9999 23:59:59 GMT";var t=new Date;return t.setTime(t.getTime()+1e3*e),t.toGMTString()};if(n)switch(n.constructor){case Number:s=1/0==="; expires="+c(n)+n?"":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(i?"; domain="+i:"")+(o?"; path="+o:"")+(a?"; secure":""),!0},removeItem:function(e,t,n){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/),t=e.length,n=0;n<t;n++)e[n]=decodeURIComponent(e[n]);return e}},r.getPhotos=function(e,t){var n=r.getToken();n?u.jsonpCall("/api/v2/photo?albumid="+e+"&access_token="+n,function(e){t(e)}):t(l)},r.getCheckins=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/checkin?access_token="+e,function(e){t(e)}):t(l)},r.getAlbums=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/album?access_token="+e,function(e){t(e)}):t(l)},r.getAudios=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/audio?access_token="+e,function(e){t(e)}):t(l)},r.getMentions=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/mention?access_token="+e,function(e){t(e)}):t(l)},r.getFollowings=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/following?access_token="+e,function(e){t(e)}):t(l)},r.getEvents=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/event?access_token="+e,function(e){t(e)}):t(l)},r.getPosts=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/post?access_token="+e,function(e){t(e)}):t(l)},r.getCompanies=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/company?access_token="+e,function(e){t(e)}):t(l)},r.getGroups=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/group?access_token="+e,function(e){t(e)}):t(l)},r.getStatuses=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/status?access_token="+e,function(e){t(e)}):t(l)},r.getContacts=function(e,t){var n=r.getToken();n?u.jsonpCall("/api/v2/contact?nextcursor="+e+"&access_token="+n,function(e){t(e)}):t(l)},r.getVideos=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/video?access_token="+e,function(e){t(e)}):t(l)},r.getLikes=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/like?access_token="+e,function(e){t(e)}):t(l)},r.postStatus=function(e,t,n,o,i,a,s){var c=r.getToken();c?u.jsonpCall("/api/v2/status/js?title="+e+"&url="+t+"&imageurl="+o+"&status="+n+"&caption="+i+"&description="+a+"&access_token="+c,function(e){s(e)}):s(l)},r.getUserProfile=function(t){var e=r.getToken();e?u.jsonpCall("/api/v2/userprofile?access_token="+e,function(e){t(e)}):t(l)},r.postMessagePOST=function(e,t,n,o){var i=r.getToken();i?u.xhttpCall("POST",{},"/api/v2/message?to="+e+"&subject="+t+"&message="+n+"&access_token="+i,function(e){o(e)}):o(l)},r.postStatusPOST=function(e,t,n,o,i,a,s){var c=r.getToken();c?u.xhttpCall("POST",{},"/api/v2/status?title="+e+"&url="+t+"&imageurl="+o+"&status="+n+"&caption="+i+"&description="+a+"&access_token="+c,function(e){s(e)}):s(l)},r.postMessage=function(e,t,n,o){var i=r.getToken();i?u.jsonpCall("/api/v2/message/js?to="+e+"&subject="+t+"&message="+n+"&access_token="+i,function(e){o(e)}):o(l)},r.getPage=function(e,t){var n=r.getToken();n?u.jsonpCall("/api/v2/page?pagename="+e+"&access_token="+n,function(e){t(e)}):t(l)},r.checkEmailAvailability=function(e,t){u.jsonpCall("/identity/v2/auth/email?email="+e+"&apikey="+r.getApiKey(),function(e){t(e)})},r.checkUserNameAvailability=function(e,t){u.jsonpCall("/identity/v2/auth/username?username="+e+"&apikey="+r.getApiKey(),function(e){t(e)})},r.loginByEmail=function(e,t,n,o,i,a,s){u.jsonpCall("/identity/v2/auth/login?email="+e+"&password="+t+"&verificationurl="+n+"&loginurl="+o+"&emailtemplate="+i+"&g-recaptcha-response="+a+"&apikey="+r.getApiKey(),function(e){s(e)})},r.loginByUserName=function(e,t,n,o,i,a,s){u.jsonpCall("/identity/v2/auth/login?username="+e+"&password="+t+"&verificationurl="+n+"&loginurl="+o+"&emailtemplate="+i+"&g-recaptcha-response="+a+"&apikey="+r.getApiKey(),function(e){s(e)})},r.readAllProfilesByToken=function(t){var e=r.getToken();e?u.jsonpCall("/identity/v2/auth/account?access_token="+e+"&apikey="+r.getApiKey(),function(e){t(e)}):t(l)},r.socialIdentity=function(t){var e=r.getToken();e?u.jsonpCall("/identity/v2/auth/socialidentity?access_token="+e+"&apikey="+r.getApiKey(),function(e){t(e)}):t(l)},r.validateAccessToken=function(t){var e=r.getToken();e?u.jsonpCall("/identity/v2/auth/access_token/validate?access_token="+e+"&apikey="+r.getApiKey(),function(e){t(e)}):t(l)},r.verifyEmail=function(e,t,n,o){u.jsonpCall("/identity/v2/auth/email?verificationtoken="+e+"&url="+encodeURIComponent(t)+"&welcomeemailtemplate="+n+"&apikey="+r.getApiKey(),function(e){o(e)})},r.deleteAccount=function(e,t){u.jsonpCall("/identity/v2/auth/account/delete?deletetoken="+e+"&apikey="+r.getApiKey(),function(e){t(e)})},r.accessTokenInvalidate=function(t){var e=r.getToken();e?u.jsonpCall("/identity/v2/auth/access_token/invalidate?access_token="+e+"&apikey="+r.getApiKey(),function(e){t(e)}):t(l)},r.getSecurityQuestionsByAccessToken=function(t){var e=r.getToken();e?u.jsonpCall("/identity/v2/auth/securityquestion/accesstoken?access_token="+e+"&apikey="+r.getApiKey(),function(e){t(e)}):t(l)},r.getSecurityQuestionsByEmail=function(e,t){u.jsonpCall("/identity/v2/auth/securityquestion/email?email="+e+"&apikey="+r.getApiKey(),function(e){t(e)})},r.getSecurityQuestionsByUserName=function(e,t){u.jsonpCall("/identity/v2/auth/securityquestion/username?username="+e+"&apikey="+r.getApiKey(),function(e){t(e)})},r.getSecurityQuestionsByPhone=function(e,t){u.jsonpCall("/identity/v2/auth/securityquestion/phone?phone="+encodeURIComponent(e)+"&apikey="+r.getApiKey(),function(e){t(e)})},r.getCustomObjectByToken=function(e,t){var n=r.getToken();n?u.jsonpCall("/identity/v2/auth/customobject?access_token="+n+"&objectname="+e+"&apikey="+r.getApiKey(),function(e){t(e)}):t(l)},r.getCustomObjectByRecordIdAndToken=function(e,t,n){var o=r.getToken();o?u.jsonpCall("/identity/v2/auth/customobject/"+t+"?access_token="+o+"&objectname="+e+"&apikey="+r.getApiKey(),function(e){n(e)}):n(l)},r.GoogleJWT=function(e,t){u.jsonpCall("/api/v2/access_token/googlejwt?key="+r.getApiKey()+"&id_token="+e,function(e){n("LRTokenKey",e.access_token),t(e)})},r.getToken=function(){return sessionStorage.getItem("LRTokenKey")},r.getApiKey=function(){if(e("lrApiKey"))return apikey=e("lrApiKey"),e("lrApiKey");console.log("API Key not found, The API Key needs to be initialized for this API Call")},r.getApiKeyNoMessage=function(){if(e("lrApiKey"))return apikey=e("lrApiKey"),e("lrApiKey")},r.addEmail=function(e,t,n,o){var i=r.getToken();i?u.xhttpCall("POST",e,"/identity/v2/auth/email?access_token="+i+"&verificationurl="+encodeURIComponent(t)+"&emailtemplate="+n,function(e){o(e)}):o(l)},r.sendForgotPassword=function(e,t,n,o){u.xhttpCall("POST",e,"/identity/v2/auth/password?resetpasswordurl="+encodeURIComponent(t)+"&emailtemplate="+n,function(e){o(e)})},r.userRegistrationByEmail=function(e,t,n,o,i){u.xhttpCall("POST",e,"/identity/v2/auth/register?sott="+t+"&verificationurl="+encodeURIComponent(n)+"&emailtemplate="+o,function(e){i(e)})},r.loginByEmailPOST=function(e,t,n,o,i,a){u.xhttpCall("POST",e,"/identity/v2/auth/login?verificationurl="+encodeURIComponent(t)+"&loginurl="+n+"&emailtemplate="+o+"&g-recaptcha-response="+i,function(e){a(e)})},r.loginByUserNamePOST=function(e,t,n,o,i,a){u.xhttpCall("POST",e,"/identity/v2/auth/login?verificationurl="+encodeURIComponent(t)+"&loginurl="+n+"&emailtemplate="+o+"&g-recaptcha-response="+i,function(e){a(e)})},r.createCustomObjectByToken=function(e,t,n,o){(n=r.getToken())?u.xhttpCall("POST",e,"/identity/v2/auth/customobject?access_token="+n+"&objectname="+t,function(e){o(e)}):o(l)},r.changePassword=function(e,t){var n=r.getToken();n?u.xhttpCall("PUT",e,"/identity/v2/auth/password?access_token="+n,function(e){t(e)}):t(l)},r.linkSocialIdentities=function(e,t){var n=r.getToken();n?u.xhttpCall("PUT",e,"/identity/v2/auth/socialidentity?access_token="+n,function(e){t(e)}):t(l)},r.resendEmailVerification=function(e,t,n,o){u.xhttpCall("PUT",e,"/identity/v2/auth/register?verificationurl="+t+"&emailtemplate="+n,function(e){o(e)})},r.resetPasswordByResetToken=function(e,t){u.xhttpCall("PUT",e,"/identity/v2/auth/password",function(e){t(e)})},r.resetPasswordBySecurityQuestion=function(e,t){u.xhttpCall("PUT",e,"/identity/v2/auth/password/securityanswer",function(e){t(e)})},r.setUserName=function(e,t){var n=r.getToken();n?u.xhttpCall("PUT",e,"/identity/v2/auth/username?access_token="+n,function(e){t(e)}):t(l)},r.updateProfileByToken=function(e,t,n,o,i){var a=r.getToken();a?u.xhttpCall("PUT",e,"/identity/v2/auth/account?access_token="+a+"&verificationurl="+t+"&emailtemplate="+n+"&smstemplate="+o,function(e){i(e)}):i(l)},r.updateSecurityQuestionByToken=function(e,t){var n=r.getToken();n?u.xhttpCall("PUT",e,"/identity/v2/auth/account?access_token="+n,function(e){t(e)}):t(l)},r.updateCustomObjectByObjectRecordIdAndToken=function(e,t,n,o,i){var a=r.getToken();a?u.xhttpCall("PUT",e,"/identity/v2/auth/customobject/"+o+"?access_token="+a+"&objectname="+t+"&updatetype="+n,function(e){i(e)}):i(l)},r.deleteAccountWithEmailConfirmation=function(e,t,n){var o=r.getToken();o?u.xhttpCall("DELETE",{},"/identity/v2/auth/account?access_token="+o+"&deleteurl="+e+"&emailtemplate="+t,function(e){n(e)}):n(l)},r.removeEmail=function(e,t){var n=r.getToken();n?u.xhttpCall("DELETE",e,"/identity/v2/auth/email?access_token="+n,function(e){t(e)}):t(l)},r.unlinkSocialIdentity=function(e,t){var n=r.getToken();n?u.xhttpCall("DELETE",e,"/identity/v2/auth/socialidentity?access_token="+n,function(e){t(e)}):t(l)},r.deleteCustomObjectByRecordIdAndToken=function(e,t,n){var o=r.getToken();o?u.xhttpCall("DELETE",{},"/identity/v2/auth/customobject/"+t+"?access_token="+o+"&objectname="+e,function(e){n(e)}):n(l)},r.postMessageAPI=r.postMessagePOST,r.statusPostingPOST=r.postStatusPOST,r.getLoginByEmail=r.loginByEmail,r.LoginByEmail=r.loginByEmailPOST,r.getLoginByUserName=r.loginByUserName,r.LoginByUserName=r.loginByUserNamePOST,u.jsonpCall=function(e,t){var n,o;r.getApiKeyNoMessage()?(n="Loginradius"+Math.floor(1e18*Math.random()+1),window[n]=function(e){t(e);try{delete window[n]}catch(e){window[n]=void 0}document.body.removeChild(o)},(o=document.createElement("script")).src="https://api.loginradius.com"+e+(-1!=e.indexOf("?")?"&":"?")+"callback="+n,o.type="text/javascript",document.body.appendChild(o)):t(c)},u.xhttpCall=function(e,t,n,o){var i,a=r.getApiKey();a?((i=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status?o(i.responseText):4==this.readyState&&console.log("Error making API call")},i.open(e,"https://api.loginradius.com"+n+(-1!=n.indexOf("?")?"&":"?")+"apikey="+a),i.setRequestHeader("Content-type","application/json"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.onerror=function(){console.log("Error with XMLHttpRequest")},i.send(JSON.stringify(t))):o(c)},u.addEvent=function(e,t,n){var o=[];for(t instanceof Array?o=t:o.push(t),t=0;t<o.length;t++)o[t].attachEvent?o[t].attachEvent("on"+e,function(e){n(e)}):o[t].addEventListener&&o[t].addEventListener(e,n,!1)},u.addEvent("message",window,function(e){-1!=e.origin.indexOf("hub.loginradius.com")&&loginradiushtml5passToken(e.data)}),window.loginradiushtml5passToken=function(e){sessionStorage.setItem("LRTokenKey",e),r.isauthenticated=!0;var t=setInterval(function(){r.onlogin&&(r.onlogin(),clearInterval(t))},100)};var t=hash.get("lr-token");return t&&(window.opener&&window.opener.loginradiushtml5passToken?(window.opener.loginradiushtml5passToken(t),document.write('<style type="text/css">body { display: none !important; } </style>'),window.close()):window.loginradiushtml5passToken(t)),r.initSDK=function(e){n("lrApiKey",e.key)},r}();
