!function(){"use strict";avm.define("vue-action-boxes",function(){function o(o,e,t){var i,n=p(t.options.option_1.pricelist),r=l(t.options),a=0,s=r[0];void 0!==t.default_option?(t.default_option=parseInt(t.default_option),a=t.default_option-1):void 0!==t.platform_detect&&(t.platform_detect="true"===t.platform_detect,a=-1<(i=function(e){var t,o=1,i=[];for(t in e)i.push(e["option_"+o].platform),o++;return i}(t.options)).indexOf(m)?i.indexOf(m):i.indexOf(t.default_platform)),t.boxCount=n,t.datasetsBoxes=r,t.datasetBoxes=s,t.showRegularBoxes=!1,t.contentForBox="",t.selectedIndex=a,t.selectedValue="",t.hide_toggler="true"===t.hide_toggler,t.horizontal_toggler="true"===t.horizontal_toggler,t.toggler_placeholder="true"===t.toggler_placeholder,t.hide_desktop_title="true"===t.hide_desktop_title,t.hide_mobile_title="true"===t.hide_mobile_title,t.hide_desktop_period="true"===t.hide_desktop_period;try{var c=JSON.parse(sessionStorage.selectedIndex)[location.pathname]["vue-action-box-"+o];t.selectedIndex=0<=c?c:a}catch(e){}return window["vue-action-box-"+o]=new Vue({el:e,delimiters:["<%","%>"],data:function(){return t},methods:{changeData:function(e){var t=this.options["option_"+(e+1)],o=void 0===t.content;this.datasetBoxes=this.datasetsBoxes[e],this.showRegularBoxes=!!o,this.contentForBox=o?"":u(t.content),this.selectedIndex=e,this.selectedValue=t.toggler_text;var i=this;setTimeout(function(){var o,e;0<(e=h((o=i).$el).find(".js-toggle-to-option")).length&&e.on("click",function(e){var t=h(this).data("option")-1;e.preventDefault(),o.changeData(t)})},10)}},mounted:function(){var e;this.changeData(this.selectedIndex),this.horizontal_toggler&&(this.options.option_2?(this.horizontal_toggler=d(o),e=this,h(window).on("resize",function(){e.horizontal_toggler=d(o)})):this.horizontal_toggler=!0)},watch:{selectedIndex:function(e){var t={};t[location.pathname]={};try{t=JSON.parse(sessionStorage.selectedIndex)}catch(e){}t[location.pathname]||(t[location.pathname]={}),t[location.pathname]["vue-action-box-"+o]=e,sessionStorage.selectedIndex=JSON.stringify(t)}}}),window["vue-action-box-"+o]}function l(e){var t,o=[];for(t in e)void 0!==e[t].pricelist?o.push(e[t].pricelist):o.push(null);return o}function p(e){var t,o=0;for(t in e)e.hasOwnProperty(t)&&o++;return o}function u(e){return e.replace(new RegExp("&lt;","gm"),"<").replace(new RegExp("&gt;","gm"),">")}function d(e){var t,o=h(".js-vue-action-box").eq(e),e=o.find(".js-actionbox-container").width(),i=o.find(".js-horizontal-toggler").find(".js-toggler"),n=!1,r=[];if(i.length<4)for(var a=0;a<i.length;a++){if(t=i.eq(a).outerWidth(),r.push(t),180<t){n=!1;break}n=!0}return n&&((o=Math.max.apply(Math,r))*i.length<=e?i.outerWidth(o):n=!1),n}Vue.config.devtools=!0,Vue.config.errorHandler=function(e,t,o){console.log("errorHandler"),console.log(1,e),console.log(2,t),console.log(3,o)};var h=avm.require("jquery"),m=avm.require("avast.detect")().os.name.toLowerCase(),e=h(".js-vue-action-box"),t=h('link[href*=".css"]').attr("href").split("c/")[0];return 0!==e.length&&(Vue.component("toggler",{template:"#toggler",delimiters:["<%","%>"],props:["options","selected_index","selected_value","hide_toggler","horizontal_toggler","toggler_placeholder"],computed:{singleOption:function(){return!this.options.option_2}},methods:{handleClick:function(e,t){this.$emit("change_data",t)},getTogglerCssClasses:function(e){var t=!1,o=!1;return(e?Number(e.substring(7))-1:null)===this.selected_index&&(t=!0),this.options.option_2||(o=!(t=!1)),{active:t,disabled:o}}}}),Vue.component("box",{delimiters:["<%","%>"],props:["set","iterator","options","selected_index","hide_desktop_title","hide_mobile_title"],template:"#box",methods:{htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].innerText},renderLabel:function(e){var t=this.set[Object.keys(this.set)[this.iterator]].discountFormatted,o=this.set[Object.keys(this.set)[this.iterator]].discountPercent;return e.replace("##discount_price##",t).replace("##discount_percentage##",o)},setCampaignMarkerCookie:function(){var e=this.$el.querySelectorAll('[data-role="cart-link"]');return e.length&&this.campaignMarker.setCampaignMarkerCookie(e),void 0!==avastGlobals.web.abtest&&e.forEach(function(e){var t=e.getAttribute("data-campaign-marker").split("~"),o=e.getAttribute("href").split("~"),i=avastGlobals.web.abtest.ticketNumber,n=avastGlobals.web.abtest.testVariant;t[3]=i,t[4]=n,o[3]=i,o[4]=n,e.setAttribute("data-campaign-marker",t.join("~")),e.setAttribute("href",o.join("~"))}),e}},mounted:function(){this.campaignMarker=avm.require("avast.web.campaignMarkerCookie")(),this.setCampaignMarkerCookie()},updated:function(){this.setCampaignMarkerCookie()},computed:{compileOldPrice:function(){var e=this.set[Object.keys(this.set)[this.iterator]],t=e.priceIntegerPart,o=e.decimalSeparator,i=e.priceDecimalPart,n=e.currencySymbol,i=t+(""!=i?o+i:"");return e.priceFormat.replace("#c",n).replace("#p",i)}}}),Vue.component("box-content",{delimiters:["<%","%>"],props:["content"],template:"#box-content",computed:{updateImageLinks:function(){return this.content.replace(/'i\//gm,"'"+t+"i/")}}}),Vue.component("installments",{delimiters:["<%","%>"],props:["price","sr_inst_text","installments_placeholder"],template:"#installments",data:function(){return{}},computed:{installmentsPosition:function(){return this.price.installmentsFormat.indexOf("#i")>this.price.installmentsFormat.indexOf("#p")?"before":"after"}}}),Vue.component("price-wrapper",{delimiters:["<%","%>"],props:["options","price"],template:"#price-wrapper",data:function(){return{}},computed:{symbolShowPrefix:function(){return/^#c/.test(this.price.priceFormat)},symbol:function(){return this.symbolShowPrefix?this.price.currencySymbol.replace("&nbsp;",""):"&nbsp;"+this.price.currencySymbol.replace("&nbsp;","")},decimal:function(){return this.price.decimalSeparator+this.price.realPriceDecimalPart},showDecimal:function(){return""!==this.price.realPriceDecimalPart},priceRowSize:function(){return 5<this.price.realPriceIntegerPart.replace(this.price.thousandSeparator," ").length?"price-row-medium":""}}}),e.each(function(e,t){o(e,this,h(this).data().settings)}),{getDatasetForBoxes:l,objectSize:p,intializeVueInstance:o,convertStringToHTML:u,shouldDisplayHorizontalToggler:d})}())}();
