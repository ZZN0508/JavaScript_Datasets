(function(){this.Blue=this.Blue||{},this.Blue.version=this.Blue.version||{},this.Blue.buildDate=this.Blue.buildDate||{},this.Blue.buildHash=this.Blue.buildHash||{},this.Blue.version["blue-view-ractive/view"]="1.9.0",this.Blue.buildDate["blue-view-ractive/view"]="2020-11-16T15:53:38.603Z",this.Blue.buildHash["blue-view-ractive/view"]="b7ceebd"}).call(this),requirejs.config({paths:{hammerjs:"hammerjs/hammer",ractive:"ractive/ractive","xss-filters":"xss-filters/dist/xss-filters.min"},shim:{"xss-filters":{exports:"xssFilters"}}}),define("blue-view-ractive/config",function(){}),function(r,a){"use strict";var o=["","webkit","Moz","MS","ms","o"],t=a.createElement("div"),s=Math.round,g=Math.abs,v=Date.now;function u(t,e,n){return setTimeout(d(t,n),e)}function n(t,e,n){return Array.isArray(t)&&(h(t,n[e],n),1)}function h(t,e,n){if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function e(n,t,e){var i="DEPRECATED METHOD: "+t+"\n"+e+" AT \n";return function(){var t=new Error("get-stack-trace"),e=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",t=r.console&&(r.console.warn||r.console.log);return t&&t.call(r.console,i,e),n.apply(this,arguments)}}var l="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign,i=e(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)n&&void 0!==t[i[r]]||(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),c=e(function(t,e){return i(t,e,!0)},"merge","Use `assign`.");function p(t,e,n){var i=e.prototype;(e=t.prototype=Object.create(i)).constructor=t,e._super=i,n&&l(e,n)}function d(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function m(t,e){return void 0===t?e:t}function y(e,t,n){h(E(t),function(t){e.addEventListener(t,n,!1)})}function b(e,t,n){h(E(t),function(t){e.removeEventListener(t,n,!1)})}function w(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function x(t,e){return-1<t.indexOf(e)}function E(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function O(t,n,e){for(var i=[],r=[],o=0;o<t.length;){var s=n?t[o][n]:t[o];k(r,s)<0&&i.push(t[o]),r[o]=s,o++}return i=e?n?i.sort(function(t,e){return t[n]>e[n]}):i.sort():i}function T(t,e){for(var n,i=e[0].toUpperCase()+e.slice(1),r=0;r<o.length;){if((n=(n=o[r])?n+i:e)in t)return n;r++}}var A=1;function C(t){t=t.ownerDocument||t;return t.defaultView||t.parentWindow||r}var S="ontouchstart"in r,j=void 0!==T(r,"PointerEvent"),P=S&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N=["x","y"],I=["clientX","clientY"];function F(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){f(e.options.enable,[e])&&n.handler(t)},this.init()}function D(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&e&&i-r==0,r=12&e&&i-r==0;n.isFirst=!!o,n.isFinal=!!r,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=R(e)),1<r&&!n.firstMultiple?n.firstMultiple=R(e):1===r&&(n.firstMultiple=!1);var o,s,a=n.firstInput,u=n.firstMultiple,h=(u||a).center,l=e.center=M(i);e.timeStamp=v(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=K(h,l),e.distance=L(h,l),o=n,r=(s=e).center,a=o.offsetDelta||{},h=o.prevDelta||{},l=o.prevInput||{},1!==s.eventType&&4!==l.eventType||(h=o.prevDelta={x:l.deltaX||0,y:l.deltaY||0},a=o.offsetDelta={x:r.x,y:r.y}),s.deltaX=h.x+(r.x-a.x),s.deltaY=h.y+(r.y-a.y),e.offsetDirection=V(e.deltaX,e.deltaY);var c,p,d,f,m,a=B(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=a.x,e.overallVelocityY=a.y,e.overallVelocity=g(a.x)>g(a.y)?a.x:a.y,e.scale=u?(a=u.pointers,L(i[0],i[1],I)/L(a[0],a[1],I)):1,e.rotation=u?(m=u.pointers,K(i[1],i[0],I)+K(m[1],m[0],I)):0,e.maxPointers=!n.prevInput||e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers,u=e,m=(i=n).lastInterval||u,n=u.timeStamp-m.timeStamp,8!=u.eventType&&(25<n||void 0===m.velocity)?(c=(d=B(n,n=u.deltaX-m.deltaX,f=u.deltaY-m.deltaY)).x,p=d.y,d=g(d.x)>g(d.y)?d.x:d.y,f=V(n,f),i.lastInterval=u):(d=m.velocity,c=m.velocityX,p=m.velocityY,f=m.direction),u.velocity=d,u.velocityX=c,u.velocityY=p,u.direction=f;t=t.element;w(e.srcEvent.target,t)&&(t=e.srcEvent.target),e.target=t}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function R(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:s(t.pointers[n].clientX),clientY:s(t.pointers[n].clientY)},n++;return{timeStamp:v(),pointers:e,center:M(e),deltaX:t.deltaX,deltaY:t.deltaY}}function M(t){var e=t.length;if(1===e)return{x:s(t[0].clientX),y:s(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:s(n/e),y:s(i/e)}}function B(t,e,n){return{x:e/t||0,y:n/t||0}}function V(t,e){return t===e?1:g(t)>=g(e)?t<0?2:4:e<0?8:16}function L(t,e,n){var i=e[(n=n||N)[0]]-t[n[0]],n=e[n[1]]-t[n[1]];return Math.sqrt(i*i+n*n)}function K(t,e,n){var i=e[(n=n||N)[0]]-t[n[0]],n=e[n[1]]-t[n[1]];return 180*Math.atan2(n,i)/Math.PI}F.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(C(this.element),this.evWin,this.domHandler)}};var U={mousedown:1,mousemove:2,mouseup:4};function z(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,F.apply(this,arguments)}p(z,F,{handler:function(t){var e=U[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var W={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},$={2:"touch",3:"pen",4:"mouse",5:"kinect"},H="pointerdown",q="pointermove pointerup pointercancel";function Q(){this.evEl=H,this.evWin=q,F.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(H="MSPointerDown",q="MSPointerMove MSPointerUp MSPointerCancel"),p(Q,F,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=W[i],o=$[t.pointerType]||t.pointerType,s="touch"==o,i=k(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?i<0&&(e.push(t),i=e.length-1):12&r&&(n=!0),i<0||(e[i]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(i,1))}});var Y={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function Z(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,F.apply(this,arguments)}p(Z,F,{handler:function(t){var e,n=Y[t.type];1===n&&(this.started=!0),this.started&&(e=function(t,e){var n=_(t.touches),t=_(t.changedTouches);return[n=12&e?O(n.concat(t),"identifier",!0):n,t]}.call(this,t,n),12&n&&e[0].length-e[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:e[0],changedPointers:e[1],pointerType:"touch",srcEvent:t}))}});var X={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function G(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},F.apply(this,arguments)}function J(){F.apply(this,arguments);var t=d(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function tt(t){var e,n,t=t.changedPointers[0];t.identifier===this.primaryTouch&&(e={x:t.clientX,y:t.clientY},this.lastTouches.push(e),n=this.lastTouches,setTimeout(function(){var t=n.indexOf(e);-1<t&&n.splice(t,1)},2500))}p(G,F,{handler:function(t){var e=X[t.type],n=function(t,e){var n=_(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o=_(t.changedTouches),s=[],a=this.target,u=n.filter(function(t){return w(t.target,a)});if(1===e)for(r=0;r<u.length;)i[u[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&s.push(o[r]),12&e&&delete i[o[r].identifier],r++;return s.length?[O(u.concat(s),"identifier",!0),s]:void 0}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),p(J,F,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)!function(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,tt.call(this,e)):12&t&&tt.call(this,e)}.call(this,e,n);else if(r&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),r=Math.abs(n-r.y);if(o<=25&&r<=25)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var et=T(t.style,"touchAction"),nt=void 0!==et,it=function(){if(!nt)return!1;var e={},n=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){e[t]=!n||r.CSS.supports("touch-action",t)}),e}();function rt(t,e){this.manager=t,this.set(e)}function ot(t){this.options=l({},this.defaults,t||{}),this.id=A++,this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function st(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function at(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function ut(t,e){e=e.manager;return e?e.get(t):t}function ht(){ot.apply(this,arguments)}function lt(){ht.apply(this,arguments),this.pX=null,this.pY=null}function ct(){ht.apply(this,arguments)}function pt(){ot.apply(this,arguments),this._timer=null,this._input=null}function dt(){ht.apply(this,arguments)}function ft(){ht.apply(this,arguments)}function mt(){ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function gt(t,e){return(e=e||{}).recognizers=m(e.recognizers,gt.defaults.preset),new vt(t,e)}function vt(t,e){this.options=l({},gt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(j?Q:P?G:S?J:z))(this,D),this.touchAction=new rt(this,this.options.touchAction),yt(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function yt(n,i){var r,o=n.element;o.style&&(h(n.options.cssProps,function(t,e){r=T(o.style,e),i?(n.oldCssProps[r]=o.style[r],o.style[r]=t):o.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}rt.prototype={set:function(t){"compute"==t&&(t=this.compute()),nt&&this.manager.element.style&&it[t]&&(this.manager.element.style[et]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){f(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(t){if(x(t,"none"))return"none";var e=x(t,"pan-x"),n=x(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":x(t,"manipulation")?"manipulation":"auto"}(e.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=x(i,"none")&&!it.none,o=x(i,"pan-y")&&!it["pan-y"],s=x(i,"pan-x")&&!it["pan-x"];if(r){var a=1===t.pointers.length,i=t.distance<2,t=t.deltaTime<250;if(a&&i&&t)return}if(!s||!o)return r||o&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},ot.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(n(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=ut(t,this)).id]||(e[t.id]=t).recognizeWith(this),this},dropRecognizeWith:function(t){return n(t,"dropRecognizeWith",this)||(t=ut(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(n(t,"requireFailure",this))return this;var e=this.requireFail;return-1===k(e,t=ut(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(n(t,"dropRequireFailure",this))return this;t=ut(t,this);t=k(this.requireFail,t);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(e){var n=this,t=this.state;function i(t){n.manager.emit(t,e)}t<8&&i(n.options.event+st(t)),i(n.options.event),e.additionalEvent&&i(e.additionalEvent),8<=t&&i(n.options.event+st(t))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){t=l({},t);if(!f(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(t){},getTouchAction:function(){},reset:function(){}},p(ht,ot,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,t=this.attrTest(t);return i&&(8&n||!t)?16|e:i||t?4&n?8|e:2&e?4|e:2:32}}),p(lt,ht,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(i=6&e.direction?(r=0===o?1:o<0?2:4,n=o!=this.pX,Math.abs(t.deltaX)):(r=0===s?1:s<0?8:16,n=s!=this.pY,Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return ht.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=at(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(ct,ht,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){var e;1!==t.scale&&(e=t.scale<1?"in":"out",t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(pt,ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=u(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),p(dt,ht,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),p(ft,ht,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return lt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&g(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=at(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(mt,ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&r&&n){if(4!=t.eventType)return this.failTimeout();r=!this.pTime||t.timeStamp-this.pTime<e.interval,n=!this.pCenter||L(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,n&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),gt.VERSION="2.0.7",gt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[dt,{enable:!1}],[ct,{enable:!1},["rotate"]],[ft,{direction:6}],[lt,{direction:6},["swipe"]],[mt],[mt,{event:"doubletap",taps:2},["tap"]],[pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},vt.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var i=this.recognizers,r=n.curRecognizer;(!r||8&r.state)&&(r=n.curRecognizer=null);for(var o=0;o<i.length;)e=i[o],2===n.stopped||r&&e!=r&&!e.canRecognizeWith(r)?e.reset():e.recognize(t),!r&&14&e.state&&(r=n.curRecognizer=e),o++}},get:function(t){if(t instanceof ot)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(n(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),(t.manager=this).touchAction.update(),t},remove:function(t){return n(t,"remove",this)||!(t=this.get(t))||-1!==(t=k(e=this.recognizers,t))&&(e.splice(t,1),this.touchAction.update()),this;var e},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return h(E(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return h(E(t),function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]}),this}},emit:function(t,e){var n,i,r;this.options.domEvents&&(n=t,i=e,(r=a.createEvent("Event")).initEvent(n,!0,!0),(r.gesture=i).target.dispatchEvent(r));var o=this.handlers[t]&&this.handlers[t].slice();if(o&&o.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var s=0;s<o.length;)o[s](e),s++}},destroy:function(){this.element&&yt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(gt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:vt,Input:F,TouchAction:rt,TouchInput:G,MouseInput:z,PointerEventInput:Q,TouchMouseInput:J,SingleTouchInput:Z,Recognizer:ot,AttrRecognizer:ht,Tap:mt,Pan:lt,Swipe:ft,Pinch:ct,Rotate:dt,Press:pt,on:y,off:b,each:h,merge:c,extend:i,assign:l,inherit:p,bindFn:d,prefixed:T}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=gt,"function"==typeof define&&define.amd?define("hammerjs",[],function(){return gt}):"undefined"!=typeof module&&module.exports?module.exports=gt:r.Hammer=gt}(window,document),function(t,e){var n,i;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ractive",e):(n=t.Ractive,(i=e()).noConflict=function(){return t.Ractive=n,i},t.Ractive=i)}(this,function(){"use strict";var f,t={el:void 0,append:!1,template:null,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,contextLines:0,data:{},computed:{},magic:!1,modifyArrays:!1,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},e={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},n="undefined"!=typeof window?window:null,a=n?document:null,i=!!a,r=("undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply);try{Object.defineProperty({},"test",{value:0}),f=!0}catch(t){f=!1}var h,o,s,u,l,c,p,d,m,g=!!a&&a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),v=["o","ms","moz","webkit"],y="http://www.w3.org/1999/xhtml",b="http://www.w3.org/2000/svg",w={html:y,mathml:"http://www.w3.org/1998/Math/MathML",svg:b,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns"};function x(){return a.createDocumentFragment()}function E(t){var e;if(t&&"boolean"!=typeof t)return n&&a&&t?t.nodeType?t:"string"==typeof t&&((e=!(e=a.getElementById(t))&&a.querySelector?a.querySelector(t):e)&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}if(h=g?function(t,e,n){return e&&e!==y?n?a.createElementNS(e,t,n):a.createElementNS(e,t):n?a.createElement(t,n):a.createElement(t)}:function(t,e,n){if(e&&e!==y)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return n?a.createElement(t,n):a.createElement(t)},i){for(s=h("div"),m=function(n){return function(t,e){return t[n](e)}},p=(u=["matches","matchesSelector"]).length;p--&&!o;)if(s[l=u[p]])o=m(l);else for(d=v.length;d--;)if(c=v[p]+l.substr(0,1).toUpperCase()+l.substring(1),s[c]){o=m(c);break}o=o||function(t,e){var n,i,r;for((i=t.parentNode)||(s.innerHTML="",i=s,t=t.cloneNode(),s.appendChild(t)),r=(n=i.querySelectorAll(e)).length;r--;)if(n[r]===t)return!0;return!1}}else o=null;function k(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function _(t){return null!=t&&t.toString?""+t:""}function O(t){return _(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var T,A,C,S,j=/[A-Z]/g;function P(t){return t.replace(j,function(t){return"-"+t.toLowerCase()})}try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),a&&Object.defineProperty(h("div"),"test",{value:0}),A=Object.defineProperty}catch(f){A=function(t,e,n){n.get?t[e]=n.get():t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(f){throw f}a&&Object.defineProperties(h("div"),{test:{value:0}}),C=Object.defineProperties}catch(f){C=function(t,e){for(var n in e)e.hasOwnProperty(n)&&A(t,n,e[n])}}try{Object.create(null),T=Object.create}catch(f){S=function(){},T=function(t,e){return null===t?{}:(S.prototype=t,t=new S,e&&Object.defineProperties(t,e),t)}}function N(e){for(var n,t=[],i=arguments.length-1;0<i--;)t[i]=arguments[i+1];return t.forEach(function(t){for(n in t)I.call(t,n)&&(e[n]=t[n])}),e}var I=Object.prototype.hasOwnProperty,F=Object.prototype.toString;function D(t){return"[object Array]"===F.call(t)}function R(t,e){return null===t&&null===e||"object"!=typeof t&&"object"!=typeof e&&t===e}function M(t){return!isNaN(parseFloat(t))&&isFinite(t)}function B(t){return t&&"[object Object]"===F.call(t)}function V(){}var L,K,U,z,W={};function $(t,e){return t.replace(/%s/g,function(){return e.shift()})}function H(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];throw t=$(t,e),new Error(t)}function q(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=$(t,e),W[t]||(W[t]=!0,U(t,e))}function Q(){Yl.DEBUG&&function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];t=$(t,e),U(t,e)}.apply(null,arguments)}function Y(){Yl.DEBUG&&q.apply(null,arguments)}r?(L=["%cRactive.js %c0.8.14 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],K=function(){var t,e;K=(!1!==Yl.WELCOME_MESSAGE&&(t="WELCOME_MESSAGE"in Yl?Yl.WELCOME_MESSAGE:"You're running Ractive 0.8.14 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",(e=!!console.groupCollapsed)&&console.groupCollapsed.apply(console,L),console.log(t),e&&console.groupEnd(L)),V)},U=function(t,e){var n,i,r;K(),"object"==typeof e[e.length-1]&&(r=(i=e.pop())?i.ractive:null)&&(r.component&&(n=r.component.name)&&(t="<"+n+"> "+t),(r=i.node||r.fragment&&r.fragment.rendered&&r.find("*"))&&e.push(r)),console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},z=function(){console.log.apply(console,arguments)}):U=z=K=V;function Z(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"}function X(t,e,n){e=G(t,e,n);return e?e[t][n]:null}function G(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function J(t,e,n,i){if(t===e)return null;if(i){n=X("interpolators",n,i);if(n)return n(t,e)||null;H(Z(i,"interpolator"))}return nt.number(t,e)||nt.array(t,e)||nt.object(t,e)||null}function tt(t){this.event=t,this.method="on"+t,this.deprecate=it[t]}var et,nt={number:function(e,t){var n;return M(e)&&M(t)?(n=(t=+t)-(e=+e))?function(t){return e+t*n}:function(){return e}:null},array:function(t,e){var n,i,r,o;if(!D(t)||!D(e))return null;for(n=[],i=[],o=r=Math.min(t.length,e.length);o--;)i[o]=J(t[o],e[o]);for(o=r;o<t.length;o+=1)n[o]=t[o];for(o=r;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var i,r,o,s,n;if(!B(t)||!B(e))return null;for(n in i=[],s={},o={},t)I.call(t,n)&&(I.call(e,n)?(i.push(n),o[n]=J(t[n],e[n])||function(t){return function(){return t}}(e[n])):s[n]=t[n]);for(n in e)I.call(e,n)&&!I.call(t,n)&&(s[n]=e[n]);return r=i.length,function(t){for(var e,n=r;n--;)e=i[n],s[e]=o[e](t);return s}}},it={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};function rt(t,e){-1===t.indexOf(e)&&t.push(e)}function ot(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}function st(t){return"string"==typeof t?[t]:void 0===t?[]:t}function at(t){return t[t.length-1]}function ut(t,e){!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)}function ht(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}tt.prototype.call=function(t,e,n){if(e[t])return n?e[t](n):e[t](),!0},tt.prototype.fire=function(t,e){this.call(this.method,t,e),!t[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,t,e)&&(this.deprecate.message?Q(this.deprecate.message):Q('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var lt={},ct={},pt={};"function"==typeof Promise?et=Promise:((et=function(t){var s,a=[],u=[],h=lt,e=(n=function(i){return function(t){var e,n;h===lt&&ft((e=(h=i)===ct?a:u,n=t,s=function(){for(var t;t=e.shift();)t(n)}))}})(ct),n=n(pt);try{t(e,n)}catch(t){n(t)}return(n={then:function(e,n){var o=new et(function(i,r){function t(n,t,e){"function"==typeof n?t.push(function(t){var e;try{e=n(t),function e(n,t,i,r){var o;if(t===n)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof et)t.then(i,r);else if(!t||"object"!=typeof t&&"function"!=typeof t)i(t);else{try{o=t.then}catch(e){return r(e),0}if("function"==typeof o){var s,a=function(t){s||(s=!0,e(n,t,i,r))},u=function(t){s||(s=!0,r(t))};try{o.call(t,a,u)}catch(e){if(!s)return r(e),s=!0,0}}else i(t)}}(o,e,i,r)}catch(t){r(t)}}):t.push(e)}t(e,a,i),t(n,u,r),h!==lt&&ft(s)});return o}}).catch=function(t){return this.then(null,t)},n}).all=function(s){return new et(function(n,i){var r,t,e,o=[];if(s.length)for(e=function(t,e){t&&"function"==typeof t.then?t.then(function(t){o[e]=t,--r||n(o)},i):(o[e]=t,--r||n(o))},r=t=s.length;t--;)e(s[t],t);else n(o)})},et.resolve=function(e){return new et(function(t){t(e)})},et.reject=function(n){return new et(function(t,e){e(n)})});var dt=et;function ft(t){setTimeout(t,0)}var mt=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};function gt(t){t.detach()}function vt(t){t.detachNodes()}function yt(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.outrosComplete=!0,t.parent&&!t.parent.outrosComplete?t.parent.decrementOutros(t):t.detachNodes()),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&!t.notifiedTotal&&(t.notifiedTotal=!0,t.parent.decrementTotal())))}mt.prototype.add=function(t){(t.isIntro?this.intros:this.outros).push(t)},mt.prototype.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},mt.prototype.decrementOutros=function(){--this.outroChildren,yt(this)},mt.prototype.decrementTotal=function(){--this.totalChildren,yt(this)},mt.prototype.detachNodes=function(){this.detachQueue.forEach(gt),this.children.forEach(vt),this.detachQueue=[]},mt.prototype.ready=function(){!function(t){var e,n,i=t.detachQueue,r=function t(e,n){if(n){for(var i=e.children.length;i--;)n=t(e.children[i],n);return n.concat(e.outros)}n=[];for(var r=e;r.parent;)r=r.parent;return t(r,n)}(t),o=i.length,s=0;t:for(;o--;){for(e=i[o].node,s=r.length;s--;)if((n=r[s].element.node)===e||n.contains(e)||e.contains(n))continue t;i[o].detach(),i.splice(o,1)}}(this)},mt.prototype.remove=function(t){ut(t.isIntro?this.intros:this.outros,t),yt(this)},mt.prototype.start=function(){this.children.forEach(function(t){return t.start()}),this.intros.concat(this.outros).forEach(function(t){return t.start()}),this.ready=!0,yt(this)};function bt(t,e){rt(e?Et.deferredObservers:Et.immediateObservers,t)}function wt(t){t._manager=Et.transitionManager,Et.transitionManager.add(t)}function xt(t,e){var n;if(Et){for(n=Et;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}var Et,kt=new tt("change"),_t=function(t,e){var n,i;return e&&(n=new dt(function(t){return i=t})),Et={previousBatch:Et,transitionManager:new mt(i,Et&&Et.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],ractives:[],instance:t},n},Ot=function(){!function t(){var e=Et.immediateObservers;Et.immediateObservers=[],e.forEach(Tt);var n,i=Et.fragments.length,e=Et.fragments;Et.fragments=[];var r=Et.ractives;for(Et.ractives=[];i--;){var o=(n=e[i]).ractive;Object.keys(o.viewmodel.changes).length&&kt.fire(o,o.viewmodel.changes),o.viewmodel.changes={},ut(r,o),n.update()}for(i=r.length;i--;){var s=r[i];kt.fire(s,s.viewmodel.changes),s.viewmodel.changes={}}Et.transitionManager.ready(),e=Et.deferredObservers,Et.deferredObservers=[],e.forEach(Tt);var a=Et.tasks;for(Et.tasks=[],i=0;i<a.length;i+=1)a[i]();if(Et.fragments.length||Et.immediateObservers.length||Et.deferredObservers.length||Et.ractives.length||Et.tasks.length)return t()}(),Et.previousBatch||Et.transitionManager.start(),Et=Et.previousBatch};function Tt(t){t.dispatch()}var At=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Ct=/([^\\](?:\\\\)*)\./,St=/\\|\./g,jt=/((?:\\)+)\1|\\(\.)/g;function Pt(t){return"string"==typeof t?t.replace(St,"\\$&"):t}function Nt(t){return t?t.replace(At,".$1"):""}function It(t){var e=[];for(t=Nt(t);n=Ct.exec(t);){var n=n.index+n[1].length;e.push(t.substr(0,n)),t=t.substr(n+1)}return e.push(t),e}function Ft(t){return"string"==typeof t?t.replace(jt,"$1$2"):t}var Dt=Function.prototype.bind;function Rt(t,e){if(!/this/.test(t.toString()))return t;var n,i=Dt.call(t,e);for(n in t)i[n]=t[n];return i}function Mt(t,e){for(var n=_t(t,!0),i=e.length;i--;){var r=e[i],o=r[0],r=r[1];"function"==typeof r&&(r=Rt(r,t)),o.set(r)}return Ot(),n}var Bt=/\*/;function Vt(t,e,n){return void 0===n&&(n=t.viewmodel),Bt.test(e)?n.findMatches(It(e)):[n.joinAll(It(e))]}function Lt(t,n,e){var i=[];if(B(n))for(var r in n)!function(e){n.hasOwnProperty(e)&&i.push.apply(i,Vt(t,e).map(function(t){return[t,n[e]]}))}(r);else i.push.apply(i,Vt(t,n).map(function(t){return[t,e]}));return i}function Kt(t,e,n){if("string"!=typeof e||!M(n))throw new Error("Bad arguments");return Mt(t,Lt(t,e,n).map(function(t){var e=t[0],n=t[1],t=e.get();if(!M(n)||!M(t))throw new Error("Cannot add to a non-numeric value");return[e,t+n]}))}var Ut=dt.resolve();A(Ut,"stop",{value:V});var zt=e.linear;function Wt(t,e,n,i){var r;i={easing:(r=(o=i||{}).easing?"function"==typeof o.easing?o.easing:t.easing[o.easing]:r)||zt,duration:"duration"in o?o.duration:400,complete:o.complete||V,step:o.step||V};var o=e.get();if(R(o,n))return i.complete(i.to),Ut;t=J(o,n,t,i.interpolator);return t?e.animate(o,n,i,t):(_t(),e.set(n),Ot(),Ut)}var $t=new tt("detach");function Ht(t,e){return t.compareDocumentPosition?2&t.compareDocumentPosition(e)?1:-1:qt(t,e)}function qt(t,e){for(var n,i=Yt(t.component||t._ractive.proxy),r=Yt(e.component||e._ractive.proxy),o=at(i),s=at(r);o&&o===s;)i.pop(),r.pop(),n=o,o=at(i),s=at(r);var o=o.component||o,s=s.component||s,a=o.parentFragment,t=s.parentFragment;if(a===t)return a.items.indexOf(o)-t.items.indexOf(s)||i.length-r.length;e=n.iterations;if(e)return e.indexOf(a)-e.indexOf(t)||i.length-r.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!")}function Qt(t){var e=t.parentFragment;return e||t.component&&(e=t.component.parentFragment)?e.owner:void 0}function Yt(t){for(var e=[t],n=Qt(t);n;)e.push(n),n=Qt(n);return e}function Zt(t,e,n,i){this.ractive=t,this.selector=e,this.live=n,this.isComponentQuery=i,this.result=[],this.dirty=!0}Zt.prototype.add=function(t){this.result.push(t),this.makeDirty()},Zt.prototype.cancel=function(){var t=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e);-1!==n&&(t.splice(n,1),t[e]=null)},Zt.prototype.init=function(){this.dirty=!1},Zt.prototype.makeDirty=function(){var t=this;this.dirty||(this.dirty=!0,xt(function(){return t.update()}))},Zt.prototype.remove=function(t){t=this.result.indexOf(this.isComponentQuery?t.instance:t);-1!==t&&this.result.splice(t,1)},Zt.prototype.update=function(){this.result.sort(this.isComponentQuery?qt:Ht),this.dirty=!1},Zt.prototype.test=function(t){return this.isComponentQuery?!this.selector||t.name===this.selector:t?o(t,this.selector):null};var Xt={};var Gt={};function Jt(t,e,n){if(void 0===n&&(n={}),e)return n.event?n.event.name=e:n.event={name:e,_noArg:!0},function t(e,n,i,r,o){void 0===o&&(o=!1);var s,a,u,h,l=!0;for(h=i,(u=e).event&&u._eventQueue.push(u.event),u.event=h,a=n.length;0<=a;a--)(s=e._subs[n[a]])&&(l=function(t,e,n,i){var r=null,o=!1;n&&!n._noArg&&(i=[n].concat(i));for(var s=0,a=(e=e.slice()).length;s<a;s+=1)e[s].off||!1!==e[s].callback.apply(t,i)||(o=!0);return n&&!n._noArg&&o&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}(e,s,i,r)&&l);return(h=e)._eventQueue.length?h.event=h._eventQueue.pop():h.event=null,e.parent&&l&&(o&&e.component&&(n=te(e.component.name+"."+n[n.length-1]),i&&!i.component&&(i.component=e)),l=t(e.parent,n,i,r)),l}(t,te(e),n.event,n.args,!0)}function te(t){return Gt.hasOwnProperty(t)?Gt[t]:Gt[t]=function(t){for(var e,n,i=It(t),r=[],o=function(t,e){return t?"*":i[e]},s=(e=!(e=Xt[i.length])?function(t){var e,n,i,r,o,s,a,u,h="";if(!Xt[t]){for(i=[];h.length<t;)h+=1;for(e=parseInt(h,2),r=function(t){return"1"===t},o=0;o<=e;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;s<a;s++)u.push(r(n[s]));i[o]=u}Xt[t]=i}return Xt[t]}(i.length):e).length;s--;)n=e[s].map(o).join("."),r.hasOwnProperty(n)||(r.push(n),r[n]=!0);return r}(t)}function ee(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function ne(t,e){for(var n,i,r=t.findContext().root,o=It(e),s=o[0];t;){if(t.isIteration){if(s===t.parent.keyRef)return 1<o.length&&ee(s),t.context.getKeyModel(t.key);if(s===t.parent.indexRef)return 1<o.length&&ee(s),t.context.getKeyModel(t.index)}if(((a=t.owner.aliases)||(a=t.aliases))&&a.hasOwnProperty(s)){var a=a[s];if(1===o.length)return a;if("function"==typeof a.joinAll)return a.joinAll(o.slice(1))}if(t.context&&(t.isRoot&&!t.ractive.component||(n=!0),t.context.has(s)))return(i?r.createLink(s,t.context.joinKey(o.shift()),s):t.context).joinAll(o);t.componentParent&&!t.ractive.isolated?(t=t.componentParent,i=!0):t=t.parent}if(!n)return r.joinAll(o)}var ie,re=[];function oe(){re.push(ie=[])}function se(){var t=re.pop();return ie=re[re.length-1],t}function ae(t){ie&&ie.push(t)}function ue(t,e){this.value=t,this.isReadonly=this.isKey=!0,this.deps=[],this.links=[],this.parent=e}function he(t){t.bind()}function le(t){t.cancel()}function ce(t){t.handleChange()}function pe(t){t.mark()}function de(t){t.marked()}function fe(t){t.markedAll()}function me(t){t.notifiedUpstream()}function ge(t){t.render()}function ve(t){t.teardown()}function ye(t){t.unbind()}function be(t){t.unrender()}function we(t){t.unrender(!0)}function xe(t){t.update()}function Ee(t){return t.toString()}function ke(t){return t.toString(!0)}ue.prototype.get=function(t){return t&&ae(this),Ft(this.value)},ue.prototype.getKeypath=function(){return Ft(this.value)},ue.prototype.rebinding=function(t,e){for(var n=this.deps.length;n--;)this.deps[n].rebinding(t,e,!1);for(n=this.links.length;n--;)this.links[n].rebinding(t,e,!1)},ue.prototype.register=function(t){this.deps.push(t)},ue.prototype.registerLink=function(t){rt(this.links,t)},ue.prototype.unregister=function(t){ut(this.deps,t)},ue.prototype.unregisterLink=function(t){ut(this.links,t)},ue.prototype.reference=V,ue.prototype.unreference=V;function _e(t,e){this.parent=t,this.ractive=e,this.value=e?t.getKeypath(e):t.getKeypath(),this.deps=[],this.children={},this.isReadonly=this.isKeypath=!0}_e.prototype.get=function(t){return t&&ae(this),this.value},_e.prototype.getChild=function(t){var e;return t._guid in this.children||(e=new _e(this.parent,t),(this.children[t._guid]=e).owner=this),this.children[t._guid]},_e.prototype.getKeypath=function(){return this.value},_e.prototype.handleChange=function(){for(var t=Object.keys(this.children),e=t.length;e--;)this.children[t[e]].handleChange();this.deps.forEach(ce)},_e.prototype.rebindChildren=function(t){for(var e=Object.keys(this.children),n=e.length;n--;){var i=this.children[e[n]];i.value=t.getKeypath(i.ractive),i.handleChange()}},_e.prototype.rebinding=function(t,e){for(var n=t?t.getKeypathModel(this.ractive):void 0,i=Object.keys(this.children),r=i.length;r--;)this.children[i[r]].rebinding(t,e,!1);for(r=this.deps.length;r--;)this.deps[r].rebinding(n,this,!1)},_e.prototype.register=function(t){this.deps.push(t)},_e.prototype.removeChild=function(t){t.ractive&&delete this.children[t.ractive._guid]},_e.prototype.teardown=function(){this.owner&&this.owner.removeChild(this);for(var t=Object.keys(this.children),e=t.length;e--;)this.children[t[e]].teardown()},_e.prototype.unregister=function(t){ut(this.deps,t),this.deps.length||this.teardown()},_e.prototype.reference=V,_e.prototype.unreference=V;var Oe=Object.prototype.hasOwnProperty,Te={early:[],mark:[]},Ae={early:[],mark:[]},Ce=function(t){this.deps=[],this.children=[],this.childByKey={},this.links=[],this.keyModels={},this.unresolved=[],this.unresolvedByKey={},this.bindings=[],this.patternObservers=[],t&&(this.parent=t,this.root=t.root)};function Se(t){t.updateFromBindings(!0)}function je(t){for(var e=t.length;e--;)if(t[e].bound){var n=t[e].owner;if(n)return{value:"checked"===n.name?n.node.checked:n.node.value}}}function Pe(t){if(t){var e=Te[t];Te[t]=[];for(var n=e.length;n--;)e[n]();var i=Ae[t];for(Ae[t]=[],n=i.length;n--;)i[n].model.register(i[n].item)}else Pe("early"),Pe("mark")}function Ne(t,e,n){t=t.r||t;if(!t||"string"!=typeof t)return e;if("."===t||"@"===t[0]||(e||n).isKey||(e||n).isKeypath)return e;for(var t=t.split("/"),i=It(t[t.length-1]),r=e||n,o=i.length,s=!0,a=!1;r&&o--;)r.shuffling&&(a=!0),i[o]!=r.key&&(s=!1),r=r.parent;return!e&&s&&a||e&&!s&&a?n:e}Ce.prototype.addUnresolved=function(t,e){this.unresolvedByKey[t]||(this.unresolved.push(t),this.unresolvedByKey[t]=[]),this.unresolvedByKey[t].push(e)},Ce.prototype.addShuffleTask=function(t,e){Te[e=void 0===e?"early":e].push(t)},Ce.prototype.addShuffleRegister=function(t,e){Ae[e=void 0===e?"early":e].push({model:this,item:t})},Ce.prototype.clearUnresolveds=function(t){for(var e=this.unresolved.length;e--;){var n=this.unresolved[e];if(!t||n===t){for(var i=this.unresolvedByKey[n],r=this.has(n),o=i.length;o--;)r&&i[o].attemptResolution(),i[o].resolved&&i.splice(o,1);i.length||(this.unresolved.splice(e,1),this.unresolvedByKey[n]=null)}}},Ce.prototype.findMatches=function(t){for(var n,e=t.length,i=[this],r=0;r<e;r+=1)!function(){var e=t[r];"*"===e?(n=[],i.forEach(function(t){n.push.apply(n,t.getValueChildren(t.get()))})):n=i.map(function(t){return t.joinKey(e)}),i=n}();return n},Ce.prototype.getKeyModel=function(t,e){return void 0===t||e?(t in this.keyModels||(this.keyModels[t]=new ue(Pt(t),this)),this.keyModels[t]):this.parent.getKeyModel(t,!0)},Ce.prototype.getKeypath=function(t){return t!==this.ractive&&this._link?this._link.target.getKeypath(t):(this.keypath||(this.keypath=this.parent.isRoot?this.key:this.parent.getKeypath(t)+"."+Pt(this.key)),this.keypath)},Ce.prototype.getValueChildren=function(t){var n,i=this;if(D(t))n=[],"length"in this&&this.length!==t.length&&n.push(this.joinKey("length")),t.forEach(function(t,e){n.push(i.joinKey(e))});else if(B(t)||"function"==typeof t)n=Object.keys(t).map(function(t){return i.joinKey(t)});else if(null!=t)return[];return n},Ce.prototype.getVirtual=function(t){var e=this.get(t,{virtual:!1});if(B(e)){for(var n=D(e)?[]:{},i=Object.keys(e),r=i.length;r--;){var o=this.childByKey[i[r]];o?o._link?n[i[r]]=o._link.getVirtual():n[i[r]]=o.getVirtual():n[i[r]]=e[i[r]]}for(r=this.children.length;r--;){var s=this.children[r];s.key in n||!s._link||(n[s.key]=s._link.getVirtual())}return n}return e},Ce.prototype.has=function(t){if(this._link)return this._link.has(t);var e=this.get();if(!e)return!1;if(t=Ft(t),Oe.call(e,t))return!0;for(var n=e.constructor;n!==Function&&n!==Array&&n!==Object;){if(Oe.call(n.prototype,t))return!0;n=n.constructor}return!1},Ce.prototype.joinAll=function(t,e){for(var n=this,i=0;i<t.length;i+=1){if(e&&!1===e.lastLink&&i+1===t.length&&n.childByKey[t[i]]&&n.childByKey[t[i]]._link)return n.childByKey[t[i]];n=n.joinKey(t[i],e)}return n},Ce.prototype.notifyUpstream=function(){for(var t=this.parent,e=[this.key];t;)t.patternObservers.length&&t.patternObservers.forEach(function(t){return t.notify(e.slice())}),e.unshift(t.key),t.links.forEach(me),t.deps.forEach(ce),t=t.parent},Ce.prototype.rebinding=function(t,e,n){for(var i=this.deps.length;i--;)this.deps[i].rebinding&&this.deps[i].rebinding(t,e,n);for(i=this.links.length;i--;){var r=this.links[i];r.owner._link&&r.relinking(t,!0,n)}for(i=this.children.length;i--;){var o=this.children[i];o.rebinding(t?t.joinKey(o.key):void 0,o,n)}for(i=this.unresolved.length;i--;)for(var s=this.unresolvedByKey[this.unresolved[i]],a=s.length;a--;)s[a].rebinding(t,e);for(this.keypathModel&&this.keypathModel.rebinding(t,e,!1),i=this.bindings.length;i--;)this.bindings[i].rebinding(t,e,n)},Ce.prototype.reference=function(){"refs"in this?this.refs++:this.refs=1},Ce.prototype.register=function(t){this.deps.push(t)},Ce.prototype.registerChange=function(t,e){var n;this.isRoot?(this.changes[t]=e,n=this.root.ractive,Et&&rt(Et.ractives,n)):this.root.registerChange(t,e)},Ce.prototype.registerLink=function(t){rt(this.links,t)},Ce.prototype.registerPatternObserver=function(t){this.patternObservers.push(t),this.register(t)},Ce.prototype.registerTwowayBinding=function(t){this.bindings.push(t)},Ce.prototype.removeUnresolved=function(t,e){t=this.unresolvedByKey[t];t&&ut(t,e)},Ce.prototype.shuffled=function(){for(var t=this.children.length;t--;)this.children[t].shuffled();this.wrapper&&(this.wrapper.teardown(),this.wrapper=null,this.rewrap=!0)},Ce.prototype.unreference=function(){"refs"in this&&this.refs--},Ce.prototype.unregister=function(t){ut(this.deps,t)},Ce.prototype.unregisterLink=function(t){ut(this.links,t)},Ce.prototype.unregisterPatternObserver=function(t){ut(this.patternObservers,t),this.unregister(t)},Ce.prototype.unregisterTwowayBinding=function(t){ut(this.bindings,t)},Ce.prototype.updateFromBindings=function(t){for(var e,n=this.bindings.length;n--;){var i=this.bindings[n].getValue();i!==this.value&&this.set(i)}this.bindings.length||(e=je(this.deps))&&e.value!==this.value&&this.set(e.value),t&&(this.children.forEach(Se),this.links.forEach(Se),this._link&&this._link.updateFromBindings(t))},ue.prototype.addShuffleTask=Ce.prototype.addShuffleTask,ue.prototype.addShuffleRegister=Ce.prototype.addShuffleRegister,_e.prototype.addShuffleTask=Ce.prototype.addShuffleTask,_e.prototype.addShuffleRegister=Ce.prototype.addShuffleRegister;var Ie,Fe=(Ie=Ce,((De.prototype=Object.create(Ie&&Ie.prototype)).constructor=De).prototype.animate=function(t,e,n,i){return this.target.animate(t,e,n,i)},De.prototype.applyValue=function(t){this.target.applyValue(t)},De.prototype.get=function(t,e){return t&&(ae(this),(e=e||{}).unwrap=!0),this.target.get(!1,e)},De.prototype.getKeypath=function(t){return t&&t!==this.root.ractive?this.target.getKeypath(t):Ie.prototype.getKeypath.call(this,t)},De.prototype.getKeypathModel=function(t){return this.keypathModel||(this.keypathModel=new _e(this)),t&&t!==this.root.ractive?this.keypathModel.getChild(t):this.keypathModel},De.prototype.handleChange=function(){this.deps.forEach(ce),this.links.forEach(ce),this.notifyUpstream()},De.prototype.joinKey=function(t){return void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new De(this,this,this.target.joinKey(t),t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},De.prototype.mark=function(){this.target.mark()},De.prototype.marked=function(){this.links.forEach(de),this.deps.forEach(ce),this.clearUnresolveds()},De.prototype.markedAll=function(){this.children.forEach(fe),this.marked()},De.prototype.notifiedUpstream=function(){this.links.forEach(me),this.deps.forEach(ce)},De.prototype.relinked=function(){this.target.registerLink(this),this.children.forEach(function(t){return t.relinked()})},De.prototype.relinking=function(e,t,n){var i=this;(e=t&&this.sourcePath?Ne(this.sourcePath,e,this.target):e)&&this.target!==e&&(this.target.unregisterLink(this),this.keypathModel&&this.keypathModel.rebindChildren(e),this.target=e,this.children.forEach(function(t){t.relinking(e.joinKey(t.key),!1,n)}),t&&this.addShuffleTask(function(){i.relinked(),n||i.notifyUpstream()}))},De.prototype.set=function(t){this.target.set(t)},De.prototype.shuffle=function(e){if(!this.shuffling)if(this.target.shuffling){this.shuffling=!0;for(var t=e.length;t--;){var n=e[t];t!==n&&(t in this.childByKey&&this.childByKey[t].rebinding(~n?this.joinKey(n):void 0,this.childByKey[t],!0),!~n&&this.keyModels[t]?this.keyModels[t].rebinding(void 0,this.keyModels[t],!1):~n&&this.keyModels[t]&&(this.keyModels[n]||this.childByKey[n].getKeyModel(n),this.keyModels[t].rebinding(this.keyModels[n],this.keyModels[t],!1)))}var i=this.source().length!==this.source().value.length;for(this.links.forEach(function(t){return t.shuffle(e)}),t=this.deps.length;t--;)this.deps[t].shuffle&&this.deps[t].shuffle(e);this.marked(),i&&this.notifyUpstream(),this.shuffling=!1}else this.target.shuffle(e)},De.prototype.source=function(){return this.target.source?this.target.source():this.target},De.prototype.teardown=function(){this._link&&this._link.teardown(),this.target.unregisterLink(this),this.children.forEach(ve)},De);function De(t,e,n,i){Ie.call(this,t),this.owner=e,this.target=n,this.key=void 0===i?e.key:i,e.isLink&&(this.sourcePath=e.sourcePath+"."+this.key),n.registerLink(this),this.isReadonly=t.isReadonly,this.isLink=!0}Ce.prototype.link=function(t,e){var n=this._link||new Fe(this.parent,this,t,this.key);n.sourcePath=e,this._link&&this._link.relinking(t,!0,!1),this.rebinding(n,this,!1),Pe();t=!this._link;return this._link=n,t&&this.parent.clearUnresolveds(),n.markedAll(),n},Ce.prototype.unlink=function(){var t;this._link&&(t=this._link,this._link=void 0,t.rebinding(this,this._link),Pe(),t.teardown())};var Re=n?(function(t,r,e){var n,o;if(!e.requestAnimationFrame){for(n=0;n<t.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[t[n]+"RequestAnimationFrame"];e.requestAnimationFrame||(o=e.setTimeout,e.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(0,16-(e-r)),i=o(function(){t(e+n)},n);return r=e+n,i})}}(v,0,n),n.requestAnimationFrame):null,Me=n&&n.performance&&"function"==typeof n.performance.now?function(){return n.performance.now()}:function(){return Date.now()},Be=[],Ve=!1;function Le(){_t();for(var t=Me(),e=0;e<Be.length;e+=1)Be[e].tick(t)||Be.splice(e--,1);Ot(),Be.length?Re(Le):Ve=!1}function Ke(t){this.duration=t.duration,this.step=t.step,this.complete=t.complete,this.easing=t.easing,this.start=Me(),this.end=this.start+this.duration,this.running=!0,Be.push(this),Ve||Re(Le)}Ke.prototype.tick=function(t){if(!this.running)return!1;if(t>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;t-=this.start,t=this.easing(t/this.duration);return this.step&&this.step(t),!0},Ke.prototype.stop=function(){this.abort&&this.abort(),this.running=!1};var Ue={};var ze,We=(ze=Ce,(($e.prototype=Object.create(ze&&ze.prototype)).constructor=$e).prototype.adapt=function(){var t=this.root.adaptors,e=t.length;if(this.rewrap=!1,0!==e){var n,i,r=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,o=this.root.ractive,s=this.getKeypath();if(this.wrapper){if(this.wrapperValue===r||this.wrapper.reset&&!1!==this.wrapper.reset(r))return delete this.newWrapperValue,this.wrapperValue=r,void(this.value=this.wrapper.get());this.wrapper.teardown(),this.wrapper=null,void 0!==this.value&&(i=this.parent.value||this.parent.createBranch(this.key))[this.key]!==r&&(i[this.key]=r)}for(n=0;n<e;n+=1){var a=t[n];if(a.filter(r,s,o)){this.wrapper=a.wrap(o,r,s,function(i){var r;return Ue[i]||(r=i?i+".":"",Ue[i]=function(t,e){var n;return"string"==typeof t?((n={})[r+t]=e,n):"object"==typeof t?r?function(t,e){var n,i={};if(!e)return t;for(n in e+=".",t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}(t,i):t:void 0}),Ue[i]}(s)),this.wrapperValue=r,(this.wrapper.__model=this).value=this.wrapper.get();break}}}},$e.prototype.animate=function(t,e,n,i){var r,o=this;this.ticker&&this.ticker.stop();var s=new dt(function(t){return r=t});return this.ticker=new Ke({duration:n.duration,easing:n.easing,step:function(t){var e=i(t);o.applyValue(e),n.step&&n.step(t,e)},complete:function(){o.applyValue(e),n.complete&&n.complete(e),o.ticker=null,r()}}),s.stop=this.ticker.stop,s},$e.prototype.applyValue=function(t){R(t,this.value)||(this.registerChange(this.getKeypath(),t),this.parent.wrapper&&this.parent.wrapper.set?(this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.wrapper&&(this.newWrapperValue=this.value)):this.wrapper?this.newWrapperValue=t:((this.parent.value||this.parent.createBranch(this.key))[this.key]=t,this.value=t),this.adapt(),this.parent.clearUnresolveds(),this.clearUnresolveds(),D(t)?(this.length=t.length,this.isArray=!0):this.isArray=!1,this.links.forEach(ce),this.children.forEach(pe),this.deps.forEach(ce),this.notifyUpstream(),this.parent.isArray&&("length"===this.key?this.parent.length=t:this.parent.joinKey("length").mark()))},$e.prototype.createBranch=function(t){t=M(t)?[]:{};return this.set(t),t},$e.prototype.get=function(t,e){return this._link?this._link.get(t,e):(t&&ae(this),e&&e.virtual?this.getVirtual(!1):(t||e&&e.unwrap)&&this.wrapper?this.wrapperValue:this.value)},$e.prototype.getKeypathModel=function(t){return this.keypathModel||(this.keypathModel=new _e(this)),this.keypathModel},$e.prototype.joinKey=function(t,e){return this._link?!e||0!=!e.lastLink||void 0!==t&&""!==t?this._link.joinKey(t):this:void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new $e(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]._link||this.childByKey[t])},$e.prototype.mark=function(){if(this._link)return this._link.mark();var t=this.retrieve();R(t,this.value)||(this.value===(this.value=t)&&!this.rewrap||(this.wrapper&&(this.newWrapperValue=t),this.adapt()),D(t)?(this.length=t.length,this.isArray=!0):this.isArray=!1,this.children.forEach(pe),this.links.forEach(de),this.deps.forEach(ce),this.clearUnresolveds())},$e.prototype.merge=function(t,e){var n=this.value,i=t;n===i&&(n=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=(t.childByKey[n]||{}).value;return e}(this)),e&&(n=n.map(e),i=i.map(e));var r=n.length,o={},s=0,n=n.map(function(t){var e,n=s;do{if(-1===(e=i.indexOf(t,n)))return-1}while(n=e+1,!0===o[e]&&n<r);return e===s&&(s+=1),o[e]=!0,e});this.parent.value[this.key]=t,this.shuffle(n)},$e.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},$e.prototype.set=function(t){this.ticker&&this.ticker.stop(),this.applyValue(t)},$e.prototype.shuffle=function(e){this.shuffling=!0;for(var t=e.length;t--;){var n=e[t];t!==n&&(t in this.childByKey&&this.childByKey[t].rebinding(~n?this.joinKey(n):void 0,this.childByKey[t],!0),!~n&&this.keyModels[t]?this.keyModels[t].rebinding(void 0,this.keyModels[t],!1):~n&&this.keyModels[t]&&(this.keyModels[n]||this.childByKey[n].getKeyModel(n),this.keyModels[t].rebinding(this.keyModels[n],this.keyModels[t],!1)))}var i=this.length!==this.value.length;for(this.links.forEach(function(t){return t.shuffle(e)}),Pe("early"),t=this.deps.length;t--;)this.deps[t].shuffle&&this.deps[t].shuffle(e);this.mark(),Pe("mark"),i&&this.notifyUpstream(),this.shuffling=!1},$e.prototype.teardown=function(){this._link&&this._link.teardown(),this.children.forEach(ve),this.wrapper&&this.wrapper.teardown(),this.keypathModel&&this.keypathModel.teardown()},$e);function $e(t,e){ze.call(this,t),this.ticker=null,t&&(this.key=Ft(e),this.isReadonly=t.isReadonly,t.value&&(this.value=t.value[this.key],D(this.value)&&(this.length=this.value.length),this.adapt()))}var He,qe=(He=We,((Ye.prototype=Object.create(He&&He.prototype)).constructor=Ye).prototype.getKeypath=function(){return"@global"},Ye.prototype.registerChange=function(){},new Ye),Qe=/^@[^\(]+\(([^\)]+)\)/;function Ye(){He.call(this,null,"@global"),this.value="undefined"!=typeof global?global:window,this.isRoot=!0,(this.root=this).adaptors=[]}function Ze(t,e){var n=t.findContext();if("."===e||"this"===e)return n;if(0===e.indexOf("@keypath")){var i=Qe.exec(e);if(i&&i[1]){var r=Ze(t,i[1]);if(r)return r.getKeypathModel()}return n.getKeypathModel()}if(0===e.indexOf("@rootpath")){for(;n.isRoot&&n.ractive.component;)n=n.ractive.component.parentFragment.findContext();r=Qe.exec(e);if(r&&r[1]){var o=Ze(t,r[1]);if(o)return o.getKeypathModel(t.ractive.root)}return n.getKeypathModel(t.ractive.root)}if("@index"===e||"@key"===e){o=t.findRepeatingFragment();return o.isIteration?o.context.getKeyModel(o["i"===e[1]?"index":"key"]):void 0}if("@this"===e)return t.ractive.viewmodel.getRactiveModel();if("@global"===e)return qe;if("~"===e[0])return t.ractive.viewmodel.joinAll(It(e.slice(2)));if("."!==e[0])return ne(t,e);for(var s=e.split("/");"."===s[0]||".."===s[0];)".."===s.shift()&&(n=n.parent);return"."===(e=s.join("/"))[0]&&(e=e.slice(1)),n.joinAll(It(e))}function Xe(t){for(var e,n={},i={};t;)t.parent&&(t.parent.indexRef||t.parent.keyRef)&&(!(e=t.parent.indexRef)||e in i||(i[e]=t.index),!(e=t.parent.keyRef)||e in n||(n[e]=t.key)),t=t.componentParent&&!t.ractive.isolated?t.componentParent:t.parent;return{key:n,index:i}}function Ge(t,n,e){var i,r,o,s,a=[];if(!(e=function(t,e){switch(n){case"splice":for(void 0!==e[0]&&e[0]<0&&(e[0]=t+Math.max(e[0],-t)),void 0===e[0]&&(e[0]=0);e.length<2;)e.push(t-e[0]);return"number"!=typeof e[1]&&(e[1]=t-e[0]),e[1]=Math.min(e[1],t-e[0]),e;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(e);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(e)}}(t,e)))return null;for(o=e.length-2-e[1],r=(i=Math.min(t,e[0]))+e[1],a.startIndex=i,s=0;s<i;s+=1)a.push(s);for(;s<r;s+=1)a.push(-1);for(;s<t;s+=1)a.push(s+o);return a.touchedFrom=0!=o?e[0]:t,a}var Je=Array.prototype;function tn(s){function i(t,e){if(!D(n=t.get())){if(void 0!==n)throw new Error("shuffle array method "+s+" called on non-array at "+t.getKeypath());var n=[],i=Je[s].apply(n,e),r=_t(this,!0).then(function(){return i});return t.set(n),Ot(),r}var r=Ge(n.length,s,e),o=Je[s].apply(n,e),e=_t(this,!0).then(function(){return o});return e.result=o,r?t.shuffle(r):t.set(o),Ot(),e}return{path:function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return i(this.viewmodel.joinAll(It(t)),e)},model:i}}var en={};function nn(t,e,n,i){t=_t(t,!0);if(!D(e.get())||!D(n))throw new Error("You cannot merge an array with a non-array");i=function(e){if(!e)return null;if(!0===e)return JSON.stringify;if("function"==typeof e)return e;if("string"==typeof e)return en[e]||(en[e]=function(t){return t[e]});throw new Error("If supplied, options.compare must be a string, function, or `true`")}(i&&i.compare);return e.merge(n,i),Ot(),t}var rn=new tt("update");function on(t,e){e.parent&&e.parent.wrapper&&e.parent.adapt();var n=_t(t,!0);if(e.mark(),e.registerChange(e.getKeypath(),e.get()),!e.isRoot)for(var i=e.parent,r=e.key;i&&!i.isRoot;)i.clearUnresolveds&&i.clearUnresolveds(r),r=i.key,i=i.parent;return e.notifyUpstream(),Ot(),rn.fire(t,e),n}var sn=tn("push").model,an=tn("pop").model,un=tn("shift").model,hn=tn("unshift").model,ln=tn("sort").model,cn=tn("splice").model,pn=tn("reverse").model;function dn(t,e,n){var i=[];if(B(e))for(var r in e)e.hasOwnProperty(r)&&i.push([gn(t,r).model,e[r]]);else i.push([gn(t,e).model,n]);return i}function fn(t){if(!t)return this._element.parentFragment.findContext().get(!0);t=Ze(this._element.parentFragment,t);return t?t.get(!0):void 0}function mn(t,e){var n=gn(this,t),i=n.model,n=n.instance;return i?i.getKeypath(e||n):t}function gn(t,e){t=t._element.parentFragment;return"string"!=typeof e?{model:t.findContext(),instance:e}:{model:Ze(t,e),instance:t.ractive}}function vn(t,e){if(!M(e=void 0===e?1:e))throw new Error("Bad arguments");return Mt(this.ractive,dn(this,t,e).map(function(t){var e=t[0],n=t[1],t=e.get();if(!M(n)||!M(t))throw new Error("Cannot add non-numeric value");return[e,t+n]}))}function yn(t,e,n){t=gn(this,t).model;return Wt(this.ractive,t,e,n)}function bn(t,e){var n=gn(this,t).model,i=gn(this,e).model,e=_t(this.ractive,!0);return i.link(n,t),Ot(),e}function wn(t,e,n){return nn(this.ractive,gn(this,t).model,e,n)}function xn(t){return an(gn(this,t).model,[])}function En(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return sn(gn(this,t).model,e)}function kn(t){return pn(gn(this,t).model,[])}function _n(t,e){return Mt(this.ractive,dn(this,t,e))}function On(t){return un(gn(this,t).model,[])}function Tn(t,e,n){for(var i=[],r=arguments.length-3;0<r--;)i[r]=arguments[r+3];return i.unshift(e,n),cn(gn(this,t).model,i)}function An(t){return ln(gn(this,t).model,[])}function Cn(t,e){if(!M(e=void 0===e?1:e))throw new Error("Bad arguments");return Mt(this.ractive,dn(this,t,e).map(function(t){var e=t[0],n=t[1],t=e.get();if(!M(n)||!M(t))throw new Error("Cannot add non-numeric value");return[e,t-n]}))}function Sn(t){t=gn(this,t).model;return Mt(this.ractive,[[t,!t.get()]])}function jn(t){var e=gn(this,t).model,t=_t(this.ractive,!0);return e.owner&&e.owner._link&&e.owner.unlink(),Ot(),t}function Pn(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return hn(gn(this,t).model,e)}function Nn(t){return on(this.ractive,gn(this,t).model)}function In(t,e){var n=gn(this,t).model,t=_t(this.ractive,!0);return n.updateFromBindings(e),Ot(),t}function Fn(){return!!Mn(this).model}function Dn(t){var e=Mn(this),n=e.model,e=e.instance;if(n)return n.getKeypath(t||e)}function Rn(){var t=Mn(this).model;if(t)return t.get(!0)}function Mn(t){t=t._element;return{model:t.binding&&t.binding.model,instance:t.parentFragment.ractive}}function Bn(t){var e=Mn(this).model;return Mt(this.ractive,[[e,t]])}function Vn(){return Y("Object property keypath is deprecated, please use resolve() instead."),this.resolve()}function Ln(){return Y("Object property rootpath is deprecated, please use resolve( ractive.root ) instead."),this.resolve(this.ractive.root)}function Kn(){return Y("Object property context is deprecated, please use get() instead."),this.get()}function Un(){return Y('Object property index is deprecated, you can use get( "indexName" ) instead.'),Xe(this._element.parentFragment).index}function zn(){return Y('Object property key is deprecated, you can use get( "keyName" ) instead.'),Xe(this._element.parentFragment).key}function Wn(t,e){return C(t,{_element:{value:e},ractive:{value:e.parentFragment.ractive},resolve:{value:mn},get:{value:fn},add:{value:vn},animate:{value:yn},link:{value:bn},merge:{value:wn},pop:{value:xn},push:{value:En},reverse:{value:kn},set:{value:_n},shift:{value:On},sort:{value:An},splice:{value:Tn},subtract:{value:Cn},toggle:{value:Sn},unlink:{value:jn},unshift:{value:Pn},update:{value:Nn},updateModel:{value:In},isBound:{value:Fn},getBindingPath:{value:Dn},getBinding:{value:Rn},setBinding:{value:Bn},keypath:{get:Vn},rootpath:{get:Ln},context:{get:Kn},index:{get:Un},key:{get:zn}}),t}var $n=a&&a.querySelector;function Hn(t){if((t="string"==typeof t&&$n?$n.call(document,t):t)&&t._ractive)return Wn({},t._ractive.proxy)}function qn(t,e,n){for(this.fragment=t,this.reference=Nt(e),this.callback=n,this.keys=It(e),this.resolved=!1,this.contexts=[];t;)t.context&&(t.context.addUnresolved(this.keys[0],this),this.contexts.push(t.context)),t=t.componentParent||t.parent}var Qn=new tt("insert");function Yn(t,e,n,i){var r=t.viewmodel,o=It(e),s=o.indexOf("*");if(i.keypath=e,!~s){var a,e=o[0];return""===e||r.has(e)?a=r.joinAll(o):t.component&&!t.isolated&&(a=Ze(t.component.parentFragment,e))&&(r.map(e,a),a=r.joinAll(o)),new Zn(t,a,n,i)}r=0===s?r:r.joinAll(o.slice(0,s));return new Xn(t,r,o.splice(s),n,i)}qn.prototype.attemptResolution=function(){var t;this.resolved||(t=ne(this.fragment,this.reference))&&(this.resolved=!0,this.callback(t))},qn.prototype.forceResolution=function(){var t;this.resolved||(t=this.fragment.findContext().joinAll(this.keys),this.callback(t),this.resolved=!0)},qn.prototype.rebinding=function(t,e){var n=this;e&&e.removeUnresolved(this.keys[0],this),(this.next=t)&&xt(function(){t===n.next&&(t.addUnresolved(n.keys[0],n),n.next=null)})},qn.prototype.unbind=function(){var e=this;this.fragment&&ut(this.fragment.unresolved,this),this.resolved||this.contexts.forEach(function(t){return t.removeUnresolved(e.keys[0],e)})};function Zn(t,e,n,i){var r=this;this.context=i.context||t,this.callback=n,this.ractive=t,e?this.resolved(e):(this.keypath=i.keypath,this.resolver=new qn(t.fragment,i.keypath,function(t){r.resolved(t)})),!1!==i.init?(this.dirty=!0,this.dispatch()):this.oldValue=this.newValue,this.defer=i.defer,this.once=i.once,this.strict=i.strict,this.dirty=!1}Zn.prototype.cancel=function(){this.cancelled=!0,this.model?this.model.unregister(this):this.resolver.unbind()},Zn.prototype.dispatch=function(){this.cancelled||(this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.model?this.model.get():this.newValue,this.dirty=!1)},Zn.prototype.handleChange=function(){var t,e=this;this.dirty||(R(t=this.model.get(),this.oldValue)||(this.newValue=t,this.strict&&this.newValue===this.oldValue||(bt(this,this.defer),this.dirty=!0,this.once&&xt(function(){return e.cancel()}))))},Zn.prototype.rebinding=function(t,e){var n=this;if((t=Ne(this.keypath,t,e))===this.model)return!1;this.model&&this.model.unregister(this),t&&t.addShuffleTask(function(){return n.resolved(t)})},Zn.prototype.resolved=function(t){this.model=t,this.keypath=t.getKeypath(this.ractive),this.oldValue=void 0,this.newValue=t.get(),t.register(this)};function Xn(t,e,n,i,r){var o=this;this.context=r.context||t,this.ractive=t,this.baseModel=e,this.keys=n,this.callback=i,n=n.join("\\.").replace(/\*/g,"(.+)"),t=e.getKeypath(t),this.pattern=new RegExp("^"+(t?t+"\\.":"")+n+"$"),this.oldValues={},this.newValues={},this.defer=r.defer,this.once=r.once,this.strict=r.strict,this.dirty=!1,this.changed=[],this.partial=!1,e.findMatches(this.keys).forEach(function(t){o.newValues[t.getKeypath(o.ractive)]=t.get()}),!1!==r.init?this.dispatch():this.oldValues=this.newValues,e.registerPatternObserver(this)}function Gn(){return-1}Xn.prototype.cancel=function(){this.baseModel.unregisterPatternObserver(this)},Xn.prototype.dispatch=function(){var i=this,r=this.newValues;if(this.newValues={},Object.keys(r).forEach(function(t){var e,n;i.newKeys&&!i.newKeys[t]||(e=r[t],n=i.oldValues[t],i.strict&&e===n||R(e,n)||(n=[e,n,t],!t||(t=i.pattern.exec(t))&&(n=n.concat(t.slice(1))),i.callback.apply(i.context,n)))}),this.partial)for(var t in r)this.oldValues[t]=r[t];else this.oldValues=r;this.newKeys=null,this.dirty=!1},Xn.prototype.notify=function(t){this.changed.push(t)},Xn.prototype.shuffle=function(t){if(D(this.baseModel.value)){var e=this.baseModel.getKeypath(this.ractive),n=this.baseModel.value.length,i=1<this.keys.length?"."+this.keys.slice(1).join("."):"";this.newKeys={};for(var r=0;r<t.length;r++)-1!==t[r]&&t[r]!==r&&(this.newKeys[e+"."+r+i]=!0);for(var o=t.touchedFrom;o<n;o++)this.newKeys[e+"."+o+i]=!0}},Xn.prototype.handleChange=function(){var n=this;if(!this.dirty||this.changed.length){if(this.dirty||(this.newValues={}),this.changed.length){var i=0,r=this.baseModel.isRoot?this.changed.map(function(t){return t.map(Pt).join(".")}):this.changed.map(function(t){return n.baseModel.getKeypath(n.ractive)+"."+t.map(Pt).join(".")});if(this.baseModel.findMatches(this.keys).forEach(function(t){var e=t.getKeypath(n.ractive);r.filter(function(t){return 0===t.indexOf(e)&&(t.length===e.length||"."===t[e.length])||0===e.indexOf(t)&&(t.length===e.length||"."===e[t.length])}).length&&(i++,n.newValues[e]=t.get())}),!i)return;this.partial=!0}else this.baseModel.findMatches(this.keys).forEach(function(t){var e=t.getKeypath(n.ractive);n.newValues[e]=t.get()}),this.partial=!1;bt(this,this.defer),this.dirty=!0,this.changed.length=0,this.once&&this.cancel()}};function Jn(t,e,n,i){this.context=t,this.model=e,this.keypath=e.getKeypath(),this.callback=n,this.pending=null,e.register(this),!1!==i.init?(this.sliced=[],this.shuffle([]),this.handleChange()):this.sliced=this.slice()}Jn.prototype.handleChange=function(){this.pending?(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(Gn)),this.handleChange())},Jn.prototype.shuffle=function(t){var n,i=this,e=this.slice(),r=[],o=[],s={};t.forEach(function(t,e){s[t]=!0,t!==e&&void 0===n&&(n=e),-1===t&&o.push(i.sliced[e])}),void 0===n&&(n=t.length);for(var a=e.length,u=0;u<a;u+=1)s[u]||r.push(e[u]);this.pending={inserted:r,deleted:o,start:n},this.sliced=e};var ti={init:!(Jn.prototype.slice=function(){var t=this.model.get();return D(t)?t.slice():[]}),once:!0};function ei(t){return t.trim()}function ni(t){return""!==t}var ii=tn("pop").path,ri=tn("push").path,oi=[],si=!1,ai=null,ui=null;function hi(e){return(e?oi.filter(function(t){return~e.indexOf(t.id)}):oi).reduce(function(t,e){return t+"\n\n/* {"+e.id+"} */\n"+e.styles},"/* Ractive.js component styles */")}!a||ai&&ai.parentNode||((ai=a.createElement("style")).type="text/css",a.getElementsByTagName("head")[0].appendChild(ai),ui=!!ai.styleSheet);var li=new tt("render"),ci=new tt("complete");function pi(t,e,n,i){var r=t.transitionsEnabled;t.noIntro&&(t.transitionsEnabled=!1);var o,s=_t(t,!0);if(xt(function(){return li.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return n=E(n)||t.anchor,t.el=e,t.anchor=n,t.cssId&&a&&si&&(ui?ai.styleSheet.cssText=hi(null):ai.innerHTML=hi(null),si=!1),e&&((e.__ractive_instances__||(e.__ractive_instances__=[])).push(t),n?(o=a.createDocumentFragment(),t.fragment.render(o),e.insertBefore(o,n)):t.fragment.render(e,i)),Ot(),t.transitionsEnabled=r,s.then(function(){return ci.fire(t)})}var di={extend:function(t,e,n){e.adapt=function(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}(e.adapt,st(n.adapt))},init:function(){}},fi=/\/\*(?:[\s\S]*?)\*\//g,mi=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\2).)*\2/gi,gi=/\0(\d+)/g,vi=/(?:^|\}|\{)\s*([^\{\}\0]+)\s*(?=\{)/g,yi=/@keyframes\s+[^\{\}]+\s*\{(?:[^{}]+|\{[^{}]+})*}/gi,bi=/((?:(?:\[[^\]]+\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,wi=/^(?:@|\d+%)/,xi=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;function Ei(t){return t.trim()}function ki(t){return t.str}function _i(t,e){var i='[data-ractive-css~="{'+e+'}"]';return xi.test(t)?t.replace(xi,i):function(e,t){void 0===t&&(t=[]);var n=[];return e=e.replace(mi,function(t){return"\0"+(n.push(t)-1)}).replace(fi,""),t.forEach(function(t){e=e.replace(t,function(t){return"\0"+(n.push(t)-1)})}),function(t){return t.replace(gi,function(t,e){return n[e]})}(e.replace(vi,function(t,e){if(wi.test(e))return t;var n=e.split(",").map(Ei).map(function(t){return function(t,e){for(var n,i=[];n=bi.exec(t);)i.push({str:n[0],base:n[1],modifiers:n[2]});for(var r=i.map(ki),o=[],s=i.length;s--;){var a=r.slice(),u=i[s];a[s]=u.base+e+u.modifiers||"";u=r.slice();u[s]=e+" "+u[s],o.push(a.join(" "),u.join(" "))}return o.join(", ")}(t,i)}).join(", ")+" ";return t.replace(e,n)}))}(t,[yi])}function Oi(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var Ti={name:"css",extend:function(t,e,n){var i;n.css&&(i=Oi()+Oi()+"-"+Oi()+"-"+Oi()+"-"+Oi()+"-"+Oi()+Oi()+Oi(),n=n.noCssTransform?n.css:_i(n.css,i),e.cssId=i,oi.push({id:i,styles:n}),si=!0)},init:function(t,e,n){n.css&&Q("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}},Ai={name:"data",extend:function(t,e,n){var i,r;if(n.data&&B(n.data))for(i in n.data)(r=n.data[i])&&"object"==typeof r&&(B(r)||D(r))&&Q("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Ci(e.data,n.data)},init:function(t,e,n){var i=Ci(t.prototype.data,n.data);if((i="function"==typeof i?i.call(e):i)&&i.constructor===Object)for(var r in i)"function"==typeof i[r]&&(i[r]=Rt(i[r],e));return i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}};function Ci(t,e){var n;(n=e)&&n.constructor!==Object&&("function"==typeof n||("object"!=typeof n?H("data option must be an object or a function, `"+n+"` is not valid"):Q("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")));var i="function"==typeof t,r="function"==typeof e;return e||i||(e={}),i||r?function(){return ji(r?Si(e,this):e,i?Si(t,this):t)}:ji(e,t)}function Si(t,e){e=t.call(e);if(e)return"object"!=typeof e&&H("Data function must return an object"),e.constructor!==Object&&Y("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),e}function ji(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}var Pi=/\$\{([^\}]+)\}/g;function Ni(t,e){void 0===e&&(e=0);for(var n=new Array(e);e--;)n[e]="_"+e;return new Function([],"return function ("+n.join(",")+"){return("+t+");};")()}function Ii(t,e){var n,t="return ("+t.replace(Pi,function(t,e){return n=!0,'__ractive.get("'+e+'")'})+");";n&&(t="var __ractive = this; "+t);t=new Function(t);return n?t.bind(e):t}var Fi,Di,Ri=T(null);function Mi(t,e){return Ri[t]||(Ri[t]=(t=t,e=e,os(Ni,"new expression function",rs),Ni(t,e)))}function Bi(t){var e;!t||(e=t.e)&&Object.keys(e).forEach(function(t){Ri[t]||(Ri[t]=e[t])})}var Vi=/^\s+/;(Di=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(t){this.stack=t.stack}}).prototype=Error.prototype,(Fi=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){t=r+t.length+1;return r=t},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n}).prototype={read:function(t){var e,n,i,r;for(t=t||this.converters,e=this.pos,i=t.length,n=0;n<i;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getContextMessage:function(t,e){var n=this.getLinePos(t),i=n[0],r=n[1];if(-1===this.options.contextLines)return[i,r,e+" at line "+i+" character "+r];var o=this.lines[i-1],s="",t="";this.options.contextLines&&(n=i-1-this.options.contextLines<0?0:i-1-this.options.contextLines,(s=this.lines.slice(n,i-1-n).join("\n").replace(/\t/g,"  "))&&(s+="\n"),(t=this.lines.slice(i,i+this.options.contextLines).join("\n").replace(/\t/g,"  "))&&(t="\n"+t));var a=0,t=s+o.replace(/\t/g,function(t,e){return e<r&&(a+=1),"  "})+"\n"+new Array(r+a).join(" ")+"^----"+t;return[i,r,e+" at line "+i+" character "+r+":\n"+t]},getLinePos:function(t){for(var e=0,n=0;t>=this.lineEnds[e];)n=this.lineEnds[e],e+=1;return[e+1,t-n+1,t]},error:function(t){var e=this.getContextMessage(this.pos,t),n=e[0],i=e[1],e=e[2],e=new Di(e);throw e.line=n,e.character=i,e.shortMessage=t,e},matchString:function(t){if(this.str.substr(this.pos,t.length)===t)return this.pos+=t.length,t},matchPattern:function(t){if(t=t.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0]},allowWhitespace:function(){this.matchPattern(Vi)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Fi.extend=function(t){var e,n;for(n in(e=function(t,e){Fi.call(this,t,e)}).prototype=T(this.prototype),t)I.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=Fi.extend,e};var Li=Fi,Ki=/^[^\s=]+/,Ui=/^\s+/,zi=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;function Wi(t){return(t=t.matchPattern(zi))?{t:25,v:t}:null}var $i=/[-/\\^$*+?.()|[\]{}]/g;function Hi(t){return t.replace($i,"\\$&")}var qi={};function Qi(t,e){return t.search(qi[e.join()]||(qi[e.join()]=new RegExp(e.map(Hi).join("|"))))}var Yi=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Zi=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Xi={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Gi=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Ji=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Xi).join("|")+"));?","g"),tr="function"==typeof String.fromCodePoint,er=tr?String.fromCodePoint:String.fromCharCode;function nr(t){return t.replace(Ji,function(t,e){return(e="#"!==e[0]?Xi[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10))?er((e=e)?10===e?32:e<128?e:e<=159?Gi[e-128]:e<55296||!(e<=57343)&&(e<=65535||tr&&(65536<=e&&e<=131071||131072<=e&&e<=196607))?e:65533:65533):t})}var ir=/</g,rr=/>/g,or=/&/g;function sr(t){return t.replace(or,"&amp;").replace(ir,"&lt;").replace(rr,"&gt;")}var ar="Expected a JavaScript expression",ur=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;function hr(t){return(t=t.matchPattern(ur))?{t:20,v:t}:null}function lr(r){return function(t){for(var e,n='"',i=!1;!i;)(e=t.matchPattern(cr)||t.matchPattern(pr)||t.matchString(r))?n+='"'===e?'\\"':"\\'"===e?"'":e:(e=t.matchPattern(dr))?n+="\\u"+("000"+e.charCodeAt(1).toString(16)).slice(-4):i=!0;return n+='"',JSON.parse(n)}}var cr=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,pr=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,dr=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,fr=lr('"'),mr=lr("'");function gr(t){var e,n=t.pos;return t.matchString('"')?(e=mr(t),t.matchString('"')?{t:21,v:e}:(t.pos=n,null)):t.matchString("'")?(e=fr(t),t.matchString("'")?{t:21,v:e}:(t.pos=n,null)):null}var vr=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,yr=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function br(t){var e;return(e=gr(t))?yr.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=hr(t))?e.v:(e=t.matchPattern(vr))?e:null}function wr(t){t.allowWhitespace();var e=Br(t);if(null===e)return null;var n=[e];return t.allowWhitespace(),t.matchString(",")&&(null===(e=wr(t))&&t.error(ar),n.push.apply(n,e)),n}function xr(t){return hr(t)||("true"===(o=(r=t).remaining()).substr(0,4)?(r.pos+=4,{t:24,v:"true"}):"false"===o.substr(0,5)?(r.pos+=5,{t:24,v:"false"}):null)||gr(t)||(i=(e=t).pos,e.allowWhitespace(),e.matchString("{")?(n=function t(e){var n,i,r=e.pos;return null===(i=function(t){var e,n=t.pos;t.allowWhitespace();var i="'"!==t.nextChar()&&'"'!==t.nextChar();return null===(e=br(t))?(t.pos=n,null):(t.allowWhitespace(),!i||","!==t.nextChar()&&"}"!==t.nextChar()?t.matchString(":")?(t.allowWhitespace(),null===(i=Br(t))?(t.pos=n,null):{t:27,k:e,v:i}):(t.pos=n,null):(vr.test(e)||t.error("Expected a valid reference, but found '"+e+"' instead."),{t:27,k:e,v:{t:30,n:e}}))}(e))?null:(n=[i],e.matchString(",")?(i=t(e))?n.concat(i):(e.pos=r,null):n)}(e),e.allowWhitespace(),e.matchString("}")?{t:23,m:n}:(e.pos=i,null)):(e.pos=i,null))||(e=(n=t).pos,n.allowWhitespace(),n.matchString("[")?(i=wr(n),n.matchString("]")?{t:22,m:i}:(n.pos=e,null)):(n.pos=e,null))||Wi(t);var e,n,i,r,o}var Er,kr,_r=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,Or=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,Tr=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,Ar=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Cr=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/,Sr=/^@(?:keypath|rootpath|index|key|this|global)/,jr=/^\s*\(/,Pr=/^\s*\.{3}/;function Nr(t){var e,n,i=t.pos;if("@keypath"!==(r=t.matchPattern(Sr))&&"@rootpath"!==r||!t.matchPattern(jr)||((s=Nr(t))||t.error("Expected a valid reference for a keypath expression"),t.allowWhitespace(),t.matchString(")")||t.error("Unclosed keypath expression"),r+="("+s.n+")"),n=!r&&t.spreadArgs&&t.matchPattern(Pr),r||((r=!(e=t.matchPattern(_r)||"")&&t.relaxedNames&&t.matchPattern(Cr)||t.matchPattern(Ar))||"."!==e?!r&&e&&(r=e,e=""):(e="",r=".")),!r)return null;if(!e&&!t.relaxedNames&&Tr.test(r))return t.pos=i,null;if(!e&&Or.test(r))return o=Or.exec(r)[0],t.pos=i+o.length,{t:26,v:(n?"...":"")+o};var r,o,s=(n?3:0)+(e||"").length+r.length;return o=(e||"")+Nt(r),t.matchString("(")&&(-1!==(e=o.lastIndexOf("."))&&"]"!==r[r.length-1]?(r=o.length,o=o.substr(0,e),t.pos=i+(s-(r-e))):--t.pos),{t:30,n:(n?"...":"")+o.replace(/^this\./,"./").replace(/^this$/,".")}}function Ir(t){var e,n=xr(e=t)||Nr(e)||function(t){if(!t.matchString("("))return null;t.allowWhitespace();var e=Br(t);return e||t.error(ar),t.allowWhitespace(),t.matchString(")")||t.error("Expected closing paren"),{t:34,x:e}}(e);if(!n)return null;for(;n;){var i=function(t){if(t.strictRefinement||t.allowWhitespace(),t.matchString(".")){t.allowWhitespace();var e=t.matchPattern(vr);if(e)return{t:31,n:e};t.error("Expected a property name")}if(t.matchString("[")){t.allowWhitespace();e=Br(t);return e||t.error(ar),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:31,x:e}}return null}(t);if(i)n={t:32,x:n,r:i};else{if(!t.matchString("("))break;t.allowWhitespace();var r=t.spreadArgs;t.spreadArgs=!0;i=wr(t);t.spreadArgs=r,t.allowWhitespace(),t.matchString(")")||t.error("Expected closing paren"),n={t:40,x:n},i&&(n.o=i)}}return n}kr=function(n,i){return function(t){var e;return(e=i(t))?e:t.matchString(n)?(t.allowWhitespace(),(e=Br(t))||t.error(ar),{s:n,o:e,t:33}):null}},function(){for(var t,e=Ir,n=0,i=(t="! ~ + - typeof".split(" ")).length;n<i;n+=1)e=kr(t[n],e);Er=e}();var Fr,Dr=Er,Rr=function(r,o){return function(t){var e,n,i;if(!(n=o(t)))return null;for(;;){if(e=t.pos,t.allowWhitespace(),!t.matchString(r))return t.pos=e,n;if("in"===r&&/[a-zA-Z_$0-9]/.test(t.remaining().charAt(0)))return t.pos=e,n;if(t.allowWhitespace(),!(i=o(t)))return t.pos=e,n;n={t:36,s:r,o:[n,i]}}}};(function(){for(var t="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Dr,n=0,i=t.length;n<i;n+=1)e=Rr(t[n],e);Fr=e})();var Mr=Fr;function Br(t){return(i=Mr(e=t))?(n=e.pos,e.allowWhitespace(),e.matchString("?")?(e.allowWhitespace(),(r=Br(e))||e.error(ar),e.allowWhitespace(),e.matchString(":")||e.error('Expected ":"'),e.allowWhitespace(),(t=Br(e))||e.error(ar),{t:35,o:[i,r,t]}):(e.pos=n,i)):null;var e,n,i,r}function Vr(t){var i,r=0;return function t(e,n){var i,r;if(30===e.t&&-1===n.indexOf(e.n)&&n.unshift(e.n),r=e.o||e.m)if(B(r))t(r,n);else for(i=r.length;i--;)r[i].n&&0===r[i].n.indexOf("...")&&(e.spread=!0),t(r[i],n);e.x&&t(e.x,n),e.r&&t(e.r,n),e.v&&t(e.v,n)}(t,i=[]),t=function e(t){switch(t.t){case 24:case 26:case 20:case 25:return t.v;case 21:return JSON.stringify(String(t.v));case 22:return"["+(t.m?t.m.map(e).join(","):"")+"]";case 23:return"{"+(t.m?t.m.map(e).join(","):"")+"}";case 27:return t.k+":"+e(t.v);case 33:return("typeof"===t.s?"typeof ":t.s)+e(t.o);case 36:return e(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+e(t.o[1]);case 40:if(t.spread){var n=r++;return"(spread$"+n+" = "+e(t.x)+").apply(spread$"+n+", [].concat("+(t.o?t.o.map(function(t){return t.n&&0===t.n.indexOf("...")?e(t):"["+e(t)+"]"}).join(","):"")+") )"}return e(t.x)+"("+(t.o?t.o.map(e).join(","):"")+")";case 34:return"("+e(t.x)+")";case 32:return e(t.x)+e(t.r);case 31:return t.n?"."+t.n:"["+e(t.x)+"]";case 35:return e(t.o[0])+"?"+e(t.o[1])+":"+e(t.o[2]);case 30:return"_"+i.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}(t),{r:i=i.map(function(t){return 0===t.indexOf("...")?t.substr(3):t}),s:function(t){for(var e=[],n=r-1;0<=n;n--)e.push("spread$"+n);return e.length?"(function(){var "+e.join(",")+";return("+t+");})()":t}(t)}}var Lr={true:!0,false:!1,null:null,undefined:void 0},Kr=new RegExp("^(?:"+Object.keys(Lr).join("|")+")"),Ur=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,zr=/\$\{([^\}]+)\}/g,Wr=/^\$\{([^\}]+)\}/,$r=/^\s*$/,Hr=Li.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&$r.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){if(!t.values)return null;var e=t.matchPattern(Wr);return e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0},function(t){t=t.matchPattern(Kr);if(t)return{v:Lr[t]}},function(t){t=t.matchPattern(Ur);if(t)return{v:+t}},function(t){var e=gr(t),n=t.values;return e&&n?{v:e.v.replace(zr,function(t,e){return e in n?n[e]:e})}:e},function(t){if(!t.matchString("{"))return null;var e,n={};if(t.allowWhitespace(),t.matchString("}"))return{v:n};for(;e=function(t){t.allowWhitespace();var e=br(t);if(!e)return null;e={key:e};if(t.allowWhitespace(),!t.matchString(":"))return null;t.allowWhitespace();t=t.read();return t?(e.value=t.v,e):null}(t);){if(n[e.key]=e.value,t.allowWhitespace(),t.matchString("}"))return{v:n};if(!t.matchString(","))return null}return null},function(t){if(!t.matchString("["))return null;var e,n=[];if(t.allowWhitespace(),t.matchString("]"))return{v:n};for(;e=t.read();){if(n.push(e.v),t.allowWhitespace(),t.matchString("]"))return{v:n};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});function qr(t,e){return new Hr(t,{values:e}).result}var Qr=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(.*\)\s*$/,Yr=/^\s*$/;function Zr(t,e,n){var i,r,o,s,a;if("string"==typeof t){var u=e.pos-t.length;if(71===n||72===n)return{a:Vr(new Xr("["+t+"]").result[0])};if(70===n&&(i=Qr.exec(t))&&(Q(e.getContextMessage(u,"Unqualified method events are deprecated. Prefix methods with '@this.' to call methods on the current Ractive instance.")[2]),t="@this."+i[1]+t.substr(i[1].length)),70===n&&~t.indexOf("(")){var h=new Xr("["+t+"]");if(h.result&&h.result[0])return h.remaining().length&&(e.pos=u+t.length-h.remaining().length,e.error("Invalid input after event expression '"+h.remaining()+"'")),{x:Vr(h.result[0])};(t.indexOf(":")>t.indexOf("(")||!~t.indexOf(":"))&&(e.pos=u,e.error("Invalid input in event expression '"+t+"'"))}if(-1===t.indexOf(":"))return t.trim();t=[t]}if(h={},s=[],a=[],t){for(;t.length;)if("string"==typeof(r=t.shift())){if(Yr.test(r))continue;if(-1!==(o=r.indexOf(":"))){o&&s.push(r.substr(0,o)),r.length>o+1&&(a[0]=r.substring(o+1));break}s.push(r)}else s.push(r);a=a.concat(t)}return s.length?a.length||"string"!=typeof s?(h={n:1===s.length&&"string"==typeof s[0]?s[0]:s},1===a.length&&"string"==typeof a[0]?(u=qr("["+a[0]+"]"),h.a=u?u.value:[a[0].trim()]):h.d=a):h=s:h="",a.length&&n&&Q(e.getContextMessage(e.pos,"Proxy events with arguments are deprecated. You can fire events with arguments using \"@this.fire('eventName', arg1, arg2, ...)\".")[2]),h}var Xr=Li.extend({converters:[Br],spreadArgs:!0}),Gr=/^[^\s"'>\/=]+/,Jr=/^on/,to=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,eo=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,no=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,io=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,ro={"intro-outro":{t:72,v:"t0"},intro:{t:72,v:"t1"},outro:{t:72,v:"t2"},lazy:{t:73,v:"l"},twoway:{t:73,v:"t"},decorator:{t:71}},oo=/^[^\s"'=<>\/`]+/;function so(t){var e,n,i=t.pos;return(e=t.matchPattern(oo))?(-1!==(n=Qi(e,t.tags.map(function(t){return t.open})))&&(e=e.substr(0,n),t.pos=i+e.length),e):null}function ao(t,e){var n,i,r=t.pos;if(!t.matchString(e))return null;for(t.inAttribute=e,n=[],i=lo(t)||uo(t,e);null!==i;)n.push(i),i=lo(t)||uo(t,e);return t.matchString(e)?(t.inAttribute=!1,n):(t.pos=r,null)}function uo(t,e){var n=t.remaining(),i=t.tags.map(function(t){return t.open});i.push(e);i=Qi(n,i);return-1===i&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,n.substr(0,i)):null}var ho={t:10,exclude:!0};function lo(t){var e,n;if(!1===t.interpolate[t.inside])return null;for(n=0;n<t.tags.length;n+=1)if(e=function(t,e){var n,i,r;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(i=function(t){var e,n,i;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(Ki))?t.matchPattern(Ui)?(i=t.matchPattern(Ki))?(t.allowWhitespace(),t.matchString("=")?[n,i]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}(t))return t.matchString(e.close)?(e.open=i[0],e.close=i[1],t.sortMustacheTags(),ho):null;if(t.allowWhitespace(),t.matchString("/")){--t.pos;var o=t.pos;if(Wi(t))t.pos=o;else{if(t.pos=o-e.close.length,t.inAttribute)return t.pos=n,null;t.error("Attempted to close a section that wasn't open")}}for(r=0;r<e.readers.length;r+=1)if(i=(0,e.readers[r])(t,e))return e.isStatic&&(i.s=!0),t.includeLinePositions&&(i.p=t.getLinePos(n)),i;return t.pos=n,null}(t,t.tags[n]))return e;return t.inTag&&!t.inAttribute&&(e=function(t){var e,n;if(!(e=function(t){var e,n,i,r,o,s,a,u,h,l;if(t.allowWhitespace(),!(n=t.matchPattern(Gr)))return null;for(r=n.length,i=0;i<t.tags.length;i++)~(o=n.indexOf(t.tags[i].open))&&o<r&&(r=o);return r<n.length?(t.pos-=n.length-r,(n=n.substr(0,r))?{n:n}:null):(e={n:n},null!=(l=(s=t).pos,/[=\/>\s]/.test(s.nextChar())||s.error("Expected `=`, `/`, `>` or whitespace"),s.allowWhitespace(),l=s.matchString("=")?(s.allowWhitespace(),a=s.pos,u=s.sectionDepth,null===(h=ao(s,"'")||ao(s,'"')||function(t){var e,n;for(t.inAttribute=!0,e=[],n=lo(t)||so(t);n;)e.push(n),n=lo(t)||so(t);return e.length?(t.inAttribute=!1,e):null}(s))&&s.error("Expected valid attribute value"),s.sectionDepth!==u&&(s.pos=a,s.error("An attribute value must contain as many opening section tags as closing section tags")),h.length?1===h.length&&"string"==typeof h[0]?nr(h[0]):h:""):(s.pos=l,null))&&(e.f=l),e)}(t)))return null;if(n=ro[e.n])e.t=n.t,n.v&&(e.v=n.v),delete e.n,72!==n.t&&71!==n.t||(e.f=Zr(e.f,t)),72===n.t?Y(("t0"===n.v?"intro-outro":"t1"===n.v?"intro":"outro")+" is deprecated. To specify tranisitions, use the transition name suffixed with '-in', '-out', or '-in-out' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches."):71===n.t&&Y("decorator is deprecated. To specify decorators, use the decorator name prefixed with 'as-' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches.");else if(n=no.exec(e.n))delete e.n,e.t=71,e.f=Zr(e.f,t,71),"object"==typeof e.f?e.f.n=n[1]:e.f=n[1];else if(n=io.exec(e.n))delete e.n,e.t=72,e.f=Zr(e.f,t,72),"object"==typeof e.f?e.f.n=n[1]:e.f=n[1],e.v="in-out"===n[2]?"t0":"in"===n[2]?"t1":"t2";else if(n=to.exec(e.n))e.n=n[1],e.t=70,e.f=Zr(e.f,t,70),eo.test(e.f.n||e.f)&&(t.pos-=(e.f.n||e.f).length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));else{if(t.sanitizeEventAttributes&&Jr.test(e.n))return{exclude:!0};e.f=e.f||(""===e.f?"":0),e.t=13}return e}(t))?(t.allowWhitespace(),e):void 0}function co(t,e){var n;if(t){for(;34===t.t&&t.x;)t=t.x;return 30===t.t?e.r=t.n:(n=function(t){for(var e,n=[];32===t.t&&31===t.r.t;)(e=t.r).x?30===e.x.t?n.unshift(e.x):n.unshift(Vr(e.x)):n.unshift(e.n),t=t.x;return 30!==t.t?null:{r:t.n,m:n}}(t))?e.rx=n:e.x=Vr(t),e}}function po(t,e){var n;return t.matchString("&")?(t.allowWhitespace(),(n=Br(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),co(n,n={t:3}),n):null):null}var fo=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,mo=/^as/i;function go(t){var e,n=[],i=t.pos;if(t.allowWhitespace(),e=vo(t)){for(e.x=co(e.x,{}),n.push(e),t.allowWhitespace();t.matchString(",");)(e=vo(t))||t.error("Expected another alias."),e.x=co(e.x,{}),n.push(e),t.allowWhitespace();return n}return t.pos=i,null}function vo(t){var e,n,i=t.pos;return t.allowWhitespace(),(e=Br(t))?(t.allowWhitespace(),t.matchPattern(mo)?(t.allowWhitespace(),(n=t.matchPattern(fo))||t.error("Expected a legal alias name."),{n:n,x:e}):(t.pos=i,null)):(t.pos=i,null)}function yo(t,e){var n,i,r=t.pos;try{n=function(t,e){var n,i,r=t.pos;if(!(n=Br(t))){var o=t.matchPattern(/^(\w+)/);return o?{t:30,n:o}:null}for(i=0;i<e.length;i+=1)if(t.remaining().substr(0,e[i].length)===e[i])return n;return t.pos=r,Nr(t)}(t,[e.close])}catch(t){i=t}if(!n){if("!"===t.str.charAt(r))return t.pos=r,null;if(i)throw i}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!n)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return co(n,n={t:2}),n}var bo=/^yield\s*/;function wo(t,e){var n,i,r=t.pos;return t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),-1!==(n=(i=t.remaining()).indexOf(e.close))?(i={t:6,r:i.substr(0,n).split(" ")[0]},t.pos+=n,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i):(t.pos=r,null)):(t.pos=r,null)):null}var xo=/^\s*else\s*/;var Eo=/^\s*elseif\s+/;var ko={each:52,if:50,with:54,unless:51},_o=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Oo=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,To=new RegExp("^("+Object.keys(ko).join("|")+")\\b");function Ao(t,e){var n,i,r,o,s,a,u,h,l,c,p,d,f=!1,m=t.pos;if(t.matchString("^"))i={t:4,f:[],n:51};else{if(!t.matchString("#"))return null;i={t:4,f:[]},t.matchString("partial")&&(t.pos=m-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(u=t.matchPattern(To))&&(h=u,i.n=ko[u])}t.allowWhitespace(),"with"===u?(m=go(t))&&(f=!0,i.z=m,i.t=19):"each"!==u||(l=vo(t))&&(i.z=[{n:l.n,x:{r:"."}}],n=l.x),f||((n=n||Br(t))||t.error("Expected expression"),(u=t.matchPattern(_o))&&((l=t.matchPattern(Oo))?i.i=u+","+l:i.i=u)),t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,o=i.f;do{if(p=t.pos,r=wo(t,e))h&&r.r!==h&&(t.pos=p,t.error("Expected "+e.open+"/"+h+e.close)),--t.sectionDepth,a=!0;else if(!f&&(p=e,d=void 0,d=(c=t).pos,r=c.matchString(p.open)?c.matchPattern(Eo)?(d=Br(c),c.matchString(p.close)||c.error("Expected closing delimiter '"+p.close+"'"),{t:61,x:d}):(c.pos=d,null):null)){51===i.n&&t.error("{{else}} not allowed in {{#unless}}"),s&&t.error("illegal {{elseif...}} after {{else}}");var g=g||[],v={t:4,n:50,f:o=[]};co(r.x,v),g.push(v)}else if(!f&&(c=e,d=void 0,d=(v=t).pos,r=v.matchString(c.open)?v.matchPattern(xo)?(v.matchString(c.close)||v.error("Expected closing delimiter '"+c.close+"'"),{t:60}):(v.pos=d,null):null))51===i.n&&t.error("{{else}} not allowed in {{#unless}}"),s&&t.error("there can only be one {{else}} block, at the end of a section"),s=!0,(g=g||[]).push({t:4,n:51,f:o=[]});else{if(!(r=t.read(ts)))break;o.push(r)}}while(!a);return g&&(i.l=g),f||co(n,i),i.f.length||delete i.f,i}var Co=/^[ \t\f\r\n]*\r?\n/,So=/\r?\n[ \t\f\r\n]*$/;function jo(t){return"string"==typeof t}function Po(t){return(4===t.t||5===t.t)&&t.f}function No(t,e,n){var i;e&&"string"==typeof(i=t[0])&&((i=i.replace(e,""))?t[0]=i:t.shift()),n&&"string"==typeof(i=at(t))&&((i=i.replace(n,""))?t[t.length-1]=i:t.pop())}var Io=/[ \t\f\r\n]+/g,Fo=/^(?:pre|script|style|textarea)$/i,Do=/^[ \t\f\r\n]+/,Ro=/[ \t\f\r\n]+$/,Mo=/^(?:\r\n|\r|\n)/,Bo=/(?:\r\n|\r|\n)$/;function Vo(t,e,n,i,r){if("string"!=typeof t){var o,s,a,u,h,l,c,p;for(function(t){for(var e,n,i,r,o=1;o<t.length;o+=1)e=t[o],n=t[o-1],i=t[o-2],jo(e)&&(9===n.t||10===n.t)&&jo(i)&&So.test(i)&&Co.test(e)&&(t[o-2]=i.replace(So,"\n"),t[o]=e.replace(Co,"")),Po(e)&&jo(n)&&So.test(n)&&jo(e.f[0])&&Co.test(e.f[0])&&(t[o-1]=n.replace(So,"\n"),e.f[0]=e.f[0].replace(Co,"")),jo(e)&&Po(n)&&jo(r=at(n.f))&&So.test(r)&&Co.test(e)&&(n.f[n.f.length-1]=r.replace(So,"\n"),t[o]=e.replace(Co,""))}(t),o=t.length;o--;)((s=t[o]).exclude||e&&9===s.t)&&t.splice(o,1);for(No(t,i?Do:null,r?Ro:null),o=t.length;o--;){if((s=t[o]).f&&(c=7===s.t&&Fo.test(s.e),p=n||c,!n&&c&&No(s.f,Mo,Bo),p||(a=t[o-1],c=t[o+1],(!a||"string"==typeof a&&Ro.test(a))&&(u=!0),(!c||"string"==typeof c&&Do.test(c))&&(h=!0)),Vo(s.f,e,p,u,h),D(s.f.n)&&Vo(s.f.n,e,n,u,r),D(s.f.d)&&Vo(s.f.d,e,n,u,r)),s.l&&(Vo(s.l,e,n,u,h),s.l.forEach(function(t){return t.l=1}),s.l.unshift(o+1,0),t.splice.apply(t,s.l),delete s.l),s.a)for(l in s.a)s.a.hasOwnProperty(l)&&"string"!=typeof s.a[l]&&Vo(s.a[l],e,n,u,h);s.m&&(Vo(s.m,e,n,u,h),s.m.length<1&&delete s.m)}for(o=t.length;o--;)"string"==typeof t[o]&&("string"==typeof t[o+1]&&(t[o]=t[o]+t[o+1],t.splice(o+1,1)),n||(t[o]=t[o].replace(Io," ")),""===t[o]&&t.splice(o,1))}}var Lo=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;var Ko=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Uo=/^[\s\n\/>]/,zo={exclude:!0};var Wo={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]},$o=/^<!--\s*/,Ho=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,qo=/\s*-->/,Qo=/^\s*#\s*partial\s+/;function Yo(r,o){Object.keys(r).forEach(function(t){if("s"===t&&D(r.r))return e=o,n=r.s,i=r.r,void(e[n]||(e[n]=Ni(n,i.length)));var e,n,i=r[t];(D(t=i)||B(t))&&Yo(i,o)})}var Zo=[function(t,e){if(!t.matchString(">"))return null;t.allowWhitespace(),t.relaxedNames=t.strictRefinement=!0;var n=Br(t);if(t.relaxedNames=t.strictRefinement=!1,!n)return null;var i={t:8};co(n,i),t.allowWhitespace();n=go(t);return n?i={t:19,z:n,f:[i]}:(n=Br(t))&&co(n,i={t:4,n:53,f:[i]}),t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i},po,Ao,function(t,e){if(!t.matchPattern(bo))return null;var n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name");t={t:16};return n&&(t.n=n),t},yo,function(t,e){var n;return t.matchString("!")?-1!==(n=t.remaining().indexOf(e.close))?(t.pos+=n+e.close.length,{t:9}):void 0:null}],Xo=[function(t,e){var n=Br(t);return n?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),co(n,n={t:3}),n):null}],Go=[po,Ao,yo];function Jo(t,e){return new ns(t,e||{}).result}Jo.computedStrings=function(n){if(!n)return[];Object.keys(n).forEach(function(t){var e=n[t];"string"==typeof e&&(n[t]=Ii(e))})};var ts=[lo,function(t){var e,n,i=t.pos;return t.textOnlyMode||!t.matchString("\x3c!--")?null:(-1===(e=(n=t.remaining()).indexOf("--\x3e"))&&t.error("Illegal HTML - expected closing comment sequence ('--\x3e')"),n=n.substr(0,e),t.pos+=e+3,n={t:9,c:n},t.includeLinePositions&&(n.p=t.getLinePos(i)),n)},function(t){var e,n,i,r,o,s,a=t.pos;if(t.inside||t.inAttribute||t.textOnlyMode)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(e={},t.includeLinePositions&&(e.p=t.getLinePos(a)),t.matchString("!"))return e.t=18,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),e.a=t.matchPattern(/^(.+?)>/),e;if(e.t=7,e.e=t.matchPattern(Ko),!e.e)return null;for(Uo.test(t.nextChar())||t.error("Illegal tag name"),t.allowWhitespace(),t.inTag=!0;n=lo(t);)!1!==n&&(e.m||(e.m=[]),e.m.push(n)),t.allowWhitespace();if(t.inTag=!1,t.allowWhitespace(),t.matchString("/")&&(i=!0),!t.matchString(">"))return null;var u,h,l=e.e.toLowerCase(),c=t.preserveWhitespace;if(!i&&!Zi.test(e.e)){t.elementStack.push(l),"script"!==l&&"style"!==l&&"textarea"!==l||(t.inside=l),r=[],o=T(null);do{var p,d,f,m=t.pos;(u=t.remaining())||t.error("Missing end "+(1<t.elementStack.length?"tags":"tag")+" ("+t.elementStack.reverse().map(function(t){return"</"+t+">"}).join("")+")"),h=l,d=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(d=u),h=Wo[h],d&&h&&~h.indexOf(d[1].toLowerCase())?p=!0:(h=u=void 0,h=(d=t).pos,(d=d.matchString("</")?(u=d.matchPattern(Lo))?d.inside&&u!==d.inside?(d.pos=h,null):{t:14,e:u}:(d.pos-=2,void d.error("Illegal closing tag")):null)?(p=!0,(d=d.e.toLowerCase())===l||(t.pos=m,~t.elementStack.indexOf(d))||(f="Unexpected closing tag",Zi.test(d)&&(f+=" (<"+d+"> is a void element - it cannot contain children)"),t.error(f))):(f=wo(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(p=!0,t.pos=m):(f=t.read(es))?(o[f.n]&&(t.pos=m,t.error("Duplicate partial definition")),Vo(f.f,t.stripComments,c,!c,!c),o[f.n]=f.f,s=!0):(f=t.read(ts))?r.push(f):p=!0)}while(!p);r.length&&(e.f=r),s&&(e.p=o),t.elementStack.pop()}return t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(l)?zo:e},function(t){var e,n=t.remaining(),i=t.textOnlyMode?Qi(n,i=(i=t.tags.map(function(t){return t.open})).concat(t.tags.map(function(t){return"\\"+t.open}))):(e=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?n.indexOf(e):(i=(i=t.tags.map(function(t){return t.open})).concat(t.tags.map(function(t){return"\\"+t.open})),!0===t.inAttribute?i.push('"',"'","=","<",">","`"):t.inAttribute?i.push(t.inAttribute):i.push(e),Qi(n,i)));return i?(-1===i&&(i=n.length),t.pos+=i,t.inside&&"textarea"!==t.inside||t.textOnlyMode?n.substr(0,i):nr(n.substr(0,i))):null}],es=[function(t){var e=t.pos,n=t.standardDelimiters[0],i=t.standardDelimiters[1];if(!t.matchPattern($o)||!t.matchString(n))return t.pos=e,null;var r=t.matchPattern(Ho);if(Y("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+r+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+r+"}} --\x3e ... \x3c!-- {{/"+r+"}} --\x3e'"),!t.matchString(i)||!t.matchPattern(qo))return t.pos=e,null;var o,s,a=[],u=new RegExp("^\x3c!--\\s*"+Hi(n)+"\\s*\\/\\s*"+r+"\\s*"+Hi(i)+"\\s*--\x3e");do{}while(t.matchPattern(u)?o=!0:((s=t.read(ts))||t.error("expected closing comment ('\x3c!-- "+n+"/"+r+i+" --\x3e')"),a.push(s)),!o);return{t:17,f:a,n:r}},function(t){var e,n,i,r=t.pos,o=t.standardDelimiters;if(!t.matchString(o[0]))return null;if(!t.matchPattern(Qo))return t.pos=r,null;for((r=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/))||t.error("expected legal partial name"),t.allowWhitespace(),t.matchString(o[1])||t.error("Expected closing delimiter '"+o[1]+"'"),e=[];(n=wo(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!n.r&&t.error("Expected "+o[0]+"/partial"+o[1]),i=!0):((n=t.read(ts))||t.error("Expected "+o[0]+"/partial"+o[1]),e.push(n)),!i;);return{t:17,n:r,f:e}}],ns=Li.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],i=e.staticDelimiters||["[[","]]"],r=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Zo},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Xo},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Go},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:Xo}],this.contextLines=e.contextLines||0,this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||!1!==e.interpolate.script,style:!e.interpolate||!1!==e.interpolate.style,textarea:!0},!0===e.sanitize&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=!1!==e.stripComments,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions,this.textOnlyMode=e.textOnlyMode,this.csp=e.csp},postProcess:function(t){return t.length?(0<this.sectionDepth&&this.error("A section was left open"),Vo(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),!1!==this.csp&&(Yo(t[0].t,e={}),Object.keys(e).length&&(t[0].e=e)),t[0]):{t:[],v:4};var e},converters:[function(t){for(var e=[],n=T(null),i=!1,r=t.preserveWhitespace;t.pos<t.str.length;){var o,s=t.pos;(o=t.read(es))?(n[o.n]&&(t.pos=s,t.error("Duplicated partial definition")),Vo(o.f,t.stripComments,r,!r,!r),n[o.n]=o.f,i=!0):(o=t.read(ts))?e.push(o):t.error("Unexpected template content")}var a={v:4,t:e};return i&&(a.p=n),a}],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}}),is=["delimiters","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","interpolate","preserveWhitespace","sanitize","stripComments","contextLines"],rs="Either preparse or use a ractive runtime source that includes the parser. ";function os(t,e,n){t||H("Missing Ractive.parse - cannot parse "+e+". "+n)}function ss(t,e){return os(Ii,'compution string "${str}"',"Either use:\n\n\tRactive.parse.computedStrings( component.computed )\n\nat build time to pre-convert the strings to functions, or use functions instead of strings in computed properties."),Ii(t,e)}var as={fromId:function(t,e){if(!a){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}var n;if(t=t&&t.replace(/^#/,""),!(n=a.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"===n.tagName.toUpperCase())return"textContent"in n?n.textContent:n.innerHTML;if(!e||!e.noThrow)throw new Error("Template element with id #"+t+", must be a <script> element")},isParsed:function(t){return!("string"==typeof t)},getParseOptions:function(n){return n.defaults&&(n=n.defaults),is.reduce(function(t,e){return t[e]=n[e],t},{})},parse:function(t,e){os(Jo,"template",rs);e=Jo(t,e);return Bi(e),e},parseFor:function(t,e){return this.parse(t,this.getParseOptions(e))}},us={name:"template",extend:function(t,e,n){"template"in n&&(n=n.template,e.template="function"==typeof n?n:ls(n,e))},init:function(t,e,n){n=("template"in n?n:t.prototype).template;"function"==typeof(n=n||{v:4,t:[]})&&(n=hs(e,t=n),e._config.template={fn:t,result:n}),n=ls(n,e),e.template=n.t,n.p&&cs(e.partials,n.p)},reset:function(t){var e=function(t){var e=t._config.template;if(e&&e.fn){t=hs(t,e.fn);return t!==e.result?e.result=t:void 0}}(t);if(e){e=ls(e,t);return t.template=e.t,cs(t.partials,e.p,!0),!0}}};function hs(n,t){return t.call(n,{fromId:as.fromId,isParsed:as.isParsed,parse:function(t,e){return void 0===e&&(e=as.getParseOptions(n)),as.parse(t,e)}})}function ls(t,e){return"string"==typeof t?(n=e,"#"===(e=t)[0]&&(e=as.fromId(e)),t=as.parseFor(e,n)):(function(t){if(null==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(4!==t.v)throw new Error("Mismatched template version (expected 4, got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}(t),Bi(t)),t;var n}function cs(t,e,n){if(e)for(var i in e)!n&&t.hasOwnProperty(i)||(t[i]=e[i])}function ps(t,e){this.name=t,this.useDefaults=e}ps.prototype.extend=function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},ps.prototype.init=function(){},ps.prototype.configure=function(t,e,n){var i,r=this.name,o=n[r],s=T(t[r]);for(i in o)s[i]=o[i];e[r]=s},ps.prototype.reset=function(t){var n=t[this.name],i=!1;return Object.keys(n).forEach(function(t){var e=n[t];e._fn&&(e._fn.isOwner?n[t]=e._fn:delete n[t],i=!0)}),i};var ds=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"].map(function(t){return new ps(t,"computed"===t)});function fs(t,i,r){return/_super/.test(r)?(o._parent=t,o._method=r,o):r;function o(){var t=function(t,e){if(e in t){var n=t[e];return"function"==typeof n?n:function(){return n}}return V}(o._parent,i),e="_super"in this,n=this._super;this._super=t;t=r.apply(this,arguments);return e?this._super=n:delete this._super,t}}function ms(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function gs(t,e,n){if(e in t){if(n in t)throw new Error(ms(e,n,!0));Q(ms(e,n)),t[n]=t[e]}}function vs(t,e,n){return _s("init",t,e,n),0}var ys={adapt:di,css:Ti,data:Ai,template:us},bs=Object.keys(t),ws=Os(bs.filter(function(t){return!ys[t]})),xs=Os(bs.concat(ds.map(function(t){return t.name}))),Es=[].concat(bs.filter(function(t){return!ds[t]&&!ys[t]}),ds,ys.template,ys.css),ks=function(t,e,n){return _s("extend",t,e,n)};function _s(e,n,i,r){for(var t in gs(s=r,"beforeInit","onconstruct"),gs(s,"init","onrender"),gs(s,"complete","oncomplete"),gs(s,"eventDefinitions","events"),D(s.adaptors)&&gs(s,"adaptors","adapt"),r){var o;ws.hasOwnProperty(t)&&(o=r[t],"el"!==t&&"function"==typeof o?Q(t+" is a Ractive option that does not expect a function and will be ignored","init"===e?i:null):i[t]=o)}var s;if(r.append&&r.enhance)throw new Error("Cannot use append and enhance at the same time");ds.forEach(function(t){t[e](n,i,r)}),di[e](n,i,r),us[e](n,i,r),Ti[e](n,i,r),function(t,e,n){for(var i in n){var r;!xs[i]&&n.hasOwnProperty(i)&&("function"==typeof(r=n[i])&&(r=fs(t,i,r)),e[i]=r)}}(n.prototype,i,r)}function Os(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}var Ts=["template","partials","components","decorators","events"],As=new tt("complete"),Cs=new tt("reset"),Ss=new tt("render"),js=new tt("unrender");function Ps(t){t.forceResetTemplate()}var Ns=function(t){this.parentFragment=t.parentFragment,this.ractive=t.parentFragment.ractive,this.template=t.template,this.index=t.index,this.type=t.template.t,this.dirty=!1};Ns.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},Ns.prototype.destroyed=function(){this.fragment&&this.fragment.destroyed()},Ns.prototype.find=function(){return null},Ns.prototype.findAll=function(){},Ns.prototype.findComponent=function(){return null},Ns.prototype.findAllComponents=function(){},Ns.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)},Ns.prototype.shuffled=function(){this.fragment&&this.fragment.shuffled()},Ns.prototype.valueOf=function(){return this.toString()};var Is,Fs=(Is=We,((Ds.prototype=Object.create(Is&&Is.prototype)).constructor=Ds).prototype.get=function(t){t&&ae(this);t=this.parent.get();return t?t[this.key]:void 0},Ds.prototype.handleChange=function(){this.dirty=!0,this.links.forEach(de),this.deps.forEach(ce),this.children.forEach(ce),this.clearUnresolveds()},Ds.prototype.joinKey=function(t){return void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new Ds(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},Ds);function Ds(){Is.apply(this,arguments)}var Rs,Ms,Bs,Vs=(Bs=We,((Ws.prototype=Object.create(Bs&&Bs.prototype)).constructor=Ws).prototype.bubble=function(t){void 0===t&&(t=!0),this.registered&&delete this.root.expressions[this.keypath],this.keypath=void 0,t&&(this.dirty=!0,this.handleChange())},Ws.prototype.get=function(t){return t&&ae(this),this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.wrapper&&(this.newWrapperValue=this.value),this.adapt()),t&&this.wrapper?this.wrapperValue:this.value},Ws.prototype.getKeypath=function(){var n=this;return this.template?(this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(t,e){if(e>=n.models.length)return t;e=n.models[e];return e?e.getKeypath():"@undefined"}),(this.root.expressions[this.keypath]=this).registered=!0),this.keypath):"@undefined"},Ws.prototype.getValue=function(){var e=this;oe();try{var t=this.models.map(function(t){return t?t.get(!0):void 0}),n=this.fn.apply(this.fragment.ractive,t)}catch(n){Q("Failed to compute "+this.getKeypath()+": "+(n.message||n))}var i=se();return this.dependencies.filter(function(t){return!~i.indexOf(t)}).forEach(function(t){t.unregister(e),ut(e.dependencies,t)}),i.filter(function(t){return!~e.dependencies.indexOf(t)}).forEach(function(t){t.register(e),e.dependencies.push(t)}),n},Ws.prototype.handleChange=function(){this.dirty=!0,this.links.forEach(de),this.deps.forEach(ce),this.children.forEach(ce),this.clearUnresolveds()},Ws.prototype.joinKey=function(t){return void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new Fs(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},Ws.prototype.mark=function(){this.handleChange()},Ws.prototype.rebinding=function(t,e,n){var i=this.models.indexOf(e);~i&&(t=Ne(this.template.r[i],t,e))!==e&&(e.unregister(this),this.models.splice(i,1,t),t&&t.addShuffleRegister(this,"mark")),this.bubble(!n)},Ws.prototype.retrieve=function(){return this.get()},Ws.prototype.teardown=function(){var e=this;this.unbind(),this.fragment=void 0,this.dependencies&&this.dependencies.forEach(function(t){return t.unregister(e)}),Bs.prototype.teardown.call(this)},Ws.prototype.unreference=function(){Bs.prototype.unreference.call(this),this.deps.length||this.refs||this.teardown()},Ws.prototype.unregister=function(t){Bs.prototype.unregister.call(this,t),this.deps.length||this.refs||this.teardown()},Ws.prototype.unbind=function(){this.resolvers.forEach(ye)},Ws),Ls=(Ms=We,((zs.prototype=Object.create(Ms&&Ms.prototype)).constructor=zs).prototype.applyValue=function(t){if(!R(t,this.value))for(var e=this.parent,n=[this.key];e;){if(e.base){e.model.joinAll(n).applyValue(t);break}n.unshift(e.key),e=e.parent}},zs.prototype.joinKey=function(t){return void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new zs(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},zs.prototype.retrieve=function(){var t=this.parent.get();return t&&t[this.key]},zs),Ks=(Rs=We,((Us.prototype=Object.create(Rs&&Rs.prototype)).constructor=Us).prototype.bubble=function(){this.base&&(this.dirty||this.handleChange())},Us.prototype.forceResolution=function(){this.resolvers.forEach(function(t){return t.forceResolution()}),this.dirty=!0,this.bubble()},Us.prototype.get=function(t){if(this.dirty){this.bubble();for(var e,n=this.members.length,i=!0;i&&n--;)this.members[n]||(i=!1);return this.base&&i&&(e=this.members.map(function(t){return Pt(String(t.get()))}),(e=this.base.joinAll(e))!==this.model&&(this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.model=e,this.parent=e.parent,this.model.register(this),this.model.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange())),this.value=this.model?this.model.get(t):void 0,this.dirty=!1,this.mark(),this.value}return this.model?this.model.get(t):void 0},Us.prototype.getValue=function(){this.value=this.model?this.model.get():void 0;for(var t=this.bindings.length;t--;){var e=this.bindings[t].getValue();if(e!==this.value)return e}var n=je(this.deps);return(n||this).value},Us.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},Us.prototype.handleChange=function(){this.dirty=!0,this.mark()},Us.prototype.joinKey=function(t){return void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new Ls(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},Us.prototype.mark=function(){this.dirty&&this.deps.forEach(ce),this.links.forEach(de),this.children.forEach(pe),this.clearUnresolveds()},Us.prototype.retrieve=function(){return this.value},Us.prototype.rebinding=function(){},Us.prototype.set=function(t){if(!this.model)throw new Error("Unresolved reference expression. This should not happen!");this.model.set(t)},Us.prototype.teardown=function(){var e=this;this.resolvers.forEach(ye),this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.members&&this.members.forEach(function(t){return t&&t.unregister&&t.unregister(e)})},Us.prototype.unreference=function(){Rs.prototype.unreference.call(this),this.deps.length||this.refs||this.teardown()},Us.prototype.unregister=function(t){Rs.prototype.unregister.call(this,t),this.deps.length||this.refs||this.teardown()},Us);function Us(r,i){var e,o=this;Rs.call(this,null,null),this.dirty=!0,this.root=r.ractive.viewmodel,this.template=i,this.resolvers=[],this.base=$s(r,i),this.base||(e=r.resolve(i.r,function(t){o.base=t,o.bubble(),ut(o.resolvers,e)}),this.resolvers.push(e));var s=this.intermediary={handleChange:function(){return o.handleChange()},rebinding:function(t,e){var n;e===o.base?(t=Ne(i,t,e))!==o.base&&(o.base.unregister(s),o.base=t):~(n=o.members.indexOf(e))&&(t=Ne(i.m[n].n,t,e))!==o.members[n]&&o.members.splice(n,1,t),t!==e&&e.unregister(s),t&&t.addShuffleTask(function(){return t.register(s)}),o.bubble()}};this.members=i.m.map(function(t,e){return"string"==typeof t?{get:function(){return t}}:(30===t.t?(n=Ze(r,t.n))?n.register(s):(i=r.resolve(t.n,function(t){(o.members[e]=t).register(s),o.handleChange(),ut(o.resolvers,i)}),o.resolvers.push(i)):(n=new Vs(r,t)).register(s),n);var n,i}),this.isUnresolved=!0,this.bubble()}function zs(t,e){Ms.call(this,t,e)}function Ws(t,e){var s=this;Bs.call(this,t.ractive.viewmodel,null),this.fragment=t,this.template=e,this.isReadonly=!0,this.dirty=!0,this.fn=Mi(e.s,e.r.length),this.resolvers=[],this.models=this.template.r.map(function(t,e){var n,i,r,o=Ze(s.fragment,t);return o||(i=e,r=(n=s).fragment.resolve(t,function(t){ut(n.resolvers,r),n.models[i]=t,n.bubble()}),n.resolvers.push(r)),o}),this.dependencies=[],this.shuffle=void 0,this.bubble()}function $s(t,e){return e.r?Ze(t,e.r):e.x?new Vs(t,e.x):e.rx?new Ks(t,e.rx):void 0}function Hs(t){if(t.template.z){t.aliases={};for(var e=t.template.z,n=0;n<e.length;n++)t.aliases[e[n].n]=$s(t.parentFragment,e[n].x)}for(var i in t.aliases)t.aliases[i].reference()}var qs,Qs=(qs=Ns,((Ys.prototype=Object.create(qs&&qs.prototype)).constructor=Ys).prototype.bind=function(){Hs(this),this.fragment=new Ll({owner:this,template:this.template.f}).bind()},Ys.prototype.detach=function(){return this.fragment?this.fragment.detach():x()},Ys.prototype.find=function(t){if(this.fragment)return this.fragment.find(t)},Ys.prototype.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},Ys.prototype.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t)},Ys.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Ys.prototype.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},Ys.prototype.rebinding=function(){var t=this;this.locked||(this.locked=!0,xt(function(){t.locked=!1,Hs(t)}))},Ys.prototype.render=function(t){this.rendered=!0,this.fragment&&this.fragment.render(t)},Ys.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},Ys.prototype.unbind=function(){for(var t in this.aliases={},this.fragment.aliases)this.aliases[t].unreference();this.fragment&&this.fragment.unbind()},Ys.prototype.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},Ys.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment.update())},Ys);function Ys(t){qs.call(this,t),this.fragment=null}function Zs(t,e,n){for(void 0===e&&(e=!0);t&&(7!==t.type||n&&t.name!==n)&&(!e||15!==t.type);)t=t.owner||(t.component?t.containerFragment||t.component.parentFragment:t.parent||t.parentFragment||void 0);return t}var Xs=/\s+/,Gs=/\/\*(?:[\s\S]*?)\*\//g,Js=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\1).)*\2/gi,ta=/\0(\d+)/g;function ea(t){for(var e=t.split(Xs),n=e.length;n--;)e[n]||e.splice(n,1);return e}var na=[void 0,"text","search","url","email","hidden","password","search","reset","submit"];function ia(t){var e=this.node,n=this.getValue();if(this.ractive.nodes[e.id]===e&&delete this.ractive.nodes[e.id],t)return e.removeAttribute("id");(this.ractive.nodes[n]=e).id=n}function ra(t){var e=this.getValue();D(e)||(e=[e]);var n=this.node.options,i=n.length;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var r=n[i],o=(r._ractive||r).value;r.selected=ot(e,o)}}function oa(t){var e=this.getValue();if(!this.locked){this.node._ractive.value=e;var n=this.node.options,i=n.length,r=!1;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var o=n[i],s=(o._ractive||o).value;if(o.disabled&&o.selected&&(r=!0),s==e)return void(o.selected=!0)}r||(this.node.selectedIndex=-1)}}function sa(t){var e=this.getValue();this.locked||(this.node.innerHTML=t||void 0===e?"":e)}function aa(t){var e=this.node,n=e.checked,i=this.getValue();if(t)return e.checked=!1;e.value=this.node._ractive.value=i,e.checked=i===this.element.getAttribute("name"),n&&!e.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function ua(t){if(!this.locked){if(t)return this.node.removeAttribute("value"),void(this.node.value=this.node._ractive.value=null);t=this.getValue();this.node.value=this.node._ractive.value=t,this.node.setAttribute("value",_(t))}}function ha(t){if(!this.locked){if(t)return this.node._ractive.value="",void this.node.removeAttribute("value");t=this.getValue();this.node._ractive.value=t,this.node.value=_(t),this.node.setAttribute("value",_(t))}}function la(t){this.node.checked=!t&&this.getValue()==this.node._ractive.value}function ca(t){var e=this.element,n=this.node,i=e.binding,r=this.getValue(),o=e.getAttribute("value");if(D(r)){for(var s=r.length;s--;)if(o==r[s])return void(i.isChecked=n.checked=!0);i.isChecked=n.checked=!1}else i.isChecked=n.checked=r==o}function pa(t){for(var n,e,i=t?{}:(t=this.getValue()||"",n=[],"string"!=typeof t?{}:t.replace(Js,function(t){return"\0"+(n.push(t)-1)}).replace(Gs,"").split(";").filter(function(t){return!!t.trim()}).map(function(t){return t.replace(ta,function(t,e){return n[e]})}).reduce(function(t,e){var n=e.indexOf(":");return t[e.substr(0,n).trim()]=e.substr(n+1).trim(),t},{})),r=this.node.style,o=Object.keys(i),s=this.previous||[],a=0;a<o.length;)o[a]in r&&(e=i[o[a]].replace("!important",""),r.setProperty(o[a],e,e.length!==i[o[a]].length?"important":"")),a++;for(a=s.length;a--;)!~o.indexOf(s[a])&&s[a]in r&&r.setProperty(s[a],"","");this.previous=o}function da(t){this.style||(this.style=P(this.name.substr(6)));var e=t?"":_(this.getValue()),t=e.replace("!important","");this.node.style.setProperty(this.style,t,t.length!==e.length?"important":"")}function fa(t){var e=t?[]:ea(_(this.getValue())),n=this.node.className,t=ea(n=void 0!==n.baseVal?n.baseVal:n),i=this.previous||t.slice(0),t=e.concat(t.filter(function(t){return!~i.indexOf(t)})).join(" ");t!==n&&("string"!=typeof this.node.className?this.node.className.baseVal=t:this.node.className=t),this.previous=e}function ma(t){var e=this.name.substr(6),n=this.node.className,n=ea(n=void 0!==n.baseVal?n.baseVal:n),t=!t&&this.getValue();this.inlineClass||(this.inlineClass=e),t&&!~n.indexOf(e)?n.push(e):!t&&~n.indexOf(e)&&n.splice(n.indexOf(e),1),"string"!=typeof this.node.className?this.node.className.baseVal=n.join(" "):this.node.className=n.join(" ")}function ga(t){if(!this.locked){if(t)return this.useProperty&&(this.node[this.propertyName]=!1),void this.node.removeAttribute(this.propertyName);this.useProperty?this.node[this.propertyName]=this.getValue():this.getValue()?this.node.setAttribute(this.propertyName,""):this.node.removeAttribute(this.propertyName)}}function va(t){t?this.node.removeAttribute(this.name):this.node.setAttribute(this.name,_(this.getString()))}function ya(t){t?this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),_(this.getString()))}var ba,wa,xa={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor",class:"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName",for:"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Ea=!1,ka=(wa=Ns,((Ta.prototype=Object.create(wa&&wa.prototype)).constructor=Ta).prototype.bind=function(){this.fragment&&this.fragment.bind()},Ta.prototype.bubble=function(){this.dirty||(this.parentFragment.bubble(),this.element.bubble(),this.dirty=!0)},Ta.prototype.destroyed=function(){this.updateDelegate(!0)},Ta.prototype.getString=function(){Ea=!0;var t=this.fragment?this.fragment.toString():null!=this.value?""+this.value:"";return Ea=!1,t},Ta.prototype.getValue=function(){Ea=!0;var t=this.fragment?this.fragment.valueOf():!!Yi.test(this.name)||this.value;return Ea=!1,t},Ta.prototype.render=function(){var t,e=this.element.node;(this.node=e).namespaceURI&&e.namespaceURI!==w.html||(this.propertyName=xa[this.name]||this.name,void 0!==e[this.propertyName]&&(this.useProperty=!0),(Yi.test(this.name)||this.isTwoway)&&(this.isBoolean=!0),"value"===this.propertyName&&(e._ractive.value=this.value)),e.namespaceURI&&(t=this.name.indexOf(":"),this.namespace=-1!==t?function(t,e){for(var n="xmlns:"+e;t;){if(t.hasAttribute&&t.hasAttribute(n))return t.getAttribute(n);t=t.parentNode}return w[e]}(e,this.name.slice(0,t)):e.namespaceURI),this.rendered=!0,this.updateDelegate=function(t){var e=t.element,n=t.name;if("id"===n)return ia;if("value"===n){if(t.interpolator&&(t.interpolator.bound=!0),"select"===e.name&&"value"===n)return e.getAttribute("multiple")?ra:oa;if("textarea"===e.name)return ha;if(null!=e.getAttribute("contenteditable"))return sa;if("input"===e.name){var i=e.getAttribute("type");if("file"===i)return V;if("radio"===i&&e.binding&&"name"===e.binding.attribute.name)return aa;if(~na.indexOf(i))return ha}return ua}i=e.node;if(t.isTwoway&&"name"===n){if("radio"===i.type)return la;if("checkbox"===i.type)return ca}if("style"===n)return pa;if(0===n.indexOf("style-"))return da;if("class"===n&&(!i.namespaceURI||i.namespaceURI===y))return fa;if(0===n.indexOf("class-"))return ma;if(t.isBoolean){e=e.getAttribute("type");return!t.interpolator||"checked"!==n||"checkbox"!==e&&"radio"!==e||(t.interpolator.bound=!0),ga}return t.namespace&&t.namespace!==t.node.namespaceURI?ya:va}(this),this.updateDelegate()},Ta.prototype.toString=function(){Ea=!0;var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.style&&!this.inlineClass){if(this.rendered||this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-")){if(Yi.test(this.name))return t?this.name:"";if(null==t)return"";t=O(this.getString());return Ea=!1,t?this.name+'="'+t+'"':this.name}this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.style=P(this.name.substr(6))}}},Ta.prototype.unbind=function(){this.fragment&&this.fragment.unbind()},Ta.prototype.unrender=function(){this.updateDelegate(!0),this.rendered=!1},Ta.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked&&this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get()))},Ta),_a=(ba=Ns,((Oa.prototype=Object.create(ba&&ba.prototype)).constructor=Oa).prototype.bind=function(){this.fragment&&this.fragment.bind(),Aa(this,this.getValue(),!0)},Oa.prototype.bubble=function(){this.dirty||(this.element.bubble(),this.dirty=!0)},Oa.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:!("f"in this.template)||this.template.f},Oa.prototype.render=function(){Aa(this,this.getValue(),!0)},Oa.prototype.toString=function(){return""},Oa.prototype.unbind=function(){this.fragment&&this.fragment.unbind(),delete this.element[this.flag]},Oa.prototype.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()},Oa.prototype.update=function(){this.dirty&&(this.fragment&&this.fragment.update(),Aa(this,this.getValue(),!0))},Oa);function Oa(t){ba.call(this,t),this.owner=t.owner||t.parentFragment.owner||Zs(t.parentFragment),this.element=this.owner.attributeByName?this.owner:Zs(t.parentFragment),this.flag="l"===t.template.v?"lazy":"twoway",7===this.element.type&&(D(t.template.f)&&(this.fragment=new Ll({owner:this,template:t.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&2===this.fragment.items[0].type&&this.fragment.items[0])}function Ta(t){wa.call(this,t),this.name=t.template.n,this.namespace=null,this.owner=t.owner||t.parentFragment.owner||t.element||Zs(t.parentFragment),this.element=t.element||(this.owner.attributeByName?this.owner:Zs(t.parentFragment)),this.parentFragment=t.parentFragment,this.ractive=this.parentFragment.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.element.attributeByName[this.name]=this,D(t.template.f)?this.fragment=new Ll({owner:this,template:t.template.f}):(this.value=t.template.f,0===this.value&&(this.value="")),this.interpolator=this.fragment&&1===this.fragment.items.length&&2===this.fragment.items[0].type&&this.fragment.items[0],this.interpolator&&(this.interpolator.owner=this)}function Aa(t,e,n){t.value=0===e||"true"===e||"false"!==e&&"0"!==e&&e;e=t.element[t.flag];return t.element[t.flag]=t.value,n&&!t.element.attributes.binding&&e!==t.value&&t.element.recreateTwowayBinding(),t.value}var Ca=a?h("div"):null,Sa=!1;var ja,Pa=(ja=Ns,((Na.prototype=Object.create(ja&&ja.prototype)).constructor=Na).prototype.bind=function(){this.fragment.bind()},Na.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},Na.prototype.render=function(){this.node=this.owner.node,this.node&&(this.isSvg=this.node.namespaceURI===b),Sa=!0,this.rendered||this.fragment.render(),Sa=!1,this.rendered=!0,this.dirty=!0,this.update()},Na.prototype.toString=function(){return this.fragment.toString()},Na.prototype.unbind=function(){this.fragment.unbind()},Na.prototype.unrender=function(){this.rendered=!1,this.fragment.unrender()},Na.prototype.update=function(){var e,n,i=this;this.dirty&&(this.dirty=!1,Sa=!0,this.fragment.update(),Sa=!1,this.rendered&&this.node&&(e=this.fragment.toString(),n=function(t){t=t?"svg":"div";return e?(Ca.innerHTML="<"+t+" "+e+"></"+t+">")&&ht(Ca.childNodes[0].attributes):[]}(this.isSvg),this.attributes.filter(function(t){return function(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}(n,t)}).forEach(function(t){i.node.removeAttribute(t.name)}),n.forEach(function(t){i.node.setAttribute(t.name,t.value)}),this.attributes=n))},Na);function Na(t){ja.call(this,t),this.attributes=[],this.owner=t.owner,this.fragment=new Ll({ractive:this.ractive,owner:this,template:this.template}),this.fragment.findNextNode=V,this.dirty=!1}var Ia=["pop","push","reverse","shift","sort","splice","unshift"],Fa=[];Ia.forEach(function(a){A(Fa,a,{value:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ge(this.length,a,t);this._ractive.wrappers.forEach(function(t){t.magic&&(t.magic.locked=!0)});var i=Array.prototype[a].apply(this,arguments);_t(),this._ractive.setting=!0;for(var r,o,s=this._ractive.wrappers.length;s--;)r=this._ractive.wrappers[s],o=n,r=r.__model,o&&r.shuffle(o);return Ot(),this._ractive.setting=!1,this._ractive.wrappers.forEach(function(t){t.magic&&(t.magic.locked=!1)}),i},configurable:!0})}),Ch={}.__proto__?(Dh=function(t){return t.__proto__=Fa},function(t){return t.__proto__=Array.prototype}):(Dh=function(t){for(var e=Ia.length;e--;){var n=Ia[e];A(t,n,{value:Fa[n],configurable:!0})}},function(t){for(var e=Ia.length;e--;)delete t[Ia[e]]}),Dh.unpatch=Ch;var Da=Dh,Ra="Something went wrong in a rather interesting way",Ma={filter:function(t){return D(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Ba(t,e,n)}},Ba=function(t,e){this.root=t,this.value=e,this.__model=null,e._ractive||(A(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Da(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)};Ba.prototype.get=function(){return this.value},Ba.prototype.reset=function(t){return this.value===t},Ba.prototype.teardown=function(){var t,e,n,i;if(i=(t=this.value)._ractive){if(e=i.wrappers,n=i.instances,i.setting)return!1;if(-1===(i=e.indexOf(this)))throw new Error(Ra);if(e.splice(i,1),e.length){if(--n[this.root._guid],!n[this.root._guid]){if(-1===(i=n.indexOf(this.root)))throw new Error(Ra);n.splice(i,1)}}else delete t._ractive,Da.unpatch(this.value)}};try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),Vh={filter:function(t){return t&&"object"==typeof t},wrap:function(t,e,n){return new La(t,e,n)}}}catch(f){Vh=!1}var Va=Vh,La=function(i,t,r){var o=this;this.ractive=i,this.value=t,this.keypath=r,this.originalDescriptors={},Object.keys(t).forEach(function(t){var e=Object.getOwnPropertyDescriptor(o.value,t);o.originalDescriptors[t]=e;var n=r?r+"."+Pt(t):Pt(t),n=function(t,e,n,i){if(t.set&&t.set.__magic)return t.set.__magic.dependants.push({ractive:e,keypath:n}),t;var r,o=[{ractive:e,keypath:n}],n={get:function(){return"value"in t?t.value:t.get.call(this)},set:function(n){r||("value"in t?t.value=n:t.set.call(this,n),i.locked||(r=!0,o.forEach(function(t){var e=t.ractive,t=t.keypath;e.set(t,n)}),r=!1))},enumerable:!0};return n.set.__magic={dependants:o,originalDescriptor:t},n}(e,i,n,o);Object.defineProperty(o.value,t,n)})};La.prototype.get=function(){return this.value},La.prototype.reset=function(t){return this.value===t},La.prototype.set=function(t,e){this.value[t]=e},La.prototype.teardown=function(){var e=this;Object.keys(this.value).forEach(function(t){var i=Object.getOwnPropertyDescriptor(e.value,t);i.set&&i.set.__magic&&(function(){if(!i.set||!i.set.__magic)return;for(var t=i.set.__magic,e=t.length;e--;){var n=t[e];if(void 0===n.ractive&&void 0===n.keypath)return t.splice(e,1)}}(),1===i.set.__magic.dependants.length&&Object.defineProperty(e.value,t,i.set.__magic.originalDescriptor))})};function Ka(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Va.wrap(t,e,n),this.arrayWrapper=Ma.wrap(t,e,n),this.arrayWrapper.magic=this.magicWrapper,Object.defineProperty(this,"__model",{get:function(){return this.arrayWrapper.__model},set:function(t){this.arrayWrapper.__model=t}})}Ka.prototype.get=function(){return this.value},Ka.prototype.teardown=function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},Ka.prototype.reset=function(t){return this.arrayWrapper.reset(t)&&this.magicWrapper.reset(t)};var Ua={filter:function(t,e,n){return Va.filter(t,e,n)&&Ma.filter(t)},wrap:function(t,e,n){return new Ka(t,e,n)}};var za,Wa,$a,Ha=($a=We,((Ga.prototype=Object.create($a&&$a.prototype)).constructor=Ga).prototype.get=function(t){return t&&ae(this),this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.wrapper&&(this.newWrapperValue=this.value),this.adapt()),t&&this.wrapper?this.wrapperValue:this.value},Ga.prototype.getValue=function(){var t,n,e;oe();try{t=this.signature.getter.call(this.context)}catch(t){Q("Failed to compute "+this.getKeypath()+": "+(t.message||t)),r&&(console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"),i=this.signature.getterString.replace(/^\t+/gm,function(t){return t.split("\t").join("  ")}).split("\n"),n=i.length<2?0:i.slice(1).reduce(function(t,e){return Math.min(t,/^\s*/.exec(e)[0].length)},1/0),e=i.map(function(t,e){return"    "+(e?t.substring(n):t)}).join("\n"),i=this.signature.getterUseStack?"\n\n"+function(t){if(!t)return"";for(var e=t.split("\n"),n=Ha.name+".getValue",i=[],r=e.length,o=1;o<r;o+=1){var s=e[o];if(~s.indexOf(n))return i.join("\n");i.push(s)}}(t.stack):"",console.error(t.name+": "+t.message+"\n\n"+e+i),console.groupCollapsed&&console.groupEnd())}var i=se();return this.setDependencies(i),"value"in this&&t!==this.value&&this.registerChange(this.getKeypath(),t),t},Ga.prototype.handleChange=function(){this.dirty=!0,this.links.forEach(de),this.deps.forEach(ce),this.children.forEach(ce),this.clearUnresolveds()},Ga.prototype.joinKey=function(t){return void 0===t||""===t?this:(this.childByKey.hasOwnProperty(t)||(e=new Fs(this,t),this.children.push(e),this.childByKey[t]=e),this.childByKey[t]);var e},Ga.prototype.mark=function(){this.handleChange()},Ga.prototype.rebinding=function(t,e){t!==e&&this.handleChange()},Ga.prototype.set=function(t){if(!this.signature.setter)throw new Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(t),this.mark()},Ga.prototype.setDependencies=function(t){for(var e=this.dependencies.length;e--;){var n=this.dependencies[e];~t.indexOf(n)||n.unregister(this)}for(e=t.length;e--;){var i=t[e];~this.dependencies.indexOf(i)||i.register(this)}this.dependencies=t},Ga.prototype.teardown=function(){for(var t=this.dependencies.length;t--;)this.dependencies[t]&&this.dependencies[t].unregister(this);this.root.computations[this.key]===this&&delete this.root.computations[this.key],$a.prototype.teardown.call(this)},Ga.prototype.unregister=function(t){$a.prototype.unregister.call(this,t),this.isExpression&&0===this.deps.length&&this.teardown()},Ga),qa=(Wa=We,((Xa.prototype=Object.create(Wa&&Wa.prototype)).constructor=Xa).prototype.getKeypath=function(){return"@this"},Xa),Qa=Object.prototype.hasOwnProperty,Ya=(za=We,((Za.prototype=Object.create(za&&za.prototype)).constructor=Za).prototype.applyChanges=function(){return this._changeHash={},this.flush(),this._changeHash},Za.prototype.compute=function(t,e){e=new Ha(this,e,t);return this.computations[Pt(t)]=e},Za.prototype.createLink=function(t,e,n){for(var i=It(t),r=this;i.length;)var o=i.shift(),r=this.childByKey[o]||this.joinKey(o);return r.link(e,n)},Za.prototype.get=function(t,e){if(t&&ae(this),e&&!1===e.virtual)return this.value;for(var n=this.getVirtual(),i=Object.keys(this.computations),r=i.length;r--;){var o=this.computations[i[r]];o.isExpression||(n[i[r]]=o.get())}return n},Za.prototype.getKeypath=function(){return""},Za.prototype.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new qa(this.ractive))},Za.prototype.getValueChildren=function(){var t,n=za.prototype.getValueChildren.call(this,this.value);for(t in this.children.forEach(function(t){var e;t._link&&(~(e=n.indexOf(t))?n.splice(e,1,t._link):n.push(t._link))}),this.computations)n.push(this.computations[t]);return n},Za.prototype.handleChange=function(){this.deps.forEach(ce)},Za.prototype.has=function(t){var e=this.value,n=Ft(t);if(Qa.call(e,n))return!0;if(t in this.computations||this.childByKey[n]&&this.childByKey[n]._link)return!0;if(t in this.expressions)return!0;for(var i=e.constructor;i!==Function&&i!==Array&&i!==Object;){if(Qa.call(i.prototype,n))return!0;i=i.constructor}return!1},Za.prototype.joinKey=function(t,e){return"@global"===t?qe:"@this"===t?this.getRactiveModel():this.expressions.hasOwnProperty(t)?(Q("Accessing expression keypaths ("+t.substr(1)+") from the instance is deprecated. You can used a getNodeInfo or event object to access keypaths with expression context."),this.expressions[t]):this.computations.hasOwnProperty(t)?this.computations[t]:za.prototype.joinKey.call(this,t,e)},Za.prototype.map=function(t,e){this.joinKey(t).link(e)},Za.prototype.rebinding=function(){},Za.prototype.set=function(t){var e=this.wrapper;e?e.reset&&!1!==e.reset(t)||(e.teardown(),this.wrapper=null,this.value=t,this.adapt()):(this.value=t,this.adapt()),this.deps.forEach(ce),this.children.forEach(pe),this.clearUnresolveds()},Za.prototype.retrieve=function(){return this.wrapper?this.wrapper.get():this.value},Za.prototype.teardown=function(){for(var t in za.prototype.teardown.call(this),this.computations)this.computations[t].teardown()},Za.prototype.update=function(){},Za);function Za(t){za.call(this,null,null),this.changes={},this.isRoot=!0,(this.root=this).ractive=t.ractive,this.value=t.data,this.adaptors=t.adapt,this.adapt(),this.computationContext=t.ractive,this.computations={},this.expressions={}}function Xa(t){Wa.call(this,null,""),this.value=t,this.isRoot=!0,(this.root=this).adaptors=[],this.ractive=t,this.changes={}}function Ga(t,e,n){$a.call(this,null,null),this.root=this.parent=t,this.signature=e,this.key=n,this.isExpression=n&&"@"===n[0],this.isReadonly=!this.signature.setter,this.context=t.computationContext,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.dirty=!0,this.shuffle=void 0}var Ja=new tt("construct"),tu=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],eu=0;function nu(e,n){var t;Yl.DEBUG&&K(),(t=e)._guid="r-"+eu++,t._subs=T(null),t._config={},t.nodes={},t.event=null,t._eventQueue=[],t._liveQueries=[],t._liveComponentQueries=[],t._observers=[],t.component||((t.root=t).parent=t.container=null),A(e,"data",{get:iu}),Ja.fire(e,n),tu.forEach(function(t){e[t]=N(T(e.constructor[t]||null),n[t])});var i=new Ya({adapt:function(e,t,n){var i=[],r=[t=t.map(o),st(n.adapt).map(o)];e.parent&&!e.isolated&&r.push(e.parent.viewmodel.adaptors),r.push(i);t=("magic"in n?n:e).magic,n=("modifyArrays"in n?n:e).modifyArrays;if(t){if(!f)throw new Error("Getters and setters (magic mode) are not supported in this browser");n&&i.push(Ua),i.push(Va)}return n&&i.push(Ma),function(){for(var t=[],e=t.concat.apply(t,r),n=e.length;n--;)~t.indexOf(e[n])||t.unshift(e[n]);return t}();function o(t){return"string"==typeof t&&((t=X("adaptors",e,t))||H(Z(t,"adaptor"))),t}}(e,e.adapt,n),data:Ai.init(e.constructor,e,n),ractive:e});e.viewmodel=i;var r,o,s,a,u,h,l,c,p=N(T(e.constructor.prototype.computed),n.computed);for(r in p){var d=(o=e,a=p[s=r],c=d=l=h=u=void 0,"function"==typeof a&&(u=Rt(a,o),l=a.toString(),d=!0),"string"==typeof a&&(u=ss(a,o),l=a),"object"==typeof a&&("string"==typeof a.get?(u=ss(a.get,o),l=a.get):"function"==typeof a.get?(u=Rt(a.get,o),l=a.get.toString(),d=!0):H("`%s` computation must have a `get()` method",s),"function"==typeof a.set&&(h=Rt(a.set,o),c=a.set.toString())),{getter:u,setter:h,getterString:l,setterString:c,getterUseStack:d});i.compute(r,d)}}function iu(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function ru(t,e){return t[e._guid]||(t[e._guid]=[])}var ou=function(t){this.hook=new tt(t),this.inProcess={},this.queue={}};ou.prototype.begin=function(t){this.inProcess[t._guid]=!0},ou.prototype.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?ru(this.queue,e).push(t):function t(e,n){var i=ru(e.queue,n);for(e.hook.fire(n);i.length;)t(e,i.shift());delete e.queue[n._guid]}(this,t),delete this.inProcess[t._guid]};var su=new tt("config"),au=new ou("init");function uu(n,t,e){var i,r;Object.keys(n.viewmodel.computations).forEach(function(t){var e=n.viewmodel.computations[t];n.viewmodel.value.hasOwnProperty(t)&&e.set(n.viewmodel.value[t])}),vs(n.constructor,n,t),su.fire(n),au.begin(n),n.template&&((e.cssIds||n.cssId)&&(i=e.cssIds?e.cssIds.slice():[],n.cssId&&i.push(n.cssId)),n.fragment=i=new Ll({owner:n,template:n.template,cssIds:i}).bind(n.viewmodel)),au.end(n),i&&(r=E(n.el))&&(r=n.render(r,n.append),Yl.DEBUG_PROMISES&&r.catch(function(t){throw Y("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),Q("An error happened during rendering",{ractive:n}),function(){Yl.DEBUG&&z.apply(null,arguments)}(t),t}))}function hu(t,e){-1!==t.indexOf("*")&&H('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+t+'="..."/> is not valid'),this.name=t,this.owner=e,this.node=null,this.handler=null}hu.prototype.listen=function(e){var n=this.node=this.owner.node,t=this.name;"on"+t in n||q(Z(t,"events")),n.addEventListener(t,this.handler=function(t){e.fire({node:n,original:t})},!1)},hu.prototype.unlisten=function(){this.handler&&this.node.removeEventListener(this.name,this.handler,!1)};function lu(t,e){this.eventPlugin=t,this.owner=e,this.handler=null}lu.prototype.listen=function(e){var n=this.owner.node;this.handler=this.eventPlugin(n,function(t){(t=void 0===t?{}:t).node=t.node||n,e.fire(t)})},lu.prototype.unlisten=function(){this.handler.teardown()};function cu(t,e){this.ractive=t,this.name=e,this.handler=null}cu.prototype.listen=function(n){var i=this.ractive;this.handler=i.on(this.name,function(){var t;arguments.length&&arguments[0]&&arguments[0].node&&((t=Array.prototype.shift.call(arguments)).component=i);var e=Array.prototype.slice.call(arguments);return n.fire(t,e),!1})},cu.prototype.unlisten=function(){this.handler.cancel()};function pu(t){var n=this;this.owner=t.owner||t.parentFragment.owner||Zs(t.parentFragment),this.element=this.owner.attributeByName?this.owner:Zs(t.parentFragment),this.template=t.template,this.parentFragment=t.parentFragment,this.ractive=t.parentFragment.ractive,this.events=[],15===this.element.type?this.template.n.split("-").forEach(function(t){n.events.push(new cu(n.element.instance,t))}):this.template.n.split("-").forEach(function(t){var e=X("events",n.ractive,t);n.events.push(e?new lu(e,n.element):new hu(t,n.element))}),this.context=null,this.resolvers=null,this.models=null,this.action=null,this.args=null}var du=/^(event|arguments)(\..+)?$/,fu=/^\$(\d+)(\..+)?$/;function mu(t){t.makeDirty()}pu.prototype.bind=function(){var r=this;this.context=this.parentFragment.findContext();var t=this.template.f;t.x?(this.fn=Mi(t.x.s,t.x.r.length),this.resolvers=[],this.models=t.x.r.map(function(t,e){var n=du.exec(t);if(n)return{special:n[1],keys:n[2]?It(n[2].substr(1)):[]};var i,n=fu.exec(t);if(n)return{special:"arguments",keys:[n[1]-1].concat(n[2]?It(n[2].substr(1)):[])};n=Ze(r.parentFragment,t);return n?n.register(r):(i=r.parentFragment.resolve(t,function(t){r.models[e]=t,ut(r.resolvers,i),t.register(r)}),r.resolvers.push(i)),n})):(this.action="string"==typeof t?t:"string"==typeof t.n?t.n:new Ll({owner:this,template:t.n}),this.args=t.a?"string"==typeof t.a?[t.a]:t.a:t.d?new Ll({owner:this,template:t.d}):[]),this.action&&"string"!=typeof this.action&&this.action.bind(),this.args&&t.d&&this.args.bind()},pu.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},pu.prototype.destroyed=function(){this.events.forEach(function(t){return t.unlisten()})},pu.prototype.fire=function(i,r){var o,t,e,n;void 0===r&&(r=[]),i&&!i.hasOwnProperty("_element")&&Wn(i,this.owner),this.fn?(o=[],i&&r.unshift(i),this.models&&this.models.forEach(function(t){if(!t)return o.push(void 0);if(t.special){for(var e="event"===t.special?i:r,n=t.keys.slice();n.length;)e=e[n.shift()];return o.push(e)}if(t.wrapper)return o.push(t.wrapperValue);o.push(t.get())}),n=(e=this.ractive).event,e.event=i,!1===this.fn.apply(e,o).pop()&&((t=i?i.original:void 0)?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()):Y("handler '"+this.template.n+"' returned false, but there is no event available to cancel")),e.event=n):(e=this.action.toString(),n=this.template.f.d?this.args.getArgsList():this.args,r.length&&(n=n.concat(r)),i&&(i.name=e),Jt(this.ractive,e,{event:i,args:n}))},pu.prototype.handleChange=function(){},pu.prototype.rebinding=function(t,e){var n,i=this;!this.models||~(n=this.models.indexOf(e))&&(this.models.splice(n,1,t),e.unregister(this),t&&t.addShuffleTask(function(){return t.register(i)}))},pu.prototype.render=function(){var e=this;xt(function(){return e.events.forEach(function(t){return t.listen(e)},!0)})},pu.prototype.toString=function(){return""},pu.prototype.unbind=function(){var e=this;this.template.f.x?(this.resolvers&&this.resolvers.forEach(ye),this.resolvers=[],this.models&&this.models.forEach(function(t){t&&t.unregister&&t.unregister(e)}),this.models=null):(this.action&&this.action.unbind&&this.action.unbind(),this.args&&this.args.unbind&&this.args.unbind())},pu.prototype.unrender=function(){this.events.forEach(function(t){return t.unlisten()})},pu.prototype.update=function(){!this.method&&this.dirty&&(this.dirty=!1,this.action&&this.action.update&&this.action.update(),this.args&&this.args.update&&this.args.update())};function gu(t){this.owner=t.owner||t.parentFragment.owner||Zs(t.parentFragment),this.element=this.owner.attributeByName?this.owner:Zs(t.parentFragment),this.parentFragment=this.owner.parentFragment,this.ractive=this.owner.ractive,t=this.template=t.template,this.dynamicName="object"==typeof t.f.n,this.dynamicArgs=!!t.f.d,this.dynamicName?this.nameFragment=new Ll({owner:this,template:t.f.n}):this.name=t.f.n||t.f,this.dynamicArgs?this.argsFragment=new Ll({owner:this,template:t.f.d}):t.f.a&&t.f.a.s?this.args=[]:this.args=t.f.a||[],this.node=null,this.intermediary=null,this.element.decorators.push(this)}var vu,yu=new tt("teardown"),bu=(vu=Ns,((xu.prototype=Object.create(vu&&vu.prototype)).constructor=xu).prototype.bind=function(){this.attributes.forEach(he),uu(this.instance,{partials:this._partials},{cssIds:this.parentFragment.cssIds}),this.eventHandlers.forEach(he),this.bound=!0},xu.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},xu.prototype.checkYielders=function(){var e=this;Object.keys(this.yielders).forEach(function(t){if(1<e.yielders[t].length)throw Ot(),new Error("A component template can only have one {{yield"+(t?" "+t:"")+"}} declaration at a time")})},xu.prototype.destroyed=function(){this.instance.fragment&&this.instance.fragment.destroyed()},xu.prototype.detach=function(){return this.instance.fragment.detach()},xu.prototype.find=function(t){return this.instance.fragment.find(t)},xu.prototype.findAll=function(t,e){this.instance.fragment.findAll(t,e)},xu.prototype.findComponent=function(t){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t):void 0:this.instance},xu.prototype.findAllComponents=function(t,e){e.test(this)&&(e.add(this.instance),e.live&&this.liveQueries.push(e)),this.instance.fragment.findAllComponents(t,e)},xu.prototype.firstNode=function(t){return this.instance.fragment.firstNode(t)},xu.prototype.render=function(t,e){pi(this.instance,t,null,e),this.checkYielders(),this.attributes.forEach(ge),this.eventHandlers.forEach(ge),function(t){var e=t.ractive;do{for(var n=e._liveComponentQueries,i=n.length;i--;){var r=n["_"+n[i]];r.test(t)&&(r.add(t.instance),t.liveQueries.push(r))}}while(e=e.parent)}(this),this.rendered=!0},xu.prototype.setupEvents=function(){var n=this,i=this.eventHandlers;Object.keys(this.template.v).forEach(function(t){var e=t.split("-");n.template.v[t];e.forEach(function(t){n.instance;i.push(new pu(n))})})},xu.prototype.shuffled=function(){this.liveQueries.forEach(mu),vu.prototype.shuffled.call(this)},xu.prototype.toString=function(){return this.instance.toHTML()},xu.prototype.unbind=function(){this.bound=!1,this.attributes.forEach(ye);var t=this.instance;t.viewmodel.teardown(),t.fragment.unbind(),t._observers.forEach(le),function(t){for(var e=t.ractive;e;){var n=e._liveComponentQueries["_"+t.name];n&&n.remove(t),e=e.parent}}(this),t.el&&t.el.__ractive_instances__&&ut(t.el.__ractive_instances__,t),yu.fire(t)},xu.prototype.unrender=function(t){var e=this;this.rendered=!1,this.shouldDestroy=t,this.instance.unrender(),this.attributes.forEach(be),this.eventHandlers.forEach(be),this.liveQueries.forEach(function(t){return t.remove(e.instance)})},xu.prototype.update=function(){this.dirty=!1,this.instance.fragment.update(),this.checkYielders(),this.attributes.forEach(xe),this.eventHandlers.forEach(xe)},xu),wu={update:V,teardown:V};function xu(t,e){var n=this;vu.call(this,t),this.type=15;var i=T(e.prototype);this.instance=i,this.name=t.template.e,this.parentFragment=t.parentFragment,this.liveQueries=[],i.el&&Q("The <"+this.name+"> component has a default 'el' property; it has been disregarded");e=t.template.p||{};"content"in e||(e.content=t.template.f||[]),this._partials=e,this.yielders={};for(var r,o=t.parentFragment;o;){if(16===o.owner.type){r=o.owner.container;break}o=o.parent}i.parent=this.parentFragment.ractive,i.container=r||null,i.root=i.parent.root,nu((i.component=this).instance,{partials:e}),i._inlinePartials=e,this.attributeByName={},this.attributes=[];var s=[];(this.template.m||[]).forEach(function(t){switch(t.t){case 13:case 70:case 72:n.attributes.push(Ml({owner:n,parentFragment:n.parentFragment,template:t}));break;case 73:case 71:break;default:s.push(t)}}),this.attributes.push(new Pa({owner:this,parentFragment:this.parentFragment,template:s})),this.eventHandlers=[],this.template.v&&this.setupEvents()}gu.prototype.bind=function(){var r=this;this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString()),this.dynamicArgs&&this.argsFragment.bind(),this.template.f.a&&this.template.f.a.s&&(this.resolvers=[],this.models=this.template.f.a.r.map(function(t,e){var n,i=Ze(r.parentFragment,t);return i?i.register(r):(n=r.parentFragment.resolve(t,function(t){r.models[e]=t,ut(r.resolvers,n),t.register(r)}),r.resolvers.push(n)),i}),this.argsFn=Mi(this.template.f.a.s,this.template.f.a.r.length))},gu.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},gu.prototype.destroyed=function(){this.intermediary&&this.intermediary.teardown(),this.shouldDestroy=!0},gu.prototype.handleChange=function(){this.bubble()},gu.prototype.rebinding=function(t,e,n){var i=this.models.indexOf(e);~i&&(t=Ne(this.template.f.a.r[i],t,e))!==e&&(e.unregister(this),this.models.splice(i,1,t),t&&t.addShuffleRegister(this,"mark"),n||this.bubble())},gu.prototype.render=function(){var n=this;xt(function(){var t,e=X("decorators",n.ractive,n.name);if(!e)return q(Z(n.name,"decorator")),void(n.intermediary=wu);if(n.node=n.element.node,t=n.argsFn?(t=n.models.map(function(t){if(t)return t.get()}),n.argsFn.apply(n.ractive,t)):n.dynamicArgs?n.argsFragment.getArgsList():n.args,n.intermediary=e.apply(n.ractive,[n.node].concat(t)),!n.intermediary||!n.intermediary.teardown)throw new Error("The '"+n.name+"' decorator must return an object with a teardown method");n.shouldDestroy&&n.destroyed()},!0),this.rendered=!0},gu.prototype.toString=function(){return""},gu.prototype.unbind=function(){var e=this;this.dynamicName&&this.nameFragment.unbind(),this.dynamicArgs&&this.argsFragment.unbind(),this.resolvers&&this.resolvers.forEach(ye),this.models&&this.models.forEach(function(t){t&&t.unregister(e)})},gu.prototype.unrender=function(t){t&&!this.element.rendered||!this.intermediary||this.intermediary.teardown(),this.rendered=!1},gu.prototype.update=function(){var t,e,n;this.dirty&&(e=this.dirty=!1,this.dynamicName&&this.nameFragment.dirty&&(e=(t=this.nameFragment.toString())!==this.name,this.name=t),this.intermediary&&(e||!this.intermediary.update?(this.unrender(),this.render()):this.dynamicArgs?this.argsFragment.dirty&&(n=this.argsFragment.getArgsList(),this.intermediary.update.apply(this.ractive,n)):this.argsFn?(n=this.models.map(function(t){if(t)return t.get()}),this.intermediary.update.apply(this.ractive,this.argsFn.apply(this.ractive,n))):this.intermediary.update.apply(this.ractive,this.args)),this.dynamicName&&this.nameFragment.dirty&&this.nameFragment.update(),this.dynamicArgs&&this.argsFragment.dirty&&this.argsFragment.update())};var Eu,ku=(Eu=Ns,((_u.prototype=Object.create(Eu&&Eu.prototype)).constructor=_u).prototype.bind=function(){},_u.prototype.render=function(){},_u.prototype.teardown=function(){},_u.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"},_u.prototype.unbind=function(){},_u.prototype.unrender=function(){},_u.prototype.update=function(){},_u);function _u(){Eu.apply(this,arguments)}function Ou(t,e){Y("The "+t+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:e})}var Tu=function(t,e){void 0===e&&(e="value"),this.element=t,this.ractive=t.ractive,this.attribute=t.attributeByName[e];var n=this.attribute.interpolator;n.twowayBinding=this;var i=n.model;if(i){if(i.isUnresolved)i.forceResolution(),Ou("expression",this.ractive);else if(i.isReadonly){e=i.getKeypath().replace(/^@/,"");return Y("Cannot use two-way binding on <"+t.name+"> element: "+e+" is read-only. To suppress this warning use <"+t.name+" twoway='false'...>",{ractive:this.ractive}),!1}}else n.resolver.forceResolution(),i=n.model,Ou("'"+n.template.r+"' reference",this.ractive);this.attribute.isTwoway=!0;n=(this.model=i).get();this.wasUndefined=void 0===n,void 0===n&&this.getInitialValue&&(n=this.getInitialValue(),i.set(n)),this.lastVal(!0,n);i=Zs(this.element,!1,"form");i&&(this.resetValue=n,i.formBindings.push(this))};function Au(){this._ractive.binding.handleChange()}Tu.prototype.bind=function(){this.model.registerTwowayBinding(this)},Tu.prototype.handleChange=function(){var t=this,e=this.getValue();this.lastVal()!==e&&(_t(this.root),this.attribute.locked=!0,this.model.set(e),this.lastVal(!0,e),this.model.get()!==e?this.attribute.locked=!1:xt(function(){return t.attribute.locked=!1}),Ot())},Tu.prototype.lastVal=function(t,e){if(!t)return this.lastValue;this.lastValue=e},Tu.prototype.rebinding=function(t,e){var n=this;this.model&&this.model===e&&e.unregisterTwowayBinding(this),t&&(this.model=t,xt(function(){return t.registerTwowayBinding(n)}))},Tu.prototype.render=function(){this.node=this.element.node,(this.node._ractive.binding=this).rendered=!0},Tu.prototype.setFromNode=function(t){this.model.set(t.value)},Tu.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)},Tu.prototype.unrender=function(){};var Cu,Su=(Cu=Tu,((ju.prototype=Object.create(Cu&&Cu.prototype)).constructor=ju).prototype.render=function(){Cu.prototype.render.call(this),this.node.addEventListener("change",Au,!1),this.node.attachEvent&&this.node.addEventListener("click",Au,!1)},ju.prototype.unrender=function(){this.node.removeEventListener("change",Au,!1),this.node.removeEventListener("click",Au,!1)},ju.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")},ju.prototype.getValue=function(){return this.node.checked},ju.prototype.setFromNode=function(t){this.model.set(t.checked)},ju);function ju(t){Cu.call(this,t,"checked")}function Pu(t,e,n){t+="-bindingGroup";return e[t]||(e[t]=new Nu(t,e,n))}var Nu=function(t,e,n){var i=this;this.model=e,this.hash=t,this.getValue=function(){return i.value=n.call(i),i.value},this.bindings=[]};Nu.prototype.add=function(t){this.bindings.push(t)},Nu.prototype.bind=function(){this.value=this.model.get(),this.model.registerTwowayBinding(this),this.bound=!0},Nu.prototype.remove=function(t){ut(this.bindings,t),this.bindings.length||this.unbind()},Nu.prototype.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1,delete this.model[this.hash]},Nu.prototype.rebinding=Tu.prototype.rebinding;var Iu=[].push;function Fu(){var t=this.bindings.filter(function(t){return t.node&&t.node.checked}).map(function(t){return t.element.getAttribute("value")}),e=[];return t.forEach(function(t){ot(e,t)||e.push(t)}),e}var Du,Ru,Mu=(Ru=Tu,((Lu.prototype=Object.create(Ru&&Ru.prototype)).constructor=Lu).prototype.bind=function(){this.group.bound||this.group.bind()},Lu.prototype.changed=function(){var t=!!this.isChecked;return this.isChecked=this.node.checked,this.isChecked===t},Lu.prototype.getInitialValue=function(){return this.noInitialValue=!0,[]},Lu.prototype.getValue=function(){return this.group.value},Lu.prototype.handleChange=function(){this.isChecked=this.element.node.checked,this.group.value=this.model.get();var t=this.element.getAttribute("value");this.isChecked&&!ot(this.group.value,t)?this.group.value.push(t):!this.isChecked&&ot(this.group.value,t)&&ut(this.group.value,t),this.lastValue=null,Ru.prototype.handleChange.call(this)},Lu.prototype.render=function(){Ru.prototype.render.call(this);var t=this.node,e=this.model.get(),n=this.element.getAttribute("value");D(e)?this.isChecked=ot(e,n):this.isChecked=e==n,t.name="{{"+this.model.getKeypath()+"}}",t.checked=this.isChecked,t.addEventListener("change",Au,!1),t.attachEvent&&t.addEventListener("click",Au,!1)},Lu.prototype.setFromNode=function(t){this.group.bindings.forEach(function(t){return t.wasUndefined=!0}),t.checked&&((t=this.group.getValue()).push(this.element.getAttribute("value")),this.group.model.set(t))},Lu.prototype.unbind=function(){this.group.remove(this)},Lu.prototype.unrender=function(){var t=this.element.node;t.removeEventListener("change",Au,!1),t.removeEventListener("click",Au,!1)},Lu),Bu=(Du=Tu,((Vu.prototype=Object.create(Du&&Du.prototype)).constructor=Vu).prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},Vu.prototype.getValue=function(){return this.element.node.innerHTML},Vu.prototype.render=function(){Du.prototype.render.call(this);var t=this.node;t.addEventListener("change",Au,!1),t.addEventListener("blur",Au,!1),this.ractive.lazy||(t.addEventListener("input",Au,!1),t.attachEvent&&t.addEventListener("keyup",Au,!1))},Vu.prototype.setFromNode=function(t){this.model.set(t.innerHTML)},Vu.prototype.unrender=function(){var t=this.node;t.removeEventListener("blur",Au,!1),t.removeEventListener("change",Au,!1),t.removeEventListener("input",Au,!1),t.removeEventListener("keyup",Au,!1)},Vu);function Vu(){Du.apply(this,arguments)}function Lu(t){var e;Ru.call(this,t,"name"),this.checkboxName=!0,this.group=Pu("checkboxes",this.model,Fu),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")&&(ot(e=this.model.get(),t=this.element.getAttribute("value"))||Iu.call(e,t))}function Ku(){Au.call(this);var t=this._ractive.binding.model.get();this.value=null==t?"":t}var Uu,zu,Wu=(zu=Tu,((qu.prototype=Object.create(zu&&zu.prototype)).constructor=qu).prototype.getInitialValue=function(){return""},qu.prototype.getValue=function(){return this.node.value},qu.prototype.render=function(){zu.prototype.render.call(this);var e,n,t=this.ractive.lazy,i=!1;M(t="lazy"in this.element?this.element.lazy:t)&&(i=+t,t=!1),this.handler=i?(e=i,function(){var t=this;n&&clearTimeout(n),n=setTimeout(function(){t._ractive.binding.rendered&&Au.call(t),n=null},e)}):Au;i=this.node;i.addEventListener("change",Au,!1),t||(i.addEventListener("input",this.handler,!1),i.attachEvent&&i.addEventListener("keyup",this.handler,!1)),i.addEventListener("blur",Ku,!1)},qu.prototype.unrender=function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Au,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",Ku,!1)},qu),$u=(Uu=Wu,((Hu.prototype=Object.create(Uu&&Uu.prototype)).constructor=Hu).prototype.getInitialValue=function(){},Hu.prototype.getValue=function(){return this.node.files},Hu.prototype.render=function(){this.element.lazy=!1,Uu.prototype.render.call(this)},Hu.prototype.setFromNode=function(t){this.model.set(t.files)},Hu);function Hu(){Uu.apply(this,arguments)}function qu(){zu.apply(this,arguments)}function Qu(t){return t.selectedOptions?ht(t.selectedOptions):t.options?ht(t.options).filter(function(t){return t.selected}):[]}var Yu,Zu,Xu=(Zu=Tu,((eh.prototype=Object.create(Zu&&Zu.prototype)).constructor=eh).prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,xt(function(){return t.attribute.locked=!1}),this.model.set(e))},eh.prototype.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},eh.prototype.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],i=0;i<e;i+=1){var r=t[i];r.selected&&(r=(r._ractive||r).value,n.push(r))}return n},eh.prototype.handleChange=function(){var t=this.attribute.getValue(),e=this.getValue();return void 0!==t&&function(t,e){var n;if(D(t)&&D(e)&&t.length===e.length){for(n=t.length;n--;)if(t[n]!==e[n])return;return 1}}(e,t)||Zu.prototype.handleChange.call(this),this},eh.prototype.render=function(){Zu.prototype.render.call(this),this.node.addEventListener("change",Au,!1),void 0===this.model.get()&&this.handleChange()},eh.prototype.setFromNode=function(t){for(var e=Qu(t),n=e.length,i=new Array(n);n--;){var r=e[n];i[n]=(r._ractive||r).value}this.model.set(i)},eh.prototype.setValue=function(){throw new Error("TODO not implemented yet")},eh.prototype.unrender=function(){this.node.removeEventListener("change",Au,!1)},eh.prototype.updateModel=function(){void 0!==this.attribute.value&&this.attribute.value.length||this.keypath.set(this.initialValue)},eh),Gu=(Yu=Wu,((th.prototype=Object.create(Yu&&Yu.prototype)).constructor=th).prototype.getInitialValue=function(){},th.prototype.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},th.prototype.setFromNode=function(t){t=parseFloat(t.value);isNaN(t)||this.model.set(t)},th),Ju={};function th(){Yu.apply(this,arguments)}function eh(){Zu.apply(this,arguments)}var nh,ih=(nh=Tu,((rh.prototype=Object.create(nh&&nh.prototype)).constructor=rh).prototype.getValue=function(){return this.node.checked},rh.prototype.handleChange=function(){_t(this.root),this.siblings.forEach(function(t){t.model.set(t.getValue())}),Ot()},rh.prototype.render=function(){nh.prototype.render.call(this),this.node.addEventListener("change",Au,!1),this.node.attachEvent&&this.node.addEventListener("click",Au,!1)},rh.prototype.setFromNode=function(t){this.model.set(t.checked)},rh.prototype.unbind=function(){ut(this.siblings,this)},rh.prototype.unrender=function(){this.node.removeEventListener("change",Au,!1),this.node.removeEventListener("click",Au,!1)},rh);function rh(t){nh.call(this,t,"checked"),this.siblings=(t=this.ractive._guid+this.element.getAttribute("name"),Ju[t]||(Ju[t]=[])),this.siblings.push(this)}function oh(){var t=this.bindings.filter(function(t){return t.node.checked});if(0<t.length)return t[0].element.getAttribute("value")}var sh,ah,uh=(ah=Tu,((ch.prototype=Object.create(ah&&ah.prototype)).constructor=ch).prototype.bind=function(){var t=this;this.group.bound||this.group.bind(),this.nameAttributeBinding={handleChange:function(){return t.node.name="{{"+t.model.getKeypath()+"}}"},rebinding:V},this.model.getKeypathModel().register(this.nameAttributeBinding)},ch.prototype.getInitialValue=function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},ch.prototype.getValue=function(){return this.element.getAttribute("value")},ch.prototype.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),ah.prototype.handleChange.call(this))},ch.prototype.lastVal=function(t,e){if(this.group)return t?void(this.group.lastValue=e):this.group.lastValue},ch.prototype.render=function(){ah.prototype.render.call(this);var t=this.node;t.name="{{"+this.model.getKeypath()+"}}",t.checked=this.model.get()==this.element.getAttribute("value"),t.addEventListener("change",Au,!1),t.attachEvent&&t.addEventListener("click",Au,!1)},ch.prototype.setFromNode=function(t){t.checked&&this.group.model.set(this.element.getAttribute("value"))},ch.prototype.unbind=function(){this.group.remove(this),this.model.getKeypathModel().unregister(this.nameAttributeBinding)},ch.prototype.unrender=function(){var t=this.node;t.removeEventListener("change",Au,!1),t.removeEventListener("click",Au,!1)},ch),hh=(sh=Tu,((lh.prototype=Object.create(sh&&sh.prototype)).constructor=lh).prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,xt(function(){return t.attribute.locked=!1}),this.model.set(e))},lh.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n,i,r=e;r--;){var o=t[r];if(o.getAttribute("selected")){o.getAttribute("disabled")||(n=o.getAttribute("value")),i=!0;break}}if(!i)for(;++r<e;)if(!t[r].getAttribute("disabled")){n=t[r].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},lh.prototype.getValue=function(){for(var t=this.node.options,e=t.length,n=0;n<e;n+=1){var i=t[n];if(t[n].selected&&!t[n].disabled)return(i._ractive||i).value}},lh.prototype.render=function(){sh.prototype.render.call(this),this.node.addEventListener("change",Au,!1)},lh.prototype.setFromNode=function(t){t=Qu(t)[0];this.model.set((t._ractive||t).value)},lh.prototype.setValue=function(t){this.model.set(t)},lh.prototype.unrender=function(){this.node.removeEventListener("change",Au,!1)},lh);function lh(){sh.apply(this,arguments)}function ch(t){ah.call(this,t,"name"),this.group=Pu("radioname",this.model,oh),this.group.add(this),t.checked&&(this.group.value=this.getValue())}function ph(t){return t&&t.template.f&&1===t.template.f.length&&2===t.template.f[0].t&&!t.template.f[0].s}var dh={isBindable:ph,GenericBinding:Wu,RadioBinding:ih,CheckboxBinding:Su,FileBinding:$u,SingleSelectBinding:hh,MultipleSelectBinding:Xu,NumericBinding:Gu,ContentEditableBinding:Bu};function fh(t){t.makeDirty()}var mh,gh=/;\s*$/,vh=(mh=Ns,((yh.prototype=Object.create(mh&&mh.prototype)).constructor=yh).prototype.bind=function(){this.attributes.binding=!0,this.attributes.forEach(he),this.attributes.binding=!1,this.fragment&&this.fragment.bind(),this.binding||this.recreateTwowayBinding()},yh.prototype.createTwowayBinding=function(){if(!("twoway"in this?this:this.ractive).twoway)return null;t="mds-"===(t=this).name.substring(0,4)&&"function"==typeof Yl.selectBindingMDS?Yl.selectBindingMDS(t,dh):function(t){var e=t.attributeByName;if(t.getAttribute("contenteditable")||ph(e.contenteditable))return ph(e.value)?Bu:null;if("input"!==t.name)return"select"===t.name&&ph(e.value)?t.getAttribute("multiple")?Xu:hh:"textarea"===t.name&&ph(e.value)?Wu:void 0;var n=t.getAttribute("type");if("radio"===n||"checkbox"===n){var i=ph(e.name),r=ph(e.checked);if(i&&r){if("radio"!==n)return Su;Q("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root})}if(i)return"radio"===n?uh:Mu;if(r)return"radio"===n?ih:Su}return"file"===n&&ph(e.value)?$u:ph(e.value)?"number"===n||"range"===n?Gu:Wu:null}(t);if(!t)return null;var t=new t(this);return t&&t.model?t:null},yh.prototype.destroyed=function(){this.attributes.forEach(function(t){return t.destroyed()}),this.fragment&&this.fragment.destroyed()},yh.prototype.detach=function(){return this.rendered||this.destroyed(),k(this.node)},yh.prototype.find=function(t){return this.node&&o(this.node,t)?this.node:this.fragment?this.fragment.find(t):void 0},yh.prototype.findAll=function(t,e){e.test(this.node)&&(e.add(this.node),e.live&&this.liveQueries.push(e)),this.fragment&&this.fragment.findAll(t,e)},yh.prototype.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t)},yh.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},yh.prototype.findNextNode=function(){return null},yh.prototype.firstNode=function(){return this.node},yh.prototype.getAttribute=function(t){t=this.attributeByName[t];return t?t.getValue():void 0},yh.prototype.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender()),(this.binding=this.createTwowayBinding())&&(this.binding.bind(),this.rendered&&this.binding.render())},yh.prototype.render=function(t,e){var n;this.namespace=function(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return b;e=t.parent;return e?"foreignobject"===e.name?y:e.node.namespaceURI:t.ractive.el.namespaceURI}(this);var i,r,o=!1;if(e)for(;i=e.shift();){if(i.nodeName.toUpperCase()===this.template.e.toUpperCase()&&i.namespaceURI===this.namespace){this.node=n=i,o=!0;break}k(i)}if(n||(n=h(this.template.e,this.namespace,this.getAttribute("is")),this.node=n),A(n,"_ractive",{value:{proxy:this}}),this.parentFragment.cssIds&&n.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),o&&this.foundNode&&this.foundNode(n),this.fragment&&(r=o?ht(n.childNodes):void 0,this.fragment.render(n,r),r&&r.forEach(k)),o){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(n);for(var s=n.attributes.length;s--;){var a=n.attributes[s].name;a in this.attributeByName||n.removeAttribute(a)}}this.attributes.forEach(ge),this.binding&&this.binding.render(),function(t){var e=t.node,n=t.ractive;do{for(var i=n._liveQueries,r=i.length;r--;){var o=i["_"+i[r]];o.test(e)&&(o.add(e),t.liveQueries.push(o))}}while(n=n.parent)}(this),this._introTransition&&this.ractive.transitionsEnabled&&(this._introTransition.isIntro=!0,wt(this._introTransition)),o||t.appendChild(n),this.rendered=!0},yh.prototype.shuffled=function(){this.liveQueries.forEach(fh),mh.prototype.shuffled.call(this)},yh.prototype.toString=function(){var e,n,t,i,r,o=this.template.e,s=this.attributes.map(bh).join("");"option"===this.name&&this.isSelected()&&(s+=" selected"),"input"===this.name&&(i=(t=this).attributeByName,r=i.type,t=i.value,i=i.name,r&&"radio"===r.value&&t&&i.interpolator&&t.getValue()===i.interpolator.model.get())&&(s+=" checked"),this.attributes.forEach(function(t){"class"===t.name?n=(n||"")+(n?" ":"")+O(t.getString()):"style"===t.name?(e=(e||"")+(e?" ":"")+O(t.getString()))&&!gh.test(e)&&(e+=";"):t.style?e=(e||"")+(e?" ":"")+t.style+": "+O(t.getString())+";":t.inlineClass&&t.getValue()&&(n=(n||"")+(n?" ":"")+t.inlineClass)}),void 0!==e&&(s=" style"+(e?'="'+e+'"':"")+s);s="<"+o+(s=void 0!==n?" class"+(n?'="'+n+'"':"")+s:s)+">";return this.isVoid?s:("textarea"===this.name&&void 0!==this.getAttribute("value")?s+=sr(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(s+=this.getAttribute("value")||""),this.fragment&&(s+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),s+"</"+o+">")},yh.prototype.unbind=function(){this.attributes.unbinding=!0,this.attributes.forEach(ye),this.attributes.unbinding=!1,this.binding&&this.binding.unbind(),this.fragment&&this.fragment.unbind()},yh.prototype.unrender=function(t){var e;this.rendered&&(this.rendered=!1,(e=this._introTransition)&&e.complete&&e.complete(),"option"===this.name?this.detach():t&&(t=this,Et.transitionManager.detachQueue.push(t)),this.fragment&&this.fragment.unrender(),this.binding&&this.binding.unrender(),this._outroTransition&&this.ractive.transitionsEnabled&&(this._outroTransition.isIntro=!1,wt(this._outroTransition)),function(t){for(var e=t.liveQueries.length;e--;)t.liveQueries[e].remove(t.node)}(this))},yh.prototype.update=function(){this.dirty&&(this.dirty=!1,this.attributes.forEach(xe),this.fragment&&this.fragment.update())},yh);function yh(t){var e=this;if(mh.call(this,t),this.liveQueries=[],this.name=t.template.e.toLowerCase(),this.isVoid=Zi.test(this.name),this.parent=Zs(this.parentFragment,!1),this.parent&&"option"===this.parent.name)throw new Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[],this.attributeByName={},this.attributes=[];var n=[];(this.template.m||[]).forEach(function(t){switch(t.t){case 13:case 73:case 71:case 70:case 72:e.attributes.push(Ml({owner:e,parentFragment:e.parentFragment,template:t}));break;default:n.push(t)}}),n.length&&this.attributes.push(new Pa({owner:this,parentFragment:this.parentFragment,template:n}));for(var i=this.attributes.length;i--;){var r=e.attributes[i];"type"===r.name||"max"===r.name||"min"===r.name||"class"===r.name?e.attributes.unshift(e.attributes.splice(i,1)[0]):"value"===r.name&&e.attributes.push(e.attributes.splice(i,1)[0])}t.template.f&&!t.deferContent&&(this.fragment=new Ll({template:t.template.f,owner:this,cssIds:null})),this.binding=null}function bh(t){t=t.toString();return t?" "+t:""}var wh,Ce=(wh=vh,((xh.prototype=Object.create(wh&&wh.prototype)).constructor=xh).prototype.render=function(t,e){wh.prototype.render.call(this,t,e),this.node.addEventListener("reset",Eh,!1)},xh.prototype.unrender=function(t){this.node.removeEventListener("reset",Eh,!1),wh.prototype.unrender.call(this,t)},xh);function xh(t){wh.call(this,t),this.formBindings=[]}function Eh(){var t=this._ractive.proxy;_t(),t.formBindings.forEach(kh),Ot()}function kh(t){t.model.set(t.resetValue)}var _h,Oh,Th,Ah,Li=(Ah=Ns,((Ih.prototype=Object.create(Ah&&Ah.prototype)).constructor=Ih).prototype.bind=function(){var e=this,t=$s(this.parentFragment,this.template),n=t?t.get():void 0;this.isStatic?this.model={get:function(){return n}}:t?(t.register(this),this.model=t):this.template.r&&(this.resolver=this.parentFragment.resolve(this.template.r,function(t){(e.model=t).register(e),e.handleChange(),e.resolver=null}))},Ih.prototype.handleChange=function(){this.bubble()},Ih.prototype.rebinding=function(t,e,n){return t=Ne(this.template,t,e),!this.static&&t!==this.model&&(this.model&&this.model.unregister(this),t&&t.addShuffleRegister(this,"mark"),this.model=t,n||this.handleChange(),!0)},Ih.prototype.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0,this.resolver&&this.resolver.unbind())},Ih),bs=(Th=Li,((Nh.prototype=Object.create(Th&&Th.prototype)).constructor=Nh).prototype.bubble=function(){this.owner&&this.owner.bubble(),Th.prototype.bubble.call(this)},Nh.prototype.detach=function(){return k(this.node)},Nh.prototype.firstNode=function(){return this.node},Nh.prototype.getString=function(){return this.model?_(this.model.get()):""},Nh.prototype.render=function(t,e){var n,i;Sa||(n=this.getString(),this.rendered=!0,e?((i=e[0])&&3===i.nodeType?(e.shift(),i.nodeValue!==n&&(i.nodeValue=n)):(i=this.node=a.createTextNode(n),e[0]?t.insertBefore(i,e[0]):t.appendChild(i)),this.node=i):(this.node=a.createTextNode(n),t.appendChild(this.node)))},Nh.prototype.toString=function(t){var e=this.getString();return t?sr(e):e},Nh.prototype.unrender=function(t){t&&this.detach(),this.rendered=!1},Nh.prototype.update=function(){this.dirty&&(this.dirty=!1,this.rendered&&(this.node.data=this.getString()))},Nh.prototype.valueOf=function(){return this.model?this.model.get():void 0},Nh),Ch=(Oh=vh,((Ph.prototype=Object.create(Oh&&Oh.prototype)).constructor=Ph).prototype.render=function(t,e){Oh.prototype.render.call(this,t,e),this.node.defaultValue=this.node.value},Ph),Sh=(_h=Ns,((jh.prototype=Object.create(_h&&_h.prototype)).constructor=jh).prototype.bind=function(){this.fragment&&this.fragment.bind();var t,e,n=this.template.f,i=this.element.instance.viewmodel;0===n?i.joinKey(this.name).set(!0):"string"==typeof n?(e=qr(n),i.joinKey(this.name).set(e?e.value:n)):D(n)&&(i=(t=this).template.f,e=t.element.instance.viewmodel,n=e.value,1===i.length&&2===i[0].t?(t.model=$s(t.parentFragment,i[0]),t.model||(Y("The "+t.name+"='{{"+i[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.element.instance}),t.parentFragment.ractive.get(t.name),t.model=t.parentFragment.findContext().joinKey(t.name)),t.link=e.createLink(t.name,t.model,i[0].r),void 0===t.model.get()&&!t.model.isReadonly&&t.name in n&&t.model.set(n[t.name])):(t.boundFragment=new Ll({owner:t,template:i}).bind(),t.model=e.joinKey(t.name),t.model.set(t.boundFragment.valueOf()),t.boundFragment.bubble=function(){Ll.prototype.bubble.call(t.boundFragment),xt(function(){t.boundFragment.update(),t.model.set(t.boundFragment.valueOf())})}))},jh.prototype.render=function(){},jh.prototype.unbind=function(){this.fragment&&this.fragment.unbind(),this.model&&this.model.unregister(this),this.boundFragment&&this.boundFragment.unbind(),this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()},jh.prototype.unrender=function(){},jh.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.boundFragment&&this.boundFragment.update(),this.rendered&&this.updateDelegate())},jh);function jh(t){_h.call(this,t),this.name=t.template.n,this.owner=t.owner||t.parentFragment.owner||t.element||Zs(t.parentFragment),this.element=t.element||(this.owner.attributeByName?this.owner:Zs(t.parentFragment)),this.parentFragment=this.element.parentFragment,this.ractive=this.parentFragment.ractive,this.fragment=null,(this.element.attributeByName[this.name]=this).value=t.template.f}function Ph(){Oh.apply(this,arguments)}function Nh(){Th.apply(this,arguments)}function Ih(t){Ah.call(this,t),this.parentFragment=t.parentFragment,this.template=t.template,this.index=t.index,t.owner&&(this.parent=t.owner),this.isStatic=!!t.template.s,this.model=null,this.dirty=!1}var Fh,Dh=(Fh=vh,((Rh.prototype=Object.create(Fh&&Fh.prototype)).constructor=Rh).prototype.bind=function(){var t;this.select?((t=this.attributeByName.selected)&&void 0!==this.select.getAttribute("value")&&(t=this.attributes.indexOf(t),this.attributes.splice(t,1),delete this.attributeByName.selected),Fh.prototype.bind.call(this),this.select.options.push(this)):Fh.prototype.bind.call(this)},Rh.prototype.bubble=function(){var t=this.getAttribute("value");this.node&&this.node.value!==t&&(this.node._ractive.value=t),Fh.prototype.bubble.call(this)},Rh.prototype.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():"value"===t&&this.fragment?this.fragment.valueOf():void 0},Rh.prototype.isSelected=function(){var t=this.getAttribute("value");if(void 0===t||!this.select)return!1;var e=this.select.getAttribute("value");if(e==t)return!0;if(this.select.getAttribute("multiple")&&D(e))for(var n=e.length;n--;)if(e[n]==t)return!0},Rh.prototype.render=function(t,e){Fh.prototype.render.call(this,t,e),this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))},Rh.prototype.unbind=function(){Fh.prototype.unbind.call(this),this.select&&ut(this.select.options,this)},Rh);function Rh(t){var e=t.template;e.a||(e.a={}),void 0!==e.a.value||"disabled"in e.a||(e.a.value=e.f||""),Fh.call(this,t),this.select=Zs(this.parent||this.parentFragment,!1,"select")}function Mh(t,e,a){var n=function(t,e){var n=function t(e,n){if(n)return n.template&&n.template.p&&n.template.p[e]?n.template.p[e]:n.parentFragment&&n.parentFragment.owner?t(e,n.parentFragment.owner):void 0}(e,(a||{}).owner);if(n)return n;var i,r,o,s=G("partials",t,e);if(s){if("function"==typeof(n=s.partials[e])&&((i=n.bind(s)).isOwner=s.partials.hasOwnProperty(e),n=i.call(t,as)),n||""===n)return as.isParsed(n)||((r=as.parseFor(n,s)).p&&Q("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t}),(i?s:(o=e,(s=s).partials.hasOwnProperty(o)?s:function t(e,n){if(e)return e.partials.hasOwnProperty(n)?e:t(e._Parent,n)}(s.constructor,o))).partials[e]=n=r.t),i&&(n._fn=i),n.v?n.t:n;Q('A function was specified for "%s" %s, but no %s was returned',e,"partial","partial",{ractive:t})}}(t,e);if(n)return n;if(n=as.fromId(e,{noThrow:!0})){n=as.parseFor(n,t);return n.p&&function(n){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];t.forEach(function(t){for(var e in t)!I.call(t,e)||e in n||(n[e]=t[e])})}(t.partials,n.p),t.partials[e]=n.t}}var Bh,Vh=(Bh=Li,((Lh.prototype=Object.create(Bh&&Bh.prototype)).constructor=Lh).prototype.bind=function(){this.refName=this.template.r;var t,e=this.refName&&Mh(this.ractive,this.refName,this.parentFragment)||null;e&&(this.named=!0,this.setTemplate(this.template.r,e)),e||(Bh.prototype.bind.call(this),this.model&&(t=this.model.get())&&"object"==typeof t&&("string"==typeof t.template||D(t.t))?(t.template?(this.source=t.template,t=Kh(this.template.r,t.template,this.ractive)):this.source=t.t,this.setTemplate(this.template.r,t.t)):this.model&&"string"==typeof this.model.get()||!this.refName?this.setTemplate(this.model.get()):this.setTemplate(this.refName,e)),this.fragment=new Ll({owner:this,template:this.partialTemplate}).bind()},Lh.prototype.detach=function(){return this.fragment.detach()},Lh.prototype.find=function(t){return this.fragment.find(t)},Lh.prototype.findAll=function(t,e){this.fragment.findAll(t,e)},Lh.prototype.findComponent=function(t){return this.fragment.findComponent(t)},Lh.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},Lh.prototype.firstNode=function(t){return this.fragment.firstNode(t)},Lh.prototype.forceResetTemplate=function(){var t=this;this.partialTemplate=void 0,this.refName&&(this.partialTemplate=Mh(this.ractive,this.refName,this.parentFragment)),this.partialTemplate||(this.partialTemplate=Mh(this.ractive,this.name,this.parentFragment)),this.partialTemplate||(Y("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]),this.inAttribute?(Sa=!0,t.fragment.resetTemplate(t.partialTemplate),Sa=!1):this.fragment.resetTemplate(this.partialTemplate),this.bubble()},Lh.prototype.render=function(t,e){this.fragment.render(t,e)},Lh.prototype.setTemplate=function(t,e){this.name=t,(e=!e&&null!==e?Mh(this.ractive,t,this.parentFragment):e)||Y("Could not find template for partial '"+t+"'"),this.partialTemplate=e||[]},Lh.prototype.toString=function(t){return this.fragment.toString(t)},Lh.prototype.unbind=function(){Bh.prototype.unbind.call(this),this.fragment.unbind()},Lh.prototype.unrender=function(t){this.fragment.unrender(t)},Lh.prototype.update=function(){var t;this.dirty&&(this.dirty=!1,this.named||((t=this.model?this.model.get():t)&&"string"==typeof t&&t!==this.name?(this.setTemplate(t),this.fragment.resetTemplate(this.partialTemplate)):t&&"object"==typeof t&&("string"==typeof t.template||D(t.t))&&t.t!==this.source&&t.template!==this.source&&(t.template?(this.source=t.template,t=Kh(this.name,t.template,this.ractive)):this.source=t.t,this.setTemplate(this.name,t.t),this.fragment.resetTemplate(this.partialTemplate))),this.fragment.update())},Lh);function Lh(){Bh.apply(this,arguments)}function Kh(t,e,n){var i;try{i=as.parse(e,as.getParseOptions(n))}catch(e){Q("Could not parse partial from expression '"+t+"'\n"+e.message)}return i||{t:[]}}function Uh(t){this.parent=t.owner.parentFragment,(this.parentFragment=this).owner=t.owner,this.ractive=this.parent.ractive,this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.context=null,this.rendered=!1,this.iterations=[],this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.previousIterations=null,this.isArray=!1}Uh.prototype.bind=function(t){var n=this,e=(this.context=t).get();if(this.isArray=D(e)){this.iterations=[];for(var i=e.length,r=0;r<i;r+=1)n.iterations[r]=n.createIteration(r,r)}else B(e)&&(this.isArray=!1,this.indexRef&&(t=this.indexRef.split(","),this.keyRef=t[0],this.indexRef=t[1]),this.iterations=Object.keys(e).map(function(t,e){return n.createIteration(t,e)}));return this},Uh.prototype.bubble=function(){this.owner.bubble()},Uh.prototype.createIteration=function(t,e){var n=new Ll({owner:this,template:this.template});n.key=t,n.index=e,n.isIteration=!0;t=this.context.joinKey(t);return this.owner.template.z&&(n.aliases={},n.aliases[this.owner.template.z[0].n]=t),n.bind(t)},Uh.prototype.destroyed=function(){this.iterations.forEach(function(t){return t.destroyed()})},Uh.prototype.detach=function(){var e=x();return this.iterations.forEach(function(t){return e.appendChild(t.detach())}),e},Uh.prototype.find=function(t){for(var e=this.iterations.length,n=0;n<e;n+=1){var i=this.iterations[n].find(t);if(i)return i}},Uh.prototype.findAll=function(t,e){for(var n=this.iterations.length,i=0;i<n;i+=1)this.iterations[i].findAll(t,e)},Uh.prototype.findComponent=function(t){for(var e=this.iterations.length,n=0;n<e;n+=1){var i=this.iterations[n].findComponent(t);if(i)return i}},Uh.prototype.findAllComponents=function(t,e){for(var n=this.iterations.length,i=0;i<n;i+=1)this.iterations[i].findAllComponents(t,e)},Uh.prototype.findNextNode=function(t){if(t.index<this.iterations.length-1)for(var e=t.index+1;e<this.iterations.length;e++){var n=this.iterations[e].firstNode(!0);if(n)return n}return this.owner.findNextNode()},Uh.prototype.firstNode=function(t){return this.iterations[0]?this.iterations[0].firstNode(t):null},Uh.prototype.rebinding=function(n){var i=this;this.context=n,this.iterations.forEach(function(t){var e=n?n.joinKey(t.key||t.index):void 0;t.context=e,i.owner.template.z&&(t.aliases={},t.aliases[i.owner.template.z[0].n]=e)})},Uh.prototype.render=function(e,n){this.iterations&&this.iterations.forEach(function(t){return t.render(e,n)}),this.rendered=!0},Uh.prototype.shuffle=function(t){var i=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice()),this.pendingNewIndices||(this.pendingNewIndices=[]),this.pendingNewIndices.push(t);var r=[];t.forEach(function(t,e){var n;-1!==t&&(n=i.iterations[e],r[t]=n,t!==e&&n&&(n.dirty=!0))}),this.iterations=r,this.bubble()},Uh.prototype.shuffled=function(){this.iterations.forEach(function(t){return t.shuffled()})},Uh.prototype.toString=function(t){return this.iterations?this.iterations.map(t?ke:Ee).join(""):""},Uh.prototype.unbind=function(){return this.iterations.forEach(ye),this},Uh.prototype.unrender=function(e){this.iterations.forEach(e?we:be),this.pendingNewIndices&&this.previousIterations&&this.previousIterations.forEach(function(t){t.rendered&&(e?we:be)(t)}),this.rendered=!1},Uh.prototype.update=function(){var e=this;if(this.pendingNewIndices)this.updatePostShuffle();else if(!this.updating){this.updating=!0;var t,n,i,r=this.context.get(),o=this.isArray,s=!0;if(this.isArray=D(r))o&&(s=!1,this.iterations.length>r.length&&(t=this.iterations.splice(r.length)));else if(B(r)&&!o)for(s=!1,t=[],n={},l=this.iterations.length;l--;){var a=e.iterations[l];a.key in r?n[a.key]=!0:(e.iterations.splice(l,1),t.push(a))}if(s&&(t=this.iterations,this.iterations=[]),t&&t.forEach(function(t){t.unbind(),t.unrender(!0)}),this.iterations.forEach(xe),(D(r)?r.length:B(r)?Object.keys(r).length:0)>this.iterations.length){var u,h=this.rendered?x():null,l=this.iterations.length;if(D(r))for(;l<r.length;)i=e.createIteration(l,l),e.iterations.push(i),e.rendered&&i.render(h),l+=1;else B(r)&&(this.indexRef&&!this.keyRef&&(u=this.indexRef.split(","),this.keyRef=u[0],this.indexRef=u[1]),Object.keys(r).forEach(function(t){n&&t in n||(i=e.createIteration(t,l),e.iterations.push(i),e.rendered&&i.render(h),l+=1)}));this.rendered&&(s=this.parent.findParentNode(),u=this.parent.findNextNode(this.owner),s.insertBefore(h,u))}this.updating=!1}},Uh.prototype.updatePostShuffle=function(){var i=this,r=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(function(n){r.forEach(function(t,e){r[e]=n[t]})});var t=this.context.get().length,e=this.previousIterations.length,o={};r.forEach(function(t,e){var n=i.previousIterations[e];i.previousIterations[e]=null,-1===t?o[e]=n:n.index!==t&&(e=i.context.joinKey(t),n.index=n.key=t,n.context=e,i.owner.template.z&&(n.aliases={},n.aliases[i.owner.template.z[0].n]=e))}),this.previousIterations.forEach(function(t,e){t&&(o[e]=t)});for(var n=this.rendered?x():null,s=this.rendered?this.parent.findParentNode():null,a=("startIndex"in r),u=a?r.startIndex:0;u<t;u++){var h=i.iterations[u];h&&a?i.rendered&&(o[u]&&n.appendChild(o[u].detach()),n.childNodes.length&&s.insertBefore(n,h.firstNode())):(h||(i.iterations[u]=i.createIteration(u,u)),i.rendered&&(o[u]&&n.appendChild(o[u].detach()),h?n.appendChild(h.detach()):i.iterations[u].render(n)))}if(this.rendered){for(u=t;u<e;u++)o[u]&&n.appendChild(o[u].detach());n.childNodes.length&&s.insertBefore(n,this.owner.findNextNode())}Object.keys(o).forEach(function(t){return o[t].unbind().unrender(!0)}),this.iterations.forEach(xe),this.pendingNewIndices=null,this.shuffled()};var zh,We=(zh=Li,((Wh.prototype=Object.create(zh&&zh.prototype)).constructor=Wh).prototype.bind=function(){zh.prototype.bind.call(this),this.subordinate&&(this.sibling=this.parentFragment.items[this.parentFragment.items.indexOf(this)-1],this.sibling.nextSibling=this),this.model?(this.dirty=!0,this.update()):!this.sectionType||51!==this.sectionType||this.sibling&&this.sibling.isTruthy()||(this.fragment=new Ll({owner:this,template:this.template.f}).bind())},Wh.prototype.detach=function(){return this.fragment?this.fragment.detach():x()},Wh.prototype.find=function(t){if(this.fragment)return this.fragment.find(t)},Wh.prototype.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},Wh.prototype.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t)},Wh.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Wh.prototype.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},Wh.prototype.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var t=this.model?this.model.isRoot?this.model.value:this.model.get():void 0;return!(!t||54!==this.templateSectionType&&(!(t=t)||D(t)&&0===t.length||B(t)&&0===Object.keys(t).length))},Wh.prototype.rebinding=function(t,e,n){zh.prototype.rebinding.call(this,t,e,n)&&this.fragment&&50!==this.sectionType&&51!==this.sectionType&&this.fragment.rebinding(t,e)},Wh.prototype.render=function(t,e){this.rendered=!0,this.fragment&&this.fragment.render(t,e)},Wh.prototype.shuffle=function(t){this.fragment&&52===this.sectionType&&this.fragment.shuffle(t)},Wh.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},Wh.prototype.unbind=function(){zh.prototype.unbind.call(this),this.fragment&&this.fragment.unbind()},Wh.prototype.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},Wh.prototype.update=function(){var t,e,n,i,r;this.dirty&&(this.fragment&&50!==this.sectionType&&51!==this.sectionType&&(this.fragment.context=this.model),this.model||51===this.sectionType)&&(this.dirty=!1,r=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,n=!this.subordinate||!this.sibling.isTruthy(),e=this.sectionType,null!==this.sectionType&&null!==this.templateSectionType||(this.sectionType=(r=r,this.template.i||D(r)?52:B(r)||"function"==typeof r?54:void 0===r?null:50)),e&&e!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null),52===this.sectionType||53===this.sectionType||n&&(51===this.sectionType?!this.isTruthy():this.isTruthy())?this.fragment?this.fragment.update():t=52===this.sectionType?new Uh({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model):(i=50!==this.sectionType&&51!==this.sectionType?this.model:null,new Ll({owner:this,template:this.template.f}).bind(i)):(this.fragment&&(this.fragment.unbind(),this.rendered&&this.fragment.unrender(!0)),this.fragment=null),t&&(this.rendered&&(e=this.parentFragment.findParentNode(),(n=this.parentFragment.findNextNode(this))?(i=x(),t.render(i),n.parentNode.insertBefore(i,n)):t.render(e)),this.fragment=t),this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update()))},Wh);function Wh(t){zh.call(this,t),this.sectionType=t.template.n||null,this.templateSectionType=this.sectionType,this.subordinate=1===t.template.l,this.fragment=null}var $h,Hh,qh,Qh,Yh,ou=(qh=vh,((Jh.prototype=Object.create(qh&&qh.prototype)).constructor=Jh).prototype.foundNode=function(t){!this.binding||0<(t=Qu(t)).length&&(this.selectedOptions=t)},Jh.prototype.render=function(t,e){qh.prototype.render.call(this,t,e),this.sync();for(var n=this.node,i=n.options.length;i--;)n.options[i].defaultSelected=n.options[i].selected;this.rendered=!0},Jh.prototype.sync=function(){var e=this,t=this.node;if(t){var n=ht(t.options);if(this.selectedOptions)return n.forEach(function(t){0<=e.selectedOptions.indexOf(t)?t.selected=!0:t.selected=!1}),this.binding.setFromNode(t),void delete this.selectedOptions;var i,r=this.getAttribute("value"),o=this.getAttribute("multiple"),s=o&&D(r);void 0!==r?(n.forEach(function(t){var e=(t._ractive||t).value,e=o?s&&function(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}(r,e):r==e;e&&(i=!0),t.selected=e}),i||o||this.binding&&this.binding.forceUpdate()):this.binding&&this.binding.forceUpdate()}},Jh.prototype.update=function(){var t=this.dirty;qh.prototype.update.call(this),t&&this.sync()},Jh),Tu=(Hh=Ch,((Gh.prototype=Object.create(Hh&&Hh.prototype)).constructor=Gh).prototype.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&xt(function(){t.dirty=!1,t.node.value=t.fragment.toString()}),this.parentFragment.bubble())},Gh),Zh=($h=Ns,((Xh.prototype=Object.create($h&&$h.prototype)).constructor=Xh).prototype.bind=function(){},Xh.prototype.detach=function(){return k(this.node)},Xh.prototype.firstNode=function(){return this.node},Xh.prototype.render=function(t,e){var n;Sa||(this.rendered=!0,e?((n=e[0])&&3===n.nodeType?(e.shift(),n.nodeValue!==this.template&&(n.nodeValue=this.template)):(n=this.node=a.createTextNode(this.template),e[0]?t.insertBefore(n,e[0]):t.appendChild(n)),this.node=n):(this.node=a.createTextNode(this.template),t.appendChild(this.node)))},Xh.prototype.toString=function(t){return t?sr(this.template):this.template},Xh.prototype.unbind=function(){},Xh.prototype.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},Xh.prototype.update=function(){},Xh.prototype.valueOf=function(){return this.template},Xh);function Xh(t){$h.call(this,t),this.type=1}function Gh(t){var e=t.template;t.deferContent=!0,Hh.call(this,t),this.attributeByName.value||(e.f&&ph({template:e})?this.attributes.push(Ml({owner:this,template:{t:13,f:e.f,n:"value"},parentFragment:this.parentFragment})):this.fragment=new Ll({owner:this,cssIds:null,template:e.f}))}function Jh(t){qh.call(this,t),this.options=[]}function tl(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})}var el,nl,il=i?(Qh={},Yh=h("div").style,function(t){if(t=tl(t),!Qh[t])if(void 0!==Yh[t])Qh[t]=t;else for(var e=t.charAt(0).toUpperCase()+t.substring(1),n=v.length;n--;){var i=v[n];if(void 0!==Yh[i+e]){Qh[t]=i+e;break}}return Qh[t]}):null,rl="hidden";if(a){if(rl in a)nl="";else for(var ol=v.length;ol--;){var sl=v[ol];if((rl=sl+"Hidden")in a){nl=sl;break}}void 0!==nl?(a.addEventListener(nl+"visibilitychange",al),al()):("onfocusout"in a?(a.addEventListener("focusout",ul),a.addEventListener("focusin",hl)):(n.addEventListener("pagehide",ul),n.addEventListener("blur",ul),n.addEventListener("pageshow",hl),n.addEventListener("focus",hl)),el=!0)}function al(){el=!a[rl]}function ul(){el=!1}function hl(){el=!0}var ll,cl,pl,dl,fl,ml,gl,vl,yl,bl=new RegExp("^-(?:"+v.join("|")+")-"),wl=new RegExp("^(?:"+v.join("|")+")([A-Z])");function xl(t){return t?(t=wl.test(t)?"-"+t:t).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}):""}function El(t){this.owner=t.owner||t.parentFragment.owner||Zs(t.parentFragment),this.element=this.owner.attributeByName?this.owner:Zs(t.parentFragment),this.ractive=this.owner.ractive,this.template=t.template,this.parentFragment=t.parentFragment,this.options=t,this.onComplete=[]}var kl=i?(i=h("div").style,ml=function(t){return t},gl={},vl={},yl=void 0!==i.transition?(ll="transition",cl="transitionend",!0):void 0!==i.webkitTransition&&(ll="webkitTransition",cl="webkitTransitionEnd",!0),ll&&(pl=ll+"Duration",dl=ll+"Property",fl=ll+"TimingFunction"),function(d,f,m,g,r){setTimeout(function(){var a,u,e;function t(){clearTimeout(e)}function h(){a&&u&&(d.unregisterCompleteHandler(t),d.ractive.fire(d.name+":end",d.node,d.isIntro),r())}var l=(d.node.namespaceURI||"")+d.node.tagName,c=d.node.style,n={property:c[dl],timing:c[fl],duration:c[pl]};function p(t){t=g.indexOf(tl(t.propertyName.replace(bl,"")));-1!==t&&g.splice(t,1),g.length||(clearTimeout(e),i())}function i(){c[dl]=n.property,c[fl]=n.duration,c[pl]=n.timing,d.node.removeEventListener(cl,p,!1),u=!0,h()}c[dl]=g.map(il).map(xl).join(","),c[fl]=xl(m.easing||"linear"),c[pl]=m.duration/1e3+"s",d.node.addEventListener(cl,p,!1),e=setTimeout(function(){g=[],i()},m.duration+(m.delay||0)+50),d.registerCompleteHandler(t),setTimeout(function(){for(var t,e,n,i,r,o=g.length,s=[];o--;)e=g[o],n=l+e,yl&&!vl[n]&&(c[il(e)]=f[e],gl[n]||(t=d.getStyle(e),gl[n]=d.getStyle(e)!=f[e],vl[n]=!gl[n],vl[n]&&(c[il(e)]=t))),yl&&!vl[n]||(void 0===t&&(t=d.getStyle(e)),-1===(i=g.indexOf(e))?Q("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:d.node}):g.splice(i,1),n=/[^\d]*$/.exec(f[e])[0],i=J(parseFloat(t),parseFloat(f[e]))||function(){return f[e]},s.push({name:il(e),interpolator:i,suffix:n}));s.length?("string"==typeof m.easing?(r=d.ractive.easing[m.easing])||(Y(Z(m.easing,"easing")),r=ml):r="function"==typeof m.easing?m.easing:ml,new Ke({duration:m.duration,easing:r,step:function(t){for(var e=s.length;e--;){var n=s[e];d.node.style[n.name]=n.interpolator(t)+n.suffix}},complete:function(){a=!0,h()}})):a=!0,g.length||(d.node.removeEventListener(cl,p,!1),u=!0,h())},0)},m.delay||0)}):null,_l=n&&(n.getComputedStyle||null.getComputedStyle),Ol=dt.resolve(),Tl={t0:"intro-outro",t1:"intro",t2:"outro"};El.prototype.animateStyle=function(t,e,a){var u,h=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");return el?("string"==typeof t?(u={})[t]=e:(u=t,a=e),a||(Y('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),a=this),new dt(function(t){if(!a.duration)return h.setStyle(u),void t();for(var e=Object.keys(u),n=[],i=_l(h.node),r=e.length;r--;){var o=e[r],s=i[il(o)];(s="0px"===s?0:s)!=u[o]&&(n.push(o),h.node.style[il(o)]=s)}n.length?kl(h,u,a,n,t):t()})):(this.setStyle(t,e),Ol)},El.prototype.bind=function(){var r=this,t=this.options,e=t.template&&t.template.v;e&&("t0"!==e&&"t1"!==e||(this.element._introTransition=this),"t0"!==e&&"t2"!==e||(this.element._outroTransition=this),this.eventName=Tl[e]);var n=this.owner.ractive;if(t.name)this.name=t.name;else{if("string"!=typeof(i="string"==typeof(i=t.template.f).n?i.n:i)){var e=new Ll({owner:this.owner,template:i.n}).bind(),i=e.toString();if(e.unbind(),""===i)return}this.name=i}t.params?this.params=t.params:t.template.f.a&&!t.template.f.a.s?this.params=t.template.f.a:t.template.f.d&&(i=new Ll({owner:this.owner,template:t.template.f.d}).bind(),this.params=i.getArgsList(),i.unbind()),"function"==typeof this.name?(this._fn=this.name,this.name=this._fn.name):this._fn=X("transitions",n,this.name),this._fn||Y(Z(this.name,"transition"),{ractive:n}),t.template&&this.template.f.a&&this.template.f.a.s&&(this.resolvers=[],this.models=this.template.f.a.r.map(function(t,e){var n,i=Ze(r.parentFragment,t);return i?i.register(r):(n=r.parentFragment.resolve(t,function(t){r.models[e]=t,ut(r.resolvers,n),t.register(r)}),r.resolvers.push(n)),i}),this.argsFn=Mi(this.template.f.a.s,this.template.f.a.r.length))},El.prototype.destroyed=function(){},El.prototype.getStyle=function(t){var e=_l(this.node);if("string"==typeof t){var n=e[il(t)];return"0px"===n?0:n}if(!D(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var i={},r=t.length;r--;){var o=t[r],s=e[il(o)];"0px"===s&&(s=0),i[o]=s}return i},El.prototype.handleChange=function(){},El.prototype.processParams=function(t,e){return N({},e,t="number"==typeof t?{duration:t}:"string"==typeof t?"slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||{})},El.prototype.rebinding=function(t,e){var n=this.models.indexOf(e);~n&&(t=Ne(this.template.f.a.r[n],t,e))!==e&&(e.unregister(this),this.models.splice(n,1,t),t&&t.addShuffleRegister(this,"mark"))},El.prototype.registerCompleteHandler=function(t){rt(this.onComplete,t)},El.prototype.render=function(){},El.prototype.setStyle=function(t,e){if("string"==typeof t)this.node.style[il(t)]=e;else for(var n in t)t.hasOwnProperty(n)&&(this.node.style[il(n)]=t[n]);return this},El.prototype.start=function(){var e,t,n=this,i=this.node=this.element.node,r=i.getAttribute("style"),o=this.params;this.complete=function(t){e||(n.onComplete.forEach(function(t){return t()}),!t&&n.isIntro&&(t=i,r?t.setAttribute("style",r):(t.getAttribute("style"),t.removeAttribute("style"))),n._manager.remove(n),e=!0)},this._fn?(this.argsFn&&(t=this.models.map(function(t){if(t)return t.get()}),o=this.argsFn.apply(this.ractive,t)),(o=this._fn.apply(this.ractive,[this].concat(o)))&&o.then(this.complete)):this.complete()},El.prototype.toString=function(){return""},El.prototype.unbind=function(){var t;this.resolvers&&this.resolvers.forEach(ye),this.element.attributes.unbinding||("t0"!==(t=this.options&&this.options.template&&this.options.template.v)&&"t1"!==t||(this.element._introTransition=null),"t0"!==t&&"t2"!==t||(this.element._outroTransition=null))},El.prototype.unregisterCompleteHandler=function(t){ut(this.onComplete,t)},El.prototype.unrender=function(){},El.prototype.update=function(){};var Al,Cl,Sl={};try{h("table").innerHTML="foo"}catch(f){Al=!0,Cl={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}function jl(t){return Sl[t]||(Sl[t]=h(t))}var Pl,Nl,Li=(Nl=Li,((Fl.prototype=Object.create(Nl&&Nl.prototype)).constructor=Fl).prototype.detach=function(){var e=x();return this.nodes.forEach(function(t){return e.appendChild(t)}),e},Fl.prototype.find=function(t){for(var e=this.nodes.length,n=0;n<e;n+=1){var i=this.nodes[n];if(1===i.nodeType){if(o(i,t))return i;i=i.querySelector(t);if(i)return i}}return null},Fl.prototype.findAll=function(t,e){for(var n=this.nodes.length,i=0;i<n;i+=1){var r=this.nodes[i];if(1===r.nodeType){e.test(r)&&e.add(r);var o=r.querySelectorAll(t);if(o)for(var s=o.length,a=0;a<s;a+=1)e.add(o[a])}}},Fl.prototype.findComponent=function(){return null},Fl.prototype.firstNode=function(){return this.nodes[0]},Fl.prototype.render=function(t){var e=this.model?this.model.get():"";this.nodes=function(t,e,n){var i,r,o,s,a,u=[];if(null==t||""===t)return u;for(Al&&(r=Cl[e.tagName])?((i=jl("DIV")).innerHTML=r[0]+t+r[1],"SELECT"===(i=i.querySelector(".x")).tagName&&(o=i.options[i.selectedIndex])):e.namespaceURI===b?((i=jl("DIV")).innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):"TEXTAREA"===e.tagName?void 0!==(i=h("div")).textContent?i.textContent=t:i.innerHTML=t:((i=jl(e.tagName)).innerHTML=t,"SELECT"===i.tagName&&(o=i.options[i.selectedIndex]));s=i.firstChild;)u.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==o&&(u[a].selected=!1);return u}(e,this.parentFragment.findParentNode(),t),this.rendered=!0},Fl.prototype.toString=function(){var t=null!=(t=this.model&&this.model.get())?""+t:"";return Ea?nr(t):t},Fl.prototype.unrender=function(){this.nodes&&this.nodes.forEach(k),this.rendered=!1},Fl.prototype.update=function(){var t,e,n;this.rendered&&this.dirty?(this.dirty=!1,this.unrender(),t=x(),this.render(t),e=this.parentFragment.findParentNode(),n=this.parentFragment.findNextNode(this),e.insertBefore(t,n)):this.dirty=!1},Fl),Ns=(Pl=Ns,((Il.prototype=Object.create(Pl&&Pl.prototype)).constructor=Il).prototype.bind=function(){var t=this.name;(this.component.yielders[t]||(this.component.yielders[t]=[])).push(this);var e=this.container._inlinePartials[t||"content"];(e="string"==typeof e?Jo(e).t:e)||(Q('Could not find template for partial "'+t+'"',{ractive:this.ractive}),e=[]),this.fragment=new Ll({owner:this,ractive:this.container.parent,template:e}).bind()},Il.prototype.bubble=function(){this.dirty||(this.containerFragment.bubble(),this.dirty=!0)},Il.prototype.detach=function(){return this.fragment.detach()},Il.prototype.find=function(t){return this.fragment.find(t)},Il.prototype.findAll=function(t,e){this.fragment.findAll(t,e)},Il.prototype.findComponent=function(t){return this.fragment.findComponent(t)},Il.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},Il.prototype.findNextNode=function(){return this.containerFragment.findNextNode(this)},Il.prototype.firstNode=function(t){return this.fragment.firstNode(t)},Il.prototype.render=function(t,e){return this.fragment.render(t,e)},Il.prototype.setTemplate=function(t){t=this.parentFragment.ractive.partials[t];"string"==typeof t&&(t=Jo(t).t),this.partialTemplate=t||[]},Il.prototype.toString=function(t){return this.fragment.toString(t)},Il.prototype.unbind=function(){this.fragment.unbind(),ut(this.component.yielders[this.name],this)},Il.prototype.unrender=function(t){this.fragment.unrender(t)},Il.prototype.update=function(){this.dirty=!1,this.fragment.update()},Il);function Il(t){Pl.call(this,t),this.container=t.parentFragment.ractive,this.component=this.container.component,this.containerFragment=t.parentFragment,this.parentFragment=this.component.parentFragment,this.name=t.template.n||""}function Fl(t){Nl.call(this,t)}var Dl={};Dl[19]=Qs,Dl[18]=ku,Dl[2]=bs,Dl[8]=Vh,Dl[4]=We,Dl[3]=Li,Dl[16]=Ns,Dl[13]=ka,Dl[73]=_a,Dl[71]=gu,Dl[70]=pu,Dl[72]=El;var Rl={doctype:ku,form:Ce,input:Ch,option:Dh,select:ou,textarea:Tu};function Ml(t){if("string"==typeof t.template)return new Zh(t);if(7===t.template.t){var e=function t(e,n){var i,r=G("components",e,n);if(r&&!(i=r.components[n])._Parent){var o=i.bind(r);if(o.isOwner=r.components.hasOwnProperty(n),!(i=o()))return void Q('A function was specified for "%s" %s, but no %s was returned',n,"component","component",{ractive:e});(i="string"==typeof i?t(e,i):i)._fn=o,r.components[n]=i}return i}(t.parentFragment.ractive,t.template.e);if(e)return new bu(t,e);e=t.template.e.toLowerCase();return new(Rl[e]||vh)(t)}var n=13===t.template.t?((n=t.owner)&&(15===n.type||7===n.type)||(n=Zs(t.parentFragment)),15===(t.element=n).type?Sh:ka):Dl[t.template.t];if(!n)throw new Error("Unrecognised item type "+t.template.t);return new n(t)}function Bl(t,n,i,r){return void 0===r&&(r=0),t.map(function(t){if(1===t.type)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return Bl(t.items,n,i,r)}).join(""):Bl(t.fragment.items,n,i,r);var e=i+"-"+r++,t=t.model||t.newModel;return n[e]=t?t.wrapper?t.wrapperValue:t.get():void 0,"${"+e+"}"}).join("")}function Vl(t){t.unrender(!0)}var Ll=function(t){this.owner=t.owner,this.isRoot=!t.owner.parentFragment,this.parent=this.isRoot?null:this.owner.parentFragment,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null,this.context=null,this.rendered=!1,this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.resolvers=[],this.dirty=!1,this.dirtyArgs=this.dirtyValue=!0,this.template=t.template||[],this.createItems()};Ll.prototype.bind=function(t){return this.context=t,this.items.forEach(he),this.bound=!0,this.dirty&&this.update(),this},Ll.prototype.bubble=function(){var t;this.dirtyArgs=this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&(t=this,rt(Et.fragments,t)):this.owner.bubble())},Ll.prototype.createItems=function(){var t=this.template.length;this.items=[];for(var e=0;e<t;e++)this.items[e]=Ml({parentFragment:this,template:this.template[e],index:e})},Ll.prototype.destroyed=function(){this.items.forEach(function(t){return t.destroyed()})},Ll.prototype.detach=function(){var e=x();return this.items.forEach(function(t){return e.appendChild(t.detach())}),e},Ll.prototype.find=function(t){for(var e=this.items.length,n=0;n<e;n+=1){var i=this.items[n].find(t);if(i)return i}},Ll.prototype.findAll=function(t,e){if(this.items)for(var n=this.items.length,i=0;i<n;i+=1){var r=this.items[i];r.findAll&&r.findAll(t,e)}return e},Ll.prototype.findComponent=function(t){for(var e=this.items.length,n=0;n<e;n+=1){var i=this.items[n].findComponent(t);if(i)return i}},Ll.prototype.findAllComponents=function(t,e){if(this.items)for(var n=this.items.length,i=0;i<n;i+=1){var r=this.items[i];r.findAllComponents&&r.findAllComponents(t,e)}return e},Ll.prototype.findContext=function(){for(var t=this;t&&!t.context;)t=t.parent;return t?t.context:this.ractive.viewmodel},Ll.prototype.findNextNode=function(t){if(t)for(var e=t.index+1;e<this.items.length;e++)if(this.items[e]){var n=this.items[e].firstNode(!0);if(n)return n}return this.isRoot?this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):null:this.parent?this.owner.findNextNode(this):void 0},Ll.prototype.findParentNode=function(){var t=this;do{if(7===t.owner.type)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el}while(t=16===t.owner.type?t.owner.containerFragment:t.componentParent||t.parent);throw new Error("Could not find parent node")},Ll.prototype.findRepeatingFragment=function(){for(var t=this;(t.parent||t.componentParent)&&!t.isIteration;)t=t.parent||t.componentParent;return t},Ll.prototype.firstNode=function(t){for(var e,n=0;n<this.items.length;n++)if(e=this.items[n].firstNode(!0))return e;return t?null:this.parent.findNextNode(this.owner)},Ll.prototype.getArgsList=function(){var t;return this.dirtyArgs&&(t=qr("["+Bl(this.items,t={},this.ractive._guid)+"]",t),this.argsList=t?t.value:[this.toString()],this.dirtyArgs=!1),this.argsList},Ll.prototype.rebinding=function(t){this.context=t},Ll.prototype.render=function(e,n){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0,this.items.forEach(function(t){return t.render(e,n)})},Ll.prototype.resetTemplate=function(t){var e=this.bound,n=this.rendered;e&&(n&&this.unrender(!0),this.unbind()),this.template=t,this.createItems(),e&&(this.bind(this.context),n)&&(t=this.findParentNode(),(e=this.findNextNode())?(n=x(),this.render(n),t.insertBefore(n,e)):this.render(t))},Ll.prototype.resolve=function(t,e){if(!this.context&&this.parent.resolve)return this.parent.resolve(t,e);e=new qn(this,t,e);return this.resolvers.push(e),e},Ll.prototype.shuffled=function(){this.items.forEach(function(t){return t.shuffled()})},Ll.prototype.toHtml=function(){return this.toString()},Ll.prototype.toString=function(t){return this.items.map(t?ke:Ee).join("")},Ll.prototype.unbind=function(){return this.items.forEach(ye),this.resolvers.forEach(ye),this.bound=!1,this},Ll.prototype.unrender=function(t){this.items.forEach(t?Vl:be),this.rendered=!1},Ll.prototype.update=function(){this.dirty&&(this.updating?this.isRoot&&function(t){if(Et){for(var e=Et;e.previousBatch;)e=e.previousBatch;rt(e.fragments,t)}}(this):(this.dirty=!1,this.updating=!0,this.items.forEach(xe),this.updating=!1))},Ll.prototype.valueOf=function(){return 1===this.items.length?this.items[0].valueOf():(this.dirtyValue&&(t=qr(Bl(this.items,t={},this.ractive._guid),t),this.value=t?t.value:this.toString(),this.dirtyValue=!1),this.value);var t};var Ch=tn("reverse").path,Dh=tn("shift").path,ou=tn("sort").path,Tu=tn("splice").path,Kl=new tt("teardown");function Ul(){var t=[this.cssId].concat(this.findAllComponents().map(function(t){return t.cssId}));return hi(Object.keys(t.reduce(function(t,e){return t[e]=!0,t},{})))}function zl(){return this.fragment.toString(!0)}var Wl=new tt("unrender"),Tu={add:function(t,e){return Kt(this,t,void 0===e?1:+e)},animate:function(e,t,n){if("object"!=typeof e)return Wt(this,this.viewmodel.joinAll(It(e)),t,n);n=Object.keys(e);throw new Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+n.map(function(t){return"'"+t+"': "+e[t]}).join("\n  ")+"\n}, {...}), do\n\n"+n.map(function(t){return"ractive.animate('"+t+"', "+e[t]+", {...});"}).join("\n")+"\n")},detach:function(){return this.isDetached||(this.el&&ut(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,$t.fire(this)),this.el},find:function(t){if(!this.el)throw new Error("Cannot call ractive.find('"+t+"') unless instance is rendered to the DOM");return this.fragment.find(t)},findAll:function(t,e){if(!this.el)throw new Error("Cannot call ractive.findAll('"+t+"', ...) unless instance is rendered to the DOM");e=e||{};var n=this._liveQueries,i=n[t];return i?e&&e.live?i:i.slice():((i=new Zt(this,t,!!e.live,!1)).live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i.init(),i.result)},findAllComponents:function(t,e){e=e||{};var n=this._liveComponentQueries,i=n[t];return i?e&&e.live?i:i.slice():((i=new Zt(this,t,!!e.live,!0)).live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i.init(),i.result)},findComponent:function(t){return this.fragment.findComponent(t)},findContainer:function(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null},findParent:function(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null},fire:function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return Jt(this,t,{args:e})},get:function(t,e){if("string"!=typeof t)return this.viewmodel.get(!0,t);var n,i=It(t),t=i[0];return this.viewmodel.has(t)||this.component&&!this.isolated&&(n=Ze(this.component.parentFragment,t))&&this.viewmodel.map(t,n),(n=this.viewmodel.joinAll(i)).get(!0,e)},getNodeInfo:function(t){return Hn(t="string"==typeof t?this.find(t):t)},insert:function(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=E(t),e=E(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),((this.el=t).__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,function e(t){Qn.fire(t),t.findAllComponents("*").forEach(function(t){e(t.instance)})}(this)},link:function(t,e){if(e===t||0===(t+".").indexOf(e+".")||0===(e+".").indexOf(t+"."))throw new Error("A keypath cannot be linked to itself.");var n,i=_t(),r=It(t);return!this.viewmodel.has(r[0])&&this.component&&(n=(n=Ze(this.component.parentFragment,r[0])).joinAll(r.slice(1))),this.viewmodel.joinAll(It(e)).link(n||this.viewmodel.joinAll(r),t),Ot(),i},merge:function(t,e,n){return nn(this,this.viewmodel.joinAll(It(t)),e,n)},observe:function(t,e,n){var i=this;if(this.torndown)return{cancel:function(){}};var r,o=[];return B(t)?(r=t,n=e||{},Object.keys(r).forEach(function(t){var e=r[t],t=t.split(" ");(t=1<t.length?t.filter(function(t){return t}):t).forEach(function(t){o.push(Yn(i,t,e,n))})})):(t=1<(t="function"==typeof t?(n=e,e=t,[""]):t.split(" ")).length?t.filter(function(t){return t}):t).forEach(function(t){o.push(Yn(i,t,e,n||{}))}),this._observers.push.apply(this._observers,o),{cancel:function(){o.forEach(function(t){ut(i._observers,t),t.cancel()})}}},observeList:function(t,e,n){if("string"!=typeof t)throw new Error("ractive.observeList() must be passed a string as its first argument");var t=this.viewmodel.joinAll(It(t)),i=new Jn(this,t,e,n||{});return this._observers.push(i),{cancel:function(){i.cancel()}}},observeOnce:function(t,e,n){return B(t)||"function"==typeof t?(n=N(e||{},ti),this.observe(t,n)):(n=N(n||{},ti),this.observe(t,e,n))},off:function(t,i){var r=this;if(t)t.split(" ").map(ei).filter(ni).forEach(function(t){var e=r._subs[t];if(e)if(i)for(var n=e.length;n--;)e[n].callback===i&&(e[n].off=!0,e.splice(n,1));else r._subs[t]=[]});else for(t in this._subs)delete this._subs[t];return this},on:function(t,e){var n=this;if("object"==typeof t){var i,r=[];for(i in t)t.hasOwnProperty(i)&&r.push(this.on(i,t[i]));return{cancel:function(){r.forEach(function(t){return t.cancel()})}}}var o=t.split(" ").map(ei).filter(ni);return o.forEach(function(t){(n._subs[t]||(n._subs[t]=[])).push({callback:e})}),{cancel:function(){return o.forEach(function(t){return n.off(t,e)})}}},once:function(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n},pop:ii,push:ri,render:function(t,e){if(this.torndown)return Q("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();var n;t=E(t)||this.el,!this.append&&t&&((n=t.__ractive_instances__)&&n.forEach(ve),this.enhance||(t.innerHTML=""));var i=this.enhance?ht(t.childNodes):null,e=pi(this,t,e,i);if(i)for(;i.length;)t.removeChild(i.pop());return e},reset:function(t){if("object"!=typeof(t=t||{}))throw new Error("The reset method takes either no arguments, or an object containing new data");t=Ai.init(this.constructor,this,{data:t});var e=_t(this,!0),n=this.viewmodel.wrapper;n&&n.reset&&!1!==n.reset(t)||this.viewmodel.set(t);for(var i,r,o=(r=this,Es.filter(function(t){return t.reset&&t.reset(r)}).map(function(t){return t.name})),s=o.length;s--;)if(-1<Ts.indexOf(o[s])){i=!0;break}return i&&(js.fire(this),this.fragment.resetTemplate(this.template),Ss.fire(this),As.fire(this)),Ot(),Cs.fire(this,t),e},resetPartial:function(t,e){var n=[];!function e(t,n,i,r){t.forEach(function(t){if(8===t.type&&(t.refName===n||t.name===n))return t.inAttribute=i,void r.push(t);if(t.fragment)e(t.fragment.iterations||t.fragment.items,n,i,r);else if(D(t.items))e(t.items,n,i,r);else if(15===t.type&&t.instance){if(t.instance.partials[n])return;e(t.instance.fragment.items,n,i,r)}7===t.type&&D(t.attributes)&&e(t.attributes,n,!0,r)})}(this.fragment.items,t,!1,n);var i=_t(this,!0);return this.partials[t]=e,n.forEach(Ps),Ot(),i},resetTemplate:function(t){us.init(null,this,{template:t});var e=this.transitionsEnabled;this.transitionsEnabled=!1;var n=this.component;n&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind().unrender(!0),this.fragment=new Ll({template:this.template,root:this,owner:this});t=x();this.fragment.bind(this.viewmodel).render(t),n?this.fragment.findParentNode().insertBefore(t,n.findNextNode()):this.el.insertBefore(t,this.anchor),this.transitionsEnabled=e},reverse:Ch,set:function(t,e){return Mt(this,Lt(this,t,e))},shift:Dh,sort:ou,splice:Tu,subtract:function(t,e){return Kt(this,t,void 0===e?-1:-e)},teardown:function(){if(this.torndown)return Q("ractive.teardown() was called on a Ractive instance that was already torn down"),dt.resolve();this.torndown=!0,this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(le),this.fragment.rendered&&this.el.__ractive_instances__&&ut(this.el.__ractive_instances__,this),this.shouldDestroy=!0;var t=this.fragment.rendered?this.unrender():dt.resolve();return Kl.fire(this),t},toggle:function(t){if("string"!=typeof t)throw new TypeError("Bad arguments");return Mt(this,Vt(this,t).map(function(t){return[t,!t.get()]}))},toCSS:Ul,toCss:Ul,toHTML:zl,toHtml:zl,toText:function(){return this.fragment.toString(!1)},transition:function(t,e,n){e instanceof HTMLElement||B(e)&&(n=e),(e=e||this.event.node)&&e._ractive||H("No node was supplied for transition "+t);var e=e._ractive.proxy,i=new El({owner:e,parentFragment:e.parentFragment,name:t,params:n=n||{}});i.bind();n=_t(this,!0);return wt(i),Ot(),n.then(function(){return i.unbind()}),n},unlink:function(t){var e=_t();return this.viewmodel.joinAll(It(t),{lastLink:!1}).unlink(),Ot(),e},unrender:function(){if(!this.fragment.rendered)return Q("ractive.unrender() was called on a Ractive instance that was not rendered"),dt.resolve();var t=_t(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;return this.fragment.unrender(e),ut(this.el.__ractive_instances__,this),Wl.fire(this),Ot(),t},unshift:tn("unshift").path,update:function(t){return on(this,(t=t&&It(t))?this.viewmodel.joinAll(t):this.viewmodel)},updateModel:function(t,e){var n=_t(this,!0);return t?this.viewmodel.joinAll(It(t)).updateFromBindings(!1!==e):this.viewmodel.updateFromBindings(!0),Ot(),n}};function $l(o,s){ds.forEach(function(t){var e,n,i,r;e=t.useDefaults?o.prototype:o,n=s,i=t.name,(t=Object.keys(e[i])).length&&((r=n[i])||(r=n[i]={}),t.filter(function(t){return!(t in r)}).forEach(function(t){return r[t]=e[i][t]}))})}function Hl(s,a){Object.keys(s.prototype).forEach(function(t){var e,n,i,r,o;"computed"!==t&&(e=s.prototype[t],t in a?"function"==typeof a[t]&&"function"==typeof e&&a[t]._method&&((n=e._method)&&(e=e._method),i=a[t]._method,r=e,o=o||"function"==typeof r&&/_super/.test(i)?function(){var t,e="_super"in this,n=this._super;return this._super=r,t=i.apply(this,arguments),e&&(this._super=n),t}:i,n&&(o._method=o),a[t]=o):a[t]=e._method||e)})}function ql(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.length?t.reduce(Ql,this):Ql(this)}function Ql(t,e){var n,i;return(e=void 0===e?{}:e).prototype instanceof Yl&&(e=function(t){for(var e={};t;)$l(t,e),Hl(t,e),t=t._Parent!==Yl&&t._Parent;return e}(e)),n=function(t){if(!(this instanceof n))return new n(t);nu(this,t||{}),uu(this,t||{},{})},(i=T(t.prototype)).constructor=n,C(n,{defaults:{value:i},extend:{value:ql,writable:!0,configurable:!0},_Parent:{value:t}}),ks(t,i,e),Ai.extend(t,i,e),e.computed&&(i.computed=N(T(t.prototype.computed),e.computed)),n.prototype=i,n}if("function"!=typeof Date.now||"function"!=typeof String.prototype.trim||"function"!=typeof Object.keys||"function"!=typeof Array.prototype.indexOf||"function"!=typeof Array.prototype.forEach||"function"!=typeof Array.prototype.map||"function"!=typeof Array.prototype.filter||n&&"function"!=typeof n.addEventListener)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");function Yl(t){if(!(this instanceof Yl))return new Yl(t);nu(this,t||{}),uu(this,t||{},{})}return N(Yl.prototype,Tu,t),(Yl.prototype.constructor=Yl).defaults=Yl.prototype,C(Yl,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:ql},escapeKey:{value:Pt},getNodeInfo:{value:Hn},joinKeys:{value:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map(Pt).join(".")}},parse:{value:Jo},splitKeypath:{value:function(t){return It(t).map(Ft)}},unescapeKey:{value:Ft},getCSS:{value:hi},Promise:{value:dt},enhance:{writable:!0,value:!1},svg:{value:g},magic:{value:f},VERSION:{value:"0.8.14"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:e},events:{writable:!0,value:{}},interpolators:{writable:!0,value:nt},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}}),Yl}),function(t,e){"function"==typeof define&&define.amd?define("ractive-touch/index",["ractive","hammerjs"],e):"undefined"!=typeof module?e(require("ractive"),require("hammerjs")):e(t.Ractive,t.Hammer)}(this,function(t,e){var u,n,i,r,o,h={tap:{recognizerClass:e.Tap,options:{time:500},events:["tap"]},doubletap:{recognizerClass:e.Tap,options:{taps:2,event:"doubletap"},recognizeWith:["tap"],events:["doubletap"]},swipe:{recognizerClass:e.Swipe,options:{},events:["swipe","swipeleft","swiperight","swipeup","swipedown"]},pan:{recognizerClass:e.Pan,options:{direction:e.DIRECTION_HORIZONTAL},recognizeWith:["swipe"],events:["pan","panstart","panmove","panend","pancancel","panleft","panright","panup","pandown"]},press:{recognizerClass:e.Press,options:{},events:["press"]},rotate:{recognizerClass:e.Rotate,options:{},events:["rotate","rotatestart","rotatemove","rotateend","rotatecancel"]},pinch:{recognizerClass:e.Pinch,options:{},recognizeWith:["rotate"],events:["pinch","pinchstart","pinchmove","pinchend","pinchcancel","pinchin","pinchout"]}};for(n in h)if(h.hasOwnProperty(n))for(var s=h[n].events,a=0;a<s.length;a++)i=s[a],r=n,o=h[n],t.events[i]=function(r,a,o){return function(s,e){var t,n,i=l(s);return null===i.get(a)&&(t=new o.recognizerClass(o.options),(n=function(){for(var t,e=s.attributes,n=new RegExp("^(?:data-)?"+a+"-(.*)$"),i=e.length-1;0<=i;i--){var r=e[i],o=r.name.match(n);o&&((t=t||{})[o[1]]=(r=r.value,o=o[1],r.match&&r.match(/^-?\d+(?:\.\d+)?$/)?+r:u[o]&&u[o][r]||u.all[r]||r))}return t}())&&t.set(n),i.add(t),function(t){for(var e=0;e<t.recognizers.length;e++){var n=t.recognizers[e],i=n.options.event;if(h[i].hasOwnProperty("recognizeWith"))for(var r=h[i].recognizeWith,o=0;o<r.length;o++)t.get(r[o])&&n.recognizeWith(r[o])}}(i)),i.on(r,function(t){e({node:s,original:t})}),{teardown:function(){l(s).destroy(),delete s._hammer}}}}(i,r,o);function l(t){return t._hammer||(t._hammer=new e.Manager(t,{recognizers:[]})),t._hammer}return u={all:{true:!0,false:!1,undefined:void 0,null:null},direction:{none:e.DIRECTION_NONE,all:e.DIRECTION_ALL,up:e.DIRECTION_UP,down:e.DIRECTION_DOWN,left:e.DIRECTION_LEFT,right:e.DIRECTION_RIGHT,horizontal:e.DIRECTION_HORIZONTAL,vertical:e.DIRECTION_VERTICAL}},{defaults:h}}),define("blue-view-ractive/lib/ractiveMDSExtension",[],function(){"use strict";var i={"mds-text-input":!0,"mds-select":!0,"mds-datepicker":!0};return function(t,e){var n=t.attributeByName,t=t.name;return i.hasOwnProperty(t)&&e.isBindable(n.value)?e.GenericBinding:"mds-radio-group"===t&&e.isBindable(n.checked)?e.RadioBinding:"mds-checkbox"===t&&e.isBindable(n.checked)?e.CheckboxBinding:null}}),function(t){function e(t,e,n){return i.yubl(e((n||i.yufull)(t)))}(function(){return this}().xssFilters=t)._getPrivFilters=function(){function i(t){return 2===(t=t.split(k,2)).length&&t[0]?t[0]:null}function s(t,e){return void 0===t?"undefined":null===t?"null":e.apply(t.toString(),[].splice.call(arguments,2))}function r(t,r,e,n){r=r||g,e=e||m;var i,o=[].splice.call(arguments,4);return s(t,function(){return i=this.replace(c,"").replace(e,function(t,e,n,i){return e?128===(e=Number(e[0]<="9"?e:"0"+e))?"":130===e?"":131===e?"":132===e?"":133===e?"":134===e?"":135===e?"":136===e?"":137===e?"":138===e?"":139===e?"":140===e?"":142===e?"":145===e?"":146===e?"":147===e?"":148===e?"":149===e?"":150===e?"":151===e?"":152===e?"":153===e?"":154===e?"":155===e?"":156===e?"":158===e?"":159===e?"":55296<=e&&e<=57343||13===e?"":a.frCoPt(e):r[n||i]||t}),n?n.apply(i,o):i})}function o(t){return"\\"+t.charCodeAt(0).toString(16).toLowerCase()+" "}function e(t,e){return r(t,null,null,function(){return this.replace(e,o)})}function n(t,n){return r(t,null,null,function(){var t=i(e=a.yufull(this)),e=t&&E[t.toLowerCase()]?"##"+e:e;return n?e.replace(n,o):e})}var a,u=/</g,h=/"/g,l=/'/g,c=/\x00/g,p=/(?:^(?:["'`]|\x00+$|$)|[\x09-\x0D >])/g,d=/[&<>"'`]/g,f=/(?:\x00|^-*!?>|--!?>|--?!?$|\]>|\]$)/g,m=/&(?:#([xX][0-9A-Fa-f]+|\d+);?|(Tab|NewLine|colon|semi|lpar|rpar|apos|sol|comma|excl|ast|midast|ensp|emsp|thinsp);|(nbsp|amp|AMP|lt|LT|gt|GT|quot|QUOT);?)/g,g={Tab:"\t",NewLine:"\n",colon:":",semi:";",lpar:"(",rpar:")",apos:"'",sol:"/",comma:",",excl:"!",ast:"*",midast:"*",ensp:"",emsp:"",thinsp:"",nbsp:"",amp:"&",lt:"<",gt:">",quot:'"',QUOT:'"'},v=/[^%#+\-\w\.]/g,y=/[\x01-\x1F\x7F\\"]/g,b=/[\x01-\x1F\x7F\\']/g,w=/['\(\)]/g,x=/\/\/%5[Bb]([A-Fa-f0-9:]+)%5[Dd]/,E={javascript:1,data:1,vbscript:1,mhtml:1},k=/(?::|&#[xX]0*3[aA];?|&#0*58;?|&colon;)/,_=/(?:^[\x00-\x20]+|[\t\n\r\x00]+)/g,O={Tab:"\t",NewLine:"\n"},T=String.prototype.replace,A=String.fromCodePoint||function(t){return 0===arguments.length?"":t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),t%1024+56320))};return a={frCoPt:function(t){return!isFinite(t)||t<=0||1114111<t||1<=t&&t<=8||14<=t&&t<=31||127<=t&&t<=159||64976<=t&&t<=65007||11===t||65535==(65535&t)||65534==(65535&t)?"":A(t)},d:r,yup:function(t){return(t=i(t.replace(c,"")))?r(t,O,null,function(){return this.replace(_,"").toLowerCase()}):null},y:function(t){return s(t,T,d,function(t){return"&"===t?"&amp;":"<"===t?"&lt;":">"===t?"&gt;":'"'===t?"&quot;":"'"===t?"&#39;":"&#96;"})},yd:function(t){return s(t,T,u,"&lt;")},yc:function(t){return s(t,T,f,function(t){return"\0"===t?"":"--!"===t||"--"===t||"-"===t||"]"===t?t+" ":t.slice(0,-1)+" >"})},yavd:function(t){return s(t,T,h,"&quot;")},yavs:function(t){return s(t,T,l,"&#39;")},yavu:function(t){return s(t,T,p,function(t){return"\t"===t?"&#9;":"\n"===t?"&#10;":"\v"===t?"&#11;":"\f"===t?"&#12;":"\r"===t?"&#13;":" "===t?"&#32;":">"===t?"&gt;":'"'===t?"&quot;":"'"===t?"&#39;":"`"===t?"&#96;":""})},yu:encodeURI,yuc:encodeURIComponent,yubl:function(t){return E[a.yup(t)]?"x-"+t:t},yufull:function(t){return a.yu(t).replace(x,function(t,e){return"//["+e+"]"})},yceu:function(t){return e(t,v)},yced:function(t){return e(t,y)},yces:function(t){return e(t,b)},yceuu:function(t){return n(t,w)},yceud:function(t){return n(t)},yceus:function(t){return n(t,l)}}};var i=t._privFilters=t._getPrivFilters();t.inHTMLData=i.yd,t.inHTMLComment=i.yc,t.inSingleQuotedAttr=i.yavs,t.inDoubleQuotedAttr=i.yavd,t.inUnQuotedAttr=i.yavu,t.uriInSingleQuotedAttr=function(t){return e(t,i.yavs)},t.uriInDoubleQuotedAttr=function(t){return e(t,i.yavd)},t.uriInUnQuotedAttr=function(t){return e(t,i.yavu)},t.uriInHTMLData=i.yufull,t.uriInHTMLComment=function(t){return i.yc(i.yufull(t))},t.uriPathInSingleQuotedAttr=function(t){return e(t,i.yavs,i.yu)},t.uriPathInDoubleQuotedAttr=function(t){return e(t,i.yavd,i.yu)},t.uriPathInUnQuotedAttr=function(t){return e(t,i.yavu,i.yu)},t.uriPathInHTMLData=i.yu,t.uriPathInHTMLComment=function(t){return i.yc(i.yu(t))},t.uriQueryInSingleQuotedAttr=t.uriPathInSingleQuotedAttr,t.uriQueryInDoubleQuotedAttr=t.uriPathInDoubleQuotedAttr,t.uriQueryInUnQuotedAttr=t.uriPathInUnQuotedAttr,t.uriQueryInHTMLData=t.uriPathInHTMLData,t.uriQueryInHTMLComment=t.uriPathInHTMLComment,t.uriComponentInSingleQuotedAttr=function(t){return i.yavs(i.yuc(t))},t.uriComponentInDoubleQuotedAttr=function(t){return i.yavd(i.yuc(t))},t.uriComponentInUnQuotedAttr=function(t){return i.yavu(i.yuc(t))},t.uriComponentInHTMLData=i.yuc,t.uriComponentInHTMLComment=function(t){return i.yc(i.yuc(t))},t.uriFragmentInSingleQuotedAttr=function(t){return i.yubl(i.yavs(i.yuc(t)))},t.uriFragmentInDoubleQuotedAttr=function(t){return i.yubl(i.yavd(i.yuc(t)))},t.uriFragmentInUnQuotedAttr=function(t){return i.yubl(i.yavu(i.yuc(t)))},t.uriFragmentInHTMLData=t.uriComponentInHTMLData,t.uriFragmentInHTMLComment=t.uriComponentInHTMLComment}({}),define("xss-filters",function(t){return function(){return t.xssFilters}}(this)),define("blue-view-ractive/template/transition/fade",["require","blue/log"],function(t){"use strict";var i=new(t("blue/log"))("[fade]"),r={delay:0,duration:300,easing:"linear"};return function(t,e){var n=0;e=t.processParams(e,r),t.isIntro&&(n=t.getStyle("opacity"),t.setStyle("opacity",0)),t.animateStyle("opacity",n,e).then(function(){t.complete()}).catch(function(t){throw i.warn("transition completion error!",t),t})}}),define("blue-view-ractive/template/transition/slide",["require","blue/log"],function(t){"use strict";var i=new(t("blue/log"))("[slide]"),r={duration:300,easing:"easeInOut"},o=["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","marginTop","marginBottom"],s={height:0,borderTopWidth:0,borderBottomWidth:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0};return function(t,e){var n;e=t.processParams(e,r),t.isIntro?(n=t.getStyle(o),t.setStyle(s)):(t.setStyle(t.getStyle(o)),n=s),t.setStyle("overflowY","hidden"),t.animateStyle(n,e).then(t.complete).catch(function(t){throw i.warn("Fade transition failed to complete",t),t})}}),define("blue-view-ractive/ractive",["require","blue/is","ractive","blue-view-ractive/lib/ractiveMDSExtension","xss-filters","blue/log","blue-view-ractive/template/transition/fade","blue-view-ractive/template/transition/slide"],function(t){"use strict";var n=t("blue/is"),i=t("ractive"),e=t("blue-view-ractive/lib/ractiveMDSExtension"),r=t("xss-filters"),o=/(src|href|link)\s*=\s*(['"])\s*(\w+script:)/gi,s=t("blue/log")("[Ractive]");return i.DEBUG=!1,i.defaults.data.sanitizer={sanitizeHTML:function(t){var e=t+"";if(!t||!n.string(t))return t;try{e=new i({template:i.parse(t,{sanitize:!0})}).toHtml()}catch(e){s.error("Unable to complete sanitizeHTML operation for the string: "+t,e)}return e.replace(o,"$1=$2x-$3")},htmlData:r.inHTMLData,attrDoubleQuoted:r.inDoubleQuotedAttr,attrSingleQuoted:r.inSingleQuotedAttr,attrUnQuoted:r.inUnQuotedAttr,hrefHtmlData:r.uriInHTMLData,hrefDoubleQuoted:r.uriInDoubleQuotedAttr,hrefSingleQuoted:r.uriInSingleQuotedAttr,hrefUnQuoted:r.uriInUnQuotedAttr},i.transitions={fade:t("blue-view-ractive/template/transition/fade"),slide:t("blue-view-ractive/template/transition/slide")},i.selectBindingMDS=e,e=new i({template:"<div></div>"}).fragment.items[0],(e=Object.getPrototypeOf(e)).blueDestroyed=e.destroyed,e.destroyed=function(){var t=this.node;try{t.destroyCallback&&t.destroyCallback()}catch(t){throw s.error("Exception thrown when calling destroyCallback prior to removing node from DOM",t),t}return this.blueDestroyed()},i}),define("blue-view-ractive/touch",["blue-view-ractive/ractive","hammerjs","ractive-touch/index"],function(){}),define("blue-view-ractive/template/decorator",["require","blue/$","blue/declare"],function(t){t("blue/$");t=t("blue/declare")(function(){return{constructor:function(){},destroy:function(){}}});return t.create=function(t,e){return new e(t.context)},t}),define("blue-view-ractive/bridge",["require","blue/$","blue/compose","blue/declare","blue/event","blue/event/channel","blue/event/channel/domEvents","blue/log","blue/is","blue/util","blue/util","blue/util","blue/util","blue/as/contextual","blue-view/nodeDictionary","blue/perf","path-toolkit"],function(t){"use strict";function p(t){if(!t||"@"!==t[0])return t;var n,i,e=(/\{[^@}]+}/.exec(t)||["{}"])[0],t=(/\.([^}]+)$/.exec(t)||[])[1],r=function(t){try{return JSON.parse(t)}catch(t){return{}}}(e.replace(/[^\s,:{}]+/g,function(t){return'"'===t[0]?"":'"'+t+'"'}));return(t?r[t]:(i=0,Object.keys(r).forEach(function(t){var e=r[t].split(".").length;i<e&&(i=e,n=t)}),n&&r[n].split(".").splice(0,i-1).join(".")))||""}function d(o,s,t){var a,u=[];return t.forEach(function(t){var e=t+"",n=e.match(/^(((\$)?(window|document|body|element|event))\.).+$/)||[],i=n[2]||"",r=n[3]||"",t=null;i&&(e=e.replace(i+".",""),r&&e&&(r=(n=e).match(/^([^.]+)(\..+)?$/)[1],e=isNaN(parseInt(r,10))&&")"!==r[r.length-1]?n.replace(r,r+"()"):n)),(e=w.getTokens(e))&&(a=function(t){var e=o.domEvent||void 0,n={window:window,document:document,body:document.body,$window:h(window),$document:h(window),$body:h(document.body)};if(t){if(n[t])return n[t];if(e)switch(t){case"element":return e.target;case"$element":return e.target?h(e.target):void 0;case"event":return e;case"$event":return}}}(i)||s,"function"==typeof(t=w.get(a,e))?u.push(t()):void 0===t?u.push(null):u.push(t))}),u}var h=t("blue/$"),n=t("blue/compose"),i=t("blue/declare"),f=t("blue/event"),r=t("blue/event/channel"),m=t("blue/event/channel/domEvents"),o=t("blue/log"),g=t("blue/is"),s=t("blue/util").object.deepEquals,e=t("blue/util").object,v=t("blue/util").object.merge,a=t("blue/util").array.flatten,u=t("blue/as/contextual"),l=t("blue-view/nodeDictionary"),c=t("blue/perf"),t=t("path-toolkit"),y=o("[blue:view:ractive]"),b=new t({simple:!0}),w=new t({simple:!1}),x={UPSTREAM:1,BOTH:1},E={DOWNSTREAM:1,BOTH:1},k=0,_=function(t,e){var n=this;n.defineContext(e,{logger:o("[bridge:"+t+"]")}),n.name=t,n.id="<#"+n.name+"Bridge:"+ ++k+">",n.listeners={},n.queue=[],n.output=new r({eventTarget:n}),n.downstreamOutput=new r({eventTarget:n}),n.__enabled=!1,n.eventUnlisteners=[];e=n.output.asEventStream(),t=e.onValue(function(t){n.__enabled&&!n.queueOutput||n.queue.push(t)});e.onEnd(t),Object.defineProperty(n,"enabled",{get:function(){return n.__enabled},enumerable:!0}),c.count.call({id:n.id,ref:n},"blue/reactiveBridge","create",n.name)};return _.prototype=Object.create(null),(_.prototype.constructor=_).prototype.define=function(t,e){n(this,e=e||{}),this.spec=v({bindings:{v:{}},triggers:{}},t)},_.prototype.createBinding=function(t){var r,o=this,e=o.spec.bindings[t];if(!g.plainObject(e))throw new TypeError('The mapping for target "'+t+'" is not valid');e.direction=(e.direction||"DOWNSTREAM").toUpperCase(),e.field=r=e.field||t,x[e.direction]&&(o.eventUnlisteners.push(o.view.rtemplate.observe(r,function(t,e,n){o._fromComp||t===e||o.output.emit("binding",{value:p(n),data:t})}).cancel),(g.undefined(o.view.model[r])||null===o.view.model[r]||g.array(o.view.model[r])||g.plainObject(o.view.model[r]))&&(o.eventUnlisteners.push(o.view.rtemplate.observe(r+".*",function(t,e,n){var i=o.view.model[r];o._fromComp||!g.array(i)&&!g.plainObject(i)||t===e||o.output.emit("binding",{value:p(n),data:t})}).cancel),o.eventUnlisteners.push(o.view.rtemplate.observe(r+".*.*",function(t,e,n){var i=o.view.model[r];!o._fromComp&&g.array(i)&&g.plainObject(i[0])&&t!==e&&o.output.emit("binding",{value:p(n),data:t})}).cancel)))},_.prototype.createTrigger=function(e){function a(t,e,n,i,r,o){var s;return!l&&!c&&(h.suspend&&(l=!0,setTimeout(function(){l=!1},h.suspend)),"number"==typeof h.throttle&&(c=!0,setTimeout(function(){c=!1},h.throttle)),t.nonCustomerEvent=!u.view.root._userEventRunning,h.args&&(s=d(t,u.view.model,h.args)).push(t),t.domEvent&&("preventDefault"in h?h.preventDefault&&t.domEvent.preventDefault():u.spec.preventDefault&&t.domEvent.preventDefault(),"stopPropagation"in h?h.stopPropagation&&t.domEvent.stopPropagation():u.spec.stopPropagation&&t.domEvent.stopPropagation()),"component"===n?(e=new f(t.domEvent,{type:"trigger",value:e,data:s||[t]}),u.output.emit(e)):"view"!==n||!u.view[i]||u.view[i].constructor!==Function||"onReady"===i&&"render"===o||u.view[i].apply(u.view,s||[t]),"render"!==o&&void 0)}var u=this,h=u.spec.triggers[e]||{},t=h.action||e||"",l=!1,c=!1;(Array.isArray(t)?t.concat():[t]).forEach(function(n){var t=n.split("."),i=t[1]?t[0]:"component",r=t[1]||t[0],t=e.split(":"),o=t[1]||"",s=t[0],t={};if(!r)throw new TypeError('The mapping for target "'+e+'" is not valid');!o||"window"!==s&&"document"!==s?(t["*."+s]=t[s]=function(t){var e=t&&t.context&&t.domEvent?t:t?{context:t.context?v({},t.context):t,dataPath:p(t.keypath),domEvent:t.original}:{};if(!o||e.domEvent&&e.domEvent.type===o)return e.domEvent&&(u.view.root._userEventRunning=!0),t=a(e,n,i,r,0,s),e.domEvent&&(u.view.root._userEventRunning=!1),t},g.defined(u.view.rtemplate)&&g.defined(u.view.rtemplate.on)?("teardown"===s?u.eventUnlisteners.push(u.view.rtemplate.on("teardown",t.teardown).cancel):u.eventUnlisteners.push(u.view.rtemplate.on(t).cancel),u.view._rendered&&t.render&&g.function(t.render)&&t.render.call(u)):g.defined(u.view.rtemplate)&&(u.view.rtemplate._triggers=u.view.rtemplate._triggers||[],u.view.rtemplate._triggers.push({event:s,action:t}))):u.eventUnlisteners.push(m.on(function(t){if(t.type===o&&(t.target===document&&"document"===s||t.target===window&&"window"===s))return u.view.root._userEventRunning=!0,t=a({dataPath:null,context:v({},u.view.model),domEvent:t.originalEvent},n,i,r,0,s),u.view.root._userEventRunning=!1,t}))})},_.prototype.addComponentSpecData=function(t){var e=this;!t||!e.spec.defaultBindings&&Object.keys(e.spec.bindings||{}).length>(e.spec.bindings.v?1:0)||(e.spec.bindings||(e.spec.bindings={}),Object.getOwnPropertyNames(t).forEach(function(t){e.spec.bindings[t]||(e.spec.bindings[t]={direction:"DOWNSTREAM"})}))},_.prototype.addComponentSpecSettings=function(t){var e=this;t&&(e.spec.bindings||(e.spec.bindings={}),Object.getOwnPropertyNames(t).forEach(function(t){"_init"!==t&&(e.spec.bindings[t]||(e.spec.bindings[t]={direction:"DOWNSTREAM"}))}))},_.prototype.addComponentSpecActions=function(t){var e=this;t&&(e.spec.triggers||(e.spec.triggers={}),Object.keys(t).forEach(function(t){e.spec.triggers[t]||(e.spec.triggers[t]={action:t,preventDefault:e.spec.preventDefault||!1,stopPropagation:e.spec.stopPropagation||!1})}))},_.prototype.disable=function(){var t,e;if(this.__enabled){for(this.__enabled=!1,c.count.call({id:this.id},"blue/reactiveBridge","destroy",this.name),this.view.parent||this.output&&this.output.emit("destroy"),this.output&&this.output.destroy(),this.pipedInputUnplugger&&this.pipedInputUnplugger(),e=a(this.eventUnlisteners);t=e.pop()||e.length;)g.function(t)?t():y.warn("["+this.view.context.getStack()+"]","Bridge disable - unexpected non-function found in eventUnlisteners array for "+this.view.viewName);this.downstreamOutput&&this.downstreamOutput.destroy(),this.listeners={},this.context&&this.destroyContext(),delete this.input,delete this.output,delete this.eventUnlisteners,delete this.spec,delete this.view}},_.prototype.reBind=function(t,e,n,i){this.input?this.pipedInputUnplugger=this.input.plug(t.asEventStream()):(this.addComponentSpecData(e),this.addComponentSpecSettings(n),this.addComponentSpecActions(i),this.enable(t))},_.prototype.enable=function(t){var o=this,e={};o.input=t,g.plainObject(o.spec)&&(o.view.isRoot()&&g.plainObject(o.spec.bindings)&&g.defined(o.view.rtemplate.observe)&&(Object.keys(o.spec.bindings).forEach(o.createBinding,o),Object.keys(o.spec.bindings).forEach(function(t){E[o.spec.bindings[t].direction]&&(e[t]=!0)}),o.output.emit("init",{downstream:e}),o.on("data/*",function(t){var e=t.value,n=(o.spec.bindings[e]||{}).direction,i={};E[n]&&(s(t.current,o.view.model[e])||(o._fromComp=!0,t.path?(i[e]=t.current,o.view.rtemplate.set(t.path,b.get(i,t.path))):o.view.rtemplate.set(e,t.current),delete o._fromComp,c.count("blue/reactiveBridge","change",o.name,e)))}),o.on("reset/data",function(t){var e,n={},i=o.spec.bindings,r=t.current;for(e in o._fromComp=!0,i)E[i[e].direction]&&(n[e]=r[e]);o.view.rtemplate.set(n),delete o._fromComp,c.count("blue/reactiveBridge","reset",o.name)})),g.plainObject(o.spec.triggers)&&Object.keys(o.spec.triggers).forEach(function(t){o.createTrigger(t)}),!o.spec.triggers.render)&&(i={render:function(){return!1}},g.defined(o.view.rtemplate)&&g.defined(o.view.rtemplate.on)&&o.eventUnlisteners.push(o.view.rtemplate.on(i).cancel),g.defined(o.view.rtemplate)&&(o.view.rtemplate._triggers=o.view.rtemplate._triggers||[],o.view.rtemplate._triggers.push({event:"render",action:i})));var n,i,t=Object.keys(o.listeners);t.length&&t.forEach(function(e){(n=o.listeners[e]).forEach(function(t){o.on(e,t)}),n.clear()}),o.listeners={},o.view.isRoot()&&o.on("componentInputReady",function(){for(o.queueOutput=!1;o.queue.length;){var t=o.queue.shift();"binding"!==t.type&&o.output.emit(t)}}),o.view.isRoot()||(t=(i=o.output.asEventStream()).onValue(function(t){var e=o.root;y.warn("["+o.view.context.getStack()+"]","DEPRECATED:BLUEJS-2297: Subview communicating directly to component"),e&&e.__enabled&&o.output.emit.call(o.root.output,t)}),i.onEnd(t)),o.on("destroyView",function(t){(o.__enabled?l.destroyView(o.view):Promise.resolve()).catch(function(){}).then(function(){t.compDestroyResolve&&t.compDestroyResolve()})}),o.__enabled=!0},_.prototype.on=function(i,t){g.defined(this.input)?(!g.string(i)&&g.object(i)&&e.map(i,function(t,e){var n=e.split("/").join("/");i[n]=t,delete i[e]}),this.eventUnlisteners.push(this.input.on(i,t))):(g.defined(this.listeners[i])||(this.listeners[i]=new Set),this.listeners[i].has(t)||this.listeners[i].add(t))},_.prototype.create=function(t,e,n){return(n=g.undefined(n)?Object.create(null):n).spec=t,n.view=e,i(_,n)},_=u.call(_,{name:"bridge"})}),define("blue-view-ractive/view",["require","blue/$","blue-view-ractive/ractive","blue/compose","blue/is","blue/event/lifecycle","blue-view/nodeDictionary","blue/log","blue/object/extend","blue/util","blue-view-ractive/template/decorator","blue/dom/title","blue-view-ractive/bridge","blue/as/contextual","blue/as/serializable","blue-view/with/domManagement","blue/perf"],function(t){"use strict";function s(){}var p,d=t("blue/$"),f=t("blue-view-ractive/ractive"),e=t("blue/compose"),m=t("blue/is"),g=t("blue/event/lifecycle"),c=t("blue-view/nodeDictionary"),o=t("blue/log"),r=o("[ViewPrototype]"),v=o("[blue:view:ractive]"),i=t("blue/object/extend"),n=t("blue/util"),y=n.object.mixIn,b=n.object.filter,a=t("blue-view-ractive/template/decorator"),u=t("blue/dom/title"),h=t("blue-view-ractive/bridge"),l=t("blue/as/contextual"),w=t("blue/as/serializable"),n=t("blue-view/with/domManagement"),x=t("blue/perf"),E=0,k=new Map,_=function(t){return k.get(t)||(k.set(t,{})||k).get(t)};function O(a,u){return function(t){var e,n,i,r,o=t?{context:(i={},r=(n=t).get(),Object.keys(r).forEach(function(e){Object.defineProperty(i,e,{get:function(){return r[e]},set:function(t){return n.set(e,t),t},enumerable:!0})}),i),domEvent:t.original,name:t.name,target:t.node}:{},s=u(o);if("string"==typeof s)for(s=s.replace(/\s/g,"").split(",");e=s.pop();)a.fire(e,o);return!1}}function T(t){var e,n,i={};for(e in t)(n=t[e])&&n.partial&&(i[e]=n,t[e]=n.partial);return i}function A(t,e){var n,i,r;for(n in t)if((i=t[n])&&i.handlers)for(n in i.handlers)(r=i.handlers[n])&&e.on((i.prefix||"")+n,O(e,r))}function C(e,n){try{return void(m.function(e[n])&&e[n].call(e))}catch(t){return r.error("Error in view "+e.viewName+" "+n+"()",t),t}}function S(t){return"object"==typeof t?!m.empty(t):!!t}function j(t,e,n){var i=new h(((t.name||n.name)+"-bridge").toLowerCase(),n.context);return i.define(t,e),i.view=n,Object.defineProperty(i,"root",{get:function(){return _(n.root).bridge}}),i}function P(t,e){var n=e?["blue/reactiveView","destroy","subview",t.root.name,t.name]:["blue/reactiveView","destroy","view",t.name],i=C(t,"onDestroy");return t.destroyElement(),t.disableBridge(),t.parent&&t.parent.removeChild(t),e=new g({type:"view",action:"destroy",stage:"end",name:t.context&&t.context.name,beginEventName:t._destroyEvent.eventName}),t.context&&t.context.bubble(e.msgType,e),t.context&&t.destroyContext(),t.destroyed=!0,k.delete(t),delete t.bridge,delete t.context,delete t.model,delete t.root,delete t.rtemplate,x.count.apply({id:t._id},n),i}return(p=function(t,e){var n,i,l=this,r=_(l),c={};r.createBridge=function(t){(t&&t.constructor)===Object?r.bridge=j(t,void 0,l):r.bridge=t},l.defineContext(e,{logger:o("[view:"+t+"]"),pageTitle:{},name:t}),u.call(l.context.pageTitle),l.name=t,l.model={isValid:!0,validation:{},viewName:t},r.descendantCount=0,r.readyCount=0,l._rendered=!1,l._dataListeners=[],t={controller:{get:function(){return n||this.parent&&this.parent.controller},set:function(t){n=t},enumerable:!0},bridge:{get:function(){return v.warn("["+l.context.getStack()+"]","DEPRECATED:BLUEJS-3024: getting this.bridge has been deprecated"),r.bridge},set:r.createBridge,enumerable:!0,configurable:!0},link:{value:function(){return r},configurable:!0},parent:{get:function(){return i},set:function(t){i=t},enumerable:!0},views:{get:function(){return c},set:function(h){Object.getOwnPropertyNames(h).forEach(function(t){var e,o,s,a,u,n,i,r;try{s=l,a=h[o=t],r=a.template||(a.template=(r=a,n=s.context.page,r.template||(m.function(r)&&(i=new r(n)).template?i.template:((i=new p("t",n)).define(r),r=i.template,i.destroy(),r)))),e=f.extend({isolated:!0,magic:!0,template:r,modifyArrays:!("modifyArrays"in s)||s.modifyArrays,onconstruct:function(t){this._id="<"+a.name+"Subview:"+E+++">",x.count.call({id:this._id,ref:s},"blue/reactiveView","create","subview",s.name,a.name);var e=function(e,n,t){var i;try{return(i=new p(e,n.context)).define(t),n.appendChild(i)}catch(t){throw v.error("["+n.context.getStack()+"]",'Unable-to-create sub-view "'+n.viewName+"."+e+'":',t),n.context.page.emit("page:error",{code:"blue:view:error:subviewCreationError",description:"Error in creation of subview "+n.viewName+"."+e+"; "+t.name+":"+t.message}),t}}(o,s,a),n=s.context.util.object.mixIn({},e.partials||{}),i=_(e.root),r=S(e.transitions);u=T(n),m.defined(e)&&(this.view=e,t.partials=n,(t.transitionsEnabled=r)&&"object"==typeof e.transitions&&(t.transitions=e.transitions||{}),m.defined(e.decorators)&&m.plainObject(e.decorators)&&(t.decorators=e.createDecorators(e.decorators)),t.components=e.views,i.descendantCount++)},onconfig:function(){var n=this,i=n.get(),t=b(n.view.model,function(t,e){return void 0===i[e]});n.set(t),y(n.view.model,i),Object.defineProperty(n.view,"model",{get:function(){var t=n.get();return Object.keys(t).forEach(function(e){Object.getOwnPropertyDescriptor(t,e).get||Object.defineProperty(t,e,{get:function(){return n.get(e)},set:function(t){n.set(e,t)},enumerable:!0})}),t},set:function(t){n.set(t)},enumerable:!0})},oninit:function(){var t=this.fragment.items.length;1!==t&&v.warn("["+this.view.context.getStack()+"]","View template must-contains-exactly one root node. "+t+" found"),A(u,this)},onchange:function(t){for(var e in t)"$"!==e[0]&&x.count("blue/reactiveView","change","subview",s.name,a.name,e)},onunrender:function(){this.view._destroyEvent=new g({type:"view",action:"destroy",stage:"begin",name:this.view.context.name}),this.view.context&&this.view.context.bubble(this.view._destroyEvent.msgType,this.view._destroyEvent),!this.view._rendered&&this.view.context&&v.warn("["+this.view.context.getStack()+"]","["+a.name+"] Possible optimization: subview destroyed-before-render completed"),P(this.view,!0),x.count.call({id:this._id},"blue/reactiveView","destroy","subview",s.name,a.name),delete this.view},onrender:function(){var e,t,n,i=this;i.view&&(x.count("blue/reactiveView","onrender","subview",s.name,a.name),i.view.rtemplate=i,t=_(i.view).bridge,n=_(i.view.root).bridge,!t.__enabled&&n&&t.enable(n.downstreamOutput),m.defined(i._triggers)&&i._triggers.forEach(function(t){"render"===t.event?m.function(t.action)&&t.action():i.on(t.event,t.action)}),(e=i.fragment.items[0].node)&&Object.getOwnPropertyNames(i.view.htmlAttrs).forEach(function(t){e.setAttribute(t,i.view.htmlAttrs[t])}),i.view.$element=d(e),i.view._rendered=!0,C(i.view,"onReady"),i.view.root.addReady())}}),c[t]=e}catch(t){v.warn("["+l.context.getStack()+"]","Invalid component!",t)}})}}},Object.defineProperties(l,t),l._views=function(){return v.warn("["+l.context.getStack()+"]","DEPRECATED:BLUEJS-2526: this._views() has been replaced with this.views"),l.views},l.timestamp=Date.now(),l.parent=null,(l.this=l.root=l).children=new Set,l.htmlAttrs={},l.tagName=void 0,l._id="<"+l.name+"View:"+E+++">",l.addReady=function(){var t=_(l);t.readyCount++,t.readyCount>t.descendantCount&&!t.readyFired&&(l.isRoot()&&t.bridge&&t.bridge.output.emit("ready",l.viewName),t.readyFired=!0,C(l,"onReady"))},l.disableBridge=function(){r.bridge&&r.bridge.disable()},l.context.$=function(t){if(!l.$element)throw new Error("DOM cannot be accessed before render event");return t?l.$element.find(t):l.$element}}).prototype=Object.create(null),(p.prototype.constructor=p).prototype.define=function(t){e(this,t),m.function(this.onInit)?this.onInit.call(this):m.function(this.init)&&this.init.call(this)},p.prototype.$=function(t){return v.warn("["+this.context.getStack()+"]","view.context.$ should be used in place of view.$"),this.$element?t?this.$element.find(t):this.$element:t?d.find(t):d("body")},p.prototype.isRoot=function(){return this===this.root},p.prototype.inDOM=function(){return document.body.contains(this.$element&&this.$element[0]||document.body)},p.prototype.createBridge=function(t,e){return this.context&&v.warn("["+this.context.getStack()+"]","DEPRECATED:BLUEJS-2541:createBridge method is no longer required."),j(t,e,this)},p.prototype.appendChild=function(t){return t.parent=this,t.root=this.root,this.children.add(t),t},p.prototype.callRecursively=function(e,t){t=!1===t?this.children:new Set([this]);t.size&&t.forEach(function(t){e(t),t.callRecursively(e,!1)})},p.prototype.createElement=function(){if(m.undefined(this.$element)){var t=this.tagName||"div";return document.createElement(t)}},p.prototype.destroy=function(){return c.destroyView(this)},p.prototype._destroy=function(){var i=this;return i._destroyEvent=new g({type:"view",action:"destroy",stage:"begin",name:i.context.name}),i.context.bubble(i._destroyEvent.msgType,i._destroyEvent),new Promise(function(t,e){var n=C(i,"unBindData");i.rtemplate?i.rtemplate.teardown().then(function(){(n=P(i)||n)?e(n):t()}).catch(function(t){x.count.call({id:i._id},"blue/reactiveView","destroy/fail","view",i.name),r.error("View "+i.viewName+" template teardown failed",t),e(t)}):P(i)})},p.prototype.destroyElement=function(){m.defined(this.$element)&&delete this.$element},p.prototype.onData=function(t,e,n){var i,r,o=this.rtemplate,n=[t.split(".")[0],e,y({context:this},n)];return o?(o.observe.apply(o,n)||{cancel:s}).cancel:(r=this._dataListeners,i=r.length,r.push(n),function(){var t=r[i];t&&t.constructor===Function&&t(),r[i]=!1})},p.prototype.trigger=function(t,e,n){var i=this.rtemplate,r=this.root._userEventRunning;i?(void 0!==n&&(this.root._userEventRunning=!!n),i.fire(t,e),void 0!==n&&(this.root._userEventRunning=r)):this.context&&v.warn("["+this.context.getStack()+"]",'Cannot trigger "'+t+'" on "'+this.viewName+'" without a template instance')},p.prototype.insertElement=function(t){var e=this;e.$element=d(e.createElement()),e.enableEvents(e.$element),d(function(){t.call(e,e.$element)})},p.prototype.removeChild=function(t){var e=_(t.root);t.parent=null,0<e.descendantCount&&e.descendantCount--,this.children.has(t)&&this.children.delete(t)},p.prototype.appendTo=function(t,e){this.insert(!0,t,e)},p.prototype.replaceIn=function(t,e){var n,i,r=document.body.querySelector(t);if(r&&(n=r.children.length))for(;n--;)(i=r.children[n])._ractive&&!i.getAttribute("data-is-view")&&v.error("["+this.context.getStack()+"]","Error: ractive view is overwriting template html in "+t);this.insert(!1,t,e)},p.prototype.insert=function(t,e,n){var i,r,o=this,s=x.count.call({id:o._id,ref:o,time:1,bucket:"render"},"blue/reactiveView","create","view",o.name),a=o.context.util.object.mixIn({},o.partials||{}),u=T(a),h={},l=S(o.transitions);m.defined(o.decorators)&&m.plainObject(o.decorators)&&(h=o.createDecorators(o.decorators));try{o.rtemplate=i=new f({append:t,template:o.template,partials:a,decorators:h,transitions:"object"==typeof o.transitions?o.transitions:{},noIntro:!l,transitionsEnabled:l,components:o.views,data:o.model,magic:!0,modifyArrays:!("modifyArrays"in o)||o.modifyArrays,onchange:function(t){for(var e in o.inDOM()||v.error("["+o.context.getStack()+"]","View is no longer in the DOM"),t)"$"!==e[0]&&x.count("blue/reactiveView","change","view",o.name,e)},onrender:function(){s(),o.$element=o.$target.children().last(),o.$element.attr("data-is-view",!0),o.root&&(n.call(o),o._rendered=!0,o.root.addReady())}}),A(u,i),o._dataListeners.forEach(function(t,e){t&&t.constructor===Array&&(o._dataListeners[e]=o.onData.apply(o,t))}),1!==(r=i.template&&i.template.filter(function(t){return t&&t.constructor===Object}).length||0)&&(v.warn("["+o.context.getStack()+"]","View template must-contains-exactly one root node. "+r+" found"),o.context.page.emit("page:error",{code:"blue:view:error:illegalTemplateError",description:'View template for "'+o.viewName+'" must contains exactly one root node. '+r+" found"})),(i.view=o).$target=d(e),c.add(o.$target,o),o.rtemplate.render(e)}catch(t){throw o._rendered||s(),v.error("["+o.context.getStack()+"]",'Unable to render view "'+o.viewName+'":',t),o.context.page.emit("page:error",{code:"blue:view:error:viewRenderError",description:'Unable to render view "'+o.viewName+'"; '+t.name+":"+t.message}),t}},p.prototype.createDecorators=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(m.function(t[e])?n[e]=a.create(this,t[e]):(n[e]=a.create(this,t[e].module),i(n[e],t[e].properties)));return n},p.prototype.rerender=function(t){t&&(this.model=t),this.destroyElement(),this.replaceIn(this.$target)},w.call(p.prototype,function(){return{ViewName:this.name||"empty name",Subviews:this.views||"empty subviews"}}),p=l.call(p,{name:"view"}),e(p.prototype,n),p}),define("blue-view-ractive/template/decorator/tooltip",[],function(){"use strict";return function(t){function o(t,e){var n,i,r;for(r in i={mouseover:function(){(n=document.createElement(o.elementName)).className=o.className,n.innerHTML=e,t.parentNode.insertBefore(n,t)},mousemove:function(t){n.style.left=t.clientX+o.offsetX+"px",n.style.top=t.clientY-n.clientHeight+o.offsetY+"px"},mouseleave:function(){n.parentNode.removeChild(n)}})Object.prototype.hasOwnProperty.call(i,r)&&t.addEventListener(r,i[r],!1);return{teardown:function(){for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.removeEventListener(r,i[r],!1);o.context&&o.context.destroy()}}}return o.className="tooltip",o.elementName="div",o.offsetX=0,o.offsetY=-20,o}}),define("blue-view-ractive/view",function(){});
