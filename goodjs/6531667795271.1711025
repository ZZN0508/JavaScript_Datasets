define("indexnew:component/skin/service.js",["global","module","exports","require","indexnew:static/js/log.js","indexnew:static/js/profile.js","indexnew:static/js/events.js","indexnew:static/js/cookie.js","indexnew:static/js/jquery.js","indexnew:static/js/config.js","indexnew:component/skin/hooks.js"],function(e,n,i,s,t,c,o,r,a,p,d){function k(e){try{e=e||b.curSkin,L||b.userSkin!==f||e===f||m({type:"newskin"}),L=!0,e&&b.userSkin!==e&&(x.set(u,e),b.lastSkin=b.userSkin,b.userSkin=b.curSkin=e,S.emit("skin.save",e))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:57})}}function l(e,n){try{var i,s,t=b.curSkin;e&&b.curSkin!==e&&(i=HAO.httpsTrans(h+"?c="+y.getC()+"&type=kp&skin="+e),(s=!(s=j("#userSkin"))[0]?j('<link rel="stylesheet" type="text/css" id="userSkin"></link>').appendTo("head"):s).attr("href",i),b.curSkin=e),j("body").prop("className","sk_"+e),n&&n.src&&(b.src=n.src),S.emit(t+"unload"),g(t,b.curSkin)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:102})}}function g(e,n){try{var i=v[e];i&&i(!1),(i=v[n])&&i(!0)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:120})}}var u="skin",f="skin-color-green",h="/api/getskins/",m=t,x=c,S=o,y=r,j=a,w=p,v=d,_=!1,L=!1,b={userSkin:f,curSkin:f,lastSkin:f,src:"init"};n.exports={init:function(){try{var e,n,i;_||((n=(e=w.get("userSkin"))&&e[0]&&e[0].name)&&(b.curSkin=b.userSkin=b.lastSkin=n),i=w.get("skinresource"),j.each(i,function(e,n){try{v._add(n.tip,function(e){try{e?v._Loadskinresource(n):v._Unloadskinresource()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:173})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:174})}}),_=!0);try{g(null,b.curSkin)}catch(e){}}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:184})}},get:function(e){try{return e?b[e]:b}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:188})}},resetLastSkin:function(e){try{e=e||"resetLast",l(b.lastSkin,{src:e}),k(b.lastSkin)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:151})}},config:b,setSkin:k,viewSkin:l,canselSkin:function(){try{l(b.userSkin,{src:"cansel"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:129})}},resetSkin:function(){try{l(f,{src:"reset"}),k(f)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:139})}}}});
