YUI.add("flickr-activity-recentByType-fetcher",function(t,e){"use strict";t.namespace("ListFetchers")["flickr-activity-recentByType"]={run:function(i,o){var n=this,s=this._processParams(i);return new t.FlickrPromise({apiResponse:o.callAPI("flickr.activity.recentByType",s),notificationModelRegistry:o.getModelRegistry("notification-models"),notificationsModelRegistry:o.getModelRegistry("person-notifications-models")}).then(function(t){return n._processResponse(t,i,s,o)},t.FetcherErrorLogger(e))},_processParams:function(e){var i={extras:["sizes","icon_urls","ignored","rev_ignored","tags","autotags","datecreate"].join(",")+","+t.APIHelper.request.getRebootPhotoExtras(),count:30,per_object:12,max_users:2,notification_groups:e.notificationGroups||"default"};return e.muteFilter&&(i.mute_filter=e.muteFilter),e.onlyGroupId&&(i.only_group_id=e.onlyGroupId),"continuation"in e?i.continuation=e.continuation:"page"in e&&(i.page=e.page,i.per_page=e.perPage),i},_processResponse:function(e,i,o,n){var s=e.apiResponse,a=e.notificationModelRegistry,r=e.notificationsModelRegistry,c=[],l=new t.NotificationsHelper(n);return s.items?(s.items.item.forEach(function(e){var i=e.events||[],o={id:t.guid(),isSeen:1===e.seen||!0===e.seen,isMuted:1===e.is_muted,type:e.type,timestamp:e.date,activityData:e,eventDataList:i};c.push(l.extractEntitiesFromResponse(o).then(function(t){var o={id:e.id,isSeen:1===e.seen||!0===e.seen,isMuted:1===e.is_muted,type:e.type,timestamp:e.date,activityData:e,eventDataList:i,userModels:t.userModels,activityEntityModels:t.activityEntityModels,eventEntityModelsList:t.eventEntityModelsList};return a.addOrUpdate(o)}))}),t.Promise.all(c).then(function(t){var e,n,a,c={id:i.id};return"continuation"in o?(e=r.addOrUpdate(c),"0"===o.continuation&&(n=e.getValue("initialNotificationsData")||{},a="notificationGroups="+i.notificationGroups,i.muteFilter&&(a+="&muteFilter="+i.muteFilter),i.onlyGroupId&&(a+="&onlyGroupId="+i.onlyGroupId),n[a]=n[a]||{token:s.continuation,list:t},e.setValue("initialNotificationsData",n)),{notificationModels:t,continuation:s.continuation}):"page"in o?(r.exists(i.id)?r.getValue(i.id,"notifications").addPage({page:o.page,perPage:o.per_page,pageContent:t,totalItems:parseInt(s.items.total||0,10)}):(c.notifications=t,r.add(c)),t):void 0})):t.Promise.resolve(Object.assign(s,{notificationModels:[]}))}}},"@VERSION@",{requires:["flickr-promise","search-helper","querystring-parse-simple"],optional:["url-helper","notification-models","person-notifications-models","contact-models","photo-models","notification-models"]});YUI.add("hermes-template-notification-photo-extra-info",function(e,n){var t=e.Template.Handlebars.revive({1:function(e,n,t,a,l){var r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return e.escapeExpression((r(t,"intlMessage")||n&&r(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{time:null!=n?r(n,"time"):n,intlName:null!=n?r(n,"intlName"):n},data:l,loc:{start:{line:2,column:49},end:{line:2,column:92}}}))},compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<span class="extra-info">\n\t'+(null!=(r=(i(t,"friendlySinceDate")||n&&i(n,"friendlySinceDate")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},null!=(r=null!=n?i(n,"event"):n)?i(r,"timestamp"):r,!0,!0,{name:"friendlySinceDate",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:2,column:1},end:{line:2,column:114}}}))?r:"")+"\n</span>"},useData:!0}),a={};e.Array.each([],function(n){var t=e.Template.get("hermes/"+n);t&&(a[n]=t)}),e.Template.register("hermes/notification-photo-extra-info",function(n,l){return l=l||{},l.partials=l.partials?e.merge(a,l.partials):a,t(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-notification-photo-comment",function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=a(e,"if").call(null!=n?n:l.nullContext||{},null!=n?a(n,"subPeopleCount"):n,{name:"if",hash:{},fn:l.program(2,o,0),inverse:l.program(4,o,0),data:o,loc:{start:{line:4,column:3},end:{line:8,column:10}}}))?r:""},2:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t"+l.escapeExpression((a(e,"intlHTMLMessage")||n&&a(n,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=n?n:l.nullContext||{},{name:"intlHTMLMessage",hash:{mediaType:null!=(r=null!=n?a(n,"object"):n)?a(r,"mediaType"):r,objectUrl:null!=(r=null!=n?a(n,"object"):n)?a(r,"url"):r,secondPersonUrl:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"1"):r)?a(r,"url"):r,secondPersonName:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"1"):r)?a(r,"name"):r,firstPersonUrl:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"url"):r,firstPersonName:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"name"):r,count:null!=n?a(n,"subPeopleCount"):n,intlName:"notifications.NOTIF_PHOTO_COMMENT_YOURS_MULTI"},data:o,loc:{start:{line:5,column:4},end:{line:5,column:268}}}))+"\n"},4:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t"+l.escapeExpression((a(e,"intlHTMLMessage")||n&&a(n,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=n?n:l.nullContext||{},{name:"intlHTMLMessage",hash:{mediaType:null!=(r=null!=n?a(n,"object"):n)?a(r,"mediaType"):r,objectUrl:null!=(r=null!=n?a(n,"object"):n)?a(r,"url"):r,personUrl:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"url"):r,personName:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"name"):r,intlName:"notifications.NOTIF_PHOTO_COMMENT_YOURS"},data:o,loc:{start:{line:7,column:4},end:{line:7,column:170}}}))+"\n"},6:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=a(e,"if").call(null!=n?n:l.nullContext||{},null!=n?a(n,"subPeopleCount"):n,{name:"if",hash:{},fn:l.program(7,o,0),inverse:l.program(9,o,0),data:o,loc:{start:{line:10,column:3},end:{line:14,column:10}}}))?r:""},7:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t"+l.escapeExpression((a(e,"intlHTMLMessage")||n&&a(n,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=n?n:l.nullContext||{},{name:"intlHTMLMessage",hash:{ownerName:null!=(r=null!=(r=null!=n?a(n,"object"):n)?a(r,"owner"):r)?a(r,"displayname"):r,ownerUrl:null!=(r=null!=(r=null!=n?a(n,"object"):n)?a(r,"owner"):r)?a(r,"url"):r,mediaType:null!=(r=null!=n?a(n,"object"):n)?a(r,"mediaType"):r,objectUrl:null!=(r=null!=n?a(n,"object"):n)?a(r,"url"):r,secondPersonUrl:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"1"):r)?a(r,"url"):r,secondPersonName:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"1"):r)?a(r,"name"):r,firstPersonUrl:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"url"):r,firstPersonName:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"name"):r,count:null!=n?a(n,"subPeopleCount"):n,intlName:"notifications.NOTIF_PHOTO_COMMENT_OTHER_MULTI"},data:o,loc:{start:{line:11,column:4},end:{line:11,column:328}}}))+"\n"},9:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return"\t\t\t\t"+l.escapeExpression((a(e,"intlHTMLMessage")||n&&a(n,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=n?n:l.nullContext||{},{name:"intlHTMLMessage",hash:{ownerName:null!=(r=null!=(r=null!=n?a(n,"object"):n)?a(r,"owner"):r)?a(r,"displayname"):r,ownerUrl:null!=(r=null!=(r=null!=n?a(n,"object"):n)?a(r,"owner"):r)?a(r,"url"):r,mediaType:null!=(r=null!=n?a(n,"object"):n)?a(r,"mediaType"):r,objectUrl:null!=(r=null!=n?a(n,"object"):n)?a(r,"url"):r,personUrl:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"url"):r,personName:null!=(r=null!=(r=null!=n?a(n,"people"):n)?a(r,"0"):r)?a(r,"name"):r,intlName:"notifications.NOTIF_PHOTO_COMMENT_OTHER"},data:o,loc:{start:{line:13,column:4},end:{line:13,column:231}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(l,n,e,t,o){var r,a=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="details">\n\t<span class="headline">\n'+(null!=(r=a(e,"if").call(null!=n?n:l.nullContext||{},null!=(r=null!=(r=null!=n?a(n,"object"):n)?a(r,"owner"):r)?a(r,"isMe"):r,{name:"if",hash:{},fn:l.program(1,o,0),inverse:l.program(6,o,0),data:o,loc:{start:{line:3,column:2},end:{line:15,column:9}}}))?r:"")+"\t</span>\n\n"+(null!=(r=l.invokePartial(a(t,"notification-photo-extra-info"),n,{name:"notification-photo-extra-info",data:o,indent:"\t",helpers:e,partials:t,decorators:l.decorators}))?r:"")+"</div>"},usePartial:!0,useData:!0}),t={};l.Array.each(["notification-photo-extra-info"],function(n){var e=l.Template.get("hermes/"+n);e&&(t[n]=e)}),l.Template.register("hermes/notification-photo-comment",function(n,o){return o=o||{},o.partials=o.partials?l.merge(t,o.partials):t,e(n,o)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});YUI.add("hermes-template-notification-group-invite",function(e,t){var n=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var i,o=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="avatar group tiny no-menu" style="background-image: url('+r(o(null!=(i=null!=t?s(t,"object"):t)?s(i,"bestIconURL"):i,t))+');" href="'+r(o(null!=(i=null!=t?s(t,"object"):t)?s(i,"url"):i,t))+'"></a>\n\n<div class="details">\n\t<span class="headline">\n\t\t'+r((s(n,"intlHTMLMessage")||t&&s(t,"intlHTMLMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlHTMLMessage",hash:{groupUrl:null!=(i=null!=t?s(t,"object"):t)?s(i,"url"):i,groupName:null!=(i=null!=t?s(t,"object"):t)?s(i,"title"):i,intlName:"notifications.NOTIF_GROUP_USER_INVITE"},data:l,loc:{start:{line:5,column:2},end:{line:5,column:114}}}))+"\n\t</span>\n\n"+(null!=(i=e.invokePartial(s(a,"notification-photo-extra-info"),t,{name:"notification-photo-extra-info",data:l,indent:"\t",helpers:n,partials:a,decorators:e.decorators}))?i:"")+"</div>\n"},usePartial:!0,useData:!0}),a={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(a[t]=n)}),e.Template.register("hermes/notification-group-invite",function(t,l){return l=l||{},l.partials=l.partials?e.merge(a,l.partials):a,n(t,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});YUI.add("hermes-template-notification-added-to-gallery",function(l,e){var n=l.Template.Handlebars.revive({1:function(l,e,n,t,a){var r,o=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return"\t\t\t"+l.escapeExpression((o(n,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlHTMLMessage",hash:{count:null!=e?o(e,"subCount"):e,mediaType:null!=(r=null!=e?o(e,"object"):e)?o(r,"mediaType"):r,objectUrl:null!=(r=null!=e?o(e,"object"):e)?o(r,"url"):r,secondGalleryUrl:null!=(r=null!=(r=null!=(r=null!=e?o(e,"events"):e)?o(r,"1"):r)?o(r,"gallery"):r)?o(r,"url"):r,secondGalleryName:null!=(r=null!=(r=null!=(r=null!=e?o(e,"events"):e)?o(r,"1"):r)?o(r,"gallery"):r)?o(r,"title"):r,galleryUrl:null!=(r=null!=(r=null!=e?o(e,"event"):e)?o(r,"gallery"):r)?o(r,"url"):r,galleryName:null!=(r=null!=(r=null!=e?o(e,"event"):e)?o(r,"gallery"):r)?o(r,"title"):r,intlName:"notifications.NOTIF_GALLERY_MULTI"},data:a,loc:{start:{line:6,column:3},end:{line:6,column:270}}}))+"\t\n"},3:function(l,e,n,t,a){var r,o=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return"\t\t\t"+l.escapeExpression((o(n,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlHTMLMessage",hash:{mediaType:null!=(r=null!=e?o(e,"object"):e)?o(r,"mediaType"):r,objectUrl:null!=(r=null!=e?o(e,"object"):e)?o(r,"url"):r,galleryUrl:null!=(r=null!=(r=null!=e?o(e,"event"):e)?o(r,"gallery"):r)?o(r,"url"):r,galleryName:null!=(r=null!=(r=null!=e?o(e,"event"):e)?o(r,"gallery"):r)?o(r,"title"):r,intlName:"notifications.NOTIF_GALLERY"},data:a,loc:{start:{line:8,column:3},end:{line:8,column:170}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(l,e,n,t,a){var r,o,u=l.lambda,i=l.escapeExpression,s=null!=e?e:l.nullContext||{},c=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'<a class="avatar gallery tiny no-menu" style="background-image: url('+i(u(null!=(r=null!=(r=null!=(r=null!=e?c(e,"event"):e)?c(r,"gallery"):r)?c(r,"iconurls"):r)?c(r,"small"):r,e))+');" href="'+i(u(null!=(r=null!=(r=null!=e?c(e,"event"):e)?c(r,"gallery"):r)?c(r,"url"):r,e))+'"></a>\n\n<div class="details">\n\t<span class="headline">\n'+(null!=(r=c(n,"if").call(s,null!=e?c(e,"subCount"):e,{name:"if",hash:{},fn:l.program(1,a,0),inverse:l.program(3,a,0),data:a,loc:{start:{line:5,column:2},end:{line:9,column:9}}}))?r:"")+"\t</span>\n\n"+(null!=(r=l.invokePartial(c(t,"notification-photo-extra-info"),e,{name:"notification-photo-extra-info",data:a,indent:"\t",helpers:n,partials:t,decorators:l.decorators}))?r:"")+'</div>\n\n<a class="avatar '+i("function"==typeof(o=null!=(o=c(n,"type")||(null!=e?c(e,"type"):e))?o:l.hooks.helperMissing)?o.call(s,{name:"type",hash:{},data:a,loc:{start:{line:15,column:17},end:{line:15,column:25}}}):o)+' small" style="background-image: url('+i(u(null!=(r=null!=(r=null!=(r=null!=e?c(e,"object"):e)?c(r,"sizes"):r)?c(r,"sq"):r)?c(r,"url"):r,e))+');" href="'+i(u(null!=(r=null!=e?c(e,"object"):e)?c(r,"url"):r,e))+'"></a>\n'},usePartial:!0,useData:!0}),t={};l.Array.each(["notification-photo-extra-info"],function(e){var n=l.Template.get("hermes/"+e);n&&(t[e]=n)}),l.Template.register("hermes/notification-added-to-gallery",function(e,a){return a=a||{},a.partials=a.partials?l.merge(t,a.partials):t,n(e,a)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});YUI.add("hermes-template-notification-photo-fave",function(l,e){var n=l.Template.Handlebars.revive({1:function(l,e,n,t,o){var a,r=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return"\t\t\t"+l.escapeExpression((r(n,"intlHTMLMessage")||e&&r(e,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlHTMLMessage",hash:{mediaType:null!=(a=null!=e?r(e,"object"):e)?r(a,"mediaType"):a,objectUrl:null!=(a=null!=e?r(e,"object"):e)?r(a,"url"):a,title:null!=(a=null!=e?r(e,"object"):e)?r(a,"title"):a,secondUrl:null!=(a=null!=(a=null!=e?r(e,"people"):e)?r(a,"1"):a)?r(a,"url"):a,secondOwner:null!=(a=null!=(a=null!=e?r(e,"people"):e)?r(a,"1"):a)?r(a,"name"):a,ownerUrl:null!=(a=null!=(a=null!=e?r(e,"people"):e)?r(a,"0"):a)?r(a,"url"):a,owner:null!=(a=null!=(a=null!=e?r(e,"people"):e)?r(a,"0"):a)?r(a,"name"):a,count:null!=e?r(e,"subCount"):e,intlName:"notifications.NOTIF_PHOTO_FAVE_MULTI"},data:o,loc:{start:{line:4,column:3},end:{line:4,column:243}}}))+"\n"},3:function(l,e,n,t,o){var a,r=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return"\t\t\t"+l.escapeExpression((r(n,"intlHTMLMessage")||e&&r(e,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlHTMLMessage",hash:{mediaType:null!=(a=null!=e?r(e,"object"):e)?r(a,"mediaType"):a,ownerUrl:null!=(a=null!=(a=null!=e?r(e,"event"):e)?r(a,"owner"):a)?r(a,"url"):a,objectUrl:null!=(a=null!=e?r(e,"object"):e)?r(a,"url"):a,title:null!=(a=null!=e?r(e,"object"):e)?r(a,"title"):a,owner:null!=(a=null!=(a=null!=e?r(e,"event"):e)?r(a,"owner"):a)?r(a,"displayname"):a,intlName:"notifications.NOTIF_PHOTO_FAVE"},data:o,loc:{start:{line:6,column:3},end:{line:6,column:187}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(l,e,n,t,o){var a,r=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'<div class="details">\n\t<span class="headline">\n'+(null!=(a=r(n,"if").call(null!=e?e:l.nullContext||{},null!=e?r(e,"subCount"):e,{name:"if",hash:{},fn:l.program(1,o,0),inverse:l.program(3,o,0),data:o,loc:{start:{line:3,column:2},end:{line:7,column:9}}}))?a:"")+"\t</span>\n\n"+(null!=(a=l.invokePartial(r(t,"notification-photo-extra-info"),e,{name:"notification-photo-extra-info",data:o,indent:"\t",helpers:n,partials:t,decorators:l.decorators}))?a:"")+"</div>"},usePartial:!0,useData:!0}),t={};l.Array.each(["notification-photo-extra-info"],function(e){var n=l.Template.get("hermes/"+e);n&&(t[e]=n)}),l.Template.register("hermes/notification-photo-fave",function(e,o){return o=o||{},o.partials=o.partials?l.merge(t,o.partials):t,n(e,o)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});