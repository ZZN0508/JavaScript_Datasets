define("lofty/lang/attribute",["lofty/lang/class"],function(t){"use strict";function r(t){return"[object String]"===p.call(t)}function n(t){return null!=t&&t==t.window}function e(t){if(!t||"[object Object]"!==p.call(t)||t.nodeType||n(t))return!1;try{if(t.constructor&&!y.call(t,"constructor")&&!y.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}var e;if(v)for(e in t)return y.call(t,e);for(e in t);return void 0===e||y.call(t,e)}function i(t){if(!t||"[object Object]"!==p.call(t))return!1;for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}function o(t,r){var n,i;for(n in r)if(r.hasOwnProperty(n)){if(i=r[n],b(i))i=i.slice();else if(e(i)){var a=t[n];e(a)||(a={}),i=o(a,i)}t[n]=i}return t}function a(t,r){for(var n=[],e=r.constructor.prototype;e;)e.hasOwnProperty("options")||(e.options={}),i(e.options)||n.unshift(e.options),e=e.constructor.superclass;for(var a=0,s=n.length;s>a;a++)o(t,u(n[a]))}function s(t,r){o(t,u(r,!0))}function c(t,r,n){var e={silent:!0};t.__initializingAttrs=!0;for(var i in n)n.hasOwnProperty(i)&&r[i].setter&&t.set(i,r[i].value,e);delete t.__initializingAttrs}function u(t,r){var n={};for(var i in t){var o=t[i];n[i]=!r&&e(o)&&f(o,j)?o:{value:o}}return n}function f(t,r){for(var n=0,e=r.length;e>n;n++)if(t.hasOwnProperty(r[n]))return!0;return!1}function l(t){return null==t||(r(t)||b(t))&&0===t.length||i(t)}function h(t,r){if(t===r)return!0;if(l(t)&&l(r))return!0;var n=p.call(t);if(n!=p.call(r))return!1;switch(n){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:0==t?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase;case"[object Array]":var i=t.toString(),o=r.toString();return-1===i.indexOf("[object")&&-1===o.indexOf("[object")&&i===o}if("object"!=typeof t||"object"!=typeof r)return!1;if(e(t)&&e(r)){if(!h(O(t),O(r)))return!1;for(var a in t)if(t[a]!==r[a])return!1;return!0}return!1}var v,g=t({initOptions:function(t){var r=this.options={};a(r,this),t&&s(r,t),c(this,r,t)},get:function(t){var r=this.options[t]||{},n=r.value;return r.getter?r.getter.call(this,n,t):n},set:function(t,n,i){var a={};r(t)?a[t]=n:(a=t,i=n),i||(i={});var s=i.silent,c=i.override,u=this.options,f=this.__changedAttrs||(this.__changedAttrs={});for(t in a)if(a.hasOwnProperty(t)){var l=u[t]||(u[t]={});if(n=a[t],l.readOnly)throw new Error("This attribute is readOnly: "+t);l.setter&&(n=l.setter.call(this,n,t));var v=this.get(t);!c&&e(v)&&e(n)&&(n=o(o({},v),n)),u[t].value=n,this.__initializingAttrs||h(v,n)||(s?f[t]=[n,v]:this.trigger(t+"Changed",n,v,t))}return this},change:function(){var t=this.__changedAttrs;if(t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];this.trigger(r+"Changed",n[0],n[1],r)}delete this.__changedAttrs}return this}}),p=Object.prototype.toString,y=Object.prototype.hasOwnProperty;!function(){function t(){this.x=1}var r=[];t.prototype={valueOf:1,y:1};for(var n in new t)r.push(n);v="x"!==r[0]}();var b=Array.isArray||function(t){return"[object Array]"===p.call(t)},O=Object.keys;O||(O=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(n);return r});var j=["value","getter","setter","readOnly"];return g});;