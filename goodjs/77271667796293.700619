(window.webpackJsonp=window.webpackJsonp||[]).push([["1591"],{"+oWa":function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return o});class s{constructor(e){this.key=void 0,this.size=void 0,this.result=void 0,this.watchers=void 0,this.key=e,this.watchers=[],this.size=0}setResult(e){var t=this.result;this.result=e;var r=JSON.stringify(e.data),t=r===JSON.stringify(null==t?void 0:t.data);this.size=e.data?r.length:0,t||this.notify()}isCollectable(){return 0===this.watchers.length}watch(t){const e=this;return e.watchers=e.watchers.concat(t),function(){e.watchers=e.watchers.filter(e=>e!==t)}}notify(){const{watchers:e,result:t}=this;t&&(this.watchers=[],Promise.resolve().then(()=>e.forEach(e=>e(t))))}}class n{constructor({hydrationData:e,metricReporter:t,maxSize:r=1/0}){this.data=void 0,this.size=void 0,this.maxSize=void 0,this.lastTouchedEntry=void 0,this.metricReporter=void 0,this.data=new Map,this.size=0,this.maxSize=r,this.metricReporter=t,e.forEach(([e,t])=>{this.set(e,t)})}serialize(){return Array.from(this.data.entries()).reduce((e,[t,r])=>{var n,i;return null!==r&&void 0!==r.result&&({data:n,error:i,deferred:r}=r.result,e.push([t,{data:n,error:i,deferred:r}])),e},[])}get(e){const{data:t,metricReporter:r}=this,n=t.get(e);if(null===n&&r.increment("frontend.niobe.mini_cache_miss",1,{}),n)return this.touch(n),n.result}set(e,t){const r=this["data"],n=r.get(e),i=null!=n?n:new s(e);i.setResult(t),this.touch(i),this.size+=i.size-(null!==(t=null==n?void 0:n.size)&&void 0!==t?t:0),this.prune()}watch(e,t){var r;const n=this["data"],i=null!==(r=n.get(e))&&void 0!==r?r:new s(e);return n.set(e,i),i.watch(t)}delete(e){var t=this.data.get(e);t&&(this.data.set(e,null),this.size-=t.size)}touch(e){e!==this.lastTouchedEntry&&(this.lastTouchedEntry=e,this.data.delete(e.key),this.data.set(e.key,e))}prune(){for(var[e,t]of this.data){if(this.size<=this.maxSize)break;null!==t&&t.isCollectable()&&this.delete(e)}}}function i(e,{key:t,fetchPolicy:r,deferrable:n,queryRef:i},s){if(i){if(i.options.deferrable&&"server-render"===s())return;const e=i["result"];return e||void 0}if("network-only"!==r&&"no-cache"!==r&&("cache-and-network"!==r||"client-hydration"===s())){if("server-render"!==s()||!n){n=e.get(t);return"server-render"===s()&&null!=n&&n.deferred?void 0:n}e.set(t,{data:void 0,deferred:!0})}}function o(e,{key:t,fetchPolicy:r},n){n.deferred||"no-cache"!==r&&(n.error||e.set(t,n))}},"7nFp":function(e,t,r){"use strict";function n(e,t){if(e.skip)return t}r.d(t,"a",function(){return n})},EG3x:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("D4yp");function i(e){var t,r=Object(n.a)();return Object.assign({},e,{context:Object.assign({},null==e?void 0:e.context,{eventId:r,queryString:Object.assign({},null==e||null===(t=e.context)||void 0===t?void 0:t.queryString,{_cb:r})})})}},FRDn:function(e,t,r){"use strict";let n;r.d(t,"a",function(){return n}),(t=n=n||{})[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"},GamM:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var s=r("rve7"),o=r("EDtc");function n(e){var{operation:t,variables:r,skip:n}=null!==(n=e.queryRef)&&void 0!==n&&n.options?null===(i=e.queryRef)||void 0===i?void 0:i.options:e,i=Object(o.g)(t),t=Object(o.h)(t)?"query":"mutation",n=Object(s.a)({operationName:i,variables:r,skip:n});return Object.assign({},e,{operationName:i,operationType:t,key:n})}},Gf7j:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("q1tI");function i(){const[,e]=Object(n.useState)({}),t=function(){const e=Object(n.useRef)(!0);return Object(n.useEffect)(()=>()=>{e.current=!1},[]),e}(),r=Object(n.useRef)(!1);return r.current=!1,{rerender:()=>{t.current&&(r.current=!0,e({}))},isRerenderScheduled:r}}},"Gmx/":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return s});var t=r("ilXw"),a=r.n(t),c=r("EDtc");function n(e){var t,r=null!==(o=e.query)&&void 0!==o?o:e.mutation,n=r&&Object(c.f)(r);if(null!==(o=e.context)&&void 0!==o&&o.skipOperationRegistry||!r||!n||a.a.get("useViaductNext"))return Object.assign({},e,{context:Object.assign({},e.context,{operationId:void 0})});var i,s,o=e,e=Object.assign({},null==o?void 0:o.extensions,{persistedQuery:{version:1,sha256Hash:n}}),r=Object(c.h)(r)&&!o.usePOSTForQuery?"GET":"POST";return"GET"==r?Object.assign({},o,{context:Object.assign({},null==o?void 0:o.context,{operationId:n,queryString:Object.assign({},null==o||null===(i=o.context)||void 0===i?void 0:i.queryString,{variables:JSON.stringify(null==o?void 0:o.variables),extensions:JSON.stringify(e)}),fetchOptions:Object.assign({},null==o||null===(s=o.context)||void 0===s?void 0:s.fetchOptions,{method:r,body:void 0})})}):Object.assign({},o,{context:Object.assign({},null==o?void 0:o.context,{operationId:n,fetchOptions:Object.assign({},null==o||null===(t=o.context)||void 0===t?void 0:t.fetchOptions,{method:r,body:JSON.stringify({operationName:o.operationName,variables:o.variables,extensions:e})})})})}function i(e,t){var r;const n=null!==(r=t.query)&&void 0!==r?r:t.mutation,i=n&&Object(c.f)(n),s=n&&Object(c.d)(n);n&&s&&i&&(r=t,r={method:(t=!s.definitions.some(c.a))&&!r.usePOSTForQuery?"GET":"POST",operation_type:t?"query":"mutation",operation_name:r.operationName,client_type:"niobe_minimalist"},e.increment("frontend.niobe.operation_registry.request",1,r))}function s(e,t,r){var n,i;if(null!==(n=r.error)&&void 0!==n&&n.graphQLErrors&&null!==(i=r.error)&&void 0!==i&&i.graphQLErrors.some(({message:e})=>"PersistedQueryNotFound"===e)){const r=null!==(i=t.query)&&void 0!==i?i:t.mutation,n=r&&Object(c.d)(r);if(r){const s=Object(c.e)(r),o={method:Object(c.h)(r)&&!t.usePOSTForQuery?"GET":"POST",operation_type:Object(c.h)(r)?"query":"mutation",operation_name:t.operationName,client_type:"niobe_minimalist"};return e.increment("frontend.niobe.operation_registry.error",1,Object.assign({},o,{error_type:"GraphQLError",error_name:"PersistedQueryNotFound"})),e.increment("frontend.niobe.operation_registry.retry_attempt",1,o),n?{skipOperationRegistry:!0}:s.then(()=>({skipOperationRegistry:!0}))}}}},JBzR:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var t=r("I9Za"),s=r.n(t),o=r("qJkm"),a=r("O5Nq"),c=r("jF57");let u;function n(e,t,r){var n;u=null!==(i=u)&&void 0!==i?i:Object(a.a)();var i=e["context"];return Object.assign({},e,{context:Object.assign({},i,{queryString:Object.assign({},null==i?void 0:i.queryString,Object.assign({locale:s.a.locale()},o.a.current().curr?{currency:o.a.current().curr}:{})),fetchOptions:Object.assign({},null==i?void 0:i.fetchOptions,{headers:Object.assign({},t,null==i?void 0:i.headers,null==i||null===(n=i.fetchOptions)||void 0===n?void 0:n.headers,e.headers,{"X-Airbnb-API-Key":c.a},{"X-CSRF-Token":u},{niobe:{"X-TRC-V3-Niobe":"1","X-Force-Short-Circuit-To-Kraken":"none"},viaduct:{"X-TRC-V3-Kraken":"1","X-Niobe-Short-Circuited":"true"},default:{}}[r],{"X-CSRF-Without-Token":"1","X-Airbnb-GraphQL-Platform-Client":"minimalist-niobe"})})})})}},"K/Jt":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r("dTSv");function s(e){return e instanceof Set}function o(e){return"function"==typeof e}function a(e,t){return e===t||typeof e==typeof t&&(Array.isArray(e)&&Array.isArray(t)?(r=e).length===(n=t).length&&r.every((e,t)=>a(r[t],n[t])):s(e)&&s(t)?function(e,t,r){if(e.size!==t.size)return!1;const n=Array.from(e),i=Array.from(t);return n.every(t=>{var e=i.findIndex(e=>r(t,e));return-1!==e&&(i.splice(e,1),!0)})}(e,t,a):Object(i.b)(e)&&Object(i.b)(t)?Object(i.a)(e,t,a):o(e)&&o(t)?String(e)===String(t):Object.is(e,t));var r,n}},Shen:function(e,t,r){"use strict";function n(e,t){var r;if(null===(r=t.context)||void 0===r||!r.skipDedupe)return e.get(t.key)||void 0}function i(e,t,r){e.set(t.key,r)}function s(e,t){e.delete(t.key)}r.d(t,"b",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return s})},TfS3:function(e,r,n){"use strict";!function(O){n.d(r,"a",function(){return t});var e=n("ilXw"),m=n.n(e),e=n("Qyje"),j=n.n(e),w=n("gCJq"),R=n("hlFt"),x=n("EDtc"),k=n("lOXG");const S=(e,t,r)=>({data:null,error:{name:e,message:e,networkError:new Error(r?`${e}. Received body: ${r}`:e),graphQLErrors:[],extraInfo:null},response:t,body:r});async function t(t,e,r,n){var i,s,o=r["operation"];if(!o)return S("No operation received by HTTP link");var a,c,c=`${null!==(a=O)&&void 0!==a&&null!==(c=a.env)&&void 0!==c&&c.NIOBE_ENDPOINT?O.env.NIOBE_ENDPOINT:"/api/v3"}/${r.operationName}`,u=Object.assign({operationName:r.operationName},null==r||null===(u=r.context)||void 0===u?void 0:u.queryString),u=m.a.get("useViaductNext")?"https://viaduct-next.d.musta.ch/v3":`${c}?${j.a.stringify(u)}`,l=null!==(d=null==r||null===(d=r.context)||void 0===d||null===(l=d.fetchOptions)||void 0===l?void 0:l.method)&&void 0!==d?d:"POST",d=Object(k.a)(c,l);let h;if(d){try{h=await d}catch(e){t.increment("frontend.niobe.recaptcha_v3.error",1,{client:"minimalist",status:String(e.statusCode),message:String(e.message)})}h&&t.increment("frontend.niobe.recaptcha_v3.append_header",1,{client:"minimalist",endpoint:c,method:l})}var f=Object.assign({"Content-Type":"application/json"},h,!m.a.get("useViaductNext")&&{"X-Airbnb-GraphQL-Platform":"web"},null==r||null===(i=r.context)||void 0===i||null===(f=i.fetchOptions)||void 0===f?void 0:f.headers),v=null!=r&&null!==(v=r.context)&&void 0!==v&&v.fetchOptions&&"body"in r.context.fetchOptions?r.context.fetchOptions.body:JSON.stringify({operationName:r.operationName,query:Object(w.print)(Object(x.d)(o)),variables:r.variables}),o=t.now(),p=e(u,Object.assign({},null==r||null===(s=r.context)||void 0===s?void 0:s.fetchOptions,{body:v,credentials:m.a.get("useViaductNext")?"omit":"include",headers:f,method:l,signal:null===(r=r.context)||void 0===r||null===(p=r.fetchOptions)||void 0===p?void 0:p.signal}));try{const O=await p,e=t.now(),g=O["headers"],m=g.has("content-length")?Number(g.get("content-length")):null,{ok:n,status:j,statusText:w}=O,R=await O.text(),x=t.now();try{const O=t.now(),g=JSON.parse(R),k=t.now(),{errors:S=[]}=g,y=function(e,t){if(300<=e){const r=new Error("Received unexpected status code "+e);r.statusCode=e,r.body=t;try{r.result=t&&JSON.parse(t)}catch(e){}return r}return null}(j,R),b={contentLength:m,networkStart:o,networkHeadersEnd:e,networkBodyEnd:x,payloadParseStart:O,payloadParseEnd:k};return Object.assign({},g,{response:{ok:n,status:j,statusText:w},metrics:b},y||S.length?{error:{name:"GraphQL errors",message:S.map(e=>e.message).join(" "),graphQLErrors:S,networkError:y,extraInfo:null}}:{})}catch(e){return S("Network error (parse): "+e.message,{ok:n,status:j,statusText:w},R)}}catch(e){return Object(R.c)(e)?{data:null,error:{extraInfo:{aborted:!0},graphQLErrors:[],message:e.message,name:e.message,networkError:null}}:S("Network error (connection): "+e.message)}}}.call(this,n("8oxB"))},ZFwt:function(e,t,r){"use strict";function n(e,t,r,{context:{networkErrorAttemptsCount:n=1,fetchOptions:i={}}={}},s){const o=s.response&&(502===s.response.status||503===s.response.status)||!s.response;if(t&&o&&n<2){e.increment("frontend.niobe.network_retry",1,{status:String(null===(s=s.response)||void 0===s?void 0:s.status),client_type:"niobe_minimalist"});const t=2*r**(1+2*n/10)*Math.random(),o=t<6e3?t:6e3;return new Promise(e=>setTimeout(e,o)).then(()=>({networkErrorAttemptsCount:n+1,fetchOptions:Object.assign({},i,{headers:Object.assign({},null==i?void 0:i.headers,{"x-retry":"true"})})}))}}r.d(t,"a",function(){return n})},dTSv:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&null!=e&&(e.constructor===Object||void 0===e.constructor)}function i(t,r,n=Object.is){const e=Object.keys(t),i=Object.keys(r),s=new Set(i);return e.length===i.length&&e.every(e=>s.has(e))&&e.every(e=>n(t[e],r[e]))}r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i})},ey24:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r("7K2a");var o=r("xH/e"),a=r("SSfp"),c=r("UGwa"),u=r("Bwtj"),l=r("LvwK"),d=r("jiVd");function n(r,e){if(Object(d.a)(e)){const n=Object(c.a)(r,{method:"airlockRetrier"}),i=Object(a.d)(e);i&&Object(a.f)(i);const s=Object(a.a)(null===(t=e.error)||void 0===t?void 0:t.graphQLErrors)||Object(a.e)(e);if(s){var t=Object(a.b)(s,r)||!1;if(!t)return n(),new Promise(t=>{Object(u.a)({airlock:s,onSuccess:()=>{var e={fetchOptions:{headers:Object(l.a)(s,r)}};!Object(o.a)(s)||s.shouldReplayRequest?t(e):t(void 0)},onError:()=>t(void 0),error:e})});Object(a.f)(t)}}}},jMCr:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("FRDn");class i{constructor({queryRef:e,client:t,stitcher:r}){this.queryRef=void 0,this.stitcher=void 0,this.client=void 0,this.memo=void 0,this.queryRef=e,this.stitcher=r,this.client=t,this.memo=new WeakMap}watchOnce(t){return this.client.watchOnce(this.queryRef,e=>{this.queryRef!==e?t(new i(Object.assign({},this,{queryRef:e}))):this.watchOnce(t)})}isLoading(){var e=this.client.readResult({queryRef:this.queryRef});return!e||!!e.deferred}isNetworkErrored(){var e,t;return Boolean(null===(e=this.getResult())||void 0===e||null===(t=e.error)||void 0===t?void 0:t.networkError)}getResult(){var e,t,r=this.client.readResult({queryRef:this.queryRef});if(null==r||null===(e=r.error)||void 0===e||null===(t=e.extraInfo)||void 0===t||!t.aborted)return null!=r?r:void 0}stitch(e){var t=this.memo.get(e);if(t)return t;var r=this.getResult();if(!r)return e;if(!this.stitcher)return e;if(!e.data)return e;var t=this.client.getOptions(this.queryRef)["variables"],t=Object.assign({variables:t},e,{error:null!==(r=r.error)&&void 0!==r?r:e.error,data:this.stitcher(e.data,{fetchMoreResult:null!==(r=null===(r=this.getResult())||void 0===r?void 0:r.data)&&void 0!==r?r:void 0,variables:t})});return this.memo.set(e,t),t}refetch(e){return new i(Object.assign({},this,{queryRef:this.client.executeFrom({queryRef:this.queryRef,options:{variables:e,fetchPolicy:"network-only"}})}))}}const a={data:void 0};class s{static fromQueryRef(e,t){return new s({parent:void 0,client:t,type:"fetch",firstPage:new i({queryRef:e,client:t}),nextPages:[]})}constructor({parent:e,firstPage:t,nextPages:r,client:n,type:i}){this.parent=void 0,this.firstPage=void 0,this.nextPages=void 0,this.type=void 0,this.client=void 0,this.memo=void 0,this.parent=e,this.firstPage=t,this.nextPages=r,this.client=n,this.type=i,this.memo=new WeakMap}pages(){return[this.firstPage].concat(this.nextPages)}watchOnce(r){const n=this.pages().map((e,t)=>e.watchOnce(e=>{n.forEach(e=>e()),r(this,new s({parent:this,firstPage:0===t?e:this.firstPage,nextPages:1<=t?this.nextPages.slice(0,t-1).concat(e).concat(this.nextPages.slice(t)):this.nextPages,client:this.client,type:this.type}))}))}isLoading(){return this.firstPage.isLoading()}async onLoaded(e){return await Promise.all(this.pages().map(e=>e.queryRef.promise)),e(this)}getNetworkStatus(){if(this.pages().some(e=>e.isNetworkErrored()))return n.a.error;if(!this.pages().some(e=>e.isLoading()))return n.a.ready;switch(this.type){case"fetch":return n.a.loading;case"refetch":return n.a.refetch;case"fetchMore":return n.a.fetchMore;case"setVariables":return n.a.setVariables;default:return n.a.ready}}getResult(){var e;const{firstPage:t,nextPages:r}=this,n=t.getResult(),i=null===(e=this.loadedAncestor())||void 0===e?void 0:e.getResult(),s=n&&r.reduce((e,t)=>t.stitch(e),n),o=null!==(e=null!=s?s:i)&&void 0!==e?e:a;return this.augmentResultFor(o)}getMemoizedResult(e){var t;return null!==(t=this.memo.get(e))&&void 0!==t?t:null===(t=this.parent)||void 0===t?void 0:t.getMemoizedResult(e)}augmentResultFor(e){const{client:t,firstPage:r}=this,n=this.getMemoizedResult(e);if(n&&n.networkStatus===this.getNetworkStatus())return n;var i=Object.assign({},e,{data:null!==(i=e.data)&&void 0!==i?i:void 0,loading:this.isLoading(),stale:!1,variables:t.getOptions(r.queryRef).variables,queryRef:r.queryRef,networkStatus:this.getNetworkStatus()});return this.memo.set(e,i),i}loadedAncestor(){if(this.parent)return this.parent.isLoading()?this.parent.loadedAncestor():this.parent}replaceWith(e){return new s(Object.assign({},this,{parent:this,firstPage:new i({queryRef:e,client:this.client}),nextPages:[],type:"setVariables"}))}refetch(e){return new s(Object.assign({},this,{parent:this,firstPage:this.firstPage.refetch(e),nextPages:[],type:"refetch"}))}addPage(e,t){t=new i({queryRef:this.client.executeFrom({queryRef:this.firstPage.queryRef,options:{variables:e}}),stitcher:t,client:this.client});return{newQueryAggregate:new s(Object.assign({},this,{parent:this,firstPage:this.firstPage,nextPages:[...this.nextPages,t],type:"fetchMore"})),newQueryPage:t}}}},lOXG:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"a",function(){return u});var n=r("mVwX"),i=r("ifln"),s=r("7Aoz"),o=r("Yg/F");const a=e=>{var{extensions:{errorClass:t="",errorType:r="",response:{statusCode:e=0}={}}={}}=e;return"ValidationRequiredException"===t||"validation_required"===r||440===e};function c(r,e){var t=null===(e=e.error)||void 0===e||null===(t=e.graphQLErrors)||void 0===t?void 0:t.find(a);if(t){t=(e=>{if(void 0===e)return"unknown";e=e[0];return"number"==typeof e?String(e):e})(t.path);return Object(n.getRecaptchaV3TokenHeader)({action:t,timeoutInMs:5e3,maxRetries:5,shouldThrow:!0}).then(e=>{var t=null===(t=r.context)||void 0===t?void 0:t.fetchOptions;return{fetchOptions:Object.assign({},t,{headers:Object.assign({},null==t?void 0:t.headers,e)})}}).catch(()=>{Object(o.a)()})}}function u(e,t){if(!Object(s.a)())return null;const r=Object(i.maybeGetRecaptchaV3TokenHeader)(e,t);return r?r():null}},niQI:function(e,t,r){"use strict";r.r(t),r.d(t,"NiobeMinimalistClient",function(){return x});var n,u=r("q1tI"),i=(r("QZac"),r("uyjd")),s=r("QqwG"),o=r("8SGJ"),a=r("SchF"),c=r("7nFp"),l=r("GamM"),f=r("+oWa"),d=r("hUEr"),h=r("Shen"),v=r("Gmx/"),p=r("ey24"),g=r("ZFwt"),y=r("JBzR"),b=r("EG3x"),O=r("lOXG"),m=r("TfS3"),j=r("Gf7j"),w=r("jMCr"),R=r("oema");for(n in R)["NiobeMinimalistClient","default"].indexOf(n)<0&&function(e){r.d(t,e,function(){return R[e]})}(n);class x{constructor({data:e=[],fetch:t,metricReporter:r,jitneyLogger:n,cacheMaxSize:i=8388608,cache:s=new f.a({hydrationData:e,maxSize:i,metricReporter:r}),inflight:o=new Map,retryOnNetworkError:a=!0,retryDelay:c=300,extraHeaders:u={},disablePrepare:l=!1,getRenderingState:d,graphQLGateway:h="niobe"}){this.type="minimalist",this.cache=void 0,this.inflight=void 0,this.metricReporter=void 0,this.jitneyLogger=void 0,this.fetch=void 0,this.getRenderingState=void 0,this.retryOnNetworkError=void 0,this.retryDelay=void 0,this.extraHeaders=void 0,this.disablePrepare=void 0,this.skipResult=void 0,this.graphQLGateway=void 0,this.cache=s,this.inflight=o,this.retryOnNetworkError=a,this.retryDelay=c,this.getRenderingState=d,this.metricReporter=r,this.jitneyLogger=n,this.extraHeaders=u,this.disablePrepare=l,this.fetch=t,this.skipResult={data:void 0,skip:!0},this.metricReporter.increment("niobe_client_type",1,{clientType:"minimalist"}),this.graphQLGateway=h}preloadQuery(e){return this.execute(Object(s.b)(e))}async query(e){var t=await this.execute(Object(s.b)(e)).promise;if(null!==(e=t.error)&&void 0!==e&&e.networkError)throw t.error.networkError;return t}readQuery(e){var t;return e.queryRef&&!e.queryRef.options.deferrable?null!==(t=null===(t=e.queryRef.result)||void 0===t?void 0:t.data)&&void 0!==t?t:null:null!==(e=null===(e=this.readResult(Object(s.b)(e)))||void 0===e?void 0:e.data)&&void 0!==e?e:null}writeQuery(e){var t=this.transformOptions(Object(s.b)(e)),r={data:e.data},e=o.a.for({options:Object(s.b)(e),promise:Promise.resolve(r),result:r,clientType:this})["promise"];this.processResult({transformedOptions:t,result:r,promise:e,source:"manual"})}async mutate(e){var t,r,n,e=await this.execute(Object(s.a)(e)).promise;if(e.error){if(e.error.networkError)throw null===(t=e.error)||void 0===t?void 0:t.networkError;if(0<(null===(t=e.error)||void 0===t||null===(r=t.graphQLErrors)||void 0===r?void 0:r.length)){const i=new Error(null===(r=e.error)||void 0===r||null===(n=r.graphQLErrors)||void 0===n?void 0:n.map(e=>e.message).join("\n"));throw i.graphQLErrors=e.error.graphQLErrors,i}}return e}extract(){return this.cache.serialize()}updateCache(e){e.forEach(([e,t])=>{Object(f.c)(this.cache,{key:e},t)})}readResult(e){var{queryRef:{clientType:t}={}}=e;if(t&&t!==this&&Object(a.k)(Object(a.h)(this,t)),e.queryRef)return!e.queryRef.deferred&&null!==(t=null===(t=e.queryRef)||void 0===t?void 0:t.result)&&void 0!==t?t:void 0;var e=this.transformOptions(e),[,e]=this.syncResolve(e)||[];return e}getOptions(e){return e.options}watchOnce(e,t){const r=this.getOptions(e);return this.cache.watch(this.transformOptions(r).key,e=>{t(o.a.for({promise:Promise.resolve(e),result:e,clientType:this,options:r,deferred:e.deferred}))})}executeFrom({queryRef:e,options:t}){e=this.getOptions(e);return this.execute(Object.assign({},e,t,{variables:Object.assign({},e.variables,t.variables)}))}transformOptions(e){var{metricReporter:{now:t}}=this,t=Object(d.a)(e,t),t=Object(l.a)(t),t=Object(y.a)(t,this.extraHeaders,this.graphQLGateway),t=Object(v.b)(t);return Object(b.a)(t)}syncResolve(e){var t=this["cache"],t=Object(f.b)(t,e,this.getRenderingState);if(t)return["cache",t];e=Object(c.a)(e,this.skipResult);return e?["skip",e]:void 0}asyncResolve(e,r){const{inflight:t,fetch:n,metricReporter:i,graphQLGateway:s}=this,o=t=>Object(m.a)(i,n,t,s).then(e=>this.retry(r,t,e,o)),a=Object(h.b)(t,e);return a?["network-dedupe",a]:["network",o(e)]}retry(r,e,n,i){var t;if(null!==(c=n.error)&&void 0!==c&&null!==(t=c.extraInfo)&&void 0!==t&&t.aborted)return n;const{context:{attemptsCount:s=2}}=e;if(4<=s)return n;var{metricReporter:o,retryOnNetworkError:a,retryDelay:c}=this,e=null!==(t=null!==(t=null!==(t=Object(O.b)(e,n))&&void 0!==t?t:Object(p.a)(o,n))&&void 0!==t?t:Object(v.a)(o,e,n))&&void 0!==t?t:Object(g.a)(o,a,c,e,n);return e?Promise.resolve(e).then(e=>{if(!e)return n;const t=this.transformOptions(Object.assign({},r,{context:Object.assign({},r.context,{skipDedupe:!0},e,{attemptsCount:s+1})}));return i(t).then(e=>this.retry(r,t,e,i))}):n}processResult({transformedOptions:r,result:t,promise:n,source:i}){const{cache:s,inflight:o,metricReporter:a,jitneyLogger:c}=this,u=requestIdleCallback;[e=>Object(h.c)(o,r,e)].forEach(e=>e(n));const e=[e=>Object(f.c)(s,r,e),()=>Object(h.a)(o,r),e=>{const t=a.now();u(()=>Object(d.c)(a,c,r,e,i,t))},()=>u(()=>Object(v.c)(a,r))];t?e.forEach(e=>e(t)):n.then(t=>e.forEach(e=>e(t)))}execute(i){if(i.queryRef)return i.queryRef;const s=this.transformOptions(i),[e,t]=(()=>{var e=this.syncResolve(s);if(e){const[s,t]=e;return[s,o.a.for({promise:Promise.resolve(t),result:t,clientType:this,options:i,deferred:t.deferred})]}const[t,r]=this.asyncResolve(s,i),n="server-render"===this.getRenderingState()&&"deferrable"in i&&i.deferrable;return[t,o.a.for({promise:r,clientType:this,options:i,deferred:n})]})();return this.processResult({transformedOptions:s,result:t.result||void 0,promise:t.promise,source:e}),t}useClientSideQuery(e,t){const r=Object(i.a)(()=>t,[t]),n=Object(u.useMemo)(()=>this.preloadQuery(Object.assign({query:e},r)),[r,e,this]);return this.usePreloadedQuery(e,n)}useQueryAggregate(e){const r=Object(u.useRef)(),t=Object(u.useRef)(void 0),{isRerenderScheduled:n,rerender:i}=Object(j.a)(),s=e=>{n.current||(e=e,t.current===e.getResult())||(n.current=!0,i())},o=e=>{(r.current=e).onLoaded(s),e.watchOnce((e,t)=>{e===r.current&&o(t)}),s(e)};if(!r.current){const r=w.a.fromQueryRef(e,this);t.current=r.getResult(),o(r)}const a=Object(u.useRef)(e);if(e!==a.current){a.current=e;const u=r.current.replaceWith(e);t.current=u.getResult(),o(u)}e=r.current.getResult();return t.current=e,{queryAggregateRef:r,setQueryAggregate:o,result:e}}usePreloadedQuery(e,r,t,n){const{queryAggregateRef:i,setQueryAggregate:s,result:o}=this.useQueryAggregate(r),a=Object(u.useCallback)(function(e){const t=i.current.refetch(null!=e?e:r.options.variables);return s(t),t.onLoaded(()=>t.getResult())},[i]),c=Object(u.useCallback)(async function({variables:e,updateQuery:t}){const{newQueryAggregate:r,newQueryPage:n}=i.current.addPage(e,t);return s(r),await n.queryRef.promise,n.getResult()},[i]);return Object(u.useMemo)(()=>Object.assign({},o,{refetch:a,fetchMore:c,client:this}),[c,a,o])}useMutation(s,o){const[e,a]=Object(u.useState)({data:void 0,error:void 0,called:!1,loading:!1});return[async e=>{a(e=>Object.assign({},e,{loading:!0}));try{var t;const r=await this.mutate(Object.assign({mutation:s},o,e)),n=(null==e?void 0:e.update)||(null==o?void 0:o.update);n&&n(this,r),a(Object.assign({},r,{data:null!==(t=r.data)&&void 0!==t?t:void 0,loading:!1,called:!0}));const i=(null==e?void 0:e.onCompleted)||(null==o?void 0:o.onCompleted);return i&&i((null==r?void 0:r.data)||{}),r}catch(e){throw a({data:void 0,loading:!1,called:!0,error:e}),e}},e]}redirect(e){window.location.href=e}}t.default=x},oema:function(e,t){},uyjd:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("q1tI"),i=r("K/Jt");function s(e,t){const r=Object(n.useRef)();return r.current&&Object(i.a)(t,r.current.key)||(r.current={key:t,value:e()}),r.current.value}}}]);
