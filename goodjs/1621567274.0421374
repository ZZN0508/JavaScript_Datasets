import{a1 as e,j as t,D as r,B as n,t as o,S as i,a2 as a,e as s,F as l,a3 as d,d as c,g as u,U as h,V as f,a4 as p,C as m,a5 as b}from"./common-chunks.es.f216f170.js";!function(e){if(!e.fetch){l.prototype.append=function(e,t){e=a(e),t=s(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){var t=this.map[a(e)];return t?t[0]:null},l.prototype.getAll=function(e){return this.map[a(e)]||[]},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=[s(t)]},l.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach((function(r){this.map[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)};var t="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,n="ArrayBuffer"in e,o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var i=[301,302,303,307,308];b.redirect=function(e,t){if(-1===i.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=f,e.Response=b,e.fetch=function(e,r){return new Promise((function(n,o){var i;i=f.prototype.isPrototypeOf(e)&&!r?e:new f(e,r);var a=new XMLHttpRequest;a.onload=function(){var e=1223===a.status?204:a.status;if(e<100||e>599)o(new TypeError("Network request failed"));else{var t={status:e,statusText:a.statusText,headers:m(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;n(new b(r,t))}},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&t&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),c(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(t&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!n||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},t?(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e,t,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,(t=new FileReader).readAsText(e),c(t);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=d(this);return e||Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e,t){var r,n,i=(t=t||{}).body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),o.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function m(e){var t=new l;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach((function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)})),t}function b(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof l?t.headers:new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var y=Object.freeze({__proto__:null});function g(e,t){var r={};if(e)for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(r[t?n.toLowerCase():n]=e[n]);return r}var v={DELETE:!0,PATCH:!0,POST:!0,PUT:!0};var w={CONNECT:!0,DELETE:!0,GET:!0,OPTIONS:!0,PATCH:!0,POST:!0};function T(e,t){var r=new Error(e);return r.response=t,r.status=t.status,r}function k(e,t,r){e.hasOwnProperty(t)||(e[t]=r)}function E(){}function B(e,t){var r=this.timings[0],n=this.lastTiming();this.endTime=n.end=this.getTime(),this.logger(e,{state:t.state||"end",msg:t.msg,index:this.index,url:this.url,receiveTime:n.received-n.start,translateTime:n.translated-n.received,time:n.end-n.start,totalTime:n.end-r.start,retry:this.retry,maxRetries:this.options.maxRetries,status:t.status},{request:this,httpReq:this.httpReq,response:t.response})}function S(e){this.options=e,this.JWT=!1,this._requestIndex=0,this.setListener(),this.setFetch(),this.setGenerateCorrelationID(),this.setGetJWT();this._translate=e.translate||function(e){return e.json()}}var R=function(e){return e.json().then((function(e){return e.redirectUrl&&(window.location.href=e.redirectUrl),Promise.resolve()}))},_={enablePerimeterX:!1,perimeterXHandler:R};function x(){return(new Date).getTime()}S.prototype.fetchWrapper=function(e){var t,r,n,o,i=this,a=e._options;if(this.options.isClientFetch){var s=e._fetch;a.timeout&&(r=s,n=a.timeout,s=function(){var e=arguments,t=this;return new Promise((function(i,a){r.apply(t,e).then((function(e){o&&(clearTimeout(o),i(e))})).catch((function(e){o&&(clearTimeout(o),a(e))})),o=setTimeout((function(){o=void 0,i({status:408,message:"electrode-fetch: request timed out"})}),n)}))}),(void 0!==a.enablePerimeterX?!0===a.enablePerimeterX:!0===_.enablePerimeterX)&&(s=function(e,t){return function(){return e.apply(this,arguments).then((function(e){if(e.status&&408===e.status)return e;var r=e.headers.get("content-type");if(e.status===S.PERIMETERX_HTTP_STATUS&&"string"==typeof r&&r.includes("application/json")){e._perimeterXTriggered=!0;var n=e.clone();return t.perimeterXHandler?t.perimeterXHandler(n).then((function(){return e})).catch((function(t){throw T(t,e)})):_.perimeterXHandler(n).then((function(){return e})).catch((function(t){throw T(t,e)}))}return e}))}}(s,a)),t=s(e.url,e.options)}else t=e._fetch(e.url,e.options);return t.then((function(t){var r=e.lastTiming();r.received=e.getTime();var n=function(t){return r.translated=e.getTime(),t};if(i.options.manageJwt&&t.headers){var o=t.headers.get("x-csrf-jwt");null!=o&&(i.JWT=o)}if(t.status>=200&&t.status<300){if(a.rawResponseOnly)return t;var s=function(e,t){var r=function(r){throw T("electrode-fetch: payload from URL ".concat(e.url," caused translate exception: ").concat(r.message),t)};try{var n=e.translate(t);return n.catch&&(n=n.catch(r)),n}catch(e){return r(e)}}(e,t);return s.then?s.then(n):n(s)}if(!a.noRetry&&((401===t.status||!0===t._perimeterXTriggered)&&e.retry<1||a.maxRetries>0&&e.retry<a.maxRetries))return 401===t.status&&(e.options.headers["x-csrf-jwt"]=t.headers.get("x-csrf-jwt")),e.logFetchEnd("warn",{state:"retry",status:t.status,response:t}),e.retry++,e.timings.push({start:e.getTime()}),i.fetchWrapper(e);throw T('electrode-fetch: URL "'.concat(e.url,'" returned bad status ').concat(t.status),t)}))},S.prototype.makeFetchRequest=function(e,t,r){var n=(t=t||{}).getTime||x,o=this._requestIndex++,i=n();return{url:e,_options:t,_fetch:t.fetch||this._fetch,retry:0,index:o,translate:r||this._translate,logFetchEnd:B,logger:t.disableAnalytics?E:this._listener,getTime:n,startTime:i,timings:[{start:i}],lastTiming:function(){return this.timings[this.timings.length-1]},fetchInstance:this}},S.prototype.fetch=function(e,t,r){var n=this.makeFetchRequest(e,t,r);return this.makeFetchOptions(n),this.fetchInternal(n)},S.prototype.fetchJSON=function(e,t,r){var n=this.makeFetchRequest(e,t,r);return this.makeFetchOptions(n,"application/json"),this.fetchInternal(n)},S.prototype.makeFetchOptions=function(e,t){var r=e.url,n=g(e._options);k(n,"credentials","same-origin");var o,i=g(n.headers,!0);if(n.headers=i,!n.omitCorrelationId&&this._generateCorrelationID&&k(i,"wm_qos.correlation_id",this._generateCorrelationID(r,n)),t&&!n.omitContentType&&(o=n.method,w[o&&o.toUpperCase()]&&k(i,"accept",t),function(e){return v[e&&e.toUpperCase()]}(n.method)&&k(i,"content-type",t)),!n.omitCsrfJwt&&!i.hasOwnProperty("x-csrf-jwt")){var a=this.JWT||this._getGlobalJWT();a&&(i["x-csrf-jwt"]=a)}return e.options=n,n},S.prototype.fetchInternal=function(e){return e.logger("info",{state:"start",msg:"start",index:e.index,url:e.url},{request:e,httpReq:e.httpReq}),this.fetchWrapper(e).then((function(t){return e.logFetchEnd("info",{status:t.status,response:t}),t})).catch((function(t){throw e.logFetchEnd("error",{state:"failed",msg:"fetch_fail - ".concat(t.message),status:t.status,response:t.response}),t}))},S.prototype.setListener=function(e){this._listener=e||this.options.listener||E},S.prototype.setFetch=function(e){this._fetch=e||this.options.fetch},S.prototype.setGenerateCorrelationID=function(e){this._generateCorrelationID=e||this.options.generateCorrelationID},S.prototype.setGetJWT=function(e){this._getGlobalJWT=e||this.options.getGlobalJWT||E},S.prototype.config=function(e){(_=Object.assign(_,e)).perimeterXHandler||(_.perimeterXHandler=R)},S.PERIMETERX_HTTP_STATUS=412;var F=S;e(y);var M=new F({manageJwt:!0,keepAlive:!1,fetch:self.fetch.bind(self),isClientFetch:!0,getGlobalJWT:function(){return window._wml?window._wml.jwt:null}}),C={instance:M,config:M.config.bind(M),fetch:M.fetch.bind(M),fetchJSON:M.fetchJSON.bind(M),setListener:M.setListener.bind(M),setFetch:M.setFetch.bind(M),setGenerateCorrelationID:M.setGenerateCorrelationID.bind(M),setGetJWT:M.setGetJWT.bind(M)},I=function(){var e={feedbackText:"",feedbackRating:"",beacon:t("Feedback"),render:function(){e.dom=r.create(),e.getElements(),e.bodyScroll=n.getDefaultInstance(),e.screenWidth=e.dom.getWindow().innerWidth,e.isMobile="small"===o.getBreakpoint(e.screenWidth)||"medium"===o.getBreakpoint(e.screenWidth)||!1},getElements:function(){e.feedbackBubble=e.dom.getById("hf-feedback-bubble-fixed-link"),e.modal=e.dom.getById("hf-feedback-bubble-modal"),e.feedbackBubble&&e.modal&&(e.cancelButton=e.dom.getById("hf-feedback-bubble-cancel"),e.closeButton=e.dom.getById("hf-feedback-bubble-close-btn"),e.label=e.dom.getById("hf-feedback-bubble-textarea-lbl"),e.textAreaHolder=e.dom.getById("hf-fb-textarea-holder"),e.ratingScale=e.dom.getById("hf-feedback-bubble-rating-scale"),e.submitButton=e.dom.getById("hf-feedback-bubble-submit"),e.failureModal=e.dom.getById("hf-feedback-failure-modal"),e.failureModalClose=e.dom.getById("hf-feedback-failure-close-btn"),e.failureModalOK=e.dom.getById("hf-feedback-failure-modal-ok"),e.tabText=e.dom.getById("hf-feedback-tab-text"),e.feedbackModalHelp=e.dom.querySelector("#hf-feedback-disclaimer a"),e.successSnackBar=e.dom.getById("feedbackSuccessSnackBar"),e.feedbackFooterLink=e.dom.getById("hf-feedback-fixed-link"),e.ratingLabels=e.ratingScale.querySelectorAll("button"),e.textArea=e.textAreaHolder.querySelector("textarea"),e.feedbackBubble.addEventListener("click",e.showModal),e.feedbackFooterLink&&e.feedbackFooterLink.addEventListener("click",e.showModal),i.get("isFeedbackTabCollapsed")&&e.tabText&&e.tabText.remove(),e.feedbackModalHelp&&e.feedbackModalHelp.addEventListener("click",e.handleFeedbackModalHelpClick))},handleFeedbackModalHelpClick:function(t){t.preventDefault();var r=t.target.href;e.beacon.tagAction(a()),window.location.href=r},showModal:function(t){t.stopPropagation(),e.removeEscHandler=s(e.modal,e.hideModal),e.bodyScroll.lock(),e.setupModalHandlers(),e.modal.removeAttribute("hidden"),e.focusTrap=l.create(e.modal.querySelector("[role=dialog]")),e.removeCloseOnDialogModal=d(e.hideModal)},setupModalHandlers:function(){e.ratingScale&&e.ratingScale.hasChildNodes()&&(e.ratingScale.addEventListener("click",e.handleRatingSelect),e.ratingScale.addEventListener("mouseover",e.handleRatingPreview),e.ratingScale.addEventListener("mouseout",e.handleResetPreview)),e.cancelButton&&e.cancelButton.addEventListener("click",e.hideModal),e.closeButton&&e.closeButton.addEventListener("click",e.hideModal),e.submitButton&&e.submitButton.addEventListener("click",e.handleSubmit)},hideModal:function(){e.focusTrap(),e.removeEscHandler(),e.bodyScroll.unlock(),e.removeModalHandlers(),e.modal.setAttribute("hidden","hidden"),e.feedbackBubble.focus(),e.resetForm(),!i.get("isFeedbackTabCollapsed")&&e.tabText&&(i.set("isFeedbackTabCollapsed",!0),e.tabText.remove()),e.removeCloseOnDialogModal()},removeModalHandlers:function(){e.cancelButton.removeEventListener("click",e.hideModal),e.closeButton.removeEventListener("click",e.hideModal),e.ratingScale.removeEventListener("change",e.handleRatingSelect),e.ratingScale.removeEventListener("mouseover",e.handleRatingPreview),e.ratingScale.removeEventListener("mouseout",e.handleResetPreview),e.submitButton.removeEventListener("click",e.handleSubmit)},resetButtonSelectionAria:function(){e.ratingLabels.forEach((function(e){c(e,{"aria-pressed":!1})}))},resetRatingScale:function(){e.resetButtonSelectionAria(),e.feedbackRating=""},handleRatingSelect:function(t){var r=t.target;r&&r.value&&(e.feedbackRating=r.value,e.selectRating(r.value),e.resetButtonSelectionAria(),c(r,{"aria-pressed":!0}),e.submitButton.removeAttribute("disabled"))},resetForm:function(){e.resetRatingScale(),e.resetRating(),e.textArea&&(e.textArea.value="")},handleSubmit:function(t){t.preventDefault();var r=u(h,"ccm.header-footer-app.feedbackApi.fixedFeedbackSubmitUrl","/customer-survey/submit");if(null!==(r=f(r))){var n={payload:{comment:e.textArea.value,context:p("RightRail"),pageType:"globalpage",submitDate:new Date,survey:{"How was your experience with this page?":e.feedbackRating},surveyId:"3653b924-5a52-4c45-98c7-d7ed5fe2a5af"}},o=m.get("vtc");o&&""!==o&&(n.payload.visitorId=o),C.fetchJSON(r,{enablePerimeterX:b(),statusCodeFlag:!0,method:"POST",format:"json",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}).then((function(){e.showSuccessSnackBar()})).catch((function(t){t&&t.response&&412===t.response.status||e.showFailureModal()})),e.hideModal()}else e.handleSubmitError()},showSuccessSnackBar:function(){var t=u(h,"ccm.header-footer-app.feedback.feedbackSnackbarDuration",3e3);e.dom.removeClass(e.successSnackBar,"visibilityHidden"),e.dom.removeClass(e.successSnackBar,"displayHidden"),setTimeout((function(){e.dom.addClass(e.successSnackBar,"visibilityHidden"),e.dom.addClass(e.successSnackBar,"displayHidden")}),t)},showFailureModal:function(){e.removeEscHandler=s(e.failureModal,e.hideFailureModal),e.bodyScroll.lock(),e.failureModal.removeAttribute("hidden"),e.failureModalFocusTrap=l.create(e.failureModal.querySelector("[role=dialog]")),e.failureModalClose&&e.failureModalClose.addEventListener("click",e.hideFailureModal),e.failureModalOK&&e.failureModalOK.addEventListener("click",e.hideFailureModal),e.removeCloseOnDialogModal=d(e.hideFailureModal)},hideFailureModal:function(t){t.preventDefault(),e.removeEscHandler(),e.bodyScroll.unlock(),e.failureModal.setAttribute("hidden","hidden"),e.feedbackBubble.focus(),e.failureModalClose.removeEventListener("click",e.hideFailureModal),e.failureModalOK.removeEventListener("click",e.hideFailureModal),"function"==typeof e.failureModalFocusTrap&&e.failureModalFocusTrap(),e.removeCloseOnDialogModal()},resetRating:function(){c(e.submitButton,{disabled:"disabled"}),e.initStarRatingView(0)},selectRating:function(t){t&&e.initStarRatingView(t)},handleRatingPreview:function(t){var r=t.target?t.target.value:"";!r||e.feedbackRating>0||e.initStarRatingView(r)},initStarRatingView:function(t){e.ratingLabels.forEach((function(r,n){0===t||n>t-1?(e.dom.addClass(r,"unselected"),e.dom.removeClass(r,"selected")):(e.dom.addClass(r,"selected"),e.dom.removeClass(r,"unselected"))}))},handleResetPreview:function(){e.feedbackRating||e.resetRating()}};return e};export{I as F};