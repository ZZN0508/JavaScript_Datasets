var m=this||self,w=function(t,e){t=t.split(".");var i,n=m;t[0]in n||void 0===n.execScript||n.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=e},x=function(t,o){function e(){}e.prototype=o.prototype,t.A=o.prototype,t.prototype=new e,(t.prototype.constructor=t).v=function(t,e,i){for(var n=Array(arguments.length-2),r=2;r<arguments.length;r++)n[r-2]=arguments[r];return o.prototype[e].apply(t,n)}};function y(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,y):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}x(y,Error),y.prototype.name="CustomError";var z=function(t,e){for(var i="",n=(t=t.split("%s")).length-1,r=0;r<n;r++)i+=t[r]+(r<e.length?e[r]:"%s");y.call(this,i+t[n])};x(z,y),z.prototype.name="AssertionError";var D,B=function(t,e,i){if(t)return t;var n,r="Assertion failed";throw e&&(r+=": "+e,n=Array.prototype.slice.call(arguments,2)),new z(""+r,n||[])},C=Array.prototype.forEach?function(t,e){B(null!=t.length),Array.prototype.forEach.call(t,e,void 0)}:function(t,e){for(var i=t.length,n="string"==typeof t?t.split(""):t,r=0;r<i;r++)r in n&&e.call(void 0,n[r],r,t)};t:{var F=m.navigator;if(F){var G=F.userAgent;if(G){D=G;break t}}D=""}var H=function(t){return-1!=D.indexOf(t)},aa=-1!=D.toLowerCase().indexOf("webkit")&&!H("Edge")&&H("Mobile");try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ba=H("Safari")&&!((H("Chrome")||H("CriOS"))&&!H("Edge")||H("Coast")||H("Opera")||H("Edge")||H("Edg/")||H("OPR")||H("Firefox")||H("FxiOS")||H("Silk")||H("Android"))&&!(H("iPhone")&&!H("iPod")&&!H("iPad")||H("iPad")||H("iPod")),K=function(t){var e,i,n=window;aa&&ba&&n?(n.focus(),e=0,i=null,i=n.setInterval(function(){t.closed||5==e?(n.clearInterval(i),I(t)):(t.close(),e++)},150)):(t.close(),I(t))},I=function(t){if(!t.closed&&t.document&&t.document.body)if(t=t.document.body,B(null!=t,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in t)t.textContent="Please close this window.";else if(3==t.nodeType)t.data="Please close this window.";else if(t.firstChild&&3==t.firstChild.nodeType){for(;t.lastChild!=t.firstChild;)t.removeChild(B(t.lastChild));t.firstChild.data="Please close this window."}else{for(var e;e=t.firstChild;)t.removeChild(e);B(t,"Node cannot be null or undefined."),t.appendChild((9==t.nodeType?t:t.ownerDocument||t.document).createTextNode("Please close this window."))}};function ca(){function t(){u[0]=1732584193,u[1]=4023233417,u[2]=2562383102,u[3]=271733878,u[4]=3285377520,s=a=0}function o(t){for(var e=c,i=0;i<64;i+=4)e[i/4]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3];for(i=16;i<80;i++)t=e[i-3]^e[i-8]^e[i-14]^e[i-16],e[i]=4294967295&(t<<1|t>>>31);t=u[0];for(var n=u[1],r=u[2],o=u[3],a=u[4],i=0;i<80;i++){var s=i<40?i<20?(l=o^n&(r^o),1518500249):(l=n^r^o,1859775393):i<60?(l=n&r|o&(n|r),2400959708):(l=n^r^o,3395469782),l=(4294967295&(t<<5|t>>>27))+l+a+s+e[i]&4294967295,a=o,o=r,r=4294967295&(n<<30|n>>>2),n=t;t=l}u[0]=u[0]+t&4294967295,u[1]=u[1]+n&4294967295,u[2]=u[2]+r&4294967295,u[3]=u[3]+o&4294967295,u[4]=u[4]+a&4294967295}function r(t,e){if("string"==typeof t){for(var i=[],n=0,r=(t=unescape(encodeURIComponent(t))).length;n<r;++n)i.push(t.charCodeAt(n));t=i}if(e=e||t.length,(i=0)==a)for(;i+64<e;)o(t.slice(i,i+64)),i+=64,s+=64;for(;i<e;)if(l[a++]=t[i++],s++,64==a)for(a=0,o(l);i+64<e;)o(t.slice(i,i+64)),i+=64,s+=64}function n(){var t=[],e=8*s;r(h,a<56?56-a:64-(a-56));for(var i=63;56<=i;i--)l[i]=255&e,e>>>=8;for(o(l),i=e=0;i<5;i++)for(var n=24;0<=n;n-=8)t[e++]=u[i]>>n&255;return t}for(var a,s,u=[],l=[],c=[],h=[128],e=1;e<64;++e)h[e]=0;return t(),{reset:t,update:r,digest:n,digestString:function(){for(var t=n(),e="",i=0;i<t.length;i++)e+="0123456789ABCDEF".charAt(Math.floor(t[i]/16))+"0123456789ABCDEF".charAt(t[i]%16);return e}}}var da=function(t,e,i){var n=[];if(1==(Array.isArray(null)?2:1))return n=[e,t],C(i,function(t){n.push(t)}),L(n.join(" "));var r=[],o=[];C(null,function(t){o.push(t.key),r.push(t.value)});var a=Math.floor((new Date).getTime()/1e3),n=0==r.length?[a,e,t]:[r.join(":"),a,e,t];return C(i,function(t){n.push(t)}),a=[a,t=L(n.join(" "))],0==o.length||a.push(o.join("")),a.join("_")},L=function(t){var e=ca();return e.update(t),e.digestString().toLowerCase()},M=function(t){for(var e=[],i=0,n=(t=t||[]).length;i<n;++i){var r=String(t[i]||"");r&&e.push(r)}if(e.length<2)return null;if(t=e[0],(i=gadgets.rpc.getOrigin(e[1]))!==e[1])return null;if(e=e.slice(2),i&&t){if(r=i){if(0==(r=(r=r.split("#")[0].split("?")[0]).toLowerCase()).indexOf("//")&&(r=window.location.protocol+r),-1!=(n=(i=(r=!/^[\w\-]*:\/\//.test(r)?window.location.href:r).substring(r.indexOf("://")+3)).indexOf("/"))&&(i=i.substring(0,n)),!(n=r.substring(0,r.indexOf("://"))))throw Error("URI is missing protocol: "+r);if("http"!==n&&"https"!==n&&"chrome-extension"!==n&&"moz-extension"!==n&&"file"!==n&&"android-app"!==n&&"chrome-search"!==n&&"chrome-untrusted"!==n&&"chrome"!==n&&"app"!==n&&"devtools"!==n)throw Error("Invalid URI scheme in origin: "+n);var o,r="",a=i.indexOf(":");-1!=a&&(o=i.substring(a+1),i=i.substring(0,a),("http"===n&&"80"!==o||"https"===n&&"443"!==o)&&(r=":"+o)),i=n+"://"+i+r}else i="";t=["session_state",da(i,t,e||[])].join(" ")}else t=null;return(t=t||"")&&t.substr(14)||null},N=function(t,e,i){this.o=String(t||""),this.j=String(e||""),this.h=String(i||""),this.g={},this.s=this.u=this.l=this.m="",this.i=null};N.prototype.evaluate=function(){var t={},e="";try{e=String(document.cookie||"")}catch(t){}for(var i=0,n=(e=e.split("; ").join(";").split(";")).length;i<n;++i){var r=e[i],o=r.indexOf("=");-1!=o?t[r.substr(0,o)]=r.substr(o+1):t[r]=null}this.g=t,(this.g.SAPISID||this.g.APISID||this.g["__Secure-3PAPISID"]||this.g.SID)&&(this.j=this.j.split(".")[0].split("@")[0],(this.l=O(this,this.o))?(t=gadgets.rpc.getOrigin(String(window.location.href)),(this.m=O(this,t))?(1!=(i=(e=String(this.g.LSOLH||"").split(":")).length)&&4!=i||(this.u=e[0]),3!=i&&4!=i||(t=String(e[i-3]||""),e=String(e[i-1]||""),i=this.m,(i=t?(n=[t],i&&n.push(i),L(n.join(" ")).substr(0,4)):null)===e&&(this.s=t)),!this.h||-1!=(t=this.h.indexOf("."))&&(t=this.h.substr(0,t)||"",this.h=t+"."+M([this.l,this.o,this.j,this.u,this.s,t]).substr(0,4)),t=M([this.l,this.o,this.j,this.h]),this.h&&(t=t+"."+this.h),this.i=t):this.i=""):this.i="")};var O=function(t,e){return e=!(e=String(t.g[0==e.indexOf("https://")?"SAPISID":"APISID"]||""))?String(t.g["__Secure-3PAPISID"]||""):e};N.prototype.getVersionInfo=function(t){var e=parseInt(t,10);return String(e)==t&&0<=e&&(t=this.s)&&!((t=t.split("|")).length<=e)&&t[e]||null};var P=function(t,e,i){return(t=new N(t,e,i)).evaluate(),t},R=function(t,e,i){i=i||Q(this);var n,r=null;if(!t||-1!=(n=(t=String(t)).indexOf("."))&&(r=t.substr(n+1)),e=P(i,e,r).i,null==t||""==t)t=e==t;else if(null==e||e.length!=t.length)t=!1;else{for(r=i=0,n=t.length;r<n;++r)i|=t.charCodeAt(r)^e.charCodeAt(r);t=0==i}return t},S=function(t,e,i){if(i=i||Q(this),i=P(i),String(t)!=i.i)throw Error("Unauthorized request");return i.getVersionInfo(String(e))},Q=function(t){if(!(t=String(t.origin||"")))throw Error("RPC has no origin.");return t};w("checkSessionState",R),w("getVersionInfo",S);var T,U,V,W,X,ea=window,Z=(window.location.href||ea.location.href).match(/.*(\?|#|&)usegapi=([^&#]+)/)||[],Y="1"===decodeURIComponent(Z[Z.length-1]||"")?(V=function(t,e,i,n,r,o){T.send(e,r,n,o||gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)},W=function(t,e){T.register(t,e,gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)},X=function(t){var e=/^(?:https?:\/\/)?[0-9.\-A-Za-z]+(?::\d+)?/.exec(t),e=gapi.iframes.makeWhiteListIframesFilter([e?e[0]:null]);V("..","oauth2callback",gadgets.rpc.getAuthToken(".."),void 0,t,e)},U=function(){fa()},function(){V("..","oauth2relayReady",gadgets.rpc.getAuthToken("..")),W("check_session_state",ha),W("get_versioninfo",ia)}):(V=function(t,e,i,n,r){gadgets.rpc.call(t,e+":"+i,n,r)},W=function(t,e){gadgets.rpc.register(t,e)},X=function(t){gadgets.rpc.getTargetOrigin("..")==gadgets.rpc.getOrigin(t)&&V("..","oauth2callback",gadgets.rpc.getAuthToken(".."),void 0,t)},U=function(){Y()},function(){V("..","oauth2relayReady",gadgets.rpc.getAuthToken("..")),W("check_session_state",R),W("get_versioninfo",S)}),fa=function(){var t=Y;window.gapi.load("gapi.iframes",function(){T=gapi.iframes.getContext().getParentIframe(),t()})},ja=function(t){window.setTimeout(function(){X(t)},1)},ha=function(t){var e,i;return t&&(e=t.session_state,i=t.client_id),R(e,i,T.getOrigin())},ia=function(t){return S(t.xapisidHash,t.sessionIndex,T.getOrigin())},ka=!1,la=!1,ma=function(){la=!0,ka&&U()};w("oauth2callback",ja),w("oauth2verify",function(t,e){var i,a=window.open("about:blank",t);return a&&!a.closed&&(i=a.oauth2callbackUrl)?(window.timeoutMap=window.timeoutMap||{},window.realSetTimeout=window.realSetTimeout||window.setTimeout,window.setTimeout=function(t,e){try{var i=t,n=!1;t=function(){if(!n){n=!0;try{window.timeoutMap[String(o)]=void 0,delete window.timeoutMap[String(o)]}catch(t){}return i.call(this)}};var r=a.setTimeout(t,e),o=window.realSetTimeout(t,e);return window.timeoutMap[String(o)]=r,o}catch(t){}return window.realSetTimeout(t,e)},window.realClearTimeout=window.realClearTimeout||window.clearTimeout,window.clearTimeout=function(t){try{var e=window.timeoutMap[String(t)];e&&a.clearTimeout(e)}catch(t){}try{window.timeoutMap[String(t)]=void 0,delete window.timeoutMap[String(t)]}catch(t){}window.realClearTimeout(t)},ja(String(i)),"keep_open"!=e&&K(a),!0):(a&&!a.closed&&K(a),!1)}),w("init",function(){ka=!0,la&&U()}),window.addEventListener?window.addEventListener("load",ma,!1):window.attachEvent("onload",ma);
