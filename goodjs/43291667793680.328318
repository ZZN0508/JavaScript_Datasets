!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).getVPAIDAd=e()}(function(){return function n(r,a,o){function s(t,e){if(!a[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);throw(i=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",i}i=a[t]={exports:{}},r[t][0].call(i.exports,function(e){return s(r[t][1][e]||e)},i,i.exports,n,r,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,i){"use strict";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=null,r=242500,a="hidden",o="visible",d=1,c=5,f="fillStyle",p="fillText",m="getEntriesByType",v="https://beap-bc.yahoo.com/ym?",g="100",y="1.0.246",n="inViewPercentage",l="unload",u="beforeunload",b=20,w=20;function A(e,t,i){i=i||"";try{i=e&&t in e?e[t]:i}catch(e){}return i}function T(e){return parseFloat(e,10)}function E(e){return e===+e&&e===(0|e)}var S,_,k,I,C,V,P,x,O,M,D,R,U=navigator.sendBeacon?function(e,t){navigator.sendBeacon(e,t)}:function(e,t){(new Image).src=e+(t=t||"")},N=window,j=document,L=A(N,"screen",s),H=A(N,"navigator",s),B=A(N,"location",s),F=A(H,"language",""),W=A(H,"platform",""),z=A(H,"userAgent",""),G=z.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i),q=RegExp.$1.toLowerCase(),X=parseFloat(z.match(/version\/([\d]+)/i)&&RegExp.$1||G&&G[2]||""),Y=(z.match(/((ip)(hone|ad|od)|playbook|hp-tablet)/i)&&RegExp.$1.toLowerCase(),z.match(/(android|blackberry|bb10|macintosh|webos|windows)/i)&&RegExp.$1.toLowerCase(),!1),J=!1,Q=!1,$=!1,K=!1,Z=(new Date).getTime();function ee(e){var t=1;try{""===(t=(N.getComputedStyle&&N.getComputedStyle(e,s)||e.currentStyle).opacity)&&(t=1)}catch(e){}return t}function te(e,t){return ee(e)<=t}function ie(e){var t={width:0,height:0,valid:!0};try{var i=N.getComputedStyle&&N.getComputedStyle(e,s)||e.currentStyle;t.width=T(i.width)||0,t.height=T(i.height)||0}catch(e){t.width=0,t.height=0,t.valid=!1}return t}function ne(e,t,i){return(e=ie(e)).width<=t||e.height<=i}function re(e,t,i,n,r){if(r=r||function(){return!0},!ne(e,i,n))return e;for(var a=0;a<t.length;a++)for(var o=e.getElementsByTagName(t[a]),s=0;s<o.length;s++)if(!ne(o[s],i,n)&&r(o[s]))return o[s]}function ae(e,t){C=0<arguments.length&&E(e)&&E(t)?(V=e,t):(t=function(){if(Q)try{t=j.documentElement&&Math.max(j.documentElement.clientWidth,j.documentElement.scrollWidth)||N.frameElement&&N.frameElement.width||s,i=j.documentElement&&Math.max(j.documentElement.clientHeight,j.documentElement.scrollHeight)||N.frameElement&&N.frameElement.height||s}catch(e){t=N.innerWidth||j.body&&j.body.clientWidth||s,i=N.innerHeight||j.body&&j.body.clientHeight||s}else var e=ie(M),t=e.width||s,i=e.height||s;return[t,i]}(),V=t[0],t[1]),x=(P=r<=V*C)?30:50}function oe(e,t){var i;return t=void 0===t?{top:0,left:0}:t,e!==e.top&&(i=e.frameElement.getBoundingClientRect(),t.left+=i.left,t.top+=i.top,t=oe(e.parent,t)),t}function se(){return(le(b,w)<<1)+(le(5,5)<<2)+((function(e,t,i){if(i=i||function(){return!0},!te(e,0))return e;for(var n=0;n<t.length;n++)for(var r=e.getElementsByTagName(t[n]),a=0;a<r.length;a++)if(!te(r[a],0)&&i(r[a]))return r[a]}(M,["div","iframe"])?0:1)<<3)}function le(e,t){var i;try{i=re(M,["div","video","iframe","ins"],e,t)}catch(e){}return i?0:1}function ue(e,t){if(O=e,function(){try{$=!!N.top.document}catch(e){}}(),S=$&&J?N.parent:N,K=N.$sf&&N.$sf.ext&&"function"==typeof N.$sf.ext[n]||!1,function(){try{Y=/((iPhone|iPod|iPad).*AppleWebKit(?!.*(Safari|CriOS)))/i.test(z)||"chrome"===q&&(/wv\).* Chrome.* Mobile/i.test(z)||/Version\/\d*\.\d* (?:Chrome.* Mobile)?/i.test(z))||/(MSAppHost\/.*|WebView)/.test(z)}catch(e){}}(),_=-1!==z.indexOf("Chrome/")?1:-1!==z.indexOf("Firefox/")?2:-1!==z.indexOf("; MSIE")?3:-1!==z.indexOf("Safari/")?4:-1!==z.indexOf("WebKit")?5:-1!==z.indexOf("Gecko")?6:7,void 0!==j.hidden?(k="hidden",I="visibilitychange"):void 0!==j.mozHidden?(k="mozHidden",I="mozvisibilitychange"):void 0!==j.webkitHidden?(k="webkitHidden",I="webkitvisibilitychange"):void 0!==j.msHidden&&(k="msHidden",I="msvisibilitychange"),t)M=t;else if(Q)if($)try{M=N.frameElement}catch(e){M=s}else(t=re(M=j.body||s,["div","video"],b,w))&&(M=t);else M=O&&(O.parentElement||O.parentNode)||s;var i;return 0!==(D=se())&&(i=setInterval(function(){0===(D=se())&&clearInterval(i)},1e3),setTimeout(function(){i&&clearInterval(i)},1e4)),O!==s&&void 0!==O&&M!==s&&void 0!==M}function de(e){var t,i="";if(e&&"string"==typeof e)try{(t=e.match(/^https?:\/\/([-\w\.]*)(:\d+)?([\/\?#]|$)/))&&t[1]&&(i=t[1])}catch(e){i=""}return i}function ce(e,t){return Math.floor((t-e)/1e3)}function he(e,t,i){(i=i||N).addEventListener?i.addEventListener(e,t):i.attachEvent&&i.attachEvent("on"+e,t)}function fe(e,t,i){(i=i||N).removeEventListener?i.removeEventListener(e,t):i.detachEvent&&i.detachEvent("on"+e,t)}function pe(e,t){for(var i,n,r,a=d<e?e-d:0,o=d<t?t-d:0,s=[],l={},u=.5;u<c;u+=1)for(n=Math.round(u*a/c),i=.5;i<c;i+=1)l[r=n+"_"+Math.round(i*o/c)]||(s.push(r),l[r]=1);return s}function me(e){var t=(new Date).getTime();j[k]&&0<e.dwellStartTime?e.adt+=ce(e.dwellStartTime,t):(e.foc=1,e.dwellStartTime=t)}!function(){try{var e=N.parent,t=N.top;J=!(!t||!e||t!=e||t==N),Q=!(!e||e==N)}catch(e){}}();var ve={w:0,h:0,mw:-1,mh:-1,bl:-1,bt:-1,ew:-1,eh:-1,ex:-1,ey:-1,vw:-1,vh:-1,sx:-1,sy:-1,ivp:-1,ivd:-1,pt:-1,mi:-1,b:-1,gm0:0,gm1:0,m:-1,tivt:0,hov:2,tth:0,intt:2,intl:0,tti:0,st:0,foc:2,adt:0,scr:2,scd:0,svd:0,svu:0,sct:0,mivp:0,mivt:0,ls:0,winl:"",winr:"",lvl:0,al:3,ae:0,bct:2,ph:-1,dwellStartTime:0,scrolledUpPixels:0,scrolledUpTime:0,scrolledDownPixels:0,scrolledDownTime:0,avoc:0,avoc_debug:0,firstInViewTime:Number.MAX_SAFE_INTEGER};function ge(){var e,t,a,i;Q&&(i=ve,he("mouseover",function(){var e=i,t=(new Date).getTime();e.hov=1,e.tth||(e.tth=ce(Z,t)),e.hoverStartTime=t}),he("mouseout",function(){var e=i,t=(new Date).getTime();500<ce(e.hoverStartTime,t)&&(e.intt=1,e.intl=t,e.tti=ce(Z,t))})),e=ve,j[k]||me(e),he(I,function(){me(e)},j),(!Q||$&&J)&&(t=ve,he("scroll",function(){var r,e;r=t,e=(new Date).getTime(),r.scr=1,r.sct||(r.sct=ce(Z,e)),r.scrollStartTime&&0!==r.scrollStartTime||(r.scrollStartTime=e,r.scrollStartY=S.scrollY),R||clearTimeout(R),R=setTimeout(function(){var e=r,t=(new Date).getTime(),i=ce(e.scrollStartTime,t),n=S.scrollY-e.scrollStartY;t=S.document.body.clientHeight||S.document.body.height,(t=Math.round(S.scrollY/t*100))>e.scd&&(e.scd=t),0<n?(e.scrolledDownPixels+=n,e.scrolledDownTime+=i):(e.scrolledUpPixels-=n,e.scrolledUpTime+=i),e.scrollStartTime=0},250)},S)),a=N.onerror,N.onerror=function(e,t,i,n,r){return ve.ae+=1,!!a&&a(e,t,i,n,r)}}function ye(e){return"tp="+(P?"2":"1")+(":mt="+e.measurementBucket)}function be(e){return Math.floor(Math.random()*(10*e))}function we(e,t,i,n){for(var r=!1,a=0;a<t.length;a++)-1<e.indexOf(t[a])&&(e=e.replace(new RegExp(t[a],"g"),n),r=!0);return r||(e+="&"+i+"="+n),e}(new Date).getTime(),be(1e5),be(100);var Ae="0123456789abcdef".split(""),Te=String.prototype.substring,Ee=12,Se=14,_e=16,ke=20,Ie=24,Ce=32,Ve=64,Pe=function(e,t){return e+t&4294967295},xe=128,Oe=15;function Me(e,t){return e.charCodeAt(t)}function De(e,t){var i=Ue(e[0],a=e[1],r=e[2],n=e[3],t[0],7,-680876936),n=Ue(n,i,a,r,t[1],Ee,-389564586),r=Ue(r,n,i,a,t[2],17,606105819),a=Ue(a,r,n,i,t[3],22,-1044525330),i=Ue(i,a,r,n,t[4],7,-176418897),n=Ue(n,i,a,r,t[5],Ee,1200080426),r=Ue(r,n,i,a,t[6],17,-1473231341),a=Ue(a,r,n,i,t[7],22,-45705983);i=Ue(i,a,r,n,t[8],7,1770035416),n=Ue(n,i,a,r,t[9],Ee,-1958414417),r=Ue(r,n,i,a,t[10],17,-42063),a=Ue(a,r,n,i,t[11],22,-1990404162),i=Ue(i,a,r,n,t[Ee],7,1804603682),n=Ue(n,i,a,r,t[13],Ee,-40341101),r=Ue(r,n,i,a,t[Se],17,-1502002290),i=Ne(i,a=Ue(a,r,n,i,t[15],22,1236535329),r,n,t[1],5,-165796510),n=Ne(n,i,a,r,t[6],9,-1069501632),r=Ne(r,n,i,a,t[11],Se,643717713),a=Ne(a,r,n,i,t[0],ke,-373897302),i=Ne(i,a,r,n,t[5],5,-701558691),n=Ne(n,i,a,r,t[10],9,38016083),r=Ne(r,n,i,a,t[15],Se,-660478335),a=Ne(a,r,n,i,t[4],ke,-405537848),i=Ne(i,a,r,n,t[9],5,568446438),n=Ne(n,i,a,r,t[Se],9,-1019803690),r=Ne(r,n,i,a,t[3],Se,-187363961),a=Ne(a,r,n,i,t[8],ke,1163531501),i=Ne(i,a,r,n,t[13],5,-1444681467),n=Ne(n,i,a,r,t[2],9,-51403784),r=Ne(r,n,i,a,t[7],Se,1735328473),i=je(i,a=Ne(a,r,n,i,t[Ee],ke,-1926607734),r,n,t[5],4,-378558),n=je(n,i,a,r,t[8],11,-2022574463),r=je(r,n,i,a,t[11],_e,1839030562),a=je(a,r,n,i,t[Se],23,-35309556),i=je(i,a,r,n,t[1],4,-1530992060),n=je(n,i,a,r,t[4],11,1272893353),r=je(r,n,i,a,t[7],_e,-155497632),a=je(a,r,n,i,t[10],23,-1094730640),i=je(i,a,r,n,t[13],4,681279174),n=je(n,i,a,r,t[0],11,-358537222),r=je(r,n,i,a,t[3],_e,-722521979),a=je(a,r,n,i,t[6],23,76029189),i=je(i,a,r,n,t[9],4,-640364487),n=je(n,i,a,r,t[Ee],11,-421815835),r=je(r,n,i,a,t[15],_e,530742520),i=Le(i,a=je(a,r,n,i,t[2],23,-995338651),r,n,t[0],6,-198630844),n=Le(n,i,a,r,t[7],10,1126891415),r=Le(r,n,i,a,t[Se],15,-1416354905),a=Le(a,r,n,i,t[5],21,-57434055),i=Le(i,a,r,n,t[Ee],6,1700485571),n=Le(n,i,a,r,t[3],10,-1894986606),r=Le(r,n,i,a,t[10],15,-1051523),a=Le(a,r,n,i,t[1],21,-2054922799),i=Le(i,a,r,n,t[8],6,1873313359),n=Le(n,i,a,r,t[15],10,-30611744),r=Le(r,n,i,a,t[6],15,-1560198380),a=Le(a,r,n,i,t[13],21,1309151649),i=Le(i,a,r,n,t[4],6,-145523070),n=Le(n,i,a,r,t[11],10,-1120210379),r=Le(r,n,i,a,t[2],15,718787259),a=Le(a,r,n,i,t[9],21,-343485551),e[0]=Pe(i,e[0]),e[1]=Pe(a,e[1]),e[2]=Pe(r,e[2]),e[3]=Pe(n,e[3])}function Re(e,t,i,n,r,a){return t=Pe(Pe(t,e),Pe(n,a)),Pe(t<<r|t>>>Ce-r,i)}function Ue(e,t,i,n,r,a,o){return Re(t&i|~t&n,e,t,r,a,o)}function Ne(e,t,i,n,r,a,o){return Re(t&n|i&~n,e,t,r,a,o)}function je(e,t,i,n,r,a,o){return Re(t^i^n,e,t,r,a,o)}function Le(e,t,i,n,r,a,o){return Re(i^(t|~n),e,t,r,a,o)}function He(){return"5d41402abc4b2a76b9719d911017c592"===Be("hello")}function Be(e){return function(e){for(var t,i=0,n=e.length;i<n;i++)e[i]=(t=e[i],[Ae[t>>4&Oe],Ae[t>>0&Oe],Ae[t>>Ee&Oe],Ae[t>>8&Oe],Ae[t>>ke&Oe],Ae[t>>_e&Oe],Ae[t>>Ie+4&Oe],Ae[t>>Ie&Oe]].join(""));return e.join("")}(function(e){for(var t,i,n,r,a=e.length,o=[1732584193,-271733879,-1732584194,271733878],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=Ve;l<=a;l+=Ve)De(o,function(e){for(var t=[],i=0;i<Ve;i+=4)t[i>>2]=Me(e,i)+(Me(e,i+1)<<8)+(Me(e,i+2)<<_e)+(Me(e,i+3)<<Ie);return t}((t=e,i=l,Te.call(t,l-Ve,i)))),l+=Ve;for(n=e,r=l-Ve,l=0,a=(e=Te.call(n,r)).length;l<a;l++)s[l>>2]|=Me(e,l)<<(l%4<<3);if(s[l>>2]|=xe<<(l%4<<3),55<l)for(De(o,s),l=0;l<_e;l++)s[l]=0;return s[Se]=8*a,De(o,s),o}(e))}var Fe=He()||(Pe=function(e,t){var i=(65535&e)+(65535&t);return(e>>_e)+(t>>_e)+(i>>_e)<<_e|65535&i},!!He())?Be:function(e){return""},We=j.createElement("canvas"),ze=[{type:"api",name:"ancestorOrigins",base:B,mockCheck:function(e,t){return Je(N,"DOMStringList")||!(e[t]instanceof N.DOMStringList)}},{type:"api",name:"WritableStream",base:N},{type:"api",name:"SharedWorker",base:N},{type:"api",name:"AudioContext",base:N},{type:"api",name:"AmbientLightSensor",base:N},{type:"api",name:"PointerEvent",base:N},{type:"api",name:"ondeviceproximity",base:N,mockCheck:function(){return!1}},{type:"api",name:"openDatabase",base:N},{type:"api",name:"getGamepads",base:H},{type:"api",name:"share",base:H},{type:"api",name:"registerProtocolHandler",base:H},{type:"api",name:"type",base:H&&H.connection,mockCheck:function(){return Je(N,"NetworkInformation")}},{type:"api",fieldName:"query",base:H&&H.permissions},{type:"api",name:"toBlob",base:We}],Ge=[{type:"css-selector",selector:"div:-webkit-full-screen"},{type:"css-selector",selector:"div:dir(ltr)"},{type:"css-selector",selector:"div::backdrop"}],qe=[{type:"css-rule",rule:"caret-color: transparent"},{type:"css-rule",rule:"-ms-wrap-flow: both"},{type:"css-rule",rule:"background: filter(url(img.jpg), blur(5px))"},{type:"css-rule",rule:"display: flow-root"},{type:"css-rule",rule:"font-smoothing: antialiased"},{type:"css-rule",rule:"-webkit-font-smoothing: antialiased"},{type:"css-rule",rule:"-moz-osx-font-smoothing: grayscale"}];function Xe(e){return new RegExp("function "+e+"\\s*\\(\\)\\s*\\{\\s*\\[native code\\]\\s*\\}")}var Ye=Xe("toString");function Je(e,t){return!Xe(t).test(e[t].toString())||!Ye.test(e[t].toString.toString())}function Qe(e,t){for(var i=0,n=0;n<e.length;n++){var r=function(e){var t;switch(e.type){case"api":t=function(e,t,i){try{return e&&t in e?i(e,t)?2:1:0}catch(e){}return 3}(e.base,e.name,e.mockCheck||Je);break;case"css-selector":t=function(e){try{return j.querySelector(e),1}catch(e){}return 0}(e.selector);break;case"css-rule":t=function(e){try{return N.CSS.supports("( "+e+" )")?1:0}catch(e){}return 3}(e.rule);break;default:t=3}return t}(e[n]);if(t<=r)return-1;i=r+t*i}return i}var $e,Ke=[{nodeName:"button"},{nodeName:"a",additionalSetup:function(e){e.setAttribute("href","https://yahoo.com")}},{nodeName:"input"}],Ze=[{getData:function(){return!(H.plugins instanceof PluginArray)||0===H.plugins.length}},{getData:function(){return""===H.languages}},{value:0,bits:3,init:function(i){var n=j.createElement("div");n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.border=0,n.style.padding=0,n.style.margin=0,n.style.overflow="hidden",M.appendChild(n);for(var r=0;r<Ke.length;r++)!function(){var e=r,t=j.createElement(Ke[r].nodeName);t.onclick=function(){i.value|=1<<e},Ke[r].additionalSetup&&Ke[r].additionalSetup(t),n.appendChild(t)}()}}],et=encodeURIComponent,tt=0;function it(e,t){for(var i,n=[],r=j.getElementsByTagName(e),a=0;a<r.length;a++)(i=r[a].getAttribute(t))&&n.push(i);return n}function nt(e,t){var i,n,r,a=e.length,o=t.length;if(a===o){for(i=0;i<a;i++){for(r=!1,n=0;n<o;n++)-1!==e[i].indexOf(t[n])&&(r=!0);if(!r)return}return 1}}function rt(e){this.adWidth=e.adWidth,this.adHeight=e.adHeight,this.inViewCallback=e.inViewCallback,this.outOfViewCallback=e.outOfViewCallback,this.thresholdPercentage=e.thresholdPercentage||x,this.inViewPercentage=0,this.inViewPercentages=[],this.maxInViewPercentage=0,this.inView=!1,this.isMeasurable=!0,this.isCurrentlyInView=!1,this.currentTimestamp=0,this.lastTimestamp=0,this.nextTimestamp=0,this.totalInViewTime=0,this.lastTotalInViewTime=0,this.maxInViewTime=0,this.totalInView100Time=0,this.inView100StartTime=0,this.lastInView100Timestamp=0,this.inView100For0Sec=0,this.inView100For1Sec=0,this.stopCallbacks=!1,this.adLoaded=e.adLoaded,this.playerId=e.playerId,this.adUnit=e.adUnit,this.adSizeChanged=e.adSizeChanged,this.adVideoComplete=e.adVideoComplete,this.adIsVideo=!1,this.adVideoIsPlayingInView=!1,this.flashNotSupported=0,this.trackedElement=M}function at(e){var t={x:0,y:0};return e.x>=e.scrlX&&e.x+e.halfWidth<e.scrlX+e.viewportWidth?t.x=e.scrlX+e.viewportWidth-e.x:e.x+e.halfWidth>e.scrlX&&e.x+e.adWidth<=e.scrlX+e.viewportWidth?t.x=e.x+e.adWidth-e.scrlX:e.x<e.scrlX&&e.x+e.adWidth>e.scrlX+e.viewportWidth&&e.viewportWidth>=e.halfWidth&&(t.x=e.viewportWidth),e.y>=e.scrlY&&e.y+e.halfHeight<e.scrlY+e.viewportHeight?t.y=e.scrlY+e.viewportHeight-e.y:e.y+e.halfHeight>e.scrlY&&e.y+e.adHeight<=e.scrlY+e.viewportHeight?t.y=e.y+e.adHeight-e.scrlY:e.y<e.scrlY&&e.y+e.adHeight>e.scrlY+e.viewportHeight&&e.viewportHeight>=e.halfHeight&&(t.y=e.viewportHeight),t}function ot(e){return e.scrlX=0,e.scrlY=0,at(e)}he("load",function(){tt=(new Date).getTime()-Z}),rt.prototype.beaconTimeout=1e3,rt.prototype.measurementBucket="2",rt.prototype.aihv=0,rt.prototype.adStackedInView=0,rt.prototype.hasCheckedAdStacked=!1,rt.prototype.adStuffedInView=0,rt.prototype.hasCheckedAdStuffed=!1,rt.prototype.init=function(){var e=this;try{he(I,function(){e.currentEntry&&e.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:e.currentEntry.intersectionRatio})},j)}catch(e){}this.registerInViewListener()},rt.prototype.canApplyMethod=function(){return!1},rt.prototype.registerInViewListener=function(){},rt.prototype.inViewListenerCallback=function(e){this.currentEntry=e,this.currentTimestamp=e.time,this.updateInViewPercentages(e),this.isInView()&&!j[k]?(this.updateTimestamps(),this.isCurrentlyInView,this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback(),this.isInView100()?this.updateTimestamps100():this.resetTimestamps100(),this.aihv=se(),this.hasCheckedAdStacked&&1!==this.adStackedInView||(this.adStackedInView=function(){var e;try{if(Q){if(!$)return 0;e=N.top.document}else e=j;var t=M.getBoundingClientRect(),i=t.width*t.height>=r?30:50,n=Q?oe(N):{top:t.top,left:t.left};return function(i,e,d,t,n,r){if(!(d<b||t<w)){for(var a=function(e,t){for(var i=[],n=Math.floor(d/10),r=Math.floor(t/10),a=Math.max(0,e.left),o=e.top,s=1;s<10;s++)for(var l=a+n*s,u=1;u<10;u++)i[i.length]=[l,o+r*u];return i}(e,t),o=0,s=0,l=a.length;s<l;s++){var u=a[s][0],c=a[s][1];(c=r&&r.elementFromPoint&&r.elementFromPoint(u,c))&&c!==i&&!function(e){for(var t=c&&c.parentNode;null!==t;){if(t===e)return 1;t=t.parentNode}}(i)&&!function(e){if("IFRAME"===i.nodeName&&"IFRAME"===e.nodeName)for(var t=i.contentWindow;t!==N.top;)if((t=t.parent).frameElement===e)return 1}(c)&&.9<ee(c)&&!function e(t){var i=N.top.getComputedStyle?N.top.getComputedStyle(t,null):t.currentStyle;if("none"===i.display||"hidden"===i.visibility)return 1;if("img"!==t.tagName.toLowerCase()&&"video"!==t.tagName.toLowerCase()&&("transparent"===i.backgroundColor||0===parseFloat(i.backgroundColor.split(",")[3]))){for(var n=0;n<t.childNodes.length;n++)if(!e(t.childNodes[n]))return;return 1}}(c)&&o++}return 100-o/a.length*100<n}}(M,n,t.width,t.height,i,e)?1:0}catch(e){return 0}}(),this.hasCheckedAdStacked=!0),this.hasCheckedAdStuffed&&1!==this.adStuffedInView||(this.adStuffedInView=function(){try{var e=function(){var e,t;try{if(Q){if(!$)return s;e=N.top.document,t=N.top}else e=j,t=N;return{height:t.innerHeight||e.documentElement.clientHeight||e.body&&e.body.clientHeight,width:t.innerWidth||e.documentElement.clientWidth||e.body&&e.body.clientWidth}}catch(e){return s}}();if(Q&&e)for(var t=["div","video","iframe"],i=0;i<t.length;i++)for(var n=j.body.getElementsByTagName(t[i]),r=0;r<n.length;r++)if(function e(t){if("img"===t.tagName.toLowerCase()||"video"===t.tagName.toLowerCase())return 1;for(var i=0;i<t.childNodes.length;i++)if(e(t.childNodes[i]))return 1}(n[r])&&!ne(n[r],b,w)){var a=n[r].getBoundingClientRect(),o=oe(N,{top:a.top,left:a.left});if(o&&(o.left>=e.width||o.left+a.width<=0||o.top>=e.height||o.top+a.height<=0))return 1}}catch(e){}return 0}(),this.hasCheckedAdStuffed=!0),this.adIsVideo&&(this.aihv=this.aihv&&this.adVideoIsPlayingInView,this.adStackedInView=this.adStackedInView&&this.adVideoIsPlayingInView,this.adStuffedInView=this.adStuffedInView&&this.adVideoIsPlayingInView)):(this.isCurrentlyInView,this.resetTimestamps(),this.resetTimestamps100(),this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks||this.outOfViewCallback())},rt.prototype.metViewableStandard=function(){this.inView=this.isCurrentlyInView,this.stopCallbacks=!0,this.currentTimestamp=(new Date).getTime(),this.isCurrentlyInView?this.updateTimestamps():this.resetTimestamps(),this.lastTotalInViewTime=this.totalInViewTime},rt.prototype.updateInViewPercentages=function(e){this.inViewPercentage=e.intersectionRatio,this.maxInViewPercentage<this.inViewPercentage&&(this.maxInViewPercentage=this.inViewPercentage),this.inViewPercentages.push(this.inViewPercentage)},rt.prototype.updateTimestamps=function(){return 0<this.lastTimestamp&&(this.totalInViewTime+=this.currentTimestamp-this.lastTimestamp,this.maxInViewTime<this.totalInViewTime&&(this.maxInViewTime=this.totalInViewTime),this.lastTotalInViewTime=this.totalInViewTime),this.lastTimestamp=this.currentTimestamp,this.lastTimestamp},rt.prototype.isInView=function(){return this.inViewPercentage>=this.thresholdPercentage},rt.prototype.isSufficientlyInView=function(){return this.totalInViewTime>=this.beaconTimeout},rt.prototype.resetTimestamps=function(){this.updateTimestamps(),this.lastTimestamp=this.nextTimestamp=this.totalInViewTime=0,this.inViewPercentages=[]},rt.prototype.updateTimestamps100=function(){this.inView100For0Sec=1,0<this.lastInView100Timestamp?this.totalInView100Time+=this.currentTimestamp-this.lastInView100Timestamp:this.inView100StartTime=this.currentTimestamp,this.lastInView100Timestamp=this.currentTimestamp,this.totalInView100Time>this.beaconTimeout&&(this.inView100For1Sec=1)},rt.prototype.isInView100=function(){return 99<this.inViewPercentage},rt.prototype.resetTimestamps100=function(){this.lastInView100Timestamp=this.totalInView100Time=this.inView100StartTime=0},rt.prototype.cleanup=function(){},rt.prototype.reset=function(){},rt.extend=function(){function t(e){t.parent.call(this,e)}((t.prototype=void 0!==Object.create?Object.create(this.prototype):new this({})).constructor=t).parent=this,t.extend=this.extend;for(var e=0;e<arguments.length;e++){var i,n=arguments[e];for(i in n=void 0!==n.prototype?n.prototype:n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i])}return t},rt.prototype.getAverageInViewPercentage=function(){for(var e=this.inViewPercentages.length,t=0,i=0;i<e;i++)t+=this.inViewPercentages[i];return e?Math.round(t/e):0},rt.prototype.updateTrackingElement=function(e){this.markAsNotMeasurable()},rt.prototype.markAsNotMeasurable=function(){this.isMeasurable=!1,this.cleanup(),this.stopCallbacks||(this.stopCallbacks=!0,this.outOfViewCallback(!0))};var st=(pt=(vt=rt.extend({fineTimeout:100,coarseTimeout:750,registerInViewListener:function(){var e=this;this.timeout=this.notInViewTimerWrapper(function(){e.fireInViewListenerCallback()})},fireInViewListenerCallback:function(){var e={intersectionRatio:this.getInViewPercentage(),time:(new Date).getTime()},t=this;this.inViewListenerCallback(e),this.timeout=this[this.isCurrentlyInView?"inViewTimerWrapper":"notInViewTimerWrapper"](function(){t.fireInViewListenerCallback()})},getInViewPercentage:function(){return 0},notInViewTimerWrapper:function(e){return setTimeout(e,this.coarseTimeout)},inViewTimerWrapper:function(e){return setTimeout(e,this.fineTimeout)},cleanup:function(){clearTimeout(this.timeout)},measurementBucket:"0"})).extend({init:function(){1===_||4===_||5===_||7===_?$e=at:2!==_&&3!==_&&6!==_||($e=ot),this.registerInViewListener()},getBoundingClientRect:function(){return this.trackedElement.getBoundingClientRect()},getInViewPercentage:function(){try{return t=(e={bcr:this.getBoundingClientRect(),adWidth:V,adHeight:C}).bcr,i=e.adWidth,n=e.adHeight,r=i&&n?i*n:0,s=(o=(a=N.parent).document).body,(e={}).x=Math.round(t.left+s.scrollLeft),e.y=Math.round(t.top+s.scrollTop),e.adWidth=i,e.adHeight=n,e.halfWidth=Math.floor(i/2),e.halfHeight=Math.floor(n/2),e.viewportWidth=Math.max(o.documentElement.clientWidth,N.innerWidth||0),e.viewportHeight=Math.max(o.documentElement.clientHeight,N.innerHeight||0),e.scrlX=a.scrollX,e.scrlY=a.scrollY,(e=$e(e)).x>i&&(e.x=i),e.y>n&&(e.y=n),r?Math.round(100*e.x*e.y/r):0}catch(e){}var e,t,i,n,r,a,o,s;return 0},updateTrackingElement:function(e){this.trackedElement=e}})).extend({canApplyMethod:function(){return!Y&&!Q},measurementBucket:"6"}),lt=pt.extend({canApplyMethod:function(){return!Y&&$&&J},getBoundingClientRect:function(){if(this.trackedElement.ownerDocument!==j)return this.trackedElement.getBoundingClientRect();var e,t={left:(t=this.trackedElement.getBoundingClientRect()).left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height};try{N.frameElement!==this.trackedElement&&(e=N.frameElement.getBoundingClientRect(),t.left+=e.left,t.right+=e.left,t.top+=e.top,t.bottom+=e.top)}catch(e){}return t},measurementBucket:"2"}),ut=vt.extend({coarseTimeout:100,canApplyMethod:function(){return!Y&&K},getInViewPercentage:function(){return N.$sf.ext[n]()},getGeometrics:function(){return N.$sf.ext.geom()},measurementBucket:"1"});function dt(e){var t,i,n,r,a;for(e.tags=pe(V,C),e.numTag=e.tags.length,e.tagArray=[],t=0;t<e.numTag;t++)e.tagArray.push((r=void 0,2===(a=(n=(i=e).tags[t]).split("_")).length&&((r=j.createElement("iframe")).style.cssText="width:"+d+"px;height:"+d+"px;left:"+a[0]+"px;top:"+a[1]+"px;position:absolute;background-color:transparent;",r.scrolling="no",r.allowtransparency="true",r.hidefocus="true",r.setAttribute("frameBorder","0"),r.id=n,i.lastMozPaintCounts[n]=0,i.paintCounts[n]=0,i.paintTimestamps[n]=0,i.lastPaintCounts[n]=0,i.lastPaintTimestamps[n]=0),r));for(t=0;t<e.numTag;t++)j.body.appendChild(e.tagArray[t])}function ct(e,t){var i=N.requestAnimationFrame||N.mozRequestAnimationFrame||s,n=t;(n=j.getElementById(n))&&(n.style.visibility=n.style.visibility===a?o:a),i&&i(function(r){!function(e,t){var i,n;if((e.paintTimestamps[t]=r)>e.lastPaintTimestamps[t]&&(n=j.getElementById(t))){try{(i=n.contentWindow).document||(i=s)}catch(e){i=s}i&&i.mozPaintCount>e.lastMozPaintCounts[t]&&(e.paintCounts[t]+=1,e.lastMozPaintCounts[t]=i.mozPaintCount)}}(e,t)})}function ht(e){for(var t=0;t<e.numTag;t++)ct(e,e.tags[t])}var ft=vt.extend({canApplyMethod:function(){return!Y&&"mozPaintCount"in N},init:function(){this.lastMozPaintCounts={},this.paintCounts={},this.paintTimestamps={},this.lastPaintCounts={},this.lastPaintTimestamps={},dt(this),ht(this),this.registerInViewListener()},getInViewPercentage:function(){var e=function(e){for(var t,i=0,n=0;n<e.numTag;n++)t=e.tags[n],e.paintTimestamps[t]>e.lastPaintTimestamps[t]&&(e.paintCounts[t]>e.lastPaintCounts[t]&&(i+=1),e.lastPaintCounts[t]=e.paintCounts[t],e.lastPaintTimestamps[t]=e.paintTimestamps[t]);return i}(this);return ht(this),this.numTag?100*e/this.numTag:0},notInViewTimerWrapper:function(e){var t=this;return setTimeout(function(){ht(t),t.timeout=setTimeout(e,.5*t.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(e){var t=this;return setTimeout(function(){ht(t),t.timeout=setTimeout(e,.5*t.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var e=0;e<this.numTag;e++)j.body.removeChild(this.tagArray[e])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),dt(this)},measurementBucket:"3"}),G=rt.extend({canApplyMethod:function(){return!Y&&($&&!!N.top.IntersectionObserver||!$&&!!N.IntersectionObserver)&&!K},registerInViewListener:function(){for(var n=this,e=[],t=this.thresholdPercentage/100;t<1;t+=.05)e.push(t);e.push(1);var i=N.IntersectionObserver;$&&(i=N.top.IntersectionObserver),this.io=new i(function(e){for(var t,i=0;i<e.length;i++)if(e[i].target===n.trackedElement){t=e[i];break}t&&n.inViewListenerCallback({intersectionRatio:100*e[0].intersectionRatio,time:(new Date).getTime()})},{threshold:e}),this.io.observe(this.trackedElement)},cleanup:function(){this.io&&this.io.disconnect()},updateTrackingElement:function(e){this.io.unobserve(this.trackedElement),this.io.observe(e),this.trackedElement=e},measurementBucket:"7"}),We=rt.extend({canApplyMethod:function(){return Y&&void 0!==N.mraid},registerInViewListener:function(){var t=this;t.mraidVersion=N.mraid.getVersion&&N.mraid.getVersion(),"3.0"===t.mraidVersion?(this.viewableChangeEventListener=function(e){t.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:e})},N.mraid.addEventListener("exposureChange",this.viewableChangeEventListener)):(this.viewableChangeEventListener=function(){t.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:N.mraid.isViewable()?100:0})},N.mraid.addEventListener("viewableChange",this.viewableChangeEventListener))},cleanup:function(){"3.0"===this.mraidVersion?N.mraid.removeEventListener("exposureChange",this.viewableChangeEventListener):N.mraid.removeEventListener("viewableChange",this.viewableChangeEventListener)},measurementBucket:"8"}),pt=rt.extend({canApplyMethod:function(){return!Y&&!K&&void 0!==N.context&&void 0!==N.context.observeIntersection},registerInViewListener:function(){var t=this;t.cleanup=N.context.observeIntersection(function(e){e.sort(function(e,t){return e.time>t.time}).forEach(function(e){t.inViewListenerCallback({time:e.time,intersectionRatio:100*e.intersectionRatio})})})},measurementBucket:"9"});function mt(e){var t,i,n,r,a;for(e.tags=pe(V,C),e.numTag=e.tags.length,e.tagArray=[],t=0;t<e.numTag;t++)e.tagArray.push((r=void 0,2===(a=(n=(i=e).tags[t]).split("_")).length&&((r=j.createElement("iframe")).style.cssText="width:"+d+"px;height:"+d+"px;left:"+a[0]+"px;top:"+a[1]+"px;position:absolute;background-color:transparent;",r.scrolling="no",r.allowtransparency="true",r.hidefocus="true",r.setAttribute("frameBorder","0"),r.id=n,i.painted[n]=0),r));for(t=0;t<e.numTag;t++)j.body.appendChild(e.tagArray[t])}var vt=vt.extend({canApplyMethod:function(){return!Y&&"requestAnimationFrame"in N&&"cancelAnimationFrame"in N&&"safari"===q&&10<=Number(X)},setupHandlerPerTag:function(t){var i=this.tagArray[t].contentWindow,n=this;i&&(i.prevTimestamp=(new Date).getTime(),i.animationFrameRequest&&(i.cancelAnimationFrame(i.animationFrameRequest),this.painted[t]=0),i.animationFrameRequest=i.requestAnimationFrame(function(){var e=(new Date).getTime();e-i.prevTimestamp<n.fineTimeout/2?n.painted[t]=1:n.painted[t]=0,i.prevTimestamp=e}))},setupHandlers:function(){for(var e=0;e<this.numTag;e++)this.setupHandlerPerTag(e)},init:function(){this.painted={},mt(this),this.setupHandlers(),this.registerInViewListener()},getInViewPercentage:function(){for(var e=0,t=0;t<this.numTag;t++)e+=this.painted[t],this.painted[t]=0;return this.setupHandlers(),this.numTag?100*e/this.numTag:0},notInViewTimerWrapper:function(e){var t=this;return setTimeout(function(){t.setupHandlers(),t.timeout=setTimeout(e,.5*t.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(e){var t=this;return setTimeout(function(){t.setupHandlers(),t.timeout=setTimeout(e,.5*t.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var e=0;e<this.numTag;e++)j.body.removeChild(this.tagArray[e])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),mt(this)},measurementBucket:"10"}),gt=rt.extend({canApplyMethod:function(){return!0},init:function(){this.isMeasurable=!1;var e=this;setTimeout(function(){e.outOfViewCallback(!0)})},measurementBucket:"5"}),yt=rt.extend({init:function(){this.adClicked=!1,this.adErrored=!1,this.minVolume=999,this.timeAtMinVolume=0,this.maxTimeAtMinVolume=0,this.currentlyAtMinVolume=!1,this.maxVolume=0,this.timeAtMaxVolume=0,this.maxTimeAtMaxVolume=0,this.currentlyAtMaxVolume=!1,this.playerWidth=0,this.playerHeight=0,this.playerSizeIsValid=!1,this.adHasLoaded=!1,this.adHasStarted=!1,this.adImpressionFired=!1,this.adVideoCompleteFired=!1,this.adUserCloseFired=!1,this.adSkippedFired=!1,this.adStoppedFired=!1,this.adIsPlaying=!1,this.adUnit&&this.subscribeToEvents()},subscribeToEvents:function(){this.adUnit.subscribe(this.adLoadedWrapper,"AdLoaded",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdStarted",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdVideoStart",this,this.playerId),this.adUnit.subscribe(this.adImpressionHandler,"AdImpression",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdPlaying",this,this.playerId),this.adUnit.subscribe(this.adStoppedPlaying,"AdPaused",this,this.playerId),this.adUnit.subscribe(this.adStoppedHandler,"AdStopped",this,this.playerId),this.adUnit.subscribe(this.adVideoCompleteHandler,"AdVideoComplete",this,this.playerId),this.adUnit.subscribe(this.adUserCloseHandler,"AdUserClose",this,this.playerId),this.adUnit.subscribe(this.adSkippedHandler,"AdSkipped",this,this.playerId),this.adUnit.subscribe(this.playerError,"AdError",this,this.playerId),this.adUnit.subscribe(this.adClickedHandler,"AdClickThru",this,this.playerId),this.adUnit.subscribe(this.adSizeChangeHandler,"AdSizeChange",this,this.playerId),this.adUnit.subscribe(this.adExpandedChangeHandler,"AdExpandedChange",this,this.playerId),this.adUnit.subscribe(this.adVolumeChangeHandler,"AdVolumeChange",this,this.playerId)},unsubscribeToEvents:function(){this.adUnit.unsubscribe(this.adLoadedWrapper,"AdLoaded",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdStarted",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdVideoStart",this.playerId),this.adUnit.unsubscribe(this.adImpressionHandler,"AdImpression",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdPlaying",this.playerId),this.adUnit.unsubscribe(this.adStoppedPlaying,"AdPaused",this.playerId),this.adUnit.unsubscribe(this.adStoppedHandler,"AdStopped",this.playerId),this.adUnit.unsubscribe(this.adVideoCompleteHandler,"AdVideoComplete",this.playerId),this.adUnit.unsubscribe(this.adUserCloseHandler,"AdUserClose",this.playerId),this.adUnit.unsubscribe(this.adSkippedHandler,"AdSkipped",this.playerId),this.adUnit.unsubscribe(this.playerError,"AdError",this.playerId),this.adUnit.unsubscribe(this.adClickedHandler,"AdClickThru",this.playerId),this.adUnit.unsubscribe(this.adSizeChangeHandler,"AdSizeChange",this.playerId),this.adUnit.unsubscribe(this.adExpandedChangeHandler,"AdExpandedChange",this.playerId),this.adUnit.unsubscribe(this.adVolumeChangeHandler,"AdVolumeChange",this.playerId)},updateTimestamps:function(){var e;this.currentTimestamp=(new Date).getTime(),0<this.lastTimestamp&&(e=this.currentTimestamp-this.lastTimestamp,this.adUnit&&this.adUnit.getAdVolume&&(this.currentlyAtMinVolume&&(this.timeAtMinVolume+=e,this.timeAtMinVolume>this.maxTimeAtMinVolume&&(this.maxTimeAtMinVolume=this.timeAtMinVolume)),this.currentlyAtMaxVolume&&(this.timeAtMaxVolume+=e,this.timeAtMaxVolume>this.maxTimeAtMaxVolume&&(this.maxTimeAtMaxVolume=this.timeAtMaxVolume)))),this.constructor.parent.prototype.updateTimestamps.call(this)},resetVolumeTimestamps:function(){this.timeAtMinVolume=this.timeAtMaxVolume=0},resetTimestamps:function(){this.resetVolumeTimestamps(),this.constructor.parent.prototype.resetTimestamps.call(this)},updateAdVolume:function(){var e;this.adUnit&&this.adUnit.getAdVolume&&((e=this.adUnit.getAdVolume())<this.minVolume?(this.minVolume=e,this.resetVolumeTimestamps(),this.currentlyAtMinVolume=!0):e!==this.minVolume&&(this.currentlyAtMinVolume=!1),e>this.maxVolume?(this.maxVolume=e,this.resetVolumeTimestamps(),this.currentlyAtMaxVolume=!0):e!==this.maxVolume&&(this.currentlyAtMaxVolume=!1))},adLoadedWrapper:function(){this.adHasLoaded=!0,this.updatePlayerSize(),this.adLoaded()},adStartedPlaying:function(){this.adHasStarted=!0,this.adIsPlaying=!0,this.updateAdVolume(),this.updateTimestamps(),this.adSizeChangeHandler(),this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback()},adImpressionHandler:function(){this.adImpressionFired=!0},adStoppedPlaying:function(e){this.currentTimestamp=(new Date).getTime(),this.resetTimestamps(),this.isCurrentlyInView=!1,this.adIsPlaying=!1,this.stopCallbacks&&!e||this.outOfViewCallback(e)},endAd:function(){this.adStoppedPlaying(!0),this.unsubscribeToEvents()},adStoppedHandler:function(){this.adStoppedFired=!0,this.endAd()},adVideoCompleteHandler:function(){this.updateAdVolume(),this.adVideoCompleteFired=!0,this.adVideoComplete(),this.endAd()},adUserCloseHandler:function(){this.adUserCloseFired=!0,this.endAd()},adSkippedHandler:function(){this.adSkippedFired=!0,this.endAd()},playerError:function(){this.updateTimestamps(),this.isMeasurable=this.adImpressionFired,this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks=!0,this.adErrored=!0,this.outOfViewCallback(!0),this.unsubscribeToEvents()},adClickedHandler:function(){this.updateTimestamps(),this.adClicked=!0,this.stopCallbacks||this.inViewCallback(!0),this.stopCallbacks=!0,this.unsubscribeToEvents()},updatePlayerSize:function(){var e=ie(O);this.playerWidth=e.width,this.playerHeight=e.height,this.playerSizeIsValid=e.valid},adSizeChangeHandler:function(){this.updateTimestamps(),ae(this.adUnit.adWidth,this.adUnit.adHeight),this.updatePlayerSize(),this.stopCallbacks||this.adSizeChanged()},adExpandedChangeHandler:function(){this.updateTimestamps(),ae(this.adUnit.adWidth,this.adUnit.adHeight),this.stopCallbacks||this.adSizeChanged()},adVolumeChangeHandler:function(){this.updateAdVolume(),this.updateTimestamps()},metViewableStandard:function(){this.constructor.parent.prototype.metViewableStandard.call(this),this.isMeasurable=this.adHasLoaded&&this.adHasStarted&&this.adImpressionFired&&this.isMeasurable,this.inView=this.isMeasurable&&this.inView},cleanup:function(){this.unsubscribeToEvents()},getVideoEventBits:function(){return(this.adHasLoaded<<0)+(this.adHasStarted<<1)+(this.adImpressionFired<<2)+(this.adVideoCompleteFired<<3)+(this.adUserCloseFired<<4)+(this.adSkippedFired<<5)+(this.adStoppedFired<<6)}});function bt(e,t){this.timeout=e,this.callback=t,this.timeoutRef=0}bt.prototype.startTimer=function(e){var t=this;e?this.callback(e):this.timeoutRef||(this.timeoutRef=setTimeout(function(){t.callback(e)},this.timeout))};var wt,At,Tt,Et=[We,G,pt,st,lt,ut,ft,vt,gt],St="",_t=!(bt.prototype.stopTimer=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=0,e&&this.callback(e)}),kt=!1,It=!1,Ct="2",Vt=!1,Pt=!1,xt=!1;function Ot(){var e="vd=1";return(e+=":vv="+Ct)+":vpov="+(xt?1:0)}function Mt(e){kt||(At.metViewableStandard(),wt.metViewableStandard(),function(e,t,i,n,r,a){var o=(new Date).getTime();if(e)try{e=we(e,["%InViewPercentage%","{pctview}"],"iv",n.getAverageInViewPercentage()),e=we(e,["%Viewable%","{initview}"],"v",t?"1":"2"),e=we(e,["%Measurable%","{Measurable}"],"im",i?"1":"2"),e=we(e,["%MeasurementType%","{MeasurementType}"],"m","2"),e=we(e,["%Timestamp%","{Timestamp}"],"r",o),e=we(e,["%BucketId%","{BucketId}"],"b",g),e=we(e,["%AdditionalData%","{AdditionalData}"],"ad","jv="+y+(a?":"+a:"")+":"+ye(n)),r&&(e+="&"+r),U(e)}catch(e){}}(St,At.inView&&wt.inView,At.isMeasurable&&wt.isMeasurable,wt,"plw="+At.playerWidth+"&plh="+At.playerHeight,Ot()+":fu="+(e?"1":"0"))),kt=!0}function Dt(){var e,t,i,n;It||function(e,t,i,n){try{U(v+(r=e,a=t,o=i,s=n,u="",d=(new Date).getTime(),c=function(){var t={count:-1,hash:""},i={},e=[];if(N.performance&&N.URL)try{t.count=0,(e=(e=e.concat(N.performance.getEntriesByType("resource"))).concat(N.performance.getEntriesByType("frame"))).forEach(function(e){e=new N.URL(e.name),i[e.host]||(i[e.host]=1,t.count++)}),t.hash=Fe(Object.keys(i).sort().join(":"))}catch(e){}return t}(),u+="gm0="+a.inView100For0Sec,u+="&gm1="+a.inView100For1Sec,u+="&tivt="+a.lastTotalInViewTime,u+="&hov="+r.hov,u+="&tth="+r.tth,u+="&intt="+r.intt,u+="&intl="+r.intl,u+="&tti="+r.tti,u+="&st="+(d-Z),u+="&foc="+r.foc,j&&!j[k]&&(r.adt+=(l=r.dwellStartTime,d-l)),u+="&adt="+r.adt,u+="&scr="+r.scr,u+="&ph="+r.ph,u+="&scd="+r.scd,u+="&svd="+(0<r.scrolledDownTime?Math.round(r.scrolledDownPixels/r.scrolledDownTime):0),u+="&svu="+(0<r.scrolledUpTime?Math.round(r.scrolledUpPixels/r.scrolledUpTime):0),u+="&sct="+r.sct,u+="&mivp="+a.maxInViewPercentage,u+="&mivt="+a.maxInViewTime,u+="&ls="+a.measurementBucket,u+="&winl="+et(de(B)),u+="&winr="+et(de(j&&j.referrer)),u+="&lvl="+function(){var e,t=0,i=N.top;try{if(i==N)t=0;else for(e=N.parent,t++;i!=e;)e=e.parent,t++}catch(e){t=-1}return t}(),u+="&atf=0",u+="&al="+function(){var e,t,i,n,r,a=3,o=[],s=[],l=[];if(N&&N.performance&&N.performance.getEntriesByType&&"function"==typeof N.performance.getEntriesByType){for(e=it("img","src"),t=it("script","src"),i=it("object","data"),n=N.performance.getEntriesByType("resource"),r=0;r<n.length;r++)"img"===n[r].initiatorType?o.push(n[r].name):"script"===n[r].initiatorType?s.push(n[r].name):"object"===n[r].initiatorType&&l.push(n[r].name);nt(e,o)||(a=2),nt(t,s)||(a=2),2!==(a=nt(i,l)?a:2)&&(a=1)}return a}(),u+="&ae="+r.ae,u+="&aw="+function(){var e,t,i,n=0,r=0,a=0,o=[],s=/(r\-(.*)\.html)|(sf(.*?)\.js)/gi;try{(e=N.performance)&&"function"===h(e[m])&&(o=e[m]("resource"))}catch(e){o=[]}for(;t=o[r++];){try{i=t.name,a=t.transferSize}catch(e){i="",a=0}a&&0<a&&i&&-1===i.search(s)&&(n+=a)}return n}(),u+="&ao="+function(e){var t,i,n="";try{if(i=B&&B.ancestorOrigins){if(t=i.length)for(var n=de(i[t-1]),r=0,a=de(i[0]);r<t-1&&n.length+(0===r?"":"").length+a.length<=255;a=de(i[++r]))n+=(0===r?"":"")+a;e.sao=t||0}else e.sao=-1}catch(t){n="",e.sao=-1}return n}(r),u+="&sao="+r.sao,u+="&lang="+et(F),u+="&sw="+(L?L.width:0),u+="&sh="+(L?L.height:0),u+="&tzo="+(new Date).getTimezoneOffset(),u+="&plgn="+et(c.hash),u+="&ci="+et(function(){var e,t,i;try{var n=j.createElement("canvas");return n.style.border="1px solid black",n.width=16,n.height=22,(i=n.getContext("2d")).font="15px 'Arial'",i.textBaseline="alphabetic",i[f]="#ffa",i.fillRect(1,1,15,20),i[f]="#00a",i[p]("yj",2,15),i[f]="rgba(100, 100, 100, 0.7)",i[p]("yj",4,17),t=(e=n.toDataURL("image/png")).split(","),Fe(2===t.length?t[1]:e)}catch(e){}return Fe("")}()),u+="&b="+g,u+="&ad=jv="+y+(s?":"+s:"")+":"+(d="querySelector"in j&&!Je(j,"querySelector"),r="CSS"in N&&"supports"in N.CSS&&!Je(N.CSS,"supports"),s="apif="+Qe(ze,4),s+=-1!==(d=d?Qe(Ge,2):-1)?":cslm=0:cslf="+d:":cslm=1:cslf=0",s+=-1!==(r=r?Qe(qe,2):-1)?":csrm=0:csrf="+r:":csrm=1:csrf=0")+":aih="+(a.adIsVideo?a.aihv+(a.adStackedInView<<4)+(a.adStuffedInView<<5):D+(a.adStackedInView<<4)+(a.adStuffedInView<<5))+":dc="+c.count+":ab="+function(){for(var e=0,t=0,i=0;i<Ze.length;i++){var n,r=1;if(Ze[i].getData)try{n=Ze[i].getData(Ze[i])}catch(e){}else n=Ze[i].value;e+=n<<t,t+=r=Ze[i].bits||r}return e}()+":pf="+W+":bt="+(function(){var e;try{e=H.battery||H.mozBattery||H.webkitBattery}catch(e){}return e}()?1:0)+":ac="+(function(){var e;try{e=N.OfflineAudioContext||N.webkitOfflineAudioContext}catch(e){}return e}()?1:0)+":wg="+(function(){var e,t;try{e=j.createElement("canvas")}catch(e){}try{t=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){}return t}()?1:0)+":dlm="+((c=H.connection||H.webkitConnection)&&c.type&&c.downlinkMax?c.downlinkMax:1/0)+":zi="+(function(){var e;try{e=re(M,["div","video","iframe","img","a"],20,20,function(e){return(e=N.getComputedStyle&&N.getComputedStyle(e)||e.currentStyle)&&e.zIndex&&""!==e.zIndex})}catch(e){}return e}()?1:0)+":lt="+tt+":aiff="+(Q&&$?1:0)+":aisf="+(K?1:0)+":fwd="+V+":fht="+C+":aihi="+D+":ads="+a.adStackedInView+":stu="+a.adStuffedInView+":aihv="+a.aihv+":"+ye(a),o&&(u+="&"+o),u))}catch(e){}var r,a,o,s,l,u,d,c}(ve,wt,"sek="+(n="sek=",(e=St)&&-1!==(t=e.indexOf(n))?(-1===(i=e.indexOf("&",t+n.length))&&(i=e.length),e.substring(t+n.length,i)):"")+"&plw="+At.playerWidth+"&plh="+At.playerHeight+(0<=ve.avoc?"&avoc="+ve.avoc:"")+"&mivl="+At.minVolume+"&mivlt="+At.maxTimeAtMinVolume+"&mxvl="+At.maxVolume+"&mxvlt="+At.maxTimeAtMaxVolume,Ot()),It=!0}function Rt(){Mt(!0),Dt(),At.cleanup(),wt.cleanup()}function Ut(){Rt(),fe(l,Nt),fe(u,jt)}function Nt(){Rt(),fe(l,Nt)}function jt(){Rt(),fe(u,jt)}function Lt(e){Pt=!1,e?Ut():At.isCurrentlyInView&&wt.isCurrentlyInView&&Tt.startTimer(),wt.adVideoIsPlayingInView=At.adHasStarted&&At.adIsPlaying}function Ht(e){Tt.stopTimer(),Pt=!0;var t=At.adHasStarted&&At.adIsPlaying;At.adVideoCompleteFired||(xt=Pt&&t),e&&Ut()}i.default=function(e){if(e&&(St=e.adParams&&e.adParams.viewabilityBeaconUrl)&&""!==St){var t;if(e.vpaidVersion&&(Ct=e.vpaidVersion),e.videoSlot&&!ne(e.videoSlot,b,w)?Vt=ue(e.videoSlot,e.videoSlot):e.slot&&(Vt=ue(e.slot)),ae(e.adWidth,e.adHeight),Tt=new bt(2e3,Mt),Vt){for(var i=0;i<Et.length&&!Et[i].prototype.canApplyMethod(e.adParams);i++);t=Et[i]}else t=gt;(wt=new t({adWidth:V,adHeight:C,inViewCallback:Lt,outOfViewCallback:Ht})).adIsVideo=!0,(At=new yt({adUnit:e.vpaidJSWrapper,playerId:e.adParams.playerId,inViewCallback:Lt,outOfViewCallback:Ht,adLoaded:function(){wt.init(),_t=!0},adSizeChanged:function(){_t&&wt.reset()},adVideoComplete:function(){At.isCurrentlyInView&&wt.isCurrentlyInView&&(0<At.minVolume&&999!==At.minVolume?ve.avoc=1:999===At.minVolume&&(ve.avoc=-1)),At.adUnit&&At.adUnit.getAdVolume?ve.avoc_debug=0<At.adUnit.getAdVolume()?"1":"2":ve.avoc_debug="0"}})).init(),he("resize",function(){ae(),_t&&wt.reset()}),he(l,Nt),he(u,jt),ge(),function(){for(var e=0;e<Ze.length;e++)if(Ze[e].init)try{Ze[e].init(Ze[e])}catch(e){}}()}}},{}],2:[function(e,t,i){"use strict";t.exports=function(r,e,t,i){function n(n){return function(){var e,t=-1;if("number"==typeof(e=r&&r.getAdVolume?r.getAdVolume():e)&&!isNaN(e)&&0<=e&&(t=e),o.addEvent({type:n,adVolume:t}),-1!==h.indexOf(n)&&r&&r.unsubscribe&&!c)for(var i in c=!0,d)if(d.hasOwnProperty&&d.hasOwnProperty(i))try{r.unsubscribe(d[i],i)}catch(e){}}}var a=document.createElement("script"),o={events:[],addEvent:function(e){s.sendEvent?(o.events&&(s.sendEvent(o.events),o.events=!1),s.sendEvent(e)):o.events.push(e)}},s={adData:{ids:t,vpaid:r,build:"cc07a80-clean"},dispatchEvent:o.addEvent};t="_moatApi"+Math.floor(1e8*Math.random());var l,u,d={AdStarted:n("AdStarted"),AdStopped:n("AdStopped"),AdSkipped:n("AdSkipped"),AdLoaded:n("AdLoaded"),AdLinearChange:n("AdLinearChange"),AdSizeChange:n("AdSizeChange"),AdExpandedChange:n("AdExpandedChange"),AdSkippableStateChange:n("AdSkippableStateChange"),AdDurationChange:n("AdDurationChange"),AdRemainingTimeChange:n("AdRemainingTimeChange"),AdVolumeChange:n("AdVolumeChange"),AdImpression:n("AdImpression"),AdClickThru:n("AdClickThru"),AdInteraction:n("AdInteraction"),AdVideoStart:n("AdVideoStart"),AdVideoFirstQuartile:n("AdVideoFirstQuartile"),AdVideoMidpoint:n("AdVideoMidpoint"),AdVideoThirdQuartile:n("AdVideoThirdQuartile"),AdVideoComplete:n("AdVideoComplete"),AdUserAcceptInvitation:n("AdUserAcceptInvitation"),AdUserMinimize:n("AdUserMinimize"),AdUserClose:n("AdUserClose"),AdPaused:n("AdPaused"),AdPlaying:n("AdPlaying"),AdError:n("AdError")},c=!1,h=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(r&&r.subscribe)for(var e in d)d.hasOwnProperty&&d.hasOwnProperty(e)&&r.subscribe(d[e],e)}();try{u=(l=e.ownerDocument).defaultView||l.parentWindow}catch(e){l=document,u=window}return u[t]=s,a.type="text/javascript",e&&e.insertBefore(a,e.childNodes[0]||null),a.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t,s}},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default="2.1.59"},{}],4:[function(e,B,t){!function(j,L,H){!function(){!function(){var e,v={};function g(){}function r(e){return e}function t(e){return!!e}function i(e){return!e}var n="object"==typeof self&&self.self===self&&self||"object"==typeof L&&L.global===L&&L||this;function d(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function y(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=n&&(e=n.async),v.noConflict=function(){return n.async=e,v};var a=Object.prototype.toString,b=Array.isArray||function(e){return"[object Array]"===a.call(e)};function o(e){return b(e)||"number"==typeof e.length&&0<=e.length&&e.length%1==0}function w(e,t){for(var i=-1,n=e.length;++i<n;)t(e[i],i,e)}function s(e,t){for(var i=-1,n=e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function l(e){return s(Array(e),function(e,t){return t})}function A(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var T=Object.keys||function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i};function c(e){var t,i,n=-1;return o(e)?(t=e.length,function(){return++n<t?n:null}):(i=T(e),t=i.length,function(){return++n<t?i[n]:null})}function E(n,r){return r=null==r?n.length-1:+r,function(){for(var e=Math.max(arguments.length-r,0),t=Array(e),i=0;i<e;i++)t[i]=arguments[i+r];switch(r){case 0:return n.call(this,t);case 1:return n.call(this,arguments[0],t)}}}function u(n){return function(e,t,i){return n(e,i)}}var h="function"==typeof H&&H,f=h?function(e){h(e)}:function(e){setTimeout(e,0)};function p(u){return function(i,n,r){r=y(r||g);var a=c(i=i||[]);if(u<=0)return r(null);var o=!1,s=0,l=!1;!function t(){if(o&&s<=0)return r(null);for(;s<u&&!l;){var e=a();if(null===e)return o=!0,s<=0&&r(null),0;s+=1,n(i[e],e,d(function(e){--s,e?(r(e),l=!0):t()}))}}()}}function m(n){return function(e,t,i){return n(v.eachOf,e,t,i)}}function S(r){return function(e,t,i,n){return r(p(t),e,i,n)}}function _(n){return function(e,t,i){return n(v.eachOfSeries,e,t,i)}}function k(e,t,r,i){i=y(i||g);var a=o(t=t||[])?[]:{};e(t,function(e,i,n){r(e,function(e,t){a[i]=t,n(e)})},function(e){i(e,a)})}function I(e,t,r,i){var a=[];e(t,function(t,i,n){r(t,function(e){e&&a.push({index:i,value:t}),n()})},function(){i(s(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function C(e,t,i,n){I(e,t,function(e,t){i(e,function(e){t(!e)})},n)}function V(o,s,l){return function(e,t,n,r){function i(){r&&r(l(!1,void 0))}function a(t,e,i){if(!r)return i();n(t,function(e){r&&s(e)&&(r(l(!0,t)),r=n=!1),i()})}3<arguments.length?o(e,t,a,i):(r=n,n=t,o(e,a,i))}}function P(e,t){return t}function x(e,t,i){i=i||g;var r=o(t)?[]:{};e(t,function(e,i,n){e(E(function(e,t){t.length<=1&&(t=t[0]),r[i]=t,n(e)}))},function(e){i(e,r)})}function O(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(e,t){r=r.concat(t||[]),i(e)})},function(e){i(e,r)})}function M(i,e,t){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function n(t,e,i,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(t.started=!0,0===(e=b(e)?e:[e]).length&&t.idle())return v.setImmediate(function(){t.drain()});w(e,function(e){e={data:e,callback:n||g},i?t.tasks.unshift(e):t.tasks.push(e),t.tasks.length===t.concurrency&&t.saturated()}),v.setImmediate(t.process)}var r=0,a=[],o={tasks:[],concurrency:e,payload:t,saturated:g,empty:g,drain:g,started:!1,paused:!1,push:function(e,t){n(o,e,!1,t)},kill:function(){o.drain=g,o.tasks=[]},unshift:function(e,t){n(o,e,!0,t)},process:function(){for(;!o.paused&&r<o.concurrency&&o.tasks.length;){var e=o.payload?o.tasks.splice(0,o.payload):o.tasks.splice(0,o.tasks.length),t=s(e,function(e){return e.data});0===o.tasks.length&&o.empty(),r+=1,a.push(e[0]),e=d(function(t,i){return function(){--r;var n=!1,e=arguments;w(i,function(i){w(a,function(e,t){e!==i||n||(a.splice(t,1),n=!0)}),i.callback.apply(i,e)}),t.tasks.length+r===0&&t.drain(),t.process()}}(o,e)),i(t,e)}},length:function(){return o.tasks.length},running:function(){return r},workersList:function(){return a},idle:function(){return o.tasks.length+r===0},pause:function(){o.paused=!0},resume:function(){if(!1!==o.paused){o.paused=!1;for(var e=Math.min(o.concurrency,o.tasks.length),t=1;t<=e;t++)v.setImmediate(o.process)}}};return o}function D(i){return E(function(e,t){e.apply(null,t.concat([E(function(e,t){"object"==typeof console&&(e||console[i]&&w(t,function(e){}))})]))})}function R(n){return function(e,t,i){n(l(e),t,i)}}function U(a){return E(function(t,e){var i=E(function(n){var r=this,e=n.pop();return a(t,function(e,t,i){e.apply(r,n.concat([i]))},e)});return e.length?i.apply(this,e):i})}function N(n){return E(function(e){var t=e.pop();e.push(function(){var e=arguments;i?v.setImmediate(function(){t.apply(null,e)}):t.apply(null,e)});var i=!0;n.apply(this,e),i=!1})}"object"==typeof j&&"function"==typeof j.nextTick?v.nextTick=j.nextTick:v.nextTick=f,v.setImmediate=h?f:v.nextTick,v.forEach=v.each=function(e,t,i){return v.eachOf(e,u(t),i)},v.forEachSeries=v.eachSeries=function(e,t,i){return v.eachOfSeries(e,u(t),i)},v.forEachLimit=v.eachLimit=function(e,t,i,n){return p(t)(e,u(i),n)},v.forEachOf=v.eachOf=function(e,t,i){i=y(i||g);for(var n,r=c(e=e||[]),a=0;null!=(n=r());)a+=1,t(e[n],n,d(o));function o(e){a--,e?i(e):null===n&&a<=0&&i(null)}0===a&&i(null)},v.forEachOfSeries=v.eachOfSeries=function(e,n,r){r=y(r||g);var a=c(e=e||[]),o=a();!function t(){var i=!0;if(null===o)return r(null);n(e[o],o,d(function(e){if(e)r(e);else{if(null===(o=a()))return r(null);i?v.setImmediate(t):t()}})),i=!1}()},v.forEachOfLimit=v.eachOfLimit=function(e,t,i,n){p(t)(e,i,n)},v.map=m(k),v.mapSeries=_(k),v.mapLimit=S(k),v.inject=v.foldl=v.reduce=function(e,n,r,t){v.eachOfSeries(e,function(e,t,i){r(n,e,function(e,t){n=t,i(e)})},function(e){t(e,n)})},v.foldr=v.reduceRight=function(e,t,i,n){e=s(e,r).reverse(),v.reduce(e,t,i,n)},v.transform=function(e,n,r,t){3===arguments.length&&(t=r,r=n,n=b(e)?[]:{}),v.eachOf(e,function(e,t,i){r(n,e,t,i)},function(e){t(e,n)})},v.select=v.filter=m(I),v.selectLimit=v.filterLimit=S(I),v.selectSeries=v.filterSeries=_(I),v.reject=m(C),v.rejectLimit=S(C),v.rejectSeries=_(C),v.any=v.some=V(v.eachOf,t,r),v.someLimit=V(v.eachOfLimit,t,r),v.all=v.every=V(v.eachOf,i,i),v.everyLimit=V(v.eachOfLimit,i,i),v.detect=V(v.eachOf,r,P),v.detectSeries=V(v.eachOfSeries,r,P),v.detectLimit=V(v.eachOfLimit,r,P),v.sortBy=function(e,t,i){function n(e,t){return(e=e.criteria)<(t=t.criteria)?-1:t<e?1:0}v.map(e,function(i,n){t(i,function(e,t){e?n(e):n(null,{value:i,criteria:t})})},function(e,t){return e?i(e):void i(null,s(t.sort(n),function(e){return e.value}))})},v.auto=function(s,l,u){"function"==typeof arguments[1]&&(u=l,l=null),u=y(u||g);var e=T(s),t=e.length;if(!t)return u(null);l=l||t;var d={},c=0,h=!1,f=[];function p(e){f.unshift(e)}function m(){t--,w(f.slice(0),function(e){e()})}p(function(){t||u(null,d)}),w(e,function(a){if(!h){for(var e,i=b(s[a])?s[a]:[s[a]],n=E(function(e,t){var i,n,r;c--,t.length<=1&&(t=t[0]),e?(i={},r=function(e,t){i[t]=e},w(T(n=d),function(e){r(n[e],e)}),i[a]=t,h=!0,u(e,i)):(d[a]=t,v.setImmediate(m))}),t=i.slice(0,i.length-1),r=t.length;r--;){if(!(e=s[t[r]]))throw new Error("Has nonexistent dependency in "+t.join(", "));if(b(e)&&0<=A(e,a))throw new Error("Has cyclic dependencies")}o()?(c++,i[i.length-1](n,d)):p(function e(){var t;o()&&(c++,0<=(t=A(f,t=e))&&f.splice(t,1),i[i.length-1](n,d))})}function o(){return c<l&&(n=function(e,t){return e&&d.hasOwnProperty(t)},r=!0,w(t,function(e,t,i){r=n(r,e)}),r)&&!d.hasOwnProperty(a);var n,r}})},v.retry=function(e,t,i){var n=[],r={times:5,interval:0},a=arguments.length;if(a<1||3<a)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function o(i,t){for(;r.times;){var e=!--r.times;n.push(function(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}(r.task,e)),!e&&0<r.interval&&n.push(function(t){return function(e){setTimeout(function(){e(null)},t)}}(r.interval))}v.series(n,function(e,t){t=t[t.length-1],(i||r.callback)(t.err,t.result)})}return a<=2&&"function"==typeof e&&(i=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||5;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||5,e.interval=parseInt(t.interval,10)||0}}(r,e),r.callback=i,r.task=t,r.callback?o():o},v.waterfall=function(e,r){if(r=y(r||g),!b(e)){var t=new Error("First argument to waterfall must be an array of functions");return r(t)}if(!e.length)return r();!function i(n){return E(function(e,t){e?r.apply(null,[e].concat(t)):((e=n.next())?t.push(i(e)):t.push(r),N(n).apply(null,t))})}(v.iterator(e))()},v.parallel=function(e,t){x(v.eachOf,e,t)},v.parallelLimit=function(e,t,i){x(p(t),e,i)},v.series=function(e,t){x(v.eachOfSeries,e,t)},v.iterator=function(n){return function e(t){function i(){return n.length&&n[t].apply(null,arguments),i.next()}return i.next=function(){return t<n.length-1?e(t+1):null},i}(0)},v.apply=E(function(t,i){return E(function(e){return t.apply(null,i.concat(e))})}),v.concat=m(O),v.concatSeries=_(O),v.whilst=function(i,n,r){var a;r=r||g,i()?(a=E(function(e,t){e?r(e):i.apply(this,t)?n(a):r.apply(null,[null].concat(t))}),n(a)):r(null)},v.doWhilst=function(e,t,i){var n=0;return v.whilst(function(){return++n<=1||t.apply(this,arguments)},e,i)},v.until=function(e,t,i){return v.whilst(function(){return!e.apply(this,arguments)},t,i)},v.doUntil=function(e,t,i){return v.doWhilst(e,function(){return!t.apply(this,arguments)},i)},v.during=function(i,n,r){r=r||g;var a=E(function(e,t){e?r(e):(t.push(o),i.apply(this,t))}),o=function(e,t){e?r(e):t?n(a):r(null)};i(o)},v.doDuring=function(e,t,i){var n=0;v.during(function(e){n++<1?e(null,!0):t.apply(this,arguments)},e,i)},v.queue=function(i,e){return M(function(e,t){i(e[0],t)},e,1)},v.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}var n=v.queue(e,t);return n.push=function(e,t,i){!function(t,e,i,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(t.started=!0,0===(e=b(e)?e:[e]).length)return v.setImmediate(function(){t.drain()});w(e,function(e){t.tasks.splice(function(e,t,i){for(var n=-1,r=e.length-1;n<r;){var a=n+(r-n+1>>>1);0<=i(t,e[a])?n=a:r=a-1}return n}(t.tasks,e={data:e,priority:i,callback:"function"==typeof n?n:g},r)+1,0,e),t.tasks.length===t.concurrency&&t.saturated(),v.setImmediate(t.process)})}(n,e,t,i)},delete n.unshift,n},v.cargo=function(e,t){return M(e,1,t)},v.log=D("log"),v.dir=D("dir"),v.memoize=function(i,n){var a={},o={},s=Object.prototype.hasOwnProperty;n=n||r;var e=E(function(e){var t=e.pop(),r=n.apply(null,e);s.call(a,r)?v.setImmediate(function(){t.apply(null,a[r])}):s.call(o,r)?o[r].push(t):(o[r]=[t],i.apply(null,e.concat([E(function(e){a[r]=e;var t=o[r];delete o[r];for(var i=0,n=t.length;i<n;i++)t[i].apply(null,e)})])))});return e.memo=a,e.unmemoized=i,e},v.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},v.times=R(v.map),v.timesSeries=R(v.mapSeries),v.timesLimit=function(e,t,i,n){return v.mapLimit(l(e),t,i,n)},v.seq=function(){var t=arguments;return E(function(e){var n=this,i=e[e.length-1];"function"==typeof i?e.pop():i=g,v.reduce(t,e,function(e,t,i){t.apply(n,e.concat([E(function(e,t){i(e,t)})]))},function(e,t){i.apply(n,[e].concat(t))})})},v.compose=function(){return v.seq.apply(null,Array.prototype.reverse.call(arguments))},v.applyEach=U(v.eachOf),v.applyEachSeries=U(v.eachOfSeries),v.forever=function(e,t){var i=d(t||g),n=N(e);!function e(t){return t?i(t):void n(e)}()},v.ensureAsync=N,v.constant=E(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),v.wrapSync=v.asyncify=function(n){return E(function(e){var t,i=e.pop();try{t=n.apply(this,e)}catch(e){return i(e)}("function"==(e=typeof t)||"object"==e&&t)&&"function"==typeof t.then?t.then(function(e){i(null,e)}).catch(function(e){i(e.message?e:new Error(e))}):i(null,t)})},"object"==typeof B&&B.exports?B.exports=v:n.async=v}()}.call(this)}.call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:5,timers:6}],5:[function(e,t,i){var n,r,t=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,u=[],d=!1,c=-1;function h(){d&&l&&(d=!1,l.length?u=l.concat(u):c=-1,u.length&&f())}function f(){if(!d){var e=s(h);d=!0;for(var t=u.length;t;){for(l=u,u=[];++c<t;)l&&l[c].run();c=-1,t=u.length}l=null,d=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];u.push(new p(e,t)),1!==u.length||d||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(l,e,u){!function(i,s){!function(){var n=l("process/browser.js").nextTick,e=Function.prototype.apply,r=Array.prototype.slice,a={},o=0;function t(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof i?i:function(e){var t=o++,i=!(arguments.length<2)&&r.call(arguments,1);return a[t]=!0,n(function(){a[t]&&(i?e.apply(null,i):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof s?s:function(e){delete a[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":5,timers:6}],7:[function(e,T,E){!function(r,c){"use strict";function a(e,t){if("object"==typeof e&&(t=e,e=c),!(this instanceof a))return new a(e,t).getResult();var i=e||(void 0!==r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?v.extend(b,t):b;return this.getBrowser=function(){var e={name:c,version:c};return g.rgx.call(e,i,n.browser),e.major=v.major(e.version),e},this.getCPU=function(){var e={architecture:c};return g.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:c,model:c,type:c};return g.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:c,version:c};return g.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:c,version:c};return g.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=255<e.length?v.trim(e,255):e,this},this.setUA(i),this}var h="function",i="undefined",e="model",t="name",n="type",o="vendor",s="version",l="architecture",u="console",d="mobile",f="tablet",p="smarttv",m="wearable",v={extend:function(e,t){var i,n={};for(i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t==i?e:e.substring(0,255)}},g={rgx:function(e,t){for(var i,n,r,a,o,s=0;s<t.length&&!a;){for(var l=t[s],u=t[s+1],d=i=0;d<l.length&&!a;)if(a=l[d++].exec(e))for(n=0;n<u.length;n++)o=a[++i],"object"==typeof(r=u[n])&&0<r.length?2==r.length?typeof r[1]==h?this[r[0]]=r[1].call(this,o):this[r[0]]=r[1]:3==r.length?typeof r[1]!=h||r[1].exec&&r[1].test?this[r[0]]=o?o.replace(r[1],r[2]):c:this[r[0]]=o?r[1].call(this,o,r[2]):c:4==r.length&&(this[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):c):this[r]=o||c;s+=2}},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&0<t[i].length){for(var n=0;n<t[i].length;n++)if(v.has(t[i][n],e))return"?"===i?c:i}else if(v.has(t[i],e))return"?"===i?c:i;return e}},y={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[s,[t,"Chrome"]],[/(?:edgios|edga|edg)\/([\w\.]+)/i],[s,[t,"Edge"]],[/edge\/([\w\.]+)/i],[[s,g.str,y.browser.oldEdge.version],[t,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,s],[/opios[\/\s]+([\w\.]+)/i],[s,[t,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[s,[t,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|instagram)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[t,s],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[s,[t,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[s,[t,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[s,[t,"WeChat"]],[/konqueror\/([\w\.]+)/i],[s,[t,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[s,[t,"IE"]],[/yabrowser\/([\w\.]+)/i],[s,[t,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[t,/(.+)/,"$1 Secure Browser"],s],[/focus\/([\w\.]+)/i],[s,[t,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[s,[t,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[s,[t,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[s,[t,"Dolphin"]],[/coast\/([\w\.]+)/i],[s,[t,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[t,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[s,[t,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[t,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[t,/(.+)/,"$1 Browser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],s],[/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[t,s],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[t],[/;fbav\/([\w\.]+);/i],[s,[t,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[t,"Facebook"]],[/\s(electron)\/([\w\.]+)\ssafari/i,/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i],[t,s],[/\bgsa\/([\w\.]+)\s.*safari\//i],[s,[t,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,"Chrome WebView"],s],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[s,[t,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,s],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[s,[t,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[s,t],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[s,g.str,y.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[t,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[l,"amd64"]],[/(ia32(?=;))/i],[[l,v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[l,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[l,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[l,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[l,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[l,/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[[l,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[l,v.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-p(?:605|610|587)|sm-t\w+|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus\s10)/i],[e,[o,"Samsung"],[n,f]],[/(s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[e,[o,"Samsung"],[n,d]],[/\((ip(?:hone|od)[\s\w]*);/i],[e,[o,"Apple"],[n,d]],[/\((ipad);[\w\s\),;-]+(apple)/i],[e,o,[n,f]],[/applecoremedia\/[\w\.]+\s\((ipad)/i],[e,[o,"Apple"],[n,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[e,[o,"Huawei"],[n,d]],[/\b(bah2?-a?[lw]\d{2})/i],[e,[o,"Huawei"],[n,f]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\s+build\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[e,/_/g," "],[o,"Xiaomi"],[n,d]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[e,/_/g," "],[o,"Xiaomi"],[n,f]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[e,[o,"OPPO"],[n,d]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[e,[o,"Vivo"],[n,d]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[e,[o,"Realme"],[n,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot[\s-](\w*)/i,/(moto[\s\w\(\)]+(?=\sbuild|\)))/i,/(xt\d{3,4})\sbuild\//i,/(nexus\s6)/i],[e,[o,"Motorola"],[n,d]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[o,"Motorola"],[n,f]],[/((?=lg)?[vl]k\-?\d{3})\s+build|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[e,[o,"LG"],[n,f]],[/(nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\s+build/i],[e,[o,"LG"],[n,d]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|[\w-]+)/i],[e,[o,"Lenovo"],[n,f]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[e,[o,"Nokia"],[n,d]],[/droid.+;\s(pixel\sc)[\s)]/i],[e,[o,"Google"],[n,f]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[e,[o,"Google"],[n,d]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[o,"Sony"],[n,d]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[e,"Xperia Tablet"],[o,"Sony"],[n,f]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\s+build/i,/\boneplus\s(a\d{4})[\s)]/i],[e,[o,"OnePlus"],[n,d]],[/(alexa)webm/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[e,[o,"Amazon"],[n,f]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[e,"Fire Phone"],[o,"Amazon"],[n,d]],[/\((playbook);[\w\s\),;-]+(rim)/i],[e,o,[n,f]],[/\(bb10;\s(\w+)/i],[e,[o,"BlackBerry"],[n,d]],[/\b(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00c)/i],[e,[o,"ASUS"],[n,f]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[e,[o,"ASUS"],[n,d]],[/(nexus\s9)/i],[e,[o,"HTC"],[n,f]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[o,[e,/_/g," "],[n,d]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[o,"Acer"],[n,f]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[e,[o,"Meizu"],[n,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,e,[n,d]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[o,e,[n,f]],[/\s(surface\sduo)\s/i],[e,[o,"Microsoft"],[n,f]],[/\s(u304aa)\sbuild/i],[e,[o,"AT&T"],[n,d]],[/sie-(\w*)/i],[e,[o,"Siemens"],[n,d]],[/[;\/]\s?(rct\w+)\sbuild/i],[e,[o,"RCA"],[n,f]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[e,[o,"Dell"],[n,f]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[e,[o,"Verizon"],[n,f]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[e,[o,"Barnes & Noble"],[n,f]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[e,[o,"NuVision"],[n,f]],[/;\s(k88)\sbuild/i],[e,[o,"ZTE"],[n,f]],[/;\s(nx\d{3}j)\sbuild/i],[e,[o,"ZTE"],[n,d]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[e,[o,"Swiss"],[n,d]],[/[;\/]\s?(zur\d{3})\sbuild/i],[e,[o,"Swiss"],[n,f]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[e,[o,"Zeki"],[n,f]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[o,"Dragon Touch"],e,[n,f]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[e,[o,"Insignia"],[n,f]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[e,[o,"NextBook"],[n,f]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[o,"Voice"],e,[n,d]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[o,"LvTel"],e,[n,d]],[/;\s(ph-1)\s/i],[e,[o,"Essential"],[n,d]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[e,[o,"Envizen"],[n,f]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[e,[o,"MachSpeed"],[n,f]],[/[;\/]\s?tu_(1491)\sbuild/i],[e,[o,"Rotor"],[n,f]],[/(shield[\w\s]+)\sbuild/i],[e,[o,"Nvidia"],[n,f]],[/(sprint)\s(\w+)/i],[o,e,[n,d]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[o,"Microsoft"],[n,d]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[e,[o,"Zebra"],[n,f]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[e,[o,"Zebra"],[n,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[o,e,[n,u]],[/droid.+;\s(shield)\sbuild/i],[e,[o,"Nvidia"],[n,u]],[/(playstation\s[345portablevi]+)/i],[e,[o,"Sony"],[n,u]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[e,[o,"Microsoft"],[n,u]],[/smart-tv.+(samsung)/i],[o,[n,p],e],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[o,"Samsung"],[n,p]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[o,"LG"],e,[n,p]],[/(apple)\s?tv/i],[o,[e,"Apple TV"],[n,p]],[/crkey/i],[[e,"Chromecast"],[o,"Google"],[n,p]],[/droid.+aft([\w])(\sbuild\/|\))/i],[e,[o,"Amazon"],[n,p]],[/\(dtv[\);].+(aquos)/i],[e,[o,"Sharp"],[n,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,v.trim],[e,v.trim],[n,p]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[n,p]],[/((pebble))app\/[\d\.]+\s/i],[o,e,[n,m]],[/droid.+;\s(glass)\s\d/i],[e,[o,"Google"],[n,m]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[e,[o,"Zebra"],[n,m]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[e,[n,d]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[e,[n,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,v.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[o,"Generic"]],[/(phone)/i],[[n,d]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[t,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[s,[t,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,s],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[s,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[t,[s,g.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[s,g.str,y.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[s,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[t,"Mac OS"],[s,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i],[t,s],[/\(bb(10);/i],[s,[t,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[s,[t,"Symbian"]],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[s,[t,"webOS"]],[/crkey\/([\d\.]+)/i],[s,[t,"Chromecast"]],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],s],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i],[t,s],[/(haiku)\s(\w+)/i],[t,s],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,s]]};a.VERSION="0.7.26",a.BROWSER={NAME:t,MAJOR:"major",VERSION:s},a.CPU={ARCHITECTURE:l},a.DEVICE={MODEL:e,VENDOR:o,TYPE:n,CONSOLE:u,MOBILE:d,SMARTTV:p,TABLET:f,WEARABLE:m,EMBEDDED:"embedded"},a.ENGINE={NAME:t,VERSION:s},a.OS={NAME:t,VERSION:s},typeof E!=i?(E=typeof T!=i&&T.exports?T.exports=a:E).UAParser=a:void 0!==r&&(r.UAParser=a);var w,A=void 0!==r&&(r.jQuery||r.Zepto);A&&!A.ua&&(w=new a,A.ua=w.getResult(),A.ua.get=function(){return w.getUA()},A.ua.set=function(e){w.setUA(e);var t,i=w.getResult();for(t in i)A.ua[t]=i[t]})}("object"==typeof window?window:this)},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.pixels=e.pixels||[],e.sources=e.sources||[],e.features=e.features||[],e.options=e.options||{},e.videoClicks=e.videoClicks||{},e.videoClicks.clickTracking=e.videoClicks.clickTracking||[],e.error=e.error||[],e.metadata=e.metadata||{},e.metadata.demandSourceId=e.metadata.demandSourceId||0,t(null,e)}},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.metadata.protocol=(0,n.getTrueUrlInfo)().topUrl.match(/^(\w+):/)[1]||"https",e.metadata.vpaidJSWrapperVersion=r.vpaidJSWrapperVersion,t(null,e)};var n=e("../util/url"),r=e("../metadata.json")},{"../metadata.json":28,"../util/url":37}],10:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(e=e("../constants.js")).NODE_TYPE.TEXT_NODE,s=e.NODE_TYPE.CDATA_SECTION_NODE,l=e.NODE_TYPE.COMMENT_NODE;function r(){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this)}i.default=(e=r,i=[{key:"allImmediateChildrenByNames",value:function(e,i){var n={};return e&&(e=e.childNodes||[],Array.prototype.forEach.call(e,function(e){var t=e.nodeName;1===e.nodeType&&(!i||0===i.length||-1<i.indexOf(t))&&(n[t]||(n[t]=[]),n[t].push(e))})),n}},{key:"getText",value:function(e){return function e(t){for(var i,n,r="",a=0;i=t[a++];)i.nodeType===o||i.nodeType===s?(n=i.nodeValue&&i.nodeValue.trim())&&(r+=n):i.nodeType!==l&&(r+=e(i.childNodes));return r}([e])}}],null&&n(e.prototype,null),n(e,i),r)},{"../constants.js":19}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){new n.default(e).fire("VISTA_LOADED"),t(null,e)};var n=(e=e("../diag"))&&e.__esModule?e:{default:e}},{"../diag":20}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i;i=[r.default,a.default,o.default,s.default,l.default,u.default,d.default],t=t,i[0]&&(i[0]=n.default.apply(i[0],e)),n.default.waterfall(i,t)};var n=c(e("async")),r=c(e("./parse_yahoo_adparams.js")),a=c(e("./add_defaults.js")),o=c(e("./add_metadata.js")),s=c(e("./fire_init_pixels.js")),l=c(e("./vast_parser.js")),u=c(e("./map_vast_vpaid.js")),d=c(e("./process_click_tracking.js"));function c(e){return e&&e.__esModule?e:{default:e}}},{"./add_defaults.js":8,"./add_metadata.js":9,"./fire_init_pixels.js":11,"./map_vast_vpaid.js":13,"./parse_yahoo_adparams.js":15,"./process_click_tracking.js":16,"./vast_parser.js":17,async:4}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.pixels.forEach(function(e){var t;"progress"===e.event&&void 0!==e.offset&&(e.offset=(i=e.offset,(t=i.match(/^(\d{2}):(\d{2}):(\d{2})(.(\d{3}))?$/))?{type:"time",offset:3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseInt(t[3],10)+(t[5]?parseInt(t[5],10)/1e3:0)}:(i=i.match(/^(\d+)%$/))?{type:"percentage",offset:parseInt(i[1],10)}:null));var i=n[e.event];i&&(e.event=i)}),t(null,e)};var n={skip:"AdSkipped",creativeView:"AdStarted",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",acceptInvitation:"AdUserAcceptInvitation",collapse:"AdUserMinimize",close:"AdUserClose",pause:"AdPaused",resume:"AdPlaying",error:"AdError"}},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=new o.default;t.width=+e.getAttribute("width")||0,t.height=+e.getAttribute("height")||0,t.xPosition=+e.getAttribute("xPosition")||e.getAttribute("xPosition"),t.yPosition=+e.getAttribute("yPosition")||e.getAttribute("yPosition"),t.offset=(0,a.timeToSec)(e.getAttribute("offset")||""),t.duration=(0,a.timeToSec)(e.getAttribute("duration")||"");var i=s.default.allImmediateChildrenByNames(e),n=i.IconClicks[0],r=s.default.allImmediateChildrenByNames(n),e=r.IconClickThrough&&r.IconClickThrough[0],n=r.IconClickTracking&&r.IconClickTracking[0];return i.StaticResource&&i.StaticResource[0]&&(r=i.StaticResource[0],t.staticResourceUrl=s.default.getText(r).trim(),t.staticResourceType=r.getAttribute("creativeType")),i.IconViewTracking&&i.IconViewTracking[0]&&(t.viewTrackingUrl=s.default.getText(i.IconViewTracking[0]).trim()),e&&(t.clickThroughUrl=s.default.getText(e).trim()),n&&(t.clickTrackingUrl=s.default.getText(n).trim()),t};var a=e("../util/timeToSec.js"),o=n(e("../model/icon.js")),s=n(e("./dom.js"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../model/icon.js":29,"../util/timeToSec.js":36,"./dom.js":10}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=null,n=null;if("object"===a(e))i=e;else try{i=function(e){var t={};try{var i=JSON.parse(e);if(i){f(i.viewableImpression,function(e){t.viewabilityBeaconUrl=e}),t.pixels=t.pixels||[];var n=i.impression;t.pixels=t.pixels.concat(p(n).map(function(e){return{event:"impression",url:e}})),t.sources=i.sources||[];var r=i.mediaFiles;t.sources=t.sources.concat(p(r).map(function(e){return{url:e.value&&e.value.replace(/^\s+|\s+$/g,""),mimetype:e.type,apiFramework:e.apiFramework,bitrate:e.bitrate}}));var a=i.vastAdTagURI;t.sources=t.sources.concat(p(a).map(function(e){return{url:e&&e.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"}}));var o=i.trackingEvents;t.pixels=t.pixels.concat(p(o).map(function(e){return{event:e.eventType,url:e.value,offset:e.offset}}));var s,l=i.error;t.error=t.error||[],t.error=t.error.concat(p(l).map(function(e){return{event:"error",url:e}})),t.videoClicks=t.videoClicks||{},t.videoClicks.clickTracking=t.videoClicks.clickTracking||[],i.videoClicks&&i.videoClicks.clickTracking&&(s=i.videoClicks.clickTracking,t.videoClicks.clickTracking=t.videoClicks.clickTracking.concat(p(s).map(function(e){return e}))),i.videoClicks&&i.videoClicks.clickThrough&&f(i.videoClicks.clickThrough,function(e){t.videoClicks.clickThrough=e}),t.metadata=t.metadata||{};var u=i.moatParams;if(u)for(var d in u){var c=d,h=u[d];c&&h&&(t.metadata[c]=h)}}}catch(e){throw new Error("JSON parsing error: "+e.message)}return t}(e)}catch(t){try{i=function(e){var t,i,n={};try{t=window.atob(e)}catch(e){throw new Error("XML parsing error: "+e.message)}if(null!==t)try{if(0<(i=(0,r.parseXml)(t)).getElementsByTagName("parsererror").length||i.parseError&&0!==i.parseError.errorCode)throw new Error(i.getElementsByTagName("parsererror")[0].nodeValue)}catch(e){throw new Error("XML parsing error: "+e.message)}return"YahooViewability"===i.documentElement.nodeName&&(o(i.getElementsByTagName("ViewableImpression"),function(e){n.viewabilityBeaconUrl=e.textContent}),n.pixels=n.pixels||[],o(i.getElementsByTagName("Impression"),function(e){n.pixels.push({event:"impression",url:e.textContent})}),n.sources=n.sources||[],o(i.getElementsByTagName("MediaFile"),function(e){n.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework")})}),o(i.getElementsByTagName("VASTAdTagURI"),function(e){n.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"})}),o(i.getElementsByTagName("Tracking"),function(e){n.pixels.push({event:e.getAttribute("event"),url:e.textContent})}),t=i.getElementsByTagName("Error"),n.error=n.error||[],o(t,function(e){n.error.push({event:e.getAttribute("event"),url:e.textContent})}),n.videoClicks=n.videoClicks||{},n.videoClicks.clickTracking=n.videoClicks.clickTracking||[],o(i.getElementsByTagName("ClickTracking"),function(e){n.videoClicks.clickTracking.push(e.textContent)}),(t=i.getElementsByTagName("ClickThrough")[0])&&(n.videoClicks.clickThrough=t.textContent),n.metadata=n.metadata||{},(i=function(e){if(e=e.getElementsByTagName("MOATparams")[0])return e.childNodes}(i))&&o(i,function(e){var t=e.nodeName,e=e.textContent;t&&e&&(n.metadata[t]=e)})),n}(e)}catch(t){n=t}}return t(n,i)};var r=e("../util/xml.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){[].forEach.call(e=e||[],t)}function f(e,t){e?Array.isArray(e)||(e=[e]):e=[],e.forEach(t)}function p(e){return e?Array.isArray(e)||(e=[e]):e=[],e}},{"../util/xml.js":39}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){t.videoClicks.clickTracking.forEach(function(e){return t.pixels.push({event:"AdClickThru",url:e})}),e(null,t)}},{}],17:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i,n,r,n=(n=(i=e).sources,r=null,n&&(i.sources=n.filter(function(e){return"application/xml"!==e.mimetype||(r=e.url,!1)})),r);e.debugData={vastUri:n},e.vastXmls=[],e.icons=[],n?c(n,e,t,0):t(null,e)};var v=r(e("../diag.js")),n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var i,n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&((n=a?Object.getOwnPropertyDescriptor(e,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]);return r.default=e,t&&t.set(e,r),r}(e("../macros")),g=e("../constants.js"),d=r(e("./parse_icon_element.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=5;function c(d,c,h,f){var p,m=new v.default(c);d=n.expand(d,null,[n.pageUrl]),a<=f?m.fire("VAST_MAX_DEPTH",function(){h(new Error("max VAST unwrapping depth reached"))}):(p=new XMLHttpRequest,-1===d.indexOf("s.yimg.com")&&-1===d.indexOf("l.yimg.com")&&(p.withCredentials=!0),0<=[].indexOf(d)&&(p.withCredentials=!1),p.onreadystatechange=function(){var t,i,n,r,a,e,o,s,l,u;4===p.readyState&&(e=p,o=m,s=h,l=y({},g.DM_MSG.REQ_STATUS,e.status),u={generalError:!1,corsError:!1},200!==e.status?null!==e.responseURL&&0===e.responseURL.length&&null===e.responseXML?u.corsError=!0:(o.fire("VAST_NOT_FOUND",function(){s(new Error("parseVast error: response status: "+e.status))},l),u.generalError=!0):e.responseXML||(o.fire("VAST_PARSER_ERROR",function(){s(new Error("parseVast error: missing responseXML"))},l),u.generalError=!0),(u=u).generalError||(u.corsError?(u=d,t=c,i=h,n=f,r=m,(a=new XMLHttpRequest).onreadystatechange=function(){var e=y({},g.DM_MSG.REQ_STATUS,a.status);4===a.readyState&&(200===a.status?b(t,a,i,n,r):r.fire("VAST_CORS_ERROR",function(){i(new Error("VAST_CORS_ERROR"))},e))},a.withCredentials=!1,a._url=u,a.open("GET",u),a.send()):b(c,p,h,f,m)))},p._url=d,p.open("GET",d),p.send())}function b(e,t,i,n,r){e.vastXmls.push(t.responseXML);var a,o,s,l=(s=(s=t.responseXML).getElementsByTagName("Ad")[0])?s.firstElementChild.tagName:null;switch(l){case"Wrapper":var u=(u=(u=t.responseXML).getElementsByTagName("VASTAdTagURI")[0])?u.textContent:null;u?c(u,e,i,n+1):r.fire("VAST_WRAPPER_URI_MISSING",function(){i(new Error("VASTAdTag URI not found"))});break;case"InLine":try{(o=e).vastXmls.forEach(function(e){return function(t,e){var i=new v.default(t);if(!(e=e.getElementsByTagName("Ad")[0])||1!==e.childElementCount||"null"===e)throw i.fire("VAST_MALFORMED"),Error("parseVastXml error: invalid VAST format");h(e.getElementsByTagName("Impression"),function(e){t.pixels.push({event:"impression",url:e.textContent})});for(var n=e.getElementsByTagName("Creative"),r=[],a=0,o=n.length;a<o;a++)r.push(n[a]);r.sort(function(e,t){return(e.getAttribute("sequence")||0)-(t.getAttribute("sequence")||0)});var s,l=[];r.forEach(function(e){var t,i=e.getElementsByTagName("MediaFile");for(t in i)1===i[t].nodeType&&l.push(i[t])}),l.length<1&&(l=e.getElementsByTagName("MediaFile")),t.sources=[],h(l,function(e){t.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework"),bitrate:e.getAttribute("bitrate")})}),h(e.getElementsByTagName("Tracking"),function(e){t.pixels.push({event:e.getAttribute("event"),url:e.textContent})}),h(e.getElementsByTagName("ClickTracking"),function(e){t.videoClicks.clickTracking.push(e.textContent)}),(i=e.getElementsByTagName("ClickThrough")[0])&&(t.videoClicks.clickThrough=i.textContent),(i=e.getElementsByTagName("AdParameters")[0])&&(t.thirdPartyAdParams=i.textContent),s=null,!(i=(i=e).getElementsByTagName("Icons")[0])||(i=i.getElementsByTagName("Icon")[0])&&(s=(0,d.default)(i)),(e=s)&&t.icons.push(e)}(o,e)}),a=o}catch(e){return i(new Error("addAdParams error: "+e.message)),0}i(null,a);break;default:r.fire("VAST_MISSING_AD_TYPE",function(){i(new Error("vast error: no ad type found"))},y({},g.DM_MSG.AD_TYPE,l))}}function h(e,t){[].forEach.call(e=e||[],t)}},{"../constants.js":19,"../diag.js":20,"../macros":27,"./parse_icon_element.js":14}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default={adPlaybackTimeout:6e5,vpaidCreativeMethodTimeout:2e4,scoutWatchShouldFire:{AdImpression:!0,AdVideoStart:!0,AdVideoFirstQuartile:!0,AdVideoMidpoint:!0,AdVideoThirdQuartile:!0,AdVideoComplete:!0,AdStopped:!0,AdError:!0,AdClickThru:!0,AdSizeChange:!0,AdDurationChange:!0}}},{}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IMAGE_TYPES=i.NODE_TYPE=i.VIDEO_MEDIA_ERR=i.DM_MSG=void 0,i.DM_MSG={ERROR_MSG:"errMsg",TAG_STATUS_CODE:"tagStatusCode",REQ_STATUS:"reqStatus",AD_TYPE:"adType",MIME:"mime",URL:"url",ELAPSED_TIME:"et"},i.VIDEO_MEDIA_ERR={ABORTED:1,NETWORK:2,DECODE:3,SRC_NOT_SUPPORTED:4},i.NODE_TYPE={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},i.IMAGE_TYPES=["image/jpeg","image/jpg","image/gif","image/png"]},{}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.MAX_DM_URL_LENGTH=void 0;var n=l(e("./util/fire.js")),r=l(e("../lib/version.js")),a=e("./constants.js"),o=e("./util/url.js"),s=l(e("./util/sanitizeUrl.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=e("ua-parser-js");i.MAX_DM_URL_LENGTH=800;var c={VAST_NOT_FOUND:20001,VAST_PARSER_ERROR:20002,VAST_WRAPPER_URI_MISSING:20003,VAST_MALFORMED:20004,VAST_NO_AD:20005,VAST_MAX_DEPTH:20006,VAST_MISSING_AD_TYPE:20007,VAST_CORS_ERROR:20009,VPAID_HANDSHAKE_FAIL:20010,VPAID_LOAD_ERROR:20011,VPAID_LOAD_TIMEOUT:20012,VPAID_PROTOCOL_NOT_SUPPORTED:20014,VPAID_INTERNAL_ERROR:20015,NO_VIDEO_SLOT:20201,VPAID_NONVITAL_METHOD_TIMEOUT:20202,VPAID_STATE_INCONSISTENCY:20203,AD_DURATION_NOT_SUPPORTED:20204,SUBSCRIBER_ERROR:20206,VISTA_UNCAUGHT_ERROR:20207,NO_COMPATIBLE_VIDEO:20208,PUBLISHER_UNCAUGHT_ERROR:20209,VIDEO_MEDIA_ERR_ABORTED:20210,VIDEO_MEDIA_ERR_NETWORK:20211,VIDEO_MEDIA_ERR_DECODE:20212,VIDEO_MEDIA_ERR_SRC_NOT_SUPPORTED:20213,VIDEO_MEDIA_ERR_UNKNOWN:20214,VPAID_HANDSHAKE_TIMEOUT:20215,VPAID_INIT_AD_TIMEOUT:20216,VPAID_START_AD_TIMEOUT:20217,VPAID_STOP_AD_TIMEOUT:20218,VISTA_LOADED:6e4,VISTA_IMP:60001,VISTA_AD_VIDEO_COMPLETE:60002,VISTA_AD_VIDEO_START:60003,VISTA_AD_VIDEO_STOP:60004,VISTA_AD_VIDEO_START_STARTING:60005,VISTA_AD_VIDEO_LOADED_STARTING:60006,VISTA_AD_VIDEO_LOADED:60007},h={AdImpression:"VISTA_IMP"},f=/:/g,p=/\//g;function m(e){!function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this),this.adParams=e||{},this.version=r.default,this.pageUrl="undefined"==typeof window?null:(0,s.default)((0,o.getTrueUrlInfo)().topUrl)}i.default=(i=[{key:"addDesiredBitrateInfo",value:function(e){this.adParams.desiredBitrate=e}},{key:"addServedBitrateInfo",value:function(e){this.adParams.servedBitrate=e}},{key:"_getUrlForName",value:function(e,t){var i="JS-"+c[e];if(void 0===this.adParams.browser)try{var n=this._getUserAgent();this.adParams.browser=this._getBrowserFromUserAgent(n)}catch(e){}return e=this.adParams.error&&this.adParams.error[0]&&this.adParams.error[0].url||"",this.adParams&&this.adParams.browser&&(i=i+",rb:"+this.adParams.browser),this.adParams&&this.adParams.selectedFileType&&(i=i+",rm:"+this.adParams.selectedFileType),t&&Object.prototype.hasOwnProperty.call(t,a.DM_MSG.ERROR_MSG)&&(i+=",emsg:"+t[a.DM_MSG.ERROR_MSG].trim().substring(0,800).replace(f,"_")),i+=",vv:"+this.version,i+=",pu:"+this.pageUrl.replace(f,"_").replace(p,""),n={},t&&(n[a.DM_MSG.TAG_STATUS_CODE]=t[a.DM_MSG.TAG_STATUS_CODE],n[a.DM_MSG.REQ_STATUS]=t[a.DM_MSG.REQ_STATUS],n[a.DM_MSG.AD_TYPE]=t[a.DM_MSG.AD_TYPE],n[a.DM_MSG.MIME]=t[a.DM_MSG.MIME],n[a.DM_MSG.ELAPSED_TIME]=t[a.DM_MSG.ELAPSED_TIME]),i+=",dm:"+btoa(JSON.stringify(n)),e.replace(/(##|\[)ERRORCODE(##|\])/gi,i)}},{key:"getUrlByEvent",value:function(e){return(e=h[e])&&this._getUrlForName(e)}},{key:"fire",value:function(e,t,i){(0,n.default)(this._getUrlForName(e,i),t)}},{key:"_getUserAgent",value:function(){return navigator&&navigator.userAgent}},{key:"_getBrowserFromUserAgent",value:function(e){return(e=d(e))&&e.browser&&e.browser.name+e.browser.major}}],u(m.prototype,i),m)},{"../lib/version.js":3,"./constants.js":19,"./util/fire.js":32,"./util/sanitizeUrl.js":35,"./util/url.js":37,"ua-parser-js":7}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(e("async")),s=r(e("../util/fire.js")),n=r(e("./providers/index.js"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){var n=e[i];n&&(e[i]=n.filter(function(e){return e.callback!==t}))}function u(e,t,i){t=e[t],i&&(Array&&Array.isArray&&Array.isArray(i)||(i=[i])),t&&t.forEach(function(e){var t=e.callback,e=e.context;return t.apply(e||null,i)})}function d(e){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.params=e,this.pixelProviders=(0,n.default)(e),this.diag=null,this.internalSubscribers={},this.externalSubscribers={}}i.default=(a(d.prototype,[{key:"init",value:function(e){for(var t in this.pixelProviders)this.pixelProviders[t].init(e);this.diag=e.diag}},{key:"addExternalSubscriber",value:function(e,t,i){var n=this.externalSubscribers[t]||[];n.push({callback:e,context:i}),this.externalSubscribers[t]=n}},{key:"addInternalSubscriber",value:function(e,t,i){var n=this.internalSubscribers[t]||[];n.push({callback:e,context:i}),this.internalSubscribers[t]=n}},{key:"removeSubscriber",value:function(e,t){l(this.internalSubscribers,e,t),l(this.externalSubscribers,e,t)}},{key:"fire",value:function(i,e,n,t){var r=this,a=this.pixelProviders&&Object.keys(this.pixelProviders).reduce(function(e,t){return e.concat(r.pixelProviders[t].getUris(i,n))},[]);o.default.each(a,function(e,t){(0,s.default)(e,t)},function(){try{u(r.internalSubscribers,i,e),u(r.externalSubscribers,i,e)}catch(e){return void r.handleFireException(i,e,n)}t&&t()})}},{key:"fireSync",value:function(i,e,n,t){var r=this,a=this.pixelProviders&&Object.keys(this.pixelProviders).reduce(function(e,t){return e.concat(r.pixelProviders[t].getUris(i,n))},[]);try{u(this.internalSubscribers,i,e),u(this.externalSubscribers,i,e)}catch(e){this.handleFireException(i,e,n)}o.default.each(a,function(e,t){(0,s.default)(e,t)},function(){t&&t()})}},{key:"handleFireException",value:function(e,t,i){var n,r,a=this;"AdError"!==e&&(null!==t&&(n=t.message,(r=t.stack.toString().split(/\r\n|\n/))&&1<r.length&&(n+=" "+window.btoa("stack1: "+r[1]+"stackn: "+r[r.length-1]))),this.diag&&this.diag.fire("SUBSCRIBER_ERROR",function(){a.fire("AdError",["Error occurred when firing ".concat(e," event handlers: ").concat(t.message)],i)},e+" event handlers: "+n))}},{key:"getProviders",value:function(){return this.pixelProviders}}]),d)},{"../util/fire.js":32,"./providers/index.js":24,async:4}],22:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.eventPixelMap={},this.adParams=null}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=(n(r.prototype,[{key:"init",value:function(e){var i=this;this.adParams=e.adParams,this.adParams.pixels.forEach(function(e){var t=e.event,e=e.url;t&&e&&"progress"!==t&&(i.eventPixelMap[t]=i.eventPixelMap[t]||[],i.eventPixelMap[t].push(e))})}},{key:"getUris",value:function(e){return this.eventPixelMap[e]||[]}}]),r)},{}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(e=e("../../diag"))&&e.__esModule?e:{default:e};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.diag=null}i.default=(i=[{key:"init",value:function(e){this.diag=new n.default(e.adParams)}},{key:"getUris",value:function(e,t){return this.diag&&(e=this.diag.getUrlByEvent(e))?[e]:[]}}],r(a.prototype,i),a)},{"../../diag":20}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){return{AdParamsProvider:new n.default(e),MoatProvider:new a.default(e),DiagProvider:new r.default(e),InsideVideoProvider:new o.default(e)}};var n=s(e("./ad_params")),r=s(e("./diag")),a=s(e("./moat")),o=s(e("./inside-video"));function s(e){return e&&e.__esModule?e:{default:e}}},{"./ad_params":22,"./diag":23,"./inside-video":25,"./moat":26}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(e=e("../../../lib/inside-video"))&&e.__esModule?e:{default:e};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.adParams=null}i.default=(r(a.prototype,[{key:"init",value:function(e){this.adParams=e.adParams,this.adParams.metadata,this.adParams&&(e.vpaidJSWrapper&&e.vpaidJSWrapper.videoSlot&&(e.adWHeight=e.vpaidJSWrapper.videoSlot.offsetHeight,e.adWidth=e.vpaidJSWrapper.videoSlot.offsetWidth,e.videoSlot=e.vpaidJSWrapper.videoSlot),e.slot&&(0,n.default)(e))}},{key:"getUris",value:function(e){return[]}}]),a)},{"../../../lib/inside-video":1}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(e=e("../../../lib/moat"))&&e.__esModule?e:{default:e};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.adParams=null}i.default=(r(a.prototype,[{key:"init",value:function(e){this.adParams=e.adParams;var t=this.adParams.metadata;this.adParams&&this.adParams.metadata&&(t={level1:"Yahoo!",level2:t.campaignID,level3:t.lineItemID,level4:t.creativeID,slicer1:t.publisherID,slicer2:t.sitePlacementID,sampling:"1.0",viewMode:"normal",zMoatAuctionID:t.auctionID,zMoatAdReqDomain:t.adRequestDomainName},e.slot&&(0,n.default)(e.vpaidJSWrapper,e.slot,t,"yahoovpaidtwoint215831825037"))}},{key:"getUris",value:function(e){return[]}}]),a)},{"../../../lib/moat":2}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.expand=function(i,n,e){return e.forEach(function(e){var t;try{t=e.replacement(n)}catch(e){t="undefined"}i=i.replace(e.regex,t)}),i},i.xtraHacker=i.xtra=i.timeStamp=i.publisher=i.protocol=i.pageUrl=i.sitePlacementId=i.lineItemId=i.insertionOrderId=i.vpaidJSWrapperVersion=i.demandSourceId=i.creativeIdHacker=i.creativeId=i.adRequestDomainName=void 0;var n=e("./util/url.js");i.adRequestDomainName={regex:/##AD_REQUEST_DOMAIN_NAME##/gi,replacement:function(e){return String(e.metadata.adRequestDomainName)}},i.creativeId={regex:/(##|\[)CREATIVE_ID(##|\])/gi,replacement:function(e){return String(e.metadata.creativeId)}},i.creativeIdHacker={regex:/(##|\[)CREATIVE_ID_HACKER(##|\])/gi,replacement:function(e){return String(e.metadata.creativeId)}},i.demandSourceId={regex:/(\[)demand_source_id(\])/gi,replacement:function(e){return String(e.metadata.demandSourceId)}},i.vpaidJSWrapperVersion={regex:/(##|\[)VISTA_VERSION(##|\])/gi,replacement:function(e){return String(e.metadata.vpaidJSWrapperVersion)}},i.insertionOrderId={regex:/(##|\[)IO_ID(##|\])/gi,replacement:function(e){return String(e.metadata.insertionOrderId)}},i.lineItemId={regex:/(##|\[)LINE_ITEM_ID(##|\])/gi,replacement:function(e){return String(e.metadata.lineItemId)}},i.sitePlacementId={regex:/(##|\[)(SITE_PLACEMENT_ID|SITE_ID|SITE_PLACEMENT)(##|\])/gi,replacement:function(e){return String(e.metadata.sitePlacementId)}},i.pageUrl={regex:/(##|\[)PAGE_URL(##|\])/gi,replacement:function(e){return String((0,n.getTrueUrlInfo)().topUrl)}},i.protocol={regex:/(##|\[)PROTOCOL(##|\])/gi,replacement:function(e){return String(e.metadata.protocol)}},i.publisher={regex:/(##|\[)(PUBLISHER|PUBLISHER_ID)(##|\])/gi,replacement:function(e){return String(e.metadata.publisherId)}},i.timeStamp={regex:/(##|%|\[)TIMESTAMP(##|%|\])/gi,replacement:function(e){return(new Date).toUTCString()}},i.xtra={regex:/(##|\[)XTRA(##|\])/gi,replacement:function(e){return String(e.metadata.xtra)}},i.xtraHacker={regex:/(##|\[)XTRA_HACKER(##|\])/gi,replacement:function(e){return String(e.metadata.xtra)}}},{"./util/url.js":37}],28:[function(e,t,i){t.exports={vpaidJSWrapperVersion:"VISTA_1_2_VERSION"}},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("../constants.js");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.width=null,this.height=null,this.xPosition="",this.yPosition="",this.staticResourceUrl="",this.staticResourceType="",this.clickThroughUrl="",this.clickTrackingUrl="",this.viewTrackingUrl="",this.offset=null,this.duration=null}i.default=(r(a.prototype,[{key:"hasSupportedResource",value:function(){var e=(this.staticResourceType||"").toLowerCase();return this.staticResourceUrl&&-1!==n.IMAGE_TYPES.indexOf(e)}}]),a)},{"../constants.js":19}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(e=e("./util/fire.js"))&&e.__esModule?e:{default:e};function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.hasCPVPixel=!1,this.events=[]}i.default=(i=[{key:"addListenerPercentage",value:function(e,t,i){this.events.push({offset:{percentage:t,time:1/0},callback:{method:e,context:i},uri:""})}},{key:"addURI",value:function(e,t){this.hasCPVPixel=!0,this.events.push({offset:{percentage:1/0,time:t},callback:{method:null,context:null},uri:e})}},{key:"addURIPercentage",value:function(e,t){this.hasCPVPixel=!0,this.events.push({offset:{percentage:t,time:1/0},callback:{method:null,context:null},uri:e})}},{key:"checkAndFire",value:function(t,e,i,n){var r=(t*=1.04)/e*100;this.events=this.events.filter(function(e){return!(e.offset.time<=t||e.offset.percentage<=r)||(e.uri&&(0,a.default)(e.uri),e.callback.method&&e.callback.method.apply(e.callback.context||null,i),!1)}),n&&n()}},{key:"hasProgressPixel",value:function(){return this.hasCPVPixel}}],n(r.prototype,i),r)},{"./util/fire.js":32}],31:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){return(new Date).getTime()}function a(){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.startTime=r()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=(n(a.prototype,[{key:"getCurrentTime",value:function(){return(r()-this.startTime)/1e3}}]),a)},{}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){function n(){t&&t()}var r=new Image;r.onload=n,r.onerror=n,r.src=e}},{}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=(e=(e=(e=e.substring(0,-1===e.indexOf("#")?e.length:e.indexOf("#"))).substring(0,-1===e.indexOf("?")?e.length:e.indexOf("?"))).substring(e.lastIndexOf("/")+1,e.length)).substring(e.lastIndexOf(".")+1,e.length);if(e!==t&&t.length<5)return t}},{}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var i={},t=e&&e.match(/^\s*(\w+):/);return t&&t[1]?i.protocol=t[1]:i.protocol="https",(e=e&&e.split("?")[1])&&e.split("&").forEach(function(e){var t=e.split("=");switch(t[0]){case"p":i.publisherId=t[1];break;case"s":i.sitePlacementId=t[1];break;case"l":i.lineItemId=t[1];break;case"ds":i.demandSourceId=t[1];break;case"ic":i.creativeId=t[1];break;case"x":i.xtra=t[1];break;case"au":i.auctionId=t[1];break;case"debug":i.debug="y"===t[1]}}),i}},{}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return["?","#"].forEach(function(e){-1!==(t=i.indexOf(e))&&(i=i.substring(0,t))}),i}},{}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.timeToSec=function(e){if(""===e)return 0;var t=0,i=(e=e.split(".")[0]).split(":");i.reverse();for(var n=[1,60,3600],r=0;r<i.length;r++)t+=i[r]*n[r];return t}},{}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getTrueUrlInfo=function(){var e,t,i,n=window.location.href,r="0",a="",o="",s="",l="";if(window.self===window.top)l=o=n,s="noFrames";else if(r="1",function(){try{return void 0!==window.top.location.href}catch(e){return}}())l=n+"||"+(a=window.parent.location.href)+"||"+(o=window.top.location.href),s="sameDomain";else if(function(){try{return void 0!==window.location.ancestorOrigins}catch(e){return}}()){for(e=window.location.ancestorOrigins,t=[],i=0;i<e.length;i+=1)t[i]=e[i];l=n+"||"+t.join("||"),a=t[0],o=t[t.length-1],s="ancestorOrigins"}else o=""!==(a=document.referrer)?a:n,l=n+"||"+a,s="referer";return{inIframe:r,currentUrl:n,parentUrl:a,topUrl:o,detectionMethod:s,domainChainString:l,encodedDomainChainString:encodeURIComponent(l)}},i.getVpaidJSWrapperUrl=function(){for(var e=document.getElementsByTagName("script")||[],t=null,i=0;i<e.length;i++){var n=e[i].getAttribute("src");if(n&&n.match(/\/vista\.js/)){t=n;break}}return t}},{}],38:[function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,i){(e=u(e)).forEach(function(e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e.style[t]=i[t])})}function n(e){return d(e,"String")}function r(e){return Array.isArray(e)||s(e)||l(e)}function s(e){return d(e,"HTMLCollection")}function l(e){return d(e,"NodeList")}function u(e){return null!=e?r(e)?e:[e]:[]}function d(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}Object.defineProperty(i,"__esModule",{value:!0}),i.removeFromParent=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},i.createElement=function(e,t){var i=null,n=null,r=null,i=document.createElement(e);for(n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&null!==(r=t[n])&&("style"===n&&"object"===a(r)?o(i,r):i.setAttribute(n,Array.isArray(r)?r.join(" "):r));return i},i.setStyle=o,i.isString=n,i.isCollection=r,i.isHtmlCollection=s,i.isNodeList=l,i.toCollection=u,i.openLinkInNewTab=function(e){n(e)&&window.open(e,"_blank")}},{}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseXml=function(e){if(void 0!==window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}throw new Error("No XML parser found")}},{}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("../util/fire.js"))&&n.__esModule?n:{default:n},a=e("../util/utils");function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.icon=e,this.url=this.icon&&this.icon.staticResourceUrl||"",this.adView=null,this.iconContainerEl=null,this.iconEl=null,this.isShowing=!1,this._iconEvents={}}i.default=(i=[{key:"showInAd",value:function(e){!this.isShowing&&this.icon&&this.icon.hasSupportedResource()&&(this.isShowing=!0,this.adView=e,this.iconContainerEl=this.createIconContainer(),function(){var e="string"==typeof this.icon.xPosition?this.icon.xPosition.toLowerCase():"",t="string"==typeof this.icon.yPosition?this.icon.yPosition.toLowerCase():"";switch(this.iconContainerEl.style.height="".concat(this.icon.height,"px"),this.iconContainerEl.style.width="".concat(this.icon.width,"px"),e){case"left":this.iconContainerEl.style.left="0px";break;case"right":this.iconContainerEl.style.right="0px";break;default:"number"==typeof this.icon.xPosition&&(this.iconContainerEl.style.left="".concat(this.icon.xPosition,"px"))}"bottom"===t?this.iconContainerEl.style.bottom="0px":this.iconContainerEl.style.top="".concat("number"==typeof this.icon.yPosition?this.icon.yPosition:0,"px")}.call(this),this.iconEl=this.createIcon(),e={height:"".concat(this.icon.height,"px"),width:"".concat(this.icon.width,"px")},(0,a.setStyle)(this.iconEl,e))}},{key:"onImageError",value:function(){(0,a.setStyle)(this.iconEl,{display:"none"})}},{key:"onIconClickTracking",value:function(e){e.stopPropagation(),(0,r.default)(this.icon.clickTrackingUrl)}},{key:"onIconClickThrough",value:function(e){e.stopPropagation(),(0,a.openLinkInNewTab)(this.icon.clickThroughUrl)}},{key:"onImageLoaded",value:function(){this.icon.clickThroughUrl&&(this.iconEl.addEventListener("click",this.onIconClickThrough.bind(this)),function(){var e="img:hover{ opacity: 0.6 }",t=document.createElement("style");t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),this.iconEl.appendChild(t)}.call(this)),this.icon.clickTrackingUrl&&this.iconEl.addEventListener("click",this.onIconClickTracking.bind(this)),this.iconContainerEl.appendChild(this.iconEl),this.adView.appendChild(this.iconContainerEl),this.icon.viewTrackingUrl&&r.default.call(this,this.icon.viewTrackingUrl)}},{key:"createIconContainer",value:function(){return(0,a.createElement)("div",{style:{position:"absolute",overflow:"hidden"}})}},{key:"createIcon",value:function(){var e,t,i=(0,a.createElement)("img",{style:{position:"absolute",cursor:"pointer"}});for(t in this._iconEvents=(o(e={},"load",this.onImageLoaded.bind(this)),o(e,"error",this.onImageError.bind(this)),e),this._iconEvents)i.addEventListener(t,this._iconEvents[t],!1);return i.src=this.url.replace(/\s+/g,""),i}},{key:"cleanUp",value:function(){if(this.iconEl)for(var e in this._iconEvents)this.iconEl.removeEventListener(e,this._iconEvents[e],!1);(0,a.removeFromParent)(this.iconContainerEl)}}],s(l.prototype,i),l)},{"../util/fire.js":32,"../util/utils":38}],41:[function(e,t,i){"use strict";var n=h(e("./config.js")),p=h(e("./diag.js")),r=h(e("./event/event_handler.js")),a=e("./util/url.js"),o=h(e("./util/getMediaFileType.js")),m=h(e("./ad_parser/index.js")),s=h(e("./util/query_params.js")),l=h(e("./util/clock.js")),u=h(e("./progress_events.js")),d=h(e("./vpaid_handler.js")),c=e("./constants.js"),v=h(e("./view/icon-element.js"));function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(){}var b=(0,a.getVpaidJSWrapperUrl)(),w=(0,s.default)(b),a=(e=[{key:"_callEventSync",value:function(e,t,i){this._callEvent(e,t,i,!0)}},{key:"_callEvent",value:function(e,t,i,n){(n?this.eventHandler.fireSync:this.eventHandler.fire).call(this.eventHandler,e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_adError",value:function(e){this._callEvent("AdError",[e])}},{key:"_setTrackingPixels",value:function(e){var r=this;e.forEach(function(e){var t=e.event,i=e.url;if(t&&i&&"progress"===t&&void 0!==e.offset){var n=e.offset;switch(n.type){case"time":r.progressEvents.addURI(i,n.offset);break;case"percentage":r.progressEvents.addURIPercentage(i,n.offset)}}})}},{key:"_setPlaybackEvents",value:function(){var e,t=this,i={AdVideoStart:0,AdVideoFirstQuartile:25,AdVideoMidpoint:50,AdVideoThirdQuartile:75};for(e in i)this.progressEvents.addListenerPercentage(function(e){return function(){t._callEvent(e)}}(e),i[e])}},{key:"_sortByBitrate",value:function(e,t){return t.bitrate-e.bitrate}},{key:"_sortByPlayability",value:function(e,t){var i={probably:2,maybe:1,"":0},e=i[e.isPlayable];return i[t.isPlayable]-e}},{key:"_sortByBitrateValidity",value:function(e,t,i){return e=e.bitrate<=i?1:0,(t.bitrate<=i?1:0)-e}},{key:"_videoChoiceSorter",value:function(i){var n=this;return function(e,t){return e.bitrate>i!=t.bitrate>i?n._sortByBitrateValidity(e,t,i):e.isPlayable!==t.isPlayable?n._sortByPlayability(e,t):n._sortByBitrate(e,t)}}},{key:"_selectVideo",value:function(e,t){var i=this,n=[];return e.forEach(function(e){e.isPlayable=i.videoSlot.canPlayType(e.mimetype),n.push(e.mimetype)}),(e=e.filter(function(e){return""!==e.isPlayable})).length||this.diag&&this.diag.fire("NO_COMPATIBLE_VIDEO",y,f({},c.DM_MSG.MIME,n)),e.sort(this._videoChoiceSorter(t))[0]}},{key:"_setVideoSources",value:function(e,t,i){if(e){if(i=this._selectVideo(e,i))return this.diag&&this.diag.addServedBitrateInfo(i.bitrate),this.videoSlot.src=i.url,i.url}else this._adError("No videos")}},{key:"_setAdSize",value:function(e,t){this.videoSlot&&(this.videoSlot.width=e,this.videoSlot.height=t,this._callEvent("AdSizeChange"))}},{key:"_onClick",value:function(){var e;this.videoSlot.paused?(this.videoSlot.play(),this._callEvent("AdPlaying")):(e=this.props.adParameters.videoClicks.clickThrough,this._callEvent("AdClickThru",[e||null,"",!1]),window.open(e,"_blank"))}},{key:"_cleanUp",value:function(){if(this.videoSlot)for(var e in this.slotListeners)this.videoSlot.removeEventListener&&this.videoSlot.removeEventListener(e,this.slotListeners[e],!1);this.adSlot&&this.adChoiceIcon&&this.adChoiceIcon.cleanUp(),this.errorTimeout&&window.clearTimeout(this.errorTimeout),this.progressEvents=new u.default}},{key:"_readFeatures",value:function(e){var t=this;e.features.forEach(function(e){"debug"===e&&(t.debug=!0)})}},{key:"initAd",value:function(o,s,l,u,d,c){for(var h=this,f=new Array(arguments.length),e=0;e<arguments.length;++e)f[e]=arguments[e];var t="string"==typeof d?d:d.AdParameters;(0,m.default)(t,function(e,t){if(h.diag=new p.default(t),e)h._adError(e.message);else if(h.props={adExpanded:!1,adLinear:!0,adSkippableState:!1,adCompanions:"",adIcons:!1,adVolume:1},h.props.width=o,h.props.height=s,h.props.viewMode=l,h.props.desiredBitrate=u,h.videoSlot=c.videoSlot,h._videoSlotCanAutoPlay=c.videoSlotCanAutoPlay,h.diag.addDesiredBitrateInfo(u),h.videoSlot){if(void 0===h.videoSlot.volume&&(h.videoSlot.volume=h.videoSlot.muted?0:1),h.videoSlot.style&&(h.videoSlot.style.cursor="pointer"),e=c.slot,(h.adSlot=e)&&(e.style.cursor="pointer",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style["z-index"]="100"),h.videoSlot.autoplay=!1,h._readFeatures(t),h.props.adParameters=t,h.initialized=!0,h.eventHandler.init({adParams:t,vpaidJSWrapper:h,slot:e,diag:h.diag}),h.props.adParameters.pixels&&h._setTrackingPixels(h.props.adParameters.pixels),h.props.adParameters.sources)if(r=h.props.adParameters.sources,a=null,r&&r.some(function(e){return-1<["application/javascript","application/x-javascript"].indexOf(e.mimetype)&&"VPAID"===e.apiFramework&&(a=e.url,!0)}),t=a,function(e,t){if(e&&t)for(var i=0;i<t.length;i++){var n=t[i];if(""!==e.canPlayType(n.mimetype))return 1}}(h.videoSlot,h.props.adParameters.sources)||null===t){for(var i in h._setPlaybackEvents(),h.slotListeners)h.videoSlot.addEventListener(i,h.slotListeners[i],!1);e&&(h.props.adParameters.icons&&h.props.adParameters.icons.length&&(h.adChoiceIcon=new v.default(h.props.adParameters.icons[0])),e.addEventListener("click",function(){h._onClick()})),h._setVideoSources(h.props.adParameters.sources,h.props.adParameters.debugData,u)?h.videoSlot.load():h._adError("NO_COMPATIBLE_VIDEO")}else{for(var n=0;n<f.length;++n)f[n]===d&&(f[n]={AdParameters:h.props.adParameters.thirdPartyAdParams});h.vpaidHandler.loadVPAIDAd(t,h.videoSlot,h.props,h.debug,h.diag,f,h.progressEvents)}}else h.diag.fire("NO_VIDEO_SLOT",function(){h._adError("No video slot!")});var r,a})}},{key:"handshakeVersion",value:function(e){return"2.0"}},{key:"startAd",value:function(){var e=this;this.vpaidHandler.hasAd()?this.vpaidHandler.startAd():(this.diag&&this.diag.fire("VISTA_AD_VIDEO_START_STARTING"),this.startAdClock=new l.default,this.videoSlot.play(),this.errorTimeout=setTimeout(function(){e._adError("Ad playback timed out")},n.default.adPlaybackTimeout))}},{key:"stopAd",value:function(){var e;this.vpaidHandler.hasAd()?this.vpaidHandler.stopAd():(this.videoSlot&&this.videoSlot.pause(),this._cleanUp(),this.progressEvents=new u.default,this.stopAdCalled=!0,e=this.startAdClock&&this.startAdClock.getCurrentTime()||-1,this.diag&&this.diag.fire("VISTA_AD_VIDEO_STOP",y,f({},c.DM_MSG.ELAPSED_TIME,e)),this._callEvent("AdStopped"))}},{key:"setAdVolume",value:function(e){0<=e&&e<=1&&this.videoSlot&&(this.props.adVolume=e,this.vpaidHandler.hasAd()?this.vpaidHandler.setAdVolume(e):(0===this.videoSlot.volume&&0<e?this._callEvent("unmute"):0<this.videoSlot.volume&&0===e&&this._callEvent("mute"),this.videoSlot.volume=e,this._callEvent("AdVolumeChange")))}},{key:"getAdVolume",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdVolume():this.videoSlot?this.videoSlot.volume:void 0}},{key:"resizeAd",value:function(e,t,i){"fullscreen"!==(this.props.viewMode=i)&&(this.props.width=e,this.props.height=t),this.vpaidHandler.hasAd()?this.vpaidHandler.resizeAd(e,t,i):("fullscreen"!==this.props.viewMode&&"fullscreen"===i?this._callEvent("fullscreen"):"fullscreen"===this.props.viewMode&&"fullscreen"!==i&&this._callEvent("exitFullscreen"),this._setAdSize(e,t))}},{key:"pauseAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.pauseAd():(this.videoSlot.pause(),this._callEvent("AdPaused"))}},{key:"resumeAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.resumeAd():(this.videoSlot.play(),this._callEvent("AdPlaying"))}},{key:"expandAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.expandAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!0}},{key:"getAdExpanded",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdExpanded():this.props.adExpanded}},{key:"getAdSkippableState",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdSkippableState():this.props.adSkippableState}},{key:"collapseAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.collapseAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!1}},{key:"skipAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.skipAd():this.props.adSkippableState&&this._callEvent("AdSkipped")}},{key:"subscribe",value:function(e,t,i){this.eventHandler.addExternalSubscriber(e,t,i)}},{key:"unsubscribe",value:function(e,t){this.eventHandler.removeSubscriber(e,t)}},{key:"getAdWidth",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdWidth():this.videoSlot?this.props.width:void 0}},{key:"getAdHeight",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdHeight():this.videoSlot?this.props.height:void 0}},{key:"getAdRemainingTime",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration-this.videoSlot.currentTime}},{key:"getAdDuration",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration}},{key:"getAdCompanions",value:function(){return this.props.adCompanions}},{key:"getAdIcons",value:function(){return this.props.adIcons}},{key:"getAdLinear",value:function(){return this.vpaidHandler.hasAd()&&(this.props.adLinear=this.vpaidHandler.getAdLinear()),this.props.adLinear}}],g(A.prototype,e),A);function A(){var a=this;!function(e){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}(this),this.videoSlot=null,this.adSlot=null,this.debug=w.debug||!1,this.initialized=!1,this.stopAdCalled=!1,this.errorTimeout=null,this.progressEvents=new u.default,this.eventHandler=new r.default,this.vpaidHandler=new d.default(this.eventHandler),this.diag=null,this.props=null,this.loadAdClock=null,this.startAdClock=null,this.adChoiceIcon=null,this.eventHandler.addInternalSubscriber(function(e){a._cleanUp()},"AdError"),window.onerror=function(e,t,i,n){var r=f({},c.DM_MSG.ERROR_MSG,e);b===t?a.diag&&a.diag.fire("VISTA_UNCAUGHT_ERROR",function(){return a._adError("Vista error occurred: "+e),!0},r):a.diag&&a.diag.fire("PUBLISHER_UNCAUGHT_ERROR",y,r)};var e=0,t=!1,i=!1;this.slotListeners={timeupdate:function(){0===e&&(!i&&0<a.videoSlot.currentTime&&(a._callEventSync("AdImpression"),i=!0),a._callEvent("AdRemainingTimeChange"),a.progressEvents.checkAndFire(a.videoSlot.currentTime,a.videoSlot.duration))},play:function(){1===e&&(a.videoSlot.currentTime=0,e=2)},playing:function(){var e;t||(void 0!==a.videoSlot.src&&a.diag&&a.diag.adParams&&(a.diag.adParams.selectedFileType=(0,o.default)(a.videoSlot.src)),a.adChoiceIcon&&a.adSlot&&a.adChoiceIcon.showInAd(a.adSlot),e=a.startAdClock&&a.startAdClock.getCurrentTime()||-1,a.diag&&a.diag.fire("VISTA_AD_VIDEO_START",y,f({},c.DM_MSG.ELAPSED_TIME,e)),a._callEvent("AdStarted"),t=!0)},seeking:function(){0===e&&(e=1)},seeked:function(){2===e&&(e=0)},ended:function(){0===e&&a.progressEvents.checkAndFire(a.videoSlot.currentTime,a.videoSlot.duration,[],function(){a.diag&&a.diag.fire("VISTA_AD_VIDEO_COMPLETE"),a._callEvent("AdVideoComplete",[],function(){a.stopAdCalled||(a._cleanUp(),a._callEvent("AdStopped"))})})},loadstart:function(){a.diag&&a.diag.fire("VISTA_AD_VIDEO_LOADED_STARTING"),a.loadAdClock=new l.default,a.initialized&&a.videoSlot.networkState===HTMLMediaElement.NETWORK_NO_SOURCE&&a._adError("No valid video sources found")},loadedmetadata:function(){a._callEvent("AdDurationChange")},loadeddata:function(){var e=a.loadAdClock&&a.loadAdClock.getCurrentTime()||-1;a.diag&&a.diag.fire("VISTA_AD_VIDEO_LOADED",y,f({},c.DM_MSG.ELAPSED_TIME,e)),a._callEvent("AdLoaded")},canplay:function(){},click:function(){a._onClick()},contextmenu:function(e){e.preventDefault()},error:function(){var e=a.videoSlot.error&&a.videoSlot.error.code||"",t="";switch(e){case c.VIDEO_MEDIA_ERR.ABORTED:t="VIDEO_MEDIA_ERR_ABORTED";break;case c.VIDEO_MEDIA_ERR.NETWORK:t="VIDEO_MEDIA_ERR_NETWORK";break;case c.VIDEO_MEDIA_ERR.DECODE:t="VIDEO_MEDIA_ERR_DECODE";break;case c.VIDEO_MEDIA_ERR.SRC_NOT_SUPPORTED:t="VIDEO_MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="VIDEO_MEDIA_ERR_UNKNOWN"}a.diag&&a.diag.fire(t,function(){a._adError("Error occurred when playing video with code "+e)})}}}var T,s=(T=new a,function(){return T});"undefined"!=typeof TEST&&TEST&&(s.Vista=a),t.exports=s},{"./ad_parser/index.js":12,"./config.js":18,"./constants.js":19,"./diag.js":20,"./event/event_handler.js":21,"./progress_events.js":30,"./util/clock.js":31,"./util/getMediaFileType.js":33,"./util/query_params.js":34,"./util/url.js":37,"./view/icon-element.js":40,"./vpaid_handler.js":42}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var l=n(e("./config.js")),r=n(e("./util/getMediaFileType.js")),u=n(e("./util/clock.js")),a=e("./constants.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(){}var c=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],h=["AdSkipped","AdLinearChange","AdExpandedChange","AdSkippableStateChange","AdDurationChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdInteraction","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdUserAcceptInvitation","AdUserMinimize","AdUserClose"];function f(e){var n=this;!function(e){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.eventHandler=e,this.iFrame,this.adUnit,this.adDuration,this.stopped=!1,this.insideJsWorkAround={waitingForAdVideoComplete:!1,receivedAdStop:!1},this.videoSlot=null,this.debug=null,this.props=null,this.diag=null,this.progressEvents=null,this.timeouts={load:null,handshake:null,initAd:null,startAd:null,pauseAd:null,resumeAd:null,stopAd:null},this.adPlayingState=null,this.loadAdClock=null,this.startAdClock=null,this.adEventCBs={AdLoaded:function(){clearTimeout(n.timeouts.initAd);var e=n.loadAdClock&&n.loadAdClock.getCurrentTime()||-1;n.diag.fire("VISTA_AD_VIDEO_LOADED",d,o({},a.DM_MSG.ELAPSED_TIME,e)),n._callEvent("AdLoaded")},AdStarted:function(){n.adPlayingState="AdPlaying",clearTimeout(n.timeouts.startAd),void 0!==n.videoSlot.src&&n.diag&&n.diag.adParams&&(n.diag.adParams.selectedFileType=(0,r.default)(n.videoSlot.src)),n.videoSlot.paused&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n.adDuration=n.adUnit.getAdDuration(),-1===n.adDuration?n.diag.fire("AD_DURATION_NOT_SUPPORTED"):n.progressEvents.hasProgressPixel()&&n._progressEventCron();var e=n.startAdClock&&n.startAdClock.getCurrentTime()||-1;n.diag.fire("VISTA_AD_VIDEO_START",d,o({},a.DM_MSG.ELAPSED_TIME,e)),n._callEvent("AdStarted")},AdStopped:function(){var e;n.insideJsWorkAround.waitingForAdVideoComplete?n.insideJsWorkAround.receivedAdStop=!0:(n.adPlayingState="AdStopped",clearTimeout(n.timeouts.stopAd),n.stopped||(n.stopped=!0,n._callEvent("AdStopped"),e=n.startAdClock&&n.startAdClock.getCurrentTime()||-1,n.diag.fire("VISTA_AD_VIDEO_STOP",d,o({},a.DM_MSG.ELAPSED_TIME,e))))},AdLog:function(e){n._callEvent("AdLog",e)},AdSizeChange:function(){"fullscreen"!==n.props.viewMode&&(n.props.width>n.videoSlot.width||n.props.height>n.videoSlot.height)&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdSizeChange")},AdPaused:function(){clearTimeout(n.timeouts.pauseAd),n.videoSlot.paused||n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdPaused")},AdPlaying:function(){clearTimeout(n.timeouts.resumeAd),n.videoSlot.paused&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdPlaying")},AdVolumeChange:function(){n.props.adVolume!==n.adUnit.getAdVolume()&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdVolumeChange")},AdDurationChange:function(){n.adDuration=n.adUnit.getAdDuration(),n._callEvent("AdDurationChange")},AdClickThru:function(e,t,i){e=e||n.props.adParameters.videoClicks.clickThrough,n._callEventSync("AdClickThru",[e||null,t||"",i])},AdVideoComplete:function(){0<n.adDuration&&(n.insideJsWorkAround.waitingForAdVideoComplete=!0,n.progressEvents.checkAndFire(n.adDuration,n.adDuration,[],function(){n.diag.fire("VISTA_AD_VIDEO_COMPLETE"),n._callEvent("AdVideoComplete",[],function(){n.insideJsWorkAround.waitingForAdVideoComplete&&(n.insideJsWorkAround.receivedAdStop?(n.insideJsWorkAround.waitingForAdVideoComplete=!1,n.insideJsWorkAround.receivedAdStop=!1,n.adEventCBs.AdStopped()):n.insideJsWorkAround.waitingForAdVideoComplete=!1)})}))},AdError:function(e){n.diag.fire("VPAID_INTERNAL_ERROR",function(){n._callEvent("AdError",e)},o({},a.DM_MSG.ERROR_MSG,e))}},h.forEach(function(e){n.adEventCBs[e],n.adEventCBs[e]=function(){n._callEvent(e)}})}i.default=(i=[{key:"_callEventSync",value:function(e,t,i){this.eventHandler.fireSync(e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_callEvent",value:function(e,t,i){this.eventHandler.fire(e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_progressEventCron",value:function(){var t=setInterval(function(){this.adDuration=this.adUnit.getAdDuration();var e=this.adUnit.getAdRemainingTime();0<=e&&(e=this.adDuration-e,this.progressEvents.checkAndFire(e,this.adDuration),e>=this.adDuration&&clearInterval(t)),this._callEvent("AdRemainingTimeChange")}.bind(this),250)}},{key:"_adError",value:function(e){this._callEvent("AdError",[e])}},{key:"_fireDiagError",value:function(e){var t=this;this.diag.fire(e,function(){return t._adError(e)})}},{key:"_subscribeAdEvents",value:function(e){for(var t in this.adEventCBs)this.adUnit.subscribe(this.adEventCBs[t],t,this)}},{key:"loadVPAIDAd",value:function(i,e,t,n,r,a,o){var s=this;this.videoSlot=e,this.props=t,this.debug=n,this.diag=r,this.progressEvents=o,this.diag.fire("VISTA_AD_VIDEO_LOADED_STARTING"),this.loadAdClock=new u.default,this.iFrame=document.createElement("iframe"),this.iFrame.id="3rd-party-vpaid-frame",this.iFrame.setAttribute("style","border:0 none"),this.iFrame.setAttribute("width","100%;"),this.iFrame.setAttribute("height","100%;"),this.iFrame.onload=function(){var e=s.iFrame.contentWindow.document,t=e.createElement("script");s.timeouts.load=setTimeout(function(){s._fireDiagError("VPAID_LOAD_TIMEOUT")},l.default.vpaidCreativeMethodTimeout),t.onload=function(){clearTimeout(s.timeouts.load);var t,e=s.iFrame.contentWindow.getVPAIDAd;e&&"function"==typeof e?(s.adUnit=e(),s.timeouts.handshake=setTimeout(function(){s.diag.fire("VPAID_HANDSHAKE_TIMEOUT",function(){s._adError("handshake timed out")})},l.default.vpaidCreativeMethodTimeout),e=s.adUnit.handshakeVersion("2.0"),clearTimeout(s.timeouts.handshake),t=s.adUnit,c.every(function(e){return(e=t[e])&&"function"==typeof e})?e&&2<=parseFloat(e)?(s._subscribeAdEvents(s.adUnit),s.timeouts.initAd=setTimeout(function(){s.diag.fire("VPAID_INIT_AD_TIMEOUT",function(){s._adError("initAd timed out")})},l.default.vpaidCreativeMethodTimeout),s.adUnit.initAd.apply(s.adUnit,a)):s._fireDiagError("VPAID_HANDSHAKE_FAIL"):s._fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")):s._fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")},t.onerror=function(e){clearTimeout(s.timeouts.load),s._fireDiagError("VPAID_LOAD_ERROR")},t.src=i,t.type="text/javascript",e.body.appendChild(t)},document.body.appendChild(this.iFrame)}},{key:"hasAd",value:function(){return!!this.adUnit}},{key:"startAd",value:function(){var e=this;"AdPlaying"!==this.adPlayingState&&(clearTimeout(this.timeouts.startAd),this.timeouts.startAd=setTimeout(function(){e.diag.fire("VPAID_START_AD_TIMEOUT",function(){e._adError("startAd timed out")})},l.default.vpaidCreativeMethodTimeout),this.diag.fire("VISTA_AD_VIDEO_START_STARTING"),this.startAdClock=new u.default,this.adUnit.startAd())}},{key:"resizeAd",value:function(e,t,i){this.adUnit.resizeAd(e,t,i)}},{key:"stopAd",value:function(){var e=this;clearTimeout(this.timeouts.stopAd),this.timeouts.stopAd=setTimeout(function(){e.diag.fire("VPAID_STOP_AD_TIMEOUT",function(){e._adError("stopAd timed out")})},l.default.vpaidCreativeMethodTimeout),this.adUnit.stopAd()}},{key:"pauseAd",value:function(){var e=this;clearTimeout(this.timeouts.pauseAd),this.timeouts.pauseAd=setTimeout(function(){e.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT")},l.default.vpaidCreativeMethodTimeout),this.adUnit.pauseAd()}},{key:"resumeAd",value:function(){var e=this;clearTimeout(this.timeouts.resumeAd),this.timeouts.resumeAd=setTimeout(function(){e.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT")},l.default.vpaidCreativeMethodTimeout),this.adUnit.resumeAd()}},{key:"expandAd",value:function(){this.adUnit.expandAd()}},{key:"collapseAd",value:function(){this.adUnit.collapseAd()}},{key:"skipAd",value:function(){this.adUnit.skipAd()}},{key:"getAdLinear",value:function(){return this.adUnit.getAdLinear()}},{key:"getAdWidth",value:function(){return this.adUnit.getAdWidth()}},{key:"getAdHeight",value:function(){return this.adUnit.getAdHeight()}},{key:"getAdExpanded",value:function(){return this.adUnit.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return this.props.adSkippableState=this.adUnit.getAdSkippableState(),this.props.adSkippableState}},{key:"getAdRemainingTime",value:function(){return this.adUnit.getAdRemainingTime()}},{key:"getAdDuration",value:function(){return this.adUnit.getAdDuration()}},{key:"setAdVolume",value:function(e){this.adUnit.setAdVolume(e)}},{key:"getAdVolume",value:function(){return this.adUnit.getAdVolume()}},{key:"getAdCompanions",value:function(){return this.adUnit.getAdCompanions()}},{key:"getAdIcons",value:function(){return this.adUnit.getAdIcons()}}],s(f.prototype,i),f)},{"./config.js":18,"./constants.js":19,"./util/clock.js":31,"./util/getMediaFileType.js":33}]},{},[41])(41)});
