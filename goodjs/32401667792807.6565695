!function(){var n={1989:function(e,t,n){var o=n(1789),i=n(401),a=n(7667),r=n(1327),n=n(1866);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}s.prototype.clear=o,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=r,s.prototype.set=n,e.exports=s},8407:function(e,t,n){var o=n(7040),i=n(4125),a=n(2117),r=n(7518),n=n(4705);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}s.prototype.clear=o,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=r,s.prototype.set=n,e.exports=s},7071:function(e,t,n){n=n(852)(n(5639),"Map");e.exports=n},3369:function(e,t,n){var o=n(4785),i=n(1285),a=n(6e3),r=n(9916),n=n(5265);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}s.prototype.clear=o,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=r,s.prototype.set=n,e.exports=s},2705:function(e,t,n){n=n(5639).Symbol;e.exports=n},6874:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},9932:function(e){e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}},2488:function(e){e.exports=function(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}},4865:function(e,t,n){var i=n(9465),a=n(7813),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];r.call(e,t)&&a(o,n)&&(void 0!==n||t in e)||i(e,t,n)}},8470:function(e,t,n){var o=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}},9465:function(e,t,n){var o=n(8777);e.exports=function(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1078:function(e,t,n){var l=n(2488),c=n(7285);e.exports=function e(t,n,o,i,a){var r=-1,s=t.length;for(o=o||c,a=a||[];++r<s;){var u=t[r];0<n&&o(u)?1<n?e(u,n-1,o,i,a):l(a,u):i||(a[a.length]=u)}return a}},7786:function(e,t,n){var i=n(1811),a=n(327);e.exports=function(e,t){for(var n=0,o=(t=i(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},4239:function(e,t,n){var o=n(2705),i=n(9607),a=n(2333),r=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(r&&r in Object(e)?i:a)(e)}},8565:function(e){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},13:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:function(e,t,n){var o=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==o(e)}},8458:function(e,t,n){var o=n(3560),i=n(5346),a=n(3218),r=n(346),s=/^\[object .+?Constructor\]$/,u=Function.prototype,n=Object.prototype,u=u.toString,n=n.hasOwnProperty,l=RegExp("^"+u.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(o(e)?l:s).test(r(e))}},5970:function(e,t,n){var o=n(3012),i=n(9095);e.exports=function(n,e){return o(n,e,function(e,t){return i(n,t)})}},3012:function(e,t,n){var u=n(7786),l=n(611),c=n(1811);e.exports=function(e,t,n){for(var o=-1,i=t.length,a={};++o<i;){var r=t[o],s=u(e,r);n(s,r)&&l(a,c(r,e),s)}return a}},611:function(e,t,n){var d=n(4865),p=n(1811),v=n(5776),f=n(3218),h=n(327);e.exports=function(e,t,n,o){if(!f(e))return e;for(var i=-1,a=(t=p(t,e)).length,r=a-1,s=e;null!=s&&++i<a;){var u,l=h(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;i!=r&&(u=s[l],void 0===(c=o?o(u,l,s):void 0)&&(c=f(u)?u:v(t[i+1])?[]:{})),d(s,l,c),s=s[l]}return e}},6560:function(e,t,n){var o=n(5703),i=n(8777),n=n(6557);e.exports=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:o(t),writable:!0})}:n},531:function(e,t,n){var o=n(2705),i=n(9932),a=n(1469),r=n(3448),o=o?o.prototype:void 0,s=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(r(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},7561:function(e,t,n){var o=n(7990),i=/^\s+/;e.exports=function(e){return e&&e.slice(0,o(e)+1).replace(i,"")}},1811:function(e,t,n){var o=n(1469),i=n(5403),a=n(5514),r=n(9833);e.exports=function(e,t){return o(e)?e:i(e,t)?[e]:a(r(e))}},4429:function(e,t,n){n=n(5639)["__core-js_shared__"];e.exports=n},8777:function(e,t,n){var o=n(852),n=function(){try{var e=o(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=n},9021:function(e,t,n){var o=n(5564),i=n(5357),a=n(61);e.exports=function(e){return a(i(e,void 0,o),e+"")}},1957:function(e,t,n){n="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=n},5050:function(e,t,n){var o=n(7019);e.exports=function(e,t){e=e.__data__;return o(t)?e["string"==typeof t?"string":"hash"]:e.map}},852:function(e,t,n){var o=n(8458),i=n(7801);e.exports=function(e,t){t=i(e,t);return o(t)?t:void 0}},9607:function(e,t,n){var o=n(2705),n=Object.prototype,a=n.hasOwnProperty,r=n.toString,s=o?o.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{var o=!(e[s]=void 0)}catch(e){}var i=r.call(e);return o&&(t?e[s]=n:delete e[s]),i}},7801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},222:function(e,t,n){var s=n(1811),u=n(5694),l=n(1469),c=n(5776),d=n(1780),p=n(327);e.exports=function(e,t,n){for(var o=-1,i=(t=s(t,e)).length,a=!1;++o<i;){var r=p(t[o]);if(!(a=null!=e&&n(e,r)))break;e=e[r]}return a||++o!=i?a:!!(i=null==e?0:e.length)&&d(i)&&c(r,i)&&(l(e)||u(e))}},1789:function(e,t,n){var o=n(4536);e.exports=function(){this.__data__=o?o(null):{},this.size=0}},401:function(e){e.exports=function(e){e=this.has(e)&&delete this.__data__[e];return this.size-=e?1:0,e}},7667:function(e,t,n){var o=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(o){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:function(e,t,n){var o=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return o?void 0!==t[e]:i.call(t,e)}},1866:function(e,t,n){var o=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this}},7285:function(e,t,n){var o=n(2705),i=n(5694),a=n(1469),r=o?o.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(r&&e&&e[r])}},5776:function(e){var o=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&o.test(e))&&-1<e&&e%1==0&&e<t}},5403:function(e,t,n){var o=n(1469),i=n(3448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;e.exports=function(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||r.test(e)||!a.test(e)||null!=t&&e in Object(t)}},7019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:function(e,t,n){var n=n(4429),o=(n=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},7040:function(e){e.exports=function(){this.__data__=[],this.size=0}},4125:function(e,t,n){var o=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,e=o(t,e);return!(e<0||(e==t.length-1?t.pop():i.call(t,e,1),--this.size,0))}},2117:function(e,t,n){var o=n(8470);e.exports=function(e){var t=this.__data__,e=o(t,e);return e<0?void 0:t[e][1]}},7518:function(e,t,n){var o=n(8470);e.exports=function(e){return-1<o(this.__data__,e)}},4705:function(e,t,n){var i=n(8470);e.exports=function(e,t){var n=this.__data__,o=i(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},4785:function(e,t,n){var o=n(1989),i=n(8407),a=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}},1285:function(e,t,n){var o=n(5050);e.exports=function(e){e=o(this,e).delete(e);return this.size-=e?1:0,e}},6e3:function(e,t,n){var o=n(5050);e.exports=function(e){return o(this,e).get(e)}},9916:function(e,t,n){var o=n(5050);e.exports=function(e){return o(this,e).has(e)}},5265:function(e,t,n){var i=n(5050);e.exports=function(e,t){var n=i(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},4523:function(e,t,n){var o=n(8306);e.exports=function(e){var e=o(e,function(e){return 500===t.size&&t.clear(),e}),t=e.cache;return e}},4536:function(e,t,n){n=n(852)(Object,"create");e.exports=n},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5357:function(e,t,n){var u=n(6874),l=Math.max;e.exports=function(a,r,s){return r=l(void 0===r?a.length-1:r,0),function(){for(var e=arguments,t=-1,n=l(e.length-r,0),o=Array(n);++t<n;)o[t]=e[r+t];for(var t=-1,i=Array(r+1);++t<r;)i[t]=e[t];return i[r]=s(o),u(a,this,i)}}},5639:function(e,t,n){var o=n(1957),n="object"==typeof self&&self&&self.Object===Object&&self,n=o||n||Function("return this")();e.exports=n},61:function(e,t,n){var o=n(6560),o=n(1275)(o);e.exports=o},1275:function(e){var a=Date.now;e.exports=function(n){var o=0,i=0;return function(){var e=a(),t=16-(e-i);if(i=e,0<t){if(800<=++o)return arguments[0]}else o=0;return n.apply(void 0,arguments)}}},5514:function(e,t,n){var n=n(4523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,n=n(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(o,function(e,t,n,o){i.push(n?o.replace(a,"$1"):t||e)}),i});e.exports=n},327:function(e,t,n){var o=n(3448);e.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7990:function(e){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},5703:function(e){e.exports=function(e){return function(){return e}}},3279:function(e,t,n){var y=n(3218),g=n(7771),b=n(4841),k=Math.max,_=Math.min;e.exports=function(o,n,e){var i,a,r,s,u,l,c=0,d=!1,p=!1,t=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function v(e){var t=i,n=a;return i=a=void 0,c=e,s=o.apply(n,t)}function f(e){var t=e-l;return void 0===l||n<=t||t<0||p&&r<=e-c}function h(){var e,t=g();if(f(t))return w(t);u=setTimeout(h,(e=n-(t-l),p?_(e,r-(t-c)):e))}function w(e){return u=void 0,t&&i?v(e):(i=a=void 0,s)}function m(){var e=g(),t=f(e);if(i=arguments,a=this,l=e,t){if(void 0===u)return c=t=l,u=setTimeout(h,n),d?v(t):s;if(p)return clearTimeout(u),u=setTimeout(h,n),v(l)}return void 0===u&&(u=setTimeout(h,n)),s}return n=b(n)||0,y(e)&&(d=!!e.leading,r=(p="maxWait"in e)?k(b(e.maxWait)||0,n):r,t="trailing"in e?!!e.trailing:t),m.cancel=function(){void 0!==u&&clearTimeout(u),i=l=a=u=void(c=0)},m.flush=function(){return void 0===u?s:w(g())},m}},7813:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},5564:function(e,t,n){var o=n(1078);e.exports=function(e){return null!=e&&e.length?o(e,1):[]}},7361:function(e,t,n){var o=n(7786);e.exports=function(e,t,n){t=null==e?void 0:o(e,t);return void 0===t?n:t}},8721:function(e,t,n){var o=n(8565),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,o)}},9095:function(e,t,n){var o=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,o)}},6557:function(e){e.exports=function(e){return e}},5694:function(e,t,n){var o=n(9454),i=n(7005),n=Object.prototype,a=n.hasOwnProperty,r=n.propertyIsEnumerable,o=o(function(){return arguments}())?o:function(e){return i(e)&&a.call(e,"callee")&&!r.call(e,"callee")};e.exports=o},1469:function(e){var t=Array.isArray;e.exports=t},3560:function(e,t,n){var o=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;e=o(e);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:function(e){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3448:function(e,t,n){var o=n(4239),i=n(7005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==o(e)}},8306:function(e,t,n){var r=n(3369);function s(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");function a(){var e=arguments,t=i?i.apply(this,e):e[0],n=a.cache;return n.has(t)?n.get(t):(e=o.apply(this,e),a.cache=n.set(t,e)||n,e)}return a.cache=new(s.Cache||r),a}s.Cache=r,e.exports=s},308:function(e){e.exports=function(){}},7771:function(e,t,n){var o=n(5639);e.exports=function(){return o.Date.now()}},8718:function(e,t,n){var o=n(5970),n=n(9021)(function(e,t){return null==e?{}:o(e,t)});e.exports=n},4841:function(e,t,n){var o=n(7561),i=n(3218),a=n(3448),r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=i(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=o(e);var t=s.test(e);return t||u.test(e)?l(e.slice(2),t?2:8):r.test(e)?NaN:+e}},9833:function(e,t,n){var o=n(531);e.exports=function(e){return null==e?"":o(e)}}},o={};function Se(e){var t=o[e];if(void 0!==t)return t.exports;t=o[e]={exports:{}};return n[e](t,t.exports,Se),t.exports}Se.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Se.d(t,{a:t}),t},Se.d=function(e,t){for(var n in t)Se.o(t,n)&&!Se.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Se.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Se.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=Se(308),r=Se.n(e),e=Se(7361),c=Se.n(e);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){e=0<arguments.length&&void 0!==e?e:{};return e&&"string"==typeof e.creativeId?["715998959","138210079292","716945960","138228291976"].includes(e.creativeId):null}var e=Se(8718),i=Se.n(e);function a(e){e=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return e?e[2]:null}function s(e){var t=0<arguments.length&&void 0!==e?e:window.self!==window.top?document.referrer:window.location.href;try{if(!/^https?:\/\//.test(t))return"";t=(t=t.split("/")[2]).split(":")[0]}catch(t){console.debug(t)}return t}function u(e,t){var n=1<arguments.length&&void 0!==t?t:{},t=n.prop,o=void 0===t?"name":t,n=n.begin,n=void 0===n?0:n;if(!Array.isArray(e)||e.length<=n)return null;n=e.slice(n).map(function(e){return e[o]}).join(";");return n.includes(";")&&(n+=";"),n}function l(e){return e?e.join(";"):""}function v(e){e=0<arguments.length&&void 0!==e?e:(new Date).getTime();return 0<window.performance.timing.domContentLoadedEventStart?e-window.performance.timing.domContentLoadedEventStart:null}function o(){return c()(window,"wp_pb.pageName")||c()(window,"Fusion.template")||""}function f(){return c()(window,"pageName","").startsWith("video-leaf-page")||o().startsWith("video")}function h(){return!0===c()(window,"wp_meta_data.isHomepage")||"homepage"===c()(window,"Fusion.metas.contentType.value")?"homepage":f()?"leaf":(e=o()).startsWith("article")||e.startsWith("template/article")||(e=c()(window,"__NEXT_DATA__.props.pageProps.globalContent.subtype"),"LUF"===window.pageType||"highlights"===e||"live-all"===e)?"article page":-1<window.location.href.indexOf("/graphics/")||"interactive graphics"===c()(window,"wp_content_type","")?"graphics":"wpvIframe"===window.pageType||/washingtonpost\.com\/(video|posttv)\/c\/embed/.test(window.location.href)?"iframe":"other";var e}function w(e){var t=e.powa,n=e.powaId,o=e.powaTrack,i=e.event;return o||(t&&!n&&(n=t.getID()),o=c()(window,"powas[".concat(n,"].powaTrack"),[])),o.filter(function(e){return e.event===i})[0]||null}var m,y=(e=function(e){var e=0<arguments.length&&void 0!==e?e:document.location.search,n={};return e&&(window.URLSearchParams?new URLSearchParams(e).forEach(function(e,t){n[t]=e}):e.replace(/(^\?)/,"").split("&").forEach(function(e){e=e.split("="),n[e[0]]=e[1]})),n}().embedContext,window.wp_meta_data&&!0===window.wp_meta_data.isPWA||"pwa"===window.wp_site?"pwa":/^(fbInstant|amp|pwa)$/.test(e)?e.toLowerCase():"");function g(){var e,t={url:(e=(e=window.location.origin)||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),"".concat(e).concat(window.location.pathname)),urlQueryString:window.location.search,urlHash:window.location.hash,HTTP_REFERER:document.referrer,isSignedIn:!!a("wapo_secure_login_id"),isIframe:window.top!==window.self,embedContext:y,site:"amp"===y&&/freshcontent=1/.test(document.referrer)?"ampfresh":"amp"===y?"amphtml":y||(window.self===window.top&&-1<document.domain.indexOf("washingtonpost.com")||window.self!==window.top&&"document.domain"==document.domain&&document.domain===window.top.document.domain?"www.washingtonpost.com":void 0),templateName:o(),powaVersion:c()(window,"PoWa.VERSION"),powaBuild:c()(window,"PoWa.BUILD"),pageType:h(),pageSection:window.wp_section||"",_pageSubSection:window.wp_subsection||""},n=a("wapo_actmgmt")||"";t.isSubscriber=-1!==n.indexOf("isub:1");try{t.page=window.s.pageName,t.channel=window.s.channel,t.type=window.s.prop3}catch(e){}n=function(){if(window.wp_pb&&window.wp_pb.BrowserInfo){var e=window.wp_pb.BrowserInfo;return{browser:e.browser&&e.browser.toLowerCase(),os:e.OS&&e.OS.toLowerCase(),version:e.version&&e.version.split(".")[0]}}}();return n&&(t.browser=n.browser,t.os=n.os,t.version=n.version),f()&&(t.medleyHash=c()(window,"__NEXT_DATA__.props.pageProps.buildHash")),t}function n(e){if(!e)return{};var t,n=e.getElement(),o=e.getDataset(),i=e.getStatus(),a=c()(i,"stream"),r=function(e){return document.querySelector('script[src*="'+(0<arguments.length&&void 0!==e?e:"powaBoot.js")+'"]')}(),n={playerType:(t=o,i="posttv-embed".concat(y?"-"+y:""),t.playerType?i=t.playerType:!0===t.discovery?i="posttv-embed-playlist":window.wp_meta_data&&!0===window.wp_meta_data.isHomepage?i="posttv-embed-hp":window.self!==window.top?i="posttv-embed-iframe":window.wp_pb&&/video-leaf-page/.test(window.wp_pb.pageName)&&(i="posttv-leaf"),i),streamType:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{return e.split("/").pop().split(".")[1].split("?")[0]}catch(e){return null}}(a),streamDomain:b(a),cdn:function(e){if(e)return/akamai/.test(e)?"akamai":/posttv\.com|cloudfront.net/.test(e)?"cloudfront":void 0}(b(a))||null,ptvenv:function(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"powaBoot.js",t=e&&e.src?e.src.toLowerCase():null,e=t?t.split("//")[1].split("/").slice(1):[],t=e.reduce(function(e,t,n){return-1<t.indexOf(o.toLowerCase())?n:e},0);return 0===t?"prod":"js"===e[t-1]?"local":e[t-1]}(r),powaLoadedVia:r?r.dataset.loadedBy||r.dataset.loadedVia:null,nthVideoOnPage:o.powaIndex,_isPrerollPlugin:o.prerollOnly,_isAdDisabledOnPlayer:!1===o.ads,articleAutoplay:o.articleAutoplay,isLooping:o.continuousPlay||o.loop,offsetTop:function(e){var t;try{var n=window!=window.parent?window.parent:window,o=e.getBoundingClientRect(),i=n.pageYOffset||document.documentElement.scrollTop;t=Math.floor(o.top+i)}catch(e){}return t}(n),promoType:function(e){e=e.getElement();if(e.querySelector("video.powa-shot-promo-video"))return"mp4";e=e.querySelector(".powa-shot-image.powa-click-promo-play, .powa-shot-image.powa-click-promo-play-debounced");if(e){e=getComputedStyle(e).backgroundImage;return e&&"none"!==e?(e=e.slice(5,-2)).endsWith(".gif")?"gif":"image":null}return null}(e)};n.loadedBy=o.loadedBy||null,n.loadedByReason=o.loadedByReason||null,n.adTimeoutLength=o.adTimeouts.adStart,n.initOnScroll=!0===o.initOnScroll||!0===o.noVideoOnLivebarStart||!0===o.curtainNonInitialState;e={browser:(e=window.PoWaSettings&&window.PoWaSettings.client||{}).browserName,os:e.isAndroid?"android":e.isKindle?"kindle":e.isMac?"mac":e.isLinux?"linux":e.isIOS?"ios":e.isWindows?"windows":e.isChromeOs?"chromeOS":"",version:e.version,isWebView:e.isWebView};return n.browser=e.browser,n.os=e.os,n.version=e.version,e.isWebView&&(n.isWebView=e.isWebView),!0===o.loopingVideo&&(!1===o.ads&&(n._adNotSupported=!0),n.player="powa-loopingVideo"),n}function b(e){e=0<arguments.length&&void 0!==e?e:"";return e?e.split("/")[2]:null}window.addEventListener("pageshow",function(e){e.persisted&&(m="persisted")});var e=Se(8721),k=Se.n(e);function _(e){if(!e)return{};var t=e.getID(),n=window.powas[t].powaTrack,o={startReason:function(e){if(e=e.find(function(e){return"promoPlay"===e.event||"start"===e.event}))return 1<c()(e,"data.videoStarts")?"continuous":"promoPlay"===e.event?"manual":"start"===e.event?"autoplay":void 0}(n)},i=n.filter(function(e){return"adRequest"===e.event})[0],a=n.filter(function(e){return"adImpression"===e.event})[0],r=n.filter(function(e){return"adStart"===e.event})[0],s=n.filter(function(e){return"adComplete"===e.event})[0],u=n.filter(function(e){return"adBarSkip"===e.event})[0],l=r||a||i,e=n.filter(function(e){return"adStartTimeout"===e.event})[0],t=n.filter(function(e){return"adError"===e.event})[0];l?(o._isAdEventAvailable=!0,l=(a=l.data.adStatus).adMeta,o._isBlankAd=p(l),o._isPreloadAd=a.adPreload,o._isAdTimeout=!!e,o._isAdRequest=!!i,o._isAdStarted=!!r,o._isAdCompleted=!!s,o._isAdBarSkipped=!!u,o._isAdError=!!t):o._isAdEventAvailable=!1;s=n.filter(function(e){return"mtSession"===e.event})[0];s?(o.mt=!1===k()(s,"data.error"),o.mtError=k()(s,"data.error")):(o.mt=!1,o.mtError=!1);u=n.filter(function(e){return"mtAvails"===e.event})[0];u?(o.mtAvails=!0,o.mtCreativeId=c()(u,"data.avails[0].ads[0].creativeId"),o.mtVastAdId=c()(u,"data.avails[0].ads[0].vastAdId"),o.mtAdTitle=c()(u,"data.avails[0].ads[0].adTitle")):o.mtAvails=!1,n.filter(function(e){return"preview2-autoplay"===e.event})[0]&&(o.isPreview2=!0),n.filter(function(e){return"onceplay-autoplay"===e.event})[0]&&(o.isOnceplay=!0);t=n.filter(function(e){return"adHeaderBidding"===e.event})[0];t&&(o.adHeaderBidding=!0,o.adHeaderBiddingProvider=c()(t,"data.provider"));s=n.filter(function(e){return"irisStart"===e.event})[0];return s&&(u=n.filter(function(e){return"irisBidRequest"===e.event})[0],(t=n.filter(function(e){return"irisBidFetched"===e.event})[0])&&(o.irisRunTime=t.timestamp-s.timestamp,o.irisBidTime=t.timestamp-u.timestamp),n.filter(function(e){return"irisTimeout"===e.event})[0]&&(o.irisTimeout=!0)),n.filter(function(e){return"WapoUpUpcoming_notUpcoming"===e.event})[0]&&(o.wasUpcoming=!0),o}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){if("object"!==T(e))return{};var t,n,o={videoId:e._id||null,videoName:c()(e,"headlines.basic",null),videoType:"live"===e.video_type?"livestream":"video",videoSource:c()(e,"source.name",null),videoCMS:c()(e,"source.system"),videoHost:c()(e,"credits.host_talent",null),subsection:c()(e,"additional_properties.subsection",null),secondarySections:c()(e,"taxonomy.sections",null),durationInSeconds:e.duration?e.duration/1e3:0,editors:function(e){var t=c()(e,"credits.by",[]).filter(function(e){return e.name});{var n,o;0==t.length&&(n=c()(e,"credits.host_talent"),o=c()(e,"credits.contributors"),t=n&&0!==n.length||o&&0!==o.length?null:(o=c()(e,"additional_properties.firstPublishedBy.name",""),e=c()(e,"additional_properties.firstPublishedBy.lastname",""),o||e?[{name:"".concat(o," ").concat(e)}]:null))}return t}(e),streamName:c()(e,"additional_properties.streamName",""),contributors:c()(e,"credits.contributors"),videoCategory:c()(e,"additional_properties.videoCategory"),provider:c()(e,"streams[0].provider"),keywords:c()(e,"taxonomy.seo_keywords",null),tags:c()(e,"taxonomy.tags",null),canonicalUrl:c()(e,"canonical_url"),displayDate:(n=c()(e,"display_date"),o=(t=new Date(n)).getDate().toString(),n=(t.getMonth()+1).toString(),t.getFullYear().toString()+"-"+(n=1==n.length?"0"+n:n)+"-"+(o=1==o.length?"0"+o:o)),_dateLastPublished:(n=e.last_updated_date,new Date(n).getTime()),_adAllowed:P(e)};return P(e)&&(n=e,c()(n,"additional_properties.advertising.adSetUrls.apps","")||(o.missingAdSetUrl=!0),n=e,c()(n,"additional_properties.advertising.videoAdZone","")||(o.missingAdZone=!0),n=e,n=c()(n,"additional_properties.advertising.videoAdZone",""),!1===/wpni.video/.test(n)&&(o.invalidAdZone=!0),o.videoAdZone=c()(e,"additional_properties.advertising.videoAdZone")),o}function P(e){var t=c()(e,"additional_properties.playVideoAds"),e=x(e);return t&&e}var x=function(e){var t=function(e){var t=0<arguments.length&&void 0!==e?e:window.self!==window.top?document.referrer:window.location.href;try{if(t=s(t)){var n=t.split("."),o=n.length,i="co"===n[o-2]?3:2;if(i<=o){for(var a=[];i;)a.push(n[o-i]),i--;t=a.join(".")}}}catch(t){console.debug(t)}return t}();if(/washingtonpost\.com|localhost|thelily\.com|arcpublishing\.com|wpprivate\.com/.test(t))return!0;t=s();return!!/www-washingtonpost-com\.cdn\.ampproject\.org|wpit\.nile\.works/.test(t)||c()(e,"additional_properties.advertising.allowPrerollOnDomain")};function A(n,e){var o=1<arguments.length&&void 0!==e?e:(new Date).getTime();if(!n)return{};var i={};Object.keys(n).forEach(function(e){var t;i["timeSince".concat((t=e).charAt(0).toUpperCase()+t.slice(1))]=o-n[e]});e=v(o);return e&&(i.timeSinceDomContentLoaded=e),i}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return e.map(function(e){return e.name}).join(", ")}function O(e,t){return 0<=t.indexOf(e)?t:"".concat(e).concat(t)}function C(e){return"object"!==I(e)?{}:{eVar2:e.pageSection?O("wp - ",e.pageSection):"",prop2:e._pageSubSection?O("wp - ",e._pageSubSection):"",eVar8:e.editors?E(e.editors):"",eVar12:e.videoId,eVar13:(i=(o=e).subsection||"",a=e._dateLastPublished,o=e.videoName,a=new Date(a).toLocaleDateString("en-US"),i=i?i.toLowerCase()+":":"","".concat(i,"video - ").concat(a," - ").concat(o)),eVar17:e.videoType,eVar36:e.hostTalent?E(e.hostTalent):"",eVar37:e.contributors?E(e.contributors):"",eVar41:e.videoCategory,eVar42:e.videoSource,eVar44:"".concat((a=e).os," ").concat(a.browser," ").concat(a.version),eVar47:e.subsection,eVar48:(a=(o=e)._isAdEventAvailable?o._isPreloadAd?"prefetched":"notfetched":"undefined",o._isAdEventAvailable?o._isBlankAd?n="reqblank":o._isAdError?n="error":o._isAdStarted?n="reqshow":o._isAdTimeout&&(n="reqTimeout"):n=!1===o._adAllowed?"noreq":"undefined","".concat(a,":").concat(n)),eVar49:e.playerType,eVar50:e.pageType,eVar58:"washingtonpost.com",rolledUpAdStatus:((e=e)._isAdEventAvailable?e._isBlankAd?t="adBlank":e._isAdError?t="adError":e._isAdCompleted?t="adCompleted":e._isAdStarted?t="adStarted":e._isAdTimeout&&(t="adTimeout"):t=e._adNotSupported?"adNotSupported":!1===e._adAllowed?"adNotAllowed":e._isAdDisabledOnPlayer?"adDisabled":"undefined",t)};var t,n,o,i,a}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=(t(D,[{key:"send",value:function(){r()()}},{key:"load",value:function(){window.TWP&&window.TWP.Analytics||new Promise(function(e,t){return function(e,t,n){var o=1<arguments.length&&void 0!==t?t:r(),i=2<arguments.length&&void 0!==n?n:r(),a=document.querySelector('script[src="'.concat(e,'"]'));a&&a.hasAttribute("data-powa-script")?a.hasAttribute("data-load")?o():a.hasAttribute("data-error")?i():(a.addEventListener("load",o),a.addEventListener("error",i)):(a=document.createElement("script"),(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,n),a.addEventListener("error",function(){a.setAttribute("data-error",!0),i()}),a.addEventListener("load",function(){a.setAttribute("data-load",!0),o()}),a.setAttribute("data-powa-script",!0),a.type="text/javascript",a.async=!0,a.src=e)}("https://www.washingtonpost.com/wp-stat/analytics/latest/main.js",e,t)}).then(function(){console.log("analytics main.js loaded from videoAnalytics"),window.TWP.Analytics.init({suppressTrackPageLoad:!0})}).catch(function(e){return console.log("could not load main.js",e)})}}]),D),e=Se(3279);function D(){!function(e){if(!(e instanceof D))throw new TypeError("Cannot call a class as a function")}(this)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var M=["_ga","evtType","evtTime","streamName","ytState","ytState2","browser","version","os","videoId","url","ptvenv","powaBuild","powaVersion","videoAnalyticsVersion","HTTP_REFERER","playerType","vendor","visibilityState","persisted","rolledUpAdStatus","initOnScroll","nthVideoOnPage","playCounter","videoType","pageType","event501","errorText","startReason","articleAutoplay","templateName","isSubscriber","offsetTop","embedContext","promoType","medleyHash","wasUpcoming","autoplayBlocked","timeSinceDomContentLoaded","timeSincePowaRender","timeSincePromoClick","adHeaderBiddingProvider","irisRunTime","irisBidTime","irisTimeout"],L=[];var B=Se.n(e)()(function(){for(var e,t=[],n=0;0<L.length&&n<10;n++){var o=L.pop(),i=o.name,o=o.data;t.push({name:i,data:o})}e={postBody:function(e){var n="";return(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){var t=e.name,e=e.data,t={sourcetype:"httpevent",event:{name:t,data:e}};e.evtTime&&(t.time=Math.floor(e.evtTime/1e3)),n+=JSON.stringify(t)}),n}(t)},fetch("https://d1get58iwmjrxx.cloudfront.net/collector",{method:"POST",body:e.postBody}).then(function(e){}).catch(function(e){console.error(e)}),L.length&&B()},6e4,{maxWait:6e4}),N=(V(W,[{key:"send",value:function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};n.timeSinceDomContentLoaded||(n.timeSinceDomContentLoaded=v()),n.pageType||(n.pageType=h()),void 0===n.timeSincePowaRender&&o.powaId&&(n.timeSincePowaRender=function(e,t){var n=e.powa,o=e.powaId,i=e.powaTrack,e=e.event,t=1<arguments.length&&void 0!==t?t:(new Date).getTime(),e=w({powa:n,powaId:o,powaTrack:i,event:e});return e?t-e.timestamp:null}({powaId:o.powaId,event:"powaRender"})),void 0===n._ga&&(n._ga=a("_ga")),!0===o.harvest&&(Object.assign(n,g()),o.videoJSON&&Object.assign(n,S(o.videoJSON)));n=Object.assign({evtName:e,evtType:"string"==typeof t?t:t[0]||"",evtTime:Date.now()},i()(n,M));n={name:e,data:n},L.push(n),B()}}]),W);function W(){!function(e){if(!(e instanceof W))throw new TypeError("Cannot call a class as a function")}(this)}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var F=(R(H,[{key:"send",value:function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};n.pageType||(n.pageType=h()),!0===o.harvest&&(Object.assign(n,g()),o.videoJSON&&Object.assign(n,S(o.videoJSON))),window.dataLayer=window.dataLayer||[];var i,a,o={event:e,action:e,category:"video",label:(a=n,o=c()(a,"startReason",null),e=c()(a,"pageType",null),c()(a,"isPreview2",null)?"autoplay-"+c()(q,e)+"-preroll":o&&e?c()(U,o)+"-"+c()(q,e):c()(q,e))},n=(e=n,n={avName:c()(e,"videoName"),avProducer:u(c()(e,"editors",null)),avCMS:c()(e,"videoCMS"),avHost:u(c()(e,"videoHost")),avSection:c()(e,"subsection"),avSecondarySections:u(c()(e,"secondarySections",null),{begin:1}),avSource:c()(e,"videoSource"),avPlayer:c()(e,"player","powa"),avPlayerType:c()(e,"playerType"),avLength:c()(e,"durationInSeconds"),avArcID:c()(e,"videoId"),avType:c()(e,"videoCategory"),avContributors:u(c()(e,"contributors",null)),avHostID:u(c()(e,"videoHost"),{prop:"slug"}),avContributorID:u(c()(e,"contributors",null),{prop:"slug"}),avTags:l(function(e){var t,n=0<arguments.length&&void 0!==e?e:[],o=[];for(t in n)o.push(n[t].text);return o}(c()(e,"tags"),!0)),avDesk:null,avPublishDate:c()(e,"displayDate"),avKeywords:l(c()(e,"keywords")),adAttribute:c()(e,"rolledUpAdStatus"),avHeaderBidding:c()(e,"adHeaderBidding",!1),avTestGroup:(i="",[].forEach(function(e){return i+=e+";"}),i),avPromoType:c()(e,"promoType")},e.avLiveProgress&&(n.avLiveProgress=e.avLiveProgress),n),n=Object.assign({},o,n);window.dataLayer.push(n)}}]),H);function H(){!function(e){if(!(e instanceof H))throw new TypeError("Cannot call a class as a function")}(this)}var U={continuous:"rollthrough",manual:"click",autoplay:"autoplay"},q={homepage:"homepage",leaf:"leaf","article page":"embed",graphics:"graphics",other:"embed",iframe:"iframe"};var $={event125:{name:"video-promo-click",google:!0,timeMarker:"promoClick"},event6:{name:"video-social-share",google:!0},event9:{name:"video-start",google:!0,splunk:!0,timeMarker:"videoStart"},event10:{name:"video-25-complete",google:!0},event11:{name:"video-50-complete",google:!0},event12:{name:"video-75-complete",google:!0},event13:{name:"video-complete",google:!0},event34:{name:"ad-video-skip",google:!0,timeMarker:"adSkip"},event73:{name:"video-unmute",google:!0},event128:{name:"video-mute",google:!0},event136:{name:"video-pause",google:!0},event137:{name:"video-unpause",google:!0},event140:{name:"ad-video-pause",google:!0},event141:{name:"ad-video-unpause",google:!0},event166:{name:"fullscreen-engaged",google:!0},event75:{name:"video-autoplay",splunk:!0,google:!0}},z={event7:{name:"video-ad-start",google:!0,splunk:!0,timeMarker:"adStart"},event8:{name:"video-ad-complete",google:!0,timeMarker:"adEnd"},irisError:{name:"Iris Error",splunk:!0},irisBidError:{name:"Iris Bid Error",splunk:!0},irisTimeout:{name:"Iris Timeout",splunk:!0}};var Y={name:"player-video-ready",splunk:!0,timeMarker:"powaRender"},J=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Z.prototype,[{key:"send",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(new Date).getTime();this.va.send("event5_2",{config:Y,time:e,trackerData:{timeSinceNavigationStart:function(e){return e=0<arguments.length&&void 0!==e?e:(new Date).getTime(),0<window.performance.timing.navigationStart?e-window.performance.timing.navigationStart:null}()}})}}]),Z);function Z(e){var t=this;if(function(e){if(!(e instanceof Z))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup event5_2";this.powa=e.powa,this.va=e.va;e=w({powa:this.powa,event:"powaRender"});e?this.send(e.timestamp):this.powa.once("powaRender",function(e){t.send()})}var G={name:"YT State",splunk:!0},Q=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(K.prototype,[{key:"onInteraction",value:function(){this.interacted=!0}},{key:"onMuted",value:function(e){!1===e.muted&&this.onInteraction()}},{key:"onTime",value:function(){var n=this;this.lastTimeUpdate=(new Date).getTime(),!this.pingInterval&&this.interacted&&(this.send(),this.pingInterval=window.setInterval(function(){var e,t;document.getElementById(n.powa.getID())?(t=c()(window,"PoWaSettings.LiveConfig.videoData[".concat(n.uuid,"]"))||n.videoData,"ended"!==c()(t,"status")?(e=X(t),t=new Date,e&&e<t?window.clearInterval(n.pingInterval):n.send()):window.clearInterval(n.pingInterval)):window.clearInterval(n.pingInterval)},this.interval))}},{key:"send",value:function(){var e=this.powa.getStatus().state;this.va.send("event400",{config:G,trackerData:{ytState:e,ytState2:this._getYTState2(e)}})}},{key:"_getYTState2",value:function(e){var t=(new Date).getTime();return"buffering"===e&&t-this.lastTimeUpdate<this.timePlayingBuffer?"playing":e}},{key:"teardown",value:function(){window.clearInterval(this.pingInterval),delete this.pingInterval}},{key:"onYtPlayerStateChange",value:function(e){"playing"===e.playerState&&(this.onInteraction(),this.onTime())}}]),K);function K(e){var t=this;if(function(e){if(!(e instanceof K))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup event400";this.powa=e.powa,this.el=this.powa.getElement(),this.va=e.va;var n,o,i=this.powa.getDataset(),a=this.powa.getVideoData();this.videoData=a,"live-bar"!==i.playerType&&(n=!0===c()(window,"wp_meta_data.isHomepage")||"homepage"===c()(window,"Fusion.metas.contentType.value"),o=c()(window,"wpMetaData.subType")||c()(window,"Fusion.globalContent.subtype",""),e="live"===a.video_type,(i.event400||(n||("live-all"===o||"highlights"===o))&&e)&&(this.intervalEndDate=X(a),this.interval=6e4,this.timePlayingBuffer=500,this.powa.on("previewClicked",function(){return t.onInteraction()}),this.powa.on("promoPlay",function(){return t.onInteraction()}),this.powa.on("time",function(){return t.onTime()}),this.powa.on("destroyed",function(){return t.teardown()}),this.powa.on("WapoYouTube_playerStateChange",function(e){return t.onYtPlayerStateChange(e)}),"LiveBar"===i.playerType&&this.powa.on("muted",function(e){return t.onMuted(e)})))}function X(e){var t=0<arguments.length&&void 0!==e?e:{},e=c()(t,"additional_properties.publicationEndDate");if(e){e=new Date(e);if(c()(t,"additional_properties.streamName","").startsWith("washpostlive"))try{e.setMinutes(e.getMinutes()-30)}catch(t){}return e}return null}var ee={event500:{name:"Player Waiting"},event501:{name:"Player Waiting End",splunk:!0,timeMarker:!0},event9999_01:{name:"Video Timeout",splunk:!0}},te=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(ne.prototype,[{key:"onStart",value:function(){var e=this;this.pingInterval&&window.clearInterval(this.pingInterval),this.pingCount=0,this.sentOnPlayback=!1,this.sentOnTimeout=!1,this.pingInterval=window.setInterval(function(){e.pingCount++,e.send("event500"),e.pingCount>=e.maxRuns&&e._onTimeout()},this.interval)}},{key:"onAdStart",value:function(e){this._onPlayback(e)}},{key:"onFirstFrame",value:function(e){this._onPlayback(e)}},{key:"onTime",value:function(e){this._onPlayback(e)}},{key:"onEnd",value:function(e){window.clearInterval(this.pingInterval)}},{key:"_onPlayback",value:function(e){this.sentOnPlayback||(window.clearInterval(this.pingInterval),this.send("event501",{event501:"firstPicture",firstPictureReason:c()(e,"type","")}),this.sentOnPlayback=!0)}},{key:"_onTimeout",value:function(){var e;this.sentOnTimeout||(window.clearInterval(this.pingInterval),e=this.powa.getStatus()||{},e="autoplayBlocked"===c()(e,"autoplayStatus",""),this.send("event501",{event501:"timeout",autoplayBlocked:e}),this.sentOnTimeout=!0,this.send("event9999_01"))}},{key:"send",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=ee[e];t.pingCount=this.pingCount,!0===n.timeMarker&&(n.timeMarker=t.event501),this.va.send(e,{config:n,trackerData:t})}}]),ne);function ne(e){var t=this;if(function(e){if(!(e instanceof ne))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup event500";this.powa=e.powa,this.va=e.va,this.debug=e.va.debug,this.interval=2e3,this.maxRuns=8,this.sentOnPlayback=!1,this.sentOnTimeout=!1,this.powa.on("start",function(e){return t.onStart(e)}),this.powa.on("adStart",function(e){return t.onAdStart(e)}),this.powa.on("firstFrame",function(e){return t.onFirstFrame(e)}),this.powa.on("time",function(e){return t.onTime(e)}),this.powa.on("end",function(e){return t.onEnd(e)}),this.powa.on("destroyed",function(e){return t.onEnd(e)}),this.onTimeout=e.onTimeout||function(){}}var oe={name:"Setup error",splunk:!0},ie=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(ae.prototype,[{key:"send",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=c()(e,"error.error")||c()(e,"error.message")||c()(e,"message");this.va.send("event9994",{config:oe,trackerData:{errorText:e}})}}]),ae);function ae(e){var t=this;if(function(e){if(!(e instanceof ae))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup event9994";this.powa=e.powa,this.va=e.va,this.powa.on("powaError",function(e){t.send(e)})}var re={event9996:{name:"Video Ad Error",splunk:!0}},se=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(ue.prototype,[{key:"send",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};p(t.adMeta)||this.va.send(e,{config:re[e],trackerData:{errorText:t.error,prerollAdError:t.error}})}}]),ue);function ue(e){var t=this;if(function(e){if(!(e instanceof ue))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup event9996";this.powa=e.powa,this.va=e.va,this.powa.on("adError",function(e){t.send("event9996",e)})}var le={event9991_04:{name:"Non-blocking error"},event9999:{name:"Video Error",splunk:!0},event9999_preload:{name:"Video Error before start"},event9999_deluge:{name:"Video Error deluge"}},ce=["details","code","mediaError","fatal","type","stream","time"],de=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(pe.prototype,[{key:"onStart",value:function(e){this.started=!0}},{key:"onError",value:function(e){e.nonBlocking?this.send("event9991_04",e):this.started?(this.errorCount++,this.errorCount>this.deluge?this.send("event9999_deluge",e):this.send("event9999",e)):this.send("event9999_preload",e)}},{key:"send",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i()(n,ce);try{t=this.powa.getElement().querySelector("video.powa-video").error.message}catch(e){}this.va.send(e,{config:le[e],trackerData:{errorText:JSON.stringify(n),errorMessage:t,errorType:n.type,errorDetails:n.type}})}}]),pe);function pe(e){if(function(e){if(!(e instanceof pe))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup event400";this.powa=e.powa,this.va=e.va;e=this.powa.getID();this.powaTrack=window.powas[e].powaTrack,this.deluge=50,this.errorCount=0,this.powa.on("start",this.onStart.bind(this)),this.powa.on("error",this.onError.bind(this))}var ve={name:"powa-impression",google:!0},fe=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(he.prototype,[{key:"send",value:function(e){this.isSent||(this.va.send("event5_3",{config:ve,trackerData:e?{startReason:e}:{},time:(new Date).getTime()}),this.isSent=!0)}}]),he);function he(e){var t=this,n=e.powa,e=e.va;if(function(e){if(!(e instanceof he))throw new TypeError("Cannot call a class as a function")}(this),!n||!e)throw"Invalid settings to setup event5_3";this.powa=n,this.va=e,this.isSent=!1;e=this.powa.getDataset();!0===e.autoplay?(this.powa.once("start",function(e){return t.send()}),this.powa.once("powaReady",function(e){"autoplayBlocked"===t.powa.getStatus().autoplayStatus&&t.send("manual")})):!0===e.viewportAutoplay?(this.powa.once("start",function(e){return t.send()}),this.powa.once("ViewportAutoplay-blocked",function(e){return t.send("manual")})):!0===e.preview2?(this.powa.once("preview2-autoplay",function(e){return t.send()}),this.powa.once("preview2-autoplay-blocked",function(e){return t.send("manual")})):this.send("manual")}var we={name:"live-video-threshold",google:!0},me=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(ye.prototype,[{key:"onInteraction",value:function(){this.interacted=!0}},{key:"onTime",value:function(){var o,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pingInterval||"playing"!==e.state||!1!==e.muted||(o=e.powa,this.startTime=new Date,this.powa.off("time",this.onTime),this.pingInterval=setInterval(function(){var e,t,n;t=(e=o).getStatus(),n=e.getVideoData(),document.getElementById(e.getID())&&!function(e){var t=0<arguments.length&&void 0!==e?e:{},e=c()(t,"additional_properties.publicationEndDate");if(e)try{var n=new Date,o=new Date(e);return(o.setHours(o.getHours()+1),o<n)?1:void 0}catch(t){console.debug(t)}}(n)&&("playing"===t.state&&!1===t.muted||"adPlaying"===t.state&&!1===t.muted)&&(t=new Date-i.startTime,t=Math.floor(t/6e4),i.send({avLiveProgress:t}))},this.interval))}},{key:"send",value:function(e){e=e.avLiveProgress;this.va.send("live-video-threshold",{config:we,trackerData:{avLiveProgress:e}})}},{key:"teardown",value:function(){window.clearInterval(this.pingInterval),delete this.pingInterval}}]),ye);function ye(e){if(function(e){if(!(e instanceof ye))throw new TypeError("Cannot call a class as a function")}(this),!e.powa||!e.va)throw"Invalid settings to setup liveVideoThreshold";this.powa=e.powa,this.el=this.powa.getElement(),this.va=e.va,"live"===this.powa.getVideoData().video_type&&(this.interval=3e5,this.onTime=this.onTime.bind(this),this.powa.on("time",this.onTime))}var ge={},be=[0,25,50,75,100],ke=(e=[{key:"loadTrackingScripts",value:function(){j.load()}},{key:"registerPoWa",value:function(e){this.powa?console.warn("Calling registerPoWa() but you already have a powa"):(this.powaVersionCheck(),this.powa=window.powas[e].powa,this.data=this.powa.getVideoData(),Object.assign(this.harvest,S(this.data),n(this.powa),(this.powa,{})),this.initListeners())}},{key:"scanPowa",value:function(){this.data=this.powa.getVideoData(),Object.assign(this.harvest,S(this.data),n(this.powa))}},{key:"scanPerformance",value:function(){Object.assign(this.harvest,(this.powa,{}))}},{key:"send",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.debug&&console.debug("VA send()",e),!e)throw"no event";var n=e.split(",")[0],o=t.config||this.events[n];if(!o)return!1;var i,a=t.time?A(this.timeMarkers,t.time):A(this.timeMarkers),r=_(this.powa),s={visibilityState:document.visibilityState,persisted:m,imaVersion:c()(window,"google.ima.VERSION")},u=function(){var e;try{e=this.powa.getStatus().yt}catch(e){}return{videoAnalyticsVersion:"1.16.7",playCounter:this.playCounter,vendor:e?"YouTube":this.powa?"PoWa":void 0,adEndVisibilityState:this.adEndVisibilityState}}.call(this),s=C(l=Object.assign({},this.harvest,a,u,r,s,t.trackerData,(r=t.adMeta,{vpaid:"object"===d((i=r||{}).vpaid)||i.vpaid,numberOfRedirects:i.adWrapperIds?i.adWrapperIds.length:null,adId:i.adId||null,adQueryId:i.adQueryId||null,creativeId:(s=i.adWrapperCreativeIds||[],r=i.creativeId||"",s.push(r),s.filter(function(e){return!!e}).join(",")),title:i.title||null,description:i.description||null,mediaUrl:i.mediaUrl,adSystem:i.adSystem||null,adMeta:function(){var e=Object.assign({},i);"object"===d(e.vpaid)&&(e.vpaid=!!e.vpaid);try{return JSON.stringify(e)}catch(e){return console.debug(e),""}}(),isPreloadingAd:i.isPreloading,adWrapperSystems:(i.adWrapperSystems||[]).join(",")}))),l=Object.assign({},l,s);o.timeMarker&&(t.time?this.setTimeMarker(o.timeMarker,t.time):this.setTimeMarker(o.timeMarker)),Object.keys(l).forEach(function(e,t){e.startsWith("_")&&delete l[e]}),o.splunk&&N.send(o.name,n,l),o.google&&F.send(o.name,e,l)}},{key:"sendAdEvent",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};p(n.adMeta)||(t=this.powa.getElement(),n=Object.assign(n,{trackerData:{isInViewport:function(e,t,n){var o=1<arguments.length&&void 0!==t?t:1,t=2<arguments.length&&void 0!==n&&n;if(e instanceof HTMLElement){n=e.getBoundingClientRect();return 0<=n.top+e.offsetHeight*o&&n.bottom-e.offsetHeight*o<=(window.innerHeight||document.documentElement.clientHeight)&&(!t||0<=n.left)&&(!t||n.right<=(window.innerWidth||document.documentElement.clientWidth))}return null}(t),isSticky:(t=t)&&t.closest?null!==t.closest(".powa-sticky-stick.powa-sticky"):null}}),this.send(e,n))}},{key:"initFlags",value:function(){this.userPaused=!1,this.userPausedAd=!1,delete this.adEndVisibilityState}},{key:"initTimeIntervals",value:function(){this.timeIntervals=be.slice()}},{key:"setTimeMarker",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(new Date).getTime();if(!e)throw"name required for time marker";this.debug&&console.debug("VA setTimeMarker()",e),this.timeMarkers[e]=t}},{key:"unsetTimeMarkers",value:function(){this.timeMarkers={}}},{key:"trackLiveTime",value:function(e){"live-bar"!==this.powa.getDataset().playerType&&(!this.userClickedToPlay&&this.powa.getStatus().muted&&!0!==e.fullscreen||(this.send("event9"),this.powa.off("time",this.trackLiveTime)))}},{key:"trackFullscreen",value:function(e){e.fullscreen&&this.send("event166")}},{key:"trackPause",value:function(e){var t=this.powa.getStatus().time,n=this.powa.getStatus().duration;!this.userPaused&&t&&0<t&&n&&n!=t&&(this.send("event136"),this.userPaused=!0)}},{key:"trackAdPause",value:function(e){this.userPausedAd||(this.send("event140"),this.userPausedAd=!0)}},{key:"trackUnpause",value:function(e){this.userPaused&&(this.send("event137"),this.userPaused=!1)}},{key:"trackAdUnpause",value:function(e){this.userPausedAd&&(this.send("event141"),this.userPausedAd=!1)}},{key:"trackMute",value:function(e){e.muted?this.send("event128"):this.send("event73")}},{key:"trackAutoplay",value:function(e){var t=this.powa.getDataset();"live-bar"!==t.playerType&&(!t.autoplay||this.userClickedToPlay||this.firedAutoplay||(this.firedAutoplay=!0,this.send("event75")),"preview2-autoplay"!==e.type||this.firedAutoplay||(this.firedAutoplay=!0,this.send("event75")))}},{key:"initListeners",value:function(){var e;this.listenersDone||(this.listenersDone=!0,1==(e=this.powa.getDataset()).prerollOnly?this.prerollPluginListeners():(this.powaListeners(),"inline-player-playlist"===e.playerType&&this.inlinePlayerPlaylistListeners()))}},{key:"prerollPluginListeners",value:function(){var t=this;this.powa.on("adStart",function(e){return t.sendAdEvent("event7",{adMeta:e.adMeta})}),this.powa.on("adComplete",function(e){return t.sendAdEvent("event8",{adMeta:e.adMeta})}),this.powa.on("adSkip",function(e){return t.send("event34",{adMeta:e.adMeta})})}},{key:"powaListeners",value:function(){var t=this,e=this.powa,n=this.powa.getDataset(),o=this;new J({powa:e,va:o}),new fe({powa:e,va:o}),this.powa.on("promoPlay",function(e){t.userClickedToPlay=!0,t.send("event125")}),this.powa.on("fullscreen",this.trackFullscreen.bind(this)),this.powa.on("nextClick",function(e){return t.nextClick=!0}),this.powa.on("prevClick",function(e){return t.prevClick=!0}),this.powa.on("adStart",function(e){return t.sendAdEvent("event7",{adMeta:e.adMeta})}),this.powa.on("adComplete",function(e){return t.sendAdEvent("event8",{adMeta:e.adMeta})}),this.powa.on("adSkip",function(e){return t.send("event34",{adMeta:e.adMeta})}),this.powa.on("adEnd",function(e){return t.adEndVisibilityState=document.visibilityState}),this.powa.on("complete",this.initTimeIntervals.bind(this)),this.powa.on("muted",this.trackMute.bind(this)),this.powa.on("pause",this.trackPause.bind(this)),this.powa.on("play",this.trackUnpause.bind(this)),this.powa.on("adPause",this.trackAdPause.bind(this)),this.powa.on("adPlay",this.trackAdUnpause.bind(this)),this.powa.on("shareFacebook",function(e){return t.send("event6")}),this.powa.on("shareTwitter",function(e){return t.send("event6")}),this.powa.on("shareEmail",function(e){return t.send("event6")}),this.powa.on("upNextDismissed",function(e){return t.send("event168")}),this.powa.on("start",function(e){t.scanPowa(),t.initFlags.bind(t),t.trackAutoplay.call(t,e),t.playCounter=!0===t.firstPlay?0:t.playCounter+1,t.firstPlay=!1,t.setTimeMarker("playerStart")}),this.powa.on("preview2-autoplay",function(e){t.trackAutoplay.call(t,e)}),this.powa.on("loaded",function(){t.scanPowa()}),this.powa.on("playlistLoaded",function(e){t.scanPerformance()}),"live"===this.powa.getVideoData().video_type?this.powa.on("time",this.trackLiveTime):n.loopingVideo?this.powa.once("firstFrame",function(e){return t.send("event9")}):n.continuousPlay||n.loop?(this.powa.once("firstFrame",function(e){return t.send("event9")}),this.powa.once("playback25",function(e){return t.send("event10")}),this.powa.once("playback50",function(e){return t.send("event11")}),this.powa.once("playback75",function(e){return t.send("event12")}),this.powa.once("playback100",function(e){return t.send("event13")})):(this.powa.on("firstFrame",function(e){return t.send("event9")}),this.powa.on("playback25",function(e){return t.send("event10")}),this.powa.on("playback50",function(e){return t.send("event11")}),this.powa.on("playback75",function(e){return t.send("event12")}),this.powa.on("playback100",function(e){return t.send("event13")})),this.powa.on("irisError",function(){return t.send("irisError")}),this.powa.on("irisBidError",function(){return t.send("irisBidError")}),this.powa.on("irisTimeout",function(){return t.send("irisTimeout")}),new Q({powa:e,va:o}),new te({powa:e,va:o}),new de({powa:e,va:o}),new se({powa:e,va:o}),new ie({powa:e,va:o}),new me({powa:e,va:o})}},{key:"inlinePlayerPlaylistListeners",value:function(){var t=this;window.wp_pb.register("video","pagePlaylistItemClicked",function(e){t.scanPowa(),t.userClickedToPlay=!0,t.send("event125")})}},{key:"powaVersionCheck",value:function(){var e=c()(window,"PoWa.VERSION",""),e=parseInt(e.split(".")[0]);(!e||e<3)&&console.warn("VA Minimum of PoWa3 required")}}],function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Te.prototype,e),Te),_e={};function Te(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Te),!e||!t.data&&!t.powaId)throw"missing required stuff";this.events=Object.assign({},$,z),this.data=t.data,this.options=Object.assign({},ge,t),this.userClickedToPlay=!1,this.debug=window.location.search.includes("vaDebug=true"),this.initTimeIntervals(),this.playCounter=0,this.firstPlay=!0,this.timeMarkers={},this.trackLiveTime=this.trackLiveTime.bind(this),t.powa?this.powa=t.powa:t.powaId&&window.powas&&window.powas[t.powaId]&&(this.powa=window.powas[t.powaId].powa),this.powa&&(this.data=this.powa.getVideoData(),this.powaVersionCheck()),function(){try{return window.self!==window.top}catch(e){return 1}}()&&this.loadTrackingScripts(),this.harvest=Object.assign(g(),S(this.data),n(this.powa),(this.powa,{})),this.powa&&this.initListeners()}window.VideoAnalytics=window.VideoAnalytics||{version:"1.16.7",build:"a6cb931",init:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return _e[e]?t.powaId&&_e[e].registerPoWa(t.powaId):_e[e]=new ke(e,t),_e[e]},static:{sendToNewRelic:r(),sendToOmniture:r(),sendToGoogle:F.send,sendToSplunk:N.send}}}()}();
