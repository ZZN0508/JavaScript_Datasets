!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["atl-cross-domain-tracking"]=t():e.atl=t()}(this,function(){return n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNAVAILABLE="UNAVAILABLE",t.ERROR="ERROR",t.YES="YES",t.NO="NO"},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return u}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return s}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return f}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return m}),n.d(t,"__spreadArrays",function(){return v}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return _}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return A}),n.d(t,"__importStar",function(){return w}),n.d(t,"__importDefault",function(){return C}),n.d(t,"__classPrivateFieldGet",function(){return I}),n.d(t,"__classPrivateFieldSet",function(){return E});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function u(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;0<=u;u--)(o=e[u])&&(a=(i<3?o(a):3<i?o(t,n,a):o(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a}function c(n,r){return function(e,t){r(e,t,n)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,a,u,c){return new(u=u||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(r,o)}i((c=c.apply(e,a||[])).next())})}function f(n,r){var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!((a=0<(a=u.trys).length&&a[a.length-1])||6!==t[0]&&2!==t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i=[],a={};return r("next"),r("throw"),r("return"),a[Symbol.asyncIterator]=function(){return this},a;function r(r){o[r]&&(a[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||u(r,n)})})}function u(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(c,s):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){u("next",e)}function s(e){u("throw",e)}function l(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function _(r){var o,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,n){e[t]=r[t]?function(e){return(o=!o)?{value:g(r[t](e)),done:"return"===t}:n?n(e):e}:n}}function b(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a=h(a),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=a[i]&&function(o){return new Promise(function(e,t){var n,r;n=e,e=t,r=(o=a[i](o)).done,t=o.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function E(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.Environment||(t.Environment={})).TEST="test",r.LOCAL="local",r.DEV="dev",r.STAGE="stage",r.PROD="prod",(r=t.XIDItemType||(t.XIDItemType={})).XC="xc",r.UID="uid",(r=t.XIDState||(t.XIDState={})).NEW="NEW",r.CHANGED="CHANGED",r.EXISTING="EXISTING",r.TIMEOUT="TIMEOUT",r.ERROR="ERROR",r.UNAVAILABLE="UNAVAILABLE",r.MALFORMED="MALFORMED",r.UNKNOWN="UNKNOWN",(t=t.XIDGenerateMode||(t.XIDGenerateMode={})).XC_ONLY="XC_ONLY",t.UID_ONLY="UID_ONLY",t.CACHE_ONLY="CACHE_ONLY",t.XC_UID="XC_UID",t.CACHE_XC_UID="CACHE_XC_UID"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1).__exportStar(n(2),t);n=n(10);t.XID=n.XID},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(){try{return e=document.cookie,n={},""===(e=e.split(/ *; */))[0]||e.forEach(function(e){var t=e.split("="),e=a(t[0]),t=a(t[1]);e&&t&&(n[e]=t)}),n}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}var e,n}var o=n(1);function i(t){try{return encodeURIComponent(t)}catch(e){return console.log("error `encode(%o)` - %o",t,e),""}}function a(t){try{return decodeURIComponent(t)}catch(e){return console.log("error `decode(%o)` - %o",t,e),""}}t.getCookie=function(e){return e=e,r()[e]},t.getAllCookies=r,t.setCookie=function(e,t,n){return e=e,t=t,n=o.__assign({maxage:31536e6,secure:!1,path:"/",expires:null,domain:null,sameSite:"lax"},n),e=i(e)+"="+i((t||"").toString()),null==t&&(n.maxage=-1),n.maxage&&(r=new Date(+new Date+n.maxage)),n.path&&(e+="; path="+n.path),n.domain&&(e+="; domain="+n.domain),r&&(e+="; expires="+r.toUTCString()),n.secure&&(e+="; secure"),n.sameSite&&(e+="; samesite="+n.sameSite),document.cookie=e;var r},t.getCrossDomainCookieOption=function(){return{sameSite:"None",domain:window.location.hostname.split(".").slice(-2).join("."),secure:!0}}},function(e,d,h){"use strict";h.r(d),function(t){var e=h(9),n=setTimeout;function c(e){return Boolean(e&&void 0!==e.length)}function r(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void u(r.promise,e)}a(r.promise,e)}else(1===n._state?a:u)(r.promise,n._value)})):n._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,s(e)}catch(t){u(e,t)}var r,o}function u(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new l(e,t,n)),n},i.prototype.finally=e.a,i.all=function(t){return new i(function(o,i){if(!c(t))return i(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return o([]);var u=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(e){t(n,e)},i),0}a[n]=e,0==--u&&o(a)}catch(n){i(n)}}(e,a[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){if(!c(o))return t(new TypeError("Promise.race accepts an array"));for(var n=0,r=o.length;n<r;n++)i.resolve(o[n]).then(e,t)})},i._immediateFn="function"==typeof t?function(e){t(e)}:function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},d.default=i}.call(this,h(11).setImmediate)},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(1),i=t(4),a=t(2),u=t(14),n=t(8),c=t(17);r.XC_CURRENT="atl_xid.xc";s.getCachedXID=function(){try{var e=u.getXidItemFromCache("atl_xid.current"),t=u.getCache("atl_xid.ts"),n=!1;if(0<e.length&&e[0].type===a.XIDItemType.UID?n=parseInt(t||"",10)>=(new Date).getTime()-6048e5:0<e.length&&e[0].type===a.XIDItemType.XC&&(n=parseInt(t||"",10)>=(new Date).getTime()-2592e6),n){for(var r=0,o=e;r<o.length;r++)o[r].state="EXISTING";return e}return[]}catch(e){return[]}},s.saveXid=function(e){try{i.setCookie("atl_xid.ts",(new Date).getTime()),u.setLocalstorage("atl_xid.ts",(new Date).getTime().toString());for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];if(o.value&&o.createdAt){t.push({type:o.type,value:o.value,createdAt:o.createdAt});break}}i.setCookie("atl_xid.current",JSON.stringify(t)),u.setLocalstorage("atl_xid.current",JSON.stringify(t))}catch(e){console.error("Error setting xid cookie.")}},s.updateXc=function(e,t){try{if("prod"===e&&n.isAtlassianComDomain())return s.processAtlassianComDomainXc(t);s.saveXcLocalstorage(t)}catch(e){console.error("Error setting xc cookie.")}return t},s.getUids=function(){for(var e=u.getXidItemFromCache("atl_xid.uid")||[],t=0,n=e;t<n.length;t++)n[t].state="EXISTING";return e},s.saveUids=function(e){try{for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];o.value&&o.createdAt&&t.push({type:o.type,value:o.value,createdAt:o.createdAt})}t.slice(0,20),u.setLocalstorage("atl_xid.uid",JSON.stringify(t))}catch(e){console.error("Error setting uid cookie.")}},s.saveXcLocalstorage=function(e){var t;e.value&&e.createdAt&&((t=u.getXidFromLocalStorage(r.XC_CURRENT))&&t.value===e.value||(t&&t.value!==e.value&&(e.state="CHANGED"),e={type:e.type,value:e.value,createdAt:e.createdAt},u.setLocalstorage(r.XC_CURRENT,JSON.stringify(e))))},s.processAtlassianComDomainXc=function(e){if(e.value&&e.createdAt){var t=u.getXidFromCookie(r.XC_CURRENT);if(t){i.setCookie(r.XC_CURRENT,JSON.stringify(t),i.getCrossDomainCookieOption());var n=o.__assign({state:"EXISTING"},t);return s.saveXcLocalstorage(n),n}n={value:c.uuidv4(),createdAt:(new Date).toISOString(),type:a.XIDItemType.XC};i.setCookie(r.XC_CURRENT,JSON.stringify(n),i.getCrossDomainCookieOption());n=o.__assign({state:"NEW"},n);return s.saveXcLocalstorage(n),n}return e},t=s;function s(){}r.Storage=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=n(16);t.domain=function(o){for(var e=0,t=function(){var e=a.parse(o).hostname.split("."),t=e[e.length-1],n=[];if(4===e.length&&!isNaN(parseInt(t,10)))return n;if(e.length<=1)return n;for(var r=e.length-2;0<=r;--r)n.push(e.slice(r).join("."));return n}();e<t.length;e++){var n=t[e],r={domain:"."+n};if(i.setCookie("__tld__",1,r),i.getCookie("__tld__"))return i.setCookie("__tld__",null,r),n}return""},t.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},t.isAtlassianComDomain=function(){return/atlassian\.com$/.test(window.location.hostname)}},function(e,t,n){"use strict";t.a=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=r.__importDefault(t(5)),i=t(7),a=t(18),u=t(45),c=t(46),s=t(2);n.defaultTimeout=5e3;l.prototype.getTimeoutPromise=function(t){var n=this;return new o.default(function(e){setTimeout(function(){e([t])},(n.timeout-1e3)/2)})},l.prototype.getXcPromiseAndSave=function(){var n=this;return new o.default(function(t){n.getXc().then(function(e){n.storageEnabled&&i.Storage.saveXid([e]),t([e])})})},l.prototype.getUidPromiseAndSave=function(){var r=this;return new o.default(function(t){function e(){var e=[];r.storageEnabled&&(e=i.Storage.getUids()),e=a.UIDGenerator.getValue(e),r.storageEnabled&&(i.Storage.saveUids(e),i.Storage.saveXid(e)),t(e)}var n=window.requestIdleCallback;n?n(e):setTimeout(e,1e3)})},l.prototype.getXidPromiseInXcUidOnly=function(){var e=this;return this.getXcPromiseAndSave().then(function(t){return t&&0<t.length&&t[0].createdAt&&t[0].value?t:(e.getTimeoutPromise(e.timeoutUid),e.getUidPromiseAndSave().then(function(e){return r.__spreadArrays(e,t)}))})},l.prototype.getXidCallbackForPromise=function(e,t){var n;return void 0===e&&(e=s.XIDGenerateMode.CACHE_XC_UID),this.getXidPromise(e,t=void 0===t?!0:t).then(function(t){return function(){return e=t,n||(n=e.map(function(e){return"NEW"===e.state||"CHANGED"===e.state?{state:"EXISTING",type:e.type,createdAt:e.createdAt,value:e.value}:e}),e);var e}})},l.prototype.getXidPromise=function(e,t){var n=this;void 0===e&&(e=s.XIDGenerateMode.CACHE_XC_UID),this.storageEnabled=t=void 0===t?!0:t;var r=e===s.XIDGenerateMode.CACHE_ONLY||e===s.XIDGenerateMode.CACHE_XC_UID?i.Storage.getCachedXID():[];switch(e){case s.XIDGenerateMode.XC_ONLY:return c.promiseWithTimer(function(){return n.getXcPromiseAndSave()});case s.XIDGenerateMode.UID_ONLY:return c.promiseWithTimer(function(){return o.default.race([n.getTimeoutPromise(n.timeoutUid),n.getUidPromiseAndSave()])});case s.XIDGenerateMode.XC_UID:return c.promiseWithTimer(function(){return n.getXidPromiseInXcUidOnly()});case s.XIDGenerateMode.CACHE_ONLY:return o.default.resolve(r);default:s.XIDGenerateMode.CACHE_XC_UID;return 0<r.length?o.default.resolve(r):c.promiseWithTimer(function(){return n.getXidPromiseInXcUidOnly()})}},l.prototype.getXc=function(){return u.XCGenerator.getValue(this.env,(this.timeout-1e3)/2,this.storageEnabled)},l.prototype.getUidDetails=function(){return a.UIDGenerator.getDetails()},t=l;function l(e,t){if(void 0===e&&(e="local"),void 0===t&&(t=n.defaultTimeout),this.storageEnabled=!0,this.timeoutUid={type:s.XIDItemType.UID,state:"TIMEOUT"},!e)throw new Error("Missing env configuration");this.env=e;e="prod"===this.env?1e4:3e4;2e3<=t&&t<=e?this.timeout=t:("prod"!==this.env&&console.log("timeout configuration must be in the range of [2000, "+e+"] seconds"),this.timeout=n.defaultTimeout)}n.XID=t},function(e,o,i){!function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}o.setTimeout=function(){return new r(n.call(setTimeout,t,arguments),clearTimeout)},o.setInterval=function(){return new r(n.call(setInterval,t,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(t,this._id)},o.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},o.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},o._unrefActive=o.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(12),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}.call(this,i(6))},function(e,t,n){!function(e,h){!function(n){"use strict";var r,t,o,e,i,a,u,c,s,l;function f(e){delete a[e]}function d(e){if(u)setTimeout(d,0,e);else{var n=a[e];if(n){u=!0;try{!function(){var e=n.callback,t=n.args;switch(t.length){case 0:e();break;case 1:e(t[0]);break;case 2:e(t[0],t[1]);break;case 3:e(t[0],t[1],t[2]);break;default:e.apply(void 0,t)}}()}finally{f(e),u=!1}}}}n.setImmediate||(i=1,u=!(a={}),c=n.document,s=(s=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&s.setTimeout?s:n,l="[object process]"==={}.toString.call(n.process)?function(e){h.nextTick(function(){d(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(o="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(o)&&d(+e.data.slice(o.length))},n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),function(e){n.postMessage(o+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){t.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},s.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return a[i]={callback:e,args:t},l(i),i++},s.clearImmediate=f)}("undefined"==typeof self?void 0===e?this:e:self)}.call(this,n(6),n(13))},function(e,t){var n,r,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var u,c=[],s=!1,l=-1;function f(){s&&u&&(s=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!s){var e=a(f);s=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,s=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||s||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e){try{var t=JSON.parse(e);if(t instanceof Array){for(var n=!0,r=0,o=t;r<o.length;r++)var i=o[r],n=n&&a.checkXidValid(i);return n?t:void 0}return a.checkXidValid(t)?t:void 0}catch(e){return}}var o=n(4),a=n(15);function i(e){e=o.getCookie(e);return r(e)}function u(e){var t="";try{t=localStorage.getItem(e)||""}catch(e){}return r(t)}t.getXidFromCookie=i,t.getXidFromLocalStorage=u,t.setLocalstorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){}},t.getCache=function(e){return o.getCookie(e)||function(e){try{return localStorage.getItem(e)||""}catch(e){}}(e)},t.getXidItemFromCache=function(e){return i(e)||u(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.checkXidValid=function(e){return!(e.type!==r.XIDItemType.UID&&e.type!==r.XIDItemType.XC||!e.value||!Date.parse(e.createdAt))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?n.port(t.protocol):t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!==t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:(t.protocol&&":"!==t.protocol?t:location).protocol,search:t.search,query:t.search.slice(1)}},n.isAbsolute=function(e){return 0===e.indexOf("//")||!!~e.indexOf("://")},n.isRelative=function(e){return!n.isAbsolute(e)},n.isCrossDomain=function(e){var t=n.parse(e),e=n.parse(window.location.href);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol},n.port=function(e){switch(e){case"http:":return 80;case"https:":return 443;default:return location.port}},n.getParam=function(e){e=window.location.href.match("[?&]"+e+"=([^&#]+)");return e?e.pop():""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(19),a=n(36),r=n(0),u=n(38),c=n(41),s=n(3),l=n(44),n=(f.getDetails=function(){try{return{browser:{browserDefaultEvalLength:i.browserDefaultEvalLength(),canWriteCookie:i.canWriteCookie(),getBrowserVendor:i.getBrowserVendor(),getHardwareConcurrency:i.getHardwareConcurrency(),getLanguage:i.getLanguage(),getPlatform:i.getPlatform(),getPlugins:i.getPlugins(),getProductSub:i.getProductSub(),getTimeZone:i.getTimeZone(),getTimeZoneOffset:i.getTimeZoneOffset(),getUserAgent:i.getUserAgent(),isIndexedDBAvailable:i.isIndexedDBAvailable(),isLocalStorageAvailable:i.isLocalStorageAvailable(),isSessionStorageAvailable:i.isSessionStorageAvailable(),isTestingBot:i.isTestingBot(),isWebDriver:i.isWebDriver()},canvas:{studyPrint:a.studyPrint()},font:{jsFonts:(new u.DetectFonts).detect()},webGL:{getWebGL:c.getWebGL()}}}catch(e){return r.ERROR}},f.getValue=function(e){try{var t,n=[i.browserDefaultEvalLength(),i.canWriteCookie(),i.getBrowserVendor(),i.getHardwareConcurrency(),i.getLanguage(),i.getPlatform(),i.getPlugins(),i.getProductSub(),i.getTimeZone(),i.getTimeZoneOffset(),i.getUserAgent(),i.isIndexedDBAvailable(),i.isLocalStorageAvailable(),i.isSessionStorageAvailable(),i.isTestingBot(),i.isWebDriver(),a.studyPrint(),(new u.DetectFonts).result(),c.getWebGL()],r=l.x64hash128(n.join("|"),64);return"EXISTING"==(t=e.length?e[0].value===r?"EXISTING":"CHANGED":"NEW")?e:o.__spreadArrays([{type:s.XIDItemType.UID,createdAt:(new Date).toISOString(),state:t,value:r}],e)}catch(e){return[{type:s.XIDItemType.UID,state:"ERROR"}]}},f);function f(){}t.UIDGenerator=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20);t.browserDefaultEvalLength=r.browserDefaultEvalLength;r=n(21);t.canWriteCookie=r.canWriteCookie;r=n(22);t.getBrowserVendor=r.getBrowserVendor;r=n(23);t.getHardwareConcurrency=r.getHardwareConcurrency;r=n(24);t.getLanguage=r.getLanguage;r=n(25);t.getPlatform=r.getPlatform;r=n(26);t.getPlugins=r.getPlugins;r=n(27);t.getProductSub=r.getProductSub;r=n(28);t.getTimeZone=r.getTimeZone;r=n(29);t.getTimeZoneOffset=r.getTimeZoneOffset;r=n(30);t.getUserAgent=r.getUserAgent;r=n(31);t.isIndexedDBAvailable=r.isIndexedDBAvailable;r=n(32);t.isLocalStorageAvailable=r.isLocalStorageAvailable;r=n(33);t.isSessionStorageAvailable=r.isSessionStorageAvailable;r=n(34);t.isTestingBot=r.isTestingBot;n=n(35);t.isWebDriver=n.isWebDriver},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.browserDefaultEvalLength=function(){try{return eval.toString().length||0}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.canWriteCookie=function(){try{return document.cookie="cookietest=1",-1!==document.cookie.indexOf("cookietest=")?(document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",r.YES):r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getBrowserVendor=function(){try{return navigator.vendor||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHardwareConcurrency=function(){try{var e=parseInt(navigator.hardwareConcurrency.toString(),10);return isNaN(e)?1:e}catch(e){return 1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getLanguage=function(){try{return navigator.language||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getPlatform=function(){try{return navigator.platform||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=n(0);t.getPlugins=function(){try{var e="Microsoft Internet Explorer"===navigator.appName,t="Netscape"===navigator.appName,n=/Trident/.test(navigator.userAgent);if(e||t&&n)return d.UNAVAILABLE;for(var r=navigator.plugins,o="",i=0;i<r.length;i++)for(var a=navigator.plugins[i],u=a.name,c=a.filename,s=a.length,l=0;l<s;l++){var f=a[l];f&&(o=o+u+","+c+","+f.type+"|")}return o}catch(e){return d.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getProductSub=function(){try{return navigator.productSub||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getTimeZone=function(){try{return window.Intl&&window.Intl.DateTimeFormat?(new window.Intl.DateTimeFormat).resolvedOptions().timeZone:r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getTimeZoneOffset=function(){try{return(new Date).getTimezoneOffset()||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getUserAgent=function(){try{return navigator.userAgent||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isIndexedDBAvailable=function(){try{return window.indexedDB?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isLocalStorageAvailable=function(){try{return window.localStorage?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isSessionStorageAvailable=function(){try{return window.sessionStorage?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isTestingBot=function(){try{return["webdriver"in window,"_Selenium_IDE_Recorder"in window,"callSelenium"in window,"_selenium"in window,"__webdriver_script_fn"in document,"__driver_evaluate"in document,"__webdriver_evaluate"in document,"__selenium_evaluate"in document,"__fxdriver_evaluate"in document,"__driver_unwrapped"in document,"__webdriver_unwrapped"in document,"__selenium_unwrapped"in document,"__fxdriver_unwrapped"in document,"__webdriver_script_func"in document,null!==document.documentElement.getAttribute("selenium"),null!==document.documentElement.getAttribute("webdriver"),null!==document.documentElement.getAttribute("driver")].some(function(e){return!0===e})?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isWebDriver=function(){try{return navigator.webdriver?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(37);t.studyPrint=n.studyPrint},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.studyPrint=function(){try{var e=document.createElement("canvas");e.width=240,e.height=140,e.style.display="inline";var t=e.getContext("2d");return t?(t.rect(0,0,10,10),t.rect(2,2,6,6),t.isPointInPath(5,5,"evenodd"),t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.font="11pt no-real-font-123",t.fillText("Cwm fjordbank ðŸ˜ƒ gly",2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText("Cwm fjordbank ðŸ˜ƒ gly",4,45),t.globalCompositeOperation="multiply",t.fillStyle="rgb(255,0,255)",t.beginPath(),t.arc(50,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(0,255,255)",t.beginPath(),t.arc(100,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,255,0)",t.beginPath(),t.arc(75,100,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,0,255)",t.arc(75,75,75,0,2*Math.PI,!0),t.arc(75,75,25,0,2*Math.PI,!0),t.fill("evenodd"),e.toDataURL()):r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(39);t.DetectFonts=n.DetectFonts},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(40),n=(o.prototype.detect=function(){var e=this.initializeBaseFontsSpans();this.bodyElement.appendChild(this.baseFontsDiv);for(var t=0;t<this.baseFonts.length;t++)this.defaultWidth[this.baseFonts[t]]=e[t].offsetWidth,this.defaultHeight[this.baseFonts[t]]=e[t].offsetHeight;var n=this.initializeFontsSpans();this.bodyElement.appendChild(this.fontsDiv);for(var r=[],o=0,i=s.fontsToCheck;o<i.length;o++){var a=i[o],u=0;this.isFontAvailable(n[a])&&(u=1),r.push(u)}return this.bodyElement.removeChild(this.fontsDiv),this.bodyElement.removeChild(this.baseFontsDiv),r.join("|")},o.prototype.result=function(){try{return this.detect()}catch(e){return r.ERROR}},o);function o(){var c=this;this.baseFonts=["monospace","sans-serif","serif"],this.testString="mmmmmmmmmmlli",this.testSize="72px",this.defaultWidth={},this.defaultHeight={},this.createSpan=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=c.testSize,e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML=c.testString,e},this.createSpanWithFonts=function(e,t){var n=c.createSpan();return n.style.fontFamily="'"+e+"',"+t,n},this.initializeBaseFontsSpans=function(){for(var e=[],t=0,n=c.baseFonts;t<n.length;t++){var r=n[t],o=c.createSpan();o.style.fontFamily=r,c.baseFontsDiv.appendChild(o),e.push(o)}return e},this.initializeFontsSpans=function(){for(var e={},t=0,n=s.fontsToCheck;t<n.length;t++){for(var r=n[t],o=[],i=0,a=c.baseFonts;i<a.length;i++){var u=a[i],u=c.createSpanWithFonts(r,u);c.fontsDiv.appendChild(u),o.push(u)}e[r]=o}return e},this.isFontAvailable=function(e){for(var t=!1,n=0;n<c.baseFonts.length;n++){var r=e[n].offsetWidth,o=c.defaultWidth[c.baseFonts[n]],i=e[n].offsetHeight,a=c.defaultHeight[c.baseFonts[n]];if(t=r!==o||i!==a)return t}return t},this.bodyElement=document.getElementsByTagName("body")[0],this.baseFontsDiv=document.createElement("div"),this.fontsDiv=document.createElement("div")}t.DetectFonts=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fontsToCheck=["Adobe Garamond","Adobe Hebrew","Agency FB","Airstream","Andale Mono","Aparajita","Arial","BN Manson Nights","Baskerville","BlackChancery","Book Antiqua","Bookman Old Style","CG Times","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Chalkboard","Comic Sans","Comic Sans MS","Consolas","Cooper Black","Corbel","Courier","Courier New","Curlz MT","DS Sans Serif","Degrassi","Didot","Ebrima","GOST Common","Geneva","Georgia","Gulim","Heiti TC","Helvetica","Helvetica Neue","Hoefler Text","Impact","Kalinga","Letter Gothic","Lithos Pro","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Lucida Handwriting","Lucida Sans","MS Gothic","MS Outlook","MS PGothic","MYRIAD","Malgun Gothic","Mangal","MapInfo Miscellaneous","Meiryo UI","Monaco","Monotype Corsiva","NSimSun","OSAKA","Palatino","Pickwick","Playbill","Pristina","Segoe Print","Segoe Script","Segoe UI","Shonar Bangla","Snell Roundhand","Styllo","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","Wingdings"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(42);t.getWebGL=n.getWebGL},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(43);t.getWebGL=function(){try{var e=o.getContext();if(void 0===e)return r.UNAVAILABLE;if(e&&"object"==typeof e&&e.context){var t=e.context,n=t.getExtension("WEBGL_debug_renderer_info");return null!==n?[t.getParameter(n.UNMASKED_RENDERER_WEBGL),t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)].join("|"):r.UNAVAILABLE}}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.getContext=function(){if(window.WebGLRenderingContext)for(var e=document.createElement("canvas"),t=0,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"];t<n.length;t++){var r=n[t];try{var o=e.getContext(r);if(o&&o instanceof WebGLRenderingContext&&"function"==typeof o.getParameter)return{name:r,context:o}}catch(e){return i.ERROR}}return i.UNAVAILABLE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function d(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function h(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function p(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:[e[1]<<(t-=32)|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t]}function m(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function v(e,t){return[e[0]^t[0],e[1]^t[1]]}function g(e){return e=v(e,[0,e[0]>>>1]),e=h(e,[4283543511,3981806797]),e=v(e,[0,e[0]>>>1]),e=h(e,[3301882366,444984403]),v(e,[0,e[0]>>>1])}t.x64hash128=function(e,t){for(var n=(e=e||"").length%16,r=e.length-n,o=[0,t=t||0],i=[0,t],a=[0,0],u=[0,0],c=[2277735313,289559509],s=[1291169091,658871167],l=0;l<r;l+=16)a=[255&e.charCodeAt(l+4)|(255&e.charCodeAt(l+5))<<8|(255&e.charCodeAt(l+6))<<16|(255&e.charCodeAt(l+7))<<24,255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24],u=[255&e.charCodeAt(l+12)|(255&e.charCodeAt(l+13))<<8|(255&e.charCodeAt(l+14))<<16|(255&e.charCodeAt(l+15))<<24,255&e.charCodeAt(l+8)|(255&e.charCodeAt(l+9))<<8|(255&e.charCodeAt(l+10))<<16|(255&e.charCodeAt(l+11))<<24],a=h(a,c),a=p(a,31),a=h(a,s),o=v(o,a),o=p(o,27),o=d(o,i),o=d(h(o,[0,5]),[0,1390208809]),u=h(u,s),u=p(u,33),u=h(u,c),i=v(i,u),i=p(i,31),i=d(i,o),i=d(h(i,[0,5]),[0,944331445]);var a=[0,0],u=[0,0],f=r;switch(n){case 15:u=v(u,m([0,e.charCodeAt(14+f)],48));case 14:u=v(u,m([0,e.charCodeAt(13+f)],40));case 13:u=v(u,m([0,e.charCodeAt(12+f)],32));case 12:u=v(u,m([0,e.charCodeAt(11+f)],24));case 11:u=v(u,m([0,e.charCodeAt(10+f)],16));case 10:u=v(u,m([0,e.charCodeAt(9+f)],8));case 9:u=v(u,[0,e.charCodeAt(8+f)]),u=h(u,s),u=p(u,33),u=h(u,c),i=v(i,u);case 8:a=v(a,m([0,e.charCodeAt(7+f)],56));case 7:a=v(a,m([0,e.charCodeAt(6+f)],48));case 6:a=v(a,m([0,e.charCodeAt(5+f)],40));case 5:a=v(a,m([0,e.charCodeAt(4+f)],32));case 4:a=v(a,m([0,e.charCodeAt(3+f)],24));case 3:a=v(a,m([0,e.charCodeAt(2+f)],16));case 2:a=v(a,m([0,e.charCodeAt(1+f)],8));case 1:a=v(a,[0,e.charCodeAt(f)]),a=h(a,c),a=p(a,31),a=h(a,s),o=v(o,a)}return o=v(o,[0,e.length]),i=v(i,[0,e.length]),o=d(o,i),i=d(i,o),o=g(o),i=g(i),o=d(o,i),i=d(i,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(1).__importDefault(n(5)),r=n(8),c=n(7),s=n(3),n=(l.getValue=function(r,e,o){void 0===e&&(e=3e3),void 0===o&&(o=!0);var t=l.getHost(r),i=t?"https://"+t:"",t=i?i+"?t="+(new Date).getTime():"",a=l.addFrame(t);return new u.default(function(t){function n(e){"xcReady"===e.data.type&&e.origin===i&&(e=l.messageToXc(e),o&&(e=c.Storage.updateXc(r,e)),t(e),l.removeFrame(a,n))}window.addEventListener("message",n),setTimeout(function(){t({type:s.XIDItemType.XC,state:"TIMEOUT"}),l.removeFrame(a,n)},e)})},l.messageToXc=function(e){var t=e.data,n=t.xc,e=t.ts,t=t.state;return n&&Date.parse(e)&&t?{type:s.XIDItemType.XC,value:n,createdAt:e,state:t}:{type:s.XIDItemType.XC,state:t||"MALFORMED"}},l.addFrame=function(e){var t=document.createElement("iframe");return t.id="xc-"+(new Date).getTime(),t.src=e,t.style.display="none",t.style.position="fixed",document.body.appendChild(t),t},l.removeFrame=function(e,t){document.body.contains(e)&&(document.body.removeChild(e),window.removeEventListener("message",t))},l.getHost=function(e){switch(e){case"stage":return"xxid.staging.atl-paas.net";case"prod":return r.isAtlassianComDomain()?"xxid.atl-paas.net":"xxid.atlassian.com";case"test":return"";default:return"xxid.dev.atl-paas.net"}},l);function l(){}t.XCGenerator=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(2);t.promiseWithTimer=function(e){var c=l();return e().then(function(e){return e.map(function(e){return n=e,u={type:s.XIDItemType.UID,state:"MALFORMED"},r=c,o=n.state,i=n.type,a=n.value,e=n.createdAt,(n&&o&&i&&a&&e&&("NEW"===o||"CHANGED"===o)?{state:o,type:i,value:a,createdAt:e,timeTaken:l()-r}:null)||(a=n.state,e=n.type,r=n.value,t=n.createdAt,n&&a&&e&&r&&t&&"EXISTING"===a?{state:a,type:e,value:r,createdAt:t}:null)||function(){var e=n.state,t=n.type;if(n&&e&&t)switch(e){case"TIMEOUT":case"ERROR":case"UNAVAILABLE":case"UNKNOWN":case"MALFORMED":return{type:t,state:e}}return null}()||(t=n.type,n&&t?{type:t,state:"MALFORMED"}:null)||u;var n,t,r,o,i,a,u})})};var l=function(){return performance&&performance.now?performance.now():(new Date).getTime()}}],r={},o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});
