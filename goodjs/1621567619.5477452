(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{I4Wp:function(e,t,n){},IuzP:function(e,t,n){},JhcM:function(e,t,n){},KA4J:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var a=n("efbE"),r=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],c=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return r.includes(e)?e:"en"},i=function getTrendingGiphys(e){return a.h.get("/trending",{params:{limit:e,rating:"pg"}})},o=function getSearchGiphys(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return a.h.get("/search",{params:{limit:t,q:e,lang:c(n),rating:"pg"}})}},"PGb/":function(e,t,n){},UXBQ:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c});var a=n("efbE"),r=function uploadAttachment(e,t){var n=new FormData;return n.append("conversationId",t),n.append("file",e),a.a.post("/attachments",n)},c=function fetchAttachments(e,t){return a.a.get("/attachments",{params:{id:e},cancelToken:t})}},dZmz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("efbE"),r=n("rAc1"),c=n("l6A5"),i=function urlIdentity(e){return Object(r.a)(e)},o=(Object(c.a)(i,function(e){return a.k.get("/",{params:{url:encodeURI(e)}})}),Object(c.a)(i,function(e){return a.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}))},fTFZ:function(e,t,n){"use strict";var a=n("nfbA"),r=n("WwEg"),c=n("s8DI"),i=n("nJ3u"),o=n("O94r"),s=n.n(o),u=n("7IKl"),l=n("lE29"),d=n("ERkP"),m=n.n(d),f=n("Tr4L"),b=n("uDfI"),g=(n("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(l.a)().widgetBackgroundAlpha,n=Object(b.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),a=n.isTyping,r=void 0!==a&&a,c=n.userId,i=Object(u.a)(c);return r?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=n("ZGTz"),v=n("oImb"),O=n("+Kbs"),j=n("908p"),h=n("nQD+"),E=n("HXmn"),y=n("mZ4K"),w=n("P+wr"),A=n("vLHT"),I=n("6wvX"),k=n("z24s"),T=n("jITz"),C=n("6rzO"),N=n("58kB"),L=n("uQkC"),S=n("Hvhg"),B=n("+oIK"),U=n("LVcX"),M=n("U505"),z=n("ovDp"),R=n("vwUF"),_=n("0lfv");n("IuzP");n.d(t,"a",function(){return x});var x,F="GIF",D="TEXT",P=function validateMessageText(e){return!Object(_.m)(e)&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(x||(x={}));t.b=function Composer(e){var t=e.onSubmit,n=e.activeConversationId,o=e.disabled,u=void 0!==o&&o,V=e.chatHidden,H=e.alwaysShowSendAction,G=void 0!==H&&H,K=e.useGifPicker,Z=void 0===K||K,J=e.alwaysShow,W=void 0!==J&&J,X=Object(d.useRef)(null),q=Object(d.useRef)(null),Q=Object(d.useRef)(null),Y=Object(d.useRef)(null),$=Object(A.a)(),ee=Object(d.useState)(""),te=Object(c.a)(ee,2),ne=te[0],ae=te[1],re=Object(d.useState)(!1),ce=Object(c.a)(re,2),ie=ce[0],oe=ce[1],se=Object(d.useState)(!1),ue=Object(c.a)(se,2),le=ue[0],de=ue[1],me=Object(d.useState)(!1),fe=Object(c.a)(me,2),be=fe[0],ge=fe[1],pe=Object(d.useState)([]),ve=Object(c.a)(pe,2),Oe=ve[0],je=ve[1],he=Object(k.a)(X),Ee=Object(k.a)(q),ye=Object(k.a)(Q),we=Object(k.a)(Y),Ae=Object(b.c)(function(e){return e.view}),Ie=Ae.matchedHours,ke=Ae.chatOpen,Te=Object(b.c)(function(e){return e.conversations.attachments}),Ce=Object(b.c)(function(e){return e.session.endUser.id}),Ne=Object(b.c)(function(e){return Object(U.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,Le=Object(b.c)(S.g),Se=Z&&Le,Be=Object(f.a)().t,Ue=Object(I.a)(!0),Me=Object(y.a)(),ze=Object(l.a)(),Re=ze.activeColor,_e=ze.widgetBackgroundColor,xe=ze.composerTheme,Fe=ze.composerButtonHoverColor,De=ze.composerButtonIconColor,Pe=Object(N.a)(Me).recipient,Ve=Object(C.a)({inputRef:X}),He=Ve.pastedFiles,Ge=Ve.clearFiles,Ke=Object(T.a)({targetKey:"Enter"}),Ze=Object(L.a)({activeConversationId:n}),Je=Ze.sendTypingStarted,We=Ze.sendTypingFinished,Xe=Object(w.a)({activeConversation:n,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){je(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),Ge()},[])}),qe=Xe.attachmentState,Qe=Xe.uploadAttachments,Ye=Xe.resetAttachmentState,$e=$===x.AVAILABLE||$===x.AVAILABLE_BUTTONS,et=Object(d.useMemo)(function(){return!W&&(u||!$e)},[W,u,$e]),tt=Object(z.a)({onDrop:Qe,disabled:u||!$e||!Ne}),nt=tt.getRootProps,at=tt.getInputProps,rt=tt.open,ct=P(ne)||!Object(_.m)(Oe),it=qe===R.b.PENDING,ot=qe===R.b.ERROR||qe===R.b.SIZE_ERROR,st=u||!$e||!!He.length;var ut=Object(d.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,c=Oe?{attachments:Oe}:{},i=n?{}:{sentWelcomeMessage:Ie};We();var o=r===D?Object(_.r)(e):e;t({message:Object(B.a)(Object(a.a)({message:o,activeConversation:n||null,authorId:Ce,attributes:i},c))}),ae(""),je([]),Ye()},[n,Ce,Ie,t,Ye,We,Oe]);Object(d.useEffect)(function(){Ne?He.length&&!it&&Qe(He):Ge()},[Ne,it,Ge,He,Qe]),Object(d.useEffect)(function(){Ke&&(P(ne)||Oe.length)&&ut(ne,D)},[Ke,ne,ut,Oe.length]),Object(d.useEffect)(function(){n&&ae("")},[n]),Object(d.useEffect)(function(){var e=X,t=$===x.AVAILABLE_BUTTONS;return ke&&$e&&!t&&!V&&e.current&&e.current.focus(),function(){return e.current&&e.current.blur()}},[V,ke,$e,$]);var lt=Object(d.useMemo)(function(){return $e?Be("composer.replyToPlaceholder",{name:Pe.name}):Be($===x.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[$e,Pe.name,$,Be]),dt=Ne&&!!n,mt=Se&&!ct&&!!n,ft=G||!Se||ct,bt=dt||ft||mt,gt=u||!ct||it;return m.a.createElement(m.a.Fragment,null,(Oe.length||it||ot)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},ot&&m.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},Be(qe===R.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(h.a,{onClick:function onClick(){Ye(),Ge()},className:"drift-widget-attachment-send-status--close",disabled:u},m.a.createElement(O.j,{width:10,height:10}))),(Oe.length||it)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(r.a)(Oe),Object(r.a)(it?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:Te[e]?Te[e].id:"file-upload-loader"},Te[e]&&!Te.pending&&m.a.createElement(h.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){je(function(t){return Object(M.a)([e],t)})}(e)},disabled:u},m.a.createElement(O.j,{width:6,height:6})),Te[e]&&!Te.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(O.k,{width:16,height:16})):null}(Te[e]):m.a.createElement(E.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-input.keyboard-focused {\n            ".concat(Object(i.d)(_e,Re),"\n          }\n\n          .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n            ").concat(Object(i.a)(Re,24,-2,2),"\n          }\n\n          .drift-widget-composer-actions button.keyboard-focused,\n          .drift-widget-composer-send-button.keyboard-focused {\n            ").concat(Object(i.c)(Re),"\n          }\n        ")),m.a.createElement("div",Object.assign({},nt({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":Ue,"drift-widget-composer--hidden":et}),tabIndex:-1}),Ne&&m.a.createElement("input",at()),m.a.createElement(g,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,$e&&ne.length?ne:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},lt),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":he}),ref:X,placeholder:lt,value:$e?ne:"",onChange:function onTextareaChange(e){Ke||He.length||(ae(e.target.value),Je())},"aria-label":"message composer",maxLength:4096,disabled:st,tabIndex:0,id:"drift-widget-composer-input",style:xe}),$e&&!Ue&&m.a.createElement("button",{ref:q,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":Ee}),onClick:function onEmojiButtonClick(){st||oe(!ie)},disabled:u,"aria-expanded":ie,"aria-label":"emojis",onFocus:function onFocus(){return de(!0)},onMouseOver:function onMouseOver(){return de(!0)},onMouseLeave:function onMouseLeave(){return de(!1)}},m.a.createElement(O.l,{fill:le?Fe:De}))),$e&&!Ue&&m.a.createElement(p.a,{open:ie,onAddEmoji:function onAddEmoji(e){oe(!ie),$e&&!u&&(ae(e),X.current&&X.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){q.current&&q.current.contains(e.target)||oe(!1)}}),$e&&bt&&m.a.createElement("div",{className:s()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":dt&&(mt||ft)})},dt&&m.a.createElement("button",{ref:Q,className:s()({"keyboard-focused":ye}),onClick:rt,"aria-label":"add an attachment",disabled:u,onFocus:function onFocus(){return ge(!0)},onMouseOver:function onMouseOver(){return ge(!0)},onMouseLeave:function onMouseLeave(){return ge(!1)}},m.a.createElement(O.a,{fill:be?Fe:De})),mt&&m.a.createElement(v.a,{onAddGiphy:function onAddGiphy(e){return ut(e,F)},disabled:u}),ft&&m.a.createElement("button",{className:s()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":gt,"keyboard-focused":we}),"aria-label":"send message",onClick:function onClick(){return ut(ne,D)},disabled:gt||it,ref:Y},m.a.createElement(j.a,{color:"#".concat(Re)})))))}},jKoD:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("efbE"),r=function recordConsent(e,t){return a.e.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})}},pgTp:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l});var a=n("WwEg"),r=n("efbE"),c=n("JBtm"),i=n.n(c),o=function fetchAgentAvailability(e){var t=e.agentId,n=e.additionalAgents,c=void 0===n?[]:n,o=e.meetingType,s=e.start,u=e.orgMeetingType;return r.m.get("scheduling/".concat(t,"/availability"),{params:{meetingType:o,start:s,additionalAgents:Object(a.a)(c),orgMeetingType:u},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},s=function fetchCompanyAvailability(e){var t=e.orgMeetingType,n=e.agentIds,a=void 0===n?[]:n;return r.m.get("/scheduling/availability/combined/v2",{params:{orgMeetingType:t,agentIds:a},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},u=function scheduleMeeting(e){var t=e.endUserTimeZone,n=e.availabilitySlot,a=e.agentId,c=e.meetingType,i=e.meetingSource,o=e.conversationId,s=e.bookedByUserId,u=e.orgMeetingType;return r.m.post("scheduling/".concat(a,"/schedule"),n,{params:{conversationId:o,meetingSource:i,meetingType:c,timeZone:t,bookedByUserId:s,orgMeetingType:u}})},l=function scheduleCompanyMeeting(e){var t=e.availabilitySlot,n=e.availableAgents,a=e.conversationId,c=e.meetingSource,i=e.meetingType,o=e.endUserTimeZone,s=e.bookedByUserId,u=e.orgMeetingType;return r.m.post("/scheduling/schedule/combined",{availabilitySlot:t,availableAgents:n,conversationId:a,meetingSource:c,meetingType:i,endUserTimezone:o,bookedByUserId:s,orgMeetingType:u})}},"tGI+":function(e,t,n){"use strict";var a=n("mj2O"),r=n.n(a),c=n("7SM1"),i=n("s8DI"),o=n("NJA7"),s=n("fw6E"),u=n("K7i0"),l=n("+oIK"),d=n("da4L"),m=n("+f1A"),f=n("ERkP"),b=n.n(f),g=n("uDfI"),p=n("0lfv");n("yAze");t.a=function AgentRequestedOptions(e){var t=e.message,n=t.attributes,a=t.id,v=t.conversationId,O=Object(g.b)(),j=Object(g.c)(function(e){return e.session}).endUser,h=Object(s.a)().conversationHistoryOpen,E=Object(g.c)(function(e){return e.view}).chatOpen,y=Object(f.useState)(!E),w=Object(i.a)(y,2),A=w[0],I=w[1],k=Object(d.k)(t)&&E,T=Object(g.c)(m.d),C=function doSendMessage(e){var n=e.label;return function(){var e=Object(l.a)({message:n,activeConversation:v,authorId:j.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId,instanceId:T}});O(Object(u.m)({message:e}))}};Object(f.useLayoutEffect)(function(){function _delayButtons(){return(_delayButtons=Object(c.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!E||A){e.next=4;break}return e.next=3,Object(p.q)(500);case 3:I(!0);case 4:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}!function delayButtons(){return _delayButtons.apply(this,arguments)}()},[A,E]);var N=A?"visible":"hidden";return b.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat(N)},n.buttons.map(function(e,t){return b.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(a,"-").concat(t)},b.a.createElement(o.a,{onClick:C(e),invertOnHover:!0,forceFocus:0===t&&k,disabled:h,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}},vkRn:function(e,t,n){"use strict";var a=n("nJ3u"),r=n("O94r"),c=n.n(r),i=n("noex"),o=n("yEsl"),s=n("fw6E"),u=n("z24s"),l=n("hhdZ"),d=n("58kB"),m=n("6fy/"),f=n("SsZN"),b=n("Wjfv"),g=n("K7i0"),p=n("da4L"),v=n("LVcX"),O=n("i9gz"),j=n("ERkP"),h=n.n(j),E=n("Tr4L"),y=n("uDfI"),w=n("A5mO"),A=(n("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,n=void 0===t?{}:t,a=Object(s.a)().onToggleConversationHistory,r=Object(j.useRef)(null),A=Object(E.a)().t,I=Object(u.a)(r),k=Object(y.b)(),T=Object(m.a)(),C=Object(j.useMemo)(function(){return Object(v.a)(null,["conversation","id"],n)},[n]),N=Object(l.a)(C),L=Object(j.useMemo)(function(){return Object(v.a)(null,["authorId"],N)},[N]),S=Object(d.a)(L).recipient,B=Object(p.h)(N);if(Object(O.a)(N))return null;var U=N.createdAt,M=N.attributes,z=void 0===M?{}:M,R=Object(w.a)(U).isAfter(w.a.today())?Object(w.a)(U).unixFmt(A("dt.format.time.short")):Object(w.a)(U).unixFmt(A("dt.format.date.short")),_=B?T.name:S.name,x="Conversation with ".concat(S.name).concat(z.preview?" - ".concat(B?"You":"",': "').concat(z.preview,'"'):"",", ").concat(R," - Click to open");return h.a.createElement("li",{className:c()("drift-widget-conversation-list-item",{"keyboard-focused":I})},h.a.createElement("button",{onClick:function toggleConversation(e){return function(){e&&(a(!1),k(Object(b.a)()),k(Object(g.n)({conversationId:e})),Object(f.f)(e))}}(n.conversation.id),"aria-label":x,ref:r},B?h.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:T.avatar}):h.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:S.avatarUrl,id:L}),h.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},h.a.createElement("h2",null,_),h.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},R),h.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},z.preview))))}),I=n("lE29"),k=n("DboL"),T=n("9xv8");n("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(y.c)(function(e){return e.conversations.conversations}),n=Object(j.useMemo)(function(){return Object(T.c)(Object(k.a)(t),"updatedAt")},[t]),r=Object(j.useMemo)(function(){return h.a.createElement("ul",{className:"drift-widget-conversation-history-list"},n.map(function(e){return h.a.createElement(A,{key:e.conversation.id,conversation:e})}))},[n]),i=Object(I.a)().activeColor;return h.a.createElement("div",{className:c()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},h.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(a.c)(i),"\n          }\n        ")),e&&r)}},yAze:function(e,t,n){}}]);