Belen.Home.HomeView=function(){var a,t,n,l,o,r,i,d,c,s,f,h=(f=4,{init:function(){var e;t=a.gallery.initNumPages,n=a.gallery.initCurrentPage,l=[n],(i=$("#home-gallery")).find(".carousel-viewport"),d=i.find(".carousel-list"),c=$("#home-gllry-prev"),s=$("#home-gllry-next"),o=d.width(),i=d.children("li:first-child").width(),r=(o-i*f)/(f-1),t<=1&&s.add(c).addClass("is-hidden"),1<t&&(g(),w()),2<t&&(v(),d.offset({left:d.offset().left-(o+r)})),$("#home-hpgallery-info-lnk").magnificPopup({items:{src:"#home-hpgallery-info"},type:"inline",preloader:!1}),!0===a.adblockSurvey&&(e="hpsrvy","true"!=Belen.Common.Userprefs.readCookieValue(e)&&(Belen.Common.CommonView.buildSurveyModal("https://www.surveymonkey.de/r/FLT98GT"),Belen.Common.Userprefs.writeCookieValue(e,"true")))}});function u(e,i){return-1==$.inArray(e,l)&&($.ajax({url:a.gallery.ajaxUrl,data:{locId:a.gallery.locationId,page:e},success:function(e){t=e.numPages,"function"==typeof i&&i(e)}}),l.push(e)),0}function m(e,i){i=$('<li class="itemtile-condensed" data-page="'+i+'"><div class="itemtile-header"><a href="'+e.linkUrl+'"><img alt="" src="'+e.imageUrl+'"></a></div><div class="itemtile-body"><h3 class="itemtile-title"><a href="'+e.linkUrl+'">'+e.title+'</a></h3><div class="itemtile-location">'+e.location+"</div></div></li>");return null!=e.priceString&&0<e.priceString.length&&i.find(".itemtile-body").append('<div class="itemtile-ribbon"><span class="itemtile-price">'+e.priceString+"</span></div>"),i}function p(){var e=d.children().length/f*o+(l.length-1)*r;d.width(e)}function g(){var e=n+1;u(e=t<=e?0:e,function(i){$.each(i.entries,function(){var e=m(this,i.currentPage);d.append(e)}),p()})}function v(e){var i=n-1;u(i=i<0?t-1:i,function(i){$.each(i.entries,function(){var e=m(this,i.currentPage);d.prepend(e)}),p(),null!=e&&"function"==typeof e&&e()})}function w(){s.click(function(e){var i;i=d.children().last().data("page"),n==i&&(i=d.children().slice(0,f),d.append(i),d.offset({left:d.offset().left+(o+r)})),d.animate({left:"-="+(o+r)},{start:function(){k()},complete:function(){w();var e=(n=n<t-1?n+1:0)+1;t<=e&&(e=0),-1==$.inArray(e,l)&&g()}})}),c.click(function(e){var i;i=d.children().first().data("page"),n==i&&(i=d.children().slice(d.children().length-f),d.prepend(i),d.offset({left:d.offset().left-(o+r)})),d.animate({left:"+="+(o+r)},{start:function(){k()},complete:function(){w();var e=(n=0==n?t-1:n-1)-1;e<0&&(e=t-1),-1==$.inArray(e,l)&&v(function(){d.offset({left:d.offset().left-(o+r)})})}})})}function k(){c.add(s).off("click")}return{init:function(e){var i,t,n,l;a=e,(l=$("#home-ul-ctgrs")).find("li.p-home-li-subctgrs-more a").click(function(e){e.preventDefault();var i=$(this).parents("ul").eq(0),e=$(this).parent("li:eq(0)");l.find(".is-opened").makeHidden(),l.find("li.p-home-li-subctgrs-more").revokeHidden(),i.children(".is-hidden").addClass("is-opened").revokeHidden(),e.makeHidden()}),h.init(),$("body").on("click.itemtile",".itemtile-body, .itemtile-header, .itemtile-ribbon",function(e){var i;0==$(e.target).closest("a",this).length&&(void 0!==(e=(i=$(this).parent().find(".itemtile-title a")).data("gaevent"))&&""!==e&&Belen.TrackingDispatcher.track(e),window.location.href=i.attr("href"))}),n=1,$("#home-ads").find(".itemtile").each(function(e){e%20==0&&($(this).addClass("j-feed-page").data("page",n),n++)}),$(".j-feed-item").each(function(e){e%20==0&&($(this).addClass("j-feed-page").data("page",n),n++)}),$(window).on("scroll",function(){$(".j-feed-page").not(".is-hidden").each(function(){var e=$(this),i=$(window).scrollTop(),e=e.offset().top;Math.abs(e-i)<50&&$(this).removeClass("j-feed-page")});var e=$(".j-feed-back2top");window.scrollY>2*window.innerHeight?e.revokeHidden():e.makeHidden(),window.innerHeight+window.scrollY>=document.body.scrollHeight&&0===$(".j-feed-page.is-hidden").length&&$(window).off("scroll")}),i=100,t=$(".j-feed-item").length,$(".j-feed-item:lt(100)").revokeHidden(),$(".j-feed-show-more").click(function(){i+=100,$(".j-feed-item.is-hidden:lt(100)").revokeHidden(),t<=i&&$(".j-feed-show-more").makeHidden()}),$(".j-feed-back2top").click(function(){$(window).scrollTop(0),$(this).makeHidden()}),Belen.Tracking.trackCriteoItemPage({event:"viewHome",user_segment:"1"})}}}();
