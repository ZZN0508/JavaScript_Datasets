var __tea_iife_export__=function(e){"use strict";var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}function l(e,a){var r,t=window.screen.width,n=window.screen.height,i=window.navigator.appVersion,o=window.navigator.userAgent,s=window.navigator.language,u=(g=window.location.href,g=(g=(h=g,(g=document.createElement("a")).href=h,g.search)).slice(1),r={},g.split("&").forEach(function(e){var t,n,i=e.split("=");i.length&&(t=i[0],n=i[1]);try{r[t]=decodeURIComponent(void 0===n?"":n)}catch(e){r[t]=n}}),r),c="",l="",d="",h=""+parseFloat(i);-1!==(g=o.indexOf("Opera"))&&(d="Opera",h=o.substring(g+6),-1!==(g=o.indexOf("Version"))&&(h=o.substring(g+8))),-1!==(g=o.indexOf("Edge"))?(d="Microsoft Edge",h=o.substring(g+5)):-1!==(g=o.indexOf("MSIE"))?(d="Microsoft Internet Explorer",h=o.substring(g+5)):-1!==o.indexOf("Chrome")?-1!==(g=o.indexOf("MicroMessenger"))?(d="weixin",h=o.substring(g+15,g+20)):-1!==(g=o.indexOf("MQQBrowser"))?(d="qqbrowser",h=o.substring(g+11,g+15)):-1!==(g=o.indexOf("Chrome"))&&(d="Chrome",h=o.substring(g+7)):-1!==o.indexOf("Safari")?-1!==(g=o.indexOf("QQ"))?(d="qqbrowser",h=o.substring(g+10,g+16)):-1!==(g=o.indexOf("Safari"))&&(d="Safari",h=o.substring(g+7),-1!==(g=o.indexOf("Version"))&&(h=o.substring(g+8))):-1!==(g=o.indexOf("Firefox"))?(d="Firefox",h=o.substring(g+8)):-1!==(g=o.indexOf("MicroMessenger"))?(d="weixin",h=o.substring(g+15,g+20)):-1!==(g=o.indexOf("QQ"))&&(d="qqbrowser",h=o.substring(g+3,g+8)),-1!==(g=(h=-1!==(g=(h=-1!==(g=h.indexOf(";"))?h.substring(0,g):h).indexOf(" "))?h.substring(0,g):h).indexOf(")"))&&(h=h.substring(0,g));for(var f,p,g=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(i)?"wap":"web",m=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],_=0;_<m.length;_++){var v=m[_];if(v.r.test(o)){c=v.s;break}}function y(e,t){t=e.exec(t);return t&&t[1]?t[1]:""}switch(/Windows/.test(c)&&(l=y(/Windows (.*)/,c),c="windows"),c){case"Mac OS X":l=y(/Mac OS X (10[\.\_\d]+)/,o),c="mac";break;case"Android":l=p=!(p=y(/Android ([\.\_\d]+)/,f=o))?y(/Android\/([\.\_\d]+)/,f):p,c="android";break;case"iOS":l=(l=/OS (\d+)_(\d+)_?(\d+)?/.exec(i))?l[1]+"."+l[2]+"."+(0|l[3]):"",c="ios"}return e=e?function(){var e=a?"_tea_utm_cache_"+a:"_tea_utm_cache",t={},n={utm_source:u.utm_source,utm_medium:u.utm_medium,utm_campaign:u.utm_campaign,utm_term:u.utm_term,utm_content:u.utm_content};try{var i,r,o=window.sessionStorage,s=!1;for(i in n)n[i]&&(t[i]=n[i],s=!0);s?o.setItem(e,JSON.stringify(t)):(r=o.getItem(e))&&(t=JSON.parse(r))}catch(e){return n}return t}():{},{browser:d,browser_version:h,platform:g,os_name:c,os_version:l,userAgent:o,screen_width:t,screen_height:n,device_model:function(e){var t,n,i="";try{"android"===e?navigator.userAgent.split(";").forEach(function(e){-1<e.indexOf("Build/")&&(i=e.slice(0,e.indexOf("Build/")))}):"ios"!==e&&"mac"!==e||(n=(t=navigator.userAgent.replace("Mozilla/5.0 (","")).indexOf(";"),i=t.slice(0,n))}catch(e){}return i.trim()}(c),language:s,referrer:"",referrer_host:"",utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_term:e.utm_term,utm_content:e.utm_content,isSupportBeacon:("ios"!==c||"safari"!==d)&&(!(!window.navigator||!window.navigator.sendBeacon)||void 0)}}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var o=t(function(e,t){var n=function(){function a(){for(var e=0,t={};e<arguments.length;e++){var n,i=arguments[e];for(n in i)t[n]=i[n]}return t}function c(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(u){function s(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=a({path:"/"},s.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=u.write?u.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r,o="";for(r in n)n[r]&&(o+="; "+r,!0!==n[r]&&(o+="="+n[r].split(";")[0]));return document.cookie=e+"="+t+o}}function t(e,t){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],r=0;r<i.length;r++){var o=i[r].split("="),s=o.slice(1).join("=");t||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var a=c(o[0]),s=(u.read||u)(s,a)||c(s);if(t)try{s=JSON.parse(s)}catch(e){}if(n[a]=s,e===a)break}catch(e){}}return e?n[e]:n}}return s.set=n,s.get=function(e){return t(e,!1)},s.getJSON=function(e){return t(e,!0)},s.remove=function(e,t){n(e,"",a(t,{expires:-1}))},s.defaults={},s.withConverter=e,s}(function(){})};e.exports=n()}),n=(i.prototype.setItem=function(e,t){this.cache[e]=t},i.prototype.getItem=function(e){return this.cache[e]},i.prototype.removeItem=function(e){this.cache[e]=void 0},i);function i(){this.cache={}}var c={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||void 0}catch(e){}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e){try{var t=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]+)")),n=t?t[1]:"";return decodeURIComponent(n)}catch(e){return""}},setCookie:function(e,t,n){try{var i=+new Date+n;o.set(e,t,{expires:new Date(i),path:"/",domain:document.domain.split(".").slice(-2).join(".")})}catch(e){}},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},d=(h.prototype.getItem=function(e){return this._storage.getItem(e)},h.prototype.setItem=function(e,t){this._storage.setItem(e,t)},h.prototype.getCookie=function(e){return this._storage.getCookie(e)},h.prototype.setCookie=function(e,t,n){this._storage.setCookie(e,t,n)},h.prototype.removeItem=function(e){this._storage.removeItem(e)},h);function h(e){this._storage=!e&&c.isSupportLS?c:new n}function f(e,t){return t?"__tea_cache_tokens_"+e:"__tea_cache_events_"+e}var p=function(e){return function(e,t){if("string"==typeof e&&"number"==typeof t){var n=[];t=t<=25?t:t%25;for(var i=String.fromCharCode(t+97),r=e.split(i),o=0;o<r.length;o++){var s=64^+(s=parseInt(r[o],t)),s=String.fromCharCode(s);n.push(s)}return n.join("")}}(e,25)},g={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},m="/v1/user/webid",_="/v1/list",v={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001},y=function(){if("undefined"!=typeof window)return window.TeaAnalyticsObject},z={cn:"1fz22z22z1nz21z4mz4bz4bz1bz1nz1nz20z1mz1dz1gz1jz1cz4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1bz1nz1nz20z1mz1dz1gz1jz1cz4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz24z18z18z1jz1gz49z1bz1nz1nz20z1mz1dz1gz1jz1cz4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},b={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},w="__shushuo_libra_style__",S=(["1fz22z22z1nz21z4mz4bz4bz1bz18z22z18z4az19z27z22z1cz1bz18z1lz1az1cz4az1az1mz1k","1fz22z22z1nz21z4mz4bz4bz25z25z25z4az19z27z22z1cz20z18z1lz1ez1cz20z21z4az1az1mz1k","1fz22z22z1nz21z4mz4bz4bz1bz18z22z18z20z18z1lz1ez1cz20z21z4az1az1mz1kz4az1az1l","1fz22z22z1nz21z4mz4bz4bz19z27z22z1cz20z18z1lz1ez1cz20z21z4az19z27z22z1cz1bz18z1lz1az1cz4az1az1mz1k"].map(function(e){return p(e)}),"1fz22z22z1nz21z4mz4bz4bz21z4fz4az1nz21z22z18z22z1nz4az1az1mz1kz4bz1nz1ez1az4bz22z1cz1az1fz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z1cz1bz1gz22z1mz20z49z18z19z4az1hz21");function I(e,t,n,i,r,o,s){var a=new XMLHttpRequest;o&&(a.timeout=o),a.open(s||"POST",""+e,!0),a.setRequestHeader("Content-Type","application/json; charset=utf-8"),r&&a.setRequestHeader("X-MCS-AppKey",""+r),a.onload=function(){if(n){var t=null;if(a.responseText){try{t=JSON.parse(a.responseText)}catch(e){t={}}n(t)}}},o&&(a.ontimeout=function(){i()}),a.onerror=function(){a.abort(),i&&i(t,v.XHR_ON)},a.send(JSON.stringify(t))}function k(n,i,r,o){try{var e=n.match(/\/v\d\//),t=e?e[0]:-1!==n.indexOf("/v1/")?"/v1/":"/v2/",s=n.split(t)[0];if(!s)return void o(n,i,v.NO_URL);i.forEach(function(e){var e=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&(n+="&"+t+"="+encodeURIComponent(JSON.stringify(e[t])));return"&"===n[0]?n.slice(1):n}(e),t=new Image(1,1);t.onload=function(){t=null,r&&r()},t.onerror=function(){t=null,o&&o(n,i,v.IMG_ON)},t.src=s+"/v1/gif?"+e})}catch(r){o&&o(n,i,v.IMG_CATCH,r.message)}}function E(e,t,n,i,r,o,s,a){var u=window.navigator.userAgent,c=-1!==window.navigator.appName.indexOf("Microsoft Internet Explorer")&&(-1!==u.indexOf("MSIE 8.0")||-1!==u.indexOf("MSIE 9.0"));if(!(u=!!n)&&c)k(e,t,i,r);else if(!u&&s)return l(!1).isSupportBeacon?(a&&a(),void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():r(e,t,v.BEACON_FALSE))):void k(e,t,i,r);o&&delete t.app_key,I(e,t,i,r,n)}function C(e){return e?(e^16*Math.random()>>e/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,C)}function x(){return C().replace(/-/g,"").slice(0,19)}function O(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)}function N(e,n,i){void 0===n&&(n=function(e){return e}),void 0===i&&(i=20);var r,o=[],s=0;return(e=void 0===e?[]:e).forEach(function(e){var t=n(e);void 0===r?r=t:(t!==r||o[s].length>=i)&&(s+=1,r=t),o[s]=o[s]||[],o[s].push(e)}),o}var T=(W.prototype._getToken=function(){this.tokensKey=f(this.appInfo,!0),this.cookieKey="__tea_cookie_tokens_"+this.appInfo;var e,t,n,i,r=this.storage.getItem(this.tokensKey);this.enableCookie?(i=this.storage.getCookie(this.cookieKey))?(i=decodeURIComponent(i),e=(i=JSON.parse(i)).user_unique_id,t=i.web_id,n=i.timestamp,i=i.ssid,this._setToken(t,e,i,n)):r?(this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(r)),this.expiresTime),this._checkLocal(r)):this._requestWebId():r?this._checkLocal(r):this._requestWebId()},W.prototype._checkLocal=function(e){var t,n;e.web_id||(t=this.storage.getCookie("tt_webid"),r=this.storage.getCookie("__tea_sdk__ssid"),n=this.storage.getCookie("__tea_sdk__user_unique_id"),t&&r&&n&&(i={web_id:t,ssid:r,user_unique_id:n,timestamp:Date.now()},this.storage.setItem(this.tokensKey,i)));var e=this.storage.getItem(this.tokensKey),i=(n=e.user_unique_id,t=e.web_id,e.timestamp),r=e.ssid;t&&n?this._setToken(t,n,r,i):this._requestWebId()},W.prototype._setToken=function(e,t,n,i){if(this.uuid=t,this.web_id=e,this.ssid=n,this.checkExp){i=Date.now()-parseFloat(i);if(7344e6<i)return void this._requestWebId();if(432e7<i)return void this._updateWebId(e)}this._complete(e,t,n)},W.prototype._complete=function(e,t,n){this.cfg.envInfo.user.ssid=n,this.cfg.envInfo.user.web_id=e,this.cfg.envInfo.user.user_unique_id=t,this.tokenReady=!0},W.prototype._requestWebId=function(){this.isNoWebid?this._setwebId({web_id:x(),ssid:""}):this._fetchWebId(this.fetchUrl,!1)},W.prototype._updateWebId=function(e){e=this.domain+m+"/"+e+"/update";this._fetchWebId(e,!0)},W.prototype._fetchWebId=function(e,n){var i=this;this.isGetWebId=!0,E(e,{app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:this.browser.userAgent,referer:this.browser.referrer,user_unique_id:""},this.config.app_key,function(e){var t;e&&0===e.e?(n?(t={web_id:i.web_id,ssid:i.ssid,user_unique_id:i.uuid,timestamp:Date.now()},i.enableCookie&&i.storage.setCookie(i.cookieKey,encodeURIComponent(JSON.stringify(t)),i.expiresTime),i.storage.setItem(i.tokensKey,t),i._complete(i.web_id,i.uuid,i.ssid)):(i.isGetWebId=!1,i._setwebId(e)),i.isGetSsid?i._requestSsId():i.callback&&i.callback()):n?i._fetchWebId(i.fetchUrl,!1):i.isGetWebId=!1},function(){i.isGetWebId=!1},!0)},W.prototype._setwebId=function(e){var t=this.cfg.envInfo.user.web_id||e.web_id,n={web_id:t,ssid:e.ssid,user_unique_id:this._uuid||t,timestamp:Date.now()};this.enableCookie&&this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(n)),this.expiresTime),this.storage.setItem(this.tokensKey,n),this.cfg.envInfo.user.ssid=e.ssid,this.cfg.envInfo.user.web_id=t,this.cfg.envInfo.user.user_unique_id=this._uuid||t,this.uuid=this._uuid||t,this.web_id=t,this.ssid=e.ssid,this.tokenReady=!0},W.prototype._getSsid=function(e){e&&-1===["0","Null","None","","undefined"].indexOf(e)&&(this.uuid===e&&this.web_id&&this.ssid?this.tokenReady=!0:(this._uuid=e,this.uuid=e,this.cfg.envInfo.user.user_unique_id=e,this.isGetSsid=!0,this.isNoSsid||this.isGetWebId?this.callback&&this.callback():(this.tokenReady=!1,this.isGetSsid=!1,this._requestSsId())))},W.prototype._requestSsId=function(){var t=this,e=this.domain+"/v1/user/ssid";E(e,{app_key:this.config.app_key,app_id:this.config.app_id,web_id:this.web_id,user_unique_id:this.uuid},this.config.app_key,function(e){e&&0===e.e&&(t.cfg.envInfo.user.ssid=e.ssid,e={web_id:t.web_id,ssid:e.ssid,user_unique_id:t.uuid,timestamp:Date.now()},t.enableCookie&&t.storage.setCookie(t.cookieKey,encodeURIComponent(JSON.stringify(e)),t.expiresTime),t.storage.setItem(t.tokensKey,e)),t.tokenReady=!0,t.callback&&t.callback()},function(){t.tokenReady=!0,t.callback&&t.callback()},!0)},W.prototype.isTokenReady=function(){return this.tokenReady},W),D=(j.prototype.addListener=function(){var e=this;window.addEventListener("unload",function(){e.report(!0)},!1),O(this.report(!0)),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e.report(!0)},!1)},j.prototype.setReady=function(){this.isReady=!0,this.closeStorage||this.checkStorageEvent(),this.report()},j.prototype.event=function(e,t){var n=this;void 0===e&&(e=[]),void 0===t&&(t=!1);var i=this.storage.getItem(this.evtDataKey)||[],e=t?u(e,i):u(i,e);this.storage.setItem(this.evtDataKey,e),this.reportTimer&&clearTimeout(this.reportTimer),e.length>=this.maxReport?this.report():this.reportTimer=setTimeout(function(){n.report(),n.reportTimer=null},30)},j.prototype.report=function(e){var t;void 0===e&&(e=!1),!this.collect.destroyInstance&&this._token.isTokenReady()&&this.isReady&&(t=this.storage.getItem(this.evtDataKey)||[],t=this._mergeEvents(t),this.storage.removeItem(this.evtDataKey),this._dealData(t,e))},j.prototype._mergeEvents=function(e){var i=this;if(!e.length)return e;var t=this.cfg.get();return t.header.custom=JSON.stringify(t.header.custom),N(e,function(e){return!i.closeStorage&&!!e.params.__disable_storage__},this.maxReport).map(function(e){return s({events:e.map(function(t){var n=s({},i.cfg.get("evtParams"),t.params);delete n.__disable_storage__;try{if(i.plugin&&i.plugin.ab&&i.plugin.ab.versions){var e=i.plugin.ab.versions.join(",");return s({},t,{params:JSON.stringify(n),ab_sdk_version:e})}return s({},t,{params:JSON.stringify(n)})}catch(e){return s({},t,{params:JSON.stringify(n)})}}),user:t.user,header:t.header},i.closeStorage?{}:{__disable_storage__:e[0].params.__disable_storage__},{verbose:i.debugMode?1:void 0,local_time:parseInt(""+(new Date).getTime()/1e3)})})},j.prototype._dealData=function(e,i){var r=this;if(!e.length)return e;var t=[],t=N(e,function(e){return!!e.__disable_storage__},this.maxReport);!this.closeStorage&&this.plugin.maxStorage&&this.plugin.maxStorage(t,this.maxStorage,this.evtDataKey,this.storage);var o={};t.forEach(function(e){var t,n=x();r.closeStorage||e[0].__disable_storage__||((t=JSON.parse(JSON.stringify(e)))&&t[0]&&(t[0].header.__storage_index__=Date.now()),o[n]=t,r.EventStorage.setItem(r.evtDataKey,o)),r._send(n,e,i)})},j.prototype._send=function(t,e,n){var i=this;this.isSending=!0;function r(){i.isSending=!1}if(!this.closeStorage)try{e&&e[0]&&e[0].header.__storage_index__&&delete(e=JSON.parse(JSON.stringify(e)))[0].header.__storage_index__}catch(t){}this.plugin&&this.plugin.et_test&&this.plugin.et_test.send(e),E(this.reportUrl,e,this.config.app_key,function(){var e;r(),i.plugin&&!i.closeStorage&&(e=i.EventStorage.getItem(i.evtDataKey)||{},Object.keys(e).length?(delete e[t],i.EventStorage.setItem(i.evtDataKey,e)):i.EventStorage.removeItem(i.evtDataKey))},function(e,t){r(),i.cfg.get("reportErrorCallback")(e,t),i.plugin&&i.plugin.monitor&&i.plugin.monitor.sdkError(i.config.app_key,i.reportUrl,e,t)},!1,n,r),this.plugin&&this.plugin.monitor&&this.plugin.monitor.sdkOnload(this.config.app_key,this.reportUrl,e)},j.prototype.checkStorageEvent=function(){var i=this;try{var r=this.EventStorage.getItem(this.evtDataKey)||{},o=Object.keys(r);0<o.length&&setTimeout(function e(){for(var t=[],n=0;n<i.maxReport;n++)0<o.length&&t.push(o.shift());0<t.length&&t.forEach(function(e){i._send(e,r[e],!1)}),setTimeout(e,5)},5)}catch(i){}},j),A=void 0,q=(new Date).getTimezoneOffset(),L=parseInt(""+-q/60,10),R=60*q,P=(V.prototype.set=function(e,t){var n=this;if("disable_auto_pv"!==e)if("evtParams"===e||"_staging_flag"===e){var i="evtParams"===e?t:{_staging_flag:Number(t)},r=s({},i);Object.keys(r).forEach(function(e){n.evtParams[e]=r[e]})}else if("reportErrorCallback"===e&&"function"==typeof t)this.reportErrorCallback=t;else{var o="";if(-1<e.indexOf(".")&&(o=(i=e.split("."))[0],e=i[1]),"user_unique_id"===e){if(!t)return;if(-1!==["0","Null","None","","undefined"].indexOf(t))return}if("web_id"===(e="os_version"===e?""+t:e)){if(!t)return;(!this.envInfo.user.user_unique_id||this.envInfo.user.user_unique_id&&this.envInfo.user.user_unique_id===this.envInfo.user.web_id)&&(this.envInfo.user.user_unique_id=t)}o?"user"===o||"header"===o?this.envInfo[o][e]=t:this.envInfo.header.custom[e]=t:this.envInfo.user.hasOwnProperty(e)?-1<["user_type","ip_addr_id"].indexOf(e)?this.envInfo.user[e]=Number(t):-1<["user_id","web_id","user_unique_id","ssid"].indexOf(e)?this.envInfo.user[e]=String(t):-1<["user_is_auth","user_is_login"].indexOf(e)?this.envInfo.user[e]=Boolean(t):"device_id"===e&&(this.initConfig&&this.initConfig.channel&&"cn"===this.initConfig.channel?this.envInfo.user[e]=t:this.envInfo.user[e]=Number(t)):this.envInfo.header.hasOwnProperty(e)?this.envInfo.header[e]=t:this.envInfo.header.custom[e]=t}},V.prototype.get=function(e){return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this.reportErrorCallback:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))},V),M=((Me=B.prototype).info=function(e){this.isLog&&console.log("["+this.name+"] "+e)},Me.warn=function(e){this.isLog&&console.warn("["+this.name+"] "+e)},Me.error=function(e){this.isLog&&console.error("["+this.name+"] "+e)},Me.throw=function(e){throw this.error(this.name),new Error(e)},B);function B(e,t){this.isLog=t,this.name=e||""}function V(e,t){e=l(!0,e);this.initConfig=t,this.envInfo={user:{user_unique_id:A,user_type:A,user_id:A,user_is_auth:A,user_is_login:A,device_id:A,web_id:A,ip_addr_id:A,ssid:A},header:{app_id:A,app_name:A,app_install_id:A,install_id:A,app_package:A,app_channel:A,app_version:A,os_name:e.os_name,os_version:e.os_version,device_model:e.device_model,ab_client:A,ab_version:A,ab_sdk_version:A,traffic_type:A,client_ip:A,device_brand:A,os_api:A,access:A,language:e.language,region:A,app_language:A,app_region:A,creative_id:A,ad_id:A,campaign_id:A,log_type:A,rnd:A,platform:e.platform,sdk_version:"4.1.24",province:A,city:A,timezone:L,tz_offset:R,tz_name:A,sim_region:A,carrier:A,resolution:e.screen_width+"x"+e.screen_height,browser:e.browser,browser_version:e.browser_version,referrer:e.referrer,referrer_host:e.referrer_host,width:e.screen_width,height:e.screen_height,screen_width:e.screen_width,screen_height:e.screen_height,utm_term:e.utm_term,utm_content:e.utm_content,utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,custom:{}}},this.evtParams={},this.reportErrorCallback=function(){}}function j(e,t,n,i,r){this.collect=e,this.cfg=n,this.config=t,this._token=i,this.appInfo=t.app_key||t.app_id,this.debugMode=!!t.log,this.evtDataKey=f(this.appInfo,!1);i=t.channel_domain||p(g[t.channel]);this.reportUrl=t.report_url||i+_,this.storage=new d(!0),this.EventStorage=new d(!1),this.maxStorage=t.max_storage_num||-1,this.maxReport=t.max_report||20,this.closeStorage=!0,this.plugin=r,this.plugin&&(r=t.enable_storage,t=t.disable_storage,!r&&!1!==t||(this.closeStorage=!1)),this.addListener()}function W(e,t){this.browser=l(!0,e.app_id),this.config=e,this.cfg=t,this.storage=new d(!1),this.appInfo=e.app_key||e.app_id,this.isNoWebid=e.disable_webid,this.isNoSsid=e.disable_webid||e.disable_ssid,this.domain=e.channel_domain||p(g[e.channel]),this.tokenReady=!1,this.checkExp=e.checkExp||!1,this.enableCookie=e.cross_subdomain||!1,this.expiresTime=this.enableCookie?94608e6:0,this.fetchUrl=this.domain+m}function J(e,t,n){return{title:t||document.title||location.pathname,url:n||location.href,url_path:e||location.pathname}}function H(){return Date.now()}function U(){var e=y();return window[e]?window[e].l:H()}function F(){var t=!1;return["hidden","msHidden","webkitHidden"].forEach(function(e){void 0!==document[e]&&(t=!0)}),t}var K=(Z.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this._enablePageAlive()},Z.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},Z.prototype._enablePageAlive=function(){var e=this;return this.timerHandler=this._setUpTimer(),document.addEventListener("visibilitychange",this._visibilitychange),O(this._beforeunload),function(){e._beforeunload(),document.removeEventListener("visibilitychange",e._visibilitychange),window.removeEventListener("beforeunload",e._beforeunload),window.removeEventListener("pagehide",e._beforeunload)}},Z),$=(X.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this._enablePageClose()},X.prototype.disable=function(){this.disableCallback()},X.prototype._resetData=function(){this.activeStartTime=void 0===this.activeStartTime?U():Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0},X.prototype._sendEventPageClose=function(){var e=H()-this.pageStartTime;this.totalTime>=this.maxDuration||(this.event("predefine_page_close",s({},J(this.url_path,this.title,this.url),{active_times:this.activeTimes,duration:this.totalTime/1e3,total_duration:e/1e3,is_support_visibility_change:this.options.sup_vis_change?1:0})),this.pageStartTime=Date.now(),this._resetData())},X.prototype._enablePageClose=function(){var e=this;return document.addEventListener("visibilitychange",this._visibilitychange),O(this._beforeunload),function(){e._beforeunload(),document.removeEventListener("visibilitychange",e._visibilitychange),window.removeEventListener("beforeunload",e._beforeunload),window.removeEventListener("pagehide",e._beforeunload)}},X),G=(Q.prototype._enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},Q.prototype._disable=function(){this.pageAlive.disable(),this.pageClose.disable()},Q.prototype.reset=function(e,t,n){this._disable(),this._enable(e,t,n)},Q);function Q(e,t){this.pageAlive=new K(e,t),this.pageClose=new $(e,t),this._enable()}function X(e,t){var n=this;this._visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=H():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=H())},this._beforeunload=function(){n.totalTime+=(n.activeEndTime||H())-n.activeStartTime,n._sendEventPageClose()},this.event=e,this.config=t,this.isSupVisChange=F(),this.options={sup_vis_change:this.isSupVisChange},this.maxDuration=t.maxDuration||864e5,this.disableCallback=function(){},this.pageStartTime=U(),this._resetData()}function Z(e,t){var n=this;this._sendEvent=function(e){e=(e=void 0===e?!1:e)?n.options.aliveDTime:H()-n.sessionStartTime;H()-n.pageStartTime>n.options.maxDuration||(n.event("predefine_page_alive",s({},J(n.url_path,n.title,n.url),{duration:e/1e3,is_support_visibility_change:n.options.sup_vis_change?1:0})),n.sessionStartTime=H())},this._setUpTimer=function(){return n.timerHandler&&clearInterval(n.timerHandler),setInterval(function(){H()-n.sessionStartTime>n.options.aliveDTime&&n._sendEvent(!0)},1e3)},this._visibilitychange=function(){"hidden"===document.visibilityState?n.timerHandler&&(clearInterval(n.timerHandler),n._sendEvent()):"visible"===document.visibilityState&&(n.sessionStartTime=H(),n.timerHandler=n._setUpTimer())},this._beforeunload=function(){document.hidden||n._sendEvent()},this._wtest=function(){document.getElementById("wtest").innerHTML="visibilitychange"},this._dtest=function(){document.getElementById("dtest").innerHTML="dvisibilitychange"},this.event=e,this.config=t,this.isSupVisChange=F(),this.options={maxDuration:432e5,aliveDTime:6e4,sup_vis_change:F()},this.pageStartTime=U(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,this.disableCallback=function(){}}var Y,ee=(te.prototype._endCurrentSession=function(){this._eventSenderFunc("_be_active",{start_time:this._startTime,end_time:this._lastTime,url:window.location.href,referrer:window.document.referrer}),this._isSessionhasEvent=!1,this._startTime=0},te.prototype.process=function(){this._isSessionhasEvent||(this._isSessionhasEvent=!0,this._startTime=+new Date);var e=this._lastTime||+new Date;this._lastTime=+new Date,this._lastTime-e>this.sessionInterval&&(this._clearInterval(),this._endCurrentSession(),this._setInterval())},te);function te(e){var t=this;this._setInterval=function(){t._clearIntervalFunc=function(n,i){void 0===n&&(n=function(){}),void 0===i&&(i=1e3);var r=Date.now()+i,o=window.setTimeout(function e(){var t=Date.now()-r;n(),r+=i,o=window.setTimeout(e,Math.max(0,i-t))},i);return function(){window.clearTimeout(o)}}(function(){t._isSessionhasEvent&&t._endCurrentSession()},t.sessionInterval)},this._clearInterval=function(){t._clearIntervalFunc&&t._clearIntervalFunc()},this.sessionInterval=6e4,this._eventSenderFunc=e,this._startTime=0,this._lastTime=0,this._setInterval()}(Pe=Y=Y||{}).Normal="synchronize",Pe.Once="setOnce";var ne=(oe.prototype.getDomain=function(){return p(z[this.channel].replace(/\/+$/,""))},oe.prototype.getUrl=function(e){return this.domain+"/service/api/v3/userprofile/"+this.appId+"/"+e},oe.prototype.getData=function(e){void 0===e&&(e={});var t=this.instance._config.get(),n=t.user,i=t.header,t=(i.headers,i.custom),i=r(i,["headers","custom"]);return{user:{web_id:n.web_id,ssid:n.ssid,user_unique_id:n.user_unique_id},header:s({},i||{}),profile:s({},t||{},e||{})}},oe.prototype.start=function(){var e=this;0<this.autoId||(this.upPre(Y.Normal),this.autoId=window.setInterval(function(){e.upPre(Y.Normal)},this.duration))},oe.prototype.stop=function(){0<this.autoId&&window.clearInterval(this.autoId)},oe.prototype.setProfile=function(e){var t=Date.now();(!this.lastId||t-this.lastId>=this.duration)&&(this.instance.config(e),this.upPre(Y.Normal,e),this.lastId=t)},oe.prototype.setOnceProfile=function(e){var t=Date.now();(!this.lastOnceId||t-this.lastOnceId>=this.duration)&&(this.instance.config(e),this.upPre(Y.Once,e),this.lastOnceId=t)},oe.prototype.upPre=function(e,t){t=this.getData(t=void 0===t?{}:t);this.data&&JSON.stringify(this.data)===JSON.stringify(t)||(this.up(this.urls[e],t),this.data=t)},oe.prototype.up=function(e,t){E(e,t)},oe),ie=(re.prototype.sdkOnload=function(e,t,n){if(!this.sdkReady){this.sdkReady=!0;try{if(0===n.length)return;var i=n[0],r=i.header,o=i.user,s=r.app_id,a=r.app_name,u=r.sdk_version,c=o.web_id,l={events:[{event:"onload",params:JSON.stringify({app_key:e,app_id:s,app_name:a||"",sdk_version:u}),local_time_ms:Date.now()}],user:{user_unique_id:c},header:{}};setTimeout(function(){E(t,[l],"566f58151b0ed37e")},16)}catch(e){}}},re.prototype.sdkError=function(t,e,n,i){try{var r=n[0],o=r.user,s=r.header,a=[];n.forEach(function(e){e.events.forEach(function(e){a.push(e)})});var u={events:a.map(function(e){return{event:"on_error",params:JSON.stringify({error_code:i,app_key:t,app_id:s.app_id,app_name:s.app_name||"",error_event:e.event,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(s),user:JSON.stringify(o)}),local_time_ms:Date.now()}}),user:{user_unique_id:o.user_unique_id},header:{}};setTimeout(function(){E(e,[u],"566f58151b0ed37e")},16)}catch(t){}},re);function re(){}function oe(e){var t=e.instance,n=e.appId,i=e.channel,e=e.app_key;this.instance=t,this.appId=n,this.app_key=e,this.channel=i,this.domain=this.getDomain(),this.urls=((i={})[Y.Normal]=this.getUrl(Y.Normal),i[Y.Once]=this.getUrl(Y.Once),i),this.autoId=0,this.lastId=0,this.lastOnceId=0,this.duration=1e4,this.data=null}function se(e){return"__tea_sdk_ab_version_"+e}function ae(e){var t={ab_version:[],data:null,timestamp:+new Date};try{t=ce.getItem(se(e))||t}catch(e){}return t}function ue(e,t){try{var n=ae(e);ce.setItem(se(e),s({},n,t))}catch(e){}}var ce=new d(!1),le=t(function(Ie){!function(n){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function h(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function i(){w()}var e,f,z,o,r,p,g,m,b,u,c,w,S,s,I,_,a,l,v,k="sizzle"+ +new Date,y=n.document,E=0,C=0,x=ue(),O=ue(),N=ue(),T=ue(),D=function(e,t){return e===t&&(c=!0),0},A={}.hasOwnProperty,t=[],q=t.pop,L=t.push,R=t.push,P=t.slice,M=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",V="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+V+"*("+j+")(?:"+V+"*([*^$|!~]?=)"+V+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+V+"*\\]",J=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",H=new RegExp(V+"+","g"),U=new RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g"),F=new RegExp("^"+V+"*,"+V+"*"),K=new RegExp("^"+V+"*([>+~]|"+V+")"+V+"*"),$=new RegExp(V+"|>"),G=new RegExp(J),Q=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+V+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,ee=/^h\d$/i,te=/^[^{]+\{\s*\[native \w/,ne=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ie=/[+~]/,re=new RegExp("\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\([^\\r\\n\\f])","g"),oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(t=P.call(y.childNodes),y.childNodes),t[y.childNodes.length].nodeType}catch(n){R={apply:t.length?function(e,t){L.apply(e,P.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,n,i){var r,o,s,a,u,c,l=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!i&&(w(t),t=t||S,I)){if(11!==d&&(a=ne.exec(e)))if(c=a[1]){if(9===d){if(!(o=t.getElementById(c)))return n;if(o.id===c)return n.push(o),n}else if(l&&(o=l.getElementById(c))&&v(t,o)&&o.id===c)return n.push(o),n}else{if(a[2])return R.apply(n,t.getElementsByTagName(e)),n;if((c=a[3])&&f.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(c)),n}if(f.qsa&&!T[e+" "]&&(!_||!_.test(e))&&(1!==d||"object"!==t.nodeName.toLowerCase())){if(c=e,l=t,1===d&&($.test(e)||K.test(e))){for((l=ie.test(e)&&ge(t.parentNode)||t)===t&&f.scope||((s=t.getAttribute("id"))?s=s.replace(oe,h):t.setAttribute("id",s=k)),r=(u=p(e)).length;r--;)u[r]=(s?"#"+s:":scope")+" "+_e(u[r]);c=u.join(",")}try{return R.apply(n,l.querySelectorAll(c)),n}catch(t){T(e,!0)}finally{s===k&&t.removeAttribute("id")}}}return m(e.replace(U,"$1"),t,n,i)}function ue(){var i=[];return function e(t,n){return i.push(t+" ")>z.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function ce(e){return e[k]=!0,e}function le(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function de(e,t){for(var n=e.split("|"),i=n.length;i--;)z.attrHandle[n[i]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&se(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pe(s){return ce(function(o){return o=+o,ce(function(e,t){for(var n,i=s([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=ae.support={},r=ae.isXML=function(e){var t=e.namespaceURI,e=(e.ownerDocument||e).documentElement;return!Z.test(t||e&&e.nodeName||"HTML")},w=ae.setDocument=function(e){var t,e=e?e.ownerDocument||e:y;return e!=S&&9===e.nodeType&&e.documentElement&&(s=(S=e).documentElement,I=!r(S),y!=S&&(t=S.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",i,!1):t.attachEvent&&t.attachEvent("onunload",i)),f.scope=le(function(e){return s.appendChild(e).appendChild(S.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=le(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=te.test(S.getElementsByClassName),f.getById=le(function(e){return s.appendChild(e).id=k,!S.getElementsByName||!S.getElementsByName(k).length}),f.getById?(z.filter.ID=function(e){var t=e.replace(re,d);return function(e){return e.getAttribute("id")===t}},z.find.ID=function(e,t){if(void 0!==t.getElementById&&I){e=t.getElementById(e);return e?[e]:[]}}):(z.filter.ID=function(e){var t=e.replace(re,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},z.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),z.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},z.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&I)return t.getElementsByClassName(e)},a=[],_=[],(f.qsa=te.test(S.querySelectorAll))&&(le(function(e){var t;s.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+V+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+V+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+k+"-]").length||_.push("~="),(t=S.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||_.push("\\["+V+"*name"+V+"*="+V+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||_.push(".#.+[+~]"),e.querySelectorAll("\\\f"),_.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+V+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&_.push(":enabled",":disabled"),s.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(f.matchesSelector=te.test(l=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&le(function(e){f.disconnectedMatch=l.call(e,"*"),l.call(e,"[s!='']:x"),a.push("!=",J)}),_=_.length&&new RegExp(_.join("|")),a=a.length&&new RegExp(a.join("|")),t=te.test(s.compareDocumentPosition),v=t||te.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){return e===t?(c=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e==S||e.ownerDocument==y&&v(y,e)?-1:t==S||t.ownerDocument==y&&v(y,t)?1:u?M(u,e)-M(u,t):0:4&n?-1:1);var n}:function(e,t){if(e===t)return c=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e==S?-1:t==S?1:r?-1:o?1:u?M(u,e)-M(u,t):0;if(r===o)return he(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?he(s[i],a[i]):s[i]==y?-1:a[i]==y?1:0}),S},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(w(e),f.matchesSelector&&I&&!T[t+" "]&&(!a||!a.test(t))&&(!_||!_.test(t)))try{var n=l.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return 0<ae(t,S,null,[e]).length},ae.contains=function(e,t){return(e.ownerDocument||e)!=S&&w(e),v(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=S&&w(e);var n=z.attrHandle[t.toLowerCase()],n=n&&A.call(z.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==n?n:f.attributes||!I?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},ae.escape=function(e){return(e+"").replace(oe,h)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,r=0;if(c=!f.detectDuplicates,u=!f.sortStable&&e.slice(0),e.sort(D),c){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return u=null,e},o=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(z=ae.selectors={cacheLength:50,createPseudo:ce,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,d),e[3]=(e[3]||e[4]||e[5]||"").replace(re,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+V+")"+e+"("+V+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(e){e=ae.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===i:"!="===n?e!==i:"^="===n?i&&0===e.indexOf(i):"*="===n?i&&-1<e.indexOf(i):"$="===n?i&&e.slice(-i.length)===i:"~="===n?-1<(" "+e.replace(H," ")+" ").indexOf(i):"|="===n&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,e,t,g,m){var _="nth"!==p.slice(0,3),v="last"!==p.slice(-4),y="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,s,a,u,c=_!=v?"nextSibling":"previousSibling",l=e.parentNode,d=y&&e.nodeName.toLowerCase(),h=!n&&!y,f=!1;if(l){if(_){for(;c;){for(s=e;s=s[c];)if(y?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;u=c="only"===p&&!u&&"nextSibling"}return!0}if(u=[v?l.firstChild:l.lastChild],v&&h){for(f=(a=(i=(r=(o=(s=l)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===E&&i[1])&&i[2],s=a&&l.childNodes[a];s=++a&&s&&s[c]||(f=a=0)||u.pop();)if(1===s.nodeType&&++f&&s===e){r[p]=[E,a,f];break}}else if(!1===(f=h?a=(i=(r=(o=(s=e)[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===E&&i[1]:f))for(;(s=++a&&s&&s[c]||(f=a=0)||u.pop())&&((y?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++f||(h&&((r=(o=s[k]||(s[k]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]=[E,f]),s!==e)););return(f-=m)===g||f%g==0&&0<=f/g}}},PSEUDO:function(e,o){var t,s=z.pseudos[e]||z.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return s[k]?s(o):1<s.length?(t=[e,e,"",o],z.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,t){for(var n,i=s(e,o),r=i.length;r--;)e[n=M(e,i[r])]=!(t[n]=i[r])}):function(e){return s(e,0,t)}):s}},pseudos:{not:ce(function(e){var i=[],r=[],a=g(e.replace(U,"$1"));return a[k]?ce(function(e,t,n,i){for(var r,o=a(e,null,i,[]),s=e.length;s--;)(r=o[s])&&(e[s]=!(t[s]=r))}):function(e,t,n){return i[0]=e,a(i,null,n,r),i[0]=null,!r.pop()}}),has:ce(function(t){return function(e){return 0<ae(t,e).length}}),contains:ce(function(t){return t=t.replace(re,d),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:ce(function(n){return Q.test(n||"")||ae.error("unsupported lang: "+n),n=n.replace(re,d).toLowerCase(),function(e){var t;do{if(t=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!z.pseudos.empty(e)},header:function(e){return ee.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var i=n<0?n+t:t<n?t:n;0<=--i;)e.push(i);return e}),gt:pe(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=z.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})z.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function me(){}function _e(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ve(s,e,t){var a=e.dir,u=e.next,c=u||a,l=t&&"parentNode"===c,d=C++;return e.first?function(e,t,n){for(;e=e[a];)if(1===e.nodeType||l)return s(e,t,n);return!1}:function(e,t,n){var i,r,o=[E,d];if(n){for(;e=e[a];)if((1===e.nodeType||l)&&s(e,t,n))return!0}else for(;e=e[a];)if(1===e.nodeType||l)if(i=(r=e[k]||(e[k]={}))[e.uniqueID]||(r[e.uniqueID]={}),u&&u===e.nodeName.toLowerCase())e=e[a]||e;else{if((r=i[c])&&r[0]===E&&r[1]===d)return o[2]=r[2];if((i[c]=o)[2]=s(e,t,n))return!0}return!1}}function ye(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function ze(e,t,n,i,r){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),c&&t.push(a)));return s}function be(e){for(var i,t,n,r=e.length,o=z.relative[e[0].type],s=o||z.relative[" "],a=o?1:0,u=ve(function(e){return e===i},s,!0),c=ve(function(e){return-1<M(i,e)},s,!0),l=[function(e,t,n){n=!o&&(n||t!==b)||((i=t).nodeType?u:c)(e,t,n);return i=null,n}];a<r;a++)if(t=z.relative[e[a].type])l=[ve(ye(l),t)];else{if((t=z.filter[e[a].type].apply(null,e[a].matches))[k]){for(n=++a;n<r&&!z.relative[e[n].type];n++);return function e(f,p,g,m,_,t){return m&&!m[k]&&(m=e(m)),_&&!_[k]&&(_=e(_,t)),ce(function(e,t,n,i){var r,o,s,a=[],u=[],c=t.length,l=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ae(e,t[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),d=!f||!e&&p?l:ze(l,a,f,n,i),h=g?_||(e?f:c||m)?[]:t:d;if(g&&g(d,h,n,i),m)for(r=ze(h,u),m(r,[],n,i),o=r.length;o--;)(s=r[o])&&(h[u[o]]=!(d[u[o]]=s));if(e){if(_||f){if(_){for(r=[],o=h.length;o--;)(s=h[o])&&r.push(d[o]=s);_(null,h=[],r,i)}for(o=h.length;o--;)(s=h[o])&&-1<(r=_?M(e,s):a[o])&&(e[r]=!(t[r]=s))}}else h=ze(h===t?h.splice(c,h.length):h),_?_(null,t,h,i):R.apply(t,h)})}(1<a&&ye(l),1<a&&_e(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(U,"$1"),t,a<n&&be(e.slice(a,n)),n<r&&be(e=e.slice(n)),n<r&&_e(e))}l.push(t)}return ye(l)}function we(m,_){function e(e,t,n,i,r){var o,s,a,u=0,c="0",l=e&&[],d=[],h=b,f=e||y&&z.find.TAG("*",r),p=E+=null==h?1:Math.random()||.1,g=f.length;for(r&&(b=t==S||t||r);c!==g&&null!=(o=f[c]);c++){if(y&&o){for(s=0,t||o.ownerDocument==S||(w(o),n=!I);a=m[s++];)if(a(o,t||S,n)){i.push(o);break}r&&(E=p)}v&&((o=!a&&o)&&u--,e&&l.push(o))}if(u+=c,v&&c!==u){for(s=0;a=_[s++];)a(l,d,t,n);if(e){if(0<u)for(;c--;)l[c]||d[c]||(d[c]=q.call(i));d=ze(d)}R.apply(i,d),r&&!e&&0<d.length&&1<u+_.length&&ae.uniqueSort(i)}return r&&(E=p,b=h),l}var v=0<_.length,y=0<m.length;return v?ce(e):e}me.prototype=z.filters=z.pseudos,z.setFilters=new me,p=ae.tokenize=function(e,t){var n,i,r,o,s,a,u,c=O[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],u=z.preFilter;s;){for(o in n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=K.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),z.filter)!(i=X[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):O(e,a).slice(0)},g=ae.compile=function(e,t){var n,i=[],r=[],o=N[e+" "];if(!o){for(n=(t=t||p(e)).length;n--;)((o=be(t[n]))[k]?i:r).push(o);(o=N(e,we(r,i))).selector=e}return o},m=ae.select=function(e,t,n,i){var r,o,s,a,u,c="function"==typeof e&&e,l=!i&&p(e=c.selector||e);if(n=n||[],1===l.length){if(2<(o=l[0]=l[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===t.nodeType&&I&&z.relative[o[1].type]){if(!(t=(z.find.ID(s.matches[0].replace(re,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=X.needsContext.test(e)?0:o.length;r--&&(s=o[r],!z.relative[a=s.type]);)if((u=z.find[a])&&(i=u(s.matches[0].replace(re,d),ie.test(o[0].type)&&ge(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&_e(o)))return R.apply(n,i),n;break}}return(c||g(e,l))(i,t,!I,n,!t||ie.test(e)&&ge(t.parentNode)||t),n},f.sortStable=k.split("").sort(D).join("")===k,f.detectDuplicates=!!c,w(),f.sortDetached=le(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||de(B,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null});var Se=n.Sizzle;ae.noConflict=function(){return n.Sizzle===ae&&(n.Sizzle=Se),ae},Ie.exports?Ie.exports=ae:n.Sizzle=ae}(window)}),de=(_e.prototype.query=function(e){try{if(document.querySelector)return document.querySelector(e);var t=le(e);return t&&t.length?t[0]:null}catch(e){return null}},_e.prototype.init=function(){var n=this;try{this.elementList&&this.elementList.length?(this.elementList.map(function(e){var t=n.query(e.selector);t&&n.inScreen(t,e)}),this.domInScreen.length&&(this.domInScreen.map(function(e){n.render(e.dom,e.elementItem)}),this.domInScreen=[],this.closeOverLay||(this.abInstance.closeOverlayer(),this.closeOverLay=!0)),this.domOutScreen.length&&(this.domOutScreen.map(function(e){n.render(e.dom,e.elementItem)}),this.domOutScreen=[])):console.log("no abtest config")}catch(n){console.log("init error: "+JSON.stringify(n))}},_e.prototype.render=function(e,t){if("true"!==e.getAttribute("data-ab-visual")){for(var n in t){if("text"===n&&(e.innerHTML=t[n]),"style"===n)for(var i in t[n])e.style[i]=t[n][i];if("attrs"===n)for(var r in t[n])e[r]=t[n][r]}e.setAttribute("data-ab-visual","true")}},_e.prototype.inScreen=function(e,t){var n=this.windowSize,i=n.windowHeight,r=n.windowWidth,n=e.getBoundingClientRect&&e.getBoundingClientRect();(n&&0<n.width&&0<n.height&&n.top<=i&&n.left<=r?this.domInScreen:this.domOutScreen).push({dom:e,elementItem:t})},_e.prototype.getWindowSize=function(){var t={windowHeight:window.outerHeight||screen.height,windowWidth:window.outerWidth||screen.width},e=document.documentElement||document.body;return[window.innerWidth,e.clientWidth].filter(function(e){return e&&e>t.windowWidth&&2<=e/t.windowWidth}).forEach(function(e){e/=t.windowHeight;t.windowHeight=t.windowHeight*e,t.windowWidth=t.windowWidth*e}),t},_e),he=(me.prototype.linster=function(){var t=this,e=window.MutationObserver;if(e)try{this.observer=new e(function(e){e&&e.length&&t.select.init()}),this.observer.observe(document,{childList:!0,subtree:!0})}catch(t){console.log("mutationObserver err")}else console.log("you browser is not support mutationObserver")},me),fe={},pe=[],ge=function(e){e.length&&e.forEach(function(e){pe.push(e)})};function me(e,t){this.linster(),this.select=new de(t,e),this.select.init()}function _e(e,t){this.closeOverLay=!1,this.domInScreen=[],this.domOutScreen=[],this.abInstance=e,this.elementList=t,this.windowSize=this.getWindowSize()}function ve(e,t,n,i){var r=e&&e.source||window.opener||window.parent,i=e&&e.origin||i||"*";r.postMessage(JSON.stringify({type:t,payload:n}),i)}function ye(t){if(pe.some(function(e){return"*"===e})||pe.some(function(e){return-1<t.origin.indexOf(e)})){var e,n,i=t.data;if("string"==typeof t.data)try{i=JSON.parse(t.data)}catch(t){i=void 0}i&&(e=i.type,n=i.payload,fe[e]&&fe[e].forEach(function(e){"function"==typeof e&&e(t,n)}))}}window.TEAVisualEditor=window.TEAVisualEditor||{};var ze,be,we="",Se=!1;function Ie(s,a,e){ge(["*"]);var u=e,c="";if((window.opener||window.parent).postMessage("[tea-sdk]ready","*"),window.addEventListener("message",ye,!1),u){var t,n=window.performance.getEntriesByType("resource");try{n&&n.length&&n.forEach(function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(t=e.name.split("/"))&&t.length&&(c="https://"+t[2]+"/"+t[3]+"/"+t[4]+"/"+t[5]+"/visual-editor-ab")})}catch(s){}}e=function(e){var t,n,i,r=e.data;if("string"==typeof e.data)try{r=JSON.parse(e.data)}catch(e){r=void 0}if(r){var o=r.lang;if(r.appId!==a)return ve(e,"appIdError"),void console.error("abtest appid is not belong the page appid please check");we=u?(r=r.version,c?c+(r?"."+r:".1.0.1")+".js":p(S)):p(S),window.TEAVisualEditor.lang=o,i=(o={event:e,editorUrl:we,collectInstance:s}).event,e=o.editorUrl,o.collectInstance,o.fromSession,Se||(Se=!0,o=e,t=function(){ve(i,"abEditorScriptloadSuccess")},n=function(){i&&ve(i,"abEditorScriptloadError"),Se=!1},(e=document.createElement("script")).src=o,e.onerror=function(){n()},e.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(e))}},fe[n="tea:openVisualABEditor"]=fe[n]||[],fe[n].push(e)}(q=ze=ze||{})[q.No=0]="No",q[q.Ing=1]="Ing",q[q.Complete=2]="Complete",(Me=be=be||{})[Me.Var=0]="Var",Me[Me.All=1]="All";function ke(e,t,n,i){if(t){var r=e.filter(function(e){return!e[0].__disable_storage__}).length;if(0<r)try{var o=i.getItem(n);if(o){var s=Object.keys(o),a=s.length+r-t;if(0<a){for(var u=s.map(function(e){var t=o[e];return{id:e,index:t&&t[0]?t[0].header.__storage_index__:+new Date}}).sort(function(e,t){return e.index-t.index}),c=0;c<a;c++){var l=u.shift();l&&l.id&&o[l.id]&&delete o[l.id]}i.setItem(n,o)}}}catch(e){}}}var Ee,Ce=(Ae.prototype.init=function(e){var t,n;this.collector.destroyInstance||(t=e.user,e=r(n=e.header,[]),this.user=s({},t),this.header=s({},n),this._fetch(s({},e)))},Ae.prototype.wait=function(){var e=this;this.needOverlay&&(this.isWait||(this.openOverlayer(),this.isWait=!0),setTimeout(function(){e.closeOverlayer()},this.closeTime))},Ae.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");e={callback:e,type:be.All};this.fetchStatus===ze.Complete?this._getAllVars(e):this.callbacks.push(e)},Ae.prototype.getVar=function(e,t,n){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");n={name:e,defaultValue:t,callback:n,type:be.Var};this.fetchStatus===ze.Complete?(this._getVar(n),this._updateVersions()):this.callbacks.push(n)},Ae.prototype.openOverlayer=function(){var e,t,n;document.getElementById(w)||(e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).id=w,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n))},Ae.prototype.closeOverlayer=function(){var e;(e=document.getElementById(w))&&e.parentElement.removeChild(e)},Ae.prototype._check=function(){var e,t=this,n=function(e){var t=ae(e),n=t.timestamp;if(2592e6<=Date.now()-n){try{ce.removeItem("__tea_sdk_ab_version")}catch(e){}return null}return t}(this.appId);n&&(e=n.ab_version,n=n.data,e&&e.length&&(this.versions=e,this.data=n,setTimeout(function(){t._configVersions()})))},Ae.prototype._fetchComplete=function(t){var n=this;if(t){e=this.appId,ue(e,{data:t}),this.data=t;var i=[];Object.keys(t).forEach(function(e){e=t[e].vid;e&&i.push(e)}),this.versions=this.versions.filter(function(e){return i.includes(e)});var r,e=t.$ab_url,o=t.$ab_modification;if(o&&o.val&&this.enable_ab_visual){if(this.collector.destroyInstance)return;this.getVar("$ab_modification",window.location.href,function(){n.visual=new he(o.val,n)})}else e&&this.enable_multilink?(r=e.val,e=e.vid,r&&e&&this.getVar("$ab_url",window.location.href,function(){r!==window.location.href?setTimeout(function(){var e;n.collector.destroyInstance||(e=-1===(e=""+r).indexOf("http")?"https://"+e:e,window.location.href=e)},50):n.closeOverlayer()})):this.closeOverlayer()}this.callbacks.forEach(function(e){return n[e.type===be.Var?"_getVar":"_getAllVars"](e)}),this.callbacks=[],this._updateVersions(),this.isWait||this.closeOverlayer()},Ae.prototype._abEvent=function(e){var t,n,i,r=this;try{e&&(t={event:"abtest_exposure",ab_sdk_version:e,params:JSON.stringify({app_id:this.appId,ab_url:window.location.href}),local_time_ms:Date.now()},(n=s({},this.header)).ab_sdk_version=e,i={events:[t],user:this.user,header:n},setTimeout(function(){E(r.reportUrl,[i],"")},16))}catch(e){}},Ae.prototype._getAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{})},Ae.prototype._getVar=function(e){var t=e.name,n=e.defaultValue,i=e.callback,e=this.data;if(e){if("object"==typeof e[t]&&void 0!==e[t].val){i(e[t].val);t=e[t].vid;return this._abEvent(t),void(this.versions.includes(t)||this.versions.push(t))}i(n)}else i(n)},Ae.prototype._updateVersions=function(){var e=this.appId,t=this.versions;ue(e,{ab_version:t,timestamp:Date.now()}),this._configVersions()},Ae.prototype._configVersions=function(){var e=this.versions.join(",");e&&this.collector.config({ab_sdk_version:e})},Ae.prototype._url=function(){return this.domain+"/service/2/abtest_config/"},Ae.prototype._fetch=function(e,t){var n=this,i=void 0===t?{}:t,t=i.success,r=void 0===t?function(){}:t,i=i.fail,o=void 0===i?function(){}:i;this.fetchStatus=ze.Ing,I(this._url(),{header:s({aid:this.appId},this.user||{},e||{},{ab_sdk_version:this.versions.join(","),ab_url:window.location.href})},function(e){n.fetchStatus=ze.Complete;var t=e.data;"success"===e.message?(n._fetchComplete(t),r(t)):(n._fetchComplete(null),o())},function(){n.fetchStatus=ze.Complete,o(),n._fetchComplete(null)},"",3e3)},Ae),xe=function(e,t,n){t&&(t.enable_stay_duration&&(this.stay=new G(n,t)),t.auto_profile&&t.channel&&(this.profile=new ne({instance:e,app_key:t.app_key,appId:t.app_id,channel:t.channel})),t.disable_session||(this.session=new ee(n)),t.disable_sdk_monitor||(this.monitor=new ie),t.enable_ab_test&&(this.ab=new Ce(e)),t.max_storage_num&&(this.maxStorage=ke))},Oe=u(["init","config","send","start","predefinePageView","resetStayDuration","autoInitializationRangers"],["setProfile","setOnceProfile","getVar","openOverlayer","closeOverlayer","getAllVars","getToken","destroy"]),Ne=(Ee=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return Ee+=1}),Te=(De.prototype.autoInitializationRangers=function(e){},De.prototype.init=function(e){var t=this;if(!this._inited){if(this._inited=!0,!e||"object"!=typeof e)throw new Error("init params is error,please check");var n=e.app_id,i=e.app_key,r=e.log;this._config=new P(n,e),this.logger=new M(this.name,r),i||n||this.logger.throw("no app_key or app_id please check !!!"),n&&"number"!=typeof n&&this.logger.throw("app_id param is error,must be number,please check !!!"),i&&"string"!=typeof i&&this.logger.warn("app_key is empty"),e.channel_domain||-1!==["cn","sg","va"].indexOf(e.channel)||this.logger.throw("channel must be `cn`, `sg`,`va` !!!"),this._config.set("app_id",n),e.channel=e.channel||"cn",this._initConfig=e,this._token=new T(e,this._config),this._token.callback=function(){t.callbackSend?t.start():t._event&&t._event.report()},this.plugin=new xe(this,e,this.event.bind(this)),this._event=new D(this,e,this._config,this._token,this.plugin),this._token._getToken()}},De.prototype.config=function(e){if(this._inited)if(e&&"object"==typeof e){if(e.user_unique_id){"string"!=typeof e.user_unique_id&&this.logger.warn("user_unique_id must be string!!! please check");try{var t=String(e.user_unique_id);this._token._getSsid(t)}catch(e){}}for(var n in e.disable_auto_pv&&(this.autoPV=!1),e)this._config.set(n,e[n])}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},De.prototype.send=function(){this.start()},De.prototype.start=function(){this._token.isTokenReady()?this._isSend||(this._isSend=!0,this.logger.info("userInfo:"+JSON.stringify(this._config.get("user"))),this.logger.info("sdk is ready, you can report now !!!"),this._event.setReady(),this.autoPV&&this.predefinePageView(),this.plugin&&this.plugin.profile&&this.plugin.profile.start(),this.plugin&&this.plugin.ab&&this.plugin.ab.init(this._config.get())):this.callbackSend=!0},De.prototype.event=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="boolean"==typeof e[e.length-1]&&e[e.length-1],i="boolean"==typeof e[e.length-1]?e.slice(0,e.length-1):e,r=a(i,1)[0],o=[];"Array"!==Object.prototype.toString.call(r).slice(8,-1)?o[0]=i:o=i,o=o.map(function(e){return function(e,t){var n=e;/^event\./.test(e)&&(n=e.slice(6));return(t="object"!=typeof t?{}:t).event_index=Ne(),{event:n,params:t,local_time_ms:t.local_ms||+new Date,is_bav:0}}(e[0],e[1])}),this._event.event(o,n),this.plugin&&this.plugin.session&&(n=this.plugin.session).process.apply(n,u(e))},De.prototype.resetStayDuration=function(e,t,n){!this.plugin||this.plugin.stay?this.plugin&&this.plugin.stay&&this.plugin.stay.reset(e,t,n):this.logger.info("stayDuration is not init")},De.prototype.setProfile=function(e){this.plugin&&this.plugin.profile&&this.plugin.profile.setProfile(e)},De.prototype.setOnceProfile=function(e){this.plugin&&this.plugin.profile&&this.plugin.profile.setOnceProfile(e)},De.prototype.getVar=function(e,t,n){this.plugin&&this.plugin.ab&&this.plugin.ab.getVar(e,t,n)},De.prototype.openOverlayer=function(){this.plugin&&this.plugin.ab&&this.plugin.ab.openOverlayer()},De.prototype.closeOverlayer=function(){this.plugin&&this.plugin.ab&&this.plugin.ab.closeOverlayer()},De.prototype.getAllVars=function(e){this.plugin&&this.plugin.ab&&this.plugin.ab.getAllVars(e)},De.prototype.destroy=function(){this.destroyInstance||(this.destroyInstance=!0)},De);function De(e){var n=this;this.predefinePageView=function(e){void 0===e&&(e={});var t=s({title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer},n._event.closeStorage?{}:{__disable_storage__:1}),e=s({},t,e);n.event("predefine_pageview",e,!0)},this.getToken=function(e){var t;n._token.isTokenReady()&&(t=n._config.get().user,e(s({},t)))},this.name=e,this._isSend=!1,this.autoPV=!0}function Ae(e){this.appId=0,this.user={},this.header={},this.domain="",this.protocal=location.protocol,this.fetchStatus=ze.No,this.callbacks=[],this.data=null,this.versions=[],this.collector=e;var t=this.collector._initConfig,n=t.app_id,i=t.channel,r=t.enable_multilink,o=t.multilink_timeout_ms,s=t.ab_channel_domain,a=t.channel_domain,t=t.enable_ab_visual;if(this.appId=n,this.domain=s||p(b[i||"cn"]),this.needOverlay=r||t||!1,this.enable_ab_visual=t,this.enable_multilink=r,this.closeTime=o||500,this.reportUrl=p(g[i])+_,t){Ie(e,this.appId,a);a=function(){var t=null;if(parent!==window)try{t=parent.location.href}catch(e){t=document.referrer}return t}();if(a&&-1!==a.indexOf("rangers"))return void this.collector.destroy()}this._check(),this.wait()}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e){return je[e]||(je[e]=[]),je[e]}function Re(){Je.q.forEach(function(e){e=[].slice.call(e);"Array"===Object.prototype.toString.call(e[0]).slice(8,-1)?e.forEach(function(e){We(e)}):We(e)}),Object.keys(je).forEach(function(n){je[n].forEach(function(e){var t;Ve[t=n]||(Ve[t]=new Be(t)),Ve[t].apply(void 0,u(e))}),je[n]=[]}),Je.q=[]}var Pe,Me,Be=function(e){var o=this;return qe(this,"_exportCollect",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o._isProcess?o._executeCmd.apply(o,t):(o.cmdQueue.push(t),o._processCmd())}),qe(this,"_processCmd",function(){var n,e,i;0!==o.cmdQueue.length&&(e=o.cmdQueue,i=-1,e.forEach(function(e,t){"init"===e[0]&&(i=t)}),-1!==(n=i)&&(o._isProcess=!0,o._executeCmd.apply(o,o.cmdQueue[n]),o.cmdQueue.forEach(function(e,t){t!==n&&o._executeCmd.apply(o,e)}),o.cmdQueue=[]))}),qe(this,"_executeCmd",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=t[0];-1<Oe.indexOf(r)?(i=o.colloctor)[r].apply(i,t.slice(1)):(i=o.colloctor).event.apply(i,t)}),this.cmdQueue=[],this.name=e,this.colloctor=new Te(e),this._isProcess=!1,this._alias={},this._processCmd(),Oe.forEach(function(e){o._exportCollect[e]=o._exportCollect.bind(o,e)}),this._exportCollect},Ve={},je={},We=function(e){try{var t=a(e),n=t[0],i=t.slice(1);if(!n)return void console.error("the eventName is: "+n+", error, stop report, please check");var r,o,s=n.split(".");1===s.length?Le("default").push(u([n],i)):2===s.length?"event"===s[0]?Le("default").push(u([n],i)):Le(s[0]).push(u([s[1]],i)):(r=s[0],o=[s[1],s[2]].join("."),Le(r).push(u([o],i)))}catch(e){console.log(e)}},Je=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.q.push(t),Re()};return Je.q=[],Je.l=Date.now(),Je._instanceMap=Ve,Je._instanceCmdMap=je,Oe.forEach(function(e){Je[e]=Je.bind(null,e)}),Pe=Je,"undefined"==typeof window||(q=y())&&window[q]&&((Me=window[q]).init||(Pe.q=Me.q||[],Pe.l=Me.l||Date.now(),window[q]=Pe)),Re(),e.Collector=Be,e.default=Je,e}({});
