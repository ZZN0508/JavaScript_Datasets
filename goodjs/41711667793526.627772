YUI.add("hermes-template-fluid-droparound",function(n,e){var i=n.Template.Handlebars.revive({1:function(e,t,n,i,r){return" html"},3:function(e,t,n,i,r){return" subview-droparound"},5:function(e,t,n,i,r){return" menu"},7:function(e,t,n,i,r){return" auto-size"},9:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"height: "+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"staticHeight")||(null!=t?l(t,"staticHeight"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"staticHeight",hash:{},data:r,loc:{start:{line:2,column:35},end:{line:2,column:51}}}):l)+"px;"},11:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"max-height: "+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"maxHeight")||(null!=t?l(t,"maxHeight"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"maxHeight",hash:{},data:r,loc:{start:{line:3,column:29},end:{line:3,column:42}}}):l)+"px;"},13:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"width: "+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"staticWidth")||(null!=t?l(t,"staticWidth"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"staticWidth",hash:{},data:r,loc:{start:{line:4,column:26},end:{line:4,column:41}}}):l)+"px;"},15:function(e,t,n,i,r){return"position: fixed;"},17:function(e,t,n,i,r){return"hide-head"},19:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"max-height: "+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"maxHeight")||(null!=t?l(t,"maxHeight"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"maxHeight",hash:{},data:r,loc:{start:{line:9,column:55},end:{line:9,column:68}}}):l)+"px; overflow: auto;"},21:function(e,t,n,i,r){var l,o=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="content text-only'+(null!=(l=s(n,"if").call(o,null!=t?s(t,"autoSizeToContent"):t,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:32},end:{line:11,column:74}}}))?l:"")+'" style="'+(null!=(l=(s(n,"ifDefined")||t&&s(t,"ifDefined")||a).call(o,null!=t?s(t,"contentPadding"):t,{name:"ifDefined",hash:{},fn:e.program(22,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:83},end:{line:11,column:156}}}))?l:"")+'">\n\t\t\t\t'+e.escapeExpression("function"==typeof(t=null!=(t=s(n,"textMessage")||(null!=t?s(t,"textMessage"):t))?t:a)?t.call(o,{name:"textMessage",hash:{},data:r,loc:{start:{line:12,column:4},end:{line:12,column:19}}}):t)+"\n\t\t\t</div>\n"},22:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"padding: "+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"contentPadding")||(null!=t?l(t,"contentPadding"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"contentPadding",hash:{},data:r,loc:{start:{line:11,column:121},end:{line:11,column:139}}}):l)+"px;"},24:function(e,t,n,i,r){var l,o=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="content html-only'+(null!=(l=s(n,"if").call(o,null!=t?s(t,"autoSizeToContent"):t,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:16,column:32},end:{line:16,column:74}}}))?l:"")+'" style="'+(null!=(l=(s(n,"ifDefined")||t&&s(t,"ifDefined")||a).call(o,null!=t?s(t,"contentPadding"):t,{name:"ifDefined",hash:{},fn:e.program(22,r,0),inverse:e.noop,data:r,loc:{start:{line:16,column:83},end:{line:16,column:156}}}))?l:"")+'">\n\t\t\t\t'+e.escapeExpression((s(n,"renderTrustedMarkup")||t&&s(t,"renderTrustedMarkup")||a).call(o,null!=t?s(t,"htmlMessage"):t,{name:"renderTrustedMarkup",hash:{},data:r,loc:{start:{line:17,column:4},end:{line:17,column:39}}}))+"\n\t\t\t</div>\n"},26:function(e,t,n,i,r){var l,o=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="content subview'+(null!=(l=a(n,"if").call(o,null!=t?a(t,"autoSizeToContent"):t,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:21,column:30},end:{line:21,column:72}}}))?l:"")+'" style="'+(null!=(l=(a(n,"ifDefined")||t&&a(t,"ifDefined")||e.hooks.helperMissing).call(o,null!=t?a(t,"contentPadding"):t,{name:"ifDefined",hash:{},fn:e.program(22,r,0),inverse:e.noop,data:r,loc:{start:{line:21,column:81},end:{line:21,column:154}}}))?l:"")+'"></div>\n'},28:function(e,t,n,i,r,l,o){var a,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="content menu" style="'+(null!=(a=(u(n,"ifDefined")||t&&u(t,"ifDefined")||e.hooks.helperMissing).call(s,null!=t?u(t,"contentPadding"):t,{name:"ifDefined",hash:{},fn:e.program(22,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:24,column:36},end:{line:24,column:109}}}))?a:"")+'">\n\t\t\t\t<ul role="menu">\n'+(null!=(a=u(n,"each").call(s,null!=t?u(t,"menuItems"):t,{name:"each",hash:{},fn:e.program(29,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:26,column:5},end:{line:42,column:14}}}))?a:"")+"\t\t\t\t</ul>\n\t\t\t</div>\n"},29:function(e,t,n,i,r,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=a(n,"if").call(null!=t?t:e.nullContext||{},null!=o[1]?a(o[1],"multiSelect"):o[1],{name:"if",hash:{},fn:e.program(30,r,0,l,o),inverse:e.program(35,r,0,l,o),data:r,loc:{start:{line:27,column:6},end:{line:41,column:13}}}))?r:""},30:function(e,t,n,i,r){var l,o,a=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t\t\t\t<li role="menuitem" '+(null!=(l=s(n,"if").call(a,null!=t?s(t,"selected"):t,{name:"if",hash:{},fn:e.program(31,r,0),inverse:e.noop,data:r,loc:{start:{line:28,column:27},end:{line:28,column:66}}}))?l:"")+'>\n\t\t\t\t\t\t\t\t<span class="selection"></span>\n\t\t\t\t\t\t\t\t'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"text")||(null!=t?s(t,"text"):t))?o:e.hooks.helperMissing)?o.call(a,{name:"text",hash:{},data:r,loc:{start:{line:30,column:8},end:{line:30,column:16}}}):o)+(null!=(l=s(n,"if").call(a,null!=t?s(t,"itemFlag"):t,{name:"if",hash:{},fn:e.program(33,r,0),inverse:e.noop,data:r,loc:{start:{line:30,column:16},end:{line:30,column:95}}}))?l:"")+"\n\t\t\t\t\t\t\t</li>\n"},31:function(e,t,n,i,r){return'class="selected"'},33:function(e,t,n,i,r){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,a=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" - "+a("function"==typeof(e=null!=(e=s(n,"itemFlag")||(null!=t?s(t,"itemFlag"):t))?e:o)?e.call(l,{name:"itemFlag",hash:{},data:r,loc:{start:{line:30,column:35},end:{line:30,column:47}}}):e)+'<div class="label-new">'+a("function"==typeof(e=null!=(e=s(n,"itemFlag")||(null!=t?s(t,"itemFlag"):t))?e:o)?e.call(l,{name:"itemFlag",hash:{},data:r,loc:{start:{line:30,column:70},end:{line:30,column:82}}}):e)+"</div>"},35:function(e,t,n,i,r){var l,o,a=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t\t\t\t<li role="menuitem"\n\t\t\t\t\t\t\t\tclass="'+(null!=(l=s(n,"if").call(a,null!=t?s(t,"hasDivider"):t,{name:"if",hash:{},fn:e.program(36,r,0),inverse:e.noop,data:r,loc:{start:{line:34,column:15},end:{line:34,column:52}}}))?l:"")+"\n\t\t\t\t\t\t\t\t\t"+(null!=(l=s(n,"if").call(a,null!=t?s(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(38,r,0),inverse:e.noop,data:r,loc:{start:{line:35,column:9},end:{line:35,column:48}}}))?l:"")+'"\n\t\t\t\t\t\t\t\t'+(null!=(l=s(n,"if").call(a,null!=t?s(t,"href"):t,{name:"if",hash:{},fn:e.noop,inverse:e.program(40,r,0),data:r,loc:{start:{line:36,column:8},end:{line:36,column:39}}}))?l:"")+">\n\t\t\t\t\t\t\t\t"+(null!=(l=s(n,"if").call(a,null!=t?s(t,"href"):t,{name:"if",hash:{},fn:e.program(42,r,0),inverse:e.noop,data:r,loc:{start:{line:37,column:8},end:{line:37,column:92}}}))?l:"")+"\n\t\t\t\t\t\t\t\t\t"+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"text")||(null!=t?s(t,"text"):t))?o:e.hooks.helperMissing)?o.call(a,{name:"text",hash:{},data:r,loc:{start:{line:38,column:9},end:{line:38,column:17}}}):o)+(null!=(l=s(n,"if").call(a,null!=t?s(t,"itemFlag"):t,{name:"if",hash:{},fn:e.program(45,r,0),inverse:e.noop,data:r,loc:{start:{line:38,column:17},end:{line:38,column:81}}}))?l:"")+"\n\t\t\t\t\t\t\t\t"+(null!=(l=s(n,"if").call(a,null!=t?s(t,"href"):t,{name:"if",hash:{},fn:e.program(47,r,0),inverse:e.noop,data:r,loc:{start:{line:39,column:8},end:{line:39,column:31}}}))?l:"")+"\n\t\t\t\t\t\t\t</li>\n"},36:function(e,t,n,i,r){return" has-divider"},38:function(e,t,n,i,r){return" selected-item"},40:function(e,t,n,i,r){return'tabindex="0"'},42:function(e,t,n,i,r){var l,o=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="'+e.escapeExpression("function"==typeof(l=null!=(l=a(n,"href")||(null!=t?a(t,"href"):t))?l:e.hooks.helperMissing)?l.call(o,{name:"href",hash:{},data:r,loc:{start:{line:37,column:29},end:{line:37,column:37}}}):l)+'"'+(null!=(r=a(n,"if").call(o,null!=t?a(t,"className"):t,{name:"if",hash:{},fn:e.program(43,r,0),inverse:e.noop,data:r,loc:{start:{line:37,column:38},end:{line:37,column:84}}}))?r:"")+">"},43:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' class="'+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"className")||(null!=t?l(t,"className"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"className",hash:{},data:r,loc:{start:{line:37,column:63},end:{line:37,column:76}}}):l)+'"'},45:function(e,t,n,i,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="label-new">'+e.escapeExpression("function"==typeof(l=null!=(l=l(n,"itemFlag")||(null!=t?l(t,"itemFlag"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"itemFlag",hash:{},data:r,loc:{start:{line:38,column:56},end:{line:38,column:68}}}):l)+"</div>"},47:function(e,t,n,i,r){return"</a>"},49:function(e,t,n,i,r){return"hide-foot"},51:function(e,t,n,i,r){return'\t\t<div class="droparrow up"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r,l,o){var a,s,u=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="droparound'+(null!=(a=h(n,"if").call(u,null!=t?h(t,"htmlMessage"):t,{name:"if",hash:{},fn:e.program(1,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:1,column:22},end:{line:1,column:53}}}))?a:"")+(null!=(a=h(n,"if").call(u,null!=t?h(t,"subview"):t,{name:"if",hash:{},fn:e.program(3,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:1,column:53},end:{line:1,column:94}}}))?a:"")+(null!=(a=h(n,"if").call(u,null!=t?h(t,"menuItems"):t,{name:"if",hash:{},fn:e.program(5,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:1,column:94},end:{line:1,column:123}}}))?a:"")+(null!=(a=h(n,"if").call(u,null!=t?h(t,"autoSizeToContent"):t,{name:"if",hash:{},fn:e.program(7,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:1,column:123},end:{line:1,column:165}}}))?a:"")+" "+d("function"==typeof(s=null!=(s=h(n,"classList")||(null!=t?h(t,"classList"):t))?s:c)?s.call(u,{name:"classList",hash:{},data:r,loc:{start:{line:1,column:166},end:{line:1,column:179}}}):s)+'"\nstyle="'+(null!=(a=h(n,"if").call(u,null!=t?h(t,"staticHeight"):t,{name:"if",hash:{},fn:e.program(9,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:2,column:7},end:{line:2,column:61}}}))?a:"")+"\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"maxHeight"):t,{name:"if",hash:{},fn:e.program(11,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:3,column:0},end:{line:3,column:52}}}))?a:"")+"\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"staticWidth"):t,{name:"if",hash:{},fn:e.program(13,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:4,column:0},end:{line:4,column:51}}}))?a:"")+"\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"positionFixed"):t,{name:"if",hash:{},fn:e.program(15,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:5,column:0},end:{line:5,column:44}}}))?a:"")+'">\n\t<div class="head '+(null!=(a=h(n,"unless").call(u,null!=t?h(t,"headContent"):t,{name:"unless",hash:{},fn:e.program(17,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:6,column:18},end:{line:6,column:61}}}))?a:"")+'">\n\t\t'+d("function"==typeof(s=null!=(s=h(n,"headContent")||(null!=t?h(t,"headContent"):t))?s:c)?s.call(u,{name:"headContent",hash:{},data:r,loc:{start:{line:7,column:2},end:{line:7,column:17}}}):s)+'\n\t</div>\n\t<div class="body" style="'+(null!=(a=h(n,"if").call(u,null!=t?h(t,"maxHeight"):t,{name:"if",hash:{},fn:e.program(19,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:9,column:26},end:{line:9,column:94}}}))?a:"")+'">\n'+(null!=(a=h(n,"if").call(u,null!=t?h(t,"textMessage"):t,{name:"if",hash:{},fn:e.program(21,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:10,column:2},end:{line:14,column:9}}}))?a:"")+(null!=(a=h(n,"if").call(u,null!=t?h(t,"htmlMessage"):t,{name:"if",hash:{},fn:e.program(24,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:15,column:2},end:{line:19,column:9}}}))?a:"")+(null!=(a=h(n,"if").call(u,null!=t?h(t,"subview"):t,{name:"if",hash:{},fn:e.program(26,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:20,column:2},end:{line:22,column:9}}}))?a:"")+(null!=(a=h(n,"if").call(u,null!=t?h(t,"menuItems"):t,{name:"if",hash:{},fn:e.program(28,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:23,column:2},end:{line:45,column:9}}}))?a:"")+'\t</div>\n\t<div class="foot '+(null!=(a=h(n,"unless").call(u,null!=t?h(t,"footContent"):t,{name:"unless",hash:{},fn:e.program(49,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:47,column:18},end:{line:47,column:61}}}))?a:"")+'">\n\t\t'+d("function"==typeof(s=null!=(s=h(n,"footContent")||(null!=t?h(t,"footContent"):t))?s:c)?s.call(u,{name:"footContent",hash:{},data:r,loc:{start:{line:48,column:2},end:{line:48,column:17}}}):s)+"\n\t</div>\n"+(null!=(a=h(n,"if").call(u,null!=t?h(t,"showDropArrow"):t,{name:"if",hash:{},fn:e.program(51,r,0,l,o),inverse:e.noop,data:r,loc:{start:{line:50,column:1},end:{line:52,column:8}}}))?a:"")+"</div>\n"},useData:!0,useDepths:!0}),r={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(r[e]=t)}),n.Template.register("hermes/fluid-droparound",function(e,t){return(t=t||{}).partials=t.partials?n.merge(r,t.partials):r,i(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]}),YUI.add("hermes-template-flickr-balls",function(n,e){var i=n.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="balls">\n\t<div class="blue ball"></div><div class="pink ball"></div>\n</div>'},useData:!0}),r={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(r[e]=t)}),n.Template.register("hermes/flickr-balls",function(e,t){return(t=t||{}).partials=t.partials?n.merge(r,t.partials):r,i(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]}),YUI.add("fluid-droparound-view",function(l,e){"use strict";var n=require("hermes-core/flog")(e),p={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},i={supportsTransform:!1,droparound:{height:0,width:0}},f=function(e,t,n){var i,r,l,o,a=e.x,s=e.y,u=e.width,c=e.height,d=e.viewportX,h=t.width,p=t.height,f=n.height,m=n.width,g=n.preferredHorizontalOrientation,v=n.preferredVerticalOrientation,e=s<p/2,p=a<h/2;return"down"===v&&(e=!0),"up"===v&&(e=!1),"right"===g&&(p=!0),n.ignoreBoundary||(d<f&&(e=!0),s+c+f<d&&(e=!1)),u=u*n.anchorPivotHoriz,s=e?(o=(l=s+c)+f,{vertical:"down"}):(l=s-f,o=s,{vertical:"up"}),(p="left"===g?!1:p)?(i=a+u-n.arrowOffset-n.arrowWidth/2,i=Math.min(i,h-t.paddingHorizontal-m),r=(i=Math.max(i,t.paddingHorizontal))+m,s.horizontal="right"):(r=a+u+n.arrowOffset+n.arrowWidth/2,r=Math.max(r,m+t.paddingHorizontal),i=(r=Math.min(r,h-t.paddingHorizontal))-m,s.horizontal="left"),{coords:[i,r,l,o],orientation:s}};l.namespace("Views").FluidDroparound=l.FlickrView.create(this.name,l.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){var e,t=this.get("width");return this.get("textMessage")||this.get("htmlMessage")||this.get("subview")||this.get("menuItems")?(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.get("keepInsideViewportHoriz")&&(e=this.appContext.viewportData.getWidth()-2*this.get("viewportPaddingHoriz"),t=Math.min(this.get("width"),e)),this.setContainerWithTemplate("fluid-droparound",{textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:t,staticHeight:this.get("height"),maxHeight:this.get("maxHeight"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent"),contentPadding:this.get("contentPadding")}),this.overlayId=this.appContext.overlayManager.push({view:this,overlayClassList:this.get("overlayClassList"),hideOverlay:this.get("hideModalOverlay"),dismissOnOverlayClick:this.get("dismissOnOverlayClick"),ignorePointerEvents:this.get("invisibleOverlay"),dismissOnEsc:!0,disableBodyScroll:!1}),this.appendAndPosition()):n.warn("requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this},activate:function(){var t=this.get("container"),n=this;this.registerEventHandler(l.on("droparound:reposition",l.bind(this.anchorPositionChange,this))),this.registerEventHandler(l.on("history:change",function(e){"popstate"===e.src&&e.prevVal&&e.newVal&&(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)||n.close(e)})),this.get("useDefaultKeyboardNavigation")&&l.use("keyboard-manager",function(e){n.registerEventHandler(t.on("keydown",n.keyboardNavigation,n))});var e=this.get("anchorElement"),i=this.get("keyboardAnchorElement");return(i=i||(e.hasAttribute("aria-haspopup")?e:e.ancestor("[aria-haspopup=true]")))&&(this.set("keyboardAnchorElement",i),this.get("keyboardAnchorElement").setAttribute("aria-expanded","true"),this.registerEventHandler(i.on("key",this.enterDroparound,"down:40",this))),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(t.one(p.css.menuContent).delegate(["click","keydown"],function(e){"click"!==e.type&&13!==e.keyCode||this.onMenuItemClick(e)}.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.get("preventPageScrollOnScroll")&&this.registerEventHandler(t.on("mousewheel",this.preventPageScroll.bind(this))),this.fire("activated"),this},enterDroparound:function(e){var t=this.get("container").one("ul li");t&&(e.preventDefault(),t.focus())},keyboardNavigation:function(e){var t=e.keyCode,n=38===t||9===t&&e.shiftKey,i=40===t||9===t&&!e.shiftKey,t=e.target.ancestor("li",!0);this.appContext.getKeyboardManager().inputHasFocus()||(n&&t&&t.previous("li")?(e.preventDefault(),this.focusOnPreviousItem(e)):i?(e.preventDefault(),t&&t.next("li")&&this.focusOnNextItem(e)):n&&(e.preventDefault(),(e=this.get("keyboardAnchorElement"))&&(this.close(),e.focus(),e.removeClass("no-outline"))))},focusOnPreviousItem:function(e){e=e.target.ancestor("li",!0);!e||(e=e.previous("li"))&&(e.one("a")?e.one("a"):e).focus()},focusOnNextItem:function(e){e=e.target.ancestor("li",!0);!e||(e=e.next("li"))&&(e.one("a")?e.one("a"):e).focus()},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(p.css.droparoundContainer):null},loadSubview:function(){var e,t,n=!1,i=this.get("subview"),r=this;(e=this.get("container").one(p.css.subviewContent)).addClass("loading"),e.appendChild(l.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),t=setTimeout(function(){n=!0},40),this.loading=!0,i.appContext=r.appContext,i.set("isActiveViewAgnostic",!0),i.initialize().then(function(e){clearTimeout(t),n&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),r.onSubviewInitialized(e)})},onSubviewInitialized:function(e){var t=this,n=this.get("container").one(p.css.subviewContent);this.loading&&(this.loading=!1,n.removeClass("loading"),n.one(".flickr-balls").remove(!0),n.appendChild(e.get("container")),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&t.fire.apply(t,e.details)}),e.normalizedActivate(),e.recursivelyActivateSubviews(),t.appendAndPosition(),t.registerEventHandler(t.get("subview").on("actionClick",l.bind(t.handleAction,t))),t.registerEventHandler(t.get("subview").on("readyToClose",l.bind(t.close,t))))},onMenuItemClick:function(e){var t,n,i;(t=e.target.ancestor("li",!0))&&-1!==(n=this.get("container").one(p.css.menuContent).all("li").indexOf(t))&&(i=this.get("menuItems")[n],this.get("multiSelect")&&(i.selected=!i.selected,t.toggleClass("selected")),this.fire("selected",{menuItemIndex:n,menuItem:i,origEvent:e}))},appendAndPosition:function(e){l.one(p.css.destinationContainer);var t=this.get("container").one(p.css.droparoundContainer);this.appContext.overlayManager.placeViewAfterOverlay(this.overlayId),i.droparound.width=this.get("width")||t.getComputedStyle("width"),i.droparound.height=this.get("height")||t.getComputedStyle("height"),this.repositionToElement(e||this.get("anchorElement"))},updateTextMessage:function(e){e&&""!==e&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&""!==e&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(l.globalEvents.subscribe("window:resize",function(e){l.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(e)}))},observePageScroll:function(){var e=YUI.Env.isServer?0:l.config.win.pageYOffset;this.get("startingScrollPoint")||this.set("startingScrollPoint",e),this.registerEventHandler(l.globalEvents.subscribe("window:scroll",this.handleScroll.bind(this)))},handleScroll:function(e){var t,n=this.get("startingScrollPoint");n?(t=l.config.win.pageYOffset,(n+this.get("closeOnScrollDistance")<t||n-this.get("closeOnScrollDistance")>t)&&this.handleClose(e)):this.set("startingScrollPoint",l.config.win.pageYOffset)},repositionToElement:function(e,t){var n=this.get("container"),i=this.get("positionFixed"),r=n.one(".droparound"),l=this.get("showDropArrow")?r.one(p.css.droparrow):void 0,o=r.one(p.css.droparoundContent),a=(o.get("offsetWidth"),o.get("offsetHeight"),l?l.get("offsetHeight"):0),s=l?l.get("offsetWidth"):0,u=e.getXY(),c=u[0],d=u[1],n=e.getDOMNode().getBoundingClientRect(),o=n.width;this.get("keepInsideViewportHoriz")&&(u=this.appContext.viewportData.getWidth()-2*this.get("viewportPaddingHoriz"),(e=this.get("width"))?r.setStyles({width:e}):r.setStyles({width:"auto"}),r.getDOMNode().getBoundingClientRect().width>u&&r.setStyles({width:u})),s=o*(o={width:r.get("offsetWidth"),height:r.get("offsetHeight"),arrowOffset:this.get("arrowOffset"),anchorPivotHoriz:this.get("anchorPivotHoriz"),arrowWidth:s}).anchorPivotHoriz,o.ignoreBoundary=!!t,this.get("preferLeft")&&(o.preferredHorizontalOrientation="left"),this.get("preferRight")&&(o.preferredHorizontalOrientation="right"),this.get("preferTop")&&(o.preferredVerticalOrientation="up"),this.get("preferBottom")&&(o.preferredVerticalOrientation="down"),this.anchorCoords&&(0===this.x||0===this.y)||(this.anchorCoords={x:i?n.left:c,y:i?n.top:d,width:n.width,height:n.height,viewportX:n.top||0});var h,n=f(this.anchorCoords,{width:this.appContext.viewportData.getWidth(),height:this.appContext.viewportData.getHeight(),paddingHorizontal:this.get("viewportPaddingHoriz")},o);"down"===n.orientation.vertical?n.coords[2]+=a-this.get("anchorOffsetVertical"):n.coords[2]-=a+this.get("anchorOffsetVertical"),r.setStyles({left:n.coords[0],top:n.coords[2]}),l&&(l.removeClass("down").removeClass("up").removeClass("left").removeClass("right").addClass(n.orientation.vertical),"left"===n.orientation.horizontal?(r=this.appContext.viewportData.getWidth()-this.anchorCoords.x,h=this.appContext.viewportData.getWidth()-(o.width+n.coords[0]),l.setStyles({right:r-s-l.get("clientWidth")/2-h,left:"auto"})):(h=this.anchorCoords.x,n=n.coords[0],l.setStyles({left:h+s-l.get("clientWidth")/2-n})))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var e=this.get("container");this.loading=!1,this.isClosed=!0;var t=this.get("keyboardAnchorElement");t&&(t.setAttribute("aria-expanded","false"),t.focus(),t.addClass("no-outline")),this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),e&&e.remove(!0),this.appContext.overlayManager.pop(this.overlayId)},destructor:function(){this.detachAll()},freeze:function(){l.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){l.one("body").setStyles({overflow:"visible"})},preventPageScroll:function(e){var t,n,i=this.get("container"),r=e.target,l=!1;if(i.contains(r)){for(;r!==i&&!l;)"hidden"===r.getStyle("overflow")||"visible"===r.getStyle("overflow")||r.get("offsetHeight")>=r.get("scrollHeight")?r=r.get("parentNode"):l=!0;l&&(t=e.wheelDelta<0,((n=r.getDOMNode()).scrollTop<=0&&!t||n.scrollTop+n.offsetHeight>=n.scrollHeight&&t)&&e.preventDefault())}}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},dismissOnActionClick:{value:!0,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},hideModalOverlay:{value:!0,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},invisibleOverlay:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},height:{value:0,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},maxHeight:{value:0,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(e,t){return l.AttributeHelpers.validateString(e)},setter:function(e,t){return l.AttributeHelpers.coerceString(e)}},anchorElement:{value:null},keyboardAnchorElement:{value:null},useDefaultKeyboardNavigation:{value:!0},showDropArrow:{value:!0,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},anchorOffsetVertical:{value:0,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},arrowOffset:{value:8,validator:function(e,t){return l.AttributeHelpers.validateFloat(e)},setter:function(e,t){return l.AttributeHelpers.coerceFloat(e)}},keepInsideViewportHoriz:{value:!0,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},viewportPaddingHoriz:{value:2,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},anchorPivotHoriz:{value:.5,validator:function(e,t){return l.AttributeHelpers.validateFloat(e)},setter:function(e,t){return l.AttributeHelpers.coerceFloat(e)}},contentPadding:{value:void 0,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},minVerticalSpace:{value:60,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},minHorizontalSpace:{value:60,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},dropdownArrowWidth:{value:21,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},observePageResize:{value:!0,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},preferLeft:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},preferRight:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},preferTop:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},preferBottom:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},positionFixed:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},closeOnScroll:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},closeOnScrollDistance:{value:40,validator:function(e,t){return l.AttributeHelpers.validateInteger(e)},setter:function(e,t){return l.AttributeHelpers.coerceInteger(e)}},closeOnResize:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},overlayClassList:{value:"",validator:function(e,t){return l.AttributeHelpers.validateString(e)},setter:function(e,t){return l.AttributeHelpers.coerceString(e)}},forceLeft:{value:null},forceRight:{value:null},autoSizeToContent:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},horizCenterToAnchor:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},multiSelect:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}},preventPageScrollOnScroll:{value:!1,validator:function(e,t){return l.AttributeHelpers.validateBoolean(e)},setter:function(e,t){return l.AttributeHelpers.coerceBoolean(e)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-droparound","hermes-template-flickr-balls","attribute-helpers"],optionalRequires:["fluid"]}),YUI.add("hermes-template-notifications",function(n,e){var i=n.Template.Handlebars.revive({1:function(e,t,n,i,r){return"\t\t<li>\n\t\t\t"+e.escapeExpression(e.lambda(t,t))+"\n\t\t</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var l,o=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,s="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="notifications-container" style="width: '+u(typeof(l=null!=(l=c(n,"width")||(null!=t?c(t,"width"):t))?l:a)==s?l.call(o,{name:"width",hash:{},data:r,loc:{start:{line:1,column:51},end:{line:1,column:60}}}):l)+"; height: "+u(typeof(l=null!=(l=c(n,"height")||(null!=t?c(t,"height"):t))?l:a)==s?l.call(o,{name:"height",hash:{},data:r,loc:{start:{line:1,column:70},end:{line:1,column:80}}}):l)+"; overflow-x: "+u(typeof(l=null!=(l=c(n,"overflowX")||(null!=t?c(t,"overflowX"):t))?l:a)==s?l.call(o,{name:"overflowX",hash:{},data:r,loc:{start:{line:1,column:94},end:{line:1,column:107}}}):l)+"; overflow-y: "+u(typeof(l=null!=(l=c(n,"overflowY")||(null!=t?c(t,"overflowY"):t))?l:a)==s?l.call(o,{name:"overflowY",hash:{},data:r,loc:{start:{line:1,column:121},end:{line:1,column:134}}}):l)+';">\n\t<header>\n\t\t<div class="notifications-header-container">\n\t\t\t<h2>'+u((c(n,"intlMessage")||t&&c(t,"intlMessage")||a).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:r,loc:{start:{line:4,column:7},end:{line:4,column:61}}}))+'</h2>\n\t\t</div>\n\t</header>\n\t<ul class="notifications-list" style="max-height: '+u(typeof(l=null!=(l=c(n,"listHeight")||(null!=t?c(t,"listHeight"):t))?l:a)==s?l.call(o,{name:"listHeight",hash:{},data:r,loc:{start:{line:7,column:51},end:{line:7,column:65}}}):l)+';">\n\t\t<li class="notifications-empty-state hidden">\n\t\t\t'+u((c(n,"intlMessage")||t&&c(t,"intlMessage")||a).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_NOTHING_HERE"},data:r,loc:{start:{line:9,column:3},end:{line:9,column:62}}}))+"\n\t\t</li>\n"+(null!=(e=c(n,"each").call(o,null!=t?c(t,"notifications"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:2},end:{line:15,column:11}}}))?e:"")+'\t</ul>\n\n\t<a href="/activity" class="view-all" data-link-id="legacy_notifications_view_recent_activity_link">'+u((c(n,"intlMessage")||t&&c(t,"intlMessage")||a).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_VIEW_RECENT_ACTIVITY"},data:r,loc:{start:{line:18,column:100},end:{line:18,column:167}}}))+"</a>\n</div>\n"},useData:!0}),r={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(r[e]=t)}),n.Template.register("hermes/notifications",function(e,t){return(t=t||{}).partials=t.partials?n.merge(r,t.partials):r,i(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]}),YUI.add("notification-models",function(n){function t(e){t.superclass.constructor.call(this,e)}n.Models[this.name]=t,n.extend(t,n.FlickrModelRegistry,{name:this.name,attributes:{id:{},isSeen:{validator:function(e){return n.AttributeHelpers.validateBoolean(e)},setter:function(e){return n.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},isMuted:{validator:function(e){return n.AttributeHelpers.validateBoolean(e)},setter:function(e){return n.AttributeHelpers.coerceBoolean(e)},defaultValue:!1},type:{validator:function(e,t){return n.AttributeHelpers.validateString(e)},setter:function(e){return n.AttributeHelpers.coerceString(e)}},timestamp:{validator:function(e,t){return n.AttributeHelpers.validateInteger(e)},setter:function(e){return n.AttributeHelpers.coerceInteger(e)}},activityData:{},eventDataList:[],userModels:[],activityEntityModels:{},eventEntityModelsList:[]}})},"@VERSION@",{requires:["flickr-model-registry"]}),YUI.add("contact-models",function(n){"use strict";function t(e){t.superclass.constructor.call(this,e)}n.Models[this.name]=t,n.extend(t,n.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(e,t){return n.AttributeHelpers.validateString(e)},setter:function(e){return n.AttributeHelpers.coerceString(e)||void 0},defaultFn:function(e){return e}},username:{validator:function(e,t){return n.AttributeHelpers.validateString(e)},setter:function(e){return n.AttributeHelpers.coerceString(e)}},realname:{validator:function(e,t){return n.AttributeHelpers.validateString(e)},setter:function(e){return n.AttributeHelpers.coerceString(e)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},isPro:{defaultValue:!1,setter:function(e){return n.AttributeHelpers.coerceBoolean(e)}},proBadge:{defaultValue:"standard",setter:function(e){return n.AttributeHelpers.coerceString(e)}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){return"/photos/"+(this.getValue(e,"pathAlias")||e)}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){return"/people/"+(this.getValue(e,"pathAlias")||e)+"/contacts"}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]}),YUI.add("notification-OLD-models",function(t){function n(e){n.superclass.constructor.call(this,e)}t.Models[this.name]=n,t.extend(n,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ListFetchers["flickr-activity-recentByType"].run(e,this.appContext)}},attributes:{id:{setter:function(e){return e||this.appContext.getViewer().nsid}},seen:{},objectType:{},object:{isModel:!0},events:{isListProxy:!0},isMuted:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-activity-recentByType-fetcher"]}),YUI.add("notification-group-discussion-models",function(r){function t(e){t.superclass.constructor.call(this,e)}r.Models[this.name]=t,r.extend(t,r.FlickrModelRegistry,{name:this.name,parseDiscussionModel:function(e,t,n,i){return{id:e,pathAlias:t,title:n.name,replyCount:n.replies,groupID:n.group_id,groupName:n.groupName,iconUrls:r.APIHelper.response.removeProtocolFromURL(n.iconurls),coverPhotoUrls:r.APIHelper.response.removeProtocolFromURL(n.coverphoto_url),group:i}},attributes:{id:{},pathAlias:{},title:{},replyCount:{},groupID:{},groupName:{},iconUrls:{},coverPhotoUrls:{},url:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")+"/discuss/"+e}},groupUrl:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")}},group:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry"]});
