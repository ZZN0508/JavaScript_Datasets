!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r="__STORAGE_TEST_KEY__",c=(new Date).getTime(),u=c+String(Math.random()).substring(1),i=Object.prototype.hasOwnProperty;function s(e){var t=e?window.sessionStorage:window.localStorage;try{return t.setItem(r,"1"),t.removeItem(r),1}catch(e){return}}var o=(l.prototype.log=function(e){(this.regExp&&!this.regExp.exec(e.msg)?this.ignored:this.queue).push(e),this.list.push(e);var t=this;this.options.useTimer&&(clearTimeout(this.timer),this.timer=window.setTimeout(function(){return t.sendData()},this.options.timeLimit))},l.prototype.sendData=function(){if(this.options.sendData&&0!==this.queue.length&&this.options.url){for(var e=(s=this.options.url,"withCredentials"in(t=new XMLHttpRequest)||"undefined"==typeof XDomainRequest?(t.open("POST",s),t.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),t):((t=new XDomainRequest).open("POST",s),t)),t="cpkg_none=",n=[],r=0,o=this.queue;r<o.length;r++){var i=o[r];this.errorIsCached(i)||(this.options.beforeSend&&"function"==typeof this.options.beforeSend&&this.options.beforeSend(i),i={acc:1164,aid:1,ckp:null,cks:null,cp:a({},i,{group:this.options.group,sessionId:u,shisaVersion:"1.1.6",start:c,page:window.location.href}),etype:"pv"},n.push(i))}if(0!==n.length){t+=JSON.stringify(n);try{e.send(t),this.queue=[]}catch(e){}}else this.queue=[]}var s,t},l.prototype.errorIsCached=function(e){if(this.options.cacheErrors&&s(!1)){var t="shisa:"+window.location.href+"_"+(e.msg||"")+"_"+(e.lineNumber||"")+"_"+(e.column||"")+"_"+(e.stack&&"string"==typeof e.stack?e.stack.split("\n").slice(0,2).join("\n"):"");if(localStorage.getItem(t))return!0;if(localStorage.length>=this.options.maxCachedErrors){var n=0,r=void 0;for(r in localStorage)i.call(localStorage,r)&&0===r.indexOf("shisa:")&&n++;if(n>=this.options.maxCachedErrors)return!1}var o={d:!0,t:Math.floor((new Date).getTime()/1e3)+this.options.cacheTime};try{localStorage.setItem(t,JSON.stringify(o))}catch(e){}}return!1},l.prototype.purgeCache=function(){if(s(!1)){var e,t=void 0,n=Math.floor((new Date).getTime()/1e3);for(t in localStorage)!i.call(localStorage,t)||0!==t.indexOf("shisa:")||(e=JSON.parse(localStorage.getItem(t))).t&&n>e.t&&localStorage.removeItem(t)}},l);function l(e){var t;this.options=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e}({sendData:!0,useTimer:!0,hideErrors:!1,cacheErrors:!0,sendUnknown:!0,maxCachedErrors:100,cacheTime:604800,timeLimit:5e3,sendPercentage:.5,url:"//rat.rakuten.co.jp/"},e),(100*Math.random()>this.options.sendPercentage||this.options.sendRange&&(t=this.options.sendRange,e=function(){var e,t,n,r,o=document.cookie&&document.cookie.split(";");if(!o)return null;for(e=0;e<o.length;e++)if(-1!==(t=(n=o[e]).indexOf("="))&&"Rt"===window.decodeURIComponent(n.substr(0,t)).replace(/^\s+/g,"")){try{r=window.decodeURIComponent(n.substr(t+1,n.length-t-1)),r=window.JSON.parse(r)}catch(e){}return r}return null}(),e=parseInt(e?e.substr(e.length-3):0,16),t=t.split("-"),!(e>=parseInt(t[0],16)&&e<=parseInt(t[1],16))))&&(this.options.sendData=!1),this.options.regExp&&(this.regExp=new RegExp(this.options.regExp,this.options.regExpFlags)),this.queue=[],this.list=[],this.ignored=[],this.purgeCache=this.purgeCache.bind(this),setTimeout(this.purgeCache,3e4)}t.Shisa=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),s="script-shisa",a=/(^data-)/,t=document.documentMode;function o(r,o){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.apply(null,e);return"function"==typeof r&&r.apply(null,e),n}}"undefined"==typeof window||t<9||(n=function(){function e(e,t){return void 0!==e?!("false"===e||"0"===e):t}for(var t,n=(document.currentScript||document.getElementById(s)).attributes,r={},o={},i=0;i<n.length;i++)r[function(e){for(var t=(e=e.replace(a,"")).indexOf("-");-1!==t;)t=(e=e.substr(0,t)+e.charAt(t+1).toUpperCase()+e.substr(t+2)).indexOf("-");return e}((t=n[i]).name)]=t.value;return o.sendData=e(r.sendData,!0),o.hideErrors=e(r.hideErrors,!1),o.useTimer=e(r.useTimer,!0),o.cacheErrors=e(r.cacheErrors,!0),o.sendUnknown=e(r.sendUnknown,!0),o.exportClass=e(r.exportClass,!1),r.sendPercentage&&(o.sendPercentage=parseFloat(r.sendPercentage)),r.timeLimit&&(o.timeLimit=parseFloat(r.timeLimit)),r.maxCachedErrors&&(o.maxCachedErrors=parseFloat(r.maxCachedErrors)),r.cacheTime&&(o.cacheTime=parseFloat(r.cacheTime)),o}(),i=t=new r.Shisa(n),window.onbeforeunload=o(window.onbeforeunload,function(){i.sendData()}),window.onerror=o(window.onerror,function(e,t,n,r,o){return!i.options.sendUnknown||t&&n&&0!==n?i.log({type:"Uncaught Exception",msg:e,fileUrl:t,lineNumber:n,column:r,stack:o.stack}):i.log({type:"Uncaught Exception",msg:"There are unknown errors on this page, please check it in browser console"}),i.options.hideErrors}),window.onunhandledrejection=o(window.onunhandledrejection,function(e){return i.log({type:"Unhandled Rejection",msg:e.reason?e.reason.message:"",stack:e.reason}),i.options.hideErrors}),n.globalVar&&(window[n.globalVar]=t),n.exportClass&&(window.Shisa=r.Shisa))}]);
