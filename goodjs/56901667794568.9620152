(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[5776],{53104:function(e,t,i){"use strict";i.r(t),i.d(t,{MasterPageTpaPropsCacheSymbol:function(){return y.lP},PinnedExternalIdStoreSymbol:function(){return y.Aq},TpaContextMappingSymbol:function(){return y.ex},TpaDataCapsuleSymbol:function(){return y.yA},TpaHandlersManagerSymbol:function(){return y.XA},TpaSectionSymbol:function(){return y.B_},TpaSrcBuilderSymbol:function(){return y.RN},TpaSrcUtilitySymbol:function(){return y.NQ},name:function(){return y.u2},site:function(){return N}});function I(e){if(e.data)try{return JSON.parse(e.data)}catch(e){}return{}}var n=i(95793),y=i(20140),h=i(31191),r=i(43757),o=i(56405),a=i(61049),u=i(5096),c=i(58629),l=i(26513),p=i(55048),s=i(16684),P=i.n(s),t=i(29203),s=i(46466),d=(0,r.ff)([(0,r.t6)(a.R9,y.u2)],function(g){return{getQueryParams:function(e){var t=e.compId,n=e.pageId,r=e.tpaCompData,o=e.options.extraQueryParams,a=g.siteRevision,i=g.editorOrSite,u=g.deviceType,c=g.locale,l=g.tpaDebugParams,p=g.timeZone,s=g.regionalLanguage,d=r.templateId,f=r.width,e=r.height,r=r.isResponsive;return(0,h.pi)((0,h.pi)({pageId:n,compId:d||t,viewerCompId:t,siteRevision:""+a,viewMode:i,deviceType:u,locale:c,tz:p,regionalLanguage:s,width:!r&&P().isNumber(f)?""+f:null,height:!r&&P().isNumber(e)?""+e:null},l),o)}}}),f=(0,r.ff)([],function(){return{getQueryParams:function(e){return{externalId:e.tpaCompData.externalId}}}}),g=(0,r.ff)([(0,r.t6)(a.R9,y.u2),o.X],function(e,n){var r=e.widgetsClientSpecMapData;return{getQueryParams:function(e){var t=e.tpaCompData,e=e.options,e=(r[t.widgetId]||{}).appDefinitionId||e.appDefinitionId||"";return{instance:n.getAppInstanceByAppDefId(e)}}}}),m=(0,r.ff)([(0,r.t6)(a.R9,y.u2),u.ZQ],function(r,o){return{getQueryParams:function(){var e,t=r.requestUrl,n=r.extras,t=new URL((null===(e=null==o?void 0:o.location)||void 0===e?void 0:e.href)||t);return{currency:n.currency,currentCurrency:t.searchParams.get("currency")||n.currency}}}}),v=(0,r.ff)([c.s],function(e){var t=e.viewerSessionId;return{getQueryParams:function(){return{vsi:t}}}}),R=(0,r.ff)([t.e],function(t){return{getQueryParams:function(){var e;return{"consent-policy":(e=t.getCurrentConsentPolicy()).defaultPolicy&&P().every(e.policy)||!t._getConsentPolicyHeader()["consent-policy"]?void 0:decodeURIComponent(t._getConsentPolicyHeader()["consent-policy"])}}}}),C=(0,r.ff)([s.p],function(e){return{getQueryParams:function(){return{commonConfig:JSON.stringify(e.getCommonConfigForUrl())}}}}),w=(0,r.ff)([l.jj],function(t){return{getQueryParams:function(){var e=null===(e=null===(e=t.getCurrentRouteInfo())||void 0===e?void 0:e.dynamicRouteData)||void 0===e?void 0:e.publicData;return{routerData:e?JSON.stringify(e):null}}}}),S=(0,r.ff)([(0,r.t6)(a.R9,y.u2),p.QZ,u.ZQ],function(s,d,f){return{getQueryParams:function(e){var t=e.compId,n=e.tpaCompData,r=e.options,o=s.widgetsClientSpecMapData,a=s.appSectionParams,i=s.isMobileView,u=s.requestUrl,c=s.viewMode,l=s.externalBaseUrl,p={target:null,"section-url":null};return n.widgetId&&(o=(e=o[n.widgetId]).widgetUrl,e=e.mobileUrl,o=i&&e||o,t=((null===(t=d.get(t))||void 0===t?void 0:t.componentType)||"").toLowerCase().endsWith("section"),n.isSection&&t&&("site"===c?(p["section-url"]=l+"/"+r.tpaInnerRouteConfig.tpaPageUri+"/",p.target="_top"):(p["section-url"]=o,p.target="_self"))),(0,h.pi)((0,h.pi)({},function(){if(f){var e=new URL((null===(e=null==f?void 0:f.location)||void 0===e?void 0:e.href)||u).searchParams.get("appSectionParams");return JSON.parse(decodeURIComponent(e||"{}"))||{}}return a}()),p)}}}),x=(0,r.ff)([(0,r.t6)(a.R9,y.u2)],function(e){function t(e,t,n){return a[n]}function n(e,t,n,r){return e.namespace=a[r],e.scope=o,e}var o=e.metaSiteId,a={},r=P().once(function(){return(0,h.mG)(void 0,void 0,void 0,function(){return(0,h.Jh)(this,function(e){switch(e.label){case 0:return[4,i.e(6721).then(i.bind(i,36721))];case 1:return(new(e.sent().FrameStorageListener)).start(t,n),[2]}})})});return{registerToDataCapsule:function(e,t){r(),a[e]=t},unregister:function(e){delete a[e]}}}),D=i(59032),T=(0,r.ff)([],function(){var o={},n={};return{registerTpasForContext:function(e,t){var n=e.contextId,r=e.pageId;t.forEach(function(e){o[e]={contextId:n,pageId:r}})},getTpaComponentPageInfo:function(e){return o[e]},registerTpaTemplateId:function(e,t){n[e]=t},getTpaComponentIdFromTemplate:function(e){return n[e]}}}),b=i(65070),U=(0,r.ff)([(0,r.t6)(a.R9,y.u2),u.ZQ,(0,r.fi)(n.R)],function(e,d,f){var g=e.widgetsClientSpecMapData,m=e.externalBaseUrl,v=e.requestUrl;return{buildSrc:function(e,t,n,r,o){void 0===o&&(o={});var a,i,u,c=g[n.widgetId]||{},l=P().merge({tpaInnerRouteConfig:null,extraQueryParams:{},appDefinitionId:""},o),p={compId:e,pageId:t,tpaCompData:n,options:l},s=P().assign.apply(P(),(0,h.ev)([{}],(0,h.CR)(f.map(function(e){return e.getQueryParams(p)})))),r=l.tpaInnerRouteConfig?(i=r,o=l.tpaInnerRouteConfig,t=Boolean(o.tpaPageUri&&!P().isNil(c.applicationId)&&c.applicationId===o.tpaApplicationId),n=(0,h.CR)(((null==d?void 0:d.location.href)||v).replace(m,"").split("?"),1)[0],l=(0,h.CR)(decodeURIComponent(n).split("?"),2),n=l[0],l=l[1],(o=t&&(0,b._)(n,o.tpaPageUri))&&null!==(u=c.appPage)&&void 0!==u&&u.defaultPage&&o.unshift(c.appPage.defaultPage),o?function(e,t,n){if(0===e.length)return t;var e=e.join("/"),r=new URL(t);return r.pathname+="/"+e,n&&new URLSearchParams(n).forEach(function(e,t){return r.searchParams.append(t,e)}),r.href}(o,i,l):i):r;try{a=new URL(r)}catch(e){return""}return P().entries(s).forEach(function(e){var t=(0,h.CR)(e,2),e=t[0],t=t[1];P().isNil(t)||a.searchParams.set(e,t)}),a.href}}}),Q=(0,r.ff)([],function(){var n={},r={};return{registerTpaSection:function(e,t){n[e]=t,r[t.appDefinitionId]=e},unregisterTpaSection:function(e){var t=n[e],t=null==t?void 0:t.appDefinitionId;delete n[e],t&&delete r[t]},getTpaSectionByAppDefinitionId:function(e){e=r[e];return n[e]}}}),t=i(24263),s=i(97880),a=i(37793),_=["getWixUpgradeUrl","stylesReady","getViewModeInternal","setHelpArticle"],M=(0,r.ff)([s.D,t._w,y.ex,p.QZ,(0,r.jt)(u.EE),(0,r.jt)(a.K)],function(e,d,f,g,m,v){return{appDidMount:function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!!(e.source&&((e=I(e))&&["TPA","TPA2"].includes(e.intent)))},handleEvent:function(s){return(0,h.mG)(this,void 0,void 0,function(){var r,o,a,i,u,c,l,p;return(0,h.Jh)(this,function(e){switch(e.label){case 0:return r=I(s),o=r.type,a=r.callId,_.includes(o)?[2]:(i=function(){var e=r.compId;if(e){var t=f.getTpaComponentPageInfo(e);if(!t||!t.contextId){e=g.getContextIdOfCompId(e);if(e)return{contextId:e,pageId:e}}return t}}(),u=i&&i.contextId?i.contextId:null,p=f.getTpaComponentIdFromTemplate(r.compId),c=null!=p?p:r.compId,l=(0,h.pi)((0,h.pi)({},r),{compId:c}),p=s.origin,v&&v.tpa.addMessage({message:l,compId:c,contextId:u,origin:p}),u?[4,(t=i.contextId,n=i.pageId,(0,h.mG)(void 0,void 0,Promise,function(){return(0,h.Jh)(this,function(e){switch(e.label){case 0:return[4,d(t,n)];case 1:return[2,e.sent().getAllImplementersOnPageOf(y.XA)[0]]}})}))]:(console.error("TPA handler message caller does not belong to any page",{type:o,callId:a,compId:c}),[2]));case 1:return e.sent().handleMessage({source:s.source,origin:p,message:l}).catch(function(e){console.error("HandleTpaMessageError",o,u,c,e),null==m||m.captureError(e,{tags:{feature:"tpa",handlerName:o},extra:{handlerName:o,compId:c}})}),[2]}var t,n})})}})}}}),A=(0,r.ff)([p.xP,l.jj],function(n,r){var o={};return{cacheProps:function(e,t){t=P().omitBy(t||n.get(e),P().isFunction);o[e]=P().isEmpty(t)?null:t},getCachedProps:function(e){var t=o[e];if(t)return P().isEqual(null===(e=null===(e=r.getCurrentRouteInfo())||void 0===e?void 0:e.dynamicRouteData)||void 0===e?void 0:e.publicData,null===(e=null===(e=r.getPreviousRouterInfo())||void 0===e?void 0:e.dynamicRouteData)||void 0===e?void 0:e.publicData)||delete t.src,t}}}),N=function(e){var t;(t=e)(y.lP).to(A),t(D.j.AppDidMountHandler).to(M),t(y.ex).to(T),t(y.RN).to(U),t(y.B_).to(Q),t(n.R).to(d),t(n.R).to(g),t(n.R).to(m),t(n.R).to(C),t(n.R).to(w),t(n.R).to(S),e(n.R).to(R),e(n.R).to(f),e(n.R).to(v),e(y.yA).to(x)}},65070:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(31191),o=function(e,t){var n=e.split("/"),e=n.indexOf(t||"");return e<0||n[e]!==t?null:(0,r.CR)(n.splice(e)).slice(1)}}}]);
