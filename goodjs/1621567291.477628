(window.shark_room_jsonp=window.shark_room_jsonp||[]).push([["globalAct","Drag_dedfcdf","Rotation_d7ba7c6"],{"00d1b0":function(e,t,r){e.exports=r("2d6146")("368f5")},"05936d":function(e,t,r){"use strict";var a=r("7ca7dc"),n=r("bc59ca"),i=a.default.combineEpicsClass;t.default=i(n.default)},"074d14":function(e,t,r){e.exports=r("d1db8c")("bcfe5")},"0f636f":function(e,t,r){e.exports=r("5f575e")("23661")},"104af8":function(e,t,r){e.exports=r("d1db8c")("b2b3f")},"109ac5":function(e,t,r){},"12160e":function(e,t){e.exports="https://shark2.douyucdn.cn/front-publish/live-master/assets/images/avatar_5007366.png"},"1a22b7":function(e,t,r){e.exports=r("999443")("8af19")},"1c9414":function(e,t,r){},"26c4ee":function(e,t,r){"use strict";r.r(t);r("528016");var a=r("7ca7dc"),n=new(r("bd834d").default);a.default.render(n,document.getElementById("js-room-activity"))},"2c4a1f":function(e,t,r){e.exports=r("5f575e")("4394f")},"2d6146":function(e,t){e.exports=sdkd479d126aaa128c11834},"31031f":function(e,t,r){e.exports=r("d1db8c")("cfb79")},332271:function(e,t,r){e.exports=r("5f575e")("36016")},"368e3c":function(e,t,r){"use strict";var a=r("1a22b7"),n=r.n(a),i=r("7912b6"),o=r("12160e"),c=r.n(o),l=(r("c43b68"),"/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/lastHourRank/LastHourRank.js");function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}var s=function(e){function LastHourRank(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LastHourRank),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return _inherits(LastHourRank,e),LastHourRank.prototype.render=function render(){if(!this.props.hasChampionInfo)return null;var e=this.props,t=e.title,r=void 0===t?"--":t,a=e.championAvatar,o=e.championUserAvatar,s=e.curRid,u=e.championRid,f=e.championnn,p=e.championunn;return n.a.createElement(i.DyLink,{className:"GlobalActBar-lastHour-wrap",rid:+u,curRid:+s,__source:{fileName:l,lineNumber:16},__self:this},n.a.createElement("div",{className:"GlobalActBar-lastHour-avatar",__source:{fileName:l,lineNumber:17},__self:this},n.a.createElement("div",{className:"GlobalActBar-avatar",__source:{fileName:l,lineNumber:18},__self:this},n.a.createElement("img",{src:o||c.a,alt:"",__source:{fileName:l,lineNumber:19},__self:this})),n.a.createElement("div",{className:"GlobalActBar-avatar",__source:{fileName:l,lineNumber:21},__self:this},n.a.createElement("img",{src:a||c.a,alt:"",__source:{fileName:l,lineNumber:22},__self:this}))),n.a.createElement("div",{className:"GlobalActBar-lastHour",__source:{fileName:l,lineNumber:25},__self:this},n.a.createElement("div",{className:"GlobalActBar-fw--bold GlobalActBar-fc--fff",__source:{fileName:l,lineNumber:26},__self:this},r),n.a.createElement("div",{className:"GlobalActBar-name GlobalActBar-lastHour-userName GlobalActBar-fc--yellow",title:p,__source:{fileName:l,lineNumber:27},__self:this},p),n.a.createElement("div",{className:"GlobalActBar-name GlobalActBar-lastHour-anchorName GlobalActBar-fc--yellow",title:f,__source:{fileName:l,lineNumber:28},__self:this},f)))},LastHourRank}(n.a.Component);t.default=s},"3b6ec9":function(e,t,r){e.exports=r("999443")("63f14")},"3fc28c":function(e,t,r){"use strict";var a,n,i,o,c,l=r("1a22b7"),s=r.n(l),u=r("7ca7dc"),f=r("b067ea"),p=r("76dfa9"),m=r("332271"),b=r("89dc6f"),d=r("4a3b4b"),h=r("d5b60b"),_=(r("8d4795"),"/shark/live/src/pages/roomPage/activity/globalAct/components/index.js");function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var v=u.default.Service,g=(a=v(p.default),n=v(f.default),i=function(e){function Pendant(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Pendant);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(t,"commonActServices",o,t),_initDefineProp(t,"configEffectBroadcastService",c,t),t.state={isZoomIn:!1,offsetTop:150,isStart:!1,isRankMounted:!1},t.modal=s.a.createRef(),t.toggleZoomSwitch=t.toggleZoomSwitch.bind(t),t}return _inherits(Pendant,e),Pendant.prototype.componentDidMount=function componentDidMount(){this.commonActServices.init(),this.configEffectBroadcastService.register("qzs202010")},Pendant.prototype.toggleZoomSwitch=function toggleZoomSwitch(){var e=this.state.isZoomIn;this.setState({isZoomIn:!e})},Pendant.prototype.startAct=function startAct(){this.setState({isStart:!0})},Pendant.prototype.endAct=function endAct(){this.setState({isStart:!1})},Pendant.prototype.moveEvent=function moveEvent(e){var t=e||{};this.setState({offsetTop:t.top})},Pendant.prototype.render=function render(){var e=this,t=this.state,r=t.isStart,a=t.isZoomIn,n=t.offsetTop,i=t.isRankMounted;return s.a.createElement("div",{className:"GlobalAct ActBase "+(r?"is-show":"")+" "+(a?"is-mini":""),style:{top:n},ref:this.modal,__source:{fileName:_,lineNumber:76},__self:this},s.a.createElement("div",{className:"ActBase-switchWrap",__source:{fileName:_,lineNumber:82},__self:this},s.a.createElement("span",{className:"ActBase-switch",onClick:this.toggleZoomSwitch,__source:{fileName:_,lineNumber:83},__self:this})),s.a.createElement(m.default,{styleName:"GlobalAct-logo",isSupportY:!0,isParentsMove:!0,dragEvent:this.moveEvent.bind(this),modal:this.modal,__source:{fileName:_,lineNumber:87},__self:this}),s.a.createElement("div",{className:"GlobalActBar ActBase-bar",onMouseEnter:function onMouseEnter(){e.setState({isRankMounted:!0})},__source:{fileName:_,lineNumber:94},__self:this},s.a.createElement(b.default,{startAct:this.startAct.bind(this),endAct:this.endAct.bind(this),__source:{fileName:_,lineNumber:101},__self:this})),s.a.createElement("div",{className:"ActBase-rank",__source:{fileName:_,lineNumber:106},__self:this},i?s.a.createElement(d.default,{__source:{fileName:_,lineNumber:108},__self:this}):null),s.a.createElement(h.default,{__source:{fileName:_,lineNumber:111},__self:this}))},Pendant}(s.a.Component),o=_applyDecoratedDescriptor(i.prototype,"commonActServices",[a],{enumerable:!0,initializer:null}),c=_applyDecoratedDescriptor(i.prototype,"configEffectBroadcastService",[n],{enumerable:!0,initializer:null}),i);t.default=g},"45085a":function(e,t,r){"use strict";var a=r("1a22b7"),n=r.n(a),i="/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/centerInner/index.js";t.default=function CenterInner(e){return n.a.createElement("div",{className:"GlobalActBar-center-inner "+e.className,__source:{fileName:i,lineNumber:5},__self:this},n.a.createElement("div",{className:"GlobalActBar-center-inner--in",__source:{fileName:i,lineNumber:6},__self:this},e.children))}},"458c0c":function(e,t,r){e.exports=r("5f575e")("9a8c5")},"4a3b4b":function(e,t,r){"use strict";var a,n,i,o,c,l,s,u=r("1a22b7"),f=r.n(u),p=r("7ca7dc"),m=r("eb3e22"),b=r("cebc6b");r("7cf39c");function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var d=p.default.Service,h=(a=d(m.DataCenter.common),n=d(b.default),i=d(m.DataCenter.global),o=function(e){function Panel(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Panel);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(t,"common",c,t),_initDefineProp(t,"actPanelServices",l,t),_initDefineProp(t,"global",s,t),t.state={isShowPanel:!1},t.iframe=f.a.createRef(),t.updatePanel=t.updatePanel.bind(t),t}return _inherits(Panel,e),Panel.prototype.componentDidMount=function componentDidMount(){this.actPanelServices.init({iframe:this.iframe,updatePanel:this.updatePanel})},Panel.prototype.updatePanel=function updatePanel(e){var t=Object.assign({},e);this.setState(t)},Panel.prototype.render=function render(){var e=this,t=this.state.isShowPanel,r="/topic/h5/Halloween2020";return"master"!==this.global.get("$SYS.env")&&(r="/topic/template/h5/Halloween2020"),f.a.createElement("iframe",{className:"GlobalActIframe "+(t?"is-show":""),onMouseEnter:function onMouseEnter(){return e.actPanelServices.togglePanel(1)},onMouseLeave:function onMouseLeave(){console.log("yy================:iframe onMouseLeave  \u5173\u95ed\u6302\u4ef6(real happen)"),e.actPanelServices.togglePanel(0)},ref:this.iframe,src:r,scrolling:"no",__source:{fileName:"/shark/live/src/pages/roomPage/activity/globalAct/components/Panel/Panel.js",lineNumber:57},__self:this})},Panel}(f.a.Component),c=_applyDecoratedDescriptor(o.prototype,"common",[a],{enumerable:!0,initializer:null}),l=_applyDecoratedDescriptor(o.prototype,"actPanelServices",[n],{enumerable:!0,initializer:null}),s=_applyDecoratedDescriptor(o.prototype,"global",[i],{enumerable:!0,initializer:null}),o);t.default=h},"5264d4":function(e,t,r){e.exports=r("5f575e")("7f810")},528016:function(e,t,r){e.exports=r("5f575e")("39485")},"5f575e":function(e,t){e.exports=_room_common_},"748d25":function(e,t,r){e.exports=r("2d6146")("980ef")},"76dfa9":function(e,t,r){"use strict";var a,n,i,o,c,l,s,u=r("97a1f0"),f=r("7ca7dc"),p=r("eb3e22"),m=r("e854a7"),b=r("f68984"),d=r("0f636f"),h=r("748d25"),_=r("f3f802"),v=r("cb8c6f"),g=r("5264d4"),y=r("104af8"),N=r("074d14"),w=r("ffca33"),P=r("458c0c"),O=r("12160e"),S=r.n(O),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var A=f.default.Service,E=m.default.socketStream,D=(a=A(p.DataCenter.common),n=A(p.DataCenter.global),i=A(P.default),o=function(e){function ActServices(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActServices);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(t,"common",c,t),_initDefineProp(t,"global",l,t),_initDefineProp(t,"newSvgaPlayerService",s,t),t.baseData={},t.stage=-1,t.isBlackRoom=!1,t.sub=new N.Subscription,t.preData={},t.stage$=new y.Subject,t.disp$=new y.Subject,t.msgTime=0,t.isOver=0,t}return _inherits(ActServices,e),ActServices.prototype.pushData=function pushData(e){var t=this.baseData,r=t.config,a=void 0===r?{}:r,n=t.roomData,i=void 0===n?{}:n;this.common.push("$GLOBAL-ACT",{cppRes:e,config:k({},i,a),ztPageUrl:this.ztPageUrl,stage:this.stage,isInit:!0,isOver:this.isOver},!0)},ActServices.prototype.checkIsBlack=function checkIsBlack(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseData,t=e.config,r=void 0===t?{}:t,a=e.roomData,n=void 0===a?{}:a,i=r.blacklist||[],o=n.rid,c=!1;return i.indexOf(+o)>=0&&(c=!0),c},ActServices.prototype.checkIsBlackZone=function checkIsBlackZone(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseData,t=e.config,r=void 0===t?{}:t,a=e.roomData,n=void 0===a?{}:a,i=r.cate2_blacklist||[],o=+n.cate2Id,c=!1;return i.indexOf(o)>=0&&(c=!0),c},ActServices.prototype.fetchConfig=function fetchConfig(){return Object(w.default)({url:"//webconf.douyucdn.cn/resource/common/activity/actqzs202010_w.json",type:"jsonp",callbackName:"actqzs202010"})},ActServices.prototype.init=function init(){var e=this,t=this.global.get("$SYS.env");this.ztPageUrl="/topic/"+(t&&"master"!==t?"template/":"")+"WSTXJ",Object(_.zip)(this.fetchConfig(),this.common.get("$DATA").pipe(Object(v.pluck)("room"))).pipe(Object(b.map)(function(e){var t=e[0],r=e[1],a=void 0===r?{}:r;return{roomData:{rid:a.room_id,avatar:a.avatar_mid,anchorname:a.owner_name,cate2Id:a.cate2_id},config:t}}),Object(d.tap)(function(t){return e.baseData=t}),Object(d.tap)(function(t){return e.isBlackRoom=e.checkIsBlack(t)||e.checkIsBlackZone(t)})).subscribe(function(){e.isBlackRoom||(e.sub.add(e.stage$.pipe(Object(h.filter)(function(t){return+t.res.time>=e.msgTime}),Object(d.tap)(function(t){var r=t.res;e.msgTime=+r.time})).subscribe(function(t){var r=t.res,a=t.stage,n=t.initKey,i=t.isOver;e[n]||(e[n]=!0,"function"===typeof e[n+"Fun"]&&e[n+"Fun"]()),i&&(e.isOver=i),e.stage=a,Object.assign(e.preData,r),e.pushData(e.preData)})),e.sub.add(e.disp$.pipe(Object(h.filter)(function(){return e.preData.room}),Object(b.map)(function(t){var r=t.res,a=1===+r.distype?k({},r,{room:k({},e.preData.room,{task_full:0}),tasklist:e.resetTaskList(e.preData.room)}):r;return k({},t,{res:a})})).subscribe(function(t){return e.stage$.next(t)})),e.handlerStep0(),e.handlerStep1(),e.handlerStep4(),e.initSvgaEffect(e.baseData))})},ActServices.prototype.resetTaskList=function resetTaskList(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.baseData,r=(e||{}).act_id,a=((t||{}).config||{}).task_setting,n=(void 0===a?{}:a)[+r];return r&&Array.isArray(n)?n.filter(function(e){return 0===+e.type}).map(function(e){return k({},e,{num:0,cnum:0})}):[]},ActServices.prototype.handlerStep0=function handlerStep0(){var e=this;this.sub.add(E.subscribe("qzs202010s0info",function(t){return e.stage$.next({res:t,initKey:"step0Init",stage:0})}))},ActServices.prototype.handlerStep1=function handlerStep1(){var e=this;this.sub.add(E.subscribe("qzs202010s1info",function(t){return e.stage$.next({res:t,initKey:"step1Init",stage:1})})),this.sub.add(E.subscribe("qzs202010s1disp",function(t){return e.disp$.next({res:t,initKey:"step1Init",stage:1})}))},ActServices.prototype.handlerStep4=function handlerStep4(){var e=this,t=new y.Subject;this.sub.add(t.subscribe(function(t){return e.stage$.next(k({},t,{initKey:"step4Init",stage:4}))})),this.sub.add(E.subscribe("qzs202010s2info",function(e){return t.next({res:e})})),this.sub.add(E.subscribe("qzs202010s2disp",function(e){t.next({res:e})}))},ActServices.prototype.initSvgaEffect=function initSvgaEffect(e){var t=this;Object(g.combineLatest)(this.loadConfig(),this.newSvgaPlayerService.ready$).subscribe(function(r){var a=r[0];E.subscribe("configscreen",function(r){var n=r.rid,i=r.gbtemp;if(402===+i){var o=t.isAnchor(),c=a[i],l=t.isCurRoom(n);if(c){var s=c.isHiddenAnchor;if(o&&1===+(void 0===s?0:s))return;l&&1===+c.ctype&&t.addSvga(c,r,e.roomData)}}})})},ActServices.prototype.addSvga=function addSvga(e,t,r){var a=function limitText(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e?e.length>t?String(e).substr(0,t)+"...":e:"--"}(t.userName);this.newSvgaPlayerService.add({svgaUrl:e.svgaurl,loops:1,content:{tit:{type:0,isCenter:1,size:24,color:"#fff",child:[{value:"\u606d\u559c",color:"#ffffff"},{value:a||"--",color:"#ffe746"},{value:"\u5b88\u62a4\u4e3b\u64ad\u6210\u529f",color:"#ffffff"}]},img:{type:1,child:[{value:t.avatar||S.a}]},img1:{type:1,child:[{value:r.avatar||S.a}]}},contentMode:"AspectFit",useCache:!0})},ActServices.prototype.loadConfig=function loadConfig(){return Object(w.default)({url:"//webconf.douyucdn.cn/resource/common/comm_broadcast_w.json",type:"jsonp",callbackName:"comm_broadcast"})},ActServices.prototype.isCurRoom=function isCurRoom(e){var t=this.global.get("$ROOM.room_id");return t>0&&+t===+e},ActServices.prototype.isAnchor=function isAnchor(){var e=this.global.get("USER_INFO.uid"),t=this.global.get("$ROOM.owner_uid");return e>0&&parseInt(e,10)===parseInt(t,10)},ActServices}(u.Service),c=_applyDecoratedDescriptor(o.prototype,"common",[a],{enumerable:!0,initializer:null}),l=_applyDecoratedDescriptor(o.prototype,"global",[n],{enumerable:!0,initializer:null}),s=_applyDecoratedDescriptor(o.prototype,"newSvgaPlayerService",[i],{enumerable:!0,initializer:null}),o);t.default=D},"7912b6":function(e,t,r){e.exports=r("5f575e")("48f66")},"7ca7dc":function(e,t,r){e.exports=r("2d6146")("f0df9")},"7cf39c":function(e,t,r){},"8355e9":function(e,t,r){e.exports=r("5f575e")("ed735")},"89dc6f":function(e,t,r){"use strict";var a,n,i,o,c,l=r("1a22b7"),s=r.n(l),u=r("7ca7dc"),f=r("a02839"),p=r("cebc6b"),m=r("ac6338"),b=r("b1fa8d"),d=r("368e3c"),h=r("9e006a"),_=r("9ffb88"),v=(r("109ac5"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}),g="/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/Bar.js";function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var y=u.default.Service,N=(a=y(f.default),n=y(p.default),i=function(e){function Bar(){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Bar);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(r,"actBarServices",o,r),_initDefineProp(r,"actPanelServices",c,r),r.handlerStep0=function(e){return s.a.createElement(h.default,{data:e,period:"prev",__source:{fileName:g,lineNumber:81},__self:t})},r.renderTopDom=function(e){var r=e.hourRankInfo,a=null;switch(!0){case r.isMatching:a=s.a.createElement(m.default,v({},r,{__source:{fileName:g,lineNumber:97},__self:t}))}return a},r.renderCenterDom=function(e){var r=e.curRid,a=e.lastHourRankInfo,n=void 0===a?{}:a,i=null;switch(!0){case n.hasChampionInfo:i=s.a.createElement(d.default,v({},n,{curRid:r,__source:{fileName:g,lineNumber:119},__self:t}))}return i},r.handlerStep1=function(e){var a=e.room,n=void 0===a?{}:a,i=e.taskList;return r.handlerStaus({children:s.a.createElement(s.a.Fragment,{__source:{fileName:g,lineNumber:177},__self:t},r.renderTopDom(e),r.renderCenterDom(e),s.a.createElement(b.default,{room:n,taskList:i,__source:{fileName:g,lineNumber:181},__self:t})),data:e})},r.handlerStep4=function(e){return r.actPanelServices.togglePanel(0),s.a.createElement(h.default,{data:e,period:"post",__source:{fileName:g,lineNumber:306},__self:t})},r.handlerStaus=function(e){var a=e.type,n=void 0===a?0:a,i=e.data;if(1===+n){r.actPanelServices.togglePanel(0);var o=i.ztPageUrl;return s.a.createElement(s.a.Fragment,{__source:{fileName:g,lineNumber:316},__self:t},s.a.createElement("a",{href:o||"",target:"_blank",__source:{fileName:g,lineNumber:317},__self:t},e.children))}return s.a.createElement("div",{onMouseEnter:function onMouseEnter(){return r.actPanelServices.togglePanel(1)},onMouseLeave:function onMouseLeave(){return r.actPanelServices.togglePanel(0)},__source:{fileName:g,lineNumber:323},__self:t},e.children)},r.state={data:{}},r.executeOnce=!1,r}return _inherits(Bar,e),Bar.prototype.componentDidMount=function componentDidMount(){this.actBarServices.init({updateComponent:this.updateComponent.bind(this)})},Bar.prototype.updateComponent=function updateComponent(e){var t=e.innerData,r=(void 0===t?{}:t).closeStatus;void 0!==r&&r?this.props.endAct():this.setState({data:e})},Bar.prototype.chooseComponent=function chooseComponent(e){switch(+e.stage){case 0:return this.handlerStep0(e);case 1:return this.handlerStep1(e);case 4:return this.handlerStep4(e);default:return null}},Bar.prototype.render=function render(){var e=this,t=this.state.data||{};return!this.executeOnce&&t.isInit&&(this.executeOnce=!0,setTimeout(function(){e.props.startAct()},100)),s.a.createElement(s.a.Fragment,{__source:{fileName:g,lineNumber:340},__self:this},this.chooseComponent(t),s.a.createElement(_.default,{__source:{fileName:g,lineNumber:342},__self:this}))},Bar}(s.a.Component),o=_applyDecoratedDescriptor(i.prototype,"actBarServices",[a],{enumerable:!0,initializer:null}),c=_applyDecoratedDescriptor(i.prototype,"actPanelServices",[n],{enumerable:!0,initializer:null}),i);t.default=N},"8d4795":function(e,t,r){},960890:function(e,t,r){e.exports=r("d1db8c")("c9c82")},"97a1f0":function(e,t,r){e.exports=r("2d6146")("11f13")},999443:function(e,t){e.exports=vendor3d72ea64bdb3506ffdba},"9e006a":function(e,t,r){"use strict";var a=r("1a22b7"),n=r.n(a),i=(r("1c9414"),"/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/periodView/PeriodBar.js");function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}var o={prev:"\u70b9\u51fb\u67e5\u770b",post:"\u4e86\u89e3\u8be6\u60c5"},c=function(e){function PreviewBar(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PreviewBar),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return _inherits(PreviewBar,e),PreviewBar.prototype.render=function render(){var e=this.props,t=e.data,r=(t=void 0===t?{}:t).ztPageUrl,a=e.period;return n.a.createElement("div",{__source:{fileName:i,lineNumber:14},__self:this},n.a.createElement("a",{className:"GlobalActBar-period-bg",href:r||"",target:"_blank",__source:{fileName:i,lineNumber:15},__self:this},n.a.createElement("div",{className:"GlobalActBar-period-"+a+"-icon",__source:{fileName:i,lineNumber:16},__self:this}),n.a.createElement("span",{className:"GlobalActBar-period-link",__source:{fileName:i,lineNumber:17},__self:this},o[a])))},PreviewBar}(n.a.PureComponent);t.default=c},"9ffb88":function(e,t,r){"use strict";var a=r("1a22b7"),n=r.n(a);r("e187ac");function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}var i=function(e){function BottomView(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BottomView),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return _inherits(BottomView,e),BottomView.prototype.render=function render(){return n.a.createElement("div",{className:"GlobalActBar-bottom",__source:{fileName:"/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/bottomView/BottomView.js",lineNumber:12},__self:this})},BottomView}(n.a.Component);t.default=i},a02839:function(e,t,r){"use strict";var a,n,i,o,c,l,s,u=r("97a1f0"),f=r("7ca7dc"),p=r("eb3e22"),m=r("2c4a1f"),b=r("12160e"),d=r.n(b),h=r("eeb9b8"),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var v=f.default.Store,g=f.default.Service,y=(a=v(),n=g(p.DataCenter.common),i=g(h.default),o=function(e){function ActBarServices(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActBarServices);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(t,"store",c,t),_initDefineProp(t,"common",l,t),_initDefineProp(t,"barServices",s,t),t.handleTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.find(function(t){return+t.task_id===+e.task_id});return Object.assign({},r,e)}):[]},t.updateComponet=null,t.phpConfig={},t.dataHandleCenter=t.dataHandleCenter.bind(t),t}return _inherits(ActBarServices,e),ActBarServices.prototype.init=function init(e){var t=e.updateComponent,r=this.dataHandleCenter;this.common.get("$GLOBAL-ACT").subscribe(function(e){var a=r(e)||{},n=e.ztPageUrl,i=e.stage,o=e.isInit,c=e.isOver;t(_({isOver:c,isInit:o,stage:i,ztPageUrl:n},a))})},ActBarServices.prototype.dataHandleCenter=function dataHandleCenter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};switch(+e.stage){case 0:t=this.getStep0Data(e);break;case 1:t=this.getStep1Data(e);break;case 4:t=this.getStep4Data(e)}return t},ActBarServices.prototype.getStep0Data=function getStep0Data(e){var t=(e.config||{}).step1_begin_time;return{step1BeginTime:(void 0===t?[]:t)[0]}},ActBarServices.prototype.getStep1Data=function getStep1Data(e){var t=e.config,r=e.cppRes,a=void 0===r?{}:r,n=t||{},i=n.rid,o=n.avatar,c=n.task_setting,l=void 0===c?{}:c,s=a.room,u=a.disp,f=void 0===u?{}:u,p=a.ark,b=a.park,d=a.tasklist,h=void 0===d?[]:d,v=f.arkcst,g=void 0===v?0:v,y=f.arkcet,N=void 0===y?0:y,w=f.arkss,P=(s||{}).act_id,O=Object(m.getMDHM)(g),S=O.h,k=O.m,A=Object(m.getMDHM)(N),E=A.h,D=A.m;return{room:s,curRid:i,curAnchorAvatar:o,hourRankInfo:_({},this.getHourRankInfo(p),{isMatching:1===+w,hourTime:S+":"+k+"-"+E+":"+D,title:"\u5b88\u62a4\u699c"}),lastHourRankInfo:_({},this.getLastHourRankInfo(b),{title:"\u4e0a\u573a\u5b88\u62a4\u6210\u529f"}),taskList:this.handleTask(h,l[P]||[])}},ActBarServices.prototype.getStep4Data=function getStep4Data(e){var t=e.ztPageUrl,r=e.config,a=e.cppRes,n=void 0===a?{}:a;return{ztPageUrl:t,config:r,room:n.room,winqzlist:n.winqzlist,winqzlist1:n.winqzlist1,winqzlist2:n.winqzlist2}},ActBarServices.prototype.getZoneInfo=function getZoneInfo(e,t){var r=e.zone_list;return(void 0===r?{}:r)[(t||{}).zone]||{}},ActBarServices.prototype.getDayRankInfo=function getDayRankInfo(e){var t=e||{},r=t.drki,a=t.drkd,n=t.drkn,i=void 0===n?"--":n;return{winNum:i,hasDayRank:101!==+r,dayRank:this.barServices.getRanking({type:1,ranking:r}),dayDiffInfo:this.barServices.diffInfo({upNum:i,ranking:r,dsc:a})}},ActBarServices.prototype.getHourRankInfo=function getHourRankInfo(e){var t=e||{},r=t.arki,a=void 0===r?101:r,n=t.arkd,i=t.arkn,o=t.arkun,c=t.arkuavt,l=this.barServices.getScore(n),s=l;return 0===l&&0===+a&&(s="--"),{winNum:i,hasHourRank:101!==+a,hourRank:this.barServices.getRanking({type:1,ranking:a}),hourDiffInfo:1===+a?["\u4fdd\u6301\u5168\u7ad9\u7b2c1","\u5373\u53ef\u5b88\u62a4\u6210\u529f"]:["\u8ddd\u79bb\u5b88\u62a4\u6210\u529f",s],hourAvatar:c,hourName:o||"\u865a\u4f4d\u4ee5\u5f85"}},ActBarServices.prototype.getLastHourRankInfo=function getLastHourRankInfo(e){var t=e||{},r=t.parkws,a=void 0===r?0:r,n=t.parkwavt,i=t.parkwnn,o=t.parkwrid,c=t.parkwun,l=t.parkwuavt;return{hasChampionInfo:0!==+a,championAvatar:n,championnn:i||"\u865a\u4f4d\u4ee5\u5f85",championUserAvatar:l,championunn:c||"\u865a\u4f4d\u4ee5\u5f85",championRid:o}},ActBarServices.prototype.getChampionInfo=function getChampionInfo(e,t){var r=e||{},a=r.arkcet,n=r.arkcst,i=t||{},o=i.arki,c=void 0===o?101:o,l=i.arkn,s=void 0===l?1:l,u=i.arkd;return{hasChampionRank:101!==+c,championRankStartTime:n,championRankOverTime:a,championRank:this.barServices.getRanking({type:1,ranking:c}),championDiffInfo:this.barServices.diffInfo({upNum:s,ranking:c,dsc:u}),championWinNum:s||"--"}},ActBarServices.prototype.getPreChampionInfo=function getPreChampionInfo(e){var t=e||{},r=t.parkws,a=void 0===r?0:r,n=t.parkwavt,i=t.parkwnn,o=t.parkwrid;return{hasChampionInfo:0!==+a,isChampionSuper:2===+a,championAvatar:n||d.a,championnn:i||"\u865a\u4f4d\u4ee5\u5f85",championRid:o}},ActBarServices}(u.Service),c=_applyDecoratedDescriptor(o.prototype,"store",[a],{enumerable:!0,initializer:null}),l=_applyDecoratedDescriptor(o.prototype,"common",[n],{enumerable:!0,initializer:null}),s=_applyDecoratedDescriptor(o.prototype,"barServices",[i],{enumerable:!0,initializer:null}),o);t.default=y},ac6338:function(e,t,r){"use strict";var a=r("1a22b7"),n=r.n(a),i=r("12160e"),o=r.n(i),c=r("45085a"),l=(r("d0fade"),"/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/hourRankView/HourRankView.js");function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}var s=function(e){function HourRankView(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HourRankView),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return _inherits(HourRankView,e),HourRankView.prototype.render=function render(){var e=this.props,t=e.hasHourRank,r=void 0!==t&&t,a=e.hourDiffInfo,i=void 0===a?[]:a,s=e.hourAvatar,u=e.hourTime,f=e.hourName,p=e.title,m=void 0===p?"--":p;return n.a.createElement("div",{className:"GlobalActBar-hourrank-bg GlobalActBar-fl--16",__source:{fileName:l,lineNumber:15},__self:this},n.a.createElement("div",{className:"GlobalActBar-hourrank-top",__source:{fileName:l,lineNumber:16},__self:this},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fw--bold",__source:{fileName:l,lineNumber:17},__self:this},m),n.a.createElement("div",{className:"GlobalActBar-fc--fff",__source:{fileName:l,lineNumber:18},__self:this},u)),n.a.createElement("div",{className:"GlobalActBar-avatar GlobalActBar-hourrank-icon",__source:{fileName:l,lineNumber:20},__self:this},n.a.createElement("img",{src:s||o.a,alt:"",__source:{fileName:l,lineNumber:21},__self:this}),n.a.createElement("i",{className:"GlobalActBar-fw--bold GlobalActBar-fc--fff",__source:{fileName:l,lineNumber:22},__self:this},"\u672c\u623f\u5b88\u62a4\u8005")),n.a.createElement("div",{className:"GlobalActBar-fc--yellow GlobalActBar-name",__source:{fileName:l,lineNumber:24},__self:this},f),n.a.createElement("div",{className:"GlobalActBar-hourrank-hr",__source:{fileName:l,lineNumber:25},__self:this}),n.a.createElement(c.default,{className:"GlobalActBar-hourrank-bottom GlobalActBar-fc--fff GlobalActBar-fl--16",__source:{fileName:l,lineNumber:26},__self:this},r?n.a.createElement(n.a.Fragment,{__source:{fileName:l,lineNumber:29},__self:this},n.a.createElement("div",{__source:{fileName:l,lineNumber:30},__self:this},i[0]),n.a.createElement("div",{__source:{fileName:l,lineNumber:31},__self:this},i[1])):n.a.createElement(n.a.Fragment,{__source:{fileName:l,lineNumber:33},__self:this},n.a.createElement("div",{__source:{fileName:l,lineNumber:34},__self:this},"\u8ddd\u79bb\u5b88\u62a4\u6210\u529f"),n.a.createElement("div",{__source:{fileName:l,lineNumber:35},__self:this},"--"))))},HourRankView}(n.a.Component);t.default=s},b067ea:function(e,t,r){e.exports=r("5f575e")("6792d")},b1fa8d:function(e,t,r){"use strict";var a=r("1a22b7"),n=r.n(a),i=r("12160e"),o=r.n(i),c=r("45085a"),l=r("e2eac8"),s=(r("ef65a0"),"/shark/live/src/pages/roomPage/activity/globalAct/components/Bar/magicTaskView/MagicTaskView.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}var u=function(e){function Task(){var t,r,a=this;_classCallCheck(this,Task);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(l))),r.renderHeart=function(e){var t=r.handleHeartHeight(+e.num,+e.total);return n.a.createElement("div",{className:"GlobalActBar-magictask-bg",__source:{fileName:s,lineNumber:35},__self:a},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fw--bold GlobalActBar-fl--22",__source:{fileName:s,lineNumber:36},__self:a},"\u5357\u74dc\u5c4b\u5145\u80fd"),n.a.createElement(c.default,{className:"GlobalActBar-magictask-middle",__source:{fileName:s,lineNumber:37},__self:a},n.a.createElement(n.a.Fragment,{__source:{fileName:s,lineNumber:38},__self:a},n.a.createElement("div",{className:"GlobalActBar-magictask-icon",__source:{fileName:s,lineNumber:39},__self:a},n.a.createElement("div",{className:"GlobalActBar-magictask-icon bottom",__source:{fileName:s,lineNumber:40},__self:a}),n.a.createElement("div",{className:"GlobalActBar-magictask-icon midlle",style:{height:t},__source:{fileName:s,lineNumber:41},__self:a}),n.a.createElement("div",{className:"GlobalActBar-magictask-icon top",__source:{fileName:s,lineNumber:42},__self:a})),n.a.createElement("div",{className:"GlobalActBar-fl--16 GlobalActBar-fc--fff",__source:{fileName:s,lineNumber:44},__self:a},n.a.createElement("span",{className:"GlobalActBar-fc--yellow",__source:{fileName:s,lineNumber:45},__self:a},e.num||0),"/",r.handleTotal(e.total)||0))),n.a.createElement(c.default,{className:"GlobalActBar-magictask-bottom",__source:{fileName:s,lineNumber:49},__self:a},n.a.createElement(n.a.Fragment,{__source:{fileName:s,lineNumber:50},__self:a},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fl--16",__source:{fileName:s,lineNumber:51},__self:a},"\u5145\u80fd\u5b8c\u6bd5\u89e3\u9501"),n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fl--16",__source:{fileName:s,lineNumber:52},__self:a},"\u5357\u74dc\u5c4b"))))},r.renderBox=function(e){var t=e.num,i=e.cnum,l=e.task_name,u=e.total,f=e.task_web_pic;return n.a.createElement("div",{className:"GlobalActBar-magictask-bg",__source:{fileName:s,lineNumber:63},__self:a},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fw--bold GlobalActBar-fl--22",__source:{fileName:s,lineNumber:64},__self:a},"\u5357\u74dc\u5c4b\u4efb\u52a1"),n.a.createElement(c.default,{className:"GlobalActBar-magictask-middle",__source:{fileName:s,lineNumber:65},__self:a},n.a.createElement(n.a.Fragment,{__source:{fileName:s,lineNumber:66},__self:a},n.a.createElement("div",{className:"GlobalActBar-avatar--big",__source:{fileName:s,lineNumber:67},__self:a},n.a.createElement("img",{src:f||o.a,__source:{fileName:s,lineNumber:68},__self:a})),n.a.createElement("div",{style:{marginTop:"4px"},className:"GlobalActBar-name GlobalActBar-fl--16 GlobalActBar-fc--fff",title:l||"--",__source:{fileName:s,lineNumber:70},__self:a},l||"--"),n.a.createElement("div",{style:{marginTop:"-4px"},className:"GlobalActBar-fl--16 GlobalActBar-fc--fff",__source:{fileName:s,lineNumber:74},__self:a},n.a.createElement("span",{className:"GlobalActBar-fc--yellow",__source:{fileName:s,lineNumber:77},__self:a},t||0),"/",r.handleTotal(u)||0))),n.a.createElement(c.default,{className:"GlobalActBar-magictask-bottom",__source:{fileName:s,lineNumber:80},__self:a},n.a.createElement(n.a.Fragment,{__source:{fileName:s,lineNumber:81},__self:a},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fl--16",__source:{fileName:s,lineNumber:82},__self:a},"\u5df2\u5b8c\u6210",i||0,"\u6b21"))))},_possibleConstructorReturn(r,t)}return _inherits(Task,e),Task.prototype.handleTotal=function handleTotal(e){var t=+e;return t>=1e4?parseInt(t/1e3,10)/10+"\u4e07":e},Task.prototype.handleHeartHeight=function handleHeartHeight(e,t){return e&&t?e>=t?"100%":parseInt(1e3*e/t,10)/10+"%":0},Task.prototype.render=function render(){var e=this.props.data,t=void 0===e?{}:e,r=t.type;return+(void 0===r?1:r)?this.renderBox(t):this.renderHeart(t)},Task}(n.a.Component);function TaskFull(e){var t=e.task_total;return n.a.createElement("div",{className:"GlobalActBar-magictask-bg",__source:{fileName:s,lineNumber:104},__self:this},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fw--bold GlobalActBar-fl--22",__source:{fileName:s,lineNumber:105},__self:this},"\u5357\u74dc\u5c4b\u4efb\u52a1"),n.a.createElement(c.default,{className:"GlobalActBar-magictask-middle",__source:{fileName:s,lineNumber:106},__self:this},n.a.createElement(n.a.Fragment,{__source:{fileName:s,lineNumber:107},__self:this},n.a.createElement("div",{className:"GlobalActBar-fc--fff",__source:{fileName:s,lineNumber:108},__self:this},"\u4eca\u65e5\u4efb\u52a1\u6b21\u6570"),n.a.createElement("div",{className:"GlobalActBar-fc--yellow",__source:{fileName:s,lineNumber:109},__self:this},"\u5df2\u8fbe\u4e0a\u9650"))),n.a.createElement(c.default,{className:"GlobalActBar-magictask-bottom",__source:{fileName:s,lineNumber:112},__self:this},n.a.createElement(n.a.Fragment,{__source:{fileName:s,lineNumber:113},__self:this},n.a.createElement("div",{className:"GlobalActBar-fc--fff GlobalActBar-fl--16",__source:{fileName:s,lineNumber:114},__self:this},"\uff08",t,"\u6b21\uff09"))))}var f=function(e){function MagicTaskBox(){return _classCallCheck(this,MagicTaskBox),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(MagicTaskBox,e),MagicTaskBox.prototype.render=function render(){var e=this,t=this.props,r=t.room,a=void 0===r?{}:r,i=t.taskList,o=void 0===i?[]:i,c=a.task_full,f=void 0===c?0:c,p=a.task_total,m=void 0===p?0:p,b=o.length;return 1===+f?n.a.createElement(TaskFull,{task_total:m,__source:{fileName:s,lineNumber:129},__self:this}):Array.isArray(o)&&b?b>=1?n.a.createElement(l.default,{distance:90,width:90,length:b,height:167,interval:4e3,__source:{fileName:s,lineNumber:138},__self:this},o.map(function(t,r){return n.a.createElement(u,{key:r,data:t||{},__source:{fileName:s,lineNumber:139},__self:e})})):n.a.createElement(u,{data:o[0]||{},__source:{fileName:s,lineNumber:144},__self:this}):null},MagicTaskBox}(n.a.Component);t.default=f},bc59ca:function(e,t,r){"use strict";t.default=function ActEpics(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActEpics)}},bd834d:function(e,t,r){"use strict";var a=r("7ca7dc"),n=r("05936d"),i=r("e87543"),o=r("3fc28c"),c=a.default.StoreFactory;t.default=a.default.createApp({name:"ActApp",providers:[{name:"component",useFactory:function useFactory(){return o.default}},{name:"store",useFactory:function useFactory(){return c.getInstance(window.__INITIAL_STATE__,i.default,n.default)}}]})},c1b7cf:function(e,t,r){"use strict";var a,n,i,o,c,l,s,u,f,p=r("1a22b7"),m=r.n(p),b=r("3b6ec9"),d=r.n(b),h=r("7ca7dc"),_=r("eb3e22"),v=r("97a1f0"),g=(r("c3952e"),"/shark/live/src/pages/roomPage/activity/globalAct/components/Tips/Tips.js");function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var y=h.default.Service,N=(a=Object(v.ErrorHandler)(m.a.createElement("div",{__source:{fileName:g,lineNumber:15},__self:void 0})),n=y(_.DataCenter.common),i=y(_.DataCenter.global),o=y(_.DataCenter.localStorage),a((l=function(e){function Tips(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Tips);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(t,"common",s,t),_initDefineProp(t,"global",u,t),_initDefineProp(t,"localStorage",f,t),t.closeBanner=function(){t.setState({isShow:0})},t.curUid=+t.global.get("USER_INFO.uid"),t.state={isShow:!1},t}return _inherits(Tips,e),Tips.prototype.componentWillUnmount=function componentWillUnmount(){this.node&&this.node.remove&&this.node.remove()},Tips.prototype.componentDidMount=function componentDidMount(){var e=this;this.common.get("$GLOBAL-ACT").subscribe(function(t){var r=t.cppRes,a=void 0===r?{}:r,n=e.localStorage.get("ActHallowDayTips"+e.curUid);a.disp&&1===+a.disp.step&&!n&&(e.localStorage.set("ActHallowDayTips"+e.curUid,1,86400),e.setState({isShow:1}))})},Tips.prototype.render=function render(){var e=this;return this.state.isShow?d.a.createPortal(m.a.createElement("div",{className:"HalloweenTips",__source:{fileName:g,lineNumber:65},__self:this},"\u6279\u91cf\u8d60\u9001\u3010\u5357\u74dc\u5361\u3011x99\u3001x333\u53ef\u89e6\u53d1\u4e07\u5723\u4e13\u5c5e\u7279\u6548",m.a.createElement("i",{className:"HalloweenTips-close",onClick:function onClick(){e.closeBanner()},__source:{fileName:g,lineNumber:67},__self:this})),document.querySelector("#js-player-toolbar")):null},Tips}(m.a.Component),s=_applyDecoratedDescriptor(l.prototype,"common",[n],{enumerable:!0,initializer:null}),u=_applyDecoratedDescriptor(l.prototype,"global",[i],{enumerable:!0,initializer:null}),f=_applyDecoratedDescriptor(l.prototype,"localStorage",[o],{enumerable:!0,initializer:null}),c=l))||c);t.default=N},c3952e:function(e,t,r){},c43b68:function(e,t,r){},cb8c6f:function(e,t,r){e.exports=r("5f575e")("de0e2")},cebc6b:function(e,t,r){"use strict";var a,n,i,o,c,l,s,u,f,p=r("97a1f0"),m=r("7ca7dc"),b=r("eb3e22"),d=r("e854a7"),h=r("fc7947"),_=r.n(h),v=r("f3f802"),g=r("00d1b0"),y=r("960890"),N=r("f68984"),w=r("31031f"),P=r("8355e9"),O=r("76dfa9"),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function _initDefineProp(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),a=0;a<r.length;a++){var n=r[a],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}(e,t))}function _applyDecoratedDescriptor(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var k=m.default.Service,A=d.default.socketStream,E="ActHalloween",D="$GLOBAL-ACT",j=(a=k(b.DataCenter.common),n=k(b.DataCenter.global),i=k(P.default),o=k(O.default),c=function(e){function PanelServices(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PanelServices);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return _initDefineProp(t,"common",l,t),_initDefineProp(t,"global",s,t),_initDefineProp(t,"avatarServices",u,t),_initDefineProp(t,"commonActServices",f,t),t.config={mouseEnterTimer:null},t.state={stage:0,isShowPanel:!1,dataCenter:{},showBox:0},t.cpp$=new w.ReplaySubject(1),t.common.get(D).subscribe(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.state.stage=e.stage,t.state.dataCenter=e,t.cpp$.next(e)}),A.subscribe("chess_change_notify",function(e){t.commonActServices.isAnchor()||t.updatePanel({type:"CppRes_"+E,data:e})}),t}return _inherits(PanelServices,e),PanelServices.prototype.init=function init(e){var t=this,r=this.config;this.userId=+this.global.get("USER_INFO.uid"),this.config=Object.assign({},S({},r,e)),Object(v.zip)(this.common.get("$DATA"),Object(y.of)(this.userId).pipe(Object(g.mergeMap)(function(e){return e?t.avatarServices.getAvatarObservable(e,"middle"):Object(y.of)({})})),Object(y.of)(e)).pipe(Object(N.map)(function(e){var r=e[0],a=e[1],n=e[2],i=r.room,o=void 0===i?{}:i,c=o.cate2_id,l=o.nickname,s=o.room_id,u=o.owner_uid,f=o.avatar,p=(f=void 0===f?{}:f).middle;return[{type:"AnchorInfo_"+E,data:{nickName:l,avatar:void 0===p?"":p,roomId:s,anchorId:u,isAnchor:t.userId===+u,cateId:c}},{type:"UserInfo_"+E,data:{userName:t.global.get("USER_INFO.nickname"),userId:t.userId||0,avatar:a.data&&"//apic.douyucdn.cn/upload/"+a.data}},n]})).subscribe(function(e){return t.handlePanelInit(e)})},PanelServices.prototype.handlePanelInit=function handlePanelInit(e){var t=this,r=e[0],a=e[1],n=e[2];window.addEventListener("message",function(e){var i=e.source,o=e.origin;if(i===n.iframe.current.contentWindow){var c=e.data,l=c.type,s=c.data,u=void 0===s?{}:s;l==="ReadyMsg_"+E&&u.isLoaded&&(t.panelSource=i,t.panelOrigin=o,t.updatePanel(r),t.updatePanel(a),t.cpp$.subscribe(function(e){return t.handleCPP(e)}),t.state.isShowPanel&&t.switchPanel(!0)),l==="ShowLogin_"+E&&u.showLogin&&!_.a.check()&&_.a.show()}})},PanelServices.prototype.handleCPP=function handleCPP(e){this.isGameOver()&&(console.log("yy================:isGameOver \u5173\u95ed\u6302\u4ef6"),this.togglePanel(0)),this.updatePanel({type:"CppRes_"+E,data:e.cppRes})},PanelServices.prototype.togglePanel=function togglePanel(e){var t=this,r=this.state.isShowPanel;this.isGameOver()?r&&this.switchPanel(!1):e?(r||this.switchPanel(!0),clearTimeout(this.config.mouseEnterTimer)):(clearTimeout(this.config.mouseEnterTimer),this.config.mouseEnterTimer=setTimeout(function(){t.switchPanel(!1)},200))},PanelServices.prototype.isGameOver=function isGameOver(){var e=this.state.dataCenter,t=(void 0===e?{}:e).stage;return 4===+(void 0===t?0:t)},PanelServices.prototype.updatePanel=function updatePanel(e){this.panelSource&&this.panelSource.postMessage(e,this.panelOrigin)},PanelServices.prototype.switchPanel=function switchPanel(e){var t=this.config||{};this.state.isShowPanel=e,e||(this.state.showBox=0),this.updatePanel({type:"IsShowRank_"+E,data:{showRank:e,isBox:this.state.showBox}}),"function"===typeof t.updatePanel&&t.updatePanel({isShowPanel:e})},PanelServices}(p.Service),l=_applyDecoratedDescriptor(c.prototype,"common",[a],{enumerable:!0,initializer:null}),s=_applyDecoratedDescriptor(c.prototype,"global",[n],{enumerable:!0,initializer:null}),u=_applyDecoratedDescriptor(c.prototype,"avatarServices",[i],{enumerable:!0,initializer:null}),f=_applyDecoratedDescriptor(c.prototype,"commonActServices",[o],{enumerable:!0,initializer:null}),c);t.default=j},d0fade:function(e,t,r){},d1db8c:function(e,t){e.exports=playerSDK2da5b1f3a3deccaa435b},d5b60b:function(e,t,r){"use strict";var a=r("c1b7cf");t.default=a.default},e187ac:function(e,t,r){},e2eac8:function(e,t,r){e.exports=r("5f575e")("fec18")},e854a7:function(e,t,r){e.exports=r("5f575e")("a5ed5")},e87543:function(e,t,r){"use strict";t.default=Object.assign({})},eb3e22:function(e,t,r){e.exports=r("d1db8c")("e55c4")},eeb9b8:function(e,t,r){e.exports=r("5f575e")("aa9da")},ef65a0:function(e,t,r){},f3f802:function(e,t,r){e.exports=r("d1db8c")("f1cc6")},f68984:function(e,t,r){e.exports=r("d1db8c")("53a00")},fc7947:function(e,t,r){e.exports=r("5f575e")("d38ed")},ffca33:function(e,t,r){e.exports=r("5f575e")("66581")}},[["26c4ee","common-pre"]]]);
//# sourceMappingURL=http://sourcemap.douyucdn.cn:4567/room/online/sourcemaps/globalAct_0bee2d6.js.map