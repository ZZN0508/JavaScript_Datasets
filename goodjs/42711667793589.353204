!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CAAS_AOLCOM",[],t):"object"==typeof exports?exports.CAAS_AOLCOM=t():e.CAAS_AOLCOM=t()}(window,function(){return n={415:function(e,t,n){e.exports=n(416)},416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(417),n=n&&n.__esModule?n:{default:n};t.default=new n.default({selector:".aol-notification-bell"})},417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c={chrome:"https://s.yimg.com/cv/apiv2/default/20190821/settings-chrome.png",firefox:"https://s.yimg.com/cv/apiv2/default/20190821/settings-firefox.png",edge:"https://s.yimg.com/cv/apiv2/default/20190821/settings-edge.png",safari:"https://s.yimg.com/cv/apiv2/default/20190821/settings-safari.png"};function a(e){e=e.selector;if(function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.elems=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(document.querySelectorAll(e))),this.elems.length){try{this.notifications=JSON.parse(this.elems[0].dataset.configObject)}catch(e){return void console.log("Issue parsing notifications "+e)}this.notificationPanel=document.getElementById("header-notification-panel"),this.notificationBadge=document.getElementById("header-notification-badge"),this.userBrowser=window.NEXUtils.getBrowser(window.navigator.userAgent),this.init()}}t.default=(i(a,[{key:"init",value:function(){this.countNewNotifications(),this.eventListeners(),this.buildPanel()}},{key:"eventListeners",value:function(){var n=this,e=document.getElementById("aol-bell-notifications");e.addEventListener("mouseleave",function(){n.notificationPanel.classList.remove("active"),n.notificationBadge.classList.remove("activeBadge");for(var e=document.getElementsByClassName("breaking-notification"),t=0;t<e.length;++t)e[t].classList.add("already_seen");n.writeIdsToStorage()}),e.addEventListener("mouseenter",function(){n.notificationPanel.classList.add("active")})}},{key:"writeIdsToStorage",value:function(){var t=[];this.notifications.forEach(function(e){t.push(e.id)}),window.localStorage.setItem("aol_already_seen",JSON.stringify(t))}},{key:"onClickNotifyMe",value:function(a){var s=this,r=window.document.getElementById("aol-blocked-notifications");a.addEventListener("click",function(){var n=document.getElementById("aol-notifications-wrap-overlay"),i=document.getElementById("aol-permission-notification-banner"),o=document.getElementById("aol-blocked-notifications-body");window.NEXUtils.requestPermission("aol-notifications-wrap-overlay",function(e){var t;s.notificationPanel.removeChild(a),n.classList.remove("shown"),i.classList.remove("shown"),1<o.childElementCount&&o.removeChild(o.lastChild),e||((e=c[s.userBrowser])?((t=window.document.createElement("img")).classList.add("blocked-notifications-body-image"),t.src=e,o.appendChild(t)):((t=window.document.createElement("p")).classList.add("blocked-notifications-body-text"),t.textContent="If you’d like to allow notifications, please go into your browser’s Website or Privacy settings and set the permissions for AOL.com to “Allow.”",o.appendChild(t)),r.classList.add("shown"),r.addEventListener("click",function(){r.classList.remove("shown")}))})})}},{key:"checkPermission",value:function(){var e,t;Notification&&"default"===Notification.permission&&((e=document.createElement("div")).classList.add("notifications-section"),e.classList.add("notifications-activate"),(t=document.createElement("p")).classList.add("notifications-text"),t.textContent="Get breaking news and big stories on your desktop.",e.appendChild(t),(t=document.createElement("div")).id="activate-notifications",t.classList.add("btn"),t.classList.add("notifications-cta"),t.textContent="Notify Me",e.appendChild(t),this.notificationPanel.appendChild(e),this.onClickNotifyMe(e),document.addEventListener("NotificationPermissionBanner:click",function(){e&&e.parentNode.removeChild(e)}))}},{key:"buildPanel",value:function(){var s=this,e=window.localStorage.getItem("aol_already_seen")||"[]";try{e=JSON.parse(e)}catch(s){return void window.localStorage.removeItem("aol_already_seen")}var r=e.reduce(function(e,t){return e[t]=t,e},{});this.checkPermission(),this.notifications.forEach(function(e){var t=document.createElement("div");t.classList.add("breaking-notification"),r[e.id]&&t.classList.add("already_seen");var n=document.createElement("div");n.classList.add("breaking-notification_image");var i=document.createElement("a");i.href=e.click_url;var o=document.createElement("img");o.src=e.image_url,i.appendChild(o),n.appendChild(i);var a=document.createElement("div");a.classList.add("breaking-notification_text");o=document.createElement("a");o.href=e.click_url,o.textContent=e.text,a.appendChild(o);i=document.createElement("div");i.classList.add("breaking-notification_time");o=document.createElement("p");o.textContent=e.days_from_publish,i.appendChild(o),t.appendChild(n),t.appendChild(a),t.appendChild(i),s.notificationPanel.appendChild(t)})}},{key:"countNewNotifications",value:function(){var t=0,e=window.localStorage.getItem("aol_already_seen");if(e){try{e=JSON.parse(e)}catch(t){this.addValueToBadge(5)}var n=e.reduce(function(e,t){return e[t]=t,e},{});this.notifications.forEach(function(e){n[e.id]||(t+=1)}),0<t&&this.addValueToBadge(t)}else t=5,this.addValueToBadge(t)}},{key:"addValueToBadge",value:function(e){this.notificationBadge.textContent=e,this.notificationBadge.classList.add("activeBadge")}}]),a)}},i={},o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="http://172.17.0.2:8080/public/assets/",o(o.s=415);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i});
