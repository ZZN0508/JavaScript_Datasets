ORA.common||(ORA.common={}),ORA.common.mutations||(ORA.common.mutations={}),ORA.common.mobile||(ORA.common.mobile={}),ORA.common.clientID={cfg:{DNTBehavior:"honorDNT",wtidTimeout:1e3,cookie:{enable:!0,name:"ORA_FPC",expires:63113851500,autoTLD:!1,sessionOnly:!1,expireDate:new Date((new Date).getTime()+63113851500),domain:""},endpoint:{clientIDServer:"dc.oracleinfinity.io",accountGuid:"abcde12345",protocol:"https"}},isClientIdSet:!1,isWaitForSetClientId:!1,waitForSetClientId:function(){ORA.common.TrackingPipeline.disableSeed(),ORA.common.clientID.isWaitForSetClientId=!0},setConfig:function(e){return e=e||{},e=ORA.common._shallowMerge(ORA.common.clientID.cfg,e),ORA.common.clientID.cfg=e,ORA.common.clientID.clientId&&ORA.common.clientID.storeClientId(ORA.common.clientID.clientId),!0},getClientID:function(e){var t=2!==ORA.common.isFpcSet(ORA.common.clientID.cfg.cookie.name);ORA.common.clientID.isWaitForSetClientId&&!ORA.common.clientID.isClientIdSet?ORA.common.clientID.setIdCallback=e:t?(t=ORA.common._getCookieAsObj(ORA.common.clientID.cfg.cookie.name),ORA.common.clientID.storeClientId(t.id),e&&e(t.id)):ORA.common.clientID.clientId?(ORA.common.clientID.storeClientId(ORA.common.clientID.clientId),e&&e(ORA.common.clientID.clientId)):ORA.common.clientID.getId(ORA.common.clientID.cfg.endpoint,e)},setClientID:function(e){if(void 0===e||"function"!=typeof e&&"string"!=typeof e)return!1;var t=e||"";if("function"==typeof t)try{t=e()}catch(e){ORA.Debug.debug("Error executing supplied clientID function : "+e.message)}return"undefined"!==(t=String(t))&&t.match(/^[^<=^; >]{1,100}$/gm)?(ORA.common.clientID.clientId=t,ORA.common.clientID.storeClientId(t),ORA.common.clientID.isClientIdSet=!0,ORA.fireEvent(new ORA.Event(ORA.Event.SET_CLIENT_ID,ORA.Event.STATUS_SUCCESS,null,e)),ORA.common.clientID.isWaitForSetClientId&&void 0!==ORA.common.clientID.setIdCallback&&ORA.common.clientID.setIdCallback(t),!0):(ORA.Debug.error("setClientId failure - either no client id passed or client id has illegal character"),!1)},storeClientId:function(e){var t,n,o=ORA.common.clientID.cfg.cookie,i=o.domain;o.enable?(n="",t=n=o.sessionOnly||ORA.common._isDNTSet()&&"anonymize"===ORA.common.clientID.cfg.DNTBehavior?n:"; expires="+o.expireDate.toGMTString(),n="",n=n=ORA.common._getConfigObject()&&ORA.common._getConfigObject().secureCookie&&"https:"===document.location.protocol.toLowerCase()?"; secure":n,o.autoTLD&&!0===o.autoTLD&&(i=ORA.cookieMgr.checkCookieOnDomainAndGetTLDomain(),o.domain=i),i=(""!==i?t+"; path=/; domain="+i:t+"; path=/")+n,(t=ORA.common._getCookieAsObj(o.name)).id=e,ORA.setCookie(o.name,t,i)):(ORA.common.clientID.clientId=null,ORA.common._deleteCookie(o.name,"/",o.domain))},getId:function(e,n){function o(e){ORA.common.clientID.clientId=e,ORA.common.clientID.storeClientId(ORA.common.clientID.clientId),n&&n(ORA.common.clientID.clientId)}ORA.common.protocols.xhrProtocol({endpoint:e.protocol+"://"+e.clientIDServer+"/v4/account/"+(e.accountGuid||"not_supplied")+"/client/id",type:"GET"},function(e){if(void 0===e||ORA.common.clientID.clientId)ORA.common.clientID.clientId?n(ORA.common.clientID.clientId):o(ORA.common.clientID.getUniqueID());else{var t={data:{}};try{t=JSON.parse(e)}catch(e){ORA.Debug.error("getId - Invalid JSON")}t.data.id?o(t.data.id):o(ORA.common.clientID.getUniqueID())}ORA.fireEvent(new ORA.Event(ORA.Event.COMMON_GETID,ORA.Event.STATUS_SUCCESS))},function(){o(ORA.common.clientID.getUniqueID())})},getUniqueID:function(){return window.crypto?"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},ORA.common.getMergedConfigs=function(e,t){var n=ORA.hasVal(t.config)?t.config:{},t=ORA.hasVal(t.data)?t.data:{},n=ORA.paramsMerge(JSON.parse(JSON.stringify(e)),n),t=e.data?ORA.paramsMerge(e.data,t):t;return ORA.hasVal(t)&&(n.data=JSON.parse(JSON.stringify(t))),n},ORA.common._getConfigObject=function(){return ORA.analyticsModule?ORA.analyticsModule.prototype.oraConfigObj:{}},ORA.common._mergeCopy=function(e,t,n){for(var o in e)if(e.hasOwnProperty(o)&&"[object Object]"===Object.prototype.toString.call(e[o]))t[o]=n(t[o]||{},e[o]);else{if(!e.hasOwnProperty(o))break;t[o]=e[o]}},ORA.common._shallowMerge=function(e,t){return"[object Object]"===Object.prototype.toString.call(t)&&ORA.common._mergeCopy(t,e,ORA.common._shallowMerge),e},ORA.common._deepMerge=function(){for(var e={},t=[].splice.call(arguments,0);0<t.length;){var n=t.splice(0,1)[0];"[object Object]"===Object.prototype.toString.call(n)&&ORA.common._mergeCopy(n,e,ORA.common._deepMerge)}return e},ORA.common.CookieMgrClass=function(e,t){function r(e,t){e.replace(/\s/g,""),s[e]=t}function a(){if(c=document.cookie)for(var e=c.split(";"),t=0;t<e.length;t++){var n,o=e[t].split("="),i=o.shift().replace(/^\s+|\s+$/g,"");1<=o.length&&(n=o.join("=")),r(i,u(n))}l=!0}var c,s={},l=!1,g=e||function(e){return e},u=t||function(e){return e},m=this;m.createCookie=function(e,t,n,o,i,r){var a=null;"session"!==o&&void 0!==n&&(a=new Date).setTime(a.getTime()+n),n="",ORA.hasVal(i)&&""!==i&&(n="; domain="+i),i=null!==r&&""!==r&&void 0!==r?"; path="+r:"",r="",null!==a&&(r="; expires="+a.toGMTString()),m.setCookie(e,t,n+i+r)},m.getCookie=this._getCookieRaw=function(e){return l||a(),ORA.Debug.debug("getCookie: ["+e+", "+s[e]+"]"),s[e]},m.getCookieAsObj=function(e,t){!1===l&&a();function n(e){var n={};return e&&(-1===e.indexOf("=")?n[e]=e:ORA.common.extendArray(e.split(i)).forEach(function(e){var t=e.split("=");e=t.shift(),0<t.length&&e&&(t=t.join("="),n[e]=t)})),n}var o,i=t||":",r={};if(e)return n(s[e]);for(o in s)s.hasOwnProperty(o)&&(r[o]=n(s[o]));return r},m.setCookie=function(e,t,n,o){var i=n||"";if(o=o||":","object"==typeof t){var r,a=[];for(c in t)t.hasOwnProperty(c)&&"function"!=typeof t[c]&&((r=[]).push(c,t[c]),a.push(r.join("=")));t=a.join(o)}else t=void 0!==t?t:"";var c=!0;o="; secure",(c=ORA.common._getConfigObject()&&!1===ORA.common._getConfigObject().secureCookie?!1:c)&&"http:"!==document.location.protocol.toLowerCase()||(o=""),document.cookie=e+"="+g(t)+i+o,ORA.Debug.debug("setCookie: "+e+" with data: ["+g(t)+"]"+n+o),e=e+"="+t+i+o;try{var s=e.split("=")[0],u=window.localStorage.getItem("ORA_COOK_STORE");n={},u&&(n=JSON.parse(u));var m=e.match(/expires=(.*?)(;|$)/);m&&0<m.length&&(new Date(m[1])>new Date?n[s]=e:delete n[s],window.localStorage.setItem("ORA_COOK_STORE",JSON.stringify(n)))}catch(e){ORA.Debug.debug("Error writing local storage: "+e.message)}l=!1},m.addCookie=m.setCookie,m.deleteCookie=m.cookieRemove=function(e,t,n){var o=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT";t&&(o+="; path="+t),n&&(o+="; domain="+n),document.cookie=o,ORA.Debug.debug("deleteCookie: ["+e+", "+s[e]+"]"),delete s[e];try{var i=window.localStorage.getItem("ORA_COOK_STORE");t={},(t=i?JSON.parse(i):t)&&t[e]&&(delete t[e],window.localStorage.setItem("ORA_COOK_STORE",JSON.stringify(t)))}catch(e){ORA.Debug.debug("Error deleting local storage: "+e.message)}},m.doesCookieExist=function(e){return l||a(),ORA.Debug.debug("doesCookieExist: "+e+" = "+!!s[e]+"]"),!!s[e]},m.checkAndDeleteCookie=function(e,t){return-1<document.cookie.indexOf(t)&&(this.deleteCookie(t,"/","."+e),!0)},m.checkCookieOnDomainAndGetTLDomain=function(){var e=window.location.hostname,t=e.split("."),n="test_cookie"+Math.floor(9e4*Math.random()).toString();if(1===t.length)return e;for(e=t.length-1;0<=e;--e){var o=t.slice(e).join("."),i=new Date;if(i.setDate(i.getDate()+1),i=";domain=."+o+";path=/;expires="+i.toUTCString(),m.setCookie(n,"cookie",i),m.checkAndDeleteCookie(o,n)){var r=o;break}}return"."+r};try{var n=window.localStorage.getItem("ORA_COOK_STORE"),o={};if(n){for(var i in o=JSON.parse(n))o.hasOwnProperty(i)&&!m.doesCookieExist(o[i].split("=")[0])&&(document.cookie=o[i]);l=!1}}catch(e){ORA.Debug.debug("Error reading local storage: "+e.message)}return m.addItemIntoCache=r,m},ORA.common.CountDownLatchClass=function(e,t,n){var o=n||"CountdownLatchClass",i=e||0,r=t&&ORA.common.isFn(t)?t:null,a=!1;this.countUp=function(){i++},this.setCount=function(e){i=e},this.getCount=function(){return i},this.countDown=function(){if(!(i<=0)){--i,ORA.Debug.trace("Countdown Latch counting down by 1, new count: "+i,o);try{0===i&&r&&!1===a&&(r(),a=!0,ORA.Debug.trace("Countdown Latch running callback",o))}catch(e){ORA.Debug.error("CountDownLatch error:  failed to execute callback","020",e,o)}}},this.await=function(e){r=e&&ORA.common.isFn(e)?e:null},this.reset=function(){i=0,r=null}},ORA.common._createScriptEl=function(e,t,n,o){var i={type:"text/javascript",async:"true",defer:"true"};i.onerror=o||function(){"_comm"===t?(ORA.Debug.error("OTS request fail: '"+e+"'",145),ORA.Debug.error("basic protocol failure ... aborting.  Check _comm url/payload",145)):ORA.Debug.error("_createScriptEl - aborting ... "+t,137)},i.src=e,window.setTimeout(function(){ORA.common._createElement("script",i,null,document.getElementsByTagName("head")[0]),n?n():ORA.Debug.trace("OTS request w/ basic protocol success")},0)},ORA.common._createElement=function(e,t,n,o,i){if(e=(i=!i?(i=o?o.ownerDocument:i)||document:i).createElement(e),t)for(var r in t)t[r]&&t.hasOwnProperty(r)&&("onerror"===r?e.onerror=t[r]:e.setAttribute(r,t[r]));if(n)for(var a in n)n[a]&&n.hasOwnProperty(a)&&ORA.addDOMEvent(e,a,n[a]);return o&&o.appendChild(e),e},ORA.common._functionFactory=function(e){return ORA.common.isFn(e)?e:"string"==typeof e&&0<e.length?new Function(e):null},ORA.common._execScript=function(a,b){try{return a&&0!==a.length&&""!==a?b?eval(a):window.execScript?window.execScript(a):window.eval(a):null}catch(c){throw ORA.Debug.error("_execScript failure:\n"+a,138,c),c}},ORA.common.getQryParams=function(t){var e=(0<(e=t.split(/[#]/g)).length?e[0]:t).split(/[&?]/g),n={};try{for(var o=0,i=e.length;o<i;++o){var r=e[o].match(/^([^=]+)(?:=([\s\S]*))?/);if(r&&r[1]){var a="";try{a=decodeURIComponent(r[1])}catch(e){try{a=unescape(r[1])}catch(e){a=r[1]}}var c="";try{c=void 0!==r[2]?decodeURIComponent(r[2]):void 0}catch(e){try{c=unescape(r[2])}catch(e){c=r[2]}}n[a]?(n[a]=[n[a]],n[a].push(c)):n[a]=c}}}catch(e){ORA.Debug.error("problem getting params from: "+t)}return n},ORA.common._isDNTSet=function(){return"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||1===navigator.doNotTrack||"1"===navigator.msDoNotTrack||"1"===window.doNotTrack},ORA.common._isEloquaOptOutSet=function(e){return e.ELOQUA&&void 0!==e.ELOQUA.GUID&&"00000000000000000000000000000000"===e.ELOQUA.GUID},ORA.common._isOracleOptOutSet=function(e){return e.OPTOUT&&void 0!==e.OPTOUT.s33&&"0"===e.OPTOUT.s33},ORA.common._isInfinityOptOutSet=function(e){return e["Infinity.optout"]&&void 0!==e["Infinity.optout"].state&&"1"===e["Infinity.optout"].state},ORA.common._isWTOptOutSet=function(e){return!!e.WTOPTOUT&&e.WTOPTOUT[1]},ORA.common._isOptedOut=function(e){return void 0===ORA.common._isOptedOut.invalidate&&(ORA.common._isOptedOut.invalidate=!1),void 0!==this.rtnValue&&void 0===e&&!ORA.common._isOptedOut.invalidate||(ORA.common._isOptedOut.invalidate=!1,e=e||ORA.common._getCookieAsObj(),this.isEloqua=ORA.common._isEloquaOptOutSet(e),this.isOPTOUT=ORA.common._isOracleOptOutSet(e),this.isInfinityOptout=ORA.common._isInfinityOptOutSet(e),this.isWTOPTOUT=ORA.common._isWTOptOutSet(e),this.rtnValue=this.isEloqua||this.isOPTOUT||this.isInfinityOptout||this.isWTOPTOUT),this.rtnValue&&(e="OPTOUT reason- isEloqua: "+this.isEloqua+", isOPTOUT: "+this.isOPTOUT+", isInfinityOptout: ",e+=this.isInfinityOptout+", isWTOPTOUT: "+this.isWTOPTOUT,ORA.Debug.info(e)),this.rtnValue},ORA.common._setInfinityOptOut=function(e){var t=new Date,n="";isNaN(e)||(e=e||31536e7,n=";expires="+(t=new Date(t.getTime()+e)).toUTCString()),ORA.common._setCookie("Infinity.optout","state=1",n+";path=/"),ORA.common._isOptedOut.invalidate=!0},ORA.common.loadJS=function(e,t,n){var o=t;arguments.length<2&&(o=!0);var i=document.createElement("script");i.type="text/javascript",i.async=o,i.src=e,(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,o)},ORA.common._getIEVer=function(e){return e=void 0!==e?e:navigator.userAgent,/msie\s|trident\/|edge\//i.test(e)&&parseInt(+/(edge\/|rv:|msie\s)([\d.]+)/i.exec(e)[2],10)||null},ORA.common.isSafariBrowser=function(e){return-1!==(e=(e=void 0!==e?e:navigator.userAgent).toLowerCase()).indexOf("safari")&&e.indexOf("chrome")<0},ORA.common.isMobileBrowser=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},ORA.common.visitMetaTags=function(e,t,n){if((t=t||window.document).documentElement)t=t.getElementsByTagName("meta");else{if(!t.all)return;t=t.all.tags("meta")}for(var o=t.length,i=0;i<o;i++){var r=t.item(i).name,a=t.item(i).content;0<r.length&&e(r,a,n)}},ORA.common.elemExists=function(e){return!(!(e=ORA.getSelector()(e))||0===e.length)},ORA.common.createObserver=function(e,n){try{if("undefined"==typeof MutationObserver)return ORA.Debug.error("handleSPARules:  browser does not support MutationObserver",303),null;var t=ORA.common.extendArray;return(0,ORA.common.elemExists)(e)?(t(ORA.getSelector()(e)).forEach(function(t){new MutationObserver(function(e){e.forEach(function(e){ORA.Debug.superfine("OBSERVER: "+e.type+" on "+t+", executing callback"),ORA.Debug.superfine("executing callback: "+n.toString()),n(e)})}).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),ORA.Debug.debug("createObserver:  Observing "+t.toString())}),!0):(ORA.Debug.trace("handleSPARules:  failed to attach observer to '"+e+"'"),!1)}catch(e){return ORA.Debug.debug("createObserver:  MutationObserver API unavailable"),null}},ORA.common.protocols||(ORA.common.protocols={}),ORA.common.protocols={corsPost:function(n,o,i,r){function t(e){return function(){c||(ORA.Debug.error(e+": payload:"+ORA.common.JSONPrettify(o)),!ORA.hasVal(n.fallbackEndpoint)&&r?r(e):s(),c=!0)}}var a=n.timeout||2e3,e={endpoint:n.endpoint,type:"POST"},c=!1,s=function(){var e,t;!c&&ORA.hasVal(n.fallbackEndpoint)&&(null===(t=null===(t=(e=ORA.common.TrackingPipeline).getCommProtocol(ORA.common.CommManager.GIF))?e.getCommProtocol(ORA.common.CommManager.DEFAULT):t)?ORA.Debug.error("Couldnt find a fallback protocol","COMM"):(ORA.Debug.debug("Falling back to "+n.fallbackEndpoint,"COMM"),c=!0,t({endpoint:n.fallbackEndpoint,timeout:a},o,i,r)))},u=function(e){c||(ORA.Debug.trace("corsPost: handling response='"+e+"'"),i&&i(e),c=!0)},m={events:[o]};ORA.Debug.debug("DCApi v2 payload: "+ORA.common.JSONPrettify(m));try{this.makeRequest(e,m,u,t,function(e){ORA.Debug.trace("xdrRespHandler response='"+e.responseText+"'"),u(e.responseText)},"application/json"),ORA.Debug.debug("endpoint: "+e),5<=ORA.Debug.getDebugLevel()&&ORA.Debug.trace("payload: "+ORA.common.JSONPrettify(o)),window.setTimeout(function(){c||(ORA.Debug.debug("Timed out....trying fallback"),s(),c=!0)},a)}catch(e){t(e)()}},collectionV2Post:{name:"collection.v2.post",protocol:function(e,t,n,o){if(!t)throw Error("Payload is not defined");try{ORA.common.protocols.corsPost(e,t,n,o)}catch(e){ORA.Debug.error("DcApi v2 failed: "+e)}}},makeRequest:function(e,t,n,o,i,r){var a=e.type||"GET",c=e.endpoint;e=void 0===e.async;"string"==typeof t&&(t=JSON.parse(t));try{var s=new XMLHttpRequest;"withCredentials"in s?(e&&(s.onreadystatechange=this.xhrRespHandler(s,n,o)),s.open(a,c,e),s.withCredentials=!0):(s=new XDomainRequest,e&&(s.onload=i(s)),s.open(a,c,e)),"GET"!==a&&r&&s.setRequestHeader("Content-type",r),s.onerror=o,s.ontimeout=function(){ORA.Debug.debug("xhrProtocol: request timed out "),o("xhrProtocol: request timed out")},s.send(JSON.stringify(t))}catch(e){ORA.Debug.debug("No CORS Support or Disabled"),o(e)}},createEndpointUrl:function(e,t,n){var o,i,r,a,c=[];for(o in t.dcsdat=(new Date).getTime(),t)t.hasOwnProperty(o)&&c.push((i=o,r=t[o],a=void 0,r,n.i18n&&""!==n.exre&&!n.exre.test(i)&&(a=r,r=("function"==typeof encodeURIComponent?encodeURIComponent:escape)(a)),i+"="+function(e,t){var n,o=e;if(""===t)return escape(o);if(null==o)return"";for(n in o=o.toString(),t)t[n]instanceof RegExp&&(o=o.replace(t[n],n));return o}(r,n.re)));return 0<c.length&&(e+="?"+c.join("&")),(t=ORA.common._getIEVer())&&t<9&&2048<e.length&&(e=e.substring(0,2040)+"&wt.tu=1",ORA.Debug.debug("Warning: exceeded max size of limit 2047. Truncating payload.")),e},gifProtocol:function(e,t,n,o){var i=e.endpoint,r=e.conf||{},a=!1,c=e.timeout||2e3,s=n||function(){},u=o||function(){};if(!t)throw Error("Payload is not defined");return ORA.common._isOptedOut()&&e.protocolType&&"default"!==e.protocolType?(ORA.Debug.debug("Sending no data due to opted out"),a=!0,ORA.common.invokeFn(u)):(e=ORA.common.protocols.createEndpointUrl(i,t,r),(t=new Image).onload=function(){if(!a)return a=!0,ORA.common.invokeFn(s),!0},t.onerror=function(){if(!a)return a=!0,ORA.common.invokeFn(u),!0},window.setTimeout(function(){a||(a=!0,ORA.common.invokeFn(u))},c),ORA.Debug.debug("gifProtocol sending:"+e),t.src=e),!0},xhrProtocol:function(e,t,n,o,i){var r=!1,a=e.endpoint,c=e.type||"GET",s=i||"application/json;charset=UTF-8";i||(s="application/json;charset=UTF-8");var u=function(e){if(!r){if(ORA.Debug.trace("xhrProtocol: handling response='"+e+"'"),t)try{t(e)}catch(e){ORA.Debug.debug("xhrProtocol: error calling success callback: "+e.message)}r=!0}};if(i=function(e){if(!r){if(ORA.Debug.error(e),n)try{n(e)}catch(e){ORA.Debug.debug("xhrProtocol: error calling failure callback: "+e.message)}r=!0}},-1==="GETPUTPATCHPOST".indexOf(c))i("Unknown type of request: "+c);else{c=function(e){return function(){ORA.Debug.trace("xdrRespHandler response='"+e.responseText+"'"),u(e.responseText)}};try{this.makeRequest(e,o,u,i,c,s),ORA.Debug.debug("endpoint: "+a)}catch(e){ORA.Debug.debug("Got an exception"+e)}}},beaconProtocol:{name:"beaconProtocol",protocol:function(e,t){var n=e.endpoint,t={events:[t]};"sendBeacon"in window.navigator?(n=navigator.sendBeacon(n,JSON.stringify(t)),ORA.Debug.debug("navigator send "+n)):(e.type="POST",e.async=!1,ORA.common.protocols.makeRequest(e,t))}},xhrRespHandler:function(e,t,n){return function(){try{if(200===e.status)switch(e.readyState){case 0:case 1:case 2:case 3:ORA.Debug.superfine("xhrProtocol: in progress, state: "+e.readyState);break;case 4:ORA.Debug.debug("xhrProtocol: response received"),t(e.responseText);break;default:ORA.Debug.debug("xhrProtocol: unusual readyState="+e.readyState)}else 4===e.readyState&&n("xhrProtocol xhrResponseHandler:  communication error, http(cor) status: "+e.status+" response'"+e.responseText)}catch(e){n(e)}}}},ORA.common.isFn=function(e){return"[object Function]"===Object.prototype.toString.call(e)},ORA.common.isArray=function(e){return"object"==typeof e&&e instanceof Array},ORA.common.isRegExp=function(e){return"object"==typeof e&&e.constructor===RegExp},ORA.common.invokeFn=function(e,t){try{t?e(t):e()}catch(e){ORA.Debug.error("Error Invoking function "+e)}},ORA.common.extendArray=function(e){return e&&(e.forEach||(e.forEach=function(e,t){for(var n=t||window,o=0,i=this.length;o<i;++o)e.call(n,this[o],o,this)}),e.filter||(e.filter=function(e,t){for(var n=t||window,o=ORA.common.extendArray([]),i=0,r=this.length;i<r;++i)e.call(n,this[i],i,this)&&o.push(this[i]);return o}),e.indexOf||(e.indexOf=function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1})),e},ORA.common.extendObject=function(i){return i&&(i.forEach||(i.forEach=function(e,t){var n,o=t||window;for(n in this)this.hasOwnProperty(n)&&i.forEach!==i[n]&&i.length!==i[n]&&e.call(o,this[n],n,this)}),i.length||(i.length=function(){var e,t=0;for(e in this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&t++;return t})),i},ORA.common.isEmpty=function(e){if(!e||Object.keys&&0===Object.keys(e).length)return!0;for(var t in e)if(e.hasOwnProperty(t)){if(""===t&&void 0===e[t])break;return!1}return!0},ORA.common.objectToKVPArray=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&""!==e[t]&&void 0!==e[t]&&"function"!=typeof e[t]&&n.push({k:t,v:e[t]});return n},ORA.common.extendProps=function(e,t,n){for(var o in t)!n&&void 0!==e[o]||(e[o]=t[o]);return e},ORA.common.JSONPrettify=function(e){try{if("undefined"!=typeof JSON)return JSON.stringify(e,null,2)}catch(e){ORA.Debug.debug(e.toString())}},ORA.common.trim=function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},ORA.common.getAttrIfExistsElseDefault=function(e,t,n){if(ORA.hasVal(e[t]))return e[t];if(ORA.hasVal(n))return n;throw"ORA.common.getAttrIfExistsElseDefault: missing fieldName: "+t},ORA.common.isInteger=function(e){return e=!isNaN(e)&&(e=parseFloat(e))==e},ORA.common.getObjId=function(e){function t(e){return window.CSS&&window.CSS.escape?window.CSS.escape(e):e}var n=[],o=e;if(e.id)return"#"+t(o.id);for(;o.parentNode;){if(o.id){n.unshift("#"+t(o.id));break}o===o.ownerDocument.documentElement?n.unshift(o.tagName):(e=function(e){for(var t=1;e.previousElementSibling;)t++,e=e.previousElementSibling;return t}(o),n.unshift(o.tagName+":nth-child("+e+")")),o=o.parentNode}return n.join(" > ")},ORA.common.getObjIdStrict=function(e){for(var t=[];e.parentNode;){if(e===e.ownerDocument.documentElement)t.unshift(e.tagName);else{for(var n=1,o=e;o.previousElementSibling;)n++,o=o.previousElementSibling;t.unshift(e.tagName+":nth-child("+n+")")}e=e.parentNode}return t.join(" > ")},ORA.common._qsaEscape=function(e){if(null==e||"string"!=typeof e)return e;for(var t="",n=0;n<e.length;){var o=e.charAt(n);t+=o=/\s/g.test(o)?"":/[ !"#$%&'()*+,./;<=>?@\[\\\]^`{|}~:]/.test(o)?"\\"+o:o,n++}return/^_/.test(t)&&(t="\\_"+t.slice(1)),/^-[-\d]/.test(t)&&(t="\\-"+t.slice(1)),e=e.charAt(0),t=/\d/.test(e)?"\\3"+e+" "+t.slice(1):t},ORA.common._getClassAttrValue=function(e){var t="";return(t=e&&"string"==typeof e.className?e.className:t).replace(/^\s+/,"").replace(/\s+$/,"")},ORA.common._isDynamicClass=function(e){var t=/\d{4}/i.test(e)||/cet-responsive-\d+/i.test(e)||/^owid/i.test(e);return e=!!~["active","hovered"].indexOf(e),t||e},ORA.common._getClasses=function(e){e=ORA.common._getClassAttrValue(e).split(" ");for(var t=[],n=0;n<e.length;n++)e[n]&&!ORA.common._isDynamicClass(e[n])&&t.push(ORA.common._qsaEscape(e[n]));return t},ORA.common._isYuiDynamicId=function(e){return!!/\s+/i.test(e)||(!!/ember\d+/i.test(e)||(!!/yui_/i.test(e)||(!!/^owid/i.test(e)||(!!/\d{4}/i.test(e)||!!/anonymous_element_\d+/i.test(e)))))},ORA.common._getTheSameSiblings=function(e,t){for(var n=e.parentNode,o=Array.prototype.slice.call(n.querySelectorAll(t)),i=[],r=0;r<o.length;r++){var a=o[r];0<=Array.prototype.indexOf.call(n.children,a)&&i.push(a)}return i},ORA.common._getSubSelectorByClasses=function(e,t,n){if(1===e.length)return n;var o=n;for(e=Array.prototype.indexOf.call(e,t),t=0;t<e;t++)o+="~"+n;for(o+=":not("+n,t=0;t<e+1;t++)o+="~"+n;return o+")"},ORA.common._getSubSelectorByTagWithIndex=function(e,t,n){return 1===e.length?n:n+":nth-of-type("+((e=Array.prototype.indexOf.call(e,t))+1)+")"},ORA.common._getUniqueId=function(e,t){if(t&&t.id){var n=ORA.common._qsaEscape(t.id);if(n&&!ORA.common._isYuiDynamicId(t.id)){var o=n;if(/^\d/gi.test(t.id)&&(o=t.id),1===e.querySelectorAll('[id="'+o+'"]').length)return n}}return null},ORA.common._filterUniqueClasses=function(e,t){for(var n="",o=0;o<t.length&&(!t[o]||"-"===t[o]||(n+="."+t[o],1!==e.querySelectorAll(n).length));o++);return n},ORA.common.getObjIdClasses=function(e){if(!e||"object"!=typeof e&&1!==e.nodeType||!e.ownerDocument)return"";var t=e,n=[];for(e=e.ownerDocument.documentElement;t.parentNode&&t!==e;){if(i=ORA.common._getUniqueId(e,t)){n.unshift("#"+i);break}if((i=ORA.common._getClasses(t)).length){if(i=ORA.common._filterUniqueClasses(e,i),1===e.querySelectorAll(i).length){n.unshift(i);break}var o=ORA.common._getTheSameSiblings(t,i),i=ORA.common._getSubSelectorByClasses(o,t,i);n.unshift(i)}else i=t.tagName.toLowerCase().replace(":","\\:"),o=ORA.common._getTheSameSiblings(t,i),i=ORA.common._getSubSelectorByTagWithIndex(o,t,i),n.unshift(i);t=t.parentNode}return n.join(" > ")},ORA.common.encode=function(e){for(var t=[],n=0;n<e.length;n++)t.push(function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n.push(String(t)),n.push(encodeURIComponent(e[t])));return n.join(",")}(e[n]));return t.join(":")},ORA.common.decode=function(e){var t=[];e=e.split(":");for(var n=0;n<e.length;n++)t.push(function(e){e=e.split(",");for(var t={},n=0;n<e.length;n+=2)t[e[n]]=decodeURIComponent(e[n+1]);return t}(e[n]));return t},ORA.common.isFpcSet=function(e,t){var n=ORA.common._getCookieAsObj;return(0,ORA.common.isEmpty)(n=n(e))?2:t===n.id?0:3},ORA.common.CommManagerClass=function(){var r={};this.OTS="ots",this.JSONP="jsonp",this.GIF="gif";var a=this.DEFAULT="default",e=ORA.common.protocols.gifProtocol;this.execReq=function(e){if(e.isSendEnabled()){if(0===e.endpoints.length)return void ORA.Debug.debug("Warning: no endpoint for "+JSON.stringify(e));for(var t=0;t<e.endpoints.length;t++){var n=e.endpoints[t],o=n.desc||"",i=n.protocolType||a;if(!i)throw"Unable to determine protocol from message "+o;(o=r[i])?o(n,e.payload,e.success,e.fail):ORA.Debug.error("No comm protocol registered for msg:'"+JSON.stringify(e,null,2)+"'")}}else ORA.Debug.trace("Payload is not being sent, the sendDisasble flag is set :"+JSON.stringify(e,null,2)),ORA.common.invokeFn(e.success);ORA.fireEvent(new ORA.Event(ORA.Event.COMMON_COM_EXEC_REQ,ORA.Event.STATUS_SUCCESS))},this.setProtocol=function(e,t,n){r[e]&&ORA.Debug.debug("warning: protocol '+name+' exists, so overwriting"),n&&!0===n&&(a=e),ORA.Debug.debug("setProtocol() - name: "+e),ORA.Debug.trace("setProtocol() - protocol: "+t.toString()),r[e]=t},this.removeProtocol=function(e,t){r[e]?(delete r[e],ORA.Debug.debug("removing protocol: "+e)):ORA.Debug.debug("warning: delete of protocol "+e+", because doesn't exist")},this.getProtocol=function(e){return r[e]||null},this.setProtocol(this.DEFAULT,e)},ORA.common.CommManager=new ORA.common.CommManagerClass,ORA.common.Message=function(e){var o=this;if(!e.endpoints)throw Error("Message created w/o endpoint, params: "+JSON.stringify(e));if(!e.payload)throw Error("Message created w/o payload, params: "+JSON.stringify(e));for(var t,n,i=0;i<e.endpoints;i++)if(!e.endpoints[i].endpoint)throw Error("Message must contain an endpoint"+JSON.stringfy(e.endpoints));o.params=JSON.parse(JSON.stringify(e)),o.endpoints=this.params.endpoints,o.payload=this.params.payload,o.desc=this.params.desc,e.success&&(t=e.success),e.fail&&(n=e.fail),o.params.userDefinedParams&&(o.userDefinedParams=o.params.userDefinedParams);function r(e,t){try{void 0!==e&&e(o,t)}catch(e){ORA.Debug.error("Failure in message callback for: "+o.desc)}}o.fail=function(e){r(n,e)},o.success=function(e){r(t,e)},o.setParam=function(e,t,n){ORA.hasVal(e)&&ORA.hasVal(t)?(e=e.toLowerCase(),void 0!==o.payload[e]&&!0!==n?ORA.Debug.trace("Not overriding payload param '"+e+"' to '"+t+"'"):o.payload[e]=t):ORA.Debug.error("setParam - missing either key or val, not setting")},o.getParam=function(e){return e?(e=e.toLowerCase(),void 0===o.payload[e]?null:o.payload[e]):(ORA.Debug.error("getParam - missing key"),null)};var a=!0;o.sendDisable=function(){a=!1},o.sendEnable=function(){a=!0},o.isSendEnabled=function(){return a}},ORA.common.MutationMgrClass=function(){var o,i,a=(i={1:{},2:{},3:{}},(o={}).put=function(e,t,n){n=void 0!==n?n:2;null!==o.get(e)&&(ORA.Debug.debug("Warning: mutant id: ' "+e+"' already registered, overwriting mutation and priority "),o.rm(e)),i[n][e]=t},o.get=function(e){for(var t in i)if(i[t][e])return i[t][e];return null},o.rm=function(e){for(var t in i)i[t][e]&&delete i[t][e]},o.getMutationQueue=function(){function e(e,t,n){o.enqueue({id:t,mutant:n[t]})}var o=new ORA.common.Queue;return ORA.common.extendObject(i[1]).forEach(e),ORA.common.extendObject(i[2]).forEach(e),ORA.common.extendObject(i[3]).forEach(e),o},o);this.register=function(t,n,e){try{a.get(t)&&ORA.Debug.debug("Warning:  "+t+" has a registered mutation, overwriting"),a.put(t,n,e),ORA.Debug.debug("mutant id: '"+t+"' registered per mutant registration act"),ORA.Debug.superfine("mutation: '"+n+"'")}catch(e){ORA.Debug.error("Error:  MutationMgr unable to register mutation id: "+t+", mutation: "+n,null,e)}},this.deregister=function(t){try{a.get(t)&&(a.rm(t),ORA.Debug.debug("mutant id: '"+t+"' deregistered"))}catch(e){ORA.Debug.error("Error:  MutationMgr unable to deregister mutation id: "+t,null,e)}},this.getMutation=function(e){return a.get(e)?a.get(e):null},this.mutate=function(e){try{for(var t=a.getMutationQueue();!t.isEmpty();){var n,o,i,r=t.dequeue();ORA.Debug.superfine("mutant: '"+r.id+"', before(unmutated) msg: "+ORA.common.JSONPrettify(e)),e.params&&"collect"===e.params.desc?(n="analyticsAnnotate"===r.id,o=e.params.applyMutations||!1,i=e.params.sendSessionInfo||void 0===e.params.sendSessionInfo,(o||i)&&(i&&n||o&&!n)&&r.mutant(e)):r.mutant(e),ORA.Debug.trace("mutant: '"+r.id+"' has processed msg"),ORA.Debug.superfine("mutant: '"+r.id+"', after(mutated) msg: "+ORA.common.JSONPrettify(e))}}catch(e){ORA.Debug.error("Problem with mutation error: '"+e+"'","019",e,"mutationMgrClass")}},this.listMutations=function(){for(var e,t=a.getMutationQueue(),n=[];!t.isEmpty();)e=t.dequeue(),ORA.Debug.debug(JSON.stringify(e)),n.push(e);return n}},ORA.common.Queue=function(){var t=[],n=0;this.getLength=function(){return t.length-n},this.isEmpty=function(){return 0===t.length},this.enqueue=function(e){t.push(e)},this.dequeue=function(){if(0!==t.length){var e=t[n];return 2*++n>=t.length&&(t=t.slice(n),n=0),e}},this.peek=function(){if(0<t.length)return t[n]}},ORA.common.TrackingPipelineClass=function(){var t=!0,n=this,r={},a=0,o={},i=!1,c=new ORA.common.Queue,s=new ORA.common.CommManagerClass,u=new ORA.common.MutationMgrClass,m=ORA.common.Message;this.registerProduct=function(e,t,n){if(!e)throw Error("Product must have a name");var o,i;r[e]?ORA.Debug.debug("Product "+e+"already registered"):(o={name:e,timeout:4e3,timedOutCallback:function(){},ready:!1,timedOut:!1},void 0!==t&&(o.timeout=t),n&&(o.timedOutCallback=n),r[o.name]=o,a++,ORA.Debug.debug("registering product "+o.name+" to TrackingPipeline"),i=this,window.setTimeout(function(){if(!o.ready&&(o.timedOut=!0,i.productCountDown(),ORA.Debug.debug("Product "+JSON.stringify(o)+" timed out"),o.timedOutCallback))try{o.timedOutCallback()}catch(e){ORA.Debug.error("Failure in product callback for: "+o)}},o.timeout))},this.getProduct=function(e){return r[e]},this.productIsReady=function(e){var t;r[e]?!0===(t=r[e]).ready?ORA.Debug.debug("Product "+t.name+" is already 'ready'"):t.timedOut?ORA.Debug.debug("Product "+t.name+" has timed out"):(t.ready=!0,ORA.Debug.debug("Pipeline product: "+e+" set to ready"),this.productCountDown()):ORA.Debug.debug("Product "+e+" isn't registered. Can't set to ready")},this.getProductCount=function(){return a},this.productCountDown=function(){var e;0!==a&&a--,0===a&&!1===i&&(!0===t?(e=new m({endpoints:[],desc:"seed message",payload:n.getSeedMsgPayload(),mutation:{pageview:!0}}),n.enqueue(e),ORA.Debug.debug("TrackingPipeline enqueued the seed msg")):ORA.Debug.trace("Seed Message disabled, not enqueueing"),this.flush())};function l(e){var t=(t=ORA.common._getConfigObject())&&t.DNTBehavior||"honorDNT";if(ORA.common._isDNTSet())switch(t){case"honorDNT":return ORA.Debug.debug("*** DNTBehavior: DNT is set in the browser - canceling payload ***"),0;case"anonymize":e.payload.dcsipa="1",ORA.Debug.debug("DNTBehavior: DNT is set to anonymize the session, adding dcsipa=1 to payload");break;case"ignoreDNT":ORA.common._isDNTSet()&&ORA.Debug.debug("DNTBehavior: DNTBehavior is set to ignore the browser DNT setting")}u.mutate(e),s.execReq(e)}this.enqueue=function(e){if(!e)throw Error("Message isn't defined!");return ORA.Debug.trace("enqueueing message: "+JSON.stringify(e,null,2)),c.enqueue(e),1},this.flush=function(){for(;!c.isEmpty();){var e=c.dequeue();l(e)}this.enqueue=function(e){l(e)},i=!0,ORA.fireEvent(new ORA.Event(ORA.Event.COMMON_TRACKING_FLUSH,ORA.Event.STATUS_SUCCESS)),ORA.Debug.debug("TrackingPipeline has been flushed")},this.getLength=c.getLength,this.setCommProtocol=s.setProtocol,this.removeCommProtocol=s.removeProtocol,this.getCommProtocol=s.getProtocol,this.registerMutation=u.register,this.deregisterMutation=u.deregister,this.getMutation=u.getMutation,this.listMutations=u.listMutations,this.registerProducts=function(){if(ORA&&ORA.getTrackingPipelineProducts){var e,t=ORA.getTrackingPipelineProducts();for(e in t)t.hasOwnProperty(e)&&this.registerProductWithTimeout(t,e)}},this.registerProductWithTimeout=function(e,t){e[t].timeout?this.registerProduct(e[t].name,e[t].timeout):this.registerProduct(e[t].name)},this.disableSeed=function(){ORA.Debug.debug("Seed Message disabled, initial seed message will not be enqueued"),t=!1},this.seedMsgEnabled=function(){return t},this.setSeedMsgPayload=function(e){o=e},this.getSeedMsgPayload=function(){return o},this.hasFlushed=function(){return i}},ORA.common.PluginMgrClass=function(e){var s,u=this,d=e||"ora-plugins",O={},f=new ORA.common.CountDownLatchClass(0,null,d+":PluginMgrClass"),m=0,t=!1,n=!1;u.setReady=function(){n=!0},u.isReady=function(){return n},u.getPlugin=function(e){return O[e]||null},u.clearPlugins=function(){O={},f.reset()},u.setInjectConfigsCb=function(e){s=e},u.setInitPluginsCallback=function(e){f.await(e)},u.setNumExpectedPlugins=function(e){ORA.Debug.trace("setNumExpectedPlugins("+e+")",d),f.setCount(e),m=e},u.getNumPluginsToLoad=function(){return m};function A(){ORA.Debug.debug("asyncReady initPluginLatch.countDown()",d),f.countDown()}function a(e){(ORA.common.isFn(e)?e:ORA.common._functionFactory(e))()}u._listPlugins=function(){return ORA.Debug.info(JSON.stringify(O),d),O},u.initPlugins=function(){!0!==t&&(t=!0,ORA.common.extendObject(O).forEach(function(e,t){ORA.Debug.debug("pluginMgr running init for "+t,d);var n,o,i,r,a,c,s,u,m=ORA.common.isFn;try{m(e.initCb)&&(n=t,i=(o=e).initCb,r=o.async,a=o.blockFlag,c=o.successCb,s=o.failCb,u=window.setTimeout(l,o.timeout),a=!0===a?function(){try{i(o,A),g()}catch(e){ORA.Debug.error("Error executing '"+n,"'",d),l()}}:function(){try{i(o),g(),ORA.Debug.debug("plugin success initPluginLatch.countDown()",d),f.countDown()}catch(e){ORA.Debug.error("Error executing '"+n,"'",d),l()}},!0===r?window.setTimeout(a,0):a())}catch(e){ORA.Debug.error("pluginMgr problem in init of '"+t+"' "+e.toString(),d)}function l(){!0!==(O[n]&&ORA.hasVal(O[n].succeeded))&&(ORA.Debug.debug("Running fail callback for '"+n+"'",d),s(),ORA.Debug.debug("plugin fail initPluginLatch.countDown()",d),f.countDown())}function g(){ORA.Debug.debug("Running success callback for '"+n+"'",d),c(),O[n]&&(O.succeeded=!0),window.clearTimeout(u)}}))},u._regPlugin=function(e,t,n,o){var i=n?n:{};n=ORA.common.isFn;var r=ORA.common.extendObject,a=o?o:"ora-plugins";ORA.Debug.debug("Start process of registering Plugin "+e,d),n(s)&&r(s(e,a)).forEach(function(e,t){i[t]=e}),o=function(){ORA.Debug.error("plugin: "+a+":"+e+" init callback execution has failed",d)},r=!(n=function(){ORA.Debug.debug("plugin: "+a+":"+e+" init callback has executed successfully",d)}),void 0!==i.blockCollect&&(r=i.blockCollect);var c=null;t={initCb:c=ORA.common.isFn(t)?t:c,blockFlag:r,timeout:i.timeout||4e3,async:!1!==i.async,successCb:ORA.common._functionFactory(i.success)||n,failCb:ORA.common._functionFactory(i.fail)||o,config:i,pluginName:e},O[e]?ORA.Debug.debug("Plugin "+e+" is a duplicate - over writing with new plugin",d):ORA.Debug.debug("Plugin "+e+" is a new - adding new plugin",d),O[e]=t,m--,ORA.Debug.debug("loadPlugin Count is "+m,d),u.checkInitReady()},u.checkInitReady=function(){var e;m<=0&&!1===t?(e=ORA.Event.ANA_HOSTED_PLUGINS_LOADED,"ora-plugins"===d&&(e=ORA.Event.ANA_ORA_PLUGINS_LOADED),ORA.fireEvent(new ORA.Event(e,ORA.Event.STATUS_SUCCESS)),ORA.Debug.trace("checkInitReady:  loadPluginCount("+m+"), plugins have loaded so running initPlugins()",d),u.initPlugins()):ORA.Debug.trace("checkInitReady:  loadPluginCount("+m+"), not running initPlugins()",d)},u.processHostedPlugins=function(e){ORA.Debug.debug("Processing Hosted Plugins "+JSON.stringify(e),d);function t(e,t){var n,o,i,r=t.src;(n=ORA.common.isFn(r))||(n=r.split("/"),n=!/\.js$/i.test(n.pop())),n?(ORA.Debug.debug("Plugin "+e+" is a function - executing function",d),window.setTimeout((o=r,(i=t).loaded=!0,ORA.Debug.debug("Executing function ("+o+")",d),function(){try{a(o)}catch(e){ORA.Debug.debug("Hosted plugin execution failed: "+e.message,d),f.countDown(),i.fail&&a(i.fail)}}()),1)):(ORA.Debug.debug("Plugin "+e+" is a hosted script "+r+" - executing loadJS()",d),ORA.analytics.loadJS(r,t.async||!0))}var n,o,i;for(n in e)e.hasOwnProperty(n)&&"function"!=typeof e[n]&&(i=!0,(i=void 0!==(o=e[n]).enable?o.enable:i)?(o.pluginName=n,o.loaded=!1,ORA.Debug.debug("Found Hosted Plugin "+n+" Processing",d),t(n,ORA.analytics.plugins[n]=o),o.timeout||(o.timeout=4e3),window.setTimeout(function(e){return function(){e.loaded||(ORA.Debug.debug("Hosted Plugin "+e.pluginName+" src:"+e.src+" timed out",d),e.timedout=!0,f.countDown(),e.fail&&a(e.fail))}}(o),o.timeout)):(f.countDown(),ORA.Debug.debug("Plugin "+n+" is disabled",d)))}},function(){ORA.Debug.superfine=ORA.Debug.superfine,ORA.Debug.trace=ORA.Debug.trace,ORA.Debug.error=ORA.Debug.error,ORA.Debug.debug=ORA.Debug.debug,ORA.Debug.info=ORA.Debug.info;function s(e,t){var n={};return ORA.common.extendObject(e).forEach(function(e,t){t=t.toLowerCase();n[t]=e}),void 0===n["wt.dl"]&&t&&(n["wt.dl"]=t),n}function t(){function n(e){var t=ORA.common.TrackingPipeline,n=new ORA.common.Message(e);t.enqueue(n),ORA.Debug.debug("Common enqueued: '"+e.desc+"'","COMMON")}function o(e,t,n){ORA.Debug.info("ORA."+t);var o,i,r,a=(c=(c=e)&&c.params&&c.params.config&&c.params.config.endpoints?c.params.config.endpoints:[],ORA.common.extendArray(c).forEach(function(e,t,n){e.protocolType||(n[t].protocolType="gif")}),c),c=(r={},(c=e)&&c.params&&c.params.data&&(r=c.params.data),c=ORA.common.extendObject(r),s(c,n));return e&&e.params&&e.params.config&&e.params.config.callbacks&&e.params.config.callbacks.success&&(o=e.params.config.callbacks.success),e&&e.params&&e.params.config&&e.params.config.callbacks&&e.params.config.callbacks.fail&&(i=e.params.config.callbacks.fail),(n={})[t]=!0,ORA.paramsMerge(e.params.config,{endpoints:a,desc:t,payload:c,mutation:n,success:o,fail:i})}function t(){ORA.common.TrackingPipeline=void 0,ORA.common.pluginMgr=void 0,ORA.hasVal(ORA.common.id.hasStarted)&&!0===ORA.common.id.hasStarted&&(ORA.common.id.hasStarted=!1),ORA.common.PageAnalyzeMutant=void 0}ORA.addEventHandler(ORA.Event.LOADER_CLICK,function(e){var t=o(e,"click",1);e.params&&e.params.config&&e.params.config.testAlias?t.testAlias=e.params.config.testAlias:e.params&&e.params.testAlias&&(t.testAlias=e.params.testAlias),e.params&&e.params.config&&e.params.config.conversionPoint?t.conversionPoint=e.params.config.conversionPoint:e.params&&e.params.conversionPoint&&(t.conversionPoint=e.params.conversionPoint),t.userDefinedParams=e.params,n(t)}),ORA.addEventHandler(ORA.Event.LOADER_COLLECT,function(e){e=o(e,"collect",0),n(e)}),ORA.addEventHandler(ORA.Event.LOADER_VIEW,function(e){e=o(e,"view",0),n(e)}),ORA.addEventHandler(ORA.Event.LOADER_RESET,t),ORA.addEventHandler(ORA.Event.LOADER_PRE_EXECUTE,function(e){t(),e=e.params&&ORA.hasVal(e.params)?e.params:{},ORA.common.setup(e)})}ORA.cookieMgr=new ORA.common.CookieMgrClass,ORA.common._setCookie=ORA.cookieMgr.setCookie,ORA.common._getCookieAsObj=ORA.cookieMgr.getCookieAsObj,ORA.common._deleteCookie=ORA.cookieMgr.deleteCookie,ORA.common._getCookieRaw=ORA.cookieMgr.getCookie,ORA.common._createCookie=ORA.cookieMgr.createCookie,ORA.common._doesCookieExist=ORA.cookieMgr.doesCookieExist,ORA.common.setup=function(e){ORA.Debug.debug("Common setup() started"),ORA.common.TrackingPipeline=new ORA.common.TrackingPipelineClass,ORA.common.TrackingPipeline.setSeedMsgPayload(s(e&&e.data?e.data:{})),ORA.common.pluginMgr=new ORA.common.PluginMgrClass("ora-plugins"),ORA.common.hostedPluginMgr=new ORA.common.PluginMgrClass("hosted-plugins"),e=new ORA.common.mutations.PageAnalyze,ORA.common.PageAnalyzeMutant=e,ORA.common.TrackingPipeline.registerProducts(),ORA.common.TrackingPipeline.setCommProtocol(ORA.common.protocols.collectionV2Post.name,ORA.common.protocols.collectionV2Post.protocol),ORA.common.TrackingPipeline.setCommProtocol(ORA.common.protocols.beaconProtocol.name,ORA.common.protocols.beaconProtocol.protocol),ORA.common.TrackingPipeline.registerMutation("pageAnalyzeMutant",e.mutation,1),t(),ORA.Debug.debug("Common setup() finished","COMMON")},ORA.isOptedOut=ORA.common._isOptedOut,ORA.setInfinityOptOut=ORA.common._setInfinityOptOut,ORA.setCookie=ORA.common._setCookie,ORA.deleteCookie=ORA.common._deleteCookie,ORA.getCookieRaw=ORA.getCookie=ORA.common._getCookieRaw,ORA.getCookieAsObj=ORA.common._getCookieAsObj,ORA.doesCookieExist=ORA.common._doesCookieExist,ORA.getIEVer=ORA.common._getIEVer,ORA.JSONPrettify=ORA.common.JSONPrettify,ORA.extendObject=ORA.common.extendObject,ORA.getQryParams=ORA.common.getQryParams,ORA.getClientID=ORA.common.clientID.getClientID,ORA.setClientID=ORA.common.clientID.setClientID}(),ORA.common.mutations.PageAnalyze=function(e){var o=/WT\.|DCSEXT\.|DCS\./,i=/ORA\./,r={},a={},c={},s={},u=0,m=(e=e||{}).window||window,l=e.document||window.document,g=e.navigator||window.navigator,d=e.location||window.location;this.errorLog=function(e){ORA.Debug.error("",101,e,"PageAnalyze")};function t(){r={},a={},c={},s={},ORA.Debug.debug("Running Page Analysis","Common"),ORA.Debug.trace("Running StandardParams","Common");var e=new Date;r.tz=parseInt(e.getTimezoneOffset()/60*-1,10)||"0",r.bh=e.getHours()||"0",r.ul=g.language||g.userLanguage,"object"==typeof screen&&(r.cd="Netscape"===g.appName?screen.pixelDepth:screen.colorDepth,r.sr=screen.width+"x"+screen.height),"boolean"==typeof g.javaEnabled()&&(g.javaEnabled()?r.jo="Yes":r.jo="No"),l.title&&(r.ti=m.RegExp?l.title.replace(new RegExp("^"+d.protocol+"//"+d.hostname+"\\s-\\s"),""):l.title),r.js="Yes";var t=0,n=0;"number"==typeof m.innerWidth?(t=m.innerWidth,n=m.innerHeight):l.documentElement&&(l.documentElement.clientWidth||l.documentElement.clientHeight)?(t=l.documentElement.clientWidth,n=l.documentElement.clientHeight):l.body&&(l.body.clientWidth||l.body.clientHeight)&&(t=l.body.clientWidth,n=l.body.clientHeight),r.bs=t+"x"+n,(r.dl=0)===d.protocol.indexOf("https:")?r.ssl="1":r.ssl="0",a.dcsdat=e.getTime(),a.dcssip=d.hostname,a.dcsuri=d.pathname,r.es=a.dcssip+a.dcsuri,""===l.referrer||"-"===l.referrer||"Microsoft Internet Explorer"===g.appName&&parseInt(g.appVersion,10)<4||(a.dcsref=l.referrer),ORA.Debug.trace("Running defaultMeta()","Common"),ORA.common.visitMetaTags(function(e,t){null!==e.toUpperCase().match(o)&&(r[e.split(".")[1]]=t)},l),ORA.Debug.trace("Running altMeta()","Common"),ORA.common.visitMetaTags(function(e,t){null!==e.toUpperCase().match(i)&&(s[e]=t)},l),u++}function n(e,t,n){for(var o in t){var i;t.hasOwnProperty(o)&&(i=ORA.hasVal(n)?n+o:o,!ORA.hasVal(e.getParam(o))&&t.hasOwnProperty(o)&&e.setParam(i,t[o]))}}this.mutation=function(e){e.params.mutation&&!0===e.params.mutation.runAnalysis&&t(),n(e,a),n(e,c),n(e,r,"WT."),n(e,s),ORA.Debug.debug("Annotating Common Page Analysis","Common"),ORA.Debug.trace(ORA.common.JSONPrettify(e.payload),"Common")},this.data=function(){return{dcs:a,trackingData:r,dcsExt:c,altMetaData:s,runCount:u}},t()},ORA.common.QueryParamCacheClass=function(){var n=ORA.common.extendObject,i=n({});this.reset=function(e){var t="";e?t=e:window&&window.location&&window.location.search&&(t=window.location.search),i=n(ORA.common.getQryParams(t))},this.clear=function(){i=n({})},this.getCache=function(){return i},this.contains=function(n,e){if(e){var o=!1;return i.forEach(function(e,t){"string"==typeof n&&"string"==typeof t&&t.toLowerCase()===n.toLowerCase()&&(o=!0)}),o}return void 0!==i[n]},this.set=function(e,t){i[e]=t},this.reset()},ORA.common.QueryParamCache=new ORA.common.QueryParamCacheClass,function(){var e=!1,t=!1,r=ORA.common.extendObject({}),a=ORA.common.mobile;a.enableMobileMode=function(){e=!0},a.disableMobileMode=function(){e=!1},a.inMobileMode=function(){return e},a.setNativeAppCkTx=function(){t=!0},a.isNativeAppCkTx=function(){return t},a.reset=function(){e=!1,r=ORA.common.extendObject({})},a.delay=function(e,t,n){var o=3e3;n&&n.mobileDelayTimeout&&(o=n.mobileDelayTimeout);function i(){try{ORA.Debug.trace(t+": executing callback: "+e.toString(),"MOBILE_HYBRID"),e()}catch(e){ORA.Debug.error("Error in mobile delayed callback for: "+t,301,e)}}n&&!0===n.mobileDelay?(a.setNativeAppCkTx(),a.enableMobileMode(),ORA.Debug.debug(t+": to delay until ORA.common.mobile.resume() or time in "+o+" ms ","MOBILE_HYBRID"),r[t]={cb:i,timer:window.setTimeout(i,o)}):(ORA.Debug.debug(t+": no mobileDelay flag so executing cb immediately","MOBILE_HYBRID"),e())},a.resume=function(){r.forEach(function(e,t){window.clearTimeout(e.timer),ORA.Debug.debug("ORA.common.mobile.resume() called, executing callback for "+t,"MOBILE_HYBRID"),e.cb()}),r=ORA.common.extendObject({})},a.nativeAppCkWrite=function(e){var t,n="wtapp://cookie?data="+JSON.stringify(e);void 0!==window.external&&void 0!==window.external.Notify?window.external.Notify(n):((t=document.createElement("iframe")).setAttribute("src",n),t.setAttribute("style","display:none;"),t.setAttribute("frameborder","0"),t.setAttribute("height","0px"),t.setAttribute("width","0px"),document.getElementsByTagName("body")[0].appendChild(t),t.parentNode.removeChild(t)),ORA.Debug.superfine("Wrote cookie to native app","MOBILE_HYBRID"),ORA.Debug.superfine("cookies to Native App: "+JSON.stringify(e),"MOBILE_HYBRID")},a.nativeAppCkSend=function(e){try{var t;!0!==a.isNativeAppCkTx()||!0!==a.inMobileMode()?ORA.Debug.superfine("Do not try to write cookies to app because 'nativeAppCkTx' is false or not in 'mobileMode'","MOBILE_HYBRID"):e&&e.name&&e.value?((t={})[e.name]={value:e.value,path:e.path,domain:e.domain,date:e.date,type:e.type,timeout:e.timeout},a.nativeAppCkWrite(t)):(ORA.Debug.superfine("Not writing to native app, missing cookie info","MOBILE_HYBRID"),ORA.Debug.superfine("mapCookieInfo: "+JSON.stringify(e),"MOBILE_HYBRID"))}catch(e){ORA.Debug.error("Problem sending cookie to hybrid app","300",e,"MOBILE_HYBRID")}},a.cookiesWrite=function(e,t,n){try{if(e){var o,i,r=t||window.location.hostname;for(o in t=n||"/",e)e.hasOwnProperty(o)&&(i=e[o],ORA.common._createCookie(o,i.value,i.timeout||null,i.type,r,t))}}catch(e){ORA.Debug.error("Problem in hybrid writing cookie","302",e,"MOBILE_HYBRID")}finally{ORA.Debug.debug("setting Native App Cookie Write"),a.setNativeAppCkTx(),a.resume()}}}(),ORA.setExecuteState("common","ready"),ORA.fireEvent(new ORA.Event(ORA.Event.COMMON_LOAD_COMPLETE,ORA.Event.STATUS_SUCCESS),!0),ORA.fireEvent(new ORA.Event(ORA.Event.COMMON_PRODUCT_READY,ORA.Event.STATUS_SUCCESS),!0),ORA.getQryParams=ORA.common.getQryParams;
