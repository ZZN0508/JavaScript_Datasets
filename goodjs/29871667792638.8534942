!function(r){var i={};function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){var r=window.iframely=window.iframely||{};r.config=r.config||{},e.exports=r},function(e,t,r){var c=r(0),a=r(2);c.on("init",function(){var e,t;c.extendOptions(function(){for(var e=document.querySelectorAll('script[src*="embed.js"], script[src*="iframely.js"]'),t=0;t<e.length;t++){var r=e[t].getAttribute("src").replace(/&amp;/gi,"&");if(c.SCRIPT_RE.test(r)){var i=o(r,c.SUPPORTED_QUERY_STRING.concat("cdn")),r=r.match(c.CDN_RE);if((r||i.cdn)&&(c.CDN=i.cdn||r[1]),0<Object.keys(i).length)return i}}return{}}()),(t=document.getElementById("iframely-styles"))||(e=".iframely-responsive{top:0;left:0;width:100%;height:0;position:relative;padding-bottom:56.25%;box-sizing:border-box;}.iframely-responsive>*{top:0;left:0;width:100%;height:100%;position:absolute;border:0;box-sizing:border-box;}",(t=document.createElement("style")).id="iframely-styles",t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)),function(e){for(var t=document.querySelectorAll('iframe[src*="'+(e||c.DOMAINS).join('"], iframe[src*="')+'"]'),r=0;r<t.length;r++){var i=t[r],n=i.src;(n.match(/^(https?:)?\/\/[^\/]+\/api\/iframe\?.+/)||n.match(/^(https?:)?\/\/[^\/]+\/\w+(\?.*)?$/))&&a.postMessage({method:"getSize"},"*",i.contentWindow)}}(c.DOMAINS.concat(c.CDN.replace(/^https?:\/\//,"")))}),c.load=function(){var e=Array.prototype.slice.call(arguments);e.unshift("load"),c.trigger.apply(this,e)};var i=t.getIframeWrapper=function(e,t){var r=e.parentNode;if(!(!r||"DIV"!==r.nodeName||2<n(r)||t&&r.getAttribute("class")!==c.ASPECT_WRAPPER_CLASS||!t&&"relative"!==r.style.position&&r.getAttribute("class")!==c.ASPECT_WRAPPER_CLASS)){e=r.parentNode;if(!(!e||"DIV"!==e.nodeName||1<n(e)||t&&e.getAttribute("class")!==c.MAXWIDTH_WRAPPER_CLASS||!t&&e.getAttribute("class")&&!e.getAttribute("class").match(/iframely/i)))return{aspectWrapper:r,maxWidthWrapper:e}}};t.addDefaultWrappers=function(e){var t=e.parentNode,r=document.createElement("div");r.className=c.MAXWIDTH_WRAPPER_CLASS;var i=document.createElement("div");return i.className=c.ASPECT_WRAPPER_CLASS,r.appendChild(i),t.insertBefore(r,e),{aspectWrapper:i,maxWidthWrapper:r}},t.getWidget=function(e){var t=i(e);if(t){t={iframe:e,aspectWrapper:t.aspectWrapper,maxWidthWrapper:t.maxWidthWrapper};return"A"===e.nodeName&&e.hasAttribute("href")?t.url=e.getAttribute("href"):e.hasAttribute("src")&&/url=/.test(e.getAttribute("src"))&&((e=o(e.getAttribute("src"))).url&&(t.url=e.url)),t}},c.getElementComputedStyle=function(e,t){return window.getComputedStyle&&window.getComputedStyle(e).getPropertyValue(t)},t.setStyles=function(i,n){i&&Object.keys(n).forEach(function(e){var t=n[e];("number"==typeof t||"string"==typeof t&&/^(\d+)?\.?(\d+)$/.test(t))&&(t+="px");var r=i.style[e];window.getComputedStyle&&(c.getElementComputedStyle(i,e)==t||"iframely-responsive"==i.className&&"paddingBottom"===e&&!r&&/^56\.2\d+%$/.test(t)||"max-width"===e&&"keep"===t)||(i.style[e]=t||"")})};var s=t.addQueryString=function(i,n){var a="";return Object.keys(n).forEach(function(t){var e,r=n[t];"[object Array]"===Object.prototype.toString.call(r)?(e=r.map(function(e){return t+"="+encodeURIComponent(e)}),a+="&"+e.join("&")):void 0!==r&&-1===i.indexOf(t+"=")&&(!1===(r=!0===r?1:r)&&(r=0),a+="&"+t+"="+encodeURIComponent(r))}),i+(""!==a?(-1<i.indexOf("?")?"&":"?")+a.replace(/^&/,""):"")};function n(e){for(var t=0,r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];i.nodeType===Node.TEXT_NODE?(i.textContent||i.innerText).replace(/\s|\n/g,"")&&t++:i.nodeType===Node.ELEMENT_NODE&&t++}return t}function l(e,t){for(var r,i=0;i<e.length;){if((r=e[i])==t)return 1;if(r&&r.test&&r.test(t))return 1;i++}}t.getEndpoint=function(e,t,r){var i=e;if(/^(https?:)?\/\//i.test(e)||(i=(t.CDN||c.CDN)+i,delete t.CDN),/^(?:https?:)?\/\//i.test(i)||(i="//"+i),t&&(i=s(i,t)),r&&r.length){for(var n={},a=Object.keys(c.config),o=0;o<a.length;o++){var d=a[o];l(r,d)&&(n[d]=c.config[d])}i=s(i,n)}return i=/^(https?:)?\/\//i.test(i)&&!i.match(/^(https?:)?\/\//i)[1]&&"file:"===document.location.protocol?"http:"+i:i},c.extendOptions=function(r){r&&Object.keys(r).forEach(function(e){var t=0!==r[e]&&"0"!==r[e]&&!1!==r[e]&&"false"!==r[e]&&(1===r[e]||"1"===r[e]||!0===r[e]||"true"===r[e]||r[e]);!1!==c.config[e]&&(c.config[e]=t)})};var o=t.parseQueryString=function(e,t){e=e.match(/\?(.+)/i);if(e){for(var r=(e=e[1]).split("&"),i={},n=0;n<r.length;n++){var a=r[n].split("=");t&&!l(t,a[0])||(i[a[0]]=decodeURIComponent(a[1]))}return i}return{}}},function(e,t,r){var i,n=r(0),a=r(1);function o(e,t){for(var r,i=0;i<e.length&&!r;i++){var n=e[i];n.contentWindow===t&&(r=n)}return r}function d(e){var t;try{t=JSON.parse(e.data)}catch(e){}i(e,t)}i=function(e,t){var r;t&&t.method&&(e={contentWindow:e.source,src:t.context,domains:n.DOMAINS.concat(n.CDN)},(r=r=(r=e.src?o(document.querySelectorAll('iframe[src*="'+e.src.replace(/^https?:/,"")+'"]'),e.contentWindow):r)||o(e.domains?document.querySelectorAll('iframe[src*="'+(e.domains||n.DOMAINS).join('"], iframe[src*="')+'"]'):document.getElementsByTagName("iframe"),e.contentWindow))&&((r=a.getWidget(r))&&t.url&&(r.url=t.url),n.trigger("message",r,t)))},window.postMessage&&(window.addEventListener?window.addEventListener("message",d,!1):window.attachEvent("onmessage",d)),t.postMessage=function(e,t,r){window.postMessage&&("object"==typeof e&&(e.context=document.location.href),e=JSON.stringify(e),t=t||"*",(r=r||window.parent).postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")))}},function(e,t,r){r(4);var i=r(0);i._loaded||(i._loaded=!0,r(5),r(6),r(8),r(9),r(10),r(11),r(12),r(13),r(14),r(15),r(16),r(17),i.trigger("init")),t.iframely=i},function(e,t,r){var i=r(0),r=function(){i.trigger("load")};"complete"!==document.readyState&&"interactive"!==document.readyState||setTimeout(r,0),document.addEventListener?document.addEventListener("DOMContentLoaded",r):window.attachEvent("onload",r)},function(e,t,r){r=r(0);r.VERSION=1,r.ASPECT_WRAPPER_CLASS="iframely-responsive",r.MAXWIDTH_WRAPPER_CLASS="iframely-embed",r.LOADER_CLASS="iframely-loader",r.DOMAINS=["cdn.iframe.ly","iframe.ly","if-cdn.com","iframely.net"],r.CDN=r.CDN||r.DOMAINS[0],r.BASE_RE=/^(?:https?:)?\/\/[^\/]+/i,r.ID_RE=/^(?:https?:)?\/\/[^\/]+\/(\w+)(?:\?.*)?$/,r.SCRIPT_RE=/^(?:https?:|file:\/)?\/\/[^\/]+(?:.+)?\/(?:embed|iframely)\.js(?:[^\/]+)?$/i,r.CDN_RE=/^(?:https?:)?\/\/([^\/]+)\/(?:embed|iframely)\.js(?:[^\/]+)?$/i,r.SUPPORTED_QUERY_STRING=["api_key","key","iframe","html5","playerjs","align","language","media","maxwidth","maxheight","lazy","import","parent","click_to_play","autoplay","mute",/^_.+/],r.LAZY_IFRAME_SHOW_TIMEOUT=3e3,r.LAZY_IFRAME_FADE_TIMEOUT=200,r.CLEAR_WRAPPER_STYLES_TIMEOUT=3e3},function(e,t,r){!function(e){var i=r(0),n=function(t,e,r,i){for(;!i&&r<e.length;)i=t[e[r++]+"equestAnimationFrame"];return i&&i.bind(t)||t.setImmediate||function(e){t.setTimeout(e,0)}}("undefined"!=typeof window?window:e,"r webkitR mozR msR oR".split(" "),0),a={};function t(e,t,r){(a[e]||[]).forEach(function(e){t?n(function(){e.apply(i,r)}):e.apply(i,r)}),"init"===e&&(a[e]=[])}i.on=function(e,t){(a[e]=a[e]||[]).push(t)},i.trigger=function(e){t(e,!1,Array.prototype.slice.call(arguments,1))},i.triggerAsync=function(e){t(e,!0,Array.prototype.slice.call(arguments,1))}}.call(this,r(7))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var o=r(2),i=r(0),d={};"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&(i.on("init",function(){i.extendOptions({intersection:1})}),i.on("message",function(e,t){var r,i,n,a;"send-intersections"===t.method&&e.iframe&&(i=t.options,r=i=i||{margin:1e3},n=JSON.stringify(r),(a=d[n])||(a=new IntersectionObserver(function(e){e.forEach(function(e){o.postMessage({method:"intersection",entry:{isIntersecting:e.isIntersecting},options:r},"*",e.target.contentWindow)})},(t={},(i=r)&&i.threshold&&(t.threshold=i.threshold),i&&i.margin&&(t.rootMargin=i.margin+"px "+i.margin+"px "+i.margin+"px "+i.margin+"px"),t)),d[n]=a),a.observe(e.iframe))}))},function(e,t,r){var f=r(1),g=r(0),h={};function n(e,t,r){var i,n,a,o=e.cancel,d=e.shadow,c=e.renderEvent,s=f.getIframeWrapper(t,!0);o?(i=f.getWidget(t),g.cancelWidget(i||{maxWidthWrapper:t,iframe:t,url:t.getAttribute("href")})):((i=document.createElement("div")).innerHTML=e.html,s&&!c?(n=s.aspectWrapper.parentNode,a=s.aspectWrapper,s.maxWidthWrapper.removeAttribute("style")):(n=t.parentNode,a=t),d?((d=(t=document.createElement("div")).attachShadow({mode:"open"})).appendChild(i),r={shadowRoot:d,shadowContainer:t,container:n,context:e.context,stylesIds:e.stylesIds,stylesDict:r.commonShadowStyles},g.trigger("import-shadow-widget-before-render",r),n.insertBefore(t,a),g.trigger("import-shadow-widget-after-render",r)):(n.insertBefore(i,a),function e(i){for(var t,r,n=[],a=i.childNodes,o=0;a[o];o++)!(r=a[o]).nodeName||r.nodeName.toUpperCase()!=="script".toUpperCase()||r.type&&"text/javascript"!==r.type.toLowerCase()&&"application/javascript"!==r.type.toLowerCase()?e(r):(n.push(r),i.removeChild(r));for(o=0;n[o];o++)(t=n[o]).parentNode&&t.parentNode.removeChild(t),function(e){var t=e.text||e.textContent||e.innerHTML||"",r=document.createElement("script");e.src&&(r.src=e.src),r.type="text/javascript";try{r.appendChild(document.createTextNode(t))}catch(e){r.text=t}i.appendChild(r)}(n[o])}(i)),n.removeChild(a),c&&setTimeout(function(){l(n)},g.CLEAR_WRAPPER_STYLES_TIMEOUT))}function y(){delete g.import;for(var e=document.querySelectorAll("a[data-iframely-url][data-import-uri]"),t=0;t<e.length;t++)e[t].removeAttribute("data-import-uri"),g.trigger("load",e[t])}function l(e){for(var t=e,r=0;t&&t.getAttribute("class")!==g.ASPECT_WRAPPER_CLASS;)t=t.parentNode,4<++r&&(t=null);e=t&&t.parentNode;e&&e.getAttribute("class")===g.MAXWIDTH_WRAPPER_CLASS&&(t.removeAttribute("style"),t.removeAttribute("class"),e.removeAttribute("style"))}g.on("load",function(e){e||!1===g.config.import||!document.head.attachShadow||!g.debug&&"http:"!==document.location.protocol&&"https:"!==document.location.protocol||g.config.playerjs||g.config.lazy||g.import||1<(e=document.querySelectorAll("a[data-iframely-url]:not([data-import-uri])")).length&&function(e){var t=document.createElement("script"),r=[],i=[],n=null;function a(e,t){h[e]||(h[e]=[]),h[e].push(t)}for(var o,d,c,s,l,u,p=0;p<e.length;p++){var m=e[p];!m.getAttribute("data-import-uri")&&m.hasAttribute("data-iframely-url")&&(u=l=s=c=d=void 0,d=(o=m).getAttribute("data-iframely-url"),c=d.match(g.ID_RE),s=c&&c[1],l=f.parseQueryString(d,g.SUPPORTED_QUERY_STRING.concat("url")),u=l.url,delete l.url,(c="0"===l.import||"false"===l.import||"1"===l.playerjs||"true"===l.playerjs)||(d=d.match(g.BASE_RE),l.CDN=d&&d[0],n?JSON.stringify(l,Object.keys(l).sort())!==JSON.stringify(n,Object.keys(n).sort())&&(c=!0):n=l),c?g.trigger("load",o):s?(o.setAttribute("data-import-uri",s),-1===i.indexOf(s)&&i.push(s),a(s,o)):(u=u||o.getAttribute("href"),(n.key||n.api_key||g.config.api_key||g.config.key)&&u?(o.setAttribute("data-import-uri",u),-1===r.indexOf(u)&&r.push(u),a(u,o)):g.trigger("load",o)))}0<r.length||0<i.length?((n=n||{}).touch=g.isTouch(),n.flash=function(){var t=!1;try{t=!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){t=!(!navigator.mimeTypes||null==navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}return t}(),n.app=1,0<r.length&&(n.uri=r),0<i.length&&(n.ids=i.join("&")),n.v=g.VERSION,t.src=f.getEndpoint("/api/import/v2",n,g.SUPPORTED_QUERY_STRING),t.onerror=function(){y()},document.head.appendChild(t),g.import=t):(y(),g.trigger("load"))}(e)}),g.on("load",function(e,t){if(e&&e.uri&&(e.html||e.cancel)){var r=h[e.uri];if(r)for(var i=0;i<r.length;i++)n(e,r[i],t);delete h[e.uri]}}),g.buildImportWidgets=function(t){g.trigger("import-loaded",t),t.widgets.forEach(function(e){g.trigger("load",e,t)}),y()},g.isTouch=function(){return"ontouchstart"in window||navigator.maxTouchPoints},g.on("import-widget-ready",l),g.addEventListener||(g.addEventListener=function(e,t,r){e&&(e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r)})},function(e,t,r){var o=r(1),d=r(0);d.on("load",function(e,t){var r;e&&e.nodeName&&"string"==typeof t&&((r=document.createElement("a")).setAttribute("href",t),e.appendChild(r),d.trigger("load",r))}),d.on("load",function(e){if(!e&&!d.import)for(var t=document.querySelectorAll("a[data-iframely-url]:not([data-import-uri])"),r=0;r<t.length;r++)d.trigger("load",t[r])}),d.on("load",function(e){e&&"A"===e.nodeName&&(e.getAttribute("data-iframely-url")||e.getAttribute("href"))&&!e.hasAttribute("data-import-uri")&&function(e){if(e.getAttribute("data-iframely-url")||e.getAttribute("href")){var t,r=e.getAttribute("data-iframely-url");if(r&&/^((?:https?:)?\/\/[^\/]+)\/\w+/i.test(r)?t=o.getEndpoint(r,{v:d.VERSION,app:1}):(d.config.api_key||d.config.key)&&d.CDN?t=o.getEndpoint("/api/iframe",{url:e.getAttribute("href"),v:d.VERSION,app:1},d.SUPPORTED_QUERY_STRING):console.warn("Iframely cannot build embeds: api key is required as query-string of embed.js"),t){var i=document.createElement("iframe");i.setAttribute("allowfullscreen",""),i.setAttribute("allow","autoplay *; encrypted-media *"),e.hasAttribute("data-img")&&i.setAttribute("data-img",e.getAttribute("data-img"));var n=e.hasAttribute("data-lazy")||e.hasAttribute("data-img")||/&lazy=1/.test(t)||d.config.lazy,r=e.textContent||e.innerText;if(r&&""!==r&&(i.textContent=r),a=o.getIframeWrapper(e,!0))for(;a.aspectWrapper.lastChild;)a.aspectWrapper.removeChild(a.aspectWrapper.lastChild);else{var a=o.addDefaultWrappers(e);e.parentNode.removeChild(e)}a.aspectWrapper.appendChild(i),n?(i.setAttribute("data-iframely-url",t),d.trigger("load",i)):(i.setAttribute("src",t),d.trigger("iframe-ready",i))}else e.removeAttribute("data-iframely-url")}}(e)})},function(e,t,r){var c=r(1),s=r(0);function i(e){var t=e.aspectWrapper&&1<function(e){for(var t=0,r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];i.nodeType===Node.TEXT_NODE?(i.textContent||i.innerText).replace(/\s|\n/g,"")&&t++:i.nodeType===Node.ELEMENT_NODE&&t++}return t}(e.aspectWrapper)&&function(e){for(var t=0,r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(i.nodeType!==Node.TEXT_NODE&&i.nodeType===Node.ELEMENT_NODE){if(1===t)return i;t++}}}(e.aspectWrapper);t&&"DIV"===t.nodeName&&e.aspectWrapper.removeChild(t)}s.on("load",function(e){var t,r,i;e&&"IFRAME"===e.nodeName&&e.hasAttribute("data-iframely-url")&&e.hasAttribute("data-img")&&!e.getAttribute("src")&&(t=e.getAttribute("data-img"),e.removeAttribute("data-img"),function(e,t,r){if(r&&/^(https?:)?\/\//.test(r))d=r;else{var i,n=c.parseQueryString(t),a={};for(i in n)0===i.indexOf("_")&&(a[i]=n[i]);if(t.match(/\/api\/iframe/))d=c.getEndpoint(t.match(/^(.+)\/api\/iframe/i)[1]+"/api/thumbnail",Object.assign({url:n.url,api_key:n.api_key,key:n.key},a));else{if(!t.match(/^(?:https?:)?\/\/[^\/]+\/[a-zA-Z0-9]+(?:\?.*)?$/))return;d=c.getEndpoint(t.replace(/^((?:https?:)?\/\/[^\/]+\/[a-zA-Z0-9]+)((\?.*)?)$/,"$1/thumbnail"),a)}}var o=document.createElement("div");c.setStyles(o,{position:"absolute",width:"100%",height:"100%",backgroundImage:"url('"+d+"')",backgroundSize:"cover",backgroundPosition:"center"});r=document.createElement("div");r.setAttribute("class",s.LOADER_CLASS),o.appendChild(r);var t=s.getElementComputedStyle(e.aspectWrapper,"padding-top"),d=s.getElementComputedStyle(e.aspectWrapper,"padding-bottom"),r=t.match(/^(\d+)px$/);r&&parseInt(r[1])&&d?(r=document.createElement("div"),c.setStyles(r,{top:"-"+t,width:"100%",height:0,position:"relative",paddingBottom:d}),r.appendChild(o),e.aspectWrapper.appendChild(r)):e.aspectWrapper.appendChild(o)}(r=c.getWidget(e),i=e.getAttribute("data-iframely-url"),t),i=c.addQueryString(i,{img:1}),e.setAttribute("data-iframely-url",i),new d(r),s.trigger("load",e))}),s.on("message",function(e,t){var r;"widgetRendered"===t.method&&(i(e),(r=o(e))&&r.deactivate()),"begin-waiting-widget-render"===t.method&&(r=o(e))&&r.clearLoadingTimeout(),"end-waiting-widget-render"===t.method&&(r=o(e))&&r.registerLoadingTimeout()});var n=[];function a(e){for(var t=0;t<n.length&&n[t].widget.iframe!==e.iframe;)t++;if(t<n.length&&n[t].widget.iframe===e.iframe)return t}function o(e){e=a(e);if(e||0===e)return n[e]}function d(e){this.widget=e,this.loadCount=0;var e=e.iframe,t=this;s.addEventListener(e,"load",function(){t.iframeOnLoad()}),this.registerLoadingTimeout(),n.push(this)}d.prototype.iframeOnLoad=function(){var e;this.loadCount++,2===this.loadCount&&(this.deactivate(),e=this,setTimeout(function(){i(e.widget)},s.LAZY_IFRAME_FADE_TIMEOUT))},d.prototype.deactivate=function(){var e;this.clearLoadingTimeout(),!(e=a(this))&&0!==e||n.splice(e,1)},d.prototype.clearLoadingTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null},d.prototype.registerLoadingTimeout=function(){var e;this.timeoutId||((e=this).timeoutId=setTimeout(function(){e.iframeOnLoad()},s.LAZY_IFRAME_SHOW_TIMEOUT))}},function(e,t,r){var i=r(1),n=r(0);n.on("load",function(e){if(!e)for(var t=document.querySelectorAll("iframe[data-iframely-url]"),r=0;r<t.length;r++)n.trigger("load",t[r])}),n.on("load",function(e){var t,r;e&&"IFRAME"===e.nodeName&&e.hasAttribute("data-iframely-url")&&!e.hasAttribute("data-img")&&!e.getAttribute("src")&&(t=e,r=i.getWidget(t),e=t.getAttribute("data-iframely-url"),r&&e&&(e=i.getEndpoint(e,{lazy:n.config.intersection,v:n.VERSION,app:1})),t.setAttribute("src",e),t.removeAttribute("data-iframely-url"),n.trigger("iframe-ready",t))})},function(e,t,r){var n=r(0);n.on("message",function(e,t){"cancelWidget"===t.method&&n.cancelWidget(e)}),n.cancelWidget=function(e){var t,r,i;e?(t=e.maxWidthWrapper&&e.maxWidthWrapper.parentNode,r=e.maxWidthWrapper,n.config&&n.config.parent&&((i=function(e,t){for(var r=!1;!r&&e.parentNode;)r=(e=e.parentNode).className&&0<=e.className.split(" ").indexOf(t);return r&&e}(e.maxWidthWrapper,n.config.parent))&&(t=i.parentNode,r=i)),e.url&&(i=e.iframe&&(e.iframe.textContent||e.iframe.innerText),n.triggerAsync("cancel",e.url,t,i,r.nextSibling)),t.removeChild(r)):console.warn("iframely.cancelWidget called without widget param")}},function(e,t,r){var o=r(1),d=r(0);d.on("message",function(e,t){var r,i,n,a;"setIframelyWidgetSize"!==t.method&&"resize"!==t.method&&"setIframelyEmbedData"!==t.method||(r=null,t.data&&t.data.media&&t.data.media.frame_style?(t.data.media.frame_style.split(";").forEach(function(e){""!==e.trim()&&-1<e.indexOf(":")&&(2===(e=e.split(":")).length&&((r=r||{})[e[0].trim()]=e[1].trim()))}),c(e,r)):"setIframelyEmbedData"===t.method&&c(e,null),!(a=t.data&&t.data.media)&&t.height&&(a={height:t.height,"max-width":"keep"}),i=e,(n=a)&&0<Object.keys(n).length&&i&&((t=(t=i.iframe&&i.iframe.style.border||i.aspectWrapper&&i.aspectWrapper.style.border)&&t.match(/(\d+)px/)||0)&&(t=parseInt(t[1]),t*=2),e=t,a=window.getComputedStyle&&window.getComputedStyle(i.iframe).getPropertyValue("height"),"number"==typeof(t=n["max-width"])&&(t+=e),o.setStyles(i.maxWidthWrapper,{"max-width":t,"min-width":n["min-width"]&&n["min-width"]+e,width:n.width&&n.width+e}),n.scrolling&&i.iframe&&i.iframe.setAttribute("scrolling",n.scrolling),((t=n["aspect-ratio"])||n.height)&&o.setStyles(i.aspectWrapper,{paddingBottom:t?Math.round(1e5/t)/1e3+"%":0,paddingTop:t&&n["padding-bottom"],height:t?0:n.height&&n.height+e}),e=window.getComputedStyle&&window.getComputedStyle(i.iframe).getPropertyValue("height"),a&&a!==e&&d.triggerAsync("heightChanged",i.iframe,a,e)))});var i={border:"","border-radius":"","box-shadow":"",overflow:""},n={border:"0","border-radius":"","box-shadow":"",overflow:""};function c(e,t){t&&e&&e.iframe?t["border-radius"]?(t.overflow="hidden",o.setStyles(e.aspectWrapper,t)):o.setStyles(e.iframe,t):!t&&e&&e.iframe&&(o.setStyles(e.aspectWrapper,i),o.setStyles(e.iframe,n))}},function(e,t,r){var i=r(0);i.on("message",function(e,t){"open-href"!==t.method&&"click"!==t.method||i.trigger(t.method,t.href)}),i.on("open-href",function(e){i.triggerAsync("click",e),0===e.indexOf(window.location.origin)?window.location.href=e:window.open(e,"_blank","noopener")})},function(e,t,r){var i=r(0);i.on("message",function(e,t){"setIframelyEmbedOptions"===t.method&&i.trigger("options",e,t.data)})},function(e,t,r){r=r(0);r.widgets=r.widgets||{},r.widgets.load=r.load,r.events||(r.events={},r.events.on=r.on,r.events.trigger=r.trigger),r.on("cancel",function(e,t,r,i){var n;e&&t&&r&&""!==r&&((n=document.createElement("a")).setAttribute("href",e),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener"),n.textContent=r,i?t.insertBefore(n,i):t.appendChild(n))})}]);
