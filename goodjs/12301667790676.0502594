!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DHYPlayer-2.0.12.min",[],t):"object"==typeof exports?exports["DHYPlayer-2.0.12.min"]=t():e["DHYPlayer-2.0.12.min"]=t()}(window,function(){return c=[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return f});var i=Object.prototype.toString,o=function(e){return l(e)?Object.keys(e):[]};function a(t,n){o(t).forEach(function(e){return n(t[e],e)})}function s(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[n].concat(t)):(t.forEach(function(e){e&&a(e,function(e,t){n[t]=e})}),n)}function l(e){return!!e&&"object"===r(e)}function u(e){return l(e)&&"[object Object]"===i.call(e)&&e.constructor===Object}function c(n,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return a(e,function(e,t){t=r[t]||t;n[t]=e}),n}function f(){for(var n={},e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(function(e){e&&a(e,function(e,t){u(e)?(u(n[t])||(n[t]={}),n[t]=f(n[t],e)):n[t]=e})}),n}},function(e,t,n){"use strict";n.d(t,"k",function(){return o}),n.d(t,"f",function(){return d}),n.d(t,"p",function(){return h}),n.d(t,"j",function(){return p}),n.d(t,"c",function(){return g}),n.d(t,"m",function(){return m}),n.d(t,"q",function(){return y}),n.d(t,"o",function(){return v}),n.d(t,"h",function(){return _}),n.d(t,"n",function(){return b}),n.d(t,"l",function(){return A}),n.d(t,"d",function(){return E}),n.d(t,"r",function(){return w}),n.d(t,"e",function(){return S}),n.d(t,"i",function(){return k}),n.d(t,"g",function(){return T}),n.d(t,"a",function(){return C}),n.d(t,"b",function(){return R});var t=n(5),l=n.n(t),t=n(3),u=n.n(t),a=n(4),s=n(0);function r(e){return"string"==typeof e&&/\S/.test(e)}function i(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function o(){return l.a===u.a.document&&void 0!==l.a.createElement}function c(e){return Object(s.c)(e)&&1===e.nodeType}function f(n){return function(e,t){if(!r(e))return l.a[n](null);t=c(t=r(t)?l.a.querySelector(t):t)?t:l.a;return t[n]&&t[n](e)}}function d(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length?arguments[3]:void 0,o=l.a.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(a.a.warn("Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ".concat(e," to ").concat(t,".")),o.setAttribute(e,t)):"textContent"===e?h(o,t):o[e]=t}),Object.getOwnPropertyNames(r).forEach(function(e){o.setAttribute(e,r[e])}),i&&(t=o,function(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return c(e="function"==typeof e?e():e)||(t=e,Object(s.c)(t)&&3===t.nodeType)?e:"string"==typeof e&&/\S/.test(e)?l.a.createTextNode(e):void 0;var t}).filter(function(e){return e})}(i).forEach(function(e){return t.appendChild(e)})),o}function h(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function p(e,t){return i(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function g(e,t){return e.classList?e.classList.add(t):p(e,t)||(e.className=(e.className+" "+t).trim()),e}function m(e,t){return e.classList?e.classList.remove(t):(i(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function y(e,t,n){var r=p(e,t);if((n="boolean"!=typeof(n="function"==typeof n?n(e,t):n)?!r:n)!==r)return(n?g:m)(e,t),e}function v(n,r){Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function _(e,t){return e.getAttribute(t)}function b(e,t,n){e.setAttribute(t,n)}function A(e,t){e.removeAttribute(t)}function E(){l.a.body.focus(),l.a.onselectstart=function(){return!1}}function w(){l.a.onselectstart=function(){return!0}}function S(e,t){if(!e||!t)return"";if("function"!=typeof u.a.getComputedStyle)return e.currentStyle[t]||"";e=u.a.getComputedStyle(e);return e?e[t]:""}function k(e,t){var n={},r=function(e){var t;if(!(t=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():t))return{left:0,top:0};var n=l.a.documentElement,r=l.a.body,i=n.clientLeft||r.clientLeft||0,e=u.a.pageXOffset||r.scrollLeft,i=t.left+e-i,n=n.clientTop||r.clientTop||0,r=u.a.pageYOffset||r.scrollTop,n=t.top+r-n;return{left:Math.round(i),top:Math.round(n)}}(e),i=e.offsetWidth,o=e.offsetHeight,a=r.top,s=r.left,e=t.pageY,r=t.pageX;return t.changedTouches&&(r=t.changedTouches[0].pageX,e=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(a-e+o)/o)),n.x=Math.max(0,Math.min(1,(r-s)/i)),n}function T(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}var C=f("querySelector"),R=f("querySelectorAll")},function(e,t,n){"use strict";n.d(t,"e",function(){return h}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return y}),n.d(t,"f",function(){return v});var r,i=n(1),o=n(3),a=n.n(o),s=a.a.navigator&&a.a.navigator.userAgent||"",l=/AppleWebKit\/([\d.]+)/i.exec(s),u=(l&&parseFloat(l.pop()),/iPad/i.test(s)),c=/iPhone/i.test(s)&&!u,f=/iPod/i.test(s),d=c||u||f,t=((r=s.match(/OS (\d+)_/i))&&r[1]&&r[1],/Android/i.test(s)),h=(function(){var e=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),t&&/webkit/i.test(s),/QQBrowser/i.test(s)&&t),n=/Firefox/i.test(s),o=/Edge/i.test(s),l=!o&&/Chrome/i.test(s),p=((r=s.match(/Chrome\/(\d+)/))&&r[1]&&parseFloat(r[1]),/MSIE\s8\.0/.test(s),r=!(r=(r=/MSIE\s(\d+)\.\d/.exec(s))&&parseFloat(r[1]))&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)?11:r),r=/Safari/i.test(s)&&!l&&!t&&!o,g=(i.k()&&("ontouchstart"in a.a||a.a.DocumentTouch&&(a.a.document,a.a.DocumentTouch)),i.k()&&a.a.document.createElement("video").style,d||t||c||u||f),m=!g,y=(/QQBrowser/i.test(s)||/QQ/i.test(s))&&(d||c||u),v=d?"IOS":t?"Android":r?"Safari":l?"Chrome":o?"Edge":n?"FireFox":"PC"},function(t,e,n){!function(e){e="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};t.exports=e}.call(this,n(11))},function(e,t,n){"use strict";function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!!l.a&&l.a<11,r=a.levels[c],i=new RegExp("^(".concat(r,")$"));"log"!==e&&t.unshift(e.toUpperCase()+":"),f&&f.push([].concat(t)),t.unshift("DHYPlayer-2.0.12:");var o=s.a.console&&s.a.console[e];o&&r&&i.test(e)&&(n&&(t=t.map(function(t){if(Object(u.c)(t)||Array.isArray(t))try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}).join(" ")),o.apply?o[Array.isArray(t)?"apply":"call"](s.a.console,t):o(t))}var a,i=n(3),s=n.n(i),l=n(2),u=n(0),c="all",f=[];(a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r("log",t)}).levels={all:"log|warn|error",error:"error",off:"",warn:"warn|error",DEFAULT:c},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'.concat(e,'" in not a valid log level'));c=e}return c},a.history=function(){return f?[].concat(f):[]},a.history.clear=function(){f&&(f.length=0)},a.history.disable=function(){null!==f&&(f.length=0,f=null)},a.history.enable=function(){null===f&&(f=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("error",t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("warn",t)},t.a=a},function(r,e,i){!function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},e=i(44);"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=e),r.exports=t}.call(this,i(11))},function(e,t,n){"use strict";var i=n(31),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;e=Object.getPrototypeOf(e);return null===e||e===Object.prototype}function u(e){return"[object Function]"===r.call(e)}function c(e,t){if(null!=e)if(o(e="object"!=typeof e?[e]:e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function n(){var r={};function e(e,t){l(r[t])&&l(e)?r[t]=n(r[t],e):l(e)?r[t]=n({},e):o(e)?r[t]=e.slice():r[t]=e}for(var t=0,i=arguments.length;t<i;t++)c(arguments[t],e);return r},extend:function(n,e,r){return c(e,function(e,t){n[t]=r&&"function"==typeof e?i(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return e=65279===e.charCodeAt(0)?e.slice(1):e}}},function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,l=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(i,o){return new Promise(function(e,t){function n(){void 0!==r&&i.removeListener("error",r),e([].slice.call(arguments))}var r;"error"!==o&&(r=function(e){i.removeListener(o,n),t(e)},i.once("error",r)),i.once(o,n)})},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o;return u(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]),void 0===o?(o=i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=c(e))&&o.length>n&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function d(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(void 0===e)return[];t=e[t];return void 0===t?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):g(t,t.length)}function p(e){var t=this._events;if(void 0!==t){e=t[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if((r=0<t.length?t[0]:r)instanceof Error)throw r;i=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw i.context=r,i}e=o[e];if(void 0===e)return!1;if("function"==typeof e)l(e,this,t);else for(var a=e.length,s=g(e,a),n=0;n<a;++n)l(s[n],this,t);return!0},a.prototype.on=a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},function(tn,nn,e){var rn;!function(e,t){"use strict";"object"==typeof tn.exports?tn.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(E,e){"use strict";function g(e){return"function"==typeof e&&"number"!=typeof e.nodeType}function m(e){return null!=e&&e===e.window}var t=[],n=Object.getPrototypeOf,s=t.slice,y=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},l=t.push,i=t.indexOf,r={},o=r.toString,v=r.hasOwnProperty,a=v.toString,u=a.call(Object),_={},w=E.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||w).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[o.call(e)]||"object":typeof e}var S=function(e,t){return new S.fn.init(e,t)};function f(e){var t=!!e&&"length"in e&&e.length,n=p(e);return!g(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"3.5.1",constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||g(o)||(o={}),a===s&&(o=this,a--);a<s;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(l&&n&&(S.isPlainObject(n)||(r=Array.isArray(n)))?(i=o[t],i=r&&!Array.isArray(i)?[]:r||S.isPlainObject(i)?i:{},r=!1,o[t]=S.extend(l,i,n)):void 0!==n&&(o[t]=n));return o},S.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==o.call(e)||(e=n(e))&&("function"!=typeof(e=v.call(e,"constructor")&&e.constructor)||a.call(e)!==u))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(f(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(f(Object(e))?S.merge(t,"string"==typeof e?[e]:e):l.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!=a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(f(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return y(a)},guid:1,support:_}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var d=function(n){function f(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function d(e,t){return t?"\0"===e?"锟�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function r(){E()}var e,h,b,o,i,p,g,m,A,l,u,E,w,a,S,y,s,c,v,k="sizzle"+ +new Date,_=n.document,T=0,C=0,R=le(),x=le(),O=le(),L=le(),I=function(e,t){return e===t&&(u=!0),0},D={}.hasOwnProperty,t=[],P=t.pop,B=t.push,M=t.push,j=t.slice,F=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",G="(?:\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\["+U+"*("+G+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+G+"))|)"+U+"*\\]",V=":("+G+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",q=new RegExp(U+"+","g"),z=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),K=new RegExp("^"+U+"*,"+U+"*"),W=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),Y=new RegExp(U+"|>"),X=new RegExp(V),$=new RegExp("^"+G+"$"),Q={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),TAG:new RegExp("^("+G+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,ee=/^h\d$/i,te=/^[^{]+\{\s*\[native \w/,ne=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,re=/[+~]/,ie=new RegExp("\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\([^\\r\\n\\f])","g"),oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{M.apply(t=j.call(_.childNodes),_.childNodes),t[_.childNodes.length].nodeType}catch(n){M={apply:t.length?function(e,t){B.apply(e,j.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,n,r){var i,o,a,s,l,u,c=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!r&&(E(t),t=t||w,S)){if(11!==f&&(s=ne.exec(e)))if(u=s[1]){if(9===f){if(!(o=t.getElementById(u)))return n;if(o.id===u)return n.push(o),n}else if(c&&(o=c.getElementById(u))&&v(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return M.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&h.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(u)),n}if(h.qsa&&!L[e+" "]&&(!y||!y.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(u=e,c=t,1===f&&(Y.test(e)||W.test(e))){for((c=re.test(e)&&ge(t.parentNode)||t)===t&&h.scope||((a=t.getAttribute("id"))?a=a.replace(oe,d):t.setAttribute("id",a=k)),i=(l=p(e)).length;i--;)l[i]=(a?"#"+a:":scope")+" "+ye(l[i]);u=l.join(",")}try{return M.apply(n,c.querySelectorAll(u)),n}catch(t){L(e,!0)}finally{a===k&&t.removeAttribute("id")}}}return m(e.replace(z,"$1"),t,n,r)}function le(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function ue(e){return e[k]=!0,e}function ce(e){var t=w.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function fe(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pe(a){return ue(function(o){return o=+o,ue(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,e=(e.ownerDocument||e).documentElement;return!Z.test(t||e&&e.nodeName||"HTML")},E=se.setDocument=function(e){var t,e=e?e.ownerDocument||e:_;return e!=w&&9===e.nodeType&&e.documentElement&&(a=(w=e).documentElement,S=!i(w),_!=w&&(t=w.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",r,!1):t.attachEvent&&t.attachEvent("onunload",r)),h.scope=ce(function(e){return a.appendChild(e).appendChild(w.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=ce(function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=te.test(w.getElementsByClassName),h.getById=ce(function(e){return a.appendChild(e).id=k,!w.getElementsByName||!w.getElementsByName(k).length}),h.getById?(b.filter.ID=function(e){var t=e.replace(ie,f);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&S){e=t.getElementById(e);return e?[e]:[]}}):(b.filter.ID=function(e){var t=e.replace(ie,f);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},s=[],y=[],(h.qsa=te.test(w.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+U+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+U+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+k+"-]").length||y.push("~="),(t=w.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||y.push("\\["+U+"*name"+U+"*="+U+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||y.push(".#.+[+~]"),e.querySelectorAll("\\\f"),y.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=w.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+U+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(h.matchesSelector=te.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){h.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",V)}),y=y.length&&new RegExp(y.join("|")),s=s.length&&new RegExp(s.join("|")),t=te.test(a.compareDocumentPosition),v=t||te.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){return e===t?(u=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e==w||e.ownerDocument==_&&v(_,e)?-1:t==w||t.ownerDocument==_&&v(_,t)?1:l?F(l,e)-F(l,t):0:4&n?-1:1);var n}:function(e,t){if(e===t)return u=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==w?-1:t==w?1:i?-1:o?1:l?F(l,e)-F(l,t):0;if(i===o)return de(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?de(a[r],s[r]):a[r]==_?-1:s[r]==_?1:0}),w},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(E(e),h.matchesSelector&&S&&!L[t+" "]&&(!s||!s.test(t))&&(!y||!y.test(t)))try{var n=c.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){L(t,!0)}return 0<se(t,w,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=w&&E(e),v(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=w&&E(e);var n=b.attrHandle[t.toLowerCase()],n=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!S):void 0;return void 0!==n?n:h.attributes||!S?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},se.escape=function(e){return(e+"").replace(oe,d)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(u=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(I),u){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return l=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:ue,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,f),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,f),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,f).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=R[e+" "];return t||(t=new RegExp("(^|"+U+")"+e+"("+U+"|$)"))&&R(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=se.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(q," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,g,m){var y="nth"!==p.slice(0,3),v="last"!==p.slice(-4),_="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,l,u=y!=v?"nextSibling":"previousSibling",c=e.parentNode,f=_&&e.nodeName.toLowerCase(),d=!n&&!_,h=!1;if(c){if(y){for(;u;){for(a=e;a=a[u];)if(_?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&d){for(h=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===T&&r[1])&&r[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(h=s=0)||l.pop();)if(1===a.nodeType&&++h&&a===e){i[p]=[T,s,h];break}}else if(!1===(h=d?s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===T&&r[1]:h))for(;(a=++s&&a&&a[u]||(h=s=0)||l.pop())&&((_?a.nodeName.toLowerCase()!==f:1!==a.nodeType)||!++h||(d&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[T,h]),a!==e)););return(h-=m)===g||h%g==0&&0<=h/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=F(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:ue(function(e){var r=[],i=[],s=g(e.replace(z,"$1"));return s[k]?ue(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:ue(function(t){return function(e){return 0<se(t,e).length}}),contains:ue(function(t){return t=t.replace(ie,f),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:ue(function(n){return $.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(ie,f).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return ee.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function me(){}function ye(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(a,e,t){var s=e.dir,l=e.next,u=l||s,c=t&&"parentNode"===u,f=C++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[T,f];if(n){for(;e=e[s];)if((1===e.nodeType||c)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||c)if(r=(i=e[k]||(e[k]={}))[e.uniqueID]||(i[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((i=r[u])&&i[0]===T&&i[1]===f)return o[2]=i[2];if((r[u]=o)[2]=a(e,t,n))return!0}return!1}}function _e(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function be(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function Ae(e){for(var r,t,n,i=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,l=ve(function(e){return e===r},a,!0),u=ve(function(e){return-1<F(r,e)},a,!0),c=[function(e,t,n){n=!o&&(n||t!==A)||((r=t).nodeType?l:u)(e,t,n);return r=null,n}];s<i;s++)if(t=b.relative[e[s].type])c=[ve(_e(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<i&&!b.relative[e[n].type];n++);return function e(h,p,g,m,y,t){return m&&!m[k]&&(m=e(m)),y&&!y[k]&&(y=e(y,t)),ue(function(e,t,n,r){var i,o,a,s=[],l=[],u=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(p||"*",n.nodeType?[n]:n,[]),f=!h||!e&&p?c:be(c,s,h,n,r),d=g?y||(e?h:u||m)?[]:t:f;if(g&&g(f,d,n,r),m)for(i=be(d,l),m(i,[],n,r),o=i.length;o--;)(a=i[o])&&(d[l[o]]=!(f[l[o]]=a));if(e){if(y||h){if(y){for(i=[],o=d.length;o--;)(a=d[o])&&i.push(f[o]=a);y(null,d=[],i,r)}for(o=d.length;o--;)(a=d[o])&&-1<(i=y?F(e,a):s[o])&&(e[i]=!(t[i]=a))}}else d=be(d===t?d.splice(u,d.length):d),y?y(null,t,d,r):M.apply(t,d)})}(1<s&&_e(c),1<s&&ye(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(z,"$1"),t,s<n&&Ae(e.slice(s,n)),n<i&&Ae(e=e.slice(n)),n<i&&ye(e))}c.push(t)}return _e(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,p=se.tokenize=function(e,t){var n,r,i,o,a,s,l,u=x[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=b.preFilter;a;){for(o in n&&!(r=K.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=W.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),a=a.slice(n.length)),b.filter)!(r=Q[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},g=se.compile=function(e,t){var n,m,y,v,_,r=[],i=[],o=O[e+" "];if(!o){for(n=(t=t||p(e)).length;n--;)((o=Ae(t[n]))[k]?r:i).push(o);(o=O(e,(m=i,v=0<(y=r).length,_=0<m.length,v?ue(a):a))).selector=e}function a(e,t,n,r,i){var o,a,s,l=0,u="0",c=e&&[],f=[],d=A,h=e||_&&b.find.TAG("*",i),p=T+=null==d?1:Math.random()||.1,g=h.length;for(i&&(A=t==w||t||i);u!==g&&null!=(o=h[u]);u++){if(_&&o){for(a=0,t||o.ownerDocument==w||(E(o),n=!S);s=m[a++];)if(s(o,t||w,n)){r.push(o);break}i&&(T=p)}v&&((o=!s&&o)&&l--,e&&c.push(o))}if(l+=u,v&&u!==l){for(a=0;s=y[a++];)s(c,f,t,n);if(e){if(0<l)for(;u--;)c[u]||f[u]||(f[u]=P.call(r));f=be(f)}M.apply(r,f),i&&!e&&0<f.length&&1<l+y.length&&se.uniqueSort(r)}return i&&(T=p,A=d),c}return o},m=se.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,c=!r&&p(e=u.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&S&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(ie,f),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=Q.needsContext.test(e)?0:o.length;i--&&(a=o[i],!b.relative[s=a.type]);)if((l=b.find[s])&&(r=l(a.matches[0].replace(ie,f),re.test(o[0].type)&&ge(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&ye(o)))return M.apply(n,r),n;break}}return(u||g(e,c))(r,t,!S,n,!t||re.test(e)&&ge(t.parentNode)||t),n},h.sortStable=k.split("").sort(I).join("")===k,h.detectDuplicates=!!u,E(),h.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(w.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(N,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),se}(E);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;function h(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r}function A(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var k=S.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(e,n,r){return g(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(R(this,e||[],!1))},not:function(e){return this.pushStack(R(this,e||[],!0))},is:function(e){return!!R(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){if(!e)return this;if(n=n||O,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:x.exec(e))||!r[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),C.test(r[1])&&S.isPlainObject(t))for(var r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(e=w.getElementById(r[2]))&&(this[0]=e,this.length=1),this}).prototype=S.fn;var O=S(w),L=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return(t="Until"!==r.slice(-5)?e:t)&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(I[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function B(e){return e}function M(e){throw e}function j(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);function i(){for(s=s||r.once,a=o=!0;u.length;c=-1)for(t=u.shift();++c<l.length;)!1===l[c].apply(t[0],t[1])&&r.stopOnFalse&&(c=l.length,t=!1);r.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,a,s,l=[],u=[],c=-1,f={add:function(){return l&&(t&&!o&&(c=l.length-1,u.push(t)),function n(e){S.each(e,function(e,t){g(t)?r.unique&&f.has(t)||l.push(t):t&&t.length&&"string"!==p(t)&&n(t)})}(arguments),t&&!o&&i()),this},remove:function(){return S.each(arguments,function(e,t){for(var n;-1<(n=S.inArray(t,l,n));)l.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<S.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=u=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=u=[],t||o||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),o||i()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!a}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=g(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&g(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var l=0;function u(i,o,a,s){return function(){function e(){var e,t;if(!(i<l)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(t)?s?t.call(e,u(l,o,B,s),u(l,o,M,s)):(l++,t.call(e,u(l,o,B,s),u(l,o,M,s),u(l,o,B,o.notifyWith))):(a!==B&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}}var n=this,r=arguments,t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),l<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),E.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(u(0,e,g(r)?r:B,e.notifyWith)),o[1][3].add(u(0,e,g(t)?t:B)),o[2][3].add(u(0,e,g(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){i[t]=this,o[t]=1<arguments.length?s.call(arguments):e,--n||a.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=s.call(arguments),a=S.Deferred();if(n<=1&&(j(e,a.done(t(r)).resolve,a.reject,!n),"pending"===a.state()||g(o[r]&&o[r].then)))return a.then();for(;r--;)j(o[r],t(r),a.reject);return a.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){E.console&&E.console.warn&&e&&F.test(e.name)&&E.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){E.setTimeout(function(){throw e})};var N=S.Deferred();function U(){w.removeEventListener("DOMContentLoaded",U),E.removeEventListener("load",U),S.ready()}S.fn.ready=function(e){return N.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||((S.isReady=!0)!==e&&0<--S.readyWait||N.resolveWith(w,[S]))}}),S.ready.then=N.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?E.setTimeout(S.ready):(w.addEventListener("DOMContentLoaded",U),E.addEventListener("load",U));function G(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===p(n))for(s in i=!0,n)G(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),t=u?a?(t.call(e,r),null):(u=t,function(e,t,n){return u.call(S(e),n)}):t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o}var H=/^-ms-/,V=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function z(e){return e.replace(H,"ms-").replace(V,q)}function K(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function W(){this.expando=S.expando+W.uid++}W.uid=1,W.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[z(t)]=n;else for(r in t)i[z(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][z(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(z):(t=z(t))in r?[t]:t.match(P)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!S.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var Y=new W,X=new W,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:$.test(i)?JSON.parse(i):i)}catch(e){}X.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return X.hasData(e)||Y.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){X.set(this,n)}):G(this,function(e){var t;return o&&void 0===e?void 0!==(t=X.get(o,n))||void 0!==(t=Z(o,n))?t:void 0:void this.each(function(){X.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=X.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=z(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){X.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return r=Y.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(a,[a])}var r,i=1,o=S.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=Y.get(a[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=w.documentElement,re=function(e){return S.contains(e.ownerDocument,e)},ie={composed:!0};ne.getRootNode&&(re=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});function oe(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===S.css(e,"display")}function ae(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},l=s(),u=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==u&&+l)&&ee.exec(S.css(e,t));if(c&&c[3]!==u){for(u=u||c[3],c=+(l/=2)||1;a--;)S.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;S.style(e,t,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var se={};function le(e,t){for(var n,r,i,o,a,s=[],l=0,u=e.length;l<u;l++)(r=e[l]).style&&(n=r.style.display,t?("none"===n&&(s[l]=Y.get(r,"display")||null,s[l]||(r.style.display="")),""===r.style.display&&oe(r)&&(s[l]=(a=o=void 0,o=(i=r).ownerDocument,a=i.nodeName,(i=se[a])||(o=o.body.appendChild(o.createElement(a)),i=S.css(o,"display"),o.parentNode.removeChild(o),se[a]=i="none"===i?"block":i)))):"none"!==n&&(s[l]="none",Y.set(r,"display",n)));for(l=0;l<u;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){oe(this)?S(this).show():S(this).hide()})}});var ue=/^(?:checkbox|radio)$/i,ce=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,de=w.createDocumentFragment().appendChild(w.createElement("div"));(d=w.createElement("input")).setAttribute("type","radio"),d.setAttribute("checked","checked"),d.setAttribute("name","t"),de.appendChild(d),_.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",_.option=!!de.lastChild;var he={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&T(e,t)?S.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td,_.option||(he.optgroup=he.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function ye(e,t,n,r,i){for(var o,a,s,l,u,c=t.createDocumentFragment(),f=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===p(o))S.merge(f,o.nodeType?[o]:o);else if(me.test(o)){for(a=a||c.appendChild(t.createElement("div")),s=(ce.exec(o)||["",""])[1].toLowerCase(),s=he[s]||he._default,a.innerHTML=s[1]+S.htmlPrefilter(o)+s[2],u=s[0];u--;)a=a.lastChild;S.merge(f,a.childNodes),(a=c.firstChild).textContent=""}else f.push(t.createTextNode(o));for(c.textContent="",d=0;o=f[d++];)if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=re(o),a=pe(c.appendChild(o),"script"),l&&ge(a),n)for(u=0;o=a[u++];)fe.test(o.type||"")&&n.push(o);return c}var ve=/^key/,_e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function Ae(){return!0}function Ee(){return!1}function we(e,t){return e===function(){try{return w.activeElement}catch(e){}}()==("focus"===t)}function Se(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Se(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function ke(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ae)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,f,d,h,p=Y.get(t);if(K(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(ne,i),n.guid||(n.guid=S.guid++),(s=p.events)||(s=p.events=Object.create(null)),(a=p.handle)||(a=p.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;l--;)f=h=(u=be.exec(e[l])||[])[1],d=(u[2]||"").split(".").sort(),f&&(c=S.event.special[f]||{},f=(i?c.delegateType:c.bindType)||f,c=S.event.special[f]||{},u=S.extend({type:f,origType:h,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:d.join(".")},o),(h=s[f])||((h=s[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(f,a)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),S.event.global[f]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,f,d,h,p,g,m=Y.hasData(e)&&Y.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(P)||[""]).length;u--;)if(h=g=(s=be.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=S.event.special[h]||{},d=l[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,p,m.handle)||S.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)S.event.remove(e,h+t[u],n,r,!0);S.isEmptyObject(l)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a=new Array(arguments.length),s=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[s.type]||[],e=S.event.special[s.type]||{};for(a[0]=s,t=1;t<arguments.length;t++)a[t]=arguments[t];if(s.delegateTarget=this,!e.preDispatch||!1!==e.preDispatch.call(this,s)){for(o=S.event.handlers.call(this,s,l),t=0;(r=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==i.namespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(i=((S.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(u):S.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return ue.test(e.type)&&e.click&&T(e,"input")&&ke(e,"click",Ae),!1},trigger:function(e){e=this||e;return ue.test(e.type)&&e.click&&T(e,"input")&&ke(e,"click"),!0},_default:function(e){e=e.target;return ue.test(e.type)&&e.click&&T(e,"input")&&Y.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ae:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&_e.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return ke(this,e,we),!1},trigger:function(){return ke(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var Te=/<script|<style|<link/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function xe(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,r,i,o;if(1===t.nodeType){if(Y.hasData(e)&&(o=Y.get(e).events))for(i in Y.remove(t,"handle events"),o)for(n=0,r=o[i].length;n<r;n++)S.event.add(t,i,o[i][n]);X.hasData(e)&&(e=X.access(e),e=S.extend({},e),X.set(t,e))}}function De(n,r,i,o){r=y(r);var e,t,a,s,l,u,c=0,f=n.length,d=f-1,h=r[0],p=g(h);if(p||1<f&&"string"==typeof h&&!_.checkClone&&Ce.test(h))return n.each(function(e){var t=n.eq(e);p&&(r[0]=h.call(this,e,t.html())),De(t,r,i,o)});if(f&&(t=(e=ye(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(pe(e,"script"),Oe)).length;c<f;c++)l=e,c!==d&&(l=S.clone(l,!0,!0),s&&S.merge(a,pe(l,"script"))),i.call(n[c],l,c);if(s)for(u=a[a.length-1].ownerDocument,S.map(a,Le),c=0;c<s;c++)l=a[c],fe.test(l.type||"")&&!Y.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):b(l.textContent.replace(Re,""),l,u))}return n}function Pe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(pe(r)),r.parentNode&&(n&&re(r)&&ge(pe(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,l,u,c=e.cloneNode(!0),f=re(e);if(!(_.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=pe(c),r=0,i=(o=pe(e)).length;r<i;r++)s=o[r],l=a[r],u=void 0,"input"===(u=l.nodeName.toLowerCase())&&ue.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||pe(e),a=a||pe(c),r=0,i=o.length;r<i;r++)Ie(o[r],a[r]);else Ie(e,c);return 0<(a=pe(c,"script")).length&&ge(a,!f&&pe(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(K(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Pe(this,e,!0)},remove:function(e){return Pe(this,e)},text:function(e){return G(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||xe(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=xe(this,e)).insertBefore(e,t.firstChild)})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return G(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Te.test(e)&&!he[(ce.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return De(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(pe(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),l.apply(n,t.get());return this.pushStack(n)}});function Be(e){var t=e.ownerDocument.defaultView;return(t=!t||!t.opener?E:t).getComputedStyle(e)}function Me(e,t,n){var r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in n=n.call(e),t)e.style[r]=i[r];return n}var je,Fe,Ne,Ue,Ge,He,Ve,qe,ze=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),Ke=new RegExp(te.join("|"),"i");function We(e,t,n){var r,i,o=e.style;return(n=n||Be(e))&&(""!==(i=n.getPropertyValue(t)||n[t])||re(e)||(i=S.style(e,t)),!_.pixelBoxStyles()&&ze.test(i)&&Ke.test(t)&&(r=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=i,i=n.width,o.width=r,o.minWidth=e,o.maxWidth=t)),void 0!==i?i+"":i}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function Xe(){var e;qe&&(Ve.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",qe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(Ve).appendChild(qe),e=E.getComputedStyle(qe),je="1%"!==e.top,He=12===$e(e.marginLeft),qe.style.right="60%",Ue=36===$e(e.right),Fe=36===$e(e.width),qe.style.position="absolute",Ne=12===$e(qe.offsetWidth/3),ne.removeChild(Ve),qe=null)}function $e(e){return Math.round(parseFloat(e))}Ve=w.createElement("div"),(qe=w.createElement("div")).style&&(qe.style.backgroundClip="content-box",qe.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===qe.style.backgroundClip,S.extend(_,{boxSizingReliable:function(){return Xe(),Fe},pixelBoxStyles:function(){return Xe(),Ue},pixelPosition:function(){return Xe(),je},reliableMarginLeft:function(){return Xe(),He},scrollboxSize:function(){return Xe(),Ne},reliableTrDimensions:function(){var e,t,n;return null==Ge&&(e=w.createElement("table"),n=w.createElement("tr"),t=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px",n.style.height="1px",t.style.height="9px",ne.appendChild(e).appendChild(n).appendChild(t),n=E.getComputedStyle(n),Ge=3<parseInt(n.height),ne.removeChild(e)),Ge}}));var Qe=["Webkit","Moz","ms"],Ze=w.createElement("div").style,Je={};function et(e){return S.cssProps[e]||Je[e]||(e in Ze?e:Je[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;n--;)if((e=Qe[n]+t)in Ze)return e}(e)||e)}var tt=/^(none|table(?!-c[ea]).+)/,nt=/^--/,rt={position:"absolute",visibility:"hidden",display:"block"},it={letterSpacing:"0",fontWeight:"400"};function ot(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function at(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=S.css(e,n+te[a],!0,i)),r?("content"===n&&(l-=S.css(e,"padding"+te[a],!0,i)),"margin"!==n&&(l-=S.css(e,"border"+te[a]+"Width",!0,i))):(l+=S.css(e,"padding"+te[a],!0,i),"padding"!==n?l+=S.css(e,"border"+te[a]+"Width",!0,i):s+=S.css(e,"border"+te[a]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function st(e,t,n){var r=Be(e),i=(!_.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(a)){if(!n)return a;a="auto"}return(!_.boxSizingReliable()&&i||!_.reliableTrDimensions()&&T(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+at(e,t,n||(i?"border":"content"),o,r,a)+"px"}function lt(e,t,n,r,i){return new lt.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=We(e,"opacity");return""===e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=z(t),l=nt.test(t),u=e.style;if(l||(t=et(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"==(o=typeof n)&&(i=ee.exec(n))&&i[1]&&(n=ae(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),_.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o=z(t);return nt.test(t)||(t=et(o)),"normal"===(i=void 0===(i=(o=S.cssHooks[t]||S.cssHooks[o])&&"get"in o?o.get(e,!0,n):i)?We(e,t,r):i)&&t in it&&(i=it[t]),""===n||n?(t=parseFloat(i),!0===n||isFinite(t)?t||0:i):i}}),S.each(["height","width"],function(e,s){S.cssHooks[s]={get:function(e,t,n){if(t)return!tt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?st(e,s,n):Me(e,rt,function(){return st(e,s,n)})},set:function(e,t,n){var r,i=Be(e),o=!_.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),n=n?at(e,s,n,a,i):0;return a&&o&&(n-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(i[s])-at(e,s,"border",!1,i)-.5)),n&&(r=ee.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=S.css(e,s)),ot(0,t,n)}}}),S.cssHooks.marginLeft=Ye(_.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+te[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=ot)}),S.fn.extend({css:function(e,t){return G(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Be(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=lt).prototype={constructor:lt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return(e&&e.get?e:lt.propHooks._default).get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:lt.propHooks._default).set(this),this}}).init.prototype=lt.prototype,(lt.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[et(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=lt.prototype.init,S.fx.step={};var ut,ct,ft=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function ht(){ct&&(!1===w.hidden&&E.requestAnimationFrame?E.requestAnimationFrame(ht):E.setTimeout(ht,S.fx.interval),S.fx.tick())}function pt(){return E.setTimeout(function(){ut=void 0}),ut=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=te[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function mt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(i,e,t){var n,o,r=0,a=yt.prefilters.length,s=S.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=ut||pt(),e=Math.max(0,u.startTime+u.duration-e),t=1-(e/u.duration||0),n=0,r=u.tweens.length;n<r;n++)u.tweens[n].run(t);return s.notifyWith(i,[u,t,e]),t<1&&r?e:(r||s.notifyWith(i,[u,1,0]),s.resolveWith(i,[u]),!1)},u=s.promise({elem:i,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:ut||pt(),duration:t.duration,tweens:[],createTween:function(e,t){e=S.Tween(i,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(e),e},stop:function(e){var t=0,n=e?u.tweens.length:0;if(o)return this;for(o=!0;t<n;t++)u.tweens[t].run(1);return e?(s.notifyWith(i,[u,1,0]),s.resolveWith(i,[u,e])):s.rejectWith(i,[u,e]),this}}),c=u.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=z(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);r<a;r++)if(n=yt.prefilters[r].call(u,i,c,u.opts))return g(n.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,mt,u),g(u.opts.start)&&u.opts.start.call(i,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:i,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ae(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=g(e)?(t=e,["*"]):e.match(P)).length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,u,c="width"in t||"height"in t,f=this,d={},h=e.style,p=e.nodeType&&oe(e),g=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}d[r]=g&&g[r]||S.style(e,r)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in c&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=g&&g.display)&&(u=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(u?c=u:(le([e],!0),u=e.style.display||u,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(e,"float")&&(l||(f.done(function(){h.display=u}),null==u&&(c=h.display,u="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,d)l||(g?"hidden"in g&&(p=g.hidden):g=Y.access(e,"fxshow",{display:u}),o&&(g.hidden=!p),p&&le([e],!0),f.done(function(){for(r in p||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),l=mt(p?g[r]:0,r,f),r in g||(g[r]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),r=function(){var e=yt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return r.finish=r,i||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(i,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&dt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),S.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(ut=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),ut=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ct||(ct=!0,ht())},S.fx.stop=function(){ct=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,this.queue(e=e||"fx",function(e,t){var n=E.setTimeout(e,r);t.stop=function(){E.clearTimeout(n)}})},de=w.createElement("input"),J=w.createElement("select").appendChild(w.createElement("option")),de.type="checkbox",_.checkOn=""!==de.value,_.optSelected=J.selected,(de=w.createElement("input")).value="t",de.type="radio",_.radioValue="t"===de.value;var vt,_t=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return G(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(i&&"get"in i&&null!==(r=i.get(e,t)))&&null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!_.radioValue&&"radio"===t&&T(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=_t[t]||S.find.attr;_t[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=_t[o],_t[o]=r,r=null!=a(e,t,n)?o:null,_t[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;function Et(e){return(e.match(P)||[]).join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return G(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s=0;if(g(t))return this.each(function(e){S(this).addClass(t.call(this,e,wt(this)))});if((e=St(t)).length)for(;n=this[s++];)if(a=wt(n),r=1===n.nodeType&&" "+Et(a)+" "){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(a=Et(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0;if(g(t))return this.each(function(e){S(this).removeClass(t.call(this,e,wt(this)))});if(!arguments.length)return this.attr("class","");if((e=St(t)).length)for(;n=this[s++];)if(a=wt(n),r=1===n.nodeType&&" "+Et(a)+" "){for(o=0;i=e[o++];)for(;-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");a!==(a=Et(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,t){var o=typeof i,a="string"==o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):g(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,wt(this),t),t)}):this.each(function(){var e,t,n,r;if(a)for(t=0,n=S(this),r=St(i);e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=o||((e=wt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==i&&Y.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+Et(wt(t))+" ").indexOf(r))return!0;return!1}});var kt=/\r/g;S.fn.extend({val:function(t){var n,e,r,i=this[0];return arguments.length?(r=g(t),this.each(function(e){1===this.nodeType&&(null==(e=r?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(n=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):i?(n=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(kt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:Et(S.text(e))}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,i="select-one"===e.type,o=i?null:[],a=i?r+1:n.length,s=r<0?a:i?r:0;s<a;s++)if(((t=n[s]).selected||s===r)&&!t.disabled&&(!t.parentNode.disabled||!T(t.parentNode,"optgroup"))){if(t=S(t).val(),i)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,o=S.makeArray(t),a=i.length;a--;)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},_.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),_.focusin="onfocusin"in E;function Tt(e){e.stopPropagation()}var Ct=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,l,u,c,f=[n||w],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[],p=c=o=n=n||w;if(3!==n.nodeType&&8!==n.nodeType&&!Ct.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),s=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),u=S.event.special[d]||{},r||!u.trigger||!1!==u.trigger.apply(n,t))){if(!r&&!u.noBubble&&!m(n)){for(a=u.delegateType||d,Ct.test(a+d)||(p=p.parentNode);p;p=p.parentNode)f.push(p),o=p;o===(n.ownerDocument||w)&&f.push(o.defaultView||o.parentWindow||E)}for(i=0;(p=f[i++])&&!e.isPropagationStopped();)c=p,e.type=1<i?a:u.bindType||d,(l=(Y.get(p,"events")||Object.create(null))[e.type]&&Y.get(p,"handle"))&&l.apply(p,t),(l=s&&p[s])&&l.apply&&K(p)&&(e.result=l.apply(p,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),t)||!K(n)||s&&g(n[d])&&!m(n)&&((o=n[s])&&(n[s]=null),S.event.triggered=d,e.isPropagationStopped()&&c.addEventListener(d,Tt),n[d](),e.isPropagationStopped()&&c.removeEventListener(d,Tt),S.event.triggered=void 0,o&&(n[s]=o)),e.result}},simulate:function(e,t,n){e=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(e,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),_.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){S.event.simulate(r,e.target,S.event.fix(e))}S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Rt=E.location,xt={guid:Date.now()},Ot=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new E.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var Lt=/\[\]$/,It=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function n(e,t){t=g(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var r,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,i,o){if(Array.isArray(e))S.each(e,function(e,t){i||Lt.test(r)?o(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==p(e))o(r,e);else for(var t in e)n(r+"["+t+"]",e[t],i,o)}(r,e[r],t,n);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Pt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:n.replace(It,"\r\n")}}).get()}});var Bt=/%20/g,Mt=/#.*$/,jt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Gt={},Ht={},Vt="*/".concat("*"),qt=w.createElement("a");function zt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(g(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Kt(t,r,i,o){var a={},s=t===Ht;function l(e){var n;return a[e]=!0,S.each(t[e]||[],function(e,t){t=t(r,i,o);return"string"!=typeof t||s||a[t]?s?!(n=t):void 0:(r.dataTypes.unshift(t),l(t),!1)}),n}return l(r.dataTypes[0])||!a["*"]&&l("*")}function Wt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&S.extend(!0,e,r),e}qt.href=Rt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,S.ajaxSettings),t):Wt(S.ajaxSettings,e)},ajaxPrefilter:zt(Gt),ajaxTransport:zt(Ht),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,u,c,n,f,d,h,r,i,p=S.ajaxSetup({},t=t||{}),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?S(g):S.event,y=S.Deferred(),v=S.Callbacks("once memory"),_=p.statusCode||{},o={},a={},s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(d){if(!n)for(n={};t=Ft.exec(c);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?c:null},setRequestHeader:function(e,t){return null==d&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,o[e]=t),this},overrideMimeType:function(e){return null==d&&(p.mimeType=e),this},statusCode:function(e){if(e)if(d)b.always(e[b.status]);else for(var t in e)_[t]=[_[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),A(0,e),this}};if(y.promise(b),p.url=((e||p.url||Rt.href)+"").replace(Ut,Rt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(P)||[""],null==p.crossDomain){i=w.createElement("a");try{i.href=p.url,i.href=i.href,p.crossDomain=qt.protocol+"//"+qt.host!=i.protocol+"//"+i.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Kt(Gt,p,t,b),d)return b;for(r in(h=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nt.test(p.type),u=p.url.replace(Mt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Bt,"+")):(i=p.url.slice(u.length),p.data&&(p.processData||"string"==typeof p.data)&&(u+=(Ot.test(u)?"&":"?")+p.data,delete p.data),!1===p.cache&&(u=u.replace(jt,"$1"),i=(Ot.test(u)?"&":"?")+"_="+xt.guid+++i),p.url=u+i),p.ifModified&&(S.lastModified[u]&&b.setRequestHeader("If-Modified-Since",S.lastModified[u]),S.etag[u]&&b.setRequestHeader("If-None-Match",S.etag[u])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&b.setRequestHeader("Content-Type",p.contentType),b.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Vt+"; q=0.01":""):p.accepts["*"]),p.headers)b.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(!1===p.beforeSend.call(g,b,p)||d))return b.abort();if(s="abort",v.add(p.complete),b.done(p.success),b.fail(p.error),l=Kt(Ht,p,t,b)){if(b.readyState=1,h&&m.trigger("ajaxSend",[b,p]),d)return b;p.async&&0<p.timeout&&(f=E.setTimeout(function(){b.abort("timeout")},p.timeout));try{d=!1,l.send(o,A)}catch(e){if(d)throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,t,n,r){var i,o,a,s=t;d||(d=!0,f&&E.clearTimeout(f),l=void 0,c=r||"",b.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a=a||i}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,b,n)),!r&&-1<S.inArray("script",p.dataTypes)&&(p.converters["text script"]=function(){}),a=function(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,a,b,r),r?(p.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(S.lastModified[u]=n),(n=b.getResponseHeader("etag"))&&(S.etag[u]=n)),204===e||"HEAD"===p.type?s="nocontent":304===e?s="notmodified":(s=a.state,i=a.data,r=!(o=a.error))):(o=s,!e&&s||(s="error",e<0&&(e=0))),b.status=e,b.statusText=(t||s)+"",r?y.resolveWith(g,[i,s,b]):y.rejectWith(g,[b,s,o]),b.statusCode(_),_=void 0,h&&m.trigger(r?"ajaxSuccess":"ajaxError",[b,p,r?i:o]),v.fireWith(g,[b,s]),h&&(m.trigger("ajaxComplete",[b,p]),--S.active||S.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return g(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){return this[0]&&(g(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return g(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=g(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Xt=S.ajaxSettings.xhr();_.cors=!!Xt&&"withCredentials"in Xt,_.ajax=Xt=!!Xt,S.ajaxTransport(function(i){var o,a;if(_.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&E.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),w.head.appendChild(r[0])},abort:function(){i&&i()}}});var $t=[],Qt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||S.expando+"_"+xt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Qt,"$1"+r):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=E[r],E[r]=function(){o=arguments},n.always(function(){void 0===i?S(E).removeProp(r):E[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,$t.push(r)),o&&g(i)&&i(o[0]),o=i=void 0}),"script"}),_.createHTMLDocument=((de=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===de.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(_.createHTMLDocument?((r=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(r)):t=w),r=!n&&[],(n=C.exec(e))?[t.createElement(n[1])]:(n=ye([e],t,r),r&&r.length&&S(r).remove(),S.merge([],n.childNodes)));var r},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Et(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s=S.css(e,"position"),l=S(e),u={};"static"===s&&(e.style.position="relative"),o=l.offset(),r=S.css(e,"top"),a=S.css(e,"left"),a=("absolute"===s||"fixed"===s)&&-1<(r+a).indexOf("auto")?(i=(s=l.position()).top,s.left):(i=parseFloat(r)||0,parseFloat(a)||0),null!=(t=g(t)?t.call(e,n,S.extend({},o)):t).top&&(u.top=t.top-o.top+i),null!=t.left&&(u.left=t.left-o.left+a),"using"in t?t.using.call(e,u):("number"==typeof u.top&&(u.top+="px"),"number"==typeof u.left&&(u.left+="px"),l.css(u))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||ne})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return G(this,function(e,t,n){var r;return m(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n?r?r[i]:e[t]:void(r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Ye(_.pixelPosition,function(e,t){if(t)return t=We(e,n),ze.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return G(this,function(e,t,n){var r;return m(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),g(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,r},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=T,S.isFunction=g,S.isWindow=m,S.camelCase=z,S.type=p,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Zt,"")},void 0===(rn=function(){return S}.apply(nn,[]))||(tn.exports=rn);var Jt=E.jQuery,en=E.$;return S.noConflict=function(e){return E.$===S&&(E.$=en),e&&E.jQuery===S&&(E.jQuery=Jt),S},void 0===e&&(E.jQuery=E.$=S),S})},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-pause' viewBox='0 0 20 20'%3e %3cpath style='fill:none;stroke:%23ffffff;stroke-width:2.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' d='m 7.1610169,3.220339 c 0,13.601695 0,13.601695 0,13.601695' /%3e %3cpath style='fill:none;stroke:%23ffffff;stroke-width:2.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' d='m 11.779662,3.220339 c 0,13.601695 0,13.601695 0,13.601695' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg viewBox='0 0 14 14' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'%3e %3cdesc%3eCreated with Lunacy%3c/desc%3e %3cpath d='M8.34343 0.471381C8.34343 0.754209 8.53199 0.942761 8.81481 0.942761L12.3973 0.942761L7.91919 5.42088C7.73064 5.60943 7.73064 5.89226 7.91919 6.08081C8.10774 6.26936 8.39057 6.26936 8.57912 6.08081L13.0572 1.60269L13.0572 5.18518C13.0572 5.46801 13.2458 5.65657 13.5286 5.65657C13.8114 5.65657 14 5.46801 14 5.18518L14 0.471381C14 0.188552 13.8114 0 13.5286 0L8.81481 0C8.53199 0 8.34343 0.188552 8.34343 0.471381C8.34343 0.754209 8.53199 0.942761 8.81481 0.942761L12.3973 0.942761L7.91919 5.42088C7.73064 5.60943 7.73064 5.89226 7.91919 6.08081C8.10774 6.26936 8.39057 6.26936 8.57912 6.08081L13.0572 1.60269L13.0572 5.18518C13.0572 5.46801 13.2458 5.65657 13.5286 5.65657C13.8114 5.65657 14 5.46801 14 5.18518L14 0.471381C14 0.188552 13.8114 0 13.5286 0L8.81481 0C8.53199 0 8.34343 0.188552 8.34343 0.471381ZM5.42088 7.91919L0.942761 12.3973L0.942761 8.81481C0.942761 8.53199 0.754209 8.34343 0.471381 8.34343C0.188552 8.34343 0 8.53199 0 8.81481L0 13.5286C0 13.8114 0.188552 14 0.471381 14L5.18518 14C5.46801 14 5.65657 13.8114 5.65657 13.5286C5.65657 13.2458 5.46801 13.0572 5.18518 13.0572L1.60269 13.0572L6.08081 8.57912C6.26936 8.39057 6.26936 8.10774 6.08081 7.91919C5.93939 7.73064 5.60943 7.73064 5.42088 7.91919L5.42088 7.91919L0.942761 12.3973L0.942761 8.81481C0.942761 8.53199 0.754209 8.34343 0.471381 8.34343C0.188552 8.34343 0 8.53199 0 8.81481L0 13.5286C0 13.8114 0.188552 14 0.471381 14L5.18518 14C5.46801 14 5.65657 13.8114 5.65657 13.5286C5.65657 13.2458 5.46801 13.0572 5.18518 13.0572L1.60269 13.0572L6.08081 8.57912C6.26936 8.39057 6.26936 8.10774 6.08081 7.91919C5.93939 7.73064 5.60943 7.73064 5.42088 7.91919L5.42088 7.91919Z' id='Shape' fill='%23FFFFFF' stroke='none' /%3e %3c/svg%3e"},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,n,p){"use strict";!function(a){p.d(n,"b",function(){return t}),p.d(n,"a",function(){return d});var s=p(4),l=p(2),e=p(15),u=p.n(e),i=p(0),o=p(40);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=p(8),f={apiGetConfigs:"/api/v1/getConfigs?uuid=$$UUID$$"};function t(e){return r=(t=n=e).UUID,e=t.vid,t=t.rServer,r=(t="https:"===a.location.protocol?t.replace("http","https"):t)+f.apiGetConfigs.replace("$$UUID$$",r),e&&(r+="&vid="+e),d([r]).then(function(e){if(e&&0<e.length){var t=(e=e[0]).configs;n=i.e(n,t,Object(o.a)());e=e.videoInfos;return n.src=e.src,n.playList=e?e.playList:"",n.poster=e?e.poster:"",n.qualityList=e?e.qualityList:"",e}return{}});var n,t,r}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"get",e=e.filter(function(e){return""!=e}).map(function(e){return"get"===o?(i={url:r=function(e){if(""===e||void 0===e)return e;var t=a.location.protocol,n=/^([a-z0-9.+-]+:)/i.exec(e),n=n&&"array"==typeof n?n[0]:"";return n&&t!==n&&"file"!==t?(n=n.toLowerCase(),e.replace(n,t)):e}(r=e),method:"get",headers:{"Content-Type":"application/json; charset=UTF-8"},timeout:3e3,json:!0},l.d?new Promise(function(t,e){c.ajax({url:r,method:"get",success:function(e){t(h(e))},error:function(e){s.a.warn("error:",e),t({})}})}):new Promise(function(t,e){u()(i).then(function(e){t(h(e))}).catch(function(e){s.a.warn("error:",e),t({})})})):(n={url:e,method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:t,data:t,timeout:3e3,json:!0},new Promise(function(t,e){u()(n).then(function(e){t(h(e))}).catch(function(e){s.a.warn("error:",e),t({})})}));var n,r,i});return Promise.all(e).catch(function(e){return s.a.warn(e),new Promise(function(e,t){e({})})})}function h(e){var t={};if((e=e.data)&&0===e.code)try{var n=e.result||e,t="object"===r(n)?n:JSON.parse(n)}catch(e){}return t}}.call(this,p(11))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var FORMMAT=function(){function FORMMAT(){_classCallCheck(this,FORMMAT)}return _createClass(FORMMAT,[{key:"formatTime",value:function(e){if(!isFinite(e))return"--:--";e*=1e3;var t=(e=parseInt(e/1e3))%60,n=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,i=parseInt(e/24),e="";return i&&0<i&&(e+=i+":",r<1&&(e+="00:")),e+=("0"+r).slice(-2)+":",e+=("0"+n).slice(-2)+":",(e+=("0"+t).slice(-2)).trim()}},{key:"hex2Rgb",value:function hex2Rgb(hex){var alf=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.7,de=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgba(43, 51, 63, 0.7)",rgb=[],sixHex;return/^\#[0-9A-F]{3}$/i.test(hex)&&(sixHex="#",hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex),/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba(".concat(rgb.join(","),",").concat(alf,")")):(console.warn("Input ".concat(hex," is wrong!")),de)}},{key:"loadFlash",value:function(){var e=options.src,t=options.id||"",n=options.width||"100%",r=options.height||"50%",e={id:t,src:e,autoPlay:options.autoplay,replay:options.replay,rServer:"http://player.hongshiyun.net",javascriptCallbackFunction:options.eventCallback};swfobject.embedSWF("http://static.hongshiyun.net/player/flash/ArcMediaPlayback.swf",embedId,n,r,"10.2.0","http://static.hongshiyun.net/player/flash/playerProductInstall.swf",e,{quality:"high",bgcolor:"#000000",allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque"},{id:"ArcMediaPlayback",name:"ArcMediaPlayback",align:"middle"}),swfobject.createCSS("#"+embedId,"display:block;text-align:left;")}},{key:"sendTrackInfo",value:function(e,t,n){var r=new Object;return r.client="h5",r.operatSystem=self.phoneVersion(),r.browserVersion=self.browserVersion(),r.uuid=self.uuid(),r.mac="XK",r.version=self.version,r.vid=self.vid,r.sessionId=sessionId,r.duration=H5Video.duration,r.uid=self.uid,r.src=self.src,r.type="event",r.title=document.title,r.referrer=document.referrer,r.loc=window.location.href,r.category="video",r.action=e,r.label=t,r.ul=window.navigator.language,r.value=n,window.screen.width>=window.screen.height?r.resolution=window.screen+"*"+window.screen.height:r.resolution=window.screen.height+"*"+window.screen.width,r}},{key:"configureListeners",value:function(e,t,n){n=self.sendTrackInfo(e,t,n);$.ajax({type:"GET",url:"http://analytics.hongshiyun.net/v2/acquisition/recordH5FlashContent",data:n,dataType:"json",success:function(e){}})}}],[{key:"urlSuffix",value:function(e){var t=e.lastIndexOf(".");return e.substring(t+1,e.length).toUpperCase()}}]),FORMMAT}();__webpack_exports__.a=FORMMAT},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return n={"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,h="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");i=new o(n,r||e,i),t=h?h+t:t;return e._events[t]?e._events[t].fn?e._events[t]=[e._events[t],i]:e._events[t].push(i):(e._events[t]=i,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(h=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(h?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var e=h?h+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,r=t.length,i=new Array(r);n<r;n++)i[n]=t[n].fn;return i},s.prototype.listenerCount=function(e){e=h?h+e:e,e=this._events[e];return e?e.fn?1:e.length:0},s.prototype.emit=function(e,t,n,r,i,o){var a=h?h+e:e;if(!this._events[a])return!1;var s,l=this._events[a],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(d=1,s=new Array(u-1);d<u;d++)s[d-1]=arguments[d];l.fn.apply(l.context,s)}else for(var c,f=l.length,d=0;d<f;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,n);break;case 4:l[d].fn.call(l[d].context,t,n,r);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];l[d].fn.apply(l[d].context,s)}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){e=h?h+e:e;if(!this._events[e])return this;if(!t)return l(this,e),this;var i=this._events[e];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||l(this,e);else{for(var o=0,a=[],s=i.length;o<s;o++)(i[o].fn!==t||r&&!i[o].once||n&&i[o].context!==n)&&a.push(i[o]);a.length?this._events[e]=1===a.length?a[0]:a:l(this,e)}return this},s.prototype.removeAllListeners=function(e){return e?(e=h?h+e:e,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=h,e.exports=s.EventEmitter=s},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,o=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}r=s.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=s.normalizePath(r.path),s.buildURLFromParts(r)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(i=o.exec(t.path),t.netLoc=i[1],t.path=i[2]),t.netLoc&&!t.path&&(t.path="/");var i,e={scheme:t.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};return r.netLoc||(e.netLoc=t.netLoc,"/"===r.path[0])||(r.path?(i=(i=t.path).substring(0,i.lastIndexOf("/")+1)+r.path,e.path=s.normalizePath(i)):(e.path=t.path,r.params||(e.params=t.params,r.query||(e.query=t.query)))),null===e.path&&(e.path=n.alwaysNormalize?s.normalizePath(r.path):r.path),s.buildURLFromParts(e)},parseURL:function(e){e=r.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,d){function o(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var e=i(i.s=ENTRY_MODULE);return e.default||e}function h(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(f,e){var n={main:d.m},r=(e=e||{}).all?{main:Object.keys(n.main)}:function(e){for(var t={main:[f]},n={main:[]},r={main:{}};function(n){return Object.keys(n).reduce(function(e,t){return e||0<n[t].length},!1)}(t);)for(var i=Object.keys(t),o=0;o<i.length;o++){var a=i[o],s=t[a].pop();if(r[a]=r[a]||{},!r[a][s]&&e[a][s]){r[a][s]=!0,n[a]=n[a]||[],n[a].push(s);for(var l=function(e,t,n){var r={};r[n]=[];var i=t.toString();if(!(t=i.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)))return r;for(var o,t=t[1],a=new RegExp("(\\\\n|\\W)"+h(t)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");o=a.exec(i);)"dll-reference"!==o[3]&&r[n].push(o[3]);for(a=new RegExp("\\("+h(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");o=a.exec(i);)e[o[2]]||(r[n].push(o[1]),e[o[2]]=d(o[1]).m),r[o[2]]=r[o[2]]||[],r[o[2]].push(o[4]);for(var s,l=Object.keys(r),u=0;u<l.length;u++)for(var c=0;c<r[l[u]].length;c++)s=r[l[u]][c],isNaN(+s)||(r[l[u]][c]=+r[l[u]][c]);return r}(e,e[a][s],a),u=Object.keys(l),c=0;c<u.length;c++)t[u[c]]=t[u[c]]||[],t[u[c]]=t[u[c]].concat(l[u[c]])}}return n}(n),i="";Object.keys(r).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;r[t][e];)e++;r[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",i=i+"var "+t+" = ("+o.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"});var i=i+"new (("+o.toString().replace("ENTRY_MODULE",JSON.stringify(f))+")({"+r.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"}))(self);",t=new window.Blob([i],{type:"text/javascript"});if(e.bare)return t;e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),t=new window.Worker(e);return t.objectURL=e,t}},"./src/crypt/decrypter.js":function(e,t,n){"use strict";n.r(t);var r,s=(p.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},p),l=(h.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},h),u=((r=d.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},r.initTable=function(){for(var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],n=this.invSubMix,s=n[0],l=n[1],u=n[2],c=n[3],f=new Uint32Array(256),d=0,h=0,p=0,p=0;p<256;p++)f[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var g=h^h<<1^h<<2^h<<3^h<<4;e[d]=g=g>>>8^255&g^99;var m=f[t[g]=d],y=f[m],v=f[y],_=257*f[g]^16843008*g;r[d]=_<<24|_>>>8,i[d]=_<<16|_>>>16,o[d]=_<<8|_>>>24,a[d]=_,s[g]=(_=16843009*v^65537*y^257*m^16843008*d)<<24|_>>>8,l[g]=_<<16|_>>>16,u[g]=_<<8|_>>>24,c[g]=_,d?(d=m^f[f[f[v^m]]],h^=f[f[h]]):d=h=1}},r.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);for(var o,a,s,l=this.ksRows=4*(i+6+1),u=this.keySchedule=new Uint32Array(l),c=this.invKeySchedule=new Uint32Array(l),f=this.sBox,d=this.rcon,e=this.invSubMix,h=e[0],p=e[1],g=e[2],m=e[3],y=0;y<l;y++)y<i?a=u[y]=t[y]:(s=a,y%i==0?(s=f[(s=s<<8|s>>>24)>>>24]<<24|f[s>>>16&255]<<16|f[s>>>8&255]<<8|f[255&s],s^=d[y/i|0]<<24):6<i&&y%i==4&&(s=f[s>>>24]<<24|f[s>>>16&255]<<16|f[s>>>8&255]<<8|f[255&s]),u[y]=a=(u[y-i]^s)>>>0);for(o=0;o<l;o++)y=l-o,s=3&o?u[y]:u[y-4],c[o]=o<4||y<=4?s:h[f[s>>>24]]^p[f[s>>>16&255]]^g[f[s>>>8&255]]^m[f[255&s]],c[o]=c[o]>>>0}},r.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},r.decrypt=function(e,t,n,r){for(var i,o,a,s,l,u,c,f,d,h,p,g,m,y,v=this.keySize+6,_=this.invKeySchedule,b=this.invSBox,A=this.invSubMix,E=A[0],w=A[1],S=A[2],k=A[3],n=this.uint8ArrayToUint32Array_(n),T=n[0],C=n[1],R=n[2],x=n[3],O=new Int32Array(e),L=new Int32Array(O.length),I=this.networkToHostOrderSwap;t<O.length;){for(d=I(O[t]),h=I(O[t+1]),p=I(O[t+2]),g=I(O[t+3]),l=d^_[0],u=g^_[1],c=p^_[2],f=h^_[3],m=4,y=1;y<v;y++)i=E[l>>>24]^w[u>>16&255]^S[c>>8&255]^k[255&f]^_[m],o=E[u>>>24]^w[c>>16&255]^S[f>>8&255]^k[255&l]^_[m+1],a=E[c>>>24]^w[f>>16&255]^S[l>>8&255]^k[255&u]^_[m+2],s=E[f>>>24]^w[l>>16&255]^S[u>>8&255]^k[255&c]^_[m+3],l=i,u=o,c=a,f=s,m+=4;i=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&f]^_[m],o=b[u>>>24]<<24^b[c>>16&255]<<16^b[f>>8&255]<<8^b[255&l]^_[m+1],a=b[c>>>24]<<24^b[f>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^_[m+2],s=b[f>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^_[m+3],m+=3,L[t]=I(i^T),L[t+1]=I(s^C),L[t+2]=I(a^R),L[t+3]=I(o^x),T=d,C=h,R=p,x=g,t+=4}return r?(r=(e=(n=L.buffer).byteLength)&&new DataView(n).getUint8(e-1))?n.slice(0,e-r):n:L.buffer},r.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},d),o=n("./src/errors.ts"),c=n("./src/utils/logger.js"),a=n("./src/events.js"),n=n("./src/utils/get-self-scope.js"),i=Object(n.getSelfScope)(),n=((n=f.prototype).isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},n.decrypt=function(t,n,r,i){var e,o,a=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(c.logger.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new u),e.expandKey(n),i(e.decrypt(t,0,r,this.removePKCS7Padding))):(this.logEnabled&&(c.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1),o=this.subtle,this.key!==n&&(this.key=n,this.fastAesKey=new l(o,n)),this.fastAesKey.expandKey().then(function(e){new s(o,r).decrypt(t,e).catch(function(e){a.onWebCryptoError(e,t,n,r,i)}).then(function(e){i(e)})}).catch(function(e){a.onWebCryptoError(e,t,n,r,i)}))},n.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(c.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(c.logger.error("decrypting error : "+e.message),this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},n.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},f);function f(e,t,n){n=(void 0===n?{}:n).removePKCS7Padding,n=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=n)try{var r=i.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}function d(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}function h(e,t){this.subtle=e,this.key=t}function p(e,t){this.subtle=e,this.aesIV=t}t.default=n},"./src/demux/demuxer-inline.js":function(e,t,n){"use strict";n.r(t);var z=n("./src/events.js"),K=n("./src/errors.ts"),g=n("./src/crypt/decrypter.js"),p=n("./src/polyfills/number.js"),W=n("./src/utils/logger.js"),r=n("./src/utils/get-self-scope.js");function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function m(e,t){return t+1<e.length&&i(e,t)}function y(e,t,n,r,i){e.samplerate||(i=function(e,t,n,r){var i,o,a,s=navigator.userAgent.toLowerCase(),l=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&t[n+2])>>>6);if(!((i=(60&t[n+2])>>>2)>u.length-1))return o=(1&t[n+2])<<2,o|=(192&t[n+3])>>>6,W.logger.log("manifest codec:"+r+",ADTS data:type:"+c+",sampleingIndex:"+i+"["+u[i]+"Hz],channelConfig:"+o),r=/firefox/i.test(s)?6<=i?(c=5,a=new Array(4),i-3):(c=2,a=new Array(2),i):-1!==s.indexOf("android")?(c=2,a=new Array(2),i):(c=5,a=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&6<=i?i-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(6<=i&&1==o||/vivaldi/i.test(s))||!r&&1==o)&&(c=2,a=new Array(2)),i)),a[0]=c<<3,a[0]|=(14&i)>>1,a[1]|=(1&i)<<7,a[1]|=o<<3,5===c&&(a[1]|=(14&r)>>1,a[2]=(1&r)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[i],channelCount:o,codec:"mp4a.40."+c,manifestCodec:l};e.trigger(z.default.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+i})}(t,n,r,i),e.config=i.config,e.samplerate=i.samplerate,e.channelCount=i.channelCount,e.codec=i.codec,e.manifestCodec=i.manifestCodec,W.logger.log("parsed codec:"+e.codec+",rate:"+i.samplerate+",nb channel:"+i.channelCount))}function h(e){return 9216e4/e}function v(e,i,o,a,s){var t=function(e){var t=i.length,n=l(i,o),r=u(i,o);if(0<(r-=n)&&o+n+r<=t)return{headerLength:n,frameLength:r,stamp:a+s*e}}(h(e.samplerate));if(t){var n=t.stamp,r=t.headerLength,t=t.frameLength,n={unit:i.subarray(o+r,o+r+t),pts:n,dts:n};return e.samples.push(n),{sample:n,length:t+r}}}var o,T=n("./src/demux/id3.js"),A=((o=O.prototype).resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},o.resetTimeStamp=function(){},O.probe=function(e){if(!e)return!1;for(var t=(T.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(function(e,t){if(m(e,t)){var n=l(e,t);if(t+n>=e.length)return;var r=u(e,t);if(r<=n)return;r=t+r;if(r===e.length||r+1<e.length&&i(e,r))return 1}}(e,t))return W.logger.log("ADTS sync word found !"),!0;return!1},o.append=function(e,t,n,r){for(var i=this._audioTrack,o=T.default.getID3Data(e,0)||[],a=T.default.getTimeStamp(o),s=Object(p.isFiniteNumber)(a)?90*a:9e4*t,l=0,u=s,c=e.length,f=o.length,d=[{pts:u,dts:u,data:o}];f<c-1;)if(m(e,f)&&f+5<c){y(i,this.observer,e,f,i.manifestCodec);var h=v(i,e,f,s,l);if(!h){W.logger.log("Unable to parse AAC frame");break}f+=h.length,u=h.sample.pts,l++}else T.default.isHeader(e,f)?(o=T.default.getID3Data(e,f),d.push({pts:u,dts:u,data:o}),f+=o.length):f++;this.remuxer.remux(i,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,n,r)},o.destroy=function(){},O),E=n("./src/demux/mp4demuxer.js"),s={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){i=r+i*(9e4*o.samplesPerFrame/o.sampleRate),i={unit:t.subarray(n,n+o.frameLength),pts:i,dts:i};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(i),{sample:i,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3,a=e[t+2]>>1&1;if(1!=n&&0!=i&&15!=i&&3!=o){i=1e3*s.BitratesMap[14*(3==n?3-r:3==r?3:4)+i-1],o=s.SamplingRateMap[3*(3==n?0:2==n?1:2)+o],e=e[t+3]>>6==3?1:2,t=s.SamplesCoefficients[n][r],n=s.BytesInSlot[r],r=8*t*n;return{sampleRate:o,channelCount:e,frameLength:parseInt(t*i/o+a,10)*n,samplesPerFrame:r}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4,r=t+(r=n&&n.frameLength?n.frameLength:r);if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},_=s,C=((n=x.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");r.set(e.subarray(n,n+t)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},n.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},n.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return 32<e&&W.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?n<<t|this.readBits(t):n},n.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},n.skipUEG=function(){this.skipBits(1+this.skipLZ())},n.skipEG=function(){this.skipBits(1+this.skipLZ())},n.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},n.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},n.readBoolean=function(){return 1===this.readBits(1)},n.readUByte=function(){return this.readBits(8)},n.readUShort=function(){return this.readBits(16)},n.readUInt=function(){return this.readBits(32)},n.skipScalingList=function(e){for(var t=8,n=8,r=0;r<e;r++)t=0===(n=0!==n?(t+this.readEG()+256)%256:n)?t:n},n.readSPS=function(){var e,t,n,r,i=0,o=0,a=0,s=0,l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),f=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(l(),e=l(),u(5),d(3),l(),p(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var m=c();if(3===m&&d(1),p(),p(),d(1),f())for(n=3!==m?8:12,r=0;r<n;r++)f()&&g(r<6?16:64)}p();var m=c();if(0===m)c();else if(1===m)for(d(1),h(),h(),t=c(),r=0;r<t;r++)h();p(),d(1),m=c(),p=c(),0===(u=u(1))&&d(1),d(1),f()&&(i=c(),o=c(),a=c(),s=c());var y=[1,1];if(f()&&f())switch(l()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[l()<<8|l(),l()<<8|l()]}return{width:Math.ceil(16*(m+1)-2*i-2*o),height:(2-u)*(p+1)*16-(u?2:4)*(a+s),pixelRatio:y}},n.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},x),a=((n=R.prototype).decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},n.decryptAacSample=function(t,n,r,i){var o=t[n].unit,e=o.subarray(16,o.length-o.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),a=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e),o.set(e,16),i||a.decryptAacSamples(t,n+1,r)})},n.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},n.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},n.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},n.decryptAvcSample=function(t,n,r,i,o,a){var s=this.discardEPB(o.data),e=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(e.buffer,function(e){o.data=l.getAvcDecryptedUnit(s,e),a||l.decryptAvcSamples(t,n,r+1,i)})},n.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.data.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}},R),c={video:1,audio:2,id3:3,text:4},w=((n=L.prototype).setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new a(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},L.probe=function(e){e=L._syncOffset(e);return!(e<0||(e&&W.logger.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},L._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},L.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},n.resetInitSegment=function(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=L.createTrack("video",r),this._audioTrack=L.createTrack("audio",r),this._id3Track=L.createTrack("id3",r),this._txtTrack=L.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r},n.resetTimeStamp=function(){},n.append=function(e,t,n,r){var i,o,a,s,l,u=e.length,c=!1;this.pmtUnknownTypes={},this.contiguous=n;var f=this.pmtParsed,d=this._avcTrack,h=this._audioTrack,p=this._id3Track,g=d.pid,m=h.pid,y=p.pid,v=this._pmtId,_=d.pesData,b=h.pesData,A=p.pesData,E=this._parsePAT,w=this._parsePMT.bind(this),S=this._parsePES,k=this._parseAVCPES.bind(this),T=this._parseAACPES.bind(this),C=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),x=L._syncOffset(e);for(u-=(u+x)%188,i=x;i<u;i+=188)if(71===e[i]){if(o=!!(64&e[i+1]),a=((31&e[i+1])<<8)+e[i+2],1<(48&e[i+3])>>4){if((s=i+5+e[i+4])===i+188)continue}else s=i+4;switch(a){case g:o&&(_&&(l=S(_))&&k(l,!1),_={data:[],size:0}),_&&(_.data.push(e.subarray(s,i+188)),_.size+=i+188-s);break;case m:o&&(b&&(l=S(b))&&(h.isAAC?T:C)(l),b={data:[],size:0}),b&&(b.data.push(e.subarray(s,i+188)),b.size+=i+188-s);break;case y:o&&(A&&(l=S(A))&&R(l),A={data:[],size:0}),A&&(A.data.push(e.subarray(s,i+188)),A.size+=i+188-s);break;case 0:o&&(s+=e[s]+1),v=this._pmtId=E(e,s);break;case v:o&&(s+=e[s]+1);var O=w(e,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=O.avc)&&(d.pid=g),0<(m=O.audio)&&(h.pid=m,h.isAAC=O.isAAC),0<(y=O.id3)&&(p.pid=y),c&&!f&&(W.logger.log("reparse from beginning"),c=!1,i=x-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(z.default.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(l=S(_))?(k(l,!0),d.pesData=null):d.pesData=_,b&&(l=S(b))?((h.isAAC?T:C)(l),h.pesData=null):(b&&b.size&&W.logger.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=b),A&&(l=S(A))?(R(l),p.pesData=null):p.pesData=A,null==this.sampleAes?this.remuxer.remux(h,d,p,this._txtTrack,t,n,r):this.decryptAndRemux(h,d,p,this._txtTrack,t,n,r)},n.decryptAndRemux=function(e,t,n,r,i,o,a){var s;e.samples&&e.isAAC?(s=this).sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)}):this.decryptAndRemuxAvc(e,t,n,r,i,o,a)},n.decryptAndRemuxAvc=function(e,t,n,r,i,o,a){var s;t.samples?(s=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,o,a)}):this.remuxer.remux(e,t,n,r,i,o,a)},n.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},n._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},n._trackUnknownPmt=function(e,t,n){var r=this.pmtUnknownTypes[e]||0;return 0===r&&(this.pmtUnknownTypes[e]=0,t.call(W.logger,n)),this.pmtUnknownTypes[e]++,r},n._parsePMT=function(e,t,n,r){var i,o={audio:-1,avc:-1,id3:-1,isAAC:!0},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){this._trackUnknownPmt(e[t],W.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=i);break;case 21:-1===o.id3&&(o.id3=i);break;case 219:if(!r){this._trackUnknownPmt(e[t],W.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=i);break;case 3:case 4:n?-1===o.audio&&(o.audio=i,o.isAAC=!1):this._trackUnknownPmt(e[t],W.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],W.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],W.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},n._parsePES=function(e){var t,n,r,i,o,a,s=0,l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&1<l.length;){var u=new Uint8Array(l[0].length+l[1].length);u.set(l[0]),u.set(l[1],l[0].length),l[0]=u,l.splice(1,1)}if(1!==((t=l[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;if(192&(r=t[7])&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?54e5<i-(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(W.logger.warn(Math.round((i-o)/9e4)+"s delta between PTS and DTS, align them"),i=o):o=i),a=(r=t[8])+9,e.size<=a)return null;e.size-=a;for(var c=new Uint8Array(e.size),f=0,d=l.length;f<d;f++){var h=(t=l[f]).byteLength;if(a){if(h<a){a-=h;continue}t=t.subarray(a),h-=a,a=0}c.set(t,s),s+=h}return n&&(n-=r+3),{data:c,pts:i,dts:o,len:n}},n.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;if(isNaN(e.pts)){if(!r)return void t.dropped++;var i=n[r-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&W.logger.log(e.pts+"/"+e.dts+":"+e.debug)},n._parseAVCPES=function(m,e){function y(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}}var v,_,b,A=this,E=this._avcTrack,t=this._parseAVCNALu(m.data),w=this.avcSample,S=!1,k=this.pushAccesUnit.bind(this);m.data=null,w&&t.length&&!E.audFound&&(k(w,E),w=this.avcSample=y(!1,m.pts,m.dts,"")),t.forEach(function(e){switch(e.type){case 1:_=!0,(w=w||(A.avcSample=y(!0,m.pts,m.dts,""))).frame=!0;var t=e.data;S&&4<t.length&&(2!==(d=new C(t).readSliceType())&&4!==d&&7!==d&&9!==d||(w.key=!0));break;case 5:_=!0,(w=w||(A.avcSample=y(!0,m.pts,m.dts,""))).key=!0,w.frame=!0;break;case 6:_=!0,(v=new C(A.discardEPB(e.data))).readUByte();for(var n=0,r=0,i=!1,o=0;!i&&1<v.bytesAvailable;){for(n=0;n+=o=v.readUByte(),255===o;);for(r=0;r+=o=v.readUByte(),255===o;);if(4===n&&0!==v.bytesAvailable){if(i=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){var a=v.readUByte(),s=31&a,l=[a,v.readUByte()];for(b=0;b<s;b++)l.push(v.readUByte()),l.push(v.readUByte()),l.push(v.readUByte());A._insertSampleInOrder(A._txtTrack.samples,{type:3,pts:m.pts,bytes:l})}}else if(5===n&&0!==v.bytesAvailable){if(i=!0,16<r){var u=[];for(b=0;b<16;b++)u.push(v.readUByte().toString(16)),3!==b&&5!==b&&7!==b&&9!==b||u.push("-");var c=r-16,f=new Uint8Array(c);for(b=0;b<c;b++)f[b]=v.readUByte();A._insertSampleInOrder(A._txtTrack.samples,{pts:m.pts,payloadType:n,uuid:u.join(""),userDataBytes:f,userData:Object(T.utf8ArrayToStr)(f.buffer)})}}else if(r<v.bytesAvailable)for(b=0;b<r;b++)v.readUByte()}break;case 7:if(S=_=!0,!E.sps){var d=(v=new C(e.data)).readSPS();E.width=d.width,E.height=d.height,E.pixelRatio=d.pixelRatio,E.sps=[e.data],E.duration=A._duration;var h=e.data.subarray(1,4),p="avc1.";for(b=0;b<3;b++){var g=h[b].toString(16);p+=g=g.length<2?"0"+g:g}E.codec=p}break;case 8:_=!0,E.pps||(E.pps=[e.data]);break;case 9:_=!1,E.audFound=!0,w&&k(w,E),w=A.avcSample=y(!1,m.pts,m.dts,"");break;case 12:_=!1;break;default:_=!1,w&&(w.debug+="unknown NAL "+e.type+" ")}w&&_&&w.units.push(e)}),e&&w&&(k(w,E),this.avcSample=null)},n._insertSampleInOrder=function(e,t){var n=e.length;if(0<n){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;0<=r;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},n._getLastNalUnit=function(){var e,t,n=this.avcSample;return t=(n=!n||0===n.units.length?(e=this._avcTrack.samples)[e.length-1]:n)?(n=n.units)[n.length-1]:t},n._parseAVCNALu=function(e){var t,n,r,i,o,a,s,l,u=0,c=e.byteLength,f=this._avcTrack,d=f.naluState||0,h=d,p=[],g=-1;for(-1===d&&(i=31&e[g=0],d=0,u=1);u<c;)t=e[u++],d=d?1!==d?t?1===t?(0<=g?(r={data:e.subarray(g,u-d-1),type:i},p.push(r)):(o=this._getLastNalUnit())&&(h&&u<=4-h&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-h)),0<(n=u-d-1))&&((a=new Uint8Array(o.data.byteLength+n)).set(o.data,0),a.set(e.subarray(0,n),o.data.byteLength),o.data=a),u<c?(i=31&e[g=u],0):-1):0:3:t?0:2:t?0:1;return 0<=g&&0<=d&&(r={data:e.subarray(g,c),type:i,state:d},p.push(r)),0===p.length&&(s=this._getLastNalUnit())&&((l=new Uint8Array(s.data.byteLength+e.byteLength)).set(s.data,0),l.set(e,s.data.byteLength),s.data=l),f.naluState=d,p},n.discardEPB=function(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;for(var i=t-n.length,o=new Uint8Array(i),a=0,r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),o[r]=e[a];return o},n._parseAACPES=function(e){var t,n,r,i,o,a,s=this._audioTrack,l=e.data,u=e.pts,c=this.aacOverFlow,f=this.aacLastPTS;for(c&&((e=new Uint8Array(c.byteLength+l.byteLength)).set(c,0),e.set(l,c.byteLength),l=e),n=0,i=l.length;n<i-1&&!m(l,n);n++);if(!n||(a=n<i-1?(o="AAC PES did not start with ADTS header,offset:"+n,!1):(o="no ADTS header found in AAC PES",!0),W.logger.warn("parsing error:"+o),this.observer.trigger(z.default.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:o}),!a)){for(y(s,this.observer,l,n,this.audioCodec),t=0,a=h(s.samplerate),c&&f&&(a=f+a,1<Math.abs(a-u)&&(W.logger.log("AAC: align PTS for overlapping frames by "+Math.round((a-u)/90)),u=a));n<i;){if(m(l,n)){if(n+5<i){var d=v(s,l,n,u,t);if(d){n+=d.length,r=d.sample.pts,t++;continue}}break}n++}c=n<i?l.subarray(n,i):null,this.aacOverFlow=c,this.aacLastPTS=r}},n._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,o=e.pts;i<n;)if(_.isHeader(t,i)){var a=_.appendFrame(this._audioTrack,t,i,o,r);if(!a)break;i+=a.length,r++}else i++},n._parseID3PES=function(e){this._id3Track.samples.push(e)},L),S=((n=k.prototype).resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},n.resetTimeStamp=function(){},k.probe=function(e){var t,n,r=T.default.getID3Data(e,0);if(r&&void 0!==T.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(_.probe(e,t))return W.logger.log("MPEG Audio sync word found !"),!0;return!1},n.append=function(e,t,n,r){for(var i=T.default.getID3Data(e,0)||[],o=T.default.getTimeStamp(i),a=void 0!==o?90*o:9e4*t,s=i.length,l=e.length,u=0,c=0,f=this._audioTrack,d=[{pts:a,dts:a,data:i}];s<l;)if(_.isHeader(e,s)){var h=_.appendFrame(f,e,s,a,u);if(!h)break;s+=h.length,c=h.sample.pts,u++}else T.default.isHeader(e,s)?(i=T.default.getID3Data(e,s),d.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(f,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,n,r)},n.destroy=function(){},k),F=(b.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},b),f=Math.pow(2,32)-1,Y=(d.init=function(){for(var e in d.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})d.types.hasOwnProperty(e)&&(d.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);d.HDLR_TYPES={video:t,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);d.STTS=d.STSC=d.STCO=i,d.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);d.FTYP=d.box(d.types.ftyp,t,i,t,n),d.DINF=d.box(d.types.dinf,d.box(d.types.dref,r))},d.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t},d.hdlr=function(e){return d.box(d.types.hdlr,d.HDLR_TYPES[e])},d.mdat=function(e){return d.box(d.types.mdat,e)},d.mdhd=function(e,t){t*=e;var n=Math.floor(t/(1+f)),t=Math.floor(t%(1+f));return d.box(d.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},d.mdia=function(e){return d.box(d.types.mdia,d.mdhd(e.timescale,e.duration),d.hdlr(e.type),d.minf(e))},d.mfhd=function(e){return d.box(d.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},d.minf=function(e){return"audio"===e.type?d.box(d.types.minf,d.box(d.types.smhd,d.SMHD),d.DINF,d.stbl(e)):d.box(d.types.minf,d.box(d.types.vmhd,d.VMHD),d.DINF,d.stbl(e))},d.moof=function(e,t,n){return d.box(d.types.moof,d.mfhd(e),d.traf(n,t))},d.moov=function(e){for(var t=e.length,n=[];t--;)n[t]=d.trak(e[t]);return d.box.apply(null,[d.types.moov,d.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(d.mvex(e)))},d.mvex=function(e){for(var t=e.length,n=[];t--;)n[t]=d.trex(e[t]);return d.box.apply(null,[d.types.mvex].concat(n))},d.mvhd=function(e,t){t*=e;var n=Math.floor(t/(1+f)),t=Math.floor(t%(1+f)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d.box(d.types.mvhd,t)},d.sdtp=function(e){for(var t,n=e.samples||[],r=new Uint8Array(4+n.length),i=0;i<n.length;i++)t=n[i].flags,r[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return d.box(d.types.sdtp,r)},d.stbl=function(e){return d.box(d.types.stbl,d.stsd(e),d.box(d.types.stts,d.STTS),d.box(d.types.stsc,d.STSC),d.box(d.types.stsz,d.STSZ),d.box(d.types.stco,d.STCO))},d.avc1=function(e){for(var t,n,r=[],i=[],o=0;o<e.sps.length;o++)n=(t=e.sps[o]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(t));for(o=0;o<e.pps.length;o++)n=(t=e.pps[o]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(t));var a=d.box(d.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(i))),s=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return d.box(d.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,d.box(d.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d.box(d.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},d.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},d.mp4a=function(e){var t=e.samplerate;return d.box(d.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),d.box(d.types.esds,d.esds(e)))},d.mp3=function(e){var t=e.samplerate;return d.box(d.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},d.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?d.box(d.types.stsd,d.STSD,d.mp4a(e)):d.box(d.types.stsd,d.STSD,d.mp3(e)):d.box(d.types.stsd,d.STSD,d.avc1(e))},d.tkhd=function(e){var t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,e=Math.floor(n/(1+f)),n=Math.floor(n%(1+f));return d.box(d.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))},d.traf=function(e,t){var n=d.sdtp(e),r=e.id,i=Math.floor(t/(1+f)),t=Math.floor(t%(1+f));return d.box(d.types.traf,d.box(d.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),d.box(d.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t])),d.trun(e,n.length+16+20+8+16+8+8),n)},d.trak=function(e){return e.duration=e.duration||4294967295,d.box(d.types.trak,d.tkhd(e),d.mdia(e))},d.trex=function(e){e=e.id;return d.box(d.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},d.trun=function(e,t){var n,r,i,o,a,s=e.samples||[],l=s.length,e=12+16*l,u=new Uint8Array(e);for(u.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),n=0;n<l;n++)r=(a=s[n]).duration,i=a.size,o=a.flags,a=a.cts,u.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,a>>>24&255,a>>>16&255,a>>>8&255,255&a],12+16*n);return d.box(d.types.trun,u)},d.initSegment=function(e){d.types||d.init();var t=d.moov(e);return(e=new Uint8Array(d.FTYP.byteLength+t.byteLength)).set(d.FTYP),e.set(t,d.FTYP.byteLength),e},d);function d(){}function b(){}function k(e,t,n){this.observer=e,this.config=n,this.remuxer=t}function L(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}function R(e,t,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new g.default(e,t,{removePKCS7Padding:!1})}function x(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function O(e,t,n){this.observer=e,this.config=n,this.remuxer=t}function I(e,t,n,r){n=e*t*(n=void 0===n?1:n);return(r=void 0===r?!1:r)?Math.round(n):n}function X(e,t){return I(e,1e3,1/9e4,t=void 0===t?!1:t)}function D(e,t){return I(e,9e4,1/(t=void 0===t?1:t))}var N=D(10),$=D(.2),Q=null;function Z(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=n;return e}var P,B=((n=U.prototype).destroy=function(){},n.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},n.resetInitSegment=function(){this.ISGenerated=!1},n.getVideoStartPts=function(e){var r=!1,e=e.reduce(function(e,t){var n=t.pts-e;return n<-4294967296?(r=!0,Z(e,t.pts)):0<n?e:t.pts},e[0].pts);return r&&W.logger.debug("PTS rollover detected"),e},n.remux=function(e,t,n,r,i,o,a){var s,l,u,c,f,d;this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated&&(d=e.samples.length,s=t.samples.length,u=l=i,d&&s&&(c=this.getVideoStartPts(t.samples),c=(Z(e.samples[0].pts,c)-c)/t.inputTimeScale,l+=Math.max(0,c),u+=Math.max(0,-c)),d?(e.timescale||(W.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i)),d=this.remuxAudio(e,l,o,a),s&&(d&&(f=d.endPTS-d.startPTS),t.timescale||(W.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,u,o,f))):!s||(a=this.remuxVideo(t,u,o,0,a))&&e.codec&&this.remuxEmptyAudio(e,l,o,a)),n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(z.default.FRAG_PARSED)},n.generateIS=function(e,t,n){var r,i,o=this.observer,a=e.samples,s=t.samples,l=this.typeSupported,u="audio/mp4",c={},f={tracks:c},d=void 0===this._initPTS;d&&(i=r=1/0),e.config&&a.length&&(e.timescale=e.samplerate,W.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(u="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),c.audio={container:u,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:Y.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(i=r=a[0].pts-Math.round(e.inputTimeScale*n))),t.sps&&t.pps&&s.length?(e=t.inputTimeScale,t.timescale=e,c.video={container:"video/mp4",codec:t.codec,initSegment:Y.initSegment([t]),metadata:{width:t.width,height:t.height}},d&&(t=this.getVideoStartPts(s),n=Math.round(e*n),r=Math.min(r,Z(s[0].dts,t)-n),i=Math.min(i,t-n),this.observer.trigger(z.default.INIT_PTS_FOUND,{initPTS:i}))):d&&c.audio&&this.observer.trigger(z.default.INIT_PTS_FOUND,{initPTS:i}),Object.keys(c).length?(o.trigger(z.default.FRAG_PARSING_INIT_SEGMENT,f),this.ISGenerated=!0,d&&(this._initPTS=i,this._initDTS=r)):o.trigger(z.default.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},n.remuxVideo=function(e,t,n,r){var i,o,a=e.timescale,s=e.samples,l=[],u=s.length,c=this._initPTS,f=8,d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,p=0,g=!1,m=this.nextAvcDts;if(0!==u){n||(m=t*a-(s[0].pts-Z(s[0].dts,s[0].pts)));for(var y=0;y<u;y++){var v=s[y];v.pts=Z(v.pts-c,m),v.dts=Z(v.dts-c,m),v.dts>v.pts&&(p=Math.max(Math.min(p,v.pts-v.dts),-1*$)),v.dts<s[0<y?y-1:y].dts&&(g=!0)}g&&s.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id}),_=s[0].dts;var _,t=s[u-1].dts,b=Math.round((t-_)/(u-1));if(p<0){if(p<-2*b){W.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+X(-b,!0)+" ms");for(var A=p,E=0;E<u;E++)s[E].dts=A=Math.max(A,s[E].pts-b),s[E].pts=Math.max(A,s[E].pts)}else{W.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+X(p,!0)+" ms to overcome this issue");for(var w=0;w<u;w++)s[w].dts=s[w].dts+p}_=s[0].dts,t=s[u-1].dts}!n||((n=b<(I=_-m))||I<-1)&&(n?W.logger.warn("AVC: "+X(I,!0)+" ms ("+I+"dts) hole between fragments detected, filling it"):W.logger.warn("AVC: "+X(-I,!0)+" ms ("+I+"dts) overlapping between fragments detected"),_=m,n=s[0].pts-I,s[0].dts=_,s[0].pts=n,W.logger.log("Video: First PTS/DTS adjusted: "+X(n,!0)+"/"+X(_,!0)+", delta: "+X(I,!0)+" ms")),Q&&Q<75&&(_=Math.max(0,_));for(var S=0,k=0,T=0;T<u;T++){for(var C=s[T],R=C.units,x=R.length,O=0,L=0;L<x;L++)O+=R[L].data.length;k+=O,S+=x,C.length=O,C.dts=Math.max(C.dts,_),C.pts=Math.max(C.pts,C.dts,0),d=Math.min(C.pts,d),h=Math.max(C.pts,h)}t=s[u-1].dts;var I=k+4*S+8;try{o=new Uint8Array(I)}catch(e){return void this.observer.trigger(z.default.ERROR,{type:K.ErrorTypes.MUX_ERROR,details:K.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:I,reason:"fail allocating video mdat "+I})}var D=new DataView(o.buffer);D.setUint32(0,I),o.set(Y.types.mdat,4);for(var P=0;P<u;P++){for(var B,M,j=s[P],F=j.units,N=0,U=0,G=F.length;U<G;U++){var H=F[U],V=H.data,H=H.data.byteLength;D.setUint32(f,H),f+=4,o.set(V,f),f+=H,N+=4+H}P<u-1?i=s[P+1].dts-j.dts:(M=this.config,B=j.dts-s[0<P?P-1:P].dts,M.stretchShortVideoTrack?(M=M.maxBufferHole,Math.floor(M*a)<(M=(r?d+r*a:this.nextAudioPts)-j.pts)?((i=M-B)<0&&(i=B),W.logger.log("It is approximately "+X(M,!1)+" ms to the next segment; using duration "+X(i,!1)+" ms for the last video frame.")):i=B):i=B),B=Math.round(j.pts-j.dts),l.push({size:N,duration:i,cts:B,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=t+i;var q,t=e.dropped;e.nbNalu=0,e.dropped=0,l.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((q=l[0].flags).dependsOn=2,q.isNonSync=0),e.samples=l,q=Y.moof(e.sequenceNumber++,_,e),e.samples=[];t={data1:q,data2:o,startPTS:d/a,endPTS:(h+i)/a,startDTS:_/a,endDTS:this.nextAvcDts/a,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:t};return this.observer.trigger(z.default.FRAG_PARSING_DATA,t),t}},n.remuxAudio=function(e,t,n,r){var i,o,a,s,l,u=e.inputTimeScale,c=e.timescale,f=u/c,d=(e.isAAC?1024:1152)*f,h=this._initPTS,p=!e.isAAC&&this.typeSupported.mpeg,g=p?0:8,m=e.samples,y=[],v=this.nextAudioPts;if(n|=m.length&&v&&(r&&Math.abs(t-v/u)<.1||Math.abs(m[0].pts-v-h)<20*d),m.forEach(function(e){e.pts=e.dts=Z(e.pts-h,t*u)}),0!==(m=m.filter(function(e){return 0<=e.pts})).length){if(n||(v=r?Math.max(0,t*u):m[0].pts),e.isAAC)for(var _=this.config.maxAudioFramesDrift,b=0,A=v;b<m.length;){var E=m[b],w=E.pts,S=w-A;if(S<=-_*d)n||0<b?(W.logger.warn("Dropping 1 audio frame @ "+X(A,!0)/1e3+"s due to "+X(S,!0)+" ms overlap."),m.splice(b,1)):(W.logger.warn("Audio frame @ "+X(w,!0)/1e3+"s overlaps nextAudioPts by "+X(S,!0)+" ms."),A=w+d,b++);else if(_*d<=S&&S<N&&A){var k=Math.round(S/d);W.logger.warn("Injecting "+k+" audio frames @ "+X(A,!0)/1e3+"s due to "+X(S,!0)+" ms gap.");for(var T=0;T<k;T++){var C=Math.max(A,0);(o=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(W.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),o=E.unit.subarray()),m.splice(b,0,{unit:o,pts:C,dts:C}),A+=d,b++}E.pts=E.dts=A,A+=d,b++}else Math.abs(S),E.pts=E.dts=A,A+=d,b++}for(var R=m.length,x=0;R--;)x+=m[R].unit.byteLength;for(var O=0,L=m.length;O<L;O++){var I=m[O],D=I.unit,I=I.pts;if(void 0!==l&&i)i.duration=Math.round((I-l)/f);else{var P=I-v,B=0;if(n&&e.isAAC&&P){if(0<P&&P<N)B=Math.round((I-v)/d),W.logger.log(X(P,!0)+" ms hole between AAC samples detected,filling it"),0<B&&(x+=B*(o=!(o=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))?D.subarray():o).length);else if(P<-12){W.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+X(v,!0)+" ms / "+X(I,!0)+" ms / "+X(-P,!0)+" ms"),x-=D.byteLength;continue}I=v}if(s=I,!(0<x))return;x+=g;try{a=new Uint8Array(x)}catch(e){return void this.observer.trigger(z.default.ERROR,{type:K.ErrorTypes.MUX_ERROR,details:K.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating audio mdat "+x})}p||(new DataView(a.buffer).setUint32(0,x),a.set(Y.types.mdat,4));for(var M=0;M<B;M++)(o=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(W.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),o=D.subarray()),a.set(o,g),g+=o.byteLength,i={size:o.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(i)}a.set(D,g);P=D.byteLength;g+=P,y.push(i={size:P,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),l=I}var j=0;if(2<=(R=y.length)&&(j=y[R-2].duration,i.duration=j),R){this.nextAudioPts=v=l+f*j,e.samples=y,c=p?new Uint8Array:Y.moof(e.sequenceNumber++,s/f,e),e.samples=[];r=s/u,j=v/u,j={data1:c,data2:a,startPTS:r,endPTS:j,startDTS:r,endDTS:j,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.observer.trigger(z.default.FRAG_PARSING_DATA,j),j}return null}},n.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,o=i/(e.samplerate||i),a=this.nextAudioPts,s=(void 0!==a?a:r.startDTS*i)+this._initDTS,i=r.endDTS*i+this._initDTS,l=1024*o,u=Math.ceil((i-s)/l),c=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(W.logger.warn("remux empty Audio"),c){for(var f=[],d=0;d<u;d++){var h=s+d*l;f.push({unit:c,pts:h,dts:h})}e.samples=f,this.remuxAudio(e,t,n)}else W.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},n.remuxID3=function(e,t){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,i=this._initPTS,o=this._initDTS,a=0;a<n;a++){var s=e.samples[a];s.pts=Z(s.pts-i,t*r)/r,s.dts=Z(s.dts-o,t*r)/r}this.observer.trigger(z.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},n.remuxText=function(e,t){var n=e.samples.length,r=e.inputTimeScale,i=this._initPTS;if(n){for(var o=0;o<n;o++){var a=e.samples[o];a.pts=Z(a.pts-i,t*r)/r}e.samples.sort(function(e,t){return e.pts-t.pts}),this.observer.trigger(z.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},U),M=((n=j.prototype).destroy=function(){},n.resetTimeStamp=function(){},n.resetInitSegment=function(){},n.remux=function(e,t,n,r,i,o,a,s){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(z.default.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(z.default.FRAG_PARSED)},j),r=Object(r.getSelfScope)();function j(e){this.observer=e}function U(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Q&&(n=navigator.userAgent.match(/Chrome\/(\d+)/i),Q=n?parseInt(n[1]):0)}try{P=r.performance.now.bind(r.performance)}catch(e){W.logger.debug("Unable to use Performance API on this environment"),P=r.Date.now}(r=G.prototype).destroy=function(){var e=this.demuxer;e&&e.destroy()},r.push=function(e,n,r,i,o,a,s,l,u,c,f,d){var t,h,p=this;0<e.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method?(null==(t=this.decrypter)&&(t=this.decrypter=new g.default(this.observer,this.config)),h=P(),t.decrypt(e,n.key.buffer,n.iv.buffer,function(e){var t=P();p.observer.trigger(z.default.FRAG_DECRYPTED,{stats:{tstart:h,tdecrypt:t}}),p.pushDecrypted(new Uint8Array(e),n,new Uint8Array(r),i,o,a,s,l,u,c,f,d)})):this.pushDecrypted(new Uint8Array(e),n,new Uint8Array(r),i,o,a,s,l,u,c,f,d)},r.pushDecrypted=function(e,t,n,r,i,o,a,s,l,u,c,f){var d=this.demuxer,h=this.remuxer;if(!d||a||s){for(var p,g=this.observer,m=this.typeSupported,y=this.config,v=[{demux:w,remux:B},{demux:E.default,remux:M},{demux:A,remux:B},{demux:S,remux:B}],_=0,b=v.length;_<b&&!(p=v[_]).demux.probe(e);_++);if(!p)return void g.trigger(z.default.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});h&&h instanceof p.remux||(h=new p.remux(g,y,m,this.vendor)),d&&d instanceof p.demux||(d=new p.demux(g,h,y,m),this.probe=p.demux.probe),this.demuxer=d,this.remuxer=h}(a||s)&&(d.resetInitSegment(n,r,i,u),h.resetInitSegment()),a&&(d.resetTimeStamp(f),h.resetTimeStamp(f)),"function"==typeof d.setDecryptData&&d.setDecryptData(t),d.append(e,o,l,c)},r=G;function G(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}t.default=r},"./src/demux/demuxer-worker.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/demux/demuxer-inline.js"),s=n("./src/events.js"),l=n("./src/utils/logger.js"),u=n("./node_modules/eventemitter3/index.js");t.default=function(r){var i=new u.EventEmitter;i.trigger=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};function o(e,t){r.postMessage({event:e,data:t})}r.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var n=JSON.parse(t.config);r.demuxer=new a.default(i,t.typeSupported,n,t.vendor),Object(l.enableLogs)(n.debug),o("init",null);break;case"demux":r.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),i.on(s.default.FRAG_DECRYPTED,o),i.on(s.default.FRAG_PARSING_INIT_SEGMENT,o),i.on(s.default.FRAG_PARSED,o),i.on(s.default.ERROR,o),i.on(s.default.FRAG_PARSING_METADATA,o),i.on(s.default.FRAG_PARSING_USERDATA,o),i.on(s.default.INIT_PTS_FOUND,o),i.on(s.default.FRAG_PARSING_DATA,function(e,t){var n=[],e={event:e,data:t};t.data1&&(e.data1=t.data1.buffer,n.push(t.data1.buffer),delete t.data1),t.data2&&(e.data2=t.data2.buffer,n.push(t.data2.buffer),delete t.data2),r.postMessage(e,n)})}},"./src/demux/id3.js":function(e,t,n){"use strict";n.r(t),n.d(t,"utf8ArrayToStr",function(){return r});var c,f=n("./src/utils/get-self-scope.js"),n=(s.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s.getID3Data=function(e,t){for(var n=t,r=0;s.isHeader(e,t);)r+=10,r+=s._readSize(e,t+6),s.isFooter(e,t+10)&&(r+=10),t+=r;if(0<r)return e.subarray(n,n+r)},s._readSize=function(e,t){var n=0,n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]},s.getTimeStamp=function(e){for(var t=s.getID3Frames(e),n=0;n<t.length;n++){var r=t[n];if(s.isTimeStampFrame(r))return s._readTimeStamp(r)}},s.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},s._getFrameData=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=s._readSize(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},s.getID3Frames=function(e){for(var t=0,n=[];s.isHeader(e,t);){for(var r=s._readSize(e,t+6),i=(t+=10)+r;t+8<i;){var o=s._getFrameData(e.subarray(t)),a=s._decodeFrame(o);a&&n.push(a),t+=o.size+10}s.isFooter(e,t)&&(t+=10)}return n},s._decodeFrame=function(e){return"PRIV"===e.type?s._decodePrivFrame(e):"W"===e.type[0]?s._decodeURLFrame(e):s._decodeTextFrame(e)},s._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}},s._decodePrivFrame=function(e){if(!(e.size<2)){var t=s._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},s._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=s._utf8ArrayToStr(e.data.subarray(1),!0);t+=n.length+1;t=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:t}}t=s._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:t}}},s._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=s._utf8ArrayToStr(e.data.subarray(1),!0);t+=n.length+1;t=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:t}}t=s._utf8ArrayToStr(e.data);return{key:e.type,data:t}},s._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var n=(r=Object(f.getSelfScope)(),c=c||void 0===r.TextDecoder?c:new r.TextDecoder("utf-8"));if(n){var r=n.decode(e);if(t){n=r.indexOf("\0");return-1!==n?r.substring(0,n):r}return r.replace(/\0/g,"")}for(var i,o,a,s=e.length,l="",u=0;u<s;){if(0===(i=e[u++])&&t)return l;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(i);break;case 12:case 13:o=e[u++],l+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[u++],a=e[u++],l+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}}return l},s);function s(){}var r=n._utf8ArrayToStr;t.default=n},"./src/demux/mp4demuxer.js":function(e,t,n){"use strict";n.r(t);var o=n("./src/utils/logger.js"),s=n("./src/events.js"),a=Math.pow(2,32)-1,n=((n=d.prototype).resetTimeStamp=function(e){this.initPTS=e},n.resetInitSegment=function(e,t,n,r){var i,o;e&&e.byteLength?(null==t&&(t="mp4a.40.5"),null==n&&(n="avc1.42e01e"),o={},(i=this.initData=d.parseInitSegment(e)).audio&&i.video?o.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:r?e:null}:(i.audio&&(o.audio={container:"audio/mp4",codec:t,initSegment:r?e:null}),i.video&&(o.video={container:"video/mp4",codec:n,initSegment:r?e:null})),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})):(t&&(this.audioCodec=t),n&&(this.videoCodec=n))},d.probe=function(e){return 0<d.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},d.bin2str=function(e){return String.fromCharCode.apply(null,e)},d.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<8|e[t+1];return t<0?65536+t:t},d.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t},d.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},d.findBox=function(e,t){var n,r,i,o,a,s=[];if(e.data?(o=e.start,r=e.end,e=e.data):(o=0,r=e.byteLength),!t.length)return null;for(n=o;n<r;)a=1<(i=d.readUint32(e,n))?n+i:r,d.bin2str(e.subarray(n+4,n+8))===t[0]&&(1===t.length?s.push({data:e,start:n+8,end:a}):(i=d.findBox({data:e,start:n+8,end:a},t.slice(1))).length&&(s=s.concat(i))),n=a;return s},d.parseSegmentIndex=function(e){var t=d.findBox(e,["moov"])[0],t=t?t.end:null,n=0,r=d.findBox(e,["sidx"]);if(!r||!r[0])return null;var i=[],e=(r=r[0]).data[0],n=0===e?8:16,o=d.readUint32(r,n);n+=4,n+=0===e?8:16;var a=r.end+0,s=d.readUint16(r,n+=2);n+=2;for(var l=0;l<s;l++){var u=n,c=d.readUint32(r,u);u+=4;var f=2147483647&c;if(1==(2147483648&c)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");c=d.readUint32(r,u);u+=4,i.push({referenceSize:f,subsegmentDuration:c,info:{duration:c/o,start:a,end:a+f-1}}),a+=f,n=u+=4}return{earliestPresentationTime:0,timescale:o,version:e,referencesCount:s,references:i,moovEndOffset:t}},d.parseInitSegment=function(e){var i=[];return d.findBox(e,["moov","trak"]).forEach(function(e){var t,n,r=d.findBox(e,["tkhd"])[0];r&&(n=0===r.data[r.start]?12:20,t=d.readUint32(r,n),(r=d.findBox(e,["mdia","mdhd"])[0])&&(n=0===r.data[r.start]?12:20,r=d.readUint32(r,n),!(n=d.findBox(e,["mdia","hdlr"])[0])||(n={soun:"audio",vide:"video"}[d.bin2str(n.data.subarray(n.start+8,n.start+12))])&&((e=d.findBox(e,["mdia","minf","stbl","stsd"])).length&&(e=e[0],e=d.bin2str(e.data.subarray(e.start+12,e.start+16)),o.logger.log("MP4Demuxer:"+n+":"+e+" found")),i[t]={timescale:r,type:n},i[n]={timescale:r,id:t})))}),i},d.getStartDTS=function(n,e){var e=d.findBox(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return d.findBox(t,["tfhd"]).map(function(e){var e=d.readUint32(e,4),e=n[e].timescale||9e4;return d.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],n=d.readUint32(e,4);return 1===t&&(n*=Math.pow(2,32),n+=d.readUint32(e,8)),n})[0]/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},d.offsetStartDTS=function(n,e,i){d.findBox(e,["moof","traf"]).map(function(t){return d.findBox(t,["tfhd"]).map(function(e){var e=d.readUint32(e,4),r=n[e].timescale||9e4;d.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],n=d.readUint32(e,4);0===t?d.writeUint32(e,4,n-i*r):(n*=Math.pow(2,32),n+=d.readUint32(e,8),n-=i*r,n=Math.max(n,0),t=Math.floor(n/(1+a)),n=Math.floor(n%(1+a)),d.writeUint32(e,4,t),d.writeUint32(e,8,n))})})})},n.append=function(e,t,n,r){var i=this.initData;i||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),i=this.initData);var o,a=this.initPTS;void 0===a&&(o=d.getStartDTS(i,e),this.initPTS=a=o-t,this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:a})),d.offsetStartDTS(i,e,a),a=d.getStartDTS(i,e),this.remuxer.remux(i.audio,i.video,null,null,a,n,r,e)},n.destroy=function(){},d);function d(e,t){this.observer=e,this.remuxer=t}t.default=n},"./src/errors.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,"ErrorTypes",function(){return r}),n.d(t,"ErrorDetails",function(){return i}),(t=r=r||{}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",(t=i=i||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"},"./src/events.js":function(e,t,n){"use strict";n.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return fn});var r={};n.r(r),n.d(r,"newCue",function(){return yt});var h,i,o=n("./node_modules/url-toolkit/src/url-toolkit.js"),m=n("./src/errors.ts"),k=n("./src/polyfills/number.js"),A=n("./src/events.js"),T=n("./src/utils/logger.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=((Ze=l.prototype).destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},Ze.onHandlerDestroying=function(){},Ze.onHandlerDestroyed=function(){},Ze.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},Ze.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},Ze.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},Ze.onEvent=function(e,t){this.onEventGeneric(e,t)},Ze.onEventGeneric=function(e,t){try{!function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}.call(this,e,t).call()}catch(t){T.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},l);function l(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}(et=h=h||{}).MANIFEST="manifest",et.LEVEL="level",et.AUDIO_TRACK="audioTrack",et.SUBTITLE_TRACK="subtitleTrack",(rt=i=i||{}).MAIN="main",rt.AUDIO="audio",rt.SUBTITLE="subtitle";var u=n("./src/demux/mp4demuxer.js");function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f,C=(be=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}],c(d.prototype,be),d);function d(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(De=f=f||{}).AUDIO="audio",De.VIDEO="video";var R=((at=g.prototype).setByteRange=function(e,t){var n=e.split("@",2),e=[];1===n.length?e[0]=t?t.byteRangeEndOffset:0:e[0]=parseInt(n[1]),e[1]=parseInt(n[0])+e[0],this._byteRange=e},at.addElementaryStream=function(e){this._elementaryStreams[e]=!0},at.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},at.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},at.setDecryptDataFromLevelKey=function(e,t){var n=e;return null!=e&&e.method&&e.uri&&!e.iv&&((n=new C(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},at=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this.levelkey||this._decryptdata?(!this._decryptdata&&this.levelkey&&("number"!=typeof(e=this.sn)&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&T.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)),this._decryptdata):null;var e}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(k.isFiniteNumber)(this.programDateTime))return null;var e=Object(k.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],p(g.prototype,at),g);function g(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[f.AUDIO]=!1,e[f.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=(Zt=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(k.isFiniteNumber)(this.fragments[0].programDateTime))}}],y(w.prototype,Zt),w),v=/^(\d+)x(\d+)$/,_=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,O=((Xe=E.prototype).decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},Xe.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},Xe.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},Xe.decimalFloatingPoint=function(e){return parseFloat(this[e])},Xe.enumeratedString=function(e){return this[e]},Xe.decimalResolution=function(e){e=v.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},E.parseAttrList=function(e){var t,n={};for(_.lastIndex=0;null!==(t=_.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},E),b={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function E(e){for(var t in e="string"==typeof e?E.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}function w(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}function S(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var L=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,I=/#EXT-X-MEDIA:(.*)/g,D=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),P=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,B=/\.(mp4|m4s|m4v|m4a)$/i,M=(j.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},j.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return 2<n.length?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},j.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},j.parseMasterPlaylist=function(e,t){var n,r,i,o,a=[],s={},l=!1;function u(r,i){["video","audio"].forEach(function(n){var e,t=r.filter(function(e){return t=e,!!(e=b[n])&&!0===e[t.slice(0,4)];var t});t.length&&(e=t.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}),i[n+"Codec"]=(0<e.length?e:t)[0],r=r.filter(function(e){return-1===t.indexOf(e)}))}),i.unknownCodecs=r}for(L.lastIndex=0;null!=(o=L.exec(e));)o[1]?(r=(n={}).attrs=new O(o[1]),n.url=j.resolve(o[2],t),(i=r.decimalResolution("RESOLUTION"))&&(n.width=i.width,n.height=i.height),n.bitrate=r.decimalInteger("AVERAGE-BANDWIDTH")||r.decimalInteger("BANDWIDTH"),n.name=r.NAME,u([].concat((r.CODECS||"").split(/[ ,]+/)),n),n.videoCodec&&-1!==n.videoCodec.indexOf("avc1")&&(n.videoCodec=j.convertAVC1ToAVCOTI(n.videoCodec)),a.push(n)):!o[3]||(o=new O(o[3]))["DATA-ID"]&&(l=!0,s[o["DATA-ID"]]=o);return{levels:a,sessionData:l?s:null}},j.parseMasterPlaylistMedia=function(e,t,n,r){void 0===r&&(r=[]);var i=[],o=0;for(I.lastIndex=0;null!==(a=I.exec(e));){var a,s=new O(a[1]);s.TYPE===n&&(a={attrs:s,id:o++,groupId:s["GROUP-ID"],instreamId:s["INSTREAM-ID"],name:s.NAME||s.LANGUAGE,type:n,default:"YES"===s.DEFAULT,autoselect:"YES"===s.AUTOSELECT,forced:"YES"===s.FORCED,lang:s.LANGUAGE},s.URI&&(a.url=j.resolve(s.URI,t)),r.length&&(s=j.findGroup(r,a.groupId),a.audioCodec=(s||r[0]).codec),i.push(a))}return i},j.parseLevelPlaylist=function(e,t,n,r,i){var o,a,s,l=0,u=0,c=new x(t),f=0,d=null,h=new R,p=null;for(D.lastIndex=0;null!==(o=D.exec(e));){var g=o[1];if(g){h.duration=parseFloat(g);var m=(" "+o[2]).slice(1);h.title=m||null,h.tagList.push(m?["INF",g,m]:["INF",g])}else if(o[3])Object(k.isFiniteNumber)(h.duration)&&(y=l++,h.type=r,h.start=u,s&&(h.levelkey=s),h.sn=y,h.level=n,h.cc=f,h.urlId=i,h.baseurl=t,h.relurl=(" "+o[3]).slice(1),g=d,(y=h).rawProgramDateTime?y.programDateTime=Date.parse(y.rawProgramDateTime):null!=g&&g.programDateTime&&(y.programDateTime=g.endProgramDateTime),Object(k.isFiniteNumber)(y.programDateTime)||(y.programDateTime=null,y.rawProgramDateTime=null),c.fragments.push(h),u+=(d=h).duration,h=new R);else if(o[4]){var y=(" "+o[4]).slice(1);d?h.setByteRange(y,d):h.setByteRange(y)}else if(o[5])h.rawProgramDateTime=(" "+o[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),null===p&&(p=c.fragments.length);else if(o=o[0].match(P)){for(a=1;a<o.length&&void 0===o[a];a++);var v=(" "+o[a+1]).slice(1),_=(" "+o[a+2]).slice(1);switch(o[a]){case"#":h.tagList.push(_?[v,_]:[v]);break;case"PLAYLIST-TYPE":c.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":l=c.startSN=parseInt(v);break;case"TARGETDURATION":c.targetduration=parseFloat(v);break;case"VERSION":c.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"DIS":f++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(v);break;case"KEY":var b=new O(v),A=b.enumeratedString("METHOD"),E=b.URI,w=b.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(b.KEYFORMAT||"identity")){T.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}A&&(s=new C(t,E),E&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(A)&&(s.method=A,s.key=null,s.iv=w));break;case"START":var S=new O(v).decimalFloatingPoint("TIME-OFFSET");Object(k.isFiniteNumber)(S)&&(c.startTimeOffset=S);break;case"MAP":S=new O(v);h.relurl=S.URI,S.BYTERANGE&&h.setByteRange(S.BYTERANGE),h.baseurl=t,h.level=n,h.type=r,h.sn="initSegment",c.initSegment=h,(h=new R).rawProgramDateTime=c.initSegment.rawProgramDateTime;break;default:T.logger.warn("line parsed but not handled: "+o)}}else T.logger.warn("No matches on slow regex match for level playlist!")}return(h=d)&&!h.relurl&&(c.fragments.pop(),u-=h.duration),c.totalduration=u,c.averagetargetduration=u/c.fragments.length,c.endSN=l-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=f,!c.initSegment&&c.fragments.length&&c.fragments.every(function(e){return B.test(e.relurl)})&&(T.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(h=new R).relurl=c.fragments[0].relurl,h.baseurl=t,h.level=n,h.type=r,h.sn="initSegment",c.initSegment=h,c.needSidxRanges=!0),p&&function(e,t){for(var n=e[t],r=t-1;0<=r;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(c.fragments,p),c},j);function j(){}var F=window.performance,N=function(t){var e;function d(e){return(e=t.call(this,e,A.default.MANIFEST_LOADING,A.default.LEVEL_LOADING,A.default.AUDIO_TRACK_LOADING,A.default.SUBTITLE_TRACK_LOADING)||this).loaders={},e}n=t,(e=d).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,d.canHaveQualityLevels=function(e){return e!==h.AUDIO_TRACK&&e!==h.SUBTITLE_TRACK},d.mapContextToLevelType=function(e){switch(e.type){case h.AUDIO_TRACK:return i.AUDIO;case h.SUBTITLE_TRACK:return i.SUBTITLE;default:return i.MAIN}},d.getResponseUrl=function(e,t){e=e.url;return e=void 0===e||0===e.indexOf("data:")?t.url:e};var n=d.prototype;return n.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,t=new(n||r)(t);return e.loader=t,this.loaders[e.type]=t},n.getInternalLoader=function(e){return this.loaders[e.type]},n.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},n.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},n.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.onManifestLoading=function(e){this.load({url:e.url,type:h.MANIFEST,level:0,id:null,responseType:"text"})},n.onLevelLoading=function(e){this.load({url:e.url,type:h.LEVEL,level:e.level,id:e.id,responseType:"text"})},n.onAudioTrackLoading=function(e){this.load({url:e.url,type:h.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},n.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:h.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},n.load=function(e){var t,n,r,i,o=this.hls.config;if(T.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id),s=this.getInternalLoader(e)){var a=s.context;if(a&&a.url===e.url)return T.logger.trace("playlist request ongoing"),!1;T.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case h.MANIFEST:t=o.manifestLoadingMaxRetry,n=o.manifestLoadingTimeOut,r=o.manifestLoadingRetryDelay,i=o.manifestLoadingMaxRetryTimeout;break;case h.LEVEL:r=i=t=0,n=o.levelLoadingTimeOut;break;default:t=o.levelLoadingMaxRetry,n=o.levelLoadingTimeOut,r=o.levelLoadingRetryDelay,i=o.levelLoadingMaxRetryTimeout}var s=this.createInternalLoader(e),l={timeout:n,maxRetry:t,retryDelay:r,maxRetryDelay:i},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return T.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,l,a),!0},n.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);if(this.resetInternalLoader(n.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=F.now(),0===i.indexOf("#EXTM3U")?0<i.indexOf("#EXTINF:")||0<i.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},n.loaderror=function(e,t,n){this._handleNetworkError(t,n=void 0===n?null:n,!1,e)},n.loadtimeout=function(e,t,n){this._handleNetworkError(t,n=void 0===n?null:n,!0)},n._handleMasterPlaylist=function(e,t,n,r){var i,o,a=this.hls,s=e.data,l=d.getResponseUrl(e,n),u=M.parseMasterPlaylist(s,l),c=u.levels,f=u.sessionData;c.length?(i=c.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),u=M.parseMasterPlaylistMedia(s,l,"AUDIO",i),i=M.parseMasterPlaylistMedia(s,l,"SUBTITLES"),s=M.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS"),u.length&&(o=!1,u.forEach(function(e){e.url||(o=!0)}),!1===o&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(T.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))),a.trigger(A.default.MANIFEST_LOADED,{levels:c,audioTracks:u,subtitles:i,captions:s,url:l,stats:t,networkDetails:r,sessionData:f})):this._handleManifestParsingError(e,n,"no level found in manifest",r)},n._handleTrackOrLevelPlaylist=function(e,t,n,r){var i=this.hls,o=n.id,a=n.level,s=n.type,l=d.getResponseUrl(e,n),u=Object(k.isFiniteNumber)(o)?o:0,c=Object(k.isFiniteNumber)(a)?a:u,f=d.mapContextToLevelType(n),f=M.parseLevelPlaylist(e.data,l,c,f,u);f.tload=t.tload,f.fragments.length?(s===h.MANIFEST&&i.trigger(A.default.MANIFEST_LOADED,{levels:[{url:l,details:f}],audioTracks:[],url:l,stats:t,networkDetails:r,sessionData:null}),t.tparsed=F.now(),f.needSidxRanges?(u=f.initSegment.url,this.load({url:u,isSidxRequest:!0,type:s,level:a,levelDetails:f,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})):(n.levelDetails=f,this._handlePlaylistLoaded(e,t,n,r))):i.trigger(A.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},n._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n,r=u.default.parseSegmentIndex(new Uint8Array(e.data));r&&(e=r.references,n=t.levelDetails,e.forEach(function(e,t){e=e.info;!n||0===(t=n.fragments[t]).byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}),n&&n.initSegment.setByteRange(String(r.moovEndOffset)+"@0"))},n._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},n._handleNetworkError=function(e,t,n,r){var i,o;void 0===n&&(n=!1),void 0===r&&(r=null),T.logger.info("A network error occured while loading a "+e.type+"-type playlist");var a=this.getInternalLoader(e);switch(e.type){case h.MANIFEST:i=n?m.ErrorDetails.MANIFEST_LOAD_TIMEOUT:m.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case h.LEVEL:i=n?m.ErrorDetails.LEVEL_LOAD_TIMEOUT:m.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case h.AUDIO_TRACK:i=n?m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}a&&(a.abort(),this.resetInternalLoader(e.type));t={type:m.ErrorTypes.NETWORK_ERROR,details:i,fatal:o,url:e.url,loader:a,context:e,networkDetails:t};r&&(t.response=r),this.hls.trigger(A.default.ERROR,t)},n._handlePlaylistLoaded=function(e,t,n,r){var i=n.type,o=n.level,a=n.id,s=n.levelDetails;if(s&&s.targetduration)if(d.canHaveQualityLevels(n.type))this.hls.trigger(A.default.LEVEL_LOADED,{details:s,level:o||0,id:a||0,stats:t,networkDetails:r});else switch(i){case h.AUDIO_TRACK:this.hls.trigger(A.default.AUDIO_TRACK_LOADED,{details:s,id:a,stats:t,networkDetails:r});break;case h.SUBTITLE_TRACK:this.hls.trigger(A.default.SUBTITLE_TRACK_LOADED,{details:s,id:a,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"invalid target duration",r)},d}(s),U=function(r){var e;function t(e){return(e=r.call(this,e,A.default.FRAG_LOADING)||this).loaders={},e}n=r,(e=t).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=t.prototype;return n.destroy=function(){var e,t=this.loaders;for(e in t){var n=t[e];n&&n.destroy()}this.loaders={},r.prototype.destroy.call(this)},n.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,o=i.fLoader,a=i.loader;t.loaded=0,(e=r[n])&&(T.logger.warn("abort previous fragment loader for type: "+n),e.abort());var e=r[n]=t.loader=new(i.fLoader?o:a)(i),o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},a=t.byteRangeStartOffset,t=t.byteRangeEndOffset;Object(k.isFiniteNumber)(a)&&Object(k.isFiniteNumber)(t)&&(o.rangeStart=a,o.rangeEnd=t),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},e.load(o,t,i)},n.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);e=e.data,n=n.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(A.default.FRAG_LOADED,{payload:e,frag:n,stats:t,networkDetails:r})},n.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},n.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},n.loadprogress=function(e,t,n,r){void 0===r&&(r=null);t=t.frag;t.loaded=e.loaded,this.hls.trigger(A.default.FRAG_LOAD_PROGRESS,{frag:t,stats:e,networkDetails:r})},t}(s),G=function(t){var e;function n(e){return(e=t.call(this,e,A.default.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.destroy=function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t,n=e.frag,r=n.type,i=this.loaders[r];n.decryptdata?(t=n.decryptdata.uri)!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,i&&(T.logger.warn("abort previous key loader for type:"+r),i.abort()),t?(n.loader=this.loaders[r]=new e.loader(e),this.decrypturl=t,this.decryptkey=null,r={url:t,frag:n,responseType:"arraybuffer"},t={timeout:e.fragLoadingTimeOut,maxRetry:0,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},e={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.loader.load(r,t,e)):T.logger.warn("key uri is falsy")):this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(A.default.KEY_LOADED,{frag:n})):T.logger.warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,n){n=n.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(A.default.KEY_LOADED,{frag:n})):T.logger.error("after key load, decryptdata unset")},r.loaderror=function(e,t){var n=t.frag,t=n.loader;t&&t.abort(),delete this.loaders[n.type],this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},r.loadtimeout=function(e,t){var n=t.frag,t=n.loader;t&&t.abort(),delete this.loaders[n.type],this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},n}(s),H="NOT_LOADED",V="PARTIAL",q=function(n){var e;function t(e){var t;return(t=n.call(this,e,A.default.BUFFER_APPENDED,A.default.FRAG_BUFFERED,A.default.FRAG_LOADED)||this).bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}r=n,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,s.prototype.destroy.call(this),n.prototype.destroy.call(this)},r.getBufferedFrag=function(t,n){var r=this.fragments,e=Object.keys(r).filter(function(e){e=r[e];if(e.body.type!==n)return!1;if(!e.buffered)return!1;e=e.body;return e.startPTS<=t&&t<=e.endPTS});if(0===e.length)return null;e=e.pop();return r[e].body},r.detectEvictedFragments=function(o,a){var s=this;Object.keys(this.fragments).forEach(function(e){var t=s.fragments[e];if(t&&t.buffered){e=t.range[o];if(e)for(var n=e.time,r=0;r<n.length;r++){var i=n[r];if(!s.isTimeBuffered(i.startPTS,i.endPTS,a)){s.removeFragment(t.body);break}}}})},r.detectPartialFragments=function(n){var r=this,e=this.getFragmentKey(n),i=this.fragments[e];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){var t;n.hasElementaryStream(e)&&(t=r.timeRanges[e],i.range[e]=r.getBufferedTimes(n.startPTS,n.endPTS,t))}))},r.getBufferedTimes=function(e,t,n){for(var r,i,o=[],a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,r<=e&&t<=i){o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&r<t)o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:o,partial:a}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(t){var n,r,i=this,o=null,a=0;return Object.keys(this.fragments).forEach(function(e){e=i.fragments[e];i.isPartial(e)&&(n=e.body.startPTS-i.bufferPadding,r=e.body.endPTS+i.bufferPadding,n<=t&&t<=r&&(r=Math.min(t-n,r-t),a<=r&&(o=e.body,a=r)))}),o},r.getState=function(e){var t=this.getFragmentKey(e),e=this.fragments[t],t=H;return t=void 0!==e?e.buffered?!0===this.isPartial(e)?V:"OK":"APPENDING":t},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,n){for(var r,i,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,r<=e&&t<=i)return!0;if(t<=r)return!1}return!1},r.onFragLoaded=function(e){e=e.frag;Object(k.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var n=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=n.timeRanges[e];n.detectEvictedFragments(e,t)})},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){e=this.getFragmentKey(e);return void 0!==this.fragments[e]},r.removeFragment=function(e){e=this.getFragmentKey(e);delete this.fragments[e]},r.removeAllFragments=function(){this.fragments=Object.create(null)},t}(s),z={search:function(e,t){for(var n,r,i=0,o=e.length-1;i<=o;){var a=t(r=e[n=(i+o)/2|0]);if(0<a)i=1+n;else{if(!(a<0))return r;o=n-1}}return null}},K=($.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},$.bufferInfo=function(e,t,n){try{if(e){for(var r=e.buffered,i=[],o=0;o<r.length;o++)i.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(i,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},$.bufferedInfo=function(e,t,n){e.sort(function(e,t){return e.start-t.start||t.end-e.end});var r=[];if(n)for(var i=0;i<e.length;i++){var o,a=r.length;a?(o=r[a-1].end,e[i].start-o<n?e[i].end>o&&(r[a-1].end=e[i].end):r.push(e[i])):r.push(e[i])}else r=e;for(var s,l=0,u=t,c=t,f=0;f<r.length;f++){var d=r[f].start,h=r[f].end;if(d<=t+n&&t<h)u=d,l=(c=h)-t;else if(t+n<d){s=d;break}}return{len:l,start:u,end:c,nextStart:s}},$),W=n("./node_modules/eventemitter3/index.js"),Y=n("./node_modules/webworkify-webpack/index.js"),X=n("./src/demux/demuxer-inline.js");function $(){}function Q(){return window.MediaSource||window.WebKitMediaSource}var Z,J=n("./src/utils/get-self-scope.js"),ee=(Z=W.EventEmitter,t=Z,(Ze=oe).prototype=Object.create(t.prototype),(Ze.prototype.constructor=Ze).__proto__=t,oe.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))},oe),te=Object(J.getSelfScope)(),ne=Q()||{isTypeSupported:function(){return!1}},re=((et=ie.prototype).destroy=function(){var e=this.w;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null);var t=this.observer;t&&(t.removeAllListeners(),this.observer=null)},et.push=function(e,t,n,r,i,o,a,s){var l=this.w,u=Object(k.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,c=i.decryptdata,f=this.frag,d=!(f&&i.cc===f.cc),h=!(f&&i.level===f.level),f=f&&i.sn===f.sn+1,f=!h&&f;d&&T.logger.log(this.id+":discontinuity detected"),h&&T.logger.log(this.id+":switch detected"),this.frag=i,l?l.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:u,discontinuity:d,trackSwitch:h,contiguous:f,duration:o,accurateTimeOffset:a,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]):(l=this.demuxer)&&l.push(e,c,t,n,r,u,d,h,f,o,a,s)},et.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":te.URL.revokeObjectURL(this.w.objectURL);break;case A.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},ie);function ie(n,e){var r=this;this.hls=n,this.id=e;var t=this.observer=new ee,i=n.config,o=function(e,t){(t=t||{}).frag=r.frag,t.id=r.id,n.trigger(e,t)};t.on(A.default.FRAG_DECRYPTED,o),t.on(A.default.FRAG_PARSING_INIT_SEGMENT,o),t.on(A.default.FRAG_PARSING_DATA,o),t.on(A.default.FRAG_PARSED,o),t.on(A.default.ERROR,o),t.on(A.default.FRAG_PARSING_METADATA,o),t.on(A.default.FRAG_PARSING_USERDATA,o),t.on(A.default.INIT_PTS_FOUND,o);var a,s={mp4:ne.isTypeSupported("video/mp4"),mpeg:ne.isTypeSupported("audio/mpeg"),mp3:ne.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){T.logger.log("demuxing in webworker");try{a=this.w=Y("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),a.addEventListener("message",this.onwmsg),a.onerror=function(e){n.trigger(A.default.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},a.postMessage({cmd:"init",typeSupported:s,vendor:o,id:e,config:JSON.stringify(i)})}catch(n){T.logger.warn("Error in worker:",n),T.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),a&&te.URL.revokeObjectURL(a.objectURL),this.demuxer=new X.default(t,s,i,o),this.w=void 0}}else this.demuxer=new X.default(t,s,i,o)}function oe(){return Z.apply(this,arguments)||this}function ae(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function se(e,t,n){var r=e[t],i=e[n],e=i.startPTS;Object(k.isFiniteNumber)(e)?t<n?(r.duration=e-r.start,r.duration<0&&T.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-e,i.duration<0&&T.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):t<n?(n=r.cc===i.cc,i.start=r.start+(n&&r.minEndPTS?r.minEndPTS-r.start:r.duration)):i.start=Math.max(r.start-i.duration,0)}function le(e,t,n,r,i,o){var a=n,s=r;Object(k.isFiniteNumber)(t.startPTS)&&(l=Math.abs(t.startPTS-n),Object(k.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(l,t.deltaPTS):t.deltaPTS=l,a=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),s=Math.min(r,t.endPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),o=Math.max(o,t.endDTS));var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=a,t.endPTS=r,t.minEndPTS=s,t.startDTS=i,t.endDTS=o,t.duration=r-n;var u,c,n=t.sn;if(!e||n<e.startSN||n>e.endSN)return 0;for(n=n-e.startSN,(u=e.fragments)[n]=t,c=n;0<c;c--)se(u,c,c-1);for(c=n;c<u.length-1;c++)se(u,c,c+1);return e.PTSKnown=!0,l}function ue(i,o){o.initSegment&&i.initSegment&&(o.initSegment=i.initSegment);var n,r=0;if(ce(i,o,function(e,t){r=e.cc-t.cc,Object(k.isFiniteNumber)(e.startPTS)&&(t.start=t.startPTS=e.startPTS,t.endPTS=e.endPTS,t.duration=e.duration,t.backtracked=e.backtracked,t.dropped=e.dropped,n=t),o.PTSKnown=!0}),o.PTSKnown){if(r){T.logger.log("discontinuity sliding from playlist, take drift into account");for(var e=o.fragments,t=0;t<e.length;t++)e[t].cc+=r}n?le(o,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(){var e=o.startSN-i.startSN,t=i.fragments,n=o.fragments;if(!(e<0||e>t.length))for(var r=0;r<n.length;r++)n[r].start+=t[e].start}(),o.PTSKnown=i.PTSKnown}}function ce(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=r;a<=i;a++){var s=e.fragments[o+a],l=t.fragments[a];if(!s||!l)break;n(s,l,a)}}function fe(e,t,n){var r=1e3*(t.averagetargetduration||t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var de=function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t};function he(n,e){e.fragments.forEach(function(e){var t;e&&(t=e.start+n,e.start=e.startPTS=t,e.endPTS=t+e.duration)}),e.PTSKnown=!0}function pe(e,t,n){var r,i,o,a;r=e,i=n,e=!1,(e=!!((o=t)&&o.details&&i&&(i.endCC>i.startCC||r&&r.cc<i.startCC))||e)&&(a=function(){var e=o.details.fragments,t=i.fragments;if(t.length&&e.length){t=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(e,t[0].cc);if(t&&(!t||t.startPTS))return t;T.logger.log("No frag in previous level to align on")}else T.logger.log("No fragments to align")}())&&(T.logger.log("Adjusting PTS using last level due to CC increase within current level"),he(a.start,i)),!n.PTSKnown&&t&&(a=n,(n=t.details)&&n.fragments.length&&a.hasProgramDateTime&&n.hasProgramDateTime&&(t=n.fragments[0].programDateTime,n=(a.fragments[0].programDateTime-t)/1e3+n.fragments[0].start,Object(k.isFiniteNumber)(n)&&(T.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),he(n,a))))}function ge(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(k.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var i=e[r];if(function(e,t,n){t=1e3*Math.min(t,n.duration+(n.deltaPTS||0));return(n.endProgramDateTime||0)-t>e}(t,n,i))return i}return null}function me(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=null;return e?i=t[e.sn-t[0].sn+1]:0===n&&0===t[0].start&&(i=t[0]),(!i||0!==ye(n,r,i))&&z.search(t,ye.bind(null,n,r))||i}function ye(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);t=Math.min(t,n.duration+(n.deltaPTS||0));return n.start+n.duration-t<=e?1:n.start-t>e&&n.start?-1:0}var ve=((rt=_e.prototype).poll=function(e){var t=this.config,n=this.media,r=this.stalled,i=n.currentTime,o=n.seeking,a=this.seeking&&!o,s=!this.seeking&&o;if(this.seeking=o,i===e){if((s||a)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var l=K.bufferInfo(n,i,0),e=0<l.len,s=l.nextStart||0;if(e||s){if(o){a=2<l.len,e=!s||2<s-i&&!this.fragmentTracker.getPartialFragment(i);if(a||e)return;this.moved=!1}if(!this.moved&&this.stalled){var u=Math.max(s,l.start||0)-i;if(0<u&&u<=2)return void this._trySkipBufferHole(null)}s=self.performance.now();null!==r?(u=s-r,!o&&250<=u&&this._reportStall(l.len),t=K.bufferInfo(n,i,t.maxBufferHole),this._tryFixBufferStall(t,u)):this.stalled=s}}}else this.moved=!0,null!==r&&(this.stallReported&&(r=self.performance.now()-r,T.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(r)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)},rt._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,i=r.getPartialFragment(i);i&&this._trySkipBufferHole(i)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(T.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},rt._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,T.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},rt._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,r=this.media,i=r.currentTime,o=0,a=0;a<r.buffered.length;a++){var s=r.buffered.start(a);if(i+t.maxBufferHole>=o&&i<s){s=Math.max(s+.05,r.currentTime+.1);return T.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+s),this.moved=!0,this.stalled=null,r.currentTime=s,e&&n.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+s,frag:e}),s}o=r.buffered.end(a)}return 0},rt._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;(this.nudgeRetry=i)<e.nudgeMaxRetry?(i=r+i*e.nudgeOffset,T.logger.warn("Nudging 'currentTime' from "+r+" to "+i),n.currentTime=i,t.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(T.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0}))},_e);function _e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var be=function(i){var e;function t(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(e=i.call.apply(i,[this,e].concat(n))||this)._boundTick=void 0,e._tickTimer=null,e._tickInterval=null,e._tickCallCount=0,e._boundTick=e.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)),e}n=i,(e=t).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=t.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),!(this._tickInterval=null))},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),!(this._tickTimer=null))},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},t}(s),Ae="STOPPED",Ee="IDLE",we="KEY_LOADING",Se="FRAG_LOADING",ke="FRAG_LOADING_WAITING_RETRY",Te="WAITING_TRACK",Ce="PARSING",Re="PARSED",xe="BUFFER_FLUSHING",Oe="ERROR",Le="WAITING_INIT_PTS",Ie="WAITING_LEVEL",De=function(e){var t;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var r=n.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ae},r._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(t.live||!n||n.backtracked||n.sn!==t.endSN||e.nextStart)return!1;n=r.getState(n);return n===V||"OK"===n},r.onMediaSeeking=function(){var e,t=this.config,n=this.media,r=this.mediaBuffer,i=this.state,o=n?n.currentTime:null,a=K.bufferInfo(r||n,o,this.config.maxBufferHole);T.logger.log("media seeking to "+(Object(k.isFiniteNumber)(o)?o.toFixed(3):o)),i===Se?(e=this.fragCurrent,0===a.len&&e&&(r=t.maxFragLookUpTolerance,t=e.start-r,r=e.start+e.duration+r,o<t||r<o?(e.loader&&(T.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Ee):T.logger.log("seeking outside of buffer but within currently loaded fragment range"))):"ENDED"===i&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=Ee),n&&(this.lastCurrentTime=o),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=o),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=Ae,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},n}(be);function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be,Me=function(r){var e;function t(e,t){var n;return(n=r.call(this,e,A.default.MEDIA_ATTACHED,A.default.MEDIA_DETACHING,A.default.MANIFEST_LOADING,A.default.MANIFEST_PARSED,A.default.LEVEL_LOADED,A.default.LEVELS_UPDATED,A.default.KEY_LOADED,A.default.FRAG_LOADED,A.default.FRAG_LOAD_EMERGENCY_ABORTED,A.default.FRAG_PARSING_INIT_SEGMENT,A.default.FRAG_PARSING_DATA,A.default.FRAG_PARSED,A.default.ERROR,A.default.AUDIO_TRACK_SWITCHING,A.default.AUDIO_TRACK_SWITCHED,A.default.BUFFER_CREATED,A.default.BUFFER_APPENDED,A.default.BUFFER_FLUSHED)||this).fragmentTracker=t,n.config=e.config,n.audioCodecSwap=!1,n._state=Ae,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n.audioOnly=!1,n.bitrateTest=!1,n}n=r,(e=t).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=t.prototype;return n.startLoad=function(e){var t,n,r;this.levels?(t=this.lastCurrentTime,n=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(r=n.startLevel)&&(n.config.testBandwidth?this.bitrateTest=!(r=0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1),0<t&&-1===e&&(T.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Ee,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=Ae)},n.stopLoad=function(){this.forceStartLoad=!1,r.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case xe:this.fragLoadError=0;break;case Ee:this._doTickIdle();break;case Ie:var e=this.levels[this.level];e&&e.details&&(this.state=Ee);break;case ke:var t=window.performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(T.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Ee)}this._checkBuffer(),this._checkFragmentChanged()},n._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var r=this.loadedmetadata?n.currentTime:this.nextLoadPosition,i=e.nextLoadLevel,o=this.levels[i];if(o){var a=o.bitrate,a=a?Math.max(8*t.maxBufferSize/a,t.maxBufferLength):t.maxBufferLength;a=Math.min(a,t.maxMaxBufferLength);t=r<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,n=K.bufferInfo(this.mediaBuffer||n,r,t),t=n.len;if(!(a<=t)){T.logger.trace("buffer length of "+t.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;o=o.details;if(!o||o.live&&this.levelLastLoaded!==i)this.state=Ie;else{if(this._streamEnded(n,o)){i={};return this.altAudio&&(i.type="video"),this.hls.trigger(A.default.BUFFER_EOS,i),void(this.state="ENDED")}this._fetchPayloadOrEos(r,n,o)}}}}},n._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=(this.level,n.fragments),o=i.length;if(0!==o){var a,s=i[0].start,l=i[o-1].start+i[o-1].duration,u=t.end;if(n.initSegment&&!n.initSegment.data)a=n.initSegment;else if(n.live){t=this.config.initialLiveManifestSize;if(o<t)return void T.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+t);if(null===(a=this._ensureFragmentAtLivePoint(n,u,s,l,r,i)))return}else u<s&&(a=i[0]);(a=a||this._findFragment(s,r,o,i,u,l,n))&&(a.encrypted?this._loadKey(a,n):this._loadFragment(a,n,e,u))}},n._ensureFragmentAtLivePoint=function(e,t,n,r,i,o){var a,s=this.hls.config,l=this.media,u=1/0;return void 0!==s.liveMaxLatencyDuration?u=s.liveMaxLatencyDuration:Object(k.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(u=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(n-s.maxFragLookUpTolerance,r-u)&&(t=n=this.liveSyncPosition=this.computeLivePosition(n,e),l&&!l.paused&&l.readyState&&l.duration>n&&n>l.currentTime&&(T.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+n.toFixed(3)),l.currentTime=n),this.nextLoadPosition=n),e.PTSKnown&&r<t&&l&&l.readyState?null:(this.startFragRequested&&!e.PTSKnown&&i&&(e.hasProgramDateTime?(T.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),a=ge(o,i.endProgramDateTime,s.maxFragLookUpTolerance)):((s=i.sn+1)>=e.startSN&&s<=e.endSN&&(e=o[s-e.startSN],i.cc===e.cc&&T.logger.log("live playlist, switching playlist, load frag with next SN: "+(a=e).sn)),a||(a=z.search(o,function(e){return i.cc-e.cc}))&&T.logger.log("live playlist, switching playlist, load frag with same CC: "+a.sn))),a)},n._findFragment=function(e,t,n,r,i,o,a){var s,l=this.hls.config;return(s=i<o?me(t,r,i,i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):r[n-1])&&(i=s.sn-a.startSN,o=t&&s.level===t.level,n=r[i-1],r=r[1+i],t&&s.sn===t.sn&&(o&&!s.backtracked?s.sn<a.endSN?(a=t.deltaPTS)&&a>l.maxBufferHole&&t.dropped&&i?(s=n,T.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):"OK"!==this.fragmentTracker.getState(s=r)&&T.logger.log("Re-loading fragment with SN: "+s.sn):s=null:s.backtracked&&(r&&r.backtracked?(T.logger.warn("Already backtracked from fragment "+r.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+r.sn),s=r):(T.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,n?(s=n).backtracked=!0:i&&(s=null))))),s},n._loadKey=function(e,t){T.logger.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=we,this.hls.trigger(A.default.KEY_LOADING,{frag:e})},n._loadFragment=function(e,t,n,r){var i=this.fragmentTracker.getState(e);"initSegment"!==(this.fragCurrent=e).sn&&(this.startFragRequested=!0),Object(k.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||i===H||i===V?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,T.logger.log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(r.toFixed(3))),this.hls.trigger(A.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new re(this.hls,"main")),this.state=Se):"APPENDING"===i&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},n.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,i.MAIN)},n.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},n._checkFragmentChanged=function(){var e,t,n=this.media;n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),K.isBuffered(n,e)?t=this.getBufferedFrag(e):K.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)&&((e=t)!==this.fragPlaying&&(this.hls.trigger(A.default.FRAG_CHANGED,{frag:e}),t=e.level,this.fragPlaying&&this.fragPlaying.level===t||this.hls.trigger(A.default.LEVEL_SWITCHED,{level:t}),this.fragPlaying=e))},n.immediateLevelSwitch=function(){var e;T.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,(e=this.media)?(t=e.paused)||e.pause():t=!0,this.previouslyPaused=t);var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,0<e.currentTime&&K.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},n.nextLevelSwitch=function(){var e,t,n,r=this.media;r&&r.readyState&&((e=this.getBufferedFrag(r.currentTime))&&1<e.startPTS&&this.flushMainBuffer(0,e.startPTS-1),n=r.paused?0:(t=this.hls.nextLoadLevel,n=this.levels[t],(t=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*t)+1:0),!(t=this.getBufferedFrag(r.currentTime+n))||(r=this.followingBufferedFrag(t))&&((n=this.fragCurrent)&&n.loader&&n.loader.abort(),this.fragCurrent=null,r=Math.max(t.endPTS,r.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,r.duration)),this.flushMainBuffer(r,Number.POSITIVE_INFINITY)))},n.flushMainBuffer=function(e,t){this.state=xe;t={startOffset:e,endOffset:t};this.altAudio&&(t.type="video"),this.hls.trigger(A.default.BUFFER_FLUSHING,t)},n.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new ve(e,t,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(T.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:void 0;Object(k.isFiniteNumber)(e)&&T.logger.log("media seeked to "+e.toFixed(3)),this.tick()},n.onManifestLoading=function(){T.logger.log("trigger BUFFER_RESET"),this.hls.trigger(A.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&T.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)},n.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],o=t.totalduration,a=0;T.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live||i.details&&i.details.live?(e=i.details)&&0<t.fragments.length?(ue(e,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,e),t.PTSKnown&&Object(k.isFiniteNumber)(a)?T.logger.log("live playlist sliding:"+a.toFixed(3)):(T.logger.log("live playlist - outdated PTS, unknown sliding"),pe(this.fragPrevious,r,t))):(T.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,pe(this.fragPrevious,r,t)):t.PTSKnown=!1,i.details=t,this.levelLastLoaded=n,this.hls.trigger(A.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(n=t.startTimeOffset,Object(k.isFiniteNumber)(n)?(n<0&&(T.logger.log("negative start time offset "+n+", count from end of last fragment"),n=a+o+n),T.logger.log("start time offset found in playlist, adjust startPosition to "+n),this.startPosition=n):t.live?(this.startPosition=this.computeLivePosition(a,t),T.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===Ie&&(this.state=Ee),this.tick()},n.onKeyLoaded=function(){this.state===we&&(this.state=Ee,this.tick())},n.onFragLoaded=function(e){var t,n,r=this.fragCurrent,i=this.hls,o=this.levels,a=this.media,s=e.frag;this.state===Se&&r&&"main"===s.type&&s.level===r.level&&s.sn===r.sn&&(n=e.stats,o=(t=o[r.level]).details,this.bitrateTest=!1,this.stats=n,T.logger.log("Loaded "+r.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+r.level),s.bitrateTest&&i.nextLoadLevel?(this.state=Ee,this.startFragRequested=!1,n.tparsed=n.tbuffered=window.performance.now(),i.trigger(A.default.FRAG_BUFFERED,{stats:n,frag:r,id:"main"}),this.tick()):"initSegment"===s.sn?(this.state=Ee,n.tparsed=n.tbuffered=window.performance.now(),o.initSegment.data=e.payload,i.trigger(A.default.FRAG_BUFFERED,{stats:n,frag:r,id:"main"}),this.tick()):(T.logger.log("Parsing "+r.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+r.level+", cc "+r.cc),this.state=Ce,this.pendingBuffering=!0,this.appended=!1,s.bitrateTest&&(s.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:s})),n=!(a&&a.seeking)&&(o.PTSKnown||!o.live),s=o.initSegment?o.initSegment.data:[],a=this._getAudioCodec(t),(this.demuxer=this.demuxer||new re(this.hls,"main")).push(e.payload,s,a,t.videoCodec,r,o.totalduration,n))),this.fragLoadError=0},n.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Ce){var r,i,o=e.tracks;for(r in this.audioOnly=o.audio&&!o.video,this.altAudio&&!this.audioOnly&&delete o.audio,(i=o.audio)&&(n=this.levels[this.level].audioCodec,t=navigator.userAgent.toLowerCase(),n&&this.audioCodecSwap&&(T.logger.log("swapping playlist audio codec"),n=-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===t.indexOf("firefox")&&(n="mp4a.40.5"),-1!==t.indexOf("android")&&"audio/mpeg"!==i.container&&T.logger.log("Android: force audio codec to "+(n="mp4a.40.2")),i.levelCodec=n,i.id=e.id),(i=o.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(A.default.BUFFER_CODECS,o),o){i=o[r],T.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;a&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(A.default.BUFFER_APPENDING,{type:r,data:a,parent:"main",content:"initSegment"}))}this.tick()}},n.onFragParsingData=function(t){var n=this,e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===Ce){var i=this.levels[this.level],r=e;if(Object(k.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&r.addElementaryStream(f.AUDIO),!0===t.hasVideo&&r.addElementaryStream(f.VIDEO),T.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)T.logger.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{e=i.details;if(!e||r.sn!==e.startSN)return T.logger.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=Ee,this.fragPrevious=r,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();T.logger.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var r=le(i.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),o=this.hls;o.trigger(A.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:r,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&n.state===Ce&&(n.appended=!0,n.pendingBuffering=!0,o.trigger(A.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},n.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Ce&&(this.stats.tparsed=window.performance.now(),this.state=Re,this._checkAppendedParsed())},n.onAudioTrackSwitching=function(e){var t,n=this.altAudio,r=!!e.url,e=e.id;r||(this.mediaBuffer!==this.media&&(T.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(T.logger.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Ee),t=this.hls,n&&t.trigger(A.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),t.trigger(A.default.AUDIO_TRACK_SWITCHED,{id:e}))},n.onAudioTrackSwitched=function(e){var t=e.id,e=!!this.hls.audioTracks[t].url;!e||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(T.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=e,this.tick()},n.onBufferCreated=function(e){var t,n,r,i=e.tracks,o=!1;for(r in i){var a=i[r];"main"===a.id?(t=a,"video"===(n=r)&&(this.videoBuffer=i[r].buffer)):o=!0}o&&t?(T.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},n.onBufferAppended=function(e){var t;"main"===e.parent&&((t=this.state)!==Ce&&t!==Re||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))},n._checkAppendedParsed=function(){var e,t;this.state!==Re||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer||this.media,T.logger.log("main buffered : "+de(t.buffered)),this.fragPrevious=e,(t=this.stats).tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(A.default.FRAG_BUFFERED,{stats:t,frag:e,id:"main"}),this.state=Ee),(this.loadedmetadata||this.startPosition<=0)&&this.tick())},n.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n,r=!!this.media&&K.isBuffered(this.media,this.media.currentTime)&&K.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:e.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),T.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ke):(T.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Oe));break;case m.ErrorDetails.LEVEL_LOAD_ERROR:case m.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Oe&&(e.fatal?(this.state=Oe,T.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Ie||(this.state=Ee));break;case m.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Ce&&this.state!==Re||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Ee):(T.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},n._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,T.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n._checkBuffer=function(){var e=this.media;e&&0!==e.readyState&&(e=(this.mediaBuffer||e).buffered,!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e))},n.onFragLoadEmergencyAborted=function(){this.state=Ee,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.onBufferFlushed=function(){var e,t=this.mediaBuffer||this.media;t&&(e=this.audioOnly?f.AUDIO:f.VIDEO,this.fragmentTracker.detectEvictedFragments(e,t.buffered)),this.state=Ee,this.fragPrevious=null},n.onLevelsUpdated=function(e){this.levels=e.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n._seekToStartPos=function(){var e,t=this.media,n=t.currentTime,r=this.startPosition;n!==r&&0<=r&&(t.seeking?T.logger.log("could not seek to "+r+", already seeking at "+n):(0<(e=(t.buffered.length?t.buffered.start(0):0)-r)&&e<this.config.maxBufferHole&&(T.logger.log("adjusting start position by "+e+" to match buffer start"),this.startPosition=r+=e),T.logger.log("seek to target start position "+r+" from current time "+n+". ready state "+t.readyState),t.currentTime=r))},n._getAudioCodec=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(T.logger.log("swapping playlist audio codec"),e=e&&(-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},n=[{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,T.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(A.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getBufferedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}],Pe(t.prototype,n),t}(De);function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fe=function(t){var e;function n(e){return(e=t.call(this,e,A.default.MANIFEST_LOADED,A.default.LEVEL_LOADED,A.default.AUDIO_TRACK_SWITCHED,A.default.FRAG_LOADED,A.default.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,Be=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},r.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},r.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},r.stopLoad=function(){this.canload=!1},r.onManifestLoaded=function(e){var t,n=[],r=[],i={},o=null,a=!1,s=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,s=s||!!e.audioCodec,Be&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(o=i[e.bitrate])?o.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&ae(o||e,"audio",t.AUDIO),t.SUBTITLES&&ae(o||e,"text",t.SUBTITLES))}),n=(n=a&&s?n.filter(function(e){return!!e.videoCodec}):n).filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||S(t,"audio"))&&(!e||S(e,"video"))}),e.audioTracks&&(r=e.audioTracks.filter(function(e){return!e.audioCodec||S(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),0<n.length){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var l=0;l<n.length;l++)if(n[l].bitrate===t){this._firstLevel=l,T.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}var u=s&&!a;this.hls.trigger(A.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:a,altAudio:!u&&r.some(function(e){return!!e.url})})}else this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},r.setLevelInternal=function(e){var t,n=this._levels,r=this.hls;0<=e&&e<n.length?(this.clearTimer(),this.currentLevelIndex!==e&&(T.logger.log("switching to level "+e),(t=n[this.currentLevelIndex=e]).level=e,r.trigger(A.default.LEVEL_SWITCHING,t)),(n=(t=n[e]).details)&&!n.live||(n=t.urlId,r.trigger(A.default.LEVEL_LOADING,{url:t.url[n],level:e,id:n}))):r.trigger(A.default.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},r.onError=function(e){if(e.fatal)e.type===m.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case m.ErrorDetails.LEVEL_LOAD_ERROR:case m.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case m.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},r.recoverLevel=function(e,t,n,r){var i=this,o=this.hls.config,a=e.details,s=this._levels[t];if(s.loadError++,s.fragmentError=r,n){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return T.logger.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},o),e.levelRetry=!0,this.levelRetryCount++,T.logger.warn("level controller, "+a+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&(1<(n=s.url.length)&&s.loadError<n?(s.urlId=(s.urlId+1)%n,s.details=void 0,T.logger.warn("level controller, "+a+" for level "+t+": switching to redundant URL-id "+s.urlId)):-1===this.manualLevelIndex?(t=0===t?this._levels.length-1:t-1,T.logger.warn("level controller, "+a+": switch to "+t),this.hls.nextAutoLevel=this.currentLevelIndex=t):r&&(T.logger.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},r.onFragLoaded=function(e){e=e.frag;void 0===e||"main"!==e.type||void 0!==(e=this._levels[e.level])&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)},r.onLevelLoaded=function(e){var t=this,n=e.level,r=e.details;n===this.currentLevelIndex&&((n=this._levels[n]).fragmentError||(n.loadError=0,this.levelRetryCount=0),r.live?(e=fe(n.details,r,e.stats.trequest),T.logger.log("live playlist, reload in "+Math.round(e)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},e)):this.clearTimer())},r.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},r.loadLevel=function(){var e,t,n;T.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload&&"object"==typeof(n=this._levels[this.currentLevelIndex])&&0<n.url.length&&(e=this.currentLevelIndex,t=n.urlId,n=n.url[t],T.logger.log("Attempt loading level index "+e+" with URL-id "+t),this.hls.trigger(A.default.LEVEL_LOADING,{url:n,level:e,id:t}))},r.removeLevel=function(n,r){var e=this.levels.filter(function(e,t){return t!==n||1<e.url.length&&void 0!==r&&(e.url=e.url.filter(function(e,t){return t!==r}),!(e.urlId=0))}).map(function(e,t){var n=e.details;return n&&n.fragments&&n.fragments.forEach(function(e){e.level=t}),e});this._levels=e,this.hls.trigger(A.default.LEVELS_UPDATED,{levels:e})},r=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}],je(n.prototype,r),n}(s),Ne=n("./src/demux/id3.js");function Ue(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Ge(e){if(null!=e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}var He=function(t){var e;function n(e){return(e=t.call(this,e,A.default.MEDIA_ATTACHED,A.default.MEDIA_DETACHING,A.default.FRAG_PARSING_METADATA,A.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.destroy=function(){s.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){Ge(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ue(n,this.media),n}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=Ne.default.getID3Frames(n[i].data);if(o){var a=Math.max(n[i].pts,0),s=i<n.length-1?n[i+1].pts:t.endPTS;(s=s||t.start+t.duration)-a<=0&&(s=a+.25);for(var l=0;l<o.length;l++){var u,c=o[l];Ne.default.isTimeStampFrame(c)||((u=new r(a,s,"")).value=c,this.id3Track.addCue(u))}}}},r.onLiveBackBufferReached=function(e){var e=e.bufferEnd,t=this.id3Track;if(t&&t.cues&&t.cues.length){var n=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var n=0,r=e.length-1;n<=r;){var i=Math.floor((r+n)/2);if(t<e[i].endTime)r=i-1;else{if(!(t>e[i].endTime))return e[i];n=i+1}}return e[n].endTime-t<t-e[r].endTime?e[n]:e[r]}(t.cues,e);if(n)for(;t.cues[0]!==n;)t.removeCue(t.cues[0])}},n}(s),Ve=((at=Ke.prototype).sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},at.getTotalWeight=function(){return this.totalWeight_},at.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},Ke),qe=((Zt=ze.prototype).sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},Zt.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},Zt.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Zt.destroy=function(){},ze);function ze(e,t,n,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ve(t),this.fast_=new Ve(n)}function Ke(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ye=window.performance,Xe=function(n){var e;function t(e){var t;return(t=n.call(this,e,A.default.FRAG_LOADING,A.default.FRAG_LOADED,A.default.FRAG_BUFFERED,A.default.ERROR)||this).lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)),t}r=n,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.destroy=function(){this.clearTimer(),s.prototype.destroy.call(this)},r.onFragLoading=function(e){var t,n,r=e.frag;"main"!==r.type||(this.timer||(this.fragCurrent=r,this.timer=setInterval(this.onCheck,100)),this._bwEstimator)||(e=(n=this.hls).config,r=r.level,r=n.levels[r].details.live?(t=e.abrEwmaFastLive,e.abrEwmaSlowLive):(t=e.abrEwmaFastVoD,e.abrEwmaSlowVoD),this._bwEstimator=new qe(n,r,t,e.abrEwmaDefaultEstimate))},r._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader;if(!r||r.stats&&r.stats.aborted)return T.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=r.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=Ye.now()-i.trequest,a=Math.abs(t.playbackRate);if(o>500*n.duration/a){var s=e.levels,l=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/o),u=s[n.level];if(u){var c=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,u=i.total||Math.max(i.loaded,Math.round(n.duration*c/8)),c=t.currentTime,u=(u-i.loaded)/l,f=(K.bufferInfo(t,c,e.config.maxBufferHole).end-c)/a;if(f<2*n.duration/a&&f<u){for(var d=e.minAutoLevel,h=n.level-1;d<h;h--){var p=s[h].realBitrate?Math.max(s[h].realBitrate,s[h].bitrate):s[h].bitrate;if(n.duration*p/(6.4*l)<f)break}void 0<u&&(T.logger.warn("loading too slow, abort fragment loading and switch to level "+h+":fragLoadedDelay["+h+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+u.toFixed(1)+":"+f.toFixed(1)),e.nextLoadLevel=h,this._bwEstimator.sample(o,i.loaded),r.abort(),this.clearTimer(),e.trigger(A.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:i}))}}}}}},r.onFragLoaded=function(e){var t,n,r=e.frag;"main"===r.type&&Object(k.isFiniteNumber)(r.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(r=((t=this.hls.levels[r.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,n=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:r,duration:n},t.realBitrate=Math.round(8*r/n)),e.frag.bitrateTest&&((n=e.stats).tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)))},r.onFragBuffered=function(e){var t=e.stats,n=e.frag;!0===t.aborted||"main"!==n.type||!Object(k.isFiniteNumber)(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered||(e=t.tparsed-t.trequest,T.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(e,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)},r.onError=function(e){switch(e.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.clearTimer=function(){clearInterval(this.timer),this.timer=null},r._findBestLevel=function(e,t,n,r,i,o,a,s,l){for(var u=i;r<=u;u--){var c=l[u];if(c){var f=c.details,d=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,p=u<=e?a*n:s*n,c=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,f=c*d/p;if(T.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(p)+"/"+c+"/"+d+"/"+o+"/"+f),c<p&&(!f||h&&!this.bitrateTestDelay||f<o))return u}}return-1},r=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this._nextABRAutoLevel;return t=-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,f=(K.bufferInfo(o,l,r.maxBufferHole).end-l)/u,d=this._findBestLevel(a,s,c,i,t,f,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(0<=d)return d;T.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");e=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,o=r.abrBandWidthFactor,l=r.abrBandWidthUpFactor;return 0!=f||(u=this.bitrateTestDelay)&&(e=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-u,T.logger.trace("bitrate test took "+Math.round(1e3*u)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),o=l=1),d=this._findBestLevel(a,s,c,i,t,f+e,o,l,n),Math.max(d,0)}}],We(t.prototype,r),t}(s),$e=Q(),W=function(t){var e;function n(e){var a;return(a=t.call(this,e,A.default.MEDIA_ATTACHING,A.default.MEDIA_DETACHING,A.default.MANIFEST_PARSED,A.default.BUFFER_RESET,A.default.BUFFER_APPENDING,A.default.BUFFER_CODECS,A.default.BUFFER_EOS,A.default.BUFFER_FLUSHING,A.default.LEVEL_PTS_UPDATED,A.default.LEVEL_UPDATED)||this)._msDuration=null,a._levelDuration=null,a._levelTargetDuration=10,a._live=null,a._objectUrl=null,a._needsFlush=!1,a._needsEos=!1,a.config=void 0,a.audioTimestampOffset=void 0,a.bufferCodecEventsExpected=0,a._bufferCodecEventsTotal=0,a.media=null,a.mediaSource=null,a.segments=[],a.parent=void 0,a.appending=!1,a.appended=0,a.appendError=0,a.flushBufferCounter=0,a.tracks={},a.pendingTracks={},a.sourceBuffer={},a.flushRange=[],a._onMediaSourceOpen=function(){T.logger.log("media source opened"),a.hls.trigger(A.default.MEDIA_ATTACHED,{media:a.media});var e=a.mediaSource;e&&e.removeEventListener("sourceopen",a._onMediaSourceOpen),a.checkPendingTracks()},a._onMediaSourceClose=function(){T.logger.log("media source closed")},a._onMediaSourceEnded=function(){T.logger.log("media source ended")},a._onSBUpdateEnd=function(){a.audioTimestampOffset&&a.sourceBuffer.audio&&(t=a.sourceBuffer.audio,T.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+a.audioTimestampOffset),t.timestampOffset=a.audioTimestampOffset,delete a.audioTimestampOffset),a._needsFlush&&a.doFlush(),a._needsEos&&a.checkEos(),a.appending=!1;var e,n=a.parent,t=a.segments.reduce(function(e,t){return t.parent===n?e+1:e},0),r={},i=a.sourceBuffer;for(e in i){var o=i[e];if(!o)throw Error("handling source buffer update end error: source buffer for "+e+" uninitilized and unable to update buffered TimeRanges.");r[e]=o.buffered}a.hls.trigger(A.default.BUFFER_APPENDED,{parent:n,pending:t,timeRanges:r}),a._needsFlush||a.doAppending(),a.updateMediaElementDuration(),0===t&&a.flushLiveBackBuffer()},a._onSBUpdateError=function(e){T.logger.error("sourceBuffer error:",e),a.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},a.config=e.config,a}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.destroy=function(){s.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){t=this.sourceBuffer.audio;if(!t)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(.1<Math.abs(t.timestampOffset-e.start)){n=t.updating;try{t.abort()}catch(e){T.logger.warn("can not abort audio buffer: "+e)}n?this.audioTimestampOffset=e.start:(T.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.start),t.timestampOffset=e.start)}}},r.onManifestParsed=function(e){var t=2;(!e.audio||e.video)&&e.altAudio||(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,T.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;t&&$e&&((e=this.mediaSource=new $e).addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(e),this._objectUrl=t.src)},r.onMediaDetaching=function(){T.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){T.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):T.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(A.default.MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e,t=this.sourceBuffer;for(e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(t){var n=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){n.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t,n=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!n[t]){var i=e[t];if(!i)throw Error("source buffer exists for track "+t+", however track does not");var o=i.levelCodec||i.codec,a=i.container+";codecs="+o;T.logger.log("creating sourceBuffer("+a+")");try{var s=n[t]=r.addSourceBuffer(a);s.addEventListener("updateend",this._onSBUpdateEnd),s.addEventListener("error",this._onSBUpdateError),this.tracks[t]={buffer:s,codec:o,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(e){T.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:a})}}this.hls.trigger(A.default.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer){var n;e.type&&e.type!==t||(n=this.sourceBuffer[t])&&!n.ended&&(n.ended=!0,T.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){n=e[n];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}T.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){T.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),o=r.length-1;0<=o;o--){var a,s=r[o],l=n[s];!l||0<(a=l.buffered).length&&i>a.start(0)&&this.removeBufferRange(s,l,0,i)&&this.hls.trigger(A.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}else T.logger.error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){e=e.details;0<e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){n=this.sourceBuffer[n];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(T.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(k.isFiniteNumber)(e))&&(T.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(t+=i.buffered.length)}}catch(e){T.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(A.default.BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,n=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void T.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=n.shift();if(i)try{var o=r[i.type];o?o.updating?n.unshift(i):(o.ended=!1,this.parent=i.parent,o.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this._onSBUpdateEnd()}catch(r){T.logger.error("error while trying to append buffer:"+r.message),n.unshift(i);i={type:m.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===r.code?(this.segments=[],i.details=m.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,i.details=m.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(T.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],i.fatal=!0)),t.trigger(A.default.ERROR,i)}}}},r.flushBuffer=function(e,t,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),T.logger.log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return T.logger.warn("abort flushing too many retries"),!0;r=r[n];if(r){if(r.ended=!1,r.updating)return T.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,r,e,t))return this.flushBufferCounter++,!1}return T.logger.log("buffer flushed"),!0},r.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),s=Math.max(o,n),l=Math.min(a,r);if(.5<Math.min(l,a)-s){var u="null";return this.media&&(u=this.media.currentTime.toString()),T.logger.log("sb remove "+e+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+u),t.remove(s,l),!0}}}catch(e){T.logger.warn("removeBufferRange failed",e)}return!1},n}(s);function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ze=function(t){function i(e){return(e=t.call(this,e,A.default.FPS_DROP_LEVEL_CAPPING,A.default.MEDIA_ATTACHING,A.default.MANIFEST_PARSED,A.default.LEVELS_UPDATED,A.default.BUFFER_CODECS,A.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e.clientRect=null,e}e=t,(n=i).prototype=Object.create(e.prototype),(n.prototype.constructor=n).__proto__=e;var e,n=i.prototype;return n.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},n.onFpsDropLevelCapping=function(e){i.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},n.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},n.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onLevelsUpdated=function(e){this.levels=e.levels},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)},n.getMaxLevel=function(n){var r=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return i.isLevelAllowed(t,r.restrictedLevels)&&t<=n});return this.clientRect=null,i.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var e,t=this.media,n={width:0,height:0};return t&&(e=t.getBoundingClientRect(),n.width=e.width,n.height=e.height,n.width||n.height||(n.width=e.right-e.left||t.width||0,n.height=e.bottom-e.top||t.height||0)),this.clientRect=n},i.isLevelAllowed=function(e,t){return-1===(t=void 0===t?[]:t).indexOf(e)},i.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var r,i=e.length-1,o=0;o<e.length;o+=1){var a=e[o];if((a.width>=t||a.height>=n)&&(!(r=e[o+1])||a.width!==r.width||a.height!==r.height)){i=o;break}}return i},e=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],Qe((n=i).prototype,[{key:"mediaWidth",get:function(){return this.getDimensions().width*i.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*i.contentScaleFactor}}]),Qe(n,e),i}(s),Je=window.performance,t=function(t){var e;function n(e){return t.call(this,e,A.default.MEDIA_ATTACHING)||this}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},r.checkFPS=function(e,t,n){var r,i,o,a,s=Je.now();t&&(this.lastTime&&(o=s-this.lastTime,r=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,i=1e3*r/o,(o=this.hls).trigger(A.default.FPS_DROP,{currentDropped:r,currentDecoded:a,totalDroppedFrames:n}),0<i&&r>o.config.fpsDroppedMonitoringThreshold*a&&(a=o.currentLevel,T.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+a),0<a&&(-1===o.autoLevelCapping||o.autoLevelCapping>=a)&&(o.trigger(A.default.FPS_DROP_LEVEL_CAPPING,{level:--a,droppedLevel:o.currentLevel}),o.autoLevelCapping=a,o.streamController.nextLevelSwitch()))),this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=t)},r.checkFPSInterval=function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},n}(s),et=((J=tt.prototype).destroy=function(){this.abort(),this.loader=null},J.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},J.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},J.loadInternal=function(){var e=this.context,t=this.loader=new window.XMLHttpRequest,n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(n){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},J.readystatechange=function(e){var t,n=e.currentTarget,r=n.readyState,i=this.stats,o=this.context,a=this.config;!i.aborted&&2<=r&&(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===r?200<=(e=n.status)&&e<300?(i.tload=Math.max(i.tfirst,window.performance.now()),r="arraybuffer"===o.responseType?(t=n.response).byteLength:(t=n.responseText).length,i.loaded=i.total=r,t={url:n.responseURL,data:t},this.callbacks.onSuccess(t,i,o,n)):i.retry>=a.maxRetry||400<=e&&e<499?(T.logger.error(e+" while loading "+o.url),this.callbacks.onError({code:e,text:n.statusText},o,n)):(T.logger.warn(e+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout))},J.loadtimeout=function(){T.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},J.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);e=this.callbacks.onProgress;e&&e(n,this.context,null,t)},tt);function tt(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rt=function(t){var e;function n(e){return(e=t.call(this,e,A.default.MANIFEST_LOADING,A.default.MANIFEST_PARSED,A.default.AUDIO_TRACK_LOADED,A.default.AUDIO_TRACK_SWITCHED,A.default.LEVEL_LOADED,A.default.ERROR)||this)._trackId=-1,e._selectDefaultTrack=!0,e.tracks=[],e.trackIdBlacklist=Object.create(null),e.audioGroupId=null,e}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},r.onManifestParsed=function(e){e=this.tracks=e.audioTracks||[];this.hls.trigger(A.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},r.onAudioTrackLoaded=function(e){var t;e.id>=this.tracks.length?T.logger.warn("Invalid audio track id:",e.id):(T.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()&&(t=1e3*e.details.targetduration,this.setInterval(t)),!e.details.live&&this.hasInterval()&&this.clearInterval())},r.onAudioTrackSwitched=function(e){e=this.tracks[e.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},r.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},r.onError=function(e){e.type===m.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(T.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},r._setAudioTrack=function(e){var t,n,r;this._trackId===e&&this.tracks[this._trackId].details?T.logger.debug("Same id as current audio-track passed, and track details available -> no-op"):e<0||e>=this.tracks.length?T.logger.warn("Invalid id passed to audio-track controller"):(t=this.tracks[e],T.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e,n=t.url,r=t.type,e=t.id,this.hls.trigger(A.default.AUDIO_TRACK_SWITCHING,{id:e,type:r,url:n}),this._loadTrackDetailsIfNeeded(t))},r.doTick=function(){this._updateTrack(this._trackId)},r._selectAudioGroup=function(e){e=this.hls.levels[e];e&&e.audioGroupIds&&(e=e.audioGroupIds[e.urlId],this.audioGroupId!==e&&(this.audioGroupId=e,this._selectInitialAudioTrack()))},r._selectInitialAudioTrack=function(){var e,t,n,r,i=this,o=this.tracks;o.length&&(e=this.tracks[this._trackId],t=null,e&&(t=e.name),this._selectDefaultTrack&&((r=o.filter(function(e){return e.default})).length?o=r:T.logger.warn("No default audio tracks defined")),n=!1,(r=function(){o.forEach(function(e){n||i.audioGroupId&&e.groupId!==i.audioGroupId||t&&t!==e.name||(i._setAudioTrack(e.id),n=!0)})})(),n||(t=null,r()),n||(T.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0})))},r._needsTrackLoading=function(e){var t=e.details,e=e.url;return!(t&&!t.live||!e)},r._loadTrackDetailsIfNeeded=function(e){var t;this._needsTrackLoading(e)&&(t=e.url,e=e.id,T.logger.log("loading audio-track playlist for id: "+e),this.hls.trigger(A.default.AUDIO_TRACK_LOADING,{url:t,id:e}))},r._updateTrack=function(e){e<0||e>=this.tracks.length||(this.clearInterval(),this._trackId=e,T.logger.log("trying to update audio-track "+e),e=this.tracks[e],this._loadTrackDetailsIfNeeded(e))},r._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,t=t.groupId;T.logger.warn("Loading failed on audio track id: "+e+", group-id: "+t+', name/language: "'+n+'" / "'+r+'"');for(var i=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){i=o;break}i!==e?(T.logger.log("Attempting audio-track fallback id:",i,"group-id:",this.tracks[i].groupId),this._setAudioTrack(i)):T.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},nt(n.prototype,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),n}(be);function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ot=window.performance,at=function(r){var e;function t(e,t){var n;return(n=r.call(this,e,A.default.MEDIA_ATTACHED,A.default.MEDIA_DETACHING,A.default.AUDIO_TRACKS_UPDATED,A.default.AUDIO_TRACK_SWITCHING,A.default.AUDIO_TRACK_LOADED,A.default.KEY_LOADED,A.default.FRAG_LOADED,A.default.FRAG_PARSING_INIT_SEGMENT,A.default.FRAG_PARSING_DATA,A.default.FRAG_PARSED,A.default.ERROR,A.default.BUFFER_RESET,A.default.BUFFER_CREATED,A.default.BUFFER_APPENDED,A.default.BUFFER_FLUSHED,A.default.INIT_PTS_FOUND)||this).fragmentTracker=t,n.config=e.config,n.audioCodecSwap=!1,n._state=Ae,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n.waitingVideoCC=null,n}n=r,(e=t).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=t.prototype;return n.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,e=e.initPTS;"main"===t&&(this.initPTS[n]=e,this.videoTrackCC=n,T.logger.log("InitPTS for cc: "+n+" found from main: "+e),this.state===Le&&this.tick())},n.startLoad=function(e){var t;this.tracks?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(T.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Ee):(this.lastCurrentTime=this.startPosition||e,this.state="STARTING"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.startPosition=e,this.state=Ae)},n.doTick=function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case Oe:case"PAUSED":case xe:break;case"STARTING":this.state=Te,this.loadedmetadata=!1;break;case Ee:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var a=this.mediaBuffer||this.media,s=this.videoBuffer||this.media,l=e<i.maxBufferHole?Math.max(2,i.maxBufferHole):i.maxBufferHole,u=K.bufferInfo(a,e,l),c=K.bufferInfo(s,e,l),f=u.len,d=u.end,h=this.fragPrevious,p=Math.min(i.maxBufferLength,i.maxMaxBufferLength),s=Math.max(p,c.len),l=this.audioSwitch,p=this.trackId;if((f<s||l)&&p<o.length){if(void 0===(t=o[p].details)){this.state=Te;break}if(!l&&this._streamEnded(u,t))return this.hls.trigger(A.default.BUFFER_EOS,{type:"audio"}),void(this.state="ENDED");var g,c=t.fragments,f=c.length,s=c[0].start,o=c[f-1].start+c[f-1].duration;if(l)if(t.live&&!t.PTSKnown)T.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=e,t.PTSKnown&&e<s){if(!(u.end>s||u.nextStart))return;T.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=s+.05}if(t.initSegment&&!t.initSegment.data)g=t.initSegment;else if(d<=s){if(g=c[0],null!==this.videoTrackCC&&g.cc!==this.videoTrackCC&&(n=this.videoTrackCC,g=z.search(c,function(e){return e.cc<n?1:e.cc>n?-1:0})),t.live&&g.loadIdx&&g.loadIdx===this.fragLoadIdx){var m=u.nextStart||s;return T.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(m+.05)),void(this.media.currentTime=m+.05)}}else{var y=i.maxFragLookUpTolerance,m=h?c[h.sn-c[0].sn+1]:void 0,f=d<o?(o-y<d&&(y=0),m&&!ye(d,y,m)?m:z.search(c,function(e){return ye(d,y,e)})):c[f-1];f&&(s=(g=f).start,h&&g.level===h.level&&g.sn===h.sn&&(g.sn<t.endSN?(g=c[g.sn+1-t.startSN],"OK"!==this.fragmentTracker.getState(g)&&T.logger.log("SN just loaded, load next one: "+g.sn)):g=null))}g&&(g.encrypted?(T.logger.log("Loading key for "+g.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+p),this.state=we,r.trigger(A.default.KEY_LOADING,{frag:g})):(this.fragCurrent=g,!l&&this.fragmentTracker.getState(g)!==H||(T.logger.log("Loading "+g.sn+", cc: "+g.cc+" of ["+t.startSN+" ,"+t.endSN+"],track "+p+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+d.toFixed(3)),"initSegment"!==g.sn&&(this.startFragRequested=!0),Object(k.isFiniteNumber)(g.sn)&&(this.nextLoadPosition=g.start+g.duration),r.trigger(A.default.FRAG_LOADING,{frag:g}),this.state=Se)))}break;case Te:(g=this.tracks[this.trackId])&&g.details&&(this.state=Ee);break;case ke:var v=ot.now(),_=this.retryDate,b=(a=this.media)&&a.seeking;(!_||_<=v||b)&&(T.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Ee);break;case Le:_=this.waitingFragment;_?(v=_.frag.cc,void 0!==this.initPTS[v]?(this.waitingFragment=null,this.state=Se,this.onFragLoaded(_)):this.videoTrackCC!==this.waitingVideoCC?(T.logger.log("Waiting fragment cc ("+v+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):ye((b=K.bufferInfo(this.mediaBuffer,this.media.currentTime,i.maxBufferHole)).end,i.maxFragLookUpTolerance,_.frag)<0&&(T.logger.log("Waiting fragment cc ("+v+") @ "+_.frag.start+" cancelled because another fragment at "+b.end+" is needed"),this.clearWaitingFragment())):this.state=Ee}},n.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=Ee)},n.onMediaAttached=function(e){e=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);e=this.config;this.tracks&&e.autoStartLoad&&this.startLoad(e.startPosition)},n.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(T.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onAudioTracksUpdated=function(e){T.logger.log("audio tracks updated"),this.tracks=e.audioTracks},n.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state="PAUSED",t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=Ee),this.tick()},n.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=r.details,o=t.totalduration,e=0;T.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live||i&&i.live?i&&0<t.fragments.length?(ue(i,t),e=t.fragments[0].start,t.PTSKnown?T.logger.log("live audio playlist sliding:"+e.toFixed(3)):T.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,T.logger.log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,r.details=t,this.startFragRequested||(-1===this.startPosition&&(r=t.startTimeOffset,Object(k.isFiniteNumber)(r)?(T.logger.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r):t.live?(this.startPosition=this.computeLivePosition(e,t),T.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0),this.nextLoadPosition=this.startPosition),this.state===Te&&(this.state=Ee),this.tick()},n.onKeyLoaded=function(){this.state===we&&(this.state=Ee,this.tick())},n.onFragLoaded=function(e){var t,n,r,i,o,a,s,l=this.fragCurrent,u=e.frag;this.state===Se&&l&&"audio"===u.type&&u.level===l.level&&u.sn===l.sn&&(n=(t=(s=this.tracks[this.trackId]).details).totalduration,r=l.level,i=l.sn,o=l.cc,a=this.config.defaultAudioCodec||s.audioCodec||"mp4a.40.2",u=this.stats=e.stats,"initSegment"===i?(this.state=Ee,u.tparsed=u.tbuffered=ot.now(),t.initSegment.data=e.payload,this.hls.trigger(A.default.FRAG_BUFFERED,{stats:u,frag:l,id:"audio"}),this.tick()):(this.state=Ce,this.appended=!1,this.demuxer||(this.demuxer=new re(this.hls,"audio")),s=this.initPTS[o],u=t.initSegment?t.initSegment.data:[],void 0!==s?(this.pendingBuffering=!0,T.logger.log("Demuxing "+i+" of ["+t.startSN+" ,"+t.endSN+"],track "+r),this.demuxer.push(e.payload,u,a,null,l,n,!1,s)):(T.logger.log("Unknown video PTS for cc "+o+", waiting for video PTS before demuxing audio frag "+i+" of ["+t.startSN+" ,"+t.endSN+"],track "+r),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=Le))),this.fragLoadError=0},n.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Ce&&((n=e.tracks).video&&delete n.video,(t=n.audio)&&(t.levelCodec=t.codec,t.id=e.id,this.hls.trigger(A.default.BUFFER_CODECS,n),T.logger.log("audio track:audio,container:"+t.container+",codecs[level/parsed]=["+t.levelCodec+"/"+t.codec+"]"),(t=t.initSegment)&&(t={type:"audio",data:t,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[t]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(A.default.BUFFER_APPENDING,t))),this.tick()))},n.onFragParsingData=function(t){var n=this,e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&"audio"===t.type&&r.sn===e.sn&&r.level===e.level&&this.state===Ce){var i=this.trackId,o=this.tracks[i],r=this.hls;Object(k.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),e.addElementaryStream(f.AUDIO),T.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),le(o.details,e,t.startPTS,t.endPTS);o=this.media,e=!1;this.audioSwitch&&(o&&o.readyState?(o=o.currentTime,T.logger.log("switching audio track : currentTime:"+o),o>=t.startPTS&&(T.logger.log("switching audio track : flushing all audio"),this.state=xe,r.trigger(A.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.audioSwitch=!(e=!0),r.trigger(A.default.AUDIO_TRACK_SWITCHED,{id:i}))):(this.audioSwitch=!1,r.trigger(A.default.AUDIO_TRACK_SWITCHED,{id:i})));var a=this.pendingData;if(!a)return T.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void r.trigger(A.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&a.push({type:t.type,data:e,parent:"audio",content:"data"})}),!e&&a.length&&(a.forEach(function(e){n.state===Ce&&(n.pendingBuffering=!0,n.hls.trigger(A.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},n.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Ce&&(this.stats.tparsed=ot.now(),this.state=Re,this._checkAppendedParsed())},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},n.onBufferAppended=function(e){var t;"audio"===e.parent&&((t=this.state)!==Ce&&t!==Re||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))},n._checkAppendedParsed=function(){var e,t,n;this.state!==Re||this.appended&&this.pendingBuffering||(n=this.fragCurrent,e=this.stats,t=this.hls,n&&(this.fragPrevious=n,e.tbuffered=ot.now(),t.trigger(A.default.FRAG_BUFFERED,{stats:e,frag:n,id:"audio"}),(n=this.mediaBuffer||this.media)&&T.logger.log("audio buffered : "+de(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,t.trigger(A.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Ee),this.tick())},n.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:var n,r,i=e.frag;if(i&&"audio"!==i.type)break;e.fatal||((i=this.fragLoadError)?i++:i=1,i<=(n=this.config).fragLoadingMaxRetry?(this.fragLoadError=i,r=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout),T.logger.warn("AudioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=ot.now()+r,this.state=ke):(T.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Oe));break;case m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Oe&&(this.state=e.fatal?Oe:Ee,T.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case m.ErrorDetails.BUFFER_FULL_ERROR:"audio"!==e.parent||this.state!==Ce&&this.state!==Re||(n=this.mediaBuffer,r=this.media.currentTime,n&&K.isBuffered(n,r)&&K.isBuffered(n,r+.5)?((r=this.config).maxMaxBufferLength>=r.maxBufferLength&&(r.maxMaxBufferLength/=2,T.logger.warn("AudioStreamController: reduce max buffer length to "+r.maxMaxBufferLength+"s")),this.state=Ee):(T.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=xe,this.hls.trigger(A.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})))}},n.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(T.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(A.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Re):(this.state=Ee,this.fragPrevious=null,this.tick())},it(t.prototype,[{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,T.logger.log("audio stream:"+t+"->"+e))},get:function(){return this._state}}]),t}(De),st=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var _={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function b(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function A(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)e[n]=r[n]}return e}function e(e,t,n){var r=this,i={enumerable:!0};r.hasBeenReset=!1;var o="",a=!1,s=e,l=t,u=n,c=null,f="",d=!0,h="auto",p="start",g=50,m="middle",y=50,v="middle";Object.defineProperty(r,"id",A({},i,{get:function(){return o},set:function(e){o=""+e}})),Object.defineProperty(r,"pauseOnExit",A({},i,{get:function(){return a},set:function(e){a=!!e}})),Object.defineProperty(r,"startTime",A({},i,{get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",A({},i,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",A({},i,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",A({},i,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",A({},i,{get:function(){return f},set:function(e){e="string"==typeof(e=e)&&!!_[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",A({},i,{get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",A({},i,{get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",A({},i,{get:function(){return p},set:function(e){e=b(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",A({},i,{get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",A({},i,{get:function(){return m},set:function(e){e=b(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",A({},i,{get:function(){return y},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",A({},i,{get:function(){return v},set:function(e){e=b(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),r.displayState=void 0}return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}(),lt=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function ut(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new lt,this.regionList=[]}function ct(){this.values=Object.create(null)}function ft(e,t,n,r){var i,o,a=r?e.split(r):[e];for(i in a)"string"!=typeof a[i]||2===(o=a[i].split(n)).length&&t(o[0],o[1])}ct.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var dt=new st(0,0,0),ht="middle"===dt.align?"middle":"center";function pt(n,e,a){var r=n;function t(){var e,e=(e=n.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null;function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}if(null===e)throw new Error("Malformed timestamp: "+r);return n=n.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){n=n.replace(/^\s+/,"")}if(i(),e.startTime=t(),i(),"--\x3e"!==n.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);n=n.substr(3),i(),e.endTime=t(),i(),function(e,t){var o=new ct;ft(e,function(e,t){switch(e){case"region":for(var n=a.length-1;0<=n;n--)if(a[n].id===t){o.set(e,a[n].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),i=r[0];o.integer(e,i),o.percent(e,i)&&o.set("snapToLines",!1),o.alt(e,i,["auto"]),2===r.length&&o.alt("lineAlign",r[1],["start",ht,"end"]);break;case"position":r=t.split(","),o.percent(e,r[0]),2===r.length&&o.alt("positionAlign",r[1],["start",ht,"end","line-left","line-right","auto"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start",ht,"end","left","right"])}},/:/,/\s/),t.region=o.get("region",null),t.vertical=o.get("vertical","");e=o.get("line","auto");"auto"===e&&-1===dt.line&&(e=-1),t.line=e,t.lineAlign=o.get("lineAlign","start"),t.snapToLines=o.get("snapToLines",!0),t.size=o.get("size",100),t.align=o.get("align",ht);e=o.get("position","auto");"auto"===e&&50===dt.position&&(e="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=e}(n,e)}function gt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}ut.prototype={parse:function(e){var t,r=this;function n(){for(var e=0,t=gt(t=r.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,r.buffer=t.substr(e),n}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var i=(t=n()).match(/^(茂禄驴)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var o=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:t=n(),r.state){case"HEADER":/:/.test(t)?ft(t,function(e,t){},/:/):t||(r.state="ID");continue;case"NOTE":t||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){r.state="NOTE";break}if(!t)continue;if(r.cue=new st(0,0,""),r.state="CUE",-1===t.indexOf("--\x3e")){r.cue.id=t;continue}case"CUE":try{pt(t,r.cue,r.regionList)}catch(e){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var a=-1!==t.indexOf("--\x3e");if(!t||a&&(o=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=t;continue;case"BADCUE":t||(r.state="ID");continue}}}catch(e){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var mt=ut;function yt(e,t,n,r){for(var i,o,a,s,l,u=[],c=window.VTTCue||TextTrackCue,f=0;f<r.rows.length;f++)if(a=!0,s=0,l="",!(i=r.rows[f]).isEmpty()){for(var d=0;d<i.chars.length;d++)i.chars[d].uchar.match(/\s/)&&a?s++:(l+=i.chars[d].uchar,a=!1);(i.cueStartTime=t)===n&&(n+=1e-4),o=new c(t,n,gt(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=f+1:o.line=7<f?f-2:f+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100)),u.push(o),e&&e.addCue(o)}return u}function vt(e){var t=e;return bt.hasOwnProperty(e)&&(t=bt[e]),String.fromCharCode(t)}var _t,bt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},At={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Et={17:2,18:4,21:6,22:8,23:10,19:13,20:15},wt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},St={25:2,26:4,29:6,30:8,31:10,27:13,28:15},kt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(Zt=_t=_t||{})[Zt.ERROR=0]="ERROR",Zt[Zt.TEXT=1]="TEXT",Zt[Zt.WARNING=2]="WARNING",Zt[Zt.INFO=2]="INFO",Zt[Zt.DEBUG=3]="DEBUG",Zt[Zt.DATA=3]="DATA";function Tt(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}var Ct=(Ft.prototype.log=function(e,t){this.verboseLevel>=e&&T.logger.log(this.time+" ["+e+"] "+t)},Ft),Rt=((J=jt.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},J.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},J.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},J.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},J.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},J.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},jt),xt=((be=Mt.prototype).reset=function(){this.uchar=" ",this.penState.reset()},be.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},be.setPenState=function(e){this.penState.copy(e)},be.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},be.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},be.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},Mt),Ot=((Zt=Bt.prototype).equals=function(e){for(var t=!0,n=0;n<100;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},Zt.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},Zt.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},Zt.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(_t.DEBUG,"Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(this.logger.log(_t.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},Zt.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},Zt.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},Zt.insertChar=function(e){144<=e&&this.backSpace();var t=vt(e);100<=this.pos?this.logger.log(_t.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},Zt.clearFromPos=function(e){for(var t=e;t<100;t++)this.chars[t].reset()},Zt.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},Zt.clearToEndOfRow=function(){this.clearFromPos(this.pos)},Zt.getTextString=function(){for(var e=[],t=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},Zt.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},Bt),Lt=((J=Pt.prototype).reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},J.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},J.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},J.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},J.backSpace=function(){this.rows[this.currRow].backSpace()},J.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},J.insertChar=function(e){this.rows[this.currRow].insertChar(e)},J.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},J.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},J.setCursor=function(e){this.logger.log(_t.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},J.setPAC=function(e){this.logger.log(_t.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[r].cueStartTime,a=this.logger.time;if(o&&null!==a&&o<a)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(i.rows[r+s])}}this.currRow=t;o=this.rows[this.currRow];null!==e.indent&&(a=e.indent,a=Math.max(a-1,0),o.setCursor(e.indent),e.color=o.chars[a].penState.foreground);e={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(e)},J.setBkgData=function(e){this.logger.log(_t.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},J.setRollUpRows=function(e){this.nrRollUpRows=e},J.rollUp=function(){var e;null!==this.nrRollUpRows?(this.logger.log(_t.TEXT,this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(_t.INFO,"Rolling up")):this.logger.log(_t.DEBUG,"roll_up but nrRollUpRows not set yet")},J.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=0;r<15;r++){var i=this.rows[r].getTextString();i&&(e?t.push("Row "+(r+1)+": '"+i+"'"):t.push(i.trim()))}return n=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},J.getTextAndFormat=function(){return this.rows},Pt),It=((be=Dt.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},be.getHandler=function(){return this.outputFilter},be.setHandler=function(e){this.outputFilter=e},be.setPAC=function(e){this.writeScreen.setPAC(e)},be.setBkgData=function(e){this.writeScreen.setBkgData(e)},be.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(_t.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},be.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(_t.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(_t.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},be.ccRCL=function(){this.logger.log(_t.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},be.ccBS=function(){this.logger.log(_t.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},be.ccAOF=function(){},be.ccAON=function(){},be.ccDER=function(){this.logger.log(_t.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},be.ccRU=function(e){this.logger.log(_t.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},be.ccFON=function(){this.logger.log(_t.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},be.ccRDC=function(){this.logger.log(_t.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},be.ccTR=function(){this.logger.log(_t.INFO,"TR"),this.setMode("MODE_TEXT")},be.ccRTD=function(){this.logger.log(_t.INFO,"RTD"),this.setMode("MODE_TEXT")},be.ccEDM=function(){this.logger.log(_t.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},be.ccCR=function(){this.logger.log(_t.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},be.ccENM=function(){this.logger.log(_t.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},be.ccEOC=function(){var e;this.logger.log(_t.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(_t.TEXT,"DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate(!0)},be.ccTO=function(e){this.logger.log(_t.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},be.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(_t.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},be.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},be.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},Dt);function Dt(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Lt(n),this.nonDisplayedMemory=new Lt(n),this.lastOutputScreen=new Lt(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}function Pt(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new Ot(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}function Bt(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new xt);this.logger=e,this.pos=0,this.currPenState=new Rt}function Mt(e,t,n,r,i,o){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Rt(t,n,r,i,o)}function jt(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}function Ft(){this.time=null,this.verboseLevel=_t.ERROR}function Nt(e,t,n){n.a=e,n.b=t}function Ut(e,t,n){return n.a===e&&n.b===t}function Gt(e,t,n){return e.substr(n||0,t.length)===t}function Ht(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}var Vt=((Zt=Wt.prototype).getHandler=function(e){return this.channels[e].getHandler()},Zt.setHandler=function(e,t){this.channels[e].setHandler(t)},Zt.addData=function(e,t){var n,r=!1;this.logger.time=e;for(var i=0;i<t.length;i+=2){var o,a=127&t[i],s=127&t[i+1];0==a&&0==s||(this.logger.log(_t.DATA,"["+Tt([t[i],t[i+1]])+"] -> ("+Tt([a,s])+")"),!(n=(n=(n=!(n=this.parseCmd(a,s))?this.parseMidrow(a,s):n)||this.parsePAC(a,s))||this.parseBackgroundAttributes(a,s))&&(r=this.parseChars(a,s))&&((o=this.currentChannel)&&0<o?this.channels[o].insertChars(r):this.logger.log(_t.WARNING,"No channel found yet. TEXT-MODE?")),n||r||this.logger.log(_t.WARNING,"Couldn't parse cleaned data "+Tt([a,s])+" orig: "+Tt([t[i],t[i+1]])))}},Zt.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(Ut(e,t,n))return Nt(null,null,n),this.logger.log(_t.DEBUG,"Repeated command ("+Tt([e,t])+") is dropped"),!0;var r=20===e||21===e||23===e?1:2,i=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),Nt(e,t,n),this.currentChannel=r,!0},Zt.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(_t.ERROR,"Mismatch channel in midrow parsing"),!1;n=this.channels[n];return!!n&&(n.ccMIDROW(t),this.logger.log(_t.DEBUG,"MIDROW ("+Tt([e,t])+")"),!0)}return!1},Zt.parsePAC=function(e,t){var n=this.cmdHistory;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(Ut(e,t,n))return Nt(null,null,n),!0;var r=e<=23?1:2,i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC((64<=t&&t<=95?1==r?At:wt:1==r?Et:St)[e],t)),Nt(e,t,n),this.currentChannel=r,!0)},Zt.interpretPAC=function(e,t){var n=t,e={color:null,italics:!1,indent:null,underline:!1,row:e};return e.underline=1==(1&(n=95<t?t-96:t-64)),n<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((n-16)/2),e},Zt.parseChars=function(e,t){var n,r,i=null,o=null;return 17<=(o=25<=e?(n=2,e-8):(n=1,e))&&o<=19?(r=t,this.logger.log(_t.INFO,"Special char '"+vt(r=17===o?t+80:18===o?t+112:t+144)+"' in channel "+n),i=[r]):32<=e&&e<=127&&(i=0===t?[e]:[e,t]),i&&(r=Tt(i),this.logger.log(_t.DEBUG,"Char codes =  "+r.join(",")),Nt(e,t,this.cmdHistory)),i},Zt.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47))return!1;var r={};return 16===e||24===e?(n=Math.floor((t-32)/2),r.background=kt[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),this.channels[e<=23?1:2].setBkgData(r),Nt(e,t,this.cmdHistory),!0},Zt.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},Zt.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},Wt),qt=((J=Kt.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},J.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},J.reset=function(){this.cueRanges=[]},Kt),zt=function(e,t,r,i,n,o){var a,e=Object(Ne.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",l=0,u=0,c=0,f=[],d=!0,h=!1,p=new mt;p.oncue=function(e){var t=r[i],n=r.ccOffset;t&&t.new&&(void 0!==u?n=r.ccOffset=t.start:function(e,t){var n=e[i],r=e[n.prevCC];if(!r||!r.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,n.new=!1;for(;r&&r.new;)e.ccOffset+=n.start-r.start,n.new=!1,r=e[(n=r).prevCC];e.presentationOffset=t}(r,c)),c&&(n=c-r.presentationOffset),h&&(e.startTime+=n-u,e.endTime+=n-u),e.id=Ht(e.startTime.toString())+Ht(e.endTime.toString())+Ht(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),0<e.endTime&&f.push(e)},p.onparsingerror=function(e){a=e},p.onflush=function(){a&&o?o(a):n(f)},e.forEach(function(e){if(d){if(Gt(e,"X-TIMESTAMP-MAP=")){h=!(d=!1),e.substr(16).split(",").forEach(function(e){Gt(e,"LOCAL:")?s=e.substr(6):Gt(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{t+(9e4*r[i].start||0)<0&&(t+=8589934592),l-=t,u=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(k.isFiniteNumber)(t)&&Object(k.isFiniteNumber)(n)&&Object(k.isFiniteNumber)(r)&&Object(k.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*r)+36e5*i}(s)/1e3,c=l/9e4}catch(e){h=!1,a=e}return}""===e&&(d=!1)}p.parse(e+"\n")}),p.flush()};function Kt(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}function Wt(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new Ct;this.channels=[null,new It(e,t,r),new It(e+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}be=function(o){var e;function t(e){var t,n,r,i;return(t=o.call(this,e,A.default.MEDIA_ATTACHING,A.default.MEDIA_DETACHING,A.default.FRAG_PARSING_USERDATA,A.default.FRAG_DECRYPTED,A.default.MANIFEST_LOADING,A.default.MANIFEST_LOADED,A.default.FRAG_LOADED,A.default.INIT_PTS_FOUND)||this).media=null,t.config=void 0,t.enabled=!0,t.Cues=void 0,t.textTracks=[],t.tracks=[],t.initPTS=[],t.unparsedVttFrags=[],t.captionsTracks={},t.nonNativeCaptionsTracks={},t.captionsProperties=void 0,t.cea608Parser1=void 0,t.cea608Parser2=void 0,t.lastSn=-1,t.prevCC=-1,t.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},t.hls=e,t.config=e.config,t.Cues=e.config.cueHandler,t.captionsProperties={textTrack1:{label:t.config.captionsTextTrack1Label,languageCode:t.config.captionsTextTrack1LanguageCode},textTrack2:{label:t.config.captionsTextTrack2Label,languageCode:t.config.captionsTextTrack2LanguageCode},textTrack3:{label:t.config.captionsTextTrack3Label,languageCode:t.config.captionsTextTrack3LanguageCode},textTrack4:{label:t.config.captionsTextTrack4Label,languageCode:t.config.captionsTextTrack4LanguageCode}},t.config.enableCEA708Captions&&(n=new qt(Yt(t),"textTrack1"),r=new qt(Yt(t),"textTrack2"),i=new qt(Yt(t),"textTrack3"),e=new qt(Yt(t),"textTrack4"),t.cea608Parser1=new Vt(1,n,r),t.cea608Parser2=new Vt(3,i,e)),t}n=o,(e=t).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=t.prototype;return n.addCues=function(e,t,n,r,i){for(var o,a,s=!1,l=i.length;l--;){var u=i[l],c=(o=u[0],a=u[1],c=t,Math.min(a,n)-Math.max(o,c));if(0<=c&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),s=!0,.5<c/(n-t)))return}s||i.push([t,n]),this.config.renderTextTracksNatively?this.Cues.newCue(this.captionsTracks[e],t,n,r):(r=this.Cues.newCue(null,t,n,r),this.hls.trigger(A.default.CUES_PARSED,{type:"captions",cues:r,track:e}))},n.onInitPtsFound=function(e){var t=this,n=e.frag,r=e.id,i=e.initPTS,e=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=i),e.length&&(this.unparsedVttFrags=[],e.forEach(function(e){t.onFragLoaded(e)}))},n.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},n.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},n.createNativeTrack=function(e){var t,n,r,i,o;this.captionsTracks[e]||(o=this.captionsProperties,t=this.captionsTracks,n=this.media,r=(i=o[e]).label,o=i.languageCode,(i=this.getExistingTrack(e))?(t[e]=i,Ge(t[e]),Ue(t[e],n)):(o=this.createTextTrack("captions",r,o))&&(o[e]=!0,t[e]=o))},n.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(A.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},n.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},n.destroy=function(){o.prototype.destroy.call(this)},n.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},n.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Ge(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},n._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Ge(t[n])}},n.onManifestLoaded=function(e){var s,t,l=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT&&(t=e.subtitles||[],t=this.tracks&&t&&this.tracks.length===t.length,this.tracks=e.subtitles||[],this.config.renderTextTracksNatively?(s=this.media?this.media.textTracks:[],this.tracks.forEach(function(e,t){var n,r,i;if(t<s.length){for(var o=null,a=0;a<s.length;a++)if(r=s[a],i=e,r&&r.label===i.name&&!r.textTrack1&&!r.textTrack2){o=s[a];break}o&&(n=o)}n=n||l.createTextTrack("subtitles",e.name,e.lang),e.default?n.mode=l.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",l.textTracks.push(n)})):!t&&this.tracks&&this.tracks.length&&(t=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}),this.hls.trigger(A.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t}))),this.config.enableCEA708Captions&&e.captions&&e.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],(t=l.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e))})},n.onFragLoaded=function(e){var t=e.frag,n=e.payload,r=this.cea608Parser1,i=this.cea608Parser2,o=this.initPTS,a=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var l=t.sn;t.sn!==a+1&&r&&i&&(r.reset(),i.reset()),this.lastSn=l}else if("subtitle"===t.type)if(n.byteLength){if(!Object(k.isFiniteNumber)(o[t.cc]))return s.push(e),void(o.length&&this.hls.trigger(A.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));o=t.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(t,n)}else this.hls.trigger(A.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},n._parseVTTs=function(n,e){var i=this,o=this.hls,t=this.prevCC,a=this.textTracks,r=this.vttCCs;r[n.cc]||(r[n.cc]={start:n.start,prevCC:t,new:!0},this.prevCC=n.cc),zt(e,this.initPTS[n.cc],r,n.cc,function(e){if(i.config.renderTextTracksNatively){var r=a[n.level];if("disabled"===r.mode)return void o.trigger(A.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n});e.forEach(function(t){if(!r.cues.getCueById(t.id))try{if(r.addCue(t),!r.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(e){T.logger.debug("Failed occurred on adding cues: "+e);var n=new window.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,r.addCue(n)}})}else{var t=i.tracks[n.level].default?"default":"subtitles"+n.level;o.trigger(A.default.CUES_PARSED,{type:"subtitles",cues:e,track:t})}o.trigger(A.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(e){T.logger.log("Failed to parse VTT cue: "+e),o.trigger(A.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})})},n.onFragDecrypted=function(e){var t=e.frag,n=e.payload;"subtitle"===t.type&&(Object(k.isFiniteNumber)(this.initPTS[t.cc])?this._parseVTTs(t,n):this.unparsedVttFrags.push(e))},n.onFragParsingUserdata=function(e){var t=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&t&&n)for(var r=0;r<e.samples.length;r++){var i=e.samples[r].bytes;i&&(i=this.extractCea608Data(i),t.addData(e.samples[r].pts,i[0]),n.addData(e.samples[r].pts,i[1]))}},n.extractCea608Data=function(e){for(var t=31&e[0],n=2,r=[[],[]],i=0;i<t;i++){var o=e[n++],a=127&e[n++],s=127&e[n++],l=3&o;0==a&&0==s||0!=(4&o)&&(0!=l&&1!=l||(r[l].push(a),r[l].push(s)))}return r},t}(s);function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}var Qt,Zt=function(t){var e;function n(e){return(e=t.call(this,e,A.default.MEDIA_ATTACHED,A.default.MEDIA_DETACHING,A.default.MANIFEST_LOADED,A.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],e.trackId=-1,e.media=null,e.stopped=!0,e.subtitleDisplay=!0,e.queuedDefaultTrack=null,e}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.destroy=function(){s.prototype.destroy.call(this)},r.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(k.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(k.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),$t(this.media.textTracks).forEach(function(e){Ge(e)}),this.subtitleTrack=-1,this.media=null)},r.onManifestLoaded=function(e){var t=this,e=e.subtitles||[];this.tracks=e,this.hls.trigger(A.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:e}),e.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},r.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,r=e.details,i=this.trackId,o=this.tracks,a=o[i];n>=o.length||n!==i||!a||this.stopped?this._clearReloadTimer():(T.logger.log("subtitle track "+n+" loaded"),r.live?(e=fe(a.details,r,e.stats.trequest),T.logger.log("Reloading live subtitle playlist in "+e+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},e)):this._clearReloadTimer())},r.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},r._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,t=t[e];e<0||!t||t.details&&!t.details.live||(T.logger.log("Loading subtitle track "+e),n.trigger(A.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))},r._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;t&&(t=$t(t.textTracks),-1===e?[].slice.call(t).forEach(function(e){e.mode="disabled"}):(r=t[r])&&(r.mode="disabled"),(e=t[e])&&(e.mode=n?"showing":"hidden"))},r._setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;!Object(k.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,T.logger.log("Switching to subtitle track "+e),t.trigger(A.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},r._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=$t(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},Xt(n.prototype,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),n}(s),Jt=n("./src/crypt/decrypter.js"),en=window.performance,J=function(r){var e;function t(e,t){var n;return(n=r.call(this,e,A.default.MEDIA_ATTACHED,A.default.MEDIA_DETACHING,A.default.ERROR,A.default.KEY_LOADED,A.default.FRAG_LOADED,A.default.SUBTITLE_TRACKS_UPDATED,A.default.SUBTITLE_TRACK_SWITCH,A.default.SUBTITLE_TRACK_LOADED,A.default.SUBTITLE_FRAG_PROCESSED,A.default.LEVEL_UPDATED)||this).fragmentTracker=t,n.config=e.config,n.state=Ae,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new Jt.default(e,e.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=r,(e=t).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=t.prototype;return n.startLoad=function(){this.stopLoad(),this.state=Ee;var e=this.tracks[this.currentTrackId];e&&e.details&&(this.setInterval(500),this.tick())},n.onSubtitleFragProcessed=function(e){var t=e.frag,e=e.success;if(this.fragPrevious=t,this.state=Ee,e){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var r,i=t.start,o=0;o<n.length;o++)if(i>=n[o].start&&i<=n[o].end){r=n[o];break}t=t.start+t.duration;r?r.end=t:n.push(r={start:i,end:t})}}},n.onMediaAttached=function(e){e=e.media;(this.media=e).addEventListener("seeking",this._onMediaSeeking),this.state=Ee},n.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]}),this.media=null,this.state=Ae)},n.onError=function(e){e=e.frag;e&&"subtitle"===e.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=Ee)},n.onSubtitleTracksUpdated=function(e){var t=this;T.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},n.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId?(e=this.tracks[this.currentTrackId])&&e.details&&this.setInterval(500):this.clearInterval()},n.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,r=this.currentTrackId,i=this.tracks,e=i[r];t>=i.length||t!==r||!e||(n.live&&function(e,t,n){void 0===n&&(n=0);var r=-1;ce(e,t,function(e,t,n){t.start=e.start,r=n});var i=t.fragments;if(r<0)i.forEach(function(e){e.start+=n});else for(var o=r+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration}(e.details,n,this.lastAVStart),e.details=n,this.setInterval(500))},n.onKeyLoaded=function(){this.state===we&&(this.state=Ee)},n.onFragLoaded=function(e){var n,t=this.fragCurrent,r=e.frag.decryptdata,i=e.frag,o=this.hls;this.state===Se&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&0<e.payload.byteLength&&r&&r.key&&"AES-128"===r.method&&(n=en.now(),this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=en.now();o.trigger(A.default.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:n,tdecrypt:t}})}))},n.onLevelUpdated=function(e){e=e.details.fragments;this.lastAVStart=e.length?e[0].start:0},n.doTick=function(){if(this.media)switch(this.state){case Ee:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var o=e.maxBufferHole,a=e.maxFragLookUpTolerance,s=Math.min(e.maxBufferLength,e.maxMaxBufferLength),l=K.bufferedInfo(this._getBuffered(),r.currentTime,o),e=l.end,r=l.len,o=i[t].details,l=o.fragments,i=l.length,t=l[i-1].start+l[i-1].duration;if(s<r)return;var u,r=this.fragPrevious;(u=e<t?(u=r&&o.hasProgramDateTime?ge(l,r.endProgramDateTime,a):u)||me(r,l,e,a):l[i-1])&&u.encrypted?(T.logger.log("Loading key for "+u.sn),this.state=we,this.hls.trigger(A.default.KEY_LOADING,{frag:u})):u&&n.getState(u)===H&&(this.fragCurrent=u,this.state=Se,this.hls.trigger(A.default.FRAG_LOADING,{frag:u}))}else this.state=Ee},n.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,r.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){var e,t,n;this.fragCurrent&&(e=this.media?this.media.currentTime:0,n=this.config.maxFragLookUpTolerance,t=this.fragCurrent.start-n,n=this.fragCurrent.start+this.fragCurrent.duration+n,(e<t||n<e)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=Ee,this.tick()))},t}(De);(n=Qt=Qt||{}).WIDEVINE="com.widevine.alpha",n.PLAYREADY="com.microsoft.playready";De="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n=function(t){var e;function n(e){var n;return(n=t.call(this,e,A.default.MEDIA_ATTACHED,A.default.MEDIA_DETACHED,A.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(t){if(T.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!n.mediaKeysPromise)return T.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});function e(e){n._media&&(n._attemptSetMediaKeys(e),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData))}n.mediaKeysPromise.then(e).catch(e)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=e.config.drmSystemOptions,n}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=n.prototype;return r.getLicenseServerUrl=function(e){switch(e){case Qt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},r._attemptKeySystemAccess=function(t,e,n){var r=this,n=function(e,t,n,r){if(e!==Qt.WIDEVINE)throw new Error("Unknown key-system: "+e);return n=n,i=r,o={audioCapabilities:[],videoCapabilities:[]},t.forEach(function(e){o.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:i.audioRobustness||""})}),n.forEach(function(e){o.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:i.videoRobustness||""})}),[o];var i,o}(t,e,n,this._drmSystemOptions);T.logger.log("Requesting encrypted media key-system access");n=this.requestMediaKeySystemAccess(t,n);this.mediaKeysPromise=n.then(function(e){return r._onMediaKeySystemAccessObtained(t,e)}),n.catch(function(e){T.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},r._onMediaKeySystemAccessObtained=function(t,e){var n=this;T.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r);var i=Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return r.mediaKeys=e,T.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e});return i.catch(function(e){T.logger.error("Failed to create media-keys:",e)}),i},r._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},r._onNewMediaKeySession=function(t){var n=this;T.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){n._onKeySessionMessage(t,e.message)},!1)},r._onKeySessionMessage=function(t,e){T.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){T.logger.log("Received license data (length: "+(e&&e.byteLength)+"), updating key-session"),t.update(e)})},r._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return T.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});T.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function(e,t){var n=this,r=this._mediaKeysList[0];if(!r)return T.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(!r.mediaKeysSessionInitialized){var i=r.mediaKeysSession;return i?t?(T.logger.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,void i.generateRequest(e,t).then(function(){T.logger.debug("Key-session generation succeeded")}).catch(function(e){T.logger.error("Error generating key-session request:",e),n.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(T.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(T.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))}T.logger.warn("Key-Session already initialized but requested again")},r._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},r._onLicenseRequestReadyStageChange=function(e,t,n,r){if(4===e.readyState)if(200===e.status)this._requestLicenseFailureCount=0,T.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&T.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(e.response);else{if(T.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount)return void this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});e=3-this._requestLicenseFailureCount+1;T.logger.warn("Retrying license request, "+e+" attempts left"),this._requestLicense(n,r)}},r._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===Qt.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},r._requestLicense=function(e,t){T.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return T.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);T.logger.log("Sending license request to URL: "+r);var o=this._generateLicenseRequestChallenge(n,e);i.send(o)}catch(e){T.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(A.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=function(e){this._emeEnabled&&(e=e.media,(this._media=e).addEventListener("encrypted",this._onMediaEncrypted))},r.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch(function(){})})).then(function(){return e.setMediaKeys(null)}).catch(function(){}))},r.onManifestParsed=function(e){var t;this._emeEnabled&&(t=e.levels.map(function(e){return e.audioCodec}),e=e.levels.map(function(e){return e.videoCodec}),this._attemptKeySystemAccess(Qt.WIDEVINE,t,e))},tn(n.prototype,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),n}(s);function nn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function rn(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):nn(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}var on=rn(rn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:et,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Xe,bufferController:W,capLevelController:Ze,fpsController:t,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:De,testBandwidth:!0},{cueHandler:r,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:J,subtitleTrackController:Zt,timelineController:be,audioStreamController:at,audioTrackController:rt,emeController:n});function an(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function sn(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?an(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):an(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t,n){return t&&un(e.prototype,t),n&&un(e,n),e}var fn=function(p){var e;function g(e){var t;void 0===e&&(e={}),(t=p.call(this)||this).config=void 0,t._autoLevelCapping=void 0,t.abrController=void 0,t.capLevelController=void 0,t.levelController=void 0,t.streamController=void 0,t.networkControllers=void 0,t.audioTrackController=void 0,t.subtitleTrackController=void 0,t.emeController=void 0,t.coreComponents=void 0,t.media=null,t.url=null;var n=g.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");t.config=sn(sn({},n),e);var r=ln(t).config;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(T.enableLogs)(r.debug),t._autoLevelCapping=-1;var i=t.abrController=new r.abrController(ln(t)),o=new r.bufferController(ln(t)),a=t.capLevelController=new r.capLevelController(ln(t)),s=new r.fpsController(ln(t)),l=new N(ln(t)),u=new U(ln(t)),c=new G(ln(t)),f=new He(ln(t)),d=t.levelController=new Fe(ln(t)),n=new q(ln(t)),e=[d,t.streamController=new Me(ln(t),n)],d=r.audioStreamController;d&&e.push(new d(ln(t),n)),t.networkControllers=e;var h,s=[l,u,c,i,o,a,s,f,n];return(d=r.audioTrackController)&&(f=new d(ln(t)),t.audioTrackController=f,s.push(f)),(d=r.subtitleTrackController)&&(h=new d(ln(t)),t.subtitleTrackController=h,e.push(h)),(d=r.emeController)&&(h=new d(ln(t)),t.emeController=h,s.push(h)),(d=r.subtitleStreamController)&&e.push(new d(ln(t),n)),(d=r.timelineController)&&s.push(new d(ln(t))),t.coreComponents=s,t}t=p,(e=g).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,g.isSupported=function(){var e=Q();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!e&&!!t},cn(g,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return A.default}},{key:"ErrorTypes",get:function(){return m.ErrorTypes}},{key:"ErrorDetails",get:function(){return m.ErrorDetails}},{key:"DefaultConfig",get:function(){return g.defaultConfig||on},set:function(e){g.defaultConfig=e}}]);var t=g.prototype;return t.destroy=function(){T.logger.log("destroy"),this.trigger(A.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.attachMedia=function(e){T.logger.log("attachMedia"),this.media=e,this.trigger(A.default.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){T.logger.log("detachMedia"),this.trigger(A.default.MEDIA_DETACHING),this.media=null},t.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),T.logger.log("loadSource:"+e),this.url=e,this.trigger(A.default.MANIFEST_LOADING,{url:e})},t.startLoad=function(t){void 0===t&&(t=-1),T.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.stopLoad=function(){T.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){T.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){T.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},t.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},cn(g,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){T.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){T.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){T.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){T.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){T.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){T.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),g}(ee);fn.defaultConfig=void 0},"./src/polyfills/number.js":function(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",function(){return r}),n.d(t,"MAX_SAFE_INTEGER",function(){return i});var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(e,t,n){"use strict";function r(){return"undefined"==typeof window?self:window}n.r(t),n.d(t,"getSelfScope",function(){return r})},"./src/utils/logger.js":function(e,t,n){"use strict";n.r(t),n.d(t,"enableLogs",function(){return l}),n.d(t,"logger",function(){return u});n=n("./src/utils/get-self-scope.js");function r(){}var i={trace:r,debug:r,log:r,warn:r,info:r,error:r},o=i;var s=Object(n.getSelfScope)();function a(o){var a=s.console[o];return a?function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=(e=o,t=r[0],"["+e+"] > "+t)),a.apply(s.console,r)}:r}var l=function(e){if(s.console&&!0===e||"object"==typeof e){!function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){o[e]=t[e]?t[e].bind(t):a(e)})}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=i}}else o=i},u=o}},r={},i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s="./src/hls.ts").default;function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r},e.exports=r())},function(e,t,n){e.exports=n(45)},function(t,e,n){!function(e){t.exports=function r(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){0;var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}};i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,o,a)}return o[t].exports}for(var e=0;e<a.length;e++)s(a[e]);return s}({1:[function(H,n,r){!function(U,G){var e,t;e=this,t=function(){"use strict";function u(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<b;e+=2)(0,R[e])(R[e+1]),R[e]=void 0,R[e+1]=void 0;b=0}function s(e,t){var n=this,r=new this.constructor(a);void 0===r[O]&&v(r);var i,o=n._state;return o?(i=arguments[o-1],w(function(){return y(o,r,i,n._result)})):g(n,r,e,t),r}function l(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(a);return d(t,e),t}function a(){}function c(e){try{return e.then}catch(e){return P.error=e,P}}function f(e,t,n){var i,o,r,a;t.constructor===e.constructor&&n===s&&t.constructor.resolve===l?(r=e,(a=t)._state===I?h(r,a._result):a._state===D?p(r,a._result):g(a,void 0,function(e){return d(r,e)},function(e){return p(r,e)})):n===P?(p(e,P.error),P.error=null):void 0!==n&&u(n)?(i=t,o=n,w(function(n){var r=!1,e=function(e,t){try{e.call(t,function(e){r||(r=!0,i!==e?d(n,e):h(n,e))},function(e){r||(r=!0,p(n,e))})}catch(e){return e}}(o,i,n._label);!r&&e&&(r=!0,p(n,e))},e)):h(e,t)}function d(e,t){var n;e===t?p(e,new TypeError("You cannot resolve a promise with itself")):(n=typeof t,null===t||"object"!=n&&"function"!=n?h(e,t):f(e,t,c(t)))}function r(e){e._onerror&&e._onerror(e._result),m(e)}function h(e,t){e._state===L&&(e._result=t,e._state=I,0!==e._subscribers.length&&w(m,e))}function p(e,t){e._state===L&&(e._state=D,e._result=t,w(r,e))}function g(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+I]=n,i[o+D]=r,0===o&&e._state&&w(m,e)}function m(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?y(n,r,i,o):i(o);e._subscribers.length=0}}function y(e,t,n,r){var i=u(n),o=void 0,a=void 0,s=void 0,l=void 0;if(i){if((o=function(e,t){try{return e(t)}catch(e){return P.error=e,P}}(n,r))===P?(l=!0,a=o.error,o.error=null):s=!0,t===o)return void p(t,new TypeError("A promises callback cannot return that same promise."))}else o=r,s=!0;t._state!==L||(i&&s?d(t,o):l?p(t,a):e===I?h(t,o):e===D&&p(t,o))}function v(e){e[O]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var e,i,o,_=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b=0,A=void 0,E=void 0,w=function(e,t){R[b]=e,R[b+1]=t,2===(b+=2)&&(E?E(n):x())},S="undefined"!=typeof window?window:void 0,k=S||{},T=k.MutationObserver||k.WebKitMutationObserver,C="undefined"==typeof self&&void 0!==U&&"[object process]"==={}.toString.call(U),k="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,R=new Array(1e3),x=void 0,x=C?function(){return U.nextTick(n)}:T?(i=0,T=new T(n),o=document.createTextNode(""),T.observe(o,{characterData:!0}),function(){o.data=i=++i%2}):k?((e=new MessageChannel).port1.onmessage=n,function(){return e.port2.postMessage(0)}):(void 0===S&&"function"==typeof H?function(){try{var e=Function("return this")().require("vertx");return void 0!==(A=e.runOnLoop||e.runOnContext)?function(){A(n)}:t()}catch(e){return t()}}:t)(),O=Math.random().toString(36).substring(2),L=void 0,I=1,D=2,P={error:null},B=0,M=(N.prototype._enumerate=function(e){for(var t=0;this._state===L&&t<e.length;t++)this._eachEntry(e[t],t)},N.prototype._eachEntry=function(t,e){var n,r,i=this._instanceConstructor,o=i.resolve;o===l?(n=c(t))===s&&t._state!==L?this._settledAt(t._state,e,t._result):"function"!=typeof n?(this._remaining--,this._result[e]=t):i===j?(f(r=new i(a),t,n),this._willSettleAt(r,e)):this._willSettleAt(new i(function(e){return e(t)}),e):this._willSettleAt(o(t),e)},N.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===L&&(this._remaining--,e===D?p(r,n):this._result[t]=n),0===this._remaining&&h(r,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;g(e,void 0,function(e){return n._settledAt(I,t,e)},function(e){return n._settledAt(D,t,e)})},N),j=(F.prototype.catch=function(e){return this.then(null,e)},F.prototype.finally=function(t){var n=this.constructor;return u(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},F);function F(e){this[O]=B++,this._result=this._state=void 0,this._subscribers=[],a!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof F?function(t,e){try{e(function(e){d(t,e)},function(e){p(t,e)})}catch(e){p(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function N(e,t){this._instanceConstructor=e,this.promise=new e(a),this.promise[O]||v(this.promise),_(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}return j.prototype.then=s,j.all=function(e){return new M(this,e).promise},j.race=function(i){var o=this;return new o(_(i)?function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},j.resolve=l,j.reject=function(e){var t=new this(a);return p(t,e),t},j._setScheduler=function(e){E=e},j._setAsap=function(e){w=e},j._asap=w,j.polyfill=function(){var e=void 0;if(void 0!==G)e=G;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j},j.Promise=j},"object"==typeof r&&void 0!==n?n.exports=t():e.ES6Promise=t()}.call(this,H("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(c(n=this._events[e]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(u(n))for(i=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,o=0;o<r;o++)a[o].apply(this,i);return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!l(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,l(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!l(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!l(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||l(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(o=i;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?l(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(l(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],3:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(){p&&d&&(p=!1,d.length?h=d.concat(h):g=-1,h.length&&s())}function s(){if(!p){var e=o(a);p=!0;for(var t=h.length;t;){for(d=h,h=[];++g<t;)d&&d[g].run();g=-1,t=h.length}d=null,p=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,t=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,h=[],p=!1,g=-1;t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||p||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=u,t.addListener=u,t.once=u,t.off=u,t.removeListener=u,t.removeAllListeners=u,t.emit=u,t.prependListener=u,t.prependOnceListener=u,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],4:[function(e,t,n){var d=arguments[3],h=arguments[4],p=arguments[5],g=JSON.stringify;t.exports=function(e,t){for(var n=Object.keys(p),r=0,i=n.length;r<i;r++){var o=n[r],a=p[o].exports;if(a===e||a&&a.default===e){s=o;break}}if(!s){for(var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={},r=0,i=n.length;r<i;r++)l[o=n[r]]=o;h[s]=["function(require,module,exports){"+e+"(self); }",l]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[s]=s,h[u]=["function(require,module,exports){var f = require("+g(s)+");(f.default ? f.default : f)(self);}",c];var f={};!function e(t){for(var n in f[t]=!0,h[t][1]){n=h[t][1][n];f[n]||e(n)}}(u);c="("+d+")({"+Object.keys(f).map(function(e){return g(e)+":["+h[e][0]+","+g(h[e][1])+"]"}).join(",")+"},{},["+g(u)+"])",u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=new Blob([c],{type:"text/javascript"});if(t&&t.bare)return c;u=u.createObjectURL(c),c=new Worker(u);return c.objectURL=u,c}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createDefaultConfig=function(){return Object.assign({},r)};var r=n.defaultConfig={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},o=(r=e("../io/io-controller.js"))&&r.__esModule?r:{default:r},a=e("../config.js"),i=(i(s,null,[{key:"supportMSEH264Playback",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"supportNetworkStreamIO",value:function(){var e=new o.default({},(0,a.createDefaultConfig)()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t}},{key:"getNetworkLoaderTypeName",value:function(){var e=new o.default({},(0,a.createDefaultConfig)()),t=e.loaderType;return e.destroy(),t}},{key:"supportNativeMediaPlayback",value:function(e){e=(s.videoElement=null==s.videoElement?window.document.createElement("video"):s.videoElement).canPlayType(e);return"probably"===e||"maybe"==e}},{key:"getFeatureList",value:function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=s.supportMSEH264Playback(),e.networkStreamIO=s.supportNetworkStreamIO(),e.networkLoaderName=s.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=s.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeWebmVP8Playback=s.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=s.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e}}]),s);function s(){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../config.js":5,"../io/io-controller.js":23}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(i,[{key:"isComplete",value:function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}},{key:"getNearestKeyframe",value:function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,e=this._search(t.times,e);return{index:e,milliseconds:t.times[e],fileposition:t.filepositions[e]}}},{key:"_search",value:function(e,t){var n,r=0,i=e.length-1,o=0,a=i;for(t<e[0]&&(r=0,o=a+1);o<=a;){if((n=o+Math.floor((a-o)/2))===i||t>=e[n]&&t<e[n+1]){r=n;break}e[n]<t?o=n+1:a=n-1}return r}}]),i);function i(){(function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{}],8:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){a(this,o),this._type=e,this._list=[],this._lastAppendLocation=-1}function s(){a(this,s),this._list=[]}function l(){a(this,l),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}n.SampleInfo=function e(t,n,r,i,o){a(this,e),this.dts=t,this.pts=n,this.duration=r,this.originalDts=i,this.isSyncPoint=o,this.fileposition=null},n.MediaSegmentInfo=(r(l,[{key:"appendSyncPoint",value:function(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}]),l),n.IDRSampleList=(r(s,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}},{key:"getLastSyncPointBeforeDts",value:function(e){if(0==this._list.length)return null;var t,n=this._list,r=0,i=n.length-1,o=0,a=i;for(e<n[0].dts&&(r=0,o=a+1);o<=a;){if((t=o+Math.floor((a-o)/2))===i||e>=n[t].dts&&e<n[t+1].dts){r=t;break}n[t].dts<e?o=t+1:a=t-1}return this._list[r]}}]),s),n.MediaSegmentInfoList=(r(o,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n,r=t.length-1,i=0,o=r,a=0;if(e<t[0].originalBeginDts)return-1;for(;i<=o;){if((n=i+Math.floor((o-i)/2))===r||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){a=n;break}t[n].originalBeginDts<e?i=n+1:o=n-1}return a}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=e,r=this._lastAppendLocation,e=0;-1!==r&&r<t.length&&n.originalBeginDts>=t[r].lastSample.originalDts&&(r===t.length-1||r<t.length-1&&n.originalBeginDts<t[r+1].originalBeginDts)?e=r+1:0<t.length&&(e=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=e,this._list.splice(e,0,n)}},{key:"getLastSegmentBefore",value:function(e){e=this._searchNearestSegmentBefore(e);return 0<=e?this._list[e]:null}},{key:"getLastSampleBefore",value:function(e){e=this.getLastSegmentBefore(e);return null!=e?e.lastSample:null}},{key:"getLastSyncPointBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&0<t;)n=this._list[--t].syncPoints;return 0<n.length?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),o)},{}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e},o=r(e("events")),l=r(e("../utils/logger.js")),u=r(e("../utils/browser.js")),a=r(e("./mse-events.js")),s=e("./media-segment-info.js"),c=e("../utils/exception.js"),i=(i(f,[{key:"destroy",value:function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"attachMediaElement",value:function(e){if(this._mediaSource)throw new c.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL}},{key:"detachMediaElement",value:function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var n=this._pendingSegments[e];n.splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null;n=this._sourceBuffers[e];if(n){if("closed"!==t.readyState){try{t.removeSourceBuffer(n)}catch(t){l.default.e(this.TAG,t.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){l.default.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}},{key:"appendInitSegment",value:function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var n=e,r=""+n.container;n.codec&&0<n.codec.length&&(r+=";codecs="+n.codec);var i=!1;if(l.default.v(this.TAG,"Received Initialization Segment, mimeType: "+r),this._lastInitSegments[n.type]=n,r!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])l.default.v(this.TAG,"Notice: "+n.type+" mimeType changed, origin: "+this._mimeTypes[n.type]+", target: "+r);else{i=!0;try{var o=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(r);o.addEventListener("error",this.e.onSourceBufferError),o.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return l.default.e(this.TAG,e.message),void this._emitter.emit(a.default.ERROR,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=r}t||this._pendingSegments[n.type].push(n),i||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),u.default.safari&&"audio/mpeg"===n.container&&0<n.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}},{key:"appendMediaSegment",value:function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();e=this._sourceBuffers[e.type];!e||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}},{key:"seek",value:function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(e){l.default.e(this.TAG,e.message)}this._idrList.clear();var r=this._pendingSegments[t];if(r.splice(0,r.length),"closed"!==this._mediaSource.readyState){for(var i,o=0;o<n.buffered.length;o++){var a=n.buffered.start(o),s=n.buffered.end(o);this._pendingRemoveRanges[t].push({start:a,end:s})}n.updating||this._doRemoveRanges(),u.default.safari&&(i=this._lastInitSegments[t])&&(this._pendingSegments[t].push(i),n.updating||this._doAppendSegments())}}}},{key:"endOfStream",value:function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}},{key:"getNearestKeyframe",value:function(e){return this._idrList.getLastSyncPointBeforeDts(e)}},{key:"_needCleanupSourceBuffer",value:function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){n=n.buffered;if(1<=n.length&&t-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1}},{key:"_doCleanupSourceBuffer",value:function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var r=n.buffered,i=!1,o=0;o<r.length;o++){var a,s=r.start(o),l=r.end(o);s<=t&&t<l+3?t-s>=this._config.autoCleanupMaxBackwardDuration&&(i=!0,a=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:s,end:a})):l<t&&(i=!0,this._pendingRemoveRanges[e].push({start:s,end:l}))}i&&!n.updating&&this._doRemoveRanges()}}}},{key:"_updateMediaSourceDuration",value:function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(e=this._mediaSource.duration,0<(t=this._pendingMediaDuration)&&(isNaN(e)||e<t)&&(l.default.v(this.TAG,"Update MediaSource duration from "+e+" to "+t),this._mediaSource.duration=t),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)}},{key:"_doRemoveRanges",value:function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var r=n.shift();t.remove(r.start,r.end)}}},{key:"_doAppendSegments",value:function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var n,r,i=t[e].shift();if(i.timestampOffset&&(n=this._sourceBuffers[e].timestampOffset,r=i.timestampOffset/1e3,.1<Math.abs(n-r)&&(l.default.v(this.TAG,"Update MPEG audio timestampOffset from "+n+" to "+r),this._sourceBuffers[e].timestampOffset=r),delete i.timestampOffset),!i.data||0===i.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(i.data),this._isBufferFull=!1,"video"===e&&i.hasOwnProperty("info")&&this._idrList.appendArray(i.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(i),22===t.code?(this._isBufferFull||this._emitter.emit(a.default.BUFFER_FULL),this._isBufferFull=!0):(l.default.e(this.TAG,t.message),this._emitter.emit(a.default.ERROR,{code:t.code,msg:t.message}))}}}},{key:"_onSourceOpen",value:function(){if(l.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(a.default.SOURCE_OPEN)}},{key:"_onSourceEnded",value:function(){l.default.v(this.TAG,"MediaSource onSourceEnded")}},{key:"_onSourceClose",value:function(){l.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"_hasPendingSegments",value:function(){var e=this._pendingSegments;return 0<e.video.length||0<e.audio.length}},{key:"_hasPendingRemoveRanges",value:function(){var e=this._pendingRemoveRanges;return 0<e.video.length||0<e.audio.length}},{key:"_onSourceBufferUpdateEnd",value:function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(a.default.UPDATE_END)}},{key:"_onSourceBufferError",value:function(e){l.default.e(this.TAG,"SourceBuffer Error: "+e)}}]),f);function f(e){(function(e){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")})(this),this.TAG="MSEController",this._config=e,this._emitter=new o.default,this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new s.IDRSampleList}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./media-segment-info.js":8,"./mse-events.js":10,events:2}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},{}],11:[function(r,e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e},o=n(r("events")),a=n(r("../utils/logger.js")),s=n(r("../utils/logging-control.js")),l=n(r("./transmuxing-controller.js")),u=n(r("./transmuxing-events.js")),c=n(r("./transmuxing-worker.js")),f=n(r("./media-info.js")),i=(i(d,[{key:"destroy",value:function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),s.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"hasWorker",value:function(){return null!=this._worker}},{key:"open",value:function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()}},{key:"close",value:function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()}},{key:"seek",value:function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)}},{key:"pause",value:function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()}},{key:"resume",value:function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()}},{key:"_onInitSegment",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(u.default.INIT_SEGMENT,e,t)})}},{key:"_onMediaSegment",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(u.default.MEDIA_SEGMENT,e,t)})}},{key:"_onLoadingComplete",value:function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(u.default.LOADING_COMPLETE)})}},{key:"_onRecoveredEarlyEof",value:function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(u.default.RECOVERED_EARLY_EOF)})}},{key:"_onMediaInfo",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(u.default.MEDIA_INFO,e)})}},{key:"_onMetaDataArrived",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(u.default.METADATA_ARRIVED,e)})}},{key:"_onScriptDataArrived",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(u.default.SCRIPTDATA_ARRIVED,e)})}},{key:"_onStatisticsInfo",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(u.default.STATISTICS_INFO,e)})}},{key:"_onIOError",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(u.default.IO_ERROR,e,t)})}},{key:"_onDemuxError",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(u.default.DEMUX_ERROR,e,t)})}},{key:"_onRecommendSeekpoint",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(u.default.RECOMMEND_SEEKPOINT,e)})}},{key:"_onLoggingConfigChanged",value:function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})}},{key:"_onWorkerMessage",value:function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case u.default.INIT_SEGMENT:case u.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case u.default.LOADING_COMPLETE:case u.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case u.default.MEDIA_INFO:Object.setPrototypeOf(n,f.default.prototype),this._emitter.emit(t.msg,n);break;case u.default.METADATA_ARRIVED:case u.default.SCRIPTDATA_ARRIVED:case u.default.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case u.default.IO_ERROR:case u.default.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case u.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":a.default.emitter.emit("log",n.type,n.logcat)}}}]),d);function d(t,n){if(function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.TAG="Transmuxer",this._emitter=new o.default,n.enableWorker&&"undefined"!=typeof Worker)try{var e=r("webworkify");this._worker=e(c.default),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[t,n]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},s.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:s.default.getConfig()})}catch(e){a.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new l.default(t,n)}else this._controller=new l.default(t,n);this._controller&&((n=this._controller).on(u.default.IO_ERROR,this._onIOError.bind(this)),n.on(u.default.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(u.default.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(u.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(u.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(u.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(u.default.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(u.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(u.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(u.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(u.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)))}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.default=i},{"../utils/logger.js":41,"../utils/logging-control.js":42,"./media-info.js":7,"./transmuxing-controller.js":12,"./transmuxing-events.js":13,"./transmuxing-worker.js":14,events:2,webworkify:4}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e},o=r(e("events")),a=r(e("../utils/logger.js")),s=r(e("../utils/browser.js")),l=r(e("./media-info.js")),u=r(e("../demux/flv-demuxer.js")),c=r(e("../remux/mp4-remuxer.js")),f=r(e("../demux/demux-errors.js")),d=r(e("../io/io-controller.js")),h=r(e("./transmuxing-events.js")),i=(e("../io/loader.js"),i(p,[{key:"destroy",value:function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"start",value:function(){this._loadSegment(0),this._enableStatisticsReporter()}},{key:"_loadSegment",value:function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e],e=this._ioctl=new d.default(n,this._config,e);e.onError=this._onIOException.bind(this),e.onSeeked=this._onIOSeeked.bind(this),e.onComplete=this._onIOComplete.bind(this),e.onRedirect=this._onIORedirect.bind(this),e.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):e.onDataArrival=this._onInitChunkArrival.bind(this),e.open(t)}},{key:"stop",value:function(){this._internalAbort(),this._disableStatisticsReporter()}},{key:"_internalAbort",value:function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}},{key:"pause",value:function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())}},{key:"resume",value:function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())}},{key:"seek",value:function(e){var t,n,r;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(n=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(r=n.getNearestKeyframe(e),this._remuxer.seek(r.milliseconds),this._ioctl.seek(r.fileposition),this._pendingResolveSeekPoint=r.milliseconds):null==(r=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(r=r.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,r.fileposition),this._pendingResolveSeekPoint=r.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())}},{key:"_searchSegmentIndexContains",value:function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,r=0;r<t.length;r++)if(e<t[r].timestampBase){n=r-1;break}return n}},{key:"_onInitChunkArrival",value:function(e,t){var n,r=this,i=null;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,this._demuxer.parseChunks(e,t)):(i=u.default.probe(e)).match?(this._demuxer=new u.default(i,this._config),this._remuxer||(this._remuxer=new c.default(this._config)),null==(n=this._mediaDataSource).duration||isNaN(n.duration)||(this._demuxer.overridedDuration=n.duration),"boolean"==typeof n.hasAudio&&(this._demuxer.overridedHasAudio=n.hasAudio),"boolean"==typeof n.hasVideo&&(this._demuxer.overridedHasVideo=n.hasVideo),this._demuxer.timestampBase=n.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),this._demuxer.parseChunks(e,t)):(i=null,a.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){r._internalAbort()}),this._emitter.emit(h.default.DEMUX_ERROR,f.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),0)}},{key:"_onMediaInfo",value:function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,l.default.prototype));e=Object.assign({},e);Object.setPrototypeOf(e,l.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)})}},{key:"_onMetaDataArrived",value:function(e){this._emitter.emit(h.default.METADATA_ARRIVED,e)}},{key:"_onScriptDataArrived",value:function(e){this._emitter.emit(h.default.SCRIPTDATA_ARRIVED,e)}},{key:"_onIOSeeked",value:function(){this._remuxer.insertDiscontinuity()}},{key:"_onIOComplete",value:function(e){e+=1;e<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer.flushStashedSamples(),this._emitter.emit(h.default.LOADING_COMPLETE),this._disableStatisticsReporter())}},{key:"_onIORedirect",value:function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e}},{key:"_onIORecoveredEarlyEof",value:function(){this._emitter.emit(h.default.RECOVERED_EARLY_EOF)}},{key:"_onIOException",value:function(e,t){a.default.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(h.default.IO_ERROR,e,t),this._disableStatisticsReporter()}},{key:"_onDemuxException",value:function(e,t){a.default.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(h.default.DEMUX_ERROR,e,t)}},{key:"_onRemuxerInitSegmentArrival",value:function(e,t){this._emitter.emit(h.default.INIT_SEGMENT,e,t)}},{key:"_onRemuxerMediaSegmentArrival",value:function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(h.default.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,s.default.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(h.default.RECOMMEND_SEEKPOINT,t))}},{key:"_enableStatisticsReporter",value:function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}},{key:"_disableStatisticsReporter",value:function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"_reportSegmentMediaInfo",value:function(e){e=this._mediaInfo.segments[e],e=Object.assign({},e);e.duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(h.default.MEDIA_INFO,e)}},{key:"_reportStatisticsInfo",value:function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(h.default.STATISTICS_INFO,e)}}]),p);function p(t,n){(function(e){if(!(e instanceof p))throw new TypeError("Cannot call a class as a function")})(this),this.TAG="TransmuxingController",this._emitter=new o.default,this._config=n,t.segments||(t.segments=[{duration:t.duration,filesize:t.filesize,url:t.url}]),"boolean"!=typeof t.cors&&(t.cors=!0),"boolean"!=typeof t.withCredentials&&(t.withCredentials=!1),this._mediaDataSource=t;var r=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach(function(e){e.timestampBase=r,r+=e.duration,e.cors=t.cors,e.withCredentials=t.withCredentials,n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy)}),isNaN(r)||this._mediaDataSource.duration===r||(this._mediaDataSource.duration=r),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../demux/demux-errors.js":16,"../demux/flv-demuxer.js":18,"../io/io-controller.js":23,"../io/loader.js":24,"../remux/mp4-remuxer.js":38,"../utils/browser.js":39,"../utils/logger.js":41,"./media-info.js":7,"./transmuxing-events.js":13,events:2}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},{}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=(r(e("../utils/logger.js")),e("../utils/logging-control.js")),o=r(i),a=r(e("../utils/polyfill.js")),s=r(e("./transmuxing-controller.js")),l=r(e("./transmuxing-events.js"));n.default=function(n){var r=null,i=function(e,t){n.postMessage({msg:"logcat_callback",data:{type:e,logcat:t}})}.bind(this);a.default.install(),n.addEventListener("message",function(e){switch(e.data.cmd){case"init":(r=new s.default(e.data.param[0],e.data.param[1])).on(l.default.IO_ERROR,function(e,t){n.postMessage({msg:l.default.IO_ERROR,data:{type:e,info:t}})}.bind(this)),r.on(l.default.DEMUX_ERROR,function(e,t){n.postMessage({msg:l.default.DEMUX_ERROR,data:{type:e,info:t}})}.bind(this)),r.on(l.default.INIT_SEGMENT,function(e,t){e={msg:l.default.INIT_SEGMENT,data:{type:e,data:t}},n.postMessage(e,[t.data])}.bind(this)),r.on(l.default.MEDIA_SEGMENT,function(e,t){e={msg:l.default.MEDIA_SEGMENT,data:{type:e,data:t}},n.postMessage(e,[t.data])}.bind(this)),r.on(l.default.LOADING_COMPLETE,function(){var e={msg:l.default.LOADING_COMPLETE};n.postMessage(e)}.bind(this)),r.on(l.default.RECOVERED_EARLY_EOF,function(){var e={msg:l.default.RECOVERED_EARLY_EOF};n.postMessage(e)}.bind(this)),r.on(l.default.MEDIA_INFO,function(e){e={msg:l.default.MEDIA_INFO,data:e},n.postMessage(e)}.bind(this)),r.on(l.default.METADATA_ARRIVED,function(e){e={msg:l.default.METADATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),r.on(l.default.SCRIPTDATA_ARRIVED,function(e){e={msg:l.default.SCRIPTDATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),r.on(l.default.STATISTICS_INFO,function(e){e={msg:l.default.STATISTICS_INFO,data:e},n.postMessage(e)}.bind(this)),r.on(l.default.RECOMMEND_SEEKPOINT,function(e){n.postMessage({msg:l.default.RECOMMEND_SEEKPOINT,data:e})}.bind(this));break;case"destroy":r&&(r.destroy(),r=null),n.postMessage({msg:"destroyed"});break;case"start":r.start();break;case"stop":r.stop();break;case"seek":r.seek(e.data.param);break;case"pause":r.pause();break;case"resume":r.resume();break;case"logging_config":var t=e.data.param;o.default.applyConfig(t),!0===t.enableCallback?o.default.addLogListener(i):o.default.removeLogListener(i)}})}},{"../utils/logger.js":41,"../utils/logging-control.js":42,"../utils/polyfill.js":43,"./transmuxing-controller.js":12,"./transmuxing-events.js":13}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},v=r(e("../utils/logger.js")),o=r(e("../utils/utf8-conv.js")),_=e("../utils/exception.js"),b=(e=new ArrayBuffer(2),new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]),i=(i(A,null,[{key:"parseScriptData",value:function(e,t,n){var r={};try{var i=A.parseValue(e,t,n),o=A.parseValue(e,t+i.size,n-i.size);r[i.data]=o.data}catch(e){v.default.e("AMF",e.toString())}return r}},{key:"parseObject",value:function(e,t,n){if(n<3)throw new _.IllegalStateException("Data not enough when parse ScriptDataObject");var r=A.parseString(e,t,n),t=A.parseValue(e,t+r.size,n-r.size),n=t.objectEnd;return{data:{name:r.data,value:t.data},size:r.size+t.size,objectEnd:n}}},{key:"parseVariable",value:function(e,t,n){return A.parseObject(e,t,n)}},{key:"parseString",value:function(e,t,n){if(n<2)throw new _.IllegalStateException("Data not enough when parse String");n=new DataView(e,t,n).getUint16(0,!b);return{data:0<n?(0,o.default)(new Uint8Array(e,t+2,n)):"",size:2+n}}},{key:"parseLongString",value:function(e,t,n){if(n<4)throw new _.IllegalStateException("Data not enough when parse LongString");n=new DataView(e,t,n).getUint32(0,!b);return{data:0<n?(0,o.default)(new Uint8Array(e,t+4,n)):"",size:4+n}}},{key:"parseDate",value:function(e,t,n){if(n<10)throw new _.IllegalStateException("Data size invalid when parse Date");t=new DataView(e,t,n),n=t.getFloat64(0,!b);return n+=60*t.getInt16(8,!b)*1e3,{data:new Date(n),size:10}}},{key:"parseValue",value:function(e,t,n){if(n<1)throw new _.IllegalStateException("Data not enough when parse Value");var r=new DataView(e,t,n),i=1,o=r.getUint8(0),a=void 0,s=!1;try{switch(o){case 0:a=r.getFloat64(1,!b),i+=8;break;case 1:a=!!r.getUint8(1),i+=1;break;case 2:var l=A.parseString(e,t+1,n-1),a=l.data;i+=l.size;break;case 3:a={};var u=0;for(9==(16777215&r.getUint32(n-4,!b))&&(u=3);i<n-4;){var c=A.parseObject(e,t+i,n-i-u);if(c.objectEnd)break;a[c.data.name]=c.data.value,i+=c.size}i<=n-3&&9==(16777215&r.getUint32(i-1,!b))&&(i+=3);break;case 8:a={},i+=4;var f=0;for(9==(16777215&r.getUint32(n-4,!b))&&(f=3);i<n-8;){var d=A.parseVariable(e,t+i,n-i-f);if(d.objectEnd)break;a[d.data.name]=d.data.value,i+=d.size}i<=n-3&&9==(16777215&r.getUint32(i-1,!b))&&(i+=3);break;case 9:i=1,s=!(a=void 0);break;case 10:a=[];var h=r.getUint32(1,!b);i+=4;for(var p=0;p<h;p++){var g=A.parseValue(e,t+i,n-i);a.push(g.data),i+=g.size}break;case 11:var m=A.parseDate(e,t+1,n-1);a=m.data,i+=m.size;break;case 12:var y=A.parseString(e,t+1,n-1);a=y.data,i+=y.size;break;default:i=n,v.default.w("AMF","Unsupported AMF value type "+o)}}catch(e){v.default.e("AMF",e.toString())}return{data:a,size:i,objectEnd:s}}}]),A);function A(){!function(e){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}(this)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"../utils/utf8-conv.js":44}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},i=e("../utils/exception.js"),r=(r(o,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new i.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),e=new Uint8Array(4);e.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(e.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(32<e)throw new i.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;t=e-this._current_word_bits_left;this._fillCurrentWord();e=Math.min(t,this._current_word_bits_left),t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,n<<e|t}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){for(var e=void 0,e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),o);function o(e){(function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")})(this),this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{"../utils/exception.js":40}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},E=r(e("../utils/logger.js")),a=r(e("./amf-parser.js")),w=r(e("./sps-parser.js")),S=r(e("./demux-errors.js")),s=r(e("../core/media-info.js")),f=e("../utils/exception.js"),i=(i(d,[{key:"destroy",value:function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null}},{key:"bindDataSource",value:function(e){return e.onDataArrival=this.parseChunks.bind(this),this}},{key:"resetMediaInfo",value:function(){this._mediaInfo=new s.default}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}},{key:"parseChunks",value:function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new f.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,r=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;n=d.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+n!==this._dataOffset&&E.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==new DataView(e,n).getUint32(0,!r)&&E.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<e.byteLength;){this._dispatch=!0;var i=new DataView(e,n);if(n+11+4>e.byteLength)break;var o=i.getUint8(0),a=16777215&i.getUint32(0,!r);if(n+11+a+4>e.byteLength)break;if(8===o||9===o||18===o){var s=i.getUint8(4),l=i.getUint8(5),u=i.getUint8(6)|l<<8|s<<16|i.getUint8(7)<<24;0!=(16777215&i.getUint32(7,!r))&&E.default.w(this.TAG,"Meet tag which has StreamID != 0!");var c=n+11;switch(o){case 8:this._parseAudioData(e,c,a,u);break;case 9:this._parseVideoData(e,c,a,u,t+n);break;case 18:this._parseScriptData(e,c,a)}i=i.getUint32(11+a,!r);i!==11+a&&E.default.w(this.TAG,"Invalid PrevTagSize "+i),n+=11+a+4}else E.default.w(this.TAG,"Unsupported tag type "+o+", skipped"),n+=11+a+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n}},{key:"_parseScriptData",value:function(e,t,n){t=a.default.parseScriptData(e,t,n);if(t.hasOwnProperty("onMetaData")){if(null==t.onMetaData||"object"!==o(t.onMetaData))return void E.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&E.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=t;var r,i,n=this._metadata.onMetaData;this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},n)),"boolean"==typeof n.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof n.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"==typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"==typeof n.width&&(this._mediaInfo.width=n.width),"number"==typeof n.height&&(this._mediaInfo.height=n.height),"number"==typeof n.duration?this._durationOverrided||(r=Math.floor(n.duration*this._timescale),this._duration=r,this._mediaInfo.duration=r):this._mediaInfo.duration=0,"number"!=typeof n.framerate||0<(r=Math.floor(1e3*n.framerate))&&(i=r/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=r,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i),"object"===o(n.keyframes)?(this._mediaInfo.hasKeyframesIndex=!0,i=n.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(i),n.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=n,E.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(t).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},t))}},{key:"_parseKeyframesIndex",value:function(e){for(var t=[],n=[],r=1;r<e.times.length;r++){var i=this._timestampBase+Math.floor(1e3*e.times[r]);t.push(i),n.push(e.filepositions[r])}return{times:t,filepositions:n}}},{key:"_parseAudioData",value:function(e,t,n,r){if(n<=1)E.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){var i=(this._littleEndian,new DataView(e,t,n).getUint8(0)),o=i>>>4;if(2==o||10==o){var a=(12&i)>>>2;if(0<=a&&a<=4){var s=this._flvSoundRateTable[a],l=1&i,u=this._audioMetadata,i=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(u=this._audioMetadata={}).type="audio",u.id=i.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=s,u.channelCount=0==l?1:2),10==o){var c=this._parseAACAudioData(e,t+1,n-1);null!=c&&(0===c.packetType?(u.config&&E.default.w(this.TAG,"Found another AudioSpecificConfig!"),l=c.data,u.audioSampleRate=l.samplingRate,u.channelCount=l.channelCount,u.codec=l.codec,u.originalCodec=l.originalCodec,u.config=l.config,u.refSampleDuration=1024/u.audioSampleRate*u.timescale,E.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",u),(l=this._mediaInfo).audioCodec=u.originalCodec,l.audioSampleRate=u.audioSampleRate,l.audioChannelCount=u.channelCount,l.hasVideo?null!=l.videoCodec&&(l.mimeType='video/x-flv; codecs="'+l.videoCodec+","+l.audioCodec+'"'):l.mimeType='video/x-flv; codecs="'+l.audioCodec+'"',l.isComplete()&&this._onMediaInfo(l)):1===c.packetType?(f=this._timestampBase+r,f={unit:c.data,length:c.data.byteLength,dts:f,pts:f},i.samples.push(f),i.length+=c.data.length):E.default.e(this.TAG,"Flv: Unsupported AAC data type "+c.packetType))}else if(2==o){if(!u.codec){var f=this._parseMP3AudioData(e,t+1,n-1,!0);if(null==f)return;u.audioSampleRate=f.samplingRate,u.channelCount=f.channelCount,u.codec=f.codec,u.originalCodec=f.originalCodec,u.refSampleDuration=1152/u.audioSampleRate*u.timescale,E.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",u);c=this._mediaInfo;c.audioCodec=u.codec,c.audioSampleRate=u.audioSampleRate,c.audioChannelCount=u.channelCount,c.audioDataRate=f.bitRate,c.hasVideo?null!=c.videoCodec&&(c.mimeType='video/x-flv; codecs="'+c.videoCodec+","+c.audioCodec+'"'):c.mimeType='video/x-flv; codecs="'+c.audioCodec+'"',c.isComplete()&&this._onMediaInfo(c)}n=this._parseMP3AudioData(e,t+1,n-1,!1);null!=n&&(r=this._timestampBase+r,r={unit:n,length:n.byteLength,dts:r,pts:r},i.samples.push(r),i.length+=n.length)}}else this._onError(S.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+a)}else this._onError(S.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+o)}}},{key:"_parseAACAudioData",value:function(e,t,n){if(!(n<=1)){var r={},i=new Uint8Array(e,t,n);return r.packetType=i[0],0===i[0]?r.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):r.data=i.subarray(1),r}E.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")}},{key:"_parseAACAudioSpecificConfig",value:function(e,t,n){var r,i=new Uint8Array(e,t,n),o=null,a=0,s=null,a=r=i[0]>>>3;if((e=(7&i[0])<<1|i[1]>>>7)<0||e>=this._mpegSamplingRates.length)this._onError(S.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{t=this._mpegSamplingRates[e],n=(120&i[1])>>>3;if(!(n<0||8<=n)){5===a&&(s=(7&i[1])<<1|i[2]>>>7,i[2]);i=self.navigator.userAgent.toLowerCase();return-1!==i.indexOf("firefox")?s=6<=e?(a=5,o=new Array(4),e-3):(a=2,o=new Array(2),e):-1!==i.indexOf("android")?(a=2,o=new Array(2),s=e):(a=5,s=e,o=new Array(4),6<=e?s=e-3:1==n&&(a=2,o=new Array(2),s=e)),o[0]=a<<3,o[0]|=(15&e)>>>1,o[1]=(15&e)<<7,o[1]|=(15&n)<<3,5===a&&(o[1]|=(15&s)>>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplingRate:t,channelCount:n,codec:"mp4a.40."+a,originalCodec:"mp4a.40."+r}}this._onError(S.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}}},{key:"_parseMP3AudioData",value:function(e,t,n,r){if(!(n<4)){var i=(this._littleEndian,new Uint8Array(e,t,n)),e=null;if(r){if(255!==i[0])return;var t=i[1]>>>3&3,n=(6&i[1])>>1,o=(240&i[2])>>>4,a=(12&i[2])>>>2,r=3!=(i[3]>>>6&3)?2:1,s=0,l=0;switch(t){case 0:s=this._mpegAudioV25SampleRateTable[a];break;case 2:s=this._mpegAudioV20SampleRateTable[a];break;case 3:s=this._mpegAudioV10SampleRateTable[a]}switch(n){case 1:o<this._mpegAudioL3BitRateTable.length&&(l=this._mpegAudioL3BitRateTable[o]);break;case 2:o<this._mpegAudioL2BitRateTable.length&&(l=this._mpegAudioL2BitRateTable[o]);break;case 3:o<this._mpegAudioL1BitRateTable.length&&(l=this._mpegAudioL1BitRateTable[o])}e={bitRate:l,samplingRate:s,channelCount:r,codec:"mp3",originalCodec:"mp3"}}else e=i;return e}E.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")}},{key:"_parseVideoData",value:function(e,t,n,r,i){var o,a;n<=1?E.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(7==(a=15&(o=new Uint8Array(e,t,n)[0]))?this._parseAVCVideoPacket(e,t+1,n-1,r,i,(240&o)>>>4):this._onError(S.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+a))}},{key:"_parseAVCVideoPacket",value:function(e,t,n,r,i,o){if(n<4)E.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var a=this._littleEndian,s=new DataView(e,t,n),l=s.getUint8(0),a=(16777215&s.getUint32(0,!a))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseAVCVideoData(e,t+4,n-4,r,i,o,a);else if(2!==l)return void this._onError(S.default.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}}},{key:"_parseAVCDecoderConfigurationRecord",value:function(e,t,n){if(n<7)E.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var r=this._videoMetadata,i=this._videoTrack,o=this._littleEndian,a=new DataView(e,t,n);r?void 0!==r.avcc&&E.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(r=this._videoMetadata={}).type="video",r.id=i.id,r.timescale=this._timescale,r.duration=this._duration);var s=a.getUint8(0),i=a.getUint8(1);if(a.getUint8(2),a.getUint8(3),1===s&&0!==i)if(this._naluLengthSize=1+(3&a.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var l=31&a.getUint8(5);if(0!=l){1<l&&E.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+l);for(var u=6,c=0;c<l;c++){var f=a.getUint16(u,!o);if(u+=2,0!==f){var d=new Uint8Array(e,t+u,f);u+=f;var h=w.default.parseSPS(d);if(0===c){r.codecWidth=h.codec_size.width,r.codecHeight=h.codec_size.height,r.presentWidth=h.present_size.width,r.presentHeight=h.present_size.height,r.profile=h.profile_string,r.level=h.level_string,r.bitDepth=h.bit_depth,r.chromaFormat=h.chroma_format,r.sarRatio=h.sar_ratio,r.frameRate=h.frame_rate,!1!==h.frame_rate.fixed&&0!==h.frame_rate.fps_num&&0!==h.frame_rate.fps_den||(r.frameRate=this._referenceFrameRate);var p=r.frameRate.fps_den,f=r.frameRate.fps_num;r.refSampleDuration=r.timescale*(p/f);for(var g=d.subarray(1,4),m="avc1.",y=0;y<3;y++){var v=g[y].toString(16);m+=v=v.length<2?"0"+v:v}r.codec=m;d=this._mediaInfo;d.width=r.codecWidth,d.height=r.codecHeight,d.fps=r.frameRate.fps,d.profile=r.profile,d.level=r.level,d.refFrames=h.ref_frames,d.chromaFormat=h.chroma_format_string,d.sarNum=r.sarRatio.width,d.sarDen=r.sarRatio.height,d.videoCodec=m,d.hasAudio?null!=d.audioCodec&&(d.mimeType='video/x-flv; codecs="'+d.videoCodec+","+d.audioCodec+'"'):d.mimeType='video/x-flv; codecs="'+d.videoCodec+'"',d.isComplete()&&this._onMediaInfo(d)}}}var _=a.getUint8(u);if(0!==_){1<_&&E.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+_),u++;for(var b=0;b<_;b++){var A=a.getUint16(u,!o);u+=2,0!==A&&(u+=A)}r.avcc=new Uint8Array(n),r.avcc.set(new Uint8Array(e,t,n),0),E.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",r)}else this._onError(S.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(S.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(S.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(S.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}}},{key:"_parseAVCVideoData",value:function(e,t,n,r,i,o,a){for(var s=this._littleEndian,l=new DataView(e,t,n),u=[],c=0,f=0,d=this._naluLengthSize,h=this._timestampBase+r,p=1===o;f<n;){if(n<=f+4){E.default.w(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+f+", dataSize = "+n);break}var g=l.getUint32(f,!s);if(3===d&&(g>>>=8),n-d<g)return void E.default.w(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var m=31&l.getUint8(f+d);5==m&&(p=!0);var y=new Uint8Array(e,t+f,d+g);u.push({type:m,data:y}),c+=y.byteLength,f+=d+g}u.length&&(o=this._videoTrack,a={units:u,length:c,isKeyframe:p,dts:h,cts:a,pts:h+a},p&&(a.fileposition=i),o.samples.push(a),o.length+=c)}},{key:"onTrackMetadata",get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e}},{key:"onMediaInfo",get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e}},{key:"onMetaDataArrived",get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e}},{key:"onScriptDataArrived",get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e}},{key:"onError",get:function(){return this._onError},set:function(e){this._onError=e}},{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}},{key:"timestampBase",get:function(){return this._timestampBase},set:function(e){this._timestampBase=e}},{key:"overridedDuration",get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e}},{key:"overridedHasAudio",set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e}},{key:"overridedHasVideo",set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e}}],[{key:"probe",value:function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var r=(4&t[4])>>>2!=0,e=0!=(1&t[4]),t=t[5]<<24|t[6]<<16|t[7]<<8|t[8];return t<9?n:{match:!0,consumed:t,dataOffset:t,hasAudioTrack:r,hasVideoTrack:e}}}]),d);function d(e,t){(function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")})(this),this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(e=new ArrayBuffer(2),new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0])}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../core/media-info.js":7,"../utils/exception.js":40,"../utils/logger.js":41,"./amf-parser.js":15,"./demux-errors.js":16,"./sps-parser.js":19}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e},C=(e=e("./exp-golomb.js"))&&e.__esModule?e:{default:e},r=(r(R,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),i=0,o=0;o<n;o++)2<=o&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(r[i]=t[o],i++);return new Uint8Array(r.buffer,0,i)}},{key:"parseSPS",value:function(e){var t=R._ebsp2rbsp(e),n=new C.default(t);n.readByte();var r=n.readByte();n.readByte();var i=n.readByte();n.readUEG();var o=R.getProfileString(r),a=R.getLevelString(i),s=1,l=420,u=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(3===(s=n.readUEG())&&n.readBits(1),s<=3&&(l=[0,420,422,444][s]),u=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool()))for(var c=3!==s?8:12,f=0;f<c;f++)n.readBool()&&R._skipScalingList(n,f<6?16:64);n.readUEG();var d=n.readUEG();if(0===d)n.readUEG();else if(1===d){n.readBits(1),n.readSEG(),n.readSEG();for(var h=n.readUEG(),p=0;p<h;p++)n.readSEG()}var g=n.readUEG();n.readBits(1);var m=n.readUEG(),y=n.readUEG(),v=n.readBits(1);0===v&&n.readBits(1),n.readBits(1);var _=0,b=0,A=0,E=0;n.readBool()&&(_=n.readUEG(),b=n.readUEG(),A=n.readUEG(),E=n.readUEG());var w=1,e=1,t=0,i=!0,r=0,d=0;n.readBool()&&(n.readBool()&&(0<(S=n.readByte())&&S<16?(w=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][S-1],e=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][S-1]):255===S&&(w=n.readByte()<<8|n.readByte(),e=n.readByte()<<8|n.readByte())),n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()&&(T=n.readBits(32),k=n.readBits(32),i=n.readBool(),t=(r=k)/(d=2*T)));var S=1;1===w&&1===e||(S=w/e);var k=0,T=0,T=0===s?(k=1,2-v):(k=3===s?1:2,(1===s?2:1)*(2-v)),m=16*(m+1),v=16*(y+1)*(2-v);m-=(_+b)*k,v-=(A+E)*T;S=Math.ceil(m*S);return n.destroy(),n=null,{profile_string:o,level_string:a,bit_depth:u,ref_frames:g,chroma_format:l,chroma_format_string:R.getChromaFormatString(l),frame_rate:{fixed:i,fps:t,fps_den:d,fps_num:r},sar_ratio:{width:w,height:e},codec_size:{width:m,height:v},present_size:{width:S,height:v}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,r=8,i=0;i<t;i++)n=0===(r=0!==r?(n+e.readSEG()+256)%256:r)?n:r}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),R);function R(){!function(e){if(!(e instanceof R))throw new TypeError("Cannot call a class as a function")}(this)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{"./exp-golomb.js":17}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(e("./utils/polyfill.js")),a=r(e("./core/features.js")),s=e("./io/loader.js"),l=r(e("./player/flv-player.js")),u=r(e("./player/native-player.js")),c=r(e("./player/player-events.js")),f=e("./player/player-errors.js"),d=r(e("./utils/logging-control.js")),h=e("./utils/exception.js");o.default.install();o={createPlayer:function(e,t){if(null==e||"object"!==(void 0===e?"undefined":i(e)))throw new h.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!e.hasOwnProperty("type"))throw new h.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");return new("flv"!==e.type?u:l).default(e,t)},isSupported:function(){return a.default.supportMSEH264Playback()},getFeatureList:function(){return a.default.getFeatureList()}};o.BaseLoader=s.BaseLoader,o.LoaderStatus=s.LoaderStatus,o.LoaderErrors=s.LoaderErrors,o.Events=c.default,o.ErrorTypes=f.ErrorTypes,o.ErrorDetails=f.ErrorDetails,o.FlvPlayer=l.default,o.NativePlayer=u.default,o.LoggingControl=d.default,Object.defineProperty(o,"version",{enumerable:!0,get:function(){return"1.5.0"}}),n.default=o},{"./core/features.js":6,"./io/loader.js":24,"./player/flv-player.js":32,"./player/native-player.js":33,"./player/player-errors.js":34,"./player/player-events.js":35,"./utils/exception.js":40,"./utils/logging-control.js":42,"./utils/polyfill.js":43}],21:[function(e,t,n){"use strict";t.exports=e("./flv.js").default},{"./flv.js":20}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},o=(r(e("../utils/logger.js")),e("../utils/browser.js")),a=r(o),c=e("./loader.js"),f=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,c.BaseLoader),i(s,null,[{key:"isSupported",value:function(){try{var e=a.default.msedge&&15048<=a.default.version.minor,t=!a.default.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}}}]),i(s,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){t=Object.getPrototypeOf(t);return null===t?void 0:e(t,n,r)}if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(r):void 0}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){var n=this;this._dataSource=e,this._range=t;var r=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(r=e.redirectedURL);var i=this._seekHandler.getConfig(r,t),o=new self.Headers;if("object"===u(i.headers)){var a,s=i.headers;for(a in s)s.hasOwnProperty(a)&&o.append(a,s[a])}t={method:"GET",headers:o,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"===u(this._config.headers))for(var l in this._config.headers)o.append(l,this._config.headers[l]);!1===e.cors&&(t.mode="same-origin"),e.withCredentials&&(t.credentials="include"),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),this._status=c.LoaderStatus.kConnecting,self.fetch(i.url,t).then(function(e){if(n._requestAbort)return n._requestAbort=!1,void(n._status=c.LoaderStatus.kIdle);if(e.ok&&200<=e.status&&e.status<=299){e.url!==i.url&&n._onURLRedirect&&(t=n._seekHandler.removeURLParameters(e.url),n._onURLRedirect(t));var t=e.headers.get("Content-Length");return null!=t&&(n._contentLength=parseInt(t),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength)),n._pump.call(n,e.body.getReader())}if(n._status=c.LoaderStatus.kError,!n._onError)throw new f.RuntimeException("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(c.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}).catch(function(e){if(n._status=c.LoaderStatus.kError,!n._onError)throw e;n._onError(c.LoaderErrors.EXCEPTION,{code:-1,msg:e.message})})}},{key:"abort",value:function(){this._requestAbort=!0}},{key:"_pump",value:function(r){var i=this;return r.read().then(function(e){if(e.done)if(null!==i._contentLength&&i._receivedLength<i._contentLength){i._status=c.LoaderStatus.kError;var t=c.LoaderErrors.EARLY_EOF,n={code:-1,msg:"Fetch stream meet Early-EOF"};if(!i._onError)throw new f.RuntimeException(n.msg);i._onError(t,n)}else i._status=c.LoaderStatus.kComplete,i._onComplete&&i._onComplete(i._range.from,i._range.from+i._receivedLength-1);else{if(!0===i._requestAbort)return i._requestAbort=!1,i._status=c.LoaderStatus.kComplete,r.cancel();i._status=c.LoaderStatus.kBuffering;n=e.value.buffer,e=i._range.from+i._receivedLength;i._receivedLength+=n.byteLength,i._onDataArrival&&i._onDataArrival(n,e,i._receivedLength),i._pump(r)}}).catch(function(e){if(11!==e.code||!a.default.msedge){i._status=c.LoaderStatus.kError;var t=0,n=null,n=19!==e.code&&"network error"!==e.message||!(null===i._contentLength||null!==i._contentLength&&i._receivedLength<i._contentLength)?(t=c.LoaderErrors.EXCEPTION,{code:e.code,msg:e.message}):(t=c.LoaderErrors.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!i._onError)throw new f.RuntimeException(n.msg);i._onError(t,n)}})}}]),s);function s(e,t){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,"fetch-stream-loader"));return n.TAG="FetchStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],23:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e},o=r(e("../utils/logger.js")),a=r(e("./speed-sampler.js")),s=e("./loader.js"),l=r(e("./fetch-stream-loader.js")),u=r(e("./xhr-moz-chunked-loader.js")),c=(r(e("./xhr-msstream-loader.js")),e("./xhr-range-loader.js")),f=r(c),d=r(e("./websocket-loader.js")),h=r(e("./range-seek-handler.js")),p=r(e("./param-seek-handler.js")),g=e("../utils/exception.js"),i=(i(m,[{key:"destroy",value:function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}},{key:"isWorking",value:function(){return this._loader&&this._loader.isWorking()&&!this._paused}},{key:"isPaused",value:function(){return this._paused}},{key:"_selectSeekHandler",value:function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new h.default(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new p.default(t,n)}else{if("custom"!==e.seekType)throw new g.InvalidArgumentException("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new g.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}}},{key:"_selectLoader",value:function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=d.default;else if(l.default.isSupported())this._loaderClass=l.default;else if(u.default.isSupported())this._loaderClass=u.default;else{if(!f.default.isSupported())throw new g.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=f.default}}},{key:"_createLoader",value:function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)}},{key:"open",value:function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))}},{key:"abort",value:function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}},{key:"pause",value:function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}},{key:"resume",value:function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))}},{key:"seek",value:function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)}},{key:"_internalSeek",value:function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;e={from:e,to:-1};this._currentRange={from:e.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,e),this._onSeeked&&this._onSeeked()}},{key:"updateUrl",value:function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=e}},{key:"_expandBuffer",value:function(e){for(var t,n,r=this._stashSize;r+1048576<e;)r*=2;(r+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(r),0<this._stashUsed&&(n=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,r).set(n,0)),this._stashBuffer=t,this._bufferSize=r)}},{key:"_normalizeSpeed",value:function(e){var t,n=this._speedNormalizeList,r=n.length-1,i=0,o=r;if(e<n[0])return n[0];for(;i<=o;){if((t=i+Math.floor((o-i)/2))===r||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?i=t+1:o=t-1}}},{key:"_adjustStashSize",value:function(e){var t=0,e=1024*(t=8192<(t=this._config.isLive||e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576;this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t}},{key:"_dispatchChunks",value:function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)}},{key:"_onURLRedirect",value:function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)}},{key:"_onContentLengthKnown",value:function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)}},{key:"_onLoaderChunkArrival",value:function(e,t,n){if(!this._onDataArrival)throw new g.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");var r,i,o,a,s;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength),0!==(r=this._speedSampler.lastSecondKBps)&&(i=this._normalizeSpeed(r),this._speedNormalized!==i&&(this._speedNormalized=i,this._adjustStashSize(i))),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?(new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(r=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(i=this._stashBuffer.slice(0,this._stashUsed),(o=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?0<o&&(i=new Uint8Array(i,o),r.set(i,0),this._stashUsed=i.byteLength,this._stashByteStart+=o):(this._stashUsed=0,this._stashByteStart+=o),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),r=new Uint8Array(this._stashBuffer,0,this._bufferSize)),r.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=this._dispatchChunks(e,t))<e.byteLength&&((o=e.byteLength-a)>this._bufferSize&&(this._expandBuffer(o),r=new Uint8Array(this._stashBuffer,0,this._bufferSize)),r.set(new Uint8Array(e,a),0),this._stashUsed+=o,this._stashByteStart=t+a))):0===this._stashUsed?(s=this._dispatchChunks(e,t))<e.byteLength&&((a=e.byteLength-s)>this._bufferSize&&this._expandBuffer(a),new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(e,s),0),this._stashUsed+=a,this._stashByteStart=t+s):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(t=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(s=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<s&&(e=new Uint8Array(this._stashBuffer,s),t.set(e,0)),this._stashUsed-=s,this._stashByteStart+=s))}},{key:"_flushStashBuffer",value:function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),r=t.byteLength-n;if(n<t.byteLength){if(!e)return 0<n&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,n),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=n),0;o.default.w(this.TAG,r+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,r}return 0}},{key:"_onLoaderComplete",value:function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}},{key:"_onLoaderError",value:function(e,t){switch(o.default.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=s.LoaderErrors.UNRECOVERABLE_EARLY_EOF),e){case s.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var n=this._currentRange.to+1;return void(n<this._totalLength&&(o.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)))}e=s.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case s.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case s.LoaderErrors.CONNECTING_TIMEOUT:case s.LoaderErrors.HTTP_STATUS_CODE_INVALID:case s.LoaderErrors.EXCEPTION:}if(!this._onError)throw new g.RuntimeException("IOException: "+t.msg);this._onError(e,t)}},{key:"status",get:function(){return this._loader.status}},{key:"extraData",get:function(){return this._extraData},set:function(e){this._extraData=e}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e}},{key:"onSeeked",get:function(){return this._onSeeked},set:function(e){this._onSeeked=e}},{key:"onError",get:function(){return this._onError},set:function(e){this._onError=e}},{key:"onComplete",get:function(){return this._onComplete},set:function(e){this._onComplete=e}},{key:"onRedirect",get:function(){return this._onRedirect},set:function(e){this._onRedirect=e}},{key:"onRecoveredEarlyEof",get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e}},{key:"currentURL",get:function(){return this._dataSource.url}},{key:"hasRedirect",get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL}},{key:"currentRedirectedURL",get:function(){return this._redirectedURL||this._dataSource.redirectedURL}},{key:"currentSpeed",get:function(){return this._loaderClass===f.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps}},{key:"loaderType",get:function(){return this._loader.type}}]),m);function m(e,t,n){(function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")})(this),this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=393216,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new a.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./fetch-stream-loader.js":22,"./loader.js":24,"./param-seek-handler.js":25,"./range-seek-handler.js":26,"./speed-sampler.js":27,"./websocket-loader.js":28,"./xhr-moz-chunked-loader.js":29,"./xhr-msstream-loader.js":30,"./xhr-range-loader.js":31}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BaseLoader=n.LoaderErrors=n.LoaderStatus=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},i=e("../utils/exception.js"),o=n.LoaderStatus={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){(function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")})(this),this._type=e||"undefined",this._status=o.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}n.LoaderErrors={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},n.BaseLoader=(r(s,[{key:"destroy",value:function(){this._status=o.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},{key:"isWorking",value:function(){return this._status===o.kConnecting||this._status===o.kBuffering}},{key:"open",value:function(e,t){throw new i.NotImplementedException("Unimplemented abstract function!")}},{key:"abort",value:function(){throw new i.NotImplementedException("Unimplemented abstract function!")}},{key:"type",get:function(){return this._type}},{key:"status",get:function(){return this._status}},{key:"needStashBuffer",get:function(){return this._needStash}},{key:"onContentLengthKnown",get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e}},{key:"onURLRedirect",get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e}},{key:"onError",get:function(){return this._onError},set:function(e){this._onError=e}},{key:"onComplete",get:function(){return this._onComplete},set:function(e){this._onComplete=e}}]),s)},{"../utils/exception.js":40}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(i,[{key:"getConfig",value:function(e,t){var n=e;return 0===t.from&&-1===t.to||(e=!0,-1===n.indexOf("?")&&(n+="?",e=!1),e&&(n+="&"),n+=this._startName+"="+t.from.toString(),-1!==t.to&&(n+="&"+this._endName+"="+t.to.toString())),{url:n,headers:{}}}},{key:"removeURLParameters",value:function(e){var t=e.split("?")[0],n=void 0,r=e.indexOf("?"),i="";if(null!=(n=-1!==r?e.substring(r+1):n)&&0<n.length)for(var o=n.split("&"),a=0;a<o.length;a++){var s=o[a].split("=");s[0]!==this._startName&&s[0]!==this._endName&&(0<a&&(i+="&"),i+=o[a])}return 0===i.length?t:t+"?"+i}}]),i);function i(e,t){(function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this),this._startName=e,this._endName=t}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(i,[{key:"getConfig",value:function(e,t){var n={};return 0!==t.from||-1!==t.to?(t=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",n.Range=t):this._zeroStart&&(n.Range="bytes=0-"),{url:e,headers:n}}},{key:"removeURLParameters",value:function(e){return e}}]),i);function i(e){(function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this),this._zeroStart=e||!1}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(i,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0}},{key:"averageKBps",get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024}}]),i);function i(){(function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},o=((r=e("../utils/logger.js"))&&r.__esModule,e("./loader.js")),a=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,o.BaseLoader),i(s,null,[{key:"isSupported",value:function(){try{return void 0!==self.WebSocket}catch(e){return!1}}}]),i(s,[{key:"destroy",value:function(){this._ws&&this.abort(),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){t=Object.getPrototypeOf(t);return null===t?void 0:e(t,n,r)}if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(r):void 0}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"open",value:function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=o.LoaderStatus.kConnecting}catch(e){this._status=o.LoaderStatus.kError;t={code:e.code,msg:e.message};if(!this._onError)throw new a.RuntimeException(t.msg);this._onError(o.LoaderErrors.EXCEPTION,t)}}},{key:"abort",value:function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=o.LoaderStatus.kComplete}},{key:"_onWebSocketOpen",value:function(e){this._status=o.LoaderStatus.kBuffering}},{key:"_onWebSocketClose",value:function(e){!0!==this._requestAbort?(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1}},{key:"_onWebSocketMessage",value:function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{this._status=o.LoaderStatus.kError;e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new a.RuntimeException(e.msg);this._onError(o.LoaderErrors.EXCEPTION,e)}}},{key:"_dispatchArrayBuffer",value:function(e){var t=e,e=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength)}},{key:"_onWebSocketError",value:function(e){this._status=o.LoaderStatus.kError;e={code:e.code,msg:e.message};if(!this._onError)throw new a.RuntimeException(e.msg);this._onError(o.LoaderErrors.EXCEPTION,e)}}]),s);function s(){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,"websocket-loader"));return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e},o=(r=e("../utils/logger.js"))&&r.__esModule?r:{default:r},u=e("./loader.js"),a=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,u.BaseLoader),i(s,null,[{key:"isSupported",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return o.default.w("MozChunkedLoader",e.message),!1}}}]),i(s,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){t=Object.getPrototypeOf(t);return null===t?void 0:e(t,n,r)}if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(r):void 0}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){this._dataSource=e,this._range=t;var n=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL);t=this._seekHandler.getConfig(n,t);this._requestURL=t.url;var r=this._xhr=new XMLHttpRequest;if(r.open("GET",t.url,!0),r.responseType="moz-chunked-arraybuffer",r.onreadystatechange=this._onReadyStateChange.bind(this),r.onprogress=this._onProgress.bind(this),r.onloadend=this._onLoadEnd.bind(this),r.onerror=this._onXhrError.bind(this),e.withCredentials&&(r.withCredentials=!0),"object"===l(t.headers)){var i,o=t.headers;for(i in o)o.hasOwnProperty(i)&&r.setRequestHeader(i,o[i])}if("object"===l(this._config.headers)){var a,s=this._config.headers;for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a,s[a])}this._status=u.LoaderStatus.kConnecting,r.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=u.LoaderStatus.kComplete}},{key:"_onReadyStateChange",value:function(e){var t=e.target;if(2===t.readyState)if(null!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect&&(e=this._seekHandler.removeURLParameters(t.responseURL),this._onURLRedirect(e)),0!==t.status&&(t.status<200||299<t.status)){if(this._status=u.LoaderStatus.kError,!this._onError)throw new a.RuntimeException("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=u.LoaderStatus.kBuffering}},{key:"_onProgress",value:function(e){var t;this._status!==u.LoaderStatus.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength))}},{key:"_onLoadEnd",value:function(e){!0!==this._requestAbort?this._status!==u.LoaderStatus.kError&&(this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1}},{key:"_onXhrError",value:function(e){this._status=u.LoaderStatus.kError;var t=0,n=null,n=this._contentLength&&e.loaded<this._contentLength?(t=u.LoaderErrors.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=u.LoaderErrors.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new a.RuntimeException(n.msg);this._onError(t,n)}}]),s);function s(e,t){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,"xhr-moz-chunked-loader"));return n.TAG="MozChunkedLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e},o=(r=e("../utils/logger.js"))&&r.__esModule?r:{default:r},u=e("./loader.js"),a=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,u.BaseLoader),i(s,null,[{key:"isSupported",value:function(){try{if(void 0===self.MSStream||void 0===self.MSStreamReader)return!1;var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="ms-stream")===e.responseType}catch(e){return o.default.w("MSStreamLoader",e.message),!1}}}]),i(s,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){t=Object.getPrototypeOf(t);return null===t?void 0:e(t,n,r)}if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(r):void 0}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){this._internalOpen(e,t,!1)}},{key:"_internalOpen",value:function(e,t,n){this._dataSource=e,n?this._currentRange=t:this._totalRange=t;n=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL));n=this._seekHandler.getConfig(n,t);this._currentRequestURL=n.url;t=this._reader=new self.MSStreamReader;t.onprogress=this._msrOnProgress.bind(this),t.onload=this._msrOnLoad.bind(this),t.onerror=this._msrOnError.bind(this);var r=this._xhr=new XMLHttpRequest;if(r.open("GET",n.url,!0),r.responseType="ms-stream",r.onreadystatechange=this._xhrOnReadyStateChange.bind(this),r.onerror=this._xhrOnError.bind(this),e.withCredentials&&(r.withCredentials=!0),"object"===l(n.headers)){var i,o=n.headers;for(i in o)o.hasOwnProperty(i)&&r.setRequestHeader(i,o[i])}if("object"===l(this._config.headers)){var a,s=this._config.headers;for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a,s[a])}this._isReconnecting?this._isReconnecting=!1:this._status=u.LoaderStatus.kConnecting,r.send()}},{key:"abort",value:function(){this._internalAbort(),this._status=u.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)}},{key:"_xhrOnReadyStateChange",value:function(e){e=e.target;if(2===e.readyState)if(200<=e.status&&e.status<=299){this._status=u.LoaderStatus.kBuffering,null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect&&this._onURLRedirect(t)));var t=e.getResponseHeader("Content-Length");null==t||null!=this._contentLength||0<(t=parseInt(t))&&(this._contentLength=t,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}else{if(this._status=u.LoaderStatus.kError,!this._onError)throw new a.RuntimeException("MSStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else 3===e.readyState&&200<=e.status&&e.status<=299&&(this._status=u.LoaderStatus.kBuffering,e=e.response,this._reader.readAsArrayBuffer(e))}},{key:"_xhrOnError",value:function(e){this._status=u.LoaderStatus.kError;var t=u.LoaderErrors.EXCEPTION,e={code:-1,msg:e.constructor.name+" "+e.type};if(!this._onError)throw new a.RuntimeException(e.msg);this._onError(t,e)}},{key:"_msrOnProgress",value:function(e){var t,n=e.target.result;null!=n?(t=n.slice(this._lastTimeBufferSize),this._lastTimeBufferSize=n.byteLength,e=this._totalRange.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),n.byteLength>=this._bufferLimit&&(o.default.v(this.TAG,"MSStream buffer exceeded max size near "+(e+t.byteLength)+", reconnecting..."),this._doReconnectIfNeeded())):this._doReconnectIfNeeded()}},{key:"_doReconnectIfNeeded",value:function(){var e;(null==this._contentLength||this._receivedLength<this._contentLength)&&(this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort(),e={from:this._totalRange.from+this._receivedLength,to:-1},this._internalOpen(this._dataSource,e,!0))}},{key:"_msrOnLoad",value:function(e){this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)}},{key:"_msrOnError",value:function(e){this._status=u.LoaderStatus.kError;var t=0,n=null,n=this._contentLength&&this._receivedLength<this._contentLength?(t=u.LoaderErrors.EARLY_EOF,{code:-1,msg:"MSStream meet Early-Eof"}):(t=u.LoaderErrors.EARLY_EOF,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new a.RuntimeException(n.msg);this._onError(t,n)}}]),s);function s(e,t){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,"xhr-msstream-loader"));return n.TAG="MSStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._reader=null,n._totalRange=null,n._currentRange=null,n._currentRequestURL=null,n._currentRedirectedURL=null,n._contentLength=null,n._receivedLength=0,n._bufferLimit=16777216,n._lastTimeBufferSize=0,n._isReconnecting=!1,n}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],31:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e},o=r(e("../utils/logger.js")),a=r(e("./speed-sampler.js")),s=e("./loader.js"),u=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s.BaseLoader),i(c,null,[{key:"isSupported",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return o.default.w("RangeLoader",e.message),!1}}}]),i(c,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){t=Object.getPrototypeOf(t);return null===t?void 0:e(t,n,r)}if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(r):void 0}(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){this._dataSource=e,this._range=t,this._status=s.LoaderStatus.kConnecting;t=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(t=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||t?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}},{key:"_openSubRange",value:function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,e=t+e;null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)}},{key:"_internalOpen",value:function(e,t){this._lastTimeLoaded=0;var n=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL));t=this._seekHandler.getConfig(n,t);this._currentRequestURL=t.url;var r=this._xhr=new XMLHttpRequest;if(r.open("GET",t.url,!0),r.responseType="arraybuffer",r.onreadystatechange=this._onReadyStateChange.bind(this),r.onprogress=this._onProgress.bind(this),r.onload=this._onLoad.bind(this),r.onerror=this._onXhrError.bind(this),e.withCredentials&&(r.withCredentials=!0),"object"===l(t.headers)){var i,o=t.headers;for(i in o)o.hasOwnProperty(i)&&r.setRequestHeader(i,o[i])}if("object"===l(this._config.headers)){var a,s=this._config.headers;for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a,s[a])}r.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._internalAbort(),this._status=s.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}},{key:"_onReadyStateChange",value:function(e){var t=e.target;if(2===t.readyState)if(null!=t.responseURL&&(e=this._seekHandler.removeURLParameters(t.responseURL),t.responseURL!==this._currentRequestURL&&e!==this._currentRedirectedURL&&(this._currentRedirectedURL=e,this._onURLRedirect&&this._onURLRedirect(e))),200<=t.status&&t.status<=299)this._waitForTotalLength||(this._status=s.LoaderStatus.kBuffering);else{if(this._status=s.LoaderStatus.kError,!this._onError)throw new u.RuntimeException("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(s.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},{key:"_onProgress",value:function(e){if(this._status!==s.LoaderStatus.kError){if(null===this._contentLength){var t,n=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,n=this._totalLengthReceived=!0,t=e.total,this._internalAbort(),null!=t&0!==t&&(this._totalLength=t)),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,n)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}}},{key:"_normalizeSpeed",value:function(e){var t,n=this._chunkSizeKBList,r=n.length-1,i=0,o=r;if(e<n[0])return n[0];for(;i<=o;){if((t=i+Math.floor((o-i)/2))===r||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?i=t+1:o=t-1}}},{key:"_onLoad",value:function(e){var t,n;this._status!==s.LoaderStatus.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&3<=++this._zeroSpeedChunkCount?this._speedSampler.currentKBps:t)&&(n=this._normalizeSpeed(t),this._currentSpeedNormalized!==n&&(this._currentSpeedNormalized=n,this._currentChunkSizeKB=n)),t=e.target.response,n=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,e=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():e=!0,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength),e&&(this._status=s.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))))}},{key:"_onXhrError",value:function(e){this._status=s.LoaderStatus.kError;var t=0,n=null,n=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=s.LoaderErrors.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=s.LoaderErrors.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new u.RuntimeException(n.msg);this._onError(t,n)}},{key:"currentSpeed",get:function(){return this._speedSampler.lastSecondKBps}}]),c);function c(e,t){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,"xhr-range-loader"));return n.TAG="RangeLoader",n._seekHandler=e,n._config=t,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new a.default,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24,"./speed-sampler.js":27}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e},a=r(e("events")),s=r(e("../utils/logger.js")),l=r(e("../utils/browser.js")),u=r(e("./player-events.js")),c=r(e("../core/transmuxer.js")),f=r(e("../core/transmuxing-events.js")),d=r(e("../core/mse-controller.js")),h=r(e("../core/mse-events.js")),p=e("./player-errors.js"),g=e("../config.js"),m=e("../utils/exception.js"),o=(o(y,[{key:"destroy",value:function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){var n=this;e===u.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){n._emitter.emit(u.default.MEDIA_INFO,n.mediaInfo)}):e===u.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){n._emitter.emit(u.default.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"attachMediaElement",value:function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new d.default(this._config),this._msectl.on(h.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(h.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(h.default.SOURCE_OPEN,function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())}),this._msectl.on(h.default.ERROR,function(e){t._emitter.emit(u.default.ERROR,p.ErrorTypes.MEDIA_ERROR,p.ErrorDetails.MEDIA_MSE_ERROR,e)}),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}},{key:"load",value:function(){var r=this;if(!this._mediaElement)throw new m.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new m.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new c.default(this._mediaDataSource,this._config),this._transmuxer.on(f.default.INIT_SEGMENT,function(e,t){r._msectl.appendInitSegment(t)}),this._transmuxer.on(f.default.MEDIA_SEGMENT,function(e,t){var n;r._msectl.appendMediaSegment(t),r._config.lazyLoad&&!r._config.isLive&&(n=r._mediaElement.currentTime,t.info.endDts>=1e3*(n+r._config.lazyLoadMaxDuration)&&null==r._progressChecker&&(s.default.v(r.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),r._suspendTransmuxer()))}),this._transmuxer.on(f.default.LOADING_COMPLETE,function(){r._msectl.endOfStream(),r._emitter.emit(u.default.LOADING_COMPLETE)}),this._transmuxer.on(f.default.RECOVERED_EARLY_EOF,function(){r._emitter.emit(u.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(f.default.IO_ERROR,function(e,t){r._emitter.emit(u.default.ERROR,p.ErrorTypes.NETWORK_ERROR,e,t)}),this._transmuxer.on(f.default.DEMUX_ERROR,function(e,t){r._emitter.emit(u.default.ERROR,p.ErrorTypes.MEDIA_ERROR,e,{code:-1,msg:t})}),this._transmuxer.on(f.default.MEDIA_INFO,function(e){r._mediaInfo=e,r._emitter.emit(u.default.MEDIA_INFO,Object.assign({},e))}),this._transmuxer.on(f.default.METADATA_ARRIVED,function(e){r._emitter.emit(u.default.METADATA_ARRIVED,e)}),this._transmuxer.on(f.default.SCRIPTDATA_ARRIVED,function(e){r._emitter.emit(u.default.SCRIPTDATA_ARRIVED,e)}),this._transmuxer.on(f.default.STATISTICS_INFO,function(e){r._statisticsInfo=r._fillStatisticsInfo(e),r._emitter.emit(u.default.STATISTICS_INFO,Object.assign({},r._statisticsInfo))}),this._transmuxer.on(f.default.RECOMMEND_SEEKPOINT,function(e){r._mediaElement&&!r._config.accurateSeek&&(r._requestSetTime=!0,r._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()))}},{key:"unload",value:function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_fillStatisticsInfo",value:function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t,n=!0,r=0,i=0;return this._mediaElement.getVideoPlaybackQuality?(r=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):n=!1,n&&(e.decodedFrames=r,e.droppedFrames=i),e}},{key:"_onmseUpdateEnd",value:function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,n=0,r=0;r<e.length;r++){var i=e.start(r),o=e.end(r);if(i<=t&&t<o){n=o;break}}n>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(s.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}},{key:"_onmseBufferFull",value:function(){s.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}},{key:"_suspendTransmuxer",value:function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}},{key:"_checkProgressAndResume",value:function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,r=0;r<t.length;r++){var i=t.start(r),o=t.end(r);if(i<=e&&e<o){e>=o-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n&&(s.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))}},{key:"_isTimepointBuffered",value:function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(r<=e&&e<i)return!0}return!1}},{key:"_internalSeek",value:function(e){var t,n=this._isTimepointBuffered(e),r=!1,i=0;e<1&&0<this._mediaElement.buffered.length&&(((t=this._mediaElement.buffered.start(0))<1&&e<t||l.default.safari)&&(r=!0,i=l.default.safari?.1:t)),r?(this._requestSetTime=!0,this._mediaElement.currentTime=i):n?(this._alwaysSeekKeyframe?(n=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=n?n.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}},{key:"_checkAndApplyUnbufferedSeekpoint",value:function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},{key:"_checkAndResumeStuckPlayback",value:function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(s.default.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+e.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)}},{key:"_onvLoadedMetadata",value:function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)}},{key:"_onvSeeking",value:function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<n.length){var r=n.start(0);if(r<1&&t<r||l.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=l.default.safari?.1:r)}this._isTimepointBuffered(t)?(!this._alwaysSeekKeyframe||null!=(r=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=r.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}}},{key:"_onvCanPlay",value:function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)}},{key:"_onvStalled",value:function(e){this._checkAndResumeStuckPlayback(!0)}},{key:"_onvProgress",value:function(e){this._checkAndResumeStuckPlayback()}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e}},{key:"mediaInfo",get:function(){return Object.assign({},this._mediaInfo)}},{key:"statisticsInfo",get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}}]),y);function y(e,t){if(function(e){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new a.default,this._config=(0,g.createDefaultConfig)(),"object"===(void 0===t?"undefined":i(t))&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new m.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;e=l.default.chrome&&(l.default.version.major<50||50===l.default.version.major&&l.default.version.build<2661);this._alwaysSeekKeyframe=!!(e||l.default.msedge||l.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=o},{"../config.js":5,"../core/mse-controller.js":9,"../core/mse-events.js":10,"../core/transmuxer.js":11,"../core/transmuxing-events.js":13,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./player-errors.js":34,"./player-events.js":35,events:2}],33:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e},a=r(e("events")),s=r(e("./player-events.js")),l=e("../config.js"),u=e("../utils/exception.js"),o=(o(c,[{key:"destroy",value:function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){var n=this;e===s.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(s.default.MEDIA_INFO,n.mediaInfo)}):e===s.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(s.default.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"attachMediaElement",value:function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"load",value:function(){if(!this._mediaElement)throw new u.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}},{key:"unload",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_onvLoadedMetadata",value:function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(s.default.MEDIA_INFO,this.mediaInfo)}},{key:"_reportStatisticsInfo",value:function(){this._emitter.emit(s.default.STATISTICS_INFO,this.statisticsInfo)}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e}},{key:"mediaInfo",get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e}},{key:"statisticsInfo",get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t,n=!0,r=0,i=0;return this._mediaElement.getVideoPlaybackQuality?(r=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):n=!1,n&&(e.decodedFrames=r,e.droppedFrames=i),e}}]),c);function c(e,t){if(function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new a.default,this._config=(0,l.createDefaultConfig)(),"object"===(void 0===t?"undefined":i(t))&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new u.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new u.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=o},{"../config.js":5,"../utils/exception.js":40,"./player-events.js":35,events:2}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorDetails=n.ErrorTypes=void 0;var r=e("../io/loader.js"),e=(e=e("../demux/demux-errors.js"))&&e.__esModule?e:{default:e};n.ErrorTypes={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},n.ErrorDetails={NETWORK_EXCEPTION:r.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:r.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:r.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:r.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:e.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:e.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:e.default.CODEC_UNSUPPORTED}},{"../demux/demux-errors.js":16,"../io/loader.js":24}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"}},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(i,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=r},{}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(c,null,[{key:"init",value:function(){for(var e in c.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]})c.types.hasOwnProperty(e)&&(c.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=c.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(e){for(var t=8,n=null,r=Array.prototype.slice.call(arguments,1),i=r.length,o=0;o<i;o++)t+=r[o].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var a=8,s=0;s<i;s++)n.set(r[s],a),a+=r[s].byteLength;return n}},{key:"generateInitSegment",value:function(e){var t=c.box(c.types.ftyp,c.constants.FTYP),n=c.moov(e),e=new Uint8Array(t.byteLength+n.byteLength);return e.set(t,0),e.set(n,t.byteLength),e}},{key:"moov",value:function(e){var t=c.mvhd(e.timescale,e.duration),n=c.trak(e),e=c.mvex(e);return c.box(c.types.moov,t,n,e)}},{key:"mvhd",value:function(e,t){return c.box(c.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(e){return c.box(c.types.trak,c.tkhd(e),c.mdia(e))}},{key:"tkhd",value:function(e){var t=e.id,n=e.duration,r=e.presentWidth,e=e.presentHeight;return c.box(c.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,e>>>8&255,255&e,0,0]))}},{key:"mdia",value:function(e){return c.box(c.types.mdia,c.mdhd(e),c.hdlr(e),c.minf(e))}},{key:"mdhd",value:function(e){var t=e.timescale,e=e.duration;return c.box(c.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))}},{key:"hdlr",value:function(e){e="audio"===e.type?c.constants.HDLR_AUDIO:c.constants.HDLR_VIDEO;return c.box(c.types.hdlr,e)}},{key:"minf",value:function(e){var t="audio"===e.type?c.box(c.types.smhd,c.constants.SMHD):c.box(c.types.vmhd,c.constants.VMHD);return c.box(c.types.minf,t,c.dinf(),c.stbl(e))}},{key:"dinf",value:function(){return c.box(c.types.dinf,c.box(c.types.dref,c.constants.DREF))}},{key:"stbl",value:function(e){return c.box(c.types.stbl,c.stsd(e),c.box(c.types.stts,c.constants.STTS),c.box(c.types.stsc,c.constants.STSC),c.box(c.types.stsz,c.constants.STSZ),c.box(c.types.stco,c.constants.STCO))}},{key:"stsd",value:function(e){return"audio"===e.type?"mp3"===e.codec?c.box(c.types.stsd,c.constants.STSD_PREFIX,c.mp3(e)):c.box(c.types.stsd,c.constants.STSD_PREFIX,c.mp4a(e)):c.box(c.types.stsd,c.constants.STSD_PREFIX,c.avc1(e))}},{key:"mp3",value:function(e){var t=e.channelCount,e=e.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]);return c.box(c.types[".mp3"],e)}},{key:"mp4a",value:function(e){var t=e.channelCount,n=e.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return c.box(c.types.mp4a,n,c.esds(e))}},{key:"esds",value:function(e){var t=e.config||[],e=t.length,t=new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t).concat([6,1,2]));return c.box(c.types.esds,t)}},{key:"avc1",value:function(e){var t=e.avcc,n=e.codecWidth,e=e.codecHeight,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return c.box(c.types.avc1,e,c.box(c.types.avcC,t))}},{key:"mvex",value:function(e){return c.box(c.types.mvex,c.trex(e))}},{key:"trex",value:function(e){e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return c.box(c.types.trex,e)}},{key:"moof",value:function(e,t){return c.box(c.types.moof,c.mfhd(e.sequenceNumber),c.traf(e,t))}},{key:"mfhd",value:function(e){e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return c.box(c.types.mfhd,e)}},{key:"traf",value:function(e,t){var n=e.id,r=c.box(c.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),n=c.box(c.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),t=c.sdtp(e),e=c.trun(e,t.byteLength+16+16+8+16+8+8);return c.box(c.types.traf,r,n,e,t)}},{key:"sdtp",value:function(e){for(var t=e.samples||[],n=t.length,r=new Uint8Array(4+n),i=0;i<n;i++){var o=t[i].flags;r[i+4]=o.isLeading<<6|o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy}return c.box(c.types.sdtp,r)}},{key:"trun",value:function(e,t){var n=e.samples||[],r=n.length,e=12+16*r,i=new Uint8Array(e);i.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var o=0;o<r;o++){var a=n[o].duration,s=n[o].size,l=n[o].flags,u=n[o].cts;i.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*o)}return c.box(c.types.trun,i)}},{key:"mdat",value:function(e){return c.box(c.types.mdat,e)}}]),c);function c(){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.init(),n.default=r},{}],38:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e},M=r(e("../utils/logger.js")),j=r(e("./mp4-generator.js")),F=r(e("./aac-silent.js")),N=r(e("../utils/browser.js")),U=e("../core/media-segment-info.js"),o=e("../utils/exception.js"),i=(i(a,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(e,t){if(!this._onMediaSegment)throw new o.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}},{key:"_onTrackMetadataReceived",value:function(e,t){var n=null,r="mp4",i=t.codec;if("audio"===e)n="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(r="mpeg",i="",new Uint8Array):j.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=j.default.generateInitSegment(t)}if(!this._onInitSegment)throw new o.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:i,container:e+"/"+r,mediaDuration:t.duration})}},{key:"_calculateDtsBase",value:function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"flushStashedSamples",value:function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(n.samples.push(e),n.length=e.length);e={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(e,!0)}},{key:"_remuxAudio",value:function(e,t){if(null!=this._audioMeta){var n=e,r=n.samples,i=void 0,o=-1,a=this._audioMeta.refSampleDuration,s="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,l=this._dtsBaseInited&&void 0===this._audioNextDts,e=!1;if(r&&0!==r.length&&(1!==r.length||t)){var u=0,c=null,f=0,f=s?(u=0,n.length):(u=8)+n.length,d=null;1<r.length&&(f-=(d=r.pop()).length),null!=this._audioStashedLastSample&&(g=this._audioStashedLastSample,this._audioStashedLastSample=null,r.unshift(g),f+=g.length),null!=d&&(this._audioStashedLastSample=d);var h,p,g=r[0].dts-this._dtsBase;this._audioNextDts?i=g-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(i=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(e=!0)):i=null!=(h=this._audioSegmentInfoList.getLastSampleBefore(g))?(p=g-(h.originalDts+h.duration),g-(h.dts+h.duration+(p=p<=3?0:p))):0,e&&(h=g-i,null!=(p=this._videoSegmentInfoList.getLastSegmentBefore(g))&&p.beginDts<h?(P=F.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(g=p.beginDts,p=h-p.beginDts,M.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+g+", duration: "+p),r.unshift({unit:P,dts:g,pts:g}),f+=P.byteLength):e=!1);for(var m=[],y=0;y<r.length;y++){var v=r[y],_=v.unit,b=v.dts-this._dtsBase,A=b-i;-1===o&&(o=A);var E=0,w=!1,S=null;if(1.5*a<(E=y!==r.length-1?r[y+1].dts-this._dtsBase-i-A:null!=d?d.dts-this._dtsBase-i-A:1<=m.length?m[m.length-1].duration:Math.floor(a))&&"mp3"!==this._audioMeta.codec&&this._fillAudioTimestampGap&&!N.default.safari){var w=!0,k=Math.abs(E-a),T=Math.ceil(k/a),C=A+a;M.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\ndts: "+(A+E)+" ms, expected: "+(A+Math.round(a))+" ms, delta: "+Math.round(k)+" ms, generate: "+T+" frames");var R=F.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==R&&(M.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),R=_);for(var S=[],x=0;x<T;x++){var O,L=Math.round(C);0<S.length&&((O=S[S.length-1]).duration=L-O.dts);L={dts:L,pts:L,cts:0,unit:R,size:R.byteLength,duration:0,originalDts:b,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};S.push(L),f+=L.size,C+=a}_=S[S.length-1];_.duration=A+E-_.dts,E=Math.round(a)}m.push({dts:A,pts:A,cts:0,unit:v.unit,size:v.unit.byteLength,duration:E,originalDts:b,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),w&&m.push.apply(m,S)}s?c=new Uint8Array(f):((c=new Uint8Array(f))[0]=f>>>24&255,c[1]=f>>>16&255,c[2]=f>>>8&255,c[3]=255&f,c.set(j.default.types.mdat,4));for(var I=0;I<m.length;I++){var D=m[I].unit;c.set(D,u),u+=D.byteLength}var P=m[m.length-1],B=P.dts+P.duration;this._audioNextDts=B;e=new U.MediaSegmentInfo;e.beginDts=o,e.endDts=B,e.beginPts=o,e.endPts=B,e.originalBeginDts=m[0].originalDts,e.originalEndDts=P.originalDts+P.duration,e.firstSample=new U.SampleInfo(m[0].dts,m[0].pts,m[0].duration,m[0].originalDts,!1),e.lastSample=new U.SampleInfo(P.dts,P.pts,P.duration,P.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(e),n.samples=m,n.sequenceNumber++,P=s?new Uint8Array:j.default.moof(n,o),n.samples=[],n.length=0;e={type:"audio",data:this._mergeBoxes(P,c).buffer,sampleCount:m.length,info:e};s&&l&&(e.timestampOffset=o),this._onMediaSegment("audio",e)}}}},{key:"_remuxVideo",value:function(e,t){if(null!=this._videoMeta){var n=e,r=n.samples,i=void 0,o=-1,a=-1;if(r&&0!==r.length&&(1!==r.length||t)){var s=8,l=null,t=8+e.length,u=null;1<r.length&&(t-=(u=r.pop()).length),null!=this._videoStashedLastSample&&(f=this._videoStashedLastSample,this._videoStashedLastSample=null,r.unshift(f),t+=f.length),null!=u&&(this._videoStashedLastSample=u);var c,f,e=r[0].dts-this._dtsBase;i=this._videoNextDts?e-this._videoNextDts:!this._videoSegmentInfoList.isEmpty()&&null!=(c=this._videoSegmentInfoList.getLastSampleBefore(e))?(f=e-(c.originalDts+c.duration),e-(c.dts+c.duration+(f=f<=3?0:f))):0;for(var d=new U.MediaSegmentInfo,h=[],p=0;p<r.length;p++){var g=r[p],m=g.dts-this._dtsBase,y=g.isKeyframe,v=m-i,_=g.cts,b=v+_;-1===o&&(o=v,a=b);var A,E=p!==r.length-1?r[p+1].dts-this._dtsBase-i-v:null!=u?u.dts-this._dtsBase-i-v:1<=h.length?h[h.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);y&&((A=new U.SampleInfo(v,b,E,g.dts,!0)).fileposition=g.fileposition,d.appendSyncPoint(A)),h.push({dts:v,pts:b,cts:_,units:g.units,size:g.length,isKeyframe:y,duration:E,originalDts:m,flags:{isLeading:0,dependsOn:y?2:1,isDependedOn:y?1:0,hasRedundancy:0,isNonSync:y?0:1}})}(l=new Uint8Array(t))[0]=t>>>24&255,l[1]=t>>>16&255,l[2]=t>>>8&255,l[3]=255&t,l.set(j.default.types.mdat,4);for(var w=0;w<h.length;w++)for(var S=h[w].units;S.length;){var k=S.shift().data;l.set(k,s),s+=k.byteLength}var t=h[h.length-1],T=t.dts+t.duration,C=t.pts+t.duration;this._videoNextDts=T,d.beginDts=o,d.endDts=T,d.beginPts=a,d.endPts=C,d.originalBeginDts=h[0].originalDts,d.originalEndDts=t.originalDts+t.duration,d.firstSample=new U.SampleInfo(h[0].dts,h[0].pts,h[0].duration,h[0].originalDts,h[0].isKeyframe),d.lastSample=new U.SampleInfo(t.dts,t.pts,t.duration,t.originalDts,t.isKeyframe),this._isLive||this._videoSegmentInfoList.append(d),n.samples=h,n.sequenceNumber++,this._forceFirstIDR&&((R=h[0].flags).dependsOn=2,R.isNonSync=0);var R=j.default.moof(n,o);n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(R,l).buffer,sampleCount:h.length,info:d})}}}},{key:"_mergeBoxes",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e}}]),a);function a(e){(function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")})(this),this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new U.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new U.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!N.default.chrome||!(N.default.version.major<50||50===N.default.version.major&&N.default.version.build<2661)),this._fillSilentAfterSeek=N.default.msedge||N.default.msie,this._mp3UseMpegAudio=!N.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.default=i},{"../core/media-segment-info.js":8,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./aac-silent.js":36,"./mp4-generator.js":37}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={};!function(){var e,t=self.navigator.userAgent.toLowerCase(),n=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0<=t.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(t)||[],r=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(android)/.exec(t)||/(windows)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[],t={browser:n[5]||n[3]||n[1]||"",version:n[2]||n[4]||"0",majorVersion:n[4]||n[2]||"0",platform:r[0]||""},n={};for(e in t.browser&&(n[t.browser]=!0,r=t.majorVersion.split("."),n.version={major:parseInt(t.majorVersion,10),string:t.version},1<r.length&&(n.version.minor=parseInt(r[1],10)),2<r.length&&(n.version.build=parseInt(r[2],10))),t.platform&&(n[t.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),(n.rv||n.iemobile)&&(n.rv&&delete n.rv,t.browser="msie",n.msie=!0),n.edge&&(delete n.edge,t.browser="msedge",n.msedge=!0),n.opr&&(t.browser="opera",n.opera=!0),n.safari&&n.android&&(t.browser="android",n.android=!0),n.name=t.browser,n.platform=t.platform,i)i.hasOwnProperty(e)&&delete i[e];Object.assign(i,n)}(),n.default=i},{}],40:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e},s=n.RuntimeException=(a(l,[{key:"toString",value:function(){return this.name+": "+this.message}},{key:"name",get:function(){return"RuntimeException"}},{key:"message",get:function(){return this._message}}]),l);function l(e){o(this,l),this._message=e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return o(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e))}function f(e){return o(this,f),r(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e))}function d(e){return o(this,d),r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e))}n.IllegalStateException=(i(d,s),a(d,[{key:"name",get:function(){return"IllegalStateException"}}]),d),n.InvalidArgumentException=(i(f,s),a(f,[{key:"name",get:function(){return"InvalidArgumentException"}}]),f),n.NotImplementedException=(i(c,s),a(c,[{key:"name",get:function(){return"NotImplementedException"}}]),c)},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},e=(e=e("events"))&&e.__esModule?e:{default:e},r=(r(i,null,[{key:"e",value:function(e,t){t="["+(e=!e||i.FORCE_GLOBAL_TAG?i.GLOBAL_TAG:e)+"] > "+t;i.ENABLE_CALLBACK&&i.emitter.emit("log","error",t),i.ENABLE_ERROR&&(console.error?console.error(t):console.warn?console.warn(t):console.log(t))}},{key:"i",value:function(e,t){t="["+(e=!e||i.FORCE_GLOBAL_TAG?i.GLOBAL_TAG:e)+"] > "+t;i.ENABLE_CALLBACK&&i.emitter.emit("log","info",t),i.ENABLE_INFO&&(console.info?console.info(t):console.log(t))}},{key:"w",value:function(e,t){t="["+(e=!e||i.FORCE_GLOBAL_TAG?i.GLOBAL_TAG:e)+"] > "+t;i.ENABLE_CALLBACK&&i.emitter.emit("log","warn",t),i.ENABLE_WARN&&(console.warn?console.warn(t):console.log(t))}},{key:"d",value:function(e,t){t="["+(e=!e||i.FORCE_GLOBAL_TAG?i.GLOBAL_TAG:e)+"] > "+t;i.ENABLE_CALLBACK&&i.emitter.emit("log","debug",t),i.ENABLE_DEBUG&&(console.debug?console.debug(t):console.log(t))}},{key:"v",value:function(e,t){t="["+(e=!e||i.FORCE_GLOBAL_TAG?i.GLOBAL_TAG:e)+"] > "+t;i.ENABLE_CALLBACK&&i.emitter.emit("log","verbose",t),i.ENABLE_VERBOSE&&console.log(t)}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GLOBAL_TAG="flv.js",r.FORCE_GLOBAL_TAG=!1,r.ENABLE_ERROR=!0,r.ENABLE_INFO=!0,r.ENABLE_WARN=!0,r.ENABLE_DEBUG=!0,r.ENABLE_VERBOSE=!0,r.ENABLE_CALLBACK=!1,r.emitter=new e.default,n.default=r},{events:2}],42:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},o=r(e("events")),a=r(e("./logger.js")),i=(i(s,null,[{key:"getConfig",value:function(){return{globalTag:a.default.GLOBAL_TAG,forceGlobalTag:a.default.FORCE_GLOBAL_TAG,enableVerbose:a.default.ENABLE_VERBOSE,enableDebug:a.default.ENABLE_DEBUG,enableInfo:a.default.ENABLE_INFO,enableWarn:a.default.ENABLE_WARN,enableError:a.default.ENABLE_ERROR,enableCallback:a.default.ENABLE_CALLBACK}}},{key:"applyConfig",value:function(e){a.default.GLOBAL_TAG=e.globalTag,a.default.FORCE_GLOBAL_TAG=e.forceGlobalTag,a.default.ENABLE_VERBOSE=e.enableVerbose,a.default.ENABLE_DEBUG=e.enableDebug,a.default.ENABLE_INFO=e.enableInfo,a.default.ENABLE_WARN=e.enableWarn,a.default.ENABLE_ERROR=e.enableError,a.default.ENABLE_CALLBACK=e.enableCallback}},{key:"_notifyChange",value:function(){var e,t=s.emitter;0<t.listenerCount("change")&&(e=s.getConfig(),t.emit("change",e))}},{key:"registerListener",value:function(e){s.emitter.addListener("change",e)}},{key:"removeListener",value:function(e){s.emitter.removeListener("change",e)}},{key:"addLogListener",value:function(e){a.default.emitter.addListener("log",e),0<a.default.emitter.listenerCount("log")&&(a.default.ENABLE_CALLBACK=!0,s._notifyChange())}},{key:"removeLogListener",value:function(e){a.default.emitter.removeListener("log",e),0===a.default.emitter.listenerCount("log")&&(a.default.ENABLE_CALLBACK=!1,s._notifyChange())}},{key:"forceGlobalTag",get:function(){return a.default.FORCE_GLOBAL_TAG},set:function(e){a.default.FORCE_GLOBAL_TAG=e,s._notifyChange()}},{key:"globalTag",get:function(){return a.default.GLOBAL_TAG},set:function(e){a.default.GLOBAL_TAG=e,s._notifyChange()}},{key:"enableAll",get:function(){return a.default.ENABLE_VERBOSE&&a.default.ENABLE_DEBUG&&a.default.ENABLE_INFO&&a.default.ENABLE_WARN&&a.default.ENABLE_ERROR},set:function(e){a.default.ENABLE_VERBOSE=e,a.default.ENABLE_DEBUG=e,a.default.ENABLE_INFO=e,a.default.ENABLE_WARN=e,a.default.ENABLE_ERROR=e,s._notifyChange()}},{key:"enableDebug",get:function(){return a.default.ENABLE_DEBUG},set:function(e){a.default.ENABLE_DEBUG=e,s._notifyChange()}},{key:"enableVerbose",get:function(){return a.default.ENABLE_VERBOSE},set:function(e){a.default.ENABLE_VERBOSE=e,s._notifyChange()}},{key:"enableInfo",get:function(){return a.default.ENABLE_INFO},set:function(e){a.default.ENABLE_INFO=e,s._notifyChange()}},{key:"enableWarn",get:function(){return a.default.ENABLE_WARN},set:function(e){a.default.ENABLE_WARN=e,s._notifyChange()}},{key:"enableError",get:function(){return a.default.ENABLE_ERROR},set:function(e){a.default.ENABLE_ERROR=e,s._notifyChange()}}]),s);function s(){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i.emitter=new o.default,n.default=i},{"./logger.js":41,events:2}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(i,null,[{key:"install",value:function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},"function"!=typeof self.Promise&&e("es6-promise").polyfill()}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.install(),n.default=r},{"es6-promise":1}],44:[function(e,t,n){"use strict";function s(e,t,n){var r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return;return 1}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=[],n=e,r=0,i=e.length;r<i;)if(n[r]<128)t.push(String.fromCharCode(n[r])),++r;else{if(!(n[r]<192))if(n[r]<224){if(s(n,r,1)){var o=(31&n[r])<<6|63&n[r+1];if(128<=o){t.push(String.fromCharCode(65535&o)),r+=2;continue}}}else if(n[r]<240){if(s(n,r,2)){var a=(15&n[r])<<12|(63&n[r+1])<<6|63&n[r+2];if(2048<=a&&55296!=(63488&a)){t.push(String.fromCharCode(65535&a)),r+=3;continue}}}else if(n[r]<248&&s(n,r,3)){a=(7&n[r])<<18|(63&n[r+1])<<12|(63&n[r+2])<<6|63&n[r+3];if(65536<a&&a<1114112){a-=65536,t.push(String.fromCharCode(a>>>10|55296)),t.push(String.fromCharCode(1023&a|56320)),r+=4;continue}}t.push(String.fromCharCode(65533)),++r}return t.join("")}},{}]},{},[21])(21)}.call(this,n(11))},function(e,t,n){var r,i;void 0===(r="function"==typeof(r=i=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n,r=arguments[e];for(n in r)t[n]=r[n]}return t}function u(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(l){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var r=JSON.stringify(t);/^[\{\[]/.test(r)&&(t=r)}catch(e){}t=l.write?l.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i,o="";for(i in n)n[i]&&(o+="; "+i,!0!==n[i]&&(o+="="+n[i].split(";")[0]));return document.cookie=e+"="+t+o}}function t(e,t){if("undefined"!=typeof document){for(var n={},r=document.cookie?document.cookie.split("; "):[],i=0;i<r.length;i++){var o=r[i].split("="),a=o.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=u(o[0]),a=(l.read||l)(a,s)||u(a);if(t)try{a=JSON.parse(a)}catch(e){}if(n[s]=a,e===s)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",s(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})})?r.call(t,n,t,e):r)||(e.exports=r),e.exports=i()},function(e,t,n){"use strict";var r=n(42),i=n.n(r),r=n(43),i=n.n(r)()(i.a);i.push([e.i,"\r\n:-webkit-full-screen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:-moz-full-screen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:-ms-full-screen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:-ms-fullscreen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:fullscreen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n.player-container {\r\n    display: block;\r\n    box-sizing: border-box;\r\n    color: #ffffff;\r\n    background-color: #000;\r\n    position: relative;\r\n    padding: 0;\r\n    font-size: 0.8em;\r\n    line-height: 1;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    height: 20em;\r\n}\r\n\r\n.player-container .dhy-video {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.player-container .dhy-video-fit {\r\n    object-position: 'center top';\r\n    object-fit: 'contain';\r\n}\r\n\r\n.player-container .load-layer {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin: -25px 0 0 -25px;\r\n    opacity: 0.85;\r\n    text-align: left;\r\n    border: 6px solid rgba(43, 51, 63, 0.7);\r\n    box-sizing: border-box;\r\n    background-clip: padding-box;\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 25px;\r\n}\r\n\r\n.load-layer:before,\r\n.load-layer:after {\r\n    content: \"\";\r\n    position: absolute;\r\n    margin: -6px;\r\n    box-sizing: inherit;\r\n    width: inherit;\r\n    height: inherit;\r\n    border-radius: inherit;\r\n    opacity: 1;\r\n    border: inherit;\r\n    border-color: transparent;\r\n    border-top-color: white;\r\n}\r\n\r\n.load-layer:before,\r\n.load-layer:after {\r\n    -webkit-animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\r\n    animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\r\n}\r\n\r\n.load-layer:before {\r\n    border-top-color: rgb(255, 255, 255);\r\n}\r\n\r\n.load-layer:after {\r\n    border-top-color: rgb(255, 255, 255);\r\n    -webkit-animation-delay: 0.44s;\r\n    animation-delay: 0.44s;\r\n}\r\n\r\n@keyframes vjs-spinner-spin {\r\n    100% {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n@-webkit-keyframes vjs-spinner-spin {\r\n    100% {\r\n        -webkit-transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n@keyframes vjs-spinner-fade {\r\n    0% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    20% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    35% {\r\n        border-top-color: white;\r\n    }\r\n    60% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    100% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n}\r\n\r\n@-webkit-keyframes vjs-spinner-fade {\r\n    0% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    20% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    35% {\r\n        border-top-color: white;\r\n    }\r\n    60% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    100% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n}\r\n\r\nvideo::-webkit-media-controls-enclosure {\r\n    display: none !important;\r\n}\r\n\r\nvideo:-webkit-full-screen {\r\n    position: fixed !important;\r\n}\r\n\r\n.player-container .play-layer {\r\n    height: 4em;\r\n    width: 4em;\r\n    position: absolute;\r\n    margin: -25px 0 0 -25px;\r\n    padding: 0;\r\n    cursor: pointer;\r\n    opacity: 1;\r\n    z-index: 101;\r\n}\r\n\r\n.player-container .play-layer-center {\r\n    left: 50%;\r\n    top: 50%;\r\n}\r\n\r\n.player-container .play-layer-leftTop {\r\n    left: 3rem;\r\n    top: 20%;\r\n}\r\n\r\n.player-container .play-layer-rightTop {\r\n    left: 94%;\r\n    top: 20%;\r\n}\r\n\r\n.player-container .play-layer-leftBottom {\r\n    left: 2rem;\r\n    bottom: 3rem;\r\n}\r\n\r\n.player-container .play-layer-rightBottom {\r\n    left: 94%;\r\n    bottom: 3rem;\r\n}\r\n\r\n.player-container .poster-layer {\r\n    vertical-align: middle;\r\n    background-repeat: no-repeat;\r\n    background-position: 50% 50%;\r\n    background-size: contain;\r\n    background-color: #000000;\r\n    cursor: pointer;\r\n    margin: 0;\r\n    padding: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    height: 100%;\r\n}\r\n\r\n.player-has-started .poster-layer {\r\n    display: none;\r\n  }\r\n\r\n.player-container .FullScreen>img {\r\n    width: 16px !important;\r\n}\r\n\r\n.player-container .quality-layer {\r\n    cursor: pointer;\r\n    right: 2em;\r\n    bottom: 3em;\r\n    position: absolute;\r\n    z-index: 101;\r\n    width: 60px;\r\n}\r\n\r\n.player-container .quality-layer .quality-item {\r\n    margin: 0px;\r\n    padding: 0px;\r\n    width: 3.0em;\r\n}\r\n\r\n.player-container .quality-layer .quality-item li {\r\n    list-style-type: none;\r\n    line-height: 1.5em;\r\n    background-color: rgba(43, 51, 63, 0.5);\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    min-width: 4em;\r\n    height: 2.0em;\r\n    line-height: 2.0em;\r\n}\r\n\r\n.li-active{\r\n    color: #007FFF;\r\n}\r\n\r\n.player-control-text {\r\n    border: 0;\r\n    clip: rect(0 0 0 0);\r\n    height: 1px;\r\n    margin: -1px;\r\n    overflow: hidden;\r\n    padding: 0;\r\n    position: absolute;\r\n    width: 1px;\r\n}\r\n\r\n.player-container .msg-layer {\r\n    position: absolute;\r\n    color: #e0e8f1;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    width: 100%;\r\n}\r\n\r\n.player-container .control-bar .playrate-select  {\r\n    cursor: pointer;\r\n}\r\n\r\n.player-container .playrate-layer {\r\n    right: 2em;\r\n    bottom: 3em;\r\n    position: absolute;\r\n    z-index: 101;\r\n    width: 60px;\r\n}\r\n\r\n.player-container .playrate-layer .playrate-item {\r\n    margin: 0px;\r\n    padding: 0px;\r\n    width: 3.0em;\r\n}\r\n\r\n.player-container .playrate-layer .playrate-item li {\r\n    list-style-type: none;\r\n    line-height: 1.5em;\r\n    background-color: rgba(43, 51, 63, 0.5);\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    min-width: 4em;\r\n    height: 2.0em;\r\n    line-height: 2.0em;\r\n}\r\n\r\n.player-container .logo-layer {\r\n    position: absolute;\r\n}\r\n\r\n.logo-layer>img {\r\n    max-width: 200px;\r\n    max-height: 150px;\r\n}\r\n\r\n.player-container .logo-layer-leftTop {\r\n    left: 0em;\r\n}\r\n\r\n.player-container .logo-layer-leftBottom {\r\n    bottom: 2em;\r\n}\r\n\r\n.player-container .logo-layer-rightTop {\r\n    right: 1em;\r\n}\r\n\r\n.player-container .logo-layer-rightBottom {\r\n    right: 1em;\r\n    bottom: 2em;\r\n}\r\n\r\n.player-container .control-bar {\r\n    display: -webkit-box;\r\n    display: -webkit-flex;\r\n    display: -ms-flexbox;\r\n    display: inline-block;\r\n    visibility: visible;\r\n    opacity: 1;\r\n    -webkit-transition: visibility 0.1s, opacity 0.1s;\r\n    -moz-transition: visibility 0.1s, opacity 0.1s;\r\n    -o-transition: visibility 0.1s, opacity 0.1s;\r\n    transition: visibility 0.1s, opacity 0.1s;\r\n    width: 100%;\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 3.0em;\r\n}\r\n\r\n.player-container>.default {\r\n    background-color: rgba(43, 51, 63, 0.5)\r\n}\r\n\r\n.player-container>.transparent {\r\n   background-color: #10101054;\r\n}\r\n\r\n.player-container .control-bar img {\r\n    max-width: 30px;\r\n    max-height: 30px;\r\n    width: 20px;\r\n    height: 20px;\r\n    margin: 0;\r\n}\r\n.watermark {\r\n    margin-top: 0.5em !important;\r\n}\r\n.watermark>img{\r\n    max-width: 100px !important;\r\n    width: 100px !important;\r\n    max-height: 28px !important;\r\n    height: 28px !important;\r\n}\r\n\r\n.player-container .control-bar-live {\r\n    display: block;\r\n}\r\n\r\n.player-container .inactive {\r\n    opacity: 0;\r\n}\r\n\r\n.player-container .PlayToggle {\r\n    float: left;\r\n}\r\n\r\n.player-container .transparent .btn-playing {\r\n    background: #272424b3;\r\n    height: 2.2em !important;\r\n    line-height: 2.2em !important;\r\n    margin: 0.5em 0 0 0 !important;\r\n    border-radius: 5px;\r\n    width: 40px;\r\n    padding-top: 0px;\r\n}\r\n\r\n.player-container .control-bar .btn-playing {\r\n    outline: none;\r\n    position: relative;\r\n    text-align: center;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 2.5em;\r\n    margin-left: 0.2em;\r\n    -webkit-box-flex: none;\r\n    -moz-box-flex: none;\r\n    -webkit-flex: none;\r\n    -ms-flex: none;\r\n    flex: none;\r\n    line-height: 3.0em;\r\n    float: left;\r\n}\r\n\r\n.player-container .control-bar .btn-playrate {\r\n    padding-top: 0px;\r\n}\r\n\r\n.player-container .control-bar .time-view,\r\n.quality-select {\r\n    outline: none;\r\n    position: relative;\r\n    text-align: center;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 3.0em;\r\n    margin: 0 0.5em 0 0.5em;\r\n    -webkit-box-flex: none;\r\n    -moz-box-flex: none;\r\n    -webkit-flex: none;\r\n    -ms-flex: none;\r\n    flex: none;\r\n    float: left;\r\n    line-height: 3.2em;\r\n    cursor: pointer;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container {\r\n    position: absolute;\r\n    height: 0.3em;\r\n    background-color: #ad9e9e;\r\n    width: 100%;\r\n    bottom: 3em;\r\n    margin: 0 1.0em 0 0em;\r\n    cursor: pointer;\r\n}\r\n\r\n\r\n\r\n.player-container .control-bar .control-buttons-container {\r\n    position: relative;\r\n    width: 100%;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container .control-slider-scrub {\r\n    position: relative;\r\n    width: 0.8em;\r\n    height: 0.8em;\r\n    bottom: 0.5em;\r\n    margin-left: -2px;\r\n    background-color: #007FFF;\r\n    border-radius: 50%;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container .control-slider-loaded {\r\n    height: 0.3em;\r\n    width: 0;\r\n    max-width: 100%;\r\n    background-color: #007FFF;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container .time-tooltip{\r\n    background-color:  #007FFF;\r\n    border-radius: 0.3em;\r\n    color: #fff;\r\n    float: right;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    font-size: 1em;\r\n    padding: 6px 8px 8px 8px;\r\n    pointer-events: none;\r\n    position: absolute;\r\n    top: -30px;\r\n    visibility: hidden;\r\n    z-index: 1;\r\n    height: 12.8px;\r\n    line-height: 15.8px\r\n}\r\n\r\n.player-container .control-bar .control-slider-container:hover{\r\n    height: 0.6em;\r\n}\r\n.player-container .control-bar .control-slider-container:hover .control-slider-loaded{\r\n    height: 0.6em;\r\n}\r\n.player-container .control-bar .control-slider-container:hover .control-slider-scrub{\r\n    bottom: 0.8em;\r\n    width: 1.0em;\r\n    height: 1.0em;\r\n}\r\n\r\n.time-tooltip-hover{\r\n    display: block !important;\r\n    visibility: visible !important;\r\n}\r\n\r\n.player-container .control-bar .compent {\r\n    position: relative;\r\n    margin: 0.8em 0.5em 0 0.5em;\r\n    -moz-background-size: 100% 100%;\r\n    background-size: 100% 100%;\r\n    flex: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.player-container .control-bar .component-blank {\r\n    position: relative;\r\n    margin: 0.5em 0.5em 0 0.5em;\r\n    display: -webkit-inline-box;\r\n    display: inline;\r\n}\r\n\r\n.compent-img>img {\r\n    width: 1.3em;\r\n    height: 1.3em;\r\n    margin-top: 0.2em;\r\n}\r\n\r\n.player-container .control-bar .fullscreen {\r\n    position: relative;\r\n    margin: 0.5em 0.5em 0 1.5em;\r\n    height: 1.7em;\r\n    width: 1.7em;\r\n    -moz-background-size: 100% 98%;\r\n    background-size: 100% 98%;\r\n    flex: none;\r\n    cursor: pointer;\r\n    float: right;\r\n}\r\n\r\n.player-fullscreen {\r\n    position: fixed;\r\n    z-index: 3147483647;\r\n    overflow: hidden;\r\n    left: 0 !important;\r\n    top: 0 !important;\r\n    bottom: 0 !important;\r\n    right: 0 !important;\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n.player-fullscreen-iframe {\r\n    position: absolute;\r\n    z-index: 3147483647;\r\n    overflow: hidden;\r\n    left: 0 !important;\r\n    top: 0 !important;\r\n    bottom: 0 !important;\r\n    right: 0 !important;\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n.player-fullscreen>.control-bar,\r\n.player-fullscreen>.load-layer,\r\n.player-fullscreen>.play-layer,\r\n.player-fullscreen>.msg-layer {\r\n    z-index: 3147483647;\r\n}\r\n\r\n.player-fullscreen>.load-layer,\r\n.player-fullscreen>.msg-layer {\r\n    top: 50%;\r\n}\r\n\r\n.vjs-control-text {\r\n    display: none;\r\n}\r\n\r\n.time-current-text,\r\n.time-total-text {\r\n    float: left;\r\n}\r\n\r\n:focus {\r\n    outline: none;\r\n}\r\n\r\n.floatLeft {\r\n    float: left;\r\n}\r\n\r\n.floatRight {\r\n    float: right;\r\n    margin-left: 1.0em !important;\r\n    margin-right: 0.5em !important;\r\n}\r\n\r\n.hidden {\r\n    display: none;\r\n}\r\n\r\n.wechatX5fullscreen {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    margin: 0 !important;\r\n    padding: 0 !important;\r\n}\r\n\r\n.player-container .volume-bar{\r\n    background-color: #ad9e9e;\r\n    width: 100px;\r\n    height: 2px;\r\n    max-width: 100px;\r\n    margin: 1.4em 0em 0.1em 0.0em !important\r\n}\r\n.player-container .volume-loaded{\r\n    background-color: #007FFF;\r\n    width: 60px;\r\n    height: 2px;\r\n    max-width: 100px;\r\n}\r\n.player-container .volume-slider-scrub{\r\n    position: relative;\r\n    width: 0.7em;\r\n    height: 0.7em;\r\n    border-radius: 50%;\r\n    bottom: 0.36em;\r\n    background-color: #ad9e9e;\r\n}\r\n.player-container .volume-slider-scrub:hover{\r\n    background-color: #007FFF;\r\n}\r\n.player-container .replay-icon>img{\r\n    width: 16px !important;\r\n    height: 16px !important;\r\n    margin-top: 2px;\r\n    margin-left: 5px;\r\n}\r\n.player-container .default-custom-postion{\r\n    position: relative;\r\n    z-index: 110;\r\n}\r\n","",{version:3,sources:["webpack://./src/css/dhyPlayer.scss"],names:[],mappings:";AACA;IACI,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;IACI,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;IACI,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;IACI,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;IACI,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;IACI,cAAc;IACd,sBAAsB;IACtB,cAAc;IACd,sBAAsB;IACtB,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,yCAAyC;IACzC,yBAAyB;IACzB,sBAAsB;IACtB,qBAAqB;IACrB,iBAAiB;IACjB,YAAY;AAChB;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,WAAW;IACX,YAAY;AAChB;;AAEA;IACI,6BAA6B;IAC7B,qBAAqB;AACzB;;AAEA;IACI,kBAAkB;IAClB,QAAQ;IACR,SAAS;IACT,uBAAuB;IACvB,aAAa;IACb,gBAAgB;IAChB,uCAAuC;IACvC,sBAAsB;IACtB,4BAA4B;IAC5B,WAAW;IACX,YAAY;IACZ,mBAAmB;AACvB;;AAEA;;IAEI,WAAW;IACX,kBAAkB;IAClB,YAAY;IACZ,mBAAmB;IACnB,cAAc;IACd,eAAe;IACf,sBAAsB;IACtB,UAAU;IACV,eAAe;IACf,yBAAyB;IACzB,uBAAuB;AAC3B;;AAEA;;IAEI,uHAAuH;IACvH,+GAA+G;AACnH;;AAEA;IACI,oCAAoC;AACxC;;AAEA;IACI,oCAAoC;IACpC,8BAA8B;IAC9B,sBAAsB;AAC1B;;AAEA;IACI;QACI,yBAAyB;IAC7B;AACJ;;AAEA;IACI;QACI,iCAAiC;IACrC;AACJ;;AAEA;IACI;QACI,yBAAyB;;IAE7B;IACA;QACI,yBAAyB;;IAE7B;IACA;QACI,uBAAuB;IAC3B;IACA;QACI,yBAAyB;;IAE7B;IACA;QACI,yBAAyB;;IAE7B;AACJ;;AAEA;IACI;QACI,yBAAyB;;IAE7B;IACA;QACI,yBAAyB;;IAE7B;IACA;QACI,uBAAuB;IAC3B;IACA;QACI,yBAAyB;;IAE7B;IACA;QACI,yBAAyB;;IAE7B;AACJ;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,0BAA0B;AAC9B;;AAEA;IACI,WAAW;IACX,UAAU;IACV,kBAAkB;IAClB,uBAAuB;IACvB,UAAU;IACV,eAAe;IACf,UAAU;IACV,YAAY;AAChB;;AAEA;IACI,SAAS;IACT,QAAQ;AACZ;;AAEA;IACI,UAAU;IACV,QAAQ;AACZ;;AAEA;IACI,SAAS;IACT,QAAQ;AACZ;;AAEA;IACI,UAAU;IACV,YAAY;AAChB;;AAEA;IACI,SAAS;IACT,YAAY;AAChB;;AAEA;IACI,sBAAsB;IACtB,4BAA4B;IAC5B,4BAA4B;IAC5B,wBAAwB;IACxB,yBAAyB;IACzB,eAAe;IACf,SAAS;IACT,UAAU;IACV,kBAAkB;IAClB,MAAM;IACN,QAAQ;IACR,SAAS;IACT,OAAO;IACP,YAAY;AAChB;;AAEA;IACI,aAAa;EACf;;AAEF;IACI,sBAAsB;AAC1B;;AAEA;IACI,eAAe;IACf,UAAU;IACV,WAAW;IACX,kBAAkB;IAClB,YAAY;IACZ,WAAW;AACf;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,YAAY;AAChB;;AAEA;IACI,qBAAqB;IACrB,kBAAkB;IAClB,uCAAuC;IACvC,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,kBAAkB;IAClB,cAAc;IACd,aAAa;IACb,kBAAkB;AACtB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,SAAS;IACT,mBAAmB;IACnB,WAAW;IACX,YAAY;IACZ,gBAAgB;IAChB,UAAU;IACV,kBAAkB;IAClB,UAAU;AACd;;AAEA;IACI,kBAAkB;IAClB,cAAc;IACd,gBAAgB;IAChB,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,UAAU;IACV,WAAW;IACX,kBAAkB;IAClB,YAAY;IACZ,WAAW;AACf;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,YAAY;AAChB;;AAEA;IACI,qBAAqB;IACrB,kBAAkB;IAClB,uCAAuC;IACvC,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,kBAAkB;IAClB,cAAc;IACd,aAAa;IACb,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;IAChB,iBAAiB;AACrB;;AAEA;IACI,SAAS;AACb;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,UAAU;IACV,WAAW;AACf;;AAEA;IACI,oBAAoB;IACpB,qBAAqB;IACrB,oBAAoB;IACpB,qBAAqB;IACrB,mBAAmB;IACnB,UAAU;IACV,iDAAiD;IACjD,8CAA8C;IAC9C,4CAA4C;IAC5C,yCAAyC;IACzC,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,OAAO;IACP,QAAQ;IACR,aAAa;AACjB;;AAEA;IACI;AACJ;;AAEA;GACG,2BAA2B;AAC9B;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,WAAW;IACX,YAAY;IACZ,SAAS;AACb;AACA;IACI,4BAA4B;AAChC;AACA;IACI,2BAA2B;IAC3B,uBAAuB;IACvB,2BAA2B;IAC3B,uBAAuB;AAC3B;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,qBAAqB;IACrB,wBAAwB;IACxB,6BAA6B;IAC7B,8BAA8B;IAC9B,kBAAkB;IAClB,WAAW;IACX,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,kBAAkB;IAClB,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,aAAa;IACb,kBAAkB;IAClB,sBAAsB;IACtB,mBAAmB;IACnB,kBAAkB;IAClB,cAAc;IACd,UAAU;IACV,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,gBAAgB;AACpB;;AAEA;;IAEI,aAAa;IACb,kBAAkB;IAClB,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,aAAa;IACb,uBAAuB;IACvB,sBAAsB;IACtB,mBAAmB;IACnB,kBAAkB;IAClB,cAAc;IACd,UAAU;IACV,WAAW;IACX,kBAAkB;IAClB,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,aAAa;IACb,yBAAyB;IACzB,WAAW;IACX,WAAW;IACX,qBAAqB;IACrB,eAAe;AACnB;;;;AAIA;IACI,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,YAAY;IACZ,aAAa;IACb,aAAa;IACb,iBAAiB;IACjB,yBAAyB;IACzB,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,QAAQ;IACR,eAAe;IACf,yBAAyB;AAC7B;;AAEA;IACI,0BAA0B;IAC1B,oBAAoB;IACpB,WAAW;IACX,YAAY;IACZ,yCAAyC;IACzC,cAAc;IACd,wBAAwB;IACxB,oBAAoB;IACpB,kBAAkB;IAClB,UAAU;IACV,kBAAkB;IAClB,UAAU;IACV,cAAc;IACd;AACJ;;AAEA;IACI,aAAa;AACjB;AACA;IACI,aAAa;AACjB;AACA;IACI,aAAa;IACb,YAAY;IACZ,aAAa;AACjB;;AAEA;IACI,yBAAyB;IACzB,8BAA8B;AAClC;;AAEA;IACI,kBAAkB;IAClB,2BAA2B;IAC3B,+BAA+B;IAC/B,0BAA0B;IAC1B,UAAU;IACV,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,2BAA2B;IAC3B,2BAA2B;IAC3B,eAAe;AACnB;;AAEA;IACI,YAAY;IACZ,aAAa;IACb,iBAAiB;AACrB;;AAEA;IACI,kBAAkB;IAClB,2BAA2B;IAC3B,aAAa;IACb,YAAY;IACZ,8BAA8B;IAC9B,yBAAyB;IACzB,UAAU;IACV,eAAe;IACf,YAAY;AAChB;;AAEA;IACI,eAAe;IACf,mBAAmB;IACnB,gBAAgB;IAChB,kBAAkB;IAClB,iBAAiB;IACjB,oBAAoB;IACpB,mBAAmB;IACnB,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,gBAAgB;IAChB,kBAAkB;IAClB,iBAAiB;IACjB,oBAAoB;IACpB,mBAAmB;IACnB,sBAAsB;IACtB,uBAAuB;AAC3B;;AAEA;;;;IAII,mBAAmB;AACvB;;AAEA;;IAEI,QAAQ;AACZ;;AAEA;IACI,aAAa;AACjB;;AAEA;;IAEI,WAAW;AACf;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,YAAY;IACZ,6BAA6B;IAC7B,8BAA8B;AAClC;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,oBAAoB;IACpB,qBAAqB;AACzB;;AAEA;IACI,yBAAyB;IACzB,YAAY;IACZ,WAAW;IACX,gBAAgB;IAChB;AACJ;AACA;IACI,yBAAyB;IACzB,WAAW;IACX,WAAW;IACX,gBAAgB;AACpB;AACA;IACI,kBAAkB;IAClB,YAAY;IACZ,aAAa;IACb,kBAAkB;IAClB,cAAc;IACd,yBAAyB;AAC7B;AACA;IACI,yBAAyB;AAC7B;AACA;IACI,sBAAsB;IACtB,uBAAuB;IACvB,eAAe;IACf,gBAAgB;AACpB;AACA;IACI,kBAAkB;IAClB,YAAY;AAChB",sourcesContent:["\r\n:-webkit-full-screen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:-moz-full-screen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:-ms-full-screen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:-ms-fullscreen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n:fullscreen {\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n.player-container {\r\n    display: block;\r\n    box-sizing: border-box;\r\n    color: #ffffff;\r\n    background-color: #000;\r\n    position: relative;\r\n    padding: 0;\r\n    font-size: 0.8em;\r\n    line-height: 1;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    height: 20em;\r\n}\r\n\r\n.player-container .dhy-video {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.player-container .dhy-video-fit {\r\n    object-position: 'center top';\r\n    object-fit: 'contain';\r\n}\r\n\r\n.player-container .load-layer {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin: -25px 0 0 -25px;\r\n    opacity: 0.85;\r\n    text-align: left;\r\n    border: 6px solid rgba(43, 51, 63, 0.7);\r\n    box-sizing: border-box;\r\n    background-clip: padding-box;\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 25px;\r\n}\r\n\r\n.load-layer:before,\r\n.load-layer:after {\r\n    content: \"\";\r\n    position: absolute;\r\n    margin: -6px;\r\n    box-sizing: inherit;\r\n    width: inherit;\r\n    height: inherit;\r\n    border-radius: inherit;\r\n    opacity: 1;\r\n    border: inherit;\r\n    border-color: transparent;\r\n    border-top-color: white;\r\n}\r\n\r\n.load-layer:before,\r\n.load-layer:after {\r\n    -webkit-animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\r\n    animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\r\n}\r\n\r\n.load-layer:before {\r\n    border-top-color: rgb(255, 255, 255);\r\n}\r\n\r\n.load-layer:after {\r\n    border-top-color: rgb(255, 255, 255);\r\n    -webkit-animation-delay: 0.44s;\r\n    animation-delay: 0.44s;\r\n}\r\n\r\n@keyframes vjs-spinner-spin {\r\n    100% {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n@-webkit-keyframes vjs-spinner-spin {\r\n    100% {\r\n        -webkit-transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n@keyframes vjs-spinner-fade {\r\n    0% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    20% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    35% {\r\n        border-top-color: white;\r\n    }\r\n    60% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    100% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n}\r\n\r\n@-webkit-keyframes vjs-spinner-fade {\r\n    0% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    20% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    35% {\r\n        border-top-color: white;\r\n    }\r\n    60% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n    100% {\r\n        border-top-color: #007FFF;\r\n        ;\r\n    }\r\n}\r\n\r\nvideo::-webkit-media-controls-enclosure {\r\n    display: none !important;\r\n}\r\n\r\nvideo:-webkit-full-screen {\r\n    position: fixed !important;\r\n}\r\n\r\n.player-container .play-layer {\r\n    height: 4em;\r\n    width: 4em;\r\n    position: absolute;\r\n    margin: -25px 0 0 -25px;\r\n    padding: 0;\r\n    cursor: pointer;\r\n    opacity: 1;\r\n    z-index: 101;\r\n}\r\n\r\n.player-container .play-layer-center {\r\n    left: 50%;\r\n    top: 50%;\r\n}\r\n\r\n.player-container .play-layer-leftTop {\r\n    left: 3rem;\r\n    top: 20%;\r\n}\r\n\r\n.player-container .play-layer-rightTop {\r\n    left: 94%;\r\n    top: 20%;\r\n}\r\n\r\n.player-container .play-layer-leftBottom {\r\n    left: 2rem;\r\n    bottom: 3rem;\r\n}\r\n\r\n.player-container .play-layer-rightBottom {\r\n    left: 94%;\r\n    bottom: 3rem;\r\n}\r\n\r\n.player-container .poster-layer {\r\n    vertical-align: middle;\r\n    background-repeat: no-repeat;\r\n    background-position: 50% 50%;\r\n    background-size: contain;\r\n    background-color: #000000;\r\n    cursor: pointer;\r\n    margin: 0;\r\n    padding: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    height: 100%;\r\n}\r\n\r\n.player-has-started .poster-layer {\r\n    display: none;\r\n  }\r\n\r\n.player-container .FullScreen>img {\r\n    width: 16px !important;\r\n}\r\n\r\n.player-container .quality-layer {\r\n    cursor: pointer;\r\n    right: 2em;\r\n    bottom: 3em;\r\n    position: absolute;\r\n    z-index: 101;\r\n    width: 60px;\r\n}\r\n\r\n.player-container .quality-layer .quality-item {\r\n    margin: 0px;\r\n    padding: 0px;\r\n    width: 3.0em;\r\n}\r\n\r\n.player-container .quality-layer .quality-item li {\r\n    list-style-type: none;\r\n    line-height: 1.5em;\r\n    background-color: rgba(43, 51, 63, 0.5);\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    min-width: 4em;\r\n    height: 2.0em;\r\n    line-height: 2.0em;\r\n}\r\n\r\n.li-active{\r\n    color: #007FFF;\r\n}\r\n\r\n.player-control-text {\r\n    border: 0;\r\n    clip: rect(0 0 0 0);\r\n    height: 1px;\r\n    margin: -1px;\r\n    overflow: hidden;\r\n    padding: 0;\r\n    position: absolute;\r\n    width: 1px;\r\n}\r\n\r\n.player-container .msg-layer {\r\n    position: absolute;\r\n    color: #e0e8f1;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    width: 100%;\r\n}\r\n\r\n.player-container .control-bar .playrate-select  {\r\n    cursor: pointer;\r\n}\r\n\r\n.player-container .playrate-layer {\r\n    right: 2em;\r\n    bottom: 3em;\r\n    position: absolute;\r\n    z-index: 101;\r\n    width: 60px;\r\n}\r\n\r\n.player-container .playrate-layer .playrate-item {\r\n    margin: 0px;\r\n    padding: 0px;\r\n    width: 3.0em;\r\n}\r\n\r\n.player-container .playrate-layer .playrate-item li {\r\n    list-style-type: none;\r\n    line-height: 1.5em;\r\n    background-color: rgba(43, 51, 63, 0.5);\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    min-width: 4em;\r\n    height: 2.0em;\r\n    line-height: 2.0em;\r\n}\r\n\r\n.player-container .logo-layer {\r\n    position: absolute;\r\n}\r\n\r\n.logo-layer>img {\r\n    max-width: 200px;\r\n    max-height: 150px;\r\n}\r\n\r\n.player-container .logo-layer-leftTop {\r\n    left: 0em;\r\n}\r\n\r\n.player-container .logo-layer-leftBottom {\r\n    bottom: 2em;\r\n}\r\n\r\n.player-container .logo-layer-rightTop {\r\n    right: 1em;\r\n}\r\n\r\n.player-container .logo-layer-rightBottom {\r\n    right: 1em;\r\n    bottom: 2em;\r\n}\r\n\r\n.player-container .control-bar {\r\n    display: -webkit-box;\r\n    display: -webkit-flex;\r\n    display: -ms-flexbox;\r\n    display: inline-block;\r\n    visibility: visible;\r\n    opacity: 1;\r\n    -webkit-transition: visibility 0.1s, opacity 0.1s;\r\n    -moz-transition: visibility 0.1s, opacity 0.1s;\r\n    -o-transition: visibility 0.1s, opacity 0.1s;\r\n    transition: visibility 0.1s, opacity 0.1s;\r\n    width: 100%;\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 3.0em;\r\n}\r\n\r\n.player-container>.default {\r\n    background-color: rgba(43, 51, 63, 0.5)\r\n}\r\n\r\n.player-container>.transparent {\r\n   background-color: #10101054;\r\n}\r\n\r\n.player-container .control-bar img {\r\n    max-width: 30px;\r\n    max-height: 30px;\r\n    width: 20px;\r\n    height: 20px;\r\n    margin: 0;\r\n}\r\n.watermark {\r\n    margin-top: 0.5em !important;\r\n}\r\n.watermark>img{\r\n    max-width: 100px !important;\r\n    width: 100px !important;\r\n    max-height: 28px !important;\r\n    height: 28px !important;\r\n}\r\n\r\n.player-container .control-bar-live {\r\n    display: block;\r\n}\r\n\r\n.player-container .inactive {\r\n    opacity: 0;\r\n}\r\n\r\n.player-container .PlayToggle {\r\n    float: left;\r\n}\r\n\r\n.player-container .transparent .btn-playing {\r\n    background: #272424b3;\r\n    height: 2.2em !important;\r\n    line-height: 2.2em !important;\r\n    margin: 0.5em 0 0 0 !important;\r\n    border-radius: 5px;\r\n    width: 40px;\r\n    padding-top: 0px;\r\n}\r\n\r\n.player-container .control-bar .btn-playing {\r\n    outline: none;\r\n    position: relative;\r\n    text-align: center;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 2.5em;\r\n    margin-left: 0.2em;\r\n    -webkit-box-flex: none;\r\n    -moz-box-flex: none;\r\n    -webkit-flex: none;\r\n    -ms-flex: none;\r\n    flex: none;\r\n    line-height: 3.0em;\r\n    float: left;\r\n}\r\n\r\n.player-container .control-bar .btn-playrate {\r\n    padding-top: 0px;\r\n}\r\n\r\n.player-container .control-bar .time-view,\r\n.quality-select {\r\n    outline: none;\r\n    position: relative;\r\n    text-align: center;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 3.0em;\r\n    margin: 0 0.5em 0 0.5em;\r\n    -webkit-box-flex: none;\r\n    -moz-box-flex: none;\r\n    -webkit-flex: none;\r\n    -ms-flex: none;\r\n    flex: none;\r\n    float: left;\r\n    line-height: 3.2em;\r\n    cursor: pointer;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container {\r\n    position: absolute;\r\n    height: 0.3em;\r\n    background-color: #ad9e9e;\r\n    width: 100%;\r\n    bottom: 3em;\r\n    margin: 0 1.0em 0 0em;\r\n    cursor: pointer;\r\n}\r\n\r\n\r\n\r\n.player-container .control-bar .control-buttons-container {\r\n    position: relative;\r\n    width: 100%;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container .control-slider-scrub {\r\n    position: relative;\r\n    width: 0.8em;\r\n    height: 0.8em;\r\n    bottom: 0.5em;\r\n    margin-left: -2px;\r\n    background-color: #007FFF;\r\n    border-radius: 50%;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container .control-slider-loaded {\r\n    height: 0.3em;\r\n    width: 0;\r\n    max-width: 100%;\r\n    background-color: #007FFF;\r\n}\r\n\r\n.player-container .control-bar .control-slider-container .time-tooltip{\r\n    background-color:  #007FFF;\r\n    border-radius: 0.3em;\r\n    color: #fff;\r\n    float: right;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    font-size: 1em;\r\n    padding: 6px 8px 8px 8px;\r\n    pointer-events: none;\r\n    position: absolute;\r\n    top: -30px;\r\n    visibility: hidden;\r\n    z-index: 1;\r\n    height: 12.8px;\r\n    line-height: 15.8px\r\n}\r\n\r\n.player-container .control-bar .control-slider-container:hover{\r\n    height: 0.6em;\r\n}\r\n.player-container .control-bar .control-slider-container:hover .control-slider-loaded{\r\n    height: 0.6em;\r\n}\r\n.player-container .control-bar .control-slider-container:hover .control-slider-scrub{\r\n    bottom: 0.8em;\r\n    width: 1.0em;\r\n    height: 1.0em;\r\n}\r\n\r\n.time-tooltip-hover{\r\n    display: block !important;\r\n    visibility: visible !important;\r\n}\r\n\r\n.player-container .control-bar .compent {\r\n    position: relative;\r\n    margin: 0.8em 0.5em 0 0.5em;\r\n    -moz-background-size: 100% 100%;\r\n    background-size: 100% 100%;\r\n    flex: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.player-container .control-bar .component-blank {\r\n    position: relative;\r\n    margin: 0.5em 0.5em 0 0.5em;\r\n    display: -webkit-inline-box;\r\n    display: inline;\r\n}\r\n\r\n.compent-img>img {\r\n    width: 1.3em;\r\n    height: 1.3em;\r\n    margin-top: 0.2em;\r\n}\r\n\r\n.player-container .control-bar .fullscreen {\r\n    position: relative;\r\n    margin: 0.5em 0.5em 0 1.5em;\r\n    height: 1.7em;\r\n    width: 1.7em;\r\n    -moz-background-size: 100% 98%;\r\n    background-size: 100% 98%;\r\n    flex: none;\r\n    cursor: pointer;\r\n    float: right;\r\n}\r\n\r\n.player-fullscreen {\r\n    position: fixed;\r\n    z-index: 3147483647;\r\n    overflow: hidden;\r\n    left: 0 !important;\r\n    top: 0 !important;\r\n    bottom: 0 !important;\r\n    right: 0 !important;\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n.player-fullscreen-iframe {\r\n    position: absolute;\r\n    z-index: 3147483647;\r\n    overflow: hidden;\r\n    left: 0 !important;\r\n    top: 0 !important;\r\n    bottom: 0 !important;\r\n    right: 0 !important;\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n}\r\n\r\n.player-fullscreen>.control-bar,\r\n.player-fullscreen>.load-layer,\r\n.player-fullscreen>.play-layer,\r\n.player-fullscreen>.msg-layer {\r\n    z-index: 3147483647;\r\n}\r\n\r\n.player-fullscreen>.load-layer,\r\n.player-fullscreen>.msg-layer {\r\n    top: 50%;\r\n}\r\n\r\n.vjs-control-text {\r\n    display: none;\r\n}\r\n\r\n.time-current-text,\r\n.time-total-text {\r\n    float: left;\r\n}\r\n\r\n:focus {\r\n    outline: none;\r\n}\r\n\r\n.floatLeft {\r\n    float: left;\r\n}\r\n\r\n.floatRight {\r\n    float: right;\r\n    margin-left: 1.0em !important;\r\n    margin-right: 0.5em !important;\r\n}\r\n\r\n.hidden {\r\n    display: none;\r\n}\r\n\r\n.wechatX5fullscreen {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    margin: 0 !important;\r\n    padding: 0 !important;\r\n}\r\n\r\n.player-container .volume-bar{\r\n    background-color: #ad9e9e;\r\n    width: 100px;\r\n    height: 2px;\r\n    max-width: 100px;\r\n    margin: 1.4em 0em 0.1em 0.0em !important\r\n}\r\n.player-container .volume-loaded{\r\n    background-color: #007FFF;\r\n    width: 60px;\r\n    height: 2px;\r\n    max-width: 100px;\r\n}\r\n.player-container .volume-slider-scrub{\r\n    position: relative;\r\n    width: 0.7em;\r\n    height: 0.7em;\r\n    border-radius: 50%;\r\n    bottom: 0.36em;\r\n    background-color: #ad9e9e;\r\n}\r\n.player-container .volume-slider-scrub:hover{\r\n    background-color: #007FFF;\r\n}\r\n.player-container .replay-icon>img{\r\n    width: 16px !important;\r\n    height: 16px !important;\r\n    margin-top: 2px;\r\n    margin-left: 5px;\r\n}\r\n.player-container .default-custom-postion{\r\n    position: relative;\r\n    z-index: 110;\r\n}\r\n"],sourceRoot:""}]),t.a=i},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='layer-play' viewBox='0 0 200 200'%3e %3cpolygon style='fill:%23ffffff;' points='4,-1 21,10 4,21 ' transform='matrix(5.2372881,0,0,4.8135594,51.694915,51.864406)' /%3e %3ccircle style='fill:none;fill-opacity:1;stroke:%23ffffff;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' cx='100.84746' cy='-100' r='88.13559' transform='scale(1,-1)' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='layer-pause' viewBox='0 0 200 200'%3e %3ccircle style='fill:none;fill-opacity:1;stroke:%23ffffff;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' cx='-101.01351' cy='100.67567' r='88.13559' transform='scale(-1,1)'/%3e %3cpath style='fill:none;stroke:%23ffffff;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' d='M 117.54054,148.64865 V 55.405414'/%3e %3cpath style='fill:none;stroke:%23ffffff;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' d='M 82.45946,148.64865 V 55.405414'/%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-play' viewBox='0 0 20 20'%3e %3cpath style='fill:%23ffffff;stroke:%23ffffff;stroke-width:0.88736105px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1' d='M 4.3759016,3.8055305 V 16.232692 L 14.218931,9.9909943 Z' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='16px' height='16px' viewBox='0 0 16 16' enable-background='new 0 0 16 16' xml:space='preserve'%3e %3cimage id='image0' width='16' height='16' x='0' y='0' href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElN RQfjCh8FLSVzK9CnAAAA+0lEQVQoz3WQMUtCARRGz3sED0NracxcjMigfyIErUFQS4tTLv2BloKg lhwkqCkamqJGl4gG0ZaiRYeWCIIGqYiep+GhUep3t3sOl8sXOE0egA9ugSrLNLjglCeSeGCSlogF D73x065npkUQU9b7QjIZT9S6USJU/Pb6j4C4rlYE5+xadsvHfwLuGpvHPdsGTjo/IIz74jbeuz+A elO1GZKjzag8MBsSE4wUJA5psTBSKNAOuaJINBSPUeQSc8buDH1xw9iZpChdG8CLvidFYWRTPTLT hylLdmwaSSBAmmOW+KLBHc9MscIE56zSgd+TWTet+earNctme/sfP9flQDM+ihQAAAAldEVYdGRh dGU6Y3JlYXRlADIwMTktMTAtMzBUMjE6NDU6MzcrMDg6MDAGe8mhAAAAJXRFWHRkYXRlOm1vZGlm eQAyMDE5LTEwLTMwVDIxOjQ1OjM3KzA4OjAwdyZxHQAAAABJRU5ErkJggg==' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-stop' viewBox='0 0 20 20'%3e %3crect style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:2.94351554;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' width='9.1050768' height='9.037488' x='5.5110192' y='5.4938655' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg width='19px' height='14px' viewBox='0 0 19 14' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'%3e %3cdesc%3eCreated with Lunacy%3c/desc%3e %3cg id='mute'%3e %3cpath d='M1.50744 0.757533C1.36162 0.568179 1.21566 0.378761 1.02117 0.227235L0.875346 0.113644C0.680828 -0.0378815 0.389078 -0.0378815 0.194559 0.113644C6.84731e-05 0.265149 6.84731e-05 0.492438 0.194559 0.643942L0.34038 0.757533C0.486337 0.871231 0.583569 0.984822 0.680828 1.13633L0.729417 1.17426C1.65337 2.27271 1.45885 3.25756 0.145889 4.35603C-0.0486296 4.50753 -0.0486296 4.73482 0.145889 4.88632C0.243148 4.96209 0.34038 5 0.486337 5C0.632157 5 0.729417 4.96209 0.826648 4.88632C2.43138 3.52268 2.67446 2.1212 1.50744 0.757533Z' transform='translate(13.41176 4)' id='Path' fill='%23FFFFFF' stroke='none' /%3e %3cpath d='M1.67473 0.487896C1.53133 0.32527 1.38795 0.203266 1.24446 0.121953C1.0532 -0.0406509 0.766327 -0.0406509 0.575064 0.121953C0.383828 0.284579 0.383828 0.528495 0.575064 0.691122L0.909815 0.975729C1.14883 1.26027 1.43572 1.50421 1.67473 1.82944C3.4916 4.14667 2.67747 6.45997 0.143427 8.69591C-0.0478091 8.85853 -0.0478091 9.10245 0.143427 9.26505C0.239059 9.34637 0.334691 9.38708 0.478179 9.38708C0.621559 9.38708 0.717191 9.34637 0.812822 9.26505C3.63373 6.78522 4.49575 4.02476 2.48759 1.42289C2.20072 1.05704 1.91383 0.772412 1.67473 0.487896Z' transform='translate(14.52941 2)' id='Path' fill='%23FFFFFF' stroke='none' /%3e %3cpath d='M9.41898 0.0965707C8.8931 -0.106724 8.22371 0.0152805 7.69783 0.421732L4.06404 3.06428L2.34277 3.06428C1.05189 3.06428 0 3.99928 0 5.05628L0 9.04031C0 10.1786 1.05189 11.0323 2.34277 11.0323L3.82503 11.0323L7.69783 13.6342C8.08022 13.8781 8.5106 14 8.8931 14C9.08434 14 9.32335 13.9594 9.46684 13.8781C9.99275 13.6748 10.2796 13.187 10.2796 12.5365L10.2796 1.47873C10.2796 0.828275 9.99275 0.299796 9.41898 0.0965707ZM9.32335 12.5772C9.32335 12.9024 9.22775 13.1057 9.03648 13.187C8.84522 13.2683 8.55835 13.187 8.27148 13.0244L4.15967 10.2599L2.34277 10.2599C1.57778 10.2599 0.956263 9.73146 0.956263 9.081L0.956263 5.09691C0.956263 4.44642 1.57778 3.91797 2.34277 3.91797L4.39868 3.91797L8.27148 1.11288C8.55835 0.909565 8.79747 0.828275 8.98873 0.909565C9.17997 0.990878 9.32335 1.23482 9.32335 1.56005L9.32335 12.5772Z' id='Fill-3' fill='%23FFFFFF' stroke='none' /%3e %3c/g%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg width='19px' height='14px' viewBox='0 0 19 14' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'%3e %3cdesc%3eCreated with Lunacy%3c/desc%3e %3cg id='moue-copy'%3e %3cpath d='M9.16278 0.0965707C8.6512 -0.106724 8.00002 0.0152805 7.48844 0.421732L3.95349 3.06428L2.27905 3.06428C1.02328 3.06428 0 3.99928 0 5.05628L0 9.04031C0 10.1786 1.02328 11.0323 2.27905 11.0323L3.72098 11.0323L7.48844 13.6342C7.86043 13.8781 8.27911 14 8.6512 14C8.83724 14 9.06975 13.9594 9.20933 13.8781C9.72093 13.6748 10 13.187 10 12.5365L10 1.47873C10 0.828275 9.72093 0.299796 9.16278 0.0965707ZM9.06975 12.5772C9.06975 12.9024 8.97674 13.1057 8.79068 13.187C8.60462 13.2683 8.32556 13.187 8.04649 13.0244L4.04652 10.2599L2.27905 10.2599C1.53486 10.2599 0.930252 9.73146 0.930252 9.081L0.930252 5.09691C0.930252 4.44642 1.53486 3.91797 2.27905 3.91797L4.27903 3.91797L8.04649 1.11288C8.32556 0.909565 8.55817 0.828275 8.74423 0.909565C8.93027 0.990878 9.06975 1.23482 9.06975 1.56005L9.06975 12.5772Z' id='Fill-3' fill='%23FFFFFF' stroke='none' /%3e %3cg id='bian' transform='translate(12 4)'%3e %3cpath d='M0 0L7 7' id='path' fill='none' stroke='%23FFFFFF' stroke-width='1' stroke-linecap='round' /%3e %3cpath d='M0 0L7 7' transform='matrix(-1 0 0 1 7.00002 0)' id='path' fill='none' stroke='%23FFFFFF' stroke-width='1' stroke-linecap='round' /%3e %3c/g%3e %3c/g%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-prev' viewBox='0 0 20 20'%3e %3crect height='14.067797' width='1.4' y='2.9661019' x='4.0254235' style='stroke-width:1.00965607;fill:%23ffffff;fill-opacity:1' /%3e %3cpath style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:0.88736105px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' d='M 16.055933,16.300271 V 3.8731089 L 6.2129068,10.114807 Z' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-next' viewBox='0 0 20 20'%3e %3crect height='14.067797' width='1.4' y='-17.076271' x='-16.491331' style='fill:%23ffffff;fill-opacity:1;stroke-width:1.00965607' transform='scale(-1)' /%3e %3cpath style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:0.88736105px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' d='M 4.460823,3.8268483 V 16.254011 l 9.843026,-6.241698 z' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-forward' viewBox='0 0 20 20'%3e %3cpath style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:0.83676302;' d='M 10.446494,3.8300371 V 16.20223 l 8.822542,-6.21409 z' /%3e %3cpath style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:0.83676302;' d='M 0.43944482,3.8236203 V 16.195813 L 9.2619871,9.9817232 Z' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='btn-backward' viewBox='0 0 20 20'%3e %3cpath style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:0.84284121;' d='M 9.5973297,16.263689 9.5960303,3.7836508 0.72285468,10.052836 Z' /%3e %3cpath style='fill:%23ffffff;fill-opacity:1;stroke:%23ffffff;stroke-width:0.84284121;' d='M 19.60384,16.234818 19.60254,3.7547786 10.729365,10.023964 Z' /%3e %3c/svg%3e"},function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' id='layer-backlive' viewBox='0 0 20 20' %3e %3ccircle style='fill:none;fill-opacity:1;stroke:%23FFFFFF;stroke-width:0.75590551;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' cx='10.00406' cy='-10.059658' r='6.8436618' transform='scale(1,-1)' /%3e %3ctext style='font-style:normal;font-weight:normal;font-size:9.55543518px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:%23FFFFFF;fill-opacity:1;stroke:none;stroke-width:0.23888586' x='5.8967471' y='13.05621' transform='scale(0.9452071,1.0579692)'%3e %3ctspan x='5.8967471' y='13.05621' style='fill:%23FFFFFF;fill-opacity:1;stroke-width:0.23888586'%3e鐩�%3c/tspan%3e %3c/text%3e %3c/svg%3e"},function(e,t,n){"use strict";e.exports=function(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}},function(e,t,n){"use strict";var i=n(6);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var r,n=n?n(t):i.isURLSearchParams(t)?t.toString():(r=[],i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),r.push(o(t)+"="+o(e))}))}),r.join("&"));return n&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n),e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(s,e,l){"use strict";!function(e){var n=l(6),r=l(51),t={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,a={adapter:o="undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?l(35):o,transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),s.exports=a}.call(this,l(50))},function(e,t,n){"use strict";var u=n(6),c=n(52),f=n(54),d=n(32),h=n(55),p=n(58),g=n(59),m=n(36);e.exports=function(l){return new Promise(function(t,n){var r=l.data,i=l.headers;u.isFormData(r)&&delete i["Content-Type"];var e,o=new XMLHttpRequest;l.auth&&(e=l.auth.username||"",s=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"",i.Authorization="Basic "+btoa(e+":"+s));var a,s=h(l.baseURL,l.url);if(o.open(l.method.toUpperCase(),d(s,l.params,l.paramsSerializer),!0),o.timeout=l.timeout,o.onreadystatechange=function(){var e;o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in o?p(o.getAllResponseHeaders()):null,e={data:l.responseType&&"text"!==l.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:e,config:l,request:o},c(t,n,e),o=null)},o.onabort=function(){o&&(n(m("Request aborted",l,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(m("Network Error",l,null,o)),o=null},o.ontimeout=function(){var e="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(e=l.timeoutErrorMessage),n(m(e,l,"ECONNABORTED",o)),o=null},u.isStandardBrowserEnv()&&(a=(l.withCredentials||g(s))&&l.xsrfCookieName?f.read(l.xsrfCookieName):void 0)&&(i[l.xsrfHeaderName]=a),"setRequestHeader"in o&&u.forEach(i,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)}),u.isUndefined(l.withCredentials)||(o.withCredentials=!!l.withCredentials),l.responseType)try{o.responseType=l.responseType}catch(t){if("json"!==l.responseType)throw t}"function"==typeof l.onDownloadProgress&&o.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(e){o&&(o.abort(),n(e),o=null)}),r=r||null,o.send(r)})}},function(e,t,n){"use strict";var o=n(53);e.exports=function(e,t,n,r,i){e=new Error(e);return o(e,t,n,r,i)}},function(e,t,n){"use strict";var c=n(6);e.exports=function(t,n){n=n||{};var r={},e=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function s(e,t){return c.isPlainObject(e)&&c.isPlainObject(t)?c.merge(e,t):c.isPlainObject(t)?c.merge({},t):c.isArray(t)?t.slice():t}function l(e){c.isUndefined(n[e])?c.isUndefined(t[e])||(r[e]=s(void 0,t[e])):r[e]=s(t[e],n[e])}c.forEach(e,function(e){c.isUndefined(n[e])||(r[e]=s(void 0,n[e]))}),c.forEach(i,l),c.forEach(o,function(e){c.isUndefined(n[e])?c.isUndefined(t[e])||(r[e]=s(void 0,t[e])):r[e]=s(void 0,n[e])}),c.forEach(a,function(e){e in n?r[e]=s(t[e],n[e]):e in t&&(r[e]=s(void 0,t[e]))});var u=e.concat(i).concat(o).concat(a),a=Object.keys(t).concat(Object.keys(n)).filter(function(e){return-1===u.indexOf(e)});return c.forEach(a,l),r}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(_e,be,Ae){var Ee;!function(i,s){"use strict";var o=["","webkit","Moz","MS","ms","o"],e=s.createElement("div"),a=Math.round,m=Math.abs,y=Date.now;function l(e,t,n){return setTimeout(h(e,n),t)}function n(e,t,n){return Array.isArray(e)&&(u(e,n[t],n),1)}function u(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function t(n,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",e=i.console&&(i.console.warn||i.console.log);return e&&e.call(i.console,r,t),n.apply(this,arguments)}}var c="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign,r=t(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)n&&void 0!==e[r[i]]||(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),f=t(function(e,t){return r(e,t,!0)},"merge","Use `assign`.");function d(e,t,n){var r=t.prototype;(t=e.prototype=Object.create(r)).constructor=e,t._super=r,n&&c(t,n)}function h(e,t){return function(){return e.apply(t,arguments)}}function p(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function g(e,t){return void 0===e?t:e}function v(t,e,n){u(E(e),function(e){t.addEventListener(e,n,!1)})}function _(t,e,n){u(E(e),function(e){t.removeEventListener(e,n,!1)})}function b(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function A(e,t){return-1<e.indexOf(t)}function E(e){return e.trim().split(/\s+/g)}function w(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function S(e){return Array.prototype.slice.call(e,0)}function k(e,n,t){for(var r=[],i=[],o=0;o<e.length;){var a=n?e[o][n]:e[o];w(i,a)<0&&r.push(e[o]),i[o]=a,o++}return r=t?n?r.sort(function(e,t){return e[n]>t[n]}):r.sort():r}function T(e,t){for(var n,r=t[0].toUpperCase()+t.slice(1),i=0;i<o.length;){if((n=(n=o[i])?n+r:t)in e)return n;i++}}var C=1;function R(e){e=e.ownerDocument||e;return e.defaultView||e.parentWindow||i}var x="ontouchstart"in i,O=void 0!==T(i,"PointerEvent"),L=x&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I=["x","y"],D=["clientX","clientY"];function P(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function B(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&t&&r-i==0,i=12&t&&r-i==0;n.isFirst=!!o,n.isFinal=!!i,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=M(t)),1<i&&!n.firstMultiple?n.firstMultiple=M(t):1===i&&(n.firstMultiple=!1);var o,a,s=n.firstInput,l=n.firstMultiple,u=(l||s).center,c=t.center=j(r);t.timeStamp=y(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=G(u,c),t.distance=U(u,c),o=n,i=(a=t).center,s=o.offsetDelta||{},u=o.prevDelta||{},c=o.prevInput||{},1!==a.eventType&&4!==c.eventType||(u=o.prevDelta={x:c.deltaX||0,y:c.deltaY||0},s=o.offsetDelta={x:i.x,y:i.y}),a.deltaX=u.x+(i.x-s.x),a.deltaY=u.y+(i.y-s.y),t.offsetDirection=N(t.deltaX,t.deltaY);var f,d,h,p,g,s=F(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=s.x,t.overallVelocityY=s.y,t.overallVelocity=m(s.x)>m(s.y)?s.x:s.y,t.scale=l?(s=l.pointers,U(r[0],r[1],D)/U(s[0],s[1],D)):1,t.rotation=l?(g=l.pointers,G(r[1],r[0],D)+G(g[1],g[0],D)):0,t.maxPointers=!n.prevInput||t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers,l=t,g=(r=n).lastInterval||l,n=l.timeStamp-g.timeStamp,8!=l.eventType&&(25<n||void 0===g.velocity)?(f=(h=F(n,n=l.deltaX-g.deltaX,p=l.deltaY-g.deltaY)).x,d=h.y,h=m(h.x)>m(h.y)?h.x:h.y,p=N(n,p),r.lastInterval=l):(h=g.velocity,f=g.velocityX,d=g.velocityY,p=g.direction),l.velocity=h,l.velocityX=f,l.velocityY=d,l.direction=p;e=e.element;b(t.srcEvent.target,e)&&(e=t.srcEvent.target),t.target=e}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function M(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:a(e.pointers[n].clientX),clientY:a(e.pointers[n].clientY)},n++;return{timeStamp:y(),pointers:t,center:j(t),deltaX:e.deltaX,deltaY:e.deltaY}}function j(e){var t=e.length;if(1===t)return{x:a(e[0].clientX),y:a(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:a(n/t),y:a(r/t)}}function F(e,t,n){return{x:t/e||0,y:n/e||0}}function N(e,t){return e===t?1:m(e)>=m(t)?e<0?2:4:t<0?8:16}function U(e,t,n){var r=t[(n=n||I)[0]]-e[n[0]],n=t[n[1]]-e[n[1]];return Math.sqrt(r*r+n*n)}function G(e,t,n){var r=t[(n=n||I)[0]]-e[n[0]],n=t[n[1]]-e[n[1]];return 180*Math.atan2(n,r)/Math.PI}P.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var H={mousedown:1,mousemove:2,mouseup:4};function V(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,P.apply(this,arguments)}d(V,P,{handler:function(e){var t=H[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var q={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},z={2:"touch",3:"pen",4:"mouse",5:"kinect"},K="pointerdown",W="pointermove pointerup pointercancel";function Y(){this.evEl=K,this.evWin=W,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(K="MSPointerDown",W="MSPointerMove MSPointerUp MSPointerCancel"),d(Y,P,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=q[r],o=z[e.pointerType]||e.pointerType,a="touch"==o,r=w(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?r<0&&(t.push(e),r=t.length-1):12&i&&(n=!0),r<0||(t[r]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(r,1))}});var X={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function $(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,P.apply(this,arguments)}d($,P,{handler:function(e){var t,n=X[e.type];1===n&&(this.started=!0),this.started&&(t=function(e,t){var n=S(e.touches),e=S(e.changedTouches);return[n=12&t?k(n.concat(e),"identifier",!0):n,e]}.call(this,e,n),12&n&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:t[0],changedPointers:t[1],pointerType:"touch",srcEvent:e}))}});var Q={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function Z(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},P.apply(this,arguments)}function J(){P.apply(this,arguments);var e=h(this.handler,this);this.touch=new Z(this.manager,e),this.mouse=new V(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ee(e){var t,n,e=e.changedPointers[0];e.identifier===this.primaryTouch&&(t={x:e.clientX,y:e.clientY},this.lastTouches.push(t),n=this.lastTouches,setTimeout(function(){var e=n.indexOf(t);-1<e&&n.splice(e,1)},2500))}d(Z,P,{handler:function(e){var t=Q[e.type],n=function(e,t){var n=S(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o=S(e.changedTouches),a=[],s=this.target,l=n.filter(function(e){return b(e.target,s)});if(1===t)for(i=0;i<l.length;)r[l[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&a.push(o[i]),12&t&&delete r[o[i].identifier],i++;return a.length?[k(l.concat(a),"identifier",!0),a]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}),d(J,P,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)!function(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ee.call(this,t)):12&e&&ee.call(this,t)}.call(this,t,n);else if(i&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),i=Math.abs(n-i.y);if(o<=25&&i<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var te=T(e.style,"touchAction"),ne=void 0!==te,re=function(){if(!ne)return!1;var t={},n=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||i.CSS.supports("touch-action",e)}),t}();function ie(e,t){this.manager=e,this.set(t)}function oe(e){this.options=c({},this.defaults,e||{}),this.id=C++,this.manager=null,this.options.enable=g(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ae(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function se(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function le(e,t){t=t.manager;return t?t.get(e):e}function ue(){oe.apply(this,arguments)}function ce(){ue.apply(this,arguments),this.pX=null,this.pY=null}function fe(){ue.apply(this,arguments)}function de(){oe.apply(this,arguments),this._timer=null,this._input=null}function he(){ue.apply(this,arguments)}function pe(){ue.apply(this,arguments)}function ge(){oe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function me(e,t){return(t=t||{}).recognizers=g(t.recognizers,me.defaults.preset),new ye(e,t)}function ye(e,t){this.options=c({},me.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(O?Y:L?Z:x?J:V))(this,B),this.touchAction=new ie(this,this.options.touchAction),ve(this,!0),u(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ve(n,r){var i,o=n.element;o.style&&(u(n.options.cssProps,function(e,t){i=T(o.style,t),r?(n.oldCssProps[i]=o.style[i],o.style[i]=e):o.style[i]=n.oldCssProps[i]||""}),r||(n.oldCssProps={}))}ie.prototype={set:function(e){"compute"==e&&(e=this.compute()),ne&&this.manager.element.style&&re[e]&&(this.manager.element.style[te]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(A(e,"none"))return"none";var t=A(e,"pan-x"),n=A(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":A(e,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=A(r,"none")&&!re.none,o=A(r,"pan-y")&&!re["pan-y"],a=A(r,"pan-x")&&!re["pan-x"];if(i){var s=1===e.pointers.length,r=e.distance<2,e=e.deltaTime<250;if(s&&r&&e)return}if(!a||!o)return i||o&&6&n||a&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}},oe.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=le(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=le(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===w(t,e=le(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=le(e,this);e=w(this.requireFail,e);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function r(e){n.manager.emit(e,t)}e<8&&r(n.options.event+ae(e)),r(n.options.event),t.additionalEvent&&r(t.additionalEvent),8<=e&&r(n.options.event+ae(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){e=c({},e);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(e){},getTouchAction:function(){},reset:function(){}},d(ue,oe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,e=this.attrTest(e);return r&&(8&n||!e)?16|t:r||e?4&n?8|t:2&t?4|t:2:32}}),d(ce,ue,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(r=6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,Math.abs(e.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return ue.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=se(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),d(fe,ue,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){var t;1!==e.scale&&(t=e.scale<1?"in":"out",e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),d(de,oe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=l(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=y(),this.manager.emit(this.options.event,this._input)))}}),d(he,ue,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),d(pe,ue,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ce.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&m(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=se(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),d(ge,oe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();i=!this.pTime||e.timeStamp-this.pTime<t.interval,n=!this.pCenter||U(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,n&&i?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),me.VERSION="2.0.7",me.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[he,{enable:!1}],[fe,{enable:!1},["rotate"]],[pe,{direction:6}],[ce,{direction:6},["swipe"]],[ge],[ge,{event:"doubletap",taps:2},["tap"]],[de]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ye.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(e);var r=this.recognizers,i=n.curRecognizer;(!i||8&i.state)&&(i=n.curRecognizer=null);for(var o=0;o<r.length;)t=r[o],2===n.stopped||i&&t!=i&&!t.canRecognizeWith(i)?t.reset():t.recognize(e),!i&&14&t.state&&(i=n.curRecognizer=t),o++}},get:function(e){if(e instanceof oe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){return n(e,"remove",this)||!(e=this.get(e))||-1!==(e=w(t=this.recognizers,e))&&(t.splice(e,1),this.touchAction.update()),this;var t},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return u(E(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return u(E(e),function(e){t?n[e]&&n[e].splice(w(n[e],t),1):delete n[e]}),this}},emit:function(e,t){var n,r,i;this.options.domEvents&&(n=e,r=t,(i=s.createEvent("Event")).initEvent(n,!0,!0),(i.gesture=r).target.dispatchEvent(i));var o=this.handlers[e]&&this.handlers[e].slice();if(o&&o.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](t),a++}},destroy:function(){this.element&&ve(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(me,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:ye,Input:P,TouchAction:ie,TouchInput:Z,MouseInput:V,PointerEventInput:Y,TouchMouseInput:J,SingleTouchInput:$,Recognizer:oe,AttrRecognizer:ue,Tap:ge,Pan:ce,Swipe:pe,Pinch:fe,Rotate:he,Press:de,on:v,off:_,each:u,merge:f,extend:r,assign:c,inherit:d,bindFn:h,prefixed:T}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=me,void 0===(Ee=function(){return me}.call(be,Ae,be,_e))||(_e.exports=Ee)}(window,document)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r={postRoll:"postRoll",playerName:"playerName",tintColor:"mainColor",playerType:"onLive",preRoll:"preRoll",scrubBarSkin:"fontColor",watermarkPadding:"logoPadding",autoPlay:"autoplay"};function i(){return Object.assign({},r)}},function(e,t,i){"use strict";var n,r,o=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}),u=[];function c(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s=n[a]||0,l="".concat(a," ").concat(s);n[a]=s+1;s=c(l),o={css:o[1],media:o[2],sourceMap:o[3]};-1!==s?(u[s].references++,u[s].updater(o)):u.push({identifier:l,updater:function(t,e){var n,r,i;{var o;i=e.singleton?(o=p++,n=h=h||f(e),r=d.bind(null,n,o,!1),d.bind(null,n,o,!0)):(n=f(e),r=function(e,t,n){var r=n.css,i=n.media,n=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,e),function(){var e;null!==(e=n).parentNode&&e.parentNode.removeChild(e)})}return r(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||r(t=e):i()}}(o,t),references:1}),r.push(l)}return r}function f(e){var t,n=document.createElement("style"),r=e.attributes||{};if(void 0!==r.nonce||(t=i.nc)&&(r.nonce=t),Object.keys(r).forEach(function(e){n.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(n);else{e=o(e.insert||"head");if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(n)}return n}var a,l=(a=[],function(e,t){return a[e]=t,a.filter(Boolean).join("\n")});function d(e,t,n,r){n=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;e.styleSheet?e.styleSheet.cssText=l(t,n):(r=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(r,n[t]):e.appendChild(r))}var h=null,p=0;e.exports=function(e,o){(o=o||{}).singleton||"boolean"==typeof o.singleton||(o.singleton=n=void 0===n?Boolean(window&&document&&document.all&&!window.atob):n);var a=s(e=e||[],o);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<a.length;t++){var n=c(a[t]);u[n].references--}for(var e=s(e,o),r=0;r<a.length;r++){var i=c(a[r]);0===u[i].references&&(u[i].updater(),u.splice(i,1))}a=e}}}},function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var t,e=(r=4,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,r)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=e[1],n=e[3];if("function"!=typeof btoa)return[t].join("\n");var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),e="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),r="/*# ".concat(e," */"),e=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")});return[t].concat(e).concat([r]).join("\n")}},function(e,t,n){"use strict";e.exports=function(n){var l=[];return l.toString=function(){return this.map(function(e){var t=n(e);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t}).join("")},l.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);n&&r[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),l.push(s))}},l}},function(e,t){},function(e,t,n){"use strict";var r=n(6),i=n(31),o=n(46),a=n(37);function s(e){var t=new o(e),e=i(o.prototype.request,t);return r.extend(e,o.prototype,t),r.extend(e,t),e}var l=s(n(34));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(38),l.CancelToken=n(60),l.isCancel=n(33),l.all=function(e){return Promise.all(e)},l.spread=n(61),l.isAxiosError=n(62),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var r=n(6),i=n(32),o=n(47),a=n(48),s=n(37);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(e,t){return this.request(s(t||{},{method:n,url:e,data:(t||{}).data}))}}),r.forEach(["post","put","patch"],function(r){l.prototype[r]=function(e,t,n){return this.request(s(n||{},{method:r,url:e,data:t}))}}),e.exports=l},function(e,t,n){"use strict";var r=n(6);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=i},function(e,t,n){"use strict";var r=n(6),i=n(49),o=n(33),a=n(34);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return s(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return s(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,n){"use strict";var r=n(6);e.exports=function(t,n,e){return r.forEach(e,function(e){t=e(t,n)}),t}},function(e,t){var n,r,e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,l=[],u=!1,c=-1;function f(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=a(f);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";var i=n(6);e.exports=function(n,r){i.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}},function(e,t,n){"use strict";var i=n(36);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var s=n(6);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(r)&&a.push("path="+r),s.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(56),i=n(57);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var i=n(6),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,r={};return e&&i.forEach(e.split("\n"),function(e){n=e.indexOf(":"),t=i.trim(e.substr(0,n)).toLowerCase(),n=i.trim(e.substr(n+1)),t&&(r[t]&&0<=o.indexOf(t)||(r[t]="set-cookie"===t?(r[t]||[]).concat([n]):r[t]?r[t]+", "+n:n))}),r}},function(e,t,n){"use strict";var r,i,o,a=n(6);function s(e){return i&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}e.exports=a.isStandardBrowserEnv()?(i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),r=s(window.location.href),function(e){e=a.isString(e)?s(e):e;return e.protocol===r.protocol&&e.host===r.host}):function(){return!0}},function(e,t,n){"use strict";var r=n(38);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},e.exports=i},function(e,t,n){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,n){"use strict";n.r(t);var i,t=n(8),t=n.n(t);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.$=t.a,window.jQuery=t.a,(i=jQuery).jQueryPlugin=function(r){i.fn[r]=function(t){var n=Array.prototype.slice.call(arguments,1);if(this.length)return this.each(function(){var e=i.data(this,r)||i.data(this,r,new f.plugins[r](this,t)._init());"string"==typeof t&&e[t=t.replace(/^_/,"")]&&e[t].apply(e,n)})}};var y,r,o,a,l,u,c,f={plugins:{}};function d(c,f){this.$element=y(c),this.options=f,this.id=y(c).attr("id"),this.DATA_LIST_FLAG="danmuList-"+this.id,y(c).data("nowTime",0);var e={};y.extend(!0,e,f.danmuss),this._dfcss={},y.extend(!0,this._dfcss,f.dfcss),y(c).data(this.DATA_LIST_FLAG,e),y(c).data("opacity",f.opacity),y(c).data("paused",1),y(c).data("topSpace",0),y(c).data("bottomSpace",0),this.$element.css({position:"absolute",left:this.options.left,top:this.options.top,width:this.options.width,height:this.options.height,"z-index":this.options.zindex,color:f.default_font_color,overflow:"hidden"});var d=this;d.height=this.$element.height(),d.width=this.$element.width(),d.speed=1e3/f.speed,this.launched=[],this.preTime=0;var h=this.options.maxCountInScreen,p=this.options.maxCountPerSec,g=0,m=0;this.rowCount=parseInt(d.height/f.font_size_big),d.options.SubtitleProtection&&(d.rowCount=d.rowCount-3),this.rows=[],this.topRows=[],this.bottomRows=[],this.initRows=function(e){for(var t=0;t<e.rowCount;t++)e.rows[t]=0,e.topRows[t]=0,e.bottomRows[t]=0},this.initRows(this),d.getRow=function(e){for(var t=0;0!==e.rows[t];)if((t+=1)>=e.rowCount){e.initRows(e),t=0;break}return t},d.getTopRow=function(e){for(var t=0;t<e.topRows.length;t++)if(0==e.topRows[t])return t},d.getBottomRow=function(e){for(var t=0;t<e.bottomRows.length;t++)if(0==e.bottomRows[t])return t},d.checkRow=function(e){for(var t in e.rows)0!==e.rows[t]&&void 0!==y("#"+e.rows[t]).position()&&y("#"+e.rows[t]).position().left<e.$element.width()-y("#"+e.rows[t]).width()&&(e.rows[t]=0)},y("<div class='danmakuTimer-".concat(this.id,"'></div>")).appendTo(this.$element),this.$timer=y(".danmakuTimer-".concat(this.id)),this.$timer.timer({delay:100,repeat:f.sumtime,autostart:!1,callback:function(u){setTimeout(function(){d.options.danmuLoop&&y(c).data("nowTime")>=y(c).data("sumtime")&&y(c).data("nowTime",0),y(c).data("nowTime",y(c).data("nowTime")+1),d.height=y(c).height(),d.width=y(c).width(),10<Math.abs(y(c).data("nowTime")-(d.preTime+1))&&(d.launched=[]),d.preTime=y(c).data("nowTime");var e=d.rowCount;if(d.rowCount=parseInt(d.height/f.font_size_big),setTimeout(d.checkRow(d),0),d.options.SubtitleProtection&&(d.rowCount=d.rowCount-3),0!==e&&d.rowCount!==e&&d.initRows(d),m=0,y(c).data(d.DATA_LIST_FLAG)[y(c).data("nowTime")]&&d.launched.indexOf(y(c).data("nowTime"))<0){for(var e=y(c).data("nowTime"),t=y(c).data(d.DATA_LIST_FLAG)[e],n=t.length-1;0<=n;n--){setTimeout(d.checkRow(d),0);var r="<span class='danmaku' id='"+d.id+"tempDanmaku'></span>";y(c).append(r);var i,o,a,s,l=t[n];y("#"+d.id+"tempDanmaku").text(l.text).css({color:l.color,"-moz-opacity":y(c).data("opacity"),opacity:y(c).data("opacity"),"white-space":"nowrap","font-size":f.font_size_big}).css(d._dfcss),l.hasOwnProperty("isnew")&&y("#"+d.id+"tempDanmaku").css({border:"2px solid "+l.color}),0==l.size&&y("#"+d.id+"tempDanmaku").css("font-size",f.font_size_small),0==l.position?(i=d.id+"fly"+parseInt((new Date).getTime()).toString(),y("#"+d.id+"tempDanmaku").attr("id",i),g<=h&&m<=p?(d.checkRow(d),o=d.getRow(d),d.rows[o]=i,r=(l.row=o)*f.font_size_big,l.width=y("#"+i).width(),o=y("#"+d.id).width(),y("#"+i).css({width:y("#"+i).width(),position:"absolute",top:r,left:o}),o=(y(c).width()+400)/d.speed,g++,m++,y("#"+i).animate({left:-(y("#"+i).width()+400)},o,function(){y(this).remove(),g--,m--})):y("#"+i).remove()):1==l.position?(s=d.id+"top"+parseInt(1e4*Math.random()).toString(),y("#"+d.id+"tempDanmaku").attr("id",s),a=d.getTopRow(d),y(c).data("topSpace",f.font_size_big*a),d.topRows[a]=1,y("#"+s).css({width:"100%","text-align":"center",position:"absolute",top:y(c).data("topSpace"),left:"0"}),y("#"+s).data("row",a),y("#"+s).fadeTo(f.top_botton_danmu_time,y(c).data("opacity"),function(){d.topRows[y(this).data("row")]=0,y(this).remove()})):2==l.position&&(s=d.id+"bottom"+parseInt(1e4*Math.random()).toString(),y("#"+d.id+"tempDanmaku").attr("id",s),a=d.getBottomRow(d),y(c).data("bottomSpace",f.font_size_big*a),d.bottomRows[a]=1,y("#"+s).css({width:f.width,left:"0","text-align":"center",position:"absolute",bottom:0+y(c).data("bottomSpace")}),y("#"+s).data("row",a),y("#"+s).fadeTo(f.top_botton_danmu_time,y(c).data("opacity"),function(){d.bottomRows[y(this).data("row")]=0,y(this).remove()})),t[n]=l}y(c).data(d.DATA_LIST_FLAG)[e]=t}d.launched.push(y(c).data("nowTime")),u==f.sumtime&&f.isLoop&&(d.$timer.timer("stop"),d.$timer.timer("start"))})}})}function h(){return(new Date).getTime()}o=jQuery,a="jQuery.pause",l=1,u=o.fn.animate,c={},o.fn.animate=function(t,e,n,r){var i=o.speed(e,n,r);return i.complete=i.old,this.each(function(){this[a]||(this[a]=l++);var e=o.extend({},i);u.apply(o(this),[t,o.extend({},e)]),c[this[a]]={run:!0,prop:t,opt:e,start:h(),done:0}})},o.fn.pause=function(){return this.each(function(){this[a]||(this[a]=l++);var e=c[this[a]];e&&e.run&&(e.done+=h()-e.start,e.done>e.opt.duration?delete c[this[a]]:(o(this).stop().stop().stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),o(this).stop(),e.run=!1))})},o.fn.resume=function(){return this.each(function(){this[a]||(this[a]=l++);var e=c[this[a]];e&&!e.run&&(e.opt.duration-=e.done,e.done=0,e.run=!0,e.start=h(),u.apply(o(this),[e.prop,o.extend({},e.opt)]))})},r=jQuery,f.plugins.timer=function(e,t){this.$this=r(e),this.options=r.extend({},this.defaults,t),this.timer_info={id:null,index:null,state:0}},f.plugins.timer.prototype={defaults:{delay:1e3,repeat:!1,autostart:!0,callback:null,url:"",post:""},_init:function(){return this.options.autostart&&(this.timer_info.state=1,this.timer_info.id=setTimeout(r.proxy(this._timer_fn,this),this.options.delay)),this},_timer_fn:function(){"function"==typeof this.options.callback?r.proxy(this.options.callback,this.$this).call(this,++this.timer_info.index):"string"==typeof this.options.url&&(ajax_options={url:this.options.url,context:this,type:"string"==typeof this.options.post&&""!=typeof this.options.post==""?"POST":"GET",success:function(e,t,n){this.$this.html(e)}},"string"==typeof this.options.post&&typeof this.options.post&&(ajax_options.data=this.options.post),r.ajax(ajax_options)),this.options.repeat&&1==this.timer_info.state&&("boolean"==typeof this.options.repeat||parseInt(this.options.repeat)>this.timer_info.index)?this.timer_info.id=setTimeout(r.proxy(this._timer_fn,this),this.options.delay):this.timer_id=null},start:function(){0==this.timer_info.state&&(this.timer_info.index=0,this.timer_info.state=1,this.timer_id=setTimeout(r.proxy(this._timer_fn,this),this.options.delay))},stop:function(){1==this.timer_info.state&&this.timer_info.id&&(clearTimeout(this.timer_info.id),this.timer_id=null),this.timer_info.state=0},pause:function(){1==this.timer_info.state&&this.timer_info.id&&clearTimeout(this.timer_info.id),this.timer_info.state=0},resume:function(){this.timer_info.state=1,this.timer_id=setTimeout(r.proxy(this._timer_fn,this),this.options.delay)}},r.jQueryPlugin("timer"),y=jQuery,d.DEFAULTS={left:0,top:"2px",height:"70%",width:"100%",zindex:100,speed:8e3,sumtime:65535,opacity:"0.9",SubtitleProtection:!1,positionOptimize:!1,maxCountInScreen:40,maxCountPerSec:10,danmuLoop:!1,default_font_color:"#FFFFFF",font_size_small:16,font_size_big:24,top_botton_danmu_time:6e3},d.prototype.danmuStart=function(){this.$timer.timer("start"),this.$element.data("paused",0)},d.prototype.danmuStop=function(){this.$timer.timer("stop"),y("#"+this.id+" .danmaku").remove(),nowTime=0,this.$element.data("paused",1),this.$element.data("nowTime",0)},d.prototype.danmuPause=function(){this.$timer.timer("pause"),y("#"+this.id+" .danmaku").pause(),this.$element.data("paused",1)},d.prototype.danmuResume=function(){this.$timer.timer("resume"),y("#"+this.id+" .danmaku").resume(),this.$element.data("paused",0)},d.prototype.danmuHideAll=function(){this.$element.css("opacity",0),this.initRows(this)},d.prototype.danmuShowAll=function(){this.$element.css("opacity",this.$element.data("opacity")),this.initRows(this)},d.prototype.setTime=function(e){this.$element.data("nowTime",e)},d.prototype.setOpacity=function(e){y("#"+this.id+" .danmaku").css("opacity",e),this.$element.data("opacity",e)},d.prototype.addDanmu=function(e){if(e instanceof Array)for(var t in e)this.$element.data(this.DATA_LIST_FLAG)[e[t].time]||(this.$element.data(this.DATA_LIST_FLAG)[e[t].time]=[]),this.$element.data(this.DATA_LIST_FLAG)[e[t].time].push(e[t]);else e.time&&this.$element.data(this.DATA_LIST_FLAG)[e.time]||(this.$element.data(this.DATA_LIST_FLAG)[e.time]=[]),this.$element.data(this.DATA_LIST_FLAG)[e.time].push(e)},y.fn.danmu=function(i,o){var a=this;return this.each(function(){var e=y(a),t=y.extend({},d.DEFAULTS,"object"==s(i)&&i),n=e.data("danmu"),r="string"==typeof i?i:NaN;n||e.data("danmu",n=new d(a,t)),r&&n[r](o)})},y.fn.danmu.Constructor=d},function(e,t,n){"use strict";n.r(t);var r=n(41),r=n.n(r),n=n(18);r()(n.a,{insert:"head",singleton:!1}),t.default=n.a.locals||{}},function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"fixEvent",function(){return w}),n.d(i,"on",function(){return T}),n.d(i,"off",function(){return C}),n.d(i,"trigger",function(){return R}),n.d(i,"one",function(){return x});function s(e,t,n){function r(){return t.apply(e,arguments)}return t.guid||(t.guid="dhy"),r.guid=n?n+"_"+t.guid:t.guid,r}function a(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}var o={vid:"",userId:"",playerId:"",videoType:"",asynModel:!1,id:"",tagId:"",src:"",width:"",height:"",version:"2.0.12",poster:"",logo:"//player.v.news.cn/player/sdk/static/logo.png",logoPosition:"rightTop",logoPadding:10,logoWidth:"",logoHeight:"",watermark:"//player.v.news.cn/player/sdk/static/xhsp_logo_small.png",watermarkLocation:"//www.news.cn/video/index.htm",duration:0,H5Video:"",playList:"",retryTime:4,retryInterval:2,retryTimeRange:30,rServer:"//player.danghongyun.com",env:"xhw",sourceServer:"//static.danghongyun.com",UUID:"",onLive:!1,isRotate:!1,isfullScreen:!1,hideControlBar:!1,isVR:!1,autoplay:!1,useFlash:!0,hideErrorMsg:!1,danmuBtnEnable:!1,danmuInit:{speed:2e4,sumtime:65522,danmuss:{},default_font_color:"#FFFFFF",font_size_small:16,font_size_big:24,opacity:"0.9",top_botton_danmu_time:6e3,SubtitleProtection:!1,positionOptimize:!1,maxCountInScreen:40,maxCountPerSec:10,danmuLoop:!1,dfcss:{}},mainColor:"",fontColor:"",activeColor:"",controlBarType:"default",transEnable:!0,eventCallback:null,playAndPauseAndStopEnabled:!0,playAndPauseLayoyutEnable:!0,playButtonOverlayPosition:"leftBottom",fullscreenEnabled:!0,lightTopEnabled:!1,nextAndLastEnbaled:!1,volumeBtnEnabled:!0,volumeTopEnabled:!1,forwardAndRewardEnabled:!1,qualityEnabled:!0,playrateEnabled:!1,autoHideControlBar:!0,autoHideTime:3,forwardAndBackRange:5,qualityList:null,playbackRates:[.5,.75,1,1.25,1.5,2],debug:!1,enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,statisticsInfoReportInterval:600,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,autoplayByMuted:!1,volume:.6,preload:!0,loop:!1,muted:!1,crossOrigin:"anonymous",playsinline:!0,webkitPlaysinline:!0,x5video:!1,analyse:!1,analyseUrl:"",logMessage:"",errorMessage:"",skin:{playLayer:n(19),pauseLayer:n(20),loadLayer:n(9),controlBarPause:n(9),controlBarPlay:n(21),controlBarReplay:n(22),controlBarStop:n(23),controlBarInfull:n(10),controlBarExitfull:n(10),controlBarVolume:n(24),controlBarVolumeEm:n(25),controlBarLast:n(26),controlBarNext:n(27),controlBarForward:n(28),controlBarBackward:n(29),controlBarBacktoLive:n(30),controlBarSlider:""},defaultSkin:{playLayer:n(19),pauseLayer:n(20),loadLayer:n(9),controlBarPause:n(9),controlBarPlay:n(21),controlBarReplay:n(22),controlBarStop:n(23),controlBarInfull:n(10),controlBarExitfull:n(10),controlBarVolume:n(24),controlBarVolumeEm:n(25),controlBarLast:n(26),controlBarNext:n(27),controlBarForward:n(28),controlBarBackward:n(29),controlBarBacktoLive:n(30),controlBarSlider:""},adEnable:!0,advertisements:[]},l=n(4),u=n(12),c=n(0);function f(e,t){var n=e.eventCallback;n&&n instanceof Function&&n(e.playerId,t.status,t.msg)}var d=n(1),r=n(3),h=n.n(r),p=1,g={},m="vdata"+(new Date).getTime();function y(e){var t=(t=e[m])||(e[m]=p++);return g[t]||(g[t]={}),g[t]}function v(e){e=e[m];return e&&Object.getOwnPropertyNames(g[e]).length}var _=n(5),b=n.n(_);function A(e,t){var n=y(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&function(e){var t=e[m];if(t){delete g[t];try{delete e[m]}catch(t){e.removeAttribute?e.removeAttribute(m):e[m]=null}}}(e)}function E(t,n,e,r){e.forEach(function(e){t(n,e,r)})}function w(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r,i,o,a=e||h.a.event;for(r in e={},a)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&a.preventDefault||(e[r]=a[r]));e.target||(e.target=e.srcElement||b.a),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,a.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,a.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX&&(i=b.a.documentElement,o=b.a.body,e.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var S=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){S=!0}});h.a.addEventListener("test",null,e)}catch(e){}}();var k=["touchstart","touchmove"];function T(a,e,t){if(Array.isArray(e))return E(T,a,e,t);var s=y(a);s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),s.handlers[e].push(t),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e,t){if(!s.disabled){e=w(e);var n=s.handlers[e.type];if(n)for(var r=n.slice(0),i=0,o=r.length;i<o&&!e.isImmediatePropagationStopped();i++)try{r[i].call(a,e,t)}catch(e){l.a.error(e)}}}),1<=s.handlers[e].length&&(a.addEventListener?(t=!1,S&&-1<k.indexOf(e)&&(t={passive:!0}),a.addEventListener(e,s.dispatcher,t)):a.attachEvent&&a.attachEvent("on"+e,s.dispatcher))}function C(t,e,n){if(v(t)){var r=y(t);if(r.handlers){if(Array.isArray(e))return E(C,t,e,n);var i=function(e){r.handlers[e]=[],A(t,e)};if(e){var o=r.handlers[e];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);A(t,e)}else i(e)}else for(var s in r.handlers)i(s)}}}function R(e,t,n){var r=v(e)?y(e):{},i=e.parentNode||e.ownerDocument;return t=w(t="string"==typeof t?{type:t,target:e}:t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles?R.call(null,i,t,n):i||t.defaultPrevented||(i=y(t.target),t.target[t.type]&&(i.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),i.disabled=!1)),!t.defaultPrevented}function x(t,n,r){if(Array.isArray(n))return E(x,t,n,r);T(t,n,function e(){C(t,n,e),r.apply(this,arguments)})}var O=n(7),L=n.n(O),t=function(){};t.prototype.allowedEvents_={},t.prototype.addEventListener=t.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},O.on(this,e,t),this.addEventListener=n},t.prototype.removeEventListener=t.prototype.off=function(e,t){O.off(this,e,t)},t.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},O.one(this,e,t),this.addEventListener=n},t.prototype.trigger=function(e){var t=e.type||e;e=O.fixEvent(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),O.trigger(this,e)},t.prototype.dispatchEvent=t.prototype.trigger;var I=t;function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){if(!e.nodeName&&!U(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function M(e){if(!G(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function j(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function F(e,t){var n,r,i,o,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return i=a?(o=e.eventBusEl_,3<=t.length&&t.shift(),r=(n=D(t,2))[0],n[1]):(o=(i=D(t,3))[0],r=i[1],i[2]),B(o),M(r),j(i),{isTargetingSelf:a,target:o,type:r,listener:i=s(e,i)}}function N(e,t,n,r){B(e),e.nodeName?i[t](e,n,r):e[t](n,r)}var U=function(t){return t instanceof I||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},G=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},H={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=F(this,n),a=o.isTargetingSelf,s=o.target,l=o.type,u=o.listener;N(s,"on",l,u),a||((i=function(){return e.off(s,l,u)}).guid=u.guid,(a=function(){return e.off("dispose",i)}).guid=u.guid,N(this,"on","dispose",i),N(s,"on","dispose",a))},one:function(){for(var i=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=F(this,t),o=r.isTargetingSelf,a=r.target,s=r.type,l=r.listener;o?N(a,"one",s,l):((o=function e(){i.off(a,s,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l.apply(null,n)}).guid=l.guid,N(a,"one",s,o))},off:function(e,t,n){!e||G(e)?C(this.eventBusEl_,e,t):(t=t,B(e=e),M(t),j(n),n=s(this,n),this.off("dispose",n),e.nodeName?(C(e,t,n),C(e,"dispose",n)):U(e)&&(e.off(t,n),e.off("dispose",n)))},trigger:function(e,t){return R(this.eventBusEl_,e,t)}},V={state:{},setState:function(e){var n,r=this;return"function"==typeof e&&(e=e()),c.b(e,function(e,t){r.state[t]!==e&&((n=n||{})[t]={from:r.state[t],to:e}),r.state[t]=e}),n&&U(this)&&this.trigger({changes:n,type:"statechanged"}),n}},q=(n(39),n(13));function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r=[{key:"registerComponent",value:function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'.concat(e,'"; must be a non-empty string.'));e=a(e),K.components_||(K.components_={});var n=K.getComponent("Player");if("Player"===e&&n&&n.players){var r=n.players,n=Object.keys(r);if(r&&0<n.length&&n.map(function(e){return r[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return K.components_[e]=t}},{key:"getComponent",value:function(e){if(e)return e=a(e),K.components_&&K.components_[e]?K.components_[e]:void 0}}],_=[{key:"player",value:function(){return this.player_}},{key:"options",value:function(e){return e&&(this.options_=Object(c.d)(this.options_,e)),this.options_}},{key:"el",value:function(){return this.el_}},{key:"createEl",value:function(e,t,n){return d.f(e,t,n)}},{key:"contentEl",value:function(){return this.contentEl_||this.el_}},{key:"createControlTextEl",value:function(e){return this.controlTextEl_=d.f("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}},{key:"controlText",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(!e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,d.p(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)}},{key:"id",value:function(){return this.id_}},{key:"name",value:function(){return this.name_}},{key:"children",value:function(){return this.children_}},{key:"getChildById",value:function(e){return this.childIndex_[e]}},{key:"getChild",value:function(e){if(e)return e=a(e),this.childNameIndex_[e]}},{key:"addChild",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length;if("string"==typeof e){var r=a(e),i=t.componentClass||r;t.name=r;var o=K.getComponent(i);if(!o)throw new Error("Component ".concat(i," does not exist"));if("function"!=typeof o)return null;o=new o(this.player_||this,t)}else o=e;return this.children_.splice(n,0,o),"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(r=r||o.name&&a(o.name()))&&(this.childNameIndex_[r]=o),"function"==typeof o.el&&o.el()&&(n=this.contentEl().children[n]||null,this.contentEl().insertBefore(o.el(),n)),o}},{key:"initChildren",value:function(){var n,r=this,i=this.options_.children;i&&(n=this.options_,(Array.isArray(i)?i:Object.keys(i)).map(function(e){var t,e="string"==typeof e?i[t=e]||r.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).forEach(function(e){var t=e.name,e=e.opts;!1!==(e=void 0!==n[t]?n[t]:e)&&((e=!0===e?{}:e).playerOptions=r.options_.playerOptions,(e=r.addChild(t,e))&&(r[t]=e))}))}},{key:"buildCSSClass",value:function(){return""}},{key:"$",value:function(e,t){return d.a(e,t||this.contentEl())}},{key:"$$",value:function(e,t){return d.b(e,t||this.contentEl())}},{key:"hasClass",value:function(e){return d.j(this.el_,e)}},{key:"addClass",value:function(e){d.c(this.el_,e)}},{key:"removeClass",value:function(e){d.m(this.el_,e)}},{key:"replaceClass",value:function(e,t){this.removeClass(e),this.addClass(t)}},{key:"toggleClass",value:function(e,t){d.q(this.el_,e,t)}},{key:"show",value:function(){this.removeClass("hidden")}},{key:"hide",value:function(){this.addClass("hidden")}},{key:"lockShowing",value:function(){this.addClass("lock-showing")}},{key:"unlockShowing",value:function(){this.removeClass("lock-showing")}},{key:"localize",value:function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[r],r=r&&r.split("-")[0],r=i&&i[r],t=t;return o&&o[e]?t=o[e]:r&&r[e]&&(t=r[e]),t=n?t.replace(/\{(\d+)\}/g,function(e,t){t=n[t-1];return void 0===t?e:t}):t}},{key:"getAttribute",value:function(e){return d.h(this.el_,e)}},{key:"setAttribute",value:function(e,t){d.n(this.el_,e,t)}},{key:"removeAttribute",value:function(e){d.l(this.el_,e)}},{key:"width",value:function(e,t){return this.dimension("width",e,t)}},{key:"height",value:function(e,t){return this.dimension("height",e,t)}},{key:"dimensions",value:function(e,t){this.width(e,!0),this.height(t)}},{key:"dimension",value:function(e,t,n){if(void 0!==t)return-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;t=this.el_.style[e],n=t.indexOf("px");return-1!==n?parseInt(t.slice(0,n),10):parseInt(this.el_["offset"+a(e)],10)}},{key:"currentDimension",value:function(e){var t,n=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return"function"==typeof h.a.getComputedStyle&&(n=(t=h.a.getComputedStyle(this.el_)).getPropertyValue(e)||t[e]),0===(n=parseFloat(n))&&(e="offset".concat(a(e)),n=this.el_[e]),n}},{key:"currentWidth",value:function(){return this.currentDimension("width")}},{key:"currentHeight",value:function(){return this.currentDimension("height")}},{key:"focus",value:function(){this.el_.focus()}},{key:"blur",value:function(){this.el_.blur()}},{key:"changeNodeImg",value:function(e){e&&""!==e&&console.log(this.el_.childNodes)}},{key:"setTimeout",value:function(e,t){e=s(this,e);var n=h.a.setTimeout(e,t),t=function(){this.clearTimeout(n)};return t.guid="vjs-timeout-".concat(n),this.on("dispose",t),n}},{key:"clearTimeout",value:function(e){h.a.clearTimeout(e);function t(){}return t.guid="vjs-timeout-".concat(e),this.off("dispose",t),e}},{key:"setInterval",value:function(e,t){e=s(this,e);var n=h.a.setInterval(e,t),t=function(){this.clearInterval(n)};return t.guid="vjs-interval-".concat(n),this.on("dispose",t),n}},{key:"clearInterval",value:function(e){h.a.clearInterval(e);function t(){}return t.guid="vjs-interval-".concat(e),this.off("dispose",t),e}},{key:"Timer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this;this.time=10,this.fun=null,this.timeObj=null,this.number=0,this.numberTotal=null,this.runing=!1,this.startFun=function(){r.number++,r.fun(),null!=r.numberTotal&&r.number>=r.numberTotal&&r.stop()},this.start=function(){r.runing||(r.runing=!0,r.timeObj=h.a.setInterval(r.startFun,t))},this.stop=function(){r.runing&&(r.runing=!1,h.a.clearInterval(r.timeObj),r.timeObj=null)},t&&(this.time=t),e&&(this.fun=e),n&&(this.numberTotal=n),this.start()}},{key:"emitTapEvents",value:function(){var n,t=0,r=null;this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),n=!0)}),this.on("touchmove",function(e){var t;1<e.touches.length?n=!1:r&&(t=e.touches[0].pageX-r.pageX,e=e.touches[0].pageY-r.pageY,10<Math.sqrt(t*t+e*e)&&(n=!1))});function e(){n=!1}this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===n&&(new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap"))})}},{key:"hammer",value:function(e){return new Hammer.Manager(e)}},{key:"showParentFirst",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"inactive",e=$(this.el_).parent().parent().hasClass(e)||$(this.el_).parent().hasClass(e);return this.player_.dispatchEvent("userActiveEvent"),e}},{key:"config",get:function(){return this.player_._config}}],z((t=K).prototype,_),z(t,r),r=K;function K(e,t,n){var r;(function(e){if(!(e instanceof K))throw new TypeError("Cannot call a class as a function")})(this),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=Object(c.d)({},this.options_),t=this.options_=Object(c.d)(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(r=e&&e.id||"no_player",this.id_="".concat(r,"_component_01")),this.name_=t.name||null,this.tagId=this.player_._config.tagId||"tag-id-old-version",this.FORMMAT=new q.a,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'.concat(t,'" does not refer to an element.'));e.eventBusEl_=e[t]}else e.eventBusEl_=d.f("span",{className:"vjs-event-bus"});c.a(e,H),e.on("dispose",function(){return e.off()})}(this,{eventBusKey:this.el_?"el_":null}),r=(e=this).constructor.defaultState,c.a(e,V),e.state=c.a({},e.state,r),"function"==typeof e.handleStateChanged&&U(e)&&e.on("statechanged",e.handleStateChanged),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren()}r.prototype.supportsRaf_="function"==typeof h.a.requestAnimationFrame&&"function"==typeof h.a.cancelAnimationFrame,r.registerComponent("Component",r);var W=r;function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ee(n);return e=r?(e=ee(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Y(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(r,W);var e,n=J(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"danmu-layer",id:"danmu-layer-".concat(this.tagId),tabIndex:0},t);return Q(ee(r.prototype),"createEl",this).call(this,e,t,n)}}],X(r.prototype,e),r}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return(re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ae(n);return e=r?(e=ae(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==te(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("DanmuLayer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(i,W);var e,r=oe(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),e.id=e.id||"DHYPlayer_dhy",e.on("playStateChange",function(){n.handlePlayStateChange()}),e.on("ended",function(){n.handleEnded()}),e.on("loadStart",function(){n.handLoadStart()}),(n=r.call(this,e,t)).addClass("hidden"),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<span class="player-control-text">Play Video</span>',className:"load-layer",tabIndex:0},t);return re(ae(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handlePlayStateChange",value:function(){}},{key:"handleEnded",value:function(){}},{key:"handLoadStart",value:function(){this.removeClass("hidden")}}],ne(i.prototype,e),i}();function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return(ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=de(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=de(n);return e=r?(e=de(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==se(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("LoadLayer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(r,W);var e,n=fe(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).emitTapEvents(),t.enable(),t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:this.buildCSSClass(),tabIndex:0},t);return"button"===e&&l.a.error("Creating a ClickableComponent with an HTML element of ".concat(e," is not supported; use a Button instead.")),n=Object(c.a)({role:"button"},n),this.tabIndex_=t.tabIndex,ue(de(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"createControlTextEl",value:function(e){return this.controlTextEl_=d.f("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}},{key:"controlText",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(!e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,d.p(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)}},{key:"buildCSSClass",value:function(){return"".concat(ue(de(r.prototype),"buildCSSClass",this).call(this))}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("mousedown",this.handleMouseDown))}},{key:"disable",value:function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("mousedown",this.handleMouseDown)}},{key:"handleClick",value:function(e){}},{key:"handleFocus",value:function(e){T(b.a,"keydown",s(this,this.handleKeyPress))}},{key:"handleKeyPress",value:function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):ue(de(r.prototype),"handleKeyPress",this)&&ue(de(r.prototype),"handleKeyPress",this).call(this,e)}},{key:"handleBlur",value:function(e){C(b.a,"keydown",s(this,this.handleKeyPress))}},{key:"handleMouseDown",value:function(e){}}],le(r.prototype,e),r}();W.registerComponent("ClickableComponent",r);var he=r;function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_e(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_e(n);return e=r?(e=_e(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==pe(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(i,he);var e,r=ve(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),e.on("playStateChange",function(){n.handlePlayStateChange()}),e.on("ended",function(){n.handleEnded()}),e.on("useBehaviorEvent",function(){n.useBehaviorEvent()}),e.on("playStateChangeForAutoPlay",function(){n.handlePlayStateChangeForDelay()}),e.on("complete",function(){n.setTimeout(function(){n.handlePlayStateChange()},500)}),n.autoHide(),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<img src=" '.concat(this.config.autoplay?this.config.skin.pauseLayer:this.config.skin.playLayer,'"/>'),className:"play-layer play-layer-".concat(this.config.playButtonOverlayPosition),tabIndex:0},t),r="";return this.config.playButtonOverlayLeft&&(r+="left:".concat(this.config.playButtonOverlayLeft,";")),this.config.playButtonOverlayTop&&(r+="top:".concat(this.config.playButtonOverlayTop,";")),this.config.playButtonOverlayRight&&(r+="right:".concat(this.config.playButtonOverlayRight,";")),this.config.playButtonOverlayBottom&&(r+="bottom:".concat(this.config.playButtonOverlayBottom,";")),this.config.playButtonOverlayMarginLeft&&(r+="margin-left:".concat(this.config.playButtonOverlayMarginLeft,";")),this.config.playButtonOverlayMarginBottom&&(r+="margin-bottom:".concat(this.config.playButtonOverlayMarginBottom,";")),this.config.playButtonOverlayMarginTop&&(r+="margin-top:".concat(this.config.playButtonOverlayMarginTop,";")),this.config.playButtonOverlayMarginRight&&(r+="margin-right:".concat(this.config.playButtonOverlayMarginRight,";")),n.style=r,me(_e(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handlePlayStateChange",value:function(){var e=this.player_.isPlaying;this.el_.firstChild.setAttribute("src",e?this.config.skin.pauseLayer:this.config.skin.playLayer),e||this.userActive()}},{key:"handlePlayStateChangeForDelay",value:function(){var e=this;this._ti=setTimeout(function(){e.handlePlayStateChange(),clearTimeout(e._ti)},100)}},{key:"handleEnded",value:function(){clearTimeout(this._timeInter),this.addClass("hidden")}},{key:"handleClick",value:function(e){e.stopPropagation(),this.player_.isPlaying?this.player_.pause():this.player_.play(),this._useBehaviorWaiting=!1}},{key:"handleMouseDown",value:function(){this.userActive()}},{key:"userActive",value:function(){this.removeClass("hidden"),this.autoHide()}},{key:"autoHide",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];clearInterval(this._timeInter),t&&(this._timeInter=setInterval(function(){e.player_.isPlaying&&!e.hasClass("hidden")&&e.addClass("hidden")},1e3*this.config.autoHideTime))}},{key:"useBehaviorEvent",value:function(){this.removeClass("hidden"),this._useBehaviorWaiting=!0}}],ge(i.prototype,e),i}();function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return(Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ke(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ke(n);return e=r?(e=ke(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==be(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayLayer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(r,W);var e,n=Se(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),e.id=e.id||"DHYPlayer_dhy",n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<span class="player-msg-text">'.concat(this.msg||"","</span>"),className:"msg-layer hidden",tabIndex:0},t);return Ee(ke(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"hideMsg",value:function(){this.addClass("hidden")}},{key:"showMsg",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this.clearTimeout(this.timeoutId),this.removeClass("hidden"),this.el_.firstChild.innerText=e,this.timeoutId=this.setTimeout(this.hideMsg,5e3)}}],Ae(r.prototype,e),r}();W.registerComponent("MsgLayer",r);var Te,Ce=n(2);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return(Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Pe(n);return e=r?(e=Pe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Re(e)&&"function"!=typeof e?De(t):e}}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(i,W);var e,r=Ie(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t)).enable(),n.player_.on("showQualityEvent",function(e){n.handleShowQualityEvent(e)}),n.player_.on("changeQualityEvent",function(e){n.handleChangeQualityEvent(e)}),Te=De(n),n._cursorEnter=!1,n._lasttime=0,n.on("mouseenter",n.handleMouseEnter),n.on("mouseleave",n.handleMouseLeave),n.highlightLi(),n}return e=[{key:"createEl",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.qualityList=this.config.qualityList,this.qualityList.forEach(function(e){(e.current||e.isDefault)&&(t._current=e)}),void 0===this._current&&(this._current=this.qualityList[0]);n=Object(c.a)({innerHTML:this.innerHTML(this.qualityList),className:"quality-layer hidden",tabIndex:0},n);return Oe(Pe(i.prototype),"createEl",this).call(this,e,n,r)}},{key:"innerHTML",value:function(e){var n="";return e.forEach(function(e,t){n+="<li data-index=".concat(t," data-current=").concat(e.current||e.isDefault,">").concat(e.name||e.lable,"</li>")}),'<ul class="quality-item">'.concat(n,"</ul>")}},{key:"enable",value:function(){for(var e=this.$(".quality-item").children,t=this.handClick,n=0;n<e.length;n++)e[n].onclick=t}},{key:"highlightLi",value:function(){for(var e=this.$(".quality-item").children,t=0;t<e.length;t++)$(e[t]).data().current?($(e[t]).addClass("li-active"),this.config.activeColor&&$(e[t]).css("color",this.config.activeColor)):($(e[t]).removeClass("li-active"),$(e[t]).css("color",""))}},{key:"handClick",value:function(e){e.stopPropagation();e=this.getAttribute("data-index");"true"===this.getAttribute("data-current")||(Te.reset(),this.setAttribute("data-current",!0),$(this).addClass("li-active"),Te.config.activeColor&&$(this).css("color",Te.config.activeColor),Te.player_.dispatchEvent("changeQualityEvent",e)),Te.autoHide()}},{key:"handleMouseEnter",value:function(e){e.stopPropagation(),this._cursorEnter=!0}},{key:"handleMouseLeave",value:function(e){e.stopPropagation(),this._cursorEnter=!1,this.addClass("hidden")}},{key:"reset",value:function(){for(var e=this.$(".quality-item").children,t=0;t<e.length;t++)e[t].setAttribute("data-current",!1),$(e[t]).removeClass("li-active"),$(e[t]).css("color","")}},{key:"handleShowQualityEvent",value:function(e){var t=this;e<=0?setTimeout(function(){t._cursorEnter||t.addClass("hidden")},200):(this.el_.style.cssText="left:".concat(e,"px;"),this.removeClass("hidden")),this.autoHide()}},{key:"handleChangeQualityEvent",value:function(e){var t=this.config.qualityList[e],e=this.player_.currentTime;this.config.src=t.url||this.config.src,this._currentTime=this.player_.currentTime,this.player_.dispatchEvent("mediaSourceChange",this.config.src),this.player_.currentTime=e}},{key:"autoHide",value:function(){var e=this;this._timeInter&&clearInterval(this._timeInter),this._timeInter=setInterval(function(){!Ce.b&&e._cursorEnter||e.hasClass("hidden")||e.addClass("hidden")},1e3*this.config.autoHideTime)}}],xe(i.prototype,e),i}();function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return(Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=He(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=He(n);return e=r?(e=He(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Me(e)&&"function"!=typeof e?Ge(t):e}}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("QualityLayer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(i,W);var e,r=Ue(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t)).enable(),n.player_.on("showPlayrateEvent",function(e){n.handleShowPlayrateEvent(e)}),n.player_.on("changePlayrateEvent",function(e){n.handleChangePlayrateEvent(e)}),Be=Ge(n),n._cursorEnter=!1,n._current=1,n.on("mouseenter",n.handleMouseEnter),n.on("mouseleave",n.handleMouseLeave),n.highlightLi(),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"playrate-layer hidden ",innerHTML:this.innerHTML(this.config.playbackRates),tabIndex:0},t);return Fe(He(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"enable",value:function(){for(var e=this.$(".playrate-item").children,t=this.handClick,n=0;n<e.length;n++)e[n].onclick=t}},{key:"handClick",value:function(e){e.stopPropagation(),Be.player_.dispatchEvent("changePlayrateEvent",$(this).data().current),Be.autoHide()}},{key:"innerHTML",value:function(e){var n="";return e.reverse().forEach(function(e,t){n+="<li data-index=".concat(t," data-current=").concat(e,">").concat(e,"x</li>")}),'<ul class="playrate-item">'.concat(n,"</ul>")}},{key:"highlightLi",value:function(){for(var e=this.$(".playrate-item").children,t=this._current,n=0;n<e.length;n++)t===$(e[n]).data().current?($(e[n]).addClass("li-active"),this.config.activeColor&&$(e[n]).css("color",this.config.activeColor)):($(e[n]).removeClass("li-active"),$(e[n]).css("color",""))}},{key:"handleMouseEnter",value:function(e){e.stopPropagation(),this._cursorEnter=!0}},{key:"handleMouseLeave",value:function(e){e.stopPropagation(),this._cursorEnter=!1,this.addClass("hidden")}},{key:"handleShowPlayrateEvent",value:function(e){var t=this;e<=0?setTimeout(function(){t._cursorEnter||t.addClass("hidden")},200):(this.el_.style.cssText="left:".concat(e,"px;"),this.removeClass("hidden")),this.autoHide()}},{key:"handleChangePlayrateEvent",value:function(e){this._current=e,this.highlightLi(),this.player_.dispatchEvent("mediaPlayrateChange",e)}},{key:"autoHide",value:function(){var e=this;this._timeInter&&clearInterval(this._timeInter),this._timeInter=setInterval(function(){!Ce.b&&e._cursorEnter||e.hasClass("hidden")||e.addClass("hidden")},1e3*this.config.autoHideTime)}}],je(i.prototype,e),i}();function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t,n){return(ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ye(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ye(n);return e=r?(e=Ye(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ve(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayrateLayer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(i,W);var e,n=We(i);function i(e,t){return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).el_.style.cssText="padding:".concat(t.config.logoPadding,"px;"),t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r='style="'+(this.config.logoWidth?"width:".concat(this.config.logoWidth,";"):"")+(this.config.logoHeight?"height:".concat(this.config.logoHeight,";"):"")+'"',t=Object(c.a)({innerHTML:'<img src="'.concat(this.config.logo,'" ').concat(r,"/>"),className:"logo-layer ".concat(this.buildCSSClass()),tabIndex:0},t);return ze(Ye(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"hideLogo",value:function(){this.addClass("hidden")}},{key:"showLogo",value:function(){this.removeClass("hidden")}},{key:"buildCSSClass",value:function(){switch(this.config.logoPosition){case"leftBottom":return"logo-layer-leftBottom";case"rightTop":return"logo-layer-rightTop";case"rightBottom":return"logo-layer-rightBottom";default:return"logo-layer-leftTop"}}}],qe(i.prototype,e),i}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return(Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=et(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=et(n);return e=r?(e=et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Xe(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("LogoLayer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(i,he);var e,r=Je(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),e.on("playStateChange",function(){n.handlePlayStateChange()}),e.on("complete",function(){n.handlePlayComplate()}),e.on("playStateChangeForAutoPlay",function(){n.handlePlayStateChangeForDelay()}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:this.innerHTML(),className:this.buildCSSClass(),tabIndex:0},t),n=Object(c.a)({role:"button","aria-icon":"true"},n);return Qe(et(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"buildCSSClass",value:function(){return"compent PlayToggle"}},{key:"innerHTML",value:function(){return'<img src=" '.concat(this.config.autoplay?this.pauseImgType():this.config.skin.controlBarPlay,'"/>')}},{key:"pauseImgType",value:function(){return this.config.onLive?this.config.skin.controlBarStop:this.config.skin.controlBarPause}},{key:"handlePlayStateChange",value:function(){this.removeClass("replay-icon"),this.el_.firstChild.setAttribute("src",this.player_.isPlaying?this.pauseImgType():this.config.skin.controlBarPlay)}},{key:"handlePlayComplate",value:function(){this.addClass("replay-icon"),this.el_.firstChild.setAttribute("src",this.config.skin.controlBarReplay)}},{key:"handlePlayStateChangeForDelay",value:function(){var e=this;this._ti=setTimeout(function(){e.handlePlayStateChange(),clearTimeout(e._ti)},100)}},{key:"handleClick",value:function(e){var t=this;e.stopPropagation(),this.showParentFirst(),this.player_.isPlaying?this.player_.pause():(this.config.onLive&&this.player_.reload(),this._timeInter=setTimeout(function(){t.player_.play(),clearTimeout(t._timeInter)},500))}}],$e(i.prototype,e),i}();function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return(rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=st(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=st(n);return e=r?(e=st(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==tt(e)&&"function"!=typeof e?at(t):e}}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.prototype.controlText_="Play",W.registerComponent("PlayToggle",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(i,he);var e,r=ot(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),at(n=r.call(this,e,t)),e.on("volumeChange",function(){n.handleVolumeChange()}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<img src=" '.concat(this._innerHTML(),'"/>'),className:"compent volume floatRight",tabIndex:0},t);return rt(st(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"_innerHTML",value:function(){return this.config.muted?this.config.skin.controlBarVolumeEm:this.config.skin.controlBarVolume}},{key:"handleClick",value:function(e){e.stopPropagation(),this.showParentFirst()||(this.player_.muted?this.player_.muted=!1:this.player_.muted=!0)}},{key:"handleVolumeChange",value:function(){var e=this.el_.firstChild;this.player_.muted?e.setAttribute("src",this.config.skin.controlBarVolumeEm):e.setAttribute("src",this.config.skin.controlBarVolume)}}],nt(i.prototype,e),i}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t,n){return(ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ht(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ht(n);return e=r?(e=ht(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==lt(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("Volume",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(i,he);var e,r=dt(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),e.on("fullscreenChange",function(){n.handleFullscreenChange()}),e.on("addFullScreenCss",function(){n.handAddFullScreenCss()}),e.on("moveFullScreenCss",function(){n.handMoveFullScreenCss()}),e.on("exitfullscreenByEsc",function(){n.handleFullscreenChange()}),n._isFullScreen=!1,n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"compent FullScreen floatRight",innerHTML:'<img src=" '.concat(this.config.skin.controlBarInfull,'"/>'),tabIndex:0},t);return ct(ht(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){e.stopPropagation(),this.showParentFirst()||this.player_.dispatchEvent("fullscreenChange")}},{key:"handleFullscreenChange",value:function(){this._isFullScreen?this.handMoveFullScreenCss():this.handAddFullScreenCss()}},{key:"handAddFullScreenCss",value:function(){this.el_.firstChild.setAttribute("src",this.config.skin.controlBarInfull),this._isFullScreen=!0}},{key:"handMoveFullScreenCss",value:function(){this.el_.firstChild.setAttribute("src",this.config.skin.controlBarInfull),this._isFullScreen=!1}}],ut(i.prototype,e),i}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t,n){return(mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_t(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_t(n);return e=r?(e=_t(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==pt(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("FullScreen",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(r,W);var e,n=vt(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"component-blank",tabIndex:0},t),n=Object(c.a)({},n);return mt(_t(r.prototype),"createEl",this).call(this,e,t,n)}}],gt(r.prototype,e),r}();function bt(e,t){var n=1<arguments.length&&void 0!==t?t:e;e=e<0?0:e;var r=Math.floor(e%60),i=Math.floor(e/60%60),o=Math.floor(e/3600),t=Math.floor(n/60%60),n=Math.floor(n/3600);return(o=0<(o=isNaN(e)||e===1/0?i=r="-":o)||0<n?o+":":"")+(i=((o||10<=t)&&i<10?"0"+i:i)+":")+(r<10?"0"+r:r)}function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e,t,n){return(wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tt(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Tt(n);return e=r?(e=Tt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==At(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("BlankComponent",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(i,W);var e,r=kt(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t))._player=e,n._player.on("timeupdate",function(){n.handleTimeupdate()}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:"",className:this.buildCSSClass(),tabIndex:0},t),n=wt(Tt(i.prototype),"createEl",this).call(this,e,t,n);return n.innerText="0:00:00",n}},{key:"buildCSSClass",value:function(){return"control-text time-current-text"}},{key:"handleTimeupdate",value:function(){this.el_.innerText=bt(this._player.currentTime)}}],Et(i.prototype,e),i}();function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){return(xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=It(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=It(n);return e=r?(e=It(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ct(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("TimeCurrent",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(i,W);var e,r=Lt(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t))._player=e,n._player.on("durationchange",function(){return n.durationchange()}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:"",className:"control-text time-total-text",tabIndex:0},t),n=xt(It(i.prototype),"createEl",this).call(this,e,t,n);return this.duration_=this.player_._config.duration,n.innerText="/"+bt(this.duration_),n}},{key:"durationchange",value:function(){this.duration_=this._player.duration,this.el_.innerText="/"+bt(this._player.duration)}}],Rt(i.prototype,e),i}();function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t,n){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ft(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ft(n);return e=r?(e=Ft(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Dt(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("TimeTotal",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(r,W);var e,n=jt(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:"",className:"time-view",tabIndex:0},t);return Bt(Ft(r.prototype),"createEl",this).call(this,e,t,n)}}],Pt(r.prototype,e),r}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qt(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=qt(n);return e=r?(e=qt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Nt(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.prototype.options_={children:["TimeCurrent","TimeTotal"]},W.registerComponent("TimeView",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(r,he);var e,n=Vt(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<img src=" '.concat(this.config.skin.controlBarLast,'"/>'),className:"compent compent-img PlayLast floatLeft",tabIndex:0},t),n=Object(c.a)({role:"button","aria-live":"polite"},n);return Gt(qt(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){e.isImmediatePropagationStopped(),this.config.playList?this.player_.playLast():l.a.warn("playList is empty ".concat(this.config.playList," "))}}],Ut(r.prototype,e),r}();function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return(Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$t(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=$t(n);return e=r?(e=$t(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==zt(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayLast",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(r,he);var e,n=Xt(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<img src=" '.concat(this.config.skin.controlBarBackward,'"/>'),className:"compent PlayBackward floatLeft",tabIndex:0},t),n=Object(c.a)({role:"button","aria-live":"polite"},n);return Wt($t(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){var t,n=this.config.forwardAndBackRange||5;this.player_&&(t=this.player_.currentTime,this.player_.seek(Math.max(t-n,.5))),e.stopPropagation()}}],Kt(r.prototype,e),r}();function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return(Jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=nn(n);return e=r?(e=nn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Qt(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayBackward",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(i,he);var e,r=tn(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),$(n.el_).on("click",function(){n.handleClick()}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<img src=" '.concat(this.config.skin.controlBarForward,'"/>'),className:"compent PlayForward floatLeft",tabIndex:0},t),n=Object(c.a)({role:"button","aria-live":"polite"},n);return Jt(nn(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){var t,n,r=this.config.forwardAndBackRange||5;this.player_&&(t=this.player_.currentTime,n=this.player_.duration,this.player_.seek(Math.min(t+r,n-.5)))}}],Zt(i.prototype,e),i}();function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t,n){return(an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=un(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=un(n);return e=r?(e=un(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==rn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayForward",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(i,W);var e,r=ln(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),$(n.el_).on("click",function(){n.handleClick()}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:'<img src=" '.concat(this.config.skin.controlBarNext,'"/>'),className:"compent compent-img PlayNext floatLeft",tabIndex:0},t),n=Object(c.a)({role:"button","aria-live":"polite"},n);return an(un(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){this.config.playList?this.player_.playNext():log.warn("playList is  ".concat(this.config.playList," "))}}],on(i.prototype,e),i}();function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t,n){return(dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=gn(n);return e=r?(e=gn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==cn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayNext",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(i,he);var e,r=pn(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t)).player_.on("changeQualityEvent",function(e){n.handleChangeQualityEvent(e)}),n.on("mouseenter",n.handleClick),n.on("mouseleave",n.handleMouseleave),n}return e=[{key:"createEl",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.qualityList=this.config.qualityList,this.qualityList.forEach(function(e){(e.current||e.isDefault)&&(t.vObj=e)}),null==this.vObj&&(this.vObj=this.qualityList[0]);n=Object(c.a)({innerHTML:'<span class="btn-playing transparent">'.concat(this.vObj.name||this.vObj.lable,"</span>"),className:this.buildCSSClass(),tabIndex:0},n);return dn(gn(i.prototype),"createEl",this).call(this,e,n,r)}},{key:"buildCSSClass",value:function(){return"quality-select floatRight"}},{key:"handleClick",value:function(e){e.stopPropagation(),this.showParentFirst(),this.player_.dispatchEvent("showQualityEvent",$(this.el_).offset().left-8)}},{key:"handleMouseleave",value:function(e){e.stopPropagation(),this.player_.dispatchEvent("showQualityEvent",-1)}},{key:"handleChangeQualityEvent",value:function(e){e=this.qualityList[e].name||this.qualityList[e].lable;this.el_.firstChild.innerHTML=e}}],fn(i.prototype,e),i}();function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t,n){return(vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=An(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=An(n);return e=r?(e=An(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==mn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("Quality",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(i,he);var e,r=bn(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t)).player_.on("changePlayrateEvent",function(e){n.handleChangePlayrateEvent(e)}),n.on("mouseenter",n.handleClick),n.on("mouseleave",n.handleMouseleave),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.playbackRates=this.config.playbackRates;t=Object(c.a)({className:"playrate-select floatRight",tabIndex:0,innerHTML:'<span class="btn-playing transparent btn-playrate">鍊嶉€�</span>'},t);return vn(An(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){e.stopPropagation(),this.showParentFirst(),this.player_.dispatchEvent("showPlayrateEvent",$(this.el_).offset().left-10)}},{key:"handleMouseleave",value:function(e){e.stopPropagation(),this.player_.dispatchEvent("showPlayrateEvent",-1)}},{key:"handleChangePlayrateEvent",value:function(e){}}],yn(i.prototype,e),i}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,t,n){return(Sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Cn(n);return e=r?(e=Cn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==En(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("Playrate",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(n,he);var e,t=Tn(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return e=[{key:"createEl",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t=Object(c.a)({className:this.buildCSSClass()},t),n=Object(c.a)({type:"button","aria-live":"polite"},n),n=W.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(n),n}},{key:"addChild",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return l.a.warn("Adding an actionable (user controllable) child to a Button (".concat(n,") is not supported; use a ClickableComponent instead.")),W.prototype.addChild.call(this,e,t)}},{key:"enable",value:function(){Sn(Cn(n.prototype),"enable",this).call(this),this.el_.removeAttribute("disabled")}},{key:"disable",value:function(){Sn(Cn(n.prototype),"disable",this).call(this),this.el_.setAttribute("disabled","disabled")}},{key:"handleKeyPress",value:function(e){32!==e.which&&13!==e.which&&Sn(Cn(n.prototype),"handleKeyPress",this).call(this,e)}}],wn(n.prototype,e),n}();function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t,n){return(On="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function In(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Dn(n);return e=r?(e=Dn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Rn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("Button",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(i,he);var e,r=In(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t))._danmuOpen=!0,n.changetTextConent(),n.player_.on("changeDanmuStatusEvent",function(e){n.handleDanmuStateChange(e)}),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({innerHTML:this.innerHTML(),className:"DanmuBtn floatRight",tabIndex:0},t),n=Object(c.a)({role:"button","aria-icon":"true"},n);return On(Dn(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"innerHTML",value:function(){return'<span class="btn-playing transparent"> '.concat(this.textContent()," </span>")}},{key:"textContent",value:function(){return this._danmuOpen?"寮瑰箷寮€":"寮瑰箷鍏�"}},{key:"changetTextConent",value:function(){this.el_.firstChild.innerHTML=this.textContent()}},{key:"handleDanmuStateChange",value:function(e){this._danmuOpen=!this._danmuOpen,this.changetTextConent()}},{key:"handleClick",value:function(e){e.stopPropagation(),this.player_.dispatchEvent("changeDanmuStatusEvent",!this._danmuOpen)}}],xn(i.prototype,e),i}();function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t,n){return(Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Nn(n);return e=r?(e=Nn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Pn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("DanmuBtn",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(r,he);var e,n=Fn(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"compent watermark floatRight",innerHTML:'<img src=" '.concat(this.config.watermark,'"/>'),tabIndex:0},t);return Mn(Nn(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleClick",value:function(e){e.stopPropagation(),window.location.href=this.config.watermarkLocation}}],Bn(r.prototype,e),r}();function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t,n){return(Hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Kn(n);return e=r?(e=Kn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Un(e)&&"function"!=typeof e?zn(t):e}}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("Watermark",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(r,W);var e,n=qn(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).bar=t.getChild(t.options_.barName)||zn(t),t.vertical(!!t.options_.vertical),t.on("mousedown",t.handleMouseDown),t.on("touchstart",t.handleMouseDown),t.on("focus",t.handleFocus),t.on("blur",t.handleBlur),t.on("click",t.handleClick),t.playerEvent&&t.on(e,t.playerEvent,t.update),t}return e=[{key:"createEl",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.className=t.className+" vjs-slider",t=Object(c.a)({tabIndex:0},t),n=Object(c.a)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),Hn(Kn(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleMouseDown",value:function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),d.d(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)}},{key:"handleMouseMove",value:function(e){}},{key:"handleMouseUp",value:function(){var e=this.bar.el_.ownerDocument;d.r(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()}},{key:"update",value:function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){var n=(100*(e="number"!=typeof e||e!=e||e<0||e===1/0?0:e)).toFixed(2)+"%",t=t.el().style;return this.vertical()?t.height=n:t.width=n,e}}}},{key:"calculateDistance",value:function(e){e=d.i(this.el_,e);return this.vertical()?e.y:e.x}},{key:"handleFocus",value:function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)}},{key:"handleKeyPress",value:function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())}},{key:"handleBlur",value:function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)}},{key:"handleClick",value:function(e){e.stopImmediatePropagation(),e.preventDefault()}},{key:"vertical",value:function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}],Gn(r.prototype,e),r}();W.registerComponent("Slider",r);var Wn,Yn=r;function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t,n){return(Qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=tr(n);return e=r?(e=tr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Xn(e)&&"function"!=typeof e?er(t):e}}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(i,Yn);var e,r=Jn(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),e.on("volumeChange",function(){n.handleVolumeupdate()}),Ce.b&&n.on("touchstart",function(){n.handleMouseDown()}),n.enable(),Wn=er(n),n.changeControlBarColor(),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"volume-slider-scrub",tabIndex:0},t);return Qn(tr(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,this.el_.style.left=100*this.config.volume+"%")}},{key:"handleVolumeupdate",value:function(){this._draging||(this.el_.style.left=100*this.player_.volume+"%")}},{key:"handleMouseDown",value:function(e){var t=this;$(this.el_).parent().parent().parent().on("mousemove",this.handleMousemove),document.onmouseup=function(){t.handleMouseUp()}}},{key:"handleMouseSeek",value:function(e){}},{key:"handleMouseUp",value:function(e){$(this.el_).parent().parent().parent().off("mousemove",this.handleMousemove)}},{key:"handleMousemove",value:function(e){var t=$(Wn.el_).parent().offset().left,n=($(Wn.el_).parent().width(),$(Wn.el_).width(),e.clientX,Math.max(0,Math.min(98,e.clientX-t))),t=$(Wn.el_).parent().children(":first");Wn.el_.style.left=n+"%",t.css("width",n+"%"),Wn.player_.muted=!1,Wn.player_.volume=n/100,0==n&&(Wn.player_.muted=!0)}},{key:"handleDrag",value:function(e){console.log("drag")}},{key:"handleDragend",value:function(e){console.log("drag end")}},{key:"stopEventBubble",value:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1}},{key:"changeControlBarColor",value:function(){this.config.activeColor&&(this.el_.style.backgroundColor=this.config.activeColor)}}],$n(i.prototype,e),i}();function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ir(e,t,n){return(ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function or(e,t){return(or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ar(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=sr(n);return e=r?(e=sr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==nr(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("VolumeTrack",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(i,W);var e,r=ar(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),e.on("volumeChange",function(){n.handleVolumeupdate()}),n.enable(),n.changeControlBarColor(),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"volume-loaded",tabIndex:0},t),n=Object(c.a)({role:"button"},n);return ir(sr(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,this.el_.style.width=100*this.config.volume+"px")}},{key:"handleVolumeupdate",value:function(){this.el_.style.width=100*this.player_.volume+"px"}},{key:"changeControlBarColor",value:function(){this.config.activeColor&&(this.el_.style.backgroundColor=this.config.activeColor)}}],rr(i.prototype,e),i}();function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t,n){return(cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=hr(n);return e=r?(e=hr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==lr(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function hr(e){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("VolumeLoaded",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(r,W);var e,n=dr(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).enable(),t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"compent volume-bar floatRight",tabIndex:0},t),n=Object(c.a)({role:"button"},n);return cr(hr(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick))}},{key:"handleClick",value:function(e){var t=this.getChild("VolumeLoaded"),n=this.getChild("VolumeTrack"),e=e.offsetX/this.el_.offsetWidth;t.el_.style.width=n.el_.style.left=100*e+"%",this.player_.volume=e}}],ur(r.prototype,e),r}();function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t,n){return(mr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_r(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_r(n);return e=r?(e=_r(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==pr(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.prototype.options_={children:["VolumeLoaded","VolumeTrack"]},W.registerComponent("VolumeBar",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(r,W);var e,n=vr(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"control-buttons-container",tabIndex:0},t);return mr(_r(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"initChildren",value:function(){var e=this.config,t=[];e.playAndPauseAndStopEnabled&&t.push("PlayToggle"),e.forwardAndRewardEnabled&&t.push("PlayBackward"),e.forwardAndRewardEnabled&&t.push("PlayForward"),e.playList&&0<e.playList.length&&t.push("PlayNext"),t.push("TimeView"),e.fullscreenEnabled&&t.push("FullScreen"),Ce.c&&""!=e.watermark&&t.push("Watermark"),Ce.c&&t.push("VolumeBar"),e.volumeBtnEnabled&&t.push("Volume"),e.qualityEnabled&&null!=e.qualityList&&0<e.qualityList.length&&t.push("Quality"),e.playrateEnabled&&e.playbackRates&&0<e.playbackRates.length&&t.push("Playrate"),e.danmuBtnEnable&&t.push("DanmuBtn"),this.options_.children=t,mr(_r(r.prototype),"initChildren",this).call(this)}}],gr(r.prototype,e),r}();function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Er(e,t,n){return(Er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=kr(n);return e=r?(e=kr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==br(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("ControlButtons",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(r,W);var e,n=Sr(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).enable(),t.changeControlBarColor(),t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"control-slider-loaded ".concat(this.tagId),tabIndex:0},t);return Er(kr(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_))}},{key:"changeControlBarColor",value:function(){this.config.activeColor&&(this.el_.style.backgroundColor=this.config.activeColor)}}],Ar(r.prototype,e),r}();function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t,n){return(Rr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ir(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Or(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ir(n);return e=r?(e=Ir(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Tr(e)&&"function"!=typeof e?Lr(t):e}}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("ControlSliderLoaded",r);var Dr,Pr=0,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(i,Yn);var e,r=Or(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t))._draging=!1,e.on("timeupdate",function(){n.handleTimeupdate()}),Ce.b?n.on("touchstart",function(){n.handleMouseDown()}):n.on("mousedown",function(){n.handleMouseDown()}),n._dragingTime=0,Dr=Lr(n),n.changeControlBarColor(),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"control-slider-scrub ".concat(this.tagId),tabIndex:0},t);return Rr(Ir(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handleTimeupdate",value:function(){var e,t;this._draging||(e=this.player_.duration||0,t=this.player_.currentTime||0,this.el_.style.left=Math.min(t/e*100,98.5)+"%",d.a(".control-slider-container .".concat(this.tagId)).style.width=t/e*100+.2+"%")}},{key:"handleMouseDown",value:function(e){var t=this,n=d.a(".control-slider-container .".concat(this.tagId));this.setAttribute("aria-valuemax",n.clientWidth-this.el_.clientWidth),Pr=parseInt(this.el_.style.left.replace("%",""))||0;n=this.el_.ownerDocument;Ce.b?(e=e.targetTouches[0],this.startPos={x:e.pageX,y:e.pageY,time:+new Date},this.on(n,"touchmove",this.handleMouseSeek),this.on(n,"touchend",this.handleMouseUp)):($(this.player_._mediaElement).parent().on("mousemove",this.handleMousemove),document.onmouseup=function(e){t.handleMouseUp(e)},this._draging=!0)}},{key:"handleMouseSeek",value:function(e){1<e.targetTouches.length||e.scale&&1!==e.scale||(this._draging=!0,e=e.targetTouches[0],this.endPos={x:e.pageX-this.startPos.x,y:e.pageY-this.startPos.y},this.isScrolling=Math.abs(this.endPos.x)<Math.abs(this.endPos.y)?1:0,e=parseInt(this.getAttribute("aria-valuemax")),0===this.isScrolling&&(e=Math.min(this.endPos.x,e)/e*100,e=Math.min(Math.max(e+Pr,0),98),this.el_.style.left=e+"%"))}},{key:"handleMouseUp",value:function(e){Dr._draging=!1,Dr.player_.seek(Dr._dragingTime),Dr.player_.dragTriggerStatusChange=!0,$(this.player_._mediaElement).parent().off("mousemove",this.handleMousemove),document.onmouseup=null}},{key:"handleMousemove",value:function(e){var t=$(Dr.el_).parent().offset().left,n=$(Dr.el_).parent().width()-$(Dr.el_).width(),r=t+n,i=Math.min(99.9,Math.max(0,(e.clientX-t)/n*100)),n=$(Dr.el_).parent().children(":first");Dr.el_.style.left=i+"%",n.css("width",i+.1+"%"),Dr._dragingTime=i*Dr.player_.duration/100,(e.clientX<t||e.clientX>r)&&Dr.handleMouseUp(null)}},{key:"handleDrag",value:function(e){}},{key:"handleDragend",value:function(e){}},{key:"stopEventBubble",value:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1}},{key:"changeControlBarColor",value:function(){this.config.activeColor&&(this.el_.style.backgroundColor=this.config.activeColor)}}],Cr(i.prototype,e),i}();function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jr(e,t,n){return(jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Gr(n);return e=r?(e=Gr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Br(e)&&"function"!=typeof e?Ur(t):e}}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.prototype.options_={barName:"ControlSliderScrub"},W.registerComponent("ControlSliderScrub",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(o,W);var e,i=Nr(o);function o(e,t){var n,r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(t=i.call(this,e,t)).update=(n=s(Ur(t),t.update),r=Date.now(),function(){var e=Date.now();30<=e-r&&(n.apply(void 0,arguments),r=e)}),t._width=50,t.changeControlBarColor(),t}return e=[{key:"createEl",value:function(){return jr(Gr(o.prototype),"createEl",this).call(this,"div",{className:"time-tooltip"},{"aria-hidden":"true"})}},{key:"update",value:function(e,t,n){this.write(n);n=this.el_.clientWidth||this.el_.offsetWidth,n=this._range(e-n/2,t-n);this.el_.style.left="".concat(n,"px")}},{key:"write",value:function(e){d.p(this.el_,e)}},{key:"showTime",value:function(){this.hasClass("time-tooltip-hover")||this.addClass("time-tooltip-hover")}},{key:"hideTime",value:function(){this.removeClass("time-tooltip-hover")}},{key:"_range",value:function(e,t){e=Math.max(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e);return t<=e?t:e}},{key:"changeControlBarColor",value:function(){this.config.activeColor&&(this.el_.style.backgroundColor=this.config.activeColor),this.config.fontColor&&(this.el_.style.color=this.config.fontColor)}}],Mr(o.prototype,e),o}();function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e,t,n){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Wr(n);return e=r?(e=Wr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Hr(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("TimeTooltip",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(r,W);var e,n=Kr(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).enable(),t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"control-slider-container",tabIndex:0},t);return qr(Wr(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"enable",value:function(){this.enabled_||(this.enabled_=!0,void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("mousemove",this.onMouseMove),this.on("mouseout",this.onMouseOut),this.on("mouseover",this.onMouseOver))}},{key:"handleClick",value:function(e){var t=this.getChild("ControlSliderLoaded"),n=this.getChild("ControlSliderScrub"),e=e.offsetX/this.el_.offsetWidth;n.el_.style.left=100*e+"%",t.el_.style.width=100*e+"%";e*=this.player_.duration;this.player_.seek(e)}},{key:"onMouseMove",value:function(e){$(e.target).hasClass("vjs-slider")||this.updateTimeTooltip(e.offsetX)}},{key:"onMouseOut",value:function(e){var t=this.getChild("TimeTooltip");t&&t.hideTime()}},{key:"onMouseOver",value:function(e){$(e.target).hasClass("vjs-slider")||this.updateTimeTooltip(e.offsetX)}},{key:"updateTimeTooltip",value:function(e){var t,n=this.getChild("TimeTooltip");n&&(t=bt(this.player_.duration*(e+1)/this.el_.offsetWidth),n.update(e,this.el_.offsetWidth,t),n.showTime())}},{key:"changeFontColor",value:function(e){var t=this.getChild("ControlSliderLoaded"),n=this.getChild("ControlSliderScrub");t.el_.style.cssText="background-color:".concat(e),n.el_.style.cssText="background-color:".concat(e)}}],Vr(r.prototype,e),r}();function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $r(e,t,n){return($r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jr(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Jr(n);return e=r?(e=Jr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Yr(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.prototype.options_={children:["ControlSliderLoaded","ControlSliderScrub"]},Ce.b||r.prototype.options_.children.splice(1,0,"TimeTooltip"),W.registerComponent("ControlSlider",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(i,W);var e,r=Zr(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this,e,t)).on(["tap","click"],n.handleClick),n.on("dblclick",n.handkeDoubleClick),n.on("mouseenter",n.ononmouseOverEvent),n.on("mouseleave",n.ononmouseOutEvent),n.player_.on("complete",function(){n.userActive()}),n.inactive=!1,n._timeInter=0,n.autoHide(),n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.config.transEnable&&(this.config.controlBarType="transparent"),t=Object(c.a)({className:"control-bar ".concat(this.config.controlBarType),tabIndex:0},t),this.config.mainColor&&(n=Object(c.a)({style:"background-color:".concat(this.config.mainColor)},n)),$r(Jr(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"initChildren",value:function(){this.options_.children=["ControlButtons","ControlSlider"],$r(Jr(i.prototype),"initChildren",this).call(this)}},{key:"changeControlBarColor",value:function(e){e=this.FORMMAT.hex2Rgb(e||this.config.mainColor);this.el_.style.cssText="background-color:".concat(e,";")}},{key:"changeControlBarFontColor",value:function(e){this.getChild("ControlSlider").changeFontColor(e)}},{key:"handleClick",value:function(e){e.stopPropagation()}},{key:"handkeDoubleClick",value:function(e){e.stopPropagation()}},{key:"ononmouseOverEvent",value:function(e){Ce.b||(e.stopPropagation(),this.inactive=!0)}},{key:"ononmouseOutEvent",value:function(e){e.stopPropagation(),this.inactive=!1}},{key:"autoHide",value:function(){var t=this;clearInterval(this._timeInter),this.config.autoHideControlBar&&(this._timeInter=this.setInterval(function(){var e=t.player_.isPlaying||!1;t.inactive||!e||t.hasClass("inactive")||(t.addClass("inactive"),f(t.config,{status:"controlBarInActive"}))},1e3*this.config.autoHideTime))}},{key:"userActive",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&e.stopPropagation(),this.hasClass("inactive")&&(this.removeClass("inactive"),f(this.config,{status:"controlBarActive"})),this.autoHide()}}],Xr(i.prototype,e),i}();function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ni(e,t,n){return(ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oi(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ri(e,t){return(ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ii(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=oi(n);return e=r?(e=oi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==ei(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("ControlBar",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}(r,W);var e,n=ii(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(t=n.call(this,e,t)).on(["tap","click"],t.handleClick),t.on("dblclick",t.handkeDoubleClick),t.on("mouseover",t.ononmouseOverEvent),t.on("mouseout",t.ononmouseOutEvent),t.inactive=!1,t._timeInter=0,t.autoHide(),t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.config.transEnable&&(this.config.controlBarType="transparent"),t=Object(c.a)({className:"control-bar ".concat(this.config.controlBarType),tabIndex:0},t),this.config.mainColor&&(n=Object(c.a)({style:"background-color:".concat(this.config.mainColor)},n)),ni(oi(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"initChildren",value:function(){var e=this.config,t=[];e.playAndPauseAndStopEnabled&&t.push("PlayToggle"),this.addClass("control-bar-live"),e.fullscreenEnabled&&t.push("FullScreen"),Ce.c&&""!=e.watermark&&t.push("Watermark"),Ce.c&&t.push("VolumeBar"),e.volumeBtnEnabled&&t.push("Volume"),e.qualityEnabled&&null!=e.qualityList&&0<e.qualityList.length&&t.push("Quality"),e.danmuBtnEnable&&t.push("DanmuBtn"),this.options_.children=t,ni(oi(r.prototype),"initChildren",this).call(this)}},{key:"changeControlBarColor",value:function(e){e=this.FORMMAT.hex2Rgb(e||this.config.mainColor);this.el_.style.cssText="background-color:".concat(e,";")}},{key:"handleClick",value:function(e){e.stopPropagation()}},{key:"handkeDoubleClick",value:function(e){e.stopPropagation()}},{key:"ononmouseOverEvent",value:function(e){e.stopPropagation(),this.inactive=!0}},{key:"ononmouseOutEvent",value:function(e){e.stopPropagation(),this.inactive=!1}},{key:"autoHide",value:function(){var t=this;clearTimeout(this._timeInter),this.config.autoHideControlBar&&(this._timeInter=this.setInterval(function(){var e=t.player_.isPlaying||!1;!t.inactive&&e&&t.addClass("inactive")},1e3*this.config.autoHideTime))}},{key:"userActive",value:function(e){e&&e.stopPropagation(),this.removeClass("inactive"),this.autoHide()}}],ti(r.prototype,e),r}();function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t,n){return(li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fi(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ui(e,t){return(ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ci(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=fi(n);return e=r?(e=fi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==ai(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function fi(e){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("LiveControlBar",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ui(e,t)}(i,W);var e,r=ci(i);function i(e,t){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=r.call(this,e,t),e.on("playStateChange",function(){}),e.on("timeupdate",function(){n.handlePlayStateChange()}),n.update(),n._firstload=!1,n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"poster-layer",tabIndex:-1},t);return li(fi(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"handlePlayStateChange",value:function(){this._firstload||(this._firstload=!0,this.hide())}},{key:"update",value:function(e){var t=this.config.poster;this.setSrc(t),t?this.show():this.hide()}},{key:"setSrc",value:function(e){var t="";e&&(t='url("'.concat(e,'")')),this.el_.style.backgroundImage=t}}],si(i.prototype,e),i}();function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pi(e,t){return(pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gi(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=mi(n);return e=r?(e=mi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==di(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("Poster",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pi(e,t)}(r,W);var n=gi(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return hi(r.prototype,[{key:"createEl",value:function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=Object(c.a)({id:"dhy-video",name:"videoElement",className:"dhy-video",tabIndex:0},e),n=d.f("video",e,t);n.playerId=this.options_.playerId;for(var r=["autoplay","preload","loop","muted","playsinline","poster"],i=r.length-1;0<=i;i--){var o=r[i],a={};void 0!==this.options_[o]&&(a[o]=this.options_[o]),d.o(n,a)}return this.options_.x5video?d.o(n,{"x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"landscape|portrait"}):d.o(n,{"x5-playsinline":"true"}),d.o(n,{"webkit-playsinline":"true",playsinline:"true"}),n}}]),r}();W.registerComponent("VideoTag",r);for(var yi,vi=r,r=n(14),_i=n.n(r),r=n(16),bi=n.n(r),Ai={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",STATISTICS_INFO:"statistics_info",Html5Events:["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange","x5videoexitfullscreen","x5videoenterfullscreen","WeixinJSBridgeReady"],analyticsEvents:["durationchange","volumechange","loadstart","progress","seeking","error"],analyticsEventsLables:["durationchange","volumeChange","videoStart","bufferingChange","seekingChange","error"],setupfn:function(){}},Ei={},wi=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Si=wi[0],ki=0;ki<wi.length;ki++)if(wi[ki][1]in b.a){yi=wi[ki];break}if(yi)for(var Ti=0;Ti<yi.length;Ti++)Ei[Si[Ti]]=yi[Ti];var Ci=Ei,r=n(17),Ri=n.n(r);function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oi=(xi(Li.prototype,[{key:"_sendAnalyticsByPlayer",value:function(e){e=Ai.analyticsEvents.indexOf(e);this._sendAnalytics(Ai.analyticsEventsLables[e],"video","1")}},{key:"_sendAnalytics",value:function(e,t,n){this._options.analyse&&this._options.analyseUrl&&(n=this._trackInfo(this._options,e,t,n),Object(u.a)([this._options.analyseUrl],n,"post").then(function(e){}))}},{key:"_trackInfo",value:function(e,t,n,r){var i={};return i.version=e.version,i.ul=window.navigator.language,i.browser=window.navigator&&window.navigator.userAgent||"",i.title=document.title,i.referrer=document.referrer,i.resolution=window.screen.width+"*"+window.screen.height,i.session="",i.src=e.src,i.action=t,i.userId=e.uid,i.vid=e.vid,i.client="h5",i.type="event",i.uuid=this._uuid,i.value=r,i.category="video",i.label=n,i.loc=window.location.href,i.osType=Ce.f,i.os="H5",i.clientIp=window.returnCitySN||{},i.uvips=this.isCookie,i}},{key:"_initCookie",value:function(){var e=this.isCookie;null!=e&&""!==e||(this.isCookie=this._uuid)}},{key:"isCookie",set:function(e){Ri.a.set(this._cookieName,e,{expires:30,path:"/"})},get:function(){return Ri.a.get(this._cookieName)||""}}]),Li);function Li(e){!function(e){if(!(e instanceof Li))throw new TypeError("Cannot call a class as a function")}(this),this._options=e,this._uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),this._cookieName="XHPLAYER-INSTANCE",this._initCookie(),window.returnCitySN&&(this._citySN=window.returnCitySN)}function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Di,Pi=(r=[{key:"attachMediaElement",value:function(e){var t=this;this._mediaElement=e,this.on("fullscreenChange",function(){t.handFullscreenChange()}),this.on("mediaSourceChange",function(e){t.handMediaSourceChange(e)}),this.on("mediaPlayrateChange",function(e){t.handMediaPlayrateChange(e)}),this.on("timeupdate",function(e){t.handMediaTimeupdate(e)}),this._addEventListener(),this.choiceSrc(),this.setUrl(this._config.src)}},{key:"setUrl",value:function(e){var t;e&&(t=q.a.urlSuffix(e),this._mediaDataSource={url:e,type:this._sourceType(t)},this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.playbackRate=1,this._mediaElement.volume=this._config.volume,this._mediaElement.muted=this._config.muted,this.load())}},{key:"destroy",value:function(){this._mediaElement&&this.unload(),this._mediaDataSource=null,this._emitter&&(this._emitter.removeAllListeners(),this._emitter=null)}},{key:"load",value:function(){f(this._config,{status:"loadstart"});var e="HLS"===this._mediaDataSource.type,t="FLV"===this._mediaDataSource.type;console.log(e,Ce.c),Ce.c&&e?this._hlsLoad():t?this._flvLoad():(this._mediaElement.load(),this._config.autoplay&&this.autoplay())}},{key:"unload",value:function(){this._hls&&this._hls.destroy(),this._flv&&this._flv.destroy()}},{key:"_hlsLoad",value:function(){var e,t,n=this;_i.a.isSupported()?(e=this._hls=new _i.a({debug:this._config.debug,levelLoadingMaxRetry:this._config.retryTime,fragLoadingMaxRetry:this._config.retryTime}),t=this._config.autoplay,e.loadSource(this._config.src),e.attachMedia(this._mediaElement),e.on(_i.a.Events.MANIFEST_PARSED,function(){t&&n.autoplay()})):this._mediaElement.load()}},{key:"_flvLoad",value:function(){var e;bi.a.isSupported()?((e=this._flv=bi.a.createPlayer({type:"flv",isLive:this._config.onLive,url:this._config.src},{cors:!0,retryTimeRange:this._config.retryTimeRange,retryInterval:this._config.retryInterval,enableWorker:!0,enableStashBuffer:!1,stashInitialSize:128})).attachMediaElement(this._mediaElement),e.load(),this._config.autoplay&&this.autoplay()):this._mediaElement.load()}},{key:"on",value:function(e,t){this._emitter.on(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"_reportStatisticsInfo",value:function(){this._emitter.emit(Ai.STATISTICS_INFO,this.statisticsInfo)}},{key:"_addEventListener",value:function(){var t=this;Ai.Html5Events.map(function(e){t._mediaElement.addEventListener(e,function(){t.handMediaElementListener(e)})})}},{key:"handMediaElementListener",value:function(e){"error"!==e&&this.dispatchEvent(e),f(this._config,{status:e});try{this.analytics&&Ai.analyticsEvents.includes(e)&&this.analytics._sendAnalyticsByPlayer(e)}catch(e){l.a.warn(e)}}},{key:"dispatchEvent",value:function(e){this._emitter&&this._emitter.emit(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")}},{key:"autoplay",value:function(){var n=this,e=this._mediaElement.play();void 0!==e&&e.then(function(){n._emitter.emit("playStateChangeForAutoPlay")}).catch(function(t){if(l.a.warn("".concat(t)),f(n._config,{status:"warn",msg:t}),n._config.autoplayByMuted)try{n.muted=!0,n._mediaElement.play()}catch(e){n._emitter&&n._emitter.emit("playStateChangeForAutoPlay"),n._emitter&&n._emitter.emit("useBehaviorEvent"),n._mediaElement.pause(),l.a.warn(t),f(n._config,{status:"warn",msg:t})}else n._emitter&&n._emitter.emit("playStateChangeForAutoPlay"),n._emitter&&n._emitter.emit("useBehaviorEvent"),n._mediaElement.pause()})}},{key:"play",value:function(){this._mediaElement.play(),this._emitter.emit("playStateChange")}},{key:"pause",value:function(){this._mediaElement.pause(),this._emitter.emit("playStateChange")}},{key:"seek",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(this._mediaElement){this.pause();try{this._mediaElement.currentTime=Math.min(e,this.duration)}catch(e){}this.play()}}},{key:"reload",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};1<arguments.length&&void 0!==arguments[1]&&arguments[1]?this.play():(this.unload(),e!={}?(Object(c.a)(this._config,e),this.setUrl(this._config.src)):this.load())}},{key:"handFullscreenChange",value:function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}},{key:"handMediaSourceChange",value:function(e){this._mediaDataSource.url=e,this.reload()}},{key:"handMediaPlayrateChange",value:function(e){!(1<arguments.length&&void 0!==arguments[1])||arguments[1]?(this._mediaElement.playbackRate=e,this.play()):this.reload()}},{key:"handMediaTimeupdate",value:function(){this.currentTime>=this.duration&&(0<this._indexTotal&&this._currentIndexVideo<=this._indexTotal?this.playNext():this._emitter.emit("complete"))}},{key:"isFullscreen",value:function(e){if(void 0===e)return!!this._isFullscreen;this._isFullscreen=!!e}},{key:"requestFullscreen",value:function(){var t,n=this,r=Ci;this.isFullscreen(!0),r.requestFullscreen?Ce.e&&this._config.x5video?this._emitter.emit("wechatX5videoReuqestFullscreen"):(T(document,r.fullscreenchange,s(this,function e(t){this.isFullscreen(document[r.fullscreenElement]),!1===this.isFullscreen()&&C(document,r.fullscreenchange,e)})),this._mediaElement.parentNode[r.requestFullscreen]()):((t=this._mediaElement).addEventListener("webkitendfullscreen",function e(){t.removeEventListener("webkitendfullscreen",e),n._emitter.emit("playStateChange"),n.isFullscreen(!1)}),t.webkitEnterFullscreen())}},{key:"exitFullscreen",value:function(){var e=Ci;this.isFullscreen(!1),e.requestFullscreen&&(Ce.e&&this._config.x5video?this._emitter.emit("wechatX5videoExitFullscreen"):document[e.exitFullscreen]())}},{key:"_sourceType",value:function(e){switch(e){case"M3U8":case"M3U":return"HLS";case"FLV":return"FLV";default:return"NATIVE"}}},{key:"handLoadStart",value:function(e){}},{key:"choiceSrc",value:function(){var t,n=this;if(this._config.playList&&0<this._config.playList.length){var r=!1;return this._indexTotal=this._config.playList.length,this._config.playList.forEach(function(e,t){(e.current||e.isDefault)&&(n._config.src=e.url||e.src,r=!0,n._currentIndexVideo=t)}),void(r||(this._config.src=this._config.playList[0].url||this._config.playList[0].src,this._currentIndexVideo=0))}this._config.qualityList&&0<this._config.qualityList.length&&(t=!1,this._config.qualityList.forEach(function(e){(e.current||e.isDefault)&&(n._config.src=e.url||e.src,t=!0)}),t||(this._config.src=this._config.qualityList[0].url||this._config.qualityList[0].src))}},{key:"playLast",value:function(){var e;void 0!==this._currentIndexVideo&&(0<this._currentIndexVideo-1?(e=this._currentIndexVideo-1,this._config.src=this._config.playList[e].url||this._config.playList[e].src,this.setUrl(this._config.src),this._emitter.emit("playLastVideo"),this._currentIndexVideo=e):(e=this._indexTotal-1,this._config.src=this._config.playList[e].url||this._config.playList[e].src,this.setUrl(this._config.src),this._emitter.emit("playLastVideo"),this._currentIndexVideo=e))}},{key:"playNext",value:function(){var e;void 0!==this._currentIndexVideo&&(this._currentIndexVideo+1<=this._indexTotal?(e=this._currentIndexVideo+1,this._config.src=this._config.playList[e].url||this._config.playList[e].src,this.setUrl(this._config.src),this._emitter.emit("playNextVideo"),this._currentIndexVideo=e):(this._config.src=this._config.playList[0].url||this._config.playList[0].src,this.setUrl(this._config.src),this._emitter.emit("playNextVideo"),this._currentIndexVideo=0))}},{key:"isPlaying",get:function(){return!this._mediaElement.paused}},{key:"type",get:function(){return this._mediaDataSource.type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this.muted&&(this.muted=!1),this._mediaElement.volume=e,this._emitter.emit("volumeChange")}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e,this._mediaElement.volume=e?0:this._config.volume,this._emitter.emit("volumeChange")}},{key:"dragTriggerStatusChange",get:function(){return this._dragTriggerStatusChange},set:function(e){this._dragTriggerStatusChange=e}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement&&(this._mediaElement.currentTime=e)}},{key:"mediaInfo",get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e}},{key:"statisticsInfo",get:function(){var e={playerType:this.type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t,n=!0,r=0,i=0;return this._mediaElement.getVideoPlaybackQuality?(r=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):n=!1,n&&(e.decodedFrames=r,e.droppedFrames=i),e}}],Ii(Bi.prototype,r),Bi);function Bi(e){!function(e){if(!(e instanceof Bi))throw new TypeError("Cannot call a class as a function")}(this),this._config={},Object(c.a)(this._config,e),this._mediaElement=null,this._playing=!1,this._isFullScreen=!1,this._hoverControling=!1,this._dragTriggerStatusChange=!1,this._emitter=new L.a,this._config.analyse&&this._config.analyseUrl&&(this.analytics=new Oi(e))}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ji(e,t){return Di.resolve(e,1<arguments.length&&void 0!==t&&t)}var Fi=(r=[{key:"init",value:function(e){var n=this;this._options=e,this._ad_options=[],this._options&&this._options.advertisements&&(Di=this._options.advertisements.forEach(function(e){var t=e.occasion+"_"+e.resource;switch(t){case"begin_image":case"begin_video":case"paused_image":case"playing_image":case"end_image":n._ad_options[t]=e;break;default:l.a.error("not recognized type: ".concat(e.occasion,"/").concat(e.resource,", ignored"))}}))}},{key:"resolve",value:function(e){return(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?this._options:this._ad_options)[e]}}],Mi(Ni.prototype,r),Ni);function Ni(e){!function(e){if(!(e instanceof Ni))throw new TypeError("Cannot call a class as a function")}(this),this.init(e)}function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hi(e,t,n){return(Hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zi(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qi(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=zi(n);return e=r?(e=zi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ui(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ki=n(3),r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(r,W);var e,n=qi(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(n,{className:"ads-start-layer",style:"\n        position: absolute;\n      "}),Hi(zi(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"init",value:function(){(this._ad_begin_image_options=ji("begin_image"))?this._initBeginImageAd():(this._ad_begin_video_options=ji("begin_video"))&&this._initBeginVideoAd()}},{key:"_initBeginImageAd",value:function(){Object(l.a)("start initialize begin/image ads using config as follows: ",this._ad_begin_image_options),this._paintBeginImageAdComponents(),this._handleBeginImageAdActions()}},{key:"_paintBeginImageAdComponents",value:function(){var e=this._createEmbedImageContainer(),t=this._createImageCountdownComponent();t&&e.appendChild(t),this.el_.appendChild(e)}},{key:"_createEmbedImageContainer",value:function(){var e=d.a("#".concat(ji("playerId",!0)));return d.f("div",{},{id:"ads-start-painter",style:"\n        width: ".concat(d.e(e,"width"),";\n        height: ").concat(d.e(e,"height"),";\n        position: absolute;\n        z-index: 100;\n        background-image: url(").concat(this._ad_begin_image_options.url,");\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n      ")})}},{key:"_createImageCountdownComponent",value:function(){var e=this._ad_begin_image_options.countdown;if(0<e){var t=d.f("div",{},{id:"ads-start-painter-countdown",style:"\n        display: inline-block;\n        ".concat(this._transformPosition(this._ad_begin_image_options.position),";\n        z-index: 20000;\n        position: absolute;\n        font-size: large;\n        background-color: rgba(0, 0, 0, 0.8);\n        ")});t.innerHTML='\n        <div style="display: inline-block; margin-right: 5px;">\n        骞垮憡鍊掕鏃� <span id="count">'.concat(e,"</span> 绉抃n        </div>\n      ");e=this._createImageSkippableComponent();return e&&t.appendChild(e),t}}},{key:"_createImageSkippableComponent",value:function(){var e=this._ad_begin_image_options.skippable;if(-1<e)return d.f("div",{style:"display: inline-block;",innerHTML:'杩樻湁 <span id="skip">'.concat(e,"</span> 绉掑彲璺宠繃")})}},{key:"_handleBeginImageAdActions",value:function(){this._handleAdLink(this._ad_begin_image_options.link);var e=this._handleImageCountdown();this._handleImageSkippable(e)}},{key:"_handleAdLink",value:function(t){t&&d.a("#ads-start-painter").addEventListener("click",function(e){e.stopPropagation(),Ki.open(t)})}},{key:"_handleImageCountdown",value:function(){var e=this,t=this._ad_begin_image_options.countdown,n=[];return 0<t&&(n[0]=Ki.setInterval(function(){-1!==n[0]&&(t--?d.a("#ads-start-painter-countdown #count").innerHTML=t:(e.clearInterval(n[0]),n[0]=-1,e._removePainter(),e.player_.play()))},1e3)),n}},{key:"_handleImageSkippable",value:function(t){var n,r=this,i=this._ad_begin_image_options.skippable;-1<i&&(n=Ki.setInterval(function(){var e;-1!==n&&(e=d.a("#ads-start-painter-countdown #skip"),-1!=--i?d.a("#ads-start-painter-countdown #skip").innerHTML=i:(r.clearInterval(n),n=-1,(e=e.parentNode).innerHTML="璺宠繃",e.addEventListener("click",function(e){e.stopPropagation(),r.clearInterval(t[0]),t[0]=-1,r._removePainter(),r.player_.play()})))},1e3))}},{key:"_initBeginVideoAd",value:function(){Object(l.a)("start initialize begin/video ads using config as follows: ",this._ad_begin_video_options),this._paintBeginVideoAdComponents(),this._handleBeginVideoAdActions()}},{key:"_paintBeginVideoAdComponents",value:function(){var e=this._createNoneActionContainer(),t=this._craeteVideoSkippableComponent();t&&e.appendChild(t),this.el_.appendChild(e)}},{key:"_createNoneActionContainer",value:function(){var e=d.a("#".concat(ji("playerId",!0))),e=d.f("div",{},{id:"ads-start-painter",style:"\n        width: ".concat(d.e(e,"width"),";\n        height: ").concat(d.e(e,"height"),";\n        z-index: 100;\n        position: absolute;\n      ")});return e.addEventListener("mousedown",function(e){return e.stopPropagation()}),e}},{key:"_craeteVideoSkippableComponent",value:function(){var e=this._ad_begin_video_options.skippable;if(-1<e)return d.f("div",{style:"\n          position: absolute;\n          ".concat(this._transformPosition(this._ad_begin_video_options.position),";\n          font-size: large;\n        "),innerHTML:'杩樻湁 <span id="skip">'.concat(e,"</span> 绉掑彲璺宠繃")})}},{key:"_handleBeginVideoAdActions",value:function(){this._handleAdLink(this._ad_begin_video_options.link);var e=this._handleVideoPlaying();this._handleVideoSkippable(e);try{this.player_.play()}catch(e){l.a.warn("autoplay failed,please click playBtn yourself!")}}},{key:"_handleVideoPlaying",value:function(){var e=this;this.player_.setUrl(this._ad_begin_video_options.url);var t=Ki.setInterval(function(){-1!==t&&1e3*e.player_.currentTime>=1e3*e.player_.duration&&(e.clearInterval(t),t=-1,e.player_.setUrl(ji("src",!0)),e.player_.play(),e.player_._emitter.emit("temp-for-end-ad-counting"),e._removePainter())},1e3);return t}},{key:"_handleVideoSkippable",value:function(t){var n,r=this,i=this._ad_begin_video_options.skippable;-1<i&&(n=Ki.setInterval(function(){var e;-1!==n&&(e=d.a("#ads-start-painter #skip"),-1!=--i?d.a("#ads-start-painter #skip").innerHTML=i:(r.clearInterval(n),n=-1,(e=e.parentNode).innerHTML="璺宠繃",e.addEventListener("click",function(e){e.stopPropagation(),r.clearInterval(t),r.player_.setUrl(ji("src",!0)),r.player_.play(),r.player_._emitter.emit("temp-for-end-ad-counting"),r._removePainter()})))},1e3))}},{key:"_transformPosition",value:function(e){var t=e.relative.split("_");return"".concat(t[0],": ").concat(e.axisY,"; ").concat(t[1],": ").concat(e.axisX,";")}},{key:"_removePainter",value:function(){var e=d.a("#ads-start-painter");e&&e.parentNode.removeChild(e)}}],Gi(r.prototype,e),r}();function Wi(e){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xi(e,t,n){return(Xi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zi(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function $i(e,t){return($i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qi(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Zi(n);return e=r?(e=Zi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Wi(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("StartAdsComposer",r);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$i(e,t)}(r,W);var e,n=Qi(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,{className:"ads-paused-layer"}),Xi(Zi(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"init",value:function(){var e=this;this._ad_paused_image_options=ji("paused_image"),this._ad_paused_image_options&&(this._ad_container=this._initPausedAds(),this.player_.on("playStateChange",function(){e.player_.isPlaying?0<e.el_.children.length&&e.el_.removeChild(e._ad_container):e.el_.appendChild(e._ad_container)}))}},{key:"_initPausedAds",value:function(){Object(l.a)("start initialize paused/image ads using config as follows: ",this._ad_paused_image_options);var e=this._createPausedImageContainer(),t=this._createImagePresentComponent();return t.appendChild(this._createImageCloseComponent()),e.appendChild(t),e}},{key:"_createPausedImageContainer",value:function(){return d.f("div",{},{id:"ads-paused-painter",style:"position: absolute;"})}},{key:"_createImagePresentComponent",value:function(){var e=d.a("#".concat(ji("playerId",!0))),t=this._ad_paused_image_options.width,n=this._ad_paused_image_options.height,n=d.f("div",{},{id:"ads-paused-painter-image",style:"\n        position: absolute;\n        top: ".concat(this._calcCenterPosInLiteralPixels(d.e(e,"height"),n),";\n        left: ").concat(this._calcCenterPosInLiteralPixels(d.e(e,"width"),t),";\n        z-index: 20000;\n        width: ").concat(t,";\n        height: ").concat(n,";\n        background-image: url(").concat(this._ad_paused_image_options.url,");\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n      ")}),r=this._ad_paused_image_options.link;return r&&n.addEventListener("click",function(e){e.stopPropagation(),window.open(r)}),n}},{key:"_calcCenterPosInLiteralPixels",value:function(e,t){var n=/^(\d+)(?:\.\d+)?px$/;return(+e.match(n)[1]-t.match(n)[1])/2+"px"}},{key:"_createImageCloseComponent",value:function(){var t=this,e=d.f("div",{},{id:"ads-paused-painter-close",style:"\n          position: absolute;\n          top: 5px;\n          right: 5px;\n          font-size: large;\n        "});return e.innerHTML="X",e.addEventListener("click",function(e){e.stopPropagation(),t._removePainter()}),e}},{key:"_removePainter",value:function(){var e=d.a("#ads-paused-painter");e&&e.parentNode.removeChild(e)}}],Yi(r.prototype,e),r}();function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t,n){return(to="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=io(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ro(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=io(n);return e=r?(e=io(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ji(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PausedAdsComposer",r);var oo=n(3),r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(r,W);var e,n=ro(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,{className:"ads-playing-layer"}),to(io(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"init",value:function(){var e,t=this;this._ad_playing_image_options=ji("playing_image"),null!=this._ad_playing_image_options&&(this._showUps=this._ad_playing_image_options.showUps,this._showUps&&0<this._showUps.length)&&(this._rearrangeShowUps(),ji("begin_video")?this.player_.on("temp-for-playing-ad-counting",function(e){return t._startCheckVideoCurrentTime()}):this._startCheckVideoCurrentTime(),e=oo.setInterval(function(){-1!==e&&t.player_.currentTime>=t.player_.duration&&(oo.clearInterval(e),e=-1,t._removePainter())},1e3))}},{key:"_rearrangeShowUps",value:function(){this._showUps.sort(function(e,t){return e.start>t.start?1:e.start===t.start?0:-1});for(var e=[],t=this._showUps.length,n=0;n<t;n++){for(var r=this._showUps[n];n<t-1&&this._rangeOverlapped(r,this._showUps[n+1]);)n++;if(e.push(r),n===t-1&&this._rangeOverlapped(r,this._showUps[n]))break}this._showUps=e,Object(l.a)("the reanranged show ups is : ",e)}},{key:"_rangeOverlapped",value:function(e,t){return e.start+e.keep>=t.start}},{key:"_startCheckVideoCurrentTime",value:function(){var n=this,t=oo.setInterval(function(){var e,t=n._chooseShowup();t&&!n._painter&&(n._painter=n._createPlayingAdContainer(),n.el_.appendChild(n._painter),e=oo.setTimeout(function(){n._removePainter(),oo.clearTimeout(e)},1e3*t.keep))},1e3);this.player_.on("playStateChange",function(e){n.player_.isPlaying||oo.clearInterval(t)})}},{key:"_chooseShowup",value:function(){for(var e=this.player_.currentTime,t=0;t<this._showUps.length;t++){var n=this._showUps[t];if(n.start-1<=e&&e<=n.start+1)return this._showUps=this._showUps.slice(t+1),n}}},{key:"_createPlayingAdContainer",value:function(){var e=this._createPlayingImagePainter(),t=this._createImagePresentComponent();return t.appendChild(this._createImageCloseComponent()),e.appendChild(t),e}},{key:"_createPlayingImagePainter",value:function(){var e=d.a("#".concat(ji("playerId",!0)));return d.f("div",{},{id:"ads-playing-painter",style:"\n        position: absolute;\n        width: ".concat(d.e(e,"width"),";\n        height: ").concat(d.e(e,"height"),";\n      ")})}},{key:"_createImagePresentComponent",value:function(){var e=d.f("div",{},{id:"ads-playing-painter-image",style:"\n        position: absolute;\n        ".concat(this._transformPosition(this._ad_playing_image_options.position),";\n        z-index: 20000;\n        width: ").concat(this._ad_playing_image_options.width,";\n        height: ").concat(this._ad_playing_image_options.height,";\n        background-image: url(").concat(this._ad_playing_image_options.url,");\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n      ")}),t=this._ad_playing_image_options.link;return t&&e.addEventListener("click",function(e){e.stopPropagation(),oo.open(t)}),e}},{key:"_transformPosition",value:function(e){var t=e.relative.split("_");return"".concat(t[0],": ").concat(e.axisY,"; ").concat(t[1],": ").concat(e.axisX,";")}},{key:"_createImageCloseComponent",value:function(){var t=this,e=d.f("div",{},{id:"ads-paused-painter-close",style:"\n          position: absolute;\n          top: 5px;\n          right: 5px;\n          font-size: large;\n        "});return e.innerHTML="X",e.addEventListener("click",function(e){e.stopPropagation(),t._removePainter()}),e}},{key:"_removePainter",value:function(){var e=d.a("#ads-playing-painter");e&&e.parentNode.removeChild(e),this._painter=null}}],eo(r.prototype,e),r}();function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function so(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(e,t,n){return(lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fo(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function uo(e,t){return(uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function co(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=fo(n);return e=r?(e=fo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==ao(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("PlayingAdsComposer",r);var ho=n(3),r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(r,W);var e,n=co(r);function r(e,t){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,e,t)}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,{className:"ads-end-layer"}),lo(fo(r.prototype),"createEl",this).call(this,e,t,n)}},{key:"init",value:function(){var t=this;this._ad_end_image_options=ji("end_image"),null!=this._ad_playing_image_options&&(ji("begin_video")?this.player_.on("temp-for-end-ad-counting",function(e){return t._startCheckVideoPlayDone()}):this._startCheckVideoPlayDone())}},{key:"_startCheckVideoPlayDone",value:function(){var e=this,t=ho.setInterval(function(){-1!==t&&1e3*e.player_.currentTime>=1e3*e.player_.duration&&(e.clearInterval(t),t=-1,e._createFixedImagePainter(),e._handleAdLink(e._ad_end_image_options.link))},1e3)}},{key:"_createFixedImagePainter",value:function(){var e=d.a("#".concat(ji("playerId",!0)));this.el_.appendChild(d.f("div",{},{id:"ads-end-painter",style:"\n        width: ".concat(d.e(e,"width"),";\n        height: ").concat(d.e(e,"height"),";\n        position: absolute;\n        z-index: 100;\n        background-image: url(").concat(this._ad_end_image_options.url,");\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n      ")}))}},{key:"_handleAdLink",value:function(t){t&&d.a("#ads-end-painter").addEventListener("click",function(e){e.stopPropagation(),ho.open(t)})}}],so(r.prototype,e),r}();function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mo(e,t,n){return(mo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_o(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function yo(e,t){return(yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vo(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_o(n);return e=r?(e=_o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==po(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.registerComponent("EndAdsComposer",r);var bo=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yo(e,t)}(i,W);var e,r=vo(i);function i(e,t){return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),n=t._options,Di=Di||new Fi(n),r.call(this,e,t);var n}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(n,{id:"ads-layer",className:"ads-layer",style:"\n        position: relative;\n      "}),mo(_o(i.prototype),"createEl",this).call(this,e,t,n)}},{key:"initChildren",value:function(){this.options_.children=[],this.options_.children.push("StartAdsComposer"),this.options_.children.push("PausedAdsComposer"),this.options_.children.push("PlayingAdsComposer"),this.options_.children.push("EndAdsComposer"),mo(_o(i.prototype),"initChildren",this).call(this)}},{key:"init",value:function(){this.children_.forEach(function(e){return e.init()})}}],go(i.prototype,e),i}();W.registerComponent("AdsLayer",bo);var r=n(8),Ao=n.n(r);function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function So(e,t,n){return(So="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Co(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function ko(e,t){return(ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function To(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Co(n);return e=r?(e=Co(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Eo(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Co(e){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(63);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(a,W);var e,o=To(a);function a(e){var t;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var n=document.getElementById(e.playerId);n.innerHTML="";var r=new Pi(e),i=new vi(r,e);r.attachMediaElement(i.el_),(t=o.call(this,r,e)).el_.insertBefore(i.el_,t.el_.firstChild),n.appendChild(t.el_),n.oncontextmenu=t.onContextMenu;n=t.children_.filter(function(e){return e instanceof bo})[0];return n&&n.init(),t.on("mousedown",function(e){return t.userActive(e)}),t.on("mousemove",function(e){return t.onMouseMove(e)}),t.on("mouseout",function(e){return t.onMouseOut(e)}),t.on("mouseover",function(e){return t.onMouseOver(e)}),t.on(["tap","click"],t.handleClick),t.on("dblclick",t.handkeDoubleClick),t.on("onresize",t.handkeResize),Ce.b||t.on("keydown",t.handleKeyPress),t.singleClickTimer=null,r.on("playStateChange",function(){return t.handlePlayStateChange()}),r.on("playStateChangeForAutoPlay",function(){return t.handlePlayStateChange()}),r.on("userActiveEvent",function(){return t.userActive()}),r.on("timeupdate",function(){return t.timeupdateAnsy()}),r.on("fullscreenChange",function(){return t.handleFullscreenChange()}),r.on("addFullScreenCss",function(){return t.handAddFullScreenCss()}),r.on("moveFullScreenCss",function(){return t.handMoveFullScreenCss()}),r.on("exitfullscreenByEsc",function(){}),e.x5video&&(r.on("x5videoexitfullscreen",function(e){t.handlex5videoexitfullscreen()}),r.on("x5videoenterfullscreen",function(e){t.handlex5videoenterfullscreen()}),r.on("WeixinJSBridgeReady",function(e){t.handleWeixinJSBridgeReady()})),t.DanmuLay=Ao()("#danmu-layer-".concat(t.tagId)),t.DanmuLay.danmu(e.danmuInit),t.DanmuLay.danmu("danmuPause"),t._initWidth=t.el_.offsetWidth||t.el_.clientWidth,t._initHeight=t.el_.offsetHeight||t.el_.clientHeight,t.customs=[],t.init_version="202012161123",t.fullscreening=!1,t}return e=[{key:"createEl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.a)({className:"player-container ".concat(this.options_.tagId),tabIndex:0},t),r="";return this.options_.fontColor&&(r+="color:".concat(this.options_.fontColor,";")),this.options_.width&&(r+="width:".concat(this.options_.width,";")),this.options_.height&&(r+="height:".concat(this.options_.height,";")),n.style=r,So(Co(a.prototype),"createEl",this).call(this,e,t,n)}},{key:"initChildren",value:function(){var e=this.config,t=[];t.push("DanmuLayer"),t.push("LoadLayer"),t.push("MsgLayer"),t.push("PlayLayer"),t.push("Poster"),e.qualityList&&0<e.qualityList.length&&t.push("QualityLayer"),e.playrateEnabled&&t.push("PlayrateLayer"),e.logo&&t.push("LogoLayer"),e.onLive||1==e.onLive?t.push("LiveControlBar"):t.push("ControlBar"),e.adEnable&&t.push({name:"AdsLayer",_options:this.config}),this.options_.children=t,So(Co(a.prototype),"initChildren",this).call(this)}},{key:"handlePlayStateChange",value:function(){this.player_.isPlaying?this.DanmuLay&&this.DanmuLay.danmu("danmuResume"):(this.userActive(),this.DanmuLay.danmu("danmuPause"))}},{key:"userActive",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&e.stopPropagation(),(this.getChild("ControlBar")||this.getChild("LiveControlBar")).userActive(e)}},{key:"onMouseMove",value:function(e){e.stopPropagation(),this.userActive(e)}},{key:"onMouseOut",value:function(e){e.stopPropagation()}},{key:"onMouseOver",value:function(e){e.stopPropagation(),this.userActive(e)}},{key:"onContextMenu",value:function(){return!1}},{key:"handleClick",value:function(e){var t=this;e.stopPropagation(),this.player_.dragTriggerStatusChange?this.player_.dragTriggerStatusChange=!1:this.singleClickTimer?(this.clearTimeout(this.singleClickTimer),this.singleClickTimer=null):this.singleClickTimer=this.setTimeout(function(){t.player_&&(t.player_.isPlaying?t.player_.pause():t.player_.play(),t.singleClickTimer=null)},200)}},{key:"handkeDoubleClick",value:function(e){e.stopPropagation(),this.player_.dispatchEvent("fullscreenChange")}},{key:"handkeResize",value:function(){this.fullscreening&&f(this.options_,{status:"outfullscreen"}),this.fullscreening=!this.fullscreening}},{key:"handleKeyPress",value:function(e){var t,n;switch(e.preventDefault(),e.stopPropagation(),e.which){case 32:return void(this.player_.isPlaying?this.player_.pause():this.player_.play());case 37:return t=this.player_.currentTime,void this.player_.seek(Math.max(0,t-5));case 38:return r=this.player_.volume,this.player_.muted=!1,void(this.player_.volume=Math.min(1,r+.05));case 39:return t=this.player_.currentTime,n=this.player_.duration,void this.player_.seek(Math.min(n,t+5));case 40:var r=this.player_.volume,r=Math.max(0,r-.05);return void(r<=0?this.player_.muted=!0:this.player_.volume=r);default:return}}},{key:"handleFullscreenChange",value:function(){var e=this;this.player_.isFullscreen()?(f(this.options_,{status:"intofullscreen"}),window.onresize=function(){return e.handkeResize()}):(window.onresize=null,this.fullscreening=!1,f(this.options_,{status:"outfullscreen"}))}},{key:"handAddFullScreenCss",value:function(){this.addClass("player-fullscreen")}},{key:"handMoveFullScreenCss",value:function(){this.removeClass("player-fullscreen")}},{key:"getControlBar",value:function(){return this.getChild("ControlBar")||this.getChild("LiveControlBar")}},{key:"setMainColor",value:function(e){this.getControlBar().changeControlBarColor(e)}},{key:"setMediaSource",value:function(e){this.player.reload({src:e})}},{key:"setComponentSkin",value:function(e,t){e=d.a(e);e&&e.firstChild&&e.firstChild.setAttribute("src",t)}},{key:"hidden",value:function(e){e=d.a(e);e&&d.c(e,"hidden")}},{key:"show",value:function(e){e=d.a(e);e&&d.m(e,"hidden")}},{key:"showMsg",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this.getChild("MsgLayer");t&&!this.options_.hideErrorMsg&&t.showMsg(e)}},{key:"hideMsg",value:function(){var e=this.getChild("MsgLayer");e&&e.hideMsg()}},{key:"resize",value:function(e,t){this.el_.style.cssText="width:".concat(e,";height:").concat(t,";"),this.player&&(this.player.muted=!1)}},{key:"destory",value:function(){d.g(this.el_)}},{key:"handlex5videoexitfullscreen",value:function(){this._x5videofull=!1;var e=d.a(".dhy-video");e.style["object-position"]="center top",e.style["object-fit"]="contain",e.style.width=this._initWidth+"px",e.style.height=this._initHeight+"px",d.a("body").style["background-color"]="none",this.player_&&this.player_._emitter&&this.player_._emitter.emit("playStateChange"),e.setAttribute("x5-video-orientation","landscape|portrait")}},{key:"handlex5videoenterfullscreen",value:function(){this._x5videofull=!0;var e=d.a(".dhy-video");e.style["object-position"]="0px 0px",e.style.width=window.screen.width+"px",e.style.height=window.screen.height+"px",d.a("body").style["background-color"]="#fff"}},{key:"handleWeixinJSBridgeReady",value:function(){}},{key:"handleWechatX5videoReuqestFullscreen",value:function(){var e;this._x5videofull&&((e=d.a(".dhy-video")).setAttribute("x5-video-orientation","landscape"),e.style.width=window.screen.height+100+"px",e.style.height=window.screen.width+100+"px",d.a("player-container").addClass("player-fullscreen"))}},{key:"handleWechatX5videoExitFullscreen",value:function(){var e=d.a(".dhy-video");e.setAttribute("x5-video-orientation","landscape|portrait"),e.style.width=this._initWidth+"px",e.style.height=this._initHeight+"px",e.style["object-position"]="0px 0px",d.a("player-container").removeClass("player-fullscreen")}},{key:"timeupdateAnsy",value:function(){this.DanmuLay&&this.DanmuLay.danmu("setTime",Math.round(10*this.player_.currentTime))}},{key:"addComponent",value:function(e){e=Object(c.a)({id:"default-custom-id",el:'<div class="default-custom"></div>',parent:"",css:{},events:[]},e);var t=$(e.el);return t.on("click",function(e){return e.stopPropagation()}),t.on("dblclick",function(e){return e.stopPropagation()}),t.on("keydown",function(e){return e.stopPropagation()}),e.events&&0<e.events.length&&e.events.forEach(function(e){t.on(e.eventName,e.eventFn)}),t.css(e.css),this.customs.push({id:e.id,dom:t}),"control-bar"==e.parent?(this.options_.onLive?$(this.el_).find(".control-bar-live"):$(this.el_).find(".control-buttons-container")).append(t):(t.addClass("default-custom-postion"),$(this.el_).append(t))}},{key:"hideComponent",value:function(t){this.customs.filter(function(e){return e.id==t}).forEach(function(e){return e.dom.hide()})}},{key:"showComponent",value:function(t){this.customs.filter(function(e){return e.id==t}).forEach(function(e){return e.dom.show()})}},{key:"removeComponent",value:function(t){this.customs.filter(function(e){return e.id==t}).forEach(function(e){return $(e.dom).remove()}),this.customs=this.customs.filter(function(e){return e.id!=t})}}],wo(a.prototype,e),a}();W.registerComponent("Main",r);var Ro=r;function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(64);n=[{key:"embed",value:function(e,t){return this.init(e,t)}},{key:"init",value:function(e,t){var n=this,r=Object.assign({},o);if(c.a(r.skin,t.skin),t.skin=r.skin,c.a(r,t),null!==document.getElementById(e))return r.playerId=e,r.tagId=r.tagId||"tag-id-".concat(Math.ceil(1e5*Math.random())),this._config=r,t.id||t.UUID||t.asynModel?(Object(u.b)(r).then(function(e){c.a(n._config,t,e),n.remoteVideo()}),this):this.remoteVideo();l.a.error("#".concat(e," is not find "))}},{key:"remoteVideo",value:function(){var t=this;return this._config=this._filterAutoplay(this._config),this._main=new Ro(this._config),this._main.showMsg(this._config.errorMessage),this.player=this._main.player_,this.complate=!0,this.player.on("changeDanmuStatusEvent",function(e){t.handleDanmuStateChange(e)}),f(this._config,{status:"playerInitComplate"}),this}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"seek",value:function(e){this.player.seek(e)}},{key:"enterFullScreen",value:function(){this.player.enterFullScreen()}},{key:"exitFullScreen",value:function(){this.player.exitFullScreen()}},{key:"_filterAutoplay",value:function(e){return Ce.b&&(e.autoplay=!1),e}},{key:"changePlayerType",value:function(e){switch(e){case"live":case"timeShift":this._config.onLive=!0;break;default:this._config.onLive=!1}this.remoteVideo()}},{key:"reloadPlayer",value:function(e){var t=this;!function(e,t,n){n=2<arguments.length&&void 0!==n?n:500;t.lastdelayTime&&(new Date).getTime()-t.lastdelayTime<=n&&window.clearTimeout(t.reloadInterFn),t.lastdelayTime=(new Date).getTime(),t.reloadInterFn=window.setTimeout(e,500)}(function(){Object.assign(t._config,e),t.destroy(),t.remoteVideo()},this,300)}},{key:"loadMedia",value:function(e){e&&(this._config.src=e),this.asyn(function(){this.player.reload({src:e}),this._config.autoPlay&&this.player.play()})}},{key:"destroy",value:function(){this.player&&(this.player.muted=!0,this.player.destroy(),this._main.destory())}},{key:"getChildByName",value:function(e){this._main.getChild(e)}},{key:"setMainColor",value:function(e){this.asyn(function(){this._main.setMainColor(e)})}},{key:"setFontColor",value:function(e){this._main.setFontColor(e)}},{key:"setComponentSkin",value:function(e,t){this._main.setComponentSkin(e,t)}},{key:"hidden",value:function(e){this._main.hidden(e)}},{key:"show",value:function(e){this._main.show(e)}},{key:"resize",value:function(e,t){var n=this;this.asyn(function(){n._config.width=e,n._config.height=t,n._main.resize(e,t)})}},{key:"asyn",value:function(e){var t,n=this;this.complate?e.call(this):t=setInterval(function(){n.complate&&(e.call(n),clearInterval(t))},300)}},{key:"startDanmu",value:function(){this._main.DanmuLay&&(this._main.DanmuLay.danmu("danmuStart")||this._main.DanmuLay.danmu("danmuResume"))}},{key:"resumeDanmu",value:function(){this._main.DanmuLay&&this._main.DanmuLay.danmu("danmuResume")}},{key:"addDanmuMsg",value:function(e){this._main.DanmuLay&&this._main.DanmuLay.danmu("addDanmu",e)}},{key:"sendDanmuMsg",value:function(e){var t;this._main.DanmuLay&&(t=this._main.DanmuLay.data("nowTime")+1,e.time=t,this._main.DanmuLay.danmu("addDanmu",e))}},{key:"getDanmuTime",value:function(){return this._main.DanmuLay?this._main.DanmuLay.data("nowTime"):0}},{key:"getDanmuLists",value:function(){if(this._main.DanmuLay)return this._main.DanmuLay.danmu("getDanmuList")}},{key:"resetDanmuTime",value:function(e){this._main.DanmuLay&&this._main.DanmuLay.danmu("setTime",e)}},{key:"pauseDanmuMsg",value:function(){this.DanmuLay&&this.DanmuLay.danmu("danmuPause")}},{key:"setDanmuOpacity",value:function(e){this._main.DanmuLay&&this._main.DanmuLay.danmu("setOpacity",e)}},{key:"openDanmu",value:function(){this.player.dispatchEvent("changeDanmuStatusEvent",!0)}},{key:"closeDanmu",value:function(){this.player.dispatchEvent("changeDanmuStatusEvent",!1)}},{key:"handleDanmuStateChange",value:function(e){e?this._main.DanmuLay&&this._main.DanmuLay.danmu("danmuShowAll"):this._main.DanmuLay&&this._main.DanmuLay.danmu("danmuHideAll")}},{key:"addComponent",value:function(e){this._main.addComponent(e)}},{key:"hideComponent",value:function(e){this._main.hideComponent(e)}},{key:"showComponent",value:function(e){this._main.showComponent(e)}},{key:"removeComponent",value:function(e){this._main.removeComponent(e)}},{key:"isPlaying",get:function(){return this.player.isPlaying}},{key:"type",get:function(){return this.player.type}},{key:"buffered",get:function(){return this.player.buffered}},{key:"duration",get:function(){return this.player.duration}},{key:"volume",get:function(){return this.player.volume},set:function(e){this.player.volume=e}},{key:"muted",get:function(){return this.player.muted},set:function(e){this.player&&(this.player.muted=e)}},{key:"currentTime",get:function(){return this.player.currentTime}},{key:"mediaInfo",get:function(){return this.player.mediaInfo}},{key:"statisticsInfo",get:function(){return this.player.statisticsInfo}},{key:"src",get:function(){return this._config.src}},{key:"childrens",get:function(){return this._main.children_}}],Oo(Lo.prototype,n),n=Lo;function Lo(e,t){!function(e){if(!(e instanceof Lo))throw new TypeError("Cannot call a class as a function")}(this),this._config={},null!==e&&"object"===xo(t)&&this.embed(e,t)}window.DHYPlayer=n}],d={},e.m=c,e.c=d,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=65);function e(t){if(d[t])return d[t].exports;var n=d[t]={i:t,l:!1,exports:{}};return c[t].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var c,d});
