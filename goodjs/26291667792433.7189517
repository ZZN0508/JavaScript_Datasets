(window.monolithJsonpFunction=window.monolithJsonpFunction||[]).push([["a25ce624","774afb24","cc9dd1c9"],{10397:function(e,t,n){"use strict";n.r(t),n.d(t,"fps",function(){return p}),n.d(t,"load",function(){return l}),n.d(t,"metrics",function(){return m});function i(i,a){var n,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return n=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){switch(window.location.hostname){case"www.avito.ru":case"m.avito.ru":return!0;default:return!1}}(),e.next=3,a;case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=o;case 6:if(!e.t0){e.next=10;break}e.t1=fetch("https://stats.avito.ru/api/".concat(c,"/stats/frontend/")+i,{method:"POST",body:JSON.stringify(s?(t=r,{data:n,meta:{connection:Object(u.a)(),page:t||d.a.initialPageId,platform:(t=d.a.initialPlatform,"".concat(t).concat(d.a.isDevEnv?"-dev":""))}}):{data:n})}).then(function(e){return e.json()}).catch(function(){}),e.next=11;break;case 10:e.t1=null;case 11:return e.abrupt("return",e.t1);case 12:case"end":return e.stop()}var t},e)})),function(e,t){return n.apply(this,arguments)}}var r,o,a,c,u=n(10953),s=n(5985),d=n(5986),f=(c=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(s.g)())return e.abrupt("return",!1);e.next=2;break;case 2:return t=d.a.initialPlatform,o=d.a.initialPageId,n=0,e.prev=4,r=i("balance",!0,1,!1),e.next=8,r({platform:t,pageId:o});case 8:o=e.sent,n=o&&o.result&&o.result.percent?o.result.percent:0,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(4);case 14:return e.abrupt("return",Object(s.h)(n));case 15:case"end":return e.stop()}},e,null,[[4,12]])})),function(){return c.apply(this,arguments)}),n=new Promise(function(e){e(f())}),p=i("fps",n),l=i("load",n),m=(r=i("generic",n),o=new Map,a=function(){o.forEach(r),o.clear()},function e(){return setTimeout(function(){a(),e()},5e3)}(),window.addEventListener("visibilitychange",a,!0),window.addEventListener("beforeunload",function(){removeEventListener("visibilitychange",a,!0),a()}),function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.a.initialPageId,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=[].concat(babelHelpers.toConsumableArray(o.get(t)||[]),babelHelpers.toConsumableArray(e));o.set(t,e),!0===n&&a()})},10400:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="userCentric"},10402:function(e,t,n){"use strict";n.r(t),n.d(t,"observer",function(){return m});var r=n(10397),o=n(10962),i=n(10400),t=n(5986),a=n(5985);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s="cumulativeLayoutShift",u=!1,d=0,f=t.a.initialPageId,p=function(e,t,n){Object(r.metrics)([{name:"".concat(s,".afterLoad"),value:e,prefix:i.a}],t,n)},l=function(e){u||(u=!0,Object(a.f)()&&0!==e||(Object(r.metrics)([{name:"".concat(s,".load"),value:e,prefix:i.a}]),Object(o.sendClsEvent)(e)))},m=function(){try{new PerformanceObserver(function(e){var t,n,r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return c(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(e.getEntries());try{for(o.s();!(t=o.n()).done;){var i=t.value;r=void 0,(n=i).hadRecentInput||((r=Object(a.a)())!==f&&(u||l(d),p(d,f),d=0,f=r),d+=n.value)}}catch(e){o.e(e)}finally{o.f()}}).observe({type:"layout-shift",buffered:!0}),setTimeout(function(){l(d)},2e3),window.addEventListener("beforeunload",function(){p(d,f,!0)})}catch(e){}}},10886:function(e,t,n){"use strict";var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),c=new Uint8Array(16);for(var s=[],r=0;r<256;++r)s.push((r+256).toString(16).substr(1));t.a=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||function(){if(!a)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(c)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){for(var o=n||0,i=0;i<16;++i)t[o+i]=r[i];return t}return function(e,t){t=t||0;return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(r)}},10952:function(e,t,n){"use strict";var p=n(10886);function l(){return(l=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function m(e){return"number"==typeof e&&isFinite(e)}function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var b="last-ref-id",_="pending";t.a=function e(t){var n,s=this,r=t.common,o=void 0===r?{}:r,i=t.srcId,a=t.buildUid,c=void 0===a?"undefined":a,u=t.softwareVersion,d=t.build,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/clickstream/events/1/json",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return null};if(babelHelpers.classCallCheck(this,e),babelHelpers.defineProperty(this,"increment",function(){return Object(p.a)()}),babelHelpers.defineProperty(this,"getIds",function(){var e=window.localStorage.getItem(b),t=s.increment();return window.localStorage.setItem(b,t),{refId:t,parentRefId:e,tabId:s.tabId}}),babelHelpers.defineProperty(this,"createEvent",function(e,t,n){var r,o=s.getIds(),i=o.refId,a=o.parentRefId,o=o.tabId,c={event_id:e,version:t,params:n};for(r in c)c.hasOwnProperty(r)&&null===c[r]&&(c[r]=void 0);return c.env={},c.env.cdtm=Number(Date.now().toFixed(1)),c.env.ref_id=i||"",c.env.parent_ref_id=a||"",c.env.tab_id=o||"",c}),babelHelpers.defineProperty(this,"createSendBody",function(e){var t={version:1,meta:v({},s.meta),common:v({},s.common)};return t.events=e.map(function(e){return e.event}),t}),babelHelpers.defineProperty(this,"sendEvents",babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.sendBatchEvents();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),s.errorHandler(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))),babelHelpers.defineProperty(this,"cycleSend",babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){return l.apply(this,arguments)}(1e3);case 2:s.events.filter(function(e){return e.status!==_}).length&&s.sendEvents(),s.cycleSend();case 5:case"end":return e.stop()}},e)}))),babelHelpers.defineProperty(this,"sendBatchEvents",function(){var e=s.events.filter(function(e){return e.status!==_}),t=s.createSendBody(e);s.events=e.map(function(e){return v({},e,{},{status:_})});e=e.map(function(e){return e.id});return s.sendData(t,e)}),babelHelpers.defineProperty(this,"sendData",function(e,t){return fetch(s.link,{method:"post",headers:{"Content-type":"application/json; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify(e)}).then(function(e){return 400<=e.status&&502!==e.status?(s.clearBatch(t),Promise.reject(e)):(s.clearBatch(t),{response:e})})}),babelHelpers.defineProperty(this,"sendEvent",function(e,t,n){if(s.ssr)return"";if(!m(e))throw new Error("event id should be number type");if(!m(t))throw new Error("event version should be number type");n=s.createEvent(e,t,n);return s.events.push({id:Object(p.a)(),event:n}),1e3<s.events.length&&s.sendEvents(),n.env.ref_id}),babelHelpers.defineProperty(this,"clearBatch",function(e){e.forEach(function(t){var e=s.events.findIndex(function(e){return e.id===t});s.event.splice(e,0)})}),babelHelpers.defineProperty(this,"setUID",function(e){s.common=v({},s.common,{uid:e})}),!i)throw new Error("srcId is required");"undefined"!=typeof window?(a=window.location.origin,t=window.performance&&window.performance.navigation&&1===window.performance.navigation.type,this.events=[],this.link=f,window.addEventListener("onbeforeunload",function(){s.sendBatchEvents(s.events)}),this.cycleSend(),t||(n=a,window.document.referrer&&window.document.referrer.startsWith(n))||window.localStorage.removeItem(b),(a=window.sessionStorage.tabId)||(a=Object(p.a)(),window.sessionStorage.tabId=a),this.meta={src_id:i,build_uid:c,sdk:"js/1",software_version:u,build:d},this.tabId=a,this.common=v({src_id:i},o),this.errorHandler=r):this.ssr=!0}},10962:function(e,t,n){"use strict";n.r(t);var r=n(10952),i=n(5986),o=i.a.initialPlatform,a=(window.avito||{}).userId,a=parseInt(void 0===a?"":a,10),c=new r.a({buildUid:"performance-frontend-load",softwareVersion:"desktop"===o?"Desktop":"MAV",srcId:"desktop"===o?96:95,common:{uid:isNaN(a)?void 0:a,ua:window.navigator.userAgent}}),s=function(e,t,n){return c.sendEvent(e,t,n)},u=n(10953),d=n(5985);function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}n.d(t,"sendLoadEvent",function(){return m}),n.d(t,"sendInteractiveEvent",function(){return v}),n.d(t,"sendFidEvent",function(){return b}),n.d(t,"sendLcpEvent",function(){return _}),n.d(t,"sendClsEvent",function(){return g});function p(e,t,n){var r=i.a.initialPageId,o=i.a.isDevEnv;Object(d.g)()||o||(o=Object(u.a)().type,s(e,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){babelHelpers.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({from_page:r,network_type:l[o]},n)))}var l={unknown:"UNKNOWN",gprs:"GPRS",regular2G:"2G",good2G:"2G_plus",regular3G:"3G",good3G:"3G_plus",regular4G:"4G",wifi:"Wi-Fi"},m=function(e){p(3939,3,{performance_meta_route_name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"unknown",performance_timing_redirect_start:e.redirectStart,performance_timing_redirect_end:e.redirectEnd,performance_timing_fetch_start:e.fetchStart,performance_timing_domain_lookup_start:e.domainLookupStart,performance_timing_domain_lookup_end:e.domainLookupEnd,performance_timing_connect_start:e.connectStart,performance_timing_secure_connection_start:e.secureConnectionStart,performance_timing_connect_end:e.connectEnd,performance_timing_request_start:e.requestStart,performance_timing_response_start:e.responseStart,performance_timing_response_end:e.responseEnd,performance_timing_first_paint:e.firstPaint,performance_timing_first_contentful_paint:e.firstContentfulPaint,performance_timing_dom_interactive:e.domInteractive,performance_timing_dom_content_loaded_event_start:e.domContentLoadedEventStart,performance_timing_dom_content_loaded_event_end:e.domContentLoadedEventEnd,performance_timing_dom_complete:e.domComplete,performance_timing_load_event_start:e.loadEventStart,performance_timing_load_event_end:e.loadEventEnd})},v=function(e,t){p(4154,2,{performance_user_centric_interactive:e,performance_user_centric_total_blocking_time:t})},b=function(e){p(4156,1,{performance_user_centric_first_input_delay:e})},_=function(e){p(4409,1,{performance_user_centric_largest_contentful_paint:e})},g=function(e){p(4571,0,{performance_user_centric_cumulative_layout_shift:e})}}}]);
