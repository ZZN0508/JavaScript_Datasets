(window.monolithJsonpFunction=window.monolithJsonpFunction||[]).push([["fb609377"],{5889:function(e,t){!function(){!function(O){"use strict";function a(l,h){var o,i,m=/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,v={},p=["qwertyuiop[]asdfghjkl;'zxcvbnm,.","Р№С†СѓРєРµРЅРіС€С‰Р·С…СЉС„С‹РІР°РїСЂРѕР»РґР¶СЌСЏС‡СЃРјРёС‚СЊР±СЋ"],a=[9,13,16,17,18,27,37,38,39,40,91,93],r=!1,c="",u=null,g=!1,C=O("<ul />"),d=l.clone(),n=null,f=h.isDisabled,s=l.val();function y(){w(),u=null,r=!1,o&&(O(o).removeClass(h.itemSelectedClass),o=null),C.fadeOut(200)}function t(){var e,t;r&&(t=(e=l.offset()).left,C.css({left:t,top:e.top+l.outerHeight()}))}function S(){var e=l.outerWidth();C.css("width",h.autoWidth?"auto":e).fadeIn(100),r=!0,h.realign&&t()}function x(){if(r&&0<C.children().length){var e=C.children().first();if(e.data("isDefault"))return w(),0;var t=e.data("value"),a=l.val(),e=t.toLowerCase().indexOf(a.toLowerCase());if(e<0||0<e&&/\w/.test(t[e-1]))return w(),0;e+=a.length,(t=t.substring(e).split(" "))&&0<t.length?(e=(a+(t=t[0].replace(/[В«В»\"]/g,""))).trim(),d.val().trim()!==e&&d.val(a+t)):w()}else w()}function w(){d.val("")}function b(e,t){var a,n,s;e.length?(o&&O(o).removeClass(h.itemSelectedClass),o=e.get(0),e.addClass(h.itemSelectedClass),t||(u=u||l.val(),"function"==typeof h.onSelectByNavigation?h.onSelectByNavigation(e):l.val(e.data("value")),w(),s=C.outerHeight(),a=C.scrollTop(),0<(s=(n=e.outerHeight(!0))-(a+s-(e=o.offsetTop)))?C.scrollTop(a+n*Math.ceil(s/n)):e<a&&C.scrollTop(a-n*Math.ceil((a-e)/n)))):(o&&(O(o).removeClass(h.itemSelectedClass),o=null),!t&&u&&(l.val(u),u=null,x()))}function T(e,t){if("string"==typeof e)return e;switch(t){case"html":return e.content;case"text":return e.data.value||e.content;default:return""}}function k(e){var f;u=o=null,"function"==typeof h.modifyResponse&&(e=h.modifyResponse(e)),i=e,C.html(""),e&&e.length?(f=c.trim().split(" ").sort(function(e,t){return t.length-e.length}),O.each(e,function(e,t){var a,n,s,o,l,i,r,c,u=T(t,"html"),g=u;if(!t.data||!t.data.isDefault)for(o=0;o<f.length;++o){if((g=L(u,a=f[o].replace(m,"\\$1")))===u){if(void 0===v[a]){if(s=a.match(/[a-zР°-СЏ]/i)){for(c=0<=p[0].indexOf(s)?(r=p[0],p[1]):(r=p[1],p[0]),n="",l=0;l<a.length;++l)n+=0<=(i=r.indexOf(a[l]))?c[i]:a[l];n=n.replace(m,"\\$1")}else n=a;v[a]=n}else n=v[a];g=L(u,n)}u=g}var d=O("<li></li>").addClass(h.itemClass).attr("data-marker","suggest/list/item"+(-1<t.content.indexOf("js-suggest-category")?"-with-category":"")).html(u).appendTo(C).hover(function(){b(O(this),!0)},function(){O(this).removeClass(h.itemSelectedClass)});t.data&&d.data(t.data),-1<t.content.indexOf("suggestItemElement")&&d.attr("style","border-bottom: solid 1px #D6D6D6;"),t.data&&t.data.value||d.data("value",d.text())}),S(),x()):y(),C.scrollTop(0)}function D(e){var a,n,s,o=E(e||l.val(),h.charsAllowed),t=o.length;if(t<h.minLength||t>h.maxLength)return r&&y(),c=o,0;o===c&&0<t||(g&&c.length!==h.minLength&&c&&o.length>c.length&&o.substring(0,c.length)===c?r&&y():(c=o,a=h.getParams(),n=a?O.param(a)+"_":"",(s={})[h.queryKeyName||"q"]=o,e=function(t){var e;l.addClass(h.loaderClass),O(h.containerSelector).addClass(h.containerLoaderClass),O.extend(s,a),h.modifyRequest&&(e=h.modifyRequest(s)),O.ajax({dataType:"json",url:h.url,data:h.stringifyData?JSON.stringify(e||s):e||s,method:h.requestMethod}).always(function(){l.removeClass(h.loaderClass),O(h.containerSelector).removeClass(h.containerLoaderClass)}).done(function(e){t(e),function(e,t,a){var n,s,o,l,i,r=e.length,c="";if(a&&0<a.length){var u=T((i="function"==typeof h.modifyResponse?h.modifyResponse(a):a)[0],"text").toLowerCase();if(u.length>r&&0<=(l=u.indexOf(e)))for(n=i.length,s=r+1;s<u.length+1;++s)if((c=u.substring(l,l+s)).trim()!==e){if(1!==n)for(o=1;o<n;++o)if(T(i[o],"text").toLowerCase().indexOf(c)<0)return;avito.cache.set("s_"+h.cachePrefix+t+c,a)}}}(o,n,e)}).fail(function(){g=!0,k(null)})},t=function(e){g=O.isEmptyObject(e),k(e)},h.useCache?avito.cache.get("s_"+h.cachePrefix+n+o,t,e,h.cacheTime):e(t)))}function L(e,t){return 0<t.length?e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),'<span class="form-suggest-match">$1</span>'):e}d.removeClass().removeAttr("name").removeAttr("placeholder").removeAttr("data-marker").prop("tabindex",-1).css({position:"absolute"}).prop("autocomplete","off").prop({id:l.attr("id")+"_greyed"}).addClass(h.greyInputClass).val("").prependTo(l.parent()),l.addClass(h.suggestInputClass).attr("autocomplete","off"),C.addClass(h.suggestClass).attr("data-marker","suggest/list").each(function(e,t){t.style.display="none"}).appendTo(h.listContainer),l.on("keydown.suggest",function(e){var t,a,n,s;if(!f)switch(e.keyCode){case 27:r&&(e.preventDefault(),y(),u&&(l.val(u),u=null));break;case 38:r&&(e.preventDefault(),o?0<O(o).prev().length?b(O(o).prev()):b():b(C.children().last()));break;case 40:r&&(e.preventDefault(),o?0<O(o).next().length?b(O(o).next()):b():b(C.children().first()));break;case 9:r&&l.val().length===l.getSelectionStart()&&l.getSelectionStart()===l.getSelectionEnd()&&(e.preventDefault(),(n=l.val())===(t=""===(t=d.val())?n:t)?o||((a=C.children().first()).data("isDefault")||(n=a.data("value"),l.val(n),l.trigger("set-suggest-data",{suggestListCached:i,current:n}),x(),D(),"function"==typeof h.onChosenWithTab&&h.onChosenWithTab(a,n))):(l.val(t+" "),D()));break;case 13:o?(s=O(o),"function"==typeof h.onSelect?h.onSelect(s,l,e):l.val(s.data("value")),l.trigger("set-suggest-data",{suggestListCached:i,current:s.data("value")}),c=l.val(),r&&(e.preventDefault(),y())):y();break;case 46:case 8:l.trigger("set-suggest-data",{suggestListCached:i,current:null}),t=l.val().substring(l.getSelectionStart(),l.getSelectionEnd()),s=l.val(),0===t.localeCompare(s)&&w()}}),l.on("input.suggest",function(e){var t;f||(t=l.val(),s!==t&&(s=t,8!==e.keyCode&&e.keyCode||(g=!1),-1===a.indexOf(e.keyCode)&&(h.inputDelay?((d.val().includes(E(t,h.charsAllowed))?w:x)(),n&&clearTimeout(n),n=setTimeout(function(){D(),n=null},h.inputDelay)):D())))}),l.on("toggle.suggest",function(e,t){f=!t}),l.on("reset.suggest",function(){c=""}),l.on("focus",function(){f||h.showOnFocus&&setTimeout(function(){D(),S(),h.onFocus&&"function"==typeof h.onFocus&&h.onFocus()})}),O(document).on("click.suggest",function(e){if(!f){if(e.target){if(e.target===l.get(0))return;e=O(e.target);(e=!e.hasClass(h.itemClass)?e.closest("."+h.itemClass):e).hasClass(h.itemClass)&&e.closest(C).length?("function"==typeof h.onSelect?h.onSelect(e,l):l.val(e.data("value")),l.trigger("set-suggest-data",{suggestListCached:i,current:e.data("value")}),c=l.val()):"function"==typeof h.onHideWithoutSelect&&h.onHideWithoutSelect()}y()}}),h.realign&&O(window).on("resize.suggest",t)}function t(e){var t,a=e.jquery?e.get(0):e;return a.selectionStart&&a.selectionEnd?{start:a.selectionStart,end:a.selectionEnd}:document.selection?(a.focus(),(t=document.selection.createRange())?(a=(e=a.createTextRange()).duplicate(),e.moveToBookmark(t.getBookmark()),a.setEndPoint("EndToStart",e),{start:a.text.length,end:a.text.length+t.text.length}):0):null}function E(e,t){return e.toLowerCase().replace(new RegExp("[^"+t+"]+","g"),"").replace(/(\040|\t)+/g," ")}O.fn.extend({getSelectionStart:function(){var e=t(this);if(e)return e.start},getSelectionEnd:function(){var e=t(this);if(e)return e.end},autocomplete:function(t){return this.each(function(){var e=O(this);e.data("autocomplete")||(t=Object.assign({inputDelay:0,url:null,requestMethod:"GET",stringifyData:!1,getParams:function(){return!1},minLength:2,maxLength:32,charsAllowed:"a-zР°-СЏС‘0-9 \\[\\{\\]\\};:'\",<\\.>\\-",cachePrefix:"",realign:!0,isDisabled:!1,suggestClass:"suggest",suggestInputClass:"suggest_search",loaderClass:"loads is-loading",containerLoaderClass:"",containerSelector:null,listContainer:"body",itemClass:"suggest_item",itemSelectedClass:"selected",autoWidth:!1,showOnFocus:!1,cacheTime:1800,useCache:!0},t)),e.data("autocomplete",new a(e,t))})}})}($)}.call(window)}}]);
