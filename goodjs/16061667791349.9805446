!function(e,t){"use strict";"function"==typeof define&&define.amd?(t(e.ns_=e.ns_||{}),define("nyt_comscore_streaming",[],function(){return e.ns_})):"object"==typeof module&&module.exports?module.exports=t({}):t(e.ns_=e.ns_||{})}(this,function(e){"use strict";e.ns_=e;var a,s,i,o,t,ge=ge||{};ge.indexOf=function(s,e){var n=-1;return this.forEach(e,function(e,t){e==s&&(n=t)}),n},ge.forEach=function(e,t,s){try{if("function"==typeof t)if(s=void 0!==s?s:null,"number"!=typeof e.length||void 0===e[0]){var n,a=void 0!==e.__proto__;for(n in e)!e.hasOwnProperty(n)||a&&void 0!==e.__proto__[n]||"function"==typeof e[n]||t.call(s,e[n],n)}else for(var i=0,o=e.length;i<o;i++)t.call(s,e[i],i)}catch(e){}},(ge=ge||{}).parseBoolean=function(e,t){return t=t||!1,e?"0"!=e:t},ge.parseInteger=function(e,t){return null==e||isNaN(e)?t||0:parseInt(e)},ge.parseLong=function(e,t){var s=Number(e);return null==e||isNaN(s)?t||0:s},ge.toString=function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if(e instanceof Array)return e.join(",");var t,s="";for(t in e)e.hasOwnProperty(t)&&(s+=t+":"+e[t]+";");return s||e.toString()},(ge=ge||{}).filter=function(e,t){var s,n={};for(s in t)t.hasOwnProperty(s)&&e(t[s])&&(n[s]=t[s]);return n},ge.extend=function(e){var t,s=arguments.length;e=e||{};for(var n=1;n<s;n++)if(t=arguments[n])for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},(ge=ge||{}).cloneObject=function(e){return null==e||"object"!=typeof e?e:(a=[],s.prototype={constructor:s,canCopy:function(){return!1},create:function(e){},populate:function(e,t,s){}},n.prototype={constructor:n,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,s=t.length,n=0;n<s;n++)if(t[n][0]===e)return t[n][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var t=this.getCachedResult(e);if(t)return t;for(var s=0;s<a.length;s++){var n=a[s];if(n.canCopy(e))return this.applyDeepCopier(n,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var s=e.create(t);if(this.cacheResult(t,s),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,s),this.depth--,s}},i.DeepCopier=s,i.deepCopiers=a,(i.register=function(e){e instanceof s||(e=new s(e)),a.unshift(e)})({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?"object"==typeof(e=e.constructor.prototype)?(t.prototype=e,new t):e:{}},populate:function(e,t,s){for(var n in t)t.hasOwnProperty(n)&&(s[n]=e(t[n]));return s}}),i.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,s){for(var n=0;n<t.length;n++)s.push(e(t[n]));return s}}),i.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),i.register({canCopy:function(e){return e=e,"undefined"!=typeof window&&window&&window.Node?e instanceof Node:"undefined"!=typeof document&&e===document||"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode},create:function(e){return"undefined"!=typeof document&&e===document?document:e.cloneNode(!1)},populate:function(e,t,s){if("undefined"!=typeof document&&t===document)return document;if(t.childNodes&&t.childNodes.length)for(var n=0;n<t.childNodes.length;n++){var a=e(t.childNodes[n]);s.appendChild(a)}}}),{deepCopy:i}).deepCopy(e);var a;function t(){}function s(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function n(){this.copiedObjects=[];var t=this;this.recursiveDeepCopy=function(e){return t.deepCopy(e)},this.depth=0}function i(e,t){var s=new n;return t&&(s.maxDepth=t),s.deepCopy(e)}},(ge=ge||{}).getNamespace=function(){return e.ns_||e},ge.uid=(t=1,function(){return+new Date+"_"+t++}),ge.isEmpty=function(e){return null==e||""===e||e instanceof Array&&0===e.length},ge.isNotEmpty=function(e){return!this.isEmpty(e)},ge.safeGet=function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},ge.isTrue=function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},ge.regionMatches=function(e,t,s,n,a){if(t<0||n<0||t+a>e.length||n+a>s.length)return!1;for(;0<=--a;)if(e.charAt(t++)!=s.charAt(n++))return!1;return!0},ge.exists=function(e){return void 0!==e&&null!=e},i=!(s=!(a=[])),o=1e3,ge.onSystemClockJump=function(e,t){a.push(e),s||(s=!0,o=t||o,i=+new Date,setInterval(function(){var e=i+o,t=+new Date,s=(i=t)-e;if(Math.abs(s)>o)for(var n=0;n<a.length;++n)a[n](0<s)},o))},(ge=ge||{}).hasPageVisibilityAPISupport=function(){if("undefined"==typeof document)return!1;var e=void 0===document.hidden&&void 0===document.mozHidden&&void 0===document.msHidden&&void 0===document.webkitHidden?!1:!0;return function(){return e}}(),ge.getPageVisibilityAPI=function(){if("undefined"==typeof document)return null;var e,t,s;void 0!==document.hidden?(e="hidden",t="visibilitychange",s="visibilityState"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange",s="mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange",s="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange",s="webkitVisibilityState");var n={hidden:e,visibilityChange:t,state:s};return function(){return n}}(),ge.isTabInBackground=function(){if("undefined"==typeof document)return null;var e=ge.getPageVisibilityAPI();return function(){return document[e.hidden]}}(),ge.getBrowserName=function(){if(!navigator)return"";var e,t,s=navigator.userAgent||"",n=navigator.appName||"";return-1!=(t=s.indexOf("Opera"))||-1!=(t=s.indexOf("OPR/"))?n="Opera":-1!=(t=s.indexOf("Android"))?n="Android":-1!=(t=s.indexOf("Chrome"))?n="Chrome":-1!=(t=s.indexOf("Safari"))?n="Safari":-1!=(t=s.indexOf("Firefox"))?n="Firefox":-1!=(t=s.indexOf("IEMobile"))?n="Internet Explorer Mobile":"Microsoft Internet Explorer"==n||"Netscape"==n?n="Internet Explorer":(e=s.lastIndexOf(" ")+1)<(t=s.lastIndexOf("/"))?(n=s.substring(e,t)).toLowerCase()==n.toUpperCase()&&(n=navigator.appName):n="unknown",n},ge.getBrowserFullVersion=function(){if(!navigator)return"";var e,t=navigator.userAgent||"",s=navigator.appName||"",n=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(e=t.indexOf("Opera"))?(n=t.substring(e+6),-1!=(e=t.indexOf("Version"))&&(n=t.substring(e+8))):-1!=(e=t.indexOf("OPR/"))?n=t.substring(e+4):-1!=(e=t.indexOf("Android"))?n=t.substring(e+11):-1!=(e=t.indexOf("Chrome"))?n=t.substring(e+7):-1!=(e=t.indexOf("Safari"))?(n=t.substring(e+7),-1!=(e=t.indexOf("Version"))&&(n=t.substring(e+8))):-1!=(e=t.indexOf("Firefox"))?n=t.substring(e+8):"Microsoft Internet Explorer"==s?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(n=parseFloat(RegExp.$1)):"Netscape"==s?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&(n=parseFloat(RegExp.$1)):n=t.lastIndexOf(" ")+1<(e=t.lastIndexOf("/"))?t.substring(e+1):"unknown",-1!=(e=(n=-1!=(e=(n=-1!=(e=(n=n.toString()).indexOf(";"))?n.substring(0,e):n).indexOf(" "))?n.substring(0,e):n).indexOf(")"))&&(n=n.substring(0,e)),e=parseInt(""+n,10),n=isNaN(e)?""+parseFloat(navigator.appVersion):n},ge.browserAcceptsLargeURLs=function(){return"undefined"==typeof window||(window.ActiveXObject,!0)},ge.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},ge.isWebSecure=function(){return"undefined"!=typeof document&&null!=document&&"s"===document.location.href.charAt(4)};var u,S,_,P,b,f,p,ce=function(s,i){function t(e){e=e||[];var t=["comScore",+new Date];return s&&t.push(s),e=Array.prototype.slice.call(e),t.concat(e)}function n(e){var t,s,n;if("boolean"==typeof i||!i)return i;if(n=e.join(" "),!(i instanceof Array&&0<i.length)){if("object"!=typeof i)return 1;var a=!1;if(i.hide instanceof Array)for(t=0;t<i.hide.length;++t)if((s=i.hide[t])instanceof RegExp&&s.test(n)){a=!0;break}if(i.show instanceof Array)for(t=0;t<i.show.length;++t)if((s=i.show[t])instanceof RegExp&&s.test(n))return 1;return!a&&!i.show}for(t=0;t<i.length;++t)if((s=i[t])instanceof RegExp&&s.test(n))return 1}function a(e){var t=o.length;(1e4<t||i&&i.max&&t>i.max)&&(o=o.slice(-Math.floor(i.max/2))).push("Previous logs: "+t),o.push(e)}var e=this,o=[];e.log=function(){var e=t(arguments);a(e),"undefined"!=typeof console&&"function"==typeof console.log&&n(e)&&console.log.apply(console,e)},e.warn=function(){var e=t(arguments);a(e),"undefined"!=typeof console&&"function"==typeof console.warn&&n(e)&&console.warn.apply(console,e)},e.error=function(){var e=t(arguments);a(e),"undefined"!=typeof console&&"function"==typeof console.error&&n(e)&&console.error.apply(console,e)},e.apiCall=function(e){for(var t=["API call to:",e],s=1;s<arguments.length;++s)t.push("arg"+s+":",arguments[s]);this.log.apply(this,t)},e.infoLog=function(){var e=["Trace log:"];e.push.apply(e,Array.prototype.slice.call(arguments)),this.log.apply(this,e)},e.deprecation=function(e,t){e=["Deprecated API:",e,"is deprecated and will be eventually removed."];t&&e.push("Use",t,"instead."),this.warn.apply(this,e)},e.getLogHistory=function(){return o}};return e.StreamingAnalytics=e.StreamingAnalytics||function(){var n,S={PLATFORM:"generic",httpGet:function(e,t){var s;"undefined"!=typeof Image?((s=new Image).onload=function(){t&&t(200),s=null},s.onerror=function(){t&&t(),s=null},s.src=e):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},httpPost:function(e,t,s){"function"==typeof setTimeout?s&&setTimeout(function(){s(200)},0):s&&s(200)},Storage:(n="cs_",function(){var s="undefined"!=typeof localStorage?localStorage:null;ge.extend(this,{get:function(e){return s&&s.getItem(n+e)},set:function(e,t){s&&s.setItem(n+e,t)},has:function(e){return s&&s.getItem(n+e)},remove:function(e){s&&s.removeItem(n+e)},clear:function(){for(var e=0;s&&e<s.length;++e){var t=s.key(e);t.substr(0,n.length)===n&&s.removeItem(t)}}})}),IO:{dir:function(){return null},append:function(e,t,s){},write:function(e,t,s){},deleteFile:function(){return!1},read:function(){return null}},onDataFetch:function(e){e()},getCrossPublisherId:function(){return null},getAppName:function(){return Q.UNKNOWN_VALUE},getAppVersion:function(){return Q.UNKNOWN_VALUE},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return Q.UNKNOWN_VALUE},getPlatformVersion:function(){return Q.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return Q.UNKNOWN_VALUE},getRuntimeVersion:function(){return Q.UNKNOWN_VALUE},getDisplayResolution:function(){return Q.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return Q.UNKNOWN_RESOLUTION},getLanguage:function(){return Q.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return Q.UNKNOWN_VALUE},getConnectionType:function(){return Q.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return Q.UNKNOWN_VALUE},isConnectionSecure:function(){return!1},processMeasurementLabels:function(){}},Q={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};ge.jsonObjectToStringDictionary=function(e){var t,s={};for(t in e){var n=e[t];s[t]=null==n?n:e[t]+""}return s},ge.getKeys=function(e,t){var s,n=[];for(s in e)t&&!t.test(s)||!e.hasOwnProperty(s)||(n[n.length]=s);return n},ge.fixEventTime=function(e){if(e.ns_ts)return parseInt(e.ns_ts);var t=+new Date;return e.ns_ts=t+"",t},ge.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},ge.addNewPlaybackInterval=function(e,t,s,n){var a={};if(!(t<=s))return ge.cloneObject(e);if(a.start=t,a.end=s,0==e.length)return e.push(a),ge.cloneObject(e);for(g=0;g<e.length;g++)if(a.start>=e[g].start&&a.end<=e[g].end)return ge.cloneObject(e);for(var i=!1,o=0;o<e.length;o++)if(o+1===e.length&&a.start>=e[o].start||a.start>=e[o].start&&a.start<e[o+1].start){e.splice(o+1,0,a),i=!0;break}i||e.splice(0,0,a);for(var r=[e[0]],g=1;g<e.length;g++)r[r.length-1].end+n<e[g].start?r.push(e[g]):r[r.length-1].end<e[g].end&&(r[r.length-1].end=e[g].end);return ge.cloneObject(r)},ge.stateToString=function(e){var t,s=a.InternalStates;for(t in s)if(s.hasOwnProperty(t)&&s[t]==e)return t};var t,s,M=(s=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"],{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(e){return s[e]}}),Y={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},_=(t=["c","s","r"],{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(e){return t[e]}}),X={STREAMINGANALYTICS_VERSION:"6.1.0.170130",MODEL_VERSION:"5.8",LOG_NAMESPACE:"STA",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL:1e3,SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL:500,DEFAULT_ASSET_PLAYBACK_RATE:100,STANDARD_METADATA_LABELS:["ns_st_st","ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","cs_impid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_st_ie","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},k=(i.resetAsset=function(e,t,s){for(var n=e.getLabels(),a={},i=0;s&&i<s.length;++i)n.hasOwnProperty(s[i])&&(a[s[i]]=n[s[i]]);t.setLabels(a),t.setPlaybackIntervalMergeTolerance(e.getPlaybackIntervalMergeTolerance())},i),P=(e.resetPlaybackSession=function(e,t,s){for(var n=t.getAsset(),a=t.getLabels(),i={},o=0;s&&o<s.length;o++)a.hasOwnProperty(s[o])&&(i[s[o]]=a[s[o]]);e.getPlaybackSession().setLabels(i),k.resetAsset(n,e.getPlaybackSession().getAsset(),s)},e),x=function(n){var t,a,s=this,i=[];ge.extend(this,{newEvent:function(e){for(var t=0;t<i.length;++t)i[t](e.eventLabels);(function(e){a=ge.extend({},e);var t,s=n.getStaCore().getLiveEndpointURL();n.getAppCore()?n.getStaCore().isProperlyInitialized()&&(t=n.getStaCore().getExports().et,"function"==typeof n.getAppCore().getMeasurementDispatcher?n.getAppCore().getMeasurementDispatcher().send(t.HIDDEN,e,s):(t=n.getStaCore().getExports().am.newApplicationMeasurement(n.getAppCore(),t.HIDDEN,e,s),n.getAppCore().getQueue().offer(t))):s&&n.getStaCore().getPlatformAPI().httpGet(n.getStaCore().prepareUrl(s,e))})(e.eventLabels),e.eventType!=M.HEARTBEAT&&s.incrementEventCounter()},addMeasurementListener:function(e){"function"==typeof e&&i.push(e)},removeMeasurementListener:function(e){for(var t=NaN,s=0;s<i.length;++s)if(i[s]==e){t=s;break}isNaN(t)||i.splice(t,1)},getEventCounter:function(){return t},incrementEventCounter:function(){t++},setEventCounter:function(e){t=e},getMeasurementSnapshot:function(){return a}}),t=1},V=function(s){function t(){o++;var e={},t=ge.fixEventTime(e);e.ns_st_hc=s.getHeartbeat().getCount()+"";t=s.getStaCore().createLabels(M.HEARTBEAT,e,t);s.getPlaybackSession().getAsset().updateIndependentLabels(t.eventLabels),s.getEventManager().newEvent(t),i=0,r.resume()}function n(){null!=a&&(s.getStaCore().getPlatformAPI().clearTimeout(a),a=null)}var a,i,o,r=this,g=X.DEFAULT_HEARTBEAT_INTERVAL;ge.extend(this,{getCount:function(){return o},setIntervals:function(e){g=e},getInterval:function(e){var t=0;if(null!=g)for(var s=0;s<g.length;s++){var n=g[s],a=n.playingtime;if(!a||e<a){t=n.interval;break}}return t},getIntervals:function(){return g},resume:function(){n();var e=r.getInterval(s.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-s.getPlaybackSession().getAsset().getPlaybackTimestamp()));0<e&&(e=0<i?i:e,a=s.getStaCore().getPlatformAPI().setTimeout(t,e)),i=0},pause:function(){n();var e=r.getInterval(s.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-s.getPlaybackSession().getAsset().getPlaybackTimestamp()));i=e-(s.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-s.getPlaybackSession().getAsset().getPlaybackTimestamp()))%e}}),o=i=0},H=function(s){function e(){var e={},t=ge.fixEventTime(e);s.getStaCore().newPseudoEvent(M.KEEPALIVE,t,e),a.start()}function t(){null!=n&&(s.getStaCore().getPlatformAPI().clearTimeout(n),n=null)}var n,a=this,i=X.DEFAULT_KEEP_ALIVE_INTERVAL;ge.extend(a,{start:function(){t(),n=s.getStaCore().getPlatformAPI().setTimeout(e,i)},stop:t,setInterval:function(e){i=e},getInterval:function(){return i}})},q=function(e){var s,n,a,i=this;ge.extend(i,{eventTypeToState:function(e){if(a==Y.IDLE){if(e==M.PLAY)return Y.PLAYING;if(e==M.SEEK_START)return Y.SEEKING_BEFORE_PLAYBACK;if(e==M.BUFFER)return Y.BUFFERING_BEFORE_PLAYBACK}else if(a==Y.PLAYBACK_NOT_STARTED){if(e==M.PLAY)return Y.PLAYING;if(e==M.SEEK_START)return Y.SEEKING_BEFORE_PLAYBACK;if(e==M.BUFFER)return Y.BUFFERING_BEFORE_PLAYBACK;if(e==M.END||e==M.AD_SKIP)return Y.IDLE}else if(a==Y.PLAYING){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.BUFFER)return Y.BUFFERING_DURING_PLAYBACK;if(e==M.PAUSE)return Y.PAUSED;if(e==M.SEEK_START)return Y.SEEKING_DURING_PLAYBACK}else if(a==Y.PAUSED){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.BUFFER)return Y.BUFFERING_DURING_PAUSE;if(e==M.PLAY)return Y.PLAYING;if(e==M.SEEK_START)return Y.SEEKING_DURING_PAUSE}else if(a==Y.BUFFERING_BEFORE_PLAYBACK){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PAUSE||e==M.BUFFER_STOP)return Y.PLAYBACK_NOT_STARTED;if(e==M.PLAY)return Y.PLAYING;if(e==M.SEEK_START)return Y.SEEKING_BEFORE_PLAYBACK}else if(a==Y.BUFFERING_DURING_PLAYBACK){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PLAY||e==M.BUFFER_STOP)return Y.PLAYING;if(e==M.PAUSE_ON_BUFFERING)return Y.PAUSED_DURING_BUFFERING;if(e==M.SEEK_START)return Y.SEEKING_DURING_BUFFERING;if(e==M.PAUSE)return Y.PAUSED}else if(a==Y.BUFFERING_DURING_SEEKING){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PLAY)return Y.PLAYING;if(e==M.BUFFER_STOP)return Y.SEEKING_DURING_PLAYBACK;if(e==M.PAUSE)return Y.PAUSED}else if(a==Y.BUFFERING_DURING_PAUSE){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PLAY)return Y.PLAYING;if(e==M.SEEK_START)return Y.SEEKING_DURING_PAUSE;if(e==M.BUFFER_STOP||e==M.PAUSE)return Y.PAUSED}else if(a==Y.SEEKING_BEFORE_PLAYBACK){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PAUSE)return Y.PLAYBACK_NOT_STARTED;if(e==M.PLAY)return Y.PLAYING;if(e==M.BUFFER)return Y.BUFFERING_BEFORE_PLAYBACK}else if(a==Y.SEEKING_DURING_PLAYBACK){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PLAY)return Y.PLAYING;if(e==M.PAUSE)return Y.PAUSED;if(e==M.BUFFER)return Y.BUFFERING_DURING_SEEKING}else if(a==Y.SEEKING_DURING_BUFFERING){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PLAY)return Y.PLAYING;if(e==M.PAUSE||e==M.BUFFER_STOP)return Y.PAUSED;if(e==M.BUFFER)return Y.BUFFERING_DURING_SEEKING}else if(a==Y.SEEKING_DURING_PAUSE){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.PLAY)return Y.PLAYING;if(e==M.PAUSE||e==M.BUFFER_STOP)return Y.PAUSED;if(e==M.BUFFER)return Y.BUFFERING_DURING_PAUSE}else if(a==Y.PAUSED_DURING_BUFFERING){if(e==M.END||e==M.AD_SKIP)return Y.IDLE;if(e==M.SEEK_START)return Y.SEEKING_DURING_BUFFERING;if(e==M.PAUSE)return Y.PAUSED;if(e==M.PLAY||e==M.BUFFER_STOP)return Y.PLAYING}return null},getCurrentState:function(){return a},newEvent:function(e,t){e=i.eventTypeToState(e);a!=e&&(n=a,a=e,s=t)},getPreviousState:function(){return n},getLastStateChangeTimestamp:function(){return s}}),a=Y.IDLE,n=null,s=NaN},W=function(n){ge.extend(this,{onSeekStartWhenPausedOrBufferingDuringPause:function(e,t){t=parseInt(t.ns_st_po);n.getPlaybackSession().getAsset().isSeeking()?n.getPlaybackSession().getAsset().isCollectingSeekingTime()||(n.getPlaybackSession().getAsset().setSeekingTimestamp(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().isSeeking()||(n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(t),n.getPlaybackSession().getAsset().setSeekingTimestamp(e)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onBufferWhenSeekingOrPaused:function(e,t){n.getPlaybackSession().setBufferingTimestamp(e),n.getPlaybackSession().getAsset().setBufferingTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(e,t){n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().getAsset().addElapsedTime(e);var s=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(s.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(s.eventLabels),n.getEventManager().newEvent(s),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onBufferStopOrOnPlayWhenBufferingDuringPlayback:function(e,t){t=parseInt(t.ns_st_po);n.getStaCore().stopPausedOnBufferingTimer(),n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(t),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getHeartbeat().resume(),n.getKeepAlive().start()}})},j=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onBufferStop:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()?n.getPlaybackSession().getAsset().isCollectingSeekingTime()||(n.getPlaybackSession().getAsset().setSeekingTimestamp(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().isSeeking()||(n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(t),n.getPlaybackSession().getAsset().setSeekingTimestamp(e))},onPause:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().getAsset().setPlaybackStarted(!0),!n.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=n.getPlaybackSession().getPlaybackCounter()||(n.getPlaybackSession().incrementPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().setPlaybackStarted(!0),n.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),(0==n.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||n.getPlaybackSession().getAsset().getPartNumber()<=n.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(n.getPlaybackSession().getAsset().setLowestPartNumberPlayed(n.getPlaybackSession().getAsset().getPartNumber()),n.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaySequenceCounter(0),n.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=n.getStaCore().getLoadTimeOffset()+e-n.getStaCore().getInitTimestamp()+"",n.getStaCore().setLoadingTimeSent(!0)),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},J=function(n){ge.extend(this,{onEndAndSkip:function(e,t){n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e);var s=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(s.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(s.eventLabels),n.getEventManager().newEvent(s),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onPause:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},z=function(n){ge.extend(this,{onPauseOnBuffering:function(e,t){parseInt(t.ns_st_po),n.getStaCore().stopPausedOnBufferingTimer(),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses();t=n.getStaCore().createLabels(M.PAUSE,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(t.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(t.eventLabels),n.getEventManager().newEvent(t),n.getPlaybackSession().setBufferingTimestamp(e),n.getPlaybackSession().getAsset().setBufferingTimestamp(e)},onEndOrAdSkip:function(e,t){parseInt(t.ns_st_po),n.getStaCore().stopPausedOnBufferingTimer(),n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e);e=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onSeekStart:function(e,t){var s=parseInt(t.ns_st_po);n.getStaCore().stopPausedOnBufferingTimer(),n.getHeartbeat().pause(),n.getKeepAlive().stop(),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(s),n.getPlaybackSession().getAsset().setSeekingTimestamp(e),n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses();e=n.getStaCore().createLabels(M.PAUSE,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)},onPause:function(e,t){parseInt(t.ns_st_po),n.getStaCore().stopPausedOnBufferingTimer(),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses();e=n.getStaCore().createLabels(M.PAUSE,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},$=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getStaCore().stopPausedOnBufferingTimer(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e);var s=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(s.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(s.eventLabels),n.getEventManager().newEvent(s),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onPause:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses(),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},Z=function(n){ge.extend(this,{onBuffer:function(e,t){n.getPlaybackSession().setPlaybackSessionStarted(!0),n.getPlaybackSession().getAsset().setAssetStarted(!0),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().setSeekingTime(n.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),n.getPlaybackSession().setBufferingTimestamp(e),n.getPlaybackSession().getAsset().setBufferingTimestamp(e)},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);n.getPlaybackSession().setPlaybackSessionStarted(!0),n.getPlaybackSession().getAsset().setAssetStarted(!0),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().setSeekingTime(n.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(t),n.getPlaybackSession().getAsset().setSeekingTimestamp(e)},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().setPlaybackSessionStarted(!0),n.getPlaybackSession().getAsset().setAssetStarted(!0),!n.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=n.getPlaybackSession().getPlaybackCounter()||(n.getPlaybackSession().incrementPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().setSeekingTime(n.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().setPlaybackStarted(!0),n.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==n.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||n.getPlaybackSession().getAsset().getPartNumber()<=n.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(n.getPlaybackSession().getAsset().setLowestPartNumberPlayed(n.getPlaybackSession().getAsset().getPartNumber()),n.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaySequenceCounter(0),n.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=n.getStaCore().getLoadTimeOffset()+e-n.getStaCore().getInitTimestamp()+"",n.getStaCore().setLoadingTimeSent(!0)),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},ee=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().getAsset().addElapsedTime(e);var s=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(s.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(s.eventLabels),n.getEventManager().newEvent(s),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},te=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1));e=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onBufferStop:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().isSeeking()?n.getPlaybackSession().getAsset().isCollectingSeekingTime()||(n.getPlaybackSession().getAsset().setSeekingTimestamp(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().isSeeking()||(n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(t),n.getPlaybackSession().getAsset().setSeekingTimestamp(e)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPause:function(e,t){n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().addBufferingTime(e),n.getPlaybackSession().getAsset().addBufferingTime(e),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},se=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);n.getPlaybackSession().getAsset().isSeeking()?n.getPlaybackSession().getAsset().setSeekingTimestamp(e):n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().isSeeking()||(n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(t),n.getPlaybackSession().getAsset().setSeekingTimestamp(e))},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().setPlaybackSessionStarted(!0),!n.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=n.getPlaybackSession().getPlaybackCounter()||(n.getPlaybackSession().incrementPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().setPlaybackStarted(!0),n.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==n.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||n.getPlaybackSession().getAsset().getPartNumber()<=n.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(n.getPlaybackSession().getAsset().setLowestPartNumberPlayed(n.getPlaybackSession().getAsset().getPartNumber()),n.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaySequenceCounter(0),n.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=n.getStaCore().getLoadTimeOffset()+e-n.getStaCore().getInitTimestamp()+"",n.getStaCore().setLoadingTimeSent(!0)),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)},onBuffer:function(){n.getPlaybackSession().setBufferingTimestamp(eventTimestamp),n.getPlaybackSession().getAsset().setBufferingTimestamp(eventTimestamp)}})},ne=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){var s=parseInt(t.ns_st_po);n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().addPlaybackTime(e),n.getPlaybackSession().getAsset().addPlaybackTime(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().addInterval(s);e=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onBuffer:function(e,t){var s=parseInt(t.ns_st_po);n.getHeartbeat().pause(),n.getKeepAlive().stop(),n.getPlaybackSession().addPlaybackTime(e),n.getPlaybackSession().getAsset().addPlaybackTime(e),n.getPlaybackSession().getAsset().addInterval(s),n.getStaCore().isPauseOnBufferingEnabled()&&n.getStaCore().startPausedOnBufferingTimer(e,t),n.getPlaybackSession().getAsset().incrementBufferCount(),n.getPlaybackSession().setBufferingTimestamp(e),n.getPlaybackSession().getAsset().setBufferingTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onSeekStart:function(e,t){var s=parseInt(t.ns_st_po);n.getHeartbeat().pause(),n.getKeepAlive().stop(),n.getPlaybackSession().addPlaybackTime(e),n.getPlaybackSession().getAsset().addPlaybackTime(e),n.getPlaybackSession().getAsset().addInterval(s),n.getPlaybackSession().getAsset().incrementSeeks(),n.getPlaybackSession().getAsset().setSeeking(!0),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),n.getPlaybackSession().getAsset().setSeekStartPosition(s),n.getPlaybackSession().getAsset().setSeekingTimestamp(e),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses();e=n.getStaCore().createLabels(M.PAUSE,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)},onPause:function(e,t){var s=parseInt(t.ns_st_po);n.getHeartbeat().pause(),n.getKeepAlive().stop(),n.getPlaybackSession().addPlaybackTime(e),n.getPlaybackSession().getAsset().addPlaybackTime(e),n.getPlaybackSession().getAsset().addInterval(s),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses();e=n.getStaCore().createLabels(M.PAUSE,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},ae=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onPause:function(e,t){n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),!n.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=n.getPlaybackSession().getPlaybackCounter()||(n.getPlaybackSession().incrementPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().getAsset().setPlaybackStarted(!0),n.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==n.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||n.getPlaybackSession().getAsset().getPartNumber()<=n.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(n.getPlaybackSession().getAsset().setLowestPartNumberPlayed(n.getPlaybackSession().getAsset().getPartNumber()),n.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),n.getPlaybackSession().getAsset().setPlaySequenceCounter(0),n.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=n.getStaCore().getLoadTimeOffset()+e-n.getStaCore().getInitTimestamp()+"",n.getStaCore().setLoadingTimeSent(!0)),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},ie=function(s){ge.extend(this,{onPause:function(e,t){s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses(),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)}})},oe=function(n){ge.extend(this,{onEndOrAdSkip:function(e,t){parseInt(t.ns_st_po),n.getStaCore().resetHeartbeat(),n.getKeepAlive().stop(),n.getPlaybackSession().getAsset().addElapsedTime(e);var s=n.getStaCore().createLabels(M.END,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(s.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(s.eventLabels),n.getEventManager().newEvent(s),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-n.getPlaybackSession().getAsset().getSeekingTimestamp()),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().storeAssetPlaybackCounters(),n.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),n.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ge.parseBoolean(t.ns_st_pe,!1)&&n.getStaCore().resetPlaybackSession()},onPlay:function(e,t){var s=parseInt(t.ns_st_po);n.getPlaybackSession().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),n.getPlaybackSession().getAsset().incrementPlayCounter(),n.getPlaybackSession().getAsset().isSeeking()&&(n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addSeekingAmount(s),n.getPlaybackSession().getAsset().setSeeking(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e),n.getPlaybackSession().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackTimestamp(e),n.getPlaybackSession().getAsset().setPlaybackStartPosition(s),n.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=n.getStaCore().getLoadTimeOffset()+e-n.getStaCore().getInitTimestamp()+"",n.getStaCore().setLoadingTimeSent(!0)),n.getHeartbeat().resume(),n.getKeepAlive().start();e=n.getStaCore().createLabels(M.PLAY,t,e);n.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),n.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),n.getEventManager().newEvent(e)}})},o=function(e){function b(e){var t=f.getStateMachine().getCurrentState();if(t==Y.IDLE||t==Y.PLAYBACK_NOT_STARTED||t==Y.BUFFERING_BEFORE_PLAYBACK||t==Y.SEEKING_BEFORE_PLAYBACK){if(e==M.PLAY)return 1}else if(t==Y.PLAYING){if(e==M.END||e==M.AD_SKIP||e==M.SEEK_START||e==M.PAUSE)return 1}else if(t==Y.PAUSED||t==Y.BUFFERING_DURING_PAUSE||t==Y.SEEKING_DURING_PLAYBACK||t==Y.SEEKING_DURING_BUFFERING||t==Y.SEEKING_DURING_PAUSE){if(e==M.END||e==M.AD_SKIP||e==M.PLAY)return 1}else if(t==Y.BUFFERING_DURING_PLAYBACK){if(e==M.PAUSE_ON_BUFFERING||e==M.END||e==M.AD_SKIP||e==M.SEEK_START||e==M.PAUSE||e==M.PLAY)return 1}else if(t==Y.BUFFERING_DURING_SEEKING){if(e==M.END||e==M.AD_SKIP||e==M.PAUSE||e==M.PLAY)return 1}else if(t==Y.PAUSED_DURING_BUFFERING&&(e==M.END||e==M.AD_SKIP||e==M.BUFFER_STOP||e==M.PLAY))return 1}var f,p,y,k,A,d,m,E,T,L,I,v,C,N,t,s,D,B,n,a,i,h,R,r,U,O,F,G,o,w=this,g={},c=X.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,l=X.THROTTLING_DELAY,u={},K=!1;ge.extend(w,{getConfiguration:function(){return e||{}},enableSystemClockJumpsDetection:function(e){ge.onSystemClockJump(function(e){O=e,K=!0},e=e<X.SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL||!e?X.SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL:e)},createLabels:function(e,t,s){var n=!1;e==M.HEARTBEAT&&(a=isNaN(B)?D:B,((B=s)<a||K)&&(K=!(n=!0),s<a?(f.getPlaybackSession().addInternalErrorFlag("1"),f.getLogging().infoLog("System clock jump detected","to the far past")):O?(f.getPlaybackSession().addInternalErrorFlag("3"),f.getLogging().infoLog("System clock jump detected","to the future")):(f.getPlaybackSession().addInternalErrorFlag("2"),f.getLogging().infoLog("System clock jump detected","to the near past")),s=a));var a,i={};return"undefined"!=typeof document&&(i.c7=(a=document).URL,i.c8=a.title,i.c9=a.referrer),i.ns_ts=+new Date+"",i.ns_st_ev=M.toString(e),i.ns_st_mp=X.DEFAULT_PLAYERNAME,i.ns_st_mv=X.STREAMINGANALYTICS_VERSION,i.ns_st_ub="0",i.ns_st_br="0",i.ns_st_pn="1",i.ns_st_tp="0",i.ns_st_it=_.toString(_.SINGLE_CLIP),i.ns_st_sv=X.STREAMINGANALYTICS_VERSION,i.ns_st_smv=X.MODEL_VERSION,i.ns_type="hidden",i.ns_st_ec=f.getEventManager().getEventCounter()+"",i.ns_st_ki=f.getKeepAlive().getInterval()+"",f.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?i.ns_st_po=f.getPlaybackSession().getAsset().getExpectedPlaybackPosition(s)+"":i.ns_st_po=U+"",U=parseInt(i.ns_st_po),ge.extend(i,w.getLabels()),f.getPlaybackSession().createLabels(i,s),ge.extend(i,t),n&&(f.getPlaybackSession().setPlaybackTimestamp(B-parseInt(i.ns_st_pt)),f.getPlaybackSession().getAsset().setPlaybackTimestamp(B-parseInt(i.ns_st_pt)),f.getPlaybackSession().getAsset().setElapsedTimestamp(B-parseInt(i.ns_st_et)),f.getStateMachine().getCurrentState()==Y.BUFFERING_DURING_PLAYBACK&&f.getPlaybackSession().getAsset().setBufferingTimestamp(B-parseInt(i.ns_st_bp))),{eventType:e,eventLabels:i}},newEvent:function(e,t,s,n){w.stopDelayedTransitionTimer();var a=f.getStateMachine().getCurrentState(),i=f.getStateMachine().eventTypeToState(e);if(null!=i&&i!=a)if(!w.isThrottlingEnabled()||a!=Y.PLAYING&&a!=Y.PAUSED||i!=Y.PLAYING&&i!=Y.PAUSED||n){var o,r,g,c,l=isNaN(B)?D:B,u=!1;((B=t)<l||K)&&(K=!(u=!0),t<l?(f.getPlaybackSession().addInternalErrorFlag("1"),f.getLogging().infoLog("System clock jump detected","to the far past")):O?(f.getPlaybackSession().addInternalErrorFlag("3"),f.getLogging().infoLog("System clock jump detected","to the future")):(f.getPlaybackSession().addInternalErrorFlag("2"),f.getLogging().infoLog("System clock jump detected","to the near past")),t=l),s.ns_st_po||(f.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?f.getStateMachine().getCurrentState()==Y.IDLE?s.ns_st_po="0":s.ns_st_po=f.getPlaybackSession().getAsset().getExpectedPlaybackPosition(t)+"":s.ns_st_po=U+""),U=parseInt(s.ns_st_po),f.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(s.ns_st_po)),g=e,c=t,n=s,l=f.getStateMachine().getCurrentState(),g==M.AD_SKIP&&!n.hasOwnProperty("ns_st_ui")&&b(g)?n.ns_st_ui="skip":g==M.SEEK_START&&!n.hasOwnProperty("ns_st_ui")&&b(g)&&(n.ns_st_ui="seek"),l==Y.IDLE?g==M.BUFFER?p.onBuffer(c,n):g==M.SEEK_START?p.onSeekStart(c,n):g==M.PLAY&&p.onPlay(c,n):l==Y.PLAYBACK_NOT_STARTED?g==M.END||g==M.AD_SKIP?k.onEndOrAdSkip(c,n):g==M.SEEK_START?k.onSeekStart(c,n):g==M.PLAY?k.onPlay(c,n):g==M.BUFFER&&k.onBuffer(c,n):l==Y.PLAYING?g==M.END||g==M.AD_SKIP?A.onEndOrAdSkip(c,n):g==M.BUFFER?A.onBuffer(c,n):g==M.SEEK_START?A.onSeekStart(c,n):g==M.PAUSE&&A.onPause(c,n):l==Y.PAUSED?g==M.END||g==M.AD_SKIP?y.onEndOrAdSkip(c,n):g==M.PLAY?y.onPlay(c,n):g==M.BUFFER?N.onBufferWhenSeekingOrPaused(c,n):g==M.SEEK_START&&N.onSeekStartWhenPausedOrBufferingDuringPause(c,n):l==Y.BUFFERING_BEFORE_PLAYBACK?g==M.END||g==M.AD_SKIP?d.onEndOrAdSkip(c,n):g==M.BUFFER_STOP?d.onBufferStop(c,n):g==M.SEEK_START?d.onSeekStart(c,n):g==M.PAUSE?d.onPause(c,n):g==M.PLAY&&d.onPlay(c,n):l==Y.BUFFERING_DURING_PLAYBACK?g==M.PAUSE_ON_BUFFERING?m.onPauseOnBuffering(c,n):g==M.BUFFER_STOP?N.onBufferStopOrOnPlayWhenBufferingDuringPlayback(c,n):g==M.END||g==M.AD_SKIP?m.onEndOrAdSkip(c,n):g==M.SEEK_START?m.onSeekStart(c,n):g==M.PAUSE?m.onPause(c,n):g==M.PLAY&&N.onBufferStopOrOnPlayWhenBufferingDuringPlayback(c,n):l==Y.BUFFERING_DURING_SEEKING?g==M.END||g==M.AD_SKIP?E.onEndOrAdSkip(c,n):g==M.PAUSE?E.onPause(c,n):g==M.PLAY?E.onPlay(c,n):g==M.BUFFER_STOP&&N.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(c,n):l==Y.BUFFERING_DURING_PAUSE?g==M.END||g==M.AD_SKIP?T.onEndAndSkip(c,n):g==M.PAUSE?T.onPause(c,n):g==M.PLAY?T.onPlay(c,n):g==M.SEEK_START?N.onSeekStartWhenPausedOrBufferingDuringPause(c,n):g==M.BUFFER_STOP&&N.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(c,n):l==Y.SEEKING_BEFORE_PLAYBACK?g==M.END||g==M.AD_SKIP?I.onEndOrAdSkip(c,n):g==M.PAUSE?I.onPause(c,n):g==M.PLAY?I.onPlay(c,n):g==M.BUFFER&&N.onBufferWhenSeekingOrPaused(c,n):l==Y.SEEKING_DURING_PLAYBACK?g==M.END||g==M.AD_SKIP?C.onEndOrAdSkip(c,n):g==M.PLAY?C.onPlay(c,n):g==M.BUFFER?N.onBufferWhenSeekingOrPaused(c,n):g==M.PAUSE&&N.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(c,n):l==Y.SEEKING_DURING_BUFFERING?g==M.PAUSE?v.onPause(c,n):g==M.BUFFER?N.onBufferWhenSeekingOrPaused(c,n):g==M.PLAY?N.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(c,n):g==M.END||g==M.AD_SKIP?N.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(c,n):g==M.BUFFER_STOP&&N.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(c,n):l==Y.PAUSED_DURING_BUFFERING?g==M.END||g==M.AD_SKIP?L.onEndOrAdSkip(c,n):g==M.BUFFER_STOP?L.onBufferStop(c,n):g==M.SEEK_START?L.onSeekStart(c,n):g==M.PAUSE?L.onPause(c,n):g==M.PLAY&&L.onPlay(c,n):l==Y.SEEKING_DURING_PAUSE&&(g==M.BUFFER?N.onBufferWhenSeekingOrPaused(c,n):g==M.PLAY?N.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(c,n):g==M.PAUSE?N.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(c,n):g==M.END||g==M.AD_SKIP?N.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(c,n):g==M.BUFFER_STOP&&N.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(c,n)),b(g)&&f.getPlaybackSession().setFirstEventSent(!0);var S=0;isNaN(f.getStateMachine().getLastStateChangeTimestamp())||(S=t-f.getStateMachine().getLastStateChangeTimestamp()),f.getStateMachine().newEvent(e,t),u&&(i!=Y.IDLE&&i!=Y.PLAYBACK_NOT_STARTED&&i!=Y.SEEKING_BEFORE_PLAYBACK&&i!=Y.BUFFERING_BEFORE_PLAYBACK&&f.getPlaybackSession().getAsset().setElapsedTimestamp(B),i!=Y.BUFFERING_BEFORE_PLAYBACK&&i!=Y.BUFFERING_DURING_PAUSE&&i!=Y.BUFFERING_DURING_PLAYBACK&&i!=Y.BUFFERING_DURING_SEEKING&&i!=Y.PAUSED_DURING_BUFFERING||(f.getPlaybackSession().setBufferingTimestamp(B),f.getPlaybackSession().getAsset().setBufferingTimestamp(B)),i!=Y.PLAYING&&i!=Y.BUFFERING_DURING_PLAYBACK||(f.getPlaybackSession().setPlaybackTimestamp(B),f.getPlaybackSession().getAsset().setPlaybackTimestamp(B)),i!=Y.SEEKING_BEFORE_PLAYBACK&&i!=Y.SEEKING_DURING_BUFFERING&&i!=Y.SEEKING_DURING_PAUSE&&i!=Y.SEEKING_DURING_PLAYBACK&&i!=Y.BUFFERING_DURING_SEEKING||f.getPlaybackSession().getAsset().setSeekingTimestamp(B)),f.getLogging().log("Transition from",ge.stateToString(a),"to",ge.stateToString(i),"due to event:",M.toString(e));for(var _=0,P=R.length;_<P;_++)R[_](a,i,s,S)}else{f.getLogging().infoLog("Throttled event:",M.toString(e),"during state",ge.stateToString(a),s,w.getThrottlingDelay(),"ms");u=(o=e,r=s,function(){w.newEvent(o,t,r,!0)});h=f.getPlatformAPI().setTimeout(u,w.getThrottlingDelay())}else f.getLogging().infoLog("Ignored event:",M.toString(e),"during state",ge.stateToString(a),s)},newPseudoEvent:function(e,t,s){if(e!=M.LOAD&&e!=M.ENGAGE||f.getStateMachine().getCurrentState()==Y.IDLE){e==M.ERROR&&null==s.ns_st_er&&(s.ns_st_er=Q.UNKNOWN_VALUE),e==M.TRANSFER&&null==s.ns_st_rp&&(s.ns_st_rp=Q.UNKNOWN_VALUE);var n,a,i,o,r=!0,g=!1;switch(e){case M.BIT_RATE:n="ns_st_br",a="ns_st_pbr";break;case M.PLAYBACK_RATE:n="ns_st_rt",a="ns_st_prt";break;case M.VOLUME:n="ns_st_vo",a="ns_st_pvo";break;case M.WINDOW_STATE:n="ns_st_ws",a="ns_st_pws";break;case M.AUDIO:n="ns_st_at",a="ns_st_pat";break;case M.VIDEO:n="ns_st_vt",a="ns_st_pvt";break;case M.SUBS:n="ns_st_tt",a="ns_st_ptt";break;case M.CDN:n="ns_st_cdn",a="ns_st_pcdn";break;default:r=!1}if(r&&n in s)switch(o=s[n],e){case M.BIT_RATE:case M.VOLUME:case M.WINDOW_STATE:n in u&&(i=u[n],g=o==(s[a]=i)+""),u[n]=s[n];break;case M.AUDIO:case M.VIDEO:case M.SUBS:case M.CDN:f.getPlaybackSession().getAsset().hasInternalLabel(n)&&(i=f.getPlaybackSession().getAsset().getInternalLabel(n),g=o==(s[a]=i)+""),f.getPlaybackSession().getAsset().setInternalLabel(n,s[n]);break;case M.PLAYBACK_RATE:i=f.getPlaybackSession().getAsset().getPlaybackRate(),s[a]=i+""}if(r&&f.getStateMachine().getCurrentState()!=Y.PLAYING&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PLAYBACK||r&&g)return e==M.PLAYBACK_RATE&&f.getPlaybackSession().getAsset().setPlaybackRate(parseInt(s.ns_st_rt)),void f.getLogging().infoLog("No measurement send for the pseudo-event:",M.toString(e),"during state",ge.stateToString(f.getStateMachine().getCurrentState()),s);var c=isNaN(B)?D:B,l=!1;((B=t)<c||K)&&(K=!(l=!0),t<c?(f.getPlaybackSession().addInternalErrorFlag("1"),f.getLogging().infoLog("System clock jump detected","to the far past")):O?(f.getPlaybackSession().addInternalErrorFlag("3"),f.getLogging().infoLog("System clock jump detected","to the future")):(f.getPlaybackSession().addInternalErrorFlag("2"),f.getLogging().infoLog("System clock jump detected","to the near past")),t=c),s.ns_st_po||(f.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?s.ns_st_po=f.getPlaybackSession().getAsset().getExpectedPlaybackPosition(t)+"":s.ns_st_po=U+""),U=parseInt(s.ns_st_po),f.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(s.ns_st_po)),f.getStateMachine().getCurrentState()!=Y.IDLE&&f.getStateMachine().getCurrentState()!=Y.PLAYBACK_NOT_STARTED&&f.getStateMachine().getCurrentState()!=Y.SEEKING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_BEFORE_PLAYBACK&&(f.getPlaybackSession().getAsset().addElapsedTime(t),f.getPlaybackSession().getAsset().setElapsedTimestamp(t)),f.getStateMachine().getCurrentState()!=Y.PLAYING&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PLAYBACK||(f.getPlaybackSession().addPlaybackTime(t),f.getPlaybackSession().setPlaybackTimestamp(t),f.getPlaybackSession().getAsset().addPlaybackTime(t),f.getPlaybackSession().getAsset().setPlaybackTimestamp(t),f.getPlaybackSession().getAsset().addInterval(parseInt(s.ns_st_po)),f.getPlaybackSession().getAsset().setPlaybackStartPosition(parseInt(s.ns_st_po))),f.getStateMachine().getCurrentState()!=Y.BUFFERING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PAUSE&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_SEEKING||(f.getPlaybackSession().addBufferingTime(t),f.getPlaybackSession().setBufferingTimestamp(t),f.getPlaybackSession().getAsset().addBufferingTime(t),f.getPlaybackSession().getAsset().setBufferingTimestamp(t));t=w.createLabels(e,s,t);f.getPlaybackSession().getAsset().updateDeltaLabels(t.eventLabels),f.getPlaybackSession().getAsset().updateIndependentLabels(t.eventLabels),f.getEventManager().newEvent(t),e==M.PLAYBACK_RATE&&f.getPlaybackSession().getAsset().setPlaybackRate(parseInt(s.ns_st_rt)),l&&(f.getStateMachine().getCurrentState()!=Y.PLAYING&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PLAYBACK||(f.getPlaybackSession().setPlaybackTimestamp(B),f.getPlaybackSession().getAsset().setPlaybackTimestamp(B)),f.getStateMachine().getCurrentState()!=Y.IDLE&&f.getStateMachine().getCurrentState()!=Y.PLAYBACK_NOT_STARTED&&f.getStateMachine().getCurrentState()!=Y.SEEKING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_BEFORE_PLAYBACK&&f.getPlaybackSession().getAsset().setElapsedTimestamp(B),f.getStateMachine().getCurrentState()!=Y.BUFFERING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PAUSE&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_SEEKING&&f.getStateMachine().getCurrentState()!=Y.PAUSED_DURING_BUFFERING||(f.getPlaybackSession().setBufferingTimestamp(B),f.getPlaybackSession().getAsset().setBufferingTimestamp(B)),f.getStateMachine().getCurrentState()!=Y.SEEKING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.SEEKING_DURING_BUFFERING&&f.getStateMachine().getCurrentState()!=Y.SEEKING_DURING_PAUSE&&f.getStateMachine().getCurrentState()!=Y.SEEKING_DURING_PLAYBACK&&f.getStateMachine().getCurrentState()!=Y.BUFFERING_DURING_SEEKING||f.getPlaybackSession().getAsset().setSeekingTimestamp(B))}else f.getLogging().infoLog("Ignored pseudo-event:",M.toString(e),"during state",ge.stateToString(f.getStateMachine().getCurrentState()),s)},getState:function(){return f.getStateMachine().getCurrentState()},addListener:function(e){R.push(e)},removeListener:function(e){R.splice(ge.indexOf(e,R),1)},getLabel:function(e){return u[e]},getLabels:function(){return u},setLabel:function(e,t){null==t?delete u[e]:u[e]=t},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&w.setLabel(t,e[t])},getPlatformAPI:function(){return f.getAppCore()?f.getAppCore().getPlatformAPI():S},getExports:function(){return g},isProperlyInitialized:function(){var e=f.getAppCore().getAppContext(),t=f.getAppCore().getSalt(),s=f.getAppCore().getPixelURL();return e&&s&&t},setThrottlingDelay:function(e){l=e},getThrottlingDelay:function(){return l},isThrottlingEnabled:function(){return i},setThrottlingEnabled:function(e){i=e},isLoadingTimeSent:function(){return t},setLoadingTimeSent:function(e){t=e},getLoadTimeOffset:function(){return s},setLoadTimeOffset:function(e){s=e},getInitTimestamp:function(){return D},setPauseOnBufferingInterval:function(e){c=e},getPauseOnBufferingInterval:function(){return c},isPauseOnBufferingEnabled:function(){return n},setPauseOnBufferingEnabled:function(e){n=e},startPausedOnBufferingTimer:function(e,n){w.stopPausedOnBufferingTimer(),a=w.getPlatformAPI().setTimeout(function(){var e={},t=ge.fixEventTime(e),s=parseInt(n.ns_st_po);e.ns_st_po=s+"",w.newEvent(M.PAUSE_ON_BUFFERING,t,e)},c)},stopPausedOnBufferingTimer:function(){null!=a&&(w.getPlatformAPI().clearTimeout(a),a=null)},stopDelayedTransitionTimer:function(){h&&(w.getPlatformAPI().clearTimeout(h),h=null)},setLiveEndpointURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,s=e.indexOf("?");if(0<=s){if(s<e.length-1){for(var n=e.substring(s+1).split("&"),a=0,i=n.length;a<i;a++){var o=n[a].split("=");2==o.length?w.setLabel(o[0],t(o[1])):1==o.length&&w.setLabel(X.PAGE_NAME_LABEL,t(o[0]))}e=e.substring(0,s+1)}}else e+="?";return r=e},getLiveEndpointURL:function(){return r||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?r=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?r=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},getStaSM:function(){return f},resetPlaybackSession:function(e){var t=f.getPlaybackSession();f.setPlaybackSession(new P(f)),P.resetPlaybackSession(f,t,e)},resetHeartbeat:function(){f.getHeartbeat().pause();var e=f.getHeartbeat().getIntervals();f.setHeartbeat(new V(f)),f.getHeartbeat().setIntervals(e)}}),G=ge.isBrowser()?(F=window,document):(F={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""}),ge.extend(w,{prepareUrl:function(e,t){for(var s=F.encodeURIComponent||escape,n=[],a=X.LABELS_ORDER,i=e.split("?"),o=i[0],r=i[1].split("&"),g=0,c=r.length;g<c;g++){var l=r[g].split("="),u=unescape(l[0]),l=unescape(l[1]);u&&(t[u]=l)}for(var S,_={},P=0,b=a.length;P<b;P++){var f,p=a[P];!t.hasOwnProperty(p)||void 0!==(f=t[p])&&null!=f&&(_[p]=!0,n.push(s(p)+"="+s(t[p])))}for(S in t)if(t.hasOwnProperty(S)){if(_[S])continue;var y=t[S];void 0!==y&&null!=y&&n.push(s(S)+"="+s(t[S]))}return e=(e=o+"?"+n.join("&"))+(e.indexOf("&c8=")<0?"&c8="+s(G.title):"")+(e.indexOf("&c7=")<0?"&c7="+s(G.URL):"")+(e.indexOf("&c9=")<0?"&c9="+s(G.referrer):""),i=ge.browserAcceptsLargeURLs()?X.URL_LENGTH_LIMIT:X.RESTRICTED_URL_LENGTH_LIMIT,e.length>i&&0<e.indexOf("&")&&(o=e.substr(0,i-8).lastIndexOf("&"),e=(e.substring(0,o)+"&ns_cut="+s(e.substring(o+1))).substr(0,i)),e}}),f=new re(w),ge.getNamespace().comScore?(g=ge.getNamespace().comScore.exports,f.setAppCore(g.c())):f.setAppCore(null),e.publisherId&&(w.setLabel("c2",e.publisherId),!(o=e.secure)&&f.getAppCore()?o=f.getAppCore().isSecure():!o&&ge.isBrowser()&&(o=ge.isWebSecure()),w.setLiveEndpointURL((o?"https://sb":"http://b")+".scorecardresearch.com/p?c1=2")),e.liveEndpointURL&&w.setLiveEndpointURL(e.liveEndpointURL),f.setKeepAlive(new H(f)),f.setHeartbeat(new V(f)),f.setEventManager(new x(f)),f.setStateMachine(new q),f.setLogging(new ce(X.LOG_NAMESPACE,e.debug)),f.setPlaybackSession(new P(f)),p=new Z(f),y=new ee(f),k=new se(f),A=new ne(f),d=new j(f),m=new z(f),E=new $(f),T=new J(f),L=new te(f),I=new ae(f),v=new ie(f),C=new oe(f),N=new W(f),t=!1,s=0,D=+new Date,i=!(n=!0),R=[],e.systemClockJumpDetection&&w.enableSystemClockJumpsDetection(parseInt(e.systemClockJumpDetectionInterval))},re=function(e){var t,s,n,a,i,o,r;ge.extend(this,{getAppCore:function(){return t},getStaCore:function(){return e},getEventManager:function(){return s},getStateMachine:function(){return n},getHeartbeat:function(){return a},getKeepAlive:function(){return i},getPlaybackSession:function(){return o},getLogging:function(){return r},setAppCore:function(e){t=e},setKeepAlive:function(e){i=e},setHeartbeat:function(e){a=e},setEventManager:function(e){s=e},setStateMachine:function(e){n=e},setPlaybackSession:function(e){o=e},setLogging:function(e){r=e}})},a=function(e){function n(e,t,s){var n;n="object"==typeof t?t:"object"==typeof s?s:{},t="number"==typeof t?t:"number"==typeof s?s:NaN,M.toString(e)&&(n=ge.jsonObjectToStringDictionary(n),s=ge.fixEventTime(n),n.ns_st_po||isNaN(t)||(n.ns_st_po=ge.parseInteger(t,0)+""),e==M.PLAY||e==M.PAUSE||e==M.BUFFER||e==M.END||e==M.SEEK_START||e==M.AD_SKIP||e==M.BUFFER_STOP?a.newEvent(e,s,n):a.newPseudoEvent(e,s,n))}function t(){i&&a.getStaSM().getStateMachine().getCurrentState()!=Y.IDLE&&s.notifyEnd()}var a,s=this,i=!0;ge.extend(this,{isProperlyInitialized:function(){return a.isProperlyInitialized()},reset:function(e){n(M.END);var t=a;t.getStaSM().getKeepAlive().stop(),t.getStaSM().getHeartbeat().pause(),a=new o(t.getConfiguration()),P.resetPlaybackSession(a.getStaSM(),t.getStaSM().getPlaybackSession(),e)},setPauseOnBufferingInterval:function(e){a.setPauseOnBufferingInterval(e)},getPauseOnBufferingInterval:function(){return a.getPauseOnBufferingInterval()},setKeepAliveInterval:function(e){a.getStaSM().getKeepAlive().setInterval(e)},getKeepAliveInterval:function(){return a.getStaSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(e){a.getStaSM().getHeartbeat().setIntervals(e)},notifyPlay:function(e,t){a.getStaSM().getLogging().apiCall("notifyPlay",e,t),n(M.PLAY,e,t)},notifyPause:function(e,t){a.getStaSM().getLogging().apiCall("notifyPause",e,t),n(M.PAUSE,e,t)},notifyEnd:function(e,t){a.getStaSM().getLogging().apiCall("notifyEnd",e,t),n(M.END,e,t)},notifyBufferStart:function(e,t){a.getStaSM().getLogging().apiCall("notifyBufferStart",e,t),n(M.BUFFER,e,t)},notifyBufferStop:function(e,t){a.getStaSM().getLogging().apiCall("notifyBufferStop",e,t),n(M.BUFFER_STOP,e,t)},notifyLoad:function(e,t){a.getStaSM().getLogging().apiCall("notifyLoad",e,t),n(M.LOAD,e,t)},notifyEngage:function(e,t){a.getStaSM().getLogging().apiCall("notifyEngage",e,t),n(M.ENGAGE,e,t)},notifySeekStart:function(e,t){a.getStaSM().getLogging().apiCall("notifySeekStart",e,t),n(M.SEEK_START,e,t)},notifySkipAd:function(e,t){a.getStaSM().getLogging().apiCall("notifySkipAd",e,t),n(M.AD_SKIP,e,t)},notifyCallToAction:function(e,t){a.getStaSM().getLogging().apiCall("notifyCallToAction",e,t),n(M.CTA,e,t)},notifyError:function(e,t){a.getStaSM().getLogging().apiCall("notifyError",e,t),n(M.ERROR,e,t)},notifyTransferPlayback:function(e,t){a.getStaSM().getLogging().apiCall("notifyTransferPlayback",e,t),n(M.TRANSFER,e,t)},notifyDrmFail:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmFail",e,t),n(M.DRM_FAILED,e,t)},notifyDrmApprove:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmApprove",e,t),n(M.DRM_APPROVED,e,t)},notifyDrmDeny:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmDeny",e,t),n(M.DRM_DENIED,e,t)},notifyChangeBitrate:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeBitrate",e,t,s),null!=e&&((s=s||{}).ns_st_br=e+"",n(M.BIT_RATE,s,t))},notifyChangePlaybackRate:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangePlaybackRate",e,t,s),null!=e&&((s=s||{}).ns_st_rt=e+"",n(M.PLAYBACK_RATE,s,t))},notifyChangeVolume:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeVolume",e,t,s),null!=e&&((s=s||{}).ns_st_vo=e+"",n(M.VOLUME,s,t))},notifyChangeWindowState:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeWindowState",e,t,s),null!=e&&((s=s||{}).ns_st_ws=e+"",n(M.WINDOW_STATE,s,t))},notifyChangeAudioTrack:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeAudioTrack",e,t,s),null!=e&&((s=s||{}).ns_st_at=e+"",n(M.AUDIO,s,t))},notifyChangeVideoTrack:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeVideoTrack",e,t,s),null!=e&&((s=s||{}).ns_st_vt=e+"",n(M.VIDEO,s,t))},notifyChangeSubtitleTrack:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeSubtitleTrack",e,t,s),null!=e&&((s=s||{}).ns_st_tt=e+"",n(M.SUBS,s,t))},notifyChangeCdn:function(e,t,s){a.getStaSM().getLogging().apiCall("notifyChangeCdn",e,t,s),null!=e&&((s=s||{}).ns_st_cdn=e+"",n(M.CDN,s,t))},notifyCustomEvent:function(e,t){a.getStaSM().getLogging().apiCall("notifyCustomEvent",e,t),n(M.CUSTOM,e,t)},getLabels:function(){return a.getLabels()},getState:function(){return a.getStaSM().getStateMachine().getCurrentState()},setLabels:function(e){a.setLabels(e)},getLabel:function(e){return a.getLabel(e)},setLabel:function(e,t){a.setLabel(e,t)},getLoadTimeOffset:function(){return a.getLoadTimeOffset()},setLoadTimeOffset:function(e){a.setLoadTimeOffset(e)},setLiveEndpointURL:function(e){return a.setLiveEndpointURL(e)},getLiveEndpointURL:function(){return a.getLiveEndpointURL()},isPauseOnBufferingEnabled:function(){return a.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(e){a.setPauseOnBufferingEnabled(e)},isThrottlingEnabled:function(){return a.isThrottlingEnabled()},setThrottlingEnabled:function(e){a.setThrottlingEnabled(e)},setThrottlingDelay:function(e){a.setThrottlingDelay(e)},getThrottlingDelay:function(){return a.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(e){a.getStaSM().getPlaybackSession().getAsset().setPlaybackIntervalMergeTolerance(e)},getPlaybackIntervalMergeTolerance:function(){return a.getStaSM().getPlaybackSession().getAsset().getPlaybackIntervalMergeTolerance()},createPlaybackSession:function(e){a.getStaSM().getLogging().apiCall("createPlaybackSession",e),e=ge.jsonObjectToStringDictionary(e);var t=a.getStaSM().getStateMachine().getCurrentState();t!=Y.IDLE&&(a.getStaSM().getLogging().infoLog("Ending the current Clip. It was in state:",ge.stateToString(t)),s.notifyEnd()),a.getStaSM().getPlaybackSession().isPlaybackSessionStarted()&&a.resetPlaybackSession(),a.getStaSM().getPlaybackSession().setLabels(e)},getVersion:function(){return X.STREAMINGANALYTICS_VERSION},addListener:function(e){a.addListener(e)},removeListener:function(e){a.removeListener(e)},addMeasurementListener:function(e){a.getStaSM().getEventManager().addMeasurementListener(e)},removeMeasurementListener:function(e){a.getStaSM().getEventManager().removeMeasurementListener(e)},getPlaybackSession:function(){return a.getStaSM().getPlaybackSession()},setExitEndEventEnabled:function(e){i=e},isExitEndEventEnabled:function(){return i},getPlatformAPI:function(){return a.getPlatformAPI()},_getLogHistory:function(){return a.getStaSM().getLogging().getLogHistory()}}),ge.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",t),window.addEventListener("unload",t)):window.attachEvent&&(window.attachEvent("onbeforeunload",t),window.attachEvent("onunload",t))),e=ge.extend({},e),(a=new o(e)).getStaSM().getLogging().log("New StreamingAnalytics instance with configuration",e)};function e(r){var n,s,t,a,i,o,g,c,l,u,S,_,P,b,f,p,y=this;ge.extend(this,{resetAsset:function(){var e=n;n=new k,k.resetAsset(e,n)},hashExists:function(e){return null!=c[e]},storeHash:function(e){c[e]={}},removeHash:function(e){delete c[e]},storeAssetPlaybackCounters:function(){for(var e in c)if(c.hasOwnProperty(e)&&c[e].clipNumber===n.getClipNumber()){ge.extend(c[e],{segmentPlaybackCounter:n.getSegmentPlaybackCounter(),assetLoadCounter:n.getAssetLoadCounter(),assetPlaybackCounter:n.getAssetPlaybackCounter(),lowestPartNumberPlayed:n.getLowestPartNumberPlayed(),seeking:n.isSeeking(),seekingTimeBeforeEnd:n.getSeekingTimeBeforeEnd(),seekingStartPosition:n.getSeekStartPosition(),segmentPlaybackIntervals:n.getSegmentPlaybackIntervals(),videoTrack:n.getVideoTrack(),audioTrack:n.getAudioTrack(),subtitleTrack:n.getSubtitleTrack(),cdn:n.getCDN(),playSequenceCounter:n.getPlaySequenceCounter(),previousUniquePlaybackInterval:n.getPreviousUniquePlaybackInterval(),previousEventIndependentUniquePlaybackInterval:n.getPreviousEventIndependentUniquePlaybackInterval(),previousLongestPlaybackInterval:n.getPreviousLongestPlaybackInterval()});break}},getStoredAssetRegisters:function(e){return c[e]},getClipNumber:function(e){return c[e].clipNumber},getMaxClipNumber:function(){return l},storeClipNumber:function(e,t){c[e].clipNumber=t,l<t&&(l=t)},setLabels:function(e){null!=e&&ge.extend(o,e)},getLabels:function(){return o},setLabel:function(e,t){var s={};s[e]=t,y.setLabels(s)},getLabel:function(e){return o[e]},getAsset:function(){return n},addInternalErrorFlag:function(e){for(var t=0;t<p.length;++t)if(p[t]==e)return;p.push(e)},createLabels:function(e,t){var s=e||{},e=ge.isEmpty(s.ns_st_pa)?y.getPlaybackTime():parseInt(s.ns_st_pa);return s.ns_st_pa=e+(isNaN(a)?0:t-a)+"",s.ns_st_pp=P+"",s.ns_st_sp=b+"",s.ns_st_bp=f+"",u||(s.ns_st_pb=null!=s.ns_st_pb?s.ns_st_pb:"1"),n.isPlaybackStarted()&&(s.ns_st_ppc=S+"",s.ns_st_psq=_+""),0<p.length&&(s.ns_st_ie=(s.ns_st_ie?s.ns_st_ie+";":"")+p.join(";")),ge.extend(s,i,o),r.getPlaybackSession().getAsset().createLabels(s,t),s},incrementPlayCounter:function(){b++},incrementPauses:function(){P++},addPlaybackTime:function(e){var t;isNaN(a)||(t=y.getPlaybackTime(),t+=e-a,y.setPlaybackTime(t),a=NaN)},addBufferingTime:function(e){var t;isNaN(s)||(t=y.getBufferingTime(),t+=e-s,y.setBufferingTime(t),s=NaN)},getBufferingTime:function(){return f},setBufferingTime:function(e){f=e},getPlaybackTime:function(){return t},setBufferingTimestamp:function(e){s=e},getBufferingTimestamp:function(){return s},setPlaybackTime:function(e){t=e},setPlaybackTimestamp:function(e){a=e},getPlaybackTimestamp:function(){return a},getPauses:function(){return P},setPauses:function(e){P=e},isPlaybackSessionStarted:function(){return g},setPlaybackSessionStarted:function(e){g=e},getPlaybackCounter:function(){return S},incrementPlaybackCounter:function(){S++},setFirstEventSent:function(e){u=e},setPlaySequenceCounter:function(e){_=e},incrementPlaySequenceCounter:function(){_++},getPlaybackSessionID:function(){return i.ns_st_id},setAsset:function(e,t){r.getLogging().apiCall("setAsset",e,t),e=ge.jsonObjectToStringDictionary(e);var s=r.getStateMachine().getCurrentState();s!=Y.IDLE&&(r.getLogging().infoLog("Ending the current Clip. It was in state:",ge.stateToString(s)),o={},r.getStaCore().newEvent(M.END,ge.fixEventTime(o),o));var n="",a=0;if(null!=e.ns_st_cn)n=e.ns_st_cn;else for(var i=0;i<X.STANDARD_METADATA_LABELS.length;i++)e[X.STANDARD_METADATA_LABELS[i]]&&(n+=X.STANDARD_METADATA_LABELS[i]+":"+e[X.STANDARD_METADATA_LABELS[i]]+";");var s=y,o=s.getAsset(),a=o.isAssetStarted()?(s.hashExists(o.getHash())||(s.storeHash(o.getHash()),s.storeClipNumber(o.getHash(),o.getClipNumber())),s.storeAssetPlaybackCounters(),s.hashExists(n)?s.getClipNumber(n):ge.exists(e.ns_st_cn)?parseInt(e.ns_st_cn):s.getMaxClipNumber()+1):s.hashExists(n)?s.getClipNumber(n):o.getClipNumber();s.resetAsset(),(o=s.getAsset()).setHash(n),o.setClipNumber(a),o.setLabels(e);a=s.getStoredAssetRegisters(n);a&&(o.setAssetStarted(!0),o.setSegmentPlaybackCounter(a.segmentPlaybackCounter),o.setAssetLoadCounter(a.assetLoadCounter),o.setAssetPlaybackCounter(a.assetPlaybackCounter),o.setLowestPartNumberPlayed(a.lowestPartNumberPlayed),o.setSeeking(a.seeking),o.setSeekingTimeBeforeEnd(a.seekingTimeBeforeEnd),o.setSeekStartPosition(a.seekingStartPosition),o.setAssetPlaybackIntervals(a.segmentPlaybackIntervals),a.videoTrack&&o.setVideoTrack(a.videoTrack),a.audioTrack&&o.setAudioTrack(a.audioTrack),a.subtitleTrack&&o.setSubtitleTrack(a.subtitleTrack),a.cdn&&o.setCDN(a.cdn),o.setPlaySequenceCounter(a.playSequenceCounter),o.setPreviousUniquePlaybackInterval(a.previousUniquePlaybackInterval),o.setPreviousEventIndependentUniquePlaybackInterval(a.previousEventIndependentUniquePlaybackInterval),o.setPreviousLongestPlaybackInterval(a.previousLongestPlaybackInterval)),o.incrementAssetLoadCounter(),o.isAssetStarted()&&t&&s.incrementPlayCounter(),t&&(s.setPlaySequenceCounter(0),o.setPlaybackSessionLooping(!0)),!ge.exists(e.ns_st_tp)&&ge.exists(e.ns_st_ad)&&ge.isNotEmpty(e.ns_st_ad)&&"0"!==e.ns_st_ad&&o.setInternalLabel("ns_st_tp","1")}}),n=new k,(i={}).ns_st_id=+new Date+"",o={},a=s=NaN,u=g=!(c={}),b=1,f=_=P=S=l=t=0,p=[]}function i(){var t,s,u,S,_,n,a,P,b,f,i,o,p,y,r,g,c,k,A,d,m,E,T,L,l,I,v,e,C,N,D,B,h,R,U,O,F,G,w,K,M,Y,x,V,H,q,W,j,J,z=this,$=X.INTERVAL_MERGE_TOLERANCE;ge.extend(this,{getHash:function(){return t},setHash:function(e){t=e},setPlaybackIntervalMergeTolerance:function(e){$=e},getPlaybackIntervalMergeTolerance:function(){return $},setInternalLabel:function(e,t){S[e]=t},getInternalLabel:function(e){return S[e]},hasInternalLabel:function(e){return null!=S[e]},setLabels:function(e){e&&ge.extend(_,e)},getLabels:function(){return _},setLabel:function(e,t){_[e]=t},getLabel:function(e){return _[e]},hasLabel:function(e){return e in _},getClipNumber:function(){return parseInt(z.getInternalLabel("ns_st_cn"))},setClipNumber:function(e){z.setInternalLabel("ns_st_cn",e+"")},getPartNumber:function(){return z.hasLabel("ns_st_pn")?parseInt(z.getLabel("ns_st_pn")):parseInt(z.getInternalLabel("ns_st_pn"))},createLabels:function(e,t){var s=e||{},e=ge.isEmpty(s.ns_st_pt)?z.getPlaybackTime():parseInt(s.ns_st_pt);s.ns_st_pt=e+(isNaN(P)?0:t-P)+"",s.ns_st_dpt=e+(isNaN(P)?0:t-P)-b+"",s.ns_st_ipt=e+(isNaN(P)?0:t-P)-f+"";e=ge.isEmpty(s.ns_st_et)?z.getElapsedTime():parseInt(s.ns_st_et);s.ns_st_et=e+(isNaN(p)?0:t-p)+"",s.ns_st_det=e+(isNaN(p)?0:t-p)-y+"";e=ge.isEmpty(s.ns_st_bt)?z.getBufferingTime():parseInt(s.ns_st_bt);s.ns_st_bt=e+"",s.ns_st_dbt=e+(isNaN(I)?0:t-I)-v+"";for(var n,t=parseInt(s.ns_st_po),a=ge.addNewPlaybackInterval(ge.cloneObject(z.getSegmentPlaybackIntervals()),J<0?t:k,J<0?k:t,$),i=ge.addNewPlaybackInterval(ge.cloneObject(z.getAssetPlaybackIntervals()),J<0?t:k,J<0?k:t,$),o=0,r=0,g=0;g<a.length;g++)o+=n=Math.abs(a[g].end-a[g].start),r<n&&(r=n);for(var c=0,l=0,g=0;g<i.length;g++)c+=n=Math.abs(i[g].end-i[g].start),l<n&&(l=n);s.ns_st_upc=o+"",s.ns_st_dupc=o-A+"",s.ns_st_iupc=o-d+"",s.ns_st_iupc=d<o?o-d+"":"0",s.ns_st_lpc=r+"",s.ns_st_dlpc=r-m+"",s.ns_st_upa=c+"",s.ns_st_dupa=c-E+"",s.ns_st_iupa=T<c?c-T+"":"0",s.ns_st_lpa=l+"",s.ns_st_dlpa=l-L+"";t=ge.isEmpty(s.ns_st_pc)?z.getPauses():parseInt(s.ns_st_pc);s.ns_st_pc=t+"",s.ns_st_dpc=t-K+"";t=ge.isEmpty(s.ns_st_skc)?z.getSeeks():parseInt(s.ns_st_skc);s.ns_st_skc=t+"",s.ns_st_dskc=t-Y+"";t=ge.isEmpty(s.ns_st_bc)?z.getBuffers():parseInt(s.ns_st_bc);s.ns_st_bc=t+"",s.ns_st_dbc=t-C+"";t=ge.isEmpty(s.ns_st_skt)?z.getSeekingTime():parseInt(s.ns_st_skt);s.ns_st_skt=t+"",s.ns_st_dskt=t-h+"";t=ge.isEmpty(s.ns_st_ska)?z.getSeekingAmount():parseInt(s.ns_st_ska);return s.ns_st_ska=t+"",s.ns_st_dska=t-F+"",u&&(s.ns_st_spc=x+"",s.ns_st_apc=V+"",s.ns_st_sq=H+"",s.ns_st_asq=q+""),s.ns_st_sc=u||0!=W?W+"":"1",s.ns_st_rt=J+"",ge.extend(s,S,_),s},updateDeltaLabels:function(e){b=parseInt(e.ns_st_pt),y=parseInt(e.ns_st_et),v=parseInt(e.ns_st_bt),A=parseInt(e.ns_st_upc),m=parseInt(e.ns_st_lpc),E=parseInt(e.ns_st_upa),L=parseInt(e.ns_st_lpa),K=parseInt(e.ns_st_pc),Y=parseInt(e.ns_st_skc),C=parseInt(e.ns_st_bc),h=parseInt(e.ns_st_skt),F=parseInt(e.ns_st_ska),z.setSeekingDirection(0)},updateIndependentLabels:function(e){f=parseInt(e.ns_st_pt),d=parseInt(e.ns_st_upc),T=parseInt(e.ns_st_upa)},getVideoTrack:function(){return z.getInternalLabel("ns_st_vt")},setVideoTrack:function(e){z.setInternalLabel("ns_st_vt",e+"")},getAudioTrack:function(){return z.getInternalLabel("ns_st_at")},setAudioTrack:function(e){z.setInternalLabel("ns_st_at",e+"")},getSubtitleTrack:function(){return z.getInternalLabel("ns_st_tt")},setSubtitleTrack:function(e){z.setInternalLabel("ns_st_tt",e+"")},getCDN:function(){return z.getInternalLabel("ns_st_cdn")},setCDN:function(e){z.setInternalLabel("ns_st_cdn",e+"")},getSegmentPlaybackIntervals:function(){return g},setAssetPlaybackIntervals:function(e){g=e},getAssetPlaybackIntervals:function(){return c},incrementPauses:function(){w++},incrementSeeks:function(){M++},incrementPlayCounter:function(){H++},getPlayCounter:function(){return H},getBufferingTime:function(){return l},setBufferingTime:function(e){l=e},addBufferingTime:function(e){var t;isNaN(I)||(t=z.getBufferingTime(),t+=e-I,z.setBufferingTime(t),I=NaN)},setPlaybackStartPosition:function(e){k=parseInt(e)},getPlaybackStartPosition:function(){return k},addInterval:function(e){isNaN(k)||isNaN(e)||(g=ge.addNewPlaybackInterval(g,J<0?e:k,J<0?k:e,$),c=ge.addNewPlaybackInterval(c,J<0?e:k,J<0?k:e,$),k=NaN)},getElapsedTime:function(){return o},setElapsedTime:function(e){o=e},addElapsedTime:function(e){var t;isNaN(p)||(t=z.getElapsedTime(),t+=e-p,z.setElapsedTime(t),p=NaN)},getElapsedTimestamp:function(){return p},setElapsedTimestamp:function(e){p=e},addPlaybackTime:function(e){var t;isNaN(P)||(t=z.getPlaybackTime(),t+=e-P,z.setPlaybackTime(t),P=NaN)},getPlaybackTime:function(){return a},getExpectedPlaybackPosition:function(e){return isNaN(P)?i:i+Math.floor((e-P)*J/100)},setPlaybackTimeOffset:function(e){i=e},getPlaybackTimeOffset:function(){return i},setPlaybackTime:function(e){a=e},getPlaybackTimestamp:function(){return P},setPlaybackTimestamp:function(e){P=e},setPreviousPlaybackTime:function(e){b=e},setPreviousPlaybackTimestamp:function(e){0},getBufferingTimestamp:function(){return I},setBufferingTimestamp:function(e){I=e},getPauses:function(){return w},setPauses:function(e){w=e},getSeeks:function(){return M},setSeeks:function(e){M=e},setSeeking:function(e){N=e},isSeeking:function(){return N},setCollectingSeekingTime:function(e){U=e},isCollectingSeekingTime:function(){return U},setAssetStarted:function(e){s=e},isAssetStarted:function(){return s},setPlaybackStarted:function(e){u=e},isPlaybackStarted:function(){return u},setSeekingTimestamp:function(e){D=e},getSeekingTimestamp:function(){return D},addSeekingTime:function(e){var t;isNaN(D)||(t=z.getSeekingTime(),t+=e-D,z.setSeekingTime(t),D=NaN)},getSeekingTime:function(){return B},setSeekingTime:function(e){B=e},setSeekingTimeBeforeEnd:function(e){G=e},getSeekingTimeBeforeEnd:function(){return G},setSeekStartPosition:function(e){R=e},getSeekStartPosition:function(){return R},setSeekingAmount:function(e){O=e},getSeekingAmount:function(){return O},addSeekingAmount:function(e){var t,s=z.getSeekingAmount();s+=Math.abs(e-R),z.setSeekingAmount(s),R==e?t=0:e<R?t=-1:R<e&&(t=1),z.setSeekingDirection(t),R=0},getSeekingDirection:function(){return parseInt(z.getInternalLabel("ns_st_skd"))},setSeekingDirection:function(e){z.setInternalLabel("ns_st_skd",e+"")},resetAssetLifecycleLabels:function(){c=[],Y=M=F=O=h=B=y=o=L=T=E=H=K=w=C=e=v=l=f=b=a=0},incrementSegmentPlaybackCounter:function(){x++},incrementAssetLoadCounter:function(){W++},incrementAssetPlaybackCounter:function(){V++},getPreviousUniquePlaybackInterval:function(){return A},setPreviousUniquePlaybackInterval:function(e){A=e},getPreviousEventIndependentUniquePlaybackInterval:function(){return d},setPreviousEventIndependentUniquePlaybackInterval:function(e){d=e},setPreviousLongestPlaybackInterval:function(e){m=e},getPreviousLongestPlaybackInterval:function(){return m},resetAssetPlaybackIntervals:function(){c=[],L=T=E=0},setSegmentPlaybackCounter:function(e){x=e},setAssetLoadCounter:function(e){W=e},setAssetPlaybackCounter:function(e){V=e},setLowestPartNumberPlayed:function(e){r=e},getSegmentPlaybackCounter:function(){return x},getAssetLoadCounter:function(){return W},getAssetPlaybackCounter:function(){return V},getLowestPartNumberPlayed:function(){return r},getBuffers:function(){return e},incrementBufferCount:function(){e++},getPreviousBufferingTime:function(){return v},setPlaySequenceCounter:function(e){q=e},incrementPlaySequenceCounter:function(){q++},getPlaySequenceCounter:function(){return q},isPlaybackSessionLooping:function(){return j},setPlaybackSessionLooping:function(e){j=e},enableAutoCalculatePositions:function(e){n=!!e},isAutoCalculatePositionsEnabled:function(){return n},getPlaybackRate:function(){return J},setPlaybackRate:function(e){J=e}}),S={ns_st_cl:"0",ns_st_pn:"1",ns_st_tp:"0",ns_st_cn:"1",ns_st_skd:"0",ns_st_ci:"0",c3:"*null",c4:"*null",c6:"*null",ns_st_st:"*null",ns_st_pu:"*null",ns_st_pr:"*null",ns_st_ep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ct:"*null"},s=u=!(_={}),t=Q.UNKNOWN_VALUE,n=!0,g=[],D=I=k=p=P=NaN,W=q=H=V=x=Y=M=K=w=F=O=h=B=G=R=C=e=v=l=L=T=E=m=d=A=f=y=r=o=b=i=a=0,j=U=N=!(c=[]),J=X.DEFAULT_ASSET_PLAYBACK_RATE}return a.PlayerEvents=M,a.InternalStates=Y,a.ImplementationType=_,a.Constants=X,a}(),e.ReducedRequirementsStreamingAnalytics=e.ReducedRequirementsStreamingAnalytics||(u={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},S={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},_=e.StreamingAnalytics,P=e.StreamingAnalytics.InternalStates||null,b=e.StreamingAnalytics.ImplementationType||null,f=null!=e.StreamingAnalytics.InternalStates&&null!=e.StreamingAnalytics.ImplementationType,p=e.StreamingAnalytics.Constants,n.ContentType=u,n.AdType=S,n),e;function n(e){function s(e){for(var t in p.STANDARD_METADATA_LABELS)if(p.STANDARD_METADATA_LABELS.hasOwnProperty(t)&&(s=p.STANDARD_METADATA_LABELS[t],n=i,t=e,!(ge.exists(s)&&ge.exists(n)&&ge.exists(t)&&(n.hasOwnProperty(s)&&t.hasOwnProperty(s)&&n[s]===t[s]||!n.hasOwnProperty(s)&&!t.hasOwnProperty(s)))))return;var s,n;return 1}function n(e){e=e||{};e.ns_st_ad="1",e.ns_st_an=++t+"",r.getPlaybackSession().setAsset(e),r.notifyPlay(),o=!1}function a(e,t){c==g.None&&(c=t),o&&c==t&&s(e)?(r.getPlaybackSession().getAsset().setLabels(e),r.getState()!=P.PLAYING&&r.notifyPlay()):(e=e,r.getPlaybackSession().setAsset(e),i=e,r.notifyPlay()),o=!0,c=t}var i=null,t=0,o=!1,r=null,g={None:0,AudioContent:1,VideoContent:2},c=g.None,l=new ce("TTSTA",(e||{}).debug);ge.extend(this,{playVideoAdvertisement:function(e,t){var s;r&&(l.apiCall("playVideoAdvertisement",e,t),s={ns_st_ct:"va"},t?s.ns_st_ct="va"+t:l.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),t!=S.LinearLive&&t!=S.BrandedOnDemandLive||(s.ns_st_li="1"),e&&ge.extend(s,e),n(s))},playAudioAdvertisement:function(e,t){var s;r&&(l.apiCall("playAudioAdvertisement",e,t),s={ns_st_ct:"aa"},t?s.ns_st_ct="aa"+t:l.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),t!=S.LinearLive&&t!=S.BrandedOnDemandLive||(s.ns_st_li="1"),e&&ge.extend(s,e),n(s))},playVideoContentPart:function(e,t){var s;r&&(l.apiCall("playVideoContentPart",e,t),s={ns_st_ct:"vc"},t?s.ns_st_ct="vc"+t:l.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),t!=u.Live&&t!=u.UserGeneratedLive||(s.ns_st_li="1"),e&&ge.extend(s,e),a(s,g.VideoContent))},playAudioContentPart:function(e,t){var s;r&&(l.apiCall("playAudioContentPart",e,t),s={ns_st_ct:"ac"},t?s.ns_st_ct="ac"+t:l.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),t!=u.Live&&t!=u.UserGeneratedLive||(s.ns_st_li="1"),e&&ge.extend(s,e),a(s,g.AudioContent))},stop:function(){r&&(l.apiCall("stop"),r.notifyPause())}}),f&&(ge.exists(e)&&(e.customerC2||e.publisherId)||ge.getNamespace().comScore?r=new _(e):l.error("Cannot instantiate StreamingAnalytics","The property publisherId was not provided (or incorrectly provided) in the StreamingAnalytics configuration."),r&&r.setLabel("ns_st_it",b.toString(b.REDUCED)))}});
