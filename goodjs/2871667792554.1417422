YUI.add("transition",function(h,t){function y(){this.init.apply(this,arguments)}var g,v,m,N,T,n="",e="",i=h.config.doc,o="documentElement",r=i[o].style,s="transition",a="transitionProperty",d={},u=["Webkit","Moz"];y._TRANSFORM="transform",y._toCamel=function(t){return t=t.replace(/-([a-z])/gi,function(t,n){return n.toUpperCase()})},y._toHyphen=function(t){return t=t.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(t,n,e,i){e=(n?"-"+n.toLowerCase():"")+e;return i&&(e+="-"+i.toLowerCase()),e})},y.SHOW_TRANSITION="fadeIn",y.HIDE_TRANSITION="fadeOut",y.useNative=!1,"transition"in r&&"transitionProperty"in r&&"transitionDuration"in r&&"transitionTimingFunction"in r&&"transitionDelay"in r?(y.useNative=!0,y.supported=!0):h.Array.each(u,function(t){t+"Transition"in i[o].style&&(n=t,e=y._toHyphen(t)+"-",y.useNative=!0,y.supported=!0,y._VENDOR_PREFIX=t)}),void 0===r.transform&&h.Array.each(u,function(t){t+="Transform";void 0!==r[t]&&(y._TRANSFORM=t)}),n&&(s=n+"Transition",a=n+"TransitionProperty"),g=e+"transition-property",v=e+"transition-duration",m=e+"transition-timing-function",N=e+"transition-delay",T="transitionend",n.toLowerCase(),T={Webkit:"webkitTransitionEnd"}[n]||T,y.fx={},y.toggles={},y._hasEnd={},y._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i,h.Node.DOM_EVENTS[T]=1,y.NAME="transition",y.DEFAULT_EASING="ease",y.DEFAULT_DURATION=.5,y.DEFAULT_DELAY=0,y._nodeAttrs={},y.prototype={constructor:y,init:function(t,n){var e=this;return e._node=t,!e._running&&n&&(e._config=n,(t._transition=e)._duration="duration"in n?n.duration:e.constructor.DEFAULT_DURATION,e._delay="delay"in n?n.delay:e.constructor.DEFAULT_DELAY,e._easing=n.easing||e.constructor.DEFAULT_EASING,e._count=0,e._running=!1),e},addProperty:function(t,n){var e,i,o=this,r=this._node,s=h.stamp(r),a=h.one(r),u=y._nodeAttrs[s],s=(u=u||(y._nodeAttrs[s]={}))[t];n&&void 0!==n.value?i=n.value:void 0!==n&&(i=n,n=d),"function"==typeof i&&(i=i.call(a,a)),s&&s.transition&&s.transition!==o&&s.transition._count--,o._count++,e=(void 0!==n.duration?n.duration:o._duration)||1e-4,u[t]={value:i,duration:e,delay:void 0!==n.delay?n.delay:o._delay,easing:n.easing||o._easing,transition:o},n=h.DOM.getComputedStyle(r,t),n="string"==typeof i?n:parseFloat(n),y.useNative&&n===i&&setTimeout(function(){o._onNativeEnd.call(r,{propertyName:t,elapsedTime:e})},1e3*e)},removeProperty:function(t){var n=y._nodeAttrs[h.stamp(this._node)];n&&n[t]&&(delete n[t],this._count--)},initAttrs:function(t){var n,e=this._node;for(n in t.transform&&!t[y._TRANSFORM]&&(t[y._TRANSFORM]=t.transform,delete t.transform),t)t.hasOwnProperty(n)&&!y._reKeywords.test(n)&&(this.addProperty(n,t[n]),""===e.style[n]&&h.DOM.setStyle(e,n,h.DOM.getComputedStyle(e,n)))},run:function(t){var n=this,e=n._node,i=n._config,o={type:"transition:start",config:i};return n._running||(n._running=!0,i.on&&i.on.start&&i.on.start.call(h.one(e),o),n.initAttrs(n._config),n._callback=t,n._start()),n},_start:function(){this._runNative()},_prepDur:function(t){return(t=1e3*parseFloat(t))+"ms"},_runNative:function(){var t,n,e,i=this,o=i._node,r=h.stamp(o),s=o.style,a=o.ownerDocument.defaultView.getComputedStyle(o),u=y._nodeAttrs[r],d="",l=a[y._toCamel(g)],_=g+": ",p=v+": ",f=m+": ",c=N+": ";for(e in"all"!==l&&(_+=l+",",p+=a[y._toCamel(v)]+",",f+=a[y._toCamel(m)]+",",c+=a[y._toCamel(N)]+","),u)t=y._toHyphen(e),u[e],(n=u[e])&&n.transition===i&&(e in o.style?(p+=i._prepDur(n.duration)+",",c+=i._prepDur(n.delay)+",",f+=n.easing+",",_+=t+",",d+=t+": "+n.value+"; "):this.removeProperty(e));_=_.replace(/,$/,";"),p=p.replace(/,$/,";"),f=f.replace(/,$/,";"),c=c.replace(/,$/,";"),y._hasEnd[r]||(o.addEventListener(T,i._onNativeEnd,""),y._hasEnd[r]=!0),s.cssText+=_+p+f+c+d},_end:function(t){var n=this,e=n._node,i=n._callback,o=n._config,r={type:"transition:end",config:o,elapsedTime:t},s=h.one(e);n._running=!1,n._callback=null,e&&(o.on&&o.on.end?setTimeout(function(){o.on.end.call(s,r),i&&i.call(s,r)},1):i&&setTimeout(function(){i.call(s,r)},1))},_endNative:function(t){var n=this._node,e=n.ownerDocument.defaultView.getComputedStyle(n,"")[y._toCamel(g)];t=y._toHyphen(t),"string"==typeof e&&(e=(e=e.replace(new RegExp("(?:^|,\\s)"+t+",?"),",")).replace(/^,|,$/,""),n.style[s]=e)},_onNativeEnd:function(t){var n=h.stamp(this),e=t,i=y._toCamel(e.propertyName),t=e.elapsedTime,e=y._nodeAttrs[n][i],n=e?e.transition:null;n&&(n.removeProperty(i),n._endNative(i),i={type:"propertyEnd",propertyName:i,elapsedTime:t,config:e=n._config[i]},e&&e.on&&e.on.end&&e.on.end.call(h.one(this),i),n._count<=0&&(n._end(t),this.style[a]=""))},destroy:function(){var t=this._node;t&&(t.removeEventListener(T,this._onNativeEnd,!1),this._node=null)}},h.Transition=y,h.TransitionNative=y,h.Node.prototype.transition=function(t,n,e){var i,o,r=y._nodeAttrs[h.stamp(this._node)],r=r&&r.transition||null;if("string"==typeof t)if("function"==typeof n&&(e=n,n=null),i=y.fx[t],n&&"boolean"!=typeof n)for(o in n=h.clone(n),i)i.hasOwnProperty(o)&&(o in n||(n[o]=i[o]));else n=i;else e=n,n=t;return r&&!r._running?r.init(this,n):r=new y(this._node,n),r.run(e),this},h.Node.prototype.show=function(t,n,e){return this._show(),t&&h.Transition&&("string"==typeof t||t.push||("function"==typeof n&&(e=n,n=t),t=y.SHOW_TRANSITION),this.transition(t,n,e)),this},h.NodeList.prototype.show=function(t,n,e){for(var i,o=this._nodes,r=0;i=o[r++];)h.one(i).show(t,n,e);return this};function l(t,n,e){return function(){n&&n.call(t),e&&"function"==typeof e&&e.apply(t._node,arguments)}}h.Node.prototype.hide=function(t,n,e){return t&&h.Transition?("function"==typeof n&&(e=n,n=null),e=l(this,this._hide,e),"string"==typeof t||t.push||("function"==typeof n&&(e=n,n=t),t=y.HIDE_TRANSITION),this.transition(t,n,e)):this._hide(),this},h.NodeList.prototype.hide=function(t,n,e){for(var i,o=this._nodes,r=0;i=o[r++];)h.one(i).hide(t,n,e);return this},h.NodeList.prototype.transition=function(t,n){for(var e,i=this._nodes,o=0;e=i[o++];)h.one(e).transition(t,n);return this},h.Node.prototype.toggleView=function(t,n,e){if(this._toggles=this._toggles||[],e=arguments[arguments.length-1],"string"==typeof t)return(n=(n=void 0===(n="function"==typeof n?void 0:n)&&t in this._toggles?!this._toggles[t]:n)?1:0)?this._show():e=l(this,this._hide,e),this._toggles[t]=n,this.transition(h.Transition.toggles[t][n],e),this;this._toggleView(n=t,e)},h.NodeList.prototype.toggleView=function(t,n,e){for(var i,o=this._nodes,r=0;i=o[r++];)(i=h.one(i)).toggleView.apply(i,arguments);return this},h.mix(y.fx,{fadeOut:{opacity:0,duration:.5,easing:"ease-out"},fadeIn:{opacity:1,duration:.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:.75,easing:"ease-out"},sizeIn:{height:function(t){return t.get("scrollHeight")+"px"},width:function(t){return t.get("scrollWidth")+"px"},duration:.5,easing:"ease-in",on:{start:function(){var t=this.getStyle("overflow");"hidden"!==t&&(this.setStyle("overflow","hidden"),this._transitionOverflow=t)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}}}),h.mix(y.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]})},"3.12.0",{requires:["node-style"]});
