(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(3),i=function(e){try{return JSON.parse(a.a.local.getRaw(e)||"[]").slice(0,250).map((function(e){return Number.parseInt(e,10)})).filter((function(e){return"number"==typeof e&&!Number.isNaN(e)})).map(String)}catch(e){return[]}},r=function(){return i("_papns")},o=function(){return i("_pdfps")},c=function(){a.a.local.remove("_papns"),a.a.local.remove("_pdfps")}},133:function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"t",(function(){return g})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return w})),n.d(t,"o",(function(){return O})),n.d(t,"n",(function(){return j})),n.d(t,"q",(function(){return S})),n.d(t,"p",(function(){return A})),n.d(t,"i",(function(){return k})),n.d(t,"s",(function(){return T})),n.d(t,"j",(function(){return E})),n.d(t,"r",(function(){return P})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return I})),n.d(t,"u",(function(){return _})),n.d(t,"v",(function(){return L})),n.d(t,"m",(function(){return D}));var a=n(37),i=n(96),r=n(1),o=n(8),c=n(20),u={},s=function(e,t){var n=u[t]||(u[t]=new RegExp("".concat(t,"$")));return e.replace(n,"")},d={},f=function(e,t){return Boolean(e.find((function(e){return e[0]===t[0]&&e[1]===t[1]})))},l=function(e){return Object.keys(e).reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),{})},g=function(e){return function(e,t){var n=d[t]||(d[t]=new RegExp("^".concat(t)));return e.replace(n,"")}(e,"dfp-ad--")},p=function(e){return f(e,[300,250])},m=function(e){return f(e,[728,90])},v=function(e){return p(e)||function(e){return f(e,[300,600])}(e)},b=function(e){return f(e,[320,50])},y=function(e){return m(e)||function(e){return f(e,[970,250])}(e)},h=function(e){return e.length>0?e.reduce((function(e,t){return e[0]>=t[0]&&e[1]>=t[1]?e:t})):null},w=function(){switch(Object(o.c)()){case"mobile":case"mobileMedium":case"mobileLandscape":return"M";case"phablet":case"tablet":return"T";case"desktop":case"leftCol":case"wide":return"D";default:return"M"}},O=function(){return Object(a.d)()},j=function(){return!Object(a.d)()},S=function(){return Object(a.d)()},A=function(){return Object(a.d)()},k=function(e){return p(e)},T=function(){return!Object(a.d)()&&!Object(a.a)()&&r.a.get("switches.prebidOzone")},E=function(){return Object(a.a)()||r.a.get("switches.prebidAppnexusUkRow")&&!Object(a.d)()||!!Object(c.e)().and},P=function(){return Object(a.c)()},C=function(){return Object(a.c)()||Object(a.b)()},I=Object(i.a)((function(){return-1!==window.location.hash.indexOf("#mobile-sticky")||r.a.get("switches.mobileStickyLeaderboard")&&Object(o.l)({min:"mobile",max:"mobileLandscape"})&&(Object(a.d)()||Object(a.a)())&&"Article"===r.a.get("page.contentType")&&!r.a.get("page.isHosted")})),_=function(e){return s(s(e,"--mobile"),"Mobile")},L=function(e){return s(e,"([2-9]|\\d{2,})")},D=-1!==window.location.hash.indexOf("#only-a9")},137:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var a=n(70),i=function(e){Object.keys(e).forEach((function(t){a.a.set("".concat("accessibility",".").concat(t),e[t])}))},r=function(e){return!0===function(e){return!1!==a.a.get("".concat("accessibility",".").concat(e))}(e)}},141:function(e,t,n){"use strict";n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return k}));var a,i,r=n(28),o=n.n(r),c=n(35),u=n(3),s=n(212),d=n(96),f=n(144),l=n(1),g=n(0),p=n(8),m=n(120),v=n(157),b=n(20),y=n(133),h=n(145),w=n(17),O=n(95),j=n(103),S=n(158),A={},k=Object(d.a)((function(e){return Object(y.h)({sens:e.sens,pt1:e.url,pt2:e.edition,pt3:e.ct,pt4:e.p,pt5:e.k,pt6:e.su,pt7:e.bp,pt8:e.x,pt9:[e.gdncrm,e.pv,e.co,e.tn,e.slot].join("|"),permutive:e.permutive})})),T=Object(d.a)((function(e){return t=k(e),n=Object.keys(t).map((function(e){var n=t[e];return Array.isArray(n)?n.map((function(t){return"".concat(e,"=").concat(t)})):"".concat(e,"=").concat(n)})),Array.prototype.concat.apply([],n).join(",");var t,n})),E=function(){a=c.a.hasInitialised();var e,t=(e=i).ccpa?!e.ccpa.doNotSell:e.tcfv2?!!e.tcfv2.consents&&Object.keys(e.tcfv2.consents).length>0&&Object.values(e.tcfv2.consents).every(Boolean):!!e.aus&&e.aus.personalisedAdvertising,n=i.ccpa?i.ccpa.doNotSell:null,r=i.tcfv2?i.tcfv2.eventStatus:"na",d=l.a.get("page");!1===t&&Object(j.a)();var y,A,k,E,P,C,I={pa:t?"t":"f"},_=O.a.adFree?{af:"t"}:{},L=function(e){var t={};for(var n in e){var a=e[n];a&&(Array.isArray(a)&&0===a.length||(t[n]=a))}return t}(Object.assign({sens:d.isSensitive?"t":"f",permutive:Object(j.c)(),pv:l.a.get("ophan.pageViewId"),bp:function(){switch(Object(p.c)(!0)){case"mobile":case"mobileMedium":case"mobileLandscape":return"mobile";case"phablet":case"tablet":return"tablet";case"desktop":case"leftCol":case"wide":return"desktop";default:return"mobile"}}(),at:Object(g.d)("adtest")||void 0,si:Object(w.j)()?"t":"f",gdncrm:Object(S.a)(t),ab:function(){var e=Object(h.a)(),t=[],n=function(e,n){if("string"==typeof n&&"notintest"!==n){var a="".concat(e,"-").concat(n);t.push(a.substring(0,40))}};Object.keys(e).forEach((function(t){var a=e[t];n(t,a.variant)}));var a=l.a.get("tests");return a&&Object.entries(a).forEach((function(e){var t=o()(e,2),a=t[0],i=t[1];n(a,i)})),t}(),ref:([{id:"facebook",match:"facebook.com"},{id:"twitter",match:"t.co/"},{id:"reddit",match:"reddit.com"},{id:"google",match:"www.google"}].filter((function(e){return Object(p.d)().indexOf(e.match)>-1}))[0]||{}).id,ms:(P=d.source,P?(C=P,C.replace(/[+\s]+/g,"-").toLowerCase()).replace(/&/g,"and").replace(/'/g,""):null),fr:(E=parseInt(u.a.local.getRaw("gu.alreadyVisited"),10)||0,E<=5?E.toString():E>=6&&E<=9?"6-9":E>=10&&E<=15?"10-15":E>=16&&E<=19?"16-19":E>=20&&E<=29?"20-29":E>=30?"30plus":E.toString()),vl:d.videoDuration?(30*Math.ceil(d.videoDuration/30)).toString():void 0,cc:Object(m.b)(),s:d.section,rp:l.a.get("isDotcomRendering",!1)?"dotcom-rendering":"dotcom-platform",dcre:l.a.get("isDotcomRendering",!1)||l.a.get("page.dcrCouldRender",!1)?"t":"f",inskin:c.a.hasInitialised()?c.a.willShowPrivacyMessageSync()?"f":"t":"f",skinsize:(k=Object(p.f)(),k&&k.width>=1560?"l":"s"),urlkw:function(e){if(e){var t=e.split("/");return(t.pop()||t.pop()).split("-")}return[]}(d.pageId),rdp:function(e){return null===e?"na":e?"t":"f"}(n),consent_tcfv2:(A=t,Object(v.a)().tcfv2&&null!==A?A?"t":"f":"na"),cmp_interaction:r||"na",amtgrp:u.a.local.getRaw("gu.adManagerGroup")||(y=String(Math.floor(12*Math.random())+1),u.a.local.setRaw("gu.adManagerGroup",y),y)},d.sharedAdTargeting,I,_,Object(f.a)(Object(b.d)(),["0p19G"])));return d.appNexusPageTargeting=T(L),d.pageAdTargeting=L,Object(s.a)("commercial","pageTargeting object:",L),L},P=function(){return 0!==Object.keys(A).length?(a!==c.a.hasInitialised()&&(A=E()),A):(Object(c.c)((function(e){i=e,A=E()})),A)}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return E}));var a=n(13),i=n(9),r=n(18),o=n(156),c=n(94),u=n(45),s=n(26),d=n(1),f=n(8),l=n(39),g=n(137),p=n(20),m={},v=[];document.addEventListener("focusout",(function(){v.forEach((function(e){a.a.measure((function(){if(document.activeElement===e)return Object(s.a)(".vjs-big-play-button",e.parentElement)})).then((function(e){a.a.mutate((function(){e&&e.addClass("youtube-play-btn-focussed")}))}))}))})),document.addEventListener("focusin",(function(){a.a.measure((function(){return Object(s.a)(".vjs-big-play-button")})).then((function(e){a.a.mutate((function(){e&&e.removeClass("youtube-play-btn-focussed")}))}))}));var b=function(e){m[e]&&m[e].progressTracker&&clearInterval(m[e].progressTracker)},y=function(e,t){var n=t.atomId,a=t.iframe,i=t.overlay,r=t.endSlate,o=t.paused;b(e),function(e){m[e].progressTracker=setInterval(function(e){var t=m[e];if(t){var n=t.pendingTrackingCalls,a=t.youtubePlayer,i=t.duration,r=t.atomId;if(n.length){var o=a.getCurrentTime();if(i){var u=Math.round(o/i*100);n.length&&u>=n[0]&&(Object(c.b)(n[0].toString(),r),n.shift())}}}}.bind(null,e),1e3),m[e].progressTracker}(e),t.playing=!0,o?t.paused=!1:Object(c.b)("play",n);var u=a.closest(".immersive-main-media");if(u&&u.classList.add("atom-playing"),i&&r&&!r.rendered){var s=i.parentElement;s&&r.fetch(s,"html")}},h=function(e){var t=e.split("?");return 1===t.length?"":Object(p.d)(t[1]).v||""},w={ENDED:function(e){var t=m[e];t.playing=!1,b(e),Object(c.b)("end",t.atomId),t.pendingTrackingCalls=[25,50,75];var n=t.iframe&&t.iframe.closest(".immersive-main-media")||null;n&&n.classList.remove("atom-playing")},PLAYING:function(e){var t=m[e];if(t){var n=m[e],a=n.youtubePlayer,o=n.youtubeId,u=h(a.getVideoUrl());u!==o?Object(i.a)("/atom/youtube/".concat(u,".json")).then((function(n){var i=n.atomId;i&&(t.atomId=i,t.youtubeId=u,t.duration=a.getDuration(),Object(c.a)(i),y(e,t))})).catch((function(e){Object(r.a)(Error("Failed to get atom ID for youtube ID ".concat(u,". ").concat(e)),{feature:"youtube"},!1)})):y(e,t)}},PAUSED:function(e){var t=m[e];t.playing=!1,t.paused=!0,b(e)}},O=function(e){return{isAutoplayBlockingPlatform:Object(f.n)()||Object(f.k)(),isInternalReferrer:d.a.get("page.isDev")?0===document.referrer.indexOf(window.location.origin):0===document.referrer.indexOf(d.a.get("page.host")),isMainVideo:e&&!!e.closest('figure[data-component="main video"]')||!1,flashingElementsAllowed:Object(g.a)("flashing-elements"),isVideoArticle:"video"===d.a.get("page.contentType","").toLowerCase(),isFront:d.a.get("page.isFront",!1),isUSContent:"us"===d.a.get("page.productionOffice","").toLowerCase(),isPaidContent:d.a.get("page.isPaidContent")}},j=function(){var e=document.querySelector(".immersive-main-media__media .youtube-media-atom"),t=e?e.offsetHeight:0,n=document.querySelector(".immersive-main-media__headline-container"),a=t-(n?n.offsetHeight:0),i=document.querySelector(".youtube-media-atom__immersive-interface");i&&(i.style.top="".concat(a,"px"))},S=function(e,t,n,a,i){var r=document.getElementById(n);if(r){v.push(r);var o=i.target,c=h(o.getVideoUrl()),s=o.getDuration();m[t]={iframe:r,atomId:e,youtubeId:c,duration:s,youtubePlayer:o,paused:!1,playing:!1,pendingTrackingCalls:[25,50,75]};var g=function(e){var t=e.isAutoplayBlockingPlatform,n=e.isInternalReferrer,a=e.isMainVideo,i=e.flashingElementsAllowed,r=e.isVideoArticle,o=e.isFront,c=e.isUSContent,u=e.isPaidContent,s=c&&u&&(r&&a||o)&&i;return s?{autoplay:s,mutedOnStart:s&&Object(f.k)()}:{autoplay:(r&&n&&a||o)&&!t&&i,mutedOnStart:!1}}(O(r));if(g.mutedOnStart&&function(e){var t=new URL(e.src);t.searchParams.set("mute","1"),e.setAttribute("src",t.toString())}(r),g.autoplay&&i.target.playVideo(),a&&(m[t].overlay=a,d.a.get("page.section")&&Object(f.l)({min:"desktop"}))){var p=function(e){var t=e.parentNode;if(t instanceof HTMLElement){var n=(t.dataset||{}).endSlate;if(n){var a=new u.a;return a.endpoint=n,a}}}(a);p&&(m[t].endSlate=p)}r.closest(".immersive-main-media__media")&&(j(),window.addEventListener("resize",Object(l.a)(j.bind(null),200)))}},A=function(e){a.a.measure((function(){if(e){var t=e.querySelector(".youtube-media-atom__iframe");if(t){var n=t.id,a=e.getAttribute("data-media-atom-id")||"",i=function(e){return"".concat(e,"/").concat(Math.random().toString(36).substr(2,9))}(a);e.setAttribute("data-unique-atom-id",i);var r=e.querySelector(".youtube-media-atom__overlay"),u=e.getAttribute("data-channel-id")||"";Object(c.a)(a),Object(o.a)(t,{onPlayerReady:function(e){S(a,i,n,r,e)},onPlayerStateChange:function(e){!function(e,t){var n=t.data,a=Object.keys(w).find((function(e){return n===window.YT.PlayerState[e]}));a&&(w[a](e),function(e){if(e){var t=new Event("videoPlaying");document.dispatchEvent(t)}else{var n=new Event("videoEnded");document.dispatchEvent(n)}}(Object.keys(m).map((function(e){return m[e]})).filter((function(e){return e.playing})).length>0))}(i,e)}},t.dataset.assetId,u)}}}))},k=function(e){e&&a.a.measure((function(){Object(s.a)(".youtube-media-atom:not(.no-player)",e).each((function(e){var t=e.querySelector(".youtube-media-atom__overlay");d.a.get("page.isFront")?t.addEventListener("click",(function(){A(e)})):A(e)}))}))},T=function(e){e&&e.length?e.forEach(k):k(document.body)},E=function(e){var t=m[e];t&&t.youtubePlayer.pauseVideo()}},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(24),i=n.n(a),r=n(1),o=n(211),c=n(20),u=n(35),s=n(141),d=n(95),f=n(26),l=n(46),g=n(103),p=new Promise((function(e){window.YT&&window.YT.Player?e():window.onYouTubeIframeAPIReady=e})),m=function(e){e&&e.classList.add("youtube__video-started")},v=null,b=null,y={};Object(u.c)((function(e){e.ccpa?b=e.doNotSell:e.aus?b=!e.aus.personalisedAdvertising:(y=e.tcfv2,v=!!y&&Object.values(y.consents).every(Boolean))}));var h=function(e,t,n){if(e)return{disableAds:!0};var a=Object(s.c)();a.permutive=Object(g.b)();var i={adTagParameters:{iu:r.a.get("page.adUnit"),cust_params:encodeURIComponent(Object(c.b)(a)),cmpGdpr:y.gdprApplies?1:0,cmpVcd:y.tcString,cmpGvcd:y.addtlConsent}};return null===n?i.nonPersonalizedAd=!t:i.restrictedDataProcessor=n,i},w=function(e){return document.getElementById("youtube-".concat(e))},O=function(e,t,n,a){return Object(o.a)("https://www.youtube.com/iframe_api",{}),p.then((function(){var a=r.a.get("googleAnalytics.trackers.editorial");return function(e,t,n,a,i,r,o,c){var u=h(d.a.adFree,v,b);return new window.YT.Player(e.id,{host:d.a.adFree||!e.classList.contains("youtube-media-atom__iframe")?"https://www.youtube-nocookie.com":"https://www.youtube.com",videoId:t,width:"100%",height:"100%",events:{onReady:a,onStateChange:i,onError:function(e){console.error("YOUTUBE: ".concat(e.data)),console.dir(e)},onAdStart:o,onAdEnd:c},embedConfig:{relatedChannels:[],adsConfig:u}})}(e,n,0,(function(e){var a=w(n);(function(e){return e.target.getCurrentTime()>0})(e)&&m(a),function(e,t,n){i.a.mutate((function(){if(n){n.classList.add("youtube__video-ready");var e=f.a.ancestor(n,"fc-item");e&&Object(f.a)(e)[0].classList.add("fc-item--has-video-main-media__ready")}})),t&&"function"==typeof t.onPlayerReady&&t.onPlayerReady(e)}(e,t,a)}),(function(e){!function(e,t,n){if(n&&r.a.get("page.isDev")){var a=window.YT.PlayerState,o=Object.keys(a).find((function(t){return a[t]===e.data}));o&&console.log("Player ".concat(n.id," is ").concat(o))}i.a.mutate((function(){["ENDED","PLAYING","PAUSED","BUFFERING","CUED"].forEach((function(t){if(n){n.classList.toggle("youtube__video-".concat(t.toLocaleLowerCase()),e.data===window.YT.PlayerState[t]);var a=f.a.ancestor(n,"fc-item");a&&Object(f.a)(a)[0].classList.toggle("fc-item--has-video-main-media__".concat(t.toLocaleLowerCase()),e.data===window.YT.PlayerState[t]),m(n)}}))})),t&&"function"==typeof t.onPlayerStateChange&&t.onPlayerStateChange(e)}(e,t,w(n))}),0,(function(){window.ga("".concat(a,".send"),"event",Object(l.b)("adStart",n))}),(function(){window.ga("".concat(a,".send"),"event",Object(l.b)("adEnd",n))}))}))}},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n(12),i=n.n(a),r=function(e,t,n,a,i,r){var o=a,c={eventCategory:"media",eventAction:i(e),eventLabel:n,dimension19:r,dimension20:o},u=t[e.eventType];return u&&(c[u]=1),c},o=function(e){var t="".concat(e.mediaType," ");return e.isPreroll?t+="preroll":t+="content",t},c=function(e,t){var n="adStart"===e?24:25;return i()({eventCategory:"media",eventAction:"video preroll",eventLabel:t,dimension19:t,dimension20:"gu-video-youtube"},"metric".concat(n),1)}},94:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return s}));var a=n(11),i=n(1),r=n(29),o=n.n(r),c=n(46),u=function(e,t){return"".concat(e,":").concat(t)},s=function(e){var t=i.a.get("googleAnalytics.trackers.editorial"),n={play:"metric1",skip:"metric2",25:"metric3",50:"metric4",75:"metric5",end:"metric6"},r=function(e){var t={video:{id:"gu-video-youtube-".concat(e.mediaId),eventType:"video:content:".concat(e.eventType)}};o.a.record(t)};["play","25","50","75","end"].forEach((function(i){a.a.once(u(i,e),(function(a){var o={mediaId:e,mediaType:"video",eventType:i,isPreroll:!1};r(o),window.ga("".concat(t,".send"),"event",Object(c.a)(o,n,a,"gu-video-youtube",(function(){return"video content"}),e))}))})),r({mediaId:e,mediaType:"video",eventType:"ready",isPreroll:!1})},d=function(e,t){a.a.emit(u(e,t),t)}},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(10),i=n.n(a),r=n(1),o=n(8),c=n(52),u=n(17),s=n(70),d=new function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a;i()(this,e);var n=/[#&]noads(&.*)?$/.test(window.location.hash),a=/[#&]noadsaf(&.*)?$/.test(window.location.hash),d=/[?&]forceads(&.*)?$/.test(window.location.search),f=!n&&!s.a.isOff("adverts"),l=t.get("page.shouldHideAdverts")||"childrens-books-site"===t.get("page.section"),g=t.get("page.isMinuteArticle"),p="Article"===t.get("page.contentType"),m="Interactive"===t.get("page.contentType"),v=t.get("page.isLiveBlog"),b=t.get("page.isHosted"),y="Identity"===t.get("page.contentType")||"identity"===t.get("page.section"),h=t.get("switches"),w="wide"===Object(o.c)(),O=document.documentElement&&document.documentElement.classList.contains("has-sticky"),j=t.get("page.showNewRecipeDesign")&&t.get("tests.abNewRecipeDesign");this.isSecureContact=["help/ng-interactive/2017/mar/17/contact-the-guardian-securely","help/2016/sep/19/how-to-contact-the-guardian-securely"].includes(t.get("page.pageId","")),this.adFree=!!a||Object(c.h)(),this.dfpAdvertising=d||h.commercial&&f&&!l&&!y&&!this.adFree,this.stickyTopBannerAd=!this.adFree&&!t.get("page.disableStickyTopBanner")&&!O,this.articleBodyAdverts=this.dfpAdvertising&&!this.adFree&&!g&&p&&!v&&!b&&!j,this.carrotTrafficDriver=!this.adFree&&this.articleBodyAdverts&&t.get("switches.carrotTrafficDriver",!1)&&!t.get("page.isPaidContent"),this.highMerch=this.dfpAdvertising&&!this.adFree&&!g&&!b&&!m&&!t.get("page.isFront")&&!t.get("isDotcomRendering",!1)&&!j,this.thirdPartyTags=!this.adFree&&f&&!y&&!this.isSecureContact,this.launchpad=!this.adFree&&f&&!y&&!this.isSecureContact&&t.get("switches.redplanetForAus",!1),this.relatedWidgetEnabled=this.dfpAdvertising&&!this.adFree&&!n&&!l&&p&&!t.get("page.isPreview")&&t.get("page.showRelatedContent")&&!(Object(u.j)()&&t.get("page.commentable")),this.commentAdverts=this.dfpAdvertising&&!this.adFree&&!g&&t.get("switches.enableDiscussionSwitch")&&t.get("page.commentable")&&(!v||w),this.liveblogAdverts=v&&this.dfpAdvertising&&!this.adFree,this.paidforBand=t.get("page.isPaidContent")&&!O,this.comscore=t.get("switches.comscore",!1)&&!y&&!this.isSecureContact}}}]);
//# sourceMappingURL=graun.facia~trail~youtube.js.map