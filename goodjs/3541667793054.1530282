YUI.add("af-applets",function(r,e){"use strict";var a=r.Lang.isFunction;function t(){var l=this;YUI.Env.Af=YUI.Env.Af||{},(YUI.Env.Af.Applets=l).applets={},l._firstControllerNode=null,a(l.after)&&l.after("*:appletdestroyed",function(e){var t=e.applet||{},e=l.applets[t.guid];e&&t.clientId===e.clientId&&delete l.applets[t.guid]})}t.prototype={addController:function(e){if(!e||!e.name||"function"!=typeof e.execute)return!1;if(!this._firstControllerNode)return this._firstControllerNode={controller:e,next:null},!0;for(var t,l=this._firstControllerNode;l;){if(l.controller.name===e.name)return l.controller=e,!0;l=(t=l).next}return t.next={controller:e,next:null},!0},execControllers:function(e){e&&e.action&&this._firstControllerNode&&this._execController(e,this._firstControllerNode)},_execController:function(t,l){var o;t&&t.action&&l&&l.controller&&l.controller.execute(o=this,t,function(e){e||o._execController(t,l.next)})},initializer:function(e){e=e||{};var t=r.Af,l="aptsInitializer",o=this;t.Utils.perfStart(l),o.addController(new t.AppletInit),o.addController(new t.AppletLoad),o.addController(new t.AppletAdd),o.addController(new t.AppletRemote),o.addController(new t.AppletRemove),o.addController(new t.AppletMove),o.addController(new t.AppletAction),o.addController(new t.AppletShowView),o.addController(new t.AppletCloseView),o.addController(new t.AppletRefreshView),o.addController(new t.AppletSaveSettings),r.Array.forEach(e.controllers,function(e){o.addController(e)}),o.execControllers({action:"page.init"}),t.Utils.perfStop(l)},getAppletLayout:function(){return r.Af.AppletDom.getLayout()},addApplet:function(e,t,l,o,n){this.execControllers({action:"applet.add",params:{type:e,config:t,settings:l,location:o},callback:n})},initApplet:function(e,t,l){a(t)&&(l=t,t=!1);t={replace:!!t};"string"==typeof e?t.guid=e:t.node=e,this.execControllers({action:"applet.init",params:t,callback:l})},loadApplet:function(e,t){var l={};"string"==typeof e?l.guid=e:l.node=e,this.execControllers({action:"applet.load",params:l,callback:t})},moveApplet:function(e,t,l,o,n){a(o)&&(n=o,o={});n={action:"applet.move",params:r.merge({guid:e,from:t,to:l},o),callback:n};this.execControllers(n)},removeApplet:function(e,t,l){a(t)&&(l=t,t={});l={action:"applet.remove",params:r.merge({guid:e},t),callback:l};this.execControllers(l)}},r.namespace("Af").Applets=t,r.Af.getApplet=function(e){return r.Af.Utils.objectGetValue(YUI.Env.Af,"Applets.applets."+e)||null}},"@VERSION@",{requires:["af-applet-action","af-applet-init","af-applet-load","af-applet-mgr","af-applet-savesettings","af-applet-viewmgr","af-dom","af-utils"]});
