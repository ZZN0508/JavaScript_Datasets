YUI.add("event-delegate",function(f,e){function c(e,t,n,r){var a,l,i,s,u,o,p=h(arguments,0,!0),d=g(n)?n:null;if(y(e)){if(u=[],v(e))for(i=0,s=e.length;i<s;++i)p[0]=e[i],u.push(f.delegate.apply(f,p));else for(i in p.unshift(null),e)e.hasOwnProperty(i)&&(p[0]=i,p[1]=e[i],u.push(f.delegate.apply(f,p)));return new f.EventHandle(u)}if(1<(a=e.split(/\|/)).length&&(l=a.shift(),p[0]=e=a.shift()),a=f.Node.DOM_EVENTS[e],!(o=y(a)&&a.delegate?a.delegate.apply(a,arguments):o)){if(!(e&&t&&n&&r))return;d=d?f.Selector.query(d,null,!0):n,!(o=!d&&g(n)?f.on("available",function(){f.mix(o,f.delegate.apply(f,p),!0)},n):o)&&d&&(p.splice(2,2,d),(o=f.Event._attach(p,{facade:!1})).sub.filter=r,o.sub._notify=c.notifySub)}return o&&l&&(l=(l=b[l]||(b[l]={}))[e]||(l[e]=[])).push(o),o}var h=f.Array,t=f.Lang,g=t.isString,y=t.isObject,v=t.isArray,u=f.Selector.test,b=f.Env.evt.handles;c.notifySub=function(e,t,n){t=t.slice(),this.args&&t.push.apply(t,this.args);var r,a,l,i,s=c._applyFilter(this.filter,t,n);if(s){for(s=h(s),(r=t[0]=new f.DOMEventFacade(t[0],n.el,n)).container=f.one(n.el),a=0,l=s.length;a<l&&!r.stopped&&(r.currentTarget=f.one(s[a]),!1!==(i=this.fn.apply(this.context||r.currentTarget,t)));++a);return i}},c.compileFilter=f.cached(function(n){return function(e,t){return u(e._node,n,t.currentTarget===t.target?null:t.currentTarget._node)}}),c._disabledRE=/^(?:button|input|select|textarea)$/i,c._applyFilter=function(e,t,n){var r,a=t[0],l=n.el,i=a.target||a.srcElement,s=[];if((i=3===i.nodeType?i.parentNode:i).disabled&&c._disabledRE.test(i.nodeName))return s;if(t.unshift(i),g(e))for(;i&&(u(i,e,(r=i===l)?null:l)&&s.push(i),!r);)i=i.parentNode;else{for(t[0]=f.one(i),t[1]=new f.DOMEventFacade(a,l,n);i&&(e.apply(t[0],t)&&s.push(i),i!==l);)i=i.parentNode,t[0]=f.one(i);t[1]=a}return s.length<=1&&(s=s[0]),t.shift(),s},f.delegate=f.Event.delegate=c},"3.12.0",{requires:["node-base"]});
