!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VISION",[],t):"object"==typeof exports?exports.VISION=t():e.VISION=t()}("undefined"!=typeof self?self:this,(function(){return e={624:(e,t,n)=>{"use strict";function i(){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node}function a(e){return e instanceof Uint8Array&&(!i()||!Buffer.isBuffer(e))}function r(e){return e instanceof ArrayBuffer}function s(e){return!!i()&&Buffer.isBuffer(e)}var o=n(350).g,c=n(508).l,u="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";t.uncompress=function(e){if(!a(e)&&!r(e)&&!s(e))throw new TypeError(u);var t=!1,n=!1;a(e)?t=!0:r(e)&&(n=!0,e=new Uint8Array(e));var i,c,l=new o(e),_=l.readUncompressedLength();if(-1===_)throw new Error("Invalid Snappy bitstream");if(t){if(i=new Uint8Array(_),!l.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream")}else if(n){if(i=new ArrayBuffer(_),c=new Uint8Array(i),!l.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(i=Buffer.alloc(_),!l.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream");return i},t.compress=function(e){if(!a(e)&&!r(e)&&!s(e))throw new TypeError(u);var t=!1,n=!1;a(e)?t=!0:r(e)&&(n=!0,e=new Uint8Array(e));var i,o,l,_=new c(e),d=_.maxCompressedLength();return t?(i=new Uint8Array(d),l=_.compressToBuffer(i)):n?(i=new ArrayBuffer(d),o=new Uint8Array(i),l=_.compressToBuffer(o)):(i=Buffer.alloc(d),l=_.compressToBuffer(i)),i.slice(0,l)}},508:(e,t)=>{"use strict";var n=new Array(15);function i(e,t){return 506832829*e>>>t}function a(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function r(e,t,n){return e[t]===e[n]&&e[t+1]===e[n+1]&&e[t+2]===e[n+2]&&e[t+3]===e[n+3]}function s(e,t,n,i,a){return n<=60?(i[a]=n-1<<2,a+=1):n<256?(i[a]=240,i[a+1]=n-1,a+=2):(i[a]=244,i[a+1]=n-1&255,i[a+2]=n-1>>>8,a+=3),function(e,t,n,i,a){var r;for(r=0;r<a;r++)n[i+r]=e[t+r]}(e,t,i,a,n),a+n}function o(e,t,n,i){return i<12&&n<2048?(e[t]=1+(i-4<<2)+(n>>>8<<5),e[t+1]=255&n,t+2):(e[t]=2+(i-1<<2),e[t+1]=255&n,e[t+2]=n>>>8,t+3)}function c(e,t,n,i){for(;i>=68;)t=o(e,t,n,64),i-=64;return i>64&&(t=o(e,t,n,60),i-=60),o(e,t,n,i)}function u(e,t,o,u,l){for(var _=1;1<<_<=o&&_<=14;)_+=1;var d=32-(_-=1);void 0===n[_]&&(n[_]=new Uint16Array(1<<_));var p,f=n[_];for(p=0;p<f.length;p++)f[p]=0;var g,m,v,h,b,y,S,I,w,k,A=t+o,O=t,C=t,E=!0;if(o>=15)for(g=A-15,v=i(a(e,t+=1),d);E;){y=32,h=t;do{if(m=v,S=y>>>5,y+=1,h=(t=h)+S,t>g){E=!1;break}v=i(a(e,h),d),b=O+f[m],f[m]=t-O}while(!r(e,t,b));if(!E)break;l=s(e,C,t-C,u,l);do{for(I=t,w=4;t+w<A&&e[t+w]===e[b+w];)w+=1;if(t+=w,l=c(u,l,I-b,w),C=t,t>=g){E=!1;break}f[i(a(e,t-1),d)]=t-1-O,b=O+f[k=i(a(e,t),d)],f[k]=t-O}while(r(e,t,b));if(!E)break;v=i(a(e,t+=1),d)}return C<A&&(l=s(e,C,A-C,u,l)),l}function l(e){this.array=e}l.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},l.prototype.compressToBuffer=function(e){var t,n=this.array,i=n.length,a=0,r=0;for(r=function(e,t,n){do{t[n]=127&e,(e>>>=7)>0&&(t[n]+=128),n+=1}while(e>0);return n}(i,e,r);a<i;)r=u(n,a,t=Math.min(i-a,65536),e,r),a+=t;return r},t.l=l},350:(e,t)=>{"use strict";var n=[0,255,65535,16777215,4294967295];function i(e,t,n,i,a){var r;for(r=0;r<a;r++)n[i+r]=e[t+r]}function a(e,t,n,i){var a;for(a=0;a<i;a++)e[t+a]=e[t-n+a]}function r(e){this.array=e,this.pos=0}r.prototype.readUncompressedLength=function(){for(var e,t,n=0,i=0;i<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<i>>>i!==t)return-1;if(n|=t<<i,e<128)return n;i+=7}return-1},r.prototype.uncompressToBuffer=function(e){for(var t,r,s,o,c=this.array,u=c.length,l=this.pos,_=0;l<c.length;)if(t=c[l],l+=1,0==(3&t)){if((r=1+(t>>>2))>60){if(l+3>=u)return!1;s=r-60,r=1+((r=c[l]+(c[l+1]<<8)+(c[l+2]<<16)+(c[l+3]<<24))&n[s]),l+=s}if(l+r>u)return!1;i(c,l,e,_,r),l+=r,_+=r}else{switch(3&t){case 1:r=4+(t>>>2&7),o=c[l]+(t>>>5<<8),l+=1;break;case 2:if(l+1>=u)return!1;r=1+(t>>>2),o=c[l]+(c[l+1]<<8),l+=2;break;case 3:if(l+3>=u)return!1;r=1+(t>>>2),o=c[l]+(c[l+1]<<8)+(c[l+2]<<16)+(c[l+3]<<24),l+=4}if(0===o||o>_)return!1;a(e,_,o,r),_+=r}return!0},t.g=r},317:(e,t,n)=>{var i=n(943).config;function a(e,t){return e instanceof Error?e.message:t||"Unknown error"}function r(e){try{this.__initialize(e)}catch(e){throw a(e,"Error in initialize")}}r.prototype.__initialize=function(e){if(!e)throw new Error("Config missing");if(!(e instanceof Object))throw new Error("Invalid config");if(!e.url)throw new Error("API End point missing");this.__config=Object.assign(i,e)},r.prototype.getConfig=function(){return this.__config},r.prototype.updateConfig=function(e){if(!e)return a("","Error in updating, Config missing");var t=this.__config;return this.__config=Object.assign(t,e),this.__config},e.exports=r},943:e=>{e.exports={config:{disableSdkVersions:"",disableMediaSdkVersions:"",disableAppVersions:"",disableMediaAppVersions:"",collection:!0,mediaCollection:!0,compression:"none",pollConfigIntervalSec:600,flushAtEventCount:10,flushIntervalSec:60,mediaLengthShortSec:90,mediaLengthMediumSec:3600,mediaHeartbeatShortSec:5,mediaHeartbeatMediumSec:10,mediaHeartbeatLongSec:20,mediaPauseTimeoutSec:600,mediaAdHeartbeatSec:10,pageHeartbeatCollection:!1,pageHeartbeatInSeconds:60,pageActiveThreshold:120,privacy:!1,vpk:"vision"},storageVariables:{localStorage:["visionEvents","visionMediaEvents","visionConfigTimestamp","visionConfiguration","visionSession","visionAnonId"],sessionStorage:["visionPageId","visionPageIdSource","visionPageInstanceId","visionPageLocation","visionPagePreviousUrl","visionDeviceAdvertiserId","visionStateTest","visionStatePrivacy","visionUserGuestId","visionUserAffiliate","visionUserMvpdShortName","visionUserMvpdName","visionUserSubscriberType","visionUserAccessMethod","visionUserDisneyPlusBundle","visionUserSubscriptionId","visionUserDssId","visionBrowserSession"]}}},436:e=>{e.exports={globalMappings:{browser_height:["br2",!1,!0],browser_width:["br3",!1,!0],browser_cookies_flag:["br4",!1,!0],browser_local_storage_flag:["br5",!1,!0],browser_java_flag:["br6",!1,!0],browser_javascript_version:["br7",!1,!0],browser_plugins:["br8",!1,!0],browser_flash_version:["br9",!1,!0],device_height:["d5",!1,!0],device_width:["d6",!1,!0],device_advertiser_id:["d13",!1,!0],user_guest_id:["u1",!1,!0],user_affiliate:["u2",!0,!0],user_mvpd_short_name:["u3",!0,!0],user_mvpd_name:["u4",!0,!0],user_subscriber_type:["u5",!0,!0],user_access_method:["u6",!0,!0],user_disney_plus_bundle:["u7",!0,!0],user_anonymous_id:["u8",!1,!0],user_subscription_id:["u9",!0,!0],user_dss_id:["u10",!0,!0]},eventMappings:{ad_id:"ad1",ad_creative:"ad2",ad_type:"ad3",ad_placement:"ad4",ad_orientation:"ad6",ad_destination_url:"ad7",ad_version:"ad8",ad_parent_type:"ad9",ad_parent_id:"ad10",ad_pod_number:"ad11",ad_pod_size:"ad12",api_url:"ap1",api_method:"ap2",api_response_time:"ap3",article_id:"ar1",article_id_source:"ar2",article_name:"ar3",event_name:"e2",event_instance_id:["e3",!1,!0],event_session_sequence_num:["e4",!1,!0],event_timestamp:"e6",event_log_timestamp:["e7",!1,!0],event_test:"e10",event_error_code:"e11",event_error_message:"e12",event_error_stack_trace:"e13",funnel_type:"fn1",funnel_name:"fn2",funnel_milestone:"fn3",link_module_name:"l1",link_module_position:"l2",link_name:"l4",link_position:"l5",link_destination_location:"l7",link_destination_url:"l8",media_id:"m1",media_id_source:"m2",media_name:"m3",media_observed_bitrate:"m5",media_content_length:"m6",media_current_position:"m7",media_current_chapter:"m8",media_player_name:"m9",media_player_type:"m10",media_player_version:"m11",media_session_id:"m12",media_subtitle_language:"m16",media_audio_language:"m18",media_video_type:"m20",media_playlist_id:"m24",media_ad_id:"m26",media_ad_id_source:"m27",media_time_spent:"m28",media_ad_time_spent:"m29",media_live:"m30",media_viewing_mode:"m31",media_channel:"m32",media_air_date:"m33",media_air_time:"m34",media_airing_id:"m35",media_program_code:"m36",media_segment:"m37",media_sport:"m38",media_league:"m39",media_start_type:"m40",media_network_name:"m41",media_is_mute:"m42",media_live_scoring:"m43",media_autoplay_sound:"m45",media_video_type_detail:"m46",media_show_code:"m47",media_play_location:"m48",media_gam_event_key_part:"m49",media_gam_line_item_id:"m50",media_gam_impression_id:"m51",media_gam_time_usec2:"m52",media_binge_play_count:"m53",page_location:["p1",!0],page_url:["p2",!0],page_id:["p3",!0],page_id_source:["p4",!0],page_instance_id:["p5",!0],page_previous_url:["p6",!0,!0],page_z_axis:"p7",page_version:"p8",page_type:["p9",!0],page_time_spent:"p10",page_user_mode:"p11",page_auth_flag:"p12",page_nav_method:"p13",page_premium_content:"p14",pzncon_event:"pc1",pzncon_personalized:"pc2",pzncon_curated:"pc3",pzncon_reason:"pc4",pzncon_rule:"pc5",pzncon_edition:"pc6",pzncon_slot_position:"pc7",pzncon_presentation_type:"pc8",pzncon_content_id:"pc9",pzncon_content_id_type:"pc10",pzncon_nav_method:"pc11",pzncon_clubhouse:"pc12",pzncon_feed_version:"pc13",pzncon_content_score:"pc14",pzncon_entitled:"pc15",pzncon_collection_id:"pc16",pzncon_collection_id_type:"pc17",pzncon_personal_metadata:"pc18",pzncon_originally_published:"pc19",pzncon_last_modified:"pc20",pznfav_event:"pf1",pznfav_entity_id:"pf2",pznfav_entity_type:"pf3",prompt_view:"pr1",prompt_input:"pr2",payment_id:"py1",payment_category:"py2",payment_balance:"py3",payment_type:"py4",payment_sub_type:"py5",payment_currency:"py6",payment_country:"py7",payment_amount:"py8",payment_partner:"py9",payment_item:"py10",payment_item_count:"py11",payment_pay_wall_shown:"py12",payment_program_data:"py13",registration_guest_id:"r1",registration_guest_id_domain:"r2",registration_flow:"r3",registration_step:"r4",state_cmp:["s1",!0],state_test:["s2",!0],state_orientation:["s3",!1,!0],session_id:["se1",!1,!0],session_language:["se2",!1,!0],session_first_page:["se3",!1,!0],session_first_url:["se4",!1,!0],session_first_referrer_url:["se5",!1,!0],session_start_timestamp:["se9",!1,!0],session_total_time:["se10",!1,!0],search_module:"sr1",search_type:"sr2",search_keyword_executed:"sr3",search_keyword_typed:"sr4",search_refinement:"sr5",search_results_count:"sr6"}}},94:(e,t,n)=>{var i=n(436),a=i.globalMappings,r=i.eventMappings,s=n(769),o=n(758).logError;function c(e,t,n,i,a,r,c,u,l){var _;try{if(u||(_=i[r],delete i[r]),void 0===_||""===_)if(t[r]&&t[r].getValue)_=t[r].getValue(l);else if(c){var d=r.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");_=s.getFromState(e,d)}}catch(e){o("Error caught in fetching property "+r+" value",e.stack)}try{if(void 0!==_&&""!==_&&(n[a]=_,c)){var p=r.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");s.saveToState(e,p,_)}}catch(e){o("Error caught in retrieving property "+r+" value",e.stack)}}function u(e,t,n,i,a){var r,s,o={};for(var u in n)try{r=s=!1;var l=n[u];Array.isArray(l)&&(r=l[1]||!1,s=l[2]||!1,l=l[0]),c(e,t,o,i,l,u,r,s,a)}catch(e){}return o}e.exports={createEventProps:function(e,t,n,i){for(var a=[],c=0;c<n.length;c++){var l=n[c]||{};if(0!==Object.keys(l).length){if("page_view"===l.event_name){var _=s.getFromState(e,"PageUrl");_&&s.saveToState(e,"PagePreviousUrl",_)}if(l.page_location&&!s.getLocalValue("session_first_page")&&s.updateSession({session_first_page:l.page_location}),l.page_url&&!s.getLocalValue("session_first_url")&&s.updateSession({session_first_url:l.page_url}),!s.getLocalValue("session_first_referrer_url")){var d=s.getFromState(e,"PagePreviousUrl");d&&s.updateSession({session_first_referrer_url:d})}l.hasOwnProperty("event_timestamp")||(l.event_timestamp=Date.now());try{var p={},f=u(e,t,r,l,i);Object.assign(p,f),Object.keys(l).length>0&&(p.unmapped=l),a.push(p)}catch(e){o("Error caught in building event",e.stack)}}}return a},buildGlobalJson:function(e,t,n){var i={global:{a1:e.app_bundle_id,a2:e.app_suite,a3:e.app_platform,a4:e.app_version,a5:"9.9.5",a6:e.app_region,a7:e.app_country,a8:e.app_network,a10:e.app_zipcode,a11:e.app_id},events:[]},r=u(e,t,a,{},n);return Object.assign(i.global,r),i}}},596:(e,t,n)=>{var i=n(758).mediaSessionUuid;e.exports=function(e,t){var n,a,r,s,o,c=null,u=null,l=0,_=0,d=0,p=0,f=function(t){return null===t?e.mediaHeartbeatLongSec:t<e.mediaLengthShortSec?e.mediaHeartbeatShortSec:t<e.mediaLengthMediumSec?e.mediaHeartbeatMediumSec:e.mediaHeartbeatLongSec},g=function(n,i,a){var r=("ad"===i&&a?a:_)/1e3||0,s=("ad"!==i&&a?a:l)/1e3||0;if("ad"===i)Math.abs(d-r)>e.mediaAdHeartbeatSec+1&&(r=d+e.mediaAdHeartbeatSec,_=1e3*r,u=Date.now());else{var o=f(n.media_content_length);Math.abs(p-s)>o+1&&(l=1e3*(s=p+o),c=Date.now())}p=s,d=r;var g=Object.assign(n,{media_ad_time_spent:r,media_time_spent:s,event_timestamp:Date.now()});t(g)},m=function(e){var t=JSON.parse(e);t.media_session_id=o,t.event_name="media_ad_stop",g(t,"ad"),_=0,d=0,l=0,p=0,u=null,o=null},v=function(e){var t=JSON.parse(e),n=Date.now()-parseInt(u,10)+_;t.media_session_id=o,t.event_name="media_ad_heartbeat",t.media_current_position=null,u&&Date.now()-parseInt(u,10)>12e4?(s&&clearTimeout(s),a&&clearInterval(a),_=n,m(e)):g(t,"ad",n)},h=function(e){var t=JSON.parse(e),n=Date.now()-parseInt(c,10)+l;t.media_session_id=o,t.event_name="media_heartbeat",t.media_current_position=null,g(t,"video",n)},b=function(e){var t=JSON.parse(e);o=null,t.event_name="media_stop",g(t),_=0,d=0,l=0,p=0,c=null,u=null};return{createEvent:function(t){var y=e.mediaHeartbeatShortSec,S=Date.now();switch(t.media_session_id=o,t.event_name){case"media_ad_start":if(!o){var I=Object.assign({},t);o=i(),I.event_name="media_init",I.media_session_id=o,g(I,"ad"),t.event_name="media_ad_start"}u=S,_=_||0,t.media_session_id=o,a&&clearInterval(a),a=setInterval(v.bind(null,JSON.stringify(t)),1e3*e.mediaAdHeartbeatSec),c&&(l=Date.now()-parseInt(c,10)+l,clearInterval(n),c=null),g(t,"ad");break;case"media_ad_stop":if(null==o)return;clearInterval(a),s&&clearTimeout(s),u&&(_=Date.now()-parseInt(u,10)+_),l>0&&(c=S,y=f(t.media_content_length),n&&clearInterval(n),n=setInterval(h.bind(null,JSON.stringify(t)),1e3*y)),g(t,"ad"),u=null;break;case"media_ad_skipped":if(null==o)return;clearInterval(a),s&&clearTimeout(s),u&&(_=Date.now()-parseInt(u,10)+_),l>0&&(c=S,y=f(t.media_content_length),n&&clearInterval(n),n=setInterval(h.bind(null,JSON.stringify(t)),1e3*y)),g(t,"ad");var w=Object.assign({},t,{event_name:"media_ad_stop"});g(w,"ad"),u=null;break;case"media_dispose_ad_stop":if(clearInterval(a),s&&clearTimeout(s),n&&clearInterval(n),null===u)return;_=Date.now()-parseInt(u,10)+_,t.event_name="media_ad_stop",g(t,"ad"),_=0,d=0,l=0,p=0,c=null,o=null;break;case"media_ad_play":if(!o){var k=Object.assign({},t);o=i(),k.event_name="media_init",k.media_session_id=o,g(k),t.event_name="media_ad_start"}t.media_session_id=o,u=S,s&&clearTimeout(s),a&&clearInterval(a),a=setInterval(v.bind(null,JSON.stringify(t)),1e3*e.mediaAdHeartbeatSec),g(t,"ad");break;case"media_ad_pause":if(null==o)return;clearInterval(a),_=Date.now()-parseInt(u,10)+_,s=setTimeout(m.bind(null,JSON.stringify(t)),1e3*e.mediaPauseTimeoutSec),u=null,g(t,"ad");break;case"media_buffer_start":case"media_buffer_end":if(null==o)return;l=Date.now()-parseInt(c,10)+l,c=S,g(t,"video");break;case"media_start":if(!o){var A=Object.assign({},t);o=i(),A.event_name="media_init",A.media_session_id=o,g(A),t.event_name="media_start"}_=_||0,c=S,y=f(t.media_content_length),n&&clearInterval(n),n=setInterval(h.bind(null,JSON.stringify(t)),1e3*y),t.media_session_id=o,g(t);break;case"media_pause":if(!o||!c)return;l=Date.now()-parseInt(c,10)+l,r=setTimeout(b.bind(null,JSON.stringify(t)),1e3*e.mediaPauseTimeoutSec),clearInterval(n),c=null,g(t);break;case"media_play":if(!o){var O=Object.assign({},t);o=i(),O.event_name="media_init",O.media_session_id=o,g(O),t.event_name="media_start"}c=S,y=f(t.media_content_length),n&&clearInterval(n),n=setInterval(h.bind(null,JSON.stringify(t)),1e3*y),r&&clearTimeout(r),t.media_session_id=o,g(t);break;case"media_stop":if(n&&clearInterval(n),r&&clearTimeout(r),null==o)return;o=null,c&&(l=Date.now()-parseInt(c,10)+l),g(t),_=0,d=0,l=0,p=0,c=null;break;case"media_forward":if(null==o)return;l=Date.now()-parseInt(c,10)+l,c=S,g(t,"video");break;case"media_backward":if(!o||!c)return;l=Date.now()-parseInt(c,10)+l,c=S,g(t,"video")}}}}},108:(e,t,n)=>{function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=n(317),d=n(450),p=n(94),f=n(438),g=n(769),m=n(758),v=m.removeEmpty,h=m.removeEmptyFromArray,b=m.removeFromIdArray,y=m.wrapFunction,S=m.logError,I=n(943).storageVariables,w=function(){"use strict";var e;function t(){return e||(e=this),e}t.prototype.debug=function(e,t){t="string"==typeof t&&t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Debug",this.__debuggingEnabled&&console.log("VISION Log: %s - "+e,t)},t.getInstance=function(){return e||new t},t.prototype.__debuggingEnabled=!1,t.prototype.__producerData={},t.prototype.__mediaInstances=[],t.prototype.__queuefn=[],t.prototype.__configInstance,t.prototype.__variableLogic,t.prototype.__pageInstance={},t.prototype.__mediaInstance={};var n=function(){var t=localStorage.getItem("visionConfiguration"),n=null!==t&&JSON.parse(t)||{};localStorage.setItem("visionConfiguration",JSON.stringify(u(u({},n),{},{vpk:"vision"}))),e.__configInstance.updateConfig({vpk:"vision"})};t.setConfigs=function(i){e=t.getInstance();try{e.__configInstance=new _(i),g.onSessionChange(n),void 0!==i.debugMode&&i.debugMode&&(e.__debuggingEnabled=!0),/complete|interactive|loaded/.test(document.readyState)?e.__domLoadedCallback():e.__variableLogic||document.addEventListener("DOMContentLoaded",e.__domLoadedCallback.bind(e))}catch(t){e.debug(t,"error"),S(t)}},t.clearStorage=function(){if((e=t.getInstance()).__variableLogic){var n=e.__configInstance.getConfig();try{if(n.storageEnabled){for(var i=0;i<I.localStorage.length;i++)localStorage.removeItem(I.localStorage[i]);for(var a=0;a<I.sessionStorage.length;a++)sessionStorage.removeItem(I.sessionStorage[a])}}catch(e){S("Error in removing VISION values from storage",e.stack)}}else e.__queuefn.push(y(t.clearStorage,e))},t.prototype.__domLoadedCallback=function(){if(!this.__pageInstance.sessionStartTime){var t=localStorage.getItem("visionConfigTimestamp"),n=this.__configInstance.getConfig();if(!t||(Date.now()-t)/1e3>=n.pollConfigIntervalSec)g.extendSession(),this.__fetchConfiguration();else{var i=JSON.parse(localStorage.getItem("visionConfiguration"))||{};n=this.__configInstance.updateConfig(i)}this.__setVariableLogic(),setInterval(this.__fetchConfiguration.bind(this),1e3*n.pollConfigIntervalSec),setInterval(this.__pageHeartbeatCallback.bind(this),1e3*n.pageHeartbeatInSeconds),this.batchIntervalId=setInterval(this.__postEventsInBatch.bind(this),1e3*n.flushIntervalSec),document.addEventListener("scroll",this.__scrollCallback.bind(this)),window.onbeforeunload=function(){var t=e.__pageInstance.sessionStartTime;g.updateSession({session_total_time:function(e){return(Date.now()-t)/1e3+parseFloat(e||0)}})},this.__pageInstance.sessionStartTime=Date.now(),this.__pageInstance.lastUserActive=Date.now()}},t.prototype.__pageHeartbeatCallback=function(){var t=this.__configInstance.getConfig(),n=Date.now(),i=this.__pageInstance,a=i.sessionStartTime,r=i.lastUserActive;Math.abs(n-a)>1e3*(t.pageHeartbeatInSeconds+10)||!1!==r&&(n-r<1e3*t.pageActiveThreshold?t.pageHeartbeatCollection&&e.__trackQueue({event_name:"page_heartbeat"}):(e.__trackQueue({event_name:"page_close"}),this.__pageInstance.lastUserActive=!1),g.updateSession({session_total_time:function(e){return(n-a)/1e3+parseFloat(e||0)}})),this.__pageInstance.sessionStartTime=Date.now()},t.prototype.__scrollCallback=function(){this.__pageInstance.lastUserActive=Date.now()},t.prototype.__setVariableLogic=function(){var e=new d;for(window.JSON||document.write('<script src="http://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"><\/script>'),this.__variableLogic=e.getVariableLogic(),this.__configInstance.updateConfig({storageEnabled:this.__variableLogic.browser_local_storage_flag.getValue()}),g.setOnloadState({PagePreviousUrl:document.referrer||"na",PageInstanceId:Date.now()+"-"+Math.floor(1e13*Math.random())});this.__queuefn.length>0;)this.__queuefn.shift()()},t.prototype.__fetchConfiguration=function(){var e=this.__configInstance.getConfig();f.fetchConfiguration(!0,e,this.__fetchConfigurationCallback.bind(this),this.__fetchConfigurationErrCallback.bind(this))},t.prototype.__fetchConfigurationErrCallback=function(e,t,n){if(e){401===n&&this.__configInstance.updateConfig({vpk:"vision"});var i=this.__configInstance.getConfig();f.fetchConfiguration(!1,i,this.__fetchConfigurationCallback.bind(this),this.__fetchConfigurationErrCallback.bind(this))}else this.debug(JSON.stringify(t),"error")},t.prototype.__fetchConfigurationCallback=function(e){var t=this.__configInstance.getConfig(),n=e.config||{},i=e.vpk||t.vpk,a=n.disableSdkVersions&&n.disableSdkVersions.split(",").map((function(e){return e.trim()})).join(","),r=n.disableMediaSdkVersions&&n.disableMediaSdkVersions.split(",").map((function(e){return e.trim()})).join(","),s=n.disableAppVersions&&n.disableAppVersions.split(",").map((function(e){return e.trim()})).join(","),o=n.disableMediaAppVersions&&n.disableMediaAppVersions.split(",").map((function(e){return e.trim()})).join(","),c=Object.assign(n,{vpk:i,disableSdkVersions:a,disableMediaSdkVersions:r,disableAppVersions:s,disableMediaAppVersions:o});localStorage.setItem("visionConfigTimestamp",Date.now()),localStorage.setItem("visionConfiguration",JSON.stringify(e.config)),n.flushIntervalSec&&n.flushIntervalSec!==t.flushIntervalSec&&(this.batchIntervalId&&clearInterval(this.batchIntervalId),this.batchIntervalId=void 0,this.batchIntervalId=setInterval(this.__postEventsInBatch.bind(this),1e3*n.flushIntervalSec)),this.__configInstance.updateConfig(c),this.debug(JSON.stringify(e.config))},t.prototype.__postEventsInBatch=function(){var t=JSON.parse(localStorage.getItem("visionEvents"))||[];if(0!==t.length)try{var n=e.__configInstance.getConfig(),i=p.buildGlobalJson(n,e.__variableLogic,e);t=h(t),(i=v(i)).events=t,f.sendEvents(i,n,e.__trackCallback.bind(e),e.__trackErrorCallback.bind(e),!0),localStorage.removeItem("visionEvents")}catch(e){S("Error in initial track request",e.stack)}},t.prototype.set=function(){this.__variableLogic?this.__set(arguments):this.__queuefn.push(y(this.__set,this,arguments))},t.prototype.__set=function(e){try{if("object"===o(arguments[0])){if(void 0!==arguments[1]&&!0===arguments[1]&&void 0!==this.__producerData[arguments[0]])return;Object.assign(this.__producerData,arguments[0])}else"string"==typeof arguments[0]&&(this.__producerData[arguments[0]]=arguments[1])}catch(e){S("Error in setting singleton property",e.stack)}},t.prototype.get=function(e){return this.__producerData[e]},t.prototype.__trackCallback=function(){},t.prototype.__trackErrorCallback=function(e,t,n,i){if(e){401===i&&(this.__configInstance.updateConfig({vpk:"vision"}),this.__fetchConfiguration());var a=this.__configInstance.getConfig();f.sendEvents(t,a,this.__trackCallback.bind(this),this.__trackErrorCallback.bind(this),!1)}else this.debug(JSON.stringify(n),"error")},t.prototype.__addGuestIdQueue=function(e,t,n,i){var a=this.userGuestId||[];try{i?i instanceof String||(i=i.toString()):i="tertiary","primary"===i.toLowerCase()?a[0]={id:e,s:t,l:n}:"secondary"===i.toLowerCase()?a[1]={id:e,s:t,l:n}:a.some((function(t){return t.id===e}))||a.push({id:e,s:t,l:n}),this.userGuestId=a}catch(a){S("Error adding guest information: "+e+", "+t+", "+n+", "+i+", to array",a.stack)}};var r=function(e){return function(){g.deleteFromState(this.__configInstance.getConfig(),e)}},s=function(n){return function(){e=t.getInstance();for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];e.__variableLogic?n.call.apply(n,[e].concat(a)):e.__queuefn.push(y(n,e,[].concat(a)))}};return["device_advertiser_id","state_privacy","user_affiliate","user_mvpd_short_name","user_mvpd_name","user_subscriber_type","user_access_method","user_disney_plus_bundle"].forEach((function(e){var n=e.split("_").slice(1).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),i=e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");t["set"+n]=s(function(e){return function(t){g.saveToState(this.__configInstance.getConfig(),e,t)}}(i)),t["unset"+n]=s(r(i))})),["state_test","user_dss_id"].forEach((function(e){var n=e.split("_").slice(1).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),i=e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");t["add"+n]=s(function(e){return function(t,n){var i=this.__configInstance.getConfig(),r=JSON.parse(g.getFromState(i,e))||[];!r.some((function(e){return e.id===t}))&&g.saveToState(i,e,[].concat(a(r),[{id:t,s:n}]))}}(i)),t["unset"+n]=s(function(e){return function(t){var n=this.__configInstance.getConfig(),i=JSON.parse(g.getFromState(n,e))||[],a=b(t,i,0);return a&&g.saveToState(n,e,i),a}}(i)),t["unsetAll"+n]=s(r(i))})),t.addGuestId=s(t.prototype.__addGuestIdQueue),t.addSubscriptionId=s((function(){for(var e=this.__configInstance.getConfig(),t="UserSubscriptionId",n=JSON.parse(g.getFromState(e,t))||[],r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var c=1===s.length?[void 0,s[0]]:s,u=i(c,2),l=u[0],_=u[1],d=n.some((function(e){return e.id===l&&e.s===_}));!d&&g.saveToState(e,t,[].concat(a(n),[{id:l,s:_}]))})),t.unsetSubscriptionId=s((function(e){var t=this.__configInstance.getConfig(),n="UserSubscriptionId",i=JSON.parse(g.getFromState(t,n))||[],a=i.filter((function(t){return t.s!==e})),r=i.length!==a.length;return r&&g.saveToState(t,n,a),r})),t.unsetAllSubscriptionId=s(r("UserSubscriptionId")),t}();e.exports=w},698:e=>{e.exports={browser:{width:{id:"browser_width",getValue:function(){return parseInt(window.innerWidth,10)||parseInt(document.body.clientWidth,10)}},height:{id:"browser_height",getValue:function(){return parseInt(window.innerHeight,10)||parseInt(document.body.clientHeight,10)}},plugins:{id:"browser_plugins",getValue:function(){var e=[];for(var t in navigator.plugins)e.push(navigator.plugins[t].name);return e.join(";")}},localStorage:{id:"browser_local_storage_flag",getValue:function(){var e,t="test";try{sessionStorage.setItem(t,t),sessionStorage.removeItem(t),e=!0}catch(t){e=!1}return e}},jsVersion:{id:"browser_javascript_version",getValue:function(){var e=[];return Number.prototype.toFixed&&e.push("1.5"),[].indexOf&&[].forEach&&e.push("1.6"),function(){var e;try{e=[1,3]}catch(t){e=!1}return e}()&&e.push("1.7"),[].reduce&&[].reduceRight&&JSON&&e.push("1.8"),"".trimLeft&&e.push("1.8.1"),e[e.length-1]}},javaFlag:{id:"browser_java_flag",getValue:function(){return navigator.javaEnabled&&navigator.javaEnabled()}},cookies:{id:"browser_cookies_flag",getValue:function(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}},flashVersion:{id:"browser_flash_version",getValue:function(){var e,t,n,i=-1;if(null!=navigator.plugins&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",r=navigator.plugins["Shockwave Flash"+a].description.split(" "),s=r[2].split("."),o=s[0],c=s[1],u=r[3];""===u&&(u=r[4]),"d"===u[0]?u=u.substring(1):"r"===u[0]&&(u=u.substring(1)).indexOf("d")>0&&(u=u.substring(0,u.indexOf("d"))),i=o+"."+c+"."+u}}else-1!==navigator.userAgent.toLowerCase().indexOf("webtv/2.6")?i=4:-1!==navigator.userAgent.toLowerCase().indexOf("webtv/2.5")?i=3:-1!==navigator.userAgent.toLowerCase().indexOf("webtv")?i=2:(e=!(-1===navigator.appVersion.indexOf("MSIE")),t=!(-1===navigator.appVersion.toLowerCase().indexOf("win")),n=!(-1===navigator.userAgent.indexOf("Opera")),e&&t&&!n&&(i=function(){var e,t;try{e=(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version")}catch(e){}if(!e)try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e="WIN 6,0,21,0",t.AllowScriptAccess="always",e=t.GetVariable("$version")}catch(e){}if(!e)try{e=(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.3")).GetVariable("$version")}catch(e){}if(!e)try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),e="WIN 3,0,18,0"}catch(e){}if(!e)try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e="WIN 2,0,0,11"}catch(t){e=-1}return e}()));return"flash_version:"+i}}}}},159:e=>{e.exports={device:{advertiserId:{id:"device_advertiser_id",getValue:function(){return sessionStorage.getItem("visionDeviceAdvertiserId")}},height:{id:"device_height",getValue:function(){return parseInt(screen.height,10)}},width:{id:"device_width",getValue:function(){return parseInt(screen.width,10)}}}}},485:(e,t,n)=>{var i=n(769);e.exports={event:{instanceId:{id:"event_instance_id",getValue:function(){return Date.now()+"-"+Math.floor(1e13*Math.random())}},logTimestamp:{id:"event_log_timestamp",getValue:function(){return Date.now()}},sessionSequenceNum:{id:"event_session_sequence_num",getValue:function(){var e=i.getSession("event_session_sequence_num")+1;return i.updateSession({event_session_sequence_num:e}),e}}}}},450:(e,t,n)=>{var i=n(698).browser,a=n(159).device,r=n(485).event,s=n(909).page,o=n(542).session,c=n(398).state,u=n(717).user;function l(){try{this.__initialize()}catch(e){}}l.prototype.__initialize=function(){var e={},t=[i,a,r,s,o,c,u];for(var n in t){var l=t[n];for(var _ in l)e[l[_].id]=l[_]}return this.__variableLogic=e,e},l.prototype.getVariableLogic=function(){return this.__variableLogic},e.exports=l},909:e=>{e.exports={page:{instanceId:{id:"page_instance_id",getValue:function(){return sessionStorage.getItem("visionPageInstanceId")}},location:{id:"page_location",getValue:function(){return sessionStorage.getItem("visionPageLocation")||""}}}}},542:(e,t,n)=>{var i=n(769),a=["session_id","session_first_page","session_first_url","session_first_referrer_url","session_start_timestamp"].reduce((function(e,t){return e[t.split("_").slice(1,2).join("")+t.split("_").slice(2).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")]={id:t,getValue:function(){return i.getLocalValue(t)}},e}),{});a.language={id:"session_language",getValue:function(){return navigator.language||navigator.browserLanguage}},a.totalTime={id:"session_total_time",getValue:function(e){var t=e.__pageInstance.sessionStartTime,n=i.getLocalValue("session_total_time")||0;return Math.abs(Date.now()-t)<3e5&&(n+=(Date.now()-t)/1e3),n}},e.exports={session:a}},398:(e,t,n)=>{var i=n(212).url;e.exports={state:{stateCmp:{id:"state_cmp",getValue:function(){var e=i("?cmp",document.URL.toLowerCase());return e&&(e=unescape(e)),e||""}},test:{id:"state_test",getValue:function(){return JSON.parse(sessionStorage.getItem("visionStateTest"))||[]}},orientation:{id:"state_orientation",getValue:function(){return window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait"}}}}},717:(e,t,n)=>{var i=n(769),a=["user_affiliate","user_mvpd_short_name","user_mvpd_name","user_subscriber_type","user_access_method"].reduce((function(e,t){var n=t.split("_").slice(1,2).join("")+t.split("_").slice(2).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),i="vision"+t.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");return e[n]={id:t,getValue:function(){return sessionStorage.getItem(i)}},e}),{});a.guestId={id:"user_guest_id",getValue:function(e){return e.userGuestId||[]}},a.subscriptionId={id:"user_subscription_id",getValue:function(){return JSON.parse(sessionStorage.getItem("visionUserSubscriptionId"))||[]}},a.disneyPlusBundle={id:"user_disney_plus_bundle",getValue:function(){var e=sessionStorage.getItem("visionUserDisneyPlusBundle");return null!==e?"true"===e:null}},a.dssId={id:"user_dss_id",getValue:function(){return JSON.parse(sessionStorage.getItem("visionUserDssId"))||[]}},a.anonymousId={id:"user_anonymous_id",getValue:function(){return i.getLocalValue("user_anonymous_id",!0)}},e.exports={user:a}},900:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,n,i){var a,r,s,o,c,u,l,_,d,p,f,g,m,v=!1,h={},b=function(t){var a={event_name:t,media_player_type:e.currentType(),media_observed_bitrate:e.playbackRate(),media_content_length:isFinite(e.duration())&&e.duration()||null,media_current_position:e.currentTime(),media_viewing_mode:e.isFullscreen()?"full screen":"browse",media_is_mute:e.muted(),media_ad_id:e.ads&&e.ads.ad&&e.ads.ad.id,media_player_name:e.bcAnalytics&&e.bcAnalytics.settings&&e.bcAnalytics.settings.playerName,media_player_version:e.bcAnalytics&&e.bcAnalytics.settings&&e.bcAnalytics.settings.platformVersion,media_audio_language:e.language()},r=Object.assign({},e.mediainfo,n);i(a,r)};e.hasStarted_&&!e.paused()&&(h.started=!0,b("media_start")),a=function(){v=!0,b("media_ad_start")},r=function(){b("media_ad_stop"),v=!1},s=function(){b("media_ad_play")},o=function(){b("media_ad_pause")},c=function(){b("media_ad_skipped"),v=!1},u=function(){v&&(b("media_ad_stop"),v=!1),h.started||(h.started=!0,b("media_start"))},l=function(){h.started&&h.paused&&(h.paused=!1,b("media_play"))},_=function(){e.scrubbing()||e.seeking()||h.seeking||(h.paused=!0,b("media_pause"))},d=function(){b("media_stop"),h.paused=null,h.started=null},p=function(){var n;e&&(n="object"===t(e.ads)&&e.ads.isAdPlaying()?"media_dispose_ad_stop":"media_stop",b(n)),h.started=!1},f=function(){0!==e.bufferedEnd()||h.buffering||(h.buffering=!0,b("media_buffer_start")),h.seeking=!0},g=function(){var t;h.buffering&&(b("media_buffer_end"),h.buffering=!1),t=parseFloat(h.lastUpdatedTime)<parseFloat(e.currentTime())?"media_forward":"media_backward",b(t),h.seeking=!1},m=function(){e.scrubbing()||e.seeking()||h.seeking||(h.lastUpdatedTime=e.currentTime())},e.on("ads-ad-started",a),e.on("ads-ad-ended",r),e.on("ads-play",s),e.on("ads-pause",o),e.on("ads-ad-skipped",c),e.on("playing",u),e.on("play",l),e.on("pause",_),e.on("ended",d),e.on("dispose",p),e.on("seeking",f),e.on("seeked",g),e.on("timeupdate",m)}},438:(e,t,n)=>{var i=n(624),a=n(758),r=a.str2ab,s=a.hash,o=n(769),c=function(e){return e.privacy||"true"===sessionStorage.getItem("visionStatePrivacy")},u=function(e){var t=["a6","a7","a10","d13","u2","u8","u10"],n=["se2"];Object.keys(e.global).forEach((function(n){-1!==t.indexOf(n)&&delete e.global[n]})),e.global.u1=e.global.u1.filter((function(e){var t;return"swid"===(null===(t=e.s)||void 0===t?void 0:t.toLowerCase())&&/^\{.+\}$/.test(e.id)})),0===e.global.u1.length&&delete e.global.u1,null!=e.global.u9&&e.global.u9.forEach((function(e){delete e.id})),e.events.forEach((function(e){e.s4=!0,Object.keys(e).forEach((function(t){-1!==n.indexOf(t)&&delete e[t]}))}))},l=function(e,t,n){var i=o.getSession("session_id"),a=o.getSession("vision_id"),r=t.vpk,c=s(i,r);e.setRequestHeader("Authorization",c),e.setRequestHeader("Session-Id",i),e.setRequestHeader("Suite",t.app_suite),e.setRequestHeader("Vision-Id",a),null!=n&&(e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Event-Count",n.events.length.toString())),e.crossOrigin=!0,e.withCredentials=!0},_=function(e,t,n){if(!t.debugMode&&"snappy"===t.compression){var a=r(JSON.stringify(n)),s=i.compress(a);return e.setRequestHeader("Content-Encoding","snappy"),e.processData=!0,new Blob([s],{type:"text/plain"})}return JSON.stringify(n)};e.exports={fetchConfiguration:function(e,t,n,i){var a=XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");a.onreadystatechange=function(){4===this.readyState&&(200===this.status&&n(JSON.parse(this.responseText)),this.status>=400&&this.status<=500&&i(e,this.statusText,this.status))},a.open("GET",t.url+"config/"+t.app_suite,!0),l(a,t),a.contentType="application/json",a.send()},sendEvents:function(e,t,n,i,a){if(e.events=e.events.filter((function(e){return null==e.event_properties})),0!==e.events.length){c(t)&&u(e);var r=XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");r.onreadystatechange=function(){4===this.readyState&&((200===this.status||202===this.status)&&n("success"),this.status>=400&&this.status<=500&&i(a,e,this.statusText,this.status))},r.open("POST",t.url+"event",!0),l(r,t,e),r.send(_(r,t,e))}},sendMedia:function(e,t,n,i,a){if(e.events=e.events.filter((function(e){return null==e.event_properties})),0!==e.events.length){c(t)&&u(e);var r=XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");r.onreadystatechange=function(){4===this.readyState&&((200===this.status||202===this.status)&&n("success"),this.status>=400&&this.status<=500&&i(a,e,this.statusText,this.status))},r.open("POST",t.url+"media",!0),l(r,t,e),r.setRequestHeader("Event-Type",e.events[0].e2),r.setRequestHeader("Media-Session-Id",e.events[0].m12),r.send(_(r,t,e))}}}},758:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={getVideoName:function(e){var t=e.split("/");return t[t.length-1].split(".")[0]},hash:function(e,t){for(var n=e.concat(t),i=n.length,a=[7,11],r=[71,173],s=[2277735313,289559509],o=[1291169091,658871167],c=0;c<i;c+=1)a=[(a[0]<<5)-a[0]+n.charCodeAt(c),(a[1]<<3)-a[1]+n.charCodeAt(c)],r=[(r[0]<<4)-r[0]+n.charCodeAt(c),(r[1]<<6)-r[1]+n.charCodeAt(c)],a=[a[0]^s[0],a[1]^s[1]],r=[r[0]^o[0],r[1]^o[1]];return("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)},removeEmpty:function(e){return Object.keys(e).forEach((function(i){return e[i]&&"object"===t(e[i])&&!Array.isArray(e[i])&&n.removeEmpty(e[i])||(""===e[i]||null===e[i]||"null"===e[i]||void 0===e[i]||"undefined"===e[i]||Array.isArray(e[i])&&0===e[i].length)&&delete e[i]})),e},removeEmptyFromArray:function(e){var t=[];return e.forEach((function(e){var i=n.removeEmpty(e);t.push(i)})),t},removeFromIdArray:function(e,t,n){for(var i in t)if(t[i]&&t[i].hasOwnProperty("id")&&t[i].id===e)return i>=n?(t.splice(i,1),!0):(t[i]={},!0);return!1},str2ab:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0,a=e.length;i<a;i++)n[i]=e.charCodeAt(i);return t},mediaSessionUuid:function(){return Date.now()+"-"+Math.floor(1e13*Math.random())},wrapFunction:function(e,t,n){return function(){e.apply(t,n)}},logError:function(e,t){}};e.exports=n},769:e=>{var t;e.exports={onSessionChange:function(e){t=e},getLocalValue:function(e,t){return t?this.getAnonId(e):this.getSession(e)},createNewSession:function(){var e=Date.now(),n={session_start_timestamp:Date.now(),session_total_time:0,session_id:e+"-"+Math.floor(1e13*Math.random()),vision_id:e+"-"+Math.floor(1e13*Math.random()),active:e+18e5,expires:e+432e5,event_session_sequence_num:0};return localStorage.setItem("visionSession",JSON.stringify(n)),"function"==typeof t&&t(n),n},extendSession:function(){var e=this.getSession(),t=Date.now();if(t-e.expires>0||t-e.active>0)this.createNewSession();else{var n=t+18e5,i=e;i.active=n,localStorage.setItem("visionSession",JSON.stringify(i))}},getSession:function(e){var t,n=localStorage.getItem("visionSession");try{(t=JSON.parse(n))||(t=this.createNewSession())}catch(e){t=this.createNewSession()}return e?t[e]:t},updateSession:function(e){var n=this.getSession(),i=Object.keys(e).reduce((function(t,i){return t[i]="function"==typeof e[i]?e[i](n[i]):e[i],t}),{}),a=Object.assign({},n,i);localStorage.setItem("visionSession",JSON.stringify(a)),n.vision_id!==a.vision_id&&"function"==typeof t&&t(a)},createNewAnonId:function(){var e=Date.now(),t={user_anonymous_id:e+"-"+Math.floor(1e13*Math.random()),expires:e+33927469800};return localStorage.setItem("visionAnonId",JSON.stringify(t)),t},getAnonId:function(e){var t=localStorage.getItem("visionAnonId"),n=Date.now(),i=!!t&&JSON.parse(t)||this.createNewAnonId();return n-i.expires>0&&(i=this.createNewAnonId()),e?i[e]:i},getFromState:function(e,t){var n;return e.storageEnabled&&(n=sessionStorage.getItem("vision"+t)),n},saveToState:function(e,t,n){e.storageEnabled&&null!=n&&sessionStorage.setItem("vision"+t,Array.isArray(n)?JSON.stringify(n):n)},deleteFromState:function(e,t){e.storageEnabled&&sessionStorage.removeItem("vision"+t)},setOnloadState:function(e){Object.keys(e).forEach((function(t){null!=e[t]&&sessionStorage.setItem("vision"+t,Array.isArray(e[t])?JSON.stringify(e[t]):e[t])}))}}},212:e=>{function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}e.exports={url:function(e,n){var i,a,r,s,o,c,u,l,_=n||window.location.toString();if(!e)return _;if(e=e.toString(),"//"===_.substring(0,2)?_="http:"+_:1===_.split("://").length&&(_="http://"+_),i={auth:""},1===(a=(n=_.split("/"))[2].split("@")).length?a=a[0].split(":"):(i.auth=a[0],a=a[1].split(":")),i.protocol=n[0],i.hostname=a[0],i.port=a[1]||"80",i.pathname=(n.length>3?"/":"")+n.slice(3,n.length).join("/").split("?")[0].split("#")[0],"/"===(r=i.pathname).charAt(r.length-1)&&(r=r.substring(0,r.length-1)),o=(s=i.hostname).split("."),c=r.split("/"),"hostname"===e)return s;if("domain"===e)return o.slice(-2).join(".");if("sub"===e)return o.slice(0,o.length-2).join(".");if("port"===e)return i.port||"80";if("protocol"===e)return i.protocol.split(":")[0];if("auth"===e)return i.auth;if("user"===e)return i.auth.split(":")[0];if("pass"===e)return i.auth.split(":")[1]||"";if("path"===e)return i.pathname;if("."===e.charAt(0)){if(t(e=e.substring(1)))return o[(e=parseInt(e,10))<0?o.length+e:e-1]||""}else{if(t(e))return c[(e=parseInt(e,10))<0?c.length+e:e]||"";if("file"===e)return c.slice(-1)[0];if("filename"===e)return c.slice(-1)[0].split(".")[0];if("fileext"===e)return c.slice(-1)[0].split(".")[1]||"";if("?"===e.charAt(0)||"#"===e.charAt(0)){if(u=_,l=null,"?"===e.charAt(0)?u=(u.split("?")[1]||"").split("#")[0]:"#"===e.charAt(0)&&(u=u.split("#")[1]||""),!e.charAt(1))return u;e=e.substring(1);for(var d=0,p=(u=u.split("&")).length;d<p;d++)if((l=u[d].split("="))[0]===e)return l[1];return null}}return""}}},322:(e,t,n)=>{var i=n(900),a=n(94),r=n(438),s=n(769),o=n(596),c=n(758),u=c.removeEmpty,l=c.removeEmptyFromArray,_=c.wrapFunction,d=n(557),p={trackMedia:function(e,t){this.__variableLogic?this.__trackMedia(e,t):this.__queuefn.push(_(this.__trackMedia,this,[e,t]))},__trackMedia:function(e,t){var n=this,i=this.__configInstance.getConfig(),a=e,r=i.collection&&(!i.disableSdkVersions||-1===i.disableSdkVersions.split(",").indexOf(this.__variableLogic.app_logging_lib_version.getValue()))&&(!i.disableAppVersions||-1===i.disableAppVersions.split(",").indexOf(i.app_version.replace(/\(.*\)/g,"").trim())),s=i.mediaCollection&&(!i.disableMediaSdkVersions||-1===i.disableMediaSdkVersions.split(",").indexOf(this.__variableLogic.app_logging_lib_version.getValue()))&&(!i.disableMediaAppVersions||-1===i.disableMediaAppVersions.split(",").indexOf(i.app_version.replace(/\(.*\)/g,"").trim()));if(r&&s){var c=t.originalPublishDate||t.originalAirDate,u=c&&new Date(c);this.autoplaySound="autostart"===t.startType&&"media_start"===e.event_name&&(e.media_is_mute?"Autoplay Sound Off":"Autoplay Sound On")||this.autoplaySound,a.media_autoplay_sound=this.autoplaySound,a.media_air_date=u?u.toLocaleDateString():void 0,a.media_air_time=u?u.toLocaleTimeString():void 0,a.media_id=t.id,a.media_name=t.headline||t.name,a.media_video_type=t.status||"vod",a.media_live=t.live,a.media_channel=t.publisher,a.media_airing_id=t.simulcastAiringId||t.airingId,a.media_program_code=t.program,a.media_segment=t.segment,a.media_sport=t.sportName,a.media_league=t.leagueName,a.media_start_type=t.startType,a.media_network_name=t.publisher,a.media_video_type_detail=t.custom_fields&&t.custom_fields.mediaType,a.media_show_code=t.showcode,a.media_live_scoring=null==t.liveScoring?t.liveScoring:t.liveScoring?"Live Scoring On":"Live Scoring Off",a.media_id_source=t.webHref,a.media_ad_id_source=t.adIdSource,a.media_playlist_id=t.playlistId,a.media_play_location=t.playLocation,a.media_gam_event_key_part=t.gamEventKeyPart,a.media_gam_line_item_id=t.gamLineItemId&&parseInt(t.gamLineItemId,10),a.media_gam_impression_id=t.gamImpressionId,a.media_gam_time_usec2=t.gamTimeUsec2&&parseInt(t.gamTimeUsec2,10),a.media_binge_play_count=parseInt(t.playlistCount,10)||void 0;var l=this.__mediaInstances.findIndex((function(e){return e.mediaId===t.id}));if(l>=0){var _=this.__mediaInstances[l].instance;this.__pageInstance.latestMediaEvent=JSON.stringify(a),"media_pause"===e.event_name&&Math.abs(a.media_content_length-a.media_current_position)<1&&setTimeout((function(){var e=JSON.parse(n.__pageInstance.latestMediaEvent);"media_pause"===e.event_name&&(e.event_name="media_stop",_.createEvent(e))}),2e3),_.createEvent(a),"media_stop"===e.event_name&&this.__mediaInstances.splice(l,1)}else if("media_start"===e.event_name||"media_ad_start"===e.event_name){var d=new o(i,this.__mediaCallback.bind(this));this.__mediaInstances.push({mediaId:t.id,instance:d}),d.createEvent(a)}}},__mediaCallback:function(e){s.extendSession(),this.__pageInstance.lastUserActive=Date.now();var t=this.__configInstance.getConfig(),n=a.createEventProps(t,this.__variableLogic,[e],this),i=a.buildGlobalJson(t,this.__variableLogic,this);n=l(n),(i=u(i)).events=n,r.sendMedia(i,t,this.__trackMediaCallback.bind(this),this.__trackMediaErrorCallback.bind(this),!0)},__trackMediaCallback:function(){},__trackMediaErrorCallback:function(e,t,n,i){if(e){401===i&&(this.__configInstance.updateConfig({vpk:"vision"}),this.__fetchConfiguration());var a=this.__configInstance.getConfig();r.sendMedia(t,a,this.__trackMediaCallback.bind(this),this.__trackMediaErrorCallback.bind(this),!1)}else this.debug(JSON.stringify(n),"error")}};Object.assign(d.prototype,p),d.videojsPlugin=i,e.exports=d},557:(e,t,n)=>{var i=n(108),a=n(94),r=n(438),s=n(769),o=n(758),c=o.removeEmpty,u=o.removeEmptyFromArray,l=o.wrapFunction,_=o.logError,d=function(e){var t=i.getInstance(),n=t.__configInstance.getConfig(),r=a.buildGlobalJson(n,t.__variableLogic,t);return e=u(e),(r=c(r)).events=e,r},p={track:function(e){var t=i.getInstance();t.__variableLogic?t.__trackQueue(e):t.__queuefn.push(l(t.__trackQueue,t,[e]))},__trackQueue:function(e){var t=i.getInstance(),n=Array.isArray(e)?e:[e],o=[];if(!(function(){var e=i.getInstance(),t=e.__configInstance.getConfig();return t.collection&&(!t.disableSdkVersions||-1===t.disableSdkVersions.split(",").indexOf(e.__variableLogic.app_logging_lib_version.getValue()))&&(!t.disableAppVersions||-1===t.disableAppVersions.split(",").indexOf(t.app_version.replace(/\(.*\)/g,"").trim()))}()&&e instanceof Object))return!1;for(var c=0;c<n.length;c++)if(n[c].hasOwnProperty("event_name")){var u=n[c].event_name,l=new Date(n[c].pzncon_originally_published),p=new Date(n[c].pzncon_last_modified);if(n[c].pzncon_originally_published=l instanceof Date&&!isNaN(l)?l.getTime():void 0,n[c].pzncon_last_modified=p instanceof Date&&!isNaN(p)?p.getTime():void 0,-1===["page_close","page_heartbeat"].indexOf(u)&&(s.extendSession(),t.__pageInstance.lastUserActive=Date.now()),"pzncon"!==u){var f=n.splice(c,1);o.push(f[0])}}else n.splice(c,1),t.debug("Missing property event_name. Event not sent","error");var g=t.__configInstance.getConfig();if(o.length>0){o=a.createEventProps(g,t.__variableLogic,o,t);var m=d(o);r.sendEvents(m,g,t.__trackCallback.bind(t),t.__trackErrorCallback.bind(t),!0)}if(0===n.length)return!0;var v=a.createEventProps(g,t.__variableLogic,n,t),h=(JSON.parse(localStorage.getItem("visionEvents"))||[]).concat(v);if(localStorage.setItem("visionEvents",JSON.stringify(h)),h.length>=g.flushAtEventCount)try{var b=d(h);localStorage.removeItem("visionEvents"),r.sendEvents(b,g,t.__trackCallback.bind(t),t.__trackErrorCallback.bind(t),!0)}catch(e){_("Error in initial track request",e.stack)}return!0}};Object.assign(i.prototype,p),e.exports=i,e.exports.visionMain=p}},t={},function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}(322);var e,t}));