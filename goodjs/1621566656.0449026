(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[1814],{952837:function(e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"threadListItemSpamInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperSpamInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]}]}}],loc:{start:0,end:85}};n.loc.source={body:"fragment threadListItemSpamInfo on WhisperSpamInfo {\nlastMarkedNotSpamAt\nlikelihood\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},465724:function(e,n,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"currentUserWhisperThreadsNode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"threadListItemSpamInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"whisperThreadsMessageEdge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:515}};t.loc.source={body:'#import "twilight/features/whispers/components/thread-list-item/thread-list-item-spam-info-fragment.gql"\n#import "./whisper-threads-message-edge-fragment.gql"\nfragment currentUserWhisperThreadsNode on WhisperThread {\nid\nparticipants {\nid\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\n__typename\n}\nspamInfo {\n...threadListItemSpamInfo\n}\nmessages(first: 20) {\nedges {\n...whisperThreadsMessageEdge\n}\n__typename\n}\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nisMuted\nisArchived\nunreadMessagesCount\n__typename\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)}))}t.definitions=t.definitions.concat(a(i(952837).definitions)),t.definitions=t.definitions.concat(a(i(87565).definitions)),e.exports=t},7635:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Whispers_UserWhisperThreads"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"whisperThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"currentUserWhisperThreadsNode"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:273}};t.loc.source={body:'#import "./current-user-whisper-threads-node-fragment.gql"\nquery Whispers_Whispers_UserWhisperThreads($cursor: Cursor) {\ncurrentUser {\nid\nlogin\nwhisperThreads(first: 10 after: $cursor) {\nedges {\ncursor\nnode {\n...currentUserWhisperThreadsNode\n}\n__typename\n}\n__typename\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,n)})),e.definitions&&e.definitions.forEach((function(e){a(e,n)}))}t.definitions=t.definitions.concat(i(465724).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)})));var d={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;a(e,n),d[e.name.value]=n}})),e.exports=t,e.exports.Whispers_Whispers_UserWhisperThreads=function(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=d[n]||new Set,r=new Set,a=new Set;for(t.forEach((function(e){a.add(e)}));a.size>0;){var o=a;a=new Set,o.forEach((function(e){r.has(e)||(r.add(e),(d[e]||new Set).forEach((function(e){a.add(e)})))}))}return r.forEach((function(n){var t=s(e,n);t&&i.definitions.push(t)})),i}(t,"Whispers_Whispers_UserWhisperThreads")},87565:function(e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"whisperThreadsMessageEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperMessageEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:234}};n.loc.source={body:"fragment whisperThreadsMessageEdge on WhisperMessageEdge {\ncursor\nnode {\nid\nnonce\nsentAt\neditedAt\ndeletedAt\nfrom {\nid\n__typename\n}\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},44273:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_ArchiveThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:132}};n.loc.source={body:"mutation Thread_ArchiveThread($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nisArchived\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var t={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),t[e.name.value]=n}})),e.exports=n,e.exports.Thread_ArchiveThread=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=t[n]||new Set,d=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var o=s;s=new Set,o.forEach((function(e){d.has(e)||(d.add(e),(t[e]||new Set).forEach((function(e){s.add(e)})))}))}return d.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(n,"Thread_ArchiveThread")},983240:function(e,n,i){"use strict";i.d(n,{oO:function(){return t},TH:function(){return r},Sd:function(){return a},ag:function(){return d},J2:function(){return s},pd:function(){return o},fO:function(){return u},E7:function(){return c},Nm:function(){return l},bL:function(){return m},O1:function(){return h},id:function(){return f},Rq:function(){return p},dd:function(){return v}});var t="whispers.THREAD_OPENED",r="whispers.THREAD_CLOSED",a="whispers.THREAD_COLLAPSED",d="whispers.THREAD_EXPANDED",s="whispers.THREAD_FOCUSED",o="whispers.THREAD_UNFOCUSED",u="whispers.CONTENT_RESIZED";function c(e,n){return{type:t,data:e,contentWidth:n}}function l(e,n){return{type:r,threadID:e,contentWidth:n}}function m(e,n){return{type:a,threadID:e,contentWidth:n}}function h(e,n){return{type:d,threadID:e,contentWidth:n}}function f(e){return{type:u,contentWidth:e}}function p(e,n){return{type:s,threadID:e,contentWidth:n}}function v(e,n){return{type:o,threadID:e,contentWidth:n}}},450732:function(e,n,i){"use strict";i.d(n,{r:function(){return t},N:function(){return r}});var t="whisperNotifications.WHISPER_THREAD_NOTIFIED";function r(e,n,i){return{type:t,threadID:e,afterMessageID:i,content:n}}},380113:function(e,n,i){"use strict";i.r(n),i.d(n,{PublicProps:function(){return t.PublicProps},WhisperThreadsBar:function(){return S}});var t={};i.r(t),i.d(t,{C:function(){return N}});var r=i(137703),a=i(523094),d=i(983240),s=i(205782),o=i(854453),u=i(570655),c=i(129989),l=i(667294),m=i(47345),h=i(408892),f=i(831642),p=i(912654),v=i(987145),k=i(344689),g=i(7635),D=i(835427),I=i(325930),_=i(445489),y=p.P.wrap((function(){return Promise.all([i.e(54736),i.e(99731)]).then(i.bind(i,249588))}),"ThreadsDisplay",{failSilently:!0,placeholder:null}),N=function(e){function n(n){var i=e.call(this,n)||this;return i.logger=f.kg.withCategory("whispers"),i.getThreadsById=(0,h.M)((function(e){return(0,I.s)(e)})),i.getThreadsFromData=(0,h.M)((function(e){return e&&e.whisperThreads&&e.whisperThreads.edges.map((function(e){return e.node}))||[]})),i.archiveThread=function(e){var n=i.threadsByID[e];n&&(i.props.closeThread(e),i.props.data.currentUser&&(0,_.Xj)(e),(0,D.Z)(n))},i.handleThreadDataReport=function(e,n){i.threadsByID[e]||(0,k.rh)(g,{cursor:void 0},(function(e){return e.currentUser&&e.currentUser.whisperThreads?c(e,(function(e){return e.currentUser.whisperThreads.edges}),(function(e){return(0,u.__spreadArrays)([{cursor:"0",node:(0,u.__assign)((0,u.__assign)({},n),{isArchived:!1}),__typename:"WhisperThreadEdge"}],e)})):e}),void 0,i.props.client)},i.state={renderError:!1},i}return(0,u.__extends)(n,e),n.prototype.componentDidCatch=function(e,n){var i=this;this.setState({renderError:!0},(function(){f.$6.stats.recordComponentError("Whispers"),i.logger.errorAndReport(e,"A unhandled exception occurred in the component hierarchy",{info:n})}))},n.prototype.render=function(){var e=!this.props.openedThreads||0===this.props.openedThreads.length;return this.props.data.currentUser&&this.props.data.currentUser.id&&!this.state.renderError&&this.props.isVisible&&!e?l.createElement(y,{openedThreads:this.props.openedThreads,currentUserID:this.props.data.currentUser.id,reportThreadData:this.handleThreadDataReport,archiveThread:this.archiveThread,theatreModeEnabled:this.props.theatreModeEnabled,rightColumnExpanded:this.props.rightColumnExpanded&&this.props.rightColumnPositionedBeside,rightColumnWidth:this.props.rightColumnWidth,uiContext:this.props.uiContext}):null},Object.defineProperty(n.prototype,"threadsByID",{get:function(){var e=this.getThreadsFromData(this.props.data.currentUser);return this.getThreadsById(e)},enumerable:!0,configurable:!0}),n=(0,u.__decorate)([m.CG,(0,v.jb)(g,{props:function(e){return(0,u.__assign)({},e)}})],n)}(l.Component);var S=(0,r.$j)((function(e){return{isVisible:(0,a.u4)(e),rightColumnExpanded:e.ui.rightColumnExpanded,rightColumnPositionedBeside:e.ui.rightColumnPositionedBeside,rightColumnWidth:e.ui.rightColumnWidth,theatreModeEnabled:e.ui.theatreModeEnabled,openedThreads:e.whispers.display.openedIDs.map((function(n){return(0,s.wO)(e,n)}))}}),(function(e){return{openThread:function(n){return e(d.E7(n,(0,o.U)()))},closeThread:function(n){return e(d.Nm(n,(0,o.U)()))}}}))(N)},205782:function(e,n,i){"use strict";i.d(n,{Aj:function(){return g},wO:function(){return v}});var t=i(14890),r=i(831642),a=i(570655),d=i(129989),s=i(983240),o=310;function u(e){if(0===e.openedIDs.length)return 0;for(var n=0,i=0,t=e.openedIDs;i<t.length;i++){var r=t[i],a=e.byID[r];a.hidden||(n+=a.collapsed?234:o)}return n}function c(e){var n=(0,a.__spreadArrays)(e.openedIDs),i=n.pop();return i&&e.focusedID===i&&n.length>0&&(n.pop(),n.push(i)),d(e,(function(e){return e.openedIDs}),(function(){return n}))}function l(e,n){var i=e.orderedIDs.filter((function(n){return!e.openedIDs.includes(n)}));return i.length>0?m(e,i[0],n):e}function m(e,n,i){var t=i-u(e),r=(0,a.__assign)({},e);return r.openedIDs.includes(n)||(t<o&&(r=c(r)),r=d(r,(function(e){return e.openedIDs}),(function(e){return e.push(n),e}))),r}function h(e,n,i){if(!e.byID[n])return e;var t=d(e,(function(e){return e.byID}),(function(e){return e[n].collapsed=!1,e}));return t.focusedID=n,u(e)>i&&(t=c(t)),t}var f=i(450732);var p=(0,t.UY)({display:function(e,n){switch(void 0===e&&(e={byID:{},orderedIDs:[],openedIDs:[],focusedID:""}),n.type){case s.oO:var i=(r=(0,a.__assign)({},e)).byID[n.data.threadID],t=r.openedIDs.includes(n.data.threadID);return i||(r=d(r,(function(e){return e.orderedIDs}),(function(e){return e.push(n.data.threadID),e})),r=d(r,(function(e){return e.byID}),(function(e){return e[n.data.threadID]=n.data,e}))),r.openedIDs.includes(n.data.threadID)&&!r.byID[n.data.threadID].hidden||(r.byID[n.data.threadID].hidden=n.data.hidden),n.data.ignoreCollapseIfOpen||n.data.collapsed||(r.focusedID=n.data.threadID),r=m(r,n.data.threadID,n.contentWidth),(!t||t&&!n.data.ignoreCollapseIfOpen)&&(n.data.collapsed||(r=h(r,n.data.threadID,n.contentWidth))),r;case s.TH:if(!e.byID[n.threadID])return e;var r=d(e,(function(e){return e.byID}),(function(e){return delete e[n.threadID],e}));return r=d(r,(function(e){return e.orderedIDs}),(function(e){return e.filter((function(e){return e!==n.threadID}))})),r=d(r,(function(e){return e.openedIDs}),(function(e){return e.filter((function(e){return e!==n.threadID}))})),e.focusedID===n.threadID&&(r.focusedID=r.openedIDs[0]),l(r,n.contentWidth);case s.Sd:return e.byID[n.threadID]?(e.focusedID===n.threadID&&(e.focusedID=""),d(e,(function(e){return e.byID}),(function(e){return e[n.threadID].collapsed=!0,e}))):e;case s.ag:return h(e,n.threadID,n.contentWidth);case s.J2:return d(e,(function(e){return e.focusedID}),(function(){return n.threadID}));case s.pd:return d(e,(function(e){return e.focusedID}),(function(e){return e===n.threadID?"":e}));case s.fO:var f=u(e);if(f>n.contentWidth){if(e.openedIDs.length<=1)return e;for(var p=(0,a.__assign)({},e);f>n.contentWidth&&p.openedIDs.length>1;)f=u(p=c(p));return p}if(n.contentWidth-f>=o){var v=Math.floor((n.contentWidth-f)/o),k=Math.min(v,e.orderedIDs.length-e.openedIDs.length);if(0===k)return e;p=(0,a.__assign)({},e);for(var g=0;g<k;g++)if((p=l(p,n.contentWidth)).openedIDs.length>1)for(var D=p.openedIDs,I=D.length,_=0,y=p.orderedIDs;_<y.length;_++){var N=y[_];if(D[I-1]===N){var S=D.splice(I-2,1);D.push(S[0]);break}if(D[I-2]===N)break}return p}return e;default:return e}},notifications:function(e,n){switch(void 0===e&&(e={byThreadID:{}}),n.type){case f.r:return e.byThreadID[n.threadID]?d(e,(function(e){return e.byThreadID[n.threadID]}),(function(e){return(0,a.__spreadArrays)([{threadID:n.threadID,afterMessageID:n.afterMessageID,content:n.content}],e)})):d(e,(function(e){return e.byThreadID}),(function(e){var i;return(0,a.__assign)(((i={})[n.threadID]=[{threadID:n.threadID,afterMessageID:n.afterMessageID,content:n.content}],i),e)}));default:return e}}});function v(e,n){return e.whispers?e.whispers.display.byID[n]:null}var k=[];function g(e,n){return e.whispers.notifications.byThreadID[n]||k}r.$6.store.registerReducer("whispers",p)},835427:function(e,n,i){"use strict";i.d(n,{Z:function(){return u}});var t=i(570655),r=i(129989),a=i(831642),d=i(344689),s=i(7635),o=i(44273);function u(e){var n=e.id,i=(0,d.y0)({threadID:n,isArchived:!0},{updateWhisperThread:{thread:{__typename:"WhisperThread",id:n,isArchived:!0},__typename:"UpdateWhisperThreadPayload"}});e.lastMessage?a.$6.apollo.client.mutate((0,t.__assign)({mutation:o},i)):(0,d.rh)(s,{},(function(e){var i,a;return(null===(a=null===(i=null==e?void 0:e.currentUser)||void 0===i?void 0:i.whisperThreads)||void 0===a?void 0:a.edges)?r(e,(function(e){return e.currentUser.whisperThreads.edges}),(function(e){var i=e.find((function(e){return e.node.id===n})),r=e.filter((function(e){return e.node.id!==n}));return i?(0,t.__spreadArrays)([{cursor:"0",node:(0,t.__assign)((0,t.__assign)({},i.node),{isArchived:!0}),__typename:"WhisperThreadEdge"}],r):r})):e}))}},325930:function(e,n,i){"use strict";i.d(n,{s:function(){return r}});var t=i(570655),r=function(e){for(var n={},i=0,r=e;i<r.length;i++){var d=r[i],s=a(d);d.id&&s&&(n[d.id]=(0,t.__assign)({},s))}return n},a=function(e){return e.messages?{id:e.id,lastMessage:e.messages.edges.map((function(e){return e.node})).find((function(e){return!e.deletedAt}))||null,messageHistory:e.messages.edges.map((function(e){return e.node})).slice(0,-1),unreadMessagesCount:e.unreadMessagesCount,participants:e.participants.map((function(e){return e?(0,t.__assign)((0,t.__assign)({},e),{displayBadges:[],self:null}):null})),spamInfo:e.spamInfo,muted:e.isMuted,archived:e.isArchived}:null}},854453:function(e,n,i){"use strict";i.d(n,{c:function(){return r},U:function(){return a}});var t=null;function r(e){t=e}function a(){return t?+window.getComputedStyle(t).getPropertyValue("width").replace("px",""):1e3}}}]);