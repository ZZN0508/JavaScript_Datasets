define("indexnew:component/ecommerce/ecommerce.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:component/ecommerce/countdown.js","indexnew:component/hotgoods/hotgoods.js"],function(e,c,o,t,n,a,i){var p=n,s=a,r=i,m="CLOSE_ECOMMERCE",l="CLOSE_ECOMMERCE_TIME";function d(){try{var c=0,e=null,o=p(".product-banner"),t=p(".product-list"),n=t.children();n.removeClass("product-active");var a=n.eq(0).width(),i=n.size(),s=-i*a+40,r=n.clone(),m=n.clone();t.append(r),t.prepend(m),t.css("left",s),t.children().eq(i).addClass("product-active");var l=t.children("li");function d(){try{i<++c&&(c=1,t.css({left:s})),t.animate({left:"-="+a+"px"}),l.removeClass("product-active"),l.eq(c+i).addClass("product-active")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:76})}}e=setInterval(d,4e3),o.on("mouseenter",function(){try{clearInterval(e)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:43})}}),o.on("mouseleave",function(){try{clearInterval(e),e=setInterval(d,4e3)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:49})}}),p(".leftCover").click(function(e){try{d(),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:55})}}),p(".rightCover").click(function(e){try{!function(){try{--c<-(i-1)&&(c=0,t.css({left:s-a})),t.animate({left:"+="+a+"px"}),l.removeClass("product-active"),l.eq(c+i).addClass("product-active")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:91})}}(),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:61})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:92})}}function g(e){try{for(var t=p(e).find(".time-detail"),c=0;c<t.length;c++)!function(o){try{var e=t.eq(o),c=e.data("remain");new s(e,{format:"<span>hh</span><i>:</i><span>mm</span><i>:</i><span>ss</span>",lastTime:c,cb:function(){try{var e=p(".product").eq(o),c=e.data("detail_url");e.find(".coupon-purchase").attr("href",c),e.find(".activity").addClass("activity-end"),e.find(".activity-title").text("å·²ç»“æŸï¼š")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:118})}}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:120})}}(c)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:122})}}function h(){try{for(var l=p(".atmosphere-ul"),e=0;e<l.length;e++)!function(e){try{for(var c=l.eq(e),o=c.find(".word"),t=o.height(),n=o.css("marginBottom"),n=parseFloat(n.replace("px","")),a=c.children(),i=a.length,e=0;e<a.length;e++){var s=c.children().eq(e).clone();c.append(s)}var r=0,m=0;setInterval(function(){try{i<++r&&(c.css({top:0}),r=1,m=0),m-=t+n,c.animate({top:m},3e3)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:162})}},7e3)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:163})}}(e)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:165})}}function f(){try{!function(){try{var e=window.ecommerceData,c=window.ecommercePosition;if(!e||!e.data||e.data.length<=0)return;var o=e.data,t=e.more_url,n='<div class="left-ecommerce-box"><div class="haohuimai" alog-alias="ecommerce" monkey="ecommerce">    <div class="haohuimai-title">        <a class="haohuimai-logo" monkey="logo" href="'+t+'">            <span class="haohuimai-logo-img"></span>        </a>        <a class="more-url" monkey="more-products" href="'+t+'">æ›´å¤šå¥½ç‰©            <span class="more-icon"></span>        </a>    </div>    <div class="product-banner-wrap">        <div class="product-banner">            <ul class="product-list">';for(let e=0;e<o.length;e++){var a=o[e],i="",s="",r="",m="",m=0<a.end_time?(i=a.url,r="é™æ—¶æŠ¢ï¼š","é¢†åˆ¸è´­ä¹°"):(i=a.detail_url,s="activity-end",r="å·²ç»“æŸï¼š","åŽ»è´­ä¹°");if(n+='<li class="product" data-detail_url="'+a.detail_url+'"><a class="coupon-purchase" monkey="product" alog-text="'+a.title+' " href="'+i+'" target="_blank">    <div class="product-show">        <img class="product-img" monkey="imgClick" src="'+a.imgurl+'" onerror="this.src=\'http://t11.baidu.com/it/u=3049637327,2599848241&fm=179&app=35&f=PNG?w=560&h=560&s=39843C7A4B636F241C54C4DA0300E0B1\';"/>        <div class="product-title">            <img class="icon" src="'+a.iconimageurl+'">            <span class="title" monkey="titleClick">'+a.title+"</span>        </div>    </div>",a.atmosphere_words&&0<a.atmosphere_words.length){n+='<div class="atmosphere-area"><ul class="atmosphere-ul">';var l=a.atmosphere_words;for(let e=0;e<l.length;e++)n+='<li class="word">    <span>'+l[e]+"</span></li>";n+="</ul></div>"}n+='<div class="product-info">        <div class="activity '+s+'" monkey="timeClick">            <span class="activity-title">'+r+'</span>            <span class="time-detail" data-remain="'+a.end_time+'">                <span></span>                <i>:</i>                <span></span>                <i>:</i>                <span></span>            </span>        </div>        <div class="price" monkey="priceClick">            <span class="discount-price"><i>Â¥</i>'+a.special_price+'</span>            <span class="initial-price"><i>Â¥</i>'+a.original_price+'</span>        </div>        <div class="product-link" monkey="purchaseBtnClick">'+m+'</div>    </div>    <div class="leftCover"></div>    <div class="rightCover"></div></a></li>'}n+='</ul>          </div>      </div>  </div>  <div class="hot-goods" alog-alias="hot-goods" monkey="hot-goods"></div>  <a class="close-btn" monkey="ecommerce-close" alog-text="ecommerce-close-btn"></a>  <a class="expand-btn" monkey="ecommerce-expand" alog-text="ecommerce-expand-btn"></a>  </div>',"2"===c?p("#bottom-be").before(n):p("#leftWrapperBox").prepend(n)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:354})}}(),d(),g(".haohuimai"),h(),function(){try{p(".close-btn").click(function(){try{try{var e=+new Date;window.localStorage.setItem(m,"true"),window.localStorage.setItem(l,e)}catch(e){}p(".left-ecommerce-box").hide()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:179})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:180})}}(),function(){try{var c=p("#leftWrapperBox").find(".hot-goods"),o=p("#leftWrapperBox").find(".expand-btn"),t=[];let e=0;var n=function(){try{var c;return function(e){try{return c||(c=new r(e),g(".hot-goods")),c}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:199})}}}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:200})}}();p.ajax("/api/getgoodthing?pageSize=3",{dataType:"json",jsonpCallback:"setRecom"}).success(function(e){try{0<(t=e.list||[]).length?(o.show(),p(".haohuimai").addClass("hasBangdan")):(o.hide(),p(".haohuimai").removeClass("hasBangdan"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:215})}}).fail(function(e){try{console.log(e)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:218})}}),o.click(function(){try{e++%2==0?(n.call(this,{container:c,data:t,pageSize:3}),c.show(),p(this).addClass("slideUp")):(c.hide(),p(this).removeClass("slideUp"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:235})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:236})}}()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:362})}}!function(){try{var e,c,o=!1,t=!0;try{o=window.localStorage.getItem(m),e=window.localStorage.getItem(l),e=parseInt(e,10)}catch(e){}if(e&&(c=+new Date,t=+new Date(e+6048e5)<c),"true"===o&&!t)return;f()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/ecommerce/ecommerce.js",ln:391})}}(),c.exports={}});
