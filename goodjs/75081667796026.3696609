!function(e){"use strict";function s(){var e;return babelHelpers.classCallCheck(this,s),e={fontFamily:[{label:"Monospaced Serif",value:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace"},{label:"Proportional Serif",value:"'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif"},{label:"Monospaced Sans-Serif",value:"'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace"},{label:"Proportional Sans-Serif",value:"Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif"},{label:"Casual",value:"'Comic Sans MS', Impact, Handlee, fantasy"},{label:"Cursive",value:"'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive"},{label:"Small Capitals",value:"'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps"}],fontColor:[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}],size:[{label:"70%",value:"x-small"},{label:"100%",value:"small"},{label:"150%",value:"medium"},{label:"200%",value:"large"},{label:"300%",value:"x-large"}],fontOpacity:[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}],backgroundColor:[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}],backgroundOpacity:[{label:"0%",value:0},{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}],edgeType:[{label:"None",value:"text-shadow: 0px 0px 0px"},{label:"Depressed",value:"text-shadow: 0px 1px 0px"},{label:"Left Drop Shadow",value:"text-shadow: -3px 3px 2px"},{label:"Raised",value:"text-shadow: 0px 1px 1px"},{label:"Right Drop Shadow",value:"text-shadow: 3px 3px 2px"},{label:"Uniform",value:"text-shadow: 0px 0px 4px"}],edgeColor:[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}],edgeOpacity:[{label:"0%",value:0},{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]},babelHelpers.defineProperty(e,"fontOpacity",[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]),babelHelpers.defineProperty(e,"scroll",[{label:"Pop-out",value:"popout"},{label:"Roll-on",value:"rollon"},{label:"Paint-on",value:"painton"}]),babelHelpers.defineProperty(e,"windowColor",[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}]),babelHelpers.defineProperty(e,"windowOpacity",[{label:"0%",value:0},{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]),e}var t,a=(babelHelpers.createClass(ut,[{key:"add",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.contains(e)||(!0===t?this.tokens.unshift(e):this.tokens.push(e))}},{key:"contains",value:function(e){return-1!==this.tokens.indexOf(e)}},{key:"item",value:function(e){return this.tokens[e]||null}},{key:"remove",value:function(e){e=this.tokens.indexOf(e);-1!==e&&this.tokens.splice(e,1)}},{key:"toggle",value:function(e){this.contains(e)?this.remove(e):this.add(e)}},{key:"update",value:function(e){for(var t in e)e[t]?this.add(t):this.remove(t);var a=this.toString();a!=this.component.state.className&&this.component.setState({className:a})}},{key:"toString",value:function(){return this.tokens.join(" ")}}]),ut),n=(t=React.Component,babelHelpers.inherits(pt,t),babelHelpers.createClass(pt,[{key:"getLocalizedString",value:function(e){return this.player.getLocalizedString(e)}},{key:"onlanguagechange",value:function(){this.setState({l10n:this.player.l10n})}},{key:"bindHandlers",value:function(e){var t=this;null==e||e.length<=0||e.forEach(function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))})}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.state,n=this.props;if(null!=t)for(var s in t)if(t[s]!=a[s])return!0;if(null!=e)for(var l in e)if(e[l]!=n[l])return!0;return!1}},{key:"componentWillMount",value:function(){var t=this;this.playerEventMap.forEach(function(e){t[e.key]=t[e.key].bind(t),t.player.addEventListener(e.type,t[e.key])})}},{key:"componentWillUnmount",value:function(){var t=this;this.playerEventMap.forEach(function(e){t.player.removeEventListener(e.type,t[e.key])})}},{key:"render",value:function(){return React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{className:this.className}),this.textContent,this.children)}},{key:"player",get:function(){return this.props.player||this.context.player}},{key:"config",get:function(){return this.props.config||this.context.config}},{key:"l10n",get:function(){return this.state.l10n}},{key:"plugin",get:function(){return this.context.plugin}},{key:"className",get:function(){var e=this.props.className||"";return(e+=" "+this.classList).trim()}},{key:"textContent",get:function(){return this.props.textContent||this.state.textContent}},{key:"children",get:function(){return this.props.children||[]}},{key:"element",get:function(){return this.refs.element}},{key:"dom",get:function(){return this.element||ReactDOM.findNode(this)}},{key:"data",get:function(){return this.props.data||{}}},{key:"playerEventMap",get:function(){var a=this,n=[];return null==this.player||Object.values(akamai.amp.Events).forEach(function(e){var t="on"+e;"function"==typeof a[t]&&n.push({key:t,type:e})}),n}},{key:"propsList",get:function(){var e=this.props;return e.className,e.classList,e.data,e.textContent,babelHelpers.objectWithoutProperties(e,["className","classList","data","textContent"])}}],[{key:"contextTypes",get:function(){return{player:PropTypes.object,config:PropTypes.object,plugin:PropTypes.object}}}]),pt),l=(babelHelpers.inherits(ct,n),babelHelpers.createClass(ct,[{key:"addComponent",value:function(e){var t=this.state.components.slice();null==e.key&&(e.key=akamai.amp.Utils.createUID()),t.push(e),this.setState({components:t})}},{key:"removeComponent",value:function(t){var e=this.state.components.filter(function(e){return e!=t});this.setState({components:e})}},{key:"clear",value:function(){this.setState({components:[]})}},{key:"appendChild",value:function(e){var t=this.dom;null!=t&&t.appendChild(e)}},{key:"removeChild",value:function(e){var t=this.dom;null!=t&&t.removeChild(e)}},{key:"components",get:function(){return this.state.components}},{key:"children",get:function(){return babelHelpers.get(ct.prototype.__proto__||Object.getPrototypeOf(ct.prototype),"children",this).concat(this.state.components)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ct.__proto__||Object.getPrototypeOf(ct),"contextTypes",this)}}]),ct),i=(babelHelpers.inherits(rt,n),babelHelpers.createClass(rt,[{key:"onMouseDown",value:function(e){this.mouseFocus=!0}},{key:"onMouseUp",value:function(e){this.mouseFocus=!1}},{key:"onMouseOver",value:function(e){}},{key:"onMouseOut",value:function(e){}},{key:"onFocus",value:function(e){1!=this.mouseFocus&&(this.focused=!0,this.classList.update({"amp-focus":!0}),this.player.viewComponent.scrollTop=0)}},{key:"onBlur",value:function(e){1!=this.mouseFocus&&(this.focused=!1,this.classList.update({"amp-focus":!1}))}},{key:"onKeyDown",value:function(e){1!=this.mouseFocus&&(this.onKeyPress(e),"keypress"!=e.type||13!=e.keyCode&&32!=e.keyCode||this.onAction())}},{key:"onAction",value:function(){this.onClick()}},{key:"onKeyPress",value:function(e){}},{key:"onClick",value:function(e){}},{key:"change",value:function(e){var t=this.propsList.onChange||this.onChange;"function"==typeof t&&t(e)}},{key:"render",value:function(){return React.createElement("button",babelHelpers.extends({ref:"element"},this.propsList,{className:this.className}),this.textContent,this.children)}},{key:"aria",get:function(){return{"aria-label":this.title,role:"button"}}},{key:"propsList",get:function(){var t=this,e=babelHelpers.get(rt.prototype.__proto__||Object.getPrototypeOf(rt.prototype),"propsList",this),a=(e.altText,babelHelpers.objectWithoutProperties(e,["altText"]));a.className=this.className,a.tabIndex="0",a.onMouseDown=function(e){return(t.props.onMouseDown||t.onMouseDown)(e)},a.onMouseUp=function(e){return(t.props.onMouseUp||t.onMouseUp)(e)},a.onMouseOver=function(e){return(t.props.onMouseOver||t.onMouseOver)(e)},a.onMouseOut=function(e){return(t.props.onMouseOut||t.onMouseOut)(e)},a.onFocus=function(e){return(t.props.onFocus||t.onFocus)(e)},a.onBlur=function(e){return(t.props.onBlur||t.onBlur)(e)},a.onKeyDown=function(e){return(t.props.onKeyDown||t.onKeyDown)(e)},a.onClick=function(e){return(t.props.onClick||t.onClick)(e)};var n,s=this.aria;for(n in s)a[n]=s[n];return a}},{key:"altText",get:function(){return this.props.altText||this.state.altText}},{key:"title",get:function(){return this.player.getLocalizedString(this.altText)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(rt.__proto__||Object.getPrototypeOf(rt),"contextTypes",this)}}]),rt),o=(babelHelpers.inherits(ot,i),babelHelpers.createClass(ot,[{key:"onClick",value:function(){this.panel.toggle()}},{key:"onKeyDown",value:function(e){this.panel.onKeyDown(e)}},{key:"propsList",get:function(){var e=babelHelpers.get(ot.prototype.__proto__||Object.getPrototypeOf(ot.prototype),"propsList",this);return e.panel,babelHelpers.objectWithoutProperties(e,["panel"])}},{key:"panel",get:function(){return this.plugin.refs[this.props.panel]}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ot.__proto__||Object.getPrototypeOf(ot),"contextTypes",this)}}]),ot),r=(babelHelpers.inherits(it,i),babelHelpers.createClass(it,[{key:"onplaying",value:function(){this.setState({altText:"MSG_PAUSE"})}},{key:"onpause",value:function(){this.setState({altText:"MSG_PLAY"})}},{key:"onended",value:function(){this.setState({altText:"MSG_REPLAY"})}},{key:"onClick",value:function(){var e=this.player;switch(e.playState){case"ended":this.plugin.replay();break;case"ready":case"paused":e.play();break;default:e.pause()}}}],[{key:"contextTypes",get:function(){return babelHelpers.get(it.__proto__||Object.getPrototypeOf(it),"contextTypes",this)}}]),it),c=(babelHelpers.inherits(lt,i),babelHelpers.createClass(lt,[{key:"onClick",value:function(){var e=this.player;"ended"===e.playState?this.plugin.replay():e.play()}}],[{key:"contextTypes",get:function(){return babelHelpers.get(lt.__proto__||Object.getPrototypeOf(lt),"contextTypes",this)}}]),lt),p=(babelHelpers.inherits(st,n),babelHelpers.createClass(st,null,[{key:"contextTypes",get:function(){return babelHelpers.get(st.__proto__||Object.getPrototypeOf(st),"contextTypes",this)}}]),st),u=(babelHelpers.createClass(nt,null,[{key:"formatTimecode",value:function(e,t){if(e=parseInt(e),isNaN(e))return"00:00";var a=nt.formatZeroFill(e%60);return e=parseInt(e/60),a=nt.formatZeroFill(e%60)+":"+a,0<(e=parseInt(e/60))&&(a=nt.formatZeroFill(e)+":"+a),a=3600<=t&&5===a.length?"00:"+a:a}},{key:"formatZeroFill",value:function(e){var t=e.toString();return t=e<10?"0"+t:t}},{key:"round",value:function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}},{key:"getEventPos",value:function(e){return{x:e.pageX-(window.scrollX||window.pageXOffset)||e.targetTouches[0].pageX-window.scrollX,y:e.pageY-(window.scrollY||window.pageYOffset)||e.targetTouches[0].pageY-window.scrollY}}},{key:"componentEnabled",value:function(e,t){var a=e.config[t];return null!=e.player[t]&&!1!==e.player[t].enabled||null!=a&&!1!==a&&!1!==a.enabled&&!0!==a.disabled}},{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}]),nt),h=(babelHelpers.inherits(at,n),babelHelpers.createClass(at,[{key:"onmediachange",value:function(e){this.setState({currentTime:0})}},{key:"ontimeupdate",value:function(e){this.setState({currentTime:Math.round(e.detail)})}},{key:"onseeking",value:function(){this.setState({currentTime:Math.round(this.player.currentTime)})}},{key:"ondurationchange",value:function(e){this.setState({duration:Math.round(e.detail)})}},{key:"render",value:function(){return React.createElement("span",{className:"amp-current-time"},u.formatTimecode(this.state.currentTime,this.state.duration))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(at.__proto__||Object.getPrototypeOf(at),"contextTypes",this)}}]),at),b=(babelHelpers.inherits(tt,n),babelHelpers.createClass(tt,[{key:"onislive",value:function(e){this.setState({isLive:e.detail})}},{key:"liveClickHandler",value:function(){this.state.isLive||this.player.goLive()}},{key:"render",value:function(){return React.createElement("span",{ref:"element",className:"amp-live-label",onClick:this.liveClickHandler.bind(this)},this.getLocalizedString(this.state.isLive?"MSG_LIVE":"MSG_GO_LIVE"))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(tt.__proto__||Object.getPrototypeOf(tt),"contextTypes",this)}}]),tt),y=(babelHelpers.inherits(et,n),babelHelpers.createClass(et,[{key:"onmediachange",value:function(e){this.setState({duration:Math.round(this.player.duration)})}},{key:"ondurationchange",value:function(e){this.setState({duration:Math.round(e.detail)})}},{key:"render",value:function(){return React.createElement("span",{className:"amp-duration"},u.formatTimecode(this.state.duration,this.state.duration))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(et.__proto__||Object.getPrototypeOf(et),"contextTypes",this)}}]),et),d=(babelHelpers.inherits(Qe,i),babelHelpers.createClass(Qe,[{key:"format",value:function(e){return e}},{key:"update",value:function(e){return null==e.percent&&null!=e.value&&(e.percent=e.value/this.max),null==e.value&&null!=e.percent&&(e.value=Math.round(e.percent*this.max)),null==e.valueText&&null!=e.value&&(e.valueText=this.format(e.value)+" "+this.getLocalizedString("MSG_OF")+" "+this.format(this.max)),u.isNumber(e.value)||delete e.value,u.isNumber(e.percent)||delete e.percent,this.setState(e),e}},{key:"move",value:function(e){var t=this.refs.element.getBoundingClientRect(),e=u.getEventPos(e);"vertical"===this.direction?this.percent=1-(e.y-t.top)/t.height:this.percent=(e.x-t.left)/t.width}},{key:"onClick",value:function(e){"ready"!=this.player.playState&&this.move(e)}},{key:"onAction",value:function(){}},{key:"onKeyPress",value:function(e){e=e.keyCode;39==e||38==e?this.percent+=this.increment:37!=e&&40!=e||(this.percent-=this.increment)}},{key:"onHandleMouseDown",value:function(e){"ready"!=this.player.playState&&(e.stopPropagation(),e.preventDefault(),this.dragging=!0,window.addEventListener("mouseup",this.onHandleMouseUp),window.addEventListener("mousemove",this.onHandleMouseMove),window.addEventListener("touchend",this.onHandleMouseUp),window.addEventListener("touchmove",this.onHandleMouseMove))}},{key:"onHandleMouseMove",value:function(e){this.move(e)}},{key:"onHandleMouseUp",value:function(e){e.stopPropagation(),e.preventDefault(),this.dragging=!1,window.removeEventListener("mouseup",this.onHandleMouseUp),window.removeEventListener("mousemove",this.onHandleMouseMove),window.removeEventListener("touchend",this.onHandleMouseUp),window.removeEventListener("touchmove",this.onHandleMouseMove),this.change(this.update({value:this.value,percent:this.percent}))}},{key:"render",value:function(){var e=u.round(100*this.percent,2)+"%",t=u.round(100*this.range,2)+"%";return React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{onMouseMove:this.onMouseMove}),React.createElement("div",{ref:"track",className:"amp-track"}),React.createElement("div",{ref:"range",className:"amp-range",style:{width:t}}),React.createElement("div",{ref:"value",className:"amp-value",style:{width:e}}),this.children,React.createElement("div",{ref:"handle",className:"amp-handle",style:{left:e},onMouseDown:this.onHandleMouseDown,onTouchStart:this.onHandleMouseDown}))}},{key:"percent",set:function(e){e=akamai.amp.Utils.clamp(e,0,1),this.percent!=e&&this.change(this.update({percent:e}))},get:function(){return this.state.percent}},{key:"value",set:function(e){e=akamai.amp.Utils.clamp(e,this.min,this.max),this.value!=e&&this.change(this.update({value:e}))},get:function(){return this.state.value}},{key:"range",set:function(e){e=akamai.amp.Utils.clamp(e,this.min,this.max),this.range!=e&&this.setState({range:e})},get:function(){return this.state.range}},{key:"min",set:function(e){this.min!=e&&this.setState({min:e})},get:function(){return this.state.min}},{key:"max",set:function(e){this.max!=e&&this.setState({max:e})},get:function(){return this.state.max}},{key:"dragging",set:function(e){this.dragging!=e&&(this.setState({dragging:e}),this.classList.update({"amp-dragging":e}),this.plugin.dragging=e)},get:function(){return this.state.dragging}},{key:"markers",get:function(){return this.refs.markers}},{key:"aria",get:function(){return Object.assign(babelHelpers.get(Qe.prototype.__proto__||Object.getPrototypeOf(Qe.prototype),"aria",this),{role:"slider","aria-valuemin":this.state.min,"aria-valuemax":Math.round(this.state.max),"aria-valuenow":Math.round(this.state.value),"aria-valuetext":this.state.valueText})}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Qe.__proto__||Object.getPrototypeOf(Qe),"contextTypes",this)}}]),Qe),m=(babelHelpers.inherits(Je,d),babelHelpers.createClass(Je,[{key:"format",value:function(e){return u.formatTimecode(e,this.max)}},{key:"onready",value:function(){this.player.addEventListener("adbreakend",this.ondurationchange),this.player.addEventListener("adtimeupdate",this.onadtimeupdate),this.player.addEventListener("addurationchange",this.onaddurationchange)}},{key:"onmediachange",value:function(){this.update({value:0}),this.range=0}},{key:"ontimeupdate",value:function(){this.dragging||this.update({value:this.player.currentTime})}},{key:"onseeking",value:function(){this.update({value:this.player.currentTime})}},{key:"onprogress",value:function(e){this.range=e.detail}},{key:"oncueschange",value:function(e){var a,e=e.detail,n=this.markers;n.clear(),null==e||e.length<=0||(a=this.player.duration,e.forEach(function(e,t){e.startTime<=0||n.addComponent(React.createElement("div",{className:"amp-marker",style:{left:e.startTime/a*100+"%"},key:t}))}))}},{key:"ondurationchange",value:function(e){this.increment=10/this.player.duration,this.max=this.player.duration,this.update({value:"breakend"==e.type&&"preroll"==e.data.type?0:this.player.currentTime})}},{key:"onadtimeupdate",value:function(e){"ready"!=this.player.playState&&this.update({value:e.detail})}},{key:"onaddurationchange",value:function(e){this.max=e.detail.duration}},{key:"onMouseMove",value:function(e){var t=this.refs.element.getBoundingClientRect(),t=(u.getEventPos(e).x-t.left)/t.width;this.setState({textPercent:akamai.amp.Utils.clamp(u.round(t,4),0,1)})}},{key:"onKeyPress",value:function(e){this.player.ads&&this.player.ads.inProgress||"ready"==this.player.playState||babelHelpers.get(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"onKeyPress",this).call(this,e)}},{key:"onHandleMouseDown",value:function(e){babelHelpers.get(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"onHandleMouseDown",this).call(this,e),this.isTouch&&this.setState({textVisible:"visible"})}},{key:"onHandleMouseMove",value:function(e){babelHelpers.get(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"onHandleMouseMove",this).call(this,e),this.onMouseMove(e)}},{key:"onHandleMouseUp",value:function(e){babelHelpers.get(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"onHandleMouseUp",this).call(this,e),this.isTouch&&this.setState({textVisible:"hidden"})}},{key:"onChange",value:function(e){this.dragging||(this.player.currentTime=e.value)}},{key:"propsList",get:function(){var e=babelHelpers.get(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"propsList",this);return e.onMouseMove=this.onMouseMove,e}},{key:"markers",get:function(){return this.refs.markers}},{key:"children",get:function(){var e=(this.state.textPercent,this.refs.element?this.refs.text.clientWidth/1.3*100/this.refs.element.clientWidth:0),t=100-e,t=akamai.amp.Utils.clamp(u.round(100*this.state.textPercent,2),e,t)+"%";return React.createElement("div",null,React.createElement(l,{ref:"markers",className:"amp-markers"}),React.createElement("div",{ref:"text",className:"amp-text",style:{left:t,visibility:this.state.textVisible}},this.format(this.state.textPercent*this.player.duration)))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Je.__proto__||Object.getPrototypeOf(Je),"contextTypes",this)}}]),Je),g=(babelHelpers.inherits($e,d),babelHelpers.createClass($e,[{key:"onready",value:function(e){this.open="vertical"!==this.direction,this.classList.update({"amp-open":this._open})}},{key:"onseeked",value:function(e){this.open=!1}},{key:"onmediachange",value:function(e){this.open=!1}},{key:"format",value:function(e){return Math.round(e)}},{key:"onvolumechange",value:function(e){this.update({percent:e.detail})}},{key:"onClick",value:function(e){this.move(e)}},{key:"onChange",value:function(e){this.player.volume=e.percent}},{key:"onMouseOver",value:function(e){this.plugin.dispatchEvent(new akamai.amp.Event("volumemouseover")),this.open=!0,clearTimeout(this.timeout)}},{key:"onMouseOut",value:function(e){var t=this;this.plugin.dispatchEvent(new akamai.amp.Event("volumemouseout")),clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.open=!1},350)}},{key:"onHandleMouseDown",value:function(e){e.stopPropagation(),e.preventDefault(),this.dragging=!0,window.addEventListener("mouseup",this.onHandleMouseUp),window.addEventListener("mousemove",this.onHandleMouseMove),window.addEventListener("touchend",this.onHandleMouseUp),window.addEventListener("touchmove",this.onHandleMouseMove)}},{key:"render",value:function(){if(0==akamai.amp.Utils.isVolumeSettable())return null;babelHelpers.get($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"render",this).call(this);var e=u.round(100*this.percent,2)+"%",t=u.round(100*this.range,2)+"%",a=React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{onMouseMove:this.onMouseMove}),React.createElement("div",{ref:"track",className:"amp-track"}),React.createElement("div",{ref:"range",className:"amp-range",style:{width:t}}),React.createElement("div",{ref:"value",className:"amp-value",style:{width:e}}),this.children,React.createElement("div",{ref:"handle",className:"amp-handle",style:{left:e},onMouseDown:this.onHandleMouseDown,onTouchStart:this.onHandleMouseDown}));return a="vertical"==this.direction?React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{onMouseMove:this.onMouseMove}),React.createElement("div",{ref:"panel",className:"amp-volume-panel"}),React.createElement("div",{ref:"track",className:"amp-track"}),React.createElement("div",{ref:"range",className:"amp-range",style:{height:t}}),React.createElement("div",{ref:"value",className:"amp-value",style:{height:e}}),this.children,React.createElement("div",{ref:"handle",className:"amp-handle",style:{bottom:e},onMouseDown:this.onHandleMouseDown,onTouchStart:this.onHandleMouseDown})):a}},{key:"open",set:function(e){"vertical"==this.direction&&(this._open=e,this.classList.update({"amp-open":this._open}))}}],[{key:"contextTypes",get:function(){return babelHelpers.get($e.__proto__||Object.getPrototypeOf($e),"contextTypes",this)}}]),$e),f=(babelHelpers.inherits(Ze,i),babelHelpers.createClass(Ze,[{key:"toggle",value:function(){return this.toggled=!this.toggled}},{key:"onClick",value:function(e){this.toggle()}},{key:"toggled",set:function(e){return e===this.state.toggled?e:(this.setState({toggled:e}),void this.change(e))},get:function(){return this.state.toggled}},{key:"propsList",get:function(){var e=babelHelpers.get(Ze.prototype.__proto__||Object.getPrototypeOf(Ze.prototype),"propsList",this);return e["aria-checked"]=this.state.toggled,e.role="switch",e}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ze.__proto__||Object.getPrototypeOf(Ze),"contextTypes",this)}}]),Ze),v=(babelHelpers.inherits(Xe,f),babelHelpers.createClass(Xe,[{key:"onChange",value:function(){var e=this.player;e.muted=!e.muted}},{key:"onMouseOver",value:function(e){this.plugin.dispatchEvent(new akamai.amp.Event("mutemouseover"))}},{key:"onMouseOut",value:function(e){this.plugin.dispatchEvent(new akamai.amp.Event("mutemouseout"))}},{key:"onvolumechange",value:function(){var e="";this.player.muted?e="amp-muted":this.player.volume<.5&&(e="amp-low"),this.setState({level:e})}},{key:"className",get:function(){return babelHelpers.get(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"className",this)+" "+this.state.level}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Xe.__proto__||Object.getPrototypeOf(Xe),"contextTypes",this)}}]),Xe),k=(babelHelpers.inherits(Ye,i),babelHelpers.createClass(Ye,[{key:"onmutechange",value:function(e){!1===e.detail&&this.setState({dismissed:!0})}},{key:"onClick",value:function(){this.player.muted=!1}},{key:"render",value:function(){return!0===this.state.dismissed?null:babelHelpers.get(Ye.prototype.__proto__||Object.getPrototypeOf(Ye.prototype),"render",this).call(this)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ye.__proto__||Object.getPrototypeOf(Ye),"contextTypes",this)}}]),Ye),_=(babelHelpers.inherits(ze,i),babelHelpers.createClass(ze,[{key:"onfullscreenchange",value:function(e){e=e.detail?"MSG_EXIT_FULLSCREEN":"MSG_ENTER_FULLSCREEN";this.setState({altText:e})}},{key:"onClick",value:function(){"normal"==this.player.displayState?this.player.enterFullScreen():this.player.exitFullScreen()}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ze.__proto__||Object.getPrototypeOf(ze),"contextTypes",this)}}]),ze),C=(babelHelpers.inherits(We,o),babelHelpers.createClass(We,null,[{key:"contextTypes",get:function(){return babelHelpers.get(We.__proto__||Object.getPrototypeOf(We),"contextTypes",this)}}]),We),H=(babelHelpers.inherits(Ve,i),babelHelpers.createClass(Ve,[{key:"focus",value:function(){this.refs.element.focus()}},{key:"onKeyDown",value:function(e){if(1!=this.mouseFocus){if(this.onKeyPress(e),"keydown"==e.type){switch(e.keyCode){case 13:case 32:this.props.onClick(e)||this.onClick(e);break;case 37:"left"===this.state.direction&&(this.props.onClick(e)||this.onClick(e));break;case 39:"right"===this.state.direction&&(this.props.onClick(e)||this.onClick(e));break;case 38:null!==this.element.previousElementSibling&&this.element.previousElementSibling.focus();break;case 40:null!==this.element.nextElementSibling&&this.element.nextElementSibling.focus()}var t,a;(9!=e.keyCode&&40!=e.keyCode||0!=e.shiftKey||null!==this.element.nextElementSibling)&&(9!=e.keyCode&&38!=e.keyCode||1!=e.shiftKey||null!==this.element.previousElementSibling)&&27!=e.keyCode||(t=void 0,0<=this.refs.element.parentNode.className.indexOf("share")?(t=4,this.plugin.refs.sharePanel.close()):(t=2,this.plugin.refs.settingsPanel.close()),a=document.getElementsByClassName("amp-control"),setTimeout(function(){a[a.length-t].focus()},1))}e.stopPropagation()}}},{key:"render",value:function(){return React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{role:"menuitem"}),this.children)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ve.__proto__||Object.getPrototypeOf(Ve),"contextTypes",this)}}]),Ve),O=(babelHelpers.inherits(Ke,n),babelHelpers.createClass(Ke,[{key:"closeHandler",value:function(e){void 0===this.element||this.element.contains(e.target)||(this.open=!1,document.removeEventListener("click",this.closeHandler))}},{key:"toggle",value:function(){this.open=!this.open}},{key:"close",value:function(){this.open=!1}},{key:"isOptionSelected",value:function(e,t){return t===this.state.activeIndex}},{key:"clickHandler",value:function(e,t){this.setState({activeIndex:t})}},{key:"backHandler",value:function(e){this.props.gotoSettings(e)}},{key:"render",value:function(){var a=this,e=this.listOptions.map(function(e,t){return React.createElement(H,{key:t,onClick:a.clickHandler.bind(a,e,t)},React.createElement("button",{tabIndex:"-1",className:a.isOptionSelected(e,t)?"amp-icon amp-list-item-selected":"amp-icon"}),React.createElement("span",null,e.label))});return React.createElement("div",{ref:"element"},React.createElement(H,{className:"amp-list-title",onClick:this.backHandler.bind(this),direction:"left"},React.createElement("button",{tabIndex:"-1",className:"amp-icon amp-icon-left"}),React.createElement("span",null,this.state.title)),e)}},{key:"open",set:function(e){e!=this._open&&(this._open=e,this.classList.update({"amp-open":this._open}),this.plugin.open=e,this._open?(document.addEventListener("click",this.closeHandler),this.context.plugin.activeState="active",this.context.plugin.stopActiveTimeout(),this.props.onopen&&this.props.onopen(this)):(this.context.plugin.startActiveTimeout(),document.removeEventListener("click",this.closeHandler),this.props.onclose&&this.props.onclose(this)))},get:function(){return this._open}},{key:"propsList",get:function(){var e=babelHelpers.get(Ke.prototype.__proto__||Object.getPrototypeOf(Ke.prototype),"propsList",this);return e.onclose,e.onopen,babelHelpers.objectWithoutProperties(e,["onclose","onopen"])}},{key:"title",get:function(){return"TITLE"}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ke.__proto__||Object.getPrototypeOf(Ke),"contextTypes",this)}}]),Ke),t=(babelHelpers.inherits(Be,O),babelHelpers.createClass(Be,[{key:"onKeyDown",value:function(e){13!=e.keyCode&&32!=e.keyCode||(this.state.keyDown=!0,this.toggle())}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Be.__proto__||Object.getPrototypeOf(Be),"contextTypes",this)}}]),Be),E=(babelHelpers.inherits(Ge,O),babelHelpers.createClass(Ge,[{key:"clickHandler",value:function(e,t){this.setState({activeIndex:t}),this.props.settingsChange({language:this.listOptions[t]})}},{key:"render",value:function(){var n=this;this.listOptions=[{label:"Off",value:"off"}],this.player.captioning.tracks.forEach(function(e){e=e.language;n.listOptions.push({label:n.player.localization.getLanguageString(e),value:e})});var e=this.listOptions.map(function(e,t){var a=!n.player.captioning.hidden&&n.player.captioning.track&&e.value==n.player.captioning.track.language;return n.player.captioning.hidden&&0===t&&(a=!0),React.createElement(H,{key:t,onClick:n.clickHandler.bind(n,e,t)},React.createElement("button",{className:a?"amp-icon amp-list-item-selected":"amp-icon",tabIndex:"-1"}),React.createElement("span",null,e.label))});return React.createElement("div",{ref:"element",className:"amp-captioning-home"},React.createElement(H,{className:"amp-list-highlight",onClick:this.props.gotoSettings.bind(this),direction:"left"},React.createElement("button",{className:"amp-icon amp-icon-left",tabIndex:"-1"}),React.createElement("span",null,"Subtitles/CC")),React.createElement(H,{onClick:function(e){return n.props.viewChange(e,"options")},className:"amp-option-button"},"Options"),e)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ge.__proto__||Object.getPrototypeOf(Ge),"contextTypes",this)}}]),Ge),x=(babelHelpers.inherits(qe,O),babelHelpers.createClass(qe,[{key:"render",value:function(){var a=this,e=this.listOptions.map(function(t,e){return React.createElement(H,{key:t.key,onClick:function(e){return a.props.viewChange(e,t.key)},direction:"right"},React.createElement("span",{className:"amp-label"},t.label),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},a.props.captionsettings[t.key+"Label"]))});return React.createElement("div",{className:"amp-captioning-options"},React.createElement(H,{className:"amp-list-title",onClick:function(e){return a.props.viewChange(e,"home")},direction:"left"},React.createElement("button",{className:"amp-icon amp-icon-left",tabIndex:"-1"}),React.createElement("span",null,"Options")),e)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(qe.__proto__||Object.getPrototypeOf(qe),"contextTypes",this)}}]),qe),d=(babelHelpers.inherits(Fe,O),babelHelpers.createClass(Fe,[{key:"select",value:function(){for(var e=this.listOptions,t=this.props.captionsettings,a=e.length,n=0;n<a;n++)if(/color/i.test(this.setting)&&e[n].value.r==t[this.setting].r&&e[n].value.g==t[this.setting].g&&e[n].value.b==t[this.setting].b||/opacity/i.test(this.setting)&&e[n].value==t[this.setting.replace("Opacity","Color")].a||!/opacity|color/i.test(this.setting)&&e[n].value==t[this.setting]){this.state.activeIndex=n;break}}},{key:"clickHandler",value:function(e,t){babelHelpers.get(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"clickHandler",this).call(this,e,t),this.props.settingsChange(babelHelpers.defineProperty({},this.setting,e))}},{key:"backHandler",value:function(e){this.props.viewChange(e,"options")}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Fe.__proto__||Object.getPrototypeOf(Fe),"contextTypes",this)}}]),Fe),T=(babelHelpers.createClass(Ue,[{key:"toString",value:function(e){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ue.__proto__||Object.getPrototypeOf(Ue),"contextTypes",this)}}]),Ue),w=(babelHelpers.inherits(Ae,d),babelHelpers.createClass(Ae,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Ae.__proto__||Object.getPrototypeOf(Ae),"contextTypes",this)}}]),Ae),R=(babelHelpers.inherits(De,d),babelHelpers.createClass(De,null,[{key:"contextTypes",get:function(){return babelHelpers.get(De.__proto__||Object.getPrototypeOf(De),"contextTypes",this)}}]),De),P=(babelHelpers.inherits(Ie,d),babelHelpers.createClass(Ie,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Ie.__proto__||Object.getPrototypeOf(Ie),"contextTypes",this)}}]),Ie),M=(babelHelpers.inherits(Ne,d),babelHelpers.createClass(Ne,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Ne.__proto__||Object.getPrototypeOf(Ne),"contextTypes",this)}}]),Ne),L=(babelHelpers.inherits(je,d),babelHelpers.createClass(je,null,[{key:"contextTypes",get:function(){return babelHelpers.get(je.__proto__||Object.getPrototypeOf(je),"contextTypes",this)}}]),je),S=(babelHelpers.inherits(Se,d),babelHelpers.createClass(Se,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Se.__proto__||Object.getPrototypeOf(Se),"contextTypes",this)}}]),Se),j=(babelHelpers.inherits(Le,d),babelHelpers.createClass(Le,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Le.__proto__||Object.getPrototypeOf(Le),"contextTypes",this)}}]),Le),N=(babelHelpers.inherits(Me,d),babelHelpers.createClass(Me,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Me.__proto__||Object.getPrototypeOf(Me),"contextTypes",this)}}]),Me),I=(babelHelpers.inherits(Pe,d),babelHelpers.createClass(Pe,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Pe.__proto__||Object.getPrototypeOf(Pe),"contextTypes",this)}}]),Pe),D=(babelHelpers.inherits(Re,d),babelHelpers.createClass(Re,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Re.__proto__||Object.getPrototypeOf(Re),"contextTypes",this)}}]),Re),A=(babelHelpers.inherits(we,d),babelHelpers.createClass(we,null,[{key:"contextTypes",get:function(){return babelHelpers.get(we.__proto__||Object.getPrototypeOf(we),"contextTypes",this)}}]),we),U=(babelHelpers.inherits(Te,d),babelHelpers.createClass(Te,null,[{key:"contextTypes",get:function(){return babelHelpers.get(Te.__proto__||Object.getPrototypeOf(Te),"contextTypes",this)}}]),Te),F=(babelHelpers.inherits(xe,O),babelHelpers.createClass(xe,[{key:"componentWillMount",value:function(){this.open=!0}},{key:"focus",value:function(e){this.refs.element.firstChild.children[2].focus()}},{key:"changeView",value:function(e,t){var a=this;!/keydown/.test(e.type)||13!=e.keyCode&&32!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode||(this.keyDown=!0),setTimeout(function(){a.setState({level:t})},100)}},{key:"initSettingLabels",value:function(){var e,a=this;for(e in this.state.labels)!function(t){a.state.labels[t].forEach(function(e){(/color/i.test(t)&&e.value.r==a.state.captionsettings[t].r&&e.value.g==a.state.captionsettings[t].g&&e.value.b==a.state.captionsettings[t].b||/opacity/i.test(t)&&e.value==a.state.captionsettings[t.replace("Opacity","Color")].a||a.state.captionsettings[t]==e.value)&&(a.state.captionsettings[t+"Label"]=e.label)})}(e)}},{key:"changeSettings",value:function(e){for(var t in e){var a=e[t],n=a.value;switch(t){case"language":var s="off"==a.value;s||this.player.captioning.selectTrackByLanguage(a.value),this.player.captioning.hidden=s;break;case"backgroundColor":case"windowColor":case"fontColor":case"edgeColor":n.a=this.state.captionsettings[t].a;break;case"backgroundOpacity":case"fontOpacity":case"windowOpacity":case"edgeOpacity":s=this.state.captionsettings[t.replace("Opacity","Color")];s.a=n,n=s}this.state.captionsettings[t.replace("Opacity","Color")]=n,this.state.captionsettings[t+"Label"]=a.label}var l,i=Object.assign({},this.state.captionsettings);for(l in i)/Label$/.test(l)||/Opacity$/.test(l)||/language/.test(l)?delete i[l]:/Color$/.test(l)&&(i[l]=i[l].toString());i.visible=!this.player.captioning.hidden,this.player.captioning.changeSettings(i)}},{key:"componentDidUpdate",value:function(e,t){this.keyDown&&(this.refs.element.firstChild.children[1].focus(),this.keyDown=!1)}},{key:"getCurrentPage",value:function(){switch(this.state.level){case"home":return React.createElement(E,babelHelpers.extends({},this.state,{gotoSettings:this.props.gotoSettings.bind(this)}));case"options":return React.createElement(x,this.state);case"fontFamily":return React.createElement(L,this.state);case"fontColor":return React.createElement(M,this.state);case"size":return React.createElement(j,this.state);case"fontOpacity":return React.createElement(S,this.state);case"backgroundColor":return React.createElement(w,this.state);case"backgroundOpacity":return React.createElement(R,this.state);case"windowColor":return React.createElement(N,this.state);case"windowOpacity":return React.createElement(I,this.state);case"edgeType":return React.createElement(P,this.state);case"edgeColor":return React.createElement(A,this.state);case"edgeOpacity":return React.createElement(U,this.state);case"scroll":return React.createElement(D,this.state)}}},{key:"render",value:function(){return React.createElement("div",{ref:"element",role:"menu"},this.getCurrentPage())}}],[{key:"contextTypes",get:function(){return babelHelpers.get(xe.__proto__||Object.getPrototypeOf(xe),"contextTypes",this)}}]),xe),q=(babelHelpers.inherits(Ee,O),babelHelpers.createClass(Ee,[{key:"componentWillMount",value:function(){babelHelpers.get(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"componentWillMount",this).call(this),this.onqualitylevelsloaded({detail:this.player.qualityLevels}),this.onqualitychanging({detail:this.player.qualityLevels[this.player.quality]}),this.open=!0}},{key:"clickHandler",value:function(e,t){this.player.quality=t-1,t||this.onqualitychanging()}},{key:"onqualitylevelsloaded",value:function(e){var t=this;this.qualityLevels=e.detail,this.qualityLevels.forEach(function(e){t.listOptions.push({label:Math.round(e.bitrate/1e3)+" Kbps"})}),this.setState({redraw:!0})}},{key:"onqualitychanging",value:function(t){var e=-1;try{e="auto"==this.player.qualityMode?-1:t.detail?this.qualityLevels.findIndex(function(e){return e.qualityIndex==t.detail.qualityIndex&&e.level==t.detail.level}):this.props.quality.quality}catch(t){}this.setState({activeIndex:e})}},{key:"isOptionSelected",value:function(e,t){return t-1===this.state.activeIndex}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ee.__proto__||Object.getPrototypeOf(Ee),"contextTypes",this)}}]),Ee),G=(babelHelpers.inherits(Oe,O),babelHelpers.createClass(Oe,[{key:"clickHandler",value:function(e,t){this.player.playbackRate=e.value,babelHelpers.get(Oe.prototype.__proto__||Object.getPrototypeOf(Oe.prototype),"clickHandler",this).call(this,e,t)}},{key:"isOptionSelected",value:function(e,t){return parseFloat(e.value)===parseFloat(this.player.playbackRate)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Oe.__proto__||Object.getPrototypeOf(Oe),"contextTypes",this)}}]),Oe),B=(babelHelpers.inherits(He,O),babelHelpers.createClass(He,[{key:"componentWillMount",value:function(){babelHelpers.get(He.prototype.__proto__||Object.getPrototypeOf(He.prototype),"componentWillMount",this).call(this),this.audioTracks=this.player.audioTracks,this.oncanplaythrough({detail:this.audioTracks}),this.open=!0}},{key:"clickHandler",value:function(e,t){this.player.audioTracks[t].enabled=!0,this.setState({activeIndex:t-1}),this.setState({redraw:!0})}},{key:"onmediachange",value:function(e){this.listOptions=[],this.activeIds=[]}},{key:"oncanplaythrough",value:function(e){var a=this;this.audioTracks=this.player.audioTracks,this.audioTracks.forEach(function(e){var t;null==a.activeIds[e.id]&&(t=a.player.localization.getLanguageString(e.language)||e.language,t=e.label||t||e.id||a.player.localization.getString("MSG_UNKNOWN"),a.activeIds[e.id]=!0,a.listOptions.push({label:t}))}),this.setState({redraw:!0})}},{key:"isOptionSelected",value:function(e,t){return this.player.audioTracks[t].enabled}}],[{key:"contextTypes",get:function(){return babelHelpers.get(He.__proto__||Object.getPrototypeOf(He),"contextTypes",this)}}]),He),K=(babelHelpers.inherits(Ce,t),babelHelpers.createClass(Ce,[{key:"onready",value:function(e){this.setState({autoplay:this.player.autoplay})}},{key:"onseeked",value:function(e){this.open=!1}},{key:"toggle",value:function(){babelHelpers.get(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"toggle",this).call(this),this.state.settingsLevel=0}},{key:"onqualitychanging",value:function(t){var e="auto"===this.player.qualityMode?"Auto":Math.round(t.detail.bitrate/1e3)+"Kbps";this.state.quality=this.state.qualityLevels?this.state.qualityLevels.findIndex(function(e){return e.qualityIndex==t.detail.qualityIndex&&e.level==t.detail.level}):-1,this.setState({bitrateLabel:e})}},{key:"changeState",value:function(e,t){var a=this;if("keydown"==t.type&&(13==t.keyCode||32==t.keyCode||37==t.keyCode||38==t.keyCode||39==t.keyCode||40==t.keyCode)&&1!=this.mouseFocus){if(37==t.keyCode&&0==this.state.settingsLevel)return;this.state.keyDown=!0}setTimeout(function(){a.setState({settingsLevel:e})},100)}},{key:"autoplayToggle",value:function(){this.setState({autoplay:this.player.autoplay=!this.player.autoplay})}},{key:"componentWillUpdate",value:function(e,t){1==t.settingsLevel&&this.refs.firstElem.state.captionsettings?this.setState({captioningSettingState:this.refs.firstElem.state.captionsettings}):null==this.refs.firstElem||isNaN(this.refs.firstElem.state.activeIndex)||this.setState({playbackSettingState:this.refs.firstElem.state.activeIndex})}},{key:"componentDidUpdate",value:function(e,t){this.state.keyDown&&(("function"==typeof this.refs.firstElem.focus?this.refs.firstElem:this.refs.firstElem.refs.element.childNodes[1]).focus(),this.state.keyDown=!1)}},{key:"currentAudioTrackLabel",value:function(){for(var e=this.player.audioTracks,t=0;t<e.length;t++){var a=e[t];if(null!=a&&a.enabled){var n=this.player.localization.getLanguageString(a.language)||a.language;return a.label||n||a.id||this.player.localization.getString("MSG_UNKNOWN")}}return""}},{key:"render",value:function(){switch(this.state.settingsLevel){case 0:var e=u.componentEnabled(this.plugin,"captioning"),t=null!=this.player.qualityLevels&&1<this.player.qualityLevels.length,a=null!=this.player.audioTracks&&1<this.player.audioTracks.length,n=void 0,s=void 0;return!e&&t?n="firstElem":e||t||(s="firstElem"),React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{className:"amp-settings amp-panel "+this.className,role:"menu"}),e&&React.createElement(H,{ref:"firstElem",className:"amp-subtitles",onClick:this.changeState.bind(this,1),direction:"right"},React.createElement("span",{className:"amp-label"},"Subtitles"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},this.player.captioning.hidden?"Off":this.player.localization.getLanguageString(this.player.captioning.track.language))),t&&React.createElement(H,{ref:n,onClick:this.changeState.bind(this,2),direction:"right"},React.createElement("span",{className:"amp-label"},"Quality"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},this.state.bitrateLabel)),"flash"!=this.player.mode&&React.createElement(H,{ref:s,className:"amp-playback-rate-button",onClick:this.changeState.bind(this,3),direction:"right"},React.createElement("span",{className:"amp-label"},"Speed"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},1===this.player.playbackRate?"Normal":this.player.playbackRate)),a&&React.createElement(H,{ref:"audiotracks",className:"amp-playback-rate-button",direction:"right",onClick:this.changeState.bind(this,4)},React.createElement("span",{className:"amp-label"},"Audio"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},this.currentAudioTrackLabel())),React.createElement(H,{ref:"autoplay",className:this.state.autoplay?"amp-autoplay-on":"amp-autoplay-off",direction:"right",onClick:this.autoplayToggle.bind(this)},React.createElement("span",{className:"amp-label"},"Autoplay"),React.createElement("button",{className:"amp-right amp-icon amp-toggle"})));case 1:return React.createElement("div",{ref:"element",className:"amp-captioning-settings amp-panel "+this.className},React.createElement(F,{ref:"firstElem",captionState:this.state.captioningSettingState,gotoSettings:this.changeState.bind(this,0)}));case 2:return React.createElement("div",{ref:"element",className:"amp-bitrate amp-panel "+this.className},React.createElement(q,{ref:"firstElem",gotoSettings:this.changeState.bind(this,0)}));case 3:return React.createElement("div",{ref:"element",className:"amp-playback-rate amp-panel "+this.className},React.createElement(G,{ref:"firstElem",gotoSettings:this.changeState.bind(this,0)}));case 4:return React.createElement("div",{ref:"element",className:"amp-audio-tracks amp-panel "+this.className},React.createElement(B,{ref:"firstElem",gotoSettings:this.changeState.bind(this,0)}))}}}],[{key:"contextTypes",get:function(){return babelHelpers.get(Ce.__proto__||Object.getPrototypeOf(Ce),"contextTypes",this)}}]),Ce),V=(babelHelpers.inherits(_e,o),babelHelpers.createClass(_e,null,[{key:"contextTypes",get:function(){return babelHelpers.get(_e.__proto__||Object.getPrototypeOf(_e),"contextTypes",this)}}]),_e),W=(babelHelpers.inherits(ke,t),babelHelpers.createClass(ke,[{key:"clickHandler",value:function(e,t,a){var n=this.player.media;this.player.dispatch("share",{provider:e,link:n.link,embed:n.embed})}},{key:"componentDidUpdate",value:function(e,t){this.state.keyDown&&(this.refs.element.childNodes[0].focus(),this.state.keyDown=!1)}},{key:"render",value:function(){var a=this,e=this.listOptions.map(function(e,t){return React.createElement(H,{key:t,className:"amp-list-item",onClick:a.clickHandler.bind(a,e,t)},React.createElement("button",{className:"amp-icon amp-"+e.id,tabIndex:"-1"}),React.createElement("span",null,e.label))});return React.createElement("div",{ref:"element",className:"amp-share amp-panel "+this.className},e)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ke.__proto__||Object.getPrototypeOf(ke),"contextTypes",this)}}]),ke),z=(babelHelpers.inherits(ve,f),babelHelpers.createClass(ve,[{key:"onmediachange",value:function(){setTimeout(this.forceUpdate.bind(this),1)}},{key:"onChange",value:function(e){this.player.captioning.hidden=!this.player.captioning.hidden}},{key:"render",value:function(){return u.componentEnabled(this.plugin,"captioning")?babelHelpers.get(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"render",this).call(this):null}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ve.__proto__||Object.getPrototypeOf(ve),"contextTypes",this)}}]),ve),Y=(babelHelpers.inherits(fe,i),babelHelpers.createClass(fe,[{key:"onClick",value:function(){var e=this.player;"playing"===e.playState||"paused"===e.playState?this.player.currentTime=Math.max(this.player.currentTime-10,0):!0===e.ended&&this.player.replay()}}],[{key:"contextTypes",get:function(){return babelHelpers.get(fe.__proto__||Object.getPrototypeOf(fe),"contextTypes",this)}}]),fe),X=(babelHelpers.inherits(ge,i),babelHelpers.createClass(ge,[{key:"onClick",value:function(e){var t=this.player;t.ended||"playing"!=t.playState&&"paused"!=t.playState||(t.currentTime=Math.min(this.player.currentTime+10,this.player.duration-1))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ge.__proto__||Object.getPrototypeOf(ge),"contextTypes",this)}}]),ge),Z=(babelHelpers.inherits(me,n),babelHelpers.createClass(me,[{key:"onmediachange",value:function(e){this.setState({src:this.player.evaluateBindings(this.player.media.poster)})}},{key:"render",value:function(){return React.createElement("img",{className:"amp-poster",src:this.state.src})}}],[{key:"contextTypes",get:function(){return babelHelpers.get(me.__proto__||Object.getPrototypeOf(me),"contextTypes",this)}}]),me),$=(babelHelpers.inherits(de,n),babelHelpers.createClass(de,[{key:"onmediachange",value:function(e){this.setState({textContent:this.player.media.title})}}],[{key:"contextTypes",get:function(){return babelHelpers.get(de.__proto__||Object.getPrototypeOf(de),"contextTypes",this)}}]),de),J=(babelHelpers.inherits(ye,n),babelHelpers.createClass(ye,[{key:"onerror",value:function(e){this.setState({error:this.l10n.MSG_ERROR_DEFAULT})}},{key:"render",value:function(){return React.createElement("div",{className:"amp-error-msg"},React.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.error}}))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ye.__proto__||Object.getPrototypeOf(ye),"contextTypes",this)}}]),ye),Q=(babelHelpers.inherits(be,n),babelHelpers.createClass(be,[{key:"render",value:function(){var e=[React.createElement("li",{className:"amp-context-item amp-bold",key:"0"},"Akamai Adaptive Media Player"),React.createElement("li",{className:"amp-context-item",key:"1"},this.player.version)];"function"==typeof akamaiGetViewerId&&null!=akamaiGetViewerId()&&e.push(React.createElement("li",{className:"amp-context-item amp-selectable",key:"2"},"Viewer ID: ",akamaiGetViewerId()));var t={top:this.props.y+"px",left:this.props.x+"px"};return React.createElement("ul",{ref:"element",className:"amp-context-menu",style:t},e)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(be.__proto__||Object.getPrototypeOf(be),"contextTypes",this)}}]),be),ee=(babelHelpers.inherits(he,n),babelHelpers.createClass(he,[{key:"onready",value:function(){this.controlsMode=this.plugin.mode,this.player.addEventListener("adbreakstart",this.onadbreakstart),this.player.addEventListener("adbreakend",this.onadbreakend),this.player.addEventListener("adstarted",this.onadstarted),this.player.addEventListener("adtimeremaining",this.onadtimeremaining),this.player.addEventListener("adimpression",this.onadimpression)}},{key:"onmediachange",value:function(){this.onadbreakend()}},{key:"onadimpression",value:function(){this.plugin.container.classList.update({"amp-ad-overlaymode":!0}),this.player.ads.resize()}},{key:"onadbreakstart",value:function(e){this.plugin.container.classList.update({"amp-ad-break":!0}),this.player.container.classList.add("amp-ad-break"),e.detail,this.setState({msg:"",time:""}),this.controlsMode=this.plugin.mode,this.plugin.mode=this.plugin.adMode}},{key:"onadstarted",value:function(e){var t=e.detail||{},e=null==t.position||null==t.totalAds?"":this.getLocalizedString("MSG_AD")+" "+t.position+" "+this.getLocalizedString("MSG_OF")+" "+t.totalAds;this.setState({time:t.duration,msg:e})}},{key:"onadbreakend",value:function(e){this.setState({msg:"",time:""}),this.plugin.container.classList.update({"amp-ad-break":!1}),this.player.container.classList.remove("amp-ad-break"),this.plugin.mode=this.controlsMode}},{key:"onadtimeremaining",value:function(e){"ready"!=this.player.playState&&this.setState({time:e.detail})}},{key:"render",value:function(){var e=""!=this.state.time?u.formatTimecode(Math.ceil(this.state.time)):this.state.time;return React.createElement("div",{ref:"containerNode",className:"amp-ads"},React.createElement("div",{ref:"container",className:"amp-ad-container"}),React.createElement("div",{className:"amp-bar amp-ad-info"},React.createElement("div",{ref:"count",className:"amp-ad-component amp-ad-count"},this.state.msg),React.createElement("div",{ref:"spacerLeft",className:"amp-spacer"}),React.createElement("div",{ref:"spacerRight",className:"amp-spacer"}),React.createElement("div",{ref:"time",className:"amp-ad-component amp-ad-time"},e)))}},{key:"container",get:function(){return this.refs.container}}],[{key:"contextTypes",get:function(){return babelHelpers.get(he.__proto__||Object.getPrototypeOf(he),"contextTypes",this)}}]),he),te=(babelHelpers.inherits(ue,i),babelHelpers.createClass(ue,[{key:"onready",value:function(e){var t,a=this;!1!==this.isAvailable&&((t=this.player.mediaElement).setAttribute("x-webkit-airplay","allow"),t.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){a.state.available="available"==e.availability,a.playing=t.webkitCurrentPlaybackTargetIsWireless,a.forceUpdate()}),window.addEventListener("webkitcurrentplaybacktargetiswireless",function(e){a.playing=t.webkitCurrentPlaybackTargetIsWireless}))}},{key:"onClick",value:function(){this.player.mediaElement.webkitShowPlaybackTargetPicker()}},{key:"render",value:function(){return!1===this.available?null:babelHelpers.get(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"render",this).call(this)}},{key:"isAvailable",get:function(){return null!=window.WebKitPlaybackTargetAvailabilityEvent}},{key:"available",get:function(){return this.isAvailable&&this.state.available}},{key:"playing",set:function(e){this.state.playing=e,this.plugin.container.classList.update({"amp-playback-target-airplay":e})},get:function(){return this.state.playing}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ue.__proto__||Object.getPrototypeOf(ue),"contextTypes",this)}}]),ue),ae=(babelHelpers.inherits(pe,i),babelHelpers.createClass(pe,[{key:"onplaying",value:function(e){this.forceUpdate()}},{key:"onClick",value:function(e){var t=this.player.mediaElement;t.webkitSetPresentationMode("picture-in-picture"===t.webkitPresentationMode?"inline":"picture-in-picture")}},{key:"render",value:function(){return this.available?babelHelpers.get(pe.prototype.__proto__||Object.getPrototypeOf(pe.prototype),"render",this).call(this):null}},{key:"available",get:function(){var e=this.player.mediaElement;return null!=e&&"function"==typeof e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&e.webkitSupportsPresentationMode("picture-in-picture")}}],[{key:"contextTypes",get:function(){return babelHelpers.get(pe.__proto__||Object.getPrototypeOf(pe),"contextTypes",this)}}]),pe),ne=(babelHelpers.inherits(ce,i),babelHelpers.createClass(ce,[{key:"onready",value:function(){u.componentEnabled(this.plugin,"chromecast")&&this.setState({available:this.player.chromecast.available})}},{key:"onplaybacktargetavailabilitychange",value:function(e){"chromecast"===e.detail.target&&this.setState({available:e.detail.available})}},{key:"onClick",value:function(){this.player.chromecast.launch()}},{key:"render",value:function(){return!1===this.available?null:babelHelpers.get(ce.prototype.__proto__||Object.getPrototypeOf(ce.prototype),"render",this).call(this)}},{key:"available",get:function(){return this.state.available}}],[{key:"contextTypes",get:function(){return babelHelpers.get(ce.__proto__||Object.getPrototypeOf(ce),"contextTypes",this)}}]),ce),se=(babelHelpers.createClass(re,null,[{key:"AUTO",get:function(){return"auto"}},{key:"FIXED",get:function(){return"fixed"}},{key:"PERSISTENT",get:function(){return"persistent"}}]),re),le=(babelHelpers.createClass(oe,null,[{key:"ACTIVE",get:function(){return"active"}},{key:"INACTIVE",get:function(){return"inactive"}},{key:"IDLE",get:function(){return"idle"}}]),oe),i=(babelHelpers.inherits(ie,n),babelHelpers.createClass(ie,[{key:"getChildContext",value:function(){return{player:this.props.player,config:this.props.config,plugin:this}}},{key:"onready",value:function(e){var t=this;null!=this.config.mode&&(this.mode=this.config.mode),this.container.classList.add("amp-"+this.player.mode),this.container.classList.update({"amp-cc-active":this.player.captioning&&!this.player.captioning.hidden,"amp-touch":this.isTouchDevice}),null!=this.player.captioning&&this.player.captioning.addEventListener("visibilitychange",this.onvisibilitychange.bind(this)),this.player.container.addEventListener("mouseenter",this.onMouseEnter),this.player.container.addEventListener("mouseleave",this.onMouseLeave),setTimeout(function(){t.container.element.style.display="block"},10)}},{key:"ondestroy",value:function(){this.stopActiveTimeout(),this.player.container.removeEventListener("mouseenter",this.onMouseEnter),this.player.container.removeEventListener("mouseleave",this.onMouseLeave)}},{key:"onvisibilitychange",value:function(e){this.container.classList.update({"amp-cc-active":e.detail})}},{key:"onplaybacktargetchange",value:function(e){this.container.classList.update({"amp-remote-playback":"amp"!=e.detail.value})}},{key:"onmediachange",value:function(e){var t=this.player.media;this.container.classList.update({"amp-audio":"audio"==t.medium}),this.container.classList.update({"amp-text-tracks":t.tracks&&t.tracks.length})}},{key:"onmutemouseover",value:function(e){this.stopActiveTimeout(),this.refs.volume.open=!0}},{key:"onmutemouseout",value:function(e){var t=this;this.stopActiveTimeout(),this.timeout=setTimeout(function(){t.refs.volume.open=!1},350)}},{key:"onvolumemouseover",value:function(e){this.stopActiveTimeout()}},{key:"onfullscreenchange",value:function(e){this.container.classList.update({"amp-full-screen":e.detail})}},{key:"onmutechange",value:function(e){this.container.classList.update({"amp-muted":e.detail})}},{key:"onplaystatechange",value:function(e){var t=(t={},babelHelpers.defineProperty(t,"amp-waiting",!1),babelHelpers.defineProperty(t,"amp-"+e.detail.previous,!1),babelHelpers.defineProperty(t,"amp-"+e.detail.value,!0),t);this.container.classList.update(t)}},{key:"oncanplaythrough",value:function(e){this.container.classList.update({"amp-can-play":!0})}},{key:"onplaying",value:function(e){this.container.classList.update({"amp-waiting":!1}),this.container.classList.remove("amp-qualitychange-manual"),this.container.classList.remove("amp-qualitychange-auto"),this.isTouchDevice&&this.startActiveTimeout()}},{key:"onwaiting",value:function(e){var t=this;this.container.classList.update({"amp-waiting":!0}),this.player.once("timeupdate",function(){!1===t.player.seeking&&t.container.classList.update({"amp-waiting":!1})})}},{key:"onbusy",value:function(e){this.container.classList.update({"amp-busy":e.detail})}},{key:"onseeking",value:function(e){this.container.classList.update({"amp-waiting":!0})}},{key:"onseeked",value:function(e){this.container.classList.update({"amp-waiting":!1})}},{key:"onerror",value:function(e){this.container.classList.update({"amp-error":!0})}},{key:"onislive",value:function(e){this.container.classList.update({"amp-is-live":e.detail})}},{key:"ontemporaltypechange",value:function(e){var t=(t={},babelHelpers.defineProperty(t,"amp-"+e.detail.previous,!1),babelHelpers.defineProperty(t,"amp-"+e.detail.value,!0),t);this.container.classList.update(t)}},{key:"onqualitychanging",value:function(e){this.container.classList.add("amp-qualitychange-"+this.player.qualityMode)}},{key:"onqualitychange",value:function(e){this.container.classList.remove("amp-qualitychange-"+this.player.qualityMode)}},{key:"onqualityswitched",value:function(e){this.onqualitychange(e)}},{key:"togglePlayPause",value:function(){"ready"==this.player.playState||this.player.paused?this.player.play():this.player.pause()}},{key:"startActiveTimeout",value:function(){var e=this;this.refs.settingsPanel.open&&(this.refs.settingsPanel.close(),this.refs.volume.open=!1),this.stopActiveTimeout(),this.timeout=setTimeout(function(){e.activeState=le.IDLE},1e3*this.autoHide)}},{key:"stopActiveTimeout",value:function(){clearTimeout(this.timeout)}},{key:"onMouseEnter",value:function(e){this.stopActiveTimeout(),this.activeState=le.ACTIVE}},{key:"onMouseLeave",value:function(t){var a=this,e=document.elementFromPoint(t.clientX,t.clientY);"ready"==this.player.playState||this.open||this.player.container.contains(e)||(this.dragging?(e=function e(){window.removeEventListener("mouseup",e),akamai.amp.Utils.isMouseOverElement(a.container.element)||a.onMouseLeave(t)},window.addEventListener("mouseup",e)):this.activeState=le.INACTIVE)}},{key:"onClick",value:function(){this.isTouchDevice?this.activeState==le.ACTIVE?this.activeState=le.IDLE:(this.activeState=le.ACTIVE,this.startActiveTimeout()):this.togglePlayPause()}},{key:"isFocused",value:function(e){var t=this.container.element;return e==t||t.contains(e)}},{key:"onFocus",value:function(e){var t=this.isFocused(e.target);this.focused="BUTTON"!=e.target.nodeName&&t,t&&this.container.classList.add("amp-active")}},{key:"onBlur",value:function(e){var t=this.isFocused(e.target);this.focused="BUTTON"!=e.target.nodeName&&t,t||this.onMouseLeave(e)}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case 77:this.player.muted=!this.player.muted;break;case 67:this.player.captioning.hidden=!this.player.captioning.hidden;break;case 70:this.player.displayState==this.player.displayState=="full-screen"?this.player.exitFullScreen():this.player.enterFullScreen()}if(0!=this.focused)switch(e.keyCode){case 13:case 32:this.togglePlayPause();break;case 39:case 37:!1===this.refs.volume.focused&&this.refs.progress.onKeyDown(e);break;case 38:case 40:!1===this.refs.progress.focused&&this.refs.volume.onKeyDown(e)}}},{key:"contextMenuClick",value:function(e){return!/selectable/.test(e.target.className)&&(this.removeContextMenu(e),!1)}},{key:"removeContextMenu",value:function(e){document.body.removeEventListener("click",this.contextMenuClick),document.body.removeChild(this.contextMenu),this.contextMenu=null}},{key:"onContextMenu",value:function(e){var t;!0!==this.debug&&(e.preventDefault(),t=document.body,e=React.createElement(Q,{player:this.player,x:e.pageX,y:e.pageY}),null!=this.contextMenu&&this.removeContextMenu(),this.contextMenu=document.createElement("div"),t.appendChild(this.contextMenu),document.body.addEventListener("click",this.contextMenuClick),ReactDOM.render(e,this.contextMenu))}},{key:"replay",value:function(){this.player.replay()}},{key:"render",value:function(){return React.createElement(l,{ref:"container",tabIndex:"0",style:{display:"none"},classList:["amp-react","amp-ui","amp-ready","amp-active"],onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onContextMenu:this.onContextMenu},React.createElement("div",{className:"amp-interactive",onClick:this.onClick}),React.createElement(Z,{ref:"poster"}),React.createElement($,{ref:"title"}),React.createElement(ee,{ref:"ads"}),React.createElement(c,{ref:"pauseOverlay"}),React.createElement(p,{ref:"bufferingOverlay"}),React.createElement(m,{ref:"progress"}),React.createElement(l,{ref:"controls",className:"amp-controls amp-bar"},React.createElement(r,{ref:"playpause"}),React.createElement(Y,{ref:"jumpback"}),React.createElement(X,{ref:"jumpforward"}),React.createElement("div",{ref:"timeDisplay",className:"amp-time-display"},React.createElement(h,{ref:"currentTime"}),React.createElement("span",{ref:"timeSeparator",className:"amp-time-separator"}),React.createElement(y,{ref:"duration"}),React.createElement(b,{ref:"live"})),React.createElement(v,{ref:"mute"}),React.createElement(g,{ref:"volume"}),React.createElement("div",{ref:"spacerLeft",className:"amp-spacer"}),React.createElement("div",{ref:"spacerRight",className:"amp-spacer"}),React.createElement(V,{ref:"share",panel:"sharePanel"}),React.createElement(z,{ref:"cc"}),React.createElement(C,{ref:"settings",panel:"settingsPanel"}),React.createElement(ae,{ref:"pip"}),React.createElement(te,{ref:"airplay"}),React.createElement(ne,{ref:"chromecast"}),React.createElement(_,{ref:"fullscreen"})),React.createElement(k,{ref:"unmute"}),React.createElement(W,{ref:"sharePanel"}),React.createElement(K,{ref:"settingsPanel"}),React.createElement(J,{ref:"error"}),this.state.contextMenu)}},{key:"destroy",value:function(){ReactDOM.unmountComponentAtNode(this._container)}},{key:"adMode",get:function(){return null!=this.config.adMode?this.config.adMode:se.AUTO}},{key:"debug",get:function(){return(null!=this.config.debug?this:this.player).config.debug}},{key:"container",get:function(){return this.refs.container}},{key:"ads",get:function(){return this.refs.ads}},{key:"components",get:function(){return this.refs}},{key:"controls",get:function(){return this.refs.controls}},{key:"mode",get:function(){return this.state.mode||se.AUTO},set:function(e){var t,a=this;e=e||se.AUTO;var n=this.state.mode;this.container.classList.update((t={},babelHelpers.defineProperty(t,"amp-controls-"+n,!1),babelHelpers.defineProperty(t,"amp-controls-"+e,!0),t)),this.setState({mode:e}),e===se.AUTO?(null==this.idleUtil&&(this.idleUtil=new akamai.amp.IdleUtil(this.player.viewComponent,1e3*this.autoHide),this.idleUtil.addEventListener("activechange",function(e){a.activeState=!0!==e.detail.active?le.INACTIVE:le.ACTIVE})),this.idleUtil.start()):null!=this.idleUtil&&this.idleUtil.stop(),this.player.container.classList.remove("amp-controls-"+n),this.player.container.classList.add("amp-controls-"+e)}},{key:"dragging",get:function(){return this.state.dragging},set:function(e){1==e?this.stopActiveTimeout():this.startActiveTimeout(),this.container.classList.update(babelHelpers.defineProperty({},"amp-dragging",e)),this.setState({dragging:e})}},{key:"open",get:function(){return this.state.open},set:function(e){this.container.classList.update(babelHelpers.defineProperty({},"amp-open",e)),this.setState({open:e})}},{key:"activeState",set:function(e){var t=e==le.ACTIVE,a=e==le.INACTIVE;if(this.container.classList.update({"amp-active":t,"amp-inactive":a,"amp-idle":e==le.IDLE}),this.player.container.classList[t?"add":"remove"]("amp-active"),this.player.container.classList[a?"add":"remove"]("amp-inactive"),!0==a){for(var n in this.refs){n=this.refs[n];n instanceof O&&!0===n.open&&(n.open=!1)}this.startActiveTimeout()}},get:function(){switch(!0){case this.container.classList.contains("amp-active"):return le.ACTIVE;case this.container.classList.contains("amp-inactive"):return le.INACTIVE;default:return le.IDLE}}},{key:"adInProgress",get:function(){return this.player.ads&&this.player.ads.inProgress}}],[{key:"create",value:function(n,s,e){if(!0!==s.native)return new Promise(function(e,t){n.once("ready",function(){null!=n.mediaElement.setPlayerProperty&&n.mediaElement.setPlayerProperty("controlsMode","none")});var a=ReactDOM.render(React.createElement(ie,{player:n,config:s}),n.container);n.adContainer=a.ads.container,e(a)});var t={config:s};return n.once("ready",function(){return n.mediaElement.controls=!0}),null!=n.ads&&(t.ads={container:document.createElement("div")},n.container.appendChild(t.ads.container)),Promise.resolve(t)}},{key:"childContextTypes",get:function(){return{player:PropTypes.object,config:PropTypes.object,plugin:PropTypes.object}}}]),ie);function ie(e){babelHelpers.classCallCheck(this,ie);var t=babelHelpers.possibleConstructorReturn(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,e));t.feature="ui",t.state.playState="ready",t.state.open=!1,t.state.dragging=!1,t.state.mode=t.config.mode,t.isTouchDevice=akamai.amp.Utils.isTouch,t.contextMenuClick=t.contextMenuClick.bind(t),t.autoHide=null!=t.config.autoHide?t.config.autoHide:3,t.timeout=null;var a,n=new akamai.amp.EventDispatcher(t);for(a in n){var s=n[a];"function"==typeof s&&(t[a]=s.bind(n))}return t.dispatcher=n,t.bindHandlers(["onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onContextMenu","onClick"]),t}function oe(){babelHelpers.classCallCheck(this,oe)}function re(){babelHelpers.classCallCheck(this,re)}function ce(e,t){babelHelpers.classCallCheck(this,ce);t=babelHelpers.possibleConstructorReturn(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,e,t));return t.state.available=!1,t.classList.add("amp-chromecast",!0),t}function pe(e,t){babelHelpers.classCallCheck(this,pe);t=babelHelpers.possibleConstructorReturn(this,(pe.__proto__||Object.getPrototypeOf(pe)).call(this,e,t));return t.classList.add("amp-pip",!0),t}function ue(e,t){babelHelpers.classCallCheck(this,ue);t=babelHelpers.possibleConstructorReturn(this,(ue.__proto__||Object.getPrototypeOf(ue)).call(this,e,t));return t.state.available=!1,t.state.playing=!1,t.classList.add("amp-airplay",!0),t}function he(e,t){babelHelpers.classCallCheck(this,he);t=babelHelpers.possibleConstructorReturn(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,e,t));return t.classList.add("amp-ads",!0),t.state.msg="",t.state.time="",t.bindHandlers(["onadbreakstart","onadbreakend","onadstarted","onadtimeremaining","onadimpression"]),t}function be(e,t){return babelHelpers.classCallCheck(this,be),babelHelpers.possibleConstructorReturn(this,(be.__proto__||Object.getPrototypeOf(be)).call(this,e,t))}function ye(){return babelHelpers.classCallCheck(this,ye),babelHelpers.possibleConstructorReturn(this,(ye.__proto__||Object.getPrototypeOf(ye)).apply(this,arguments))}function de(e,t){babelHelpers.classCallCheck(this,de);t=babelHelpers.possibleConstructorReturn(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,e,t));return t.classList.add("amp-title",!0),t}function me(){return babelHelpers.classCallCheck(this,me),babelHelpers.possibleConstructorReturn(this,(me.__proto__||Object.getPrototypeOf(me)).apply(this,arguments))}function ge(e,t){babelHelpers.classCallCheck(this,ge);t=babelHelpers.possibleConstructorReturn(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this,e,t));return t.classList.add("amp-jump-forward",!0),t.state.altText="MSG_JUMP_AHEAD",t}function fe(e,t){babelHelpers.classCallCheck(this,fe);t=babelHelpers.possibleConstructorReturn(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,e,t));return t.classList.add("amp-jump-back",!0),t.state.altText="MSG_JUMP_BACK",t}function ve(e,t){babelHelpers.classCallCheck(this,ve);t=babelHelpers.possibleConstructorReturn(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,e,t));return t.classList.add("amp-cc"),t.state.altText="MSG_CLOSED_CAPTIONING",t.state.toggled=!!t.player.captioning&&!t.player.captioning.hidden,t}function ke(e,t){babelHelpers.classCallCheck(this,ke);t=babelHelpers.possibleConstructorReturn(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this,e,t));return t.listOptions=[{label:"Facebook",id:"facebook",url:"www.facebook.html"},{label:"Twitter",id:"twitter",url:"www.twitter.com"},{label:"Email",id:"email",url:""},{label:"Embed",id:"embed",url:""}],t}function _e(e,t){babelHelpers.classCallCheck(this,_e);t=babelHelpers.possibleConstructorReturn(this,(_e.__proto__||Object.getPrototypeOf(_e)).call(this,e,t));return t.classList.add("amp-share",!0),t.state.altText="MSG_SHARE",t}function Ce(e,t){babelHelpers.classCallCheck(this,Ce);t=babelHelpers.possibleConstructorReturn(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).call(this,e,t));return t.state.settingsLevel=0,t.state.bitrateLabel="Auto",t.state.captioningSettingState=null,t}function He(e,t){babelHelpers.classCallCheck(this,He);t=babelHelpers.possibleConstructorReturn(this,(He.__proto__||Object.getPrototypeOf(He)).call(this,e,t));return t.listOptions=[],t.audioTracks=[],t.activeIds=[],t.state.title="Audio",t.state.activeIndex=-1,t}function Oe(e,t){babelHelpers.classCallCheck(this,Oe);var a=babelHelpers.possibleConstructorReturn(this,(Oe.__proto__||Object.getPrototypeOf(Oe)).call(this,e,t));return a.state.title="Speed",a.listOptions=[{label:"0.25",value:.25},{label:"0.5",value:.5},{label:"Normal",value:1},{label:"1.25",value:1.25},{label:"1.5",value:1.5},{label:"2",value:2}],a.state.activeIndex=2,a.listOptions.forEach(function(e,t){e.value==a.player.playbackRate&&(a.state.activeIndex=t)}),a.classList.add("amp-playback-rate"),a}function Ee(e,t){babelHelpers.classCallCheck(this,Ee);t=babelHelpers.possibleConstructorReturn(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,e,t));return t.listOptions=[{label:"Auto",value:"0.25"}],t.qualityLevels=[],t.state.title="Quality",t.state.activeIndex=-1,t}function xe(e,t){babelHelpers.classCallCheck(this,xe);t=babelHelpers.possibleConstructorReturn(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this,e,t));t.state.languages=[],t.state.keyDown=!1;var a,n=Object.assign({},t.player.settings.captions);for(a in delete n.track,n)/Color$/.test(a)&&(n[a]=new T(n[a]),n[a.replace("Color","Opacity")]=n[a].a);return t.state.captionsettings=n,t.state.viewChange=t.changeView.bind(t),t.state.settingsChange=t.changeSettings.bind(t),t.state.level="home",t.state.labels=new s,t.initSettingLabels(),t}function Te(e,t){babelHelpers.classCallCheck(this,Te);t=babelHelpers.possibleConstructorReturn(this,(Te.__proto__||Object.getPrototypeOf(Te)).call(this,e,t));return t.state.title="Edge Opacity",t.setting="edgeOpacity",t.listOptions=e.labels[t.setting],t.select(),t}function we(e,t){babelHelpers.classCallCheck(this,we);t=babelHelpers.possibleConstructorReturn(this,(we.__proto__||Object.getPrototypeOf(we)).call(this,e,t));return t.state.title="Edge Color",t.setting="edgeColor",t.listOptions=e.labels[t.setting],t.select(),t}function Re(e,t){babelHelpers.classCallCheck(this,Re);t=babelHelpers.possibleConstructorReturn(this,(Re.__proto__||Object.getPrototypeOf(Re)).call(this,e,t));return t.state.title="Scroll Type",t.setting="scroll",t.listOptions=e.labels[t.setting],t.select(),t}function Pe(e,t){babelHelpers.classCallCheck(this,Pe);t=babelHelpers.possibleConstructorReturn(this,(Pe.__proto__||Object.getPrototypeOf(Pe)).call(this,e,t));return t.state.title="Window Opacity",t.setting="windowOpacity",t.listOptions=e.labels[t.setting],t.select(),t}function Me(e,t){babelHelpers.classCallCheck(this,Me);t=babelHelpers.possibleConstructorReturn(this,(Me.__proto__||Object.getPrototypeOf(Me)).call(this,e,t));return t.state.title="Window Color",t.setting="windowColor",t.listOptions=e.labels[t.setting],t.select(),t}function Le(e,t){babelHelpers.classCallCheck(this,Le);t=babelHelpers.possibleConstructorReturn(this,(Le.__proto__||Object.getPrototypeOf(Le)).call(this,e,t));return t.state.title="Font Size",t.setting="size",t.listOptions=e.labels[t.setting],t.select(),t}function Se(e,t){babelHelpers.classCallCheck(this,Se);t=babelHelpers.possibleConstructorReturn(this,(Se.__proto__||Object.getPrototypeOf(Se)).call(this,e,t));return t.state.title="Font Opacity",t.setting="fontOpacity",t.listOptions=e.labels[t.setting],t.select(),t}function je(e,t){babelHelpers.classCallCheck(this,je);t=babelHelpers.possibleConstructorReturn(this,(je.__proto__||Object.getPrototypeOf(je)).call(this,e,t));return t.state.title="Font Family",t.setting="fontFamily",t.listOptions=e.labels[t.setting],t.select(),t}function Ne(e,t){babelHelpers.classCallCheck(this,Ne);t=babelHelpers.possibleConstructorReturn(this,(Ne.__proto__||Object.getPrototypeOf(Ne)).call(this,e,t));return t.state.title="Font Color",t.setting="fontColor",t.listOptions=e.labels[t.setting],t.select(),t}function Ie(e,t){babelHelpers.classCallCheck(this,Ie);t=babelHelpers.possibleConstructorReturn(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,e,t));return t.state.title="Character Edge Style",t.setting="edgeType",t.listOptions=e.labels[t.setting],t.select(),t}function De(e,t){babelHelpers.classCallCheck(this,De);t=babelHelpers.possibleConstructorReturn(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,e,t));return t.state.title="Background Opacity",t.setting="backgroundOpacity",t.listOptions=e.labels[t.setting],t.select(),t}function Ae(e,t){babelHelpers.classCallCheck(this,Ae);t=babelHelpers.possibleConstructorReturn(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this,e,t));return t.state.title="Background Color",t.setting="backgroundColor",t.listOptions=e.labels[t.setting],t.select(),t}function Ue(e,t,a){var n,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;babelHelpers.classCallCheck(this,Ue),"string"==typeof e&&(n=e.match(/[0-9\.]+/g),e=parseInt(n[0]),t=parseInt(n[1]),a=parseInt(n[2]),s=null!=n[3]?parseFloat(n[3]):1),this.r=e,this.g=t,this.b=a,this.a=s}function Fe(e,t){return babelHelpers.classCallCheck(this,Fe),babelHelpers.possibleConstructorReturn(this,(Fe.__proto__||Object.getPrototypeOf(Fe)).call(this,e,t))}function qe(e,t){babelHelpers.classCallCheck(this,qe);t=babelHelpers.possibleConstructorReturn(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,e,t));return t.listOptions=[{label:"Font Family",key:"fontFamily",value:"Arial"},{label:"Font Color",key:"fontColor",value:"Red"},{label:"Font Size",key:"size",value:"100%"},{label:"Font Opacity",key:"fontOpacity",value:"0%"},{label:"Background Color",key:"backgroundColor",value:"Black"},{label:"Background Opacity",key:"backgroundOpacity",value:"0%"},{label:"Window Color",key:"windowColor",value:"Red"},{label:"Window Opacity",key:"windowOpacity",value:"0%"},{label:"Character Edge Style",key:"edgeType",value:"None"},{label:"Edge Color",key:"edgeColor",value:"Red"},{label:"Edge Opacity",key:"edgeOpacity",value:"Red"},{label:"Scroll",key:"scroll",value:"Pop-out"}],t}function Ge(e,t){return babelHelpers.classCallCheck(this,Ge),babelHelpers.possibleConstructorReturn(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,e,t))}function Be(e,t){babelHelpers.classCallCheck(this,Be);t=babelHelpers.possibleConstructorReturn(this,(Be.__proto__||Object.getPrototypeOf(Be)).call(this,e,t));return t.state.keyDown=!1,t}function Ke(e,t){babelHelpers.classCallCheck(this,Ke);t=babelHelpers.possibleConstructorReturn(this,(Ke.__proto__||Object.getPrototypeOf(Ke)).call(this,e,t));return t.closeHandler=t.closeHandler.bind(t),t._open=!1,t}function Ve(e,t){babelHelpers.classCallCheck(this,Ve);t=babelHelpers.possibleConstructorReturn(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).call(this,e,t));return t.classList.add("amp-list-item"),t.classList.remove("amp-icon"),t.classList.remove("amp-control"),t.state.direction=t.props.direction||"none",t}function We(e,t){babelHelpers.classCallCheck(this,We);t=babelHelpers.possibleConstructorReturn(this,(We.__proto__||Object.getPrototypeOf(We)).call(this,e,t));return t.classList.add("amp-settings",!0),t.state.altText="MSG_SETTINGS",t}function ze(e,t){babelHelpers.classCallCheck(this,ze);t=babelHelpers.possibleConstructorReturn(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this,e,t));return t.classList.add("amp-fullscreen",!0),t}function Ye(e,t){babelHelpers.classCallCheck(this,Ye);t=babelHelpers.possibleConstructorReturn(this,(Ye.__proto__||Object.getPrototypeOf(Ye)).call(this,e,t));return t.classList.add("amp-unmute",!0),t.state.altText="MSG_UNMUTE",t.state.dismissed=!1,t}function Xe(e,t){babelHelpers.classCallCheck(this,Xe);t=babelHelpers.possibleConstructorReturn(this,(Xe.__proto__||Object.getPrototypeOf(Xe)).call(this,e,t));return t.state.level="",t.classList.add("amp-mute",!0),t.state.altText="MSG_MUTE",t}function Ze(e,t){babelHelpers.classCallCheck(this,Ze);t=babelHelpers.possibleConstructorReturn(this,(Ze.__proto__||Object.getPrototypeOf(Ze)).call(this,e,t));return t.state.toggled=!1,t.state.onlabel="",t.state.offlabel="",t}function $e(e,t){babelHelpers.classCallCheck(this,$e);t=babelHelpers.possibleConstructorReturn(this,($e.__proto__||Object.getPrototypeOf($e)).call(this,e,t));return t.classList.add("amp-volume",!0),t.state.min=0,t.state.max=100,t.state.percent=t.player.volume,t.state.value=100*t.player.volume,t.state.altText="MSG_VOLUME",t._open=!0,t.timeout=null,t.config.volume&&(t.direction=t.config.volume.direction||"","vertical"===t.direction&&(t.classList.add("amp-volume-"+t.direction,!0),t.classList.add("amp-slider-"+t.direction,!0),t.classList.remove("amp-slider",!0))),t}function Je(e,t){babelHelpers.classCallCheck(this,Je);t=babelHelpers.possibleConstructorReturn(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this,e,t));return t.classList.add("amp-progress",!0),t.state.altText="MSG_SEEK",t.state.textVisible="visible",t.bindHandlers(["onMouseMove","onaddurationchange","onadtimeupdate","onaddurationchange","onadmanagerloaded"]),t.isTouch=akamai.amp.Utils.isTouch,t}function Qe(e,t){babelHelpers.classCallCheck(this,Qe);t=babelHelpers.possibleConstructorReturn(this,(Qe.__proto__||Object.getPrototypeOf(Qe)).call(this,e,t));return t.state.percent=0,t.state.value=0,t.state.min=0,t.state.range=0,t.state.max=1,t.state.dragging=!1,t.increment=.1,t.classList.add("amp-slider"),t.direction="",t.bindHandlers(["onHandleMouseDown","onHandleMouseUp","onHandleMouseMove"]),t}function et(e,t){babelHelpers.classCallCheck(this,et);t=babelHelpers.possibleConstructorReturn(this,(et.__proto__||Object.getPrototypeOf(et)).call(this,e,t));return t.state.duration=t.player.duration,t}function tt(e,t){babelHelpers.classCallCheck(this,tt);t=babelHelpers.possibleConstructorReturn(this,(tt.__proto__||Object.getPrototypeOf(tt)).call(this,e,t));return t.state.isLive=!0,t}function at(e,t){babelHelpers.classCallCheck(this,at);t=babelHelpers.possibleConstructorReturn(this,(at.__proto__||Object.getPrototypeOf(at)).call(this,e,t));return t.state.currentTime=t.player.currentTime,t.state.duration=t.player.duration,t}function nt(){babelHelpers.classCallCheck(this,nt)}function st(e,t){babelHelpers.classCallCheck(this,st);t=babelHelpers.possibleConstructorReturn(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,e,t));return t.classList.add("amp-buffering-overlay",!0),t.classList.add("amp-icon"),t}function lt(e,t){babelHelpers.classCallCheck(this,lt);t=babelHelpers.possibleConstructorReturn(this,(lt.__proto__||Object.getPrototypeOf(lt)).call(this,e,t));return t.classList.add("amp-pause-overlay",!0),t.state.altText="MSG_PLAY",t}function it(e,t){babelHelpers.classCallCheck(this,it);t=babelHelpers.possibleConstructorReturn(this,(it.__proto__||Object.getPrototypeOf(it)).call(this,e,t));return t.classList.add("amp-playpause",!0),t.state.altText="MSG_PLAY",t}function ot(e,t){return babelHelpers.classCallCheck(this,ot),babelHelpers.possibleConstructorReturn(this,(ot.__proto__||Object.getPrototypeOf(ot)).call(this,e,t))}function rt(e,t){babelHelpers.classCallCheck(this,rt);t=babelHelpers.possibleConstructorReturn(this,(rt.__proto__||Object.getPrototypeOf(rt)).call(this,e,t));return t.classList.add("amp-icon"),t.classList.add("amp-control"),t.mouseFocus=!1,t.focused=!1,t.state.altText=t.altText,t.bindHandlers(["onMouseDown","onMouseUp","onMouseOver","onMouseOut","onFocus","onBlur","onKeyDown","onClick","onChange"]),t}function ct(e,t){babelHelpers.classCallCheck(this,ct);t=babelHelpers.possibleConstructorReturn(this,(ct.__proto__||Object.getPrototypeOf(ct)).call(this,e,t));return t.state.components=[],t}function pt(e,t){babelHelpers.classCallCheck(this,pt);t=babelHelpers.possibleConstructorReturn(this,(pt.__proto__||Object.getPrototypeOf(pt)).call(this,e,t));return t.state={l10n:t.player.l10n},t.classList=new a(t,t.props.classList),t}function ut(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];babelHelpers.classCallCheck(this,ut),this.component=e,this.tokens=t}akamai.amp.AMP.registerPlugin("react",["html","flash","external"],i.create),e.UI=i,e.Component=n,e.Container=l,e.ClassList=a,e.Panel=O,e.PanelMenu=t,e.PanelControl=o,e.ListItem=H,e.Mode=se}(this.akamai.amp.react=this.akamai.amp.react||{});
