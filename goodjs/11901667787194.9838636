var load=function(){"use strict";function o(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Te[ye.call(e)]||"object":typeof e}function T(e){return"function"===o(e)}function b(e){return"string"===o(e)}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function c(e){var t,i=void 0;if(e&&"object"===o(e)&&!e.nodeType&&(null==(t=e)||t!==t.window)){try{if(e.constructor&&!be.call(e,"constructor")&&!be.call(e.constructor.prototype,"isPrototypeOf"))return}catch(e){return}for(i in e);return void 0===i||be.call(e,i)}}function n(e,t){for(var i=t.length,o=0,n=e.length;o<i;)e[n++]=t[o++];return e.length=n,e}function r(e,t){return 1===e.nodeType&&-1<(" "+e.className+" ").indexOf(" "+t+" ")}function a(t){try{return Array.prototype.slice.call(t)}catch(e){for(var i=[],o=0,n=t.length;o<n;o++)i.push(t[o]);return i}}function l(e){return Le[e]||(Le[e]=e.replace(Ee,function(e,t){return t.toUpperCase()}))}function d(e){return e._eid||(e._eid=Ie++)}function h(e,t,i,o){var n,s=void 0;return(t=u(t)).ns&&(n=t.ns,s=new RegExp("(?:^| )"+n.replace(" "," .* ?")+"(?: |$)")),(Pe[d(e)]||[]).filter(function(e){return e&&(!t.type||e.type==t.type)&&(!t.ns||s.test(e.ns))&&(!o||e.selector==o)})}function p(e,t){return e.delegate&&!Ve&&e.type in xe||!!t}function u(e){e=(""+e).split(".");return{type:e[0],ns:e.slice(1).sort().join(" ")}}function g(e){return Ve&&xe[e]||!Ne&&De[e]||e}function m(o,e,n,s,r,a){var t=d(o),c=Pe[t]||(Pe[t]=[]);e.split(/\s/).forEach(function(t){var i=r||n,e=u(t);t=g(e.type),e.fn=n,e.selector=s,e.delegate=r,e.proxy=function(e){return(t=(t=e)||window.event).target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),t.stopPropagation||(t.stopPropagation=function(){t.cancelBubble=!0}),(e=t).currentTarget||(e.currentTarget=o),i.apply(o,[e]);var t},e.i=c.length,c.push(e),"propertychange"==t&&s?new Me(s,o).forEach(function(e){m(e,t,n)}):o.addEventListener?o.addEventListener(t,e.proxy,p(e,a)):o.attachEvent("on"+t,e.proxy)})}function f(){}function y(e,t){var i,o=0<arguments.length&&void 0!==e?e:{},n=1<arguments.length&&void 0!==t?t:[],s=[];for(i in o)!function(t){var e=o[t];-1===n.indexOf(t)&&""!==e&&null!=e&&(e=!ve(e)?[e]:e).forEach(function(e){s.push(encodeURIComponent(t)+"="+encodeURIComponent(e))})}(i);return s.join("&")}function v(){}function w(e,t,i,o){t="function"==typeof t?(o=i,i=t,{}):t||{};var n,s=document.createElement("script");for(n in t)"retry"!==n&&s.setAttribute(n,t[n]);t.crossOrigin&&(t.retry=1,delete t.crossOrigin),s.src=e;var r=document.getElementsByTagName("head")[0],a=!1;s.onload=s.onreadystatechange=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,s.onload=s.onreadystatechange=null,r.removeChild(s),i&&i())},s.onerror=function(){s.onerror=null,t.retry?(t.retry--,w(e,t,i,o)):o&&o()},r.appendChild(s)}function s(e){for(var t=arguments.length,i=Array(1<t?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(!i.length)return e;var n=i.shift();return(c(n)||ve(n))&&C(e,n,!0),s.apply(void 0,[e].concat(i))}function C(e,t,i){for(var o in t)i&&(c(t[o])||ve(t[o]))?(c(t[o])&&!c(e[o])&&(e[o]={}),ve(t[o])&&!ve(e[o])&&(e[o]=[]),C(e[o],t[o],i)):void 0!==t[o]&&""!==t[o]&&(e[o]=t[o])}function Y(e,t){return st.test(e)?"email":(pt[t||"CN"]||ht).test(e)?"mobile":"string"}function k(e,t){return"mobile"===Y(e,t)}function _(e){return rt.test(e)||at.test(e)||ct.test(e)}function t(e){return lt.test(e)}function S(e,t){return Array.isArray(e)?e.map(function(e){return S(e,t)}):ut+"//"+(t?gt:"")+e}function R(e){var t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.exec(e||window.location.href)[0].split("."),e=t.length;return t[e-2]+"."+t[e-1]}function M(e){e=String(e).match(/\.(\w+)\.(com|ai|net|tv)$/),e=e&&e[1];return e&&yt[e]}function e(){}function E(e){e=0<arguments.length&&void 0!==e?e:{};return vt&&0===arguments.length||(vt=Object.assign({},bt),e.regRules&&(vt.regRules=e.regRules),L(e),"tempMobile"!==vt.template&&"tempTlsiteMobile"!==vt.template||(vt.isMobile=!0),"tempTlsite"!==vt.template&&"tempTlsiteMobile"!==vt.template||(vt.isTlsite=!0),"tempB"===vt.template&&(vt.isIku=!0),"20160317PLF000211"===vt.pid&&(vt.showSuccessPage=!0),I()),vt}function L(e,t){if(vt&&e){for(var i in e)null===e[i]&&delete e[i];e.config&&e.config.__dataType?(function(e){var t,i=vt.isMobile;for(t in e){if(-1<t.indexOf("_h5")){if(!i)continue}else if(i)continue;var o=function(e){var t,i={};for(t in e)s(i,e[t]);return i}(e[t]);C(vt,o)}}(e.config),delete e.config,L(e),I()):(s(vt,e),t&&I())}}function I(){var e;2===(e=vt.themes).length&&t(e[0])&&t(e[1])||(vt.themes=bt.themes),function(){var e=vt.thirdPartUrlAry;vt.isTlsite&&!vt.dtTlsiteAry&&(vt.dtTlsiteAry=["alipay","taobao","qq","weibo"],vt.isMobile||vt.dtTlsiteAry.push("wechat")),e&&e.length&&vt.isTlsite&&e.forEach(function(e){e.link+="&isCheckBind=1"});var t=(vt.isTlsite?vt.dtTlsiteAry:vt.tlsiteAry)||[];{var i;(t=t&&ve(t)?t:t.split("|")).length&&e&&e.length&&(i=[],t.forEach(function(t){e.forEach(function(e){if(t===e.site)return i.push(e),!0})}),vt.thirdPartUrlAry=i)}}(),(e=vt.accountDomain||"")&&function(e){e&&(mt=-1===e.indexOf("http")?S(e,-1===e.indexOf("account")):e)}("https://"+(e=e.replace(/^https?:\/\/|^\/\//i,""))),void 0!==vt.isHasLogin&&(vt.mode="embedded",vt.size="mini"),ve(vt.qrBu)||(vt.qrBu=bt.qrBu),ve(vt.loginModel)||(vt.loginModel=bt.loginModel),ve(vt.regModel)||(vt.regModel=bt.regModel),vt.loginSubmitStyle&&-1===vt.loginSubmitStyle.indexOf("background-color")&&(vt.loginSubmitStyle+="background-color:"),vt.registerSubmitStyle&&-1===vt.registerSubmitStyle.indexOf("background-color")&&(vt.registerSubmitStyle+="background-color:"),ve(vt.regRules)?3===vt.regRules.length&&-1<vt.regRules[2].indexOf("//")&&(vt.regRules[3]=vt.regRules[2],vt.regRules[2]=bt.regRules[2]):vt.regRules=bt.regRules,vt.isIku&&-1===window.location.host.indexOf("account.youku.com")&&(vt.isThirdPartLogin=!1)}function A(){}function P(){function n(e,t,i){f||(f=!0,s.callback(e,t,i))}function e(){clearTimeout(c);var e=new Error("è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•");return e.statusCode=0,n(e,"",p)}function t(){if(!a){clearTimeout(c);var e=1223===r.status?204:r.status,t=p,i=null,o=void 0;if(0!==e){if(o=r.responseText,"json"===s.dataType)try{o=JSON.parse(o)}catch(e){i=new Error("JSONæ•°æ®è§£æžé”™è¯¯: "+o)}t={body:o,statusCode:e,method:d,headers:r.getAllResponseHeaders(),url:l,rawRequest:r}}else i=new Error("Internal XMLHttpRequest Error");return i||s.afterSend(o),n(i,o,t)}}var s=function(e,t,i){return e=b(e)?{url:e}:e,T(t)&&(e.callback=t),T(i)&&(e.callback=i),Object.assign({},_t,e,t)}.apply(null,arguments),r=s.xhr||function(){try{return XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw new Error("Unable to create XHR object.")}}(),a=void 0,c=void 0,l=r.url=s.url,d=r.method=s.type.toUpperCase()||"GET",i=r.headers=s.headers||{},o=r.async=s.async,h=s.data?y(s.data):"",p={body:void 0,headers:"",statusCode:0,method:d,url:l,rawRequest:r},u=i.accept,g=i["content-type"];"json"===s.dataType&&(u||(i.accept="application/json"),"GET"!==d&&"HEAD"!==d&&(g||(i["content-type"]="application/json"))),"GET"===d?h&&(l+=(/\?/.test(l)?"&":"?")+h):"POST"===d&&(u||(i.accept="*/*"),g||(i["content-type"]="application/x-www-form-urlencoded"),h.replace(/%20/g,"+"));var m,f=!1;for(m in r.onreadystatechange=function(){4===r.readyState&&setTimeout(t,0)},r.onload=t,r.onerror=e,r.onprogress=A,r.onabort=function(){a=!0},r.ontimeout=e,r.open(d,l,o,s.username,s.password),o&&0<s.timeout&&(c=setTimeout(function(){a||(a=!0,r.abort("timeout"),e())},s.timeout)),i)i.hasOwnProperty(m)&&r.setRequestHeader(m,i[m]);return s.withCredentials&&(r.withCredentials=!0),s.beforeSend(r),r.send(h||null),r}function V(e,t,i){var o=this,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=t.match(St),r=n.eventName||s&&s[1]||"";return("post"===n.methods?N:x)(e+t,i,function(e){return $(e)?(T(n.errorCallback)&&n.errorCallback(e),void o.emit(r+":error",e)):T(n.responseCallback)?void n.responseCallback(e):void(e.result&&"success"===e.result?(T(n.callback)&&n.callback(n.getDataNode?e.data:e),o.emit(r+":success",n.getDataNode?e.data:e)):(T(n.errorCallback)&&n.errorCallback(e),o.emit(r+":fail",e)))})}function x(e,t,i){var o=e;return T(t)&&(i=t,t=null),t&&(e+=(-1===e.indexOf("?")?"?":"&")+y(t)),function(e,t,i){function o(){c.parentNode&&c.parentNode.removeChild(c),window[s]=v,l&&clearTimeout(l)}"function"==typeof t&&(i=t,t={});var n=(t=t||{}).prefix||"__jp",s=t.name||n+nt++,r=t.param||"callback",a=null!=t.timeout?t.timeout:6e4,n=encodeURIComponent,t=document.getElementsByTagName("script")[0]||document.head,c=void 0,l=void 0;return a&&(l=setTimeout(function(){o(),i&&i(new Error("è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•"))},a)),window[s]=function(e){o(),i&&i(e)},e=(e+=(-1<e.indexOf("?")?"&":"?")+r+"="+n(s)).replace("?&","?"),(c=document.createElement("script")).src=e,t.parentNode.insertBefore(c,t),function(){window[s]&&o()}}(e,{param:"jsonpCallback",timeout:1e4},function(e){D(o,t,e),i(e)})}function N(i,o,n){if(kt.isNeedRequestProxy())return kt.request(i,o,n);if(document.addEventListener){var e=P(i,{type:"POST",dataType:"json",withCredentials:!0,timeout:1e4,data:o},function(e,t){D(i,o,e||t),n(e||t)});return function(){e.abort?e.abort():e.onabort()}}return x(i,o,n)}function D(e,t,i){if(window.YKLoginTracker){t={code:2,ajaxurl:e,params:y(t),c5:function(e){e=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),e=document.cookie.match(e);return e?unescape(e[2]):null}("cna")};if($(i))t.msg=e+i.message,t.sampleRate=1,o=function(e,t){!1===e&&window.YKLoginTracker.log({code:12,msg:"accountåŸŸä¸å¯è®¿é—®",sampleRate:1,c1:t})},-1<mt.indexOf(window.location.host)||ft||((n=new Image).onerror=function(){n.onerror=n.onload=null,o&&o(!1,mt)},n.onload=function(){n.onerror=n.onload=null,ft=!1,o&&o(!0,mt)},n.src=mt+"/static-resources/images/list_icon.png",ft=!0);else{if(!i||!i.result||"success"===i.result)return;if(function(e){for(var t=0,i=Rt.length;t<i;t++)if(e&&-1<e.indexOf(Rt[t]))return!0;return!1}(e))return;t.msg=e+"æŽ¥å£JSONè¿”å›žé”™è¯¯<code:"+(i.errorCode||"")+">",t.sampleRate=.01,window.JSON&&JSON.stringify&&(t.c3=JSON.stringify(i||{}))}if(window.YKLoginTracker.log(t),Mt&&window.external)try{window.external.execute("iku",'iku://|login|psp|error|json|{"url":"'+e+'","code":"'+(i.errorCode||"TIMEOUT")+'", "desc":"'+(i.errorMsg||i.message)+'"}|')}catch(e){}}var o,n}function $(e){return e instanceof Error}function B(e){var t=e.isMobile?Fe:qe,i=(e.bgThemes||e.themesBgStyle||"").match(/url\((\S*)\)/);i&&i[1]&&((new Image).src=i[1]),e.useAliLoginFrame&&e.padding&&Array.isArray(e.padding)&&e.padding.length&&(e.padding[3]=e.padding[3]||e.padding[1]||e.padding[0],e.padding[2]=e.padding[2]||e.padding[0],e.padding[1]=e.padding[1]||e.padding[0],e.padding[0]-=30,e.padding[1]-=30,e.padding[2]-=30,e.padding[3]-=30),i=t(Object.assign(e,{padding:Array.isArray(e.padding)?e.padding:[],secColor:e.themesColor||e.themes[0],mainColor:e.themesDecoColor||e.themes[1]})),t=document.getElementsByTagName("head")[0]||document.body,(e=document.createElement("style")).type="text/css",e.media="screen",e.styleSheet?e.styleSheet.cssText=i:e.innerHTML=i,t.appendChild(e)}function O(e,t,i,o){var n;w((n=e,e=window.YT_STATIC_DOMAIN||"",n=e&&-1===n.indexOf(e)?n.replace("//g.alicdn.com",e):n),t,i,o)}function F(t,e,i){var o=2<arguments.length&&void 0!==i?i:{},n=E();o.callbackURL=e.msg&&e.msg.callback||o.callbackURL||n.callbackURL||n.callback||"",o.skip=o.skip||!1,n.needTaobaoAuth&&(o.callbackURL=(r=o.callbackURL,s={taobaoAuth:n.taobaoAuth||!1},r+((-1===r.indexOf("?")?"?":"&")+y(s))));var s,i=o.callbackURL,r=o.skip;e&&e.msg&&t&&((s=Ft.getInstance())&&s.isMiniProgram&&window.my.postMessage({token:e.msg.cookieToken,type:"needLogin"}),e.msg.domains&&0!==e.msg.domains.length?q(t,function(e){U(t,e,o)},function(){q(t,function(e){U(t,e,o)})}):i?r||(W("P_j_scl","hadCheckLogin",R(i)),window.location.href=i):(W("P_j_scl","hadCheckLogin",R()),n.loginSuccess()))}function q(e,t,i){var o=E();e.checkLogin({buid:o.buid,pid:o.pid},function(e){"success"===e.result?t&&t(e):i&&i()},function(){i&&i()})}function U(n,e,t){var t=2<arguments.length&&void 0!==t?t:{},s=E(),r=e.msg.tokens,a=e.msg.domains,o=a.length,c=t.callbackURL,t=t.skip,l={},d=!1,h=setTimeout(function(){d=!(h=null)},3e3);n.off("crossDomain:success crossDomain:fail crossDomain:error"),n.on("crossDomain:fail crossDomain:error",function(e){e=l[e.siteUrl];e&&(e.times++,e.query=!1)}),n.on("crossDomain:success",function(e){var t=l[e.siteUrl];t&&(t.times++,W("P_j_scl","hadCheckLogin",R(e.siteUrl)),clearInterval(t.timer),t.timer=null,t.state=!0)});for(var i=0;i<o;i++)!function(e){var t=r[e],i=S(a[e]);l[i]||(l[i]={times:0,timer:null,state:!1,query:!1});var o=l[i];o.timer=setInterval(function(){return o.state||3<=o.times?(o.timer&&(clearInterval(o.timer),o.timer=null),void(o.state=!0)):void(o.query||(n.crossDomain(i,{buid:s.buid,pid:s.pid,token:t}),o.query=!0))},100)}(i);if(t)return c&&L({callbackURL:c}),0;var p=setInterval(function(){for(var e=0,t=0;t<o;t++){var i=S(a[t]),i=l[i];i&&i.state&&e++}(o<=e||d)&&(clearInterval(p),clearTimeout(h),c?window.location.href=c:s.loginSuccess())},100)}function W(e,t,i){document.cookie=e+"="+escape(t)+";domain="+i+";path=/;"}function j(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function H(e,t,i,o,n,s){return j((s=j(j(t,e),j(o,s)))<<n|s>>>32-n,i)}function K(e,t,i,o,n,s,r){return H(t&i|~t&o,e,t,n,s,r)}function z(e,t,i,o,n,s,r){return H(t&o|i&~o,e,t,n,s,r)}function Q(e,t,i,o,n,s,r){return H(t^i^o,e,t,n,s,r)}function G(e,t,i,o,n,s,r){return H(i^(t|~o),e,t,n,s,r)}function X(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i,o,n,s,r=void 0,a=1732584193,c=-271733879,l=-1732584194,d=271733878,r=0;r<e.length;r+=16)a=K(i=a,o=c,n=l,s=d,e[r],7,-680876936),d=K(d,a,c,l,e[r+1],12,-389564586),l=K(l,d,a,c,e[r+2],17,606105819),c=K(c,l,d,a,e[r+3],22,-1044525330),a=K(a,c,l,d,e[r+4],7,-176418897),d=K(d,a,c,l,e[r+5],12,1200080426),l=K(l,d,a,c,e[r+6],17,-1473231341),c=K(c,l,d,a,e[r+7],22,-45705983),a=K(a,c,l,d,e[r+8],7,1770035416),d=K(d,a,c,l,e[r+9],12,-1958414417),l=K(l,d,a,c,e[r+10],17,-42063),c=K(c,l,d,a,e[r+11],22,-1990404162),a=K(a,c,l,d,e[r+12],7,1804603682),d=K(d,a,c,l,e[r+13],12,-40341101),l=K(l,d,a,c,e[r+14],17,-1502002290),a=z(a,c=K(c,l,d,a,e[r+15],22,1236535329),l,d,e[r+1],5,-165796510),d=z(d,a,c,l,e[r+6],9,-1069501632),l=z(l,d,a,c,e[r+11],14,643717713),c=z(c,l,d,a,e[r],20,-373897302),a=z(a,c,l,d,e[r+5],5,-701558691),d=z(d,a,c,l,e[r+10],9,38016083),l=z(l,d,a,c,e[r+15],14,-660478335),c=z(c,l,d,a,e[r+4],20,-405537848),a=z(a,c,l,d,e[r+9],5,568446438),d=z(d,a,c,l,e[r+14],9,-1019803690),l=z(l,d,a,c,e[r+3],14,-187363961),c=z(c,l,d,a,e[r+8],20,1163531501),a=z(a,c,l,d,e[r+13],5,-1444681467),d=z(d,a,c,l,e[r+2],9,-51403784),l=z(l,d,a,c,e[r+7],14,1735328473),a=Q(a,c=z(c,l,d,a,e[r+12],20,-1926607734),l,d,e[r+5],4,-378558),d=Q(d,a,c,l,e[r+8],11,-2022574463),l=Q(l,d,a,c,e[r+11],16,1839030562),c=Q(c,l,d,a,e[r+14],23,-35309556),a=Q(a,c,l,d,e[r+1],4,-1530992060),d=Q(d,a,c,l,e[r+4],11,1272893353),l=Q(l,d,a,c,e[r+7],16,-155497632),c=Q(c,l,d,a,e[r+10],23,-1094730640),a=Q(a,c,l,d,e[r+13],4,681279174),d=Q(d,a,c,l,e[r],11,-358537222),l=Q(l,d,a,c,e[r+3],16,-722521979),c=Q(c,l,d,a,e[r+6],23,76029189),a=Q(a,c,l,d,e[r+9],4,-640364487),d=Q(d,a,c,l,e[r+12],11,-421815835),l=Q(l,d,a,c,e[r+15],16,530742520),a=G(a,c=Q(c,l,d,a,e[r+2],23,-995338651),l,d,e[r],6,-198630844),d=G(d,a,c,l,e[r+7],10,1126891415),l=G(l,d,a,c,e[r+14],15,-1416354905),c=G(c,l,d,a,e[r+5],21,-57434055),a=G(a,c,l,d,e[r+12],6,1700485571),d=G(d,a,c,l,e[r+3],10,-1894986606),l=G(l,d,a,c,e[r+10],15,-1051523),c=G(c,l,d,a,e[r+1],21,-2054922799),a=G(a,c,l,d,e[r+8],6,1873313359),d=G(d,a,c,l,e[r+15],10,-30611744),l=G(l,d,a,c,e[r+6],15,-1560198380),c=G(c,l,d,a,e[r+13],21,1309151649),a=G(a,c,l,d,e[r+4],6,-145523070),d=G(d,a,c,l,e[r+11],10,-1120210379),l=G(l,d,a,c,e[r+2],15,718787259),c=G(c,l,d,a,e[r+9],21,-343485551),a=j(a,i),c=j(c,o),l=j(l,n),d=j(d,s);return[a,c,l,d]}function J(e){for(var t=void 0,i="",o=32*e.length,t=0;t<o;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function Z(e){var t=void 0,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(var o=8*e.length,t=0;t<o;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function ee(e){for(var t,i="0123456789abcdef",o="",n=void 0,n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=i.charAt(t>>>4&15)+i.charAt(15&t);return o}function te(e){return unescape(encodeURIComponent(e))}function ie(e){return J(X(Z(e=te(e)),8*e.length))}function oe(e,t){return function(e,t){var i=void 0,o=Z(e),n=[],s=[];for(n[15]=s[15]=void 0,16<o.length&&(o=X(o,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^o[i],s[i]=1549556828^o[i];return t=X(n.concat(Z(t)),512+8*t.length),J(X(s.concat(t),640))}(te(e),te(t))}function ne(e,t,i){return t?i?oe(t,e):ee(oe(t,e)):i?ie(e):ee(ie(e))}function se(e){e=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),e=document.cookie.match(e);return e?unescape(e[2]):null}function re(e,t){var i=[];return"email"===e?i=[{name:"YT-passport",rules:"required|valid_email",errorMsg:t.errorTips.account},{name:"YT-regPassword",rules:"required|cant_matches[YT-passport]|cant_match_email_account[YT-passport]|min_length[6]|max_length[16]|valid_space_char|valid_illegal_char|valid_pwdStrong|valid_pwd_n_s_spe",errorMsg:t.errorTips.password},{name:"YT-repeatPwd",rules:"required|matches[YT-regPassword]",errorMsg:t.errorTips.repeatPassword},{name:"YT-regPhone",rules:"required|!valid_mobile",errorMsg:t.errorTips.mobile}]:"mobile"===e&&(i=[{name:"YT-mPassport",rules:"required|valid_mobile",errorMsg:t.errorTips.mobile},{name:"YT-mRegPassword",rules:"required|min_length[6]|max_length[16]|valid_space_char|valid_illegal_char|valid_pwdStrong|valid_pwd_n_s_spe",errorMsg:t.errorTips.password},{name:"YT-mRepeatPwd",rules:"required|matches[YT-mRegPassword]",errorMsg:t.errorTips.repeatPassword}]),i}function ae(e){window.YKLoginTracker&&window.YKLoginTracker.log({code:13,msg:"éªŒè¯æ»‘å—å¼‚å¸¸",sampleRate:1,c1:e||""})}function ce(e,t){return void 0===t?t=new Date:i(t)?t=new Date(parseInt(t,10)):b(t)&&(t=new Date(t.replace(/-/g,"/"))),e.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return Ui(t.getFullYear(),e);case"M":return Ui(t.getMonth()+1,e);case"D":return Ui(t.getDate(),e);case"w":return t.getDay()+1;case"h":return Ui(t.getHours(),e);case"m":return Ui(t.getMinutes(),e);case"s":return Ui(t.getSeconds(),e)}})}function le(t){function e(e){e&&!M(e.origin)||t(e)}window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e)}var de=Array.prototype,he=de.slice,pe=Object,ue=pe.prototype,ge=String.prototype,me=Function.prototype,fe=function(){};window.console||(window.console={log:fe,error:fe}),ge.trim||(ge.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),de.filter||(de.filter=function(e,t){for(var i=[],o=0,n=this.length;o<n;o++)o in this&&e.call(t,this[o],o,this)&&i.push(this[o]);return i}),de.forEach||(de.forEach=function(e,t){for(var i=0,o=this.length;i<o;i++)i in this&&e.call(t,this[i],i,this)}),de.some||(de.some=function(e,t){for(var i=0,o=this.length;i<o;i++)if(i in this&&e.call(t,this[i],i,this))return!0;return!1}),de.map||(de.map=function(e,t){for(var i=0,o=this.length,n=new Array(o);i<o;i++)i in this&&(n[i]=e.call(t,this[i],i,this));return n}),de.indexOf||(de.indexOf=function(e,t){var i=this.length;for((t=parseInt(t)||0)<0&&(t+=i);t<i;t++)if(t in this&&this[t]===e)return t;return-1}),Array.from||(Array.from=function(){return he.call(arguments)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===ue.toString.call(e)}),Date.now||(Date.now=function(){return+new Date}),pe.keys||(pe.keys=function(e){var t=[],i=void 0;for(i in e)ue.hasOwnProperty.call(e,i)&&t.push(i);return t}),pe.create||(pe.create=function(e){function t(){}return t.prototype=e,new t}),pe.assign||(pe.assign=function(e){e=pe(e);for(var t=arguments.length,i=1;i<t;i++){var o,n=arguments[i];for(o in n)pe.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),me.bind||(me.bind=function(e){function t(){return o.apply(this instanceof n?this:e||window,i.concat(he.call(arguments)))}var i=he.call(arguments,1),o=this,n=function(){};return n.prototype=this.prototype,t.prototype=new n,t});var Te={},fe="Boolean Number String Function Array Date RegExp Object".split(" "),ge=Object.prototype,be=ge.hasOwnProperty,ye=ge.toString;fe.forEach(function(e){Te["[object "+e+"]"]=e.toLowerCase()});var ve=Array.isArray,we=/^\s*(<[\w\W]+>)[^>]*$/,Ce=window.document,de=[],me=de.indexOf,ge=de.forEach,Ye=void 0,ke=void 0;document.querySelectorAll?Ye=ke=function(e,t){return(t||Ce).querySelectorAll(e)}:(Ye=function(e,t){for(var o=e.split(" "),n=[t],i=0,s=o.length;i<s;i++)!function(t){if(""===o[t].trim())return;var i=[];n.forEach(function(e){i=i.concat(ke(o[t],e))}),n=i}(i);return n},ke=function(e,t){var i,o=e.substring(1),n=void 0;switch(e.charAt(0)){case"#":i=o,n=(i=Ce.getElementById(i))?[i]:[];break;case".":n=function(e,t){if((t=void 0!==t?t:Ce).getElementsByClassName)return a(t.getElementsByClassName(e));for(var i=[],o=a(t.getElementsByTagName("*")),n=0,s=o.length;n<s;n++)r(o[n],e)&&i.push(o[n]);return i}(o,t);break;default:n=a((t||Ce).getElementsByTagName(e))}return n});function _e(e,t){if(this.length=0,!e)return this;if(this.selector=e,this.context=t||Ce,"string"==typeof e){t=we.exec(e);n(this,a(t&&t[1]?function(e){var t=document.createElement("tbody"),i=document.createDocumentFragment();t.innerHTML=e;for(var o=t.childNodes;o.length;){var n=o[0];1===n.nodeType&&i.appendChild(n)}return i.childNodes}(t[1]):(-1!==e.indexOf(" ")?Ye:ke)(e,this.context)))}else if(e.nodeType)return this.context=this[0]=e,this.length=1,this}_e.prototype.splice=de.splice,_e.prototype.indexOf=me,_e.prototype.forEach=ge;function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Re,fe=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Me=(fe($e,Re=_e),$e.prototype.get=function(e){return this[e]||null},$e.prototype.pushStack=function(e){e=n(new $e,e);return e.prevObject=this,e.context=this.context,e},$e.prototype.eq=function(e){var t=[];return this[e]&&t.push(this[e]),this.pushStack(t)},$e.prototype.find=function(e){for(var t=[],i=0,o=this.length;i<o;i++)n(t,a(Ye(e,this[i])));return this.pushStack(t)},$e.prototype.hasClass=function(e){for(var t=0,i=this.length;t<i;t++)if(r(this[t],e))return!0;return!1},$e.prototype.addClass=function(t){return this.forEach(function(e){new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t)}),this},$e.prototype.removeClass=function(i){return this.forEach(function(e){var t=new RegExp("(\\s|^)"+i+"(\\s|$)");t.test(e.className)&&(e.className=e.className.replace(t," ").trim())}),this},$e.prototype.attr=function(e,t){for(var i=0,o=this.length;i<o;i++){if(void 0===t){if("object"!=typeof e)return this[i].getAttribute(e);for(var n in e)this.attr(n,e[n]);return this}"id"==e?this[i].id=t:"class"==e||"className"==e?this[i].className=t:this[i].setAttribute(e,t)}if(0!=this.length||null!=t)return this},$e.prototype.removeAttr=function(e){for(var t=0,i=this.length;t<i;t++)this[t].removeAttribute(e);return this},$e.prototype.css=function(e,t){for(var i,o,n=0,s=this.length;n<s;n++)if("object"==typeof e)for(var r in e)this.css(r,e[r]);else{if(void 0===t)return i=this[n],o=e,(void 0!==window.getComputedStyle?window.getComputedStyle(i):void 0!==i.currentStyle?i.currentStyle:i.style)[l(o)];i=this[n],o=t,i.style[l(e)]=o}return this},$e.prototype.val=function(e){for(var t=0,i=this.length;t<i;t++){if(void 0===e)return this[t].value;this[t].value=e}if(null!=e||0!=this.length)return this},$e.prototype.html=function(e){for(var t=0,i=this.length;t<i;t++){if(void 0===e)return this[t].innerHTML;"string"==typeof e?this[t].innerHTML=e:this[t].appendChild(e)}return null==e&&0==this.length?null:this},$e.prototype.remove=function(){for(var e=0,t=this.length;e<t;e++)this[e].parentNode.removeChild(this[e]);return this.length=0,this},$e.prototype.append=function(e){var t=this;return(e.nodeType?[e]:e).forEach(function(i){1===i.nodeType&&t.forEach(function(e,t){e.appendChild(0==t?i:i.cloneNode(!0))})}),this},$e.prototype.prepend=function(e){var t=this;return(e.nodeType?[e]:e).forEach(function(i){1===i.nodeType&&t.forEach(function(e,t){e.insertBefore(0==t?i:i.cloneNode(!0),e.firstChild)})}),this},$e.prototype.replaceWith=function(e){var t=this;return(e.nodeType?[e]:e).forEach(function(i){1===i.nodeType&&t.forEach(function(e,t){e.parentNode&&e.parentNode.replaceChild(0==t?i:i.cloneNode(!0),e)})}),this},$e.prototype.show=function(){for(var e=0,t=this.length;e<t;e++)this.eq(e).css("display","block");return this},$e.prototype.hide=function(){for(var e=0,t=this.length;e<t;e++)this.eq(e).css("display","none");return this},$e.prototype.on=function(t,s,r){return!T(r)&&T(s)&&(r=s,s=""),this.forEach(function(n){var e=s?function(e){var t=new $e(n).find(s),i=void 0;if(-1<t.indexOf(e.target))i=e.target;else for(var o=e.target;o&&n!=o;)if(o=o.parentNode,-1<t.indexOf(o)){i=o;break}if(i){e=function(e){var t,i={originalEvent:e};for(t in e)Ae.test(t)||void 0===e[t]||(i[t]=e[t]);return i.preventDefault=function(){e.preventDefault()},i.stopPropagation=function(){e.stopPropagation()},i}(e);return e.currentTarget=i,r.apply(i,[e])}}:void 0;m(n,t,r,s,e)}),this},$e.prototype.off=function(i,o,e){return!T(e)&&T(o)&&(e=o,o=""),this.forEach(function(e,t){!function o(n,e,t,s,r){(e||"").split(/\s/).forEach(function(i){h(n,i,0,s).forEach(function(t){var e=d(n);delete Pe[e][t.i],"propertychange"==(i=g(t.type))&&t.selector?new Me(t.selector,n).forEach(function(e){o(e,i,t.proxy)}):n.removeEventListener?n.removeEventListener(i,t.proxy,p(t,r)):n.detachEvent("on"+i,t.proxy)})})}(e,i,0,o)}),this},$e),de=window.document.documentElement,Ee=/-(\w)/g,Le={float:"cssFloat"in de.style?"cssFloat":"styleFloat"},Ie=1,Ae=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,Pe={},Ve="onfocusin"in document,xe={focus:"focusin",blur:"focusout"},Ne="oninput"in document.createElement("input"),De={input:"propertychange"};function $e(){return Se(this,Re.apply(this,arguments))}"focus blur load resize scroll unload click error mousedown mouseup mousemove mouseover mouseout change input select keydown keypress keyup".split(" ").forEach(function(t){Me.prototype[t]=function(e){return this.on(t,e)}});function Be(e,t){return new Me(e,t)}var Oe=/\s+/;f.prototype.on=function(e,t,i){var o,n;if(!t)return this;for(o=this.__events||(this.__events={}),e=e.split(Oe);n=e.shift();)(o[n]||(o[n]=[])).push(t,i);return this},f.prototype.once=function(e,t,i){var o,n,s=this;if(!t)return this;for(e=e.split(Oe);o=e.shift();)!function(e){n=function(){f.prototype.off.apply(s,[e]),t.apply(i||this,arguments)},f.prototype.on.apply(s,[e,n,i])}(o);return this},f.prototype.off=function(e,t,i){var o,n,s,r;if(!(o=this.__events))return this;if(!(e||t||i))return delete this.__events,this;for(e=e?e.split(Oe):Object.keys(o);n=e.shift();)if(s=o[n])if(t||i)for(r=s.length-2;0<=r;r-=2)t&&s[r]!==t||i&&s[r+1]!==i||s.splice(r,2);else delete o[n];return this},f.prototype.emit=function(e){var t,i,o,n,s,r,a,c;if(!(t=this.__events))return this;for(e=e.split(Oe),a=1<arguments.length?[].slice.call(arguments,1):[];i=e.shift();){if((o=t.all)&&(o=o.slice()),n=(n=t[i])?n.slice():n)for(s=0,r=n.length;s<r;s+=2)n[s].apply(n[s+1]||this,a);if(o)for(c=[i].concat(a),s=0,r=o.length;s<r;s+=2)o[s].apply(o[s+1]||this,c)}return this};function Fe(e){var t=".YT-changeType-box .active { color: #"+e.secColor+"; border-bottom: 1px solid #"+e.secColor+" }.YT-loginWrap .YT-form .YT-form-btn { background-color: #"+e.secColor+" !important; }.YT-loginWrap .YT-noGet, .YT-loginWrap .disabled-color { color: "+e.fontColor+" !important }.YT-loginWrap .YT-check-label.checked:before { color: #"+e.secColor+" }.YT-partner-hasLogin .YT-button { background-color: #"+e.secColor+" }.YT-partner-hasLogin .YT-button-l { background-color: #fff; color: #"+e.secColor+" }.YT-partner-hasLogin .YT-button-l:before { box-shadow: 0 0 0 1px #"+e.secColor+" inset }.YT-partner-foot .YT-footer a,.YT-loginWrap .YT-other-link { color: #"+e.secColor+" !important }.YT-loginWrap .YT-other-link:after { border-color: #"+e.secColor+" !important }.YT-checkbox:checked + .YT-label:before { background: #"+e.secColor+"; border-color: #"+e.secColor+" }";return""===e.needHideTitle||"false"!=e.needHideTitle&&0!=e.needHideTitle||(t+=".wap-header { display: none !important }"),e.isTlsite&&e.isChangeSkin&&(t+=" ",e.tlHeaderBg&&(t+='.YT-tbind-header { background:url("'+e.tlHeaderBg+'") no-repeat center top !important; background-size: cover !important; } '),t+=".YT-loginWrap a { color: "+(e.tlButtonColor||"#2692ff")+" }.YT-loginWrap .YT-switch-check.checked { background-color: "+e.tlButtonColor+" !important; }.YT-loginWrap .YT-switch-check.checked:before { border-left: 6px solid "+e.tlButtonColor+" !important; background-color: "+e.tlButtonColor+" !important; }.YT-loginWrap .YT-button { background-color:"+e.tlButtonColor+" !important; color: "+(e.tlButtonTextColor||"#fff")+"; } ",e.tlButtonGradientColor&&(t+=".YT-loginWrap .YT-button { background-image: -webkit-linear-gradient(left, "+e.tlButtonGradientColor+", "+e.tlButtonColor+"); } "),t+=".YT-loginWrap .YT-button-l { background-color:#fff !important; color: "+(e.tlLinkButtonTextColor||"#555")+" !important; }.YT-loginWrap .YT-button-l:before { box-shadow:0 0 0 1px "+e.tlLinkButtonColor+" inset !important; }.YT-changeType-box .active { color: "+(e.tlButtonColor||"#0aa6de")+" !important; border-color: "+e.tlButtonColor+" !important; }.YT-account-item.checked { border-color: "+e.tlButtonColor+" !important;",e.tlCheckedAccountBgColor&&(t+=" background: "+e.tlCheckedAccountBgColor+" !important;"),t+=" }"),t}function qe(e){var t=".YT-loginWrap a:hover,.YT-third-bind a:hover,.YT-partner-hasLogin .change-account a,.YT-loginWrap .YT-change-logintype i,.YT-loginWrap .YT-change-logintype:hover,.YT-loginWrap .YT-loginFrame-foot .YT-registe-btn:hover,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qr-func a:hover { color: #"+e.secColor+" !important }.YT-loginWrap .YT-form .YT-form-btn,.YT-third-bind .YT-no-bing-submit,.YT-third-bind .YT-thirdbox-body .YT-form .YT-form-btn,.YT-loginWrap .nc-container .imgCaptcha .nc_scale_submit,.YT-loginWrap .YT-qr-login .YT-qrImg-box .YT-invalid-tips .YT-qr-refresh,.YT-loginWrap .YT-form .YT-pwd-strong { background-color: #"+e.secColor+" }.YT-loginWrap .YT-frame-close { color: #"+e.secColor+" }.YT-loginWrap { background: "+(e.bgThemes||e.themesBgStyle)+" !important; color: "+e.fontColor+" !important }.YT-loginWrap a { color: "+e.linkColor+" !important }";return 4==e.padding.length?t+=".YT-loginWrap."+e.size+" { padding: "+e.padding[0]+"px "+e.padding[1]+"px "+e.padding[2]+"px "+e.padding[3]+"px !important }":2==e.padding.length?t+=".YT-loginWrap."+e.size+" { padding: "+e.padding[0]+"px "+e.padding[1]+"px !important }":0<e.padding.length&&(t+=".YT-loginWrap."+e.size+" { padding: "+e.padding[0]+"px !important }"),e.isTlsite&&e.isChangeSkin&&(e.tlHeaderBg&&(t+='.header { background:url("'+e.tlHeaderBg+'") no-repeat center center '+e.tlHeaderBgColor+"; }"),t+=".YT-loginWrap .YT-form-btn,.YT-loginFrame-body .YT-switch-user:after { background-color:"+e.tlButtonColor+" !important; }.YT-changeType-box .active { border-color:"+e.tlButtonColor+" !important; }.YT-changeType-box .active,.YT-loginFrame-body .YT-switch-user,.YT-loginFrame-body .YT-switch-user:hover,.YT-loginFrame-body .YT-form-link,.YT-loginFrame-body .YT-btn-box .YT-form-btn.YT-b-white { color:"+e.tlButtonColor+" !important; }.YT-loginFrame-body .YT-form-link b,.YT-loginFrame-body .YT-icon-exchange { background-color: "+e.tlButtonColor+" !important; }.YT-loginFrame-body .YT-other-btn { border-color: "+e.tlLinkButtonColor+" !important; color: "+e.tlLinkButtonTextColor+" !important; }"),e.useAliLoginFrame&&(t+=".YT-loginWrap { width: auto !important; min-height: 334px; background-color:#fff!important;}.YT-loginWrap.mini { padding: 0 !important; }body .YT-loginWrap.normal.YT-dark {padding:0!important;background:#2A2A32!important;border-radius: 8px;}body .YT-loginWrap.YT-dark .YT-frame-close{width:18px;height:18px;color:#7b7b7f;font-size: 18px;}body .YT-loginFrame-popbox{background:none !important;}"),t}function Ue(e,t,i){this.callback=i||qt.callback,this.errors=[],this.fields={},this.form=this._formByNameOrNode(e)||{},this.messages={},this.handlers={},this.conditionals={};for(var o=0,n=t.length;o<n;o++){var s=t[o];if((s.name||s.names)&&s.rules)if(s.names)for(var r=0,a=s.names.length;r<a;r++)this._addField(s,s.names[r]);else this._addField(s,s.name)}this.form.onsubmit=function(){return!1}}function We(e,t){if(!(0<e.length)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[t];for(var i=0,o=e.length;i<o;i++)if(e[i].checked)return e[i][t]}var je,He,Ke,ze,Qe,Ge,Xe=0,Je=["el","id","attrs","className","tagName","model","delegate"],Ze=/^(\S+)\s*(.*)$/,et=(fe(ti,Ge=f),ti.prototype.init=function(){},ti.prototype.created=function(){},ti.prototype.mounted=function(){},ti.prototype.render=function(){return this},ti.prototype.$=function(){return Be.apply(this,arguments)},ti.prototype.find=function(e){return this.$el.find(e)},ti.prototype.remove=function(){this.$el.remove(),this.undelegateEvents(),this.delegate=null,this.off()},ti.prototype.create=function(e,t,i){e=document.createElement(e);return t&&Be(e).attr(t),i&&Be(e).html(i),e},ti.prototype.setElement=function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof _e?e:Be(e),this.el=this.$el.get(0),!1!==t&&this.delegateEvents(),this},ti.prototype.clearTimer=function(){for(var e=arguments,t=0,i=e.length;t<i;t++){var o=e[t];o&&(clearTimeout(o),clearInterval(o))}return null},ti.prototype.delegateEvents=function(e,t){var i=e||(this.events&&T(this.events)?this.events():this.events);if(i){for(var o in e||this.undelegateEvents(),i){var n,s=i[o];(s=T(s)?s:(t&&this.delegate?this.delegate:this)[i[o]])&&(o=(n=o.match(Ze))[1],n=n[2],s=s.bind(t&&this.delegate||this),o+=".delegateEvents"+this.clsid,""===n?this.$el.on(o,s):this.$el.on(o,n,s))}return this}},ti.prototype.undelegateEvents=function(e,t){return this.$el.off((e||"")+".delegateEvents"+this.clsid,t),this},ti.prototype.callDelegateFunc=function(e){if(e&&this.delegate&&T(this.delegate[e])){var t=1<arguments.length?[].slice.call(arguments,1):[];return this.delegate[e].apply(this.delegate,t)}},ti.prototype._configure=function(e){this.options&&(e=Object.assign({},this.options,e));for(var t=0,i=Je.length;t<i;t++){var o=Je[t];e[o]&&(this[o]=e[o])}this.options=e},ti.prototype._ensureElement=function(){var e;this.el||this.options.el?this.setElement(this.el||this.options.el,!1):(e=this.attrs||{},this.id&&(e.id=this.id),this.className&&(e.class=this.className),this.setElement(this.create(this.tagName,e),!1))},ti),tt=0,it=["view","model","parentViewController"],me=(fe(ei,Qe=f),ei.prototype.init=function(){},ei.prototype.viewDidLoad=function(){},ei.prototype.destory=function(){this.view&&(this.view.remove(),this.view.delegate=null,this.view=null),this.parentViewController&&(this.parentViewController=null),this.statDelegate&&(this.statDelegate=null)},ei.prototype.bindActions=function(e){(e=void 0===e?this.view:e)&&e.delegate&&this.Actions&&e.delegateEvents(this.Actions(),!0)},ei.prototype.safeCallFunc=function(e){if(e&&T(this[e])){var t=1<arguments.length?[].slice.call(arguments,1):[];return this[e].apply(this,t)}},ei.prototype._sendStat=function(){this.statDelegate&&T(this.statDelegate.send)&&this.statDelegate.send.apply(this.statDelegate,arguments)},ei.prototype._configure=function(e){this.options&&(e=Object.assign({},this.options,e));for(var t=0,i=it.length;t<i;t++){var o=it[t];e[o]&&(this[o]=e[o])}this.options=e},ei),ot=(/(msie) ([\w.]+)/.exec(navigator.userAgent)||[])[1]||"",nt=0,st=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]{1,4}$/,rt=/^\d+$/,at=/^[A-Za-z]+$/,ct=/^\W+$/,lt=/^[0-9a-fA-F]{6}$/,dt=/^[\w~!@#$%^&*-+=\[\]{}|\\;:'"\/?.,]{6,16}$/,ht=/^\d{7,11}$/,pt={CN:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/},ut="https:",ge=window.location.host.match(/\.((youku|tudou|laifeng|soku|jingguan)\.(com|ai))$/),de=ge&&ge[1]||"youku.com",gt="account.",mt=S(de,!0),ft=!1,Tt={alipay:"æ”¯ä»˜å®",taobao:"æ·˜å®",wechat:"å¾®ä¿¡",qzone:"QQ",qq:"QQ",weibo:"å¾®åš",sina:"å¾®åš"},bt={mode:"popup",size:"normal",isMobile:!1,isIku:!1,isTlsite:!1,template:"tempA",needHideTitle:"",themes:["2692ff","ffbec9"],bgThemes:"",themesBgStyle:"#fff",fontColor:"#333",linkColor:"#333",callbackURL:"",frameID:"",from:"",clientId:"",loginModel:["mobile","normal"],loginTitleWord:"ç™»å½•",needHideRegister:"",passportInputWord:"æ‰‹æœº/é‚®ç®±/ä¼˜é…·åœŸè±†è´¦å·",loginSubmitWord:"",loginSubmitStyle:"",changePsdName:"",changePsdLink:"http://id.youku.com/resetPwdView.htm",isQRlogin:!0,qrMode:0,qrMsg:"è¯·ä½¿ç”¨ä¼˜é…·APPæ‰«ç ç™»å½•",isThirdPartLogin:!0,tlsiteAry:"",qrBu:["yk",60,"true"],registerTitleWord:"æ³¨å†Œ",registerSubmitWord:"",registerSubmitStyle:"",regModel:["mobile"],regShowType:"in",regRules:["ç”¨æˆ·åè®®","http://mapp.youku.com/service/agreement","éšç§æ”¿ç­–","//account.youku.com/privacypolicy.html"],checkNoLogin:e,loginSuccess:e,closeCallback:e,rememberMe:!0,accountDomain:"",loginCountry:{},placeholders:{login:{account:"æ‰‹æœº/é‚®ç®±/ä¼˜é…·åœŸè±†è´¦å·",password:"ç™»å½•å¯†ç "},reg:{email:"é‚®ç®±åœ°å€",account:"æ‰‹æœºå·ç ",mobile:"æ‰‹æœºå·ç ï¼ˆå¯ç”¨äºŽæ‰¾å›žå¯†ç ï¼‰",password:"å¯†ç (6-16ä½å­—æ¯ã€æ•°å­—å’Œç¬¦å·)",repeatPassword:"ç¡®è®¤å¯†ç ",validate:"éªŒè¯ç "}},errorTips:{account:{required:"è¯·è¾“å…¥è´¦å·",valid_mobile:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ",reg_email:"è¯·è¾“å…¥é‚®ç®±åœ°å€",valid_email:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",notExist:"ç”¨æˆ·ä¸å­˜åœ¨",exist:'è´¦å·å·²å­˜åœ¨ï¼Œè¯·ç›´æŽ¥<a href="javascript:;" class="YT-existToLogin" id="YT-existToLogin">ç™»å½•</a>',check_passport:"è¯·è¾“å…¥æ­£ç¡®çš„ç»‘å®šè´¦å·",not_exist_mobile:'è¯¥æ‰‹æœºå·æœªæ³¨å†Œï¼Œå¯ä½¿ç”¨<a href="javascript:;" class="YT-existToLogin" id="YT-toMLogin">æ‰‹æœºå¿«æ·ç™»å½•</a>',auth_expired:'é¡µé¢è¿‡æœŸäº†å“¦ï¼Œè¯·é‡æ–°<a href="//account.youku.com">ç™»å½•</a>'},password:{required:"è¯·è¾“å…¥å¯†ç ",min_length:"å¯†ç ä½æ•°å¿…é¡»åœ¨6-16ä½ä¹‹é—´",max_Length:"å¯†ç ä½æ•°å¿…é¡»åœ¨6-16ä½ä¹‹é—´",valid_pwdStrong:"å¯†ç å¿…é¡»ç”±å­—æ¯ã€æ•°å­—å’Œç¬¦å·ç»„æˆ",valid_pwd_n_s_spe:"å¯†ç ä¸èƒ½ä¸ºçº¯æ•°å­—ã€çº¯å­—æ¯æˆ–çº¯å­—ç¬¦",valid_illegal_char:"å¯†ç ä¸æ”¯æŒæ‹¬å·ã€å¼•å·ï¼Œè¯·æ›´æ¢",valid_space_char:"å¯†ç ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè¯·æ›´æ¢",is_pwd_sick:"è¯¥å¯†ç å®‰å…¨æ€§è¾ƒä½Žï¼Œè¯·è®¾ç½®æ›´å¤æ‚å¯†ç ",cant_match_email_account:"å¯†ç ä¸èƒ½å’Œé‚®ç®±å‰ç¼€ç›¸åŒ",cant_matches:"å¯†ç ä¸èƒ½å’Œç™»å½•åç›¸åŒ"},mobile:{required:"è¯·è¾“å…¥æ‰‹æœºå·ç ",valid_mobile:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç "},repeatPassword:{required:"è¯·å†æ¬¡è¾“å…¥å¯†ç ",matches:"ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´"},validate:{required:"è¯·è¾“å…¥éªŒè¯ç "},smsCode:{noGet:"è¯·å…ˆèŽ·å–æ‰‹æœºéªŒè¯ç ",noGetPwd:"è¯·å…ˆèŽ·å–åŠ¨æ€å¯†ç ",smsPwd:"è¯·è¾“å…¥åŠ¨æ€å¯†ç "},captcha:{required:"è¯·è¾“å…¥å›¾ç‰‡éªŒè¯ç ",error:"å›¾ç‰‡éªŒè¯ç ä¸æ­£ç¡®"},sliderCaptcha:{required:"è¯·æ‹–åŠ¨æ»‘å—ï¼Œå®ŒæˆéªŒè¯",error:"æ»‘å—éªŒè¯ä¸æ­£ç¡®"},errorCode:{defaults:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽå†è¯•",MOBILE_CODE_ERROR:"æ‰‹æœºéªŒè¯ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥",MOBILE_ALREADY_EXIST:"æ‚¨å·²æ³¨å†Œè¿‡å•¦",system_error:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽå†è¯•",NEED_CAPTCHA:"éœ€è¦éªŒè¯ç ",CAPTCHA_ERROR:"å›¾ç‰‡éªŒè¯ç ä¸æ­£ç¡®",CAPTCHA_TIMEOUT:"å›¾ç‰‡éªŒè¯ç è¶…æ—¶ï¼Œè¯·é‡æ–°è¾“å…¥",timeout:"ç™»å½•è¶…æ—¶ï¼Œè¯·åˆ·æ–°åŽé‡è¯•2",loginTimeout:"ç™»å½•è¶…æ—¶ï¼Œè¯·åˆ·æ–°åŽé‡è¯•",regTimeout:"æ³¨å†Œè¶…æ—¶ï¼Œè¯·åˆ·æ–°åŽé‡è¯•"}}},yt={youku:"cnpassport.youku.com",laifeng:"cnpassport.laifeng.com",jingguan:"cnpassport.jingguan.ai",soku:"cnpassport.soku.com",tudou:"cnpassport.tudou.com",wasu:"passport.cp12.wasu.tv",cibntv:"passport.cp12.ott.cibntv.net",taobao:"market.m.taobao.com"},vt=void 0,wt=0,Ct=void 0,Yt=[],kt=(fe(Zt,ze=f),Zt.prototype.init=function(e){var t;Ct?this.loadFrame(e):((t=this.proxy=document.createElement("iframe")).id="YKLoginProxyFrame",t.frameBorder=0,t.style.width="0",t.style.height="0",this.loadFrame(e),this.addListener(this.handleMessage=this.handleMessage.bind(this)),document.body.appendChild(t))},Zt.prototype.loadFrame=function(e){Yt=[],this.proxy.src=e+"/login/proxy.htm"},Zt.prototype.addListener=function(t){function e(e){e&&!M(e.origin)||t(e)}window.addEventListener?(this._messageCallback=e,window.addEventListener("message",e,!1)):window.attachEvent&&window.attachEvent("onmessage",e)},Zt.prototype.removeListener=function(){window.removeEventListener?window.removeEventListener("message",this._messageCallback,!1):window.detachEvent&&window.detachEvent("onmessage",this._messageCallback),this._messageCallback=null},Zt.prototype.ready=function(e){e&&(Yt?Yt.push(e):e())},Zt.prototype.handleMessage=function(t){var i=void 0;try{i=JSON.parse(decodeURIComponent(t.data))}catch(e){i=c(t.data)?t.data:{}}switch(this.origin=t.origin,i.name){case"x-ready":this.handleReady();break;case"x-response":this.emit("response",i.data,i.id)}},Zt.prototype.handleReady=function(){for(;Yt&&Yt.length;){var e=Yt.shift();e&&e()}Yt=null},Zt.prototype.request=function(e,t){t={name:"x-request",requestID:"x-request-"+wt++,requestURL:e,data:t};return this.proxy.contentWindow.postMessage(JSON.stringify(t),this.origin),t.requestID},Zt.request=function(e,t,o){return Ct&&Ct.ready(function(){var i=Ct.request(e,t);Ct.once("response",function(e,t){i===t&&o&&o(e)})}),function(){Ct&&Ct.off("response")}},Zt.create=function(e){return Ct?Ct.loadFrame(e):Ct=new Zt(e),Ct},Zt.isNeedRequestProxy=function(){return!!window.XDomainRequest},Zt),_t={url:"",type:"get",data:null,dataType:"json",async:!0,withCredentials:!1,headers:{},timeout:0,username:null,password:null,callback:A,beforeSend:A,afterSend:A},St=/\/?(\w+)\.?\w*$/,Rt=["qrcode/loginByCode.json"],Mt=-1<navigator.userAgent.indexOf("IKUCID/IKU"),Et=(fe(Jt,Ke=f),Jt.prototype.getFormToken=function(e,t,i){return V.call(this,mt,"/refreshFormToken.json",e,{eventName:"getFormToken",getDataNode:!0,callback:t,errorCallback:i})},Jt.prototype.getConfig=function(e){return V.call(this,mt,"/getConfig.json",e,{getDataNode:!0})},Jt.prototype.getVerifyIdentityModel=function(e){return V.call(this,mt,"/getVerifyIdentityModel.json",e,{getDataNode:!0})},Jt.prototype.checkBindMobile=function(e){return V.call(this,mt,"/passport/checkBindMobile.htm",e)},Jt.prototype.thirdPartyLogin=function(e){return V.call(this,mt,"/tlsite/thirdparty_account_login.json",e,{eventName:"thirdPartyLogin"})},Jt.prototype.thirdPartyAjaxCallback=function(e){return V.call(this,mt,"/thirdparty/ajax_callback.json",e,{eventName:"thirdPartyAjaxCallback",getDataNode:!0})},Jt.prototype.checkPasswordValid=function(e){return e=Object.assign({bizType:"register"},e),V.call(this,mt,"/passport/isPasswordValid.json",e,{eventName:"checkPasswordValid"})},Jt.prototype.thirdpartyBind=function(e){return V.call(this,mt,"/thirdparty/bind.json",e,{eventName:"thirdpartyBind"})},Jt.prototype.recomLoginConfirm=function(e){return V.call(this,mt,"/thirdparty/loginConfirm.json",e,{eventName:"recomLoginConfirm"})},Jt.prototype.recomBindExchange=function(){return V.call(this,mt,"/thirdparty/bindExchange.json",{},{eventName:"recomBindExchange"})},Jt.prototype.recommendMergeUser=function(e){return V.call(this,mt,"/recommendMergeUser.json",e)},Jt.prototype.mergeUser=function(e){return V.call(this,mt,"/mergeUser.json",e)},Jt.prototype.loginConfirm=function(e,t){var i=void 0,o="get";switch(t||""){case"pre_bind_exchange":i="/tlsite/preFromBindExchange.json";break;case"tlsite_recommend":i="/tlsite/recommend_account_login.json";break;case"tlsite_youku":i="/tlsite/youku_account_login.json";break;case"verify_login":i="/passport/verifyIdentityAndLogin.htm";break;case"bind_login":i="/passport/bindMobileAndLogin.htm";break;default:i="/login/confirm.json",o="post"}return V.call(this,mt,i,e,{methods:o,eventName:"loginConfirm"})},Jt.prototype.registerConfirm=function(e,t){var i="/register/confirm.json",o="post";return t&&t.alipay&&(i="/tlsite/registerAndBindAlipay.json",o="get"),V.call(this,mt,i,e,{methods:o,eventName:"registerConfirm"})},Jt.prototype.confirmBindExchange=function(e){return V.call(this,mt,"/tlsite/confirmBindExchange.json",e)},Jt.prototype.confirmTlsiteAuth=function(e){return V.call(this,mt,"/tlsite/confirmTlsiteAuth.json",e)},Jt.prototype.checkLogin=function(e,t,i){var o=mt;return e.accountDomain&&(o=e.accountDomain,delete e.accountDomain),V.call(this,o,"/login/checkLogin.json",e,{responseCallback:t,errorCallback:i})},Jt.prototype.checkCodeStatus=function(e,t,i){var o=mt;return e.accountDomain&&(o=e.accountDomain,delete e.accountDomain),V.call(this,o,"/qrcode/checkCodeStatus.json",e,{responseCallback:t,errorCallback:i})},Jt.prototype.checkCaptcha=function(e){return V.call(this,mt,"/passport/checkCaptcha.json",e)},Jt.prototype.getCaptchaImageURL=function(e){return e=Object.assign({bizType:"login",time:+new Date},e),mt+"/passport/captcha.htm?"+y(e)},Jt.prototype.sendMobileCode=function(e){return V.call(this,mt,"/passport/sendMobileCode.json",e)},Jt.prototype.modifyMobile=function(e){return V.call(this,mt,"/passport/modifyMobile.htm",e)},Jt.prototype.verifyResult=function(e,t,i){return V.call(this,mt,"/passport/verifyResult.htm",e,{responseCallback:t,errorCallback:i})},Jt.prototype.bindMobileConfirm=function(e){return e=Object.assign({bindNewMobile:!1,bizType:"bind_mobile",template:"tempA"},e),V.call(this,mt,"/thirdparty/bindMobileConfirm.json",e)},Jt.prototype.modifyUserInfo=function(e){return e=Object.assign({bizType:"add_mobile"},e),V.call(this,mt,"/passport/userModifyInfo.htm",e,{eventName:"modifyUserInfo"})},Jt.prototype.getQRCode=function(e){return e=Object.assign({size:200},e),V.call(this,mt,"/qrcode/show.json",e,{eventName:"getQRCode"})},Jt.prototype.loginByCode=function(e){return V.call(this,mt,"/qrcode/loginByCode.json",e)},Jt.prototype.authByToken=function(e){return V.call(this,mt,"/qrcode/authByToken.htm",e)},Jt.prototype.crossDomain=function(t,e){var i=this;if(e&&e.token)return x(t+"/login/crossdomain.json",e,function(e){(e=e||{}).siteUrl=t,$(e)?i.emit("crossDomain:error",e):e.result&&"success"===e.result?i.emit("crossDomain:success",e):i.emit("crossDomain:fail",e)})},Jt),Lt=document.body,It=["account.youku.com","cloud.youku.com","zhifu.youku.com"],At=(fe(Xt,He=et),Xt.prototype.events=function(){return{"click .YT-frame-close":"close"}},Xt.prototype.init=function(){this.id="YT-loginFramePop",this.className="YT-loginFrame-popbox"},Xt.prototype.created=function(){Lt.appendChild(this.el),this.$el.html(this.options.view.el),this.createMaskLayer(),this.createFrameLayer()},Xt.prototype.createMaskLayer=function(){var e=document.getElementById("YT-loginFrameshade");e||((e=document.createElement("div")).id="YT-loginFrameshade",e.className="YT-loginFrame-shade",Lt.appendChild(e)),this.$shadeDom=this.$(e)},Xt.prototype.createFrameLayer=function(){var e=document.getElementById("YT-iframeBack");if(!e){(e=document.createElement("iframe")).className="YT-iframe-backface",e.id="YT-iframeBack",e.src="about:blank",e.frameBorder=0;try{e.document.write(""),e.document.clear()}catch(e){}this.el.appendChild(e)}},Xt.prototype.locate=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=-(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||this.el.clientHeight)/2,e=-(e||this.el.clientWidth)/2;this.$el.css("margin-top",(t<-300?-300:t)+"px"),this.$el.css("margin-left",(e<-450?-450:e)+"px"),this.$el.css("visibility","visible")},Xt.prototype.open=function(){var t=this;this.$shadeDom.show(),this.$el.show(),setTimeout(function(){return t.locate()},0),document.onkeyup||(document.onkeyup=function(e){27===(e=e||window.event).keyCode&&(t.close(),document.onkeyup=null)})},Xt.prototype.close=function(){this.$shadeDom.hide(),this.$el.hide(),this.callDelegateFunc("popupDisappear")},Xt),Pt=(fe(Gt,je=et),Gt.prototype.created=function(){var e,t,i=this.config=this.getConfig();if(this.$el.html((t="",(e=i).isIku&&(t+='<div class="YT-riskBox-head"><span class="YT-risk-header"></span><span class="YT-risk-userinfo">å®‰å…¨ä¸­å¿ƒ</span></div>'),t+='<div id="YT-loginWrap" class="YT-loginWrap '+(e.size||"")+" ","8fb8456183734a86bfc1c15a1c761cdf"!=e.pid&&"20160607PLF000287"!=e.pid||(t+=" YT-dark "),t+='">',e.useAliLoginFrame?(t+='<div id="alibaba-login-iframe"><div id="alibaba-login-iframe-loading"></div></div>',e.isIku&&(t+='<div id="alibaba-qrlogin-iframe"> <div id="alibaba-qrlogin-iframe-loading"></div></div>')):t+='<input type="hidden" id="YT-countryRegion" name="YT-countryRegion"data-name="'+e.loginCountry.countryName+'"data-code="'+e.loginCountry.countryCode+'"data-region="'+e.loginCountry.region+'"value="'+e.loginCountry.region+'" /><div id="_umfp" style="width:1px;height:1px;overflow:hidden;position:absolute"></div>',"popup"==e.mode&&(t+='<div class="YT-frame-close YT-iconfont" id="YT-closeLoginFrame" title="å…³é—­">&#xe9b4;</div>'),t+'<div class="YT-loginFrame-func"></div><div id="YT-loginFrame-container"></div></div>')),"embedded"===i.mode){if(!i.frameID)return void alert("è¯·ä¼ å…¥åµŒå…¥å®¹å™¨çš„ID");var o=document.getElementById(i.frameID);if(!o)return void alert("åµŒå…¥å®¹å™¨ä¸å­˜åœ¨");o.appendChild(this.el)}"popup"===i.mode&&(this.popupLayer=new At({view:this}),this.popupLayer.delegate=this),this.$loginWrap=this.find("#YT-loginWrap"),this.$container=this.find("#YT-loginFrame-container");o=i.bannerTopImg,i=i.bannerBottomImg;o&&o instanceof Array&&this.setBanner("top",o),i&&i instanceof Array&&this.setBanner("bottom",i)},Gt.prototype.append=function(e){e&&e.el&&this.$container.append(e.el)},Gt.prototype.getConfig=function(){return this.delegate&&this.delegate.viewGetConfig()||{}},Gt.prototype.openPopupWindow=function(){this.popupLayer&&this.popupLayer.open()},Gt.prototype.closePopupWindow=function(){this.popupLayer&&this.popupLayer.close()},Gt.prototype.setBanner=function(e,t){var i=document.createElement("img");i.src=t[0];var o=document.createElement("div");o.style.position="absolute",o.style.left=t[2]+"px",o.appendChild(i),"top"===e&&(this.$loginWrap.prepend(o),o.style.top=t[1]+"px"),"bottom"===e&&(this.$loginWrap.append(o),o.style.bottom=t[1]+"px")},Gt.prototype.updateThemeBgStyle=function(e){},Gt.prototype.popupDisappear=function(){this.el.className=""},Gt),Vt={passport:"/yt/passport.passport11",voice:"/yt/YTvoice.anquan",dtRecom:"/yt/alidt.Recommendedaccount",dtBind:"/yt/alidt.bindExistingaccount",scChangeBind:"/yt/SecurityCenter.changebind",bindMobile:"/yt/bindmobile"},xt=void 0,Nt=(Qt.prototype.loadAplus=function(){var e=this;window.goldlog&&window.goldlog.record?this.listen():O("//g.alicdn.com/alilog/mlog/aplus_o.js",{id:"beacon-aplus",async:!0,exparams:"clog=o&aplus&sidx=aplusSidx&ckx=aplusCkx"},function(){return e.listen()})},Qt.prototype.listen=function(){var t=this;Be(document.body).on("click",function(e){return t.record(e)})},Qt.prototype.record=function(e){var t=e.target,i=t.getAttribute("data-gm-stat")||"",o=t.getAttribute("data-gm-ns")||"passport";i&&(t=(e=i.replace(/\s+/g,"").split(";"))&&e[0]||"",i=e&&e[1]||"",e=e&&e[2]||"",this._sendRecord(o,i,e,t))},Qt.prototype.send=function(e){var t=1<arguments.length?[].slice.call(arguments,1):[];"voice"===e?this.sendVoice.apply(this,t):this._sendRecord.apply(this,arguments)},Qt.prototype.sendVoice=function(e){var t="";switch(e){case"tryVoiceBtn":t="click_type=voiceCode";break;case"tryVoiceBtnH5":t="click_type=voiceCodeh5";break;case"trySmsBtn":t="click_type=mobileCode";break;case"getVoiceBtn":t="click_type=getvoiceCode";break;case"getSmsBtn":t="click_type=getmobileCode";break;case"sureVoiceBtn":t="click_type=getvoiceCodeh5";break;case"question":t="click_type=doubt";break;case"submit":t="click_type=submit";break;case"success":t="verify=true";break;case"isGetVoive":t="voice=true"}t+="&source="+R().split(".")[0],this._sendRecord("voice","clcik",t,"H1480571959")},Qt.prototype._sendRecord=function(e,t,i,o){var n=this.config;window.goldlog&&window.goldlog.record&&Vt[e]&&(i=i||"click=[$]",n.configId&&(i+="&configId="+n.configId),n.isTlsite&&(n.pid&&(i+="&pid="+n.pid),n.activityId&&(i+="&activityId="+n.activityId),n.tlsite&&(i+="&tlsite="+n.tlsite),i+="&type="+(n.needBindExchange?"2":"1")),window.goldlog.record(Vt[e]+"."+(t||"click"),"CLK",i,o))},Qt.init=function(){return xt=xt||new Qt},Qt.getInstance=function(){return xt},Qt),Dt=[],$t=void 0,Bt=(zt.prototype.loadScript=function(){var e=this;window.mtee&&window.mtee.getUA||w("//aeu.alicdn.com/ctl/ctl.js",{"data-env":"cn",retry:2},function(){window.ctl&&(window.mtee=window.ctl.noConflict(),window.mtee.ready(function(){}),window.mtee.config(),e.ensureAPI(),setTimeout(function(){return e._executeCallback()},3e3)),window.YT_STATIC_DOMAIN&&-1===window.YT_STATIC_DOMAIN.indexOf("//g.alicdn.com")&&w(window.YT_STATIC_DOMAIN+"/security/umscript/3.3.35/um.js")},function(){window.YKLoginTracker&&window.YKLoginTracker.log({code:14,sampleRate:1,msg:"ctlè„šæœ¬åŠ è½½å¼‚å¸¸"})})},zt.prototype.ensureAPI=function(){var e=this;this.timer=setInterval(function(){window.mtee&&window.mtee.getUA()&&window.umx&&window.umx.getStatus()&&(clearInterval(e.timer),e._executeCallback())},250)},zt.prototype._executeCallback=function(){for(this.timer&&clearInterval(this.timer);Dt&&Dt.length;){var e=Dt.shift();e&&e()}Dt=null},zt.init=function(){return $t=$t||new zt},zt.ready=function(e){$t&&(Dt?Dt.push(e):e&&e())},zt),Ot=void 0,Ft=(Kt.prototype.loadScript=function(){var e=this;window.my?this.getEnv():w("//appx/web-view.min.js",{},function(){e.getEnv()})},Kt.prototype.getEnv=function(){window.my.getEnv(function(e){(e.miniprogram||e.miniProgram)&&(Ot.isMiniProgram=!0)})},Kt.init=function(e){return Ot=Ot||new Kt(e)},Kt.getInstance=function(){return Ot},Kt),qt={messages:{required:" %s å¿…å¡«",matches:" %s ä¸Ž %s ä¸ç›¸åŒã€‚",cant_matches:"%s ä¸èƒ½ä¸Ž %s ç›¸åŒ",cant_match_email_account:"%s ä¸èƒ½ä¸Ž %s ç›¸åŒ",defaults:"The %s field is still set to default, please change.",valid_email:" %s å¿…é¡»æ˜¯é‚®ç®±åœ°å€ã€‚",valid_mobile:" %s å¿…é¡»æ˜¯æ‰‹æœºå·ã€‚",min_length:"é•¿åº¦è¿‡å°ã€‚",max_length:"é•¿åº¦è¿‡å¤§ã€‚",numeric:" %s åªèƒ½æ˜¯æ•°å­—ã€‚",integer:" %s åªèƒ½æ˜¯æ•´æ•°ã€‚",decimal:" %s åªèƒ½æ˜¯åè¿›åˆ¶æ•°ã€‚",sms_sent:"è¯·å…ˆèŽ·å–éªŒè¯ç ",valid_pwdStrong:" %s å¼ºåº¦ä¸å¤Ÿ",valid_pwd_n_s_spe:" s% ä¸èƒ½ä¸ºçº¯æ•°å­—ã€çº¯å­—æ¯æˆ–çº¯å­—ç¬¦",valid_illegal_char:" %s ä¸èƒ½åŒ…å«éžæ³•å­—ç¬¦",valid_space_char:" %s ä¸èƒ½åŒ…å«ç©ºæ ¼"},callback:function(){}},Ut=/^(.+?)\[(.+)\]$/,Wt=/^[0-9]+$/,jt=/^\-?[0-9]+$/,Ht=/^\-?[0-9]*\.?[0-9]+$/;function Kt(e){this.config=e||E(),this.loadScript()}function zt(){this.loadScript()}function Qt(){this.config=E(),this.loadAplus()}function Gt(){return Se(this,je.apply(this,arguments))}function Xt(e){var t=Se(this,He.call(this,e)),e=(window.parent||{}).location,e=(e=void 0===e?{}:e).host;return It.includes(void 0===e?"":e)||window.addEventListener("message",function(e){e=JSON.parse(decodeURIComponent(e.data||"{}"));"resizeIframe"===e.action&&t.locate(e.width,e.height)}),t}function Jt(){return Se(this,Ke.apply(this,arguments))}function Zt(e){var t=Se(this,ze.call(this));return t.init(e),t}function ei(e){var t=Se(this,Qe.call(this));return t.clsid=tt++,t._configure(e||{}),t.init.apply(t,arguments),t.bindActions(),t}function ti(e){var t=arguments,i=Se(this,Ge.call(this));return i.tagName="div",i.delegate=null,i.clsid=Xe++,i._configure(e||{}),i.init.apply(i,arguments),i._ensureElement(),i.created.apply(i,arguments),i.delegateEvents(),setTimeout(function(){i.mounted.apply(i,t),i.callDelegateFunc("viewDidLoad")},0),i}Ue.prototype.setMessage=function(e,t){return this.messages[e]=t,this},Ue.prototype.registerCallback=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.handlers[e]=t),this},Ue.prototype.registerConditional=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.conditionals[e]=t),this},Ue.prototype._formByNameOrNode=function(e){return"object"==typeof e?e:document.forms[e]},Ue.prototype._addField=function(e,t){this.fields[t]={name:t,display:e.display||t,rules:e.rules,depends:e.depends,errorMsg:e.errorMsg,id:null,element:null,type:null,value:null,checked:null}},Ue.prototype._validateForm=function(e){for(var t in this.errors=[],this.fields){var i;this.fields.hasOwnProperty(t)&&(i=this.fields[t]||{},(t=this.form[i.name])&&void 0!==t&&(i.id=We(t,"id"),i.element=t,i.type=(0<t.length?t[0]:t).type,i.value=We(t,"value"),i.checked=We(t,"checked"),i.depends&&"function"==typeof i.depends?i.depends.call(this,i)&&this._validateField(i):i.depends&&"string"==typeof i.depends&&this.conditionals[i.depends]&&!this.conditionals[i.depends].call(this,i)||this._validateField(i)))}return"function"==typeof this.callback&&this.callback(this.errors,e),this.errors.length,!0},Ue.prototype._validateField=function(e){for(var t=e.rules.split("|"),i=e.rules.indexOf("required"),o=!e.value||""===e.value||void 0===e.value,n=0,s=t.length;n<s;n++){var r=t[n],a=null,c=!1,l=Ut.exec(r);if((-1!==i||-1!==r.indexOf("!callback_")||!o)&&(l&&(r=l[1],a=l[2]),"!"===r.charAt(0)&&(r=r.substring(1,r.length)),"function"==typeof this._hooks[r]?this._hooks[r].apply(this,[e,a])||(c=!0):"callback_"===r.substring(0,9)&&(r=r.substring(9,r.length),"function"==typeof this.handlers[r]&&!1===this.handlers[r].apply(this,[e.value,a,e])&&(c=!0)),c)){l=this.messages[e.name+"."+r]||this.messages[r]||qt.messages[r],c="An error has occurred with the "+e.display+" field.";l&&(c=l.replace("%s",e.display),a&&(c=c.replace("%s",this.fields[a]?this.fields[a].display:a)),e.errorMsg&&(c=e.errorMsg[r])),this.errors.push({id:e.id,element:e.element,name:e.name,message:c,rule:r});break}}},Ue.prototype._hooks={required:function(e){var t=e.value;return"checkbox"===e.type||"radio"===e.type?!0===e.checked:null!==t&&""!==t},defaults:function(e,t){return e.value!==t},matches:function(e,t){t=this.form[t];return!!t&&e.value===t.value},cant_matches:function(e,t){t=this.form[t];return!t||e.value!==t.value},cant_match_email_account:function(e,t){t=this.form[t];if(t){t=(t.value||"").split("@")[0];return e.value!==t}return!0},valid_pwdStrong:function(e){return e=e.value,!!dt.test(e)},valid_pwd_n_s_spe:function(e){return!_(e.value)},valid_space_char:function(e){return!(/\s+/.test(e.value)&&!/^\s+$/.test(e.value))},valid_illegal_char:function(e){return!/[<>\(\)'"]/.test(e.value)},valid_email:function(e){return"email"===Y(e.value)},valid_mobile:function(e){var t="CN",i=document.getElementById("YT-countryRegion");return i&&i.value&&(t=i.value),k(e.value,t)},min_length:function(e,t){return!!Wt.test(t)&&e.value.length>=parseInt(t,10)},max_length:function(e,t){return!!Wt.test(t)&&e.value.length<=parseInt(t,10)},numeric:function(e){return Wt.test(e.value)},integer:function(e){return jt.test(e.value)},decimal:function(e){return Ht.test(e.value)}};function ii(e){return'<div class="YT-form-group no-icon"> <img class="YT-captcha-img" title="ç‚¹å‡»æ›´æ¢éªŒè¯ç " src="'+e.imageSrc+'" width="100" /> <input type="text" maxLength="'+e.maxLength+'" tabindex="'+e.tabindex+'" class="YT-form-input YT-captcha short-input" name="YT-captcha" /></div>'}var oi,ni,si,ri,ai,ci,li,di,hi,pi,ui,gi,mi,fi,Ti,bi,yi,vi,wi,Ci,Yi,ki,_i,Si,Ri,Mi,Ei=function(){try{var e="__storejs__test__";localStorage.setItem(e,e);var t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t}catch(e){return!1}}(),ge=(Bo.prototype.getItem=function(e){if(!this.support)return null;if(void 0===e)return this.cachedStorage;e=this.cachedStorage[e];return void 0!==e?e:null},Bo.prototype.setItem=function(e,t){this.support&&e&&void 0!==t&&(this.cachedStorage[e]=t,localStorage.setItem(this.storageKey,JSON.stringify(this.cachedStorage)))},Bo.prototype.removeItem=function(e){this.support&&void 0!==e&&this.cachedStorage[e]&&(delete this.cachedStorage[e],localStorage.setItem(this.storageKey,JSON.stringify(this.cachedStorage)))},Bo),Li=new(fe($o,Mi=ge),$o.prototype.getAccount=function(){return this.getItem("account")},$o.prototype.setAccount=function(e){this.setItem("account",e)},$o.prototype.getRegExistAccountInfo=function(){var e=this.getItem("regExistUserInfo");return void 0!==e&&this.removeItem("regExistUserInfo"),e},$o.prototype.setRegExistAccountInfo=function(e){this.setItem("regExistUserInfo",e)},$o),Ii=(fe(Do,Ri=et),Do.prototype.events=function(){return{"click #YT-risk-close":"hideLayer"}},Do.prototype.init=function(){this.NCData={},this.loadTimes=0,this.needSliderCaptcha=!1,this.passSliderCaptcha=!1,this.standalone=this.options.standalone||!1,this.options.isMobile||(this.className="nc-container")},Do.prototype.hideLayer=function(){this.$riskWrap.removeClass("YT-risk-active"),this.$riskWrap.removeClass("YT-risk-ok"),this.$riskWrap=null,this.NCObj&&(this.NCObj=null)},Do.prototype.isNeedSlider=function(e){e?(this._loadNC(),this.needSliderCaptcha=!0,this.passSliderCaptcha=!1):(this.needSliderCaptcha=!1,this.passSliderCaptcha=!0)},Do.prototype.resetNCInstance=function(e){this.isNeedSlider(!0),this.NCObj?this.NCObj.reset():this.getNCInstance(e)},Do.prototype.removeNCInstance=function(e){e=this.customerID||this._getContainerID(e);this.$("#"+e).html("").removeClass("nc-container"),this.isNeedSlider(!1),this.customerID=null,this.NCObj=null,this.callDelegateFunc("sliderCaptchaDidRemoved")},Do.prototype.getNCInstance=function(e){var t=this,i=this._getContainerID(e),o="nc_"+e+"_0_box";this.off("scriptloaded"),this.isNeedSlider(!0),this.NCObj?this.resetNCInstance():this.scriptloaded?setTimeout(function(){t._createDom(o,i),t._getNC(o,i)},0):this.once("scriptloaded",function(){t._createDom(o,i),t._getNC(o,i)})},Do.prototype._createDom=function(e,t){var i;this.options.isMobile&&!this.standalone?(i=this.callDelegateFunc("sliderCaptchaCreatedWithCustomConfig")||{},this.$el.html((e={id:e,customConfig:i,isFromSDK:this.options.isFromSDK},i="",e.isFromSDK||(i+='<div class="wap-header">'+(e.customConfig.sliderCaptchaTitle||"å®‰å…¨éªŒè¯")+'<a href="javascript:;" class="go-back" id="YT-risk-close"></a></div>'),i+='<div class="risk-content"',e.customConfig.sliderCaptchaImageStyle&&(i+=' data-no-icon="true"'),i+=">",e.customConfig.sliderCaptchaImageStyle&&(i+='<div class="risk-header-bg" style="'+e.customConfig.sliderCaptchaImageStyle+'"></div>'),i+("<p>"+(e.customConfig.sliderCaptchaTopicText||"ä¸ºäº†è¯æ˜Žä½ ä¸æ˜¯æœºå™¨äººï¼Œè¯·æ‹–åŠ¨æ»‘å—è¿›è¡Œå®‰å…¨éªŒè¯"))+'</p><div id="YT-captchaWrap" class="nc-container"><div class="loading"></div></div></div>')),this.$riskWrap=this.$("#YT-riskWrap"),this.$riskWrap.append(this.el).addClass("YT-risk-active"),(e=document.querySelector("button"))&&e.focus(),document.body.scrollTop=0):this.$("#"+t).append(this.el).show()},Do.prototype._getContainerID=function(e){var t="mobile"===(e=e||"mobile")?"YT-mCaptchaWrap":"YT-captchaWrap",i=this.callDelegateFunc("sliderCaptchaLoadWithContainerID");return i?this.customerID=i:this.options.isMobile?"YT-captchaWrap":t="register"===this.options.type?"mobile"===e?"YT-mRegCaptchaWrap":"YT-eRegCaptchaWrap":t},Do.prototype._loadNC=function(){var e,t=this;window.NoCaptcha||window.noCaptcha?this.scriptloaded=!0:(e=new Date,O((this.options.isMobile?"//g.alicdn.com/sd/nch5/index.js?t=":"//g.alicdn.com/sd/ncpc/nc.js?t=")+[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours()].join(""),{retry:1},function(){t.scriptloaded=!0,t.emit("scriptloaded")}))},Do.prototype._getNC=function(e,t){var i=this,o=this.options.type,n=this.options.isMobile,s=window.mtee&&window.mtee.getUmidToken()||["FFFF00000000016514CE",+new Date,Math.random()].join(":"),r=void 0,r=n?"login"===o?"login_h5":"register_h5":"login"===o?"Login":"Register";if(!window.NoCaptcha&&!window.noCaptcha)return i.loadTimes<=5?setTimeout(function(){i._getNC(e,t),i.loadTimes++},1e3):(ae("SLIDER_LOAD_FAILED"),i.isNeedSlider(!1)),!1;r={renderTo:t,appkey:"FFFF00000000016514CE",token:s,scene:r,isEnabled:!0,callback:function(e){i.passSliderCaptcha=!0,i.NCData=e,i.NCData.token=s,n&&!i.standalone&&i.$riskWrap.addClass("YT-risk-ok"),i.callDelegateFunc("sliderCaptchaPassed",e)},error:function(e){ae(e&&e.code||"SLIDER_ERROR"),i.isNeedSlider(!1)}};n?(r.renderTo="#"+t,i.NCObj=new window.NoCaptcha(r),i.NCObj.setEnabled(!0),i.NCObj.reset()):(r.customWidth=t,i.NCObj=new window.noCaptcha(r))},Do),Ai=(fe(No,Si=et),No.prototype.events=function(){return{"click #YT-reGetQRCode":"getQRCode"}},No.prototype.init=function(){this.el="#YT-qrLogin",this.config=E()},No.prototype.created=function(){this.$qrCodeImg=this.find("#YT-qrImg"),this.$invalidTips=this.find("#YT-invalidTips")},No.prototype.getQRCode=function(){var t=this,e=this.model,i=this.config;this.find("#YT-qrLogining").show(),this.find("#YT-qrLoginOK").hide(),e.off("getQRCode:fail getQRCode:success"),e.once("getQRCode:fail",function(){t.$invalidTips.show()}),e.once("getQRCode:success",function(e){e.msg&&e.msg.qrImgUrl&&(t.$invalidTips.hide(),t.$qrCodeImg.attr("src",e.msg.qrImgUrl).show(),t._qrInterval=setInterval(function(){t._qrInterval&&t.loginConnect(e.msg.code)},3e3))}),this.disconnect(),e.getQRCode({callback:i.callbackURL||window.location.href,buid:i.buid,pid:i.pid,size:200,logo:i.qrLogo||i.qrBu[0]||"yk",logosize:i.qrBu[1]||60,logoOnTop:i.qrLogoType||i.qrBu[2]||"true"})},No.prototype.loginConnect=function(e){var t=this,i=this.model,o=this.config;i.off("loginByCode:fail loginByCode:success"),i.once("loginByCode:fail",function(e){"QR_CODE_ERROR"===e.errorCode||"QR_CODE_NOT_EXIST"===e.errorCode?(t.$invalidTips.show(),t.disconnect()):e.riskErrorCode&&t.callDelegateFunc("qrLoginFail",e)}),i.once("loginByCode:success",function(e){t.disconnect(),e.msg.riskErrorCode?t.callDelegateFunc("qrLoginFail",e):(t.find("#YT-qrLogining").hide(),t.find("#YT-qrLoginOK").show(),t.callDelegateFunc("qrLoginSuccess",e))});var n={buid:o.buid,pid:o.pid,code:e};if(o.customParam)for(var s in o.customParam)n[s]=o.customParam[s];o.ykOpensid&&(n.ykOpensid=o.ykOpensid),i.loginByCode(n)},No.prototype.disconnect=function(){this._qrInterval=this.clearTimer(this._qrInterval)},No),Pi=(fe(xo,_i=et),xo.prototype.events=function(){return{"mouseout .questionIcon":"hideHelp","mouseover .questionIcon":"showHelp"}},xo.prototype.created=function(){var e,t,t=(e={type:this.options.type},t='<div class="YT-voiceVerifyTips"> <span class="YT-noGet">æœªæ”¶åˆ°ï¼Ÿ</span><span class="YT-voiceVerifyTry">è¯•è¯•è¯­éŸ³èŽ·å–</span> <div class="YT-m-icon YT-icon-question questionIcon">&#xe9ba;</div></div><div class="YT-smsVerifyTips" style="display:none"> <span class="YT-smsVerifyTry">ä½¿ç”¨çŸ­ä¿¡èŽ·å–</span></div><div class="YT-voiceVerifyTipsHover" style="display:none"> <div class="triangle-up1"></div><div class="triangle-up2"></div> <p>æˆ‘ä»¬ä¼šé€šè¿‡æ‹¨æ‰“æ‚¨çš„æ‰‹æœºå·å‘ŠçŸ¥',"register"==e.type?t+="éªŒè¯ç ï¼ŒéªŒè¯ç ":t+="åŠ¨æ€å¯†ç ï¼ŒåŠ¨æ€å¯†ç ",t+='æ˜¯æ‚¨å¬åˆ°çš„6ä½æ•°å­—</p></div><div class="YT-voiceVerifyTipsSuccess" style="display:none"> <p class="voiceVerifyTips-title">æ¸©é¦¨æç¤º</p> <p class="voiceVerifyTips-cont">è¯·æ³¨æ„æŽ¥å¬æ¥è‡ª 0571-86756617 ç”µè¯ï¼Œ',"login"==e.type?t+="åŠ¨æ€å¯†ç ":t+="éªŒè¯ç ",t+"æ˜¯æ‚¨å¬åˆ°çš„6ä½æ•°å­—</p></div>");this.find(".YT-voiceAndSmsCont").html(t)},xo.prototype.mounted=function(){this.$hoverHelp=this.find(".YT-voiceVerifyTipsHover"),this.$phoneTips=this.find(".YT-voiceVerifyTipsSuccess"),this.$voiceTips=this.find(".YT-voiceVerifyTips"),this.$smsTips=this.find(".YT-smsVerifyTips")},xo.prototype.remove=function(){this.undelegateEvents(),this.delegate=null,this.$el=null,this.el=null},xo.prototype.showIncomingCallTips=function(){this._showPhoneTips||(this._showPhoneTips=!0,this.$phoneTips.show())},xo.prototype.hideIncomingCallTips=function(){this._showPhoneTips&&(this._showPhoneTips=!1,this.$phoneTips.hide())},xo.prototype.showVoiceTips=function(){this.$voiceTips.css("display","inline-block"),this.$smsTips.hide()},xo.prototype.showSmsTips=function(){this.$smsTips.css("display","inline-block"),this.$voiceTips.hide()},xo.prototype.showHelp=function(){this.$hoverHelp.show()},xo.prototype.hideHelp=function(){this.$hoverHelp.hide()},xo.prototype.show=function(){this.showVoiceTips(),this.hideIncomingCallTips()},xo.prototype.hide=function(){this.$voiceTips.hide(),this.$smsTips.hide(),this.hideIncomingCallTips()},xo),Vi=void 0,xi=(fe(Vo,ki=et),Vo.prototype.events=function(){return{"click .YT-captcha-img":"refresh"}},Vo.prototype.init=function(){this.config=E(),this.options.templateFn?this.templateFn=this.options.templateFn:this.templateFn=ii,this.options.type||(this.options.type="login"),this.isPass=!0},Vo.prototype.created=function(){this.$el.html(this.templateFn({imageSrc:this.getImageSrc(),tabindex:"login"===this.options.type?3:6,maxLength:this.options.maxLength||4}))},Vo.prototype.mounted=function(){var e=document.getElementById(this.options.container);e&&e.appendChild(this.el)},Vo.prototype.val=function(e){return this.find(".YT-captcha").val(e)||""},Vo.prototype.getState=function(){return this.isPass},Vo.prototype.getImageSrc=function(){var e=this.config;return this.model.getCaptchaImageURL({bizType:this.options.type,buid:e.buid,pid:e.pid})},Vo.prototype.refresh=function(){var e=this.find(".YT-captcha-img").get(0);e&&(e.src=this.getImageSrc(),this.val(""),this.isPass=!0)},Vo.prototype.check=function(){var e=this.config,t=this.val();""!==t&&(this.model.checkCaptcha({formtoken:e.formtoken,bizType:this.options.type,buid:e.buid,pid:e.pid,captcha:t}),this.model.on("checkCaptcha:success",this.checkSuccess,this),this.model.on("checkCaptcha:fail",this.checkFail,this))},Vo.prototype.checkSuccess=function(e){this.isPass=!0,this.emit("checkcaptcha:success",e)},Vo.prototype.checkFail=function(e){this.isPass=!1,"CAPTCHA_ERROR"===e.errorCode?this.emit("checkcaptcha:error",e):"CAPTCHA_TIMEOUT"===e.errorCode?this.refresh():this.isPass=!0},Vo.create=function(e){return Vo.destory(),Vi=new Vo(e)},Vo.destory=function(){return Vi&&(Vi.remove(),Vi=null),null},Vo),Ni=void 0,Di=(fe(Po,Yi=et),Po.prototype.events=function(){return{"click li":"select"}},Po.prototype.init=function(){this.className="YT-country-select-wrap",this.$region=this.$("#YT-countryRegion"),this.$body=this.$(document.body),this.isActive=!1},Po.prototype.created=function(){this.config=E(),this.$el.html(function(e){var t='<div class="YT-country-select-main YT-login"><ul class="YT-country-list">';if(e.mobileCommonCountries&&0<e.mobileCommonCountries.length){var i=e.mobileCommonCountries.map(function(e){return e.region}),o=e.mobileCommonCountries;if(o)for(var n=-1,s=o.length-1;n<s;)t+='<li country="'+((c=o[n+=1]).region||"")+'" countryCode="'+(c.countryCode||"")+'" countryName="'+(c.countryName||"")+'"><span class="YT-country-code">+'+(c.countryCode||"")+'</span><span class="YT-country-name">'+(c.countryName||"")+"</span></li>"}if(e.mobileCountries)for(var r in e.mobileCountries){var a=e.mobileCountries[r];if(a)for(var c,l=-1,d=a.length-1;l<d;)c=a[l+=1],-1==i.indexOf(c.region)&&(t+='<li country="'+(c.region||"")+'" countryCode="'+(c.countryCode||"")+'" countryName="'+(c.countryName||"")+'"><span class="YT-country-code">+'+(c.countryCode||"")+'</span><span class="YT-country-name">'+(c.countryName||"")+"</span></li>")}else t+='<li country="CN" countryCode="86" countryName="ä¸­å›½å¤§é™†"><span class="YT-country-code">+86</span><span class="YT-country-name">ä¸­å›½å¤§é™†</span></li>';return t+"</ul></div>"}(this.config)),this.appendList(this.options.container)},Po.prototype.appendList=function(e){e&&(e.appendChild(this.el),this.$btn=this.$(e.parentNode).find(".YT-country-chouse-box"),this.countryCode=null)},Po.prototype.show=function(){var e=this;this.isActive||(this.$el.show(),this.$btn.addClass("active"),setTimeout(function(){e.$body.on("click.countrylist",e.hide=e.hide.bind(e))},0),this.isActive=!0)},Po.prototype.hide=function(){this.isActive&&(this.$body.off(".countrylist",this.hide),this.$btn.removeClass("active"),this.off("select"),this.$el.hide(),this.isActive=!1)},Po.prototype.select=function(e){var t=e.currentTarget,i=t.getAttribute("country"),e=t.getAttribute("countrycode"),t=t.getAttribute("countryname");this.countryCode!==e&&(this.countryCode=e,this.$region.val(i).attr({"data-region":i,"data-name":t,"data-code":e}),this.emit("select",i,e,t)),this.hide()},Po.isActive=function(){return!!Ni&&Ni.isActive},Po.create=function(e){if(e){if(Ni){if(Ni.isActive)return;Ni.appendList(e)}else Ni=new Po({container:e});return Ni.show(),Ni}},Po.close=function(){Ni&&Ni.hide()},Po),de=(fe(Ao,Ci=et),Ao.prototype.init=function(){this.config=E(),this.role="login",this.mobileCodeType=1,this.smsRetryCount=0,this.willSendVoiceNumber=""},Ao.prototype.mounted=function(){this.$errMessage=this.find(".YT-errtips-box"),this.$noticeBox=this.find(".YT-notice-box"),this.$countryRegion=this.$("#YT-countryRegion"),this.$countryCode=this.find(".YT-countryCode")},Ao.prototype.toggleCountryList=function(e){Di.isActive()?Di.close():(e=e.currentTarget.parentNode,e=this.$(e).find(".YT-country-container").get(0),Di.create(e).once("select",this.selectCountry,this))},Ao.prototype.selectCountry=function(e,t){this.$countryCode.html("+"+t).attr({"data-code":t,"data-region":e}),this.removeVoiceVerify(),this.checkMobile(),this.clearErrorTip()},Ao.prototype.checkMobile=function(){var e=this.config,t=this.getCountryRegion(),i=this.getMobilePhoneNumber(),o=this.getSendCodeBtn(),e=e&&(e.hasMobile||e.riskData&&e.riskData.hasMobile)||!1;this._countTimer||(k(i,t)||e?o.removeClass("disabled").removeAttr("disabled"):o.addClass("disabled").attr("disabled","disabled"),this.willSendVoiceNumber&&!this.checkSamePhoneNumber(i)&&this.removeVoiceVerify())},Ao.prototype.checkMobileNumber=function(){var e=this.getMobilePhoneNumber(),t=this.getCountryRegion();e&&!k(e,t)&&this.showErrorTip(this.config.errorTips.mobile.valid_mobile)},Ao.prototype.createCaptcha=function(){var t=this,e=this.getContainerID();e&&this.delegate&&this.delegate.model&&(this.captchaView?this.changeCaptcha():(this.captchaView=xi.create({type:this.role,container:e,model:this.delegate.model}),this.captchaView.on("checkcaptcha:error",function(e){return t.showErrorTip(e.errorMsg)}),this.needCaptcha=!0))},Ao.prototype.removeCaptcha=function(){this.captchaView&&(xi.destory(),this.captchaView=null,this.needCaptcha=!1)},Ao.prototype.changeCaptcha=function(){this.captchaView&&this.captchaView.refresh()},Ao.prototype.resetSendCodeBtn=function(e){var t=this.getSendCodeBtn();(e||this._getCodeText)&&t.html(e||this._getCodeText),this._countTimer=this.clearTimer(this._countTimer),this.checkMobile()},Ao.prototype.resendCountDown=function(e){var t=this,i=60,o=this.getSendCodeBtn(),n=this.getCountryRegion();this.willSendVoiceNumber=e,this._getCodeText=o.html(),this.clearTimer(this._countTimer),this._countTimer=setInterval(function(){0===--i?(t.smsRetryCount++,t.resetSendCodeBtn(),1<t.smsRetryCount&&"CN"===n&&t.addVoiceVerify()):o.html(i+"ç§’åŽé‡å‘")},1e3),o.addClass("disabled").attr("disabled","disabled"),this.clearInput(this.getPassCodeInput())},Ao.prototype.addVoiceVerify=function(){this.voiceView?this.voiceView.show():this.voiceView=new Pi({el:this.el,type:this.role})},Ao.prototype.removeVoiceVerify=function(){this.voiceView&&(this.willSendVoiceNumber="",this.setSMSVerifyMode(),this.voiceView.hide(),this.smsRetryCount=0)},Ao.prototype.checkSamePhoneNumber=function(e){return""!==e&&""!==this.willSendVoiceNumber&&this.willSendVoiceNumber===e},Ao.prototype.setSMSVerifyMode=function(){this.isVoiceVerify=!1,this.voiceView.showVoiceTips(),this.resetSendCodeBtn(1===this.mobileCodeType?"èŽ·å–åŠ¨æ€å¯†ç ":"èŽ·å–éªŒè¯ç "),this.clearInput(this.getPassCodeInput()),this.callDelegateFunc("_sendStat","voice","trySmsBtn")},Ao.prototype.setVoiceVerifyMode=function(){this.isVoiceVerify=!0,this.voiceView.showSmsTips(),this.resetSendCodeBtn(1===this.mobileCodeType?"èŽ·å–è¯­éŸ³åŠ¨æ€å¯†ç ":"èŽ·å–è¯­éŸ³éªŒè¯ç "),this.clearInput(this.getPassCodeInput()),this.callDelegateFunc("_sendStat","voice","tryVoiceBtn")},Ao.prototype.showIncomingCallTips=function(e){var t=this;this.voiceView&&(this.voiceView.showIncomingCallTips(),this.clearTimer(this._delayTimer),e&&(this._delayTimer=setTimeout(function(){return t.hideIncomingCallTips()},1e3*e)))},Ao.prototype.hideIncomingCallTips=function(){this.voiceView&&this.voiceView.hideIncomingCallTips()},Ao.prototype.hidePlaceholder=function(e){e=e.currentTarget,e=this.$(e.parentNode).find(".YT-form-label");e.hasClass("hideholder")||e.addClass("hideholder"),this.isVoiceVerify&&this.hideIncomingCallTips()},Ao.prototype.showPlaceholder=function(e){var t=e.currentTarget,e=this.$(t.parentNode).find(".YT-form-label");""===t.value&&e.removeClass("hideholder"),this.clearErrorTip()},Ao.prototype.clearInput=function(e){e&&(""!==(e=!e.nodeType?e.get(0):e).value&&(e.value="",this.showPlaceholder({currentTarget:e})))},Ao.prototype.showErrorTip=function(e){e&&this.$errMessage.html(e).show(),this.$noticeBox.get(0)&&this.$noticeBox.hide()},Ao.prototype.clearErrorTip=function(){this.$errMessage.hide(),this.$noticeBox.get(0)&&this.$noticeBox.show()},Ao.prototype.getCountryRegion=function(){return this.$countryCode.attr("data-region")||this.$countryRegion.attr("data-region")},Ao.prototype.getCountryCode=function(){return this.$countryCode.attr("data-code")||this.$countryRegion.attr("data-code")},Ao.prototype.getCaptchaState=function(){return!!this.captchaView&&this.captchaView.getState()},Ao.prototype.getCaptchaCode=function(){return this.captchaView?this.captchaView.val():""},Ao.prototype.setContainerID=function(e){this._captchaContainerID=e||""},Ao.prototype.getContainerID=function(){return""},Ao.prototype.getMobilePhoneNumber=function(){return""},Ao.prototype.getSendCodeBtn=function(){return null},Ao.prototype.getPassCodeInput=function(){return null},Ao.prototype.getSubmitButton=function(){return null},Ao.prototype.disableButton=function(e,t){e&&((t=void 0===t?!0:t)?e.addClass("disabled").attr("disabled","disabled"):e.removeClass("disabled").removeAttr("disabled"))},Ao.prototype.disableSendCodeButton=function(e){this.disableButton(this.getSendCodeBtn(),e)},Ao.prototype.disableSubmitButton=function(e){void 0===e&&(e=!0);var t=this.getSubmitButton(),i=t.attr("title"),o=t.attr("data-process");e?o&&t.html(o):o&&t.html(i),this.disableButton(t,e)},Ao.prototype.emptyInput=function(){var t=this;this.find("input").forEach(function(e){return t.clearInput(e)}),this.resetSendCodeBtn()},Ao.prototype.show=function(){this.$el.show(),this.callDelegateFunc("viewAppear",this.regMode||this.loginMode)},Ao.prototype.hide=function(){this.emptyInput(),this.$el.hide(),this.$el.removeClass("fix-autofill"),this.callDelegateFunc("viewDisappear",this.regMode||this.loginMode)},Ao),$i=void 0,Bi=(Io.prototype.addWindow=function(e,t){e&&e.close&&(this.winObj[t||"defaultWindow"]=e)},Io.prototype.getWindow=function(e){return this.winObj[e||"defaultWindow"]},Io.add=function(e,t){($i=$i||new Io).addWindow(e,t)},Io.onClose=function(e,t){var i;$i&&($i.timer&&clearInterval($i.timer),(i=$i.getWindow(e))&&($i.timer=setInterval(function(){i.closed&&(clearInterval($i.timer),t&&t())},600)))},Io),Oi=(fe(Lo,wi=et),Lo.prototype.events=function(){return{"click .show-all-third-btn":"showAll","click .hide-third-btn":"hide","click .YT-third-part-item":"open"}},Lo.prototype.init=function(){this.config=E(),this.client=this.$("#ikuBox").attr("data-from")||""},Lo.prototype.showAll=function(){this.$el.addClass("YT-third-part-showall")},Lo.prototype.hide=function(){this.$el.removeClass("YT-third-part-showall")},Lo.prototype.open=function(e){var t=this.config,i=this.$(e.currentTarget),o=i.attr("data-link"),n=i.attr("data-site"),s=R(),e=window.mtee&&window.mtee.getUA()||"",i=window.mtee&&window.mtee.getUmidToken()||"",e=o+"&needRecommend=true&protocol="+window.location.protocol+"&jsToken="+i+"&UA="+encodeURIComponent(e);t.configId&&(e+="&configId="+t.configId),document.domain=s,"Iku"===this.client||"itudou"===this.client?window.external&&"execute"in window.external?window.external.execute("iku","iku://|login|2|3|"+('{"data":{"url":"'+e+'","site":"'+n+'"}}')):window.location.href=e:this.config.isMobile?window.location.href=e:(e=window.open(e,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no"),(window.ActiveXObject||"ActiveXObject"in window)&&(Bi.add(e,"thirdPartLoginWindow"),Bi.onClose("thirdPartLoginWindow",function(){window.YKLoginConnect(se("YK_thirdLogin_data")||"{}"),setTimeout(function(){document.cookie="YK_thirdLogin_data=;domain=youku.com;expires="+new Date(1970,0,1).toGMTString()},500)})))},Lo),Fi=(fe(Eo,vi=de),Eo.prototype.events=function(){return{"click #YT-qrbtn":"toggleQRLogin","click #YT-forgetPwd":"goResetPassword","click #YT-showNormalLogin":"showNormalLogin","click #YT-showMobileLogin":"showMobileLogin","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","click #YT-agreeRegRules":"toggleSubmitState"}},Eo.prototype.init=function(){vi.prototype.init.call(this),this.id="YT-loginFrame-main",this.className="YT-loginFrame-main fix-autofill",this.loginMode=this.config.loginModel[0]},Eo.prototype.created=function(){this.$el.html(function(e){var t="";if(e.isQRlogin&&e.qrMode<2&&!e.isHasLogin&&(t+='<div class="YT-qr-btn" id="YT-qrbtn" title="æ‰«ç ç™»å½•" data-gm-stat="H1505507020;change;change=yes"></div>'),e.isIku&&(t+='<div class="YT-header-space"></div>'),t+='<div class="YT-loginFrame-head"><div class="YT-loginFrame-title" id="YT-loginFrameTitle" data-custom-mid="loginFrameTitle">',2===e.qrMode?t+="æ‰«ç ç™»å½•":"mobile"==e.loginModel[0]?t+=""+(e.smsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•"):t+=""+(e.pwdLoginTitleWord||"è´¦å·ç™»å½•"),t+="</div>",e.loginNotice&&e.loginNotice[0]&&(t+='<div class="YT-notice-box',"ad"==e.loginNotice[0].noticeType&&(t+=" YT-notice-ad"),t+='"><i class="YT-notice-icon',"sys"!=e.loginNotice[0].noticeType&&(t+=" YT-notice-gift"),t+='"',e.loginNotice[0].iconUrl&&(t+=' style="background-image:url('+e.loginNotice[0].iconUrl+')"'),t+="></i>",e.loginNotice[0].link?t+='<a target="_blank" href="'+e.loginNotice[0].link+'">'+e.loginNotice[0].word+'<i class="YT-link-icon"></i></a>':t+="<span>"+e.loginNotice[0].word+"</span>",t+="</div>"),t+='<div class="YT-errtips-box" style="display:none"></div>',e.qrMode<2&&(-1!=e.loginModel.indexOf("mobile")&&(t+='<div class="YT-change-logintype',"mobile"==e.loginModel[0]&&(t+=" active"),t+='" id="YT-showMobileLogin"><span id="YT-showMobileLogin-text">'+(e.smsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•")+'</span><i class="YT-iconfont">&#xe9a9;</i></div>'),-1!=e.loginModel.indexOf("normal")&&(t+='<div class="YT-change-logintype',"normal"==e.loginModel[0]&&(t+=" active"),t+='" id="YT-showNormalLogin"><span id="YT-showNormalLogin-text">'+(e.pwdLoginTitleWord||"è´¦å·ç™»å½•")+'</span><i class="YT-iconfont">&#xe9a9;</i></div>')),t+='</div><div class="YT-loginFrame-body">',e.qrMode<2){var i=e.loginModel;if(i)for(var o,n=-1,s=i.length-1;n<s;)"normal"==(o=i[n+=1])?(t+='<form class="YT-form YT-login-form" name="YT-normalLogin" id="YT-normalLogin" method="post" onsubmit="return false" autocomplete="off" ',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group" data-custom-mid="passport"><input type="text" id="YT-ytaccount" name="YT-ytaccount" tabindex="1" maxlength="50" class="YT-form-input" autocomplete="off" data-gm-stat="H48564865;click2;Account_input=yes" /><label class="YT-form-label" for="YT-ytaccount"><span class="YT-form-tips YT-l-account-tips">'+(e.passportInputWord||e.placeholders.login.account)+'</span><span class="YT-m-icon YT-icon-user">&#xe9a8;</span></label></div><div class="YT-form-group"><input type="password" id="YT-ytpassword" name="YT-ytpassword" maxlength="16" tabindex="2" class="YT-form-input" autocomplete="off" data-gm-stat="H48564865;click2;Password_input=yes" /><label class="YT-form-label" for="YT-ytpassword"><span class="YT-form-tips YT-l-password-tips">'+e.placeholders.login.password+'</span><span class="YT-m-icon YT-icon-password">&#xe9b9;</span></label></div><div id="YT-captchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group YT-remember" data-custom-mid="forgetPwd"><div class="YT-passport-help"><a href="'+(e.changePsdLink||"http://id.youku.com/resetPwdView.htm")+'" target="_blank" id="YT-forgetPwd" data-gm-stat="H48564865;click2;Forget_password=yes">'+(e.changePsdName||"å¿˜è®°å¯†ç ")+"</a>",e.hideHelpCenter||(t+='&nbsp;|&nbsp;<a href="'+(e.helpCenterLink||"https://csc.youku.com/feedback-web/alicare?style=1068&spm=a2h0h.8290239.header.5~5~1~3!4~A")+'" target="_blank" data-gm-stat="H48564865;click2;passport_help=yes">'+(e.helpCenterName||"å¸®åŠ©")+"</a>"),t+='</div><label for="YT-ytremember"',e.rememberMe||(t+=' style="display:none"'),t+='><input type="checkbox"',e.rememberMe&&(t+=' checked="checked"'),t+=' id="YT-ytremember" name="YT-ytremember" data-gm-stat="H48564865;click2;Remember_me=yes">&nbsp;<span>è®°ä½æˆ‘</span></label></div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-nloginSubmit" data-custom-mid="loginSubmit" data-process="æ­£åœ¨è¿›å…¥..." title="'+(e.loginSubmitWord||"ç™» å½•")+'" class="YT-form-btn"',e.loginSubmitStyle&&(t+=' style="'+e.loginSubmitStyle+'"'),t+=' data-gm-stat="H48564865;click2;Login_button=yes">'+(e.loginSubmitWord||"ç™» å½•")+"</button></div></form>"):"mobile"==o&&(t+='<form class="YT-form YT-login-form" name="YT-mobileLogin" id="YT-mobileLogin" method="post" onsubmit="return false" autocomplete="off" ',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group YT-mobile-group no-icon"><input type="text" id="YT-mAccount" name="YT-mAccount" tabindex="1" maxlength="11" class="YT-form-input" autocomplete="off" data-gm-stat="H48564843;click1;Phone_number=yes" /><label class="YT-form-label" for="YT-mAccount"><span class="YT-form-tips l-mobile-tips">æ‰‹æœºå·ç </span><span class="YT-m-icon YT-icon-phone"></span></label><div class="YT-country-chouse-box" data-gm-stat="H48564843;click1;area=yes"><div id="YT-countryCode" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+(e.loginCountry.countryCode||"")+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div id="YT-sCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group no-icon"><button id="YT-getMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled data-gm-stat="H48564843;click1;Dynamic_passwordbutton=yes">èŽ·å–åŠ¨æ€å¯†ç </button><input type="text" id="YT-mPassword" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" data-gm-stat="H48564843;click1;Dynamic_password=yes" /><label class="YT-form-label" for="YT-mPassword"><span class="YT-form-tips short-tips">åŠ¨æ€å¯†ç </span><span class="YT-m-icon icon-password"></span></label></div><div id="YT-mCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-block21"><div class="YT-voiceAndSmsCont"></div></div><div class="YT-form-group YT-btn-group"><div class="YT-block21" id="quickRegAgreement" style="display:none"><label for="YT-agreeRegRules" id="YT-rulesLabel" class="YT-check-label checked" data-gm-stat="H48654216;Register1;agree=yes"><input type="checkbox" id="YT-agreeRegRules" name="YT-agreeRegRules">&nbsp;å·²é˜…è¯»å¹¶åŒæ„<span id="YT-rulesBody"><a href="'+e.regRules[1]+'" target="_blank">ã€Š'+e.regRules[0]+"ã€‹</a>",2<e.regRules.length&&(t+='<a href="'+e.regRules[3]+'" target="_blank">ã€Š'+e.regRules[2]+"ã€‹</a>"),t+='</span></label></div><button type="submit" id="YT-mloginSubmit" data-custom-mid="loginSubmit" data-process="æ­£åœ¨è¿›å…¥..." title="'+(e.loginSubmitWord||"ç™» å½•")+'" class="YT-form-btn"',e.loginSubmitStyle&&(t+=' style="'+e.loginSubmitStyle+'"'),t+=' data-gm-stat="H48564843;click1;SMS_loginbutton=yes">'+(e.loginSubmitWord||"ç™» å½•")+"</button></div></form>")}if(!e.isQRlogin&&2!==e.qrMode||(t+='<div id="YT-qrLogin" class="YT-qr-login" data-custom-mid="qrSetting" style="display:none">',e.isIku&&(t+='<div class="YT-qr-title">æ‰«ç ç™»å½•</div>'),t+='<div class="YT-qr-ok" id="YT-qrLoginOK" style="display:none"><span class="success-icon"></span><p>ç™»å½•æˆåŠŸ</p></div><div class="YT-qrLogining" id="YT-qrLogining"><div class="YT-qrImg-box"><div class="YT-invalid-tips" id="YT-invalidTips" style="display:none"><p class="YT-tips">äºŒç»´ç å·²å¤±æ•ˆ</p><a href="javascript:;" class="YT-qr-refresh" id="YT-reGetQRCode">ç‚¹æˆ‘åˆ·æ–°</a></div><img src="" alt="" id="YT-qrImg" class="YT-qrimg" style="display:none"></div><div class="YT-qr-foot YT-form"><div class="YT-qr-tips">'+e.qrMsg+"</div></div></div></div>"),t+="</div>",e.qrMode<2)if(e.isPartnerLogin)t+='<div class="YT-partner-foot"><a href="'+(e.partnerGoBackURL||"#")+'">'+(e.partnerGoBackTitle||"è¿”å›žå‰é¡µ")+'</a><a href="'+(e.partnerHelpURL||"#")+'" class="YT-partner-help" target="_blank">'+(e.partnerHelpTitle||"é‡åˆ°é—®é¢˜ï¼Ÿ")+"</a></div>";else{if(t+='<div class="YT-loginFrame-foot',e.isThirdPartLogin&&e.thirdPartUrlAry&&(t+=" hasthirdlist"),t+='" id="YT-thirdParyBody">',"false"!==e.needHideRegister&&!1!==e.needHideRegister&&(t+='<a href="javascript:;" id="YT-registeBtn" class="YT-registe-btn">æ³¨å†Œ</a>'),e.isThirdPartLogin&&e.thirdPartUrlAry){t+='<div class="YT-third-type"><span class="YT-text">å…¶ä»–æ–¹å¼ï¼š</span><div class="YT-third-part-wrap" id="YT-thirdPartWrap">';var r={qq:"H48594750;loginQQ;loginQQ=yes",weibo:"H1509201135;loginweibo;loginweibo=yes",wechat:"H1510124655;loginweixin;loginweixin=yes",alipay:"H1507354093;zhifubao;zhifubao=yes",taobao:"H1510124656;logintaobao;logintaobao=yes"};t+='<div class="YT-third-part-list">';var a=e.thirdPartUrlAry;if(a)for(var c,l=-1,d=a.length-1;l<d;)c=a[l+=1],t+='<span class="YT-third-part-item',4<l&&5<e.thirdPartUrlAry.length&&(t+=" hide"),t+='" data-link="'+c.link+'" data-site="'+c.site+'"><a href="javascript:;" title="ç”¨'+c.name+'è´¦å·ç™»å½•" class="YT-l-icon icon-'+c.site+'" data-gm-stat="'+(r[c.site]||"")+'"></a></span>';5<e.thirdPartUrlAry.length&&(t+='<span class="YT-third-btn show-all-third-btn"><a href="javascript:;" title="æ›´å¤š" class="YT-l-icon icon-more"></a></span><span class="YT-third-btn hide-third-btn" style="display:none"><a href="javascript:;" title="éšè—" class="YT-l-icon icon-more icon-hide"></a></span>'),t+="</div></div></div>"}t+="</div>"}return t}(this.config))},Eo.prototype.mounted=function(){vi.prototype.mounted.call(this),this.$qrcodeBtn=this.find("#YT-qrbtn"),this.$normalView=this.find("#YT-normalLogin"),this.$mobileView=this.find("#YT-mobileLogin"),this.$showNormal=this.find("#YT-showNormalLogin"),this.$showMobile=this.find("#YT-showMobileLogin"),this.$loginTitle=this.find("#YT-loginFrameTitle"),this.$ytAccount=this.find("#YT-ytaccount"),this.$mobAccount=this.find("#YT-mAccount"),this.$ytPassword=this.find("#YT-ytpassword"),this.$mPassword=this.find("#YT-mPassword"),this.$getSmsCode=this.find("#YT-getMobileCode"),this.$regAgree=this.find("#quickRegAgreement"),this.$regAgreeCheck=this.find("#YT-agreeRegRules"),this.config.isThirdPartLogin&&(this.thirdPartView=new Oi({el:"#YT-thirdPartWrap"})),(this.config.isQRlogin&&0<this.config.qrMode||2===this.config.qrMode)&&this.toggleQRLogin(),this.setUserData(),this.$mobAccount.on("input change",this.checkMobile.bind(this))},Eo.prototype.showNormalLogin=function(){this.$showMobile.removeClass("active"),this.$showNormal.addClass("active"),this.$loginTitle.html(this.config.pwdLoginTitleWord||"è´¦å·ç™»å½•"),this.$normalView.show(),this.$mobileView.hide(),this.changeMode("normal")},Eo.prototype.showMobileLogin=function(){this.$showNormal.removeClass("active"),this.$showMobile.addClass("active"),this.$loginTitle.html(this.config.smsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•"),this.$normalView.hide(),this.$mobileView.show(),this.changeMode("mobile")},Eo.prototype.toggleQRLogin=function(){this.$el.hasClass("YT-qrLoginMode")?(this.$el.removeClass("YT-qrLoginMode"),this.$loginTitle.html(this._loginTitle),this.$qrcodeBtn.attr("title","æ‰«ç ç™»å½•"),this.changeMode(this._loginMode)):(this.$el.addClass("YT-qrLoginMode"),this._loginTitle=this.$loginTitle.html(),this.$loginTitle.html("æ‰«ç ç™»å½•"),this.$qrcodeBtn.attr("title","æ™®é€šç™»å½•"),this.changeMode("qrcode"))},Eo.prototype.toggleSubmitState=function(e){var t=this.getSubmitButton(),e=e.currentTarget.checked;this.disableButton(t,!e)},Eo.prototype.showRegAgreement=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!1===e?(t=!0,this.$regAgree.hide()):this.$regAgree.show(),this.$regAgreeCheck.get(0).checked=t;var i=this.getSubmitButton(),o=this.config.loginSubmitWord||"ç™»å½•",n=this.config.loginAndRegSubmitWord||"æ³¨å†Œå¹¶ç™»å½•";i.html(!1===e?o:n),i.attr("title",!1===e?o:n),this.disableButton(i,!t)},Eo.prototype.getContainerID=function(){var e=this._captchaContainerID;return e?(this._captchaContainerID=null,e):"normal"===this.loginMode?"YT-captchaWrap":"YT-mCaptchaWrap"},Eo.prototype.getSubmitButton=function(){return this.find("normal"===this.loginMode?"#YT-nloginSubmit":"#YT-mloginSubmit")},Eo.prototype.getMobilePhoneNumber=function(){return this.$mobAccount.val()},Eo.prototype.getSendCodeBtn=function(){return this.$getSmsCode},Eo.prototype.getPassCodeInput=function(){return this.$mPassword},Eo.prototype.setUserData=function(){var e,t;this.config.isTlsite||((e=Li.getRegExistAccountInfo())&&(this.updateCountryInfo(e.loginCountry),"normal"===this.loginMode&&-1<this.config.loginModel.indexOf("mobile")&&this.showMobileLogin()),(t=e&&e.mobile||Li.getAccount())&&("normal"===this.loginMode?(this.$ytAccount.val(t),this.hidePlaceholder({currentTarget:this.$ytAccount[0]})):e&&(this.$mobAccount.val(t),this.hidePlaceholder({currentTarget:this.$mobAccount[0]}),this.resetSendCodeBtn())))},Eo.prototype.updateCountryInfo=function(e){this.getCountryRegion()!==e.region&&(this.selectCountry(e.region,e.countryCode,e.countryName),this.$countryRegion.val(e.region).attr({"data-region":e.region,"data-name":e.countryName,"data-code":e.countryCode}))},Eo.prototype.matchCountryInfo=function(e){var t=this.config.mobileCountries;if(t)for(var i in t)for(var o=0;o<t[i].length;o++)if(new RegExp("^00"+t[i][o].countryCode).test(e))return t[i][o];return null},Eo.prototype.changeMode=function(e){var t,i,o,n;e&&(this._loginMode=this.loginMode,this.loginMode=e,t=this.getCountryCode(),o=this.getCountryRegion(),i=this.$mobAccount.val(),n=this.$ytAccount.val(),"normal"===e&&(k(i,o)?(this.$ytAccount.val("CN"===o?i:"00"+t+i),this.$ytAccount.get(0).focus()):(this.clearInput(this.$ytAccount.get(0)),this.setUserData()),this.clearInput(this.$ytPassword.get(0))),"mobile"===e&&(o=(i=this.matchCountryInfo(n))?i.region:o,k(n=i?n.replace(new RegExp("^00"+i.countryCode),""):n,o)?(this.$mobAccount.val(n),this.$mobAccount.get(0).focus(),i&&this.updateCountryInfo(i)):this.clearInput(this.$mobAccount.get(0)),this.clearInput(this.getPassCodeInput()),this.removeVoiceVerify(),this.resetSendCodeBtn(),this.showRegAgreement(!1))),this.clearErrorTip(),this.$el.removeClass("fix-autofill"),this.callDelegateFunc("viewChangeMode",e,this._loginMode)},Eo.prototype.goResetPassword=function(e){var t,i,o,n,s;e&&(i=(t=e.currentTarget).href,s=t.getAttribute("target"),o=!this.needDecrypt&&this.$ytAccount.val()||"",n=this.getCountryRegion(),n=i+(-1<i.indexOf("?")?"&":"?")+"passport="+encodeURIComponent(o)+"&region="+n,this.config.isIku?t.href=n:(e.preventDefault(),e=n,n=s,ot?((s=document.createElement("a")).href=e,s.target=n||"_self",s.setAttribute("data-openurl","true"),document.body.appendChild(s),s.click()):n?window.open(e,n):location.href=e))},Eo),qi=(fe(Mo,yi=Fi),Mo.prototype.events=function(){return Object.assign(yi.prototype.events.call(this),{"click #YT-agreement-checked":"checkAgreement","click .YT-switch-account":"switchAccount","click .YT-switch-user":"toggleAccountList","click .YT-userlist a":"switchRecomAccount"})},Mo.prototype.init=function(){yi.prototype.init.call(this);var e=this.config,t=e.recommendYKUserList||[],t=t.length&&t[e.tlSelectAccountIndex||0];e.isThirdPartLogin=!1,e.ytid=t.ytid,e.needVerify&&t&&"mobile"===t.verifyType?(e.sendCodeToken=t.formtoken,e.hasMobile=!0,this.loginMode="mobile"):(e.hasMobile=!1,this.loginMode="normal"),this.needDecrypt=t&&t.needDecrypt||!1},Mo.prototype.created=function(){this.$el.html(function(e){var t='<input type="hidden" id="YT-countryRegion" name="YT-countryRegion" data-name="'+e.loginCountry.countryName+'"data-code="'+e.loginCountry.countryCode+'"data-region="'+e.loginCountry.region+'"value="'+e.loginCountry.region+'" /><div class="YT-loginFrame-body">';if(e.isNewUser){if(t+='<ul class="YT-default-list inside"><li class="YT-no-passport"><b class="YT-icon-exchange"></b><div class="YT-userbox"><div class="YT-userpic"><img src="'+(e.avatar||"/static-resources/images/logo.jpg")+'"><i class="YT-pic-shadow YT-blue-shadow"></i></div><div class="YT-userinfo"><em>ä¼˜é…·åœŸè±†ç”¨æˆ·</em></div></div><div class="YT-userbox YT-userbox-r"><div class="YT-userpic"><img src="'+(e.tbAvatar||"/static-resources/images/logo_taobao.jpg")+'"><i class="YT-pic-shadow YT-gray-shadow"></i></div><div class="YT-userinfo"><em>'+(e.tbName||"")+"</em></div></div></li></ul>",e.showMiddlePage&&(t+='<div class="YT-btn-box no-recommend-guide"><button type="button" class="YT-form-btn YT-switch-account" data-gm-ns="dtBind" data-gm-stat="H49667132;useotheraccount2">ç»‘å®šå·²æœ‰ä¼˜é…·è´¦å·</button>',e.tbName&&(t+='<div class="YT-space">æˆ–</div><button type="button" class="YT-other-btn YT-useTlsite" data-gm-ns="dtBind" data-gm-stat="H1535059723;clicktaobao">ç”¨æ·˜å®åˆ›å»ºä¼˜é…·è´¦å·</button>'),t+="</div>"),t+='<div class="no-recommend-main"',e.showMiddlePage&&(t+=' style="display:none"'),t+='><ul class="YT-default-list inside"><li class="YT-tips"><i></i><em>è¯·è¾“å…¥ä¼˜é…·åœŸè±†è´¦å·</em></li><li class="YT-errtips-box" style="display:none;"></li><li><div id="YT-changeType-box" class="YT-changeType-box"><span class="active" id="YT-showNormalLogin" data-gm-ns="dtBind" data-gm-stat="H1541524369;clickpassportlogin">'+(e.dtPwdLoginTitleWord||"è´¦å·ç™»å½•")+'</span><span id="YT-showMobileLogin" data-gm-ns="dtBind" data-gm-stat="H1539677327;clickmobilelogin">'+(e.dtSmsLoginTitleWord||"æ‰‹æœºå¿«æ·ç™»å½•")+'</span></div></li></ul><form class="YT-form login-form" name="YT-normalLogin" id="YT-normalLogin" method="post" onsubmit="return false;" autocomplete="off"><ul class="YT-form-list"><li><input type="text" id="YT-ytaccount" name="YT-ytaccount" tabindex="1" maxlength="50" class="YT-form-input account-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H49577737;enteraccount1" /><label class="YT-form-label" for="YT-ytaccount"><span class="YT-form-tips YT-l-account-tips">æ‰‹æœº/é‚®ç®±/ä¼˜é…·åœŸè±†è´¦å·</span></label></li><li><input type="password" id="YT-ytpassword" name="YT-ytpassword" maxlength="16" tabindex="2" class="YT-form-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H48832962;enterpwd1"><label class="YT-form-label" for="YT-ytpassword"><span class="YT-form-tips">ç™»å½•å¯†ç </span></label></li><li id="YT-captchaWrap" class="YT-captcha-wrap"></li><li class="YT-btn-box"><button type="submit" id="YT-nloginSubmit" class="YT-form-btn btn-block" title="ç™»å½•å¹¶ç»‘å®š" data-gm-ns="dtBind" data-gm-stat="H49577737;loginandbind1">ç™»å½•å¹¶ç»‘å®š</button></li></ul></form><form class="YT-form YT-login-form" name="YT-mobileLogin" id="YT-mobileLogin" method="post" onsubmit="return false;" autocomplete="off" style="display:none"><ul class="YT-default-list inside"><li class="YT-mobile-group"><input type="text" id="YT-mAccount" name="YT-mAccount" tabindex="1" maxlength="11" class="YT-form-input account-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H49637437;enteraccountSMS" /><label class="YT-form-label" for="YT-mAccount"><span class="YT-form-tips mobile-tips">æ‰‹æœºå·ç </span></label><div class="YT-country-chouse-box" data-gm-ns="dtBind" data-gm-stat="H1536906796;choosecountry"><div id="YT-countryCode" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+e.loginCountry.countryCode+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></li><li id="YT-sCaptchaWrap" class="YT-captcha-wrap"></li><li class="YT-mobile-group"><button id="YT-getMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled>èŽ·å–åŠ¨æ€å¯†ç </button><input type="text" id="YT-mPassword" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" data-gm-ns="dtBind" data-gm-stat="H48803289;enterSMS" /><label class="YT-form-label" for="YT-mPassword"><span class="YT-form-tips">åŠ¨æ€å¯†ç </span></label></li><li class="YT-mobile-group YT-voiceAndSmsCont"></li><li id="YT-mCaptchaWrap" class="YT-captcha-wrap"></li><li class="YT-btn-box"><button type="submit" id="YT-mloginSubmit" class="YT-form-btn" title="ç™»å½•å¹¶ç»‘å®š" data-gm-ns="dtBind" data-gm-stat="H49577737;loginandbind1">ç™»å½•å¹¶ç»‘å®š</button></li></ul></form>',!1!==e.dtThirdPartLogin&&e.thirdPartUrlAry&&e.thirdPartUrlAry.length&&e.tlsiteName){t+='<ul class="YT-default-list inside"><li><div class="YT-third-list">';var i=e.thirdPartUrlAry;if(i)for(var o,n=-1,s=i.length-1;n<s;)o=i[n+=1],1==e.thirdPartUrlAry.length?o.site==e.tlsiteName?t+='<button type="button" class="YT-other-btn YT-useTlsite" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'">'+o.name+"è´¦å·ç™»å½•</button>":t+='<button type="button" class="YT-other-btn YT-useTlsite-other" data-url="'+o.link+"&callback="+(e.bizCallback||"")+'" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'">'+o.name+"è´¦å·ç™»å½•</button>":o.site==e.tlsiteName?t+='<a href="javascript:;" class="YT-third-item YT-useTlsite for-'+o.site+'"><i class="YT-l-icon icon-'+o.site+'" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'"></i></a>':t+='<a href="javascript:;" class="YT-third-item YT-useTlsite-other for-'+o.site+'" data-url="'+o.link+"&callback="+(e.bizCallback||"")+'"><i class="YT-l-icon icon-'+o.site+'" data-gm-ns="dtBind" data-gm-stat="H1510124624;third;click='+o.site+'"></i></a>';t+="</div></li></ul>"}t+="</div>"}else{var r=e.recommendYKUserList||[],a=e.tlSelectAccountIndex||0;if(e.needVerify&&"mobile"==r[a].verifyType?t+='<form class="YT-form login-form" name="YT-mobileLogin" id="YT-mobileLogin" method="post" onsubmit="return false;" autocomplete="off">':t+='<form class="YT-form login-form" name="YT-normalLogin" id="YT-normalLogin" method="post" onsubmit="return false;" autocomplete="off">',t+='<div class="YT-has-passport" id="YT-has-passport"><b class="YT-icon-exchange"></b><div class="YT-userbox folded" id="YT-recomAccountBox">',e.needVerify&&"mobile"==r[a].verifyType?t+='<input type="hidden" id="YT-mAccount" name="YT-mAccount" value="'+(r[a].passport||"")+'"><input type="hidden" class="YT-countryCode" data-region="'+(r[a].region||"CN")+'">':t+='<input type="hidden" id="YT-ytaccount" name="YT-ytaccount" value="'+(r[a].passport||"")+'">',t+='<div class="YT-userpic"><img src="'+(r[a].avatar||"/static-resources/images/logo.jpg")+'"><i class="YT-pic-shadow YT-blue-shadow"></i></div><div class="YT-userinfo"><em>'+r[a].hiddenNickname+"</em>("+(r[a].hint||r[a].hiddenPassport)+")</div>",1<r.length){t+='<a href="#" class="YT-switch-user">æ›´æ¢æŽ¨èè´¦å·</a><ul class="YT-userlist">';var c=r;if(c)for(var l,n=-1,d=c.length-1;n<d;)l=c[n+=1],t+="<li",n==a&&(t+=' class="current"'),t+='><a href="#" rel="'+n+'"><em>'+l.hiddenNickname+"</em>("+(l.hint||l.hiddenPassport)+")</a></li>";t+="</ul>"}t+='</div><div class="YT-userbox YT-userbox-r"><div class="YT-userpic"><img src="'+(e.tbAvatar||"/static-resources/images/logo.jpg")+'"><i class="YT-pic-shadow YT-gray-shadow"></i></div><div class="YT-userinfo"><em>'+(e.tbName||"")+'</em></div></div></div><ul class="YT-form-list"><li class="YT-errtips-box" style="display:none;"></li>',e.needVerify?"email"==r[a].verifyType?t+='<li><input type="password" id="YT-ytpassword" name="YT-ytpassword" maxlength="16" tabindex="2" class="YT-form-input" autocomplete="off" data-gm-ns="dtRecom" data-gm-stat="H1511971666;enterpwd"><label class="YT-form-label" for="YT-ytpassword"><span class="YT-form-tips">ç™»å½•å¯†ç </span></label></li><li id="YT-captchaWrap" class="YT-captcha-wrap"></li>':"mobile"==r[a].verifyType&&(t+='<li><div class="YT-form-text">'+(r[a].hiddenPassport||"")+'</div></li><li id="YT-sCaptchaWrap" class="YT-captcha-wrap"></li><li class="YT-mobile-group"><button id="YT-getMobileCode" data-type="verify_user" data-name="mobileCode" class="YT-form-btn inline getCode">èŽ·å–éªŒè¯ç </button><input type="text" id="YT-mPassword" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off"><label class="YT-form-label" for="YT-mPassword"><span class="YT-form-tips">éªŒè¯ç </span></label></li><li class="YT-mobile-group YT-voiceAndSmsCont"></li><li id="YT-mCaptchaWrap" class="YT-captcha-wrap"></li>'):t+='<li id="YT-captchaWrap" class="YT-captcha-wrap"></li>',t+='<li class="YT-btn-box"><button type="submit" id="YT-nloginSubmit" class="YT-form-btn btn-block" title="ç™»å½•å¹¶ç»‘å®š" data-gm-ns="dtRecom" data-gm-stat="H1535059691;loginandbind">ç™»å½•å¹¶ç»‘å®š</button><div class="YT-space">æˆ–</div><a href="/tlsite/login_view_other.htm?state='+(e.state||"")+'" class="YT-other-btn" data-gm-ns="dtRecom" data-gm-stat="H1537830291;tabotheraccount">ç»‘å®šå·²æœ‰ä¼˜é…·è´¦å·</a></li></ul></form>'}return e.tbName&&(t+='<div class="YT-bt-fixed"><input type="checkbox" id="YT-agreement-checked" checked="checked" class="YT-checkbox" /><label for="YT-agreement-checked" class="YT-label">åŒæ„ <a href="//terms.alicdn.com/legal-agreement/terms/TD/TD201608031631_71011.html" target="_blank" data-gm-ns="dtRecom" data-gm-stat="H1507354101;law">ã€Šè´¦æˆ·äº’ç»‘åè®®ã€‹</a></label></div>'),t+"</div>"}(this.config))},Mo.prototype.mounted=function(){yi.prototype.mounted.call(this),this.$body=this.$(document.body),this.$accountBox=this.find("#YT-recomAccountBox"),this.$accountList=this.find(".YT-userlist"),!1===this.config.tlShowBgText&&this.$(".headerLogo div").hide()},Mo.prototype.remove=function(){yi.prototype.remove.call(this),this.clearTimer(this._countTimer,this._fadeinTimer,this._fadeoutTimer,this._delayTimer),this.removeCaptcha(),this.$body.off(".tlsite"),this.$body=null,this.config.hasMobile=!1,this.voiceView&&this.voiceView.remove(),this.$mobAccount&&this.$mobAccount.off()},Mo.prototype.toggleAccountList=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.$accountBox.hasClass("folded")?(this.$accountBox.removeClass("folded"),this.$body.on("click.tlsite",function(){t.$body.off(".tlsite"),t.toggleAccountList(e)})):(this.$body.off(".tlsite"),this.$accountBox.addClass("folded"))},Mo.prototype.switchRecomAccount=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,e=parseInt(t.getAttribute("rel")||0);this.$body.off(".tlsite"),-1<t.parentNode.className.indexOf("current")?this.$accountBox.addClass("folded"):(L({tlSelectAccountIndex:e}),this.callDelegateFunc("viewWillUpdate"))},Mo.prototype.switchAccount=function(e){e&&e.preventDefault(),this.find(".no-recommend-guide").hide(),this.find(".no-recommend-main").show()},Mo.prototype.checkAgreement=function(e){e=e.currentTarget;this.isAgreeBind=!!e.checked},Mo),Ui=function(e,t){return e=e||0,1===(t=t.length)?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)},Wi=ce,ji=void 0,Hi=void 0,Ki=(fe(Ro,bi=de),Ro.prototype.events=function(){return{"click #selectConfirm":"selectConfirm","click #createAccount":"createAccount","click #mergeAccount":"mergeAccounts","click .YT-account-item":"selectAccountItem","click #bindExchangeCancel":"bindExchangeCancel","click #bindExchangeConfirm":"bindExchangeConfirm"}},Ro.prototype.init=function(){this.id="YT-loginRecom-main",this.className="YT-loginFrame-main YT-recommend-login"},Ro.prototype.created=function(){this.options.config=E(),this.options.formatDate=Wi,this.options.cutString=this.cutString.bind(this),this.renderView()},Ro.prototype.mounted=function(){var e=this;bi.prototype.mounted.call(this),setTimeout(function(){ji||(ji=document.getElementById("YT-loginFrame-container").offsetWidth,Hi=e.find(".YT-account-item")[0].offsetWidth,e.renderView())},0)},Ro.prototype.renderView=function(){this.$el.html(function(e){for(var t="",i=e.data&&e.data.recommendList||[],o={alipay:"æ”¯ä»˜å®",taobao:"æ·˜å®",wechat:"å¾®ä¿¡",qzone:"QQ",qq:"QQ",sina:"å¾®åš",weibo:"å¾®åš"},n=o[e.tlsite]||"",s=0,r=0;r<i.length;r++)i[r].profileInfo.vip&&s++;t+='<div class="YT-recom-icon"></div><div class="YT-loginFrame-head"> ',"bind"===e.type?t+=' <div class="YT-loginFrame-title">é€‰æ‹©è´¦å·ä¸Ž'+n+"ç»‘å®š</div> ":t+=' <div class="YT-loginFrame-title">é€‰æ‹©ç™»å½•è´¦å·</div> ',t+=' <div class="YT-errtips-box" style="display:none"></div> ',e.data.showMergeUrl&&(t+=' <div class="YT-change-logintype" id="mergeAccount" data-vipcount="'+s+'"><span>è´¦å·åˆå¹¶</span><i class="YT-iconfont">&#xe9a9;</i></div> '),t+='</div><div class="YT-loginFrame-body"> <div class="YT-account-select"> <ul class="YT-account-list"> ';var a=i;if(a)for(var c,l=-1,d=a.length-1;l<d;)t+=' <li class="YT-account-item" data-token="'+((c=a[l+=1]).userKey||"")+'"> <img class="user-avatar" src="'+(c.profileInfo.avatar||"https://img.alicdn.com/tfs/TB1wY43dbGYBuNjy0FoXXciBFXa-160-160.png")+'" /> <span class="user-nickname">'+e.cutString(c.userDto.nickname||"",33,c.profileInfo.vip),c.profileInfo.vip&&(t+='<img class="vip-icon" src="https://img.alicdn.com/tfs/TB1A5seJKSSBuNjy0FlXXbBpVXa-28-24.png" />'),t+='</span> <span class="user-account"',c.profileInfo.vip&&(t+=' title="'+e.formatDate("YYYY/MM/DD",1e3*c.profileInfo.vipExpireTime)+'åˆ°æœŸ"'),t+="> "+e.cutString(c.userDto.loginMobile||c.userDto.loginEmail||c.partnerInfo&&"å·²ç»‘å®š"+o[c.partnerInfo.tlsite]+" "+(c.partnerInfo.nickname||"")||"",34,!1,c.profileInfo.vip)+" ",c.profileInfo.vip&&(t+=" "+e.formatDate("YYYY/MM/DD",1e3*c.profileInfo.vipExpireTime)+"åˆ°æœŸ"),t+=" </span> </li> ";return t+=' </ul> </div> <div class="YT-form-group YT-btn-group"> <button id="selectConfirm" class="YT-form-btn disabled">ç¡®è®¤å¹¶ç™»å½•</button> ',e.data.showCreateNewUserUrl&&(t+=' <a href="#" class="YT-createNewAccount" id="createAccount">åˆ›å»ºæ–°è´¦å·</a> '),t+' </div></div><div class="YT-bindExchange"> <div class="YT-header"><p></p></div> <div class="YT-btn-group"> <button class="YT-form-btn YT-form-btn-l" id="bindExchangeCancel">å–æ¶ˆ</button> <button class="YT-form-btn" id="bindExchangeConfirm">æ˜¯çš„</button> </div></div>'}(this.options)),this.$confirmBtn=this.find("#selectConfirm"),this.$accountItem=this.find(".YT-account-item")},Ro.prototype.remove=function(){this.options.formatDate=null,this.selectItem=null,bi.prototype.remove.call(this)},Ro.prototype.confirmBindExchange=function(e){this.$el.addClass("YT-bindExchange-confirm");var t,i=this.find(".YT-header p"),t=(t=e.tlsite,Tt[t]||t);i.html("æ‚¨éœ€è¦ç»‘å®šçš„ä¼˜é…·è´¦å·\n            <b>"+e.hiddenPassport+"</b> å·²ç»ç»‘å®š"+t+"è´¦å·\n            <b>"+e.thirdpartyNickname+"</b>ï¼Œæ˜¯å¦è¿›è¡Œæ›¿æ¢ï¼Ÿ")},Ro.prototype.bindExchangeCancel=function(){this.$el.removeClass("YT-bindExchange-confirm")},Ro.prototype.bindExchangeConfirm=function(){this.bindExchangeCancel(),this.callDelegateFunc("confirmBindExchange")},Ro.prototype.selectAccountItem=function(e){e=e.currentTarget;this.$accountItem.removeClass("checked"),this.$(e).addClass("checked"),this.selectItem||this.$confirmBtn.removeClass("disabled"),this.selectItem=e},Ro.prototype.selectConfirm=function(){var e=this.selectItem.getAttribute("data-token");this.callDelegateFunc("confirmSelectedAccount",e)},Ro.prototype.createAccount=function(){this.callDelegateFunc("clickToCreateAccount")},Ro.prototype.mergeAccounts=function(e){e=parseInt(e.currentTarget.getAttribute("data-vipcount")||"0");this.callDelegateFunc("clickToMergeAccounts",e)},Ro.prototype.disableSubmitButton=function(e){(e=void 0===e?!0:e)?this.$confirmBtn.addClass("disabled"):this.$confirmBtn.removeClass("disabled")},Ro.prototype.cutString=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return 16<ji-Hi&&(i-=3),"mini"===this.options.config.size&&(i-=6),2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&(i-=4),3<arguments.length&&void 0!==arguments[3]&&arguments[3]&&(i-=13),t=i,void 0===(i="...")&&(i=".."),(e=(e=e)||"").replace(/([^\x00-\xff])/g,"$1 ").length<=t?e:e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/([^\x00-\xff])\s/g,"$1")+i},Ro),zi=(fe(So,Ti=et),So.prototype.events=function(){return{"click #refreshQRCode":"getQRCode","click .YT-change-logintype":"back","click #gotoLogin":"gotoLogin"}},So.prototype.init=function(){this.id="YT-mergeAccount-main",this.className="YT-loginFrame-main YT-merge-account",this.config=E()},So.prototype.created=function(){var e,t=this.options.vipCount;this.$el.html((e='<div class="YT-recom-icon"></div><div class="YT-loginFrame-head"> <div class="YT-loginFrame-title">è´¦å·åˆå¹¶',2<={vipCount:t}.vipCount&&(e+="<em>(åˆå¹¶åŽæƒç›Šå åŠ )</em>"),e+'</div> <div class="YT-change-logintype"><span>è¿”å›žç™»å½•è´¦å·</span></div></div><div class="YT-loginFrame-body"> <div class="YT-qr-login"> <div class="YT-qr-ok" style="display:none"> <span class="success-icon"></span> <p>æ‰«ææˆåŠŸï¼<br>è¯·åœ¨æ‰‹æœºç«¯è¿›è¡Œè´¦å·åˆå¹¶</p> </div> <div class="YT-qr-fail" style="display:none"> <span class="fail-icon"></span> <p>é¡µé¢é•¿æ—¶é—´åœç•™å·²è¿‡æœŸï¼Œè¯·é‡æ–°å®Œæˆç™»å½•</p> <button class="YT-form-btn" id="gotoLogin">é‡æ–°ç™»å½•</button> </div> <div class="YT-qrLogining"> <div class="YT-qrImg-box"> <div class="YT-invalid-tips" style="display:none"> <p class="YT-tips">äºŒç»´ç å·²å¤±æ•ˆ</p> <a href="javascript:;" class="YT-qr-refresh" id="refreshQRCode">ç‚¹æˆ‘åˆ·æ–°</a> </div> <img src="" class="YT-qrimg" style="display:none"> </div> <div class="YT-qr-foot YT-form"> <div class="YT-qr-tips">è¯·ä½¿ç”¨ä¼˜é…·APPè¿›è¡Œæ‰«ç </div> </div> </div> </div></div>')),this.$qrCodeImg=this.find(".YT-qrimg"),this.$invalidTips=this.find(".YT-invalid-tips"),this.$qrScan=this.find(".YT-qrLogining"),this.$qrSuccess=this.find(".YT-qr-ok"),this.getQRCode()},So.prototype.getQRCode=function(){var t=this,e=this.model,i=this.config;this.$qrScan.show(),this.$qrSuccess.hide(),e.off("getQRCode:fail getQRCode:success"),e.once("getQRCode:fail",function(e){"TOKEN_NOT_EXIST_OR_EXPIRE"!==e.errorCode?t.$invalidTips.show():t.tokenFail()}),e.once("getQRCode:success",function(e){e.msg&&e.msg.qrImgUrl&&(t.$invalidTips.hide(),t.$qrCodeImg.attr("src",e.msg.qrImgUrl).show(),t._qrInterval=setInterval(function(){t._qrInterval&&t.loginConnect(e.msg.code,e.msg.codeType)},3e3))}),this.disconnect(),e.getQRCode({callback:i.callbackURL||window.location.href,buid:i.buid,pid:i.pid,size:200,logo:i.qrLogo||i.qrBu[0]||"yk",logosize:i.qrBu[1]||60,logoOnTop:i.qrLogoType||i.qrBu[2]||"true",codeType:"mergeUser"})},So.prototype.loginConnect=function(e,t){var i=this,o=this.model;o.off("loginByCode:fail loginByCode:success"),o.once("loginByCode:fail",function(e){switch(e.errorCode){case"QR_CODE_SCAN":i.$qrScan.hide(),i.$qrSuccess.show();break;case"QR_CODE_ERROR":case"QR_CODE_BEE_USED":case"QR_CODE_NOT_EXIST":i.$invalidTips.show(),i.disconnect();break;case"TOKEN_NOT_EXIST_OR_EXPIRE":i.tokenFail()}}),o.once("loginByCode:success",function(e){i.disconnect(),i.$qrScan.hide(),i.$qrSuccess.show(),i.$qrSuccess.find("p").html("ç™»å½•æˆåŠŸ"),i.callDelegateFunc("mergeLoginSuccess",e)}),o.loginByCode({codeType:t,code:e})},So.prototype.tokenFail=function(){this.$qrScan.hide(),this.$qrSuccess.hide(),this.find(".YT-qr-fail").show(),this.find(".YT-change-logintype").hide(),this.disconnect()},So.prototype.disconnect=function(){this._qrInterval=this.clearTimer(this._qrInterval)},So.prototype.gotoLogin=function(){this.callDelegateFunc("mergeLoginExpire")},So.prototype.back=function(){this.disconnect(),this.callDelegateFunc("backToLogin")},So),ge=(fe(_o,fi=me),_o.prototype.sendMobileCodeAction=function(){var t,i=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=o.config||this.config,n=o.model||this.model,s=o.view||this.view,r=o.hasMobile||!1,a=o.accountType||"normal",c=o.codeType||(s.isVoiceVerify?"voiceCode":"mobileCode"),l=o.formtoken||e.sendCodeToken||e.formtoken,d=window.mtee&&window.mtee.getUmidToken()||"",h=window.mtee&&window.mtee.getUA()||"",p=s.getCountryRegion(),u=s.getMobilePhoneNumber();!s.isVoiceVerify||s.checkSamePhoneNumber(u)||r?(t={bizType:o.bizType||"login",sendCodeType:c,formtoken:l,buid:e.buid,pid:e.pid,jsToken:d,UA:h},r||(t.mobileNo=u,t.region=p),o.userInfoToken&&(t.userInfoToken=o.userInfoToken),o.needDecrypt&&(t.needDecrypt=o.needDecrypt),s.needCaptcha&&(t.captcha=s.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(t.sliderCaptchaSessionId=this.ali.NCData.csessionid,t.sliderCaptchaToken=this.ali.NCData.token,t.sliderCaptchaSig=this.ali.NCData.sig),this.isGetMobileCode=!1,n.off("sendMobileCode:error sendMobileCode:fail sendMobileCode:success"),n.once("sendMobileCode:error sendMobileCode:fail",function(e){s.showErrorTip(e.errorMsg||e.message,"validateCode"),i.safeCallFunc("sendMobileCodeFail"),i.addCaptchaComponent({errorCode:e.errorCode,mode:a,needSliderCallback:function(){return i.safeCallFunc("sendMobileCodeNeedSlider",o,t)},createCaptchaCallback:function(){return i.safeCallFunc("sendMobileCodeNeedCaptcha",o,t)}})}),n.once("sendMobileCode:success",function(e){i.isGetMobileCode=!0,s.isVoiceVerify&&s.showIncomingCallTips(e.msg||5),s.resendCountDown(u),i.removeCaptchaComponent(a),i.safeCallFunc("sendMobileCodeSuccess",e)}),n.sendMobileCode(t),s.clearErrorTip("validateCode"),s.disableSendCodeButton(),this._sendStat("voice",s.isVoiceVerify?"getVoiceBtn":"getSmsBtn")):s.removeVoiceVerify()},_o.prototype.addCaptchaComponent=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};switch(e.errorCode){case"NEED_CAPTCHA":case"CAPTCHA_ERROR":case"CAPTCHA_KEY_NULL":case"CAPTCHA_CODE_NULL":T(e.createCaptchaCallback)&&e.createCaptchaCallback(),this.view.createCaptcha();break;case"CAPTCHA_TIMEOUT":T(e.changeCaptchaCallback)&&e.changeCaptchaCallback(),this.view.changeCaptcha();break;case"NEED_SLIDER_CAPTCHA":case"SLIDER_CAPTCHA_ERROR":T(e.needSliderCallback)&&e.needSliderCallback(),this.ali&&this.ali.resetNCInstance(e.mode||"normal")}},_o.prototype.removeCaptchaComponent=function(e){this.ali&&this.ali.needSliderCaptcha&&this.ali.removeNCInstance(e),this.view.needCaptcha&&(this.view.removeCaptcha(),this.view.setContainerID(null))},_o),Qi=(fe(ko,mi=ge),ko.prototype.Actions=function(){return{"click #YT-getMobileCode":"sendMobileCode","click #YT-nloginSubmit":"checkSubmit","click #YT-mloginSubmit":"checkSubmit","click .YT-useTlsite-other":"authLoginRedirect","click .YT-useTlsite":"authLogin"}},ko.prototype.init=function(){this.updateConfig(),this.updateView(),this.model.on("loginConfirm:success",this.loginSuccess,this),this.model.on("loginConfirm:fail",this.loginFail,this),this.model.on("loginConfirm:error",this.loginError,this),this.ali=new Ii({type:"login"}),this.ali.delegate=this},ko.prototype.destory=function(){this.model&&(this.model.off(),this.model=null),this.ali&&(this.ali.delegate=null,this.ali=null),mi.prototype.destory.call(this)},ko.prototype.updateConfig=function(){this.config=E()},ko.prototype.updateView=function(){this.view&&(this.view.remove(),this.view=null),this.view=new(this.config.isTlsite?qi:Fi),this.view.delegate=this},ko.prototype.hideView=function(){this.view&&this.view.$el.hide(),this.recomLoginView&&this.recomLoginView.$el.hide(),this.mergeView&&this.mergeView.$el.hide()},ko.prototype.viewDidLoad=function(){var e=this;!this.qrView&&this.config.isIku&&this.getQRCode(),this.config.isUserAlreadyBind&&setTimeout(function(){return e.view.showErrorTip("è¯¥ç¬¬ä¸‰æ–¹å·²ç»ç»‘å®šå…¶ä»–è´¦å·")},1500)},ko.prototype.sendMobileCode=function(e){var t=this.view,i=t.$(e.currentTarget).attr("data-type")||"login",e=t.needDecrypt||!1;this.sendMobileCodeAction({bizType:i,needDecrypt:e,accountType:t.loginMode})},ko.prototype.sendMobileCodeSuccess=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.view,i=this.config,o=e.content||{};o.regAgreement&&!i.isTlsite&&"mobile"===t.loginMode&&(t.showRegAgreement(!0,o.checked),e.errorMsg&&t.showErrorTip(e.errorMsg))},ko.prototype.sendMobileCodeFail=function(){this.view.resetSendCodeBtn()},ko.prototype.sendMobileCodeNeedCaptcha=function(){this.view.setContainerID("YT-sCaptchaWrap")},ko.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sendMobileCodeNeedCaptcha(),this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},ko.prototype.checkSubmit=function(){var e,t,i,o,n=this,s=this.ali,r=this.view,a=this.config.errorTips,c="normal"===r.loginMode?"YT-normalLogin":"YT-mobileLogin",o=(e=r.loginMode,t=this.config,i=r.needDecrypt,o=[],"normal"===e?o=[{name:"YT-ytaccount",rules:"required",errorMsg:t.errorTips.account},{name:"YT-ytpassword",rules:"required",errorMsg:t.errorTips.password}]:"mobile"===e&&(o=[{name:"YT-mAccount",rules:i?"required":"required|valid_mobile",errorMsg:t.errorTips.mobile},{name:"YT-mPassword",rules:"callback_sms_sent|required",errorMsg:{sms_sent:t.hasMobile?t.errorTips.smsCode.noGet:t.errorTips.smsCode.noGetPwd,required:t.hasMobile?t.errorTips.validate.required:t.errorTips.smsCode.smsPwd}}]),o);this.needAgreement()||((o=new Ue(c,o,function(e){if(0<e.length)r.showErrorTip(e[0].message);else{if(r.clearErrorTip(),r.needCaptcha){if(""===r.getCaptchaCode())return void r.showErrorTip(a.captcha.required);if(!r.getCaptchaState())return void r.showErrorTip(a.captcha.error)}if(s&&s.needSliderCaptcha&&!s.passSliderCaptcha)return s.getNCInstance(r.loginMode),void r.showErrorTip(a.sliderCaptcha.required);Bt.ready(function(){return n.loginSubmit()}),r.disableSubmitButton()}})).registerCallback("sms_sent",function(){return!!n.isGetMobileCode}),o._validateForm())},ko.prototype.loginSubmit=function(){if(!this._loginLock){var e=this.view,t=this.config,i={formtoken:t.formtoken,buid:t.buid,pid:t.pid,mode:t.mode,actionFrom:t.from||"",sendCodeType:e.isVoiceVerify?"voiceCode":"mobileCode",state:e.$("#YT-state").val()||!1};e.needDecrypt&&(i.needDecrypt=!0),t.callbackURL&&(i.callback=t.callbackURL),t.clientId&&(i.clientId=t.clientId),t.configId&&(i.configId=t.configId),t.ytid&&(i.ytid=t.ytid),!1!==t.needRecommend&&(i.needRecommend=!0);var o=e.find("#YT-ytremember").get(0);if(o&&o.checked&&(i.rememberMe=!0),"normal"===e.loginMode&&(o=e.find("#YT-ytpassword").val(),i.passport=e.find("#YT-ytaccount").val().trim(),i.password=o?ne(o):"",i.loginType="passport_pwd",e.needDecrypt||(this._userAccount=i.passport)),"mobile"===e.loginMode&&(i.passport=e.find("#YT-mAccount").val().trim(),i.smsCode=e.getPassCodeInput().val(),i.region=e.getCountryRegion(),i.loginType="mobile_sms_code"),e.needCaptcha&&"normal"===e.loginMode&&(i.captcha=e.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(i.sliderCaptchaSessionId=this.ali.NCData.csessionid,i.sliderCaptchaToken=this.ali.NCData.token,i.sliderCaptchaSig=this.ali.NCData.sig),window.mtee&&(i.UA=window.mtee.getUA(),i.jsToken=window.mtee.getUmidToken()||""),t.customParam)for(var n in t.customParam)i[n]=t.customParam[n];this._sendStat("voice","submit"),e.isVoiceVerify&&this._sendStat("voice","isGetVoive");e=t.isTlsite?t.isNewUser?"tlsite_youku":"tlsite_recommend":"";this.model.loginConfirm(i,e),this._loginLock=!0}},ko.prototype.recomLoginSubmit=function(e){var t=this.config,i="mobile"===this.view.loginMode?"mobile_sms_code":"passport_pwd",e={formtoken:t.formtoken,buid:t.buid,pid:t.pid,loginType:i,userKey:e};this.model.loginConfirm(e),this.recomLoginView.clearErrorTip(),this.recomLoginView.disableSubmitButton()},ko.prototype.loginError=function(e){var t=this.recomLoginView||this.view;this._loginLock=!1,t.showErrorTip(e.message),t.disableSubmitButton(!1)},ko.prototype.loginFail=function(e){var t,i=this.ali,o=this.recomLoginView||this.view,n=this.config.errorTips;switch(this._loginLock=!1,o.disableSubmitButton(!1),o.needCaptcha&&o.changeCaptcha(),i&&i.needSliderCaptcha&&i.resetNCInstance(o.loginMode),e.riskErrorCode||e.errorCode){case"RISK_USER_WARN_FOR_BIND_MOBILE":case"RISK_USER_WARN_RESET_PWD":this.loginOnRisk(e,!0),F(this.model,e,{skip:!0});break;case"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD":this.loginOnRisk(e);break;case"RISK_USER_INTERCEPTOR_FOR_RESET_PWD":window.location.href=e.jumpUrl;break;case"QR_CODE_ERROR":case"QR_CODE_NOT_EXIST":break;case"FORM_TIMEOUT":o.showErrorTip(n.errorCode.loginTimeout);break;case"NEED_CAPTCHA":case"CAPTCHA_KEY_NULL":case"CAPTCHA_CODE_NULL":"normal"===o.loginMode&&(o.createCaptcha(),o.showErrorTip(e.errorMsg));break;case"CAPTCHA_TIMEOUT":o.changeCaptcha(),o.showErrorTip(e.errorMsg);break;case"NEED_SLIDER_CAPTCHA":o.showErrorTip(e.errorMsg),i&&!i.needSliderCaptcha&&i.resetNCInstance(o.loginMode);break;case"CAPTCHA_ERROR":o.needCaptcha||o.createCaptcha(),o.showErrorTip(n.errorCode.CAPTCHA_ERROR);break;case"NEED_RECOMMEND_LOGIN":this.needRecommendLogin(e.msg.recommendData);break;case"BIND_MOBILE_REQUIRED":this.parentViewController&&(t={userInfoToken:e.userInfoToken,bindMobileRequired:!0,callback:this.config.callbackURL,formtoken:e.formtoken,pid:this.config.pid,buid:this.config.buid},this.parentViewController.thirdConnect(t));break;default:o.showErrorTip(e.errorMsg||n.errorCode.defaults)}},ko.prototype.loginSuccess=function(e){this._sendStat("voice","success"),this._loginLock=!1,this.view.clearErrorTip();var t,i=!1;e.msg&&e.msg.riskErrorCode&&(this.loginOnRisk(e,!0),i=!0),e.msg.bindMobileAdvice&&(this.parentViewController&&(t={userInfoToken:e.msg.userInfoToken,bindMobileRequired:!1,callback:this.config.callbackURL,formtoken:e.msg.formtoken,pid:this.config.pid,buid:this.config.buid},this.parentViewController.thirdConnect(t)),i=!0),e.msg.ykOpensid&&L({callbackURL:(t=this.config.callbackURL)+(-1<t.indexOf("?")?"&":"?")+"ykOpensid="+e.msg.ykOpensid}),this._userAccount&&Li.setAccount(this._userAccount),F(this.model,e,{skip:i})},ko.prototype.loginOnRisk=function(e,t){var i=this,o=this.view,n=this.model,s=this.config,e=e.userInfoToken||e.msg.userInfoToken;n.getVerifyIdentityModel({buid:s.buid,pic:s.pid,userInfoToken:e}),n.once("getVerifyIdentityModel:error",function(){o.showErrorTip(s.errorTips.errorCode.defaults),o.disableSubmitButton(!1)}),n.once("getVerifyIdentityModel:fail",function(e){"AUTH_CODE_NOT_EXIST"!==e.errorCode&&"LOGIN_AUTH_CODE_NULL"!==e.errorCode?(o.showErrorTip(e.errorMsg),o.disableSubmitButton(!1)):o.showErrorTip(s.errorTips.account.auth_expired)}),n.once("getVerifyIdentityModel:success",function(e){e.skip=!!t,-1<e.riskErrorCode.indexOf("RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE")&&(e.hasMobile=!0),i.parentViewController&&i.parentViewController.buildRiskDom(e)})},ko.prototype.getQRCode=function(){this.config.isHasLogin||(this.qrView||(this.qrView=new Ai({model:this.model}),this.qrView.delegate=this),this.qrView.getQRCode())},ko.prototype.authLoginRedirect=function(e){var t;this.needAgreement()||(e=(t=e&&e.currentTarget)&&t.getAttribute("data-url"))&&(t=R(),e=e+"&protocol="+window.location.protocol,document.domain=t,e=window.open(e,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no"),(window.ActiveXObject||"ActiveXObject"in window)&&(Bi.add(e,"thirdPartLoginWindow"),Bi.onClose("thirdPartLoginWindow",function(){window.YKLoginConnect(se("YK_thirdLogin_data")||"{}"),document.cookie="YK_thirdLogin_data=;domain=youku.com;expires="+new Date(1970,0,1).toGMTString()})))},ko.prototype.authLogin=function(){var t=this,i=this.view,o=this.model,n=this.config.errorTips,e=i.$("#YT-state").val();this.needAgreement()||this._authLoginLock||(this._authLoginLock=!0,e={state:e},window.mtee&&(e.UA=window.mtee.getUA()||"",e.jsToken=window.mtee.getUmidToken()||""),o.off("thirdPartyLogin:fail thirdPartyLogin:success"),o.once("thirdPartyLogin:fail",function(e){t._authLoginLock=!1,i.showErrorTip(e.errorMsg||n.errorCode.defaults)}),o.once("thirdPartyLogin:success",function(e){t._authLoginLock=!1,e.msg&&e.msg.needBindMobile?t.parentViewController&&t.parentViewController.thirdConnect(e.msg):F(o,e)}),o.thirdPartyLogin(e))},ko.prototype.needAgreement=function(){return!1===this.view.isAgreeBind&&(this.view.showErrorTip("è¯·å…ˆåŒæ„äº’ç»‘åè®®æ¡æ¬¾"),!0)},ko.prototype.needRecommendLogin=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.qrView&&this.config.isIku&&this.qrView.disconnect(),this.view&&this.view.$el.hide(),this.recomLoginView=new Ki({data:e}),(this.recomLoginView.delegate=this).parentViewController.view.append(this.recomLoginView)},ko.prototype.bindExchange=function(){var t=this,i=this.recomLoginView||this.view;this.model.once("recomBindExchange:success",function(e){t.loginSuccess(e)}),this.model.once("recomBindExchange:fail",function(e){i.showErrorTip(e.errorMsg)}),this.model.recomBindExchange()},ko.prototype.createAccount=function(){var t=this,e=this.config,i=this.recomLoginView||this.view;this.model.once("thirdpartyBind:success",function(e){t.loginSuccess(e)}),this.model.once("thirdpartyBind:fail",function(e){i.showErrorTip(e.errorMsg)}),this.model.thirdpartyBind({isLoginDirect:!0,formtoken:e.formtoken,tlsite:e.tlsite,tuid:e.recommendData.tuserInfoKey})},ko.prototype.createMergeView=function(e){var t=this.model;(this.recomLoginView||this.view).$el.hide(),this.mergeView=new zi({model:t,vipCount:e}),(this.mergeView.delegate=this).parentViewController.view.append(this.mergeView)},ko.prototype.confirmSelectedAccount=function(e){this.recomLoginSubmit(e)},ko.prototype.confirmBindExchange=function(){this.bindExchange()},ko.prototype.clickToCreateAccount=function(){this.createAccount()},ko.prototype.clickToMergeAccounts=function(e){this.createMergeView(e)},ko.prototype.mergeLoginSuccess=function(e){this.loginSuccess(e)},ko.prototype.mergeLoginExpire=function(){this.mergeView&&(this.mergeView.remove(),this.mergeView=null),this.viewWillUpdate()},ko.prototype.backToLogin=function(){var e=this.recomLoginView||this.view;this.mergeView&&e&&(this.mergeView.$el.hide(),e.$el.show())},ko.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},ko.prototype.sliderCaptchaDidRemoved=function(){this.view.setContainerID(null),this.sliderPassedCallback=null},ko.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback||(this.sliderPassedCallback=function(){return e.loginSubmit()}),setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},ko.prototype.qrLoginFail=function(e){this.loginFail(e)},ko.prototype.qrLoginSuccess=function(e){this.loginSuccess(e)},ko.prototype.viewChangeMode=function(e,t){"qrcode"===e?this.getQRCode():this.qrView&&!this.config.isIku&&this.qrView.disconnect(),this.removeCaptchaComponent(t),this.isGetMobileCode=!1,this._loginLock=!1,this.view.disableSubmitButton(!1)},ko.prototype.viewAppear=function(e){"qrcode"!==e&&!this.config.isIku||this.getQRCode(),this.removeCaptchaComponent(e)},ko.prototype.viewDisappear=function(){this.qrView&&this.qrView.disconnect()},ko.prototype.viewWillUpdate=function(){this.updateView(),this.parentViewController.view.append(this.view),this.bindActions()},ko),Gi=(fe(Yo,gi=de),Yo.prototype.events=function(){return{"click #YT-showEmailReg":"showEmailReg","click #YT-showMobileReg":"showMobileReg","click #YT-agreeRegRules":"checkAgreement","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","keyup #YT-passport":"checkSpaceInput","keyup #YT-mPassport":"checkSpaceInput","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","blur #YT-mPassport":"checkMobileNumber","blur #YT-regPhone":"checkMobileNumber","blur #YT-regPassword":"checkPassword","blur #YT-mRegPassword":"checkPassword","blur #YT-repeatPwd":"checkRepeatPassword","blur #YT-mRepeatPwd":"checkRepeatPassword"}},Yo.prototype.init=function(){gi.prototype.init.call(this),this.id="YT-regFrame-main",this.className="YT-loginFrame-main fix-autofill",-1===window.location.hash.indexOf("reg_email")&&(this.config.regModel=["mobile"]),this.regMode=this.config.regModel[0],this.role="register",this.mobileCodeType=2,this.isAgreeRules=!1},Yo.prototype.created=function(){this.$el.html(function(e){var t="";e.isIku&&(t+='<div class="YT-reg-icon"></div>'),t+='<div class="YT-loginFrame-head"><div class="YT-loginFrame-title" id="YT-loginFrameTitle">',"mobile"==e.regModel[0]?t+="æ‰‹æœºæ³¨å†Œ":t+="é‚®ç®±æ³¨å†Œ",t+="</div>",-1!=e.regModel.indexOf("mobile")&&(t+='<div class="YT-change-logintype',"mobile"==e.regModel[0]&&(t+=" active"),t+='" id="YT-showMobileReg">æ‰‹æœºæ³¨å†Œ<i class="YT-iconfont">&#xe9a9;</i></div>'),-1!=e.regModel.indexOf("email")&&(t+='<div class="YT-change-logintype',"email"==e.regModel[0]&&(t+=" active"),t+='" id="YT-showEmailReg">é‚®ç®±æ³¨å†Œ<i class="YT-iconfont">&#xe9a9;</i></div>'),e.regNotice&&e.regNotice[0]&&(t+='<div class="YT-notice-box',"ad"==e.regNotice[0].noticeType&&(t+=" YT-notice-ad"),t+='"><i class="YT-notice-icon',"sys"!=e.regNotice[0].noticeType&&(t+=" YT-notice-gift"),t+='"',e.regNotice[0].iconUrl&&(t+=' style="background-image:url('+e.regNotice[0].iconUrl+')"'),t+="></i>",e.regNotice[0].link?t+='<a target="_blank" href="'+e.regNotice[0].link+'">'+e.regNotice[0].word+'<i class="YT-link-icon"></i></a>':t+="<span>"+e.regNotice[0].word+"</span>",t+="</div>"),t+='<div class="YT-errtips-box" style="display:none"></div></div><div class="YT-loginFrame-body">';var i=e.regModel;if(i)for(var o,n=-1,s=i.length-1;n<s;)"email"==(o=i[n+=1])?(t+='<form class="YT-form reg-form" name="YT-emailReg" id="YT-emailReg" method="post" autocomplete="off" onsubmit="return false"',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group"><label class="YT-form-label" for="YT-passport"><span class="YT-form-tips r-eAccount-tips">'+e.placeholders.reg.email+'</span><span class="YT-m-icon icon-user">&#xe9a8;</span></label><input type="text" id="YT-passport" name="YT-passport" maxlength="50" tabindex="1" class="YT-form-input account-input" autocomplete="off"></div><div class="YT-form-group"><label class="YT-form-label" for="YT-regPassword"><span class="YT-form-tips r-ePassword-tips">'+e.placeholders.reg.password+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><div class="YT-pwd-strong strong01" id="YT-pwdStrong"></div><input type="password" id="YT-regPassword" name="YT-regPassword" maxlength="16" tabindex="2" class="YT-form-input YT-pr30" autocomplete="off"></div><div class="YT-form-group"><label class="YT-form-label" for="YT-repeatPwd"><span class="YT-form-tips r-eRepeatPwd-tips">'+e.placeholders.reg.repeatPassword+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><input type="password" id="YT-repeatPwd" name="YT-repeatPwd" maxlength="16" tabindex="3" class="YT-form-input" onpaste="return false"></div><div class="YT-form-group YT-mobile-group no-icon"><label class="YT-form-label" for="YT-regPhone"><span class="YT-form-tips r-eMobile-tips">'+e.placeholders.reg.mobile+'</span><span class="YT-m-icon icon-phone"></span></label><input type="text" id="YT-regPhone" name="YT-regPhone" tabindex="4" maxlength="11" class="YT-form-input"><div class="YT-country-chouse-box"><div id="YT-countryCode-email" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+(e.loginCountry.countryCode||"")+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div class="YT-form-group no-icon"><label class="YT-form-label" for="YT-eValidateCode"><span class="YT-form-tips short-tips r-eValidate-tips">'+e.placeholders.reg.validate+'</span><span class="YT-m-icon icon-password"></span></label><button type="submit" id="YT-eGetMobileCode" class="YT-form-btn inline getCode disabled" disabled>èŽ·å–éªŒè¯ç </button><input type="text" id="YT-eValidateCode" name="YT-eValidateCode" maxlength="6" tabindex="5" class="YT-form-input short-input"></div><div id="YT-eRegCaptchaWrap"></div><div class="YT-form-group btn-group"><button type="submit" id="YT-eRegSubmit" data-custom-mid="regSubmit" data-process="æ­£åœ¨æ³¨å†Œ..." title="'+(e.registerSubmitWord||"æ³¨ å†Œ")+'" class="YT-form-btn"',e.registerSubmitStyle&&(t+=' style="'+e.registerSubmitStyle+'"'),t+=">"+(e.registerSubmitWord||"æ³¨ å†Œ")+"</button></div></form>"):"mobile"==o&&(t+='<form class="YT-form reg-form" name="YT-mobileReg" id="YT-mobileReg" method="post" autocomplete="off" onsubmit="return false"',0!=n&&(t+=' style="display:none"'),t+='><div class="YT-form-group YT-first-group YT-mobile-group no-icon"><label class="YT-form-label" for="YT-mPassport"><span class="YT-form-tips r-mAccount-tips">'+e.placeholders.reg.account+'</span><span class="YT-m-icon icon-phone"></span></label><input type="text" id="YT-mPassport" name="YT-mPassport" tabindex="1" maxlength="11" class="YT-form-input" autocomplate="off" data-gm-stat="H48654216;Register1;Phone_number=yes" /><div class="YT-country-chouse-box" data-gm-stat="H48654216;Register1;area=yes"><div id="YT-countryCode" class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+(e.loginCountry.countryCode||"")+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div class="YT-form-group"><label class="YT-form-label" for="YT-mRegPassword"><span class="YT-form-tips r-mPassword-tips">'+e.placeholders.reg.password+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><div class="YT-pwd-strong strong01" id="YT-pwdStrong2"></div><input type="password" id="YT-mRegPassword" name="YT-mRegPassword" maxlength="16" tabindex="2" class="YT-form-input YT-pr30" autocomplate="off" data-gm-stat="H48654216;Register1;Password=yes" /></div><div class="YT-form-group"><label class="YT-form-label" for="YT-mRepeatPwd"><span class="YT-form-tips r-mRepeatPwd-tips">'+e.placeholders.reg.repeatPassword+'</span><span class="YT-m-icon icon-password">&#xe9b9;</span></label><input type="password" id="YT-mRepeatPwd" name="YT-mRepeatPwd" maxlength="16" tabindex="3" class="YT-form-input" onpaste="return false;" data-gm-stat="H48654216;Register1;Confirm_password=yes"></div><div id="YT-sRegCaptchaWrap"></div><div class="YT-form-group no-icon"><label class="YT-form-label" for="YT-mValidateCode"><span class="YT-form-tips short-tips r-mValidate-tips">'+e.placeholders.reg.validate+'</span></label><button id="YT-mGetMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled data-gm-stat="H48654216;Register1;button=yes">èŽ·å–éªŒè¯ç </button><input type="text" id="YT-mValidateCode" name="YT-mValidateCode" maxlength="6" tabindex="4" class="YT-form-input short-input" data-gm-stat="H48654216;Register1;Verification_Code=yes"></div><div id="YT-mRegCaptchaWrap"></div><div class="YT-voiceAndSmsCont"></div><div class="YT-form-group btn-group"><button type="submit" id="YT-mRegSubmit" data-custom-mid="regSubmit" data-process="æ­£åœ¨æ³¨å†Œ..." title="'+(e.registerSubmitWord||"æ³¨ å†Œ")+'" class="YT-form-btn"',e.registerSubmitStyle&&(t+=' style="'+e.registerSubmitStyle+'"'),t+=' data-gm-stat="H48654216;Register1;Register_button=yes">'+(e.registerSubmitWord||"æ³¨ å†Œ")+"</button></div></form>");if(t+='<div class="YT-form-group YT-remember"><span class="YT-fr"><a href="javascript:;" id="YT-gotoLogin" data-gm-stat="H48654216;Register1;Switch_login=yes">ç™»å½•</a></span><span><label for="YT-agreeRegRules" id="YT-rulesLabel" class="YT-check-label checked" data-gm-stat="H48654216;Register1;agree=yes"><input type="checkbox" id="YT-agreeRegRules" name="YT-agreeRegRules"></label>&nbsp;å·²é˜…è¯»å¹¶åŒæ„<span id="YT-rulesBody"><a href="'+e.regRules[1]+'" target="_blank">ã€Š'+e.regRules[0]+"ã€‹</a>",2<e.regRules.length&&(t+='<a href="'+e.regRules[3]+'" target="_blank">ã€Š'+e.regRules[2]+"ã€‹</a>"),t+="</span></span></div></div>",!0===e.regThirdPartLogin&&e.thirdPartUrlAry){t+='<div class="YT-loginFrame-foot hasthirdlist"><div class="YT-third-type"><span class="YT-text">å…¶ä»–æ–¹å¼ï¼š</span><div class="YT-third-part-wrap" id="YT-regThirdPartWrap">';var r={qq:"H48594750;loginQQ;loginQQ=yes",weibo:"H1509201135;loginweibo;loginweibo=yes",wechat:"H1510124655;loginweixin;loginweixin=yes",alipay:"H1507354093;zhifubao;zhifubao=yes",taobao:"H1510124656;logintaobao;logintaobao=yes"};t+='<div class="YT-third-part-list">';var a=e.thirdPartUrlAry;if(a)for(var c,l=-1,d=a.length-1;l<d;)c=a[l+=1],t+='<span class="YT-third-part-item',4<l&&5<e.thirdPartUrlAry.length&&(t+=" hide"),t+='" data-link="'+c.link+'" data-site="'+c.site+'"><a href="javascript:;" title="ç”¨'+c.name+'è´¦å·ç™»å½•" class="YT-l-icon icon-'+c.site+'" data-gm-stat="'+(r[c.site]||"")+'"></a></span>';5<e.thirdPartUrlAry.length&&(t+='<span class="YT-third-btn show-all-third-btn"><a href="javascript:;" title="æ›´å¤š" class="YT-l-icon icon-more"></a></span><span class="YT-third-btn hide-third-btn" style="display:none"><a href="javascript:;" title="éšè—" class="YT-l-icon icon-more icon-hide"></a></span>'),t+="</div></div></div></div>"}return t}(this.config))},Yo.prototype.mounted=function(){gi.prototype.mounted.call(this),this.$emailView=this.find("#YT-emailReg"),this.$mobileView=this.find("#YT-mobileReg"),this.$showEmail=this.find("#YT-showEmailReg"),this.$showMobile=this.find("#YT-showMobileReg"),this.$loginTitle=this.find("#YT-loginFrameTitle"),this.$eSendCode=this.find("#YT-eGetMobileCode"),this.$mSendCode=this.find("#YT-mGetMobileCode"),this.$regPhone=this.find("#YT-regPhone"),this.$mPassport=this.find("#YT-mPassport"),this.$eValidCode=this.find("#YT-eValidateCode"),this.$mValidCode=this.find("#YT-mValidateCode"),this.checkMobile=this.checkMobile.bind(this),this.$mPassport.on("input change",this.checkMobile),this.$regPhone.on("input change",this.checkMobile),this.checkPwdStrength=this.checkPwdStrength.bind(this),this.find("#YT-mRegPassword").on("input change",this.checkPwdStrength),this.find("#YT-regPassword").on("input change",this.checkPwdStrength),this.config.regThirdPartLogin&&(this.thirdPartView=new Oi({el:"#YT-regThirdPartWrap"}))},Yo.prototype.showEmailReg=function(){this.$showMobile.removeClass("active"),this.$showEmail.addClass("active"),this.$loginTitle.html("é‚®ç®±æ³¨å†Œ"),this.$emailView.show(),this.$mobileView.hide(),this.changeMode("email")},Yo.prototype.showMobileReg=function(){this.$showEmail.removeClass("active"),this.$showMobile.addClass("active"),this.$loginTitle.html("æ‰‹æœºæ³¨å†Œ"),this.$emailView.hide(),this.$mobileView.show(),this.changeMode("mobile")},Yo.prototype.checkSpaceInput=function(e){var t=this.$(e.currentTarget),i=t.val(),e=i.trim();i!==e&&t.val(e)},Yo.prototype.checkPwdStrength=function(e){var t,i=this.$(e.currentTarget.parentNode),e=(t=e.target.value,e=0,t.match(/[a-z]/g)&&e++,t.match(/[0-9]/g)&&e++,t.match(/[A-Z]/g)&&e++,t.match(/(.[^a-z0-9])/g)&&e++,t.length<6||16<t.length?e=0:_(t)&&(e=1),Math.min(e,3));i.find(".YT-pwd-strong").get(0).className="YT-pwd-strong strong"+e},Yo.prototype.checkPassword=function(e){this.isPasswordSick=!1,this.callDelegateFunc("viewCheckPassword",e.currentTarget)},Yo.prototype.checkRepeatPassword=function(e){var t=this.$(e.currentTarget).val(),e="mobile"===this.regMode?this.find("#YT-mRegPassword"):this.find("#YT-regPassword");t&&e.val()!==t&&this.showErrorTip(this.config.errorTips.repeatPassword.matches)},Yo.prototype.checkAgreement=function(e){e=e&&e.currentTarget;this.isAgreeRules=e&&e.checked},Yo.prototype.showLoginTip=function(e){-1<this.config.loginModel.indexOf("mobile")?e+='ï¼Œå¯ä½¿ç”¨<a href="#" id="loginWithExistAccount">æ‰‹æœºå¿«æ·ç™»å½•</a>':e+='ï¼Œå¯ç›´æŽ¥<a href="#" id="loginWithExistAccount">ç™»å½•</a>',this.showErrorTip(e)},Yo.prototype.getContainerID=function(){var e=this._captchaContainerID;return e?(this._captchaContainerID=null,e):"mobile"===this.regMode?"YT-mRegCaptchaWrap":"YT-eRegCaptchaWrap"},Yo.prototype.getMobilePhoneNumber=function(){return("mobile"===this.regMode?this.$mPassport:this.$regPhone).val()},Yo.prototype.getSendCodeBtn=function(){return"mobile"===this.regMode?this.$mSendCode:this.$eSendCode},Yo.prototype.getPassCodeInput=function(){return"mobile"===this.regMode?this.$mValidCode:this.$eValidCode},Yo.prototype.getSubmitButton=function(){return this.find("mobile"===this.regMode?"#YT-mRegSubmit":"#YT-eRegSubmit")},Yo.prototype.changeMode=function(e){e&&(this._regMode=this.regMode,this.regMode=e),this.resetSendCodeBtn(),this.clearErrorTip(),this.callDelegateFunc("viewChangeMode",e)},Yo.prototype.hide=function(){gi.prototype.hide.call(this),this.find(".YT-pwd-strong").forEach(function(e){e.className="YT-pwd-strong"})},Yo),Xi=(fe(Co,ui=de),Co.prototype.events=function(){return{"click #YT-sucCallbackReg":"sucCallback","click #YT-modifyNickname":"openModifyPage"}},Co.prototype.init=function(){ui.prototype.init.call(this),this.config.regType&&(this.$(".step-undo").removeClass("step-undo").addClass("step-done"),this.$("#registeForm").hide(),this.$(".stepLine").attr("src","/static-resources/images/stepline_full.png")),this.id="YT-regFrame-main",this.className="YT-loginFrame-main fix-autofill",this.role="regSuc"},Co.prototype.created=function(){var e,t;this.$el.html((e=this.config,t='<div class="YT-loginFrame-head YT-regSuc-head"><div class="YT-title-icon"><div class="icon"></div><div class="title">æ³¨å†ŒæˆåŠŸ</div></div></div><div class="YT-loginFrame-body">',"RegPage"==e.regType?t+='<div class="YT-popFrame-subtitle">æ‚¨å¯ä»¥ä½¿ç”¨æ‰‹æœº'+e.hideMobileNum+'ç™»å½•æœ¬è´¦å·å“¦ã€‚</div><div class="YT-regSuc-nickname">ç³»ç»Ÿå›é€æ‚¨ä¸ªæ˜µç§°â€œ'+e.nickname+'â€ï¼Œ<br/>è‹¥ä¸æ»¡æ„ï¼Œæ‚¨å¯<a id="YT-modifyNickname" href="javascript:;">ä¿®æ”¹æ˜µç§°</a>ã€‚</div>':t+='<div class="YT-popFrame-subtitle">ç³»ç»Ÿå›é€æ‚¨ä¸ªæ˜µç§°ï¼Œè‹¥ä¸æ»¡æ„ï¼Œå¯ä¿®æ”¹</div><div class="YT-regSuc-nickname">æ˜µç§°ï¼š'+e.nickname+'</div><div class="YT-form-group btn-group"><button type="submit" id="YT-modifyNickname" title="å‰å¾€ä¿®æ”¹æ˜µç§°" class="YT-form-btn" data-gm-stat="H49607528;modifynickname;click=yes">å‰å¾€ä¿®æ”¹æ˜µç§°</button></div>',t+='<div class="YT-bt-action">',"RegPage"==e.regType?t+='<span class="callback-time"><i id="YT-callBack-time">'+(Math.max(0,e.countDownTime)||"5")+"</i>s</span>":t+='<span id="YT-callBack-time">'+(Math.max(0,e.countDownTime)||"5")+"</span>ç§’",t+'åŽï¼Œ<a href="javascript:;" id="YT-sucCallbackReg" data-gm-stat="H49607528;callback;click=yes">è¿”å›ž</a></div></div>'))},Co.prototype.mounted=function(){ui.prototype.mounted.call(this),this.$countNum=this.find("#YT-callBack-time"),this.countDown()},Co.prototype.openModifyPage=function(){window.location.href="https://id.youku.com/modifyNicknameView.htm"},Co.prototype.countDown=function(){var e=this,t=Math.max(0,this.config.countDownTime)||5;this._countTimer=setInterval(function(){0===--t?(e._countTimer=e.clearTimer(e._countTimer),e.sucCallback()):e.$countNum.html(t+"")},1e3)},Co.prototype.sucCallback=function(){var e=this.config.callbackURL||this.config.callback;e?window.location.href=e:this.config.loginSuccess()},Co),Ji=(fe(wo,pi=ge),wo.prototype.Actions=function(){return{"click #loginWithExistAccount":"loginWithExistAccount","click #YT-eGetMobileCode":"checkSendMobileCode","click #YT-mGetMobileCode":"checkSendMobileCode","click #YT-eRegSubmit":"checkSubmit","click #YT-mRegSubmit":"checkSubmit"}},wo.prototype.init=function(){this.updateConfig(),this.view=new Gi,(this.view.delegate=this).model.on("registerConfirm:success",this.regSuccess,this),this.model.on("registerConfirm:fail",this.regFail,this),this.model.on("registerConfirm:error",this.regError,this),this.ali=new Ii({type:"register"}),this.ali.delegate=this},wo.prototype.destory=function(){this.model&&(this.model.off(),this.model=null),this.ali&&(this.ali.delegate=null,this.ali=null),pi.prototype.destory.call(this)},wo.prototype.updateConfig=function(){this.config=E()},wo.prototype.checkSendMobileCode=function(t){var i=this,o=this.view,e="mobile"===o.regMode?"YT-mobileReg":"YT-emailReg",n=re(o.regMode,this.config);new Ue(e,n,function(e){0<e.length?o.showErrorTip(e[0].message):(o.clearErrorTip(),i.sendMobileCode(t))})._validateForm()},wo.prototype.sendMobileCode=function(e){var t=this.view,e=t.$(e.currentTarget).attr("data-type")||"register";this.sendMobileCodeAction({bizType:e,accountType:t.regMode})},wo.prototype.sendMobileCodeFail=function(){this.view.checkMobile()},wo.prototype.sendMobileCodeNeedCaptcha=function(){this.view.setContainerID("YT-sRegCaptchaWrap")},wo.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sendMobileCodeNeedCaptcha(),this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},wo.prototype.checkSubmit=function(){var e,t,i,o=this,n=this.ali,s=this.view,r=this.config.errorTips,a="mobile"===s.regMode?"YT-mobileReg":"YT-emailReg",i=(e=s.regMode,t=this.config,i=re(e,t),"email"===e?i.push({name:"YT-eValidateCode",rules:"required",errorMsg:t.errorTips.validate}):"mobile"===e&&i.push({name:"YT-mValidateCode",rules:"required",errorMsg:t.errorTips.validate}),i);s.isAgreeRules?new Ue(a,i,function(e){if(0<e.length)s.showErrorTip(e[0].message);else if(s.clearErrorTip(),s.isPasswordSick)s.showErrorTip(r.password.is_pwd_sick);else{if(s.needCaptcha){if(""===s.getCaptchaCode())return void s.showErrorTip(r.captcha.required);if(!s.getCaptchaState())return void s.showErrorTip(r.captcha.error)}if(o.isGetMobileCode)return n&&n.needSliderCaptcha&&!n.passSliderCaptcha?(n.getNCInstance(s.regMode),void s.showErrorTip(r.sliderCaptcha.required)):void o.regSubmit();s.showErrorTip(r.smsCode.noGet)}})._validateForm():s.showErrorTip("è¯·å…ˆé˜…è¯»å¹¶åŒæ„æ³¨å†Œç›¸å…³åè®®")},wo.prototype.regSubmit=function(){var e,t,i;this._regLock||(e=this.view,i={template:"tempA",formtoken:(t=this.config).formtoken,buid:t.buid,pid:t.pid,mode:t.mode,actionFrom:t.from||"",sendCodeType:e.isVoiceVerify?"voiceCode":"mobileCode",region:e.getCountryRegion()},t.configId&&(i.configId=t.configId),"email"===e.regMode&&(i.email=e.find("#YT-passport").val(),i.password=e.find("#YT-regPassword").val(),i.repeatPassword=e.find("#YT-repeatPwd").val(),i.bindMobile=e.getMobilePhoneNumber(),i.smsCode=e.getPassCodeInput().val()),"mobile"===e.regMode&&(i.mobile=e.find("#YT-mPassport").val(),i.password=e.find("#YT-mRegPassword").val(),i.repeatPassword=e.find("#YT-mRepeatPwd").val(),i.smsCode=e.getPassCodeInput().val()),e.needCaptcha&&(i.captcha=e.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(i.sliderCaptchaSessionId=this.ali.NCData.csessionid,i.sliderCaptchaToken=this.ali.NCData.token,i.sliderCaptchaSig=this.ali.NCData.sig),window.mtee&&(i.UA=window.mtee.getUA(),i.jsToken=window.mtee.getUmidToken()||""),this._sendStat("voice","submit"),e.isVoiceVerify&&this._sendStat("voice","isGetVoive"),this.model.registerConfirm(i),this._regLock=!0,e.disableSubmitButton())},wo.prototype.regError=function(e){this._regLock=!1,this.view.showErrorTip(e.message),this.view.disableSubmitButton(!1)},wo.prototype.regFail=function(e){var t=this.ali,i=this.view,o=this.config.errorTips;switch(this._regLock=!1,i.disableSubmitButton(!1),i.needCaptcha&&i.changeCaptcha(),t&&t.needSliderCaptcha&&t.resetNCInstance(i.regMode),e.errorCode){case"FORM_TIMEOUT":i.showErrorTip(o.errorCode.regTimeout);break;case"NEED_CAPTCHA":case"CAPTCHA_KEY_NULL":case"CAPTCHA_CODE_NULL":case"CAPTCHA_TIMEOUT":i.createCaptcha(),i.showErrorTip(e.errorMsg);break;case"NEED_SLIDER_CAPTCHA":e.errorMsg&&i.showErrorTip(e.errorMsg),t&&!t.needSliderCaptcha&&t.resetNCInstance(i.regMode);break;case"CAPTCHA_ERROR":i.needCaptcha||i.createCaptcha(),i.showErrorTip(o.errorCode.CAPTCHA_ERROR);break;case"MOBILE_CODE_ERROR":i.showErrorTip(o.errorCode.MOBILE_CODE_ERROR),i.getPassCodeInput().val("");break;case"MOBILE_ALREADY_EXIST":i.showLoginTip(o.errorCode.MOBILE_ALREADY_EXIST),i.getPassCodeInput().val("");break;default:i.showErrorTip(e.errorMsg||o.errorCode.defaults)}},wo.prototype.regSuccess=function(e){this._sendStat("voice","success"),this._regLock=!1,this.config.showSuccessPage&&(L({nickname:e.msg.nickname}),this.parentViewController.hideView(),this.parentViewController.view.append(new Xi)),F(this.model,e,{skip:this.config.showSuccessPage||!1})},wo.prototype.checkPasswordValid=function(e){var t=this.view,i=this.model,o=this.config;i.off("checkPasswordValid:fail checkPasswordValid:success"),i.once("checkPasswordValid:fail",function(e){"FORM_TIMEOUT"!==e.errorCode?(t.showErrorTip(e.errorMsg),t.isPasswordSick=!0):t.isPasswordSick=!1}),i.once("checkPasswordValid:success",function(){t.clearErrorTip(),t.isPasswordSick=!1}),i.checkPasswordValid({bizType:"register",formtoken:o.formtoken,buid:o.buid,pid:o.pid,password:e.value,jsToken:window.mtee&&window.mtee.getUmidToken()||""})},wo.prototype.loginWithExistAccount=function(e){var t,i;e&&e.preventDefault(),this.parentViewController&&(t=this.view.getCountryCode(),i=this.view.$countryRegion,e=this.view.getMobilePhoneNumber(),-1===this.config.loginModel.indexOf("mobile")&&(e=86===t?e:"00"+t+e),Li.setRegExistAccountInfo({mobile:e,loginCountry:{countryCode:i.attr("data-code"),countryName:i.attr("data-name"),region:i.attr("data-region")}}),this.parentViewController.buildLoginDom())},wo.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},wo.prototype.sliderCaptchaDidRemoved=function(){this.view.setContainerID(null),this.sliderPassedCallback=null},wo.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback||(this.sliderPassedCallback=function(){return e.regSubmit()}),setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},wo.prototype.viewCheckPassword=function(t){var i=this,o=this.view,e="mobile"===o.regMode?"YT-mobileReg":"YT-emailReg",n=[re(o.regMode,this.config)[1]];new Ue(e,n,function(e){0<e.length?o.showErrorTip(e[0].message):(o.clearErrorTip(),i.checkPasswordValid(t))})._validateForm()},wo.prototype.viewChangeMode=function(e,t){this.removeCaptchaComponent(t),this.isGetMobileCode=!1,this._regLock=!1,this.view.disableSubmitButton(!1)},wo),Zi=(fe(vo,hi=de),vo.prototype.events=function(){return{"click #telLine":"openServicePage","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","blur #YT-rAccount":"checkMobileNumber"}},vo.prototype.init=function(){hi.prototype.init.call(this),this.id="YT-riskFrame-main",this.className="YT-riskFrame-main",this.riskData=this.config.riskData,this.role="risk"},vo.prototype.created=function(){var e,t=Object.assign(this.riskData,{loginCountry:this.config.loginCountry});this.$el.html((e="","RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"!=(t=t).riskErrorCode&&"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE"!=t.riskErrorCode&&"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE"!=t.riskErrorCode&&"RISK_USER_WARN_FOR_BIND_MOBILE"!=t.riskErrorCode||(e+='<div id="YT-risk-mobile"><div class="YT-loginFrame-head YT-risk-head">',t.hasMobile?e+='<div class="YT-bindTips">è¯·éªŒè¯èº«ä»½<p class="sub-title">äº²çˆ±çš„ <strong class="YT-c666">'+(t.passport||"ä¼˜é…·ç”¨æˆ·")+"</strong> ï¼Œå°é…·ä¸ºæ‚¨çš„è´¦å·å®‰å…¨ä¿é©¾æŠ¤èˆªï¼Œæœ¬æ¬¡ç™»å½•éœ€è¦éªŒè¯æ‰‹æœºå“¦</p></div>":"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"!=t.riskErrorCode&&(e+='<div class="YT-bindTips">ä¸ºäº†è´¦å·å®‰å…¨ï¼Œè¯·ç»‘å®šæ‰‹æœº<p class="sub-title">äº²çˆ±çš„ <strong class="YT-c666">'+(t.passport||"ä¼˜é…·ç”¨æˆ·")+"</strong> ï¼Œå°é…·æŽæŒ‡ä¸€ç®—ï¼Œç»‘å®šæ‰‹æœºå¯ä»¥å¤§å¤§æå‡å®‰å…¨æ€§å“¦</p></div>"),e+='<div class="YT-errtips-box" style="display:none;"></div></div><div class="YT-loginFrame-body"><form class="YT-form YT-login-form" id="YT-mobileRisk" name="YT-mobileRisk" method="post" onsubmit="return false;" autocomplete="off">',t.hasMobile?e+='<div class="YT-form-group YT-risk-hasMobile">æ‰‹æœºå·ç ï¼š'+t.mobileNo+'<input type="hidden" id="YT-rAccount" name="YT-rAccount" value="'+t.mobileNo+'" /></div>':e+='<div class="YT-form-group YT-first-group YT-mobile-group no-icon"><input type="text" id="YT-rAccount" name="YT-rAccount" tabindex="1" maxlength="11" class="YT-form-input" autocomplete="off" /><label class="YT-form-label" for="YT-rAccount"><span class="YT-form-tips YT-l-mobile-tips">æ‰‹æœºå·ç </span><span class="YT-m-icon YT-icon-phone"></span></label><div class="YT-country-chouse-box"><div class="YT-countryCode" data-region="'+t.loginCountry.region+'">+'+t.loginCountry.countryCode+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div>',e+='<div id="YT-rCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group no-icon"><button id="YT-rGetMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode',t.hasMobile||(e+=" disabled"),e+='" ',t.hasMobile||(e+="disabled"),e+='>èŽ·å–åŠ¨æ€å¯†ç </button><input type="text" id="YT-rPassword" name="YT-rPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" /><label class="YT-form-label" for="YT-rPassword"><span class="YT-form-tips short-tips">åŠ¨æ€å¯†ç </span><span class="YT-m-icon icon-password"></span></label></div><div class="YT-voiceAndSmsCont"></div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-rLoginSubmit" class="YT-form-btn">',t.hasMobile?e+="éªŒè¯å¹¶ç™»å½•":e+="ç»‘å®šå¹¶ç™»å½•",e+='</button></div><div class="YT-sec-tips"></div>',"RISK_USER_WARN_FOR_BIND_MOBILE"==t.riskErrorCode?e+='<div class="YT-bt-info"><a href="javascript:;" id="YT-direct-login">æš‚ä¸ç»‘å®š</a></div>':"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE"!=t.riskErrorCode&&(e+='<div class="YT-bt-info">',t.hasMobile?e+='æ‰‹æœºå·ç ä¸å¯ç”¨ï¼Ÿ<a href="javascript:;" id="YT-direct-change"><strong>ç›´æŽ¥æ›´æ¢</strong></a>':e+='<a href="javascript:;" id="YT-tips">é‡åˆ°é—®é¢˜ï¼Ÿ<span class="YT-bt-tips"><em>æ”¶ä¸åˆ°çŸ­ä¿¡ï¼Ÿæ‰‹æœºå·ç ä¸å¯ç”¨ï¼Ÿ</em><span>è¯·æ‹¨æ‰“å®¢æœç”µè¯ï¼š400 8103 568æˆ–è”ç³»<strong id="telLine">åœ¨çº¿å®¢æœ</strong><i class="YT-cross-bt"><del></del></i></span></span></a>',e+="</div>"),e+="</form></div></div>"),"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"==t.riskErrorCode&&(e+='<div class="YT-loginFrame-body" id="YT-warn-pwd" style="display:none"><form class="YT-form YT-login-form" action="'+t.jumpUrl+'&direct=true" name="YT-mobileRisk" method="post" autocomplete="off"><div class="YT-riskPassword-icon YT-sucRisk-icon">&nbsp;</div><div class="YT-form-group YT-btn-group"><button type="submit" class="YT-form-btn">é‡ç½®ç™»å½•å¯†ç </button></div></form><div class="YT-sec-tips">ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ç¬¦å·çš„å¯†ç ç»„åˆï¼Œå¯ä»¥ä½¿è´¦å·å¯†ç æ›´å®‰å…¨</div><div class="YT-bt-info risk-bt-info"><a href="javascript:;" id="YT-direct-login">ç›´æŽ¥ç™»å½•</a></div></div>'),"RISK_USER_WARN_RESET_PWD"==t.riskErrorCode&&(e+='<div class="YT-loginFrame-body"><form class="YT-form YT-login-form" action="'+t.jumpUrl+'&direct=true" name="YT-mobileRisk" method="post" autocomplete="off"><div class="YT-riskPassword-icon">&nbsp;</div><div class="YT-loginFrame-head YT-risk-head YT-text-center"><div class="YT-bindTips"><p class="sub-title">å°é…·å‘çŽ°è´¦å· <strong class="YT-c666">'+(t.passport||"ä¼˜é…·ç”¨æˆ·")+'</strong> å·²ç»è¢«åè›‹ç›¯ä¸Šäº†ï¼Œå»ºè®®è¿›è¡Œå®‰å…¨å‡çº§å“¦</p></div></div><div class="YT-form-group YT-btn-group"><button type="submit" class="YT-form-btn">ç«‹å³é‡ç½®</button></div></form><div class="YT-sec-tips YT-text-center">ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ç¬¦å·çš„å¯†ç ç»„åˆï¼Œå¯ä»¥ä½¿è´¦å·å¯†ç æ›´å®‰å…¨</div><div class="YT-bt-info risk-bt-info"><a href="javascript:;" id="YT-direct-login">è·³è¿‡</a></div></div>'),e))},vo.prototype.mounted=function(){hi.prototype.mounted.call(this),this.$rSendCode=this.find("#YT-rGetMobileCode"),this.$rAccount=this.find("#YT-rAccount"),this.$rPassword=this.find("#YT-rPassword"),this.$rAccount.on("input change",this.checkMobile.bind(this))},vo.prototype.getContainerID=function(){return"YT-rCaptchaWrap"},vo.prototype.getMobilePhoneNumber=function(){return this.$rAccount.val()},vo.prototype.getSendCodeBtn=function(){return this.$rSendCode},vo.prototype.getPassCodeInput=function(){return this.$rPassword},vo.prototype.getSubmitButton=function(){return this.find("#YT-rLoginSubmit")},vo.prototype.showResetPasswordWarning=function(){"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD"===this.riskData.riskErrorCode&&(this.find("#YT-risk-mobile").hide(),this.find("#YT-warn-pwd").show())},vo.prototype.openServicePage=function(){this.openPage("http://os3.cs.tudou.com/new/client.php?arg=yktd&style=28")},vo.prototype.openPage=function(e){var t;e?this.config.isIku?((t=document.getElementById("openSchemeLink"))||((t=document.createElement("a")).id="openSchemeLink",t.style.display="none",document.body.appendChild(t),t.setAttribute("target","_blank")),t.href=e,t.click()):this.popwin?(this.popwin.location=e,this.popwin=null):window.open(e):this.popwin=window.open("","_blank")},vo),eo=(fe(yo,di=ge),yo.prototype.Actions=function(){return{"click #YT-rGetMobileCode":"sendMobileCode","click #YT-direct-change":"modifyMobile","click #YT-direct-login":"directLogin","click #YT-rLoginSubmit":"checkSubmit"}},yo.prototype.init=function(){this.updateConfig(),this.view=new Zi,(this.view.delegate=this).model=new Et,this.model.on("loginConfirm:success",this.loginSuccess,this),this.model.on("loginConfirm:error loginConfirm:fail",this.loginFail,this),this.ali=new Ii({type:"login"}),this.ali.delegate=this},yo.prototype.updateConfig=function(){this.config=E(),this.riskData=this.config.riskData},yo.prototype.sendMobileCode=function(){var e=this.riskData,t=e.hasMobile;this.sendMobileCodeAction({hasMobile:t,bizType:t?"verify_user":"add_mobile",formtoken:e.formtoken||"",userInfoToken:e.userInfoToken||""})},yo.prototype.sendMobileCodeFail=function(){this.view.disableSendCodeButton(!1)},yo.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},yo.prototype.checkSubmit=function(){var e,t,i=this,o=this.view,t=(e=this.config,t=[{name:"YT-rPassword",rules:"required",errorMsg:{required:e.errorTips.smsCode.smsPwd}}],e.riskData.hasMobile||t.push({name:"YT-rAccount",rules:"required|valid_mobile",errorMsg:e.errorTips.mobile}),t);new Ue("YT-mobileRisk",t,function(e){0<e.length?o.showErrorTip(e[0].message):(o.clearErrorTip(),i.isGetMobileCode?i.loginSubmit():o.showErrorTip("è¯·å…ˆèŽ·å–åŠ¨æ€å¯†ç "))})._validateForm()},yo.prototype.loginSubmit=function(){if(!this._loginLock){var e=this.view,t=this.config,i=e.getPassCodeInput().val(),o=e.isVoiceVerify?"voiceCode":"mobileCode",n=this.riskData.userInfoToken,s={bizType:"verify_user",buid:t.buid,pid:t.pid,formtoken:this.riskData.formtoken,userInfoToken:n,sendCodeType:o,verifyCode:i};if(this.useAuthcode&&(s.sendCodeType="authCode"),this.riskData.hasMobile||(s.bizType="add_mobile",s.receiver=e.getMobilePhoneNumber(),s.region=e.getCountryRegion()),t.customParam)for(var r in t.customParam)s[r]=t.customParam[r];this.model.loginConfirm(s,this.riskData.hasMobile?"verify_login":"bind_login"),this._loginLock=!0,e.disableSubmitButton()}},yo.prototype.loginFail=function(e){var t=this.view;this._loginLock=!1,t.disableSubmitButton(!1),t.showErrorTip(e.errorMsg||e.message)},yo.prototype.loginSuccess=function(e){var t,i=this;this._loginLock=!1,this.view.clearErrorTip(),e.msg.ykOpensid&&-1===(t=this.config.callbackURL).indexOf("ykOpensid=")&&L({callbackURL:t+(-1<t.indexOf("?")?"&":"?")+"ykOpensid="+e.msg.ykOpensid}),this.model.checkLogin({buid:this.config.buid,pid:this.config.pid},function(e){"success"===e.result&&e.msg.login&&(i.riskData.skip?i.directLogin():(i.view.showResetPasswordWarning(),F(i.model,e)))})},yo.prototype.modifyMobile=function(){var t,e,i,o,n=this;this._modifyLock||(t=this.view,e=this.model,o=this.config,i=this.riskData,o={bizType:"verify_user",IsFromSdk:"false",sdkUserInfoToken:"false",pid:o.pid,mobileNo:i.mobileNo,passport:i.passport,riskErrorCode:i.riskErrorCode,userInfoToken:i.userInfoToken,formtoken:i.formtoken},i.jumpUrl&&(o.jumpUrl=i.jumpUrl),i.hasMobile||(o.bizType="add_mobile"),t.openPage(),e.off("modifyMobile:error modifyMobile:fail modifyMobile:success"),e.once("modifyMobile:error",function(){t.openPage("https://id.youku.com/modifyMobileByTradeView.htm"),n._modifyLock=!1}),e.once("modifyMobile:fail",function(e){"SYS_EXCEPTION"===e.errorCode?t.openPage("https://id.youku.com/modifyMobileByTradeView.htm"):t.showErrorTip(e.errorMsg),n._modifyLock=!1}),e.once("modifyMobile:success",function(e){n.checkVerifyResult(e.msg.token),t.openPage(e.msg.modifyMobileUrl),n._modifyLock=!1}),this._modifyLock=!0,this.model.modifyMobile(o))},yo.prototype.checkVerifyResult=function(e){var t=this,i=this.view;e&&(this._checkTimer&&clearInterval(this._checkTimer),this._checkTimer=setInterval(function(){t.model.verifyResult({pid:t.config.pid,token:e},function(e){"S"===e.msg.state?(clearInterval(t._checkTimer),t._checkTimer=null,t.useAuthcode=!0,i.getPassCodeInput().val(e.msg.authCode),t.loginSubmit()):"SYS_EXCEPTION"===e.errorCode||null==e.msg.state?(clearInterval(t._checkTimer),t._checkTimer=null,i.showErrorTip(t.config.errorTips.account.auth_expired)):""!==e.errorMsg&&(clearInterval(t._checkTimer),t._checkTimer=null,i.showErrorTip(e.errorMsg))})},3e3))},yo.prototype.directLogin=function(){var e=this.config;e.callbackURL?window.location.href=e.callbackURL:e.loginSuccess()},yo.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},yo.prototype.sliderCaptchaDidRemoved=function(){this.sliderPassedCallback=null},yo.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback&&setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},yo),to=(fe(bo,li=de),bo.prototype.events=function(){return{"click #YT-use-other":"useOtherAccount","click .YT-country-chouse-box":"toggleCountryList","click .YT-voiceVerifyTry":"setVoiceVerifyMode","click .YT-smsVerifyTry":"setSMSVerifyMode","focus .YT-form-input":"hidePlaceholder","blur .YT-form-input":"showPlaceholder","blur #YT-bindMobile-mAccount":"checkMobileNumber"}},bo.prototype.init=function(){li.prototype.init.call(this),this.className="YT-third-bind-main",this.role="third-bind"},bo.prototype.created=function(){var e,t,i=this.config.thirdPartData||{},i=Object.assign(i,{loginCountry:this.config.loginCountry});this.$el.html((t='<div class="YT-loginFrame-head YT-loginFrame-head-sub"><div class="YT-loginFrame-title" id="YT-loginFrameTitle">ä¸ºäº†è´¦å·å®‰å…¨ï¼Œè¯·ç»‘å®šæ‰‹æœº</div>',null!=(e=i).bindMobileRequired&&(t+='<div class="YT-loginFrame-sub-title">ä¾ã€Šç½‘ç»œå®‰å…¨æ³•ã€‹è¦æ±‚ï¼Œéœ€ç»‘å®šæ‰‹æœºè®©è´¦å·æ›´å®‰å…¨</div>'),t+='<div class="YT-errtips-box" style="display:none"></div></div><div class="YT-loginFrame-body">',e.mobile&&(t+='<div id="YT-bindMobile-hasAccount"><form class="YT-form YT-login-form" action="#" name="YT-mobileLogin" method="post" onsubmit="return false;" autocomplete="off"><div class="YT-hasMobile-icon"></div><div class="YT-bindTips YT-bigSize">'+e.mobile+'</div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-hasMobileSubmit" class="YT-form-btn" data-process="æ­£åœ¨è¿›å…¥..." title="ç™»å½•å¹¶ç»‘å®š">ç™»å½•å¹¶ç»‘å®š</button></div><div class="YT-third-bottom"><a href="javascript:;" class="YT-popLink" id="YT-use-other">ä½¿ç”¨å…¶å®ƒæ‰‹æœºå·</a></div></form></div>'),t+='<div id="YT-bindMobile-noAccount"',e.mobile&&(t+=' style="display:none"'),t+='><form class="YT-form YT-login-form" action="#" name="YT-mobileLogin" id="YT-bindMobile" method="post" onsubmit="return false;" autocomplete="off"><div class="YT-form-group YT-first-group YT-mobile-group no-icon"><input type="text" id="YT-bindMobile-mAccount" name="YT-bindMobile-mAccount" tabindex="1" maxlength="11" class="YT-form-input" autocomplete="off"><label class="YT-form-label" for="YT-bindMobile-mAccount"><span class="YT-form-tips l-mobile-tips">æ‰‹æœºå·ç </span><span class="YT-m-icon YT-icon-phone"></span></label><div class="YT-country-chouse-box"><div class="YT-countryCode" data-region="'+e.loginCountry.region+'">+'+e.loginCountry.countryCode+'</div><span title="é€‰æ‹©å›½å®¶æˆ–åœ°åŒº" class="YT-openlist-btn"></span></div><div class="YT-country-container"></div></div><div id="YT-bindCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group no-icon"><button id="YT-bindMobile-getMobileCode" data-name="mobileCode" class="YT-form-btn inline getCode disabled" disabled>èŽ·å–éªŒè¯ç </button><input type="text" id="YT-bindMobile-getMobile" name="YT-mPassword" tabindex="2" maxlength="6" class="YT-form-input short-input" autocomplete="off" /><label class="YT-form-label" for="YT-bindMobile-getMobile"><span class="YT-form-tips short-tips">éªŒè¯ç </span><span class="YT-m-icon icon-password"></span></label></div><div id="YT-bindSubmitCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-voiceAndSmsCont"></div><div class="YT-form-group YT-btn-group"><button type="submit" id="YT-noMobileSubmit" tabindex="3" class="YT-form-btn" data-process="æ­£åœ¨è¿›å…¥..." title="ç™»å½•å¹¶ç»‘å®š">ç™»å½•å¹¶ç»‘å®š</button></div></form>',0==e.bindMobileRequired&&(t+='<div class="bind-bt-info"><span href="javascript:;" id="YT-direct-login">æš‚ä¸ç»‘å®š</span></div>'),t+"</div></div>")),this.hasMobile=!!i.mobile},bo.prototype.mounted=function(){li.prototype.mounted.call(this),this.$bSendCode=this.find("#YT-bindMobile-getMobileCode"),this.$bPassword=this.find("#YT-bindMobile-getMobile"),this.$bAccount=this.find("#YT-bindMobile-mAccount"),this.$bAccount.on("input change",this.checkMobile.bind(this))},bo.prototype.getContainerID=function(){var e=this._captchaContainerID;return e?(this._captchaContainerID=null,e):"YT-bindCaptchaWrap"},bo.prototype.getMobilePhoneNumber=function(){return this.$bAccount.val()},bo.prototype.getSendCodeBtn=function(){return this.$bSendCode},bo.prototype.getPassCodeInput=function(){return this.$bPassword},bo.prototype.getSubmitButton=function(){return this.hasMobile?this.find("#YT-hasMobileSubmit"):this.find("#YT-noMobileSubmit")},bo.prototype.useOtherAccount=function(){this.hasMobile=!1,this.clearErrorTip(),this.find("#YT-bindMobile-hasAccount").hide(),this.find("#YT-bindMobile-noAccount").show()},bo),io=(fe(To,ci=ge),To.prototype.Actions=function(){return{"click #YT-bindMobile-getMobileCode":"sendMobileCode","click #YT-hasMobileSubmit":"loginSubmit","click #YT-noMobileSubmit":"loginSubmit","click #YT-direct-login":"skipBindMobile"}},To.prototype.init=function(){this.updateConfig();var e=this.thirdConfig;this.model=new Et,!0===e.bindMobileRequired?(this.model.on("loginConfirm:success",this.loginSuccess,this),this.model.on("loginConfirm:error loginConfirm:fail",this.loginFail,this)):!1===e.bindMobileRequired?(this.model.on("modifyUserInfo:success",this.loginSuccess,this),this.model.on("modifyUserInfo:error modifyUserInfo:fail",this.loginFail,this)):(this.model.on("bindMobileConfirm:success",this.loginSuccess,this),this.model.on("bindMobileConfirm:error bindMobileConfirm:fail",this.loginFail,this),this.model.on("recomLoginConfirm:success",this.loginSuccess,this),this.model.on("recomLoginConfirm:error recomLoginConfirm:fail",this.loginFail,this)),!1!==e.isNewUser||void 0!==e.bindMobileRequired?this.createThirdBindView():e.recommendData?this.needRecommendLogin(e.recommendData):this.checkLogin()},To.prototype.updateConfig=function(){this.config=E(),this.thirdConfig=this.config.thirdPartData},To.prototype.createThirdBindView=function(){this._loginLock=!1,this.recomLoginView&&this.recomLoginView.$el.hide(),this.view&&(this.view.$el.hide(),this.view.remove()),this.view=new to,(this.view.delegate=this).ali=new Ii({type:"login"}),(this.ali.delegate=this).parentViewController&&(this.parentViewController.view.append(this.view),this.bindActions())},To.prototype.hideView=function(){this.view&&this.view.$el.hide(),this.recomLoginView&&this.recomLoginView.$el.hide(),this.mergeView&&this.mergeView.$el.hide()},To.prototype.checkLogin=function(){var t=this.model,e=this.config;t.checkLogin({buid:e.buid,pid:e.pid},function(e){"success"===e.result&&e.msg.login&&F(t,e)})},To.prototype.sendMobileCode=function(){var e=this.thirdConfig;this.sendMobileCodeAction({bizType:e.userInfoToken&&!e.isFromRecommend?"add_mobile":"bind_mobile",formtoken:e.formtoken,userInfoToken:e.userInfoToken})},To.prototype.sendMobileCodeFail=function(){this.view.checkMobile()},To.prototype.sendMobileCodeNeedSlider=function(e){var t=this;this.sliderPassedCallback=function(){return t.sendMobileCodeAction(e)}},To.prototype.recomLoginSubmit=function(e){var t=this.thirdConfig;this.model.recomLoginConfirm({tuid:t.tuid,buid:t.buid,pid:t.pid,formtoken:t.formtoken,tuserInfoKey:t.recommendData.tuserInfoKey,userKey:e})},To.prototype.loginSubmit=function(){if(!this._loginLock){var e=this.view,t=this.thirdConfig,i={tuid:t.tuid,buid:t.buid,pid:t.pid,formtoken:t.formtoken,callback:t.callback};if(t.tlsite&&(i.tlsite=t.tlsite),t.isTlsite&&(i.isCheckBind=1),t.loginForInterflow&&(i.loginForInterflow=!0),t.isFromRecommend&&(i.isFromRecommend=!0,i.tuid=t.tuserInfoKey||t.recommendData.tuserInfoKey),e.needCaptcha&&(i.captcha=e.getCaptchaCode()),this.ali&&this.ali.needSliderCaptcha&&(i.sliderCaptchaSessionId=this.ali.NCData.csessionid,i.sliderCaptchaToken=this.ali.NCData.token,i.sliderCaptchaSig=this.ali.NCData.sig),window.mtee&&(i.UA=t.UA||window.mtee.getUA(),i.jsToken=t.jsToken||window.mtee.getUmidToken()||""),!e.hasMobile){if(i.mobile=e.getMobilePhoneNumber(),i.region=e.getCountryRegion(),i.mobileCode=e.getPassCodeInput().val(),i.sendCodeType=e.isVoiceVerify?"voiceCode":"mobileCode",i.bindNewMobile=!0,""===i.mobile)return void e.showErrorTip("è¯·è¾“å…¥æ‰‹æœºå·ç ");if(!k(i.mobile,i.region))return void e.showErrorTip("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ");if(!this.isGetMobileCode)return void e.showErrorTip("è¯·å…ˆèŽ·å–éªŒè¯ç ");if(""===i.mobileCode)return void e.showErrorTip("è¯·è¾“å…¥éªŒè¯ç ");this._sendStat("voice","submit"),e.isVoiceVerify&&this._sendStat("voice","isGetVoive")}t.userInfoToken&&(i.userInfoToken=t.userInfoToken,i.bizType=t.userInfoToken&&!t.isFromRecommend?"add_mobile":"bind_mobile",i.formtoken=t.formtoken,i.verifyCode=i.mobileCode),t.bindMobileRequired?(i.buid=t.buid,i.pid=t.pid,i.receiver=i.mobile,this.model.loginConfirm(i,"bind_login")):!1===t.bindMobileRequired?(i.passport=i.mobile,i.modifyType=i.bizType.split("_")[0],i.passportType=i.bizType.split("_")[1],this.model.modifyUserInfo(i)):this.model.bindMobileConfirm(i),this._loginLock=!0,e.disableSubmitButton()}},To.prototype.loginFail=function(e){var t=this,i=this.recomLoginView||this.view;if(this._loginLock=!1,i.disableSubmitButton(!1),"NEED_RECOMMEND_LOGIN"===e.errorCode){var o=e.msg.recommendData||{};return this.thirdConfig.recommendData=o,this.thirdConfig.formtoken=e.msg.formtoken||"",void this.needRecommendLogin(o)}if("USER_ALREADY_BIND"!==e.errorCode){if("BIND_MOBILE_REQUIRED"===e.errorCode)return this.thirdConfig.formtoken=e.formtoken||"",this.thirdConfig.tuserInfoKey=e.tuserInfoKey||"",this.thirdConfig.userInfoToken=e.userInfoToken||"",this.thirdConfig.isFromRecommend=!0,void this.createThirdBindView();i.showErrorTip(e.errorMsg||e.message),this.addCaptchaComponent({errorCode:e.errorCode,mode:"mobile",needSliderCallback:function(){t.sliderPassedCallback=function(){return t.loginSubmit()},t.view.setContainerID("YT-bindSubmitCaptchaWrap")},createCaptchaCallback:function(){t.view.setContainerID("YT-bindSubmitCaptchaWrap")}})}else{e=e.msg.bindedData||{};i.confirmBindExchange(e)}},To.prototype.loginSuccess=function(){var t=this;this._sendStat("voice","success"),this._loginLock=!1,this.view.clearErrorTip(),this.model.checkLogin({buid:this.thirdConfig.buid,pid:this.thirdConfig.pid},function(e){"success"===e.result?e.msg.login&&F(t.model,e):window.parent.close()})},To.prototype.needRecommendLogin=function(e){var t=this,i=new Ki({type:"bind",tlsite:this.thirdConfig.tlsite,data:e});setTimeout(function(){t.view?(t.view.$el.hide(),t.recomLoginView=i,t.recomLoginView.delegate=t):(t.parentViewController.hideView(),t.view=i,t.view.delegate=t),t.config.isIku&&(t.parentViewController.view.el.className=""),t.parentViewController.view.append(i)},0)},To.prototype.bindExchange=function(){var t=this,i=this.recomLoginView||this.view;this.model.once("recomBindExchange:success",function(e){t.loginSuccess(e)}),this.model.once("recomBindExchange:fail",function(e){i.showErrorTip(e.errorMsg)}),this.model.recomBindExchange()},To.prototype.createAccount=function(){var t=this,e=this.thirdConfig,i=this.recomLoginView||this.view;this.model.once("thirdpartyBind:success",function(e){t.loginSuccess(e)}),this.model.once("thirdpartyBind:fail",function(e){i.showErrorTip(e.errorMsg)}),this.model.thirdpartyBind({isLoginDirect:!0,formtoken:e.formtoken,tlsite:e.tlsite,tuid:e.recommendData.tuserInfoKey})},To.prototype.createMergeView=function(e){var t=this.model;(this.recomLoginView||this.view).$el.hide(),this.mergeView=new zi({model:t,vipCount:e}),(this.mergeView.delegate=this).parentViewController.view.append(this.mergeView)},To.prototype.skipBindMobile=function(){var e=this.config;e.callbackURL?window.location.href=e.callbackURL:e.loginSuccess()},To.prototype.confirmSelectedAccount=function(e){this.recomLoginSubmit(e)},To.prototype.confirmBindExchange=function(){this.bindExchange()},To.prototype.clickToCreateAccount=function(){this.createAccount()},To.prototype.clickToMergeAccounts=function(e){this.createMergeView(e)},To.prototype.mergeLoginSuccess=function(e){this.loginSuccess(e)},To.prototype.mergeLoginExpire=function(){this.mergeView&&(this.mergeView.remove(),this.mergeView=null),this.parentViewController&&this.parentViewController.loginVC&&this.parentViewController.loginVC.viewWillUpdate()},To.prototype.backToLogin=function(){var e=this.recomLoginView||this.view;this.mergeView&&e&&(this.mergeView.$el.hide(),e.$el.show())},To.prototype.sliderCaptchaLoadWithContainerID=function(){return this.view.getContainerID()},To.prototype.sliderCaptchaDidRemoved=function(){this.sliderPassedCallback=null},To.prototype.sliderCaptchaPassed=function(){var e=this;this.sliderPassedCallback&&setTimeout(function(){e.sliderPassedCallback(),e.sliderPassedCallback=null},500)},To),oo=(fe(fo,ai=et),fo.prototype.init=function(){this.config=E(),this.className="YT-partner-hasLogin"},fo.prototype.created=function(){var e=this.config;e.partnerCallbackURL=e.callbackURL+(-1<e.callbackURL.indexOf("?")?"&":"?")+"ykOpensid="+e.ykOpensid,this.$el.html('<div class="YT-loginFrame-head has-login-title">æ£€æµ‹åˆ°æ‚¨å·²ç™»å½•çš„ä¼˜é…·åœŸè±†è´¦å·</div><div class="YT-loginFrame-body YT-form"> <div class="user-avatar"> <img src="'+(e.avatar||"/static-resources/images/suc.png")+'"> <div class="avatar-mask"></div> </div> <div class="user-nickname">'+(e.nickName||"")+'</div> <div class="change-account"><a href="javascript:;" id="changeAccount">æ›´æ¢è´¦å·</a></div> <div class="YT-form-group YT-btn-group"> <a class="YT-form-btn" href="'+e.partnerCallbackURL+'">å¿«é€Ÿç™»å½•</a> </div></div><div class="YT-partner-foot"> <a href="'+(e.partnerGoBackURL||"#")+'">'+(e.partnerGoBackTitle||"è¿”å›žå‰é¡µ")+"</a></div>")},fo),no=(fe(mo,ri=me),mo.prototype.Actions=function(){return{"click #changeAccount":"changeAccount"}},mo.prototype.init=function(){this.config=E(),this.view=new oo,this.view.delegate=this},mo.prototype.changeAccount=function(){this.parentViewController&&(this.parentViewController.buildLoginDom(),this.destory())},mo),so=(fe(go,si=de),go.prototype.events=function(){return{"click #YT-verifySubmit":"verifySubmit"}},go.prototype.init=function(){this.config=E(),this.className="YT-verifyFrame-main",void 0===this.options.useSliderCaptcha&&(this.options.useSliderCaptcha=!0)},go.prototype.created=function(){var e,t=this.options.useSliderCaptcha;this.$el.html((e='<div class="YT-loginFrame-body"> <div class="YT-header"> <div class="YT-header-bg verify-icon"></div> ',(t={useSliderCaptcha:t}).useSliderCaptcha?e+=" <p>ä¸ºäº†è¯æ˜Žä½ ä¸æ˜¯æœºå™¨äººï¼Œè¯·æ‹–åŠ¨æ»‘å—<br>è¿›è¡Œå®‰å…¨éªŒè¯</p> ":e+=" <p>ä¸ºäº†è¯æ˜Žä½ ä¸æ˜¯æœºå™¨äººï¼Œè¯·è¿›è¡Œå›¾ç‰‡éªŒè¯</p> ",e+=' </div> <div class="YT-form"> <div class="YT-errtips-box" style="display:none"></div> <div id="YT-vCaptchaWrap" class="YT-captcha-wrap"></div> ',t.useSliderCaptcha||(e+=' <div class="YT-form-group"> <button type="button" class="YT-form-btn" id="YT-verifySubmit">æäº¤å¹¶éªŒè¯</button> </div> '),e+" </div></div>"))},go.prototype.mounted=function(){si.prototype.mounted.call(this),this.options.useSliderCaptcha?(this.ali=new Ii({type:"login"}),(this.ali.delegate=this).ali.getNCInstance()):this.createCaptcha()},go.prototype.remove=function(){this.ali&&this.options.useSliderCaptcha?(this.ali.delegate=null,this.ali.removeNCInstance(),this.ali=null):this.removeCaptcha(),si.prototype.remove.call(this)},go.prototype.getContainerID=function(){return"YT-vCaptchaWrap"},go.prototype.verifySubmit=function(){var e=this.getCaptchaCode();""!==e?this.callDelegateFunc("verifyDidSubmit",{code:e}):this.showErrorTip(this.config.errorTips.validate.required)},go.prototype.sliderCaptchaLoadWithContainerID=function(){return this.getContainerID()},go.prototype.sliderCaptchaPassed=function(e){this.callDelegateFunc("verifyDidSubmit",e)},go),ro=(fe(uo,ni=me),uo.prototype.init=function(){this.config=E();var e=this.data=this.options.data||{},e=this.useSliderCaptcha=-1<e.errorCode.indexOf("SLIDER");this.model=this.options.model||null,this.view=new so({useSliderCaptcha:e}),this.view.delegate=this},uo.prototype.checkLogin=function(t){var i=this,o=this.model,e=this.config;o.checkLogin({buid:e.buid,pid:e.pid},function(e){"success"===e.result&&e.msg.login?F(o,e):t&&i.view.showErrorTip("æ‚¨è¿˜æœªç™»å½•")})},uo.prototype.verifyDidSubmit=function(e){var t=this,i={tuid:this.data.tuid,tlsite:this.data.tlsite};this.useSliderCaptcha?(i.sliderCaptchaSessionId=e.csessionid,i.sliderCaptchaToken=e.token,i.sliderCaptchaSig=e.sig,i.UA=this.data.UA||"",i.jsToken=this.data.jsToken||"",window.mtee&&!i.UA&&(i.UA=window.mtee.getUA(),i.jsToken=window.mtee.getUmidToken()||"")):i.captcha=e.code,this.model.thirdPartyAjaxCallback(i),this.model.off("thirdPartyAjaxCallback:success thirdPartyAjaxCallback:fail"),this.model.once("thirdPartyAjaxCallback:success",function(e){e.riskErrorCode?window.riskConnect(e):e.isNewUser?window.thirdConnect(e):t.checkLogin()}),this.model.once("thirdPartyAjaxCallback:fail",function(e){t.view.showErrorTip(e.errorMsg||"å®‰å…¨éªŒè¯å¤±è´¥"),t.view.ali.resetNCInstance()})},uo),de=(po.authLogin=function(t){var i=void 0,e=E();(e.thirdPartUrlAry||[]).forEach(function(e){t===e.site&&(i=e.link)});var o=R(),n=window.mtee&&window.mtee.getUA()||"",s=window.mtee&&window.mtee.getUmidToken()||"",n=i+"&needRecommend=true&protocol="+window.location.protocol+"&jsToken="+s+"&UA="+encodeURIComponent(n);e.configId&&(n+="&configId="+e.configId),document.domain=o;n=window.open(n,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no");(window.ActiveXObject||"ActiveXObject"in window)&&(Bi.add(n,"thirdPartLoginWindow"),Bi.onClose("thirdPartLoginWindow",function(){window.YKLoginConnect(se("YK_thirdLogin_data")||"{}"),setTimeout(function(){document.cookie="YK_thirdLogin_data=;domain="+o+";expires="+new Date(1970,0,1).toGMTString()},500)}))},po),ao=void 0,co=["account.youku.com","cloud.youku.com","zhifu.youku.com"],lo=(fe(ho,oi=me),ho.prototype.Actions=function(){return{"click #YT-gotoLogin":"switchToLoginView","click #YT-registeBtn":"switchToRegView","click #retryGetConfig":"retryGetConfig"}},ho.prototype.init=function(){this.config=E(this.options),this.model=new Et,Nt.init(),Bt.init(),this.config.isHasLogin?this.buildPartnerLoginDom():(this.config.checkNoLogin(),ao=this)},ho.prototype.getCustomConfig=function(t){var i,o=this,n=this.model,e=this.config;this._configLoaded?t&&this.renderDom(e,t):(i={pid:e.pid,bizType:t||"",callback:encodeURIComponent(e.callbackURL)},e.configId&&(i.configId=e.configId),n.once("getConfig:success",function(e){L(e,!0),o._configLoaded=!0,o.emit("configLoaded",o.config),t&&o.renderDom(e,t)}),n.once("getConfig:fail",function(e){o.renderErrorDom(e,t)}),n.once("getConfig:error",function(){o.renderErrorDom({errorMsg:'<span></span><h3>sorryï¼Œæ‚¨è®¿é—®çš„é¡µé¢æ— æ³•æ‰“å¼€</h3><p>ç½‘ç»œè¿žæŽ¥å¼‚å¸¸ï¼Œæˆ–è¿è¥å•†ç½‘ç»œæ•…éšœï¼Œè¯·åé¦ˆç»™<a href="http://os3.cs.tudou.com/new/client.php?spm=a2h26.8769780.0.0&arg=yktd&style=28" target="_blank" >åœ¨çº¿å®¢æœ</a>ï¼Œæˆ–è”ç³»è¿è¥å•†å®¢æœã€‚</p><a  class="YT-client" href="#" id="retryGetConfig" data-type="'+t+'">ç‚¹å‡»é‡è¯•</a>'},t)}),window.YKLoginPreLoadConfig?window.YKLoginPreLoadConfig(function(e){e instanceof Error?n.getConfig(i):e.result&&"success"===e.result?n.emit("getConfig:success",e.data):n.emit("getConfig:fail",e)}):n.getConfig(i))},ho.prototype.retryGetConfig=function(e){e.preventDefault(),e.target.innerHTML="æ­£åœ¨é‡è¯•...",this.getCustomConfig(e.target.getAttribute("data-type"))},ho.prototype.getFormToken=function(e,t){var i=this.config;this.model.getFormToken({pid:i.pid,bizType:e||""},function(e){L({formtoken:e.formtoken}),T(t)&&t()})},ho.prototype.removeErrView=function(){this.errView&&(this.errView.remove(),this.errView=null,this.loginVC&&(this.loginVC.destory(),this.loginVC=null),this.regVC&&(this.regVC.destory(),this.regVC=null))},ho.prototype.loadAliLoginModule=function(e){w("https://g.alicdn.com/vip/havana-login/0.3.2/js/mini-login-embedder-min.js",{crossOrigin:!0,retry:2},e)},ho.prototype.aliLoginMessageHandler=function(e){var t=this.config;e.action&&("hasLoginResult"===e.action||"loginResult"===e.action)&&e.st&&((e=t.callbackURL||t.callback||"")?window.location.href=e:t.loginSuccess())},ho.prototype.initAliLoginFrame=function(){var e=this;this.miniLoginEmbedder&&(document.getElementById("alibaba-login-iframe").innerHTML="");var t=this.config,i="mini"===t.size?340:380,o=(r=window.location.hostname.match(/\.(\w+)\.(com|ai|net|tv)$/),a=r&&r[1]||"youku",{url:r=!(r=yt[a])?yt[a="youku"]:r,name:a}),n=(window.parent||{}).location,s=(n=void 0===n?{}:n).host,r=void 0===s?"":s,a=this.miniLoginEmbedder=new window.MiniLoginEmbedder,n="https://"+o.url+"/mini_login.htm",s="&"+y({pid:t.pid,returnUrl:t.callbackURL}),o=o.name,i={targetId:"alibaba-login-iframe",appName:"youku",appEntrance:o,iframeUrl:n,lang:"zh_cn",iframeWidth:i,iframeHeight:350,notLoadSsoView:"true",isMobile:"false",queryStr:s};"8fb8456183734a86bfc1c15a1c761cdf"!==t.pid&&"20160607PLF000287"!==t.pid||(i.appEntrance="youku_dark"),t.isIku&&(i.appEntrance=o="iku",(t=new window.MiniLoginEmbedder).addEvent("onMessage",this.aliLoginMessageHandler.bind(this)),t.init({targetId:"alibaba-qrlogin-iframe",appName:"youku",appEntrance:"iku_qrcode",iframeUrl:n,lang:"zh_cn",iframeWidth:320,iframeHeight:350,resizeIframeWidthFix:!0,notLoadSsoView:"true",isMobile:"false",queryStr:s})),"youku"===o&&(co.includes(r)?(i.iframeWidth=424,i.iframeHeight=507):(i.iframeWidth=793,i.iframeHeight=528)),a.addEvent("onMessage",this.aliLoginMessageHandler.bind(this)),a.init(i),le(function(t){var i=void 0;try{i=JSON.parse(decodeURIComponent(t.data))}catch(e){i=c(t.data)?t.data:{}}"needUpgrade"===(i.action||"")&&(e.view.el.className=i.size&&"large"===i.size?"TB-needUpgrade":"")})},ho.prototype.renderDom=function(e,t){var i=this;return this.config.useAliLoginFrame=this.config.useAliLoginFrame||-1<window.location.hash.indexOf("useAliLoginFrame"),this.setNotice(e),this.getFormToken(t),kt.isNeedRequestProxy()&&kt.create(mt),this.view?this.removeErrView():(B(this.config),this.view=new Pt({delegate:this}),this.bindActions(),this.emit("mainViewLoaded")),this.waitThirdConnectRender||this.waitVerifyConnectRender?(this.waitThirdConnectRender&&this.thirdConnect(),this.waitVerifyConnectRender&&this.verifyConnect(),this.waitThirdConnectRender=!1,this.waitVerifyConnectRender=!1,void(this._mainViewLoaded=!0)):this.config.useAliLoginFrame?void this.loadAliLoginModule(function(){i.view.openPopupWindow(),i.initAliLoginFrame()}):("partner_login"===t&&this.renderPartnerLoginView(),"login"===t&&this.renderLoginView(),"register"===t&&this.renderRegView(),void(this._mainViewLoaded=!0))},ho.prototype.renderErrorDom=function(e,t){this.renderDom({},t),this.loginVC&&this.loginVC.view.$el.css({visibility:"hidden"}),this.regVC&&this.regVC.view.$el.css({visibility:"hidden"});t=this.errView=new et({className:"YT-errview"});t.$el.html(e.errorMsg),this.view.append(t),this._mainViewLoaded=!0},ho.prototype.renderPartnerLoginView=function(){this.partnerLoginVC=new no({model:this.model}),(this.partnerLoginVC.parentViewController=this).partnerLoginVC.statDelegate=Nt.getInstance(),this.view.append(this.partnerLoginVC.view)},ho.prototype.renderLoginView=function(){this.loginVC?(this.loginVC.view.show(),this.loginVC.view.setUserData(),this.loginVC.updateConfig()):(this.loginVC=new Qi({model:this.model}),(this.loginVC.parentViewController=this).loginVC.statDelegate=Nt.getInstance(),this.view.append(this.loginVC.view),-1<window.location.hash.indexOf("debug")&&(window.__yt_login_view_controller=this.loginVC)),this.view.openPopupWindow()},ho.prototype.renderRegView=function(){this.regVC?(this.regVC.view.show(),this.regVC.updateConfig()):(this.regVC=new Ji({model:this.model}),(this.regVC.parentViewController=this).regVC.statDelegate=Nt.getInstance(),this.view.append(this.regVC.view),-1<window.location.hash.indexOf("debug")&&(window.__yt_reg_view_controller=this.regVC)),this.view.openPopupWindow()},ho.prototype.renderRiskView=function(){this.riskVC&&this.riskVC.destory(),this.riskVC=new eo,(this.riskVC.parentViewController=this).view.append(this.riskVC.view),-1<window.location.hash.indexOf("debug")&&(window.__yt_risk_view_controller=this.riskVC),this.view.openPopupWindow()},ho.prototype.renderThirdBindView=function(){this.tbindVC&&this.tbindVC.destory(),this.tbindVC=new io,(this.tbindVC.parentViewController=this).tbindVC.statDelegate=Nt.getInstance(),(this.tbindVC.view||this.config.thirdPartData.recommendData)&&(this.view.append(this.tbindVC.view),this.view.openPopupWindow())},ho.prototype.renderVerifyView=function(){this.verifyVC&&this.verifyVC.destory(),this.verifyVC=new ro({model:this.model,data:this.config.verifyData}),(this.verifyVC.parentViewController=this).view.append(this.verifyVC.view),this.view.openPopupWindow()},ho.prototype.buildPartnerLoginDom=function(){this.getCustomConfig("partner_login")},ho.prototype.buildLoginDom=function(e){e&&L({from:e});e=this.config;e.isIku&&(e.thirdPartData||e.riskData)||(this._mainViewLoaded?(this.getFormToken("login"),this.hideView(),this.renderLoginView()):this.getCustomConfig("login"))},ho.prototype.buildRegDom=function(e){var t=this.config.regShowType;"in"===t?(e&&L({from:e}),this._mainViewLoaded?(this.getFormToken("register"),this.hideView(),this.renderRegView()):this.getCustomConfig("register")):"new"===t?window.open(mt+"/register.htm","register"):window.location.href=mt+"/register.htm"},ho.prototype.buildRiskDom=function(e){this.config.riskData=e,this.hideView(),this.view.el.className="YT-riskFrame",this.renderRiskView()},ho.prototype.thirdConnect=function(e){e&&(this.config.thirdPartData&&delete this.config.thirdPartData,L({thirdPartData:e})),this.view?(!1===(e=this.config.thirdPartData).isNewUser&&void 0===e.bindMobileRequired||this.hideView(),!1===e.isNewUser&&!e.recommendData||(this.view.el.className="YT-third-bind"),this.renderThirdBindView()):this.waitThirdConnectRender=!0},ho.prototype.verifyConnect=function(e){e&&(this.config.verifyData=e),this.view?(this.hideView(),this.view.el.className="YT-riskFrame",this.renderVerifyView()):this.waitVerifyConnectRender=!0},ho.prototype.riskConnect=function(e){this.loginVC||this.buildLoginDom(),this.loginVC.loginFail(e)},ho.prototype.switchToLoginView=function(){this.buildLoginDom()},ho.prototype.switchToRegView=function(){this.buildRegDom()},ho.prototype.setNotice=function(e){var t=e.notice,e=t&&t.login&&t.login.topNoticePC,t=t&&t.register&&t.register.topNoticePC;e&&e.length&&L({loginNotice:e}),t&&t.length&&L({regNotice:t})},ho.prototype.hideView=function(){this.loginVC&&this.loginVC.hideView&&this.loginVC.hideView(),this.regVC&&this.regVC.view&&this.regVC.view.hide(),this.riskVC&&this.riskVC.view&&this.riskVC.view.hide(),this.tbindVC&&this.tbindVC.hideView&&this.tbindVC.hideView(),this.verifyVC&&this.verifyVC.view&&this.verifyVC.destory()},ho.prototype.closeFrame=function(){this.view.closePopupWindow(),T(this.config.closeCallback)&&this.config.closeCallback()},ho.prototype.mainLoginSuccess=function(e,t,i){ao&&(L({buid:t,pid:i}),F(ao.model,e))},ho.prototype.updateConfig=function(e){c(e)&&L(e)},ho.prototype.updateThemeBg=function(e){var t=this;this.view?this.view.updateThemeBgStyle(e):this.once("mainViewLoaded",function(){t.view.updateThemeBgStyle(e)})},ho.prototype.viewGetConfig=function(){return this.config},ho._thirdConnect=function(e){ao&&(ao.thirdConnect.call(ao,e),ao.view||ao.getCustomConfig("connect"))},ho._verifyConnect=function(e){ao&&(ao.verifyConnect.call(ao,e),ao.view||ao.getCustomConfig("connect"))},ho._riskConnect=function(e){ao&&(ao.riskConnect.call(ao,e),ao.view||ao.getCustomConfig("connect"))},ho._connect=function(t){var i=void 0;try{i=JSON.parse(decodeURIComponent(t))}catch(e){i=c(t)?t:{}}var e=i.data||{};switch(i.name||""){case"thirdConnect":ho._thirdConnect(e);break;case"riskConnect":ho._riskConnect(e);break;case"verifyConnect":ho._verifyConnect(e)}},ho);function ho(){return Se(this,oi.apply(this,arguments))}function po(){}function uo(){return Se(this,ni.apply(this,arguments))}function go(){return Se(this,si.apply(this,arguments))}function mo(){return Se(this,ri.apply(this,arguments))}function fo(){return Se(this,ai.apply(this,arguments))}function To(){return Se(this,ci.apply(this,arguments))}function bo(){return Se(this,li.apply(this,arguments))}function yo(){return Se(this,di.apply(this,arguments))}function vo(){return Se(this,hi.apply(this,arguments))}function wo(){return Se(this,pi.apply(this,arguments))}function Co(){return Se(this,ui.apply(this,arguments))}function Yo(){return Se(this,gi.apply(this,arguments))}function ko(){return Se(this,mi.apply(this,arguments))}function _o(){return Se(this,fi.apply(this,arguments))}function So(){return Se(this,Ti.apply(this,arguments))}function Ro(){return Se(this,bi.apply(this,arguments))}function Mo(){return Se(this,yi.apply(this,arguments))}function Eo(){return Se(this,vi.apply(this,arguments))}function Lo(){return Se(this,wi.apply(this,arguments))}function Io(){this.winObj={}}function Ao(){return Se(this,Ci.apply(this,arguments))}function Po(){return Se(this,Yi.apply(this,arguments))}function Vo(){return Se(this,ki.apply(this,arguments))}function xo(){return Se(this,_i.apply(this,arguments))}function No(){return Se(this,Si.apply(this,arguments))}function Do(){return Se(this,Ri.apply(this,arguments))}function $o(){return Se(this,Mi.call(this,"YK_LOGIN_USER_STORAGE"))}function Bo(e){if(Ei&&window.JSON&&JSON.parse){if(this.storageKey=e,!this.cachedStorage)try{this.cachedStorage=JSON.parse(localStorage.getItem(this.storageKey)||"{}")}catch(e){this.cachedStorage={}}this.support=!0}}return le(function(e){return lo._connect(e.data)}),window.YKLoginConnect=lo._connect,window.thirdConnect=lo._thirdConnect,window.verifyConnect=lo._verifyConnect,window.riskConnect=lo._riskConnect,window.YKAuthLogin=de.authLogin,window.loginFrame=window.loginFrame||lo,lo}();
