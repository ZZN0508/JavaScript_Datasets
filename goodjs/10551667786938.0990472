define(["OK/logger","OK/NewsFetchCoordinator"],function(r,t){"use strict";var i;function n(){i=i||!!document.getElementById("call2")}function o(r,n){r&&require(["OK/WebRTCUtils!"],function(t){if(t.isBrowserSupported())try{var e=OK.util.parseJsonCorrected(r);e&&(i?require(["OK/call2"],function(t){t.onPush(e)}):require(["OK/videochat/Chat"],function(t){t.onPush(e)}))}catch(t){n&&n()}})}return{activatePush:function(){n(),t.addBlock("VCP"),require(["OK/VideoChatSound"])},activateWebPush:function(t){n(),window.history&&window.history.replaceState(null,"","/");var e=t.getAttribute("data-notification"),t=t.getAttribute("data-alternative-link");e?o(e,function(){r.error("videochat.webpush.error")}):t&&window.navigateOnUrlFromJS&&navigateOnUrlFromJS(t)},setNewContent:function(t){o(t,function(){r.error("videochat.push.error")})}}});
