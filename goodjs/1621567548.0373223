var __tea_iife_export__=function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function n(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var o=function(e,t){var n,i,r=window.screen.width,o=window.screen.height,s=window.navigator.appVersion,a=window.navigator.userAgent,u=window.navigator.language,c=function(e){var t=function(e){var t=document.createElement("a");return t.href=e,t}(e).search;t=t.slice(1);var n={};return t.split("&").forEach(function(e){var t,i,r=e.split("=");r.length&&(t=r[0],i=r[1]);try{n[t]=decodeURIComponent(void 0===i?"":i)}catch(e){n[t]=i}}),n}(window.location.href),l="",d="",h="",f=""+parseFloat(s);-1!==(n=a.indexOf("Opera"))&&(h="Opera",f=a.substring(n+6),-1!==(n=a.indexOf("Version"))&&(f=a.substring(n+8))),-1!==(n=a.indexOf("Edge"))?(h="Microsoft Edge",f=a.substring(n+5)):-1!==(n=a.indexOf("MSIE"))?(h="Microsoft Internet Explorer",f=a.substring(n+5)):-1!==a.indexOf("Chrome")?-1!==(n=a.indexOf("MicroMessenger"))?(h="weixin",f=a.substring(n+15,n+20)):-1!==(n=a.indexOf("MQQBrowser"))?(h="qqbrowser",f=a.substring(n+11,n+15)):-1!==(n=a.indexOf("Chrome"))&&(h="Chrome",f=a.substring(n+7)):-1!==a.indexOf("Safari")?-1!==(n=a.indexOf("QQ"))?(h="qqbrowser",f=a.substring(n+10,n+16)):-1!==(n=a.indexOf("Safari"))&&(h="Safari",f=a.substring(n+7),-1!==(n=a.indexOf("Version"))&&(f=a.substring(n+8))):-1!==(n=a.indexOf("Firefox"))?(h="Firefox",f=a.substring(n+8)):-1!==(n=a.indexOf("MicroMessenger"))?(h="weixin",f=a.substring(n+15,n+20)):-1!==(n=a.indexOf("QQ"))&&(h="qqbrowser",f=a.substring(n+3,n+8)),-1!==(i=f.indexOf(";"))&&(f=f.substring(0,i)),-1!==(i=f.indexOf(" "))&&(f=f.substring(0,i)),-1!==(i=f.indexOf(")"))&&(f=f.substring(0,i));for(var p,g,m=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(s)?"wap":"web",v=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],_=0;_<v.length;_++){var y=v[_];if(y.r.test(a)){l=y.s;break}}function z(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""}switch(/Windows/.test(l)&&(d=z(/Windows (.*)/,l),l="windows"),l){case"Mac OS X":d=z(/Mac OS X (10[\.\_\d]+)/,a),l="mac";break;case"Android":(g=z(/Android ([\.\_\d]+)/,p=a))||(g=z(/Android\/([\.\_\d]+)/,p)),d=g,l="android";break;case"iOS":d=(d=/OS (\d+)_(\d+)_?(\d+)?/.exec(s))?d[1]+"."+d[2]+"."+(0|d[3]):"",l="ios"}var b=e?function(){var e=t?"_tea_utm_cache_"+t:"_tea_utm_cache",n={},i={utm_source:c.utm_source,utm_medium:c.utm_medium,utm_campaign:c.utm_campaign,utm_term:c.utm_term,utm_content:c.utm_content};try{var r=window.sessionStorage,o=!1;for(var s in i)i[s]&&(n[s]=i[s],o=!0);if(o)r.setItem(e,JSON.stringify(n));else{var a=r.getItem(e);a&&(n=JSON.parse(a))}}catch(e){return i}return n}():{};return{browser:h,browser_version:f,platform:m,os_name:l,os_version:d,userAgent:a,screen_width:r,screen_height:o,device_model:function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach(function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))});else if("ios"===e||"mac"===e){var n=navigator.userAgent.replace("Mozilla/5.0 (",""),i=n.indexOf(";");t=n.slice(0,i)}}catch(e){}return t.trim()}(l),language:u,referrer:"",referrer_host:"",utm_source:b.utm_source,utm_medium:b.utm_medium,utm_campaign:b.utm_campaign,utm_term:b.utm_term,utm_content:b.utm_content,isSupportBeacon:("ios"!==l||"safari"!==h)&&(!(!window.navigator||!window.navigator.sendBeacon)||void 0)}};function s(e,t){return e(t={exports:{}},t.exports),t.exports}var a=s(function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var r={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(i.read||i)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(r[c]=u,e===c)break}catch(e){}}return e?r[e]:r}}return r.set=o,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,n){o(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}(function(){})},e.exports=n()}),u=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e}();var c={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||void 0}catch(e){}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e){try{var t=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]+)")),n=t?t[1]:"";return decodeURIComponent(n)}catch(e){return""}},setCookie:function(e,t,n){try{var i=+new Date+n;a.set(e,t,{expires:new Date(i),path:"/",domain:document.domain.split(".").slice(-2).join(".")})}catch(e){}},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},l=function(){function e(e){this._storage=!e&&c.isSupportLS?c:new u}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e){return this._storage.getCookie(e)},e.prototype.setCookie=function(e,t,n){this._storage.setCookie(e,t,n)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}();var d=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var i,r=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);i=e.split(o);for(var s=0;s<i.length;s++){var a=parseInt(i[s],n);a=1*a^t;var u=String.fromCharCode(a);r.push(u)}return r.join("")}}(e,64,25)},h={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},f="/v1/user/webid",p="/v1/list",g={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001},m=function(e,t){return t?"__tea_cache_tokens_"+e:"__tea_cache_events_"+e},v=function(){if("undefined"!=typeof window)return window.TeaAnalyticsObject},_={cn:"1fz22z22z1nz21z4mz4bz4bz1bz1nz1nz20z1mz1dz1gz1jz1cz4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1bz1nz1nz20z1mz1dz1gz1jz1cz4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz24z18z18z1jz1gz49z1bz1nz1nz20z1mz1dz1gz1jz1cz4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},y={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},z="__shushuo_libra_style__",b=(["1fz22z22z1nz21z4mz4bz4bz1bz18z22z18z4az19z27z22z1cz1bz18z1lz1az1cz4az1az1mz1k","1fz22z22z1nz21z4mz4bz4bz25z25z25z4az19z27z22z1cz20z18z1lz1ez1cz20z21z4az1az1mz1k","1fz22z22z1nz21z4mz4bz4bz1bz18z22z18z20z18z1lz1ez1cz20z21z4az1az1mz1kz4az1az1l","1fz22z22z1nz21z4mz4bz4bz19z27z22z1cz20z18z1lz1ez1cz20z21z4az19z27z22z1cz1bz18z1lz1az1cz4az1az1mz1k"].map(function(e){return d(e)}),"1fz22z22z1nz21z4mz4bz4bz21z4fz4az1nz21z22z18z22z1nz4az1az1mz1kz4bz1nz1ez1az4bz22z1cz1az1fz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z1cz1bz1gz22z1mz20z49z18z19z4az1hz21");function w(e,t,n,i,r,o,s){var a=new XMLHttpRequest;o&&(a.timeout=o);var u=s||"POST";a.open(u,""+e,!0),a.setRequestHeader("Content-Type","application/json; charset=utf-8"),r&&a.setRequestHeader("X-MCS-AppKey",""+r),a.onload=function(){if(n){var e=null;if(a.responseText){try{e=JSON.parse(a.responseText)}catch(t){e={}}n(e)}}},o&&(a.ontimeout=function(){i()}),a.onerror=function(){a.abort(),i&&i(t,g.XHR_ON)},a.send(JSON.stringify(t))}var S=function(e,t,n,i){try{var r=e.match(/\/v\d\//),o="";o=r?r[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var s=e.split(o)[0];if(!s)return void i(e,t,g.NO_URL);t.forEach(function(r){var o=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return t="&"===t[0]?t.slice(1):t}(r),a=new Image(1,1);a.onload=function(){a=null,n&&n()},a.onerror=function(){a=null,i&&i(e,t,g.IMG_ON)},a.src=s+"/v1/gif?"+o})}catch(n){i&&i(e,t,g.IMG_CATCH,n.message)}},I=function(e,t,n,i,r,s,a,u){var c=window.navigator.userAgent,l=-1!==window.navigator.appName.indexOf("Microsoft Internet Explorer")&&(-1!==c.indexOf("MSIE 8.0")||-1!==c.indexOf("MSIE 9.0")),d=!!n;if(!d&&l)S(e,t,i,r);else if(!d&&a)return o(!1).isSupportBeacon?(u&&u(),void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():r(e,t,g.BEACON_FALSE))):void S(e,t,i,r);s&&delete t.app_key,w(e,t,i,r,n)};function k(e){return e?(e^16*Math.random()>>e/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,k)}var E=function(){return k().replace(/-/g,"").slice(0,19)},C=function(){function e(e,t){this.browser=o(!0,e.app_id),this.config=e,this.cfg=t,this.storage=new l(!1),this.appInfo=e.app_key||e.app_id,this.isNoWebid=e.disable_webid,this.isNoSsid=e.disable_webid||e.disable_ssid,this.domain=e.channel_domain||d(h[e.channel]),this.tokenReady=!1,this.checkExp=e.checkExp||!1,this.enableCookie=e.cross_subdomain||!1,this.expiresTime=this.enableCookie?94608e6:0,this.fetchUrl=""+this.domain+f}return e.prototype._getToken=function(){this.tokensKey=m(this.appInfo,!0),this.cookieKey="__tea_cookie_tokens_"+this.appInfo;var e=this.storage.getItem(this.tokensKey);if(this.enableCookie){var t=this.storage.getCookie(this.cookieKey);if(t){t=decodeURIComponent(t);var n=(t=JSON.parse(t)).user_unique_id,i=t.web_id,r=t.timestamp,o=t.ssid;this._setToken(i,n,o,r)}else{if(!e)return void this._requestWebId();this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(e)),this.expiresTime),this._checkLocal(e)}}else{if(!e)return void this._requestWebId();this._checkLocal(e)}},e.prototype._checkLocal=function(e){if(!e.web_id){var t=this.storage.getCookie("tt_webid"),n=this.storage.getCookie("__tea_sdk__ssid"),i=this.storage.getCookie("__tea_sdk__user_unique_id");if(t&&n&&i){var r={web_id:t,ssid:n,user_unique_id:i,timestamp:Date.now()};this.storage.setItem(this.tokensKey,r)}}var o=this.storage.getItem(this.tokensKey),s=(i=o.user_unique_id,t=o.web_id,o.timestamp);n=o.ssid;t&&i?this._setToken(t,i,n,s):this._requestWebId()},e.prototype._setToken=function(e,t,n,i){if(this.uuid=t,this.web_id=e,this.ssid=n,this.checkExp){var r=Date.now()-parseFloat(i);if(r>7344e6)return void this._requestWebId();if(r>432e7)return void this._updateWebId(e)}this._complete(e,t,n)},e.prototype._complete=function(e,t,n){this.cfg.envInfo.user.ssid=n,this.cfg.envInfo.user.web_id=e,this.cfg.envInfo.user.user_unique_id=t,this.tokenReady=!0},e.prototype._requestWebId=function(){this.isNoWebid?this._setwebId({web_id:E(),ssid:""}):this._fetchWebId(this.fetchUrl,!1)},e.prototype._updateWebId=function(e){var t=""+this.domain+f+"/"+e+"/update";this._fetchWebId(t,!0)},e.prototype._fetchWebId=function(e,t){var n=this;this.isGetWebId=!0,I(e,{app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:this.browser.userAgent,referer:this.browser.referrer,user_unique_id:""},this.config.app_key,function(e){if(e&&0===e.e)if(t){var i={web_id:n.web_id,ssid:n.ssid,user_unique_id:n.uuid,timestamp:Date.now()};n.enableCookie&&n.storage.setCookie(n.cookieKey,encodeURIComponent(JSON.stringify(i)),n.expiresTime),n.storage.setItem(n.tokensKey,i),n._complete(n.web_id,n.uuid,n.ssid),n.isGetSsid?n._requestSsId():n.callback&&n.callback()}else n.isGetWebId=!1,n._setwebId(e),n.isGetSsid?n._requestSsId():n.callback&&n.callback();else t?n._fetchWebId(n.fetchUrl,!1):n.isGetWebId=!1},function(){n.isGetWebId=!1},!0)},e.prototype._setwebId=function(e){var t=this.cfg.envInfo.user.web_id||e.web_id,n={web_id:t,ssid:e.ssid,user_unique_id:this._uuid?this._uuid:t,timestamp:Date.now()};this.enableCookie&&this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(n)),this.expiresTime),this.storage.setItem(this.tokensKey,n),this.cfg.envInfo.user.ssid=e.ssid,this.cfg.envInfo.user.web_id=t,this.cfg.envInfo.user.user_unique_id=this._uuid?this._uuid:t,this.uuid=this._uuid?this._uuid:t,this.web_id=t,this.ssid=e.ssid,this.tokenReady=!0},e.prototype._getSsid=function(e){e&&-1===["0","Null","None","","undefined"].indexOf(e)&&(this.uuid===e&&this.web_id&&this.ssid?this.tokenReady=!0:(this._uuid=e,this.uuid=e,this.cfg.envInfo.user.user_unique_id=e,this.isGetSsid=!0,this.isNoSsid||this.isGetWebId?this.callback&&this.callback():(this.tokenReady=!1,this.isGetSsid=!1,this._requestSsId())))},e.prototype._requestSsId=function(){var e=this,t=this.domain+"/v1/user/ssid";I(t,{app_key:this.config.app_key,app_id:this.config.app_id,web_id:this.web_id,user_unique_id:this.uuid},this.config.app_key,function(t){if(t&&0===t.e){e.cfg.envInfo.user.ssid=t.ssid;var n={web_id:e.web_id,ssid:t.ssid,user_unique_id:e.uuid,timestamp:Date.now()};e.enableCookie&&e.storage.setCookie(e.cookieKey,encodeURIComponent(JSON.stringify(n)),e.expiresTime),e.storage.setItem(e.tokensKey,n),e.tokenReady=!0}else e.tokenReady=!0;e.callback&&e.callback()},function(){e.tokenReady=!0,e.callback&&e.callback()},!0)},e.prototype.isTokenReady=function(){return this.tokenReady},e}(),x=function(e){!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},O=function(e,t,n){void 0===e&&(e=[]),void 0===t&&(t=function(e){return e}),void 0===n&&(n=20);var i,r=[],o=0;return e.forEach(function(e){var s=t(e);void 0===i?i=s:(s!==i||r[o].length>=n)&&(o+=1,i=s),r[o]=r[o]||[],r[o].push(e)}),r},N=function(){function e(e,t,n,i,r){this.collect=e,this.cfg=n,this.config=t,this._token=i,this.appInfo=t.app_key||t.app_id,this.debugMode=!!t.log,this.evtDataKey=m(this.appInfo,!1);var o=t.channel_domain||d(h[t.channel]);if(this.reportUrl=t.report_url?t.report_url:""+o+p,this.storage=new l(!0),this.EventStorage=new l(!1),this.maxStorage=t.max_storage_num||-1,this.maxReport=t.max_report||20,this.closeStorage=!0,this.plugin=r,this.plugin){var s=t.enable_storage,a=t.disable_storage;(s||!1===a)&&(this.closeStorage=!1)}this.addListener()}return e.prototype.addListener=function(){var e=this;window.addEventListener("unload",function(){e.report(!0)},!1),x(this.report(!0)),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e.report(!0)},!1)},e.prototype.setReady=function(){this.isReady=!0,this.closeStorage||this.checkStorageEvent(),this.report()},e.prototype.event=function(e,t){var n=this;void 0===e&&(e=[]),void 0===t&&(t=!1);var i=this.storage.getItem(this.evtDataKey)||[],o=t?r(e,i):r(i,e);this.storage.setItem(this.evtDataKey,o),this.reportTimer&&clearTimeout(this.reportTimer),o.length>=this.maxReport?this.report():this.reportTimer=setTimeout(function(){n.report(),n.reportTimer=null},30)},e.prototype.report=function(e){if(void 0===e&&(e=!1),!this.collect.destroyInstance&&this._token.isTokenReady()&&this.isReady){var t=this.storage.getItem(this.evtDataKey)||[],n=this._mergeEvents(t);this.storage.removeItem(this.evtDataKey),this._dealData(n,e)}},e.prototype._mergeEvents=function(e){var n=this;if(!e.length)return e;var i=this.cfg.get();i.header.custom=JSON.stringify(i.header.custom);return O(e,function(e){return!n.closeStorage&&!!e.params.__disable_storage__},this.maxReport).map(function(e){return t({events:e.map(function(e){var i=t({},n.cfg.get("evtParams"),e.params);delete i.__disable_storage__;try{if(n.plugin&&n.plugin.ab&&n.plugin.ab.versions){var r=n.plugin.ab.versions.join(",");return t({},e,{params:JSON.stringify(i),ab_sdk_version:r})}return t({},e,{params:JSON.stringify(i)})}catch(n){return t({},e,{params:JSON.stringify(i)})}}),user:i.user,header:i.header},n.closeStorage?{}:{__disable_storage__:e[0].params.__disable_storage__},{verbose:n.debugMode?1:void 0,local_time:parseInt(""+(new Date).getTime()/1e3)})})},e.prototype._dealData=function(e,t){var n=this;if(!e.length)return e;var i=[];i=O(e,function(e){return!!e.__disable_storage__},this.maxReport),!this.closeStorage&&this.plugin.maxStorage&&this.plugin.maxStorage(i,this.maxStorage,this.evtDataKey,this.storage);var r={};i.forEach(function(e){var i=E();if(!n.closeStorage&&!e[0].__disable_storage__){var o=JSON.parse(JSON.stringify(e));o&&o[0]&&(o[0].header.__storage_index__=Date.now()),r[i]=o,n.EventStorage.setItem(n.evtDataKey,r)}n._send(i,e,t)})},e.prototype._send=function(e,t,n){var i=this;this.isSending=!0;var r=function(){i.isSending=!1};if(!this.closeStorage)try{t&&t[0]&&t[0].header.__storage_index__&&delete(t=JSON.parse(JSON.stringify(t)))[0].header.__storage_index__}catch(e){}this.plugin&&this.plugin.et_test&&this.plugin.et_test.send(t),I(this.reportUrl,t,this.config.app_key,function(){if(r(),i.plugin&&!i.closeStorage){var t=i.EventStorage.getItem(i.evtDataKey)||{};Object.keys(t).length?(delete t[e],i.EventStorage.setItem(i.evtDataKey,t)):i.EventStorage.removeItem(i.evtDataKey)}},function(e,t){r(),i.cfg.get("reportErrorCallback")(e,t),i.plugin&&i.plugin.monitor&&i.plugin.monitor.sdkError(i.config.app_key,i.reportUrl,e,t)},!1,n,r),this.plugin&&this.plugin.monitor&&this.plugin.monitor.sdkOnload(this.config.app_key,this.reportUrl,t)},e.prototype.checkStorageEvent=function(){var e=this;try{var t=this.EventStorage.getItem(this.evtDataKey)||{},n=Object.keys(t);if(n.length>0){setTimeout(function i(){for(var r=[],o=0;o<e.maxReport;o++)n.length>0&&r.push(n.shift());r.length>0&&r.forEach(function(n){e._send(n,t[n],!1)}),setTimeout(i,5)},5)}}catch(e){}},e}(),T=void 0,D=(new Date).getTimezoneOffset(),A=parseInt(""+-D/60,10),q=60*D,L="4.1.24",R=function(){function e(e,t){var n=o(!0,e);this.initConfig=t,this.envInfo={user:{user_unique_id:T,user_type:T,user_id:T,user_is_auth:T,user_is_login:T,device_id:T,web_id:T,ip_addr_id:T,ssid:T},header:{app_id:T,app_name:T,app_install_id:T,install_id:T,app_package:T,app_channel:T,app_version:T,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:T,ab_version:T,ab_sdk_version:T,traffic_type:T,client_ip:T,device_brand:T,os_api:T,access:T,language:n.language,region:T,app_language:T,app_region:T,creative_id:T,ad_id:T,campaign_id:T,log_type:T,rnd:T,platform:n.platform,sdk_version:L,province:T,city:T,timezone:A,tz_offset:q,tz_name:T,sim_region:T,carrier:T,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm_term,utm_content:n.utm_content,utm_source:n.utm_source,utm_medium:n.utm_medium,utm_campaign:n.utm_campaign,custom:{}}},this.evtParams={},this.reportErrorCallback=function(){}}return e.prototype.set=function(e,n){var i=this;if("disable_auto_pv"!==e)if("evtParams"===e||"_staging_flag"===e){var r;r="evtParams"===e?n:{_staging_flag:Number(n)};var o=t({},r);Object.keys(o).forEach(function(e){i.evtParams[e]=o[e]})}else if("reportErrorCallback"===e&&"function"==typeof n)this.reportErrorCallback=n;else{var s="";if(e.indexOf(".")>-1){var a=e.split(".");s=a[0],e=a[1]}if("user_unique_id"===e){if(!n)return;if(-1!==["0","Null","None","","undefined"].indexOf(n))return}if("os_version"===e&&(e=""+n),"web_id"===e){if(!n)return;(!this.envInfo.user.user_unique_id||this.envInfo.user.user_unique_id&&this.envInfo.user.user_unique_id===this.envInfo.user.web_id)&&(this.envInfo.user.user_unique_id=n)}s?"user"===s||"header"===s?this.envInfo[s][e]=n:this.envInfo.header.custom[e]=n:this.envInfo.user.hasOwnProperty(e)?["user_type","ip_addr_id"].indexOf(e)>-1?this.envInfo.user[e]=Number(n):["user_id","web_id","user_unique_id","ssid"].indexOf(e)>-1?this.envInfo.user[e]=String(n):["user_is_auth","user_is_login"].indexOf(e)>-1?this.envInfo.user[e]=Boolean(n):"device_id"===e&&(this.initConfig&&this.initConfig.channel&&"cn"===this.initConfig.channel?this.envInfo.user[e]=n:this.envInfo.user[e]=Number(n)):this.envInfo.header.hasOwnProperty(e)?this.envInfo.header[e]=n:this.envInfo.header.custom[e]=n}},e.prototype.get=function(e){return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this.reportErrorCallback:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))},e}(),P=function(){function e(e,t){this.isLog=t,this.name=e||""}var t=e.prototype;return t.info=function(e){this.isLog&&console.log("["+this.name+"] "+e)},t.warn=function(e){this.isLog&&console.warn("["+this.name+"] "+e)},t.error=function(e){this.isLog&&console.error("["+this.name+"] "+e)},t.throw=function(e){throw this.error(this.name),new Error(e)},e}();function M(e,t,n){return{title:t||document.title||location.pathname,url:n||location.href,url_path:e||location.pathname}}function B(){return Date.now()}function V(){var e=v();return window[e]?window[e].l:B()}function j(){var e=!1;return["hidden","msHidden","webkitHidden"].forEach(function(t){void 0!==document[t]&&(e=!0)}),e}var W=function(){function e(e,n){var i=this;this._sendEvent=function(e){void 0===e&&(e=!1);var n=e?i.options.aliveDTime:B()-i.sessionStartTime;B()-i.pageStartTime>i.options.maxDuration||(i.event("predefine_page_alive",t({},M(i.url_path,i.title,i.url),{duration:n/1e3,is_support_visibility_change:i.options.sup_vis_change?1:0})),i.sessionStartTime=B())},this._setUpTimer=function(){return i.timerHandler&&clearInterval(i.timerHandler),setInterval(function(){B()-i.sessionStartTime>i.options.aliveDTime&&i._sendEvent(!0)},1e3)},this._visibilitychange=function(){"hidden"===document.visibilityState?i.timerHandler&&(clearInterval(i.timerHandler),i._sendEvent()):"visible"===document.visibilityState&&(i.sessionStartTime=B(),i.timerHandler=i._setUpTimer())},this._beforeunload=function(){document.hidden||i._sendEvent()},this._wtest=function(){document.getElementById("wtest").innerHTML="visibilitychange"},this._dtest=function(){document.getElementById("dtest").innerHTML="dvisibilitychange"},this.event=e,this.config=n,this.isSupVisChange=j(),this.options={maxDuration:432e5,aliveDTime:6e4,sup_vis_change:j()},this.pageStartTime=V(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,this.disableCallback=function(){}}return e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this._enablePageAlive()},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype._enablePageAlive=function(){var e=this;return this.timerHandler=this._setUpTimer(),document.addEventListener("visibilitychange",this._visibilitychange),x(this._beforeunload),function(){e._beforeunload(),document.removeEventListener("visibilitychange",e._visibilitychange),window.removeEventListener("beforeunload",e._beforeunload),window.removeEventListener("pagehide",e._beforeunload)}},e}(),J=function(){function e(e,t){var n=this;this._visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=B():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=B())},this._beforeunload=function(){n.totalTime+=(n.activeEndTime||B())-n.activeStartTime,n._sendEventPageClose()},this.event=e,this.config=t,this.isSupVisChange=j(),this.options={sup_vis_change:this.isSupVisChange},this.maxDuration=t.maxDuration||864e5,this.disableCallback=function(){},this.pageStartTime=V(),this._resetData()}return e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this._enablePageClose()},e.prototype.disable=function(){this.disableCallback()},e.prototype._resetData=function(){this.activeStartTime=void 0===this.activeStartTime?V():Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0},e.prototype._sendEventPageClose=function(){var e=B()-this.pageStartTime;this.totalTime>=this.maxDuration||(this.event("predefine_page_close",t({},M(this.url_path,this.title,this.url),{active_times:this.activeTimes,duration:this.totalTime/1e3,total_duration:e/1e3,is_support_visibility_change:this.options.sup_vis_change?1:0})),this.pageStartTime=Date.now(),this._resetData())},e.prototype._enablePageClose=function(){var e=this;return document.addEventListener("visibilitychange",this._visibilitychange),x(this._beforeunload),function(){e._beforeunload(),document.removeEventListener("visibilitychange",e._visibilitychange),window.removeEventListener("beforeunload",e._beforeunload),window.removeEventListener("pagehide",e._beforeunload)}},e}(),H=function(){function e(e,t){this.pageAlive=new W(e,t),this.pageClose=new J(e,t),this._enable()}return e.prototype._enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype._disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.reset=function(e,t,n){this._disable(),this._enable(e,t,n)},e}();var U,F=function(){function e(e){var t=this;this._setInterval=function(){t._clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,i=Date.now()+t;return n=window.setTimeout(function r(){var o=Date.now()-i;e(),i+=t,n=window.setTimeout(r,Math.max(0,t-o))},t),function(){window.clearTimeout(n)}}(function(){t._isSessionhasEvent&&t._endCurrentSession()},t.sessionInterval)},this._clearInterval=function(){t._clearIntervalFunc&&t._clearIntervalFunc()},this.sessionInterval=6e4,this._eventSenderFunc=e,this._startTime=0,this._lastTime=0,this._setInterval()}return e.prototype._endCurrentSession=function(){this._eventSenderFunc("_be_active",{start_time:this._startTime,end_time:this._lastTime,url:window.location.href,referrer:window.document.referrer}),this._isSessionhasEvent=!1,this._startTime=0},e.prototype.process=function(){this._isSessionhasEvent||(this._isSessionhasEvent=!0,this._startTime=+new Date);var e=this._lastTime||+new Date;this._lastTime=+new Date,this._lastTime-e>this.sessionInterval&&(this._clearInterval(),this._endCurrentSession(),this._setInterval())},e}();!function(e){e.Normal="synchronize",e.Once="setOnce"}(U||(U={}));var K=function(){function e(e){var t,n=e.instance,i=e.appId,r=e.channel,o=e.app_key;this.instance=n,this.appId=i,this.app_key=o,this.channel=r,this.domain=this.getDomain(),this.urls=((t={})[U.Normal]=this.getUrl(U.Normal),t[U.Once]=this.getUrl(U.Once),t),this.autoId=0,this.lastId=0,this.lastOnceId=0,this.duration=1e4,this.data=null}return e.prototype.getDomain=function(){return d(_[this.channel].replace(/\/+$/,""))},e.prototype.getUrl=function(e){return this.domain+"/service/api/v3/userprofile/"+this.appId+"/"+e},e.prototype.getData=function(e){void 0===e&&(e={});var i=this.instance._config.get(),r=i.user,o=i.header,s=(o.headers,o.custom),a=n(o,["headers","custom"]);return{user:{web_id:r.web_id,ssid:r.ssid,user_unique_id:r.user_unique_id},header:t({},a||{}),profile:t({},s||{},e||{})}},e.prototype.start=function(){var e=this;this.autoId>0||(this.upPre(U.Normal),this.autoId=window.setInterval(function(){e.upPre(U.Normal)},this.duration))},e.prototype.stop=function(){this.autoId>0&&window.clearInterval(this.autoId)},e.prototype.setProfile=function(e){var t=Date.now();(!this.lastId||t-this.lastId>=this.duration)&&(this.instance.config(e),this.upPre(U.Normal,e),this.lastId=t)},e.prototype.setOnceProfile=function(e){var t=Date.now();(!this.lastOnceId||t-this.lastOnceId>=this.duration)&&(this.instance.config(e),this.upPre(U.Once,e),this.lastOnceId=t)},e.prototype.upPre=function(e,t){void 0===t&&(t={});var n=this.getData(t);this.data&&JSON.stringify(this.data)===JSON.stringify(n)||(this.up(this.urls[e],n),this.data=n)},e.prototype.up=function(e,t){I(e,t)},e}(),$=function(){function e(){}return e.prototype.sdkOnload=function(e,t,n){if(!this.sdkReady){this.sdkReady=!0;try{if(0===n.length)return;var i=n[0],r=i.header,o=i.user,s=r.app_id,a=r.app_name,u=r.sdk_version,c=o.web_id,l={events:[{event:"onload",params:JSON.stringify({app_key:e,app_id:s,app_name:a||"",sdk_version:u}),local_time_ms:Date.now()}],user:{user_unique_id:c},header:{}};setTimeout(function(){I(t,[l],"566f58151b0ed37e")},16)}catch(e){}}},e.prototype.sdkError=function(e,t,n,i){try{var r=n[0],o=r.user,s=r.header,a=[];n.forEach(function(e){e.events.forEach(function(e){a.push(e)})});var u={events:a.map(function(t){return{event:"on_error",params:JSON.stringify({error_code:i,app_key:e,app_id:s.app_id,app_name:s.app_name||"",error_event:t.event,local_time_ms:t.local_time_ms,tea_event_index:Date.now(),params:t.params,header:JSON.stringify(s),user:JSON.stringify(o)}),local_time_ms:Date.now()}}),user:{user_unique_id:o.user_unique_id},header:{}};setTimeout(function(){I(t,[u],"566f58151b0ed37e")},16)}catch(e){}},e}(),G=function(){var e=null;if(parent!==window)try{e=parent.location.href}catch(t){e=document.referrer}return e};var Q=new l(!1),X=function(e){return"__tea_sdk_ab_version_"+e},Z=function(e){var t={ab_version:[],data:null,timestamp:+new Date};try{t=Q.getItem(X(e))||t}catch(e){}return t},Y=function(e,n){try{var i=Z(e);Q.setItem(X(e),t({},i,n))}catch(e){}},ee=s(function(e){!function(t){var n,i,r,o,s,a,u,c,l,d,h,f,p,g,m,v,_,y,z,b="sizzle"+1*new Date,w=t.document,S=0,I=0,k=ce(),E=ce(),C=ce(),x=ce(),O=function(e,t){return e===t&&(h=!0),0},N={}.hasOwnProperty,T=[],D=T.pop,A=T.push,q=T.push,L=T.slice,R=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",V="\\["+M+"*("+B+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+M+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",W=new RegExp(M+"+","g"),J=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),H=new RegExp("^"+M+"*,"+M+"*"),U=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),F=new RegExp(M+"|>"),K=new RegExp(j),$=new RegExp("^"+B+"$"),G={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,ne=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){f()},ae=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{q.apply(T=L.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(t){q={apply:T.length?function(e,t){A.apply(e,L.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ue(e,t,n,r){var o,s,u,l,d,h,g,_=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(f(t),t=t||p,m)){if(11!==y&&(d=ee.exec(e)))if(o=d[1]){if(9===y){if(!(u=t.getElementById(o)))return n;if(u.id===o)return n.push(u),n}else if(_&&(u=_.getElementById(o))&&z(t,u)&&u.id===o)return n.push(u),n}else{if(d[2])return q.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&i.getElementsByClassName&&t.getElementsByClassName)return q.apply(n,t.getElementsByClassName(o)),n}if(i.qsa&&!x[e+" "]&&(!v||!v.test(e))&&(1!==y||"object"!==t.nodeName.toLowerCase())){if(g=e,_=t,1===y&&(F.test(e)||U.test(e))){for((_=te.test(e)&&me(t.parentNode)||t)===t&&i.scope||((l=t.getAttribute("id"))?l=l.replace(re,oe):t.setAttribute("id",l=b)),s=(h=a(e)).length;s--;)h[s]=(l?"#"+l:":scope")+" "+_e(h[s]);g=h.join(",")}try{return q.apply(n,_.querySelectorAll(g)),n}catch(t){x(e,!0)}finally{l===b&&t.removeAttribute("id")}}}return c(e.replace(J,"$1"),t,n,r)}function ce(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function le(e){return e[b]=!0,e}function de(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return le(function(t){return t=+t,le(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(n in i=ue.support={},s=ue.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},f=ue.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:w;return o!=p&&9===o.nodeType&&o.documentElement?(g=(p=o).documentElement,m=!s(p),w!=p&&(n=p.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",se,!1):n.attachEvent&&n.attachEvent("onunload",se)),i.scope=de(function(e){return g.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),i.attributes=de(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=de(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=Y.test(p.getElementsByClassName),i.getById=de(function(e){return g.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length}),i.getById?(r.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},r.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},_=[],v=[],(i.qsa=Y.test(p.querySelectorAll))&&(de(function(e){var t;g.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),de(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),g.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(i.matchesSelector=Y.test(y=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&de(function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),_.push("!=",j)}),v=v.length&&new RegExp(v.join("|")),_=_.length&&new RegExp(_.join("|")),t=Y.test(g.compareDocumentPosition),z=t||Y.test(g.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==p||e.ownerDocument==w&&z(w,e)?-1:t==p||t.ownerDocument==w&&z(w,t)?1:d?R(d,e)-R(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e==p?-1:t==p?1:r?-1:o?1:d?R(d,e)-R(d,t):0;if(r===o)return fe(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?fe(s[i],a[i]):s[i]==w?-1:a[i]==w?1:0},p):p},ue.matches=function(e,t){return ue(e,null,null,t)},ue.matchesSelector=function(e,t){if(f(e),i.matchesSelector&&m&&!x[t+" "]&&(!_||!_.test(t))&&(!v||!v.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){x(t,!0)}return ue(t,p,null,[e]).length>0},ue.contains=function(e,t){return(e.ownerDocument||e)!=p&&f(e),z(e,t)},ue.attr=function(e,t){(e.ownerDocument||e)!=p&&f(e);var n=r.attrHandle[t.toLowerCase()],o=n&&N.call(r.attrHandle,t.toLowerCase())?n(e,t,!m):void 0;return void 0!==o?o:i.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ue.escape=function(e){return(e+"").replace(re,oe)},ue.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ue.uniqueSort=function(e){var t,n=[],r=0,o=0;if(h=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(O),h){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return d=null,e},o=ue.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(r=ue.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ue.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ue.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&K.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=ue.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(W," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var c,l,d,h,f,p,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!u&&!a,y=!1;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&_){for(y=(f=(c=(l=(d=(h=m)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===S&&c[1])&&c[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){l[e]=[S,f,y];break}}else if(_&&(y=f=(c=(l=(d=(h=t)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===S&&c[1]),!1===y)for(;(h=++f&&h&&h[g]||(y=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(_&&((l=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[S,y]),h!==t)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ue.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,o=i(e,t),s=o.length;s--;)e[r=R(e,o[s])]=!(n[r]=o[s])}):function(e){return i(e,0,n)}):i}},pseudos:{not:le(function(e){var t=[],n=[],i=u(e.replace(J,"$1"));return i[b]?le(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return ue(e,t).length>0}}),contains:le(function(e){return e=e.replace(ne,ie),function(t){return(t.textContent||o(t)).indexOf(e)>-1}}),lang:le(function(e){return $.test(e||"")||ue.error("unsupported lang: "+e),e=e.replace(ne,ie).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===g},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,n){return[n<0?n+t:n]}),even:ge(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ge(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ge(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:ge(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[n]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(n);for(n in{submit:!0,reset:!0})r.pseudos[n]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(n);function ve(){}function _e(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ye(e,t,n){var i=t.dir,r=t.next,o=r||i,s=n&&"parentNode"===o,a=I++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,u){var c,l,d,h=[S,a];if(u){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,u))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(l=(d=t[b]||(t[b]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=l[o])&&c[0]===S&&c[1]===a)return h[2]=c[2];if(l[o]=h,h[2]=e(t,n,u))return!0}return!1}}function ze(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function be(e,t,n,i,r){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),c&&t.push(a)));return s}function we(e,t,n,i,r,o){return i&&!i[b]&&(i=we(i)),r&&!r[b]&&(r=we(r,o)),le(function(o,s,a,u){var c,l,d,h=[],f=[],p=s.length,g=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ue(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:be(g,h,e,a,u),v=n?r||(o?e:p||i)?[]:s:m;if(n&&n(m,v,a,u),i)for(c=be(v,f),i(c,[],a,u),l=c.length;l--;)(d=c[l])&&(v[f[l]]=!(m[f[l]]=d));if(o){if(r||e){if(r){for(c=[],l=v.length;l--;)(d=v[l])&&c.push(m[l]=d);r(null,v=[],c,u)}for(l=v.length;l--;)(d=v[l])&&(c=r?R(o,d):h[l])>-1&&(o[c]=!(s[c]=d))}}else v=be(v===s?v.splice(p,v.length):v),r?r(null,s,v,u):q.apply(s,v)})}function Se(e){for(var t,n,i,o=e.length,s=r.relative[e[0].type],a=s||r.relative[" "],u=s?1:0,c=ye(function(e){return e===t},a,!0),d=ye(function(e){return R(t,e)>-1},a,!0),h=[function(e,n,i){var r=!s&&(i||n!==l)||((t=n).nodeType?c(e,n,i):d(e,n,i));return t=null,r}];u<o;u++)if(n=r.relative[e[u].type])h=[ye(ze(h),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return we(u>1&&ze(h),u>1&&_e(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(J,"$1"),n,u<i&&Se(e.slice(u,i)),i<o&&Se(e=e.slice(i)),i<o&&_e(e))}h.push(n)}return ze(h)}function Ie(e,t){var n=t.length>0,i=e.length>0,o=function(o,s,a,u,c){var d,h,g,v=0,_="0",y=o&&[],z=[],b=l,w=o||i&&r.find.TAG("*",c),I=S+=null==b?1:Math.random()||.1,k=w.length;for(c&&(l=s==p||s||c);_!==k&&null!=(d=w[_]);_++){if(i&&d){for(h=0,s||d.ownerDocument==p||(f(d),a=!m);g=e[h++];)if(g(d,s||p,a)){u.push(d);break}c&&(S=I)}n&&((d=!g&&d)&&v--,o&&y.push(d))}if(v+=_,n&&_!==v){for(h=0;g=t[h++];)g(y,z,s,a);if(o){if(v>0)for(;_--;)y[_]||z[_]||(z[_]=D.call(u));z=be(z)}q.apply(u,z),c&&!o&&z.length>0&&v+t.length>1&&ue.uniqueSort(u)}return c&&(S=I,l=b),y};return n?le(o):o}ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,a=ue.tokenize=function(e,t){var n,i,o,s,a,u,c,l=E[e+" "];if(l)return t?0:l.slice(0);for(a=e,u=[],c=r.preFilter;a;){for(s in n&&!(i=H.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=U.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(J," ")}),a=a.slice(n.length)),r.filter)!(i=G[s].exec(a))||c[s]&&!(i=c[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ue.error(e):E(e,u).slice(0)},u=ue.compile=function(e,t){var n,i=[],r=[],o=C[e+" "];if(!o){for(t||(t=a(e)),n=t.length;n--;)(o=Se(t[n]))[b]?i.push(o):r.push(o);(o=C(e,Ie(r,i))).selector=e}return o},c=ue.select=function(e,t,n,i){var o,s,c,l,d,h="function"==typeof e&&e,f=!i&&a(e=h.selector||e);if(n=n||[],1===f.length){if((s=f[0]=f[0].slice(0)).length>2&&"ID"===(c=s[0]).type&&9===t.nodeType&&m&&r.relative[s[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(ne,ie),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(o=G.needsContext.test(e)?0:s.length;o--&&(c=s[o],!r.relative[l=c.type]);)if((d=r.find[l])&&(i=d(c.matches[0].replace(ne,ie),te.test(s[0].type)&&me(t.parentNode)||t))){if(s.splice(o,1),!(e=i.length&&_e(s)))return q.apply(n,i),n;break}}return(h||u(e,f))(i,t,!m,n,!t||te.test(e)&&me(t.parentNode)||t),n},i.sortStable=b.split("").sort(O).join("")===b,i.detectDuplicates=!!h,f(),i.sortDetached=de(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),de(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||he("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&de(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||he("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),de(function(e){return null==e.getAttribute("disabled")})||he(P,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null});var ke=t.Sizzle;ue.noConflict=function(){return t.Sizzle===ue&&(t.Sizzle=ke),ue},e.exports?e.exports=ue:t.Sizzle=ue}(window)}),te=function(){function e(e,t){this.closeOverLay=!1,this.domInScreen=[],this.domOutScreen=[],this.abInstance=e,this.elementList=t,this.windowSize=this.getWindowSize()}return e.prototype.query=function(e){try{if(document.querySelector)return document.querySelector(e);var t=ee(e);return t&&t.length?t[0]:null}catch(e){return null}},e.prototype.init=function(){var e=this;try{this.elementList&&this.elementList.length?(this.elementList.map(function(t){var n=e.query(t.selector);n&&e.inScreen(n,t)}),this.domInScreen.length&&(this.domInScreen.map(function(t){e.render(t.dom,t.elementItem)}),this.domInScreen=[],this.closeOverLay||(this.abInstance.closeOverlayer(),this.closeOverLay=!0)),this.domOutScreen.length&&(this.domOutScreen.map(function(t){e.render(t.dom,t.elementItem)}),this.domOutScreen=[])):console.log("no abtest config")}catch(e){console.log("init error: "+JSON.stringify(e))}},e.prototype.render=function(e,t){if("true"!==e.getAttribute("data-ab-visual")){for(var n in t){if("text"===n&&(e.innerHTML=t[n]),"style"===n)for(var i in t[n])e.style[i]=t[n][i];if("attrs"===n)for(var r in t[n])e[r]=t[n][r]}e.setAttribute("data-ab-visual","true")}},e.prototype.inScreen=function(e,t){var n=this.windowSize,i=n.windowHeight,r=n.windowWidth,o=e.getBoundingClientRect&&e.getBoundingClientRect();o&&o.width>0&&o.height>0&&o.top<=i&&o.left<=r?this.domInScreen.push({dom:e,elementItem:t}):this.domOutScreen.push({dom:e,elementItem:t})},e.prototype.getWindowSize=function(){var e={windowHeight:window.outerHeight||screen.height,windowWidth:window.outerWidth||screen.width},t=document.documentElement||document.body;return[window.innerWidth,t.clientWidth].filter(function(t){return t&&t>e.windowWidth&&t/e.windowWidth>=2}).forEach(function(t){var n=t/e.windowHeight;e.windowHeight=e.windowHeight*n,e.windowWidth=e.windowWidth*n}),e},e}(),ne=function(){function e(e,t){this.linster(),this.select=new te(t,e),this.select.init()}return e.prototype.linster=function(){var e=this,t=window.MutationObserver;if(t)try{this.observer=new t(function(t){t&&t.length&&e.select.init()}),this.observer.observe(document,{childList:!0,subtree:!0})}catch(e){console.log("mutationObserver err")}else console.log("you browser is not support mutationObserver")},e}(),ie={},re=[],oe=function(e){e.length&&e.forEach(function(e){re.push(e)})};function se(e,t,n,i){var r=e&&e.source||window.opener||window.parent,o=e&&e.origin||i||"*",s={type:t,payload:n};r.postMessage(JSON.stringify(s),o)}function ae(e){if(re.some(function(e){return"*"===e})||re.some(function(t){return e.origin.indexOf(t)>-1})){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t=void 0}if(!t)return;var n=t.type,i=t.payload;ie[n]&&ie[n].forEach(function(t){"function"==typeof t&&t(e,i)})}}window.TEAVisualEditor=window.TEAVisualEditor||{};var ue,ce,le="",de=!1;function he(e){var t,n,i,r,o=e.event,s=e.editorUrl;e.collectInstance,e.fromSession;de||(de=!0,t=s,n=function(){se(o,"abEditorScriptloadSuccess")},i=function(){o&&se(o,"abEditorScriptloadError"),de=!1},(r=document.createElement("script")).src=t,r.onerror=function(){i(t)},r.onload=function(){n()},document.getElementsByTagName("head")[0].appendChild(r))}function fe(e,t,n){oe(["*"]);var i,r,o=n,s="";if((window.opener||window.parent).postMessage("[tea-sdk]ready","*"),window.addEventListener("message",ae,!1),o){var a,u=window.performance.getEntriesByType("resource");try{u&&u.length&&u.forEach(function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(a=e.name.split("/"))&&a.length&&(s="https://"+a[2]+"/"+a[3]+"/"+a[4]+"/"+a[5]+"/visual-editor-ab")})}catch(e){}}r=function(n){var i=n.data;if("string"==typeof n.data)try{i=JSON.parse(n.data)}catch(e){i=void 0}if(i){var r=i.lang;if(i.appId!==t)return se(n,"appIdError"),void console.error("abtest appid is not belong the page appid please check");if(o){var a=i.version;le=s?""+s+(a?"."+a:".1.0.1")+".js":d(b)}else le=d(b);window.TEAVisualEditor.lang=r,he({event:n,editorUrl:le,collectInstance:e})}},ie[i="tea:openVisualABEditor"]=ie[i]||[],ie[i].push(r)}!function(e){e[e.No=0]="No",e[e.Ing=1]="Ing",e[e.Complete=2]="Complete"}(ue||(ue={})),function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(ce||(ce={}));var pe,ge=function(){function e(e){this.appId=0,this.user={},this.header={},this.domain="",this.protocal=location.protocol,this.fetchStatus=ue.No,this.callbacks=[],this.data=null,this.versions=[],this.collector=e;var t=this.collector._initConfig,n=t.app_id,i=t.channel,r=t.enable_multilink,o=t.multilink_timeout_ms,s=t.ab_channel_domain,a=t.channel_domain,u=t.enable_ab_visual;if(this.appId=n,this.domain=s||d(y[i||"cn"]),this.needOverlay=r||u||!1,this.enable_ab_visual=u,this.enable_multilink=r,this.closeTime=o||500,this.reportUrl=""+d(h[i])+p,u){fe(e,this.appId,a);var c=G();if(c&&-1!==c.indexOf("rangers"))return void this.collector.destroy()}this._check(),this.wait()}return e.prototype.init=function(e){if(!this.collector.destroyInstance){var i=e.user,r=e.header,o=n(r,[]);this.user=t({},i),this.header=t({},r),this._fetch(t({},o))}},e.prototype.wait=function(){var e=this;this.needOverlay&&(this.isWait||(this.openOverlayer(),this.isWait=!0),setTimeout(function(){e.closeOverlayer()},this.closeTime))},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:ce.All};this.fetchStatus===ue.Complete?this._getAllVars(t):this.callbacks.push(t)},e.prototype.getVar=function(e,t,n){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var i={name:e,defaultValue:t,callback:n,type:ce.Var};this.fetchStatus===ue.Complete?(this._getVar(i),this._updateVersions()):this.callbacks.push(i)},e.prototype.openOverlayer=function(){!function(){if(!document.getElementById(z)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=z,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}()},e.prototype.closeOverlayer=function(){var e;(e=document.getElementById(z))&&e.parentElement.removeChild(e)},e.prototype._check=function(){var e=this,t=function(e){var t=Z(e),n=t.timestamp;if(Date.now()-n>=2592e6){try{Q.removeItem("__tea_sdk_ab_version")}catch(e){}return null}return t}(this.appId);if(t){var n=t.ab_version,i=t.data;n&&n.length&&(this.versions=n,this.data=i,setTimeout(function(){e._configVersions()}))}},e.prototype._fetchComplete=function(e){var t=this;if(e){!function(e,t){Y(e,{data:t})}(this.appId,e),this.data=e;var n=[];Object.keys(e).forEach(function(t){var i=e[t].vid;i&&n.push(i)}),this.versions=this.versions.filter(function(e){return n.includes(e)});var i=e.$ab_url,r=e.$ab_modification;if(r&&r.val&&this.enable_ab_visual){if(this.collector.destroyInstance)return;this.getVar("$ab_modification",window.location.href,function(){t.visual=new ne(r.val,t)})}else if(i&&this.enable_multilink){var o=i.val,s=i.vid;o&&s&&this.getVar("$ab_url",window.location.href,function(){o!==window.location.href?setTimeout(function(){if(!t.collector.destroyInstance){var e=""+o;e=-1===e.indexOf("http")?"https://"+e:e,window.location.href=e}},50):t.closeOverlayer()})}else this.closeOverlayer()}this.callbacks.forEach(function(e){return t[e.type===ce.Var?"_getVar":"_getAllVars"](e)}),this.callbacks=[],this._updateVersions(),this.isWait||this.closeOverlayer()},e.prototype._abEvent=function(e){var n=this;try{if(e){var i={event:"abtest_exposure",ab_sdk_version:e,params:JSON.stringify({app_id:this.appId,ab_url:window.location.href}),local_time_ms:Date.now()},r=t({},this.header);r.ab_sdk_version=e;var o={events:[i],user:this.user,header:r};setTimeout(function(){I(n.reportUrl,[o],"")},16)}}catch(e){}},e.prototype._getAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{})},e.prototype._getVar=function(e){var t=e.name,n=e.defaultValue,i=e.callback,r=this.data;if(r){if("object"==typeof r[t]&&void 0!==r[t].val){i(r[t].val);var o=r[t].vid;return this._abEvent(o),void(this.versions.includes(o)||this.versions.push(o))}i(n)}else i(n)},e.prototype._updateVersions=function(){var e,t;e=this.appId,t=this.versions,Y(e,{ab_version:t,timestamp:Date.now()}),this._configVersions()},e.prototype._configVersions=function(){var e=this.versions.join(",");e&&this.collector.config({ab_sdk_version:e})},e.prototype._url=function(){return this.domain+"/service/2/abtest_config/"},e.prototype._fetch=function(e,n){var i=this,r=void 0===n?{}:n,o=r.success,s=void 0===o?function(){}:o,a=r.fail,u=void 0===a?function(){}:a;this.fetchStatus=ue.Ing,w(this._url(),{header:t({aid:this.appId},this.user||{},e||{},{ab_sdk_version:this.versions.join(","),ab_url:window.location.href})},function(e){i.fetchStatus=ue.Complete;var t=e.data;"success"===e.message?(i._fetchComplete(t),s(t)):(i._fetchComplete(null),u())},function(){i.fetchStatus=ue.Complete,u(),i._fetchComplete(null)},"",3e3)},e}(),me=function(e,t,n,i){if(t){var r=e.filter(function(e){return!e[0].__disable_storage__}).length;if(r>0)try{var o=i.getItem(n);if(o){var s=Object.keys(o),a=s.length+r-t;if(a>0){for(var u=s.map(function(e){var t=o[e];return{id:e,index:t&&t[0]?t[0].header.__storage_index__:+new Date}}).sort(function(e,t){return e.index-t.index}),c=0;c<a;c++){var l=u.shift();l&&l.id&&o[l.id]&&delete o[l.id]}i.setItem(n,o)}}}catch(e){}}},ve=function(){return function(e,t,n){t&&(t.enable_stay_duration&&(this.stay=new H(n,t)),t.auto_profile&&t.channel&&(this.profile=new K({instance:e,app_key:t.app_key,appId:t.app_id,channel:t.channel})),t.disable_session||(this.session=new F(n)),t.disable_sdk_monitor||(this.monitor=new $),t.enable_ab_test&&(this.ab=new ge(e)),t.max_storage_num&&(this.maxStorage=me))}}(),_e=r(["init","config","send","start","predefinePageView","resetStayDuration","autoInitializationRangers"],["setProfile","setOnceProfile","getVar","openOverlayer","closeOverlayer","getAllVars","getToken","destroy"]),ye=(pe=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return pe+=1}),ze=function(){function e(e){var n=this;this.predefinePageView=function(e){void 0===e&&(e={});var i=t({title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer},n._event.closeStorage?{}:{__disable_storage__:1}),r=t({},i,e);n.event("predefine_pageview",r,!0)},this.getToken=function(e){var i;n._token.isTokenReady()&&(i=n._config.get().user,e(t({},i)))},this.name=e,this._isSend=!1,this.autoPV=!0}return e.prototype.autoInitializationRangers=function(e){},e.prototype.init=function(e){var t=this;if(!this._inited){if(this._inited=!0,!e||"object"!=typeof e)throw new Error("init params is error,please check");var n=e.app_id,i=e.app_key,r=e.log;this._config=new R(n,e),this.logger=new P(this.name,r),i||n||this.logger.throw("no app_key or app_id please check !!!"),n&&"number"!=typeof n&&this.logger.throw("app_id param is error,must be number,please check !!!"),i&&"string"!=typeof i&&this.logger.warn("app_key is empty"),e.channel_domain||-1!==["cn","sg","va"].indexOf(e.channel)||this.logger.throw("channel must be `cn`, `sg`,`va` !!!"),this._config.set("app_id",n),e.channel=e.channel?e.channel:"cn",this._initConfig=e,this._token=new C(e,this._config),this._token.callback=function(){t.callbackSend?t.start():t._event&&t._event.report()},this.plugin=new ve(this,e,this.event.bind(this)),this._event=new N(this,e,this._config,this._token,this.plugin),this._token._getToken()}},e.prototype.config=function(e){if(this._inited)if(e&&"object"==typeof e){if(e.user_unique_id){"string"!=typeof e.user_unique_id&&this.logger.warn("user_unique_id must be string!!! please check");try{var t=String(e.user_unique_id);this._token._getSsid(t)}catch(e){}}for(var n in e.disable_auto_pv&&(this.autoPV=!1),e)this._config.set(n,e[n])}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},e.prototype.send=function(){this.start()},e.prototype.start=function(){if(this._token.isTokenReady()){if(this._isSend)return;this._isSend=!0,this.logger.info("userInfo:"+JSON.stringify(this._config.get("user"))),this.logger.info("sdk is ready, you can report now !!!"),this._event.setReady(),this.autoPV&&this.predefinePageView(),this.plugin&&this.plugin.profile&&this.plugin.profile.start(),this.plugin&&this.plugin.ab&&this.plugin.ab.init(this._config.get())}else this.callbackSend=!0},e.prototype.event=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o="boolean"==typeof t[t.length-1]&&t[t.length-1],s="boolean"==typeof t[t.length-1]?t.slice(0,t.length-1):t,a=i(s,1)[0],u=[];"Array"!==Object.prototype.toString.call(a).slice(8,-1)?u[0]=s:u=s;u=u.map(function(e){return function(e,t,n){(void 0===n?{}:n).isBav;var i=e;/^event\./.test(e)&&(i=e.slice(6));var r=t;return"object"!=typeof r&&(r={}),r.event_index=ye(),{event:i,params:r,local_time_ms:r.local_ms||+new Date,is_bav:0}}(e[0],e[1],{isBav:!1})}),this._event.event(u,o),this.plugin&&this.plugin.session&&(e=this.plugin.session).process.apply(e,r(t))},e.prototype.resetStayDuration=function(e,t,n){!this.plugin||this.plugin.stay?this.plugin&&this.plugin.stay&&this.plugin.stay.reset(e,t,n):this.logger.info("stayDuration is not init")},e.prototype.setProfile=function(e){this.plugin&&this.plugin.profile&&this.plugin.profile.setProfile(e)},e.prototype.setOnceProfile=function(e){this.plugin&&this.plugin.profile&&this.plugin.profile.setOnceProfile(e)},e.prototype.getVar=function(e,t,n){this.plugin&&this.plugin.ab&&this.plugin.ab.getVar(e,t,n)},e.prototype.openOverlayer=function(){this.plugin&&this.plugin.ab&&this.plugin.ab.openOverlayer()},e.prototype.closeOverlayer=function(){this.plugin&&this.plugin.ab&&this.plugin.ab.closeOverlayer()},e.prototype.getAllVars=function(e){this.plugin&&this.plugin.ab&&this.plugin.ab.getAllVars(e)},e.prototype.destroy=function(){this.destroyInstance||(this.destroyInstance=!0)},e}();function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=function(e){var t=this;return be(this,"_exportCollect",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t._isProcess?t._executeCmd.apply(t,n):(t.cmdQueue.push(n),t._processCmd())}),be(this,"_processCmd",function(){if(0!==t.cmdQueue.length){var e,n,i,r,o;n=t.cmdQueue,i="init",r="0",o=-1,n.forEach(function(e,t){(void 0!==r?e[r]:e)===i&&(o=t)}),-1!==(e=o)&&(t._isProcess=!0,t._executeCmd.apply(t,t.cmdQueue[e]),t.cmdQueue.forEach(function(n,i){i!==e&&t._executeCmd.apply(t,n)}),t.cmdQueue=[])}}),be(this,"_executeCmd",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r,o,s=n[0];_e.indexOf(s)>-1?(r=t.colloctor)[s].apply(r,n.slice(1)):(o=t.colloctor).event.apply(o,n)}),this.cmdQueue=[],this.name=e,this.colloctor=new ze(e),this._isProcess=!1,this._alias={},this._processCmd(),_e.forEach(function(e){t._exportCollect[e]=t._exportCollect.bind(t,e)}),this._exportCollect},Se={},Ie={},ke=function(e){return Ie[e]||(Ie[e]=[]),Ie[e]},Ee=function(e){try{var t=i(e),n=t[0],o=t.slice(1);if(!n)return void console.error("the eventName is: "+n+", error, stop report, please check");var s=n.split(".");if(1===s.length)ke("default").push(r([n],o));else if(2===s.length)"event"===s[0]?ke("default").push(r([n],o)):ke(s[0]).push(r([s[1]],o));else{var a=s[0],u=[s[1],s[2]].join(".");ke(a).push(r([u],o))}}catch(e){console.log(e)}},Ce=function(){xe.q.forEach(function(e){var t=[].slice.call(e);"Array"===Object.prototype.toString.call(t[0]).slice(8,-1)?t.forEach(function(e){Ee(e)}):Ee(t)}),Object.keys(Ie).forEach(function(e){Ie[e].forEach(function(t){(function(e){return Se[e]||(Se[e]=new we(e)),Se[e]})(e).apply(void 0,r(t))}),Ie[e]=[]}),xe.q=[]},xe=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.q.push(t),Ce()};xe.q=[],xe.l=Date.now(),xe._instanceMap=Se,xe._instanceCmdMap=Ie,_e.forEach(function(e){xe[e]=xe.bind(null,e)}),function(e){if("undefined"!=typeof window){var t=v();if(t&&window[t]){var n=window[t];n.init||(e.q=n.q||[],e.l=n.l||Date.now(),window[t]=e)}}}(xe),Ce();var Oe=we;return e.Collector=Oe,e.default=xe,e}({});