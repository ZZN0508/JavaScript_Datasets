define("dropbox/proto/js_init_data/checkout/checkout_page",["require","exports","tslib","protobufjs/minimal"],function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkout_page=void 0;var u=(r=a.__importStar(r)).Reader,n=r.Writer,c=r.util,d=r.roots.default||(r.roots.default={});t.default=d,t.checkout_page=d.checkout_page=((a=d.checkout_page||{}).Offering=function(t){function t(e){if(this.licenseOfferingIds={},this.addonOfferingIds={},e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.planOfferingId="",t.prototype.licenseOfferingIds=c.emptyObject,t.prototype.addonOfferingIds=c.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t=t||n.create(),null!=e.planOfferingId&&Object.hasOwnProperty.call(e,"planOfferingId")&&t.uint32(10).string(e.planOfferingId),null!=e.licenseOfferingIds&&Object.hasOwnProperty.call(e,"licenseOfferingIds"))for(var a=Object.keys(e.licenseOfferingIds),r=0;r<a.length;++r)t.uint32(18).fork().uint32(10).string(a[r]).uint32(16).int32(e.licenseOfferingIds[a[r]]).ldelim();if(null!=e.addonOfferingIds&&Object.hasOwnProperty.call(e,"addonOfferingIds"))for(a=Object.keys(e.addonOfferingIds),r=0;r<a.length;++r)t.uint32(26).fork().uint32(10).string(a[r]).uint32(16).int32(e.addonOfferingIds[a[r]]).ldelim();return t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.Offering;e.pos<a;){var n,o=e.uint32();switch(o>>>3){case 1:r.planOfferingId=e.string();break;case 2:r.licenseOfferingIds===c.emptyObject&&(r.licenseOfferingIds={});for(var i=e.uint32()+e.pos,s="",l=0;e.pos<i;)switch((n=e.uint32())>>>3){case 1:s=e.string();break;case 2:l=e.int32();break;default:e.skipType(7&n)}r.licenseOfferingIds[s]=l;break;case 3:for(r.addonOfferingIds===c.emptyObject&&(r.addonOfferingIds={}),i=e.uint32()+e.pos,s="",l=0;e.pos<i;)switch((n=e.uint32())>>>3){case 1:s=e.string();break;case 2:l=e.int32();break;default:e.skipType(7&n)}r.addonOfferingIds[s]=l;break;default:e.skipType(7&o)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.Offering"},t}(a.Offering||{}),a.CheckoutRevenueApiPathwayEnum=(r={},(t=Object.create(r))[r[0]="LEGACY_READ_WRITE"]=0,t[r[1]="DUAL_READ_LEGACY_WRITE"]=1,t[r[2]="DUAL_READ_DUAL_WRITE"]=2,t[r[3]="DUAL_READ_REVAPI_WRITE"]=3,t[r[4]="REVAPI_READ_WRITE"]=4,t),a.CheckoutExperimentProps=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.proBizMve="",t.prototype.paymentPayPalV2Flow="",t.prototype.checkoutRevenueApiPathway=0,t.prototype.checkoutNewOrderSummary="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.proBizMve&&Object.hasOwnProperty.call(e,"proBizMve")&&t.uint32(18).string(e.proBizMve),null!=e.paymentPayPalV2Flow&&Object.hasOwnProperty.call(e,"paymentPayPalV2Flow")&&t.uint32(26).string(e.paymentPayPalV2Flow),null!=e.checkoutRevenueApiPathway&&Object.hasOwnProperty.call(e,"checkoutRevenueApiPathway")&&t.uint32(40).int32(e.checkoutRevenueApiPathway),null!=e.checkoutNewOrderSummary&&Object.hasOwnProperty.call(e,"checkoutNewOrderSummary")&&t.uint32(58).string(e.checkoutNewOrderSummary),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.CheckoutExperimentProps;e.pos<a;){var n=e.uint32();switch(n>>>3){case 2:r.proBizMve=e.string();break;case 3:r.paymentPayPalV2Flow=e.string();break;case 5:r.checkoutRevenueApiPathway=e.int32();break;case 7:r.checkoutNewOrderSummary=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.CheckoutExperimentProps"},t}(a.CheckoutExperimentProps||{}),a.MonthlyPrice=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.price="",t.prototype.duration="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.price&&Object.hasOwnProperty.call(e,"price")&&t.uint32(10).string(e.price),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&t.uint32(18).string(e.duration),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.MonthlyPrice;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.price=e.string();break;case 2:r.duration=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.MonthlyPrice"},t}(a.MonthlyPrice||{}),a.AnnualPrice=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.price="",t.prototype.priceAsMonthly="",t.prototype.duration="",t.prototype.savings="",t.prototype.withoutSavings="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.price&&Object.hasOwnProperty.call(e,"price")&&t.uint32(10).string(e.price),null!=e.priceAsMonthly&&Object.hasOwnProperty.call(e,"priceAsMonthly")&&t.uint32(18).string(e.priceAsMonthly),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&t.uint32(26).string(e.duration),null!=e.savings&&Object.hasOwnProperty.call(e,"savings")&&t.uint32(34).string(e.savings),null!=e.withoutSavings&&Object.hasOwnProperty.call(e,"withoutSavings")&&t.uint32(42).string(e.withoutSavings),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.AnnualPrice;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.price=e.string();break;case 2:r.priceAsMonthly=e.string();break;case 3:r.duration=e.string();break;case 4:r.savings=e.string();break;case 5:r.withoutSavings=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.AnnualPrice"},t}(a.AnnualPrice||{}),a.FeatureItem=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.text="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&t.uint32(10).string(e.text),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.FeatureItem;e.pos<a;){var n=e.uint32();n>>>3==1?r.text=e.string():e.skipType(7&n)}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.FeatureItem"},t}(a.FeatureItem||{}),a.IncludedFeaturesContents=function(t){function t(e){if(this.items=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.title="",t.prototype.items=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t=t||n.create(),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(10).string(e.title),null!=e.items&&e.items.length)for(var a=0;a<e.items.length;++a)d.checkout_page.FeatureItem.encode(e.items[a],t.uint32(18).fork()).ldelim();return t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.IncludedFeaturesContents;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.title=e.string();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(d.checkout_page.FeatureItem.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.IncludedFeaturesContents"},t}(a.IncludedFeaturesContents||{}),a.PageUrl=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.buyLink="",t.prototype.trialLink="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.buyLink&&Object.hasOwnProperty.call(e,"buyLink")&&t.uint32(10).string(e.buyLink),null!=e.trialLink&&Object.hasOwnProperty.call(e,"trialLink")&&t.uint32(18).string(e.trialLink),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.PageUrl;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.buyLink=e.string();break;case 2:r.trialLink=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.PageUrl"},t}(a.PageUrl||{}),a.TrialInfo=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.trialDuration=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.trialDuration&&Object.hasOwnProperty.call(e,"trialDuration")&&t.uint32(8).int32(e.trialDuration),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.TrialInfo;e.pos<a;){var n=e.uint32();n>>>3==1?r.trialDuration=e.int32():e.skipType(7&n)}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.TrialInfo"},t}(a.TrialInfo||{}),a.AdditionalTermsOfService=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.tosTitle="",t.prototype.tosLink="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.tosTitle&&Object.hasOwnProperty.call(e,"tosTitle")&&t.uint32(10).string(e.tosTitle),null!=e.tosLink&&Object.hasOwnProperty.call(e,"tosLink")&&t.uint32(18).string(e.tosLink),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.AdditionalTermsOfService;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.tosTitle=e.string();break;case 2:r.tosLink=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.AdditionalTermsOfService"},t}(a.AdditionalTermsOfService||{}),a.TeamInfo=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.companySize="",t.prototype.teamName="",t.prototype.teamNumUsers=0,t.prototype.phone="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.companySize&&Object.hasOwnProperty.call(e,"companySize")&&t.uint32(10).string(e.companySize),null!=e.teamName&&Object.hasOwnProperty.call(e,"teamName")&&t.uint32(18).string(e.teamName),null!=e.teamNumUsers&&Object.hasOwnProperty.call(e,"teamNumUsers")&&t.uint32(24).int32(e.teamNumUsers),null!=e.phone&&Object.hasOwnProperty.call(e,"phone")&&t.uint32(34).string(e.phone),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.TeamInfo;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.companySize=e.string();break;case 2:r.teamName=e.string();break;case 3:r.teamNumUsers=e.int32();break;case 4:r.phone=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.TeamInfo"},t}(a.TeamInfo||{}),a.MultiLicensePlanInfo=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.teamInfo=null,t.prototype.minLicenseCount=0,t.prototype.maxLicenseCount=0,t.prototype.eligibleForTrial=!1,t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.teamInfo&&Object.hasOwnProperty.call(e,"teamInfo")&&d.checkout_page.TeamInfo.encode(e.teamInfo,t.uint32(10).fork()).ldelim(),null!=e.minLicenseCount&&Object.hasOwnProperty.call(e,"minLicenseCount")&&t.uint32(16).int32(e.minLicenseCount),null!=e.maxLicenseCount&&Object.hasOwnProperty.call(e,"maxLicenseCount")&&t.uint32(24).int32(e.maxLicenseCount),null!=e.eligibleForTrial&&Object.hasOwnProperty.call(e,"eligibleForTrial")&&t.uint32(32).bool(e.eligibleForTrial),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.MultiLicensePlanInfo;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.teamInfo=d.checkout_page.TeamInfo.decode(e,e.uint32());break;case 2:r.minLicenseCount=e.int32();break;case 3:r.maxLicenseCount=e.int32();break;case 4:r.eligibleForTrial=e.bool();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.MultiLicensePlanInfo"},t}(a.MultiLicensePlanInfo||{}),a.Addon=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.id=0,t.prototype.displayName="",t.prototype.displayPrice="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int32(e.id),null!=e.displayName&&Object.hasOwnProperty.call(e,"displayName")&&t.uint32(18).string(e.displayName),null!=e.displayPrice&&Object.hasOwnProperty.call(e,"displayPrice")&&t.uint32(26).string(e.displayPrice),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.Addon;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.id=e.int32();break;case 2:r.displayName=e.string();break;case 3:r.displayPrice=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.Addon"},t}(a.Addon||{}),a.SingleAddonSelectorInfo=function(t){function t(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.title="",t.prototype.description="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t=t||n.create(),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(10).string(e.title),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.SingleAddonSelectorInfo;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.title=e.string();break;case 2:r.description=e.string();break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.SingleAddonSelectorInfo"},t}(a.SingleAddonSelectorInfo||{}),a.AddonSelector=function(t){function t(e){if(this.addons=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}var e,a;return t.prototype.id=0,t.prototype.type=0,t.prototype.addons=c.emptyArray,t.prototype.singleSelectorInfo=null,Object.defineProperty(t.prototype,"selectorInfo",{get:c.oneOfGetter(a=["singleSelectorInfo"]),set:c.oneOfSetter(a)}),t.create=function(e){return new t(e)},t.encode=function(e,t){if(t=t||n.create(),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int32(e.id),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.addons&&e.addons.length)for(var a=0;a<e.addons.length;++a)d.checkout_page.Addon.encode(e.addons[a],t.uint32(26).fork()).ldelim();return null!=e.singleSelectorInfo&&Object.hasOwnProperty.call(e,"singleSelectorInfo")&&d.checkout_page.SingleAddonSelectorInfo.encode(e.singleSelectorInfo,t.uint32(34).fork()).ldelim(),t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.AddonSelector;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.id=e.int32();break;case 2:r.type=e.int32();break;case 3:r.addons&&r.addons.length||(r.addons=[]),r.addons.push(d.checkout_page.Addon.decode(e,e.uint32()));break;case 4:r.singleSelectorInfo=d.checkout_page.SingleAddonSelectorInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.AddonSelector"},t.AddonSelectorId=(e={},(a=Object.create(e))[e[0]="UNKNOWN_SELECTOR_ID"]=0,a[e[1]="PLUS_EXTENDED_VERSION_HISTORY_180_DAYS"]=1,a),t.AddonSelectorType=(e={},(a=Object.create(e))[e[0]="UNKNOWN_SELECTOR_TYPE"]=0,a[e[1]="SINGLE_SELECTOR"]=1,a[e[2]="MULTI_SELECTOR"]=2,a),t}(a.AddonSelector||{}),a.UiProduct=function(t){function t(e){if(this.addonSelectorsForMonthlyBilling=[],this.addonSelectorsForAnnualBilling=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return t.prototype.productPlan="",t.prototype.name="",t.prototype.namePrefixedWithDropbox="",t.prototype.priceMonthly=null,t.prototype.priceAnnual=null,t.prototype.quota="",t.prototype.pageUrl=null,t.prototype.included=null,t.prototype.paymentSchedule="",t.prototype.showYearlyPricePerMonth=!1,t.prototype.vatEnabled=!1,t.prototype.trialInfo=null,t.prototype.planColor="",t.prototype.additionalTermsOfService=null,t.prototype.multiLicensePlanInfo=null,t.prototype.addonSelectorsForMonthlyBilling=c.emptyArray,t.prototype.addonSelectorsForAnnualBilling=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t=t||n.create(),null!=e.productPlan&&Object.hasOwnProperty.call(e,"productPlan")&&t.uint32(10).string(e.productPlan),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.namePrefixedWithDropbox&&Object.hasOwnProperty.call(e,"namePrefixedWithDropbox")&&t.uint32(26).string(e.namePrefixedWithDropbox),null!=e.priceMonthly&&Object.hasOwnProperty.call(e,"priceMonthly")&&d.checkout_page.MonthlyPrice.encode(e.priceMonthly,t.uint32(34).fork()).ldelim(),null!=e.priceAnnual&&Object.hasOwnProperty.call(e,"priceAnnual")&&d.checkout_page.AnnualPrice.encode(e.priceAnnual,t.uint32(42).fork()).ldelim(),null!=e.quota&&Object.hasOwnProperty.call(e,"quota")&&t.uint32(50).string(e.quota),null!=e.pageUrl&&Object.hasOwnProperty.call(e,"pageUrl")&&d.checkout_page.PageUrl.encode(e.pageUrl,t.uint32(58).fork()).ldelim(),null!=e.included&&Object.hasOwnProperty.call(e,"included")&&d.checkout_page.IncludedFeaturesContents.encode(e.included,t.uint32(66).fork()).ldelim(),null!=e.paymentSchedule&&Object.hasOwnProperty.call(e,"paymentSchedule")&&t.uint32(74).string(e.paymentSchedule),null!=e.showYearlyPricePerMonth&&Object.hasOwnProperty.call(e,"showYearlyPricePerMonth")&&t.uint32(80).bool(e.showYearlyPricePerMonth),null!=e.vatEnabled&&Object.hasOwnProperty.call(e,"vatEnabled")&&t.uint32(88).bool(e.vatEnabled),null!=e.trialInfo&&Object.hasOwnProperty.call(e,"trialInfo")&&d.checkout_page.TrialInfo.encode(e.trialInfo,t.uint32(98).fork()).ldelim(),null!=e.planColor&&Object.hasOwnProperty.call(e,"planColor")&&t.uint32(106).string(e.planColor),null!=e.additionalTermsOfService&&Object.hasOwnProperty.call(e,"additionalTermsOfService")&&d.checkout_page.AdditionalTermsOfService.encode(e.additionalTermsOfService,t.uint32(114).fork()).ldelim(),null!=e.multiLicensePlanInfo&&Object.hasOwnProperty.call(e,"multiLicensePlanInfo")&&d.checkout_page.MultiLicensePlanInfo.encode(e.multiLicensePlanInfo,t.uint32(122).fork()).ldelim(),null!=e.addonSelectorsForMonthlyBilling&&e.addonSelectorsForMonthlyBilling.length)for(var a=0;a<e.addonSelectorsForMonthlyBilling.length;++a)d.checkout_page.AddonSelector.encode(e.addonSelectorsForMonthlyBilling[a],t.uint32(130).fork()).ldelim();if(null!=e.addonSelectorsForAnnualBilling&&e.addonSelectorsForAnnualBilling.length)for(a=0;a<e.addonSelectorsForAnnualBilling.length;++a)d.checkout_page.AddonSelector.encode(e.addonSelectorsForAnnualBilling[a],t.uint32(138).fork()).ldelim();return t},t.decode=function(e,t){e instanceof u||(e=u.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new d.checkout_page.UiProduct;e.pos<a;){var n=e.uint32();switch(n>>>3){case 1:r.productPlan=e.string();break;case 2:r.name=e.string();break;case 3:r.namePrefixedWithDropbox=e.string();break;case 4:r.priceMonthly=d.checkout_page.MonthlyPrice.decode(e,e.uint32());break;case 5:r.priceAnnual=d.checkout_page.AnnualPrice.decode(e,e.uint32());break;case 6:r.quota=e.string();break;case 7:r.pageUrl=d.checkout_page.PageUrl.decode(e,e.uint32());break;case 8:r.included=d.checkout_page.IncludedFeaturesContents.decode(e,e.uint32());break;case 9:r.paymentSchedule=e.string();break;case 10:r.showYearlyPricePerMonth=e.bool();break;case 11:r.vatEnabled=e.bool();break;case 12:r.trialInfo=d.checkout_page.TrialInfo.decode(e,e.uint32());break;case 13:r.planColor=e.string();break;case 14:r.additionalTermsOfService=d.checkout_page.AdditionalTermsOfService.decode(e,e.uint32());break;case 15:r.multiLicensePlanInfo=d.checkout_page.MultiLicensePlanInfo.decode(e,e.uint32());break;case 16:r.addonSelectorsForMonthlyBilling&&r.addonSelectorsForMonthlyBilling.length||(r.addonSelectorsForMonthlyBilling=[]),r.addonSelectorsForMonthlyBilling.push(d.checkout_page.AddonSelector.decode(e,e.uint32()));break;case 17:r.addonSelectorsForAnnualBilling&&r.addonSelectorsForAnnualBilling.length||(r.addonSelectorsForAnnualBilling=[]),r.addonSelectorsForAnnualBilling.push(d.checkout_page.AddonSelector.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/checkout_page.UiProduct"},t}(a.UiProduct||{}),a)}),define("modules/clean/auth/common/captcha",["require","exports","tslib","classnames","react","modules/clean/react/components/css","modules/clean/abuse/captcha_helper"],function(a,e,r,t,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Captcha=e.CaptchaComponent=e.clear_captcha_response=e.handle_captcha_errors=e.get_captcha_responses=void 0,t=r.__importDefault(t),n=r.__importDefault(n),e.get_captcha_responses=function(e){e=e.getWrappedComponent();return{"g-recaptcha-response":e.recaptcha_response,"funcaptcha-response":e.funcaptcha_response}},e.handle_captcha_errors=function(e,t){return e.getWrappedComponent().handle_captcha_errors(t)},e.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()};var s,l=(s=n.default.Component,r.__extends(u,s),u.prototype.handle_captcha_errors=function(e){var t=this;return!(!e||!e.funcaptcha_response||(new Promise(function(e,t){a(["modules/clean/abuse/funcaptcha_modal"],e,t)}).then(r.__importStar).then(function(e){(0,e.openFuncaptchaModal)(t.props.email||"",t.props.source,function(e){t.funcaptcha_response=e,t.props.onSubmit()},t.props.onReady)}),0))},u.prototype.clear_captcha_response=function(){this.funcaptcha_response=void 0},u.prototype.componentDidMount=function(){i.LoadRecaptcha(void 0,!0)},u.prototype.render=function(){return n.default.createElement("div",{ref:"container_div",className:t.default({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},n.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))},u.prototype.submit=function(){this.clear_captcha_response(),this.props.onSubmit()},u);function u(e){return s.call(this,e)||this}e.CaptchaComponent=l,e.Captcha=o.requireCssWithComponent(l,["/static/css/recaptcha-vflIN6j39.css"])}),define("modules/clean/auth/common/utils",["require","exports","tslib","modules/constants/page_load","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/form_util/name_parser"],function(e,n,t,a,r,o,i,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.notifyCaptchaNotLoaded=n.twoFactorRecoveryUrl=n.getFormattedName=n.lastNameGoesFirst=n.generateId=void 0,s=t.__importDefault(s),n.generateId=function(e){return e+Math.random().toString().slice(2)};var l=["ja","ko","zh"];n.lastNameGoesFirst=function(){return l.includes(a.USER_LOCALE.slice(0,2))},n.getFormattedName=function(e,t,a){if(!a)return[e,t];var r=s.default.splitFullName(e),a=r[0],r=r[1];return n.lastNameGoesFirst()?r?[r,a]:[e,t]:[a,r]},n.twoFactorRecoveryUrl=function(e,t){var a=new i.URI({path:"/twofactor_recovery"});return e&&a.updateQuery({remember_me:e.toString()}),t&&!["/",""].includes(t)&&a.updateQuery({cont:t}),a.toString()},n.notifyCaptchaNotLoaded=function(){o.Notify.warning(r.intl.formatMessage({id:"977N0X",defaultMessage:"Your browser appears to be blocking dropboxcaptcha.com, which is required for authentication. To resolve this issue, please update any anti-virus or ad-blocking software settings to allow connections to dropboxcaptcha.com."}))}}),define("modules/clean/components/password_strength_meter",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/components/css","modules/clean/react/bubble_dropdown_v2","modules/clean/web_timing_logger","modules/core/cancelable_promise","modules/clean/react/sticky_position"],function(a,e,r,n,o,i,t,s,l,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PasswordStrengthMeter=void 0,n=r.__importDefault(n),o=r.__importDefault(o);var d,p=(d=n.default.Component,r.__extends(m,d),m.prototype.componentWillUnmount=function(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},m.prototype.render=function(){var e=this.props.password,a=e.length?Math.max(1,this.getPasswordScore(e)):0,t=["",i.intl.formatMessage({id:"i/ragh",defaultMessage:"Weak"}),i.intl.formatMessage({id:"GwYES8",defaultMessage:"So-so"}),i.intl.formatMessage({id:"Yd7c8F",defaultMessage:"Good"}),i.intl.formatMessage({id:"kbsmZh",defaultMessage:"Great!"})],e=(e=this.props.bubbleDescription)||i.intl.formatMessage({id:"6SDr7W",defaultMessage:"Passwords must be 6 characters or more. Good passwords are hard to guess and use uncommon words, numbers, symbols, and uppercase letters."});return n.default.createElement("div",{className:"password-input-meter "+this.props.className,tabIndex:-1,"aria-label":i.intl.formatMessage({id:"7h/xn+",defaultMessage:"Password strength"})},[4,3,2,1].map(function(e){var t=o.default({"password-input-dot":!0,"password-input-dot-selected--weak":e<=a&&a<=2,"password-input-dot-selected":e<=a});return n.default.createElement("div",{key:"password-input-dot-"+e,className:t})}),n.default.createElement(s.BubbleDropdown,{position:this.props.bubblePosition||c.StickyPosition.RIGHT,targetButton:n.default.createElement("button",{className:"password-bubble__button"}),className:this.props.bubbleClassName},n.default.createElement("div",{className:"password-bubble__content"},n.default.createElement("div",{className:"password-bubble__title"},t[a]||""),n.default.createElement("div",{className:"password-bubble__desc"},e))))},m);function m(e){var t=d.call(this,e)||this;return t.setZxcvbn=function(e){e=e.default;t.setState({zxcvbn:e})},t.getPasswordScore=function(e){return t.state.zxcvbn?t.state.zxcvbn(e).score:0},t.state={},e.zxcvbnPostTti?l.waitForTTI().then(function(){t.zxcvbnPromise=u.makeCancelable(new Promise(function(e,t){a(["zxcvbn"],e,t)}).then(r.__importStar)),t.zxcvbnPromise.then(t.setZxcvbn)}):(t.zxcvbnPromise=u.makeCancelable(new Promise(function(e,t){a(["zxcvbn"],e,t)}).then(r.__importStar)),t.zxcvbnPromise.then(t.setZxcvbn)),t}e.PasswordStrengthMeter=t.requireCssWithComponent(p,["/static/css/components/password_strength_meter-vfljnpJyO.css"])}),define("modules/clean/react/payments/buy/components/buy_component",["require","exports","tslib","react","modules/core/i18n","modules/clean/web_timing_logger","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/buy_purchase_form","modules/clean/react/payments/buy/components/headline","modules/clean/react/payments/buy/components/buy_navigation","react-intl","modules/clean/react/payments/buy/components/payments/async_sox_compliance_warning","modules/clean/react/rebrand/elements/rebrand_arbor_footer_components_lazy","modules/clean/react/payments/buy/components/promos/promo_banner","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary","modules/clean/react/payments/buy/components/promos/promo_utils","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils","classnames"],function(e,t,P,k,b,a,r,N,S,v,o,i,C,E,T,w,F,I,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuyComponent=void 0,k=P.__importDefault(k),M=P.__importDefault(M);var n,s=(n=k.default.Component,P.__extends(l,n),l.prototype.componentDidMount=function(){a.mark_time_to_interactive()},l.prototype.renderCheckOutForm=function(){var e=this.props,t=e.actions,a=e.checkoutFormProps,r=e.experiments,n=e.formData,o=e.pageState,i=e.pricingState,s=e.productPlanType,l=e.showTrialVersion,u=e.useAUTaxInclusivePricing,c=e.userIsEligibleForProfessionalTrial,d=a.braintreeClientToken,p=a.ccIframeUrl,m=a.continueURI,f=a.countryCode,y=a.countryList,h=a.currencyToFormatMap,g=a.defaultPlan,_=a.hideNavigationSteps,P=a.idealBanks,b=a.locale,S=a.localeNumberFormat,v=a.productOfferings,C=a.serializedPaymentFormSpec,E=a.showMarketingOptInIfNewAccount,T=a.supportedProducts,e=a.taxNamesByCountry,a=a.userInfo;return k.default.createElement(N.BuyPurchaseForm,{defaultPlan:g,supportedProducts:T,actions:t,braintreeClientToken:d,ccIframeUrl:p,continueURI:m,countryCode:f,countryList:y,currencyToFormatMap:h,experiments:r,formData:n,hideNavigationSteps:_,idealBanks:P,locale:b,localeNumberFormat:S,pageState:o,productPlanType:s,productOfferings:v,pricingState:i,taxNamesByCountry:e,userInfo:a,serializedPaymentFormSpec:C,showMarketingOptInIfNewAccount:E,showTrialVersion:l,useAUTaxInclusivePricing:!!u,userIsEligibleForProfessionalTrial:c,submitFormSuccess:o.submitFormSuccess,orderSummaryRedesignRef:this.orderSummaryRedesignRef})},Object.defineProperty(l.prototype,"selectedPlanBasePrice",{get:function(){var e=this.props,t=e.pricingState,a=e.formData,e=t.displayPrices,t=e.baseYearlyPrice,e=e.baseMonthlyPrice,a=a.scheduleId.formattedValue;return a===r.ScheduleId.YEARLY&&t?t.formatCurrency():a===r.ScheduleId.MONTHLY&&e?e.formatCurrency():void 0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"selectedPlanTotalPrice",{get:function(){var e=this.props,t=e.pricingState,a=e.formData,e=t.displayPrices,t=e.yearlyPrice,e=e.monthlyPrice,a=a.scheduleId.formattedValue;return a===r.ScheduleId.YEARLY&&t?t.formatCurrency():a===r.ScheduleId.MONTHLY&&e?e.formatCurrency():void 0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"selectedDiscountAmount",{get:function(){var e=this.props,t=e.pricingState,a=e.formData,e=t.displayPrices,t=e.yearlyDiscountAmount,e=e.monthlyDiscountAmount,a=a.scheduleId.formattedValue;return a===r.ScheduleId.YEARLY&&t?t.formatCurrency():a===r.ScheduleId.MONTHLY&&e?e.formatCurrency():void 0},enumerable:!1,configurable:!0}),l.prototype.renderCheckoutPageContent=function(){var e=this.props,t=e.checkoutFormProps,a=t.hideNavigationSteps,r=t.supportedProducts,n=t.defaultPlan,o=t.taxNamesByCountry,i=e.purchaseHeadline,s=e.pageState.promoSpec,l=e.experiments,u=e.productPlanType,c=e.formData,d=e.pricingState,p=e.showTrialVersion,m=d.currentTransitionPrices,f=m.taxAmount,y=m.taxCountryCode,h=m.currency,g=m.totalPrice,_=m.withheldTaxAmount,t=m.taxPlanId,e=T.getSelectedUiProduct(r,u),m=e.namePrefixedWithDropbox,u=e.name,e=c.scheduleId.formattedValue,l="ON"===l.checkoutNewOrderSummary,n=T.getProductPlanType(n),r=T.getSelectedUiProduct(r,n).namePrefixedWithDropbox,n=M.default("DropboxBuyPage__promo-banner",{"DropboxBuyPage__promo-banner--redesign":l}),i=l?b.intl.formatMessage({id:"zV8ze+",defaultMessage:"Checkout"}):i,r=k.default.createElement(k.default.Fragment,null,k.default.createElement(S.DropboxBuyHeadlineWeb,{isOrderSummaryRedesign:l,headlineText:i}),k.default.createElement(v.BuyNavigation,{hideSteps:a,currentStep:2}),l&&s&&k.default.createElement("div",{className:n},k.default.createElement(E.PromoBanner,{promoSpec:s,fullPlanName:r})),k.default.createElement("section",{className:"DropboxBuyPage__form grid__container"},this.renderCheckOutForm())),s=s&&F.shouldShowPromoInOrderSummary(e,s)?P.__assign(P.__assign({},s),{discountAmount:this.selectedDiscountAmount}):void 0,t=I.getOrderSummaryTaxesSpec(f,_,y,o,t);return l?k.default.createElement("div",null,k.default.createElement("div",{className:"grid__item--medium--11-24"},r),k.default.createElement(w.OrderSummary,{planSchedule:c.scheduleId.formattedValue,planName:m,currency:h,basePrice:this.selectedPlanBasePrice,totalPrice:this.selectedPlanTotalPrice,billedPrice:null==g?void 0:g.toString(),selectedAddons:c.selectedAddons.formattedValue,addonPricing:d.addonPricing,isTrial:!!p,trialEndDate:c.trialEndDate.formattedValue,orderSummaryPromoSpec:s,orderSummaryTaxSpec:t,selectedPlanNameNoDropbox:u,containerRef:this.orderSummaryRedesignRef})):k.default.createElement("div",null,r,k.default.createElement(C.LazyRebrandArborMinimalFooter,{localeSelectorWithoutCss:!0}))},l.prototype.render=function(){var e=this.props,t=e.checkoutFormProps,a=t.defaultPlan,r=t.supportedProducts,n=e.SOXComplianceMessage,t=e.pageState.promoSpec,e=e.experiments,a=T.getProductPlanType(a),a=T.getSelectedUiProduct(r,a).namePrefixedWithDropbox,e="ON"===e.checkoutNewOrderSummary;return k.default.createElement("main",{className:"DropboxBuyPage__content grid__container grid--x-left"},k.default.createElement(o.RawIntlProvider,{value:b.intl},k.default.createElement("div",{className:"DropboxBuyPage__header-placeholder"}),t&&!e&&k.default.createElement("div",{className:"DropboxBuyPage__promo-banner"},k.default.createElement(E.PromoBanner,{promoSpec:t,fullPlanName:a})),n&&k.default.createElement(i.AsyncSOXComplianceBanner,{message:n}),this.renderCheckoutPageContent()))},l);function l(e){e=n.call(this,e)||this;return e.orderSummaryRedesignRef=k.default.createRef(),e}t.BuyComponent=s}),define("modules/clean/react/payments/buy/components/checkout_page",["require","exports","tslib","react","modules/clean/deprecated_ajax/ajax_jquery","modules/core/exception","modules/core/notify","modules/core/browser","modules/clean/payments/skus/pricing_data","modules/clean/payments/skus/subscription_change_plan","proto_utils/unpack","modules/clean/web_timing_logger","modules/clean/web_timing_logger","modules/clean/analytics","modules/clean/react/payments/common/adapters/setup_cash","modules/clean/react/payments/buy/state/checkout_store_creator","modules/clean/react/payments/buy/actions/buy_actions_creator","modules/clean/react/payments/buy/reducers/reducers","modules/clean/react/payments/buy/components/addons/addon_utils","modules/clean/react/payments/buy/components/buy_component","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/payments/skus/constants","dropbox/proto/js_init_data/checkout/checkout_page"],function(r,e,d,p,m,f,y,h,g,_,o,n,i,P,s,l,t,u,c,b,S,v,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RootComponent=e.CheckoutPage=void 0,p=d.__importDefault(p),m=d.__importStar(m),f=d.__importStar(f),h=d.__importStar(h),n=d.__importStar(n);var C,E=a.checkout_page.CheckoutRevenueApiPathwayEnum,T=a.checkout_page.CheckoutExperimentProps,k=a.checkout_page.UiProduct,N=a.checkout_page.Offering,w=(C=p.default.Component,d.__extends(F,C),F.prototype.getStoreProps=function(){var e=this.props,t=e.checkoutFormProps,a=e.requestId,r=e.showTrialVersion,n=e.promoSpec,o=e.marketingTracker,i=t.defaultPlan,s=S.getProductPlanType(i),l={productPlanType:s,showTrialVersion:Boolean(r)},e=S.getSelectedUiProduct(t.supportedProducts,s),i=e.trialInfo,r=e.multiLicensePlanInfo,e=c.getAvailableAddons(v.ScheduleId.YEARLY,e,{});return{countryCode:t.countryCode,locale:t.locale,userInfo:t.userInfo,trialLength:i?i.trialDuration:0,serializedPaymentFormSpec:t.serializedPaymentFormSpec,serializedSubChangePlans:void 0,baseSubChangePlans:null===(i=null===(i=this.state)||void 0===i?void 0:i.checkoutStoreState)||void 0===i?void 0:i.pricingState.baseSubChangePlans,productPlanType:s,navState:l,showMarketingOptInIfNewAccount:t.showMarketingOptInIfNewAccount,showTrialVersion:l.showTrialVersion,requestId:a,marketingTracker:o,promoSpec:n,multiLicensePlanInfo:null!=r?r:null,availableAddons:e}},Object.defineProperty(F.prototype,"actions",{get:function(){return t.bindCheckoutActions(this.store)},enumerable:!1,configurable:!0}),F.prototype.componentDidMount=function(){var e=this.props,t=e.checkoutFormProps.defaultPlan;e.experiments.checkoutRevenueApiPathway,E.LEGACY_READ_WRITE,m.SilentBackgroundRequest({url:"/growth/log_visit_ajax",type:"POST",data:d.__assign({endpoint:"buy_"+t,log_preauth:!0,additional_preauth_types:"preauth_pro_upgrade"},this.props.loggingProps)}),this.fetchInitialPlansData()},F.prototype.fetchInitialPlansData=function(){var r,e,n,t=this,a=this.props,o=a.checkoutFormProps,i=o.defaultPlan,s=o.userInfo,l=o.supportedProducts,u=a.showTrialVersion,c=this.state.checkoutStoreState,o=c.navState.productPlanType,a=c.pageState,c=a.promoSpec;n=a.isMultiSeatPlan?(e=S.getSelectedUiProduct(l,o),r="/business/ajax_fetch_sub_change_plans",e={is_trial:u,product_plan:i,code:null==c?void 0:c.cashCode,user_info:JSON.stringify(s),team_info:JSON.stringify(e.multiLicensePlanInfo.teamInfo)},g.PricingDataException.notifyErrorMessage):(r="/pro/ajax_fetch_sub_change_plans",l=Object.keys(l),e={product_plans:JSON.stringify(l)},g.PricingDataException.notifyErrorMessagePersonal),m.WebRequest({type:"POST",url:r,data:e,success:function(e){e=JSON.parse(e);0===e.length?(y.Notify.error(n,20),f.reportException({err:new Error(r+" returned 0 Subscription Change Plans"),severity:f.SEVERITY.NONCRITICAL})):(e=e.map(function(e){return _.SubscriptionChangePlan.deserialize(e)}),t.actions.loadSubChangePlans(e))},error:function(e,t,a){"CurrencyMismatch"===a?(P.ProEventsLogger.log("checkout_page_currency_mismatch"),h.redirect("/account/billing?modal=billing_info&reason=auto_convert")):0!==e.status&&(y.Notify.error(n,20),e=r+" failed to return Subscription Change Plans (status: "+e.status+")",f.reportException({err:new Error(e),severity:f.SEVERITY.CRITICAL}))}})},F.prototype.render=function(){var e=this.props,t=e.checkoutFormProps,a=e.experiments,r=e.purchaseHeadline,n=e.SOXComplianceMessage,o=e.useAUTaxInclusivePricing,i=e.userIsEligibleForProfessionalTrial,s=this.state.checkoutStoreState,l=s.navState,u=l.productPlanType,c=l.showTrialVersion,e=s.formData,l=s.pageState,s=s.pricingState,i={actions:this.actions,experiments:a,formData:e,pageState:l,productPlanType:u,showTrialVersion:c,SOXComplianceMessage:n,checkoutFormProps:t,purchaseHeadline:r,pricingState:s,useAUTaxInclusivePricing:o,userIsEligibleForProfessionalTrial:i};return p.default.createElement(b.BuyComponent,d.__assign({},i))},F);function F(e){var a=C.call(this,e)||this,t=e.checkoutFormProps,e=e.webTimingLoggerServerContext;s.setupCash(t.localeNumberFormat,t.currencyToFormatMap),e&&n.initialize_module(d.__assign({log_time_to_interactive:!0,log_time_to_view:!0,ttv_at_dom_interactive:!0,tti_at_dom_interactive:!0},e));e=a.getStoreProps();return a.store=l.configureStore(e,u.CheckoutReducer),a.state={checkoutStoreState:a.store.getState()},a.store.subscribe(function(){a.setState({checkoutStoreState:a.store.getState()})}),null!==(e=a.state.checkoutStoreState.pageState.marketingTracker)&&void 0!==e&&e.initData&&i.waitForTTI().then(function(){new Promise(function(e,t){r(["modules/clean/marketing_tracker"],e,t)}).then(d.__importStar).then(function(e){var t=e.MarketingTracker;null!==(e=a.state.checkoutStoreState.pageState.marketingTracker)&&void 0!==e&&e.initData&&t.push(a.state.checkoutStoreState.pageState.marketingTracker.initData)})}),a}e.CheckoutPage=w,e.RootComponent=function(e){var t=d.__assign({},e),a=e.checkoutFormProps,r=a.productOfferings,n=a.supportedProducts;return t.experiments=o.unpackProto(e.experiments,T),t.checkoutFormProps.productOfferings=null==r?void 0:r.map(function(e){return o.unpackProto(e,N)}),t.checkoutFormProps.supportedProducts=Object.keys(n).reduce(function(e,t){return d.__assign(d.__assign({},e),((e={})[t]=o.unpackProto(n[t],k),e))},{}),p.default.createElement(w,d.__assign({},t))}}),define("modules/clean/react/payments/buy/components/headline",["require","exports","tslib","classnames","react"],function(e,t,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropboxBuyHeadlineWeb=void 0,n=a.__importDefault(n),o=a.__importDefault(o),t.DropboxBuyHeadlineWeb=function(e){var t=e.headlineText,a=e.subheadlineText,r=n.default({DropboxBuyPage__headline:!0,grid__container:!0,"DropboxBuyPage__headline--redesign":e.isOrderSummaryRedesign}),e=n.default({DropboxBuyPage__subheadline:!0,grid__container:!0}),a=a?o.default.createElement("h2",{className:e},a):null;return o.default.createElement(o.default.Fragment,null,o.default.createElement("h1",{className:r},t),a)}}),define("modules/clean/react/payments/buy/components/included_features",["require","exports","tslib","classnames","react"],function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IncludedFeatures=void 0,r=a.__importDefault(r),n=a.__importDefault(n),t.IncludedFeatures=function(e){var t=e.content,e=r.default({"included-features":!0,grid__container:!0});return n.default.createElement("div",{className:e},n.default.createElement("p",{className:"included-features__title grid__item"},t.title),n.default.createElement("ul",{className:"included-features__list grid__container"},t.items.map(function(e,t){return n.default.createElement("li",{className:"included-features__feature grid__item--1-2",key:"included-"+t},e.text)})))}}),define("modules/clean/react/payments/buy/components/buy_navigation",["require","exports","tslib","classnames","react","react-intl","spectrum-arbor/atoms/arbor_link/index"],function(e,t,o,i,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuyNavigation=void 0,i=o.__importDefault(i),s=o.__importDefault(s);var c=l.defineMessages({step:{id:"HfKKgw",defaultMessage:"Step {step}"},axLabel:{id:"cYlduc",defaultMessage:"Current step is {current_step} of {total_steps}"}});t.BuyNavigation=function(e){var t=e.currentStep,a=e.hideSteps,r=i.default("DropboxBuyPage__steps","grid__container"),n=i.default("DropboxBuyPage__step",{"DropboxBuyPage__step--currentStep":1===t,"DropboxBuyPage__step--clickable":2===t}),e=i.default("DropboxBuyPage__step",{"DropboxBuyPage__step--currentStep":2===t});return s.default.createElement("div",{className:r},a?null:s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:"ax-visually-hidden"},s.default.createElement(l.FormattedMessage,o.__assign({},c.axLabel,{values:{current_step:t,total_steps:2}}))),s.default.createElement("span",{"aria-hidden":"true"},1===t?s.default.createElement("span",{className:n,"data-testid":"step",key:"step-1"},s.default.createElement(l.FormattedMessage,o.__assign({},c.step,{values:{step:1}}))):s.default.createElement(u.ArborLink,{className:n,"data-testid":"step",key:"step-1",href:"/buy"},s.default.createElement(l.FormattedMessage,o.__assign({},c.step,{values:{step:1}}))),s.default.createElement("span",{className:e,"data-testid":"step",key:"step-2"},s.default.createElement(l.FormattedMessage,o.__assign({},c.step,{values:{step:2}}))))))}}),define("modules/clean/react/payments/common/middleware/pro_buy_logger",["require","exports","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/payments/payment_form/payment_form_spec"],function(e,t,T,k,N){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proBuyLogger=void 0,t.proBuyLogger=function(_){var P,b,S,v,C,E=["UpdateFirstName","UpdateLastName","UpdateEmail","UpdatePassword","UpdateZipCode","UpdateAccountHolderName","UpdateIBAN"];return function(g){return function(t){try{var e=g(t),a=t.type,r=_.getState(),n=r.pageState,o=r.pricingState,i=r.formData,s=r.navState,l=void 0;if(-1!==E.indexOf(a)&&b===a)return e;"UpdateTransitionsStart"===a?P=(new Date).getTime():"UpdateTransitionsSuccess"!==a&&"UpdateTransitionsError"!==a||(l=(((new Date).getTime()-P)/1e3).toFixed(1));var u={type:a,submitButtonState:n.submitting||o.loadingPrices?"disabled":"enabled"};if(void 0!==l&&(u.roundtrip=l),"UpdateSchedule"===a){var c="Unknown";i.scheduleId.rawValue===k.ScheduleId.MONTHLY?c="SelectMonthly":i.scheduleId.rawValue===k.ScheduleId.YEARLY&&(c="SelectYearly"),u.event=c}else if("UpdatePaymentMethod"===a){var d="Unknown";i.paymentMethod.rawValue===N.PaymentMethod.CreditCard?d="SelectCredit":i.paymentMethod.rawValue===N.PaymentMethod.PayPal?d="SelectPaypal":i.paymentMethod.rawValue===N.PaymentMethod.DirectDeposit?d="SelectDebit":i.paymentMethod.rawValue===N.PaymentMethod.Ideal&&(d="SelectIdeal"),u.event=d}else if("UpdateNonce"===a){var p=!1,m=i.nonce,f=m.isCCNValid,y=m.isCCodeValid,h=m.isCCExpValid;if(null!==S&&null!==C&&null!==v&&S===f&&C===y&&v===h&&(p=!0),S=f,C=y,v=h,p)return e;u.UpdateCC=f?"Valid":"Invalid",u.UpdateCVV=y?"Valid":"Invalid",u.UpdateExp=h?"Valid":"Invalid",b=a}return i.productPlanType.rawValue&&(u.productPlanType=i.productPlanType.rawValue,u.showTrialVersion=s&&s.showTrialVersion?"true":"false"),"UpdateHistory"===a&&n.promoSpec&&(u.promoId=n.promoSpec.id),T.ProEventsLogger.log(T.ProEventNames.BUY_TRY_PAGE_CHECKOUT,u),-1!==E.indexOf(a)&&(b=a),e}catch(e){throw T.ProEventsLogger.log(T.ProEventNames.BUY_TRY_PAGE_CHECKOUT_CRASH,{action:t.type,error:e.stack||e.toString()}),e}}}}}),define("modules/clean/react/payments/buy/actions/buy_actions_creator",["require","exports","tslib","redux","modules/clean/react/payments/buy/actions/page_actions","modules/clean/react/payments/buy/actions/page_actions_with_dbmodal","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/checkout/components/payment_method_form/apple_pay"],function(e,t,a,r,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindCheckoutActions=void 0,r=a.__importStar(r),n=a.__importStar(n),i=a.__importStar(i),s=a.__importStar(s),t.bindCheckoutActions=function(e){return r.bindActionCreators(a.__assign(a.__assign(a.__assign(a.__assign({},u),c),d),{toggleExistingAccount:o.toggleSignInModal,applePayAction:l.applePayAction}),e.dispatch)};var u={submitProBuyForm:i.submitProBuyFormToServer,updateNumberOfUsers:i.updateNumberOfUsers,updateSchedule:i.updateSchedule,updateCountryCode:i.updateCountryCode,updateZipCode:i.updateZipCode,updateVat:i.updateVat,updateIdealBank:i.updateIdealBank,updateSelectedAddons:i.updateSelectedAddons},c={updateCurrentPage:n.updateCurrentPage,loadSubChangePlans:n.loadSubChangePlans,updateHistory:n.updateHistory,updateSelectedPlan:n.updateSelectedPlan},d={showFormFieldErrors:s.showFormFieldErrors,submitCaptcha:s.submitCaptcha,updateNonce:s.updateNonce,updatePayPalNonce:s.updatePayPalNonce,blurCCField:s.blurCCField,updateAdyenEncryptedCard:s.updateAdyenEncryptedCard,updateEncryptedCardForNetworkToken:s.updateEncryptedCardForNetworkToken,updateApplePayToken:s.updateApplePayToken,updateBrowserInfo:s.updateBrowserInfo,updateThreeDsData:s.updateThreeDsData,triggerThreeDsChallenge:s.triggerThreeDsChallenge,triggerThreeDsFingerprint:s.triggerThreeDsFingerprint,updateBIN:s.updateBIN,updateTeamName:s.updateTeamName,updateTeamPhone:s.updateTeamPhone,updateCompanySize:s.updateCompanySize,updateFirstName:s.updateFirstName,updateLastName:s.updateLastName,updateEmail:s.updateEmail,updatePassword:s.updatePassword,updatePaymentMethod:s.updatePaymentMethod,blurZipCode:s.blurZipCode,blurVat:s.blurVat,updateCpf:s.updateCpf,blurCpf:s.blurCpf,updateCpfName:s.updateCpfName,updateAccountHolderName:s.updateAccountHolderName,blurAccountHolderName:s.blurAccountHolderName,updateIBAN:s.updateIBAN,blurIBAN:s.blurIBAN,updateMandateSigned:s.updateMandateSigned,updateMarketingOptIn:s.updateMarketingOptIn,updateTermsAndService:s.updateTermsAndService,paymentBannerError:s.paymentBannerError}}),define("modules/clean/react/payments/buy/actions/buy_form_actions",["require","exports","tslib","modules/clean/analytics","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/core/exception","modules/clean/react/payments/buy/actions/pricing_actions","modules/core/notify","modules/clean/web_register_logging_data","modules/clean/payments/skus/pricing_data","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/react/payments/buy/types/types"],function(e,t,l,b,u,c,S,a,v,d,C,E,r,p,n){"use strict";function T(e,t,a,r,n,o,i){void 0===o&&(o=!0),void 0===i&&(i="OFF");var s=e.countryCode.formattedValue,l=["scheduleId","paymentMethod","countryCode"];return(n=void 0===n?!1:n)||l.push("termsAndService"),a||(l.push("firstName","lastName","email","password"),r&&l.push("marketingOptIn")),t.allow_zip_code_for_country(s)&&l.push("zipCode"),t.should_show_vat_for_country(s)&&""!==e.vat.formattedValue&&l.push("vat"),t.should_require_cpf(s,e.paymentMethod.formattedValue)&&l.push("cpf"),e.paymentMethod.formattedValue===u.PaymentMethod.CreditCard?(l.push("nonce"),l.push("adyenEncryptedCard"),l.push("encryptedCardForNetworkToken"),l.push("browserInfo"),l.push("threeDsData"),o&&l.push("bin")):e.paymentMethod.formattedValue===u.PaymentMethod.PayPal?"ON"===i&&l.push("payPalNonce"):e.paymentMethod.formattedValue===u.PaymentMethod.DirectDeposit?l.push("accountHolderName","iban","mandateSigned"):e.paymentMethod.formattedValue===u.PaymentMethod.Ideal?l.push("idealBankId","idealBankName"):e.paymentMethod.formattedValue===u.PaymentMethod.ApplePay&&l.push("applePayToken"),l}var o,i;function k(o,i,s){return l.__awaiter(this,void 0,void 0,function(){var t,a,r,n;return l.__generator(this,function(e){return a=s.pageState,t=a.existingAccountShowing,n=a.requestId,r=a.submitSeq,a=o&&o.getScheduleId()===c.ScheduleId.MONTHLY?"monthly":"yearly",i.account_info_type=t?"existing":"new",i.billing_schedule=a,i.currency=o&&o.getCurrency(),i.expected_price=o&&o.getExpectedPriceToken(),i.plan_id=o&&o.transition.state.plan.id,i.tos_version="3",i.packrat=o&&o.hasPackrat(),i.request_id=n,i.submit_seq=r,s.navState&&(n=s.navState,r=n.showTrialVersion,n=n.productPlanType,n=p.getCheckoutPageProductPlan(n),i.expected_price_amount=o&&o.getTotalPrice().amount,i.product=m(n),i.signup_type=r?"trial":"purchase",i.signup_tag=f(n,r)),[2,d.setWebRegisterLoggingData(i)]})})}function m(e){return e!==n.CheckoutPageProductPlan.PROFESSIONAL?e:"pro"}function f(e,t){switch(e){case n.CheckoutPageProductPlan.PLUS:return t?o.PLUS_TRY:o.PLUS_BUY;case n.CheckoutPageProductPlan.PROFESSIONAL:return t?o.PRO_TRY:o.PRO_BUY;default:return}}function s(t){return function(e){e(r.updateCountryCode(t)),e(a.updatePrice()),e(a.updateAddonPricing())}}function y(t){return function(e){e(r.updateZipCode(t)),e(a.updatePrice()),e(a.updateAddonPricing())}}function h(t){return function(e){e(r.updateVat(t)),e(a.updatePrice()),e(a.updateAddonPricing())}}function g(t){return function(e){e({type:E.FormActionEnum.UpdateSchedule,value:t}),e(a.updateCurrentTransitionPrices()),e(a.updateAddonPricing())}}function _(t){return function(e){e(r.updateIdealBank(t))}}function P(e){var t={type:E.FormActionEnum.UpdateProductPlanType,value:e};return function(e){e(t),e(N([]))}}function N(e){var t={type:E.FormActionEnum.UpdateSelectedAddons,value:e};return function(e){e(t),e(a.updatePrice())}}Object.defineProperty(t,"__esModule",{value:!0}),t.actionCreators=t.updateSelectedAddons=t.updateProductPlanType=t.updateIdealBank=t.updateSchedule=t.updateVat=t.updateZipCode=t.updateCountryCode=t.updateNumberOfUsers=t.getAdditionalDataSignupTagField=t.getAdditionalDataProductTagField=t.fillAdditionalData=t.SignupTags=t.submitProBuyFormToServer=t.getFieldNamesToValidate=void 0,S=l.__importStar(S),a=l.__importStar(a),r=l.__importStar(r),t.getFieldNamesToValidate=T,t.submitProBuyFormToServer=function(e){var t=e.additionalData,d=void 0===t?{}:t,p=e.allowSubmitWithoutTOS,m=e.captchaComponentRef,f=e.handle3DsMessage,y=e.enableBinRouting,h=e.prepareForSubmission,g=e.trigger,_=e.url,e=e.paymentPayPalV2Flow,P=void 0===e?"OFF":e;return function(t,e){var a,r=e(),n=r.formData,o=r.pageState.paymentFormSpec,i=r.pageState.existingAccountShowing,s=r.pageState.showMarketingOptInIfNewAccount,e=r.pricingState.subChangePlans;if(e){var l=n.scheduleId.formattedValue,u=n.selectedAddons.formattedValue,e=e.filter(function(e){var t;return(null===(t=e.finalSubState.plan)||void 0===t?void 0:t.billingSchedule.id)===l&&e.finalSubState.addons.skus.length===u.length}).pop();if(e){if(e.finalSubState.planSku.productType!==n.productPlanType.rawValue)return v.Notify.error(C.PricingDataException.notifyErrorMessagePersonal,20),void S.reportException({err:new Error("Intended product type to purchase does not match subscription change plan"),severity:S.SEVERITY.CRITICAL});a=e.tvm,d.sub_change_plan=JSON.stringify(e)}}var c=T(n,o,i,s,p,y,P);k(a,d,r).then(function(e){t(E.submitForm(_,c,h,e,m,f,g)),""!==r.formData.vat.formattedValue&&b.ProEventsLogger.log("vat_provided_on_initial_purchase",{})})}},(i=o=t.SignupTags||(t.SignupTags={})).PRO_BUY="pro_buy_register",i.PRO_TRY="pro_try_register",i.PLUS_BUY="plus_buy_register",i.PLUS_TRY="plus_try_register",t.fillAdditionalData=k,t.getAdditionalDataProductTagField=m,t.getAdditionalDataSignupTagField=f,t.updateNumberOfUsers=function(t){return function(e){e(r._updateNumberOfUsers(t)),e(a.updatePrice())}},t.updateCountryCode=s,t.updateZipCode=y,t.updateVat=h,t.updateSchedule=g,t.updateIdealBank=_,t.updateProductPlanType=P,t.updateSelectedAddons=N,t.actionCreators={updateCountryCode:s,updateZipCode:y,updateVat:h,updateSchedule:g,updateIdealBank:_,updateProductPlanType:P,updateSelectedAddons:N}}),define("modules/clean/react/payments/buy/actions/page_actions",["require","exports","tslib","modules/clean/react/payments/buy/actions/pricing_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/buy/actions/page_action_types"],function(e,t,a,r,i,n){"use strict";function s(e,t){return{type:n.PageActionEnum.UpdateCurrentPage,productPlanType:e,showTrialVersion:Boolean(t)}}function l(e,t){return{type:n.PageActionEnum.UpdateTrialEndDate,trialDuration:e,locale:t}}function u(t){return function(e){e({type:n.PageActionEnum.LoadSubChangePlans,baseSubChangePlans:t}),e(r.updatePrice())}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadSubChangePlans=t.updateSelectedPlan=t.updateHistory=t.updateTrialEndDate=t.updateCurrentPage=t.LoadExtraCheckoutFormAction=t.LoadSubChangePlansAction=t.PaymentBannerErrorAction=t.UpdateTrialEndDate=t.UpdateCurrentPageAction=t.ToggleSignInModalAction=t.Action=t.PageActionType=t.GetStateFunction=t.PageActionEnum=void 0,r=a.__importStar(r),Object.defineProperty(t,"PageActionEnum",{enumerable:!0,get:function(){return n.PageActionEnum}}),Object.defineProperty(t,"PageActionType",{enumerable:!0,get:function(){return n.PageActionType}}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return n.Action}}),Object.defineProperty(t,"ToggleSignInModalAction",{enumerable:!0,get:function(){return n.ToggleSignInModalAction}}),Object.defineProperty(t,"UpdateCurrentPageAction",{enumerable:!0,get:function(){return n.UpdateCurrentPageAction}}),Object.defineProperty(t,"UpdateTrialEndDate",{enumerable:!0,get:function(){return n.UpdateTrialEndDate}}),Object.defineProperty(t,"PaymentBannerErrorAction",{enumerable:!0,get:function(){return n.PaymentBannerErrorAction}}),Object.defineProperty(t,"LoadSubChangePlansAction",{enumerable:!0,get:function(){return n.LoadSubChangePlansAction}}),Object.defineProperty(t,"LoadExtraCheckoutFormAction",{enumerable:!0,get:function(){return n.LoadExtraCheckoutFormAction}}),Object.defineProperty(t,"GetStateFunction",{enumerable:!0,get:function(){return n.GetStateFunction}}),t.updateCurrentPage=s,t.updateTrialEndDate=l,t.updateHistory=function(){return{type:n.PageActionEnum.UpdateHistory}},t.updateSelectedPlan=function(a,r,n,o){return function(e,t){e(s(a,o)),e(i.updateProductPlanType(a)),e(l(r,n));t=t().pricingState;t.baseSubChangePlans&&e(u(t.baseSubChangePlans))}},t.loadSubChangePlans=u}),define("modules/clean/react/payments/buy/actions/page_actions_with_dbmodal",["require","exports","tslib","modules/clean/dbmodal","modules/clean/react/payments/buy/actions/page_action_types"],function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleSignInModal=void 0,r=a.__importStar(r),t.toggleSignInModal=function(a){return function(e,t){t().pageState.userInfo.existingAccount?e({type:n.PageActionEnum.ToggleSignInModal,show:a}):new r.DBModal({element_id:"sign-in-modal",focus:"input[name='login_email']"}).show()}}}),define("modules/clean/react/payments/buy/actions/page_action_types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageActionEnum=void 0,(t=t.PageActionEnum||(t.PageActionEnum={})).LoadSubChangePlans="LoadSubChangePlans",t.ToggleSignInModal="ToggleSignInModal",t.UpdateCurrentPage="UpdateCurrentPage",t.LoadCheckoutFormProps="LoadCheckoutFormProps",t.UpdateHistory="UpdateHistory",t.PaymentBannerError="PaymentBannerError",t.UpdateTrialEndDate="UpdateTrialEndDate"}),define("modules/clean/react/payments/buy/actions/pricing_actions",["require","exports","tslib","modules/clean/payments/skus/subscription_diff","modules/clean/payments/skus/subscription_service","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/helpers/checkout_api_v2_helpers"],function(e,u,c,s,t,l,a){"use strict";var r,n;Object.defineProperty(u,"__esModule",{value:!0}),u.actionCreators=u.updateAddonPricingError=u.updateAddonPricingSuccess=u.updateAddonPricingStart=u.updateAddonPricing=u.getAddonPricing=u.updateCurrentTransitionPrices=u.updateDisplayPrices=u.updateTransitionsError=u.updateTransitionsSuccess=u.updateTransitionsStart=u.updatePrice=u.PricingActionEnum=void 0,(n=r=u.PricingActionEnum||(u.PricingActionEnum={})).UpdateCurrentTransitionPrices="UpdateCurrentTransitionPrices",n.UpdateDisplayPrices="UpdateDisplayPrices",n.UpdateTransitionsStart="UpdateTransitionsStart",n.UpdateTransitionsSuccess="UpdateTransitionsSuccess",n.UpdateTransitionsError="UpdateTransitionsError",n.UpdateAddonPricingStart="UpdateAddonPricingStart",n.UpdateAddonPricingSuccess="UpdateAddonPricingSuccess",n.UpdateAddonPricingError="UpdateAddonPricingError";var d=new t.SubscriptionService;function o(){return function(t,e){var a=e(),r=a.formData,n=a.pricingState,o=a.pageState,i=r.countryCode,e=r.zipCode,a=r.vat,r=r.selectedAddons,o=o.promoSpec,a={countryCode:i.formattedValue,zipCode:e.formattedValue,vat:a.errorState?"":a.formattedValue};t(p()),n.subChangePlans&&(n=n.subChangePlans.map(function(e){return s.SubscriptionDiff.fromSubscriptionStatus(e)}),r={cashCode:null!=o&&o.cashCode&&o.id!==l.PromoSpecType.TRIAL?o.cashCode:void 0,selectedAddonIds:r.formattedValue.map(function(e){return String(e.id)})},d.priceSet(n,a,r,!0).then(function(e){t(m(e)),t(y(e)),t(h(e))}).catch(function(e){t(f(e))}))}}function p(){return{type:r.UpdateTransitionsStart}}function m(e){return{type:r.UpdateTransitionsSuccess,subChangePlans:e}}function f(e){return{type:r.UpdateTransitionsError,error:e}}function y(e){return{type:r.UpdateDisplayPrices,subChangePlans:e}}function h(e){return{type:r.UpdateCurrentTransitionPrices,subChangePlans:e}}function i(){var e=this;return function(s,l){return c.__awaiter(e,void 0,void 0,function(){var t,a,r,n,o,i;return c.__generator(this,function(e){return n=l(),i=n.formData,t=i.scheduleId,a=i.countryCode,r=i.zipCode,o=i.vat,i=n.pricingState,n=i.availableAddons,i=i.subChangePlans,0!==n.length&&i&&(i=i.find(function(e){return(null===(e=e.subState.planSku)||void 0===e?void 0:e.scheduleId)===t.formattedValue}),o={plan_offering_id:""+(null===(i=null===(i=null==i?void 0:i.subState)||void 0===i?void 0:i.planSku)||void 0===i?void 0:i.adminCxId),schedule_id:t.formattedValue,addon_offering_ids:n,country_code:a.formattedValue,zip_code:r.formattedValue,vat:o.errorState?"":o.formattedValue},s(g()),u.getAddonPricing(o).then(function(e){e=e.addon_pricing;s(_(e))}).catch(function(e){s(P(e))})),[2]})})}}function g(){return{type:r.UpdateAddonPricingStart}}function _(e){return{type:r.UpdateAddonPricingSuccess,addonPricing:e}}function P(e){return{type:r.UpdateAddonPricingError,error:e}}u.updatePrice=o,u.updateTransitionsStart=p,u.updateTransitionsSuccess=m,u.updateTransitionsError=f,u.updateDisplayPrices=y,u.updateCurrentTransitionPrices=h,u.getAddonPricing=function(e){return a.checkoutApiV2Client("personal").rpc("get_addon_pricing",e,{})},u.updateAddonPricing=i,u.updateAddonPricingStart=g,u.updateAddonPricingSuccess=_,u.updateAddonPricingError=P,u.actionCreators={updatePrice:o,updateTransitionsStart:p,updateTransitionsSuccess:m,updateTransitionsError:f,updateDisplayPrices:y,updateCurrentTransitionPrices:h,updateAddonPricing:i,updateAddonPricingStart:g,updateAddonPricingSuccess:_}}),define("modules/clean/react/payments/buy/state/checkout_store_creator",["require","exports","tslib","redux","redux-thunk","modules/clean/payments/payment_form/payment_form_spec","modules/clean/redux/unsupported","modules/clean/redux/devtools","modules/clean/react/payments/buy/actions/pricing_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/buy/helpers/pricing_value_helper","modules/clean/payments/skus/subscription_change_plan","modules/clean/payments/skus/constants","modules/clean/react/payments/common/middleware/pro_buy_logger","modules/clean/react/payments/common/form_value_factory","modules/core/browser","modules/core/notify","modules/clean/react/payments/common/middleware/payments_ux_logger","modules/clean/react/payments/common/form/middleware/middleware","modules/clean/logging/hive/schemas/web-payments_ux_analytics","modules/clean/react/payments/buy/components/team/team_info"],function(e,t,P,r,n,l,o,a,i,s,u,c,b,d,S,p,m,f,y,h,v){"use strict";function g(e){return function(a){return function(e){if("SubmitFormError"!==e.type)return a(e);var t=a(e);return e.data&&e.data.error_message&&m.Notify.error(e.data.error_message),e.data.redirect&&p.redirect(e.data.redirect),t}}}function _(e){var t=C(e),a=E(e,t);return{pageState:t,pricingState:T(e,a),formData:a,navState:e.navState||{productPlanType:0,showTrialVersion:!1}}}function C(e){var t=e.locale,a=e.userInfo,r=e.serializedPaymentFormSpec,n=e.showMarketingOptInIfNewAccount,o=e.requestId,i=e.promoSpec,s=e.marketingTracker,e=e.multiLicensePlanInfo;return{locale:t,userInfo:a,existingAccountShowing:a.existingAccount,paymentFormSpec:new l.PaymentFormSpec(r),submitFormSuccess:!1,showMarketingOptInIfNewAccount:n,requestId:o,submitSeq:0,submitting:!1,promoSpec:i,showBuyClickError:!1,marketingTracker:s,paypalEmail:"",isMultiSeatPlan:Boolean(e)}}function E(e,t){var a=e.countryCode,r=e.userInfo,n=e.vat,o=e.trialLength,i=e.showTrialVersion,s=e.locale,l=e.multiLicensePlanInfo,u=r.fname||"",c=r.lname||"",d="";r.existingAccount||(d=r.email||"");var p,m=r.password||"",f=b.ScheduleId.YEARLY,y=e.productPlanType||b.ProductPlanType.STANDARD,h=i?t.paymentFormSpec.default_payment_method():t.paymentFormSpec.default_payment_method_for_country(a),g=n||"",_={};return l&&(p=l.teamInfo,e=l.minLicenseCount,i=l.maxLicenseCount,n=p.teamNumUsers.toString(),l={minNumUsers:Math.max(e,p.teamNumUsers),maxNumUsers:i},i=null!==(i=null==p?void 0:p.companySize)&&void 0!==i?i:v.DefaultCompanySize,_={numberOfUsers:S.FormValueFactory.createNumberOfUsers(n,l,void 0,e,0),teamPhone:S.FormValueFactory.createTeamPhone(p.phone),teamName:S.FormValueFactory.createInput(p.teamName),companySize:S.FormValueFactory.createInput(i)}),P.__assign(P.__assign({},_),{city:S.FormValueFactory.createCity(""),phone:S.FormValueFactory.createPhone(""),name:S.FormValueFactory.createName(""),address:S.FormValueFactory.createAddress(""),nonce:S.FormValueFactory.createNonce(""),payPalNonce:S.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:S.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:S.FormValueFactory.createEncryptedCardForNetworkToken("",""),applePayToken:S.FormValueFactory.createApplePayToken(""),bin:S.FormValueFactory.createBIN(""),browserInfo:S.FormValueFactory.createBrowserInfo(""),threeDsData:S.FormValueFactory.createThreeDsData(""),firstName:S.FormValueFactory.createInput(u),lastName:S.FormValueFactory.createInput(c),email:S.FormValueFactory.createEmail(d),password:S.FormValueFactory.createPassword(m),productPlanType:S.FormValueFactory.createProductPlanType(y),scheduleId:S.FormValueFactory.createSchedule(f),paymentMethod:S.FormValueFactory.createPaymentMethod(h,a,t.paymentFormSpec),countryCode:S.FormValueFactory.createCountryCode(a),zipCode:S.FormValueFactory.createZipCode("",a,t.paymentFormSpec),vat:S.FormValueFactory.createVat(g,a),cpf:S.FormValueFactory.createCpf("",void 0,!0),cpfName:S.FormValueFactory.createCpfNamePrefill("","",r.displayName,void 0,!0),accountHolderName:S.FormValueFactory.createInput(""),iban:S.FormValueFactory.createIBAN(""),mandateSigned:S.FormValueFactory.createCheckbox(!1),idealBankId:S.FormValueFactory.createIdealBankId(""),idealBankName:S.FormValueFactory.createIdealBankName(""),marketingOptIn:S.FormValueFactory.createCheckbox(!1,null,!0),termsAndService:S.FormValueFactory.createCheckbox(!1),trialEndDate:S.FormValueFactory.createTrialEndDate(o,s),selectedAddons:S.FormValueFactory.createSelectedAddons([])})}function T(e,t){var a,r=e.baseSubChangePlans,n=e.serializedSubChangePlans,o=e.promoSpec,i=e.navState,s=e.multiLicensePlanInfo,e=e.availableAddons;return r?a=r.filter(function(e){return e.subState.planSku&&i&&e.subState.planSku.productType===i.productPlanType}):n&&(a=n.map(function(e){return c.SubscriptionChangePlan.deserialize(e)})),{loadingPrices:void 0===a,requestToken:-1,subChangePlans:a,baseSubChangePlans:r,displayPrices:u.getDisplayPrices(a,t,o,Boolean(s)),currentTransitionPrices:u.getCurrentTransitionPrices(a,t),loadingAddonPricing:!1,availableAddons:e,addonPricing:{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createPricingState=t.createFormState=t.createPageState=t.createState=t.configureStore=t.submitFormErrorMiddleware=void 0,n=P.__importDefault(n),l=P.__importStar(l),t.submitFormErrorMiddleware=g,t.configureStore=function(e,t){var a=_(e),e=r.applyMiddleware(n.default,d.proBuyLogger,new f.PaymentsUXLogger(e.requestId,h.PaymentsUxPlatform.Legacy).reduxMiddleware,y.marketingEventMiddleware,g);return o.createStore(t,a,r.compose(e))},t.createState=_,t.createPageState=C,t.createFormState=E,t.createPricingState=T}),define("modules/clean/react/payments/buy/reducers/form_value_reducers",["require","exports","tslib","lodash","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/payments/reducers/reducers","modules/clean/react/payments/buy/actions/page_actions","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/buy/actions/buy_form_actions"],function(e,t,m,f,a,y,o,r,n,h,i){"use strict";function s(e,t){var a=f.assignIn({},e.formData,t),t=i.getFieldNamesToValidate(a,e.pageState.paymentFormSpec,e.pageState.existingAccountShowing,e.pageState.showMarketingOptInIfNewAccount),t=e.pageState.showBuyClickError&&!h.isValidSubmitState(a,t),t=f.assignIn({},e.pageState,{showBuyClickError:t});return f.assignIn({},e,{formData:a,pageState:t})}function l(e,t){return"UpdateTeamName"!==t.type?e:s(e,{teamName:o.FormValueFactory.createInput(t.value,e.formData.teamName)})}function u(e,t){return"UpdateTeamPhone"!==t.type?e:s(e,{teamPhone:o.FormValueFactory.createTeamPhone(t.value,e.formData.teamPhone)})}function c(e,t){return"UpdateCompanySize"!==t.type?e:s(e,{companySize:o.FormValueFactory.createInput(t.value,e.formData.companySize)})}function d(e,t){return"UpdateFirstName"!==t.type?e:s(e,{firstName:o.FormValueFactory.createInput(t.value,e.formData.firstName)})}function p(e,t){return"UpdateLastName"!==t.type?e:s(e,{lastName:o.FormValueFactory.createInput(t.value,e.formData.lastName)})}function g(e,t){if("EmailTakenError"!==t.type)return e;t=e.formData.email;return t.errorState=a.EmailErrorState.TakenError,t.showError=!0,s(e,{email:t})}function _(e,t){return"UpdateEmail"!==t.type?e:s(e,{email:o.FormValueFactory.createEmail(t.value,e.formData.email)})}function P(e,t){return"UpdatePassword"!==t.type?e:s(e,{password:o.FormValueFactory.createPassword(t.value,e.formData.password)})}function b(e,t){var a=e.formData.firstName.rawValue,r=e.formData.lastName.rawValue,n=e.pageState.userInfo.displayName;switch(t.type){case"UpdateCpfName":return s(e,{cpfName:o.FormValueFactory.createCpfName(t.value,e.formData.cpfName,!0)});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:s(e,{cpfName:o.FormValueFactory.createCpfNamePrefill(t.value,r,n,void 0,!0)});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:s(e,{cpfName:o.FormValueFactory.createCpfNamePrefill(a,t.value,n,void 0,!0)});default:return e}}function S(e,t){if(t.type!==n.PageActionEnum.PaymentBannerError)return e;var a,t=f.assignIn({},e.pageState,{paymentBannerError:t.msg});e=f.assignIn({},e,{pageState:t});t=document.getElementById("payment-info");if(!t)return e;t=t.getBoundingClientRect().top;return void 0!==(a=void 0===a||t<a?t:a)&&scrollBy({top:a-150,behavior:"smooth"}),e}function v(e,t){return"UpdateProductPlanType"!==t.type?e:s(e,{productPlanType:o.FormValueFactory.createProductPlanType(t.value)})}function C(e,t){return"UpdateSchedule"!==t.type?e:s(e,{scheduleId:o.FormValueFactory.createSchedule(t.value)})}function E(e,t){if(t.type!==h.FormActionEnum.UpdateNumberOfUsers)return e;if(!e.formData.numberOfUsers)return e;var a=e.formData.numberOfUsers,r=a.minNumUsers,n=a.maxNumUsers,a=a.minLicenseLimit;return s(e,{numberOfUsers:o.FormValueFactory.createNumberOfUsers(t.value,{minNumUsers:r,maxNumUsers:n},e.formData.numberOfUsers,a,0)})}function T(e,t){if(t.type!==h.FormActionEnum.UpdatePaymentMethod&&t.type!==h.FormActionEnum.UpdateCountryCode)return e;var a=e.formData,r=e.pageState,n=t.type===h.FormActionEnum.UpdatePaymentMethod?t.value:a.paymentMethod.rawValue,t=a.countryCode.formattedValue;return s(e,{paymentMethod:o.FormValueFactory.createPaymentMethod(n,t,r.paymentFormSpec,a.paymentMethod)})}function k(e,t){return t.type!==h.FormActionEnum.UpdateCountryCode?e:s(e,{countryCode:o.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})}function N(e,t){if(t.type!==h.FormActionEnum.UpdateZipCode&&t.type!==h.FormActionEnum.UpdateCountryCode)return e;var a=t.type===h.FormActionEnum.UpdateZipCode?t.value:e.formData.zipCode.rawValue,t=e.formData.countryCode.formattedValue;return s(e,{zipCode:o.FormValueFactory.createZipCode(a,t,e.pageState.paymentFormSpec,e.formData.zipCode)})}function w(e,t){if(t.type!==h.FormActionEnum.UpdateVat&&t.type!==h.FormActionEnum.UpdateCountryCode)return e;var a=t.type===h.FormActionEnum.UpdateVat?t.value.toUpperCase():e.formData.vat.rawValue,t=e.formData.countryCode.formattedValue;return s(e,{vat:o.FormValueFactory.createVat(a,t,e.formData.vat)})}function F(e,t){return t.type!==h.FormActionEnum.UpdateCpf?e:s(e,{cpf:o.FormValueFactory.createCpf(t.value,e.formData.cpf,!0)})}function I(e,t){return t.type!==h.FormActionEnum.UpdateNonce?e:s(e,{nonce:o.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce,!0)})}function M(e,t){return t.type!==h.FormActionEnum.UpdateBIN?e:s(e,{bin:o.FormValueFactory.createBIN(t.value,e.formData.bin)})}function x(e,t){return t.type!==h.FormActionEnum.UpdateAccountHolderName?e:s(e,{accountHolderName:o.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})}function A(e,t){return t.type!==h.FormActionEnum.UpdateIBAN?e:s(e,{iban:o.FormValueFactory.createIBAN(t.value,e.formData.iban)})}function D(e,t){return t.type!==h.FormActionEnum.UpdateMandateSigned?e:s(e,{mandateSigned:o.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})}function O(e,t){return t.type!==h.FormActionEnum.UpdateMarketingOptIn?e:s(e,{marketingOptIn:o.FormValueFactory.createCheckbox(t.value,e.formData.marketingOptIn,!0)})}function V(e,t){return t.type!==h.FormActionEnum.UpdateTermsAndService?e:s(e,{termsAndService:o.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})}function B(e,t){return t.type!==n.PageActionEnum.UpdateTrialEndDate?e:s(e,{trialEndDate:o.FormValueFactory.createTrialEndDate(t.trialDuration,t.locale)})}function U(e,t){if(t.type!==h.FormActionEnum.UpdateIdealBank)return e;var a=t.value,t=a.bankId,a=a.bankName;return s(e,{idealBankId:o.FormValueFactory.createIdealBankId(t,e.formData.idealBankId),idealBankName:o.FormValueFactory.createIdealBankName(a,e.formData.idealBankName)})}function L(e,t){return t.type!==h.FormActionEnum.UpdateSelectedAddons?e:s(e,{selectedAddons:o.FormValueFactory.createSelectedAddons(t.value,e.formData.selectedAddons)})}Object.defineProperty(t,"__esModule",{value:!0}),t.submitFormError=t.submitFormSuccess=t.applePayClosedByFailure=t.submitFormStart=t.showFormFieldErrors=t.updateSelectedAddons=t.updateIdealBank=t.updateTrialEndDate=t.updateTOS=t.updateMarketingOptIn=t.updateMandateSigned=t.updateIBAN=t.updateAccountHolderName=t.updateBIN=t.updateNonce=t.updateCpf=t.updateVat=t.updateZipCode=t.updateCountryCode=t.updatePaymentMethod=t.updateNumberOfUsers=t.updateSchedule=t.updateProductPlanType=t.paymentBannerError=t.updateCpfName=t.updatePassword=t.updateEmail=t.emailAlreadyTakenError=t.updateLastName=t.updateFirstName=t.updateCompanySize=t.updateTeamPhone=t.updateTeamName=t.FormInputReducers=t.OrderSummaryReducers=t.PaymentReducers=t.AddonReducers=t.PlanReducers=t.AccountReducers=void 0,f=m.__importStar(f),a=m.__importStar(a),t.AccountReducers=[d,p,_,P,b,g,l,u,c],t.PlanReducers=[v,C,E],t.AddonReducers=[L],t.PaymentReducers=[k,T,N,w,F,b,I,r.updatePayPalNonce,r.updateAdyenEncryptedCard,r.updateEncryptedCardForNetworkToken,r.updateApplePayToken,M,r.updateBrowserInfo,r.updateThreeDsData,x,A,D,U,S],t.OrderSummaryReducers=[V,O,B],t.FormInputReducers=[j,q,H,Y,z],t.updateTeamName=l,t.updateTeamPhone=u,t.updateCompanySize=c,t.updateFirstName=d,t.updateLastName=p,t.emailAlreadyTakenError=g,t.updateEmail=_,t.updatePassword=P,t.updateCpfName=b,t.paymentBannerError=S,t.updateProductPlanType=v,t.updateSchedule=C,t.updateNumberOfUsers=E,t.updatePaymentMethod=T,t.updateCountryCode=k,t.updateZipCode=N,t.updateVat=w,t.updateCpf=F,t.updateNonce=I,t.updateBIN=M,t.updateAccountHolderName=x,t.updateIBAN=A,t.updateMandateSigned=D,t.updateMarketingOptIn=O,t.updateTOS=V,t.updateTrialEndDate=B,t.updateIdealBank=U,t.updateSelectedAddons=L;var R={firstName:"fname",lastName:"lname",email:"account-email",password:"password",name:"name",nonce:"iframe-holder",countryCode:"country_code",address:"address",zipCode:"zip",city:"city",accountHolderName:"owner_name",iban:"iban",mandateSigned:"mandate_signed",idealBankId:"ideal_bank",vat:"vat",cpf:"cpf"};function j(e,t){if(t.type!==h.FormActionEnum.ShowFormFieldErrors)return e;var a=m.__assign({},e.formData);e=f.assignIn({},e,{formData:a});for(var r,n=[],o=0,i=t.fieldNames;o<i.length;o++){var s=i[o],l=a[s];l&&!y.FormValueHelper.isValid(l)&&(a[s]=f.assignIn({},a[s],{showError:!0}),n.push(s))}var u=e.pageState.showBuyClickError;if("SubmitForm"===t.origin){for(var u=!0,c=0,d=n;c<d.length;c++){var p=d[c];!R[p]||(p=document.getElementById(R[p]))&&(p=p.getBoundingClientRect().top,(void 0===r||p<r)&&(r=p))}void 0!==r&&scrollBy({top:r-150,behavior:"smooth"})}u=f.assignIn({},e.pageState,{showBuyClickError:u});return f.assignIn({},e,{pageState:u})}function q(e,t){if(t.type!==h.FormActionEnum.SubmitFormStart)return e;t=f.assignIn({},e.pageState,{submitting:!0,submitSeq:e.pageState.submitSeq+1});return f.assignIn({},e,{pageState:t})}function z(e,t){if(t.type!==h.FormActionEnum.ApplePayClosedByFailure)return e;t=f.assignIn({},e.pageState,{submitSeq:e.pageState.submitSeq+1});return f.assignIn({},e,{pageState:t})}function H(e,t){return t.type!==h.FormActionEnum.SubmitFormSuccess?e:m.__assign(m.__assign({},e),{pageState:m.__assign(m.__assign({},e.pageState),{submitFormSuccess:!0,submitting:!1})})}function Y(e,t){if(t.type!==h.FormActionEnum.SubmitFormError)return e;t=f.assignIn({},e.pageState,{submitting:!1});return f.assignIn({},e,{pageState:t})}t.showFormFieldErrors=j,t.submitFormStart=q,t.applePayClosedByFailure=z,t.submitFormSuccess=H,t.submitFormError=Y}),define("modules/clean/react/payments/buy/reducers/page_reducers",["require","exports","modules/clean/react/payments/buy/actions/page_actions"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.existingAccountShowing=void 0,t.existingAccountShowing=function(e,t){return void 0===e&&(e=!1),t.type!==a.PageActionEnum.ToggleSignInModal?e:(e=e,void 0!==t.show?t.show:!e)}}),define("modules/clean/react/payments/buy/reducers/pricing_reducers",["require","exports","tslib","lodash","modules/clean/react/payments/buy/helpers/pricing_value_helper","modules/clean/react/payments/buy/actions/pricing_actions"],function(e,t,a,n,o,i){"use strict";function r(e,t){if(t.type!==i.PricingActionEnum.UpdateTransitionsStart)return e;t=n.assignIn({},e.pricingState,{loadingPrices:!0});return n.assignIn({},e,{pricingState:t})}function s(e,t){if(t.type!==i.PricingActionEnum.UpdateTransitionsSuccess)return e;t=n.assignIn({},e.pricingState,{loadingPrices:!1,subChangePlans:t.subChangePlans});return n.assignIn({},e,{pricingState:t})}function l(e,t){if(t.type!==i.PricingActionEnum.UpdateDisplayPrices)return e;var a=e.pageState,r=a.promoSpec,a=a.isMultiSeatPlan,t=t.subChangePlans,a=o.getDisplayPrices(t,e.formData,r,a),a=n.assignIn({},e.pricingState,{displayPrices:a});return n.assignIn({},e,{pricingState:a})}function u(e,t){if(t.type!==i.PricingActionEnum.UpdateCurrentTransitionPrices)return e;t=t.subChangePlans||e.pricingState.subChangePlans,t=o.getCurrentTransitionPrices(t,e.formData),t=n.assignIn({},e.pricingState,{currentTransitionPrices:t});return n.assignIn({},e,{pricingState:t})}function c(e,t){if(t.type!==i.PricingActionEnum.UpdateAddonPricingStart)return e;t=n.assignIn({},e.pricingState,{loadingAddonPricing:!0});return n.assignIn({},e,{pricingState:t})}function d(e,t){if(t.type!==i.PricingActionEnum.UpdateAddonPricingSuccess)return e;t=n.assignIn({},e.pricingState,{loadingAddonPricing:!1,addonPricing:t.addonPricing});return n.assignIn({},e,{pricingState:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateAddonPricingSuccess=t.updateAddonPricingStart=t.updateCurrentTransitionPrices=t.updateDisplayPrices=t.updateTransitionsSuccess=t.updateTransitionsStart=t.AddonPricingReducers=t.PricingManagementReducers=t.TransitionManagementReducers=void 0,n=a.__importStar(n),t.TransitionManagementReducers=[r,s],t.PricingManagementReducers=[l,u],t.AddonPricingReducers=[c,d],t.updateTransitionsStart=r,t.updateTransitionsSuccess=s,t.updateDisplayPrices=l,t.updateCurrentTransitionPrices=u,t.updateAddonPricingStart=c,t.updateAddonPricingSuccess=d}),define("modules/clean/react/payments/buy/reducers/nav_reducer",["require","exports","modules/clean/react/payments/buy/actions/page_actions"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navReducer=void 0,t.navReducer=function(e,t){return t.type!==a.PageActionEnum.UpdateCurrentPage?e:{productPlanType:t.productPlanType,showTrialVersion:t.showTrialVersion}}}),define("modules/clean/react/payments/buy/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/buy/reducers/form_value_reducers","modules/clean/react/payments/buy/reducers/pricing_reducers","modules/clean/react/payments/buy/reducers/page_reducers","modules/clean/react/payments/buy/reducers/nav_reducer","modules/clean/react/payments/buy/actions/page_actions"],function(e,t,r,a,n,o,i,s,l){"use strict";function u(a){return function(e,t){return Object.assign({},e,a(e,t))}}function c(t,e){if(e.type!==l.PageActionEnum.LoadSubChangePlans)return t;var a=r.__assign({},t.pricingState);return a.baseSubChangePlans=e.baseSubChangePlans,a.subChangePlans=e.baseSubChangePlans.filter(function(e){return(null===(e=e.subState.planSku)||void 0===e?void 0:e.productType)===t.navState.productPlanType}),r.__assign(r.__assign({},t),{pricingState:r.__assign({},a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutReducer=t.loadSubChangePlans=void 0,n=r.__importStar(n),o=r.__importStar(o),t.loadSubChangePlans=c,t.CheckoutReducer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(a,r){return function(e,t){return r(a(e,t),t)}})}.apply(void 0,r.__spreadArrays([a.combineReducers({formData:function(e,t){return e=void 0===e?{}:e},pageState:u(a.combineReducers({existingAccountShowing:i.existingAccountShowing})),pricingState:function(e,t){return e=void 0===e?{}:e},navState:u(s.navReducer)}),c],n.AccountReducers,n.AddonReducers,n.PlanReducers,n.PaymentReducers,n.OrderSummaryReducers,n.FormInputReducers,o.TransitionManagementReducers,o.PricingManagementReducers,o.AddonPricingReducers))}),define("modules/clean/react/payments/buy/types/types",["require","exports"],function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.PromoSpecType=t.CheckoutPageProductPlan=void 0,(a=t.CheckoutPageProductPlan||(t.CheckoutPageProductPlan={})).PLUS="plus",a.PROFESSIONAL="professional",a.FAMILY="family",a.TRANSFER="transfer",a.BACKUP="backup",a.HELLOSIGN_DBX_PRO="hellosign_dbx_pro",a.PASSWORDS="passwords",a.STANDARD="standard",a.ADVANCED="advanced",(t=t.PromoSpecType||(t.PromoSpecType={}))[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.EXTRA_TIME_MONTHS=1]="EXTRA_TIME_MONTHS",t[t.EXPERIMENTAL_PLAN=2]="EXPERIMENTAL_PLAN",t[t.PERCENT_DISCOUNT_PRETAX=3]="PERCENT_DISCOUNT_PRETAX",t[t.TRIAL=4]="TRIAL"}),define("modules/clean/react/payments/buy/components/buy_purchase_form",["require","exports","tslib","react","react-intl","classnames","ts-key-enum","modules/core/i18n","modules/clean/raf_throttle","modules/clean/auth/common/captcha","modules/clean/web_timing_logger","modules/clean/analytics","modules/clean/react/payments/buy/components/account/new_account_input","modules/clean/react/payments/buy/components/plan/schedule_selection","modules/clean/react/payments/buy/components/payments/buy_payment_info_section","modules/clean/react/payments/buy/components/payments/order_summary/order_summary","modules/clean/react/payments/buy/components/payments/worldpay_entity_info","modules/clean/react/payments/buy/components/plan/plan_selection","modules/clean/react/payments/buy/components/payments/submit_payment_form_section","modules/clean/react/rebrand/elements/rebrand_arbor_footer_components_lazy","modules/clean/react/payments/buy/types/types","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form/actions/actions","modules/core/exception","modules/clean/react/payments/buy/components/included_features","modules/clean/react/payments/buy/helpers/product_plan_helpers","modules/clean/react/payments/buy/components/account/new_account_input_utils","modules/clean/react/payments/buy/components/payment_form_utils","modules/clean/react/payments/buy/components/addons/addon_selector","modules/clean/react/payments/buy/components/addons/addon_utils"],function(e,t,n,B,U,d,a,L,r,p,o,i,R,j,q,m,s,z,H,Y,W,l,u,c,f,y,G,Z,K,X){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuyPurchaseForm=void 0,B=n.__importDefault(B),d=n.__importDefault(d),o=n.__importStar(o),c=n.__importStar(c);var h,g=(h=B.default.Component,n.__extends(_,h),_.prototype.prepareForSubmission=function(){return this.paymentInfoSection.prepareForSubmission()},_.prototype.getValue=function(e,t){var a=this.props.pageState.paymentFormSpec.get_token_connect_data(e);if(null!=a)return a;if(void 0!==sessionStorage){e=sessionStorage.getItem(e);if(null!=e)return e}return t},_.prototype.loadState=function(){try{if(void 0===sessionStorage&&void 0===this.props.pageState.paymentFormSpec.spec.token_connect_prefill_data)return;this.props.actions.updateFirstName(this.getValue("firstName",this.props.formData.firstName.rawValue)),this.props.actions.updateLastName(this.getValue("lastName",this.props.formData.lastName.rawValue)),this.props.actions.updateEmail(this.getValue("email",this.props.formData.email.rawValue)),this.props.actions.updateZipCode(this.getValue("zipCode",this.props.formData.zipCode.rawValue));var e=this.getValue("countryCode",this.props.formData.countryCode.rawValue);this.props.actions.updateCountryCode(e);var t=Number(this.getValue("paymentMethod",""+this.props.formData.paymentMethod.rawValue));this.props.pageState.paymentFormSpec.available_payment_methods_for_country(e).includes(t)&&this.props.actions.updatePaymentMethod(t)}catch(e){c.reportException({err:new Error("Error loading payment state"+e.message),severity:c.SEVERITY.NONCRITICAL})}},_.prototype.saveState=function(){try{if(void 0===sessionStorage)return;sessionStorage.setItem("firstName",this.props.formData.firstName.rawValue),sessionStorage.setItem("lastName",this.props.formData.lastName.rawValue),sessionStorage.setItem("email",this.props.formData.email.rawValue),sessionStorage.setItem("zipCode",this.props.formData.zipCode.rawValue),sessionStorage.setItem("countryCode",this.props.formData.countryCode.rawValue),sessionStorage.setItem("paymentMethod",""+this.props.formData.paymentMethod.rawValue)}catch(e){c.reportException({err:new Error("Error saving payment state"+e.message),severity:c.SEVERITY.NONCRITICAL})}},_.prototype.componentDidMount=function(){o.mark_time_to_interactive(),this.handleResize(),window.addEventListener("resize",this.resizeThrottle.request),"orientation"in window&&window.addEventListener("orientationchange",this.resizeThrottle.request),this.loadState()},_.prototype.componentDidUpdate=function(e,t){var a=this.props,r=a.pricingState,n=a.productPlanType,a=a.supportedProducts;!this.state.hasLoadedSubChangePlans&&r.currentTransitionPrices.totalPrice&&(this.handleResize(),this.setState({hasLoadedSubChangePlans:!0})),e.productPlanType!==n&&this.setState({selectedProduct:y.getSelectedUiProduct(a,n)})},_.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeThrottle.request),"orientation"in window&&window.removeEventListener("orientationchange",this.resizeThrottle.request)},_.prototype.renderPaymentForm=function(){var n=this,e=this.props,a=e.actions,t=e.ccIframeUrl,r=e.countryList,o=e.experiments,i=e.idealBanks,s=e.locale,l=e.formData,u=e.pageState,c=e.pricingState,d=e.showTrialVersion,p=e.showMarketingOptInIfNewAccount,m=e.useAUTaxInclusivePricing,f=e.userIsEligibleForProfessionalTrial,y=e.braintreeClientToken,h=e.defaultPlan,g=e.supportedProducts,_=u.userInfo,P=u.promoSpec,b=u.paymentFormSpec,S=u.paymentBannerError,v=this.state.selectedProduct,C=function(e){return(e=void 0===e?!0:e)?U.defineMessage({id:"DcuOhc",defaultMessage:"{index}. Create your account"}):L.intl.formatMessage({id:"QEa1gY",defaultMessage:"Create your account"})},E=void 0,T="ON"===o.checkoutNewOrderSummary,k=h===W.CheckoutPageProductPlan.PLUS,e=v.productPlan===W.CheckoutPageProductPlan.PLUS&&d;!k||e||P||(E=function(e,t){return B.default.createElement(Z.SectionWrapperWithTitle,{index:e,key:"choose-space-section-"+e,modifier:"plan-selection",title:(t=void 0===(t=t)?!0:t)?U.defineMessage({id:"uR6YMd",defaultMessage:"{index}. Choose your space"}):L.intl.formatMessage({id:"ix4+1x",defaultMessage:"Choose your space"}),isOrderSummaryRedesign:T},B.default.createElement(z.PlanSelection,{actions:a,locale:s,productPlanType:l.productPlanType.rawValue,showPlanNameUnderRadio:!1,defaultPlan:h,supportedProducts:g,userIsEligibleForProfessionalTrial:f}))});var N,w=c.subChangePlans?void 0:{monthlyPrice:null===(w=null==v?void 0:v.priceMonthly)||void 0===w?void 0:w.price,annualPriceAsMonthly:null===(w=null==v?void 0:v.priceAnnual)||void 0===w?void 0:w.priceAsMonthly,yearlyPrice:null===(w=null==v?void 0:v.priceAnnual)||void 0===w?void 0:w.price,yearlyWithoutSavings:null===(w=null==v?void 0:v.priceAnnual)||void 0===w?void 0:w.withoutSavings,yearlySavings:null===(w=null==v?void 0:v.priceAnnual)||void 0===w?void 0:w.savings},F=B.default.createElement(j.ScheduleSelection,{actions:a,displayPrices:c.displayPrices,formData:l,initialPricingStrings:w,locale:s,useAUTaxInclusivePricing:m,showTrialVersion:d,paymentSchedule:v.paymentSchedule,showYearlyPricePerMonth:Boolean(v.showYearlyPricePerMonth),isOrderSummaryRedesign:T}),m=void 0;u.userInfo.existingAccount||(N=B.default.createElement(Z.AccountToggleLink,{onClick:this.onLoginClick,linkKey:"existing_account",linkText:U.defineMessage({id:"jofRGL",defaultMessage:"or <existing_account>use existing Dropbox account</existing_account>"})}),m=function(e,t){return B.default.createElement(Z.SectionWrapperWithTitleAndLink,{index:e,key:"create-account-section-"+e,link:N,title:C(t),isOrderSummaryRedesign:T},B.default.createElement(R.NewAccountInput,{actions:a,autocomplete:!0,formData:l,firstNameError:G.firstNameErrorMessage(l.firstName),lastNameError:G.lastNameErrorMessage(l.lastName),emailError:G.emailErrorMessage(l.email,n.toggleExistingAccount),passwordError:G.passwordErrorMessage(l.password)}))});var I=B.default.createElement(q.PaymentInfoSection,{paymentSpec:b,iframeUrl:t,idealBanks:i,countryList:r,formData:l,vatEnabled:Boolean(v.vatEnabled),actions:a,ref:function(e){n.paymentInfoSection=e},showTrialVersion:d,userInfo:_,submitForm:this.resubmitForm,paymentPayPalV2Flow:o.paymentPayPalV2Flow,braintreeClientToken:y,paymentBannerError:S,planNamePrefixedWithDropbox:v.namePrefixedWithDropbox,price:c.currentTransitionPrices}),M=l.scheduleId.formattedValue,x=X.getAvailableAddonSelectors(M,v,c.addonPricing),A=L.intl.formatMessage({id:"KKqy5i",defaultMessage:"Add ons"}),E=[E,function(e,t){return B.default.createElement(Z.SectionWrapperWithTitle,{index:e,key:"billing-schedule-section-"+e,modifier:"schedule-selection",title:(t=void 0===(t=t)?!0:t)?U.defineMessage({id:"xs62vu",defaultMessage:"{index}. Choose your billing cycle"}):L.intl.formatMessage({id:"r4whCV",defaultMessage:"Choose your billing cycle"}),isOrderSummaryRedesign:T},F)},0<x.length?function(){return B.default.createElement(Z.SectionWrapperWithTitle,{key:"addons-section",modifier:"addons",title:A,isOrderSummaryRedesign:T},B.default.createElement("div",{className:"grid__item grid__item--large--11-12"},x.map(function(e){var t=e.id,a=e.type,r=e.addons,e=e.singleSelectorInfo;return B.default.createElement(K.AddonSelector,{id:t,key:t,type:a,addons:r,singleSelectorInfo:e,scheduleId:M,onSelect:n.onSelectAddon})})))}:void 0,m,function(e,t){var a=T?"billing-redesign":"billing";return B.default.createElement(Z.SectionWrapperWithTitle,{forwardRef:n.paymentSectionRef,index:e,key:"payment-section-"+e,modifier:a,title:(t=void 0===(t=t)?!0:t)?U.defineMessage({id:"2/IxPb",defaultMessage:"{index}. Enter payment details"}):L.intl.formatMessage({id:"yxgpXI",defaultMessage:"Enter payment details"}),isOrderSummaryRedesign:T},I)}],D=!T,O=[],V=1;E.forEach(function(e){e&&(O.push(e(V,D)),V+=1)});m=d?this.handleSubmitTryForm:this.onSubmitFormWithCaptchaScore,P=B.default.createElement("section",{className:"payment-form-container__section grid__item"},B.default.createElement(Z.Divider,null),B.default.createElement(H.SubmitPaymentForm,{actions:a,additionalTermsOfService:null!==(E=v.additionalTermsOfService)&&void 0!==E?E:null,buyLink:null===(E=null==v?void 0:v.pageUrl)||void 0===E?void 0:E.buyLink,currentTransitionPrices:c.currentTransitionPrices,formData:l,isLoadingPrices:c.loadingPrices,onClick:m,pageState:u,planNamePrefixedWithDropbox:v.namePrefixedWithDropbox,showMarketingOptInIfNewAccount:p,showTrialVersion:d,showPromoLegalCopy:Boolean(P)})),P=B.default.createElement("div",{className:"payment-form-container__submit-and-footer",ref:this.submitSectionAndFooterRef},P,B.default.createElement("div",{className:"grid__item"},this.renderWorldpayEntityText()),B.default.createElement(Y.LazyRebrandArborMinimalFooter,{localeSelectorWithoutCss:!0}));return B.default.createElement("div",{className:"grid__container payment-form-container"},B.default.createElement("form",{method:"post",className:"payment-form",onKeyPress:this.handlePress},O),T&&P)},_.prototype.renderWorldpayEntityText=function(){return-1===_.excludeWorldpayEntityTextForCountry.indexOf(this.props.formData.countryCode.formattedValue)?B.default.createElement(s.WorldPayEntityInfo,null):null},_.prototype.render=function(){var e=this.props,t=e.actions,a=e.formData,r=e.pageState,n=e.pricingState,o=e.showMarketingOptInIfNewAccount,i=e.showTrialVersion,s=e.taxNamesByCountry,l=e.experiments,u=this.state.selectedProduct,c=u.included,e=i?this.handleSubmitTryForm:this.onSubmitFormWithCaptchaScore,l="ON"===l.checkoutNewOrderSummary;return B.default.createElement("div",{className:d.default("PurchaseForm","grid__container")},B.default.createElement("div",{className:d.default("grid__item","PurchaseForm__payment-col","PurchaseForm__payment-col--desktopSticky",{"grid__item--medium--11-24":!l}),ref:this.paymentFormRef},this.renderPaymentForm()),B.default.createElement("div",{className:"grid__item--medium--1-12"}),l||B.default.createElement("div",{className:"PurchaseForm__summary-col PurchaseForm__summary-col--desktopSticky grid__item--medium--11-24 grid__item",ref:this.orderSummaryRef},B.default.createElement("div",{className:"grid__item"},B.default.createElement("div",{className:"grid__item"},B.default.createElement(m.OrderSummary,{actions:t,additionalTermsOfService:null!==(t=u.additionalTermsOfService)&&void 0!==t?t:null,buyLink:null===(t=null==u?void 0:u.pageUrl)||void 0===t?void 0:t.buyLink,formData:a,currentTransitionPrices:n.currentTransitionPrices,isLoadingPrices:n.loadingPrices,onClick:e,pageState:r,planColor:u.planColor,planName:u.name,planNamePrefixedWithDropbox:u.namePrefixedWithDropbox,taxNamesByCountry:s,showMarketingOptInIfNewAccount:o,showTrialVersion:i})),c&&B.default.createElement(f.IncludedFeatures,{content:c}))),l||B.default.createElement("div",{className:"grid__item"},this.renderWorldpayEntityText()),B.default.createElement(p.Captcha,{ref:this.setCaptchaComponent,source:"BUY_PURCHASE_FORM",onSubmit:this.resubmitForm,email:this.props.pageState.userInfo.email||this.props.formData.email.formattedValue}))},_.excludeWorldpayEntityTextForCountry=["US","CA","MX"],_);function _(e){var s=h.call(this,e)||this;s.paymentSectionRef=B.default.createRef(),s.orderSummaryRef=B.default.createRef(),s.paymentFormRef=B.default.createRef(),s.submitSectionAndFooterRef=B.default.createRef(),s.setCaptchaComponent=function(e){s.captchaComponent=e},s.submitForm=function(e){var t=((t={})[l.PaymentMethod.CreditCard]="/pro/ajax_buy",t[l.PaymentMethod.PayPal]="/pro/ajax_paypal_buy",t[l.PaymentMethod.DirectDeposit]="/payments/ajax_sepa_buy",t[l.PaymentMethod.Ideal]="/payments/ajax_ideal_buy",t[l.PaymentMethod.ApplePay]="/pro/ajax_buy",t);s.onSubmitProBuyForm({trigger:e,url:t[s.props.formData.paymentMethod.formattedValue]})},s.handleSubmitTryForm=function(e){e.preventDefault(),s.onSubmitFormWithCaptchaScore()},s.submitTryForm=function(e){var t=s.state.selectedProduct;i.ProEventsLogger.log("clicked_start_free_trial_cta_"+t.name.toLowerCase());(t={})[l.PaymentMethod.CreditCard]="/pro/ajax_try",t[l.PaymentMethod.PayPal]="/pro/ajax_paypal_try",t[l.PaymentMethod.TokenConnect]="/pro/ajax_try";s.onSubmitProBuyForm({trigger:e,url:t[s.props.formData.paymentMethod.formattedValue]})},s.onSubmitProBuyForm=function(e){var t=e.trigger,a=e.url,r=s.props,n=r.actions,o=r.continueURI,i=r.experiments,e=r.pageState.promoSpec,r=s.state.selectedProduct,o={cont:o,is_pro_buy_form:!0,send_conversion_data:!0};s.saveState(),e&&(o.is_pro_buy_form=!1,o.promo_ids=e.id,e.cashCode&&(o.code=e.cashCode)),"professional"===r.productPlan&&void 0!==(null===(e=r.trialInfo)||void 0===e?void 0:e.trialDuration)&&(o.offered_trial_duration=r.trialInfo.trialDuration),n.submitProBuyForm({additionalData:o,allowSubmitWithoutTOS:!1,captchaComponentRef:s.captchaComponent,handle3DsMessage:s.paymentInfoSection.getCreditCardFrame().handle3DsMessage,enableBinRouting:!0,prepareForSubmission:s.prepareForSubmission.bind(s),trigger:t,url:a,paymentPayPalV2Flow:i.paymentPayPalV2Flow})},s.onSubmitFormWithCaptchaScore=function(){s.captchaComponent&&s.captchaComponent.getWrappedComponent().submit()},s.resubmitForm=function(e){void 0===e&&(e=u.SubmitFormTriggerType.ButtonClick),s.props.showTrialVersion?s.submitTryForm(e):s.submitForm(e)},s.handleResize=function(){var e=null===(a=s.orderSummaryRef)||void 0===a?void 0:a.current,t=null===(n=s.paymentFormRef)||void 0===n?void 0:n.current,a=null===(r=s.paymentSectionRef)||void 0===r?void 0:r.current,r=null===(n=s.submitSectionAndFooterRef)||void 0===n?void 0:n.current,n=null===(n=s.props.orderSummaryRedesignRef)||void 0===n?void 0:n.current;r&&n&&r.style.setProperty("--order-summary-height",Math.round(n.getBoundingClientRect().height)+"px"),e&&t&&a&&(r=e.getBoundingClientRect().height,n=t.getBoundingClientRect().top,n=r+(a.getBoundingClientRect().top+window.pageYOffset)-(n+window.pageYOffset),t.style.setProperty("--sticky-form-height",Math.round(n)+"px"),e.style.setProperty("--window-width",document.documentElement.clientWidth+"px"))},s.onLoginClick=function(){i.GrowthEventsLogger.log("buy_checkout_sign_in_modal",{action:"click",location:"in_product"}),s.props.actions.toggleExistingAccount()},s.toggleExistingAccount=function(){s.props.actions.toggleExistingAccount(!1)},s.onSelectAddon=function(t,e){var a=s.props,r=a.formData,a=a.actions,r=r.selectedAddons.formattedValue;a.updateSelectedAddons(e?n.__spreadArrays(r,[t]):r.filter(function(e){return e.id!==t.id}))},s.handlePress=function(e){e.key===a.Key.Enter&&e.target instanceof Element&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName)&&(e.preventDefault(),s.onSubmitFormWithCaptchaScore())},s.resizeThrottle=new r.RafThrottle(s.handleResize);e=y.getSelectedUiProduct(s.props.supportedProducts,s.props.productPlanType);return s.state={hasLoadedSubChangePlans:!1,selectedProduct:e},s.props.showTrialVersion&&(e=s.props.pageState.paymentFormSpec,s.props.actions.updatePaymentMethod(e.default_payment_method())),s}t.BuyPurchaseForm=g}),define("modules/clean/react/payments/buy/components/payment_form_utils",["require","exports","tslib","react","modules/core/i18n","classnames"],function(e,s,i,l,u,c){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AccountToggleLink=s.SectionWrapperWithTitleAndLink=s.SectionWrapperWithTitle=s.Divider=void 0,l=i.__importDefault(l),c=i.__importDefault(c),s.Divider=function(){return l.default.createElement("hr",{"aria-hidden":"true",className:"payment-form-container__divider grid__item payment-form-container__divider"})},s.SectionWrapperWithTitle=function(e){var t=e.children,a=e.forwardRef,r=e.index,n=e.modifier,o=e.title,e=e.isOrderSummaryRedesign,n=i.__assign({className:c.default("payment-form-container__section payment-form-container__section--"+n+" grid__item",{"payment-form-container__section--order-summary-redesign":e})},a?{ref:a}:{}),a=c.default("payment-form-container__header grid__item",{"payment-form-container__header--order-summary-redesign":e});return l.default.createElement("section",i.__assign({},n),!e&&l.default.createElement(s.Divider,null),l.default.createElement("div",{className:a},"string"==typeof o?o:u.intl.formatMessage(o,{index:r})),t)},s.SectionWrapperWithTitleAndLink=function(e){var t=e.index,a=e.link,r=e.title,n=e.children,o=e.isOrderSummaryRedesign,i=c.default("payment-form-container__section grid__item",{"payment-form-container__section--order-summary-redesign-link":o}),e=c.default("payment-form-container__header grid__container grid--x-bookend",{"payment-form-container__header--order-summary-redesign":o});return l.default.createElement("section",{className:i},!o&&l.default.createElement(s.Divider,null),l.default.createElement("div",{className:e},l.default.createElement("div",{className:"payment-form-container__header--account"},"string"==typeof r?r:u.intl.formatMessage(r,{index:t})),a),n)},s.AccountToggleLink=function(e){var t=e.linkText,a=e.linkKey,r=e.onClick,e=e.otherFormatters,e=void 0===e?{}:e;return l.default.createElement("div",{className:"payment-form-container__login"},u.intl.formatMessage(t,i.__assign(((t={})[a]=function(e){return l.default.createElement("button",{"aria-label":"",key:"account-toggle",className:"account-toggle button--as-link",onClick:r,type:"button"},e)},t),e)))}}),define("modules/clean/react/payments/buy/components/account/new_account_input",["require","exports","tslib","react","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/components/password_strength_meter","modules/clean/react/payments/buy/components/account/new_account_input_utils","modules/clean/auth/common/utils","classnames"],function(e,t,a,s,l,u,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewAccountInput=void 0,s=a.__importDefault(s),p=a.__importDefault(p);var r,a=(r=s.default.Component,a.__extends(n,r),n.prototype.render=function(){var e=this.props,t=e.autocomplete,a=e.emailError,r=e.firstNameError,n=e.formData,o=e.lastNameError,i=e.passwordError,e=d.lastNameGoesFirst(),r=s.default.createElement(l.LabeledTextInput,{name:"fname",autocomplete:t?"given-name":"off",labelText:c.accountLabels.firstName,containerClassName:p.default("grid__item--fluid",{"grid__item--margin-right--1-24":!e}),value:n.firstName.rawValue,onBlur:this.onFirstNameBlur,onChange:this.onFirstNameChanged,errorText:r}),o=s.default.createElement(l.LabeledTextInput,{name:"lname",autocomplete:t?"family-name":"off",labelText:c.accountLabels.lastName,containerClassName:p.default("grid__item--fluid",{"grid__item--margin-right--1-24":e}),value:n.lastName.rawValue,onBlur:this.onLastNameBlur,onChange:this.onLastNameChanged,errorText:o});return s.default.createElement("div",{className:"grid__item account-info grid__item--large--11-12"},s.default.createElement("div",{className:"account-info__name grid__container grid--x-bookend grid--y-top"},e?s.default.createElement(s.default.Fragment,null,o,r):s.default.createElement(s.default.Fragment,null,r,o)),s.default.createElement("div",{className:"account-info__cred grid__container grid--x-bookend grid--y-top"},s.default.createElement(l.LabeledTextInput,{name:"account-email",autocomplete:t?"email":"off",type:"email",labelText:c.accountLabels.email,containerClassName:"grid__item--fluid grid__item--margin-right--1-24",value:n.email.rawValue,onBlur:this.onEmailBlur,onChange:this.onEmailChanged,errorText:a}),s.default.createElement("div",{className:"account-info__password grid__item--fluid"},s.default.createElement(u.PasswordStrengthMeter,{password:n.password.rawValue}),s.default.createElement(l.LabeledTextInput,{name:"password",type:"password",autocomplete:"new-password",labelText:c.accountLabels.password,containerClassName:"grid__item",value:n.password.rawValue,onChange:this.onPasswordChanged,onBlur:this.onPasswordBlur,errorText:i}))))},n);function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.onFirstNameChanged=function(e){t.props.actions.updateFirstName(e.value)},t.onFirstNameBlur=function(e){t.props.actions.showFormFieldErrors(["firstName"],"FirstNameBlur")},t.onLastNameChanged=function(e){t.props.actions.updateLastName(e.value)},t.onLastNameBlur=function(e){t.props.actions.showFormFieldErrors(["lastName"],"LastNameBlur")},t.onEmailChanged=function(e){t.props.actions.updateEmail(e.value)},t.onEmailBlur=function(e){t.props.actions.showFormFieldErrors(["email"],"EmailBlur")},t.onPasswordChanged=function(e){t.props.actions.updatePassword(e.value)},t.onPasswordBlur=function(e){t.props.actions.showFormFieldErrors(["password"],"PasswordBlur")},t}t.NewAccountInput=a}),define("modules/clean/react/payments/buy/components/account/new_account_input_utils",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_values"],function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emailErrorMessage=t.passwordErrorMessage=t.lastNameErrorMessage=t.firstNameErrorMessage=t.accountLabels=void 0,r=a.__importDefault(r),i=a.__importStar(i),t.accountLabels={firstName:n.intl.formatMessage({id:"MF/EZ0",defaultMessage:"First name"}),lastName:n.intl.formatMessage({id:"o/EyS0",defaultMessage:"Last name"}),email:n.intl.formatMessage({id:"ycH5zr",defaultMessage:"Email"}),password:n.intl.formatMessage({id:"Dj00Xc",defaultMessage:"Password"})},t.firstNameErrorMessage=function(e){return e.showError&&!o.FormValueHelper.isValid(e)?n.intl.formatMessage({id:"first name",defaultMessage:"Please enter a valid first name."}):""},t.lastNameErrorMessage=function(e){return e.showError&&!o.FormValueHelper.isValid(e)?n.intl.formatMessage({id:"last name",defaultMessage:"Please enter a valid last name."}):""},t.passwordErrorMessage=function(e){return e.showError?n.intl.formatMessage({id:"y53jZ7",defaultMessage:"Passwords must be 6 characters or more."}):""},t.emailErrorMessage=function(e,t){if(!e.showError)return"";switch(e.errorState){case i.EmailErrorState.Empty:return n.intl.formatMessage({id:"uRA/73",defaultMessage:"Please enter an email address."});case i.EmailErrorState.NoAt:return n.intl.formatMessage({id:"JfCj3L",defaultMessage:"An email address must contain a single @"});case i.EmailErrorState.BadUsername:var a=e.formattedValue.split("@")[0];return n.intl.formatMessage({id:"YkS8kL",defaultMessage:"The username portion of the email address is invalid (the portion before the @: {username})."},{username:a});case i.EmailErrorState.BadDomain:a=e.formattedValue.split("@")[1];return""===a?n.intl.formatMessage({id:"9wdsbq",defaultMessage:"The domain portion of the email address is invalid (the portion after the @)."}):n.intl.formatMessage({id:"HwUfO2",defaultMessage:"The domain portion of the email address is invalid (the portion after the @: {domain})."},{domain:a});case i.EmailErrorState.TakenWarning:return r.default.createElement("span",null,n.intl.formatMessage({id:"KP0Yzf",defaultMessage:"This e-mail is already taken."}));case i.EmailErrorState.TakenError:return r.default.createElement("span",null,n.intl.formatMessage({id:"KANDIa",defaultMessage:"This e-mail is already taken. <a_signin>Sign in</a_signin> or <a_forgot>reset your password</a_forgot>."},{a_signin:function(e){return r.default.createElement("a",{key:"a-signin",className:"login-register-switch-link",onClick:t},e)},a_forgot:function(e){return r.default.createElement("a",{key:"a-forgot",href:"/forgot"},e)}}));default:return""}}}),define("modules/clean/react/payments/buy/components/addons/addon_utils",["require","exports","tslib","react","modules/clean/payments/skus/constants","react-intl"],function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableAddons=t.getAvailableAddonSelectors=t.getFormattedPrice=void 0,r=a.__importDefault(r);var i=o.defineMessages({yearlyPrice:{id:"9x2Fy/",defaultMessage:"{price} / year"},monthlyPrice:{id:"Jycu7P",defaultMessage:"{price} / month"}});function s(e,t,a){var r=t.addonSelectorsForAnnualBilling,t=t.addonSelectorsForMonthlyBilling;return(e===n.ScheduleId.YEARLY?r:t).map(function(e){return e.addons.forEach(function(e){var t;e.displayPrice=null!==(t=a[e.id])&&void 0!==t?t:e.displayPrice}),e})}t.getFormattedPrice=function(e,t){return e===n.ScheduleId.YEARLY?r.default.createElement(o.FormattedMessage,a.__assign({},i.yearlyPrice,{values:{price:t}})):r.default.createElement(o.FormattedMessage,a.__assign({},i.monthlyPrice,{values:{price:t}}))},t.getAvailableAddonSelectors=s,t.getAvailableAddons=function(e,t,a){return s(e,t,a).reduce(function(e,t){t=t.addons.map(function(e){return String(e.id)});return e.concat(t)},[])}}),define("modules/clean/react/payments/buy/components/addons/addon_selector",["require","exports","tslib","react","modules/clean/react/payments/buy/components/addons/single_addon_selector","modules/clean/ts_utils","dropbox/proto/js_init_data/checkout/checkout_page"],function(e,t,a,i,s,l,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddonSelector=void 0,i=a.__importDefault(i);var u=r.checkout_page.AddonSelector.AddonSelectorType;t.AddonSelector=function(e){var t=e.type,a=e.addons,r=e.singleSelectorInfo,n=e.onSelect,o=e.scheduleId;switch(t){case u.SINGLE_SELECTOR:return i.default.createElement(s.SingleAddonSelector,{title:r.title,description:r.description,addons:a,onSelect:n,scheduleId:o});case u.MULTI_SELECTOR:throw new Error("Not implemented yet.");case u.UNKNOWN_SELECTOR_TYPE:throw new Error("Unknown selector type specified.");default:l.enforceExhaustive(t)}}}),define("modules/clean/react/payments/buy/components/addons/single_addon_selector",["require","exports","tslib","react","modules/clean/react/components/css","dig-components/controls","dig-components/typography","modules/clean/react/payments/buy/components/addons/addon_utils"],function(e,t,a,s,r,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleAddonSelector=void 0,s=a.__importStar(s),t.SingleAddonSelector=r.requireCssWithComponent(function(e){var t=e.title,a=e.description,r=e.addons,n=e.scheduleId,o=e.onSelect,i=r[0],r=s.useCallback(function(e){o(i,e.currentTarget.checked)},[o,i]);return s.default.createElement("div",{className:"single-addon-selector"},s.default.createElement("div",{className:"single-addon-selector__title-container"},s.default.createElement(u.Title,{id:"single-addon-selector__title",className:"single-addon-selector__title",size:"small"},t),s.default.createElement(l.Checkbox,{onChange:r,"aria-labelledby":"single-addon-selector__title"})),s.default.createElement(u.Text,{className:"single-addon-selector__price",tagName:"div",color:"faint"},c.getFormattedPrice(n,i.displayPrice)),s.default.createElement(u.Text,{className:"single-addon-selector__description",tagName:"div",color:"faint"},a))},["/static/css/buy/components/single_addon_selector-vflbdaWeG.css","/static/css/dig-components/index.web-vfldraCVQ.css"])}),define("modules/clean/react/payments/buy/helpers/checkout_api_v2_helpers",["require","exports","api_v2/default_user_client","api_v2/noauth_client","modules/clean/viewer"],function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkoutApiV2Client=void 0,t.checkoutApiV2Client=function(e,t){void 0===t&&(t=!1);t=n.Viewer.get_viewer().get_user_by_role(e,t);return(t?new a.DefaultUserApiV2Client(t):new r.NoAuthApiV2Client).ns("checkout")}}),define("modules/clean/react/payments/buy/components/plan/schedule_selection",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/plan/schedule_selection_utils","dig-components/typography","modules/clean/react/payments/buy/components/inputs/inputs"],function(e,t,a,y,h,g,_,P,b,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleSelection=void 0,y=a.__importDefault(y),h=a.__importDefault(h);var n,a=(n=y.default.Component,a.__extends(r,n),r.prototype.componentDidMount=function(){var e=this.props,t=e.actions,e=e.paymentSchedule;e&&"monthly"===e&&t.updateSchedule(_.ScheduleId.MONTHLY)},r.prototype.renderYearlyPlanBlock=function(){var e=this,t=this.props,a=t.locale,r=t.showYearlyPricePerMonth,n=t.isOrderSummaryRedesign,o=t.displayPrices,i=t.useAUTaxInclusivePricing,s=t.initialPricingStrings,l=this.props.formData.scheduleId.formattedValue,u=P.getPricingStrings(o,i,s),c=u.yearlyPrice,d=u.yearlyPriceAx,p=u.yearlyPriceNoSavings,m=u.yearlyGstIncluded,f=u.yearlyPricePerMonth,t=u.yearlyPricePerMonthAx,o=u.monthlyGstIncluded,s=u.yearlyPricePerMonthSubText,u=h.default({"plan-info__savings":!0,"plan-info__savings--strike":"en"===a}),a="en"===a?p:g.intl.formatMessage({id:"rOFcNI",defaultMessage:"(includes 2 free months)"}),p=y.default.createElement("span",{id:"plan-info__label--yearly",className:"plan-info__label plan-info__label--yearly",onClick:function(){return e.onPlanLabelClick(_.ScheduleId.YEARLY)},"aria-hidden":"true"},g.intl.formatMessage({id:"VeKS9s",defaultMessage:"Billed Yearly"})),s=y.default.createElement(y.default.Fragment,null,y.default.createElement(b.Text,{className:"plan-info__schedule-subtitle",tagName:"div",color:"faint"},c),y.default.createElement("span",{className:"ax-visually-hidden"},d),y.default.createElement(b.Text,{className:"plan-info__schedule-subtitle",size:"small",tagName:"div",color:"faint"},s),y.default.createElement("span",{className:"ax-visually-hidden"},t)),m=y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},r?f:c),y.default.createElement("span",{className:"ax-visually-hidden"},r?t:d),!r&&y.default.createElement("div",{"aria-hidden":"true",className:u},a),i&&y.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},r?o:m));return y.default.createElement("div",{className:"plan-info__choice plan-info__yearly"},y.default.createElement(S.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--yearly",ariaLabelId:"plan-info__label--yearly",className:"plan-info__radio",labelClassName:"plan-info__container",value:_.ScheduleId.YEARLY.toString(),checked:l===_.ScheduleId.YEARLY,labelSpan:p,onClickOrChange:this.onScheduleChange}),n?s:m)},r.prototype.renderMonthlyPlanBlock=function(){var e=this,t=this.props,a=t.formData,r=t.isOrderSummaryRedesign,n=t.displayPrices,o=t.useAUTaxInclusivePricing,i=t.initialPricingStrings,s=a.scheduleId.formattedValue,t=P.getPricingStrings(n,o,i),a=t.monthlyPrice,n=t.monthlyPriceAx,i=t.monthlyGstIncluded,t=y.default.createElement("span",{id:"plan-info__label--monthly",className:"plan-info__label plan-info__label--monthly",onClick:function(){return e.onPlanLabelClick(_.ScheduleId.MONTHLY)},"aria-hidden":"true"},g.intl.formatMessage({id:"Fb6V6v",defaultMessage:"Billed Monthly"})),i=r?y.default.createElement(y.default.Fragment,null,y.default.createElement(b.Text,{className:"plan-info__schedule-subtitle",tagName:"div",color:"faint"},a),y.default.createElement("span",{className:"ax-visually-hidden"},n)):y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},a),y.default.createElement("span",{className:"ax-visually-hidden"},n),o&&y.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},i));return y.default.createElement("div",{className:"plan-info__choice plan-info__monthly"},y.default.createElement(S.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--monthly",ariaLabelId:"plan-info__label--monthly",className:"plan-info__radio",labelClassName:"plan-info__container",value:_.ScheduleId.MONTHLY.toString(),checked:s===_.ScheduleId.MONTHLY,labelSpan:t,onClickOrChange:this.onScheduleChange}),i)},r.prototype.render=function(){var e=this.props.paymentSchedule;return e&&"yearly"===e?y.default.createElement("div",{className:"grid__container plan-info"},this.renderYearlyPlanBlock()):e&&"monthly"===e?y.default.createElement("div",{className:"grid__container plan-info"},this.renderMonthlyPlanBlock()):y.default.createElement("div",{className:"grid__container plan-info"},this.renderYearlyPlanBlock(),y.default.createElement("div",{className:"plan-info__spacer"}),this.renderMonthlyPlanBlock())},r);function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.onScheduleChange=function(e,t,a){e=e.currentTarget;a=a||e.value;a=parseInt(a,10);a!==r.props.formData.scheduleId.formattedValue&&r.props.actions.updateSchedule(a)},r.onPlanLabelClick=function(e){e!==r.props.formData.scheduleId.formattedValue&&r.props.actions.updateSchedule(e)},r}t.ScheduleSelection=a}),define("modules/clean/react/payments/buy/components/plan/schedule_selection_utils",["require","exports","tslib","react-intl","react","react-intl"],function(e,f,y,t,h,g){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.getPricingStrings=f.ScheduleSelectionPricingStrings=void 0,h=y.__importDefault(h),f.ScheduleSelectionPricingStrings=t.defineMessages({yearlyPrice:{id:"apg6vF",defaultMessage:"{price} / year"},yearlyPriceAx:{id:"87seMW",defaultMessage:"{price} per year. Save {savings}"},monthlyPrice:{id:"x8/3yY",defaultMessage:"{price} / month"},monthlyPriceAx:{id:"4CkvFg",defaultMessage:"{price} per month"},yearlyPricePerMonthAx:{id:"Drd5tk",defaultMessage:"{price} per month when billed yearly"},yearlyPricePerMonthSubText:{id:"ACfKQX",defaultMessage:"({price} / month)"},pricePerYearGST:{id:"zik2vk",defaultMessage:"{price} per year. Save {savings}. Prices include GST"},pricePerMonthGST:{id:"iG2E95",defaultMessage:"{price} per month. Includes GST"},pricesIncludeGST:{id:"fH6B8y",defaultMessage:"(prices include GST)"},includesGST:{id:"EMZH/l",defaultMessage:"(includes GST)"}}),f.getPricingStrings=function(e,t,a){var r,n,o,i,s,l,u,c,d,p,m;return m=a?(r=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:a.yearlyPrice}})),i=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPriceAx,{values:{price:a.yearlyPrice,savings:a.yearlySavings}})),n=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:a.monthlyPrice}})),s=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPriceAx,{values:{price:a.monthlyPrice}})),o=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:a.yearlyWithoutSavings}})),l=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:a.annualPriceAsMonthly}})),p=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPricePerMonthAx,{values:{price:a.annualPriceAsMonthly}})),h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPricePerMonthSubText,{values:{price:a.annualPriceAsMonthly}}))):(m=e.yearlyPrice,u=e.monthlyPrice,c=e.yearlySavings,d=e.taxInclusiveYearlyPrice,a=e.taxInclusiveMonthlyPrice,e=e.taxInclusiveYearlySavings,p=t?(r=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:d?d.formatCurrency():""}})),i=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.pricePerYearGST,{values:{price:d?d.formatCurrency():"",savings:e?e.formatCurrency():""}})),n=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:a?a.formatCurrency():""}})),s=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.pricePerMonthGST,{values:{price:a?a.formatCurrency():""}})),o=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:a?a.multiply(12).formatCurrency():""}})),l=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:d?d.divide(12).formatCurrency():""}})),h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPricePerMonthAx,{values:{price:d?d.divide(12).formatCurrency():""}}))):(r=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:m?m.formatCurrency():""}})),i=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPriceAx,{values:{price:m?m.formatCurrency():"",savings:c?c.formatCurrency():""}})),n=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:u?u.formatCurrency():""}})),s=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPriceAx,{values:{price:u?u.formatCurrency():""}})),o=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPrice,{values:{price:u?u.multiply(12).formatCurrency():""}})),l=h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.monthlyPrice,{values:{price:m?m.divide(12).formatCurrency():""}})),h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPriceAx,{values:{price:m?m.divide(12).formatCurrency():""}}))),h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.yearlyPricePerMonthSubText,{values:{price:t?null==d?void 0:d.divide(12).formatCurrency():null==m?void 0:m.divide(12).formatCurrency()}}))),{yearlyPrice:r,yearlyPriceAx:i,monthlyPrice:n,monthlyPriceAx:s,yearlyPriceNoSavings:o,yearlyGstIncluded:h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.pricesIncludeGST)),monthlyGstIncluded:h.default.createElement(g.FormattedMessage,y.__assign({},f.ScheduleSelectionPricingStrings.includesGST)),yearlyPricePerMonth:l,yearlyPricePerMonthAx:p,yearlyPricePerMonthSubText:m}}});var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){e[r=void 0===r?a:r]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t};define("modules/clean/react/payments/buy/components/payments/async_sox_compliance_warning",["require","exports","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],function(a,e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSOXComplianceBanner=void 0,e.AsyncSOXComplianceBanner=t.Loadable({loader:function(){return r.waitForTTI().then(function(){return new Promise(function(e,t){a(["modules/clean/react/payments/buy/components/payments/sox_compliance_warning"],e,t)}).then(__importStar).then(function(e){return e.SOXComplianceBanner})})}})}),define("modules/clean/react/payments/buy/components/payments/buy_payment_info_section",["require","exports","tslib","react","classnames","modules/clean/react/tooltip","modules/clean/react/image","modules/clean/static_urls","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/validation","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/buy/components/payments/ideal_form","modules/clean/react/payments/buy/components/payments/payment_method_selector","modules/clean/react/payments/buy/components/payments/cpf_tooltip","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame","modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form","modules/clean/react/payments/checkout/components/payment_method_form/address_form","modules/core/exception","dig-components/icons/src","dig-components/icons"],function(a,e,n,l,o,i,s,u,c,d,p,m,f,y,r,h,g,_,t,P,b,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaymentInfoSection=void 0,l=n.__importDefault(l),o=n.__importDefault(o),P=n.__importStar(P);var v,C=(v=l.default.Component,n.__extends(E,v),E.prototype.componentDidMount=function(){this.props.actions.updateHistory&&this.props.actions.updateHistory(),"ON"===this.props.paymentPayPalV2Flow&&this.props.braintreeClientToken&&this.createPaypalBtn(),this.props.price&&this.props.planNamePrefixedWithDropbox||this.props.paymentSpec.hide_apple_pay()},E.prototype.prepareForSubmission=function(){var e=this.props.formData.paymentMethod;if(e.formattedValue===c.PaymentMethod.CreditCard)return this.creditCardFrame.tokenize();if(e.formattedValue===c.PaymentMethod.ApplePay&&this.props.planNamePrefixedWithDropbox&&this.props.price){e={planName:this.props.planNamePrefixedWithDropbox,price:this.props.price};return this.props.actions.applePayAction(e)}return Promise.resolve(!0)},E.prototype.getCreditCardFrame=function(){return this.creditCardFrame},E.prototype.vatErrorString=function(){var e=this.props.formData.vat;return!f.FormValueHelper.isValid(e)&&e.showError?p.intl.formatMessage({id:"iRjYtd",defaultMessage:"Please enter a valid VAT number (ex: {examples})."},{examples:d.getVatExamples(this.props.formData.countryCode.formattedValue).join(", ")}):""},E.prototype.cpfErrorString=function(){var e=this.props.formData.cpf;return!f.FormValueHelper.isValid(e)&&e.showError?p.intl.formatMessage({id:"MQDRWx",defaultMessage:"Please enter a valid CPF number."}):""},E.prototype.renderLocationFields=function(){return l.default.createElement("div",{className:"grid__item"},l.default.createElement(t.AddressForms,{paymentSpec:this.props.paymentSpec,formData:this.props.formData,actions:this.props.actions,countryList:this.props.countryList}),this.renderVatFields(),this.renderCpfInput())},E.prototype.renderVatFields=function(){var e=this.props,t=e.formData,a=e.paymentSpec,r=e.vatEnabled,n=null;return a.should_show_vat_for_country(t.countryCode.formattedValue)&&r&&(e=t.vat.errorState&&t.vat.showError,a=d.getVatPrefix(t.countryCode.formattedValue),r=o.default({"payment-info__vat-input":!0,"payment-info__vat-input--valid":""!==t.vat.formattedValue&&f.FormValueHelper.isValid(t.vat)}),n=l.default.createElement(m.LabeledTextInput,{className:"payment-info__vat",inputClassName:r,containerClassName:"grid__item vat-container",name:"vat",labelText:p.intl.formatMessage({id:"eZAuK1",defaultMessage:"VAT number (optional)"}),placeholder:a,hasError:Boolean(e),value:t.vat.rawValue,onBlur:this.onVatBlur,onChange:this.onVatChange,errorText:this.vatErrorString()})),n},E.prototype.renderCpfInput=function(){var e,t,a,r,n=null;return this.props.paymentSpec.should_require_cpf(this.props.formData.countryCode.formattedValue,this.props.formData.paymentMethod.formattedValue)&&(e=this.props.formData.cpf.errorState&&this.props.formData.cpf.showError,t=o.default({"payment-info__cpf-input":!0,"payment-info__cpf-input--valid":""!==this.props.formData.cpf.formattedValue&&f.FormValueHelper.isValid(this.props.formData.cpf)}),a=l.default.createElement("span",null,p.intl.formatMessage({id:"Z1BdZ2",defaultMessage:"CPF/CNPJ"}),l.default.createElement(i.Tooltip,{position:i.TooltipPosition.RIGHT,tooltip_contents:l.default.createElement(h.CPFTooltip,null),is_focusable:!0},l.default.createElement(s.Image,{className:"cpf-tooltip-icon",src:u.static_url("/static/images/payments/buy/rebrand-info-vflRPzJtZ.png"),srcHiRes:u.static_url("/static/images/payments/buy/rebrand-info@2x-vflc1SGxi.png"),alt:p.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),width:15,height:15}))),r=p.intl.formatMessage({id:"+9XYcz",defaultMessage:"e.g. 100.001.101-00"}),n=l.default.createElement("div",{className:"grid__item"},l.default.createElement(m.LabeledTextInput,{className:"",inputClassName:t,containerClassName:"grid__item payment-info__cpf",name:"cpf",labelText:a,hasError:Boolean(e),value:this.props.formData.cpf.rawValue,onBlur:this.onCpfBlur,onChange:this.onCpfChange,placeholder:r,errorText:this.cpfErrorString()}))),n},E.prototype.renderPaymentMethodSelector=function(){var e=this.props,t=e.paymentSpec,a=e.formData,e=e.showTrialVersion;return l.default.createElement(r.PaymentMethodSelector,{paymentSpec:t,paymentMethod:a.paymentMethod.rawValue,updatePaymentMethod:this.props.actions.updatePaymentMethod,countryCode:a.countryCode.rawValue,zipCode:a.zipCode.rawValue,showTrialVersion:e,fullWidth:!1})},E.prototype.paymentTokenConnectDetailsText=function(){return p.intl.formatMessage({id:"dIi5ZR",defaultMessage:"Your payment method has been pre-configured through your bank."})},E.prototype.renderPaymentTokenConnectDetailsText=function(){var e=null;return e=null!=this.props.paymentSpec.spec.token_connect_prefill_data?l.default.createElement("p",null,l.default.createElement("small",null,this.paymentTokenConnectDetailsText())):e},E.prototype.render=function(){var e,t,a=this,r=this.props,n=r.actions,o=r.formData,i=r.idealBanks,s=this.renderLocationFields(),r=s;return o.paymentMethod.formattedValue===c.PaymentMethod.DirectDeposit?r=l.default.createElement(_.DirectDebitForm,{locationFields:s,formData:o,actions:n}):o.paymentMethod.formattedValue===c.PaymentMethod.Ideal&&(r=l.default.createElement(y.IdealForm,{locationFields:s,formData:o,actions:n,idealBanks:i})),"ON"===this.props.paymentPayPalV2Flow&&(e=l.default.createElement("span",{className:"paypal-button-container",hidden:o.paymentMethod.formattedValue!==c.PaymentMethod.PayPal},l.default.createElement("span",{className:"paypal-button-start",hidden:""!==o.payPalNonce.formattedValue},l.default.createElement("label",{className:"input__label"},p.intl.formatMessage({id:"Xkz5XK",defaultMessage:"Sign into PayPal to continue with this payment method:"})),l.default.createElement("div",{id:"paypal-button"})),l.default.createElement("span",{className:"paypal-button-end",hidden:""===o.payPalNonce.formattedValue},l.default.createElement("span",{id:"paypal-button-account-email"},o.payPalNonce.email),l.default.createElement("br",null),l.default.createElement("a",{href:"#",onClick:this.clearPayPalNonce},p.intl.formatMessage({id:"TFnOYM",defaultMessage:"Change PayPal account"}))),l.default.createElement("span",{hidden:!1===o.payPalNonce.showError},l.default.createElement("label",{className:"input__label--error"},p.intl.formatMessage({id:"3z459e",defaultMessage:"Please select your PayPal account."}))))),this.props.paymentBannerError&&(t=l.default.createElement("div",{className:"payment-error-div payment-info grid__container inline-errors"},l.default.createElement("div",{className:"grid__item--fluid",style:{maxWidth:"30px",marginRight:"5px",marginLeft:"5px"}},l.default.createElement(S.UIIcon,{src:b.WarningLine,size:"large"})),l.default.createElement("div",{className:"grid__item--fluid grid__item--margin-right--1-24 payment-error-text"},this.props.paymentBannerError))),l.default.createElement("div",{id:"payment-info",className:"payment-info grid__container inline-errors"},this.renderPaymentTokenConnectDetailsText(),t,this.renderPaymentMethodSelector(),l.default.createElement("div",{className:"grid__item grid__item--large--11-12"},l.default.createElement(g.CreditCardFrame,{iframeUrl:this.props.iframeUrl,hidden:o.paymentMethod.formattedValue!==c.PaymentMethod.CreditCard,actions:this.props.actions,ref:function(e){a.creditCardFrame=e},nonce:o.nonce,bin:o.bin,submitForm:this.props.submitForm,getHeightFromIframe:!0}),e,r))},E);function E(){var t=null!==v&&v.apply(this,arguments)||this;return t.createPaypalBtn=function(){var r=t.props.braintreeClientToken||"",o=t.props.actions.updatePayPalNonce;Promise.all([new Promise(function(e,t){a(["braintree-web"],e,t)}).then(n.__importStar),new Promise(function(e,t){a(["paypal-api-checkout"],e,t)}).then(n.__importStar)]).then(function(e){var t=e[0],a=e[1].default,e=t.client,n=t.paypalCheckout;e.create({authorization:r},function(e,t){var r;e?P.reportException({err:new Error("Error creating Braintree client: "+e),severity:P.SEVERITY.CRITICAL}):(r=a,n.create({client:t},function(e,a){e?P.reportException({err:new Error("Error creating PayPal Checkout: "+e),severity:P.SEVERITY.CRITICAL}):r.Button.render({env:"production",style:{color:"gold",height:35,label:"paypal",shape:"rect",size:"responsive",tagline:!1},funding:{allowed:[r.FUNDING.CARD],disallowed:[r.FUNDING.CREDIT]},payment:function(){return a.createPayment({flow:"vault",enableShippingAddress:!1})},onAuthorize:function(e,t){return a.tokenizePayment(e,function(e,t){o(t.nonce,t.details.email)})},onCancel:function(e){},onError:function(e){P.reportException({err:new Error("PayPal Checkout error: "+e),severity:P.SEVERITY.CRITICAL})}},"#paypal-button").then(function(){})}))})})},t.clearPayPalNonce=function(e){e.preventDefault(),t.props.actions.updatePayPalNonce("","")},t.onVatBlur=function(e){t.props.actions.showFormFieldErrors(["vat"],"VatBlur"),t.props.actions.blurVat(e.value)},t.onVatChange=function(e){t.props.actions.updateVat(e.value)},t.onCpfBlur=function(e){t.props.actions.showFormFieldErrors(["cpf"],"CpfBlur"),t.props.actions.blurCpf(e.value)},t.onCpfChange=function(e){t.props.actions.updateCpf(e.value)},t}e.PaymentInfoSection=C}),define("modules/clean/react/payments/buy/components/payments/cpf_tooltip",["require","exports","tslib","react","modules/core/i18n"],function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CPFTooltip=void 0;var o,a=(o=(r=a.__importDefault(r)).default.Component,a.__extends(i,o),i.prototype.render=function(){var e=n.intl.formatMessage({id:"1ONP6O",defaultMessage:"The Cadastro de Pessoas Fsicas (CPF) is the the Brazilian individual taxpayer registry identification number. It has 11 digits and can be found on your CPF card. It consists of numbers, dots and a dash, as in the following example: 100.001.101-00."}),t=n.intl.formatMessage({id:"VsWgR6",defaultMessage:"The Cadastro Nacional da Pessoa Jurdica, or most commonly known as CNPJ, is a number that identifies legal entities and other legal arrangements at the Federal Revenue Service of Brazil. It has functions similar to those of the CPF, the only difference being that it is unique to the use of legal entities. It is a 14-digit number with a certain format, like in the following example: 00.000.000/0001-00"});return r.default.createElement("div",{className:"cpf-tooltip-contents"},r.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({id:"b1XaAp",defaultMessage:"What is CPF?"})),r.default.createElement("p",null,e),r.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({id:"grlpui",defaultMessage:"What is CNPJ?"})),r.default.createElement("p",null,t))},i);function i(){return null!==o&&o.apply(this,arguments)||this}t.CPFTooltip=a}),define("modules/clean/react/payments/buy/components/payments/marketing_opt_in",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs"],function(e,t,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarketingOptIn=void 0;var r,a=(r=(n=a.__importDefault(n)).default.Component,a.__extends(s,r),s.prototype.render=function(){var e=this.props,t=e.formData,a=e.isCreatingNewAccount,r=e.showMarketingOptInIfNewAccount,e=o.intl.formatMessage({id:"vRE9NS",defaultMessage:"Id like to receive direct marketing email updates from Dropbox"}),e=n.default.createElement("span",{className:"type--copy-small"},e);return r&&a?n.default.createElement(i.LabeledCheckboxInput,{checked:t.marketingOptIn.rawValue,containerClassName:"grid__item marketing_opt_in",className:"billing-marketing-opt-in",labelText:e,name:"marketing_opt_in",onClick:this.toggleMarketingOptIn}):null},s);function s(){var a=null!==r&&r.apply(this,arguments)||this;return a.toggleMarketingOptIn=function(e){var t=a.props.formData.marketingOptIn.rawValue;a.props.actions.updateMarketingOptIn(!t)},a}t.MarketingOptIn=a}),define("modules/clean/react/payments/buy/components/promos/promo_banner",["require","exports","tslib","react","dig-components/banner","modules/clean/react/payments/buy/types/types","modules/core/i18n","modules/clean/react/components/css","modules/clean/ts_utils","modules/clean/react/payments/buy/components/promos/promo_utils"],function(e,t,a,n,r,s,o,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromoBanner=void 0,n=a.__importDefault(n);function c(e,t,a){return o.intl.formatMessage({id:"jyiB1b",defaultMessage:"{count, plural, one{<strong>Try {dropbox_plan} for free for {count} day</strong> when you sign up by {expiration_date}*.} other{<strong>Try {dropbox_plan} for free for {count} days</strong> when you sign up by {expiration_date}*.}}"},{count:e.trialLength||0,dropbox_plan:t,expiration_date:a,strong:function(e){return n.default.createElement("strong",{key:"important-message-snippet"},e)}})}function d(e,t,a){return o.intl.formatMessage({id:"iXgIdV",defaultMessage:"Get <strong>{free_months} months free</strong> with your first year of {dropbox_plan}*. This offer expires on {expiration_date}."},{dropbox_plan:t,free_months:e.freeMonths,expiration_date:a,strong:function(e){return n.default.createElement("strong",{key:"important-message-snippet"},e)}})}function p(e,t,a){var r=e.monthsToUse,a={dropbox_plan:t,discount:e.discountPercentage/100,numMonths:r,expiration_date:a,strong:function(e){return n.default.createElement("strong",{key:"important-message-snippet"},e)}};return e.disallowMonthly?o.intl.formatMessage({id:"eWHzIE",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numMonths, plural, one{# month} other{# months}} of {dropbox_plan} when billed yearly*. This offer expires on {expiration_date}."},a):o.intl.formatMessage({id:"V3Sp4n",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numMonths, plural, one{# month} other{# months}} of {dropbox_plan}*. This offer expires on {expiration_date}."},a)}function m(e,t,a){var r=e.monthsToUse,a={dropbox_plan:t,discount:e.discountPercentage/100,numYears:r?r/12:0,expiration_date:a,strong:function(e){return n.default.createElement("strong",{key:"important-message-snippet"},e)}};return e.disallowMonthly?o.intl.formatMessage({id:"kzTnND",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numYears, plural, one{# year} other{# years}} of {dropbox_plan} when billed yearly*. This offer expires on {expiration_date}."},a):o.intl.formatMessage({id:"TAK0SD",defaultMessage:"<strong>Get {discount, number, ::percent .##} off</strong> {numYears, plural, one{# year} other{# years}} of {dropbox_plan}*. This offer expires on {expiration_date}."},a)}t.PromoBanner=i.requireCssWithComponent(function(e){e=function(e,t){var a=u.getPromoExpirationDate(e.expirationDate),r=c,n=d,o=p,i=m;switch(e.id){case s.PromoSpecType.EXTRA_TIME_MONTHS:return n(e,t,a);case s.PromoSpecType.PERCENT_DISCOUNT_PRETAX:return(e.monthsToUse&&e.monthsToUse%12==0?i:o)(e,t,a);case s.PromoSpecType.TRIAL:return r(e,t,a);case s.PromoSpecType.EXPERIMENTAL_PLAN:case s.PromoSpecType.NOT_APPLICABLE:return null;default:l.enforceExhaustive(e.id)}}(e.promoSpec,e.fullPlanName);return e?n.default.createElement("div",{className:"promo-banner","data-testid":"promo-banner"},n.default.createElement(r.Banner,{type:"attention"},n.default.createElement(r.Banner.Message,null,e))):null},["/static/css/dig-components/index.web-vfldraCVQ.css"])}),define("modules/clean/react/payments/buy/components/promos/promo_utils",["require","exports","tslib","react","react-intl","modules/clean/react/payments/buy/types/types","modules/clean/ts_utils","modules/core/i18n","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils","modules/clean/payments/skus/constants"],function(e,s,l,u,c,d,p,t,m,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.shouldShowPromoInOrderSummary=s.getOrderSummaryPromoMessage=s.getOrderSummaryPercentDiscountMessage=s.getPromoExpirationDate=s.isYearlyBasedPromo=s.promoTermsOfServiceMessages=void 0,u=l.__importDefault(u),s.promoTermsOfServiceMessages=c.defineMessages({monthsDiscountTermsOfService:{id:"c8c56M",defaultMessage:"For the first {promo_time_span, plural, one{month} other{# months}} of your subscription, youll be charged a monthly price of {total_price} after that and until you <link_cancel>cancel</link_cancel> your subscription, youll be charged {base_price} monthly plus applicable taxes. Previous charges <link_refund>wont be refunded</link_refund> when you cancel <link_required>unless its legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}"},yearlyDiscountTermsOfService:{id:"zDBJs2",defaultMessage:"For the first {promo_time_span, plural, one{year} other{# years}} of your subscription, youll be charged an annual price of {total_price} after that and until you <link_cancel>cancel</link_cancel> your subscription, youll be charged {base_price} yearly plus applicable taxes. Previous charges <link_refund>wont be refunded</link_refund> when you cancel <link_required>unless its legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}"}}),s.isYearlyBasedPromo=function(e){return!(!e||e%12!=0)},s.getPromoExpirationDate=function(e){e=e.replace(/-/g,"/");return e&&t.intl.formatDate(new Date(e),{year:"numeric",month:"long",day:"numeric"})},s.getOrderSummaryPercentDiscountMessage=function(e,t,a,r){r={planName:a,discount:r/100,numYears:t?t/12:0,numMonths:t},t=s.isYearlyBasedPromo(t)?m.orderSummaryMessages.percentDiscountYearly:m.orderSummaryMessages.percentDiscountMonthly;return u.default.createElement(c.FormattedMessage,l.__assign({},t,{values:l.__assign({},r)}))},s.getOrderSummaryPromoMessage=function(e,t,a,r,n,o,i){switch(e){case d.PromoSpecType.EXTRA_TIME_MONTHS:return u.default.createElement(c.FormattedMessage,l.__assign({},m.orderSummaryMessages.promoFreeMonths,{values:{freeMonths:n,planName:i}}));case d.PromoSpecType.PERCENT_DISCOUNT_PRETAX:return s.getOrderSummaryPercentDiscountMessage(r,t,i,a);case d.PromoSpecType.TRIAL:case d.PromoSpecType.EXPERIMENTAL_PLAN:case d.PromoSpecType.NOT_APPLICABLE:return null;default:p.enforceExhaustive(e)}},s.shouldShowPromoInOrderSummary=function(e,t){if(!t)return!1;var a=t.id,r=t.supportedScheduleIds,t=t.disallowMonthly;return!(a===d.PromoSpecType.TRIAL||(t||a===d.PromoSpecType.EXTRA_TIME_MONTHS)&&e===n.ScheduleId.MONTHLY||r&&!r.includes(e))}}),define("modules/clean/react/payments/buy/components/payments/order_summary/order_summary",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/payments/buy/components/payments/marketing_opt_in","modules/clean/react/payments/buy/components/payments/tos","modules/clean/react/rebrand/elements/rebrand_buttons","modules/core/browser","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils","modules/clean/payments/payment_form/payment_form_spec"],function(e,g,n,_,i,P,b,S,s,v,C,a,l,E){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.OrderSummarySubmitButton=g.TrialGoToBuyLink=g.OrderSummaryErrors=g.OrderSummaryFreeMonths=g.OrderSummaryTotalPrice=g.OrderSummaryWithheldTaxes=g.OrderSummaryTaxes=g.CardTop=g.OrderSummary=void 0,_=n.__importStar(_),i=n.__importDefault(i),v=n.__importStar(v),g.OrderSummary=function(e){var t=e.actions,a=e.additionalTermsOfService,r=e.currentTransitionPrices,n=e.formData,o=e.isLoadingPrices,i=e.onClick,s=e.pageState,l=e.planColor,u=e.planNamePrefixedWithDropbox,c=e.showMarketingOptInIfNewAccount,d=e.showTrialVersion,p=e.taxNamesByCountry,m=e.buyLink,f=_.useCallback(function(){C.ProEventsLogger.log("clicked_buy_directly_cta",{}),v.redirect(m)},[m]),y=d?P.intl.formatMessage({id:"ymP1f5",defaultMessage:"Start your free trial"}):P.intl.formatMessage({id:"4oMxy9",defaultMessage:"Buy now"}),h=r.totalPrice,e=r.currency;return _.default.createElement("div",{className:"order-summary grid__container"},_.default.createElement(g.CardTop,{planColor:l}),_.default.createElement("div",{className:"grid__item order-summary__card"},_.default.createElement("div",{className:"order-summary__plan-name grid__item"},u),_.default.createElement("div",{className:"order-summary__line-items grid__item"},_.default.createElement(g.OrderSummaryTaxes,{showTrialVersion:d,taxNamesByCountry:p,currentTransitionPrices:r}),_.default.createElement(g.OrderSummaryWithheldTaxes,{taxNamesByCountry:p,currentTransitionPrices:r}),h&&_.default.createElement(g.OrderSummaryTotalPrice,{totalPrice:h,showTrialVersion:d}),_.default.createElement(g.OrderSummaryFreeMonths,{promoSpec:s.promoSpec,scheduleId:n.scheduleId.formattedValue})),h&&e&&_.default.createElement(S.TermsOfService,{actions:t,currency:e,formData:n,totalPrice:h.formatCurrency(),showTrialVersion:d,showPromoLegalCopy:Boolean(s.promoSpec),additionalTermsOfService:a}),_.default.createElement(b.MarketingOptIn,{formData:n,actions:t,showMarketingOptInIfNewAccount:c,isCreatingNewAccount:!s.existingAccountShowing}),_.default.createElement(g.OrderSummarySubmitButton,{isProcessing:o||s.submitting,buttonText:y,onClick:i,isApplePay:n.paymentMethod.rawValue===E.PaymentMethod.ApplePay}),d&&_.default.createElement(g.TrialGoToBuyLink,{isLoading:o,isSubmitting:s.submitting,planNamePrefixedWithDropbox:u,onClickRedirectToBuy:f}),s.showBuyClickError&&_.default.createElement(g.OrderSummaryErrors,null)))},g.CardTop=function(e){e=e.planColor;return _.default.createElement("div",{className:i.default("card-top","grid__item",l.getCardTopColorClassName(e))})},g.OrderSummaryTaxes=function(e){var t=e.showTrialVersion,a=e.currentTransitionPrices,r=e.taxNamesByCountry,n=a.taxPercentage,o=a.taxAmount,e=a.taxCountryCode,a=a.taxPlanId;if(!(o&&o.amount&&n&&0<n))return null;r=l.getTaxNameForCountry(a||e,r);return _.default.createElement("div",{key:r,"data-testid":"order-summary-tax",className:"order-summary__tax grid__item"},P.intl.formatMessage({id:"uyZR7V",defaultMessage:"{tax_name} ({tax_percent}):{space}<span>{tax_amount}</span>"},{space:" ",span:function(e){return _.default.createElement("span",{className:i.default("order-summary__tax_amount",{"order-summary__strike":t})},e)},tax_name:r,tax_percent:P.intl.formatNumber(n/100,{style:"percent",maximumFractionDigits:2}),tax_amount:o.toString()}))},g.OrderSummaryWithheldTaxes=function(e){var t=e.taxNamesByCountry,a=e.currentTransitionPrices,r=a.withheldTaxAmount,n=a.withheldTaxPercentage,e=a.taxCountryCode,a=a.taxPlanId;return r&&r.amount&&n&&0<n?_.default.createElement("div",{className:"order-summary__withheld_tax grid__item"},P.intl.formatMessage({id:"E8kLRO",defaultMessage:"Withheld {tax_name} ({tax_percent, number, ::percent .##}): {tax_amount}"},{tax_name:l.getTaxNameForCountry(a||e,t),tax_percent:n/100,tax_amount:r.toString()})):null},g.OrderSummaryTotalPrice=function(e){var t=e.totalPrice,a=e.showTrialVersion,r=t.toString(),e=P.intl.formatMessage({id:"QgQyq4",defaultMessage:"Billed Now: {total_price}"},{total_price:r}),t={strike:function(e){return _.default.createElement("span",{className:"order-summary__strike order-summary__padding-left"},e)},free:function(e){return _.default.createElement("span",{className:"order-summary__free-price order-summary__padding-left"},e)}},r=P.intl.formatMessage({id:"/tcn5z",defaultMessage:"Charged Now: <strike>{total_price}</strike> <free>FREE</free>"},n.__assign(n.__assign({},t),{total_price:r}));return _.default.createElement("div",{"data-testid":"order-summary-final-price",className:"order-summary__price grid__item"},a?r:e)},g.OrderSummaryFreeMonths=function(e){var t=e.promoSpec,e=e.scheduleId;return t&&Boolean(t.freeMonths)&&e===a.ScheduleId.YEARLY?_.default.createElement("div",{className:"promo-highlight"},P.intl.formatMessage({id:"UVyMNH",defaultMessage:"<span>+ {free_months} months free</span> with your first year"},{free_months:t.freeMonths,span:function(e){return _.default.createElement("span",null,e)}})):null},g.OrderSummaryErrors=function(){return _.default.createElement("p",{className:"form-error form-error--enabled","aria-live":"assertive"},P.intl.formatMessage({id:"Ftg4vm",defaultMessage:"Please correct the form errors and try again"}))},g.TrialGoToBuyLink=function(e){var t=e.isLoading,a=e.isSubmitting,r=e.planNamePrefixedWithDropbox,e=e.onClickRedirectToBuy;return _.default.createElement("button",{className:i.default("button-as-link","order-summary__button","order-summary__buy-button","grid__item",{"order-summary__buy-button-disabled":t||a}),onClick:e,"data-uxa-log":"order-summary-go-to-buy"},P.intl.formatMessage({id:"bg2sx0",defaultMessage:"Or buy {plan} now"},{plan:r}))},g.OrderSummarySubmitButton=function(e){var t=e.isProcessing,a=e.buttonText,r=e.onClick,n=e.isApplePay,o=i.default("button--submit","order-summary__button","grid__item",{"button--loading":t}),e=a;if(t)e=_.default.createElement("div",{className:"loader"},_.default.createElement("span",{className:"loader__dot"}),_.default.createElement("span",{className:"loader__dot"}),_.default.createElement("span",{className:"loader__dot"}));else if(n)return _.default.createElement("button",{className:"apple-pay-button-with-text apple-pay-button-black-with-text",onClick:r,"data-uxa-log":"order-summary-submit-button","aria-label":"Buy now",type:"submit"},_.default.createElement("span",{className:"text"},e),_.default.createElement("span",{className:"logo"}));return _.default.createElement(s.RebrandButton,{ariaLabel:a,importance:"primary",size:"medium",type:"submit",className:o,onClick:r,disabled:t,"data-uxa-log":"order-summary-submit-button","data-testid":"submit-payment-form-button"},e)}}),define("modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils",["require","exports","tslib","modules/core/i18n","modules/core/exception"],function(e,t,a,r,n){"use strict";var o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.getCardTopColorClassName=t.PlanColor=t.CardTopClassName=t.getTaxNameForCountry=void 0,n=a.__importStar(n),t.getTaxNameForCountry=function(e,t){return t&&e&&t[e]?t[e]:r.intl.formatMessage({id:"dytYFt",defaultMessage:"Tax"})},(i=o=t.CardTopClassName||(t.CardTopClassName={})).BLUE="card-top--blue",i.BLACK="card-top--black",(i=a=t.PlanColor||(t.PlanColor={})).BLUE="blue",i.BLACK="black";var s=new Map([[a.BLACK,o.BLACK],[a.BLUE,o.BLUE]]);t.getCardTopColorClassName=function(e){return s.has(e)?s.get(e):(n.reportException({err:new Error("Unsupported checkout page plan color "+e),severity:n.SEVERITY.CRITICAL}),o.BLACK)}}),define("modules/clean/react/payments/buy/components/order_summary_redesign/order_summary",["require","exports","tslib","react","modules/clean/payments/skus/constants","dig-components/icons/src","dig-components/icons","modules/clean/react/components/css","modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils","modules/clean/payments/cash","classnames","dig-components/typography","react-intl","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/components/promos/promo_utils","modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils"],function(e,f,_,P,s,l,u,t,b,y,S,v,C,E,T,k){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.OrderSummary=f.OrderSummaryBilledPrice=f.OrderSummarySubtotal=f.OrderSummaryBasePrice=void 0,P=_.__importDefault(P),S=_.__importDefault(S);function h(){return P.default.createElement("hr",{"aria-hidden":"true",className:"checkout-order-summary-divider"})}function c(e){var t=e.selectedAddons,a=e.addonPricing;return P.default.createElement("ul",{className:"checkout-order-summary-addon-container"},t.map(function(e){var t;return P.default.createElement("li",{key:"addon-line-item-"+e.id,className:"checkout-order-summary-price-item checkout-order-summary-addon-line-item"},P.default.createElement(v.Text,{className:"checkout-order-summary-addon-display-name",variant:"label",tagName:"span",color:"faint"},e.displayName),P.default.createElement(v.Text,{variant:"label"},null!==(t=a[e.id])&&void 0!==t?t:e.displayPrice))}))}f.OrderSummaryBasePrice=function(e){var t=e.planName,a=e.planSchedule,r=e.basePrice,n=e.isTrial,o=e.selectedAddons,i=e.addonPricing,e={strike:function(e){return P.default.createElement("span",{className:"checkout-order-summary-strike checkout-order-summary-small-label"},e)},free:function(e){return P.default.createElement("span",{className:"checkout-order-summary-free"},e)}},e=P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.trialPrice,{values:_.__assign(_.__assign({},e),{basePrice:r})})),a=a===s.ScheduleId.YEARLY?k.orderSummaryMessages.yearlySubscription:k.orderSummaryMessages.monthlySubscription;return P.default.createElement("div",{className:"checkout-order-summary-price-component"},P.default.createElement("div",{className:"checkout-order-summary-price-item"},P.default.createElement("div",{className:"checkout-order-summary-plan-details-icon"},P.default.createElement(u.UIIcon,{size:"large",src:l.DropboxLine}),P.default.createElement("div",{className:"checkout-order-summary-plan-name-container"},P.default.createElement(v.Title,{size:"small",className:"checkout-order-summary-plan-name"},t),P.default.createElement(v.Text,{className:"checkout-order-summary-xsmall-text",variant:"label",tagName:"div",color:"faint"},P.default.createElement(C.FormattedMessage,_.__assign({},a))))),P.default.createElement(v.Text,{className:"checkout-order-summary-base-price",variant:"label",tagName:"div"},n?e:r)),o&&P.default.createElement(c,{selectedAddons:o,addonPricing:i}))},f.OrderSummarySubtotal=function(e){var t=e.totalPrice,a=e.isTrial,r=e.trialPrice,n=e.selectedPlanNameNoDropbox,o=e.orderSummaryPromoSpec,i=e.orderSummaryTaxSpec,s=o||{},l=s.id,u=s.monthsToUse,c=s.discountPercentage,d=s.disallowMonthly,p=s.freeMonths,m=s.trialLength,f=s.discountAmount,y=i||{},h=y.withheldTaxAmount,g=y.taxAmount,e=y.taxCountryCode,s=y.taxNamesByCountry,y=y.taxPlanId,s=b.getTaxNameForCountry(y||e,s),d=o&&l&&T.getOrderSummaryPromoMessage(l,u,c,d,p,m,n),p=o&&l===E.PromoSpecType.EXTRA_TIME_MONTHS,m=p?"inherit":"faint",n=S.default({"checkout-order-summary-free":p}),l=k.getTaxPrice(a,r,h,g),g=P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.withheldTaxName,{values:{taxName:s}}));return P.default.createElement("div",{className:"checkout-order-summary-price-component"},P.default.createElement("div",{className:"checkout-order-summary-price-item"},P.default.createElement(v.Text,{variant:"label",tagName:"div",color:"faint"},P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.subtotalPrice))),P.default.createElement(v.Text,{variant:"label"},a?r:t)),o&&P.default.createElement("div",{className:"checkout-order-summary-price-item checkout-order-summary-small-text"},P.default.createElement(v.Text,{variant:"label",tagName:"div",className:n,color:m},d),f&&!p&&P.default.createElement(v.Text,{className:"checkout-order-summary-free",variant:"label",color:"inherit"},P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.priceBeingSubtracted,{values:{subtractedPrice:f}})))),i&&P.default.createElement("div",{className:"checkout-order-summary-price-item checkout-order-summary-small-text"},P.default.createElement(v.Text,{variant:"label",tagName:"div",color:"faint"},h?g:s),P.default.createElement(v.Text,{"data-testid":"order-summary-tax",variant:"label"},l)))},f.OrderSummaryBilledPrice=function(e){var t=e.billedPrice,a=e.isTrial,r=e.trialEndDate,n=e.trialPrice,o=e.promoExpirationDate,i=e.showPromo,e=e.discountAmount,e=S.default("checkout-order-summary-final-price",{"checkout-order-summary-free":a||i&&e});return P.default.createElement("div",{className:"checkout-order-summary-price-component"},P.default.createElement("div",{className:"checkout-order-summary-price-item"},P.default.createElement("div",{className:"checkout-order-summary-xsmall-text"},P.default.createElement(v.Text,{variant:"label",tagName:"div"},P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.billedNowPrice))),P.default.createElement(v.Text,{className:"checkout-order-summary-xsmall-text",size:"small",tagName:"div",color:"faint"},a?P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.trialEndsDate,{values:{trialEndDate:r}})):i&&o?P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.promoExpirationDate,{values:{promoExpirationDate:T.getPromoExpirationDate(o)}})):void 0)),P.default.createElement("div",null,P.default.createElement("span",{"data-testid":"order-summary-final-price",className:e},a?n:t))))},f.OrderSummary=t.requireCssWithComponent(function(e){var t=e.planName,a=e.planSchedule,r=e.basePrice,n=e.isTrial,o=e.trialEndDate,i=e.currency,s=e.totalPrice,l=e.billedPrice,u=e.orderSummaryPromoSpec,c=e.selectedAddons,d=e.addonPricing,p=e.selectedPlanNameNoDropbox,m=e.orderSummaryTaxSpec,e=e.containerRef,i=i&&new y.Cash("0.00",i).formatCurrency();return P.default.createElement("div",{className:"checkout-order-summary-container",ref:e},P.default.createElement("div",{className:"checkout-order-summary-content"},P.default.createElement(v.Title,null,P.default.createElement(C.FormattedMessage,_.__assign({},k.orderSummaryMessages.header))),P.default.createElement(f.OrderSummaryBasePrice,{planName:t,planSchedule:a,basePrice:r,isTrial:n,selectedAddons:c,addonPricing:d}),P.default.createElement(h,null),P.default.createElement(f.OrderSummarySubtotal,{totalPrice:s,isTrial:n,trialPrice:i,selectedPlanNameNoDropbox:p,orderSummaryPromoSpec:u,orderSummaryTaxSpec:m}),P.default.createElement(h,null),P.default.createElement(f.OrderSummaryBilledPrice,{billedPrice:l,isTrial:n,trialEndDate:o,trialPrice:i,promoExpirationDate:u&&u.expirationDate,showPromo:!!u})))},["/static/css/buy/components/order_summary-vflF4x8qX.css","/static/css/dig-components/index.web-vfldraCVQ.css"])}),define("modules/clean/react/payments/buy/components/order_summary_redesign/order_summary_utils",["require","exports","tslib","react","react-intl"],function(e,n,o,i,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getOrderSummaryTaxesSpec=n.getTaxPrice=n.orderSummaryMessages=void 0,i=o.__importDefault(i),n.orderSummaryMessages=s.defineMessages({header:{id:"m+ZGp8",defaultMessage:"Order Summary"},subtotalPrice:{id:"2dRYCe",defaultMessage:"Subtotal"},trialPrice:{id:"RFDTxf",defaultMessage:"<strike>{basePrice}</strike> <free>FREE</free>"},yearlySubscription:{id:"8BxGTp",defaultMessage:"Yearly subscription"},monthlySubscription:{id:"fzF3+c",defaultMessage:"Monthly subscription"},billedNowPrice:{id:"XYyI20",defaultMessage:"Billed now"},trialEndsDate:{id:"AM9xOF",defaultMessage:"Trial ends {trialEndDate}"},promoFreeMonths:{id:"EDzII1",defaultMessage:"+ {freeMonths, plural, one{# month} other{# months}} free with your first year"},percentDiscountMonthly:{id:"QXsb2b",defaultMessage:"{planName} discount ({discount, number, ::percent .##} off {numMonths, plural, one{# month} other{# months}})"},percentDiscountYearly:{id:"TuiQ5u",defaultMessage:"{planName} discount ({discount, number, ::percent .##} off {numYears, plural, one{# year} other{# years}})"},promoExpirationDate:{id:"P3DEnh",defaultMessage:"Must claim by {promoExpirationDate}"},priceBeingSubtracted:{id:"ZE382A",defaultMessage:"-{subtractedPrice}"},withheldTaxName:{id:"p620Oo",defaultMessage:"Withheld {taxName}"}});function l(e){return e&&0<e.amount}n.getTaxPrice=function(e,t,a,r){return e?t:a?i.default.createElement(s.FormattedMessage,o.__assign({},n.orderSummaryMessages.priceBeingSubtracted,{values:{subtractedPrice:a}})):r||void 0},n.getOrderSummaryTaxesSpec=function(e,t,a,r,n){var o=l(e),i=l(t);return o||i?{taxAmount:!o||null==e?void 0:e.formatCurrency(),withheldTaxAmount:!i||null==t?void 0:t.formatCurrency(),taxCountryCode:a,taxNamesByCountry:r,taxPlanId:n}:void 0}}),define("modules/clean/react/payments/buy/components/team/team_info",["require","exports","modules/core/i18n","react-intl"],function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompanySizesToFormattedStrings=t.DefaultCompanySize=void 0,t.DefaultCompanySize="Below 50";r=r.defineMessages({below50:{id:"Kzi9J5",defaultMessage:"Below 50"},from50to99:{id:"GMaQlF",defaultMessage:"50-99"},from100to249:{id:"AGTmka",defaultMessage:"100-249"},from25to499:{id:"U2FA0y",defaultMessage:"250-499"},from500to999:{id:"9FVpsy",defaultMessage:"500-999"},from1000to2499:{id:"aJH3D4",defaultMessage:"1000-2499"},from2500to4999:{id:"a4mEq6",defaultMessage:"2500-4999"},over5000:{id:"W43JUi",defaultMessage:"5000+"}});t.CompanySizesToFormattedStrings={"Below 50":a.intl.formatMessage(r.below50),"50-99":a.intl.formatMessage(r.from50to99),"100-249":a.intl.formatMessage(r.from100to249),"250-499":a.intl.formatMessage(r.from2500to4999),"500-999":a.intl.formatMessage(r.from500to999),"1000-2499":a.intl.formatMessage(r.from1000to2499),"2500-4999":a.intl.formatMessage(r.from2500to4999),"5000+":a.intl.formatMessage(r.over5000)}}),define("modules/clean/react/payments/buy/components/payments/worldpay_entity_info",["require","exports","tslib","react"],function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorldPayEntityInfo=void 0;var n,a=(n=(r=a.__importDefault(r)).default.Component,a.__extends(o,n),o.prototype.render=function(){return r.default.createElement("div",{className:"grid__container payment-entity-info__text"},r.default.createElement("p",null,"Dropbox International Unlimited Company",r.default.createElement("br",null),"One Park Place / Hatch Street Upper / Dublin 2 / Ireland"))},o);function o(){return null!==n&&n.apply(this,arguments)||this}t.WorldPayEntityInfo=a}),define("modules/clean/react/payments/buy/components/plan/plan_selection",["require","exports","tslib","react","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/components/plan/plan_block"],function(e,t,a,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlanSelection=void 0;var r,a=(r=(o=a.__importDefault(o)).default.Component,a.__extends(n,r),n.prototype.render=function(){var e=this.props,t=e.defaultPlan,a=e.supportedProducts,r=e.productPlanType,n=e.showPlanNameUnderRadio,e=e.userIsEligibleForProfessionalTrial;return t===i.CheckoutPageProductPlan.PLUS?o.default.createElement("div",{className:"grid__container plan-info"},o.default.createElement(s.PlusPlanBlock,{showTrialVersion:!1,showPlanNameUnderRadio:n,supportedProducts:a,handlePlanChange:this.handlePlanChange,selectedProductPlanType:r}),o.default.createElement("div",{className:"plan-info__spacer"}),o.default.createElement(s.ProfessionalPlanBlock,{showTrialVersion:e,showPlanNameUnderRadio:n,supportedProducts:a,handlePlanChange:this.handlePlanChange,selectedProductPlanType:r})):null},n);function n(){var i=null!==r&&r.apply(this,arguments)||this;return i.handlePlanChange=function(e,t,a){var r=i.props,n=r.locale,o=r.productPlanType,r=r.actions.updateSelectedPlan;o!==e&&r(e,t,n,a)},i}t.PlanSelection=a}),define("modules/clean/react/payments/buy/components/plan/plan_block",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/inputs/inputs","modules/constants/trademark","modules/clean/react/payments/buy/types/types"],function(e,y,t,h,a,i,g,s,l){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.PlusPlanBlock=y.ProfessionalPlanBlock=y.getTrialDurationString=y.PlanBlock=void 0,h=t.__importDefault(h),y.PlanBlock=function(e){var t=e.planName,a=e.productPlanType,r=e.selectedProductPlanType,n=e.ariaLabelId,o=e.inputId,i=e.quotaString,s=e.showTrialVersion,l=e.showPlanNameUnderRadio,u=e.trialDuration,c=e.advertisedTrialDuration,d=e.planInfoChoiceClass,p=e.planInfoLabelClass,m=e.planInfoSubtitleClass,f=e.handlePlanChange,i=h.default.createElement("span",{id:n,className:"plan-info__label plan-info__label--bold "+p,onClick:function(){f(a,u||0,s)},"aria-hidden":"true"},i),l=l&&t;return h.default.createElement("div",{className:"plan-info__choice "+d},h.default.createElement(g.LabeledRadioInput,{name:"plan_id",inputId:o,ariaLabelId:n+(l?" plan-info-subtitle-plan-name":"")+(s?" plan-info-subtitle-trial":""),className:"plan-info__radio",labelClassName:"plan-info__container",value:a.toString(),checked:a===r,labelSpan:i,onClickOrChange:function(e,t,a){e=e.currentTarget;a=a||e.value;a=parseInt(a,10);f(a,u||0,s)}}),l&&h.default.createElement("div",{id:"plan-info-subtitle-plan-name",className:"plan-info__subtitle "+m},t),s&&h.default.createElement("div",{id:"plan-info-subtitle-trial",className:"plan-info__subtitle plan-info__subtitle--green"},y.getTrialDurationString(c||u)))},y.getTrialDurationString=function(e){return void 0!==e?a.intl.formatMessage({id:"H8xyuK",defaultMessage:"Try free for {pro_trial_days} days"},{pro_trial_days:e}):""},y.ProfessionalPlanBlock=function(e){var t=e.supportedProducts,a=e.selectedProductPlanType,r=e.showTrialVersion,n=e.showPlanNameUnderRadio,o=e.handlePlanChange,e=null===(e=null===(e=t[l.CheckoutPageProductPlan.PROFESSIONAL])||void 0===e?void 0:e.trialInfo)||void 0===e?void 0:e.trialDuration;return h.default.createElement(y.PlanBlock,{planName:"Dropbox "+s.TRADEMARK_PROFESSIONAL,productPlanType:i.ProductPlanType.PROFESSIONAL,selectedProductPlanType:a,ariaLabelId:"plan-info__label--pro",inputId:"plan-info__radio--pro",quotaString:t[l.CheckoutPageProductPlan.PROFESSIONAL].quota,showTrialVersion:r,showPlanNameUnderRadio:n,trialDuration:e,advertisedTrialDuration:31===e?30:void 0,planInfoChoiceClass:"plan-info__pro",planInfoLabelClass:"plan-info__label--pro",planInfoSubtitleClass:"plan-info__subtitle--pro",handlePlanChange:o})},y.PlusPlanBlock=function(e){var t=e.supportedProducts,a=e.selectedProductPlanType,r=e.showTrialVersion,n=e.showPlanNameUnderRadio,o=e.handlePlanChange,e=null===(e=null===(e=t[l.CheckoutPageProductPlan.PLUS])||void 0===e?void 0:e.trialInfo)||void 0===e?void 0:e.trialDuration;return h.default.createElement(y.PlanBlock,{planName:"Dropbox "+s.TRADEMARK_PLUS,productPlanType:i.ProductPlanType.PLUS,selectedProductPlanType:a,ariaLabelId:"plan-info__label--plus",inputId:"plan-info__radio--plus",quotaString:t[l.CheckoutPageProductPlan.PLUS].quota,showTrialVersion:r,showPlanNameUnderRadio:n,trialDuration:e,planInfoChoiceClass:"plan-info__plus",planInfoLabelClass:"plan-info__label--plus",planInfoSubtitleClass:"plan-info__subtitle--plus",handlePlanChange:o})}}),define("modules/clean/react/payments/buy/helpers/pricing_value_helper",["require","exports","modules/clean/payments/skus/constants"],function(e,t,b){"use strict";function S(e){e=null==e?void 0:e.lineItems.find(function(e){return e.sku.productClass===b.ProductClass.PLAN});return null==e?void 0:e.price}function v(e,t,a){if(!(e<0||100<e))return a&&0<a.discount.amount?a.discount:null==t?void 0:t.multiply(e/100)}function C(e,r,n,o){return e.filter(function(e){var t=e.finalSubState.plan,a=e.finalSubState.billingSchedule,e=0<e.finalSubState.addons.skus.length;return(null==t?void 0:t.productType)===r&&(null==a?void 0:a.id)===n&&e===o}).pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTransitionPrices=t.getDiscountPriceAmount=t.getDisplayPrices=void 0,t.getDisplayPrices=function(e,t,a,r){var n,o,i,s,l,u,c,d,p,m,f,y,h,g,_=t.productPlanType.formattedValue,P=t.selectedAddons.formattedValue;return e&&(t=C(e,_,b.ScheduleId.MONTHLY,0<P.length),h=S(null==(P=C(e,_,b.ScheduleId.YEARLY,0<P.length))?void 0:P.nextBillingSummary),g=S(null==t?void 0:t.nextBillingSummary),a||r?((p=(a||{}).discountPercentage)&&(n=v(p,h,null==P?void 0:P.nextBillingSummary),o=v(p,g,null==t?void 0:t.nextBillingSummary)),a=null==P?void 0:P.tvm,m=null==t?void 0:t.tvm,c=null==a?void 0:a.getTotalPrice(),d=null==a?void 0:a.getBilledPrice(),p=null==m?void 0:m.getTotalPrice(),m=null==m?void 0:m.getBilledPrice(),r&&(u=a.getTotalNumberOfLicenses(),i=null==c?void 0:c.divide(u),s=null==d?void 0:d.divide(u),l=null==p?void 0:p.divide(u),u=null==m?void 0:m.divide(u))):(c=null==P?void 0:P.nextBillingSummary.base,d=null==P?void 0:P.nextBillingSummary.total,p=null==t?void 0:t.nextBillingSummary.base,m=null==t?void 0:t.nextBillingSummary.total),c&&p&&(f=0<(f=p.multiply(12).subtract(c)).amount?f:void 0),d&&m&&(y=0<(y=m.multiply(12).subtract(d)).amount?y:void 0)),{yearlyPrice:c,yearlyPerUserPrice:i,monthlyPrice:p,monthlyPerUserPrice:l,yearlySavings:f,taxInclusiveYearlyPrice:d,taxInclusiveYearlyPerUserPrice:s,taxInclusiveMonthlyPrice:m,taxInclusiveMonthlyPerUserPrice:u,taxInclusiveYearlySavings:y,baseYearlyPrice:h,baseMonthlyPrice:g,yearlyDiscountAmount:n,monthlyDiscountAmount:o}},t.getDiscountPriceAmount=v,t.getCurrentTransitionPrices=function(e,t){var a,r,n,o,i,s,l,u,c;return null!=(a=e?C(e,t.productPlanType.formattedValue,t.scheduleId.formattedValue,0<t.selectedAddons.formattedValue.length):a)&&a.tvm&&(r=(c=a.tvm).getTotalPrice(),n=c.getTaxCountryCode(),o=c.getTaxPercentage(),i=c.getTaxPrice(),s=c.getCurrency(),l=c.getTotalTaxWithheld(),u=c.getWithheldTaxPercentage(),c=c.getTaxPlanId()),{totalPrice:r,taxCountryCode:n,taxPercentage:o,taxAmount:i,currency:s,withheldTaxAmount:l,withheldTaxPercentage:u,taxPlanId:c}}}),define("modules/clean/react/payments/buy/components/payments/ideal_form",["require","exports","tslib","react","modules/clean/react/payments/buy/components/inputs/inputs","modules/core/i18n","modules/clean/react/payments/common/form_value_helpers"],function(e,t,a,o,i,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdealForm=void 0;var n,a=(n=(o=a.__importDefault(o)).default.Component,a.__extends(l,n),l.prototype.render=function(){var e=this.props,t=e.formData,a=e.idealBanks,r=s.intl.formatMessage({id:"4MQHjO",defaultMessage:"Note: Well use your bank information provided by iDEAL for all future billing cycles. If your bank is not listed, then please select a different payment method."}),n=t.idealBankId.errorState&&t.idealBankId.showError,e=this.idealErrorString();return o.default.createElement("div",{className:"ideal-container"},o.default.createElement("div",{className:"ideal-fields"},o.default.createElement(i.LabeledSelectInput,{name:"ideal_bank",labelText:s.intl.formatMessage({id:"nomYjM",defaultMessage:"Bank"}),value:t.idealBankId.rawValue,onChange:this.onIdealBankChange,onBlur:this.onIdealBankBlur,hasError:Boolean(n),errorText:e},o.default.createElement("option",{value:"",key:"default","aria-selected":""===t.idealBankId.rawValue},s.intl.formatMessage({id:"EYb0mR",defaultMessage:"Select your bank..."})),Object.keys(a).map(function(e){return o.default.createElement("option",{value:e,key:e,"aria-selected":t.idealBankId.rawValue===e},a[e])}))),this.props.locationFields,o.default.createElement("div",{className:"ideal-note"},r))},l);function l(){var a=null!==n&&n.apply(this,arguments)||this;return a.onIdealBankChange=function(e){var t=e.value,e=a.props.idealBanks[t];a.props.actions.updateIdealBank({bankId:t,bankName:e})},a.onIdealBankBlur=function(e){a.props.actions.showFormFieldErrors(["idealBankId"],"IdealBankBlur")},a.idealErrorString=function(){var e=a.props.formData.idealBankId;return!r.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"Lly4lc",defaultMessage:"Please select your bank."}):""},a}t.IdealForm=a}),define("modules/clean/react/payments/buy/components/payments/payment_method_input",["require","exports","tslib","react","classnames","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/inputs/inputs"],function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodInput=void 0,r=a.__importDefault(r),n=a.__importDefault(n);var s,l=(s=r.default.Component,a.__extends(u,s),u.prototype.render=function(){var e=this.getPaymentMethodId(this.props.paymentMethod);return r.default.createElement("div",{className:n.default({"payment-info__option":!0,"full-width":this.props.fullWidth,"no-margin-bottom":this.props.noMarginBottom,"grid__item--expand":this.props.fullWidth,"grid__item--shrink":!this.props.fullWidth,"grid--y-middle":!0,"cc-payment-radio-selenium":this.props.paymentMethod===o.PaymentMethod.CreditCard})},r.default.createElement(i.LabeledRadioInput,{ref:this.labeledRadioInput,name:this.props.name,className:"payment-info__payment",inputId:"payment-method-radio#"+e,ariaLabelId:"payment-method-label#"+e,value:this.props.paymentMethod.toString(),checked:this.props.selected,onClickOrChange:this.onChange,labelSpan:r.default.createElement(d,{id:e,textTitle:this.props.textTitle,title:this.props.title,icons:this.props.icons,onClick:this.onChange,cc_last4:this.props.cc_last4})}))},u);function u(e){var t=s.call(this,e)||this;return t.focus=function(){null!==t.labeledRadioInput.current&&t.labeledRadioInput.current.focus()},t.onChange=function(){t.props.onSelected(t.props.paymentMethod)},t.getPaymentMethodId=function(e){switch(e){case o.PaymentMethod.CreditCard:return"creditcard";case o.PaymentMethod.PayPal:return"paypal";case o.PaymentMethod.Ideal:return"ideal";case o.PaymentMethod.DirectDeposit:return"debit";case o.PaymentMethod.TokenConnect:return"token_connect";case o.PaymentMethod.ApplePay:return"applepay";default:return e}},t.labeledRadioInput=r.default.createRef(),t}t.PaymentMethodInput=l;var c,d=(c=r.default.Component,a.__extends(p,c),p.prototype.renderCCLast4=function(){var e=null;return e=null!=this.props.cc_last4?r.default.createElement("span",null,r.default.createElement("b",null,this.props.cc_last4)):e},p.prototype.render=function(){var e,t=this;return r.default.createElement("span",{className:"payment-info__method-label",onClick:this.props.onClick},r.default.createElement("span",{id:"payment-method-label#"+this.props.id,"aria-hidden":"true",className:n.default(((e={"ax-visually-hidden":this.props.icons})[this.props.id]=!this.props.icons,e)),title:this.props.textTitle},this.props.title),this.props.icons&&this.props.icons.map(function(e){return r.default.createElement("span",{key:"payment-method-icon#"+e,className:e,title:t.props.icons&&1<t.props.icons.length?e:t.props.title})}),this.renderCCLast4())},p);function p(){return null!==c&&c.apply(this,arguments)||this}}),define("modules/clean/react/payments/buy/components/payments/payment_method_selector",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/payments/payment_method_input"],function(e,t,a,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodSelector=void 0;var s,a=(s=(n=a.__importDefault(n)).default.Component,a.__extends(l,s),l.prototype.getLabelForMethodId=function(e){if(e!==r.PaymentMethod.TokenConnect)return e===r.PaymentMethod.CreditCard?(t=this.props.paymentSpec.supported_credit_cards_for_country(this.props.countryCode),n.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:r.PaymentMethod.CreditCard,selected:this.props.paymentMethod===r.PaymentMethod.CreditCard,onSelected:this.onPaymentMethodSelected,icons:t,fullWidth:this.props.fullWidth,title:o.intl.formatMessage({id:"2NPQhg",defaultMessage:"Credit card. We accept {payment_methods}."},{payment_methods:t.join(", ").replace("_","-")})})):e===r.PaymentMethod.PayPal?n.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:r.PaymentMethod.PayPal,selected:this.props.paymentMethod===r.PaymentMethod.PayPal,onSelected:this.onPaymentMethodSelected,icons:["paypal"],fullWidth:this.props.fullWidth,title:o.intl.formatMessage({id:"RxvBVG",defaultMessage:"Paypal"})}):e===r.PaymentMethod.DirectDeposit?n.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:r.PaymentMethod.DirectDeposit,selected:this.props.paymentMethod===r.PaymentMethod.DirectDeposit,onSelected:this.onPaymentMethodSelected,title:o.intl.formatMessage({id:"H1vHwe",defaultMessage:"Direct Debit"}),fullWidth:this.props.fullWidth}):e===r.PaymentMethod.Ideal?n.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:r.PaymentMethod.Ideal,selected:this.props.paymentMethod===r.PaymentMethod.Ideal,onSelected:this.onPaymentMethodSelected,icons:["ideal"],fullWidth:this.props.fullWidth,title:o.intl.formatMessage({id:"DgNBM/",defaultMessage:"iDEAL"})}):e===r.PaymentMethod.ApplePay?n.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:r.PaymentMethod.ApplePay,selected:this.props.paymentMethod===r.PaymentMethod.ApplePay,onSelected:this.onPaymentMethodSelected,icons:["applepay"],fullWidth:this.props.fullWidth,title:o.intl.formatMessage({id:"ZoO+/M",defaultMessage:"ApplePay"})}):null;var t=this.props.paymentSpec.supported_credit_cards_for_country(""),a=void 0;return this.props.paymentSpec.spec.token_connect_prefill_data&&"cc_last4"in this.props.paymentSpec.spec.token_connect_prefill_data&&(a="****-"+this.props.paymentSpec.spec.token_connect_prefill_data.cc_last4),n.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:r.PaymentMethod.TokenConnect,selected:this.props.paymentMethod===r.PaymentMethod.TokenConnect,onSelected:this.onPaymentMethodSelected,icons:t,fullWidth:this.props.fullWidth,title:o.intl.formatMessage({id:"7u/Z5D",defaultMessage:"Credit card"},{payment_methods:"mastercard"}),cc_last4:a})},l.prototype.render=function(){var t=this,e=this.props,a=e.countryCode,r=e.paymentSpec,a=(e.showTrialVersion?r.only_default_payment_methods():r.available_payment_methods_for_country(a)).map(function(e){return t.getLabelForMethodId(e)});return n.default.createElement("div",{className:"payment-info__selector grid__container"},n.default.createElement("span",{className:"ax-visually-hidden"},o.intl.formatMessage({id:"WrPpf6",defaultMessage:"Select a payment method"})),a)},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.onPaymentMethodSelected=function(e){t.props.updatePaymentMethod(e)},t}t.PaymentMethodSelector=a}),define("modules/clean/react/payments/buy/components/payments/tos",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/payments/skus/constants","modules/clean/react/payments/common/form_value_helpers"],function(e,t,s,l,u,c,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermsOfService=void 0;var n,o=(n=(l=s.__importDefault(l)).default.Component,s.__extends(i,n),i.prototype.termsAndServiceErrorString=function(){var e=this.props.formData.termsAndService;return!a.FormValueHelper.isValid(e)&&e.showError?u.intl.formatMessage({id:"a2NBnL",defaultMessage:"Please agree to the terms of service."}):""},i.prototype.renderLegalTermsBuy=function(){var e=this.props,t=e.currency,a=e.formData,t={total_price:e.totalPrice,schedule:a.scheduleId.rawValue===r.ScheduleId.MONTHLY?u.intl.formatMessage({id:"dF0ZGK",defaultMessage:"monthly"}):u.intl.formatMessage({id:"yvyyXC",defaultMessage:"yearly"}),currency:t,link_cancel:function(e){return l.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/158",target:"_blank",rel:"noopener noreferrer"},e)},link_refund:function(e){return l.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/terms",target:"_blank",rel:"noopener noreferrer"},e)},link_required:function(e){return l.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/help/9069",target:"_blank",rel:"noopener noreferrer"},e)}};return u.intl.formatMessage({id:"iwdwdQ",defaultMessage:"Youll be charged {total_price} {schedule} until you <link_cancel>cancel</link_cancel> your subscription. Previous charges <link_refund>wont be refunded</link_refund> when you cancel <link_required>unless its legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},t)},i.prototype.renderLegalTermsTrial=function(){var e=this.props,t=e.currency,a=e.formData,e=e.totalPrice;return u.intl.formatMessage({id:"iPVwvJ",defaultMessage:"Your free trial ends on {trial_end_date}. If you dont <link_cancel>cancel</link_cancel> your free trial by that date, well charge you {total_price} {schedule} (taxes included) until you cancel your plan. Charges <link_refund>wont be refunded</link_refund> when you cancel, <link_required>unless its legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},{trial_end_date:a.trialEndDate.rawValue,total_price:e,schedule:a.scheduleId.rawValue===r.ScheduleId.MONTHLY?u.intl.formatMessage({id:"dF0ZGK",defaultMessage:"monthly"}):u.intl.formatMessage({id:"yvyyXC",defaultMessage:"yearly"}),link_cancel:function(e){return l.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/space/cancel-plus",target:"_blank",rel:"noopener noreferrer","data-uxa-log":"chkout_disc_text_cancel"},e)},link_refund:function(e){return l.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/help/billing/plus-refund",target:"_blank",rel:"noopener noreferrer","data-uxa-log":"chkout_disc_text_refund"},e)},link_required:function(e){return l.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/terms",target:"_blank",rel:"noopener noreferrer","data-uxa-log":"chkout_disc_text_legalreq"},e)},currency:t})},i.prototype.render=function(){var t=this,e=this.props,a=e.formData,r=e.showPromoLegalCopy,n=e.showTrialVersion,o=e.additionalTermsOfService,i=n?this.renderLegalTermsTrial():this.renderLegalTermsBuy(),e={link:function(e){return l.default.createElement("a",{className:"terms-info__tos--terms-link","aria-label":"terms",key:"link_dbx",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:t.onTOSLinkClick},e)},br:l.default.createElement("br",{key:"link_br"}),strong:function(e){return l.default.createElement("span",{className:"font-strong",key:"link_strong"},e)}},n=u.intl.formatMessage({id:"Q4Jjko",defaultMessage:"I agree to the <link>Dropbox Terms</link>{br}and the <strong>Automatic Renewal Terms</strong> above"},e);o&&(n=u.intl.formatMessage({id:"6/NfP1",defaultMessage:"I agree to the <link>Dropbox Terms</link>, <alink>{tosTitle}</alink>,{br}and the <strong>Automatic Renewal Terms</strong> above"},s.__assign({alink:function(e){return l.default.createElement("a",{className:"terms-info__tos--terms-link","aria-label":"terms",key:"link_additional",href:o.tosLink,target:"_blank",rel:"noopener noreferrer",onClick:t.onTOSLinkClick},e)},tosTitle:o.tosTitle},e)));n=l.default.createElement("span",{className:"type--copy-small",onClick:this.onTOSLabelClick},n),n=l.default.createElement(c.LabeledCheckboxInput,{checked:a.termsAndService.rawValue,containerClassName:"grid__item terms-info__tos",className:"billing-terms-and-service",errorText:this.termsAndServiceErrorString(),labelText:n,name:"tos_agree",onClick:this.onTermsAndServiceChange,onBlur:this.onTermsAndServiceBlur});return l.default.createElement("div",{className:"terms-info"},l.default.createElement("p",{className:"terms-info__legal"},i),r&&l.default.createElement("p",{className:"terms-info__promo-legal-copy"},u.intl.formatMessage({id:"TlRCFw",defaultMessage:"* You can only use the offer if you received it from Dropbox. Dropbox reserves the right to cancel, suspend, and/or modify the offer for any reason, including for fraud, technical limitations and failures, or causes that impact the integrity of the offer."})),n)},i);function i(){var a=null!==n&&n.apply(this,arguments)||this;return a.onTermsAndServiceChange=function(e){a.props.actions.updateTermsAndService(Boolean(!e.checked))},a.onTermsAndServiceBlur=function(e){a.props.actions.showFormFieldErrors(["termsAndService"],"TermsAndServiceBlur")},a.onTOSLabelClick=function(e){var t=a.props.formData.termsAndService.formattedValue;a.props.actions.updateTermsAndService(Boolean(!t))},a.onTOSLinkClick=function(e){var t=a.props.formData.termsAndService.formattedValue;t||a.props.actions.updateTermsAndService(Boolean(!t)),e.stopPropagation()},a}t.TermsOfService=o}),define("modules/clean/react/payments/buy/components/payments/submit_payment_form_section",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/payments/marketing_opt_in","modules/clean/react/payments/buy/components/payments/tos","modules/clean/react/components/css","dig-components/buttons","dig-components/icons","dig-components/icons/src","modules/core/browser","modules/clean/analytics","modules/clean/payments/payment_form/payment_form_spec","classnames"],function(e,y,t,h,g,_,P,a,o,i,s,b,S,v,l){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TrialGoToBuyLink=y.SubmitPaymentFormButton=y.SubmitPaymentFormErrors=y.SubmitPaymentForm=void 0,h=t.__importStar(h),b=t.__importStar(b),l=t.__importDefault(l),y.SubmitPaymentForm=a.requireCssWithComponent(function(e){var t=e.actions,a=e.buyLink,r=e.currentTransitionPrices,n=e.formData,o=e.isLoadingPrices,i=e.onClick,s=e.pageState,l=e.planNamePrefixedWithDropbox,u=e.showTrialVersion,c=e.showPromoLegalCopy,d=e.showMarketingOptInIfNewAccount,p=e.additionalTermsOfService,m=h.useCallback(function(){S.ProEventsLogger.log("clicked_buy_directly_cta",{}),b.redirect(a)},[a]),f=u?g.intl.formatMessage({id:"oAN1do",defaultMessage:"Start free trial"}):g.intl.formatMessage({id:"6tM1v1",defaultMessage:"Purchase"}),e=r.totalPrice,r=r.currency;return h.default.createElement("div",{className:"grid__container submit-payment-section"},e&&r&&h.default.createElement(P.TermsOfService,{actions:t,currency:r,formData:n,totalPrice:e.formatCurrency(),showTrialVersion:u,showPromoLegalCopy:c,additionalTermsOfService:p}),h.default.createElement(_.MarketingOptIn,{formData:n,actions:t,showMarketingOptInIfNewAccount:d,isCreatingNewAccount:!s.existingAccountShowing}),h.default.createElement(y.SubmitPaymentFormButton,{isProcessing:o||s.submitting,buttonText:f,onClick:i,isApplePay:n.paymentMethod.rawValue===v.PaymentMethod.ApplePay}),u&&h.default.createElement(y.TrialGoToBuyLink,{isProcessing:o||s.submitting,planNamePrefixedWithDropbox:l,onClickRedirectToBuy:m}),s.showBuyClickError&&h.default.createElement(y.SubmitPaymentFormErrors,null))},["/static/css/buy/pages/submit_payment_form_section-vflzyT5wL.css","/static/css/dig-components/index.web-vfldraCVQ.css"]),y.SubmitPaymentFormErrors=function(){return h.default.createElement("p",{className:"form-error form-error--enabled","aria-live":"assertive"},g.intl.formatMessage({id:"Ftg4vm",defaultMessage:"Please correct the form errors and try again"}))},y.SubmitPaymentFormButton=function(e){var t=e.isProcessing,a=e.buttonText,r=e.onClick,n=e.isApplePay,e=l.default("button--submit","submit-payment-section__button",{"button--loading":t});return n?h.default.createElement("button",{className:"apple-pay-button-with-text apple-pay-button-black-with-text",onClick:r,"data-uxa-log":"submit-payment-form-button","data-testid":"submit-payment-form-button","aria-label":"Buy now",type:"submit"},h.default.createElement("span",{className:"text"},a),h.default.createElement("span",{className:"logo"})):h.default.createElement(o.Button,{variant:"primary",size:"xlarge",withIconLeft:h.default.createElement(i.UIIcon,{src:s.LockLine}),onClick:r,isLoading:t,className:e,type:"submit","data-uxa-log":"submit-payment-form-button","data-testid":"submit-payment-form-button"},a)},y.TrialGoToBuyLink=function(e){var t=e.isProcessing,a=e.planNamePrefixedWithDropbox,e=e.onClickRedirectToBuy;return h.default.createElement("button",{className:l.default("button-as-link","trial-to-buy-link__buy-button","grid__item",{"trial-to-buy-link__buy-button-disabled":t}),onClick:e,"data-uxa-log":"trial-to-buy-link"},g.intl.formatMessage({id:"bg2sx0",defaultMessage:"Or buy {plan} now"},{plan:a}))}}),define("modules/clean/react/payments/buy/helpers/product_plan_helpers",["require","exports","tslib","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/types/types","modules/core/exception"],function(e,a,t,r,n,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getProductPlanType=a.getSelectedUiProduct=a.getCheckoutPageProductPlan=a.isProductPlanTypeSupportedByCheckoutPage=a.supportedPlanTypeToCheckoutPagePlan=void 0,o=t.__importStar(o),a.supportedPlanTypeToCheckoutPagePlan=((t={})[r.ProductPlanType.PLUS]=n.CheckoutPageProductPlan.PLUS,t[r.ProductPlanType.PROFESSIONAL]=n.CheckoutPageProductPlan.PROFESSIONAL,t[r.ProductPlanType.TRANSFER]=n.CheckoutPageProductPlan.TRANSFER,t[r.ProductPlanType.FAMILY_PAYER]=n.CheckoutPageProductPlan.FAMILY,t[r.ProductPlanType.SYNC_EVERYTHING]=n.CheckoutPageProductPlan.BACKUP,t[r.ProductPlanType.HS_DBX_PRO_BUNDLE]=n.CheckoutPageProductPlan.HELLOSIGN_DBX_PRO,t[r.ProductPlanType.PASSWORDS]=n.CheckoutPageProductPlan.PASSWORDS,t[r.ProductPlanType.NEW_STANDARD]=n.CheckoutPageProductPlan.STANDARD,t[r.ProductPlanType.ADVANCED]=n.CheckoutPageProductPlan.ADVANCED,t);var i=((t={})[n.CheckoutPageProductPlan.PLUS]=r.ProductPlanType.PLUS,t[n.CheckoutPageProductPlan.PROFESSIONAL]=r.ProductPlanType.PROFESSIONAL,t[n.CheckoutPageProductPlan.TRANSFER]=r.ProductPlanType.TRANSFER,t[n.CheckoutPageProductPlan.FAMILY]=r.ProductPlanType.FAMILY_PAYER,t[n.CheckoutPageProductPlan.BACKUP]=r.ProductPlanType.SYNC_EVERYTHING,t[n.CheckoutPageProductPlan.HELLOSIGN_DBX_PRO]=r.ProductPlanType.HS_DBX_PRO_BUNDLE,t[n.CheckoutPageProductPlan.PASSWORDS]=r.ProductPlanType.PASSWORDS,t[n.CheckoutPageProductPlan.STANDARD]=r.ProductPlanType.NEW_STANDARD,t[n.CheckoutPageProductPlan.ADVANCED]=r.ProductPlanType.ADVANCED,t);function s(e){var t=a.supportedPlanTypeToCheckoutPagePlan[e];return t||o.reportException({err:new Error("Unsupported product plan type "+e),severity:o.SEVERITY.CRITICAL}),t}a.isProductPlanTypeSupportedByCheckoutPage=function(e){return void 0!==s(e)},a.getCheckoutPageProductPlan=s,a.getSelectedUiProduct=function(e,t){t=s(t),e=e[t];return e||o.reportException({err:new Error("supportedProducts does not include selected checkout page product plan "+t),severity:o.SEVERITY.CRITICAL}),e},a.getProductPlanType=function(e){var t=i[e];return t||o.reportException({err:new Error("Unsupported checkout page product plan type "+e),severity:o.SEVERITY.CRITICAL}),t}}),define("modules/clean/react/payments/common/middleware/captcha_visibility_checker",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CaptchaVisibilityChecker=void 0;var a=(r.prototype.triggerCaptcha=function(){this.isCheckingCaptchaVisibility=!0,this.checkCaptchaVisibility()},r.prototype.submitCaptcha=function(){this.isCaptchaVisible||this.onCaptchaVisibility(!1),this.wasLastCaptchaSubmitVisible=this.isCaptchaVisible,this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1},r.prototype.getCaptchaVisibility=function(){var e=document.querySelector('iframe[src^="https://www.google.com/recaptcha/api2/bframe"]');return null!==e&&null!==e.parentElement&&null!==e.parentElement.parentElement&&"visible"===e.parentElement.parentElement.style.visibility},r);function r(e){var t=this;this.POLLING_FREQUENCY_MS=500,this.checkCaptchaVisibility=function(){t.isCheckingCaptchaVisibility&&(t.isCaptchaVisible=t.getCaptchaVisibility(),t.isCaptchaVisible?(t.isCheckingCaptchaVisibility=!1,t.onCaptchaVisibility(!0)):setTimeout(t.checkCaptchaVisibility,t.POLLING_FREQUENCY_MS))},this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1,this.onCaptchaVisibility=e,this.wasLastCaptchaSubmitVisible=!1}t.CaptchaVisibilityChecker=a}),define("modules/clean/react/payments/common/middleware/payments_ux_logger",["require","exports","tslib","modules/clean/payments/three_ds_helper","modules/clean/payments/payment_form/payment_form_spec","modules/clean/logging/telemetry","modules/core/exception","modules/clean/logging/hive/schemas/web-payments_ux_analytics","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/middleware/captcha_visibility_checker","modules/clean/react/payments/buy/actions/page_actions"],function(e,t,a,o,i,r,s,l,n,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsUXLogger=void 0,r=a.__importStar(r),s=a.__importStar(s);var p=new Set(["BlurAccountHolderName","BlurCpf","BlurIBAN","BlurVat","BlurZipCode","UpdateCountryCode","UpdateIdealBank","UpdateMandateSigned","UpdatePaymentMethod"]),a=(m.prototype.handleAction=function(e,t,a){if(this.isPageView(e)){var r=((n={})[l.FormFields.CountryCode]=t.formData.countryCode.rawValue,n[l.FormFields.PaymentMethod]=i.PaymentMethod[t.formData.paymentMethod.rawValue],n);this.requestSeq++,this.actionSeq=0,this.logPageView(r)}else if(this.isFormFieldChange(e))null!==(r=this.getFormFieldChangeDetails(e.type,t.formData,a.formData))&&(this.actionSeq++,this.logFormFieldChange(r));else if(this.isCCFormFieldChange(e))null!==(r=this.getCCFormFieldChangeDetails(e.creditCardIframeFields))&&(this.actionSeq++,this.logFormFieldChange(r));else if(this.isShowFormFieldErrors(e))this.isErrorFromSubmitForm(e)&&(r=this.getFormValidationErrorDetails(t.formData),this.actionSeq++,this.logFormValidationError(r));else if(this.isSubmitFormSuccess(e))r=this.getFormSubmitEventDetails(u.SubmitFormTriggerType.ButtonClick,t.formData,a.pageState.submitSeq),this.actionSeq++,this.logFormSubmitSuccess(r);else if(this.isSubmitFormStart(e))r=this.getFormSubmitEventDetails(e.trigger,t.formData,a.pageState.submitSeq),this.actionSeq++,this.logFormSubmit(r);else if(this.isTriggerCaptcha(e))this.captchaVisibilityChecker.triggerCaptcha();else if(this.isSubmitCaptcha(e))this.captchaVisibilityChecker.submitCaptcha(),r={challenge_type:this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?l.ChallengeType.ShownCaptcha:l.ChallengeType.SuppressedCaptcha,origin_submit_seq:this.originSubmitSeq.toString()},this.actionSeq++,this.logChallengeSubmit(r);else if(this.isTriggerThreeDsChallenge(e))r={challenge_type:l.ChallengeType.ThreeDsChallenge,origin_submit_seq:this.originSubmitSeq.toString()},this.actionSeq++,this.logChallengeStart(r);else if(this.isTriggerThreeDsFingerprint(e))r={challenge_type:l.ChallengeType.ThreeDsFingerprint,origin_submit_seq:this.originSubmitSeq.toString()},this.actionSeq++,this.logChallengeStart(r);else if(this.isUpdateThreeDsData(e)){if(""!==e.value){var n=JSON.parse(e.value),t=void 0;if(n.resultType===o.ThreeDsResultType.IdentifyShopper)t=l.ChallengeType.ThreeDsFingerprint;else{if(n.resultType!==o.ThreeDsResultType.ChallengeShopper)return;t=l.ChallengeType.ThreeDsChallenge}r={challenge_type:t,origin_submit_seq:this.originSubmitSeq.toString()},this.actionSeq++,this.logChallengeSubmit(r)}}else this.isApplePayError(e)?this.log(l.PaymentsUXEvent.ApplePayError,this.applePayData(a)):this.isApplePayClosedBySuccess(e)?this.log(l.PaymentsUXEvent.ApplePayClosedBySuccess,this.applePayData(a)):this.isApplePayClosedByFailure(e)?this.log(l.PaymentsUXEvent.ApplePayClosedByFailure,this.applePayData(a)):this.isApplePayPopupShown(e)?this.log(l.PaymentsUXEvent.ApplePayPopupShown,this.applePayData(a)):this.isApplePayStartup(e)&&this.log(l.PaymentsUXEvent.ApplePayStartup,this.applePayData(a))},m.prototype.applePayData=function(e){return{submit_seq:e.pageState.submitSeq.toString(),origin_submit_seq:this.originSubmitSeq.toString(),trigger:l.FormSubmitTrigger.ButtonClick}},m.prototype.logPageView=function(e){this.log(l.PaymentsUXEvent.PageView,e)},m.prototype.logFormFieldChange=function(e){this.log(l.PaymentsUXEvent.FormFieldChange,e)},m.prototype.logFormValidationError=function(e){this.log(l.PaymentsUXEvent.FormValidationError,e)},m.prototype.logFormSubmitSuccess=function(e){this.log(l.PaymentsUXEvent.FormSubmitSuccess,e)},m.prototype.logFormSubmit=function(e){this.log(l.PaymentsUXEvent.FormSubmit,e)},m.prototype.logChallengeStart=function(e){this.log(l.PaymentsUXEvent.ChallengeStart,e)},m.prototype.logChallengeSubmit=function(e){this.log(l.PaymentsUXEvent.ChallengeSubmit,e)},m.prototype.log=function(e,t){this.logger.log(new l.PaymentsUXAnalyticsRow({event_name:e,event_details:t,request_id:this.requestId,request_seq:this.requestSeq,action_seq:this.actionSeq,platform:this.platform}))},m.prototype.isPageView=function(e){return e.type===d.PageActionEnum.UpdateHistory},m.prototype.isFormFieldChange=function(e){return p.has(e.type)},m.prototype.isShowFormFieldErrors=function(e){return"ShowFormFieldErrors"===e.type},m.prototype.isErrorFromSubmitForm=function(e){return"SubmitForm"===e.origin},m.prototype.isSubmitFormStart=function(e){return"SubmitFormStart"===e.type},m.prototype.isSubmitFormSuccess=function(e){return"SubmitFormSuccess"===e.type},m.prototype.isTriggerCaptcha=function(e){return"TriggerCaptcha"===e.type},m.prototype.isSubmitCaptcha=function(e){return"SubmitCaptcha"===e.type},m.prototype.isTriggerThreeDsChallenge=function(e){return"TriggerThreeDsChallenge"===e.type},m.prototype.isTriggerThreeDsFingerprint=function(e){return"TriggerThreeDsFingerprint"===e.type},m.prototype.isUpdateThreeDsData=function(e){return"UpdateThreeDsData"===e.type},m.prototype.isCCFormFieldChange=function(e){return"BlurCCField"===e.type},m.prototype.isApplePayStartup=function(e){return"ApplePayStartup"===e.type},m.prototype.isApplePayPopupShown=function(e){return"ApplePayPopupShown"===e.type},m.prototype.isApplePayError=function(e){return"ApplePayError"===e.type},m.prototype.isApplePayClosedBySuccess=function(e){return"ApplePayClosedBySuccess"===e.type},m.prototype.isApplePayClosedByFailure=function(e){return"ApplePayPopupCloseByFailure"===e.type},m.prototype.getFormFieldChangeDetails=function(e,t,a){switch(e){case"BlurAccountHolderName":return{field:l.FormFields.SepaAccountHolderName,value:t.accountHolderName.rawValue,error_state:n.InputErrorState[t.accountHolderName.errorState],show_error:t.accountHolderName.showError.toString()};case"BlurCpf":return{field:l.FormFields.Cpf,value:t.cpf.rawValue,error_state:n.InputErrorState[t.cpf.errorState],show_error:t.cpf.showError.toString()};case"BlurIBAN":return{field:l.FormFields.Iban,value:t.iban.rawValue,error_state:n.InputErrorState[t.iban.errorState],show_error:t.iban.showError.toString()};case"BlurVat":return{field:l.FormFields.Vat,value:t.vat.rawValue,error_state:n.InputErrorState[t.vat.errorState],show_error:t.vat.showError.toString()};case"BlurZipCode":return{field:l.FormFields.ZipCode,value:t.zipCode.rawValue,error_state:n.InputErrorState[t.zipCode.errorState],show_error:t.zipCode.showError.toString()};case"UpdateCountryCode":return a.countryCode.rawValue!==t.countryCode.rawValue?{field:l.FormFields.CountryCode,value:t.countryCode.rawValue,error_state:n.InputErrorState[t.countryCode.errorState],show_error:t.countryCode.showError.toString()}:null;case"UpdateIdealBank":return a.idealBankId.rawValue!==t.idealBankId.rawValue?{field:l.FormFields.IdealBankId,value:t.idealBankId.rawValue,error_state:n.InputErrorState[t.idealBankId.errorState],show_error:t.idealBankId.showError.toString()}:null;case"UpdateMandateSigned":return a.mandateSigned.rawValue!==t.mandateSigned.rawValue?{field:l.FormFields.SepaMandateSigned,value:t.mandateSigned.rawValue.toString(),error_state:n.InputErrorState[t.mandateSigned.errorState],show_error:t.mandateSigned.showError.toString()}:null;case"UpdatePaymentMethod":return a.paymentMethod.rawValue!==t.paymentMethod.rawValue?{field:l.FormFields.PaymentMethod,value:i.PaymentMethod[t.paymentMethod.rawValue],error_state:n.InputErrorState[t.paymentMethod.errorState],show_error:t.paymentMethod.showError.toString()}:null;default:return null}},m.prototype.getCCFormFieldChangeDetails=function(e){return e.ccn?{field:l.FormFields.CreditCardNumber,error_state:n.InputErrorState[e.ccn.isValid?n.InputErrorState.Valid:n.InputErrorState.Invalid],show_error:e.ccn.showError.toString()}:e.ccode?{field:l.FormFields.CreditCardCode,error_state:n.InputErrorState[e.ccode.isValid?n.InputErrorState.Valid:n.InputErrorState.Invalid],show_error:e.ccode.showError.toString()}:e.ccexp?{field:l.FormFields.CreditCardExpDate,error_state:n.InputErrorState[e.ccexp.isValid?n.InputErrorState.Valid:n.InputErrorState.Invalid],show_error:e.ccexp.showError.toString()}:null},m.prototype.getFormValidationErrorDetails=function(e){var t={};return e.countryCode.showError&&(t[l.FormFields.CountryCode]=n.InputErrorState[e.countryCode.errorState]),e.paymentMethod.showError&&(t[l.FormFields.PaymentMethod]=n.InputErrorState[e.paymentMethod.errorState]),e.zipCode.showError&&(t[l.FormFields.ZipCode]=n.InputErrorState[e.zipCode.errorState]),e.vat.showError&&(t[l.FormFields.Vat]=n.InputErrorState[e.vat.errorState]),e.paymentMethod.formattedValue===i.PaymentMethod.CreditCard?(e.nonce.showError&&(e.nonce.isCCNValid||(t[l.FormFields.CreditCardNumber]=n.InputErrorState[n.InputErrorState.Invalid]),e.nonce.isCCodeValid||(t[l.FormFields.CreditCardCode]=n.InputErrorState[n.InputErrorState.Invalid]),e.nonce.isCCExpValid||(t[l.FormFields.CreditCardExpDate]=n.InputErrorState[n.InputErrorState.Invalid])),e.cpf.showError&&(t[l.FormFields.Cpf]=n.InputErrorState[e.cpf.errorState])):e.paymentMethod.formattedValue===i.PaymentMethod.DirectDeposit?(e.mandateSigned.showError&&(t[l.FormFields.SepaMandateSigned]=n.InputErrorState[e.mandateSigned.errorState]),e.accountHolderName.showError&&(t[l.FormFields.SepaAccountHolderName]=n.InputErrorState[e.accountHolderName.errorState]),e.iban.showError&&(t[l.FormFields.Iban]=n.InputErrorState[e.iban.errorState])):e.paymentMethod.formattedValue===i.PaymentMethod.Ideal&&e.idealBankId.showError&&(t[l.FormFields.IdealBankId]=n.InputErrorState[e.idealBankId.errorState]),t},m.prototype.getFormSubmitEventDetails=function(e,t,a){var r;switch(e){case u.SubmitFormTriggerType.ButtonClick:r=l.FormSubmitTrigger.ButtonClick,this.originSubmitSeq=a;break;case u.SubmitFormTriggerType.RecaptchaV2:r=this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?l.FormSubmitTrigger.ShownCaptcha:l.FormSubmitTrigger.SuppressedCaptcha;break;case u.SubmitFormTriggerType.ThreeDsFingerprint:r=l.FormSubmitTrigger.ThreeDsFingerprint;break;case u.SubmitFormTriggerType.ThreeDsChallenge:r=l.FormSubmitTrigger.ThreeDsChallenge;break;default:r=l.FormSubmitTrigger.Unknown}e={origin_submit_seq:this.originSubmitSeq.toString(),submit_seq:a.toString(),trigger:r};return r===l.FormSubmitTrigger.ButtonClick&&(e[l.FormFields.CountryCode]=t.countryCode.rawValue,e[l.FormFields.PaymentMethod]=i.PaymentMethod[t.paymentMethod.rawValue],t.paymentMethod.rawValue===i.PaymentMethod.CreditCard&&(e.bin=t.bin.rawValue)),e},m);function m(e,t){var i=this;void 0===t&&(t=l.PaymentsUxPlatform.Legacy),this.reduxMiddleware=function(o){return function(n){return function(e){var t=o.getState(),a=n(e);try{var r=o.getState();i.handleAction(e,r,t)}catch(e){s.reportException({err:e,severity:s.SEVERITY.CRITICAL,tags:["payments_ux_logger","payment"]})}return a}}},this.onCaptchaVisibility=function(e){e={challenge_type:e?l.ChallengeType.ShownCaptcha:l.ChallengeType.SuppressedCaptcha,origin_submit_seq:i.originSubmitSeq.toString()};i.actionSeq++,i.logChallengeStart(e)},this.requestSeq=-1,this.actionSeq=-1,this.originSubmitSeq=0,this.requestId=e,this.logger=new r.HiveLogger,this.captchaVisibilityChecker=new c.CaptchaVisibilityChecker(this.onCaptchaVisibility),this.platform=t}t.PaymentsUXLogger=a}),define("modules/clean/logging/hive/schemas/web-payments_ux_analytics",["require","exports","tslib","modules/core/browser"],function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsUXAnalyticsRow=t.PaymentsUxPlatform=t.FormSubmitTrigger=t.ChallengeType=t.FormFields=t.PaymentsUXEvent=void 0,r=a.__importStar(r),(a=t.PaymentsUXEvent||(t.PaymentsUXEvent={})).PageView="page_view",a.FormFieldChange="form_field_change",a.FormValidationError="form_validation_error",a.FormSubmit="form_submit",a.ChallengeStart="challenge_start",a.ChallengeSubmit="challenge_submit",a.FormSubmitSuccess="form_submit_success",a.ApplePayStartup="apple_pay_startup",a.ApplePayPopupShown="apple_pay_popup_shown",a.ApplePayClosedByFailure="apple_pay_closed_by_failure",a.ApplePayError="apple_pay_error",a.ApplePayClosedBySuccess="apple_pay_closed_by_success",(a=t.FormFields||(t.FormFields={})).CountryCode="country_code",a.Cpf="cpf",a.CreditCardCode="cc_code",a.CreditCardExpDate="cc_exp_date",a.CreditCardNumber="cc_number",a.Iban="iban",a.IdealBankId="bank_id",a.PaymentMethod="payment_method",a.SepaAccountHolderName="owner_name",a.SepaMandateSigned="mandate_signed",a.Vat="vat",a.ZipCode="zip_code",(a=t.ChallengeType||(t.ChallengeType={})).SuppressedCaptcha="suppressed_captcha",a.ShownCaptcha="shown_captcha",a.ThreeDsChallenge="three_ds_challenge",a.ThreeDsFingerprint="three_ds_fingerprint",(a=t.FormSubmitTrigger||(t.FormSubmitTrigger={})).ButtonClick="button_click",a.SuppressedCaptcha="suppressed_captcha",a.ShownCaptcha="shown_captcha",a.ThreeDsChallenge="three_ds_challenge",a.ThreeDsFingerprint="three_ds_fingerprint",a.Unknown="unknown",(a=t.PaymentsUxPlatform||(t.PaymentsUxPlatform={})).Legacy="legacy",a.RevenueAPI="revenue_api";t.PaymentsUXAnalyticsRow=function(e){this.category="web-payments_ux_analytics",this.session_id=null,this.user_id=null,this.team_id=null,this.anon_ip=null,this.country=null,this.locale_user_selected=null,this.locale_browser_header=null,this.user_agent=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.event_name=e.event_name,this.event_details=e.event_details,this.url=r.get_href(),this.request_id=e.request_id,this.request_seq=e.request_seq,this.action_seq=e.action_seq,this.platform=e.platform,Object.seal(this)}}),define("modules/clean/payments/skus/subscription_change_plan_set",["require","exports","modules/clean/payments/skus/constants","modules/clean/payments/skus/subscription_change_plan"],function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangePlanSet=void 0;var n=(o.deserialize=function(e){return new o(e.map(r.SubscriptionChangePlan.deserialize))},Object.defineProperty(o.prototype,"plans",{get:function(){return this._subChangePlans.slice()},enumerable:!1,configurable:!0}),o.prototype.filter=function(e){return new o(this._subChangePlans.filter(e))},o.prototype.withProductPlanType=function(t){return this.filter(function(e){e=e.finalSubState.plan;return!!e&&e.productType===t})},o.prototype.withSchedule=function(t){return this.filter(function(e){e=e.finalSubState.billingSchedule;return!!e&&e.id===t})},o.prototype.withSku=function(t){return this.filter(function(e){return e.finalSubState.plan===t})},o.prototype.monthly=function(){return this.withSchedule(a.ScheduleId.MONTHLY)},o.prototype.yearly=function(){return this.withSchedule(a.ScheduleId.YEARLY)},o);function o(e){this._subChangePlans=e}t.SubscriptionChangePlanSet=n}),define("modules/clean/react/payments/common/form/middleware/middleware",["require","exports","tslib","lodash","modules/core/browser","modules/core/notify","modules/clean/marketing_tracker"],function(e,t,a,o,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.marketingEventMiddleware=t.submitFormErrorMiddleware=void 0,o=a.__importStar(o),t.submitFormErrorMiddleware=function(e){return function(a){return function(e){if("SubmitFormError"!==e.type)return a(e);var t=a(e);return e.data.error_message&&n.Notify.error(e.data.error_message),e.data.redirect&&r.redirect(e.data.redirect),t}}};var s={};t.marketingEventMiddleware=function(n){return function(r){return function(e){var t=e.additionalData;switch(e.type){case"SubmitFormStart":if(!t||!t.send_conversion_data)return r(e);var a={event:"conversionDataReady",tealium_event:"conversionDataReady",product:t.product,licenses:t.licenses||1,billing_cycle:t.billing_schedule,purchase_price:t.expected_price_amount,currency:t.currency,type:t.signup_type};if(o.isEqual(s,a))return r(e);i.MarketingTracker.pushWithDefaults(a),s=a;break;case"SubmitFormSuccess":a=n.getState().pageState;a&&a.marketingTracker&&((a=a.marketingTracker.onSubmitFormSuccess)&&i.MarketingTracker.pushEvent(a))}return r(e)}}}}),define("modules/clean/react/payments/common/form/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/common/form_values","modules/clean/payments/skus/constants","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/form_value_helpers"],function(e,t,u,a,l,c,r,d,p){"use strict";function n(i,s){var l=r.fieldsToServerProps[i];return l?function(e,t){switch(t.type){case"ShowFormFieldErrors":var a=t;if(e&&!p.FormValueHelper.isValid(e))for(var r=0,n=a.fieldNames;r<n.length;r++){var o=n[r];if(i===o)return u.__assign(u.__assign({},e),{showError:!0})}return e;case"SubmitFormError":a=t;return a.data instanceof Object&&a.data.error_fields instanceof Object&&a.data.error_fields.hasOwnProperty(l)?e?u.__assign(u.__assign({},e),{showError:!0,serverError:a.data.error_fields[l]}):{showError:!0,serverError:a.data.error_fields[l]}:e;default:return s(e,t)}}:s}function o(a){return function(e,t){return e?u.__assign(u.__assign({},e),a(e,t)):a(e,t)}}function i(e,t){var a=t;switch(a.type){case"SubmitFormError":var r=a;if(r.data instanceof Object&&r.data.hasOwnProperty("error_fields")&&r.data.error_fields.hasOwnProperty("email")){var n=r.data.error_fields.email,o=void 0;switch(n){case"empty":o=l.EmailErrorState.Empty;break;case"account":case"email-taken":o=l.EmailErrorState.TakenError;break;default:o=e?e.errorState:l.EmailErrorState.Valid}return u.__assign(u.__assign({},e),{showError:!0,serverError:n,errorState:o})}return r.data instanceof Object&&r.data.hasOwnProperty("error_type")&&"capturable_user"===r.data.error_type.toString()?u.__assign(u.__assign({},e),{showError:!1,isCapturable:!0}):e;case"ShowFormFieldErrors":r=a;if(e&&!p.FormValueHelper.isValid(e))for(var i=0,s=r.fieldNames;i<s.length;i++)if("email"===s[i])return u.__assign(u.__assign({},e),{showError:!0});return e;case"UpdateEmail":return d.FormValueFactory.createEmail(a.value,e||void 0);default:return e||null}}function s(e,t){return void 0===e&&(e=null),"SubmitFormSuccess"===t.type&&t.data&&t.data.next_url?t.data.next_url:null}function m(e,t){switch(void 0===e&&(e=null),t.type){case"SubmitFormStart":return"submitting";case"SubmitFormSuccess":return"success";case"SubmitFormError":return"error";default:return e}}function f(e,t){return void 0===e&&(e=null),"SubmitFormStart"===t.type&&"number"==typeof e?e+1:e}function y(e,t){switch(void 0===e&&(e=!1),t.type){case"SubmitFormStart":return!0;case"SubmitFormSuccess":case"SubmitFormError":return!1;default:return e}}function h(e,t){e=e||{};var a=t;switch(a.type){case"UpdateCpfName":return u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{cpfName:d.FormValueFactory.createCpfName(a.value,e.formData.cpfName)})});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{cpfName:d.FormValueFactory.createCpfNamePrefill(a.value,e.formData.lastName.rawValue,e.pageState.userInfo.displayName)})});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{cpfName:d.FormValueFactory.createCpfNamePrefill(e.formData.firstName.rawValue,a.value,e.pageState.userInfo.displayName)})});default:return e}}function g(e,t){e=e||{};var a=t;switch(a.type){case"SubmitFormError":var r="";return a.data&&a.data.error_fields&&(r=a.data.error_fields.product_plan_type),u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{productPlanType:u.__assign(u.__assign({},e.formData.productPlanType),{serverError:r,showError:!0})})});case"ShowFormFieldErrors":var n=a;if(e.formData.productPlanType&&!p.FormValueHelper.isValid(e.formData.productPlanType))for(var o=0,i=n.fieldNames;o<i.length;o++)if("productPlanType"===i[o])return u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{productPlanType:u.__assign(u.__assign({},e.formData.productPlanType),{showError:!0})})});return e;case"UpdateProductPlanType":var s=a,r=s.value,n=r===c.ProductPlanType.ADVANCED?e.pageState.advancedMinNumUsers:e.pageState.standardMinNumUsers,r=r===c.ProductPlanType.ADVANCED?e.pageState.advancedMaxNumUsers:e.pageState.standardMaxNumUsers;return void 0!==e.pageState.teamNumUsers&&(n=Math.max(n,e.pageState.teamNumUsers)),u.__assign(u.__assign({},e),{pageState:u.__assign(u.__assign({},e.pageState),{minNumUsers:n,maxNumUsers:r}),formData:u.__assign(u.__assign({},e.formData),{productPlanType:d.FormValueFactory.createProductPlanType(s.value,e.pricingState.subChangePlans,e.formData.productPlanType)})});default:return e}}function _(e,t){e=e||{};var a=t;switch(a.type){case"SubmitFormError":var r="";return a.data&&a.data.error_fields&&(r=a.data.error_fields.team_num_users),u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{numberOfUsers:u.__assign(u.__assign({},e.formData.numberOfUsers),{serverError:r,showError:!0})})});case"ShowFormFieldErrors":var n=a;if(e.formData.numberOfUsers&&!p.FormValueHelper.isValid(e.formData.numberOfUsers))for(var o=0,i=n.fieldNames;o<i.length;o++)if("numberOfUsers"===i[o])return u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{numberOfUsers:u.__assign(u.__assign({},e.formData.numberOfUsers),{showError:!0})})});return e;case"UpdateNumberOfUsers":n=a;return u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{numberOfUsers:d.FormValueFactory.createNumberOfUsers(n.value,e.pageState,e.formData.numberOfUsers,e.formData.numberOfUsers.minLicenseLimit,e.formData.emailsToInvite?e.formData.emailsToInvite.rawValue.length:0)})});default:return e}}function P(e,t){e=e||{};return"UpdateMarketingOptIn"!==t.type?e:u.__assign(u.__assign({},e),{formData:u.__assign(u.__assign({},e.formData),{marketingOptIn:d.FormValueFactory.createCheckbox(t.value,e.formData.marketingOptIn,!0)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.FormReducer=t.updateMarketingOptIn=t.updateNumberOfUsers=t.updateProductPlanType=t.updateCpfName=t.teamPhone=t.teamName=t.submitting=t.submitSeq=t.submitState=t.schedule=t.password=t.nextUrl=t.lastName=t.firstName=t.emailsToInvite=t.email=t.companySize=void 0,t.companySize=n("companySize",function(e,t){return"UpdateCompanySize"===t.type?d.FormValueFactory.createInput(t.value,e||void 0):e||null}),t.email=i,t.emailsToInvite=n("emailsToInvite",function(e,t){return"UpdateEmailsToInvite"===t.type?d.FormValueFactory.createEmailsToInvite(t.value,e||void 0):e||null}),t.firstName=n("firstName",function(e,t){return"UpdateFirstName"===t.type?d.FormValueFactory.createInput(t.value,e||void 0):e||null}),t.lastName=n("lastName",function(e,t){return"UpdateLastName"===t.type?d.FormValueFactory.createInput(t.value,e||void 0):e||null}),t.nextUrl=s,t.password=n("password",function(e,t){return"UpdatePassword"===t.type?d.FormValueFactory.createPassword(t.value,e||void 0):e||null}),t.schedule=n("schedule",function(e,t){return"UpdateSchedule"===t.type?d.FormValueFactory.createSchedule(t.value):e||null}),t.submitState=m,t.submitSeq=f,t.submitting=y,t.teamName=n("teamName",function(e,t){return"UpdateTeamName"===t.type?d.FormValueFactory.createInput(t.value,e||void 0):e||null}),t.teamPhone=n("teamPhone",function(e,t){return"UpdateTeamPhone"===t.type?d.FormValueFactory.createTeamPhone(t.value,e||void 0):e||null}),t.updateCpfName=h,t.updateProductPlanType=g,t.updateNumberOfUsers=_,t.updateMarketingOptIn=P;var b=o(a.combineReducers({nextUrl:s,submitState:m,submitting:y,submitSeq:f})),S=o(a.combineReducers({companySize:t.companySize,email:i,emailsToInvite:t.emailsToInvite,firstName:t.firstName,lastName:t.lastName,password:t.password,schedule:t.schedule,teamName:t.teamName,teamPhone:t.teamPhone}));t.FormReducer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(a,r){return function(e,t){return r(a(e,t),t)}})}(h,g,_,P,a.combineReducers({pricingState:function(e){return e||{}},pageState:b,formData:S}))}),define("modules/clean/react/payments/common/payments/reducers/reducers",["require","exports","tslib","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory"],function(e,t,d,a,p,o){"use strict";function m(e,t){return d.__assign(d.__assign({},e),{formData:d.__assign(d.__assign({},e.formData),t)})}function r(u){var c=a.fieldsToServerProps[u];return c?function(l){return function(e,t){var a=e.formData[u];switch(t.type){case"ShowFormFieldErrors":for(var r=0,n=t.fieldNames;r<n.length;r++)if(n[r]===u&&void 0!==a&&!p.FormValueHelper.isValid(a)){var o={};return o[u]=d.__assign(d.__assign({},a),{showError:!0}),m(e,o)}return e;case"SubmitFormError":var i=t;if(!i.data||!i.data.error_fields||!i.data.error_fields[c]||void 0===a)return e;var s={};return s[u]=d.__assign(d.__assign({},a),{showError:!0,serverError:i.data.error_fields[c]}),m(e,s);default:return l(e,t)}}}:function(e){return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TermsAndServiceReducers=t.PaymentMethodReducers=t.updateIdealBank=t.updateTermsAndService=t.updateMandateSigned=t.updateIBAN=t.updateAccountHolderName=t.updateThreeDsData=t.updateBrowserInfo=t.updateBIN=t.updateApplePayToken=t.updateEncryptedCardForNetworkToken=t.updateAdyenEncryptedCard=t.updatePayPalNonce=t.updateNonce=t.updateCpfName=t.updateCpf=t.updateVat=t.updateZipCode=t.updateCountryCode=t.updatePaymentMethod=void 0,t.updatePaymentMethod=r("paymentMethod")(function(e,t){if("UpdatePaymentMethod"!==t.type&&"UpdateCountryCode"!==t.type)return e;var a=e.formData,r=e.pageState,n="UpdatePaymentMethod"===t.type?t.value:a.paymentMethod.rawValue,t=a.countryCode.formattedValue;return m(e,{paymentMethod:o.FormValueFactory.createPaymentMethod(n,t,r.paymentFormSpec,a.paymentMethod)})}),t.updateCountryCode=r("countryCode")(function(e,t){return"UpdateCountryCode"!==t.type?e:m(e,{countryCode:o.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})}),t.updateZipCode=r("zipCode")(function(e,t){return"UpdateZipCode"!==t.type&&"UpdateCountryCode"!==t.type?e:m(e,{zipCode:o.FormValueFactory.createZipCode("UpdateZipCode"===t.type?t.value:e.formData.zipCode.rawValue,e.formData.countryCode.formattedValue,e.pageState.paymentFormSpec,e.formData.zipCode)})}),t.updateVat=r("vat")(function(e,t){return"UpdateVat"!==t.type&&"UpdateCountryCode"!==t.type?e:m(e,{vat:o.FormValueFactory.createVat("UpdateVat"===t.type?t.value.toUpperCase():e.formData.vat.rawValue,e.formData.countryCode.formattedValue,e.formData.vat)})}),t.updateCpf=r("cpf")(function(e,t){return"UpdateCpf"!==t.type&&"UpdateCountryCode"!==t.type?e:m(e,{cpf:o.FormValueFactory.createCpf("UpdateCpf"===t.type?t.value.toUpperCase():e.formData.cpf.rawValue,e.formData.cpf)})}),t.updateCpfName=r("cpfName")(function(e,t){return"UpdateCpfName"!==t.type?e:m(e,{cpfName:o.FormValueFactory.createCpfName(t.value,e.formData.cpfName)})}),t.updateNonce=r("nonce")(function(e,t){return"UpdateNonce"!==t.type?e:m(e,{nonce:o.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce)})}),t.updatePayPalNonce=r("nonce")(function(e,t){return"UpdatePayPalNonce"!==t.type?e:m(e,{payPalNonce:o.FormValueFactory.createPayPalNonce(t.value,t.email,e.formData.payPalNonce)})}),t.updateAdyenEncryptedCard=r("adyenEncryptedCard")(function(e,t){return"UpdateAdyenEncryptedCard"!==t.type?e:m(e,{adyenEncryptedCard:o.FormValueFactory.createAdyenEncryptedCard(t.value,e.formData.adyenEncryptedCard)})}),t.updateEncryptedCardForNetworkToken=r("encryptedCardForNetworkToken")(function(e,t){return"UpdateEncryptedCardForNetworkToken"!==t.type?e:m(e,{encryptedCardForNetworkToken:o.FormValueFactory.createEncryptedCardForNetworkToken(t.cardType,t.encryptedCard)})}),t.updateApplePayToken=r("applePayToken")(function(e,t){return"UpdateApplePayToken"!==t.type?e:m(e,{applePayToken:o.FormValueFactory.createApplePayToken(t.value,e.formData.applePayToken)})}),t.updateBIN=r("bin")(function(e,t){return"UpdateBIN"!==t.type?e:m(e,{bin:o.FormValueFactory.createBIN(t.value,e.formData.bin)})}),t.updateBrowserInfo=r("browserInfo")(function(e,t){return"UpdateBrowserInfo"!==t.type?e:m(e,{browserInfo:o.FormValueFactory.createBrowserInfo(t.value,e.formData.browserInfo)})}),t.updateThreeDsData=r("threeDsData")(function(e,t){return"UpdateThreeDsData"!==t.type?e:m(e,{threeDsData:o.FormValueFactory.createThreeDsData(t.value)})}),t.updateAccountHolderName=r("accountHolderName")(function(e,t){return"UpdateAccountHolderName"!==t.type?e:m(e,{accountHolderName:o.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})}),t.updateIBAN=r("iban")(function(e,t){return"UpdateIBAN"!==t.type?e:m(e,{iban:o.FormValueFactory.createIBAN(t.value,e.formData.iban)})}),t.updateMandateSigned=r("mandateSigned")(function(e,t){return"UpdateMandateSigned"!==t.type?e:m(e,{mandateSigned:o.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})}),t.updateTermsAndService=r("termsAndService")(function(e,t){return"UpdateTermsAndService"!==t.type?e:m(e,{termsAndService:o.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})}),t.updateIdealBank=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(a,r){return function(e,t){return r(a(e,t),t)}})}(r("idealBankId")(function(e,t){return"UpdateIdealBank"!==t.type?e:m(e,{idealBankId:o.FormValueFactory.createIdealBankId(t.value.bankId,e.formData.idealBankId)})}),r("idealBankName")(function(e,t){return"UpdateIdealBank"!==t.type?e:m(e,{idealBankName:o.FormValueFactory.createIdealBankName(t.value.bankName,e.formData.idealBankName)})})),t.PaymentMethodReducers=[t.updateCountryCode,t.updatePaymentMethod,t.updateZipCode,t.updateVat,t.updateCpf,t.updateCpfName,t.updateNonce,t.updateAdyenEncryptedCard,t.updateEncryptedCardForNetworkToken,t.updateBIN,t.updateBrowserInfo,t.updateThreeDsData,t.updateAccountHolderName,t.updateIBAN,t.updateMandateSigned,t.updateIdealBank,t.updatePayPalNonce,t.updateApplePayToken],t.TermsAndServiceReducers=[t.updateTermsAndService]}),define("modules/clean/react/payments/common/payments/state/store_creator",["require","exports","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form_value_factory"],function(e,t,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPaymentFormData=t.createPaymentPageState=t.createPaymentPricingState=void 0,t.createPaymentPricingState=function(e){return{countryCode:i.FormValueFactory.createCountryCode(e.countryCode).formattedValue,countryCodeLoading:void 0,hasCurrencyChanged:!1,hasTaxChangedWithinCountry:!1,loadingPrices:!1,recentLoadEvent:!1,requestToken:-1}},t.createPaymentPageState=function(e){return{paymentFormSpec:new a.PaymentFormSpec(e.serializedPaymentFormSpec),requestId:e.requestId,submitSeq:0,paypalEmail:""}},t.createPaymentFormData=function(e,t,a){var r=e.countryCode,n=e.userInfo,o=e.vat,e=t.paymentFormSpec.default_payment_method_for_country(r);return{city:i.FormValueFactory.createCity(""),phone:i.FormValueFactory.createPhone(""),name:i.FormValueFactory.createName(""),address:i.FormValueFactory.createAddress(""),paymentMethod:i.FormValueFactory.createPaymentMethod(e,r,t.paymentFormSpec),countryCode:i.FormValueFactory.createCountryCode(r),zipCode:i.FormValueFactory.createZipCode("",r,t.paymentFormSpec),vat:i.FormValueFactory.createVat(o||"",r),cpf:i.FormValueFactory.createCpf(""),cpfName:i.FormValueFactory.createCpfNamePrefill("","",n.displayName),nonce:i.FormValueFactory.createNonce(""),payPalNonce:i.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:i.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:i.FormValueFactory.createEncryptedCardForNetworkToken("",""),applePayToken:i.FormValueFactory.createApplePayToken(""),bin:i.FormValueFactory.createBIN(""),browserInfo:i.FormValueFactory.createBrowserInfo(""),threeDsData:i.FormValueFactory.createThreeDsData(""),accountHolderName:i.FormValueFactory.createInput(""),iban:i.FormValueFactory.createIBAN(""),mandateSigned:i.FormValueFactory.createCheckbox(!1),termsAndService:i.FormValueFactory.createCheckbox(!1),idealBankId:i.FormValueFactory.createIdealBankId(""),idealBankName:i.FormValueFactory.createIdealBankName("")}}}),define("modules/clean/react/payments/common/pricing/reducers/reducers",["require","exports","tslib","modules/clean/payments/skus/subscription_change_plan_set"],function(e,t,u,c){"use strict";function a(e,t){if("PrepareToUpdateTransitions"!==t.type)return e;t=u.__assign(u.__assign({},e.pricingState),{loadingPrices:!0,recentLoadEvent:!0});return u.__assign(u.__assign({},e),{pricingState:t})}function r(e,t){if("UpdateRecentLoadEventStatus"!==t.type)return e;t=u.__assign(u.__assign({},e.pricingState),{recentLoadEvent:t.recentLoadEventStatus});return u.__assign(u.__assign({},e),{pricingState:t})}function n(e,t){if("UpdateTransitionsStart"!==t.type)return e;t=u.__assign(u.__assign({},e.pricingState),{countryCodeLoading:e.formData.countryCode.formattedValue,loadingPrices:!0,recentLoadEvent:!0});return u.__assign(u.__assign({},e),{pricingState:t})}function o(e,t){if("UpdateTransitionsSuccess"!==t.type)return e;var a,r,n,o,i="N/A",s=!1,l=!1;t.subChangePlans&&(o=t.subChangePlans,0<e.pricingState.subChangePlans.plans.length)&&(n=e.pricingState.subChangePlans.plans[0],a=o[0],r=n.tvm,o=a.tvm,r=r&&r.getCurrency(),o=o&&o.getCurrency(),s=(i="N/A"===e.pricingState.originalCurrency?r:e.pricingState.originalCurrency)!==o,o=(n=n.nextBillingSummary.taxRate)===a.nextBillingSummary.taxRate&&(0===n||r===o),l=e.pricingState.hasTaxChangedWithinCountry||!o,e.pricingState.countryCode!==e.pricingState.countryCodeLoading&&(l=!1));t=u.__assign(u.__assign({},e.pricingState),{countryCode:e.pricingState.countryCodeLoading,countryCodeLoading:void 0,hasCurrencyChanged:s,hasTaxChangedWithinCountry:l,loadingPrices:!1,originalCurrency:i,recentLoadEvent:!0,subChangePlans:new c.SubscriptionChangePlanSet(t.subChangePlans),baseSubChangePlans:new c.SubscriptionChangePlanSet(t.subChangePlans)});return u.__assign(u.__assign({},e),{pricingState:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTransitionsSuccess=t.updateTransitionsStart=t.updateRecentLoadEventStatus=t.prepareToUpdateTransitions=t.TransitionManagementReducers=void 0,t.TransitionManagementReducers=[a,r,n,o],t.prepareToUpdateTransitions=a,t.updateRecentLoadEventStatus=r,t.updateTransitionsStart=n,t.updateTransitionsSuccess=o}),define("modules/clean/react/payments/pro/components/inputs/inputs",["require","exports","tslib","react","react-dom","classnames","ts-key-enum"],function(e,t,a,f,r,y,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledInputRow=t.LabeledSelectInput=t.LabeledRadioInput=t.LabeledCheckboxInput=t.LabeledTextInput=t.LabeledInput=void 0,f=a.__importDefault(f),r=a.__importDefault(r),y=a.__importDefault(y);var o,h=(o=f.default.Component,a.__extends(i,o),i.prototype.render=function(){var e=y.default({input__label:!0,"input__label--before":Boolean(!this.props.labelAfterElement),"input__label--errormodal":Boolean(this.props.errorText)},this.props.className),t=this.props.containerClassName,a=f.default.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),r=null;this.props.labelAfterElement&&(r=a,a=null);e=null;this.props.secondaryLabel&&(e=f.default.createElement("label",{className:"input__label input__label--secondary",htmlFor:this.props.htmlFor},this.props.secondaryLabel)),this.props.errorText&&(n=this.props.errorText);var n=f.default.createElement("label",{className:"input__label--error",htmlFor:this.props.htmlFor},n);return f.default.createElement("div",{className:t},a,this.props.children,r,e,n)},i);function i(){return null!==o&&o.apply(this,arguments)||this}t.LabeledInput=h;var s,l=(s=f.default.Component,a.__extends(u,s),u.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.default.findDOMNode(this.input)).value)&&t!==this.props.value&&this.props.onChange(e)},u.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.autocomplete,n=e.className,o=e.disabled,i=e.labelText,s=e.secondaryLabel,l=e.errorText,u=e.hasError,c=e.value,d=e.maxLength,p=e.containerClassName,m=e.placeholder,e=this.props.type||"text",u=y.default({input__text:!0,"input__text--error":Boolean(l)||u},this.props.inputClassName);return f.default.createElement(h,{className:n,containerClassName:p,labelText:i,htmlFor:a,errorText:l,secondaryLabel:s},f.default.createElement("input",{className:u,type:e,autoComplete:r,placeholder:m,name:a,id:a,ref:function(e){t.input=e},value:c,disabled:o,onChange:this.onChange,onBlur:this.onBlur,maxLength:d}))},u);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(r.default.findDOMNode(t.input))},t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(r.default.findDOMNode(t.input))},t}t.LabeledTextInput=l;var c,l=(c=f.default.Component,a.__extends(d,c),d.prototype.componentDidMount=function(){var e,t;!this.props.onClick||(t=(e=r.default.findDOMNode(this.input)).checked)&&t!==this.props.checked&&this.props.onClick(e)},d.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.className,n=e.containerClassName,o=e.disabled,i=e.labelText,s=e.labelClassName,l=e.errorText,e=e.checked,r=y.default({input__checkbox:!0,"input__checkbox--valid":e,"input__checkbox--disabled":Boolean(o)},r);return f.default.createElement(h,{containerClassName:n,className:s,errorText:l,htmlFor:a,labelAfterElement:!0,labelText:i},f.default.createElement("div",{"aria-labelledby":a,tabIndex:0,role:"checkbox",className:r,onClick:this.handleCheckboxChange,onKeyUp:this.handleCheckboxChange}),f.default.createElement("input",{tabIndex:-1,checked:e,disabled:o,id:a,name:a,ref:function(e){t.input=e},type:"checkbox"}))},d);function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.handleCheckboxChange=function(e){t.props.onClick&&("click"!==e.type&&e.key!==n.Key.Enter&&13!==e.charCode||(t.props.onClick(r.default.findDOMNode(t.input)),e.preventDefault()))},t}t.LabeledCheckboxInput=l;var p,l=(p=f.default.Component,a.__extends(m,p),m.prototype.render=function(){var e=this.props,t=e.id,a=e.name,r=e.ariaLabel,n=e.disabled,o=e.value,i=e.checked,s=e.onChange,l=e.labelText,u=e.labelClassName,c=y.default({input__radio:!0,"input__radio--valid":Boolean(i),"input__radio--disabled":Boolean(n)},this.props.className),e=y.default(((e={})[this.props.containerClassName+"--valid"]=!!this.props.containerClassName&&Boolean(i),e),this.props.containerClassName);return f.default.createElement(h,{containerClassName:e,className:u,labelText:l,htmlFor:a,labelAfterElement:!0},f.default.createElement("div",{"aria-label":r||a,role:"radio",tabIndex:0,className:c,onClick:this.handleRadioChange,onKeyUp:this.handleRadioChange}),f.default.createElement("input",{id:t,tabIndex:-1,ref:"radio",type:"radio",name:a,value:o,checked:i,onChange:s,disabled:n}))},m);function m(){var t=null!==p&&p.apply(this,arguments)||this;return t.handleRadioChange=function(e){t.props.disabled?e.stopPropagation():t.props.onClick&&("click"!==e.type&&e.key!==n.Key.Enter&&13!==e.charCode||(t.props.onClick(e,t.props.name,t.props.value),e.preventDefault()))},t}t.LabeledRadioInput=l;var g,l=(g=f.default.Component,a.__extends(_,g),_.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.default.findDOMNode(this.input)).value)&&t!==this.props.value&&this.props.onChange(e)},_.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.className,n=e.containerClassName,o=e.labelClassName,i=e.labelText,e=e.errorText,r=y.default({input__select:!0},r);return f.default.createElement(h,{containerClassName:n,className:o,errorText:e,htmlFor:a,labelText:i},f.default.createElement("select",{className:r,id:a,name:a,onChange:this.onChange,value:this.props.value,ref:function(e){t.input=e}},this.props.children))},_);function _(){var t=null!==g&&g.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(r.default.findDOMNode(t.input))},t}t.LabeledSelectInput=l;var P,a=(P=f.default.Component,a.__extends(b,P),b.prototype.render=function(){return f.default.createElement("div",{className:this.props.className},this.props.children,this.props.errors&&this.props.errors.map(function(e){return f.default.createElement("div",{className:e.className},f.default.createElement("label",{className:"input__label--error",htmlFor:e.name},e.text))}))},b);function b(){return null!==P&&P.apply(this,arguments)||this}t.LabeledInputRow=a}),define("modules/clean/payments/cvv_hint",["require","exports","tslib","react","modules/core/i18n","modules/clean/static_urls"],function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CvvHint=void 0,r=a.__importStar(r),t.CvvHint=function(){return r.createElement("div",{className:"cvv-hint-view","aria-live":"assertive"},r.createElement("div",null,r.createElement("p",null,n.intl.formatMessage({id:"tx+fwq",defaultMessage:"Your card code is a 3 or 4 digit number that is found in these locations:"})),r.createElement("img",{src:o.static_url("/static/images/cvv2-vflQL_5Od.png"),alt:""}),r.createElement("h5",null,n.intl.formatMessage({id:"e9l+ET",defaultMessage:"Visa/Mastercard"})),r.createElement("p",null,n.intl.formatMessage({id:"arXhRE",defaultMessage:"The security code is a 3 digit number on the back of your credit card. It immediately follows your main card number."})),r.createElement("h5",null,n.intl.formatMessage({id:"t6hm3E",defaultMessage:"American Express"})),r.createElement("p",null,n.intl.formatMessage({id:"yxdGmm",defaultMessage:"The security code is a 4 digit number on the front of your card, just above and to the right of your main card number."}))))}}),define("modules/clean/payments/cvv_hint_container",["require","exports","tslib","react","modules/clean/payments/cvv_hint","modules/clean/react/components/css","modules/clean/react/tooltip"],function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CvvHintContainer=t.CvvHintContainerView=void 0;var s,a=(s=(r=a.__importStar(r)).Component,a.__extends(l,s),l.prototype.render=function(){var e=this.props.targetDimensions;return r.createElement("div",{className:"cvv-hint-container"},r.createElement("div",{style:{left:e.left,top:e.top}},r.createElement(i.Tooltip,{position:i.TooltipPosition.BOTTOM_RIGHT,tooltip_contents:r.createElement(n.CvvHint,null),ref:this.setTooltipRef,is_focusable:!1},r.createElement("div",{style:{width:e.width,height:e.height}}))))},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.setTooltipRef=function(e){t.tooltipRef=e},t.showTooltip=function(){t.spectrumTooltipRef?t.spectrumTooltipRef.showTooltip():t.tooltipRef._show()},t.hideTooltip=function(){t.spectrumTooltipRef?t.spectrumTooltipRef.hideTooltip():t.tooltipRef._hide()},t}t.CvvHintContainerView=a,t.CvvHintContainer=o.requireCssWithComponent(a,["/static/css/payments/cvv_hint_container-vflDN68mD.css"])}),define("modules/clean/payments/skus/pricing_data",["require","exports","tslib","modules/clean/payments/cash","modules/clean/payments/skus/constants","modules/clean/payments/skus/sku_content","modules/core/exception","modules/core/i18n"],function(e,t,a,n,s,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PricingDataFromPlan=t.PricingDataOrion=t.PricingDataException=t.PricingDataFactory=void 0;var l=(u.createFromState=function(e,t){var a=e.formData,r=e.pricingState,n=s.ProductPlanType.NEW_STANDARD,o=a.productPlanType.formattedValue||t.productPlanType||n,i=r.discountInfo&&r.discountInfo.discountPercentage;if(0!==r.subChangePlans.plans.length){e=r.subChangePlans.withProductPlanType(o),a=e.yearly().plans.pop(),n=e.monthly().plans.pop(),e=Math.min(a&&a.nextBillingSummary.totalLicenses,n&&n.nextBillingSummary.totalLicenses);return n&&a?isNaN(e)||e<=0?c.NO_LICENSES:new m(r.subChangePlans,o,i):c.NO_PRODUCT_TYPE}switch(o){case s.ProductPlanType.NEW_STANDARD:return new g(t.orionPlanInfo.standard,i);case s.ProductPlanType.ADVANCED:return new g(t.orionPlanInfo.advanced,i);default:return void c.reportException({cause:c.NO_PRODUCT_TYPE,message:"Unable to calculate pricing data for unsupported product type",extra:{productPlanType:o}})}},u);function u(){}t.PricingDataFactory=l;var c=(d.reportException=function(e){var t=e.cause,a=e.message,e=e.extra;o.reportStack(t+": "+a,{tags:["BusinessPaymentPages","PricingData"],severity:o.SEVERITY.CRITICAL,exc_extra:e})},d.NO_DATA_SOURCE="No data source",d.NO_LICENSES="No licenses",d.NO_TRANSITION="No transition",d.NO_PRODUCT_TYPE="No product type",d.INCOMPLETE_DATA_SOURCE="Incomplete data source",d.notifyErrorMessage=i.intl.formatMessage({id:"0UBmAV",defaultMessage:"Were having some trouble right now. Please try again later or contact sales."}),d.notifyErrorMessagePersonal=i.intl.formatMessage({id:"KyRk6M",defaultMessage:"Were having some trouble right now. Please try again later."}),d);function d(){}t.PricingDataException=c;var p,i=(Object.defineProperty(y.prototype,"doesTaxApply",{get:function(){var e;return Boolean(null===(e=null===(e=this.getYearlyPlanData())||void 0===e?void 0:e.tvm)||void 0===e?void 0:e.doesTaxApply)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseMonthlyPrice",{get:function(){var e;return null===(e=null===(e=this.getMonthlyPlanData())||void 0===e?void 0:e.nextBillingSummary)||void 0===e?void 0:e.base},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseYearlyPrice",{get:function(){var e;return null===(e=null===(e=this.getYearlyPlanData())||void 0===e?void 0:e.nextBillingSummary)||void 0===e?void 0:e.base},enumerable:!1,configurable:!0}),y.prototype.getPromoDiscount=function(){return this.promoDiscountPercentage},y.prototype.getTotalYearlyDiscountWithPromoInPercent=function(){var e=this.getMonthlyPerUserPrice(),t=(e=0<this.promoDiscountPercentage?this.baseMonthlyPrice.divide(this.getNumLicenses()):e).subtract(this.getYearlyPerUserPrice());return Math.round(100*t.divide(e.amount).amount)},y.prototype.getYearlyPerUserPrice=function(e){var t=this.getYearlyPrice(e=void 0===e?!1:e),e=this.getNumLicenses();return 0<e?t.divide(12).divide(e):t},y.prototype.getMonthlyPerUserPrice=function(e){var t=this.getMonthlyPrice(e=void 0===e?!1:e),e=this.getNumLicenses();return 0<e?t.divide(e):t},Object.defineProperty(y.prototype,"monthlyPromoDiscount",{get:function(){return this.getMonthlyPriceWithoutPromo(!0).multiply(this.promoDiscountPercentage).divide(100)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"yearlyPromoDiscount",{get:function(){return this.getYearlyPriceWithoutPromo(this.doesTaxApply).multiply(this.promoDiscountPercentage).divide(100)},enumerable:!1,configurable:!0}),y.prototype.getMonthlyPriceWithoutPromo=function(e){return void 0===e&&(e=!1),0<this.promoDiscountPercentage?this.baseMonthlyPrice:this.getMonthlyPrice(e)},y.prototype.getYearlyPriceWithoutPromo=function(e){return void 0===e&&(e=!1),0<this.promoDiscountPercentage?this.baseYearlyPrice:this.getYearlyPrice(e)},y.prototype.getYearlySavingsWithoutPromo=function(){var e=this.getMonthlyPriceWithoutPromo(!0),t=this.getYearlyPriceWithoutPromo(!0);return e.multiply(12).subtract(t)},y.prototype.getYearlySavingsPercentage=function(){var e=this.getYearlySavingsWithoutPromo(),t=this.getMonthlyPriceWithoutPromo(!0).multiply(12),t=e.divide(t.amount).multiply(100);return Math.round(t.amount)},y.prototype.getTotalLicensePriceData=function(e){var t=this.getNumLicenses(),a=this.getMonthlyPriceWithoutPromo(!0);return{numLicenses:t,totalLicensePrice:a=e?a.multiply(12):a}},y.prototype.getAnnualDiscountData=function(){return{savingsPercentage:this.getYearlySavingsPercentage(),savingsAmount:this.getYearlySavingsWithoutPromo()}},y.prototype.getPromoDiscountData=function(e){return{discountPercentage:this.promoDiscountPercentage,discountAmount:e?this.yearlyPromoDiscount:this.monthlyPromoDiscount}},y),m=(p=i,a.__extends(f,p),f.prototype.getPlanDisplayName=function(){var e=this.yearlySubChangePlan||this.monthlySubChangePlan;if(!e)return"";e=e.finalSubState.plan;return e?e.displayName():""},f.prototype.getPlanDisplaySpace=function(){var e=this.yearlySubChangePlan||this.monthlySubChangePlan;if(!e)return"";e=e.finalSubState.plan;return e?e.displaySpace():""},f.prototype.getMonthlyPlanData=function(){return this.monthlySubChangePlan},f.prototype.getYearlyPlanData=function(){return this.yearlySubChangePlan},f.prototype.getMinLicensesLimit=function(e){return void 0===e&&(e=3),this.yearlySubChangePlan?this.yearlySubChangePlan.finalSubState.minLicenseLimitForPlan||e:this.monthlySubChangePlan&&this.monthlySubChangePlan.finalSubState.minLicenseLimitForPlan||e},f.prototype.getNumLicenses=function(){return this.numLicenses},f.prototype.getYearlyPrice=function(e){void 0===e&&(e=!1);var t,a,r=new n.Cash(0,"USD");return null!==(a=this.yearlySubChangePlan)&&void 0!==a&&a.tvm&&(a=(t=this.yearlySubChangePlan).tvm,t=t.nextBillingSummary,r=this.yearlySubChangePlan.isOnTrial?(null==t?void 0:t.total)||r:a.getBilledPrice(),e&&a.doesTaxApply&&(a=a.getTaxPrice(),r=r.subtract(a))),r},f.prototype.getMonthlyPrice=function(e){void 0===e&&(e=!1);var t,a,r=new n.Cash(0,"USD");return null!==(a=this.monthlySubChangePlan)&&void 0!==a&&a.tvm&&(a=(t=this.monthlySubChangePlan).tvm,t=t.nextBillingSummary,r=this.monthlySubChangePlan.isOnTrial?(null==t?void 0:t.total)||r:a.getBilledPrice(),e&&a.doesTaxApply&&(a=a.getTaxPrice(),r=r.subtract(a))),r},f);function f(e,t,a){var r=p.call(this,a)||this,a=e.withProductPlanType(t),t=a.yearly().plans.pop(),a=a.monthly().plans.pop();return r.yearlySubChangePlan=t,r.monthlySubChangePlan=a,r.numLicenses=Math.min(t&&t.nextBillingSummary.totalLicenses,a&&a.nextBillingSummary.totalLicenses),r.monthlySubChangePlan&&r.yearlySubChangePlan||(a=r.monthlySubChangePlan?"yearly":"monthly",c.reportException({cause:c.NO_TRANSITION,message:"Unable to find a "+a+" subChangePlan in PricingDataOrion",extra:{subChangePlans:e}})),(isNaN(r.numLicenses)||r.numLicenses<=0)&&c.reportException({cause:c.NO_LICENSES,message:"Number of licenses is 0 in PricingDataOrion",extra:{yearlySubChangePlan:r.yearlySubChangePlan}}),r}function y(e){this.promoDiscountPercentage=e||0}t.PricingDataOrion=m;var h,g=(h=i,a.__extends(_,h),_.prototype.getPlanDisplayName=function(){return this.planInfo.skuContent.name},_.prototype.getPlanDisplaySpace=function(){return r.SkuContentClient.deserialize(this.planInfo.skuContent).spaceShortFormTb()},_.prototype.getMonthlyPlanData=function(){},_.prototype.getYearlyPlanData=function(){},_.prototype.getMinLicensesLimit=function(e){return void 0===e&&(e=3),this.planInfo.minLicenseCount||e},_.prototype.getNumLicenses=function(){return this.getMinLicensesLimit()},_.disallowTaxCalculations=function(e){e||c.reportException({cause:c.INCOMPLETE_DATA_SOURCE,message:"Cannot calculate price with tax from plan info",extra:{}})},_.prototype.getYearlyPrice=function(e){return _.disallowTaxCalculations(e=void 0===e?!1:e),n.Cash.fromObject(this.planInfo.yearlyPrice)},_.prototype.getMonthlyPrice=function(e){return _.disallowTaxCalculations(e=void 0===e?!1:e),n.Cash.fromObject(this.planInfo.monthlyPrice)},_);function _(e,t){t=h.call(this,t)||this;return t.planInfo=e,t}t.PricingDataFromPlan=g}),define("modules/clean/react/payments/business/state/business_state",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingFormSteps=t.BuyFormSteps=t.TryFormSteps=t.PAYMENT_INFO_STEP=t.PLAN_SELECTION_STEP=t.ACCOUNT_INFO_OR_CHECKOUT_STEP=t.SKU_SELECTION_STEP=t.serverPropsToFields=t.fieldsToServerProps=void 0,t.fieldsToServerProps={accountHolderName:"owner_name",adyenEncryptedCard:"adyen_encrypted_card",encryptedCardForNetworkToken:"encrypted_card_for_network_token",bin:"bin",browserInfo:"browser_info",threeDsData:"three_ds_data",captcha:"recaptcha_response",companySize:"company_size",countryCode:"country_code",cpf:"cpf",cpfName:"cpf_name",email:"email",emailsToInvite:"emails_to_invite",firstName:"fname",iban:"iban",idealBankId:"bank_id",idealBankName:"bank_name",lastName:"lname",mandateSigned:"mandate_signed",marketingOptIn:"marketing_opt_in",nonce:"nonce",numberOfUsers:"team_num_users",password:"password",paymentMethod:"payment_method",payPalNonce:"paypal_nonce",schedule:"schedule_id",scheduleId:"schedule_id",selectedUser:"selected_user",teamName:"team_name",teamPhone:"team_phone",termsAndService:"tos_agree",vat:"vat",zipCode:"zip",city:"city",phone:"phone",name:"name",address:"address",applePayToken:"apple_pay_token"},t.serverPropsToFields={};for(var a=0,r=Object.keys(t.fieldsToServerProps);a<r.length;a++){var n=r[a],o=t.fieldsToServerProps[n];o&&(t.serverPropsToFields[o]=n)}t.SKU_SELECTION_STEP=0,t.ACCOUNT_INFO_OR_CHECKOUT_STEP=1,t.PLAN_SELECTION_STEP=2,t.PAYMENT_INFO_STEP=3,t.TryFormSteps=function(){return{skuSelectionStep:t.SKU_SELECTION_STEP,accountInfoStep:t.ACCOUNT_INFO_OR_CHECKOUT_STEP,planSelectionStep:t.PLAN_SELECTION_STEP,paymentInfoStep:t.PAYMENT_INFO_STEP}},t.BuyFormSteps=function(){return{skuSelectionStep:t.SKU_SELECTION_STEP,checkoutStep:t.ACCOUNT_INFO_OR_CHECKOUT_STEP}},t.BillingFormSteps=function(){return{skuSelectionStep:t.SKU_SELECTION_STEP,checkoutStep:t.ACCOUNT_INFO_OR_CHECKOUT_STEP}}}),define("modules/clean/react/payments/buy/components/inputs/inputs",["require","exports","tslib","react","react-dom","classnames","ts-key-enum"],function(e,t,a,f,r,y,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledInputRow=t.LabeledSelectInput=t.LabeledRadioInput=t.LabeledCheckboxInput=t.LabeledTextInput=t.LabeledInput=void 0,f=a.__importDefault(f),r=a.__importDefault(r),y=a.__importDefault(y);var o,h=(o=f.default.Component,a.__extends(i,o),i.prototype.render=function(){var e=y.default({input__label:!0,"input__label--before":Boolean(!this.props.labelAfterElement)},this.props.className),t=this.props.containerClassName,a=f.default.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),r=null;this.props.labelAfterElement&&(r=a,a=null);var n,e=null;return this.props.secondaryLabel&&(e=f.default.createElement("label",{className:"input__label input__label--secondary",htmlFor:this.props.htmlFor},this.props.secondaryLabel)),this.props.errorText&&(n=f.default.createElement("label",{className:"input__label--error",htmlFor:this.props.htmlFor},this.props.errorText)),f.default.createElement("div",{className:t},a,this.props.children,r,e,n)},i);function i(){return null!==o&&o.apply(this,arguments)||this}t.LabeledInput=h;var s,l=(s=f.default.Component,a.__extends(u,s),u.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.default.findDOMNode(this.input)).value)&&t!==this.props.value&&this.props.onChange(e)},u.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.autocomplete,n=e.className,o=e.disabled,i=e.labelText,s=e.secondaryLabel,l=e.errorText,u=e.hasError,c=e.value,d=e.maxLength,p=e.containerClassName,m=e.placeholder,e=this.props.type||"text",u=y.default({input__text:!0,"input__text--error":Boolean(l)||u},this.props.inputClassName);return f.default.createElement(h,{className:n,containerClassName:p,labelText:i,htmlFor:a,errorText:l,secondaryLabel:s},f.default.createElement("input",{autoComplete:r,className:u,type:e,placeholder:m,name:a,id:a,ref:function(e){t.input=e},value:c,disabled:o,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,maxLength:d}))},u);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(r.default.findDOMNode(t.input))},t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(r.default.findDOMNode(t.input))},t.onFocus=function(e){t.props.onFocus&&t.props.onFocus(t.input)},t}t.LabeledTextInput=l;var c,l=(c=f.default.Component,a.__extends(d,c),d.prototype.componentDidMount=function(){var e,t;!this.props.onClick||(t=(e=r.default.findDOMNode(this.input)).checked)&&t!==this.props.checked&&this.props.onClick(e)},d.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.className,n=e.containerClassName,o=e.disabled,i=e.labelText,s=e.labelClassName,l=e.errorText,e=e.checked,r=y.default({input__checkbox:!0,"input__checkbox--valid":e,"input__checkbox--disabled":Boolean(o)},r);return f.default.createElement(h,{containerClassName:n,className:s,errorText:l,htmlFor:a,labelAfterElement:!0,labelText:i},f.default.createElement("div",{"aria-checked":e,"aria-labelledby":a,tabIndex:0,role:"checkbox",className:r,onClick:this.handleCheckboxChange,onKeyDown:this.preventSpacebarScrolling,onKeyUp:this.handleCheckboxChange,onBlur:this.onBlur}),f.default.createElement("input",{readOnly:!0,"aria-hidden":!0,tabIndex:-1,checked:e,disabled:o,id:a,name:a,ref:function(e){t.input=e},type:"checkbox"}))},d);function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.handleCheckboxChange=function(e){t.props.onClick&&("click"!==e.type&&e.key!==n.Key.Enter&&13!==e.charCode&&" "!==e.key&&32!==e.charCode||(t.props.onClick(r.default.findDOMNode(t.input)),e.preventDefault()))},t.onBlur=function(){t.props.onBlur&&t.props.onBlur(r.default.findDOMNode(t.input))},t.preventSpacebarScrolling=function(e){" "!==e.key&&32!==e.charCode||e.preventDefault()},t}t.LabeledCheckboxInput=l;var p,l=(p=f.default.Component,a.__extends(m,p),m.prototype.render=function(){var e=this.props,t=e.name,a=e.inputId,r=e.ariaLabelId,n=e.disabled,o=e.value,i=e.checked,s=e.labelSpan,l=e.labelClassName,e=y.default({input__radio:!0,"input__radio--valid":Boolean(i),"input__radio--disabled":Boolean(n)},this.props.className);return f.default.createElement("label",{htmlFor:o,className:l},f.default.createElement("span",{className:e,onClick:this.handleClick},f.default.createElement("input",{"aria-labelledby":r,ref:this.radio,type:"radio",name:t,id:a,value:o,tabIndex:i?0:-1,"aria-checked":Boolean(i),checked:Boolean(i),onChange:this.handleRadioChange,onKeyUp:this.handleRadioKeyUp,disabled:n}),s))},m);function m(e){var t=p.call(this,e)||this;return t.focus=function(){null!==t.radio.current&&t.radio.current.focus()},t.handleClick=function(e){t.props.disabled?e.stopPropagation():t.focus()},t.handleRadioChange=function(e){t.props.disabled?e.stopPropagation():t.props.onClickOrChange&&(t.props.onClickOrChange(e,t.props.inputId,t.props.value),e.preventDefault())},t.handleRadioKeyUp=function(e){t.props.disabled?e.stopPropagation():(["Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)||[9,37,38,39,40].includes(e.keyCode))&&t.props.onClickOrChange&&(e.preventDefault(),t.focus(),t.props.onClickOrChange(e,t.props.inputId,t.props.value))},t.radio=f.default.createRef(),t}t.LabeledRadioInput=l;var g,l=(g=f.default.Component,a.__extends(_,g),_.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.default.findDOMNode(this.input)).value)&&t!==this.props.value&&this.props.onChange(e)},_.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.className,n=e.containerClassName,o=e.hasError,i=e.labelClassName,s=e.labelText,l=e.errorText,e=e.autoComplete,r=y.default({input__select:!0,"input__select--error":Boolean(l)||o},r);return f.default.createElement(h,{containerClassName:n,className:i,errorText:l,htmlFor:a,labelText:s},f.default.createElement("select",{className:r,id:a,name:a,onChange:this.onChange,onBlur:this.onBlur,value:this.props.value,autoComplete:e,ref:function(e){t.input=e}},this.props.children))},_);function _(){var t=null!==g&&g.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(r.default.findDOMNode(t.input))},t.onBlur=function(){t.props.onBlur&&t.props.onBlur(r.default.findDOMNode(t.input))},t}t.LabeledSelectInput=l;var P,a=(P=f.default.Component,a.__extends(b,P),b.prototype.render=function(){return f.default.createElement("div",{className:this.props.className},this.props.children,this.props.errors&&this.props.errors.map(function(e,t){return f.default.createElement("div",{className:e.className,key:e.name+"-"+t},f.default.createElement("label",{className:"input__label--error",htmlFor:e.name},e.text))}))},b);function b(){return null!==P&&P.apply(this,arguments)||this}t.LabeledInputRow=a}),define("modules/clean/react/payments/checkout/components/inputs/labeled_checkbox_input",["require","exports","tslib","react","react-dom","modules/clean/react/payments/checkout/components/inputs/labeled_input"],function(e,t,a,l,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledCheckboxInput=void 0,l=a.__importDefault(l),r=a.__importStar(r);var n,a=(n=l.default.Component,a.__extends(o,n),o.prototype.onChange=function(e){this.props.onChange&&this.props.onChange(r.findDOMNode(this.input))},o.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.findDOMNode(this.input)).checked)&&t!==this.props.checked&&this.props.onChange(e)},o.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.className,n=e.labelText,o=e.errorText,i=e.errorHTML,s=e.checked,e=e.disabled;return l.default.createElement(u.LabeledInput,{className:r,errorHTML:i,errorText:o,htmlFor:a,labelAfterElement:!0,labelText:n},l.default.createElement("input",{checked:s,disabled:e,id:a,name:a,onChange:this.onChange.bind(this),onBlur:this.onBlur,ref:function(e){t.input=e},type:"checkbox"}))},o);function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.onBlur=function(){e.props.onBlur&&e.props.onBlur(r.findDOMNode(e.input))},e}t.LabeledCheckboxInput=a}),define("modules/clean/react/payments/checkout/components/inputs/labeled_input",["require","exports","tslib","classnames","dompurify","react","modules/core/browser_detection","modules/clean/react/tooltip","modules/clean/react/sprite"],function(e,t,a,i,s,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabeledInput=void 0,i=a.__importDefault(i),s=a.__importStar(s),l=a.__importDefault(l),u=a.__importStar(u);var r,a=(r=l.default.Component,a.__extends(n,r),n.prototype.render=function(){var e=i.default({"input__label--errormodal":Boolean(this.props.errorText),"input-with-inline-tooltip":Boolean(this.props.inlineTooltipText)},this.props.className,"label-input","input__label"),t=l.default.createElement("label",{className:"label "+(this.props.labelClass||""),htmlFor:this.props.htmlFor},this.props.labelText),a=null;this.props.labelAfterElement&&(a=t,t=null);var r=this.props.rightLabelElement?l.default.createElement("div",{className:"grid__item grid--x-bookend"},t,l.default.createElement("div",null,this.props.rightLabelElement)):t,n=null;this.props.errorText?n=this.props.errorText:this.props.errorHTML&&(n=l.default.createElement("span",{dangerouslySetInnerHTML:{__html:s.sanitize(this.props.errorHTML)}}));var o=l.default.createElement("label",{className:"error-message",htmlFor:this.props.htmlFor},n),t=null;return this.props.inlineTooltipText&&(n=u.is_supported_mobile_browser()?c.TooltipPosition.BOTTOM:c.TooltipPosition.RIGHT,n=l.default.createElement(c.Tooltip,{tooltip_classname:"input__inline-tooltip-bubble",position:n,tooltip_contents:this.props.inlineTooltipText},l.default.createElement(d.Sprite,{group:"web",name:"info",alt:""})),t=l.default.createElement("span",{className:"grid__item grid--y-middle input__tooltip--inline"},n)),l.default.createElement("div",{className:e},r,t,this.props.children,a,o)},n);function n(){return null!==r&&r.apply(this,arguments)||this}t.LabeledInput=a}),define("modules/clean/react/payments/checkout/components/inputs/labeled_text_input",["require","exports","tslib","classnames","react","react-dom","modules/clean/react/payments/checkout/components/inputs/labeled_input"],function(e,t,a,h,g,r,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BizLabeledTextInput=void 0,h=a.__importDefault(h),g=a.__importDefault(g),r=a.__importStar(r);var n,a=(n=g.default.Component,a.__extends(o,n),o.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.findDOMNode(this.input)).value)&&t!==this.props.value&&this.props.onChange(e)},o.prototype.render=function(){var t=this,e=this.props,a=e.autoComplete,r=e.className,n=e.disabled,o=e.errorHTML,i=e.errorText,s=e.inlineTooltipText,l=e.labelAfterElement,u=e.labelClass,c=e.labelText,d=e.maxLength,p=e.name,m=e.placeholder,f=e.value,y=this.props.type||"text",e=h.default({input__text:!0,"input__text--errormodal":Boolean(i)},this.props.inputClassName);return g.default.createElement(_.LabeledInput,{className:r,errorHTML:o,errorText:i,htmlFor:p,inlineTooltipText:s,labelAfterElement:l,labelClass:u,labelText:c},g.default.createElement("input",{autoComplete:a,className:e,type:y,name:p,id:p,ref:function(e){t.input=e},value:null===f?"":f,disabled:n,onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,maxLength:d,placeholder:m}))},o);function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(r.findDOMNode(t.input))},t.onFocus=function(e){t.props.onFocus&&t.props.onFocus(r.findDOMNode(t.input))},t.onChange=function(e){t.props.onChange&&t.props.onChange(r.findDOMNode(t.input))},t}t.BizLabeledTextInput=a}),define("modules/clean/react/payments/checkout/components/inputs/labeled_select_input",["require","exports","tslib","react","react-dom","modules/clean/react/payments/checkout/components/inputs/labeled_input"],function(e,t,a,u,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BizLabeledSelectInput=void 0,u=a.__importDefault(u),r=a.__importStar(r);var n,a=(n=u.default.Component,a.__extends(o,n),o.prototype.onChange=function(e){this.props.onChange&&this.props.onChange(r.findDOMNode(this.input))},o.prototype.onClick=function(e){this.props.onClick&&this.props.onClick(r.findDOMNode(this.input))},o.prototype.componentDidMount=function(){var e,t;!this.props.onChange||(t=(e=r.findDOMNode(this.input)).value)&&t!==this.props.value&&this.props.onChange(e)},o.prototype.render=function(){var t=this,e=this.props,a=e.name,r=e.className,n=e.labelClass,o=e.labelText,i=e.rightLabelElement,s=e.errorText,l=e.errorHTML,e=e.autoComplete;return u.default.createElement(c.LabeledInput,{className:r,errorHTML:l,errorText:s,labelClass:n,htmlFor:a,labelText:o,rightLabelElement:i},u.default.createElement("select",{autoComplete:e,className:"option-selector",id:a,name:a,onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),value:this.props.value,ref:function(e){t.input=e}},this.props.children))},o);function o(){return null!==n&&n.apply(this,arguments)||this}t.BizLabeledSelectInput=a}),define("modules/clean/react/payments/checkout/components/payment_method_form/address_form",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/checkout/components/inputs/labeled_text_input","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/checkout/components/inputs/labeled_select_input","modules/clean/react/payments/common/constants"],function(e,t,a,o,i,s,l,r,n,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressForms=void 0;var c,a=(c=(o=a.__importDefault(o)).default.Component,a.__extends(d,c),d.prototype.renderCountrySelector=function(e){var a=this,t="grid__item--2-3";e?t="grid__item":this.props.isInModal||(t="grid__item--fluid grid__item--margin-right--1-24");e=this.props.countryList.map(function(e){var t=e[0],e=e[1];return o.default.createElement("option",{key:"location-"+t,value:t,"aria-selected":t===a.props.formData.countryCode.formattedValue},e)});return 1==this.props.businessStyling?o.default.createElement(n.BizLabeledSelectInput,{autoComplete:"country",className:t,labelText:i.intl.formatMessage({id:"1SPrvR",defaultMessage:"Country"}),name:"country_code",onChange:this.onCountryCodeChange.bind(this),value:this.props.formData.countryCode.rawValue},e):o.default.createElement(s.LabeledSelectInput,{autoComplete:"country",className:"payment-info__country",containerClassName:t,labelText:i.intl.formatMessage({id:"1SPrvR",defaultMessage:"Country"}),name:"country_code",onChange:this.onCountryCodeChange,value:this.props.formData.countryCode.rawValue},e)},d.prototype.zipCodeErrorString=function(){var e=this.props.formData.zipCode;return!r.FormValueHelper.isValid(e)&&e.showError?"US"===this.props.formData.countryCode.formattedValue?i.intl.formatMessage({id:"kWjJlf",defaultMessage:"Please enter a valid billing ZIP code."}):u.ZipCodeErrorMessage:""},d.prototype.renderBillingFields=function(){return!0===this.props.businessStyling?o.default.createElement(o.default.Fragment,null,this.renderCountrySelector(!1),this.renderZipCodeInput()):o.default.createElement(s.LabeledInputRow,{className:"payment-info__location grid__item grid--x-bookend grid--y-top"},this.renderCountrySelector(!1),this.renderZipCodeInput())},d.prototype.renderZipCodeInput=function(e){void 0===e&&(e=!1);var t=i.intl.formatMessage({id:"5kJrVX",defaultMessage:"Postal Code"}),a="US"===this.props.formData.countryCode.formattedValue?i.intl.formatMessage({id:"ciLB6A",defaultMessage:"Billing ZIP"}):t,r=!this.props.paymentSpec.allow_zip_code_for_country(this.props.formData.countryCode.formattedValue),n=this.props.formData.zipCode.errorState&&this.props.formData.zipCode.showError;if(!0===this.props.businessStyling)return o.default.createElement(l.BizLabeledTextInput,{autoComplete:"postal-code",className:"billing-zip payment-info__zip grid__item grid__item--7-24",disabled:r,errorText:this.zipCodeErrorString(),errorHTML:this.props.formData.zipCode.serverError,labelText:a,name:"zip",onChange:this.onZipCodeChange.bind(this),value:this.props.formData.zipCode.rawValue,onBlur:this.onZipCodeBlur.bind(this)});t=e?"grid__item--fluid grid__item--margin-right--1-24":"grid__item--fluid",e=this.zipCodeErrorString();return o.default.createElement(s.LabeledTextInput,{className:"payment-info__zip",containerClassName:t,name:"zip",autocomplete:"postal-code",labelText:a,value:this.props.formData.zipCode.rawValue,hasError:Boolean(n),disabled:r,onBlur:this.onZipCodeBlur,onChange:this.onZipCodeChange,errorText:e})},d.prototype.render=function(){return this.renderBillingFields()},d);function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.onCountryCodeChange=function(e){t.props.actions.updateCountryCode(e.value)},t.onZipCodeBlur=function(e){t.props.actions.showFormFieldErrors(["zipCode"],"ZipCodeBlur"),t.props.actions.blurZipCode(e.value)},t.onZipCodeChange=function(e){t.props.actions.updateZipCode(e.value)},t}t.AddressForms=a}),define("modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame",["require","exports","tslib","react","react-dom","modules/clean/deprecated_ajax/ajax_jquery","classnames","modules/core/exception","modules/core/notify","modules/core/i18n","modules/clean/payments/cvv_hint_container","modules/clean/react/payments/common/form/actions/actions","modules/clean/payments/payment_form/iframe_rpc","modules/clean/payments/three_ds_helper","modules/clean/metrics/index","apex-metrics/index"],function(e,t,i,n,s,a,o,l,r,u,c,d,p,m,f,y){"use strict";function h(){var a={};return a.promise=new Promise(function(e,t){a.resolve=e,a.reject=t}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreditCardFrame=void 0,n=i.__importDefault(n),s=i.__importStar(s),a=i.__importStar(a),o=i.__importDefault(o),l=i.__importStar(l);var g,_=(g=n.default.Component,i.__extends(P,g),P.prototype.componentDidMount=function(){if(this.logLatency(this.timeInitialized,"componentDidMount"),this.isSeleniumChangesTest())return this.props.actions.updateNonce("fake-valid-nonce",{ccn:{error:!1},ccode:{error:!1},ccexp:{error:!1}}),void this.props.actions.updateBIN("457173");this.braintreeTokenLoaded=h(),this.adyenKeyLoaded=h(),this.iFrameRpcListener=new p.IFrameRpcListener(this.getCCIframeOrigin(),this);var e=frames.cc_iframe.window;this.iframeMessageTransport=new p.IFrameRpcTransport(this.props.iframeUrl,e),this.pingIframe()},P.prototype.componentWillUnmount=function(){this.isSeleniumChangesTest()||this.iFrameRpcListener.removeMessageListener()},P.prototype.componentWillReceiveProps=function(e){e.nonce.showError&&this.showFormErrors()},P.prototype.render=function(){var e=this.props,t=e.hidden,a=e.iframeUrl,r=o.default({grid__item:!0,hidden:t}),e=o.default("iframe-holder iframe-holder--full-width",{"iframe-holder--responsive":this.props.isResponsive}),t={};return this.props.getHeightFromIframe&&(t={height:this.state.iframeFormHeight}),n.default.createElement("div",{id:"iframe-holder",className:r},n.default.createElement(c.CvvHintContainer,{targetDimensions:this.state.cvvHintDimensions,ref:this.setCvvHintContainerRef}),n.default.createElement("div",{className:e,style:t,ref:this.setIframeRef},n.default.createElement("iframe",{src:a,name:"cc_iframe",frameBorder:"0",title:u.intl.formatMessage({id:"ljVFCM",defaultMessage:"Form for entering credit card information"})})))},P.prototype.isSeleniumChangesTest=function(){return""===this.props.iframeUrl&&!1},P.prototype.getCCIframeOrigin=function(){var e=this.props.iframeUrl.split("/");return e[0]+"//"+e[2]},P.prototype.startServerTimeUpdate=function(){function e(e,t,a){(e=JSON.parse(e))&&e.hasOwnProperty("server_time")&&(e={serverTime:e.server_time},r.iframeMessageTransport.sendMessage(p.IFrameRpc.SET_SERVER_TIME,e)),r.startServerTimeUpdate()}function t(e,t,a){r.startServerTimeUpdate()}var r=this;setTimeout(function(){a.BackgroundRequest({url:"/credit_card_secrets/server_time",type:"GET",success:e,error:t})},216e5)},P.prototype.encryptWithAdyen=function(){var t=this;return this.adyenEncrypting||(this.adyenEncrypting=!0,this.adyenEncryptionDeferred=h(),this.isSeleniumChangesTest()?this.submitEncryptedAdyenCard("brisket"):this.adyenKeyLoaded.promise.then(function(e){t.iframeMessageTransport.sendMessage(p.IFrameRpc.ENCRYPT_WITH_ADYEN)})),this.adyenEncryptionDeferred.promise},P.prototype.encryptForNetworkToken=function(){return this.networkTokenEncrypting||(this.networkTokenEncrypting=!0,this.networkTokenEncryptionDeferred=h(),this.isSeleniumChangesTest()?this.submitEncryptedCardForNetworkToken("mastercard","test_for_network_token"):this.iframeMessageTransport.sendMessage(p.IFrameRpc.ENCRYPT_FOR_NETWORK_TOKEN)),this.networkTokenEncryptionDeferred.promise},P.prototype.tokenizeWithBraintree=function(){var t=this;return this.braintreeTokenizing||(this.braintreeTokenizing=!0,this.braintreeTokenizingDeferred=h(),this.isSeleniumChangesTest()?this.submitTokenized("fake-valid-nonce","457173"):this.braintreeTokenLoaded.promise.then(function(e){t.iframeMessageTransport.sendMessage(p.IFrameRpc.TOKENIZE)})),this.braintreeTokenizingDeferred.promise},P.prototype.tokenize=function(){return this.timeBeforeTokenize=Date.now(),this.encryptWithAdyen(),this.encryptForNetworkToken(),Promise.all([this.tokenizeWithBraintree()]).then(function(e){for(var t=!0,a=0,r=e;a<r.length;a++)var n=r[a],t=t&&n;return t})},P.prototype.submitTokenized=function(e,t){this.props.actions.updateNonce(e),this.props.actions.updateBIN(t),this.braintreeTokenizing=!1,this.braintreeTokenizingDeferred.resolve(!0),this.logLatency(this.timeBeforeTokenize,"BrainTreeEncryption")},P.prototype.submitEncryptedAdyenCard=function(e){var t=m.collectBrowserInfo();t&&this.props.actions.updateBrowserInfo(t),this.props.actions.updateAdyenEncryptedCard(e),this.adyenEncrypting=!1,this.adyenEncryptionDeferred.resolve(!0),this.logLatency(this.timeBeforeTokenize,"AdyenEncryption")},P.prototype.submitEncryptedCardForNetworkToken=function(e,t){this.props.actions.updateEncryptedCardForNetworkToken(e,t),this.networkTokenEncrypting=!1,this.networkTokenEncryptionDeferred.resolve(!0),this.logLatency(this.timeBeforeTokenize,"NetworkTokenEncryption")},P.prototype.logLatency=function(e,t){if(e)try{var a=Date.now()-e;f.getMetricsReporter().createStats({ns:"payments_frontend",name:"iframe_latency"},{category:t}).recordDuration(a,y.TimeUnit.MILLISECONDS)}catch(e){}},P.prototype.originReady=function(e){var t=this;this.iframeReady||(this.iframeReady=!0,this.logLatency(this.timeInitialized,"iframeReady"),this.isSeleniumChangesTest()||(this.iframeMessageTransport.sendMessage(p.IFrameRpc.READY),this.iframeMessageTransport.sendMessage(p.IFrameRpc.INIT_NETWORK_TOKEN,{isProd:!0}),this.timeBeforeFetchBraintreeToken=Date.now(),this.fetchBraintreeToken().then(function(e){t.iframeMessageTransport.sendMessage(p.IFrameRpc.INIT_BRAINTREE,{token:e}),t.braintreeTokenLoaded.resolve(!0),t.logLatency(t.timeBeforeFetchBraintreeToken,"fetchBraintreeToken")}).catch(function(){r.Notify.error(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"})),t.logLatency(t.timeBeforeFetchBraintreeToken,"fetchBraintreeTokenError")}),this.timeBeforeFetchAdyenKey=Date.now(),this.fetchAdyenKey().then(function(e){t.iframeMessageTransport.sendMessage(p.IFrameRpc.INIT_ADYEN,e),t.adyenKeyLoaded.resolve(!0),t.logLatency(t.timeBeforeFetchAdyenKey,"fetchAdyenKey")}).catch(function(){r.Notify.error(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"})),t.logLatency(t.timeBeforeFetchAdyenKey,"fetchAdyenKeyError")}),this.threeDsHandler=new m.ThreeDsHandler({updateThreeDsData:this.props.actions.updateThreeDsData,submitThreeDsChallenge:this.submitThreeDsChallenge,triggerThreeDsChallenge:this.props.actions.triggerThreeDsChallenge,submitThreeDsFingerprint:this.submitThreeDsFingerprint,triggerThreeDsFingerprint:this.props.actions.triggerThreeDsFingerprint,isDesktop:!1,isSeleniumChangesTest:this.isSeleniumChangesTest()})))},P.prototype.fetchAdyenKey=function(r,n){var o=this;return void 0===r&&(r=2),void 0===n&&(n=h()),a.BackgroundRequest({url:"/credit_card_secrets/adyen_key",type:"GET",success:function(e,t,a){e=JSON.parse(e);e&&e.hasOwnProperty("key")&&e.hasOwnProperty("server_time")?(e={key:e.key,serverTime:e.server_time},n.resolve(e)):n.reject(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"})),o.startServerTimeUpdate()},error:function(e,t,a){o.tokenErrorHandler(r,o.fetchAdyenKey,n,e,"get adyen key failed:",["fetch_adyen_key_failed"],a)}}),n.promise},P.prototype.fetchBraintreeToken=function(r,n){var o=this;return void 0===r&&(r=2),void 0===n&&(n=h()),a.BackgroundRequest({url:"/payments/braintree_token",success:function(e,t,a){try{var r=JSON.parse(e);if(!r||!r.hasOwnProperty("token"))throw new Error("Invalid response from server");n.resolve(r.token)}catch(e){n.reject(u.intl.formatMessage({id:"K2YdqW",defaultMessage:"Unable to connect to our servers - Refresh page"}))}},error:function(e,t,a){o.tokenErrorHandler(r,o.fetchBraintreeToken,n,e,"ajax /braintree_token failed:",["fetch_braintree_token_failed"],a)}}),n.promise},P.prototype.tokenErrorHandler=function(e,t,a,r,n,o,i){0<--e?setTimeout(function(){t(e,a)},2e3):(r=n+" "+JSON.stringify(r.status)+", "+r.statusText+", "+r.readyState,l.reportException({err:new Error(r),severity:l.SEVERITY.CRITICAL,tags:o}),a.reject(i))},P.prototype.pingIframe=function(){var e=this;this.iframeReady||(this.pingTimeoutLogged||(this.firstPing?12e4<(new Date).getTime()-this.firstPing&&(l.reportException({err:new Error("PCI iFrame timeout"),severity:l.SEVERITY.NONCRITICAL,tags:["iframe_ping_timeout"]}),this.pingTimeoutLogged=!0):this.firstPing=(new Date).getTime()),this.iframeMessageTransport.sendMessage(p.IFrameRpc.READY),setTimeout(function(){e.pingIframe()},250))},P.prototype.showCvvModal=function(){},P.prototype.showFormErrors=function(){this.isSeleniumChangesTest()||this.iframeMessageTransport.sendMessage(p.IFrameRpc.SHOW_FORM_ERRORS)},P.prototype.focusOutsideIframe=function(){},P.prototype.handleValidationFailure=function(e){this.braintreeTokenizing=!1,this.braintreeTokenizingDeferred.resolve(!1),this.adyenEncrypting=!1,this.adyenEncryptionDeferred.resolve(!1),this.networkTokenEncrypting=!1,this.networkTokenEncryptionDeferred.resolve(!1)},P.prototype.handleDataStatusUpdate=function(e){},P.prototype.handleValidationUpdate=function(e){this.props.actions.updateNonce(this.props.nonce.rawValue,e),this.props.actions.updateBIN(this.props.bin.rawValue)},P.prototype.handleSizeUpdate=function(e){this.setState({iframeFormHeight:e})},P.prototype.handleBlurField=function(e){this.props.actions.blurCCField(e)},P.defaultProps={isResponsive:!1},P);function P(e){var o=g.call(this,e)||this;return o.timeInitialized=null,o.timeBeforeFetchBraintreeToken=null,o.timeBeforeFetchAdyenKey=null,o.timeBeforeTokenize=null,o.setCvvHintContainerRef=function(e){o.cvvHintContainerRef=e},o.setIframeRef=function(e){o.iframeRef=e},o.submitThreeDsChallenge=function(){o.props.submitForm(d.SubmitFormTriggerType.ThreeDsChallenge)},o.submitThreeDsFingerprint=function(){o.props.submitForm(d.SubmitFormTriggerType.ThreeDsFingerprint)},o.showTooltip=function(e,t){var a,r,n;"cvv"===e&&(a=o.iframeRef.getBoundingClientRect(),r=s.findDOMNode(o.cvvHintContainerRef).getBoundingClientRect(),e=a.left-r.left,r=a.top-r.top,n={left:t.left+e,top:t.top+r,width:t.width,height:t.height},o.setState(function(e){return i.__assign(i.__assign({},e),{cvvHintDimensions:n})}),o.cvvHintContainerRef&&o.cvvHintContainerRef.getWrappedComponent().showTooltip())},o.hideTooltip=function(e){"cvv"===e&&o.cvvHintContainerRef&&o.cvvHintContainerRef.getWrappedComponent().hideTooltip()},o.handle3DsMessage=function(e){o.threeDsHandler&&o.threeDsHandler.handle3DsMessage(e)},o.iframeReady=!1,o.state={cvvHintDimensions:{left:0,top:0,width:0,height:0},iframeFormHeight:null},o.timeInitialized=Date.now(),o}t.CreditCardFrame=_}),define("modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form",["require","exports","tslib","react","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/checkout/components/inputs/labeled_text_input","modules/clean/react/payments/checkout/components/inputs/labeled_checkbox_input","modules/core/i18n","modules/clean/react/sprite_div","modules/clean/react/tooltip"],function(e,t,a,r,n,o,i,s,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectDebitForm=void 0,r=a.__importDefault(r),l=a.__importDefault(l);var c,d=(u=a.__importStar(u)).Tooltip,p=u.TooltipPosition,a=(c=r.default.Component,a.__extends(m,c),m.prototype.onAccountHolderNameChange=function(e){this.props.actions.updateAccountHolderName(e.value)},m.prototype.onIBANChange=function(e){this.props.actions.updateIBAN(e.value)},m.prototype.onMandateSignedChange=function(e){this.props.actions.updateMandateSigned(e.checked)},m.prototype.onMandateSignedBlur=function(e){this.props.actions.showFormFieldErrors(["mandateSigned"],"MandateSignedBlur")},m.prototype.accountHolderNameErrorString=function(){var e=this.props.formData.accountHolderName;return!n.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"lVEpBU",defaultMessage:"Please enter the account holders name."}):""},m.prototype.ibanErrorString=function(){var e=this.props.formData.iban;return!n.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"jqBL8f",defaultMessage:"Please enter a valid bank account number."}):""},m.prototype.mandateSignedErrorString=function(){var e=this.props.formData.mandateSigned;return!n.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"X6vQlG",defaultMessage:"Please agree to the SEPA mandate terms by clicking on this check box."}):""},m.prototype.renderIBANLabel=function(){var e=r.default.createElement(l.default,{group:"web",name:"info"}),t=s.intl.formatMessage({id:"yIGH7D",defaultMessage:"An International Bank Account Number (IBAN) is a unique identification code for a bank account. Its made up of a two-letter country code and up to 30 alphanumeric characters. Check your bank statements or ask your bank for your IBAN."}),e=r.default.createElement(d,{tooltip_classname:"iban-label-tooltip-bubble",position:p.RIGHT,tooltip_contents:t},e);return r.default.createElement("span",{className:"grid__item grid--y-middle"},s.intl.formatMessage({id:"6BVmpd",defaultMessage:"IBAN"}),e)},m.prototype.render=function(){var e=this.props.formData,t=s.intl.formatMessage({id:"Pb48Th",defaultMessage:"I hereby authorize Dropbox International Unlimited Company, and its payment service provider, Adyen Client Management, to collect payments from my account via direct debit. At the same time, I instruct my bank to honor the direct debits drawn on my account. Notice: Within eight weeks, beginning with the debit date, I am entitled to claim a refund of the debited amount. In this case the terms and conditions agreed with my bank shall apply."});return r.default.createElement("div",{id:"sepa-direct-debit-form",className:"direct-debit-container"},r.default.createElement("div",{className:"direct-debit-fields"},r.default.createElement(o.BizLabeledTextInput,{name:"owner_name",labelText:s.intl.formatMessage({id:"vj7NTF",defaultMessage:"Account holder name"}),value:e.accountHolderName.rawValue,errorText:this.accountHolderNameErrorString(),errorHTML:e.accountHolderName.serverError,onBlur:this.onAccountHolderNameBlur,onChange:this.onAccountHolderNameChange.bind(this)}),r.default.createElement(o.BizLabeledTextInput,{name:"iban",labelText:this.renderIBANLabel(),value:e.iban.rawValue,errorText:this.ibanErrorString(),errorHTML:e.iban.serverError,onBlur:this.onIBANBlur,onChange:this.onIBANChange.bind(this)})),this.props.locationFields,r.default.createElement(i.LabeledCheckboxInput,{checked:e.mandateSigned.rawValue,className:"billing-mandate-signed",errorHTML:e.mandateSigned.serverError,errorText:this.mandateSignedErrorString(),labelText:t,name:"mandate_signed",onBlur:this.onMandateSignedBlur.bind(this),onChange:this.onMandateSignedChange.bind(this)}))},m);function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.onAccountHolderNameBlur=function(e){t.props.actions.showFormFieldErrors(["accountHolderName"],"AccountHolderNameBlur"),t.props.actions.blurAccountHolderName(e.value)},t.onIBANBlur=function(e){t.props.actions.showFormFieldErrors(["iban"],"IBANBlur"),t.props.actions.blurIBAN(e.value)},t}t.DirectDebitForm=a}),define("modules/clean/react/payments/checkout/components/payment_method_form/apple_pay",["require","exports","tslib","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/buy/components/payments/order_summary/order_summary_utils","modules/clean/deprecated_ajax/ajax_as_promised_jquery","modules/core/notify","modules/core/i18n","modules/core/exception"],function(e,t,u,c,d,a,p,r,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMerchantIdentifier=t.processPaymentResponse=t.fetchPaymentSession=t.applePayAction=void 0,m=u.__importStar(m);var f=r.intl.formatMessage({id:"OVUDyw",defaultMessage:"We weren't able to process your payment. Double check the payment info and try again. If that doesn't work, try another payment method or contact your bank"});function y(t,e){return a.BackgroundRequest({url:"/payments/apple_pay_session",type:"GET",data:{session_url:e}}).then(function(e){e=JSON.parse(e);return e&&e.hasOwnProperty("session")?JSON.parse(e.session):(m.reportStack("Apple Pay Error (No Payment Session from Server Response)",{severity:m.SEVERITY.CRITICAL,tags:["applepay","payments"]}),p.Notify.error(f),t(c.applePayError("Step 1 - Blocked by No Payment Session")),t(c.paymentBannerError(f)),Promise.reject("No payment session from server response"))}).catch(function(e){return m.reportException({err:new Error("Apple Pay Error (No Payment Session from Server Response) "+e),severity:m.SEVERITY.CRITICAL,tags:["applepay","payments"]}),p.Notify.error(f),t(c.applePayError("Step 1 - Blocked by ERROR getting Payment Session")),t(c.paymentBannerError(f)),Promise.reject("error in getting payment session from server")})}function h(e,t){t=t.details,t=btoa(JSON.stringify(t.token.paymentData));e(c.updateApplePayToken(t))}function g(){return"merchant.dropbox.com"}t.applePayAction=function(e){var t=this,s=e.planName,l=e.price;return function(i){return u.__awaiter(t,void 0,void 0,function(){var t,a,r,n,o;return u.__generator(this,function(e){switch(e.label){case 0:if(!window.PaymentRequest)return[3,5];if(r={supportedMethods:"https://apple.com/apple-pay",data:{version:3,merchantIdentifier:g(),merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["amex","discover","masterCard","visa"],countryCode:l.taxCountryCode}},i(c.applePayStartup("Step 0 - Trying to Initialize")),void 0===l.taxAmount||void 0===l.totalPrice||void 0===l.currency)return p.Notify.error(f),m.reportException({err:new Error("Apple Pay Error transition prices are undefined "),severity:m.SEVERITY.OPERATIONAL,tags:["applepay","payments"],exc_extra:{prices:l}}),i(c.paymentBannerError(f)),[2,Promise.resolve(!1)];t=l.taxAmount.amount,n=l.totalPrice.amount,a=l.currency,r=[r],n={total:{label:s,amount:{value:n.toString(),currency:a}},displayItems:[{label:s,amount:{value:(n-t).toString(),currency:a}}]},0<t&&n.displayItems.push({label:d.getTaxNameForCountry(l.taxCountryCode,void 0),amount:{value:t.toString(),currency:a}}),(n=new PaymentRequest(r,n,{})).onmerchantvalidation=function(e){var t=y(i,e.validationURL);e.complete(t)},e.label=1;case 1:return e.trys.push([1,3,,4]),i(c.applePayPopupShown("Step 2 - Payment Session OK - Showing")),[4,n.show()];case 2:return o=e.sent(),h(i,o),i(c.applePayClosedBySuccess("Step 3 - Payment response processed - closing")),o.complete("success"),[2,Promise.resolve(!0)];case 3:return(o=e.sent())&&"AbortError"===o.name?m.reportException({err:new Error("Apple Pay User Aborted Most Likely: "+o),severity:m.SEVERITY.NONCRITICAL,tags:["applepay","payments"]}):(m.reportException({err:new Error("Apple Pay Error (Most Likely NOT User Abort) "+o),severity:m.SEVERITY.CRITICAL,tags:["applepay","payments"]}),p.Notify.error(f),i(c.applePayError("Step 2 - User Failed to Pay or Display")),i(c.paymentBannerError(f))),[2,Promise.resolve(!1)];case 4:return[3,6];case 5:return[2,Promise.resolve(!1)];case 6:return[2]}})})}},t.fetchPaymentSession=y,t.processPaymentResponse=h,t.getMerchantIdentifier=g}),define("modules/clean/react/payments/common/constants",["require","exports","modules/core/i18n"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameErrorMessage=t.CityErrorMessage=t.AddressErrorMessage=t.ZipCodeErrorMessage=t.PricingToggleAnnual=t.PricingToggleMonthly=t.PricingToggleCookie=void 0,t.PricingToggleCookie="pricing-schedule",t.PricingToggleMonthly="monthly",t.PricingToggleAnnual="annual",t.ZipCodeErrorMessage=a.intl.formatMessage({id:"CAxLNf",defaultMessage:"Please enter a valid postal code."}),t.AddressErrorMessage=a.intl.formatMessage({id:"0Mt769",defaultMessage:"Please enter a valid address."}),t.CityErrorMessage=a.intl.formatMessage({id:"RF+x3N",defaultMessage:"Please enter a valid city/town."}),t.NameErrorMessage=a.intl.formatMessage({id:"OSqOkI",defaultMessage:"Please enter the card holder name."})}),define("modules/clean/react/payments/common/form_value_factory",["require","exports","tslib","modules/clean/react/payments/common/form_values","modules/clean/payments/validation","modules/clean/datetime/datetime"],function(e,t,a,p,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValueFactory=void 0,p=a.__importStar(p);n.createInput=function(e,t){var a=e&&!!e.trim();return{rawValue:e,formattedValue:e,errorState:a?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(!a||!t)&&t.showError,serverError:""}},n.createCheckbox=function(e,t,a){a=a||e?p.InputErrorState.Valid:p.InputErrorState.Invalid;return{rawValue:e,formattedValue:e,errorState:a,showError:!(a===p.InputErrorState.Valid||!t)&&t.showError,serverError:""}},n.createProductPlanType=function(e,t,a){var r=!1;return{rawValue:e,formattedValue:e,errorState:(r=e&&t?0===t.plans.length||0<t.withProductPlanType(e).plans.length:r)?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!1,serverError:""}},n.createSchedule=function(e){return{rawValue:e,formattedValue:e,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createTrialEndDate=function(e,t){var a="";return t&&e&&(t=t.replace("_","-"),a=r.daysAfterToday(e).toLocaleDateString(t,{weekday:"long",year:"numeric",month:"long",day:"numeric"})),{rawValue:a,formattedValue:a,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createNumberOfUsers=function(e,t,a,r,n){var o,i,s,l=t.minNumUsers,u=t.maxNumUsers,c=e,t=parseInt(c,10),e=!isNaN(t),t=e?(o=t<r,i=t<l,s=u<t,d=0!==n&&t<n+1,Math.min(Math.max(t,r),u)):(d=s=i=o=!1,l),d=e&&!i&&!d&&!s;return{rawValue:c,formattedValue:t,errorState:d?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(d||!a)&&a.showError,isUnderLicenseLimit:o,isUnderLimit:i,isOverLimit:s,minLicenseLimit:r,minNumUsers:l,maxNumUsers:u,serverError:""}},n.createEmail=function(e,t){var a,r,n,o=e.trim(),i=p.EmailErrorState.Valid;return o?2!==(n=o.split("@")).length?i=p.EmailErrorState.NoAt:(a=n[0],r=n[1],n=new RegExp("^([a-z0-9][a-z0-9\\-]*\\.)+([a-z]+|xn--[a-z0-9\\-]+)$","i"),/^[\w!#$%&'*+\-\/=?^`{|}~.]+$/.test(a)?r&&(!/^[\x00-\x7f]*$/.test(r)||n.test(r))||(i=p.EmailErrorState.BadDomain):i=p.EmailErrorState.BadUsername):i=p.EmailErrorState.Empty,{rawValue:e,formattedValue:o,errorState:i,showError:i!==p.EmailErrorState.Valid&&!!t&&t.showError,serverError:"",isCapturable:!1}},n.createTeamPhone=function(e,t){var a=p.TeamPhoneErrorState.Valid;return{rawValue:e,formattedValue:e,errorState:a=!e?p.TeamPhoneErrorState.Empty:a,showError:!(a===p.TeamPhoneErrorState.Valid||!t)&&t.showError,serverError:""}},n.createPassword=function(e,t){var a=p.PasswordErrorState.Valid;return e&&e.length<6?a=p.PasswordErrorState.TooShort:e||(a=p.PasswordErrorState.Empty),{rawValue:e,formattedValue:e,errorState:a,showError:!(a===p.PasswordErrorState.Valid||!t)&&t.showError,serverError:""}},n.createPaymentMethod=function(e,t,a,r){return{rawValue:e=a.available_payment_methods_for_country(t).indexOf(e)<0?a.default_payment_method_for_country(t):e,formattedValue:e,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createCountryCode=function(e,t){var a=e?p.InputErrorState.Valid:p.InputErrorState.Invalid;return{rawValue:e,formattedValue:e,errorState:a,showError:!(a===p.InputErrorState.Valid||!t)&&t.showError,serverError:""}},n.createAddress=function(e,t){var a=e&&!!e.trim()&&1<=e.trim().length;return{rawValue:e,formattedValue:e,errorState:a?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(a||!t)&&t.showError,serverError:""}},n.createPhone=function(e,t){var a=e&&!!e.trim()&&1<=e.trim().length;return{rawValue:e,formattedValue:e,errorState:a?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(a||!t)&&t.showError,serverError:""}},n.createCity=function(e,t){var a=e&&!!e.trim()&&1<=e.trim().length;return{rawValue:e,formattedValue:e,errorState:a?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(a||!t)&&t.showError,serverError:""}},n.createName=function(e,t){var a=e&&1<=e.trim().length;return{rawValue:e,formattedValue:e,errorState:a?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(a||!t)&&t.showError,serverError:""}},n.createZipCode=function(e,t,a,r){var n=!0,o=/\s+$/gi;a.allow_zip_code_for_country(t)?"US"===t?/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e.replace(o,""))||(n=!1):(!e||15<e.length||""===e.trim())&&(n=!1):e="";t=n?p.InputErrorState.Valid:p.InputErrorState.Invalid,r=!(n||!r)&&r.showError,o=n?e.replace(o,"").replace(".",""):"";return{rawValue:e,formattedValue:o,errorState:t,showError:r,serverError:""}},n.createVat=function(e,t,a){var r=p.InputErrorState,n=r.Valid,o=r.Invalid,r=e.replace(/\s+/gi,""),o=i.validateVat(t,r)?n:o;return{rawValue:e,formattedValue:r,errorState:o,showError:!(o===n||!a)&&a.showError,serverError:""}},n.createCpf=function(e,t,a){var r=p.InputErrorState,n=r.Valid,o=r.Invalid,r=e.replace(/[^\d]+/g,"");return{rawValue:e,formattedValue:r,errorState:o=""===e&&a||i.validateCpf(r)?n:o,showError:!(o===n||!t)&&t.showError,serverError:""}},n.createCpfName=function(e,t,a){a=e&&!!e.trim()||""===e&&a;return{rawValue:e,formattedValue:e,errorState:a?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(!a||!t)&&t.showError,serverError:"",manuallyEdited:!0}},n.createCpfNamePrefill=function(e,t,a,r,n){var o="",n=(o=a||(e&&t?e+" "+t:e||t))&&!!o.trim()||""===o&&n;return{rawValue:o,formattedValue:o,errorState:n?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!(!n||!r)&&r.showError,serverError:"",manuallyEdited:!1}},n.createNonce=function(e,t,a,r){var n=p.InputErrorState,o=n.Valid,i=n.Invalid,s=!!a&&a.isCCNValid,l=!!a&&a.isCCodeValid,n=!!a&&a.isCCExpValid;t&&(s=t.ccn?!t.ccn.error:s,l=t.ccode?!t.ccode.error:l,n=t?t.ccexp?!t.ccexp.error:t.ccexpyr&&t.ccexpmo?!t.ccexpyr.error&&!t.ccexpmo.error:n:n);e=e||(a?a.rawValue:""),i=s&&l&&n?o:i;return{rawValue:e,formattedValue:e,errorState:i,showError:!(i===o||!a)&&a.showError&&!r,serverError:"",isCCNValid:s,isCCodeValid:l,isCCExpValid:n}},n.createPayPalNonce=function(e,t,a){var r=""!==e?p.InputErrorState.Valid:p.InputErrorState.Invalid;return{rawValue:e,email:t,formattedValue:e,errorState:r,showError:!(r===p.InputErrorState.Valid||!a)&&a.showError,serverError:""}},n.createAdyenEncryptedCard=function(e,t){t=e||(t?t.rawValue:"");return{rawValue:t,formattedValue:t,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createEncryptedCardForNetworkToken=function(e,t,a){t=t||(a?a.encryptedCard:""),a=e||(a?a.cardType:"");return{rawValue:{cardType:a,encryptedCard:t},formattedValue:JSON.stringify({cardType:a,encryptedCard:t}),cardType:a,encryptedCard:t,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createBIN=function(e,t){t=e||(t?t.rawValue:"");return{rawValue:t,formattedValue:t,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createBrowserInfo=function(e,t){t=e||(t?t.rawValue:"");return{rawValue:t,formattedValue:t,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createThreeDsData=function(e){return{rawValue:e,formattedValue:e,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createApplePayToken=function(e,t){t=e||(t?t.value:"");return{value:t,rawValue:t,formattedValue:t,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createIBAN=function(e,t){var a=p.InputErrorState,r=a.Valid,n=a.Invalid,a=e.replace(/\s+/gi,""),n=i.validIBANForCountry(a)?r:n;return{rawValue:e,formattedValue:a,errorState:n,showError:!(n===r||!t)&&t.showError,serverError:""}},n.createIdealBankId=function(e,t){var a=e?p.InputErrorState.Valid:p.InputErrorState.Invalid;return{rawValue:e,formattedValue:e,errorState:a,showError:!(a===p.InputErrorState.Valid||!t)&&t.showError,serverError:""}},n.createIdealBankName=function(e,t){return{rawValue:e,formattedValue:e,errorState:e?p.InputErrorState.Valid:p.InputErrorState.Invalid,showError:!1,serverError:""}},n.createEmailsToInvite=function(e,t){return{rawValue:e=e||[],formattedValue:JSON.stringify(e),errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},n.createSelectedAddons=function(e,t){return{rawValue:e,formattedValue:e,errorState:p.InputErrorState.Valid,showError:!1,serverError:""}},a=n;function n(){}t.FormValueFactory=a}),define("modules/clean/react/payments/common/form_value_helpers",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValueHelper=void 0,(t=t.FormValueHelper||(t.FormValueHelper={})).isValid=function(e){return 0===e.errorState},t.hasServerError=function(e){return!!e.serverError}}),define("modules/clean/react/payments/common/form_values",["require","exports"],function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.TeamPhoneErrorState=t.PasswordErrorState=t.EmailErrorState=t.InputErrorState=void 0,(a=t.InputErrorState||(t.InputErrorState={}))[a.Valid=0]="Valid",a[a.Invalid=1]="Invalid",(a=t.EmailErrorState||(t.EmailErrorState={}))[a.Valid=0]="Valid",a[a.Empty=1]="Empty",a[a.NoAt=2]="NoAt",a[a.BadUsername=3]="BadUsername",a[a.BadDomain=4]="BadDomain",a[a.TakenError=5]="TakenError",a[a.TakenWarning=6]="TakenWarning",(a=t.PasswordErrorState||(t.PasswordErrorState={}))[a.Valid=0]="Valid",a[a.Empty=1]="Empty",a[a.TooShort=2]="TooShort",(t=t.TeamPhoneErrorState||(t.TeamPhoneErrorState={}))[t.Valid=0]="Valid",t[t.Empty=1]="Empty"}),define("modules/clean/react/payments/common/form/actions/actions",["require","exports","tslib","modules/clean/react/payments/common/constants","modules/clean/react/payments/common/pricing/actions/actions","lodash","modules/clean/react/payments/common/form_value_helpers","modules/clean/auth/common/captcha","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/clean/react/payments/business/state/business_state","modules/core/cookies","modules/clean/payments/payments_web_request"],function(e,t,a,r,n,h,o,g,p,i,_,s,P){"use strict";var l,b;function m(o,e,t,a,n,r,i,s,l){for(var u={},c=0,d=a;c<d.length;c++){var p=d[c],m=t[p];u[_.fieldsToServerProps[p]]=m.formattedValue}h.assignIn(u,n);function f(e){for(var t=0,a=e;t<a.length;t++){var r,n=a[t];3<=n.length&&(r=n[0],n=n[2],"notifyError"===r&&"emailTaken"===n&&o(k()))}}!i||(a=g.get_captcha_responses(i))["g-recaptcha-response"]&&(u["g-recaptcha-response"]=a["g-recaptcha-response"],l=b.RecaptchaV2,o(T())),o(S(l,n));var y=new P.PaymentsWebRequest({url:e,data:u,success:function(e,t,a){var r;o(v(e,n)),null!==(r=null==e?void 0:e.actions)&&void 0!==r&&r.length&&f(e.actions)},error:function(e,t,a){var r=null;try{r=JSON.parse(a)}catch(e){}finally{o(C(r||a)),s&&r&&s(r),r&&r.error_type&&r.msg&&"Payment"===r.error_type&&o(w(r.msg)),!i||g.handle_captcha_errors(i,r)&&o(E())}}});(r?y:new P.PaymentsWebRequest({url:"/checkout/create_user",type:"POST",data:{fname:u.fname,lname:u.lname,email:u.email,is_trial:"trial"===u.signup_type,password:u.password,plan_id:u.plan_id,marketing_opt_in:u.marketing_opt_in,tos_agree:u.tos_agree,schedule_id:u.schedule_id,signup_url:u.signup_url,signup_tag:u.signup_tag,signup_referrer:u.signup_referrer,tracking_params:u.tracking_params},success:function(e){var t;if(null!==(t=null==e?void 0:e.actions)&&void 0!==t&&t.length)return f(e.actions),void o(C(e));y.request()},error:function(e,t,a){o(C(a))}})).request(),i&&g.clear_captcha_response(i),l!==b.ThreeDsChallenge&&l!==b.ThreeDsFingerprint||o(I(""))}function S(e,t){return void 0===e&&(e=b.ButtonClick),{type:l.SubmitFormStart,trigger:e,additionalData:t}}function v(e,t){return{type:l.SubmitFormSuccess,data:e,additionalData:t}}function C(e){return{type:l.SubmitFormError,data:e}}function E(){return{type:l.TriggerCaptcha}}function T(){return{type:l.SubmitCaptcha}}function f(e,t){return{type:l.ShowFormFieldErrors,fieldNames:e,origin:t}}function k(){return{type:l.EmailTakenError}}function u(t,a){return function(e){e(n.prepareToUpdatePrice()),e(c(t)),e(n.updatePrice(a))}}function c(e){return{type:l.UpdateNumberOfUsers,value:e}}function d(e){return{type:l.UpdateCountryCode,value:e}}function y(e){return{type:l.UpdateZipCode,value:e}}function N(e){return{type:l.UpdateVat,value:e}}function w(e){return{type:l.PaymentBannerError,msg:e}}function F(e){return{type:l.ApplePayClosedByFailure,msg:e}}function I(e){return{type:l.UpdateThreeDsData,value:e}}function M(e,t){for(var a=0,r=t;a<r.length;a++){var n=e[r[a]];if(!o.FormValueHelper.isValid(n))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidSubmitState=t.updateEmailsToInvite=t.updateIdealBank=t.updateTermsAndService=t.updateMarketingOptIn=t.updateMandateSigned=t.blurIBAN=t.updateIBAN=t.blurAccountHolderName=t.updateAccountHolderName=t.updateBIN=t.triggerThreeDsFingerprint=t.triggerThreeDsChallenge=t.updateThreeDsData=t.updateBrowserInfo=t.updateApplePayToken=t.updateEncryptedCardForNetworkToken=t.updateAdyenEncryptedCard=t.blurCCField=t.updatePayPalNonce=t.updateNonce=t.updateCpfName=t.applePayClosedByFailure=t.applePayClosedBySuccess=t.applePayError=t.applePayPopupShown=t.applePayStartup=t.paymentBannerError=t.blurCpf=t.updateCpf=t.blurVat=t.updateVat=t.updateVatAndPrice=t.blurZipCode=t.updateZipCode=t.updateZipCodeAndPrice=t.updateCountryCode=t.updateCountryCodeAndPrice=t.updatePaymentMethod=t.updateCompanySize=t.updateTeamPhone=t.updateTeamName=t.updatePassword=t.updateEmail=t.clickGoogleSignup=t.blurEmail=t.updateLastName=t.updateFirstName=t._updateNumberOfUsers=t.updateNumberOfUsers=t.updateProductPlanType=t.updateSchedule=t.showEmailTakenWarning=t.showEmailTakenError=t.showFormFieldErrors=t.submitCaptcha=t.triggerCaptcha=t.submitFormError=t.submitFormSuccess=t.submitFormStart=t.submitFormData=t.submitForm=t.SubmitFormTriggerType=t.FormActionEnum=void 0,r=a.__importStar(r),n=a.__importStar(n),h=a.__importStar(h),(a=l=t.FormActionEnum||(t.FormActionEnum={})).BlurEmail="BlurEmail",a.ClickGoogleSignup="ClickGoogleSignup",a.SubmitFormStart="SubmitFormStart",a.SubmitFormSuccess="SubmitFormSuccess",a.SubmitFormError="SubmitFormError",a.ShowFormFieldErrors="ShowFormFieldErrors",a.SubmitCaptcha="SubmitCaptcha",a.TriggerCaptcha="TriggerCaptcha",a.UpdateTransitions="UpdateTransitions",a.UpdateSchedule="UpdateSchedule",a.UpdateProductPlanType="UpdateProductPlanType",a.UpdateNumberOfUsers="UpdateNumberOfUsers",a.UpdateFirstName="UpdateFirstName",a.UpdateLastName="UpdateLastName",a.UpdateEmail="UpdateEmail",a.UpdatePassword="UpdatePassword",a.UpdateTeamName="UpdateTeamName",a.UpdateTeamPhone="UpdateTeamPhone",a.UpdateCompanySize="UpdateCompanySize",a.UpdatePaymentMethod="UpdatePaymentMethod",a.UpdateCountryCode="UpdateCountryCode",a.UpdateZipCode="UpdateZipCode",a.BlurZipCode="BlurZipCode",a.UpdateVat="UpdateVat",a.BlurVat="BlurVat",a.UpdateCpf="UpdateCpf",a.BlurCpf="BlurCpf",a.UpdateCpfName="UpdateCpfName",a.UpdateNonce="UpdateNonce",a.UpdatePayPalNonce="UpdatePayPalNonce",a.BlurCCField="BlurCCField",a.UpdateAdyenEncryptedCard="UpdateAdyenEncryptedCard",a.UpdateEncryptedCardForNetworkToken="UpdateEncryptedCardForNetworkToken",a.UpdateBrowserInfo="UpdateBrowserInfo",a.UpdateThreeDsData="UpdateThreeDsData",a.TriggerThreeDsChallenge="TriggerThreeDsChallenge",a.TriggerThreeDsFingerprint="TriggerThreeDsFingerprint",a.UpdateBIN="UpdateBIN",a.UpdateAccountHolderName="UpdateAccountHolderName",a.BlurAccountHolderName="BlurAccountHolderName",a.UpdateIBAN="UpdateIBAN",a.BlurIBAN="BlurIBAN",a.UpdateMandateSigned="UpdateMandateSigned",a.UpdateIdealBank="UpdateIdealBank",a.UpdateMarketingOptIn="UpdateMarketingOptIn",a.UpdateTermsAndService="UpdateTermsAndService",a.UpdateEmailsToInvite="UpdateEmailsToInvite",a.EmailTakenError="EmailTakenError",a.EmailTakenWarning="EmailTakenWarning",a.PaymentBannerError="PaymentBannerError",a.UpdateApplePayToken="UpdateApplePayToken",a.ApplePayStartup="ApplePayStartup",a.ApplePayPopupShown="ApplePayPopupShown",a.ApplePayClosedByFailure="ApplePayPopupCloseByFailure",a.ApplePayError="ApplePayError",a.ApplePayClosedBySuccess="ApplePayClosedBySuccess",a.UpdateSelectedAddons="UpdateSelectedAddons",(a=b=t.SubmitFormTriggerType||(t.SubmitFormTriggerType={})).ButtonClick="button_click",a.RecaptchaV2="recaptcha_v2",a.ThreeDsChallenge="three_ds_challenge",a.ThreeDsFingerprint="three_ds_fingerprint",t.submitForm=function(i,s,e,l,u,c,d){return(l=void 0===l?{}:l).time_on_page_ms=window.performance.now(),function(r,n){var o=n();M(o.formData,s)?e().then(function(e){var t,a=null===(a=null!==(t=o.pageState.existingAccountShowing)&&void 0!==t?t:null===(a=o.pageState.userInfo)||void 0===a?void 0:a.existingAccount)||void 0===a||a;e?m(r,i,n().formData,s,l,a,u,c,d):n().formData.paymentMethod.formattedValue===p.PaymentMethod.ApplePay&&r(F("Step 2 - User Closed Most Likely"))}):r(f(s,"SubmitForm"))}},t.submitFormData=m,t.submitFormStart=S,t.submitFormSuccess=v,t.submitFormError=C,t.triggerCaptcha=E,t.submitCaptcha=T,t.showFormFieldErrors=f,t.showEmailTakenError=k,t.showEmailTakenWarning=function(){return{type:l.EmailTakenWarning}},t.updateSchedule=function(e){return s.Cookies.create(r.PricingToggleCookie,e===i.ScheduleId.MONTHLY?r.PricingToggleMonthly:r.PricingToggleAnnual,30),{type:l.UpdateSchedule,value:e}},t.updateProductPlanType=function(e){var a={type:l.UpdateProductPlanType,value:e};return function(e,t){t=t();e(a),e(c(t.formData.numberOfUsers.rawValue))}},t.updateNumberOfUsers=u,t._updateNumberOfUsers=c,t.updateFirstName=function(e){return{type:l.UpdateFirstName,value:e}},t.updateLastName=function(e){return{type:l.UpdateLastName,value:e}},t.blurEmail=function(e){return{type:l.BlurEmail,value:e}},t.clickGoogleSignup=function(){return{type:l.ClickGoogleSignup}},t.updateEmail=function(e){return{type:l.UpdateEmail,value:e}},t.updatePassword=function(e){return{type:l.UpdatePassword,value:e}},t.updateTeamName=function(e){return{type:l.UpdateTeamName,value:e}},t.updateTeamPhone=function(e){return{type:l.UpdateTeamPhone,value:e}},t.updateCompanySize=function(e){return{type:l.UpdateCompanySize,value:e}},t.updatePaymentMethod=function(e){return{type:l.UpdatePaymentMethod,value:e}},t.updateCountryCodeAndPrice=function(t){return function(e){e(n.prepareToUpdatePrice()),e(d(t)),e(n.updatePrice())}},t.updateCountryCode=d,t.updateZipCodeAndPrice=function(t,a){return function(e){e(n.prepareToUpdatePrice()),e(y(t)),e(n.updatePrice(a))}},t.updateZipCode=y,t.blurZipCode=function(e){return{type:l.BlurZipCode,value:e}},t.updateVatAndPrice=function(t,a){return function(e){e(n.prepareToUpdatePrice()),e(N(t)),e(n.updatePrice(a))}},t.updateVat=N,t.blurVat=function(e){return{type:l.BlurVat,value:e}},t.updateCpf=function(e){return{type:l.UpdateCpf,value:e}},t.blurCpf=function(e){return{type:l.BlurCpf,value:e}},t.paymentBannerError=w,t.applePayStartup=function(e){return{type:l.ApplePayStartup,msg:e}},t.applePayPopupShown=function(e){return{type:l.ApplePayPopupShown,msg:e}},t.applePayError=function(e){return{type:l.ApplePayError,msg:e}},t.applePayClosedBySuccess=function(e){return{type:l.ApplePayClosedBySuccess,msg:e}},t.applePayClosedByFailure=F,t.updateCpfName=function(e){return{type:l.UpdateCpfName,value:e}},t.updateNonce=function(e,t){return{type:l.UpdateNonce,value:e,creditCardIframeFields:t}},t.updatePayPalNonce=function(e,t){return{type:l.UpdatePayPalNonce,value:e,email:t}},t.blurCCField=function(e){return{type:l.BlurCCField,creditCardIframeFields:e}},t.updateAdyenEncryptedCard=function(e){return{type:l.UpdateAdyenEncryptedCard,value:e}},t.updateEncryptedCardForNetworkToken=function(e,t){return{type:l.UpdateEncryptedCardForNetworkToken,cardType:e,encryptedCard:t}},t.updateApplePayToken=function(e){return{type:l.UpdateApplePayToken,value:e}},t.updateBrowserInfo=function(e){return{type:l.UpdateBrowserInfo,value:e}},t.updateThreeDsData=I,t.triggerThreeDsChallenge=function(){return{type:l.TriggerThreeDsChallenge}},t.triggerThreeDsFingerprint=function(){return{type:l.TriggerThreeDsFingerprint}},t.updateBIN=function(e){return{type:l.UpdateBIN,value:e}},t.updateAccountHolderName=function(e){return{type:l.UpdateAccountHolderName,value:e}},t.blurAccountHolderName=function(e){return{type:l.BlurAccountHolderName,value:e}},t.updateIBAN=function(e){return{type:l.UpdateIBAN,value:e}},t.blurIBAN=function(e){return{type:l.BlurIBAN,value:e}},t.updateMandateSigned=function(e){return{type:l.UpdateMandateSigned,value:e}},t.updateMarketingOptIn=function(e){return{type:l.UpdateMarketingOptIn,value:e}},t.updateTermsAndService=function(e){return{type:l.UpdateTermsAndService,value:e}},t.updateIdealBank=function(e){return{type:l.UpdateIdealBank,value:e}},t.updateEmailsToInvite=function(t,a){return function(e){e({type:l.UpdateEmailsToInvite,value:t}),e(u(Math.max(t.length+1,a)+""))}},t.isValidSubmitState=M}),define("modules/clean/react/payments/common/pricing/actions/actions",["require","exports","tslib","lodash","modules/core/i18n","modules/clean/payments/skus/subscription_diff","modules/clean/payments/skus/subscription_service","modules/clean/payments/dfb_util","modules/core/notify"],function(e,t,a,r,o,i,n,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateRenewTransitionsError=t.updateRenewTransitionsSuccess=t.updateRenewTransitionsStart=t.updateTransitionsError=t.updateTransitionsSuccess=t.updateTransitionsStart=t.updatePrice=t.prepareToUpdatePrice=void 0;var u=(r=a.__importStar(r)).debounce(function(e,t){e({type:"UpdateRecentLoadEventStatus",recentLoadEventStatus:t})},400),c=new n.SubscriptionService,d=r.debounce(function(t,e,a,r,n,o){n={discountPercentage:100*n,discountAllowMonthly:o,selectedAddonIds:[]},e=e.currentPlanSku?((o=new i.SubscriptionDiff).setPlan(e.currentPlanSku),o.setTotalLicenses(a),[o]):e.subChangePlans.plans.map(function(e){e=i.SubscriptionDiff.fromSubscriptionStatus(e);return e.setTotalLicenses(a),e});c.priceSet(e,r,n).then(function(e){m(t,e)}).catch(function(e){t(f(e))})},400),p=r.debounce(function(t,e,a,r,n){e=e().pageState.transition,e=new s.DfBTransitionInfoFetcher([e]),n={total_users:r,country_code:n.countryCode,zip_code:n.zipCode,vat_id:n.vat,renew:!0};e.get(function(e){e=e[0].transition_view_model;t(y(e))},n,function(e){l.Notify.error(o.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),t(h(e))})},400);function m(e,t){e({type:"UpdateTransitionsSuccess",subChangePlans:t}),u(e,!1)}function f(e){return{type:"UpdateTransitionsError",error:e}}function y(e){return{type:"UpdateRenewTransitionsSuccess",transition:e}}function h(e){return{type:"UpdateRenewTransitionsError",error:e}}t.prepareToUpdatePrice=function(){return{type:"PrepareToUpdateTransitions"}},t.updatePrice=function(l){return void 0===l&&(l=!1),function(e,t){var a,r=t(),n=r.formData,o=r.pricingState,i=o.discountInfo,s=n.numberOfUsers.formattedValue,r=!0;i&&(a=i.discountRatio,r=i.allowMonthly);n={countryCode:n.countryCode.formattedValue,zipCode:n.zipCode.formattedValue,vat:n.vat.errorState?"":n.vat.formattedValue};l?(e({type:"UpdateRenewTransitionsStart"}),p(e,t,o,s,n)):(e({type:"UpdateTransitionsStart"}),d(e,o,s,n,a,r))}},t.updateTransitionsStart=function(){return{type:"UpdateTransitionsStart"}},t.updateTransitionsSuccess=m,t.updateTransitionsError=f,t.updateRenewTransitionsStart=function(){return{type:"UpdateRenewTransitionsStart"}},t.updateRenewTransitionsSuccess=y,t.updateRenewTransitionsError=h}),define("modules/clean/payments/dfb_util",["require","exports","tslib","lodash","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/payments/validation","modules/clean/payments/cash","modules/core/exception"],function(e,t,a,h,s,r,n,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DfBTransitionInfoFetcher=t.DfBTransitionInfo=t.DfbTransitionSpaceParams=void 0,h=a.__importStar(h),s=a.__importStar(s),r=a.__importStar(r);var l=(_.prototype.set_only_license_count=function(e){var t=Object.keys(this.license_ids_and_counts)[0];this.license_ids_and_counts[t]=e},_.prototype.get_only_license_count=function(){var e=Object.keys(this.license_ids_and_counts)[0];return this.license_ids_and_counts[e]},_.prototype.set_country_code=function(e){this.country_code=e},_.prototype.set_zip_code=function(e){this.zip_code=e},_.prototype.set_currencies=function(e){this.currencies=e},_.prototype.set_renew=function(e){this.renew=e},_.prototype.set_discount_ratio=function(e){this.discount_ratio=e},_.prototype.set_discount_allow_monthly=function(e){this.discount_allow_monthly=e},_.prototype.set_vat_id=function(e){""!==e&&r.validateVat(this.country_code||"",e)?this.vat_id=e:this.vat_id=""},_.prototype.cache_key=function(e){var t;return void 0===e&&(e=!1),this.currencies&&!e&&(t=this.currencies.join(",")),[this.plan_ids.join(","),this.schedule_ids.join(","),this.get_only_license_count(),t,this.country_code,this.zip_code,this.vat_id,this.renew,this.discount_ratio].join(":")},_.prototype.to_json=function(){var e=this.renew?{renew:1}:{};return a.__assign(a.__assign({},e),{plan_ids:JSON.stringify(this.plan_ids),schedule_ids:JSON.stringify(this.schedule_ids),license_ids_and_counts:JSON.stringify(this.license_ids_and_counts),currencies:this.currencies?JSON.stringify(this.currencies):"",country_code:this.country_code,zip_code:this.zip_code,vat_id:this.vat_id,discount_percentage:JSON.stringify(100*this.discount_ratio),discount_allow_monthly:this.discount_allow_monthly})},_.from_transition_view_models=function(e){for(var t=[],a=[],r=[],n=null,o=null,i=null,s=0,l=e;s<l.length;s++){var u=l[s],c=void 0;if(t.push(u.state.plan.id),a.push(u.state.schedule.id),r.push(u.state.currency),void 0===d){for(var d={},p=0,m=u.state.allocated_licenses;p<m.length;p++)d[(c=m[p]).license_id]=c.license_count;h.isObject(u.read_only_invoice)&&(n=u.read_only_invoice.tax_country_code||null,o=u.read_only_invoice.tax_exclusion_id||null,i=u.read_only_invoice.tax_zip_code||null)}else{g.assert(u.state.allocated_licenses.length===Object.keys(d).length,"License sets differ");for(var f=0,y=u.state.allocated_licenses;f<y.length;f++)c=y[f],g.assert(d.hasOwnProperty(""+c.license_id),"License sets differ"),g.assert(d[c.license_id]===c.license_count,"License count must match");g.assert(n===(u.read_only_invoice&&u.read_only_invoice.tax_country_code||null),"country code must match"),g.assert(i===(u.read_only_invoice&&u.read_only_invoice.tax_zip_code||null),"zip code must match"),g.assert(o===(u.read_only_invoice&&u.read_only_invoice.tax_exclusion_id||null),"VAT ID must match")}}return new _(h.uniq(t),h.uniq(a),d||{},h.uniq(r),n,i,o)},_);function _(e,t,a,r,n,o,i){this.plan_ids=e,this.schedule_ids=t,this.license_ids_and_counts=a,this.currencies=r,this.country_code=n,this.zip_code=o,this.vat_id=i,this.renew=!1,this.discount_ratio=0,this.discount_allow_monthly=!1}t.DfbTransitionSpaceParams=l;function o(e){this.transition_view_model=e,this.transition_view_model.read_only_invoice?this.current_total=n.Cash.fromObject(this.transition_view_model.read_only_invoice.total):this.current_total=new n.Cash(0,this.transition_view_model.state.currency),this.price_token=this.transition_view_model.expected_price,this.transition_view_model.state.per_license_prices.length?this.per_license_price=n.Cash.fromObject(this.transition_view_model.state.per_license_prices[0].price):this.per_license_price=new n.Cash(0,this.transition_view_model.state.currency),this.recurring_total=n.Cash.fromObject(this.transition_view_model.state.total_recurring_price),this.transition_view_model.prices?this.tax=n.Cash.fromObject(this.transition_view_model.prices.tax):this.tax=new n.Cash(0,this.recurring_total.currency),this.transition_view_model.total_recurring_taxes?this.recurring_tax=n.Cash.fromObject(this.transition_view_model.total_recurring_taxes):this.recurring_tax=new n.Cash(0,this.recurring_total.currency),this.recurring_total_tax=this.recurring_total.add(this.recurring_tax),this.tax_percentage=0,this.transition_view_model.read_only_invoice&&((e=0<(e=this.transition_view_model.read_only_invoice.line_items).length?e[0]:void 0)&&!h.isEmpty(e.country_tax_percentage)?this.tax_percentage=parseFloat(e.country_tax_percentage):e&&!h.isEmpty(e.state_tax_percentage)&&(this.tax_percentage=parseFloat(e.state_tax_percentage)))}t.DfBTransitionInfo=o;var i=(u.prototype.get=function(t,a,r){var n=this,e=l.from_transition_view_models(this.default_transition_view_models);a.total_users&&e.set_only_license_count(a.total_users),a.country_code&&e.set_country_code(a.country_code),a.currency&&e.set_currencies([a.currency]),!0===a.remove_currency&&e.set_currencies([]),a.zip_code&&e.set_zip_code(a.zip_code),h.isBoolean(a.renew)&&e.set_renew(a.renew),!a.vat_id&&""!==a.vat_id||e.set_vat_id(a.vat_id),a.discount_ratio&&e.set_discount_ratio(a.discount_ratio),h.isBoolean(a.discount_allow_monthly)&&e.set_discount_allow_monthly(a.discount_allow_monthly);var o=e.cache_key(),i=this.get_transition_info_for(o);if(i)t(i);else if(!this.transition_view_model_requests[o])return this.transition_view_model_requests[o]=!0,s.SilentBackgroundRequest({url:"/business/transition-model",type:"GET",dataType:"json",data:e.to_json(),success:function(e){delete n.transition_view_model_requests[o];e=n.add_to_cache(e,a.remove_currency);t(e)},error:function(e){h.isFunction(r)&&r(e),delete n.transition_view_model_requests[o]}})},u);function u(e){var a=this;this.has_inflight_request=function(){return 0<Object.keys(a.transition_view_model_requests).length},this.add_to_cache=function(e,t){void 0===t&&(t=!1);t=l.from_transition_view_models(e).cache_key(t),e=e.map(function(e){return new o(e)});return a.transition_info_cache[t]=e},this.get_transition_info_for=function(e){return a.transition_info_cache.hasOwnProperty(e)?a.transition_info_cache[e]:null},this.default_transition_view_models=e,this.transition_view_model_requests={},this.transition_info_cache={},this.add_to_cache(this.default_transition_view_models)}t.DfBTransitionInfoFetcher=i});
