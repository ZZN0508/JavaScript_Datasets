System.register(["./common-chunks.system.1976d2aa.js"],function(e,s){"use strict";var m,p,g,h,y,t,f,b,v,k,M,a,C,L,B,I,o,r,n,d,i,u;return{setters:[function(e){m=e.g,p=e.D,g=e.d,h=e.r,y=e.j,t=e.af,f=e.k,b=e.f,v=e.ag,k=e.ah,M=e.u,a=e.ai,C=e.aj,L=e.W,B=e.t,I=e.e,o=e.x,r=e.ad,n=e.C,d=e.a,i=e.ak,u=e.al}],execute:function(){function c(e){var n={},o=!1;return n.dom=m(e,"dom",p.create()),n.beacon=m(e,"beacon",y("Header")),n.sparkMenuProxy=m(e,"sparkMenuProxy"),n.onCloseSparkMenu=m(e,"onCloseSparkMenu"),n.trigger=n.dom.getById("vh-location-button"),n.triggerZipCode=n.dom.querySelector("#vh-location-button .zipCode"),n.isMobile=m(e,"isMobile",!1),n.locationLinks=n.dom.querySelector("#location-links"),n.menu=n.isMobile?n.dom.getById("vh-mobile-location-menu-root"):n.dom.getById("vh-location-form"),n.localStoreButton=n.dom.getById("vh-store-button"),n.setMenuPosition=function(){var e;n.storeFlyoutWrapper=n.dom.querySelector("[data-tl-id=header-location-links]"),n.activeCategoryButton=n.dom.getById("vh-store-button"),n.activeCategoryButton&&n.storeFlyoutWrapper&&(e=n.activeCategoryButton.getBoundingClientRect().top,n.storeFlyoutWrapper.style.top=e/1.5+"px")},n.flipLocationUpdateForDesktop=function(){n.locationUpdateForm=n.dom.getById("vh-location-form"),n.locationUpdateForm&&n.locationUpdateForm.classList.contains("hidden")?(n.locationUpdateForm.classList.remove("hidden"),g(n.trigger,{"aria-expanded":!0})):(n.locationUpdateForm.classList.add("hidden"),g(n.trigger,{"aria-expanded":!1})),n.beacon.tagAction(t({name:"Store Links"}))},n.setup=function(){n.form.setup(),n.bindClickListeners(),n.menu&&n.trigger&&n.isMobile?(n.trigger.addEventListener("click",n.show.bind(this,{menu:n.menu,name:"Location Panel",trigger:n.trigger})),n.localStoreButton.addEventListener("click",n.show.bind(this,{menu:n.dom.getById("vh-mobile-store-menu-root"),name:"Store Panel",trigger:n.localStoreButton}))):(n.trigger.removeEventListener("click",n.show),n.trigger.addEventListener("click",n.flipLocationUpdateForDesktop)),n.triggerZipCode&&n.form.postalCode&&!n.form.promptForZip&&(n.triggerZipCode.innerHTML=n.form.postalCode)},n.attachEvent=function(){function e(e){e.relatedTarget&&"vh-spark-main-menu"!==e.relatedTarget.id&&"location-links"!==e.relatedTarget.id&&(g(n.locationLinks,{hidden:"true"}),g(n.storeLabel,{"aria-expanded":!1}))}function t(e){"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation(),n.storeLabel.focus()),n.departmentFlyoutOpened(),n.setMenuPosition();var t=null===n.locationLinks.getAttribute("hidden");("click"===event.type&&t&&o||"touchstart"===event.type&&t)&&(g(n.locationLinks,{hidden:!0}),g(n.storeLabel,{"aria-expanded":!1}),o=!1),t||(h(n.locationLinks,["hidden"]),g(n.storeLabel,{"aria-expanded":!0})),"click"===e.type&&(n.storeLabel.addEventListener("focusout",n.handleLocalStoreFocusChange),n.locationLinks.addEventListener("focusout",n.handleLocalStoreFlyoutFocusChange))}n.storeLabel=n.dom.getById("vh-store-button"),n.storeLabel.addEventListener("mouseleave",e),n.locationLinks.addEventListener("mouseleave",e),n.storeLabel.addEventListener("mouseover",function(){n.setMenuPosition(),n.departmentFlyoutOpened(),h(n.locationLinks,["hidden"]),g(n.storeLabel,{"aria-expanded":!0})}),n.storeLabel.addEventListener("touchstart",t,{passive:!0}),n.storeLabel.addEventListener("click",t),n.storeLabel.addEventListener("keydown",n.handleKeydown)},n.departmentFlyoutOpened=function(){var e=n.dom.getById("spark-menu-department-flyout");null===e.getAttribute("hidden")&&(g(e,{hidden:!0}),g(n.dom.getById(e.getAttribute("dept-flyout-id")),{hidden:!0}))},n.handleKeydown=function(e){o=e.keyCode===f.SPACE||e.keyCode===f.ENTER},n.handleLocalStoreFocusChange=function(e){var t=b(n.locationLinks);e.relatedTarget&&"vh-location-button"===e.relatedTarget.id?(g(n.locationLinks,{hidden:"true"}),g(n.storeLabel,{"aria-expanded":!1}),e.relatedTarget.focus()):t.length&&(e.stopPropagation(),v(t).focus())},n.handleLocalStoreFlyoutFocusChange=function(e){e.stopPropagation();var t=b(n.locationLinks),o=t.indexOf(e.relatedTarget)<0;e.target===v(t)&&o?n.storeLabel.focus():e.target===k(t)&&o&&(g(n.locationLinks,{hidden:"true"}),g(n.storeLabel,{"aria-expanded":!1}),document.querySelector("[data-tl-id=GlobalHeaderDepartmentsMenu-allLink]").focus())},n.bindClickListeners=function(){var t=n.dom.querySelector("#header-bubble-links");n.menu&&t&&n.menu.querySelectorAll("a").forEach(function(e){e.setAttribute("data-section-title",e.dataset.tlId),M({dom:n.dom,beacon:n.beacon,moduleInfo:n.dom.getDataAttributes(t,["module-id","module-name","module-published-date","module-type","module-version","module-zone"])})(e)})},n.show=function(e){n.hideLocation=n.hide.bind(this,e),h(e.menu,["hidden"]),n.sparkMenuProxy&&(g(n.sparkMenuProxy.backToMainButton,{"aria-describedby":"spark-menu-header-location"}),n.sparkMenuProxy.hideMainMenu(),n.sparkMenuProxy.backToMainButton.addEventListener("click",n.hideLocation),n.sparkMenuProxy.backToMainButton.focus()),n.beacon.tagAction(t({name:e.name}))},n.updateLocation=function(){n.form&&n.form.refreshLocationData&&n.form.refreshLocationData(),n.triggerZipCode&&n.form.postalCode&&!n.form.promptForZip&&(n.triggerZipCode.innerHTML=n.form.postalCode)},n.hide=function(e){e&&g(e.menu,{hidden:!0}),n.sparkMenuProxy&&(n.sparkMenuProxy.backToMainButton.removeEventListener("click",n.hideLocation),n.sparkMenuProxy.showMainMenu(),h(n.sparkMenuProxy.backToMainButton,["aria-describedby"]),e&&e.trigger.focus())},n.form=a.create({beacon:n.beacon,isMobile:n.isMobile,onCloseSparkMenu:n.onCloseSparkMenu,hideLocationToggle:n.isMobile?n.hide:n.flipLocationUpdateForDesktop}),n}e("default",{create:function(e){var l={};return l.dom=m(e,"dom",p.create()),l.beacon=m(e,"beacon",y("Header")),l.onClose=m(e,"onClose",function(){}),l.onReady=m(e,"onReady",function(){}),l.moduleInfo={},l.fetchTemplate="mobile",l.embedBubbleMenus=!0,l.rootEl=l.dom.getById("header-spark-menu-content"),l.menuContentReady=o.create(),l.setUseMobileTemplate=function(e){l.fetchTemplate=e?"mobile":"desktop"},l.setEmbedBubbleMenus=function(e){l.embedBubbleMenus=e},l.addUserNameToMenu=function(){var e,t,o=r(),n=l.container.querySelector("#hf-user-firstname");"mobile"!==l.fetchTemplate||!o||(e=l.container.querySelector("#vh-mobile-account-button-label"))&&o.greeting&&(t="Account, "+o.greeting,e.innerHTML="Account",g(e,{"aria-label":t})),n&&o&&(n.innerText=o.greeting,g(l.container.querySelector("#hf-spark-menu-logo"),{hidden:"true"}),l.replaceTrackOrderUrl())},l.init=function(e){var t,o;l.rootEl.innerHTML=e.sparkMenu,l.container=l.rootEl.querySelector("#vh-spark-menu"),e.locationForm&&(l.headerLinks=l.container.querySelector("#vh-location-form"),l.headerLinks.innerHTML=e.locationForm),l.addUserNameToMenu(),"desktop"!==l.fetchTemplate?(o=l.container.querySelector("#vh-mobile-account-menu-root"),e.accountMenu&&(o.innerHTML=e.accountMenu),e.locationForm&&(l.dom.getById("vh-mobile-location-menu-root").innerHTML=e.locationForm),e.sparkMenuDepartmentsSubNav&&(l.dom.getById("vh-mobile-department-menu-root").innerHTML=e.sparkMenuDepartmentsSubNav),e.locationLinks&&(l.dom.getById("vh-mobile-store-menu-root").innerHTML=e.locationLinks),"1"===n.get("hasCID")?(t=d("header-account-links-signed-out",o))&&t.remove():(o=d("header-account-links-signed-in",o))&&o.remove()):e.sparkMenuDepartmentsFlyout&&(l.menuContainer=l.dom.getById("header-spark-menu"),d("hf-menu-bg",l.menuContainer).innerHTML=e.locationLinks+e.sparkMenuDepartmentsFlyout),l.setup(),l.onReady(),l.menuContentReady.resolve()},l.setup=function(){l.moduleInfo=l.dom.getDataAttributes(l.container,["module-id","module-type","module-name","module-version","module-published-date","module-zone"]);var e=l.dom.getById("spark-menu-close-button");e&&e.addEventListener("click",l.onClose);var t,o,n,a,r,d,i=((o={}).dom=m(t,"dom",p.create()),o.backToMainButton=o.dom.querySelector("[data-tl-id=header-GlobalHeaderSparkMenu-backButton]"),o.sparkMainMenu=o.dom.getById("vh-spark-main-menu"),o.sparkSubMenu=o.dom.getById("vh-mobile-spark-submenus"),o.showMainMenu=function(){g(o.sparkSubMenu,{hidden:!0}),h(o.sparkMainMenu,["hidden"]);var e="[data-sub-depts-nav-target='"+o.backToMainButton.getAttribute("data-back-btn-for-sub-depts")+"']",e=document.querySelector(e);e&&e.focus()},o.hideMainMenu=function(){g(o.sparkMainMenu,{hidden:!0}),h(o.sparkSubMenu,["hidden"])},o);l.locationMenu=null,l.locationMenu=c({sparkMenuProxy:i,isMobile:"mobile"===l.fetchTemplate,onCloseSparkMenu:l.onClose}),l.locationMenu.setup(),l.embedBubbleMenus?s.import("./account-menu.system.9d91729c.js").then(function(e){e=e.default;l.accountMenu=e.create({sparkMenuProxy:i}),l.accountMenu.setup()}):l.accountMenu=null,"desktop"===l.fetchTemplate?(l.departmentTree=null,l.locationMenu.attachEvent(),l.departmentFlyouts=(a={moduleInfo:l.moduleInfo},d=!(r={}),r.dom=m(a,"dom",p.create()),r.beacon=m(a,"beacon",y("Header")),r.moduleInfo=m(a,"moduleInfo",{}),r.buttonsWrapper=r.dom.getById("vh-department-menu"),r.flyoutsWrapper=r.dom.getById("spark-menu-department-flyout"),r.allLinks=r.flyoutsWrapper.querySelectorAll("a"),r.setup=function(){r.buttonsWrapper.addEventListener("click",r.handleCategoryActivate),r.flyoutsWrapper.addEventListener("mouseleave",r.hideCategoryMenu),r.buttonsWrapper.addEventListener("mouseleave",r.handleCategoryMouseLeave),r.buttonsWrapper.addEventListener("mouseover",r.handleCategoryActivate),r.buttonsWrapper.addEventListener("touchstart",r.handleCategoryActivate,{passive:!0}),r.buttonsWrapper.addEventListener("keydown",r.handleKeydown);var o=M({dom:r.dom,beacon:r.beacon,moduleInfo:r.moduleInfo});r.allLinks.forEach(function(e){var t;e.dataset.uid.match(/-DEPT-\d+/g)&&(t=e.dataset.uid.replace(/-CAT-\d+/g,""),e.setAttribute("data-section-title",r.dom.querySelector("[data-uid="+t+"]").innerText)),o(e)}),r.dom.querySelectorAll("[data-tl-id=GlobalHeaderDepartmentsMenu-allLink]").forEach(o),L.getDefaultInstance().onMeasuredResize(function(e){B.isBreakpointBelow(e.breakpoint,"large")&&r.activeCategory&&r.hideCategoryMenu()})},r.handleKeydown=function(e){d=e.keyCode===f.SPACE||e.keyCode===f.ENTER},r.handleCategoryActivate=function(e){var t,o,n;r.localStorelfyoutOpened(),"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation(),e.target.focus()),0<=(0<=[].slice.call(r.buttonsWrapper.children).indexOf(e.target))&&(t=r.dom.getById(e.target.getAttribute("data-sub-depts-nav-target")),o=r.activeCategory&&r.activeCategory!==t,n=r.activeCategory&&!o,(o||"click"===e.type&&n&&d||"touchstart"===e.type&&n)&&(r.hideCategoryMenu(),d=!1),n||r.showCategoryMenu(t,e.target))},r.handleFlyoutFocusChange=function(e){var t,o;r.activeCategoryButton&&(e.stopPropagation(),o=(t=b(e.currentTarget)).indexOf(e.relatedTarget)<0,e.target===v(t)&&o?r.activeCategoryButton.focus():e.target===k(t)&&o&&((t=r.activeCategoryButton.nextSibling)?t.focus():(o=r.dom.getById("vh-spark-main-menu"),0<=(o=(t=b(o)).indexOf(r.activeCategoryButton))&&o<t.length-1&&t[o+1].focus()),r.hideCategoryMenu()))},r.handleCategoryFocusChange=function(e){var t,o,n;r.activeCategory&&(o=b(r.buttonsWrapper),t=e.relatedTarget===e.target.nextSibling,o=e.target===k(o)&&o.indexOf(e.relatedTarget)<0,t||o?((n=b(r.activeCategory)).length&&(e.stopPropagation(),v(n).focus()),r.removeEscHandler&&(r.removeEscHandler(),r.removeEscHandler=null),r.removeEscHandler=I(r.flyoutsWrapper,function(){r.activeCategoryButton.focus(),r.hideCategoryMenu()})):(n=(o=b(r.dom.getById("vh-spark-main-menu"))).indexOf(r.activeCategoryButton),o[n-1]===e.relatedTarget&&r.hideCategoryMenu()))},r.handleCategoryMouseLeave=function(e){e.relatedTarget&&"vh-spark-main-menu"!==e.relatedTarget.id&&"spark-menu-department-flyout"!==e.relatedTarget.id&&e.relatedTarget.firstElementChild&&"header-spark-menu-content"!==e.relatedTarget.firstElementChild.id&&r.hideCategoryMenu()},r.hideCategoryMenu=function(e){e&&e.relatedTarget&&("vh-spark-main-menu"===e.relatedTarget.id||e.relatedTarget.firstElementChild&&"header-spark-menu-content"===e.relatedTarget.firstElementChild.id)||(r.activeCategoryButton&&(g(r.activeCategoryButton,{"aria-expanded":!1}),r.activeCategoryButton.removeEventListener("focusout",r.handleCategoryFocusChange),r.activeCategoryButton=null),r.removeEscHandler&&(r.removeEscHandler(),r.removeEscHandler=null),r.activeCategory&&(g(r.activeCategory,{hidden:!0}),r.activeCategory.removeEventListener("focusout",r.handleFlyoutFocusChange),r.activeCategory=null),g(r.flyoutsWrapper,{hidden:!0}))},r.setMenuPosition=function(){var e,t,o;r.activeCategoryButton&&r.flyoutsWrapper&&(e=r.activeCategoryButton.getBoundingClientRect().top,t=(o=r.flyoutsWrapper.getBoundingClientRect().height)/2,o=r.dom.getWindow().innerHeight-o,o=Math.min(Math.max(0,e-t),o),r.flyoutsWrapper.style.top=o+"px")},r.showCategoryMenu=function(e,t){r.activeCategory=e,(r.activeCategoryButton=t)&&(g(t,{"aria-expanded":!0}),t.addEventListener("focusout",r.handleCategoryFocusChange)),h(e,["hidden"]),h(r.flyoutsWrapper,["hidden"]),g(r.flyoutsWrapper,{"dept-flyout-id":e.id}),r.setMenuPosition(),r.removeEscHandler=I(r.buttonsWrapper,r.hideCategoryMenu),e.addEventListener("focusout",r.handleFlyoutFocusChange);e=r.dom.getDataAttributes(e,["parent-dept-uid","parent-dept-name","parent-dept-asset-id"]);r.beacon.tagAction(C({moduleId:r.moduleInfo.moduleId,moduleType:r.moduleInfo.moduleType,moduleName:r.moduleInfo.moduleName,moduleVersion:r.moduleInfo.moduleVersion,modulePublishedDate:r.moduleInfo.modulePublishedDate,moduleZone:r.moduleInfo.moduleZone,departmentUid:e.parentDeptUid,departmentName:e.parentDeptName,departmentAssetId:e.parentDeptAssetId}))},r.localStorelfyoutOpened=function(){var e=r.dom.getById("location-links");e&&null===e.getAttribute("hidden")&&(r.activeCategory=null,g(e,{hidden:!0}))},r),l.departmentFlyouts.setup()):(l.departmentFlyouts=null,l.departmentTree=(a={moduleInfo:l.moduleInfo,sparkMenuProxy:i},(n={}).dom=m(a,"dom",p.create()),n.beacon=m(a,"beacon",y("Header")),n.moduleInfo=m(a,"moduleInfo",{}),n.sparkMenuProxy=m(a,"sparkMenuProxy"),n.backToMainButton=n.dom.querySelector("[data-tl-id=header-GlobalHeaderSparkMenu-backButton]"),n.querySelector=function(e){return n.dom.querySelector("#vh-spark-menu "+e)},n.querySelectorAll=function(e){return n.dom.querySelectorAll("#vh-spark-menu "+e)},n.wireBackButton=function(t){var e;t.length<=0||(e=n.querySelectorAll("[data-back-btn-for-sub-depts='"+k(t)+"']"))&&e.forEach(function(e){e.addEventListener("click",n.updateDisplayClick=function(){n.updateDisplay(t)})})},n.updateDisplay=function(e){0<e.length?(n.displaySubMenuContent(e),g(n.backToMainButton,{"data-back-btn-for-sub-depts":e[0]}),n.sparkMenuProxy&&n.sparkMenuProxy.hideMainMenu()):(n.hideAllNavs(),n.sparkMenuProxy&&n.sparkMenuProxy.showMainMenu())},n.hideAllNavs=function(){n.querySelectorAll("[data-sub-depts-nav-id]").forEach(function(e){g(e,{hidden:!0})})},n.showSubNavGroup=function(e,t){t=n.querySelector("[data-sub-depts-nav-id="+e[t]+"]");h(t,["hidden"])},n.showSubNav=function(o){h(n.dom.getById("vh-mobile-department-menu-root"),["hidden"]),o.forEach(function(e,t){n.showSubNavGroup(o,t)})},n.focus=function(e){e&&window.setTimeout(function(){e.focus()},50)},n.displaySubMenuContent=function(e){var t={};n.hideAllNavs(),n.showSubNav([k(e)]),n.focus(n.dom.querySelector("[data-tl-id=header-GlobalHeaderSparkMenu-backButton]")),0<e.length&&((e=n.querySelector("[data-sub-depts-nav-id="+e[e.length-1]+"]"))&&(t=n.dom.getDataAttributes(e,["parent-dept-uid","parent-dept-name","parent-dept-asset-id"])),n.beacon.tagAction(C({moduleId:n.moduleInfo.moduleId,moduleType:n.moduleInfo.moduleType,moduleName:n.moduleInfo.moduleName,moduleVersion:n.moduleInfo.moduleVersion,modulePublishedDate:n.moduleInfo.modulePublishedDate,moduleZone:n.moduleInfo.moduleZone,departmentUid:t.parentDeptUid,departmentName:t.parentDeptName,departmentAssetId:t.parentDeptAssetId})))},n.wireDepartmentsButtons=function(o){var e=o.length+1,t=[];(t=0<o.length?t.concat(o.map(function(e){return"."+e})):t).push("[data-dept-id=dept-nav-btn-lvl-"+e+"]"),n.querySelectorAll(t.join(" ")).forEach(function(e){var t;e&&(t=o.concat([e.getAttribute("data-sub-depts-nav-target")]),e.addEventListener("click",function(){n.updateDisplay(t)}),n.wireBackButton(t),n.wireDepartmentsButtons(t))})},n.setup=function(){var e=n.dom.querySelector("[data-tl-id=header-GlobalHeaderSparkMenu-backButton]");e&&e.addEventListener("click",function(){n.updateDisplay([])}),n.wireDepartmentsButtons([]);var o=M({dom:n.dom,beacon:n.beacon,moduleInfo:n.moduleInfo});n.dom.querySelectorAll("#vh-mobile-department-menu-root a").forEach(function(e){var t;e.dataset.uid.match(/-DEPT-\d+/g)&&(t=e.dataset.uid.replace(/-CAT-\d+/g,""),e.setAttribute("data-section-title",n.dom.querySelector("[data-uid="+t+"]").innerText)),o(e)}),n.dom.querySelectorAll("[data-tl-id=GlobalHeaderDepartmentsMenu-allLink]").forEach(o)},n),l.departmentTree.setup());var u=M({dom:l.dom,beacon:l.beacon,moduleInfo:l.moduleInfo});[].slice.call(l.dom.querySelectorAll("[data-tl-id^=header-GlobalHeaderSparkMenu-optionalTopLinks]")).concat([].slice.call(l.dom.querySelectorAll("[data-tl-id^=header-GlobalHeaderSparkMenu-optionalBottomLinks]"))).forEach(function(e){e.setAttribute("data-section-title","Header"),u(e)})},l.replaceTrackOrderUrl=function(){g(l.rootEl.querySelector("[data-tl-id=header-top-links] [title='Track Orders']"),{href:i()})},l.show=function(){l.menuContentReady.then(function(){l.locationMenu&&l.locationMenu.updateLocation(),l.beacon.addData([["li","dummyLinkKey",{lc:0,pi:0}]]).tagAction(u({moduleId:l.moduleInfo.moduleId,moduleType:l.moduleInfo.moduleType,moduleVersion:l.moduleInfo.moduleVersion,modulePublishedDate:l.moduleInfo.modulePublishedDate}))})},l.hide=function(){l.departmentFlyouts&&l.departmentFlyouts.hideCategoryMenu(),l.locationMenu&&(l.locationMenu.hide({menu:l.dom.getById("vh-mobile-location-menu-root"),name:"Location Panel",trigger:l.dom.getById("vh-location-button")}),l.locationMenu.hide({menu:l.dom.getById("vh-mobile-store-menu-root"),name:"Store Panel",trigger:l.dom.getById("vh-location-button")})),l.departmentTree&&l.departmentTree.updateDisplay([]),g(l.dom.getById("location-links"),{hidden:"true"})},l}})}}});
