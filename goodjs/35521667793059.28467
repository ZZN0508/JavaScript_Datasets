var MegApp={doms:{wrapper:$(".js-gamewindowWrap"),gamewindow:$(".js-gamewindow"),gamewindowtitle:$(".js-gamewindowtitle"),gamewindowlead:$(".js-gamewindowlead"),gamecanvaswrap:$(".js-gameCanvasWrap"),gamewindowshare:$(".js-gamewindowshare"),windowBtn:$(".js-gamewindowBtn"),accordionBtn:$(".js-accordionBtn"),closeBtn:$(".js-gameCloseBtn"),canvas:$("#myCanvas")},config:{osanpo:{title:"縺ｽ縺ｦ縺ｽ縺ｦ�√♀縺輔ｓ縺ｽ繝｡繧ｰ縺溘ｓ",assetsPath:"/games/osanpo/assets/",leadText:"<b>鬟帙ｓ縺ｧ縺上ｋ謔ｪ縺�ワ繝√＆繧薙ｒ</b>繝溘Ν繧ｯ繝懊�繝ｫ縺ｧ謾ｻ謦�＠縺溘ｊ縲√ず繝｣繝ｳ繝励〒驕ｿ縺代◆繧翫＠縺ｪ縺後ｉ繝｡繧ｰ縺溘ｓ縺ｫ縺翫＆繧薙⊃縺励※繧ゅｉ縺翫≧��ｫ伜ｾ礼せ繧呈嫌縺偵ｌ縺ｰ繝｡繧ｰ縺溘ｓ縺ｮ縺雁暑驕斐′縺頑焔莨昴＞縺ｫ譚･縺ｦ縺上ｌ繧九°繧やｦ��ｼ�<br><b>縺ゅ♀繧縺励＆繧難ｼ壻ｸ蠎ｦ縺�縺代Γ繧ｰ縺溘ｓ繧偵ワ繝√＆繧薙°繧牙ｮ医▲縺ｦ縺上ｌ繧九ｈ</b><br>縲先桃菴懈婿豕輔醍ｧｻ蜍包ｼ喙竊�(蜊∝ｭ励く繝ｼ蟾ｦ)][竊�(蜊∝ｭ励く繝ｼ蜿ｳ)]繧ｸ繝｣繝ｳ繝暦ｼ喙竊�(蜊∝ｭ励く繝ｼ荳�)]謾ｻ謦�ｼ喙space]<br><span>窶ｻ譛ｬ繝悶Λ繧ｦ繧ｶ繧ｲ繝ｼ繝�縺ｯ縺贋ｽｿ縺��遶ｯ譛ｫ縺ｮ莉墓ｧ倥√∪縺溘�謗･邯壽凾縺ｮ騾壻ｿ｡迺ｰ蠅�↓繧医ｊ蜍穂ｽ懊′驕�￥縺ｪ繧九％縺ｨ縺後≠繧翫∪縺吶�</span>",tweetText:"goo繝医ャ繝励�繝ｼ繧ｸ縺ｧ繝｡繧ｰ縺溘ｓ縺ｨ縺翫＆繧薙⊃縺励※繧ｹ繧ｳ繧｢繧偵ご繝�ヨ縺吶ｋ縲後⊃縺ｦ縺ｽ縺ｦ�√♀縺輔ｓ縺ｽ繝｡繧ｰ縺溘ｓ縲阪′驕翫∋繧九ｈ�√∩繧薙↑縺ｧ驕翫ｓ縺ｧ鬮伜ｾ礼せ繧堤岼謖�◎縺�ｼ�"},star:{title:"縺阪ｉ縺阪ｉ�∵弌繧偵▽縺九�繝｡繧ｰ縺溘ｓ",assetsPath:"/games/star/assets/",leadText:"<b>繝｡繧ｰ縺溘ｓ繧呈桃菴懊＠縺ｦ縺頑弌縺輔∪繧帝寔繧√ｈ縺�ｼ∝宛髯先凾髢謎ｻ･蜀�〒縲√←繧後□縺鯛�繧帝寔繧√ｉ繧後ｋ縺九↑��</b><br>縲先桃菴懈婿豕輔� 繧ｯ繝ｪ繝�け or 繧ｿ繝���壹ず繝｣繝ｳ繝�<br><span>窶ｻ譛ｬ繝悶Λ繧ｦ繧ｶ繧ｲ繝ｼ繝�縺ｯ縺贋ｽｿ縺��遶ｯ譛ｫ縺ｮ莉墓ｧ倥√∪縺溘�謗･邯壽凾縺ｮ騾壻ｿ｡迺ｰ蠅�↓繧医ｊ蜍穂ｽ懊′驕�￥縺ｪ繧九％縺ｨ縺後≠繧翫∪縺吶�</span>",tweetText:"goo繝医ャ繝励�繝ｼ繧ｸ縺ｧ繝｡繧ｰ縺溘ｓ縺悟､懃ｩｺ繧帝｣帙ｓ縺ｧ繧ｹ繧ｳ繧｢繧偵ご繝�ヨ縺吶ｋ縲後″繧峨″繧会ｼ∵弌繧偵▽縺九�繝｡繧ｰ縺溘ｓ縲阪′驕翫∋繧九ｈ�√∩繧薙↑縺ｧ驕翫ｓ縺ｧ鬮伜ｾ礼せ繧堤岼謖�◎縺�ｼ�"},handleKeyDown:"",handleKeyUp:"",isSmartphone:"",scrollVal:""},init:{gameInit:{osanpo:function(){var t,ee,te,a,ae,ne,ie,se,re,ge,oe,de,n,ce,he,pe,le;!function(){t=document.getElementById("myCanvas");const e=document.activeElement;e.blur(),ee=t.width,te=t.height,ae=te-(a=50),ne=150,(ie=new createjs.StageGL(t)).updateViewport(ee,te),manifest=[{src:"intro.png",id:"intro"},{src:"btnstart.png",id:"btnstart"},{src:"over.png",id:"over"},{src:"btnover.png",id:"btnover"},{src:"megtan.png",id:"megutan"},{src:"tree.png",id:"tree"},{src:"grass.png",id:"grass"},{src:"heart.png",id:"heart"},{src:"cloud.png",id:"cloud"},{src:"aomushi.png",id:"aomushi"},{src:"maimai.png",id:"maimai"},{src:"bee.png",id:"bee"},{src:"twitter.png",id:"twitter"}],(se=new createjs.LoadQueue(!1)).setMaxConnections(6),se.addEventListener("complete",i),se.loadManifest(manifest,!0,MegApp.config.osanpo.assetsPath)}();var me=.15;function i(){ce=se.getResult("tree"),grassImg=se.getResult("grass"),he=se.getResult("heart"),cloudImg=se.getResult("cloud"),pe=se.getResult("aomushi"),maimaiImg=se.getResult("maimai"),le=se.getResult("bee");var a=new createjs.Container;ie.addChild(a);var e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,.75)").drawRect(0,0,ee,te),e.cache(0,0,ee,te),a.addChild(e);var t=se.getResult("intro"),e=new createjs.Bitmap(t);e.regX=t.width/2,e.regY=t.height/2,e.x=ee/2,e.y=t.height/2+50,a.addChild(e);t=se.getResult("btnstart"),e=new createjs.Bitmap(t);e.regX=t.width/2,e.regY=t.height/2,e.x=ee/2,e.y=te-t.height/2-25,a.addChild(e),a.cache(0,0,ee,te),ie.addEventListener("mousedown",function e(t){t.preventDefault();ie.removeEventListener("mousedown",e);ie.removeChild(a);we()}),ie.update()}function we(){var e=new createjs.Graphics;e.beginLinearGradientFill(["#8cf0fc","#bff5fc"],[0,1],0,0,0,te).drawRect(0,0,ee,te),bg=new createjs.Shape(e),bg.cache(0,0,ee,te),ie.addChild(bg);e=new createjs.Shape;e.graphics.beginBitmapFill(cloudImg).drawRect(-cloudImg.width,0,ee+cloudImg.width,cloudImg.height),e.cache(-cloudImg.width,0,ee+cloudImg.width,cloudImg.height),e.y=0,ie.addChild(e),ge=new createjs.Container,ie.addChild(ge);e=new createjs.Shape;e.graphics.beginBitmapFill(ce).drawRect(-ce.width,0,ee+ce.width,ce.height),e.cache(-ce.width,0,ee+ce.width,ce.height),e.y=te-ce.height-a,ge.addChild(e),re=new createjs.Container,ie.addChild(re),n=new createjs.Container,ie.addChild(n),de=new createjs.Container,ie.addChild(de);e=new createjs.SpriteSheet({framerate:60,images:[se.getResult("megutan")],frames:{regX:ne/2,height:ne,count:32,regY:ne,width:ne},animations:{stop:[0,0,"stop",1],run:[0,31,"run",.2]}});megutan=new createjs.Sprite(e,"stop"),megutan.run=!1,megutan.x=ee-ne/2,megutan.y=ae+8,megutan.speedx=5,megutan.speedy=8.5,megutan.jumpCount=0,de.addChild(megutan);e=new createjs.Shape;e.graphics.beginLinearGradientFill(["#80ae30","#80ae30"],[0,1],0,0,0,te).drawRect(0,ae,ee,a),e.cache(0,ae,ee,a),ie.addChild(e),(oe=new createjs.Shape).graphics.beginBitmapFill(grassImg).drawRect(-grassImg.width,0,ee+grassImg.width,grassImg.height),oe.cache(-grassImg.width,0,ee+grassImg.width,grassImg.height),oe.y=te-grassImg.height-a,ie.addChild(oe);var x=0,f=0,v=!1,y=!1,C=!1,M=!1,A=!1;MegApp.config.handleKeyDown=function(e){e=e.keyCode;39==e?M=y=!0:37==e?M=!(v=!0):38==e?C=!0:32==e?A=!0:40==e&&1==Q&&function(){{var e;0==H&&((e=new createjs.Graphics).beginLinearGradientFill(["rgba(0,0,0,.5)","rgba(0,0,0,.35)"],[0,1],0,0,0,2*te).drawRect(0,0,ee,te+100),effect=new createjs.Shape(e),effect.cache(0,0,ee,te+100),effect.alpha=effect.Y=0,createjs.Tween.get(effect).to({alpha:.6},500),createjs.Tween.get(effect).to({y:-100},500),n.addChild(effect),maimaiCount=E,H=!0)}}(),0==megutan.run&&(1!=y&&1!=v||(megutan.run=!0,megutan.gotoAndPlay("run")))},MegApp.config.handleKeyUp=function(e){e=e.keyCode;39==e?y=!1:37==e?v=!1:38==e?C=!1:32==e&&(A=!1)},window.addEventListener("keydown",MegApp.config.handleKeyDown),window.addEventListener("keyup",MegApp.config.handleKeyUp);var j=[],S=!1,b=0,T=0,R=[],I=["bee","horizon"],E=0,L=0,t=new createjs.Text("SCORE:0轤ｹ","24px sans-serif","white");t.x=10,t.y=5,t.cache(0,0,ee,24),re.addChild(t);var B=3,k=new createjs.Text("LIFE:"+B,"24px sans-serif","#cf5a4c");k.x=ee-80,k.y=5,k.cache(0,0,80,24),re.addChild(k);var $=0,Y=new createjs.Text("繧縺壹°縺励＆:1","24px sans-serif","white");Y.textAlign="right",Y.x=ee-95,Y.y=5,Y.cache(-160,0,160,24),re.addChild(Y);var F,X=!0,G=[],P=!0,D=[],O=!1,K=!1,_=[],z=!1,V=0,W=!1,U=0,N=!1,Q=!1,q=[],H=!1;function J(){L+=100,t.text=String("SCORE:"+L+"轤ｹ"),t.cache(0,0,ee,24)}function Z(){ie.removeChild(q[0]),q.splice(0,1),n.removeChild(effect),N=!(H=Q=!1)}createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(e){1==y?x=megutan.speedx:1==v&&(x=-megutan.speedx);megutan.scaleX=1==M?-1:1;1==C&&megutan.y==ae+8&&(f=-megutan.speedy);f+=.25,f*=.99,megutan.y+=f,megutan.y>ae+8&&(megutan.y=ae+8,f=0);x*=.96,megutan.x+=x,megutan.x>ee-ne/2?megutan.x=ee-ne/2:megutan.x<ee/2?(megutan.x=ee/2,ge.x-=.9*x,oe.x-=+x):megutan.x<0+ne/2&&(megutan.x=0+ne/2);ge.x>=ce.width&&(ge.x=0,T+=1,J(),T%5==0&&(X=!0,$<20&&($+=1,Y.text=String("繧縺壹°縺励＆:"+($+1)),createjs.Tween.get(Y,{loop:3}).to({alpha:.1},500).to({alpha:1},300),Y.cache(-160,0,160,24))),5==$&&2==I.length&&I.push("missile"));oe.x>=grassImg.width&&(oe.x=0);x<.5&&-.5<x&&(megutan.gotoAndPlay("stop"),megutan.run=!1);E+=1,countPop=Math.floor(E%(300/(1+.5*$))),0==countPop&&R.length<=$&&R.length<4&&(a=new createjs.Bitmap(le),"bee"==(s=I[Math.floor(Math.random()*I.length)])?(a.x=0,a.maxY=ae-.5*ne,a.minY=ae-ne,a.y=Math.floor(Math.random()*(a.maxY-a.minY)+a.minY),a.speedx=Math.floor(3*Math.random())+.2*$,a.speedy=.07,a.cenrery=a.y,a.angley=0,a.range=100+Math.floor(Math.random()*$),a.type="bee"):"horizon"==s?(a.maxY=ae-.5*ne,a.minY=ae-.9*ne,a.x=0,a.y=ae-.9*ne,a.speedx=Math.floor(3*Math.random())+.2*$,a.type="horizon"):"missile"==s&&(a.x=ee,a.y=0,a.speedx=.005,a.speedy=.05,a.type="missile"),re.addChild(a),R.push(a));for(var t=0;t<R.length;t++)0==H?("bee"==R[t].type&&(R[t].y=R[t].cenrery+Math.sin(R[t].angley)*R[t].range,R[t].angley+=R[t].speedy,megutan.x==ee/2?R[t].x+=R[t].speedx-x:R[t].x+=R[t].speedx),"horizon"==R[t].type&&(megutan.x==ee/2?R[t].x+=R[t].speedx-x:R[t].x+=R[t].speedx),"missile"==R[t].type&&(R[t].x+=(megutan.x-R[t].x)*R[t].speedx,R[t].y+=(megutan.y-ne/2-R[t].y)*R[t].speedy),R[t].x>ee&&(re.removeChild(R[t]),R.splice(t,1))):1==H&&megutan.x==ee/2&&(R[t].x-=x);for(t=0;t<R.length;t++){var a=R[t],n=megutan,i=a.localToLocal(0,0,n);1==n.hitTest(i.x,i.y)&&0==W&&(1==!K?(--B,k.text=String("LIFE:"+B),k.cache(0,0,80,24)):1==K&&(P=!(O=K=!1),de.removeChild(F)),W=!0,U=E,megutan.alpha=.45,re.removeChild(R[t]),R.splice(t,1),0==B&&function(){createjs.Ticker.removeAllEventListeners(),ie.removeAllEventListeners();var e=new createjs.Container;ie.addChild(e);var t=new createjs.Shape;t.graphics.beginFill("rgba(0,0,0,.75)").drawRect(0,0,ee,te),t.cache(0,0,ee,te),e.addChild(t);var a=se.getResult("over"),n=new createjs.Bitmap(a);n.regX=a.width/2,n.regY=a.height/2,n.x=ee/2,n.y=a.height/2+50,e.addChild(n);var i=se.getResult("btnover"),t=new createjs.Bitmap(i);t.regX=i.width/2,t.regY=i.height/2,t.x=ee/2,t.y=te-i.height/2-25,e.addChild(t);n=se.getResult("twitter"),i=new createjs.Bitmap(n);i.regX=n.width/2,i.regY=n.height/2,i.x=ee/2,i.y=te/2+40,e.addChild(i);n=new createjs.Text(L+"轤ｹ","70px Arial","#000");n.textAlign="center",n.textBaseline="bottom",n.x=ee/2,n.y=a.height/2+55,e.addChild(n);n=new createjs.Text("GET!!!","44px Arial","#000");n.textAlign="center",n.textBaseline="top",n.x=ee/2,n.y=a.height/2+55,e.addChild(n),e.cache(0,0,ee,te),t.addEventListener("mousedown",function e(t){t.preventDefault(),ie.removeEventListener("mousedown",e),ie.removeAllChildren(),we()});t="goo繝医ャ繝励�繝ｼ繧ｸ縺ｮ縲後⊃縺ｦ縺ｽ縺ｦ�√♀縺輔ｓ縺ｽ繝｡繧ｰ縺溘ｓ縲阪〒繧ｹ繧ｳ繧｢縲�"+L+"轤ｹGET!!!縲�";i.addEventListener("mousedown",{text:t,hashtags:"goo繝医ャ繝励�繝ｼ繧ｸ,繝｡繧ｰ縺溘ｓ,繝｡繧ｰ縺溘ｓ繧ｲ繝ｼ繝�",url:"https://www.goo.ne.jp/",handleEvent:function(e){var t="https://twitter.com/share";t+="?text="+this.text,t+="&hashtags="+this.hashtags,t+="&url="+this.url,window.open(t)}}),MegApp.init.gameResultManager(MegApp.config.osanpo.title,L)}())}{var s;0<$&&$%3==0&&1==X&&(s=new createjs.Bitmap(he),re.addChild(s),s.x=-ee/2,s.y=ae-1.5*he.height-10,X=!1,G.push(s))}for(t=0;t<G.length;t++)megutan.x==ee/2&&(G[t].x-=x),G[t].x>ee&&(re.removeChild(G[t]),G.splice(t,1));for(t=0;t<G.length;t++){var r=G[t].localToLocal(0,0,megutan);1==megutan.hitTest(r.x,r.y)&&(B<3?(B+=1,k.text=String("LIFE:"+B),k.cache(0,0,80,24)):J(),re.removeChild(G[t]),G.splice(t,1))}1==W&&U+180<=E&&(W=!1,megutan.alpha=1);1==A&&0==S&&((h=new createjs.Shape).graphics.beginFill("#fff").drawCircle(0,0,15),createjs.Tween.get(h).to({alpha:0},3e3),1==M?(h.x=megutan.x+ne/2-12,h.speedx=8):(h.x=megutan.x-ne/2+12,h.speedx=-8),h.y=megutan.y-ne/2+17,h.speedy=-5,h.r=15,S=!0,b=E,h.cache(-15,-15,30,30),ie.addChild(h),j.push(h));for(t=0;t<j.length;t++)megutan.x==ee/2?j[t].x+=j[t].speedx-x:j[t].x+=j[t].speedx,j[t].speedy+=.5,j[t].speedy*=.99,j[t].y+=j[t].speedy,j[t].y>ae-j[t].r&&(j[t].y=ae-j[t].r,j[t].speedy*=-1),(j[t].x<0||j[t].x>ee)&&(ie.removeChild(j[t]),j.splice(t,1));E==b+70&&1==!O&&(S=!1);for(var g=0;g<R.length;g++)for(t=0;t<j.length;t++){var o=R[g],d=j[t],c=d.localToLocal(0,0,o);if(1==o.hitTest(c.x,c.y)){ie.removeChild(d),j.splice(t,1),re.removeChild(R[g]),R.splice(g,1);break}}{var h;0<L&&L%1e3==0&&1==P&&1==!K&&(h=new createjs.Bitmap(pe),de.addChild(h),h.x=-pe.width,h.y=ae-2*pe.height,h.scaleX=-1,h.speedx=.5,h.speedy=1,P=!1,D.push(h))}for(t=0;t<D.length;t++)megutan.x==ee/2?D[t].x+=D[t].speedx-x:D[t].x+=D[t].speedx,D[t].speedy+=me,D[t].y+=D[t].speedy,D[t].y>ae-pe.height&&(D[t].y=ae-pe.height,D[t].speedy*=-1),D[t].x>ee&&(de.removeChild(D[t]),D.splice(t,1),P=!0);for(t=0;t<D.length;t++){var p=D[t].localToLocal(0,0,megutan);1==megutan.hitTest(p.x,p.y)&&(O=!0,J(),de.removeChild(D[t]),D.splice(t,1))}1==O&&(F=new createjs.Bitmap(pe),de.addChild(F),F.regY=pe.height,F.x=megutan.x-ne+pe.width,F.y=megutan.y-8,K=!(O=!1));1==K&&(F.x+=.1*(megutan.x+ne-pe.width-F.x),F.y+=.1*(megutan.y-8-F.y),1==A&&0==z&&((w=new createjs.Shape).graphics.beginFill("#00ACA7").drawCircle(0,0,10),w.speedx=1==M?8:-8,w.x=F.x,w.y=F.y,w.speedy=-2*Math.random(),w.r=10,z=!0,V=E,w.cache(-10,-10,20,20),ie.addChild(w),_.push(w)));for(t=0;t<_.length;t++)megutan.x==ee/2?_[t].x+=_[t].speedx-x:_[t].x+=_[t].speedx,_[t].y+=_[t].speedy,(_[t].x<0||_[t].x>ee)&&(ie.removeChild(_[t]),_.splice(t,1));E==V+100&&(z=!1);for(g=0;g<R.length;g++)for(t=0;t<_.length;t++){var o=R[g],l=_[t],m=l.localToLocal(0,0,o);if(1==o.hitTest(m.x,m.y)){ie.removeChild(l),_.splice(t,1),re.removeChild(R[g]),R.splice(g,1);break}}{var w;0<L&&L%100==0&&1==N&&(w=new createjs.Bitmap(maimaiImg),de.addChild(w),w.x=-maimaiImg.width,w.y=ae-maimaiImg.height,w.speedx=.5,N=!1,q.push(w))}for(t=0;t<q.length;t++){var u=q[t].localToLocal(0,0,megutan);1==megutan.hitTest(u.x,u.y)&&0==Q&&(Q=!0,q[t].scaleX=-1,J())}for(t=0;t<q.length;t++)1==Q?(q[t].x+=.08*(megutan.x+ne-maimaiImg.width-q[t].x),q[t].y+=.08*(megutan.y-8-q[t].y-maimaiImg.height)):(megutan.x==ee/2?q[t].x+=q[t].speedx-x:q[t].x+=q[t].speedx,q[t].x>ee&&(N=!0,de.removeChild(q[t]),q.splice(t,1)));if(H&&E>=maimaiCount+300)for(t=0;t<q.length;t++)createjs.Tween.get(q[t]).to({alpha:0},500).call(Z);ie.update(e)})}},star:function(){var e,h,p,l,m,w,u,x,f,v,y,C,t=function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}};function a(){var a=new createjs.Container;l.addChild(a);var e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,.75)").drawRect(0,0,h,p),e.cache(0,0,h,p),a.addChild(e),t=MegApp.config.isSmartphone?m.getResult("introSp"):m.getResult("intro");e=new createjs.Bitmap(t);e.regX=t.width/2,e.regY=0,e.x=h/2,e.y=MegApp.config.isSmartphone?40:50,e.scaleX=e.scaleY=MegApp.config.isSmartphone?.65:1,a.addChild(e);var t=m.getResult("btnstart"),n=new createjs.Bitmap(t);n.regX=t.width/2,n.regY=t.height/2,n.x=h/2,n.y=MegApp.config.isSmartphone?p-2*t.height-10:p-t.height/2-25,a.addChild(n),n.addEventListener("mousedown",function e(t){t.preventDefault();n.removeEventListener("mousedown",e);l.removeChild(a);i()}),MegApp.config.isSmartphone&&(e=m.getResult("btnfs"),(t=new createjs.Bitmap(e)).regX=MegApp.config.isSmartphone?e.width/2:0,t.regY=e.height/2,t.x=MegApp.config.isSmartphone?h/2:h/2+10,t.y=MegApp.config.isSmartphone?p-e.height:p-e.height/2-25,a.addChild(t),t.addEventListener("mousedown",function(){MegApp.init.fullScreenMode()})),a.cache(0,0,h,p),l.update()}function i(){var i=m.getResult("glass"),s=m.getResult("night"),r=m.getResult("nightBg"),e=new createjs.Container;l.addChild(e);var t=new createjs.Shape;t.graphics.beginFill("#222").drawRect(0,0,h,p),t.cache(0,0,h,p),e.addChild(t);var g=new createjs.Shape;g.graphics.beginBitmapFill(r).drawRect(0,0,h+r.width,p),g.cache(0,0,h+r.width,r.height),g.x=-r.width,e.addChild(g);var o=new createjs.Shape;o.graphics.beginBitmapFill(s).drawRect(0,0,h+s.width,s.height),o.cache(0,0,h+s.width,s.height),o.x=-s.width,o.y=p-s.height,e.addChild(o);e=new createjs.Container;l.addChild(e);var d=new createjs.Shape;megutanImg=m.getResult("megutan"),d.graphics.beginBitmapFill(megutanImg).drawRect(0,0,megutanImg.width,megutanImg.height),d.cache(0,0,megutanImg.width,megutanImg.height),d.x=h-megutanImg.width-10,d.y=0+megutanImg.width,d.scaleX=d.scaleY=.75,e.addChild(d);var c=0;l.addEventListener("mousedown",function(e){e.preventDefault(),c=-8.5}),u=0,score=new createjs.Text("SCORE:0轤ｹ","24px sans-serif","white"),score.cache(0,0,h,24),score.x=10,score.y=5,e.addChild(score),f=v,clock=new createjs.Text("TIME:"+f,"24px sans-serif","white"),clock.textAlign="right",clock.cache(-h,0,h,24),clock.x=h-10,clock.y=5,e.addChild(clock),C=new createjs.Container,l.addChild(C),y=[],createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.setFPS(60),createjs.Ticker.addEventListener("tick",function(e){c+=.25,c*=.99,d.y+=c,d.y>p-megutanImg.height/2&&(d.y=p-megutanImg.height/2,c*=-1);if(x){(w+=1)%60==0&&(--f,clock.text=String("TIME:"+f),clock.cache(-h,0,h,24),0==f&&function(){x=!1;var a=new createjs.Container;l.addChild(a);var e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,.75)").drawRect(0,0,h,p),e.cache(0,0,h,p),a.addChild(e);var t=m.getResult("over"),e=new createjs.Bitmap(t);e.regX=t.width/2,e.regY=0,e.x=h/2,e.y=MegApp.config.isSmartphone?110:50,e.scaleX=e.scaleY=MegApp.config.isSmartphone?.4:1,a.addChild(e);var t=m.getResult("btnover"),n=new createjs.Bitmap(t);n.regX=t.width/2,n.regY=t.height/2,n.x=h/2,n.y=MegApp.config.isSmartphone?p-2*t.height-10:p-t.height/2-25,a.addChild(n),n.addEventListener("mousedown",function e(t){t.preventDefault();n.removeEventListener("mousedown",e);l.removeChild(a);x=!0;w=0;0;u=0;f=v;score.text=String("SCORE:"+u+"轤ｹ");score.cache(0,0,h,24);clock.text=String("TIME:"+f);clock.cache(-h,0,h,24);C.removeAllChildren();y=[]});e=m.getResult("twitter"),t=new createjs.Bitmap(e);t.regX=e.width/2,t.regY=e.height/2,t.x=h/2,t.y=p/2+40,a.addChild(t);e=new createjs.Text(u+"轤ｹ","70px Arial","#000");e.textAlign="center",e.textBaseline="bottom",e.x=h/2,e.y=MegApp.config.isSmartphone?200:257,e.scaleX=e.scaleY=MegApp.config.isSmartphone?.7:1,a.addChild(e);e=new createjs.Text("GET!!!","44px Arial","#000");e.textAlign="center",e.textBaseline="top",e.x=h/2,e.y=MegApp.config.isSmartphone?200:257,e.scaleX=e.scaleY=MegApp.config.isSmartphone?.7:1,a.addChild(e),MegApp.config.isSmartphone&&(e=m.getResult("btnfs"),(i=new createjs.Bitmap(e)).regX=MegApp.config.isSmartphone?e.width/2:0,i.regY=e.height/2,i.x=MegApp.config.isSmartphone?h/2:h/2+10,i.y=MegApp.config.isSmartphone?p-e.height:p-e.height/2-25,a.addChild(i),i.addEventListener("mousedown",function(){MegApp.init.fullScreenMode()}));a.cache(0,0,h,p);var i="goo繝医ャ繝励�繝ｼ繧ｸ縺ｮ縲後″繧峨″繧会ｼ∵弌繧偵▽縺九�繝｡繧ｰ縺溘ｓ縲阪〒繧ｹ繧ｳ繧｢縲�"+u+"轤ｹGET!!!縲�";t.addEventListener("mousedown",{text:i,hashtags:"goo繝医ャ繝励�繝ｼ繧ｸ,繝｡繧ｰ縺溘ｓ,繝｡繧ｰ縺溘ｓ繧ｲ繝ｼ繝�",url:"https://www.goo.ne.jp/",handleEvent:function(e){var t="https://twitter.com/share";t+="?text="+this.text,t+="&hashtags="+this.hashtags,t+="&url="+this.url,MegApp.config.isSmartphone?location.href=t:window.open(t)}}),MegApp.init.gameResultManager(MegApp.config.star.title,u)}()),w%1200==0&&0,w%1200==0&&((a=new createjs.Bitmap(i)).regX=i.width/2,a.regY=i.height/2,a.x=-i.width,a.y=Math.random()*p,a.scaleX=a.scaleY=.75,a.speedx=3,a.type="glass",y.push(a),C.addChild(a)),w%60==0&&((a=new createjs.Shape).graphics.beginFill("yellow").drawPolyStar(0,0,20,5,.4,0),createjs.Tween.get(a,{loop:!0}).to({rotation:360},3e3),a.cache(-20,-20,40,40),a.x=-20,a.y=Math.random()*p,a.scaleX=.5,a.scaleY=.5,a.speedx=1.5+5*Math.random(),a.type="star",y.push(a),C.addChild(a));for(var t=0;t<y.length;t++){var a,n=(a=y[t]).localToLocal(0,0,d);1==d.hitTest(n.x,n.y)&&("star"==y[t].type?(u+=100,score.text=String("SCORE:"+u+"轤ｹ"),score.cache(0,0,h,24)):"glass"==y[t].type&&(f+=10,clock.text=String("TIME:"+f),clock.cache(-h,0,h,24)),C.removeChild(y[t]),y.splice(t,1))}}for(t=0;t<y.length;t++)y[t].x+=y[t].speedx,y[t].x>h&&(C.removeChild(y[t]),y.splice(t,1));g.x+=.5,0==g.x&&(g.x=-r.width);o.x+=1,0==o.x&&(o.x=-s.width);l.update()})}!function(){e=document.getElementById("myCanvas"),h=e.width,p=e.height,x=!(w=0),v=30,l=new(t()?createjs.StageGL:createjs.Stage)(e);l.updateViewport(h,p),1==createjs.Touch.isSupported()&&createjs.Touch.enable(l);manifest=[{src:"meg_star_intro.jpg",id:"intro"},{src:"meg_star_intro_sp.png",id:"introSp"},{src:"meg_fly.png",id:"megutan"},{src:"meg_hourglass.png",id:"glass"},{src:"meg_night.png",id:"night"},{src:"meg_nightBg.png",id:"nightBg"},{src:"intro.png",id:"intro"},{src:"btnstart.png",id:"btnstart"},{src:"over.png",id:"over"},{src:"btnover.png",id:"btnover"},{src:"btnfs.png",id:"btnfs"},{src:"twitter.png",id:"twitter"}],(m=new createjs.LoadQueue(!1)).setMaxConnections(1),m.installPlugin(createjs.Sound),m.addEventListener("complete",a),m.loadManifest(manifest,!0,MegApp.config.star.assetsPath)}()}},gameWindowInit:function(){var t;function e(){$("html").removeClass("gameplay"),MegApp.doms.wrapper.removeClass("active"),MegApp.doms.gamecanvaswrap.css({height:""}),$("#NR-page").css({transform:""}),$(window).scrollTop(MegApp.config.scrollVal),createjs.Ticker.removeAllEventListeners(),MegApp.config.handleKeyDown&&(window.removeEventListener("keydown",MegApp.config.handleKeyDown),window.removeEventListener("keydown",MegApp.config.handleKeyUp)),MegApp.doms.canvas.remove()}"0"==(t=$.cookie("meggame")?JSON.parse($.cookie("meggame")):{title:"",score:"",MGT:"1"}).MGT?($("#gameAccordion").hide(),MegApp.doms.accordionBtn.addClass("closed")):$("#gameAccordion").show(),MegApp.doms.windowBtn.on("click",function(e){e.preventDefault();e=$(this).data("game-title");MegApp.config.scrollVal=$(window).scrollTop(),$("#NR-page").css({transform:"translateY("+-MegApp.config.scrollVal+"px)"}),$("html").addClass("gameplay"),MegApp.doms.wrapper.addClass("active"),MegApp.init.gameLoader(e),e="osanpo"==e?"meggame-sanpo-3":"meggame-hoshi-3",$("#myCanvas").attr("data-cid",e)}),MegApp.doms.accordionBtn.on("click",function(e){e.preventDefault();e=$(this).attr("href");$(this).hasClass("closed")?($(this).removeClass("closed"),$.cookie("meggame",'{"title":"'+t.title+'","score":"'+t.score+'","MGT":"1"}',{expires:3,path:"/"})):($(this).addClass("closed"),$.cookie("meggame",'{"title":"'+t.title+'","score":"'+t.score+'","MGT":"0"}',{expires:3,path:"/"})),$(e).stop().slideToggle()}),MegApp.doms.wrapper.on("click",function(){e()}),MegApp.doms.closeBtn.on("click",function(){e()}),MegApp.doms.gamewindow.on("click",function(e){e.stopPropagation()})},gameLoader:function(e){0<navigator.userAgent.indexOf("iPhone")||0<navigator.userAgent.indexOf("Android")&&0<navigator.userAgent.indexOf("Mobile")||0<navigator.userAgent.indexOf("iPad")||0<navigator.userAgent.indexOf("Android")?MegApp.config.isSmartphone=!0:MegApp.config.isSmartphone=!1;var t=MegApp.config.isSmartphone?375:1024,a=MegApp.config.isSmartphone?568:576;switch(MegApp.doms.gamecanvaswrap.html('<canvas id="myCanvas" width="'+t+'" height="'+a+'"></canvas>'),MegApp.doms.canvas=$("#myCanvas"),e){case"osanpo":MegApp.doms.gamewindowtitle.html(MegApp.config.osanpo.title),MegApp.doms.gamewindowlead.html(MegApp.config.osanpo.leadText),MegApp.doms.gamewindowshare.attr("href","https://twitter.com/share?text="+MegApp.config.osanpo.tweetText+"&hashtags=goo繝医ャ繝励�繝ｼ繧ｸ,繝｡繧ｰ縺溘ｓ,繝｡繧ｰ縺溘ｓ繧ｲ繝ｼ繝�&url=https://www.goo.ne.jp/"),$("img",MegApp.doms.gamewindowshare).attr("data-cid","meggame-sanpo-2"),MegApp.init.gameInit.osanpo();break;case"star":MegApp.doms.gamewindowtitle.html(MegApp.config.star.title),MegApp.doms.gamewindowlead.html(MegApp.config.star.leadText),MegApp.doms.gamewindowshare.attr("href","https://twitter.com/share?text="+MegApp.config.star.tweetText+"&hashtags=goo繝医ャ繝励�繝ｼ繧ｸ,繝｡繧ｰ縺溘ｓ,繝｡繧ｰ縺溘ｓ繧ｲ繝ｼ繝�&url=https://www.goo.ne.jp/"),$("img",MegApp.doms.gamewindowshare).attr("data-cid","meggame-hoshi-2"),MegApp.init.gameInit.star()}MegApp.init.sizeSet()},sizeSet:function(){var e=0,t=MegApp.doms.gamecanvaswrap.siblings(),a=MegApp.doms.gamewindow.height();t.each(function(){e+=$(this).outerHeight(!0)}),MegApp.doms.gamecanvaswrap.css("height",a-e)},fullScreenMode:function(){return MegApp.doms.gamewindow.hasClass("fullScreen")?(MegApp.doms.gamewindow.removeClass("fullScreen"),document.exitFullscreen()):(MegApp.doms.gamewindow.addClass("fullScreen"),document.documentElement.requestFullscreen()),!1},gameResultManager:function(e,t){$.cookie("meggame",'{"title":"'+e+'","score":"'+t+'","MGT":"1"}',{expires:3,path:"/"})}}};MegApp.init.gameWindowInit();
