YUI.add("comment-list-view",function(l,e){var m=require("hermes-core/flog")(e);l.namespace("Views")["comment-list-view"]=l.Base.create("comment-list-view",l.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.commentsViewHelper=e.commentListConfig.commentsViewHelper,this.config=this.commentsViewHelper.config.commentListConfig,this.modelConfig=this.config.modelConfig,this.isSubjectOwner=!1,this.hasParseableInput=this.appContext.flipper.isFlipped("enable-custom-text-parser"),this.hasParseableInput&&(this.params.mentionsApiConfig&&(this.params.mentionsApiConfig.params.photo_id=this.photoId),e.customParserConfig={appContext:this.appContext,classList:["comment-edit-text"],parsers:["mentions","emojis"],type:"textarea",mentionsApiConfig:this.params.mentionsApiConfig,isActiveViewAgnostic:!0})},loadState:function(){return this.commentsViewHelper.load()},activate:function(){var e=this,t=this.get("container");return t.addClass("comment-list-view"),this.commentsListNode=t.one(".comment-list"),this.registerEventHandler(this.commentsListNode.delegate("click",this.handleCommentActionClick.bind(this),".comment-actions")),this.loadComments().then(function(){e.commentsViewHelper.commentsObj.permalinkHash&&e.jumpToPermalink()})},resetComments:function(){return this.commentsViewHelper.reset(),this.commentsListNode.set("innerHTML",""),this.loadComments()},loadComments:function(){var o=this;return o.appContext.getViewer().nsid,o.appContext.getViewer().signedIn,this.commentsViewHelper.loadComments().then(function(e){return o.getComments()}).then(function(){var e=o.get("container").all("img.notsowide"),t=e._nodes.length,n=0;0===t?o.handleLoadCommentsComplete():e.on(["load","error"],function(e){++n===t&&o.handleLoadCommentsComplete()})}).catch(function(e){m.error("Error getting info",{err:e})})},getComments:function(){var t=this;return this.commentsViewHelper.commentsObj.endOfComments?l.Promise.resolve():(this.isFetchingComments=!0,this.commentsViewHelper.getMoreComments().then(function(e){return t.updateComments(e)}).then(function(){t.isFetchingComments=!1}).catch(function(e){m.error("Error getting comments",{err:e}),t.isFetchingComments=!1}))},getMoreComments:function(){var e=this;return this.commentsViewHelper.commentsObj.endOfComments?l.Promise.resolve():(this.showCommentLoading(!0),this.getComments().then(function(){e.showCommentLoading(!1)}))},showBalls:function(e){this.balls||(this.balls=l.Node.create('<li class="loading-balls"></li>'),this.balls.setHTML(this.templates("flickr-balls")({}))),e?(this.balls.addClass("bottom"),this.commentsListNode.append(this.balls)):this.commentsListNode.prepend(this.balls)},hideBalls:function(){this.balls&&(this.balls.removeClass("bottom"),this.balls.remove())},appendNewComment:function(e){var t=this,e=Object.assign(e.toJSON(),{appContext:this.appContext,showPermalink:this.commentsViewHelper.config.commentListConfig.showPermalinks}),n=new l.Views["comment-item-view"](e);n.initialize(e).then(function(){n.activate()}).then(function(){var e=l.Node.create('<li class="comment-list-item"></li>');e.append(n.get("container")),t.commentsListNode.append(e),t.showCommentAddLoading(!1)}).then(function(){t.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+l.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:l.config.flickr.urls.assetRoot+"/images/joypixels",container:t.get("container").getDOMNode()}),t.handleCommentViewAppended(n)})},handleCommentActionClick:function(e){var t=e.target,n=t.ancestor(".comment-item"),o=n.getAttribute("data-id"),i={};t.ancestor(".comment-action-menu-button",!0)&&(i.menuType=t.ancestor(".comment-action-menu-button",!0).getAttribute("data-menutype"),i.permalink=t.ancestor(".comment-action-menu-button",!0).getAttribute("data-permalink"),this.showCommentActionMenu(o,n,i)),t.ancestor(".comment-action-reply-button",!0)&&(e.preventDefault(),this.fire("subviewViewEvent",{eventName:"replyClicked",pathAliasOrNSID:t.ancestor(".comment-action-reply-button",!0).getAttribute("data-pathalias")}))},tmpShowCommentModal:function(){var e=new l.Views["photo-comments-view"]({appContext:this.appContext,photoId:this.modelConfig.modelId,isScrollable:!0,hasHeader:!0,addCommentText:this.intlMessage({intlName:"comments.ADD_PHOTO_COMMENT",mediaType:"photo"})}),t=new l.ModalDroparoundHelper(this.appContext,{useViewportType:!1,containerType:"modal",configs:{common:{subview:e},droparound:{},modal:{overlayClassList:"over-droparound-under-modal",width:this.get("container").get("clientWidth")-50,height:this.get("container").get("clientHeight")-50,flexLayout:!0}}});t.show(),this.registerEventHandler(l.on("addComment:showingSignupModal",function(){t.close()}))},showCommentActionMenu:function(t,n,e){var o=this,i=[];!o.commentsViewHelper.commentsObj.isSubjectOwner&&"owner"!==e.menuType||i.push({text:this.intlMessage({intlName:"common.DELETE"}),value:"delete-comment-action"}),"owner"===e.menuType&&i.push({text:this.intlMessage({intlName:"common.EDIT"}),value:"edit-comment-action"}),this.commentsViewHelper.config.commentListConfig.showPermalinks&&i.push({text:this.intlMessage({intlName:"photo-page-scrappy.PERMALINK"}),value:"permalink-comment-action",href:e.permalink}),n.addClass("active"),this.commentActionMenu||(this.commentActionMenu=new l.Views.FluidDroparound({appContext:this.appContext,dismissOnActionClick:!0,showDropArrow:!0,anchorElement:n.one(".comment-action-menu-button"),classList:"over-modal comment-action-menu",overlayClassList:"over-modal",menuItems:i}),this.commentActionMenu.show(),this.registerEventHandler(this.commentActionMenu.on("closeDroparound",function(e){n.removeClass("active"),o.commentActionMenu=null})),this.registerEventHandler(this.commentActionMenu.on("selected",function(e){o.commentActionMenu.close(),"delete-comment-action"===e.menuItem.value?o.deleteComment(t,n):"edit-comment-action"===e.menuItem.value&&(o.hasParseableInput?o.showParseableEdit(t,n):o.showEditComment(t,n))})))},deleteComment:function(e,t){return t.ancestor("li").remove(),this.deleteCommentCall(e)},deleteCommentCall:function(e){var t=this;return this.commentsViewHelper.deleteComment(e).then(function(){t.fire("subviewViewEvent",{eventName:"commentDeleted",commentModelId:e})})},showEditComment:function(o,e){var i=this,s=e.one(".content-container"),a=s.one(".comment-content");if(!this.isEditingComment)return this.isEditingComment=!0,this.commentsViewHelper.commentsObj.commentModelRegistry.get(o).then(function(e){var t,n=a.get("offsetHeight");a.hide(),s.append(i.templates("comment-edit")({content:e.getValue("contentRaw")})),i.editCommentNode=s.one(".comment-edit"),(t=i.editCommentNode.one(".edit-field")).setStyle("height",Math.min(Math.max(n,100),200)),t.select(),i.registerEventHandler(i.editCommentNode.one(".cancel-edit-button").on("click",function(){a.show(),i.editCommentNode.remove(),i.isEditingComment=!1})),i.registerEventHandler(i.editCommentNode.one(".submit-edit-button").on("click",function(){i.updateComment(o,t.get("value"),a).then(function(e){a.set("innerHTML",e.getValue("contentSecure")),a.show(),i.editCommentNode.remove(),i.isEditingComment=!1,i.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+l.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:l.config.flickr.urls.assetRoot+"/images/joypixels",container:i.get("container").getDOMNode()})}).catch(function(e){m.error("Error editing comment",{err:e}),a.show(),i.editCommentNode.remove(),i.isEditingComment=!1})}))})},showParseableEdit:function(n,e){var o=this,i=e.one(".content-container"),s=i.one(".comment-content");if(!this.isEditingComment)return this.isEditingComment=!0,this.commentsViewHelper.commentsObj.commentModelRegistry.get(n).then(function(e){return s.hide(),i.append(o.templates("comment-edit")({content:e.getValue("contentRaw")})),o.editCommentNode=i.one(".comment-edit"),o.appContext.getView("parseable-text-input-view",{appContext:o.appContext,classList:["comment-edit-text"],content:e.getValue("contentRaw"),parsers:["mentions","emojis"],type:"textarea",mentionsApiConfig:o.params.mentionsApiConfig,isActiveViewAgnostic:!0}).then(function(e){return(this.inputView=e).initialize()}).then(function(t){return i.one(".text-area-wrapper").append(t.get("container")),o.registerEventHandler(o.editCommentNode.one(".cancel-edit-button").on("click",function(){s.show(),t.destroy({remove:!0}),o.editCommentNode.remove(),o.isEditingComment=!1})),o.registerEventHandler(o.editCommentNode.one(".submit-edit-button").on("click",function(){o.updateComment(n,t.getContent(),s).then(function(e){s.set("innerHTML",e.getValue("contentSecure")),s.show(),t.destroy({remove:!0}),o.editCommentNode.remove(),o.isEditingComment=!1,o.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+l.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:l.config.flickr.urls.assetRoot+"/images/joypixels",container:o.get("container").getDOMNode()})}).catch(function(e){m.error("Error editing comment",{err:e}),s.show(),t.destroy({remove:!0}),o.editCommentNode.remove(),o.isEditingComment=!1})})),t.normalizedActivate(),t}).then(function(e){e.textInput.focus()}).catch(function(e){m.error("Error showing comment edit",{err:e})})})},updateComment:function(e,t){return this.updateCommentCall(e,t)},updateCommentCall:function(t,e){var n=this;return this.commentsViewHelper.updateComment(t,e).then(function(e){return n.fire("subviewViewEvent",{eventName:"commentUpdated",commentModelId:t}),e})},delayPromise:function(t,n){return new l.Promise(function(e){setTimeout(function(){return e(n())},t)})},setLoading:function(e){this.isLoading=e},updateComments:function(e){},handleCommentViewAppended:function(){},showCommentLoading:function(){},showCommentAddLoading:function(){},jumpToPermalink:function(){var e=l.config.win.location.hash,t=this.get("container");"#comments"===e?l.AnchorRepositioner.jumpTo(t):(e=t.one(e))?(l.AnchorRepositioner.jumpTo(e),e.addClass("permalinked-comment")):new l.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),message:this.intlMessage({intlName:"photo-page-scrappy.COMMENT_PERMALINK_ERROR"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),classList:"scrappy-dialog",showCancelButton:!1,showActionButton:!0,showFooter:!1,dismissOnOverlayClick:!0}).show()}})},"@VERSION@",{requires:["flickr-view","comment-item-view","parseable-text-input-view"],langBundles:["gallery","stats","comments","common","photo-page-scrappy"]}),YUI.add("hermes-template-scrollable-comment-list-view",function(n,e){var o=n.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,o,i){var s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-list-container loading">\n\t<ol class="comment-list">\n\t</ol>\n\t<div class="loading-text">'+l((e(n,"intlMessage")||t&&e(t,"intlMessage")||a).call(s,{name:"intlMessage",hash:{intlName:"comments.LOADING_COMMENTS"},data:i,loc:{start:{line:4,column:27},end:{line:4,column:79}}}))+'</div>\n\t<div class="no-comments-text">'+l((e(n,"intlMessage")||t&&e(t,"intlMessage")||a).call(s,{name:"intlMessage",hash:{intlName:"comments.NO_COMMENTS"},data:i,loc:{start:{line:5,column:31},end:{line:5,column:78}}}))+"</div>\n</div>"},useData:!0}),i={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(i[e]=t)}),n.Template.register("hermes/scrollable-comment-list-view",function(e,t){return(t=t||{}).partials=t.partials?n.merge(i,t.partials):i,o(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]}),YUI.add("scrollable-comment-list-view",function(a,e){var n=require("hermes-core/flog")(e);a.namespace("Views")[this.name]=a.Base.create(this.name,a.Views["comment-list-view"],[],{langBundles:this.details.langBundles,initializer:function(e){this.constructor.superclass.initializer.call(this,e)},loadState:function(){var t=this;return t.appContext.getModel(t.modelConfig.listRegistryName,{id:this.modelConfig.modelId}).then(function(e){t.commentListModel=e}).catch(function(e){throw n.error("Error getting comment list info",{err:e}),e})},buildContainer:function(){this.setContainerWithTemplate("scrollable-comment-list-view",this.params)},activate:function(){var e=this.get("container");this.listContainerNode=e.one(".comment-list-container"),this.scrollableEl=this.listContainerNode.getDOMNode(),this.registerEventHandler(this.commentListModel.on("valuesChanged",this.handleCommentListChange.bind(this),!0)),this.constructor.superclass.activate.call(this)},handleCommentListChange:function(e){0===e.comments.newVal.getList().length?this.showNoCommentsMessage():this.listContainerNode.removeClass("no-comments")},showNoCommentsMessage:function(){var e=this;this.listContainerNode.addClass("no-comments"),setTimeout(function(){e.fire("subviewViewEvent",{eventName:"emptyCommentContainer"})},300)},getNumOfComments:function(){return this.commentListModel.getValue(this.modelConfig.collectionName).getList().length},setLoading:function(e){this.isLoading=e,this.listContainerNode.toggleClass("loading",e)},handleLoadCommentsComplete:function(){this.listContainerNode.removeClass("loading"),0===this.getNumOfComments()&&this.showNoCommentsMessage(),this.scrollableEl.scrollTop=this.scrollableEl.scrollHeight,this.registerEventHandler(this.listContainerNode.on("scroll",this.handleCommentsScroll.bind(this)))},appendNewComment:function(e){0===this.getNumOfComments()&&this.listContainerNode.removeClass("no-comments"),this.constructor.superclass.appendNewComment.call(this,e)},handleCommentsScroll:function(e){!this.isFetchingComments&&this.scrollableEl.scrollTop<=0&&this.getMoreComments()},showCommentLoading:function(e){e?this.showBalls(!1):this.hideBalls()},showCommentAddLoading:function(e){e?(this.showBalls(!0),this.scrollableEl.scrollTop=this.scrollableEl.scrollHeight):this.hideBalls()},handleCommentViewAppended:function(e){this.scrollableEl.scrollTop=this.scrollableEl.scrollHeight},updateComments:function(e){return e?this.prependComments(e):a.Promise.resolve()},prependComments:function(e){var n=this,o=[],i=[];return e.forEach(function(e){e=e.toJSON(),e=Object.assign(e,{appContext:n.appContext,showPermalink:n.commentsViewHelper.config.commentListConfig.showPermalinks});e.isSubjectOwner=n.commentsViewHelper.commentsObj.isSubjectOwner;var t=new a.Views["comment-item-view"](e),e=t.initialize(e).then(function(){t.activate()});i.push(t),o.push(e)}),a.Promise.all(o).then(function(){n.prependCommentViewsToDom(i)})},prependCommentViewsToDom:function(e){var t,n=this,o=this.scrollableEl,i=o.scrollHeight,s=o.scrollTop;e.forEach(function(e){(t=a.Node.create('<li class="comment-list-item"></li>')).append(e.get("container")),n.commentsListNode.prepend(t)}),this.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+a.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:a.config.flickr.urls.assetRoot+"/images/joypixels",container:this.get("container").getDOMNode()}),o.scrollTop=o.scrollHeight-i+s}})},"@VERSION@",{requires:["flickr-view","comment-list-view","hermes-template-scrollable-comment-list-view"],langBundles:["common","comments"]}),YUI.add("hermes-template-standard-comment-list-view",function(n,e){var o=n.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,o,i){var s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-list-container loading">\n\t<a role="button" class="load-more-button">'+l("function"==typeof(e=null!=(e=m(n,"loadMoreText")||(null!=t?m(t,"loadMoreText"):t))?e:a)?e.call(s,{name:"loadMoreText",hash:{},data:i,loc:{start:{line:2,column:43},end:{line:2,column:59}}}):e)+'</a>\n\t<ol class="comment-list">\n\t</ol>\n\t<div class="loading-text">'+l((m(n,"intlMessage")||t&&m(t,"intlMessage")||a).call(s,{name:"intlMessage",hash:{intlName:"comments.LOADING_COMMENTS"},data:i,loc:{start:{line:5,column:27},end:{line:5,column:79}}}))+"</div>\n</div>"},useData:!0}),i={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(i[e]=t)}),n.Template.register("hermes/standard-comment-list-view",function(e,t){return(t=t||{}).partials=t.partials?n.merge(i,t.partials):i,o(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]}),YUI.add("standard-comment-list-view",function(s,e){require("hermes-core/flog")(e),s.namespace("Views")[this.name]=s.Base.create(this.name,s.Views["comment-list-view"],[],{langBundles:this.details.langBundles,initializer:function(e){this.constructor.superclass.initializer.call(this,e)},buildContainer:function(){this.setContainerWithTemplate("standard-comment-list-view",this.params)},activate:function(){var e=this.get("container");this.listContainerNode=e.one(".comment-list-container"),this.loadMoreButton=e.one(".load-more-button"),this.registerEventHandler(this.loadMoreButton.on("click",this.handleLoadMoreClick.bind(this))),this.constructor.superclass.activate.call(this)},setLoading:function(e){this.isLoading=e,this.listContainerNode.toggleClass("loading",e)},handleLoadCommentsComplete:function(){this.listContainerNode.removeClass("loading")},showCommentLoading:function(e){e?this.showBalls(!1):this.hideBalls()},showCommentAddLoading:function(e){e?this.showBalls(!0):this.hideBalls()},updateComments:function(e){return e?(this.updateLoadButton(),this.prependComments(e)):s.Promise.resolve()},prependComments:function(e){var n=this,o=[],i=[];return e.forEach(function(e){e=e.toJSON(),e=Object.assign(e,{appContext:n.appContext,showPermalink:n.commentsViewHelper.config.commentListConfig.showPermalinks});e.isSubjectOwner=n.commentsViewHelper.commentsObj.isSubjectOwner;var t=new s.Views["comment-item-view"](e),e=t.initialize(e).then(function(){t.activate()});i.push(t),o.push(e)}),s.Promise.all(o).then(function(){n.prependCommentViewsToDom(i)})},prependCommentViewsToDom:function(e){var t,n=this;e.forEach(function(e){(t=s.Node.create('<li class="comment-list-item"></li>')).append(e.get("container")),n.commentsListNode.prepend(t)}),this.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+s.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:s.config.flickr.urls.assetRoot+"/images/joypixels",container:this.get("container").getDOMNode()})},handleLoadMoreClick:function(){var e=this;this.isFetchingComments||this.getMoreComments().then(function(){e.updateLoadButton()})},updateLoadButton:function(){var e=this.commentsViewHelper.getLoadButtonMessage();this.loadMoreButton.toggleClass("hidden",!!this.commentsViewHelper.commentsObj.endOfComments),this.loadMoreButton.set("text",e)}})},"@VERSION@",{requires:["flickr-view","comment-list-view","hermes-template-standard-comment-list-view"],langBundles:["common","comments","photo-page-scrappy"]}),YUI.add("hermes-template-photo-comments-view",function(n,e){var o=n.Template.Handlebars.revive({1:function(e,t,n,o,i){return" scrollable"},3:function(e,t,n,o,i){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t<header class="comments-header">\n\t\t\t<h1>'+e.escapeExpression((s(n,"intlMessage")||t&&s(t,"intlMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlMessage",hash:{intlName:"stats.COMMENTS"},data:i,loc:{start:{line:6,column:7},end:{line:6,column:48}}}))+'</h1>\n\t\t\t<svg class="close-x-button"><use xlink:href="#icon-close"></use></svg>\n\t\t</header>\n'},5:function(e,t,n,o,i){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\t\t\t"+e.escapeExpression((s(n,"outlet")||t&&s(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"scrollable-comment-list-view"):t,{name:"outlet",hash:{},data:i,loc:{start:{line:13,column:3},end:{line:13,column:42}}}))+"\n"},7:function(e,t,n,o,i){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\t\t\t"+e.escapeExpression((s(n,"outlet")||t&&s(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"standard-comment-list-view"):t,{name:"outlet",hash:{},data:i,loc:{start:{line:15,column:3},end:{line:15,column:40}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,o,i){var s,a=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="photo-comments with-emoji-picker\n\t'+(null!=(s=l(n,"if").call(a,null!=t?l(t,"isScrollable"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:1},end:{line:2,column:39}}}))?s:"")+'">\n\n'+(null!=(s=l(n,"if").call(a,null!=t?l(t,"hasHeader"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:1},end:{line:9,column:8}}}))?s:"")+'\n\t<section class="comments-list-section">\n'+(null!=(s=l(n,"if").call(a,null!=t?l(t,"isScrollable"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:12,column:2},end:{line:16,column:9}}}))?s:"")+'\t</section>\n\n\t<section class="add-comment-section">\n\t\t'+e.escapeExpression((l(n,"outlet")||t&&l(t,"outlet")||e.hooks.helperMissing).call(a,null!=t?l(t,"add-comment-view"):t,{name:"outlet",hash:{},data:i,loc:{start:{line:20,column:2},end:{line:20,column:29}}}))+"\n\t</section>\n</div>\n"},useData:!0}),i={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(i[e]=t)}),n.Template.register("hermes/photo-comments-view",function(e,t){return(t=t||{}).partials=t.partials?n.merge(i,t.partials):i,o(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]}),YUI.add("hermes-template-comment-edit",function(n,e){var o=n.Template.Handlebars.revive({1:function(e,t,n,o,i){return""},3:function(e,t,n,o,i){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<textarea class="edit-field">'+e.escapeExpression("function"==typeof(s=null!=(s=s(n,"content")||(null!=t?s(t,"content"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"content",hash:{},data:i,loc:{start:{line:6,column:32},end:{line:6,column:43}}}):s)+"</textarea>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,o,i){var s=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-edit">\n\t<div class="text-area-wrapper">\n'+(null!=(e=(m(n,"isFlipped")||t&&m(t,"isFlipped")||a).call(s,"enable-custom-text-parser",{name:"isFlipped",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:2},end:{line:7,column:16}}}))?e:"")+'\t</div>\n\t<div class="buttons edit-comment-buttons">\n\t\t<button type="button" class="mini alt cancel-edit-button">'+l((m(n,"intlMessage")||t&&m(t,"intlMessage")||a).call(s,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:i,loc:{start:{line:10,column:60},end:{line:10,column:100}}}))+'</button>\n\t\t<button type="button" class="mini action submit-edit-button">'+l((m(n,"intlMessage")||t&&m(t,"intlMessage")||a).call(s,{name:"intlMessage",hash:{intlName:"common.DONE"},data:i,loc:{start:{line:11,column:63},end:{line:11,column:101}}}))+"</button>\n\t</div>\n</div>"},useData:!0}),i={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(i[e]=t)}),n.Template.register("hermes/comment-edit",function(e,t){return(t=t||{}).partials=t.partials?n.merge(i,t.partials):i,o(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
