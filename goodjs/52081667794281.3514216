(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{QdLl:function(e,n,t){"use strict";var r=t("eVuF"),a=t.n(r),r=t("ln6h"),o=t.n(r),r=t("FAhR"),s=t.n(r),i=t("u0k+"),u=t("9E9K"),c=t("0ZHj"),l=t("4m1b"),d=t("5RYI");n.a={getAdvertisementTrending:function(r){return function(n){var t;return o.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=l.a.advertisementQuery.loadAdvertisements(r),e.next=4,o.a.awrap(Object(d.a)(t));case 4:200!==(t=e.sent).status||t.data.errors?n(s.a.error({title:"Error get advertisement trending",message:"".concat(t.data.errors[0].message)})):(t=t.data.data&&t.data.data.searchListAdvertisements||[],n(Object(u.e)(i.a.FETCH_ADVERTISEMENT_TRENDING_SUCCESS,t))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(s.a.error({title:"Error",message:"".concat(e.t0.toString())}));case 11:case"end":return e.stop()}},null,null,[[0,8]],a.a)}},getPostAdvertisement:function(r){return function(n){var t;return o.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=l.a.advertisementQuery.loadAdvertisementsSponsored(r),e.next=4,o.a.awrap(Object(d.a)(t));case 4:200!==(t=e.sent).status||t.data.errors?n(s.a.error({title:"Error get advertisement sponsored",message:"".concat(t.data.errors[0].message)})):"logout"===t.data.status?n(c.a.logout()):(t=t.data.data&&t.data.data.searchListAdvertisementSponsored||[],n(Object(u.e)(i.a.FETCH_POST_ADVERTISEMENT_SUCCESS,t))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(s.a.error({title:"Error",message:"".concat(e.t0.toString())}));case 11:case"end":return e.stop()}},null,null,[[0,8]],a.a)}}}},RNiq:function(e,n,t){"use strict";t.r(n);var r=t("eVuF"),c=t.n(r),a=t("ln6h"),l=t.n(a),o=t("6BQ9"),_=t.n(o),T=t("q1tI"),r=t.n(T),a=t("a6RD"),o=t.n(a),S=t("nOHt"),a=t("cr+I"),G=t.n(a),M=t("/MKj"),x=t("65Qd"),a=t("5QL/"),d=t("QdLl"),A=t("KQIb"),R=t("L9Iq"),D=t("cnO6"),I=t("R5x4"),H=t("v0uu"),L=t("77wQ"),F=t("KiGI"),N=t("kKES"),Q=t("OZ8X"),q=t("gnED"),b=t("MXW5"),p=t("aCTP"),U=r.a.createElement,Y=o()(function(){return Promise.all([t.e(0),t.e(15)]).then(t.bind(null,"TzbF"))},{loadableGenerated:{webpack:function(){return["TzbF"]},modules:["components/GeneralComponents/PostItem"]}}),K=o()(function(){return Promise.resolve().then(t.bind(null,"+2sF"))},{loadableGenerated:{webpack:function(){return["+2sF"]},modules:["components/GeneralComponents/CustomizeCategory"]}}),W=o()(function(){return t.e(7).then(t.bind(null,"JbQ0"))},{loadableGenerated:{webpack:function(){return["JbQ0"]},modules:["components/GeneralComponents/LoadMoreComponent"]}}),V=o()(function(){return t.e(10).then(t.bind(null,"VKBT"))},{loadableGenerated:{webpack:function(){return["VKBT"]},modules:["components/GeneralComponents/Empty"]}}),B=o()(function(){return Promise.all([t.e(0),t.e(101)]).then(t.bind(null,"Y3M2"))},{loadableGenerated:{webpack:function(){return["Y3M2"]},modules:["components/GeneralComponents/Community/CommunityUserTrending"]}}),z=o()(function(){return t.e(3).then(t.bind(null,"qnC3"))},{loadableGenerated:{webpack:function(){return["qnC3"]},modules:["components/GeneralComponents/Modal/ReportModal"]}}),X=o()(function(){return t.e(114).then(t.bind(null,"DYDY"))},{loadableGenerated:{webpack:function(){return["DYDY"]},modules:["components/GeneralComponents/Advertisement/AdvertisementTrending"]}}),J=o()(function(){return t.e(4).then(t.bind(null,"m5KH"))},{loadableGenerated:{webpack:function(){return["m5KH"]},modules:["components/GeneralComponents/Loading/PostLoadMoreLoading"]}}),Z=o()(function(){return t.e(8).then(t.bind(null,"baa9"))},{loadableGenerated:{webpack:function(){return["baa9"]},modules:["components/GeneralComponents/Loading/PostLoading"]}}),$=o()(function(){return t.e(155).then(t.bind(null,"IEcB"))},{loadableGenerated:{webpack:function(){return["IEcB"]},modules:["components/GeneralComponents/Schema/Home"]}}),ee=o()(function(){return t.e(0).then(t.bind(null,"OL+C"))},{loadableGenerated:{webpack:function(){return["OL+C"]},modules:["components/GeneralComponents/GeneratorSeo"]}}),ne=o()(function(){return Promise.all([t.e(0),t.e(16)]).then(t.bind(null,"GYP7"))},{loadableGenerated:{webpack:function(){return["GYP7"]},modules:["components/GeneralComponents/CommunityRankingBlock"]}}),te=0,o=Object(T.memo)(function(t){var r=Object(S.useRouter)(),a=Object(M.useDispatch)(),e=Object(T.useContext)(x.a),o=Object(Q.e)(e),n=Object(T.useRef)(),s=Object(M.useSelector)(function(e){return{user:e.auth&&e.auth.user||null,categories:e.category&&e.category.categories||[],viewMore:!!e.fetching&&e.fetching.viewMore,loading:!!e.fetching&&e.fetching.isLoading}}),i=(null==r||null===(v=r.query)||void 0===v?void 0:v.cat)||"",u=Object(M.useSelector)(Object(D.e)(i)),c=Object(T.useCallback)(function(e,n,t){return a(A.a.viewMoreTrendingPost(e,n,t))},[a]),l=Object(T.useCallback)(function(e,n){return a(A.a.viewMoreTrendingPostBack(e,n))},[a]),d=Object(T.useCallback)(function(e){return a(R.a.getCommunityByUser(e))},[a]),b=Object(T.useCallback)(function(){return a(A.a.loadPostsData())},[a]);Object(T.useEffect)(function(){b(),s.user&&d(I.a.searchCommunity(null,s.user.id,null,null,H.ac))},[]);var p=Object(T.useState)(!1),f=p[0],m=p[1],g=Object(T.useState)(null),v=g[0],h=g[1],i=Object(T.useState)(H.Vb),C=i[0],O=i[1],p=Object(T.useState)(!1),g=p[0],P=p[1],i=Object(T.useState)(),j=i[0],w=i[1],p=Object(T.useState)(null),i=p[0],y=p[1];Object(T.useEffect)(function(){j!==window.location.pathname&&w(window.location.pathname)}),Object(T.useEffect)(function(){O(1);var e=k.find(function(e){return e.url===j});e&&y(e)},[j]),Object(T.useEffect)(function(){te++;var e=r.query.page;5<_()(e)&&1===C&&e&&C<_()(e)&&1===te&&(function(e,n){P(!0);n=(n-1)*H.Wb;l(e,n),setTimeout(function(){return P(!1)},500)}(JSON.parse(localStorage.getItem("trendingPosts")).slice(H.Wb),e),e=e,O(_()(e)))},[]);var k=(k=N.b.trendingTabs(s.categories)).filter(function(e){return"ngoi-nha-webtretho"!==e.code&&"giao-dich"!==e.code}),E={route:null==r?void 0:r.route,categoryId:null};return U(F.default,{title:"Diễn đàn Webtretho",hiddenFooter:o,refElement:n,hiddenAds:!1,dataAdvertisement:L.b,activeChildrenPage:!0,childrenPage:t.categorySlug?"/".concat(t.categorySlug):null,dataTabs:k,device:e.currentDevice,topContent:U("div",{className:"mt__10"},U(X,{customizeSlideClass:"mx__0 ad-trending-desktop wtt-events-box-desktop",showSubTitle:!1,isMobile:o})),leftContent:U(ne,{data:E,hasContentOver:!0}),showUserRank:!0,schema:U($,null),idAds:o?Object(q.a)(L.b,"isMobile"):Object(q.a)(L.b),isLoadingPersist:t.isLoadingPersist||null},U("div",null,U(ee,{type:H.Gc.seoType.Normal,keyCurrentCategory:null==i?void 0:i.key,title:null==i?void 0:i.title}),o?U(T.Fragment,null,U(K,{data:k,customizeclass:"cate-wrap"}),U("div",{className:"mt__10"},U(X,{isMobile:o,slidesInfinite:!0,customizeSlideClass:"ad-trending-desktop space-carousel wtt-events-box-mobile"})),U("div",{className:"mb__10"})):null,s.loading?U(Z,{isMobile:o}):U(W,{currentPage:C,hasMore:s.viewMore&&!g,handleLoadMore:function(){P(!0);var e=r.query.page,n=e&&C<_()(e)?_()(e)+1:C+1,e=I.a.searchTrendingPost(null,t.categorySlug,null,null,null,n);O(n),c(e,s.user?s.user.id:null,H.Wb),function(){var e=r.query.page,n=e&&C<_()(e)?_()(e)+1:C+1,e=G.a.parse(location.search);e.page=n;e=G.a.stringify(e);history.pushState({page:n},null,"?".concat(e))}(),setTimeout(function(){return P(!1)},500)},loadingStatus:g,loadingComponent:U(J,{isMobile:o}),parentRef:n},u&&0<u.length?u.map(function(e,n){return U("div",{key:n=n},U(Y,{cssClass:"".concat((t=e).trendingPositionPicked?"ga-trending-picked-post-".concat(t.trendingPositionPicked):""),isMobile:o,index:n,data:t,community:t.community||null,handleReportModal:function(){h(t.id),m(!0)},isGetCommunityUsers:!0,isSponsored:!!t.sponsoreds&&t.sponsoreds}),U("div",{className:"mb__10"}),n===H.p?o?U(ne,{data:E,isMobile:!0}):U(B,{position:n,isMobile:o}):null);var t}):U(V,{title:"Hiện không có bài viết!"})),U(z,{onClose:function(){m(!1),h(null)},visible:f,referenceId:v,reasonType:H.Oc.ReasonReportType.PostAndComment,reportType:H.Oc.reportTypes.post})))});o.getInitialProps=function(n){var t,r,a,o,s,i,u;return l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.store,r=n.query,u=Object(b.d)(n),a=r.page,o=u?u.id:null,1<a&&a<6?(i=a*H.Wb,s=I.a.searchTrendingPost(null,r.cat,o,null,null,null,i,null,null)):(s=I.a.searchTrendingPost(null,r.cat,o),i=H.Wb),e.next=7,l.a.awrap(t.dispatch(A.a.getTrendingPosts(s,u?u.id:null,i)));case 7:return u=[H.Gc.advertisementMode.Event,H.Gc.advertisementMode.General,H.Gc.advertisementMode.Promotion],u=I.a.searchAdvertisements(u,H.Gc.advertisementDetailPosition.Trending,H.Gc.advertisementDetailMode.Native),e.next=11,l.a.awrap(t.dispatch(d.a.getAdvertisementTrending(u)));case 11:return e.next=13,l.a.awrap(t.dispatch(p.a.getCategories(I.a.searchCategories())));case 13:return e.abrupt("return",{categorySlug:r.cat});case 14:case"end":return e.stop()}},null,null,null,c.a)},n.default=Object(a.a)(o)},aCTP:function(e,n,t){"use strict";var r=t("vYYK"),a=t("eVuF"),o=t.n(a),a=t("ln6h"),s=t.n(a),i=t("u0k+"),u=t("4m1b"),c=t("5RYI"),a=t("FAhR"),l=t.n(a),d=t("0ZHj"),b=t("9E9K"),p=t("MXW5"),t=t("4QmT"),f=Object(r.a)({},t.f.corona,function(e){var r=e.context;return function(n){var t;return s.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.awrap(Object(c.a)(u.a.categoryQuery.coronaExcludedCategories,Object(p.c)(r)));case 3:t=e.sent,(t=t.data)&&n(Object(b.e)(i.a.FETCH_EXCLUDED_CATEGORIES,t.data.coronaExcludedCategories)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(l.a.error({title:"Error",message:"".concat(e.t0.toString())}));case 11:case"end":return e.stop()}},null,null,[[0,8]],o.a)}}),t={getCategories:function(a){return function(n){var t,r;return s.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u.a.categoryQuery.getCategories(a),e.next=4,s.a.awrap(Object(c.a)(t));case 4:if(200!==(r=e.sent).status||r.data.errors){e.next=14;break}if("logout"!==r.data.status){e.next=10;break}n(d.a.logout()),e.next=12;break;case 10:return n(Object(b.e)(i.a.FETCH_CATEGORIES_SUCCESS,r.data.data.categories)),e.abrupt("return",r.data.data.categories);case 12:e.next=15;break;case 14:n(Object(b.h)(r.data.errors));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),n(l.a.error({title:"Error",message:"".concat(e.t0.toString())}));case 20:case"end":return e.stop()}},null,null,[[0,17]],o.a)}},getExcludedCategories:function(e){var n=e.context,e=n.query;return f[e.slug]({context:n})}};n.a=t},cnO6:function(e,n,t){"use strict";t.d(n,"b",function(){return g}),t.d(n,"c",function(){return v}),t.d(n,"e",function(){return h}),t.d(n,"d",function(){return C}),t.d(n,"a",function(){return O});function o(e){return e.post.posts}function r(e){return e.post.trendingPosts}function s(e){return e.advertisement.adsPosts}function a(e){return e.auth.user}function i(e){return e.userComment.userHiddenPosts}function u(e){return e.userComment.userCreatePosts}function c(e){return e.profile.profile}function l(e,n){if(!n)return e;var t=[];return n&&e.map(function(e){var n=e.community;n&&!n.isAdult&&t.push(e)}),t}function d(e){var n=e.posts,t=e.sponsoredPosts,r=e.adPosition,a=e.userHiddenPosts,e=e.trendingPostPicked;return Object(m.mergePostWithAds)({posts:n,userHiddenPosts:a,sponsoredPosts:t,adPosition:r,trendingPostPicked:e})}var b=t("G4qV"),p=t("algg"),f=t("dguP"),m=t("LnZY"),g=function(){return Object(b.a)([o,a,i],function(e,n,t){if(!e||0===e.length)return[];n=Object(p.p)(n),n=l(e,!n);return d({posts:n,userHiddenPosts:t})})},v=function(){return Object(b.a)([o,a,c,u,i],function(e,n,t,r,a){if(!e||0===e.length)return[];n=Object(p.p)(n),n=l(e,!n);return(n=Object(m.mergePostWithAds)({posts:n,userCreatePosts:r,userHiddenPosts:a,currentUser:t?t.user:null}))&&0<n.length?n.sort(Object(f.m)("publishedAt")).reverse():[]})},h=function(){return Object(b.a)([r,i],function(t,e){return e&&0<e.length&&e.map(function(n){var e=t.findIndex(function(e){return e.id===n.id});0<=e&&t.splice(e,1)}),t})},C=function(r,a){return Object(b.a)([o,s,i],function(e,n,t){return d({posts:e,sponsoredPosts:a?[]:n,userHiddenPosts:t,adPosition:r})})},O=function(){return Object(b.a)([o,i],function(t,e){return e&&0<e.length&&e.map(function(n){var e=t.findIndex(function(e){return e.id===n.id});0<=e&&t.splice(e,1)}),t})}},gnED:function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a});var r=function(e,n){var t,r;if(e&&null!=e&&e.Mobile_Header&&null!=e&&e.Top_Header)return"google_ads_iframe_".concat("isMobile"===n?(null==e||null===(r=e.Mobile_Header)||void 0===r?void 0:r.adUnit)||"":(null==e||null===(t=e.Top_Header)||void 0===t?void 0:t.adUnit)||"","_0__container__")},a=function(e){var n=e.adsDetail,t=e.positionMobile,r=e.positionDesktop,e=e.env;if(n&&n[t]&&n[r])return"google_ads_iframe_".concat(e&&"isMobile"===e?n[t].adUnit||"":n[r].adUnit||"","_0__container__")}},vlRD:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t("RNiq")}])}},[["vlRD",1,0]]]);
