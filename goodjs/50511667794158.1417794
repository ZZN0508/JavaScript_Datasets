var formUtils={};!function(c){function n(e){e.change(function(){var e=c(this),t=e.parent();e.prop("checked")?t.addClass("checkbox-item-active"):t.removeClass("checkbox-item-active")})}function a(e){e=e.find('input[type="checkbox"]');e.prop("checked")?e.prop("checked",!1):e.prop("checked",!0),e.change()}function s(e){e.click(function(){a(c(this))})}function o(e){var t=[13,32];e.keypress(function(e){(-1<t.indexOf(e.code)||-1<t.indexOf(e.keyCode)||-1<t.indexOf(e.charCode))&&a(c(this))})}function r(e){var t=e.attr("name"),a=e.attr("type");if(!a&&e.is("select")&&(a="select"),!(t&&t.length&&a&&a.length))return"";if(f.filter(function(e){return-1<t.indexOf(e)}).length)return"";var i="form:"+a+":";return-1<t.indexOf("[]")?((a=e.attr("id")).length||console.error("No id attribute on field:",e),i+=a):i+=t,i}function l(e){e=r(e),e=e.length?localStorage.getItem(e):"";return e?JSON.parse(e):""}var i=["support","help","postmaster","noreply","no-reply","info"],u=["account[name]","account[help_desk_size]","industry"],d=["name","metrics.employees","category.subIndustry"];formUtils.registerMultiselectDropdownHandlers=function(){var t,e=c(".multiselect-container .dropdown-field"),a=c(".multiselect-container .dropdown-arrow"),i=c(".multiselect-container .checkbox-item"),r=c('.multiselect-container .checkbox-item input[type="checkbox"]');t=a,e.click(function(){var e=c(this).next(".multiselect-dropdown");e.is(":visible")?(e.hide(),t.removeClass("selected")):(e.show(),t.addClass("selected"))}),s(i),n(r),o(i)},formUtils.registerMulticheckboxQuestionHandlers=function(){var e=c(".multicheckbox-container .checkbox-item"),t=c('.multicheckbox-container .checkbox-item input[type="checkbox"]');s(e),n(t),o(e)};var f=["password","telesign","trialSelection"];formUtils.registerFieldHandlersToSaveInput=function(){function e(){var e=c(this),t=e.attr("name"),a=e.val(),i=l(e);t.length&&a!==i&&formUtils.isFieldValid(e)&&("radio"!==e.attr("type")||e.prop("checked"))&&((i=r(e)).length&&localStorage.setItem(i,JSON.stringify(a)),"account[help_desk_size]"===t&&("radio"===e.attr("type")?localStorage.setItem(i.replace("radio","select"),JSON.stringify(a)):"select"===e.attr("type")&&localStorage.setItem(i.replace("select","radio"),JSON.stringify(a))))}c("input, select").blur(e),c('input[type="checkbox"], input[type="radio"]').change(e)},formUtils.prepopulateFieldsFromLocalStorage=function(a){c("input, select").each(function(){var e=c(this);if("hidden"!==e.attr("type")){var t=l(e);return"radio"===e.attr("type")?void(e.val()===t&&(e.prop("checked",!0),a&&a(e))):void(t.length&&e.val()!==t&&(e.val(t),a&&a(e)))}})},formUtils.isFieldValid=function(e){var t,a=e.val(),i=e.is(U.password),r=e.is(U.accountSubdomain),n=e.is(U.accountName),s=e.is(U.firstName)||e.is(U.lastName)||e.is(U.fullName);return r?t="subdomain":n?t="company":i?t="password":s?t="name":e.is("select")?t="select":e.is(".js-multiselect")?(t="multiselect",a=!0):t=e.is("textarea")?"textarea":e.attr("type"),!(!a||!t)&&(t=t.charAt(0).toUpperCase()+t.slice(1),(t=formUtils["is"+t+"Valid"])&&t(a,e))},formUtils.isTextValid=function(e){return""!==e&&formUtils.utf8AlphaNum.test(e)},formUtils.isUrlValid=function(e){return""!==e&&formUtils.urlRegexp.test(e)},formUtils.isTextareaValid=function(e){return""!==e&&formUtils.utf8AlphaNum.test(e)};var m={supportAddress:"ERROR:InvalidEmailSupport"};formUtils.isEmailValid=function(e){return formUtils.isSupportEmail(e)?m.supportAddress:formUtils.emailRegexp.test(e)&&!formUtils.isSupportEmail(e)&&!formUtils.isZendeskInstanceEmail(e)},formUtils.isSelectValid=function(e){return!!e.length&&"-"!==e},formUtils.isMultiselectValid=function(e,t){return t.find('input[type="checkbox"]').is(":checked")},formUtils.isRadioValid=function(e,t){return t.parents("form").find('input[name="'+t.attr("name")+'"]').is(":checked")},formUtils.isPasswordValid=function(e,t){t=t.parents("form").find("[name=owner\\[email\\]]");return 5<=e.length&&e!==t.val()},formUtils.isTelValid=function(e){e=e.replace(/[^0-9]/g,"");return/^\d+$/.test(e)&&0<e.length&&e.length<16},formUtils.isNumberValid=function(e){return!isNaN(e)},formUtils.isCheckboxValid=function(e,t){return t.is(":checked")};var p={minLength:"ERROR:InvalidDomainMinLength",maxLength:"ERROR:InvalidDomainMaxLength",invalid:"ERROR:InvalidDomain",unavailable:"ERROR:DomainUnavailable",lookupFailed:"ERROR:DomainLookupFailed",generic:"ERROR:GenericError"},g="LOADING:WaitPlease",v="SUCCESS:ValidSubdomain";formUtils.isSubdomainValid=function(i,r){function n(e){return e?!1===e.available?p.unavailable:e.suggestion?(r.data(a,e.suggestion),r.data(t,e.suggestion),e.suggestion):(r.data(s,i),v):p.lookupFailed}var e=i.toLowerCase();r.val(e);var t="lastSuggestion",a="cachedSuggestions["+(i=e)+"]",s="cachedSuccessfulDomains["+i+"]",o=r.data(t),l=r.data(a),e=r.data(s);formUtils.SUBDOMAIN_REGEX=/[^a-zA-Z0-9\-]/g;return"true"===r.data("loading")?g:(formUtils.SUBDOMAIN_REGEX.test(i)&&r.val(i.replace(formUtils.SUBDOMAIN_REGEX,"")),i.length<3?p.minLength:63<i.length?p.maxLength:formUtils.SUBDOMAIN_REGEX.test(i)||-1<["zendesk","support","help","gmail","web-assets","web-assets-mirror"].indexOf(i)?p.invalid:l?n({suggestion:l}):i===o||e?v:(r.data("loading","true"),new Promise(function(t,a){c.ajax({url:"/wp-content/themes/zendesk-twentyeleven/lib/domain-check.php",type:"POST",data:{domain:i},cache:!1}).done(function(e){e=n(e);(e===v?t:a)(e)}).fail(function(e){a(p.lookupFailed)}).always(function(){r.data("loading",!1)})})))},formUtils.EMOJI_REGEX=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c\ude32-\ude3a]|[\ud83c\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,formUtils.COMPANY_REGEX=/^\u682a\u5f0f\u4f1a\u793e$/,formUtils.isCompanyValid=function(e,t){return formUtils.EMOJI_REGEX.test(e)&&(e=e.replace(formUtils.EMOJI_REGEX,""),t.val(e)),""!==e&&formUtils.utf8AlphaNum.test(e)&&!formUtils.COMPANY_REGEX.test(e)};var h={specialCharacters:"ERROR:InvalidNameSpecialChars"};formUtils.NAME_REGEX=/[0-9.\/$:@]/,formUtils.isNameValid=function(e){return formUtils.NAME_REGEX.test(e)?h.specialCharacters:formUtils.isTextValid(e)&&!formUtils.NAME_REGEX.test(e)},formUtils.isSupportEmail=function(e){for(var t=(e=e.toLowerCase()).split("@")[0],a=0;a<i.length;a++)if(t===i[a])return!0;return!1},formUtils.isZendeskInstanceEmail=function(e){return-1!==e.toLowerCase().indexOf(".zendesk.com")},formUtils.emailRegexp=/^((\"[^\"\f\n\r\t\v\b]+\")|([\.\w=\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+))@((\[(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))\])|(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))|((([A-Za-z0-9\-])+\.)+[A-Za-z\-]+))$/,formUtils.urlRegexp=/^(https?:\/\/|)[\w-]+\.[^ "]+$/i,formUtils.utf8AlphaNum=new RegExp("[ÂªÂµÂºÃ€-Ã–Ã˜-Ã¶Ã¸-ËË†-Ë‘Ë -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½Î†Îˆ-ÎŠÎŒÎŽ-Î¡Î£-ÏµÏ·-ÒÒŠ-Ô§Ô±-Õ–Õ™Õ¡-Ö‡×-×ª×°-×²Ø -ÙŠÙ®Ù¯Ù±-Û“Û•Û¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ’-Ü¯Ý-Þ¥Þ±ßŠ-ßªß´ßµßºà €-à •à šà ¤à ¨à¡€-à¡˜à¢ à¢¢-à¢¬à¤„-à¤¹à¤½à¥à¥˜-à¥¡à¥±-à¥·à¥¹-à¥¿à¦…-à¦Œà¦à¦à¦“-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§Žà§œà§à§Ÿ-à§¡à§°à§±à¨…-à¨Šà¨à¨à¨“-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©™-à©œà©žà©²-à©´àª…-àªàª-àª‘àª“-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬…-à¬Œà¬à¬à¬“-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­œà­à­Ÿ-à­¡à­±à®ƒà®…-à®Šà®Ž-à®à®’-à®•à®™à®šà®œà®žà®Ÿà®£à®¤à®¨-à®ªà®®-à®¹à¯à°…-à°Œà°Ž-à°à°’-à°¨à°ª-à°³à°µ-à°¹à°½à±˜à±™à± à±¡à²…-à²Œà²Ž-à²à²’-à²¨à²ª-à²³à²µ-à²¹à²½à³žà³ à³¡à³±à³²à´…-à´Œà´Ž-à´à´’-à´ºà´½àµŽàµ àµ¡àµº-àµ¿à¶…-à¶–à¶š-à¶±à¶³-à¶»à¶½à·€-à·†à¸-à¸°à¸²à¸³à¹€-à¹†àºàº‚àº„àº‡àºˆàºŠàºàº”-àº—àº™-àºŸàº¡-àº£àº¥àº§àºªàº«àº­-àº°àº²àº³àº½à»€-à»„à»†à»œ-à»Ÿà¼€à½€-à½‡à½‰-à½¬à¾ˆ-à¾Œá€€-á€ªá€¿á-á•áš-áá¡á¥á¦á®-á°áµ-á‚á‚Žá‚ -áƒ…áƒ‡áƒáƒ-áƒºáƒ¼-á‰ˆá‰Š-á‰á‰-á‰–á‰˜á‰š-á‰á‰ -áŠˆáŠŠ-áŠáŠ-áŠ°áŠ²-áŠµáŠ¸-áŠ¾á‹€á‹‚-á‹…á‹ˆ-á‹–á‹˜-áŒáŒ’-áŒ•áŒ˜-ášáŽ€-áŽáŽ -á´á-á™¬á™¯-á™¿áš-áššáš -á›ªáœ€-áœŒáœŽ-áœ‘áœ -áœ±á€-á‘á -á¬á®-á°áž€-áž³áŸ—áŸœá  -á¡·á¢€-á¢¨á¢ªá¢°-á£µá¤€-á¤œá¥-á¥­á¥°-á¥´á¦€-á¦«á§-á§‡á¨€-á¨–á¨ -á©”áª§á¬…-á¬³á­…-á­‹á®ƒ-á® á®®á®¯á®º-á¯¥á°€-á°£á±-á±á±š-á±½á³©-á³¬á³®-á³±á³µá³¶á´€-á¶¿á¸€-á¼•á¼˜-á¼á¼ -á½…á½ˆ-á½á½-á½—á½™á½›á½á½Ÿ-á½½á¾€-á¾´á¾¶-á¾¼á¾¾á¿‚-á¿„á¿†-á¿Œá¿-á¿“á¿–-á¿›á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â‚-â‚œâ„‚â„‡â„Š-â„“â„•â„™-â„â„¤â„¦â„¨â„ª-â„­â„¯-â„¹â„¼-â„¿â……-â…‰â…Žâ†ƒâ†„â°€-â°®â°°-â±žâ± -â³¤â³«-â³®â³²â³³â´€-â´¥â´§â´­â´°-âµ§âµ¯â¶€-â¶–â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·€-â·†â·ˆ-â·Žâ·-â·–â·˜-â·žâ¸¯ã€…ã€†ã€±-ã€µã€»ã€¼ã-ã‚–ã‚-ã‚Ÿã‚¡-ãƒºãƒ¼-ãƒ¿ã„…-ã„­ã„±-ã†Žã† -ã†ºã‡°-ã‡¿ã€-ä¶µä¸€-é¿Œê€€-ê’Œê“-ê“½ê”€-ê˜Œê˜-ê˜Ÿê˜ªê˜«ê™€-ê™®ê™¿-êš—êš -ê›¥êœ—-êœŸêœ¢-êžˆêž‹-êžŽêž-êž“êž -êžªêŸ¸-ê ê ƒ-ê …ê ‡-ê Šê Œ-ê ¢ê¡€-ê¡³ê¢‚-ê¢³ê£²-ê£·ê£»ê¤Š-ê¤¥ê¤°-ê¥†ê¥ -ê¥¼ê¦„-ê¦²ê§ê¨€-ê¨¨ê©€-ê©‚ê©„-ê©‹ê© -ê©¶ê©ºêª€-êª¯êª±êªµêª¶êª¹-êª½ê«€ê«‚ê«›-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬†ê¬‰-ê¬Žê¬‘-ê¬–ê¬ -ê¬¦ê¬¨-ê¬®ê¯€-ê¯¢ê°€-íž£íž°-íŸ†íŸ‹-íŸ»ï¤€-ï©­ï©°-ï«™ï¬€-ï¬†ï¬“-ï¬—ï¬ï¬Ÿ-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­€ï­ï­ƒï­„ï­†-ï®±ï¯“-ï´½ïµ-ï¶ï¶’-ï·‡ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½šï½¦-ï¾¾ï¿‚-ï¿‡ï¿Š-ï¿ï¿’-ï¿—ï¿š-ï¿œä¸€-é¾ ã-ã‚“ã‚¡-ãƒ´a-zA-Z0-9ï½-ï½šï¼¡-ï¼ºï¼-ï¼™ãƒ¼]+");var U={trialExtraFirstTouch:"input#trial_extras\\[First_Touch__c\\]",trialExtraLastTouch:"input#trial_extras\\[Last_Touch__c\\]",trialExtraTimeOnSite:"input#trial_extras\\[Time_On_Site__c\\]",trialExtraVisits:"input#trial_extras\\[Visits__c\\]",trialExtraPageviews:"input#trial_extras\\[Visits__c\\]",trialExtraWebOffer:"input#trial_extras\\[Web_Offer__c\\]",trialExtraWebOfferName:"input#trial_extras\\[Web_Offer_Name__c\\]",legacyTrialExtraCountryCode:"input#trial_extras\\[DB_CCode__c\\]",legacyTrialExtraCountry:"input#trial_extras\\[Country__c\\]",legacyTrialExtraState:"input#trial_extras\\[DB_State__c\\]",legacyTrialExtraCity:"input#trial_extras\\[DB_City__c\\]",legacyTrialExtraZip:"input#trial_extras\\[DB_Zip__c\\]",legacyTrialExtraRegion:"input#trial_extras\\[Region__c\\]",mailingCountry:"input#MailingCountry",trialExtraCountryCode:"input#trial_extras\\[Inferred_CCode\\]",trialExtraCountry:"input#trial_extras\\[Inferred_Country\\]",trialExtraState:"input#trial_extras\\[Inferred_State\\]",trialExtraCity:"input#trial_extras\\[Inferred_City\\]",trialExtraZip:"input#trial_extras\\[Inferred_Zip\\]",trialExtraRegion:"input#trial_extras\\[Inferred_Region\\]",trialExtraIPAddress:"input#trial_extras\\[Inferred_IP_Address\\]",locationIPAddress:"input#location\\[Inferred_IP_Address\\]",accountName:"input#account\\[name\\]",accountHelpDeskSize:"input#account\\[help_desk_size\\]",accountSubdomain:"input#account\\[subdomain\\]",industry:"input#\\[industry\\]",addressPostal:"input#address\\[postal\\]",password:"input#owner\\[password\\]",email:"input#owner\\[email\\]",firstName:"input#FirstName",lastName:"input#LastName",fullName:"input#owner\\[name\\]"},b=!1;formUtils.setMAVs=function(e){if(b)return formUtils.setGeoByIP();var t=cookieUtils.gauge()||{};return c(U.trialExtraFirstTouch).val(t.first_landing_page),c(U.trialExtraLastTouch).val(t.last_landing_page),c(U.trialExtraTimeOnSite).val(t.time_on_site),c(U.trialExtraVisits).val(t.visits),c(U.trialExtraPageviews).val(t.page_views),e&&(c(U.trialExtraWebOffer).val("Trial"),c(U.trialExtraWebOfferName).val("Trial")),cookieUtils.parseCookies(),b=!0,formUtils.setGeoByIP()},formUtils.convertMaxMindCountryName=function(e){var t={Brunei:"Brunei Darussalam","Cabo Verde":"Cape Verde",Czechia:"Czech Republic","Democratic Republic of Timor-Leste":"Timor-Leste","Hashemite Kingdom of Jordan":"Jordan",Iran:"Iran, Islamic Republic of","Ivory Coast":"Cote d'Ivoire",Laos:"Lao People's Democratic Republic",Libya:"Libyan Arab Jamahiriya",Macedonia:"Macedonia, the former Yugoslav Republic of",Palestine:"Palestinian Territory, Occupied","Puerto Rico":"United States","Republic of Korea":"Korea, Republic of","South Korea":"Korea, Republic of","Republic of Lithuania":"Lithuania","Republic of Moldova":"Moldova, Republic of","RÃ©union":"Reunion",Russia:"Russian Federation","Saint Martin":"Sint Maarten","St Kitts and Nevis":"Saint Kitts and Nevis",Syria:"Syrian Arab Republic",Tanzania:"Tanzania, United Republic of","U.S. Virgin Islands":"United States",Vietnam:"Viet Nam"};return e in t?t[e]:e},formUtils.setGeoByIP=function(){return new Promise(function(t,a){geoUtils.getGeoData().then(function(e){return e.country=formUtils.convertMaxMindCountryName(e.country),e}).then(function(e){c(U.legacyTrialExtraCountryCode).val(e.country_code),c(U.legacyTrialExtraCountry).val(e.country),c(U.legacyTrialExtraState).val(e.state),c(U.legacyTrialExtraCity).val(e.city),c(U.legacyTrialExtraZip).val(e.postal),c(U.legacyTrialExtraRegion).val(e.region),c(U.mailingCountry).val(e.country),c(U.trialExtraCountryCode).val(e.country_code),c(U.trialExtraCountry).val(e.country),c(U.trialExtraState).val(e.state),c(U.trialExtraCity).val(e.city),c(U.trialExtraZip).val(e.postal),c(U.trialExtraRegion).val(e.region),c(U.trialExtraIPAddress).val(e.ipAddress),c(U.locationIPAddress).val(e.ipAddress),c(U.addressPostal).val(e.postal),e.error&&(c(U.legacyTrialExtraCountryCode).val("US"),c(U.trialExtraCountryCode).val("US"),c(U.legacyTrialExtraCountry).val("United States"),c(U.trialExtraCountry).val("United States"),c(U.mailingCountry).val("United States")),t(e)}).catch(function(e){a()})})},formUtils.prepopulatePostalCodeField=function(t){formUtils.setMAVs(!1).then(function(e){t.val(e.postal),t.attr("data-postal",e.postal),t.change()}).catch(function(){})},formUtils.showPostalIfBlank=function(){$fieldWrap=c(".js-field-wrap-postal"),formUtils.setMAVs(!1).then(function(e){e.postal||$fieldWrap.removeClass("field-wrap-postal")}).catch(function(e){$fieldWrap.removeClass("field-wrap-postal")})},formUtils.prepopulateCountryField=function(t){formUtils.setMAVs(!1).then(function(e){t.val(e.country),t.change()}).catch(function(){})},formUtils.prepopulateLanguageField=function(e){var t=geoUtils.domainLanguage();0===e.find('option[value="'+t+'"]').length&&(t="en-us"),e.val(t),e.change()},formUtils.scrollToError=function(e){var t=c(".js-sticky-container").outerHeight(),e=e.find(".js-field-error.field-error-active").first().parents(".js-field-wrap");c("html, body").animate({scrollTop:e.offset().top-(t+10)},500)},formUtils.renderValidationState=function(e){var t=formUtils.isFieldValid(e),a=e.attr("type");return e.is(U.firstName)||e.is(U.lastName)?formUtils.renderNameValidationState(e,t):e.is(U.email)?formUtils.renderEmailValidationState(e,t):e.is(U.accountSubdomain)?formUtils.renderSubdomainValidationState(e,t):(t?formUtils.toggleUserMessage(e,!1):formUtils.toggleUserMessage(e,!0),"select"===a&&(t?e.css("color","#3d5154"):e.css("color","#809295")),t)},formUtils.renderNameValidationState=function(e,t){return"string"==typeof t||!1===t?formUtils.handleNameError(e,t):(formUtils.toggleUserMessage(e,!1,"message"),formUtils.toggleUserMessage(e,!1),!0)},formUtils.handleNameError=function(e,t){var a=e.parents(".js-field-wrap");return formUtils.toggleUserMessage(e,!1),formUtils.toggleUserMessage(e,!1,"message"),a=t===h.specialCharacters?a.find(".js-field-error.js-invalid-name-special-characters"):a.find(".js-field-error.js-generic-name-error"),formUtils.toggleUserMessage(e,!0,"error",a),!1},formUtils.renderEmailValidationState=function(e,t){return"string"==typeof t||!1===t?formUtils.handleEmailError(e,t):(formUtils.toggleUserMessage(e,!1,"message"),formUtils.toggleUserMessage(e,!1),!0)},formUtils.handleEmailError=function(e,t){var a=e.parents(".js-field-wrap");return formUtils.toggleUserMessage(e,!1),formUtils.toggleUserMessage(e,!1,"message"),a=t===m.supportAddress?a.find(".js-field-error.js-invalid-email-support-address"):a.find(".js-field-error.js-generic-email-error"),formUtils.toggleUserMessage(e,!0,"error",a),!1},formUtils.renderSubdomainValidationState=function(t,e){return"function"==typeof e.then?(e.then(function(e){return formUtils.handleSubdomainValidation(t,e)}).catch(function(e){return formUtils.handleSubdomainError(t,e)}),!1):"string"==typeof e?e===v?formUtils.handleSubdomainValidation(t,e):formUtils.handleSubdomainError(t,e):"boolean"!=typeof e||e?void 0:formUtils.handleSubdomainError(t)},formUtils.toggleUserMessage=function(e,t,a,i){var r;e.hasClass("js-optional")||(r=e.parents(".js-field-wrap"),a=a||"error",i=i||r.find(".js-field-"+a),t?(e.addClass("field-"+a+"-active"),r.removeClass("field-validated js-field-validated"),i&&i.addClass("field-"+a+"-active")):(e.removeClass("field-"+a+"-active"),r.addClass("field-validated js-field-validated"),i&&i.removeClass("field-"+a+"-active")))},formUtils.handleSubdomainValidation=function(e,t){return formUtils.toggleUserMessage(e,!1,"message"),formUtils.toggleUserMessage(e,!1),!0},formUtils.handleSubdomainError=function(e,t){var a,i,r=e.parents(".js-field-wrap");if(formUtils.toggleUserMessage(e,!1),formUtils.toggleUserMessage(e,!1,"message"),t&&-1===(i=p,Object.keys(i).map(function(e){return i[e]}).indexOf(t))){var n=r.find(".js-field-message.js-loading");return t!==g&&(e.val(t),n=r.find(".js-field-message.js-suggestion")),formUtils.toggleUserMessage(e,!0,"message",n),!1}switch(t){case p.minLength:a=r.find(".js-field-error.js-invalid-domain-min-length");break;case p.maxLength:a=r.find(".js-field-error.js-invalid-domain-max-length");break;case p.invalid:a=r.find(".js-field-error.js-invalid-domain");break;case p.unavailable:a=r.find(".js-field-error.js-unavailable-domain");break;case p.lookupFailed:a=r.find(".js-field-error.js-domain-lookup-failed");break;default:a=r.find(".js-field-error.js-generic-error")}return formUtils.toggleUserMessage(e,!0,"error",a),!1},formUtils.defaultInlineValidation=function(e,a){var i,r;(a=a||!1)&&(r=function(){a.container.removeClass("active"),a.container.find(".field-error-active").removeClass("field-error-active"),c.each(a.fields,function(){c(this).val("")})});e.find("select").each(function(e,t){""!==c(t).val()?c(t).css("color","#3d5154"):c(t).css("color","#809295")}),e.on("blur change",'input[name!="owner[email]"].required, textarea.required, select.required, checkbox.required, select.js-optional',function(){var e=c(this);"active"!==e.attr("data-state")&&e.attr("data-state","active"),formUtils.renderValidationState(e)}).on("focus","input.required, textarea.required, select.required, checkbox.required, select.js-optional",function(){var e=c(this);"active"!==e.attr("data-state")&&e.attr("data-state","active")}).on("blur change",'input[name="owner[email]"].required',function(){var e=c(this),t=e.val();formUtils.renderValidationState(e)&&("active"!==e.attr("data-state")&&e.attr("data-state","active"),a&&(i?i.substring(i.lastIndexOf("@")+1)!==t.substring(i.lastIndexOf("@")+1)&&r():i=t))}),formUtils.prepopulateErrorMessages(e)},formUtils.prepopulateErrorMessages=function(e){var t=e.find(".js-disallowed-emails"),e=i.join(", ");t.text(e)},formUtils.autofocusFirstField=function(e){var t=e.find("input:visible").first(),e=window.breakpoints?window.breakpoints.small:768;window.innerWidth>e&&t.focus()},formUtils.preflightValidate=function(e){return!!formUtils.allFieldsValid(e,!0)},formUtils.allFieldsValid=function(e,t){for(var a,i,r=e.find(".required").filter(":visible"),n=0,s=[],o=0;o<r.length;o++,n++){var l=!1;(l=t?formUtils.renderValidationState(c(r[o])):formUtils.isFieldValid(c(r[o])))&&"function"==typeof l.then?l.then(function(){s.push(!0)}).catch(function(){s.push(!1)}):!0===l&&s.push(l),o===n&&(a=!0)}return i=s.length===n,!0===a&&!0==i||(t&&webutils.isMobile()&&formUtils.scrollToError(e),!1)},formUtils.preflightEnrich=function(e,t){return formUtils.enrichmentCheck(e,t).then(function(e){return e.isPersonalEmail?webutils.track({siteCategory:"Clearbit",eventName:"UsingPersonalEmail"}):webutils.track({siteCategory:"Clearbit",eventName:"UsingCompanyEmail"}),formUtils.verifyEnrichment(e,t)}).then(function(e){return e}).catch(function(e){console.error(e)})},formUtils.enrichmentCheck=function(t,n){return new Promise(function(a,i){var r=(new Date).getTime(),e=n?"&returndata=true":"";c.ajax({url:webutils.appUrl("v2/email-info.json?email="+encodeURIComponent(t)+e),dataType:"json",success:function(e){var t=(new Date).getTime(),t=Math.round((t-r)/1e3*2)/2;webutils.track({siteCategory:"Clearbit",eventName:"RequestTime",value:{requestTime:t}}),a(e)},error:function(e,t,a){t&&webutils.track({siteCategory:"Clearbit",eventName:"RequestError",value:{error:t}}),i()}})})},formUtils.verifyEnrichment=function(a,i){var r=[],n=!1;return new Promise(function(e,t){i&&e(a),d.forEach(function(e){-1===a.fields.indexOf(e)&&r.push(!1)}),e(n=-1===r.indexOf(!1)?!0:n)})},formUtils.setFullNameField=function(e){e={firstName:e.find(U.firstName),lastName:e.find(U.lastName),fullName:e.find(U.fullName)};e.firstName&&e.lastName&&e.fullName&&e.fullName.val(e.firstName.val()+" "+e.lastName.val())},formUtils.handleMultiSelects=function(e){e=e.find(".js-multiselect");e.length&&e.each(function(){var e=c(this).find(".js-multiselect-hidden"),t=[];c(this).find("input:checked").each(function(){t.push(c(this).val())}),e.val(t.join(","))})},formUtils.handleSubmissionResult=function(e){if(e.successRedirect&&e.resultMessage.hasClass("js-success-message"))window.location.href=e.successRedirect;else{e.fieldContainer.addClass("hidden"),e.loadingMessage.removeClass("active"),e.hideCustomElements.hide(),e.resultMessage.addClass("active").trigger("submissionResultMessageActiveClassAdded");try{var t=new Event("lead-result-message");e.resultMessage[0].dispatchEvent(t)}catch(e){console.error(e)}}},formUtils.trackFormSubmission=function(e){var t,a,i,r,n;e&&(t=e.trackingSiteCategory||"",a=e.trackingEventName||"",i=e.trackingValueDataKey||"",r=e.trackingValueDataValue||"",n=e.dataLayerEventName||"","error"===e.status&&(a+="Failed"),t&&a&&(e={},i&&r&&(e[i]=r),webutils.track({siteCategory:t,eventName:a,value:e})),n&&dataLayer.push({event:n}))},formUtils.regionalFieldDisplay=function(e,t){geoUtils.isUserInRegion("LATAM").then(function(e){e&&(t.jobTitle&&t.jobTitle.addClass("active"),t.department&&t.department.addClass("active"))}).catch(function(e){console.error(e)}),geoUtils.isUserInContinentCountry("AS","IN").then(function(e){e&&t.jobTitle&&t.jobTitle.addClass("active")}).catch(function(e){console.error(e)}),geoUtils.isUserInContinentCountry("AS","JP").then(function(e){e&&(t.firstName&&t.lastName&&(t.lastName.remove(),t.lastName.insertBefore(t.firstName)),t.jobTitle&&t.jobTitle.addClass("active"),t.department&&t.department.addClass("active"))}).catch(function(e){console.error(e)})},formUtils.createLeadAndHandleDisplay=function(t){var e=t.form,a=(t.trackingParams,e.find(".js-field-container")),i=e.find(".js-loading"),r=e.find(".js-success-message"),n=e.find(".js-error-message"),s=c(".js-hide-after-process");e.find('input[name="elqFormName"]').val(),i.addClass("active");var o={fieldContainer:a,loadingMessage:i,hideCustomElements:s,successRedirect:t.successRedirect,resultMessage:""};formUtils.createLead(t).then(function(e){o.resultMessage=r,"function"==typeof t.successCallback&&t.successCallback(e)}).catch(function(e){o.resultMessage=n,"function"==typeof t.failureCallback&&t.failureCallback(e)}).then(function(){formUtils.postToDetailsBasic(e),formUtils.handleSubmissionResult(o),"function"==typeof t.alwaysCallback&&t.alwaysCallback()})},formUtils.postToDetailsBasic=function(a){var e,t=0,i=a.find('input[name="owner[email]"]').val(),r=JSON.stringify({email:i,optIn:function(){var e=a.find('input[name="optinToMarketing"]'),t=!1;switch(e.attr("type")){case"radio":t=e.filter(":checked").val();break;case"checkbox":t=e.prop("checked");break;default:t=!1}return t}()});(e=function(){c.ajax({url:webutils.appUrl("details-basic.json"),contentType:"application/json",data:r,type:"POST"}).done(function(){try{window.localStorage&&document.cookie.length&&window.localStorage.setItem("postedDetailsBasic",(new Date).getTime())}catch(e){}}).fail(function(){if(++t<=2)return e()})})()},formUtils.createLead=function(e){var i,r=e.form,n=e.trackingParams,t=e.clearbitFields||u;return formUtils.setFullNameField(r),formUtils.handleMultiSelects(r),i=e.enrich?r.serialize()+"&enrich="+JSON.stringify(t):r.serialize(),new Promise(function(t,a){c.post(webutils.appUrl("v3/lead"),i).done(function(e){n&&(n.status="success",formUtils.trackFormSubmission(n)),formUtils.identifyFormUser(r),t(e)}).fail(function(e){n&&(n.status="error",formUtils.trackFormSubmission(n)),webutils.postToEloqua(e.responseJSON),a()})})},formUtils.identifyFormUser=function(e){var t=webutils.detectBrowser(),t={email:e.find('input[name="owner[email]"]').val(),city:e.find(U.trialExtraCity).val(),country:e.find(U.trialExtraCountry).val(),ga_id:c.cookie("_ga"),browser_name:t.name,browser_version:t.version};analytics.identify(t)},formUtils.submitContactTicket=function(a){return new Promise(function(t,e){c.post(webutils.appUrl("contact"),a.serialize()).done(function(e){t(e)}).fail(function(){e()})})},formUtils.populateHiddenFields=function(e){e&&(e.referrer&&e.referrer.val(encodeURI(document.referrer).split(/[?#]/)[0]),e.pageUrl&&e.pageUrl.val(encodeURI(document.location).split(/[?#]/)[0]),e.RVaccount&&e.RVaccount.val(-1!==webutils.getParameterByName("rv_account")?webutils.getParameterByName("rv_account"):""),e.RVmember&&e.RVmember.val(-1!==webutils.getParameterByName("rv_member")?webutils.getParameterByName("rv_member"):""),e.partnerAccount&&e.partnerAccount.val(-1!==webutils.getParameterByName("partner_account")?webutils.getParameterByName("partner_account"):""),e.partnerContact&&e.partnerContact.val(-1!==webutils.getParameterByName("partner_contact")?webutils.getParameterByName("partner_contact"):""))},formUtils.populateUtmFields=function(){["utm_source","utm_medium"].forEach(function(e){var t,a=c('form input[type="hidden"][name="'+e+'"]');!a.length||(t=webutils.getParameterByName(e))&&-1!=t&&a.each(function(){c(this).val()||c(this).val(t)})})},formUtils.resetForm=function(e){e&&(e.find(".js-field-container").removeClass("hidden"),e.trigger("reset"),e.find("select").each(function(){c(this)[0].selectedIndex=0}),e.find(".field-error-active").removeClass("field-error-active"),e.find(".js-success-message").removeClass("active"),e.find(".js-error-message").removeClass("active"),e.find(".js-loading").removeClass("active"))},formUtils.registerGateHandler=function(e){var t,a,i;e&&(t=webutils.getURLParameter("ungated"),a=e.find(".js-field-container"),i=e.find(".js-success-message"),t&&("true"===t?(webutils.track({siteCategory:"UngatedContent",eventName:"Download"}),a.addClass("hidden"),i.addClass("active")):a.hasClass("hidden")&&(a.removeClass("hidden"),i.removeClass("active"))))},formUtils.registerTimeOnForm=function(a,e){function t(){var e=(new Date).getTime(),t=e-i;formUtils.setFieldValue("timeStarted",i,a),formUtils.setFieldValue("timeEnded",e,a),formUtils.setFieldValue("timeDelta",t,a)}var i,r;a&&(i=0,(r=a.find("input:not([type=hidden])")).one("propertychange change click keyup input paste",function e(){i=0===i?(new Date).getTime():i,r.off("propertychange change click keyup input paste",e)}),e?e.click(t):a.submit(t))},formUtils.setFieldValue=function(e,t,a){a.find("input[name="+e+"]").val(t)},formUtils.getCSRFToken=function(){return new Promise(function(i){c.ajax({url:webutils.appUrl("lotusassets.json"),type:"GET",cache:!1}).done(function(e,t,a){a=a.getResponseHeader("Token");i(a)})})}}(jQuery);
