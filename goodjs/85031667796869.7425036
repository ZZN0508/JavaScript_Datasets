!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof defines&&defines.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).webVitals={})}(this,function(e){"use strict";function r(e,t){return{name:e,value:1<arguments.length&&void 0!==t?t:-1,delta:0,entries:[],id:"".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),isFinal:!1}}function d(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(e){return e.getEntries().map(t)});return n.observe({type:e,buffered:!0}),n}}catch(e){}}function n(e){i=!e.persisted}function c(t,e){e=1<arguments.length&&void 0!==e&&e;a||(addEventListener("pagehide",n),addEventListener("beforeunload",function(){}),a=!0),addEventListener("visibilitychange",function(e){e=e.timeStamp,"hidden"===document.visibilityState&&t({timeStamp:e,isUnloading:i})},{capture:!0,once:e})}function l(e,t,n,i){var a;return function(){n&&t.isFinal&&n.disconnect(),0<=t.value&&(i||t.isFinal||"hidden"===document.visibilityState)&&(t.delta=t.value-(a||0),(t.delta||t.isFinal||void 0===a)&&(e(t),a=t.value))}}function u(){return void 0===t&&(t="hidden"===document.visibilityState?0:1/0,c(function(e){return e=e.timeStamp,t=e},!0)),{get timeStamp(){return t}}}var t,g,i=!1,a=!1;e.getCLS=function(e){function t(e){e.hadRecentInput||(a.value+=e.value,a.entries.push(e),n())}var n,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=r("CLS",0),s=d("layout-shift",t);s&&(n=l(e,a,s,i),c(function(e){e=e.isUnloading,s.takeRecords().map(t),e&&(a.isFinal=!0),n()}))},e.getFCP=function(e){var t,n=r("FCP"),i=u(),a=d("paint",function(e){"first-contentful-paint"===e.name&&e.startTime<i.timeStamp&&(n.value=e.startTime,n.isFinal=!0,n.entries.push(e),t())});a&&(t=l(e,n,a))},e.getFID=function(e){function t(e){e.startTime<i.timeStamp&&(n.value=e.processingStart-e.startTime,n.entries.push(e),n.isFinal=!0,s())}var n=r("FID"),i=u(),a=d("first-input",t),s=l(e,n,a);a?c(function(){a.takeRecords().map(t),a.disconnect()},!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay(function(e,t){t.timeStamp<i.timeStamp&&(n.value=e,n.isFinal=!0,n.entries=[{entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e}],s())})},e.getLCP=function(e){function t(e){var t=e.startTime;t<s.timeStamp?(a.value=t,a.entries.push(e)):a.isFinal=!0,n()}var n,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=r("LCP"),s=u(),o=d("largest-contentful-paint",t);o&&(n=l(e,a,o,i),i=function(){a.isFinal||(o.takeRecords().map(t),a.isFinal=!0,n())},(g=g||new Promise(function(t){return["scroll","keydown","pointerdown"].map(function(e){addEventListener(e,t,{once:!0,passive:!0,capture:!0})})})).then(i),c(i,!0))},e.getTTFB=function(t){function e(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var e,t=performance.timing,n={entryType:"navigation",startTime:0};for(e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n}();n.value=n.delta=e.responseStart,n.entries=[e],n.isFinal=!0,t(n)}catch(e){}}var n=r("TTFB");"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)},Object.defineProperty(e,"__esModule",{value:!0})}),webMDTracker={settings:{ads:["101","113","121","137","2025","2026","infinite-ad"],percentTracked:{},refresh:!1},init:function(){this.checkDebug(),this.getEnviroment(),this.getDeviceType(),this.getDmaId(),this.setupWebVitals(),this.setupPvEvents(),this.setupGoogleAdEvents()},checkDebug:function(){var e=!1;"URLSearchParams"in window&&"debug"===new URLSearchParams(window.location.search).get("webmdtracker")&&(e=!0),this.debug=e},log:function(e){window.console&&window.console.log("WebMD Tracker Debugger: "+e)},getEnviroment:function(){var e=(e=window.location.hostname,t=new RegExp("[a-z-0-9]{2,63}.[a-z.]{2,5}$").exec(e),e.replace(t[0],"").slice(0,-1)),t="live";-1<e.indexOf("preview")?t="preview":-1<e.indexOf("staging")?t="staging":-1<e.indexOf("qa")?t="qa":(-1<e.indexOf("devint")||-1<window.location.hostname.indexOf("localhost"))&&(t="devint"),this.env=t,this.debug&&this.log("Enviroment set as "+this.env)},getDmaId:function(){try{var e=function(){for(var e="gtinfo=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}();e?(e=JSON.parse(e),this.dma=e.dma):this.dma=""}catch(e){this.dma=""}},getDeviceType:function(){var e=window.innerWidth;this.ua=e<768?"mobile":(768<e||768===e)&&(e<1024||1024===e)?"tablet":"desktop",this.debug&&this.log("Device is set as: "+this.ua)},callWebmdBeacon:function(e){var t=this,n={type:"",sid:"-1",event:"PageLoad",percent:"",measure:0};""===(n=Object.assign(n,e)).type&&(t=window.webMDTracker);var i=new Image,a=Math.floor(100*Math.random()),s=window.s_pagename||"",o=window.s_asset_id||"",r=window.s_tug||"",d=window.s_business_reference.replace(/\s/g,""),c=window.s_md&&void 0!==window.s_md.prop9&&""!==window.s_md.prop9?window.s_md.prop9.toString():"1",l=window.s_pageview_id||"",u=window.s_test||window.s_test1||"",g="",m=window.s_site||"",p=void 0!==window.__INITIAL_STATE__?"vjs":"leg",w=t.settings.refresh?"1":"-1",f="",v="",h=!0,b="",y="",e=window.location.host.replace("www.","")+window.location.pathname||"";switch(t.env){case"devint":case"qa":case"preview":g="preview.";break;case"staging":g="staging.";break;default:g=""}""!==n.type?(0!==n.measure&&(b="&wcbMeasure="+n.measure),f="//www."+g+"webmd.com/static/v/c?site="+m+"&wcbType="+p+"&aid="+o+"&tugid="+r+"&dmaid="+t.dma+"&busref="+d+"&pagenumber="+c+"&requestid="+l+"&pagename="+s+"&type="+n.type+"&sid="+n.sid+"&event="+n.event+"&testid="+u+"&percent="+n.percent+"&refresh="+w+"&ua="+t.ua+"&env="+t.env+b+"&wcbPagename="+e):(v=Math.round("CLS"===n.name?1e3*n.delta:n.delta).toString(),"TTFB"===n.name&&(v=(n.value-n.entries[0].requestStart).toString()),"LCP"===n.name&&(y=n.entries[n.entries.length-1].element)&&(y=y.innerText||y.outerHTML,y=encodeURIComponent(y.slice(0,50))),f="//www."+g+"webmd.com/static/v/c?site="+m+"&wcbType="+p+"&aid="+o+"&tugid="+r+"&dmaid="+t.dma+"&busref="+d+"&pagenumber="+c+"&requestid="+l+"&pagename="+s+"&type=cwv&sid="+n.id+"&wcbMeasure="+v+"&event="+n.name+"&testid="+u+"&percent="+n.percent+"&refresh="+w+"&ua="+t.ua+"&env="+t.env+"&wcbUa="+y+"&wcbPagename="+e,"0"===v&&(h=!1)),h&&(window.navigator.sendBeacon?window.navigator.sendBeacon(f):(i.src=f,i.id="webmd-tracking-pixel-"+n.type+"-"+a,i.style.display="none",window.document.body.appendChild(i)),this.debug&&this.log("Fired tacking call for this event "+n.event+" this information: "+f))},setupWebVitals:function(){var e=this;function t(){window.webVitals.getCLS(e.callWebmdBeacon),window.webVitals.getFCP(e.callWebmdBeacon),window.webVitals.getFID(e.callWebmdBeacon),window.webVitals.getLCP(e.callWebmdBeacon),window.webVitals.getTTFB(e.callWebmdBeacon)}"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?t():window.addEventListener("DOMContentLoaded",function(){t()})},setupPvEvents:function(){var e=this;function t(){e.callWebmdBeacon({type:"Page"}),e.debug&&e.log("Fired intial PV call!")}try{void 0!==window.__INITIAL_STATE__?(this.debug&&this.log("SetUp PV events for VueJS page"),window.biConsumerIsReady&&(this.debug&&this.log("Initial PV already fired on VueJS so going to fire our tracking PV"),t()),window.document.addEventListener("onAdobeOmniBeforePv",function(){this.debug&&e.log("PV event for VueJS page fired"),t()})):window.jQuery&&(this.debug&&this.log("SetUp PV events for Legacy page"),$(document).on("before_pv",function(){e.debug&&e.log("PV event for Legacy page fired"),t()}))}catch(e){}},setupGoogleAdEvents:function(){var a=this;function s(e){for(var t=a.settings.ads,n="",i=0;i<t.length;i++)-1<e.indexOf(t[i])&&(n=t[i]);return"infinite-ad"===n?"2026":n}window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){googletag.pubads().addEventListener("slotOnload",function(e){var t=s(e.slot.getSlotElementId()),e=!1;""!==t&&(window.performance.mark(t+"_slotOnload"),0<window.performance.getEntriesByName(t+"_slotRenderEnded").length&&(e=!0,window.performance.measure(t+"_measure-slotOnload",t+"_slotRenderEnded",t+"_slotOnload")),a.callWebmdBeacon({type:"Ad",sid:t,event:"slotOnload",measure:e?window.performance.getEntriesByName(t+"_measure-slotOnload","measure")[0].duration:0}))}),googletag.pubads().addEventListener("slotRenderEnded",function(e){var t=s(n=e.slot.getSlotElementId()),e=window.document.getElementById(n),n=!1;a.settings.refresh.count+=1,e.classList.contains("trck1")&&!a.settings.refresh&&(a.settings.refresh=!0),""!==t&&(window.performance.mark(t+"_slotRenderEnded"),0<window.performance.getEntriesByName("page-load").length&&(n=!0,window.performance.measure(t+"_measure-slotRenderEnded","page-load",t+"_slotRenderEnded")),a.callWebmdBeacon({type:"Ad",sid:t,event:"slotRenderEnded",measure:n?window.performance.getEntriesByName(t+"_measure-slotRenderEnded","measure")[0].duration:0}),a.debug&&a.log("slotRenderEnded event fired for slot "+t)),e.classList.add("trck1")}),googletag.pubads().addEventListener("impressionViewable",function(e){var t=e.slot.getSlotElementId(),n=s(t),i="",e=!1;""!==n&&(window.performance.mark(n+"_impressionViewable"),0<window.performance.getEntriesByName("page-load").length&&(e=!0,window.performance.measure(n+"_measure-impressionViewable","page-load",n+"_impressionViewable")),-1<a.settings.percentTracked[t]&&(i=a.settings.percentTracked[t]+"pct"),a.callWebmdBeacon({type:"Ad",sid:n,event:"impressionViewable",percent:i,measure:e?window.performance.getEntriesByName(n+"_measure-impressionViewable","measure")[0].duration:0}),a.debug&&a.log("impressionViewable event fired for slot "+n+" and percent viewable is at "+i))}),googletag.pubads().addEventListener("slotVisibilityChanged",function(e){var t=e.slot.getSlotElementId(),n=e.inViewPercentage,i=window.document.getElementById(t);""!==(e=s(t))&&(a.settings.percentTracked[t]=n,a.handleInViewPercent(i,n,e))})})},handleInViewPercent:function(e,t,n){var i=this;function a(e){i.callWebmdBeacon({type:"Ad",sid:n,event:"slotVisibilityChanged",percent:e})}t<25?e.classList.contains("trck25pct")||e.classList.contains("trck100pct")||(e.classList.add("trck25pct"),a("25pct")):25<t&&t<50?e.classList.contains("trck50pct")||e.classList.contains("trck100pct")||(e.classList.add("trck50pct"),a("50pct")):50<t&&t<75?e.classList.contains("trck75pct")||e.classList.contains("trck100pct")||(e.classList.add("trck75pct"),a("75pct")):75<t&&t<=100&&(e.classList.contains("trck100pct")||(e.classList.add("trck100pct"),a("100pct")))}},webMDTracker.init();
