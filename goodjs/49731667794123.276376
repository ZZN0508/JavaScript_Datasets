var b$=b$||{};b$.universal=b$.universal||{},b$.universal.widgets=b$.universal.widgets||{},b$.universal.widgets.StructuredContentHeroCarousel=function(u){"use strict";define("hero-carousel",function(n,e,t){u(document).ready(function(){u(".be-hero-buttons").on("click",function(){var e,t,r,n,o,a,s;b$.portal.isGapDisabled()||b$.portal.isLogin||(e=u("ul.slick-dots").find("li.slick-active").index(),t=u(this).parent(".be-ex-carousel-content").find(".be-ex-sub-title").text(),r=u(".be-ex-hero-carousel.slick-slide.slick-current.slick-active").find(".btn.btn-md").text(),n=document.referrer,o=window.location.href,a=u(".header-menu .navbar-collapse ul.navbar-nav > li.active").text(),s=b$.portal.typeOfDevice(),dataLayer.push({bannerposition:e,bannername:t,buttonselection:r,referral:n,userID:"null","Page path":o,deviceType:s,userType:"null",event:"bannertracking","Page Section":a}))})}),t.exports={herocarousel:function(e,t,r){u.ajax({url:t,success:function(e){u("head").append('<link rel="stylesheet" href="'+r+'/static/features/%5BBBHOST%5D/feature-hdfc-slick-slider/css/slick.css" type="text/css">'),n(["features/%5BBBHOST%5D/feature-hdfc-slick-slider/scripts/slick"],function(){u(".hero-carousel-container").slick({infinite:!0,dots:!0,speed:500,arrows:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:e.transitionSpeed,variableWidth:!0,responsive:[{breakpoint:959,arrows:!1,settings:{arrows:!1}},{breakpoint:768,arrows:!1,settings:{arrows:!1}},{breakpoint:767,arrows:!1,mobileFirst:!0,variableWidth:!1,settings:{arrows:!1}},{breakpoint:540,arrows:!1,variableWidth:!1,settings:{arrows:!1}},{breakpoint:480,arrows:!1,settings:{arrows:!1}}]})})},error:function(e){}})}}}),u(window).resize("resize",function(){var e=u(".be-ex-article").closest(".bp-widget");320==u(window).width()||480==u(window).width()||540==u(window).width()?u(e[3]).insertBefore(u(e[1])):768!=u(window).width()&&960!=u(window).width()||u(e[3]).insertBefore(u(e[4]))});var p="cs";return{prefModified:function(e){e.refreshIncludes();var t=u(e.htmlNode);u(".bd-structured-content-widget",t).attr("data-type",e.getPreference("contentType")||"Content")},start:function(s){var r,e=s.getPreference("contentRef"),n=u(s.htmlNode),t=!1;try{top.bd}catch(e){t=!0}for(var o,a=!(!window.be||t)&&be.utils.module("top.bd.PageMgmtTree.selectedLink").isMasterPage||"true"===s.model.manageable||""===s.model.manageable||void 0===s.model.manageable,i=[],l=0;l<s.model.preferences.array.length;l++)"templateUrl"==s.model.preferences.array[l].name&&(o=s.model.preferences.array[l].value);var d=s.getPreference("urlContent"),c=b$.portal.portalModel.serverURL,t=c+"/static/widgets/%5BBBHOST%5D/widget-hdfc-portal-hero-carousel/media/pop-close.png";u(".close-button-url").attr("src",t),null!=d&&(t=d.indexOf("content"),t=d.slice(t,d.length),d=c+"/"+t),null==o||(i=o.split("/")),a&&(e||n.addClass("bd-empty-structured-content"),u(".bd-structured-content-widget",n).attr("data-type",s.getPreference("contentType")||"Content"),s.addEventListener("preferences-form",function(e){for(var t=b$.portal.portalModel.filterPreferences(s.model.preferences.array),r=t.length-1;0<=r;r--)if("Template"==t[r].label)for(var n=s.getPreference("templateList").split(","),o=0,a=0;o<n.length;o++,a++)t[r].inputType.options[a]={label:n[o],value:n[o+1]},o++}),s.addEventListener("bdDrop.enter",function(e){e=e.detail.info.helper.bdDragData.fileDataArray[0];e.metaData&&e.metaData["cmis:objectTypeId"]&&"bb:structuredcontent"===e.metaData["cmis:objectTypeId"].property?(r=e,n.addClass("bd-over-structured-content")):r=void 0}),s.addEventListener("bdDrop.leave",function(e){n.removeClass("bd-over-structured-content")}),s.addEventListener("bdDrop.drop",function(e){var t=e.detail.info.helper.bdDragData.fileDataArray[0];r&&(s.model.preferences.getByName("contentRef")||(e=b$.portal.portalModel.createPreference("contentRef","contentRef",void 0,""),s.model.preferences.add(e)),s.setPreference("urlContent",t.url),s.setPreference("contentRef",[p,"contentRepository"===r.repository?r.repository:"@portalRepository",r.contentUId].join(":")),s.model.save(function(){s.refreshHTML(),n.removeClass("bd-empty-structured-content")}),n.removeClass("bd-over-structured-content")),r=void 0}),window.bd&&window.bd.bindDropEvents&&window.bd.bindDropEvents(s.htmlNode),"hero-carousel.html"==i[i.length-1]&&require(["hero-carousel"],function(e){e.herocarousel(s,d,c)}),"hero-carousel-link-only.html"==i[i.length-1]&&require(["hero-carousel"],function(e){e.herocarousel(s,d,c)}))}}}(jQuery);
