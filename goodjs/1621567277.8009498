"use strict";!function(){var c=window.bowlder;function t(){this.atList={},this.atDOM={},this.atData={},this.viewHeight=0<window.screen.height&&(window.innerHeight||document.documentElement.clientHeight)>=window.screen.height?window.screen.height:window.innerHeight||document.documentElement.clientHeight,this._item=".at_item",this.curKey="default"}t.prototype={init:function(t){var e=this;e._item=t||e._item,c(window).bind("scroll",c.throttle(function(){e.check()},400))},check:function(){document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;var o=this,i=o.curKey,t=c(o._item);o.atDOM[i]=t,o.atList[i]=o.atList[i]||[];var r=[];c.each(t,function(t,e){var n=t.getAttribute("adType");r[n]?r[n].counter++:(r[n]=[],r[n].counter=0),o.atList[i][n]=o.atList[i][n]||[];var a="none"!=t.style.display&&t.getBoundingClientRect();o.atList[i][n]&&!o.atList[i][n][e]&&a&&(a.top<=o.viewHeight-.01*a.height&&0<a.top||a.top<0&&a.bottom>.01*a.height)?(o.atList[i][n][e]=!0,c.emit("atMonitor:in",{idx:r[n].counter,type:n,key:i})):o.atList[i][n]&&!o.atList[i][n][e]&&c(t).hasClass(".fixed")?o.atList[i][n][e]||(o.atList[i][n][e]=!0,c.emit("atMonitor:in",{idx:r[n].counter,type:n,key:i})):o.atList[i][n]&&o.atList[i][n][e]&&a&&(a.bottom<0||a.top>o.viewHeight-.01*a.height)&&(o.atList[i][n][e]=!1)})},receiver:function(){var e=this;c.on("atMonitor:in",function(t){e.postAction(t.idx,t.type,0)})},getData:function(t,o){this.curKey;var i=1===(i=t.replace(/.*l=([\d,]+)&.*/,"$1")).length?i:i.split(",");this.jsonp({url:t,callback:"cb",time:3e3,success:function(t){var e={};if(t.ads.length<i.length){e.result=t.result,e.ads=[];for(var n=0;n<i.length;n++)for(var a=0;a<t.ads.length;a++)if(i[n]==t.ads[a].location){e.ads.push(t.ads[a]);break}}else e=t;o&&o(e)},fail:function(t){window.console&&console.trace(t.message),o&&o()}})},makeAtData:function(t,e){var n=this,a=n.curKey;n.atData[a]=n.atData[a]||[],n.atData[a][t]=n.atData[a][t]||[];for(var o=0;o<e.length;o++)n.atData[a][t].push(e[o]);return n.atData},clearData:function(t){this.atData[t]=[]},jsonp:function(e){if(!(e=e||{}).url||!e.callback)throw new Error("\u53c2\u6570\u4e0d\u5408\u6cd5");var n=e.callbackName||("jsonp_"+Math.random()).replace(".",""),t=document.getElementsByTagName("head")[0],a="";e.data?(e.data[e.callback]=n,a+=function(t){var e,n=[];for(e in t)n.push(encodeURI(e)+"="+encodeURI(t[e]));return n.join("&")}(e.data)):a+=e.callback+"="+n;var o=document.createElement("script");o.setAttribute("charset","UTF-8"),t.appendChild(o),window[n]=function(t){clearTimeout(o.timer),window[n]=null,e.success&&e.success(t)},o.src=e.url+(/\?/.test(e.url)?"&":"?")+a,e.time&&(o.timer=setTimeout(function(){window[n]=function(){e.fail&&e.fail({message:"\u8d85\u65f6"})}},e.time))},postAction:function(t,e,n){var a=this,o=a.curKey;if(a.atData[o]&&a.atData[o][e]&&0<a.atData[o][e].length&&a.atData[o][e][t]&&a.atData[o][e][t].monitor)for(var i=0;i<a.atData[o][e][t].monitor.length;i++)a.atData[o][e][t].monitor[i].action==n&&a.atData[o][e][t].monitor[i].url&&a.post(a.atData[o][e][t].monitor[i].url)},post:function(t){var e=document.getElementsByTagName("head")[0],t=t,n=document.createElement("script");n.src=t,e.appendChild(n),n.onerror=function(t){e.removeChild(n)},n.onload=function(t){e.removeChild(n)}}};var e=new t;window.AT||(window.AT=e)}(),function(BOWLDER,AT){var $$=BOWLDER,requestObj=[],preservedScriptAttributes={type:!0,src:!0,nonce:!0,noModule:!0},AD={config:{top_ad_column:".top_ad_column",bottom_ad_column:".bottom_ad_column",right_rect_ad:".right_ad_item"},getSearchParams:function(t){var n={};return(t=t&&t.split("?")[1])&&0<t.length&&(t=t.split("&"),$$.each(t,function(t,e){t&&-1!==t.indexOf("=")&&(t=t.split("="),n[t[0]]=n[t[0].toLocaleLowerCase()]=decodeURIComponent(t[1]||""))})),n},collectAdRequest:function(t){for(var e=$$(t),n=e.length,a=0;a<n;a++){var o,i=e[a].getAttribute("requestUrl"),r=e[a].getAttribute("adType"),c=AD.getSearchParams(i);c.type&&i&&(o=c.type,requestObj[o]||(requestObj[o]=[]),requestObj[o].push({l:c.l,type:r,location:c.location,dom:t,url:i}))}},getAdDetail:function(){var t,c=[];for(t in requestObj)!function(o){var t,n=[],a=[];if($$.each(requestObj[o],function(t,e){-1===n.indexOf(t.l)&&(n.push(t.l),a.push(t.location))}),requestObj[o]&&requestObj[o][0]){t=AD.getSearchParams(requestObj[o][0].url),$$.extend(t,{l:n.join(","),location:a.join(",")});var e,i=requestObj[o][0].url.split("?")[0],r="";for(e in t)r+=e+"="+t[e]+"&";i=i+"?"+r.substring(0,r.length-1),c.push(new $$.Promise(function(n,a){AT.getData(i,function(t){var e=requestObj[o];t?(t={obj:e,addata:t.ads},n(t)):a("No Data!")})}))}}(t);return c},parseAdData:function(){var t=AD.getAdDetail();t.length&&$$.q.all(t).then(function(t){$$.each(t,function(o,t){$$.each(o.addata,function(e,t){var n,a;$$.each(o.obj,function(t){e.location==t.l&&(n=t.dom,a=t.type,AD.oneAd(n,a,e))})})}),AT.receiver(),AT.init(),AT.check()})},oneAd:function(t,e,n){var a,o,i,r;t.loaded||(r="",a=AD.makeMonitorArr(n),n.hasHtmlResource&&n.htmlResource&&(r=n.htmlResource,"codeAD"==n.style?AD.generateAdWithoutIframe($$(t)[0],r):"columnAd"==e||"bottomColumnAd"==e||"topColumnAd"==e?isNs9?AD.generateIframe($$(t)[0],r,a,{w:960,h:100}):AD.generateIframe($$(t)[0],r,a,{w:1200,h:125}):"rightAd"==e?"3010003"==n.style?($$($$(t)[0]).parent().addClass("right_ad_pictext"),AD.generateIframe($$(t)[0],r,a,{w:300,h:128})):AD.generateIframe($$(t)[0],r,a):"autoAd"==e&&(o=$$(t).attr("normalw"),i=$$(t).attr("normalh"),isNs9&&(o=$$(t).attr("smallw"),i=$$(t).attr("smallh")),o&&i?AD.generateIframe($$(t)[0],r,a,{w:o,h:i}):AD.generateIframe($$(t)[0],r,a)),AT.makeAtData(e,[n]),t.loaded=!0))},generateIframe:function(t,e,n,a){var o=document.createElement("iframe"),n=this.generateClickMonitor(e,n),a=a||{};o.setAttribute("width",a.w||"300"),o.setAttribute("height",a.h||"250"),o.setAttribute("frameborder","0"),o.setAttribute("border","0"),o.setAttribute("marginwidth","0"),o.setAttribute("marginheight","0"),o.setAttribute("scrolling","no"),$$(t).append(o),o.contentWindow.document.open(),o.contentWindow.document.write(n),o.contentWindow.document.close()},DOMEval:function(code,node,doc){doc=doc||window.document;var i,script=doc.createElement("script");if(script.text=code,node)if(node.src)for(i in preservedScriptAttributes)node[i]&&(script[i]=node[i]);else eval(node.innerText);doc.head.appendChild(script).parentNode.removeChild(script)},generateAdWithoutIframe:function(t,e,n,a){var o=document.createElement("div");o.innerHTML=e;for(var i=o.children,r=0,c=i.length;r<c;r++)i[r]&&i[r].tagName&&"script"!==i[r].tagName.toLocaleLowerCase()?$$(t).append(i[r].cloneNode(!0)):this.DOMEval(i[r].innerHTML,i[r])},generateClickMonitor:function(t,e){for(var n,a="",o=0;o<e.length;o++)a+=0===o?'"'+e[o]+'"':',"'+e[o]+'"';return n='<script type="text/javascript">var urlMonitor=['+a+'];document.onclick=function(e){if(urlMonitor&&urlMonitor.length){for(var i=0;i<urlMonitor.length;i++){post(urlMonitor[i])}}};function post(url){var head=document.getElementsByTagName("head")[0],url=url;var script=document.createElement("script");script.src=url;head.appendChild(script);script.onerror=function(e){head.removeChild(script)};script.onload=function(e){head.removeChild(script)}};<\/script>',t=t.replace("\x3c!--sspClickMonitor--\x3e",n)},makeMonitorArr:function(t){var e=[];if(t&&t.monitor)for(var n=0;n<t.monitor.length;n++)1===t.monitor[n].action&&e.push(t.monitor[n].url);return e}};window.ADD||(window.ADD={collectAdRequest:AD.collectAdRequest,parseAdData:AD.parseAdData})}(window.bowlder,window.AT),function(t,n,e){var r,c=t,l=window.innerWidth||document.documentElement.clientWidth,s=l<1420||/\?narrow/.test(location.search);c.on("global.resize",function(){!function(){var t,e,n=c(".column_ad_item"),a=c('div[adtype="autoAd"]');if(l=window.innerWidth||document.documentElement.clientWidth,(s=l<1420||/\?narrow/.test(location.search))!==r){r=s;for(var o=0;o<n.length;o++)(t=c("iframe",n[o])[0])&&(s?(t.width=960,t.height=100):(t.width=1200,t.height=125));for(var i=0;i<a.length;i++)(e=c("iframe",a[i])[0])&&(s?(e.width=c(a[i]).attr("smallw"),e.height=c(a[i]).attr("smallh")):(e.width=c(a[i]).attr("normalw"),e.height=c(a[i]).attr("normalh")))}}()}),c.on("global.scroll",function(){e.check()}),c(".at_item").each(function(t,e){n.collectAdRequest(t)}),n.parseAdData()}(window.bowlder,window.ADD,window.AT);