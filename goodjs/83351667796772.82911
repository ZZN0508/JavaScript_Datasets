function isTargetApi(t,n){try{return t.split("/")[2].split(".")[0].split("-")[0]===n}catch(t){return!1}}function sendInfo(t,n,o,e,i,r){t.infoListener?t.infoListener(n,o,e,i,r):(t.infoQueue=t.infoQueue||[],t.infoQueue.push({url:n,status:o,performance:e,timestamp:i,errorMessage:r}))}!function(){if(window.fetch){window.gwpMonitor=window.gwpMonitor||{};var r=window.XMLHttpRequest.prototype.open,o=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.open=function(t,n,o,e,i){return this.url=n,r.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(t){try{var n;isTargetApi(this.url,"marketingplatform")&&(n=Date.now(),this.addEventListener("load",function(){var t=Date.now()-n;sendInfo(window.gwpMonitor,this.url,this.status,t,Date.now(),"")}))}catch(t){sendInfo(window.gwpMonitor,"","","",Date.now(),t)}return o.apply(this,arguments)};const n=window.fetch;window.fetch=function(...t){var e=Date.now();return n.apply(window,t).then(t=>{var n,o=t.clone();try{isTargetApi(t.url,"marketingplatform")&&(n=Date.now()-e,sendInfo(window.gwpMonitor,t.url,t.status,n,Date.now(),""))}catch(t){sendInfo(window.gwpMonitor,"","","",Date.now(),t)}return o})}}}();
