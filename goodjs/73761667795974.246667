!function(n){var o={};function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.activeWindow=window,e.topWindow=top},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),r=n(0),n=(o.prototype.getQueryParamByName=function(t){var e,n=r.activeWindow.location.search&&r.activeWindow.location.search.toLowerCase(),t=n&&n.indexOf(t);return-1!==t&&(t=n.indexOf("=",t)+1,e=-1===(e=n.indexOf("&",t))?void 0:e,e=decodeURIComponent(n.slice(t,e))),e},o.prototype.logger=function(t,e){var n="background-color: ",o=r.activeWindow.console&&"function"==typeof r.activeWindow.console.error,i=this.getQueryParamByName("iasdebug"),i=i&&"TRUE"===i.toUpperCase();"log"===t?n+="lightgreen":"error"===t?n+="pink":"warn"===t&&(n+="lightyellow"),o&&i&&(console.log("%cIAS_DEBUG: "+e,n),a.pmLog("DEBUG_adxErrorsLog: IAS_DEBUG: "+e))},o.prototype.isDebugMode=function(){var t=this.getQueryParamByName("iasdebug");return t&&"TRUE"===t.toUpperCase()},o);function o(){this.log=null,this.warn=null,this.error=null,this.log=this.logger.bind(this,"log"),this.warn=this.logger.bind(this,"warn"),this.error=this.logger.bind(this,"error")}e.reporter=new n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=n(0),a=n(1);e.start=function(t){try{new o.ADX(t)}catch(t){a.reporter.error(t.message)}},i.activeWindow.__iasADX=window.__iasADX||{},i.activeWindow.__iasADX.start=window.__iasADX.start||e.start,Number(i.activeWindow.__iasADX.anId)&&i.activeWindow.__iasADX.start(i.activeWindow.__iasADX.anId)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=n(0),m=n(4),h=n(1),o=n(6),f=n(7),n=(i.prototype.setAnId=function(t){isNaN(Number(t))?h.reporter.error("Invalid an Id passed"):this.anId=Number(t)},i.prototype.getAnId=function(){return this.anId},i.prototype.setIframesHtmlContents=function(){var e=this;g.topWindow.ampInaboxIframes&&g.topWindow.ampInaboxIframes.forEach(function(t){try{(Boolean(t.getAttribute("data-is-safeframe"))||Boolean(t.getAttribute("sandbox")))&&t.name&&e.isIframeContentsValid(t.id,t.name)&&(e.iframesHtmlContents[t.id]=t.name,e.sendIframeSetEvent(t))}catch(t){return!1}})},i.prototype.updateUnsafeAdSlots=function(t,i){var a=JSON.parse(JSON.stringify(i));t.forEach(function(t){var e=["google_ads_iframe_"+t.getSlotId().toString(),"google_ads_iframe"+t.getSlotId().toString()].filter(function(t){return Boolean(g.topWindow.document.getElementById(t))&&!i.hasOwnProperty(t)})[0],n=g.topWindow.document.getElementById(e)||null;if(n&&!Boolean(n.getAttribute("data-is-safeframe")))try{var o=n.contentDocument||n.contentWindow&&n.contentWindow.document;o&&Object.defineProperty(a,e,{value:o.body.textContent,enumerable:!0,writable:!0})}catch(t){h.reporter.warn("Unable to access the unsafe iframe html contents",t)}}),this.iframesHtmlContents=a},i.prototype.sendIframeSetEvent=function(t){var e=document.createEvent("Event");e.initEvent("iframeSet",!0,!0),t.dispatchEvent(e)},i.prototype.isIframeContentsValid=function(t,e){var n=!1;return n=2e3<e.length&&this.iframesHtmlContents[t]!==e?!0:n},i.prototype.getIframesHtmlContents=function(){return this.iframesHtmlContents},i.prototype.hasFirewallTag=function(t,e){return g.topWindow.document.getElementById(t.getSlotElementId()),/iasScriptUrl/i.test(e)},i.prototype.isAdxAd=function(t,e){return e?/https:\/\/pagead2\.googlesyndication\.com\/(pagead|pcs)/.test(t)&&/(securepubads|googleads|adx)\.g\.doubleclick\.net(:\d+)?($|\/)/.test(t):/(?=https?:\/\/(googleads|adx)\.g\.doubleclick\.net(:\d+)?($|\/)|https?:\/\/(?!adx)ad.*\.doubleclick\.net(:\d+)?($|\/))(((tpc.googlesyndication.com)|(?=.*\bhttps:\/\/pagead2\.googlesyndication\.com\/pagead\/s\/cookie_push(\.html#|_onload\.html#)\b).*$))/im.test(t)},i.prototype.isAmpAdxAd=function(t){t=/(googleads|adx)\.g\.doubleclick\.net/im.test(t)&&/(<amp-ad|amp4ads|Powered by AMP)/.test(t);return t&&o.adxStats.setStat("ampAdxRegistered",1),t},i.prototype.isPrebidAdx=function(t){return/pagead2\.googlesyndication\.com\/pagead\/gen_204/i.test(t)&&/(googleads|adx)\.g\.doubleclick\.net/i.test(t)},i.prototype.adxGetHtml=function(t,e,n){function o(t){return 2e3<t.length}return t.iasAdData&&o(t.iasAdData)?{html:t.iasAdData}:t.iasHtml&&o(t.iasHtml)?{html:t.iasHtml}:e&&o(e)?{html:e}:{html:n||""==t.getHtml()?null:t.getHtml(),isGetHtml:!0}},i.prototype.matchSlotToHtml=function(o,i){function t(){try{var t=i.getIframesHtmlContents(),e=Object.keys(t).find(function(t){return new RegExp(""+o.slot.getSlotId().toString(),"g").test(t)}),n=t[e]?i.adxGetHtml(o.slot,t[e],o.isBackfill):i.adxGetHtml(o.slot,null,o.isBackfill);!n.html||i.hasFirewallTag(o.slot,n.html)||Boolean(o.slot.adxAppendedScript)||(i.isAdxAd(n.html,n.isGetHtml)||i.isAmpAdxAd(n)||o.slot.iasAdData&&i.isPrebidAdx(o.slot.iasAdData))&&(h.reporter.log("IS ADX AD! - "+(e||o.slot.getSlotId().toString())),o.slot.isAdx=!0,i.attachFirewallTag(o.slot,e||"google_ads_iframe_"+o.slot.getSlotId().toString()))}catch(t){h.reporter.warn("Can't match slot to html: "+t)}}g.topWindow.pbjs&&g.topWindow.pbjs.onEvent&&g.topWindow.pbjs.getAllWinningBids().concat(g.topWindow.pbjs.getAllPrebidWinningBids()).forEach(function(t){t.adserverTargeting.hb_adid===o.slot.getTargeting("hb_adid")[0]&&(o.slot.iasAdData=t.ad)}),-1!==Object.keys(i.iframesHtmlContents).indexOf("google_ads_iframe_"+o.slot.getSlotId().toString())||o.slot.iasAdData?t():g.topWindow.addEventListener("iframeSet",function(){t()})},i.prototype.attachFirewallTag=function(e,t){try{var n,o=e.getSlotElementId(),i=document.getElementById(o),a=document.getElementById(t)?document.getElementById(t):document.getElementById(o),r=t.replace(/^google_ads_iframe(_|\/|_\/)[0-9]{1,15}/i,"adx"),d=e.getResponseInformation()||{},s=document.createElement("script"),l=(new Date).getTime(),c={width:Number(a.getAttribute("width")),height:Number(a.getAttribute("height"))},u=i.getAttribute("data-google-query-id");c.width&&c.height||(n=a.getBoundingClientRect(),c.width=Number(Math.trunc(n.width)),c.height=Number(Math.trunc(n.height))),s.type="text/javascript";var p=document.createTextNode(m.generateTag(this.anId,e.getSlotElementId(),c.width,c.height,d.advertiserId||null,r,d.sourceAgnosticLineItemId&&d.lineItemId?d.lineItemId:d.sourceAgnosticLineItemId,d.sourceAgnosticCreativeId&&d.creativeId?d.creativeId:d.sourceAgnosticCreativeId,d.campaignId||null,l,30));s.setAttribute("id","ias-"+l),g.topWindow.__iasADX.adxList=g.topWindow.__iasADX.adxList||{},(d.creativeId||d.sourceAgnosticCreativeId)&&(s.appendChild(p),f.throttle(this.registerAdxAdToWindowObject.bind(this,u,i,s),100)(),e.adxAppendedScript=!0,e.append=!0),g.topWindow.googletag.pubads().addEventListener("impressionViewable",function(t){e.adxAppendedScript=!1})}catch(e){h.reporter.warn("Can't attach slot to html: "+e)}},i.prototype.registerAdxAdToWindowObject=function(t,e,n){!t||this.adxList.hasOwnProperty(t)&&this.adxList[t]==e||(e.appendChild(n),Object.defineProperty(this.adxList,""+t,{value:e,enumerable:!0,writable:!0}),g.topWindow.__iasADX.adxList=this.adxList,o.adxStats.setStat("adxAdsOnPage",Object.keys(this.adxList).length))},i.prototype.verifyOnloadAdx=function(t,e,n){var o="google_ads_iframe_"+t.getSlotId().toString(),n=this.adxGetHtml(t,this.getIframesHtmlContents()[o],t.isBackfill)||{html:n.innerHTML};t.append||this.hasFirewallTag(t,this.getIframesHtmlContents()[o])||this.hasFirewallTag(t,n.html)||!this.isAdxAd(n.html,n.isGetHtml)&&!this.isAmpAdxAd(n.html)||this.attachFirewallTag(t,o)},i.prototype.onLoadStrongCheck=function(a){var r=this;o.adxStats.setStat("adSlot",a.length);try{a.forEach(function(e){var n,o,i=g.topWindow.document.querySelector("div#"+e.getSlotElementId()+" > div");i&&((n=i.querySelector("iframe"))?(r.updateUnsafeAdSlots(a,r.getIframesHtmlContents()),r.verifyOnloadAdx(e,n,i)):o=f.onAppend(i,function(t){t?(n=i.querySelector("iframe"))&&(r.updateUnsafeAdSlots(a,r.getIframesHtmlContents()),r.verifyOnloadAdx(e,n,i),o.disconnect()):setTimeout(function(){o.disconnect()},2e3)}))}),this.onLoadStrongCheck=void 0}catch(a){h.reporter.warn("On load strong check failed",a)}},i);function i(t){var e=this;this.iframesHtmlContents={},this.adxList={},this.setAnId(t),g.topWindow.addEventListener("load",function(){e.onLoadStrongCheck(g.topWindow.googletag.pubads().getSlots())}),g.topWindow.addEventListener("message",function(t){e.setIframesHtmlContents(),g.topWindow.googletag&&g.topWindow.googletag.pubadsReady&&(e.slots=g.topWindow.googletag.pubads().getSlots(),e.updateUnsafeAdSlots(e.slots,e.getIframesHtmlContents()),g.topWindow.googletag.pubads().addEventListener("slotRenderEnded",function(t){t.slot.isBackfill=t.isBackfill,e.matchSlotToHtml(t,e)}))})}e.ADX=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(1);e.generateTag=function(t,e,n,o,i,a,r,d,s,l,c){l="//"+(u.reporter.getQueryParamByName("fwserver")||"pixel.adsafeprotected.com")+"/jload?anId="+t+"&campId="+n+"x"+o+"&pubId="+i+"&chanId="+a+"&placementId="+r+"&pubCreative="+d+"&pubOrder="+s+"&cb="+l;return"(function() {\n      var iasScriptUrl, hiddenFrame, hiddenDoc, where, domain;\n      iasScriptUrl = '"+l+"';\n      hiddenFrame = document.createElement('iframe');\n      (hiddenFrame.frameElement || hiddenFrame).style.cssText = \"width: 0; height: 0; border: 0; display: none;\";\n      hiddenFrame.src = 'javascript:false';\n      where = document.getElementById('"+e+'\');\n      where.parentNode.insertBefore(hiddenFrame, where);\n      try {\n          hiddenDoc = hiddenFrame.contentDocument || (hiddenFrame.contentWindow && hiddenFrame.contentWindow.document);\n      } catch (e) {\n          domain = document.domain;\n          hiddenFrame.src = "javascript:var d=document.open();d.domain=\'" + domain + "\';void(0);";\n          hiddenDoc = hiddenFrame.contentDocument || (hiddenFrame.contentWindow && hiddenFrame.contentWindow.document);\n      }\n      if (hiddenDoc) {\n          hiddenDoc.open().write("<body onload=\\"window.__IntegralASUseFIF = true; window.__IntegralASAdRefreshThreshold = '+c+"; var js = document.createElement('script'); js.src = '"+l+'\'; document.body.appendChild(js);\\"></body>");\n          hiddenDoc.close();\n      }\n  })();'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.pmLog=o.activeWindow.postMessage?function(t){o.topWindow.postMessage(t,"*")}:function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(1),n=(a.prototype.setStat=function(t,e){},a.prototype.getStat=function(t){return this.stats[t]},a.prototype.getStats=function(){return this.stats},a.prototype.showStats=function(){i.reporter.log(this.getStats())},a);function a(){this.stats={adxAdsOnPage:0,adSlots:0,noIasNotAdx:0,ampAdxRegistered:0,adxSlotsIndices:[],ampInaBoxLoaded:!1,ampInaBoxLength:0},i.reporter.isDebugMode()&&(o.topWindow.__iasADX=o.topWindow.__iasADX||{},o.topWindow.__iasADX.isDebugMode=!0,o.topWindow.__iasADX.showStats=this.showStats)}e.adxStats=new n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=function(t,e){var n;return function(){n||(n=!0,t.apply(this,arguments),setTimeout(function(){return n=!1},e))}},e.onAppend=function(t,e){var n=new MutationObserver(function(t){t.forEach(function(t){t.addedNodes.length&&e(t.addedNodes)})});return n.observe(t,{childList:!0}),n}}]);
