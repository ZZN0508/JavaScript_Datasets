(self.webpackChunkmagnolia_resources=self.webpackChunkmagnolia_resources||[]).push([[6345],{91606:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r}),n(74916),n(23123),n(15306),n(92222);var o=n(74376),a=n(55464);var r=(n=[{key:"getLocalizedPrefix",value:function(){var t=window.location.hostname.split(".")[0];return"www"!==t&&"wac"!==t&&"qa-wac"!==t&&"localhost"!==t&&t}},{key:"wrapForI18n",value:function(t){return this.localizedPrefix?t.replace("//www.","//".concat(this.localizedPrefix,".")):t}},{key:"wacBasePath",value:function(){var t={production:this.wrapForI18n("https://www.atlassian.com"),staging:"".concat(-1<window.location.hostname.indexOf("qa-wac")?"https://qa-wac.internal.atlassian.com":a.Z.stgWacInternalUrl),dev:"http://localhost:8090/wac"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"idBasePath",value:function(){var t={production:"https://id.atlassian.com",staging:"https://id.stg.internal.atlassian.com",dev:"http://auth.bizbox.atlassian.com:8888"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"idLoginUrl",value:function(t,e){e=this.getReturnUrl(t,e);return"".concat(this.idBasePath(),"/login?continue=").concat(e)}},{key:"idLogoutUrl",value:function(t){t=this.getReturnUrl(t);return"".concat(this.idBasePath(),"/logout?continue=").concat(t)}},{key:"idLogoutLoginUrl",value:function(t){return this.idLogoutUrl(this.idLoginUrl(t,!0))}},{key:"macBasePath",value:function(){var t={production:"https://my.atlassian.com",staging:"https://my.stg.internal.atlassian.com",dev:"http://my.bizbox.atlassian.com:8888"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"macConfigUrl",value:function(){return"".concat(this.macBasePath(),"/ondemand/config")}},{key:"atlProxyBasePath",value:function(){var t={production:"/gateway/api",staging:"https://wac.stg.atlassian.com/gateway/api",dev:"https://wac.stg.atlassian.com/gateway/api"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"wacCofsBasePath",value:function(){var t={production:"/apis/prod/cofs",staging:"/apis/stg/cofs",dev:"/apis/stg/cofs"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"wacHamletBasePath",value:function(){var t={production:"/hamlet/1.0",staging:"/apis/stg/hamlet/1.0",dev:"/apis/stg/hamlet/1.0"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"getReturnUrl",value:function(t,e){return t=t||window.location.href,t=!e?encodeURIComponent(t):t}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(i.prototype,n),i);function i(t){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.ENV_DEV="dev",this.ENV_STAGING="staging",this.ENV_PRODUCTION="production",this.env=t||o.Z.getEnvironment(),this.localizedPrefix=this.getLocalizedPrefix()}},74376:(t,e,n)=>{"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,{Z:()=>i}),n(74916),n(23123);var a="staging",r="production",i=(o(c,[{key:"getEnvironment",value:function(){var t=r;switch(window.location.hostname.split(".")[0]){case"wac":case"qa-wac":case"author":t=a;break;case"localhost":t="dev";break;default:t=r}return t}},{key:"production",value:function(){return r}},{key:"staging",value:function(){return a}},{key:"dev",value:function(){return"dev"}}]),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this)}},94662:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a}),n(19601),n(92222),n(30489),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(38264);var i=n(67294),c=n(99095),s=n(26322),r=n(10944),l=n(23784),u=n(91606),p=n(97458),g=n(45232);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const a=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(a,i.Component);var n,o,e=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=b(n);return t=o?(t=b(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==d(t)&&"function"!=typeof t?v(e):t});function a(t){var o;return function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),w(v(o=e.call(this,t)),"onManageProfileClick",function(){var t={label:o.props.labels["JoinSiteUserDropdown.profile"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.manage.profile",Object.assign(o.props.defaultTrackProperties,f(f({},t),o.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=o.basePaths.idBasePath()+"/manage-profile"}),w(v(o),"onManageLicensesClick",function(){var t={label:o.props.labels["JoinSiteUserDropdown.licenses"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.manage.licenses",Object.assign(o.props.defaultTrackProperties,f(f({},t),o.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=g.Z.getMacUrl()}),w(v(o),"onLogOutClick",function(){var t={label:o.props.labels["JoinSiteUserDropdown.logOut"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.logout",Object.assign(o.props.defaultTrackProperties,f(f({},t),o.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=g.Z.getLogoutUrl()}),w(v(o),"onLogInClick",function(){var t=g.Z.getIdentityBaseUrl(),e=o.origin.addToUrl(t+"/start"),n={label:o.props.labels["JoinSiteUserDropdown.logIn"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.login",Object.assign(o.props.defaultTrackProperties,f(f({},n),o.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href="".concat(t,"/login?continue=").concat(encodeURIComponent(e))}),w(v(o),"onJoinYourTeamClick",function(){var t=g.Z.getIdentityBaseUrl(),e=o.origin.addToUrl(t+"/start"),n={label:o.props.labels["JoinSiteUserDropdown.joinTeam"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.join.team",Object.assign(o.props.defaultTrackProperties,f(f({},n),o.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href="".concat(t,"/login?continue=").concat(encodeURIComponent(e))}),w(v(o),"onCreateAcountClick",function(){var t="".concat(g.Z.getIdentityBaseUrl(),"/signup?"),e=g.Z.getStartUrl(),n={label:o.props.labels["JoinSiteUserDropdown.createAccount"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.create.account",Object.assign(o.props.defaultTrackProperties,f(f({},n),o.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=t+"&continue=".concat(encodeURIComponent(e))}),o.state={isLoading:!0,labels:t.labels,isLoggedIn:!1},o.basePaths=new u.Z,o.performanceBoost=!0,o.origin=new r.Z({product:"wac-globaldropdown"}),o}return function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(a.prototype,[{key:"componentDidMount",value:function(){var e=this;this.getUser().then(function(t){e.setState(f(f({},t),{},{isLoading:!1})),t.isLoggedIn&&imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.user.loggedin")}).catch(function(t){imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.user.getusererror")})}},{key:"render",value:function(){var t=this.state,e=t.displayName,n=t.avatar,o=t.email,a=t.isLoggedIn,r=t.isLoading,t=t.labels;return r?i.createElement("div",{className:"global-nav--wac__container--dropdown"},i.createElement(s.Z,null)):a?i.createElement("div",{className:"global-nav--wac__container--dropdown wac-dropdown-loggedin"},i.createElement(c.Pj,{locale:document.documentElement.lang,messages:t},i.createElement(p.wy,{userName:e,userEmail:o,avatarSrc:n,isLoggedIn:a,onManageLicenses:this.onManageLicensesClick,onManageProfile:this.onManageProfileClick,onLogOutClick:this.onLogOutClick,onLogInClick:this.onLogInClick,onJoinYourTeam:this.onJoinYourTeamClick}))):i.createElement("div",{className:"global-nav--wac__container--dropdown"},i.createElement(c.Pj,{locale:document.documentElement.lang,messages:t},i.createElement(p.wy,{userName:e,userEmail:o,avatarSrc:n,isLoggedIn:a,onManageLicenses:this.onManageLicensesClick,onManageProfile:this.onManageProfileClick,onLogOutClick:this.onLogOutClick,onLogInClick:this.onLogInClick,onJoinYourTeam:this.onJoinYourTeamClick})))}},{key:"getUser",value:function(){return l.VR.getStargateProfile(this.performanceBoost).then(function(){var t=l.VR.getUserEmail()||"";return{displayName:l.VR.getDisplayName(),avatar:l.VR.getAvatar(),email:t,isLoggedIn:l.VR.isLoggedIn()}})}}]),a}()}}]);
