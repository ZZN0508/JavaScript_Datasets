!function(e){var S,j,T={}.toString,t="function"==typeof define&&define.amd,n="object"==typeof JSON&&JSON,c="object"==typeof exports&&exports&&!exports.nodeType&&exports;c&&n?(c.stringify=n.stringify,c.parse=n.parse):c=e.JSON=n||{};var u,O,C,k,s,x,o,M,f,l,r,N,d,P,A,p,g,h,m,_,a,i,v,y,D,w=new Date(-0xc782b5b800cec);try{w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(e){}function b(e){if(null!=b[e])return b[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=b("json-stringify")&&b("json-parse");else{var n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,r="function"==typeof o&&w;if(r){(a=function(){return 1}).toJSON=a;try{r="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(T)===j&&o(j)===j&&o()===j&&"1"===o(a)&&"[1]"==o([a])&&"[null]"==o([j])&&"null"==o(null)&&"[null,null,null]"==o([j,T,null])&&o({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==n&&"1"===o(null,a)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new Date(-1))}catch(e){r=!1}}t=r}if("json-parse"==e){r=c.parse;if("function"==typeof r)try{if(0===r("0")&&!r(!1)){var a,i=5==(a=r(n)).a.length&&1===a.a[0];if(i){try{i=!r('"\t"')}catch(e){}if(i)try{i=1!==r("01")}catch(e){}}}}catch(e){i=!1}t=i}}return b[e]=!!t}b["bug-string-char-index"]=null,b.json=null,b["json-stringify"]=null,b["json-parse"]=null,b("json")||(u="[object Function]",O="[object Number]",C="[object String]",k="[object Array]",s=b("bug-string-char-index"),w||(x=Math.floor,o=[0,31,59,90,120,151,181,212,243,273,304,334],M=function(e,t){return o[t]+365*(e-1970)+x((e-1969+(t=+(1<t)))/4)-x((e-1901+t)/100)+x((e-1601+t)/400)}),(S={}.hasOwnProperty)||(S=function(e){var n,t={__proto__:null};return t.__proto__={toString:1},S=t.toString!=T?function(e){var t=this.__proto__,e=e in(this.__proto__=null,this);return this.__proto__=t,e}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,S.call(this,e)}),f={boolean:1,number:1,string:1,undefined:1},D=function(e,t){var n,l,o,r=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,l=new n)S.call(l,o)&&r++;return l=null,(D=r?2==r?function(e,t){var n,o={},r=T.call(e)==u;for(n in e)r&&"prototype"==n||S.call(o,n)||!(o[n]=1)||!S.call(e,n)||t(n)}:function(e,t){var n,o,r=T.call(e)==u;for(n in e)r&&"prototype"==n||!S.call(e,n)||(o="constructor"===n)||t(n);(o||S.call(e,n="constructor"))&&t(n)}:(l=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,o,r,a,i,c=T.call(e)==u,s=c||"function"==typeof e.constructor||("object"==(i=typeof(r=e)[a="hasOwnProperty"])?!r[a]:f[i])?S:e.hasOwnProperty;for(n in e)c&&"prototype"==n||!s.call(e,n)||t(n);for(o=l.length;n=l[--o];s.call(e,n)&&t(n));}))(e,t)},b("json-stringify")||(l={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},r="000000",N=function(e,t){return(r+(t||0)).slice(-e)},d="\\u00",P=function(e){var t,n='"',o=0,r=e.length,a=10<r&&s;for(a&&(t=e.split(""));o<r;o++){var i=e.charCodeAt(o);switch(i){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=l[i];break;default:if(i<32){n+=d+N(2,i.toString(16));break}n+=a?t[o]:s?e.charAt(o):e[o]}}return n+'"'},A=function(e,t,n,o,r,a,i){var c,s,l,u,f,d,p,g,h,m,_,v,y,w,b;try{c=t[e]}catch(e){}if("object"==typeof c&&c)if("[object Date]"!=(s=T.call(c))||S.call(c,"toJSON"))"function"==typeof c.toJSON&&(s!=O&&s!=C&&s!=k||S.call(c,"toJSON"))&&(c=c.toJSON(e));else if(-1/0<c&&c<1/0){if(M){for(f=x(c/864e5),l=x(f/365.2425)+1970-1;M(l+1,0)<=f;l++);for(u=x((f-M(l,0))/30.42);M(l,u+1)<=f;u++);f=1+f-M(l,u),d=x((h=(c%864e5+864e5)%864e5)/36e5)%24,p=x(h/6e4)%60,g=x(h/1e3)%60,h=h%1e3}else l=c.getUTCFullYear(),u=c.getUTCMonth(),f=c.getUTCDate(),d=c.getUTCHours(),p=c.getUTCMinutes(),g=c.getUTCSeconds(),h=c.getUTCMilliseconds();c=(l<=0||1e4<=l?(l<0?"-":"+")+N(6,l<0?-l:l):N(4,l))+"-"+N(2,u+1)+"-"+N(2,f)+"T"+N(2,d)+":"+N(2,p)+":"+N(2,g)+"."+N(3,h)+"Z"}else c=null;if(null===(c=n?n.call(t,e,c):c))return"null";if("[object Boolean]"==(s=T.call(c)))return""+c;if(s==O)return-1/0<c&&c<1/0?""+c:"null";if(s==C)return P(""+c);if("object"==typeof c){for(y=i.length;y--;)if(i[y]===c)throw TypeError();if(i.push(c),m=[],e=a,a+=r,s==k){for(v=0,y=c.length;v<y;w=w||!0,v++)_=A(v,c,n,o,r,a,i),m.push(_===j?"null":_);b=w?r?"[\n"+a+m.join(",\n"+a)+"\n"+e+"]":"["+m.join(",")+"]":"[]"}else D(o||c,function(e){var t=A(e,c,n,o,r,a,i);t!==j&&m.push(P(e)+":"+(r?" ":"")+t),w=w||!0}),b=w?r?"{\n"+a+m.join(",\n"+a)+"\n"+e+"}":"{"+m.join(",")+"}":"{}";return i.pop(),b}},c.stringify=function(e,t,n){var o,r,a;if("function"==typeof t||"object"==typeof t&&t)if((a=T.call(t))==u)r=t;else if(a==k)for(var i,c={},s=0,l=t.length;s<l;i=t[s++],T.call(i)!=C&&T.call(i)!=O||(c[i]=1));if(n)if((a=T.call(n))==O){if(0<(n-=n%1))for(o="",10<n&&(n=10);o.length<n;o+=" ");}else a==C&&(o=n.length<=10?n:n.slice(0,10));return A("",((i={})[""]=e,i),r,c,o,"",[])}),b("json-parse")||(p=String.fromCharCode,g={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},_=function(){throw h=m=null,SyntaxError()},a=function(){for(var e,t,n,o,r,a=m,i=a.length;h<i;)switch(r=a.charCodeAt(h)){case 9:case 10:case 13:case 32:h++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=s?a.charAt(h):a[h],h++,e;case 34:for(e="@",h++;h<i;)if((r=a.charCodeAt(h))<32)_();else if(92==r)switch(r=a.charCodeAt(++h)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=g[r],h++;break;case 117:for(t=++h,n=h+4;h<n;h++)48<=(r=a.charCodeAt(h))&&r<=57||97<=r&&r<=102||65<=r&&r<=70||_();e+=p("0x"+a.slice(t,h));break;default:_()}else{if(34==r)break;for(r=a.charCodeAt(h),t=h;32<=r&&92!=r&&34!=r;)r=a.charCodeAt(++h);e+=a.slice(t,h)}if(34==a.charCodeAt(h))return h++,e;_();default:if(t=h,45==r&&(o=!0,r=a.charCodeAt(++h)),48<=r&&r<=57){for(48==r&&(48<=(r=a.charCodeAt(h+1))&&r<=57)&&_(),o=!1;h<i&&(48<=(r=a.charCodeAt(h))&&r<=57);h++);if(46==a.charCodeAt(h)){for(n=++h;n<i&&(48<=(r=a.charCodeAt(n))&&r<=57);n++);n==h&&_(),h=n}if(101==(r=a.charCodeAt(h))||69==r){for(43!=(r=a.charCodeAt(++h))&&45!=r||h++,n=h;n<i&&(48<=(r=a.charCodeAt(n))&&r<=57);n++);n==h&&_(),h=n}return+a.slice(t,h)}if(o&&_(),"true"==a.slice(h,h+4))return h+=4,!0;if("false"==a.slice(h,h+5))return h+=5,!1;if("null"==a.slice(h,h+4))return h+=4,null;_()}return"$"},i=function(e){var t,n;if("$"==e&&_(),"string"==typeof e){if("@"==(s?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=a());n=n||!0)!n||","==e&&"]"!=(e=a())||_(),","==e&&_(),t.push(i(e));return t}if("{"==e){for(t={};"}"!=(e=a());n=n||!0)!n||","==e&&"}"!=(e=a())||_(),","!=e&&"string"==typeof e&&"@"==(s?e.charAt(0):e[0])&&":"==a()||_(),t[e.slice(1)]=i(a());return t}_()}return e},v=function(e,t,n){n=y(e,t,n);n===j?delete e[t]:e[t]=n},y=function(e,t,n){var o,r=e[t];if("object"==typeof r&&r)if(T.call(r)==k)for(o=r.length;o--;)v(r,o,n);else D(r,function(e){v(r,e,n)});return n.call(e,t,r)},c.parse=function(e,t){var n;return h=0,m=""+e,n=i(a()),"$"!=a()&&_(),h=m=null,t&&T.call(t)==u?y(((e={})[""]=n,e),"",t):n})),t&&define(function(){return c})}(this),function(g,u,f,h,d,p){var c,s,m,l,_,v=this,y=Math.floor(1e4*Math.random()),w=Function.prototype,b=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,n=/[\-\w]+\/\.\.\//,o=/([^:])\/\//g,S="",j={},t=g.easyXDM,T="easyXDM_",O=!1;function C(e,t){var n=typeof e[t];return"function"==n||"object"==n&&e[t]||"unknown"==n}function k(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(L(navigator.plugins)||"object"!=typeof navigator.plugins[e]||(n=navigator.plugins[e].description)&&!L(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(s=n.match(/\d+/g)),!s)try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),s=Array.prototype.slice.call(o.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),o=null}catch(e){}if(s){var n=parseInt(s[0],10),o=parseInt(s[1],10);return m=9<n&&0<o,1}}if(C(g,"addEventListener"))l=function(e,t,n){e.addEventListener(t,n,!1)},_=function(e,t,n){e.removeEventListener(t,n,!1)};else{if(!C(g,"attachEvent"))throw new Error("Browser not supported");l=function(e,t,n){e.attachEvent("on"+t,n)},_=function(e,t,n){e.detachEvent("on"+t,n)}}var e,r,a=!1,i=[];function x(){if(!a){a=!0;for(var e=0;e<i.length;e++)i[e]();i.length=0}}function M(e,t){a?e.call(t):i.push(function(){e.call(t)})}function N(e){return e.match(b)[3]}function P(e){var t=e.toLowerCase().match(b),n=t[2],e=t[3],t=t[4]||"";return n+"//"+e+(t="http:"==n&&":80"==t||"https:"==n&&":443"==t?"":t)}function A(e){var t;for((e=e.replace(o,"$1/")).match(/^(http||https):\/\//)||("/"!==(t="/"===e.substring(0,1)?"":f.pathname).substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=f.protocol+"//"+f.host+t+e);n.test(e);)e=e.replace(n,"");return e}function D(e,t){var n="",o=e.indexOf("#");-1!==o&&(n=e.substring(o),e=e.substring(0,o));var r,a=[];for(r in t)t.hasOwnProperty(r)&&a.push(r+"="+p(t[r]));return e+(O?"#":-1==e.indexOf("?")?"?":"&")+a.join("&")+n}(a="readyState"in u?"complete"==(e=u.readyState)||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==e||"interactive"==e):!!u.body)||(C(g,"addEventListener")?l(u,"DOMContentLoaded",x):(l(u,"readystatechange",function(){"complete"==u.readyState&&x()}),u.documentElement.doScroll&&g===top&&(r=function(){if(!a){try{u.documentElement.doScroll("left")}catch(e){return void h(r,1)}x()}})()),l(g,"load",x));var E=function(e){for(var t,n={},o=(e=e.substring(1).split("&")).length;o--;)n[(t=e[o].split("="))[0]]=d(t[1]);return n}(/xdm_e=/.test(f.search)?f.search:f.hash);function L(e){return void 0===e}var R,J=function(){var e={},t={a:[1,2,3]},n='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===n?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===n&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=n.evalJSON()).a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()}),e.stringify&&e.parse?(J=function(){return e},e):null)};function F(e,t,n){var o,r;for(r in t)t.hasOwnProperty(r)&&(r in e?"object"==typeof(o=t[r])?F(e[r],o,n):n||(e[r]=t[r]):e[r]=t[r]);return e}function H(e){var t,n;L(c)&&(o=u.body.appendChild(u.createElement("form")),(t=o.appendChild(u.createElement("input"))).name=T+"TEST"+y,c=t!==o.elements[t.name],u.body.removeChild(o)),c?n=u.createElement('<iframe name="'+e.props.name+'"/>'):(n=u.createElement("IFRAME")).name=e.props.name,n.id=n.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=u.getElementById(e.container)),e.container||(F(n.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=u.body);var o=e.props.src;if(e.props.src="javascript:false",F(n,e.props),n.border=n.frameBorder=0,n.allowTransparency=!0,e.container.appendChild(n),e.onLoad&&l(n,"load",e.onLoad),e.usePost){var r,a=e.container.appendChild(u.createElement("form"));if(a.target=n.name,a.action=o,a.method="POST","object"==typeof e.usePost)for(var i in e.usePost)e.usePost.hasOwnProperty(i)&&(c?r=u.createElement('<input name="'+i+'"/>'):(r=u.createElement("INPUT")).name=i,r.value=e.usePost[i],a.appendChild(r));a.submit(),a.parentNode.removeChild(a)}else n.src=o;return e.props.src=o,n}function B(e){var t,n=e.protocol;if(e.isHost=e.isHost||L(E.xdm_p),O=e.hash||!1,e.props||(e.props={}),e.isHost)e.remote=A(e.remote),e.channel=e.channel||"default"+y++,e.secret=Math.random().toString(16).substring(2),L(n)&&(n=P(f.href)==P(e.remote)?"4":C(g,"postMessage")||C(u,"postMessage")?"1":e.swf&&C(g,"ActiveXObject")&&k()?"6":"Gecko"===navigator.product&&"frameElement"in g&&-1==navigator.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0");else if(e.channel=E.xdm_c.replace(/["'<>\\]/g,""),e.secret=E.xdm_s,e.remote=E.xdm_e.replace(/["'<>\\]/g,""),n=E.xdm_p,e.acl&&!function(e,t){for(var n,o=(e="string"==typeof e?[e]:e).length;o--;)if(n=e[o],(n=new RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$")).test(t))return 1}(e.acl,e.remote))throw new Error("Access denied for "+e.remote);switch(e.protocol=n){case"0":if(F(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){for(var o,r=f.protocol+"//"+f.host,a=u.body.getElementsByTagName("img"),i=a.length;i--;)if((o=a[i]).src.substring(0,r.length)===r){e.local=o.src;break}e.local||(e.local=g)}var c={xdm_c:e.channel,xdm_p:0};e.local===g?(e.usePolling=!0,e.useParent=!0,e.local=f.protocol+"//"+f.host+f.pathname+f.search,c.xdm_e=e.local,c.xdm_pa=1):c.xdm_e=A(e.local),e.container&&(e.useResize=!1,c.xdm_po=1),e.remote=D(e.remote,c)}else F(e,{channel:E.xdm_c,remote:E.xdm_e,useParent:!L(E.xdm_pa),usePolling:!L(E.xdm_po),useResize:!e.useParent&&e.useResize});t=[new j.stack.HashTransport(e),new j.stack.ReliableBehavior({}),new j.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new j.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":t=[new j.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=A(e.remoteHelper)),t=[new j.stack.NameTransport(e),new j.stack.QueueBehavior,new j.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":t=[new j.stack.NixTransport(e)];break;case"4":t=[new j.stack.SameOriginTransport(e)];break;case"5":t=[new j.stack.FrameElementTransport(e)];break;case"6":s||k(),t=[new j.stack.FlashTransport(e)]}return t.push(new j.stack.QueueBehavior({lazy:e.lazy,remove:!0})),t}function X(e){for(var t,n={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},o=0,r=e.length;o<r;o++)F(t=e[o],n,!0),0!==o&&(t.down=e[o-1]),o!==r-1&&(t.up=e[o+1]);return t}F(j,{version:"2.4.18.25",query:E,stack:{},apply:F,getJSONObject:J,whenReady:M,noConflict:function(e){return g.easyXDM=t,(S=e)&&(T="easyXDM_"+S.replace(".","_")+"_"),j}}),j.DomHelper={on:l,un:_,requiresJSON:function(e){var t,n;"object"==typeof(t=g)[n="JSON"]&&t[n]||u.write('<script type="text/javascript" src="'+e+'"><\/script>')}},R={},j.Fn={set:function(e,t){R[e]=t},get:function(e,t){var n=R[e];return t&&delete R[e],n}},j.Socket=function(n){var t=X(B(n).concat([{incoming:function(e,t){n.onMessage(e,t)},callback:function(e){n.onReady&&n.onReady(e)}}])),o=P(n.remote);this.origin=P(n.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,o)},t.init()},j.Rpc=function(t,e){if(e.local)for(var n in e.local){var o;!e.local.hasOwnProperty(n)||"function"==typeof(o=e.local[n])&&(e.local[n]={method:o})}var r=X(B(t).concat([new j.stack.RpcBehavior(this,e),{callback:function(e){t.onReady&&t.onReady(e)}}]));this.origin=P(t.remote),this.destroy=function(){r.destroy()},r.init()},j.stack.SameOriginTransport=function(e){var t,n,o,r;return t={outgoing:function(e,t,n){o(e),n&&n()},destroy:function(){n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){r=P(e.remote),e.isHost?(F(e.props,{src:D(e.remote,{xdm_e:f.protocol+"//"+f.host+f.pathname,xdm_c:e.channel,xdm_p:4}),name:T+e.channel+"_provider"}),n=H(e),j.Fn.set(e.channel,function(e){return o=e,h(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(o=function(){var e=parent;if(""!==S)for(var t=0,n=S.split(".");t<n.length;t++)e=e[n[t]];return e.easyXDM}().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),h(function(){t.up.callback(!0)},0))},init:function(){M(t.onDOMReady,t)}}},j.stack.FlashTransport=function(r){var n,o,a,i,c;function s(e,t){h(function(){n.up.incoming(e,a)},0)}function l(n){var e=r.swf+"?host="+r.isHost,t="easyXDM_swf_"+Math.floor(1e4*Math.random());j.Fn.set("flash_loaded"+n.replace(/[\-.]/g,"_"),function(){j.stack.FlashTransport[n].swf=i=c.firstChild;for(var e=j.stack.FlashTransport[n].queue,t=0;t<e.length;t++)e[t]();e.length=0}),r.swfContainer?c="string"==typeof r.swfContainer?u.getElementById(r.swfContainer):r.swfContainer:(F((c=u.createElement("div")).style,m&&r.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),u.body.appendChild(c));var o="callback=flash_loaded"+p(n.replace(/[\-.]/g,"_"))+"&proto="+v.location.protocol+"&domain="+p(N(v.location.href))+"&port="+p(v.location.href.match(b)[4]||"")+"&ns="+p(S);c.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+t+"' data='"+e+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+e+"'></param><param name='flashvars' value='"+o+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+o+"' allowScriptAccess='always' wmode='transparent' src='"+e+"' height='1' width='1'></embed></object>"}return n={outgoing:function(e,t,n){i.postMessage(r.channel,e.toString()),n&&n()},destroy:function(){try{i.destroyChannel(r.channel)}catch(e){}i=null,o&&(o.parentNode.removeChild(o),o=null)},onDOMReady:function(){a=r.remote,j.Fn.set("flash_"+r.channel+"_init",function(){h(function(){n.up.callback(!0)})}),j.Fn.set("flash_"+r.channel+"_onMessage",s),r.swf=A(r.swf);function e(){j.stack.FlashTransport[t].init=!0,(i=j.stack.FlashTransport[t].swf).createChannel(r.channel,r.secret,P(r.remote),r.isHost),r.isHost&&(m&&r.swfNoThrottle&&F(r.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),F(r.props,{src:D(r.remote,{xdm_e:P(f.href),xdm_c:r.channel,xdm_p:6,xdm_s:r.secret}),name:T+r.channel+"_provider"}),o=H(r))}var t=N(r.swf);j.stack.FlashTransport[t]&&j.stack.FlashTransport[t].init?e():j.stack.FlashTransport[t]?j.stack.FlashTransport[t].queue.push(e):(j.stack.FlashTransport[t]={queue:[e]},l(t))},init:function(){M(n.onDOMReady,n)}}},j.stack.PostMessageTransport=function(o){var n,r,a,i;function c(e){var t=function(e){if(e.origin)return P(e.origin);if(e.uri)return P(e.uri);if(e.domain)return f.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}(e);t==i&&e.data.substring(0,o.channel.length+1)==o.channel+" "&&n.up.incoming(e.data.substring(o.channel.length+1),t)}return n={outgoing:function(e,t,n){a.postMessage(o.channel+" "+e,t||i),n&&n()},destroy:function(){_(g,"message",c),r&&(a=null,r.parentNode.removeChild(r),r=null)},onDOMReady:function(){var t;i=P(o.remote),o.isHost?(t=function(e){e.data==o.channel+"-ready"&&(a="postMessage"in r.contentWindow?r.contentWindow:r.contentWindow.document,_(g,"message",t),l(g,"message",c),h(function(){n.up.callback(!0)},0))},l(g,"message",t),F(o.props,{src:D(o.remote,{xdm_e:P(f.href),xdm_c:o.channel,xdm_p:1}),name:T+o.channel+"_provider"}),r=H(o)):(l(g,"message",c),(a="postMessage"in g.parent?g.parent:g.parent.document).postMessage(o.channel+"-ready",i),h(function(){n.up.callback(!0)},0))},init:function(){M(n.onDOMReady,n)}}},j.stack.FrameElementTransport=function(e){var t,n,o,r;return t={outgoing:function(e,t,n){o.call(this,e),n&&n()},destroy:function(){n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){r=P(e.remote),e.isHost?(F(e.props,{src:D(e.remote,{xdm_e:P(f.href),xdm_c:e.channel,xdm_p:5}),name:T+e.channel+"_provider"}),(n=H(e)).fn=function(e){return delete n.fn,o=e,h(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}}):(u.referrer&&P(u.referrer)!=E.xdm_e&&(g.top.location=E.xdm_e),o=g.frameElement.fn(function(e){t.up.incoming(e,r)}),t.up.callback(!0))},init:function(){M(t.onDOMReady,t)}}},j.stack.NameTransport=function(n){var t,o,r,a,i,c,s,l;function u(e){var t=n.remoteHelper+(o?"#_3":"#_2")+n.channel;r.contentWindow.sendMessage(e,t)}function f(){o?2!=++i&&o||t.up.callback(!0):(u("ready"),t.up.callback(!0))}function d(e){t.up.incoming(e,s)}function p(){c&&h(function(){c(!0)},0)}return t={outgoing:function(e,t,n){c=n,u(e)},destroy:function(){r.parentNode.removeChild(r),r=null,o&&(a.parentNode.removeChild(a),a=null)},onDOMReady:function(){o=n.isHost,i=0,s=P(n.remote),n.local=A(n.local),o?(j.Fn.set(n.channel,function(e){o&&"ready"===e&&(j.Fn.set(n.channel,d),f())}),l=D(n.remote,{xdm_e:n.local,xdm_c:n.channel,xdm_p:2}),F(n.props,{src:l+"#"+n.channel,name:T+n.channel+"_provider"}),a=H(n)):(n.remoteHelper=n.remote,j.Fn.set(n.channel,d));function e(){var t=r||this;_(t,"load",e),j.Fn.set(n.channel+"_load",p),function e(){"function"==typeof t.contentWindow.sendMessage?f():h(e,50)}()}r=H({props:{src:n.local+"#_4"+n.channel},onLoad:e})},init:function(){M(t.onDOMReady,t)}}},j.stack.HashTransport=function(o){var r,a,e,i,c,s,l,u,f,d;function t(){var e,t,n;l&&(e=l.location.href,t="",n=e.indexOf("#"),(t=-1!=n?e.substring(n):t)&&t!=c&&(c=t,r.up.incoming(c.substring(c.indexOf("_")+1),d)))}function p(){e=setInterval(t,i)}return r={outgoing:function(e,t){e=e,u&&(e=o.remote+"#"+s+++"_"+e,(a||!f?u.contentWindow:u).location=e)},destroy:function(){g.clearInterval(e),!a&&f||u.parentNode.removeChild(u),u=null},onDOMReady:function(){var t,n;a=o.isHost,i=o.interval,c="#"+o.channel,s=0,f=o.useParent,d=P(o.remote),a?(F(o.props,{src:o.remote,name:T+o.channel+"_provider"}),f?o.onLoad=function(){l=g,p(),r.up.callback(!0)}:(t=0,n=o.delay/50,function e(){if(++t>n)throw new Error("Unable to reference listenerwindow");try{l=u.contentWindow.frames[T+o.channel+"_consumer"]}catch(e){}l?(p(),r.up.callback(!0)):h(e,50)}()),u=H(o)):(l=g,p(),f?(u=parent,r.up.callback(!0)):(F(o,{props:{src:o.remote+"#"+o.channel+new Date,name:T+o.channel+"_consumer"},onLoad:function(){r.up.callback(!0)}}),u=H(o)))},init:function(){M(r.onDOMReady,r)}}},j.stack.ReliableBehavior=function(e){var r,a,i=0,c=0,s="";return r={incoming:function(e,t){var n=e.indexOf("_"),o=e.substring(0,n).split(",");e=e.substring(n+1),o[0]==i&&(s="",a&&a(!0)),0<e.length&&(r.down.outgoing(o[1]+","+i+"_"+s,t),c!=o[1]&&(c=o[1],r.up.incoming(e,t)))},outgoing:function(e,t,n){s=e,a=n,r.down.outgoing(c+","+ ++i+"_"+e,t)}}},j.stack.QueueBehavior=function(a){var i,n,c=[],o=!0,r="",s=0,l=!1,u=!1;function f(){if(a.remove&&0===c.length)return(e=i).up.down=e.down,e.down.up=e.up,void(e.up=e.down=null);var e,t;o||0===c.length||n||(o=!0,t=c.shift(),i.down.outgoing(t.data,t.origin,function(e){o=!1,t.callback&&h(function(){t.callback(e)},0),f()}))}return i={init:function(){(a=L(a)?{}:a).maxLength&&(s=a.maxLength,u=!0),a.lazy?l=!0:i.down.init()},callback:function(e){o=!1;var t=i.up;f(),t.callback(e)},incoming:function(e,t){var n,o;u?(n=e.indexOf("_"),o=parseInt(e.substring(0,n),10),r+=e.substring(n+1),0===o&&(a.encode&&(r=d(r)),i.up.incoming(r,t),r="")):i.up.incoming(e,t)},outgoing:function(e,t,n){a.encode&&(e=p(e));var o,r=[];if(u){for(;0!==e.length;)o=e.substring(0,s),e=e.substring(o.length),r.push(o);for(;o=r.shift();)c.push({data:r.length+"_"+o,origin:t,callback:0===r.length?n:null})}else c.push({data:e,origin:t,callback:n});l?i.down.init():f()},destroy:function(){n=!0,i.down.destroy()}}},j.stack.VerifyBehavior=function(o){var r,a,i;function c(){a=Math.random().toString(16).substring(2),r.down.outgoing(a)}return r={incoming:function(e,t){var n=e.indexOf("_");-1===n?e===a?r.up.callback(!0):i||(i=e,o.initiate||c(),r.down.outgoing(e)):e.substring(0,n)===i&&r.up.incoming(e.substring(n+1),t)},outgoing:function(e,t,n){r.down.outgoing(a+"_"+e,t,n)},callback:function(e){o.initiate&&c()}}},j.stack.RpcBehavior=function(t,o){var n,r=o.serializer||J(),i=0,c={};function s(e){e.jsonrpc="2.0",n.down.outgoing(r.stringify(e))}function a(e,n,t,o){if(t){var r,a,i;n?(r=function(e){r=w,s({id:n,result:e})},a=function(e,t){a=w;e={id:n,error:{code:-32099,message:e}};t&&(e.error.data=t),s(e)}):r=a=w,i=o,"[object Array]"!==Object.prototype.toString.call(i)&&(o=[o]);try{var c=t.method.apply(t.scope,o.concat([r,a]));L(c)||r(c)}catch(e){a(e.message)}}else n&&s({id:n,error:{code:-32601,message:"Procedure not found."}})}return n={incoming:function(e,t){var n=r.parse(e);n.method?o.handle?o.handle(n,s):a(n.method,n.id,o.local[n.method],n.params):(e=c[n.id],n.error?e.error&&e.error(n.error):e.success&&e.success(n.result),delete c[n.id])},init:function(){if(o.remote)for(var e in o.remote)o.remote.hasOwnProperty(e)&&(t[e]=function(o,r){var a=Array.prototype.slice;return function(){var e,t=arguments.length,n={method:r};0<t&&"function"==typeof arguments[t-1]?(1<t&&"function"==typeof arguments[t-2]?(e={success:arguments[t-2],error:arguments[t-1]},n.params=a.call(arguments,0,t-2)):(e={success:arguments[t-1]},n.params=a.call(arguments,0,t-1)),c[""+ ++i]=e,n.id=i):n.params=a.call(arguments,0),o.namedParams&&1===n.params.length&&(n.params=n.params[0]),s(n)}}(o.remote[e],e));n.down.init()},destroy:function(){for(var e in o.remote)o.remote.hasOwnProperty(e)&&t.hasOwnProperty(e)&&delete t[e];n.down.destroy()}}},v.easyXDM=j}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),function(){var e=window.jQuery||window.$||(window.$={}),a={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||e.parseJSON||e.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||e.toJSON};if(!("parse"in a&&"stringify"in a))throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var c,s={__jstorage_meta:{CRC32:{}}},t={jStorage:"{}"},n=null,o=0,r=!1,l={},i=!1,u=0,f={},d=+new Date,p={isXML:function(e){e=(e?e.ownerDocument||e:0).documentElement;return!!e&&"HTML"!==e.nodeName},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(e){}}return!1},decode:function(e){var t="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return!!t&&(e=t.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),!!this.isXML(e)&&e)}};function g(){var e="{}";if("userDataBehavior"==r){n.load("jStorage");try{e=n.getAttribute("jStorage")}catch(e){}try{u=n.getAttribute("jStorage_update")}catch(e){}t.jStorage=e}v(),b(),S()}function h(){var e;clearTimeout(i),i=setTimeout(function(){if("localStorage"==r||"globalStorage"==r)e=t.jStorage_update;else if("userDataBehavior"==r){n.load("jStorage");try{e=n.getAttribute("jStorage_update")}catch(e){}}e&&e!=u&&(u=e,function(){var e,t=a.parse(a.stringify(s.__jstorage_meta.CRC32));g(),e=a.parse(a.stringify(s.__jstorage_meta.CRC32));var n,o=[],r=[];for(n in t)t.hasOwnProperty(n)&&(e[n]?t[n]!=e[n]&&"2."==String(t[n]).substr(0,2)&&o.push(n):r.push(n));for(n in e)e.hasOwnProperty(n)&&(t[n]||o.push(n));m(o,"updated"),m(r,"deleted")}())},25)}function m(e,t){if(e=[].concat(e||[]),"flushed"==t){for(var n in e=[],l)l.hasOwnProperty(n)&&e.push(n);t="deleted"}for(var o=0,r=e.length;o<r;o++){if(l[e[o]])for(var a=0,i=l[e[o]].length;a<i;a++)l[e[o]][a](e[o],t);if(l["*"])for(a=0,i=l["*"].length;a<i;a++)l["*"][a](e[o],t)}}function _(){var e=(+new Date).toString();if("localStorage"==r||"globalStorage"==r)try{t.jStorage_update=e}catch(e){r=!1}else"userDataBehavior"==r&&(n.setAttribute("jStorage_update",e),n.save("jStorage"));h()}function v(){if(t.jStorage)try{s=a.parse(String(t.jStorage))}catch(e){t.jStorage="{}"}else t.jStorage="{}";o=t.jStorage?String(t.jStorage).length:0,s.__jstorage_meta||(s.__jstorage_meta={}),s.__jstorage_meta.CRC32||(s.__jstorage_meta.CRC32={})}function y(){!function(){if(s.__jstorage_meta.PubSub){for(var e=+new Date-2e3,t=0,n=s.__jstorage_meta.PubSub.length;t<n;t++)if(s.__jstorage_meta.PubSub[t][0]<=e){s.__jstorage_meta.PubSub.splice(t,s.__jstorage_meta.PubSub.length-t);break}s.__jstorage_meta.PubSub.length||delete s.__jstorage_meta.PubSub}}();try{t.jStorage=a.stringify(s),n&&(n.setAttribute("jStorage",t.jStorage),n.save("jStorage")),o=t.jStorage?String(t.jStorage).length:0}catch(e){}}function w(e){if(!e||"string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return 1}function b(){var e,t,n,o,r=1/0,a=!1,i=[];if(clearTimeout(c),s.__jstorage_meta&&"object"==typeof s.__jstorage_meta.TTL){for(t in e=+new Date,n=s.__jstorage_meta.TTL,o=s.__jstorage_meta.CRC32,n)n.hasOwnProperty(t)&&(n[t]<=e?(delete n[t],delete o[t],delete s[t],a=!0,i.push(t)):n[t]<r&&(r=n[t]));r!=1/0&&(c=setTimeout(b,r-e)),a&&(y(),_(),m(i,"deleted"))}}function S(){if(s.__jstorage_meta.PubSub){for(var e,t=d,n=s.__jstorage_meta.PubSub.length-1;0<=n;n--)(e=s.__jstorage_meta.PubSub[n])[0]>d&&(t=e[0],function(e,t){if(f[e])for(var n=0,o=f[e].length;n<o;n++)try{f[e][n](e,a.parse(a.stringify(t)))}catch(e){}}(e[1],e[2]));d=t}}e.jStorage={version:"0.4.5",set:function(e,t,n){if(w(e),n=n||{},void 0===t)return this.deleteKey(e),t;if(p.isXML(t))t={_is_xml:!0,xml:p.encode(t)};else{if("function"==typeof t)return;t&&"object"==typeof t&&(t=a.parse(a.stringify(t)))}return s[e]=t,s.__jstorage_meta.CRC32[e]="2."+function(e,t){for(var n,o=e.length,r=t^o,a=0;4<=o;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16),o-=4,++a;switch(o){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}(a.stringify(t),2538058380),this.setTTL(e,n.TTL||0),m(e,"updated"),t},get:function(e,t){return w(e),e in s?s[e]&&"object"==typeof s[e]&&s[e]._is_xml?p.decode(s[e].xml):s[e]:void 0===t?null:t},deleteKey:function(e){return w(e),e in s&&(delete s[e],"object"==typeof s.__jstorage_meta.TTL&&e in s.__jstorage_meta.TTL&&delete s.__jstorage_meta.TTL[e],delete s.__jstorage_meta.CRC32[e],y(),_(),m(e,"deleted"),!0)},setTTL:function(e,t){var n=+new Date;return w(e),t=Number(t)||0,e in s&&(s.__jstorage_meta.TTL||(s.__jstorage_meta.TTL={}),0<t?s.__jstorage_meta.TTL[e]=n+t:delete s.__jstorage_meta.TTL[e],y(),b(),_(),!0)},getTTL:function(e){var t=+new Date;return w(e),e in s&&s.__jstorage_meta.TTL&&s.__jstorage_meta.TTL[e]&&s.__jstorage_meta.TTL[e]-t||0},flush:function(){return s={__jstorage_meta:{CRC32:{}}},y(),_(),m(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=s,new e},index:function(){var e,t=[];for(e in s)s.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return o},currentBackend:function(){return r},storageAvailable:function(){return!!r},listenKeyChange:function(e,t){w(e),l[e]||(l[e]=[]),l[e].push(t)},stopListening:function(e,t){if(w(e),l[e])if(t)for(var n=l[e].length-1;0<=n;n--)l[e][n]==t&&l[e].splice(n,1);else delete l[e]},subscribe:function(e,t){if(!(e=(e||"").toString()))throw new TypeError("Channel not defined");f[e]||(f[e]=[]),f[e].push(t)},publish:function(e,t){if(!(e=(e||"").toString()))throw new TypeError("Channel not defined");e=e,t=t,s.__jstorage_meta||(s.__jstorage_meta={}),s.__jstorage_meta.PubSub||(s.__jstorage_meta.PubSub=[]),s.__jstorage_meta.PubSub.unshift([+new Date,e,t]),y(),_()},reInit:function(){g()}},function(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(e)try{window.localStorage&&(t=window.localStorage,r="localStorage",u=t.jStorage_update)}catch(e){}else if("globalStorage"in window)try{window.globalStorage&&(t="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],r="globalStorage",u=t.jStorage_update)}catch(e){}else{if(!(n=document.createElement("link")).addBehavior)return n=null;n.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(n);try{n.load("jStorage")}catch(e){n.setAttribute("jStorage","{}"),n.save("jStorage"),n.load("jStorage")}e="{}";try{e=n.getAttribute("jStorage")}catch(e){}try{u=n.getAttribute("jStorage_update")}catch(e){}t.jStorage=e,r="userDataBehavior"}v(),b(),"localStorage"==r||"globalStorage"==r?"addEventListener"in window?window.addEventListener("storage",h,!1):document.attachEvent("onstorage",h):"userDataBehavior"==r&&setInterval(h,1e3),S(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&h()},!1)}()}(),function(){function n(e){return t.postMessage(JSON.stringify({type:"player_exists",value:e}))}var o=$.jStorage,r=window.__PLAYER_CHANNEL_ID||"PlayerAddSong",a="PLAYER_EXISTS",t=new easyXDM.Socket({swf:"/swf/easyxdm.swf",onMessage:function(e,t){return e=JSON.parse(e),o.publish(r,e)}});o.listenKeyChange(a,function(e,t){return n(o.get(a))}),n(o.get(a))}();
