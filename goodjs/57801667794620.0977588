var malltag=window.malltag||{},malltag={domain:"kakaku.com",cookie:"MalltagRoute",cookieval:{entrance:0,via1:1,via2:2,via3:3,time:4},val:{base:null,bbstabno:null,topcategorycd:null,categorycd:null,articleid:null},param:"p",defaultVal:"00000",maxAgeMinute:60,set:function(){var a=malltag.getCookie(),l=(new Date).getTime(),t=malltag.getP(),e=malltag.getTwoCharacters(t);if(a){var o=a.split(",");if((l-o[malltag.cookieval.time])/1e3/60>malltag.maxAgeMinute)a="";else{o[malltag.cookieval.time]=l;for(var i=o.length-2;0<=i;i--)if(o[i]){if(malltag.getTwoCharacters(o[i])==e)o[i]=t,malltag.setCookie(o);else{switch(i){case malltag.cookieval.via3:o[malltag.cookieval.via1]=o[malltag.cookieval.via2],o[malltag.cookieval.via2]=o[malltag.cookieval.via3],o[malltag.cookieval.via3]=t;break;case malltag.cookieval.via2:case malltag.cookieval.via1:case malltag.cookieval.entrance:o[i+1]=t}malltag.setCookie(o)}return!0}}}if(a)return!1;l=t+",,,,"+l;return malltag.setCookie(l.split(",")),!0},getP:function(){if(!malltag.val.base)return malltag.defaultVal;if(malltag.val.bbstabno){var a=parseInt(malltag.val.base)+parseInt(malltag.val.bbstabno);return(malltag.defaultVal+a.toString(16)).slice(-5)}if(malltag.val.topcategorycd){a=parseInt(malltag.val.base)+parseInt(malltag.val.topcategorycd);return(malltag.defaultVal+a.toString(16)).slice(-5)}if(malltag.val.categorycd){a=parseInt(malltag.val.base)+parseInt(malltag.val.categorycd);return(malltag.defaultVal+a.toString(16)).slice(-5)}if(malltag.val.articleid){a=parseInt(malltag.val.base)+parseInt(malltag.val.articleid);return(malltag.defaultVal+a.toString(16)).slice(-5)}return(malltag.defaultVal+parseInt(malltag.val.base).toString(16)).slice(-5)},getCookie:function(){var a=null,l=malltag.cookie+"=",t=document.cookie,e=t.indexOf(l);return-1!=e&&(-1==(l=t.indexOf(";",e=e+l.length))&&(l=t.length),a=decodeURIComponent(t.substring(e,l))),a},setCookie:function(a){a=encodeURIComponent(a.join(",")),a=malltag.cookie+"="+a+"; domain=."+malltag.domain+"; path=/;";document.cookie=a},getDecimal:function(a){return("000000"+parseInt(a,16)).slice(-6)},getTwoCharacters:function(a){return malltag.getDecimal(a).substring(0,2)}};
