var notData={},wlcmEnabled=0,macros={sw:"/assets/vizurySDKWorker.js",customOptinStatus:null,migdomain:"/assets",hasMigration:!0},__vizpush=__vizpush||{IframeEle:null,ContainerHtmlId:"viz-push-container",version:"2",advid:"VIZVRM3625",target:"mu-pl.lemnisk.co",domain:macros.domain,migDomain:macros.migdomain,hasMigration:macros.hasMigration,isCOActive:macros.customOptinStatus,dailyCookie:"_vwpnsent",stateCookie:"_vwpnstate",fcmMigCookie:"_vwpnfcm",pushSuppCookie:"_vwpnsupp",fpc:"_vz",prevState:"",fcmMigState:"",vapidPublicKey:"BIQbWIEl62C-75-jCw63nmUqoybBi5iba9TTFWDdYy4fPUSSTAHgnvUfAewh7UgdxlwwtcSP8c_Q1oupGQy3qT4",swLoc:macros&&macros.sw?macros.sw:"/vizurySDKWorker.js",mobileOnly:macros.mobileOnly||0,timeout:macros.timeout||12e4,first:!1,ctaUrls:["lp1","lp2"],uuid:"",cont:'<style> .vizury-notification { display: block; overflow: hidden; border: 0px; position: fixed; z-index: 199999980;}</style> <iframe id = "http-push" class="vizury-notification" width="100%" height="100%"></iframe>',iframeContent:"",getCookie:function(t){var i=document.cookie;if(!t)return"";var e,o=i.split(";");for(e in o)if(o.hasOwnProperty(e)){var n=o[e].match(/\s*(.*)=(.*)/);if(n&&n[1]===t&&n[2])return decodeURIComponent(n[2])}return""},setCookie:function(t,i,e,o){var n=o||__vizpush.domain;e&&0<e?((o=new Date).setDate(o.getDate()+e),o=encodeURIComponent(i)+"; expires="+o.toUTCString()+"; path=/",n&&(o+="; domain="+n),document.cookie=t+"="+o):document.cookie=t+"="+encodeURIComponent(i)},createDivElement:function(){var t=document.createElement("div");t.id=__vizpush.ContainerHtmlId,document.body.appendChild(t),__vizpush.SetDivContent()},close:function(){var t=document.getElementById("http-push");t&&(t.style.display="none")},showOptin:function(){return!!(!__vizpush.mobileOnly||__vizpush.mobileOnly&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))},SetDivContent:function(t){document.getElementById(__vizpush.ContainerHtmlId).innerHTML=__vizpush.cont,__vizpush.SetIframeContent(__vizpush.iframeContent),__vizpush.IdentifyEvent()},SetIframeContent:function(t){var i=document.getElementById("http-push").contentWindow.document;i.open(),i.write("<!DOCTYPE html>"),i.write(t),i.close(),__vizpush.IframeEle=parent.document.getElementById("http-push")},transAnimationTopAndBottom:function(t,i,e,o){var n=setInterval(function(){t.style[i]=e+"px",o<0?(e-=2)<o&&(t.style[i]=o+"px",clearInterval(n)):o<(e+=2)&&(t.style[i]=o+"px",clearInterval(n))},1)},triggerNotiBottom:function(t,i){__vizpush.transAnimationTopAndBottom(t,"bottom",i,0)},triggerNotiTop:function(t,i){__vizpush.transAnimationTopAndBottom(t,"top",i,0)},IdentifyEvent:function(){__vizpush.IframeEle.style.top="-136px",setTimeout(function(){__vizpush.triggerNotiTop(__vizpush.IframeEle,parseInt("-136px"))},1)},hasPushSupport:function(){if(/Chrome\/([0-9]+)\./.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&!/OPR\/([0-9]+)\./.test(navigator.userAgent)){if(50<=navigator.userAgent.match(/Chrome\/([0-9]+)\./)[1])return!0}else if(/Firefox\/([0-9]+)\./.test(navigator.userAgent)){if(46<=navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1])return!0}else if(/OPR\/([0-9]+)\./.test(navigator.userAgent))if(48<=navigator.userAgent.match(/OPR\/([0-9]+)\./)[1])return!0;return!1},logState:function(t,i,e){var o,n="";__vizpush.prevState!==t&&(__vizpush.setCookie(__vizpush.stateCookie,t,1),o=encodeURIComponent(document.URL),o="?version="+__vizpush.version+"&advid="+__vizpush.advid+"&action="+t+"&origin="+o,n=i?("custom"===e&&(o+="&type=HTTPSCO"),"https://"+__vizpush.target+"/analyze/optinInfo"+o):"https://"+__vizpush.target+"/analyze/subMap"+o,__vizpush.first&&(n+="&useraction=1"),fetch(n,{credentials:"include"}))},logError:function(t){t=encodeURIComponent(t),t="https://"+__vizpush.target+"/analyze/error?message="+t+"&advid="+__vizpush.advid+"&version="+__vizpush.version;fetch(t,{credentials:"include"})},logEvent:function(t,i,e,o){o="https://"+__vizpush.target+"/analyze/notification?&version="+__vizpush.version+"&engid="+t+"&action="+e+"&tag="+i+"&ts="+o+"&advid="+__vizpush.advid;fetch(o,{credentials:"include"})},dismissNotification:function(t,o){setTimeout(function(){t.getNotifications().then(function(t){for(var i=(new Date).getTime(),e=0;e<t.length;e++)t[e].data.uuid===__vizpush.uuid&&(t[e].close(),logEvent(o.engid,o.uuid,"DISMISS",i))})},__vizpush.timeout)},sendWlPush:function(t){var i=(new Date).getTime();__vizpush.uuid=__vizpush.getUuid();var e={body:notData.body,tag:"wln",icon:notData.icon,requireInteraction:!0,data:{url:notData.lp,ts:i,engid:-1,uuid:__vizpush.uuid,orchestrated:0}};if(notData.image&&notData.image.enabled&&(e.image=notData.image.url),notData.button&&notData.button.enabled){var o=notData.button.cta;e.actions=o;for(var n=1;n<=e.actions.length;n++)e.actions[n-1].action="cta"+n,e.data[__vizpush.ctaUrls[n-1]]=e.actions[n-1].lp}t.showNotification(notData.title,e).then(function(){}).then(function(){__vizpush.logEvent(e.data.engid,e.data.uuid,"PUSH",i),__vizpush.dismissNotification(t,e.data)}).catch(function(t){__vizpush.logError(t.message)})},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},getUuid:function(){return(__vizpush.S4()+__vizpush.S4()+"-"+__vizpush.S4()+"-4"+__vizpush.S4().substr(0,3)+"-"+__vizpush.S4()+"-"+__vizpush.S4()+__vizpush.S4()+__vizpush.S4()).toLowerCase()},migrate:function(){var e=!1;navigator.serviceWorker.getRegistrations().then(function(t){for(var i=0;i<t.length;i++)if(-1<t[i].scope.indexOf(__vizpush.migDomain)){__vizpush.first=!0,e=!0,t[i].unregister().then(function(t){!0===t&&__vizpush.register()});break}e||__vizpush.register(),__vizpush.setCookie(__vizpush.fcmMigCookie,1,1460)}).catch(function(t){__vizpush.logError(t.message)})},register:function(){"serviceWorker"in navigator?navigator.serviceWorker.register(__vizpush.swLoc).then(function(i){var t;/\/\w+\//.test(__vizpush.swLoc)?(i.installing?t=i.installing:i.waiting?t=i.waiting:i.active&&(t=i.active),t&&("activated"==t.state&&__vizpush.genSubscription(i),t.addEventListener("statechange",function(t){"activated"==t.target.state&&__vizpush.genSubscription(i)}))):navigator.serviceWorker.ready.then(function(){__vizpush.genSubscription(i)}).catch(function(t){__vizpush.logState("NS"),__vizpush.logError(t.message)})}).catch(function(t){__vizpush.logError(t.message)}):__vizpush.logState("NS")},urlBase64ToUint8Array:function(t){t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const i=window.atob(t),e=new Uint8Array(i.length);for(let t=0;t<i.length;++t)e[t]=i.charCodeAt(t);return e},genSubscription:function(n){n.pushManager.getSubscription().then(function(t){"default"==Notification.permission&&(__vizpush.first=!0,__vizpush.logState("OP",1,"native"));var i=__vizpush.urlBase64ToUint8Array(__vizpush.vapidPublicKey);n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i}).then(function(t){var i=t.getKey?t.getKey("p256dh"):"",e=i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):"",o=t.getKey?t.getKey("auth"):"",i=o?btoa(String.fromCharCode.apply(null,new Uint8Array(o))):"",o=t.endpoint,o=encodeURIComponent(o),e=encodeURIComponent(e),i=encodeURIComponent(i);o&&e&&i?"AL"!==__vizpush.prevState&&(__vizpush.setCookie(__vizpush.stateCookie,"AL",1),t=encodeURIComponent(document.URL),t="https://"+__vizpush.target+"/analyze/subMap?subid="+o+"&auth="+i+"&key="+e+"&version="+__vizpush.version+"&advid="+__vizpush.advid+"&action=AL&origin="+t+"&ck="+__vizpush.getCookie(__vizpush.fpc),__vizpush.first&&(t+="&useraction=1",wlcmEnabled&&__vizpush.sendWlPush(n)),fetch(t,{credentials:"include"})):__vizpush.logState("NS")}).catch(function(t){"denied"===Notification.permission?__vizpush.logState("BL"):"default"===Notification.permission&&/denied/.test(t)?(__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("CL")):__vizpush.logState("NS"),__vizpush.logError(t.message)})}).catch(function(t){__vizpush.logState("NS"),__vizpush.logError(t.message)})},later:function(){__vizpush.close(),__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("BL",1,"custom")},cross:function(){__vizpush.close(),__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("CL",1,"custom")},allow:function(t){t||(__vizpush.close(),__vizpush.logState("AL",1,"custom")),__vizpush.fcmMigState?__vizpush.register():__vizpush.migrate()},init:function(){var t;!__vizpush.getCookie(__vizpush.dailyCookie)&&"https:"===document.location.protocol&&__vizpush.showOptin()&&(__vizpush.prevState=__vizpush.getCookie(__vizpush.stateCookie),__vizpush.migState=__vizpush.getCookie(__vizpush.migCookie),__vizpush.fcmMigState=__vizpush.getCookie(__vizpush.fcmMigCookie),t=!1,document.onreadystatechange=function(){/interactive|complete/i.test(document.readyState)&&!t&&(t=!0,"default"==Notification.permission&&__vizpush.isCOActive?__vizpush.hasPushSupport()?(__vizpush.prevState="",__vizpush.createDivElement(),__vizpush.logState("OP",1,"custom")):__vizpush.getCookie(__vizpush.pushSuppCookie)||(__vizpush.setCookie(__vizpush.pushSuppCookie,1,365),__vizpush.logState("NS")):(__vizpush.isCOActive||"default"!=Notification.permission||(__vizpush.prevState=""),__vizpush.allow(!0)))})}};__vizpush.init();
