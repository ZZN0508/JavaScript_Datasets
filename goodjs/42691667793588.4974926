!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CAAS_AOLCOM",[],t):"object"==typeof exports?exports.CAAS_AOLCOM=t():e.CAAS_AOLCOM=t()}(window,function(){return n={141:function(e,t,n){"use strict";e.exports={dispatchCustomEvent:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),document.dispatchEvent(n)}}},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(r,a){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"cb";return new Promise(function(t){var e=Date.now(),n=document.createElement("script"),i="_jsonp_"+e,o=[c+"="+i];Object.keys(a).forEach(function(e){o.push(e+"="+a[e])}),r+="?"+o.join("&"),n.src=r,window[i]=function(e){t(new Response(JSON.stringify(e))),n.remove(),delete window[i]},document.body.appendChild(n)})}function i(e,t){return t=t.dataset.renderPath,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ctrl:"DLPagination",m_id:"tdv2-wafer-dl",m_mode:"json",data:[e]})},fetch(t,e).then(function(e){return e.json()})}function r(e,t){try{var n=document.createElement("div");n.innerHTML=t;var i=n.querySelector(".slides .dl__slide");n.innerHTML=i&&i.innerHTML||t,e.nextSibling&&e.parentNode.removeChild(e.nextSibling),e.insertAdjacentElement("beforeend",n),window.wafer&&setTimeout(function(){window.wafer.base.emitWaferEvent("uac:adinjected",{elem:e.parentNode,ad:e,adMarkup:n}),window.wafer.base.sync(e.parentNode)},10)}catch(e){console.error(e)}}var a={GEMINI_NO_ADS:"GEMINI: NO ADS RETURNED"},c="https://ads.yap.yahoo.com/nosdk/wj/v1/getAds.do",s={jac:"jac:item",gemini:"gemini:item"};t.default={AD_TYPES:{jac:"jac",gemini:"gemini"},AD_SERVER_ERRORS:a,GEMINI_YAP_URL:c,GEMINI_TOTAL_ADS:10,PLACEMENT_TYPES:s,fetchJSONP:o,fetchGeminiData:function(e){var t=e.apiKey,n=e.adUnitCode,e=e.views,i=void 0===e?[]:e,n={local:"en_us",agentVersion:"205",adTrackingEnabled:!0,totalAds:10,publisherUrl:window.location.href,apiKey:t,adUnitCode:n};return o(c,n).then(function(e){return e.json()}).then(function(e){if(!e||e.error)throw new Error(e);var t=e.ads;if(!t||t.length<=0)throw new Error(a.GEMINI_NO_ADS);e=Math.floor(Math.random()*t.length),t=void 0!==t[e]?t[e]:t[0];return t.tag=t.tag||{},t.tag.imprTrackingUrl=t.tag.imprTrackingUrl||[],t.tag.imprTrackingUrl=t.tag.imprTrackingUrl.concat(i),t.placementType=s.gemini,t})},fetchMarkup:i,injectMarkupBesideNode:r,getDataFromIframe:function(e,t){var n=document.createElement("iframe");n.style.display="none",t.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write(e),n.contentWindow.document.close();try{return JSON.parse(n.contentWindow.document.getElementsByClassName("ad-code")[0].textContent)}catch(e){return console.error(e),{}}},fetchMarkupAndRender:function(e,t){return i(e,t).then(function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).html;r(t,e)})}}},434:function(e,t,n){e.exports=n(435)},435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(436),n=n&&n.__esModule?n:{default:n};t.default=new n.default({selector:".m-jac-ad"})},436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e},r=u(n(437)),o=u(n(438)),a=u(n(439)),c=u(n(146)),s=n(141);function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f,h=c.default.AD_TYPES,m=["fi_1374016173","fi_ad_leaderboard"],p=a.default,v=["DL1_ATF","DL3_ATF","DL5_ATF","DL10_ATF","DL20_ATF","DL40_ATF","MOBILE-DL5_ATF","MOBILE-DL20_ATF"],g=[9,24,39];function y(e){var t=this,e=e.selector;!function(e){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.elems=[].concat(l(document.querySelectorAll(e)))||[],this.initializedAdPositions=new Map,this.adRefreshCounter=0,this.waferModuleAddedQueue=[],window.wafer.ready(function(){t.waferModuleAddedQueue=t.waferModuleAddedQueue.concat([].concat(l(document.querySelectorAll(".dl-jac.wafer-module-complete")))),t.addWaferEvents(),t.processQueue()}),this.ensureJacLibIsLoaded()}t.default=(f=window.wafer.utils.loadScriptAsync,i(y,[{key:"ensureJacLibIsLoaded",value:function(){var e=this;this.jacLibLoaded?this.init():(window.JAC_CONFIG={client:{onReady:function(){e.init()}}},"complete"!==document.readyState||this.jacLibLoaded?window.addEventListener("load",function(){e.loadJacLib()}):this.loadJacLib())}},{key:"loadJacLib",value:function(){var n=this;return new Promise(function(e,t){n.jacLibLoaded?e():f({src:"https://jill.fc.yahoo.com/v1/client/js"},function(){e()},"JAC")})}},{key:"init",value:function(){this.jac=window.JAC,this.jacConfig=window.__JAC_CONFIG||p,this.ads=this.elems.reduce(function(e,t){t=r.default.fromElement(t);return t&&e.set(t.getPositionName(),t),e},new Map),this.addEventListeners(),this.setJacConfig(),(0,s.dispatchCustomEvent)("jac:inited",{}),this.processQueue()}},{key:"processQueue",value:function(){if(this.jac)for(;0<this.waferModuleAddedQueue.length;){var e=this.waferModuleAddedQueue.shift();this.handleWaferModuleAdded({elem:e})}}},{key:"addEventListeners",value:function(){var t=this;this.jac.on("FETCH_COMPLETE",function(e){t.handleAdFetch(e)}),document.addEventListener("jac:refresh",function(e){t.handleRefreshEvent(e)}),this.jac.on("AD_SIZE_CHANGED",function(e){t.handleMinHeight(e)}),this.jac.on("FETCH_ERROR",function(e){e=e.meta;(e=void 0===e?{}:e).positionNames.forEach(function(e){t.collapseMinHeight(e)})})}},{key:"addWaferEvents",value:function(){var t=this;window.wafer.on("module:added",function(e){t.handleWaferModuleAdded(e)}),window.wafer.on("dl:change",function(e){t.handleDlChange(e)})}},{key:"handleMinHeight",value:function(e){var t=e.meta,e=(t=void 0===t?{}:t).height,t=t.positionName;0!==e&&1!==e||this.collapseMinHeight(t)}},{key:"collapseMinHeight",value:function(e){e=this.ads.get(e);e&&(e.elem.style.minHeight="0px")}},{key:"handleWaferModuleAdded",value:function(){var t,n=this,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).elem,e=void 0===e?{}:e;e.classList.contains("dl-jac")&&(this.jac?(t=function(e){if(!e)return console.warn("Element not found:",e);var t=void 0;try{t=JSON.parse(e.dataset.config)}catch(t){return console.error("Error parsing config for",e)}return(t.isGeminiAd?o:r).default.fromElement(e)}(e))?t.adType===h.jac?(this.ads.set(t.getPositionName(),t),this.jac.createPosition(t.getPositionName(),t.getPlacementConfig())):(h.gemini,this.initializedAdPositions.has(t.getPositionId())||(this.initializedAdPositions.set(t.getPositionId(),t),t.renderNatively().catch(function(e){n.initializedAdPositions.delete(t.getPositionId()),console.error(e)}))):console.error("No Ad Found"):-1===this.waferModuleAddedQueue.indexOf(e)&&this.waferModuleAddedQueue.push(e))}},{key:"handleAdFetch",value:function(i){var o=this;i&&i.meta&&i.meta.positionNames&&!(0<!i.meta.positionNames.length)&&i.meta.positionNames.forEach(function(t){var e,n;0<=v.indexOf(t)&&!o.initializedAdPositions.has(t)?(e=i.meta.response.positions[t],n=void 0,o.ads.has(t)?(n=o.ads.get(t)).setConfig(e):n=r.default.fromJillResponse(t,e),o.initializedAdPositions.set(t,n),n.renderNatively().catch(function(e){o.initializedAdPositions.delete(t),console.error(e)})):console.warn("skipping placement "+t+" as it is either not a DL AD or has already been initialized")})}},{key:"handleDlChange",value:function(e){var t=e.elem,n=e.meta,i=(n=void 0===n?{}:n).index,o=void 0!==i&&i;if(t.classList.contains("dl")&&o){var a,c,r=t.dataset||{},s=r.wfAdRefreshLimit,d=r.wfAdRefreshIndexes,n=r.wfAdRefreshIds,i=3,t=g,r=m;if(s&&(s=parseInt(s,10),window.isNaN&&!window.isNaN(s)&&(i=s)),d)try{t=JSON.parse(d)}catch(e){}if(n)try{r=JSON.parse(n)}catch(e){}this.adRefreshCounter>=i||-1===t.indexOf(o)||!this.jac||(this.adRefreshCounter+=1,a=[].concat(l(this.initializedAdPositions)),c=!!document.getElementById("act-labs-holder"),0<(r=r.reduce(function(e,t){for(var n=void 0,i=0;i<a.length;i++){var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(a[i],2),r=o[0];if(o[1].getPositionId()===t){n=r;break}}return!n||c&&"fi_ad_leaderboard"===t||e.push(n),e},[])).length&&this.jac.fetch(r))}}},{key:"handleRefreshEvent",value:function(e){e=e.detail;this.jac.fetch(void 0===e?[]:e)}},{key:"setJacConfig",value:function(){var n=this;this.ads.forEach(function(e,t){n.mergePlacecmentConfig(e),n.initializedAdPositions.set(e.getPositionName(),e)}),window.__JAC_CONFIG=this.jacConfig,this.jac.setConfig(window.__JAC_CONFIG)}},{key:"mergePlacecmentConfig",value:function(e){this.jacConfig.service=this.jacConfig.service||{},this.jacConfig.service.positions=this.jacConfig.service.positions||{},this.jacConfig.client=this.jacConfig.client||{},this.jacConfig.client.positions=this.jacConfig.client.positions||{};var t=e.getPositionName();this.jacConfig.service.positions[t]=e.getServiceConfig(),this.jacConfig.client.positions[t]=e.getClientConfig()}},{key:"jacLibLoaded",get:function(){return!!window.JAC}}]),y)},437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},n=n(146),n=n&&n.__esModule?n:{default:n};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n.default.AD_TYPES,c=n.default.PLACEMENT_TYPES,s=n.default.fetchGeminiData,d=n.default.getDataFromIframe,u=n.default.fetchMarkupAndRender;function l(e,t,n,i,o){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),e&&t&&n&&(this.adType=a.jac,this.positionName=e,this.config=t,this.placement=n||t.client.target,this.elem=i||document.getElementById(n),this.content=o)}t.default=(o(l,[{key:"getPositionId",value:function(){return this.placement}},{key:"getPositionName",value:function(){return this.positionName}},{key:"setConfig",value:function(e){var t=e.config,e=e.content,e=void 0===e?{}:e;this.config=void 0===t?{}:t,this.content=e}},{key:"getPlacementConfig",value:function(){return{service:this.getServiceConfig(),client:this.getClientConfig()}}},{key:"getServiceConfig",value:function(){return this.config.service}},{key:"getClientConfig",value:function(){return this.config.client}},{key:"renderNatively",value:function(){var t=this;if(!this.content)return console.warn("No content for placement "+this.positionName);var e=d(this.content.markup,this.elem);return void 0!==e.adType&&"gemini"===e.adType?s(e).then(function(e){u(e,t.elem)}).catch(function(e){throw e}):u(i({placementType:c.jac},e),this.elem)}}],[{key:"fromElement",value:function(t){if(!t)return console.warn("Element not found:",t);var e=void 0;try{e=JSON.parse(t.dataset.config)}catch(e){return console.error("Error parsing config for",t)}if(0===Object.keys(e).length||!e.name)return null;t.id&&t.id===e.placement||(t.id=e.placement);var n={service:{alias:""+e.magicNumber,sizes:e.sizes},client:{targetElement:e.placement,render:e.render,rotation:e.rotation,mobileMoments:e.mobileMoments||"false"}};return new l(e.name,n,e.placement,t)}},{key:"fromJillResponse",value:function(e,t){if(!e||!t)return console.warn("Position name and config required");var n=t.config,n=void 0===n?{}:n,t=t.content;return new l(e,n,n.client.targetElement,null,void 0===t?{}:t)}}]),l)},438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},n=n(146),n=n&&n.__esModule?n:{default:n};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n.default.AD_TYPES,a=n.default.fetchGeminiData,c=n.default.fetchMarkupAndRender;function s(e,t,n){!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),e&&e.adUnitCode&&t&&(this.adType=r.gemini,this.config=e,this.placement=t,this.elem=n||document.getElementById(t))}t.default=(i(s,[{key:"getPositionId",value:function(){return this.placement}},{key:"renderNatively",value:function(){var t=this;return a(this.config).then(function(e){c(e,t.elem)}).catch(function(e){throw e})}}],[{key:"fromElement",value:function(t){if(!t)return console.warn("Element not found:",t);var e=void 0;try{e=JSON.parse(t.dataset.config)}catch(e){return console.error("Error parsing config for",t)}return 0!==Object.keys(e).length&&e.geminiAdUnitCode?(t.id&&t.id===e.placement||(t.id=e.placement),new s({adUnitCode:e.geminiAdUnitCode,apiKey:e.geminiApiKey||"C5VPNN3HH87ZR8M33TBQ"},e.placement,t)):null}}]),s)},439:function(e,t,n){"use strict";e.exports={service:{adServer:{"1AS":{region:"US",params:{blogname:"aol",pub:"aol",pubmarket:"us",pubsection:"main"}}},debug:!0,site:{name:"AOL",spaceId:"1197803361"},positions:{}},client:{positions:{}}}}},i={},o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="http://172.17.0.2:8080/public/assets/",o(o.s=434);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i});
