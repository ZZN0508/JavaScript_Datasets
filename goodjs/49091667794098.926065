!function e(){function t(t,r){for(var a={},o=t.length-1;-1<o;o--)0<o?a[o]=function(){var e=o;return function(){return n(t[e],a[e+1],r)}}():n(t[o],a[o+1],r)}function n(e,t,r){var a,o,n=document.createElement("script"),i=p(C[r]&&C[r].staticVer&&C[r].staticVer+"/"||e[1]);e[0]=e[0].replace("##version##",i),a=e[0].split("?")[0].split("/"),o=a[a.length-1].split(".")[0],j.test(e[1])&&i!==e[1]&&s("loader: Overriding configured version with staticVer."),n.setAttribute("src",e[0]),n&&n.addEventListener?n.addEventListener("error",function(){V[r+"_"+o+"_load_failure"]="true"}):n.attachEvent&&n.attachEvent("onerror",function(){V[r+"_"+o+"_load_failure"]="true"}),t&&(n.onload=t),document.getElementsByTagName("head")[0].appendChild(n)}function s(e){if("function"==typeof C.trace_handler)try{C.trace_handler(e)}catch(e){}}function r(e,t){var r=null!=e;return r&&("1"===e.toString()||"true"===e.toString().toLowerCase())||(!r||"0"!==e.toString()&&"false"!==e.toString().toLowerCase())&&("boolean"==typeof t&&t)}function p(e){return s("********** version before replace: "+e+" **********"),s('localNamespace[ "url_dots_to_dashes" ]: '+V.url_dots_to_dashes),s("numericVersionPattern.test( output ): "+j.test(e)),s("version after replace: "+(e=V.url_dots_to_dashes&&j.test(e)?e.replace(/\./g,"-"):e)),e}var a,o,i,l,d,c,u,f,_,h,y,m,g,v,b=window,w=b.io_global_object_name||"IGLOO",C=b[w]=b[w]||{},V=C.loader=C.loader||{},I=[],M=[],j=/^[0-9]{1,3}(\.[0-9]{1,3}){2}\/$/;if(V.loaderMain)return s("loader: Loader script has already run, try reducing the number of places it's being included."),!1;V.loaderMain=e,V.loaderVer="5.2.2",o=r(V.tp,!0),i=r(V.fp_static,!0),l=r(V.fp_dyn,!0),d=r(V.enable_legacy_compatibility),c=r(V.tp_split),u=V.tp_host&&V.tp_host.replace(/\/+$/,"")||"https://mpsnare.iesnare.com",f=V.fp_static_override_uri,_=void 0!==V.uri_hook?V.uri_hook+"/":"/iojs/",h=(V.version||"versionOrAliasIsRequired")+"/",y=V.subkey?b.encodeURIComponent(V.subkey)+"/":"",m=V.tp_resource||"wdp.js",g=V.tp_host?"&tp_host="+b.encodeURIComponent(V.tp_host):"",v=f?"&fp_static_uri="+b.encodeURIComponent(f):"",V.tp_host=u,a=r(C.enable_flash,!0),w=C.io&&C.io.enable_flash,b=C.fp&&C.fp.enable_flash,w=null!=w?r(w,!0):a,null!=b?b=r(b,!0):w=a,a=w?"&flash=true":"&flash=false",b=b?"&flash=true":"&flash=false",g="?loaderVer="+V.loaderVer+"&compat="+d+"&tp="+o+"&tp_split="+c+g+"&fp_static="+i+"&fp_dyn="+l+v,o||i||s("loader: Not currently configured to load fp_static or tp script(s)."),C.fp&&C.fp.staticVer&&C.fp.staticVer+"/"!==h&&(h=p(C.fp.staticVer+"/"),s("loader: Configured version replaced with that from pre-loaded static script.")),i||C.fp&&C.fp.staticMain?(_=(_+"##version##"+y).replace(/\/\//g,"/"),i&&(C.fp&&C.fp.staticMain?d&&!C.fp.preCompatMain&&s("loader: enable_legacy_compatibility on, but included static does not have the compat wrapper."):f?I.push([f,""]):I.push([_+"static_wdp.js"+g+b,h])),!l||C.fp&&C.fp.dynMain?C.fp&&C.fp.dynMain&&s("loader: First party dynamic script has already been loaded, disable fp_dyn or make sure you're not manually including the dynamic file separately."):I.push([_+"dyn_wdp.js"+g+b,h])):r(V.fp_dyn)&&s("loader: Invalid Config, first party dynamic script set to load without static."),o&&(C.io&&C.io.staticMain?s("loader: Third party script has already been loaded."):(_=u+"/##version##"+y,c?(M.push([_+"static_wdp.js"+g+a,h]),M.push([_+"dyn_wdp.js"+g+a,h]),V.tp_resource&&s("loader: Invalid Config: both tp_resource and tp_split set. Ignoring tp_resource.")):M.push([_+m+g+a,h]))),t(I,"fp"),t(M,"io")}();
