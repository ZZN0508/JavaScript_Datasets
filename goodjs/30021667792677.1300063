var moatjw=moatjw||function(){function u(e){var t=f(e);if(t){if(t=t.player)for(var i in C)C.hasOwnProperty(i)&&t.off(i,g);e&&(P[e]=null,delete P[e])}}function y(e,t,i){(e=f(e))&&e.moatApi.dispatchEvent({type:t,adVolume:i})}function l(e){return"number"==typeof e&&!isNaN(e)}function f(e){if(e)return P&&P[e]}function p(e,t,i,n){if(e&&t&&i&&l(n)){for(var r,a=["first","mid","third"],o=[],d=0,u=a.length;d<u&&((r=e[r=a[d]]).sent||o.push(r),i!==r.event);d++);for(d=0,u=o.length;d<u;d++)(r=o[d]).sent=!0,y(t,r.event,n)}}function s(e){return!!e&&((e=f(e))&&e.quartiles)}function g(e){var t,i,n=e.type,r=C[n];if(!(o=e.id))e:{for(var a in P)if(P.hasOwnProperty(a)&&(o=P[a])&&o.player===this){o=a;break e}o=void 0}if(a=o,"adTime"===n)e:{if(i=s(a),r=e.duration,e=e.position,l(r)&&l(e)&&0!==r&&0!==e?(e=e/r*100,(r=f(a))&&!r.checkedAdTime&&(r.checkedAdTime=!0,100===e&&(e=0))):e=0,r=i,a&&l(e)&&r&&r)for(t in r)if(r.hasOwnProperty(t)){var o,d=n=r[t];if(l(o=e)&&d&&!d.sent&&o>=d.min&&o<=d.max){r=n.event;break e}}r=void 0}r&&(t=w(this),"AdVideoComplete"===r&&p(i=s(a),a,r,t),"AdVideoFirstQuartile"===r||"AdVideoMidpoint"===r||"AdVideoThirdQuartile"===r?p(i,a,r,t):y(a,r,t),"AdVideoComplete"!==r&&"AdSkipped"!==r&&"AdStopped"!==r||u(a))}function V(e,t){return"GDFP"===e||"googima"===t}function w(e){if(e)return e.getMute()?0:l(e=e.getVolume())?1<e?e/100:e:void 0}function t(e){e&&(y(e,"AdStopped",0),u(e))}var C={adComplete:"AdVideoComplete",adSkipped:"AdSkipped",adError:"AdError",adStarted:"AdStarted",adImpression:"AdImpression",adPlay:"AdPlaying",adPause:"AdPaused",volume:"AdVolumeChange",mute:"AdVolumeChange",adTime:null,remove:"AdStopped"},P={};return{add:function(e){if(!e)return!1;var t,i=e.partnerCode,n=!!(n=e.player)&&("function"==typeof n.on?n:!!n.player&&("function"==typeof n.player.on&&n.player)),r=e.adImpressionEvent;if(!i||!n||!r)return!1;e:{for(var r=0,a=(i=["getContainer","off","on","getMute","getVolume"]).length;r<a;r++)if("function"!=typeof n[i[r]]){i=!1;break e}i=!0}if(!i)return!1;e:if(e){var o,d,u,l,f,p,i=e.partnerCode,s=e.adImpressionEvent,m=V(r=s.adsystem,a=s.client)?(m=s.ima)&&m.ad:s;try{(u=e.ids)||(l=m,d={},u=d=V(r,a)?!!l&&(ids={level1:"-",level2:"-",level3:l.getAdId()||null,level4:l.getCreativeId()||null}):d),t=e.container||n.getContainer(),(p=e.duration)||(l=m,p=f=V(r,a)?l.getDuration():f);var c=s&&s.id;if(!c||P.hasOwnProperty(c))for(;c=Math.floor(1e5*Math.random()).toString(),P.hasOwnProperty(c););var v,h=s.tag;(v=e.url)||(e=m,V(r,a)&&e.getMediaUrl(),v=e.mediafile&&e.mediafile.file),o={adSystem:r,adData:m,client:a,adIds:u,container:t,duration:p,id:c,partnerCode:i,player:n,tag:h,url:v,checkedAdTime:!1,quartiles:{first:{event:"AdVideoFirstQuartile",sent:!1,min:25,max:50},mid:{event:"AdVideoMidpoint",sent:!1,min:50,max:75},third:{event:"AdVideoThirdQuartile",sent:!1,min:75,max:100}}}}catch(e){t=!1;break e}t=o}else t=!1;if(!t)return!1;if(o=t.id,(P[o]=t)&&n){if(n)for(var A in C)C.hasOwnProperty(A)&&n.on(A,g);t.moatApi=function(e){var t,i,n=e.container,r=e.adIds,a=e.duration,o=e.partnerCode,d=e.url,u=document.createElement("script"),l=[],f="_moatApi"+Math.floor(1e5*Math.random()),r={adData:{ids:r,duration:a,url:d},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l&&l.push(e)}};V(e.adSystem,e.client)&&(r["imaSDK-Plugin"]=!0,r.imaAd=e.adData),r.plugin=0;try{i=(t=n.ownerDocument).defaultView||t.parentWindow}catch(e){t=document,i=window}return i[f]=r,u.type="text/javascript",n&&n.insertBefore(u,n.childNodes[0]||null),u.src="https://z.moatads.com/"+o+"/moatvideo.js#"+f,r}(t),t.moatApi&&y(t.id,"AdImpression",w(n))}return o},remove:t,removeAll:function(){for(var e in P)P.hasOwnProperty(e)&&t(e)}}}();
