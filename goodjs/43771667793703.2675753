(this.$WP=this.$WP||[]).push(["1x56sm",(e,p)=>{"use strict";var c,t,o,l,n,d=(e,p)=>{switch(p){case 0:return d(e,100);case 100:return 100<e.popupMaxTier||e.popupSkipTiers&&e.popupSkipTiers.get(100)?d(e,200):100;case 200:return e.popupSkipTiers&&e.popupSkipTiers.get(200)?d(e,300):200;case 300:return e.popupSkipTiers&&e.popupSkipTiers.get(300)?d(e,400):300;case 400:return 400;default:return 0}},r=(e,p,r,s)=>{var i=e.popupNodes,u=e.popupTier,t=e.popupTierEvents,o=e.popupSkipTiers,n=e.popupTierDismissals,T=p.tier;s&&(o=e.popupSkipTiers.set(T,!0)),e.popupNodes.some(e=>e.key===p.key)||(i=[...e.popupNodes,p],u=d(Object.assign({},e,{popupSkipTiers:o}),0),t=[]);var a=n.get(T),s=r.filter(e=>!(null!=a&&a.includes(e)));return 0<s.length&&(a&&0<a.length&&0<s.length?n.set(T,[...a,...s]):n.set(T,r)),Object.assign({},e,{popupNodes:i,popupTierDismissals:n,popupTierEvents:t,popupTier:u,popupSkipTiers:o})},s=(e,p)=>{var r=e.popupTierEvents;if(p.forEach(e=>{r.includes(e)||(r=[...r,e])}),r.toString()===e.popupTierEvents.toString())return e;var s={popupTierEvents:e.popupTierEvents,popupTier:e.popupTier};(null!=(p=e.popupSkipTiers)&&p.get(e.popupTier||0)||e.popupTierDismissals&&0<e.popupNodes.length&&void 0!==e.popupTier&&(r&&0<(null==r?void 0:r.length)||0===e.popupTier))&&(s=(p=>{var e,r=e=>Object.assign({},p,{popupTier:e,popupTierEvents:[]});if(Array.from(p.popupTierEvents||[]).sort().toString()===Array.from((null==(e=p.popupTierDismissals)?void 0:e.get(p.popupTier||0))||[]).sort().toString())switch(p.popupTier){case 0:return r(d(p,100));case 100:return r(d(p,200));case 200:return r(d(p,300));case 300:return r(d(p,400));case 400:return r(d(p,500));default:return p}return p})(Object.assign({},e,{popupTierEvents:r})));p=e.popupMaxTier;return e.popupMaxTier<s.popupTier&&(p=s.popupTier),Object.assign({},e,{popupTierEvents:s.popupTierEvents,popupMaxTier:p,popupTier:s.popupTier})},T=(e={popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map},p)=>{switch(p.type){case"REGISTER_POPUP":return void 0!==p.element?r(e,p.element,p.dismissEvents,p.skip):(console.error("Missing element for action in the popup reducer."),e);case"DISMISS_POPUP":return s(e,p.dismissEvents);default:return e}},i=({children:e})=>e,u=({children:e})=>{var[p,s]=t(T,{popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),r=o((e,p,r)=>{s({type:"REGISTER_POPUP",element:e,dismissEvents:p,skip:r})},[s]),i=o(e=>{s({type:"DISMISS_POPUP",dismissEvents:e})},[s]),u=c.useMemo(()=>({registerPopupTier:r,dismissEvents:i}),[r,i]);return c.createElement(l.Provider,{value:u},c.createElement(n,null,e),p.popupNodes.filter(e=>e.tier===p.popupTier).map(({node:e,key:p})=>c.createElement(n,{key:p},e)))},a=e=>{var{registerPopupTier:p,dismissEvents:r}=c.useContext(l),{factory:s,key:i,eventTypes:u,tier:t,skip:o}=e,n=c.useRef(null),T=c.useCallback(()=>{r(u)},[r,u]),a=c.useMemo(()=>({dismiss:T}),[T]);return c.useEffect(()=>{n.current=s(a),p({node:n.current,key:i,tier:t},u,o)},[u,s,i,p,a,t,o]),{dismiss:T}};return[()=>{l=c.createContext({registerPopupTier:()=>{},dismissEvents:()=>{}}),n=c.memo(i),e({DISMISS_POPUP:"DISMISS_POPUP",PopupHierarchyLithiumProvider:u,REGISTER_POPUP:"REGISTER_POPUP",dismiss:s,popupReducer:T,register:r,usePopupHierarchyRender:a})},[e=>(t=(c=e).useReducer,o=e.useCallback)]]},["cDcdfi"]]);
