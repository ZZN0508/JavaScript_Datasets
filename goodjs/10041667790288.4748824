define([],function(){function t(){this._init()}function i(t,n){return{context:t,handler:n,once:!1}}return t.prototype={_init:function(){this.list=[]},_callHandler:function(t,n,i){return t.call(n,i),this},trigger:function(t){for(var n=this,i=n.list.slice(),e=arguments[1],r=[],c=0,s=i.length;c<s;c++){var h=i[c];h&&(h.once&&r.push(h),n._callHandler(h.handler,h.context,t,e))}return r.forEach(function(t){t=n.list.indexOf(t);-1!==t&&n.list.splice(t,1)}),n},attach:function(t,n){return this.list.push(i(n,t)),this},attachOnce:function(t,n){t=i(n,t);return t.once=!0,this.list.push(t),this},detach:function(t,n){for(var i=this.list,e=i.length;0<e--;){var r=i[e];r.handler===t&&r.context===n&&i.splice(e,1)}return this},hasHandlers:function(){return 0!==this.list.length},switchListener:function(t,n,i){return t?this.attach(n,i):this.detach(n,i)}},{OkEvent:t,create:function(){return new t}}});
