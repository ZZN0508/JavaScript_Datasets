(window.webpackJsonp=window.webpackJsonp||[]).push([[445],{1361:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var e=n(230),d=n.n(e),e=n(138),u=n.n(e),O=n(18),e=n(20),b=n.n(e);async function c(t,e={}){const n=(new Date).getTime(),{responseHeaders:c,...a}=t,r=u.a.format(a),o=Object(O.createLogger)("dal",{url:r});try{const t=await fetch(r,e),a=await async function(t){const{ok:e,status:n,statusText:c}=t,a={ok:e,status:n,statusText:c};let r="";try{if(r=await t.text(),!e)return{...a,data:{text:r}};const n=JSON.parse(r);return{...a,data:n}}catch(t){return{...a,data:{text:r}}}}(t);if(c){const e=(i=t,s=c,b()(s).call(s,(t,e)=>({...t,[e]:i.headers.get(e)}),{}));a.data={...a.data,responseHeaders:e}}return o.info({responseTime:d()()-n+"ms",fetchOptions:e},"dal request"),a}catch(t){switch(!0){case"FetchError"===t.name&&"request-timeout"===t.type:throw new Error("Timeout exceeded for "+r);case"FetchError"===t.name&&"invalid-json"===t.type:throw new Error("Got non-JSON or invalid JSON response for "+r);default:throw t}}var i,s}},2118:function(t,e,n){"use strict";n.r(e),n.d(e,"clientLoader",function(){return l});var i=n(5),s=n(74),c=n(1361),e=n(174);const a=Object(e.a)("UPS2","HOST","PURCHASE"),r=Object(e.a)("UPS2","PROTOCOL","PURCHASE","https");var d=n(48);function*o(){yield Object(i.c)(O),yield Object(i.c)(u)}function*u(){var t=yield Object(i.i)(s.h),e=yield Object(i.i)(s.g),n=Object(s.d)(e),e=Object(s.b)(e);t&&n&&!e&&(yield Object(i.c)(b))}function*O(){const t=yield Object(i.i)(s.h),e=window["SubsSdk"];if(t&&e){const t=yield Object(i.i)(s.g),n=Object(s.b)(t),c=Object(d.getEnv)("PIANO_APP_ID"),a=Object(d.getEnv)("PIANO_TINYPASS_HOST"),r=Object(d.getEnv)("PIANO_WX_API_HOST"),o=n;yield Object(i.c)([e,e.init],{pianoAppID:c,tinyPassHost:a,pianoKeyHost:r,disableAdBlocker:o})}}function*b(){var t={host:a,protocol:r,pathname:"/purchase/token"};yield Object(i.c)(c.a,t,{credentials:"include"})}async function l(t){await t.runSaga(o)}}}]);
