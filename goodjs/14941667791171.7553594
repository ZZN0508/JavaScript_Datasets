!function(){var O,S,t;void 0===window.QIHOO_MONITOR&&(O=["360.cn","so.com","leidian.com"],S=function(i){var a;!function(){a=!0;try{var t=location.protocol.toLowerCase();"http:"!=t&&"https:"!=t||(a=!1)}catch(t){}}();var o,t,c,u=document,r=navigator,s=i.screen,g=a?"":document.domain.toLowerCase(),h=r.userAgent.toLowerCase(),n=function(t){return t.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")},d=function(t,e,n){t.addEventListener?t&&t.addEventListener(e,n,!1):t&&t.attachEvent("on"+e,n)},l=function(t,e,n){for(n=n||5,e=e.toUpperCase();t&&0<n--;){if(t.tagName===e)return t;t=t.parentNode}return null},f=function(t){var e;return"target"in t||((e=t.srcElement||t.target)&&3==e.nodeType&&(e=e.parentNode),t.target=e),t},m={isArray:function(t){return"Array"==(null!=(t=t)&&null!=t.constructor?Object.prototype.toString.call(t).slice(8,-1):"")},isObject:function(t){return null!==t&&"object"==typeof t},mix:function(t,e,n){for(var r in e)!n&&(t[r]||r in t)||(t[r]=e[r]);return t},encodeURIJson:function(t){var e,n=[];for(e in t)null!=t[e]&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")}},p=function(t){try{var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=u.cookie.match(n))?unescape(e[2]):""}catch(t){return""}},v=function(t,e,n){var r=(n=n||{}).expires;"number"==typeof r&&(r=new Date).setTime(r.getTime()+n.expires);try{u.cookie=t+"="+escape(e)+(r?";expires="+r.toGMTString():"")+(n.path?";path="+n.path:"")+(n.domain?"; domain="+n.domain:"")}catch(t){}},w=function(t){try{return JSON.parse(i.localStorage.getItem(t))}catch(t){return[]}},b=function(t,e){try{i.localStorage.setItem(t,JSON.stringify(e))}catch(t){}},_=function(t){try{i.localStorage.removeItem(t)}catch(t){}},x={getColorDepth:function(){return s.colorDepth+"-bit"},getLanguage:function(){return(r.language||r.browserLanguage).toLowerCase()},getScreenSize:function(){return s.width+"x"+s.height},getProject:function(){return""},getReferrer:function(){var t=u.referrer||"";return-1<t.indexOf("pass")||-1<t.indexOf("pwd")?"403":t},getBrowser:function(){var t,e={"360se-ua":"360se",TT:"tencenttraveler",Maxthon:"maxthon",GreenBrowser:"greenbrowser",Sogou:"se 1.x / se 2.x",TheWorld:"theworld"};for(t in e)if(-1<h.indexOf(e[t]))return t;var n=!1;try{1013<+external.twGetVersion(external.twGetSecurityID(i)).replace(/\./g,"")&&(n=!0)}catch(t){}if(n)return"360se-noua";var r=h.match(/(msie|chrome|safari|firefox|opera|trident)/);return"msie"==(r=r?r[0]:"")?r=h.match(/msie[^;]+/)+"":"trident"==r&&h.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/gi,function(t,e){r="msie "+e}),r},getLocation:function(){var e="";try{e=location.href}catch(t){(e=u.createElement("a")).href="",e=e.href}return/\.(s?htm|php)/.test(e)?e:e.replace(/\/$/,"")+"/"},hash:function(t){for(var e,n=0,r=t.length-1;0<=r;r--){var i=parseInt(t.charCodeAt(r),10);0!=(e=266338304&(n=(n<<6&268435455)+i+(i<<14)))&&(n^=e>>21)}return n},guid:function(){for(var t=[r.appName,r.version,r.language||r.browserLanguage,r.platform,r.userAgent,s.width,"x",s.height,s.colorDepth,u.referrer].join(""),e=t.length,n=i.history.length;n;)t+=n--^e++;return 2147483647*(Math.round(2147483647*Math.random())^x.hash(t))},getSid:function(){var t=(t=!(t=p("__DC_sid"))&&(t=p("__sid"))&&4!==t.split(".").length?null:t)||[x.hash(a?"":u.domain),x.guid(),+new Date+Math.random()].join("."),e={expires:60*(x._activeTime||30)*1e3,path:"/"};return v("__DC_sid",t,e),t},getMid:function(){try{return external.GetMID(external.GetSID(i))}catch(t){return""}},getGid:function(){var t=(t=!(t=p("__DC_gid"))&&(t=p("__gid"))&&5!==t.split(".").length?null:t)?((t=t.split("."))[3]=(new Date).getTime(),t[4]=(parseInt(t[4])||1)+1,t.join(".")):[x.hash(a?"":u.domain),Math.floor(1e9*Math.random()),(new Date).getTime(),(new Date).getTime(),1].join("."),e={expires:63072e6,path:"/"};if(O.length)for(var n=0;n<O.length;n++){var r=O[n],i="."+r;if(0<g.indexOf(i)&&g.lastIndexOf(i)==g.length-i.length||g==r){e.domain=i;break}}return v("__DC_gid",t,e),t},getGuid:function(){if(!(t=p("__guid"))){var t=[x.hash(a?"":u.domain),x.guid(),+new Date+Math.random()+Math.random()].join("."),e={expires:2592e7,path:"/"};if(O.length)for(var n=0;n<O.length;n++){var r=O[n],i="."+r;if(0<g.indexOf(i)&&g.lastIndexOf(i)==g.length-i.length||g==r){e.domain=i;break}}v("__guid",t,e)}return t},getCount:(t=(t=p("__DC_monitor_count"))||p("monitor_count"),t=(parseInt(t)||0)+1,v("__DC_monitor_count",t,{expires:864e5,path:"/"}),function(){return t}),getFlashVer:function(){var t=-1;if(r.plugins&&r.mimeTypes.length){var e=r.plugins["Shockwave Flash"];e&&e.description&&(t=e.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0")}else if(i.ActiveXObject&&!i.opera)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");n&&(t=n.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,"."))}catch(t){}return parseInt(t,10)},getContainerId:function(t){var e,n;for(I.areaIds&&(e=new RegExp("^("+I.areaIds.join("|")+")$","ig"));t;){if(t.attributes&&("bk"in t.attributes||"data-bk"in t.attributes)){if(n=t.getAttribute("bk")||t.getAttribute("data-bk"))return(n="bk:"+n).substr(0,100);if(t.id)return(n=t.getAttribute("data-desc")||t.id).substr(0,100)}else if(e&&t.id&&e.test(t.id))return(n=t.getAttribute("data-desc")||t.id).substr(0,100);t=t.parentNode}return""},getText:function(t){var e="input"==t.tagName.toLowerCase()?t.getAttribute("text")||t.getAttribute("data-text")||t.value||t.title||"":t.getAttribute("text")||t.getAttribute("data-text")||t.innerText||t.textContent||t.title||"";return n(e).substr(0,100)},getHref:function(t){try{return t.getAttribute("data-href")||t.href||""}catch(t){return""}}},C=(o=[],{addPlugin:function(e){var t,n;if(m.isArray(e))for(n=e.length,t=0;t<n;t++)T(e[t]);else T(e);return function(){var t;t=e,o.splice(o.indexOf(t),1),e=null}},getExtend:function(t,e){for(var n=o.length,r=e,i=0;i<n;i++)try{r=m.mix(r,o[i].beforeLog(t,e))}catch(t){}return r}}),y={cache:{},getBase:function(){return{p:x.getProject(),u:x.getLocation(),guid:x.getGuid(),gid:x.getGid(),sid:x.getSid(),title:document.title,mid:x.getMid()}},getTrack:function(t){var e=x.getSid()===x.getSid()?1:0,e={b:x.getBrowser(),c:x.getCount(),r:x.getReferrer(),fl:x.getFlashVer(),sd:x.getColorDepth(),sr:x.getScreenSize(),ul:x.getLanguage(),ce:e};if(t){for(var n=[],r=0,i=(t=t.split(",")).length;r<i;r++){var a=p(t[r]);n.push(t[r]+"="+encodeURIComponent(a))}e.uc=encodeURIComponent(n.join("&"))}return e},getClick:function(t){var e=(t=f(t||event)).target,n=e.tagName,r=x.getContainerId(e);if(!e.type||"submit"!=e.type&&"button"!=e.type)return"AREA"==n?{f:x.getHref(e),c:"area:"+e.parentNode.name,cId:r}:("IMG"==n&&(a=e),!!(e=l(e,"A"))&&(i=x.getText(e),{f:x.getHref(e),c:i||(a?a.src.match(/[^\/]+$/):""),cId:r}));var i,a,t=l(e,"FORM"),n={};return t?(i=t.id||"",a=e.id,n={f:t.action,c:"form:"+(t.name||i),cId:r},"search-form"!=i&&"searchForm"!=i||"searchBtn"!=a&&"search-btn"!=a||(a=k("kw")||k("search-kw")||k("kw1"),n.w=a?a.value:"")):n={f:x.getHref(e),c:x.getText(e),cId:r},n},getKeydown:function(t){if(13!=(t=f(t||event)).keyCode)return!1;var e=t.target,n=e.tagName,r=x.getContainerId(e);if("INPUT"==n){var i=l(e,"FORM");if(i){t=i.id||"",n=e.id,r={f:i.action,c:"form:"+(i.name||t),cId:r};return"kw"!=n&&"search-kw"!=n&&"kw1"!=n||(r.w=e.value),r}}return!1},getBaseExtend:function(){return{}},getCacheLog:function(){if(!y.cache)return null;var t,e=[];for(t in y.cache)e.push(y.cache[t]);return e}},I={trackUrl:null,clickUrl:null,areaIds:null,hbLogTimer:0,cacheKey:"__DC_log"},k=function(t){return document.getElementById(t)};function T(t){t&&"function"==typeof t.beforeLog&&o.push(t)}return{version:"v1.8.0 (2018.12.06)",util:x,data:y,config:I,sendLog:(i.__qihoo_monitor_imgs={},function(t){var e="log_"+ +new Date,n=i.__qihoo_monitor_imgs[e]=new Image;y.cache[e]=t,n.onload=n.onerror=function(){i.__qihoo_monitor_imgs&&i.__qihoo_monitor_imgs[e]&&(i.__qihoo_monitor_imgs[e]=null,delete i.__qihoo_monitor_imgs[e],y.cache[e]=null,delete y.cache[e])},n.src=t}),buildLog:(c="",function(t,e){var n,r;!1!==t&&(t=t||{},n=y.getBase(),r=y.getBaseExtend(),r=m.mix(n,r,!0),t=m.mix(r,t,!0),(r=e+m.encodeURIJson(t))!=c&&(c=r,setTimeout(function(){c=""},100),t=m.encodeURIJson(t),t+="&t="+ +new Date,e=-1<e.indexOf("?")?e+"&"+t:e+"?"+t,this.sendLog(e)))}),log:function(t,e){var n=I[(e=e||"click")+"Url"];n||console.error("Analytic Error : the "+e+"url does not exist!"),this.buildLog(C.getExtend(e,t),n)},setConf:function(t,e){var n={};return m.isObject(t)?n=t:n[t]=e,this.config=m.mix(this.config,n,!0),this},setUrl:function(t){return t&&(this.util.getLocation=function(){return t}),this},extendBase:function(t){var e;return t&&m.isObject(t)&&(e=m.mix(this.data.getBaseExtend(),t,!0),this.data.getBaseExtend=function(){return e}),this},setProject:function(t,e){return t&&(this.util.getProject=function(){return t}),this.extendBase(e),this},setId:function(){for(var t,e=[],n=0;t=arguments[n++];)m.isArray(t)?e=e.concat(t):e.push(t);return this.setConf("areaIds",e),this},init:function(){this.startCache(),this.getClickAndKeydown(),this.getClickHeatmap(10,1)},getTrack:function(t,e){t=this.data.getTrack(t);return m.isObject(e)&&(t=m.mix(t,e,!0)),this.log(t,"track"),this},getClickHeatmap:function(e,n){if(this.heatmapTimer)return this;this.heatmapTimer=!0;var r=this,i=[];e=e||10,n=n||5;function a(t){if(clearTimeout(o),t||i.length>e)return i.length?(r.log({pos:i.join(","),sr:x.getScreenSize()},"clickHeatMap"),void(i=[])):void 0;o=setTimeout(function(){a(!0)},60*n*1e3)}var o=0;return d(u,"mousedown",function(t){t=t.pageX+"."+t.pageY;i.push(t),a()}),this},getClickAndKeydown:function(){var e=this;return d(u,"mousedown",function(t){t=e.data.getClick(t);e.log(t,"click")}),d(u,"keydown",function(t){t=e.data.getKeydown(t);e.log(t,"click")}),S.getClickAndKeydown=function(){return e},this},beginHeartBeat:function(t,e,n){var r={};r.id=t,m.isObject(e)&&(r=m.mix(r,e,!1)),60<(n=isNaN(n)?10:n)?n=60:n<5&&(n=5);var i=this,a=function(t){r.steptime=t,i.setConf("hbStarttime",Date.parse(new Date)),i.log(r,"heartbeat"),clearTimeout(I.hbLogTimer),I.hbLogTimer=setTimeout(function(){var t=(Date.parse(new Date)-I.hbStarttime)/1e3;a(t)},1e3*n)};return a(0),this},endHeartBeat:function(t,e){var n;return void 0!==I.hbStarttime&&null!==I.hbStarttime&&((n={}).id=t,m.isObject(e)&&(n=m.mix(n,e,!1)),clearTimeout(I.hbLogTimer),e=(Date.parse(new Date)-I.hbStarttime)/1e3,n.steptime=e,this.log(n,"heartbeat"),this.setConf("hbStarttime",null)),this},setActiveTime:function(t){return x._activeTime=t,this},addPlugin:function(t){return C.addPlugin(t)},startCache:function(){var t=w(I.cacheKey);if(t){for(var e=t.length,n=0;n<e;n++)this.sendLog(t[n]);_(I.cacheKey)}return d(i,"unload",function(){var t=y.getCacheLog();t&&b(I.cacheKey,t)}),this}}}(window),t="https:"===location.protocol.toLowerCase()?"https:":"http:",S.setConf({trackUrl:t+"//s.360.cn/qdas/s.htm",clickUrl:t+"//s.360.cn/qdas/c.htm",clickHeatMapUrl:t+"//s.360.cn/qdas/t.htm",wpoUrl:t+"//s.360.cn/qdas/p.htm",heartbeatUrl:t+"//s.360.cn/qdas/h.htm"}).init(),window.QIHOO_MONITOR=S,void 0===window.monitor&&(window.monitor=S))}();
