var AWIN;(AWIN=AWIN||{pluginsInitialized:!1}).publisher={publisherId:304459,siteName:"http://buzzfeed.com",companyName:"BuzzFeed",primaryPromotionType:"Editorial Content"},(AWIN=AWIN||{}).initUrl=AWIN.initUrl||"https://www.dwin2.com/init.js",Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),function(r){var a={},i={events:{},on:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},dispatch:function(e,t){if(this.events[e])for(var n in this.events[e])this.events[e][n](t)}};r.findMetaByName=function(e){for(var t={},n=document.getElementsByTagName("meta"),r=0;r<n.length;r++)n[r].name&&n[r].content&&0===n[r].name.indexOf(e)&&(t[n[r].content]||(t[n[r].content]=[]),t[n[r].content].push(n[r].name.split(":")[1]));return t},r.findPluginInstructions=function(e){var t=this.findMetaByName("awin");return t[e]||null},r.appendScript=function(e,t,n){var r=document.createElement("script");"function"==typeof n&&(r.onload=r.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(setTimeout(n,1),r.onload=r.onreadystatechange=null)}),r.setAttribute("src",e),t&&Object.keys(t).forEach(function(e){"id"===e?r.id=t.id:r.setAttribute(e,t[e])}),document.body.appendChild(r)},r.contentReady=function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&e()})},r.initPlugins=function(){r.contentReady(function(e){r.appendScript(AWIN.initUrl)})},r.runPlugins=function(e){if(!r.pluginsInitialized)for(var t in r.pluginsInitialized=!0,e)if("function"==typeof a[t])try{var n=this.getPublisherConfig(t);r.mergeObject(n,e[t]),a[t](this.publisher,n,i)}catch(e){}},r.mergeObject=function(e,t){for(var n in t)e[n]&&"object"==typeof e[n]&&!Array.isArray(e[n])?r.mergeObject(e[n],t[n]):e[n]=t[n]},r.getPublisherConfig=function(e){return r.PluginConfig&&r.PluginConfig[e]?r.PluginConfig[e]:{}},r.addPlugin=function(e,t){return"function"==typeof t&&(a[e]=t,!0)}}(AWIN),AWIN.PluginConfig=AWIN.PluginConfig||{},AWIN.PluginConfig.bouncelesstracking={appends:{3355:"utm_source=Affiliate_Window&utm_medium=!!!sitename!!!",4032:"pid=!!!aid!!!",15124:"source=aw&utm_source=!!!sitenamechar!!!&utm_medium=affiliate-US",15527:"source=aw&utm_source=awin&utm_medium=!!!companyname!!!&utm_term=!!!promotype!!!&utm_content=!!!clickref!!!&utm_campaign=!!!sitenamechar!!!",16561:"source=aw&utm_source=aw&utm_medium=affiliate&utm_campaign=!!!id!!!",17197:"cid=usa&utm_source=AWIN&utm_medium=affiliate&utm_campaign=$br-naked$ct-us$ba-!!!id!!!$ob-signup_order",18714:"utm_medium=awin&utm_source=!!!affid!!!_!!!companyname!!!  ",20758:"utm_source=awin",20973:"source=aw",21465:"utm_source=awin&utm_medium=affiliate&utm_term=!!!id!!!-!!!companyname!!!",21680:"utm_source=awin&utm_medium=affiliate&publisher=!!!affid!!!",22570:"utm_source=awin_!!!affiliatedomain!!!_!!!sitename!!!_!!!affid!!!_usa&utm_medium=cpc_affiliates&utm_campaign=soundtrap_freemium_performancemarketing_alwayson_awin-affiliate_!!!promotype!!!",23035:"source=aw",23363:"utm_source=awin&utm_medium=affiliate&utm_term=!!!id!!!-!!!companyname!!!"}},AWIN.addPlugin("bouncelesstracking",function(i,n,r){var e,s={};function c(e,t,n,r,a,i){return p((i=p(p(t,e),p(r,i)))<<a|i>>>32-a,n)}function l(e,t,n,r,a,i,o){return c(t&n|~t&r,e,t,a,i,o)}function _(e,t,n,r,a,i,o){return c(t&r|n&~r,e,t,a,i,o)}function m(e,t,n,r,a,i,o){return c(t^n^r,e,t,a,i,o)}function f(e,t,n,r,a,i,o){return c(n^(t|~r),e,t,a,i,o)}function p(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return s._DATA_ATTRIBUTE_NAME="data-blt",s._REFERRER_PARAM_NAME="extr",s._MODE_PARAM_NAME="bltmode",s._AWC_PARAM_NAME="bawc",s._HASH_PARAM_NAME="blthash",s._canUseBeacon=function(){return"function"==typeof navigator.sendBeacon},s._isInternetExplorer=-1<window.navigator.userAgent.indexOf("MSIE ")||-1<window.navigator.userAgent.indexOf("Trident/7."),s._beaconEndpoint=n.beaconEndpoint||"https://www.zenaps.com/blt",s._beaconEndpointResource=n.beaconEndpointResource||"favicon.ico",s._analyticalEndpoint=n.analyticalEndpoint||"https://ri1697oh1m.execute-api.eu-central-1.amazonaws.com/v1/blt",s._blockers=n.blockers||["dailygo","monotote","roeye"],s._affiliateId=i.publisherId,s._config=n,s._appends=n.appends,s._otherPluginsAllowBlt=function(){for(var e=0;e<s._blockers.length;e++){var t=s._blockers[e];if(AWIN.PluginConfig[t])return!1}return!0},s._browserAllowsBlt=function(){return s._canUseBeacon()&&!s._isInternetExplorer},s._deeplinkParameterAllowsBlt=function(e){return!(!e.p||-1===e.p.indexOf("http"))||!(!e.ued||-1===e.ued.indexOf("http"))},s._userAllowsBlt=function(e){return!e||"0"!==e},s._advertiserAllowsBlt=function(e){e=parseInt(e);return void 0!==s._config.advertisers&&null!==s._config.advertisers&&-1!==s._config.advertisers.indexOf(e)},s._cloneObject=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},s._removeQueryStringFromUrl=function(e){return(e||"").split("?")[0]},s._getAdvertiserIdFromQueryParameters=function(e){return e.awinmid||e.mid||e.v||void 0},s._getQueryParams=function(e){for(var t,n={},r=/[?&]?([^=]+)=(\[\[.*\]\]|[^&]*)/g;t=r.exec(e);)n[t[1]]=t[2];return n},s._addParametersToUrl=function(e,t){if("string"==typeof e){var n=e.split("?"),e=Object.keys(t).map(function(e){return e+"="+s._addBracketsToParameterValueAndEncodeIfNeeded(t[e],e)});return 1<n.length&&e.push(n[1]),n[1]=e.join("&"),n.join("?")}},s._addParameterToUrl=function(e,t,n){if("string"==typeof e){var r=new Array(1);return r[t]=n,s._addParametersToUrl(e,r)}},s._addBracketsToParameterValueAndEncodeIfNeeded=function(e,t){return e.toString().match(/^http/g)?(e.toString().match(/^https?\:/g)&&(e=encodeURIComponent(e)),"ued"===t?e:"[["+e+"]]"):e},s._buildAwc=function(e){if(e){var t=Date.now()/1e3|0;return e+"_"+t+"_"+s._md5(Math.random().toString(36)+t)}},s._buildBltHash=function(e){return s._md5(e+Math.random().toString(36)+Date.now())},s._md5=function(e){return function(e){for(var t,n="0123456789ABCDEF",r="",a=0;a<e.length;a++)t=e.charCodeAt(a),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(64+t>>>9<<4)]=t;for(var n=1732584193,r=-271733879,a=-1732584194,i=271733878,o=0;o<e.length;o+=16){var c=n,u=r,s=a,d=i,r=f(r=f(r=f(r=f(r=m(r=m(r=m(r=m(r=_(r=_(r=_(r=_(r=l(r=l(r=l(r=l(r,a=l(a,i=l(i,n=l(n,r,a,i,e[o+0],7,-680876936),r,a,e[o+1],12,-389564586),n,r,e[o+2],17,606105819),i,n,e[o+3],22,-1044525330),a=l(a,i=l(i,n=l(n,r,a,i,e[o+4],7,-176418897),r,a,e[o+5],12,1200080426),n,r,e[o+6],17,-1473231341),i,n,e[o+7],22,-45705983),a=l(a,i=l(i,n=l(n,r,a,i,e[o+8],7,1770035416),r,a,e[o+9],12,-1958414417),n,r,e[o+10],17,-42063),i,n,e[o+11],22,-1990404162),a=l(a,i=l(i,n=l(n,r,a,i,e[o+12],7,1804603682),r,a,e[o+13],12,-40341101),n,r,e[o+14],17,-1502002290),i,n,e[o+15],22,1236535329),a=_(a,i=_(i,n=_(n,r,a,i,e[o+1],5,-165796510),r,a,e[o+6],9,-1069501632),n,r,e[o+11],14,643717713),i,n,e[o+0],20,-373897302),a=_(a,i=_(i,n=_(n,r,a,i,e[o+5],5,-701558691),r,a,e[o+10],9,38016083),n,r,e[o+15],14,-660478335),i,n,e[o+4],20,-405537848),a=_(a,i=_(i,n=_(n,r,a,i,e[o+9],5,568446438),r,a,e[o+14],9,-1019803690),n,r,e[o+3],14,-187363961),i,n,e[o+8],20,1163531501),a=_(a,i=_(i,n=_(n,r,a,i,e[o+13],5,-1444681467),r,a,e[o+2],9,-51403784),n,r,e[o+7],14,1735328473),i,n,e[o+12],20,-1926607734),a=m(a,i=m(i,n=m(n,r,a,i,e[o+5],4,-378558),r,a,e[o+8],11,-2022574463),n,r,e[o+11],16,1839030562),i,n,e[o+14],23,-35309556),a=m(a,i=m(i,n=m(n,r,a,i,e[o+1],4,-1530992060),r,a,e[o+4],11,1272893353),n,r,e[o+7],16,-155497632),i,n,e[o+10],23,-1094730640),a=m(a,i=m(i,n=m(n,r,a,i,e[o+13],4,681279174),r,a,e[o+0],11,-358537222),n,r,e[o+3],16,-722521979),i,n,e[o+6],23,76029189),a=m(a,i=m(i,n=m(n,r,a,i,e[o+9],4,-640364487),r,a,e[o+12],11,-421815835),n,r,e[o+15],16,530742520),i,n,e[o+2],23,-995338651),a=f(a,i=f(i,n=f(n,r,a,i,e[o+0],6,-198630844),r,a,e[o+7],10,1126891415),n,r,e[o+14],15,-1416354905),i,n,e[o+5],21,-57434055),a=f(a,i=f(i,n=f(n,r,a,i,e[o+12],6,1700485571),r,a,e[o+3],10,-1894986606),n,r,e[o+10],15,-1051523),i,n,e[o+1],21,-2054922799),a=f(a,i=f(i,n=f(n,r,a,i,e[o+8],6,1873313359),r,a,e[o+15],10,-30611744),n,r,e[o+6],15,-1560198380),i,n,e[o+13],21,1309151649),a=f(a,i=f(i,n=f(n,r,a,i,e[o+4],6,-145523070),r,a,e[o+11],10,-1120210379),n,r,e[o+2],15,718787259),i,n,e[o+9],21,-343485551),n=p(n,c);r=p(r,u),a=p(a,s),i=p(i,d)}return Array(n,r,a,i)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))).toLowerCase()},s._isAwinTrackingUrl=function(e){return!!e&&!!e.match(/^https?\:\/\/(www\.)?(awin1|zenaps)\.com\/(awclick|cread)/)},s._anchorHasBltDataAttribute=function(e){return"string"==typeof e.getAttribute(s._DATA_ATTRIBUTE_NAME)},s._buildBeaconUrl=function(e){var t=s._analyticalEndpoint;return s._advertiserAllowsBlt(e.advertiserId)&&(t=s._beaconEndpoint),s._addParametersToUrl(t,e.parameters)},s._addRefererUrl=function(e){var t=s._REFERRER_PARAM_NAME+"="+s._addBracketsToParameterValueAndEncodeIfNeeded(s._removeQueryStringFromUrl(window.location.href));return-1===e.indexOf(t)&&(e+="&"+t),e},s._sanitiseTrackingUrl=function(e){var t=(e=e.replace("http://","https://")).indexOf("www.");return e=-1===t||15<t?e.replace("//","//www."):e},s._addEndpointPixel=function(e,t){var n=document.getElementsByTagName("body")[0];n&&(e=e.replace("blt",t)+"?vendor=[["+escape(navigator.vendor)+"]]",(t=document.createElement("img")).setAttribute("width","0px"),t.setAttribute("height","0px"),t.setAttribute("src",e),n.appendChild(t))},s._addEventListener=function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},s._addOrUpdatePingAttribute=function(e,t){var n=e.getAttribute("ping"),r=t,a=[];if(n){for(var i=n.split(" "),o=0;o<i.length;o++){var c=i[o];0<c.length&&-1===c.indexOf(s._beaconEndpoint)&&-1===c.indexOf(s._analyticalEndpoint)&&a.push(c)}a.push(t),r=a.join(" "),e.setAttribute("ping",r)}else e.setAttribute("ping",r)},s._setBltDataAttributeWithEncodedObject=function(e,t){t=JSON.stringify(t),t=encodeURIComponent(t);e.setAttribute(s._DATA_ATTRIBUTE_NAME,t)},s._findParentAnchor=function(e){return"A"===e.tagName&&void 0!==e.href?e:s._findParentAnchor(e.parentElement)},s._createNewBouncelessTrackingConfig=function(e,t){var n=e.getAttribute("href"),r=n.substring(0,n.indexOf("?")),a=s._cloneObject(t),i=s._getAdvertiserIdFromQueryParameters(t),e=s._buildAwc(i),n=s._buildBltHash(n);return a[s._AWC_PARAM_NAME]=e,a[s._REFERRER_PARAM_NAME]=s._removeQueryStringFromUrl(window.location.href),a[s._HASH_PARAM_NAME]=n,t[s._HASH_PARAM_NAME]=n,a.vendor="[["+escape(navigator.vendor)+"]]",{advertiserId:i,awc:e,hrefUrl:r=s._advertiserAllowsBlt(i)?(i=t.p||t.ued,-1<(i=(r=decodeURIComponent(i).replace(/[\[\]]*/g,"")).indexOf("%3A%2F%2F"))&&i<20&&(r=decodeURIComponent(r)),s._addParameterToUrl(r,"awc",e)):(r=s._addParametersToUrl(r,t),r=s._addRefererUrl(r),s._sanitiseTrackingUrl(r)),parameters:a}},s._getBounceLessConfigFromAttribute=function(e){if(s._anchorHasBltDataAttribute(e)){var t=decodeURIComponent(e.getAttribute(s._DATA_ATTRIBUTE_NAME)),n=JSON.parse(t),r=s._getAdvertiserIdFromQueryParameters(n.parameters),t=s._buildAwc(r),e=s._buildBltHash(e.href);return n.parameters[s._AWC_PARAM_NAME]=t,n.parameters[s._HASH_PARAM_NAME]=e,{advertiserId:r,awc:t,hrefUrl:n.hrefUrl.replace(/awc\=\d{1,6}\_\d{10}\_[\d\w]*/,"awc="+t).replace(/blthash\=[\d\w]{32}/,s._HASH_PARAM_NAME+"="+e),parameters:n.parameters}}},s._doBounceLessClick=function(e){var t,n=s._findParentAnchor(e.target),r=n.href,a=s._getBounceLessConfigFromAttribute(n);a||(e=r.substring(r.indexOf("?")),e=s._getQueryParams(e),s._deeplinkParameterAllowsBlt(e)&&s._browserAllowsBlt()&&s._userAllowsBlt(e.cons)&&(a=s._createNewBouncelessTrackingConfig(n,e))),a?s._browserAllowsBlt()&&(t=a.hrefUrl,s._appends&&s._appends[a.advertiserId]&&(t=s._addAppendsToHref(t,s._appends[a.advertiserId],a,i)),a.parameters[s._MODE_PARAM_NAME]="beacon",navigator.sendBeacon(s._buildBeaconUrl(a)),a.parameters[s._MODE_PARAM_NAME]="ping",s._addOrUpdatePingAttribute(n,s._buildBeaconUrl(a)),s._setBltDataAttributeWithEncodedObject(n,a)):(r=s._addRefererUrl(r),t=s._sanitiseTrackingUrl(r)),n.setAttribute("href",t)},s._addAppendsToHref=function(e,t,n,r){for(var a=new RegExp(/!{3}(\w+)!{3}/g),i=t.replace(/^[?&]*/g,"").replace(/[?&]*$/g,""),o=new Date,c=e.split(/^(.*?)\?(.*)/),e=c[1],c=c[2];null!==(matcher=a.exec(t));){var u="";switch(matcher[1]){case"sitename":u=s._urlEncode(r.siteName);break;case"sitenamecm":u=s._urlEncode(r.siteName,!0);break;case"sitenamechar":u=s._stripNonChars(r.siteName);break;case"affiliatedomain":u=s._getDomainName(n.parameters[s._REFERRER_PARAM_NAME],r.siteName);break;case"promotype":u=s._urlEncode(r.primaryPromotionType);break;case"promotypecm":u=s._urlEncode(r.primaryPromotionType,!0);break;case"id":case"add":case"aid":case"affid":u=r.publisherId;break;case"dateday":u=s._getCurrentDay(o);break;case"timestamp":u=Math.floor(o/1e3);break;case"linkid":u=s._getLinkId(n.parameters);break;case"clickref":u=s._urlEncode(n.parameters.clickref);break;case"awc":case"awv":u=n.awc;break;case"companyname":u=s._urlEncode(r.companyName);break;default:u="unknown"}i=i.replace(matcher[0],u||"")}return e+"?"+(i?i+"&":"")+c},s._getDomainName=function(e,t){return e?s._urlEncode(e.replace("http://","").replace("https://","")):s._urlEncode(t)},s._getLinkId=function(e){return e.linkid||e.s||0},s._stripNonChars=function(e){if(e)return e.replace(/[^A-Za-z0-9_]+/g,"")},s._getCurrentDay=function(e){return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("")},s._urlEncode=function(e,t){if(void 0===e)return e;for(var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r=e.length,a="",i=0,o=0;o<e.length;o++){var c=e.charAt(o);/^[A-Za-z0-9]+$/.test(c)||(t||"-"!=c&&"."!=c&&"_"!=c)&&(i<o&&(a+=e.substring(i,o)),i=o+1," "!=c||t?s._toUTF8Array(c).forEach(function(e,t){a+="%",a+=n[e>>4&15]+n[15&e]}):a+="+")}return 0===a.length?e:(i<r&&(a+=e.substring(i,r)),a)},s._toUTF8Array=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||57344<=r?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t},s._init=function(e){for(var t=0;t<e.length;t++)s._isAwinTrackingUrl(e[t].href)&&(s._addEventListener("mousedown",e[t],s._doBounceLessClick),e[t].classList.add("noskimlinks"));(/(OS 11_|OS 12_).*like Mac OS X.*/.test(navigator.userAgent)||/(Macintosh|iPhone);.*Mac OS X.*Version\/(11|12).* Safari/.test(navigator.userAgent))&&s._addEndpointPixel(s._beaconEndpoint,s._beaconEndpointResource),r.on("link.click",s._doBounceLessClick),n&&n.unitTestExport&&(AWIN.BouncelessTracking=s)},s._otherPluginsAllowBlt()&&(e=document.getElementsByTagName("a"),s._init(e)),s}),AWIN.PluginConfig.roeye=[],AWIN.addPlugin("roeye",function(e,t){e="https://lantern.roeyecdn.com/lantern_publisher_"+e.publisherId+".js?";t.url&&(e=t.url),AWIN.appendScript(e+"&"+Date.now(),{async:!0})}),AWIN.initPlugins();
