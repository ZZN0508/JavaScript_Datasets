!function(C,d){"use strict";function f(t,e){var A,g,h,r,a,m,b,v,p,y,z,w,B,L,T,D,I,n=this,i=O.extend({},n.config,e),o={},l=i.name+"-"+ ++c;return n.config=function(t,e){return e===d?i[t]:(i[t]=e,n)},n.addItems=function(t){return o.a&&o.a("string"===O.type(t)?O(t):t),n},n.getItems=function(){return o.g?o.g():{}},n.update=function(t){return o.e&&o.e({},!t),n},n.force=function(t){return o.f&&o.f("string"===O.type(t)?O(t):t),n},n.loadAll=function(){return o.e&&o.e({all:!0},!0),n},n.destroy=function(){return O(i.appendScroll).off("."+l,o.e),O(C).off("."+l),o={},d},A=n,h=t,r=o,a=l,m=0,p=!(v=b=-1),y="afterLoad",z="load",w="error",B="img",L="src",T="srcset",D="sizes",I="background-image","event"===(g=i).bind||R?u():O(C).on(z+"."+a,u),i.chainable?t:n;function u(){var n,i,o,l;p=1<C.devicePixelRatio,h=f(h),0<=g.delay&&setTimeout(function(){s(!0)},g.delay),(g.delay<0||g.combined)&&(r.e=(n=g.throttle,i=function(t){"resize"===t.type&&(b=v=-1),s(t.all)},l=0,function(t,e){function r(){l=+new Date,i.call(A,t)}var a=+new Date-l;o&&clearTimeout(o),n<a||!g.enableThrottle||e?r():o=setTimeout(r,n-a)}),r.a=function(t){t=f(t),h.push.apply(h,t)},r.g=function(){return h=O(h).filter(function(){return!O(this).data(g.loadedName)})},r.f=function(t){for(var e=0;e<t.length;e++){var r=h.filter(function(){return this===t[e]});r.length&&s(!1,r)}},s(),O(g.appendScroll).on("scroll."+a+" resize."+a,r.e))}function f(t){for(var e=g.defaultImage,r=g.placeholder,a=g.imageBase,n=g.srcsetAttribute,i=g.loaderAttribute,o=g._f||{},l=0,u=(t=O(t).filter(function(){var t=O(this),e=N(this);return!t.data(g.handledName)&&(t.attr(g.attribute)||t.attr(n)||t.attr(i)||o[e]!==d)}).data("plugin_"+g.name,A)).length;l<u;l++){var f=O(t[l]),s=N(t[l]),c=f.attr(g.imageBaseAttribute)||a;s===B&&c&&f.attr(n)&&f.attr(n,function(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}(f.attr(n),c)),o[s]===d||f.attr(i)||f.attr(i,o[s]),s===B&&e&&!f.attr(L)?f.attr(L,e):s===B||!r||f.css(I)&&"none"!==f.css(I)||f.css(I,"url('"+r+"')")}return t}function s(t,e){if(h.length){for(var r,a,n,i,o,l=e||h,u=!1,f=g.imageBase||"",s=g.srcsetAttribute,c=g.handledName,d=0;d<l.length;d++)(t||e||(r=l[d].getBoundingClientRect(),a=g.scrollDirection,n=g.threshold,i=(0<=v?v:v=O(C).height())+n>r.top&&-n<r.bottom,o=(0<=b?b:b=O(C).width())+n>r.left&&-n<r.right,"vertical"===a?i:("horizontal"===a||i)&&o))&&(n=O(l[d]),r=N(l[d]),a=n.attr(g.attribute),i=n.attr(g.imageBaseAttribute)||f,o=n.attr(g.loaderAttribute),n.data(c)||g.visibleOnly&&!n.is(":visible")||!((a||n.attr(s))&&(r===B&&(i+a!==n.attr(L)||n.attr(s)!==n.attr(T))||r!==B&&i+a!==n.css(I))||o)||(n.data(c,u=!0),function(e,t,r,a){++m;var n=function(){F("onError",e),E(),n=O.noop};F("beforeLoad",e);var i=g.attribute,o=g.srcsetAttribute,l=g.sizesAttribute,u=g.retinaAttribute,f=g.removeAttribute,s=g.loadedName,c=e.attr(u);{var d,A;a?(d=function(){f&&e.removeAttr(g.loaderAttribute),e.data(s,!0),F(y,e),setTimeout(E,1),d=O.noop},e.off(w).one(w,n).one(z,d),F(a,e,function(t){t?(e.off(z),d()):(e.off(w),n())})||e.trigger(w)):((A=O(new Image)).one(w,n).one(z,function(){e.hide(),t===B?e.attr(D,A.attr(D)).attr(T,A.attr(T)).attr(L,A.attr(L)):e.css(I,"url('"+A.attr(L)+"')"),e[g.effect](g.effectTime),f&&(e.removeAttr(i+" "+o+" "+u+" "+g.imageBaseAttribute),l!==D&&e.removeAttr(l)),e.data(s,!0),F(y,e),A.remove(),E()}),c=(p&&c?c:e.attr(i))||"",A.attr(D,e.attr(l)).attr(T,e.attr(o)).attr(L,c?r+c:null),A.complete&&A.trigger(z))}}(n,r,i,o)));u&&(h=O(h).filter(function(){return!O(this).data(c)}))}else g.autoDestroy&&A.destroy()}function N(t){return t.tagName.toLowerCase()}function E(){--m,h.length||m||F("onFinishedAll")}function F(t){return(t=g[t])&&(t.apply(A,[].slice.call(arguments,1)),1)}}var O=C.jQuery||C.Zepto,c=0,R=!1;O.fn.Lazy=O.fn.lazy=function(t){return new f(this,t)},O.Lazy=O.lazy=function(t,e,r){if(O.isFunction(e)&&(r=e,e=[]),O.isFunction(r)){t=O.isArray(t)?t:[t],e=O.isArray(e)?e:[e];for(var a=f.prototype.config,n=a._f||(a._f={}),i=0,o=t.length;i<o;i++)a[t[i]]!==d&&!O.isFunction(a[t[i]])||(a[t[i]]=r);for(var l=0,u=e.length;l<u;l++)n[e[l]]=t[0]}},f.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:C,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:d,afterLoad:d,onError:d,onFinishedAll:d},O(C).on("load",function(){R=!0})}(window);
