!function(e){e.MDIGITAL=e.MDIGITAL||{},e.MDIGITAL.version="2.38.0"}(window),window.KAMPYLE_CONSTANT={PLACEHOLDERS:{URL_PREFIX:"https://cdn-usent.kampyle.com/",USERSNAP_CDN_URL:"//screencaptue-cdn.kampyle.com/",USERSNAP_HOST_PREFIX:"//screencapture.kampyle.com/",COOLADATA_SRC_PREFIX:"//nebula-cdn.kampyle.com/",COOLDATA_API_HOST:"udc-neb.kampyle.com/",USERSNAP_V4_HOST_PREFIX:"//scp.kampyle.com",USERSNAP_ONPREM_HOST_PREFIX:"https://md-scp.kampyle.com/"},SRC:{OPEN_SANS:"resources/form/FormBuilder/vendor/fonts-googleapis/css/open-sans-v14.css",KLOADER:"resources/onsite/images/kloader.gif",COOLADATA:"resources/onsite/js/cool-2.1.15.min.js",OOPS:"resources/onsite/images/oops.svg"},FORM_HEIGHT:"450",FORM_WIDTH:"450",COOKIE_EXPIRATION:365,DEVICES:{DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet"},FEATURE_VERSIONS:{MOBILE_DYNAMIC_SIZING:2},TIME_FORMATS:{SECONDS:"seconds",MINUTES:"minutes",HOURS:"hours",DAYS:"days",WEEKS:"weeks",MONTHS:"months",YEARS:"years"},DISPLAY_TYPES:{LIGHTBOX:"lightbox",ANIMATION:"animation",POPUP:"popup",EMBEDDED:"embedded"},FORM_TYPES:{EMBEDDED:"embedded",INVITATION:"invitation",BUTTON:"button",CODE:"code"},EVENT_DATA:{PAGE_NUMBER:"pageNumber",FEEDBACK_CORRELATION_UUID:"feedbackCorrelationUUID",FEEDBACK_UUID:"feedbackUUID"},EVENT_NAME:{NEB_LOAD_FORM:"neb_loadForm"},FEATURE_FLAGS:{WCAG:"WCAG",EXEMPT_BUTTON_FORMS_FROM_QUARANTINE:"exemptButtonFormsFromQuarantine",EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE:"exemptEmbeddedFormsFromQuarantine",EXEMPT_CODE_FORMS_FROM_QUARANTINE:"exemptCodeFormsFromQuarantine"},PROVISIONS:{cooladataNewEvents:"cooladataNewEvents",NEW_SCREEN_CAPTURE_CONFIG:"newScreenCaptureConfiguration",ON_PREM_HYBRID:"onPremHybrid",API_GATEWAY:"apiGateway",LOCALIZED_FORMS:"localizedForms",FORM_TEMPLATE_DATA_SEPERATION:"separateFormTemplateFromData",EVENT_INCLUDE_FEEDBACK_CONTENT:"eventIncludeFeedbackContent",CP_EXT_REFACTOR:"cpExtractRefactor",ADOBE_INCLUDE_LINK_TRACK_VARS:"adobeIncludeLinkTrackVars",ADOBE_ANALYTICS_OBJECT_NAME:"adobeAnalyticsObjectName",ADOBE_CONCAT_LINK_TRACK_VARS:"adobeConcatLinkTrackVars",ENABLE_OVERFLOW:"enableOverflow",SERVER_BASED_TARGETING:"serverBasedTargeting",NATIVE_SCREEN_CAPTURE:"nativeScreenCapture",COOLADATA_EVNETS_LIMIT:"cooladataEventsLimit",UBT_EXTRA_EVENTS:"UBTExtraEvents",ALTERNATIVE_UUID:"alternativeUUID",DISABLE_COOKIE_STORAGE:"cookieStorageDisable",SHARE_PROPERTY_DOMAIN:"sharePropertyBetweenSubdomains",SKIP_INVITATION_OPTIMIZATION:"skipInvitationOptimization",COOLADATA_SUBMITTED_BY_XHR:"cooladataSubmittedByXhr",DO_NOT_SURVEY_ON_UBT_NETWORK_FAIL:"doNotSurveyOnUBTNetworkFail",DHH:"dynamicHybridHosting",USER_SNAP_V4:"userSnapV4",USER_SNAP_ONPREM:"21dcr2_MPC3296_enable_usersnapOnpremCSP",DYNAMIC_ONSITE_EVENTS:"dynamicOnsiteEvents",CSP_RULES:"CSPRemoveInlineStyling",CREATE_SESSION:"cooladataCreateSessionEvent",FORM_TEMPLATES_WCAG:"formTemplatesWCAG",PREVENT_IFRAME_SCROLLBAR_FLICKERING:"20dcr32_NM11146_PreventIFrameScrollFlickering",BACKEND_GENERATED_UUID:"20dcr4_MPC2802_enable_backendGeneratedUUID",CHTML_LOGS:"chtmlLogs",EXEMPT_FORMS_FROM_QUARANTINE:"20dcr4_MPC2952_enable_exemptFormsFromQuarantine",USER_SNAP_AS_COMPONENT:"20dcr4_MPC2893_enable_ScreenCaptureAsComponent",ADDITIONAL_BUTTON_STYLES:"21dcr1_MPC3199_AdditionalButtonStyles",COOLADATA_UPGRADE:"21dcr1_MPC2883_UpgradeCooladataVersion",RTL:"21dcr1_MPC_3283_enable_RTL",GREATER_SMALLER_THAN_DECODE:"21dcr1_MPC3370_EnableGreaterSmallerThanSupport",EMBEDDED_TARGETING:"21dcr2_MPC2800_enable_EmbeddedTargeting",NEW_MODAL_DIALOGS:"21dcr3_MPC3281_enable_newModalDialogs",IS_CHTML_HANDLE_INIT_FOCUS_INDEPENDENTLY:"21dcr3_MPC3281_enable_CHTMLHandleFocusIndependently",WCAG_TRAP_FOCUS_IN_MODAL:"WCAGTrapFocusInModal",WCAG_REVIEW_FIXES:"20dcr4_MPC2905_wcagReviewFixes",PROPERTY_MESSAGES:"propertyMessages",NOT_SCROLL_TO_LAST_POSITION_DISPLAY_TYPE_ANIMATION:"willNotScrollToLastPositionDisplayTypeAnimation",CLEAR_EMBEDDED_ON_UPDATE_PAGE:"21dcr2_MPC3571_enable_ClearEmbeddedFormOnUpdatePageView",ENABLE_EVENTS_FOR_CE_DEBUG:"21DCR2_MPC3662_EnableEventsForCEDebug"},MEDALLIA_DIGITAL_EMBED_FILE:"medallia-digital-embed.js",DEFAULT_ADOBE_SDK_NAME:"s",ONPREM_URL_PREFIX:"/****ONPREM_URL_PREFIX****/",ONPREM_UDC_PREFIX:"/****JS_UDC****/",ANALYTICS_EVENT_FORBIDDEN_PROPERTIES:{sourceWindow:!0,content:!0,feedbackCorrelationUUID:!0},FORM_TRIGGER_TYPES_MAP:{embedded:"Embedded",invitation:"Intercept",button:"AlwaysOn",code:"TriggeredByCode"},LANG_MEMORY_DATA_KEY_PREFIX:"formLanguage:",FORM_JSON_DATA_KEY_PREFIX:"formJsonData:",INVITE_JSON_DATA_KEY_PREFIX:"inviteJsonData:",FORM_BUTTON:"button",FORM_INVITATION:"invitation",CUSTOM_EVENT_OTHER:"Other",EXPOSED_FORM_ID_LABEL:"Form_ID",EXPOSED_FORM_TYPE_LABEL:"Form_Type",EXPOSED_FEEDBACK_UUID_LABEL:"Feedback_UUID",EXPOSED_FEEDBACK_CONTENT_LABEL:"Content",LOCALIZED_FORM_DEFAULT_REPLACE_VALUE:"default",NOT_RECORDING:"NOT_RECORDING",IFRAME_SETTINGS:{EMBEDDED:{IFRAME_ID_PREFIX:"embeddedIframe"},LIGHTBOX:{IFRAME_ID_PREFIX:"kampyleForm",CONTAINER_ID_PREFIX:"kampyleFormModal"},ANIMATION:{CONTAINER_ID:"KampyleAnimationContainer",IFRAME_ID:"kampyleFormAnimation"},INVITATION:{IFRAME_ID:"kampyleInvite",CONTAINER_ID:"kampyleInviteModal",IFRAME_TITLE:"Invitation to provide feedback"},OOPS:{CONTAINER_ID_PREFIX:"mdigital-no-json-modal_",CLOSE_BUTTON_ID:"close-no-json-modal"},IFRAME_TITLE:"Feedback Survey"},PROPERTY_SETTINGS:{MANUALLY_INVITE_TARGETING:"MANUALLY_INVITE_TARGETING",CUSTOM_CSS_UPLOAD:"CUSTOM_CSS_UPLOAD"},EVENTS:{MDIGITAL_MANUALLY_INVITE_TARGETING:"MDigital_manuallyInviteTargeting",MDIGITAL_PAGE_TARGETING_PHASE_ENDED:"MDigital_pageTargetingPhaseEnded",MDIGITAL_BEHAVIORAL_TARGETING_PHASE_ENDED:"MDigital_behavioralTargetingPhaseEnded",MDIGITAL_QUARANTINED_SURVEY_PHASE_ENDED:"MDigital_quarantinedSurveyPhaseEnded",MDIGITAL_TARGETING_RULE_EVALUATED:"MDigital_targetingRuleEvaluated",MDIGITAL_SCREEN_CAPTURE_LOADED:"neb_screenCaptureLoaded",MDIGITAL_SDK_PAGE_VIEW:"neb_sdkPageView",MDIGITAL_WARNING:"MDigital_warning",MDIGITAL_COULD_NOT_FETCH_DATA:"MDigital_couldNotFetchData",MDIGITAL_COULD_NOT_LOAD_FORM_APPLICATION:"MDigital_couldNotLoadFormApplication",NEB_EVENT_DISPATCHER_ERROR:"neb_eventDispatcherError",NEB_LOAD_FORM:"neb_loadForm",NEB_FORM_LOADING_HAS_FAILED:"neb_formLoadingHasFailed",MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY:"MDigital_DynamicOnsiteInitializedSuccessfully",CREATE_SESSION:"createSession",MDIGITAL_NO_JSON_MODAL_SHOWN:"MDigital_noJsonModalShown",MDIGITAL_NO_JSON_MODAL_CLOSED:"MDigital_noJsonModalClosed",MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_FORM_CLOSED:"MDigital_updateTargetingWithDeclinedDateFormClosed",MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_INVITE_DECLINED:"MDigital_updateTargetingWithDeclinedDateInviteDeclined",MDIGITAL_CHTML_LOGS:"MDigital_CHTML_Logs",SCREEN_CAPTURE_RETAKE:"MDigital_screenCaptureRetake",SCREEN_CAPTURE_DELETE:"MDigital_screenCaptureDelete",CUSTOM_EVENTS_DEBUG_MESSAGE:"mdigital_customEventsDebugMessage"},LOG_MESSAGES:{TRIGGER_MESSAGE_TEMPLATE:"Event {{EVENT_NAME}} has been {{STATUS}}. \n the data is: {{DATA}}. \n the context is :{{CONTEXT}}. \n the options are : {{OPTIONS}}.\n",ERROR_LOG_TEMPLATE:"Error Message is {{ERROR_MESSAGE}}",ERROR_DYNAMIC_ONSITE_INITIALIZATION:"Failed to fetch onsite data.",ERROR_ONSITE_SDK_CONFIGURATION_MISSING:"Failed to execute KAMPYLE_ONSITE_SDK.{{METHOD}}, due to missing onsite configuration."},LOG_STATUSES:{FAILED:"failed",TRIGGERED:"triggered"},OPERATORS:{REGEX:"regex",EQUALS:"equals",DOES_NOT_EQUAL:"doesnotequal",CONTAINS:"contains",DOES_NOT_CONTAIN:"doesnotcontain",STARTS_WITH:"startswith",ENDS_WITH:"endswith",HAS_VALUE:"hasvalue",LATER_THAN:"laterthan",EARLIER_THAN:"earlierthan",GREATER_THAN:"greaterthan",SMALLER_THAN:"smallerthan"},TARGETING_STATUS:{CANDIDACY:"candidacy",TRIGGERED:"triggered",QUARANTINED:"quarantined"},TARGETING_PHASES:{PAGE_TARGETING:"pageTargeting",BEHAVIORAL_TARGETING:"behavioralTargeting",QUARANTINE_TARGETING:"quarantineTargeting"},TARGETING_RULES:{INVITE_IF_ANY_SURVEY_ALREADY_SUBMITTED_PER_SESSION:"InviteAnySurveyAlreadySubmittedPerSession",INVITE_IF_ANY_INVITE_ALREADY_SHOWN_PER_SESSION:"InvitePerSession"},REGIONS:{DEV:"dev",QA:"qa",COLO_QA:"digital-cloud-qa",COLO_US:"digital-cloud-us"},MEMORY_DATA_FIELDS:{MDIGITAL_ALTERNATIVE_UUID:"mdigital_alternative_uuid",FETCHING_DATA_IN_PROGRESS:"FETCHING_DATA_IN_PROGRESS_",DATA_JSON:"dataJson",HAS_ONSITE_CONFIGURATION:"hasOnsiteConfiguration",TIMEOUT_HANDLERS:"mdTimeoutHandlers",FEEDBACK_CORRELATION_UUID:"feedbackCorrelationUUID",IS_BUTTON_CONTAINER_CREATED:"isButtonContainerCreated",REGION:"region",FEEDBACK_BUTTON_POSITION_STYLE:"buttonPositionStyle"},SESSION_DATA_FIELDS:{IS_SURVEY_SUBMITTED_IN_SESSION:"md_isSurveySubmittedInSession"},TIMEOUT_HANDLERS:{FORM_APP_STATUS:"formAppStatus",EMBEDDED_STATUS:"embeddedFormStatus"},CSS_FONT_RULE:"CSSFontFaceRule",NETWORK:{RETRY_TIMEOUT:1e3,REQUEST_TIMEOUT:5e3,TIME_FOR_FORM_TO_LOAD_MS:6e4,NUM_OF_RETRIES:3},ERROR_CODE:{SECURITY_ERROR:18},KEY_CODES:{SPACE:32,TAB:9,ENTER:13,ESC:27},BROWSERS:{IE:"IE",CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari"},URLS:{KMA_UDC:"https://nginx-log-post.kampyle.com/?data="},TEXTS:{DEFAULT_JSON_ERROR_MESSAGES:{title:"Oops...",body:"We canâ€™t collect your feedback at the moment.<br/>Refresh your page and try again",close:"Close this modal"},SCREEN_CAPTURE:{DEFAULT_DESCRIPTION:'Click "Capture Image" button or drag the cursor to highlight a specific area'}},FORM_LOADING_FAILURE_CAUSE:{APPLICATION_FAILED:"applicationFailed",JSON_FAILED:"jsonFailed"},PROPERTY_MESSAGES:{NO_JSON_MESSAGE:{TYPE:"noJsonMessage",KEYS:{TITLE:"title",BODY:"body",CLOSE:"close"}}},BROWSER_EVENTS:{FOCUS:"focus",MOUSE_DOWN:"mousedown"},COOLADATA_INSTANCE_NAME:"cooladata_instance_for_medallia_digital",SCREEN_CAPTURE:{DOM_SELECTION:"DOM_SELECTION",DOM_SELECTION_VALUE:"domSelector",AREA_SELECTION_VALUE:"highlight"},COOLADATA_HTTP_EVENTS_BY_METHOD:{BEFORE:{GET:"neb_beforeHttpGetRequest",POST:"neb_beforeHttpPostRequest"},AFTER:{GET:"neb_afterHttpGetRequest",POST:"neb_afterHttpPostRequest"},TIMEOUT:{GET:"neb_afterHttpGetRequestOnTimeout",POST:"neb_afterHttpPostRequestOnTimeout"},ERROR:{GET:"neb_afterHttpGetRequestOnError",POST:"neb_afterHttpPostRequestOnError"},ERROR_STATUS_CODE:{GET:"neb_afterHttpGetRequestOnErrorStatusCode",POST:"neb_afterHttpPostRequestOnErrorStatusCode"}},HTTP_METHODS:{GET:"GET",POST:"POST"},COLORS:{USERSNAP_V4_SELECTION_COLOR:"#fb585b",USERSNAP_ONPREM_SELECTION_COLOR:"#004CCB"},VIEW:{FEEDBACK_BUTTON_ID:"nebula_div_btn",FEEDBACK_BUTTON_CONTAINER_ID:"kampyleButtonContainer"},CLOSE_FORM_PARAM_VALUES:{ALL:"all",EMBEDDED:"embedded",MODAL:"modal"}},window.MDIGITAL.CONFIGURATION=function(){function t(){var e=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);return e||{provisions:{"21dcr1_mpc3281_alignWCAGLogoMarkup":null,mobileSDKUseSDKMetaDataInsteadOfUA:null,"20dcr4_MPC2905_wcagReviewFixes":null,cpExtractRefactor:null,chtmlLogs:null,disableFormReloadOnClose:null,mobileSDKV2FormWCAGSupport:null,googleAnalyticsClientEventsEnabled:null,"20dcr4_MPC2802_enable_backendGeneratedUUID":null,tealeafEnabled:!1,"21dcr2_MPC2743_enable_newLiveForm":null,mobileSdkSupport:null,cooladataNewEvents:null,"20dcr4_MPC2893_enable_ScreenCaptureAsComponent":null,adobeAnalytics:null,eventIncludeFeedbackContent:null,userSnapV4:null,dynamicModalSizeInCustomHtml:!1,mobileSDKV2AndroidNewSubmitButton:!0,cspUsersnapV2Support:null,sessionRecording:null,"21dcr3_MPC3281_enable_CHTMLHandleFocusIndependently":null,doNotSurveyOnUBTNetworkFail:null,mobileInvitationLayout:!0,addingRandomTimeForTimeInSession:null,"21dcr2_MPC3571_enable_ClearEmbeddedFormOnUpdatePageView":null,"21dcr3_mpc3662_delaySurveyUntilCSSLoad":null,mobileWebDynamicFormSizeInFormBuilder:null,cookieStorageDisable:null,screenCaptureEnabled:!0,reusableResourcesLibrary:null,formTemplatesWCAG:!0,formSpacing:null,onPremHybrid:null,"21dcr1_MPC2883_UpgradeCooladataVersion":null,mobileWebDynamicFormSize:!0,mobileSDKV2ScoreTargeting:null,WCAGTrapFocusInModal:null,disableButtonProximity:null,errorMessageWcagSupport:null,multiOptionsID:null,"20dcr32_NM11146_PreventIFrameScrollFlickering":null,separateFormTemplateFromData:null,dynamicOnsiteEvents:null,mobileSDKV2AppRatingsiOSDirect:null,cooladataCreateSessionEvent:null,mobileSDKV2Responsive1to5Grading:null,mobileSDKV2AppRatingsAndroidDestination:null,"21dcr3_MPC3662_EnableContentSquareSupport":null,ibmIncludeSpecificCPsInCooladataEvent:null,exportFeedbackSpinner:null,customEventsBroadcast:null,sharePropertyBetweenSubdomains:null,spaUrlPolling:!0,customCssUpload:null,willNotScrollToLastPositionDisplayTypeAnimation:null,"21dcr2_MPC2800_enable_EmbeddedTargeting":null,mobileResponsiveRatingComponent:!0,customHtmlFormsEnable:!0,propertyMessages:null,cooladataEventsLimit:null,mobileSDKV2BannerRevamp:null,targetingEventsReporting:null,mobileSdkFixIos12KeyboardIssue:null,serverBasedTargeting:null,CSPRemoveInlineStyling:null,enableOverflow:null,coolodataEventsByXhr:null,nativeScreenCapture:null,mobileSDKV2UiRevamp:!0,skipInvitationOptimization:null,mobileSDKV2AppRating:null,"21dcr1_MPC_3283_enable_RTL":null,"20dcr4_MPC2952_enable_exemptFormsFromQuarantine":null,"21dcr1_MPC3199_AdditionalButtonStyles":null,targetingRuleIdleTime:null,responsiveRatingComponent:null,localizedForms:null,"21dcr3_MPC3281_enable_newModalDialogs":null,mediaCapture:null,UBTExtraEvents:null,"21dcr2_MPC3296_enable_usersnapOnpremCSP":null,adobeAnalyticsObjectName:null,"21dcr3_MPC3779_enable_targetingNotice":null,onsiteLogger:null,dynamicHybridHosting:null,"21dcr1_MPC3370_EnableGreaterSmallerThanSupport":null,underScoreLocalization:null,thermoFisherTeaLeafIntegration:null,alternativeUUID:null,mobileSDKV2CustomIntercept:null,adobeConcatLinkTrackVars:null,adobeIncludeLinkTrackVars:null,cooladataIntegration:!0,"21DCR1_MPC3199_enable_RatingLabelAlign":null,"21DCR2_MPC3662_EnableEventsForCEDebug":null,parallelTabSolution:null,mobileSDKV2PoweredByFooter:null},sbtServerDomain:"https://ubt-usent.kampyle.com",sbtEnvPrefix:"usent_",endUserIdentifier:{},formNodes:[{formId:"80",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/80/1601049787861/customForm1601049788208.html",formDataUrl:"",formWidth:"580",formHeight:"650",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"25","unique_name":"abtestCampaign","type":"Text","source":"Var","source_name":"medalliaParams.abtestCampaign","is_identifier":"false"}, {"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/80/invitation1621268871563.html",inviteHeight:"340",inviteWidth:"580",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},urlRules:{exclusionUrl:{rule:"/co-delivery;/co-payment;/co-review;http://weeklyad.target.com/;/co-cart;/c/terms-conditions/-/N-4sr7l;/c/target-privacy-policy/-/N-4sr7p;https://www.target.com/gam-addressbookformdetails;https://www.target.com/gam-checkoutmanageorderdetail;https://www.target.com/gam-addressbookformdetails;https://www.target.com/gam-dash;https://www.target.com/gam-findorder;https://www.target.com/gam-giftcards;https://www.target.com/gam-guestregistration;https://www.target.com/gam-login;https://www.target.com/gam-mystore;https://www.target.com/gam-orderhistory;https://www.target.com/gam-paymentoptions;https://www.target.com/gam-personalinfo;https://www.target.com/gam-subscriptions;https://www.target.com/gc;/giftcard/check-balance;/giftcards/check-balance;/spot/terms/main;/spot/terms/privacy-policy;/spot/terms/terms-and-conditions;https://m-secure.target.com/co-thankyou;https://m-secure.target.com/gift-registry/find-a-registry;https://m-secure.target.com/gift-registry/CreateLounge;https://m-secure.target.com/gift-registry/checklist;https://basics.target.com;https://www-secure.target.com/co-deliverymethod;https://www-secure.target.com/co-pickupdelivery;https://www-secure.target.com/co-digitaldelivery;https://intl.target.com;https://www.target.com/gsp/static/v1/;https://www.target.com/co-deliverymethod;https://www.target.com/co-pickupdelivery;https://www.target.com/co-thankyou;https://www.target.com/gam-mystore;https://www.target.com/gam-giftcards;/guest/order-lookup;/guest/order-lookup?;/guest/return-label?;/guest/gift-card-balance?;/account;/account/orders;/account/orders/1018214595300;/account/subscriptions;/account/subscriptions/3078106078;/account/subscriptions/3078106078/edit;/account/wallet;/account/wallet/new;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756/edit;/account/giftcards;/account/giftcards/new;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36/edit;/account/addresses;/account/addresses/new;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810/edit;/account/store;/account/settings;https://www-perf.target.com"},inclusionUrl:{rule:""}},onSiteData:{devicetypes:["desktop"],kampyleInvitePercentageUsers:{prec:"9.0"},kampyleTimeOnPage:{time:"10"},kampyleInvitePerSession:{inviteOncePerSession:"false"},kampyleTimeInSession:{time:"60"},declined:{days:"90"},submitted:{days:"180"},numberOfPagesViewed:{numberOfRepeats:"3",compareString:"greaterThan"},genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"5","formId":80,"fieldId":64,"formName":"_LIVE_1. General Intercept","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"91","formId":80,"fieldId":64,"formName":"_LIVE_1. General Intercept","uniqueId":"customParam64","condition":"smallerThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"|US","formId":80,"fieldId":67,"formName":"_LIVE_1. General Intercept","uniqueId":"customParam67","condition":"contains","fieldName":"GuestLocation","fieldType":"Text","fieldOrigin":"customParam"}]}'}},{formId:"77",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/77/1601049547054/customForm1601049547449.html",formDataUrl:"",formWidth:"580",formHeight:"650",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"25","unique_name":"abtestCampaign","type":"Text","source":"Var","source_name":"medalliaParams.abtestCampaign","is_identifier":"false"}, {"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/77/invitation1577739963169.html",inviteHeight:"340",inviteWidth:"580",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},urlRules:{exclusionUrl:{rule:"https://www.target.com/gsp/static/v1/"},inclusionUrl:{rule:"https://weeklyad.target.com/"}},onSiteData:{kampyleTimeOnPage:{time:"10"},devicetypes:["desktop"],kampyleInvitePercentageUsers:{prec:"10.0"},declined:{days:"30"},kampyleTimeInSession:{time:"60"},kampyleInvitePerSession:{inviteOncePerSession:"false"},submitted:{days:"180"},numberOfPagesViewed:{numberOfRepeats:"2",compareString:"greaterThan"},genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"5","formId":77,"fieldId":64,"formName":"_LIVE_2. Weekly Ad","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"}]}'}},{formId:"72",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/72/1601050115371/customForm1601050115687.html",formDataUrl:"",formWidth:"580",formHeight:"500",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"25","unique_name":"abtestCampaign","type":"Text","source":"Var","source_name":"medalliaParams.abtestCampaign","is_identifier":"false"}, {"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/72/invitation1620936277885.html",inviteHeight:"300",inviteWidth:"550",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},urlRules:{exclusionUrl:{rule:"/co-delivery;/co-payment;/co-review;http://weeklyad.target.com/;/co-cart;/c/terms-conditions/-/N-4sr7l;/c/target-privacy-policy/-/N-4sr7p;https://www.target.com/gam-addressbookformdetails;https://www.target.com/gam-checkoutmanageorderdetail;https://www.target.com/gam-addressbookformdetails;https://www.target.com/gam-dash;https://www.target.com/gam-findorder;https://www.target.com/gam-giftcards;https://www.target.com/gam-guestregistration;https://www.target.com/gam-login;https://www.target.com/gam-mystore;https://www.target.com/gam-orderhistory;https://www.target.com/gam-paymentoptions;https://www.target.com/gam-personalinfo;https://www.target.com/gam-subscriptions;https://www.target.com/gc;/giftcard/check-balance;/giftcards/check-balance;/spot/terms/main;/spot/terms/privacy-policy;/spot/terms/terms-and-conditions;https://m-secure.target.com/co-thankyou;https://m-secure.target.com/gift-registry/find-a-registry;https://m-secure.target.com/gift-registry/CreateLounge;https://m-secure.target.com/gift-registry/checklist;https://basics.target.com;https://www-secure.target.com/co-deliverymethod;https://www-secure.target.com/co-pickupdelivery;https://www-secure.target.com/co-digitaldelivery;https://intl.target.com;https://www.target.com/gsp/static/v1/;https://www.target.com/co-deliverymethod;https://www.target.com/co-pickupdelivery;https://www.target.com/co-thankyou;https://www.target.com/gam-mystore;https://www.target.com/gam-giftcards;/guest/order-lookup;/guest/order-lookup?;/guest/return-label?;/guest/gift-card-balance?;/account;/account/orders;/account/orders/1018214595300;/account/subscriptions;/account/subscriptions/3078106078;/account/subscriptions/3078106078/edit;/account/wallet;/account/wallet/new;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756/edit;/account/giftcards;/account/giftcards/new;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36/edit;/account/addresses;/account/addresses/new;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810/edit;/account/store;/account/settings;https://www-perf.target.com"},inclusionUrl:{rule:""}},onSiteData:{kampyleTimeOnPage:{time:"30"},kampyleInvitePercentageUsers:{prec:"10.0"},devicetypes:["mobile","tablet"],declined:{days:"90"},kampyleTimeInSession:{time:"180"},kampyleInvitePerSession:{inviteOncePerSession:"false"},submitted:{days:"90"},numberOfPagesViewed:{numberOfRepeats:"2",compareString:"greaterThan"},genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"5","formId":72,"fieldId":64,"formName":"_LIVE_1. General Intercept - mobile","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"|US","formId":72,"fieldId":67,"formName":"_LIVE_1. General Intercept - mobile","uniqueId":"customParam67","condition":"contains","fieldName":"GuestLocation","fieldType":"Text","fieldOrigin":"customParam"}]}'}},{formId:"70",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/70/1601049376254/customForm1601049376565.html",formDataUrl:"",formWidth:"580",formHeight:"450",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"25","unique_name":"abtestCampaign","type":"Text","source":"Var","source_name":"medalliaParams.abtestCampaign","is_identifier":"false"}, {"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/70/invitation1575482844919.html",inviteHeight:"300",inviteWidth:"550",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},urlRules:{exclusionUrl:{rule:"https://www.target.com/gsp/static/v1/"},inclusionUrl:{rule:"https://weeklyad.target.com/"}},onSiteData:{kampyleTimeOnPage:{time:"10"},kampyleInvitePercentageUsers:{prec:"8.0"},devicetypes:["mobile","tablet"],declined:{days:"30"},kampyleTimeInSession:{time:"60"},kampyleInvitePerSession:{inviteOncePerSession:"false"},submitted:{days:"180"},numberOfPagesViewed:{numberOfRepeats:"2",compareString:"greaterThan"},genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"5","formId":70,"fieldId":64,"formName":"_LIVE_2. Weekly Ad - mobile","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"}]}'}},{formId:"63",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/63/1601048655443/customForm1601048655778.html",formDataUrl:"",formWidth:"580",formHeight:"650",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/63/invitation1577739927390.html",inviteHeight:"350",inviteWidth:"580",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},onSiteData:{genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"5","formId":63,"fieldId":64,"formName":"_LIVE_7. Guest Account Management","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"|US","formId":63,"fieldId":67,"formName":"_LIVE_7. Guest Account Management","uniqueId":"customParam67","condition":"contains","fieldName":"GuestLocation","fieldType":"Text","fieldOrigin":"customParam"}]}',submitted:{days:"180"},kampyleInvitePerSession:{inviteOncePerSession:"false"},kampyleTimeInSession:{time:"60"},declined:{days:"90"},kampyleInvitePercentageUsers:{prec:"10.0"},devicetypes:["desktop"],kampyleTimeOnPage:{time:"15"}},urlRules:{exclusionUrl:{rule:"https://www.target.com/gsp/static/v1/"},inclusionUrl:{rule:"https://www.target.com/gam-dash;https://www.target.com/gam-checkoutmanageorderdetail;https://www.target.com/gam-subscriptions;https://www.target.com/gam-paymentoptions;https://www.target.com/gam-giftcards;https://www.target.com/gam-addressbookformdetails;https://www.target.com/gam-mystore;https://www.target.com/gam-personalinfo;https://www.target.com/gam-orderhistory;/guest/order-lookup;/guest/order-lookup?;/guest/return-label?;/guest/gift-card-balance?;/account;/account/orders;/account/orders/1018214595300;/account/subscriptions;/account/subscriptions/3078106078;/account/subscriptions/3078106078/edit;/account/wallet;/account/wallet/new;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756/edit;/account/giftcards;/account/giftcards/new;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36/edit;/account/addresses;/account/addresses/new;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810/edit;/account/store;/account/settings"}}},{formId:"62",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/62/1601048380794/customForm1601048381151.html",formDataUrl:"",formWidth:"580",formHeight:"450",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/62/invitation1577739935651.html",inviteHeight:"300",inviteWidth:"550",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},onSiteData:{genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"5","formId":62,"fieldId":64,"formName":"_LIVE_7. Guest Account Management - mobile","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"|US","formId":62,"fieldId":67,"formName":"_LIVE_7. Guest Account Management - mobile","uniqueId":"customParam67","condition":"contains","fieldName":"GuestLocation","fieldType":"Text","fieldOrigin":"customParam"}]}',submitted:{days:"180"},declined:{days:"90"},kampyleTimeInSession:{time:"60"},kampyleInvitePerSession:{inviteOncePerSession:"false"},kampyleTimeOnPage:{time:"15"},devicetypes:["mobile","tablet"],kampyleInvitePercentageUsers:{prec:"10.0"}},urlRules:{exclusionUrl:{rule:"https://www.target.com/gsp/static/v1/"},inclusionUrl:{rule:"https://www.target.com/gam-dash;https://www.target.com/gam-checkoutmanageorderdetail;https://www.target.com/gam-subscriptions;https://www.target.com/gam-paymentoptions;https://www.target.com/gam-giftcards;https://www.target.com/gam-addressbookformdetails;https://www.target.com/gam-mystore;https://www.target.com/gam-personalinfo;https://www.target.com/gam-orderhistory;/guest/order-lookup;/guest/order-lookup?;/guest/return-label?;/guest/gift-card-balance?;/account;/account/orders;/account/orders/1018214595300;/account/subscriptions;/account/subscriptions/3078106078;/account/subscriptions/3078106078/edit;/account/wallet;/account/wallet/new;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756;/account/wallet/5defe4b0-5e8a-11e7-aa6c-0ff543ab4756/edit;/account/giftcards;/account/giftcards/new;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36;/account/giftcards/31a92280-cbfa-11e7-bf47-bb2aa0682b36/edit;/account/addresses;/account/addresses/new;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810;/account/addresses/0102a320-5b54-11e7-ad3d-f9dbec869810/edit;/account/store;/account/settings"}}},{formId:"61",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/61/1601047906420/customForm1601047906735.html",formDataUrl:"",formWidth:"580",formHeight:"750",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/61/invitation1577739921169.html",inviteHeight:"340",inviteWidth:"580",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},urlRules:{exclusionUrl:{rule:"https://intl.target.com;https://www.target.com/gsp/static/v1/"},inclusionUrl:{rule:"https://www.target.com/"}},onSiteData:{kampyleInvitePercentageUsers:{prec:"10.0"},devicetypes:["desktop"],kampyleTimeOnPage:{time:"5"},kampyleInvitePerSession:{inviteOncePerSession:"false"},kampyleTimeInSession:{time:"30"},declined:{days:"30"},submitted:{days:"180"},numberOfPagesViewed:{numberOfRepeats:"3",compareString:"greaterThan"},genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"box","formId":61,"fieldId":24,"formName":"_LIVE_8. Restock","uniqueId":"customParam24","condition":"equals","fieldName":"isRestock","fieldType":"Text","fieldOrigin":"customParam"},{"type":"criteria","value":"5","formId":61,"fieldId":64,"formName":"_LIVE_8. Restock","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"|US","formId":61,"fieldId":67,"formName":"_LIVE_8. Restock","uniqueId":"customParam67","condition":"contains","fieldName":"GuestLocation","fieldType":"Text","fieldOrigin":"customParam"}]}'}},{formId:"60",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/60/1601047667316/customForm1601047667633.html",formDataUrl:"",formWidth:"650",formHeight:"550",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"27","unique_name":"TLSessionID","type":"Text","source":"cookie","source_name":"TealeafAkaSid","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"29","unique_name":"s_vi","type":"Text","source":"Var","source_name":"medalliaParams.s_vi","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"invitation",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""},inviteData:{inviteUrl:"https://cdn-usent.kampyle.com/usent/610/forms/60/invitation1577739957212.html",inviteHeight:"300",inviteWidth:"550",skipInvitation:"false",invitationPosition:"top",inviteDataUrl:""},urlRules:{exclusionUrl:{rule:"https://intl.target.com;https://www.target.com/gsp/static/v1/"},inclusionUrl:{rule:"https://www.target.com/"}},onSiteData:{kampyleTimeOnPage:{time:"5"},devicetypes:["mobile","tablet"],kampyleInvitePercentageUsers:{prec:"10.0"},declined:{days:"30"},kampyleTimeInSession:{time:"30"},kampyleInvitePerSession:{inviteOncePerSession:"false"},submitted:{days:"180"},numberOfPagesViewed:{numberOfRepeats:"3",compareString:"greaterThan"},genericRule:'{"type":"criteriaGroup","conjunction":"AND","childrenCriterias":[{"type":"criteria","value":"box","formId":60,"fieldId":24,"formName":"_LIVE_8. Restock - mobile","uniqueId":"customParam24","condition":"equals","fieldName":"isRestock","fieldType":"Text","fieldOrigin":"customParam"},{"type":"criteria","value":"5","formId":60,"fieldId":64,"formName":"_LIVE_8. Restock - mobile","uniqueId":"customParam64","condition":"greaterThan","fieldName":"AB Test","fieldType":"Number","fieldOrigin":"customParam"},{"type":"criteria","value":"|US","formId":60,"fieldId":67,"formName":"_LIVE_8. Restock - mobile","uniqueId":"customParam67","condition":"contains","fieldName":"GuestLocation","fieldType":"Text","fieldOrigin":"customParam"}]}'}},{formId:"302",isCustomHtmlEnabled:"false",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/302/form1620936237267.html",formDataUrl:"",formWidth:"400",formHeight:"550",isFixedSize:"false",isFullWidthEmbedded:"true",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"false",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"embedded",formDisplay:{displayType:"embedded"},embeddedData:{pageElementId:"shipt_nps_survey"},onSiteData:{submitted:{days:"21"},declined:{days:"21"},kampyleTimeInSession:{time:"300"},kampyleInvitePercentageUsers:{prec:"30.0"},kampyleTimeOnPage:{time:"180"},devicetypes:["mobile","tablet"]},urlRules:{exclusionUrl:{rule:""},inclusionUrl:{rule:"/account/shopper-feedback/;localhost.target.com/account/shopper-feedback/;https://adaptiveui-pr-10266-production.ephemeral.target.com/account/shopper-feedback/ ;adaptiveui-pr-10266-production.ephemeral.target.com/account/shopper-feedback/;target.com/account/shopper-feedback/"}}},{formId:"286",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/286/1601046892753/customForm1601046893083.html",formDataUrl:"",formWidth:"450",formHeight:"650",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"false",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"228","unique_name":"cardType","type":"Text","source":"URL","source_name":"cardType","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"code",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""}},{formId:"219",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/219/1601049162743/customForm1619019661826.html",formDataUrl:"",formWidth:"580",formHeight:"650",isFixedSize:"true",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"false",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"code",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""}},{formId:"212",isCustomHtmlEnabled:"false",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/212/form1601478238942.html",formDataUrl:"",formWidth:"400",formHeight:"550",isFixedSize:"false",isFullWidthEmbedded:"true",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"false",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"embedded",formDisplay:{displayType:"embedded"},embeddedData:{pageElementId:"shipt_nps_survey"},onSiteData:{submitted:{days:"21"},declined:{days:"21"},kampyleTimeInSession:{time:"300"},kampyleInvitePercentageUsers:{prec:"30.0"},kampyleTimeOnPage:{time:"180"},devicetypes:["desktop"]}},{formId:"209",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/209/1618259752629/customForm1618259820530.html",formDataUrl:"",formWidth:"450",formHeight:"600",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"false",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"code",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""}},{formId:"147",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/147/1601050420658/customForm1601050420942.html",formDataUrl:"",formWidth:"550",formHeight:"650",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"111","unique_name":"innovation_product","type":"Text","source":"Var","source_name":"medallia_innovation_survey.product","is_identifier":"false"}, {"id":"112","unique_name":"innovation_action","type":"Text","source":"Var","source_name":"medallia_innovation_survey.action","is_identifier":"false"}, {"id":"114","unique_name":"InnovationOrderID","type":"Number","source":"Var","source_name":"medallia_innovation_survey.orderId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"code",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""}},{formId:"141",isCustomHtmlEnabled:"true",formVersion:"2",formHtmlUrl:"https://cdn-usent.kampyle.com/usent/610/forms/141/1601047458217/customForm1601047458557.html",formDataUrl:"",formWidth:"550",formHeight:"500",isFixedSize:"false",isFullWidthEmbedded:"null",designSettings:{formBackgroundColor:"",thankYouPageBackgroundColor:""},formLocalizationSettings:{defaultLanguage:"null",useCustomParam:"null",customParam:"null"},functionFileUrl:"",customParams:'[{"id":"26","unique_name":"ref_url","type":"Text","source":"Var","source_name":"medalliaParams.ref_url","is_identifier":"false"}, {"id":"28","unique_name":"visitorId","type":"Text","source":"cookie","source_name":"visitorId","is_identifier":"false"}, {"id":"118","unique_name":"SDD_TeamMemberID","type":"Number","source":"Var","source_name":"medalliaData.teamMemberId","is_identifier":"false"}, {"id":"119","unique_name":"SDD_tip","type":"Number","source":"Var","source_name":"medalliaData.tip","is_identifier":"false"}, {"id":"121","unique_name":"SDD_rating","type":"Number","source":"Var","source_name":"medalliaData.rating","is_identifier":"false"}, {"id":"120","unique_name":"SDD_review","type":"Text","source":"Var","source_name":"medalliaData.review","is_identifier":"false"}, {"id":"122","unique_name":"OrderNumber","type":"Number","source":"URL","source_name":"orderNumber","is_identifier":"false"}, {"id":"64","unique_name":"AB Test","type":"Number","source":"Var","source_name":"medallia_ab","is_identifier":"false"}, {"id":"67","unique_name":"GuestLocation","type":"Text","source":"cookie","source_name":"GuestLocation","is_identifier":"false"}, {"id":"24","unique_name":"isRestock","type":"Text","source":"url","source_name":"mode","is_identifier":"false"}, {"id":"65","unique_name":"GuestID","type":"Text","source":"cookie","source_name":"mid","is_identifier":"false"}, {"id":"30","unique_name":"registryId","type":"Text","source":"url","source_name":"registryId","is_identifier":"false"}, {"id":"31","unique_name":"registryType","type":"Text","source":"url","source_name":"registryType","is_identifier":"false"}, {"id":"32","unique_name":"GR guest type","type":"Text","source":"cookie","source_name":"GRInterceptIndicator","is_identifier":"false"}, {"id":"115","unique_name":"searchTerm","type":"Text","source":"URL","source_name":"searchTerm","is_identifier":"false"}, {"id":"116","unique_name":"searchTerm2","type":"Text","source":"Var","source_name":"location.search","is_identifier":"false"}, {"id":"124","unique_name":"UrCapture","type":"Text","source":"Cookie","source_name":"UrCapture","is_identifier":"false"}, {"id":"162","unique_name":"SDD_tags_2","type":"Text","source":"Var","source_name":"medalliaData.tags.1","is_identifier":"false"}, {"id":"160","unique_name":"SDD_tags_1","type":"Text","source":"Var","source_name":"medalliaData.tags.0","is_identifier":"false"}, {"id":"163","unique_name":"SDD_tags_3","type":"Text","source":"Var","source_name":"medalliaData.tags.2","is_identifier":"false"}, {"id":"164","unique_name":"SDD_tags_4","type":"Text","source":"Var","source_name":"medalliaData.tags.3","is_identifier":"false"}]',formType:"code",formDisplay:{displayType:"lightbox",displayDirection:"centerRight",isSelfHosted:"",selfHostedUrl:""}}],integrations:{recordedSessions:[{isEnabled:[{source:"cookie",param:"visitorId",paramValue:null,predefinedArguments:null}],parameters:[{source:"cookie",param:"visitorId",putIn:"sessionId",predefinedArguments:null}],integrationName:"userReplay"}]},usersnapEnvId:"46e160d5-2933-4b87-8f8a-3e4416edb5ca",usersnapOnpremWidgetLoaderPath:null,propertyMessages:null,globalResourcesUrl:"https://cdn-usent.kampyle.com/liveApp/resources",submitUrlPrefix:"https://feedback-usent.kampyle.com/",submitUrlSuffix:"feedback/api/feedback/submit",submitUrlWithBackendUUID:"https://feedback-usent.kampyle.com/feedback/api/v2/feedback/submit",region:"usent",websiteId:610,accountId:609,packageVersion:null,isSpa:!1,isWCAG:!1,isManuallyInviteTargeting:!1,isGoogleAnalyticsClientGTM:!1,isFormsPreloaded:!0,cookieExpirationTime:null,adobeSdkName:null,sharedSubdomain:null,customCssUpload:!1,exemptButtonFormsFromQuarantine:!1,exemptCodeFormsFromQuarantine:!1,exemptEmbeddedFormsFromQuarantine:!1,screenCaptureSelectionTool:null}}return{init:function(){KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!1);var e=(e=t())&&e.region||KAMPYLE_CONSTANT.REGIONS.DEV;KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.REGION,e)},isOnsiteConfigurationMissing:function(){return!KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION)},getOnsiteConfiguration:t,onsiteDataSuccess:function(e){!e||e.error?MDIGITAL.CONFIGURATION.onsiteDataFailed(e):(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DYNAMIC_ONSITE_EVENTS)&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!0),e=MDIGITAL.CONFIGURATION.formatConfiguration(e),e=Object.assign({},t(),e),MDIGITAL.INIT.initOnsite(e))},onsiteDataFailed:function(e){e={errorMessage:KAMPYLE_CONSTANT.LOG_MESSAGES.ERROR_DYNAMIC_ONSITE_INITIALIZATION,additionalInfo:e},KAMPYLE_EVENT_DISPATCHER.triggerError(e),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!1)},fetchOnsiteExternalConfiguration:function(e){KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,e,null,MDIGITAL.CONFIGURATION.onsiteDataSuccess,MDIGITAL.CONFIGURATION.onsiteDataFailed)},formatConfiguration:function(e){var t,i=e;if(i.formNodes&&i.formNodes.length)for(var r=0;r<i.formNodes.length;r++)"string"==typeof i.formNodes[r].customParams&&(t=JSON.parse(i.formNodes[r].customParams),i.formNodes[r].customParams=t);return i}}}((window,document)),window.KAMPYLE_FUNC=function(){function t(e){var t;e.formNodes=e.formNodes||[];for(var i=e.formNodes.length-1;0<=i;i--)(t=e.formNodes[i]).formHeight&&"null"!==t.formHeight||(t.formHeight=KAMPYLE_CONSTANT.FORM_HEIGHT),t.formWidth&&"null"!==t.formWidth||(t.formWidth=KAMPYLE_CONSTANT.FORM_WIDTH);return e}function i(e,t){var i=KAMPYLE_DATA.getFormState(t.formId);i.loaded||i.loading||KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:t.formId})}function r(e,t){((t||{}).formIds||[]).forEach(function(e){KAMPYLE_COMMON.loadForm(e)})}function n(e,t){if(t=t||{},KAMPYLE_COMMON.closeForm(t.sourceFormId),!KAMPYLE_COMMON.showForm(t.formId))throw new Error("Form cannot be loaded")}function a(){var e;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||(e=document.querySelector("#kampyleInvite"))&&"function"==typeof e.focus&&e.focus()}function o(e,t){t=t||{},(KAMPYLE_DATA.getFormState(t.formId)||{}).inviteShown&&MDIGITAL.FORM_STATE.isInviteLoaded(t.formId)&&u(t.formId,!0)&&!W()?(KAMPYLE_VIEW.showInvite("",{formId:t.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteReady",t),KAMPYLE_DATA.setMemoryData("inviteLoadedAndShown",!0)):(l(t.formId,!0)||W())&&KAMPYLE_DATA.setFormState(t.formId,{inviteShown:!1})}function s(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_inviteDeclined:["neb_displayClosed"],neb_formClosed:["neb_displayClosed"]})}function l(e,t){var i=KAMPYLE_DATA.getMemoryJsonKey(e,t),i=KAMPYLE_DATA.getMemoryData(i),e=KAMPYLE_DATA.getFormState(e);return!1===i||!t&&e&&!1===e.loaded||t&&e&&!1===e.inviteLoaded}function u(e,t){t=KAMPYLE_DATA.getMemoryJsonKey(e,t);return!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)||KAMPYLE_DATA.getMemoryData(t)}function d(e,t){var i,r;t.failureCause===KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.APPLICATION_FAILED&&(r=KAMPYLE_DATA.getFormData(t.formId),i=KAMPYLE_DATA.getDisplayType(r),r=KAMPYLE_DATA.getFormState(t.formId),r={errorData:{formId:t.formId,displayType:i,formState:r}},KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_COULD_NOT_LOAD_FORM_APPLICATION,r)),setTimeout(function(){KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!1,loaded:!1})},0)}function _(e){var t=KAMPYLE_DATA.getFormData(e),t=KAMPYLE_DATA.getDisplayType(t);return MDIGITAL.FORM_STATE.isFormLoaded(e)||t===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP}function m(e,t){var i="neb_loadInvitation"===e,r=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.LANG_MEMORY_DATA_KEY_PREFIX+t.formId),n=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS),e=KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FETCHING_DATA_IN_PROGRESS+t.formId;n&&(e=e+"_"+r),i&&(e+="_invite"),KAMPYLE_FUNC.shouldSkipFetchingFormData(t.formId,i,r,n)||(KAMPYLE_DATA.setMemoryData(e,!0),KAMPYLE_DATA.fetchFormJsonData({formId:t.formId,isInvite:i,fetchingDataInProgressKey:e,callback:function(){var e;i?(KAMPYLE_VIEW.updateInviteIframeTitle("",t),e=t.formId,e=KAMPYLE_DATA.getMemoryJsonKey(e,!0),e=KAMPYLE_DATA.getMemoryData(e),KAMPYLE_DATA.setMemoryData("inviteVersion",e&&e.mobileDesign?1:-1),KAMPYLE_FUNC.handleInviteApplicationUpdated("",t)):KAMPYLE_FUNC.handleFormStateUpdated(t)},onError:function(e,t,i){var r=KAMPYLE_DATA.getMemoryJsonKey(e.formId,t);KAMPYLE_DATA.setMemoryData(r,!1),t||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:e.formId,failureCause:KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.JSON_FAILED});i={errorData:{formId:e.formId,isInvite:t,errorDetails:i}};KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_COULD_NOT_FETCH_DATA,i)}.bind(null,t,i)}))}function c(e){var t,i=_(e.formId)&&u(e.formId,!1),t=MDIGITAL.FORM_STATE.shouldFormBeShown(e.formId)&&(e=e.formId,(t=KAMPYLE_DATA.isSkipInvitation(e)&&W(e))&&(KAMPYLE_EVENT_DISPATCHER.trigger("neb_formReady",{formId:e}),KAMPYLE_DATA.setFormState(e,{shouldBeShown:!1}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_skipShowingForm",{formId:e})),!t);return i&&t}function A(e){c(e)?(KAMPYLE_EVENT_DISPATCHER.trigger("neb_showForm",{formId:e.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_formReady",{formId:e.formId}),KAMPYLE_DATA.setFormState(e.formId,{shown:!0,isCurrentlySubmitted:!1})):l(e.formId,!1)&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:e.formId})}function E(){var e={neb_pageView:[C],neb_showInvitation:[L,KAMPYLE_UTILS.setCurrentScrollPosition,F,a,o],neb_buttonClicked:[KAMPYLE_UTILS.setCurrentScrollPosition,F,f],neb_sdkShowForm:[KAMPYLE_UTILS.setCurrentScrollPosition,F,f],neb_skipInvitation:[KAMPYLE_UTILS.setCurrentScrollPosition,f],neb_inviteLoaded:[L,g],neb_inviteAccepted:[L,KAMPYLE_UTILS.setCurrentScrollPosition,f],neb_inviteDeclined:[L,K,KAMPYLE_UTILS.handleAfterFormPosition],neb_formClosed:[h,KAMPYLE_UTILS.handleAfterFormPosition],neb_popupBlocked:[h,KAMPYLE_UTILS.handleAfterFormPosition],neb_loadForm:[m,I],neb_loadInvitation:[m],neb_formLoaded:[R],neb_loadMultipileForms:[r],neb_routeToForm:[n],neb_formReady:[B,q,U],neb_feedbackSubmitted:[Y],neb_sdkPageView:[O],neb_screenCaptureLoaded:[k],neb_formLoadingHasFailed:[d]};KAMPYLE_EVENT_DISPATCHER.subscribeMany(e)}function T(e){return{neb_buttonClicked:"Button",neb_sdkShowForm:"ByCode",neb_routeToForm:"ByCode",neb_skipInvitation:"Invitation",neb_inviteAccepted:"Invitation"}[e]||null}function f(e,t){(t=t||{}).triggerType=t.triggerType||T(e),KAMPYLE_DATA.saveFormExtraData(t.formId,{triggerType:t.triggerType}),KAMPYLE_DATA.setMemoryData("currentFormId",t.formId),KAMPYLE_DATA.setMemoryData("formIsShown",!0),KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!0,triggerType:t.triggerType}),A(t)}function p(){var t=KAMPYLE_FUNC.isReferrerDifferentThanHost(),e=KAMPYLE_DATA.getData("kampyleUserSession"),i=!1;try{i=""===document.referrer||""===window.parent.document.referrer}catch(e){var r={errorMessage:e.message,errorStack:e.stack,additionalInfo:"createSession- failed to access document.referrer, probably CORS problem when the customer's iframe is hosted in a website with different domain."},t=!1;KAMPYLE_COOLADATA.triggerCooladataEvent(KAMPYLE_CONSTANT.MDIGITAL_WARNING,r)}finally{e&&!i&&!t||(KAMPYLE_DATA.setMemoryData("isSyncedIdentifierData",!1),KAMPYLE_DATA.setData("kampyleUserSession",KAMPYLE_UTILS.getCurrentTimestamp()),KAMPYLE_DATA.setData("kampyleSessionPageCounter",0),t=KAMPYLE_DATA.getData("kampyleUserSessionsCount"),t=Number(t)||0,KAMPYLE_DATA.setData("kampyleUserSessionsCount",++t),KAMPYLE_DATA.deleteData("kampyleUserPercentile"),KAMPYLE_DATA.deleteData("kampyleInvitePresented"),KAMPYLE_DATA.deleteData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION))}}function g(e,t){var i;t=t||{},KAMPYLE_DATA.getMemoryData("inviteVersion")||(i=KAMPYLE_UTILS.getNestedPropertyValue(t,"inviteVersion"),KAMPYLE_DATA.setMemoryData("inviteVersion",i)),(KAMPYLE_DATA.getFormState(t.formId)||{}).inviteShown&&o(0,t)}function I(e,t){t=t||{},KAMPYLE_DATA.setFormState(t.formId,{loading:!0}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_form_loaded",{formId:t.formId})}function S(e,r){if(r=r||{},!KAMPYLE_DATA.getFormState(r.formId).inviteLoaded)return!1;KAMPYLE_UTILS.sendMessageToIframe("kampyleInvite",{action:"inviteShown"});var n={accountId:r.accountId,websiteId:r.websiteId,environment:r.enviroment,url:document.location.href,kampyle_version:window.MDIGITAL.version||"0.0.0.0",formId:r.formId,cookie_size:KAMPYLE_UTILS.getByteSize(document.cookie),isWCAG:KAMPYLE_DATA.isFeatureEnabled("WCAG"),deviceType:G(),provisions:V(),position:KAMPYLE_VIEW.getInvitePosition(r.formId),customCssUpload:KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.CUSTOM_CSS_UPLOAD)};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)?KAMPYLE_DATA.fetchFormJsonData({formId:r.formId,callback:function(e){var t=KAMPYLE_DATA.getFormData(r.formId),i=MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),t={submitUrlPrefix:i.submitUrlPrefix,submitUrlSuffix:i.submitUrlSuffix,globalResourcesUrl:i.globalResourcesUrl,versionedResourcesUrl:t.versionedResourcesUrl};n=Object.assign({},n,{inviteData:e},t),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&(n.formLanguage=MDIGITAL.LOCALIZATION.getFormLanguage(r.formId)||null),KAMPYLE_UTILS.sendMessageToIframe("kampyleInvite",{action:"setExtraData",data:n})},onError:function(e){console.error(e)},isInvite:!0},!0):KAMPYLE_UTILS.sendMessageToIframe("kampyleInvite",{action:"setExtraData",data:n})}function L(e,t){switch((t=t||{}).formId=t.formId||KAMPYLE_DATA.getMemoryData("currentFormId"),e){case"neb_showInvitation":KAMPYLE_DATA.setFormState(t.formId,{inviteShown:!0});break;case"neb_inviteDeclined":case"neb_inviteAccepted":KAMPYLE_DATA.setFormState(t.formId,{inviteShown:!1});break;case"neb_inviteLoaded":KAMPYLE_DATA.setFormState(t.formId,{inviteLoaded:!0});break;case"neb_sdkPageView":KAMPYLE_DATA.setFormState(t.formId,{inviteLoaded:null,inviteShown:!1});break;default:KAMPYLE_UTILS.showWarning("Unhandled event name "+e)}}function P(e){var t,i=e.formId;e&&(a=parseInt(e.formWidth,10),t=parseInt(e.formHeight,10));var r=document.documentElement.clientWidth,n=document.documentElement.clientHeight;KAMPYLE_UTILS.setElementStyle(document.getElementById("innerContainer"),{overflowY:"auto",height:"100%"});e={border:0,position:"relative",margin:"50px auto 50px",height:t+"px",width:a+"px"};a<r&&t<n&&(e=KAMPYLE_DATA.isCustomHtmlAndFixedSizeForm(i)?{position:"absolute",top:"50%","margin-top":-t/2+"px",left:"50%","margin-left":-a/2+"px",height:t+"px",width:a+"px"}:{position:"fixed",height:"100%",width:"100%"});var a=document.getElementById("kampyleFormModal");a&&a.style&&a.removeAttribute&&(a.removeAttribute("style"),KAMPYLE_UTILS.setElementStyle(a,e))}function M(){var e,t,i,r,n=450,a=450,o=KAMPYLE_UTILS.getUrlParam("url");KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.MOBILE?n=a="100%":(i=KAMPYLE_UTILS.getUrlParam("height"),r=KAMPYLE_UTILS.getUrlParam("width"),i&&!isNaN(i)&&(n=i),r&&!isNaN(r)&&(a=r)),o&&KAMPYLE_UTILS.validateKampyleDomain(decodeURIComponent(o))?(o=decodeURIComponent(o),o+="?region="+KAMPYLE_DATA.getMemoryData("region"),(t=KAMPYLE_UTILS.getUrlParam("formId"))?(o+="&formId="+t,KAMPYLE_DATA.setMemoryData("currentFormId",t)):(e=location.protocol+"//"+location.host,window.location=e+"/#/error/404"),(i=decodeURIComponent(window.getUrlParam("provisions")))&&(o+="&provisions="+encodeURIComponent(i)),(r=decodeURIComponent(window.getUrlParam("websiteId")))&&(o+="&websiteId="+encodeURIComponent(r)),i=KAMPYLE_UTILS.getUrlParam("type")||"direct",o+="&type="+(i=-1===["live","direct","preview"].indexOf(i.toLowerCase())?"direct":i),i=r="100%",KAMPYLE_DATA.isCustomHtmlAndFixedSizeForm(t)&&(r=n,i=a),r=KAMPYLE_UTILS.createIframe(o,i,r,"kampyleForm"+t),KAMPYLE_DATA.isCustomHtmlForm(t)&&P({formId:t,formHeight:n,formWidth:a}),(a=document.getElementById("kampyleFormModal"))&&(a.appendChild(r),r.offsetTop<30&&!KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.MOBILE&&(a.style.paddingTop=30-r.offsetTop+"px"))):(e=location.protocol+"//"+location.host,window.location=e+"/#/error/404")}function D(){var e=KAMPYLE_DATA.getUserIdentifier();if(!e)return null;e=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({name:e.source_name,type:e.type,source:e.source});return e||null}function N(e){KAMPYLE_DATA.setMemoryData("isSyncedIdentifierData",!0),y((e=e.data).DECLINED_DATE,"DECLINED_DATE"),y(e.SUBMITTED_DATE,"SUBMITTED_DATE")}function y(e,t){var i=parseInt(KAMPYLE_DATA.getData(t));i=i||null;if((e=e||null)===i)return null;null!==e&&null===i||i<e?KAMPYLE_DATA.setData(t,e):null!==i&&null===e||e<i?KAMPYLE_FUNC.updateTargeting(t,i):KAMPYLE_UTILS.showWarning("special case")}function O(){if(W())return!1;var e;KAMPYLE_DATA.setMemoryData("isInvitationShouldBeIgnored",!1),KAMPYLE_EVENT_DISPATCHER.trigger("neb_pageView"),"preview"===KAMPYLE_DATA.getMemoryData("context")?M():"manual"!==window.KAMPYLE_ONSITE_STATE&&(e=KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.MANUALLY_INVITE_TARGETING),KAMPYLE_EVENT_DISPATCHER.trigger("neb_targetingInit",{skipInviteTargeting:e}))}function C(){var e=KAMPYLE_DATA.getData("kampyleSessionPageCounter")||0,e=parseInt(e);KAMPYLE_DATA.setData("kampyleSessionPageCounter",++e)}function h(e,t){(t=t||{}).isFormSubmitted||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&!KAMPYLE_DATA.isFormOfType(t.formId,KAMPYLE_CONSTANT.FORM_TYPES.INVITATION)||KAMPYLE_FUNC.setQuarantineDeclinedDate(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_FORM_CLOSED),KAMPYLE_DATA.setMemoryData("formIsShown",!1),KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!1,shown:!1,loaded:null}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||(w(),KAMPYLE_UTILS.triggerCustomEvent("neb_formClosed",{formId:t.formId}),"preview"===KAMPYLE_DATA.getMemoryData("context")&&window.close()),b(t.formId)}function b(e){var t=KAMPYLE_DATA.getMemoryData("buttonFormId"),i=KAMPYLE_DATA.getFormData(t),i="animation"===KAMPYLE_DATA.getDisplayType(i)?1e3:0;t?setTimeout(function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_showButton",{formId:t,formClosed:!0}),v(e)},i):v(e)}function v(e){KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterFormClosed",{formId:e}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&KAMPYLE_UTILS.triggerCustomEvent("neb_formClosed",{formId:e})}function Y(e,t){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&function(e){switch(KAMPYLE_DATA.getFormTriggerType(e)){case KAMPYLE_CONSTANT.FORM_TYPES.BUTTON:return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_BUTTON_FORMS_FROM_QUARANTINE);case KAMPYLE_CONSTANT.FORM_TYPES.CODE:return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_CODE_FORMS_FROM_QUARANTINE);case KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED:return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE);default:return}}(t.formId)||KAMPYLE_FUNC.setQuarantineSubmittedDate(),KAMPYLE_DATA.setData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION,!0),KAMPYLE_DATA.setFormState(t.formId,{isCurrentlySubmitted:!0}),x(KAMPYLE_CONSTANT.PROVISIONS.NATIVE_SCREEN_CAPTURE)&&KAMPYLE_EVENT_DISPATCHER.trigger("neb_sendScreenCapture")}function K(e,t){KAMPYLE_FUNC.setQuarantineDeclinedDate(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_INVITE_DECLINED),w()}function R(e,t){KAMPYLE_DATA.setFormState(t.formId,{loading:!1,loaded:!0}),A(t)}function U(e,t){t=t||{};var i=KAMPYLE_UTILS.getBrowser(),i="MSIE"!==i.name||"MSIE"===i.name&&8<parseInt(i.version,10);!1!==t.isScreenCaptureEnabled&&i&&KAMPYLE_SCREEN_CAPTURE.init(function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_screenCaptureLoaded",{formId:t.formId})})}function k(e,t){t=t||{};var i,r=KAMPYLE_DATA.getFormData(t.formId);switch(KAMPYLE_DATA.getDisplayType(r)){case KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX:i="kampyleForm";break;case KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION:i="kampyleFormAnimation";break;default:i="kampyleForm"}t=i+t.formId;KAMPYLE_UTILS.sendMessageToIframe(t,{action:"screenCaptureLoaded"})}function F(){KAMPYLE_DATA.setMemoryData("kampyleFocusedElement",document.activeElement)}function w(){var e;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||(e=KAMPYLE_DATA.getMemoryData("kampyleFocusedElement"))&&e.focus&&e.focus()}function x(e){var t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();return!(!e||!t||!t.provisions||!t.provisions[e]&&"true"!==t.provisions[e])}function V(){var e,t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().provisions,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=x(e));return i}function G(){return KAMPYLE_DATA.getMemoryData("kampyleDevice")||KAMPYLE_DATA.setMemoryData("kampyleDevice",KAMPYLE_UTILS.getDeviceTypeByUserAgent(navigator.userAgent)),KAMPYLE_DATA.getMemoryData("kampyleDevice")||"desktop"}function H(e){return 1===KAMPYLE_DATA.getMemoryData("version")?e.screenCapture={isTaken:!1}:e.integrations.screenCapture={isTaken:!1},e}function B(e,t){t=t||{};var i,r,n=KAMPYLE_DATA.getFormData(t.formId);if(!n||!t.formId)return!1;var a=KAMPYLE_DATA.getDisplayType(n);switch(a){case"animation":r=document.getElementById("kampyleFormAnimation"+t.formId);break;case"lightbox":r=document.getElementById("kampyleForm"+t.formId);break;case"popup":i=KAMPYLE_DATA.getMemoryData("popupHandler");break;case KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED:r=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId);break;default:return KAMPYLE_UTILS.showWarning("Invalid display type - "+a),!1}var o="*";if(r&&r.getAttribute&&(o=r.getAttribute("origin")||"*",i=r.contentWindow),i&&i.postMessage){MDIGITAL.CUSTOM_PARAMETERS.hasCustomParams(t.formId)&&(l=MDIGITAL.CUSTOM_PARAMETERS.formatCustomParams(t.formId),i.postMessage('{"action": "customParamsLoaded","customParams" : '+JSON.stringify(l)+"}",o));var s='{"action": "setFormId","formId" : '+t.formId+"}";i.postMessage(s,o),(s={action:"setExtraData"}).provisions=V(),s.integrations=KAMPYLE_INTEGRATION.getIntegrationData(),s.websiteId=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null,s.device=KAMPYLE_DATA.getMemoryData("kampyleDevice"),s.context=KAMPYLE_DATA.getMemoryData("context"),s.url=encodeURIComponent(document.location.href),s.customCssUpload=KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.CUSTOM_CSS_UPLOAD),(s=H(s)).isScreenCaptureEnabled=KAMPYLE_COMMON.isScreenCaptureEnabled(t.formId),s.provisions.screenCapture=x("screenCapture")||x("screenCaptureEnabled"),s.displayType=KAMPYLE_DATA.getDisplayType(n);var l=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();Object.assign(s,{submitUrlPrefix:l.submitUrlPrefix,submitUrlSuffix:l.submitUrlSuffix,submitUrlWithBackendUUID:l.submitUrlWithBackendUUID,globalResourcesUrl:l.globalResourcesUrl,versionedResourcesUrl:n.versionedResourcesUrl}),KAMPYLE_FUNC.checkProvision("serverBasedTargeting")&&(s.endUserIdentifier=D(),KAMPYLE_EVENT_DISPATCHER.trigger("neb_initUserIdentifierOnExtraData",{hasIdentifierValue:null!==s.endUserIdentifier}));var u=KAMPYLE_DATA.flushFormExtraData(t.formId);if(u)for(var d in u)u.hasOwnProperty(d)&&(s[d]=u[d]);KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)?KAMPYLE_DATA.fetchFormJsonData({formId:n.formId,callback:function(e){s=Object.assign({},s,{formData:e}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&(s.formLanguage=MDIGITAL.LOCALIZATION.getFormLanguage(t.formId)||null),i.postMessage(JSON.stringify(s),o)},onError:function(e){console.error(e)}},!0):i.postMessage(JSON.stringify(s),o)}KAMPYLE_EVENT_DISPATCHER.trigger("neb_formShown",{formId:t.formId,feedbackCorrelationUUID:t.feedbackCorrelationUUID})}function q(e,t){t=t||{},KAMPYLE_DATA.setMemoryData("NEB_FORM_VERSION",t.formVersion||0)}function W(e,t){var i,r=KAMPYLE_DATA.getMemoryData("formsState")||{};for(i in r)if(r.hasOwnProperty(i)){var n=!MDIGITAL.FORM_STATE.isFormAlreadyShown(i)&&(e&&e==i||t&&KAMPYLE_DATA.isSkipInvitation(i));if((r[i].shown||r[i].shouldBeShown)&&!KAMPYLE_DATA.isEmbeddedDisplayType(i)&&!n)return!0}return!1}function z(){KAMPYLE_DATA.isFeatureEnabled("SPA")&&O()}function X(){var e=Number(KAMPYLE_DATA.getData("kampyleUserSession"));return e?Math.floor(KAMPYLE_UTILS.getTimeDiff(e,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS)):0}function j(){var e=Number(KAMPYLE_DATA.getData("kampylePageLoadedTimestamp"));return e?Math.floor(KAMPYLE_UTILS.getTimeDiff(e,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS)):0}function J(e){e=Number(KAMPYLE_DATA.getData(e));return e?KAMPYLE_UTILS.getTimeDiff(e,KAMPYLE_CONSTANT.TIME_FORMATS.DAYS):null}function Q(e,t){var i=(KAMPYLE_DATA.getMemoryData("kampyleDevice")||KAMPYLE_CONSTANT.DEVICES.DESKTOP).toLowerCase(),r=KAMPYLE_DATA.getFormData(t.formId),t={desktop:i===KAMPYLE_CONSTANT.DEVICES.DESKTOP,mobile:i===KAMPYLE_CONSTANT.DEVICES.MOBILE,tablet:i===KAMPYLE_CONSTANT.DEVICES.TABLET,abandon:!!KAMPYLE_DATA.getMemoryData("targetingState.abandon"),time_in_session:X(),time_on_page:j(),excluded_urls:KAMPYLE_UTILS.getNestedPropertyValue(r,"urlRules.exclusionUrl.rule"),included_urls:KAMPYLE_UTILS.getNestedPropertyValue(r,"urlRules.inclusionUrl.rule"),number_of_visits:Number(KAMPYLE_DATA.getData("kampyleUserSessionsCount"))||1,last_declined:J("DECLINED_DATE"),last_feedback:J("SUBMITTED_DATE"),percentage:KAMPYLE_TARGETING.getUserPercentile(t.formId)};KAMPYLE_DATA.setMemoryData("invitationTriggeringData",t)}return{increasePageViewCounter:C,subscribeToCustomEvents:s,subscribeToPageEvents:E,createSession:p,updateTargeting:function(e,t){var i,r;x("serverBasedTargeting")&&KAMPYLE_DATA.getMemoryData("identifierValue")&&((i={})[e]=t,r=KAMPYLE_DATA.getServerBasedTargetingPrefix()+"/api/targeting/property/"+KAMPYLE_DATA.getServerBasedTargetingEnv()+MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId+"/identity/"+encodeURIComponent(KAMPYLE_DATA.getMemoryData("identifierValue")),e=i[e],KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_updatingSbtServer",{dataState:e,dataValue:t}),KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.POST,r,i))},checkProvision:x,getAllProvisions:V,onSyncIdentifierDataSuccess:function(e,t){!t||t.error?KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError({message:"Invalid identifier data. Data: "+JSON.stringify(t)}):N(t),"function"==typeof e&&e()},shouldRenderForm:c,addScreenCaptureData:H,sendFormExtraData:B,handleVersion:q,showPreviewForm:M,updatePreviewIframeStyle:P,validateFormContract:t,getTriggerTypeByEvent:T,prepareInviteTriggeringData:Q,loadScreenCaptureApi:U,handleInviteLoaded:g,sendInviteInitialData:S,checkDevice:G,shouldSyncIdentifier:function(e){var t=KAMPYLE_DATA.getMemoryData("identifierValue"),i=!0===KAMPYLE_DATA.getMemoryData("isSyncedIdentifierData"),r=!!KAMPYLE_FUNC.checkProvision("serverBasedTargeting");return!!e&&r&&(!i||t!==e)},prepareJsonData:m,shouldSkipFetchingFormData:function(e,t,i,r){var n=KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FETCHING_DATA_IN_PROGRESS+e;return r&&(n=n+"_"+i),n=KAMPYLE_DATA.getMemoryData(n),!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)||u(e,!1)||l(e,t)||n},getTimeInSession:X,getTimeOnPage:j,isReferrerDifferentThanHost:function(){var e=document.referrer.match(/:\/\/(.[^/]+)/);if(!e)return!0;if((e=e[1])===window.location.host)return!1;var t=KAMPYLE_DATA.getPropertySharedSubdomain();return!t||(!KAMPYLE_UTILS.isHostMatchesSubdomain(e,t)||!KAMPYLE_UTILS.isHostMatchesSubdomain(window.location.host,t))},setQuarantineDeclinedDate:function(e){var t="DECLINED_DATE",i=KAMPYLE_UTILS.getCurrentTimestamp();KAMPYLE_DATA.setData(t,i),x("serverBasedTargeting")&&KAMPYLE_EVENT_DISPATCHER.trigger(e,{declinedDate:i}),KAMPYLE_FUNC.updateTargeting(t,i)},setQuarantineSubmittedDate:function(){var e="SUBMITTED_DATE",t=KAMPYLE_UTILS.getCurrentTimestamp();KAMPYLE_DATA.setData(e,t),KAMPYLE_FUNC.checkProvision("serverBasedTargeting")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_updateTargetingWithSubmittedDate",{submittedDate:t}),KAMPYLE_FUNC.updateTargeting(e,t)},handleFormClosed:h,handleFeedbackSubmitted:Y,handleInviteDeclined:K,init:function(){e={neb_inviteReady:[S],neb_buttonClicked:[i],neb_inviteAccepted:[i],neb_showInvitation:[Q]},KAMPYLE_EVENT_DISPATCHER.subscribeMany(e),KAMPYLE_VIEW.init(),window.MDIGITAL&&window.MDIGITAL.EMBEDDED&&window.MDIGITAL.EMBEDDED.init(),x(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?window.MDIGITAL&&window.MDIGITAL.MODAL_DIALOGS&&window.MDIGITAL.MODAL_DIALOGS.init():x(KAMPYLE_CONSTANT.PROVISIONS.WCAG_TRAP_FOCUS_IN_MODAL)&&window.MDIGITAL&&window.MDIGITAL.WCAG&&window.MDIGITAL.WCAG.init(),KAMPYLE_TARGETING.init(),KAMPYLE_MESSAGE.init(),KAMPYLE_ANIMATION.init();var e=t(e=MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{});KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,e),e=KAMPYLE_UTILS.getUrlParam("nebContext")||"live",KAMPYLE_DATA.setMemoryData("context",e),KAMPYLE_DATA.setMemoryData("kampyleDevice",G()),KAMPYLE_DATA.setMemoryData("hostedViewportContent",[]),KAMPYLE_DATA.setMemoryData("isGuest",!0),e=KAMPYLE_UTILS.getBrowser(),"preview"!==KAMPYLE_DATA.getMemoryData("context")&&("MSIE"!==e.name||parseInt(e.version,10)),KAMPYLE_SESSIONCAM.init(),p(),E(),s(),KAMPYLE_UTILS.setEventHandler(window,"hashchange",z),KAMPYLE_DATA.setMemoryData("currentUrl",window.location.href),setInterval(function(){window.location.href!==KAMPYLE_DATA.getMemoryData("currentUrl")&&(KAMPYLE_DATA.setMemoryData("currentUrl",window.location.href),KAMPYLE_ONSITE_SDK.updatePageView())},500)},startCheckingTargeting:O,isAnyOtherFormAlreadyShown:W,isAnyInviteShown:function(){var e,t=KAMPYLE_DATA.getMemoryData("formsState")||{};for(e in t)if(t.hasOwnProperty(e)&&t[e].inviteShown)return!0;return!1},getSafeCustomParamVal:function(e){var t=(e=e||{}).value,i=e.type||"";if(null!==(t=void 0===t?MDIGITAL.CUSTOM_PARAMETERS.fetchCPValue(e):t))switch(i.toLowerCase()){case"datetime":t="string"==typeof t?parseInt(t)||null:t instanceof Date||t.getTime&&!isNaN(t.getTime())?t.getTime():null;break;case"number":t=KAMPYLE_UTILS.getNumericValue(t);break;case"text":"string"!=typeof t&&(t=null);break;case"boolean":"true"===t?t=!0:"false"===t&&(t=!1),"boolean"!=typeof t&&(t=null);break;default:t=null,console.error("Invalid custom parameter type "+i)}return t},isPreloadConfigured:function(){var e=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();return!!e&&"false"!==e.isFormsPreloaded&&!1!==e.isFormsPreloaded},kampyleButtonClicked:function(e){e=e||{},KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:e.formId})},loadMultipileForms:r,routeToForm:n,updateIdentifierDataIntegerIfNecessary:y,syncIdentifierData:function(e,t){var i=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null,i=KAMPYLE_DATA.getServerBasedTargetingPrefix()+"/api/targeting/property/"+KAMPYLE_DATA.getServerBasedTargetingEnv()+i+"/identity/"+e,e=KAMPYLE_FUNC.onSyncIdentifierDataSuccess.bind(null,t),t=function(e,t){KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError({message:"Failed to fetch identifier data. Error: "+JSON.stringify(t)}),"function"==typeof e&&e()}.bind(null,t);KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,i,null,e,t)},getUserIdentifierVal:D,handleFormStateUpdated:A,hasApplicationLoadingFailed:l,isJsonDataLoaded:u,handleInviteApplicationUpdated:o,isFormLoaded:_}}(),window.KAMPYLE_DATA=function(){var i,r,n={abandon:"abandon",percentage:"kampyleInvitePercentageUsers",timeInSession:"kampyleTimeInSession",timeOnPage:"kampyleTimeOnPage",deviceTypes:"devicetypes",pageEvents:"pageElementEvent"},a={GTM:"isGoogleAnalyticsClientGTM",WCAG:"isWCAG",SPA:"isSpa",MANUALLY_INVITE_TARGETING:"isManuallyInviteTargeting",CUSTOM_CSS_UPLOAD:"customCssUpload"},o=[KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_BUTTON_FORMS_FROM_QUARANTINE,KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE,KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_CODE_FORMS_FROM_QUARANTINE];function s(e){var t=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);return KAMPYLE_UTILS.getNestedPropertyValue(t,e)}function l(e){return e=e||"",KAMPYLE_UTILS.getNestedPropertyValue(r,e)}function u(e,t){KAMPYLE_UTILS.setNestedPropertyValue(r,e,t)}function d(e){for(var t,i=c(),r=i.length,n=0;n<r;n++)if(t=i[n],parseInt(e)===parseInt(t.formId))return t;return null}function _(e){return l("formsState."+(e=e||""))||null}function m(e,t){t=t||{};var i,r=l("formsState")||{};for(i in r[e]=r[e]||{},t)"object"==typeof r[e][i]&&null!==r[e][i]?Object.assign(r[e][i],t[i]):r[e][i]=t[i];u("formsState",r)}function c(){return(MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{}).formNodes||[]}function A(e){var t=KAMPYLE_DATA.getMemoryData("kampyleDevice"),e=KAMPYLE_UTILS.getNestedPropertyValue(e,"formDisplay.displayType");return t!==KAMPYLE_CONSTANT.DEVICES.DESKTOP?e===KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED?KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED:KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX:e||KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX}function E(){return KAMPYLE_UTILS.getNestedPropertyValue(i,"cookieExpirationTime")||KAMPYLE_CONSTANT.COOKIE_EXPIRATION}function T(e){e=KAMPYLE_UTILS.getNestedPropertyValue(KAMPYLE_DATA.getFormData(e),"formType");return KAMPYLE_CONSTANT.FORM_TRIGGER_TYPES_MAP[e]?e:null}return{init:function(){i=MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{},r={}},isFeatureEnabled:function(e){var t=a[e];return!!(t=null==t&&-1!==o.indexOf(e)?e:t)&&!!KAMPYLE_UTILS.getNestedPropertyValue(i,t)},getData:function(t){try{return KAMPYLE_DATA.getPropertySharedSubdomain()?KAMPYLE_UTILS.kampyleGetCookie(KAMPYLE_UTILS.TOP_LEVEL_DOMAIN_COOKIE_PREFIX+t):localStorage[t]||KAMPYLE_UTILS.kampyleGetCookie(t)}catch(e){return KAMPYLE_UTILS.kampyleGetCookie(t)}},setData:function(e,t,i){if(!KAMPYLE_DATA.getPropertySharedSubdomain())try{localStorage[e]=t}catch(e){}return KAMPYLE_UTILS.kampyleSetCookie(e,t,i||E(),KAMPYLE_DATA.getPropertySharedSubdomain()),!0},deleteData:function(e){var t=KAMPYLE_DATA.getPropertySharedSubdomain();if(t)KAMPYLE_UTILS.kampyleDeleteCookie(KAMPYLE_UTILS.TOP_LEVEL_DOMAIN_COOKIE_PREFIX+e,t);else{try{void 0!==localStorage[e]&&delete localStorage[e]}catch(e){}KAMPYLE_UTILS.kampyleDeleteCookie(e)}},getAllForms:c,getInegrations:function(){return(MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{}).integrations||{}},getFormData:d,getMemoryData:l,getTargetingData:function(e,t){return e&&t&&n[t]?(e=d(e)||{},KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData."+n[t])):null},setMemoryData:u,getShownFormId:function(){var e,t=KAMPYLE_DATA.getMemoryData("formsState")||{};for(e in t)if(t.hasOwnProperty(e)&&t[e].shouldBeShown)return e;return!1},getFormState:_,setFormState:m,getInviteData:function(e){return(e=d(e))?e.inviteData:null},getDisplayType:A,saveFormExtraData:function(e,t){t=t||{};var i=(_(e)||{}).pendingExtraData||{};m(e,{pendingExtraData:t=Object.assign(i,t)})},flushFormExtraData:function(e){var t=_(e)||{},e={};return t&&t.pendingExtraData&&(e=t.pendingExtraData,delete t.pendingExtraData),e},isCustomHtmlForm:function(e){var t=d(e)||{},e=KAMPYLE_UTILS.getUrlParam("isCustomHtml");return!0===t.isCustomHtmlEnabled||"true"===t.isCustomHtmlEnabled||!0===e||"true"===e},getCookieExpiration:E,isNewMobileInvitation:function(){var e=KAMPYLE_FUNC.checkProvision("mobileInvitationLayout"),t=KAMPYLE_DATA.getMemoryData("kampyleDevice");return!!e&&"desktop"!==t},isCustomHtmlAndFixedSizeForm:function(e){var t=KAMPYLE_DATA.isCustomHtmlForm(e),i=KAMPYLE_FUNC.checkProvision("dynamicModalSizeInCustomHtml");return t&&(!i||(!0===(e=d(e=e)||{}).isFixedSize||"true"===e.isFixedSize))},deleteMemoryData:function(e){delete(r||{})[e]},getFormVersion:function(e){return e=KAMPYLE_DATA.getFormData(e),Number((e||{}).formVersion)||0},isMobileDynamicSizing:function(e){var t=KAMPYLE_DATA.getMemoryData("kampyleDevice"),i=KAMPYLE_CONSTANT.FEATURE_VERSIONS.MOBILE_DYNAMIC_SIZING;e=e||KAMPYLE_DATA.getMemoryData("currentFormId");var r=KAMPYLE_DATA.isCustomHtmlForm(e);return(r&&KAMPYLE_FUNC.checkProvision("mobileWebDynamicFormSize")||!r&&KAMPYLE_FUNC.checkProvision("mobileWebDynamicFormSizeInFormBuilder"))&&t&&"desktop"!==t&&KAMPYLE_DATA.getFormVersion(e)>=i},getPropertySharedSubdomain:function(){var e=s("sharedSubdomain");return e&&KAMPYLE_UTILS.isHostMatchesSubdomain(window.location.host,e)?e:null},getUserIdentifier:function(){for(var e=s("formNodes")||[],t=0;t<e.length;t++){var i=(e[t].customParams||[]).find(function(e){return"true"===e.is_identifier.toLowerCase()})||null;if(null!==i)return i}return null},getServerBasedTargetingPrefix:function(){return s("sbtServerDomain")},getServerBasedTargetingEnv:function(){return s("sbtEnvPrefix")},isPopupDisplayType:function(e){return A(d(e))===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP},isEmbeddedDisplayType:function(e){return A(d(e))===KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED},isLightBoxDisplayType:function(e){return A(d(e))===KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX},fetchFormJsonData:function(t,i){var r=KAMPYLE_DATA.getMemoryJsonKey(t.formId,t.isInvite),e=KAMPYLE_DATA.getMemoryData(r),n=KAMPYLE_DATA.getDataJsonUrl(t.formId,t.isInvite);if(e)return t.fetchingDataInProgressKey&&KAMPYLE_DATA.setMemoryData(t.fetchingDataInProgressKey,!1),"function"==typeof t.callback&&t.callback(e);if(!n){e=new Error("Failed to get JSON, jsonDataUrl is missing.");return"function"==typeof t.onError&&t.onError(e)}KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,n,null,function(e){i&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_warning",{message:"second http request have been made to the url: "+n}),e?(KAMPYLE_DATA.setMemoryData(r,e),t.fetchingDataInProgressKey&&KAMPYLE_DATA.setMemoryData(t.fetchingDataInProgressKey,!1),"function"==typeof t.callback&&t.callback(e)):(e=new Error("Invalid form json data. Data: "+JSON.stringify(e)),KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError(e),"function"==typeof t.onError&&t.onError(e))},function(e){KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError({message:"Failed to fetch JSON data. Error: "+JSON.stringify(e)}),"function"==typeof t.onError&&t.onError(e)})},getFormTriggerType:T,getPropertyId:function(){return MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null},isMobile:function(){var e=KAMPYLE_DATA.getMemoryData("kampyleDevice");return e&&"desktop"!==e},isSkipInvitation:function(e){return e=d(e)||{},(e=KAMPYLE_UTILS.getNestedPropertyValue(e,"inviteData.skipInvitation"))&&"false"!==e},getFormIframeId:function(e){var t=KAMPYLE_DATA.getFormData(e);return null==t?null:t.formType===KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED?KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e:(t=A(t))===KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX?KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.IFRAME_ID_PREFIX+e:t===KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION?KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+e:null},isFormOfType:function(e,t){return!!(e=T(e))&&e===t},getMemoryJsonNestedPropertyValue:function(e,t,i){return i=KAMPYLE_DATA.getMemoryJsonKey(e,i),null!=(i=KAMPYLE_DATA.getMemoryData(i))?KAMPYLE_UTILS.getNestedPropertyValue(i,t):null},getMemoryJsonKey:function(e,t){var i=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS),t=(t?KAMPYLE_CONSTANT.INVITE_JSON_DATA_KEY_PREFIX:KAMPYLE_CONSTANT.FORM_JSON_DATA_KEY_PREFIX)+e;return t=i?t+"_"+MDIGITAL.LOCALIZATION.getFormLanguage(e):t},setTimeoutHandler:function(e,t){u(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS+"."+e,t)},getTimeoutHandler:function(e){return l(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS+"."+e)},localizeUrl:function(e,t){return e=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&MDIGITAL.LOCALIZATION.getFormLanguage(e)||KAMPYLE_CONSTANT.LOCALIZED_FORM_DEFAULT_REPLACE_VALUE,t.replace("###LANGUAGE_CODE###",e)},getMemory:function(){return r},initOnsiteDefaultState:function(){for(var e,t={},i=(MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{}).formNodes||[],r=i.length,n=0;n<r;n++)(e=i[n])&&(t[e.formId]={loading:!1,loaded:null,shouldBeShown:!1,shown:!1,inviteLoaded:null,inviteShown:!1,jsonFailed:!1,applicationFailed:!1,isCurrentlySubmitted:!1,targeting:{pageTargeting:null,behavioralTargeting:[],quarantineTargeting:[]}});u("formsState",t),u("hostingElementsHeights",{}),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,!1),KAMPYLE_DATA.clearAllTimeoutHandlers()},getDataJsonUrl:function(e,t){var i=KAMPYLE_DATA.getFormData(e);return(t=KAMPYLE_UTILS.getNestedPropertyValue(i,t?"inviteData.inviteDataUrl":"formDataUrl"))?KAMPYLE_DATA.localizeUrl(e,t):null},clearAllTimeoutHandlers:function(){var e,t=l(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS);for(e in t)window.clearTimeout(t[e]);u(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS,{})},getNestedConfigurationProperty:s}}(),window.KAMPYLE_TARGETING=function(o){var t={DECLINED_DATE:"The user did not decline",SUBMITTED_DATE:"The user did not submit"};function n(e,t){t=Number(KAMPYLE_DATA.getData(t));if(e=Number(e),!t||!e)return!1;return t+864e5*e>KAMPYLE_UTILS.getCurrentTimestamp()}function e(e,t){if(t=t||{},!KAMPYLE_DATA.getFormData(t.formId))return!1;var i=KAMPYLE_DATA.getMemoryData("kampyleDevice");return i!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&i!==KAMPYLE_CONSTANT.DEVICES.TABLET||KAMPYLE_FUNC.isPreloadConfigured()&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:t.formId}),KAMPYLE_DATA.setFormState(t.formId,{loaded:null}),KAMPYLE_DATA.setMemoryData("buttonFormId",t.formId),KAMPYLE_EVENT_DISPATCHER.trigger("neb_showButton",{formId:t.formId}),KAMPYLE_DATA.setMemoryData("isButtonShown",!0),!0}function s(e){var t=KAMPYLE_DATA.getMemoryData("currentInviteFormId");if(!(e=e||KAMPYLE_DATA.getFormData(t))||KAMPYLE_DATA.getMemoryData("isInvitationShouldBeIgnored"))return!1;var i,r=KAMPYLE_DATA.getMemoryData("targetingState");for(i in r)if(!0!==r[i])return!1;t=KAMPYLE_TARGETING.shouldDisableIntercept(e);if(KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_BEHAVIORAL_TARGETING_PHASE_ENDED,e),t)return!1;t=a(e);if(KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_QUARANTINED_SURVEY_PHASE_ENDED,e),!t)return!1;KAMPYLE_DATA.setData("kampyleInvitePresented",!0);t=KAMPYLE_UTILS.getNestedPropertyValue(e,"inviteData.skipInvitation");return KAMPYLE_UTILS.isTruthy(t)?function(e){KAMPYLE_FUNC.isPreloadConfigured()||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e.formId});KAMPYLE_EVENT_DISPATCHER.trigger("neb_skipInvitation",{formId:e.formId})}(e):KAMPYLE_TARGETING.handleNotSkippedInvitaion(e),!0}function a(e){var t=M(e),i=!0===KAMPYLE_DATA.getMemoryData("formIsShown"),r=KAMPYLE_UTILS.isTrue(KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.kampyleInvitePerSession.inviteOncePerSession")),n=!r&&KAMPYLE_UTILS.isTrue(KAMPYLE_DATA.getData("kampyleInvitePresented"));KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_TARGETING_RULE_EVALUATED,{formId:e.formId,targetingRule:KAMPYLE_CONSTANT.TARGETING_RULES.INVITE_IF_ANY_INVITE_ALREADY_SHOWN_PER_SESSION,formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!n,expected:"Display Invite "+(r?"more than once per session":"once per session"),actual:!n});var a=!1;return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&(a=!r&&KAMPYLE_UTILS.isTrue(KAMPYLE_DATA.getData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION)),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_TARGETING_RULE_EVALUATED,{formId:e.formId,targetingRule:KAMPYLE_CONSTANT.TARGETING_RULES.INVITE_IF_ANY_SURVEY_ALREADY_SUBMITTED_PER_SESSION,formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!a,expected:"Display Invite "+(r?"more than once per session":"once per session"),actual:!a})),!(t||i||n||a)}function l(e){var t=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SERVER_BASED_TARGETING)&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DO_NOT_SURVEY_ON_UBT_NETWORK_FAIL)&&!KAMPYLE_DATA.getMemoryData("isGuest")&&!KAMPYLE_DATA.getMemoryData("isSyncedIdentifierData");return t&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"ubtFailed",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:!t,expected:"should ignore quarantine rules evaluation",actual:t}),t}function u(e){return!(e&&e.onSiteData&&e.onSiteData.genericRule)||("string"==typeof e.onSiteData.genericRule&&(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.GREATER_SMALLER_THAN_DECODE)&&(e.onSiteData.genericRule=KAMPYLE_UTILS.htmlDecode(e.onSiteData.genericRule)),e.onSiteData.genericRule=JSON.parse(e.onSiteData.genericRule)),KAMPYLE_TARGETING.evaluateRule(e.onSiteData.genericRule,e))}function r(e){if("string"!=typeof e)return!1;e=e.toLowerCase();var t=o.location.href.toLowerCase();return t.substring(0,e.length)===e||(t=t.replace(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i,"")).substring(0,e.length)===e}function d(e){for(var t=(e=e.split(";")).length,i=0;i<t;i++)if(!0===r(e[i]))return!0;return!1}function _(e,t){var i,r,n=!1;if(!e)return!1;var a,o,s=KAMPYLE_UTILS.safeToLower(e.condition);return e&&void 0!==e.value&&null!==e.value&&-1!==["customParam"].indexOf(e.fieldOrigin)?"customParam"===e.fieldOrigin&&((a=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamById(e.fieldId,t))&&a.source_name&&(i=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({type:a.type,name:a.source_name,source:a.source}),r=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({type:a.type,name:a.source_name,source:a.source,value:e.value}),t=a.type,o=e.condition,e={text:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL,KAMPYLE_CONSTANT.OPERATORS.CONTAINS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_CONTAIN,KAMPYLE_CONSTANT.OPERATORS.STARTS_WITH,KAMPYLE_CONSTANT.OPERATORS.ENDS_WITH,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE,KAMPYLE_CONSTANT.OPERATORS.REGEX],boolean:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE],datetime:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL,KAMPYLE_CONSTANT.OPERATORS.LATER_THAN,KAMPYLE_CONSTANT.OPERATORS.EARLIER_THAN,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE],number:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL,KAMPYLE_CONSTANT.OPERATORS.GREATER_THAN,KAMPYLE_CONSTANT.OPERATORS.SMALLER_THAN,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE]},t=KAMPYLE_UTILS.safeToLower(t),o=KAMPYLE_UTILS.safeToLower(o),o=!!(t&&o&&e[t]&&-1!==e[t].indexOf(o))),void 0!==i&&o&&(n=KAMPYLE_UTILS.kampyleCompareByOperator(i,r,s,a.type))):n=!1,n}function m(e){if(e&&e.onSiteData&&e.onSiteData.devicetypes){for(var t=e.onSiteData.devicetypes.length,i=0;i<t;i++)if(e.onSiteData.devicetypes[i]===KAMPYLE_DATA.getMemoryData("kampyleDevice"))return!0;return!1}return!0}function c(e){e=e||{};var t=Number(KAMPYLE_DATA.getData("kampyleSessionPageCounter")||0);return KAMPYLE_UTILS.kampyleCompareByOperator(t,parseInt(e.numberOfRepeats),e.compareString)}function A(e,t,i){var r=1e3*parseInt(e),n=(a=KAMPYLE_DATA.getData("kampyleUserSession"),a=parseInt(a),KAMPYLE_UTILS.getTimeDiff(a)),a=KAMPYLE_DATA.getMemoryData("targetingState");a&&r<=n?(a.kampyleTimeInSession=!0,KAMPYLE_DATA.setMemoryData("targetingState",a),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"TimeInSession",formTriggerType:KAMPYLE_DATA.getFormTriggerType(t.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,isPassed:!0,expected:r,actual:"Over on the expected "+r}),KAMPYLE_TARGETING.isShowInvite()):setTimeout(function(){A(e,t)},0+(r-n))}function E(e,t){var i=(e=e||{height:"5",zIndex:"0"}).zIndex||"0",r=e.height&&"0"!==e.height?e.height+"px":"5px",e=o.getElementById("kampyle_abandon_zone");null===e?((e=o.createElement("div")).id="kampyle_abandon_zone",e.style.width="100%",e.style.height=r,e.style.zIndex=i,e.style.position="fixed",e.style.top="0px",e.onmouseover=function(){var e;e=t,KAMPYLE_DATA.setMemoryData("targetingState.abandon",!0),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"UserAbandonment",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),isPassed:!0,targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,expected:"Mouse over user abandonment",actual:"Mouse was over user abandonment"}),!1===s()&&KAMPYLE_DATA.setMemoryData("targetingState.abandon",!1)},o.body.appendChild(e)):(e.style.height=r,e.style.zIndex=i)}function T(e){if(!e||!e.selectorValue||!e.selectorType)return null;var t="{{selector}}{{value}}";switch(e.selectorType){case"className":t=t.replace("{{selector}}",".");break;case"objectId":t=t.replace("{{selector}}","#");break;default:return KAMPYLE_UTILS.showWarning("Invalid selector type:"+e.selectorType),null}return t=t.replace("{{value}}",e.selectorValue)}function f(e,t){var i=T(e);if(!i)return null;for(var r=Number(e.time)||0,n=o.querySelectorAll(i)||[],a=0;a<n.length;a++)n[a].addEventListener(e.eventName,function(){setTimeout(function(){KAMPYLE_DATA.setMemoryData("targetingState.kampylePageElementEvent",!0),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"PageElement",formTriggerType:KAMPYLE_DATA.getFormTriggerType(t.formId),isPassed:!0,targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,expected:e.eventName+" for element with "+e.selectorType+"="+e.selectorValue,actual:!0}),!1===s()&&KAMPYLE_DATA.setMemoryData("targetingState.kampylePageElementEvent",!1)},1e3*r)})}function p(e,i){null!==e?(setTimeout(function(){var e,t;KAMPYLE_DATA.setMemoryData("targetingState.kampyleTimeOnPage",!0),e=i,(t=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.kampyleTimeOnPage.time"))&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"TimeOnPage",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),isPassed:!0,targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,expected:t,actual:"Over on the expecetd "+t}),s()},1e3*e),KAMPYLE_DATA.setData("kampylePageLoadedTimestamp",KAMPYLE_UTILS.getCurrentTimestamp())):KAMPYLE_DATA.setMemoryData("targetingState.kampyleTimeOnPage",!0)}function g(e){if(null===e)return KAMPYLE_DATA.setMemoryData("targetingState.kampyleIdleTime",!0);function t(){i=KAMPYLE_UTILS.getCurrentTimestamp()}var i=KAMPYLE_UTILS.getCurrentTimestamp(),r=setInterval(function(){KAMPYLE_UTILS.getCurrentTimestamp()-i>=1e3*e&&(KAMPYLE_DATA.setMemoryData("targetingState.kampyleIdleTime",!0),s(),removeEventListener("click",t),removeEventListener("mousemove",t),removeEventListener("keydown",t),clearInterval(r))},1e3);addEventListener("click",t),addEventListener("mousemove",t),addEventListener("keydown",t)}function I(e){var t=KAMPYLE_DATA.getData("kampyleUserPercentile");return t||"0"===t||(t=100*Math.random(),KAMPYLE_DATA.setData("kampyleUserPercentile",t)),Number(t)&&Number(t).toFixed?Number(t).toFixed(1):Number(t)}function S(e){var t=I();if(e&&t&&Number(e.prec)<t)return!1;return!0}function i(e,t){var i;KAMPYLE_TARGETING.isEmbbeddedTargetingEnabled()||KAMPYLE_TARGETING.initEmbeddedTargeting(),KAMPYLE_DATA.setMemoryData("invitationTimeStamp",null),KAMPYLE_DATA.setMemoryData("buttonFormId",null),KAMPYLE_DATA.setMemoryData("formIsShown",!1),KAMPYLE_DATA.setMemoryData("isButtonShown",!1),KAMPYLE_DATA.setMemoryData("isInviteActivated",!1),KAMPYLE_DATA.setMemoryData("targetingState",{}),(i=KAMPYLE_DATA.getMemoryData("targetingState")).kampyleTimeInSession=!1,"desktop"===KAMPYLE_DATA.getMemoryData("kampyleDevice")&&(i.abandon=!1),i.kampylePageElementEvent=!1,i.kampyleTimeOnPage=!1,i.kampyleIdleTime=!1,KAMPYLE_DATA.setMemoryData("targetingState",i),L(e,t)}function L(e,t){var i,r,r=(r=null,KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SERVER_BASED_TARGETING)&&(i=null!==(r=KAMPYLE_FUNC.getUserIdentifierVal()),KAMPYLE_DATA.setMemoryData("isGuest",!i),KAMPYLE_EVENT_DISPATCHER.trigger("neb_initUserIdentifier",{hasIdentifierValue:i})),r);KAMPYLE_FUNC.shouldSyncIdentifier(r)?(KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_settingIdentifierValueOnMemory",{hasIdentifierValue:null!==r}),KAMPYLE_DATA.setMemoryData("identifierValue",r),KAMPYLE_FUNC.syncIdentifierData(encodeURIComponent(r),P.bind(this,e,t))):(KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_shouldNotSyncIdentifier"),P(0,t))}function P(e,t){t=t||{};var i=KAMPYLE_DATA.getAllForms();if(i&&i.length){KAMPYLE_TARGETING.isEmbbeddedTargetingEnabled()&&KAMPYLE_TARGETING.initEmbeddedTargeting();for(var r=i.length-1;0<=r&&(i[r].formType!==KAMPYLE_CONSTANT.FORM_TYPES.BUTTON||t.skipButtonTargeting||!1!==KAMPYLE_DATA.getMemoryData("isButtonShown")?KAMPYLE_TARGETING.shouldCheckInvite(i[r],t)&&!0===(KAMPYLE_TARGETING.validateCommonTargetingOnForm(i[r])&&KAMPYLE_TARGETING.validateCommonSessionTargeting(i[r].formId))&&KAMPYLE_TARGETING.initDynamicTargeting(i[r]):!0===KAMPYLE_TARGETING.validateCommonTargetingOnForm(i[r])&&KAMPYLE_EVENT_DISPATCHER.trigger("neb_initButton",{formId:i[r].formId}),!0!==KAMPYLE_DATA.getMemoryData("isInviteActivated")||!0!==KAMPYLE_DATA.getMemoryData("isButtonShown"));r--);KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_PAGE_TARGETING_PHASE_ENDED)}}function M(e){var t=KAMPYLE_TARGETING.isAlreadyDeclined(e),e=KAMPYLE_TARGETING.isAlreadySubmitted(e);return t||e}return{init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_targetingInit:[i],MDigital_manuallyInviteTargeting:[L],neb_initButton:[e]}),KAMPYLE_DATA.setMemoryData("targetingState",{})},initTargeting:i,initFormsTargeting:P,validateCommonTargetingOnForm:function(e){var t,i,r=!0;return!0===r&&(t=function(e){if(e.urlRules&&e.urlRules.exclusionUrl)if(e.urlRules.exclusionUrl.rule)return d(e.urlRules.exclusionUrl.rule);return!1}(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.exclusionUrl.rule")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"UrlExclude",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:!t,expected:KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.exclusionUrl.rule"),actual:location.href}),!0===t&&(r=!1)),!0===r&&(i=function(e){if(e.urlRules&&e.urlRules.inclusionUrl)if(e.urlRules.inclusionUrl.rule)return d(e.urlRules.inclusionUrl.rule);return!0}(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.inclusionUrl.rule")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingRule:"UrlInclude",targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:i,expected:KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.inclusionUrl.rule"),actual:location.href}),!1===i&&(r=!1)),!0===r&&(i=u(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.genericRule")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"GenericRule",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:i,expected:"Generic rule evaluation result should be true",actual:i}),r=i),!0===r&&(r=m(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.devicetypes")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"DeviceTypes",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:r,expected:KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.devicetypes").toString(),actual:KAMPYLE_DATA.getMemoryData("kampyleDevice")})),r},isShowInvite:s,handleButton:e,isDataValid:n,generateShouldShowInviteParamName:function(e){return e?"shouldShowInvite_"+e:null},handleNotSkippedInvitaion:function(e){KAMPYLE_DATA.getDisplayType(e)===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP?(KAMPYLE_DATA.setFormState(e.formId,{inviteShown:!0}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_showInvitation",{formId:e.formId})):KAMPYLE_FUNC.isFormLoaded(e.formId)?KAMPYLE_EVENT_DISPATCHER.trigger("neb_showInvitation",{formId:e.formId}):(KAMPYLE_DATA.setMemoryData(KAMPYLE_TARGETING.generateShouldShowInviteParamName(e.formId),!0),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e.formId}))},initDynamicTargeting:function(e){KAMPYLE_DATA.setMemoryData("isInviteActivated",!0);var t=KAMPYLE_DATA.getMemoryData("targetingState");void 0!==e.onSiteData.kampyleTimeInSession?A(e.onSiteData.kampyleTimeInSession.time,e):t.kampyleTimeInSession=!0,e.onSiteData.abandon?"desktop"===KAMPYLE_DATA.getMemoryData("kampyleDevice")&&E(e.onSiteData.abandon,e):t.abandon=!0;var i,r=KAMPYLE_DATA.getTargetingData(e.formId,"pageEvents");for(i in r?f(r,e):t.kampylePageElementEvent=!0,void 0!==e.onSiteData.kampyleTimeOnPage?p(e.onSiteData.kampyleTimeOnPage.time,e):t.kampyleTimeOnPage=!0,KAMPYLE_FUNC.checkProvision("targetingRuleIdleTime")&&void 0!==e.onSiteData.kampyleIdleTime?g(e.onSiteData.kampyleIdleTime.timeSpan):t.kampyleIdleTime=!0,KAMPYLE_DATA.setMemoryData("targetingState",t),t)if(t.hasOwnProperty(i)&&!t[i])return!1;s(e)},validateCommonSessionTargeting:function(e){e=e||"";var t=KAMPYLE_DATA.getFormData(e)||{},i=t.formType===KAMPYLE_CONSTANT.FORM_TYPES.INVITATION;if(i&&KAMPYLE_DATA.setMemoryData("currentInviteFormId",e),!1===KAMPYLE_TARGETING.isNumSessions(t))return!1;if(KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.kampyleInvitePercentageUsers.prec")){var r=S(t.onSiteData.kampyleInvitePercentageUsers);if(KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"UsersPercentage",formTriggerType:KAMPYLE_DATA.getFormTriggerType(t.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:r,expected:KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.kampyleInvitePercentageUsers.prec"),actual:I()}),!1===r)return!1}return r=!!t.onSiteData.numberOfPagesViewed&&!1===c(t.onSiteData.numberOfPagesViewed),KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.numberOfPagesViewed.numberOfRepeats")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"NumberOfPagesViewed",targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:!r,expected:KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.numberOfPagesViewed.numberOfRepeats"),actual:KAMPYLE_DATA.getData("kampyleSessionPageCounter")}),!r&&(i&&(KAMPYLE_UTILS.isTrue(t.inviteData.skipInvitation)?KAMPYLE_FUNC.isPreloadConfigured()&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e}):KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadInvitation",{formId:e})),!0)},isUbtFailed:l,evaluateRule:function(e,t){var i,r=!1,n=!1;if(e&&"criteriaGroup"===e.type&&e.childrenCriterias&&e.childrenCriterias.length&&e.conjunction)for(var a=0;a<e.childrenCriterias.length&&!n;a++)(i=KAMPYLE_TARGETING.evaluateRule(e.childrenCriterias[a],t))&&"OR"===e.conjunction?n=r=!0:i||"AND"!==e.conjunction?r=i:n=!(r=!1);else e&&"criteria"===e.type&&(r=_(e,t));return r},shouldDisableIntercept:function(e){var t=!1,i=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.disableInterceptRule");return i&&("string"==typeof i&&(i=JSON.parse(i)),t=KAMPYLE_TARGETING.evaluateRule(i,e),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"disableInterceptRule",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,isPassed:t,expected:"Disable intercept rule should be true",actual:t})),t},checkPagesInSession:c,isNumSessions:function(e){var t=KAMPYLE_DATA.getData("kampyleUserSessionsCount"),i=!1,r=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.numberOfVisits.numberOfRepeats"),n=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.numberOfVisits.compareString");return t&&(i=null===r||null===n||KAMPYLE_UTILS.kampyleCompareByOperator(parseInt(t),parseInt(r),n)),r&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"NumberOfVisits",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:i,expected:n+" "+r,actual:t}),i},targetingDevice:m,getUserPercentile:I,checkPercentageUsers:S,validateGap:A,getEventQuery:T,handleTriggerByEvents:f,isUrlMatch:r,setTargetingState:function(e,t){KAMPYLE_DATA.setMemoryData("targetingState."+e,t)},getTextByQuarentine:function(e){return KAMPYLE_DATA.getData(e)?new Date(parseInt(KAMPYLE_DATA.getData(e))):t[e]},shouldCheckInvite:function(e,t){return e.formType===KAMPYLE_CONSTANT.FORM_TYPES.INVITATION&&KAMPYLE_UTILS.kampyleIsCookieEnabled()&&!t.skipInviteTargeting&&!1===KAMPYLE_DATA.getMemoryData("isInviteActivated")&&!KAMPYLE_TARGETING.isUbtFailed(e)},isQuarantinePhasePassed:a,isGenericRuleValid:u,checkQuarantine:M,initEmbeddedTargeting:function(){var e=KAMPYLE_DATA.getAllForms();if(e&&e.length)for(var t,i,r,n=e.length-1;0<=n;n--)e[n].formType===KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED&&((r=KAMPYLE_TARGETING.validateCommonTargetingOnForm(e[n]))&&KAMPYLE_TARGETING.isEmbbeddedTargetingEnabled()&&(t=!KAMPYLE_TARGETING.checkQuarantine(e[n]),i=KAMPYLE_TARGETING.validateCommonSessionTargeting(e[n].formId),r=!l(e[n])&&t&&i),r&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e[n].formId}))},isEmbbeddedTargetingEnabled:function(){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EMBEDDED_TARGETING)},isAlreadyDeclined:function(e){var t=!0===(null!==(r=(r=e.onSiteData)||{}).declined&&void 0!==r.declined&&n(r.declined.days,"DECLINED_DATE")),i=KAMPYLE_TARGETING.getTextByQuarentine("DECLINED_DATE"),r=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.declined.days");return r&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"DontInviteOnDeclined",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!t,expected:r+" days",actual:"Current: "+new Date+" Declined: "+i}),t},isAlreadySubmitted:function(e){var t=!0===function(e){if(KAMPYLE_UTILS.getNestedPropertyValue(e,"submitted"))return n(e.submitted.days,"SUBMITTED_DATE");return!1}(e.onSiteData),i=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.submitted.days"),r=KAMPYLE_TARGETING.getTextByQuarentine("SUBMITTED_DATE");return i&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"DontInviteOnSubmitted",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!t,expected:i+" days",actual:"Current: "+new Date+" Submitted: "+r}),t}}}((window,document)),window.KAMPYLE_ANIMATION=function(){var t={ANIMATION_DIRECTION:"centerRight"};function e(e,t){m(0,t),setTimeout(function(){i(0,t)},10)}function i(e,t){t=t||{};var i,r,n,a=KAMPYLE_DATA.getFormData(t.formId),o=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(i=a,r=o,n=t.formId,!i||!r||!u(i)||KAMPYLE_FUNC.hasApplicationLoadingFailed(n,!1))return!1;KAMPYLE_DATA.setMemoryData("isInvitationShouldBeIgnored",!0);t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId);t&&(t.style.display="block");var s=l(a);switch(s){case"centerRight":KAMPYLE_UTILS.setElementStyle(o,{right:0});break;case"centerLeft":KAMPYLE_UTILS.setElementStyle(o,{left:0});break;case"bottomRight":case"bottomLeft":KAMPYLE_UTILS.setElementStyle(o,{bottom:0});break;case"topRight":case"topLeft":KAMPYLE_UTILS.setElementStyle(o,{top:0});break;default:return KAMPYLE_UTILS.showWarning("Invalid animation type - "+s),!1}}function r(){var e=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);e&&KAMPYLE_UTILS.setElementStyle(e,{width:0,height:0})}function n(e,t){setTimeout(function(){KAMPYLE_DATA.getFormData(t.formId);var e=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId);e&&(KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")?(e.remove(),KAMPYLE_DATA.initOnsiteDefaultState()):(e.src=e.src,e.style.display="none",e.removeAttribute&&e.removeAttribute("origin"))),r()},1e3)}function a(e,t){var i=KAMPYLE_DATA.getFormData(t.formId);if("animation"!==KAMPYLE_DATA.getDisplayType(i))return!1;t=t||{};t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(!i||!t||!u(i))return!1;s(i,t)}function o(e){return String((window.innerHeight-parseInt(e,10))/2)+"px"}function l(e){return e=e||{},KAMPYLE_UTILS.getNestedPropertyValue(e,"formDisplay.displayDirection")||t.ANIMATION_DIRECTION}function s(e,t){var i;switch(l(e)){case"centerRight":KAMPYLE_UTILS.setElementStyle(t,{top:o(t.style.height),right:"-"+e.formWidth+"px",bottom:null,left:null,transition:"right 1s ease-in-out"});break;case"centerLeft":KAMPYLE_UTILS.setElementStyle(t,{top:o(t.style.height),right:null,bottom:null,left:"-"+e.formWidth+"px",transition:"left 1s ease-in-out"});break;case"bottomRight":i=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:null,right:i,bottom:"-"+e.formHeight+"px",left:null,transition:"bottom 1s ease-in-out"});break;case"bottomLeft":i=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:null,right:null,bottom:"-"+e.formHeight+"px",left:i,transition:"bottom 1s ease-in-out"});break;case"topLeft":i=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:"-"+e.formHeight+"px",right:null,bottom:null,left:i,transition:"top 1s ease-in-out"});break;case"topRight":i=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:"-"+e.formHeight+"px",right:i,bottom:null,left:null,transition:"top 1s ease-in-out"});break;default:return void KAMPYLE_UTILS.showWarning("Invalid animation type - "+e.formDisplayDirection)}}function u(e){return"animation"===KAMPYLE_DATA.getDisplayType(e)}function d(e,t){!u(KAMPYLE_DATA.getFormData(t.formId))||(t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId))&&KAMPYLE_UTILS.setElementStyle(t,{display:"none"})}function _(e,t){t=t||{};var i=KAMPYLE_DATA.getFormData(t.formId),r=KAMPYLE_ANIMATION.getOrCreateAnimationContainer();if(!r||!i||!KAMPYLE_ANIMATION.isAnimationForm(i))return!1;document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId)||(i={border:0,height:i.formHeight+"px",width:i.formWidth+"px",display:"none"},KAMPYLE_VIEW.createFormIframe(t.formId,KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID,r,i,!1))}function m(e,t){t=t||{};var i=KAMPYLE_DATA.getFormData(t.formId),r=KAMPYLE_DATA.isSkipInvitation(t.formId),n=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(!n||!i||!u(i)||r&&KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId))return!1;document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId)||_(0,t),KAMPYLE_UTILS.setElementStyle(n,{height:i.formHeight+"px",width:i.formWidth+"px"}),s(i,n)}return{initAnimationPosition:m,getDisplayDirection:l,getOrCreateAnimationContainer:function(){var e,t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);return t||(e=document.createElement("span"),t=document.createElement("div"),KAMPYLE_UTILS.addAttributesOnElement(t,{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID}),t.style.zIndex="2147483000",e.appendChild(t),document.body.appendChild(e),KAMPYLE_UTILS.setElementStyle(t,{border:0,position:"fixed",display:"block",zIndex:"2147483000"})),t},init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_buttonClicked:[e],neb_sdkShowForm:[e],neb_loadForm:[_,m],neb_inviteAccepted:[e],neb_skipInvitation:[e],neb_formClosed:[a,n],neb_popupBlocked:[a,n],neb_captureInit:[a],neb_captureImageClicked:[i],MDigital_Capture_Cancelled:[i],neb_formHide:[a],neb_formLoadingHasFailed:[r],neb_skipShowingForm:[d]}),KAMPYLE_ANIMATION.getOrCreateAnimationContainer(),r()},hideAnimationContainer:r,hideFormAnimationContainer:d,handleAnimationIframe:_,isAnimationForm:u}}(),window.KAMPYLE_VIEW=function(u,d){var r={CORNER_MARGIN:0,TRIANGULAR_MARGIN:0,VERTICAL_MARGIN:30};function t(e,t){t=t||{},KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!0)||(t=d.getElementById("kampyleInviteContainer"),J()?(Z(),t&&KAMPYLE_UTILS.setElementStyle(t,{top:"",bottom:"",left:"",right:"",background:"none",visibility:"",display:"none"},!0)):(KAMPYLE_UTILS.setElementStyle(t,{visibility:"visible"},!0),(t=d.getElementById("kampyleInvite"))&&KAMPYLE_UTILS.setElementStyle(t,{visibility:"visible"},!0)))}function i(e){KAMPYLE_UTILS.showInvite(),KAMPYLE_UTILS.removeEventHandler(e.srcElement,"blur",i)}function n(e){KAMPYLE_UTILS.hideInvite(),KAMPYLE_UTILS.setEventHandler(e.srcElement,"blur",i)}function a(){for(var e=d.querySelectorAll("input"),t=d.querySelectorAll("textarea"),i=[],r=0;r<e.length;r++)i.push(e[r]);for(r=0;r<t.length;r++)i.push(t[r]);return i}function o(e,t){(t=t||{}).formId=t.formId||KAMPYLE_DATA.getMemoryData("currentFormId");t=KAMPYLE_VIEW.getInvitePosition(t.formId);if(J()&&"bottom"===t)for(var i=a(),r=0;r<i.length;r++)KAMPYLE_UTILS.setEventHandler(i[r],"focus",n)}function s(e,t){(t=t||{}).formId=t.formId||KAMPYLE_DATA.getMemoryData("currentFormId");t=KAMPYLE_VIEW.getInvitePosition(t.formId);if(J()&&"bottom"===t)for(var i=a(),r=0;r<i.length;r++)KAMPYLE_UTILS.removeEventHandler(i[r],"focus",n)}function l(e,t){var i=KAMPYLE_TARGETING.generateShouldShowInviteParamName(t.formId);KAMPYLE_DATA.getMemoryData(i)&&(KAMPYLE_EVENT_DISPATCHER.trigger("neb_invitation_loaded",{formId:t.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_showInvitation",{formId:t.formId}),KAMPYLE_DATA.deleteMemoryData(i))}function _(e){d.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e).scrollIntoView()}function m(e){u.scrollTo(0,e)}function c(e,t){t=t||{},KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||m(0)}function A(e,t){var i=(t||{}).numberOfPixels||0;KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)?(_(t.formId),t=(KAMPYLE_UTILS.getScrollPosition()||{}).y||0,KAMPYLE_VIEW.doScrollY(i+t)):KAMPYLE_VIEW.doScrollY(i)}function E(e,t){var i;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||KAMPYLE_UTILS.getNestedPropertyValue(KAMPYLE_UTILS.getBrowser(),"name")===KAMPYLE_CONSTANT.BROWSERS.SAFARI&&(t=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)?(i=KAMPYLE_DATA.getMemoryJsonKey(t.formId,!0),KAMPYLE_DATA.getMemoryData(i).desktopDesign.invitationContentText):t.inviteContent,t=(t=KAMPYLE_UTILS.htmlDecode(t)||"").replace(/<[^>]+>/g,"").trim(),d.getElementById("kampyleInvite").title=t)}function T(e,t){"true"===KAMPYLE_DATA.getData("isSkipInvitationOptimized")&&(KAMPYLE_UTILS.setElementStyle(d.getElementById("kampyleFormContainer"),{visibility:"visible"},!0),KAMPYLE_VIEW.prepareHostingDOM(),KAMPYLE_DATA.setData("isSkipInvitationOptimized",!1))}function f(e){var t=e?"block":"none",i=d.getElementsByClassName("neb-loading-spinner");if(i&&i.length)for(var r=i.length-1;0<=r;r--)KAMPYLE_UTILS.setElementStyle(i[r],{display:t})}function p(e,t){f(!1)}function g(e,t){f(!0)}function I(e,t){d.getElementById("kampyleFormContainer").scrollIntoView()}function S(e){e=e||{};var t,i="invitation"===KAMPYLE_UTILS.getNestedPropertyValue(e,"formType");if(i)t=r.CORNER_MARGIN;else switch(KAMPYLE_UTILS.getNestedPropertyValue(e,"buttonData.type")){case"vertical":case"triangular":t=r.TRIANGULAR_MARGIN;break;case"custom":t=KAMPYLE_UTILS.getNestedPropertyValue(e,"buttonData.cornerMargin")||r.CORNER_MARGIN;break;default:t=r.CORNER_MARGIN}return parseInt(t,10)}function L(e,t){t=t||{};var t=KAMPYLE_DATA.getFormData(t.formId),i=d.getElementById("nebula_div_btn");if(!i||!t)return!1;var r=S(t)+"px";switch(t=(t=t)||{},KAMPYLE_UTILS.getNestedPropertyValue(t,"buttonData.position")||"right"){case"bottomRight":i.style.right=r;break;case"bottomLeft":i.style.left=r}}function P(e,t){var i=KAMPYLE_DATA.getFormData(t.formId),r=KAMPYLE_UTILS.getNestedPropertyValue(i,"buttonData"),t=KAMPYLE_UTILS.getNestedPropertyValue(r,"verticalOffset")||0;isNaN(t)||(i=d.getElementById("nebula_div_btn"))&&i.style&&(-1<r.position.indexOf("bottom")?i.style.marginBottom=t+"px":(t=-1*Number(t),i.style.marginTop=t+"px"))}function M(e,t){t=KAMPYLE_DATA.getFormData(t.formId),t=KAMPYLE_UTILS.getNestedPropertyValue(t,"buttonData.zIndex");KAMPYLE_UTILS.isValueNumericAndDefined(t)&&(d.getElementById("nebula_div_btn").style.zIndex=t)}function D(e,t){var i=KAMPYLE_DATA.getMemoryData("currentFormId"),r=KAMPYLE_DATA.getFormData(i);if("animation"===KAMPYLE_DATA.getDisplayType(r))return!1;r=d.getElementById("kampyleFormContainer"),i=d.getElementById("kampyleForm"+i);r&&i&&KAMPYLE_UTILS.setElementStyle(r,{display:"block",visibility:"visible"},!0)}function N(){return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?" wcagOutline ":" noOutline "}function y(){var e,t,i=KAMPYLE_DATA.getMemoryData("currentFormId");i&&(e=d.getElementById("kampyleFormContainer"),t=d.getElementById("kampyleForm"+i),i=d.getElementById("mdigital-no-json-modal_"+i),e&&(t||i)&&KAMPYLE_UTILS.setElementStyle(e,{display:"none",visibility:"hidden"},!0))}function O(e,t){t=t||{};var i,r,n=KAMPYLE_DATA.getMemoryData("currentFormId");j("remove"),null!==d.getElementById("kampyleFormContainer")&&((i=d.getElementById("kampyleForm"+n))&&(KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")?(KAMPYLE_DATA.initOnsiteDefaultState(),(r=d.getElementById("kampyleFormContainer"))&&r.remove()):(i.src=i.src,KAMPYLE_EVENT_DISPATCHER.trigger("neb_load_form_form_reload",{formId:t.formId})),KAMPYLE_UTILS.setElementStyle(i,{display:"none"},!0),i.removeAttribute&&i.removeAttribute("origin")),y(),Z()),KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")&&!KAMPYLE_DATA.isPopupDisplayType(n)||t.sourceWindow&&t.sourceWindow.close&&t.sourceWindow.close()}function C(e){e=e.buttonData||{};return["button#nebula_div_btn { height: auto !important }",".kampyle_feedback-button{",'background-color:transparent !important;font-family:"Open Sans",sans-serif;cursor:pointer;position:fixed;z-index:99999990',"}",".kampyle_feedback-button .kampyle_triangle{position:absolute;width:0;height:0;z-index:-1}",".kampyle_feedback-button .kampyle_button-text{","height:81px;width:81px;text-align:center;z-index:1000;color:"+e.textColor+";font-size:14px;font-weight:normal !important;","}",".kampyle_feedback-button .kampyle_bottom{","line-height:108px !important;","}",".kampyle_feedback-button .kampyle_top {","line-height:53px !important;","}",".kampyle_feedback-button.kampyle_top-right{","top:0;right:0;","}",".kampyle_feedback-button.kampyle_top-left .kampyle_triangle, .kampyle_feedback-button.kampyle_top-right .kampyle_triangle {","top:0;border-top:81px solid;","}",".kampyle_feedback-button.kampyle_bottom-left .kampyle_triangle, .kampyle_feedback-button.kampyle_bottom-right .kampyle_triangle {","bottom:0;border-bottom:81px solid;","}",".kampyle_feedback-button.kampyle_bottom-right .kampyle_triangle, .kampyle_feedback-button.kampyle_top-right .kampyle_triangle {","right:0;border-left:81px solid transparent;","}",".kampyle_feedback-button.kampyle_bottom-left .kampyle_triangle, .kampyle_feedback-button.kampyle_top-left .kampyle_triangle {","left:0;border-right:81px solid transparent;","}","#nebula_div_btn .kampyle_triangle {","border-bottom-color: "+e.backgroundColor+";","border-top-color: "+e.backgroundColor+";","}",".kampyle_feedback-button.kampyle_top-right .kampyle_button-text, .kampyle_feedback-button.kampyle_bottom-left .kampyle_button-text {","-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);","}",".kampyle_feedback-button.kampyle_top-left .kampyle_button-text, .kampyle_feedback-button.kampyle_bottom-right .kampyle_button-text {","-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg);","}",".kampyle_feedback-button.kampyle_top-left {","top:0;left:0;","}",".kampyle_feedback-button.kampyle_bottom-right {","bottom:0;right:0;","}",".kampyle_feedback-button.kampyle_bottom-left {","bottom:0;left:0;","}",".kampyle_feedback-button.kampyle_bottom-left, .kampyle_feedback-button.kampyle_bottom-right, .kampyle_feedback-button.kampyle_top-left, .kampyle_feedback-button.kampyle_top-right {","padding: 0 !important;","}"].join(" ")}function h(e){var t=e.buttonData||{},i="",i=["button#nebula_div_btn { height: auto !important }",".kampyle_vertical_button {",'background-color:transparent !important;font-family:"Open Sans",sans-serif;cursor:pointer;position:fixed;top:45%;z-index:99999990;height:35px !important;min-height: 35px !important;max-height: 35px !important;width:125px !important;max-width: 125px !important;min-width: 125px !important;-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)',"}",".kampyle_vertical_button .kampyle_button {","height:35px;min-height: 35px !important;max-height: 35px !important;width:125px !important;min-width: 125px !important;max-width: 125px !important; background:{{BUTTON_BACKGROUND_COLOR}};color:{{BUTTON_TEXT_COLOR}};position:absolute;top:0;left:0;z-index:-1;","}",".kampyle_vertical_button .kampyle_button-text {","color:{{BUTTON_TEXT_COLOR}};font-size:14px;line-height:35px;text-align:center;font-weight:normal !important;"+(i=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.RTL)&&MDIGITAL.LOCALIZATION.isFormLanguageRtl(e)?"transform: scale(-1);-ms-transform: scale(-1);-webkit-transform: scale(-1)":i),"}",".kampyle_vertical_button.kampyle_left .kampyle_button {","-webkit-border-radius:3px 3px 0 0;-moz-border-radius:3px 3px 0 0;-ms-border-radius:3px 3px 0 0;border-radius:3px 3px 0 0;","}",".kampyle_vertical_button.kampyle_right {","right:-45px;","}",".kampyle_vertical_button.kampyle_left {","left:-45px","}",".kampyle_vertical_button.kampyle_right .kampyle_button {","-webkit-border-radius:0 0 3px 3px;-moz-border-radius:0 0 3px 3px;-ms-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px","}",".kampyle_vertical_button.kampyle_right, .kampyle_vertical_button.kampyle_left  {","padding: 0 !important;","}"].join(" ");return i=(i=i.replace(/{{BUTTON_TEXT_COLOR}}/g,t.textColor)).replace(/{{BUTTON_BACKGROUND_COLOR}}/g,t.backgroundColor),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)&&(i+=[".kampyle_vertical_button:hover .kampyle_button-text {","color:"+t.textHoverColor+";","}",".kampyle_vertical_button:hover .kampyle_button {","background-color:"+t.backgroundHoverColor+";","}"].join(" ")),i}function b(e){var t=KAMPYLE_VIEW.getButtonText(e),e=U(e.buttonData.position);return'<button id="nebula_div_btn" style="border: none; background: none" alt="'+t+'" tabindex="0" class="kampyle_feedback-button '+e.leftright+" "+N()+'"><div class="kampyle_triangle"></div><div data-aut="feedback" class="kampyle_button-text '+e.topbottom+'">'+t+"</div></button>"}function v(e){var t="kampyle_left",i=KAMPYLE_VIEW.getButtonText(e);switch(e.buttonData.position){case"left":t="kampyle_left";break;case"right":t="kampyle_right"}return'<button id="nebula_div_btn" style="position: fixed !important; border: none" alt="'+i+'" tabindex="0" class="kampyle_vertical_button '+t+" "+N()+'"><div class="kampyle_button"></div><div data-aut="feedback" class="kampyle_button-text">'+i+"</div></button>"}function Y(e){j("add");var t=d.getElementById("kampyleFormContainer");t&&((e=d.getElementById("kampyleForm"+e))&&KAMPYLE_UTILS.setElementStyle(e,{display:"block"},!0),KAMPYLE_UTILS.setElementStyle(t,{display:"block",visibility:"visible"},!0))}function K(e){var t="mdigital-no-json-modal_"+e;O(),d.getElementById(t).style.display="none",KAMPYLE_DATA.setFormState(e,{shown:!1}),x("",{formId:KAMPYLE_DATA.getMemoryData("buttonFormId")}),KAMPYLE_UTILS.triggerCustomEvent(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_CLOSED,{formId:e}),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_CLOSED,{formId:e})}function R(e,t){var i=KAMPYLE_DATA.getFormData(t.formId);if("lightbox"===KAMPYLE_DATA.getDisplayType(i).toLowerCase()){i=d.getElementById("kampyleFormContainer");if(!i||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!1)||KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId,!0))return!1;KAMPYLE_UTILS.setElementStyle(i,{display:"block",visibility:"visible"},!0)}}function U(e){var t={topbottom:"kampyle_bottom",leftright:"kampyle_bottom-left"};switch(e){case"bottomLeft":t.leftright="kampyle_bottom-left",t.topbottom="kampyle_bottom";break;case"bottomRight":t.leftright="kampyle_bottom-right",t.topbottom="kampyle_bottom";break;case"topLeft":t.leftright="kampyle_top-left",t.topbottom="kampyle_top";break;case"topRight":t.leftright="kampyle_top-right",t.topbottom="kampyle_top"}return t}function k(e,t){e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.SPACE||e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.ENTER?KAMPYLE_VIEW.onErrModalClose(t):e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.TAB&&(e.preventDefault(),e.stopPropagation())}function F(e,t){var i;e.preventDefault(),e.keyCode!==KAMPYLE_CONSTANT.KEY_CODES.ESC?(i=d.querySelector("#mdigital-no-json-modal_"+t+" #close-no-json-modal"))&&(e.keyCode!==KAMPYLE_CONSTANT.KEY_CODES.TAB||e.shiftKey||(i.setAttribute("aria-hidden",!1),KAMPYLE_UTILS.isIE()&&HTMLElement?HTMLElement.prototype.focus.apply(i):i.focus())):KAMPYLE_VIEW.onErrModalClose(t)}function w(e,t){var i,r,n,a,o,s;!KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId)&&KAMPYLE_VIEW.shouldShowErrMsgOnForm(t.formId)&&(i="mdigital-no-json-modal_"+t.formId,r=d.getElementById("kampyleFormModal"),p(),Y(t.formId),d.getElementById(i)?d.getElementById(i).style.display="block":(n=t.formId,a=KAMPYLE_CONSTANT.TEXTS.DEFAULT_JSON_ERROR_MESSAGES.title,o=KAMPYLE_CONSTANT.TEXTS.DEFAULT_JSON_ERROR_MESSAGES.body,s=KAMPYLE_CONSTANT.TEXTS.DEFAULT_JSON_ERROR_MESSAGES.close,o=MDIGITAL_ELEMENT_BUILDER.getErrorModal("mdigital-no-json-modal_"+n,"en",a,o,s),r||(ee(),r=d.getElementById("kampyleFormModal"),Y(t.formId)),r.innerHTML="",r.appendChild(o),(s=d.querySelector("#"+i+" #close-no-json-modal")).onclick=K.bind(null,t.formId),(KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS))&&(o.addEventListener("keydown",function(e){F(e,t.formId)}),s.addEventListener("keydown",function(e){k(e,t.formId)}))),KAMPYLE_DATA.setFormState(t.formId,{shown:!0}),se("",{formId:KAMPYLE_DATA.getMemoryData("buttonFormId")}),KAMPYLE_UTILS.triggerCustomEvent(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_SHOWN,{formId:t.formId}),s={failureCause:o=KAMPYLE_COMMON.getFormFailureCause(t.formId)},o===KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.JSON_FAILED&&(s.jsonPath=KAMPYLE_DATA.getDataJsonUrl(t.formId,!1)),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_SHOWN,{additionalInfo:s,formId:t.formId}))}function x(e,t){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&null!=d.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_CONTAINER_ID)&&null!=d.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID)?(KAMPYLE_VIEW.showFeedbackButtonVisually(),function(e){e=e||{};var t=KAMPYLE_DATA.getFormData(e.formId)||{};KAMPYLE_EVENT_DISPATCHER.trigger("neb_button_displayed",{formId:e.formId,position:KAMPYLE_UTILS.getNestedPropertyValue(t,"buttonData.position")||"",formClosed:KAMPYLE_UTILS.getNestedPropertyValue(e,"formClosed")||!1})}(t)):KAMPYLE_VIEW.createButton(e,t)}function V(e,t){var r=e&&e.style;return null!=r&&null!=t&&t.length?t.reduce(function(e,t){var i=r[t];return null!=i&&(e[t]=i),e},{}):{}}function G(e,t){KAMPYLE_DATA.getFormState(e.formId).loaded||KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED)||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:e.formId}),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,!0)),KAMPYLE_UTILS.removeEventHandler(t,"mouseover",this.boundHandleLoadFormEvent)}function H(e,t){var i;null==t.origin||(i=d.getElementById("kampyleForm"+t.formId))&&i.setAttribute&&i.setAttribute("origin",t.origin)}function B(e){var t=KAMPYLE_DATA.getMemoryData("currentFormId")||KAMPYLE_DATA.getShownFormId();if(null!==d.getElementById("kampyleFormContainer")&&t){if(e=e||KAMPYLE_DATA.getFormData(t)||{},KAMPYLE_DATA.isMobileDynamicSizing(e.formId))return function(){var e=d.getElementById("formLightboxContainer");e&&e.setAttribute("aria-hidden",!1);e=d.getElementById("kampyleFormModal");e&&KAMPYLE_UTILS.setElementStyle(e,{top:0,margin:0,width:"100%"},!0)}();!function(e){var t,i=(e||{}).formId||KAMPYLE_DATA.getMemoryData("currentFormId")||KAMPYLE_DATA.getShownFormId();e&&(t=parseInt(e.formWidth,10)||450,a=parseInt(e.formHeight,10)||450);var r=d.documentElement.clientHeight;KAMPYLE_UTILS.setElementStyle(d.getElementById("innerContainer"),{overflowY:"auto",height:"100%"});var n={border:0,position:"relative",margin:"50px auto 50px",height:a+"px",width:t+"px"},e=KAMPYLE_DATA.getMemoryData("kampyleDevice");e===KAMPYLE_CONSTANT.DEVICES.MOBILE||e===KAMPYLE_CONSTANT.DEVICES.TABLET?n={position:"relative",margin:"0",height:a="100%",width:t="100%"}:KAMPYLE_DATA.isCustomHtmlAndFixedSizeForm(i)?(n={position:"absolute",top:"50%","margin-top":-a/2+"px",left:"50%","margin-left":-t/2+"px",height:a+"px",width:t+"px"},r<a&&(n.position="relative",n.top="0",n["margin-top"]="50px",n["margin-bottom"]="50px")):n={position:"fixed",height:"100%",width:"100%"};var a=d.getElementById("kampyleFormModal");a&&a.style&&a.removeAttribute&&(a.removeAttribute("style"),KAMPYLE_UTILS.setElementStyle(a,n,!0))}(e)}}function q(e,t,i,r,n){KAMPYLE_FUNC.shouldRenderForm({formId:t})&&function(e,t,i,r,n){e=KAMPYLE_COMMON.createFormUrl(e,t);var a=!(r=u.open(e,"NebulaCX"+t,"width="+i+", height="+r+",scrollbars=yes"))||r.closed||void 0===r.closed;KAMPYLE_DATA.setMemoryData("popupHandler",r),setTimeout(function(){a&&("neb_skipInvitation"!==n&&alert("The survey was blocked, please disable popup blocker and refresh the page."),KAMPYLE_EVENT_DISPATCHER.trigger("neb_popupBlocked",{formId:t}))},25)}(e,t,i,r,n)}function W(e,t){var i="neb_skipInvitation"===e;t=t||{};var r=KAMPYLE_DATA.getFormData(t.formId);if(KAMPYLE_VIEW.ignoreShowForm(r)||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!1)||KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId,!0))return!1;var n=r.formHtmlUrl,a=r.formWidth,o=r.formHeight,s=(s=KAMPYLE_DATA.getDisplayType(r)).toLowerCase();j("add"),KAMPYLE_DATA.setMemoryData("currentFormId",t.formId),KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||(KAMPYLE_DATA.setMemoryData("formIsShown",!0),KAMPYLE_DATA.setMemoryData("isInvitationShouldBeIgnored",!0));KAMPYLE_DATA.getMemoryData("kampyleDevice");var l=i&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SKIP_INVITATION_OPTIMIZATION);return"lightbox"===s?(l?KAMPYLE_DATA.setData("isSkipInvitationOptimized",!0):KAMPYLE_VIEW.prepareHostingDOM(),(i=d.getElementById("kampyleFormContainer"))?(B(r),(r=d.getElementById("kampyleForm"+t.formId))&&KAMPYLE_UTILS.setElementStyle(r,{display:"block"},!0),KAMPYLE_UTILS.setElementStyle(i,{display:"block",visibility:l?"hidden":"visible"},!0)):KAMPYLE_UTILS.showWarning("formContainer wasn't loaded properly")):"popup"===s&&q(n,t.formId,a,o,e),!0}function z(){KAMPYLE_DATA.setMemoryData("inviteLoadedAndShown",!1),j("remove");var e=d.getElementById("kampyleInviteContainer"),t=d.getElementById("kampyleInvite");e&&t&&(KAMPYLE_UTILS.setElementStyle(e,{display:"none"},!0),Z())}function X(e,t){t=t||{};var i=["top","bottom"],r=(KAMPYLE_DATA.getFormState(t.formId)||{}).inviteShown;if(!J()||!r)return!1;var n,a=KAMPYLE_VIEW.getInvitePosition(t.formId),r=d.getElementById("kampyleInviteContainer");d.getElementById("kampyleInvite");"INPUT"===d.activeElement.tagName||"TEXTAREA"===d.activeElement.tagName?(KAMPYLE_UTILS.hideInvite(),KAMPYLE_UTILS.setEventHandler(d.activeElement,"blur",(n=d.activeElement,function e(){KAMPYLE_UTILS.removeEventHandler(n,"blur",e),KAMPYLE_UTILS.showInvite()}))):KAMPYLE_UTILS.showInvite();t={display:"block",height:t.newHeight+"px",left:"0",right:"0"};t[a]=0,t[i[(i.indexOf(a)+1)%2]]="",KAMPYLE_UTILS.setElementStyle(r,t,!0)}function j(e){if(e=e||"","desktop"!==KAMPYLE_DATA.getMemoryData("kampyleDevice")){var t,i=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATES_WCAG)?"width=device-width, initial-scale=1.0":"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",r=d.getElementById("kampyleMetaViewport"),n=d.getElementsByName("viewport"),a=KAMPYLE_DATA.getMemoryData("hostedViewportContent")||[];if(n&&n.length&&!a.length)for(var o=n.length-1;0<=o;o--)n[o].hasAttribute("content")&&a.push(n[o]);switch(e.toLowerCase()){case"add":if(a&&a.length)for(o=a.length-1;0<=o;o--)a[o].hasAttribute("id")&&"kampyleMetaViewport"===a[o].id||a[o].remove&&a[o].remove();r?(r.content=i,r.name="viewport"):((t=d.createElement("meta")).content=i,t.name="viewport",t.id="kampyleMetaViewport",d.getElementsByTagName("head")[0].appendChild(t));break;case"remove":if(r&&(r.content="",r.name="",r.remove&&r.remove()),a&&a.length)for(o=a.length-1;0<=o;o--)a[o].hasAttribute("id")&&"kampyleMetaViewport"===a[o].id||d.getElementsByTagName("head")[0].appendChild(a[o])}KAMPYLE_DATA.setMemoryData("hostedViewportContent",a)}}function J(){return 0<Number(KAMPYLE_DATA.getMemoryData("inviteVersion"))&&KAMPYLE_DATA.isNewMobileInvitation()}function Q(){if(KAMPYLE_DATA.isMobileDynamicSizing())KAMPYLE_VIEW.manipulateAriaHiddens(),KAMPYLE_DATA.setMemoryData("hostedBodyOverflowXAttr",d.body.style.overflowX),d.body.style.overflowX="hidden";else{if(KAMPYLE_DATA.setMemoryData("hostedBodyPositionAttr",d.body.style.position),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ENABLE_OVERFLOW))return!1;KAMPYLE_DATA.setMemoryData("hostedBodyOverflowAttr",d.body.style.overflow),d.body.style.overflow="hidden";var e=KAMPYLE_DATA.getMemoryData("kampyleDevice");e!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&e!==KAMPYLE_CONSTANT.DEVICES.TABLET||(d.body.style.position="fixed")}}function Z(){var e;KAMPYLE_DATA.isMobileDynamicSizing()?(e=d.getElementById("kampyleFormModal"),KAMPYLE_UTILS.setElementStyle(e,{height:"100%"},!0),KAMPYLE_VIEW.restoreAriaHidden(),d.body.style.overflowX=KAMPYLE_DATA.getMemoryData("hostedBodyOverflowXAttr")||""):(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ENABLE_OVERFLOW)||(d.body.style.overflow=KAMPYLE_DATA.getMemoryData("hostedBodyOverflowAttr")||""),d.body.style.position=KAMPYLE_DATA.getMemoryData("hostedBodyPositionAttr")||"")}function $(){return KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+"resources/onsite/images/kloader.gif"}function ee(){var e,t,i=$();KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)||((e=d.createElement("span")).id="formLightboxContainer",t="",t+='<div id="kampyleFormContainer" style="top:0 !important;left:0 !important;width: 100% !important;height: 100% !important;position: fixed !important;visibility:hidden !important;display:table !important;background-color: rgba(102,102,102,0.4) !important;z-index:99999999 !important;-webkit-overflow-scrolling: touch !important; ">',t+=' <div id="innerContainer">',t+='   <img class="neb-loading-spinner" alt="Loading" style="position:absolute !important;top:50% !important;left:50% !important; margin-top: -30px !important;margin-left: -30px !important; max-width:60px !important;" src="'+i+'"/>',t+='   <div id="kampyleFormModal" style="z-index:99999999 !important; -webkit-overflow-scrolling: touch !important;"></div>',t+=" </div>",e.innerHTML=t+="</div>",d.body.appendChild(e))}function te(e,t){t=t||{};var i,r,n=KAMPYLE_DATA.getFormState(t.formId);n&&n.loaded||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!1)||(r=KAMPYLE_DATA.getFormData(t.formId),n=KAMPYLE_DATA.getDisplayType(r),r&&t.formId&&"lightbox"===n&&(n=KAMPYLE_CONSTANT.TIMEOUT_HANDLERS.FORM_APP_STATUS+"_"+t.formId,KAMPYLE_DATA.getTimeoutHandler(n)||(i=u.setTimeout(function(){KAMPYLE_FUNC.isFormLoaded(t.formId)||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:t.formId,failureCause:KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.APPLICATION_FAILED,formState:KAMPYLE_DATA.getFormState(t.formId)})},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS),KAMPYLE_DATA.setTimeoutHandler(n,i)),d.getElementById("kampyleFormContainer")||ee(),d.getElementById("kampyleForm"+t.formId)||(i={border:0,height:"100%","max-height":"100%","min-height":"100%",width:"100%","max-width":"100%","min-width":"100%",display:"none"},KAMPYLE_DATA.isCustomHtmlForm(t.formId)||KAMPYLE_DATA.isMobileDynamicSizing(r.formId)||(i.position="fixed"),r=d.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.CONTAINER_ID_PREFIX),KAMPYLE_VIEW.createFormIframe(t.formId,KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.IFRAME_ID_PREFIX,r,i,!0))))}function ie(e,t){var i=t.formId,t=d.getElementById("kampyleFormContainer");if(!(i&&t&&KAMPYLE_DATA.isMobileDynamicSizing(i)))return!1;KAMPYLE_UTILS.setElementStyle(t,{height:KAMPYLE_UTILS.getDocumentSize().height+"px",position:"absolute"},!0)}function re(){return KAMPYLE_UTILS.isIos()?"30px":"100%"}function ne(e){var t;KAMPYLE_DATA.isLightBoxDisplayType(e.formId)&&(t=d.getElementById("kampyleFormModal"),e=Number((e||{}).newHeight),e=isNaN(e)?re():e+"px",KAMPYLE_UTILS.setElementStyle(t,{height:e},!0))}function ae(e,t){KAMPYLE_DATA.isMobileDynamicSizing((t||{}).formId)&&(ne(t),t=KAMPYLE_UTILS.getNestedPropertyValue(t,"newHeight"),KAMPYLE_VIEW.shouldAddScroll(t)&&(t=d.getElementById("kampyleFormContainer"),KAMPYLE_UTILS.setElementStyle(t,{overflowY:"auto"},!0)))}function oe(e,t){var i=KAMPYLE_DATA.getFormData(t.formId),r=d.createElement("span"),n=$();KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)||(o="top:0 !important;left:0 !important;width: 100% !important;",o+="height: 100% !important;position: fixed !important;visibility:hidden !important;",o+="display:none !important;background-color: rgba(22,22,22,0.5) !important;",o+="z-index:99999999 !important;overflow:auto !important",s="position:absolute !important;top:50% !important;left:50% !important;",s+="margin-top: -30px !important;margin-left: -30px !important; max-width:60px !important;",r.innerHTML='<div id="kampyleInviteContainer" style="top:0 !important;left:0 !important;width: 100% !important;height: 100% !important;position: fixed !important;visibility:hidden !important;display:none !important;background-color: rgba(22,22,22,0.5) !important;z-index:99999999 !important;overflow:auto !important"><img class="neb-loading-spinner" alt="Loading" style="position:absolute !important;top:50% !important;left:50% !important;margin-top: -30px !important;margin-left: -30px !important; max-width:60px !important;" src="'+n+'"/><div id="kampyleInviteModal" style="overflow: hidden;margin: 0 auto;height:'+i.inviteData.inviteHeight+";width:"+i.inviteData.inviteWidth+';position:relative;z-index:99999999;top: 25%;-webkit-box-shadow:0 0 10px rgba(0,0,0,0.4);-moz-box-shadow:0 0 10px rgba(0,0,0,0.4); box-shadow:0 0 10px rgba(0,0,0,0.4);"></div></div>',d.body.appendChild(r));var a=d.createElement("iframe");a.id=KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.IFRAME_ID,a.title=KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.IFRAME_TITLE,a.tabIndex=-1;var o=i.inviteData.inviteHeight,s=i.inviteData.inviteWidth,n=KAMPYLE_DATA.getMemoryData("kampyleDevice");n!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&n!==KAMPYLE_CONSTANT.DEVICES.TABLET||(s=o="100%",(n=d.getElementById("kampyleInviteModal"))&&KAMPYLE_UTILS.setElementStyle(n,{height:"100%",width:"100%"},!0)),KAMPYLE_UTILS.setElementStyle(a,{height:o,width:s,display:"none",border:"0"},!0);t=i.inviteData.inviteUrl+"?formId="+t.formId;KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)&&(t+="&isWCAG=true"),a.src=t,d.getElementById("kampyleInviteModal").appendChild(a),KAMPYLE_DATA.isNewMobileInvitation()&&(a=d.getElementsByClassName("neb-loading-spinner")[0],KAMPYLE_UTILS.setElementStyle(a,{display:"none"},!0),KAMPYLE_UTILS.setElementStyle(r,{"z-index":99999998},!0),(r=d.getElementById("kampyleInviteContainer"))&&KAMPYLE_UTILS.setElementStyle(r,{"z-index":99999998},!0)),setTimeout(function(){!0!==KAMPYLE_DATA.getFormState(i.formId).inviteLoaded&&KAMPYLE_DATA.setFormState(i.formId,{inviteLoaded:!1,inviteShown:!1})},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS)}function se(e,t){t&&!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)&&(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?KAMPYLE_VIEW.hideFeedbackButtonVisually():KAMPYLE_VIEW.removeButton(e,t))}function le(e,t){var i=d.getElementById("kampyleFormContainer"),r=d.getElementById("kampyleInviteContainer"),n=d.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);KAMPYLE_VIEW.removeButton(e,t),i&&KAMPYLE_UTILS.removeAllContent(i),r&&KAMPYLE_UTILS.removeAllContent(r),n&&KAMPYLE_UTILS.removeAllContent(n)}return{setIframeOrigin:H,ignoreShowForm:function(e){return!e||"animation"===KAMPYLE_DATA.getDisplayType(e)},scrollToEmbeddedForm:_,scrollFromTop:A,doScrollY:m,removeAllShownElements:le,handleLightBoxIframe:te,createFormIframe:function(e,t,i,r,n){var a=KAMPYLE_DATA.getFormData(e),o=d.createElement("iframe");return KAMPYLE_UTILS.setElementStyle(o,r,n),o.id=t+e,a=a.formHtmlUrl,a=KAMPYLE_COMMON.createFormUrl(a,e),o.src=a,o.tabIndex=-1,o.setAttribute("title",KAMPYLE_CONSTANT.IFRAME_SETTINGS.IFRAME_TITLE),i.appendChild(o),o},createFormContainer:ee,showForm:W,hideForm:O,showButton:x,createButton:function(e,i){var t="";i=i||{};var r,n,a,o=KAMPYLE_DATA.getFormData(i.formId)||{},s=KAMPYLE_UTILS.getNestedPropertyValue(o,"buttonData.type")||"";if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){switch(s.toLowerCase()){case"vertical":case"triangular":t=(n={vertical:{html:v,style:h},triangular:{html:b,style:C}}[(r=o).buttonData.type])?(KAMPYLE_UTILS.addStyle(n.style(r)),n.html(r)):(KAMPYLE_UTILS.showWarning("Invalid button type "+r.buttonData.type),"");break;case"custom":t=function(e){var t="z-index: 99999990 !important;position: fixed !important;cursor: pointer !important;line-height:1px !important; padding:0;",i=KAMPYLE_VIEW.getButtonText(e),r=[".nebula_image_button {","width: auto !important;","background: transparent !important;","}"].join(" ");switch(KAMPYLE_UTILS.addStyle(r),e.buttonData.position){case"bottomLeft":t+="bottom:0;left:0;";break;case"bottomRight":t+="bottom:0;right:0;";break;case"topLeft":t+="top:0;left:0;";break;case"topRight":t+="top:0;right:0;";break;case"left":t+="left:0;top:50%;";break;case"right":t+="right:0;top:50%;"}return'<button id="nebula_div_btn" class="nebula_image_button '+N()+'" style="'+t+';border: none" tabindex="0"><img alt="'+i+'" src="'+e.buttonData.buttonUrl+'" /></button>'}(o);break;default:return KAMPYLE_UTILS.showWarning("Invalid button type - "+s),!1}var l=d.getElementById("kampyleButtonContainer");null===l?((l=d.createElement("span")).innerHTML=t,l.id="kampyleButtonContainer",d.body.appendChild(l)):l.innerHTML=t}KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&(a=d.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE,V(a,["position","top","right"]))),KAMPYLE_EVENT_DISPATCHER.trigger("neb_button_displayed",{formId:i.formId,position:KAMPYLE_UTILS.getNestedPropertyValue(o,"buttonData.position")||"",formClosed:KAMPYLE_UTILS.getNestedPropertyValue(i,"formClosed")||!1}),l.onclick=function(e){KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(i.formId,!0)||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:i.formId}),e.preventDefault(),e.stopPropagation())},KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.DESKTOP?(this.boundHandleLoadFormEvent=G.bind(this,i,l),KAMPYLE_UTILS.setEventHandler(l,"mouseover",this.boundHandleLoadFormEvent),KAMPYLE_UTILS.setEventHandler(u,"mousemove",function(e){var t=KAMPYLE_DATA.getFormState(i.formId);if(!t||t.loading||t.loaded||KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED))return!1;KAMPYLE_UTILS.isNear("nebula_div_btn",100,e)&&(KAMPYLE_EVENT_DISPATCHER.trigger("neb_load_form_preload_proximity",{formId:i.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:i.formId}),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,!0))})):KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:i.formId}),l.onkeyup=function(e){e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.TAB&&KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:i.formId})},l.onkeypress=function(e){e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.ENTER&&(KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(i.formId,!0)||KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:i.formId}))}},hideInvite:z,hideButton:se,hideFeedbackButtonVisually:function(){var e=d.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID);null!=e&&(KAMPYLE_UTILS.setElementStyle(e,{position:"absolute",top:"-9999px",right:"-9999px"},!0),KAMPYLE_UTILS.addAttributesOnElement(e,{tabindex:-1,"aria-hidden":!0}))},showFeedbackButtonVisually:function(){var e,t=d.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID);null!=t&&(e=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE)||{},KAMPYLE_UTILS.setElementStyle(t,e,!0),KAMPYLE_UTILS.removeAttribute(t,"tabindex"),KAMPYLE_UTILS.removeAttribute(t,"aria-hidden"))},removeButton:function(e,t){var i=d.getElementById("kampyleButtonContainer");i&&(i.innerHTML="",KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE,{}))},handleInvitationSkippedForms:T,updateIframeStyle:B,formatTriangularStyle:C,formatVerticalStyle:h,prepareHostingDOM:Q,restoreHostingDOM:Z,getInvitePosition:function(e){return((KAMPYLE_DATA.getFormData(e)||{}).inviteData||{}).invitationPosition||"top"},newMobileInvite:J,changeInviteHeight:X,iFrameHeightChangedHandler:ne,manipulateAriaHiddens:function(){for(var e=d.body.children,t=[],i=0;i<e.length;i++)t.push({element:e[i],prevAriaHiddenValue:e[i].getAttribute("aria-hidden")}),e[i].setAttribute("aria-hidden",!0);KAMPYLE_DATA.setMemoryData("initialAriaHiddenValues",t)},restoreAriaHidden:function(){for(var e=KAMPYLE_DATA.getMemoryData("initialAriaHiddenValues")||[],t=0;t<e.length;t++)e[t].element&&e[t].element instanceof Element&&(null===e[t].prevAriaHiddenValue?e[t].element.removeAttribute("aria-hidden"):e[t].element.setAttribute("aria-hidden",e[t].prevAriaHiddenValue));KAMPYLE_DATA.deleteMemoryData("initialAriaHiddenValues")},getDefaultIframeHeight:re,shouldAddScroll:function(e){var t=KAMPYLE_UTILS.getElementStyle(d.body,"position");return("fixed"===t||"absolute"===t)&&KAMPYLE_UTILS.getDocumentSize().height<=e},shouldShowErrMsgOnForm:function(e){var t=KAMPYLE_DATA.getFormTriggerType(e);return MDIGITAL.FORM_STATE.shouldFormBeShown(e)&&(t===KAMPYLE_CONSTANT.FORM_TYPES.BUTTON||t===KAMPYLE_CONSTANT.FORM_TYPES.CODE)},onErrModalClose:K,handleLoadFormEvent:G,handleCloseButtonInErroModalKeydown:k,onErrorModalKeyPressed:F,pickElementStyleProperties:V,init:function(){var e={neb_targetingInit:[le],neb_loadInvitation:[oe],neb_loadForm:[te,g,ie],neb_formReady:[se],neb_formLoaded:[H,p,l],neb_formShown:[T],neb_inviteHeightChanged:[X],neb_iFrameHeightChanged:[ae],neb_scrollToTop:[c],neb_scrollFromTop:[A],neb_inviteReady:[t,o],neb_scrollToForm:[I],neb_showButton:[x,L,P],neb_buttonClicked:[R],neb_sdkShowForm:[se],neb_captureInit:[y,se],neb_inviteAccepted:[z,se,s],neb_showForm:[W],neb_sdkPageView:[z,s],neb_inviteDeclined:[z,s],neb_formClosed:[O],neb_popupBlocked:[O],neb_formHide:[y],neb_captureImageClicked:[D],MDigital_Capture_Cancelled:[D],neb_formLoadingHasFailed:[w],neb_inviteLoaded:[E]};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)&&e.neb_showButton.push(M),KAMPYLE_EVENT_DISPATCHER.subscribeMany(e),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)||(KAMPYLE_UTILS.addStyle(".noOutline{outline: none !important;}"),KAMPYLE_UTILS.addStyle(".wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}")),KAMPYLE_UTILS.setEventHandler(u,"resize",function(e){B()})},setMetaViewport:j,setZIndex:M,showVisibility:D,getCornerMargin:S,showFormCouldNotFechtedErrorMsg:w,handleInviteReady:t,getButtonText:function(e){return void 0!==MDIGITAL.LOCALIZATION&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)?MDIGITAL.LOCALIZATION.getLocalizedButtonText(e):e.buttonData.text},showInvite:function(e,t){j("add");var i="25%",r=KAMPYLE_DATA.getInviteData(t.formId);if(!r||!MDIGITAL.FORM_STATE.isInviteLoaded(t.formId)||!KAMPYLE_FUNC.isJsonDataLoaded(t.formId,!0))return!1;var n=KAMPYLE_DATA.getMemoryData("kampyleDevice");return n!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&n!==KAMPYLE_CONSTANT.DEVICES.TABLET||(r.inviteHeight="100%",r.inviteWidth="100%",i=0),n=KAMPYLE_UTILS.getCurrentTimestamp(),KAMPYLE_DATA.setMemoryData("invitationTimeStamp",n),KAMPYLE_DATA.setData("LAST_INVITATION_VIEW",n),(n=d.getElementById("kampyleInviteContainer"))&&!1===KAMPYLE_DATA.getMemoryData("formIsShown")&&(KAMPYLE_UTILS.setElementStyle(n,{display:"block",visibility:KAMPYLE_DATA.isNewMobileInvitation()?"hidden":"visible"},!0),Q(),KAMPYLE_EVENT_DISPATCHER.trigger("neb_invitation_ready",{formId:t.formId}),(t=d.getElementById("kampyleInviteModal"))&&KAMPYLE_UTILS.setElementStyle(t,{top:i,width:r.inviteWidth+"px","max-width":r.inviteWidth+"px",height:r.inviteHeight+"px","max-height":r.inviteHeight+"px",display:"block"},!0),(i=d.getElementById("kampyleInvite"))&&KAMPYLE_UTILS.setElementStyle(i,{width:r.inviteWidth+"px","max-width":r.inviteWidth+"px",height:r.inviteHeight+"px","max-height":r.inviteHeight+"px",display:"block",visibility:KAMPYLE_DATA.isNewMobileInvitation()?"hidden":"visible"},!0)),!0},getWCAGClass:N,getClassDirectonByPosition:U,getLoaderGifUrl:$,updateInviteIframeTitle:E}}(window,document),window.KAMPYLE_MESSAGE=function(){function r(e){if(KAMPYLE_UTILS.isDebugMode())return!0;if(!e||!e.origin||!e.data)return!1;var t,i=KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX;return-1<i.indexOf("://")?i=(t=i.split("/"))[0]+"//"+t[2]:-1<(t=i.indexOf("/"))&&(i=i.slice(0,t)),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ON_PREM_HYBRID)||e.origin===i}function e(e){if(!r(e))return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}switch(t.action){case"inviteAccepted":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteAccepted",{formId:t.formId});break;case"inviteDeclined":case"inviteDefered":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteDeclined",{formId:t.formId});break;case"inviteHeightChanged":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteHeightChanged",{formId:t.formId,newHeight:t.newHeight});break;case"formLoaded":KAMPYLE_EVENT_DISPATCHER.trigger("neb_formLoaded",{formId:t.formId,origin:e.origin,isScreenCaptureEnabled:t.isScreenCaptureEnabled});break;case"formSubmitPending":case"formHide":KAMPYLE_EVENT_DISPATCHER.trigger("neb_formHide",{formId:t.formId});break;case"formSubmitted":var i={formId:t.formId,feedbackUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackUUID:t.uuid,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EVENT_INCLUDE_FEEDBACK_CONTENT)&&t.content&&(i.content=t.content),KAMPYLE_EVENT_DISPATCHER.trigger("neb_feedbackSubmitted",i);break;case"formClose":i={formId:t.formId,feedbackUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackUUID:t.uuid,sourceWindow:e.source,isFormSubmitted:t.isFormSubmitted,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid};KAMPYLE_EVENT_DISPATCHER.trigger("neb_formClosed",i);break;case"formPageShown":i={formId:t.formId,pageNumber:t.pageNumber,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid};KAMPYLE_EVENT_DISPATCHER.trigger("neb_formPageShown",i);break;case"triggerScreenCapture":i={formId:t.formId,screenCaptureSettings:t.screenCaptureSettings,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid,screenCaptureUuid:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_AS_COMPONENT)?t.screenCaptureUuid:null};KAMPYLE_EVENT_DISPATCHER.trigger("neb_captureInit",i);break;case"screenCaptureDelete":KAMPYLE_EVENT_DISPATCHER.trigger("screenCaptureDelete",t);break;case"screenCaptureRetake":KAMPYLE_EVENT_DISPATCHER.trigger("screenCaptureRetake",t);break;case"scrollToForm":KAMPYLE_EVENT_DISPATCHER.trigger("neb_scrollToForm",{formId:t.formId});break;case"iFrameHeightChanged":KAMPYLE_EVENT_DISPATCHER.trigger("neb_iFrameHeightChanged",{formId:t.formId,newHeight:t.newHeight});break;case"scrollToTop":KAMPYLE_EVENT_DISPATCHER.trigger("neb_scrollToTop",{formId:t.formId});break;case"scrollFromTop":KAMPYLE_EVENT_DISPATCHER.trigger("neb_scrollFromTop",{formId:t.formId,numberOfPixels:t.numberOfPixels});break;case"inviteLoaded":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteLoaded",{formId:t.formId,inviteVersion:t.inviteVersion,inviteContent:t.inviteContent});break;case"loadMultipleForms":KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadMultipileForms",{formId:t.formId,formIds:t.formIds});break;case"routeToForm":KAMPYLE_EVENT_DISPATCHER.trigger("neb_routeToForm",{formId:t.destinationForm,sourceFormId:t.formId},null,{isStrictMode:!0});break;case"submitFeedbackFailed":KAMPYLE_EVENT_DISPATCHER.trigger("neb_submitFeedbackFailed",t);break;case"feedbackUUIDisNull":KAMPYLE_EVENT_DISPATCHER.trigger("neb_feedbackUUIDisNull",t);break;case"MDigital_Form_Next_Page":case"MDigital_Form_Back_Page":case"MDigital_ThankYou_Displayed":case"MDigital_ThankYou_Close":case"MDigital_Form_Close_No_Submit":case"MDigital_Form_Close_Submitted":case"MDigital_CHTML_Logs":KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)||(t.feedbackCorrelationUUID=t.uuid),KAMPYLE_EVENT_DISPATCHER.trigger(t.action,t);break;default:return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ON_PREM_HYBRID)||KAMPYLE_UTILS.showWarning("invalid action - "+t.action),!1}}return{init:function(){KAMPYLE_UTILS.setEventHandler(window,"message",e)},handleMessage:e,validateMessageEvent:r}}(),window.KAMPYLE_UTILS={TOP_LEVEL_DOMAIN_COOKIE_PREFIX:"Tld-",startsWith:function(e,t,i){return e.substr(i||0,t.length)===t},isIos:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isSafari:function(){return-1<navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome")<0},isiPhone:function(){return/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isiPadOS13:function(){return KAMPYLE_UTILS.isSafari()&&!KAMPYLE_UTILS.isiPhone()&&void 0!==window.DeviceOrientationEvent},isIE:function(){return/rv:11.0/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)},isDesktop:function(){return KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.DESKTOP},createIEEvent:function(e,t){var i=document.createEvent("HTMLEvents");return i.initEvent(e,!0,!0),i.detail=t||{},i},triggerCustomEvent:function(e,t){var i=KAMPYLE_UTILS.isIE()?KAMPYLE_UTILS.createIEEvent(e,t):(t=t?{detail:t}:{},new CustomEvent(e,t));try{window.dispatchEvent(i)}catch(i){KAMPYLE_UTILS.showWarning("Could not trigger custom event "+e)}},isDebugMode:function(){var e=KAMPYLE_DATA.getMemoryData("region");return e===KAMPYLE_CONSTANT.REGIONS.DEV||e===KAMPYLE_CONSTANT.REGIONS.QA},showErrorStack:function(e){KAMPYLE_UTILS.isDebugMode()&&console.warn(e.stack)},showWarning:function(e){KAMPYLE_UTILS.isDebugMode()&&console.warn(e)},addStyle:function(e,t){var i;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)?console.error("Should not use this method if the provision csp rules is on"):(null===(i=(t=t||window.document).getElementById("kampyleStyle"))&&((i=t.createElement("style")).type="text/css",i.id="kampyleStyle",(t.head||t.getElementsByTagName("head")[0]).appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(document.createTextNode(e)))},addAttributesOnElement:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])},removeAttribute:function(e,t){e&&e.hasAttribute(t)&&e.removeAttribute(t)},getViewportSize:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},getDocumentSize:function(){var e=document.body,t=document.documentElement,i=Math.max(e.scrollHeight||0,e.offsetHeight||0,t.clientHeight||0,t.scrollHeight||0,t.offsetHeight||0);return{width:Math.max(e.scrollWidth||0,t.scrollWidth||0,e.offsetWidth||0,t.offsetWidth||0,t.clientWidth||0)+(e.getBoundingClientRect&&e.getBoundingClientRect().left||0),height:i+(e.getBoundingClientRect&&e.getBoundingClientRect().top||0)}},getElementSize:function(e){var t=Math.max(e.scrollHeight||0,e.offsetHeight||0,e.clientHeight||0);return{width:Math.max(e.scrollWidth||0,e.offsetWidth||0,e.clientWidth||0),height:t}},getCurrentTimestamp:function(){return(new Date).getTime()},getTimeDiff:function(e,t){var i=void 0!==e?e:"2014-01-01 01:02:03.123456",i=new Date(i).getTime(),e=KAMPYLE_UTILS.getCurrentTimestamp();if(isNaN(i))return"";var r=0,r=i<e?e-i:i-e;switch(t){case KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS:return r.toFixed(1)/1e3;case KAMPYLE_CONSTANT.TIME_FORMATS.DAYS:return Math.floor(r/1e3/60/60/24);default:return r}},setEventHandler:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},subscribeToCustomEvent:function(t,i){window&&window.addEventListener&&"function"==typeof i&&window.addEventListener(t,function(e){e=e&&e.detail;i.apply(null,[t,e])},!1)},removeEventHandler:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent&&e.detachEvent("on"+t,i)},setElementStyle:function(t,i,r){var n,a;if(r=r?"important":"",t)for(n in i)if(i.hasOwnProperty(n))if(r&&t&&t.style.setProperty){a=KAMPYLE_UTILS.camelToDash(n);try{t.style.setProperty(a,""+i[n],r)}catch(e){t.style.setProperty(a,""+i[n],"!"+r)}}else t.style[n]=i[n]},isNear:function(e,t,i){var r=document.getElementById(e);if(!r)return!1;var n=KAMPYLE_UTILS.offset(r).left-t,a=KAMPYLE_UTILS.offset(r).top-t,e=n+r.clientWidth+2*t,r=a+r.clientHeight+2*t,t=i.pageX,i=i.pageY;return n<t&&t<e&&a<i&&i<r},offset:function(e){if(!e)return!1;var t=e.getBoundingClientRect(),e=document.body;return{top:+t.top+e.scrollTop,left:t.left+e.scrollLeft}},createIframe:function(e,t,i,r){var n=document.createElement("iframe");return n.width=t,n.height=i,n.src=e,n.id=r,n.style.border=0,n.frameBorder=0,n.style.display="inline-block",n},getUrlParam:function(e){for(var t=location.search.substr(location.search.indexOf("?")+1),i=null,r=(t=(t=""===t?location.hash.substr(location.hash.indexOf("?")+1):t).split("&")).length,n=0;n<r;n++){var a=t[n].split("=");a&&[a[0]]==e&&(i=decodeURIComponent(a[1]))}return i},htmlDecode:function(e){var t;return e=e||"",t=new RegExp("&lt","g"),e=e.replace(t,"<"),t=new RegExp("&gt","g"),e=e.replace(t,">")},escapeRegExp:function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},replaceAll:function(e,t,i){return e.replace(new RegExp(KAMPYLE_UTILS.escapeRegExp(t),"g"),i)},sendMessageToIframe:function(e,t){var i;e&&(i=document.getElementById(e))&&i.getAttribute&&(e=i.getAttribute("origin")||"*",(i=i.contentWindow)&&i.postMessage&&i.postMessage(JSON.stringify(t),e))},getBrowser:function(){var e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return{name:"IE",version:(i=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""};if("Chrome"!==t[1]||null==(i=e.match(/\b(OPR|Edge)\/(\d+)/)))return t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(i=e.match(/version\/(\d+)/i))&&t.splice(1,1,i[1]),{name:t[0],version:t[1]};var i=i.slice(1);return{name:i[0].replace("OPR","Opera"),version:i[1]||""}},initEventSubscriptions:function(e,t){for(var i in e)e.hasOwnProperty(i)&&KAMPYLE_EVENT_DISPATCHER.subscribe(i,t)},getRandomTimeMS:function(e,t){return e+Math.round(Math.random()*(t-e))},kampyleGetUserId:function(){var e=KAMPYLE_DATA.getData("kampyle_userid");return e||(e=KAMPYLE_UTILS.kampyleCreateUUID(),KAMPYLE_DATA.setData("kampyle_userid",e),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ALTERNATIVE_UUID)&&KAMPYLE_DATA.setData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.MDIGITAL_ALTERNATIVE_UUID,KAMPYLE_UTILS.generateUUID())),e},kampyleCreateUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}for(var t=e(),i=0;i<7;i++)t+="-"+e();return t},removeAllContent:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.parentNode.removeChild(e)}},safeToLower:function(e){return"string"!=typeof e?e:e.toLowerCase()},getCookieFlagByProtocol:function(){var e=KAMPYLE_UTILS.isSecureProtocol();return"SameSite="+(e?"None":"Lax")+"; "+(e?"Secure; ":"")},buildQueryParams:function(i){return Object.keys(i||{}).map(function(e,t){return(0===t?"?":"")+e+"="+i[e]}).join("&")||""},kampyleSetCookie:function(e,t,i,r){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var a="expires="+n.toUTCString(),i=r?";domain="+r+";":"",n=KAMPYLE_UTILS.getCookieFlagByProtocol();e=r?KAMPYLE_UTILS.TOP_LEVEL_DOMAIN_COOKIE_PREFIX+e:e,document.cookie=e+"="+t+"; "+n+a+";path=/"+i},isSecureProtocol:function(){return"https:"===location.protocol},getCookie:function(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name))return this.c.substring(this.name.length,this.c.length)}return null},getDomainFromHost:function(e){if(null===e)return null;var t=e.indexOf(":"),t=-1===t?e.length:t;return e.substring(0,t)},isHostMatchesSubdomain:function(e,t){e=KAMPYLE_UTILS.getDomainFromHost(e);return e===t||e.endsWith("."+t)},kampyleGetCookie:function(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name))return this.c.substring(this.name.length,this.c.length)}return""},getByteSize:function(e){return encodeURIComponent("<q></q>"+e).length},getAllKampyleData:function(){var e=["SUBMITTED_DATE","kampyleUserPercentile","kampyleUserSession","kampyle_userid","kampyleInvitePresented","DECLINED_DATE","LAST_INVITATION_VIEW"];KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ALTERNATIVE_UUID)&&e.push(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.MDIGITAL_ALTERNATIVE_UUID),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&e.push(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION);for(var t={},i=e.length-1;0<=i;i--)t[e[i]]=KAMPYLE_DATA.getData(e[i]);return t},kampyleDeleteCookie:function(e,t){var i="";t&&(i=";domain="+t+";");t=KAMPYLE_UTILS.getCookieFlagByProtocol();document.cookie=e+"= ; "+t+"expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/"+i},kampyleIsCookieEnabled:function(){return navigator.cookieEnabled},kampyleCompareTimestamps:function(e,t,i){if("number"!=typeof e||"number"!=typeof t)return!1;switch(e=new Date(e),t=new Date(t),e.setHours(0,0,0,0),i){case"equals":return t.setHours(0,0,0,0),e.getTime()===t.getTime();case"laterthan":return t.setHours(23,59,59,999),t<e;case"earlierthan":return t.setHours(0,0,0,0),e<t;case"doesnotequal":return t.setHours(0,0,0,0),e.getTime()!==t.getTime();default:return!1}},kampyleCompareByOperator:function(e,t,i,r){r=KAMPYLE_UTILS.safeToLower(r);var n=!1;if(void 0===e)return n;switch(i=KAMPYLE_UTILS.safeToLower(i)){case KAMPYLE_CONSTANT.OPERATORS.EQUALS:n="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,i):e===t;break;case KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL:n="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,i):e!==t;break;case KAMPYLE_CONSTANT.OPERATORS.GREATER_THAN:n=t<e;break;case KAMPYLE_CONSTANT.OPERATORS.LATER_THAN:n="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,i):t<e;break;case KAMPYLE_CONSTANT.OPERATORS.SMALLER_THAN:n=e<t;break;case KAMPYLE_CONSTANT.OPERATORS.EARLIER_THAN:n="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,i):t<e;break;case KAMPYLE_CONSTANT.OPERATORS.CONTAINS:n=!!e&&e.indexOf&&-1!==e.indexOf(t);break;case KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_CONTAIN:n=!!e&&e.indexOf&&-1===e.indexOf(t);break;case KAMPYLE_CONSTANT.OPERATORS.STARTS_WITH:n=!!e&&e.indexOf&&0===e.indexOf(t);break;case KAMPYLE_CONSTANT.OPERATORS.ENDS_WITH:n=!!e&&e.indexOf&&e.length&&-1!==e.indexOf(t,e.length-e.length);break;case KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE:n=!!e||""===e||!1===e||0===e;break;case KAMPYLE_CONSTANT.OPERATORS.REGEX:try{var a=new RegExp(t),n=!!e&&null!==a.exec(e)}catch(e){n=!1}}return n},setNestedPropertyValue:function(e,t,i){for(var r=e,n=t.split("."),a=n.length,o=0;o<a-1;o++){var s=n[o];r[s]||(r[s]={}),r=r[s]}r[n[a-1]]=i},getNestedPropertyValue:function(e,t,i){if(!e||!t||"string"!=typeof t)return null;for(var r=t.split("."),n=e,a=r.length,o=0;o<a;o++){var s=r[o].split("#DOT#").join(".");if(!n||!n.hasOwnProperty(s)&&!n[s])return void 0===i?null:i;n=n[s]}return n},validateKampyleDomain:function(e){var t=/(^https?:\/\/[A-Za-z0-9\-]+\.kampyle\.com(\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\(\)\*\+,;\=]*)?)/.test(e);return t||console.warn("Invalid url in validateKampyleDomain: "+e),t},camelToDash:function(e){return"string"!=typeof e?e:e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},objectPropertyObserver:function(i,r,n){var a=0;window.setTimeout(function e(){var t=KAMPYLE_UTILS.getNestedPropertyValue(i,r);if(t&&n instanceof Function)return n(t);a++<100&&window.setTimeout(e,100)},100)},showInvite:function(){var e=document.getElementById("kampyleInvite");KAMPYLE_UTILS.setElementStyle(e,{visibility:"visible"},!0)},hideInvite:function(){var e=document.getElementById("kampyleInvite");KAMPYLE_UTILS.setElementStyle(e,{visibility:"hidden"},!0)},getNumericValue:function(e){return""===e||null===e||"number"!=typeof e&&isNaN(Number(e))?null:Number(e)},extractAllObjectNonFunctionsProperties:function(e){var t,i={};for(t in e)"function"!=typeof e[t]&&(i[t]=e[t]);return 0<Object.keys(i).length?i:null},httpRequest:function(a,o,i,s,n,e){var l=0,u=(e||{}).numOfTimes||KAMPYLE_CONSTANT.NETWORK.NUM_OF_RETRIES,d=(e||{}).timeout||KAMPYLE_CONSTANT.NETWORK.REQUEST_TIMEOUT;function _(e,t,i){var r;l<u?(l++,r=KAMPYLE_UTILS.getRetryTimeout(),setTimeout(m,r)):(KAMPYLE_EVENT_DISPATCHER.trigger(t,i),"function"==typeof n&&n(e))}function m(){var e,r=KAMPYLE_UTILS.getCurrentTimestamp(),t={attemptNumber:l,url:o};i&&((e=Object.assign({},i)).cdUserID=KAMPYLE_COOLADATA.getUserId(),t=Object.assign({},t,{postData:e})),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.BEFORE[a],{httpRequestData:t});var n=new XMLHttpRequest;n.open(a,o,!0),i&&n.setRequestHeader("Content-Type","application/json"),n.timeout=d||0,n.onerror=function(e){var t=KAMPYLE_UTILS.getTimeDiff(r,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS),t={requestUrl:o,responseStatus:n.status,error:e,requestTotalTimeInSeconds:t};_(t,KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.ERROR[a],{httpRequestData:t})},n.ontimeout=function(e){var t=KAMPYLE_UTILS.getTimeDiff(r,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS),t={requestUrl:o,responseStatus:n.status,error:e,attemptNumber:l,networkConnectionDetails:KAMPYLE_UTILS.extractAllObjectNonFunctionsProperties(window.navigator.connection),requestTotalTimeInSeconds:t};_(t,KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.TIMEOUT[a],{httpRequestData:t})},n.onload=function(){var e,t=KAMPYLE_UTILS.getTimeDiff(r,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS),i=KAMPYLE_UTILS.safeJsonParse(n.responseText);200===n.status?(e={requestUrl:o,attemptNumber:l,requestTotalTimeInSeconds:t},KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.AFTER[a],{httpRequestData:e}),"function"==typeof s&&s(i)):_(t={requestUrl:o,responseStatus:n.status,responseText:i,attemptNumber:l,requestTotalTimeInSeconds:t},KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.ERROR_STATUS_CODE[a],{httpRequestData:t})},i?n.send(JSON.stringify(t.postData)):n.send()}m()},lowerize:function(e){return e.toLowerCase()},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},getDeviceTypeByUserAgent:function(e){var t="function",i="model",r="type",n="vendor",a="mobile",o="tablet";if(KAMPYLE_UTILS.isiPadOS13())return o;for(var s,l,u,d,_,m={},c=[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,n,[r,o]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[n,"Apple"],[r,o]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/SHIELD Tablet/,/A500/,/LG-V410\/V41020c/,/Puffin/,/^(?!.*Mobile).*Android.*$/],[n,i,[r,o]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[i,[n,"Amazon"],[r,o]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,n,[r,a]],[/\((ip[honed|\s\w*]+);/i],[i,[n,"Apple"],[r,a]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[n,i,[r,a]],[/\(bb10;\s(\w+)/i],[i,[n,"BlackBerry"],[r,a]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[n,"Asus"],[r,o]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[n,"Sony"],[i,"Xperia Tablet"],[r,o]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[n,"Sony"],[i,"Xperia Phone"],[r,a]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[n,i,[r,o]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[n,[i,/_/g," "],[r,a]],[/(nexus\s9)/i],[i,[n,"HTC"],[r,o]],[/(nexus\s6p)/i],[i,[n,"Huawei"],[r,a]],[/(microsoft);\s(lumia[\s\w]+)/i],[n,i,[r,a]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[n,"Microsoft"],[r,a]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[n,"Motorola"],[r,a]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[n,"Motorola"],[r,o]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[n,"Samsung"],i,[r,o]],[/smart-tv.+(samsung)/i],[n,[r,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[n,"Samsung"],i,[r,a]],[/sie-(\w+)*/i],[i,[n,"Siemens"],[r,a]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[n,"Nokia"],i,[r,a]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[n,"Acer"],[r,o]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[n,"LG"],i,[r,o]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[i,[n,"LG"],[r,a]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[n,"Lenovo"],[r,o]],[/linux;.+((jolla));/i],[n,i,[r,a]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[n,i,[r,a]],[/android.+;\s(pixel c)\s/i],[i,[n,"Google"],[r,o]],[/android.+;\s(pixel xl|pixel)\s/i],[i,[n,"Google"],[r,a]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[i,/_/g," "],[n,"Xiaomi"],[r,a]],[/android.+a000(1)\s+build/i],[i,[n,"OnePlus"],[r,a]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[r,KAMPYLE_UTILS.lowerize],n,i],[/Mobile|iP(hone|od|ad)|(Android).*(Mobile|sdk)|BlackBerry|portalmmm|BOLT|Vodafone|WindowsCE|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/],[n,i,[r,a]]],A=e||navigator.userAgent,E=0;E<c.length&&!d;){for(var T=c[E],f=c[E+1],p=s=0;p<T.length&&!d;)if(d=T[p++].exec(A))for(l=0;l<f.length;l++)_=d[++s],"object"==typeof(u=f[l])&&0<u.length?2==u.length?typeof u[1]==t?m[u[0]]=u[1].call(m,_):m[u[0]]=u[1]:3==u.length?typeof u[1]!=t||u[1].exec&&u[1].test?m[u[0]]=_?_.replace(u[1],u[2]):void 0:m[u[0]]=_?u[1].call(m,_,u[2]):void 0:4==u.length&&(m[u[0]]=_?u[3].call(m,_.replace(u[1],u[2])):void 0):m[u]=_||void 0;E+=2}return!m[r]||m[r]!==a&&m[r]!==o?"desktop":m[r]},getElementStyle:function(e,t){if(e instanceof HTMLElement)try{return window.getComputedStyle(e).getPropertyValue(t)}catch(e){}return null},isTruthy:function(e){if("string"!=typeof e)return e;try{e=JSON.parse(e)}catch(e){}return e},safeJsonParse:function(e,t){try{return JSON.parse(e)}catch(e){return KAMPYLE_UTILS.showWarning(t||"Failed to parse JSON, error message: "+(e||{}).message),KAMPYLE_UTILS.showErrorStack(e||{}),null}},addWcagStyleOnFocus:function(e){KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)&&(e.addEventListener("focusin",function(){KAMPYLE_UTILS.setElementStyle(e,{outline:"1px dashed #595959",outlineOffset:"2px",transition:"none"},!0)}),e.addEventListener("focusout",function(){e.style.outline="none",e.style.outlineOffset=null,e.style.transition=null}))},addHoverEffectOnElement:function(e,t,i){e&&"function"==typeof e.addEventListener&&(e.addEventListener("mouseenter",function(){KAMPYLE_UTILS.setElementStyle(e,i)}),e.addEventListener("mouseleave",function(){KAMPYLE_UTILS.setElementStyle(e,t)}))},handleAfterFormPosition:function(e,t){KAMPYLE_UTILS.scrollToLastPosition()},scrollToLastPosition:function(){var e=KAMPYLE_DATA.getMemoryData("scrollPosition");e&&(window.scroll(e.x,e.y),KAMPYLE_DATA.deleteMemoryData("scrollPosition"))},setCurrentScrollPosition:function(){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NOT_SCROLL_TO_LAST_POSITION_DISPLAY_TYPE_ANIMATION)&&document.body!==document.activeElement)return!1;var e=KAMPYLE_UTILS.getScrollPosition()||{};KAMPYLE_DATA.setMemoryData("scrollPosition",{x:e.x,y:e.y})},getScrollPosition:function(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"");return{x:e?window.pageXOffset:(t?document.documentElement:document.body).scrollLeft,y:e?window.pageYOffset:(t?document.documentElement:document.body).scrollTop}},getLangCodeFromNavAPI:function(){return window.navigator.language||window.navigator.userLanguage||null},getStrigifiedData:function(t){var i;if("object"==typeof t&&null!==t)try{i=JSON.stringify(t)}catch(e){i=t}else i=t;return i},appendScript:function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)},toBase64:function(e){return e=e||"",btoa(unescape(encodeURIComponent(e)))},styleObjToInline:function(e){var t,i="";for(t in e)i+=t+":"+e[t]+";";return i},getBaseUrl:function(){return location.origin+location.pathname},generateUUID:function(){var t=KAMPYLE_UTILS.getCurrentTimestamp();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,function(){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),e.toString(16)})},getRetryTimeout:function(){var e=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);return KAMPYLE_UTILS.getNestedPropertyValue(e,"retryTimout")||KAMPYLE_CONSTANT.NETWORK.RETRY_TIMEOUT},isTrue:function(e){return!0===e||"true"===e},isValueNumericAndDefined:function(e){var t=!!e,e=!isNaN(e);return t&&e},focusElement:function(e){e&&"function"==typeof e.focus&&e.focus()},isModalFormType:function(e){var t=KAMPYLE_DATA.getFormData(e),e=KAMPYLE_DATA.getDisplayType(t),t=Boolean(t)&&Boolean(e)&&t.formType!==KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED&&e!==KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP;return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?t&&e!==KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION:t},isFormInPreviewContext:function(e){e=KAMPYLE_DATA.getFormState(e);return null!=e&&"Preview"==e.triggerType}},window.KAMPYLE_EVENT_DISPATCHER=function(l){var u;function d(e){var t=(t=KAMPYLE_CONSTANT.LOG_MESSAGES.TRIGGER_MESSAGE_TEMPLATE).replace("{{EVENT_NAME}}",e.eventName).replace("{{DATA}}",KAMPYLE_UTILS.getStrigifiedData(e.data)).replace("{{CONTEXT}}",KAMPYLE_UTILS.getStrigifiedData(e.context)).replace("{{OPTIONS}}",KAMPYLE_UTILS.getStrigifiedData(e.options));return e.errorMessage?(t=t.replace("{{STATUS}}",KAMPYLE_CONSTANT.LOG_STATUSES.FAILED),t+=KAMPYLE_CONSTANT.LOG_MESSAGES.ERROR_LOG_TEMPLATE.replace("{{ERROR_MESSAGE}}",e.errorMessage)):t=t.replace("{{STATUS}}",KAMPYLE_CONSTANT.LOG_STATUSES.TRIGGERED),t}function r(e){return e&&u&&u[e]?u[e]:u}function n(e,t){if(!e||"string"!=typeof e||!t||"function"!=typeof t&&"string"!=typeof t)return!1;var i=u[e];return-1===(i=void 0===i?u[e]=[]:i).indexOf(t)&&i.push(t),!0}function _(e){e=e||{};var t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),i={};return t&&(i={accountId:t.accountId,websiteId:t.websiteId,enviroment:t.region}),Object.assign(e,i)}return{subscribe:n,subscribeOnce:function(e,t){var i=r(e);i[e]&&-1!==i.indexOf(t)||n(e,t)},subscribeMany:function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i=0;i<e[t].length;i++)n(t,e[t][i])},trigger:function(t,i,r,n){var e,a,o=KAMPYLE_UTILS.getNestedPropertyValue(u,t);if(null==o)return!1;var s=(i=_(i))instanceof Array?i:[i];for(r=r||null,a=o.length,e=0;e<a;e+=1)if("string"==typeof o[e])KAMPYLE_UTILS.triggerCustomEvent(o[e]);else try{o[e].apply(r,[t].concat(s)),MDIGITAL.LOGGER.getLoggerStatus()&&MDIGITAL.LOGGER.debug(d({eventName:t,data:i,context:r,options:n,errorMessage:null}))}catch(e){if(MDIGITAL.LOGGER.getLoggerStatus()&&MDIGITAL.LOGGER.error(d({eventName:t,data:i,context:r,options:n,errorMessage:e.message})),KAMPYLE_UTILS.showErrorStack(e),l.KAMPYLE_COOLADATA&&i&&(i.errorMessage=e.message,i.errorStack=e.stack,KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError(i)),n&&n.isStrictMode)break;continue}return!0},triggerError:function(e){KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_EVENT_DISPATCHER_ERROR,e)},unsubscribe:function(e,t){if(!e||"string"!=typeof e||!t||"function"!=typeof t)return!1;e=u[e];return void 0===e||-1!==(t=e.indexOf(t))&&e.splice(t,1),!0},init:function(){u={}},getEventSubscriptions:r,appendDefaultEventParams:_}}(window,document),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.EMBEDDED=function(o){function e(){if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CLEAR_EMBEDDED_ON_UPDATE_PAGE))for(var e=KAMPYLE_DATA.getAllForms(),t=0;t<e.length;t++){var i=e[t];KAMPYLE_DATA.isEmbeddedDisplayType(i.formId)&&MDIGITAL.EMBEDDED.deleteEmbeddedIframe(i.formId)}}function t(e,t){if(t=t||{},!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId))return!1;var i=s(t.formId);if(null===(r=i)||r.innerHTML&&("string"!=typeof r.innerHTML||""!==r.innerHTML.trim()))return!1;i&&(n=parseInt(getComputedStyle(i).height),a(i.id,n));var r=setTimeout(function(){KAMPYLE_FUNC.isFormLoaded(t.formId)||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:t.formId,failureCause:KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.APPLICATION_FAILED,formState:KAMPYLE_DATA.getFormState(t.formId)})},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS);KAMPYLE_DATA.setTimeoutHandler(KAMPYLE_CONSTANT.TIMEOUT_HANDLERS.EMBEDDED_STATUS+"_"+t.formId,r);var n=function(e){var t=KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e,i=o.getElementById(t);i||((i=o.createElement("iframe")).id=t,i.setAttribute("title",KAMPYLE_CONSTANT.IFRAME_SETTINGS.IFRAME_TITLE),l(e)&&i.setAttribute("scrolling","no"),u(i,{display:"none"}));return i}(t.formId),r=KAMPYLE_DATA.getFormData(t.formId);return n.src=KAMPYLE_COMMON.createFormUrl(r.formHtmlUrl,t.formId),i.appendChild(n),KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!0}),!0}function i(e,t){if(!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId))return!1;t=o.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId);return t&&u(t,{display:"block"}),!0}function s(e){e=KAMPYLE_DATA.getFormData(e);return o.getElementById(KAMPYLE_UTILS.getNestedPropertyValue(e,"embeddedData.pageElementId"))}function l(e){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.PREVENT_IFRAME_SCROLLBAR_FLICKERING)&&!KAMPYLE_DATA.isCustomHtmlForm(e)}function u(e,t){t=Object.assign({},{border:0,width:"100%",height:"100%"},t);KAMPYLE_UTILS.setElementStyle(e,t,!1)}function d(e,t){t?KAMPYLE_UTILS.removeAttribute(e,"scrolling"):KAMPYLE_UTILS.addAttributesOnElement(e,{scrolling:"no"})}function r(e,t){t=t||{};var i=KAMPYLE_DATA.getFormData(t.formId)||{},r=s(t.formId),n=o.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId);if(!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||null===r||null===n)return!1;var a=function(e,t,i){var r="true"===t.isFixedSize||!0===t.isFixedSize,n=r,a=r?parseInt(t.formHeight):i.newHeight,r=getComputedStyle(e),t=_(e.id);t=isNaN(t)?parseInt(e.style.height||0):t;i=isNaN(parseInt(r.maxHeight))?t||0:parseInt(r.maxHeight),e=isNaN(parseInt(r.minHeight))?0:parseInt(r.minHeight),r=0===i&&0===e;0!==i&&i<e&&(i=e);return function(e,t,i,r,n,a){var o=e;a=i?o=e:(0!==r&&r<=e&&(o=r,t=!0),e<n||e<a?0!==n?n:a:o);return{formHeight:o,iframeHeight:a,shouldBeStatic:t}}(a,n,r,i,e,t)}(r,i,t),r=function(e,t){t=parseInt(t.formWidth);return Math.min(t,KAMPYLE_UTILS.getElementSize(e).width)}(r,i);u(n,{height:a.iframeHeight+"px",width:(i=t.formId,i=KAMPYLE_DATA.getFormData(i),KAMPYLE_UTILS.getNestedPropertyValue(i,"isFullWidthEmbedded")?"100%":r+"px")}),l(t.formId)&&d(n,a.shouldBeStatic);a={height:a.formHeight,width:r,shouldBeStatic:a.shouldBeStatic};return KAMPYLE_UTILS.sendMessageToIframe(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId,{action:"setFormStyle",data:a}),a}function n(e,t){MDIGITAL.EMBEDDED.deleteEmbeddedIframe(t.formId)}function a(e,t){var i=KAMPYLE_DATA.getMemoryData("hostingElementsHeights");i[e]=t,KAMPYLE_DATA.setMemoryData("hostingElementsHeights",i)}function _(e){return KAMPYLE_DATA.getMemoryData("hostingElementsHeights")[e]||0}function m(e,t){t=t||{},KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)&&KAMPYLE_DATA.isMobile()&&KAMPYLE_VIEW.scrollToEmbeddedForm(t.formId)}return{removeEmbeddedIFrames:e,init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_loadForm:[t],neb_formLoaded:[i],neb_iFrameHeightChanged:[r],neb_formClosed:[n],MDigital_ThankYou_Displayed:[m],neb_targetingInit:[e]})},createEmbeddedIframe:t,showForm:i,calculateFormSize:r,deleteEmbeddedIframe:function(e){return!!KAMPYLE_DATA.isEmbeddedDisplayType(e)&&(null!==(e=o.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e))&&(KAMPYLE_UTILS.removeAllContent(e),!0))},addHostingElementHeight:a,getHostingElementHeight:_,handleThankyouPage:m,setIframeScrolling:d}}((window,document)),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.FORM_STATE=function(){function e(e,t){var i={};i[t.failureCause]=!0,KAMPYLE_DATA.setFormState(t.formId,i)}function t(e,t){if(!a(t))return!1;var i=KAMPYLE_DATA.getFormState(t.formId),r=[].concat(i.targeting[t.targetingPhase]||[]);r.push(n(t));i={};i[t.targetingPhase]=r,KAMPYLE_DATA.setFormState(t.formId,{targeting:i})}function n(t){var i={targetingRule:"",isPassed:!1,expected:"",actual:""};return Object.keys(i).forEach(function(e){i[e]=t[e]}),i}function a(e){e=e||{};var t=KAMPYLE_DATA.getFormState(e.formId);return!(!t||!t.targeting||!e.targetingPhase)}return{init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({MDigital_targetingRuleEvaluated:[t],neb_formLoadingHasFailed:[e]})},updateTargetingState:t,getRuleData:n,canUpdateState:a,shouldFormBeShown:function(e){return(e=KAMPYLE_DATA.getFormState(e))&&e.shouldBeShown},isFormLoaded:function(e){return!!(e=KAMPYLE_DATA.getFormState(e))&&!!e.loaded},isInviteLoaded:function(e){return!!(e=KAMPYLE_DATA.getFormState(e))&&!!e.inviteLoaded},isFormAlreadyShown:function(e){return(e=KAMPYLE_DATA.getFormState(e))&&e.shown}}}((window,document)),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL_ELEMENT_BUILDER=function(){function o(e,t,i){var r=document.createElement("body");KAMPYLE_UTILS.setElementStyle(r,{margin:"0px",overflow:"hidden"});var n=document.createElement("div");n.id="sc-widget",n.className="sc-widget",KAMPYLE_UTILS.setElementStyle(n,i.widget),KAMPYLE_UTILS.setElementStyle(n,{zIndex:"2147483646"});var a=document.createElement("div");a.className="sc-widget-content",KAMPYLE_UTILS.setElementStyle(a,i.widgetContent),KAMPYLE_UTILS.setElementStyle(a,{fontFamily:"Open Sans"},!0);var o=document.createElement("h2");o.className="scTitle",o.style.fontSize="16px";i=e.screenCaptureSettings&&e.screenCaptureSettings.titleInstructionsScreenCapture?e.screenCaptureSettings.titleInstructionsScreenCapture:"Screen Capture",i=document.createTextNode(i);o.appendChild(i);i=document.createElement("p");i.className="scParagraph",KAMPYLE_UTILS.setElementStyle(i,{fontSize:"12px",marginTop:"10px"});e=e.screenCaptureSettings&&e.screenCaptureSettings.bodyInstructionsScreenCapture?e.screenCaptureSettings.bodyInstructionsScreenCapture:KAMPYLE_CONSTANT.TEXTS.SCREEN_CAPTURE.DEFAULT_DESCRIPTION,e=document.createTextNode(e);return i.appendChild(e),a.appendChild(o),a.appendChild(i),n.appendChild(a),n.appendChild(t),r.appendChild(n),r}function a(i,r,n){i&&r&&n&&"function"==typeof i.addEventListener&&(i.addEventListener("mouseenter",function(){var e=i.children[0],t=i.children[1];KAMPYLE_UTILS.setElementStyle(e,n.bgElementStyle),KAMPYLE_UTILS.setElementStyle(t,n.textElementStyle)}),i.addEventListener("mouseleave",function(){var e=i.children[0],t=i.children[1];KAMPYLE_UTILS.setElementStyle(e,r.bgElementStyle),KAMPYLE_UTILS.setElementStyle(t,r.textElementStyle)}))}return{createScreenCaptureInstructionWidget:function(e,t){var i,r=KAMPYLE_COMMON.overrideDefaultScreenCaptureTexts(e.screenCaptureSettings)||{},n=KAMPYLE_COMMON.overrideDefaultScreenCaptureStyles(e.screenCaptureSettings)||{},a=(a=document.createElement("head"),(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.href=KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.OPEN_SANS,a.appendChild(i),a),r=o(e,function(e,t){var i=document.createElement("div");i.className="sc-widget-footer",KAMPYLE_UTILS.setElementStyle(i,{"font-family":"'Open Sans'",padding:"10px","font-size":"14px","padding-top":"0","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal","letter-spacing":"normal","line-height":"20px"});var r=document.createElement("button");r.className="sc-widget-footer-cancel top-tip",KAMPYLE_UTILS.addAttributesOnElement(r,{class:"sc-widget-footer-cancel top-tip",title:e.cancelScreenCaptureTooltip}),r.addEventListener("click",function(){KAMPYLE_SCREEN_CAPTURE.getUserSnapInstance().close()}),KAMPYLE_UTILS.setElementStyle(r,Object.assign({outline:"none"},t.widgetFooterCancel,t.widgetFooterBtn));var n=document.createTextNode(e.cancelScreenCaptureLabel);r.appendChild(n);var a=document.createElement("button");return KAMPYLE_UTILS.addAttributesOnElement(a,{class:"sc-widget-footer-capture top-tip",title:e.submitScreenCaptureTooltip}),a.addEventListener("click",KAMPYLE_COMMON.onSubmitScreenCaptureClick),KAMPYLE_UTILS.setElementStyle(a,Object.assign({outline:"none"},t.widgetFooterCapture,t.widgetFooterBtn)),n=document.createElement("img"),KAMPYLE_UTILS.addAttributesOnElement(n,{alt:"Loading",src:KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.KLOADER,id:"widgetFooterCaptureImg"}),KAMPYLE_UTILS.setElementStyle(n,{width:"20px",height:"20px",display:"none"}),(t=document.createElement("span")).id="widgetFooterCaptureText",t.appendChild(document.createTextNode(e.submitScreenCaptureLabel)),a.appendChild(n),a.appendChild(t),i.appendChild(r),i.appendChild(a),i}(r,n),n);r=a=(n=a,a=r,(r=document.createElement("html")).appendChild(n),r.appendChild(a),r),a=t,(t=document.createElement("iframe")).id="nebScIframe",KAMPYLE_UTILS.setElementStyle(t,{width:"310px",bottom:"20px",left:"20px",zIndex:2147483647,position:"fixed"}),KAMPYLE_UTILS.setElementStyle(t,{display:"block"},!0),t.frameBorder="0",t.sandbox="allow-top-navigation allow-same-origin allow-scripts",a?a.parentNode.insertBefore(t,a):document.body.appendChild(t),(a=t.contentDocument||t.contentWindow.document).open(),a.write("<html><head></head><body></body></html>"),a.close(),a.replaceChild(r,a.getElementsByTagName("html")[0]),t.height=a.getElementById("sc-widget")&&a.getElementById("sc-widget").scrollHeight+20,setTimeout(function(){document.activeElement.blur()},100)},createFormContainer:function(e){var t=document.createElement("span");t.id="formLightboxContainer";var i=document.createElement("div");i.id="kampyleFormContainer",KAMPYLE_UTILS.setElementStyle(i,{top:0,left:0,width:"100%",height:"100%",position:"fixed",visibility:"hidden",display:"table",backgroundColor:"rgba(102,102,102,0.4)",zIndex:"99999999",webkitOverflowScrolling:"touch"},!0);var r=document.createElement("div");r.id="kampyleFormContainer";var n=document.createElement("img");KAMPYLE_UTILS.addAttributesOnElement(n,{class:"neb-loading-spinner",alt:"Loading",src:e}),KAMPYLE_UTILS.setElementStyle(n,{position:"absolute",top:"50%",left:"50%",marginTop:"-30px",marignLeft:"-30px",maxWidth:"60px"},!0),(e=document.createElement("div")).id="kampyleFormModal",KAMPYLE_UTILS.setElementStyle(e,{zIndex:"99999999",webkitOverflowScrolling:"touch"},!0),r.appendChild(n),r.appendChild(e),i.appendChild(r),t.appendChild(i),document.body.appendChild(t)},createInviteIframeContainer:function(e){var t=document.createElement("span"),i=KAMPYLE_VIEW.getLoaderGifUrl(),r=document.createElement("div");r.id="kampyleInviteContainer",KAMPYLE_UTILS.setElementStyle(r,{top:"0",left:"0",width:"100%",height:"100%",position:"fixed",visibility:"hidden",display:"none",backgroundColor:"rgba(22,22,22,0.5)",zIndex:"99999999",overflow:"auto"},!0);var n=document.createElement("img");KAMPYLE_UTILS.addAttributesOnElement(n,{class:"neb-loading-spinner",alt:"Loading",src:i},!0),KAMPYLE_UTILS.setElementStyle(n,{position:"absolute",top:"50%",left:"50%",marginTop:"-30px",marignLeft:"-30px",maxWidth:"60px"},!0),(i=document.createElement("div")).id="kampyleInviteModal",KAMPYLE_UTILS.setElementStyle(i,{overflow:"hidden",margin:"0 auto",height:e.inviteData.inviteHeight,width:e.inviteData.inviteWidth,position:"relative",zIndex:"99999999",top:"25%",webkitBoxShadow:"0 0 10px rgba(0,0,0,0.4)",mozBoxShadow:"0 0 10px rgba(0,0,0,0.4)",boxShadow:"0 0 10px rgba(0,0,0,0.4)"}),r.appendChild(i),r.appendChild(n),t.appendChild(r),document.body.appendChild(r)},getErrorModal:function(e,t,i,r,n){var a=document.createElement("div"),e=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?{id:e}:{tabIndex:0,id:e,role:"alertdialog","aria-modal":!0,"aria-labelledby":"title-no-json-modal","aria-describedby":"description-no-json-modal",lang:a};return KAMPYLE_UTILS.addAttributesOnElement(a,e),KAMPYLE_UTILS.setElementStyle(a,{position:"relative",textAlign:"center",backgroundColor:"rgba(255,255,255, 1)",margin:"5% auto 2% auto",border:"1px solid #cccccc",boxShadow:"8px 10px 58px 2px rgba(64, 64, 74, 0.56)",color:"#2C3548",fontFamily:"helvetica",height:"500px",width:KAMPYLE_DATA.isMobile()?"98%":"450px"}),e=function(e,t){var i=document.createElement("i");KAMPYLE_UTILS.addAttributesOnElement(i,{"aria-hidden":!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS),tabIndex:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?0:-1,id:"close-no-json-modal","data-aut":"no-json-modal-close-button",role:"button",lang:t,"aria-label":e}),KAMPYLE_UTILS.setElementStyle(i,{cursor:"pointer",position:"absolute",top:"3px",right:"12px",fontStyle:"normal",fontSize:"28px",opacity:.7}),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)&&KAMPYLE_UTILS.addWcagStyleOnFocus(i);KAMPYLE_UTILS.isDesktop()&&KAMPYLE_UTILS.addHoverEffectOnElement(i,{opacity:.7},{opacity:1});return i.innerHTML="Ã—",i}(n,t),n=document.createElement("img"),KAMPYLE_UTILS.addAttributesOnElement(n,{src:KAMPYLE_COMMON.getUrlPrefix()+KAMPYLE_CONSTANT.SRC.OOPS}),KAMPYLE_UTILS.setElementStyle(n,{marginLeft:"-1px"}),t=n,n=i,i=document.createElement("h2"),KAMPYLE_UTILS.addAttributesOnElement(i,{id:"title-no-json-modal"}),KAMPYLE_UTILS.setElementStyle(i,{fontWeight:"bold",margin:"40px 0 16px",fontSize:"24px"}),i.appendChild(document.createTextNode(n)),r=function(e){var t=document.createElement("div");KAMPYLE_UTILS.addAttributesOnElement(t,{id:"description-no-json-modal"}),KAMPYLE_UTILS.setElementStyle(t,{padding:"0 44px",color:"#2C3548",fontFamily:"helvetica",lineHeight:"23px",fontSize:"16px"});var i=document.createElement("p");return i.innerHTML=e,t.appendChild(i),t}(r),a.appendChild(e),a.appendChild(t),a.appendChild(i),a.appendChild(r),a},getVerticalButton:function(e){var t=KAMPYLE_VIEW.getButtonText(e),i="kampyle_"+e.buttonData.position,r=document.createElement("button");KAMPYLE_UTILS.addAttributesOnElement(r,{id:"nebula_div_btn",alt:t,tabIndex:"0",class:"kampyle_vertical_button "+i+" "+KAMPYLE_VIEW.getWCAGClass()}),KAMPYLE_UTILS.setElementStyle(r,{backgroundColor:"transparent",height:"auto",minHeight:"35px",maxHeight:"35px",width:"125px",minWidth:"125px",maxWidth:"125px",padding:0},!0),KAMPYLE_UTILS.setElementStyle(r,{fontFamily:"Open Sans, sans-serif",cursor:"pointer",position:"fixed",top:"45%",border:"none",zIndex:"99999990",height:"35px !important","-ms-transform":"rotate(90deg)","-webkit-transform":"rotate(90deg)",transform:"rotate(90deg)"}),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?KAMPYLE_UTILS.addWcagStyleOnFocus(r):KAMPYLE_UTILS.setElementStyle(r,{outline:"none"},!0),r.style[e.buttonData.position]="-45px";var n=document.createElement("div");return n.setAttribute("class","kampyle_button"),i="left"===e.buttonData.position?"3px 3px 0 0":"0 0 3px 3px",KAMPYLE_UTILS.setElementStyle(n,{width:"125px",minWidth:"125px",maxWidth:"125px",minHeight:"35px",maxHeight:"35px","-webkit-border-radius":i,"-moz-border-radius":i,"-ms-border-radius":i,"border-radius":i},!0),KAMPYLE_UTILS.setElementStyle(n,{height:"35px",background:e.buttonData.backgroundColor,color:e.buttonData.textColor,position:"absolute",top:0,left:0,zIndex:"-1"}),i=document.createElement("div"),KAMPYLE_UTILS.addAttributesOnElement(i,{"data-aut":"feedback",class:"kampyle_button-text"}),KAMPYLE_UTILS.setElementStyle(i,{fontWeight:"normal"},!0),KAMPYLE_UTILS.setElementStyle(i,{color:e.buttonData.textColor,fontSize:"14px",lineHeight:"35px",textAlign:"center"}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.RTL)&&MDIGITAL.LOCALIZATION.isFormLanguageRtl(e)&&KAMPYLE_UTILS.setElementStyle(i,{transform:"scale(-1)","-ms-transform":"scale(-1)","-webkit-transform":"scale(-1)"}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)&&a(r,{bgElementStyle:{backgroundColor:e.buttonData.backgroundColor},textElementStyle:{color:e.buttonData.textColor}},{bgElementStyle:{backgroundColor:e.buttonData.backgroundHoverColor||"#396CEF"},textElementStyle:{color:e.buttonData.textHoverColor||"#FFFFFF"}}),t=document.createTextNode(t),i.appendChild(t),r.appendChild(n),r.appendChild(i),r},getTriangularButton:function(e){var t={topRight:{btnStyle:{top:0,right:0},div1Style:{top:0,right:0,borderTop:"81px solid "+e.buttonData.backgroundColor,borderLeft:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(45deg)","-webkit-transform":"rotate(45deg)",transform:"rotate(45deg)"}},topLeft:{btnStyle:{top:0,left:0},div1Style:{top:0,left:0,borderTop:"81px solid "+e.buttonData.backgroundColor,borderRight:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(-45deg)","-webkit-transform":"rotate(-45deg)",transform:"rotate(-45deg)"}},bottomRight:{btnStyle:{bottom:0,right:0},div1Style:{bottom:0,right:0,borderBottom:"81px solid "+e.buttonData.backgroundColor,borderLeft:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(-45deg)","-webkit-transform":"rotate(-45deg)",transform:"rotate(-45deg)"}},bottomLeft:{btnStyle:{bottom:0,left:0},div1Style:{bottom:0,left:0,borderBottom:"81px solid "+e.buttonData.backgroundColor,borderRight:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(45deg)","-webkit-transform":"rotate(45deg)",transform:"rotate(45deg)"}}},i=document.createElement("button"),r=KAMPYLE_VIEW.getButtonText(e),n=e.buttonData.position||"topLeft",a=KAMPYLE_VIEW.getClassDirectonByPosition(n),o=t[n].btnStyle,s=t[n].div1Style,t=t[n].div2Style;return KAMPYLE_UTILS.addAttributesOnElement(i,{id:"nebula_div_btn",alt:r,tabindex:0,class:"kampyle_feedback-button "+a.leftright+" "+KAMPYLE_VIEW.getWCAGClass()}),KAMPYLE_UTILS.setElementStyle(i,{backgroundColor:"transparent",height:"auto",padding:0},!0),KAMPYLE_UTILS.setElementStyle(i,Object.assign({fontFamily:"Open Sans, sans-serif",cursor:"pointer",position:"fixed",border:"none",zIndex:"99999990"},o)),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?(i.addEventListener("focusin",function(e){KAMPYLE_UTILS.setElementStyle(i,{outline:"1px dashed #595959",outlineOffset:"2px",transition:"none"},!0)}),i.addEventListener("focusout",function(e){i.style.outline="none",i.style.outlineOffset=null,i.style.transition=null})):KAMPYLE_UTILS.setElementStyle(i,{outline:"none"},!0),(o=document.createElement("div")).setAttribute("class","kampyle_triangle"),KAMPYLE_UTILS.setElementStyle(o,Object.assign({position:"absolute",width:0,height:0,zIndex:-1},s)),s=document.createElement("div"),KAMPYLE_UTILS.addAttributesOnElement(s,{"data-aut":"feedback",class:"kampyle_button-text "+a.topbottom}),KAMPYLE_UTILS.setElementStyle(s,{fontWeight:"normal",lineHeight:"bottomLeft"===n||"bottomRight"===n?"108px":"53px"},!0),KAMPYLE_UTILS.setElementStyle(s,Object.assign({height:"81px",width:"81px",textAlign:"center",zIndex:"1000",color:e.buttonData.textColor,fontSize:"14px"},t)),r=document.createTextNode(r),s.appendChild(r),i.appendChild(o),i.appendChild(s),i},getCustomButton:function(e){var t=document.createElement("button"),i=document.createElement("img"),r=KAMPYLE_VIEW.getButtonText(e),n={bottomLeft:{bottom:0,left:0},bottomRight:{bottom:0,right:0},topLeft:{top:0,left:0},topRight:{top:0,right:0},left:{left:0,top:"50%"},right:{right:0,top:"50%"}}[e.buttonData.position];return KAMPYLE_UTILS.addAttributesOnElement(t,{id:"nebula_div_btn",tabindex:0,class:"nebula_image_button "+KAMPYLE_VIEW.getWCAGClass()}),KAMPYLE_UTILS.setElementStyle(t,{zIndex:"99999990",position:"fixed",cursor:"pointer",border:"none",lineHeight:"1px",width:"auto",background:"transparent"},!0),KAMPYLE_UTILS.setElementStyle(t,Object.assign({padding:0},n)),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?(t.addEventListener("focusin",function(e){KAMPYLE_UTILS.setElementStyle(t,{outline:"1px dashed #595959",outlineOffset:"2px",transition:"none"},!0)}),t.addEventListener("focusout",function(e){t.style.outline="none",t.style.outlineOffset=null,t.style.transition=null})):KAMPYLE_UTILS.setElementStyle(t,{outline:"none"},!0),KAMPYLE_UTILS.addAttributesOnElement(i,{alt:r,src:e.buttonData.buttonUrl}),t.appendChild(i),t},createScreenCaptureBody:o,addHoverStyleToFeedbackButton:a}}((window,document)),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.LOGGER=(window,document,new function(){var r={DEBUG:"log",INFO:"info",WARN:"warn",ERROR:"warn"};this._logs=[],this.getLoggerStatus=function(){var e=KAMPYLE_DATA.getData("mdLogger");return"true"===e||!0===e},this.setLoggerStatus=function(e){KAMPYLE_DATA.setData("mdLogger",e)},this.debug=function(e){this.writeLog("DEBUG",e)},this.warn=function(e){this.writeLog("WARN",e)},this.error=function(e){this.writeLog("ERROR",e)},this.writeLog=function(e,t){var i=r[e]||r.DEBUG;t=this.setTimeAndLevelOnMessage(e,t),this._logs.push({type:i,message:t||""})},this.setTimeAndLevelOnMessage=function(e,t){return new Date+" ["+e+"] "+t},this.printLogs=function(){var t="";return this._logs.forEach(function(e){console[e.type](e.message),t+=" "+e.message}),t}}),window.COOLADATA_CODE=function(P){return{init:function(){var n,a,o;P.cooladata||(n=P.cooladata||[]).__SV||((P.cooladata=n)._i=[],n.init=function(e,t,i){var r=n;for(void 0!==i?r=n[i]=[]:i="cooladata",a=["trackEvent","trackEventLater","trackPageload","flush","setConfig"],o=0;o<a.length;o++)!function(e,t){var i=t.split(".");2==i.length&&(e=e[i[0]],t=i[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(r,a[o]);n._i.push([e,t,i])},n.__SV=1.2),function(a){var t,i=Array.prototype,n=Function.prototype,e=Object.prototype,l=i.slice,m=e.toString,c=e.hasOwnProperty,u=P.console,r=P.navigator,d=P.document,o=r.userAgent,s="http:"==d.location.protocol?"http://":"https://",e=a&&a.__SV||0,_=P.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,A=!_&&-1==o.indexOf("MSIE")&&-1==o.indexOf("Mozilla"),E={},T={api_host:"api.cooladata.com",loaded:function(){},img:!1,http_post:!1,track_pageload:!1,stored_user_key_name:"medallia_journeys_id",user_identifier_property:"user_id",protocol:!1},f=!1;function p(e){return e&&(e.preventDefault=p.preventDefault,e.stopPropagation=p.stopPropagation),e}!function(){n.bind;var o=i.forEach,e=(i.indexOf,Array.isArray),s={},r=E.each=function(e,t,i){if(null!=e)if(o&&e.forEach===o)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,n=e.length;r<n;r++)if(r in e&&t.call(i,e[r],r,e)===s)return}else for(var a in e)if(c.call(e,a)&&t.call(i,e[a],a,e)===s)return};E.extend=function(i){return r(l.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(i[t]=e[t])}),i},E.isArray=e||function(e){return"[object Array]"===m.call(e)},E.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},E.isArguments=function(e){return!(!e||!c.call(e,"callee"))},E.toArray=function(e){return e?e.toArray?e.toArray():E.isArray(e)||E.isArguments(e)?l.call(e):E.values(e):[]},E.values=function(e){var t=[];return null==e||r(e,function(e){t[t.length]=e}),t}}(),E.isObject=function(e){return e===Object(e)&&!E.isArray(e)},E.isUndefined=function(e){return void 0===e},E.isString=function(e){return"[object String]"==m.call(e)},E.JSONEncode=function(e){var d=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},_=function(e,t){var i,r="",n=0,a="",o="",s=r,l=[],u=t[e];switch(typeof(u=u&&"object"==typeof u&&"function"==typeof u.toJSON?u.toJSON(e):u)){case"string":return d(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(r+="    ",l=[],"[object Array]"===m.apply(u)){for(i=u.length,n=0;n<i;n+=1)l[n]=_(n,u)||"null";return o=0===l.length?"[]":r?"[\n"+r+l.join(",\n"+r)+"\n"+s+"]":"["+l.join(",")+"]",r=s,o}for(a in u)c.call(u,a)&&(o=_(a,u))&&l.push(d(a)+(r?": ":":")+o);return o=0===l.length?"{}":r?"{"+l.join(",")+s+"}":"{"+l.join(",")+"}",r=s,o}};return _("",{"":e})},E.strip_empty_properties=function(e){var i={};return E.each(e,function(e,t){E.isString(e)&&0<e.length&&(i[t]=e)}),i},E.base64Encode=function(e){var u={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,r,n,a,o,s="",l=0;for(e=u._utf8_encode(e);l<e.length;)r=(o=e.charCodeAt(l++))>>2,n=(3&o)<<4|(t=e.charCodeAt(l++))>>4,a=(15&t)<<2|(i=e.charCodeAt(l++))>>6,o=63&i,isNaN(t)?a=o=64:isNaN(i)&&(o=64),s=s+this._keyStr.charAt(r)+this._keyStr.charAt(n)+this._keyStr.charAt(a)+this._keyStr.charAt(o);return s},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}};return u.encode(e)},E.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},E.HTTPBuildQuery=function(e,t){var i,r,n=[];return void 0===t&&(t="&"),E.each(e,function(e,t){i=encodeURIComponent(e.toString()),r=encodeURIComponent(t),n[n.length]=r+"="+i}),n.join(t)},E.UUID=(t=function(){for(var e=+new Date,t=0;e==+new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(screen.height*screen.width).toString(16);return t()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,i=o,n=[],r=0;function a(e,t){for(var i=0,r=0;r<t.length;r++)i|=n[r]<<8*r;return e^i}for(e=0;e<i.length;e++)t=i.charCodeAt(e),n.unshift(255&t),4<=n.length&&(r=a(r,n),n=[]);return(r=0<n.length?a(r,n):r).toString(16)}()+"-"+e+"-"+t()}),E.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")},E.register_event=(p.preventDefault=function(){this.returnValue=!1},p.stopPropagation=function(){this.cancelBubble=!0},function(e,t,i,r){var n,a,o;e?e.addEventListener&&!r?e.addEventListener(t,i,!1):(t=e[r="on"+t],e[r]=(n=e,a=i,o=t,function(e){if(e=e||p(P.event)){var t,i=!0;return E.isFunction(o)&&(t=o(e)),e=a.call(n,e),i=!1===t||!1===e?!1:i}})):u.log("No valid element provided to register_event")}),E.info={campaignParams:function(){var t,e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),i={};return E.each(e,function(e){(t=E.getQueryParam(d.URL,e)).length&&(i[e]=t)}),i},referringDomain:function(e){e=e.split("/");return 3<=e.length?e[2]:""},properties:function(){return E.extend(E.strip_empty_properties({session_screen_size:P.screen.width+"x"+P.screen.height,session_dua:r.userAgent,session_platform:r.platform,referring_url:d.referrer,referring_domain:E.info.referringDomain(d.referrer),page_title:d.title,page_url:d.location.href}),{tracker_type:"javascript",tracker_version:"2.2.20"})},pageviewInfo:function(e){return E.strip_empty_properties({event_timestamp_epoch:+new Date})}};function g(e,t,i){var r,n="cooladata"===i?a:a[i];if(!n||E.isArray(n))return(r=new I)._init(e,t,i),E.isUndefined(n)||r._execute_array(n),r;u.log("You have already initialized "+i)}var I=function(){};if(I.prototype.init=function(e,t,i){if(void 0!==i){if("cooladata"!==i){t=g(e,t,i);return(a[i]=t)._loaded(),t}u.log("You must initialize the main cooladata object right after you include the Cooladata js snippet")}else u.log("You must name your new library: init(token, config, name)")},I.prototype._init=function(e,t,i){this.__loaded=!0,this.__SV=!0,this.config={},this.eventsArray=[],this.set_config(E.extend({},T,{token:e.app_key,img:e.img_src_get_request,session_id:e.session_id,http_post:e.http_post,track_pageload:e.track_pageload,user_identifier_property:e.user_identifier_property,stored_user_key_name:e.stored_user_key_name,name:i}));var r=!e.protocol||"http"!=e.protocol&&"https"!=e.protocol?s:e.protocol+"://",i=e.api_host||T.api_host;this.set_config({api_host:r+i});i=e.user_id||this.getStoredUid()||E.UUID();this.storeUid(i),this.set_config({user_id:i}),this.__dom_loaded_queue=[],this.__request_queue=[],e.custom_event_handler&&(this.__customEventHandler=e.custom_event_handler)},I.prototype.getStoredUid=function(){var e=this.get_config("stored_user_key_name");if("undefined"!=typeof Storage&&P.localStorage.getItem(e))return P.localStorage.getItem(e);for(var t=e+"=",i=d.cookie.split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},I.prototype.storeUid=function(e){var t=this.get_config("stored_user_key_name");if("undefined"==typeof Storage){var i=new Date;i.setTime(i.getTime()+31536e6);var i="; expires="+i.toGMTString(),r=["com","org","net","int","edu","gov","mil","biz"],n=P.location.host.split("."),a="";if("www"==n[0]||4==n.length)n.shift(),a=n.join(".");else switch(n.length){case 2:a=n.join(".");break;case 3:for(var o=r.length;o--;)if(r[o]===n[2]){n.shift(),a=n.join(".");break}""==a&&(a=n.join("."))}d.cookie=t+"="+e+i+";domain=."+a+";path=/; SameSite=Lax; Secure"}else P.localStorage.setItem(t,e)},I.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageload")&&this.track_pageload()},I.prototype._dom_loaded=function(){E.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),E.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue},I.prototype._track_dom=function(e,t){if(this.get_config("img"))return u.log("You can't use DOM tracking functions with img = true."),!1;if(!f)return this.__dom_loaded_queue.push([e,t]),!1;e=(new e).init(this);return e.track.apply(e,t)},I.prototype.trackEventLater=function(e,t){var i;void 0!==e?(t=t||{},i=new Date,(i=E.extend({},E.info.properties(),E.info.campaignParams(),{event_name:e,event_timestamp_epoch:i.getTime().toString(),event_timezone_offset:i.getTimezoneOffset()/60*-1,session_id:this.get_config("session_id")}))[this.get_config("user_identifier_property")]=this.get_config("user_id"),i=E.extend(i,t),this.eventsArray.push(i)):u.log("No event name provided to cooladata.trackEventLater")},I.prototype.flush=function(){this.get_config("api_host"),this.get_config("token");var e={events:this.eventsArray},e=E.JSONEncode(e);this._send_request(e),this.eventsArray=[]},I.prototype._onError=function(e,t){},I.prototype._send_request=function(e,i){if(A)this.__request_queue.push(arguments);else{function t(){var e=P.navigator.userAgent;return-1<e.indexOf("MSIE ")&&1!==e.split("MSIE ")[1].charAt(0)}var r=!1;if(1400<e.length&&(r=!0),this.__customEventHandler&&this.__customEventHandler.handleRequest){var n=null;return r||!t()&&!this.get_config("img")?_&&(n=this.get_config("http_post")||r?"post":"get"):n="image",void this.__customEventHandler.handleRequest(this,e,n)}var a,o,s,l,n=this.get_config("api_host")+"/v1/"+this.get_config("token")+"/track";r||!t()&&!this.get_config("img")?_?(o=null,this.get_config("http_post")||r?o="data="+encodeURIComponent(e):(e={data:E.base64Encode(e)},n+="?"+E.HTTPBuildQuery(e)),a=new XMLHttpRequest,this.get_config("http_post")||r?(a.open("POST",n,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")):a.open("GET",n,!0),a.withCredentials=!0,a.onreadystatechange=function(e){var t;4===a.readyState&&(200===a.status?i&&i():(t="Bad HTTP status: "+a.status+" "+a.statusText,u.log(t)))},a.send(o)):((o=d.createElement("script")).type="text/javascript",o.async=!0,o.defer=!0,o.src=n,(l=d.getElementsByTagName("script")[0]).parentNode.insertBefore(o,l)):(n=(s=this).get_config("api_host")+"/egw/5/"+this.get_config("token")+"/track/__cool.gif",n+="?data="+(e=E.base64Encode(e)),(l=d.createElement("img")).onerror=function(){s._onError(e,i)},l.width=1,l.height=1,l.src=n)}},I.prototype._execute_array=function(e){var t,i=[],r=[],n=[];E.each(e,function(e){e&&(t=e[0],"function"==typeof e?e.call(this):(E.isArray(e)&&"alias"===t?i:!E.isArray(e)||-1==t.indexOf("track")&&-1==t.indexOf("flush")||"function"!=typeof this[t]?r:n).push(e))},this);e=function(e,t){E.each(e,function(e){this[e[0]].apply(this,e.slice(1))},t)};e(i,this),e(r,this),e(n,this)},I.prototype.push=function(e){this._execute_array([e])},I.prototype.trackEvent=function(e,t,i){var r;void 0!==e?(t=t||{},r=new Date,(r=E.extend({},E.info.properties(),E.info.campaignParams(),{event_name:e,event_timestamp_epoch:r.getTime().toString(),event_timezone_offset:r.getTimezoneOffset()/60*-1,session_id:this.get_config("session_id")}))[this.get_config("user_identifier_property")]=this.get_config("user_id"),r={events:[r=E.extend(r,t)]},r=E.JSONEncode(r),this._send_request(r,i)):u.log("No event name provided to cooladata.trackEvent")},I.prototype.track_pageload=function(e){void 0===e&&(e=d.location.href),this.trackEvent("page_load",E.info.pageviewInfo(e))},I.prototype.set_config=function(e){E.isObject(e)&&E.extend(this.config,e)},I.prototype.get_config=function(e){return this.config[e]},I.prototype.toString=function(){var e=this.get_config("name");return e="cooladata"!==e?"cooladata."+e:e},E.toArray=E.toArray,E.isObject=E.isObject,E.JSONEncode=E.JSONEncode,E.info=E.info,I.prototype.init,I.prototype.track_event=I.prototype.trackEvent,I.prototype.track_event_later=I.prototype.trackEventLater,I.prototype.flush,I.prototype.track_pageload,I.prototype.set_config,I.prototype.get_config,I.prototype.toString,E.isUndefined(a))!function(){if(!E.isUndefined(u)&&u){var t=["Cooladata error:"].concat(E.toArray(arguments));try{u.error.apply(u,t)}catch(e){E.each(t,function(e){u.error(e)})}}}("'cooladata' object not initialized. Ensure you are using the latest version of the Cooladata JS Library along with the snippet we provide.");else if(a.__loaded||a.config)u.log("Cooladata library has already been downloaded at least once.");else if(e<1.1)u.critical("Version mismatch; please ensure you're using the latest version of the Cooladata code snippet.");else{var S={};if(E.each(a._i,function(e){var t;e&&E.isArray(e)&&(t=e[e.length-1],e=g.apply(this,e),S[t]=e)}),a.init=function(e,t,i){i?a[i]||(a[i]=S[i]=g(e,t,i),a[i]._loaded()):(i=a,S.cooladata?i=S.cooladata:e&&(i=g(e,t,"cooladata"))&&i._loaded(),P.cooladata=a=i,E.each(S,function(e,t){"cooladata"!==t&&(a[t]=e)}),a._=E)},a.init(),E.each(S,function(e){e._loaded()}),d.addEventListener)"complete"==d.readyState?L():d.addEventListener("DOMContentLoaded",L,!1);else if(d.attachEvent){d.attachEvent("onreadystatechange",L);e=!1;try{e=null==P.frameElement}catch(a){}d.documentElement.doScroll&&e&&!function t(){try{d.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}L()}()}E.register_event(P,"load",L,!0)}function L(){L.done||(L.done=!0,A=!(f=!0),E.each(S,function(e){e._dom_loaded()}))}}(P.cooladata)}}}(window,document),window.KAMPYLE_COOLADATA=function(s,l){var u,d,_="uwbhzazjt4.execute-api.eu-west-1.amazonaws.com/Production",m={PROD:"qceuv8449dzg58ptt1bhda9g8ue19c7s",QA:"lf5shxz66ckwmizs7kowapgs2rkoejcl"},t={},c=KAMPYLE_CONSTANT.PLACEHOLDERS.COOLADATA_SRC_PREFIX+KAMPYLE_CONSTANT.SRC.COOLADATA,A={neb_pageView:{eventId:"nebula_page_view"},neb_inviteAccepted:{eventId:"nebula_invite_accepted"},neb_inviteDeclined:{eventId:"nebula_invite_declined"},neb_showInvitation:{eventId:"nebula_invitation_show",memoryDataKey:"invitationTriggeringData"},neb_feedbackSubmitted:{eventId:"nebula_form_submitted"},neb_formShown:{eventId:"nebula_form_show"},neb_buttonClicked:{eventId:"nebula_button_clicked"},neb_sdkLoadForm:{eventId:"nebula_load_form_bycode"},neb_sdkShowForm:{eventId:"nebula_code_trigger_form"},neb_routeToForm:{eventId:"nebula_route_to_form"},neb_formClosed:{eventId:"nebula_form_closed"},neb_popupBlocked:{eventId:"nebula_popup_blocked"},neb_skipInvitation:{eventId:"nebula_invitation_skipped"},neb_formPageShown:{eventId:"nebula_form_page_displayed"},neb_captureInit:{eventId:"nebula_capture_init"},neb_captureImageClicked:{eventId:"nebula_capture_image_clicked"},MDigital_Capture_Cancelled:{eventId:"nebula_cancel_capture_clicked"},neb_load_form_preload_proximity:{eventId:"nebula_load_form_preload_proximity",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_cancel_capture_clicked:{eventId:"nebula_cancel_capture_clicked"},neb_load_form_form_reload:{eventId:"nebula_load_form_form_reload",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_button_displayed:{eventId:"nebula_button_displayed",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_invitation_loaded:{eventId:"nebula_invitation_loaded",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_invitation_ready:{eventId:"nebula_invitation_ready",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_form_loaded:{eventId:"nebula_form_loaded",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_formReady:{eventId:"nebula_form_ready",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_sdkSurveyDisplayed:{eventId:"nebula_code_survey_displayed"},neb_beforeHttpGetRequest:{eventId:"nebula_before_http_get_request",eventDataKey:"httpRequestData"},neb_afterHttpGetRequestOnError:{eventId:"nebula_after_http_get_request_on_error",eventDataKey:"httpRequestData"},neb_afterHttpGetRequestOnErrorStatusCode:{eventId:"nebula_after_http_get_request_on_error_status_code",eventDataKey:"httpRequestData"},neb_afterHttpGetRequestOnTimeout:{eventId:"nebula_after_http_get_request_on_timeout",eventDataKey:"httpRequestData"},neb_afterHttpGetRequest:{eventId:"nebula_after_http_get_request",eventDataKey:"httpRequestData"},MDigital_updatingSbtServer:{eventId:"MDigital_updating_sbt_server",eventDataKey:"dataObjForSbt",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_settingIdentifierValueOnMemory:{eventId:"MDigital_setting_identifier_value_on_memory",eventDataKey:"hasIdentifierValue",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_shouldNotSyncIdentifier:{eventId:"MDigital_should_not_sync_identifier",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_beforeHttpPostRequest:{eventId:"nebula_before_http_post_request",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequestOnError:{eventId:"nebula_after_http_post_request_on_error",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequest:{eventId:"nebula_after_http_post_request",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequestOnErrorStatusCode:{eventId:"nebula_after_http_post_request_on_error_status_code",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequestOnTimeout:{eventId:"nebula_after_http_post_request_on_timeout",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_updateTargetingWithDeclinedDateInviteDeclined:{eventId:"MDigital_update_targeting_with_declined_date_invite_declined",eventDataKey:"declinedDate",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_updateTargetingWithSubmittedDate:{eventId:"MDigital_update_targeting_with_submitted_date",eventDataKey:"submittedDate",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_updateTargetingWithDeclinedDateFormClosed:{eventId:"MDigital_update_targeting_with_declined_date_form_closed",eventDataKey:"declinedDate",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_initUserIdentifier:{eventId:"nebula_init_user_identifier",eventDataKey:"hasIdentifierValue"},neb_initUserIdentifierOnExtraData:{eventId:"nebula_init_user_identifier_on_extra_data",eventDataKey:"hasIdentifierValue"},neb_eventDispatcherError:{eventId:"nebula_eventDispatcherError",eventDataKeys:["errorMessage","errorStack","additionalInfo"]},neb_feedbackUUIDisNull:{eventId:"nebula_feedbackUuidIsNull"},neb_submitFeedbackFailed:{eventId:"nebula_submitFeedbackFailed",eventDataKeys:["uuid","errorMessage","errorStack"]},MDigital_Form_Next_Page:{eventId:"MDigital_Form_Next_Page",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_Form_Back_Page:{eventId:"MDigital_Form_Back_Page",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_Form_Close_No_Submit:{eventId:"MDigital_Form_Close_No_Submit",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_ThankYou_Displayed:{eventId:"MDigital_ThankYou_Displayed",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_ThankYou_Close:{eventId:"MDigital_ThankYou_Close",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_warning:{eventId:"MDigital_warning",eventDataKey:"message"},MDigital_couldNotFetchData:{eventId:"MDigital_couldNotFetchData",eventDataKey:"errorData"},MDigital_couldNotLoadFormApplication:{eventId:"MDigital_couldNotLoadFormApplication",eventDataKey:"errorData"},MDigital_DynamicOnsiteInitializedSuccessfully:{eventId:KAMPYLE_CONSTANT.EVENTS.MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY,provision:KAMPYLE_CONSTANT.PROVISIONS.DYNAMIC_ONSITE_EVENTS},MDigital_noJsonModalShown:{eventId:"mdigital_noDataMessageDisplayed",eventDataKey:"additionalInfo"},screenCaptureRetake:{eventId:KAMPYLE_CONSTANT.EVENTS.SCREEN_CAPTURE_RETAKE},screenCaptureDelete:{eventId:KAMPYLE_CONSTANT.EVENTS.SCREEN_CAPTURE_DELETE}};function E(){Object.keys(A).forEach(function(e){e=A[e];o(e)&&(t[e.eventId]=0)})}function i(e){var t=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?e.feedbackUUID:e.feedbackCorrelationUUID,t={enviroment:e.enviroment,accountId:e.accountId,url:e.pageURL,websiteId:e.websiteId,feedback_uuid:t,formId:e.formId||null,formTriggerType:e.formTriggerType||null,kampyle_data:e.kampyle_data||null,cookie_size:e.cookie_size||null,kampyle_version:e.kampyle_version||"",onsite_version:s.MDIGITAL.version||"0.0.0.0",history_length:s.history.length,event_local_timestamp:KAMPYLE_UTILS.getCurrentTimestamp(),position:e.position||null,isUserIdentified:!!KAMPYLE_DATA.getMemoryData("identifierValue"),feedback_correlation_uuid:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?e.feedbackCorrelationUUID:null};return"nebula_form_page_shown"===e.eventId&&(t.pageNumber=e.pageNumber),"nebula_route_to_form"===e.eventId&&(t.destinationForm=e.formId),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&e.formId&&(t.Web_form_lang=MDIGITAL.LOCALIZATION.getFormLanguage(e.formId)||null),r(e,t),t}function r(e,t){var i=A[e.eventName],r=i?i.eventDataKeys:null;if(r)for(var n=0;n<r.length;n++)t[r[n]]=e[r[n]]||null}function n(e,t){if(!e||!t)return null;var i,r,n=Object.assign({},n,t);for(i in d)n[i]=d[i];for(r in A[e])n[r]=A[e][r];t=L(e,KAMPYLE_UTILS.getAllKampyleData(),n);return n.kampyle_data=t,n.cookie_size=KAMPYLE_UTILS.getByteSize(l.cookie),n.kampyle_version=s.MDIGITAL.version||"0.0.0.0",n.pageURL=location.href,n.eventName=e,n}function T(e,t){var i=A[e];if(!i||!a(i)||p(i))return!1;t=n(e,t=i.formatDataFunc&&"function"==typeof i.formatDataFunc?i.formatDataFunc.call(this,t):t),KAMPYLE_COOLADATA.kampyleSendCoolaData(t)}function a(e){return!e.provision||!!KAMPYLE_FUNC.checkProvision(e.provision)}function o(e){return"number"==typeof e.rateLimit&&0<e.rateLimit}function f(e){e=t[e];return"number"==typeof e?e:null}function p(e){var t=f(e.eventId);return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_EVNETS_LIMIT)&&"number"==typeof t&&t>=e.rateLimit}function g(e){return null===f(e)?null:++t[e]}function I(e,t){try{S().trackEvent(e,t),null!==f(e)&&g(e)}catch(e){console.warn(e)}}function S(){return u?s.cooladata[KAMPYLE_CONSTANT.COOLADATA_INSTANCE_NAME]:s.cooladata}function L(e,t,i){i=i||{};var r=A[e].memoryDataKey,n=KAMPYLE_DATA.getMemoryData(r);n&&(t[r]=n);e=A[e].eventDataKey,i=i[e];return i&&(t[e]=i),t}return{getDataToSend:i,kampyleSendCoolaData:function(e){if(!e||!s.cooladata)return!1;var t=i(e);return I(e.eventId,t),!0},formatData:n,appendDataByEventName:L,addEventDataKeys:r,rateLimitCounterMap:t,isEventProvisioned:a,isEventDefinedAsRateLimited:o,getEventCallsCounter:f,isRateLimitExceeded:p,increaseEventCallsCounter:g,initRateLimiting:E,init:function(){try{d={userid:KAMPYLE_UTILS.kampyleGetUserId()};var e={cookie_expiration:KAMPYLE_DATA.getCookieExpiration(),app_key:KAMPYLE_UTILS.isDebugMode()?m.QA:m.PROD,track_pageload:!1,img_src_get_request:!0,api_host:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.API_GATEWAY)?_:r=(r=KAMPYLE_CONSTANT.PLACEHOLDERS.COOLDATA_API_HOST).endsWith("/")?r.substr(0,r.length-1):r};u=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_UPGRADE);try{u?(COOLADATA_CODE.init(),s.cooladata.init(e,null,KAMPYLE_CONSTANT.COOLADATA_INSTANCE_NAME)):(s.cooladata||(t=l,(n=s.cooladata||[]).__SV||((s.cooladata=n)._i=[],n.init=function(e,t,i){var r=n;for(void 0!==i?r=n[i]=[]:i="cooladata",a=["trackEvent","trackEventLater","trackPageload","flush","setConfig"],o=0;o<a.length;o++)!function(e,t){var i=t.split(".");2==i.length&&(e=e[i[0]],t=i[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(r,a[o]);n._i.push([e,t,i])},n.__SV=1.2,(i=t.createElement("script")).type="text/javascript",i.async=!0,i.src=c,(t=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,t))),s.cooladata.init(e)),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_EVNETS_LIMIT)&&(E(),KAMPYLE_EVENT_DISPATCHER.subscribeOnce(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_SDK_PAGE_VIEW,E))}catch(e){console.warn(e)}return KAMPYLE_UTILS.initEventSubscriptions(A,T),!0}catch(e){console.warn(e)}var t,n,i,a,o,r},triggerCooladataEvent:T,getCooladataInstance:S,getUserId:function(){var e;try{e=KAMPYLE_DATA.getData("cd_user_id")||S().config.user_id||null}catch(e){console.warn(e)}return e},triggerCooladataEventDispatcherError:function(e){if(!e||!s.cooladata)return!1;var t=n("neb_eventDispatcherError",e),e=i(t);return I(t.eventId,e),e}}}(window,document),window.KAMPYLE_COMMON=function(n,r){var a='[data-tips]{position:relative;text-decoration:none}[data-tips]:after,[data-tips]:before{position:absolute;z-index:100;opacity:0}[data-tips]:after{content:attr(data-tips);line-height:20px;padding:0 10px;font-size:12px;text-align:center;color:#fff;background:#222;border-radius:5px;text-shadow:0 0 5px #000;-moz-box-shadow:0 0 5px rgba(0, 0, 0, .3);-webkit-box-shadow:0 0 5px rgba(0, 0, 0, .3);box-shadow:0 0 5px rgba(0, 0, 0, .3);white-space:normal;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:135px;word-wrap:break-word}[data-tips]:before{content:"";width:0;height:0;border-width:6px;border-style:solid}[data-tips]:hover:after,[data-tips]:hover:before{opacity:1}[data-tips].top-tip:after,[data-tips].top-tip:before{-webkit-transition:bottom .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:bottom .25s ease-in-out, opacity .25s ease-in-out;transition:bottom .25s ease-in-out, opacity .25s ease-in-out;bottom:90%;left:-9999px;margin-bottom:12px}[data-tips].top-tip:before{border-color:#222 transparent transparent;margin-bottom:0}[data-tips].top-tip:hover:after,[data-tips].top-tip:hover:before{bottom:100%;left:0}[data-tips].top-tip:hover:before{left:15px}[data-tips].bottom-tip:after,[data-tips].bottom-tip:before{-webkit-transition:top .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:top .25s ease-in-out, opacity .25s ease-in-out;transition:top .25s ease-in-out, opacity .25s ease-in-out;top:90%;left:-9999px;margin-top:12px}[data-tips].bottom-tip:before{border-color:transparent transparent #222;margin-top:0}[data-tips].bottom-tip:hover:after,[data-tips].bottom-tip:hover:before{top:100%;left:0}[data-tips].bottom-tip:hover:before{left:15px}[data-tips].left-tip:after,[data-tips].left-tip:before{-webkit-transition:left .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:left .25s ease-in-out, opacity .25s ease-in-out;transition:left .25s ease-in-out, opacity .25s ease-in-out;top:-9999px;left:96%;margin-left:12px}[data-tips].left-tip:before{border-color:transparent #222 transparent transparent;margin-left:0}[data-tips].left-tip:hover:after,[data-tips].left-tip:hover:before{left:100%;top:0}[data-tips].left-tip:hover:before{top:7px}[data-tips].right-tip:after,[data-tips].right-tip:before{-webkit-transition:right .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:right .25s ease-in-out, opacity .25s ease-in-out;transition:right .25s ease-in-out, opacity .25s ease-in-out;top:-9999px;right:96%;margin-right:12px}[data-tips].right-tip:before{border-color:transparent transparent transparent #222;margin-right:0}[data-tips].right-tip:hover:after,[data-tips].right-tip:hover:before{right:100%;top:0}[data-tips].right-tip:hover:before{top:7px}',o=".scTitle:focus, .scParagraph:focus, .sc-widget-footer-cancel:focus, .sc-widget-footer-capture:focus, p:focus { border: 2px solid #8e8e93 !important; box-shadow: 0 0 7px #8e8e93 !important;}",s={submitScreenCaptureLabel:"Capture Image",cancelScreenCaptureLabel:"Cancel",instructionsScreenCapture:'<h2 class="scTitle" style="font-size: 1.5em;">Screen Capture</h2><p class="scParagraph" style="font-size: 1em; margin-top: 10px;">Drag the cursor around the area you want to highlight.<br>Press Capture Image to take the snapshot and return to your feedback</p>',submitScreenCaptureTooltip:"Take snapshot",cancelScreenCaptureTooltip:"Back to Feedback"},l=["<html>","<head>",'<link rel="stylesheet" type="text/css" href="'+KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.OPEN_SANS+'" />','<script type="text/javascript">',"function resizeIframe() {",'parent.document.getElementById("nebScIframe").height = document.getElementById("sc-widget").scrollHeight + 15;','var SCWidget = parent.document.getElementById("nebScIframe");',"if (SCWidget) {","SCWidget.focus();","}","}","<\/script>","<style>{tooltipStyles} {buttonsOutlineStyle}</style>","</head>",'<body onload="resizeIframe();" style="margin:0px;overflow:hidden;">','<div id="sc-widget" class="sc-widget" style="{widget}">','<div class="sc-widget-content" style="{widgetContent}">',"{{instructionsScreenCapture}}","</div>",'<div class="sc-widget-footer" style="{widgetFooter}">','<button onclick="parent.KAMPYLE_SCREEN_CAPTURE.getUserSnapInstance().close();" class="sc-widget-footer-cancel top-tip" data-tips="{{cancelScreenCaptureTooltip}}" style="{widgetFooterBtn} {widgetFooterCancel}">',"{{cancelScreenCaptureLabel}}","</button>",'<button onclick="parent.KAMPYLE_COMMON.onSubmitScreenCaptureClick();" class="sc-widget-footer-capture top-tip" data-tips="{{submitScreenCaptureTooltip}}" style="{widgetFooterBtn} {widgetFooterCapture}">','<img alt="Loading" src="'+KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.KLOADER+'" id="widgetFooterCaptureImg" style="width:20px;height:20px;display: none;" />','<span id="widgetFooterCaptureText">{{submitScreenCaptureLabel}}</span>',"</button>","</div>","</div>","</body></html>"].join(" "),u={overlay:{position:"fixed",top:"0",left:"0","z-index":"2147483646 !important",right:"0",bottom:"0",display:"block","pointer-events":"none"},widget:{"font-family":"'Open Sans'",border:"1px solid #999",width:"285px","border-radius":"5px",position:"absolute","z-index":"2147483647 !important","pointer-events":"auto",background:"#FFFFFF","text-align":"center","line-height":"20px"},widgetContent:{padding:"10px 14px",outline:"none"},widgetFooter:{"font-family":"'Open Sans' !important",padding:"10px","font-size":"14px","padding-top":"0","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal","letter-spacing":"normal","line-height":"20px"},widgetFooterBtn:{height:"34px",margin:"0 0 2px 5px","min-width":"100px",padding:"6px 12px",display:"inline-block","border-radius":"4px",cursor:"pointer","transition-delay":"0s","transition-duration":"0.3s","transition-property":"all","transition-timing-function":"ease","vertical-align":"middle","white-space":"nowrap","word-spacing":"0px",border:"none",color:"#FFF"},widgetFooterCancel:{background:"#A2A2A2",color:"#FFF"},widgetFooterCapture:{"margin-left":"5px",background:"#020202",color:"#FFF"}};function d(e){var t=u;return e&&(t.widget.background=e.backgroundColor||t.widget.background,t.widgetFooterCapture.background=e.submitButtoncolor||t.widgetFooterCapture.background,t.widgetFooterCancel.background=e.closeButtoncolor||t.widgetFooterCancel.background,t.widgetFooterCancel.color=e.closeButtonTextColor||t.widgetFooterBtn.color,t.widgetFooterCapture.color=e.submitButtonTextColor||t.widgetFooterBtn.color),t}function _(e){var t=s;if(e){for(var i in t)e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(t[i]=e[i]);return t}}function t(){var e=r.getElementById("nebScIframe").contentDocument,t=e.getElementById("widgetFooterCaptureImg");t&&(t.style.display="inline",(e=e.getElementById("widgetFooterCaptureText"))&&(e.style.display="none"))}function m(e){var t,i,r=l,n=_((e=e||{}).screenCaptureSettings);for(t in n&&n.submitScreenCaptureTooltip||(r=r.replace('data-tips="{{submitScreenCaptureTooltip}}"',"")),n&&n.cancelScreenCaptureTooltip||(r=r.replace('data-tips="{{cancelScreenCaptureTooltip}}"',"")),n)s.hasOwnProperty(t)&&(r=r.replace("{{"+t+"}}",s[t]));for(i in d(e.screenCaptureSettings))r=KAMPYLE_UTILS.replaceAll(r,"{"+i+"}",KAMPYLE_UTILS.styleObjToInline(u[i]));return r=r.replace("{tooltipStyles}",a).replace("{buttonsOutlineStyle}",o),KAMPYLE_UTILS.htmlDecode(r)}return{loadForm:function(e){return KAMPYLE_ONSITE_SDK.loadForm(e)},showForm:function(e,t){return KAMPYLE_ONSITE_SDK.showForm(e,t)},closeForm:function(e){return KAMPYLE_ONSITE_SDK.closeForm(e)},createFormUrl:function(e,t){e+="?formId="+t,e+="&type=live",e+="&isMobile="+KAMPYLE_DATA.isMobile();var i=n.location.href,r=i.split("?");return r&&r.length&&(i=r[0]),e+="&referrer="+encodeURIComponent(i),(i=KAMPYLE_DATA.getMemoryData("region"))&&(e+="&region="+i),KAMPYLE_DATA.isFeatureEnabled("WCAG")&&(e+="&isWCAG=true"),e+="&displayType="+KAMPYLE_DATA.getDisplayType(KAMPYLE_DATA.getFormData(t))},createScreenCaptureWidget:function(e,t){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){var i=m(e),e=r.createElement("iframe");return e.id="nebScIframe",KAMPYLE_UTILS.setElementStyle(e,{width:"310px",bottom:"20px",left:"20px",zIndex:2147483647,position:"fixed"}),KAMPYLE_UTILS.setElementStyle(e,{display:"block"},!0),e.frameBorder="0",e.sandbox="allow-top-navigation allow-same-origin allow-scripts",t?t.parentNode.insertBefore(e,t):r.body.appendChild(e),e.contentWindow&&(e.contentWindow.contents=i),e.src='javascript:window["contents"]',setTimeout(function(){r.activeElement.blur()},100),!0}},isScreenCaptureEnabled:function(e){var t=KAMPYLE_UTILS.getBrowser();return!!(e=KAMPYLE_DATA.getFormData(e))&&(e=KAMPYLE_DATA.getDisplayType(e),!!t&&("MSIE"!==t.name||8<Number(t.version))&&!!e&&"popup"!==e)},onCancelScreenCaptureClick:function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_cancelCaptureClicked",{formId:KAMPYLE_DATA.getMemoryData("currentFormId"),feedbackCorrelationUUID:KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID)})},onSubmitScreenCaptureClick:function(){t();var e=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_V4)||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?"submit":"sendReport";n.UserSnap.api[e]()},getUrlPrefix:function(){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ON_PREM_HYBRID)?MDIGITAL.ON_PREM.getPackageRoot()+"/":KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX},showScreenCaptureSpinner:t,overrideDefaultScreenCaptureStyles:d,formatScreenCaptureWidget:m,overrideDefaultScreenCaptureTexts:_,getFormFailureCause:function(e){var t,i=KAMPYLE_DATA.getFormState(e),r=null;for(t in KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE){var n=KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE[t];if(!0===i[n]){r=n;break}}return r}}}(window,document),window.KAMPYLE_THERMO_TEALEAF_FUNC={isTealeafEnabled:function(){return!!KAMPYLE_UTILS.kampyleGetCookie("TLTSID")},getTealeafData:function(){return KAMPYLE_THERMO_TEALEAF_FUNC.isTealeafEnabled()?{sid:KAMPYLE_UTILS.kampyleGetCookie("TLTSID")}:null}},window.KAMPYLE_CLICKTALE_FUNC={isClicktaleEnabled:function(){return!!window.ClickTale&&!!window.ClickTale.KampyleLink},getClicktaleData:function(){return KAMPYLE_CLICKTALE_FUNC.isClicktaleEnabled()&&window.ClickTale.KampyleLink!==KAMPYLE_CONSTANT.NOT_RECORDING?{recordingUrl:window.ClickTale.KampyleLink}:null}},window.KAMPYLE_SESSIONCAM={isSessionCamEnabled:function(){return!!window.sessionCamRecorder},getSessionCamData:function(){if(KAMPYLE_SESSIONCAM.isSessionCamEnabled()){var e=window.sessionCamRecorder.sessionId();if(e)return{recordingUrl:"https://console.sessioncam.com/Console/Recordings/PlaybackSession?sessionId="+e}}return null},sendCustomParam:function(e,t){window.sessioncamConfiguration=window.sessioncamConfiguration||{},window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects||[],window.sessioncamConfiguration.customDataObjects.push({key:e,value:t})},init:function(){KAMPYLE_EVENT_DISPATCHER.subscribe("neb_feedbackSubmitted",this.sessionCamFormSubmittedCallback)},sessionCamFormSubmittedCallback:function(e,t){"neb_feedbackSubmitted"===e&&KAMPYLE_SESSIONCAM.sendCustomParam("nebula_feedback_uuid",t.feedbackUUID)}},window.KAMPYLE_SCREEN_CAPTURE=function(i,r){function t(){this._widgetVersion="V2",this.init=function(){this.determineWidgetVersion()},this.determineWidgetVersion=function(){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?(this._widgetVersion=l,this._usersnapOnpremWidgetLoaderPath=KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),"usersnapOnpremWidgetLoaderPath")):KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_V4)&&(this._widgetVersion=u)},this.close=function(){var e;switch(this._widgetVersion){case l:case u:e="close";break;default:e="closeUsersnap"}i.UserSnap.api[e]()},this.getUrl=function(){if(this._widgetVersion===l)return KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX+this._usersnapOnpremWidgetLoaderPath;var e=KAMPYLE_CONSTANT.PLACEHOLDERS[this._widgetVersion===u?"USERSNAP_V4_HOST_PREFIX":"USERSNAP_HOST_PREFIX"]+(this._widgetVersion===u?"/":"")+"screenApi/load/"+KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),"usersnapEnvId")+".js";return this._widgetVersion===u&&(e+=KAMPYLE_UTILS.buildQueryParams({onload:d,apiaccess:"extended",cdn:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_V4_HOST_PREFIX+"/classic/frontend"})),e},this.initConfiguration=function(){var e;switch(this._widgetVersion){case l:i.usersnapConfig={cdnUrl:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX+this._usersnapOnpremWidgetLoaderPath.slice(0,this._usersnapOnpremWidgetLoaderPath.lastIndexOf("/")),onLoadCallbackName:d},e=d;break;case u:e=d;break;default:e=_}i[e]=this._widgetVersion===u||this._widgetVersion===l?function(e){e.on("open",function(e){var t={uuid:o.feedbackCorrelationUUID,websiteId:o.websiteId};p(o)&&(t.screenCaptureUuid=o.screenCaptureUuid),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?(Object.assign(t,{screenWidth:i.innerWidth,screenHeight:i.innerHeight}),e.api.setValue("custom",t)):(e.api.setValue("customData",JSON.stringify(t)),setTimeout(function(){E()}))}),e.on("opened",function(){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)&&E()}),e.on("submit",function(){c()}),e.on("close",function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_cancelCaptureClicked",{formId:KAMPYLE_DATA.getMemoryData("currentFormId"),feedbackCorrelationUUID:KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID)}),o.canceledClicked&&f()});var t={serviceUrl:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_V4_HOST_PREFIX,mode:"headless",button:null,tools:{keys:["highlight"],colors:[KAMPYLE_CONSTANT.COLORS.USERSNAP_V4_SELECTION_COLOR]},thankYou:{isHidden:!0}};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)&&(t.apiKey=KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),"usersnapEnvId")),e.init(t),i.UserSnap={api:e}}:{api:!0,hideUI:!0,mode:"report",hideTour:!0,cancelHandler:function(){f()},loadHandler:function(){i.UserSnap&&(i.UserSnap.on("beforeOpen",E),i.UserSnap.on("beforeSend",m),i.UserSnap.on("afterSend",c),i.UserSnap.on("uiReady",A))},hostconfig:{homeHost:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_CDN_URL,UrlSessionkey:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/sessionkey",UrlHtml2pngAndSend:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/sendScreenshot",UrlHtml2png:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/html2png",UrlSendreport:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/sendReport",apiErrorUrl:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenErr/yuno"}}},this.getContainer=function(){return this._widgetVersion===u||this._widgetVersion===l?r.getElementsByName("us-entrypoint-widgetApp")[0]:r.getElementById("us_sandbox")},this.initWidget=function(){var e=this._widgetVersion===u||this._widgetVersion===l?"open":"startUsersnap";i.UserSnap.api[e]()}}function n(){var e=r.getElementById("nebScIframe").contentDocument,t=e.getElementById("widgetFooterCaptureImg");t&&(t.style.display="none",(e=e.getElementById("widgetFooterCaptureText"))&&(e.style.display="inline"))}function a(e,t){o.canceledClicked=!0,KAMPYLE_UTILS.sendMessageToIframe(KAMPYLE_DATA.getFormIframeId(t.formId),{action:"cancelScreenCapture",data:t})}var o,s,l="ONPREM",u="V4",d="onUsersnapLoad",_="_usersnapconfig";function m(e){o.canceledClicked&&(o.canceledClicked=!1),e.addInfo={uuid:o.feedbackCorrelationUUID,websiteId:o.websiteId},p(o)&&(e.addInfo.screenCaptureUuid=o.screenCaptureUuid)}function c(e){this.snapId=e,o.canceledClicked||(n(),KAMPYLE_SCREEN_CAPTURE.closeScreenCaptureWidget(),e={formId:o.formId,feedbackCorrelationUUID:o.feedbackCorrelationUUID},KAMPYLE_EVENT_DISPATCHER.trigger("neb_captureImageClicked",e),KAMPYLE_UTILS.sendMessageToIframe(KAMPYLE_DATA.getFormIframeId(o.formId),{action:"takenScreenCapture",data:e})),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)&&s.close()}function A(){setTimeout(function(){var e=r.getElementById("nebScIframe").contentDocument.getElementsByClassName("sc-widget-content")[0];e&&(e.tabIndex=-1,e.focus())},1e3)}function E(){var e=s.getContainer();KAMPYLE_UTILS.setElementStyle(e,{display:"block",zIndex:"2147483646"},!0);var t=e&&e.getElementsByTagName&&e.getElementsByTagName("iframe"),t=t&&t[0];t&&KAMPYLE_UTILS.setElementStyle(t,{display:"block"},!0),KAMPYLE_COMMON.createScreenCaptureWidget(o,e)}function T(e,t){o.feedbackCorrelationUUID=(t=t||{}).feedbackCorrelationUUID,p(t)&&(o.screenCaptureUuid=t.screenCaptureUuid),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID,o.feedbackCorrelationUUID),o.websiteId=t.websiteId,o.accountId=t.accountId,o.formId=t.formId,o.screenCaptureSettings=t.screenCaptureSettings,o.canceledClicked=!1,s.initWidget()}function f(){KAMPYLE_SCREEN_CAPTURE.closeScreenCaptureWidget(),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_Capture_Cancelled",{formId:KAMPYLE_DATA.getMemoryData("currentFormId"),feedbackCorrelationUUID:KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID)})}function p(e){e=KAMPYLE_UTILS.getNestedPropertyValue(e,"screenCaptureSettings.screenCaptureAsComponentEnabled");return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_AS_COMPONENT)&&e}return{initScreenCaptureWidget:T,handleCaptureCancellation:f,closeScreenCaptureWidget:function(){var e=r.getElementById("us_sandbox");e&&(e.style.display="none"),(e=r.getElementById("nebScIframe"))&&e.parentNode.removeChild(e)},beforeOpen:E,UserSnapModel:t,shouldProcessScreenCaptureAsComponent:p,getUserSnapInstance:function(){return s},init:function(e){o={},(s=new t).init(),s.initConfiguration(),function(){var e="kampyleSceenCaptureScript";if(r.getElementById(e))return;var t=r.createElement("script");Object.assign(t,{id:e,type:"text/javascript",src:s.getUrl()}),r.body.appendChild(t)}(),KAMPYLE_UTILS.objectPropertyObserver(i,"UserSnap",e),KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_captureInit:[T],neb_cancelCaptureClicked:[a]})}}}(window,document),window.KAMPYLE_ONSITE_SDK=function(){function s(e){e={errorMessage:KAMPYLE_CONSTANT.LOG_MESSAGES.ERROR_ONSITE_SDK_CONFIGURATION_MISSING.replace("{{METHOD}}",e)};KAMPYLE_EVENT_DISPATCHER.triggerError(e),MDIGITAL.LOGGER.warn(e.errorMessage)}function a(e){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return s("loadForm"),!1;var t=KAMPYLE_DATA.getFormState(e);return t?(t.loaded||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkLoadForm",{formId:e}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:e})),!0):(KAMPYLE_UTILS.showWarning("Error fetching data for form id "+e),!1)}function l(e){var t=KAMPYLE_DATA.getFormState(e);if(!t||!t.shown)return!1;t=t.isCurrentlySubmitted;return KAMPYLE_EVENT_DISPATCHER.trigger("neb_formClosed",{formId:e,isFormSubmitted:t}),!0}return{loadForm:a,showForm:function(e,t){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return s("showForm"),!1;t=t||{};var i=KAMPYLE_DATA.getFormState(e);if(!i)return KAMPYLE_UTILS.showWarning("Error fetching data for form id "+e),!1;if(KAMPYLE_DATA.getMemoryData("inviteLoadedAndShown"))return KAMPYLE_UTILS.showWarning("There is already an invite displayed"),!1;if(KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(e,!0))return KAMPYLE_UTILS.showWarning("There is already a form displayed"),!1;i.loaded||a(e),t.triggerType=t.triggerType||"ByCode",KAMPYLE_DATA.saveFormExtraData(e,t);var r,n={formId:e};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkShowForm",{formId:e,triggerType:t.triggerType}),!0},closeForm:function(e){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return s("closeForm"),!1;if(!isNaN(e))return l(e);for(var t,i=KAMPYLE_DATA.getAllForms(),r=e&&function(e){switch(e){case KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.ALL:return function(){return!0};case KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.EMBEDDED:return function(e){return e&&e.formType===KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.EMBEDDED};case KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.MODAL:return function(e){e=KAMPYLE_DATA.getDisplayType(e);return e===KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION||e===KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX};default:return function(){return!1}}}(e.toLowerCase()),n=i.length,a=!1,o=0;o<n;o++)t=i[o],r&&r(t)&&(a=l(+t.formId)||a);return a},updatePageView:function(){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return s("updatePageView"),!1;KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkPageView")},isSurveyDisplayed:function(){return MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing()?(s("isSurveyDisplayed"),!1):!(!KAMPYLE_FUNC.isAnyInviteShown()&&!KAMPYLE_FUNC.isAnyOtherFormAlreadyShown())||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkSurveyDisplayed"),!1)},startInviteTargeting:function(){return MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing()?(s("startInviteTargeting"),!1):KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.MANUALLY_INVITE_TARGETING)?void KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_MANUALLY_INVITE_TARGETING,{skipButtonTargeting:!0,skipInviteTargeting:!1}):(KAMPYLE_UTILS.showWarning("Manually invite targeting feature is disabled"),!1)},startLogger:function(){MDIGITAL.LOGGER.setLoggerStatus(!0)},stopLogger:function(){MDIGITAL.LOGGER.setLoggerStatus(!1)},printMdigitalLogs:function(){MDIGITAL.LOGGER.printLogs()}}}((window,document)),window.KAMPYLE_POLYFILLS=function(e,r){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=r.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],n=0;n<i;){var a=t[n];if(e.call(r,a,n,t))return a;n++}}}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i}),"function"!=typeof e.CustomEvent&&(t.prototype=e.Event.prototype,e.CustomEvent=t)}(window,document),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],n=0;n<i;){var a=t[n];if(e.call(r,a,n,t))return n;n++}return-1}}),Element.prototype.remove||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.from||(Array.from=function(){function l(e){return"function"==typeof e||"[object Function]"===t.call(e)}function u(e){return e=function(e){e=Number(e);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(e),Math.min(Math.max(e,0),i)}var t=Object.prototype.toString,i=Math.pow(2,53)-1;return function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,r=1<arguments.length?arguments[1]:void 0;if(void 0!==r){if(!l(r))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(i=arguments[2])}for(var n,a=u(t.length),o=l(this)?Object(new this(a)):new Array(a),s=0;s<a;)n=t[s],o[s]=r?void 0===i?r(n,s):r.call(i,n,s):n,s+=1;return o.length=a,o}}()),window.KAMPYLE_INTEGRATION=function(){var l={sessionCam:"sessionCamRecorder",quantumMetrics:"QuantumMetricAPI"};function u(e){switch(e.source){case"var":return KAMPYLE_UTILS.getNestedPropertyValue(window,e.param);case"cookie":return KAMPYLE_UTILS.kampyleGetCookie(e.param);case"function":var t=KAMPYLE_UTILS.getNestedPropertyValue(window,e.param);if("function"!=typeof t)return null;try{var i=e.predefinedArgs;return i?(i=i.split(","))instanceof Array?t.apply(e.context,i):null:t.apply(e.context)}catch(e){return null}case"url":return KAMPYLE_UTILS.getUrlParam(KAMPYLE_UTILS.getNestedPropertyValue(window,e.param));case"storage":return localStorage.getItem(KAMPYLE_UTILS.getNestedPropertyValue(window,e.param))}}function o(e){for(var t=!0,i=e.isEnabled,e=l[e.integrationName],r=KAMPYLE_UTILS.getNestedPropertyValue(window,e),n=0;n<i.length;n++){var a=!1,o=i[n].param,s=i[n].paramValue;o||KAMPYLE_UTILS.showWarning("no current name found"),o=u({source:i[n].source,param:o,context:r,predefinedArgs:i[n].predefinedArguments}),a=null===s?null!=o:s===o,t=t&&a}return t}function s(e){for(var t={},i=e.parameters||[],r=l[e.integrationName]||null,n=KAMPYLE_UTILS.getNestedPropertyValue(window,r),a=0;a<i.length;a++){var o=u({source:i[a].source,param:i[a].param,context:n,predefinedArgs:i[a].predefinedArguments}),s=e.parameters[a].putIn;KAMPYLE_UTILS.setNestedPropertyValue(t,s,o)}return{integrationName:e.integrationName,parameters:t}}return{isEnabled:o,prepareIntegrationData:s,getParameterBySource:u,getIntegrationData:function(){var e,t,i=KAMPYLE_DATA.getInegrations()||{},r={};for(t in i)if(i.hasOwnProperty(t))for(var n=i[t],a=0;a<n.length;a++)o(e=n[a])&&(r[t]=r[t]||[],r[t].push(s(e)));return r}}}(),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.CUSTOM_PARAMETERS=function(n){return{getCustomParamValue:function(e){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CP_EXT_REFACTOR))return KAMPYLE_FUNC.getSafeCustomParamVal(e);var t=e||{},e=MDIGITAL.CUSTOM_PARAMETERS.extractCPValue(t);return MDIGITAL.CUSTOM_PARAMETERS.castCPValue(e,t.type||"")},formatCustomParams:function(e){return(MDIGITAL.CUSTOM_PARAMETERS.getFormCustomParams(e)||[]).map(MDIGITAL.CUSTOM_PARAMETERS.appendValueToCPObject)},getFormCustomParams:function(e){return(KAMPYLE_DATA.getFormData(e)||{}).customParams||null},hasCustomParams:function(e){return!!(e=KAMPYLE_DATA.getFormData(e))&&!!e.customParams&&!!e.customParams.length},fetchCPValue:function(e){var t=e.value,i=(e.source||"var").toLowerCase(),r=e.name||e.source_name||"";switch(KAMPYLE_UTILS.safeToLower(i)){case"var":t=KAMPYLE_UTILS.getNestedPropertyValue(n,r);break;case"url":t=KAMPYLE_UTILS.getUrlParam(r);break;case"cookie":t=KAMPYLE_UTILS.getCookie(r);break;default:t=null}return""!==t?t:null},getCustomParamById:function(t,e){return void 0!==t&&e&&e.customParams&&e.customParams.length&&e.customParams.find(function(e){return e.id==t})||null},extractCPValue:function(e){var t=e.value;return""!==(t=void 0===t?MDIGITAL.CUSTOM_PARAMETERS.fetchCPValue(e):t)?t:null},castCPValue:function(e,t){if(null===e)return e;switch(t.toLowerCase()){case"datetime":return MDIGITAL.CUSTOM_PARAMETERS.handleDatetimeCasting(e);case"number":return KAMPYLE_UTILS.getNumericValue(e);case"text":return MDIGITAL.CUSTOM_PARAMETERS.handleTextCasting(e);case"boolean":return MDIGITAL.CUSTOM_PARAMETERS.handleBooleanCasting(e);default:return console.error("Invalid custom parameter type "+t),null}},handleDatetimeCasting:function(e){return"string"==typeof e?Number(e)||null:e instanceof Date||(e||{}).getTime&&!isNaN(e.getTime())?e.getTime():null},handleTextCasting:function(e){return"string"==typeof e?e:null},handleBooleanCasting:function(e){return"true"===e||"false"!==e&&("boolean"==typeof e?e:null)},appendValueToCPObject:function(e){e=e||{};var t=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({name:e.source_name,type:e.type,source:e.source});return Object.assign(e,{value:t})}}}(window,document),window.MDIGITAL.INIT=function(){var t;return{init:function(){var e;t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),KAMPYLE_EVENT_DISPATCHER.init(),KAMPYLE_DATA.init(),MDIGITAL.CONFIGURATION.init(),KAMPYLE_COOLADATA.init(),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,t),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DHH)?t.onsiteDataUrl?MDIGITAL.CONFIGURATION.fetchOnsiteExternalConfiguration(t.onsiteDataUrl):MDIGITAL.CONFIGURATION.onsiteDataFailed("onsiteDataUrl is Empty"):(KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!0),e=MDIGITAL.CONFIGURATION.formatConfiguration(t),MDIGITAL.INIT.initOnsite(e))},initOnsite:function(e){KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,e),KAMPYLE_DATA.initOnsiteDefaultState(),KAMPYLE_FUNC.init(),KAMPYLE_FUNC.startCheckingTargeting(),MDIGITAL.INIT.reportInitComplete()},reportInitComplete:function(){KAMPYLE_UTILS.triggerCustomEvent("neb_OnsiteLoaded")}}}((window,document)),MDIGITAL.INIT.init();
