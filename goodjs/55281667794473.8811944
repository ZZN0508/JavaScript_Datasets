function IEAjaxInit(){var e;e=function(i){if(i.support.cors||!i.ajaxTransport||!window.XDomainRequest)return i;var t=/^(https?:)?\/\//i,s=/^get|post$/i,n=new RegExp("^(//|"+location.protocol+")","i");return i.ajaxTransport("* text html xml json",function(r,a,e){if(r.crossDomain&&r.async&&s.test(r.type)&&t.test(r.url)&&n.test(r.url)){var o=null;return{send:function(e,s){var t="",n=(a.dataType||"").toLowerCase();o=new XDomainRequest,/^\d+$/.test(a.timeout)&&(o.timeout=a.timeout),o.ontimeout=function(){s(500,"timeout")},o.onload=function(){var e="Content-Length: "+o.responseText.length+"\r\nContent-Type: "+o.contentType,t={code:200,message:"success"},r={text:o.responseText};try{if("html"===n||/text\/html/i.test(o.contentType))r.html=o.responseText;else if("json"===n||"text"!==n&&/\/json/i.test(o.contentType))try{r.json=i.parseJSON(o.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===n||"text"!==n&&/\/xml/i.test(o.contentType)){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;try{a.loadXML(o.responseText)}catch(e){a=void 0}if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+o.responseText;r.xml=a}}catch(e){throw e}finally{s(t.code,t.message,r,e)}},o.onprogress=function(){},o.onerror=function(){s(500,"error",{text:o.responseText})},a.data&&(t="string"===i.type(a.data)?a.data:i.param(a.data)),o.open(r.type,r.url),o.send(t)},abort:function(){o&&o.abort()}}}}),i},"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}IEAjaxInit();var DASCoinAdvert={prefix:"ecoin",cdnUrl:"//img.easypass.cn/das/cheyingtong/adsense/prod/",statisticsUrl:"//jwechatapi.yichehuoban.cn/statistics/yiche/adEffect",pageIds:{"0e1e2663-364f-45bb-b53f-cdf3de666c32":{url:"yiche_pc_home.js",serverId:3},"b73f9e35-64fb-4cab-ab73-d8b7d683802a":{url:"yiche_m_news.js",serverId:4},"20fd8a8b-b46f-431b-9e9a-79def221bca7":{url:"yiche_pc_news.js",serverId:5},"81a2f8d7-5171-408f-9b49-8c582f28505e":{url:"yiche_m_choosecar.js",serverId:6},"a1c224ab-6f38-4108-917a-8249daaf73b2":{url:"yiche_pc_city.js",serverId:7},"f7dc5af9-f880-4ff8-bd34-733b4c46f4cd":{url:"yiche_pc_search.js",serverId:8},"e4416b60-b1a7-4b00-934e-ef6c038ca118":{url:"yiche_m_common.js",serverId:9},"3d4960bf-d0bc-4b90-a554-47bc351fa864":{url:"yiche_pc_common.js",serverId:10},"ac23c817-c2f5-4c57-bbb0-05a81e2c41f1":{url:"baojia_app.js",serverId:11},"29e209e0-1421-746f-a87c-e2ff144ccf58":{url:"yiche_m_kj_choosecar.js",serverId:12}},baseUrl:"//cytcache.easypass.cn/open/front/get",posLogMap:{},init:function(){var t,r=this;$("ins[id^="+r.prefix+"]").each(function(){var e=$(this);t=e.attr("pageid"),pageUrl=r.cdnUrl+r.pageIds[t].url+"?v="+(new Date).getTime(),$.getScript(pageUrl,function(){"object"==typeof DASCoinAdvertPage&&r.ecoin_controller.register(DASCoinAdvertPage),r.render(e.attr("id"),e.attr("pageid"),e.attr("cityid"),e.attr("positionid"),e.attr("csid"))})}),r.statisticsClick()},JsonpGet:function(t,r,a,s,n){var e=t;this[a]=s;var o=this;$.ajax({url:e,type:"Get",cache:!1,dataType:"json",success:function(e){DASCoinAdvert[a](e)},error:function(e){(n=n||0)<10?(IEAjaxInit(),setTimeout(function(){o.JsonpGet(t,r,a,s,n+1)},500)):DASCoinAdvert[a](null)}})},render:function(r,a,s,n,e){var o=this;"2005"==n&&(n="2006");var t=o.baseUrl+"/"+s+"/"+n;t+=e?"/"+e:"","0"!=e?(e="_"+s+"_"+n,o.JsonpGet(t,null,e,function(e){var t;!o.buildHtml(e,n,r)||(t={PageId:o.pageIds[a].serverId,Position:n,DealerID:e.data[0].dealerId,NewsID:e.data[0].advertId,CityID:s}).DealerID&&"null"!=t.DealerID&&t.NewsID&&"null"!=t.NewsID&&!e.data[0].isDefault&&(o.statisticsLoad(t),o.posLogMap[n]=t)})):o.buildHtml({},n,r)},buildHtml:function(e,t,r){if("object"==typeof DASCoinAdvertPage){var a=e?e.data:null;e&&1==e.status&&e.data&&"null"!=e.data||(a=null);a=this.ecoin_controller.renderHtml(t,a);if(a&&a.html)return $("#"+r).html(a.html),a.hasAdvert}return!1},statisticsLoad:function(e){e.ProjectId=101,this.statisticsCore(e)},statisticsClick:function(){var r=this;$(document).off("click","[data-eadvposid]").on("click","[data-eadvposid]",function(e){var t=$(this).attr("data-eadvposid"),t=r.posLogMap[t];t&&(t.ProjectId=102,r.statisticsCore(t))})},statisticsCore:function(e){e.URL=document.URL,e.Reffer=document.referrer,e.Cookie="undefined"!=typeof XCWEBLOG_ID&&XCWEBLOG_ID?XCWEBLOG_ID:"",e.CreateTime=this.format(new Date,"yyyy-MM-dd hh:mm:ss")},format:function(e,t){var r=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),n=e.getHours(),o=e.getMinutes(),e=e.getSeconds(),t=t;return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/yyyy/g,r)).replace(/MM/g,9<a?a:"0"+a)).replace(/dd/g,9<s?s:"0"+s)).replace(/hh/g,9<n?n:"0"+n)).replace(/mm/g,9<o?o:"0"+o)).replace(/ss/g,9<e?e:"0"+e)).replace(/M/g,a)).replace(/d/g,s)).replace(/h/g,n)).replace(/m/g,o)).replace(/s/g,e)},ecoin_controller:{pages:[],register:function(e){for(var t in this.pages)if(this.pages[t]==e)return!1;return this.pages.push(e),!0},renderHtml:function(e,t){for(var r in this.pages)if(this.pages[r].renderHtml){r=this.pages[r].renderHtml(e,t);if(r)return r}}}};DASCoinAdvert.init();
