function replaceEmoji(e){return e.replace(/[\uD800-\uDFFF]/g,"")}function getMetaTagClicks(e){e=$('meta[property="'+e+'"]');return e&&e.attr("content")?e.attr("content"):""}(function(){var e,n,t,a,i,o,r,l,d=window.device,s={};window.device=s,n=window.document.documentElement,l=window.navigator.userAgent.toLowerCase(),s.ios=function(){return s.iphone()||s.ipod()||s.ipad()},s.iphone=function(){return!s.windows()&&t("iphone")},s.ipod=function(){return t("ipod")},s.ipad=function(){return t("ipad")},s.android=function(){return!s.windows()&&t("android")},s.androidPhone=function(){return s.android()&&t("mobile")},s.androidTablet=function(){return s.android()&&!t("mobile")},s.kindle=function(){return t("linux")},s.blackberry=function(){return t("blackberry")||t("bb10")||t("rim")},s.blackberryPhone=function(){return s.blackberry()&&!t("tablet")},s.blackberryTablet=function(){return s.blackberry()&&t("tablet")},s.windows=function(){return t("windows")},s.windowsPhone=function(){return s.windows()&&t("phone")},s.windowsTablet=function(){return s.windows()&&t("touch")&&!s.windowsPhone()},s.fxos=function(){return(t("(mobile;")||t("(tablet;"))&&t("; rv:")},s.fxosPhone=function(){return s.fxos()&&t("mobile")},s.fxosTablet=function(){return s.fxos()&&t("tablet")},s.meego=function(){return t("meego")},s.cordova=function(){return window.cordova&&"file:"===location.protocol},s.nodeWebkit=function(){return"object"==typeof window.process},s.mobile=function(){return s.androidPhone()||s.iphone()||s.ipod()||s.windowsPhone()||s.blackberryPhone()||s.fxosPhone()||s.meego()},s.tablet=function(){return s.ipad()||s.androidTablet()||s.blackberryTablet()||s.windowsTablet()||s.fxosTablet()||s.kindle()},s.desktop=function(){return!s.tablet()&&!s.mobile()},s.television=function(){var e;for(television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"],e=0;e<television.length;){if(t(television[e]))return!0;e++}return!1},s.portrait=function(){return 1<window.innerHeight/window.innerWidth},s.landscape=function(){return window.innerHeight/window.innerWidth<1},s.noConflict=function(){return window.device=d,this},t=function(e){return-1!==l.indexOf(e)},i=function(e){e=new RegExp(e,"i");return n.className.match(e)},e=function(e){var t;i(e)||(t=n.className.replace(/^\s+|\s+$/g,""),n.className=t+" "+e)},r=function(e){i(e)&&(n.className=n.className.replace(" "+e,""))},s.ios()?s.ipad()?e("ios ipad tablet"):s.iphone()?e("ios iphone mobile"):s.ipod()&&e("ios ipod mobile"):s.android()?e(s.androidTablet()?"android tablet":"android mobile"):s.blackberry()?e(s.blackberryTablet()?"blackberry tablet":"blackberry mobile"):s.windows()?e(s.windowsTablet()?"windows tablet":s.windowsPhone()?"windows mobile":"desktop"):s.fxos()?e(s.fxosTablet()?"fxos tablet":"fxos mobile"):s.meego()?e("meego mobile"):s.nodeWebkit()?e("node-webkit"):s.television()?e("television"):s.desktop()&&e("desktop"),s.cordova()&&e("cordova"),s.kindle()&&e("kindle"),a=function(){s.landscape()?(r("portrait"),e("landscape")):(r("landscape"),e("portrait"))},o=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(o,a,!1):window.attachEvent?window.attachEvent(o,a):window[o]=a,a(),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:window.device=s}).call(this),function(){var o={LOG_LEVELS:{SILENT:0,ERROR:1,INFO:2,DEBUG:3},_variables:{namespace:window.ClicksTrackingObject,clicksObj:window[window.ClicksTrackingObject],failedQueue:[],logLevel:null,runTimer:null,currentPortal:window.ClicksPortal,isEndOfPageSent:!1,isEndOfArticleSent:!1,isScrollSent:!1,scrollCount:20,frequency:100,requiredParams:{pageview:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"],scroll:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"],widgetclick:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"],buttonclick:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"],endofpage:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"],endofarticle:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"],videoview:["base_url","query_params","resolution","referrer","domain","event_time","hurpass_id","global_id","session_id","browser_language","mobile","newsCategory","pathname","short_id","article_id","portal","page_title"]},optionalParams:{pageview:["action","label","category"],scroll:["action","label","category"],widgetclick:["action","label","category"],buttonclick:["action","label","category"],endofpage:["action","label","category"],endofarticle:["action","label","category"],videoview:["action","label","category"]},requestUrl:window.ClicksRequestUrl||"https://clicks.hurriyet.com.tr/request/"},_functions:{getFunctionName:function(t){switch(t.toLowerCase()){case"loglevel":return o._functions.setLogLevel;case"pageview":return o._functions.pageView;case"endofpage":return o._functions.endofpage;case"endofarticle":return o._functions.endofarticle;case"scroll":return o._functions.scroll;case"widgetclick":return o._functions.widgetclick;case"buttonclick":return o._functions.buttonclick;case"videoview":return o._functions.videoview;default:return function(e){console.error("unexpected Clicks function: "+t)}}},setLogLevel:function(e){var t=o.LOG_LEVELS[e];void 0!==e&&(o._variables.logLevel=t,console.log("Clicks Log Level Changed to: "+e))},manipulateData:function(e,t){e.network_retry_count=e.network_retry_count+1||1,e.hurpass_retry_count=e.hurpass_retry_count+1||1,void 0===e.portal&&(e.portal=o._variables.currentPortal),o._addData(e,"query_params",window.location.search),o._addData(e,"referrer",-1!=window.location.search.indexOf("__hrp__")?"__hrp__":0<=document.referrer.indexOf("?")?document.referrer.split("?")[0]:document.referrer),o._addData(e,"queryString",0<=document.referrer.indexOf("?")?document.referrer.split("?")[1]:""),o._addData(e,"resolution",window.screen.availWidth+"x"+window.screen.availHeight),o._addData(e,"domain",window.location.hostname),o._addData(e,"event_time",new Date),o._addData(e,"session_id",o._getSessionId()),o._addData(e,"browser_language",navigator.language||navigator.userLanguage),o._addData(e,"mobile",o._isMobile()?"Mobile":"PC"),o._addData(e,"pathname",window.location.pathname),void 0!==getMetaTagClicks?(o._addData(e,"article_id",getMetaTagClicks("article:id")||o._getArticleId()),o._addData(e,"base_url",getMetaTagClicks("og:url")||window.location.protocol+"//"+window.location.host+window.location.pathname),o._addData(e,"newsCategory",getMetaTagClicks("article:section:list").replace(",","|")||o._getNewsCategory()),o._addData(e,"page_title",getMetaTagClicks("og:title")||replaceEmoji(document.title))):(o._addData(e,"article_id",o._getArticleId()),o._addData(e,"base_url",window.location.protocol+"//"+window.location.host+window.location.pathname),o._addData(e,"newsCategory",o._getNewsCategory()),o._addData(e,"page_title",replaceEmoji(document.title))),!window.SSO||"undefined"==window.SSO||!SSO.is_all_ok()&&(!window.HR||HR.user.id<0)||"undefined"==typeof FPCookieId||null==FPCookieId?8<e.hurpass_retry_count?(o._addData(e,"hurpass_id","-1"),o._addData(e,"short_id","-1"),"undefined"==typeof FPCookieId||null==FPCookieId?window.SSO&&"undefined"!=window.SSO&&(SSO.is_all_ok()||window.HR&&!(HR.user.id<0))?o._addData(e,"global_id",SSO.get_data().global_id):o._addData(e,"global_id","-3"):"undefined"!==FPCookieId.glbl_id2&&FPCookieId.glbl_id2&&""!==FPCookieId.glbl_id2&&null!==FPCookieId.glbl_id2?o._addData(e,"global_id",FPCookieId.glbl_id2):window.SSO&&"undefined"!=window.SSO&&(SSO.is_all_ok()||window.HR&&!(HR.user.id<0))?o._addData(e,"global_id",SSO.get_data().global_id):o._addData(e,"global_id","-4")):setTimeout(function(){o._variables.clicksObj(t,e)},o._variables.frequency):(o._addData(e,"hurpass_id",SSO.get_data().sso_id),o._addData(e,"short_id",o._generateShortId(e.global_id)),"undefined"==typeof FPCookieId||null==FPCookieId?window.SSO&&"undefined"!=window.SSO&&(SSO.is_all_ok()||window.HR&&!(HR.user.id<0))?o._addData(e,"global_id",SSO.get_data().global_id):o._addData(e,"global_id","-3"):"undefined"!==FPCookieId.glbl_id2&&FPCookieId.glbl_id2&&""!==FPCookieId.glbl_id2&&null!==FPCookieId.glbl_id2?o._addData(e,"global_id",FPCookieId.glbl_id2):window.SSO&&"undefined"!=window.SSO&&(SSO.is_all_ok()||window.HR&&!(HR.user.id<0))?o._addData(e,"global_id",SSO.get_data().global_id):o._addData(e,"global_id","-4"))},endofpage:function(e){return o._functions.manipulateData(e,"endofpage"),o._addData(e,"event_name","EoP"),o._sendRequest(e,"endofpage")},endofarticle:function(e){return o._functions.manipulateData(e,"endofarticle"),o._addData(e,"event_name","EoA"),o._sendRequest(e,"endofarticle")},buttonclick:function(e){return o._functions.manipulateData(e,"buttonclick"),o._addData(e,"event_name","BC"),o._sendRequest(e,"buttonclick")},widgetclick:function(e){return o._functions.manipulateData(e,"widgetclick"),o._addData(e,"event_name","WC"),o._sendRequest(e,"widgetclick")},scroll:function(e){return o._functions.manipulateData(e,"scroll"),o._addData(e,"event_name","scrl"),o._sendRequest(e,"scroll")},pageView:function(e){return null==o._variables.currentPortal&&(o._variables.currentPortal=e.portal),o._functions.manipulateData(e,"pageview"),o._addData(e,"event_name","PV"),o._sendRequest(e,"pageview")},videoview:function(e){return o._functions.manipulateData(e,"videoview"),o._addData(e,"event_name","VV"),o._sendRequest(e,"videoview")}},_sendRequest:function(e,t){var n,a={data:{eventName:e.event_name}};for(requiredParams=o._variables.requiredParams[t],n=0;n<requiredParams.length;++n){if(void 0===e[requiredParams[n]])return void o.LOG_MESSAGE("ERROR","Missing parameter["+requiredParams[n]+"] in event: "+t);a.data[requiredParams[n]]=e[requiredParams[n]],"string"==typeof a.data[requiredParams[n]]&&(a.data[requiredParams[n]]=a.data[requiredParams[n]].trim())}for(optionalParams=o._variables.optionalParams[t],n=0;n<optionalParams.length;++n)void 0!==e[optionalParams[n]]?(a.data[optionalParams[n]]=e[optionalParams[n]],"string"==typeof a.data[optionalParams[n]]&&(a.data[optionalParams[n]]=a.data[optionalParams[n]].trim())):a.data[optionalParams[n]]="";o._sendRequestToServer(a.data)},_addData:function(e,t,n){e[t]=e[t]||n||""},_setCookie:function(e,t,n){var a,i="";n&&((a=new Date).setTime(a.getTime()+24*n*60*60*1e3),i="expires="+a.toGMTString()+"; "),i=e+"="+t+"; "+i+"path=/",document.cookie=i,o.LOG_MESSAGE("INFO","Document Cookie Update: "+i)},_getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a].trim();if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},_getSessionId:function(){var e=o._getCookie("_clicks_session_id");return void 0!==e&&""!=e&&null!=e||(e=o._getRandomZeroPadded(15),o._setCookie("_clicks_session_id",e),o.LOG_MESSAGE("INFO","User Session Changed: "+e)),e},_isMobile:function(){return!(!device.mobile()&&!device.tablet())},_makeCRCTable:function(){for(var e=[],t=0;t<256;t++){for(var n=t,a=0;a<8;a++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e},_generateShortId:function(e){if(void 0===e||null==e)return"-1";for(var t=window.crcTable||(window.crcTable=o._makeCRCTable()),n=-1,a=0;a<e.length;a++)n=n>>>8^t[255&(n^e.charCodeAt(a))];return(-1^n)>>>0},_getArticleId:function(){var e,t,n=window.location.pathname;return-1!=(window.location.protocol+"//"+window.location.host).indexOf("hurriyet.com.tr")?-1!=n.indexOf(".asp")?(e=n.lastIndexOf("/"),e=n.substring(e+1,n.indexOf(".asp"))):-1==n.indexOf("Yazar")&&-1==(window.location.protocol+"//"+window.location.host).indexOf("hurriyet.com.tr")||(e=(t=n.split("_"))[t.length-1]):-1!=(window.location.protocol+"//"+window.location.host).indexOf("radikal.com.tr")?e=3==(t=n.split("-")).length?t[t.length-2]:t[t.length-1]:-1!=(window.location.protocol+"//"+window.location.host).indexOf("bigpara.com")&&(e=1<(t=n.split("ID")).length?t[t.length-1]:""),-1!=(window.location.host+window.location.pathname).indexOf("hurriyet.com.tr/paylas")&&(e=1<(t=n.split("-")).length?t[t.length-1]:""),isNaN(e)?"":e},_getNewsCategory:function(){if(-1!=(window.location.host+window.location.pathname).indexOf("hurriyet.com.tr/plus")){var e=window.location.pathname.split("/");return 2<e.length?e[2]:"plusanasayfa"}if("www.bigpara.com"==window.location.host&&"/"==window.location.pathname)return"anasayfa";e=window.location.pathname.split("/");return 1<e.length?e[1].substring(0,30):""},_getRandomZeroPadded:function(e){return Math.floor(Math.random()*Math.pow(10,e+1)).toString().slice(-e)},_createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n},_sendRequestToServer:function(t){var n=o._createCORSRequest("POST",o._variables.requestUrl);return n?(n.open("POST",o._variables.requestUrl,!0),n.setRequestHeader("Content-type","application/json"),n.timeout=4e3,n.ontimeout=function(){o.LOG_MESSAGE("DEBUG","The request for "+o._variables.requestUrl+" timed out."),o._variables.failedQueue.push(t.eventName),o._variables.failedQueue.push(t)},n.onreadystatechange=function(){4==n.readyState&&200!=n.status&&(o._variables.failedQueue.push(t.eventName),o._variables.failedQueue.push(t))},n.onload=function(e){4===n.readyState&&(200===n.status?o._ajaxSuccess(t):(o._ajaxError(t,e),o._variables.failedQueue.push(t.eventName),o._variables.failedQueue.push(t)))},void n.send(JSON.stringify(t))):void o.LOG_MESSAGE("DEBUG","CORS not supported")},init:function(){o._variables.logLevel=o.LOG_LEVELS.SILENT,window.onunload=o._windowUnload,o.LOG_MESSAGE("INFO","Clicks loaded and starting...");for(var e=o._getEventsFromCookie(),t=0;t<e.length;++t)e[t].length<2||o._variables.clicksObj(e[t][0],e[t][1]);window.addEventListener?window.addEventListener("scroll",o._onScrollEventHandler,!1):window.attachEvent&&window.attachEvent("onscroll",o._onScrollEventHandler),o.run()},_onScrollEventHandler:function(e){o._getScrollTop()+window.innerHeight!=o._getDocHeight()||o._variables.isEndOfPageSent||(o._variables.isEndOfPageSent=!0,o._variables.clicksObj("endofpage")),o._getScrollTop()>=40*o._variables.scrollCount&&!o._variables.isScrollSent&&(o._variables.isScrollSent=!0,o._variables.clicksObj("scroll")),o._endOfArticleScrollEventHandler()},_endOfArticleScrollEventHandler:function(){var e,t=o._getArticleContainerByPortal();t&&!o._variables.isEndOfArticleSent&&(e=o._getScrollTop()+o._getWindowHeight(),o._getOffsetTop(t)+t.clientHeight<=e&&!o._variables.isEndOfArticleSent&&(o._variables.isEndOfArticleSent=!0,o._variables.clicksObj("endofarticle")))},_getArticleContainerByPortal:function(){var e=[];if((e="hurriyet"===o._variables.currentPortal?o._getElementsByClassName("news-detail-text"):e)&&0!=e.length)return e[0]},_getWindowHeight:function(){var e=window.innerHeight;return e||document.getElementsByTagName("html")[0].clientHeight},_getOffsetTop:function(e){var t={top:0};return(t=e.getBoundingClientRect?e.getBoundingClientRect():t).top+(window.pageYOffset||e.scrollTop||document.documentElement.scrollTop||0)-(e.clientTop||0)},_getElementsByClassName:function(e){return document.getElementsByClassName?document.getElementsByClassName(e):document.querySelectorAll("."+e)},_getScrollTop:function(){if("undefined"!=typeof pageYOffset)return pageYOffset;var e=document.body,t=document.documentElement;return(t=t.clientHeight?t:e).scrollTop},_getDocHeight:function(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)},_ajaxError:function(e,t){o.LOG_MESSAGE("ERROR","Error in sending event:\nEvent Data: "+JSON.stringify(e)+"\nError: "+t)},_ajaxSuccess:function(e){o.LOG_MESSAGE("DEBUG","Success in sending event:\nEvent Data: "+JSON.stringify(e))},_putEventsToCookie:function(){Array.prototype.push.apply(o._variables.clicksObj.q,o._variables.failedQueue),o._setCookie("clicks_queue",JSON.stringify(o._variables.clicksObj.q,360))},_getEventsFromCookie:function(){return retVal=o._getCookie("clicks_queue"),""==retVal&&(retVal="[]"),o._setCookie("clicks_queue",JSON.stringify([]),360),JSON.parse(retVal)},_windowUnload:function(){(0<o._variables.clicksObj.q.length||0<o._variables.failedQueue.length)&&o._putEventsToCookie()},run:function(){try{if(o._variables.clicksObj.q)for(;0<o._variables.clicksObj.q.length;){var e,t,n=o._variables.clicksObj.q.shift();0<n.length&&(e=o._functions.getFunctionName(n[0]),t=n[1]||{},o.LOG_MESSAGE("INFO","Event triggered: "+n[0]),e.call(null,t))}window.clearTimeout(o._variables.runTimer),o._variables.runTimer=window.setTimeout(o.run,o._variables.frequency)}catch(n){o.LOG_MESSAGE("ERROR","Error in run: "+n),window.clearTimeout(o._variables.runTimer),o._variables.runTimer=window.setTimeout(o.run,o._variables.frequency)}},LOG_MESSAGE:function(e,t){var n=o._variables.logLevel,a=o.LOG_LEVELS[e];void 0!==a&&a<=n&&console.log("Clicks["+e+"]: "+t)}};"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),o.init()}(window);
