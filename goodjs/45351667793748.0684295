(this.$WP=this.$WP||[]).push(["PiTJFd",(e,t)=>{"use strict";var m,_,n,p,T,v,E,C,h,i,d,k=({trip:t,messageType:e,onCtaClick:a})=>{var l,r=m.useCallback(()=>{var e;a&&a(),null!=(e=t.route)&&e.url&&(window.location=null==(e=t.route)?void 0:e.url)},[a,t]),r=m.createElement("div",{onClick:r},m.createElement(_,{id:"stat_modal_view_trip_v2"}));switch(e){case"CREATED":l=m.createElement(n,{id:"create_trip_success_toast_with_bold",args:{TripName:i((null==t?void 0:t.title)||"")}});break;case"SAVED":l=m.createElement(n,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:i((null==t?void 0:t.title)||"")}});break;default:l=null}return m.createElement(p,{cta:r},m.createElement(d,{element:"savedToast",trip:t},m.createElement("span",{className:"IG_1KSi_"},l)))},I=({trip:e,onUndo:t})=>{t=m.createElement("div",{onClick:t},m.createElement(_,{id:"stat_modal_undo"}));return m.createElement(p,{cta:t},m.createElement(d,{element:"unsaveToast",trip:e},m.createElement("span",{className:"IG_1KSi_"},m.createElement(n,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:i(null==e?void 0:e.title),TripLink:(null==(e=e.route)?void 0:e.url)||"",TripClass:"_-0lxWGBX"}}))))},b=({trip:e,hideCta:t,onCtaClick:a})=>{var l=m.useCallback(()=>{a()},[a]),l=m.createElement("div",{onClick:l},m.createElement(_,{id:"stat_modal_change"}));return m.createElement(p,{cta:t?null:l},m.createElement(d,{element:"savedToast",trip:e},m.createElement("span",{className:"IG_1KSi_"},m.createElement(n,{id:"stat_modal_saved_to_tripname_with_bold_v3",args:{TripName:i(null==e?void 0:e.title),TripLink:(null==(e=e.route)?void 0:e.url)||"",TripClass:"_-0lxWGBX"}}))))},y=({onUndo:e})=>{e=m.createElement("div",{onClick:e},m.createElement(_,{id:"stat_modal_undo"}));return m.createElement(p,{cta:e},m.createElement(_,{id:"stat_modal_removed_from_tripname",args:{sTripName:m.createElement(_,{id:"m1_trips_my_saves_header"})}}))},a=()=>{var[r,n]=m.useContext(T),[,a]=v(E),i=m.useCallback((e,t)=>a({tripId:e,referenceId:""+t.id,referenceType:t.type,allowDuplicates:!1}).then(e=>{var t,a,l,r,n=null==e||null==(n=e.data)?void 0:n.addItemToTrip,i=null==e||null==(t=e.data)||null==(i=t.addItemToTrip)?void 0:i.trip,d=null==e||null==(a=e.data)||null==(l=a.addItemToTrip)||null==(r=l.errors)||null==(d=r[0])?void 0:d.error;return{trip:i,error:n?null:{query:"ADD_ITEM_TO_TRIP",tripsError:d||void 0}}}).catch(()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})),[a]),e=m.useCallback((e,t,a)=>{a=m.createElement(k,{trip:e,messageType:t,onCtaClick:a});r({node:a})},[r]),t=m.useCallback((e,t,a)=>{var l=m.createElement(I,{trip:e,onUndo:()=>{i(e.id,t).then(e=>{a&&a(e.trip,e.error)})}});r({node:l})},[i,r]),l=m.useCallback((e,t,a,l=8e3)=>{a=m.createElement(b,{trip:e,onCtaClick:()=>{t&&t(),n()},hideCta:a});r({node:a,timeout:l})},[r,n]),d=m.useCallback(()=>{var e=m.createElement(p,null,m.createElement(_,{id:"m1_trips_save_success_stat_d2"}));r({node:e})},[r]),[,o]=v(C),s=m.useCallback(e=>o({id:""+e.id,type:e.type}).then(e=>{var t;return{isAdded:!(null==e||null==(t=e.data)||!t.MySaves_addToMySavesSingle)}}).catch(()=>({isAdded:!1})),[o]),c=m.useCallback((e,t)=>{var a=m.createElement(y,{onUndo:()=>{s(e).then(e=>{t(e.isAdded)})}});r({node:a})},[r,s]),u=m.useCallback(e=>r({node:m.createElement(p,null,e)}),[r]);return{launchViewTripToast:e,launchRemoveFromTripToast:t,launchAutoSavedToTripToast:l,launchAddItemToMySavesToast:d,launchRemoveItemFromMySavesToast:c,launchErrorTripToast:m.useCallback(e=>{e=m.createElement(p,null,m.createElement(h,{query:e.query,error:e.tripsError}));r({node:e})},[r]),launchToastMessage:u}};return[()=>{e("default",a)},[e=>m=e,e=>(_=e.default,n=e.UnsafeLocalize),e=>(p=e.ToastItem,T=e.Toast),e=>v=e.useMutation,e=>(E=e.AddItemToTrip,C=e.AddItemToMySaves),e=>h=e.default,e=>i=e.escapeHtml,e=>d=e.TripsImpression]]},["cDcdfi","0DsHEV","Q7TAd7","5X2em-","RXx5aI","9I0t-6","WkP2XE","c_rvp5"]]);
