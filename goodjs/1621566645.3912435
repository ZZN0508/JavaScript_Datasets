!function(){"use strict";var e,t,n,r,o=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},i=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},a=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},c=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},u="function"==typeof WeakSet?new WeakSet:new Set,s=function(e,t,n){var r;return function(){t.value>=0&&(n||u.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},p=function(e,t){var n,r=o("CLS",0),u=function(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),n())},p=i("layout-shift",u);p&&(n=s(e,r,t),a((function(){p.takeRecords().map(u),n()})),c((function(){r=o("CLS",0),n=s(e,r,t)})))},f=-1,d=function(){return"hidden"===document.visibilityState?0:1/0},v=function(){a((function(e){var t=e.timeStamp;f=t}),!0)},m=function(){return f<0&&(f=d(),v(),c((function(){setTimeout((function(){f=d(),v()}),0)}))),{get timeStamp(){return f}}},l=function(e,t){var n,r=m(),a=o("FCP"),p=i("paint",(function(e){"first-contentful-paint"===e.name&&(p&&p.disconnect(),e.startTime<r.timeStamp&&(a.value=e.startTime,a.entries.push(e),u.add(a),n()))}));p&&(n=s(e,a,t),c((function(r){a=o("FCP"),n=s(e,a,t),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-r.timeStamp,u.add(a),n()}))}))})))},b={passive:!0,capture:!0},w=new Date,g=function(r,o){e||(e=o,t=r,n=new Date,S(removeEventListener),h())},h=function(){if(t>=0&&t<n-w){var o={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};r.forEach((function(e){e(o)})),r=[]}},y=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){g(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,b),removeEventListener("pointercancel",r,b)};addEventListener("pointerup",n,b),addEventListener("pointercancel",r,b)}(t,e):g(t,e)}},S=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,y,b)}))},E=function(n,p){var f,d=m(),v=o("FID"),l=function(e){e.startTime<d.timeStamp&&(v.value=e.processingStart-e.startTime,v.entries.push(e),u.add(v),f())},b=i("first-input",l);f=s(n,v,p),b&&a((function(){b.takeRecords().map(l),b.disconnect()}),!0),b&&c((function(){var i;v=o("FID"),f=s(n,v,p),r=[],t=-1,e=null,S(addEventListener),i=l,r.push(i),h()}))},O=function(e,t){var n,r=m(),p=o("LCP"),f=function(e){var t=e.startTime;t<r.timeStamp&&(p.value=t,p.entries.push(e)),n()},d=i("largest-contentful-paint",f);if(d){n=s(e,p,t);var v=function(){u.has(p)||(d.takeRecords().map(f),d.disconnect(),u.add(p),n())};["keydown","click"].forEach((function(e){addEventListener(e,v,{once:!0,capture:!0})})),a(v,!0),c((function(r){p=o("LCP"),n=s(e,p,t),requestAnimationFrame((function(){requestAnimationFrame((function(){p.value=performance.now()-r.timeStamp,u.add(p),n()}))}))}))}},L=function(e){var t,n=o("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();n.value=n.delta=t.responseStart,n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t)};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){j(i,r,o,a,c,"next",e)}function c(e){j(i,r,o,a,c,"throw",e)}a(void 0)}))}}var q,C=Date.now(),F={"www.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.int.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","www.test.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.int.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.test.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","local.dev.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint"}[window.location.hostname],R=Math.random()<=.01;(q=D(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.bbcuser.allowsPerformanceCookies();case 2:t=e.sent,F&&navigator.sendBeacon&&R&&t&&(n={cls:null,fid:null,lcp:null,fcp:null,ttfb:null},p(r=function(e){var t=e.name,r=e.value,o=t.toLowerCase();n[o]=r},!0),E(r),O(r,!0),l(r),L(r),window.addEventListener("pagehide",D(regeneratorRuntime.mark((function e(){var t,r,o,i,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.bbcpage.getDestination();case 2:return t=e.sent,e.next=5,window.bbcpage.getContentType();case 5:r=e.sent,o="".concat(F,"?platform=orbit&owner=").concat(t,"&pageType=").concat(r),i=[{type:"web-vitals",url:window.location.href,age:Date.now()-C,body:P({},n)}],a=JSON.stringify(i),c=new Blob([a],{type:"application/reports+json"}),navigator.sendBeacon(o,c);case 12:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e)}))),function(){return q.apply(this,arguments)})()}();
//# sourceMappingURL=performance.bundle.js.map