!function(){"use strict";!function(e){try{e.NOLLite=e.NOLLite||{}}catch(e){"undefined"!=typeof console&&console&&console.warn&&console.warn("Error initializing NOL SDK")}}(window),window.NOLLite.Common=window.NOLLite.Common||function(){var a,e,c,i,s,l,t={};try{(a=t).Config=a.Config||((e={sdkVersion:"bj.5.1.5",buildVersion:"1.0.0.22",domain:"imrworldwide.com",sfcode:"us",lsHTMLUrl:"novms/html/ls.html",tagParamPrefix:"nol_",scriptName:"nlsDcrLite510",monitorInterval:1e3,reporterInterval:3e5,validationInterval:1e3,intervalThreshold:9e4,durationThreshold:2e4,reporterIntervalThreshold:{min:30,max:300},requiredParams:"nol_sfcode nol_ci nol_apid nol_assetname nol_apn nol_vc".split(" ")}).endpoints={staticPing:{route:"/cgi-bin/gn",params:{prd:{type:"static",value:"dcr",encLvl:0},st:{type:"static",value:"dcr",encLvl:0},at:{type:"dynamic",value:"{{at}}",encLvl:0},rt:{type:"static",value:"text",encLvl:0},forward:{type:"static",value:"0",encLvl:0},sup:{type:"static",value:'|!nol_sup||"0"!|',encLvl:0},ad:{type:"static",value:'|!nol_ad||"0"!|',encLvl:0},asn:{type:"static",value:"|!nol_assetname!|",encLvl:1},ci:{type:"static",value:"|!nol_ci!|",encLvl:0},cr:{type:"dynamic",value:"{{cr}}",encLvl:0},c6:{type:"static",value:"vc,|!nol_vc!|",encLvl:0},c9:{type:"static",value:"devid,|!nol_devid!|",encLvl:0},c11:{type:"static",value:'agg,|!nol_agg||"1"!|',encLvl:0},c12:{type:"static",value:"apv,|!nol_apv!|",encLvl:0},c13:{type:"static",value:"asid,|!nol_apid!|",encLvl:0},c15:{type:"static",value:"apn,|!nol_apn!|",encLvl:0},c16:{type:"static",value:"sdkv,"+e.sdkVersion,encLvl:0},c26:{type:"static",value:'dmap,|!nol_dmap||"1"!|',encLvl:0},c27:{type:"dynamic",value:"cln,{{cln}}",encLvl:0},c29:{type:"static",value:"plid,"+(Date.now?Date.now():(new Date).getTime())+Math.round(1e4*Math.random()).toString(),encLvl:0},c30:{type:"static",value:"bldv,"+e.buildVersion,encLvl:0},c32:{type:"static",value:'segA,|!nol_segA||"NA"!|',encLvl:1},c33:{type:"static",value:'segB,|!nol_segB||"NA"!|',encLvl:1},c34:{type:"static",value:'segC,|!nol_segC||"NA"!|',encLvl:1},c36:{type:"static",value:"cref1,|!nol_cref1!|",removeIfEmpty:!0,encLvl:0},c37:{type:"static",value:"cref2,|!nol_cref2!|",removeIfEmpty:!0,encLvl:0},uoo:{type:"dynamic",value:"{{optout}}",removeIfEmpty:!0,encLvl:0}}}},e),a.Util=a.Util||(i={state:{ready:!(c={parseNOLParams:function(e){var t={},i=a.Config.tagParamPrefix;if(!e)return t;for(e=(e=e.replace(new RegExp("&"+i,"gi"),"<<nol_delimeter>>"+i)).split("<<nol_delimeter>>"),i=0;i<e.length;i++){var n=e[i].indexOf("="),o=unescape(e[i].substr(0,n));n=(n=unescape(e[i].substr(n+1))).replace(/\+/g," "),t[o]=n}return t},parseQuery:function(e){var t={};if(!e)return t;e=e.split(/[;&]/);for(var i=0;i<e.length;i++){var n,o=e[i].split("=");o&&2==o.length&&(n=unescape(o[0]),o=(o=unescape(o[1])).replace(/\+/g," "),t[n]=o)}return t},toQuery:function(e){if(e){var t,i=[];for(t in e)i.push(t+"="+e[t]);return i.join("&")}return""},timeStamp:function(){try{return(new Date).toISOString()}catch(e){return(new Date).toString()}},log:function(e,t){window.NOLLite.debug&&"undefined"!=typeof console&&console&&console.log&&(null!=t?console.log(c.timeStamp()+" LOG: "+e,t):console.log(c.timeStamp()+" LOG: "+e))},debug:function(e,t){window.NOLLite.debug&&"undefined"!=typeof console&&console&&console.debug&&(null!=t?console.debug(c.timeStamp()+" DEBUG: "+e,t):console.debug(c.timeStamp()+" DEBUG: "+e))},warn:function(e,t){window.NOLLite.debug&&"undefined"!=typeof console&&console&&console.warn&&(null!=t?console.warn(c.timeStamp()+" WARN: "+e,t):console.warn(c.timeStamp()+" WARN: "+e))},error:function(e,t){window.NOLLite.debug&&"undefined"!=typeof console&&console&&console.error&&(null!=t?console.error(c.timeStamp()+" ERROR: "+e,t):console.error(c.timeStamp()+" ERROR: "+e))},parseExp:function(e,t){var i="";return i=e?/".*?"/gi.test(e)?e.replace(/"/gi,""):t&&void 0!==t[e]?t[e]:"":i},urlEncode:function(e,t){if(t&&0<t)for(;t--;)e=encodeURIComponent(e).replace("'","%27");return e},evalStaticValue:function(e,t,i){var n="";if(e&&e.value&&t){var o=(n=e.value).match(/\|!.*?!\|/gi);if(o){var r=null,a=(s=o[0].replace("|!","").replace("!|","")).split("||");if(a&&1<a.length){if(a)for(var s=0,l=a.length;s<l&&!(r=c.parseExp(a[s],t))&&s!=l-1;s+=1);}else r=c.parseExp(s,t);if(""===(r=c.urlEncode(r,-1<i?i:e.encLvl))&&e.removeIfEmpty)return"";n=n.replace(o[0],r)}}return n},evalDynamicValue:function(e,t,i){var n="";if(e&&e.value&&t){var o=e.value.match(/{{.*?}}/gi),n=e.value;if(o)for(var r,a=o.length;a--;)r=t[o[a].replace("{{","").replace("}}","")],n=n.replace(o[a],null!=r?r:"")}return c.urlEncode(n,-1<i?i:e.encLvl)},evalDynamicParams:function(e,t,i,n){if(e&&t&&i){var o,r,a,s=[];if(t.params)for(r in t.params)(o=t.params[r])&&"dynamic"===o.type&&(a=c.evalDynamicValue(o,i,n),o.removeIfEmpty&&""===a||s.push(r+"="+a));return e+"&"+s.join("&")}return e},generateEndpoint:function(e,t,i){if(e&&e.route){var n,o,r=e.route+"?",a=[];if(e.params)for(o in e.params)(n=e.params[o])&&"static"===n.type&&(n=c.evalStaticValue(n,t,i),null!=n&&""!==n&&a.push(o+"="+n));return r+a.join("&")}return""},endpointProtocol:function(){return i.isSecure?"https://":"http://"},getTimestamp:function(){return Date.now&&"function"==typeof Date.now?Date.now():(new Date).getTime()}}),focused:!1},get isSecure(){return"https:"===window.location.protocol},get isMobile(){var e=!1;return e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))?!0:e},globalHasFocus:function(){var t=!1;if(window.top!=window.self)return!1;i.checkUserAgent("(?=.*macintosh)(?=.*chrome).*")&&(i.addEventListener({element:window.top,eventType:"focus",func:function(){i.state.focused=void 0!==window.top.document.webkitHidden&&!window.top.document.webkitHidden},useCapture:!1}),i.addEventListener({element:window.top,eventType:"blur",func:function(){i.state.focused=!1},useCapture:!1}),t=i.state.focused);try{t=window.top.document.hasFocus&&"function"==typeof window.top.document.hasFocus?window.top.document.hasFocus():i.state.focused}catch(e){t=i.state.focused}return t},hidden:function(){var e="hidden",t=["webkit","moz","ms","o"];if(!("hidden"in document))for(var i=0;i<t.length;i++)t[i]+"Hidden"in document&&(e=t[i]+"Hidden");return document[e]},isVisible:function(){var e=i.hidden();return null===e?(c.debug("document.hidden not supported, checking hasFocus()",i.globalHasFocus()),i.globalHasFocus()):!e},ready:function(e){function t(){i.removeEventListener({element:document,eventType:"DOMContentLoaded",func:t}),i.removeEventListener({element:window,eventType:"load",func:t}),!i.state.ready&&e&&(i.state.ready=!0,e())}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(t):(i.addEventListener({element:document,eventType:"DOMContentLoaded",func:t}),i.addEventListener({element:window,eventType:"load",func:t}))},addEventListener:function(e){try{void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))}catch(e){}},removeEventListener:function(e){try{null!=e&&null!=e.element&&null!=e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))}catch(e){}},checkUserAgent:function(e){var t=window?window.navigator.userAgent.toLowerCase():null;return t=void 0!==e&&0<e.length?-1!==t.search(e):t}},{parseQuery:c.parseQuery,parseNOLParams:c.parseNOLParams,toQuery:c.toQuery,log:c.log,debug:c.debug,warn:c.warn,error:c.error,urlEncode:c.urlEncode,getTimestamp:c.getTimestamp,browser:{isMobile:i.isMobile,ready:i.ready,addEventListener:i.addEventListener,removeEventListener:i.removeEventListener,checkUserAgent:i.checkUserAgent,hasFocus:i.globalHasFocus,isVisible:i.isVisible},endpoint:{generate:c.generateEndpoint,protocol:c.endpointProtocol,evalDynamicParams:c.evalDynamicParams}}),a.Request=a.Request||(s=a.Util,{ping:(l={ping:function(t,i,n,o,r){var e;t&&(r=r||1,(void 0===(n=n||{}).maxRetry||null===n.maxRetry||n.maxRetry<0)&&(n.maxRetry=1),i&&(t+=(-1==t.indexOf("?")?"?":"")+s.toQuery(i)),n.cache||(t+=(-1===t.indexOf("?")?"?":"")+"&rnd="+Math.round(1e6*Math.random())),a.Util.debug("Sending ping - try "+r+" - "+t,n),(e=new Image).onerror=function(e){r<n.maxRetry?setTimeout(function(){l.ping(t,i,n,o,++r)},500):o&&o("error")},e.onload=function(e){o&&o(null,e)},e.src=t)},sendBeacon:function(e){navigator.sendBeacon&&"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(e),a.Util.debug("Sending beacon - "+e)):l.ping(e,null,{cache:!1},null,null)}}).ping,sendBeacon:l.sendBeacon})}catch(e){"undefined"!=typeof console&&console&&console.warn&&console.error("Error loading Common module",e.trace)}return t}(),window.NOLLite.Models=window.NOLLite.Models||function(n){var e,t,i={};try{e=i,(t=function(e,t,i){this._id=e,this._url=t,this._content="",this._handle=null,this._initialize(i)}).prototype._initialize=function(t){var e=this;try{this._handle=window.document.createElement("iframe"),this._handle.src=this._url,this._handle.height=0,this._handle.width=0,this._handle.style.display="none",this._handle.id=this._id,window.document.body.appendChild(this._handle),this._handle.onload=function(){t&&t(null,e)}}catch(e){this._handle=null,t&&t(e)}},t.prototype.sendMessage=function(e,t){this._handle&&t&&this._handle.contentWindow&&this._handle.contentWindow.postMessage&&"function"==typeof this._handle.contentWindow.postMessage&&this._handle.contentWindow.postMessage(JSON.stringify({eventType:e,data:t}),this._url)},e.MessageFrame=t,(t=function(e){this._name=e||"timer",this._duration=0,this._endTime=this._startTime=null,this._running=!1}).prototype._calculateDelta=function(){var e;this._startTime&&(this._endTime||(this._endTime=this._getTimestamp()),void 0!==this._duration&&null!==this._duration||(this._duration=0),(e=(this._endTime-this._startTime)/1e3)&&(this._duration+=e))},t.prototype._getTimestamp=function(){return Date.now&&"function"==typeof Date.now?Date.now():(new Date).getTime()},t.prototype.start=function(e,t){this._running||(this._startTime=t||this._getTimestamp(),this._endTime=null,e&&this.reset(),this._running=!0,n.Util.debug(this._name+" watch started"+(t?" at "+new Date(t).toString():"")))},t.prototype.stop=function(e,t){this._running&&(this._endTime=t||this._getTimestamp(),this._calculateDelta(),e&&this.reset(),this._running=!1,n.Util.debug(this._name+" watch stopped"+(t?" at "+new Date(t).toString():"")))},t.prototype.reset=function(){this._duration=0,this._endTime=this._startTime=null,n.Util.debug(this._name+" watch reset")},t.prototype.restart=function(){this.reset(),this._startTime=this._getTimestamp()},t.prototype.read=function(e){this._running&&this._calculateDelta();var t=this._duration;return e&&this.restart(),0<=t?t:0},e.StopWatch=t,(t=function(e,t){var i=this;this._name=t||"timer",this._interval=e,this._running=-1,this._ticker=null,this._tick=0,this._listeners=[],this._onTick=function(){i._tick+=i._interval,i._fireListeners(),n.Util.debug(i._name+" timer tick:",i._tick)}}).prototype._fireListeners=function(){for(var e,t=0,i=this._listeners.length;t<i;t+=1)(e=this._listeners[t])&&e.interval&&0==this._tick%e.interval&&e.callback&&e.callback(this._tick)},t.prototype._startTick=function(){this._interval&&0<this._interval&&(this._ticker=setInterval(this._onTick,this._interval))},t.prototype._stopTick=function(){this._ticker&&clearInterval(this._ticker)},t.prototype.registerListener=function(e,t,i){this._listeners||(this._listeners=[]),this._listeners.push({name:e,interval:t,callback:i})},t.prototype.start=function(e){1!==this._running&&(e&&this.reset(),this._running=1,this._startTick(),n.Util.debug(this._name+" started"))},t.prototype.pause=function(){1===this._running&&(this._running=0,this._stopTick(),n.Util.debug(this._name+" paused"))},t.prototype.stop=function(){-1<this._running&&(this._running=-1,this._stopTick(),this.reset(),n.Util.debug(this._name+" stopped and reset"))},t.prototype.reset=function(){this._tick=0,n.Util.debug(this._name+" reset")},e.Timer=t}catch(e){n.Util.error("Error loading NOLLite models",e)}return i}(window.NOLLite.Common),window.NOLLite.Modules=window.NOLLite.Modules||function(r,i){var e,t={};try{e=t,n.prototype._init=function(){var e,n=this;this._maskPing&&(e=[this._domain,r.Config.lsHTMLUrl].join("/"),this._messageFrame.handle=new i.MessageFrame("maskFrame",e,function(){n._messageFrame.ready=!0;for(var e=n._messageFrame.queue.slice(0),t=0,i=e.length;t<i;t+=1)n._maskedPing(e[t]);n._messageFrame.queue=[]})),this.timer.registerListener("reporter",this._reportInterval,function(){n.loaded&&n._firePing(!0,{at:"timer",cr:"D"},!1)}),this.intervalCheck.timer.registerListener("IntervalPoll",r.Config.validationInterval,function(){var e=r.Util.getTimestamp();if(n.activeView){r.Util.debug("Interval threshold poll checking thresholds.");try{var t=Math.abs(e-n.intervalCheck.previousTimeStamp);t>r.Config.intervalThreshold&&(r.Util.debug("Interval check poll detected that time interval "+t+" exceeded threshold of "+r.Config.intervalThreshold+". Time gap will be ignored."),r.Util.debug("Previous timestamp:",n.intervalCheck.previousTimeStamp),r.Util.debug("Current timestamp:",e),n.monitor.stop(!1,n.intervalCheck.previousTimeStamp),n.monitor.start(!1,e)),r.Util.browser.hasFocus()&&r.Util.browser.isVisible()||n.forceView||(r.Util.debug("Interval poll detected that browser is not focused."),n._onBlur())}catch(e){r.Util.error("Error trying to evaluate interval threshold check",e.stack)}}n.intervalCheck.previousTimeStamp=e})},n.prototype._reset=function(){this.activeView=this.loaded=!1,this.views=0,this.timer&&this.timer.stop(),this.monitor&&this.monitor.stop(!0),r.Util.debug("DCR Reset")},n.prototype._setOptionParams=function(e){return(e=e||{}).optout=this._optOut,e},n.prototype._generatePingUrl=function(e,t,i){var n=[this._domain];return this._endpoint||(this._endpoint=r.Util.endpoint.generate(r.Config.endpoints.staticPing,this._args,this._urlEncodeLevel)),(i=i||{}).cln=t,i.cvw=e,i=this._setOptionParams(i),e=r.Util.endpoint.evalDynamicParams(this._endpoint,r.Config.endpoints.staticPing,i,this._urlEncodeLevel),n.push(e),n.join("")},n.prototype._maskedPing=function(t){try{t&&(this._messageFrame.ready?(this._messageFrame.handle.sendMessage("maskref",{url:t}),r.Util.debug("DCR masked ping fired ",t)):this._messageFrame.queue.push(t))}catch(e){r.Util.debug("DCR error trying to fire masked ping for: "+t,e.message)}},n.prototype._firePing=function(e,t,i){try{var n,o;r&&r.Request?((n=this._durationEnabled?Math.round(this.monitor.read(e)):0)&&0<n||0<this.views)&&(n>(this._reportInterval+r.Config.durationThreshold)/1e3&&(n=(this._reportInterval+r.Config.durationThreshold)/1e3,r.Util.debug("Duration threshold reached, defaulting to threshold duration based on the cadence:",n)),o=this._generatePingUrl(this.views,n,t),this._maskPing?this._maskedPing(o):i?(r.Request.sendBeacon(o),r.Util.debug("DCR beacon fired ",o)):(r.Request.ping(o),r.Util.debug("DCR ping fired ",o)),this.views=0):r.Util.error("Request module not loaded")}catch(e){r.Util.debug("Error: Unable to fire ping",e.message)}},n.prototype._checkLoaded=function(e){!this.loaded&&this.activeView&&(r.Util.debug("DCR loading and firing V ping"),this._firePing(e,{at:"view",cr:"V"},!1),this.loaded=!0,this.timer.start())},n.prototype.load=function(e,t){this.views=e,(e=r&&r.Util?r.Util.browser:null)?(this.activeView=!e.hasFocus||e.hasFocus()&&e.isVisible(),e.addEventListener({element:window,eventType:"blur",func:this._onBlur,useCapture:!1}),e.addEventListener({element:window,eventType:"focus",func:this._onFocus,useCapture:!1}),e.addEventListener({element:window,eventType:"beforeunload",func:this._onUnload,useCapture:!1}),e.addEventListener({element:window,eventType:"pagehide",func:this._onUnload,useCapture:!1}),e.addEventListener({element:window,eventType:"pageshow",func:this._onPageShow,useCapture:!1})):"undefined"!=typeof console&&console&&console.warn&&console.warn("SDK Common module not loaded");try{document.addEventListener&&(document.addEventListener("visibilitychange",this._onVisibilityChanged),document.addEventListener("webkitvisibilitychange",this._onVisibilityChanged),document.addEventListener("msvisibilitychange",this._onVisibilityChanged),document.addEventListener("mozvisibilitychange",this._onVisibilityChanged))}catch(e){}this.forceView=t,r.Util.debug("Active view is ",this.activeView),r.Util.debug("Forced view is ",t),(this.activeView||t)&&this._onFocus(),this.intervalCheck.timer.start()},e.DCR=n}catch(e){r.Util.error("Error loading NOLLite modules",e)}function n(e){var t=this;this._onBlur=function(){r.Util.debug("Blur event - not in focus"),t.activeView=!1,t.monitor.stop()},this._onFocus=function(){r.Util.debug("Focus event - in focus"),t.activeView=!0,t._checkLoaded(!0),t.monitor.start()},this._onUnload=function(e){t.loaded&&(t._durationEnabled&&(r.Util.debug("Processing unload ping"),t._firePing(!0,{at:"timer",cr:"D"},r.Util.browser.isMobile)),t._reset())},this._onPageShow=function(){r.Util.debug("Pageshow event - in focus"),!t.loaded&&r.Util.browser.isVisible()&&r.Util.browser.hasFocus()&&(t.activeView=!0,t.views=1,t._checkLoaded(!0),t.monitor.start())},this._onVisibilityChanged=function(){var e=r&&r.Util?r.Util.browser:null;e&&e.isVisible&&e.isVisible()?(r.Util.debug("Visibility changed - in focus"),t.activeView=!0,t._checkLoaded(!0),t.monitor.start()):(r.Util.debug("Visibility changed - not in focus"),t.activeView=!1,t.monitor.stop())},this._endpoint="",this.loaded=!1,this.views=0,this._args=e||{},this._maskPing="1"===this._args.nol_rfrmsk,this.activeView=!1,this._messageFrame={handle:null,ready:!1,queue:[]},this.forceView=!1,this._urlEncodeLevel=parseInt(this._args.nol_encLvl||-1,10),0<=this._urlEncodeLevel||(this._urlEncodeLevel=-1),this._optOut="1"===this._args.nol_uoo?"true":"",e=this._args&&this._args.nol_sfcode?this._args.nol_sfcode:r.Config.sfcode,this._domain=[r.Util.endpoint.protocol(),"secure-",e,".",r.Config.domain].join(""),this._reportInterval=r&&r.Config&&r.Config&&r.Config.reporterInterval?r.Config.reporterInterval:3e5,void 0!==this._args.nol_cadence&&null!==this._args.nol_cadence&&("off"===this._args.nol_cadence?this._reportInterval=0:isNaN(this._args.nol_cadence)||""===this._args.nol_cadence||(e=parseInt(this._args.nol_cadence,10),this._reportInterval=e<r.Config.reporterIntervalThreshold.min?1e3*r.Config.reporterIntervalThreshold.min:e>r.Config.reporterIntervalThreshold.max?1e3*r.Config.reporterIntervalThreshold.max:1e3*e)),this._durationEnabled=0<this._reportInterval,this.monitor=new i.StopWatch("duration"),this.timer=new i.Timer(this._reportInterval,"heartbeat"),this.intervalCheck={previousTimeStamp:r.Util.getTimestamp(),timer:new i.Timer(r.Config.validationInterval,"interval poll")},this._init()}return t}(window.NOLLite.Common,window.NOLLite.Models),function(i,r,e,t){try{if(!i._instance){var n=function(e){this.initialized=!1,this.args=e,this.DCR=new t.DCR(e)};n.prototype.initialize=function(e){this.initialized||(this.DCR.load(1,e||!1),this.initialized=!0)};var o=function(e,t){i._instance||(i._instance=new n(e),i._instance.initialize(t))},a=function(){var e=document.getElementsByTagName("script");if(e)for(var t,i,n=new RegExp(r.Config.scriptName+"(..*?)*?.js"),o=e.length;o--;)if(t=(i=(t=e[o])&&t.attributes&&t.attributes.src?t.attributes.src.value:"").match(n))return i;return""}().replace(/^[^\#]+\#?/,""),s=r.Util.parseNOLParams(a);if(s){e=!0;for(var l=r.Config.requiredParams,c=l.length;c--;)if(null==s[l[c]]){e=!1,r.Util.error(l[c]+" is a required parameter. Please verify that the parameter is included in the script tag and that the src meets HTTP script tag standards.");break}e?"1"==s.nol_forceview?(r.Util.debug("Initializing with forced view"),o(s,!0)):r.Util.browser.ready(function(){o(s,!1)}):r.Util.error("The DCRLite script tag definition or parameters are invalid. Please supply the required parameters and follow HTTP script tag standards.")}}}catch(e){r.Util.error("Error loading NOLLite core",e)}}(window.NOLLite,window.NOLLite.Common,window.NOLLite.Models,window.NOLLite.Modules)}.call(this);
