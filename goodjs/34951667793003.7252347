var TINGYUN=function(d,h){if(/(MSIE [0-8].\d+)/.test(navigator.userAgent))return{TY_INFO:"Browser Version Not Support to load TINGYUN Agent"};function p(t,e,n){var r,i,o,a,s=0;if(t)if(o=!!(i=t)&&"length"in i&&i.length,"function"!=(a=typeof i)&&("array"==a||0===o||"number"==typeof o&&0<o&&o-1 in i))for(r=t.length;s<r&&!1!==e.call(t[s],t[s],s);s++);else for(s in t)if((n||Object.prototype.hasOwnProperty.call(t,s))&&!1===e.call(t[s],t[s],s))break;return t}function t(e){return function(t){return"Array"===e&&Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object "+e+"]"}}function i(t,e){return function(){t.apply(e,arguments)}}function a(t){return qt?qt(t):t}function g(n){return arguments.length<2||!n||p(kt.call(arguments,1),function(t){p(t,function(t,e){n[e]=t})}),n}function n(t,e){for(var n=-1,r=0,i=null==t?0:t.length,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function v(t,n){return t?n?t.replace(/\{(\w+.?\w+)\}/g,function(t,e){return n[e]||""}).replace(/\{(\d+)\}/g,function(t,e){return n[e]||""}):t:""}function r(t,e,n){var r;if(null==t)return-1;var i=Object(t),o=i.length>>>0;if(0==o)return-1;n=+n||0;if(o<=(n=Math.abs(n)===1/0?0:n))return-1;for(r=Math.max(0<=n?n:o-Math.abs(n),0);r<o;){if(r in i&&i[r]===e)return r;r++}return-1}function m(t){return setTimeout(t,0)}function s(){}function y(){var t=window&&window.performance;return t&&t.timing&&t.timing.navigationStart&&t.now?Math.round(t.timing.navigationStart+t.now()):+new Date}function u(e){return function(){var t;null!==e&&(t=e,e=null,t.apply(this,arguments))}}function o(t){return t?yt(t)?t.length:d.ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:d.Blob&&t instanceof Blob?t.size:t.length||0:0}function c(t,e,n,r){var i,o=null;return t&&e&&(i=r,o=(At!==jt&&/^https/i.test(i&&i.protocol||At)?"https:":jt)+"//"+t+e,n&&(o+="?",p(n,function(t,e){t=[a(e),"=",a(t),"&"];o+=t.join("")}),r&&r.disableUploadTime||(o+="__r="+y()))),o}function e(){this.events={}}function f(t){return!(t in Te)||Te[t]}function l(t){t=Se.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return t?t[3]:null}function _(t,e,n,r){t=t+"="+e;n&&((e=new Date).setTime(e.getTime()+1e3*n),t+=";expires="+e.toGMTString()),r&&(t+=";path="+r),Se.cookie=t}function x(e,n,r){var i=Se.createElement(e);try{for(var o in n)i[o]=n[o]}catch(t){var a="<"+e;for(o in n)a+=" "+o+'="'+n[o]+'"';a+=">",r||(a+="</"+e+">"),i=Se.createElement(a)}return i}function b(t,e,n,r){xt(n)&&(r=n);var n="ty_form"+y(),i=x("div",{style:De}),o=x("iframe",{name:n,width:0,height:0,style:De}),t=x("form",{style:De,action:t,enctype:"application/x-www-form-urlencoded",method:"post",target:n}),n=x("input",{name:"data",type:"hidden"},!0);n.value=Rt(e),t.appendChild(n),i.appendChild(o),i.appendChild(t),Se.body.appendChild(i),t.submit(),o.onload=function(){r&&r(null,o.innerHTML),Se.body.removeChild(i)}}function S(e,n,t,r){xt(t)&&(r=t,t=null);var i,o=u(r),a=new Ee;a[te]=!0,a.overrideMimeType&&a.overrideMimeType("text/html"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&o(null,a.responseText)},a.onerror=o,n=Rt(n);try{a.open("POST",e,!0)}catch(t){return b(e,n,o)}for(i in t)a.setRequestHeader(i,t[i]);n?a.send(n):a.send()}function E(t,e,n){if(t&&n&&xt(n)){var r=t[e];if(!r||!r._wrapped){r=n(r,e);return r&&(r._wrapped=!0),t[e]=r}}}function w(t){Be&&t()}function T(t){C(t,Ze)}function k(t){C(t,Qe)}function C(t,e){var n="ok";return t?void e.push(t):e.length?e.join("\n"):n}function I(t){try{return(e=t)&&yt(e)?vt(e):e}catch(t){T(t&&t.message)}var e;return null}function O(t,e,n){var r,t=I((r=t,t=re,(n=n||ie)===ie&&r&&r.getResponseHeader?r.getResponseHeader(t):n===oe&&r.headers?r.headers.get(t):null));return t&&t.r&&toString(t.r)===toString(e.r)?t:null}function R(t,e){t.s_id=e.id,t.s_name=e.action,e.time&&(t.s_du=e.time.duration,t.s_qu=e.time.qu),t.t_id=e.trId}function N(e){var n=!1;return p(Ye.xhrs,function(t){if(t.id===e.id)return!(n=!0)}),n}function q(t,e){this.flags=0,xt(t.create)&&(this.create=t.create,this.flags|=1),xt(t.before)&&(this.before=t.before,this.flags|=2),xt(t.after)&&(this.after=t.after,this.flags|=4),xt(t.error)&&(this.error=t.error,this.flags|=8),this.data=e}function M(t){return!$e||$e.flags<=0?t:(r=t,i=$e.data,0==(1&$e.flags)||void 0!==(t=$e.create($e.data))&&(i=t),function t(){0!=(2&$e.flags)&&$e.before(this,i);var e=t;e._&&(e._=1);try{var n=r.apply(this,arguments)}catch(t){throw 0!=(8&$e.flags)&&$e.error(i,t),t}return 0!=(4&$e.flags)&&$e.after(this,i),n});var r,i}function A(){function t(r){return function(t){var e=kt.call(arguments,0);xt(t)&&(e[0]=M(t));var n;try{return r.apply(this,e)}catch(t){}return n=r,e=[this,e],Function.prototype.apply.apply(n,e)}}E(d,"setTimeout",t),E(d,"setInterval",t)}function j(){this.id=null,this.active=null,this._set=[]}function H(){A();var r=new j;return r.id=function(t,e){if(!$e){if(!bt(t)||!t)throw new TypeError("callbacks arguments must be an object");return $e=new q(t,e)}}({create:function(){return r.active},before:function(t,e){e&&r.enter(e)},after:function(t,e){e&&r.exit(e)},error:function(t,e){if(t){try{var n="moduleId";e[n]=t[n]}catch(t){}r.exit(t)}}}),r}function D(t){on&&console.warn(t||"Event key required!")}function L(t){this.key=(t=t||{}).key,this.type=t.type||"defined";t=t.timeout||6e5;this.i=t?setTimeout(i(this.fail,this),t):null,this.status=1,this.remain=0,this.xhrs=[],this.s=y(),this.e=null,this.called=this.sent=this.stored=!1}function B(t){var e=(t=t||{}).key;if(!e)return new D;if(an[e])return new D("event "+e+" is executing");an[e]=!0;var n=rn.createContext();rn.enter(n);t=new L(t);return rn.set("event",t),t._end=function(){var t=this;t.sent||t.stored||0!==t.remain||!t.called?t.stored&&this.refreshEventAndStore(n):t.finish().send(n)},t.end=function(t,e){return this.called?void(on&&console.warn("Event "+this.key+"has ended or failed!")):(this.called=!0,rn.exit(n),this.status=null!=t?t:1,void(e||this._end()))},t.finish=function(t){var e=this;return e.e=y(),e.i&&clearTimeout(e.i),delete an[e.key],e},t.fail=function(){this.end(0)},t.store=function(){this.end(null,!0),this.refreshEventAndStore(n),this.stored=!0},t}function z(){Ge.recording=!1,Ge.xhrs=[]}function P(t){var e=B(t=g(t||{},{type:he}));return t.autoEnd&&setTimeout(function(){t.status&&t.status===ve?e.fail():e.end()},t.endDelay||pe),e}function U(){return Sn.loadEventEnd||Sn._end}function F(e){function t(t){return 0<e[t]?e[t]-f:0}var n,r,i,o,a,s,u,c={},f=h;return e?(w(function(){var n=ze.t={};p(e,function(t,e){xt(t)||(n[e]=t)},!0)}),f=e.navigationStart,c={f:t(ln),qs:t(sn),rs:t(un),re:t(cn),os:t(fn),oe:t("domContentLoadedEventEnd"),oi:t("domInteractive"),oc:t("domComplete"),ls:t("loadEventStart"),le:t("loadEventEnd"),tus:t("unloadEventStart"),tue:t("unloadEventEnd")},n=t(ln),r=t(dn),i=t("redirectStart"),s=t("redirectEnd"),o=t(hn),0<(a=t(pn))-o&&(c.cs=o,c.ce=a),0<r-n&&(c.ds=n,c.de=r),(0<s-i||0<s)&&(c.es=i,c.ee=s),0==c.le&&(s=U(),c.ue=s-f),Sn._le=c.ue||c.le,e.msFirstPaint&&(u=e.msFirstPaint,w(function(){ze.fp="m_"+u}),c.__fp=3),u&&(c.fp=Math.round(u-f),Sn.fp=c.fp),e[gn]&&(c.sl=t(gn))):c={t:f,os:(Sn[fn]||Sn._end)-f,ls:U()-f},c.je=Sn.errs&&Sn.errs.length||0,Sn.ct&&(c.ct=Sn.ct-f),Sn.touch&&(c.fi=Sn.touch-f),c}function Y(t,n){var s={tr:!1,tt:a(Se.title),charset:Se.characterSet};Pe.resources&&g(s,Pe.resources),w(function(){s.debug=ze}),Be=!1;var r=Sn.errs;p(r,function(t,e){t=t.toObject();t.o=t.o-n&&n.navigationStart||h,r[e]=t}),s.err=r;var e,i="getEntriesByType";return t[i]?e=t[i]("resource"):k(v(tn,[i])),e&&(s.tr=!0,s.res=[],p(e,function(e){function t(t){t=e[t];return 0<t?t:0}var n,r,i=e.initiatorType,o=e.name,a={o:t("startTime"),rt:i,n:o,f:t(ln),ds:t(ln),de:t(dn),cs:t(hn),ce:t(pn),sl:t(gn),qs:t(sn),rs:t(un),re:t(cn),ts:e.transferSize||0,es:e.encodedBodySize||0};"xmlhttprequest"===i&&(n=o,p(Sn.xhrs,function(t,e){if(e&&-1<n.indexOf(e))return r=t,!1}),(o=r)&&(a.aid=o.s_id,a.atd=o.t_id,a.an=o.s_name,a.aq=o.s_qu,a.as=o.s_du)),s.res.push(a)})),s}function G(e,t){var n=0,r=e.timing;return r?Ue[me]&&0<Ue[me]?(n=Ue[me],t.__fp=2):e.getEntriesByName&&(n=r.domLoading,p(Ue.resources,function(t){t=e.getEntriesByName(t);1==t.length&&(t=t[0].responseEnd+r.navigationStart,n<t&&(n=t))}),n-=r.navigationStart,t.__fp=1):k("fp=0"),w(function(){ze._fp=n}),Math.round(n)}function X(n,t,e,r){var i=e||0;if(Te.lcp_switch&&Ue[_e]&&0<Ue[_e])return i=Ue[_e],r.__fs=2,Math.round(i);var o,a,s,u,e=Pe.firstScreenResources;return e&&e.length&&n.getEntriesByName?(p(e,function(t){t=n.getEntriesByName(t);t.length&&(t=t[0].responseEnd,i<t&&(i=t))}),r.fs_s=1,Math.round(i)):Se.createElement("img").getBoundingClientRect?(n.getEntriesByName&&(o=d.innerHeight,a=d.innerWidth,s=[],p(Se.querySelectorAll("img"),function(t){var e;t.src&&function(e){if(!Te.fs_resources||0===Te.fs_resources.length)return!0;var n=!1;return p(Te.fs_resources,function(t){if(-1<e.indexOf(t))return!(n=!0)}),n}(t.src)&&function(t,e,n){if(t){var r=d.pageYOffset,r=t.top+(0!==r&&(r||Se.scrollTop)||0)-(Se.clientTop||0);if(e<=r)return!1;t=t.left;return 0<=t&&t<n}return!1}(xt((e=t).getBoundingClientRect)?e.getBoundingClientRect():void 0,o,a)&&(e=t,!(Ne.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:function(t){for(;t&&1===t.nodeType;){if("none"===function(t){return t.style&&t.style.display}(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}(e)))&&s.push(t.src)}),u=(t.loadEventEnd||Sn.loadEventEnd)-t.navigationStart,p(s,function(t){var e=n.getEntriesByName(t);e.length&&(e=(t=e[0]).responseEnd,t.fetchStart<=u&&i<e&&(i=e))})),r.__fs=1,Math.round(i)):(w(function(){ze.fs=i}),i)}function W(){var n={},r=0,i=d.performance;i&&i.getEntriesByType&&p(i.getEntriesByType("mark")||[],function(t){var e;t&&t.name&&t.startTime&&0===t.name.indexOf(ee)&&((e=t.name.substring(ee.length))&&(n[e]=Math.round(t.startTime),r+=1))});var t=g({},d[se]&&d[se].data||{},We||{});return t&&i&&i.timing&&p(t,function(t,e){bt(t)&&t.timestamp&&(n[e]=t.timestamp-i.timing.navigationStart,r+=1)}),0<r?n:null}function J(){Fe.poMetricCollected?_n():(Fe.pfWaitingPoMetric=!0,setTimeout(_n,Te.max_metric_wait||xe))}function K(){function e(t){try{var e=t.getEntries();e&&p(e,function(t){var e;t.entryType===_e?Ue[_e]=t.renderTime||t.loadTime:t.entryType===me&&t.name===ye&&(Ue[me]=t.startTime),e=!0,p(n,function(t){if(!Ue[t])return e=!1}),Fe.poMetricCollected=e,Fe.poMetricCollected&&Fe.pfWaitingPoMetric&&J()})}catch(t){}}if(!d.PerformanceObserver)return Fe.poMetricCollected=!0,0;var t=[me];Te.lcp_switch&&t.push(_e);var n=[],r=d.PerformanceObserver.supportedEntryTypes||[];if(p(t,function(t){-1<r.indexOf(t)&&n.push(t)}),w(function(){ze.et=n}),0==n.length)return Fe.poMetricCollected=!0,0;try{p(n,function(t){Je[t]=new d.PerformanceObserver(e),Je[t].observe({type:t,buffered:!0})})}catch(t){}}function V(){K(),xn.on(Gt,u(function(){e();var t=y();w(function(){ze.load=t}),Sn.loadEventEnd=t})),p([Gt,Xt,Wt,Jt],function(e){mt(d,e,function(t){w(function(){(ze.e[e]||(ze.e[e]=[])).push(y())}),xn.emit(e,t)})});var e=u(function(){var t=y();w(function(){ze.end=t}),Sn.domContentLoadedEventStart=t,Se.querySelectorAll&&(Ue.resources=Ue.resources||[],p(Se.querySelectorAll("head>link,head>script"),function(t){var e;"LINK"==t.tagName?e=t.href:"SCRIPT"!=t.tagName||t.defer||t.async||(e=t.src),e&&Ue.resources.push(e)}))});mt(Se,"DOMContentLoaded",e),mt(Se,Kt,function(t){"complete"===Se.readyState&&e()});var a=u(function(){Sn.touch=y()});p(["scroll","click","keypress"],function(t){function e(){return Nt(n,r,e),i.apply(this,arguments)}var n,r,i,o;i=a,mt(n=Se,r=t,e,o)})}function $(){this.xhrs={},this.errs=[],e.call(this)}function Z(){var t=d.localStorage.getItem($t);return t?t.split(fe):null}function Q(t){t&&3===t.length&&d.localStorage.setItem($t,t.join(fe))}function tt(){var t=y(),t=[Ht(),t,t];return Q(t),t}function et(t){return!t||3!==t.length||y()-+t[2]>ce}function nt(t){this.limit=t,this.reset()}function rt(t,e,n,r,i,o,a,s,u){var c=this;c.id=t,c.time=y(),c.msg=e,c.lineno=r,c.colno=i,c.filename=n,c.count=1,c.stack=o&&o.stack||"",c.module=a,c.trigger=s,c.customObj=u,c.fix();u=Nn[t];c.ep=u?0:1,Nn[t]=!0}function it(t){if(Fe.pf){var e=(n=Rn.c,r=[],p(n,function(t){r.push(t.toObject())}),r);if(!e||!e.length)return null;n={fu:On||On++,os:parseInt((y()-(Ue.pfStart||h))/1e3)};Pe.ulabel&&(n.ulabel=Pe.ulabel),Sn.emit("send","/err1",n,{datas:e},i(Rn.reset,Rn))}var n,r}function ot(t,e,n,r,i,o,a){var s,u,c,f,l;!e&&ke||(s=!1,p(we.domains,function(t){if(s=t.test(e))return!1}),s||(u=i&&i.moduleId,c=n,f=r,l=u,f=String(t)+String(c)+String(f)+String(l),(l=Rn.get(f))?l.increase():(l=new rt(f,t,e,n,r,i,u,o,a),Rn.add(f,l),Sn.errs&&Sn.errs.push(l))))}function at(){var o=d.onerror;d.onerror=function(t,e,n,r,i){if(ot(t,e,n,r,i,Cn),xt(o))return o.apply(this,arguments)},d.onerror._ty=!0}function st(){var t=d.onerror;t&&t._ty||at()}function ut(o){return function t(e,n){var r,i=t;i._&&(i._=1),this[te]||((r=this[Zt]={}).method=e,r.url=n,r.id=Ye.uniqueId++,(i=rn.get("event"))&&(r.key=i.key,i.remain++));try{return o.apply(this,arguments)}catch(t){}}}function ct(i){return function t(e,n){var r=t;r._&&(r._=1),this[te]||(r=this[Zt])&&e&&"ty_rum_path"===e&&(r.ty_rum_path=n);try{return i.apply(this,arguments)}catch(t){}}}function ft(i){return function t(e){var n=this,r=t;r._&&(r._=1),n[te]||((r=n[Zt])&&(r.start=y(),r.reqSize=o(e)),function(o){function e(i){return M(function t(){var e,n,r=t;return r._&&(r._=1),ht(o),xt(i)&&((r=o[Zt])&&4==o.readyState&&(n=y()),e=i.apply(this,arguments),r&&4==o.readyState&&(r.cbTime=y()-n)),e})}if(o[Dn]){E(o,Dn,e);try{lt(o)}catch(t){}}else try{mt(o,Kt,M(function t(){var e=t;e._&&(e._=1),ht(o)})),lt(o)}catch(t){return m(function(){var n;n=o,p(Hn,function(e,t){t="on"+t;n[t]?E(n,t,function(t){if(dt(n,e),xt(t))return t.apply(this,arguments)}):n[t]=function(){dt(n,e)}}),E(o,Dn,e)})}m(function(){E(o,Dn,e)})}(n),n.setRequestHeader&&Te.id&&r&&jn(r.url)&&(r.r=y()%1e9,n.setRequestHeader("X-Tingyun-Id",Te.id+";r="+r.r)));try{return i.apply(n,arguments)}catch(t){}}}function lt(n){p(Hn,function(t,e){mt(n,e,function(){dt(n,t)})})}function dt(t,e){t&&t[Zt]&&(t[Zt].errorCode=e)}function ht(e){var n,r=e[Zt];r&&(r.end=y(),r.readyState=e.readyState,4==e.readyState)&&(r.status=e.status,r.resSize=function(t){var e=0;if(""==t.responseType||"text"==t.responseType)e=o(t.responseText);else if(t.response)e=o(t.response);else try{e=o(t.responseText)}catch(t){}return e}(e),n=rn.get("event"),m(function(){var t;N(r)||(t=function(t,e){if(t){var n,r=t.status,r={id:t.id,req:t.method+" "+t.url,start:t.start,du:0<r?t.end-t.start:0,cb:t.cbTime||0,status:r,err:t.errorCode||0,rec:t.resSize,send:t.reqSize,type:ie};return t.ty_rum_path&&(r.csheader=t.ty_rum_path),t.r&&(n=O(e,t))&&R(r,n),r}}(r,e),n&&n.key==r.key&&(n.xhrs.push(t),0==--n.remain&&n._end()),Sn.xhrs&&(nn(r),Sn.xhrs[r.url]=t),Ye.xhrs.push(t),Ge.recording&&Ge.xhrs.push(t))}))}function pt(d){return function t(){var e=t;e._&&(e._=1);var f=this,l=kt.call(arguments,0);return new Promise(function(i,e){var t,n="GET",r=1;l&&(1<l.length?(o=l[0],(a=l[r=1])&&bt(a)&&(n=a.method)):1===l.length&&(t=l[0],yt(t)?o=t:t&&(bt(t)||Tt(t))&&(r=0,o=(a=t).url,n=t.method)));var o,a,s={id:Ye.uniqueId++,method:n,url:o},n=(o=s,n=a,Te.id&&o&&jn(o.url)&&(o.r=y()%1e9,a=Te.id+";r="+o.r,n?(o=n.headers,wt(o)?(n.headers||(n.headers=new Headers),n.headers.append(ne,a)):bt(o)?n.headers[ne]=a:o||(n.headers={},n.headers[ne]=a)):(n={headers:{}}).headers[ne]=a),n);n&&(l[r]=n).headers&&(wt(n.headers)?c=n.headers.get(ae):bt(n.headers)&&(c=n.headers[ae]),c&&(s[ae]=c));var u,c=rn.get("event");c&&(s.key=c.key,c.remain++),s.start=y();try{u=d.apply(f,l)}catch(t){return void e(t)}u.then(M(function t(e){var n,r=t;r._&&(r._=1),s.end=y(),e&&(s.status=e.status,n=rn.get("event"),m(function(){var t;N(s)||(t=function(t,e){if(t){var n,r={id:t.id,req:(t.method||"GET")+" "+t.url,start:t.start,du:0<t.status?t.end-t.start:0,cb:0,status:t.status,err:0,rec:0,send:0,type:oe};return t.ty_rum_path&&(r.csheader=t.ty_rum_path),t.r&&(n=O(e,t,oe))&&R(r,n),r}}(s,e),n&&n.key==s.key&&(n.xhrs.push(t),0==--n.remain&&n._end()),Sn.xhrs&&(nn(s),Sn.xhrs[s.url]=t),Ye.xhrs.push(t),Ge.recording&&Ge.xhrs.push(t))})),i(e)}),function(t){e(t)})})}}function gt(){return Te.disable_ajax||((t=Ee&&Ee.prototype)?(E(t,"open",ut),E(t,"setRequestHeader",ct),E(t,"send",ft)):Ee&&(d.XMLHttpRequest=function(){var t=new Ee;return E(t,"open",ut),E(t,"send",ft),E(t,"setRequestHeader",ct),t}),d.fetch&&E(d,"fetch",pt)),setInterval(function(){var e,t;Fe.pf&&Ye.xhrs&&Ye.xhrs.length&&(e=[],p(Ye.xhrs,function(t){e.push(t)}),(e=n(e,function(t){return(Bn.indexOf?Bn.indexOf(t):r(Bn,t))<0}))&&e.length&&(Bn=e,t=null,Pe.ulabel&&(t={ulabel:Pe.ulabel}),Sn.emit("send","/xhr1",t,{xhr:e},function(){Ye.xhrs=n(Ye.xhrs,function(t){return(e.indexOf?e.indexOf(t):r(e,t))<0})}),Mt()&&!window.XDomainRequest&&(Ye.xhrs=[])))},Ln);var t}var vt,mt,yt=t("String"),_t=t("Array"),xt=t("Function"),bt=t("Object"),St=t("Number"),Et=t("Undefined"),wt=t("Headers"),Tt=t("Request"),kt=[].slice,Ct=/([\"\\])/g,It=/\n/g,Ot=d.JSON,Rt=Ot&&Ot.parse&&Ot.stringify?(vt=function(t){return JSON.parse(t)},function(t){return JSON.stringify(t)}):(vt=function(t){return new Function("return "+t)()},function n(t){switch(typeof t){case"object":if(!t)return null;if(t instanceof Array){var r=kt.call(t);return p(r,function(t,e){r[e]=n(t)}),"["+r.join(",")+"]"}if(t instanceof Date)return t.getTime().toString();var i="";return p(t,function(t,e){xt(t)||(i+=n(e)+":"+n(t)+",")}),"{"+(i=i&&i.substr(0,i.length-1))+"}";case"string":return'"'+t.replace(Ct,"\\$1").replace(It,"\\n")+'"';case"number":return isNaN(t)?null:t;case"boolean":return t;case"function":return n(t.toString());default:return'"undefined"'}}),Nt=d.addEventListener?(mt=function(t,e,n,r){return t.addEventListener(e,n,r)},function(t,e,n){return t.removeEventListener(e,n)}):(mt=function(t,e,n){return t.attachEvent("on"+e,n)},function(t,e,n){return t.detachEvent("on"+e,n)}),qt=d.encodeURIComponent,Mt=function(){return!document.addEventListener},At=d.location.protocol,jt="http:",Ht=function(){return Lt(Dt(32),8)+"-"+Lt(Dt(16),4)+"-"+Lt(16384|Dt(12),4)+"-"+Lt(32768|Dt(14),4)+"-"+Lt(Dt(48),12)};function Dt(t){return t<0?NaN:t<=30?0|Math.random()*(1<<t):t<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<t-30))*(1<<30):NaN}function Lt(t,e){for(var n=t.toString(16),r=e-n.length,i="0";0<r;r>>>=1,i+=i)1&r&&(n=i+n);return n}e.prototype={on:function(t,e){var n=this;return yt(t)?(n.events[t]||(n.events[t]=[])).push(e):_t(t)&&p(t,function(t){n.on(t,e)}),n},off:function(t,e){var n=arguments.length,r=this;if(0===n)return r.events={},r;var i=r.events[t];if(!i)return r;if(1===n)return r.events[t]=null,r;for(var o=i.length;o--;)if(i[o]===e){i.splice(o,1);break}return r},emit:function(t){var e=[].slice.call(arguments,1),n=this.events[t];return n&&p(n,function(t){return t.apply(this,e)}),this},unshift:function(t,e){return(this.events[t]||(this.events[t]=[])).unshift(e),this}};var Bt,zt,Pt,Ut,Ft,Yt="error",Gt="load",Xt="unload",Wt="beforeunload",Jt="pagehide",Kt="readystatechange",Vt="TY_DISTINCT_ID",$t="TY_SESSION_ID",Zt="_ty_rum",Qt="TINGYUN",te="__ign",ee="ty_",ne="X-Tingyun-Id",re="X-Tingyun-Tx-Data",ie="XHR",oe="FETCH",ae="ty_rum_path",se="__TINGYUN",ue=["trace","debug","info","warn","error"],ce=18e5,fe="|",le="__TY_SPE_STORE",de=6e4,he="auto",pe=200,ge="success",ve="fail",me="paint",ye="first-paint",_e="largest-contentful-paint",xe=5e3,be=d.Error,Se=d.document,Ee=d.XMLHttpRequest,we={server:{id:"C0UKgY0m8NI",ignore_err:!0,beacon:"beacon.tingyun.com",beacon_err:"beacon-err.tingyun.com",key:"_jprNxYhZmA",trace_threshold:7e3,fp_threshold:2e3,fs_threshold:4e3,dr_threshold:4e3,custom_urls:[],sr:1}},Te=g({fp_threshold:2e3,fs_threshold:4e3,dr_threshold:4e3},Te=we.server||{},d[se]&&d[se].config||{}),ke=f("ignore_err"),Ce=f("debug"),Ie=d.location,Oe=d.navigator,Re=d.HTMLElement,Ot=function(){try{var t=Ht();return d.localStorage.setItem(t,t),d.localStorage.removeItem(t),!0}catch(t){return!1}}(),Ne={};Ne.localStorage=Ot,Se.documentElement,Pt=Se.createElement("div"),(Ut=Se.createElement("div")).style&&(Ut.style.cssText="float:left;opacity:.5",Ne.opacity="0.5"===Ut.style.opacity,Ne.cssFloat=!!Ut.style.cssFloat,Ut.style.backgroundClip="content-box",Ut.cloneNode(!0).style.backgroundClip="",Ne.clearCloneStyle="content-box"===Ut.style.backgroundClip,(Pt=Se.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Ut.innerHTML="",Pt.appendChild(Ut),Ne.boxSizing=""===Ut.style.boxSizing||""===Ut.style.MozBoxSizing||""===Ut.style.WebkitBoxSizing,Ne.reliableHiddenOffsets=function(){return null==Bt&&((e=Se.documentElement).appendChild(Pt),Ut.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Bt=!1,0,d.getComputedStyle&&(t=d.getComputedStyle(Ut),Bt="1%"!==(t||{}).top,(t||{}).marginLeft,(t||{width:"4px"}).width,Ut.style.marginRight="50%",(t||{marginRight:"4px"}).marginRight,(t=Ut.appendChild(Se.createElement("div"))).style.cssText=Ut.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",Ut.style.width="1px",parseFloat((d.getComputedStyle(t)||{}).marginRight),Ut.removeChild(t)),Ut.style.display="none",(zt=0===Ut.getClientRects().length)&&(Ut.style.display="",Ut.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(t=Ut.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(zt=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",zt=0===t[0].offsetHeight)),e.removeChild(Pt)),zt;var t,e});var qe,Me,Ae,je,He=Ne.localStorage?(Ft=function(t){return d.localStorage.getItem(t)},function(t,e){return d.localStorage.setItem(t,e),e}):(Ft=l,_),De="display:none",Le=S;d.XDomainRequest?qe=function(t,e,n,r){xt(n)&&(r=n);var i=new XDomainRequest;i.open("POST",t),i.onload=function(){r(null,i.responseText)},i.onerror=function(t){r(t)},i.send(Rt(e))}:Mt()?qe=b:Oe.sendBeacon?Le=qe=function(t,e,n,r){xt(n)&&(r=n,n=null),Oe.sendBeacon(t,Rt(e))?r&&r():S(t,e,n,r)}:qe=S,Me=d.navigator.standalone,Ae=d.navigator.userAgent.toLowerCase(),je=/safari/.test(Ae),!/iphone|ipod|ipad/.test(Ae)||Me||je||(Le=qe=S);var Be=Ce,ze={start:h,e:{},an:{count:0},visible:[]},Pe={},Ue={},Fe={pf:!1,poMetricCollected:!1,pfWaitingPoMetric:!1},Ye={uniqueId:0,xhrs:[]},Ge={recording:!1,xhrs:[]},Xe={},We={},Je={},Ke={},Ot=d.screen;Ot&&(Ke.sh=Ot.height,Ke.sw=Ot.width);var Ve,$e,Ze=[],Qe=[],tn="{0} not support",en=(Ot=Te.custom_urls,Ve=[],p(Ot,function(t){try{Ve.push(new RegExp(t))}catch(t){T(t&&t.message)}}),Ve),nn=en.length?function(e){var n=e.url;!Sn.ct&&n&&p(en,function(t){if(n.match(t))return Sn.ct=e.end,!1})}:s,Ot=q.prototype;Ot.create=Ot.before=Ot.after=Ot.error=null;var rn=(!(j.prototype={createContext:function(){return Object.create?Object.create(this.active):(e=this.active,t.prototype=e,new t);function t(){}var e},get:function(t){if(this.active)return this.active[t]},set:function(t,e){if(this.active)return this.active[t]=e},enter:function(t){if(!t)throw new be("context required!");this._set.push(this.active),this.active=t},exit:function(t){if(!t)throw new be("context required!");if(t!==this.active){t=this._set.lastIndexOf?this._set.lastIndexOf(t):function(t,e){var n=null==t?0:t.length;if(!n)return-1;for(var r=n;r--;)if(t[r]===e)return r;return r}(this._set,t);if(t<0)throw new be("context not currently entered!");this._set.splice(t,1)}else this.active=this._set.pop()},bind:function(t,n){n=n||(this.active||this.createContext());var r=this;return function(){r.enter(n);try{return t.apply(this,arguments)}catch(t){try{var e="moduleId";t[e]=n[e]}catch(t){}throw t}finally{r.exit(n)}}}})||(rn=H(),0),rn),on=void 0!==d.console,Ot=D.prototype;Ot.fail=Ot.end=s;Ot=L.prototype;Ot.end=Ot.finish=Ot.fail=null,Ot.send=function(t){this.sent=!0;t=this.getEventData(t);Sn.emit("send","/spe",null,t,s)},Ot.getEventData=function(t){var e=this,t=t.event&&t.event.xhrs||[];return p(t,function(t){t.start=t.start-e.s}),{key:e.key,start:e.s,duration:e.e-e.s,status:e.status,type:e.type,xhrs:t}},Ot.refreshEventAndStore=function(t){this.finish();t=this.getEventData(t);d.localStorage.setItem(le,Rt(t))};var an={},sn="requestStart",un="responseStart",cn="responseEnd",fn="domContentLoadedEventStart",ln="domainLookupStart",dn="domainLookupEnd",hn="connectStart",pn="connectEnd",gn="secureConnectionStart",vn=function(t){if(!t.agent){var e=d._ty_rum;if(e&&e.agent)t.agent=e.agent;else{var n="TINGYUN_DATA",e=l(n);if(e){try{t.agent=I(decodeURIComponent(e))}catch(t){T(t&&t.message)}_(n,"",-1e3)}}}return t.agent}(we);vn&&vn.ulabel&&(Pe.ulabel=vn.ulabel);var mn,yn,_n=u(function(){var t=d.performance,e=!!t;e||k(v(tn,["pf"]));var n,r=(n={},(f=vn)&&(n.id=f.id,n.a=f.a,n.q=f.q,n.tid=f.tid,n.n=f.n),n),i=t&&t.timing,o=g(F(i),r,Pe),a=g({},Ke);a.ressize=!!i,Sn.fp?(a.fp=Sn.fp,e&&Sn.fp>Sn._le&&(k("fp>le"),a.fp=G(t,a))):a.fp=e?G(t,a):a.__fp=0,a.dr=(f=h,n=0,(r=i)&&(f=r.navigationStart||f,n=r[fn]||r.domInteractive||r.domLoading||n),(n=n||Sn._end)-f),e?a.fs=X(t,i,a.fp,a):a.__fs=0;var s,u,c="",f=W(),l=g(o,a)||{};f&&p(f,function(t,e){St(t)&&0<=t&&(l[e]=t)}),e&&(a="trace",e=(e=Math.max(l.ls,0))||U()-i.navigationStart||h,l[a]=e,u=function(t){if(t){var e=t.fetchStart;if(e)return e-t.navigationStart}}(i),p(["fp","fs","dr",a],function(t){c+=(u?l[t]-u:l[t])>=Te[t+"_threshold"]?"1":"0"}),delete l[a],-1<c.indexOf("1")&&(s=Y(t,i)),f&&((s=s||{}).mark=f)),l.trflag=c||"0000",Ue.pfStart=y(),delete l.firstScreenResources,delete l.resources,s=s&&function t(e,n){var r=Rt(e);if(64512<(r?r.length:0)&&e.res&&0<e.res.length)return e.res=e.res.slice(0,n),64512<((r=Rt(e))?r.length:0)?t(e,0<n-10?n-10:0):e;return e}(s,150),Sn.emit("send","/pf",l,s,function(){k("pf sent!"),Sn.xhrs=Sn.errs=null,Fe.pf=!0,function(){try{p(Je,function(t){t&&t.disconnect()})}catch(t){}}(),setTimeout(z,Te.crosspage_ajax_store_time||1e4)})});Ce&&(Ce="visibilitychange",Et(Se.hidden)?Et(Se.msHidden)?Et(Se.webkitHidden)||(mn="webkitHidden",bn="webkit"+Ce):(mn="msHidden",bn="ms"+Ce):(mn="hidden",bn=Ce),Et(Se.addEventListener)||Et(Se[mn])||mt(Se,bn,(yn=function(){ze.visible.push([Se[mn],y()])},function(){Be&&yn.apply(this,arguments)})));var xn=new e,bn=$.prototype;bn.start=function(){if(!Te.key)return T("missing config, agent disabled!"),!1;var t=d[Zt]||d[Qt];return t&&t.server?(T("already loaded!"),!1):(V(),d.localStorage.getItem(le)&&(Ge.recording=!0),this)},g(bn,e.prototype);var Sn=new $;Sn.on("send",function(t,e,n,r){var i,o;i=y(),et(o=Z())?(o=tt(),wn.sid=o[0]):(o[2]=i,Q(o));e=c(Te.beacon,t,g({},wn,e||{},Xe||{}));"/pf"===(r=r||s,t)?n?qe(e,n,function(){Sn.xhrs=Sn.errs=null,r()}):Le(e,void 0,r):qe(e,n,r)});var En,wn={pvid:Ht(),ref:Se.URL,referrer:Se.referrer,key:Te.key,v:"1.8.5",av:"1.8.5",did:function(){if(Te&&Te.did_cookie){var t=l(Te.did_cookie);if(null!=t)return t}return(t=Ft(Vt))||He(Vt,Ht(),86400)}(),sid:(En=et(En=Z())?tt():En)?En[0]:""},Tn=Re?function(t){return t instanceof Re}:function(t){t&&"object"==typeof t&&1===t.nodeType&&yt(t.nodeName)},kn={},Cn="onerror",In=1e4,On=0;nt.prototype={add:function(t,e){this.len>this.limit||this.get(t)||(this.c[t]=e,this.len++)},get:function(t){return this.c[t]},reset:function(){this.c={},this.len=0}};var Rn=new nt(100),Nn={};rt.prototype={increase:function(){this.count++},fix:function(){var n,t=this.stack;t&&yt(t)&&(t=t.split(/\n/),n=[],p(t,function(t,e){-1==t.indexOf("__ty_aysncWrap__")&&n.push(t)}),this.stack=n.join("\n"))},toObject:function(){var t=this;return{o:t.time,e:t.msg,l:t.lineno,c:t.colno,r:t.filename,ec:t.count,s:t.stack,m:t.module,ep:t.ep,tr:t.trigger,co:t.customObj}}};var qn,Mn,An,jn=(qn=/(msie|trident)/i.test(Oe.userAgent),Mn=Se.createElement("a"),An=Un(Ie.href),function(t){var e,n,t=Un(t);return t.protocol===An.protocol&&t.host===An.host||(e=t.host,n=!1,Te.cors_domains&&p(Te.cors_domains,function(t){if(-1<e.indexOf(t))return!(n=!0)}),n)}),Hn={error:990,abort:905,timeout:903},Dn="on"+Kt,Ln=2e3,Bn=[],zn=[],Pn={};function Un(t){return qn&&(Mn.setAttribute("href",t),t=Mn.href),Mn.setAttribute("href",t),{href:Mn.href,protocol:Mn.protocol?Mn.protocol.replace(/:$/,""):"",host:Mn.host,search:Mn.search?Mn.search.replace(/^\?/,""):"",hash:Mn.hash?Mn.hash.replace(/^#/,""):"",hostname:Mn.hostname,port:Mn.port,pathname:"/"===Mn.pathname.charAt(0)?Mn.pathname:"/"+Mn.pathname}}0<ue.length&&(p(ue,function(n){Pn[n]=function(t,e){t={msg:t||"",time:e&&e._time||y(),level:n};e&&(t.options=e),zn.push(t)}}),Pn.info&&(Pn.log=Pn.info));var Fn={},Yn={host:"cshst",url:"csurl"},Gn={version:"1.8.5",config:function(t,e){var n;if(bt(t))n=t;else{if(!yt(t)||void 0===e)throw new be("illegal argument");(n={})[t]=e}return p(n,function(t,e){e in Yn?Pe[Yn[e]]=t:Pe[e]=t}),this},DIAGNOSE_HREF:2,diagnose:function(t){function n(t,e,n){n=n||"log",t=r[t]||(r[t]={});t[n]=t[n]||"",t[n]+=e}var r={};if(T(),n("Status",void 0,!0),n("Debug",k()),p(kn,function(t,e){n("Timeline",e+": "+t.toString())}),!t&&on)console.log("[TingYun Agent Diagnosis]\n"),p(r,function(t,e){p(console[e],function(t,e){console[e](t)})});else{if(2!==t)return Rt(r);Ie.href=Ie.href+"#"+Rt(r)}},createEvent:B,logFirstScreen:function(t){var e;t&&(e=Pe.firstScreenResources=Pe.firstScreenResources||[],p(t=!_t(t)?[t]:t,function(t){yt(t)?e.push(t):!Tn(t)||(t=t.src||t.href)&&e.push(t)}))},addExcludedDomain:function(t){p(t=!_t(t)?[t]:t,function(t){if(t){if(!(t instanceof RegExp))throw new be("parameter's type requires RegExp");(we.domains||(we.domains=[])).push(t)}})},setError:function(t,e){var n,i,o,a;t&&(n=t.message||"",t=t.stack,i="",a=o=0,t&&p(t.split(/\n/),function(t,e){var n,r;if((t=t&&t.trim())&&0===t.indexOf("at ")&&(n=t.indexOf("("),r=t.indexOf(")"),n&&r&&(!(r=t.substring(n=r<(n=n+1)?r:n,r))||(r=r.split(":"))&&2<r.length&&(i=(r.slice(0,r.length-2)||[]).join(":"),o=+r[r.length-2],a=+r[r.length-1]))),i&&St(o)&&0<o&&St(a)&&0<a)return!1}),ot(n,i,o,a,{stack:t},"api",e))},addAjax:function(t){var e;t&&bt(t)&&(e=(e=t.du)||(0<t.status&&t.end&&t.start?t.end-t.start:0),t={req:t.method+" "+t.url,start:t.start,du:e,cb:t.cb||0,status:t.status||0,err:t.err||0,rec:t.rec||0,send:t.send||0,type:"CUSTOM_AJAX"},Ye.xhrs||(Ye.xhrs=[]),Ye.xhrs.push(t))},setDid:function(t){Xe&&(Xe.did=t)},mark:function(t,e){var n;t&&(t=(n=t.split("_"))[0],n=n[1],"ty"===t&&n&&(n=n,e={timestamp:y(),data:e},We[n]=e))},endStoreEvent:function(t){m(function(){!function(t){var e=I(d.localStorage.getItem(le));if(e&&e.start&&(!(t=t||{}).key||e.key===t.key)){var n=(n=t.timeout)||de;if(e.duration=y()-e.start,e.duration>n)return d.localStorage.removeItem(le);if(Ge.xhrs&&0<Ge.xhrs.length){e.xhrs||(e.xhrs=[]);try{p(Ge.xhrs,function(t){t.start=t.start-e.start}),e.xhrs=e.xhrs.concat(Ge.xhrs)}catch(t){}z()}n=d.performance.timing;n.navigationStart&&(n.loadEventEnd||n.loadEventStart)&&0<=n.navigationStart-e.start&&(r={req:"GET "+document.URL,status:200,type:"PF",start:n.navigationStart-e.start,du:(n.loadEventEnd||n.loadEventStart)-n.navigationStart},vn&&(r.s_id=vn.id,r.s_name=vn.n,r.s_du=vn.a,r.s_qu=vn.q,r.t_id=vn.tid),e.xhrs||(e.xhrs=[]),e.xhrs.push(r));var r=1;t.status&&(r=t.status===ge?1:0),e.status=r,d.localStorage.removeItem(le),Sn.emit("send","/spe",null,e,s)}}(t)})},wrapVueRouter:function(t,r){bt(r)||(r={}),t&&t.beforeEach&&t.afterEach&&(t.beforeEach(function(t,e,n){t=t.path;Fn[t]&&!Fn[t].e||(Fn[t]=P({key:t})),n()}),t.afterEach(function(t,e){var n=t.path;setTimeout(function(){var t=Fn[n];!t||t.called||t.e||(r&&r.status===ve?t.fail():t.end())},r.endDelay||pe)}))},packageTime:"20200724",createAutoEvent:P},ue=Pn||{};ue&&p(ue,function(t,e){Gn[e]=t}),d[Zt]=d[Qt]=Gn;var Xn,Wn,Jn=0;return Sn.start()&&(xn.on(Gt,function(){var n,r=0;Te.pfDelay&&bt(Te.pfDelay)&&(n=W(),p(Te.pfDelay,function(t,e){(!n||null==n[e])&&St(t)&&r<t&&(r=t)})),setTimeout(J,r)}).on([Xt,Wt,Jt],J),gt(),(Wn=Mt())?at():mt(d,Yt,function(t){var e,n,r,i,o;(t instanceof d.Event||d.ErrorEvent&&t instanceof d.ErrorEvent)&&(e=t.message||t.error&&(t.error.message||t.error.constructor.name)||"",n=t.lineno||0,r=t.colno||0,(i=t.filename||t.error&&t.error.filename||t.target&&t.target.baseURI||"")==Se.URL&&(i="#"),o=t.error),ot(e,i,n,r,o,Cn)}),xn.on([Gt,Xt,Wt,Jt],function(t){it()}).on(Gt,function(){Wn&&m(st)}),setInterval(it,In)),Sn._end=y(),w(function(){ze._end=Sn._end}),Object.defineProperty&&(Xn=d[Zt],Object.defineProperty(d,Zt,{get:function(){return 0<Jn++&&d.console&&console.warn("window.%s is deprecated, use window.%s instead.",Zt,Qt),Xn}})),Gn}(window,+new Date);
