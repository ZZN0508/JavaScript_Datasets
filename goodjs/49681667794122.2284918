var b$=b$||{};b$.universal=b$.universal||{},b$.universal.widgets=b$.universal.widgets||{},b$.universal.widgets.lifestageWidget=function(c){"use strict";define("home-overlay-links",function(e,t,n){n.exports={homeOverlayone:function(e,l,s,d,t){c(".homeOverlayLinks .overlay-links ul li a img").each(function(){0<this.src.length?c(this).addClass("list-icon"):c(this).hide()}),c(l.htmlNode).find(".homeOverlayLinks .overlay-links ul li").on("click",function(e){var t=c(this).children("li a").text();(-1<t.indexOf("chat")||-1<t.indexOf("Chat"))&&(e.preventDefault(),toggleEvaChat())}),c.ajax({url:e,success:function(e){var r,i=e,a=i.list,t=c(l.htmlNode).parents(".right-side-scroll-fix").css("transform");c(l.htmlNode).find(".overlay-links ul li a").on("click",function(e){c(".breadcrumb.hdfc-portal-breadcrum").css("z-index","0"),e.preventDefault();var t,n,o,e=c(this).text();e.indexOf("chat")<0&&e.indexOf("Chat")<0&&(e="",0<=(r=i.SplittedMenu.leftMenuUrl?c(this).parent("li").index()-1:c(this).parent("li").index())&&(null!=a[r].url&&(e=a[r].url),t=m+a[r].loginUrl,n=a[r].listName,o=a[r].overlayDescription),0==d&&0<=r?1==a[r].isLoginRequired&&0==d?(c(".c-template-hdfc-middle-section .large-side-scroll-fix").css("z-index","0"),c(l.htmlNode).parents(".right-side-scroll-fix").css("transform",""),c(l.htmlNode).find(".popup-heading").text(n),c(l.htmlNode).find(".popup-description").text(o),c(l.htmlNode).find(".know-more").attr("href",m+e),c(l.htmlNode).find(".nb-login").attr("href",m+"/login?redirect="+m+a[r].loginUrl),c(l.htmlNode).find(".nb-login").attr("value","decision"),"SME popup"==a[r].overlayTypeSME&&(c(l.htmlNode).find(".nb-login").attr("value",""),c(l.htmlNode).find(".nb-login").on("click",function(e){e.preventDefault(),gadgets.pubsub.publish("otherLogin","sme")})),c(l.htmlNode).find(".cover").css("display","block"),c("body").addClass("stop-scroll"),c(".bp-manageableArea").css("z-index","99999"),c(".middle-menu-bar").css("z-index","0"),c(l.htmlNode).find(".popup-container").addClass("opened"),null!=a[r].KnowMoreButtonName?c(l.htmlNode).find(".know-more").text(a[r].KnowMoreButtonName):c(l.htmlNode).find(".know-more").text("Know More"),null!=a[r].loginButtonName?c(l.htmlNode).find(".nb-login").text(a[r].loginButtonName):c(l.htmlNode).find(".nb-login").text("Login")):-1<e.toString().indexOf(".pdf")?window.open(s+"/content/bbp/repositories/723fb80a-2dde-42a3-9793-7ae1be57c87f/?path="+e,"_blank"):-1<e.indexOf("http")?"ext-link"==c(this).attr("value")?event.preventDefault():f.portal.navigateTo(e):0<=r&&(null==a[r].url&&1==a[r].overlayRequired?(event.preventDefault(),c(this).attr("href","#")):f.portal.navigateTo(m+e)):-1<e.indexOf("http")?f.portal.navigateTo(e):r<0?f.portal.navigateTo(c(this)[0].pathname):f.portal.navigateTo(t))}),c(".close-button, .nb-login").on("click",function(){c(".bp-manageableArea").css("z-index",""),c(".middle-menu-bar").css("z-index","99999"),c(l.htmlNode).parents(".right-side-scroll-fix").css("transform",t),c(l.htmlNode).find(".cover").css("display","none"),c("body").removeClass("stop-scroll"),c(l.htmlNode).find(".popup-container").removeClass("opened"),c(".breadcrumb.hdfc-portal-breadcrum").css("z-index","9")}),c(l.htmlNode).find(".overlay-links .view-all a").attr("href","javascript:void(0)")},error:function(e){}})}}}),define("gap",function(e,t,n){c(".lifestageContainer .lifestageParent .superParent .adbannersParent").on("click",function(){var e,t,n,o,r;f.portal.isGapDisabled()||f.portal.isLogin||(e=c(this).children(".heading").text(),t=document.referrer,n=window.location.href,o=c(".header-menu .navbar-collapse .normal-main-header li.active a").text(),r=f.portal.typeOfDevice(),dataLayer.push({articlename:e,referral:t,"page path":n,"Page section":o,userID:"null",deviceType:r,userType:"null",event:"Lifestage Solutions"}))})}),define("utils",["features/%5BBBHOST%5D/feature-hdfc-slick-slider/scripts/slick"],function(e,t,n){c(".adbannersParent").on("click",function(){var e=c(this).find(".adLink").attr("href");f.portal.navigateTo(e)}),c(".lifestage-slider .regular").slick({dots:!1,infinite:!1,adaptiveHeight:!0,arrows:!1,responsive:[{breakpoint:768,settings:{slidesToShow:1.5,slidesToScroll:1}},{breakpoint:541,settings:{slidesToShow:1.3,slidesToScroll:1}},{breakpoint:481,settings:{slidesToShow:1.2,slidesToScroll:1}},{breakpoint:321,settings:{slidesToShow:1.1,slidesToScroll:1}}]}),c(".offersSubParent,.offers-imp").on("click",function(){var e=c(this).find(".offersLink").attr("href");f.portal.navigateTo(e)}),c(".life-parent .trustedSuperParent").eq(1).css("padding-top","0px"),c(".life-parent .trustedSuperParent").eq(1).css("border-bottom","1px solid #dedede"),c(".lifestageParent .offersSuperParent").eq(1).find(".offersParent").css("border-bottom","none"),c(".lifestageParent .offersSuperParent").eq(1).css("border-bottom","1px solid #dedede"),c(".offers-slider .regular").slick({dots:!1,infinite:!1,arrows:!1,adaptiveHeight:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1.5,slidesToScroll:1}},{breakpoint:540,settings:{slidesToShow:1.3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1.2,slidesToScroll:1}},{breakpoint:320,settings:{slidesToShow:1.1,slidesToScroll:1}}]})}),c(document).ready(function(){var n=[];c(".Identify").each(function(e,t){n.push(c(t).text().trim())});for(var e=n.filter(function(e,t,n){return t==n.indexOf(e)}),t=0;t<e.length;t++);c(".sub-content").each(function(e,t){0==e?c(this).css("display","block"):c(this).css("display","none")}),c(".allMilesTabs li:first-child").addClass("active"),c(".allMilesTabs li").on("click",function(){var n=c(this).index();c(".allMilesTabs").find(".active").removeClass("active"),c(".allMilesTabs li").eq(n).addClass("active"),c(".sub-content").each(function(e,t){e==n?c(this).css("display","block"):c(this).css("display","none")})}),c(".arrow-icon").addClass("glyphicon-menu-down"),c(".hideForLarge").on("click",function(){c(this).next().slideToggle(),c(this).find(".arrow-icon").hasClass("glyphicon-menu-up")?(c(this).find(".arrow-icon").removeClass("glyphicon-menu-up"),c(this).find(".arrow-icon").addClass("glyphicon-menu-down")):c(this).find(".arrow-icon").hasClass("glyphicon-menu-down")&&(c(this).find(".arrow-icon").removeClass("glyphicon-menu-down"),c(this).find(".arrow-icon").addClass("glyphicon-menu-up"))})});var p="cs",f=window.b$||{},u=(f.portal.portalName,""!=f.portal.loggedInUserId&&null!=f.portal.loggedInUserId||""!=f.portal.loggedInUserRole&&null!=f.portal.loggedInUserRole),h=f.portal.portalName,m=f.portal.urlRedirect;return{prefModified:function(e){e.refreshIncludes();var t=c(e.htmlNode);c(".bd-structured-content-widget",t).attr("data-type",e.getPreference("contentType")||"Content")},start:function(a){for(var e,t=[],n=0;n<a.model.preferences.array.length;n++)"templateUrl"==a.model.preferences.array[n].name&&(e=a.model.preferences.array[n].value);var o=a.getPreference("urlContent"),r=f.portal.portalModel.serverURL;null!=o&&(l=o.indexOf("content"),d=o.slice(l,o.length),o=r+"/"+d),null==e||(t=e.split("/"));var i,l=a.getPreference("contentRef"),s=c(a.htmlNode),d=!1;try{top.bd}catch(e){d=!0}(window.be&&!d&&be.utils.module("top.bd.PageMgmtTree.selectedLink").isMasterPage||"true"===a.model.manageable||""===a.model.manageable||void 0===a.model.manageable)&&(l||s.addClass("bd-empty-structured-content"),c(".bd-structured-content-widget",s).attr("data-type",a.getPreference("contentType")||"Content"),a.addEventListener("preferences-form",function(e){for(var t=f.portal.portalModel.filterPreferences(a.model.preferences.array),n=t.length-1;0<=n;n--)if("Template"==t[n].label)for(var o=a.getPreference("templateList").split(","),r=0,i=0;r<o.length;r++,i++)t[n].inputType.options[i]={label:o[r],value:o[r+1]},r++}),a.addEventListener("bdDrop.enter",function(e){e=e.detail.info.helper.bdDragData.fileDataArray[0];e.metaData&&e.metaData["cmis:objectTypeId"]&&"bb:structuredcontent"===e.metaData["cmis:objectTypeId"].property?(i=e,s.addClass("bd-over-structured-content")):i=void 0}),a.addEventListener("bdDrop.leave",function(e){s.removeClass("bd-over-structured-content")}),a.addEventListener("bdDrop.drop",function(e){var t=e.detail.info.helper.bdDragData.fileDataArray[0];i&&(a.model.preferences.getByName("contentRef")||(e=f.portal.portalModel.createPreference("contentRef","contentRef",void 0,""),a.model.preferences.add(e)),a.setPreference("urlContent",t.url),a.setPreference("contentRef",[p,"contentRepository"===i.repository?i.repository:"@portalRepository",i.contentUId].join(":")),a.model.save(function(){a.refreshHTML(),s.removeClass("bd-empty-structured-content")}),s.removeClass("bd-over-structured-content")),i=void 0}),window.bd&&window.bd.bindDropEvents&&window.bd.bindDropEvents(a.htmlNode),"home-overlay-links.html"==t[t.length-1]&&require(["home-overlay-links"],function(e){e.homeOverlayone(o,a,r,u,h)}),require(["gap"]),require(["utils"]))}}}(jQuery);
