!function(f){function e(t,i){t.Ma("onAutonavCoundownStarted",i)}function b(t,i,e){var s=i.eb();f.L(t.element,"ytp-suggestion-set",!!s.videoId);var n=i.getPlaylistId();e=i.De(e||"mqdefault.jpg");var a=null,h=null;i instanceof f.HF&&(i.lengthText?(a=i.lengthText||null,h=i.Cw||null):i.lengthSeconds&&(a=f.QK(i.lengthSeconds),h=f.QK(i.lengthSeconds,!0)));var o=!!n,n=o&&"RD"===new f.PL(n.substr(0,2),n.substr(2)).type,l=i instanceof f.HF?i.isLivePlayback:null,u=i instanceof f.HF?i.isUpcoming:null,s={title:i.title,author:i.author,author_and_views:s.shortViewCount?i.author+" • "+s.shortViewCount:i.author,aria_label:i.Lr||f.zH("观看《$TITLE》",{TITLE:i.title}),duration:a,timestamp:h,url:i.nm(),is_live:l,is_upcoming:u,is_list:o,is_mix:n,background:e?"background-image: url("+e+")":"",views_and_publish_time:s.shortViewCount?s.shortViewCount+" • "+s.publishedTimeText:s.publishedTimeText,autoplayAlternativeHeader:i.Or};i instanceof f.QL&&(s.playlist_length=i.length),t.update(s)}function a(t){var i=t.T(),e=i.l;f.V.call(this,{D:"a",K:"ytp-autonav-suggestion-card",V:{href:"{{url}}",target:e?i.G:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},S:[{D:"div",Ca:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],V:{style:"{{background}}"},S:[{D:"div",V:{"aria-label":"{{timestamp}}"},Ca:["ytp-autonav-timestamp"],oa:"{{duration}}"},{D:"div",Ca:["ytp-autonav-live-stamp"],oa:"直播"},{D:"div",Ca:["ytp-autonav-upcoming-stamp"],oa:"即将直播"},{D:"div",K:"ytp-autonav-list-overlay",S:[{D:"div",K:"ytp-autonav-mix-text",oa:"视频合辑"},{D:"div",K:"ytp-autonav-mix-icon"}]}]},{D:"div",Ca:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],oa:"{{title}}"},{D:"div",Ca:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],oa:"{{author}}"},{D:"div",Ca:["ytp-autonav-endscreen-upnext-author","ytp-autonav-view-and-date-card"],oa:"{{views_and_publish_time}}"}]}),this.I=t,this.suggestion=null,this.i=e,this.Qa("click",this.onClick),this.Qa("keypress",this.l)}function s(t,i){i=p(t,i);var e=(n=Math).min,s=(0,f.P)()-t.l,n=e.call(n,s,i);i=0===i?1:Math.min(n/i,1),t.C.setAttribute("stroke-dashoffset",""+-211*(i+1)),1<=i&&t.ih()&&!d(t)?t.select(!0):t.ih()&&t.i.start()}function n(t){var i=t.Id();i!==t.C&&(t.C=i,t.player.W("autonavvisibility"),t.C?(t.l!==t.i&&t.l.hide(),t.table.hide()):(t.l!==t.i&&t.l.show(),t.table.show()))}function m(t){var i=t.T(),e=f.nB||f.lg?{style:"will-change: opacity"}:void 0,s=i.l,n=["ytp-videowall-still"];i.i&&n.push("ytp-videowall-show-text"),f.V.call(this,{D:"a",Ca:n,V:{href:"{{url}}",target:s?i.G:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},S:[{D:"div",K:"ytp-videowall-still-image",V:{style:"{{background}}"}},{D:"span",K:"ytp-videowall-still-info",S:[{D:"span",K:"ytp-videowall-still-info-bg",S:[{D:"span",K:"ytp-videowall-still-info-content",V:e,S:[{D:"span",K:"ytp-videowall-still-info-title",oa:"{{title}}"},{D:"span",K:"ytp-videowall-still-info-author",oa:"{{author_and_views}}"},{D:"span",K:"ytp-videowall-still-info-live",oa:"直播"},{D:"span",K:"ytp-videowall-still-info-duration",oa:"{{duration}}"}]}]}]},{D:"span",Ca:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],S:[{D:"span",K:"ytp-videowall-still-listlabel-icon"},"播放列表",{D:"span",K:"ytp-videowall-still-listlabel-length",S:[" (",{D:"span",oa:"{{playlist_length}}"},")"]}]},{D:"span",Ca:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],S:[{D:"span",K:"ytp-videowall-still-listlabel-mix-icon"},"视频合辑",{D:"span",K:"ytp-videowall-still-listlabel-length",oa:" (50+)"}]}]}),this.suggestion=null,this.l=s,this.api=t,this.i=new f.NL(this),f.F(this,this.i),this.Qa("click",this.onClick),this.Qa("keypress",this.u),this.i.N(t,"videodatachange",this.jb),t.Bg(this.element,this),this.jb()}function w(t){return f.ML(t.player)&&t.Nr()&&!t.B}function i(i,t){return f.Kc(t.suggestions,function(t){return t=f.sO(i.I.T(),t),f.F(i,t),t})}function D(t){var i=t.Id();i!==t.J&&(t.J=i,t.player.W("autonavvisibility"))}function t(t){f.YL.call(this,t);var i=this;this.endScreen=null,this.i=this.l=this.u=!1,this.listeners=new f.NL(this),f.F(this,this.listeners),this.env=t.T(),I(t)?(this.u=!0,x(this),this.i?this.endScreen=new y(t):this.endScreen=new g(this.player)):this.env.uc?this.endScreen=new v(this.player):this.endScreen=new r(this.player),f.F(this,this.endScreen),f.LL(this.player,this.endScreen.element,4),V(this),this.listeners.N(t,"videodatachange",this.jb,this),this.listeners.N(t,f.Zv("endscreen"),function(t){i.xd(t)}),this.listeners.N(t,f.$v("endscreen"),function(t){i.Te(t)})}var h=this,k=function(t,i){i=void 0!==i&&i,f.V.call(this,{D:"div",K:"ytp-autonav-endscreen-countdown-container"});var e=this;this.C=i,this.l=0;var s=(i=t.T()).l;this.I=t,this.suggestion=null,this.i=new f.V({D:"div",K:"ytp-autonav-endscreen-upnext-container",V:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},S:[{D:"div",K:"ytp-autonav-endscreen-upnext-header"},{D:"div",K:"ytp-autonav-endscreen-upnext-alternative-header",oa:"{{autoplayAlternativeHeader}}"},{D:"a",K:"ytp-autonav-endscreen-link-container",V:{href:"{{url}}",target:s?i.G:""},S:[{D:"div",K:"ytp-autonav-endscreen-upnext-thumbnail",V:{style:"{{background}}"},S:[{D:"div",V:{"aria-label":"{{timestamp}}"},Ca:["ytp-autonav-timestamp"],oa:"{{duration}}"},{D:"div",Ca:["ytp-autonav-live-stamp"],oa:"直播"},{D:"div",Ca:["ytp-autonav-upcoming-stamp"],oa:"即将直播"}]},{D:"div",K:"ytp-autonav-endscreen-video-info",S:[{D:"div",K:"ytp-autonav-endscreen-premium-badge"},{D:"div",K:"ytp-autonav-endscreen-upnext-title",oa:"{{title}}"},{D:"div",K:"ytp-autonav-endscreen-upnext-author",oa:"{{author}}"},{D:"div",K:"ytp-autonav-view-and-date",oa:"{{views_and_publish_time}}"},{D:"div",K:"ytp-autonav-author-and-view",oa:"{{author_and_views}}"}]}]}]}),f.F(this,this.i),this.i.ya(this.element),s||this.N(this.i.Ba("ytp-autonav-endscreen-link-container"),"click",this.fE),this.I.Xb(this.element,this,115127),this.I.Xb(this.i.Ba("ytp-autonav-endscreen-link-container"),this,115128),this.overlay=new f.V({D:"div",K:"ytp-autonav-overlay"}),f.F(this,this.overlay),this.overlay.ya(this.element),this.u=new f.V({D:"div",K:"ytp-autonav-endscreen-button-container"}),f.F(this,this.u),this.u.ya(this.element),this.cancelButton=new f.V({D:"button",Ca:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button"],V:{"aria-label":"取消自动播放"},oa:"取消"}),f.F(this,this.cancelButton),this.cancelButton.ya(this.u.element),this.cancelButton.Qa("click",this.WL,this),this.I.Xb(this.cancelButton.element,this,115129),this.playButton=new f.V({D:"a",Ca:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-play-button"],V:{href:"{{url}}",role:"button","aria-label":"播放下一个视频"},oa:"立即播放"}),f.F(this,this.playButton),this.playButton.ya(this.u.element),this.playButton.Qa("click",this.fE,this),this.I.Xb(this.playButton.element,this,115130),this.B=new f.J(function(){o(e)},500),f.F(this,this.B),this.eE(),this.N(t,"autonavvisibility",this.eE)},o=function(t){var i=l(t),e=(n=Math).min,s=t.l?Date.now()-t.l:0,n=e.call(n,s,i);u(t,Math.ceil((i-n)/1e3)),i-n<=500&&t.ih()?t.select(!0):t.ih()&&t.B.start()},l=function(t){var i=t.I.ao();return 0<=i?i:f.T(t.I.T().experiments,"autoplay_time")||1e4},u=function(t,i){if(i=void 0===i?-1:i,t=t.i.Ba("ytp-autonav-endscreen-upnext-header"),f.Ie(t),0<=i){i=String(i);var e="下一个视频将在 $SECONDS 秒后播放".match(/\$SECONDS/gi)[0],s="下一个视频将在 $SECONDS 秒后播放".indexOf(e);if(0<=s){t.appendChild(f.He("下一个视频将在 $SECONDS 秒后播放".slice(0,s)));var n=f.Ge("span");return f.yn(n,"ytp-autonav-endscreen-upnext-header-countdown-number"),f.Oe(n,i),t.appendChild(n),void t.appendChild(f.He("下一个视频将在 $SECONDS 秒后播放".slice(s+e.length)))}}f.Oe(t,"接下来播放")},r=function(t,i){f.V.call(this,{D:"div",Ca:["html5-endscreen","ytp-player-content",i||"base-endscreen"]}),this.created=!1,this.player=t},c=function(t){f.V.call(this,{D:"div",Ca:["ytp-upnext","ytp-player-content"],V:{"aria-label":"{{aria_label}}"},S:[{D:"div",K:"ytp-cued-thumbnail-overlay-image",V:{style:"{{background}}"}},{D:"span",K:"ytp-upnext-top",S:[{D:"span",K:"ytp-upnext-header",oa:"接下来播放"},{D:"span",K:"ytp-upnext-title",oa:"{{title}}"},{D:"span",K:"ytp-upnext-author",oa:"{{author}}"}]},{D:"a",K:"ytp-upnext-autoplay-icon",V:{role:"button",href:"{{url}}","aria-label":"播放下一个视频"},S:[{D:"svg",V:{height:"100%",version:"1.1",viewBox:"0 0 72 72",width:"100%"},S:[{D:"circle",K:"ytp-svg-autoplay-circle",V:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{D:"circle",K:"ytp-svg-autoplay-ring",V:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{D:"path",K:"ytp-svg-fill",V:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{D:"span",K:"ytp-upnext-bottom",S:[{D:"span",K:"ytp-upnext-cancel"},{D:"span",K:"ytp-upnext-paused",oa:"自动播放功能已暂停"}]}]}),this.api=t,this.cancelButton=null,this.C=this.Ba("ytp-svg-autoplay-ring"),this.u=this.notification=this.i=this.suggestion=null,this.B=new f.J(this.uv,5e3,this),this.l=0;var i=this.Ba("ytp-upnext-cancel");this.cancelButton=new f.V({D:"button",Ca:["ytp-upnext-cancel-button","ytp-button"],V:{tabindex:"0","aria-label":"取消自动播放"},oa:"取消"}),f.F(this,this.cancelButton),this.cancelButton.Qa("click",this.XL,this),this.cancelButton.ya(i),this.cancelButton&&this.api.Xb(this.cancelButton.element,this,115129),f.F(this,this.B),this.api.Xb(this.element,this,18788),i=this.Ba("ytp-upnext-autoplay-icon"),this.N(i,"click",this.YL),this.api.Xb(i,this,115130),this.gE(),this.N(t,"autonavvisibility",this.gE),this.N(t,"mdxnowautoplaying",this.wQ),this.N(t,"mdxautoplaycanceled",this.xQ),this.N(t,"mdxautoplayupnext",this.aK),d(this)&&(t=(t=f.HL(this.api.rb()))?t.ON():null)&&this.aK(t),f.L(this.element,"ytp-upnext-mobile",this.api.T().i)},d=function(t){return 3===t.api.getPresentingPlayerType()},p=function(t,i){return i||(0<=t.api.ao()?t.api.ao():f.T(t.api.T().experiments,"autoplay_time")||1e4)},y=function(t){r.call(this,t,"autonav-endscreen"),this.overlay=this.videoData=this.suggestions=null,this.table=new f.V({D:"div",K:"ytp-suggestion-panel",S:[{D:"div",Ca:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],oa:"更多视频"}]}),this.J=new f.V({D:"div",K:"ytp-suggestions-container"}),this.videos=[],this.u=null,this.C=this.G=!1,this.l=new k(this.player),f.F(this,this.l),this.l.ya(this.element),t.getVideoData().Nb?this.i=this.l:(this.i=new c(t),f.LL(this.player,this.i.element,4),f.F(this,this.i)),this.overlay=new f.V({D:"div",K:"ytp-autonav-overlay-cancelled-state"}),f.F(this,this.overlay),this.overlay.ya(this.element),this.B=new f.NL(this),f.F(this,this.B),f.F(this,this.table),this.table.ya(this.element),this.table.show(),f.F(this,this.J),this.J.ya(this.table.element),this.hide()},v=function(t){r.call(this,t,"subscribecard-endscreen"),this.i=new f.V({D:"div",K:"ytp-subscribe-card",S:[{D:"img",K:"ytp-author-image",V:{src:"{{profilePicture}}"}},{D:"div",K:"ytp-subscribe-card-right",S:[{D:"div",K:"ytp-author-name",oa:"{{author}}"},{D:"div",K:"html5-subscribe-button-container"}]}]}),f.F(this,this.i),this.i.ya(this.element);var i=t.getVideoData();this.subscribeButton=new f.eN("订阅",null,"退订",null,!0,!1,i.wh,i.subscribed,"trailer-endscreen",null,null,t),f.F(this,this.subscribeButton),this.subscribeButton.ya(this.i.Ba("html5-subscribe-button-container")),this.N(t,"videodatachange",this.La),this.La(),this.hide()},g=function(t){r.call(this,t,"videowall-endscreen");var i=this;this.I=t,this.u=0,this.stills=[],this.B=this.videoData=this.suggestions=null,this.C=this.J=!1,this.L=null,this.l=new f.NL(this),f.F(this,this.l),this.G=new f.J(function(){f.K(i.element,"ytp-show-tiles")},0),f.F(this,this.G);var e=new f.V({D:"button",Ca:["ytp-button","ytp-endscreen-previous"],V:{"aria-label":"上一个"},S:[f.YJ()]});f.F(this,e),e.ya(this.element),e.Qa("click",this.cM,this),this.table=new f.QJ({D:"div",K:"ytp-endscreen-content"}),f.F(this,this.table),this.table.ya(this.element),e=new f.V({D:"button",Ca:["ytp-button","ytp-endscreen-next"],V:{"aria-label":"下一个"},S:[f.ZJ()]}),f.F(this,e),e.ya(this.element),e.Qa("click",this.bM,this),t.getVideoData().Nb?this.i=new k(t,!0):this.i=new c(t),f.F(this,this.i),f.LL(this.player,this.i.element,4),this.hide()},x=function(t){var i=t.player.getVideoData();return!(!i||t.i===i.Zf&&t.l===i.Nb)&&(t.i=i.Zf,t.l=i.Nb,!0)},I=function(t){return(t=t.T()).qb&&!t.uc},V=function(t){t.player.Ve("endscreen");var i=t.player.getVideoData(),i=new f.Wv(Math.max(1e3*(i.lengthSeconds-10),0),0x8000000000000,{id:"preload",namespace:"endscreen"}),e=new f.Wv(0x8000000000000,0x8000000000000,{id:"load",priority:6,namespace:"endscreen"});t.player.Bd([i,e])};f.EL.prototype.ao=f.ca(2,function(){return this.app.ao()}),f.CW.prototype.ao=f.ca(1,function(){return this.getVideoData().YE}),f.v(a,f.V),a.prototype.select=function(){(this.I.ej(this.suggestion.eb().videoId,this.suggestion.Md,this.suggestion.getPlaylistId(),void 0,void 0,this.suggestion.nA||void 0)||this.I.Z("web_player_endscreen_double_log_fix_killswitch"))&&this.I.Fb(this.element)},a.prototype.onClick=function(t){f.wM(t,this.I,this.i,this.suggestion.Md||void 0)&&this.select()},a.prototype.l=function(t){switch(t.keyCode){case 13:case 32:f.vq(t)||(this.select(),f.uq(t))}},a.prototype.Xd=function(t){f.L(this.element,"ytp-suggestion-card-with-margin",t)},f.v(k,f.V),f.k=k.prototype,f.k.Dr=function(t){this.suggestion!==t&&(this.suggestion=t,b(this.i,t),this.playButton.Ra("url",this.suggestion.nm()),this.Xd())},f.k.Xd=function(){var t,i=this.I.Di(!0,this.I.isFullscreen());f.L(this.element,"ytp-autonav-endscreen-small-mode",this.Fe(i)),f.L(this.element,"ytp-autonav-endscreen-is-premium",!!this.suggestion&&!!this.suggestion.Ix),f.L(this.I.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!this.I.Id()),f.L(this.I.getRootNode(),"countdown-running",this.ih()),f.L(this.element,"ytp-player-content",this.I.Id()),f.ig(this.overlay.element,{width:i.width+"px"}),this.ih()||(this.I.Id()?u(this,Math.round(l(this)/1e3)):u(this),i=!!this.suggestion&&!!this.suggestion.Or,t=this.I.Id()||!i,f.L(this.element,"ytp-autonav-endscreen-upnext-alternative-header-only",!t&&i),f.L(this.element,"ytp-autonav-endscreen-upnext-no-alternative-header",t&&!i),f.TJ(this.u,this.I.Id()))},f.k.ih=function(){return 0<this.l},f.k.Qq=function(){this.ih()||(this.l=Date.now(),o(this),e(this.I,l(this)),f.L(this.I.getRootNode(),"countdown-running",this.ih()))},f.k.Vo=function(){this.yl(),o(this);var t=this.i.Ba("ytp-autonav-endscreen-upnext-header");t&&f.Oe(t,"接下来播放")},f.k.yl=function(){this.ih()&&(this.B.stop(),this.l=0)},f.k.select=function(t){this.I.nextVideo(!1,void 0!==t&&t),this.yl()},f.k.fE=function(t){f.wM(t,this.I)&&(t.currentTarget===this.playButton.element?this.I.Fb(this.playButton.element):t.currentTarget===this.i.Ba("ytp-autonav-endscreen-link-container")&&(t=this.i.Ba("ytp-autonav-endscreen-link-container"),this.I.ib(t,!0),this.I.Fb(t)),this.select())},f.k.WL=function(){this.I.Fb(this.cancelButton.element),f.GL(this.I,!0)},f.k.eE=function(){var t=this.I.Id();this.C&&this.vb!==t&&f.TJ(this,t),this.Xd(),this.I.ib(this.element,t),this.I.ib(this.cancelButton.element,t),this.I.ib(this.i.Ba("ytp-autonav-endscreen-link-container"),t),this.I.ib(this.playButton.element,t)},f.k.Fe=function(t){return t.width<400||t.height<459},f.v(r,f.V),f.k=r.prototype,f.k.create=function(){this.created=!0},f.k.destroy=function(){this.created=!1},f.k.Nr=function(){return!1},f.k.Id=function(){return!1},f.k.cH=function(){return!1},f.v(c,f.V),f.k=c.prototype,f.k.uv=function(){this.notification&&(this.B.stop(),this.dc(this.u),this.u=null,this.notification.close(),this.notification=null)},f.k.Dr=function(t){this.suggestion=t,b(this,t,"hqdefault.jpg")},f.k.gE=function(){f.TJ(this,this.api.Id()),this.api.ib(this.element,this.api.Id()),this.api.ib(this.Ba("ytp-upnext-autoplay-icon"),this.api.Id()),this.cancelButton&&this.api.ib(this.cancelButton.element,this.api.Id())},f.k.HQ=function(){h.focus(),this.uv()},f.k.Qq=function(t){var i=this;this.ih()||(f.Yq("a11y-announce","接下来播放 "+this.suggestion.title),this.l=(0,f.P)(),this.i=new f.J(function(){s(i,t)},25),s(this,t),e(this.api,p(this,t))),f.Bn(this.element,"ytp-upnext-autoplay-paused")},f.k.hide=function(){f.V.prototype.hide.call(this)},f.k.ih=function(){return!!this.i},f.k.Vo=function(){this.yl(),this.l=(0,f.P)(),s(this),f.K(this.element,"ytp-upnext-autoplay-paused")},f.k.yl=function(){this.ih()&&(this.i.dispose(),this.i=null)},f.k.select=function(t){var i;t=void 0!==t&&t,f.S(this.api.T().experiments,"autonav_notifications")&&t&&h.Notification&&document.hasFocus&&("default"===(i=Notification.permission)?Notification.requestPermission():"granted"!==i||document.hasFocus()||(i=this.suggestion.eb(),this.uv(),this.notification=new Notification("接下来播放",{body:i.title,icon:i.De()}),this.u=this.N(this.notification,"click",this.HQ),this.B.start())),this.yl(),this.api.nextVideo(!1,t)},f.k.YL=function(t){!f.Ne(this.cancelButton.element,f.qq(t))&&f.wM(t,this.api)&&(this.api.Id()&&this.api.Fb(this.Ba("ytp-upnext-autoplay-icon")),this.select())},f.k.XL=function(){this.api.Id()&&this.cancelButton&&this.api.Fb(this.cancelButton.element),f.GL(this.api,!0)},f.k.wQ=function(t){d(this),this.show(),this.Qq(t)},f.k.aK=function(t){d(this),this.suggestion&&this.suggestion.eb().videoId===t.eb().videoId||this.Dr(t)},f.k.xQ=function(){d(this),this.yl(),this.hide()},f.k.ra=function(){this.yl(),this.uv(),f.V.prototype.ra.call(this)},f.v(y,r),f.k=y.prototype,f.k.create=function(){r.prototype.create.call(this),this.B.N(this.player,"appresize",this.Xd),this.B.N(this.player,"onVideoAreaChange",this.Xd),this.B.N(this.player,"videodatachange",this.jb),this.B.N(this.player,"autonavchange",this.hE),this.B.N(this.player,"autonavcancel",this.ZL),this.jb()},f.k.show=function(){r.prototype.show.call(this),(this.G||this.u&&this.u!==this.videoData.clientPlaybackNonce)&&f.GL(this.player,!1),f.ML(this.player)&&this.Nr()&&!this.u?(n(this),2===this.videoData.autonavState?this.player.T().Z("fast_autonav_in_background")&&3===this.player.getVisibilityState()?this.i.select(!0):this.i.Qq():3===this.videoData.autonavState&&this.i.Vo()):(f.GL(this.player,!0),n(this)),this.Xd()},f.k.hide=function(){r.prototype.hide.call(this),this.i.Vo(),n(this)},f.k.Xd=function(){var t=this.player.Di(!0,this.player.isFullscreen());if(n(this),this.l.Xd(),f.L(this.element,"ytp-autonav-cancelled-small-mode",this.Fe(t)),f.L(this.element,"ytp-autonav-cancelled-tiny-mode",this.ww(t)),f.L(this.element,"ytp-autonav-cancelled-mini-mode",t.width<=400||t.height<=360),this.overlay&&f.ig(this.overlay.element,{width:t.width+"px"}),!this.C)for(var i=(t=f.q(this.videos.entries())).next();!i.done;i=t.next()){var e=(i=f.q(i.value)).next().value;i.next().value.Xd(1==e%2)}},f.k.jb=function(){var i,t,e=this.player.getVideoData();if(this.videoData!==e&&e){if(this.videoData=e,(this.suggestions=(i=this,t=e,f.Kc(t.suggestions,function(t){return t=f.sO(i.player.T(),t),f.F(i,t),t})))&&this.suggestions.length)for(this.i.Dr(this.suggestions[0]),this.i!==this.l&&this.l.Dr(this.suggestions[0]),e=0;e<S.length;++e){var s,n=S[e];this.suggestions&&this.suggestions[n]&&(this.videos[e]=new a(this.player),s=this.videos[e],n=this.suggestions[n],s.suggestion!==n&&(s.suggestion=n,b(s,n)),f.F(this,this.videos[e]),this.videos[e].ya(this.J.element))}this.Xd()}},f.k.hE=function(t){1===t?(this.G=!1,this.u=this.videoData.clientPlaybackNonce,this.i.yl(),this.vb&&this.Xd()):(this.G=!0,this.Id()&&(2===t?this.i.Qq():3===t&&this.i.Vo()))},f.k.ZL=function(t){t?this.hE(1):(this.u=null,this.G=!1)},f.k.Nr=function(){return 1!==this.videoData.autonavState},f.k.Fe=function(t){return(t.width<910||t.height<459)&&!this.ww(t)&&!(t.width<=400||t.height<=360)},f.k.ww=function(t){return t.width<800&&!(t.width<=400||t.height<=360)},f.k.Id=function(){return this.vb&&f.ML(this.player)&&this.Nr()&&!this.u};var S=[1,3,2,4];f.v(v,r),v.prototype.La=function(){var t=this.player.getVideoData();this.i.update({profilePicture:t.hg,author:t.author}),this.subscribeButton.channelId=t.wh;var i=this.subscribeButton;t.subscribed?i.l():i.u()},f.v(m,f.V),m.prototype.select=function(){(this.api.ej(this.suggestion.eb().videoId,this.suggestion.Md,this.suggestion.getPlaylistId(),void 0,void 0,this.suggestion.nA||void 0)||this.api.Z("web_player_endscreen_double_log_fix_killswitch"))&&this.api.Fb(this.element)},m.prototype.onClick=function(t){f.wM(t,this.api,this.l,this.suggestion.Md||void 0)&&this.select()},m.prototype.u=function(t){switch(t.keyCode){case 13:case 32:f.vq(t)||(this.select(),f.uq(t))}},m.prototype.jb=function(){var t=this.api.getVideoData(),i=this.api.T();this.l=!t.C&&i.l},f.v(g,r),f.k=g.prototype,f.k.create=function(){r.prototype.create.call(this);var t=this.player.getVideoData();t&&(this.suggestions=i(this,t),this.videoData=t),this.Xd(),this.l.N(this.player,"appresize",this.Xd),this.l.N(this.player,"onVideoAreaChange",this.Xd),this.l.N(this.player,"videodatachange",this.jb),this.l.N(this.player,"autonavchange",this.Ty),this.l.N(this.player,"autonavcancel",this.aM),(t=this.videoData.autonavState)!==this.L&&this.Ty(t),this.l.N(this.element,"transitionend",this.WR)},f.k.destroy=function(){f.lu(this.l),f.zi(this.stills),this.stills=[],this.suggestions=null,r.prototype.destroy.call(this),f.Bn(this.element,"ytp-show-tiles"),this.G.stop(),this.L=this.videoData.autonavState},f.k.Nr=function(){return 1!==this.videoData.autonavState},f.k.show=function(){r.prototype.show.call(this),f.Bn(this.element,"ytp-show-tiles"),this.player.T().i?f.sn(this.G):this.G.start(),(this.C||this.B&&this.B!==this.videoData.clientPlaybackNonce)&&f.GL(this.player,!1),w(this)?(D(this),2===this.videoData.autonavState?this.player.T().Z("fast_autonav_in_background")&&3===this.player.getVisibilityState()?this.i.select(!0):this.i.Qq():3===this.videoData.autonavState&&this.i.Vo()):(f.GL(this.player,!0),D(this))},f.k.hide=function(){r.prototype.hide.call(this),this.i.Vo(),D(this)},f.k.WR=function(t){f.qq(t)===this.element&&this.Xd()},f.k.Xd=function(){if(this.suggestions&&this.suggestions.length){f.K(this.element,"ytp-endscreen-paginate");var t=this.I.Di(!0,this.I.isFullscreen()),i=f.BL(this.I);i&&(i=i.re()?48:32,t.width-=2*i);var e=t.width/t.height,s=96/54,n=i=2,a=Math.max(t.width/96,2),h=Math.max(t.height/54,2),o=this.suggestions.length,l=Math.pow(2,2),u=o*l+(Math.pow(2,2)-l);for(u+=Math.pow(2,2)-l,u-=l;0<u&&(i<a||n<h);){var r=i/2,c=n/2,d=i<=a-2&&c*l<=u,p=n<=h-2&&r*l<=u;if(e/(r/(c+1)*s)<(r+1)/c*s/e&&p)u-=r*l,n+=2;else if(d)u-=c*l,i+=2;else{if(!p)break;u-=r*l,n+=2}}for(s=!1,3*l<=u&&o*l-u<=6&&(4<=n||4<=i)&&(s=!0),e=(l=96*i)/(u=54*n)<e?t.height/u:t.width/l,e=Math.min(e,2),l=Math.floor(Math.min(t.width,l*e)),u=Math.floor(Math.min(t.height,u*e)),t=this.table.element,f.xg(t,l,u),f.ig(t,{marginLeft:l/-2+"px",marginTop:u/-2+"px"}),this.i.Dr(this.suggestions[0]),this.i instanceof k&&this.i.Xd(),f.L(this.element,"ytp-endscreen-takeover",w(this)),D(this),l+=4,u+=4,a=e=0;a<i;a++)for(h=0;h<n;h++){var y,v,g,r=e,c=0;s&&i-2<=a&&n-2<=h?c=1:0!=h%2||0!=a%2||h<2&&a<2&&(0!==h||0!==a)||(c=2),r=f.de(r+this.u,o),0!==c&&((d=this.stills[e])||(d=new m(this.player),this.stills[e]=d,t.appendChild(d.element)),p=Math.floor(u*h/n),y=Math.floor(l*a/i),v=Math.floor(u*(h+c)/n)-p-4,g=Math.floor(l*(a+c)/i)-y-4,f.qg(d.element,y,p),f.xg(d.element,g,v),f.ig(d.element,"transitionDelay",(h+a)/20+"s"),f.L(d.element,"ytp-videowall-still-mini",1===c),f.L(d.element,"ytp-videowall-still-large",2<c),c=d,r=this.suggestions[r],c.suggestion!==r&&(c.suggestion=r,d=c.api.T(),p=f.zn(c.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",b(c,r,p),f.uD(d)&&(d=r.nm(),d=f.Hd(d,f.aN("emb_rel_end")),c.Ra("url",d)),(r=(r=r.Md)&&r.itct)&&c.api.wl(c.element,r)),e++)}for(f.L(this.element,"ytp-endscreen-paginate",e<o),i=this.stills.length-1;e<=i;i--)n=this.stills[i],f.Ke(n.element),f.yi(n);this.stills.length=e}},f.k.jb=function(){var t=this.player.getVideoData();this.videoData!==t&&(this.u=0,this.suggestions=i(this,t),this.videoData=t,this.Xd())},f.k.bM=function(){this.u+=this.stills.length,this.Xd()},f.k.cM=function(){this.u-=this.stills.length,this.Xd()},f.k.cH=function(){return this.i.ih()},f.k.Ty=function(t){1===t?(this.C=!1,this.B=this.videoData.clientPlaybackNonce,this.i.yl(),this.vb&&this.Xd()):(this.C=!0,this.vb&&w(this)&&(2===t?this.i.Qq():3===t&&this.i.Vo()))},f.k.aM=function(t){if(t){for(t=0;t<this.stills.length;t++)this.I.ib(this.stills[t].element,!0);this.Ty(1)}else this.B=null,this.C=!1;this.Xd()},f.k.Id=function(){return this.vb&&w(this)},f.v(t,f.YL),f.k=t.prototype,f.k.kp=function(){var t=!!((s=this.player.getVideoData())&&s.suggestions&&s.suggestions.length),t=!I(this.player)||t,i=s.cd||f.FD(s.B),e=this.player.ys(),s=s.mutedAutoplay;return t&&!i&&!e&&!s},f.k.Id=function(){return this.endScreen.Id()},f.k.xO=function(){return!!this.Id()&&this.endScreen.cH()},f.k.ra=function(){this.player.Ve("endscreen"),f.YL.prototype.ra.call(this)},f.k.load=function(){var t,i=this.player.getVideoData(),e=i.XE;(i=!(!e||!e.videoId)&&(t=this.player.rb().kd.get("heartbeat"),!(i&&i.suggestions&&i.suggestions.length&&e.videoId===i.suggestions[0].id&&!i.DD)&&(this.player.ej(e.videoId,void 0,void 0,!0,!0,e),t&&t.Dw("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),!0)))||(f.YL.prototype.load.call(this),this.endScreen.show())},f.k.unload=function(){f.YL.prototype.unload.call(this),this.endScreen.hide(),this.endScreen.destroy()},f.k.xd=function(t){this.kp()&&(this.endScreen.created||this.endScreen.create(),"load"===t.getId()&&this.load())},f.k.Te=function(t){"load"===t.getId()&&this.loaded&&this.unload()},f.k.jb=function(){V(this),this.u&&x(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.i?this.endScreen=new y(this.player):this.endScreen=new g(this.player),f.F(this,this.endScreen),f.LL(this.player,this.endScreen.element,4))},f.iM.endscreen=t}(_yt_player);
