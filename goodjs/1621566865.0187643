(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{828:function(e,t,i){"use strict";i.r(t);var s=i(10),a=i.n(s),n=i(489),r=i.n(n),o=i(18),d=i.n(o),c=i(107),l=i.n(c),h=i(29),p=i.n(h),v=i(14),u=i.n(v),m=i(30),b=i.n(m),f=i(11),y=i.n(f),g=i(488),w=i.n(g),P=i(509),O=i.n(P),k=i(740),j=i.n(k);function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach(function(t){a()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var A={playertype:"html",onLoad:"getVidiblePlayer",loadingplaceholder:"1"},E={embeded:"cms_video_plugin_us.edit.huffpost.net",fwkeyvalues:"sponsorship=SPONSORSHIP_NAME",fwsitesection:"composer",sitesection:"news",timeline_preview_border:3,timeline_preview_shape:"rectangle"},S=function(e){function t(e){var i;d()(this,t),i=p()(this,u()(t).call(this,e));var s=e.meta,a=e.options,n=e.index,r=e.cetDataVars;return i.isAmp=!!a.isAmp,i.device=a.device,i.meta=s||{},i.ads=a.commercialVideo,i.noVideoAds=a.noVideoAds,i.options=a,i.cetDataVars=r,i.placement=a.placement||(0!==n||a.relatedMedia?"content":"top_media"),i.vidibleConfigValues=a.vidibleConfigValues,i.videoTraits=a.videoTraits,i.vidibleRef=y.a.createRef(),i}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.defer){var t=document.createElement("script");t.src=this.vdbSrc;var i=!1;"function"==typeof IntersectionObserver?(this.intersectionObserver=new IntersectionObserver(function(s){!i&&s.length>0&&s.forEach(function(s){s.isIntersecting&&(i=!0,e.vidibleRef.current.appendChild(t))})},{rootMargin:"".concat(window.innerHeight,"px")}),this.intersectionObserver.observe(this.vidibleRef.current)):this.vidibleRef.current.appendChild(t)}}},{key:"defaultPlayer",value:function(){var e=this.props.defer?null:y.a.createElement("script",{type:"text/javascript",src:this.vdbSrc,async:!0}),t=y.a.createElement("div",r()({ref:this.vidibleRef,className:this.vdbClass,vdb_params:this.vdbParams},this.cetDataVars),e);return this.props.addPlaceholder?y.a.createElement("div",{className:"vidible-wrapper",style:{width:"100%",height:"auto"}},y.a.createElement("div",{className:"vidible-placeholder",style:{left:"0",width:"100%",height:"0",position:"relative",paddingBottom:"56.25%"}}),t):t}},{key:"ampPlayer",value:function(){return this.pid&&this.cid&&this.vid&&this.vdbParams?y.a.createElement("amp-o2-player",{"data-pid":this.pid,"data-bcid":this.cid,"data-vid":this.vid,width:"375",height:"211","data-macros":this.vdbParams,layout:"responsive"}):""}},{key:"render",value:function(){return y.a.createElement(f.Fragment,null,this.isAmp?this.ampPlayer():this.defaultPlayer())}},{key:"pid",get:function(){var e=this.isAmp?"mobile":this.device,t=this.vidibleConfigValues||{},i=t.overrides,s=void 0===i?{}:i,a=t.whitelisted,n=void 0===a?[]:a,r=this.meta.pid;return this.options.isNative||!this.vidibleConfigValues||n.includes(r)?r:s.all?s.all:s[this.placement]&&s[this.placement][e]?s[this.placement][e]:r}},{key:"cid",get:function(){return this.meta.cid&&this.meta.cid.replace("5688f5c1e4b0f2c97f395156","56000e19e4b0e4e194b84b31")}},{key:"vid",get:function(){return this.meta.vid}},{key:"macros",get:function(){var e=A;return this.isAmp&&(e=_({},e,{},E)),e=_({},e,{},this.meta.macros),this.ads&&this.ads.package&&(e.fwkeyvalues="sponsorship=".concat(this.ads.package)),this.ads&&this.ads.site_and_category&&(e.fwsitesection=this.ads.site_and_category),this.noVideoAds&&(e.disableads=1),this.videoTraits&&this.videoTraits.videoTag&&(e.fwkeyvalues="sponsorship=".concat(this.videoTraits.videoTag)),e}},{key:"bid",get:function(){var e=this.vidibleConfigValues||{},t=e.playlists,i=void 0===t?{}:t,s=e.whitelisted,a=void 0===s?[]:s;return this.videoTraits&&this.videoTraits.videoPlaylist?this.videoTraits.videoPlaylist:a.includes(this.meta.pid)&&"bid"in this.meta?this.meta.bid:"entrySection"in this.options&&this.options.entrySection in i?i[this.options.entrySection]:"default"in i?i.default:""}},{key:"vdbParams",get:function(){return O.a.stringify(j()(this.macros,function(e,t){return"m.".concat(t)}))}},{key:"vdbSrc",get:function(){return this.bid?"https://delivery.vidible.tv/jsonp/bid=".concat(this.bid,"/pid=").concat(this.pid,"/vid=").concat(this.vid,"/").concat(this.cid,".js"):"https://delivery.vidible.tv/jsonp/pid=".concat(this.pid,"/vid=").concat(this.vid,"/").concat(this.cid,".js")}},{key:"vdbClass",get:function(){var e=["vdb_player","vdb_".concat(this.pid).concat(this.cid),this.props.className];return this.options.theme&&e.push(this.options.theme),e.join(" ")}}]),t}(y.a.PureComponent);S.propTypes={className:w.a.string,index:w.a.number.isRequired,meta:w.a.shape({}),options:w.a.shape({isAmp:w.a.bool,macros:w.a.shape({}),noVideoAds:w.a.bool,theme:w.a.string}),defer:w.a.bool,addPlaceholder:w.a.bool,cetDataVars:w.a.shape({})},S.defaultProps={className:"",meta:{},options:{},defer:!1,addPlaceholder:!1,cetDataVars:{}},t.default=S}}]);