window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2021-06-08T13:58:12Z",environment:"production",turbineBuildDate:"2021-04-26T16:54:28Z",turbineVersion:"27.1.3"},dataElements:{"TMG Responsive Site Viewports":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e,t,n,a,r="responsive site",i={xl:[1328,4e3],l:[1008,1327],m:[730,1007],s:[480,729],xs:[0,479]},o=window.innerWidth;for(e in i)if(t=o,n=i[e][0],a=i[e][1],n<=t&&t<=a){r=r+" - "+e;break}return r}}},"TMG Travel Package":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"type",caseInsensitive:!0}},"TMG Component Tracking Local Storage":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(localStorage.getItem("tmgComponentTracking"))}}},"TMG DL flakeID":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e;return e="undefined"!=typeof dataLayer&&dataLayer.hasOwnProperty("flakeId")?dataLayer.flakeId:e}}},sparkUrl:{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='sparkUrl']"}},"TMG Hotel Map Interaction":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="";return e=/travel\/.*hotel\//.test(window.location.href)&&0<dataLayer.event.length&&-1<dataLayer.event.indexOf("mapInteraction")?"true":e}}},"TMG Meta Category":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='DCSext.Category']"}},"TMG regwallDisplayed":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="false";try{1==tmg.REGWALL_ON&&(e="true")}catch(e){}return e}}},"TMG Lead Asset Alt Text":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=document.querySelector(".lead-asset .lead-asset__image"),t=document.querySelector(".gallery__image .gallery__regwall-image"),n=document.querySelector(".hero-area-wrapper .videoPlayer");return e?e.getAttribute("alt"):t?t.getAttribute("alt"):n?metaDataLayer["entity.name"]||"The article Name":void 0}}},"TMG Meta Business Segment":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmgads.businessSegment']"}},"TMG External Campaign":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"wt.mc_id",caseInsensitive:!0}},timestamp:{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return Date.now().toString()}}},"TMG businessSegmentMapping":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return{"^money$":"personalfinance","^business$":"finance"}}}},"TMG Article Content":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(document.querySelector("meta[name='DCSext.Content_Type']")){var e=document.querySelector("meta[name='DCSext.Content_Type']").getAttribute("content"),t=0,n=["thirdpartysite","html","shorthand","iframe","registration","product","undefined","destination","hotelreview","cartoon","article","blog","text/html; charset=utf-8","third party site","anonymized"];for(i=0;i<n.length;i++)n[i]==e&&t++;return void 0!==e&&""!=e&&null!==e&&null!==typeof e&&0==t?"true":"false"}return new RegExp(/^\/guide/).test(window.location.pathname)?"true":"false"}}},"TMG utmCampaign":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"utm_campaign"}},"TMG Meta premiumContentOnFirstPublish":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='premiumContentOnFirstPublish']"}},"TMG Infinity Visitor ID":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"ictf_master"}},"TMG galleryImageNo":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e,t=document.getElementsByClassName("gallery__pagination-current");return e=t.length?t[0].innerText||t[0].textContent:e}}},"TMG Meta Article Publish Date":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="";try{e=document.querySelector('meta[name="DCSext.articleFirstPublished"]').getAttribute("content").replace(/ .*/,"")}catch(e){}return e}}},"TMG DL Filter":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.filter"}},"Quantum Metric Replay Link":{defaultValue:"N/A",modulePath:"quantum-metric/src/lib/dataElements/replayLink.js",settings:{}},"TMG Sub Product ID":{storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"productId",caseInsensitive:!0}},"TMG DL Price Filter":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.priceFilter"}},"TMG Functions":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return{getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},setCookie:function(e,t,n){var a,r="";n&&((a=new Date).setTime(a.getTime()+n),r="; expires="+a.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/; domain=telegraph.co.uk"},deleteCookie:function(e){document.cookie=e+"=; Max-Age=-99999999; path=/; domain=telegraph.co.uk"},htmlBuilder:function(e,t){var n=document.createElement(t);switch(n.src=e,t){case"script":n.type="text/javascript",n.async="1";break;case"img":n.width="1",n.height="1",n.style.display="none";break;case"iframe":n.width="0",n.height="0",n.frameborder="0",n.scrolling="0"}document.getElementsByTagName("body")[0].appendChild(n)}}}}},"TMG Visit Cookies":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return{day:[{duration:"1",evar:"eVar185"}],week:[{duration:"7",evar:"eVar186"}]}}}},"TMG linkTrackVars":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=[],t=["hier","list","eVar","prop","channel"];if("undefined"!=typeof s)for(var n in s)for(var a=0;a<t.length;a++)void 0!==s[n]&&-1!=n.indexOf(t[a])&&e.push(n);return e.join()}}},"TMG Cookie logcheck":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"tmg_logcheck"}},sparkscore:{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='sparkscore']"}},"TMG DL pageID":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.pageId"}},"TMG CSS travelOfferType":{defaultValue:"",cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"text",elementSelector:".travel-offer-promo__headline--label"}},"TMG Cookie customerID":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"tmg_pid"}},"TMG Meta Author":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="";try{e=document.querySelector('meta[name="DCSext.author"]').getAttribute("content").replace(/\s\s+/g," ")}catch(e){}return e}}},"TMG Subscription Type":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=!1;return dataLayer.subscription&&(e=dataLayer.subscription),new RegExp("sports").test(window.location.href)?"sports":new RegExp("daypass").test(window.location.href)||e&&"daily"==e.paymentPlan?"daypass":"generic"}}},"TMG Comments Enabled":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return document.querySelector(".social-block__comment")?"true":"false"}}},"TMG Article First Published":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=document.querySelector("meta[name='DCSext.articleFirstPublished']");if(e)return e.content}}},"TMG DL Newsletter Type":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.newsletterType"}},"TMG timeSincePublish":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e,t,n,a="";try{var r=document.querySelector('meta[name="DCSext.articleFirstPublished"]').getAttribute("content").replace(/-/g,"/"),i={"24h":[0,24],week:[25,168],month:[169,720],year:[721,8760],"year+":[8761,5e5]},o=function(e){try{var t=(new Date).getTime()-new Date(e).getTime();return"NaN"!==t.toString()?Math.round(t/36e5):""}catch(e){return""}}(r);if("number"==typeof o)for(var s in i)if(e=o,t=i[s][0],n=i[s][1],t<=e&&e<=n){a=s;break}}catch(e){}return a}}},"TMG Author Image Src":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return authorImage=document.querySelector(".byline__author-image"),authorImage?authorImage.getAttribute("src"):""}}},"TMG DL Event Monitor":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return dataLayer.event[0]}}},"TMG Facebook Bypass":{modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='fbn-bypass']"}},"TMG MCVISID":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.getVisitorId().getMarketingCloudVisitorID()}}},"TMG onward journey":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"onwardjourney",caseInsensitive:!0}},"TMG articleTitle":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return document.title.replace(/(?:\r\n|\r|\n|\t)/g," ").replace(/"/g,"'")}}},"TMG domain":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return location.hostname}}},"TMG Followed Authors":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(""!=dataLayer.authors&&void 0!==dataLayer.authors)return authors="",authors=dataLayer.authors,authors=authors.replace(/\/authors\//g,""),authors=authors.replace(/\//g,""),authors}}},"TMG DL Gender Filter":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.genderFilter"}},"TMG DL pageName":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.pageName"}},"TMG Cookie Consent":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.readCookie("_evidon_consent_cookie")||_satellite.readCookie("euconsent")?"true":"false"}}},"TMG emailType":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"etype",caseInsensitive:!0}},"TMG Meta Spark Sponsor":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmg.sponsor']"}},"TMG Meta Ads Article ID":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmgads.articleid']"}},"TMG Meta Article ID":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='DCSext.articleId']"}},"TMG Meta Keywords":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='keywords']"}},"TMG DL storyType":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if("undefined"!=typeof pageData&&void 0!==pageData.storytype)return JSON.stringify(pageData.storytype).replace(/[:{}"]/g,"");if(document.querySelector("meta[name='keywords']")){var e=document.querySelector("meta[name='keywords']").content;return(e=e.toLowerCase(),new RegExp(/review/).test(e))?"review":new RegExp(/recipe/).test(e)?"recipe":void 0}}}},"TMG Thumbnail Url":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=document.querySelector('meta[property="og:image"]');if(e)return e.content}}},"TMG Subscription Offer ID":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"offerId",caseInsensitive:!0}},"TMG MyT DL Event":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.events"}},"TMG DL premiumContent":{defaultValue:"",forceLowerCase:!0,cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e;return e="undefined"!=typeof dataLayer&&dataLayer.hasOwnProperty("premiumContent")?String(dataLayer.premiumContent):e}}},"TMG Meta Premium State":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmg.premium.state']"}},"TMG Meta MLC":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='DCSext.MLC']"}},"Post Office Campaign ID":{storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"campaignid",caseInsensitive:!0}},"TMG Gallery Total Images":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=document.querySelector(".gallery__pagination-number"),t="";return t=e?e.textContent:t}}},"TMG icid":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"icid",caseInsensitive:!0}},"TMG DL pageType":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.pageType"}},"TMG Meta Article Publish Time":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="";try{e=document.querySelector('meta[name="DCSext.articleFirstPublished"]').getAttribute("content").replace(/[\d\-]+ /,"")}catch(e){}return e}}},"TMG Published Range One Day":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=_satellite.getVar("TMG Article First Published");return(new Date).getTime()-864e5<Date.parse(e)?"true":"false"}}},"TMG Unfollowed Topics":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(""!=dataLayer.unfollowedTopics&&void 0!==dataLayer.unfollowedTopics){for(topics="",topics=dataLayer.unfollowedTopics,topics=topics.split(";"),newTopicList="",i=0;i<topics.length;i++)new RegExp("structure:").test(topics[i])?(topic=topics[i].replace("structure:",""),new RegExp("/").test(topic)&&(topic=topic.split("/"),topic=topic[1])):(topic=topics[i].split("/"),topic=topic[1]),newTopicList=""==newTopicList?topic:newTopicList+";"+topic;return topics=newTopicList,topics}}}},"TMG Meta Ads Channel":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmgads.channel']"}},"TMG Published Range One Week":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=_satellite.getVar("TMG Article First Published");return(new Date).getTime()-6048e5<Date.parse(e)?"true":"false"}}},"TMG DL premiumOverride":{defaultValue:"",forceLowerCase:!0,cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e;return e="undefined"!=typeof dataLayer&&dataLayer.hasOwnProperty("premiumOverride")?String(dataLayer.premiumOverride):e}}},"TMG Subscription Type in tmg_p13n Cookie":{storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=_satellite.getVar("TMG cookie tmg_p13n"),t="";if(e&&-1!=e.indexOf("subscriptionType"))for(var n=e.split(","),a=0;a<n.length;a++)-1!=n[a].indexOf("subscriptionType")&&(t=n[a].match(/subscriptionType:"([^"]*)/)[1].toLowerCase());return t}}},"TMG Meta Channel":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=document.querySelector('meta[name="DCSext.Channel"]'),t=document.querySelector('meta[name="tmgads.channel"]'),n=e=e&&e.content;return _satellite.getVar("TMG Meta Keywords")&&_satellite.getVar("TMG Meta Keywords").match(/women\'s\-sport|women\'s sport/)&&(n="Womens Sport"),t&&!e&&(console.log("metachannel 2 activated"),n=t.content),n}}},"TMG Subscriber Type Cookie":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"tmgSubscriberType"}},"Form Query Parameter":{defaultValue:"",cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"form",caseInsensitive:!0}},"TMG Local Date":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return d=new Date,Number.prototype.padLeft=function(e,t){e=String(e||10).length-String(this).length+1;return 0<e?new Array(e).join(t||"0")+this:this},dformat=[d.getFullYear(),(d.getMonth()+1).padLeft(),d.getDate().padLeft()].join("-")+"T"+[d.getHours().padLeft(),d.getMinutes().padLeft(),d.getSeconds().padLeft()].join(":"),dformat}}},"TMG utmSource":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"utm_source"}},"TMG Pathname":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"document.location.pathname"}},"TMG Contributors Member ID Cookie":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"dtm_tracking_code"}},"TMG URL Pathname":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return window.location.pathname}}},"TMG Meta Premium Override":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmg.premium.override']"}},"TMG DataLayer":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer"}},"TMG Meta Spark CampaignID":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='DCSext.campaignId']"}},"TMG mediaTrackVars":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"channel,hier1,list2,eVar1,eVar2,eVar4,eVar7,eVar9,eVar10,eVar11,eVar12,eVar13,eVar14,eVar15,eVar17,eVar21,eVar26,eVar29,eVar38,eVar40,eVar41,eVar42,eVar43,eVar44,eVar45,eVar53,eVar59,eVar106,eVar108,eVar109,eVar110,eVar185,eVar186,prop1,prop2,prop3,prop4,prop5,prop6,prop7,prop10,prop11,prop12,prop13,prop14,prop15,prop17,prop21,prop23,prop40,prop41,prop42,prop43,prop44,prop45,prop53"}}},"TMG Google Showcase":{storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"gaa_at",caseInsensitive:!0}},"TMG Published Range Two Days":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=_satellite.getVar("TMG Article First Published");return(new Date).getTime()-1728e5<Date.parse(e)?"true":"false"}}},"TMG campaignLive":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=document.querySelector('meta[name="DCSext.campaignStart"]'),t=document.querySelector('meta[name="DCSext.campaignEnd"]');try{e=e?Date.parse(new Date(e.getAttribute("content").replace(/T.*/,""))):0,t=t?Date.parse(new Date(t.getAttribute("content").replace(/T.*/,""))):0}catch(e){}return e<Date.now()&&t>Date.now()}}},"TMG Pageview ID":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return tmg.guid}}},"TMG videoPlaylist":{defaultValue:"",forceLowerCase:!0,cleanText:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"playlist",caseInsensitive:!0}},"TMG Travel Exit Links":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return["yourgolftours","www.theritzlondonvouchers.com/telegraph-offers","winetours.co.uk","wildfrontiers","wendywutours","wellbeingescapes","voyagestoantiquity","vjv.com","virginholidays","tropicalsky","traveleditions","travelbag","transindus","trafalgar.com","titantravel","thomascook","theultimatetravelcompany","sykescottages","superbreak.com","steppestravel","selectiveasia","secretescape","scenic","saga.co.uk","rivieratravel","railbookers.co.uk/telegraphtravel/","railbookers","prestigeholidays","petersommer","offpeakluxury","northamericatravelservice","newmarket","naturetrek","mrandmrssmith","martinrandall","long-travel","lastminute.com","kuoni","kirkerholidays","keadventure","justyou","journeylatinamerica","jamesvillas","inspiredluxuryescapes.com","inspiredluxuryescapes","insiderjourneys","insidejapantours","inntravel","inghams","iglucruise","holidaygems","historicaltrips","hebridean","gulliverstravel","greatrail","greatlittlebreaks","fleetwaytravel","exploreworldwide","expedia","exodus.co.uk","emiratesholidays","emeraldwaterways","discover-the-world","coxandkings","cottages.com","cosmostoursandcruises","britishairways","brightwaterholidays","booking.com","belmond.com/","belmond","audleytravel","arenatravel","aptouring","andantetravels","africatravel","aceculturaltours","accorhotels.com","abercrombiekent",".lastmin"]}}},"TMG visitorID":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"undefined"!=typeof Visitor?s.visitor.getMarketingCloudVisitorID().substr(0,15):"000000000000000"}}},"TMG Meta Ads Keywords":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmgads.keywords']"}},"TMG cookie tmg_p13n":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"tmg_p13n"}},"TMG Meta Pagetype":{defaultValue:"",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='tmgads.pagetype']"}},"TMG Grapeshot Keywords":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(void 0!==tmgAds.grapeshot.raw)return tmgAds.grapeshot.raw}}},"TMG DL rollupContentPath":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"dataLayer.rollupContentPath"}},"TMG paywallDisplayed":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="false";try{e="0"==document.querySelector('meta[name="DCSext.pd"]').getAttribute("content")?"true":""}catch(e){}return e}}},"TMG Last Article Info":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(lastArticleInfo=_satellite.readCookie("lastArticleInfo"),"undefined"!=typeof lastArticleInfo&&""!=lastArticleInfo){for(lastArticleInfo=lastArticleInfo.split("_"),lastArticleObject={author:"",contentType:"",tags:"",premium:"",previousPage:""},i=0;i<lastArticleInfo.length;i++)switch(tempAInfo=lastArticleInfo[i].split("^"),tempAInfoKey=tempAInfo[0],tempAInfoVal=tempAInfo[1],tempAInfoKey){case"author":lastArticleObject.author=tempAInfoVal.replace(/\+ /g,"; ");break;case"contentType":lastArticleObject.contentType=tempAInfoVal;break;case"tags":lastArticleObject.tags=tempAInfoVal.replace(/\+/g,";");break;case"premium":lastArticleObject.premium=tempAInfoVal;break;case"previousPage":lastArticleObject.previousPage=tempAInfoVal;break;case"currURL":lastArticleObject.currURL=tempAInfoVal}return lastArticleObject}}}},"TMG referrerStripped":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return document.referrer.replace(/\/?(\?.*)?$/,"")}}},"TMG utmMedium":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"utm_medium"}},"TMG Meta Genre":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='DCSext.Genre']"}},"TMG Evidon Cookie":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"_evidon_consent_cookie"}},"TMG Followed Topics":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(""!=dataLayer.topics&&void 0!==dataLayer.topics){for(topics="",topics=dataLayer.topics,topics=topics.split(";"),newTopicList="",i=0;i<topics.length;i++)new RegExp(":").test(topics[i])?(topic=topics[i].split(":"),topic=topic[1],new RegExp("/").test(topic)&&(topic=topic.split("/"),topic=topic[1])):new RegExp("/").test(topic)&&(topic=topics[i].split("/"),topic=topic[1]),newTopicList=""==newTopicList?topic:newTopicList+";"+topic;return topics=newTopicList,topics}}}},"TMG Meta Content Type":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"content",elementSelector:"meta[name='DCSext.Content_Type']"}},"TMG Unfollowed Authors":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(""!=dataLayer.unfollowedAuthors&&void 0!==dataLayer.unfollowedAuthors)return unfollowedAuthors="",unfollowedAuthors=dataLayer.unfollowedAuthors,unfollowedAuthors=unfollowedAuthors.replace(/\/authors\//g,""),unfollowedAuthors=unfollowedAuthors.replace(/\//g,""),unfollowedAuthors}}},"TMG articleTitle (no lowercase)":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return document.title.replace(/(?:\r\n|\r|\n|\t)/g," ").replace(/"/g,"'")}}},"TMG DL event":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return dataLayer.event}}},"TMG userStatus":{defaultValue:"",forceLowerCase:!0,storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=_satellite.getVar("TMG Cookie customerID"),t=_satellite.getVar("TMG cookie tmg_p13n");tmgFunctions=_satellite.getVar("TMG Functions"),sVisValue=tmgFunctions.getCookie("s_vis_repeat"),visType=null==typeof sVisValue||""==sVisValue||new RegExp(/New/).test(sVisValue)?"New;":"Repeat;";var n=visType;if(n+=e?"logged in":"logged out",t&&-1!=t.indexOf("subscriber"))for(var a=t.split(","),r=0;r<a.length;r++)/^subscriber/.test(a[r])&&(n+=-1!=a[r].indexOf("true")?";subscriber":";registered");else n+=e?";registered":";anonymous";return n}}}},extensions:{"adobe-analytics":{displayName:"Adobe Analytics",modules:{"adobe-analytics/src/lib/actions/setVariables.js":{name:"set-variables",displayName:"Set Variables",script:function(e,t,n,a){"use strict";var r=n("../sharedModules/getTracker"),i=n("../helpers/applyTrackerVariables");e.exports=function(t,n){return r().then(function(e){a.logger.info("Set variables on the tracker."),i(e,t.trackerProperties),t.customSetup&&t.customSetup.source&&t.customSetup.source.call(n.element,n,e)},function(e){a.logger.error("Cannot set variables: "+e)})}}},"adobe-analytics/src/lib/actions/sendBeacon.js":{name:"send-beacon",displayName:"Send Beacon",script:function(e,t,n,r){"use strict";function a(e,t,n){var a;"page"===t.type?(r.logger.info("Firing page view beacon."),e.t()):(a={linkType:t.linkType||"o",linkName:t.linkName||(o(a=n)?a.innerHTML:"link clicked")},r.logger.info("Firing link track beacon using the values: "+JSON.stringify(a)+"."),e.tl(o(n)?n:"true",a.linkType,a.linkName))}var i=n("../sharedModules/getTracker"),o=function(e){return e&&e.nodeName&&"a"===e.nodeName.toLowerCase()};e.exports=function(t,n){return i().then(function(e){a(e,t,n.element)},function(e){r.logger.error("Cannot send beacon: "+e)})}}},"adobe-analytics/src/lib/sharedModules/getTracker.js":{script:function(e,t,n,a){"use strict";var r,i=n("@adobe/reactor-cookie"),o=n("@adobe/reactor-promise"),s=n("@adobe/reactor-window"),c=n("../helpers/augmenters"),l=n("@adobe/reactor-load-script"),u=n("../helpers/applyTrackerVariables"),d=n("../helpers/loadLibrary"),p=n("../helpers/generateVersion")(a.buildInfo.turbineBuildDate),f="beforeSettings",m=a.getSharedModule("adobe-mcid","mcid-instance"),g=(n=a.getExtensionSettings(),(r=n.trackingCookieName)&&"true"!==i.get(r)?o.reject("EU compliance was not acknowledged by the user."):d(n).then(function(n){return o.all(c.map(function(e){var t;try{t=e(n)}catch(e){setTimeout(function(){throw e})}return o.resolve(t)})).then(function(){return n})}).then(function(e){return m&&(a.logger.info("Setting MCID instance on the tracker."),e.visitor=m),e}).then(function(e){return a.logger.info('Setting version on tracker: "'+p+'".'),void 0!==e.tagContainerMarker?e.tagContainerMarker=p:"string"==typeof e.version&&e.version.substring(e.version.length-5)!=="-"+p&&(e.version+="-"+p),e}).then(function(e,t,n){return t.loadPhase===f&&t.source&&(a.logger.info("Calling custom script before settings."),t.source.call(s,n)),u(n,e||{}),t.loadPhase!==f&&t.source&&(a.logger.info("Calling custom script after settings."),t.source.call(s,n)),n}.bind(null,n.trackerProperties,n.customSetup||{})).then(function(e,t){var n=e.moduleProperties;if(n&&n.audienceManager&&n.audienceManager.config&&s._satellite&&s._satellite.company&&s._satellite.company.orgId){e={namespace:s._satellite.company.orgId};n.audienceManager.config.visitorService=e;e=a.getHostedLibFileUrl("AppMeasurement_Module_AudienceManagement.js");return l(e).then(function(){return t.loadModule("AudienceManagement"),a.logger.info("Initializing AudienceManagement module"),t.AudienceManagement.setup(n.audienceManager.config),t})}return t}.bind(null,n)));e.exports=function(){return g}},name:"get-tracker",shared:!0},"adobe-analytics/src/lib/sharedModules/augmentTracker.js":{name:"augment-tracker",shared:!0,script:function(e,t,n){"use strict";var a=n("../helpers/augmenters");e.exports=function(e){a.push(e)}}},"adobe-analytics/src/lib/helpers/applyTrackerVariables.js":{script:function(e,t,n,c){"use strict";function l(e,t,n){return n.indexOf(e)===t}function a(e,t,n){e[t]=n[t].join(",")}var r=n("@adobe/reactor-query-string"),i=n("@adobe/reactor-window"),o=/eVar([0-9]+)/,s=/prop([0-9]+)/,u=new RegExp("^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$"),n=function(a,e,t){var r=t.dynamicVariablePrefix||"D=";t[e].forEach(function(e){var t,n;"value"===e.type?t=e.value:(n=o.exec(e.value))?t=r+"v"+n[1]:(n=s.exec(e.value))&&(t=r+"c"+n[1]),a[e.name]=t})},d={linkDownloadFileTypes:a,linkExternalFilters:a,linkInternalFilters:a,hierarchies:function(t,e,n){n[e].forEach(function(e){t[e.name]=e.sections.join(e.delimiter)})},props:n,eVars:n,campaign:function(e,t,n){var a;"queryParam"===n[t].type?(a=r.parse(i.location.search),e[t]=a[n[t].value]):e[t]=n[t].value},events:function(e,t,n){n=n[t].map(function(e){var t=e.name;return e.id&&(t=[t,e.id].join(":")),t=e.value?[t,e.value].join("="):t});e[t]=n.join(",")}};e.exports=function(t,a){var r={};a=a||{},Object.keys(a).forEach(function(e){var t=d[e],n=a[e];t?t(r,e,a):r[e]=n}),r.events&&t.events&&0<t.events.length&&(r.events=t.events+","+r.events);var e,n,i=a&&a.events&&0<a.events.length,i=(o=t,e=r,i=i,n=Object.keys(e).filter(u.test.bind(u)),i&&n.push("events"),(n=n.concat((o.linkTrackVars||"").split(","))).filter(function(e,t){return"None"!==e&&e&&l(e,t,n)}).join(","));i&&(r.linkTrackVars=i);var o,s,o=(o=t,i=a.events||[],(s=(s=i.map(function(e){return e.name})).concat((o.linkTrackEvents||"").split(","))).filter(function(e,t){return"None"!==e&&l(e,t,s)}).join(","));o&&(r.linkTrackEvents=o),c.logger.info('Applying the following properties on tracker: "'+JSON.stringify(r)+'".'),Object.keys(r).forEach(function(e){t[e]=r[e]})}}},"adobe-analytics/src/lib/helpers/augmenters.js":{script:function(e){"use strict";e.exports=[]}},"adobe-analytics/src/lib/helpers/loadLibrary.js":{script:function(e,t,n,i){"use strict";function a(e){return i.logger.info("Loading AppMeasurement script from: "+e+"."),l(e)}function r(e){var t=v(e.libraryCode.accounts);return a(i.getHostedLibFileUrl("AppMeasurement.js")).then(function(e,t){if(!u.s_gi)throw new Error("Unable to create AppMeasurement tracker, `s_gi` function not found."+u.AppMeasurement);i.logger.info('Creating AppMeasurement tracker with these report suites: "'+t+'"');t=u.s_gi(t);return e.libraryCode.scopeTrackerGlobally&&(i.logger.info("Setting the tracker as window.s"),u.s=t),t}.bind(null,e,t))}function o(e,t){return e.libraryCode.accounts&&(t.sa?(e=v(e.libraryCode.accounts),i.logger.info('Setting the following report suites on the tracker: "'+e+'"'),t.sa(e)):i.logger.warn("Cannot set report suites on tracker. `sa` method not available.")),t}function s(e){return r=e.libraryCode.trackerVariableName,i.logger.info('Waiting for the tracker to become accessible at: "'+r+'".'),new d(function(e,t){var n=1,a=setInterval(function(){u[r]&&(i.logger.info('Found tracker located at: "'+r+'".'),e(u[r]),clearInterval(a)),10<=n&&(clearInterval(a),t(new Error('Bailing out. Cannot find the global variable name: "'+r+'".'))),n++},1e3)}).then(o.bind(null,e));var r}function c(e,t){return a(e).then(function(e){if(u[e])return i.logger.info('Found tracker located at: "'+e+'".'),u[e];throw new Error('Cannot find the global variable name: "'+e+'".')}.bind(null,t.libraryCode.trackerVariableName)).then(o.bind(null,t))}var l=n("@adobe/reactor-load-script"),u=n("@adobe/reactor-window"),d=n("@adobe/reactor-promise"),p="managed",f="preinstalled",m="remote",g="custom",v=function(e){var t=e.production;return(t=e[i.buildInfo.environment]?e[i.buildInfo.environment]:t).join(",")};e.exports=function(e){var t,n;switch(e.libraryCode.type){case p:n=r(e);break;case f:n=s(e);break;case g:t=e.libraryCode.source,n=c(t,e);break;case m:t="https:"===u.location.protocol?e.libraryCode.httpsUrl:e.libraryCode.httpUrl,n=c(t,e);break;default:throw new Error("Cannot load library. Type not supported.")}return n}}},"adobe-analytics/src/lib/helpers/generateVersion.js":{script:function(e){"use strict";function t(e){return(e=(e.getUTCMonth()+1+12*Math.floor(e.getUTCHours()/n)).toString(36)).substr(e.length-1)}var n=8;e.exports=function(e){e=new Date(e);if(isNaN(e))throw new Error("Invalid date provided");return("L"+(e.getUTCFullYear()-2010).toString(36)+t(e)+e.getUTCDate().toString(36)).toUpperCase()}}}},settings:{orgId:"2C7336C753C676BA0A490D4B@AdobeOrg",customSetup:{source:function(a){console.log("adobe analytics:  DCcheck123123123123123"),(window.location.href.match(/telegraph\.co\.uk\/financ(e|ialservices)/)||window.location.hostname.match(/(investor|moneytransfer)\.telegraph\.co\.uk/))&&(a.account+=",tmgtmgfinanceprod"),_functions=_satellite.getVar("TMG Functions"),a._firstLoad=!0,a.usePlugins=!0,a.doPlugins=function(e){e.eVar8=e.getTimeParting("n","0"),e.prop8="D=v8";var t,n,a=_satellite.getVar("TMG Cookie customerID"),r=_satellite.getVar("TMG cookie tmg_p13n");if(_satellite.getVar("TMG Cookie logcheck"),e.eVar10=e.getNewRepeat(365,"s_vis_repeat"),e.eVar10+=a?";Logged in":";Logged out",r&&-1!=r.indexOf("readerType"))for(var i=r.split(","),o=0;o<i.length;o++)-1!=i[o].indexOf("readerType")&&(e.eVar10+=-1!=i[o].indexOf("subscriber")?";Subscriber":";Registered");else e.eVar10+=a?";Registered":";Anonymous";for(t in document.referrer.replace(/\/?(\?.*)?$/,"").match(/telegraph\.co\.uk/)&&(e.getPercentPageViewed(),e.prop24=10*Math.round(e._ppvHighestPercentViewed/10)+"%"),e._firstLoad&&(e._dlEventsInit&&e._dlEventsInit(),e._firstLoad=!1),e)-1!=t.indexOf("prop")?e[t]&&100<e[t].length&&(e[t]=e[t].substr(0,100)):-1!=t.indexOf("eVar")&&e[t]&&255<e[t].length&&(e[t]=e[t].substr(0,255));new RegExp(/chase\.telegraph\.co\.uk|secure\.telegraph\.co\.uk|www\.telegraph\.co\.uk\/customer\/subscribe/).test(window.location.href)||(e.AudienceManagement.setup({partner:"tmg",containerNSID:0,uuidCookie:{name:"aam_uuid",days:30}}),n=Visitor.AuthState.UNKNOWN,a&&r?n=Visitor.AuthState.AUTHENTICATED:!a&&r&&(n=Visitor.AuthState.LOGGED_OUT),e.visitor.setCustomerIDs({AdobeCampaignID:{id:a,authState:n},tmgPID:{id:a,authState:n}}))},a.loadModule("Media"),a.Media.autoTrack=!1,a.Media.trackWhilePlaying=!0,a.Media.trackVars="events,prop70,eVar46,eVar70,eVar71,eVar72,"+_satellite.getVar("TMG mediaTrackVars"),a.Media.trackEvents="event70,event71,event72,event73,event74,event75,event76",a.Media.trackMilestones="25,50,75",a.Media.segmentByMilestones=!0,a.Media.trackUsingContextData=!0,a.Media.adSegmentByMilestones=!1,a.Media.completeByCloseOffset=!0,a.Media.contextDataMapping={"a.media.name":"eVar70,prop70","a.media.length":"eVar46","a.contentType":"eVar72","a.media.segment":"eVar71","a.media.segmentView":"event71","a.media.timePlayed":"event76","a.media.view":"event70","a.media.complete":"event75","a.media.milestones":{25:"event72",50:"event73",75:"event74"}},a.Media.monitor=function(e,t){"MILESTONE"==t.event&&e.Media.track(t.name),"OPEN"==t.event&&e.Media.track(t.name),"CLOSE"==t.event&&e.Media.track(t.name)},_functions=_satellite.getVar("TMG Functions"),a._dlEventsInit=function(){console.log("just to check the dataLayer: "+dataLayer.event);for(var e="undefined"!=typeof dataLayer&&dataLayer.event||[],t=0;t<e.length;t++)switch(e[t]){case"registration":a.events=void 0===a.events?"event21":a.events+",event21",_functions.setCookie("DtmRegIcid",_satellite.getVar("TMG icid"),864e5);break;case"registrationComplete":void 0!==dataLayer.registration&&""!=dataLayer.registration&&(a.eVar31=dataLayer.registration.registrationType,a.eVar32=dataLayer.registration.emailOptIn),_functions.getCookie("DtmRegIcid")&&(a.eVar201=_functions.getCookie("DtmRegIcid"),_functions.deleteCookie("DtmRegIcid")),_functions.getCookie("artTags")&&(tags=_functions.getCookie("artTags"),tags=tags.replace(/,/g,";"),a.list2=tags),a.events=void 0===a.events?"event22":a.events+",event22";break;case"subscriptionCheckout":new RegExp(/telegraph\.co\.uk\/customer\/secure\/checkout/).test(window.location.href)||(a.eVar61=dataLayer.subscription.productID,a.events=void 0===a.events?"event45":a.events+",event45",new RegExp(/monthly/).test(_satellite.getVar("TMG Subscription Offer ID"))?a.eVar62="Monthly":a.eVar62="Annually",a.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")),_functions.setCookie("DtmSubIcid",_satellite.getVar("TMG icid"),864e5);break;case"subscriptionConfirmation":_functions.getCookie("dtm_subComplete")?console.log("nosub"):(a.eVar61=dataLayer.subscription.productID||dataLayer.subscription.productId,a.eVar62=dataLayer.subscription.paymentPlan,a.eVar63=dataLayer.subscription.paymentType,_functions.getCookie("DtmSubIcid")&&(a.eVar202=_functions.getCookie("DtmSubIcid"),_functions.deleteCookie("DtmSubIcid")),_functions.getCookie("artTags")&&(tags=_functions.getCookie("artTags"),tags=tags.replace(/,/g,";"),a.list2=tags),a.events=void 0===a.events?"event46":a.events+",event46",document.cookie="dtm_subComplete=1;expire=; path=/; domain=telegraph.co.uk");break;case"subscriptionError":a.eVar99=dataLayer.error.message,a.events=void 0===a.events?"event98":a.events+",event98";break;case"registrationUpdate":a.eVar31=dataLayer.registration.registrationType,a.eVar32=dataLayer.registration.emailOptIn,a.events=void 0===a.events||""==a.events?"event148":a.events+",event148",void 0!==a.linkTrackEvents&&""!=a.linkTrackEvents?a.linkTrackEvents=a.linkTrackEvents+",event148":a.linkTrackEvents="event148";break;case"newsletterSignup":var n=_satellite.getVar("TMG DL Newsletter Type");a.events=void 0===a.events?"event14":a.events+",event14",void 0===n&&""==n||(a.prop27=n);break;case"cancellationStepWhy":a.events="event216";break;case"cancellationStepOffer":a.events="event217";break;case"cancellationStepStay":a.events="event218";break;case"cancellationStepLeave":a.events="event219";break;case"restartSubscription":a.events="event220";break;case"giftConfirmation":a.events=void 0===a.events?"event237":a.events+",event237";break;case"newsLetterStep":console.log("newsLetterstep Reached"),a.eVar223=dataLayer.previousStepSkipped,a.events="event263",a.linkTrackEvents="event263";break;case"subscriptionPaymentplanupsell":case"subscriptionPaymentplanchoice":a.events="event267",a.linkTrackEvents="event267",console.log("check for dL stuff: "+dataLayer.subscription.productID+", "+dataLayer.subscription.paymentPlan),a.eVar61=_satellite.getVar("TMG Sub Product ID"),new RegExp(/monthly/).test(_satellite.getVar("TMG Subscription Offer ID"))?a.eVar62="Monthly":a.eVar62="Annually",a.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"newsletterUnsubscribe":a.events="event268",a.prop27=dataLayer.newsLetterType,a.linkTrackEvents="event268",a.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"expressCheckout":case"expressCheckoutStep1Complete":break;case"expressCheckoutComplete":a.events=void 0===a.events?"event274":a.events+",event274",a.linkTrackEvents=void 0===a.linkTrackEvents?"event274":a.linkTrackEvents+",event274";break;case"bonusSubSplash":a.events="event276",a.linkTrackEvents="event276";break;case"bonusSubEmail":a.events="event277",a.linkTrackEvents="event277";break;case"bonusSubLogin":a.events="event278",a.linkTrackEvents="event278";break;case"bonusSubRegister":a.events="event279",a.linkTrackEvents="event279";break;case"bonusSubExistingSub":a.events="event280",a.linkTrackEvents="event280",a.eVar210=dataLayer.exsitingSubType;break;case"bonusSubConfirmation":a.events="event281",a.linkTrackEvents="event281"}},a._tpDST={2012:"3/25,10/28",2013:"3/31,10/27",2014:"3/30,10/26",2015:"3/29,10/25",2016:"3/27,10/30",2017:"3/26,10/29",2018:"3/25,10/28",2019:"3/31,10/27",2020:"3/29,10/25",2021:"3/28,10/31"},a.getPercentPageViewed=function(e,t){var n=this,a=n.c_r("s_ppv");(a=-1<a.indexOf(",")?a.split(","):[])[0]=n.unescape(a[0]),e=e||n.pageName||document.location.href,n.ppvChange=t||!0,void 0!==n.linkType&&"o"===n.linkType||(n.ppvID&&n.ppvID===e||(n.ppvID=e,n.c_w("s_ppv",""),n.handlePPVevents()),n.p_fo("s_gppvLoad")&&window.addEventListener&&(window.addEventListener("load",n.handlePPVevents,!1),window.addEventListener("click",n.handlePPVevents,!1),window.addEventListener("scroll",n.handlePPVevents,!1),window.addEventListener("resize",n.handlePPVevents,!1)),n._ppvPreviousPage=a[0]||"",n._ppvHighestPercentViewed=a[1]||"",n._ppvInitialPercentViewed=a[2]||"",n._ppvHighestPixelsSeen=a[3]||"")},a.handlePPVevents=function(){if("undefined"!=typeof s_c_il){for(var e,t,n,a,r,i=0,o=s_c_il.length;i<o;i++)if(s_c_il[i]&&s_c_il[i].getPercentPageViewed){var s=s_c_il[i];break}s&&s.ppvID&&(t=Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight)),i=(window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight),o=Math.min(Math.round(i/t*100),100),e="",!s.c_r("s_tp")||s.unescape(s.c_r("s_ppv").split(",")[0])!==s.ppvID||1==s.ppvChange&&s.c_r("s_tp")&&t!=s.c_r("s_tp")?(s.c_w("s_tp",t),s.c_w("s_ppv","")):e=s.c_r("s_ppv"),t=0<(r=e&&-1<e.indexOf(",")?e.split(",",4):[]).length?r[0]:escape(s.ppvID),n=1<r.length?parseInt(r[1]):o,a=2<r.length?parseInt(r[2]):o,r=3<r.length?parseInt(r[3]):i,s.c_w("s_ppv",e=0<o?t+","+(n<o?o:n)+","+a+","+(r<i?i:r):e))}},a.p_fo=function(e){return this.__fo||(this.__fo={}),!this.__fo[e]&&(this.__fo[e]={},!0)},a.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}"),a.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),a.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),a.getVisitNum=function(e,t){var n=this,a=function(e){return!isNaN(e)&&(0|parseFloat(e))===parseFloat(e)};if(e=e||365,"boolean"==typeof(t=t?!!t:!!a(e))){var r,i,o=(new Date).getTime(),s=c(e);return n.c_r("s_vnc"+e)&&(i=(r=n.c_r("s_vnc"+e).split("&vn="))[1]),n.c_r("s_ivc")?i?(s.setTime(o+18e5),n.c_w("s_ivc",!0,s),i):"unknown visit number":void 0!==i?(i++,a=t&&a(e)?o+864e5*e:r[0],s.setTime(a),n.c_w("s_vnc"+e,a+"&vn="+i,s),s.setTime(o+18e5),n.c_w("s_ivc",!0,s),i):(a=a(e)?o+864e5*e:c(e).getTime(),n.c_w("s_vnc"+e,a+"&vn=1",s),s.setTime(o+18e5),n.c_w("s_ivc",!0,s),"1")}};var c=function(e){var t,n=new Date,a=isNaN(e)?0:Math.floor(e);return n.setHours(23),n.setMinutes(59),n.setSeconds(59),"w"===e&&(a=6-n.getDay()),"m"===e&&(a=n.getMonth()+1,t=n.getFullYear(),a=new Date(t||1970,a||1,0).getDate()-n.getDate()),n.setDate(n.getDate()+a),"y"===e&&(n.setMonth(11),n.setDate(31)),n}},loadPhase:"beforeSettings"},libraryCode:{type:"custom",source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/EX8d6f9be5699a476f9ab0d8a7bbb24e2c-libraryCode_source.min.js",accounts:{staging:["tmgescenicdev"],production:["tmgtmgescenicprod"],development:["tmgescenicdev"]},trackerVariableName:"s"},trackerProperties:{charSet:"UTF-8",currencyCode:"GBP",trackingServer:"metrics.telegraph.co.uk",trackInlineStats:!0,visitorNamespace:"telegraphmediagroup",trackDownloadLinks:!0,trackExternalLinks:!1,cookieDomainPeriods:"2",trackingServerSecure:"smetrics.telegraph.co.uk",fpCookieDomainPeriods:"3",linkDownloadFileTypes:["avi","css","csv","doc","docx","eps","exe","jpg","js","m4v","mov","mp3","pdf","png","ppt","pptx","rar","svg","tab","txt","vsd","vxd","wav","wma","wmv","xls","xlsx","xml","zip"]}},hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP308220a2a4c4403f97fc1960100db40f/"},core:{displayName:"Core",modules:{"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/queryStringParameter.js":{name:"query-string-parameter",displayName:"Query String Parameter",script:function(e,t,n){"use strict";var o=n("@adobe/reactor-window"),s=n("@adobe/reactor-query-string");e.exports=function(e){var t=s.parse(o.location.search);if(!e.caseInsensitive)return t[e.name];for(var n=e.name.toLowerCase(),a=Object.keys(t),r=0;r<a.length;r++){var i=a[r];if(i.toLowerCase()===n)return t[i]}}}},"core/src/lib/dataElements/domAttribute.js":{name:"dom-attribute",displayName:"DOM Attribute",script:function(e){"use strict";e.exports=function(e){var t=document.querySelector(e.elementSelector);if(t){e=e.elementProperty;return"text"===e?t.innerText||t.textContent:e in t?t[e]:t.getAttribute?t.getAttribute(e):void 0}}}},"core/src/lib/dataElements/cookie.js":{name:"cookie",displayName:"Cookie",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-cookie");e.exports=function(e){return a.get(e.name)}}},"core/src/lib/dataElements/javascriptVariable.js":{name:"javascript-variable",displayName:"JavaScript Variable",script:function(e,t,n){"use strict";var a=n("../helpers/getObjectProperty.js");e.exports=function(e){return a(window,e.path)}}},"core/src/lib/events/pageBottom.js":{name:"page-bottom",displayName:"Page Bottom",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerPageBottomTrigger(t)}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,n,a){"use strict";var r,i,o,s=n("@adobe/reactor-document"),c=n("./helpers/decorateCode"),l=n("./helpers/loadCodeSequentially"),u=n("../../../node_modules/postscribe/dist/postscribe"),d=a.getExtensionSettings(),p=(r=function(e){u(s.body,e,{beforeWriteToken:function(e){return d.cspNonce&&"script"===e.tagName&&(e.attrs.nonce=d.cspNonce),e},error:function(e){a.logger.error(e.msg)}})},i=[],o=function(){if(s.body)for(;i.length;)r(i.shift());else setTimeout(o,20)},function(e){i.push(e),o()}),f=function(){if(s.currentScript)return s.currentScript.async;for(var e=s.querySelectorAll("script"),t=0;t<e.length;t++){var n=e[t];if(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/.test(n.src))return n.async}return!0}();e.exports=function(e,t){var n={settings:e,event:t},t=n.settings.source;if(t)return n.settings.isExternal?l(t).then(function(e){e&&p(c(n,e))}):void(!f&&"loading"===s.readyState&&s.write?s.write(c(n,t)):p(c(n,t)))}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerLibraryLoadedTrigger(t)}}},"core/src/lib/conditions/pathAndQuerystring.js":{name:"path-and-querystring",displayName:"Path And Query String",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=n("../helpers/textMatch");e.exports=function(e){var t=a.location.pathname+a.location.search;return e.paths.some(function(e){e=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(t,e)})}}},"core/src/lib/conditions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source.call(t.element,t,t.target)}}},"core/src/lib/events/domReady.js":{name:"dom-ready",displayName:"DOM Ready",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerDomReadyTrigger(t)}}},"core/src/lib/events/directCall.js":{name:"direct-call",displayName:"Direct Call",script:function(e,t,n,r){"use strict";var i={};window._satellite=window._satellite||{},window._satellite.track=function(e,t){e=e.trim();var n,a=i[e];a?(n={identifier:e,detail:t},a.forEach(function(e){e(n)}),a=['Rules using the direct call event type with identifier "'+e+'" have been triggered'+(t?" with additional detail:":".")],t&&a.push(t),r.logger.log.apply(r.logger,a)):r.logger.log('"'+e+'" does not match any direct call identifiers.')},e.exports=function(e,t){(i[e.identifier]||(i[e.identifier]=[])).push(t)}}},"core/src/lib/events/click.js":{name:"click",displayName:"Click",script:function(e,t,n){"use strict";var i=n("@adobe/reactor-window"),o=n("./helpers/createBubbly")(),s=new(n("./helpers/weakMap"));document.addEventListener("click",o.evaluateEvent,!0),e.exports=function(a,r){o.addListener(a,function(e){var t,n=e.nativeEvent;n.s_fe||(a.anchorDelay&&!s.has(n)&&((t=function(e){for(;e;){var t=e.tagName;if(t&&"a"===t.toLowerCase()){var n=e.getAttribute("href"),t=e.getAttribute("target");return n&&(!t||"_self"===t||"_top"===t&&i.top===i||t===i.name)?e:void 0}e=e.parentNode}}(n.target))&&(n.preventDefault(),setTimeout(function(){i.location=t.href},a.anchorDelay)),s.set(n,!0)),r(e))})},e.exports.__reset=o.__reset}},"core/src/lib/conditions/path.js":{name:"path",displayName:"Path Without Query String",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=n("../helpers/textMatch");e.exports=function(e){var t=a.location.pathname;return e.paths.some(function(e){e=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(t,e)})}}},"core/src/lib/conditions/valueComparison.js":{name:"value-comparison",displayName:"Value Comparison",script:function(e){"use strict";function r(e,t){return t&&c(e)?e.toLowerCase():e}function i(e){return s(e)?String(e):e}function a(e){return c(e)?Number(e):e}function t(a){return function(e,t,n){return e=i(e),t=i(t),c(e)&&c(t)&&a(e,t,n)}}function n(n){return function(e,t){return e=a(e),t=a(t),s(e)&&s(t)&&n(e,t)}}function o(a){return function(e,t,n){return a(r(e,n),r(t,n))}}var s=function(e){return"number"==typeof e&&isFinite(e)},c=function(e){return"string"==typeof e||e instanceof String},l={equals:o(function(e,t){return e==t}),doesNotEqual:function(){return!l.equals.apply(null,arguments)},contains:t(o(function(e,t){return-1!==e.indexOf(t)})),doesNotContain:function(){return!l.contains.apply(null,arguments)},startsWith:t(o(function(e,t){return 0===e.indexOf(t)})),doesNotStartWith:function(){return!l.startsWith.apply(null,arguments)},endsWith:t(o(function(e,t){return e.substring(e.length-t.length,e.length)===t})),doesNotEndWith:function(){return!l.endsWith.apply(null,arguments)},matchesRegex:t(function(e,t,n){return new RegExp(t,n?"i":"").test(e)}),doesNotMatchRegex:function(){return!l.matchesRegex.apply(null,arguments)},lessThan:n(function(e,t){return e<t}),lessThanOrEqual:n(function(e,t){return e<=t}),greaterThan:n(function(e,t){return t<e}),greaterThanOrEqual:n(function(e,t){return t<=e}),isTrue:function(e){return!0===e},isTruthy:function(e){return Boolean(e)},isFalse:function(e){return!1===e},isFalsy:function(e){return!e}};e.exports=function(e){return l[e.comparison.operator](e.leftOperand,e.rightOperand,Boolean(e.comparison.caseInsensitive))}}},"core/src/lib/events/dataElementChange.js":{name:"data-element-change",displayName:"Data Element Change",script:function(e,t,n,a){"use strict";var r={},i={};setInterval(function(){Object.keys(r).forEach(function(e){var t,n=JSON.stringify(a.getDataElementValue(e));n!==i[e]&&(t={dataElementName:e},r[e].forEach(function(e){e(t)}),i[e]=n)})},1e3),e.exports=function(e,t){var n=e.name,e=r[n];e||(e=r[n]=[],i[n]=JSON.stringify(a.getDataElementValue(n))),e.push(t)}}},"core/src/lib/conditions/domain.js":{name:"domain",displayName:"Domain",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=/[|\\{}()[\]^$+*?.-]/g;e.exports=function(e){var t=a.location.hostname;return e.domains.some(function(e){return t.match(new RegExp("(^|\\.)"+function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}(e)+"$","i"))})}}},"core/src/lib/conditions/subdomain.js":{name:"subdomain",displayName:"Subdomain",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=n("../helpers/textMatch");e.exports=function(e){var t=a.location.hostname;return e.subdomains.some(function(e){e=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(t,e)})}}},"core/src/lib/conditions/variable.js":{name:"variable",displayName:"Variable",script:function(e,t,n){"use strict";var a=n("../helpers/getObjectProperty"),r=n("../helpers/textMatch");e.exports=function(e){var t=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(a(window,e.name),t)}}},"core/src/lib/conditions/pageViews.js":{name:"page-views",displayName:"Page Views",script:function(e,t,n){"use strict";var a=n("../helpers/visitorTracking"),r=n("./helpers/compareNumbers"),i="lifetime";e.exports=function(e){var t=e.duration===i?"getLifetimePageViewCount":"getSessionPageViewCount";return r(a[t](),e.operator,e.count)}}},"core/src/lib/events/historyChange.js":{name:"history-change",displayName:"History Change",script:function(e,t,n){"use strict";function a(t,e,n){var a=t[e];t[e]=function(){var e=a.apply(t,arguments);return n.apply(null,arguments),e}}var r=n("./helpers/debounce"),n=n("./helpers/once"),i=window.history,o=window.location.href,s=[],c=r(function(){var e=window.location.href;o!==e&&(s.forEach(function(e){e()}),o=e)},0),l=n(function(){i&&(i.pushState&&a(i,"pushState",c),i.replaceState&&a(i,"replaceState",c)),window.addEventListener("popstate",c),window.addEventListener("hashchange",c)});e.exports=function(e,t){l(),s.push(t)}}},"core/src/lib/helpers/getObjectProperty.js":{script:function(e){"use strict";e.exports=function(e,t){for(var n=t.split("."),a=e,r=0,i=n.length;r<i;r++){if(null==a)return;a=a[n[r]]}return a}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,n){"use strict";function a(e,t){return{element:e,target:e,nativeEvent:t}}var r=n("@adobe/reactor-window"),i=n("@adobe/reactor-document"),o=-1!==r.navigator.appVersion.indexOf("MSIE 10"),s="WINDOW_LOADED",c="DOM_READY",l="PAGE_BOTTOM",u=[l,c,s],d={};u.forEach(function(e){d[e]=[]});function p(e,n){u.slice(0,u.indexOf(e)+1).forEach(function(e){var t;t=n,d[e=e].forEach(function(e){f(t,e)}),d[e]=[]})}var f=function(e,t){var n=t.trigger,t=t.syntheticEventFn;n(t?t(e):null)};r._satellite=r._satellite||{},r._satellite.pageBottom=p.bind(null,l),i.addEventListener("DOMContentLoaded",p.bind(null,c),!0),r.addEventListener("load",p.bind(null,s),!0),r.setTimeout(function(){var e="complete"===i.readyState?s:"interactive"===i.readyState?o?null:c:void 0;e&&p(e)},0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){d[l].push({trigger:e})},registerDomReadyTrigger:function(e){d[c].push({trigger:e,syntheticEventFn:a.bind(null,i)})},registerWindowLoadedTrigger:function(e){d[s].push({trigger:e,syntheticEventFn:a.bind(null,r)})}}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,n,a){"use strict";var r=0,i={javascript:function(e,t){return e.settings.global?"<script>\n"+t+"\n<\/script>":(n=e,t=t,a="__runScript"+ ++r,_satellite[a]=function(e){e.call(n.event.element,n.event,n.event.target),delete _satellite[a]},'<script>_satellite["'+a+'"](function(event, target) {\n'+t+"\n});<\/script>");var n,a},html:function(e,t){return e.settings.isExternal?a.replaceTokens(t,e.event):t}};e.exports=function(e,t){return i[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise"),r=n("./getSourceByUrl"),i=a.resolve();e.exports=function(n){var e=new a(function(t){var e=r(n);a.all([e,i]).then(function(e){e=e[0];t(e)})});return i=e}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var n,a;n=this,a=function(){return a=[function(e,t,n){"use strict";var a,r=(a=n(1))&&a.__esModule?a:{default:a};e.exports=r.default},function(e,t,n){"use strict";function s(){}function c(){var e,t=o.shift();t&&((e=r.last(t)).afterDequeue(),t.stream=function(e,t,a){function r(e){e=a.beforeWrite(e),f.write(e),a.afterWrite(e)}(f=new d.default(e,a)).id=p++,f.name=a.name||f.id,l.streams[f.name]=f;var n=e.ownerDocument,i={close:n.close,open:n.open,write:n.write,writeln:n.writeln};u(n,{close:s,open:s,write:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t.join("")+"\n")}});var o=f.win.onerror||s;return f.win.onerror=function(e,t,n){a.error({msg:e+" - "+t+": "+n}),o.apply(f.win,[e,t,n])},f.write(t,function(){u(n,i),f.win.onerror=o,a.done(),f=null,c()}),f}.apply(void 0,t),e.afterStreamStart())}function l(e,t,n){if(r.isFunction(n))n={done:n};else if("clear"===n)return o=[],f=null,void(p=0);n=r.defaults(n,i);var a=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,n];return e.postscribe={cancel:function(){a.stream?a.stream.abort():a[1]=s}},n.beforeEnqueue(a),o.push(a),f||c(),e.postscribe}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=l;var a,d=(a=n(2))&&a.__esModule?a:{default:a},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),i={afterAsync:s,afterDequeue:s,afterStreamStart:s,afterWrite:s,autoFix:!0,beforeEnqueue:s,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:s,error:function(e){throw new Error(e.msg)},releaseAsync:!1},p=0,o=[],f=null;u(l,{streams:{},queue:o,WriteStream:d.default})},function(e,t,n){"use strict";function a(e,t){t=e.getAttribute(u+t);return c.existy(t)?String(t):t}function r(e,t,n){n=2<arguments.length&&void 0!==n?n:null,t=u+t;c.existy(n)&&""!==n?e.setAttribute(t,n):e.removeAttribute(t)}t.__esModule=!0;var i,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=(i=n(3))&&i.__esModule?i:{default:i},c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),u="data-ps-",d="ps-style",p="ps-script",l=(f.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();c.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},f.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},f.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,n=void 0,a=void 0,r=[];(t=this.parser.readToken())&&!(n=c.isScript(t))&&!(a=c.isStyle(t));)(t=this.options.beforeWriteToken(t))&&r.push(t);0<r.length&&this._writeStaticTokens(r),n&&this._handleScriptToken(t),a&&this._handleStyleToken(t)},f.prototype._writeStaticTokens=function(e){e=this._buildChunk(e);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,this._walkChunk(),e):null},f.prototype._buildChunk=function(e){for(var t=this.actuals.length,n=[],a=[],r=[],i=e.length,o=0;o<i;o++){var s,c=e[o],l=c.toString();n.push(l),c.attrs?/^noscript$/i.test(c.tagName)||(s=t++,a.push(l.replace(/(\/?>)/," "+u+"id="+s+" $1")),c.attrs.id!==p&&c.attrs.id!==d&&r.push("atomicTag"===c.type?"":"<"+c.tagName+" "+u+"proxyof="+s+(c.unary?" />":">"))):(a.push(l),r.push("endTag"===c.type?l:""))}return{tokens:e,raw:n.join(""),actual:a.join(""),proxy:r.join("")}},f.prototype._walkChunk=function(){for(var e,t=[this.proxyRoot];c.existy(e=t.shift());){var n=1===e.nodeType;n&&a(e,"proxyof")||(n&&r(this.actuals[a(e,"id")]=e,"id"),(n=e.parentNode&&a(e.parentNode,"proxyof"))&&this.actuals[n].appendChild(e)),t.unshift.apply(t,c.toArray(e.childNodes))}},f.prototype._handleScriptToken=function(e){var t=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,function(){t._onScriptDone(e)}))},f.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},f.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,d),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},f.prototype._buildStyle=function(e){var n=this.doc.createElement(e.tagName);return n.setAttribute("type",e.type),c.eachKey(e.attrs,function(e,t){n.setAttribute(e,t)}),n},f.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');t=this.doc.getElementById(t);t&&t.parentNode.replaceChild(e,t)},f.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},f.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},f.prototype._writeScriptToken=function(e,t){var n=this._buildScript(e),a=this._shouldRelease(n),r=this.options.afterAsync;e.src&&(n.src=e.src,this._scriptLoadHandler(n,a?r:function(){t(),r()}));try{this._insertCursor(n,p),n.src&&!a||t()}catch(e){this.options.error(e),t()}},f.prototype._buildScript=function(e){var n=this.doc.createElement(e.tagName);return c.eachKey(e.attrs,function(e,t){n.setAttribute(e,t)}),e.content&&(n.text=e.content),n},f.prototype._scriptLoadHandler=function(t,n){function a(){t=t.onload=t.onreadystatechange=t.onerror=null}function e(){a(),null!=n&&n(),n=null}function r(e){a(),o(e),null!=n&&n(),n=null}function i(e,t){var n=e["on"+t];null!=n&&(e["_on"+t]=n)}var o=this.options.error;i(t,"load"),i(t,"error"),s(t,{onload:function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){r({msg:"onload handler failed "+e+" @ "+t.src})}e()},onerror:function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void r({msg:"onerror handler failed "+e+" @ "+t.src})}r({msg:"remote script failed "+t.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&e()}})},f.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},f);function f(e,t){t=1<arguments.length&&void 0!==t?t:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,f),this.root=e,this.options=t,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new o.default("",{autoFix:t.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],r(this.proxyRoot,"proxyof",0)}t.default=l},function(e){var t;t=function(){return a=[function(e,t,n){"use strict";var a,r=(a=n(1))&&a.__esModule?a:{default:a};e.exports=r.default},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var r,i,s=a(n(2)),o=a(n(3)),c=(r=n(6))&&r.__esModule?r:{default:r},l=n(5),u={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d=(p.prototype.append=function(e){this.stream+=e},p.prototype.prepend=function(e){this.stream=e+this.stream},p.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},p.prototype._peekTokenImpl=function(){for(var e in u)if(u.hasOwnProperty(e)&&u[e].test(this.stream)){e=o[e](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},p.prototype.peekToken=function(){return this._peekToken()},p.prototype.readToken=function(){return this._readToken()},p.prototype.readTokens=function(e){for(var t;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},p.prototype.clear=function(){var e=this.stream;return this.stream="",e},p.prototype.rest=function(){return this.stream},p);function p(e,t){var n=this,e=0<arguments.length&&void 0!==e?e:"",a=1<arguments.length&&void 0!==t?t:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,p),this.stream=e;var r,i=!1,o={};for(r in s)s.hasOwnProperty(r)&&(a.autoFix&&(o[r+"Fix"]=!0),i=i||o[r+"Fix"]);i?(this._readToken=(0,c.default)(this,o,function(){return n._readTokenImpl()}),this._peekToken=(0,c.default)(this,o,function(){return n._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}for(i in(t.default=d).tokenToString=function(e){return e.toString()},d.escapeAttributes=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=(0,l.escapeQuotes)(e[t],null));return n},d.supports=s)s.hasOwnProperty(i)&&(d.browserHasFlaw=d.browserHasFlaw||!s[i]&&i)},function(e,t){"use strict";var n=!(t.__esModule=!0),a=!1,r=window.document.createElement("div");try{var i="<P><I></P></I>";r.innerHTML=i,t.tagSoup=n=r.innerHTML!==i}catch(e){t.tagSoup=n=!1}try{r.innerHTML="<P><i><P></P></i></P>",t.selfClose=a=2===r.childNodes.length}catch(e){t.selfClose=a=!1}r=null,t.tagSoup=n,t.selfClose=a},function(e,t,n){"use strict";function a(e){var o,s,c;if(-1!==e.indexOf(">")){e=e.match(l.startTag);if(e){e=(o={},s={},c=e[2],e[2].replace(l.attr,function(e,t,n,a,r,i){n||a||r||i?i?(o[i]="",s[i]=!0):o[t]=n||a||r||l.fillAttr.test(t)&&t||"":o[t]="",c=c.replace(e,"")}),{v:new i.StartTagToken(e[1],e[0].length,o,s,!!e[3],c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===r(e))return e.v}}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=function(e){var t=e.indexOf("--\x3e");if(0<=t)return new i.CommentToken(e.substr(4,t-1),t+3)},t.chars=function(e){var t=e.indexOf("<");return new i.CharsToken(0<=t?t:e.length)},t.startTag=a,t.atomicTag=function(e){var t=a(e);if(t){e=e.slice(t.length);if(e.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){e=e.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(e)return new i.AtomicTagToken(t.tagName,e[0].length+t.length,t.attrs,t.booleanAttrs,e[1])}}},t.endTag=function(e){if(e=e.match(l.endTag))return new i.EndTagToken(e[1],e[0].length)};var i=n(4),l={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var i=n(5),a=(t.Token=function e(t,n){o(this,e),this.type=t,this.length=n,this.text=""},t.CommentToken=(c.prototype.toString=function(){return"\x3c!--"+this.content},c),t.CharsToken=(r.prototype.toString=function(){return this.text},r),t.TagToken=(s.formatTag=function(e,t){var n,a,t=1<arguments.length&&void 0!==t?t:null,r="<"+e.tagName;for(n in e.attrs)e.attrs.hasOwnProperty(n)&&(r+=" "+n,a=e.attrs[n],void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[n]||(r+='="'+(0,i.escapeQuotes)(a)+'"'));return e.rest&&(r+=" "+e.rest),e.unary&&!e.html5Unary?r+="/>":r+=">",null!=t&&(r+=t+"</"+e.tagName+">"),r},s));function s(e,t,n,a,r){o(this,s),this.type=e,this.length=n,this.text="",this.tagName=t,this.attrs=a,this.booleanAttrs=r,this.unary=!1,this.html5Unary=!1}function r(e){o(this,r),this.type="chars",this.length=e,this.text=""}function c(e,t){o(this,c),this.type="comment",this.length=t||(e?e.length:0),this.text="",this.content=e}function l(e,t){o(this,l),this.type="endTag",this.length=t,this.text="",this.tagName=e}function u(e,t,n,a,r){o(this,u),this.type="atomicTag",this.length=t,this.text="",this.tagName=e,this.attrs=n,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1,this.content=r}function d(e,t,n,a,r,i){o(this,d),this.type="startTag",this.length=t,this.text="",this.tagName=e,this.attrs=n,this.booleanAttrs=a,this.html5Unary=!1,this.unary=r,this.rest=i}t.StartTagToken=(d.prototype.toString=function(){return a.formatTag(this)},d),t.AtomicTagToken=(u.prototype.toString=function(){return a.formatTag(this,this.content)},u),t.EndTagToken=(l.prototype.toString=function(){return"</"+this.tagName+">"},l)},function(e,t){"use strict";t.__esModule=!0,t.escapeQuotes=function(e,t){return t=1<arguments.length&&void 0!==t?t:"",e?e.replace(/([^"]*)"/g,function(e,t){return/\\/.test(t)?t+'"':t+'\\"'}):t}},function(e,t){"use strict";function c(e){return e&&"startTag"===e.type&&(e.unary=n.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function l(e,t){t=t.pop();e.prepend("</"+t.tagName+">")}t.__esModule=!0,t.default=function(a,n,r){function i(){var e,t,n,t=(t=r,n=(e=a).stream,t=c(r()),e.stream=n,t);t&&s[t.type]&&s[t.type](t)}var e,o=((e=[]).last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1},e),s={startTag:function(e){var t=e.tagName;"TR"===t.toUpperCase()&&o.lastTagNameEq("TABLE")?(a.prepend("<TBODY>"),i()):n.selfCloseFix&&u.test(t)&&o.containsTagName(t)?o.lastTagNameEq(t)?l(a,o):(a.prepend("</"+e.tagName+">"),i()):e.unary||o.push(e)},endTag:function(e){o.last()?n.tagSoupFix&&!o.lastTagNameEq(e.tagName)?l(a,o):o.pop():n.tagSoupFix&&(r(),i())}};return function(){return i(),c(r())}};var n=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,u=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}],r={},n.m=a,n.c=r,n.p="",n(0);function n(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return a[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var a,r},e.exports=t()},function(e,t){"use strict";function a(e){return null!=e}function r(e,t,n){for(var a=void 0,r=e&&e.length||0,a=0;a<r;a++)t.call(n,e[a],a)}function i(e,t,n){for(var a in e)e.hasOwnProperty(a)&&t.call(n,a,e[a])}function n(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=a,t.isFunction=function(e){return"function"==typeof e},t.each=r,t.eachKey=i,t.defaults=function(n,e){return n=n||{},i(e,function(e,t){a(n[e])||(n[e]=t)}),n},t.toArray=function(t){try{return Array.prototype.slice.call(t)}catch(e){t=(n=[],r(t,function(e){n.push(e)}),{v:n});if("object"===o(t))return t.v}var n},t.last=function(e){return e[e.length-1]},t.isTag=n,t.isScript=function(e){return n(e,"script")},t.isStyle=function(e){return n(e,"style")}}],r={},n.m=a,n.c=r,n.p="",n(0);function n(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return a[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var a,r},"object"==typeof t&&"object"==typeof e?e.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof t?t.postscribe=a():n.postscribe=a()}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-load-script"),r=n("@adobe/reactor-promise"),i={},o={};_satellite.__registerScript=function(e,t){i[e]=t},e.exports=function(n){return i[n]?r.resolve(i[n]):new r(function(e){var t;o[t=n]||(o[t]=a(t)),o[t].then(function(){e(i[n])},function(){e()})})}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,n){"use strict";var a=n("./weakMap"),f=n("./matchesProperties"),m=n("./matchesSelector");e.exports=function(){var d=[],p=new a;return{addListener:function(e,t){d.push({settings:e,callback:t})},evaluateEvent:function(t,e){if(d.length&&!p.has(t)){for(var n=t.target,a=!1;n;){for(var r=!1,i=!1,o=0;o<d.length;o++){var s,c=d[o],l=c.settings.elementSelector,u=c.settings.elementProperties;!1===c.settings.bubbleFireIfChildFired&&a||n!==t.target&&!1===c.settings.bubbleFireIfParent||!(n===t.target||l||u&&Object.keys(u).length)||l&&!m(n,l)||u&&!f(n,u)||(s={},e?Object.keys(t).forEach(function(e){s[e]=t[e]}):s.nativeEvent=t,s.element=n,s.target=t.target,!1!==c.callback(s)&&(i=!0,c.settings.bubbleStop&&(r=!0)))}if(r)break;i&&(a=!0),n=n.parentNode}p.set(t,!0)}},__reset:function(){d=[]}}}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,n){"use strict";var a,r,n=n("@adobe/reactor-window").WeakMap;void 0===n&&(a=Object.defineProperty,r=Date.now()%1e9,(n=function(){this.name="__st"+(1e9*Math.random()>>>0)+r+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:a(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}),e.exports=n}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,n){"use strict";var r=n("./../../helpers/textMatch");e.exports=function(a,e){return!e||e.every(function(e){var t,n,n=(t=a,"@text"===(n=e.name)||"innerText"===n?t.textContent||t.innerText:n in t?t[n]:t.getAttribute?t.getAttribute(n):void 0),e=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(n,e)})}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,n,a){"use strict";e.exports=function(e,t){var n=e.matches||e.msMatchesSelector;if(n)try{return n.call(e,t)}catch(e){return a.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}},"core/src/lib/helpers/visitorTracking.js":{script:function(e,t,n){"use strict";function a(){return Number(p.getItem("landingTime"))}var r,i=n("@adobe/reactor-cookie"),o=n("@adobe/reactor-document"),s=n("@adobe/reactor-window"),c=n("./getNamespacedStorage"),l="_sdsat_",u="visitorTracking",n="cookiesMigrated",d=c("localStorage",u),p=c("sessionStorage",u),f=function(){return Number(d.getItem("sessionCount"))},m=function(){return Number(d.getItem("pagesViewed"))},g=function(){return Number(p.getItem("pagesViewed"))};d.getItem(n)||((u=i.get(l+"session_count"))&&d.setItem("sessionCount",u),(u=i.get(l+"lt_pages_viewed"))&&d.setItem("pagesViewed",u),d.setItem(n,!0)),(r=p.getItem("landingPage"))||(p.setItem("landingPage",s.location.href),p.setItem("landingTime",(new Date).getTime())),r||d.setItem("sessionCount",f()+1),d.setItem("pagesViewed",m()+1),p.setItem("pagesViewed",g()+1),p.getItem("trafficSource")||p.setItem("trafficSource",o.referrer),e.exports={getLandingPage:function(){return p.getItem("landingPage")},getLandingTime:a,getMinutesOnSite:function(){var e=(new Date).getTime();return Math.floor((e-a())/1e3/60)},getSessionCount:f,getLifetimePageViewCount:m,getSessionPageViewCount:g,getTrafficSource:function(){return p.getItem("trafficSource")},getIsNewVisitor:function(){return 1===f()}}}},"core/src/lib/conditions/helpers/compareNumbers.js":{script:function(e){"use strict";var a=">",r="<",i="=";e.exports=function(e,t,n){switch(t){case a:return n<e;case r:return e<n;case i:return e===n}}}},"core/src/lib/helpers/getNamespacedStorage.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-window");e.exports=function(n,e){var a="com.adobe.reactor.core."+e;return{getItem:function(e){try{return r[n].getItem(a+"."+e)}catch(e){return null}},setItem:function(e,t){try{return r[n].setItem(a+"."+e,t),!0}catch(e){return!1}}}}}},"core/src/lib/events/helpers/debounce.js":{script:function(e){"use strict";e.exports=function(n,a,r){var i=null;return function(){var e=r||this,t=arguments;clearTimeout(i),i=setTimeout(function(){n.apply(e,t)},a)}}}},"core/src/lib/events/helpers/once.js":{script:function(e){"use strict";e.exports=function(e,t){var n;return function(){return e&&(n=e.apply(t||this,arguments),e=null),n}}}}},hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP0fe6b1b3170b414e92e8f7ad4f74f857/"},"adobe-mcid":{displayName:"Experience Cloud ID Service",modules:{"adobe-mcid/src/lib/actions/setCustomerIds.js":{name:"set-customer-ids",displayName:"Set Customer IDs",script:function(e,t,n,a){"use strict";function i(e){return"string"==typeof e&&0<e.length}var o=n("../sharedModules/mcidInstance"),s=a.logger;e.exports=function(e){var a,r;o?(e=e.customerIds,a={},r=[],e.forEach(function(e){var t=e.integrationCode,n=e.value;i(t)&&i(n)?(a[t]={id:n},e.hasOwnProperty("authState")&&(a[e.integrationCode].authState=e.authState),e.hasOwnProperty("hashType")&&(a[e.integrationCode].hashType=e.hashType)):r.push(e)}),r.length&&s.warn("Rejected these customer ids: "+JSON.stringify(r)),o.setCustomerIDs(e=a),s.info("Set Customer IDs: "+JSON.stringify(e))):s.warn("MCID instance cannot be found. Cannot set Customer IDs.")}}},"adobe-mcid/src/lib/sharedModules/mcidInstance.js":{script:function(e,t,n,s){"use strict";var a,r=n("@adobe/reactor-document"),i=n("../codeLibrary/VisitorAPI"),c=n("../../view/utils/timeUnits"),o=null;_satellite.getVisitorId=function(){return o},a=r.location.pathname,(s.getExtensionSettings().pathExclusions||[]).some(function(e){return e.valueIsRegex?new RegExp(e.value,"i").test(a):e.value===a})?s.logger.warn("MCID library not loaded. One of the path exclusions matches the current path."):o=function(e){var t=s.getExtensionSettings();if("string"!=typeof t.orgId)throw new TypeError("Org ID is not a string.");var n=(t.variables||[]).reduce(function(e,t){var n=/^(true|false)$/i.test(t.value)?JSON.parse(t.value):t.value;return e[t.name]=n,e},{}),a=t.doesOptInApply;a&&("boolean"==typeof a?n.doesOptInApply=a:t.optInCallback&&(n.doesOptInApply=t.optInCallback));var r=t.isOptInStorageEnabled;r&&(n.isOptInStorageEnabled=r);var i=t.optInCookieDomain;i&&(n.optInCookieDomain=i);a=t.optInStorageExpiry;a?(i=t.timeUnit)&&c[i]&&(i=a*c[i],n.optInStorageExpiry=i):!0===r&&(n.optInStorageExpiry=33696e3);r=t.previousPermissions;r&&(n.previousPermissions=r);r=t.preOptInApprovals;r?n.preOptInApprovals=r:(o=t.preOptInApprovalInput)&&(n.preOptInApprovals=o);var o=t.isIabContext;o&&(n.isIabContext=o);e=e.getInstance(t.orgId,n);return s.logger.info('Created instance using orgId: "'+t.orgId+'"'),s.logger.info("Set variables: "+JSON.stringify(n)),e.getMarketingCloudVisitorID(function(e){s.logger.info("Obtained Marketing Cloud Visitor Id: "+e)},!0),e}(i),e.exports=o},name:"mcid-instance",shared:!0},"adobe-mcid/src/lib/codeLibrary/VisitorAPI.js":{script:function(e){e.exports=(function(){"use strict";function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){t=null==e?void 0:e[t];return void 0===t?n:t}function n(e,t){if(e===t)return 0;e=e.toString().split("."),t=t.toString().split(".");return function(e){for(var t=/^\d+$/,n=0,a=e.length;n<a;n++)if(!t.test(e[n]))return;return 1}(e.concat(t))?(function(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}(e,t),function(e,t){for(var n=0;n<e.length;n++){var a=parseInt(e[n],10),r=parseInt(t[n],10);if(r<a)return 1;if(a<r)return-1}return 0}(e,t)):NaN}function a(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function t(e,t){function n(e,t){var n,e=fe(e);return e.length?e.every(function(e){return!!t[e]}):(n=t,!!(e=Object.keys(n)).length&&e.every(function(e){return!0===n[e]}))}function a(){C(w),_(re),v(g.status,g.permissions),m.set(g.permissions,{optInCookieDomain:l,optInStorageExpiry:u}),h.execute(Te)}function r(n){return function(e,t){if(!me(e))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return _(ae),Object.assign(w,M(fe(e),n)),t||a(),g}}var i=0<arguments.length&&void 0!==e?e:{},o=i.doesOptInApply,s=i.previousPermissions,c=i.preOptInApprovals,e=i.isOptInStorageEnabled,l=i.optInCookieDomain,u=i.optInStorageExpiry,d=i.isIabContext,i=(1<arguments.length&&void 0!==t?t:{}).cookies,s=pe(t=s,"function")?t():t;P(s,"Invalid `previousPermissions`!"),P(c,"Invalid `preOptInApprovals`!");var p,f,m=function(e,t){var n=0<arguments.length&&void 0!==e?e:{},e=n.isEnabled,a=n.cookieName,r=(1<arguments.length&&void 0!==t?t:{}).cookies;return e&&a&&r?{remove:function(){r.remove(a)},get:function(){var e=r.get(a),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(a,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:ye,set:ye,remove:ye}}({isEnabled:!!e,cookieName:"adobeujs-optin"},{cookies:i}),g=this,v=(p={},(t=g).on=function(e,t,n){if(!t||"function"!=typeof t)throw new Error("[ON] Callback should be a function.");p.hasOwnProperty(e)||(p[e]=[]);var a=p[e].push({callback:t,context:n})-1;return function(){p[e].splice(a,1),p[e].length||delete p[e]}},t.off=function(e,t){p.hasOwnProperty(e)&&(p[e]=p[e].filter(function(e){if(e.callback!==t)return e}))},t.publish=function(e){var t;p.hasOwnProperty(e)&&(t=[].slice.call(arguments,1),p[e].slice(0).forEach(function(e){e.callback.apply(e.context,t)}))},t.publish),h=S(),e=E(s),b=E(c),i=m.get(),y={},k=(t=i,ve(e)||t&&ve(t)?re:ne),T=(s=b,t=e,e=i,i=M(ce,!o),o?Object.assign({},i,s,t,e):i),w=(i=T,JSON.parse(JSON.stringify(i))),_=function(e){return k=e},C=function(e){return T=e};g.deny=r(!1),g.approve=r(!0),g.denyAll=g.deny.bind(g,ce),g.approveAll=g.approve.bind(g,ce),g.isApproved=function(e){return n(e,g.permissions)},g.isPreApproved=function(e){return n(e,b)},g.fetchPermissions=function(e,t){var n=1<arguments.length&&void 0!==t&&t,t=n?g.on(re,e):ye;return!o||g.isComplete||c?e(g.permissions):n||h.add(Te,function(){return e(g.permissions)}),t},g.complete=function(){g.status===ae&&a()},g.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error("[OptIn#registerPlugin] Plugin is invalid.");y[e.name]||(y[e.name]=e).onRegister.call(e,g)},g.execute=(f=y,function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.command,e=t.params,e=void 0===e?{}:e,t=t.callback,t=void 0===t?ye:t;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var a=n.split("."),r=f[a[0]],i=a[1];if(!r||"function"!=typeof r[i])throw new Error("Make sure the plugin and API name exist.");var o=Object.assign(e,{callback:t});r[i].call(r,o)}catch(e){de.error("[execute] Something went wrong: "+e.message)}}),Object.defineProperties(g,{permissions:{get:function(){return T}},status:{get:function(){return k}},Categories:{get:function(){return ie}},doesOptInApply:{get:function(){return!!o}},isPending:{get:function(){return g.status===ne}},isComplete:{get:function(){return g.status===re}},__plugins:{get:function(){return Object.keys(y)}},isIabContext:{get:function(){return d}}})}function u(e,t){if(void 0===t)return e;var n=setTimeout(function(){n=null,e.call(e,new a("The call took longer than you wanted!"))},t);return function(){n&&(clearTimeout(n),e.apply(e,arguments))}}function r(){if(window.__cmp)return window.__cmp;var r,e=window;if(e!==window.top){for(;!r;){e=e.parent;try{e.frames.__cmpLocator&&(r=e)}catch(e){}if(e===window.top)break}if(r){var i={};return window.__cmp=function(e,t,n){var a=Math.random()+"",t={__cmpCall:{command:e,parameter:t,callId:a}};i[a]=n,r.postMessage(t,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}t.__cmpReturn&&(t=t.__cmpReturn,i[t.callId]&&(i[t.callId](t.returnValue,t.success),delete i[t.callId]))},!1),window.__cmp}de.error("__cmp not found")}else de.error("__cmp not found")}var A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,a=1;a<arguments.length;++a)for(t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};function m(i){function n(){}this.getMarketingCloudVisitorID=function(e){var t=this.findField(y.MCMID,e=e||n),e=function(n,a){var r=this;return function(){var e=i(0,n),t={};return t[n]=e,r.setStateAndPublish(t),a(e),e}}.call(this,y.MCMID,e);return void 0!==t?t:e()},this.getVisitorValues=function(t){this.getMarketingCloudVisitorID(function(e){t({MCMID:e})})}}function g(){function a(){}Object.keys(T).forEach(function(n){this[T[n]]=function(e){var t=this.findField(n,e=e||a),e=function(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(k.GETSTATE),""}}.call(this,n,e);return void 0!==t?t:e()}},this),Object.keys(w).forEach(function(e){this[w[e]]=function(){return this.findField(e,a)||{}}},this)}function v(){Object.keys(_).forEach(function(t){this[_[t]]=function(e){this.callbackRegistry.add(t,e)}},this)}function O(a,r){this.parse=function(e){try{var n={};return e.data.split("|").forEach(function(e,t){void 0!==e&&(n[L[t]]=2!==t?e:JSON.parse(e))}),n}catch(e){}},this.isInvalid=function(e){var t=this.parse(e);if(!t||Object.keys(t).length<2)return!0;var n=a!==t.orgID,e=!r||e.origin!==r,t=-1===Object.keys(D).indexOf(t.prefix);return n||e||t},this.send=function(e,t,n){t=t+"|"+a;n&&n===Object(n)&&(t+="|"+JSON.stringify(n));try{e.postMessage(t,r)}catch(e){}}}function o(e,t,n,a){function r(e){Object.assign(u,e)}function i(e){f.isInvalid(e)||(p=!1,e=f.parse(e),u.setStateAndPublish(e.state))}function o(e){!p&&d&&(p=!0,f.send(a,e))}function s(){r(new m(n._generateID)),u.getMarketingCloudVisitorID(),u.callbackRegistry.executeAll(u.state,!0),A.removeEventListener("message",c)}function c(e){f.isInvalid(e)||(e=f.parse(e),p=!1,A.clearTimeout(u._handshakeTimeout),A.removeEventListener("message",c),r(new g),A.addEventListener("message",i),u.setStateAndPublish(e.state),u.callbackRegistry.hasCallbacks()&&o(V.GETSTATE))}function l(){Object.keys(n).forEach(function(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(u[e]=function(){})}),u.getSupplementalDataID=n.getSupplementalDataID,u.isAllowed=function(){return!0}}var u=this,d=t.whitelistParentDomain;u.state={ALLFIELDS:{}},u.version=n.version,u.marketingCloudOrgID=e,u.cookieDomain=n.cookieDomain||"";var p=!(u._instanceType="child"),f=new O(e,d);u.callbackRegistry=C(),u.init=function(){A.s_c_in||(A.s_c_il=[],A.s_c_in=0),u._c="Visitor",u._il=A.s_c_il,u._in=A.s_c_in,u._il[u._in]=u,A.s_c_in++,l(),r(new v),d&&postMessage?(A.addEventListener("message",c),o(V.HANDSHAKE),u._handshakeTimeout=setTimeout(s,250)):s()},u.findField=function(e,t){if(void 0!==u.state[e])return t(u.state[e]),u.state[e]},u.messageParent=o,u.setStateAndPublish=function(e){Object.assign(u.state,e),Object.assign(u.state.ALLFIELDS,e),u.callbackRegistry.executeAll(u.state)}}function R(r,i){function t(a){return function e(){var t,n=(t=[],r._loading&&Object.keys(r._loading).forEach(function(e){r._loading[e]&&(e=$[e],t.push(e))}),t.length?t:null);n?(n=z[n[0]],r[n](e,!0)):a()}}function a(e,t){var n,a=(n={},Object.keys(x).forEach(function(e){var t=x[e],t=r[t]();W.isValueEmpty(t)||(n[e]=t)}),n);i.send(e,t,a)}function n(e){var t,n;t=e,n=r.setCustomerIDs,r.setCustomerIDs=function(e){n.call(r,e),i.send(t,I.PARENTSTATE,{CUSTOMERIDS:r.getCustomerIDs()})},a(e,I.HANDSHAKE)}return function(e){i.isInvalid(e)||(i.parse(e).prefix===I.HANDSHAKE?n:function(e){t(function(){a(e,I.PARENTSTATE)})()})(e.source)}}function N(r,i){var o={},s=0,c=Object.keys(r).length;Object.keys(r).forEach(function(e){var t,n,a=r[e];a.fn&&((t=a.args||[]).unshift((n=e,function(e){o[n]=e,++s===c&&i(o)})),a.fn.apply(a.context||null,t))})}function G(e){for(var t,n=(t=e=!e&&A.location?A.location.hostname:e).split("."),a=n.length-2;0<=a;a--)if(t=n.slice(a).join("."),Y.set("test","cookie",{domain:t}))return Y.remove("test",{domain:t}),t;return""}function F(e){var t,n,a="0123456789",r="",i="",o=8,s=10,c=10;if(1==e){for(a+="ABCDEF",t=0;t<16;t++)n=Math.floor(Math.random()*o),r+=a.substring(n,n+1),n=Math.floor(Math.random()*o),i+=a.substring(n,n+1),o=16;return r+"-"+i}for(t=0;t<19;t++)n=Math.floor(Math.random()*s),r+=a.substring(n,n+1),0===t&&9==n?s=3:((1==t||2==t)&&10!=s&&n<2||2<t)&&(s=10),n=Math.floor(Math.random()*c),i+=a.substring(n,n+1),0===t&&9==n?c=3:((1==t||2==t)&&10!=c&&n<2||2<t)&&(c=10);return r+i}function B(a){return{corsMetadata:(e="none",t=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),0<Object.prototype.toString.call(A.HTMLElement).indexOf("Constructor")&&(t=!1)),{corsType:e,corsCookiesEnabled:t}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new A[this.corsMetadata.corsType]},fireCORS:function(i,e){var o=this;e&&(i.loadErrorHandler=e);try{var t=this.getCORSInstance();t.open("get",i.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(t.withCredentials=!0,t.timeout=a.loadTimeout,t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var t;try{if((t=JSON.parse(e))!==Object(t))return o.handleCORSError(i,null,"Response is not JSON")}catch(e){return o.handleCORSError(i,e,"Error parsing response as JSON")}try{for(var n=i.callback,a=A,r=0;r<n.length;r++)a=a[n[r]];a(t)}catch(e){o.handleCORSError(i,e,"Error forming callback function")}}(this.responseText)}),t.onerror=function(e){o.handleCORSError(i,e,"onerror")},t.ontimeout=function(e){o.handleCORSError(i,e,"ontimeout")},t.send(),a._log.requests.push(i.corsUrl)}catch(e){this.handleCORSError(i,e,"try-catch")}},handleCORSError:function(e,t,n){a.CORSErrors.push({corsData:e,error:t,description:n}),e.loadErrorHandler&&("ontimeout"===n?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}};var e,t}function S(){var r={};return r.callbacks=Object.create(null),r.add=function(e,t){if(!("function"==typeof(n=t)||n instanceof Array&&n.length))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");var n;r.callbacks[e]=r.callbacks[e]||[];var a=r.callbacks[e].push(t)-1;return function(){r.callbacks[e].splice(a,1)}},r.execute=function(e,t){if(r.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;r.callbacks[e].length;){var n=r.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete r.callbacks[e]}catch(e){}}},r.executeAll=function(n,e){(e||n&&((e=n)!==Object(e)||0!==Object.keys(e).length))&&Object.keys(r.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";r.execute(e,t)},r)},r.hasCallbacks=function(){return Boolean(Object.keys(r.callbacks).length)},r}function i(a,r,e){return e()?function(){if(ue(a)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console[a].apply(console,[r].concat(t))}}:le}function M(e,n){return e.reduce(function(e,t){return e[t]=n,e},{})}function E(e){if(be(e))return e;try{return JSON.parse(e)}catch(e){return{}}}function P(e,t){ve(e)||de.error("".concat(t))}var c,l,d,p={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},f={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},h={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},b={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},q={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},U={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},H={GLOBAL:"global"},y={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},k=p,T=f,w={CUSTOMERIDS:"getCustomerIDs"},_=f,W=((l=(d={exports:{}}).exports).isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},l.isValueEmpty=function(e){return""===e||l.isObjectEmpty(e)},l.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},l.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},l.isObject=function(e){return null!==e&&"object"===j(e)&&!1===Array.isArray(e)},l.defineGlobalNamespace=function(){return window.adobe=l.isObject(window.adobe)?window.adobe:{},window.adobe},l.pluck=function(n,e){return e.reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},Object.create(null))},l.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));e=parseInt(e.d_ottl,10);return{optOut:t,d_ottl:e=isNaN(e)?7200:e}},l.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t},d.exports),C=(W.isObjectEmpty,W.isValueEmpty,W.getIeVersion,W.encodeAndBuildRequest,W.isObject,W.defineGlobalNamespace,W.pluck,W.parseOptOut,W.normalizeBoolean,function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,a=this;return function(){a.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(n,e){(e||n&&!W.isObjectEmpty(n))&&Object.keys(this.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";this.execute(e,t)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}),D=p,L={0:"prefix",1:"orgID",2:"state"},V=p,I=p,x=h,z=f,$=b,Y={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),a=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,a<0?t.length:a))},set:function(e,t,n){var a=s(n,"cookieLifetime"),r=s(n,"expires"),i=s(n,"domain"),o=s(n,"secure")?"Secure":"";return r&&"SESSION"!==a&&"NONE"!==a?(n=""!==t?parseInt(a||0,10):-60)?(r=new Date).setTime(r.getTime()+1e3*n):1===r&&(n=(r=new Date).getYear(),r.setYear(n+2+(n<1900?1900:0))):r=0,e&&"NONE"!==a?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(r?" expires="+r.toGMTString()+";":"")+(i?" domain="+i+";":"")+o,this.get(e)===t):0},remove:function(e,t){t=(t=s(t,"domain"))?" domain="+t+";":"";document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+t}},Q=function(e,t){return n(e,t)<0},J=function(e,t){return 0!==n(e,t)},K=!!A.postMessage,X={postMessage:function(e,t,n){t&&(K?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+"1&"+e))},receiveMessage:function(t,n){var e;try{K&&(t&&(e=function(e){if("string"==typeof n&&e.origin!==n||"[object Function]"===Object.prototype.toString.call(n)&&!1===n(e.origin))return!1;t(e)}),A.addEventListener?A[t?"addEventListener":"removeEventListener"]("message",e):A[t?"attachEvent":"detachEvent"]("onmessage",e))}catch(t){}}},Z={POST_MESSAGE_ENABLED:!!A.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},ee={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},te={getConfigNames:function(){return Object.keys(ee)},getConfigs:function(){return ee},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},ne="pending",ae="changed",re="complete",ie={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",MEDIA_ANALYTICS:"mediaaa"},oe=(e(f={},ie.AAM,565),e(f,ie.ECID,565),f),se=(e(b={},ie.AAM,[1,2,5]),e(b,ie.ECID,[1,2,5]),b),ce=(c=ie,Object.keys(c).map(function(e){return c[e]})),le=function(){},ue=function(e){var t=window.console;return!!t&&"function"==typeof t[e]},de=new function(e,t){e=0<arguments.length&&void 0!==e?e:"",t=1<arguments.length&&void 0!==t?t:function(){return!0},this.log=i("log",e,t),this.warn=i("warn",e,t),this.error=i("error",e,t)}("[ADOBE OPT-IN]"),pe=function(e,t){return j(e)===t},fe=function(e,t){return e instanceof Array?e:pe(e,"string")?[e]:t||[]},me=function(e){return!(!e||ge(e))&&fe(e).every(function(e){return-1<ce.indexOf(e)})},ge=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},ve=function(e){return void 0===e||(be(e)?me(Object.keys(e)):he(e))},he=function(e){try{var t=JSON.parse(e);return!!e&&pe(e,"string")&&me(Object.keys(t))}catch(e){return!1}},be=function(e){return null!==e&&pe(e,"object")&&!1===Array.isArray(e)},ye=function(){},ke=function(t){return Object.keys(t).map(function(e){return t[e]})};(a.prototype=Object.create(Error.prototype)).constructor=a;var Te="fetchPermissions";t.Categories=ie,t.TimeoutError=a;function we(e,t){return e="SHA-256"===t||"SHA256"===t||"sha256"===t||"sha-256"===t?Ce(e):e}function _e(e){return String(e).trim().toLowerCase()}var f=Object.freeze({OptIn:t,IabPlugin:function(){var e=this;function i(e,t){return s[e]=1<arguments.length&&void 0!==t?t:{}}e.name="iabPlugin",e.version="0.0.1";var o=S(),s={allConsentData:null};e.fetchConsentData=function(e){e=u(e.callback,e.timeout);t({callback:e})},e.isApproved=function(e){var a=e.callback,r=e.category,e=e.timeout;if(s.allConsentData)return a(null,l(r,s.allConsentData.vendorConsents,s.allConsentData.purposeConsents));e=u(function(e,t){var n=1<arguments.length&&void 0!==t?t:{},t=n.vendorConsents,n=n.purposeConsents;a(e,l(r,t,n))},e);t({category:r,callback:e})},e.onRegister=function(i){var o=Object.keys(oe);e.fetchConsentData({callback:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},a=n.purposeConsents,t=n.gdprApplies,r=n.vendorConsents;!e&&t&&r&&a&&(o.forEach(function(e){var t=l(e,r,a);i[t?"approve":"deny"](e,!0)}),i.complete())}})};var t=function(e){e=e.callback;if(s.allConsentData)return e(null,s.allConsentData);o.add("FETCH_CONSENT_DATA",e);var r={};n(function(e,t){var n=0<arguments.length&&void 0!==e?e:{},a=n.purposeConsents,e=n.gdprApplies,n=n.vendorConsents;1<arguments.length&&t&&i("allConsentData",r={purposeConsents:a,gdprApplies:e,vendorConsents:n}),c(function(e,t){e=0<arguments.length&&void 0!==e?e:{};1<arguments.length&&t&&(r.consentString=e.consentData,i("allConsentData",r)),o.execute("FETCH_CONSENT_DATA",[null,s.allConsentData])})})},c=function(e){var t=r();t&&t("getConsentData",null,e)},n=function(e){var t=ke(oe).filter(function(e,t,n){return n.indexOf(e)===t}),n=r();n&&n("getVendorConsents",t,e)},l=function(e,t,n){var t=1<arguments.length&&void 0!==t?t:{},a=2<arguments.length&&void 0!==n?n:{};return!!t[oe[e]]&&se[e].every(function(e){return a[e]})}}}),Ce=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var a,r=Math.pow,i=r(2,32),o="",s=[],c=8*t.length,l=e.h=e.h||[],u=e.k=e.k||[],d=u.length,p={},f=2;d<64;f++)if(!p[f]){for(v=0;v<313;v+=f)p[v]=f;l[d]=r(f,.5)*i|0,u[d++]=r(f,1/3)*i|0}for(t+="";t.length%64-56;)t+="\0";for(v=0;v<t.length;v++){if((a=t.charCodeAt(v))>>8)return;s[v>>2]|=a<<(3-v)%4*8}for(s[s.length]=c/i|0,s[s.length]=c,a=0;a<s.length;){for(var m=s.slice(a,a+=16),g=l,l=l.slice(0,8),v=0;v<64;v++){var h=m[v-15],b=m[v-2],y=l[0],k=l[4],b=l[7]+(n(k,6)^n(k,11)^n(k,25))+(k&l[5]^~k&l[6])+u[v]+(m[v]=v<16?m[v]:m[v-16]+(n(h,7)^n(h,18)^h>>>3)+m[v-7]+(n(b,17)^n(b,19)^b>>>10)|0);(l=[b+((n(y,2)^n(y,13)^n(y,22))+(y&l[1]^y&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+b|0}for(v=0;v<8;v++)l[v]=l[v]+g[v]|0}for(v=0;v<8;v++)for(a=3;a+1;a--){var T=l[v]>>8*a&255;o+=(T<16?0:"")+T.toString(16)}return o},b=f.OptIn;W.defineGlobalNamespace(),window.adobe.OptInCategories=b.Categories;b=function(a,n,e){function t(e){var a=e;return function(e){var t=e||g.location.href;try{var n=u._extractParamFromUri(t,a);if(n)return M.parsePipeDelimetedKeyValues(n)}catch(e){}}}function r(e){u._supplementalDataIDCurrent=(e=e||{}).supplementalDataIDCurrent||"",u._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},u._supplementalDataIDLast=e.supplementalDataIDLast||"",u._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function i(e){e=e.reduce(function(e,t){var n=t[0],a=t[1];return e=null!=a&&a!==_?(t=(t=e)&&t+"|")+(n+"=")+encodeURIComponent(a):e},"");return(e?e+"|":e)+"TS="+M.getTimestampInSeconds()}function c(){return u.configs.doesOptInApply&&u.configs.isIabContext?d.optIn.isApproved(d.optIn.Categories.ECID)&&f:d.optIn.isApproved(d.optIn.Categories.ECID)}function o(e,t){if(f=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(p=t.consentString),u.init(),l()}function s(){d.optIn.isApproved(d.optIn.Categories.ECID)&&(u.configs.isIabContext?d.optIn.execute({command:"iabPlugin.fetchConsentData",callback:o}):(u.init(),l()))}function l(){d.optIn.off("complete",s)}if(!e||e.split("").reverse().join("")!==a)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var u=this,d=window.adobe,p="",f=!1,m=!1;u.version="4.5.2";var g=A,v=g.Visitor;v.version=u.version,v.AuthState=U,v.OptOut=H,g.s_c_in||(g.s_c_il=[],g.s_c_in=0),u._c="Visitor",u._il=g.s_c_il,u._in=g.s_c_in,u._il[u._in]=u,g.s_c_in++,u._instanceType="regular",u._log={requests:[]},u.marketingCloudOrgID=a,u.cookieName="AMCV_"+a,u.sessionCookieName="AMCVS_"+a,u.cookieDomain=G(),u.loadSSL=0<=g.location.protocol.toLowerCase().indexOf("https"),u.loadTimeout=3e4,u.CORSErrors=[],u.marketingCloudServer=u.audienceManagerServer="dpm.demdex.net",u.sdidParamExpiry=30;function h(e){return!Object.prototype[e]}var b=null,y="MCMID",k="MCAID",T="AAM",w="MCAAMB",_="NONE",C=B(u);u.FIELDS=q,u.cookieRead=function(e){return Y.get(e)},u.cookieWrite=function(e,t,n){var a=u.cookieLifetime?(""+u.cookieLifetime).toUpperCase():"",r=!1;return u.configs&&u.configs.secureCookie&&"https:"===location.protocol&&(r=!0),Y.set(e,""+t,{expires:n,domain:u.cookieDomain,cookieLifetime:a,secure:r})},u.resetState=function(e){e?u._mergeServerState(e):r()},u._isAllowedDone=!1,u._isAllowedFlag=!1,u.isAllowed=function(){return u._isAllowedDone||(u._isAllowedDone=!0,(u.cookieRead(u.cookieName)||u.cookieWrite(u.cookieName,"T",1))&&(u._isAllowedFlag=!0)),"T"===u.cookieRead(u.cookieName)&&u._helpers.removeCookie(u.cookieName),u._isAllowedFlag},u.setMarketingCloudVisitorID=function(e){u._setMarketingCloudFields(e)},u._use1stPartyMarketingCloudServer=!1,u.getMarketingCloudVisitorID=function(e,t){u.marketingCloudServer&&u.marketingCloudServer.indexOf(".demdex.net")<0&&(u._use1stPartyMarketingCloudServer=!0);var n=u._getAudienceManagerURLData("_setMarketingCloudFields"),a=n.url;return u._getRemoteField(y,a,e,t,n)};u.getVisitorValues=function(e,t){var n,a,r,i={MCMID:{fn:u.getMarketingCloudVisitorID,args:[!0],context:u},MCOPTOUT:{fn:u.isOptedOut,args:[void 0,!0],context:u},MCAID:{fn:u.getAnalyticsVisitorID,args:[!0],context:u},MCAAMLH:{fn:u.getAudienceManagerLocationHint,args:[!0],context:u},MCAAMB:{fn:u.getAudienceManagerBlob,args:[!0],context:u}},i=t&&t.length?W.pluck(i,t):i;t&&-1===t.indexOf("MCAID")?(n=e,a=t,r={},u.getMarketingCloudVisitorID(function(){a.forEach(function(e){r[e]=u._getField(e,!0)}),-1!==a.indexOf("MCOPTOUT")?u.isOptedOut(function(e){r.MCOPTOUT=e,n(r)},null,!0):n(r)},!0)):N(i,e)},u._currentCustomerIDs={},u._customerIDsHashChanged=!1,u._newCustomerIDsHash="",u.setCustomerIDs=function(e,t){if(!u.isOptedOut()&&e){if(!W.isObject(e)||W.isObjectEmpty(e))return!1;var n,a,r;for(n in u._readVisitor(),e)if(h(n)&&(t=(a=e[n]).hasOwnProperty("hashType")?a.hashType:t,a))if("object"===j(a)){var i={};if(a.id){if(t){if(!(r=we(_e(a.id),t)))return;a.id=r,i.hashType=t}i.id=a.id}null!=a.authState&&(i.authState=a.authState),u._currentCustomerIDs[n]=i}else if(t){if(!(r=we(_e(a),t)))return;u._currentCustomerIDs[n]={id:r,hashType:t}}else u._currentCustomerIDs[n]={id:a};var o=u.getCustomerIDs(),s="",c=(c=u._getField("MCCIDH"))||0;for(n in o)h(n)&&(s+=(s?"|":"")+n+"|"+((a=o[n]).id?a.id:"")+(a.authState||""));u._newCustomerIDsHash=String(u._hash(s)),u._newCustomerIDsHash!==c&&(u._customerIDsHashChanged=!0,u._mapCustomerIDs(function(){u._customerIDsHashChanged=!1}))}},u.getCustomerIDs=function(){u._readVisitor();var e,t,n={};for(e in u._currentCustomerIDs)h(e)&&(t=u._currentCustomerIDs[e]).id&&(n[e]||(n[e]={}),n[e].id=t.id,null!=t.authState?n[e].authState=t.authState:n[e].authState=v.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType));return n},u.setAnalyticsVisitorID=function(e){u._setAnalyticsFields(e)},u.getAnalyticsVisitorID=function(e,t,n){if(!M.isTrackingServerPopulated()&&!n)return u._callCallback(e,[""]),"";var a="";if((a=!n?u.getMarketingCloudVisitorID(function(){u.getAnalyticsVisitorID(e,!0)}):a)||n){var r=n?u.marketingCloudServer:u.trackingServer,i="";u.loadSSL&&(n?u.marketingCloudServerSecure&&(r=u.marketingCloudServerSecure):u.trackingServerSecure&&(r=u.trackingServerSecure));var o,s={};return r&&(o="http"+(u.loadSSL?"s":"")+"://"+r+"/id",r="d_visid_ver="+u.version+"&mcorgid="+encodeURIComponent(u.marketingCloudOrgID)+(a?"&mid="+encodeURIComponent(a):"")+(u.idSyncDisable3rdPartySyncing||u.disableThirdPartyCookies?"&d_coppa=true":""),a=["s_c_il",u._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"],i=o+"?"+r+"&callback=s_c_il%5B"+u._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+r,s.callback=a),s.url=i,u._getRemoteField(n?y:k,i,e,t,s)}return""},u.getAudienceManagerLocationHint=function(e,t){if(u.getMarketingCloudVisitorID(function(){u.getAudienceManagerLocationHint(e,!0)})){var n=u._getField(k);if((n=!n&&M.isTrackingServerPopulated()?u.getAnalyticsVisitorID(function(){u.getAudienceManagerLocationHint(e,!0)}):n)||!M.isTrackingServerPopulated()){var a=u._getAudienceManagerURLData(),n=a.url;return u._getRemoteField("MCAAMLH",n,e,t,a)}}return""},u.getLocationHint=u.getAudienceManagerLocationHint,u.getAudienceManagerBlob=function(e,t){if(u.getMarketingCloudVisitorID(function(){u.getAudienceManagerBlob(e,!0)})){var n=u._getField(k);if((n=!n&&M.isTrackingServerPopulated()?u.getAnalyticsVisitorID(function(){u.getAudienceManagerBlob(e,!0)}):n)||!M.isTrackingServerPopulated()){var a=u._getAudienceManagerURLData(),n=a.url;return u._customerIDsHashChanged&&u._setFieldExpire(w,-1),u._getRemoteField(w,n,e,t,a)}}return""},u._supplementalDataIDCurrent="",u._supplementalDataIDCurrentConsumed={},u._supplementalDataIDLast="",u._supplementalDataIDLastConsumed={};var S=!(u.getSupplementalDataID=function(e,t){u._supplementalDataIDCurrent||t||(u._supplementalDataIDCurrent=u._generateID(1));var n=u._supplementalDataIDCurrent;return u._supplementalDataIDLast&&!u._supplementalDataIDLastConsumed[e]?(n=u._supplementalDataIDLast,u._supplementalDataIDLastConsumed[e]=!0):n&&(u._supplementalDataIDCurrentConsumed[e]&&(u._supplementalDataIDLast=u._supplementalDataIDCurrent,u._supplementalDataIDLastConsumed=u._supplementalDataIDCurrentConsumed,u._supplementalDataIDCurrent=n=t?"":u._generateID(1),u._supplementalDataIDCurrentConsumed={}),n&&(u._supplementalDataIDCurrentConsumed[e]=!0)),n});u._liberatedOptOut=null,u.getOptOut=function(e,t){var n=u._getAudienceManagerURLData("_setMarketingCloudFields"),a=n.url;if(c())return u._getRemoteField("MCOPTOUT",a,e,t,n);if(u._registerCallback("liberatedOptOut",e),null!==u._liberatedOptOut)return u._callAllCallbacks("liberatedOptOut",[u._liberatedOptOut]),S=!1,u._liberatedOptOut;if(S)return null;S=!0;e="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[e],A[e]=function(e){var t;e===Object(e)&&(t=(e=W.parseOptOut(e,t,_)).optOut,e=1e3*e.d_ottl,u._liberatedOptOut=t,setTimeout(function(){u._liberatedOptOut=null},e)),u._callAllCallbacks("liberatedOptOut",[t]),S=!1},C.fireCORS(n),null},u.isOptedOut=function(t,n,e){n=n||v.OptOut.GLOBAL;e=u.getOptOut(function(e){e=e===v.OptOut.GLOBAL||0<=e.indexOf(n);u._callCallback(t,[e])},e);return e?e===v.OptOut.GLOBAL||0<=e.indexOf(n):null},u._fields=null,u._fieldsExpired=null,u._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},u._generateID=F,u._generateLocalMID=function(){var e=u._generateID(0);return x.isClientSideMarketingCloudVisitorID=!0,e},u._callbackList=null,u._callCallback=function(e,t){try{"function"==typeof e?e.apply(g,t):e[1].apply(e[0],t)}catch(e){}},u._registerCallback=function(e,t){t&&(null==u._callbackList&&(u._callbackList={}),null==u._callbackList[e]&&(u._callbackList[e]=[]),u._callbackList[e].push(t))},u._callAllCallbacks=function(e,t){if(null!=u._callbackList){var n=u._callbackList[e];if(n)for(;0<n.length;)u._callCallback(n.shift(),t)}},u._addQuerystringParam=function(e,t,n,a){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),t=M.parseHash(e),n=M.hashlessUrl(e);if(-1===n.indexOf("?"))return n+"?"+r+t;e=n.split("?"),n=e[0]+"?",e=e[1];return n+M.addQueryParamAtLocation(e,r,a)+t},u._extractParamFromUri=function(e,t){e=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(e&&e.length)return decodeURIComponent(e[1])},u._parseAdobeMcFromUrl=t(Z.ADOBE_MC),u._parseAdobeMcSdidFromUrl=t(Z.ADOBE_MC_SDID),u._attemptToPopulateSdidFromUrl=function(e){var t=u._parseAdobeMcSdidFromUrl(e),e=1e9;t&&t.TS&&(e=M.getTimestampInSeconds()-t.TS),t&&t.SDID&&t.MCORGID===a&&e<u.sdidParamExpiry&&(u._supplementalDataIDCurrent=t.SDID,u._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},u._attemptToPopulateIdsFromUrl=function(){var e,t=u._parseAdobeMcFromUrl();function n(e,t,n){e&&e.match(Z.VALID_VISITOR_ID_REGEX)&&(n===y&&(m=!0),t(e))}t&&t.TS&&(e=M.getTimestampInSeconds()-t.TS,Math.floor(e/60)>Z.ADOBE_MC_TTL_IN_MIN||t.MCORGID!==a||(n((t=t)[y],u.setMarketingCloudVisitorID,y),u._setFieldExpire(w,-1),n(t[k],u.setAnalyticsVisitorID)))},u._mergeServerState=function(e){if(e)try{var t,n=e;(e=M.isObject(n)?n:JSON.parse(n))[u.marketingCloudOrgID]&&(a=(t=e[u.marketingCloudOrgID]).customerIDs,M.isObject(a)&&u.setCustomerIDs(a),r(t.sdid))}catch(e){throw new Error("`serverState` has an invalid format.")}var a,n},u._timeout=null,u._loadData=function(e,t,n,a){t=u._addQuerystringParam(t,"d_fieldgroup",e,1),a.url=u._addQuerystringParam(a.url,"d_fieldgroup",e,1),a.corsUrl=u._addQuerystringParam(a.corsUrl,"d_fieldgroup",e,1),x.fieldGroupObj[e]=!0,a===Object(a)&&a.corsUrl&&"XMLHttpRequest"===C.corsMetadata.corsType&&C.fireCORS(a,n,e)},u._clearTimeout=function(e){null!=u._timeout&&u._timeout[e]&&(clearTimeout(u._timeout[e]),u._timeout[e]=0)},u._settingsDigest=0,u._getSettingsDigest=function(){var e;return u._settingsDigest||(e=u.version,u.audienceManagerServer&&(e+="|"+u.audienceManagerServer),u.audienceManagerServerSecure&&(e+="|"+u.audienceManagerServerSecure),u._settingsDigest=u._hash(e)),u._settingsDigest},u._readVisitorDone=!1,u._readVisitor=function(){if(!u._readVisitorDone){u._readVisitorDone=!0;var e,t,n,a,r,i=u._getSettingsDigest(),o=!1,s=u.cookieRead(u.cookieName),c=new Date;if(s||m||u.discardTrackingServerECID||(s=u.cookieRead(Z.FIRST_PARTY_SERVER_COOKIE)),null==u._fields&&(u._fields={}),s&&"T"!==s)for((s=s.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(s[0],10)!==i&&(o=!0),s.shift()),s.length%2==1&&s.pop(),e=0;e<s.length;e+=2)t=(r=s[e].split("-"))[0],n=s[e+1],r=1<r.length?(a=parseInt(r[1],10),0<r[1].indexOf("s")):(a=0,!1),o&&("MCCIDH"===t&&(n=""),0<a&&(a=c.getTime()/1e3-60)),t&&n&&(u._setField(t,n,1),0<a&&(u._fields["expire"+t]=a+(r?"s":""),(c.getTime()>=1e3*a||r&&!u.cookieRead(u.sessionCookieName))&&(u._fieldsExpired||(u._fieldsExpired={}),u._fieldsExpired[t]=!0)));!u._getField(k)&&M.isTrackingServerPopulated()&&(s=u.cookieRead("s_vi"))&&1<(s=s.split("|")).length&&0<=s[0].indexOf("v1")&&((n=0<=(e=(n=s[1]).indexOf("["))?n.substring(0,e):n)&&n.match(Z.VALID_VISITOR_ID_REGEX)&&u._setField(k,n))}},u._appendVersionTo=function(e){var t="vVersion|"+u.version,n=e?u._getCookieVersion(e):null;return n?J(n,u.version)&&(e=e.replace(Z.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},u._writeVisitor=function(){var e,t,n=u._getSettingsDigest();for(e in u._fields)h(e)&&u._fields[e]&&"expire"!==e.substring(0,6)&&(t=u._fields[e],n+=(n?"|":"")+e+(u._fields["expire"+e]?"-"+u._fields["expire"+e]:"")+"|"+t);n=u._appendVersionTo(n),u.cookieWrite(u.cookieName,n,1)},u._getField=function(e,t){return null==u._fields||!t&&u._fieldsExpired&&u._fieldsExpired[e]?null:u._fields[e]},u._setField=function(e,t,n){null==u._fields&&(u._fields={}),u._fields[e]=t,n||u._writeVisitor()},u._getFieldList=function(e,t){t=u._getField(e,t);return t?t.split("*"):null},u._setFieldList=function(e,t,n){u._setField(e,t?t.join("*"):"",n)},u._getFieldMap=function(e,t){var n=u._getFieldList(e,t);if(n){for(var a={},r=0;r<n.length;r+=2)a[n[r]]=n[r+1];return a}return null},u._setFieldMap=function(e,t,n){var a,r=null;if(t)for(a in r=[],t)h(a)&&(r.push(a),r.push(t[a]));u._setFieldList(e,r,n)},u._setFieldExpire=function(e,t,n){var a=new Date;a.setTime(a.getTime()+1e3*t),null==u._fields&&(u._fields={}),u._fields["expire"+e]=Math.floor(a.getTime()/1e3)+(n?"s":""),t<0?(u._fieldsExpired||(u._fieldsExpired={}),u._fieldsExpired[e]=!0):u._fieldsExpired&&(u._fieldsExpired[e]=!1),n&&(u.cookieRead(u.sessionCookieName)||u.cookieWrite(u.sessionCookieName,"1"))},u._findVisitorID=function(e){return e&&((e=(e="object"===j(e)?e.d_mid||e.visitorID||e.id||e.uuid||""+e:e)&&"NOTARGET"===(e=e.toUpperCase())?_:e)&&(e===_||e.match(Z.VALID_VISITOR_ID_REGEX))||(e="")),e},u._setFields=function(e,t){if(u._clearTimeout(e),null!=u._loading&&(u._loading[e]=!1),x.fieldGroupObj[e]&&x.setState(e,!1),"MC"===e){!0!==x.isClientSideMarketingCloudVisitorID&&(x.isClientSideMarketingCloudVisitorID=!1);var n=u._getField(y);if(!n||u.overwriteCrossDomainMCIDAndAID){if(!(n="object"===j(t)&&t.mid?t.mid:u._findVisitorID(t))){if(u._use1stPartyMarketingCloudServer&&!u.tried1stPartyMarketingCloudServer)return u.tried1stPartyMarketingCloudServer=!0,void u.getAnalyticsVisitorID(null,!1,!0);n=u._generateLocalMID()}u._setField(y,n)}n&&n!==_||(n=""),"object"===j(t)&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&u._setFields(T,t),u._use1stPartyMarketingCloudServer&&t.mid&&u._setFields("A",{id:t.id})),u._callAllCallbacks(y,[n])}var a,r,i;e===T&&"object"===j(t)&&(a=604800,null!=t.id_sync_ttl&&t.id_sync_ttl&&(a=parseInt(t.id_sync_ttl,10)),n=L.getRegionAndCheckIfChanged(t,a),u._callAllCallbacks("MCAAMLH",[n]),n=u._getField(w),(t.d_blob||t.blob)&&((n=t.d_blob)||(n=t.blob),u._setFieldExpire(w,a),u._setField(w,n)),u._callAllCallbacks(w,[n=n||""]),!t.error_msg&&u._newCustomerIDsHash&&u._setField("MCCIDH",u._newCustomerIDsHash)),"A"===e&&((r=u._getField(k))&&!u.overwriteCrossDomainMCIDAndAID||((r=u._findVisitorID(t))?r!==_&&u._setFieldExpire(w,-1):r=_,u._setField(k,r)),u._callAllCallbacks(k,[r=!r||r===_?"":r])),u.idSyncDisableSyncs||u.disableIdSyncs?L.idCallNotProcesssed=!0:(L.idCallNotProcesssed=!1,(r={}).ibs=t.ibs,r.subdomain=t.subdomain,L.processIDCallData(r)),t===Object(t)&&(c()&&u.isAllowed()&&(i=u._getField("MCOPTOUT")),i=(t=W.parseOptOut(t,i,_)).optOut,t=t.d_ottl,u._setFieldExpire("MCOPTOUT",t,!0),u._setField("MCOPTOUT",i),u._callAllCallbacks("MCOPTOUT",[i]))},u._loading=null,u._getRemoteField=function(t,e,n,a,r){var i,o="",s=M.isFirstPartyAnalyticsVisitorIDCall(t);if(c()&&u.isAllowed())if(u._readVisitor(),!(!(o=u._getField(t,!0==={MCAAMLH:!0,MCAAMB:!0}[t]))||u._fieldsExpired&&u._fieldsExpired[t])||u.disableThirdPartyCalls&&!s)o||(t===y?(u._registerCallback(t,n),o=u._generateLocalMID(),u.setMarketingCloudVisitorID(o)):t===k?(u._registerCallback(t,n),u.setAnalyticsVisitorID(o="")):a=!(o=""));else if(t===y||"MCOPTOUT"===t?i="MC":"MCAAMLH"===t||t===w?i=T:t===k&&(i="A"),i)return!e||null!=u._loading&&u._loading[i]||(null==u._loading&&(u._loading={}),u._loading[i]=!0,u._loadData(i,e,function(e){u._getField(t)||(e&&x.setState(i,!0),e="",t===y?e=u._generateLocalMID():i===T&&(e={error_msg:"timeout"}),u._setFields(i,e))},r)),u._registerCallback(t,n),o||(e||u._setFields(i,{id:_}),"");return t!==y&&t!==k||o!==_||(a=!(o="")),n&&a&&u._callCallback(n,[o]),o},u._setMarketingCloudFields=function(e){u._readVisitor(),u._setFields("MC",e)},u._mapCustomerIDs=function(e){u.getAudienceManagerBlob(e,!0)},u._setAnalyticsFields=function(e){u._readVisitor(),u._setFields("A",e)},u._setAudienceManagerFields=function(e){u._readVisitor(),u._setFields(T,e)},u._getAudienceManagerURLData=function(e){var t=u.audienceManagerServer,n="",a=u._getField(y),r=u._getField(w,!0),i=u._getField(k),o=i&&i!==_?"&d_cid_ic=AVID%01"+encodeURIComponent(i):"";if(t=u.loadSSL&&u.audienceManagerServerSecure?u.audienceManagerServerSecure:t){var s,c,l=u.getCustomerIDs();if(l)for(s in l)h(s)&&(c=l[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(c.id||"")+(c.authState?"%01"+c.authState:""));e=e||"_setAudienceManagerFields";t="http"+(u.loadSSL?"s":"")+"://"+t+"/id",a="d_visid_ver="+u.version+(p&&-1!==t.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+p:"")+"&d_rtbd=json&d_ver=2"+(!a&&u._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(u.marketingCloudOrgID)+"&d_nsid="+(u.idSyncContainerID||0)+(a?"&d_mid="+encodeURIComponent(a):"")+(u.idSyncDisable3rdPartySyncing||u.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===b?"&d_coop_safe=1":!1===b?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,r=["s_c_il",u._in,e];return{url:n=t+"?"+a+"&d_cb=s_c_il%5B"+u._in+"%5D."+e,corsUrl:t+"?"+a,callback:r}}return{url:n}},u.appendVisitorIDsTo=function(e){try{var t=[[y,u._getField(y)],[k,u._getField(k)],["MCORGID",u.marketingCloudOrgID]];return u._addQuerystringParam(e,Z.ADOBE_MC,i(t))}catch(t){return e}},u.appendSupplementalDataIDTo=function(e,t){if(!(t=t||u.getSupplementalDataID(M.generateRandomString(),!0)))return e;try{var n=i([["SDID",t],["MCORGID",u.marketingCloudOrgID]]);return u._addQuerystringParam(e,Z.ADOBE_MC_SDID,n)}catch(t){return e}};var M={parseHash:function(e){var t=e.indexOf("#");return 0<t?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return 0<t?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){e=e.split("&");return n=null!=n?n:e.length,e.splice(n,0,t),e.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===k&&(t=t||u.trackingServer,n=n||u.trackingServerSecure,!("string"!=typeof(t=u.loadSSL?n:t)||!t.length)&&t.indexOf("2o7.net")<0&&t.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){Y.remove(e,{domain:u.cookieDomain})},isTrackingServerPopulated:function(){return!!u.trackingServer||!!u.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){t=t.split("=");return e[t[0]]=decodeURIComponent(t[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};u._helpers=M;var E,P,D,L=(E=u,P=v,D=A.document,{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){e=e.split("/");return e[0]+"//"+e[2]}},subdomain:null,url:null,getUrl:function(){var e="http://fast.",t="?d_nsid="+E.idSyncContainerID+"#"+encodeURIComponent(D.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),t=(e=E.loadSSL?E.idSyncSSLUseAkamai?"https://fast.":"https://":e)+this.subdomain+".demdex.net/dest5.html"+t,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+E.idSyncContainerID,t},checkDPIframeSrc:function(){var e="?d_nsid="+E.idSyncContainerID+"#"+encodeURIComponent(D.location.href);"string"==typeof E.dpIframeSrc&&E.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(E._subdomain||this.subdomain||(new Date).getTime())+"_"+E.idSyncContainerID,this.iframeHost=this.getIframeHost(E.dpIframeSrc),this.url=E.dpIframeSrc+e)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:Z.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(E.idSyncDisableSyncs||E.disableIdSyncs||E.idSyncDisable3rdPartySyncing||E.disableThirdPartyCookies||E.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||E._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||E._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(a=D.createElement("iframe")).sandbox="allow-scripts allow-same-origin",a.title="Adobe ID Syncing iFrame",a.id=n.id,a.name=n.id+"_name",a.style.cssText="display: none; width: 0; height: 0;",a.src=n.url,n.newIframeCreated=!0,t(),D.body.appendChild(a)}function t(e){a.addEventListener("load",function(){a.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,a=D.getElementById(this.id);a?"IFRAME"!==a.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==a.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=a,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=a},fireIframeLoadedCallbacks:function(t){this.iframeLoadedCallbacks.forEach(function(e){"function"==typeof e&&e({message:t||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(e){function t(){r.jsonForComparison.push(e),r.jsonWaiting.push(e),r.processSyncOnPage(e)}var n,a,r=this;if(e===Object(e)&&e.ibs)if(n=JSON.stringify(e.ibs||[]),this.jsonForComparison.length){for(var i,o=!1,s=0,c=this.jsonForComparison.length;s<c;s++)if(i=this.jsonForComparison[s],n===JSON.stringify(i.ibs||[])){o=!0;break}o?this.jsonDuplicates.push(e):t()}else t();(this.receivedThirdPartyCookiesNotification||!Z.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length&&(a=this.jsonWaiting.shift(),this.process(a),this.requestToProcess()),E.idSyncDisableSyncs||E.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=Z.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(e,t){var n=E._getField("MCAAMLH"),e=e.d_region||e.dcs_region;return n?e&&(E._setFieldExpire("MCAAMLH",t),E._setField("MCAAMLH",e),parseInt(n,10)!==e&&(this.regionChanged=!0,this.timesRegionChanged++,E._setField("MCSYNCSOP",""),E._setField("MCSYNCS",""),n=e)):(n=e)&&(E._setFieldExpire("MCAAMLH",t),E._setField("MCAAMLH",n)),n=n||""},processSyncOnPage:function(e){var t,n,a,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(a=0;a<n;a++)(r=t[a]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,a,r,i,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,a=0;a<n;a++)r=t[a],i=[o("ibs"),o(r.id||""),o(r.tag||""),W.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(i.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,i.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,n){var a="syncOnPage"===n,r=a?"MCSYNCSOP":"MCSYNCS";E._readVisitor();var i,o,s,c=E._getField(r),n=Math.ceil((new Date).getTime()/Z.MILLIS_PER_DAY);c?(i=c.split("*"),o=(c=this.pruneSyncData(i,e.id,n)).dataPresent,s=c.dataValid,o&&s||this.fireSync(a,e,t,i,r,n)):this.fireSync(a,e,t,i=[],r,n)},pruneSyncData:function(e,t,n){for(var a,r,i=!1,o=!1,s=0;s<e.length;s++)a=e[s],r=parseInt(a.split("-")[1],10),a.match("^"+t+"-")?(i=!0,n<r?o=!0:(e.splice(s,1),s--)):r<=n&&(e.splice(s,1),s--);return{dataPresent:i,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,n,a,u,r){var d=this;if(e){if("img"===t.tag)for(var i=t.url,o=E.loadSSL?"https:":"http:",s=0,c=i.length;s<c;s++){var l=i[s],p=/^\/\//.test(l),f=new Image;f.addEventListener("load",function(o,s,c,l){return function(){d.onPagePixels[o]=null,E._readVisitor();var e,t,n,a,r=E._getField(u),i=[];if(r)for(t=0,n=(e=r.split("*")).length;t<n;t++)(a=e[t]).match("^"+s.id+"-")||i.push(a);d.setSyncTrackingData(i,s,c,l)}}(this.onPagePixels.length,t,u,r)),f.src=(p?o:"")+l,this.onPagePixels.push(f)}}else this.addMessage(n),this.setSyncTrackingData(a,t,u,r)},addMessage:function(e){var t=encodeURIComponent(E._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((Z.POST_MESSAGE_ENABLED?"":t)+e)},setSyncTrackingData:function(e,t,n,a){e.push(t.id+"-"+(a+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),E._setField(n,e.join("*"))},sendMessages:function(){var e,t=this,n="",a=encodeURIComponent;this.regionChanged&&(n=a("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?Z.POST_MESSAGE_ENABLED?(e=n+a("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){X.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t=/^---destpub-to-parent---/;"string"==typeof e&&t.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(t,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(e){(null==this.url||e.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof E._subdomain&&E._subdomain.length?this.subdomain=E._subdomain:this.subdomain=e.subdomain||"",this.url=this.getUrl()),e.ibs instanceof Array&&e.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(E.idSyncAttachIframeOnWindowLoad?!P.windowLoaded&&"complete"!==D.readyState&&"loaded"!==D.readyState||this.attachIframe():this.attachIframeASAP()),"function"==typeof E.idSyncIDCallResult?E.idSyncIDCallResult(e):this.requestToProcess(e),"function"==typeof E.idSyncAfterIDCallResult&&E.idSyncAfterIDCallResult(e)},canMakeSyncIDCall:function(e,t){return E._forceSyncIDCall||!e||t-e>Z.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var t=this;!function e(){t.startedAttachingIframe||(D.body?t.attachIframe():setTimeout(e,30))}()}});u._destinationPublishing=L,u.timeoutMetricsLog=[];var V,I,x={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case"A":!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case T:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};u.isClientSideMarketingCloudVisitorID=function(){return x.isClientSideMarketingCloudVisitorID},u.MCIDCallTimedOut=function(){return x.MCIDCallTimedOut},u.AnalyticsIDCallTimedOut=function(){return x.AnalyticsIDCallTimedOut},u.AAMIDCallTimedOut=function(){return x.AAMIDCallTimedOut},u.idSyncGetOnPageSyncInfo=function(){return u._readVisitor(),u._getField("MCSYNCSOP")},u.idSyncByURL=function(e){if(!u.isOptedOut()){var t=(i=(a=e||{}).minutesToLive,r="",(u.idSyncDisableSyncs||u.disableIdSyncs)&&(r=r||"Error: id syncs have been disabled"),"string"==typeof a.dpid&&a.dpid.length||(r=r||"Error: config.dpid is empty"),"string"==typeof a.url&&a.url.length||(r=r||"Error: config.url is empty"),void 0===i?i=20160:(i=parseInt(i,10),(isNaN(i)||i<=0)&&(r=r||"Error: config.minutesToLive needs to be a positive number")),{error:r,ttl:i});if(t.error)return t.error;var n=e.url,a=encodeURIComponent,r=L,n=n.replace(/^https:/,"").replace(/^http:/,""),i=W.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(n),t.ttl,"",i];return r.addMessage(i.join("|")),r.requestToProcess(),"Successfully queued"}var a,r},u.idSyncByDataSource=function(e){if(!u.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,u.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},I=L,(V=u).publishDestinations=function(e,t,n){var t=t,a=n;try{a="function"==typeof a?a:e.callback}catch(e){a=function(){}}var r=I;if(r.readyToAttachIframePreliminary()){if("string"==typeof e){if(!e.length)return void a({error:"subdomain is not a populated string."});if(!(t instanceof Array&&t.length))return void a({error:"messages is not a populated array."});var i=!1;if(t.forEach(function(e){"string"==typeof e&&e.length&&(r.addMessage(e),i=!0)}),!i)return void a({error:"None of the messages are populated strings."})}else{if(!W.isObject(e))return void a({error:"Invalid parameters passed."});t=e;if("string"!=typeof(e=t.subdomain)||!e.length)return void a({error:"config.subdomain is not a populated string."});t=t.urlDestinations;if(!(t instanceof Array&&t.length))return void a({error:"config.urlDestinations is not a populated array."});var o=[];t.forEach(function(e){W.isObject(e)&&(e.hideReferrer?e.message&&r.addMessage(e.message):o.push(e))}),function n(){o.length&&setTimeout(function(){var e=new Image,t=o.shift();e.src=t.url,r.onPageDestinationsFired.push(t),n()},100)}()}r.iframe?(a({message:"The destination publishing iframe is already attached and loaded."}),r.requestToProcess()):!V.subdomain&&V._getField("MCMID")?(r.subdomain=e,r.doAttachIframe=!0,r.url=r.getUrl(),r.readyToAttachIframe()?(r.iframeLoadedCallbacks.push(function(e){a({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),r.attachIframe()):a({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):r.iframeLoadedCallbacks.push(function(e){a({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}else a({error:"The destination publishing iframe is disabled in the Visitor library."})},u._getCookieVersion=function(e){e=e||u.cookieRead(u.cookieName);e=Z.VERSION_REGEX.exec(e);return e&&1<e.length?e[1]:null},u._resetAmcvCookie=function(e){var t=u._getCookieVersion();t&&!Q(t,e)||M.removeCookie(u.cookieName)},u.setAsCoopSafe=function(){b=!0},u.setAsCoopUnsafe=function(){b=!1},function(){if(u.configs=Object.create(null),M.isObject(n))for(var e in n)h(e)&&(u[e]=n[e],u.configs[e]=n[e])}(),[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",a=u[t];u[t]=function(e){return c()&&u.isAllowed()?a.apply(u,arguments):("function"==typeof e&&u._callCallback(e,[n]),n)}}),u.init=function(){if(!(!u.configs.doesOptInApply||d.optIn.isComplete&&c()))return d.optIn.fetchPermissions(s,!0);var e,t;M.isObject(n)?(u.idSyncContainerID=u.idSyncContainerID||0,b="boolean"==typeof u.isCoopSafe?u.isCoopSafe:M.parseBoolean(u.isCoopSafe),u.resetBeforeVersion&&u._resetAmcvCookie(u.resetBeforeVersion),u._attemptToPopulateIdsFromUrl(),u._attemptToPopulateSdidFromUrl(),u._readVisitor(),e=u._getField("MCIDTS"),t=Math.ceil((new Date).getTime()/Z.MILLIS_PER_DAY),u.idSyncDisableSyncs||u.disableIdSyncs||!L.canMakeSyncIDCall(e,t)||(u._setFieldExpire(w,-1),u._setField("MCIDTS",t)),u.getMarketingCloudVisitorID(),u.getAudienceManagerLocationHint(),u.getAudienceManagerBlob(),u._mergeServerState(u.serverState)):(u._attemptToPopulateIdsFromUrl(),u._attemptToPopulateSdidFromUrl()),function(){if(!u.idSyncDisableSyncs&&!u.disableIdSyncs){L.checkDPIframeSrc();g.addEventListener("load",function(){var e;v.windowLoaded=!0,(e=L).readyToAttachIframe()&&e.attachIframe()});try{X.receiveMessage(function(e){L.receiveMessage(e.data)},L.iframeHost)}catch(e){}}}(),u.whitelistIframeDomains&&Z.POST_MESSAGE_ENABLED&&(u.whitelistIframeDomains=u.whitelistIframeDomains instanceof Array?u.whitelistIframeDomains:[u.whitelistIframeDomains],u.whitelistIframeDomains.forEach(function(e){var t=new O(a,e),t=R(u,t);X.receiveMessage(t,e)}))}};b.config=te;var Se=A.Visitor=b,Me=f.OptIn,Ee=f.IabPlugin;function Pe(){Se.windowLoaded=!0}Se.getInstance=function(a,e){if(!a)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");a.indexOf("@")<0&&(a+="@AdobeOrg");var t=function(){var e=A.s_c_il;if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===a)return n}}();if(t)return t;var n=function(a){if(W.isObject(a))return Object.keys(a).filter(function(e){return""!==a[e]}).reduce(function(e,t){var n=te.normalizeConfig(a[t]),n=W.normalizeBoolean(n);return e[t]=n,e},Object.create(null))}(e),r=n||{};A.adobe.optIn=A.adobe.optIn||function(){var e=W.pluck(r,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),t=(t=(t=r.optInCookieDomain||r.cookieDomain)||G())===window.location.hostname?"":t;e.optInCookieDomain=t;t=new Me(e,{cookies:Y});return e.isIabContext&&e.doesOptInApply&&(e=new Ee(window.__cmp),t.registerPlugin(e)),t}();var i=a.split("").reverse().join(""),t=new Se(a,null,i);W.isObject(n)&&n.cookieDomain&&(t.cookieDomain=n.cookieDomain),A.s_c_il.splice(--A.s_c_in,1);e=W.getIeVersion();if("number"==typeof e&&e<10)return t._helpers.replaceMethodsWithFunction(t,function(){});i=function(){try{return A.self!==A.parent}catch(e){return 1}}()&&((e=t).cookieWrite("TEST_AMCV_COOKIE","T",1),"T"!==e.cookieRead("TEST_AMCV_COOKIE")||(e._helpers.removeCookie("TEST_AMCV_COOKIE"),0))&&A.parent?new o(a,n,t,A.parent):new Se(a,n,i),t=null;return i.init(),i},A.addEventListener?A.addEventListener("load",Pe):A.attachEvent&&A.attachEvent("onload",Pe),Se.codeLoadEnd=(new Date).getTime()}(),Visitor)}},"adobe-mcid/src/view/utils/timeUnits.js":{script:function(e){e.exports={Hours:3600,Days:86400,Weeks:604800,Months:2592e3,Years:31536e3}}}},settings:{orgId:"2C7336C753C676BA0A490D4B@AdobeOrg",variables:[{name:"loadTimeout",value:"3500"},{name:"trackingServer",value:"metrics.telegraph.co.uk"},{name:"trackingServerSecure",value:"smetrics.telegraph.co.uk"}]},hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPf83a38d6d03b44f08b465a6d63b6bbe3/"},"adobe-target":{displayName:"Adobe Target",modules:{},settings:{targetSettings:{enabled:!0,timeout:3e3,version:"1.8.1",imsOrgId:"2C7336C753C676BA0A490D4B@AdobeOrg",clientCode:"telegraphmediagroupl",secureOnly:!1,crossDomain:"disabled",optinEnabled:!1,serverDomain:"telegraphmediagroupl.tt.omtrdc.net",urlSizeLimit:2048,optoutEnabled:!1,globalMboxName:"target-global-mbox",bodyHiddenStyle:"body {opacity: 0}",deviceIdLifetime:632448e5,bodyHidingEnabled:!0,sessionIdLifetime:186e4,visitorApiTimeout:2e3,authoringScriptUrl:"//cdn.tt.omtrdc.net/cdn/target-vec.js",overrideMboxEdgeServer:!1,selectorsPollingTimeout:5e3,defaultContentHiddenStyle:"visibility: hidden;",defaultContentVisibleStyle:"visibility: visible;",overrideMboxEdgeServerTimeout:186e4,supplementalDataIdParamTimeout:30}},hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP3cd5e7ba404242a9a9bb5d9f3652e593/"},"quantum-metric":{displayName:"Quantum Metric",modules:{"quantum-metric/src/lib/dataElements/replayLink.js":{name:"replay-link",displayName:"Replay Link",script:function(e,t,n,a){"use strict";e.exports=function(){var e="",t=a.getExtensionSettings().subscription;return e=window.QuantumMetricAPI?"https://"+t+".quantummetric.com/#/users/search?autoreplay=true&qmsessioncookie="+window.QuantumMetricAPI.getSessionID():e}}},"quantum-metric/src/lib/actions/startCapture.js":{name:"start-capture",displayName:"Start Capture",script:function(e,t,n,a){"use strict";e.exports=function(){var e=a.getExtensionSettings().subscription,t=document.createElement("script");t.type="text/javascript",t.async=1,t.src="https://cdn.quantummetric.com/qscripts/quantum-"+e+".js";e=document.getElementsByTagName("script")[0];window.QuantumMetricAPI||e.parentNode.insertBefore(t,e)}}}},settings:{subscription:"telegraph"},hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP0a28e88f5d8f4ecf88287846b9ed0eb0/"},"adobe-target-v2":{displayName:"Adobe Target v2",modules:{"adobe-target-v2/lib/loadTarget.js":{name:"load-target",displayName:"Load Target",script:function(e,t,n,a){"use strict";function r(e){var t;e&&(t=new s(function(n){function t(e){n(!1),clearTimeout(a),p(o,e,t)}var a=setTimeout(function(){n(!1)},g.targetSettings.timeout);d(o,"at-request-succeeded",function e(t){t.detail&&!0===t.detail.redirect?n(!0):n(!1),clearTimeout(a),p(o,t,e)}),d(o,"at-request-failed",t)}),e(function(e){return n=e,a=t,new s(function(t){n?a.then(function(e){e&&(n.abort=!0),t()}):t()});var n,a}))}var i=n("@adobe/reactor-window"),o=n("@adobe/reactor-document"),s=n("@adobe/reactor-promise"),c=n("./modules/load-target"),l=c.initLibrarySettings,u=c.overridePublicApi,c=n("./modules/event-util"),d=c.addEventListener,p=c.removeEventListener,c=n("./modules/optin"),f=c.shouldUseOptIn,m=c.isTargetApproved,g=n("./targetSettings").extensionSettings,v=a.getSharedModule("adobe-analytics","augment-tracker");e.exports=function(){var e=l();e&&e.enabled?((0,n("./modules/libs/at-launch").init)(i,o,e),f()&&!m()||r(v)):u(i)}}},"adobe-target-v2/lib/addParams.js":{name:"add-params",displayName:"Add Params to All Requests",script:function(e,t,n){"use strict";var a=n("./modules/params-store").mergeParams;e.exports=function(e){a(e.params)}}},"adobe-target-v2/lib/firePageLoad.js":{name:"fire-page-load",displayName:"Fire Page Load Request",script:function(e,t,n,a){"use strict";var r=n("@adobe/reactor-window"),i=n("./modules/libs/at-launch"),o=i.initConfig,s=i.initDelivery,c=n("./modules/page-load"),l=n("./messages");e.exports=function(e){e=c(e);r.adobe&&r.adobe.target&&r.adobe.target.VERSION?(o(e),s()):r.console&&a.logger.warn(l.NO_REQUEST)}}},"adobe-target-v2/lib/triggerView.js":{name:"trigger-view",displayName:"Trigger View",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window");e.exports=function(e){a.adobe&&a.adobe.target&&a.adobe.target.triggerView&&a.adobe.target.triggerView(e.viewName,e.page)}}},"adobe-target-v2/lib/modules/load-target.js":{script:function(e,t,n,a){"use strict";var r=n("@adobe/reactor-window"),i=n("@adobe/reactor-document"),o=n("@adobe/reactor-promise"),s=n("../messages"),c=n("./params-store"),l=c.getParams,u=c.getPageLoadParams,d=n("../targetSettings").targetSettings,p=n("./object-override"),f=n("../librarySettings").TARGET_DEFAULT_SETTINGS,m=["enabled","clientCode","imsOrgId","serverDomain","cookieDomain","timeout","defaultContentHiddenStyle","defaultContentVisibleStyle","bodyHiddenStyle","bodyHidingEnabled","selectorsPollingTimeout","visitorApiTimeout","overrideMboxEdgeServer","overrideMboxEdgeServerTimeout","optoutEnabled","optinEnabled","secureOnly","supplementalDataIdParamTimeout","authoringScriptUrl","urlSizeLimit","endpoint","pageLoadEnabled","viewsEnabled","analyticsLogging","serverState","globalMboxName"];e.exports={initLibrarySettings:function(){return r.adobe&&r.adobe.target&&void 0!==r.adobe.target.getOffer?(a.logger.warn(s.ALREADY_INITIALIZED),null):(d.mboxParams=l(),d.globalMboxParams=u(),p(d,r.targetGlobalSettings||{},m),p(d,f||{},["version"]),t=(e=i).compatMode,e=e.documentMode,t&&"CSS1Compat"===t&&(!e||9<=e)||(d.enabled=!1,a.logger.warn(s.DELIVERY_DISABLED)),d);var e,t},overridePublicApi:function(e){function t(){}function n(){return o.resolve()}e.adobe=e.adobe||{},e.adobe.target={VERSION:"",event:{},getOffer:t,getOffers:n,applyOffer:t,applyOffers:n,sendNotifications:t,trackEvent:t,triggerView:t,registerExtension:t,init:t},e.mboxCreate=t,e.mboxDefine=t,e.mboxUpdate=t}}}},"adobe-target-v2/lib/modules/event-util.js":{script:function(e){"use strict";e.exports={addEventListener:function(e,t,n){e.addEventListener(t,n)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)}}}},"adobe-target-v2/lib/modules/optin.js":{script:function(e,t,n){"use strict";function a(e){return"undefined"===(void 0===e?"undefined":o(e))||null===e}function r(e){var t=void 0===e?"undefined":o(e);return null!==e&&("object"===t||"function"===t)}function i(e,t){return!!t&&!a(e)&&!a(e[l])&&(r((e=e[l])[u])&&r(e[c]))}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n("@adobe/reactor-window").adobe,c="isApproved",l="optIn",u="fetchPermissions",d=n("../targetSettings").targetSettings;e.exports={shouldUseOptIn:function(){var e=d.optinEnabled;return i(s,e)},isTargetApproved:function(){var e,t=s[l];return e=t.Categories.TARGET,t[c](e)}}}},"adobe-target-v2/lib/targetSettings.js":{script:function(e,t,n,a){"use strict";var r=a.getExtensionSettings(),a=r.targetSettings||{};e.exports={extensionSettings:r,targetSettings:a}}},"adobe-target-v2/lib/modules/libs/at-launch.js":{script:function(e,t,n){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function s(e,t){return setTimeout(e,Number(1<arguments.length&&void 0!==t?t:0)||0)}function i(e){clearTimeout(e)}function g(e){return null==e}function r(e){return Xi.call(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=o(e);return null!=e&&("object"===t||"function"===t)}function l(e){return!!d(e)&&r(e)===Zi}function u(e){return e}function p(e){return l(e)?e:u}function b(e){return g(e)?[]:Object.keys(e)}function f(e,t){return g(t)?[]:(Ki(t)?no:ao)(p(e),t)}function m(e){return g(e)?[]:[].concat.apply([],e)}function v(i){for(var o=this,s=i?i.length:0,e=s;--e;)if(!l(i[e]))throw new TypeError("Expected a function");return function(){for(var e=0,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=s?i[e].apply(o,n):n[0];(e+=1)<s;)r=i[e].call(o,r);return r}}function y(e,t){g(t)||(Ki(t)?eo:to)(p(e),t)}function h(e){return null!=e&&"object"===o(e)}function k(e){return"string"==typeof e||!Ki(e)&&h(e)&&r(e)===ro}function T(e){if(!k(e))return-1;for(var t=0,n=e.length,a=0;a<n;a+=1)t=(t<<5)-t+e.charCodeAt(a)&4294967295;return t}function w(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=9007199254740991)&&!l(e);var t}function _(e){return g(e)?[]:w(e)?k(e)?e.split(""):function(e){for(var t=0,n=e.length,a=Array(n);t<n;)a[t]=e[t],t+=1;return a}(e):(t=b(e),n=e,io(function(e){return n[e]},t));var t,n}function C(e){if(null==e)return!0;if(w(e)&&(Ki(e)||k(e)||l(e.splice)))return!e.length;for(var t in e)if(oo.call(e,t))return!1;return!0}function S(e){return g(e)?"":so.call(e)}function M(e){return k(e)?!S(e):C(e)}function E(e){if(h(e)&&"[object Object]"===r(e)){e=Object.getPrototypeOf(Object(e));if(null===e)return 1;e=uo.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&lo.call(e)===po}}function P(e){return h(e)&&1===e.nodeType&&!E(e)}function D(e){return"number"==typeof e||h(e)&&"[object Number]"===r(e)}function L(e,t){return Ki(t)?t.join(e||""):""}function V(e,t){return g(t)?[]:(Ki(t)?io:ci)(p(e),t)}function I(){}function x(){return(new Date).getTime()}function j(e,t,n){return g(n)?t:(Ki(n)?li:ui)(p(e),t,n)}function A(e,t){return M(t)?[]:t.split(e||"")}function O(){var a=x();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n,t=(a+(n=16,(t=0)+Math.floor(Math.random()*(n-t+1))))%16|0;return a=Math.floor(a/16),("x"===e?t:3&t|8).toString(16)})}function R(e){if($c.test(e))return e;var t,e=null==(t=A(".",e))?t:mo.call(t),t=e.length;return 3<=t&&Yc.test(e[1])?e[2]+"."+e[1]+"."+e[0]:1===t?e[0]:e[1]+"."+e[0]}function N(e,t,n){var a,r,i="";e.location.protocol===zc||(i=R(e.location.hostname)),n[oc]=i,n[Ns]=(i=(i=t).compatMode)&&"CSS1Compat"===i&&(!(t=(t=t).documentMode)||10<=t),a=n,r=e[gc]||{},a[Ns]&&(g(r[Hs])||(a[kc]=r[Hs]),y(function(e){g(r[e])||(a[e]=r[e])},Jc))}function G(e){N(window,document,e);var t=window.location.protocol===zc;(Qc=zi({},e))[Qs]=e[Qs]/1e3,Qc[Js]=e[Js]/1e3,Qc[ic]=Qc[nc]||t?"https:":""}function F(e){try{return Kc(e)}catch(e){return{}}}function B(e){try{return Xc(e)}catch(e){return""}}function q(t){try{return decodeURIComponent(t)}catch(e){return t}}function U(t){try{return encodeURIComponent(t)}catch(e){return t}}function H(e){if(el[e])return el[e];Zc.href=e;var t=di(Zc.href);return t.queryKey=F(t.query),el[e]=t,el[e]}function W(e,t,n){return{name:e,value:t,expires:n}}function z(e){e=A("#",e);return C(e)||e.length<3||isNaN(parseInt(e[2],10))?null:W(q(e[0]),q(e[1]),Number(e[2]))}function $(){var e,e=V(z,M(e=tl("mbox"))?[]:A("|",e)),t=Math.ceil(x()/1e3);return j(function(e,t){return e[t.name]=t,e},{},f(function(e){return d(e)&&t<=e.expires},e))}function Y(e){e=$()[e];return d(e)?e.value:""}function Q(e){return L("#",[U(e.name),U(e.value),e.expires])}function J(e){return e.expires}function K(e,t){var n=_(e),e=Math.abs(1e3*(e=V(J,e=n),Math.max.apply(null,e))-x()),n=L("|",V(Q,n)),e=new Date(x()+e);nl("mbox",n,{domain:t,expires:e})}function X(e){var t=e.name,n=e.value,a=e.expires,r=e.domain,e=$();e[t]=W(t,n,Math.ceil(a+x()/1e3)),K(e,r)}function Z(e,t,n){return fo(tl(n))||(a=n,e=F((e=e).location.search),fo(e[a]))||(n=n,!g(t=H((t=t).referrer).queryKey)&&fo(t[n]));var a}function ee(){return Qc[Ns]&&(e=Qc[oc],nl(Wo,zo,{domain:e}),e=tl(Wo)===zo,al(Wo),e)&&!Z(window,document,Uo);var e}function te(){return Z(window,document,qo)}function ne(){return Z(window,document,Ho)}function ae(e,t){e=e.console;return!g(e)&&l(e[t])}function re(){for(var e,t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];e=window,t=r,n=e.console,ae(e,"warn")&&n.warn.apply(n,[rl].concat(t))}function ie(){for(var e,t,n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];e=window,t=r,n=e.console,ae(e,"debug")&&te()&&n.debug.apply(n,[rl].concat(t))}function oe(e,t,n){var a,r,i=e[mc]||[];e[mc]=i,n&&(a=i.push,i[Ws]=il,i[dc]=(r=t,j(function(e,t){return e[t]=r[t],e},{},Jc)),i[pc]=[],i[fc]=[],i.push=function(e){i[fc].push(zi({timestamp:x()},e)),a.call(this,e)})}function se(e,t,n,a){t===fc&&e[mc].push(n),a&&t!==fc&&e[mc][t].push(zi({timestamp:x()},n))}function ce(e){se(window,pc,e,te())}function le(){return l(sl)}function ue(e){return new sl(e)}function de(){var t=document.createTextNode(""),n=[];return ue(function(){for(var e=n.length,t=0;t<e;t+=1)n[t]();n.splice(0,e)}).observe(t,{characterData:!0}),function(e){n.push(e),t.textContent=0<t.textContent.length?"":"a"}}function pe(e){return new Qi(e)}function fe(e){return Qi.resolve(e)}function me(e){return Qi.reject(e)}function ge(e){return Ki(e)?Qi.all(e):me(new TypeError(cl))}function ve(e,n,a){var r=-1;return e=[e,pe(function(e,t){r=s(function(){return t(new Error(a))},n)})],(Ki(e)?Qi.race(e):me(new TypeError(cl))).then(function(e){return i(r),e},function(e){throw i(r),e})}function he(e){if(g(e[Vc]))return!1;e=e[Vc];if(g(e[Ic]))return!1;e=e[Ic];return l(e[jc])&&l(e[xc])}function be(e,t){if(!he(e))return!0;var n=e[Vc][Ic],t=(e[Vc][Ic][Ac]||{})[t];return n[xc](t)}function ye(){var e,t=Qc[Rc];return e=window,!!t&&he(e)}function ke(){return be(window,Oc)}function Te(){return function(e,t){if(!he(e))return fe(!0);var n=e[Vc][Ic],a=(e[Vc][Ic][Ac]||{})[t];return pe(function(e,t){n[jc](function(){n[xc](a)?e(!0):t(Nc)},!0)})}(window,Oc)}function we(e,t){X({name:uc,value:e,expires:t[Js],domain:t[oc]})}function _e(){if(ye()&&!ke())return Pl;var e=Qc,t=F(window.location.search).mboxSession;return fo(t)?we(t,e):M(Y(uc))&&we(Pl,e),Y(uc)}function Ce(){return Y("PC")}function Se(e){var t,n,a=Qc;a[Zs]&&(t=a[oc],n=new Date(x()+a[ec]),a=tl(lc),n={domain:t,expires:n},fo(a)?nl(lc,a,n):(e=M(e=e)||C(e=Dl.exec(e))||2!==e.length?"":e[1],M(e)||nl(lc,e,n)))}function Me(e,t,n,a){a=new e.CustomEvent(n,{detail:a});t.dispatchEvent(a)}function Ee(e,t){var n,a=t.mbox,r=t.error,i=t.url,o=t.analyticsDetails,s=t.responseTokens,c=t.execution,n={type:e,tracking:(n=Ce,e=(t=_e)(),t=n(),(n={}).sessionId=e,fo(t)&&(n.deviceId=t),n)};return g(a)||(n.mbox=a),g(r)||(n.error=r),g(i)||(n.url=i),C(o)||(n.analyticsDetails=o),C(s)||(n.responseTokens=s),C(c)||(n.execution=c),n}function Pe(e){e=Ee(Yl,e);Me(window,document,Yl,e)}function De(e,t){e=Ee(Ql,e);e.redirect=t,Me(window,document,Ql,e)}function Le(e){e=Ee(Jl,e);Me(window,document,Jl,e)}function Ve(e){e=Ee(Kl,e);Me(window,document,Kl,e)}function Ie(e){e=Ee(Xl,e);Me(window,document,Xl,e)}function xe(e){e=Ee(Zl,e);Me(window,document,Zl,e)}function je(e){e=Ee(eu,e);Me(window,document,eu,e)}function Ae(e){e=Ee(tu,e);Me(window,document,tu,e)}function Oe(e){var t=e.charAt(0),n=e.charAt(1),a=e.charAt(2),e={key:e};return e.val="-"===n?""+t+n+"\\3"+a+" ":t+"\\3"+n+" ",e}function Re(e){if(P(e))return ol(e);if(!k(e))return ol(e);var t,e=C(e=(t=e).match(ru))?t:j(function(e,t){return e.replace(t.key,t.val)},t,V(Oe,e));if(-1===e.indexOf(nu))return ol(e);e=function(e){for(var t,n,a,r,i=[],o=S(e),s=o.indexOf(nu);-1!==s;)t=S(o.substring(0,s)),r=(n=S(o.substring(s))).indexOf(")"),a=S(n.substring(au,r)),s=(o=S(n.substring(r+1))).indexOf(nu),t&&a&&i.push({sel:t,eq:Number(a)});return o&&i.push({sel:o}),i}(e);return j(function(e,t){var n=t.sel,t=t.eq;return e=e.find(n),e=D(t)?e.eq(t):e},ol(document),e)}function Ne(e){return 0<Re(e).length}function Ge(e){return ol("<div/>").append(e)}function Fe(e){return Re(e).parent()}function Be(e,t){return Re(t).find(e)}function qe(){var e;ne()&&(window[su]=window[su]||{},window[su].querySelectorAll=Re,e=Qc[rc],ie(ou),Ji(e).then(function(){document.addEventListener(Ko,function(e){l(window[su][cu])&&window[su][cu](e)},!0)}).catch(function(){return re(iu)}))}function Ue(e){e=parseInt(e,10);return isNaN(e)?null:e}function He(e){return A("_",e)}function We(e){var t=A("_",e),n=Ue(t[0]);if(g(n))return null;e={};e.activityIndex=n;t=Ue(t[1]);return g(t)||(e.experienceIndex=t),e}function ze(e){return f(Vl,V(We,e))}function $e(e){var t=F(e),n=t[uu];if(M(n))return null;e={};e.token=n;n=t[pu];fo(n)&&n===zo&&(e.listedActivitiesOnly=!0);n=t[fu];fo(n)&&(e.evaluateAsTrueAudienceIds=He(n));n=t[mu];fo(n)&&(e.evaluateAsFalseAudienceIds=He(n));t=t[du];return C(t)||(e.previewIndexes=Ki(t=t)?ze(t):ze([t])),e}function Ye(e){return Re(e).empty().remove()}function Qe(e,t){return Re(t).after(e)}function Je(e,t){return Re(t).before(e)}function Ke(e,t){return Re(t).append(e)}function Xe(e){return Re(e).html()}function Ze(e,t){return'<style id="'+e+'" class="at-flicker-control">'+t+"</"+Zo+">"}function et(e,t){var n;C(t)||(C(t=f(function(e){return!Ne("#at-"+T(e))},t))||(n=e[zs],Ke(L("\n",V(function(e){return t=n,Ze(gu+T(e=e),e+" {"+t+"}");var t},t)),Xo)))}function tt(e,t){C(t)||Ne("#"+bu)||Ke((e=e[zs],t=L(", ",t),Ze(bu,t+" {"+e+"}")),Xo)}function nt(){var e;!0!==(e=Qc)[Ys]||Ne(hu)||(e=e[$s],Ke(Ze(vu,e),Xo))}function at(){!0===Qc[Ys]&&Ne(hu)&&Ye(hu)}function rt(e){return!g(e.id)}function it(e){return!g(e[Tc])}function ot(e){return rt(e)||it(e)}function st(e,r){return j(function(e,t,n){var a={};return a.integrationCode=n,rt(t)&&(a.id=t.id),it(t)&&(a.authenticatedState=function(e){switch(e){case 0:return"unknown";case 1:return"authenticated";case 2:return"logged_out";default:return"unknown"}}(t[Tc])),a[go]=r,t[wc]&&(a[wc]=!0),e.push(a),e},[],f(ot,e))}function ct(e){if(g(e))return[];if(!l(e[Cu]))return[];e=e[Cu](!0);return d(e)?function(e){if(!e.nameSpaces&&!e.dataSources)return st(e,"DS");var t=[];return e.nameSpaces&&t.push.apply(t,st(e.nameSpaces,"NS")),e.dataSources&&t.push.apply(t,st(e.dataSources,"DS")),t}(e):[]}function lt(e){return ie("Visitor API requests error",e),{}}function ut(e,t,n){return g(e)?fe({}):ve(function(e,t){if(!l(e.getVisitorValues))return fe({});var n=[Tu,yu,ku];return t&&n.push(wu),pe(function(t){e.getVisitorValues(function(e){return t(e)},n)})}(e,n),t,"Visitor API requests timed out").catch(lt)}function dt(e,t){return g(e)?{}:function(e,t){if(!l(e.getVisitorValues))return{};var n=[Tu,yu,ku];t&&n.push(wu);var a={};return e.getVisitorValues(function(e){return zi(a,e)},n),a}(e,t)}function pt(){var e=Qc,t=e[Fs],n=e[ac];return e=window,n=n,!M(t=t)&&!g(e[Eu])&&l(e[Eu][Pu])&&d(n=e[Eu][Pu](t,{sdidParamExpiry:n}))&&l(n[Du])&&n[Du]()?n:null}function ft(e){return t=pt(),e=e,!g(t)&&l(t[_u])?t[_u](e):null;var t}function mt(e){return t=pt(),e=e,g(t)||g(e=t[e])?null:e;var t}function gt(e,t){Lu[e]=t}function vt(e){return Lu[e]}function ht(e){var t=e[Ds];if(!k(t)||C(t))return!1;t=e[Ws];if(!k(t)||C(t))return!1;t=e[qs];return!(!g(t)&&!D(t)||!l(e[As]))}function bt(e,t,n,a,r,i){var o={};o[e]=t,o[n]=a,o[r]=i;i={};return i[vc]=o,i}function yt(e){var t,n=e[Ds],a=e[Ws],r=e[qs]||2e3;return ve((t=e[As],pe(function(n,a){t(function(e,t){g(e)?n(t):a(e)})})),r,"timed out").then(function(e){var t=bt(Ds,n,Ws,a,Vs,e);return ie(Vu,Cs,t),ce(t),e}).catch(function(e){e=bt(Ds,n,Ws,a,ks,e);return ie(Vu,ks,e),ce(e),{}})}function kt(e){e=j(function(e,t){return zi(e,t)},{},e);return gt(hc,e),e}function Tt(e){return function(e){if(!g(e=e[gc])){e=e[hc];return Ki(e)&&!C(e)}}(e)?ge(V(yt,f(ht,e[gc][hc]))).then(kt):fe({})}function wt(){return g(e=vt(hc))?{}:e;var e}function _t(){var e,t=M(e=F((e=window).location.search).authorization)?null:e,e=M(e=tl("mboxDebugTools"))?null:e;return t||e}function Ct(e){return!C(e)&&2===e.length&&fo(e[0])}function St(e,n,a,r){y(function(e,t){d(e)?(n.push(t),St(e,n,a,r),n.pop()):C(n)?a[r(t)]=e:a[r(L(".",n.concat(t)))]=e},e)}function Mt(e){return j(function(e,t){return e[q(S(t[0]))]=q(S(t[1])),e},{},f(Ct,j(function(e,t){return e.push(-1===(t=(n=t).indexOf("="))?[]:[n.substr(0,t),n.substr(t+1)]),e;var n},[],f(fo,e))))}function Et(e){if(!l(e))return{};var t,n=null;try{n=e()}catch(e){return{}}return g(n)?{}:Ki(n)?Mt(n):k(n)&&fo(n)?f(function(e,t){return fo(t)},F(n)):d(n)?(e=n,n={},g(t)?St(e,[],n,u):St(e,[],n,t),n):{}}function Pt(e){return zi({},e,Et(window.targetPageParamsAll))}function Dt(e){var t=Qc,n=t[Us],a=t[sc],t=t[cc];return n!==e?Pt(a||{}):zi(Pt(a||{}),zi({},t||{},Et(window.targetPageParams)))}function Lt(e){return-1!==e.indexOf(xu)}function Vt(e){return Lt(e)||e===ju||e===Au||e===Ou||e===Ru||e===Nu||e===Gu||e===Fu}function It(e){return j(function(e,t,n){if(!Lt(n))return e;n=n.substring(xu.length);return M(n)||(e[n]=g(t)?"":t),e},{},e)}function xt(e){var c=e.url,l=e.headers,u=e.body,d=e.timeout,p=e.async;return pe(function(e,t){var n,a,r,i,o,s=new window.XMLHttpRequest;i=e,o=t,(r=s).onload=function(){var e,t=1223===r.status?204:r.status;if(t<100||599<t)o(new Error(Bu));else{try{e=JSON.parse(r.responseText)}catch(e){return void o(new Error("Malformed response JSON"))}var n=r.getAllResponseHeaders();i({status:t,headers:n,response:e})}},e=s=r,a=t,e.onerror=function(){a(new Error(Bu))},(s=e).open("POST",c,p),s.withCredentials=!0,s=function(n,e){return y(function(e,t){Ki(e)&&y(function(e){n.setRequestHeader(t,e)},e)},1<arguments.length&&void 0!==e?e:{}),n}(s,l),p&&(n=t,(t=s).timeout=d,t.ontimeout=function(){n(new Error("Request timed out"))},s=t),s.send(JSON.stringify(u))}).then(function(e){var t=e.response,n=t.status,e=t.message;if(!g(n)&&!g(e))throw new Error(e);return t})}function jt(e){if(e[wu])throw new Error("Disabled due to optout");return e}function At(){var e,t=ut(pt(),(e=Qc)[Xs],e[tc]),e=Tt(window);return ge([t.then(jt),e])}function Ot(){return[dt(pt(),Qc[tc]),wt()]}function Rt(){var e,t,n,a=window.screen;return{width:a.width,height:a.height,orientation:(e=(n=window.screen).orientation,t=n.width,n=n.height,g(e)?n<t?"landscape":"portrait":g(e.type)||C(e=A("-",e.type))||g(e=e[0])?null:e),colorDepth:a.colorDepth,pixelRatio:function(){if(!g(e=window.devicePixelRatio))return e;var e=1,t=(n=window.screen).systemXDPI,n=n.logicalXDPI;return e=!g(t)&&!g(n)&&n<t?t/n:e}()}}function Nt(){return{host:window.location.hostname,webGLRenderer:Iu}}function Gt(e){if(!g(e)&&"web"===e.channel)return e;var t=(e||{}).beacon;return{userAgent:window.navigator.userAgent,timeOffsetInMinutes:-(new Date).getTimezoneOffset(),channel:"web",screen:Rt(),window:{width:(e=document.documentElement).clientWidth,height:e.clientHeight},browser:Nt(),address:{url:window.location.href,referringUrl:document.referrer},beacon:t}}function Ft(e){var t=e.id,n=e.integrationCode,a=e.authenticatedState,r=e.type,i=e.primary,e={};return fo(t)&&(e.id=t),fo(n)&&(e.integrationCode=n),fo(a)&&(e.authenticatedState=a),fo(r)&&(e.type=r),i&&(e.primary=i),e}function Bt(e,t,n,a,r){var i={};fo(t)&&(i.tntId=t),fo(n)&&(i.thirdPartyId=n),fo(e.thirdPartyId)&&(i.thirdPartyId=e.thirdPartyId);a=a[Tu];return fo(a)&&(i.marketingCloudVisitorId=a),fo(e.marketingCloudVisitorId)&&(i.marketingCloudVisitorId=e.marketingCloudVisitorId),C(e.customerIds)?C(r)||(i.customerIds=V(Ft,r)):i.customerIds=e.customerIds,i}function qt(e,t){var n={},t=function(e,t){if(!g(e))return e;var n={};return C(t)||(e=t[ku],e=parseInt(e,10),isNaN(e)||(n.locationHint=e),t=t[yu],fo(t)&&(n.blob=t)),n}(e.audienceManager,t);return C(t)||(n.audienceManager=t),C(e.analytics)||(n.analytics=e.analytics),n}function Ut(e,t){if(!g(e)&&fo(e.token))return e;e={},t=t[Au];return fo(t)&&(e.token=t),e}function Ht(e){return g(e)?function(){var e=tl(lu);if(M(e))return{};try{return JSON.parse(e)}catch(e){return{}}}():e}function Wt(e){var t={},n=e[Ou];g(n)||(t.id=n);n=e[Ru],n=parseFloat(n);isNaN(n)||(t.total=n);e=V(S,A(",",(e=e)[Nu])),e=f(fo,e);return C(e)||(t.purchasedProductIds=e),t}function zt(e){var t={},n=e[Gu];g(n)||(t.id=n);e=e[Fu];return g(e)||(t.categoryId=e),t}function $t(e,t){var n={},a=zi({},j(function(e,t,n){return Vt(n)||(e[n]=g(t)?"":t),e},{},t),e.parameters||{}),r=zi({},It(t),e.profileParameters||{}),i=zi({},Wt(t),e.order||{}),e=zi({},zt(t),e.product||{});return C(a)||(n.parameters=a),C(r)||(n.profileParameters=r),C(i)||(n.order=i),C(e)||(n.product=e),n}function Yt(e,t,n){var a=Qc[Us],r=e.index,i=e.name,o=e.address,n=$t(e,zi({},i===a?t:2<arguments.length&&void 0!==n?n:{},Dt(i)));return g(r)||(n.index=r),fo(i)&&(n.name=i),C(o)||(n.address=o),n}function Qt(e,r,t){var n=e.prefetch,a=void 0===n?{}:n,e={};if(C(a))return e;n=a.mboxes;g(n)||!Ki(n)||C(n)||(e.mboxes=V(function(e){return Yt(e,r,t)},n));a=a.views;return g(a)||!Ki(a)||C(a)||(e.views=V(function(e){return t=r,n=e.name,a=e.address,t=$t(e,t),fo(n)&&(t.name=n),C(a)||(t.address=a),t;var t,n,a},a)),e}function Jt(e,t){if(ye()&&!be(window,"ANALYTICS"))return null;var n=Qc,a=ft(e),r=mt(Su),i=mt(Mu),o=t.experienceCloud,s=(void 0===o?{}:o).analytics,c=void 0===s?{}:s,e=c.logging,t=c.supplementalDataId,o=c.trackingServer,s=c.trackingServerSecure,c={};return g(e)?c.logging=n[Gc]:c.logging=e,g(t)||(c.supplementalDataId=t),fo(a)&&(c.supplementalDataId=a),g(o)||(c.trackingServer=o),fo(r)&&(c.trackingServer=r),g(s)||(c.trackingServerSecure=s),fo(i)&&(c.trackingServerSecure=i),C(c)?null:c}function Kt(e,t,n){var a,r,i,o=(i=Qc[Us],zi({},n,Dt(i))),s=Ce(),c=o[ju],l=ct(pt()),u=Bt(e.id||{},s,c,t,l),d=Ut(e.property,o),p=qt(e.experienceCloud||{},t),i=function(e){if(!g(e)&&fo(e.authorizationToken))return e;var t={},e=_t();return fo(e)&&(t.authorizationToken=e),t}(e.trace),s=Ht(e.qaMode),t=(a=o,r=n,l=(c=e).execute,c={},C(t=void 0===l?{}:l)||(g(l=t.pageLoad)||(c.pageLoad=$t(l,a)),g(t=t.mboxes)||!Ki(t)||C(t)||(C(t=f(Il,V(function(e){return Yt(e,a,r)},t)))||(c.mboxes=t))),c),c=Qt(e,o,n),o=e.notifications,n={};return n.requestId=O(),n.context=Gt(e.context),C(u)||(n.id=u),C(d)||(n.property=d),C(i)||(n.trace=i),C(p)||(n.experienceCloud=p),C(s)||(n.qaMode=s),C(t)||(n.execute=t),C(c)||(n.prefetch=c),C(o)||(n.notifications=o),n}function Xt(e,t,n){var a=n[0],n=n[1];return Kt(e,a,zi({},n,t))}function Zt(t,n){return At().then(function(e){return Xt(t,n,e)})}function en(e,t){return!D(t)||t<0?e[qs]:t}function tn(e){var t=e[Bs];if(!e[Zs])return t;e=function(){if(!Qc[Zs])return"";var e=tl(lc);return M(e)?"":e}();return M(e)?t:"mboxedge"+e+".tt.omtrdc.net"}function nn(e){return e[ic]+"//"+tn(e)+e[bc]+"?"+B({client:e[Gs],sessionId:_e(),version:e[Ws]})}function an(t,e){var n=Qc,a=nn(n),r=c({},Sc,[Mc]),e=en(n,e),e={url:a,headers:r,body:t,timeout:e,async:!0};return ie(js,t),ce({request:t}),xt(e).then(function(e){return ie(xs,e),ce({response:e}),{request:t,response:e}})}function rn(e,t){return{status:Cs,type:e,data:t}}function on(e,t){return{status:ks,type:e,data:t}}function sn(e){return d(e)}function cn(e){return!!sn(e)&&fo(e.eventToken)}function ln(e){return!C(e)&&!M(e.type)&&fo(e.eventToken)}function un(e){return!!ln(e)&&fo(e.selector)}function dn(e){e=e.id;return d(e)&&fo(e.tntId)}function pn(e){var t=e.response;return dn(t)&&X({name:"PC",value:t.id.tntId,expires:(t=Qc)[Qs],domain:t[oc]}),e}function fn(e){var t=e.response;return dn(t)&&Se(t.id.tntId),Se(null),e}function mn(e){e=(0<arguments.length&&void 0!==e?e:{}).trace;C(e)||se(window,fc,e,te())}function gn(e){var t=e.response,n=t.execute,a=void 0===n?{}:n,r=t.prefetch,n=void 0===r?{}:r,t=a.pageLoad,r=a.mboxes,a=void 0===r?[]:r,r=n.mboxes,r=void 0===r?[]:r,n=n.views,n=void 0===n?[]:n;return mn(void 0===t?{}:t),y(mn,a),y(mn,r),y(mn,n),e}function vn(e){var t=e.queryKey,n=t[ed];if(!k(n))return t;if(M(n))return t;e=Math.round(x()/1e3);return t[ed]=n.replace(/\|TS=\d+/,"|TS="+e),t}function hn(e){return e.queryKey}function bn(e,t,n){var a=H(e),r=a.protocol,i=a.host,o=a.path,s=""===a.port?"":":"+a.port,e=M(a.anchor)?"":"#"+a.anchor,a=n(a),t=B(zi({},a,t));return r+"://"+i+s+o+(M(t)?"":"?"+t)+e}function yn(e,t){return bn(e,t,vn)}function kn(e){var t=e[nd]||"GET",n=e.url||function(e){throw new Error(e)}("URL is required"),a=e[ad]||{},r=e[rd]||null,i=e[id]||!1,o=e[od]||3e3,s=!!g(e[sd])||!0===e[sd],e={};return e[nd]=t,e.url=n,e[ad]=a,e[rd]=r,e[id]=i,e[od]=o,e[sd]=s,e}function Tn(u,e){var e=kn(e),d=e[nd],p=e.url,f=e[ad],m=e[rd],g=e[id],v=e[od],h=e[sd];return pe(function(e,t){var n,a,r,i,o,s,c,l=new u.XMLHttpRequest;s=e,c=t,(o=l).onload=function(){var e,t,n=1223===o.status?204:o.status;n<100||599<n?c(new Error(td)):(e=o.responseText,t=o.getAllResponseHeaders(),s({status:n,headers:t,response:e}))},r=l=o,i=t,r.onerror=function(){i(new Error(td))},(l=r).open(d,p,h),e=l,!0===(r=g)&&(e.withCredentials=r),a=l=e,y(function(e,t){y(function(e){return a.setRequestHeader(t,e)},e)},f),l=a,h&&(n=t,(t=l).timeout=v,t.ontimeout=function(){n(new Error("Request timed out"))},l=t),l.send(m)})}function wn(e){return Tn(window,e)}function _n(e,t,n){var a={method:"GET"};return a.url=bn(e,t,hn),a[od]=n,a}function Cn(e){if(!(200<=(t=e.status)&&t<300||304===t))return null;var t=e.response;if(M(t))return null;e={};return e.type=Qo,e.content=t,e}function Sn(e){var t=e[vo],n=M(a=(a=e)[ho])||C(a=cd.exec(a))||2!==a.length?"":a[1];if(M(n)||M(t))return e;var a=e[ho];return e[ho]=a.replace(ld,""),e[vo]=(a=n,n=t,(t=document.createElement("div")).innerHTML=n,g(t=t.firstElementChild)?n:(t.id=a,t.outerHTML)),e}function Mn(e){return!g(e.selector)}function En(e){var t,n,a,r,i,o,s,c,l,u=e[go];if(M(u))return null;switch(u){case yo:return Mn(l=e)?k((l=Sn(l))[vo])?l:(ie(gs,l),null):null;case To:return Mn(c=e)?k((c=Sn(c))[vo])?c:(ie(gs,c),null):null;case Oo:return Mn(c=e)?k((c=Sn(c))[vo])?c:(ie(gs,c),null):null;case No:return Mn(s=e)?k((s=Sn(s))[vo])?s:(ie(gs,s),null):null;case Fo:return Mn(s=e)?k((s=Sn(s))[vo])?s:(ie(gs,s),null):null;case jo:return Mn(o=e)?k((o=Sn(o))[vo])?o:(ie(gs,o),null):null;case Ao:return Mn(o=e)?k((o=Sn(o))[vo])?o:(ie(gs,o),null):null;case Lo:return Mn(i=e)?k(i[vo])?i:(ie(gs,i),null):null;case _o:return Mn(i=e)?d(i[vo])?i:(ie("Action has no attributes",i),null):null;case Co:return Mn(r=e)?k(r[vo])?r:(ie("Action has no image url",r),null):null;case So:return Mn(r=e)?d(r[vo])?r:(ie("Action has no CSS properties",r),null):null;case Eo:return Mn(a=e)?d(a[vo])?a:(ie("Action has no height or width",a),null):null;case Po:return Mn(a=e)?d(a[vo])?a:(ie("Action has no left, top or position",a),null):null;case Do:return Mn(n=e)?n:null;case Mo:return Mn(t=e)?d(t[vo])?t:(ie("Action has no from or to",t),null):null;case Vo:return M(t=(n=e).content)?(ie(vs,n),null):(n.content=yn(t,{}),n);default:return null}}function Pn(e){e=(0<arguments.length&&void 0!==e?e:{}).options;return!Ki(e)||C(e)?[]:Wu(V(Qu,e))}function Dn(e){var t=(0<arguments.length&&void 0!==e?e:{}).execute,e=void 0===t?{}:t,t=e.pageLoad,e=e.mboxes,e=void 0===e?[]:e,t=m([$u(void 0===t?{}:t)||[],m(Wu(V($u,e)))]),e=m(V(Yu,f(xl,t))),t=f(jl,t),e=f(jl,e),t=t.concat(e),e={};if(C(t))return e;t=t[0].content;return M(t)||(e.url=t),e}function Ln(e){e=(0<arguments.length&&void 0!==e?e:{}).analytics;return C(e)?[]:[e]}function Vn(e,t){e.parameters=t.parameters,e.profileParameters=t.profileParameters,e.order=t.order,e.product=t.product}function In(e,t){var n=t[0],a=t[1],r=!C(n),t=!C(a);return(r||t)&&(r&&(e.options=n),t&&(e.metrics=a)),e}function xn(e){switch(e.type){case Vo:return fe(M(n=(t=e).content)?(ie(vs,t),null):((t=zi({},t)).content=yn(n,{}),t));case"dynamic":return wn(_n(e.content,{},Qc[od])).then(Cn).catch(function(){return null});case Is:return fe((t=(n=e)[vo],!Ki(t)||C(t)||C(t=f(Gl,V(En,t)))?null:((n=zi({},n)).content=t,n)));default:return fe(e)}var t,n}function jn(e,t){if(!Ki(e))return fe([]);if(C(e))return fe([]);e=f(t,e);return C(e)?fe([]):ge(V(xn,e)).then(Wu)}function An(e,t){return!Ki(e)||C(e)?fe([]):fe(f(t,e))}function On(e){var t=e.name,n=e.analytics,a=e.options,e=e.metrics,r={name:t,analytics:n};return ge([jn(a,sn),An(e,ln)]).then(function(e){return In(r,e)})}function Rn(e,n,a){e=e.prefetch,e=(void 0===e?{}:e).mboxes,e=void 0===e?[]:e;return C(e)?null:(e=f(function(e){return t=a,(e=e).index===n&&e.name===t;var t},e))&&e.length?e[0]:void 0}function Nn(e){var c=e.request,e=e.response.prefetch;if(!d(e))return fe([]);e=e.mboxes;if(!Ki(e)||C(e))return fe([]);return ge(V(function(e){return n=(t=e).index,a=e.name,r=e.state,i=e.analytics,o=e.options,t=e.metrics,n=Rn(c,n,a),s={name:a,state:r,analytics:i},g(n)||Vn(s,n),ge([jn(o,cn),An(t,ln)]).then(function(e){return In(s,e)});var t,n,a,r,i,o,s},f(Ol,e))).then(Wu)}function Gn(e,t){var n=t.name,a=t.state,r=t.analytics,i=t.options,t=t.metrics,e=C(e=void 0===(e=(void 0===(e=(e=e).prefetch)?{}:e).views)?[]:e)?null:e[0],o={name:n.toLowerCase(),state:a,analytics:r};return g(e)||Vn(o,e),ge([jn(i,cn),An(t,un)]).then(function(e){return In(o,e)})}function Fn(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],o={},e={};d(t)&&(e.pageLoad=t),C(n)||(e.mboxes=n);n={};return C(a)||(n.mboxes=a),C(r)||(n.views=r),C(i)||(n.metrics=i),C(e)||(o.execute=e),C(n)||(o.prefetch=n),o}function Bn(e){var t,n=v([gn,pn,fn])(e);return ge([function(e){if(!d(t=e.response.execute))return fe(null);if(!d(n=t.pageLoad))return fe(null);var e=n.analytics,t=n.options,n=n.metrics,a={analytics:e};return ge([jn(t,sn),An(n,un)]).then(function(e){return In(a,e)})}(n),d(e=(e=n).response.execute)?(e=e.mboxes,!Ki(e)||C(e)?fe([]):ge(V(On,f(Al,e))).then(Wu)):fe([]),Nn(n),(t=(e=n).request,d(e=e.response.prefetch)?(e=e.views,!Ki(e)||C(e)?fe([]):ge(V(function(e){return Gn(t,e)},f(Rl,e))).then(Wu)):fe([])),d(n=(n=n).response.prefetch)?An(n.metrics,un):fe([])]).then(Fn)}function qn(e){return!C(Dn(e))}function Un(e){var t=function(e){var t=void 0===(n=(a=0<arguments.length&&void 0!==e?e:{}).execute)?{}:n,e=a.prefetch,n=void 0===e?{}:e,a=t.pageLoad,e=t.mboxes,t=void 0===e?[]:e,e=n.mboxes,e=void 0===e?[]:e,n=void 0===(n=n.views)?[]:n;return m([Pn(void 0===a?{}:a),m(V(Pn,t)),m(V(Pn,e)),m(V(Pn,n))])}(e),e={};return C(t)||(e.responseTokens=t),e}function Hn(e){var t=Un(e),n=function(e){var t=void 0===(n=(a=0<arguments.length&&void 0!==e?e:{}).execute)?{}:n,e=a.prefetch,n=void 0===e?{}:e,a=t.pageLoad,e=t.mboxes,t=void 0===e?[]:e,e=n.mboxes,e=void 0===e?[]:e,n=void 0===(n=n.views)?[]:n;return m([Ln(void 0===a?{}:a),m(V(Ln,t)),m(V(Ln,e)),m(V(Ln,n))])}(e);return C(n)||(t.analyticsDetails=n),ie(fs,e),De(t,qn(e)),fe(e)}function Wn(e){var t=Qc[Us],a=e.mbox,n=e.timeout,r=d(e.params)?e.params:{},i={},e={};a===t?e.pageLoad={}:e.mboxes=[{index:0,name:a}],i.execute=e;t=Jt(a,i);return C(t)||((e={}).analytics=t,i.experienceCloud=e),Pe({mbox:a}),Zt(i,r).then(function(e){return an(e,n)}).then(Bn).then(function(e){return t=a,(e=Un(n=e)).mbox=t,ie(fs,n),De(e,qn(n)),fe(n);var t,n}).catch(function(e){return t=a,re(ps,e=e),Le({mbox:t,error:e}),me(e);var t})}function zn(e){var t=Qc[Us],n=e.consumerId,a=e.request,r=e.timeout,e=Jt(void 0===n?t:n,a),t=Hn;return C(e)||((n=a.experienceCloud||{}).analytics=e,a.experienceCloud=n),Pe({}),Zt(a,{}).then(function(e){return an(e,r)}).then(Bn).then(t).catch(function(e){return re(ps,e=e),Le({error:e}),me(e)})}function $n(e,t){return Re(t).addClass(e)}function Yn(e,t){return Re(t).css(e)}function Qn(e,t){return Re(t).attr(e)}function Jn(e,t,n){return Re(n).attr(e,t)}function Kn(e,t){return Re(t).removeAttr(e)}function Xn(e,t,n){var a=Qn(e,n);fo(a)&&(Kn(e,n),Jn(t,a,n))}function Zn(e){return new Error("Could not find: "+e)}function ea(a,t,r){return pe(function(n,e){(function e(){var t=r(a);C(t)?window.requestAnimationFrame(e):n(t)})(),s(function(){e(Zn(a))},t)})}function ta(a,t,r){return pe(function(n,e){(function e(){var t=r(a);C(t)?s(e,100):n(t)})(),s(function(){e(Zn(a))},t)})}function na(e,t,n){var a,r,i,o=1<arguments.length&&void 0!==t?t:Qc[Ks],t=2<arguments.length&&void 0!==n?n:Re,n=t(e);return C(n)?le()?(a=e,r=o,i=t,pe(function(t,e){var n=ue(function(){var e=i(a);C(e)||(n.disconnect(),t(e))});s(function(){n.disconnect(),e(Zn(a))},r),n.observe(document,{childList:!0,subtree:!0})})):("visible"===document.visibilityState?ea:ta)(e,o,t):fe(n)}function aa(e){return Qn($o,e)}function ra(e){return fo(Qn($o,e))}function ia(e){return y(function(e){return Xn(Jo,$o,e)},_(Be(es,e))),e}function oa(e){return y(function(e){return Xn($o,Jo,e)},_(Be(es,e))),e}function sa(e){return ie("Loading image",e),Qn(Jo,Jn(Jo,e,ol("<img/>")))}function ca(e){var t=f(ra,_(Be(es,e)));return C(t)||y(sa,V(aa,t)),e}function la(e){e=Qn(Jo,e);return fo(e)?e:null}function ua(e,t){return re(ds,t),ce({action:e,error:t}),e}function da(e,t){var n,a,r=Re(t[ho]),a=(a=Ge(t[vo]),v([ia,ca,oa])(a)),i=f(fo,V(la,_(Be("script",a))));try{n=fe(e(r,a))}catch(e){return me(ua(t,e))}return C(i)?n.then(function(){return t}).catch(function(e){return ua(t,e)}):n.then(function(){return e=i,j(function(e,t){return e.then(function(){return ie("Script load",t),ce({remoteScript:t}),Ji(t)})},fe(),e);var e}).then(function(){return t}).catch(function(e){return ua(t,e)})}function pa(e){var t=zi({},e),n=t[vo];if(M(n))return t;var a=Re(t[ho]);return e=Xo,Re(a).is(e)&&(t[go]=Oo,t[vo]=L("",j(function(e,t){return e.push(Xe(Ge(t))),e},[],_(Be("script,link,style",Ge(n)))))),t}function fa(e){return e.indexOf("px")===e.length-2?e:e+"px"}function ma(e,t){return t=Xe(t),Re(e).html(t)}function ga(e){var t=Re(e[ho]),n=e[vo];return ie(ms,e),ce({action:e}),n=n,Re(t).text(n),fe(e)}function va(e,t){return Ke(Xe(t),e)}function ha(e,t){return t=Xe(t),Re(e).prepend(t)}function ba(e,t){var n=Fe(e);return Ye(Je(Xe(t),e)),n}function ya(e,t){return Re(Je(Xe(t),e)).prev()}function ka(e,t){return Re(Qe(Xe(t),e)).next()}function Ta(e,t){return Fe(Je(Xe(t),e))}function wa(e){var t,a,n=Re(e[ho]),r=e[vo],i=r.priority;return ie(ms,e),ce({action:e}),M(i)?Yn(r,n):(t=r,a=i,y(function(n){y(function(e,t){return n.style.setProperty(t,e,a)},t)},_(n))),fe(e)}function _a(e){var t=Re(e[ho]),n=e[vo],a=n.from,r=n.to,n=_(Re(t).children()),t=n[a],n=n[r];return Ne(t)&&Ne(n)?(ie(ms,e),ce({action:e}),(a<r?Qe:Je)(t,n),fe(e)):(ie("Rearrange elements are missing",e),me(e))}function Ca(e){var t,n,a,r,i,o,s,c,l,u,d,p=pa(e);switch(p[go]){case yo:return ie(ms,d=p),da(ma,d);case To:return ga(p);case Oo:return ie(ms,d=p),da(va,d);case No:return ie(ms,u=p),da(ha,u);case Fo:return ie(ms,u=p),da(ba,u);case jo:return ie(ms,l=p),da(ya,l);case Ao:return ie(ms,l=p),da(ka,l);case Lo:return ie(ms,c=p),da(Ta,c);case _o:return c=(o=p)[vo],s=Re(o[ho]),ie(ms,o),ce({action:o}),y(function(e,t){return Jn(t,e,s)},c),fe(o);case Co:return o=(r=p)[vo],i=Re(r[ho]),ie(ms,r),ce({action:r}),Kn(Jo,i),Jn(Jo,sa(o),i),fe(r);case So:return wa(p);case Eo:return i=Re((a=p)[ho]),(r=a[vo]).width=fa(r.width),r.height=fa(r.height),ie(ms,a),ce({action:a}),Yn(r,i),fe(a);case Po:return n=Re((t=p)[ho]),(a=t[vo]).left=fa(a.left),a.top=fa(a.top),ie(ms,t),ce({action:t}),Yn(a,n),fe(t);case Do:return t=Re((n=p)[ho]),ie(ms,n),ce({action:n}),Ye(t),fe(n);case Mo:return _a(p);default:return fe(p)}}function Sa(e){e=e[ho];return fo(e)||P(e)}function Ma(e){e=e[bo];M(e)||Ye("#at-"+T(e))}function Ea(e){var t,n;Sa(e)?(t=e[ho],(n=e)[go]===Io||n[go]===xo?$n(Rs,t):($n(Os,t),Ma(e))):Ma(e)}function Pa(n){return function(e){var t=e.key;if(M(t))return 1;if(e[go]===Lo)return e.page;var n=e[ho];return(n=Qn(ud,n))!==t||n===t&&!e.page}(n)?Ca(n).then(function(){return ie("Action rendered successfully",n),ce({action:n}),!M(t=(e=n).key)&&Sa(e)&&(e=e[ho],Jn(ud,t,e)),Ea(n),n;var e,t}).catch(function(e){re(ds,e),ce({action:n,error:e}),Ea(n);e=zi({},n);return e[ks]=!0,e}):(Ea(n),n)}function Da(e){var t=f(function(e){return!0===e[ks]},e);return C(t)?fe():(y(Ea,t),me(e))}function La(e){return na((t=e)[ho]).then(function(){return t}).catch(function(){var e=zi({},t);return e[ks]=!0,e}).then(Pa);var t}function Va(e,t,n){return Re(n).on(e,t)}function Ia(e){return na(e[ho]).then(function(){return ce({metric:e}),zi({found:!0},e)}).catch(function(){return re(dd,e),ce({metric:e,message:dd}),e})}function xa(e,t){return n=window,pd in n&&fd in n[pd]?window[pd][fd](e,t):function(e,t,n){var a={};a[Sc]=[Mc];var r={method:"POST"};r.url=t,r[rd]=n,r[id]=!0,r[sd]=!1,r[ad]=a;try{e(r)}catch(e){return}return 1}(wn,e,t);var n}function ja(e){var t=e.name,n=vt(_c)||{};n[t]=e,gt(_c,n)}function Aa(e,t){var n=1<arguments.length&&void 0!==t?t:{},t=n.page,e=(vt(_c)||{})[e];if(g(e))return e;n=n.impressionId;return g(n)?e:zi({page:void 0===t||t,impressionId:n},e)}function Oa(e){var t=Jt(e,{}),n={context:{beacon:!0}};return C(t)||((e={}).analytics=t,n.experienceCloud=e),n}function Ra(e,t,n){t=Xt(Oa(e),t,Ot());return t.notifications=n,t}function Na(e,t,n){e={id:O(),type:t,timestamp:x(),parameters:e.parameters,profileParameters:e.profileParameters,order:e.order,product:e.product};return C(n)||(e.tokens=n),e}function Ga(e){var t=nn(Qc);return xa(t,JSON.stringify(e))?(ie(md,t,e),1):(re(gd,t,e),0)}function Fa(e,t,n){var a=Dt(Qc[Us]),n=Na($t({},a),t,[n]),a=Ra(O(),a,[n]);ie("Event handler notification",e,n),ce({source:e,event:t,request:a}),Ga(a)}function Ba(e,t,n){var a=Dt(e),n=Na($t({},a),t,[n]);n.mbox={name:e};a=Ra(O(),a,[n]);ie("Mbox event handler notification",e,n),ce({mbox:e,event:t,request:a}),Ga(a)}function qa(e){var t=Qc[Us],o=[];y(function(e){var t,n,a,r=e.mbox,i=e.data;g(i)||(a=i.eventTokens,C(t=void 0===a?[]:a)||o.push((n="display",e=t,i=r.name,a=r.state,(e=Na(r,n,t)).mbox={name:i,state:a},e)))},e),C(o)||(t=Ra(t,{},o),ie("Mboxes rendered notification",o),ce({source:"prefetchMboxes",event:vd,request:t}),Ga(t))}function Ua(e,t,n){var a=Dt(Qc[Us]),n=Na($t({},a),t,[n]);n.view={name:e};a=Ra(O(),a,[n]);ie("View event handler notification",e,n),ce({view:e,event:t,request:a}),Ga(a)}function Ha(e){var t,n=e.viewName,a=e.impressionId,r=Dt(Qc[Us]),e=Na($t({},r),Cc,[]);e.view={name:n},ie("View triggered notification",n),r=r,t=[e],Zt(Oa(n),r).then(function(e){return e.notifications=t,e}).then(function(e){e.impressionId=a,ce({view:n,event:"triggered",request:e}),Ga(e)})}function Wa(e){var t,n,a,r,i,o;g(e)||(o=e.view,i=(void 0===(r=e.data)?{}:r).eventTokens,C(t=void 0===i?[]:i)||(n=o.name,a=o.impressionId,g(e=Aa(n))||((r=Ra(n,{},[(r=t,i=e.name,o=e.state,(r=Na(e,Cc,t)).view={name:i,state:o},r)])).impressionId=a,ie("View rendered notification",n,t),ce({view:n,event:vd,request:r}),Ga(r))))}function za(e,a,r){g(hd[e])&&(C(e=b(hd))||y(function(n){y(function(e){var t=hd[n][e];e=a,t=t,Re(r).off(e,t)},b(hd[n])),delete hd[n]},e))}function $a(e,t,n,a){function r(){return a(e,i,s)}var i=n.type,o=n.selector,s=n.eventToken,c=T(i+":"+o+":"+s);n=o,i===Ko&&$n(Rs,n),t?(n=c,!g(hd[t=e])&&!g(hd[t][n])||(za(e,i,o),t=c,n=r,hd[c=e]=hd[c]||{},hd[c][t]=n,Va(i,r,o))):Va(i,r,o)}function Ya(t,n,e,a){return ge(V(Ia,e)).then(function(e){return y(function(e){return $a(t,n,e,a)},f(function(e){return e.found},e)),Fl()}).catch(Bl)}function Qa(e){return Ya(e.name,!1,bd(e),Ba)}function Ja(e){return Ya(e.name,!0,bd(e),Ua)}function Ka(e){return Ya("pageLoadMetrics",!1,bd(e),Fa)}function Xa(e){e=V(kd,e);e=zu(e),et(Qc,e)}function Za(e){e=V(kd,e);e=Wu(e),tt(Qc,e)}function er(e){e=f(xl,$u(e));return m(V(yd,e))}function tr(e){return d(e)&&e.type!==wo}function nr(e,t,n){var a,r,i=e.eventToken;return e=e.content,a=t,r=n,e=V(function(e){return zi({key:a,page:r},e)},f(tr,e)),ge(V(La,e)).then(Da).then(function(){return ql(i)}).catch(Ul)}function ar(e){return d(e)&&e.type!==Yo}function rr(e,t){return V(e,f(ar,$u(t)))}function ir(e,t,n){e=c({status:Cs},e,t),t=V(Xu,f(Hu,n)),n={};return C(t)||(e.status=ks,n.errors=t),C(n)||(e.data=n),e}function or(t,e,n){return ge(rr(function(e){return nr(e,!0)},t)).then(e).then(function(e){return n(t),e})}function sr(r,i,t,n){var a=i.name;return ge(rr(function(e){return nr(e,a,t)},i)).then(function(e){return a=e,e=c({status:Cs},t=r,n=i),t=V(Xu,f(Hu,a)),n=V(Xu,f(Hl,a)),a={},C(t)||(e.status=ks,a.errors=t),C(n)||(a.eventTokens=n),C(a)||(e.data=a),e;var t,n,a}).then(function(e){return n(i),e})}function cr(t){return or(t,function(e){return ir(Es,t,e)},Qa)}function lr(e){return sr(Es,e,!0,Qa)}function ur(e,t){1<arguments.length&&void 0!==t&&t||(C(e=void 0===(e=(void 0===(e=e.execute)?{}:e).pageLoad)?{}:e)||Xa(er(e)))}function dr(e){Xa(er(e)),Ne("#at-views")&&Ye("#at-views")}function pr(e){return ge([Ya("prefetchMetrics",!1,bd(e),Fa)]).then(ir)}function fr(){}function mr(e,t){_d.emit(e,t)}function gr(e,t){_d.on(e,t)}function vr(e){return{type:Vo,content:e.url}}function hr(e){var t={};if(C(e))return t;var p=[],f=[],m=[];y(function(e){switch(e.action){case ko:fo((d=e).selector)&&fo(d.cssSelector)?m.push((d=e,(u={}).type=yo,u.content=d.content,u.selector=d.selector,u.cssSelector=d.cssSelector,u)):p.push({type:Qo,content:e.content});break;case wo:C(e.content)||y(function(e){return p.push({type:Yo,content:e})},e.content);break;case To:m.push((u=e,(l={}).type=To,l.content=u.content,l.selector=u.selector,l.cssSelector=u.cssSelector,l));break;case Ro:m.push((l=e,(c={}).type=Oo,c.content=l.content,c.selector=l.selector,c.cssSelector=l.cssSelector,c));break;case Go:m.push((c=e,(s={}).type=No,s.content=c.content,s.selector=c.selector,s.cssSelector=c.cssSelector,s));break;case Bo:m.push((s=e,(o={}).type=Fo,o.content=s.content,o.selector=s.selector,o.cssSelector=s.cssSelector,o));break;case jo:m.push((o=e,(i={}).type=jo,i.content=o.content,i.selector=o.selector,i.cssSelector=o.cssSelector,i));break;case Ao:m.push((i=e,(r={}).type=Ao,r.content=i.content,r.selector=i.selector,r.cssSelector=i.cssSelector,r));break;case Lo:m.push((r=e,(a={}).type=Lo,a.content=r.content,a.selector=r.selector,a.cssSelector=r.cssSelector,a));break;case _o:m.push(function(e){var t={};if(t.selector=e.selector,t.cssSelector=e.cssSelector,e.attribute===Jo)return t.type=Co,t.content=e.value,t;t.type=_o;var n={};return n[e.attribute]=e.value,t.content=n,t}(e));break;case So:m.push((t=(a=e).style,n=void 0===t?{}:t,(t={}).selector=a.selector,t.cssSelector=a.cssSelector,g(n.left)||g(n.top)?g(n.width)||g(n.height)?t.type=So:t.type=Eo:t.type=Po,t.content=n,t));break;case Do:m.push((n=e,(t={}).type=Do,t.selector=n.selector,t.cssSelector=n.cssSelector,t));break;case Mo:m.push(function(e){var t={};t.from=e.from,t.to=e.to;var n={};return n.type=Mo,n.selector=e.selector,n.cssSelector=e.cssSelector,n.content=t,n}(e));break;case Vo:p.push(vr(e));break;case Io:f.push({type:Ko,selector:e.selector,eventToken:e.clickTrackId})}var t,n,a,r,i,o,s,c,l,u,d},e);var n={};if(C(m)||p.push({type:Is,content:m}),C(p)||(n.options=p),C(f)||(n.metrics=f),C(n))return t;e={};return e.pageLoad=n,t.execute=e,t}function br(e,t,n){return n?hr(t):function(e,t){var n={};if(C(t))return n;var a=[],r=[];return y(function(e){switch(e.action){case ko:a.push({type:Qo,content:e.content});break;case wo:C(e.content)||y(function(e){return a.push({type:Yo,content:e})},e.content);break;case Vo:a.push(vr(e));break;case xo:r.push({type:Ko,eventToken:e.clickTrackId})}},t),t={name:e},C(a)||(t.options=a),C(r)||(t.metrics=r),C(t)||((e={}).mboxes=[t],n.execute=e),n}(e,t)}function yr(e){var t=e.status,e=e.data,t={status:t,pageLoad:!0};return g(e)||(t.data=e),t}function kr(e){var t=e.status,n=e.mbox,e=e.data,n={status:t,mbox:n.name};return g(e)||(n.data=e),n}function Tr(e){var t=e.status,n=e.view,e=e.data,n={status:t,view:n.name};return g(e)||(n.data=e),n}function wr(e){var t=e.status,e=e.data,t={status:t,prefetchMetrics:!0};return g(e)||(t.data=e),t}function _r(e,t){var n=1<arguments.length&&void 0!==t?t:Wa;if(g(e))return[null];t=V(Tr,[e]);return wd(t)&&re("View rendering failed",e),e.view.page&&n(e),t}function Cr(e){var t=m([function(e){if(g(e))return[null];var t=V(yr,[e]);return wd(t)&&re("Page load rendering failed",e),t}(e[0]),function(e){if(g(e))return[null];var t=V(kr,e);return wd(t)&&re(Cd,e),t}(e[1]),function(e,t){var n=1<arguments.length&&void 0!==t?t:qa;return g(e)?[null]:(t=V(kr,e),wd(t)&&re(Cd,e),n(e),t)}(e[2]),function(e){if(g(e))return[null];var t=V(wr,[e]);return wd(t)&&re("Prefetch rendering failed",e),t}(e[3])]),e=f(Uu,t),t=f(Hu,e);return C(t)?fe(e):me(t)}function Sr(e){return me(e)}function Mr(n,e){C(e)||(C(e=e.options)||y(function(e){var t;e.type===Qo&&(t=e.content,e.type=Is,e.content=[{type:"setHtml",selector:n,content:t}])},e))}function Er(t,e){var n,a=e.metrics;C(a)||(n=e.name,y(function(e){e.name=n,e.selector=e.selector||t},a))}function Pr(t,e){var n=zi({},e),a=n.execute,r=void 0===a?{}:a,e=n.prefetch,a=r.pageLoad,r=r.mboxes,r=void 0===r?[]:r,e=(void 0===e?{}:e).mboxes,e=void 0===e?[]:e;return Mr(t,void 0===a?{}:a),y(function(e){return Mr(t,e)},r),y(function(e){return Er(t,e)},r),y(function(e){return Mr(t,e)},e),y(function(e){return Er(t,e)},e),n}function Dr(e){e=e.prefetch,e=(void 0===e?{}:e).views,e=void 0===e?[]:e;C(e)||y(ja,e)}function Lr(e){var t,n=[],a=e.execute,r=void 0===a?{}:a,a=r.pageLoad,a=void 0===a?{}:a,r=r.mboxes,r=void 0===r?[]:r;C(a)?n.push(fe(null)):n.push(or(t=a,function(e){return ir("pageLoad",t,e)},Ka)),C(r)?n.push(fe(null)):n.push(ge(V(cr,r)));a=e.prefetch,r=void 0===a?{}:a,e=r.mboxes,a=void 0===e?[]:e,e=r.metrics,e=void 0===e?[]:e;return C(a)?n.push(fe(null)):n.push(ge(V(lr,a))),Ki(e)&&!C(e)?n.push(pr(r)):n.push(fe(null)),at(),ge(n).then(Cr).catch(Sr)}function Vr(e,t){s(function(){return e.location.replace(t)})}function Ir(e){return fo(e)||P(e)?e:Xo}function xr(e){$n(Os,e)}function jr(e,t){var n=1<arguments.length&&void 0!==t&&t,t=e.selector,e=e.response;if(C(e))return ie(bs),xr(t),at(),je({}),mr(Hc),fe();t=Pr(t,e),e=Dn(t);if(C(e))return Ve({}),Dr(t),mr(Uc),ur(t,n),Lr(t).then(function(e){C(e)||Ie({execution:e})}).catch(function(e){return xe({error:e})});t=e.url;return ie(ys,e),Ae({url:t}),mr(Wc),Vr(window,t),fe()}function Ar(e){re(Sd,Ec,e),ce({source:Sd,error:e}),at()}function Or(e,t){var n=1<arguments.length&&void 0!==t&&t,t={selector:Xo,response:e};ie(Sd,xs,e),ce({source:Sd,response:e}),jr(t,n).catch(Ar)}function Rr(e){var t=e[Fc],n=t.request,a=t.response;ie(Sd,Lc),ce({source:Sd,serverState:t});var r,i,r=(r=e,t=zi({},i=a),e=t.execute,a=t.prefetch,i=r[kc],r=r[yc],e&&(t.execute.mboxes=null),e&&!i&&(t.execute.pageLoad=null),a&&(t.prefetch.mboxes=null),a&&!r&&(t.prefetch.views=null),t);ur(r),C(t=void 0===(t=(void 0===(t=(t=r).prefetch)?{}:t).views)?[]:t)||Za(m(V(er,t))),Bn({request:n,response:r}).then(function(e){return Or(e,!0)}).catch(Ar)}function Nr(){var e={};return e[_s]=!0,e}function Gr(e){var t={};return t[_s]=!1,t[ks]=e,t}function Fr(e){return M(e)?Gr("mbox option is required"):250<e.length?Gr("mbox option is too long"):Nr()}function Br(e){return{action:Vo,url:e.content}}function qr(e){var h=[];return y(function(e){switch(e.type){case yo:h.push((g=e,(v={}).action=ko,v.content=g.content,v.selector=g.selector,v.cssSelector=g.cssSelector,v));break;case To:h.push((v=e,(m={}).action=To,m.content=v.content,m.selector=v.selector,m.cssSelector=v.cssSelector,m));break;case Oo:h.push((m=e,(f={}).action=Ro,f.content=m.content,f.selector=m.selector,f.cssSelector=m.cssSelector,f));break;case No:h.push((f=e,(p={}).action=Go,p.content=f.content,p.selector=f.selector,p.cssSelector=f.cssSelector,p));break;case Fo:h.push((p=e,(d={}).action=Bo,d.content=p.content,d.selector=p.selector,d.cssSelector=p.cssSelector,d));break;case jo:h.push((d=e,(u={}).action=jo,u.content=d.content,u.selector=d.selector,u.cssSelector=d.cssSelector,u));break;case Ao:h.push((u=e,(l={}).action=Ao,l.content=u.content,l.selector=u.selector,l.cssSelector=u.cssSelector,l));break;case Lo:h.push((s=e,(c={}).action=Lo,c.content=s.content,c.selector=s.selector,c.cssSelector=s.cssSelector,c));break;case _o:h.push((s=b((l=e).content)[0],(c={}).action=_o,c.attribute=s,c.value=l.content[s],c.selector=l.selector,c.cssSelector=l.cssSelector,c));break;case Co:h.push((i=e,(o={}).action=_o,o.attribute=Jo,o.value=i.content,o.selector=i.selector,o.cssSelector=i.cssSelector,o));break;case So:h.push((i=e,(o={}).action=So,o.style=i.content,o.selector=i.selector,o.cssSelector=i.cssSelector,o));break;case Eo:h.push((a=e,(r={}).action=So,r.style=a.content,r.selector=a.selector,r.cssSelector=a.cssSelector,r));break;case Po:h.push((a=e,(r={}).action=So,r.style=a.content,r.selector=a.selector,r.cssSelector=a.cssSelector,r));break;case Do:h.push((t=e,(n={}).action=Do,n.selector=t.selector,n.cssSelector=t.cssSelector,n));break;case Mo:h.push((t=e,(n={}).action=Mo,n.from=t.content.from,n.to=t.content.to,n.selector=t.selector,n.cssSelector=t.cssSelector,n));break;case Vo:h.push(Br(e))}var t,n,a,r,i,o,s,c,l,u,d,p,f,m,g,v},e),h}function Ur(e){if(C(e))return[];var t=[],n=[],a=[],r=e.options,e=e.metrics,e=void 0===e?[]:e;y(function(e){switch(e.type){case Qo:t.push(e.content);break;case Yo:n.push(e.content);break;case Vo:a.push(Br(e));break;case Is:a.push.apply(a,qr(e.content))}},void 0===r?[]:r),C(t)||a.push({action:ko,content:t.join("")}),C(n)||a.push({action:wo,content:n});e=function(e){if(C(e))return[];var t=[];return y(function(e){e.type===Ko&&(Nl(e)?t.push({action:Io,selector:e.selector,clickTrackId:e.eventToken}):t.push({action:xo,clickTrackId:e.eventToken}))},e),t}(e);return C(e)||a.push.apply(a,e),a}function Hr(e,t){var n,a,a=(a=(n=t).execute,n=(t=void 0===a?{}:a).pageLoad,t=void 0===(a=t.mboxes)?[]:a,(a=[]).push.apply(a,Ur(void 0===n?{}:n)),a.push.apply(a,m(V(Ur,t))),a);e[Cs](a)}function Wr(n){var e=function(e){if(!d(e))return Gr(ns);var t=Fr(e[Es]);return t[_s]?l(e[Cs])?l(e[ks])?Nr():Gr(ls):Gr(cs):t}(n),t=e[ks];if(!e[_s])return re(Md,t),void ce({source:Md,options:n,error:t});if(!ee())return s(n[ks](Ts,ts)),re(Md,ts),void ce({source:Md,options:n,error:ts});function a(e){return Hr(n,e)}function r(e){var t;t=e[Ls]||ws,n[ks](t,e)}ie(Md,n),ce({source:Md,options:n}),ye()&&!ke()?Te().then(function(){Wn(n).then(a).catch(r)}):Wn(n).then(a).catch(r)}function zr(e){var t=function(e){if(!d(e))return Gr(ns);var t=e.request;return d(t)?(e=t.execute,t=t.prefetch,d(e)||d(t)?Nr():Gr(is)):Gr(as)}(e),n=t[ks];return t[_s]?ee()?(ie(Ed,e),ce({source:Ed,options:e}),!ye()||ke()?zn(e):Te().then(function(){return zn(e)})):(re(Ed,ts),ce({source:Ed,options:e,error:ts}),me(new Error(ts))):(re(Ed,n),ce({source:Ed,options:e,error:n}),me(t))}function $r(e){var t=Ir(e.selector),n=function(e){if(!d(e))return Gr(ns);var t=Fr(e[Es]);return t[_s]?(e=e[Ps],Ki(e)?Nr():Gr(us)):t}(e),a=n[ks];return n[_s]?ee()?(e.selector=t,ie(Pd,e),ce({source:Pd,options:e}),void function(e){var t=e.mbox,n=e.selector,a=e.offer,e=t===Qc[Us];if(C(a))return ie(bs),xr(n),at(),je({mbox:t});if(n=Pr(n,br(t,a,e)),!C(a=Dn(n))){e=a.url;return ie(ys,a),Ae({url:e}),Vr(window,e)}Ve({mbox:t}),ur(n),Lr(n).then(function(e){C(e)||Ie({mbox:t,execution:e})}).catch(function(e){return xe({error:e})})}(e)):(re(Pd,ts),ce({source:Pd,options:e,error:ts}),void xr(t)):(re(Pd,e,a),ce({source:Pd,options:e,error:a}),void xr(t))}function Yr(e){var t,n=Ir(e.selector),a=d(t=e)?d(t.response)?Nr():Gr(rs):Gr(ns),t=a[ks];return a[_s]?ee()?(e.selector=n,ie(Dd,e),ce({source:Dd,options:e}),jr(e)):(re(Dd,ts),ce({source:Dd,options:e,error:ts}),xr(n),me(new Error(ts))):(re(Dd,e,t),ce({source:Dd,options:e,error:t}),xr(n),me(a))}function Qr(e){var t=Qc[Us],n=e.consumerId,a=void 0===n?t:n,r=e.request,t=function(e){if(!d(e))return Gr(ns);if(!d(n=e.request))return Gr(as);var t=n.execute,e=n.prefetch,n=n.notifications;return d(t)||d(e)?Gr(os):Ki(n)?Nr():Gr(ss)}(e),n=t[ks];if(!t[_s])return re(Ld,n),void ce({source:Ld,options:e,error:n});if(!ee())return re(Ld,ts),void ce({source:Ld,options:e,error:ts});ie(Ld,e),ce({source:Ld,options:e});r=Ra(a,{},r.notifications);!ye()||ke()?Ga(r):re(Ld,Nc)}function Jr(e){if(ye()&&!ke())return re(hs,Nc),e[ks](ks,Nc),0;!function(e){var t=e.mbox,n=d(e.params)?e.params:{},a=zi({},Dt(t),n);if((n=Na($t({},a),"display",[])).mbox={name:t},Ga(Ra(t,a,[n])))return ie("Track event request succeeded",e),e[Cs]();re(hs,e),e[ks](ws,hs)}(e)}function Kr(t){function n(){return Jr(e=t),!e.preventDefault;var e}var e=t[ho],a=t[go],e=_(Re(e));y(function(e){return Va(a,n,e)},e)}function Xr(e){var t=d(i=e)?(i=Fr(i[Es]))[_s]?Nr():i:Gr(ns),n=t[ks];if(!t[_s])return re(Vd,n),void ce({source:Vd,options:e,error:n});var a,r,i,r=(a=Qc,i=(r=e)[Es],t=zi({},r),n=d(r.params)?r.params:{},t[Vs]=zi({},Dt(i),n),t[qs]=en(a,r[qs]),t[Cs]=l(r[Cs])?r[Cs]:I,t[ks]=l(r[ks])?r[ks]:I,t);if(!ee())return re(Vd,ts),s(r[ks](Ts,ts)),void ce({source:Vd,options:e,error:ts});ie(Vd,r),ce({source:Vd,options:r}),e=(t=r)[go],t=t[ho],(fo(e)&&(fo(t)||P(t))?Kr:Jr)(r)}function Zr(e){return dr(e),sr("view",e,e.page,Ja).then(_r).then(function(e){C(e)||Ie({execution:e})}).catch(function(e){re("View rendering failed",e),xe({error:e})})}function ei(){for(;0<xd.length;){var e=xd.pop(),e=Aa(e.viewName,e);g(e)||Zr(e)}}function ti(){Ad=jd,ei()}function ni(e){var t;t=e,ne()&&(t=t.viewName,window[su].currentView=t),g(Aa(e.viewName,e))&&e.page&&Ha(e),xd.push(e),Ad===jd&&ei()}function ai(e,t){if(!k(e)||M(e))return re(Id,Pc,e),void ce({source:Id,view:e,error:Pc});var n=e.toLowerCase(),t=(e=t,(t={}).viewName=n,t.impressionId=O(),t.page=!0,C(e)||(t.page=!!e.page),t);ie(Id,n,t),ce({source:Id,view:n,options:t}),ni(t)}function ri(){re(Od,arguments)}function ii(){re(Rd,arguments)}function oi(){re(Nd,arguments)}function si(){re(Gd,arguments)}function ci(n,e){var a={};return to(function(e,t){a[t]=n(e,t)},e),a}function li(e,t,n){return n.reduce(e,t)}function ui(n,e,t){var a=e;return to(function(e,t){a=n(a,e,t)},t),a}function di(e,t){for(var a={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=a.parser[(t=t||{}).strictMode?"strict":"loose"].exec(e),r={},i=14;i--;)r[a.key[i]]=n[i]||"";return r[a.q.name]={},r[a.key[12]].replace(a.q.parser,function(e,t,n){t&&(r[a.q.name][t]=n)}),r}var pi,fi,mi,gi,vi,hi,bi,yi,ki,Ti,wi,_i,Ci,Si,Mi,Ei,Pi,Di,Li,Vi,Ii,xi,ji,Ai,Oi,Ri,Ni,Gi,Fi,Bi,qi,Ui,Hi,Wi,zi=a(n("@adobe/reactor-object-assign")),$i=a(n("@adobe/reactor-cookie")),Yi=a(n("@adobe/reactor-query-string")),Qi=a(n("@adobe/reactor-promise")),Ji=a(n("@adobe/reactor-load-script")),Ki=Array.isArray,Xi=Object.prototype.toString,Zi="[object Function]",eo=function(e,t){return t.forEach(e)},to=function(t,n){eo(function(e){return t(n[e],e)},b(n))},no=function(e,t){return t.filter(e)},ao=function(n,e){var a={};return to(function(e,t){n(e,t)&&(a[t]=e)},e),a},ro="[object String]",io=function(e,t){return t.map(e)},oo=Object.prototype.hasOwnProperty,so=String.prototype.trim,co=Function.prototype,n=Object.prototype,lo=co.toString,uo=n.hasOwnProperty,po=lo.call(Object),fo=function(e){return!M(e)},mo=Array.prototype.reverse,go="type",vo="content",ho="selector",bo="cssSelector",yo="setHtml",ko="setContent",To="setText",wo="setJson",_o="setAttribute",Co="setImageSource",So="setStyle",Mo="rearrange",Eo="resize",Po="move",Do="remove",Lo="customCode",Vo="redirect",Io="trackClick",xo="signalClick",jo="insertBefore",Ao="insertAfter",Oo="appendHtml",Ro="appendContent",No="prependHtml",Go="prependContent",Fo="replaceHtml",Bo="replaceContent",qo="mboxDebug",Uo="mboxDisable",Ho="mboxEdit",Wo="at_check",zo="true",$o="data-at-src",Yo="json",Qo="html",Jo="src",Ko="click",Xo="head",Zo="style",es="img",ts='Adobe Target content delivery is disabled. Ensure that you can save cookies to your current domain, there is no "mboxDisable" cookie and there is no "mboxDisable" parameter in query string.',ns="options argument is required",as="request option is required",rs="response option is required",is="execute or prefetch is required",os="execute or prefetch is not allowed",ss="notifications are required",cs="success option is required",ls="error option is required",us="offer option is required",ds="Unexpected error",ps="request failed",fs="request succeeded",ms="Rendering action",gs="Action has no content",vs="Action has no url",hs="Track event request failed",bs="No actions to be rendered",ys="Redirect action",ks="error",Ts="warning",ws="unknown",_s="valid",Cs="success",Ss="render",Ms="metric",Es="mbox",Ps="offer",Ds="name",Ls="status",Vs="params",Is="actions",xs="response",js="request",As="provider",Os="at-element-marker",Rs="at-element-click-tracking",Ns="enabled",Gs="clientCode",Fs="imsOrgId",Bs="serverDomain",qs="timeout",Us="globalMboxName",Hs="globalMboxAutoCreate",Ws="version",zs="defaultContentHiddenStyle",$s="bodyHiddenStyle",Ys="bodyHidingEnabled",Qs="deviceIdLifetime",Js="sessionIdLifetime",Ks="selectorsPollingTimeout",Xs="visitorApiTimeout",Zs="overrideMboxEdgeServer",ec="overrideMboxEdgeServerTimeout",tc="optoutEnabled",nc="secureOnly",ac="supplementalDataIdParamTimeout",rc="authoringScriptUrl",ic="scheme",oc="cookieDomain",sc="mboxParams",cc="globalMboxParams",lc="mboxEdgeCluster",uc="session",dc="settings",pc="clientTraces",fc="serverTraces",mc="___target_traces",gc="targetGlobalSettings",vc="dataProvider",hc=vc+"s",bc="endpoint",yc="viewsEnabled",kc="pageLoadEnabled",Tc="authState",wc="primary",_c="views",Cc="display",Sc="Content-Type",Mc="text/plain",Ec="View delivery error",Pc="View name should be a non-empty string",Dc="Page load disabled",Lc="Using server state",Vc="adobe",Ic="optIn",xc="isApproved",jc="fetchPermissions",Ac="Categories",Oc="TARGET",Rc="optinEnabled",Nc="Adobe Target is not opted in",Gc="analyticsLogging",Fc="serverState",Bc="cspScriptNonce",qc="cspStyleNonce",Uc="cache-updated-event",Hc="no-offers-event",Wc="redirect-offer-event",zc="file:",$c=/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/,Yc=/^(com|edu|gov|net|mil|org|nom|co|name|info|biz)$/i,Qc={},Jc=[Ns,Gs,Fs,Bs,oc,qs,sc,cc,zs,"defaultContentVisibleStyle",Qs,$s,Ys,Ks,Xs,Zs,ec,tc,Rc,nc,ac,rc,"urlSizeLimit",bc,kc,yc,Gc,Fc,Bc,qc,Us],Kc=Yi.parse,Xc=Yi.stringify,Zc=document.createElement("a"),el={},tl=$i.get,nl=$i.set,al=$i.remove,rl="AT:",il="1",ol=(pi=window,function(u){function d(e){return e._zid||(e._zid=t++)}function o(e,t,n,a){var r,i;return(t=p(t)).ns&&(i=t.ns,r=new RegExp("(?:^| )"+i.replace(" "," .* ?")+"(?: |$)")),(w[d(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!a||e.sel==a)})}function p(e){e=(""+e).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function f(e,t){return e.del&&!n&&e.e in a||!!t}function m(e){return _[e]||n&&a[e]||e}function l(a,e,r,i,o,s,c){var t=d(a),l=w[t]||(w[t]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return u(document).ready(r);var t=p(e);t.fn=r,t.sel=o,t.e in _&&(r=function(e){e=e.relatedTarget;if(!e||e!==this&&!u.contains(this,e))return t.fn.apply(this,arguments)});var n=(t.del=s)||r;t.proxy=function(e){if(!(e=v(e)).isImmediatePropagationStopped()){e.data=i;var t=n.apply(a,e._args==y?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},t.i=l.length,l.push(t),"addEventListener"in a&&a.addEventListener(m(t.e),t.proxy,f(t,c))})}function g(t,e,n,a,r){var i=d(t);(e||"").split(/\s/).forEach(function(e){o(t,e,n,a).forEach(function(e){delete w[i][e.i],"removeEventListener"in t&&t.removeEventListener(m(e.e),e.proxy,f(e,r))})})}function v(a,r){if(r||!a.isDefaultPrevented){r=r||a,u.each(e,function(e,t){var n=r[e];a[e]=function(){return this[t]=s,n&&n.apply(r,arguments)},a[t]=C});try{a.timeStamp||(a.timeStamp=(new Date).getTime())}catch(e){}(r.defaultPrevented!==y?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(a.isDefaultPrevented=s)}return a}function h(e){var t,n={originalEvent:e};for(t in e)r.test(t)||e[t]===y||(n[t]=e[t]);return v(n,e)}function b(e){return"string"==typeof e}var y,t=1,k=Array.prototype.slice,T=u.isFunction,w={},i={},n="onfocusin"in pi,a={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};i.click=i.mousedown=i.mouseup=i.mousemove="MouseEvents",u.event={add:l,remove:g},u.proxy=function(e,t){var n=2 in arguments&&k.call(arguments,2);if(T(e)){var a=function(){return e.apply(t,n?n.concat(k.call(arguments)):arguments)};return a._zid=d(e),a}if(b(t))return n?(n.unshift(e[t],e),u.proxy.apply(null,n)):u.proxy(e[t],e);throw new TypeError("expected function")},u.fn.bind=function(e,t,n){return this.on(e,t,n)},u.fn.unbind=function(e,t){return this.off(e,t)},u.fn.one=function(e,t,n,a){return this.on(e,t,n,a,1)};var s=function(){return!0},C=function(){return!1},r=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};u.fn.delegate=function(e,t,n){return this.on(t,e,n)},u.fn.undelegate=function(e,t,n){return this.off(t,e,n)},u.fn.live=function(e,t){return u(document.body).delegate(this.selector,e,t),this},u.fn.die=function(e,t){return u(document.body).undelegate(this.selector,e,t),this},u.fn.on=function(t,a,r,i,o){var s,c,n=this;return t&&!b(t)?(u.each(t,function(e,t){n.on(e,a,r,t,o)}),n):(b(a)||T(i)||!1===i||(i=r,r=a,a=y),i!==y&&!1!==r||(i=r,r=y),!1===i&&(i=C),n.each(function(e,n){o&&(s=function(e){return g(n,e.type,i),i.apply(this,arguments)}),a&&(c=function(e){var t=u(e.target).closest(a,n).get(0);if(t&&t!==n)return e=u.extend(h(e),{currentTarget:t,liveFired:n}),(s||i).apply(t,[e].concat(k.call(arguments,1)))}),l(n,t,i,r,a,c||s)}))},u.fn.off=function(e,n,t){var a=this;return e&&!b(e)?(u.each(e,function(e,t){a.off(e,n,t)}),a):(b(n)||T(t)||!1===t||(t=n,n=y),!1===t&&(t=C),a.each(function(){g(this,e,t,n)}))},u.fn.trigger=function(e,t){return(e=b(e)||u.isPlainObject(e)?u.Event(e):v(e))._args=t,this.each(function(){e.type in a&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):u(this).triggerHandler(e,t)})},u.fn.triggerHandler=function(n,a){var r,i;return this.each(function(e,t){(r=h(b(n)?u.Event(n):n))._args=a,r.target=t,u.each(o(t,n.type||n),function(e,t){if(i=t.proxy(r),r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){u.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),u.Event=function(e,t){b(e)||(e=(t=e).type);var n=document.createEvent(i[e]||"Events"),a=!0;if(t)for(var r in t)"bubbles"==r?a=!!t[r]:n[r]=t[r];return n.initEvent(e,a,!0),v(n)}}((Ci=(_i=[]).concat,Si=_i.filter,Mi=_i.slice,Ei=pi.document,Pi={},Di={},Li={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Vi=/^\s*<(\w+|!)[^>]*>/,Ii=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,xi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ji=/^(?:body|html)$/i,Ai=/([A-Z])/g,Oi=["val","css","html","text","data","width","height","offset"],n=Ei.createElement("table"),Yi=Ei.createElement("tr"),Ri={tr:Ei.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:Yi,th:Yi,"*":Ei.createElement("div")},Ni=/complete|loaded|interactive/,Gi=/^[\w-]*$/,Bi=(Fi={}).toString,qi={},Ui=Ei.createElement("div"),Hi={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Wi=Array.isArray||function(e){return e instanceof Array},qi.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var a=e.parentNode,n=!a;return n&&(a=Ui).appendChild(e),t=~qi.qsa(a,t).indexOf(e),n&&Ui.removeChild(e),t},Ti=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},wi=function(n){return Si.call(n,function(e,t){return n.indexOf(e)==t})},qi.fragment=function(e,t,n){var a,r,i;return(a=Ii.test(e)?yi(Ei.createElement(RegExp.$1)):a)||(e.replace&&(e=e.replace(xi,"<$1></$2>")),t===hi&&(t=Vi.test(e)&&RegExp.$1),(i=Ri[t=!(t in Ri)?"*":t]).innerHTML=""+e,a=yi.each(Mi.call(i.childNodes),function(){i.removeChild(this)})),ml(n)&&(r=yi(a),yi.each(n,function(e,t){-1<Oi.indexOf(e)?r[e](t):r.attr(e,t)})),a},qi.Z=function(e,t){return new kl(e,t)},qi.isZ=function(e){return e instanceof qi.Z},qi.init=function(e,t){var n,a;if(!e)return qi.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&Vi.test(e))n=qi.fragment(e,RegExp.$1,t),e=null;else{if(t!==hi)return yi(t).find(e);n=qi.qsa(Ei,e)}else{if(ul(e))return yi(Ei).ready(e);if(qi.isZ(e))return e;if(Wi(e))a=e,n=Si.call(a,function(e){return null!=e});else if(fl(e))n=[e],e=null;else if(Vi.test(e))n=qi.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==hi)return yi(t).find(e);n=qi.qsa(Ei,e)}}return qi.Z(n,e)},(yi=function(e,t){return qi.init(e,t)}).extend=function(t){var n,e=Mi.call(arguments,1);return"boolean"==typeof t&&(n=t,t=e.shift()),e.forEach(function(e){!function e(t,n,a){for(bi in n)a&&(ml(n[bi])||Wi(n[bi]))?(ml(n[bi])&&!ml(t[bi])&&(t[bi]={}),Wi(n[bi])&&!Wi(t[bi])&&(t[bi]=[]),e(t[bi],n[bi],a)):n[bi]!==hi&&(t[bi]=n[bi])}(t,e,n)}),t},qi.qsa=function(e,t){var n,a="#"==t[0],r=!a&&"."==t[0],i=a||r?t.slice(1):t,o=Gi.test(i);return e.getElementById&&o&&a?(n=e.getElementById(i))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:Mi.call(o&&!a&&e.getElementsByClassName?r?e.getElementsByClassName(i):e.getElementsByTagName(t):e.querySelectorAll(t))},yi.contains=Ei.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},yi.type=ll,yi.isFunction=ul,yi.isWindow=dl,yi.isArray=Wi,yi.isPlainObject=ml,yi.isEmptyObject=function(e){for(var t in e)return!1;return!0},yi.isNumeric=function(e){var t=Number(e),n=o(e);return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},yi.inArray=function(e,t,n){return _i.indexOf.call(t,e,n)},yi.camelCase=Ti,yi.trim=function(e){return null==e?"":String.prototype.trim.call(e)},yi.uuid=0,yi.support={},yi.expr={},yi.noop=function(){},yi.map=function(e,t){var n,a,r,i,o=[];if(gl(e))for(a=0;a<e.length;a++)null!=(n=t(e[a],a))&&o.push(n);else for(r in e)null!=(n=t(e[r],r))&&o.push(n);return 0<(i=o).length?yi.fn.concat.apply([],i):i},yi.each=function(e,t){var n,a;if(gl(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(a in e)if(!1===t.call(e[a],a,e[a]))return e;return e},yi.grep=function(e,t){return Si.call(e,t)},pi.JSON&&(yi.parseJSON=JSON.parse),yi.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Fi["[object "+t+"]"]=t.toLowerCase()}),yi.fn={constructor:qi.Z,length:0,forEach:_i.forEach,reduce:_i.reduce,push:_i.push,sort:_i.sort,splice:_i.splice,indexOf:_i.indexOf,concat:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=qi.isZ(e=arguments[n])?e.toArray():e;return Ci.apply(qi.isZ(this)?this.toArray():this,t)},map:function(n){return yi(yi.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return yi(Mi.apply(this,arguments))},ready:function(e){return Ni.test(Ei.readyState)&&Ei.body?e(yi):Ei.addEventListener("DOMContentLoaded",function(){e(yi)},!1),this},get:function(e){return e===hi?Mi.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){for(var t,n=this.length,a=0;a<n&&(t=this[a],!1!==e.call(t,a,t));)a++;return this},filter:function(t){return ul(t)?this.not(this.not(t)):yi(Si.call(this,function(e){return qi.matches(e,t)}))},add:function(e,t){return yi(wi(this.concat(yi(e,t))))},is:function(e){return 0<this.length&&qi.matches(this[0],e)},not:function(t){var n,a=[];return ul(t)&&t.call!==hi?this.each(function(e){t.call(this,e)||a.push(this)}):(n="string"==typeof t?this.filter(t):gl(t)&&ul(t.item)?Mi.call(t):yi(t),this.forEach(function(e){n.indexOf(e)<0&&a.push(e)})),yi(a)},has:function(e){return this.filter(function(){return fl(e)?yi.contains(this,e):yi(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!fl(e)?e:yi(e)},last:function(){var e=this[this.length-1];return e&&!fl(e)?e:yi(e)},find:function(e){var n=this;return e?"object"==o(e)?yi(e).filter(function(){var t=this;return _i.some.call(n,function(e){return yi.contains(e,t)})}):1==this.length?yi(qi.qsa(this[0],e)):this.map(function(){return qi.qsa(this,e)}):yi()},closest:function(n,a){var r=[],i="object"==o(n)&&yi(n);return this.each(function(e,t){for(;t&&!(i?0<=i.indexOf(t):qi.matches(t,n));)t=t!==a&&!pl(t)&&t.parentNode;t&&r.indexOf(t)<0&&r.push(t)}),yi(r)},parents:function(e){for(var t=[],n=this;0<n.length;)n=yi.map(n,function(e){if((e=e.parentNode)&&!pl(e)&&t.indexOf(e)<0)return t.push(e),e});return Tl(t,e)},parent:function(e){return Tl(wi(this.pluck("parentNode")),e)},children:function(e){return Tl(this.map(function(){return yl(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||Mi.call(this.childNodes)})},siblings:function(e){return Tl(this.map(function(e,t){return Si.call(yl(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return yi.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,Pi[e]||(t=Ei.createElement(e),Ei.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),Pi[e]=n="none"==n?"block":n),Pi[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var n,a,r=ul(t);return this[0]&&!r&&(n=yi(t).get(0),a=n.parentNode||1<this.length),this.each(function(e){yi(this).wrapAll(r?t.call(this,e):a?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){var t;for(yi(this[0]).before(e=yi(e));(t=e.children()).length;)e=t.first();yi(e).append(this)}return this},wrapInner:function(a){var r=ul(a);return this.each(function(e){var t=yi(this),n=t.contents(),e=r?a.call(this,e):a;n.length?n.wrapAll(e):t.append(e)})},unwrap:function(){return this.parent().each(function(){yi(this).replaceWith(yi(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=yi(this);(t===hi?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return yi(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return yi(this.pluck("nextElementSibling")).filter(e||"*")},html:function(n){return 0 in arguments?this.each(function(e){var t=this.innerHTML;yi(this).empty().append(wl(this,n,e,t))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){e=wl(this,t,e,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(fl(t))for(bi in t)_l(this,bi,t[bi]);else _l(this,t,wl(this,n,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:hi},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){_l(this,e)},this)})},prop:function(t,n){return t=Hi[t]||t,1 in arguments?this.each(function(e){this[t]=wl(this,n,e,this[t])}):this[0]&&this[0][t]},removeProp:function(e){return e=Hi[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n,e="data-"+e.replace(Ai,"-$1").toLowerCase();return null!==(n=1 in arguments?this.attr(e,t):this.attr(e))?Sl(n):hi},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=wl(this,t,e,this.value)})):this[0]&&(this[0].multiple?yi(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(e){var t=yi(this),n=wl(this,a,e,t.offset()),e=t.offsetParent().offset(),e={top:n.top-e.top,left:n.left-e.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)});if(!this.length)return null;if(Ei.documentElement!==this[0]&&!yi.contains(Ei.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+pi.pageXOffset,top:e.top+pi.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var n=this[0];if("string"==typeof e)return n?n.style[Ti(e)]||getComputedStyle(n,"").getPropertyValue(e):void 0;if(Wi(e)){if(!n)return;var a={},r=getComputedStyle(n,"");return yi.each(e,function(e,t){a[t]=n.style[Ti(t)]||r.getPropertyValue(t)}),a}}var i="";if("string"==ll(e))t||0===t?i=vl(e)+":"+bl(e,t):this.each(function(){this.style.removeProperty(vl(e))});else for(bi in e)e[bi]||0===e[bi]?i+=vl(bi)+":"+bl(bi,e[bi])+";":this.each(function(){this.style.removeProperty(vl(bi))});return this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf(yi(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&_i.some.call(this,function(e){return this.test(Cl(e))},hl(e))},addClass:function(n){return n?this.each(function(e){var t;"className"in this&&(ki=[],t=Cl(this),wl(this,n,e,t).split(/\s+/g).forEach(function(e){yi(this).hasClass(e)||ki.push(e)},this),ki.length&&Cl(this,t+(t?" ":"")+ki.join(" ")))}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===hi)return Cl(this,"");ki=Cl(this),wl(this,t,e,ki).split(/\s+/g).forEach(function(e){ki=ki.replace(hl(e)," ")}),Cl(this,ki.trim())}})},toggleClass:function(n,a){return n?this.each(function(e){var t=yi(this);wl(this,n,e,Cl(this)).split(/\s+/g).forEach(function(e){(a===hi?!t.hasClass(e):a)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===hi?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===hi?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),a=ji.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(yi(e).css("margin-top"))||0,n.left-=parseFloat(yi(e).css("margin-left"))||0,a.top+=parseFloat(yi(t[0]).css("border-top-width"))||0,a.left+=parseFloat(yi(t[0]).css("border-left-width"))||0,{top:n.top-a.top,left:n.left-a.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ei.body;e&&!ji.test(e.nodeName)&&"static"==yi(e).css("position");)e=e.offsetParent;return e})}},yi.fn.detach=yi.fn.remove,["width","height"].forEach(function(a){var r=a.replace(/./,function(e){return e[0].toUpperCase()});yi.fn[a]=function(t){var e,n=this[0];return t===hi?dl(n)?n["inner"+r]:pl(n)?n.documentElement["scroll"+r]:(e=this.offset())&&e[a]:this.each(function(e){(n=yi(this)).css(a,wl(this,t,e,n[a]()))})}}),["after","prepend","before","append"].forEach(function(t,u){var d=u%2;yi.fn[t]=function(){var n,s,c=yi.map(arguments,function(e){var t=[];return"array"==(n=ll(e))?(e.forEach(function(e){return e.nodeType!==hi?t.push(e):yi.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(qi.fragment(e)))}),t):"object"==n||null==e?e:qi.fragment(e)}),l=1<this.length;return c.length<1?this:this.each(function(e,t){s=d?t:t.parentNode,t=0==u?t.nextSibling:1==u?t.firstChild:2==u?t:null;var n=yi.contains(Ei.documentElement,s),r=/^(text|application)\/(javascript|ecmascript)$/,a=Qc,i=a[Bc],o=a[qc];c.forEach(function(e){if(l)e=e.cloneNode(!0);else if(!s)return yi(e).remove();fo(i)&&"SCRIPT"===e.tagName&&e.setAttribute("nonce",i),fo(o)&&"STYLE"===e.tagName&&e.setAttribute("nonce",o),s.insertBefore(e,t),n&&function e(t,n){n(t);for(var a=0,r=t.childNodes.length;a<r;a++)e(t.childNodes[a],n)}(e,function(e){var t,n,a;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&!r.test(e.type.toLowerCase())||e.src||(t=Ei,n=e.innerHTML,a=e.nonce,!(e=t.getElementsByTagName("script")[0])||(e=e.parentNode)&&((t=t.createElement("script")).innerHTML=n,fo(a)&&t.setAttribute("nonce",a),e.appendChild(t),e.removeChild(t)))})})})},yi.fn[d?t+"To":"insert"+(u?"Before":"After")]=function(e){return yi(e)[t](this),this}}),qi.Z.prototype=kl.prototype=yi.fn,qi.uniq=wi,qi.deserializeValue=Sl,yi.zepto=qi,$i=yi)),function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;pi.getComputedStyle=function(e,t){try{return n(e,t)}catch(e){return null}}}}(),n=(fi=$i).zepto,mi=n.qsa,gi=/^\s*>/,vi="Zepto"+ +new Date,n.qsa=function(e,t){var n,a,t=t;try{t?gi.test(t)&&(a=fi(e).addClass(vi),t="."+vi+" "+t):t="*",n=mi(e,t)}catch(e){throw e}finally{a&&a.removeClass(vi)}return n},$i),sl=window.MutationObserver||window.WebkitMutationObserver,cl="Expected an array of promises";function ll(e){return null==e?String(e):Fi[Bi.call(e)]||"object"}function ul(e){return"function"==ll(e)}function dl(e){return null!=e&&e==e.window}function pl(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function fl(e){return"object"==ll(e)}function ml(e){return fl(e)&&!dl(e)&&Object.getPrototypeOf(e)==Object.prototype}function gl(e){var t=!!e&&"length"in e&&e.length,n=yi.type(e);return"function"!=n&&!dl(e)&&("array"==n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function vl(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function hl(e){return e in Di?Di[e]:Di[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function bl(e,t){return"number"!=typeof t||Li[vl(e)]?t:t+"px"}function yl(e){return"children"in e?Mi.call(e.children):yi.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function kl(e,t){for(var n=e?e.length:0,a=0;a<n;a++)this[a]=e[a];this.length=n,this.selector=t||""}function Tl(e,t){return null==t?yi(e):yi(e).filter(t)}function wl(e,t,n,a){return ul(t)?t.call(e,n,a):t}function _l(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Cl(e,t){var n=e.className||"",a=n&&n.baseVal!==hi;if(t===hi)return a?n.baseVal:n;a?n.baseVal=t:e.className=t}function Sl(t){try{return t&&("true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?yi.parseJSON(t):t))}catch(e){return t}}Qi._setImmediateFn&&(le()?Qi._setImmediateFn(de()):-1!==window.navigator.userAgent.indexOf("MSIE 10")&&Qi._setImmediateFn(function(e){var t=ol("<script>");t.on("readystatechange",function(){t.on("readystatechange",null),t.remove(),t=null,e()}),ol(document.documentElement).append(t)}));var Ml,El,Pl=O(),Dl=/.*\.(\d+)_\d+/;function Ll(e,t){var n=El.createEvent("CustomEvent");return n.initCustomEvent(e,(t=t||{bubbles:!1,cancelable:!1,detail:void 0}).bubbles,t.cancelable,t.detail),n}Ml=window,El=document,l(Ml.CustomEvent)||(Ll.prototype=Ml.Event.prototype,Ml.CustomEvent=Ll);function Vl(e){return!g(e)}function Il(e){return!C(e)}function xl(e){return e.type===Is}function jl(e){return e.type===Vo}function Al(e){return d(e)&&Ju(e)}function Ol(e){return d(e)&&Ju(e)&&Ku(e)}function Rl(e){return d(e)&&Ju(e)}function Nl(e){return fo(e.selector)}function Gl(e){return!g(e)}function Fl(){return rn(Ms)}function Bl(e){return on(Ms,e)}function ql(e){return rn(Ss,e)}function Ul(e){return on(Ss,e)}function Hl(e){return qu(Hu)(e)&&Zu(e)}var Wl,zl,$l="at-library-loaded",Yl="at-request-start",Ql="at-request-succeeded",Jl="at-request-failed",Kl="at-content-rendering-start",Xl="at-content-rendering-succeeded",Zl="at-content-rendering-failed",eu="at-content-rendering-no-offers",tu="at-content-rendering-redirect",nu=":eq(",au=nu.length,ru=/((\.|#)(-)?\d{1})/g,iu="Unable to load target-vec.js",ou="Loading target-vec.js",su="_AT",cu="clickHandlerForExperienceEditor",lu="at_qa_mode",uu="at_preview_token",du="at_preview_index",pu="at_preview_listed_activities_only",fu="at_preview_evaluate_as_true_audience_ids",mu="at_preview_evaluate_as_false_audience_ids",gu="at-",vu="at-body-style",hu="#"+vu,bu="at-views",yu="MCAAMB",ku="MCAAMLH",Tu="MCMID",wu="MCOPTOUT",_u="getSupplementalDataID",Cu="getCustomerIDs",Su="trackingServer",Mu=Su+"Secure",Eu="Visitor",Pu="getInstance",Du="isAllowed",Lu={},Vu="Data provider",Iu=(Wl=document.createElement("canvas"),g(zl=Wl.getContext("webgl")||Wl.getContext("experimental-webgl"))||g(Wl=zl.getExtension("WEBGL_debug_renderer_info"))||g(Wl=zl.getParameter(Wl.UNMASKED_RENDERER_WEBGL))?null:Wl),xu="profile.",ju="mbox3rdPartyId",Au="at_property",Ou="orderId",Ru="orderTotal",Nu="productPurchasedId",Gu="productId",Fu="categoryId",Bu="Network request failed",Yi=function(t){return function(e){return e[t]}},qu=function(t){return function(e){return!t(e)}},Uu=qu(g),n=qu(M),$i=function(t){return function(e){return f(t,e)}},Hu=function(e){return e.status===ks},Wu=$i(Uu),zu=$i(n),$u=Yi("options"),Yu=Yi(vo),Qu=Yi("responseTokens"),Ju=function(e){return fo(e.name)},Ku=function(e){return!g(e.index)},Xu=Yi("data"),Zu=v([Xu,Uu]),ed="adobe_mc_sdid",td="Network request failed",nd="method",ad="headers",rd="data",id="credentials",od="timeout",sd="async",cd=/CLKTRK#(\S+)/,ld=/CLKTRK#(\S+)\s/,ud="at-action-key",dd="metric element not found",pd="navigator",fd="sendBeacon",md="Beacon data sent",gd="Beacon data sent failed",vd="rendered",hd={},bd=Yi("metrics"),yd=Yi(vo),kd=Yi(bo);fr.prototype={on:function(e,t,n){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function a(){r.off(e,a),t.apply(n,arguments)}var r=this;return a._=t,this.on(e,a,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),a=0,r=n.length;a<r;a++)n[a].fn.apply(n[a].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),a=n[e],r=[];if(a&&t)for(var i=0,o=a.length;i<o;i++)a[i].fn!==t&&a[i].fn._!==t&&r.push(a[i]);return r.length?n[e]=r:delete n[e],this}};var Td=fr;Td.TinyEmitter=fr;function wd(e){return!C(f(Hu,e))}var _d=new Td,Cd="Mboxes rendering failed",Sd="[page-init]",Md="[getOffer()]",Ed="[getOffers()]",Pd="[applyOffer()]",Dd="[applyOffers()]",Ld="[sendNotifications()]",Vd="[trackEvent()]",Id="[triggerView()]",xd=[],jd=1,Ad=0;gr(Uc,ti),gr(Hc,ti),gr(Wc,ti);var Yi="function has been deprecated. Please use getOffer() and applyOffer() functions instead.",Od="adobe.target.registerExtension() function has been deprecated. Please review the documentation for alternatives.",Rd="mboxCreate() "+Yi,Nd="mboxDefine() "+Yi,Gd="mboxUpdate() "+Yi,Yi={init:function(e,t,n){if(e.adobe&&e.adobe.target&&void 0!==e.adobe.target.getOffer)re("Adobe Target has already been initialized.");else{G(n);var a=Qc,n=a[Ws];if(e.adobe=e.adobe||{},e.adobe.target=e.adobe.target||{},e.adobe.target.VERSION=n,e.adobe.target.event={LIBRARY_LOADED:$l,REQUEST_START:Yl,REQUEST_SUCCEEDED:Ql,REQUEST_FAILED:Jl,CONTENT_RENDERING_START:Kl,CONTENT_RENDERING_SUCCEEDED:Xl,CONTENT_RENDERING_FAILED:Zl,CONTENT_RENDERING_NO_OFFERS:eu,CONTENT_RENDERING_REDIRECT:tu},!a[Ns])return(r=e).adobe=r.adobe||{},r.adobe.target={VERSION:"",event:{},getOffer:i,getOffers:o,applyOffer:i,applyOffers:o,sendNotifications:i,trackEvent:i,triggerView:i,registerExtension:i,init:i},r.mboxCreate=i,r.mboxDefine=i,r.mboxUpdate=i,void re(ts);oe(window,Qc,te()),qe(),g(r=$e((a=e).location.search))||(a=new Date(x()+186e4),nl(lu,JSON.stringify(r),{expires:a})),e.adobe.target.getOffer=Wr,e.adobe.target.getOffers=zr,e.adobe.target.applyOffer=$r,e.adobe.target.applyOffers=Yr,e.adobe.target.sendNotifications=Qr,e.adobe.target.trackEvent=Xr,e.adobe.target.triggerView=ai,e.adobe.target.registerExtension=ri,e.mboxCreate=ii,e.mboxDefine=oi,e.mboxUpdate=si,e=Ee($l,{}),Me(window,document,$l,e)}var r;function i(){}function o(){return fe()}},initConfig:G,initDelivery:function(){if(!ee())return re(Sd,ts),void ce({source:Sd,error:ts});var e=Qc;if(function(e){var t=e[Fc];if(!C(t)){e=t.request,t=t.response;return!C(e)&&!C(t)}}(e))Rr(e);else{var t=e[kc],n=e[yc];if(!t&&!n)return ie(Sd,Dc),void ce({source:Sd,error:Dc});nt();var a={};t&&(a.execute={pageLoad:{}}),n&&(a.prefetch={views:[{}]});e=e[qs];ie(Sd,js,a),ce({source:Sd,request:a});var r={request:a,timeout:e};(ye()&&!ke()?Te().then(function(){zn(r).then(Or).catch(Ar)}):zn(r).then(Or)).catch(Ar)}}};e.exports=Yi}},"adobe-target-v2/lib/messages.js":{script:function(e){"use strict";e.exports={ALREADY_INITIALIZED:"AT: Adobe Target has already been initialized.",DELIVERY_DISABLED:"AT: Adobe Target content delivery is disabled. Update your DOCTYPE to support Standards mode.",NO_REQUEST:"AT: Target library is either not loaded or disabled, no request will be executed"}}},"adobe-target-v2/lib/modules/params-store.js":{script:function(e,t,n){"use strict";function a(r){var i={};return Object.keys(r).forEach(function(e){var t,n,a=r[e];void 0!==(n=a)&&null!=n&&Object.prototype.hasOwnProperty.call(n,"value")&&null!=n.checked?(t=a.checked,n=a.value,t&&""===n||(i[e]=n)):i[e]=a}),i}var r=n("./object-override"),i={},o={};e.exports={mergeParams:function(e){e=a(e),r(i,e)},mergePageLoadParams:function(e){e=a(e),r(o,e)},getParams:function(){return i},getPageLoadParams:function(){return o}}}},"adobe-target-v2/lib/modules/object-override.js":{script:function(e){"use strict";function t(e){return!Array.isArray(this.subset)||-1!==this.subset.indexOf(e)}e.exports=function(r,i,e){Object.keys(i).filter(t,{subset:e}).forEach(function(e){var t,n,a;t=r,(n=i)[e=e]!==a&&(t[e]=n[e])})}}},"adobe-target-v2/lib/librarySettings.js":{script:function(e){"use strict";e.exports={TARGET_DEFAULT_SETTINGS:{version:"2.4.1"}}}},"adobe-target-v2/lib/modules/page-load.js":{script:function(e,t,n){"use strict";var a=n("../librarySettings"),r=n("@adobe/reactor-window"),i=n("./object-override"),o=n("./params-store"),s=o.getParams,c=o.getPageLoadParams,l=n("../targetSettings").targetSettings;e.exports=function(e){return l.mboxParams=s(),l.globalMboxParams=c(),i(l,e,["bodyHidingEnabled","bodyHiddenStyle"]),i(l,r.targetGlobalSettings||{},["enabled","bodyHidingEnabled","bodyHiddenStyle"]),i(l,a.TARGET_DEFAULT_SETTINGS||{},["version"]),l}}}},settings:{targetSettings:{enabled:!0,timeout:3e3,version:"2.3.0",endpoint:"/rest/v1/delivery",imsOrgId:"2C7336C753C676BA0A490D4B@AdobeOrg",clientCode:"telegraphmediagroupl",secureOnly:!1,serverState:{},optinEnabled:!1,serverDomain:"telegraphmediagroupl.tt.omtrdc.net",urlSizeLimit:2048,viewsEnabled:!0,optoutEnabled:!1,globalMboxName:"target-global-mbox",bodyHiddenStyle:"body {opacity: 0}",pageLoadEnabled:!0,analyticsLogging:"server_side",deviceIdLifetime:632448e5,bodyHidingEnabled:!0,sessionIdLifetime:186e4,visitorApiTimeout:2e3,authoringScriptUrl:"//cdn.tt.omtrdc.net/cdn/target-vec.js",overrideMboxEdgeServer:!1,selectorsPollingTimeout:5e3,defaultContentHiddenStyle:"visibility: hidden;",defaultContentVisibleStyle:"visibility: visible;",overrideMboxEdgeServerTimeout:186e4,supplementalDataIdParamTimeout:30}},hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPb58266a7af6e4b59b085a4059aadf6ad/"}},company:{orgId:"2C7336C753C676BA0A490D4B@AdobeOrg"},property:{name:"Telegraph (AEM) (DTM - 2019-10-23 06:34:31)",settings:{domains:["telegraph.co.uk"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!1}},rules:[{id:"RL4e2f866432db45bf9e32fded3d5f0aa0",name:"TMG Article Word Count",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){if(paywallDisplayed=_satellite.getVar("TMG paywallDisplayed"),regwallDisplayed=_satellite.getVar("TMG regwallDisplayed"),"false"==paywallDisplayed&&"false"==regwallDisplayed){wrdCount=0;var n=document.querySelectorAll("article p");for(i=0;i<n.length;i++)wrdCount+=n[i].textContent.split(" ").length;t.eVar215=wrdCount}else"true"==paywallDisplayed?t.eVar215="n/a paywall encountered":"false"==regwallDisplayed&&(t.eVar215="n/a regwall encountered")}},trackerProperties:{}}}]},{id:"RL517305b9554140bb937c539d3bfb0f8c",name:"TMG Fetch Financial Services Marketing Codes",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"tmgFunctions = _satellite.getVar(\"TMG Functions\");\nvar pathname = document.location.pathname;\nvar _url = window.location.href;\nvar tags = {\n    'travel_insurance': {\n        'cat': 'fs-tr0',\n        'id': '6260248',\n        'type': 'fs-tr0'\n    },\n    'pvt_health_insurance': {\n        'cat': 'fs-fi0',\n        'id': '6260248',\n        'type': 'fs-pr0'\n    },\n    'int_health_insurance': {\n        'cat': 'fs-fi0',\n        'id': '6260248',\n        'type': 'fs-in0'\n    },\n    'nba_prem_subs': {\n        'cat': 'fs-fi0',\n        'id': '6260248',\n        'type': 'fs-nb0'\n    },\n    'int_money_trans': {\n        'cat': 'fs-mo001',\n        'id': '6260248',\n        'type': 'fscat0'\n    },\n    'inh_tax': {\n        'cat': 'fs-in0',\n        'id': '6260248',\n        'type': 'fs-in000'\n    },\n    'home_ins': {\n        'cat': 'fs-ho0',\n        'id': '6260248',\n        'type': 'fs-ho0'\n    },\n    'fun_plans': {\n        'cat': 'fs-fu0',\n        'id': '6260248',\n        'type': 'fs-fu0'\n    },\n    'car_warranty': {\n        'cat': 'fs-ca0',\n        'id': '6260248',\n        'type': 'fs-ca0'\n    },\n    'travel_money': {\n        'cat': 'fs-mo00',\n        'id': '6260248',\n        'type': 'fscat0'\n    },\n    'mortgages': {\n        'cat': 'fs-mo0',\n        'id': '6260248',\n        'type': 'fs-mo00'\n    }\n};\n\nvar fireTag = function(tagName, tags) {\n    iframeSrc = '//' + tags[tagName].id + '.fls.doubleclick.net/activityi;src=' + tags[tagName].id + ';type=' + tags[tagName].type + ';cat=' + tags[tagName].cat + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + String(Math.random()).slice(2) + '?';\n    tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n};\n\nif (/^\\/insurance\\/travel\\/$/.test(pathname)) {\n    fireTag('travel_insurance', tags);\n}\nelse if (/^\\/insurance\\/health\\/$/.test(pathname)) {\n    fireTag('pvt_health_insurance', tags);\n}\nelse if (/^\\/financial-services\\/insurance\\/international-health-insurance\\/$/.test(pathname)) {\n    fireTag('int_health_insurance', tags);\n}\nelse if (/^\\/financial-services\\/currency-exchange\\/international-money-transfers\\/guide-to-sending-money-securely\\/$/.test(pathname)) {\n    fireTag('int_money_trans', tags);\n} \nelse if (/^\\/financial-services\\/currency-exchange\\/international-money-transfers\\/$/.test(pathname)) {\n    fireTag('int_money_trans', tags);\n} \nelse if (/^\\/financial-services\\/currency-exchange\\/travel-money\\/$/.test(pathname)) {\n    fireTag('travel_money', tags);\n}\nelse if (/^\\/financial-services\\/investments\\/inheritance-tax\\/$/.test(pathname)) {\n    fireTag('inh_tax', tags);\n}\nelse if (/^\\/financial-services\\/insurance\\/home-insurance\\/$/.test(pathname)) {\n    fireTag('home_ins', tags);\n}\nelse if (/^\\/financial-services\\/retirement-solutions\\/funeral-plans\\/$/.test(pathname)) {\n    fireTag('fun_plans', tags);\n}\nelse if (/^\\/financial-services\\/motoring\\/car-warranty\\/$/.test(pathname)) {\n    fireTag('car_warranty', tags);\n}\nelse if (/^\\/financial-services\\/money-comparison\\/mortgages\\/$/.test(pathname)) {\n    fireTag('mortgages', tags);\n}",language:"javascript"}}]},{id:"RLf8f2527bba3a4431ba79478a927820e6",name:"TMG onward journey on evar154",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=_satellite.getVar("TMG onward journey");void 0!==n&&""!==n&&(t.eVar154=n,t.events=void 0===t.events?"event255":t.events+",event255")}},trackerProperties:{}}}]},{id:"RLb6fe01e9804245ef875c3386bf1ac447",name:"Infinity Integration (Page)",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){generateTransactionID=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return"infinity-"+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&15|64]+e[a>>24&255]+e[63&r|128]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]};var n=generateTransactionID();window._ictt=window._ictt||[],window._ictt.push(["_setCustomVar",["adobe_txid",n]]),t.transactionID=n}}}}]},{id:"RL1750a7e1aae04e269fffedbedc10a539",name:"TMG Subscriber Thank You Page",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"\\/secure\\/payment\\/.*confirmation",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(){subType=_satellite.getVar("TMG Subscription Type"),expDate=new Date;var e=expDate.getFullYear(),t=expDate.getMonth(),n=expDate.getDate(),n=new Date(e+2,t,n);document.cookie="tmgSubscriberType="+subType+";domain=.telegraph.co.uk;path=/;expires="+n+";"}},trackerProperties:{eVars:[{name:"eVar146",type:"value",value:"%TMG Subscription Type%"}]}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"if(!(new RegExp(/secure\\.telegraph\\.co\\.uk|www\\.telegraph\\.co\\.uk\\/customer\\/subscribe/).test(window.location.pathname))){\n\ntmgFunctions = _satellite.getVar(\"TMG Functions\");\n\ngtagSrc = \"https://www.googletagmanager.com/gtag/js?id=DC-9509628&l=gDataLayer\";\n\ntmgFunctions.htmlBuilder(gtagSrc, \"script\");\n\nwindow.gDataLayer = window.gDataLayer || [];\nfunction gtag(){gDataLayer.push(arguments);}\ngtag('js', new Date());\n\ngtag('config', 'DC-9509628');\ngtag('config', 'AW-991596209');\n\ngtag('event', 'conversion', {\n\t'allow_custom_scripts': true,\n\t'send_to': 'DC-9509628/allpage/teleg0+unique'\n});\n\nvar subType = _satellite.getVar('TMG Subscription Type');\n\nfunction builDblClick(dctype, dccat){\n\n    //iframeSrc = dSrc;\n    //tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n\t\n\t//BUILD ORDER ID\n\t\n\tgtag('event', 'purchase', {\n\t\t'allow_custom_scripts': true,\n\t\t'value': '[Revenue]',\n\t\t'transaction_id': '[OrderID]',\n\t\t'send_to': 'DC-9509628/'+dctype+'/'+dccat+'+transactions'\n\t});\n\n}\n\nswitch(subType){\n\n\tcase \"sports\":\n\t\t//var axel = Math.random() + \"\";\n\t\t//var a = axel * 10000000000000;\n\t\t//srcScr = \"https://6260248.fls.doubleclick.net/activityi;src=6260248;type=premi002;cat=premi00;qty=1;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;cost=0;ord=\"+a+\"?\";\n\t\t//builDblClick(srcScr);\n\t\t\n\t\tdctype = \"subsconf\";\n\t\tdccat = \"teleg001\";\n\t\t\n\t\tbuilDblClick(dctype, dccat);\n\t\t\n\t\tbreak;\n\tcase \"generic\":\n\t\tvar axel = Math.random() + \"\";\n\t\tvar a = axel * 10000000000000;\n\t\tif(new RegExp(/secure\\/payment\\/confirmation-digital\\//).test(document.location.href)){\n\t\t\t//srcScr = \"https://6260248.fls.doubleclick.net/activityi;src=6260248;type=premi002;cat=premi000;qty=1;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;cost=0;ord=\"+a+\"?\";\n\t\t\t//builDblClick(srcScr);\n\t\t\t\n\t\t\tdctype = \"subsconf\";\n\t\t\tdccat = \"teleg0\";\n\t\t\t\n\t\t\tbuilDblClick(dctype, dccat);\n\t\t\t\n\t\t}\n\t\tbreak;\n\n}\n  \n}",language:"javascript"}}]},{id:"RL50431845dc814d8b9466ca6308ae2945",name:"Target V2",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-target-v2/lib/loadTarget.js",settings:{}},{modulePath:"adobe-target-v2/lib/addParams.js",settings:{params:{orderId:{value:"%timestamp%",checked:!1},keywords:{value:"%TMG Meta Keywords%",checked:!1},"tmg.icid":{value:"%TMG icid%",checked:!1},"entity.id":{value:"%TMG Meta Article ID%",checked:!1},orderTotal:{value:"0",checked:!1},"tmg.author":{value:"%TMG Meta Author%",checked:!1},"dl.pageType":{value:"%TMG DL pageType%",checked:!1},"entity.name":{value:"%TMG articleTitle (no lowercase)%",checked:!1},"tmg.offerId":{value:"%TMG Subscription Offer ID%",checked:!1},"tmg.keywords":{value:"%TMG Meta Keywords%",checked:!1},"tmg.platform":{value:"aem",checked:!1},"entity.author":{value:"%TMG Meta Author%",checked:!1},"tmg.storyType":{value:"%TMG DL storyType%",checked:!1},"DCSext.Channel":{value:"%TMG Meta Channel%",checked:!1},"entity.channel":{value:"%TMG Meta Channel%",checked:!1},"entity.comment":{value:"false",checked:!1},"entity.pageURL":{value:"%TMG Pathname%",checked:!1},mbox3rdPartyId:{value:"%TMG Cookie customerID%",checked:!1},"tmg.userStatus":{value:"%TMG userStatus%",checked:!1},"entity.keywords":{value:"%TMG Meta Ads Keywords%",checked:!1},"entity.pageType":{value:"%TMG Meta Content Type%",checked:!1},"tmgads.keywords":{value:"%TMG Meta Ads Keywords%",checked:!1},"tmgads.pagetype":{value:"%TMG Meta Pagetype%",checked:!1},"user.categoryId":{value:"%TMG Meta Ads Channel%",checked:!1},"DCSext.articleId":{value:"%TMG Meta Article ID%",checked:!1},"tmgads.articleid":{value:"%TMG Meta Ads Article ID%",checked:!1},"entity.categoryId":{value:"%TMG Meta Ads Channel%",checked:!1},"tmg.cookieConsent":{value:"%TMG Cookie Consent%",checked:!1},"tmg.premium.state":{value:"%TMG Meta Premium State%",checked:!1},productPurchasedId:{value:"%TMG Meta Article ID%",checked:!1},"tmg.subscriberType":{value:"%TMG Subscription Type in tmg_p13n Cookie%",checked:!1},"DCSext.Content_Type":{value:"%TMG Meta Content Type%",checked:!1},"entity.thumbnailUrl":{value:"%TMG Thumbnail Url%",checked:!1},"tmg.paywallDisplayed":{value:"%TMG paywallDisplayed%",checked:!1},"tmg.premium.override":{value:"%TMG Meta Premium Override%",checked:!1},"tmg.regwallDisplayed":{value:"%TMG regwallDisplayed%",checked:!1},"entity.authorImageSrc":{value:"%TMG Author Image Src%",checked:!1},"entity.conversionType":{value:"pageview",checked:!1},"entity.firstPublished":{value:"%TMG Article First Published%",checked:!1},"entity.premiumContent":{value:"%TMG Meta Premium State%",checked:!1},"entity.businessSegment":{value:"%TMG Meta Business Segment%",checked:!1},"entity.commentsEnabled":{value:"%TMG Comments Enabled%",checked:!1},"tmgads.businessSegment":{value:"%TMG Meta Business Segment%",checked:!1},"entity.publishedRangeOneDay":{value:"%TMG Published Range One Day%",checked:!1},"entity.publishedRangeOneWeek":{value:"%TMG Published Range One Week%",checked:!1},"entity.publishedRangeTwoDays":{value:"%TMG Published Range Two Days%",checked:!1}}}},{modulePath:"adobe-target-v2/lib/firePageLoad.js",settings:{bodyHiddenStyle:"body {opacity: 0}",bodyHidingEnabled:!1}}]},{id:"RL1f418a8ec06e4db3ac644269fcee7f18",name:"3rd Party: Post Office Analytics",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/subscribe\/postoffice/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC6bd1e42c50024b10b2256cc084a7c984-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC2b8e640f97494303a1e8c99a2a0ac1cc-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCcf9a63f5f32e49adb0b0f788d206be73-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4b24f70df2fd4e75a27a1a31a588d79d",name:"TMG Gift Subscription Events",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/giftCheckout|giftConfirmation/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.events="",t.linkTrackEvents="";for(var n=_satellite.getVar("TMG DL event"),a=(_satellite.getVar("TMG Functions"),0);a<n.length;a++)switch(n[a]){case"giftCheckout":t.events="event236",t.linkTrackEvents="event236";break;case"giftConfirmation":t.events="event237",t.linkTrackEvents="event237"}t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Gift Subscriptions",linkType:"o"}}]},{id:"RL9bb897a7d699445db9e43911560854d7",name:"TMG Subscription Product Pages",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/premium/product/",valueIsRegex:!0},{value:"/premium/digital-editions/",valueIsRegex:!0},{value:"/subscriptions/sub-bar/",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{trackerProperties:{events:[{name:"event44"}]}}}]},{id:"RL86aebbb56d124e4da92887a324f32cf8",name:"Marketing Cloud ID Customer IDs (Page)",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:35}],conditions:[],actions:[{modulePath:"adobe-mcid/src/lib/actions/setCustomerIds.js",settings:{customerIds:[{value:"%TMG Cookie customerID%",authState:1,integrationCode:"targetPID"},{value:"%TMG Cookie customerID%",authState:1,integrationCode:"Targetpidpoc"}]}}]},{id:"RL3f36fc088b5b44f799deadc13bd85218",name:"COMMERCE: Skimlinks [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=document.querySelector("meta[name='tmgads.channel']").getAttribute("content"),t=document.querySelector("meta[name='tmgads.section']").getAttribute("content"),n=document.querySelector("meta[name='tmgads.pagetype']").getAttribute("content"),a=document.querySelector("meta[name='tmgads.businessSegment']").getAttribute("content");if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href)&&"betting"!==e&&"obituaries"!==e&&"financial-services"!==e&&"personal-banking"!==e&&"work-salary"!==e&&"bills-and-utilities"!==e&&"insurance"!==e&&"tax"!==e&&"pensions-retirement"!==e&&"investing"!==e&&"connect"!==e&&"global-health"!==e&&"science"!==e&&"royal-family"!==e&&"fantasy-sports"!==e&&"travel-tours"!==e&&"topics"!==e&&"royalfamily"!==e&&"globalhealth"!==e&&"money"!==e&&"news"!==e&&"politics"!==e&&"business"!==e&&"opinion"!==e&&"sponsored"!==e&&"travel-hotels"!==t&&"travel-exclusiveoffers"!==t&&"travel-tours"!==t&&"topic"!==n&&"sponsored"!=a&&"travel-product-listing"!==n&&"travel-review"!==n&&"index"!==n)return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC4e7cf4e8b10549a8b35a4e402f27d07b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9e78138728764bd0882568891d63a1cc",name:"Quantum Metrics - Load",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!0}}}],actions:[{modulePath:"quantum-metric/src/lib/actions/startCapture.js",settings:{}}]},{id:"RL4ec833cc1cf0444aaa851ea4fee22329",name:"TMG Search Made",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".js-filtered-list li",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=document.getElementsByClassName("product-search__search-input js-search-input");t.eVar55=n.length?n[0].value:"";var a=this.parentElement.previousElementSibling,n=a?a.textContent||a.innerText:"",a=this?this.innerText||this.textContent:"";t.eVar56=n.replace(/(?:\r\n|\r|\n|\t)/g," ")+";"+a.replace(/(?:\r\n|\r|\n|\t)/g," "),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event3"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL20d65d8c2af44fada1e4d08e2e8692ef",name:"TMG Secured Page Marketing Pixels Libraries",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/secure\.telegraph\.co\.uk|www\.telegraph\.co\.uk\/customer\/subscribe|secure\-staging\-ams64\.telegraph\.co\.uk/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"!function(f,b,e,v,n,t,s)\n{if(f.fbq)return;n=f.fbq=function(){n.callMethod?\nn.callMethod.apply(n,arguments):n.queue.push(arguments)};\nif(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\nn.queue=[];t=b.createElement(e);t.async=!0;\nt.src=v;s=b.getElementsByTagName(e)[0];\ns.parentNode.insertBefore(t,s)}(window, document,'script',\n'https://connect.facebook.net/en_US/fbevents.js');\nfbq('init', '678338115628438');\nfbq('track', 'PageView');",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"tmgFunctions = _satellite.getVar(\"TMG Functions\");\n\n//np\t\nNgtagSrc = \"https://www.googletagmanager.com/gtag/js?id=AW-362151000&l=grDataLayer\";\n\ntmgFunctions.htmlBuilder(NgtagSrc, \"script\");\n\nwindow.grDataLayer = window.grDataLayer || [];\nfunction gtag(){grDataLayer.push(arguments);}\ngtag('js', new Date());\n\ngtag('config', 'AW-362151000');\t\n\n/**gscriptSrc = \"https://www.googletagmanager.com/gtag/js?id=AW-808307600\";\ntmgFunctions.htmlBuilder(gscriptSrc, \"script\");\n\n//window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} \n\n\n\nwindow.dataLayer = window.dataLayer //|| []; \n\nfunction gtag(){dataLayer.push(arguments);}\n\n\ngtag('js', new Date()); \ngtag('config', 'AW-808307600');\n\ngtag('event', 'conversion', {'send_to': 'AW-808307600/De7kCK7r3_cBEJCXt4ED'});**/",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"(function(e,t,n){if(e.snaptr)return;var a=e.snaptr=function()\n{a.handleRequest?a.handleRequest.apply(a,arguments):a.queue.push(arguments)};\na.queue=[];var s='script';r=t.createElement(s);r.async=!0;\nr.src=n;var u=t.getElementsByTagName(s)[0];\nu.parentNode.insertBefore(r,u);})(window,document,\n'https://sc-static.net/scevent.min.js');\n\nsnaptr('init', '3451f617-9be4-4f4f-9d39-5fccb5f08cfd');\n\nsnaptr('track', 'PAGE_VIEW');",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"(function(w,e,b,g,a,i,n,s){w['ITCLKOBJ']=a;w[a]=w[a]||function(){(w[a].q=w[a].q||[]).push(arguments)},w[a].l=1*new Date();i=e.createElement(b),n=e.getElementsByTagName(b)[0];i.async=1;i.src=g;n.parentNode.insertBefore(i,n)})(window,document,'script','https://linkprotect.cudasvc.com/url?a=https%3a%2f%2fanalytics.webgains.io%2fclk.min.js&c=E,1,7SC9d6L0sK4v25sEg_L4ZJdQe8wll8T0SfoiTJupCNhtGN_dyurzvUt6j4fd7VLGKK0wipJiKFQ5uD4aAYmfVEo1CnIQOJnOaXHTn7Wqo7dJOD7uIo8t&typo=1','ITCLKQ');\nITCLKQ('set', 'internal.cookie', true);\nITCLKQ('set', 'internal.api', true);\nITCLKQ('click');",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"//np dckl\n\nvar functions = _satellite.getVar(\"TMG Functions\");\n\nDCgtagSrc = \"https://www.googletagmanager.com/gtag/js?id=DC-10936650&l=DCDataLayer\";\n\ntmgFunctions.htmlBuilder(DCgtagSrc, \"script\");\n\nwindow.DCdataLayer = window.DCdataLayer || [];\nfunction gtag(){DCdataLayer.push(arguments);}\ngtag('js', new Date());\n\ngtag('config', 'DC-10936650');\n\nif(new RegExp(/customer\\/subscribe\\/edition\\-app/).test(document.location.href)){\n\n\tgtag('event', 'conversion', {\n\t\t'allow_custom_scripts': true,\n\t\t'send_to': 'DC-10936650/subsc0/subsc0+standard'\n\t});\n    console.log(\"after DC-10936650 sent\");\n\n}",language:"javascript"}}]},{id:"RLd8b690e8ddfd478493cf7472fde5bedf",name:"ANALYTICS: Chartbeat [1.9]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1a7072be752f45e9b21f3e68b6a9fa0c-source.min.js",language:"html",isExternal:!0}}]},{id:"RL85fe9a102ebe4807a9384472a55b79d1",name:"TMG Travel GPC tracking Pixels",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"Top-10-family-friendly-hotels-cornwall",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'if(!(new RegExp(/secure\\.telegraph\\.co\\.uk|www\\.telegraph\\.co\\.uk\\/customer\\/subscribe/).test(window.location.pathname))){\n\ntmgFunctions = _satellite.getVar("TMG Functions");\n\nGPCPixel1Src = \'https://p1.zemanta.com/p/2079/3211/\';\nGPCPixel2Src = \'https://secure.adnxs.com/px?id=1055675&t=2\';\n\ntmgFunctions.htmlBuilder(GPCPixel1Src, "img");\ntmgFunctions.htmlBuilder(GPCPixel2Src, "img");\n  \n}',language:"javascript"}}]},{id:"RL2f5050c2b5074c6e90747de0d4fd9c2b",name:"ADTECH: AdBlock check",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCc138c3393f56415ebf739ba7b8ecca91-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4d033b87526148edb6b176ffcc339744",name:"TMG Embedded forms",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC235c587e7e0842c4b252be5e0ea0ea5b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL1ae10d956aa04de1a111d04bd92a1200",name:"TMG Escorted Tours Collection Clicks",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'.list-of-entities__item-link a[href*="/travel/destinations/"][href$="-tours"]',bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"\\/travel\\/destinations\\/",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event81"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL6690e7fa391c44d1b4da57ac2b7e90ff",name:"Expedia Integration (Page)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){generateExpediaTransactionID=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return"expedia-"+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&15|64]+e[a>>24&255]+e[63&r|128]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]},t._eventexID=generateExpediaTransactionID(),t.eVar159=t._eventexID}}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"try {\n\tvar updateExLinks = function() {\n\t\tif (typeof s != 'undefined' && typeof s._eventexID != 'undefined') {\n\t\t\tvar eventLinks = document.querySelectorAll('a[href*=\"prf.hn/click\"]');\n\t\t\tfor (var i = 0; i < eventLinks.length; i++) {\n\t\t\t\tvar oldHref = eventLinks[i].getAttribute('href');\n\t\t\t\tif(new RegExp(\"TELEGRAPH_REF\").test(oldHref))\n\t\t\t\t{\n\t\t\n\t\t\t\t\toldHref = oldHref.replace(\"TELEGRAPH_REF\", s._eventexID);\n\t\t\t\t\teventLinks[i].setAttribute('href', oldHref);\n\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tsetTimeout(updateExLinks, 2000);\n} catch (e) {}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"document.addEventListener(\"DOMContentLoaded\", function(event) {\n  if (typeof s != 'undefined' && typeof s._eventexID != 'undefined') {\n    try {\n\t\tvar eventLinks = document.querySelectorAll('a[href*=\"prf.hn/click\"]');\n\t\tfor (var i = 0; i < eventLinks.length; i++) {\n\t\t\tvar oldHref = eventLinks[i].getAttribute('href');\n\t\t\tif(new RegExp(\"TELEGRAPH_REF\").test(oldHref))\n\t\t\t{\n\t\t\n\t\t\t\toldHref = oldHref.replace(\"TELEGRAPH_REF\", s._eventexID);\n\t\t\t\teventLinks[i].setAttribute('href', oldHref);\n\t\t\t\n\t\t\t}\n\t\t}\n    } catch (e) {}\n  }\n});",language:"javascript"}}]},{id:"RL79b7fa8790604ee3947418c28dc9078e",name:"TMG Subscription Payment Page",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/secure/payment/",valueIsRegex:!0}]}}],actions:[]},{id:"RLd2645dea16e041df91bf6cdec3447f2a",name:"TMG In-Article Registrations",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/registrationComplete/).test(dataLayer.event))return!0}}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/\:\/\/secure\.telegraph\.co\.uk\//).test(window.location.href))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("registration triggered: in-article"),_satellite.getVar("TMG Last Article Info"),t.eVar31=dataLayer.registration.registrationType,t.eVar32=dataLayer.registration.emailOptIn,t.events="event22",t.linkTrackEvents="event22",t.eVar9=_satellite.getVar("TMG Cookie customerID"),"undefined"!=typeof obApi&&obApi("track","Event Registration"),adobe.target.trackEvent({mbox:"tmg.registrationComplete"}),_functions.getCookie("artTags")&&(tags=_functions.getCookie("artTags"),tags=tags.replace(/,/g,";"),t.list2=tags),t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"In-article Registration",linkType:"o"}}]},{id:"RL45525836bbe440aaa20851a99824846a",name:"ANALYTICS: Outbrain [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"telegraph.co.uk/financial-services/(.*)",valueIsRegex:!0}]},negate:!0}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC22c7f2e6babe4dacb78107e8ec1d6721-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL66de28bd4ae64163bc1c3592f23f8c77",name:"ADTECH: Misc",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC7bf4957febde4e2bb2c19a02a6bf77b0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLbd9d96cd513447cda5e0fd5ad28e23c4",name:"TMG Regwall Shown",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%TMG regwallDisplayed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{trackerProperties:{events:[{name:"event23"}]}}}]},{id:"RLa30d5b964e9e4a0698032f7b8f56ba48",name:"TMG Fetch Premium Marketing Codes",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"tmgFunctions = _satellite.getVar(\"TMG Functions\");\nvar tags = {\n    'premium_product_pages': {\n        'cat': 'premi0',\n        'id': '6260248',\n        'type': 'premi0'\n    },\n    'premium_paywall': {\n        'cat': 'premi0',\n        'id': '6260248',\n        'type': 'premi00'\n    },\n    'premium_checkout': {\n        'cat': 'premi0',\n        'id': '6260248',\n        'type': 'premi001'\n    },\n    'premium_checkout_freetrial3': {\n        'cat': 'fs-fi0',\n        'id': '6260248',\n        'type': 'fs-nb0'\n    },\n    'premium_registration_complete': {\n        'cat': 'premi0',\n        'id': '6260248',\n        'type': 'premi000'\n    }\n};\n\nvar fireTag = function(tagName, tags) {\n    iframeSrc = '//' + tags[tagName].id + '.fls.doubleclick.net/activityi;src=' + tags[tagName].id + ';type=' + tags[tagName].type + ';cat=' + tags[tagName].cat + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + String(Math.random()).slice(2) + '?';\n    tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n};\n\nvar events = typeof dataLayer != 'undefined' && dataLayer.event || [];\nif (events.length > 0) {\n    //for (var i = 0; i < events.length; i++) {\n        //switch (events[i]) {\n            //case 'registrationComplete':\n                //fireTag('premium_registration_complete', tags);\n                //break;\n            //case 'subscriptionCheckout':\n                //if (window.location.href.indexOf(\"productId=nyytq4zthbvwsoliojugwyzzmyzha3dt&campaignId=460X&offerId=freetrial3-website-monthly-ZG340\") > -1){\n                    //fireTag('premium_checkout_freetrial3', tags);\n                //} else {\n                    //if(!(new RegExp(/secure\\/payment\\/\\?productId\\=mj2wc5lmmvygc4rumzsgu4lcnuzw6ndl\\&offerId\\=dayPassAB\\-day\\-BE850/).test(window.location.href) || new RegExp(/secure\\/payment\\/\\?productId\\=nzzhaz3eni4xc3jqmzzwu2zrn44xa4dd\\&offerId\\=sport\\-annual\\-LP715/).test(window.location.href) || new RegExp(/secure\\/payment\\/\\?productId\\=nzzhaz3eni4xc3jqmzzwu2zrn44xa4dd\\&offerId\\=freetrial1\\-sports\\-monthly\\-AV546/).test(window.location.href) || new RegExp(/secure\\/payment\\/\\?productId\\=nyytq4zthbvwsoliojugwyzzmyzha3dt\\&offerId\\=website\\-annual\\-KD127\\-Amazon50/).test(window.location.href) || new RegExp(/secure\\/payment\\/\\?productId\\=nyytq4zthbvwsoliojugwyzzmyzha3dt\\&offerId\\=freetrial1\\-website\\-monthly\\-UR257/).test(window.location.href) || new RegExp(/secure\\/payment\\/\\?productId\\=gqzwqmbugyzwoojvgr2xentqmnug4zjt\\&offerId\\=daypass\\-day\\-AM672/).test(window.location.href))){\n                        //fireTag('premium_checkout', tags);\n                   // }\n                //}\n                //break;\n           // case 'subscriptionConfirmation':\n               // iframeSrc = '//6260248.fls.doubleclick.net/activityi;src=6260248;type=premi002;cat=premi0;qty=1;cost=[Revenue];order=[OrderID];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + String(Math.random()).slice(2) + '?';\n                //tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n               // break;\n        //}\n   // }\n} else if (/\\/premium\\/product\\/|\\/premium\\/digital-editions\\/|\\/subscriptions\\/sub-bar\\//.test(document.location.pathname)) {\n    fireTag('premium_product_pages', tags);\n} else if (_satellite.getVar('TMG paywallDisplayed') == 'true') {\n    fireTag('premium_paywall', tags);\n}",language:"javascript"}}]},{id:"RL8ac3743c16da478ba51e3d98ca685450",name:"TMG MyTelegraph Pageview",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){new RegExp(/\/mytelegraph/).test(window.location.pathname)&&(t.eVar7="mytelegraph",t.eVar15="mytelegraph",(new RegExp(/\/mytelegraph\/$/).test(window.location.pathname)||new RegExp(/\/mytelegraph\/saved/).test(window.location.pathname))&&(t.eVar7="index"))}}}}]},{id:"RL483dbc66b6ec45dc9fa1e809dfd9cec0",name:"TMG Newsletter Tracking",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/newsletterSignup/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("new newsletter tracking has been triggered57657576"),t.events="",t.linkTrackEvents="",t.prop27=dataLayer.newsLetterType,t.list1=dataLayer.newsLetterType,void 0!==t.prop27&&""!=t.prop27||(t.prop27=dataLayer.newsletterType),t.events="event14",console.log("first events check: "+t.events),dataLayer.event="",t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),console.log("second events check: "+t.events);function n(e,t){adobe.target.trackEvent({mbox:"martechNewsletterSignUp",params:{orderId:Date.now().toString(),orderTotal:0,productPurchasedId:e,"entity.id":e,"entity.categoryId":t,"entity.name":e,"entity.conversionType":"newslettersignup","entity.channel":!1,"entity.businessSegment":!1,"entity.keywords":!1,"entity.pageType":!1,"entity.pageURL":!1,"entity.thumbnailURL":!1,"entity.premiumContent":!1,"entity.publishedRangeOneDay":!1,"entity.publishedRangeTwoDays":!1,"entity.publishedRangeOneWeek":!1,"entity.publishedRangeNineDays":!1,"entity.firstPublished":!1,"entity.author":!1,"entity.comment":!1,"entity.commentsEnabled":!1,"entity.authorImageSrc":!1}})}"martechArticleUnit"!==dataLayer.newsletterSource&&("Citydesk_NL"===t.prop27||"Investor_NL"===t.prop27||"Personal_Finance_NL"===t.prop27||"Property_NL"===t.prop27||"EconomicIntel_NL"===t.prop27||"CityIntel_NL"===t.prop27?n(t.prop27,"business,money,property,investing"):"BreakingNews_NL"===t.prop27||"PoliticsFrontBench_NL"===t.prop27||"TheRefresher_NL"===t.prop27||"Politics_NL"===t.prop27||"USElection_NL"===t.prop27?n(t.prop27,"politics"):"RugbyInsider_NL"===t.prop27||"RugbyGeech_NL"===t.prop27||"RugbyNerd_NL"===t.prop27?n(t.prop27,"rugby-union,rugby-league,rugby-world-cup,rugby-sevens"):"ArsenalFC_NL"===t.prop27||"ChelseaFC_NL"===t.prop27||"ManUtdFC_NL"===t.prop27||"LiverpoolFC_NL"===t.prop27||"Football_NL"===t.prop27?n(t.prop27,"football"):"PREMIUM_SPORTS_NL"!==t.prop27&&"Marathon_NL"!==t.prop27||n(t.prop27,"sport,womens sport,womens-sport,athletics,cycling,swimming,olympics,gymnastics,usain-bolt-worlds-fastest-man,paralympic-sport"))}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Newsletter Tracking",linkType:"o"}}]},{id:"RL9bd0d790a73649f184d719dc3a21c406",name:"TMG Guides Pages SPA Pageview",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"TMG DL rollupContentPath"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!(!new RegExp(/telegraph\.co\.uk\/guides\//).test(window.location.href)||!typeof dataLayer.pgvCheck||""==dataLayer.pbvCheck)||!(dataLayer.pbvCheck="1")}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar1=window.location.href,t.eVar2=dataLayer.rollupContentPath,t.eVar3=dataLayer.premiumPage,t.eVar15=dataLayer.channel,t.prop1="D=v1",t.prop9="D=v3",t.prop35="D=v2",void 0!==dataLayer.premiumPage&&(premiumPage="",0==dataLayer.premiumPage||1==dataLayer.premiumPage&&(t.eVar39="D=pageName",t.eVar73="D=pageName",t.eVar93="D=pageName")),void 0!==dataLayer.payWall&&(console.log("paywall check start: "+dataLayer.payWall),paywallStatus="",1==dataLayer.payWall?(paywallStatus="true",t.events="event43"):0==dataLayer.payWall&&(paywallStatus="false"),t.eVar43=paywallStatus),pgvCheck="1",new RegExp(/^\/guide/).test(window.location.pathname)&&(t.eVar139="true"==_satellite.getVar("TMG Article Content")?"D=pageName":"",t.eVar168="guides",t.eVar170=dataLayer.premiumPage)}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL64f628cd0cbe4b09aa5b97079826c8c4",name:"TMG Marketing Codes - premium.telegraph.co.uk",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!!new RegExp(/premium\.telegraph\.co\.uk/).test(window.location.href)}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC229c6206ccd14701a12d81a8420fd74e-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC8ae52b3ac338480ebe7585bde76df2b4-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCc765091723b84417b0ddaaba2c250a44-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC2ca9266292084247a65f8a9e0be36976-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCae65727ab8cf4a9fa106d52d20c125a4-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC25696f5c91c2440b9077c590eda79595-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCf09048452eab4675a36230002e9cae74-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCaa8a909564f949f386869a2270149c37-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC6c603b6a458948bd9b1d01d78afb82cb-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC50d4c215406049d2a5cb6524a75067d4-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdeae609a2d05499d85b79eb32992386a",name:" ANALYTICS: Facebook-paywall [1.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCa62cf262b42847da80a8bed0c49701f3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL6b8f9104b098492f9eb28b39b0b4ad27",name:"Eventbrite Integration (Page)",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){generateEventbTransactionID=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return"eventbrite-"+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&15|64]+e[a>>24&255]+e[63&r|128]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]},t._eventbID=generateEventbTransactionID(),t.eVar152=t._eventbID}}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"//s._eventbID = _satellite.getVar('TMG Eventbrite ID');\ntry {\n  var updateELinks = function() {\n    if (typeof s != 'undefined' && typeof s._eventbID != 'undefined') {\n      var eventLinks = document.querySelectorAll('a[href*=\"eventbrite.co\"]');\n      for (var i = 0; i < eventLinks.length; i++) {\n        var oldHref = eventLinks[i].getAttribute('href');\n        if (new RegExp(\"\\\\?\").test(oldHref)) {\n\t\t\tif(new RegExp(\"aff=\").test(oldHref))\n\t\t\t{\n\t\t\t\teventLinks[i].setAttribute('href', oldHref.replace(/(aff=.*);?/, 'aff=' + s._eventbID));\n\t\t\t}\n\t\t\telse{\n\t\t\t\teventLinks[i].setAttribute('href', oldHref+\"&aff=\"+s._eventbID);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\teventLinks[i].setAttribute('href', oldHref+\"?aff=\"+s._eventbID);\n\t\t}\n      }\n    }\n  };\n  setTimeout(updateELinks, 2000);\n} catch (e) {}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"//s._eventbID = _satellite.getVar('TMG Eventbrite ID');\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  if (typeof s != 'undefined' && typeof s._eventbID != 'undefined') {\n    try {\n      var eventLinks = document.querySelectorAll('a[href*=\"eventbrite.co\"]');\n      for (var i = 0; i < eventLinks.length; i++) {\n        var oldHref = eventLinks[i].getAttribute('href');\n\t\tif (new RegExp(\"\\\\?\").test(oldHref)) {\n\t\t\tif(new RegExp(\"aff=\").test(oldHref))\n\t\t\t{\n\t\t\t\teventLinks[i].setAttribute('href', oldHref.replace(/(aff=.*);?/, 'aff=' + s._eventbID));\n\t\t\t}\n\t\t\telse{\n\t\t\t\teventLinks[i].setAttribute('href', oldHref+\"&aff=\"+s._eventbID);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\teventLinks[i].setAttribute('href', oldHref+\"?aff=\"+s._eventbID);\n\t\t}\n      }\n    } catch (e) {}\n  }\n});",language:"javascript"}}]},{id:"RLdc2101d9fbc0404b8c3a356afd9e6938",name:"3rd Party: Maxmiles Subscription",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/subscriptionConfirmation/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"function clear_reports_ConversionTag_59_14220() {\n    tmgPID = _satellite.getVar('TMG Cookie customerID');\n    var wgti = tmgPID;\n    var wgtv = \"\";\n    \n    var cr_cid = 0;\n    var tp_cid = '';\n    var params = window.location.search.substring(1).split('&');\n    for (var i=0; i<params.length; i++) {\n\tvar pair = params[i].split('=');\n\tif ((pair[0] == 'cr_cid') && pair[1]) { cr_cid = parseInt(pair[1]); }\n\telse if ((pair[0] == 'gclid') && pair[1]) { tp_cid = pair[1]; }\n    }\n    var ca = document.cookie.split(';');\n    for (var j=0; j<ca.length; j++) {\n\tvar c = ca[j].trim().split('=');\n\tif (!cr_cid && (c[0] == 'cr___cid')) { cr_cid = c[1]; }\n\telse if (!tp_cid && (c[0] == 'cr___tpcid')) { tp_cid = c[1]; }\n    }\n    var tag = document.createElement('script');\n    tag.type = 'text/javascript';\n    tag.src = 'https://www.clear-reports.com/track/conversion.php?wgi=14220&wgc=127396418dac1e48c8a6d1f6adac073c&pci=' + parseInt(cr_cid) + '&tpci=' + encodeURIComponent(tp_cid) + '&ht=1&cachebuster=' + Date.now() + '&wgtv=' + wgtv + '&wgti=' + wgti;\n    document.body.appendChild(tag);\n}\n\nvar events = typeof dataLayer != 'undefined' && dataLayer.event || [];\nif (events.length > 0) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tswitch (events[i]) {\n            case 'subscriptionConfirmation':\n              clear_reports_ConversionTag_59_14220();\n              break;\n        }\n    }\n}",language:"javascript"}}]},{id:"RL9e5b0bb75581424a8c2722eaff9919f1",name:"TMG Set Offer ID",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("new offerID code2222"),t.eVar222=_satellite.getVar("TMG Subscription Offer ID")}},trackerProperties:{}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'var offerID = _satellite.getVar("TMG Subscription Offer ID");\n\nif(typeof offerID != "undefined" && offerID != ""){\n\n\tdocument.cookie = "tmgOfferId="+offerID+";domain=.telegraph.co.uk;path=/;expires=;";\n\n}',language:"javascript"}}]},{id:"RL2a59b73fbac04bad9455e154854c04fc",name:"ANALYTICS: LiftIgniter [1.9]",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"articleRenderer2"===tmg.page.getPageType()}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"(function () {\n  var excludedSites = ['sponsored'];\n  getMetaTag = function(tagname){\n    if(document.querySelector('meta[name\\x3d\"'+tagname+'\"]')){\n      return document.querySelector('meta[name\\x3d\"'+tagname+'\"]').getAttribute(\"content\") || 'unknown';\n    } else {\n      return 'unknown';\n    }\n  };\n  if(excludedSites.indexOf(getMetaTag('tmgads.businessSegment')) === -1){\n    tmg.pubsub.subscribe({\n      topic : 'tmg.page.ready',\n      func  : function(){\n        tmg.pubsub.subscribe({\n        topic : 'tmg.cmp.onConsentReady',\n        func  : function(){\n          function truncate(string, maxLength) {\n            if (string.length <= maxLength) return string;\n            return string.slice(0, maxLength - 2).replace(/[^\\w\\s]?\\s[^\\s]*$/, '') + '...';\n          }\n          // ------------------------------------------------------------------------ //\n          // RecommendedList widget\n          function RecommendedList(element) {\n            this.element = element;\n          }\n\n          RecommendedList.selector = {\n            ROOT: '#li-recommendation-widget',\n            WIDGETNAME: 'li-recommendation-widget'\n          };\n\n          RecommendedList.prototype.init = function () {\n            if (this.element) {\n              liftigniter('register', {\n                max: 5,\n                widget: RecommendedList.selector.WIDGETNAME,\n                callback: this.onRequestSuccess.bind(this)\n              });\n            }\n          };\n\n          RecommendedList.prototype.onRequestSuccess = function (response) {\n            var data = response;\n            data.widgetTitle = this.element.dataset.title || '';\n            data.items.forEach(function (item) {\n              item.truncatedTitle = truncate(item.title, 100);\n            });\n            this.render(data);\n            liftigniter('track', {\n              elements: this.element.querySelectorAll('.recommended-articles__item'),\n              name: RecommendedList.selector.WIDGETNAME,\n              source: 'LI',\n              opts: {},\n              _debug : false\n            });\n          };\n\n          RecommendedList.prototype.render = function (data) {\n            var template = '<div class=\"recommended-articles\">' +\n              '<h3 class=\"recommended-articles__title\">{{widgetTitle}}</h3>' +\n              '<ol class=\"recommended-articles__items\">' +\n              '{{#items}}' +\n              '<li class=\"recommended-articles__item\">' +\n              '<a class=\"recommended-articles__item-link\" href=\"{{url}}\">{{truncatedTitle}}</a>' +\n              '</li>' +\n              '{{/items}}' +\n              '</ol>' +\n              '</div>';\n            this.element.innerHTML = liftigniter('render', template, data);\n          };\n\n          // Initialise RecommendedList widget\n          var rlElements = document.querySelectorAll(RecommendedList.selector.ROOT);\n          var rlArray = Array.prototype.slice.call(rlElements);\n          rlArray.forEach(function (element) {\n            var widget = new RecommendedList(element);\n            widget.init();\n          });\n\n          // Fetch has been moved to the botton because it needs to be called once\n          // all widget are registered (multiple widgets case) otherwise\n          // only the first one will be rendered.\n          liftigniter('fetch');\n        },\n        runIfAlreadyPublished: true\n        });\n      },\n      runIfAlreadyPublished: true\n    });\n  } else {\n    console.log('ANALYTICS:LAUNCH: LiftIgniter - site excluded');\n  }\n})();",language:"javascript"}}]},{id:"RLf6a75de793fd409289f35206796d9268",name:"TMG MyTelegraph Preferences Update",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/mytelegraph",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/update-preferences/).test(dataLayer.events))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){function n(e){return cAuthors="","authors"==e?cAuthors=dataLayer.authors:"unfollowedAuthors"==e&&(cAuthors=dataLayer.unfollowedAuthors),cAuthors=cAuthors.replace(/\/authors\//g,""),cAuthors=cAuthors.replace(/\//g,""),cAuthors}function a(e){""!=t.events&&void 0!==t.events?t.events=t.events+","+e:t.events=e}t.eVar156="preferences page",t.events="",t.events="";var r,i;t.list3="";_satellite.getVar("TMG MyT DL Event"),""!=dataLayer.authors&&void 0!==dataLayer.authors&&(r=n("authors"),t.list3=r,a("event138")),""!=dataLayer.unfollowedAuthors&&void 0!==dataLayer.unfollowedAuthors&&(i=n("unfollowedAuthors"),t.list3=i,a("event139")),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),dataLayer.events=""}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL1ca3625cd65d4254a998294a3d490cd0",name:"TMG Subscription Form Tracking",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/fieldClick|formError/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("form tracking triggered");var n={fieldClick:"event208",formError:"event209"},a=_satellite.getVar("TMG DL event");for(i=0;a.length>i;i++)for(e in n)if(a[i]==e)switch(console.log("event: "+e),cMap=n[a[i]],console.log("events: "+cMap),t.events=n[a[i]],t.linkTrackEvents=n[a[i]],a[i]){case"fieldClick":t.eVar213=dataLayer.fieldName;break;case"formError":t.eVar213=dataLayer.fieldName,t.eVar214=dataLayer.errorType,t.eVar99=dataLayer.paymentError}t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),dataLayer.event="",dataLayer.fieldName="",dataLayer.errorType=""}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Formfield Tracking",linkType:"o"}}]},{id:"RLe1ec569fcf3f439fa7ec578fdc8ebe5b",name:"TMG MyTelegraph Page View",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"TMG DL pageName"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/mytelegraph",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.list3="",t.eVar1=window.location.href,t.prop1=window.location.href,t.events=void 0,t.list2=_satellite.getVar("TMG Meta Keywords").replace(/(?:\r\n|\r|\n|\t)/g," ").replace(/,/g,";");try{var n=Date.now(),a=_satellite.readCookie("_topp");void 0===a||"number"==typeof(u=Math.round((n-a)/1e3))&&(t.events=void 0===t.events?"event18="+u:t.events+",event18="+u),_satellite.cookie.set("_topp",n,.020833)}catch(e){}_satellite.getVar("TMG Meta Channel");var r=_satellite.getVar("TMG Meta Category"),o=_satellite.getVar("TMG Meta Genre"),s=(_satellite.getVar("TMG Meta MLC"),_satellite.getVar("TMG utmSource")),c=_satellite.getVar("TMG utmMedium"),a=_satellite.getVar("TMG utmCampaign"),l=_satellite.getVar("TMG Meta Business Segment"),u=_satellite.getVar("TMG DL rollupContentPath"),n=_satellite.getVar("TMG DL pageID");t.prop7=document.querySelector('link[href*="/etc/design"][type="text/css"]')?"AEM":"Other",t.eVar15="mytelegraph",t.eVar7="mytelegraph",(new RegExp(/\/mytelegraph\/$/).test(window.location.pathname)||new RegExp(/\/mytelegraph\/saved/).test(window.location.pathname))&&(t.eVar7="index"),t.eVar22=s&&c&&a?s+";"+c+";"+a:"",t.eVar110="undefined"!=typeof dataLayer&&dataLayer.videoEmbedCount?dataLayer.videoEmbedCount:"";var d,p=_satellite.getVar("TMG businessSegmentMapping");for(d in p)new RegExp(d).test(l)&&(l=p[d]);-1!=window.location.hash.indexOf("source=refresh")&&(t.events=void 0===t.events?"event7":t.events+",event7"),n&&(t.events=void 0===t.events?"event17:"+n:t.events+",event17:"+n),"register.moneytransfer.telegraph.co.uk"==window.location.host&&"/"==window.location.pathname&&(t.events=void 0===t.events?"event100":t.events+",event100"),t.eVar3=_satellite.getVar("TMG DL premiumContent")?_satellite.getVar("TMG DL premiumContent"):"false",t.eVar33=_satellite.getVar("TMG Meta premiumContentOnFirstPublish")?_satellite.getVar("TMG Meta premiumContentOnFirstPublish"):"false",t.eVar35=_satellite.getVar("TMG DL premiumOverride")?_satellite.getVar("TMG DL premiumOverride"):"false",t.pageName=u||window.location.pathname.replace(/\/$/,""),t.channel=l||t.eVar15,t.hier1=t.eVar15+";"+r+";"+o,t.referrer=/https?:\/\/tgr\.ph\//.test(document.referrer)?"https://www.facebook.com/":t.referrer,t.eVar106="aem - Launch",t.eVar39="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",t.eVar73="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",t.eVar93="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"";var f={"onboarding-topics":"event131","onboarding-authors":"event132","onboarding-complete":"event133","onboarding-skipped":"event134"};for(mytevents=dataLayer.events,i=0;i<mytevents.length;i++)for(e in f)mytevents[i]==e&&(t.events=void 0===t.events?f[e]:t.events+","+f[e],"onboarding-complete"==mytevents[i]&&(t.eVar156="onboarding",authors=_satellite.getVar("TMG Followed Authors"),topics,""!=authors&&"undefined"!=typeof authors&&(t.events=t.events+",event138"),t.list3=authors));t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{eVars:[{name:"eVar2",type:"value",value:"D=pageName"},{name:"eVar9",type:"value",value:"%TMG Cookie customerID%"},{name:"eVar11",type:"value",value:"%TMG Meta Article Publish Date%"},{name:"eVar17",type:"value",value:"%TMG Responsive Site Viewports%"},{name:"eVar18",type:"value",value:"%TMG Meta MLC%"},{name:"eVar20",type:"value",value:"%TMG galleryImageNo%"},{name:"eVar21",type:"value",value:"%TMG Meta Business Segment%"},{name:"eVar26",type:"value",value:"%TMG DL storyType%"},{name:"eVar27",type:"value",value:"%TMG emailType%"},{name:"eVar29",type:"value",value:"%TMG DL pageID%"},{name:"eVar38",type:"value",value:"%TMG Meta Author%"},{name:"eVar43",type:"value",value:"%TMG paywallDisplayed%"},{name:"eVar44",type:"value",value:"%TMG Meta Spark CampaignID%"},{name:"eVar45",type:"value",value:"%TMG campaignLive%"},{name:"eVar49",type:"value",value:"%TMG DL flakeID%"},{name:"eVar53",type:"value",value:"%TMG Meta Spark Sponsor%"},{name:"eVar59",type:"value",value:"%TMG videoPlaylist%"},{name:"eVar91",type:"value",value:"%TMG DL pageType%"},{name:"eVar111",type:"value",value:"%TMG timeSincePublish%"},{name:"eVar112",type:"value",value:"%TMG Meta Article Publish Time%"},{name:"eVar118",type:"value",value:"%TMG regwallDisplayed%"},{name:"eVar141",type:"value",value:"%TMG icid%"},{name:"eVar155",type:"value",value:"%TMG Local Date%"}],props:[{name:"prop2",type:"value",value:"%TMG articleTitle%"},{name:"prop3",type:"value",value:"D=v7"},{name:"prop4",type:"value",value:"%TMG referrerStripped%"},{name:"prop5",type:"value",value:"D=pageName"},{name:"prop6",type:"value",value:"%TMG domain%"},{name:"prop9",type:"value",value:"D=v3"},{name:"prop10",type:"value",value:"D=v26"},{name:"prop11",type:"value",value:"D=v11"},{name:"prop15",type:"value",value:"D=v15"},{name:"prop17",type:"value",value:"D=v17"},{name:"prop18",type:"value",value:"D=v18"},{name:"prop21",type:"value",value:"D=v21"},{name:"prop22",type:"value",value:"D=v22"},{name:"prop23",type:"value",value:"D=v29"},{name:"prop26",type:"value",value:"D=v27"},{name:"prop29",type:"alias",value:"eVar9"},{name:"prop35",type:"value",value:"D=v93"},{name:"prop43",type:"value",value:"D=v43"},{name:"prop44",type:"value",value:"D=v44"},{name:"prop45",type:"value",value:"D=v45"},{name:"prop46",type:"value",value:"D=v155"},{name:"prop53",type:"value",value:"D=v53"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RL0fc30bdc6a414541b0b469791a84b1b8",name:"TMG Travel Pages",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["telegraph.co.uk"]}},{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"travel\\/",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=_satellite.getVar("TMG Travel Package");t.eVar127="package"==n?"true":"false"}}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCc287cc93410b42dc84ca7049731f202a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd85086b575ac49ca9ec2150f4653f048",name:"TMG Load More Button",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".js-load-more__button",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event13"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RLa8ef5efe7c2f4addb2bad6820a366a86",name:"TMG Guide Pages",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/telegraph\.co\.uk\/guides\//).test(window.location.href))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar3=dataLayer.premiumPage,t.eVar15=dataLayer.channel,t.prop9="D=v3"}},trackerProperties:{}}}]},{id:"RLb6c52a9aeed448a19d0afdd84e43064c",name:"TMG Cookie Banner Events",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/cmpDisplayPrivacyBanner|cmpUserAcceptsSome|cmpUserAcceptsAll|cmpUserDeclines|cmpUserClickManage/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("COOKIE BANNER EVENTS"),t.events="",t.linkTrackEvents="";for(var n=_satellite.getVar("TMG DL event"),a=(_satellite.getVar("TMG Functions"),0);a<n.length;a++)switch(n[a]){case"cmpDisplayPrivacyBanner":t.events="event231",t.linkTrackEvents="event231";break;case"cmpUserAcceptsSome":t.events="event234",t.linkTrackEvents="event234";break;case"cmpUserAcceptsAll":t.events="event232",t.linkTrackEvents="event232";break;case"cmpUserDeclines":t.events="event233",t.linkTrackEvents="event233";break;case"cmpUserClickManage":t.events="event235",t.linkTrackEvents="event235"}t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),t.prop33=""}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Cookie Banner",linkType:"o"}}]},{id:"RLc35a36ef0ba145c0aa9c33b3cdca7cd3",name:"My Account SPA",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/customer\/secure/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"function spaPageview(){\n\n\ts.eVar1 = window.location.href\n\ts.eVar2 = window.location.pathname;\n\t\t\n\ts.t();\n\n}\n\ntmg.pubsub.subscribe({\n\ttopic : 'tmg.customerApp.accountHome.pageReady',\n\tfunc  : spaPageview,\n\trunIfAlreadyPublished: true\n});\n\ntmg.pubsub.subscribe({\n\ttopic : 'tmg.customerApp.accountPersonal.pageReady',\n\tfunc  : spaPageview,\n\trunIfAlreadyPublished: true\n});\n\ntmg.pubsub.subscribe({\n\ttopic : 'tmg.customerApp.accountSubscriptions.pageReady',\n\tfunc  : spaPageview,\n\trunIfAlreadyPublished: true\n});\n\ntmg.pubsub.subscribe({\n\ttopic : 'tmg.customerApp.accountNewsletters.pageReady',\n\tfunc  : spaPageview,\n\trunIfAlreadyPublished: true\n});",language:"javascript"}}]},{id:"RL64216dec190f46c8b21cfb5deab0362a",name:"ANALYTICS: Travel Kissmetrics [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC0e837c2e8e5744eba1be15ebe9c787b5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL457e5019470d43a7b96b6b948f0b9b76",name:"TMG Target Temp Dimensions and Metrics",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/onwardjourney/).test(window.location.href)&&new RegExp(/[iI][cC][iI][dD]/).test(window.location.href))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{trackerProperties:{events:[{name:"event255"}]}}}]},{id:"RLb7d3cc32c45442e1a3b7c48430523cee",name:"TMG 404 Pages (Page)",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%TMG Meta MLC%",rightOperand:"error|404"}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!!dataLayer.pageName.includes("404")}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.pageName=window.location.pathname.replace(/\/$/,""),t.pageType="errorPage"}},trackerProperties:{events:[{name:"event2"}]}}}]},{id:"RLe0bf74563f354f068ddc09b0f89f01bc",name:"WEBTEAM: MyTelegraph [1.1]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"chase.telegraph.co.uk",valueIsRegex:!0}]},negate:!0},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"telegraph.co.uk/secure",valueIsRegex:!0}]},negate:!0},{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"telegraph.co.uk/contact-us",valueIsRegex:!0}]},negate:!0}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1eef8e1ea0784eeab2c8cde9d3bcb1bc-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe785be15e1404b32aedb076669ffe792",name:"TMG Contributors Page",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){qID=_satellite.getVar("TMG Contributors Member ID Cookie"),""!=qID&&"undefined"!=typeof qID&&(t.eVar198=qID)}}}}]},{id:"RL8b8e380ea19d432f9973b0d596088118",name:"TMG Fetch Travel Marketing Codes",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"^\\/travel",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"tmgFunctions = _satellite.getVar(\"TMG Functions\");\nvar pathname = document.location.pathname;\nvar contentType = _satellite.getVar('TMG Meta Content Type');\nvar pageType = typeof dataLayer != 'undefined' ? dataLayer.pageType : '';\n\nvar tags = {\n    'travel_city_breaks_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave004'\n    },\n    'travel_dynamic_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave000'\n    },\n    'travel_escorted_tours_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave001'\n    },\n    'travel_escorted_tours_tour_article': {\n        'cat': 'trave001',\n        'id': '6260248',\n        'type': 'trave001'\n    },\n    'travel_escorted_tours_tour_list_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave001'\n    },\n    'travel_escorted_tours_tour_review_page': {\n        'cat': 'trave000',\n        'id': '6260248',\n        'type': 'trave001'\n    },\n    'travel_exclusive_offers_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave00'\n    },\n    'travel_exclusive_offers_hotel_review_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave00'\n    },\n    'travel_holidays_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave003'\n    },\n    'travel_holidays_holiday_list_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave003'\n    },\n    'travel_holidays_holiday_review_page': {\n        'cat': 'trave000',\n        'id': '6260248',\n        'type': 'trave003'\n    },\n    'travel_hotel_article': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave0'\n    },\n    'travel_hotel_review_page': {\n        'cat': 'trave000',\n        'id': '6260248',\n        'type': 'trave0'\n    },\n    'travel_hotels_list_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave0'\n    },\n    'travel_ocean_cruise_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave005'\n    },\n    'travel_ocean_cruise_cruise_article': {\n        'cat': 'trave001',\n        'id': '6260248',\n        'type': 'trave005'\n    },\n    'travel_ocean_cruise_cruise_list_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave005'\n    },\n    'travel_ocean_cruise_review_page': {\n        'cat': 'trave000',\n        'id': '6260248',\n        'type': 'trave005'\n    },\n    'travel_river_cruise_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave006'\n    },\n    'travel_river_cruise_cruise_article': {\n        'cat': 'trave001',\n        'id': '6260248',\n        'type': 'trave006'\n    },\n    'travel_river_cruise_cruise_list_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave006'\n    },\n    'travel_river_cruise_review_page': {\n        'cat': 'trave000',\n        'id': '6260248',\n        'type': 'trave006'\n    },\n    'travel_telegraph_tour_category_page': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave002'\n    },\n    'travel_telegraph_tour_tour_review_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave002'\n    },\n    'travel_hotels_category_page': {\n        'cat': 'trave001',\n        'id': '6260248',\n        'type': 'trave0'\n    },\n    'travel_city_breaks_holiday_list_page': {\n        'cat': 'trave00',\n        'id': '6260248',\n        'type': 'trave004'\n    },\n    'travel_telegraph_tours_tour_article': {\n        'cat': 'trave000',\n        'id': '6260248',\n        'type': 'trave002'\n    },\n    'travel_awards': {\n        'cat': 'trave0',\n        'id': '6260248',\n        'type': 'trave007'\n    }\n};\n\nvar fireTag = function(tagName, tags) {\n    iframeSrc = '//' + tags[tagName].id + '.fls.doubleclick.net/activityi;src=' + tags[tagName].id + ';type=' + tags[tagName].type + ';cat=' + tags[tagName].cat + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + String(Math.random()).slice(2) + '?';\n    tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n};\n\nif (/^\\/travel\\/types-of-trip\\/$/.test(pathname)) {\n    fireTag('travel_holidays_category_page', tags);\n} else if (/^\\/travel\\/destinations\\/.*-holidays\\/$/.test(pathname) && contentType == 'travel-product-listing') {\n    fireTag('travel_holidays_holiday_list_page', tags);\n} else if (/^\\/travel\\/holidays\\//.test(pathname) && contentType == 'travel-product') {\n    fireTag('travel_holidays_holiday_review_page', tags);\n} else if (/^\\/travel\\/city-breaks\\/$/.test(pathname)) {\n    fireTag('travel_city_breaks_category_page', tags);\n} else if (/^\\/travel\\/destinations\\/.*-city-breaks\\/$/.test(pathname) && contentType == 'index') {\n    fireTag('travel_city_breaks_holiday_list_page', tags);\n} else if (/^\\/travel\\/types-of-trip\\/flight-and-hotel\\/$/.test(pathname)) {\n    fireTag('travel_dynamic_category_page', tags);\n} else if (/^\\/travel\\/tours\\/$/.test(pathname)) {\n    fireTag('travel_escorted_tours_category_page', tags);\n} else if (/^\\/travel\\/tours\\//.test(pathname) && contentType == 'story') {\n    fireTag('travel_escorted_tours_tour_article', tags);\n} else if (/^\\/travel\\/destinations\\/.*-tours\\//.test(pathname) && contentType == 'travel-product-listing') {\n    fireTag('travel_escorted_tours_tour_list_page', tags);\n} else if (/^\\/travel\\/tours\\/partners\\//.test(pathname) && contentType == 'travel-product') {\n    fireTag('travel_escorted_tours_tour_review_page', tags);\n} else if (/^\\/travel\\/exclusiveoffers\\/$/.test(pathname)) {\n    fireTag('travel_exclusive_offers_category_page', tags);\n} else if (/^\\/travel\\/destinations\\//.test(pathname) && /#exclusive/.test(document.location.href)) {\n    fireTag('travel_exclusive_offers_hotel_review_page', tags);\n} else if (/^\\/travel\\/destinations\\//.test(pathname) && contentType == 'story') {\n    fireTag('travel_hotel_article', tags);\n} else if (/^\\/travel\\/destinations\\//.test(pathname) && contentType == 'travel-review') {\n    fireTag('travel_hotel_review_page', tags);\n} else if (/^\\/travel\\/destinations\\//.test(pathname) && contentType == 'travel-product-listing' && /hotels/.test(pageType)) {\n    fireTag('travel_hotels_list_page', tags);\n} else if (/^\\/travel\\/cruises\\/partners\\/ocean-cruise\\//.test(pathname) && contentType == 'travel-product') {\n    fireTag('travel_ocean_cruise_review_page', tags);\n} else if (/^\\/travel\\/cruises\\/$/.test(pathname)) {\n    fireTag('travel_ocean_cruise_category_page', tags);\n} else if (/^\\/travel\\/cruises\\//.test(pathname) && !/river-cruise/.test(pathname) && contentType == 'story') {\n    fireTag('travel_ocean_cruise_cruise_article', tags);\n} else if (/^\\/travel\\/destinations\\/.*-ocean-cruises\\//.test(pathname) && contentType == 'travel-product-listing' && /cruise/.test(pageType)) {\n    fireTag('travel_ocean_cruise_cruise_list_page', tags);\n} else if (/^\\/travel\\/cruises\\/river-cruises\\/$/.test(pathname)) {\n    fireTag('travel_river_cruise_category_page', tags);\n} else if (/^\\/travel\\/cruises\\/river-cruises\\//.test(pathname) && contentType == 'story') {\n    fireTag('travel_river_cruise_cruise_article', tags);\n} else if (/^\\/travel\\/destinations\\/.*-river-cruises\\/$/.test(pathname) && contentType == 'travel-product-listing') {\n    fireTag('travel_river_cruise_cruise_list_page', tags);\n} else if (/^\\/travel\\/cruises\\/partners\\/river-cruise\\//.test(pathname) && contentType == 'travel-product') {\n    fireTag('travel_river_cruise_review_page', tags);\n} else if (/^\\/travel\\/tours\\/telegraph-tours\\/$/.test(pathname)) {\n    fireTag('travel_telegraph_tour_category_page', tags);\n} else if (/^\\/travel\\/tours\\/telegraph-tours\\//.test(pathname) && contentType == 'travel-product') {\n    fireTag('travel_telegraph_tour_tour_review_page', tags);\n} else if (/^\\/travel\\/hotels\\/$/.test(pathname)) {\n    fireTag('travel_hotels_category_page', tags);  \n} else if (/^\\/travel\\/travel-competitions\\/telegraph-travel-awards-2017\\/$/.test(pathname)) {\n    fireTag('travel_awards', tags);\n}",language:"javascript"}}]},{id:"RL03554c2730ff47faa9c0df43e213f2a6",name:"TMG Onboarding Tooltip",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/DismissedTheToolTip|RemindMeLaterOnToolTip|CreateMyFeedOnToolTip/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.linkTrackVars+=_satellite.getVar("TMG linkTrackVars"),dataLayer.event&&(-1<dataLayer.event.indexOf("DismissedTheToolTip")?t.events="event104":-1<dataLayer.event.indexOf("RemindMeLaterOnToolTip")?t.events="event105":-1<dataLayer.event.indexOf("CreateMyFeedOnToolTip")&&(t.events="event106"))}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RLffab057b341141f6ac5e03eb4c721af9",name:"ANALYTICS: Inhouse RUM Tag [0.1]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCc7b4ff165fc44254a2a2b28b3f7c7061-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL3b0195b55b594c3084aed19c08ef299f",name:"ANALYTICS: Google Analytics [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC7241191a152545d7a7d12a79486283a3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9c367ccf93b84c9781bb2ba40a52a7b9",name:"TMG Express Checkout Start",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/customer\/secure\/checkout/).test(window.location.href))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,c){console.log("pubsub ready 12"),window.tmg.pubsub.subscribe({topic:"tmg.customerApp.eco.pageReady",func:function(){setTimeout(function(){function e(){grDataLayer.push(arguments)}function e(){DCdataLayer.push(arguments)}tmgFunctions=_satellite.getVar("TMG Functions"),NgtagSrc="https://www.googletagmanager.com/gtag/js?id=AW-362151000&l=grDataLayer",tmgFunctions.htmlBuilder(NgtagSrc,"script"),window.grDataLayer=window.grDataLayer||[],e("js",new Date),e("config","AW-362151000"),DCgtagSrc="https://www.googletagmanager.com/gtag/js?id=DC-10936650&l=DCDataLayer",tmgFunctions.htmlBuilder(DCgtagSrc,"script"),window.DCdataLayer=window.DCdataLayer||[],e("js",new Date),e("config","DC-10936650"),console.log("pubsub events fired"),console.log("dataLayer.events currently is: "+dataLayer.event),c.events="",c.linkTrackEvents="";for(var t,n,a,r=_satellite.getVar("TMG DL event"),i=_satellite.getVar("TMG Functions"),o="",s=0;s<r.length;s++)switch(o=void 0===o||""==o?r[s]:o+","+r[s],r[s]){case"registration":c.events=void 0===c.events?"event21":c.events+",event21",void 0!==c.linkTrackEvents&&""!=c.linkTrackEvents?c.linkTrackEvents=c.linkTrackEvents+",event21":c.linkTrackEvents="event21";break;case"subscriptionCheckout":console.log("start checkout fire"),i.setCookie("DtmSubIcid",_satellite.getVar("TMG icid"),864e5),c.events=void 0===c.events?"event45":c.events+",event45",c.linkTrackEvents=void 0===c.linkTrackEvents?"event45":c.linkTrackEvents+",event45",c.eVar61=dataLayer.subscription.productID,new RegExp(/monthly/).test(_satellite.getVar("TMG Subscription Offer ID"))?c.eVar62="Monthly":c.eVar62="Annually",c.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),console.log("end checkout fire"),e("event","conversion",{send_to:"AW-362151000/IUftCMj2zbsCENj416wB"}),console.log("after AW-362151000 sent"),e("event","conversion",{allow_custom_scripts:!0,send_to:"DC-10936650/subsc0/check0+standard"}),console.log("after DC-10936650 sent");break;case"subscriptionConfirmation":console.log("subscription confirmation triggered"),i.getCookie("dtm_subComplete")?console.log("nosub"):(c.eVar61=dataLayer.subscription.productID||dataLayer.subscription.productId,c.eVar62=dataLayer.subscription.paymentPlan,c.eVar63=dataLayer.subscription.paymentType,i.getCookie("DtmSubIcid")&&(c.eVar202=i.getCookie("DtmSubIcid"),i.deleteCookie("DtmSubIcid")),i.getCookie("artTags")&&(tags=i.getCookie("artTags"),tags=tags.replace(/,/g,";"),c.list2=tags),c.events=void 0===c.events?"event46":c.events+",event46",c.linkTrackEvents=void 0===c.linkTrackEvents?"event46":c.linkTrackEvents+",event46",console.log("s.events sub: "+c.events),console.log("s.linktrack sub: "+c.linkTrackEvents),adobe.target.trackEvent({mbox:"target-global-mbox",params:{productId:dataLayer.subscription.productID,paymentPlan:dataLayer.subscription.paymentPlan,paymentType:dataLayer.subscription.paymentType}}),console.log("after first target event"),adobe.target.trackEvent({mbox:"tmg.subscriptionComplete",params:{productId:dataLayer.subscription.productID,paymentPlan:dataLayer.subscription.paymentPlan,paymentType:dataLayer.subscription.paymentType}}),console.log("after second target event"),subType=_satellite.getVar("TMG Subscription Type"),expDate=new Date,t=expDate.getFullYear(),n=expDate.getMonth(),a=expDate.getDate(),a=new Date(t+2,n,a),document.cookie="tmgSubscriberType="+subType+";domain=.telegraph.co.uk;path=/;expires="+a+";",document.cookie="dtm_subComplete=1;expire=; path=/; domain=telegraph.co.uk",e("event","conversion",{send_to:"AW-362151000/ITbmCMbNqrsCENj416wB"}),console.log("after AW-362151000 sent"),e("event","conversion",{allow_custom_scripts:!0,send_to:"DC-10936650/subsc0/subsc00+standard"}),console.log("after DC-10936650 sent"));break;case"expressCheckout":c.events=void 0===c.events?"event272":c.events+",event272",c.linkTrackEvents=void 0===c.linkTrackEvents?"event272":c.linkTrackEvents+",event272";break;case"expressCheckoutStep1Complete":c.events=void 0===c.events?"event273":c.events+",event273",c.linkTrackEvents=void 0===c.linkTrackEvents?"event273":c.linkTrackEvents+",event273";break;case"expressCheckoutComplete":c.events=void 0===c.events?"event274":c.events+",event274",c.linkTrackEvents=void 0===c.linkTrackEvents?"event274":c.linkTrackEvents+",event274"}c.eVar249=o,c.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),c.prop33="",c.tl(this,"o","Express Checkout")},1e3)},runIfAlreadyPublished:!0})}},trackerProperties:{}}}]},{id:"RLd2ef7b03337c44dd8b210bad1c8a6ce6",name:"TMG MyTelegraph Start",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!!new RegExp(/\/secure\/register\/\?intro=MyTelegraph/).test(window.location.href)}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){void 0!==t.events&&""!=t.events?t.events=t.events+",event136":t.events="event136"}}}}]},{id:"RLca36b1e007be43219c4339be869da9f7",name:"TMG Video Auto Play",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"customPageLoadVideo"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{trackerProperties:{events:[{name:"event15"}],campaign:{type:"queryParam",value:"WT.mc_id"}}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1f5beed9d1a54b1998e4f9334780bbd6-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL099a608e7d2941fa8c8c18f4311b14df",name:"TMG Event onchange",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/bonusSubConfirmation|bonusSubExistingSub|bonusSubRegister|bonusSubLogin|bonusSubEmail|bonusSubSplash|smsSent|offerCardChange|expressCheckout|expressCheckoutComplete|subscriptionPaymentplanupsell|subscriptionPaymentplanchoice|onboardingWhatsAppLaunched|onboardingArticlesClicked|paymentDetailsUpdated|upgradeOptions|upgradePayment|upgradeConfirmation|registrationComplete|registration|newsletterSignup|subscriptionCheckout|subscriptionBilling|subscriptionPayment|subscriptionConfirmation|subscriptionAccount|cancellationStepWhy|cancellationStepOffer|cancellationStepStay|cancellationStepStay|cancellationStepLeave|restartSubscription|onClickDowngrade|oneClickDowngradeSuccess|newsLetterStep|editionAppSMSLink|podcastLink|articleLinks|return|secondToSpare|onboardingGooglePlayApp|onboardingAppleStoreApp|onboardingPodcastSelection|cancellationReason|cancellationWhyStay|cancellationNewOffer|cancellationConfirmation|subscriptionThankYouPage/).test(dataLayer.event))return!0}}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/customer\/secure\/redeem\-bonus|customer\/upsell\/standard|customer\/secure\/payment\/confirmation\-premium|customer\/secure\/payment\/confirmation-downgrade|customer\/secure\/offer|secure\/subscriptiondetails|\/secure\/payment\/|\/secure\/register\/|\/secure\/newsletter\/|\/customer\/secure\/payment\/|\/customer\/secure\/payment2\/|\/customer\/secure\/register\/|customer\/secure\/login|customer\/secure\/subscriptiondetails|customer\/secure\/payment\/confirmation-cancellation|customer\/secure\/personal|customer\/secure\/checkout/).test(window.location.pathname))return!0}}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/^((?!fieldClick).)*$/).test(dataLayer.event))return!0}}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/^((?!formError).)*$/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("bonus sub stuff25235253"),t.events="",t.linkTrackEvents="";for(var n=_satellite.getVar("TMG DL event"),a=_satellite.getVar("TMG Functions"),r="",i=0;i<n.length;i++)switch(r=void 0===r||""==r?n[i]:r+","+n[i],n[i]){case"registration":t.events=void 0===t.events?"event21":t.events+",event21",void 0!==t.linkTrackEvents&&""!=t.linkTrackEvents?t.linkTrackEvents=t.linkTrackEvents+",event21":t.linkTrackEvents="event21";break;case"registrationComplete":console.log("registration triggered"),_satellite.getVar("TMG Last Article Info"),void 0!==dataLayer.registration&&""!=dataLayer.registration&&(t.eVar31=dataLayer.registration.registrationType,t.eVar32=dataLayer.registration.emailOptIn),t.events=void 0===t.events||""==t.events?"event22":t.events+",event22",void 0!==t.linkTrackEvents&&""!=t.linkTrackEvents?t.linkTrackEvents=t.linkTrackEvents+",event22":t.linkTrackEvents="event22",t.eVar9=_satellite.getVar("TMG Cookie customerID"),"undefined"!=typeof obApi&&obApi("track","Event Registration"),adobe.target.trackEvent({mbox:"tmg.registrationComplete"}),a.getCookie("artTags")&&(tags=a.getCookie("artTags"),tags=tags.replace(/,/g,";"),t.list2=tags);break;case"registrationUpdate":new RegExp(/customer\/secure\/register/).test(window.location.href)||(t.eVar31=dataLayer.registration.registrationType,t.eVar32=dataLayer.registration.emailOptIn,t.events=void 0===t.events||""==t.events?"event148":t.events+",event148",void 0!==t.linkTrackEvents&&""!=t.linkTrackEvents?t.linkTrackEvents=t.linkTrackEvents+",event148":t.linkTrackEvents="event148");break;case"subscriptionCheckout":console.log("start checkout fire"),a.setCookie("DtmSubIcid",_satellite.getVar("TMG icid"),864e5),t.events=void 0===t.events?"event45":t.events+",event45",t.linkTrackEvents=void 0===t.linkTrackEvents?"event45":t.linkTrackEvents+",event45",t.eVar61=dataLayer.subscription.productID,new RegExp(/monthly/).test(_satellite.getVar("TMG Subscription Offer ID"))?t.eVar62="Monthly":t.eVar62="Annually",t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),console.log("end checkout fire");break;case"subscriptionAccount":t.events="event45",t.linkTrackEvents="event45",t.eVar61=_satellite.getVar("TMG Sub Product ID"),t.eVar62=dataLayer.subscription.paymentPlan,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"subscriptionBilling":console.log("subscription billing fired"),t.events="event155",t.linkTrackEvents="event155",t.eVar61=_satellite.getVar("TMG Sub Product ID"),t.eVar62=dataLayer.subscription.paymentPlan,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"subscriptionPayment":console.log("subscription payment fired"),t.events="event156",t.linkTrackEvents="event156",t.eVar61=_satellite.getVar("TMG Sub Product ID"),t.eVar62=dataLayer.subscription.paymentPlan,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"cancellationStepWhy":t.events="event216",t.linkTrackEvents="event216";break;case"cancellationStepOffer":var o=dataLayer.cancelReason,s=dataLayer.cancelSubreason,c=o;t.eVar19=c=void 0!==s&&""!=s?c+";"+s:c,t.events="event217",t.linkTrackEvents="event217";break;case"cancellationStepStay":t.events="event218",t.linkTrackEvents="event218";break;case"cancellationStepLeave":t.events="event219",t.linkTrackEvents="event219";break;case"restartSubscription":t.events="event220",t.linkTrackEvents="event220";break;case"upgradeOptions":t.events="event225",t.linkTrackEvents="event225";break;case"upgradePayment":t.events="event226",t.linkTrackEvents="event226";break;case"upgradeConfirmation":t.eVar61=dataLayer.subscription.productID||dataLayer.subscription.productId,t.eVar62=dataLayer.subscription.paymentPlan,t.eVar63=dataLayer.subscription.paymentType,t.events="event227",t.linkTrackEvents="event227";break;case"subscriptionConfirmation":console.log("subscription confirmation triggered"),a.getCookie("dtm_subComplete")?console.log("nosub"):(t.eVar61=dataLayer.subscription.productID||dataLayer.subscription.productId,t.eVar62=dataLayer.subscription.paymentPlan,t.eVar63=dataLayer.subscription.paymentType,a.getCookie("DtmSubIcid")&&(t.eVar202=a.getCookie("DtmSubIcid"),a.deleteCookie("DtmSubIcid")),a.getCookie("artTags")&&(tags=a.getCookie("artTags"),tags=tags.replace(/,/g,";"),t.list2=tags),console.log("s.events here is: "+t.events),t.events=void 0===t.events||""==t.events?"event46":t.events+",event46",t.linkTrackEvents=t.events,console.log("s.events sub: "+t.events),console.log("s.linktrack sub: "+t.linkTrackEvents),adobe.target.trackEvent({mbox:"target-global-mbox",params:{productId:dataLayer.subscription.productID,paymentPlan:dataLayer.subscription.paymentPlan,paymentType:dataLayer.subscription.paymentType}}),console.log("after first target event"),adobe.target.trackEvent({mbox:"tmg.subscriptionComplete",params:{productId:dataLayer.subscription.productID,paymentPlan:dataLayer.subscription.paymentPlan,paymentType:dataLayer.subscription.paymentType}}),console.log("after second target event"),subType=_satellite.getVar("TMG Subscription Type"),expDate=new Date,o=expDate.getFullYear(),s=expDate.getMonth(),c=expDate.getDate(),c=new Date(o+2,s,c),document.cookie="tmgSubscriberType="+subType+";domain=.telegraph.co.uk;path=/;expires="+c+";",document.cookie="dtm_subComplete=1;expire=; path=/; domain=telegraph.co.uk");break;case"onClickDowngrade":t.events="event238",t.linkTrackEvents="event238";break;case"oneClickDowngradeSuccess":t.events="event239",t.linkTrackEvents="event239";break;case"paymentDetailsUpdated":t.events="event210",t.linkTrackEvents="event210";break;case"newsLetterStep":console.log("newsLetterstep Reached 666666666666666");var l=_satellite.getVar("TMG DL rollupContentPath");t.pageName=l||window.location.pathname.replace(/\/$/,""),console.log("pageName is currently: "+t.pageName),t.eVar2=t.pageName,t.eVar223=dataLayer.previousStepSkipped,t.list1=dataLayer.newsLetterType,t.events=void 0===t.events?"event263, event266":t.events+",event263, event266",t.linkTrackEvents=void 0===t.linkTrackEvents?"event263, event266":t.linkTrackEvents+",event263, event266",console.log("s.events news: "+t.events),console.log("s.linktrack news: "+t.linkTrackEvents);break;case"editionAppSMSLink":console.log("editionappstep Reached"),l=_satellite.getVar("TMG DL rollupContentPath"),t.pageName=l||window.location.pathname.replace(/\/$/,""),console.log("pageName is currently: "+t.pageName),t.eVar2=t.pageName,t.eVar223=dataLayer.previousStepSkipped,console.log("editionappstep Reached 2"),new RegExp(/event46/).test(t.events)?(t.events=t.events+",event256",console.log("editionappstep Reached 3"),t.linkTrackEvents=t.events):(t.events="event256",console.log("editionappstep Reached 3"),t.linkTrackEvents="event256"),console.log("editionappstep Reached 4");break;case"podcastLink":console.log("podcaststep Reached"),l=_satellite.getVar("TMG DL rollupContentPath"),t.pageName=l||window.location.pathname.replace(/\/$/,""),console.log("pageName is currently: "+t.pageName),t.eVar2=t.pageName,t.eVar223=dataLayer.previousStepSkipped,t.events="event257",t.linkTrackEvents="event257";break;case"articleLinks":console.log("articlestep Reached"),l=_satellite.getVar("TMG DL rollupContentPath"),t.pageName=l||window.location.pathname.replace(/\/$/,""),console.log("pageName is currently: "+t.pageName),t.eVar2=t.pageName,t.eVar223=dataLayer.previousStepSkipped,t.events="event258",t.linkTrackEvents="event258";break;case"return":t.eVar223=dataLayer.previousStepSkipped,t.events="event259",t.linkTrackEvents="event259";break;case"secondToSpare":t.eVar223=dataLayer.previousStepSkipped,t.events="event260",t.linkTrackEvents="event260";break;case"onboardingGooglePlayApp":t.eVar223=dataLayer.previousStepSkipped,t.eVar225="google play",t.events="event261",t.linkTrackEvents="event261";break;case"onboardingAppleStoreApp":t.eVar223=dataLayer.previousStepSkipped,t.eVar225="apple store",t.events="event261",t.linkTrackEvents="event261";break;case"onboardingPodcastSelection":t.eVar223=dataLayer.previousStepSkipped,t.eVar224=dataLayer.podcastName,t.events="event262",t.linkTrackEvents="event262";break;case"onboardingArticlesClicked":t.events="event264",t.linkTrackEvents="event264";break;case"onboardingWhatsAppLaunched":t.events="event265",t.linkTrackEvents="event265";break;case"subscriptionPaymentplanupsell":case"subscriptionPaymentplanchoice":t.events="event267",t.linkTrackEvents="event267",console.log("check for dL stuff: "+dataLayer.subscription.productID+", "+dataLayer.subscription.paymentPlan),t.eVar61=dataLayer.subscription.productID,t.eVar62=dataLayer.subscription.paymentPlan,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"cancellationReason":t.events="event216",t.linkTrackEvents="event216";break;case"cancellationWhyStay":t.events="event217",t.linkTrackEvents="event217",t.eVar19=dataLayer.cancellationReason,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars");break;case"cancellationNewOffer":void 0!==t.events||""!=t.events?t.events=t.events+", event218":t.events="event218",t.eVar209=dataLayer.discount,t.linkTrackEvents=t.events;break;case"offerCardChange":eventCheck=t.events,new RegExp(/event52/).test(eventCheck)||(void 0!==t.events||""!=t.events?(t.events=t.events+", event52",console.log("added here: "+t.events)):t.events="event52"),t.eVar141=dataLayer.offerICID,t.eVar75=dataLayer.offerVariation,t.linkTrackEvents=t.events;break;case"cancellationConfirmation":"yes"==dataLayer.cancelling?t.events="event241":"no"==dataLayer.cancelling&&(t.events="event243"),t.linkTrackEvents=t.events;break;case"subscriptionThankYouPage":"yes"==dataLayer.cancelling?t.events="event242":"no"==dataLayer.cancelling&&(t.events="event244"),t.linkTrackEvents=t.events;break;case"expressCheckoutStep1Complete":t.events=void 0===t.events?"event273":t.events+",event273",t.linkTrackEvents=void 0===t.linkTrackEvents?"event273":t.linkTrackEvents+",event273",console.log("user status check: "+dataLayer.userStatus),t.eVar235=dataLayer.userStatus;break;case"smsSent":t.events="event293",t.linkTrackEvents=t.events;break;case"expressCheckoutComplete":t.events=void 0===t.events?"event274":t.events+",event274",t.linkTrackEvents=void 0===t.linkTrackEvents?"event274":t.linkTrackEvents+",event274";break;case"bonusSubSplash":t.events="event276",t.linkTrackEvents="event276";break;case"bonusSubEmail":t.events="event277",t.linkTrackEvents="event277";break;case"bonusSubLogin":t.events="event278",t.linkTrackEvents="event278";break;case"bonusSubRegister":t.events="event279",t.linkTrackEvents="event279";break;case"bonusSubExistingSub":t.events="event280",t.linkTrackEvents="event280",t.eVar210=dataLayer.exsitingSubType;break;case"bonusSubConfirmation":t.events="event281, event46",t.linkTrackEvents="event281, event46"}t.eVar249=r,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),t.prop33="",console.log("s.events here is2: "+t.events)}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Registration",linkType:"o"}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("onclick vb check");for(var n=_satellite.getVar("TMG DL event"),a=(_satellite.getVar("TMG Functions"),""),r=0;r<n.length;r++)"oneClickDowngradeSuccess"===(a=void 0===a||""==a?n[r]:a+","+n[r],n[r])&&(dataLayer.event="",t.events="")}},trackerProperties:{}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC33fc50159106444dbddfc447add230eb-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCed64c82ae71647d39ac39d36de5b81f1-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC6f3be8fb838945518778f4785370e828-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCdb6ca35a86ee41c0822741eddee2534f-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCbbb3d833fe824b71981f23c848e9f813-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC15f7fb5d3fae4b53969c50409e07e6d9-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC9e2ea3b8c9f04ae3af52a02063436ec3-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC3f7d0de8f74e439f83a7019c43086f7f-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC14924706f99b42bd9b4ca906fab586f4-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1396625d62ac492ea4ad13a0194df349-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC9aab098b59664c93bfd65dbc85d755c8-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC5b80c368bfd8425aaa179f65232efdd5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL14aaa71005314be0a649c2ba7e17becd",name:"TMG MyTelegraph Quick Follow/Unfollow",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"TMG MyT DL Event"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%TMG MyT DL Event%",rightOperand:"quickFollow|quickUnfollow"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){dataLayer.events&&(-1<dataLayer.events.indexOf("quickFollow")?t.events="event107":-1<dataLayer.events.indexOf("quickUnfollow")&&(t.events="event108")),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLc6004b3b97a64cafa054e2efb0351ae6",name:"ADTECH: Ipsos Iris Analytics",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCc6fb8d11b10a4c5aa06b66fe4a72831c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL5d23c924d391469fa21bb05c33228c87",name:"TMG MyTelegraph Save/Unsave Article",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/mytelegraph",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/article-undo-save|article-save|article-remove/).test(dataLayer.events))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,n){function t(e){n.events="",void 0!==n.events&&""!==n.events?n.events=n.events+","+e:n.events=e,saveLocation="/mytelegraph/saved"==window.location.pathname?"mytelegraph saved":"mytelegraph feed";var t="";-1===window.location.pathname.indexOf("/mytelegraph/")?t=document.querySelector('meta[name="DCSext.Content_Type"]').content:"travel-review"==dataLayer.contentType&&(t="travel-review"),n.eVar148=t,n.eVar156=saveLocation,aName=dataLayer.articleName,aName=aName.split(".co.uk"),aName=aName[1].split("?"),aName=new RegExp("/$").test(aName[0])?(aNLength=aName[0].length,maxCap=aNLength-1,aName[0].slice(0,maxCap)):aName[0],n.eVar157=aName,n.eVar158=dataLayer.articleId,n.linkTrackEvents=e,dataLayer.events=""}""!=n.list3&&void 0!==n.list3&&(n.list3="");for(var a=_satellite.getVar("TMG MyT DL Event"),r=0;r<a.length;r++)switch(a[r]){case"article-save":t("event142");break;case"article-remove":t("event143");break;case"article-undo-save":t("event142")}n.linkTrackEvents=n.events,n.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL3f19de8a0f074492b37616ff8497e622",name:"Word counts Meta Tag",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var articleContentType = document.querySelector( 'meta[name=\"DCSext.Content_Type\"]' );\nvar isArticle = articleContentType && ( articleContentType.content === 'story' || articleContentType.content === 'live' || articleContentType.content === 'video' );\n\nif ( isArticle ) {\n\tvar wordCounts = 0;\n\tif ( window.dataLayer.martech && window.dataLayer.martech.wordCounts ) wordCounts = window.dataLayer.martech.wordCounts;\n\telse {\n\t\tvar paragraphs = document.querySelectorAll( '[itemprop=\"articleBody\"] p' );\n\t\tif ( paragraphs.length ) {\n\t\t\tparagraphs.forEach( function ( paragraph ) {\n\t\t\t\tif ( paragraph.textContent && paragraph.textContent.length ) wordCounts += paragraph.textContent.split( ' ' ).length;\n\t\t\t});\n\t\t}\n\t}\n\tif ( wordCounts ) {\n\t\tvar countsMeta = document.createElement( 'meta' );\n\t\tcountsMeta.setAttribute( 'name', 'martech.wordCounts' );\n\t\tcountsMeta.setAttribute( 'content', wordCounts );\n\t\tarticleContentType.parentNode.insertBefore( countsMeta, articleContentType.nextSibling );\n\t}\n}",language:"javascript"}}]},{id:"RLcbb2ce80cce247b3ad94f55a2ccefc7d",name:"TMG Dream Trips Filter",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"TMG DL Filter"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){comFilter="",(void 0!==dataLayer.genderFilter&&""!=dataLayer.genderFilter||void 0!==dataLayer.priceFilter&&""!=dataLayer.priceFilter)&&(genderFilter=dataLayer.genderFilter,priceFilter=dataLayer.priceFilter,comFilter=genderFilter+", "+priceFilter),t.events="event59",t.linkTrackEvents=t.events,t.eVar57=comFilter,dataLayer.event=""}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLc00170f794b941b39b030d6baf9352e8",name:"ANALYTICS: Comscore [9.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCa94168d05ac8450da44af9d68228fb7d-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL81d8b1ba0a044f93afedefcc7d7bbd03",name:"TMG Christmas Gifts Filter",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"TMG DL event"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/guides\/christmas-gift-guide/).test(window.location.href))return!0}}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"dataLayer.event",value:"filter",valueIsRegex:!0}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("christmas filter triggered"),comFilter="",(void 0!==dataLayer.genderFilter&&""!=dataLayer.genderFilter||void 0!==dataLayer.priceFilter&&""!=dataLayer.priceFilter)&&(genderFilter=dataLayer.genderFilter,priceFilter=dataLayer.priceFilter,comFilter="undefined"==typeof genderFilter||""==genderFilter?priceFilter:"undefined"==typeof priceFilter||""==priceFilter?genderFilter:genderFilter+", "+priceFilter),t.events="event59",t.linkTrackEvents=t.events,t.eVar57=comFilter,dataLayer.event=""}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkType:"o"}}]},{id:"RLf66dd88251c54585b6e2a8ffa80b7f27",name:"TMG Travel Price & Destination Filter",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/priceSliderClick|priceMaxInputClick|filterButtonClick|applyFilterClick/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=_satellite.getVar("TMG DL event"),a={priceSliderClick:"event221",priceMaxInputClick:"event222",applyFilterClick:"event223",filterButtonClick:"event224",destinationSelectorOpened:"event229",destinationSelected:"event230"}[n];switch(t.events=a,t.linkTrackEvents=a,n){case"applyFilterClick":var r=dataLayer.priceFromRange,i=dataLayer.priceToRange;console.log("minPrice: "+r),console.log("maxPrice: "+i),t.eVar216=r,t.eVar217=i;break;case"destinationSelected":t.eVar191=dataLayer.destination}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL0ab80406bd274d528a5e233f63a1330b",name:"TMG Fetch Brand Marketing Codes",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"tmgFunctions = _satellite.getVar(\"TMG Functions\");\nvar pathname = document.location.pathname;\nvar tags = {\n    'music': {\n        'cat': 'brand00',\n        'id': '6260248',\n        'type': 'brand0'\n    },\n  \t'amazon': {\n        'cat': 'premi00',\n        'id': '6260248',\n        'type': 'premi0'\n    }\n};\n\nvar fireTag = function(tagName, tags) {\n    iframeSrc = '//' + tags[tagName].id + '.fls.doubleclick.net/activityi;src=' + tags[tagName].id + ';type=' + tags[tagName].type + ';cat=' + tags[tagName].cat + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + String(Math.random()).slice(2) + '?';\n    tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n};\n\n\nif (pathname.indexOf(\"/music/artists/wretch-32-making-dont-go-first-thing-thought-music/\") > -1){\n     fireTag('music', tags);\n} else if (pathname.indexOf(\"/music/artists/kodaline-making-want-definitely-felt-special-wrote/\") > -1){\n     fireTag('music', tags);\n} else if (pathname.indexOf(\"/music/artists/story-behind-girls-alouds-sound-underground-inspired-wheels/\") > -1){\n     fireTag('music', tags);\n} else if (pathname.indexOf(\"/music/what-to-listen-to/jessie-ware-making-alone-admitting-husband-arent-perfect/\") > -1){\n     fireTag('music', tags);\n} else if (pathname.indexOf(\"/music/artists/charli-xcx-making-boom-clap-boys-wanted-toflip-male-gaze-head/\") > -1){\n     fireTag('music', tags);\n} else if (pathname.indexOf(\"/music/artists/craig-david-making-7-days-mum-would-never-have-allowed-really/\") > -1){\n     fireTag('music', tags);\n} else if (pathname.indexOf(\"/premium/prime/\") > -1){\n     fireTag('amazon', tags);\n} ",language:"javascript"}}]},{id:"RL51a09acaf7734567bc93f83d32b8bd73",name:"TMG Newsletter Impression",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:40}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){window.tmg.pubsub.subscribe({topic:"tmg.customerApp.newsletters.pageReady",func:function(){setTimeout(function(){t.prop27=dataLayer.newsLetterType,t.list1=dataLayer.newsLetterType,t.events="event266",t.linkTrackEvents="event266",t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),t.tl()},1e3)},runIfAlreadyPublished:!0})}},trackerProperties:{}}}]},{id:"RLed95568f99ec44878f442dbbb0857b7c",name:"TMG Marketing Codes - telegraph.co.uk",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!!new RegExp(/www\.telegraph\.co\.uk|\/staging\-ams64\.telegraph\.co\.uk|qa12\.telegraph\.co\.uk/).test(window.location.href)}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC671f8e18b75d436bb5458e795b5cacc4-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1cd0024cc39a43bb9c1880fc62a77784-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC0a24dfcec5a0437698d83aff018b231b-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC913ee9c6e5f04393b361974f322b8570-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCaecaad0a1cf04018831259a794346342-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC98525e1429d64627ab9b3f3ae2d945aa-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC309df687916e4eb182b8b863fe2c5514-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1e6bd80b8ae84694a6bc30d9ac2d728d-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC4085e399daae41edbe29bf60fca456e0-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC4bf6a00df8ab4b47b5d60eff5323dc33-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCe149840c38434488a9b2d0ba340d3929-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC84658222bd2a412f8fe04abf0a9c0af3-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL21e95d67c7eb4c0e8ecc7bc6f8860b50",name:"COMMERCIAL: WayIn Populate Adobe ID [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC0392241e4a1a46c2a1c36fb86deca2dd-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL8ecc18b1c30d42dc96283f4fc7232f89",name:"TMG Visit Number",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pageViews.js",settings:{count:1,duration:"session",operator:"="}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(){console.log("visitor change check here");var e=new Date;e.setDate(e.getDate()-5),e.setHours(0),e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.toUTCString(0),document.cookie="adb_vis_num_day=1;domain=.telegraph.co.uk;path=/;expires=Thu, Jan 01 1970 00:00:00 UTC;",document.cookie="adb_vis_num_week=1;domain=.telegraph.co.uk;path=/;expires=Thu, Jan 01 1970 00:00:00 UTC;",document.cookie="adb_vis_num_session=1;domain=.telegraph.co.uk;path=/;expires=Thu, Jan 01 1970 00:00:00 UTC;"}},trackerProperties:{}}}]},{id:"RLa27058eacc2b4cd890802344dda6d083",name:"TMG All Pages",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("Adobe Launch Loaded: facebook check 1"),tags=_satellite.getVar("TMG Meta Keywords").replace(/(?:\r\n|\r|\n|\t)/g," ").replace(/,/g,";"),t.list2=tags,"undefined"!=typeof tags&&""!=tags&&(tags=tags.replace(/;/g,","),tmgFunctions=_satellite.getVar("TMG Functions"),tmgFunctions.setCookie("artTags",tags));try{var n=Date.now(),a=_satellite.readCookie("_topp");void 0===a||"number"==typeof(d=Math.round((n-a)/1e3))&&(t.events=void 0===t.events?"event18="+d:t.events+",event18="+d),_satellite.setCookie("_topp",n,.020833)}catch(e){}var r=_satellite.getVar("TMG Meta Channel"),o=_satellite.getVar("TMG Meta Category"),s=_satellite.getVar("TMG Meta Genre"),c=_satellite.getVar("TMG utmSource"),l=_satellite.getVar("TMG utmMedium"),a=_satellite.getVar("TMG utmCampaign"),u=_satellite.getVar("TMG Meta Business Segment"),d=_satellite.getVar("TMG DL rollupContentPath"),n=_satellite.getVar("TMG DL pageID");t.prop7=document.querySelector('link[href*="/etc/design"][type="text/css"]')?"AEM":"Other",document.querySelector(".escenicMetadata")&&(t.prop7="Escenic"),t.eVar15=r,new RegExp(/education\-and\-careers/).test(window.location.href)&&(console.log("this is the edu2 page"),"portal"==t.eVar15&&(console.log("this is the edu page with portal set"),t.eVar15="educationandcareers")),t.eVar22=c&&l&&a?c+";"+l+";"+a:"",t.eVar110="undefined"!=typeof dataLayer&&dataLayer.videoEmbedCount?dataLayer.videoEmbedCount:"";var p,f=_satellite.getVar("TMG businessSegmentMapping");for(p in f)new RegExp(p).test(u)&&(u=f[p]);-1!=window.location.hash.indexOf("source=refresh")&&(t.events=void 0===t.events?"event7":t.events+",event7"),n&&(t.events=void 0===t.events?"event17:"+n:t.events+",event17:"+n),"register.moneytransfer.telegraph.co.uk"==window.location.host&&"/"==window.location.pathname&&(t.events=void 0===t.events?"event100":t.events+",event100"),t.eVar3=_satellite.getVar("TMG DL premiumContent")?_satellite.getVar("TMG DL premiumContent"):"false",t.eVar33=_satellite.getVar("TMG Meta premiumContentOnFirstPublish")?_satellite.getVar("TMG Meta premiumContentOnFirstPublish"):"false",t.eVar35=_satellite.getVar("TMG DL premiumOverride")?_satellite.getVar("TMG DL premiumOverride"):"false",t.pageName=d||window.location.pathname.replace(/\/$/,""),t.channel=u||t.eVar15,t.hier1=t.eVar15+";"+o+";"+s,t.referrer=/https?:\/\/tgr\.ph\//.test(document.referrer)?"https://www.facebook.com/":t.referrer,t.eVar106="Launch - aem",t.eVar232=_satellite.getVar("TMG Facebook Bypass"),t.eVar233="false",_satellite.getVar("TMG Google Showcase")&&(t.eVar233="true"),t.eVar39="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",t.eVar73="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",t.eVar93="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",void 0!==dataLayer.premiumPage&&(t.eVar3=dataLayer.premiumPage,console.log("premium page check activated 2"),premiumPage="",0==dataLayer.premiumPage||1==dataLayer.premiumPage&&(t.eVar39="D=pageName",t.eVar73="D=pageName",t.eVar93="D=pageName"),console.log("prem1 "+t.eVar39),console.log("prem2 "+t.eVar73),console.log("prem3 "+t.eVar93)),void 0!==dataLayer.channel&&""!=dataLayer.channel&&(console.log("channel dl activated"),t.eVar15=dataLayer.channel),t.eVar139="true"==_satellite.getVar("TMG Article Content")?"D=pageName":"";var m=_satellite.getVar("TMG Meta Content Type");if(m){var g=0,v=["thirdpartysite","html","shorthand","iframe","registration","product","undefined","destination","hotelreview","cartoon","article","blog","text/html; charset=utf-8","third party site","anonymized"];for(i=0;i<v.length;i++)v[i]==m&&g++;void 0!==m&&""!=m&&null!==m&&null!==typeof m&&0==g&&(author=_satellite.getVar("TMG Meta Author"),author=author.replace(/; /g,"+ "),aTag=_satellite.getVar("TMG Meta Keywords").replace(/(?:\r\n|\r|\n|\t)/g," ").replace(/,/g,"+"),premiumContent=_satellite.getVar("TMG DL premiumContent")?_satellite.getVar("TMG DL premiumContent"):"false",prevPage=_satellite.getVar("TMG referrerStripped"),currURL=window.location.pathname,t.eVar167=author,t.eVar168=m,t.eVar170=premiumContent,t.eVar171=prevPage),-1<m.indexOf("gallery")&&(t.eVar182=_satellite.getVar("TMG Gallery Total Images"))}new RegExp(/^\/guide/).test(window.location.pathname)&&(prevPage=_satellite.getVar("TMG referrerStripped"),t.eVar168="guides",t.eVar170=dataLayer.premiumPage,t.eVar171=prevPage),"undefined"!=typeof tmg&&""!=tmg&&void 0!==tmg.guid&&""!=tmg.guid&&(t.prop32=tmg.guid),void 0!==window.tmg.PIANO_PAYWALL_ON&&""!=window.tmg.PIANO_PAYWALL_ON&&(t.prop74=window.tmg.PIANO_PAYWALL_ON),void 0!==dataLayer.subscription&&""!=dataLayer.subscription&&(t.eVar61=dataLayer.subscription.productID||dataLayer.subscription.productId,t.eVar62=dataLayer.subscription.paymentPlan),console.log("facebook news check begins"),document.querySelector("meta[name='fbn-bypass']")?(fbValue=document.querySelector("meta[name='fbn-bypass']").content,"true"==fbValue&&(t.prop28="true")):t.prop28="false",console.log("end of facebook news check")}},trackerProperties:{eVars:[{name:"eVar1",type:"value",value:"D=g"},{name:"eVar2",type:"value",value:"D=pageName"},{name:"eVar6",type:"value",value:"%TMG domain%"},{name:"eVar7",type:"value",value:"%TMG Meta Content Type%"},{name:"eVar9",type:"value",value:"%TMG Cookie customerID%"},{name:"eVar11",type:"value",value:"%TMG Meta Article Publish Date%"},{name:"eVar17",type:"value",value:"%TMG Responsive Site Viewports%"},{name:"eVar18",type:"value",value:"%TMG Meta MLC%"},{name:"eVar20",type:"value",value:"%TMG galleryImageNo%"},{name:"eVar21",type:"value",value:"%TMG Meta Business Segment%"},{name:"eVar26",type:"value",value:"%TMG DL storyType%"},{name:"eVar27",type:"value",value:"%TMG emailType%"},{name:"eVar29",type:"value",value:"%TMG DL pageID%"},{name:"eVar38",type:"value",value:"%TMG Meta Author%"},{name:"eVar43",type:"value",value:"%TMG paywallDisplayed%"},{name:"eVar44",type:"value",value:"%TMG Meta Spark CampaignID%"},{name:"eVar45",type:"value",value:"%TMG campaignLive%"},{name:"eVar49",type:"value",value:"%TMG DL flakeID%"},{name:"eVar53",type:"value",value:"%TMG Meta Spark Sponsor%"},{name:"eVar59",type:"value",value:"%TMG videoPlaylist%"},{name:"eVar91",type:"value",value:"%TMG DL pageType%"},{name:"eVar111",type:"value",value:"%TMG timeSincePublish%"},{name:"eVar112",type:"value",value:"%TMG Meta Article Publish Time%"},{name:"eVar118",type:"value",value:"%TMG regwallDisplayed%"},{name:"eVar141",type:"value",value:"%TMG icid%"},{name:"eVar155",type:"value",value:"%TMG Local Date%"},{name:"eVar197",type:"value",value:"%TMG MCVISID%"}],props:[{name:"prop1",type:"value",value:"D=g"},{name:"prop2",type:"value",value:"%TMG articleTitle%"},{name:"prop3",type:"value",value:"D=v7"},{name:"prop4",type:"value",value:"%TMG referrerStripped%"},{name:"prop5",type:"value",value:"D=pageName"},{name:"prop6",type:"value",value:"%TMG domain%"},{name:"prop9",type:"value",value:"D=v3"},{name:"prop10",type:"value",value:"D=v26"},{name:"prop11",type:"value",value:"D=v11"},{name:"prop15",type:"value",value:"D=v15"},{name:"prop17",type:"value",value:"D=v17"},{name:"prop18",type:"value",value:"D=v18"},{name:"prop21",type:"value",value:"D=v21"},{name:"prop22",type:"value",value:"D=v22"},{name:"prop23",type:"value",value:"D=v29"},{name:"prop26",type:"value",value:"D=v27"},{name:"prop29",type:"alias",value:"eVar9"},{name:"prop35",type:"value",value:"D=v93"},{name:"prop43",type:"value",value:"D=v43"},{name:"prop44",type:"value",value:"D=v44"},{name:"prop45",type:"value",value:"D=v45"},{name:"prop46",type:"value",value:"D=v155"},{name:"prop53",type:"value",value:"D=v53"}],campaign:{type:"queryParam",value:"WT.mc_id"}}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'function cookieOkLoop(){\n\n\tif(document.querySelector(\'#_evidon-accept-button\'))\n\t{\n        console.log("cookie banner loaded");\n\t\tcookieBannerButton = document.querySelector(\'#_evidon-accept-button\');\n\n\t\tcookieBannerButton.addEventListener("click", function(){\n            console.log("cookie accept clicked");\n\t\t\ts.events = "";\n\t\t\ts.eVar173 = "true";\n\t\t\ts.eVar105 = "";\n            console.log("evar: "+s.eVar173);\n            s.linkTrackVars += \'events,\' + _satellite.getVar(\'TMG linkTrackVars\');\n\t\t\ts.tl(true, \'o\', \'Cookie consent\');\n\n\t\t})\n\t\n\t}\n\telse\n\t{\n\t\n\t\tsetTimeout( function(){\n\t\t\n\t\t\tcookieOkLoop();\n\t\t\n\t\t}, 2000)\n\t\n\t}\n\n}\n\nconsentCookie = _satellite.getVar(\'TMG Evidon Cookie\');\n\nif(!(typeof consentCookie != "undefined" && consentCookie != ""))\n{\n\n\tcookieOkLoop();\n\n}',language:"javascript"}}]},{id:"RLb933f3ddcb3f409bb68f0d4eea700dfd",name:"COMMERCIAL: Travel ClickTripz [5.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC1cec163a7e3341d387ac93a9b693c361-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLa0c54d71068c411dbbdb14f9f19d4a90",name:"ADTECH: YouTube/AdBlock Fix [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCd54e9c42e0624ea0ad5b96782ea44321-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLb80ee4bc4ab947259fae2df63b136ce2",name:"TMG My Feed Filter",events:[{modulePath:"core/src/lib/events/dataElementChange.js",settings:{name:"TMG MyT DL Event"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%TMG MyT DL Event%",rightOperand:"myFeed-filters-applied|FilterToolTipDisplayed|NoThanksOnToolTip|OpenFilterOnToolTip"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){if(dataLayer.events){var n="";switch(dataLayer.events){case"myFeed-filters-applied":n="event54";break;case"FilterToolTipDisplayed":n="event55";break;case"NoThanksOnToolTip":n="event56";break;case"OpenFilterOnToolTip":n="event57"}t.events=n;var a=RegExp("/,?"+n+"/g");t.events=t.events.replace(a,""),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RLf226cf2ed5a14aea92d0e96a70a87c59",name:"TMG Cruise listing page top section",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".articleBodyText a, .articleBodyText + .curatedList2 a",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/travel/cruises/",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%TMG Meta Content Type%",rightOperand:"travel-product-listing"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){"LI"==this.parentNode.tagName?t.eVar184="Bullet Point":0<this.getElementsByTagName("img")||-1<this.parentNode.className.indexOf("list-of-entities__item-body-headline")?t.eVar184="Image":t.eVar184="Text",t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event154"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL772942cc097c489e92cf4118c68f62be",name:"TMG Target Reg/Sub Complete Calls",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%TMG DL event%",rightOperand:"registrationComplete|subscriptionConfirmation"}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var maxWaitTime = 0;\n\nfunction waitForAdobe()\n{\n    if (typeof adobe !== \"undefined\")\n    {\n        for (i = 0; i < dataLayer.event.length; i++)\n        {  \n            switch(dataLayer.event[i]) \n            {\n                case 'registrationComplete':\n\n                    adobe.target.trackEvent({'mbox': 'tmg.registrationComplete'});         \n                    break;\n\n                case 'subscriptionConfirmation':\n\n                    if (dataLayer.hasOwnProperty('subscription'))\n                    {\n                      \tadobe.target.trackEvent({\n\t\t\t\t\t\t\t\t\t\t\t\t\t'mbox': 'target-global-mbox',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'params': {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'productId': dataLayer.subscription.productID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'paymentPlan': dataLayer.subscription.paymentPlan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'paymentType': dataLayer.subscription.paymentType\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n                        adobe.target.trackEvent({\n                            'mbox': 'tmg.subscriptionComplete',\n                            'params': {\n                                'productId': dataLayer.subscription.productID,\n                                'paymentPlan': dataLayer.subscription.paymentPlan,\n                                'paymentType': dataLayer.subscription.paymentType\n                            }\n                        });\n                    }\n                    else \n                    {\n                        adobe.target.trackEvent({'mbox': 'tmg.subscriptionComplete'});\n                    }\n                    break; \n            }\n        }\n    }\n    else if (maxWaitTime === 5)\n    {\n        // Stop trying\n    }\n    else\n    {\n        setTimeout(waitForAdobe, 250);\n\n        maxWaitTime += 0.25;\n    }\n}\n\nwaitForAdobe();",language:"javascript"}}]},{id:"RLdb95562ed8914d49b8554d81cdcfc071",name:"newsletterRegistration (Event)",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".newsletter__form-submit",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.linkTrackVars+=_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event14"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Newsletter Submit",linkType:"o"}}]},{id:"RL43f4ec7a1d344042912219df8c511566",name:"TMG Telegraph Connect",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["telegraph.co.uk"]}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"pages\\.email3",valueIsRegex:!0}]}},{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"webApp\\/telegraph_connect",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){try{var n;document.getElementById("form1")?(n=_satellite.getVar("Form Query Parameter"),t.eVar37="media"==n?"media":"business",t.events=void 0===t.events?"event63":t.events+",event63"):document.getElementsByClassName("thanks-intro")[0]&&(n=_satellite.getVar("Form Query Parameter"),t.eVar77="media"==n?"media registered":"business registered",t.events=void 0===t.events?"event64":t.events+",event64")}catch(e){}}},trackerProperties:{}}}]},{id:"RL2071914af18b48d68d42730b85d20156",name:"COMMERCIAL: LinkedIn Pixel [2.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC3d69ec28cb7d4f66a096c1fca255efca-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLdf93d7413a52450195a5c801282d00c0",name:"TMG Event Polling",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'console.log("new polling event");\nfunction checkEvents(){\n\n\tcurrDLE = dataLayer.event;\n    currDLEMYT = dataLayer.events;\n\t\n\tif(currDLE != firstDLE)\n\t{\n\t\n\t\t//console.log("IT HAS CHANGED");\n        console.log(dataLayer);\n        console.log("dataLayer updated event no s type");\n\t\tconsole.log("it is now: "+dataLayer.event);\n\t\t_satellite.track("dataLayerEventChange");\n        firstDLE = currDLE;\n\t\n\t}else if(currDLEMYT != firstDLEMYT){\n        console.log(dataLayer)     \n        console.log("dataLayer updated events type");\n\t\t//console.log("IT HAS CHANGED");\n\t\tconsole.log("it is now: "+dataLayer.event);\n\t\t_satellite.track("dataLayerEventChange");\n        firstDLEMYT = currDLEMYT;\n    \n    }else if(currDLE == firstDLE && currDLEMYT == firstDLEMYT){\n\t\n\t\t//console.log("IT HAS NOT CHANGED");\n\t\n\t}\n\t\n\tsetTimeout( function(){\n\t\n\t\tcheckEvents();\n\t\n\t}, 1000)\n\n}\n\nsetTimeout( function(){\n\n  firstDLE = dataLayer.event;\n  firstDLEMYT = dataLayer.events;\n\n  checkEvents();\n  \n}, 2000)',language:"javascript"}}]},{id:"RL01e27c39c0a14c23a919a062a367181e",name:"TMG Moneytransfer",events:[{modulePath:"core/src/lib/events/historyChange.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["telegraph.co.uk"]}},{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"register.moneytransfer",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n,a={"/":"event100","/account-more-details":"event101","/account-status":"event102"};for(n in a)n==window.location.pathname&&(t.events=a[n]);t.pageURL=window.location.href,t.pageName=window.location.pathname.replace(/\/$/,""),t.prop4="",t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLbc0305e7579048da8c9ac12393194062",name:"TMG Footer Events",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/backToTheTop/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.events="event240",t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Footer Event",linkType:"o"}}]},{id:"RL718774db8fd64cedb4c07d63bcd01e48",name:"TMG Travel GPC tracking Pixels",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a[href*='booking.com/hotel/']",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"Top-10-family-friendly-hotels-cornwall",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCab4f22667aa343039b1e02756367b784-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL21f52649a0944e9bb4f5e946dfab781f",name:"TMG Hotel Map Interaction",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".product-map",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"travel\\/.*hotel\\/",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar1=window.location.href,dataLayer.event.isArray||(dataLayer.event=dataLayer.event.split(",")),dataLayer.event.push("mapInteraction"),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event53"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL9e062712059b47c9a6e9efb4ed25c871",name:"TMG Remove Visit cookie",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'console.log("visitor change check here 23423 4234234234");\n\nvar killDate = new Date();\nkillDate.setDate(killDate.getDate() - 5);\nkillDate.setHours(0);\nkillDate.setMilliseconds(0);\nkillDate.setSeconds(0);\nkillDate.setMinutes(0);\nkillDate.toUTCString(0);\n\t\t\n//adb_vis_num_day\n\ndocument.cookie = "adb_vis_num_day=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";\n\n//adb_vis_num_week\n\ndocument.cookie = "adb_vis_num_week=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";\n\n//adb_vis_num_session\n\ndocument.cookie = "adb_vis_num_session=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";\n\n//error cookie remove\n\ndocument.cookie = "adbc_vis_num_day=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";\ndocument.cookie = "adbc_vis_num_week=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";\ndocument.cookie = "adbc_vis_num_session=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";',language:"javascript"}}]},{id:"RLff5fdf78ecd0433bb6d9e83c0f2e48cd",name:"TMG Social share clicks",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC90706f184cc14ab1abf7a3b28874f2c9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL90cebe30557f4eabb8e3f64d8af68b4c",name:"Spark - Vodafone / Project Colbalt (Page)",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/business/future-technologies/",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC328c108c8a3b45edba96e221a6715767-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLd7b151beecd44bd68a93ef260d502577",name:"TMG Bonus Sub Account Events",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/bonusSubCopy|bonusSubRemoved|bonusSubCancelled|bonusSubExistsCancelOverlay|myAccountShareSubClick/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC52a8939def0c42dda98a0a6850b25324-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Bonus Action My Account",linkType:"o"}}]},{id:"RL49b9c9e245c140f4b2246c89070f2729",name:"TMG Premium Pages",events:[{modulePath:"core/src/lib/events/historyChange.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%TMG DL pageType%",rightOperand:"premium"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar1=window.location.href,t.prop1=window.location.href,t.list2=_satellite.getVar("TMG Meta Keywords").replace(/(?:\r\n|\r|\n|\t)/g," ").replace(/,/g,";");try{var n=Date.now(),a=_satellite.readCookie("_topp");void 0===a||"number"==typeof(u=Math.round((n-a)/1e3))&&(t.events=void 0===t.events?"event18="+u:t.events+",event18="+u),_satellite.cookie.set("_topp",n,.020833)}catch(e){}var r=_satellite.getVar("TMG Meta Channel"),i=_satellite.getVar("TMG Meta Category"),o=_satellite.getVar("TMG Meta Genre"),s=(_satellite.getVar("TMG Meta MLC"),_satellite.getVar("TMG utmSource")),c=_satellite.getVar("TMG utmMedium"),a=_satellite.getVar("TMG utmCampaign"),l=_satellite.getVar("TMG Meta Business Segment"),u=_satellite.getVar("TMG DL rollupContentPath"),n=_satellite.getVar("TMG DL pageID");t.prop7=document.querySelector('link[href*="/etc/design"][type="text/css"]')?"AEM":"Other",t.eVar15=r,t.eVar22=s&&c&&a?s+";"+c+";"+a:"",t.eVar110="undefined"!=typeof dataLayer&&dataLayer.videoEmbedCount?dataLayer.videoEmbedCount:"";var d,p=_satellite.getVar("TMG businessSegmentMapping");for(d in p)new RegExp(d).test(l)&&(l=p[d]);-1!=window.location.hash.indexOf("source=refresh")&&(t.events=void 0===t.events?"event7":t.events+",event7"),n&&(t.events=void 0===t.events?"event17:"+n:t.events+",event17:"+n),"register.moneytransfer.telegraph.co.uk"==window.location.host&&"/"==window.location.pathname&&(t.events=void 0===t.events?"event100":t.events+",event100"),t.eVar3=_satellite.getVar("TMG DL premiumContent")?_satellite.getVar("TMG DL premiumContent"):"false",t.eVar33=_satellite.getVar("TMG Meta premiumContentOnFirstPublish")?_satellite.getVar("TMG Meta premiumContentOnFirstPublish"):"false",t.eVar35=_satellite.getVar("TMG DL premiumOverride")?_satellite.getVar("TMG DL premiumOverride"):"false",t.pageName=u||window.location.pathname.replace(/\/$/,""),t.channel=l||t.eVar15,t.hier1=t.eVar15+";"+i+";"+o,t.referrer=/https?:\/\/tgr\.ph\//.test(document.referrer)?"https://www.facebook.com/":t.referrer,t.eVar106="aem ",t.eVar39="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",t.eVar73="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":"",t.eVar93="true"==_satellite.getVar("TMG DL premiumContent")?"D=pageName":""}},trackerProperties:{eVars:[{name:"eVar2",type:"value",value:"D=pageName"},{name:"eVar7",type:"value",value:"%TMG Meta Content Type%"},{name:"eVar9",type:"value",value:"%TMG Cookie customerID%"},{name:"eVar11",type:"value",value:"%TMG Meta Article Publish Date%"},{name:"eVar17",type:"value",value:"%TMG Responsive Site Viewports%"},{name:"eVar18",type:"value",value:"%TMG Meta MLC%"},{name:"eVar20",type:"value",value:"%TMG galleryImageNo%"},{name:"eVar21",type:"value",value:"%TMG Meta Business Segment%"},{name:"eVar26",type:"value",value:"%TMG DL storyType%"},{name:"eVar27",type:"value",value:"%TMG emailType%"},{name:"eVar29",type:"value",value:"%TMG DL pageID%"},{name:"eVar38",type:"value",value:"%TMG Meta Author%"},{name:"eVar43",type:"value",value:"%TMG paywallDisplayed%"},{name:"eVar44",type:"value",value:"%TMG Meta Spark CampaignID%"},{name:"eVar45",type:"value",value:"%TMG campaignLive%"},{name:"eVar49",type:"value",value:"%TMG DL flakeID%"},{name:"eVar53",type:"value",value:"%TMG Meta Spark Sponsor%"},{name:"eVar59",type:"value",value:"%TMG videoPlaylist%"},{name:"eVar91",type:"value",value:"%TMG DL pageType%"},{name:"eVar111",type:"value",value:"%TMG timeSincePublish%"},{name:"eVar112",type:"value",value:"%TMG Meta Article Publish Time%"},{name:"eVar118",type:"value",value:"%TMG regwallDisplayed%"},{name:"eVar141",type:"value",value:"%TMG icid%"},{name:"eVar155",type:"value",value:"%TMG Local Date%"}],props:[{name:"prop2",type:"value",value:"%TMG articleTitle%"},{name:"prop3",type:"value",value:"D=v7"},{name:"prop4",type:"value",value:"%TMG referrerStripped%"},{name:"prop5",type:"value",value:"D=pageName"},{name:"prop6",type:"value",value:"%TMG domain%"},{name:"prop9",type:"value",value:"D=v3"},{name:"prop10",type:"value",value:"D=v26"},{name:"prop11",type:"value",value:"D=v11"},{name:"prop15",type:"value",value:"D=v15"},{name:"prop17",type:"value",value:"D=v17"},{name:"prop18",type:"value",value:"D=v18"},{name:"prop21",type:"value",value:"D=v21"},{name:"prop22",type:"value",value:"D=v22"},{name:"prop23",type:"value",value:"D=v29"},{name:"prop26",type:"value",value:"D=v27"},{name:"prop29",type:"value",value:"D=v9"},{name:"prop35",type:"value",value:"D=v93"},{name:"prop43",type:"value",value:"D=v43"},{name:"prop44",type:"value",value:"D=v44"},{name:"prop45",type:"value",value:"D=v45"},{name:"prop46",type:"value",value:"D=v155"},{name:"prop53",type:"value",value:"D=v53"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLa10b36dacaa243b4bd1331d5d48ca231",name:"TMG SearchOpen",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"SearchOpen"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=document.getElementsByClassName("product-search__search-input js-search-input");t.eVar55=n.length?n[0].value.replace(/(?:\r\n|\r|\n|\t)/g," "):"",t.linkTrackVars+=_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event11"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Search Opened",linkType:"o"}}]},{id:"RLc68741a5b1aa4203a77601211cb8d8d8",name:"Spark - Timer Functions (Page)",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/financial-services/",valueIsRegex:!0}]},negate:!0},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!(!new RegExp(/telegraph reviews/).test(document.querySelector('meta[name="tmgads.keywords"]').getAttribute("content"))&&"sponsored"!=_satellite.getVar("TMG Meta Business Segment"))}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC633294b8a2a24572b8bce65bda3e34f8-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL7a07e8038f1f4d5b8938e752428faf3b",name:"CMP: Delete euconsent, Ooyala and Opentag cookies",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"/*jshint -W069 */\n(function() {\n  var cookies = {},\n    split,\n    nameValue,\n    i;\n  if (document.cookie && document.cookie !== \"\") {\n    split = document.cookie.split(\";\");\n    i = 0;\n    for (; i < split.length; i = i + 1) {\n      nameValue = split[i].split(\"=\");\n      nameValue[0] = nameValue[0].replace(/^ /, \"\");\n      cookies[decodeURIComponent(nameValue[0])] = decodeURIComponent(nameValue[1]);\n    }\n  }\n  // delete the new larger v2 cookie\n  if (cookies[\"euconsent-v2\"]){\n    document.cookie = 'euconsent-v2=; expires='+ (new Date(0).toUTCString()) +'; path=/;';\n  }\n  // delete the older cookie\n  if (cookies[\"euconsent\"]){\n    document.cookie = 'euconsent=; expires='+ (new Date(0).toUTCString()) +'; path=/;';\n  }\n  // delete the Ooyala cookie\n  if (cookies[\"Ooyala\"]){\n    document.cookie = 'Ooyala=; expires='+ (new Date(0).toUTCString()) +'; path=/';\n  }\n  // delete qubit opentag cookie\n  if (cookies[\"x_qtag_1096944\"]){\n    document.cookie = 'x_qtag_1096944=; expires='+ (new Date(0).toUTCString()) +'; path=/';\n  }\n  // delete qubit opentag cookie\n  if (cookies[\"x_qtag_aemsubsproduction\"]){\n    document.cookie = 'x_qtag_aemsubsproduction=; expires='+ (new Date(0).toUTCString()) +'; path=/';\n  }\n})();",language:"javascript"}}]},{id:"RL100dc25dffb8419fbb3ce22909e22a39",name:"TMG Paywall Shown",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%TMG paywallDisplayed%",rightOperand:"true"}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{trackerProperties:{events:[{name:"event43"}]}}}]},{id:"RL0c35f81e316e464b83fe59b8116ed3fa",name:"TMG Image Gallery View All",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".gallery__view-all",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar20=_satellite.getVar("TMG galleryImageNo"),t.eVar182=_satellite.getVar("TMG Gallery Total Images"),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event34"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RLd4942a48220d414eb18e168bd6f9990b",name:"Left Test Rule",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/customer\/secure\/payment/).test(window.location.href))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){window.tmg.pubsub.subscribe({topic:"tmg.martech.subscriptionCheckout.ready",func:function(){t.eVar61=dataLayer.subscription.productID,new RegExp(/monthly/).test(_satellite.getVar("TMG Subscription Offer ID"))?t.eVar62="Monthly":t.eVar62="Annually",t.events="event255",t.linkTrackEvents="event255",t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),t.tl(this,"e","Left's test"),_functions.setCookie("DtmSubIcid",_satellite.getVar("TMG icid"),864e5)},runIfAlreadyPublished:!0})}},trackerProperties:{}}}]},{id:"RLa219b746e25e4060adc3076fca922bb2",name:"Spark Interactive (Direct Call)",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"sparkinteractive"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar105="",t.eVar116="",t.linkTrackVars+=_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{eVars:[{name:"eVar88",type:"value",value:"%interactive%"}],events:[{name:"event94"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"sparkinteractive",linkType:"o"}}]},{id:"RLfc4f615c587b4641bc56edbad13d221f",name:"ADTECH: YouTube/AdBlock Fix [3.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(!new RegExp(/secure\.telegraph\.co\.uk\/|telegraph\.co\.uk\/customer/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC196522a11d1a4e678ce58e6416ecddf5-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL2cb29728ed3840c5b3af0086698b22d2",name:"3rd Party: Maxmiles Landing Page",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/customer\/subscribe\/maximiles/).test(window.location.href))return!0}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"console.log(\"maxmiles rule loaded\");\nfunction clear_reports_SiteTag_59() {\n    var cr_cid = 0;\n    var tp_cid = '';\n    var params = window.location.search.substring(1).split('&');\n    for (var i=0; i<params.length; i++) {\n\tvar pair = params[i].split('=');\n\tif ((pair[0] == 'cr_cid') && pair[1]) { cr_cid = parseInt(pair[1]); }\n\telse if ((pair[0] == 'gclid') && pair[1]) { tp_cid = pair[1]; }\n    }\n    if (cr_cid || tp_cid) {\n\tvar d = new Date();\n\td.setTime(d.getTime() + (365*24*60*60*1000));\n\tvar expires = 'expires=' + d.toUTCString() + '; ';\n\tvar hostnameParts = window.location.hostname.split('.').reverse();\n\tvar domain = hostnameParts[0];\n\tfor (var j=1; j<hostnameParts.length; j++) {\n\t    domain = hostnameParts[j] + '.' + domain;\n\t    document.cookie = 'cr___cd=1; ' + expires + 'domain=' + domain + '; path=/';\n\t    if (document.cookie.indexOf('cr___cd=1') > -1)\n\t\tbreak;\n\t}\n    console.log(\"does this maxmiles script get here\");\n\tvar cookieEnd = '; ' + expires + 'domain=' + domain + '; path=/';\n\tdocument.cookie = 'cr___cd=' + domain + cookieEnd;\n\tif (cr_cid) { document.cookie = 'cr___cid=' + cr_cid + cookieEnd; }\n\tif (tp_cid) { document.cookie = 'cr___tpcid=' + tp_cid + cookieEnd; }\n    }\n  console.log(\"end of maxmiles function\");\n}\nclear_reports_SiteTag_59();",language:"javascript"}}]},{id:"RLfd4ac50ef1454450a494216420fe310d",name:"Booking.com integration (Page)",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"^\\/travel\\/.*",valueIsRegex:!0}]}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){(function e(){void 0!==dataLayer.bookingTransactionId?newDate=new Date:setTimeout(function(){e()},0)})(),currDate=new Date,"travel-review"==_satellite.getVar("TMG Meta Content Type")?(t._bookingID=dataLayer.bookingTransactionId,t.eVar151=t._bookingID):(generateBookingTransactionID=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return"booking-"+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&15|64]+e[a>>24&255]+e[63&r|128]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]},t._bookingID=generateBookingTransactionID(),t.eVar151=t._bookingID,dataLayer.bookingTransactionId=t._bookingID)}}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var contentTypes = ['travel-review',\n    'travel-product-listing',\n    'universalListingRenderer',\n    'story',\n    'index',\n    'travel-destinations',\n    'gallery'\n];\n\nvar pageContentType = _satellite.getVar('TMG Meta Content Type');\n\n\nif(contentTypes.indexOf(pageContentType) > -1)\n{\nconsole.log(\"booking_2sec\");\n\ttry {\n        var updateLinks = function() \n        {\n            if (typeof s != 'undefined' && typeof s._bookingID != 'undefined') {\n                var bookingLinks = document.querySelectorAll('a[href*=\"booking.com\"]');\n                for (var i = 0; i < bookingLinks.length; i++) {\n                    var oldHref = bookingLinks[i].getAttribute('href');\n                    if (!oldHref.match(/booking-.*/)) {\n                        bookingLinks[i].setAttribute('href', oldHref.replace(/(label=.*);?/, 'label=' + s._bookingID));\n                    }\n                    // if calendar availabilty component is used update data-url attr that is used to generate booking.com link\n                    if (bookingLinks[i].hasAttribute('data-url')) {\n                        var oldDataUrl = bookingLinks[i].getAttribute('data-url');\n                        if (!oldHref.match(/booking-.*/)) {\n                            bookingLinks[i].setAttribute('data-url', oldHref.replace(/(label=.*);?/, 'label=' + s._bookingID));\n                        }\n                    }\n                }\n            }\n        };\n\t    setTimeout(updateLinks, 2000);\n\t} catch (e) {}\n\t\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var contentTypes = ['travel-review',\n    'travel-product-listing',\n    'universalListingRenderer',\n    'story',\n    'index',\n    'travel-destinations',\n    'gallery'\n];\n\nvar pageContentType = _satellite.getVar('TMG Meta Content Type');\n\n\nif(contentTypes.indexOf(pageContentType) > -1)\n{\nconsole.log(\"booking_DOM\");\n\tdocument.addEventListener(\"DOMContentLoaded\", function(event) {\n\t\tif (typeof s != 'undefined' && typeof s._bookingID != 'undefined') {\n\t\t\ttry {\n\t\t\t\tvar bookingLinks = document.querySelectorAll('a[href*=\"booking.com\"]');\n\t\t\t\tfor (var i = 0; i < bookingLinks.length; i++) {\n\t\t\t\t\tvar oldHref = bookingLinks[i].getAttribute('href');\n\t\t\t\t\tif (!oldHref.match(/booking-.*/)) {\n\t\t\t\t\t\tbookingLinks[i].setAttribute('href', oldHref.replace(/(label=.*);?/, 'label=' + s._bookingID));\n\t\t\t\t\t}\n\t\t\t\t\t// if calendar availabilty component is used update data-url attr that is used to generate booking.com link\n\t\t\t\t\tif (bookingLinks[i].hasAttribute('data-url')) {\n\t\t\t\t\t\tvar oldDataUrl = bookingLinks[i].getAttribute('data-url');\n\t\t\t\t\t\tif (!oldHref.match(/booking-.*/)) {\n\t\t\t\t\t\t\tbookingLinks[i].setAttribute('data-url', oldHref.replace(/(label=.*);?/, 'label=' + s._bookingID));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\t});\n\n}",language:"javascript"}}]},{id:"RL4cd1298a04d3408e95ec9fc13ce91a04",name:"TMG MyTelegraph Article Preferences",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/unfollowTopic|followTopic|followAuthor|unfollowAuthor|articleSave|articleRemove|followMyteam|unfollowMyteam/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n={articleSave:"event142",articleRemove:"event143",followAuthor:"event138",unfollowAuthor:"event139",unfollowTopic:"event141",followTopic:"event140",followMyteam:"event140",unfollowMyteam:"event141"};void 0!==t.events&&""!=t.events&&(t.events=""),""!=t.list3&&void 0!==t.list3&&(t.list3="");var a,r,o=_satellite.getVar("TMG DL event");for(i=0;o.length>i;i++)for(e in n)o[i]==e&&("followMyteam"==o[i]|"unfollowMyteam"==o[i]?t.eVar156="followMyteam":t.eVar156="article","articleSave"==o[i]|"articleRemove"==o[i]&&(a="",-1===window.location.pathname.indexOf("/mytelegraph/")&&(a=document.querySelector('meta[name="DCSext.Content_Type"]').content),t.eVar148=a),void 0!==t.events&&""!==t.events?t.events=t.events+","+n[o[i]]:t.events=n[o[i]],"event142"==(r=n[o[i]])||"event143"==r?(t.eVar157=dataLayer.pageName,t.eVar158=dataLayer.pageId):"event138"!=r&&"event139"!=r||(authors="",authors=dataLayer.author,authors=authors.replace(/\/authors\//g,""),authors=authors.replace(/\//g,""),t.list3=authors));t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),dataLayer.event=""}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"",linkType:"o"}}]},{id:"RL89303c4d73a64e8092c2b9fda2e99ca9",name:"Sheila Test Rule",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/customer\/subscribe\/why\-subscribe\/sheila\//).test(window.location.href))return!0}}}],actions:[{modulePath:"adobe-target-v2/lib/triggerView.js",settings:{page:!0,viewName:"%TMG Pathname%"}}]},{id:"RL62ef7cfc00764dc0b7ac8572f304a69a",name:"TMG AdBlock Message",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"TMG AdBlock Message"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar90="adBlockMessageShown",t.events="event80",t.linkTrackEvents="event80",t.linkTrackVars="events,eVar90,"+_satellite.getVar("TMG linkTrackVars");function n(){if(t.eVar90=this.getAttribute("data-tmg-name"),t.events="event80",t.linkTrackEvents="event80",t.linkTrackVars="events,eVar90,"+_satellite.getVar("TMG linkTrackVars"),null!==this.getAttribute("href"))return t.tl(this,"o","AdBlock Message Action"),!1;t.tl(!0,"o","AdBlock Message Action")}for(var a=document.querySelectorAll('[data-tmg-event="click"][data-tmg-name*="adBlock"]'),r=0;r<a.length;r++)a[r].addEventListener("click",n)}}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"AdBlock Message Shown",linkType:"o"}}]},{id:"RL6327171f099b45ca9d938e61fe04346c",name:"COMMERCIAL: Clear TMG Session cookie [1.0]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC575f15ce13af4933b805b4f732675d4b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL0e7204df0ea54d02a2e281a640ca9e2b",name:"TMG Debug",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"debug"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.linkTrackVars+=_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event123"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Debug",linkType:"o"}}]},{id:"RLd36876b1e5044fea9114fceb3d6347f3",name:"TMG Error Page",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/errorpages/).test(window.location.pathname))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.eVar7="errorpage"}},trackerProperties:{}}}]},{id:"RL14c8fb26d75e49eabab400f164ecb034",name:"TMG Exit links",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCe0e73a30afcd42a88ba9104e564d97a4-source.min.js",language:"javascript",isExternal:!0}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RCb13e63aa6c3247e7816258648cf50404-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL40c2da2d03cd48309166d03f387ec378",name:"Spark - 24 Million Mates test (Page)",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/travel/plan-your-australian-holiday/",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC340edb7f097543938bbae809419f049b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLefb55f3085d64c5eb0a99b8165382051",name:"TMG Particle Exits",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"window.addEventListener('message', function(e) {\n\ttry {\n\t\tvar message = JSON.parse(e.data);\n\t\tif(typeof message.name != \"undefined\" && message.name != \"\")\n\t\t{\n\t\t\tmessageURL = message.exitlink;\n\t\n\t\t\tvar href =  messageURL;\n\t\t\ts.events = 'event253';\n\t\t\ts.eVar142 =  href.substr(0, 255);\n\t\t\ts.linkTrackEvents = 'event253';\n\t\t\ts.linkTrackVars = 'events,eVar142,' + _satellite.getVar('TMG linkTrackVars');\n\t\t\ts.tl(this, 'e', this.href);\n\t\t}\n\t} catch (error) {}\n})",language:"javascript"}}]},{id:"RL45e7363808184f508996e5b914009354",name:"Paywall Tracking",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,r){function t(){r.eVar176="paywall listener triggered",console.log("BEFORE PREMIUM CHECK PAYWALL"),setTimeout(function(){r.eVar176="start of paywall tracking timeout",console.log("adobe: paywall loaded77777"),r.eVar43="true",r.events="event43",void 0!==dataLayer.martech&&void 0!==dataLayer.martech.product&&(console.log("dataLayer.martech.product before evar: "+dataLayer.martech.product),r.eVar153=dataLayer.martech.product),console.log("after the dataLayercheck"),r.eVar176="paywall tracking: before userstatus tracking";var e=_satellite.getVar("TMG Cookie customerID"),t=_satellite.getVar("TMG cookie tmg_p13n");if(_satellite.getVar("TMG Cookie logcheck"),r.eVar10=r.getNewRepeat(365,"s_vis_repeat"),r.eVar10+=e?";Logged in":";Logged out",t&&-1!=t.indexOf("readerType"))for(var n=t.split(","),a=0;a<n.length;a++)-1!=n[a].indexOf("readerType")&&(r.eVar10+=-1!=n[a].indexOf("subscriber")?";Subscriber":";Registered");else r.eVar10+=e?";Registered":";Anonymous";r.eVar176="paywall tracking: after userstatus tracking",r.linkTrackEvents=r.events,r.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),r.prop33="",r.tl(this,"o","paywallLaunch"),r.eVar43="",r.events="",r.linkTrackEvents="",r.linkTrackVars="",r.eVar176="end of paywall tracking"},1e3)}r.eVar176="paywall code initialised: waiting for listener",console.log("Adobe: set up piano listener1"),window.tmg.pubsub.subscribe({topic:"tmg.page.pianoready",func:function(){window.tmg.pubsub.subscribe({topic:"tmg.martech.paywall.ready",func:t,runIfAlreadyPublished:!0}),setTimeout(function(){window.tmg.pubsub.publishedTopics.includes("tmg.martech.paywall.ready")||(window.tmg.pubsub.unsubscribe({topic:"tmg.martech.paywall.ready"}),t())},400)},runIfAlreadyPublished:!0})}},trackerProperties:{}}}]},{id:"RLbd7f99971c83475b9cc6cbd7032bda9c",name:"Spark - Pfizer / Erectile problems (Page)",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/health-fitness/living-with-erectile-dysfunction/",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC21ecfff8e88f41529e55a95ded2da493-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL64a260c43db04540bcd948aa11200738",name:"TMG Youtube Video",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return document.querySelectorAll(".video-player-youtube__source")}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:'tmg.pubsub.subscribe({\n  topic : \'tmg.youtube.ready\',\n  func  : function(){\n  console.log("youtubeVideoPlayerReady event");\n\tplayerArray =  [];\n\tvideoArray = [];\t\n\tvar videoList = document.querySelectorAll(\'iframe[src*="youtube.com/embed/"]\');\n        \n\tfor (var i = 0; i < videoList.length; i++) {\n\t  var iframe = videoList[i];    \n\t  var iframeSrc = iframe.getAttribute(\'src\');     \n\t  var playerID = iframe.getAttribute(\'id\');  \n\t  videoArray[i] = {};\n\t  videoArray[i].id = playerID;\n\t  videoArray[i].pid = playerID; \n\t\t}\n  },\n  runIfAlreadyPublished: true\n});\n\n\nfunction onPlayerStateChange(e) {\n  console.log("onPlayerStateChange event");\n  var mediaName = \'YouTube|\' + e.target.getVideoData().video_id + \'|\' + e.target.getVideoData().title.replace(/\\|/g,\';\');\n  var mediaLength = Math.floor(e.target.getDuration());\n  var mediaOffset = Math.floor(e.target.getCurrentTime());\n  var mediaPlayerName = "Youtube";\n   \n  if (e.data == 1) {\n    console.log("AA: youtube video playing");\n      //playing\n      if (mediaOffset === 0) {\n          s.Media.open(mediaName, mediaLength, mediaPlayerName);\n          s.Media.play(mediaName, mediaOffset);\n      } else {\n          s.Media.play(mediaName, mediaOffset);\n      }\n  }\n  if (e.data == 2) {\n    \tconsole.log("AA: youtube video paused");\n      //paused\n      s.Media.stop(mediaName, mediaOffset);\n  }\n  if (e.data == 3) {\n    \tconsole.log("AA: youtube video buffering");\n      //buffering\n      s.Media.stop(mediaName, mediaOffset);\n  }\n  if (e.data === 0) {\n    \tconsole.log("AA: youtube video ended");\n      //ended\n      s.Media.stop(mediaName, mediaOffset);\n      s.Media.close(mediaName);\n      mediaOffset = 0;\n  }\n}',language:"javascript"}}]},{id:"RL3c5f2768916a4bc4a6becab3962c36c8",name:"Spark - Bluekai (Page)",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/pathAndQuerystring.js",settings:{paths:[{value:"/travel/explore-dubai/",valueIsRegex:!0}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC34c437d951ab4935a0435a3d18bc62e2-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLcbc6786229984e46ad7ec0805d6db3df",name:"TMG Martech Data Layer Initialize",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"window.martech = window.martech || {};\nwindow.martech.thirdparty = window.martech.thirdparty || {};\nwindow.martech.thirdparty.adobeLaunch = window.martech.thirdparty.adobeLaunch || {}\nwindow.martech.thirdparty.adobeLaunch.platform = 'aem'",language:"javascript"}}]},{id:"RLfe9fd020a3c249aa9ba25b312c811037",name:"TMG Fetch Events Marketing Codes",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"tmgFunctions = _satellite.getVar(\"TMG Functions\");\nvar pathname = document.location.pathname;\nvar tags = {\n    'business_events': {\n        'cat': 'event0',\n        'id': '6260248',\n        'type': 'event00g'\n    },\n    'events': {\n        'cat': 'event0',\n        'id': '6260248',\n        'type': 'event0'\n    }, \n  \t'business_festival_homepage': {\n        'cat': 'event0',\n        'id': '6260248',\n        'type': 'event00m'\n    },\n  \t'kirsty': {\t\n        'cat': 'event0',\n        'id': '6260248',\n        'type': 'kirst0'\n    },\n  \t'whiskey': {\t\n        'cat': 'whisk0',\n        'id': '6260248',\n        'type': 'whisk0'\n    }\n};\n\nvar fireTag = function(tagName, tags) {\n    iframeSrc = '//' + tags[tagName].id + '.fls.doubleclick.net/activityi;src=' + tags[tagName].id + ';type=' + tags[tagName].type + ';cat=' + tags[tagName].cat + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + String(Math.random()).slice(2) + '?';\n    tmgFunctions.htmlBuilder(iframeSrc, \"iframe\");\n};\n\nif (/^\\/business\\/events\\/$/.test(pathname)) {\n    fireTag('business_events', tags);\n} else if (/^\\/events\\/$/.test(pathname)) {\n    fireTag('events', tags);\n} else if (/^\\/business\\/festival\\-of\\-business\\/$/.test(pathname)) {\n    fireTag('business_festival_homepage', tags);\n}\n\nif (pathname.indexOf(\"/events/telegraphbespoke/an-evening-with-kirstie-allsopp/\") > -1){\n     fireTag('kirsty', tags);\n} \n\nif (pathname.indexOf(\"/events/the-telegraph-whisky-experience/\") > -1){\n     fireTag('whiskey', tags);\n}",language:"javascript"}}]},{id:"RL3e7890efedf14905a5c9544b0b01c0c5",name:"TMG Ooyala Video",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return document.querySelector(".videoPlayer")}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'if(!(new RegExp(/secure\\.telegraph\\.co\\.uk|www\\.telegraph\\.co\\.uk\\/customer\\/subscribe/).test(window.location.pathname))){\n\nwindow.addEventListener(\'dtm:ooyala-player-initialised\', function(e) {\n    var oplayer = e.detail.oplayer;\n    oplayer._status = \'start\';\n    oplayer.mb.subscribe(\'*\', \'AdobeAnalytics\', function(eventName) {\n        var mediaName = "Ooyala|" + oplayer.getEmbedCode() + "|" + oplayer.getTitle().replace(/\\|/g, \';\');\n        var mediaOffset = 0;\n        var mediaLength = oplayer.parameters.actualDuration ? parseInt(oplayer.parameters.actualDuration) : Math.floor(oplayer.getDuration());\n        var mediaPlayerName = \'Ooyala\';\n        var videoType = oplayer.parameters.videoType;\n        var autoplay = oplayer.parameters.autoplay;\n        switch (eventName) {\n            case OO.EVENTS.WILL_PLAY_ADS:\n\t\t\t\t\t\t\t\ts.eVar46 = mediaLength;\n                s.eVar70 = mediaName;\n                s.eVar108 = videoType;\n                s.eVar109 = autoplay;\n                s.events = "event78";\n                s.linkTrackVars = "events," + _satellite.getVar(\'TMG linkTrackVars\');\n                s.linkTrackEvents = "event78";\n                s.tl(true, \'o\', "Video Ad Start");\n                break;\n            case OO.EVENTS.ADS_PLAYED:\n\t\t\t\t\t\t\t\ts.eVar46 = mediaLength;\n                s.eVar70 = mediaName;\n                s.eVar108 = videoType;\n                s.eVar109 = autoplay;\n                s.events = "event79";\n                s.linkTrackVars = "events," + _satellite.getVar(\'TMG linkTrackVars\');\n                s.linkTrackEvents = "event79";\n                s.tl(true, \'o\', "Video Ad End");\n                break;\n            case OO.EVENTS.PLAYING:\n                if (!oplayer.adPlaying) {\n                    if (oplayer._status == \'start\') {\n\t\t\t\t\t\t\t\t\t\t\t\ts.eVar46 = mediaLength;\n                        s.eVar108 = videoType;\n                        s.eVar109 = autoplay;\n                        s.Media.open(mediaName, mediaLength, mediaPlayerName);\n                        s.Media.play(mediaName, mediaOffset);\n                        oplayer._status = "play";\n                    } else {\n\t\t\t\t\t\t\t\t\t\t\t\ts.eVar46 = mediaLength;\n                        s.eVar108 = videoType;\n                        s.eVar109 = autoplay;\n                        mediaOffset = Math.floor(oplayer.getPlayheadTime());\n                        s.Media.play(mediaName, mediaOffset);\n                        oplayer._status = "play";\n                    }\n                }\n                break;\n            case OO.EVENTS.PAUSED:\n                if (!oplayer.adPlaying && oplayer._status == \'play\') {\n\t\t\t\t\t\t\t\t\t\ts.eVar46 = mediaLength;\n                    s.eVar108 = videoType;\n                    s.eVar109 = autoplay;\n                    mediaOffset = Math.floor(oplayer.getPlayheadTime());\n                    s.Media.stop(mediaName, mediaOffset);\n                    oplayer._status = "pause";\n                }\n                break;\n            case OO.EVENTS.PLAYED:\n                if (!oplayer.adPlaying) {\n\t\t\t\t\t\t\t\t\t\ts.eVar46 = mediaLength;\n                    s.eVar108 = videoType;\n                    s.eVar109 = autoplay;\n                    mediaOffset = Math.floor(oplayer.getPlayheadTime());\n                    s.Media.stop(mediaName, mediaOffset);\n                    s.Media.close(mediaName);\n                }\n                break;\n        }\n    });\n});\n  \n}',language:"javascript"}}]},{id:"RL59c89743fed2481daff526a7f1e94dc3",name:"TMG Comment",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"dataLayerEventChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(new RegExp(/commentCountTop|commentCountBottom|showMoreComments|showComments|commented|deletedComment/).test(dataLayer.event))return!0}}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){console.log("comment tracking triggered");var n={commentCountTop:"event248",commentCountBottom:"event249",showMoreComments:"event251",showComments:"event250",commented:"event247",deletedComment:"event252"};t.eVar147=dataLayer.comments;var a,r=_satellite.getVar("TMG DL event");for(i=0;r.length>i;i++)for(e in n)r[i]==e&&(console.log("comment Type: "+dataLayer.commentType),t.eVar119=dataLayer.commentType,t.events=n[r[i]],t.linkTrackEvents=n[r[i]],t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars"),"event247"==n[r[i]]&&(a=_satellite.getVar("TMG Meta Article ID")||!1)&&adobe.target.trackEvent({mbox:"articleComment",params:{orderId:Date.now().toString(),orderTotal:0,productPurchasedId:a+"articlecomment","entity.id":a+"articlecomment","entity.conversionType":"articlecomment"}}),dataLayer.event="",dataLayer.commentType="")}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Comment Tracking",linkType:"o"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC3016cb700a99487fbea9b51b30c54c9b-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLe8a5f91709564db7bf0476a2a768ecc4",name:"TMG Image Gallery",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".gallery__arrow",bubbleFireIfChildFired:!1},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n,a=document.getElementsByClassName(".gallery__skip-ad"),r=!1;for(i=0;i<a.length;i++)a[0]&&!0!=(n=a[0],null===window.getComputedStyle(n).display)&&(r=!0);t.eVar2=dataLayer.rollupContentPath,t.eVar20=r?"ad":_satellite.getVar("TMG galleryImageNo"),t.eVar182=_satellite.getVar("TMG Gallery Total Images"),-1<this.className.split(" ").indexOf("gallery__arrow-right")?t.eVar181="Next":-1<this.className.split(" ").indexOf("gallery__arrow-left")&&(t.eVar181="Previous"),t.linkTrackEvents=t.events,t.linkTrackVars+="events,"+_satellite.getVar("TMG linkTrackVars")}},trackerProperties:{events:[{name:"event12"}]}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLa29b66da144b46fe97a8ac6d95c5feb0",name:"COMMERCIAL: Custom Affiliate Link [v1.2]",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/bb77750356fd/42bfe6bcc850/7ff89b7f1a62/RC4bbc108e88c54c04a990c12e764fcca0-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL9fbbfaeeec0b47ff9f923af83d07325d",name:"Migrated from DTM: Adobe Analytics - Send Beacon on every page (Page)",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:100}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.prop33="true"}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.prop33=""}},trackerProperties:{}}}]},{id:"RL8e99590587774a18a7c1b6b40aa7414f",name:"TMG Component Tracking ",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){buildAnalyticsString=function(e){var t=e.componentName;return t+=";",e.destination?t+=e.destination+"_"+e.linkType:t+=e.linkType,t+(";"+e.pageOfUse)};var n=document.referrer.replace(/\/?(\?.*)?$/,""),a="untracked_component_used",r="",i="",o="",s="";try{n&&0!==n.length?-1==n.indexOf("telegraph.co.uk")?a="external_navigation":_satellite.readCookie("tmgComponentTracking")?(cookieValue=JSON.parse(decodeURIComponent(_satellite.readCookie("tmgComponentTracking"))),r=cookieValue.componentName.replace(/(?:\r\n|\r|\n|\t)/g," "),i=cookieValue.destination.replace(/(?:\r\n|\r|\n|\t)/g," "),o=cookieValue.linkType.replace(/(?:\r\n|\r|\n|\t)/g," "),s=cookieValue.pageOfUse.replace(/(?:\r\n|\r|\n|\t)/g," "),a=buildAnalyticsString(cookieValue).replace(/(?:\r\n|\r|\n|\t)/g," "),_satellite.removeCookie("tmgComponentTracking")):localStorage&&(localStorage.getItem("tmgComponentTracking"),localStorageData=_satellite.getVar("TMG Component Tracking Local Storage"),a=void 0!==localStorageData.index&&""!=localStorageData.index&&localStorageData.index?(r=localStorageData.index.replace(/(?:\r\n|\r|\n|\t)/g," ")+"-"+localStorageData.componentName.replace(/(?:\r\n|\r|\n|\t)/g," "))+";"+(i=localStorageData.destination.replace(/(?:\r\n|\r|\n|\t)/g," "))+"_"+(o=localStorageData.linkType.replace(/(?:\r\n|\r|\n|\t)/g," "))+";"+(s=localStorageData.pageOfUse.replace(/(?:\r\n|\r|\n|\t)/g," ")):(r=localStorageData.componentName.replace(/(?:\r\n|\r|\n|\t)/g," "),i=localStorageData.destination.replace(/(?:\r\n|\r|\n|\t)/g," "),o=localStorageData.linkType.replace(/(?:\r\n|\r|\n|\t)/g," "),s=localStorageData.pageOfUse.replace(/(?:\r\n|\r|\n|\t)/g," "),buildAnalyticsString(localStorageData).replace(/(?:\r\n|\r|\n|\t)/g," ")),localStorage.removeItem("tmgComponentTracking")):a="no_referrer"}catch(e){}t.eVar16=a,""!==r&&(t.eVar94=r),""!==i&&(t.eVar95=i),""!==o&&(t.eVar96=o),""!==s&&(t.eVar97=s),t.prop16="D=v16"}},trackerProperties:{}}}]}]};var _satellite=function(){"use strict";function e(e){var t={exports:{}};return e(t,t.exports),t.exports}function c(e){return Boolean(e&&void 0!==e.length)}function a(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function r(n,a){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?a.onFulfilled:a.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void s(a.promise,e)}o(a.promise,e)}else(1===n._state?o:s)(a.promise,n._value)})):n._deferreds.push(a)}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void d((a=n,r=e,function(){a.apply(r,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}var a,r}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}if(window.atob){var t=function(e,n){function a(){return"true"===e.getItem("debug")}var r=[];return n.outputEnabled=a(),{onDebugChanged:function(e){r.push(e)},getDebugEnabled:a,setDebugEnabled:function(t){a()!==t&&(e.setItem("debug",t),n.outputEnabled=t,r.forEach(function(e){e(t)}))}}},p=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},n="log",f="info",m="debug",g="warn",v="error",h=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":"",b=!1,y=function(e){var t;b&&window.console&&((t=Array.prototype.slice.call(arguments,1)).unshift(h),e!==m||window.console[e]||(e=f),window.console[e].apply(window.console,t))},k=y.bind(null,n),T=y.bind(null,f),w=y.bind(null,m),_=y.bind(null,g),C=y.bind(null,v),S={log:k,info:T,debug:w,warn:_,error:C,deprecation:function(){var e=b;b=!0,y.apply(null,Array.prototype.concat(g,Array.prototype.slice.call(arguments))),e||(b=!1)},get outputEnabled(){return b},set outputEnabled(e){b=e},createPrefixedLogger:function(e){e="["+e+"]";return{log:k.bind(null,e),info:T.bind(null,e),debug:w.bind(null,e),warn:_.bind(null,e),error:C.bind(null,e)}}},M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},E=e(function(e){var t;t=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n,a=arguments[e];for(n in a)t[n]=a[n]}return t}function l(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(c){function o(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},o.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var a=JSON.stringify(t);/^[\{\[]/.test(a)&&(t=a)}catch(e){}t=c.write?c.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r,i="";for(r in n)n[r]&&(i+="; "+r,!0!==n[r]&&(i+="="+n[r].split(";")[0]));return document.cookie=e+"="+t+i}}function t(e,t){if("undefined"!=typeof document){for(var n={},a=document.cookie?document.cookie.split("; "):[],r=0;r<a.length;r++){var i=a[r].split("="),o=i.slice(1).join("=");t||'"'!==o.charAt(0)||(o=o.slice(1,-1));try{var s=l(i[0]),o=(c.read||c)(o,s)||l(o);if(t)try{o=JSON.parse(o)}catch(e){}if(n[s]=o,e===s)break}catch(e){}}return e?n[e]:n}}return o.set=n,o.get=function(e){return t(e,!1)},o.getJSON=function(e){return t(e,!0)},o.remove=function(e,t){n(e,"",s(t,{expires:-1}))},o.defaults={},o.withConverter=e,o}(function(){})},e.exports=t()}),P={get:E.get,set:E.set,remove:E.remove},D=window,L=function(n,e){var a="com.adobe.reactor."+(e||"");return{getItem:function(e){try{return D[n].getItem(a+e)}catch(e){return null}},setItem:function(e,t){try{return D[n].setItem(a+e,t),!0}catch(e){return!1}}}},V="dataElements.",I="dataElementCookiesMigrated",x=L("localStorage"),j=L("sessionStorage",V),A=L("localStorage",V),O="pageview",R="session",N="visitor",G={},F=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},B=function(e,t,n){var a;switch(t){case O:return void(G[e]=n);case R:return void((a=F(n))&&j.setItem(e,a));case N:return void((a=F(n))&&A.setItem(e,a))}},q=B,U=function(e,t){var n;switch(t){case O:return G.hasOwnProperty(e)?G[e]:null;case R:return null===(n=j.getItem(e))?n:JSON.parse(n);case N:return null===(n=A.getItem(e))?n:JSON.parse(n)}},H=function(a){x.getItem(I)||(Object.keys(a).forEach(function(e){var t,n;n=a[t=e].storageDuration,void 0!==(e=P.get("_sdsat_"+t))&&B(t,n,e)}),x.setItem(I,!0))},W=function(e,t,n,a){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+n+(a?"\n"+a:"")},z={text:function(e){return e.textContent},cleanText:function(e){return p(e.textContent)}},$=function(e,t,n){for(var a,r=e,i=0,o=t.length;i<o;i++){if(null==r)return;var s,c=t[i];r=n&&"@"===c.charAt(0)?(s=c.slice(1),z[s](r)):r.getAttribute&&(a=c.match(/^getAttribute\((.+)\)$/))?(s=a[1],r.getAttribute(s)):r[c]}return r},Y=function(){function e(e){var t,n,a,r=o(e);return r.hasOwnProperty("exports")||(r.exports=(t=r.definition.script,n=r.require,a=r.turbine,e={exports:{}},t.call(e.exports,e,e.exports,n,a),e.exports)),r.exports}var i={},o=function(e){var t=i[e];if(!t)throw new Error("Module "+e+" not found.");return t};return{registerModule:function(e,t,n,a,r){r={definition:t,extensionName:n,require:a,turbine:r};r.require=a,i[e]=r},hydrateCache:function(){Object.keys(i).forEach(function(t){try{e(t)}catch(e){t="Error initializing module "+t+". "+e.message+(e.stack?"\n"+e.stack:"");S.error(t)}})},getModuleExports:e,getModuleDefinition:function(e){return o(e).definition},getModuleExtensionName:function(e){return o(e).extensionName}}},Q=!1,J=function(a,r,i){function o(e,t,n){return a(t)?(s.push(t),n=r(t,n),s.pop(),null==n&&i?"":n):e}var s=[],n=function(e,n){var t=/^%([^%]+)%$/.exec(e);return t?o(e,t[1],n):e.replace(/%(.+?)%/g,function(e,t){return o(e,t,n)})},c=function(e,t){for(var n={},a=Object.keys(e),r=0;r<a.length;r++){var i=a[r],o=e[i];n[i]=u(o,t)}return n},l=function(e,t){for(var n=[],a=0,r=e.length;a<r;a++)n.push(u(e[a],t));return n},u=function(e,t){return"string"==typeof e?n(e,t):Array.isArray(e)?l(e,t):"object"==typeof e&&null!==e?c(e,t):e};return function(e,t){return 10<s.length?(S.error("Data element circular reference detected: "+s.join(" -> ")),e):u(e,t)}},K=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(a);return r(this,new u(e,t,n)),n},i.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},i.all=function(t){return new i(function(r,i){if(!c(t))return i(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return r([]);for(var s=o.length,e=0;e<o.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var a=e.then;if("function"==typeof a)return a.call(e,function(e){t(n,e)},i),0}o[n]=e,0==--s&&r(o)}catch(e){i(e)}}(e,o[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(r){return new i(function(e,t){if(!c(r))return t(new TypeError("Promise.race accepts an array"));for(var n=0,a=r.length;n<a;n++)i.resolve(r[n]).then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){K(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var X,Z,ee=function(n){if(n.__esModule)return n;var a=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(a,e,t.get?t:{enumerable:!0,get:function(){return n[e]}})}),a}(Object.freeze({__proto__:null,default:i})),te="undefined"!=typeof window&&window.Promise||M.Promise||ee.default||ee,ne=te.resolve(),ae=function(o,s,c,l){return function(t,e){var n,a;if(t.conditions)for(var r=0;r<t.conditions.length;r++){n=t.conditions[r];try{var i=o(n,e,[e]);if(a=i,Boolean(a&&"object"==typeof a&&"function"==typeof a.then))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!s(n,i))return c(n,t),!1}catch(e){return l(n,t,e),!1}}return!0}},re=function(e,t,n){return'Failed to execute "'+e+'" for "'+t+'" rule. '+n.message+(n.stack?"\n"+n.stack:"")},ie=function(e,t){return t&&!e.negate||!t&&e.negate},oe=[],se=!1,ce=function(e){se?e():oe.push(e)},le=function(e){var t;return(e=e||new Error("The extension triggered an error, but no error information was provided."))instanceof Error||(t="object"==typeof e?JSON.stringify(e):String(e),e=new Error(t)),e},ue=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,fe=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return}}()?Object.assign:function(e){for(var t,n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var r in t=Object(arguments[a]))de.call(t,r)&&(n[r]=t[r]);if(ue)for(var i=ue(t),o=0;o<i.length;o++)pe.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n},me=".js",ge=function(e){return e.substr(0,e.lastIndexOf("/"))},ve=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},he=document,be=function(e,t,n,a){n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var i=/\+/g;e=e.split(t=t||"&");t=1e3;a&&"number"==typeof a.maxKeys&&(t=a.maxKeys);var o=e.length;0<t&&t<o&&(o=t);for(var s=0;s<o;++s){var c,l=e[s].replace(i,"%20"),u=l.indexOf(n),u=0<=u?(c=l.substr(0,u),l.substr(u+1)):(c=l,""),l=decodeURIComponent(c),u=decodeURIComponent(u);Object.prototype.hasOwnProperty.call(r,l)?Array.isArray(r[l])?r[l].push(u):r[l]=[r[l],u]:r[l]=u}return r},ye=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},ke=function(n,a,r,e){return a=a||"&",r=r||"=","object"==typeof(n=null===n?void 0:n)?Object.keys(n).map(function(e){var t=encodeURIComponent(ye(e))+r;return Array.isArray(n[e])?n[e].map(function(e){return t+encodeURIComponent(ye(e))}).join(a):t+encodeURIComponent(ye(n[e]))}).join(a):e?encodeURIComponent(ye(e))+r+encodeURIComponent(ye(n)):""},Te=e(function(e,t){t.decode=t.parse=be,t.encode=t.stringify=ke}),we="@adobe/reactor-",_e={cookie:P,document:he,"load-script":function(e){var t=document.createElement("script");t.src=e,t.async=!0;var n,a,e=(n=e,a=t,new te(function(e,t){a.onload=function(){e(a)},a.onerror=function(){t(new Error("Failed to load script "+n))}}));return document.getElementsByTagName("head")[0].appendChild(t),e},"object-assign":fe,promise:te,"query-string":{parse:function(e){return"string"==typeof e&&(e=e.trim().replace(/^[?#&]/,"")),Te.parse(e)},stringify:function(e){return Te.stringify(e)}},window:D},n=function(e,l,u,d,p){var f,s,c,m=e.extensions,g=e.buildInfo,v=e.property.settings;return m&&(s=m,c=l,f=function(e,t){e=s[e];if(e){var n=e.modules;if(n)for(var a=Object.keys(n),r=0;r<a.length;r++){var i=a[r],o=n[i];if(o.shared&&o.name===t)return c.getModuleExports(i)}}},Object.keys(m).forEach(function(r){var e,t,n,i,a,o,s=m[r],c=(e=d,t=s.settings,function(){return t?e(t):{}});s.modules&&(n=S.createPrefixedLogger(s.displayName),a=s.hostedLibFilesBaseUrl,o=g.minified,i={buildInfo:g,getDataElementValue:p,getExtensionSettings:c,getHostedLibFileUrl:function(e){var t;return o&&((t=e.split(".")).splice(t.length-1||1,0,"min"),e=t.join(".")),a+e},getSharedModule:f,logger:n,propertySettings:v,replaceTokens:d,onDebugChanged:u.onDebugChanged,get debugEnabled(){return u.getDebugEnabled()}},Object.keys(s.modules).forEach(function(t){var n,e=s.modules[t],a=(n=function(e){e=function(e,t){ve(t,me)||(t+=me);var t=t.split("/"),n=ge(e).split("/");return t.forEach(function(e){e&&"."!==e&&(".."===e?n.length&&n.pop():n.push(e))}),n.join("/")}(t,e);return l.getModuleExports(e)},function(e){if(0===e.indexOf(we)){var t=e.substr(we.length),t=_e[t];if(t)return t}if(0===e.indexOf("./")||0===e.indexOf("../"))return n(e);throw new Error('Cannot resolve module "'+e+'".')});l.registerModule(t,e,r,a,i)}))}),l.hydrateCache()),l},v=window._satellite;return v&&!window.__satelliteLoaded&&(window.__satelliteLoaded=!0,E=v.container,delete v.container,V=E.property.settings.undefinedVarsReturnEmpty,M=E.property.settings.ruleComponentSequencingEnabled,H(X=E.dataElements||{}),ee=Y(),_t=ee,St=function(){return Z.apply(null,arguments)},he=function(t,e){var n=Ct(t);if(!n)return Mt?"":void 0;var a,r,i=n.storageDuration;try{a=_t.getModuleExports(n.modulePath)}catch(e){return void S.error(W(n,t,e.message,e.stack))}if("function"==typeof a){try{r=a(St(n.settings,e),e)}catch(e){return void S.error(W(n,t,e.message,e.stack))}return i&&(null!=r?q(t,i,r):r=U(t,i)),"string"==typeof(r=null==r&&null!=n.defaultValue?n.defaultValue:r)&&(n.cleanText&&(r=p(r)),n.forceLowerCase&&(r=r.toLowerCase())),r}S.error(W(n,t,"Module did not export a function."))},H=function(e,t){if("string"==typeof e)wt[e]=t;else if(e){var n,a=e;for(n in a)wt[n]=a[n]}},Y=function(e){var t=e.split(".")[0];return Boolean(Tt(e)||"this"===t||"event"===t||"target"===t||kt.hasOwnProperty(t))},ht=kt=wt={},bt=Tt=Ct=function(e){return X[e]},yt=he,Z=J(Y,Y=function(e,t){var n,a;return bt(e)?n=yt(e,t):"this"===(e=(a=e.split(".")).shift())?t&&(n=$(t.element,a,!0)):"event"===e?t&&(n=$(t,a)):"target"===e?t&&(n=$(t.target,a)):n=$(ht[e],a),n},Mt=V),function(e,t,n,a,r){var i=S.createPrefixedLogger("Custom Script");e.track=function(e){S.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name},e.company=t.company,e.buildInfo=t.buildInfo,e.logger=i,e.notify=function(e,t){switch(S.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:i.info(e);break;case 4:i.warn(e);break;case 5:i.error(e);break;default:i.log(e)}},e.getVar=a,e.setVar=r,e.setCookie=function(e,t,n){var a="",r={};n&&(a=", { expires: "+n+" }",r.expires=n),S.deprecation('_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+a+")."),P.set(e,t,r)},e.readCookie=function(e){return S.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),P.get(e)},e.removeCookie=function(e){S.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),P.remove(e)},e.cookie=P,e.pageBottom=function(){},e.setDebug=n;var o=!1;Object.defineProperty(e,"_container",{get:function(){return o||(S.warn("_satellite._container may change at any time and should only be used for debugging."),o=!0),t}})}(v,E,(L=t(L("localStorage"),S)).setDebugEnabled,Y,H),n(E,ee,L,Z,he),vt=v,gt=Z,L=function(e,t){var n=ut(e);dt.log('Condition "'+n+'" for rule "'+t.name+'" was not met.'),pt("ruleConditionFailed",{rule:t,condition:e})},he=function(e,t,n){var a=st(e);ct.error(ot(a,t.name,n)),lt("ruleConditionFailed",{rule:t,condition:e})},at=st=ut=function(e){var t=ft.getModuleDefinition(e.modulePath);return t&&t.displayName||e.modulePath},je=M,Qe=ae(ae=function(e,t,n){n=n||[];var a=mt.getModuleExports(e.modulePath);if("function"!=typeof a)throw new Error("Module did not export a function.");t=gt(e.settings||{},t);return a.bind(null,t).apply(null,n)},ie,L,he),Je=function(t,e){var n;if(t.actions)for(var a=0;a<t.actions.length;a++){n=t.actions[a];try{Ke(n,e,[e])}catch(e){return void Xe(n,t,e)}}Ze(t)},Ae=function(e,t){Qe(e,t)&&Je(e,t)},ze=ie,$e=he,Ye=L,Ne=function(o,t,s,e){return e.then(function(){var i;return new te(function(e,t){var n=He(o,s,[s]),a=o.timeout,r=new te(function(e,t){i=setTimeout(function(){t(new Error("A timeout occurred because the condition took longer than "+a/1e3+" seconds to complete. "))},a)});te.race([n,r]).then(e,t)}).catch(function(e){return clearTimeout(i),e=We(e),$e(o,t,e),te.reject(e)}).then(function(e){if(clearTimeout(i),!ze(o,e))return Ye(o,t),te.reject()})})},qe=We=le,Ue=Xe=function(e,t,n){var a=at(e);rt.error(nt(a,t.name,n)),it("ruleActionFailed",{rule:t,action:e})},Ge=function(s,t,c,e){return e.then(function(){var i,o=s.delayNext;return new te(function(e,t){var n=Be(s,c,[c]);if(!o)return e();var a=s.timeout,r=new te(function(e,t){i=setTimeout(function(){t(new Error("A timeout occurred because the action took longer than "+a/1e3+" seconds to complete. "))},a)});te.race([n,r]).then(e,t)}).catch(function(e){return clearTimeout(i),e=qe(e),Ue(s,t,e),te.reject(e)}).then(function(){clearTimeout(i)})})},Fe=Ze=function(e){et.log('Rule "'+e.name+'" fired.'),tt("ruleCompleted",{rule:e})},Oe=function(t,n){return t.conditions&&t.conditions.forEach(function(e){ne=Ne(e,t,n,ne)}),t.actions&&t.actions.forEach(function(e){ne=Ge(e,t,n,ne)}),ne=(ne=ne.then(function(){Fe(t)})).catch(function(){})},Re=tt=it=lt=pt=function(t,n){var e=vt._monitors;e&&(Q||(S.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),Q=!0),e.forEach(function(e){e[t]&&e[t](n)}))},Ee=function(e,t){Re("ruleTriggered",{rule:t}),(je?Oe:Ae)(t,e)},Pe=Be=He=Ke=ae,De=function(e,t){return fe(t=t||{},e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return S.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},Le=nt=ot=re,xe=ft=mt=ee,Ve=function(e){var t=e.rule,n=e.event,e=xe.getModuleDefinition(n.modulePath).name;return{$type:xe.getModuleExtensionName(n.modulePath)+"."+e,$rule:{id:t.id,name:t.name}}},Ie=et=rt=ct=dt=S,Ce=function(e){var n=[];return e.forEach(function(t){t.events&&t.events.forEach(function(e){n.push({rule:t,event:e})})}),n.sort(function(e,t){return e.event.ruleOrder-t.event.ruleOrder})},Se=E.rules||[],Me=function(n,e){var a=e.rule,t=e.event;t.settings=t.settings||{};try{var r=Ve(e);Pe(t,null,[function(e){var t=De(r,e);n(function(){Ee(t,a)})}])}catch(e){Ie.error(Le(t,a,e))}},Ce(Se).forEach(function(e){Me(ce,e)}),se=!0,oe.forEach(function(e){e()}),oe=[]),v}var Ce,Se,Me,Ee,Pe,De,Le,Ve,Ie,xe,je,Ae,Oe,Re,Ne,Ge,Fe,Be,qe,Ue,He,We,ze,$e,Ye,Qe,Je,Ke,Xe,Ze,et,tt,nt,at,rt,it,ot,st,ct,lt,ut,dt,pt,ft,mt,gt,vt,ht,bt,yt,kt,Tt,wt,_t,Ct,St,Mt;console.warn("Adobe Launch is unsupported in IE 9 and below.")}();
