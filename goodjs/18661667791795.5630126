this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),typeof(l="function"==typeof rep?rep.call(t,e,l):l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,n=0;n<i;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)"string"==typeof(r=rep[n])&&(o=str(r,l))&&s.push(quote(r)+(gap?": ":":")+o);else for(r in l)Object.hasOwnProperty.call(l,r)&&(o=str(r,l))&&s.push(quote(r)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.hasOwnProperty.call(o,n)&&(void 0!==(r=walk(o,n))?o[n]=r:delete o[n]);return reviver.call(e,t,o)}if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.DM||(DM={_apiKey:null,_session:null,_userStatus:"unknown",_refreshRequested:!1,_refreshCallbacks:[],_sessionLoadingMethod:null,_logging:!0,_domain:{api:"https://api.dailymotion.com",www:"//www.dailymotion.com",cdn:"//api.dmcdn.net"},_oauth:{logoutUrl:"https://www.dailymotion.com/oauth/logout",authorizeUrl:"https://www.dailymotion.com/oauth/authorize",tokenUrl:"https://graphql.api.dailymotion.com/oauth/token"},copy:function(e,t,n,r){for(var o in t)!n&&void 0!==e[o]||(e[o]=r?r(t[o]):t[o]);return e},create:function(e,t){for(var n=window.DM,r=e?e.split("."):[],o=r.length,i=0;i<o;i++){var s=r[i],a=n[s];a||(n[s]=a=t&&i+1==o?t:{}),n=a}return n},provide:function(e,t,n){return DM.copy("string"==typeof e?DM.create(e):e,t,n)},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},log:function(e){DM._logging&&(window.Debug&&window.Debug.writeln?window.Debug.writeln(e):window.console&&window.console.log(e)),DM.Event&&DM.Event.fire("dm.log",e)},error:function(e){window.console&&window.console.error(e),DM.Event&&DM.Event.fire("dm.error",e)},warn:function(e){try{console&&"function"==typeof console.warn&&console.warn(e)}catch(e){}},$:function(e){return e="string"==typeof e?document.getElementById(e):e},parseBool:function(e){return!0===e||!1===e?e:0!==e&&("string"==typeof e?!e.match(/^(?:|false|no|off|0)$/i):!!e)},type:function(e){if(!DM._class2type){DM._class2type={};for(var t="Boolean Number String Function Array Date RegExp Object".split(" "),n=0,r=t.length;n<r;n++){var o=t[n];DM._class2type["[object "+o+"]"]=o.toLowerCase()}DM._class2type["[object Undefined]"]="undefined"}return null===e?String(e):DM._class2type[Object.prototype.toString.call(e)]||"object"}}),DM.provide("JSON",{stringify:function(e){return window.Prototype&&Object.toJSON?Object.toJSON(e):JSON.stringify(e)},parse:function(e){return JSON.parse(e)},flatten:function(e){var t,n,r={};for(t in e)!e.hasOwnProperty(t)||null!=(n=e[t])&&(r[t]="string"==typeof n?n:DM.JSON.stringify(n));return r}}),DM.provide("Array",{indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);var n=e.length;if(n)for(var r=0;r<n;r++)if(e[r]===t)return r;return-1},merge:function(e,t){for(var n=0;n<t.length;n++)DM.Array.indexOf(e,t[n])<0&&e.push(t[n]);return e},flatten:function(e){for(var t in e)e.hasOwnProperty(t)&&"array"==DM.type(e[t])&&(e[t]=e[t].join(","));return e},filter:function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},keys:function(e,t){var n,r=[];for(n in e)(t||e.hasOwnProperty(n))&&r.push(n);return r},map:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},forEach:function(e,t,n){if(e)if("[object Array]"!==Object.prototype.toString.apply(e)&&(e instanceof Function||"number"!=typeof e.length))for(var r in e)(n||e.hasOwnProperty(r))&&t(e[r],r,e);else if(e.forEach)e.forEach(t);else for(var o=0,i=e.length;o<i;o++)t(e[o],o,e)}}),DM.provide("Cookie",{_domain:null,_enabled:!1,setEnabled:function(e){DM.Cookie._enabled=e},getEnabled:function(){return DM.Cookie._enabled},getKeyValuePair:function(e){var t,n,r=(r=e.indexOf("="))<0?e.length:r,o=e.substr(0,r),r=e.substr(r+1);try{t=decodeURIComponent(o)}catch(e){console.error("Could not decode cookie key: "+o)}try{n=decodeURIComponent(r)}catch(e){console.error("Could not decode cookie value: "+r)}return{key:t,value:n}},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},load:function(){var t,e,n=document.cookie.split("; ");return DM.Array.forEach(n,function(e){e=DM.Cookie.getKeyValuePair(e);e.key.match("dms_"+DM._apiKey)&&(e.value=e.value.replace(/^"(.+(?="$))"$/,"$1"),t=e)}),t&&((e=DM.QS.decode(t.value)).expires=parseInt(e.expires,10),DM.Cookie._domain=e.base_domain),e},setRaw:function(e,t,n){e=(e+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent);document.cookie="dms_"+DM._apiKey+'="'+e+'"'+(e&&0==t?"":"; expires="+new Date(1e3*t).toGMTString())+"; path=/"+(n&&"localhost"!==n?"; domain=."+n:""),DM.Cookie._domain=n},setNeonCookies:function(e,t,n){var r;void 0!==n&&((r=new Date).setSeconds(r.getSeconds()+n),n=(n=new Date(r.getTime())).setSeconds(n.getSeconds()+7776e3),e&&(document.cookie="access_token="+e+"; expires="+new Date(r).toUTCString()+"; path=/"),t&&(document.cookie="refresh_token="+t+"; expires="+new Date(n).toUTCString()+"; path=/"))},set:function(e){e?DM.Cookie.setRaw(DM.QS.encode(e),e.expires,e.base_domain):DM.Cookie.clear()},clear:function(){DM.Cookie.setRaw("",0,DM.Cookie._domain)}}),DM.provide("EventProvider",{subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(e,t){var n=this.subscribers();n[e]?n[e].push(t):n[e]=[t]},unsubscribe:function(e,n){var r=this.subscribers()[e];DM.Array.forEach(r,function(e,t){e==n&&(r[t]=null)})},monitor:function(e,t){var n,r;t()||(n=this).subscribe(e,r=function(){t.apply(t,arguments)&&n.unsubscribe(e,r)})},clear:function(e){delete this.subscribers()[e]},fire:function(){var t=Array.prototype.slice.call(arguments),e=t.shift();DM.Array.forEach(this.subscribers()[e],function(e){e&&e.apply(this,t)})}}),DM.provide("Event",DM.EventProvider),DM.provide("",{init:function(e){var t,n;e=DM.copy(e||{},{logging:!0}),DM._apiKey=e.apiKey,!e.logging&&window.location.toString().indexOf("dm_debug=1")<0&&(DM._logging=!1),DM._apiKey&&(DM._apiSecret=e.apiSecret||null,DM.Cookie.setEnabled(e.cookie),DM.Auth.readFragment(),null!==(n=DM.Auth.loadSiteSession()).session?(t=n.session,DM._sessionLoadingMethod=n.loading_method):e.session?(t=e.session,DM._sessionLoadingMethod="init_options"):DM.Auth._receivedSession?(t=DM.Auth._receivedSession,DM._sessionLoadingMethod="fragment"):(t=DM.Cookie.load(),DM._sessionLoadingMethod="local_cookies"),null!==t&&DM.Auth.isSessionExpired(t)?DM.Auth.refreshToken(t,function(){e.status&&DM.getLoginStatus()}):DM.Auth.setSession(t,t?"connected":"unknown"),e.status&&DM.getLoginStatus())}}),window.setTimeout(function(){window.dmAsyncInit&&dmAsyncInit()},0),DM.provide("QS",{encode:function(e,t,n){t=void 0===t?"&":t,n=!1===n?function(e){return e}:encodeURIComponent;var r=[];return DM.Array.forEach(e,function(e,t){null!=e&&r.push(n(t)+"="+n(e))}),r.sort(),r.join(t)},decode:function(e){for(var t=e.split("&"),n=decodeURIComponent,r={},o=0;o<t.length;o+=1){var i=t[o].indexOf("=");if(!(i<1))for(var s=n(t[o].substring(0,i)).replace(/\]/g,"").split("["),a=n(t[o].substring(i+1)),l=r;0<s.length;){var c=s.shift();0===s.length?0===c.length?l.push(a):l[c]=a:void 0===l[c]&&(l[c]=0===s[0].length?[]:{}),l=l[c]}}return r}}),DM.provide("",{api:function(){DM.ApiServer.call.apply(DM.ApiServer,arguments)}}),DM.provide("ApiServer",{type:null,METHODS:["get","post","delete"],_callbacks:{},_calls:[],call:function(){for(var e,t,n,r=Array.prototype.slice.call(arguments),o=r.shift(),i=r.shift(),s=!1;void 0!==i;){var a=typeof i;if("string"!=a||e)if("function"!=a||n)if("object"!=a||t){if("boolean"!=a||s)return void DM.log("Invalid argument passed to DM.api(): "+i);s=i}else t=DM.ApiServer.formatCallParams(i);else n=i;else e=i.toLowerCase();i=r.shift()}e=e||"get",t=t||{},"/"===o[0]&&(o=o.substr(1)),DM.Array.indexOf(DM.ApiServer.METHODS,e)<0?DM.log("Invalid method passed to DM.api(): "+e):DM.ApiServer.transport(o,e,t,n,s)},formatCallParams:function(e){var t=e.subrequests,n=[],r="";if(t){var o=DM.type(t);if("object"!=o)throw new Error('Unexpected type "'+o+'" for "subrequests" parameter. Expected type: object');for(fieldName in t){var i=t[fieldName],s=[];for(subRequestParam in s.push(fieldName+".fields("+(i.fields||[]).join(",")+")"),delete i.fields,i)s.push(subRequestParam+"("+i[subRequestParam]+")");s.length&&n.push(s.join("."))}delete e.subrequests}if(n.length&&(r=n.join(",")),e.fields){o=DM.type(e.fields);if("array"==o)e.fields.push(r),e.fields=e.fields.join(",");else{if("string"!=o)throw new Error('Unexpected type "'+o+'"  for "fields" parameter, Allowed types: array, string');e.fields.length?e.fields+=","+r:e.fields=r}}else r&&(e.fields=r);return e},getSimpleCallURL:function(e,t){t=DM.QS.encode(t),t=t.length?(-1<e.indexOf("?")?"&":"?")+t:"";return DM._domain.api+"/"+e+t},transport:function(e,t,n,r,o){try{DM.ApiServer.xhr(),DM.ApiServer.transport=DM.ApiServer.ajax,DM.ApiServer.type="ajax"}catch(e){DM.ApiServer.transport=DM.ApiServer.jsonp,DM.ApiServer.type="jsonp"}DM.ApiServer.transport(e,t,n,r,o)},jsonp:function(e,t,n,r){var o,i=DM.guid(),s=document.createElement("script");n.method=t,n.callback="DM.ApiServer._callbacks."+i;t=DM.getSession();t&&t.access_token&&!n.access_token&&(n.access_token=t.access_token),n=DM.Array.flatten(n);n=DM.ApiServer.getSimpleCallURL(e,n);if(2e3<n.length)throw new Error("JSONP only support a maximum of 2000 bytes of input.");DM.ApiServer._callbacks[i]=function(e){r&&r(e),delete DM.ApiServer._callbacks[i],s.src=null,s.parentNode.removeChild(s),o&&(clearTimeout(o),o=null)},s.async=!0,s.src=n,document.getElementsByTagName("head")[0].appendChild(s),o=setTimeout(function(){DM.ApiServer._callbacks[i]({error:{code:500,message:"The request has timed out",type:"transport_error"}})},5e3)},ajax:function(e,t,n,r,o){var i={path:e,method:t,params:n,cb:r};o?DM.ApiServer.performSimpleCall(e,t,n,r):(DM.ApiServer._calls.push(i),DM.ApiServer.ajaxHandleQueue())},ajaxHandleQueue:function(){!DM.ApiServer._callTimeout&&0<DM.ApiServer._calls.length?DM.ApiServer._callTimeout=setTimeout(function(){DM.ApiServer.performMultipleCalls(DM.ApiServer._calls),DM.ApiServer._calls=[],delete DM.ApiServer._callTimeout},0):10==DM.ApiServer._calls.length&&(DM.ApiServer._callTimeout&&(clearTimeout(DM.ApiServer._callTimeout),delete DM.ApiServer._callTimeout),DM.ApiServer.performMultipleCalls(DM.ApiServer._calls),DM.ApiServer._calls=[])},performSimpleCall:function(t,n,r,o){var e,i;DM._session&&DM.Auth.isSessionExpired()?DM.Auth.refreshToken(DM._session,function(e){e.error?o&&o(e):DM.ApiServer.performSimpleCall(t,n,r,o)}):((e=DM.getSession())&&e.access_token&&!r.access_token&&(r.access_token=e.access_token),r=DM.Array.flatten(r),e=DM.ApiServer.getSimpleCallURL(t,r),(i=DM.ApiServer.xhr()).open(n,e),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(),i.onreadystatechange=function(){if(4==i.readyState){var e;if(i.status)try{e=DM.JSON.parse(i.responseText)}catch(e){}"object"!=DM.type(e)&&(e={error:{code:500,message:"Invalid server response",type:"transport_error"}},DM.error("Cannot parse call response data "+i.responseText)),o&&o(e)}})},performMultipleCalls:function(s){for(var e,a,t=[],n=DM._domain.api,r=0,o=s.length;r<o;r++){var l=s[r];t.push({call:l.method.toUpperCase()+" /"+l.path,args:l.params,id:r})}DM._session&&DM.Auth.isSessionExpired()?DM.Auth.refreshToken(DM._session,function(t){t.error?DM.Array.forEach(s,function(e){e&&e.cb&&e.cb(t)}):DM.ApiServer.performMultipleCalls(s)}):((e=DM.getSession())&&e.access_token&&(n+="?access_token="+encodeURIComponent(e.access_token)),(a=DM.ApiServer.xhr()).open("POST",n),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(DM.JSON.stringify(t)),a.onreadystatechange=function(){if(4==a.readyState){var e,t={error:{code:500,message:"Invalid server response",type:"transport_error"}};if(a.status)try{e=DM.JSON.parse(a.responseText)}catch(e){}var n=DM.type(e);if("array"==n)for(var r=0,o=e.length;r<o;r++){var i=e[r];(l="id"in i&&s[i.id]?s[i.id]:null)?(l.cb&&("result"in i?l.cb(i.result):"error"in i?l.cb({error:i.error}):l.cb({error:{code:500,message:"Missing result or error key",type:"transport_error"}})),s[i.id]=null):DM.error("Response with no valid call id: "+DM.JSON.stringify(i))}else"object"==n&&"error"in e?t=e:DM.error("Cannot parse multicall response data "+a.responseText);DM.Array.forEach(s,function(e){e&&e.cb&&e.cb(t)})}})},xhr:function(){var e=new window.XMLHttpRequest;if(!("withCredentials"in e))throw new Error("Browser is not CORS capable");return e}}),DM.provide("",{getLoginStatus:function(t){t&&DM.Auth.refreshToken(DM._session,function(e){t({status:DM._userStatus,session:e})})},getSession:function(){return DM.Auth.isSessionExpired()&&DM.Auth.setSession(null,"notConnected"),DM._session},login:function(e,t){var n=void 0!==window.screenX?window.screenX:window.screenLeft,r=void 0!==window.screenY?window.screenY:window.screenTop,o=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,i=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,i="width=500,height=520,left="+parseInt(n+(o-500)/2,10)+",top="+parseInt(r+(i-520)/2.5,10)+",status,scrollbars=yes";"popup"===(t=DM.copy(t||{},{client_id:DM._apiKey,response_type:"token",display:"popup",scope:"",redirect_uri:document.location.href,state:"dmauth_"+DM.guid()})).display?(i=window.open(DM._oauth.authorizeUrl+"?"+DM.QS.encode(t),"dmauth",i),DM.Auth._active[t.state]={cb:e||function(){},win:i},DM.Auth._popupMonitor()):location.href=DM._oauth.authorizeUrl+"?"+DM.QS.encode(t)},logout:function(t){var n,e=DM._oauth.logoutUrl,r=DM.getSession(),o=[],i="dm_l_o_sc";r&&r.access_token&&(o.push("access_token="+encodeURIComponent(r.access_token)),n="_"+r.access_token+"_logout",window[n]=function(e){"array"!=DM.type(e)||e.length?t(e):(t({}),DM.Auth.setSession(null,"notConnected")),window[n]=null},o.push("callback="+n));r=document.getElementById(i);r&&r.parentNode.removeChild(r),(r=document.createElement("script")).type="text/javascript",r.id=i,document.body.appendChild(r),r.src=e+(o.length?"?"+o.join("&"):"")}}),DM.provide("Auth",{_active:{},_receivedSession:null,loadSiteSession:function(){var e,t,n,r,o=!0,i={},s={session:null,loading_method:null};return window.location.host.match(/dailymotion\.com$/)&&(e=DM.Cookie.getCookieValue("sid"),t=DM.Cookie.getCookieValue("access_token"),(n=DM.Cookie.getCookieValue("refresh_token"))&&(i.refresh_token=n,o=!1),r="neon_cookie",t&&(i.access_token=t,o=!1),n||t||!e||(i.access_token=e,o=!(r="sid_cookie")),n&&!i.access_token&&(i.expires=Math.round((new Date).getTime()/1e3)-10)),o||(s.session=i,s.loading_method=r),s},refreshToken:function(e,t){var n,r;t=t||function(){},DM._refreshCallbacks.push(t),DM._refreshRequested||(DM._refreshRequested=!0,n=function(e){for(;0<DM._refreshCallbacks.length;)DM._refreshCallbacks.pop()(e);DM._refreshRequested=!1},DM.Auth.isSessionExpired(e)&&DM._apiKey&&DM._apiSecret&&e&&e.refresh_token?(r=DM.ApiServer.xhr(),t={grant_type:"refresh_token",client_id:DM._apiKey,client_secret:DM._apiSecret,refresh_token:e.refresh_token},t=DM.QS.encode(t),r.open("POST",DM._oauth.tokenUrl),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(t),r.onreadystatechange=function(){if(4==r.readyState){var e,t={error:{code:500,message:"Invalid server response",type:"transport_error"}};if(r.status)try{e=DM.JSON.parse(r.responseText)}catch(e){}"object"!=DM.type(e)&&(e=t,DM.error("Cannot parse call response data "+r.responseText));t=(e=r.status&&200!==r.status?t:e).access_token?e:null;DM.Auth.setSession(t,t?"connected":"notConnected"),n(e)}}):n(e))},readFragment:function(){var e=window.location.hash.replace("%23","#"),t=e.substr(e.lastIndexOf("#")+1);(0<=t.indexOf("access_token=")||0<=t.indexOf("error="))&&(t=DM.QS.decode(t),window.opener&&window.opener.DM.Auth.setSession&&"dmauth"==window.name&&"dmauth"!=window.opener.name?(document.documentElement.style.display="none",window.opener.DM.Auth.recvSession(t)):t&&"state"in t&&0==t.state.indexOf("dmauth_")&&("access_token"in t&&(DM.Auth._receivedSession=t),window.location.hash=e.substr(0,e.lastIndexOf("#"))))},recvSession:function(e){if(e||DM.error("Received invalid session"),"error"in e&&DM.error("Received auth error `"+e.error+"': "+e.error_description),"state"in e)if(e.state in DM.Auth._active){var t;if(e)for(k in t={},e)t[k]=e[k];else t=e;DM.Auth._active[e.state].session=t}else DM.error("Received a session from an inactive window");else DM.error("Received a session with not `state' field")},setSession:function(e,t){var n,r=!DM._session&&e,o=DM._session&&!e,i=r||o||DM._session&&e&&DM._session.access_token!=e.access_token,s=t!=DM._userStatus;e&&"expires_in"in e&&(e.expires=Math.round((new Date).getTime()/1e3)+parseInt(e.expires_in,10),n=parseInt(e.expires_in,10),delete e.expires_in);var a={session:e,status:t};return DM._session=e,DM._userStatus=t,i&&DM.Cookie&&DM.Cookie.getEnabled()&&DM.Cookie.set(e),"neon_cookie"===DM._sessionLoadingMethod&&DM.Cookie.setNeonCookies(e.access_token,e.refresh_token,n),s&&DM.Event.fire("auth.statusChange",a),o&&DM.Event.fire("auth.logout",a),r&&DM.Event.fire("auth.login",a),i&&DM.Event.fire("auth.sessionChange",a),a},isSessionExpired:function(e,t){return void 0===e&&(e=DM._session),void 0===t&&(t=DM._sessionLoadingMethod),!e||("neon_cookie"===t?!DM.Cookie.getCookieValue("access_token"):e&&"expires"in e&&(new Date).getTime()>1e3*e.expires)},_popupMonitor:function(){for(var e in DM.Auth._active){if("win"in DM.Auth._active[e])try{DM.Auth._active[e].win.closed&&(delete DM.Auth._active[e].win,DM.Auth.recvSession({error:"access_denied",error_description:"Client closed the window",state:e}))}catch(e){}var t,n;"session"in DM.Auth._active[e]&&(t=DM.Auth._active[e],delete DM.Auth._active[e],"access_token"in(n=t.session)?DM.Auth.setSession(n,"connected"):DM.Auth.setSession(null,"notConnected"),"win"in t&&t.win.close(),"cb"in t&&t.cb({status:DM._userStatus,session:DM._session}))}var r=!1;for(e in DM.Auth._active){r=!0;break}r&&!DM.Auth._popupInterval?DM.Auth._popupInterval=window.setInterval(DM.Auth._popupMonitor,100):!r&&DM.Auth._popupInterval&&(window.clearInterval(DM.Auth._popupInterval),DM.Auth._popupInterval=null)}}),DM.provide("",{player:function(e,t){if(!(e=DM.$(e))||e.nodeType!==Node.ELEMENT_NODE)throw new Error("Invalid first argument sent to DM.player(), requires a HTML element or element id: "+e);if(!t||"object"!=typeof t)throw new Error("Missing 'options' parameter for DM.player()");return void 0!==DM.Player._INSTANCES[e.id]&&(e=DM.Player.destroy(e.id)),DM.Player.create(e,t)},destroy:function(e){if(e)void 0!==DM.Player._INSTANCES[e]?DM.Player.destroy(e):DM.warn("Invalid first argument sent to DM.destroy(), requires a player id: "+e);else if(0!==DM.Array.keys(DM.Player._INSTANCES).length)for(var t in DM.Player._INSTANCES)DM.Player.destroy(t);else DM.warn("DM.destroy(): no player to destroy")}}),DM.provide("Player",{_IFRAME_ORIGIN:null,_INSTANCES:{},_EVENTS:{},_ANCHORS:{},_INTERVAL_ID:null,API_MODE:null,EVENT_HANDLERS:{},_environmentInfo:null,apiReady:!1,autoplay:!1,currentTime:0,bufferedTime:0,duration:NaN,seeking:!1,error:null,ended:!1,muted:!1,volume:1,paused:!0,fullscreen:!1,controls:void 0,rebuffering:!1,qualities:[],quality:void 0,subtitles:[],subtitle:void 0,video:null,companionAds:null,loop:!1,adData:{},play:function(){this.api("play")},togglePlay:function(){this.api("toggle-play")},pause:function(){this.api("pause")},seek:function(e){this.api("seek",e)},load:function(e,t){this.api("load",e,t)},setMuted:function(e){this.api("muted",e)},toggleMuted:function(){this.api("toggle-muted")},setVolume:function(e){this.api("volume",e)},setQuality:function(e){this.api("quality",e)},setSubtitle:function(e){this.api("subtitle",e)},setFullscreen:function(e){this.api("fullscreen",e)},setControls:function(e){this.api("controls",e)},toggleControls:function(){this.api("toggle-controls")},setProp:function(){this.api.apply(this,["set-prop"].concat([].slice.call(arguments)))},setAdsConfig:function(e){this.api("set-ads-config",e)},watchOnSite:function(e){this.api("watch-on-site")},setLoop:function(e){this.api("loop",e)},api:function(e){var t=2<=arguments.length?[].slice.call(arguments,1):[];this._send(e,t)},create:function(n,e){var t;e=DM.copy(e,{width:480,height:270,title:"video player",referrerPolicy:null,params:{},events:{}}),1<location.search.length&&-1!==location.search.indexOf("dm:params")&&("dm:params"in(t=DM.QS.decode(location.search.substr(1)))&&(e.params=DM.copy(DM.QS.decode(t["dm:params"]),e.params))),DM._domain.www=DM._domain.www.replace(/^https?\:/,"");var r=document.createElement("iframe");if(DM.Array.forEach(["id","style","class"],function(e){var t=n.getAttribute(e);t&&r.setAttribute(e,t)}),r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","true"),r.setAttribute("allow","autoplay"),"string"==typeof e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),r.title="Dailymotion "+e.title,r.type="text/html",r.width=e.width,r.height=e.height,n.parentNode.replaceChild(r,n),DM.copy(r,DM.Player),r.init(e.video,e.params,e.playlist,e.events,n),"object"==typeof e.events)for(var o in e.events)r.addEventListener(o,e.events[o],!1);return r},destroy:function(e){var n=DM.Player._INSTANCES[e],t=DM.Player._ANCHORS[e];return DM.Array.forEach(DM.Player._EVENTS[e],function(e){var t=DM.Array.keys(e)[0];n.removeEventListener(t,e[t],!1)}),n.parentNode.replaceChild(t,n),delete DM.Player._INSTANCES[e],delete DM.Player._ANCHORS[e],delete DM.Player._EVENTS[e],t},_getPathname:function(e,t){return t&&!e?"/embed/playlist/"+t:e?"/embed/video/"+e:"/embed"},init:function(e,t,n,r,o){DM.Player._installHandlers(),(t="object"==typeof t?t:{}).api=DM.Player.API_MODE,location.origin?t.origin=location.origin:t.origin="*",DM._apiKey&&(t.apiKey=DM._apiKey),e&&n&&(t.playlist=n),this.id=t.id=this.id||DM.guid(),this.src="https:"+DM._domain.www+this._getPathname(e,n)+"?"+DM.QS.encode(t),DM.Player._INSTANCES[this.id]!=this&&(DM.Player._INSTANCES[this.id]=this,DM.Player._EVENTS[this.id]=r,DM.Player._ANCHORS[this.id]=o,this.addEventListener("unload",function(){delete DM.Player._INSTANCES[this.id],delete DM.Player._ANCHORS[this.id],delete DM.Player._EVENTS[this.id]})),this.autoplay=DM.parseBool(t.autoplay)},_installHandlers:function(){var e;null===DM.Player.API_MODE&&window.postMessage&&(DM.Player.API_MODE="postMessage",e=function(e){var t=e.origin?e.origin.replace(/^https?:/,""):null;t&&0===t.indexOf(DM._domain.www)&&e.data&&"string"==typeof e.data&&(DM.Player._IFRAME_ORIGIN||(DM.Player._IFRAME_ORIGIN=e.origin),(t=DM.Player._decodePostMessage(e.data)).id&&t.event&&((e=DM.$(t.id))&&"function"==typeof e._recvEvent&&e._recvEvent(t)))},window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e))},_decodePostMessage:function(e){if("{"===e.substring(0,1))try{return JSON.parse(e)}catch(e){return{}}return DM.QS.decode(e)},_send:function(e,t){this.apiReady?"postMessage"==DM.Player.API_MODE&&(this.contentWindow&&"function"==typeof this.contentWindow.postMessage?this.contentWindow.postMessage(JSON.stringify({command:e,parameters:t||[]}),DM.Player._IFRAME_ORIGIN):DM.warn("Player not reachable anymore. You may have destroyed it.")):DM.warn('Player not ready. Ignoring command : "'+e+'"')},_dispatch:document.createEvent?function(e){var t=e.event;const n=document.createEvent("HTMLEvents");"ad_log"===e.event&&e.args&&(n.data=e.args),n.initEvent(t,!0,!0),this.dispatchEvent(n)}:function(e){var t,e=e.event;"on"+e in this?(t=document.createEventObject(),this.fireEvent("on"+e,t)):e in this.EVENT_HANDLERS&&(t={type:e,target:this},DM.Array.forEach(this.EVENT_HANDLERS[e],function(e){e(t)}))},_recvEvent:function(e){switch(e.event){case"apiready":if(this.apiReady)return;this.apiReady=!0,this._environmentInfo=e.info||null;break;case"start":this.ended=!1;break;case"loadedmetadata":this.error=null;break;case"timeupdate":case"ad_timeupdate":this.currentTime=parseFloat(e.time);break;case"progress":this.bufferedTime=parseFloat(e.time);break;case"durationchange":this.duration=parseFloat(e.duration);break;case"seeking":this.seeking=!0,this.currentTime=parseFloat(e.time);break;case"seeked":this.seeking=!1,this.currentTime=parseFloat(e.time);break;case"fullscreenchange":this.fullscreen=DM.parseBool(e.fullscreen);break;case"controlschange":this.controls=DM.parseBool(e.controls);break;case"volumechange":this.volume=parseFloat(e.volume),this.muted=DM.parseBool(e.muted);break;case"ad_start":this.adData=e.adData;case"video_start":case"ad_play":case"playing":case"play":this.paused=!1;break;case"end":this.ended=!0;break;case"ad_end":this.adData={};case"ad_pause":case"video_end":case"pause":this.paused=!0;break;case"error":this.error={code:e.code,title:e.title,message:e.message};break;case"rebuffer":this.rebuffering=DM.parseBool(e.rebuffering);break;case"qualitiesavailable":this.qualities=e.qualities;break;case"qualitychange":this.quality=e.quality;break;case"subtitlesavailable":this.subtitles=e.subtitles;break;case"subtitlechange":this.subtitle=e.subtitle;break;case"videochange":this.video={videoId:e.videoId,title:e.title,duration:parseFloat(e.duration)};break;case"ad_companions":this.companionAds=e.companionAds}this._dispatch(e)},addEventListener:function(e,t,n){"on"+e in this&&this.attachEvent?this.attachEvent("on"+e,t,n):(e in this.EVENT_HANDLERS||(this.EVENT_HANDLERS[e]=[]),this.EVENT_HANDLERS[e].push(t))}});
