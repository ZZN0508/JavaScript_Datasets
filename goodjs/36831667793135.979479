System.register(["./common-chunks.system.1976d2aa.js"],function(t){"use strict";var r,n,o,s,a,d,l,h,c,u,m,p,b,f,g,v,E,S,y,A,k;return{setters:[function(e){r=e.D,n=e.j,o=e.B,s=e.t,a=e.a7,d=e.g,l=e.U,h=e.V,c=e.a8,u=e.Z,m=e.a9,p=e.r,b=e.F,f=e.e,g=e.a1,v=e.d,E=e.aa,S=e.u,y=e.ab,A=e.ac,k=e.C}],execute:function(){var e="bk_e",i={api:"/account/electrode/account/api/subscribe",render:function(){this.dom=r.create(),this.beacon=n("Footer"),this.bodyScroll=o.getDefaultInstance(),this.getElements(),this.handleSubmit=this.handleSubmit.bind(this),this.handleSubmitSuccess=this.handleSubmitSuccess.bind(this),this.handleSubmitError=this.handleSubmitError.bind(this),this.handleModalClose=this.handleModalClose.bind(this),this.screenWidth=this.dom.getWindow().innerWidth,this.isMobile="small"===s.getBreakpoint(this.screenWidth)||!1,this.input&&(this.isMobile&&(this.input.placeholder="Email address"),this.input.addEventListener("change",this.removeErrorAttributes)),this.form&&this.form.addEventListener("submit",this.handleSubmit)},getElements:function(){this.button=this.dom.getById("hf-email-signup-btn"),this.errorWrapper=this.dom.getById("hf-email-input-error"),this.form=this.dom.getById("hf-email-signup-form"),this.input=this.dom.getById("hf-email-input"),this.modal=this.dom.getById("hf-email-modal"),this.modalClose=this.dom.getById("hf-email-close-btn"),this.modalEmail=this.dom.getById("hf-email-modal-email-id"),this.animatedField=a.create(this.input)},handleSubmit:function(e){e.preventDefault(),this.email=this.input.value,this.hideError();e=d(l,"ccm.header-footer-app.emailSignupApi.emailSignupUrl",this.api),e=h(e);c.validate(this.email)?(this.input.disabled=!0,u.fetch(e+"?email="+this.email,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},format:"json",onSuccess:this.handleSubmitSuccess,onError:this.handleSubmitError})):this.showError()},handleSubmitSuccess:function(){this.hideError(),this.showModal(),this.input.value="",this.input.disabled=!1;var e=this.dom.getDataAttributes(this.form,["campaign-id"]);this.beacon.tagAction(m({campaignId:e.campaignId}))},handleSubmitError:function(){this.showError(),this.input.disabled=!1},showModal:function(){p(this.modal,["hidden"]),this.modalEmail.innerHTML=this.email,this.modalClose.addEventListener("click",this.handleModalClose),this.focusTrap=b.create(this.modal.querySelector("[role=dialog]")),this.bodyScroll.lock(),this.removeEscHandler=f(this.dom.getDocument(),this.handleModalClose),this.removeCloseOnDialogModal=g(this.handleModalClose)},handleModalClose:function(){this.focusTrap(),v(this.modal,{hidden:"hidden"}),this.button.focus(),this.bodyScroll.unlock(),this.removeEscHandler&&(this.removeEscHandler(),this.removeEscHandler=null),this.removeCloseOnDialogModal()},showError:function(){this.input.focus(),this.animatedField.showError(),this.dom.addClass(this.input,e),p(this.errorWrapper,["hidden"]),v(this.errorWrapper,{role:"alert"}),v(this.input,{"aria-invalid":!0})},removeErrorAttributes:function(){p(this.input,["aria-invalid"]),p(this.errorWrapper,["role"])},hideError:function(){this.animatedField.hideError(),this.dom.removeClass(this.input,e),v(this.errorWrapper,{hidden:"hidden"}),this.removeErrorAttributes()}};t("default",{create:function(e){var o={};return o.dom=d(e,"dom",r.create()),o.beacon=d(e,"beacon",n("Footer")),o.screenWidth=o.dom.getWindow().innerWidth,o.isMobile="small"===s.getBreakpoint(o.screenWidth)||"medium"===s.getBreakpoint(o.screenWidth)||!1,o.footerWrapper=o.dom.getById("js-global-footer-wrapper")||o.dom.querySelector(".js-footer"),o.setupFooterLinksAnalytics=function(){o.dom.querySelectorAll(".hf-footer-links-list").forEach(function(e){var t=o.dom.getDataAttributes(e,["module-id","module-type","module-version","module-published-date","module-name","module-zone"]),i=S({dom:o.dom,beacon:o.beacon,moduleInfo:t});e.querySelectorAll(".hf-footer-link").forEach(function(e){var t;e.dataset.tlId&&(t=e.dataset.tlId.replace(/-link-\d\-+/g,""),e.setAttribute("data-section-title","Footer - "+o.dom.querySelector("[data-tl-id="+t+"]").innerText)),i(e)})})},o.setUpSisterBrandsAnalytics=function(){o.dom.getById("hf-sister-brands-links-list").addEventListener("click",function(e){e=e.target.parentNode;o.beacon.tagAction(y({uid:e.getAttribute("data-uid"),name:e.getAttribute("title")}))})},o.loadSisterBrandImages=function(){var t=o.dom.querySelectorAll(".bp_e");t&&o.dom.getWindow().addEventListener("scroll",function e(){o.dom.getWindow().removeEventListener("scroll",e),t.forEach(function(e){var t=o.dom.getDataAttributes(e,["src"]);v(e,t),o.dom.removeClass(e,"bp_f")})})},o.updateCopyrightReferenceNumber=function(){o.dom.getById("copyright-reference-id").innerText=A(k.get("bstc"))},o.render=function(){var t;o.footerWrapper&&(i.render(),(t={beacon:Object.assign({},{beacon:n("Footer")},void 0).beacon}).dom=r.create(),t.links=t.dom.querySelectorAll(".".concat("bq_c")),t.setupBeaconClickHandler=function(e){e.addEventListener("click",t.handleLinkClicks.bind(this,e))},t.handleLinkClicks=function(e){t.beacon.tagAction(E({uid:e.getAttribute("data-uid"),name:e.getAttribute("title")}))},t.setupAnalytics=function(){t.links.forEach(t.setupBeaconClickHandler)},t.setupAnalytics(),o.setupFooterLinksAnalytics(),o.setUpSisterBrandsAnalytics(),o.loadSisterBrandImages(),o.updateCopyrightReferenceNumber())},o}})}}});
