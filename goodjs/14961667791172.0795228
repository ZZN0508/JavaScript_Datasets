function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(){function i(t,e,n){return t.call.apply(t.bind,arguments)}function o(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o).apply(null,arguments)}var r=Date.now||function(){return+new Date};function e(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var c=!!window.FontFace;function h(t,e,n,i){if(e=t.c.createElement(e),n)for(var o in n)n.hasOwnProperty(o)&&("style"==o?e.style.cssText=n[o]:e.setAttribute(o,n[o]));return i&&e.appendChild(t.c.createTextNode(i)),e}function l(t,e,n){(t=(t=t.c.getElementsByTagName(e)[0])||document.documentElement).insertBefore(n,t.lastChild)}function n(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var s=!1,a=0;a<i.length;a+=1)if(e[o]===i[a]){s=!0;break}s||i.push(e[o])}for(e=[],o=0;o<i.length;o+=1){for(s=!1,a=0;a<n.length;a+=1)if(i[o]===n[a]){s=!0;break}s||e.push(i[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function s(t,e){for(var n=t.className.split(/\s+/),i=0,o=n.length;i<o;i++)if(n[i]==e)return!0;return!1}function f(t,e,n){function i(){a&&o&&(a(s),a=null)}e=h(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,s=null,a=n||null;c?(e.onload=function(){o=!0,i()},e.onerror=function(){o=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout(function(){o=!0,i()},0),l(t,"head",e)}function u(t,e,n,i){var o=t.c.getElementsByTagName("head")[0];if(o){var s=h(t,"script",{src:e}),a=!1;return s.onload=s.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),s.onload=s.onreadystatechange=null,"HEAD"==s.parentNode.tagName&&o.removeChild(s))},o.appendChild(s),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},i||5e3),s}return null}function d(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,a(t)}}function v(t,e){t.c=e,a(t)}function a(t){0==t.a&&t.c&&(t.c(),t.c=null)}function y(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";e=(e||"n4").match(/^([nio])([1-9])$/i);e&&(this.a=e[1],this.f=parseInt(e[2],10))}function b(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function k(t){return t.a+t.f}function x(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function S(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new y("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function _(t){var e,n,i;t.g&&(e=s(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")],e||n.push(t.a.c("wf","inactive")),p(t.f,n,i)),A(t,"inactive")}function A(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,k(n)):t.h[e]())}function E(){this.c={}}function T(t,e){this.c=t,this.f=e,this.a=h(this.c,"span",{"aria-hidden":"true"},this.f)}function C(t){l(t.c,"body",t.a)}function j(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(t.c)+";font-style:"+x(t)+";font-weight:"+t.f+"00;"}function L(t,e,n,i,o,s){this.g=t,this.j=e,this.a=i,this.c=n,this.f=o||3e3,this.h=s||void 0}function I(t,e,n,i,o,s,a){this.v=t,this.B=e,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=o||3e3,this.u=s||null,this.m=this.j=this.h=this.g=null,this.g=new T(this.c,this.s),this.h=new T(this.c,this.s),this.j=new T(this.c,this.s),this.m=new T(this.c,this.s),t=j(t=new w(this.a.c+",serif",k(this.a))),this.g.a.style.cssText=t,t=j(t=new w(this.a.c+",sans-serif",k(this.a))),this.h.a.style.cssText=t,t=j(t=new w("serif",k(this.a))),this.j.a.style.cssText=t,t=j(t=new w("sans-serif",k(this.a))),this.m.a.style.cssText=t,C(this.g),C(this.h),C(this.j),C(this.m)}y.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},L.prototype.start=function(){var o=this.c.o.document,s=this,a=r(),t=new Promise(function(n,i){!function e(){var t;r()-a>=s.f?i():o.fonts.load(x(t=s.a)+" "+t.f+"00 300px "+b(t.c),s.h).then(function(t){1<=t.length?n():setTimeout(e,25)},function(){i()})}()}),n=null,e=new Promise(function(t,e){n=setTimeout(e,s.f)});Promise.race([e,t]).then(function(){n&&(clearTimeout(n),n=null),s.g(s.a)},function(){s.j(s.a)})};var O={D:"serif",C:"sans-serif"},F=null;function N(){var t;return null===F&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),F=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),F}function P(t,e,n){for(var i in O)if(O.hasOwnProperty(i)&&e===t.f[O[i]]&&n===t.f[O[i]])return!0;return!1}function W(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=!(e=n===t.f.serif&&i===t.f["sans-serif"])?N()&&P(t,n,i):e)?r()-t.A>=t.w?N()&&P(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?U(t,t.v):U(t,t.B):setTimeout(g(function(){W(this)},t),50):U(t,t.v)}function U(t,e){setTimeout(g(function(){n(this.g.a),n(this.h.a),n(this.j.a),n(this.m.a),e(this.a)},t),0)}function R(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),W(this)};var q=null;function B(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),A(t,"active")):_(t.a))}function t(t){this.j=t,this.a=new E,this.h=0,this.f=this.g=!0}function D(t,e){this.c=t,this.a=e}function V(t,e){this.c=t,this.a=e}function G(t,e){this.c=t||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=e||""}R.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,k(t).toString(),"active")],[e.a.c("wf",t.c,k(t).toString(),"loading"),e.a.c("wf",t.c,k(t).toString(),"inactive")]),A(e,"fontactive",t),this.m=!0,B(this)},R.prototype.h=function(t){var e,n,i,o=this.a;o.g&&(e=s(o.f,o.a.c("wf",t.c,k(t).toString(),"active")),n=[],i=[o.a.c("wf",t.c,k(t).toString(),"loading")],e||n.push(o.a.c("wf",t.c,k(t).toString(),"inactive")),p(o.f,n,i)),A(o,"fontinactive",t),B(this)},t.prototype.load=function(t){this.c=new e(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(i,t,e){var n=[],o=e.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),A(t,"loading")}(t);var n=function(t,e,n){var i,o,s=[];for(i in e)!e.hasOwnProperty(i)||(o=t.c[i])&&s.push(o(e[i],n));return s}(i.a,e,i.c),s=new R(i.c,t,o);for(i.h=n.length,t=0,e=n.length;t<e;t++)n[t].load(function(t,e,n){var h,l,f,u,d;h=s,l=t,f=e,u=n,d=0==--(n=i).h,(n.f||n.g)&&setTimeout(function(){var t=u||null,e=f||{};if(0===l.length&&d)_(h.a);else{h.f+=l.length,d&&(h.j=d);for(var n=[],i=0;i<l.length;i++){var o,s=l[i],a=e[s.c],r=h.a,c=s;r.g&&p(r.f,[r.a.c("wf",c.c,k(c).toString(),"loading")]),A(r,"fontloading",c),r=(q=(r=null)===q?!!window.FontFace&&(c=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),o=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor),c?42<parseInt(c[1],10):!o):q)?new L(g(h.g,h),g(h.h,h),h.c,s,h.s,a):new I(g(h.g,h),g(h.h,h),h.c,s,h.s,t,a),n.push(r)}for(i=0;i<n.length;i++)n[i].start()}},0)})}(this,new S(this.c,t),t)},D.prototype.load=function(a){var r,e=this,c=e.a.projectId,t=e.a.version;c?(r=e.c.o,u(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+c+".js"+(t?"?v="+t:""),function(t){t?a([]):(r["__MonotypeConfiguration__"+c]=function(){return e.a},function t(){if(r["__mti_fntLst"+c]){var e,n=r["__mti_fntLst"+c](),i=[];if(n)for(var o=0;o<n.length;o++){var s=n[o].fontfamily;null!=n[o].fontStyle&&null!=n[o].fontWeight?(e=n[o].fontStyle+n[o].fontWeight,i.push(new w(s,e))):i.push(new w(s))}a(i)}else setTimeout(function(){t()},50)}())}).id="__MonotypeAPIScript__"+c):a([])},V.prototype.load=function(t){for(var e=this.a.urls||[],n=this.a.families||[],i=this.a.testStrings||{},o=new d,s=0,a=e.length;s<a;s++)f(this.c,e[s],m(o));var r=[];for(s=0,a=n.length;s<a;s++)if((e=n[s].split(":"))[1])for(var c=e[1].split(","),h=0;h<c.length;h+=1)r.push(new w(e[0],c[h]));else r.push(new w(e[0]));v(o,function(){t(r,i)})};function z(t){this.f=t,this.a=[],this.c={}}var H={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},$={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},M={i:"i",italic:"i",n:"n",normal:"n"},J=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function K(t,e){this.c=t,this.a=e}var X={Arimo:!0,Cousine:!0,Tinos:!0};function Q(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t,this.f=e,this.a=[]}K.prototype.load=function(t){var e=new d,n=this.c,i=new G(this.a.api,this.a.text),o=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var o=e[i].split(":");3==o.length&&t.f.push(o.pop());var s="";2==o.length&&""!=o[1]&&(s=":"),t.a.push(o.join(s))}}(i,o);var s=new z(o);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),o=i[0].replace(/\+/g," "),s=["n4"];if(2<=i.length){var a,r,c=i[1],h=[];if(c)for(var l=(c=c.split(",")).length,f=0;f<l;f++)(r=!(r=c[f]).match(/^[\w-]+$/)||null==(a=J.exec(r.toLowerCase()))?"":[r=null==(r=a[2])||""==r?"n":M[r],a=null==(a=a[1])||""==a?"4":$[a]||(isNaN(a)?"4":a.substr(0,1))].join(""))&&h.push(r);0<h.length&&(s=h),3==i.length&&(h=[],0<(i=(i=i[2])?i.split(","):h).length&&(i=H[i[0]])&&(t.c[o]=i))}for(t.c[o]||(i=H[o])&&(t.c[o]=i),i=0;i<s.length;i+=1)t.a.push(new w(o,s[i]))}}(s),f(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),m(e)),v(e,function(){t(s.a,s.c,X)})},Q.prototype.load=function(a){var t=this.a.id,r=this.c.o;t?u(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)a([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var e=[],n=0;n<t.length;n+=2)for(var i=t[n],o=t[n+1],s=0;s<o.length;s++)e.push(new w(i,o[s]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}a(e)}},2e3):a([])},Y.prototype.load=function(c){var t=this.f.id,e=this.c.o,h=this;t?(e.__webfontfontdeckmodule__||(e.__webfontfontdeckmodule__={}),e.__webfontfontdeckmodule__[t]=function(t,e){for(var n,i,o,s=0,a=e.fonts.length;s<a;++s){var r=e.fonts[s];h.a.push(new w(r.name,(n="font-weight:"+r.weight+";font-style:"+r.style,r=o=i=void 0,i=4,o="n",r=null,n&&((r=n.match(/(normal|oblique|italic)/i))&&r[1]&&(o=r[1].substr(0,1).toLowerCase()),(r=n.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?i=7:/[1-9]00/.test(r[1])&&(i=parseInt(r[1].substr(0,1),10)))),o+i)))}c(h.a)},u(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(t){t&&c([])})):c([])};var Z=new t(window);Z.a.c.custom=function(t,e){return new V(e,t)},Z.a.c.fontdeck=function(t,e){return new Y(e,t)},Z.a.c.monotype=function(t,e){return new D(e,t)},Z.a.c.typekit=function(t,e){return new Q(e,t)},Z.a.c.google=function(t,e){return new K(e,t)};var tt={load:g(Z.load,Z)};"function"==typeof define&&define.amd?define(function(){return tt}):"undefined"!=typeof module&&module.exports?module.exports=tt:(window.WebFont=tt,window.WebFontConfig&&Z.load(window.WebFontConfig))}();var SERVICES={API:{develoment:"https://devfonts.speaker.360.cn:5360/css/",production:"https://fonts.speaker.360.cn/css/"},LOG:{develoment:"https://devfonts.speaker.360.cn:5360/s",production:"https://fonts.speaker.360.cn/s"},DEFAULT_TEST_STRING:"BESbswy"},FontLoader=function(){function a(t){_classCallCheck(this,a);var e=t.families,n=void 0===e?[]:e,i=t.hashes,o=void 0===i?[]:i,s=t.selectors,e=void 0===s?[]:s,i=t.addition,s=void 0===i?[]:i,i=t.api,i=void 0===i?"data":i,t=t.format,t=void 0===t?"woff2":t;this.service=SERVICES.API.production,this.families=n,this.hashes=o,this.selectors=e,this.addition=s,this.api=i,this.format=t,this.options={families:n,hashes:o,selectors:e,addition:s,api:i,format:t},this.flLogger=new FontLoaderLogger(this.options),this.util=new Util,this.check()&&this.main()}return _createClass(a,[{key:"main",value:function(){var a=this;this.flLogger.log("origin"),this.flLogger.log("project"),this.flLogger.log("options"),this.families.forEach(function(i,o){var s=a.getText(o);0<s.length&&a.load(i,a.getUrl(o,s)),a.getElements(o).forEach(function(t){new MutationObserver(function(t){var e=a.getText(o),n=a.util.diffString(e,s);0<n.length&&(a.load(i,a.getUrl(o,n)),s=e)}).observe(t,{attributes:!1,childList:!0,subtree:!0})})})}},{key:"load",value:function(t,e){WebFont.load({custom:{families:[t],urls:[e]}}),this.flLogger.log("text",{family:t,url:e})}},{key:"getElements",value:function(t){t=document.querySelectorAll(this.selectors[t]);return Array.prototype.slice.call(t)}},{key:"getText",value:function(t){var e=this.addition[t]||SERVICES.DEFAULT_TEST_STRING,e=this.getElements(t).map(function(t){return t.innerText}).join("")+e;return this.util.textEliminateDuplicationAndSorting(e)}},{key:"getUrl",value:function(t,e){return e=encodeURIComponent(e),(-1<this.api.indexOf("all")?"".concat(this.service).concat(this.api,"?text=").concat(e,"&fontHash="):"".concat(this.service).concat(this.api,"?text=").concat(e,"&target=").concat(this.format,"&fontHash=")).concat(this.hashes[t],"&fontFamily=").concat(this.families[t])}},{key:"check",value:function(){if(Array.isArray(this.hashes)&&Array.isArray(this.families)&&Array.isArray(this.selectors)&&Array.isArray(this.addition)){var t=this.hashes.length;if(0===this.selectors.length&&(this.selectors=new Array(t).fill("body")),this.families.length===t&&this.selectors.length===t)if(0!=t)if(0<this.hashes.filter(function(t){return t.length<7}).length)this.util.errLog("length","the length of font hash must great than or equal to 7.");else{for(var e=["hashes","families","selectors"],n=0;n<e.length;n++)for(var i=this[e[n]],o=0;o<i.length;o++)if(!i[o])return void this.util.errLog("empty","one of the item of ".concat(e[n]," is empty."));if(["cdn","data","cdnAll","dataAll"].indexOf(this.api)<0)console.log('[qiziku]Arguments Value Error: The value of api must be either "cdn"/"data"/"cdnAll"/"dataAll".');else{if(!(["ttf","otf","woff","woff2","eot"].indexOf(this.format)<0))return!0;console.log('[qiziku]Arguments Value Error: The value of format must be either "ttf"/"otf"/"woff"/"woff2"/"eot".')}}else this.util.errLog("empty","hashes, families and selectors must not be empty.");else this.util.errLog("length","the number of items of hashes, families and selectors must be equal.")}else this.util.errLog("type","hashes, families, selectors and addition each must be an array of string.")}}]),a}(),FontLoaderLogger=function(){function e(t){_classCallCheck(this,e),this.options=t,this.server=SERVICES.LOG.production,this.util=new Util}return _createClass(e,[{key:"log",value:function(t,e){var n,i=(n=window.location,["href","origin","protocol","host","hostname","port","pathname","search","hash"].reduce(function(t,e){return t[e]=n[e],t},{})),o={},s={},a={};switch(t){case"origin":o.origin=i.origin,o.href=i.href,this.send(t,o);break;case"project":this.send(t,i);break;case"options":(s=Object.assign({},this.options)).origin=i.origin,s.href=i.href,["families","hashes","selectors","addition"].forEach(function(t){return s[t]=JSON.stringify(s[t])}),this.send(t,s);break;case"text":(a=e).origin=i.origin,a.href=i.href,this.send(t,a)}}},{key:"send",value:function(t,e){var n=document.createElement("img");e.table=t;e="d=".concat(encodeURIComponent(this.util.rot47(JSON.stringify(e))));n.src="".concat(this.server,"?").concat(e)}}]),e}(),Util=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"textEliminateDuplicationAndSorting",value:function(t){return t.replace(/\s/g,"").split("").filter(function(t,e,n){return n.indexOf(t)===e}).sort().join("")}},{key:"diffString",value:function(t,e){var n="";return t.split("").forEach(function(t){-1===e.indexOf(t)&&(n+=t)}),n}},{key:"errLog",value:function(t,e){console.error("%c [qiziku]%s","background: red; color: yellow",t+" err ",e)}},{key:"rot47",value:function(t){var e,n="";for(t=t||"",e=0;e<t.length;e++){var i=t.charCodeAt(e);n+=33<=i&&i<=126?String.fromCharCode((i-33+47)%94+33):t[e]}return n}}]),t}();
