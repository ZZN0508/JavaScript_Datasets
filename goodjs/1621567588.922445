(window.webpackJsonp=window.webpackJsonp||[]).push([["1591"],{"+oWa":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));class n{constructor(e){this.key=void 0,this.size=void 0,this.result=void 0,this.watchers=void 0,this.key=e,this.watchers=[],this.size=0}setResult(e){const t=this.result;this.result=e;const r=JSON.stringify(e.data),n=r===JSON.stringify(null==t?void 0:t.data);this.size=e.data?r.length:0,n||this.notify()}isCollectable(){return 0===this.watchers.length}watch(e){const t=this;return t.watchers=t.watchers.concat(e),function(){t.watchers=t.watchers.filter(t=>t!==e)}}notify(){const{watchers:e,result:t}=this;t&&(this.watchers=[],Promise.resolve().then(()=>e.forEach(e=>e(t))))}}class i{constructor({hydrationData:e,metricReporter:t,maxSize:r=1/0}){this.data=void 0,this.size=void 0,this.maxSize=void 0,this.lastTouchedEntry=void 0,this.metricReporter=void 0,this.data=new Map,this.size=0,this.maxSize=r,this.metricReporter=t,e.forEach(([e,t])=>{this.set(e,t)})}serialize(){return Array.from(this.data.entries()).reduce((e,[t,r])=>(null!==r&&void 0!==r.result&&e.push([t,r.result]),e),[])}get(e){const{data:t,metricReporter:r}=this,n=t.get(e);if(null===n&&r.increment("frontend.niobe.mini_cache_miss",1,{}),n)return this.touch(n),n.result}set(e,t){var r;const{data:i}=this,s=i.get(e),o=null!=s?s:new n(e);o.setResult(t),this.touch(o),this.size+=o.size-(null!==(r=null==s?void 0:s.size)&&void 0!==r?r:0),this.prune()}watch(e,t){var r;const{data:i}=this,s=null!==(r=i.get(e))&&void 0!==r?r:new n(e);return i.set(e,s),s.watch(t)}delete(e){const t=this.data.get(e);t&&(this.data.set(e,null),this.size-=t.size)}touch(e){e!==this.lastTouchedEntry&&(this.lastTouchedEntry=e,this.data.delete(e.key),this.data.set(e.key,e))}prune(){for(const[e,t]of this.data){if(this.size<=this.maxSize)break;null!==t&&t.isCollectable()&&this.delete(e)}}}function s(e,{key:t,fetchPolicy:r,deferrable:n,queryRef:i},s){if(i){var o;if(i.options.deferrable&&"server-render"===s())return;return null!==(o=null==i?void 0:i.result)&&void 0!==o?o:void 0}if("network-only"===r||"no-cache"===r)return;if("cache-and-network"===r&&"client-hydration"!==s())return;if("server-render"===s()&&n)return void e.set(t,{data:void 0,deferred:!0});const a=e.get(t);return"server-render"===s()&&null!=a&&a.deferred?void 0:a}function o(e,{key:t,fetchPolicy:r},n){n.deferred||"no-cache"!==r&&(n.error||e.set(t,n))}},"7nFp":function(e,t,r){"use strict";function n(e,t){if(e.skip)return t}r.d(t,"a",(function(){return n}))},EG3x:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("D4yp");function i(e){var t;return Object.assign({},e,{context:Object.assign({},null==e?void 0:e.context,{queryString:Object.assign({},null==e||null===(t=e.context)||void 0===t?void 0:t.queryString,{_cb:Object(n.a)()})})})}},FRDn:function(e,t,r){"use strict";let n;r.d(t,"a",(function(){return n})),function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(n||(n={}))},GamM:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("rve7"),i=r("EDtc");function s(e){var t,r;const{operation:s,variables:o,skip:a}=null!==(t=e.queryRef)&&void 0!==t&&t.options?null===(r=e.queryRef)||void 0===r?void 0:r.options:e;if(!s)return Object.assign({},e,{operationName:"[unnamed]",key:"[unknown]"});const c=Object(i.g)(s),u=Object(n.a)({operationName:c,variables:o,skip:a});return Object.assign({},e,{operationName:c,key:u})}},Gf7j:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("q1tI");function i(){const[,e]=Object(n.useState)({}),t=function(){const e=Object(n.useRef)(!0);return Object(n.useEffect)(()=>()=>{e.current=!1},[]),e}(),r=Object(n.useRef)(!1);return r.current=!1,{rerender:()=>{t.current&&(r.current=!0,e({}))},isRerenderScheduled:r}}},"Gmx/":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return c}));var n=r("ilXw"),i=r.n(n),s=r("EDtc");function o(e){var t,r;if(null!==(t=e.context)&&void 0!==t&&t.skipOperationRegistry)return e;const n=null!==(r=e.query)&&void 0!==r?r:e.mutation,o=n&&Object(s.f)(n);if(!n||!o||i.a.get("useViaductNext"))return e;const a=e;let c;const u=Object.assign({},null==a?void 0:a.extensions,{persistedQuery:{version:1,sha256Hash:o}}),l=Object(s.h)(n)&&!a.usePOSTForQuery?"GET":"POST";var d,h,f;"GET"===l?c=Object.assign({},a,{context:Object.assign({},null==a?void 0:a.context,{operationId:o,queryString:Object.assign({},null==a||null===(d=a.context)||void 0===d?void 0:d.queryString,{variables:JSON.stringify(null==a?void 0:a.variables),extensions:JSON.stringify(u)}),fetchOptions:Object.assign({},null==a||null===(h=a.context)||void 0===h?void 0:h.fetchOptions,{method:l,body:void 0})})}):c=Object.assign({},a,{context:Object.assign({},null==a?void 0:a.context,{operationId:o,fetchOptions:Object.assign({},null==a||null===(f=a.context)||void 0===f?void 0:f.fetchOptions,{method:l,body:JSON.stringify({operationName:a.operationName,variables:a.variables,extensions:u})})})});return c}function a(e,t){var r;const n=null!==(r=t.query)&&void 0!==r?r:t.mutation,i=n&&Object(s.f)(n),o=n&&Object(s.d)(n);if(!n||!o||!i)return;const a=t,c=!o.definitions.some(s.a),u={method:c&&!a.usePOSTForQuery?"GET":"POST",operation_type:c?"query":"mutation",operation_name:a.operationName,client_type:"niobe_minimalist"};e.increment("frontend.niobe.operation_registry.request",1,u)}function c(e,t,r){var n,i;if(null!==(n=r.error)&&void 0!==n&&n.graphQLErrors&&null!==(i=r.error)&&void 0!==i&&i.graphQLErrors.some(({message:e})=>"PersistedQueryNotFound"===e)){var o;const r=null!==(o=t.query)&&void 0!==o?o:t.mutation,n=r&&Object(s.d)(r);if(!r)return;const i=Object(s.e)(r),a={method:Object(s.h)(r)&&!t.usePOSTForQuery?"GET":"POST",operation_type:Object(s.h)(r)?"query":"mutation",operation_name:t.operationName,client_type:"niobe_minimalist"};return e.increment("frontend.niobe.operation_registry.error",1,Object.assign({},a,{error_type:"GraphQLError",error_name:"PersistedQueryNotFound"})),e.increment("frontend.niobe.operation_registry.retry_attempt",1,a),n?{skipOperationRegistry:!0}:i.then(()=>({skipOperationRegistry:!0}))}}},JBzR:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("I9Za"),i=r.n(n),s=r("qJkm"),o=r("O5Nq"),a=r("jF57");let c;function u(e,t,r){var n,u;c=null!==(n=c)&&void 0!==n?n:Object(o.a)();const{context:l}=e;return Object.assign({},e,{context:Object.assign({},l,{queryString:Object.assign({},null==l?void 0:l.queryString,Object.assign({locale:i.a.locale()},s.a.current().curr?{currency:s.a.current().curr}:{})),fetchOptions:Object.assign({},null==l?void 0:l.fetchOptions,{headers:Object.assign({},t,null==l?void 0:l.headers,null==l||null===(u=l.fetchOptions)||void 0===u?void 0:u.headers,{"X-Airbnb-API-Key":a.a},{"X-CSRF-Token":c},{niobe:{"X-TRC-V3-Niobe":"1","X-Force-Short-Circuit-To-Kraken":"none"},viaduct:{"X-TRC-V3-Kraken":"1"},default:{}}[r],{"X-CSRF-Without-Token":"1","X-Airbnb-GraphQL-Platform-Client":"minimalist-niobe"})})})})}},"K/Jt":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("dTSv");function i(e){return e instanceof Set}function s(e){return"function"==typeof e}function o(e,t){return e===t||typeof e==typeof t&&(Array.isArray(e)&&Array.isArray(t)?(a=t,(r=e).length===a.length&&r.every((e,t)=>o(r[t],a[t]))):i(e)&&i(t)?function(e,t,r=((e,t)=>e===t)){if(e.size!==t.size)return!1;const n=Array.from(e),i=Array.from(t);return n.every(e=>{const t=i.findIndex(t=>r(e,t));return-1!==t&&(i.splice(t,1),!0)})}(e,t,o):Object(n.b)(e)&&Object(n.b)(t)?Object(n.a)(e,t,o):s(e)&&s(t)?String(e)===String(t):Object.is(e,t));var r,a}},Shen:function(e,t,r){"use strict";function n(e,t){var r;if(null!==(r=t.context)&&void 0!==r&&r.skipDedupe)return;const n=e.get(t.key);return n||void 0}function i(e,t,r){e.set(t.key,r)}function s(e,t){e.delete(t.key)}r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s}))},TfS3:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h}));var n=r("ilXw"),i=r.n(n),s=r("Qyje"),o=r.n(s),a=r("gCJq"),c=r("hlFt"),u=r("EDtc"),l=r("lOXG");const d=(e,t,r)=>({data:null,error:{name:e,message:e,networkError:new Error(r?`${e}. Received body: ${r}`:e),graphQLErrors:[],extraInfo:null},response:t,body:r});async function h(t,r,n,s){var h,f,v,p,g,y,b,O,m,j;const{operation:R}=n;if(!R)return d("No operation received by HTTP link");const w=`${null!==(x=e)&&void 0!==x&&null!==(k=x.env)&&void 0!==k&&k.NIOBE_ENDPOINT?e.env.NIOBE_ENDPOINT:"/api/v3"}/${n.operationName}`;var x,k;const q=Object.assign({operationName:n.operationName},null==n||null===(h=n.context)||void 0===h?void 0:h.queryString),P=i.a.get("useViaductNext")?"https://viaduct-next.d.musta.ch/graphql":`${w}?${o.a.stringify(q)}`,S=null!==(f=null==n||null===(v=n.context)||void 0===v||null===(p=v.fetchOptions)||void 0===p?void 0:p.method)&&void 0!==f?f:"POST",E=Object(l.a)(w,S);let N;if(E){try{N=await E}catch(e){t.increment("frontend.niobe.recaptcha_v3.error",1,{client:"minimalist",status:String(e.statusCode),message:String(e.message)})}N&&t.increment("frontend.niobe.recaptcha_v3.append_header",1,{client:"minimalist",endpoint:w,method:S})}const Q=Object.assign({"Content-Type":"application/json"},N,!i.a.get("useViaductNext")&&Object.assign({"X-Airbnb-GraphQL-Platform":"web"},null==n||null===(g=n.context)||void 0===g||null===(y=g.fetchOptions)||void 0===y?void 0:y.headers)),T=null!=n&&null!==(b=n.context)&&void 0!==b&&b.fetchOptions&&"body"in n.context.fetchOptions?n.context.fetchOptions.body:JSON.stringify({operationName:n.operationName,query:Object(a.print)(Object(u.d)(R)),variables:n.variables}),L=r(P,Object.assign({},null==n||null===(O=n.context)||void 0===O?void 0:O.fetchOptions,{body:T,credentials:"include",headers:Q,method:S,signal:null===(m=n.context)||void 0===m||null===(j=m.fetchOptions)||void 0===j?void 0:j.signal}));try{const e=await L,{ok:t,status:r,statusText:n}=e,i=await e.text();try{const e=JSON.parse(i),{errors:s=[]}=e,o=function(e,t){if(e>=300){const r=new Error("Received unexpected status code "+e);r.statusCode=e,r.body=t;try{r.result=t&&JSON.parse(t)}catch(e){}return r}return null}(r,i);return Object.assign({},e,{response:{ok:t,status:r,statusText:n}},o||s.length?{error:{name:"GraphQL errors",message:s.map(e=>e.message).join(" "),graphQLErrors:s,networkError:o,extraInfo:null}}:{})}catch(e){return d("Network error (parse): "+e.message,{ok:t,status:r,statusText:n},i)}}catch(e){return Object(c.c)(e)?{data:null,error:{extraInfo:{aborted:!0},graphQLErrors:[],message:e.message,name:e.message,networkError:null}}:d("Network error (connection): "+e.message)}}}).call(this,r("8oxB"))},ZFwt:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e,t,r,{context:{attemptsCount:n=1,fetchOptions:i={}}={}},s){const o=s.response&&(502===s.response.status||503===s.response.status)||!s.response;if(t&&o&&n<2){var a;e.increment("frontend.niobe.network_retry",1,{status:String(null===(a=s.response)||void 0===a?void 0:a.status),client_type:"niobe_minimalist"});const t=2*r**(1+2*n/10)*Math.random(),o=t<6e3?t:6e3;return new Promise(e=>setTimeout(e,o)).then(()=>({attemptsCount:n+1,fetchOptions:Object.assign({},i,{headers:Object.assign({},null==i?void 0:i.headers,{"x-retry":"true"})})}))}}},dTSv:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&null!=e&&(e.constructor===Object||void 0===e.constructor)}function i(e,t,r=Object.is){const n=Object.keys(e),i=Object.keys(t),s=new Set(i);return n.length===i.length&&n.every(e=>s.has(e))&&n.every(n=>r(e[n],t[n]))}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}))},ey24:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("7K2a");var n=r("SSfp"),i=r("UGwa"),s=r("Bwtj"),o=r("LvwK"),a=r("jiVd");function c(e,t){var r;if(!Object(a.a)(t))return;const c=Object(i.a)(e,{method:"airlockRetrier"}),u=Object(n.d)(t);u&&Object(n.f)(u);const l=Object(n.a)(null===(r=t.error)||void 0===r?void 0:r.graphQLErrors)||Object(n.e)(t);if(!l)return;const d=Object(n.b)(l,e)||!1;if(!d)return c(),new Promise(r=>{Object(s.a)({airlock:l,onSuccess:()=>r({fetchOptions:{headers:Object(o.a)(l,e)}}),onError:()=>r(void 0),error:t})});Object(n.f)(d)}},jMCr:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("FRDn");class i{constructor({queryRef:e,client:t,stitcher:r}){this.queryRef=void 0,this.stitcher=void 0,this.client=void 0,this.memo=void 0,this.queryRef=e,this.stitcher=r,this.client=t,this.memo=new WeakMap}watchOnce(e){return this.client.watchOnce(this.queryRef,t=>{this.queryRef!==t?e(new i(Object.assign({},this,{queryRef:t}))):this.watchOnce(e)})}isLoading(){return!this.client.readResult({queryRef:this.queryRef})}isNetworkErrored(){var e,t;return Boolean(null===(e=this.getResult())||void 0===e||null===(t=e.error)||void 0===t?void 0:t.networkError)}getResult(){var e,t;const r=this.client.readResult({queryRef:this.queryRef});if(null==r||null===(e=r.error)||void 0===e||null===(t=e.extraInfo)||void 0===t||!t.aborted)return null!=r?r:void 0}stitch(e){var t,r,n;const i=this.memo.get(e);if(i)return i;const s=this.getResult();if(!s)return e;if(!this.stitcher)return e;if(!e.data)return e;const{variables:o}=this.client.getOptions(this.queryRef),a=Object.assign({variables:o},e,{error:null!==(t=s.error)&&void 0!==t?t:e.error,data:this.stitcher(e.data,{fetchMoreResult:null!==(r=null===(n=this.getResult())||void 0===n?void 0:n.data)&&void 0!==r?r:void 0,variables:o})});return this.memo.set(e,a),a}refetch(e){return new i(Object.assign({},this,{queryRef:this.client.executeFrom({queryRef:this.queryRef,options:{variables:e,fetchPolicy:"network-only"}})}))}}const s={data:void 0};class o{static fromQueryRef(e,t){return new o({parent:void 0,client:t,type:"fetch",firstPage:new i({queryRef:e,client:t}),nextPages:[]})}constructor({parent:e,firstPage:t,nextPages:r,client:n,type:i}){this.parent=void 0,this.firstPage=void 0,this.nextPages=void 0,this.type=void 0,this.client=void 0,this.memo=void 0,this.parent=e,this.firstPage=t,this.nextPages=r,this.client=n,this.type=i,this.memo=new WeakMap}pages(){return[this.firstPage].concat(this.nextPages)}watchOnce(e){const t=this.pages().map((r,n)=>r.watchOnce(r=>{t.forEach(e=>e()),e(this,new o({parent:this,firstPage:0===n?r:this.firstPage,nextPages:n>=1?this.nextPages.slice(0,n-1).concat(r).concat(this.nextPages.slice(n)):this.nextPages,client:this.client,type:this.type}))}))}isLoading(){return this.firstPage.isLoading()}async onLoaded(e){return await Promise.all(this.pages().map(e=>e.queryRef.promise)),(()=>e(this))()}getNetworkStatus(){if(this.pages().some(e=>e.isNetworkErrored()))return n.a.error;if(!this.pages().some(e=>e.isLoading()))return n.a.ready;switch(this.type){case"fetch":return n.a.loading;case"refetch":return n.a.refetch;case"fetchMore":return n.a.fetchMore;case"setVariables":return n.a.setVariables;default:return n.a.ready}}getResult(){var e,t;const{firstPage:r,nextPages:n}=this,i=r.getResult(),o=null===(e=this.loadedAncestor())||void 0===e?void 0:e.getResult(),a=i&&n.reduce((e,t)=>t.stitch(e),i),c=null!==(t=null!=a?a:o)&&void 0!==t?t:s;return this.augmentResultFor(c)}getMemoizedResult(e){var t,r;return null!==(t=this.memo.get(e))&&void 0!==t?t:null===(r=this.parent)||void 0===r?void 0:r.getMemoizedResult(e)}augmentResultFor(e){var t;const{client:r,firstPage:n}=this,i=this.getMemoizedResult(e);if(i&&i.networkStatus===this.getNetworkStatus())return i;const s=Object.assign({},e,{data:null!==(t=e.data)&&void 0!==t?t:void 0,loading:this.isLoading(),stale:!1,variables:r.getOptions(n.queryRef).variables,queryRef:n.queryRef,networkStatus:this.getNetworkStatus()});return this.memo.set(e,s),s}loadedAncestor(){if(this.parent)return this.parent.isLoading()?this.parent.loadedAncestor():this.parent}replaceWith(e){return new o(Object.assign({},this,{parent:this,firstPage:new i({queryRef:e,client:this.client}),nextPages:[],type:"setVariables"}))}refetch(e){return new o(Object.assign({},this,{parent:this,firstPage:this.firstPage.refetch(e),nextPages:[],type:"refetch"}))}addPage(e,t){const r=new i({queryRef:this.client.executeFrom({queryRef:this.firstPage.queryRef,options:{variables:e}}),stitcher:t,client:this.client});return{newQueryAggregate:new o(Object.assign({},this,{parent:this,firstPage:this.firstPage,nextPages:[...this.nextPages,r],type:"fetchMore"})),newQueryPage:r}}}},lOXG:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return u}));var n=r("mVwX"),i=r("ifln"),s=r("7Aoz"),o=r("Yg/F");const a=e=>{const{extensions:{errorClass:t="",errorType:r="",response:{statusCode:n=0}={}}={}}=e;return"ValidationRequiredException"===t||"validation_required"===r||440===n};function c(e,t){var r,i;const s=null===(r=t.error)||void 0===r||null===(i=r.graphQLErrors)||void 0===i?void 0:i.find(a);if(!s)return;const c=(e=>{if(void 0===e)return"unknown";const t=e[0];return"number"==typeof t?String(t):t})(s.path);return Object(n.getRecaptchaV3TokenHeader)({action:c,timeoutInMs:5e3,maxRetries:5,shouldThrow:!0}).then(t=>{var r;const n=null===(r=e.context)||void 0===r?void 0:r.fetchOptions;return{fetchOptions:Object.assign({},n,{headers:Object.assign({},null==n?void 0:n.headers,t)})}}).catch(()=>{Object(o.a)()})}function u(e,t){if(!Object(s.a)())return null;const r=Object(i.maybeGetRecaptchaV3TokenHeader)(e,t);return r?r():null}},niQI:function(e,t,r){"use strict";r.r(t),r.d(t,"MinimalistNiobeClient",(function(){return x}));var n=r("q1tI"),i=(r("QZac"),r("uyjd")),s=r("QqwG"),o=r("8SGJ"),a=r("SchF"),c=r("7nFp"),u=r("GamM"),l=r("+oWa"),d=r("lFqN"),h=r("Shen"),f=r("Gmx/"),v=r("ey24"),p=r("ZFwt"),g=r("JBzR"),y=r("EG3x"),b=r("lOXG"),O=r("TfS3"),m=r("Gf7j"),j=r("jMCr"),R=r("oema");for(var w in R)["MinimalistNiobeClient","default"].indexOf(w)<0&&function(e){r.d(t,e,(function(){return R[e]}))}(w);class x{constructor({data:e=[],fetch:t,performance:r,metricReporter:n,cache:i=new l.a({hydrationData:e,maxSize:((()=>{var e;return null==r||null===(e=r.memory)||void 0===e?void 0:e.jsHeapSizeLimit})()||16777216)/4,metricReporter:n}),inflight:s=new Map,retryOnNetworkError:o=!0,retryDelay:a=300,extraHeaders:c={},disablePrepare:u=!1,getRenderingState:d,graphQLGateway:h="niobe"}){this.type="minimalist",this.cache=void 0,this.inflight=void 0,this.metricReporter=void 0,this.fetch=void 0,this.getRenderingState=void 0,this.retryOnNetworkError=void 0,this.retryDelay=void 0,this.extraHeaders=void 0,this.disablePrepare=void 0,this.skipResult=void 0,this.graphQLGateway=void 0,this.cache=i,this.inflight=s,this.retryOnNetworkError=o,this.retryDelay=a,this.getRenderingState=d,this.metricReporter=n,this.extraHeaders=c,this.disablePrepare=u,this.fetch=t,this.skipResult={data:void 0,skip:!0},this.metricReporter.increment("niobe_client_type",1,{clientType:"minimalist"}),this.graphQLGateway=h}preloadQuery(e){return this.execute(Object(s.b)(e))}async query(e){var t;const r=await this.execute(Object(s.b)(e)).promise;if(null!==(t=r.error)&&void 0!==t&&t.networkError)throw r.error.networkError;return r}readQuery(e){var t,r,n,i;return e.queryRef&&!e.queryRef.options.deferrable?null!==(t=null===(r=e.queryRef.result)||void 0===r?void 0:r.data)&&void 0!==t?t:null:null!==(n=null===(i=this.readResult(Object(s.b)(e)))||void 0===i?void 0:i.data)&&void 0!==n?n:null}writeQuery(e){const t=Object(u.a)(Object(s.b)(e)),r={data:e.data},n=o.a.for({options:Object(s.b)(e),promise:Promise.resolve(r),result:r,clientType:this}),{promise:i}=n;this.processResult({transformedOptions:t,result:r,promise:i})}async mutate(e){const t=await this.execute(Object(s.a)(e)).promise;if(t.error){var r,n,i;if(t.error.networkError)throw null===(r=t.error)||void 0===r?void 0:r.networkError;if((null===(n=t.error)||void 0===n||null===(i=n.graphQLErrors)||void 0===i?void 0:i.length)>0){var o,a;const e=new Error(null===(o=t.error)||void 0===o||null===(a=o.graphQLErrors)||void 0===a?void 0:a.map(e=>e.message).join("\n"));throw e.graphQLErrors=t.error.graphQLErrors,e}}return t}extract(){return this.cache.serialize()}updateCache(e){e.forEach(([e,t])=>{Object(l.c)(this.cache,{key:e},t)})}readResult(e){const{queryRef:{clientType:t}={}}=e;t&&t!==this&&Object(a.k)(Object(a.h)(this,t));const r=this.transformOptions(e);return this.syncResolve(r)}getOptions(e){return e.options}watchOnce(e,t){const r=this.getOptions(e);return this.cache.watch(this.transformOptions(r).key,e=>{t(o.a.for({promise:Promise.resolve(e),result:e,clientType:this,options:r,deferred:e.deferred}))})}executeFrom({queryRef:e,options:t}){const r=this.getOptions(e);return this.execute(Object.assign({},r,t,{variables:Object.assign({},r.variables,t.variables)}))}transformOptions(e){const t=Object(u.a)(e),r=Object(g.a)(t,this.extraHeaders,this.graphQLGateway),n=Object(f.b)(r);return Object(y.a)(n)}syncResolve(e){var t,r,n,i;if(e.queryRef&&!e.queryRef.options.deferrable)return null!==(t=null===(r=e.queryRef)||void 0===r?void 0:r.result)&&void 0!==t?t:void 0;const{cache:s}=this;return null!==(n=null!==(i=Object(l.b)(s,e,this.getRenderingState))&&void 0!==i?i:Object(c.a)(e,this.skipResult))&&void 0!==n?n:void 0}asyncResolve(e,t){var r;if(e.queryRef)return e.queryRef.promise;if(t.queryRef)return t.queryRef.promise;const{inflight:n,fetch:i,metricReporter:s,graphQLGateway:o}=this,a=e=>Object(O.a)(s,i,e,o).then(r=>this.retry(t,e,r,a));return null!==(r=Object(h.b)(n,e))&&void 0!==r?r:a(e)}retry(e,t,r,n){var i,s,o,a,c;if(null!==(i=r.error)&&void 0!==i&&null!==(s=i.extraInfo)&&void 0!==s&&s.aborted)return r;const{metricReporter:u,retryOnNetworkError:l,retryDelay:d}=this,h=null!==(o=null!==(a=null!==(c=Object(b.b)(t,r))&&void 0!==c?c:Object(v.a)(u,r))&&void 0!==a?a:Object(f.a)(u,t,r))&&void 0!==o?o:Object(p.a)(u,l,d,t,r);return h?Promise.resolve(h).then(t=>{if(!t)return r;const i=this.transformOptions(Object.assign({},e,{context:Object.assign({},e.context,{skipDedupe:!0},t)}));return n(i).then(t=>this.retry(e,i,t,n))}):r}processResult({transformedOptions:e,result:t,promise:r}){const{cache:n,inflight:i,metricReporter:s}=this,o=requestIdleCallback;[t=>Object(h.c)(i,e,t)].forEach(e=>e(r));const a=[t=>Object(l.c)(n,e,t),()=>Object(h.a)(i,e),t=>o(()=>Object(d.a)(s,e,t)),()=>o(()=>Object(f.c)(s,e))];t?a.forEach(e=>e(t)):r.then(e=>a.forEach(t=>t(e)))}execute(e){const t=this.transformOptions(e),r=(()=>{if(e.queryRef)return e.queryRef;if(t.queryRef)return t.queryRef;const r=this.syncResolve(t);if(r)return o.a.for({promise:Promise.resolve(r),result:r,clientType:this,options:e,deferred:r.deferred});const n=this.asyncResolve(t,e),i="server-render"===this.getRenderingState()&&"deferrable"in e&&e.deferrable;return o.a.for({promise:n,clientType:this,options:e,deferred:i})})();return this.processResult({transformedOptions:t,result:r.result||void 0,promise:r.promise}),r}useClientSideQuery(e,t){const r=Object(i.a)(()=>t,[t]),s=Object(n.useMemo)(()=>this.preloadQuery(Object.assign({query:e},r)),[r,e,this]);return this.usePreloadedQuery(e,s)}useQueryAggregate(e){const t=Object(n.useRef)(),r=Object(n.useRef)(void 0),{isRerenderScheduled:i,rerender:s}=Object(m.a)(),o=e=>{var t;i.current||(t=e,r.current===t.getResult())||(i.current=!0,s())},a=e=>{t.current=e,e.onLoaded(o),e.watchOnce((e,r)=>{e===t.current&&a(r)}),o(e)};if(!t.current){const t=j.a.fromQueryRef(e,this);r.current=t.getResult(),a(t)}const c=Object(n.useRef)(e);if(e!==c.current){c.current=e;const n=t.current.replaceWith(e);r.current=n.getResult(),a(n)}const u=t.current.getResult();return r.current=u,{queryAggregateRef:t,setQueryAggregate:a,result:u}}usePreloadedQuery(e,t,r,i){const{queryAggregateRef:s,setQueryAggregate:o,result:a}=this.useQueryAggregate(t),c=Object(n.useCallback)((function(e){const r=s.current.refetch(null!=e?e:t.options.variables);return o(r),r.onLoaded(()=>r.getResult())}),[s]),u=Object(n.useCallback)((async function({variables:e,updateQuery:t}){const{newQueryAggregate:r,newQueryPage:n}=s.current.addPage(e,t);return o(r),await n.queryRef.promise,n.getResult()}),[s]);return Object(n.useMemo)(()=>Object.assign({},a,{refetch:c,fetchMore:u,client:this}),[u,c,a])}useMutation(e,t){const[r,i]=Object(n.useState)({data:void 0,error:void 0,called:!1,loading:!1});return[async r=>{i(e=>Object.assign({},e,{loading:!0}));try{var n;const s=await this.mutate(Object.assign({mutation:e},t,r)),o=(null==r?void 0:r.update)||(null==t?void 0:t.update);o&&o(this,s),i(Object.assign({},s,{data:null!==(n=s.data)&&void 0!==n?n:void 0,loading:!1,called:!0}));const a=(null==r?void 0:r.onCompleted)||(null==t?void 0:t.onCompleted);return a&&a((null==s?void 0:s.data)||{}),s}catch(e){throw i({data:void 0,loading:!1,called:!0,error:e}),e}},r]}redirect(e){window.location.href=e}}t.default=x},oema:function(e,t){},uyjd:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("q1tI"),i=r("K/Jt");function s(e,t){const r=Object(n.useRef)();return r.current&&Object(i.a)(t,r.current.key)||(r.current={key:t,value:e()}),r.current.value}}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/niobe-minimalist-client-ba083673.js.map