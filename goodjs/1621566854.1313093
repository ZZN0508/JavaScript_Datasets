(self.webpackChunkindeedmobile=self.webpackChunkindeedmobile||[]).push([[609],{1630:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var r=n(7294),o=n(3410),a=n(5697),s=n.n(a),i=n(6394),c=function(e){var t=e.messages;return"OK"===e.status&&t&&t.length>0?e:Promise.reject()},u=n(3299),l=n(6782),f=n(9735),m=function(e,t){if(!(t.length<1)){var n=[],r=[];t.forEach((function(e,t){n.push(e.msgTk),r.push(t)})),(0,u.I)({tk:e,moduleName:f.GQ.MESSAGES,itemNames:n,position:r})}},p=n(7107);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t=e.headerItem,n=e.isRtl;return r.createElement("div",{className:"jobsearch-MessagesHeader"},r.createElement(p.Z,{items:[g({},t)],isRtl:n}))};s().bool,s().object;y.defaultProps={isRtl:!1};var v=y,d=n(30),j=n(1925),O=n(635),E=n(4184),M=n.n(E);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=function(e){return M()({"jobsearch-MessageDetail":!0,"jobsearch-MessageDetail--stretch":!0,"jobsearch-MessageDetail--clickable":!e})},C=(s().string,s().object,s().bool,s().func,function(e){var t=e.subject,n=e.sender,o=e.snippet,a=e.formattedAge,s=e.handleClick,i=e.callToActionButton,c=e.useChevron,u=e.viewMessageLink,l=r.createElement("div",{className:"jobsearch-MessageDetail-content",tabIndex:"-1"},r.createElement("div",{className:"jobsearch-MessageDetail-body"},r.createElement("div",{className:"jobsearch-MessageDetail-subject"},t),r.createElement("div",{className:"jobsearch-MessageDetail-sender"},n),r.createElement("div",{className:"jobsearch-MessageDetail-snippet"},o)),r.createElement("div",{className:"jobsearch-MessageDetail-footer"},i&&r.createElement(j.Z,k({buttonType:"tertiary",className:"jobsearch-MessageDetail-cta"},i,{onClick:s,href:u})),r.createElement("div",{className:"jobsearch-MessageDetail-age"},a))),f=c?r.createElement("div",{className:"jobsearch-MessageDetail-chevron"},r.createElement(O.Z,{type:"chevron-right",size:"md",color:"grey"})):null;return i?r.createElement("div",{className:P(i)},l,f):r.createElement("a",{className:P(i),onClick:s,href:u},l,f)});function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=function(e,t){return function(){!function(e,t){(0,l.W0)({tk:t,moduleName:f.GQ.MESSAGES,itemNames:[e]})}(e,t)}},T=(s().string,s().object,s().bool,function(e){var t=e.mobtk,n=e.msgTk,o=w(n,t);return r.createElement(C,A({handleClick:o},e))}),S=n(9208);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N="DESKTOP_CAROUSEL",R=function(e){return e.map((function(t,n){return(0,S.yz)("Messages Carousel Dots Aria Label, {0} is current index and {1} is size","Slide {0} of {1}",[n+1,e.length])}))},_=(s().array,s().string,s().oneOf,s().object,s().bool,function(e){var t=e.messages,n=e.mobtk,o=e.carouselType,a=e.callToActionButton,s=e.useChevron;if(1===t.length)return r.createElement(T,D({mobtk:n,callToActionButton:a,useChevron:s},t[0]));var i=function(e){var t=e.spanClassname,n=e.messages,o=e.mobtk,a=e.callToActionButton,s=e.useChevron;return n.map((function(e){return r.createElement("div",{className:"jobsearch-MessagesCarousel-messageDetailContainer ".concat(t),key:e.msgTk},r.createElement(T,D({callToActionButton:a,useChevron:s,mobtk:o},e)))}))}({spanClassname:function(e){return e===N?"icl-u-xs-span6":"icl-u-xs-span12"}(o),messages:t,mobtk:n,callToActionButton:a,useChevron:s});if(o===N){var c=function(e,t){return e.map((function(n,o){return o%t==0?r.createElement("div",{className:"jobsearch-MessagesCarousel-messageDetailGroup"},e.slice(o,o+t)):null})).filter((function(e){return e}))}(i,2);return r.createElement("div",{className:"jobsearch-MessagesCarousel"},r.createElement(d.Z,{items:c,responsiveButtons:!1,dotAriaLabels:R(c)}))}return r.createElement("div",{className:"jobsearch-MessagesCarousel"},r.createElement(d.Z,{items:i,responsiveButtons:!0,fullWidth:!1,dotAriaLabels:R(i)}))});function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}s().string,s().object,s().array,s().bool;var x=function(e){var t=e.messages,n=e.mobtk,o=e.callToActionButton,a=e.useChevron;return r.createElement("div",{className:"jobsearch-MessagesList"},t&&t.map((function(e){return r.createElement(T,L({key:e.msgTk,mobtk:n,callToActionButton:o,useChevron:a},e))})))};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(s,e);var t,n,o,a=G(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={animating:!0},t.handleAnimationEnd=t.handleAnimationEnd.bind(F(t)),t}return t=s,(n=[{key:"handleAnimationEnd",value:function(){this.setState({animating:!1})}},{key:"render",value:function(){var e=this.props,t=e.messages,n=e.headerItem,o=e.carouselType,a=e.callToActionButton,s=e.useChevron,i=e.isRtl,c=e.mobtk,u=this.state.animating;if(!t||0===t.length)return r.createElement("div",{className:"jobsearch-Messages jobsearch-Messages--empty"});var l=M()({"jobsearch-Messages":!0,"jobsearch-Messages--animated":!0,"jobsearch-Messages--animating":u}),f=o?_:x;return r.createElement("div",{className:l,onAnimationEnd:this.handleAnimationEnd},r.createElement(v,{headerItem:n,isRtl:i}),r.createElement(f,{messages:t,mobtk:c,carouselType:o,callToActionButton:a,useChevron:s}))}}])&&B(t.prototype,n),o&&B(t,o),s}(r.Component);s().array,s().string,s().object,s().bool;z.defaultProps={isRtl:!1};var H=n(9653),K=n(6618);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=(0,H.Zk)(30),oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(s,e);var t,n,o,a=ee(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={messages:[]},t}return t=s,(n=[{key:"componentDidMount",value:function(){return this.props.messagingServiceClient?this.fetchAndLogMessagesMessaging():this.fetchAndLogMessagesInbox()}},{key:"fetchAndLogMessagesInbox",value:function(){var e=this,t=this.props,n=t.getMessagesLink,r=t.mobtk;return function(e){return(0,i.uz)(e,{credentials:"include"}).then(c).catch((function(){}))}(n).then((function(t){t&&(e.setState(t),m(r,t.messages))}))}},{key:"fetchAndLogMessagesMessaging",value:function(){var e=this,t=this.props,n=t.messagingServiceClient,r=t.mobtk;return n.jobseekers.v2.getConversations(["MESSAGE"]).then((function(t){t&&t.data&&e.setState({messages:e.convertToInboxMessages(t.data)},(function(){m(r,e.state.messages)}))}))}},{key:"convertToInboxMessages",value:function(e){var t=this.props,n=t.baseMessagingWebUrl,r=t.maxMessages,o=t.senderPrefix,a=e.data||[],s=(new Date).getTime();return a.filter((function(e){return!(s-e.lastMessageTimestampMs>re||e.metadata.lastMessageIsReminder||0===e.unreadMessageCount)})).sort((function(e,t){return t.lastMessageTimestampMs-e.lastMessageTimestampMs})).map((function(e){var t,r,a=e.participants.find((function(e){return!e.currentUser})),i=s-e.lastMessageTimestampMs;return{msgTk:e.sid,subject:e.topic,sender:a&&o+a.userFullName,snippet:e.previewSnippet,viewMessageLink:"".concat(n,"/conversations/").concat(e.sid,"/?from=homepage_messagesModule"),formattedAge:(t=i,r=parseInt((t/864e5).toFixed(0)),0!==r?r:1)}})).slice(0,r||a.length)}},{key:"render",value:function(){var e=this,t=this.state.messages;return r.createElement(K.ZP.Consumer,null,(function(n){var o=n.i18n,a=t.map((function(e){return q(q({},e),{},{formattedAge:o.npgettext("Messages age","{0} day ago","{0} days ago",e.formattedAge,[e.formattedAge])})}));return r.createElement(z,X({messages:a},e.props))}))}}])&&V(t.prototype,n),o&&V(t,o),s}(r.Component);s().string,s().object,s().bool,s().number;oe.defaultProps={isRtl:!1};var ae=function(e){if(!e)return null;var t=e.cookies,n=e.userAgent,r=e.options,a={BASE_URL:r.baseUrl,DEFAULT_TIMEOUT:r.defaultTimeout,XSRF_COOKIE_NAME:r.xsrfCookieName,XSRF_HEADER_NAME:r.xsrfHeaderName,CLIENT_APP:r.clientApp,LOCALE_COUNTRY:r.localeCountry,LOCALE_LANGUAGE:r.localeLanguage};return new o.hN(a,t,n)},se=function(){return r.createElement(K.ZP.Consumer,null,(function(e){var t=e.initialData,n=t.isRtl,o=t.messagesModel,a=t.messagingServiceClientParameters,s=t.baseMessagingWebUrl,i=t.mobtk;if(oe&&o){var c=o.headerItem,u=o.carouselType,l=o.callToActionButton,f=o.useChevron,m=o.getMessagesLink;return r.createElement(oe,{mobtk:i,isRtl:n,headerItem:c,carouselType:u,callToActionButton:l,useChevron:f,getMessagesLink:m,messagingServiceClient:ae(a),baseMessagingWebUrl:s,maxMessages:a&&a.maxMessages,senderPrefix:a&&a.senderPrefix})}return null}))}}}]);