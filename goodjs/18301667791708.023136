var _i_=this._i_||function(){},_r_=this._r_||function(e){return e};function ImageLazyLoader(){_i_("796:a3c4e208"),this.highResQueue=[],this.shouldLoadHighRes=!1,this.viewPortExtendedHeight=null,this.isWatchingForNewImages=!1,this.supportsIntersectionObserver="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in IntersectionObserverEntry.prototype&&"isIntersecting"in IntersectionObserverEntry.prototype,_r_()}ImageLazyLoader.prototype={SCREEN_HEIGHT_COEFFICIENT:1.4,SCREEN_SIDE_COEFFICIENT:1.33,LAZY_IMAGE_CLASS:".js-lazy-image",init:function(){var e;_i_("796:ba3462d7"),this.watcher=this.getWatcher(),this.supportsIntersectionObserver||(e=function(){_i_("796:8f1a9933"),this.viewPortExtendedHeight=(window.innerHeight||document.documentElement.clientHeight)*this.SCREEN_HEIGHT_COEFFICIENT,_r_()}.bind(this),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e()),document.addEventListener("readystatechange",this.enableHighResImagesLoading.bind(this)),window.lzimg&&window.lzimg.state&&this.documentLoadingStateChanged(window.lzimg.state),window.lzimg=this.documentLoadingStateChanged.bind(this),_r_()},enableHighResImagesLoading:function(){if(_i_("796:46d830b4"),"complete"!==document.readyState)return _r_();document.removeEventListener("readystatechange",this.enableHighResImagesLoading.bind(this)),this.shouldLoadHighRes=!0,this.highResQueue.forEach(function(e){_i_("796:f46f9eb4"),this.watcher.add(e),_r_()}.bind(this)),this.highResQueue=[],_r_()},loadLazyImage:function(e){_i_("796:ae30e95f");var t=this.parseDataSrc(e);this.shouldLoadHighRes&&2===t.length?this.loadImageAndInsert(t[1],e):this.loadImageAndInsert(t[0],e),this.shouldLoadHighRes||2!==t.length||this.highResQueue.push(e),_r_()},observeMutations:function(){_i_("796:70f082ad"),"MutationObserver"in window&&(this.isWatchingForNewImages=!0,new MutationObserver(function(e){_i_("796:cc78a360"),e.forEach(function(e){_i_("796:e1cb745c"),Array.prototype.forEach.call(e.addedNodes,function(e){if(_i_("796:5a5bc3cd"),1!==e.nodeType)return _r_();this.addToWatch(e),_r_()}.bind(this)),_r_()}.bind(this)),_r_()}.bind(this)).observe(document.body,{childList:!0,subtree:!0,characterData:!1})),_r_()},documentLoadingStateChanged:function(e){_i_("796:a5f421de"),this.isWatchingForNewImages||(this.observeMutations(),this.addToWatch(document.body),this.isWatchingForNewImages||"ready"!==e||(this.addToWatch(document.body),this.listenMutationEvents(),this.isWatchingForNewImages=!0)),_r_()},addToWatch:function(e){_i_("796:e6c4a23a"),this.isValidLazyImage(e)&&this.watcher.add(e);for(var t=e.querySelectorAll(this.LAZY_IMAGE_CLASS),i=0;i<t.length;i++){var n=t[i];this.isValidLazyImage(n)&&this.watcher.add(n)}_r_()},isValidLazyImage:function(e){return _i_("796:118f6465"),_r_(e.getAttribute("data-src")&&!e.getAttribute("data-lazy")&&e.classList.contains("js-lazy-image"))},parseDataSrc:function(e){_i_("796:01345d7a");for(var t=e.getAttribute("data-src").split(","),i=0;i<t.length;i++)t[i]=t[i].trim();return _r_(t)},loadImageAndInsert:function(e,t){_i_("796:b22bd860");var i=new Image,n=encodeURI(e);i.onload=function(){_i_("796:58293110"),"IMG"===t.tagName?t.src=n:t.style.backgroundImage='url("'+n+'")',_r_()},i.src=n,_r_()},listenMutationEvents:function(){_i_("796:c900e2c2"),"MutationEvent"in window&&document.body.addEventListener("DOMNodeInserted",function(e){_i_("796:bd38436b");e=e.target;if(1!==e.nodeType)return _r_();this.addToWatch(e),_r_()}.bind(this)),_r_()},getWatcher:function(){return _i_("796:5c408f0e"),this.supportsIntersectionObserver?_r_(this.intersectionObserverWatcher()):_r_(this.vanillaJSWatcher())},intersectionObserverWatcher:function(){_i_("796:5c2054d8");var e=function(e){_i_("796:57a9386d"),e.forEach(function(e){_i_("796:c33ac790"),e.isIntersecting&&(this.loadLazyImage(e.target),i.unobserve(e.target)),_r_()}.bind(this)),_r_()}.bind(this),t={rootMargin:"0% "+(100*this.SCREEN_SIDE_COEFFICIENT-100)+"% "+(100*this.SCREEN_HEIGHT_COEFFICIENT-100)+"% "+(100*this.SCREEN_SIDE_COEFFICIENT-100)+"%"},i=new IntersectionObserver(e,t);return _r_({add:function(e){_i_("796:16f7172d"),e.setAttribute("data-lazy",1),i.observe(e),_r_()},remove:function(e){_i_("796:659d5da7"),i.unobserve(e),_r_()}})},vanillaJSWatcher:function(){var i;_i_("796:101327c9");var t=!1,n=[],r=function(e){_i_("796:72f76997");e=e.getBoundingClientRect();return _r_(0<=e.top&&0<=e.left&&e.top<=this.viewPortExtendedHeight)}.bind(this),a=function(i){_i_("796:9b664c06");function n(){_i_("796:be67ad1f"),a=Date.now(),r=null,i.call(),_r_()}var r=null,a=0;return _r_(function(){_i_("796:722f9056");var e=Date.now(),t=50-(e-a);t<=0||50<t?(r&&(clearTimeout(r),r=null),a=e,i.call()):r=r||setTimeout(n,t),_r_()})}(function(){_i_("796:60ad6391");for(var e=0;e<n.length;e++){var t=n[e];r(t)&&(i(t),this.loadLazyImage(t))}_r_()}.bind(this)),e=function(e){_i_("796:714449b7"),e.setAttribute("data-lazy",1),r(e)?this.loadLazyImage(e):(n.push(e),t||(_i_("796:d4c997d6"),t=!0,window.addEventListener("scroll",a),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),window.removeEventListener("readystatechange",a),_r_())),_r_()}.bind(this);return _r_({add:e,remove:i=function(e){_i_("796:d5a4a5ba");e=n.indexOf(e);-1<e&&(n.splice(e,1),0===n.length&&(_i_("796:b0319949"),t=!1,window.removeEventListener("scroll",a),window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a),window.removeEventListener("readystatechange",a),_r_())),_r_()}})}},ImageLazyLoader.prototype.SCREEN_HEIGHT_COEFFICIENT=1.45,(new ImageLazyLoader).init();
