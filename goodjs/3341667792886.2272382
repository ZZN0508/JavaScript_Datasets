YUI.add("af-compositeview",function(s,e){"use strict";var i=s.Af.Utils,r=s.Lang.isFunction,n=s.Object,a=s.Parallel;function o(e,i,t,n){var o=this;o.name=e,o.parent=i,o.selector=t,o.view=n}function t(){}o.prototype={setView:function(e){return this.view=e,this},showView:function(e,i){var t=this,n=t.view;if(n!==e)return i=i||{},n&&r(n.willHide)||e&&r(e.willShow)?(i=new a,n&&r(n.willHide)&&n.willHide(i.add(function(){})),e&&r(e.willShow)&&e.willShow(i.add(function(){})),i.done(o)):o(),t;function o(){t.detachView(),t.view=e,t.attachView()}},closeView:function(){var e=this,i=e.view;function t(){e.detachView(),e.view=void 0}return i&&r(i.willHide)?i.willHide(t):t(),e},getView:function(){return this.view},detachView:function(e){var i=this,t=i.view;return t&&(t.remove(e),t.removeTarget(i.parent),t.set("display",null)),i},getContainer:function(){return this.parent.get("container").one(this.selector)},attachView:function(){var e,i,t=this,n=t.view;return n&&((e=t.getContainer()).addClass("yui3-app-views"),(i=n.get("container"))&&e!==i.get("parentNode")&&e.append(i),n.addTarget(t.parent),n.set("display",t.name)),t},show:function(){return this.getContainer().show(),this},hide:function(){return this.getContainer().hide(),this}},t.prototype={allowRegionLateBind:!0,initializer:function(e){var o=this;o.views=i.objectMerge({},o.views,(e=e||{}).views),i.objectMerge({},o.regions,e.regions),n.each(o.regions,function(e,i){var t,n=(n=o.getRegion(i))||o.createRegion(i,e.selector);e.view&&n&&(t=s.Lang.isString(e.view)?o.getView(e.view):e.view)&&n.showView(t)})},attachRegionViews:function(){n.each(this._regions,function(e){e.attachView()})},detachRegionViews:function(i){n.each(this._regions,function(e){e.detachView(i)})},createRegion:function(e,i){var t=this;return t._regions||(t._regions={}),i=i||'[data-region="'+e+'"]',t.allowRegionLateBind||t.get("container").one(i)?(t._regions[e]=new o(e,t,i,null),t._regions[e]):null},getRegion:function(e){return this._regions?this._regions[e]:null},destroyView:function(e,i){var t,n,o;e&&(n=this._views,o=i&&!0===i.async,(e="string"==typeof e?n?n[e]:null:e)&&(t=e.get("name"),e===n[t]&&delete n[t],o?s.later(0,null,function(){e.destroy(i)}):e.destroy(i)))},destroyViews:function(i){var e=this._views,t=i&&!0===i.async;this._views={},t?s.later(0,null,function(){n.each(e,function(e){e.destroy(i)})}):n.each(e,function(e){e.destroy(i)})},getView:function(e){return this._views?this._views[e]:null},setView:function(e,i){this._views||(this._views={}),this._views[e]=i}},s.namespace("Af").CompositeView=t},"@VERSION@",{requires:["parallel","af-utils"]});
