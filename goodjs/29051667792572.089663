!function(u,n,o){var t,e,r,i,s,a,c,h,l,v,p,d,f,g,m;function w(n,t,r,i){return r=r||!1,i=i||0,v.forEach(t,function(e){v.forEach(v.keys(e),function(t){null===e[t]||e[t]===o?n[t]=e[t]:r&&i<10&&"[object Object]"===y(e[t])?(n[t]=n[t]||{},w(n[t],[e[t]],r,i+1)):n.hasOwnProperty(t)||(n[t]=e[t])})}),n}function y(t){return Object.prototype.toString.call(t)}u.trackJs?u.console&&u.console.warn&&u.console.warn("TrackJS global conflict"):((t=function(t,e){this.config=t,this.onError=e,t.enabled&&this.watch()}).prototype={watch:function(){v.forEach(["EventTarget","Node","XMLHttpRequest"],function(t){v.has(u,t+".prototype.addEventListener")&&v.hasOwn(u[t].prototype,"addEventListener")&&this.wrapEventTarget(u[t].prototype)},this),this.wrapTimer("setTimeout"),this.wrapTimer("setInterval")},wrap:function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw o.onError("catch",t,{bindTime:n,bindStack:r}),v.wrapError(t)}}var n,r,i,o=this;try{if(!v.isFunction(e)||v.hasOwn(e,"__trackjs__"))return e;if(v.hasOwn(e,"__trackjs_state__"))return e.__trackjs_state__}catch(t){return e}if(o.config.bindStack)try{throw Error()}catch(t){r=t.stack,n=v.isoNow()}for(i in e)v.hasOwn(e,i)&&(t[i]=e[i]);return t.prototype=e.prototype,t.__trackjs__=!0,e.__trackjs_state__=t},wrapEventTarget:function(t){var o=this;v.has(t,"addEventListener.call")&&v.has(t,"removeEventListener.call")&&(v.patch(t,"addEventListener",function(i){return function(t,e,n,r){try{v.has(e,"handleEvent")&&(e.handleEvent=o.wrap(e.handleEvent))}catch(t){}return i.call(this,t,o.wrap(e),n,r)}}),v.patch(t,"removeEventListener",function(i){return function(t,e,n,r){try{e=e&&(e.__trackjs_state__||e)}catch(t){}return i.call(this,t,e,n,r)}}))},wrapTimer:function(t){var o=this;v.patch(u,t,function(i){return function(t,e){var n=Array.prototype.slice.call(arguments),r=n[0];return v.isFunction(r)&&(n[0]=o.wrap(r)),v.has(i,"apply")?i.apply(this,n):i(n[0],n[1])}})}},(e=function(t){this.initCurrent(t)}).prototype={current:{},initOnly:{cookie:!0,enabled:!0,token:!0,callback:{enabled:!0},console:{enabled:!0},navigation:{enabled:!0},network:{enabled:!0,fetch:!0},visitor:{enabled:!0},window:{enabled:!0,promise:!0}},defaults:{application:"",cookie:!1,dedupe:!0,dependencies:!0,enabled:!0,errorURL:"https://capture.trackjs.com/capture",errorNoSSLURL:"http://capture.trackjs.com/capture",faultURL:"https://usage.trackjs.com/fault.gif",onError:function(){return!0},serialize:function(e){function n(t){var e="<"+t.tagName.toLowerCase();t=t.attributes||[];for(var n=0;n<t.length;n++)e+=" "+t[n].name+'="'+t[n].value+'"';return e+">"}if(""===e)return"Empty String";if(e===o)return"undefined";if(v.isString(e)||v.isNumber(e)||v.isBoolean(e)||v.isFunction(e))return""+e;if(v.isElement(e))return n(e);var r;try{r=JSON.stringify(e,function(t,e){return e===o?"undefined":v.isNumber(e)&&isNaN(e)?"NaN":v.isError(e)?{name:e.name,message:e.message,stack:e.stack}:v.isElement(e)?n(e):e})}catch(t){for(var i in r="",e)e.hasOwnProperty(i)&&(r+=',"'+i+'":"'+e[i]+'"');r=r?"{"+r.replace(",","")+"}":"Unserializable Object"}return r.replace(/"undefined"/g,"undefined").replace(/"NaN"/g,"NaN")},sessionId:"",token:"",userId:"",version:"",callback:{enabled:!0,bindStack:!1},console:{enabled:!0,display:!0,error:!0,warn:!1,watch:["log","debug","info","warn","error"]},navigation:{enabled:!0},network:{enabled:!0,error:!0,fetch:!0},visitor:{enabled:!0},usageURL:"https://usage.trackjs.com/usage.gif",window:{enabled:!0,promise:!0}},initCurrent:function(t){return this.validate(t,this.defaults,"config",{})?(this.current=v.defaultsDeep({},t,this.defaults),!0):(this.current=v.defaultsDeep({},this.defaults),console.log("init current config",this.current),!1)},setCurrent:function(t){return!!this.validate(t,this.defaults,"config",this.initOnly)&&(this.current=v.defaultsDeep({},t,this.current),!0)},validate:function(t,e,n,r){var i,o,s=!0;for(i in n=n||"",r=r||{},t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?(o=typeof e[i])!=typeof t[i]?(console.warn(n+"."+i+": property must be type "+o+"."),s=!1):"[object Array]"!==Object.prototype.toString.call(t[i])||this.validateArray(t[i],e[i],n+"."+i)?"[object Object]"===Object.prototype.toString.call(t[i])?s=this.validate(t[i],e[i],n+"."+i,r[i]):r.hasOwnProperty(i)&&(console.warn(n+"."+i+": property cannot be set after load."),s=!1):s=!1:(console.warn(n+"."+i+": property not supported."),s=!1));return s},validateArray:function(t,e,n){var r=!0;n=n||"";for(var i=0;i<t.length;i++)v.contains(e,t[i])||(console.warn(n+"["+i+"]: invalid value: "+t[i]+"."),r=!1);return r}},(r=function(t,e,n,r,i,o,s){this.util=t,this.log=e,this.onError=n,this.onFault=r,this.serialize=i,s.enabled&&(o.console=this.wrapConsoleObject(o.console,s))}).prototype={wrapConsoleObject:function(t,r){for(var i=(t=t||{}).log||function(){},o=this,e=0;e<r.watch.length;e++)!function(e){var n=t[e]||i;t[e]=function(){try{var t=Array.prototype.slice.call(arguments);if(o.log.add("c",{timestamp:o.util.isoNow(),severity:e,message:o.serialize(1===t.length?t[0]:t)}),r[e])if(v.isError(t[0])&&1===t.length)o.onError("console",t[0]);else try{throw Error(o.serialize(1===t.length?t[0]:t))}catch(t){o.onError("console",t)}r.display&&(o.util.hasFunction(n,"apply")?n.apply(this,t):n(t[0]))}catch(t){o.onFault(t)}}}(r.watch[e]);return t},report:function(){return this.log.all("c")}},(i=function(t,e,n,r,i){this.config=t,this.util=e,this.log=n,this.window=r,this.document=i,this.correlationId=this.token=null,this.initialize()}).prototype={initialize:function(){this.token=this.getCustomerToken(),this.correlationId=this.getCorrelationId()},getCustomerToken:function(){if(this.config.current.token)return this.config.current.token;var t=this.document.getElementsByTagName("script");return t[t.length-1].getAttribute("data-token")},getCorrelationId:function(){var e;if(!this.config.current.cookie)return this.util.uuid();try{(e=this.document.cookie.replace(/(?:(?:^|.*;\s*)TrackJS\s*\=\s*([^;]*).*$)|^.*$/,"$1"))||(e=this.util.uuid(),this.document.cookie="TrackJS="+e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/")}catch(t){e=this.util.uuid()}return e},report:function(){return{application:this.config.current.application,correlationId:this.correlationId,sessionId:this.config.current.sessionId,token:this.token,userId:this.config.current.userId,version:this.config.current.version}}},(s=function(t){this.config=t,this.loadedOn=(new Date).getTime(),this.originalUrl=v.getLocation(),this.referrer=n.referrer}).prototype={discoverDependencies:function(){var t,e,n={};for(t in u.jQuery&&u.jQuery.fn&&u.jQuery.fn.jquery&&(n.jQuery=u.jQuery.fn.jquery),u.jQuery&&u.jQuery.ui&&u.jQuery.ui.version&&(n.jQueryUI=u.jQuery.ui.version),u.angular&&u.angular.version&&u.angular.version.full&&(n.angular=u.angular.version.full),u)if("_trackJs"!==t&&"_trackJS"!==t&&"_trackjs"!==t&&"webkitStorageInfo"!==t&&"webkitIndexedDB"!==t&&"top"!==t&&"parent"!==t&&"frameElement"!==t)try{!u[t]||"string"==typeof(e=u[t].version||u[t].Version||u[t].VERSION)&&(n[t]=e)}catch(t){}return n},report:function(){return{age:(new Date).getTime()-this.loadedOn,dependencies:this.config.current.dependencies?this.discoverDependencies():{trackJs:"2.13.0"},originalUrl:this.originalUrl,referrer:this.referrer,userAgent:u.navigator.userAgent,viewportHeight:u.document.documentElement.clientHeight,viewportWidth:u.document.documentElement.clientWidth}}},(a=function(t){this.util=t,this.appender=[],this.maxLength=30}).prototype={all:function(t){for(var e,n=[],r=0;r<this.appender.length;r++)(e=this.appender[r])&&e.category===t&&n.push(e.value);return n},clear:function(){this.appender.length=0},truncate:function(){this.appender.length>this.maxLength&&(this.appender=this.appender.slice(Math.max(this.appender.length-this.maxLength,0)))},add:function(t,e){var n=this.util.uuid();return this.appender.push({key:n,category:t,value:e}),this.truncate(),n},get:function(t,e){for(var n,r=0;r<this.appender.length;r++)if((n=this.appender[r]).category===t&&n.key===e)return n.value;return!1}},(c=function(t,e){this.log=t,(this.options=e).enabled&&this.watch()}).prototype={isCompatible:function(t){return!v.has(t=t||u,"chrome.app.runtime")&&v.has(t,"addEventListener")&&v.has(t,"history.pushState")},record:function(t,e,n){this.log.add("h",{type:t,from:v.truncate(e,250),to:v.truncate(n,250),on:v.isoNow()})},report:function(){return this.log.all("h")},watch:function(){var i,o;this.isCompatible()&&(i=this,o=v.getLocationURL().relative,u.addEventListener("popstate",function(){var t=v.getLocationURL().relative;i.record("popState",o,t),o=t},!0),v.forEach(["pushState","replaceState"],function(r){v.patch(history,r,function(n){return function(){o=v.getLocationURL().relative;var t=n.apply(this,arguments),e=v.getLocationURL().relative;return i.record(r,o,e),o=e,t}})}))}},(h=function(t,e,n,r,i,o){this.util=t,this.log=e,this.onError=n,this.onFault=r,this.window=i,(this.options=o).enabled&&this.initialize(i)}).prototype={initialize:function(t){t.XMLHttpRequest&&this.util.hasFunction(t.XMLHttpRequest.prototype.open,"apply")&&this.watchNetworkObject(t.XMLHttpRequest),t.XDomainRequest&&this.util.hasFunction(t.XDomainRequest.prototype.open,"apply")&&this.watchNetworkObject(t.XDomainRequest),this.options.fetch&&v.isWrappableFunction(t.fetch)&&this.watchFetch()},watchFetch:function(){var s=this.log,a=this.options,c=this.onError;v.patch(u,"fetch",function(o){return function(t,e){var n;try{throw Error()}catch(t){n=t.stack}var r=t instanceof Request?t:new Request(t,e),i=o.apply(u,arguments);return i.__trackjs_state__=s.add("n",{type:"fetch",startedOn:v.isoNow(),method:r.method,url:v.truncate(r.url,2e3)}),i.then(function(t){var e=s.get("n",i.__trackjs_state__);return e&&(v.defaults(e,{completedOn:v.isoNow(),statusCode:t.status,statusText:t.statusText}),a.error&&400<=t.status&&((e=Error(e.statusCode+" "+e.statusText+": "+e.method+" "+e.url)).stack=n,c("ajax",e))),t}).catch(function(t){t=t||{};var e=s.get("n",i.__trackjs_state__);throw e&&(v.defaults(e,{completedOn:v.isoNow(),statusCode:0,statusText:t.toString()}),a.error&&(t.message=t.message+": "+e.method+" "+e.url,t.stack=t.stack||n,c("ajax",t))),t})}})},watchNetworkObject:function(t){var e=this,r=t.prototype.open,n=t.prototype.send;return t.prototype.open=function(t,e){var n=(e||"").toString();return n.indexOf("localhost:0")<0&&(this._trackJs={method:t,url:n}),r.apply(this,arguments)},t.prototype.send=function(){try{if(!this._trackJs)return n.apply(this,arguments);this._trackJs.logId=e.log.add("n",{type:"xhr",startedOn:e.util.isoNow(),method:this._trackJs.method,url:v.truncate(this._trackJs.url,2e3)}),e.listenForNetworkComplete(this)}catch(t){e.onFault(t)}return n.apply(this,arguments)},t},listenForNetworkComplete:function(n){var r=this;r.window.ProgressEvent&&n.addEventListener&&n.addEventListener("readystatechange",function(){4===n.readyState&&r.finalizeNetworkEvent(n)},!0),n.addEventListener?n.addEventListener("load",function(){r.finalizeNetworkEvent(n),r.checkNetworkFault(n)},!0):setTimeout(function(){try{var t=n.onload;n.onload=function(){r.finalizeNetworkEvent(n),r.checkNetworkFault(n),"function"==typeof t&&r.util.hasFunction(t,"apply")&&t.apply(n,arguments)};var e=n.onerror;n.onerror=function(){r.finalizeNetworkEvent(n),r.checkNetworkFault(n),"function"==typeof oldOnError&&e.apply(n,arguments)}}catch(t){r.onFault(t)}},0)},finalizeNetworkEvent:function(t){var e;!t._trackJs||(e=this.log.get("n",t._trackJs.logId))&&(e.completedOn=this.util.isoNow(),e.statusCode=1223==t.status?204:t.status,e.statusText=1223==t.status?"No Content":t.statusText)},checkNetworkFault:function(t){var e;this.options.error&&400<=t.status&&1223!=t.status&&(e=t._trackJs||{},this.onError("ajax",t.status+" "+t.statusText+": "+e.method+" "+e.url))},report:function(){return this.log.all("n")}},(l=function(t,e){this.util=t,this.config=e,this.disabled=!1,this.throttleStats={attemptCount:0,throttledCount:0,lastAttempt:(new Date).getTime()},u.JSON&&u.JSON.stringify||(this.disabled=!0)}).prototype={errorEndpoint:function(t){var e=this.config.current.errorURL;return(e=!this.util.testCrossdomainXhr()&&-1===u.location.protocol.indexOf("https")?this.config.current.errorNoSSLURL:e)+"?token="+t},usageEndpoint:function(t){return this.appendObjectAsQuery(t,this.config.current.usageURL)},trackerFaultEndpoint:function(t){return this.appendObjectAsQuery(t,this.config.current.faultURL)},appendObjectAsQuery:function(t,e){for(var n in e+="?",t)t.hasOwnProperty(n)&&(e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&");return e},getCORSRequest:function(t,e){var n;return this.util.testCrossdomainXhr()?((n=new u.XMLHttpRequest).open(t,e),n.setRequestHeader("Content-Type","text/plain")):void 0!==u.XDomainRequest?(n=new u.XDomainRequest).open(t,e):n=null,n},sendTrackerFault:function(t){this.throttle(t)||((new Image).src=this.trackerFaultEndpoint(t))},sendUsage:function(t){(new Image).src=this.usageEndpoint(t)},sendError:function(t,e){var n=this;if(!this.disabled&&!this.throttle(t))try{var r=this.getCORSRequest("POST",this.errorEndpoint(e));r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&(n.disabled=!0)},r._trackJs=o,r.send(u.JSON.stringify(t))}catch(t){throw this.disabled=!0,t}},throttle:function(t){var e=(new Date).getTime();if(this.throttleStats.attemptCount++,this.throttleStats.lastAttempt+1e3>=e){if(this.throttleStats.lastAttempt=e,10<this.throttleStats.attemptCount)return this.throttleStats.throttledCount++,!0}else t.throttled=this.throttleStats.throttledCount,this.throttleStats.attemptCount=0,this.throttleStats.lastAttempt=e,this.throttleStats.throttledCount=0;return!1}},v={addEventListenerSafe:function(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n)},afterDocumentLoad:function(t){var e=!1;"complete"===n.readyState?v.defer(t):(v.addEventListenerSafe(n,"readystatechange",function(){"complete"!==n.readyState||e||(v.defer(t),e=!0)}),setTimeout(function(){e||(v.defer(t),e=!0)},1e4))},bind:function(t,e){return function(){return t.apply(e,Array.prototype.slice.call(arguments))}},contains:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},defaults:function(t){return w(t,Array.prototype.slice.call(arguments,1),!1)},defaultsDeep:function(t){return w(t,Array.prototype.slice.call(arguments,1),!0)},defer:function(t,e){setTimeout(function(){t.apply(e)})},forEach:function(t,e,n){if(v.isArray(t)){if(t.forEach)return t.forEach(e,n);for(var r=0;r<t.length;)e.call(n,t[r],r,t),r++}},getLocation:function(){return u.location.toString().replace(/ /g,"%20")},getLocationURL:function(){return v.parseURL(v.getLocation())},has:function(t,e){try{for(var n=e.split("."),r=t,i=0;i<n.length;i++){if(!r[n[i]])return!1;r=r[n[i]]}return!0}catch(t){return!1}},hasFunction:function(t,e){try{return!!t[e]}catch(t){return!1}},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},isArray:function(t){return"[object Array]"===y(t)},isBoolean:function(t){return"boolean"==typeof t||v.isObject(t)&&"[object Boolean]"===y(t)},isBrowserIE:function(t){var e=(t=t||u.navigator.userAgent).match(/Trident\/([\d.]+)/);return e&&"7.0"===e[1]?11:!!(t=t.match(/MSIE ([\d.]+)/))&&parseInt(t[1],10)},isBrowserSupported:function(){var t=this.isBrowserIE();return!t||8<=t},isError:function(t){if(!v.isObject(t))return!1;var e=y(t);return"[object Error]"===e||"[object DOMException]"===e||v.isString(t.name)&&v.isString(t.message)},isElement:function(t){return v.isObject(t)&&1===t.nodeType},isFunction:function(t){return!(!t||"function"!=typeof t)},isNumber:function(t){return"number"==typeof t||v.isObject(t)&&"[object Number]"===y(t)},isObject:function(t){return!(!t||"object"!=typeof t)},isString:function(t){return"string"==typeof t||!v.isArray(t)&&v.isObject(t)&&"[object String]"===y(t)},isWrappableFunction:function(t){return this.isFunction(t)&&this.hasFunction(t,"apply")},isoNow:function(){var t=new Date;return t.toISOString?t.toISOString():t.getUTCFullYear()+"-"+this.pad(t.getUTCMonth()+1)+"-"+this.pad(t.getUTCDate())+"T"+this.pad(t.getUTCHours())+":"+this.pad(t.getUTCMinutes())+":"+this.pad(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},keys:function(t){if(!v.isObject(t))return[];var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},noop:function(){},pad:function(t){return t=1===(t=String(t)).length?"0"+t:t},parseURL:function(t){var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return e?((e={protocol:e[2],host:e[4],path:e[5],query:e[6],hash:e[8]}).origin=(e.protocol||"")+"://"+(e.host||""),e.relative=(e.path||"")+(e.query||"")+(e.hash||""),e.href=t,e):{}},patch:function(t,e,n){t[e]=n(t[e]||v.noop)},testCrossdomainXhr:function(){return"withCredentials"in new XMLHttpRequest},truncate:function(t,e){if(t.length<=e)return t;var n=t.length-e;return t.substr(0,e)+"...{"+n+"}"},tryGet:function(t,e){try{return t[e]}catch(t){}},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},wrapError:function(t){if(t.innerError)return t;var e=Error("TrackJS Caught: "+(t.message||t));return e.description="TrackJS Caught: "+t.description,e.file=t.file,e.line=t.line||t.lineNumber,e.column=t.column||t.columnNumber,e.stack=t.stack,e.innerError=t,e}},(p=function(t,e,n,r,i,o){this.util=t,this.log=e,this.onError=n,this.onFault=r,this.options=o,this.document=i,o.enabled&&this.initialize(i)}).prototype={initialize:function(t){var e=this.util.bind(this.onDocumentClicked,this),n=this.util.bind(this.onInputChanged,this);t.addEventListener?(t.addEventListener("click",e,!0),t.addEventListener("blur",n,!0)):t.attachEvent&&(t.attachEvent("onclick",e),t.attachEvent("onfocusout",n))},onDocumentClicked:function(t){try{var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isDescribedElement(e,"a")||this.isDescribedElement(e,"button")||this.isDescribedElement(e,"input",["button","submit"])?this.writeVisitorEvent(e,"click"):this.isDescribedElement(e,"input",["checkbox","radio"])&&this.writeVisitorEvent(e,"input",e.value,e.checked))}catch(t){this.onFault(t)}},onInputChanged:function(t){try{var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isDescribedElement(e,"textarea")?this.writeVisitorEvent(e,"input",e.value):this.isDescribedElement(e,"select")&&e.options&&e.options.length?this.onSelectInputChanged(e):this.isDescribedElement(e,"input")&&!this.isDescribedElement(e,"input",["button","submit","hidden","checkbox","radio"])&&this.writeVisitorEvent(e,"input",e.value))}catch(t){this.onFault(t)}},onSelectInputChanged:function(t){if(t.multiple)for(var e=0;e<t.options.length;e++)t.options[e].selected&&this.writeVisitorEvent(t,"input",t.options[e].value);else 0<=t.selectedIndex&&t.options[t.selectedIndex]&&this.writeVisitorEvent(t,"input",t.options[t.selectedIndex].value)},writeVisitorEvent:function(t,e,n,r){"password"===this.getElementType(t)&&(n=o),this.log.add("v",{timestamp:this.util.isoNow(),action:e,element:{tag:t.tagName.toLowerCase(),attributes:this.getElementAttributes(t),value:this.getMetaValue(n,r)}})},getElementFromEvent:function(t){return t.target||n.elementFromPoint(t.clientX,t.clientY)},isDescribedElement:function(t,e,n){if(t.tagName.toLowerCase()!==e.toLowerCase())return!1;if(!n)return!0;for(t=this.getElementType(t),e=0;e<n.length;e++)if(n[e]===t)return!0;return!1},getElementType:function(t){return(t.getAttribute("type")||"").toLowerCase()},getElementAttributes:function(t){for(var e={},n=Math.min(t.attributes.length,10),r=0;r<n;r++){var i=t.attributes[r];v.contains(["data-value","value"],i.name.toLowerCase())||(e[i.name]=v.truncate(i.value,100))}return e},getMetaValue:function(t,e){return t===o?o:{length:t.length,pattern:this.matchInputPattern(t),checked:e}},matchInputPattern:function(t){return""===t?"empty":/^[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(t)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(t)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(t)?"date":/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(t)?"usphone":/^\s*$/.test(t)?"whitespace":/^\d*$/.test(t)?"numeric":/^[a-zA-Z]*$/.test(t)?"alpha":/^[a-zA-Z0-9]*$/.test(t)?"alphanumeric":"characters"},report:function(){return this.log.all("v")}},(d=function(t,e,n,r,i){this.onError=t,this.onFault=e,this.serialize=n,i.enabled&&this.watchWindowErrors(r),i.promise&&this.watchPromiseErrors(r)}).prototype={watchPromiseErrors:function(t){var n=this;t.addEventListener?t.addEventListener("unhandledrejection",function(e){if((e=(e=e||{}).detail?v.tryGet(e.detail,"reason"):v.tryGet(e,"reason"))!==o){if(!v.isError(e))try{throw Error(n.serialize(e))}catch(t){e=t}n.onError("promise",e)}}):t.onunhandledrejection=function(t){n.onError("promise",t)}},watchWindowErrors:function(t){var s=this;v.patch(t,"onerror",function(o){return function(t,e,n,r,i){try{(i=i||{}).message=i.message||s.serialize(t),i.name=i.name||"Error",i.line=i.line||parseInt(n,10)||null,i.column=i.column||parseInt(r,10)||null,"[object Event]"!==Object.prototype.toString.call(t)||e?i.file=i.file||s.serialize(e):i.file=(t.target||{}).src,s.onError("window",i)}catch(t){s.onFault(t)}o.apply(this,arguments)}})}},(f=function(t,e,n,r,i,o,s,a,c,u,h,l,p,d,f,g){try{var m;this.window=d,this.document=f,this.util=v,this.onError=this.util.bind(this.onError,this),this.onFault=this.util.bind(this.onFault,this),this.serialize=this.util.bind(this.serialize,this),this.config=new r(t),this.transmitter=new h(this.util,this.config),this.log=new a(this.util),this.api=new e(this.config,this.util,this.onError,this.serialize),this.metadata=new c(this.serialize),this.environment=new s(this.config),this.customer=new o(this.config,this.util,this.log,this.window,this.document),this.customer.token&&(this.apiConsoleWatcher=new i(this.util,this.log,this.onError,this.onFault,this.serialize,this.api,this.config.defaults.console),this.config.current.enabled&&(this.windowConsoleWatcher=new i(this.util,this.log,this.onError,this.onFault,this.serialize,this.window,this.config.current.console),this.util.isBrowserSupported()))&&(this.callbackWatcher=new n(this.config.current.callback,this.onError,this.onFault),this.visitorWatcher=new l(this.util,this.log,this.onError,this.onFault,this.document,this.config.current.visitor),this.navigationWatcher=new g(this.log,this.config.current.navigation),this.networkWatcher=new u(this.util,this.log,this.onError,this.onFault,this.window,this.config.current.network),this.windowWatcher=new p(this.onError,this.onFault,this.serialize,this.window,this.config.current.window),m=this,v.afterDocumentLoad(function(){m.transmitter.sendUsage({token:m.customer.token,correlationId:m.customer.correlationId,application:m.config.current.application,x:m.util.uuid()})}))}catch(t){this.onFault(t)}}).prototype={reveal:function(){return this.customer.token?(this.api.addMetadata=this.metadata.addMetadata,this.api.removeMetadata=this.metadata.removeMetadata,this.api):(this.config.current.enabled&&this.window.console&&this.window.console.warn&&this.window.console.warn("TrackJS could not find a token"),o)},onError:(m=!1,function(t,e,n){if(v.isBrowserSupported()&&this.config.current.enabled)try{if(n=n||{bindStack:null,bindTime:null,force:!1},-1===(e=!e||!v.isError(e)?{name:"Error",message:this.serialize(e,n.force)}:e).message.indexOf("TrackJS Caught"))if(m&&-1!==e.message.indexOf("Script error"))m=!1;else{var r=v.defaultsDeep({},{bindStack:n.bindStack,bindTime:n.bindTime,column:e.column||e.columnNumber,console:this.windowConsoleWatcher.report(),customer:this.customer.report(),entry:t,environment:this.environment.report(),file:e.file||e.fileName,line:e.line||e.lineNumber,message:e.message,metadata:this.metadata.report(),nav:this.navigationWatcher.report(),network:this.networkWatcher.report(),url:(u.location||"").toString(),stack:e.stack,timestamp:this.util.isoNow(),visitor:this.visitorWatcher.report(),version:"2.13.0"});if(!n.force)try{if(!this.config.current.onError(r,e))return}catch(t){r.console.push({timestamp:this.util.isoNow(),severity:"error",message:t.message});var i=this;setTimeout(function(){i.onError("catch",t,{force:!0})},0)}if(this.config.current.dedupe){var o=(r.message+r.stack).substr(0,1e4);if(o===g)return;g=o}!function(){for(var t=0;function(){var e=0;return v.forEach(r.console,function(t){e+=(t.message||"").length}),8e4<=e}()&&t<r.console.length;)r.console[t].message=v.truncate(r.console[t].message,1e3),t++}(),this.log.clear(),setTimeout(function(){m=!1}),m=!0,this.transmitter.sendError(r,this.customer.token)}}catch(t){this.onFault(t)}}),onFault:function(t){var e=this.transmitter||new l;t={token:this.customer.token,file:(t=t||{}).file||t.fileName,msg:t.message||"unknown",stack:(t.stack||"unknown").substr(0,1e3),url:this.window.location,v:"2.13.0",h:"cf5eb1dd03481f71da0c2bb4dc6e302cb0e969d1",x:this.util.uuid()},e.sendTrackerFault(t)},serialize:function(t,e){if(this.config.current.serialize&&!e)try{return this.config.current.serialize(t)}catch(t){this.onError("catch",t,{force:!0})}return this.config.defaults.serialize(t)}},t=new f(u._trackJs||u._trackJS||u._trackjs||{},function(e,r,i,n){return{attempt:function(t,e){try{var n=Array.prototype.slice.call(arguments,2);return t.apply(e||this,n)}catch(t){throw i("catch",t),r.wrapError(t)}},configure:function(t){return e.setCurrent(t)},track:function(e){var t=n(e);if(!(e=e||{}).stack)try{throw Error(t)}catch(t){e=t}i("direct",e)},watch:function(e,n){return function(){try{var t=Array.prototype.slice.call(arguments,0);return e.apply(n||this,t)}catch(t){throw i("catch",t),r.wrapError(t)}}},watchAll:function(t){var n,e=Array.prototype.slice.call(arguments,1);for(n in t)"function"==typeof t[n]&&(r.contains(e,n)||function(){var e=t[n];t[n]=function(){try{var t=Array.prototype.slice.call(arguments,0);return e.apply(this,t)}catch(t){throw i("catch",t),r.wrapError(t)}}}());return t},hash:"cf5eb1dd03481f71da0c2bb4dc6e302cb0e969d1",version:"2.13.0"}},t,e,r,i,s,a,function(n){var r={};return{addMetadata:function(t,e){r[t]=e},removeMetadata:function(t){delete r[t]},report:function(){var t,e=[];for(t in r)r.hasOwnProperty(t)&&e.push({key:t,value:n(r[t])});return e},store:r}},h,l,p,d,u,n,c),u.trackJs=t.reveal())}(window,document);
