define("OK/banners/BannerLoader",["OK/logger"],(function(e){"use strict";var n="onAdsSuccess",t="onNoAds",r="onScriptError",a={};function o(e){p(n,e)}function i(e){p(t,e)}function s(e){p(r,e)}function u(e,n){return!(!e||"function"!=typeof n)&&(a.hasOwnProperty(e)||(a[e]=[]),a[e].push(n),!0)}function c(e,n){if(e&&a.hasOwnProperty(e)){var t=a[e],r=t.indexOf(n);r>=0&&t.splice(r,1)}}function l(e,n){return function(t){t&&t.slot===e&&n.call(null,t)}}function p(n,t){if(function(n,t){e.success("new-banners",n,t)}(n,t&&t.slot?t.slot:""),a.hasOwnProperty(n))for(var r=a[n],o=0,i=r.length;o<i;o++){var s=r[o];"function"==typeof s&&s(t)}}return{requestBanner:function(n){window.MRGtag||(window.MRGtag=[],window.MRGtag.push({preventAutoLoad:!0})),require(["mrg/ads"],(function(e){window.MRGtag.push({element:n,onAdsSuccess:o,onNoAds:i,onScriptError:s})}),(function(n){!function(n){e.success("new-banners",n)}("adsLoadingFailed")}))},subscribeToEvents:function(e,n){var t=[];for(var r in n)if(n.hasOwnProperty(r)){var a=l(e,n[r]);u(r,a)&&t.push({event:r,listener:a})}return{remove:function(){for(;t.length>0;){var e=t.pop();c(e.event,e.listener)}}}},publishEvent:p}})),define("OK/banners/BannerController",["OK/banners/BannerLoader","OK/banners/StickyBannerContainer","OK/ViewportWidthObserver","OK/utils/dom","OK/logger"],(function(e,n,t,r,a){"use strict";var o="onHideBanner",i="onRefreshBanner",s="data-ad-slot",u="data-ad-query",c="data-site-zone",l="data-pass-height",p="data-pass-width",h="data-right-visibility-min-width",f="data-sticky-banner",d="data-refresh-timeout",g="data-json-params",b="h",v="w",B="_SITEID",y="t",w="a",_="g",m="lang",J="u",E="v",O="la",N="test_id",A="_SITEZONE",C="l",P="group",T="ism",R="grname",S="grdesc",I="grpic",D="act",K="_STRING",L={i:"user_id",n:"user_name",r:"days_to_birth",d:"days_birth",m:"month_birth"},H="banner-layout-container",k="__ready",M="__hidden",x=[],q=[],U=[];function V(e){return e.getAttribute(s)}function j(e){if(e){var n=U.indexOf(e);n>=0&&U.splice(n,1),clearTimeout(e)}}function W(e){e&&Y(Q(e.el),!0)}function G(e){e&&Y(Q(e.el),!1)}function Y(e,n){e&&(e.classList.toggle(k,n),e.classList.toggle(M,!n))}function F(e){var t=z(e);t&&n.activate(t)}function Z(e){var t=z(e);t&&n.deactivate(t)}function z(e){return e&&e.el?r.parent(e.el,"hookBlock"):null}function Q(e){return e?r.parent(e,H,5,!0):null}function X(e,n){var t=parseInt(e.getAttribute(n),10);return isNaN(t)&&(t=0),t}function $(n,t){!function(e){Y(Q(e),!1)}(n),function(e,n){var t={};t[B]=163;var r=te(e);r&&(t[A]=r);var a=function(e){if(e.getAttribute(g))return JSON.parse(e.getAttribute(g))||{};return{}}(e);(function(e,n){var t=ne("hook_Cfg_CurrentUser"),r=t.bannerTargeting||{};r.t?e[y]=r.t:r.a&&(e[w]=r.a,e[_]=r.g);t.lang&&(e[m]=t.lang);n.wu&&r.u&&(e[J]=r.u);if(n.wv&&r.v){var a=function(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(n&&(n+="&"),n+=L[t]+"="+e[t]);return n}(r.v);a&&(e[E]=a)}})(t,a),function(e,n){var t=ne("hook_Cfg_BannerConfig");n.la&&t.lastApps&&(e[O]=t.lastApps);t.expr&&(e[N]=t.expr)}(t,a),function(e,n){var t=ne("hook_Cfg_BanData");n.sz?e[A]=n.sz:n.wsz&&t.sitezone&&(e[A]=t.sitezone);t.groupId&&(e[P]=t.groupId);t.isaMember&&(e[T]=t.isaMember)}(t,a),function(e,n){n.cow&&(e[C]="1");n.grname&&(e[R]=n.grname);n.grdesc&&(e[S]=n.grdesc);n.grpic&&(e[I]=n.grpic);n.act&&(e[D]="1");n._STRING&&(e[K]=n._STRING)}(t,a),function(e){return"true"===e.getAttribute(l)}(e)&&(t[b]=document.documentElement.clientHeight);o=e,"true"===o.getAttribute(p)&&(t[v]=function(e){var n=window.getComputedStyle(e,null),t=parseInt(n.paddingLeft,10),r=parseInt(n.paddingRight,10);return e.clientWidth-t-r}(e));var o;var i=function(e){var n=e.getAttribute(u),t={};return n.replace(/([^=]*)=([^&]*)&*/g,(function(e,n,r){t[n]=decodeURIComponent(r)})),t}(n);!function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}(i,t);var c=[];for(var h in i)i.hasOwnProperty(h)&&c.push(h+"="+encodeURIComponent(i[h]));var f=a.b_count;if(f&&f>0){var d=V(n),H=ee(d,0);n.setAttribute(s,H);for(var k=1;k<f;k++)c.push("q="+ee(d,k))}n.setAttribute(u,c.join("&"))}(n,t),e.requestBanner(t)}function ee(e,n){return encodeURIComponent(e+"."+n+"?n="+n)}function ne(e){var n=document.getElementById(e);return n&&OK.util.parseJSON(n.innerHTML)||{}}function te(e){return e.getAttribute(c)}function re(e){for(var n=0;n<e.length;n++){var t=e[n];t&&"function"==typeof t.remove&&t.remove()}}return{activate:function(n){var r=function(e){var n=Array.prototype.slice.call(e.getElementsByTagName("ins"));if(0===n.length)return null;return n[0]}(n);if(r){var u=V(r),c=e.subscribeToEvents(u,{onAdsSuccess:W,onHideBanner:G});q.push(c),"true"===n.getAttribute(f)&&(c=e.subscribeToEvents(u,{onAdsSuccess:F,onHideBanner:Z}),q.push(c)),(c=function(n,t){var r,a=function(e){return X(e,d)}(n);if(a<=0)return null;var o=function(o){r=function(n,t,r,a){j(r);var o=setTimeout((function(){var r=V(t);e.publishEvent(i,{el:t,slot:r}),$(n,t)}),a);return U.push(o),o}(n,t,r,a)},s=V(t);return e.subscribeToEvents(s,{onAdsSuccess:o,onNoAds:o,onScriptError:o,onHideBanner:function(e){j(r)}})}(n,r))&&q.push(c);var l=function(e){return X(e,h)}(n);l>0?(c=t.onToggle(l,(function(t){t?$(n,r):function(n){n.innerHTML="";var t=n.getAttribute(s);e.publishEvent(o,{el:n,slot:t})}(r)})),x.push(c),function(e,n,t){var r=e<=window.innerWidth,o=n;t&&(o+="."+t);!function(e,n){a.success("new-banners",e,n)}(r?"activate.binv":"activate.boutv",o)}(l,u,te(n))):$(n,r)}},deactivate:function(){re(x),re(q),function(e){for(var n=0;n<e.length;n++){var t=e[n];t&&clearTimeout(t)}}(U),x=[],q=[],U=[]}}})),define("OK/banners/bannerNew/hooks/BannerNavigationDataProviderHookJs",["require","exports","OK/JsonCustomHook","OK/BanDataCfgJs"],(function(e,n,t,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){function n(n,t){e.call(this,"json_abp",t)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.applyContent=function(e){r.BanDataCfgJs.getInstance().setData(e)},n}(t.JsonCustomHook);n.default=a})),define("OK/banners/bannerNew/config/ApplicationBannerCfgJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ApplicationBannerCfgJs=void 0;var t=function(e){this.discussionsTopSlot=+e.discussionsTop};t.prototype.getDiscussionsTopSlot=function(){return this.discussionsTopSlot},n.ApplicationBannerCfgJs=t})),define("OK/banners/bannerNew/config/BannerMultiloadCfgJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerMultiloadCfgJs=void 0;var t={maxLatency:"500",heartbeatDelay:"150",concurrency:"9999",url:"https://ad.mail.ru/adq/"};n.BannerMultiloadCfgJs=function(e){e=Object.assign(Object.assign({},t),e),this.maxLatency=+e.maxLatency,this.heartbeatDelay=+e.heartbeatDelay,this.concurrency=+e.concurrency,this.url=e.url}})),define("OK/banners/bannerNew/config/BannerRefreshPolicyCfgJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerRefreshPolicyCfgJs=void 0;var t=function(e){this.data=e};t.prototype.getTimeout=function(e){var n="timeout."+e,t=this.data.hasOwnProperty(n)?this.data[n]:null;return null!==t?t:this.data["timeout.default"]},t.prototype.getTransition=function(e){var n="transition."+e,t=this.data.hasOwnProperty(n)?this.data[n]:null;return null!==t?t:this.data["transition.default"]||!1},n.BannerRefreshPolicyCfgJs=t})),define("OK/banners/bannerNew/config/BannerCfgJs",["require","exports","OK/GwtConfig","OK/banners/bannerNew/config/ApplicationBannerCfgJs","OK/banners/bannerNew/config/BannerMultiloadCfgJs","OK/banners/bannerNew/config/BannerRefreshPolicyCfgJs"],(function(e,n,t,r,a,o){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.BannerCfgJs=void 0;var s=function(e){function n(){e.call(this,"BannerConfig")}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setData=function(n){e.prototype.setData.call(this,n),this.lastApplications=this.data.lastApps,this.applicationBannerCfg=new r.ApplicationBannerCfgJs(this.data.applicationBannerSlots||{}),this.multiLoad=new a.BannerMultiloadCfgJs(this.data.adm||{}),this.timeoutCfg=new o.BannerRefreshPolicyCfgJs(this.data.timeouts),this.expr=this.data.expr||null,this.vhaBannerDebug=this.data.vha_debug||!1,this.abpWhiteListEnabled=this.data.abp_wl||!1,this.discussionsRefreshEnabled=this.data.dre||!1},n.prototype.getApplicationBannerCfg=function(){return this.applicationBannerCfg},n.getInstance=function(){return i||(i=new n),i},n.getLastApplications=function(){try{return n.getInstance().lastApplications}catch(e){return null}},n.getMultiLoad=function(){try{return n.getInstance().multiLoad}catch(e){return new a.BannerMultiloadCfgJs({})}},n.getRefreshPolicyCfg=function(){try{return n.getInstance().timeoutCfg}catch(e){return new o.BannerRefreshPolicyCfgJs({})}},n.getCurrentExperiment=function(){try{return n.getInstance().expr}catch(e){return null}},n}(t.GwtConfig);n.BannerCfgJs=s})),define("OK/banners/bannerNew/utils/BannerCommon",["require","exports","OK/utils/environment","OK/cookie"],(function(e,n,t,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getEffectiveViewportHeight=n.createLog=n.log=void 0;var a=function(){},o=t.isDebug&&"true"===r.readCookie("banners-debug");n.log=function(){for(var e=arguments.length,n=Array(e);e--;)n[e]=arguments[e];for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(o){var a=["[native banner]"].concat(t,n);console.log.apply(console,a)}},n.createLog=function(e){return o?function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];var r=["[native banner / "+e+"]"].concat(n);console.log.apply(console,r)}:a},n.getEffectiveViewportHeight=function(){var e=document.getElementById("topPanel"),n=null!==e?e.offsetHeight:0;return window.innerHeight-n}})),define("OK/banners/bannerNew/utils/BufferedCommandJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BufferedCommandJs=void 0;var t=function(e,n,t){var a=this;this.bufferingPeriod=e,this.heartbeatPeriod=n,this.bufferingTimer=new r((function(){a.heartbeatTimer.cancel(),a.doExecute()})),this.heartbeatTimer=new r((function(){a.bufferingTimer.cancel(),a.doExecute()})),this.execute=t};t.prototype.doExecute=function(){this.execute(),this.running=!1},t.prototype.destroy=function(){this.running&&(null!==this.bufferingTimer&&this.bufferingTimer.cancel(),null!==this.heartbeatTimer&&this.heartbeatTimer.cancel())},t.prototype.force=function(){this.bufferingTimer.cancel(),this.heartbeatTimer.cancel(),this.doExecute()},t.prototype.invoke=function(){this.running?this.heartbeatTimer.cancel():(this.running=!0,this.bufferingTimer.schedule(this.bufferingPeriod())),this.heartbeatTimer.schedule(this.heartbeatPeriod())},n.BufferedCommandJs=t;var r=function(e){this.callback=e};r.prototype.schedule=function(e){this.cancel(),this.timer=setTimeout(this.callback,e)},r.prototype.cancel=function(){this.timer&&(clearTimeout(this.timer),this.timer=0)}})),define("OK/banners/bannerNew/transport/BannerTransportJs",["require","exports","OK/banners/bannerNew/config/BannerCfgJs","OK/banners/bannerNew/utils/BannerCommon","OK/banners/bannerNew/utils/BufferedCommandJs","OK/logger"],(function(e,n,t,r,a,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerTransportJs=void 0;var i=r.createLog("BannerTransportJs"),s="name",u="html",c="rb_tadq_"+Date.now(),l=1,p={},h={},f=0,d=[],g=0,b={},v=null,B=function(){this.requests=new N,this.flushCommand=new a.BufferedCommandJs((function(){return t.BannerCfgJs.getMultiLoad().maxLatency}),(function(){return t.BannerCfgJs.getMultiLoad().heartbeatDelay}),this.flush.bind(this))};function y(e){return"blwrapper_"+e}function w(){return Object.getOwnPropertyNames(h).length<t.BannerCfgJs.getMultiLoad().concurrency}function _(e,n){i("sendJSONPRequest",e,n);var t=g+++"";n.forEach((function(e){b[e]=t})),function(e,n){var t=document.createElement("script");t.type="text/javascript",t.src=n+"&nn="+f,t.async=!0,t.id=y(e),t.onerror=function(n){m(e)},document.head.appendChild(t),h[e]=Date.now()}(t,e)}function m(e){for(var n in b)b.hasOwnProperty(n)&&b[n]==e&&J(n,"")}function J(e,n){i("handleResponse",{id:e,response:n});try{var t=p[e];t&&t.handleResponse(n)}catch(e){o.errorEx(e,"BannerTransport","callback")}try{var r=b[e];delete b[e],r&&function(e){try{delete h[e];var n=y(e),t=document.getElementById(n);if(null!==t&&t.parentNode&&(t.parentNode.removeChild(t),f++),w()&&d.length){var r=d.shift();_(r.url,r.reqIds)}}catch(e){throw o.errorEx(e,"BannerTransport","cleanup_"),e}}(r)}catch(e){o.errorEx(e,"BannerTransport","after_callback")}}B.prototype.flush=function(){var e=t.BannerCfgJs.getMultiLoad().url,n=[],r=this.requests.requests,a=Object.getOwnPropertyNames(r),s=[];if(a.length){a.forEach((function(e){var t=r[e];s.push(t);var a=e+"?n="+t;n.push("q="+encodeURIComponent(a)),o.success("ad",OK.getCurrentDesktopModelId(),e)})),i("flush, q",n),this.appendCookielessUserSyncParameters();var u=e+"?callback="+c+"&_SITEID=163&"+n.join("&")+"&"+this.encodeParams(this.requests.params);this.requests.clear(),i("flush",u,s),this.addJSONPRequest(u,s)}},B.prototype.appendCookielessUserSyncParameters=function(){var e=this;[localStorage,sessionStorage].forEach((function(n){if(n)try{var t=n.getItem("rb_sync_id");if(t){var r=JSON.parse(t);for(var a in r)r.hasOwnProperty(a)&&(e.requests.params[a]=r[a])}}catch(e){i("can not get rb_sync_id from "+n,e)}}))},B.prototype.sendJSONP=function(e,n,t){this.requests.addRequest(e,n,t)||(this.flushCommand.force(),this.requests.addRequest(e,n,t)),this.flushCommand.invoke()},B.prototype.sendRequest=function(e,n,t){var r="nbnr"+l++;p[r]=new E(r,t),this.sendJSONP(r,e,n)},B.prototype.addJSONPRequest=function(e,n){w()?(i("addJSONPRequest now",e,n),_(e,n)):(i("addJSONPRequest queue",e,n),this.queueJSONPRequest(e,n))},B.prototype.queueJSONPRequest=function(e,n){d.push(new O(e,n))},B.prototype.sendClick=function(e,n){var t=this;setTimeout((function(){(new Image).src=e+"?"+t.encodeParams(n)}),100)},B.prototype.encodeParams=function(e){var n=Object.getOwnPropertyNames(e);if(n.length){var t=[];return n.forEach((function(n){var r=e[n];null!=r&&t.push(n+"="+encodeURIComponent(r))})),t.join("&")}return""},B.appendParam=function(e,n,t){if(null!==t)switch(typeof t){case"string":e[n]=t;break;case"number":e[n]=t+""}return e},B.getInstance=function(){return null===v&&(v=new B),v},n.BannerTransportJs=B,window[c]=function(e){if(i("handleAdq",e),null!==e)try{var n=e.length;if(0===n)return void o.errorEx(new Error("ADQ empty array"),"BannerTransport","adq-array");for(var t=0;t<n;t++){var r=e[t];if(null!==r&&"object"==typeof r){var a=r[s];if(!a){o.errorEx(new Error("ADQ invalid 'name'"),"BannerTransport","adq-name");continue}var c=r[u];if(void 0===c){o.errorEx(new Error("ADQ invalid 'html'"),"BannerTransport","adq-html");continue}J(a,c)}else o.errorEx(new Error("ADQ invalid item"),"BannerTransport","adq-item")}}catch(e){o.errorEx(new Error("ADQ unexpected"),"BannerTransport","adq-unknown")}else o.errorEx(new Error("ADQ null response"),"BannerTransport","adq-callback")},setInterval((function(){try{var e=[];Object.getOwnPropertyNames(h).forEach((function(n){Date.now()-h[n]>5e3&&e.push(n)})),e.forEach((function(e){m(e)}))}catch(e){o.errorEx(e,"BannerTransport","cleanup")}}),5e3);var E=function(e,n){this.id=e,this.request=n,this.request.setCancellationListener(this)};E.prototype.handleResponse=function(e){this.request.handleResponse(e)},E.prototype.onCancel=function(){delete p[this.id]};var O=function(e,n){this.url=e,this.reqIds=n},N=function(){this.requests={},this.params={}};N.prototype.clear=function(){this.requests={},this.params={}},N.prototype.addRequest=function(e,n,t){var r=this;if(this.requests.hasOwnProperty(n))return!1;var a=Object.getOwnPropertyNames(this.params);a=a.filter((function(e){return t.hasOwnProperty(e)}));for(var o=0;o<a.length;o++){var i=a[o];if(t[i]!==this.params[i])return!1}return this.requests[n]=e,Object.getOwnPropertyNames(t).forEach((function(e){r.params[e]=t[e]})),!0}})),define("OK/banners/bannerNew/utils/BannerConstantJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerConstantJs=void 0;var t=function(){};n.BannerConstantJs=t,t.TARGETING_PARAMETER="t",t.RECOMMENDED_TARGETING_PARAMETER="tr",t.USER_AGE="a",t.USER_GENDER="g",t.PERSONAL_DATA_KEY="v",t.UNIQUE_ID_KEY="u",t.POSITION_KEY="p",t.IN_LAYER="layer",t.WITH_LAST_APPS="la",t.PERSONAL_DATA_ID_KEY="i",t.PERSONAL_DATA_NAME_KEY="n",t.PERSONAL_DATA_BIRTH_DAY_KEY="d",t.PERSONAL_DATA_BIRTH_MONTH_KEY="m",t.PERSONAL_DATA_DAYS_TO_BIRTH_KEY="r",t.PERSONAL_DATA_IS_COMPANYOWNER="cow",t.WITH_UNIQUE_ID="wu",t.WITH_PERSONAL_DATA="wv",t.VIEWPORT_HEIGHT="h",t.EXPR="test_id",t.EXPR_4246="rf4246",t.EXPR_DELAY="rfd",t.VISIBLE="visible",t.SITEZONE_PARAM="_SITEZONE",t.WITH_SITE_ZONE_BANNER_PARAM="wsz",t.SITE_ZONE_BANNER_PARAM="sz",t.SITENAME="sitename",t.GROUP_ID_PARAM="group",t.GROUP_NAME_PARAM="grname",t.GROUP_DESCRIPTION_PARAM="grdesc",t.GROUP_AVATAR_URL_PARAM="grpic",t.IS_GROUP_ACTIVE_MEMBER_PARAM="ism",t.LANGUAGE="lang",t.APPS_BANNERS_WITH_CUSTOM_TITLE="act",t.APPS_BANNERS_APP_SHORT_NAME="_STRING"})),define("OK/banners/bannerNew/banners/BannerProxyJs",["require","exports","OK/banners/bannerNew/utils/BannerCommon","OK/logger"],(function(e,n,t,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerProxyJs=void 0;var a=t.createLog("BannerProxyJs"),o=function(e){this.delegate=null,this.ops=null,this.options=e};o.prototype.init=function(e){if(null===this.ops){this.ops=[],this.ops.push(e?0:1);try{this.delegate=this.options.createDelegate(),a("delegate",this.delegate)}catch(e){return a("error",e),void r.errorEx(e,"BannerProxy","delegate_init_"+this.options.key())}for(var n=0;n<this.ops.length;n++){var t=this.ops[n];if(a("op",t),null===this.delegate)return;try{switch(t){case 0:this.delegate.init(!0);break;case 1:this.delegate.init(!1);break;case 2:this.delegate.show();break;case 3:this.delegate.hide();break;case 4:this.delegate.destroy()}}catch(e){return a("error",e),void r.errorEx(e,"BannerProxy","delegate_replay_"+t)}}}},o.prototype.show=function(){null!==this.delegate?this.delegate.show():this.ops.push(2)},o.prototype.hide=function(){null!==this.delegate?this.delegate.hide():this.ops.push(3)},o.prototype.destroy=function(){null!==this.delegate?(this.delegate.destroy(),this.delegate=null):this.ops.push(4)},n.BannerProxyJs=o})),define("OK/banners/bannerNew/data/BannerDataNull",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerDataNull=void 0;var t=function(){};n.BannerDataNull=t,t.NULL=new t})),define("OK/banners/bannerNew/data/BannerDataText",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerDataText=void 0;n.BannerDataText=function(e){this.text=e}})),define("OK/banners/bannerNew/data/BannerDataJson",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerDataJson=void 0;var t=function e(n){this.height=e.getStringNotNull(n,e.INTERNAL_HEIGHT_KEY),this.width=e.getStringNotNull(n,e.INTERNAL_WIDTH_KEY),this.clickUrl=e.getStringNotNull(n,e.INTERNAL_PIXEL_URL_KEY),this.targetUrl=e.getTargetUrl(n)};t.getStringNotNull=function(e,n){return e[n]||""},t.getTargetUrl=function(e){var n=t.getStringNotNull(e,t.INTERNAL_URL_KEY);return(n=n||t.getStringNotNull(e,t.INTERNAL_URL_1_KEY)).replace(/^https?:\/\/[^\/]+/,"")},n.BannerDataJson=t,t.INTERNAL_IMG_URL_KEY="img_file",t.INTERNAL_PIXEL_URL_KEY="click_url",t.INTERNAL_URL_KEY="url",t.INTERNAL_URL_1_KEY="url1",t.INTERNAL_HEIGHT_KEY="height",t.INTERNAL_WIDTH_KEY="width",t.INTERNAL_TITLE_KEY="title"})),define("OK/banners/bannerNew/data/BannerDataImage",["require","exports","OK/banners/bannerNew/data/BannerDataJson"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerDataImage=void 0;var r=function(e){function n(n){e.call(this,n);var r=(n.img_file||"").trim();this.url=r||null,this.title=t.BannerDataJson.getStringNotNull(n,t.BannerDataJson.INTERNAL_TITLE_KEY),this.impressionUrls=n.impression_urls}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n}(t.BannerDataJson);n.BannerDataImage=r})),define("OK/banners/bannerNew/BannerModelJs",["require","exports","OK/banners/bannerNew/utils/BannerConstantJs","OK/banners/bannerNew/transport/BannerTransportJs","OK/banners/bannerNew/data/BannerDataNull","OK/banners/bannerNew/data/BannerDataText","OK/banners/bannerNew/data/BannerDataJson","OK/CurrentUserCfg","OK/banners/bannerNew/data/BannerDataImage","OK/utils/utils"],(function(e,n,t,r,a,o,i,s,u,c){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RequestJs=n.BannerModelJs=void 0;var l=function(e,n,t){this.loader=t,this.slot=e,this.params=n};l.prototype.request=function(e){var n=new p(e,this.slot);return this.process(n),n},l.prototype.click=function(e){var n={r:Date.now()+""},a=s.CurrentUserCfg.getInstance().getBannerParameters()[t.BannerConstantJs.TARGETING_PARAMETER];a&&r.BannerTransportJs.appendParam(n,t.BannerConstantJs.TARGETING_PARAMETER,a),this.loader.sendClick(e,n)},l.prototype.process=function(e){null!==this.slot.getValue()?this.sendReq(e):e.handleResponse(null)},l.prototype.sendReq=function(e){this.loader.sendRequest(this.slot.getValue(),this.params.asJSON(),e)},n.BannerModelJs=l;var p=function(e,n){this.ready=e,this.slot=n};p.prototype.getResponse=function(){return this.response},p.prototype.cancel=function(){null!==this.cancellationListener&&this.cancellationListener.onCancel()},p.prototype.handleResponse=function(e){if(e){var n=this.tryParseJSON(e);null===n?this.response=new o.BannerDataText(e):n.hasOwnProperty(i.BannerDataJson.INTERNAL_IMG_URL_KEY)?this.response=new u.BannerDataImage(n):this.response=a.BannerDataNull.NULL}else this.response=a.BannerDataNull.NULL;this.ready.handleResponse(this.response)},p.prototype.tryParseJSON=function(e){e=e.trim();try{return c.parseJson(e)}catch(e){return null}},p.prototype.setCancellationListener=function(e){this.cancellationListener=e},n.RequestJs=p})),define("OK/banners/bannerNew/config/BannerParamsJs",["require","exports","OK/banners/bannerNew/utils/BannerConstantJs","OK/banners/bannerNew/transport/BannerTransportJs","OK/banners/bannerNew/config/BannerCfgJs","OK/banners/bannerNew/utils/BannerCommon","OK/CurrentUserCfg","OK/utils/dom"],(function(e,n,t,r,a,o,i,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerParamsJs=void 0;var u={};u[t.BannerConstantJs.PERSONAL_DATA_ID_KEY]="user_id",u[t.BannerConstantJs.PERSONAL_DATA_NAME_KEY]="user_name",u[t.BannerConstantJs.PERSONAL_DATA_DAYS_TO_BIRTH_KEY]="days_to_birth",u[t.BannerConstantJs.PERSONAL_DATA_BIRTH_DAY_KEY]="days_birth",u[t.BannerConstantJs.PERSONAL_DATA_BIRTH_MONTH_KEY]="month_birth";var c=function(e,n,t){this.withViewportHeight=!1,this.considerCompactFooter=!1,this.withUniqueId=e,this.withPersonalData=n,this.withLastApps=t};c.prototype.asJSON=function(){var e,n={},u=i.CurrentUserCfg.getInstance();if(null!==u){var l=u.getBannerParameters(),p=l[t.BannerConstantJs.TARGETING_PARAMETER];if(p)r.BannerTransportJs.appendParam(n,t.BannerConstantJs.TARGETING_PARAMETER,p);else{var h=l[t.BannerConstantJs.USER_AGE];h&&(r.BannerTransportJs.appendParam(n,t.BannerConstantJs.USER_AGE,h),r.BannerTransportJs.appendParam(n,t.BannerConstantJs.USER_GENDER,l[t.BannerConstantJs.USER_GENDER]))}var f=l[t.BannerConstantJs.UNIQUE_ID_KEY];this.withUniqueId&&null!==f&&r.BannerTransportJs.appendParam(n,t.BannerConstantJs.UNIQUE_ID_KEY,f);var d=c.getPersonalData(l);this.withPersonalData&&null!==d&&r.BannerTransportJs.appendParam(n,t.BannerConstantJs.PERSONAL_DATA_KEY,d);var g=u.getLanguage();g&&r.BannerTransportJs.appendParam(n,t.BannerConstantJs.LANGUAGE,g)}if(this.withLastApps){var b=a.BannerCfgJs.getLastApplications();null!==b&&(n[t.BannerConstantJs.WITH_LAST_APPS]=b)}if(this.withViewportHeight){var v=o.getEffectiveViewportHeight();this.considerCompactFooter&&(v-=(e=s.firstByClass(document.body,"compact-footer"))?e.offsetHeight:0),n[t.BannerConstantJs.VIEWPORT_HEIGHT]=v+""}var B=a.BannerCfgJs.getCurrentExperiment();return B&&(n[t.BannerConstantJs.EXPR]=B),n},c.prototype.setWithViewportHeight=function(e){this.withViewportHeight=e},c.prototype.setConsiderCompactFooter=function(){this.considerCompactFooter=!0},c.getPersonalData=function(e){var n=e[t.BannerConstantJs.PERSONAL_DATA_KEY];if(!n)return null;var r=[];return Object.getOwnPropertyNames(n).forEach((function(e){r.push(u[e]+"="+n[e])})),r.join("&")},n.BannerParamsJs=c})),define("OK/banners/bannerNew/utils/JSEvaluatorJs",["require","exports"],(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JSEvaluatorJs=void 0;var JSEvaluatorJs=function(){var e=this;this.logErrorWrapper=function(n,t){e.logError(n,t)}};JSEvaluatorJs.findNearestPlace=function(e,n){for(;null!==e&&n>0;){var t=e.getAttribute(JSEvaluatorJs.JSPLACE_ATTR_NAME);if(t)return t;e=e.parentElement,n--}return null},JSEvaluatorJs.evalScript=function evalScript(text){text.replace(/(^[^<]*<!--)|(-->[^>]*$)/g,""),text&&(window.execScript?window.execScript(text):window.eval?window.eval(text):eval(text))},JSEvaluatorJs.prototype.findAndEvalScripts=function(e){var n=this,t=e.getElementsByTagName("script");t.length&&Array.from(t).forEach((function(e){var t=e.getAttribute("src");if(null!==t&&t.trim()){var r=e.parentNode;r.removeChild(e);var a=document.createElement("script");a.src=t,a.type="text/javascript";var o=e.getAttribute("onload");null!==o&&n.addOnloadScript(a,o),r.appendChild(a)}else{var i=e.innerHTML;n.evalInlineJS(e,i)}}))},JSEvaluatorJs.prototype.evalInlineJS=function(e,n){if(n)try{this.setUpEvalContext(e),JSEvaluatorJs.evalScript(n)}catch(n){this.logError(e,n)}finally{OK.logging.tearDown()}},JSEvaluatorJs.prototype.setUpEvalContext=function(e){OK.logging.setUp(OK.fn.delegate(this.logErrorWrapper,[e],this))},JSEvaluatorJs.prototype.logError=function(e,n){},JSEvaluatorJs.prototype.addOnloadScript=function(e,n){var t=this;e.onload=function(){t.evalInlineJS(e,n)}},exports.JSEvaluatorJs=JSEvaluatorJs,JSEvaluatorJs.JSPLACE_ATTR_NAME="jsplace"})),define("OK/banners/bannerNew/utils/HtmlRendererJs",["require","exports","OK/banners/bannerNew/utils/BannerCommon","OK/banners/bannerNew/utils/JSEvaluatorJs","OK/logger"],(function(e,n,t,r,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HtmlRendererJs=void 0;var o=new r.JSEvaluatorJs,i=(t.createLog("HtmlRendererJs"),!1);o.logError=function(e,n){var t=r.JSEvaluatorJs.findNearestPlace(e,3)||"unknown",o=n.message?n.message.substr(64):"";a.trace("testing",n.stack,"jsban_"+t,o)};var s=function(){this.log=t.createLog("HtmlRendererJs")};s.prototype.setBannerPlace=function(e,n){e.setAttribute(r.JSEvaluatorJs.JSPLACE_ATTR_NAME,"p"+n)},s.prototype.setBannerHtml=function(e,n){i=!0,this.log("setBannerHtml",{el:e,html:n}),e.innerHTML=n,o.findAndEvalScripts(e),i=!1},s.isInjection=function(){return i},n.HtmlRendererJs=s})),define("OK/banners/bannerNew/BannerViewJs",["require","exports","OK/banners/bannerNew/data/BannerDataNull","OK/banners/bannerNew/data/BannerDataImage","OK/banners/bannerNew/data/BannerDataText","OK/banners/bannerNew/utils/HtmlRendererJs","OK/DispatcherJs","OK/BanDataCfgJs"],(function(e,n,t,r,a,o,i,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerViewJs=void 0;var u="nbnr_",c={},l=0,p=null;function h(){"function"==typeof window.trg_gc&&window.trg_gc()}function f(){return null===p&&(p=new o.HtmlRendererJs),p}var d={container:null,slot:null,inline:!1,onRender:null,onError:null},g=function(e){this.contentChangeObserver=null;var n=Object.assign(Object.assign({},d),e);this.options=n,this.container=n.container,this.uid=""+l++,null!==n.slot.getValue()&&f().setBannerPlace(n.container,n.slot.getValue()),this.heightChangeWatcher=new w(this),this.nullBannerRenderer=new v(this),this.textBannerRenderer=new B(this),this.imageBannerRenderer=new y(this)};g.prototype.isInline=function(){return this.options.inline},g.prototype.attach=function(e){c[this.uid]=this,this.banner=e,this.heightChangeWatcher.start(),this.createBannerDomObserver(this.container)},g.prototype.detach=function(){this.destroyBannerDomObserver(),this.heightChangeWatcher.stop(),this.renderBannerForDetach(),this.banner=null,c[this.uid]=null},g.prototype.isInViewport=function(e){if("hidden"===document.visibilityState)return!1;if(e&&window.OK.Layers.isAnyLayerOpened())return!1;var n=this.container,t=s.BanDataCfgJs.getInstance().checkInViewportThreshold,r=window.pageYOffset,a=window.innerHeight,o=n.getBoundingClientRect(),i=o.height*t,u=o.top+r,c=o.bottom+r;if(a<i)return!1;var l=a+r;return u+i<l&&u>r||c-i>r&&c<l||u<r&&c>l},g.prototype.getContainer=function(){return this.container},g.prototype.showContainer=function(){var e=this;this.container.style.display="block",this.container.style.visibility="hidden",setTimeout((function(){null!==e.container&&(e.container.style.visibility="visible")}),100)},g.prototype.hideContainer=function(){this.container.style.display="none"},g.prototype.setBannerHtml=function(e){f().setBannerHtml(this.container,e)},g.prototype.renderBannerForDetach=function(){var e=t.BannerDataNull.NULL;this.showBannerDivNull(e),this.container.classList.toggle("banner_new__loaded",!0),h(),this.options.onRender&&this.options.onRender(e)},g.prototype.renderBanner=function(e){e instanceof t.BannerDataNull?this.showBannerDivNull(e):e instanceof r.BannerDataImage?this.showBannerDivImage(e):e instanceof a.BannerDataText&&this.showBannerDivText(e),this.container.classList.toggle("banner_new__loaded",!0),h(),this.options.onRender&&this.options.onRender(e),this.options.onError&&e instanceof t.BannerDataNull&&this.options.onError(e)},g.prototype.showBannerDivNull=function(e){this.nullBannerRenderer.showBannerDiv(e)},g.prototype.showBannerDivText=function(e){this.textBannerRenderer.showBannerDiv(e)},g.prototype.showBannerDivImage=function(e){this.imageBannerRenderer.showBannerDiv(e)},g.prototype.encodeClickParam=function(){return u+this.uid},g.prototype.createBannerDomObserver=function(e){if(window.MutationObserver){var n=this.heightChangeWatcher,t=new MutationObserver((function(e){for(var t=0;t<e.length;++t){e[t].addedNodes.length>0&&n.start()}}));t.observe(e,{childList:!0}),this.contentChangeObserver=t}},g.prototype.destroyBannerDomObserver=function(){var e=this.contentChangeObserver;e&&e.disconnect()},n.BannerViewJs=g;var b=function(e){this.bannerView=e};b.prototype.showBannerDiv=function(e){};var v=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.showBannerDiv=function(e){this.bannerView.hideContainer(),this.bannerView.container.innerHTML=""},n}(b),B=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.showBannerDiv=function(e){this.bannerView.showContainer(),this.bannerView.setBannerHtml(e.text)},n}(b),y=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.showBannerDiv=function(e){this.bannerView.showContainer(),this.bannerView.setBannerHtml(this.renderHtml(e,this.bannerView.encodeClickParam())),null!==e&&null!==e.impressionUrls&&e.impressionUrls.length&&setTimeout((function(){e.impressionUrls.forEach((function(e){(new Image).src=e}))}),10)},n.prototype.renderHtml=function(e,n){return'<div class="rb_div"><div class="rb_banner"><a href="'+e.targetUrl+'" onclick="rb_js_bannerClick(\''+n+'\');return false;"><img src="'+e.url+'" width="'+e.width+'" height="'+e.height+'" border="0" alt="'+e.title+'" title="'+e.title+'"/></a></div></div>'},n}(b),w=function(e){this.running=!1,this.height=0,this.count=0,this.heightChangeWatcher=0,this.bannerView=e};w.prototype.start=function(){var e=this;if(!this.running){var n=this.bannerView.container;this.count=0,this.running=!0,this.height=n.offsetHeight,this.heightChangeWatcher=setInterval((function(){var t=n.offsetHeight;e.count<15?(t>0&&t!==e.height&&(e.height=t,i.DispatcherJs.get().bannerViewStateChangedEvent.trigger()),e.count++):e.stop()}),100)}},w.prototype.stop=function(){this.running&&(clearInterval(this.heightChangeWatcher),this.running=!1)},window.rb_js_bannerClick=function(e){var n=e.slice(u.length),t=c[n];t&&null!==t.banner&&t.banner.handleBannerClick()}})),define("OK/banners/bannerNew/utils/DurationJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DurationJs=void 0;var t=function(){this.start=performance.now()};t.prototype.elapsedMillis=function(){return performance.now()-this.start},n.DurationJs=t})),define("OK/banners/bannerNew/banners/SimpleBannerJs",["require","exports","OK/banners/bannerNew/BannerViewJs","OK/banners/bannerNew/utils/DurationJs","OK/DispatcherJs","OK/banners/bannerNew/data/BannerDataNull","OK/banners/bannerNew/data/BannerDataJson","OK/logger"],(function(e,n,t,r,a,o,i,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NavigationTriggerJs=n.TimeoutTriggerJs=n.RefreshTriggerBaseJs=n.LoggingTriggerJs=n.SimpleBannerJs=void 0;var u=function(e){var n=this;this.request=null,this.visible=!1,this.inLayer=!1,this.banner=null;var a=e.view,o=e.model;this.options=e,this.model=o,a instanceof HTMLElement&&(a=new t.BannerViewJs({container:a,slot:o.slot})),this.view=a,this.durationSinceLastRefresh=new r.DurationJs,this.triggers=[],this.listener={handleResponse:function(e){n.handleResponse(e)}}};u.prototype.setInLayer=function(e){return this.inLayer=e,this},u.prototype.isInViewport=function(){return this.view.isInViewport(!this.inLayer)},u.prototype.attachRefreshTrigger=function(e,n){e.attach(this),this.triggers.push(new c(e,n))},u.prototype.init=function(e){e?this.view.showContainer():this.view.hideContainer(),this.triggers.forEach((function(n){n.init(e)}))},u.prototype.destroy=function(){this.hide(),this.triggers.forEach((function(e){e.destroy()}))},u.prototype.show=function(){var e=0;try{this.visible||(this.visible=!0,this.view.attach(this),e=1,this.requestBanner(),e=2,this.triggers.forEach((function(e){e.show()})))}catch(n){throw s.errorEx(n,"SimpleBanner","show_"+e),n}},u.prototype.hide=function(){this.visible?(this.triggers.forEach((function(e){e.hide()})),this.visible=!1,this.cancelBanner(),this.view.detach()):this.view.renderBanner(o.BannerDataNull.NULL)},u.prototype.cancelBanner=function(){null!==this.request&&(this.request.cancel(),this.request=null)},u.prototype.requestBanner=function(){this.visible&&(this.cancelBanner(),this.request=this.model.request(this.listener),this.durationSinceLastRefresh=new r.DurationJs)},u.prototype.getDurationSinceLastRefresh=function(){return this.durationSinceLastRefresh},u.prototype.handleResponse=function(e){this.banner=e,this.view.renderBanner(e),this.request=null,this.options.onAfterHandleResponse&&this.options.onAfterHandleResponse(e)},u.prototype.handleBannerClick=function(){if(this.banner instanceof i.BannerDataJson){var e=this.banner;this.model.click(e.clickUrl),window.navigateOnUrlFromJS(e.targetUrl)}},n.SimpleBannerJs=u;var c=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.delegate=e,this.place=n};c.prototype.init=function(e){try{this.delegate.init(e)}catch(e){this.logAndRethrow(e,"init")}},c.prototype.show=function(){try{this.delegate.show()}catch(e){this.logAndRethrow(e,"show")}},c.prototype.hide=function(){try{this.delegate.hide()}catch(e){this.logAndRethrow(e,"hide")}},c.prototype.destroy=function(){try{this.delegate.destroy()}catch(e){this.logAndRethrow(e,"destroy")}},c.prototype.attach=function(e){this.delegate.attach(e)},c.prototype.logAndRethrow=function(e,n){throw s.errorEx(e,"SimpleBanner",this.place+"-"+n),e},n.LoggingTriggerJs=c;var l=function(e){function n(){e.apply(this,arguments),this.banner=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.attach=function(e){this.banner=e},n.prototype.refresh=function(){this.banner.requestBanner()},n.prototype.getDurationSinceLastRefresh=function(){return this.banner.getDurationSinceLastRefresh()},n}(c);n.RefreshTriggerBaseJs=l;var p=function(e){function n(n){e.call(this),this.refresher=null,this.intervalProvider=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(e){},n.prototype.show=function(){var e=this;null===this.refresher&&(this.refresher=setInterval((function(){var n=e.intervalProvider.getValue();null!==n&&0!==n&&e.getDurationSinceLastRefresh().elapsedMillis()>1e3*n&&e.banner.isInViewport()&&e.refresh()}),1e3))},n.prototype.hide=function(){this.refresher&&clearInterval(this.refresher)},n.prototype.destroy=function(){},n}(l);n.TimeoutTriggerJs=p;var h=function(e){function n(n){e.call(this),this.enabledProvider=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(e){},n.prototype.show=function(){a.DispatcherJs.get().updateEvent.attach(this.onUpdate,this)},n.prototype.hide=function(){a.DispatcherJs.get().updateEvent.detach(this.onUpdate,this)},n.prototype.onUpdate=function(){this.enabledProvider.getValue()&&this.refresh()},n.prototype.destroy=function(){},n}(l);n.NavigationTriggerJs=h})),define("OK/banners/bannerNew/ValueProviderJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ValueProviderJs=void 0;var t=function(e){this.getValue=e};t.create=function(e){return new t((function(){return e}))},n.ValueProviderJs=t})),define("OK/banners/bannerNew/hooks/BaseBannerHookJs",["require","exports","OK/banners/bannerNew/transport/BannerTransportJs","OK/banners/bannerNew/utils/BannerConstantJs","OK/DispatcherJs","OK/banners/bannerNew/banners/BannerProxyJs","OK/banners/bannerNew/BannerModelJs","OK/BanDataCfgJs","OK/banners/bannerNew/utils/BannerCommon","OK/banners/bannerNew/config/BannerCfgJs","OK/banners/bannerNew/config/BannerParamsJs","OK/banners/bannerNew/BannerViewJs","OK/banners/blockDetect/adbWhitelistDetect","OK/banners/bannerNew/banners/SimpleBannerJs","OK/banners/bannerNew/ValueProviderJs","OK/logger","OK/utils/utils"],(function(e,n,t,r,a,o,i,s,u,c,l,p,h,f,d,g,b){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HookBannerParamsJs=n.BaseBannerHookJs=void 0;var v=function(e,n){this.position=null,this.banner=null,this.visible=!0,this.params=null,this.el=n,this.hookId=n.getAttribute("data-hook-id"),this.hookType=e,this.name=this.hookId,this.log=u.createLog("BaseBannerHookJs["+this.name+"]")};v.prototype.needCleanElement=function(){return!1},v.prototype.activate=function(){this.params=this.readBannerParams(),this.needCleanElement()&&(this.el.removeAttribute("data-hook-id"),this.el.removeAttribute("data-module"),this.el.removeAttribute("data-params")),this.log("activate"),this.log("params",this.params),this.showBannerOnActivate()&&this.showBanner()},v.prototype.showBanner=function(){var e=this;return c.BannerCfgJs.getInstance().abpWhiteListEnabled?h.detect({adbWhiteListEnabled:!0}).then((function(){return e.doShowBanner(!0)}),(function(){return e.doShowBanner(!1)})):this.doShowBanner(!1)},v.prototype.doShowBanner=function(e){var n=this;return this.clearBannerContent(),null!==this.params?(this.params.setAdblockWhitelist(e),new Promise((function(e,t){setTimeout((function(){try{var r=n.el;null!==r&&(n.banner=new o.BannerProxyJs({createDelegate:function(){return n.createBannerDelegate(n.params,r)},key:function(){return"banner"}}),n.banner.init(n.visible),n.banner.show(),n.log("banner",n.banner),e())}catch(e){n.log("error",e),g.errorEx(e,"BannerHook-"+n.name,"init_view_"),t(e)}}),500)}))):Promise.reject()},v.prototype.deactivate=function(){null!==this.banner&&(this.banner.destroy(),this.banner=null)},v.prototype.showBannerOnActivate=function(){return!0},v.prototype.logEmptyBanner=function(){},v.prototype.createBannerDelegate=function(e,n){var t=d.ValueProviderJs.create(e.getPosition());return this.buildInlineBanner(n,e,t,this.name)},v.prototype.buildInlineBanner=function(e,n,r,o){var s=this,u=new i.BannerModelJs(r,n,t.BannerTransportJs.getInstance()),l=new p.BannerViewJs({container:e,slot:r,inline:!0,onRender:function(){a.DispatcherJs.get().bannerViewStateChangedEvent.trigger()},onError:function(){s.logEmptyBanner()}}),h=this.createBanner(l,u);h.setInLayer(n.getInLayer());var g=new d.ValueProviderJs((function(){return c.BannerCfgJs.getRefreshPolicyCfg().getTransition(o)})),b=new d.ValueProviderJs((function(){return c.BannerCfgJs.getRefreshPolicyCfg().getTimeout(o)}));return h.attachRefreshTrigger(new f.NavigationTriggerJs(g),"navi_hook"),h.attachRefreshTrigger(new f.TimeoutTriggerJs(b),"timeout_hook"),h},v.prototype.createBanner=function(e,n){return new f.SimpleBannerJs({view:e,model:n})},v.prototype.getBannerJsonParams=function(){var e=this.el.getAttribute("data-params");return null===e?null:b.parseJson(e)},v.prototype.readBannerParams=function(){var e=this.getBannerJsonParams();if(u.log("bannerParams",e),null===e)return null;var n=e[r.BannerConstantJs.WITH_UNIQUE_ID],t=e[r.BannerConstantJs.WITH_PERSONAL_DATA],a=e[r.BannerConstantJs.WITH_LAST_APPS],o=e[r.BannerConstantJs.POSITION_KEY]||this.position,i=!!e[r.BannerConstantJs.PERSONAL_DATA_IS_COMPANYOWNER],s=e[r.BannerConstantJs.WITH_SITE_ZONE_BANNER_PARAM],c=new B(n,t,a,o,i,s);if(e.grname&&c.setAuxGroupParameters(e.grname,e.grdesc,e.grpic),this.visible=e.visible,this.readAdditionalParams(e,c),e[r.BannerConstantJs.APPS_BANNERS_WITH_CUSTOM_TITLE]&&c.setUseAppsCustomTitle(!0),e[r.BannerConstantJs.APPS_BANNERS_APP_SHORT_NAME]&&c.setAppShortName(e[r.BannerConstantJs.APPS_BANNERS_APP_SHORT_NAME]),c.setDelay(e[r.BannerConstantJs.EXPR_DELAY]||50),c.setInLayer(e[r.BannerConstantJs.IN_LAYER]||!1),e.passWidth){var l=this.el,p=v.getInnerWidth(l);c.setWidth(p)}var h=e[r.BannerConstantJs.SITE_ZONE_BANNER_PARAM];h&&c.setSiteZone(h);var f=e[r.BannerConstantJs.SITENAME];return f&&c.setSitename(f),c},v.prototype.readAdditionalParams=function(e,n){},v.prototype.clearBannerContent=function(){this.el.innerHTML=""},v.getInnerWidth=function(e){var n=window.getComputedStyle(e,null),t=parseInt(n.paddingLeft,10),r=parseInt(n.paddingRight,10);return e.clientWidth-t-r},n.BaseBannerHookJs=v;var B=function(e){function n(n,t,r,a,o,i){e.call(this,n,t,r),this.groupName=null,this.groupDescription=null,this.groupAvatarUrl=null,this.useAppsCustomTitle=!1,this.appShortName=null,this.delay=0,this.width=0,this.siteZone=null,this.sitename=null,this.adblockWhitelist=!1,this.inv=!1,this.inLayer=!1,this.position=a,this.companyOwner=o,this.withSiteZone=i}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setDelay=function(e){this.delay=e},n.prototype.setInv=function(e){this.inv=e},n.prototype.getDelay=function(){return this.delay},n.prototype.setInLayer=function(e){this.inLayer=e},n.prototype.getInLayer=function(){return this.inLayer},n.prototype.setAdblockWhitelist=function(e){this.adblockWhitelist=e},n.prototype.getAdblockWhitelist=function(){return this.adblockWhitelist},n.prototype.getPosition=function(){return this.position},n.prototype.isCompanyOwner=function(){return this.companyOwner},n.prototype.setAuxGroupParameters=function(e,n,t){this.groupName=e,this.groupDescription=n,this.groupAvatarUrl=t},n.prototype.setUseAppsCustomTitle=function(e){this.useAppsCustomTitle=e},n.prototype.setAppShortName=function(e){this.appShortName=e},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.setSiteZone=function(e){this.siteZone=e},n.prototype.setSitename=function(e){this.sitename=e},n.prototype.asJSON=function(){var e=l.BannerParamsJs.prototype.asJSON.call(this);this.isCompanyOwner()&&t.BannerTransportJs.appendParam(e,"l","1");var n=s.BanDataCfgJs.getInstance();u.log("[banDataProvider]",n);var a=null;return this.siteZone?a=this.siteZone:this.withSiteZone&&n.sitezone&&(a=n.sitezone),null!==a&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.SITEZONE_PARAM,a),n.groupId&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.GROUP_ID_PARAM,n.groupId),n.isaMember&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.IS_GROUP_ACTIVE_MEMBER_PARAM,n.isaMember),this.groupName&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.GROUP_NAME_PARAM,this.groupName),this.groupDescription&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.GROUP_DESCRIPTION_PARAM,this.groupDescription),this.groupAvatarUrl&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.GROUP_AVATAR_URL_PARAM,this.groupAvatarUrl),this.useAppsCustomTitle&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.APPS_BANNERS_WITH_CUSTOM_TITLE,"1"),this.appShortName&&t.BannerTransportJs.appendParam(e,r.BannerConstantJs.APPS_BANNERS_APP_SHORT_NAME,this.appShortName),this.getWidth()>0&&t.BannerTransportJs.appendParam(e,"w",this.getWidth()+""),this.inv&&t.BannerTransportJs.appendParam(e,"inv","1"),this.adblockWhitelist&&t.BannerTransportJs.appendParam(e,"d","1"),window.OK.isStateRedesign()&&t.BannerTransportJs.appendParam(e,"web2021","1"),this.sitename&&t.BannerTransportJs.appendParam(e,"sitename",this.sitename),e},n}(l.BannerParamsJs);n.HookBannerParamsJs=B,n.default=v})),define("OK/banners/bannerNew/hooks/AppsRecommendBannerHookJs",["require","exports","OK/banners/bannerNew/hooks/BaseBannerHookJs","OK/banners/bannerNew/banners/SimpleBannerJs"],(function(e,n,t,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppsRecommendBannerHookJs=void 0;var a=function(e){function n(n,t){e.call(this,"BanMailRAPPS",t)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.createBanner=function(e,n){return new r.SimpleBannerJs({view:e,model:n,onAfterHandleResponse:function(e){var n=document.getElementById("bannerLoaderId");n&&(n.style.display="none")}})},n}(t.BaseBannerHookJs);n.AppsRecommendBannerHookJs=a,n.default=a})),define("OK/EventBus",["OK/EventFactory"],(function(e){"use strict";var n=e.create();function t(e){this.prefix=e.prefix,this.name=e.name,this.listeners=new Map}return t.EVENT_NAME="okeventbus",t.registeredBuses=new Set,t.getRegisteredBuses=function(){return t.registeredBuses},t.getHost=function(){return n},t.createEvent=function(e){return new CustomEvent(t.EVENT_NAME,{detail:e,bubbles:!1,cancelable:!0})},t.on=function(e){if(n.list.includes(e))throw new Error("EventBus: РїРѕРІС‚РѕСЂРЅРѕРµ РґРѕР±Р°РІР»РµРЅРёРµ РѕР±СЂР°Р±РѕС‚С‡РёРєР°");n.attach(e)},t.off=function(e){n.detach(e)},t.emit=function(e){var r=t.createEvent(e);return n.trigger(r),!r.defaultPrevented},t.findRegistered=function(e){var n=null;return t.registeredBuses.forEach((function(t){!n&&t.isMe(e)&&(n=t)})),n},t.create=function(e){return t.getInstance(e)},t.getInstance=function(e){var n=t.findRegistered(e);return n||(n=new t(e),t.getRegisteredBuses().add(n)),n},t.prototype={emit:function(e,n){return t.emit({prefix:this.prefix,name:this.name,data:e,target:n})},on:function(e,n){var r=this.makeListener(e,n);t.on(r)},off:function(e){var n=this.listeners.get(e);n&&(n.bus=void 0,t.off(n),this.listeners.delete(e))},isMe:function(e){return this.name===e.name&&this.prefix===e.prefix},makeListener:function(e,n){if(this.listeners.has(e))throw new Error("EventBus["+this.prefix+", "+this.name+"]: РїРѕРІС‚РѕСЂРЅРѕРµ РґРѕР±Р°РІР»РµРЅРёРµ РѕР±СЂР°Р±РѕС‚С‡РёРєР°");var t=function(t){var r=t.detail;if(!t.defaultPrevented&&this.isMe(r)&&(!n||!r.target||n!==r.target))return e(r.data,t)}.bind(this);return this.listeners.set(e,t),t}},t})),define("OK/banners/bannerNew/hooks/BannerAppsHookJs",["require","exports","OK/banners/bannerNew/hooks/BaseBannerHookJs","OK/EventBus"],(function(e,n,t,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerAppsHookJs=void 0;var a=function(e){function n(n,t){var a=this;e.call(this,"BanMailRBNew",t),this.onShowBanner=function(n){e.prototype.showBanner.call(a).catch((function(e){r.create({name:"errored",prefix:"InterstitialAppBanner"}).emit({event:"error",reason:e},null)}))},this.onStartAds=function(e){a.showLayer(),r.create({name:"started",prefix:"InterstitialAppBanner"}).emit({event:"start"},null)},this.onFinishAds=function(e){a.hideLayer(),a.banner.destroy(),a.banner=null,r.create({name:"finished",prefix:"InterstitialAppBanner"}).emit({event:"finish"},null)},this.logEmptyBanner=function(){r.create({name:"errored",prefix:"InterstitialAppBanner"}).emit({event:"error",reason:"banner is null"},null)},this.layer=document.querySelector(".app-interstitial-layer")}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.activate=function(){e.prototype.activate.call(this),this.el.addEventListener("ShowInterstitialAppBanner",this.onShowBanner),this.el.addEventListener("ad_start",this.onStartAds),this.el.addEventListener("ad_finish",this.onFinishAds)},n.prototype.showBannerOnActivate=function(){return!1},n.prototype.showLayer=function(){this.layer.classList.contains("invisible")&&this.layer.classList.remove("invisible")},n.prototype.hideLayer=function(){this.layer.classList.contains("invisible")||this.layer.classList.add("invisible")},n.prototype.deactivate=function(){this.el.removeEventListener("ShowInterstitialAppBanner",this.onShowBanner),this.el.removeEventListener("ad_start",this.onStartAds),this.el.removeEventListener("ad_finish",this.onFinishAds),e.prototype.deactivate.call(this)},n}(t.BaseBannerHookJs);n.BannerAppsHookJs=a,n.default=a})),define("OK/banners/bannerNew/hooks/BannerHookJs",["require","exports","OK/banners/bannerNew/hooks/BaseBannerHookJs"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BannerHookJs=void 0;var r=function(e){function n(n,t){e.call(this,"BanMailRBNew",t)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n}(t.BaseBannerHookJs);n.BannerHookJs=r,n.default=r})),define("OK/banners/bannerNew/banners/ConditionalBannerJs",["require","exports","OK/DispatcherJs","OK/BanDataCfgJs","OK/logger"],(function(e,n,t,r,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ForthColumnCondition=n.BannerNavigationDataConditionJs=n.VisibilityConditionJs=n.ConditionalBannerJs=void 0;var o=function(e,n){this.visiblity=!1,this.effective=null,this.conditions=new Array,this.delegate=e,this.blockId=" "+n+" ",this.attachCondition(new s)};o.prototype.attachCondition=function(e){this.conditions.push(e),e.setBanner(this)},o.prototype.init=function(e){this.delegate.init(e),this.conditions.forEach((function(e){e.init()}))},o.prototype.show=function(){this.visiblity=!0,this.updateBannerState()},o.prototype.hide=function(){this.visiblity=!1,this.updateBannerState()},o.prototype.updateBannerState=function(){try{var e=!0;this.conditions.forEach((function(n){e=e&&n.isVisible()}));var n=this.visiblity&&e;null!==this.effective&&!this.effective||n?null!==this.effective&&this.effective||!n||this.delegate.show():this.delegate.hide(),this.effective=n}catch(e){throw a.errorEx(e,"Banner","upBaSt"),e}},o.prototype.destroy=function(){this.conditions.forEach((function(e){e.destroy()})),this.conditions=null,this.delegate.destroy()},n.ConditionalBannerJs=o;var i=function(){this.banner=null};i.prototype.setBanner=function(e){this.banner=e},i.prototype.getBanner=function(){return this.banner},i.prototype.updateBannerState=function(){this.banner.updateBannerState()},n.VisibilityConditionJs=i;var s=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){t.DispatcherJs.get().updateEvent.attach(this.onUpdateEvent,this)},n.prototype.destroy=function(){t.DispatcherJs.get().updateEvent.detach(this.onUpdateEvent,this)},n.prototype.isVisible=function(){var e=r.BanDataCfgJs.getInstance().blocks;return null===e||-1===e.indexOf(this.getBanner().blockId)},n.prototype.onUpdateEvent=function(){this.updateBannerState()},n}(i);n.BannerNavigationDataConditionJs=s;var u=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){t.DispatcherJs.get().forthColumnToggledEvent.attach(this.onForthColumnToggled,this)},n.prototype.destroy=function(){t.DispatcherJs.get().forthColumnToggledEvent.detach(this.onForthColumnToggled,this)},n.prototype.onForthColumnToggled=function(){this.updateBannerState()},n.prototype.isVisible=function(){return t.DispatcherJs.isWideLayout()},n}(i);n.ForthColumnCondition=u})),define("OK/banners/bannerNew/hooks/ForthColumnBannerHookJs",["require","exports","OK/banners/bannerNew/hooks/BaseBannerHookJs","OK/banners/bannerNew/banners/ConditionalBannerJs","OK/banners/bannerNew/utils/BannerCommon","OK/BanDataCfgJs"],(function(e,n,t,r,a,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ForthColumnBannerHookJs=void 0;var i=function(e){function n(n,t){a.log("ForthColumnBannerHookJs init"),e.call(this,"BanMailRB4",t)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.needCleanElement=function(){return!0},n.prototype.createBannerDelegate=function(n,t){var a=e.prototype.createBannerDelegate.call(this,n,t),o=new r.ConditionalBannerJs(a,"ForthColumnTopBanner");return o.attachCondition(new r.ForthColumnCondition),o},n.prototype.readAdditionalParams=function(e,n){o.BanDataCfgJs.getInstance().inv&&(n.setWithViewportHeight(!0),n.setInv(!0))},n}(t.BaseBannerHookJs);n.ForthColumnBannerHookJs=i,n.default=i})),define("OK/banners/bannerNew/banners/CompositeBannerJs",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CompositeBannerJs=void 0;var t=function(){this.banners=new Array,this.defaultVisible=null,this.visible=null};t.prototype.addBanner=function(e){return this.banners.push(e),null!==this.defaultVisible&&e.init(this.defaultVisible),null!==this.visible&&(this.visible?e.show():e.hide()),this},t.prototype.init=function(e){this.defaultVisible=e,this.banners.forEach((function(n){n.init(e)}))},t.prototype.show=function(){this.banners.forEach((function(e){e.show()})),this.visible=!0},t.prototype.hide=function(){this.banners.forEach((function(e){e.hide()})),this.visible=!1},t.prototype.destroy=function(){this.banners.forEach((function(e){e.destroy()})),this.defaultVisible=null,this.visible=null},n.CompositeBannerJs=t})),define("OK/banners/bannerNew/banners/ViewportHeightAwareBannersJs",["require","exports","OK/banners/bannerNew/banners/CompositeBannerJs","OK/banners/bannerNew/utils/BannerCommon","OK/DispatcherJs"],(function(e,n,t,r,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ViewportHeightAwareBannersJs=void 0;var o=function(e){function n(n){e.call(this),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(n){e.prototype.init.call(this,n),r.getEffectiveViewportHeight()>this.options.threshold?this.configureBanners(this.options.tallBanners):this.configureBanners(this.options.shortBanners)},n.prototype.configureBanners=function(e){var n=this;e.forEach((function(e){var t=n.renderBannerPlace(e);n.addBanner(n.options.createBanner(t,e))})),a.DispatcherJs.get().bannerViewStateChangedEvent.trigger()},n.prototype.renderBannerPlace=function(e){var t=document.createElement("div");return t.classList.add("banner"+e,n.JS_BANNER_PLACE_CLASS),this.options.content.appendChild(t),t},n}(t.CompositeBannerJs);n.ViewportHeightAwareBannersJs=o,o.JS_BANNER_PLACE_CLASS="js-place"})),define("OK/banners/bannerNew/hooks/ViewportHeightAwareBannersHookJs",["require","exports","OK/banners/bannerNew/hooks/BaseBannerHookJs","OK/banners/bannerNew/banners/ConditionalBannerJs","OK/banners/bannerNew/banners/ViewportHeightAwareBannersJs","OK/banners/bannerNew/ValueProviderJs","OK/banners/bannerNew/utils/HtmlRendererJs","OK/banners/bannerNew/config/BannerCfgJs","OK/BannerLogger","OK/BanDataCfgJs"],(function(e,n,t,r,a,o,i,s,u,c){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ViewportHeightAwareBannersHookJs=void 0;var l=function(e){function n(n,t){e.call(this,"VHAB",t),this.threshold=0,this.tallBanners=null,this.shortBanners=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.needCleanElement=function(){return!0},n.prototype.showBanner=function(){var n=this,t=e.prototype.showBanner.call(this);return s.BannerCfgJs.getInstance().vhaBannerDebug&&t.then((function(e){n.bannerLogger=new u.BannerLogger("native",n.el,i.HtmlRendererJs.isInjection)})),t},n.prototype.deactivate=function(){this.bannerLogger&&(this.bannerLogger.destroy(),this.bannerLogger=null),e.prototype.deactivate.call(this)},n.prototype.createBannerDelegate=function(e,n){var t=this;return new r.ConditionalBannerJs(new a.ViewportHeightAwareBannersJs({content:n,threshold:this.threshold,tallBanners:this.tallBanners,shortBanners:this.shortBanners,createBanner:function(n,r){return t.buildInlineBanner(n,e,o.ValueProviderJs.create(r),"slot"+r)}}),"ViewportHeightAwareBanner")},n.prototype.readAdditionalParams=function(e,n){this.threshold=+e.threshold||800,this.tallBanners=this.convertToIntegerArray(e.tallBanners||""),this.shortBanners=this.convertToIntegerArray(e.shortBanners||""),c.BanDataCfgJs.getInstance().inv?n.setInv(!0):(n.setConsiderCompactFooter(),n.setWithViewportHeight(!0))},n.prototype.convertToIntegerArray=function(e){var n=[];return e.split(",").forEach((function(e){n.push(parseInt(e,10))})),n},n}(t.BaseBannerHookJs);n.ViewportHeightAwareBannersHookJs=l,n.default=l})),define("OK/banners/bannerNew/discussions/DiscussionsBannerParamJs",["require","exports","OK/banners/bannerNew/config/BannerParamsJs","OK/banners/bannerNew/transport/BannerTransportJs","OK/banners/bannerNew/utils/BannerConstantJs"],(function(e,n,t,r,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DiscussionsBannerParamJs=void 0;var o=function(e){function n(n,t,r,a){e.call(this,n,t,r),this.sitezone=a,e.prototype.setWithViewportHeight.call(this,!0)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.asJSON=function(){var n=e.prototype.asJSON.call(this);return this.sitezone&&r.BannerTransportJs.appendParam(n,a.BannerConstantJs.SITEZONE_PARAM,this.sitezone),n},n}(t.BannerParamsJs);n.DiscussionsBannerParamJs=o})),define("OK/banners/bannerNew/discussions/DiscussionsBannerJs",["require","exports","OK/banners/bannerNew/ValueProviderJs","OK/banners/bannerNew/config/BannerCfgJs","OK/banners/bannerNew/discussions/DiscussionsBannerParamJs","OK/banners/bannerNew/banners/CompositeBannerJs","OK/banners/bannerNew/banners/SimpleBannerJs","OK/banners/bannerNew/banners/BannerProxyJs","OK/banners/bannerNew/transport/BannerTransportJs","OK/banners/bannerNew/BannerModelJs","OK/DispatcherJs"],(function(e,n,t,r,a,o,i,s,u,c,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DiscussionsBannerJs=void 0;var p=function(e){this.topBanner=e,this.topBannerSlot=new t.ValueProviderJs((function(){return r.BannerCfgJs.getInstance().getApplicationBannerCfg().getDiscussionsTopSlot()}))};p.prototype.init=function(e){var n=this;this.banner=new s.BannerProxyJs({createDelegate:function(){var e=new a.DiscussionsBannerParamJs(!1,!0,!0,"6"),s=new c.BannerModelJs(n.topBannerSlot,e,u.BannerTransportJs.getInstance()),l=new i.SimpleBannerJs({view:n.topBanner,model:s}).setInLayer(!0);if(r.BannerCfgJs.getInstance().discussionsRefreshEnabled){var p=new t.ValueProviderJs((function(){return r.BannerCfgJs.getRefreshPolicyCfg().getTransition("discussionsBanner")})),h=new t.ValueProviderJs((function(){return r.BannerCfgJs.getRefreshPolicyCfg().getTimeout("discussionsBanner")}));l.attachRefreshTrigger(new i.NavigationTriggerJs(p),"navi_hook"),l.attachRefreshTrigger(new i.TimeoutTriggerJs(h),"timeout_hook")}return(new o.CompositeBannerJs).addBanner(l)},key:function(){return"disc"}}),this.banner.init(e),l.DispatcherJs.get().forthColumnToggledEvent.attach(this.onColumnToggled,this)},p.prototype.show=function(){null===this.banner&&this.init(!1),this.banner.show()},p.prototype.hide=function(){null!==this.banner&&this.banner.hide()},p.prototype.destroy=function(){null!==this.banner&&(this.banner.destroy(),this.banner=null),l.DispatcherJs.get().forthColumnToggledEvent.detach(this.onColumnToggled,this)},p.prototype.onColumnToggled=function(e){e?this.show():this.hide()},n.DiscussionsBannerJs=p})),define("b/banners",["OK/banners/BannerController","OK/banners/BannerLoader","OK/banners/bannerNew/hooks/BannerNavigationDataProviderHookJs","OK/banners/bannerNew/hooks/BaseBannerHookJs","OK/banners/bannerNew/hooks/AppsRecommendBannerHookJs","OK/banners/bannerNew/hooks/BannerAppsHookJs","OK/banners/bannerNew/hooks/BannerHookJs","OK/banners/bannerNew/hooks/ForthColumnBannerHookJs","OK/banners/bannerNew/hooks/ViewportHeightAwareBannersHookJs","OK/banners/bannerNew/discussions/DiscussionsBannerJs"],{});