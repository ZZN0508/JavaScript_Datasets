var oStart,oParticle,Start=Class.create(App,{_location:null,_enableBrowsing:!0,onLeave:Prototype.emptyFunction,initialize:function(t){t(),this.resize(),$("icontent").visible()||$("icontent").appearIE({delay:1.4}),$("video_show").observe("click",this.showVideo.bind(this)),$("video_close").observe("click",this.hideVideo.bind(this))},showVideo:function(){oParticle._enabled=!1,$("video_show").setOpacity(0),$("video").show(),jwplayer().play(!0)},hideVideo:function(){oParticle._enabled=!0,jwplayer().pause(),jwplayer().stop(),$("video").hide(),$("video_show").appear()},history:function(t,e){t(),this.go2(e=""==e?"logo":e)},go2:function(t){if(this._location==t||!this._enableBrowsing)return clearTimeout(this.go2Timeout),void(this.go2Timeout=setTimeout(function(){this.go2(t)}.bind(this),100));this.resize(),this._enableBrowsing=!1;var e=this.onLeave()||0;this.onLeave=Prototype.emptyFunction,Object.isFunction(this[t])&&setTimeout(function(){this[t]("init")}.bind(this),1e3*e)},effect:function(t,e){if("leave"===t)return this.setShadowOpacity({to:.1,duration:.5}),this.setShadow(30,.5),e.morph("top:220px",{duration:.6}).fade({duration:.4}),.6},logo:function(t){switch(t){case"init":$("c2u").setStyle("opacity:1"),this.setShadow(100,.4),this.setSlot(30,.7,.4),this.setSlot(70,.7,.5),setTimeout(function(){$("theu").morph("height:232px",{duration:1.3,afterFinish:function(){$("nupload").observe("mouseover",this.hoverLogo.bind(this))}.bind(this)}).appear({duration:.1}),this.setShadowOpacity({to:1,duration:.3}),setTimeout(function(){this.setShadow(70,1),oParticle.birth(),setTimeout(function(){"logo"==this._location&&$("c2u").appear().morph("top:0px").fade({delay:6}).morph("top:15px",{delay:6})}.bind(this),1e3)}.bind(this),500),this.setSlot(0,0,.7),this._enableBrowsing=!0}.bind(this),200),this.onLeave=this.logo.bind(this,"leave");break;case"leave":return oParticle._enabled=!1,$("sHoverOut")&&$("sHoverOut").remove(),$("particles").fade({to:.01}),$("nupload").stopObserving("mouseover"),$("c2u").fade({duration:.5}).morph("top:-50px",{duration:.5}),this.setShadowOpacity({to:.5,delay:.5,duration:.5}),this.setShadow(100,.5),this.setShadow(50,.1),this.setSlot(80,.6,.3),this.setSlot(0,0,.8),$("theu").morph("height:0px",{duration:.9}),.4}},register:function(t,e,i,o){var n,s=$("register"),r=document.viewport.getDimensions();switch($("c2u").setStyle("opacity:0"),t){case"init":s.appear({duration:2}).setStyle("top:"+(r.height<700?.1*r.height:200)+"px").morph("top:"+(r.height<700?0<r.height-500?r.height-428:72:265)+"px",{duration:1.4}),s.down('input[name="mail"]').observe("click",function(){this.value="",this.focus()}),s.down("form").observe("submit",function(t){t.stop(),this.register("send")}.bind(this)),this.setShadowOpacity({to:1,delay:.3}),$("ishadow").setStyle("width:1px").morph("margin-top:255px;margin-left:-200px;height:70px;width:230%",{duration:1,delay:.3,transition:Effect.Transitions.linear}),setTimeout(function(){$("headline").update('Sie sind bereits Mitglied? &nbsp; <span style="color:#aacef7;padding-right:4px">&rarr;</span> <a onclick="oStart.go2(\'login\')">Login</a>'),this.resize(),this.onLeave=this.register.bind(this,"leave"),this._enableBrowsing=!0}.bind(this),2e3);break;case"send":this._enableBrowsing=!1,s.down("form").request({parameters:s.down("form").serialize(),onComplete:this.register.bind(this,"receive")}),s.down("button").blur(),s.down("button").setStyle("width:"+s.down("button").getWidth()+"px").update('<img src="/img/l/but.gif" style="margin:4px 2px -1px"/>'),s.down("form").stopObserving().observe("submit",function(t){t.stop()});break;case"receive":""==e.responseText?(s.down("table").next("div").morph("opacity:0").insert({after:'<div id="regsuc" class="cG" style="display:none;font-size:15px;position:absolute;margin-top:-45px;width:92%">&#x2713; Wir haben Ihnen Ihre Zugangsdaten per eMail übermittelt.</div>'}),$("regsuc").appear({delay:.7})):(n=e.responseText.evalJSON(),$("regstatus").setStyle("border-radius:5px;padding:0 3px").update("&#x2717; "+(Object.isUndefined(n.err)?"Unbekannter Fehler":n.err)).addClassName("cR").highlight({delay:.3,endcolor:"#ffffff",duration:2}),s.down("button").update("Registrieren"),s.down("form").stopObserving().observe("submit",function(t){t.stop(),this.register("send")}.bind(this))),this._enableBrowsing=!0;break;case"leave":return $("ishadow").morph("margin-left:-35px",{duration:.6}).setStyle("height:auto"),this.effect("leave",s)}},_loginType:"login",login:function(t,e,i,o){var n=$("login"),s=document.viewport.getDimensions();switch($("c2u").setStyle("opacity:0"),t){case"init":n.appear({duration:2}).setStyle("top:"+(s.height<700?.12*s.height:210)+"px").morph("top:"+(s.height<700?0<s.height-500?s.height-428:72:305)+"px",{duration:1.4}),n.down('input[name="id"]').observe("click",function(){this.value="",this.focus()}),n.down('input[name="pw"]').observe("focus",function(){n.down('input[name="pw"]').replace('<input type="password" name="pw" value="" />'),setTimeout(function(){n.down('input[type="password"]').focus()}.bind(this),50)}.bind(this)),n.down("b").observe("click",this.loginSwitch2PW.bind(this)),n.down("form").observe("submit",function(t){t.stop(),this.login("send")}.bind(this)),""!=$("guestid").value&&(n.down('input[name="id"]').value=$("guestid").value),""!=$("guestpw").value&&(n.down('input[name="pw"]').type="password",n.down('input[name="pw"]').value=$("guestpw").value),this.setShadowOpacity({to:1,delay:.3}),this.setShadow(120,1.3),setTimeout(function(){$("headline").update('Sie besitzen noch keinen Account? &nbsp; <span style="color:#aacef7;padding-right:4px">&rarr;</span> <a onclick="oStart.go2(\'register\')">Registrieren</a>'),this.resize(),this.onLeave=this.login.bind(this,"leave"),this._enableBrowsing=!0}.bind(this),2e3);break;case"send":this._enableBrowsing=!1,n.down("form").action="io/"+this._loginType,n.down("form").request({parameters:n.down("form").serialize(),onComplete:this.login.bind(this,"receive")}),n.down("button").blur(),n.down("button").setStyle("width:"+n.down("button").getWidth()+"px").update('<img src="/img/l/but.gif" style="margin:2px 2px -1px"/>'),n.down("form").stopObserving().observe("submit",function(t){t.stop()});break;case"receive":var r=e;if(!r.responseText||""==r.responseText)return location.reload();if(r="No connection to database"==r.responseText?{err:"No connection to database"}:r.responseText.evalJSON(),this._enableBrowsing=!0,r.err){switch(r.type=parseInt(r.type),r.type){case 3:case 1:if(n.down("input[name=id]").addClassName("error"),1==r.type)break;case 2:n.down("input[name=pw]").addClassName("error")}return n.select("div.error").invoke("remove"),n.down("form").insert({after:'<div class="error" style="width:90%;margin:-3px auto 12px;display:none;clear:right">'+r.err+"</div>"}),n.down("div.error").appear({duration:.8}).blindDown({duration:.26}).highlight({delay:.8,endcolor:"#ececec",duration:2}),n.down("button").update("login"==this._loginType?"Login":"Anfordern"),void n.down("form").stopObserving().observe("submit",function(t){t.stop(),this.login("send")}.bind(this))}r.loc&&(location.href="http://uploaded.net/"+r.loc),n.down("button").update("login"==this.type?"Login":"Anfordern"),"login/recover"==this._loginType&&alert("Bitte prï¿½fen Sie ihr eMail-Postfach.");break;case"leave":return this.effect("leave",n)}},loginSwitch2PW:function(){var t=$("login");this._loginType="login/recover",this.setShadow(90,.1),this.setShadow(120,.9),t.down(".error")&&t.down(".error").blindUp(),t.morph("top:300px"),t.down("b").fade({duration:.4}),t.down("input[name=pw]").hide(),t.down("div").insert({after:'<br class="cb" /><b class="info" style="display:none">Bitte geben Sie Ihre Account ID, eMail Adresse oder Alias ein, um weitere Informationen zu erhalten.</b>'}),t.down("b.info").blindDown({delay:.2,duration:.8}),t.down("button").setStyle("width:auto").update("Starten")},_uploadInited:!1,startUpload:function(){this._uploadInited||$("icontent").down("h1").morph("margin-bottom:15px",{afterFinish:this.resize.bind(this)}),this._uploadInited=!0},resize:function(t){t();var e=$("login"),i=$("register"),t=document.viewport.getDimensions();t.height<700?($("slogo").setStyle("margin-top:"+(0<t.height-500?t.height-500:0)+"px"),$("particles").setStyle("top:"+(0<t.height-500?t.height-453:50)+"px"),e.setStyle("top:"+(0<t.height-500?t.height-428:72)+"px"),i.setStyle("top:"+(0<t.height-500?t.height-428:72)+"px")):($("slogo").setStyle("margin-top:195px"),$("particles").setStyle("top:230px"),e.setStyle("top:305px"),i.setStyle("top:265px"))},hoverLogo:function(t){var e=$("theu");e.down("img").morph("width:265px",{duration:.4}),e.morph("height:256px",{duration:.4}),this.setShadow(100,.4),$("slogo").up().insert('<div style="position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:1001" id="sHoverOut"></div>'),$("sHoverOut").observe("mouseover",this.outLogo.bind(this))},outLogo:function(t){$("sHoverOut")&&$("sHoverOut").remove();var e=$("theu");e.morph("height:232px",{duration:.5}),e.down("img").morph("width:232px",{duration:.5}),this.setShadow(70,.5)},setShadowOpacity:function(t){var e=$("ishadow");Prototype.Browser.IE?0<t.to?e.show():e.hide():0<t.to?e.appear(t):e.fade(t)},setShadow:function(t,e){var i=$("ishadow");Object.isUndefined(t)&&(t=100),Object.isUndefined(e)&&(e=1),i.morph("width:"+t+"%;margin-top:"+((.15*(100-t)).round()+268)+"px",{duration:e,queue:{position:"end",scope:"shadow"}})},setSlot:function(t,e,i){var o=$("islot");Object.isUndefined(t)&&(e=1),Object.isUndefined(t)&&(t=100),Object.isUndefined(i)&&(i=1),o.morph("opacity:"+e+";width:"+t+"%;margin-left:-"+(t/2/100*300+12)+"px",{duration:i,queue:{position:"end",scope:"slot"}})}}),Particle=Class.create({_enabled:!0,_particle:{left:0,right:0},_lastID:0,_active:0,_max:10,_type:"file",initialize:function(){Event.observe(document.onresize?document:window,"resize",this.resize.bind(this)),this.resize()},resize:function(){this._max=(document.viewport.getWidth()/90).round(),$("particles").select(".spleft, .spright").invoke("setStyle","width:"+(document.viewport.getWidth()/2-120)+"px")},birth:function(){var t=this._lastID%2?"left":"right",e=Math.round(2*Math.random()),i=.82<Math.random()?1:0,o=5+2.3*e+(2*Math.random()).round(),n=(38*Math.random()).round();(8*Math.random()).round();$("particles").down(".sp"+t).insert('<div class="particle" style="position:absolute;z-index:'+10*(o-100).abs()+"; display:none; left:auto;top:"+n+"%; "+t+":"+$("particles").down("div").getWidth()/100*(3*Math.random())+"px; margin-"+t+":-50px;background-position:-"+135*e+"px -"+120*i+"px; background-image:url(img/e/start/particle_"+this._type+'.png)" id="particle'+this._lastID+'"></div>');var s=$("particle"+this._lastID);Prototype.Browser.IE?(s.show(),setTimeout(function(){s.hide()}.bind(this),1e3*o)):(s.appear({duration:.45*o}),s.fade({delay:.55*o,duration:.45*o})),s.morph(t+":"+$("particles").down("div").getWidth()/100*90+"px",{duration:o,transition:Effect.Transitions.linear,afterFinish:this.death.bind(this)}),this._lastInsert=(new Date).getTime(),this._lastID++,this._active++,this.next()},death:function(t){t.element.remove(),this._active--,this.next()},next:function(){if(this._enabled&&!(this._active>=this._max)){var t=new Date;if(this._lastInsert>t.getTime()-380)return setTimeout(this.next.bind(this),10);this.birth()}}});document.observe("dom:loaded",function(){oStart=new Start,oParticle=new Particle}.bind(this));
