define("lofty/util/datalazyload/2.0/datalazyload",["lofty/lang/class","lofty/lang/base","lofty/util/exposure/1.0/exposure","jquery","lofty/util/webp/1.0/webp"],function(t,e,o,r,s){"use strict";return t(e,{options:{container:{value:"body",getter:function(t){return t="string"==typeof t?r(t):t}},overflowContainer:null,imgSrcName:"lazy-src",lazyAreaCls:"lazy-area",webp:!0,threshold:200},init:function(t){e.prototype.init.call(this,t||{});t={container:this.get("container"),target:"img["+this.get("imgSrcName")+"],."+this.get("lazyAreaCls"),overflowContainer:this.get("overflowContainer"),threshold:this.get("threshold")};this._exposObj=new o(t);var i=this;this._exposObj.on("exposure",function(t){var e,o,t=r(t);t.is(r("img"))?(e=t.attr(i.get("imgSrcName")))&&(t.one("load",function(){r(this).css("zoom",1)}),i.get("webp")?(o=t,s.convertSrc(e,function(t){o.attr("src",t)})):t.attr("src",e),t.removeAttr(i.get("imgSrcName"))):(e=(e=r(t.html())).filter("script").length?r(e.html()):e).length&&(t.replaceWith(e),i._exposObj.collectResouce(e))}),this._exposObj.execute()},execute:function(){this._exposObj.execute()},collectResouce:function(t){this._exposObj.collectResouce(t)},destroy:function(){this._exposObj.destroy()}})});
