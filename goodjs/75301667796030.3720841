!function(){"use strict";function r(e,t){for(var o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(o.call(e,t))return e;e=e.parentElement}return null}function c(e){var t=new Image;return t.style.width=e,t.style.width}function t(){document.getElementById("lookbook-overlay-close").removeEventListener("click",i),document.removeEventListener("keydown",s),document.removeEventListener("click",d);var e=document.getElementsByClassName("lookbook-overlay");if(0<e.length)for(var t=0;t<e.length;t+=1)e[t].parentNode.removeChild(e[t])}function i(){t()}function d(e){"lookbook-overlay-mask"===e.target.id&&t()}function s(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&t()}document.addEventListener("click",function(e){var t,o,n="",l="lb-mode=overlay",a=r(e.target,"[data-lookbook-overlay-href]");a&&(o=a.getAttribute("data-lookbook-overlay-href"),n=l),o||!(a=r(e.target,"[href*='"+l+"']"))||(t=a.search)&&-1<t.substring(1).split("&").indexOf(l)&&(o=a.href),o&&("A"!==a.tagName&&"AREA"!==a.tagName||e.preventDefault(),l=c(a.getAttribute("data-lookbook-overlay-width")||"80%"),e=c(a.getAttribute("data-lookbook-overlay-height")||"80%"),a="true"===a.getAttribute("data-lookbook-bg-click-close"),n+="&lb-width="+encodeURIComponent("100%"),n+="&lb-height="+encodeURIComponent("100%"),o=o+(-1===o.indexOf("?")?"?":"&")+n,n=l,l=e,e=a,(a=o)&&((o=document.createElement("iframe")).className="lookbook-overlay-content",o.src=a,o.style.width=n,o.style.height=l,o.setAttribute("webkitallowfullscreen",!0),o.setAttribute("mozallowfullscreen",!0),o.setAttribute("allowfullscreen",!0),(n=document.createElement("div")).id="lookbook-overlay-close",n.className="lookbook-overlay-close",n.innerHTML="<span>&times;</span>",n.addEventListener("click",i),(l=document.createElement("div")).id="lookbook-overlay-mask",l.className="lookbook-overlay",l.appendChild(n),l.appendChild(o),document.body.appendChild(l),document.addEventListener("keydown",s),e&&document.addEventListener("click",d)))})}();
