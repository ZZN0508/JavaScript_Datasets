YUI.add("hermes-template-notif-item-comment-after-your-comment",function(n,e){var i=n.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="notification-item notif-item-comment-after-your-comment">\n'+(null!=(a=e.invokePartial(r(i,"notification-avatar"),t,{name:"notification-avatar",hash:{data:null!=t?r(t,"avatarData"):t},data:o,indent:"\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(a=e.invokePartial(r(i,"notification-core"),t,{name:"notification-core",hash:{timestamp:null!=t?r(t,"timestamp"):t,subtitle:null!=t?r(t,"subtitle"):t,headline:null!=t?r(t,"headline"):t},data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\t</div>\n\n\t<div class="thumb-container">\n'+(null!=(a=e.invokePartial(r(i,"notification-photo-thumb"),t,{name:"notification-photo-thumb",hash:{photo:null!=t?r(t,"photo"):t},data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(a=e.invokePartial(r(i,"notification-context-menu-button"),t,{name:"notification-context-menu-button",data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),o={};n.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(e){var t=n.Template.get("hermes/"+e);t&&(o[e]=t)}),n.Template.register("hermes/notif-item-comment-after-your-comment",function(e,t){return(t=t||{}).partials=t.partials?n.merge(o,t.partials):o,i(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]}),YUI.add("hermes-template-notif-item-group-cover-photo",function(n,e){var i=n.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n<div class="notification-item notif-item-group-cover-photo">\n'+(null!=(a=e.invokePartial(r(i,"notification-avatar"),t,{name:"notification-avatar",hash:{data:null!=t?r(t,"avatarData"):t},data:o,indent:"\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(a=e.invokePartial(r(i,"notification-core"),t,{name:"notification-core",hash:{timestamp:null!=t?r(t,"timestamp"):t,subtitle:null!=t?r(t,"subtitle"):t,headline:null!=t?r(t,"headline"):t},data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\t</div>\n\n\t<div class="thumb-container">\n'+(null!=(a=e.invokePartial(r(i,"notification-photo-thumb"),t,{name:"notification-photo-thumb",hash:{photo:null!=t?r(t,"photo"):t},data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(a=e.invokePartial(r(i,"notification-context-menu-button"),t,{name:"notification-context-menu-button",data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),o={};n.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(e){var t=n.Template.get("hermes/"+e);t&&(o[e]=t)}),n.Template.register("hermes/notif-item-group-cover-photo",function(e,t){return(t=t||{}).partials=t.partials?n.merge(o,t.partials):o,i(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]}),YUI.add("hermes-template-notif-item-group-join-request-accepted",function(n,e){var i=n.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="notification-item notif-item-group-join-request-accepted">\n'+(null!=(a=e.invokePartial(r(i,"notification-avatar"),t,{name:"notification-avatar",hash:{data:null!=t?r(t,"avatarData"):t},data:o,indent:"\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(a=e.invokePartial(r(i,"notification-core"),t,{name:"notification-core",hash:{timestamp:null!=t?r(t,"timestamp"):t,subtitle:null!=t?r(t,"subtitle"):t,headline:null!=t?r(t,"headline"):t},data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(a=e.invokePartial(r(i,"notification-context-menu-button"),t,{name:"notification-context-menu-button",data:o,indent:"\t\t",helpers:n,partials:i,decorators:e.decorators}))?a:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),o={};n.Array.each(["notification-avatar","notification-core","notification-context-menu-button"],function(e){var t=n.Template.get("hermes/"+e);t&&(o[e]=t)}),n.Template.register("hermes/notif-item-group-join-request-accepted",function(e,t){return(t=t||{}).partials=t.partials?n.merge(o,t.partials):o,i(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-context-menu-button"]}),YUI.add("notifications-helper",function(E,e){var T=require("hermes-core/flog")(e),y={fave:"notif-item-fave",comment:"notif-item-comment",reply_reply:"notif-item-reply-reply",group_topic_new:"notif-item-group-topic-new",contacted:"notif-item-contacted",group_invite:"notif-item-group-invite",note:"notif-item-note",tag:"notif-item-tag",people:"notif-item-people",testimonial:"notif-item-testimonial",group_user_invite:"notif-item-group-user-invite",flickrmail:"notif-item-flickrmail",photo_comment_mention:"notif-item-photo-comment-mention",gallery:"notif-item-gallery",gallery_comment:"notif-item-gallery-comment",share:"notif-item-share",photo_accepted:"notif-item-photo-accepted",photo_declined:"notif-item-photo-declined",photo_mention:"notif-item-photo-mention",group_blast:"notif-item-group-blast",group_rules:"notif-item-group-rules",group_description:"notif-item-group-description",group_photo_request:"notif-item-group-photo-request",group_join_request:"notif-item-group-join-request",upload:"notif-item-upload",photo_bot_moderated:"notif-item-moderated",comment_after_your_comment:"notif-item-comment-after-your-comment",group_cover_photo:"notif-item-group-cover-photo",group_join_request_accepted:"notif-item-group-join-request-accepted"};E.NotificationsHelper=function(r,e){function l(e){var t=e.getSizeToFit({width:n,height:n},{sizes:e.getValue("sizes"),cropToFit:!0,includeSquare:!0});return{id:e.getValue("id"),url:e.getValue("url"),displayUrl:t.displayUrl,needsInterstitial:e.getValue("needsInterstitial")}}function t(e){var n=[],t=[],o=[],i=[],a={},r=[];return e.activityData.users&&(e.activityData.users.forEach(function(e){t.push(g.person.extractEntityModel(e))}),n.push(E.Promise.all(t).then(function(e){return i=e}))),Object.keys(g).forEach(function(t){e.activityData[t]&&n.push(g[t].extractEntityModel(e.activityData[t]).then(function(e){return a[t]=e}))}),e.eventDataList.forEach(function(e){var n=[],i={};Object.keys(g).forEach(function(t){e[t]&&n.push(g[t].extractEntityModel(e[t]).then(function(e){return i[t]=e}))}),o.push(E.Promise.all(n).then(function(){return i}))}),n.push(E.Promise.all(o).then(function(e){return r=e})),E.Promise.all(n).then(function(){return{userModels:i,activityEntityModels:a,eventEntityModelsList:r}})}function a(t,e){return t.setValue("isContact",e),t.remoteUpdate().catch(function(e){t.setValue("isContact",!1),T.error({err:e})})}function s(t,e){return t.setValue("isIgnored",e),e&&t.setValue("isContact",!1),t.remoteUpdate().then(function(){e&&E.fire("notifications:userBlocked",{relationshipModel:t,isBlocked:e})}).catch(function(e){t.setValue("isContact",!1),T.error({err:e})})}function u(e,t){t=o&&"page"===t.containerType?60:30;return e.length>t?e.substring(0,t)+"â€¦":e}function p(e,t,n){var i;switch(t){case"person":i=e.getValue("buddyicon")[o?"medium":"small"];break;case"group":i=e.getValue("iconurls")[o?"medium":"small"]}return{id:e.getValue("id"),type:t,url:e.getValue("url"),iconUrl:i,iconClass:o&&"page"===n.containerType?"small":"tiny"}}function c(e,t,n){E.Analytics.setDataLayerProp("notifications.notificationType",e.type),E.Analytics.setDataLayerProp("notifications.actionType","Context Menu Action: "+t),E.Analytics.setDataLayerProp("notifications.location",n),E.Analytics.sendClick("","Notification Action"),E.Analytics.setDataLayerProp("notifications.notificationType",""),E.Analytics.setDataLayerProp("notifications.actionType",""),E.Analytics.setDataLayerProp("notifications.location","")}var m=E.mix({langBundles:["common","notifications","relative-dates","profile","photo-card","header","group-admin","settings-notifications"],appContext:r},E.Localizable),i=new E.TemplateLibraryHelper(r,{localizeLib:m}),o=1081<=r.viewportData.getWidth(),n=o?100:50,g={photo:{extractEntityModel:function(i){return E.FlickrPromise({photoModelRegistry:r.getModelRegistry("photo-models"),personModelRegistry:r.getModelRegistry("person-models"),photoEngagementModelRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models")}).then(function(e){var t,n=E.clone(i);return n.title&&(t=n.title.content||n.title._content,n.title=t),E.APIHelper.response.parsePhotos({photos:[n],photoModelRegistry:e.photoModelRegistry,personModelRegistry:e.personModelRegistry,photoEngagementModelRegistry:e.photoEngagementModelRegistry,photoStatsModelRegistry:e.photoStatsRegistry}).shift()})}},set:{extractEntityModel:function(e){return E.Promise.resolve(e)}},gallery:{extractEntityModel:function(i){return E.FlickrPromise({personModelRegistry:r.getModelRegistry("person-models"),galleryInfoModelRegistry:r.getModelRegistry("gallery-models")}).then(function(e){var t,n=i.coverPhotos||[];return i.owner.nsid=i.owner.user,t=e.personModelRegistry.addOrUpdate(E.APIHelper.response.parsePerson(i.owner)),i.owner=t,n.forEach(function(e){e.url=E.APIHelper.response.removeProtocolFromURL(e.url)}),n={id:i.galleryId,compoundId:i.id,title:i.title.content,description:i.description.content,owner:t,primary:i.primaryPhotoId,primaryPhotoSizes:E.APIHelper.response.parsePrimaryPhotoSizes(i),photoCount:i.countPhotos,videoCount:i.countVideos,viewCount:i.countViews,commentCount:i.countComments,coverPhotosData:n},e.galleryInfoModelRegistry.addOrUpdate(n)})}},person:{extractEntityModel:function(t){return E.FlickrPromise({personModelRegistry:r.getModelRegistry("person-models")}).then(function(e){return e.personModelRegistry.addOrUpdate(E.APIHelper.response.parsePerson({nsid:t.user,pathAlias:t.pathAlias,username:t.username,realname:t.realname,isAdFree:t.isAdFree,ispro:t.ispro,proBadge:t.proBadge,datecreate:t.datecreate,iconurls:t.iconurls}))}).catch(function(e){T.error("error getting person model")})}},addedPerson:{extractEntityModel:function(e){return g.person.extractEntityModel(e)}},flickrmail:{extractEntityModel:function(t){return E.FlickrPromise({flickrMailModelRegistry:r.getModelRegistry("notification-flickrmail-models")}).then(function(e){return e.flickrMailModelRegistry.addOrUpdate(e.flickrMailModelRegistry.parseFlickrMailModel(t))})}},group:{extractEntityModel:function(t){return E.FlickrPromise({groupModelRegistry:r.getModelRegistry("group-models")}).then(function(e){return e.groupModelRegistry.addOrUpdate(e.groupModelRegistry.parseGroupModel(t.id,t.pathAlias,t))})}},discussion:{extractEntityModel:function(n){return E.FlickrPromise({groupModelRegistry:r.getModelRegistry("group-models"),discussionModelRegistry:r.getModelRegistry("notification-group-discussion-models")}).then(function(e){var t=E.clone(n);return t.id=n.group_id,t.title=n.group_name,t=e.groupModelRegistry.addOrUpdate(e.groupModelRegistry.parseGroupModel(n.group_id,n.pathAlias,t)),e.discussionModelRegistry.add(e.discussionModelRegistry.parseDiscussionModel(n.id,n.pathAlias,n,t))})}},testimonial:{extractEntityModel:function(e){return E.Promise.resolve(e)}}},f={sendMessage:function(t,e){var n;return{load:function(){return n=t.userModels[0],E.Promise.resolve()},getConfig:function(){return{actionId:"sendMessage",text:m.intlMessage({intlName:"photo-card.SEND_A_MESSAGE"}),onSelected:function(e){c(t,"sendMessage",e.analyticsLocation),E.config.win.open(E.URLHelper.generatePersonUrls(n).sendFlickrMail,"_blank")}}}}},follow:function(n,e){var i,o;return{load:function(){return i=n.userModels[0],r.getModel("person-relationship-models",n.userModels[0].getValue("nsid")).then(function(e){o=e}).catch(function(e){T.error("error getting person-relationship model")})},getConfig:function(){var t;if(!o.getValue("isIgnored"))return o.getValue("isContact")?{actionId:t="unfollowOwner",text:m.intlHTMLMessage({intlName:"photo-card.UNFOLLOW_USER",username:i.getValue("displayname")}),onSelected:function(e){c(n,t,e.analyticsLocation),a(o,!1)}}:{actionId:t="followOwner",text:m.intlHTMLMessage({intlName:"photo-card.FOLLOW_USER",username:i.getValue("displayname")}),onSelected:function(e){c(n,t,e.analyticsLocation),a(o,!0)}}}}},block:function(n,e){var i,o;return{load:function(){return i=n.userModels[0],r.getModel("person-relationship-models",n.userModels[0].getValue("nsid")).then(function(e){o=e})},getConfig:function(){var t;return o.getValue("isIgnored")?{actionId:t="unblockOwner",text:m.intlHTMLMessage({intlName:"photo-card.UNBLOCK_USER",username:i.getValue("displayname")}),onSelected:function(e){c(n,t,e.analyticsLocation),s(o,!1)}}:{actionId:t="blockOwner",text:m.intlHTMLMessage({intlName:"photo-card.BLOCK_USER",username:n.userModels[0].getValue("displayname")}),onSelected:function(e){c(n,t,e.analyticsLocation),function(e,t){t=new E.Views.FluidModal({appContext:r,title:m.intlHTMLMessage({intlName:"photo-card.BLOCK_USER_QUESTION",username:t}),message:"<p>"+m.intlMessage({intlName:"photo-card.BLOCK_CONFIRM_MESSAGE"})+"</p><p>"+m.intlHTMLMessage({intlName:"photo-card.BLOCK_CONFIRM_MESSAGE_NOTE"})+"</p>",actionButtonIsDangerous:!0,actionButtonLabel:m.intlMessage({intlName:"header.BLOCK"}),overlayClassList:"over-droparound-under-modal"});t.show(),t.on("actionClick",function(){s(e,!0)})}(o,i.getValue("displayname"))}}}}},joinGroup:function(i,e){var o;return{load:function(){var e=(i.activityData.photo?i.eventEntityModelsList[0]:i.activityEntityModels).group.getValue("id");return(o=new E.GroupStatusHelper(r,{groupId:e})).load()},getConfig:function(){var t,n=o.getInfo();return n.joinStatus.canJoin?{actionId:t="joinGroup",text:m.intlMessage({intlName:"photo-card.JOIN_GROUP"}),onSelected:function(e){if(o.getInfo().groupAttrs.id)return c(i,t,e.analyticsLocation),o.initiateJoinGroup()}}:n.groupAttrs.isMember?{actionId:t="leaveGroup",text:m.intlMessage({intlName:"photo-card.LEAVE_GROUP"}),onSelected:function(e){if(n.groupAttrs.id)return c(i,t,e.analyticsLocation),o.initiateLeaveGroup()}}:void 0}}},muteNotification:function(i,e){return{load:function(){return E.Promise.resolve()},getConfig:function(){var n;return i.isMuted?{actionId:n="unmuteNotification",text:m.intlMessage({intlName:"notifications.UNMUTE_THIS_NOTIFICATION"}),onSelected:function(e){var t={id:i.id};return c(i,n,e.analyticsLocation),r.callAPI("flickr.activity.unmuteNotification",t).then(function(e){i.isMuted=!1,E.fire("notifications:notificationMuteToggled",{activityItem:i,isMuted:!1})}).catch(function(e){T.error("Failed to unmute notificaiton: ",{err:e})})}}:{actionId:n="muteNotification",text:m.intlMessage({intlName:"notifications.MUTE_THIS_NOTIFICATION"}),onSelected:function(e){var t={id:i.id,mute_after:i.timestamp};return c(i,n,e.analyticsLocation),r.callAPI("flickr.activity.muteNotification",t).then(function(e){i.isMuted=!0,E.fire("notifications:notificationMuteToggled",{activityItem:i,isMuted:!0})}).catch(function(e){T.error("Failed to mute notificaiton: ",{err:e})})}}}}},muteGroup:function(i,e){return{load:function(){return E.Promise.resolve()},getConfig:function(){var n=e.groupId;return{actionId:"muteGroup",text:m.intlMessage({intlName:"notifications.MUTE_THIS_GROUP"}),onSelected:function(e){var t={group_id:n};return c(i,"muteGroup",e.analyticsLocation),r.callAPI("flickr.activity.muteObject",t).then(function(e){i.isMuted=!0,E.fire("notifications:groupMuteToggled",{groupId:n,isMuted:!0})}).catch(function(e){T.error("Failed to mute group: ",{err:e})})}}}}}},d={all:{additionalApiParams:{notificationGroups:"default,hermes_2020,bot_moderation"},menuItemConfig:{actionId:"all",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_ALL"})}},commentsOnYourPhotos:{additionalApiParams:{notificationGroups:"comments"},menuItemConfig:{actionId:"commentsOnYourPhotos",text:m.intlMessage({intlName:"settings-notifications.COMMENT_OWN_PHOTOS"})}},commentsAfterYourComment:{additionalApiParams:{notificationGroups:"comments_after_your_comment"},menuItemConfig:{actionId:"commentsAfterYourComment",text:m.intlMessage({intlName:"settings-notifications.COMMENT_OTHER_PHOTOS"})}},faves:{additionalApiParams:{notificationGroups:"faves"},menuItemConfig:{actionId:"faves",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_FAVES"})}},followers:{additionalApiParams:{notificationGroups:"followers"},menuItemConfig:{actionId:"followers",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_FOLLOWERS"})}},galleries:{additionalApiParams:{notificationGroups:"galleries"},menuItemConfig:{actionId:"galleries",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_GALLERIES"})}},groups:{additionalApiParams:{notificationGroups:"groups"},menuItemConfig:{actionId:"groups",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_GROUPS"})}},groupInvites:{additionalApiParams:{notificationGroups:"group_invites"},menuItemConfig:{actionId:"groupInvites",text:m.intlMessage({intlName:"settings-notifications.GROUP_INVITATIONS"})}},flickrmail:{additionalApiParams:{notificationGroups:"flickrmail"},menuItemConfig:{actionId:"flickrmail",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_FLICKRMAIL"})}},notes:{additionalApiParams:{notificationGroups:"notes"},menuItemConfig:{actionId:"notes",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_NOTES"})}},tags:{additionalApiParams:{notificationGroups:"tags"},menuItemConfig:{actionId:"tags",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_TAGS"})}},testimonials:{additionalApiParams:{notificationGroups:"testimonials"},menuItemConfig:{actionId:"testimonials",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_TESTIMONIALS"})}},mentions:{additionalApiParams:{notificationGroups:"mentions"},menuItemConfig:{actionId:"mentions",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_MENTIONS"})}},muted:{additionalApiParams:{muteFilter:"muted",notificationGroups:"default,hermes_2020,bot_moderation"},menuItemConfig:{actionId:"muted",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_MUTED"}),hasDivider:!0}},"groupsYouAdmin-all":{additionalApiParams:{notificationGroups:"groups_you_admin"},menuItemConfig:{actionId:"groupsYouAdmin-all",text:m.intlMessage({intlName:"notifications.NOTIF_FILTER_ADMIN_ALL_GROUPS"})}}},_={fave:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){if(e.activityData.photo){var t=e.activityEntityModels.photo,n=e.userModels,i=0<t.getValue("title").trim().length;return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?i?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_FAVED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_FAVED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),mediaType:t.getValue("mediaType"),photoUrl:t.getValue("url")}):i?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_FAVED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_FAVED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),mediaType:t.getValue("mediaType"),photoUrl:t.getValue("url")}):i?m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),mediaType:t.getValue("mediaType"),photoUrl:t.getValue("url")}),timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:l(t)}}n=e.userModels[0],t=e.eventEntityModelsList.map(function(e){return e.photo});return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_X_PHOTOS",personName:n.getValue("displayname"),personUrl:n.getValue("url"),photoCountString:e.activityData.countEvents,mediaType:t[0].getValue("mediaType")}),timestamp:e.timestamp,avatarData:p(n,"person",e),photos:t.map(l).slice(0,12),hasMultiplePhotos:1<t.length}},loadContextMenuConfig:function(e){var t,n=[],i=[];return e.activityData.photo&&(t=e.activityEntityModels.photo,n.push(new f.muteNotification(e,{eventType:e.type,objectId:t.getValue("id")}))),n.push(new f.sendMessage(e)),n.push(new f.follow(e)),n.push(new f.block(e)),n.forEach(function(e){i.push(e.load())}),E.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},comment:{setupView:function(e){return r.flipper.isFlipped("enable-notifications-comment-modal")?r.getView("comment-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()}):r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){if(e.activityData.photo){var t=e.activityEntityModels.photo,n=e.userModels,i=0<t.getValue("title").trim().length,o=0<(o=u(E.flutil.unescape(E.StringHelper.stripTags(e.eventDataList[0]._content)),e)).length?o:"...";return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_1_PHOTO_W_COMMENT",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:o,mediaType:t.getValue("mediaType")}):i?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),mediaType:t.getValue("mediaType"),photoUrl:t.getValue("url")}):r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_1_PHOTO_W_COMMENT",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:o,mediaType:t.getValue("mediaType")}):i?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),mediaType:t.getValue("mediaType"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:o}),timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:l(t)}}n=e.userModels[0],t=e.eventEntityModelsList.map(function(e){return e.photo});return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_X_PHOTOS",personName:n.getValue("displayname"),personUrl:n.getValue("url"),photoCountString:e.activityData.countEvents,mediaType:t[0].getValue("mediaType")}),timestamp:e.timestamp,avatarData:p(n,"person",e),photos:t.map(l).slice(0,12),hasMultiplePhotos:1<t.length}},loadContextMenuConfig:function(e){var t,n=[],i=[];return e.activityData.photo&&(t=e.activityEntityModels.photo,n.push(new f.muteNotification(e,{eventType:e.type,objectId:t.getValue("id")}))),n.push(new f.sendMessage(e)),n.push(new f.follow(e)),n.push(new f.block(e)),n.forEach(function(e){i.push(e.load())}),E.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},reply_reply:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.group,n=e.userModels;return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_REPLIED_TO_TOPIC",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),topicName:u(E.StringHelper.stripTags(e.activityData.topic.name),e),topicUrl:t.getValue("urlDiscussionPage")+"/"+e.activityData.topic.id+"/"+e.activityData.events[0].reply_id}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_REPLIED_TO_TOPIC",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),topicName:u(E.StringHelper.stripTags(e.activityData.topic.name),e),topicUrl:t.getValue("urlDiscussionPage")+"/"+e.activityData.topic.id+"/"+e.activityData.events[0].reply_id}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_REPLIED_TO_TOPIC",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),topicName:u(E.StringHelper.stripTags(e.activityData.topic.name),e),topicUrl:t.getValue("urlDiscussionPage")+"/"+e.activityData.topic.id,replyContent:u(E.StringHelper.stripTags(e.eventDataList[0].content),e),replyUrl:t.getValue("urlDiscussionPage")+"/"+e.activityData.topic.id+"/"+e.eventDataList[0].replyId}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(n[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_topic_new:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.group,n=e.userModels;return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_CREATED_TOPICS",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),topicsUrl:t.getValue("urlDiscussionPage")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_CREATED_TOPICS",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),topicsUrl:t.getValue("urlDiscussionPage")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_CREATED_TOPIC",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),topicName:u(E.StringHelper.stripTags(e.activityData.topic.name),e),topicUrl:t.getValue("urlDiscussionPage")+"/"+e.activityData.topic.id}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(n[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},contacted:{setupView:function(e){return r.getView("follow-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FOLLOWED_YOU",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url")}),timestamp:e.timestamp,avatarData:p(t[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[];return e.userModels[0],t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_invite:{setupView:function(e){return r.getView("group-invite-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t,n=e.eventEntityModelsList[0].group,i=e.activityEntityModels.photo,o=e.userModels,a=!1,i=l(i);return 1<e.activityData.countUsers?t=2===e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_INVITED_1_PHOTO_TO_GROUPS",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),person2Name:o[1].getValue("displayname"),person2Url:o[1].getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_INVITED_1_PHOTO_TO_GROUPS",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1)}):1<e.activityData.countEvents?t=m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_1_PHOTO_TO_GROUPS",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url")}):(t=m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_1_PHOTO_TO_GROUP",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),groupName:E.flutil.unescape(n.getValue("title")),groupUrl:n.getValue("urlPoolPage")}),a=!0),(1<e.activityData.countUsers||1<e.activityData.countEvents)&&(i.url=i.url+"#sub-photo-groups-section"),{headline:t,timestamp:e.timestamp,subtitle:E.flutil.unescape(n.getValue("title")),subtitleUrl:n.getValue("url"),avatarData:p(o[0],"person",e),photo:i,showButtons:a}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.eventEntityModelsList[0].group;return t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},note:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.photo,n=e.userModels;return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_LEFT_NOTE_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_LEFT_NOTE_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_LEFT_NOTE_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),noteUrl:t.getValue("url"),noteContent:u(E.flutil.unescape(E.StringHelper.stripTags(e.eventDataList[0]._content)),e)}),timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:l(t)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.photo;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},tag:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){if(e.activityData.photo){var t=e.activityEntityModels.photo,n=e.userModels,i=0<t.getValue("title").trim().length;return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?i?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url"),mediaType:t.getValue("mediaType")}):i?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers,r.lang,1),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers,r.lang,1),photoTitle:t.getValue("title"),photoUrl:t.getValue("url"),mediaType:t.getValue("mediaType")}):1<e.activityData.countEvents?i?m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_MULTI_TAGGED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_MULTI_TAGGED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoUrl:t.getValue("url"),mediaType:t.getValue("mediaType")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),tagUrl:t.getValue("url"),tagName:u(E.StringHelper.stripTags(e.eventDataList[0].tagText),e)}),timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:l(t)}}n=e.userModels[0],t=e.eventEntityModelsList.map(function(e){return e.photo});return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_X_PHOTOS",personName:n.getValue("displayname"),personUrl:n.getValue("url"),photoCountString:e.activityData.countEvents}),timestamp:e.timestamp,avatarData:p(n,"person",e),photos:t.map(l).slice(0,12),hasMultiplePhotos:1<t.length}},loadContextMenuConfig:function(e){var t,n=[],i=[];return e.activityData.photo&&(t=e.activityEntityModels.photo,n.push(new f.muteNotification(e,{eventType:e.type,objectId:t.getValue("id")}))),n.push(new f.sendMessage(e)),n.push(new f.follow(e)),n.push(new f.block(e)),n.forEach(function(e){i.push(e.load())}),E.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},people:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t,n=e.userModels,i=e.activityEntityModels.photo,o=e.eventEntityModelsList[0].addedPerson,o=o.getValue("id")===r.getViewer().nsid?1<e.activityData.countEvents?(t=e.eventEntityModelsList.map(function(e){return e.photo}),m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_YOU_IN_X_PHOTOS",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoCountString:e.activityData.countEvents})):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_YOU_IN_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoUrl:i.getValue("url"),mediaType:i.getValue("mediaType")}):1<e.activityData.countUsers?2===e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_PEOPLE_IN_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:i.getValue("title"),photoUrl:i.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_PEOPLE_IN_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoTitle:i.getValue("title"),photoUrl:i.getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1)}):e.activityData.photo?1<e.activityData.countEvents?m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_PEOPLE_IN_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoTitle:i.getValue("title"),photoUrl:i.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_1_PERSON_IN_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),taggedPersonName:o.getValue("displayname"),taggedPersonUrl:o.getValue("url"),photoTitle:i.getValue("title"),photoUrl:i.getValue("url")}):(t=e.eventEntityModelsList.map(function(e){return e.photo}),m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_PEOPLE_IN_X_PHOTOS",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoCountString:e.activityData.countEvents}));return{headline:o,timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:i?l(i):void 0,photos:t?t.map(l).slice(0,12):void 0,hasMultiplePhotos:!!t}},loadContextMenuConfig:function(e){var t,n=[],i=[];return e.eventEntityModelsList[0].addedPerson,e.activityData.photo&&(t=e.activityEntityModels.photo,n.push(new f.muteNotification(e,{eventType:e.type,objectId:t.getValue("id")}))),n.push(new f.sendMessage(e)),n.push(new f.follow(e)),n.push(new f.block(e)),n.forEach(function(e){i.push(e.load())}),E.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},testimonial:{setupView:function(e){return r.getView("testimonial-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TESTIMONIAL",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),testimonialUrl:"/people/"+r.getViewer().nsid+"/#testimonial"+e.eventDataList[0].testimonial.id,testimonialContent:u(E.StringHelper.stripTags(e.eventDataList[0].testimonial.body),e)}),timestamp:e.timestamp,avatarData:p(t[0],"person",e),isApproved:"1"===e.eventDataList[0].testimonial.approved}},loadContextMenuConfig:function(e){var t=[],n=[];return e.userModels[0],t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_user_invite:{setupView:function(e){return r.getView("group-user-invite-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.group,n=e.userModels,i=e.activityData.group;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_YOU_TO_GROUP",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url")}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(n[0],"person",e),showButtons:i.isInvited,isMember:i.isMember}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.group;return t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},flickrmail:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FLICKRMAIL",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),flickrmailUrl:"/mail/"+e.eventDataList[0].id,flickrmailContent:u(E.StringHelper.stripTags(e.eventDataList[0].subject),e)}),timestamp:e.timestamp,avatarData:p(t[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[];return e.userModels[0],t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},photo_comment_mention:{setupView:function(e){return r.flipper.isFlipped("enable-notifications-comment-modal")?r.getView("comment-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()}):r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.photo,n=e.userModels,i=0<(i=u(E.flutil.unescape(E.StringHelper.stripTags(e.eventDataList[0]._content)),e)).length?i:"...";return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO_W_COMMENT",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),commentsUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1)}):r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO_W_COMMENT",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),commentsUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid}):r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENT_MENTIONED_YOU_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENT_MENTIONED_YOU_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:u(E.flutil.unescape(E.StringHelper.stripTags(e.eventDataList[0]._content)),e)}),timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:l(t)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.photo;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},gallery:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels,n=e.activityEntityModels.photo,i=e.eventEntityModelsList[0].gallery;return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_ADDED_1_PHOTO_TO_GALLERIES",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),person2Name:t[1].getValue("displayname"),person2Url:t[1].getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_ADDED_1_PHOTO_TO_GALLERIES",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1)}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_1_PHOTO_TO_GALLERY",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),galleryUrl:i.getValue("url"),galleryTitle:u(E.StringHelper.stripTags(i.getValue("title")),e)}),timestamp:e.timestamp,avatarData:p(t[0],"person",e),photo:l(n)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.photo;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},gallery_comment:{setupView:function(e){return r.flipper.isFlipped("enable-notifications-comment-modal")?r.getView("gallery-comment-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()}):r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels,n=e.activityEntityModels.gallery,i=n.getValue("coverPhotosData"),o=0<i.length?i[0]:void 0,i=0<(i=u(E.flutil.unescape(E.StringHelper.stripTags(e.eventDataList[0]._content)),e)).length?i:"...";return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_ON_1_GALLERY_W_COMMENT",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),person2Name:t[1].getValue("displayname"),person2Url:t[1].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers,r.lang,1),galleryUrl:e.activityData.gallery.url,galleryTitle:u(E.StringHelper.stripTags(e.activityData.gallery.title.content),e),commentUrl:n.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_ON_1_GALLERY",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),person2Name:t[1].getValue("displayname"),person2Url:t[1].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers,r.lang,1),galleryUrl:e.activityData.gallery.url,galleryTitle:u(E.StringHelper.stripTags(e.activityData.gallery.title.content),e)}):r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_ON_1_GALLERY_W_COMMENT",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers,r.lang,1),galleryUrl:e.activityData.gallery.url,galleryTitle:u(E.StringHelper.stripTags(e.activityData.gallery.title.content),e),commentUrl:n.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_ON_1_GALLERY",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers,r.lang,1),galleryUrl:e.activityData.gallery.url,galleryTitle:u(E.StringHelper.stripTags(e.activityData.gallery.title.content),e)}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_ON_1_GALLERY",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),galleryUrl:n.getValue("url"),galleryTitle:u(E.StringHelper.stripTags(n.getValue("title")),e),commentUrl:n.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}),timestamp:e.timestamp,avatarData:p(t[0],"person",e),photo:{url:n.getValue("url"),displayUrl:o?o.url:void 0}}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.gallery;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},share:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.photo,n=e.userModels,i=e.activityData.events[0].shareUrl,o=0<t.getValue("title").trim().length?m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SHARED_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoTitle:t.getValue("title"),photoUrl:i||t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SHARED_1_UNTITLED_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),photoUrl:i||t.getValue("url"),mediaType:t.getValue("mediaType")}),t=l(t);return t.url=i,{headline:o,timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:t}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.photo;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},photo_accepted:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){if(e.activityData.photo){var t=e.eventEntityModelsList[0].group,n=e.activityEntityModels.photo;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_APPROVED_1_PHOTO",groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url")}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(t,"group",e),photo:l(n)}}t=e.activityEntityModels.group;n=e.eventEntityModelsList.map(function(e){return e.photo});return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_APPROVED_X_PHOTOS",groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url"),photoCountString:e.activityData.countEvents}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(t,"group",e),photos:n.map(l).slice(0,12),hasMultiplePhotos:!0}},loadContextMenuConfig:function(e){var t,n=[],i=[];return e.activityData.photo?(t=e.activityEntityModels.photo,n.push(new f.muteNotification(e,{eventType:e.type,objectId:t.getValue("id")})),n.push(new f.muteGroup(e,{groupId:e.eventEntityModelsList[0].group.getValue("id")}))):n.push(new f.muteGroup(e,{groupId:e.activityEntityModels.group.getValue("id")})),n.push(new f.joinGroup(e)),n.forEach(function(e){i.push(e.load())}),E.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},photo_declined:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){if(e.activityData.photo){var t=e.eventEntityModelsList[0].group,n=e.activityEntityModels.photo;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_REJECTED_1_PHOTO",groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url")}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(t,"group",e),photo:l(n)}}t=e.activityEntityModels.group;n=e.eventEntityModelsList.map(function(e){return e.photo});return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_REJECTED_X_PHOTOS",groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url"),photoCountString:e.activityData.countEvents}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(t,"group",e),photos:n.map(l).slice(0,12),hasMultiplePhotos:!0}},loadContextMenuConfig:function(e){var t,n=[],i=[];return e.activityData.photo?(t=e.activityEntityModels.photo,n.push(new f.muteNotification(e,{eventType:e.type,objectId:t.getValue("id")})),n.push(new f.muteGroup(e,{groupId:e.eventEntityModelsList[0].group.getValue("id")}))):n.push(new f.muteGroup(e,{groupId:e.activityEntityModels.group.getValue("id")})),n.push(new f.joinGroup(e)),n.forEach(function(e){i.push(e.load())}),E.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},photo_mention:{},group_blast:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels,n=e.eventEntityModelsList[0].group;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_BLAST",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),groupName:E.flutil.unescape(n.getValue("title")),groupUrl:n.getValue("url"),blastUrl:n.getValue("url"),blastContent:u(E.StringHelper.stripTags(e.eventDataList[0].group.blast),e)}),timestamp:e.timestamp,subtitle:E.flutil.unescape(n.getValue("title")),subtitleUrl:n.getValue("url"),avatarData:p(t[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.eventEntityModelsList[0].group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_rules:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels,n=e.eventEntityModelsList[0].group;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_RULES",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),groupName:E.flutil.unescape(n.getValue("title")),groupUrl:n.getValue("url"),rulesUrl:n.getValue("url"),rulesContent:u(E.StringHelper.stripTags(e.eventDataList[0].group.rules),e)}),timestamp:e.timestamp,subtitle:E.flutil.unescape(n.getValue("title")),subtitleUrl:n.getValue("url"),avatarData:p(t[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.eventEntityModelsList[0].group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_description:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.userModels,n=e.eventEntityModelsList[0].group;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_DESCRIPTION",personName:t[0].getValue("displayname"),personUrl:t[0].getValue("url"),groupName:E.flutil.unescape(n.getValue("title")),groupUrl:n.getValue("url"),descriptionUrl:n.getValue("url"),descriptionContent:u(E.StringHelper.stripTags(e.eventDataList[0].group.description),e)}),timestamp:e.timestamp,subtitle:E.flutil.unescape(n.getValue("title")),subtitleUrl:n.getValue("url"),avatarData:p(t[0],"person",e)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.eventEntityModelsList[0].group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},upload:{},photo_bot_moderated:{extractEntitiesFromResponse:t,setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t,n=e.activityEntityModels.photo,i=l(n),n=n.getValue("safetyLevel");return i.url&&(i.url+="?isModerated=true"),1===n?t=m.intlHTMLMessage({intlName:"notifications.NOTIF_PHOTO_MODERATED_MODERATE",learnUrl:"https://help.flickr.com/en_us/set-the-safety-levels-of-your-flickr-content-or-account-BJlsk6mjym"}):2===n&&(t=m.intlHTMLMessage({intlName:"notifications.NOTIF_PHOTO_MODERATED_RESTRICTED",learnUrl:"https://help.flickr.com/en_us/set-the-safety-levels-of-your-flickr-content-or-account-BJlsk6mjym"})),{headline:t,timestamp:e.timestamp,learnUrl:"https://help.flickr.com/en_us/set-the-safety-levels-of-your-flickr-content-or-account-BJlsk6mjym",photo:i}}},group_join_request:{setupView:function(e){return r.getView("group-join-request-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.group,n=e.userModels;return{headline:1<e.activityData.countUsers?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_REQUESTED_TO_JOIN",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),memberQueueUrl:t.getValue("urlPendingMembersPage")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_REQUESTED_TO_JOIN",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url")}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(n[0],"person",e),showButtons:e.activityData.countUsers<=1}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_photo_request:{setupView:function(e){return r.getView("group-photo-request-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t,n,i=e.eventEntityModelsList.map(function(e){return e.photo})[0],o=e.activityEntityModels.group,a=e.userModels;return 1<e.activityData.countUsers?t=m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_ADDED_PHOTOS_TO_QUEUE",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),pendingQueueUrl:o.getValue("urlPendingPhotosPage")}):1<e.activityData.countEvents?t=m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_PHOTOS_TO_QUEUE",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),pendingQueueUrl:o.getValue("urlPendingPhotosPage")}):(t=m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_1_PHOTO_TO_QUEUE",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),pendingQueueUrl:o.getValue("urlPendingPhotosPage")}),n=l(i)),{headline:t,timestamp:e.timestamp,subtitle:E.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(a[0],"person",e),photo:n,showButtons:e.activityData.countUsers<=1&&e.activityData.countEvents<=1}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.id})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t}).catch(function(e){T.error("error loading context menu config")})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_cover_photo:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.eventEntityModelsList[0].group,n=e.activityEntityModels.photo,i=e.userModels;return{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SET_GROUP_COVER_PHOTO",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url")}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(i[0],"person",e),photo:l(n)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.eventEntityModelsList[0].group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},comment_after_your_comment:{setupView:function(e){return r.flipper.isFlipped("enable-notifications-comment-modal")?r.getView("comment-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()}):r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.photo,n=e.userModels,i=0<(i=u(E.flutil.unescape(E.StringHelper.stripTags(e.eventDataList[0]._content)),e)).length?i:"...";return{headline:1<e.activityData.countUsers?2===e.activityData.countUsers?r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_AFTER_1_PHOTO_W_COMMENT",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_AFTER_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),person2Name:n[1].getValue("displayname"),person2Url:n[1].getValue("url"),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):r.flipper.isFlipped("enable-notifications-comment-modal")?m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_AFTER_1_PHOTO_W_COMMENT",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}):m.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_AFTER_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),personCountString:E.IntlNumber.format(e.activityData.countUsers-1,r.lang,1),photoTitle:t.getValue("title"),photoUrl:t.getValue("url")}):m.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_AFTER_1_PHOTO",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url"),commentUrl:t.getValue("url")+"/#comment"+e.eventDataList[0].commentid,commentContent:i}),timestamp:e.timestamp,avatarData:p(n[0],"person",e),photo:l(t)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.photo;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.sendMessage(e)),t.push(new f.follow(e)),t.push(new f.block(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}},group_join_request_accepted:{setupView:function(e){return r.getView("base-notification-item-view",{activityItem:e}).then(function(e){return e.initialize()})},constructTemplateConfig:function(e){var t=e.activityEntityModels.group;return e.userModels,{headline:m.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_JOIN_REQUEST_ACCEPTED",groupName:E.flutil.unescape(t.getValue("title")),groupUrl:t.getValue("url")}),timestamp:e.timestamp,subtitle:E.flutil.unescape(t.getValue("title")),subtitleUrl:t.getValue("url"),avatarData:p(t,"group",e)}},loadContextMenuConfig:function(e){var t=[],n=[],i=e.activityEntityModels.group;return t.push(new f.muteNotification(e,{eventType:e.type,objectId:i.getValue("id")})),t.push(new f.muteGroup(e,{groupId:i.getValue("id")})),t.push(new f.joinGroup(e)),t.forEach(function(e){n.push(e.load())}),E.Promise.all(n).then(function(){return t})},getContextMenuConfig:function(e){e.item;var t=[];return e.ctxMenuItems.forEach(function(e){e=e.getConfig();e&&t.push(e)}),t}}},h={extractEntitiesFromResponse:function(e){try{return t(e)}catch(e){return E.Promise.resolve({})}},setupView:function(e){var t=e.type;try{return _[t].setupView(e)}catch(e){return}},getTemplateHtml:function(e){var t,n=e.type;try{return t=_[n].constructTemplateConfig(e),i.getTemplate(y[n])(t)}catch(e){return""}},loadContextMenuConfig:function(e){var t=e.type;try{return _[t].loadContextMenuConfig(e)}catch(e){return E.Promise.reject(e)}},getContextMenuConfig:function(e){try{return _[e.item.type].getContextMenuConfig(e)}catch(e){return E.Promise.reject(e)}},getFilterConfig:function(e){return d[e]},convertNotificationModel:function(e){return{id:e.getValue("id"),isSeen:e.getValue("isSeen"),isMuted:e.getValue("isMuted"),type:e.getValue("type"),timestamp:e.getValue("timestamp"),model:e,activityData:e.getValue("activityData"),eventDataList:e.getValue("eventDataList"),userModels:e.getValue("userModels"),activityEntityModels:e.getValue("activityEntityModels"),eventEntityModelsList:e.getValue("eventEntityModelsList")}}};return E.augment(h,E.EventTarget),h}},"@VERSION@",{requires:["event-custom","template-lib-helper","api-helper","intl-number","string-helper","group-status-helper","base-notification-item-view","follow-notification-item-view","testimonial-notification-item-view","group-invite-notification-item-view","comment-notification-item-view","gallery-comment-notification-item-view","hermes-template-notification-core","hermes-template-notif-item-fave","hermes-template-notif-item-comment","hermes-template-notif-item-reply-reply","hermes-template-notif-item-group-topic-new","hermes-template-notif-item-contacted","hermes-template-notif-item-group-invite","hermes-template-notif-item-note","hermes-template-notif-item-tag","hermes-template-notif-item-people","hermes-template-notif-item-testimonial","hermes-template-notif-item-group-user-invite","hermes-template-notif-item-flickrmail","hermes-template-notif-item-photo-comment-mention","hermes-template-notif-item-gallery","hermes-template-notif-item-gallery-comment","hermes-template-notif-item-share","hermes-template-notif-item-photo-accepted","hermes-template-notif-item-photo-declined","hermes-template-notif-item-photo-mention","hermes-template-notif-item-group-blast","hermes-template-notif-item-group-rules","hermes-template-notif-item-group-description","hermes-template-notif-item-upload","hermes-template-notif-item-moderated","hermes-template-notif-item-group-join-request","hermes-template-notif-item-group-photo-request","hermes-template-notif-item-comment-after-your-comment","hermes-template-notif-item-group-cover-photo","hermes-template-notif-item-group-join-request-accepted"],langBundles:["common","relative-dates","notifications","profile","group-admin","photo-card","header","settings-notifications"]}),YUI.add("hermes-lang-profile",function(e,t){e.Intl.add("hermes/profile","en-US",{MEMBER_DESCRIPTION:["Description"],MEMBER_INFO:["Member info"],EMPTY_DESCRIPTION:["Write a little about yourself"],ABOUT_USERNAME:["About ","${username}"],MOST_POPULAR_PHOTOS:["Most popular photos"],MOST_POPULAR_PHOTOS_EMPTY_TITLE:["Your most popular photos will appear here."],MOST_POPULAR_PHOTOS_EMPTY_TEXT:["Set your photos to public for more faves, comments and views."],MOST_POPULAR_PHOTOS_EMPTY_TEXT_2:["For even more exposure, add them to Groups"],HAS_NO_PUBLIC_PHOTOS_YET:["${username}"," hasn't made any photos public yet."],MOST_POPULAR_PHOTOS_GO_TO_CR:["Go to Camera Roll"],TESTIMONIALS:["Testimonials"],PHOTOS_OF:["Photos of ","${username}"],READ_MORE:["Read more"],READ_LESS:["Read less"],EDIT_DESCRIPTION:["Edit description"],EDIT_INFOS:["Edit your profile information"],EDIT_SHOWCASE:["Edit your showcase"],CHANGE_SHOWCASE_PHOTOS:["Change your showcase photos"],SHOWCASE_FULL:["Your showcase is full! Change photos"],SHOWCASE_ALMOST_FULL:["One photo to go, choose well!"],ADD_PHOTOS:["Add photos"],VIEW_ALL:["View all"],THIS_YOUR_SHOWCASE:["This is your showcase."],SHOW_OFF_YOUR_PHOTOS:["Show off up to ","${limit}"," of your photos."],GET_STARTED:["Get started"],CHOOSE_UP_TO_PHOTOS:[{type:"plural",valueName:"limit",options:{one:"Choose up to ${#} more photo",other:"Choose up to ${#} more photos"}}],SELECT_PHOTOS:["Select photos"],SHOWCASE_ALREADY_THERE:["This photo is already in your showcase."],SHOWCASE_ERR:["An error has occurred. Please refresh the page."],BIO_JOINED:["Joined"],BIO_OCCUPATION:["Occupation"],BIO_HOMETOWN:["Hometown"],BIO_CURRENT_CITY:["Current city"],BIO_COUNTRY:["Country"],BIO_WEBSITE:["Website"],BIO_EMAIL:["Email"],BIO_FACEBOOK:["Facebook"],BIO_TWITTER:["Twitter"],BIO_INSTAGRAM:["Instagram"],BIO_PINTEREST:["Pinterest"],BIO_TUMBLR:["Tumblr"],BIO_RELATIONSHIP:["Relationship"],COUNTS_GROUPS:[{type:"plural",valueName:"groupsCount",options:{one:"group",other:"groups"}}],COUNTS_GEOTAGGED:[{type:"plural",valueName:"geoCount",options:{one:"geotagged photo",other:"geotagged photos"}}],COUNTS_GEOTAGS:[{type:"plural",valueName:"geoCount",options:{one:"geotag",other:"geotags"}}],COUNTS_FAVORITES:[{type:"plural",valueName:"favesCount",options:{one:"fave",other:"faves"}}],COUNTS_TAGS:[{type:"plural",valueName:"tagsCount",options:{one:"tag",other:"tags"}}],COUNT_VIEWS:[{type:"plural",valueName:"viewsCount",options:{one:"view",other:"views"}}],BLOCK_USER:["Block user"],FILTER_FAVES:["Most faved"],FILTER_VIEWS:["Most viewed"],FILTER_COMMENTS:["Most commented"],FILTER_INTERESTING:["Most interesting"],AWESOME:["Awesome!"],REFRESH_NOW:["Refresh now to see your showcase."],TOO_MANY_PHOTOS:["Sorry, you can't add more than ","${limit}"," photos to your showcase."],PROFILE_SHARE_FEEDBACK:['This new Flickr Profile is only visible to Alpha Group members. Please share your feedback <a href="',"${url}",'">here</a>.'],PROFILE_SHARE_FEEDBACK_ONBOARDING:['Profiles got a makeover. We really want to know what you think. <a href="',"${url}",'">Send us some feedback!</a>'],PROFILE_CHECK_OUT:['Profiles got a makeover â€” check out your <a href="',"${urlAbout}",'">new About page</a>! Then, <a href="',"${urlFeedback}",'" target="_blank">let us know what you think</a>!'],PROFILE_PHOTO_NOT_PUBLIC:["This photo does not seem to be public."],PROFILE_SAVED_MAGICALLY:["Changes are saved automagically!"],PROFILE_SAVED_AUTO:["Changes are saved automatically!"],SAVING:["Saving"],PLACEHOLDER_SOCIAL:["Your username or profile link"],EVERYONE:["Everyone"],ANY_FLICKR_MEMBER:["Any Flickr Member"],PEOPLE_I_FOLLOW:["People I follow"],FRIENDS_AND_FAMILY:["Friends and family"],ONLY_ME:["Only me"],USER_FOLLOWS_YOU:["${username}"," is following you."],USER_IS_FAMILY:["${username}"," counts you as Family."],USER_IS_FRIEND:["${username}"," counts you as a Friend."],USER_IS_FRIEND_FAMILY:["${username}"," counts you as Friend & Family."],TESTIM_PENDING:["Pending"],TESTIM_EMPTY_SELF:["Nobody has added a testimonial for you yet."],TESTIM_EMPTY_SOMEONE:["Nobody has added a testimonial yet."],TESTIM_EMPTY:["Have something nice to say about ","${username}","?"],TESTIM_WRITE:["Write a testimonial"],TESTIM_POST:["Post"],TESTIM_SHOW_MORE:["View more"],TESTIM_APPROVE:["Approve"],TESTIM_REJECT:["Reject"],TESTIM_SENT_APPROVAL:["Your testimonial will be sent to ","${username}"," for approval."],TESTIM_SENT_APPROVAL_SHOWN:["Your testimonial will be shown once ","${username}"," approves it."],TESTIM_GREAT_TITLE:["Great!"],TESTIM_DELETE_CONFIRM:["Delete this post?"],TESTIM_DELETE_TEXT:["You cannot reverse this action. Are you sure you want to permanently delete this post?"],TESTIM_EDIT_CONFIRM_TITLE:["Edit this post?"],TESTIM_EDIT_CONFIRM_TEXT:["If you choose to edit this post, it will be sent back to the person you're writing about for approval."],TESTIM_EDIT_VISIT_PROFILE:["You can edit this testimonial on ","${username}","'s profile."],TESTIM_EDIT_VISIT_PROFILE_TEXT:["If you choose to edit this post, it will be sent back to ","${username}"," for their approval."],TESTIM_EDIT_VISIT_PROFILE_GO:["Go to profile"],YOUR_SELECTION_HEADER:["Your Selection"],NO_PHOTOS_SELECTED:["No photos selected."],SELECTED:["Selected"],PROFILE_SHOWCASE_TITLE:["Profile showcase"],PROFILE_SHOWCASE_TITLE_SHORT:["Showcase"],PROFILE_WHATS_NEW:["Whatâ€™s new?"],PROFILE_BIO_TOOLTIP:["Add a few more details about yourself to complete your profile."],PROFILE_POPULAR_TOOLTIP:["These are your most popular photos on Flickr. You can choose to have this section visible to everyone or only to you."],PROFILE_PHOTOSOF_TOOLTIP:["You can tag and untag yourself in photos by visiting the â€œPeople in photoâ€ section on the photo page."],PROFILE_PHOTOSOF_MODAL_TITLE:["Untag yourself from this photo ?"],PROFILE_CHECK_IT_OUT:["Check it out"],PROFILE_GOT_IT:["Got it, thanks"],TESTIM_FILTER_RECEIVED:["Received"],TESTIM_FILTER_GIVEN:["Given"],TESTIM_NOTHING_TO_SHOW:["Nothing to show."],TESTIM_POSTED_ON:[{type:"date",valueName:"intlDate",format:"long"}],TESTIM_AUTHOR_SAYS:['<a href="',"${url}",'" class="username">',"${displayname}","</a> says:"],TESTIM_AUTHOR_FOR:['For <a href="',"${url}",'" class="username">',"${displayname}","</a>:"]})},"@VERSION@",{requires:["intl"]}),YUI.add("hermes-lang-group-admin",function(e,t){e.Intl.add("hermes/group-admin","en-US",{RULES_AND_MODERATION:["Rules & Moderation"],READ_UP_ON_GROUPS:['Read up on some ideas about <a class="help-link" href="',"${helpUrl}",'">how to run a happy group</a> on Flickr.'],MODERATE_GROUP_HEADING:["Moderate your group"],MODERATE_GROUP_DESCRIPTION:["Control the flow of submissions into the group pool, and whether or not to allow discussions."],MANAGE_MEMBERS_HEADING:["Manage your members"],MANAGE_MEMBERS_DESCRIPTION:["From here you can promote, temporarily remove or ban your members."],GROUP_RULES_HEADING:["Group rules"],GROUP_RULES_DESCRIPTION:["Create posting rules, and require people to agree before they become a member."],PRIVACY_HEADING:["Privacy"],PRIVACY_DESCRIPTION:["Control what non-members can see on your group page, and your groupâ€™s overall privacy level."],EIGHTEEN_PLUS_HEADING:["18+"],EIGHTEEN_PLUS_DESCRIPTION:["Running an 18+ group? Itâ€™s best to tell people up front."],ABOUT_YOUR_GROUP:["About your group"],NAME_URL_DESCRIPTION_HEADING:["Name/URL/Description"],NAME_URL_DESCRIPTION_DESCRIPTION:["Describe your group; link to an external website."],KEYWORDS_HEADING:["Keywords"],KEYWORDS_DESCRIPTION:["Help people find your group by assigning some keywords that people can search for."],WEB_ADDRESS_HEADING:["Flickr web address"],WEB_ADDRESS_DESCRIPTION:["You can create an alias for your group so you can direct people to an easy-to-read URL, that will look like http://www.flickr.com/groups/alias/."],MEMBER_ROLES_HEADING:["Member Roles"],MEMBER_ROLES_DESCRIPTION:['Give "administrator," "moderator" and "member" more descriptive names that fit your group'],PENDING_ITEMS_TITLE:["Pending items (","${countString}",")"],PENDING_QUEUE_EMPTY:["The pending queue is empty."],NO_BATCH_ACTIONS:["Do not apply batch actions"],REMOVE:["Remove"],BAN:["Ban"],REMOVE_USER_TITLE:['Remove <span class="username">',"${username}","</span>?"],REMOVE_USER_MESSAGE:["When you remove a member, they are temporarily ejected from your group. They will be able to rejoin any time they wish through the normal channels."],BAN_USER_TITLE:['Ban <span class="username">',"${username}","</span>?"],BAN_USER_MESSAGE:["When you ban a member from your group it is permanent (unless you choose to remove the ban!). If you choose to reinstate banned people, this means they are free to rejoin your group by normal means if they wish."],ALSO_REMOVE_ITEMS:['Also remove <span class="username">',"${username}","</span>â€™s items?"],APPROVE:["Approve"],DENY:["Deny"],TAGS_TITLE:["Tags:"],MANAGE:["Manage"],OLDEST_FIRST:["Oldest first"],NEWEST_FIRST:["Newest first"],LOAD_SIZE_TITLE:["Load size:"],BATCH_TITLE:["Batch:"],BATCH_OF_ITEMS_LABEL:["Batch of ",{type:"plural",valueName:"itemCount",options:{one:["${countString}"," item"],other:["${countString}"," items"]}},":"],APPROVE_ALL:["Approve all"],DENY_ALL:["Deny all"],SHOWING_RANGE_OF_PENDING_ITEMS:["Showing ","${minCountString}","-","${maxCountString}"," of ",{type:"plural",valueName:"totalCount",options:{one:["${totalCountString}"," pending item"],other:["${totalCountString}"," pending items"]}}],ITEM_QUEUED_FOR_REMOVAL:["This item is queued for removal."],GO_TO_PHOTO_POOL:["Go to photo pool"],SAVE_FOR_LATER:["Save for later"]})},"@VERSION@",{requires:["intl"]});
