(window.__jsonpFunction__kppdu1nf_q4y7hyuneps__=window.__jsonpFunction__kppdu1nf_q4y7hyuneps__||[]).push([[13],{1377:function(e,t,a){},1378:function(e,t,a){},1379:function(e,t,a){},1380:function(e,t,a){},1381:function(e,t,a){},1382:function(e,t,a){},693:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return n});var g=a(0),_=a.n(g),t=(a(1381),a(11)),S=a(38),j=a(27),m=a(8);const d=Object(t.a)("single-choice-image"),v=({isInactive:e,isActive:t,onChoice:a,data:n,onSetCurrentScreen:i,onCloseInterview:l})=>{var c=Object(g.useCallback)(()=>{a(n.id)},[n.id,a]),s=Object(g.useCallback)(()=>{setTimeout(()=>{Object(m.c)(()=>{void 0!==n.nextScreenId?i(n.nextScreenId):l()})},500)},[n.nextScreenId,l,i]);return _.a.createElement("div",{className:d("item",{isInactive:e}),onPointerDown:c,onPointerUp:s},_.a.createElement("div",{className:d("item-image",{isInactive:e,isActive:t}),style:{backgroundImage:`url(${n.imageSrc})`}}),_.a.createElement("div",{className:d("item-text")},n.title))},u=Object(g.memo)(({data:e,onSetScreen:t,onClose:a,onShow:n,onSubmit:i,viewType:l,publication:c})=>{const s=Boolean(c),[o,r]=Object(S.a)(),[m,u]=Object(g.useState)(null);Object(j.b)({isVisible$:r,onShow(){n(e.answers.map(({id:e})=>e))}});const b=Object(g.useCallback)(e=>{null===m&&(i([e]),u(e))},[m,i]);return _.a.createElement("div",{ref:o,className:d({viewType:l,hasPublication:s})},_.a.createElement("div",{className:d("title")},e.title),e.subtitle?_.a.createElement("div",{className:d("subtitle")},e.subtitle):null,c?_.a.createElement("div",{className:d("publication")},c):null,_.a.createElement("div",{className:d("list")},e.answers.map(e=>_.a.createElement(v,{key:e.id,isInactive:null!==m&&m!==e.id,isActive:m===e.id,onChoice:b,data:e,onSetCurrentScreen:t,onCloseInterview:a}))))});a(1378);var O=a(29),c=a(25);const s=Object(t.a)("message-screen"),b=Object(g.memo)(({data:e,onClose:t,onShow:a,viewType:n})=>{var[i,l]=Object(S.a)();return Object(j.b)({isVisible$:l,onShow(){a([])}}),Object(c.a)(()=>{Object(O.g)(e.autoCloseTimeout)||window.setTimeout(()=>{Object(m.c)(()=>{t()})},e.autoCloseTimeout)}),_.a.createElement("div",{className:s({viewType:n}),ref:i},e.title)});a(1382);var l=a(1167),E=a(1159),h=a(110);const C=Object(t.a)("multi-choice-text"),k=({id:t,isChecked:e,onSetChecked:a,data:n})=>{var i=Object(g.useCallback)(({target:e})=>{a(t,e.checked)},[t,a]),n=_.a.createElement("div",{className:C("item-text")},n.title);return _.a.createElement("div",{className:C("item")},_.a.createElement(l.a,{onChange:i,size:"m",isChecked:e,label:n}))},p=Object(g.memo)(({data:t,onSetScreen:a,onClose:n,onShow:e,onSubmit:i,viewType:l,publication:c})=>{var s="mobile"===l,[o,r]=Object(S.a)();Object(j.b)({isVisible$:r,onShow(){e(t.answers.map(({id:e})=>e))}});const[m,u]=Object(g.useState)({}),[b,d]=Object(g.useState)(!1),v=Object(g.useCallback)((t,a)=>{u(e=>Object.assign({},e,{[t]:a})),d(!1)},[]),p=Object(g.useCallback)(()=>{var e=Object(h.a)(m).filter(e=>m[e]);e.length<t.minAnswersCount?d(!0):(i(e),Object(O.g)(t.submitButton.nextScreenId)?n():a(t.submitButton.nextScreenId))},[m,t.minAnswersCount,t.submitButton.nextScreenId,n,a,i]),w=Object(g.useCallback)(()=>{t.alternativeButton&&(i([]),Object(O.g)(t.alternativeButton.nextScreenId)?n():a(t.alternativeButton.nextScreenId))},[t.alternativeButton,n,a,i]);return _.a.createElement("div",{ref:o,className:C({viewType:l})},_.a.createElement("div",{className:C("title")},t.title),t.subtitle?_.a.createElement("div",{className:C("subtitle")},t.subtitle):null,c?_.a.createElement("div",{className:C("publication")},c):null,_.a.createElement("div",{className:C("list")},t.answers.map((e,t)=>_.a.createElement(k,{id:e.id,isChecked:Boolean(m[e.id]),onSetChecked:v,key:t,data:e}))),_.a.createElement("div",{className:C("button-container")},_.a.createElement("div",{className:C("submit-button-container")},_.a.createElement(E.a,{size:s?"new-xl":"new-l",viewType:"yellow",widthType:s?"wide":void 0,onClick:p,disabled:b,className:C("button")},_.a.createElement("span",{className:C("button-text")},b?t.minAnswersError:t.submitButton.text))),t.alternativeButton?_.a.createElement("div",{className:C("alternative-button-container")},_.a.createElement(E.a,{size:s?"new-xl":"new-l",viewType:s?"regular":"transparent",widthType:s?"wide":void 0,onClick:w,className:C("button")},_.a.createElement("span",{className:C("button-text")},t.alternativeButton.text))):null))});a(1379);var o=a(1296),w=(a(1380),a(16)),y=a(517),N=a(671);const T=Object(w.a)("poll-options"),x=({id:e,active:t,prepare:a,imageSrc:n,imageActiveSrc:i,onPointerDown:l,onPointerMove:c})=>{var s=Object(g.useCallback)(()=>{l(e)},[e,l]),o=Object(g.useCallback)(()=>{c(e)},[e,c]),r=Object(g.useCallback)(e=>(e.preventDefault(),e.stopPropagation(),!1),[]),m=Object(g.useMemo)(()=>n&&i?t&&i?{backgroundImage:`url(${i})`}:{backgroundImage:`url(${n})`}:{},[t,i,n]);return _.a.createElement("div",{className:T("item",{active:t,prepare:a}),style:m,onPointerDown:s,onPointerMove:o,onContextMenu:r})},r=Object(g.memo)(({className:e,initialValue:t=-1,isSingleChoice:i,items:a,onChange:n,isMobile:l})=>{const[c,s]=Object(g.useState)(t),[o,r]=Object(g.useState)(t),[m,u]=Object(g.useState)(!1);Object(N.a)(()=>{m||c===o||(n(c),r(c))},[m,c]);const b=Object(y.a)(()=>{u(!1)}),d=Object(g.useCallback)(e=>{m&&s(e)},[m]),v=Object(g.useCallback)(e=>{s(e),u(!0),window.addEventListener("pointerup",b,{once:!0})},[b]),p=Object(g.useCallback)(()=>{m&&(u(!1),s(o))},[m,o]);return _.a.createElement("div",{className:w.a.mix(T({isMobile:l,isSingleChoice:i,active:!1}),e),onPointerLeave:p},a.map((e,t)=>{var a=i?t===c:t<=c,n=a&&!m,a=a&&m;return _.a.createElement(x,{id:t,key:t,active:n,prepare:a,imageSrc:e.imageSrc,imageActiveSrc:e.imageActiveSrc,onPointerDown:v,onPointerMove:d})}))}),I=Object(g.memo)(({size:e})=>_.a.createElement("div",{style:{height:e}})),f=Object(t.a)("gradation-stars"),B=({answers:t,onSetScreen:a,onSubmit:n,onClose:i})=>{var e=Object(o.a)(e=>{e=t[e];e&&(n([e.id]),Object(O.g)(e.nextScreenId)?i():a(e.nextScreenId))},350);return _.a.createElement(r,{className:f("poll-options"),items:t,onChange:e})},P=Object(g.memo)(({data:e,publication:t,viewType:a,onClose:n,onShow:i,onSubmit:l,onSetScreen:c})=>{var s="mobile"===a,o=Boolean(t),[r,m]=Object(S.a)();Object(j.b)({isVisible$:m,onShow(){i(e.answers.map(({id:e})=>e))}});m=Object(g.useCallback)(()=>{e.skipButton&&(l([]),Object(O.g)(e.skipButton.nextScreenId)?n():c(e.skipButton.nextScreenId))},[e.skipButton,n,c,l]);return _.a.createElement("div",{ref:r,className:f({viewType:a,hasPublication:o})},_.a.createElement("div",{className:f("title")},e.title),e.subtitle&&_.a.createElement("div",{className:f("subtitle")},e.subtitle),t?_.a.createElement("div",{className:f("publication")},t):_.a.createElement(I,{size:4}),_.a.createElement("div",{className:f("list")},_.a.createElement(B,{answers:e.answers,onClose:n,onSubmit:l,onSetScreen:c})),e.skipButton&&_.a.createElement("div",{className:f("button-container")},_.a.createElement(E.a,{size:s?"new-xl":"new-l",viewType:"regular",onClick:m,widthType:s?"wide":void 0,className:f("button")},_.a.createElement("span",{className:f("button-text")},e.skipButton.text))))});a(1377);var M=a(1311),A=a(1299),$=a(218),z=a(236),D=a(90),V=a(95);const F=Object(t.a)("publication"),R=Object(g.memo)(({title:e,type:t,source:a,image:n,video:i,link:l,host:c,mainColor:s,items:o=[],viewType:r,isClickable:m=!0})=>{const u="gif"===t,b="gallery"===t,d=o.filter(e=>"image"===e.type),v=null==i?void 0:i.duration,p=a["title"],w=b?d[0].image.link:n,g=b?d[0].mainColor:s,S=b&&2===d.length,j=b&&1===d.length,O=_.a.createElement("div",{className:F("image",{type:t,isOnlyTwoImages:S,isOnlyOneImages:j}),style:{backgroundImage:w?`url(${w})`:"",backgroundColor:g}},u?_.a.createElement(_.a.Fragment,null,_.a.createElement(M.a,{shifts:6,className:F("cover"),rightBottom:v?_.a.createElement($.a,{time:v,className:F("duration")}):null}),_.a.createElement(D.a,{className:F("play-icon"),icon:z.a,size:"m"})):null),E=e?_.a.createElement(A.a,{className:F("title"),lines:3,lineHeight:18},e):null,h=_.a.createElement(A.a,{className:F("publisher-title"),lines:1,lineHeight:18},p),C=d.length-1,k=d.slice(1,3),y=b&&Boolean(k.length)?_.a.createElement("div",{className:F("image-gallery")},k.map((e,t)=>_.a.createElement("div",{key:e.image.link,className:F("image-gallery-item",{isOnlyTwoImages:S}),style:{backgroundImage:`url(${e.image.link})`,backgroundColor:e.mainColor}},t===k.length-1&&2<C?_.a.createElement("span",{className:F("gallery-count")},"+",C-2):null))):null,N=_.a.createElement(_.a.Fragment,null,O,y,_.a.createElement("div",{className:F("description")},E,h));return m?_.a.createElement(V.b,{className:F({viewType:r,isClickable:m}),host:c,href:l,rel:"noopener noreferrer"},N):_.a.createElement("div",{className:F({viewType:r})},N)});var q=a(23),H=a(72);const n=Object(g.memo)(({screen:e,onSetScreen:t,onClose:a,viewType:n})=>{const i=Object(m.g)(e=>({host:e.params.host||""}))["host"],l=Object(g.useRef)(!1),c=Object(q.b)(),s=Object(g.useMemo)(()=>((e,t)=>{const a=(n=e,i=t.statEvents,l=t.bulkParams,(e,t)=>n(e,Object.assign({},t,{statEvents:i,bulkParams:l})));var n,i,l;return{show:e=>a("interview_show",{bulkReplaceMap:{__answer_ids__:e.join()}}),submit:e=>a("interview_submit",{bulkReplaceMap:{__answer_ids__:e.join()}}),close:()=>a("interview_close")}})(c,e),[c,e]),o=Object(g.useCallback)(()=>{l.current=!0,a()},[a]);Object(H.a)(()=>{l.current||s.close()});var r="publication"in e&&e.publication?_.a.createElement(R,{type:e.publication.type,title:e.publication.title,source:e.publication.source,image:e.publication.image,link:e.publication.link,video:e.publication.video,items:e.publication.items,mainColor:e.publication.mainColor,isClickable:e.publication.itemIsClickable,host:i,viewType:n}):void 0;return _.a.createElement("div",{key:e.id},"message"===e.type?_.a.createElement(b,{data:e,onShow:s.show,onClose:o,viewType:n}):"gradation_stars"===e.type?_.a.createElement(P,{data:e,publication:r,onSetScreen:t,onSubmit:s.submit,onShow:s.show,onClose:o,viewType:n}):"single_choice_image"===e.type?_.a.createElement(u,{data:e,publication:r,onSetScreen:t,onSubmit:s.submit,onShow:s.show,onClose:o,viewType:n}):"multi_choice_text"===e.type?_.a.createElement(p,{data:e,publication:r,onSubmit:s.submit,onShow:s.show,onSetScreen:t,onClose:o,viewType:n}):null)})}}]);
