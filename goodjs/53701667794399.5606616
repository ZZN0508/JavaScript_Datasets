!function(){try{var c="cta-branding",m={},_=0,g=Math.random()<.05,b=null,f=document.createElement("canvas"),h=g?(window.location.href||"").slice(0,200):"";function u(t){return t.offsetHeight+H(t,"margin-top",0)+H(t,"margin-bottom",0)}function O(e){var a=0;if(["border-bottom-width","border-top-width","padding-bottom","padding-top"].forEach(function(t){a+=H(e,t)||0}),e.hasChildNodes())for(var t=e.childNodes,r=0;r<t.length;r++){var n=t[r];n.classList.contains("video-cta-href")||(n=u(n),a+=n)}return a}function H(t,e,a){t=window.getComputedStyle(t);if(!t[e])return a||null;a=parseInt(t[e]);return isNaN(a)?t[e]:a}m.globalConfig={},m.hooks={"item-renderer":function(e,t,a){if(!b){var r,n=e.rbox;n.formatsData=n.formatsData||{},e.formatsData=e.formatsData||{},e.formatsData.sendAbTestEvent=function(t,e,a){var r;g&&(r=this.formatsData.style||{},r={location:h,itemId:this.formatsData.itemId,rating:this.formatsData.rating,price:this.formatsData.price,text:this.formatsData.actionText,type:null!=e?e:"event",description:a,module:c,version:"1.0.75",event:t,cardIndexOnPage:this.formatsData.cardIndex,index:this.formatsData.index,placement:this.formatsData.placement,innerText:this.innerText,config:{borderColor:r.borderColor,color:r.color,fontSize:r.fontSize,isInheritTitleColor:this.formatsData.isInheritTitleColor}},window.TRCImpl.sendAbTestEvent("CTA",JSON.stringify(r)))}.bind(e),e.formatsData.cardIndex=_++,e.formatsData.index=t.itemIndex,e.formatsData.placement=n.placement,e.formatsData.itemId=g?(t["item-id"]||t.id||"").slice(0,40):"";try{var o=t["cta-text"],i=t.fpr||t["cta-price"],s=t["stars-rating"];if(null==b){var l=u("disable-cta-on-custom-module",a);e.formatsData.sendAbTestEvent(l?"disable_custom":"enable_custom");var d=window.TRCImpl&&window.TRCImpl.global&&window.TRCImpl.global["disable-cta-on-custom-module"];if(e.formatsData.sendAbTestEvent(d?"disable_global":"enable_global"),d||l)return void(b=!0);b=!1}if(!o)return;if(e.formatsData.sendAbTestEvent("has_cta_text"),!function(t,e,a){if(!e.isSyndicated||e["is-in-network"])return t.formatsData.sendAbTestEvent("filtered_non_sc"),0;if(a.options&&a.options.trcResponse&&a.options.trcResponse.nup)return t.formatsData.sendAbTestEvent("filtered_next_up"),0;a=!window.TRCImpl||!window.TRCImpl.global||(null==(r=window.TRCImpl.global["enable-cta-with-description"])||r);if(e.description&&!a)return t.formatsData.sendAbTestEvent("filterd_item_with_description"),0;var r=t.detail_order;if(r&&r.length&&"branding"===r[0])return t.formatsData.sendAbTestEvent("filterd_item_branding_before_title"),0;if(!t.link)return t.formatsData.sendAbTestEvent("filtered_no_title"),0;e=t.querySelector(".video-label-box");if(!e)return t.formatsData.sendAbTestEvent("filtered_no_video_label_box"),0;a=e.querySelector(".branding");if(!a)return t.formatsData.sendAbTestEvent("filtered_no_branding"),0;r=a.getBoundingClientRect();if(r&&0<r.width){if(.1<parseFloat(H(a,"margin-left",0))/r.width)return t.formatsData.sendAbTestEvent("filtered_high_margin_left"),0;if(.1<parseFloat(H(a,"margin-right",0))/r.width)return t.formatsData.sendAbTestEvent("filtered_high_margin_right"),0}r=H(a,"position");if(r&&"absolute"===r)return t.formatsData.sendAbTestEvent("filtered_branding_absolute_position_item_renderer"),0;r=a.querySelector(".branding-inner");if(r){r=H(r,"position");if(r&&"absolute"===r)return t.formatsData.sendAbTestEvent("filtered_branding_inner_absolute_position"),0}a=a.querySelector("div.logoDiv");if(a){var n=H(a,"position");if(n&&"absolute"===n)return t.formatsData.sendAbTestEvent("filtered_branding_logo_div_inner_absolute_position"),0}n=t.getBoundingClientRect().width;if(0<n&&n<170)return t.formatsData.sendAbTestEvent("filtered_below_min_width"),0;if(t.rbox.mode_name&&-1<t.rbox.mode_name.indexOf("hero"))return t.formatsData.sendAbTestEvent("filtered_item_in_hero_widget"),0;if(t.rbox.container.querySelector(".story-widget"))return t.formatsData.sendAbTestEvent("filterd_item_in_reco_reel_story_widget"),0;if(t.classList.contains("tbl-next-up-widget-item"))return t.formatsData.sendAbTestEvent("filterd_item_next_up"),0;if(t.querySelector(".added-icon-svg"))return t.formatsData.sendAbTestEvent("filterd_item_branding_has_icon"),0;n=H(e,"height");if(n&&n+10<O(e))return t.formatsData.sendAbTestEvent("filtered_videoLabelBox_smaller_than_children"),0;n=H(e,"boxSizing",null);if(!n||"border-box"!==n){n=e.getBoundingClientRect();if(n&&0<n.width)if(.98<parseFloat(H(e,"width",0))/n.width){n=H(e,"paddingLeft",0),e=H(e,"paddingRight",0);if(0<n||0<e)return t.formatsData.sendAbTestEvent("filtered_padding_on_full_width"),0}}return 1}(e,t,a))return;if(e.formatsData.style={borderColor:u("border-color",a,!0),color:u("title-color",a,!0),fontSize:u("cta-font-size",a,!0)},e.formatsData.isInheritTitleColor=u("inherit-title-color",a,!0),e.formatsData.shouldRenderAsCTA=!0,e.formatsData.actionText=o.slice(0,15),e.formatsData.price=i,s&&(e.formatsData.rating=(r=s,Math.round(2*r)/2)),e.formatsData.isAppInstall=!(!e.formatsData.rating&&!e.formatsData.price),e.formatsData.isAppInstall?e.formatsData.sendAbTestEvent("cta_app_render_candidate"):e.formatsData.sendAbTestEvent("cta_render_candidate"),n.formatsData.isInit)return;n.formatsData.isInit=!0,n.formatsData.hasCTAItem=!0,n.formatsData.isStream="autowidget-template-stream"===n.trc.getProperty(n.mode_name,"widget-creator-layout",n.propertiesOverride),n.formatsData.shouldAdjustAllItemsHeight=!n.formatsData.isStream&&!!(!(f=n.getEffectiveResponsiveRule())||1!==f.cells)}catch(t){throw e.formatsData.sendAbTestEvent(t.message,"error",t.stack.split("\n",2)[1].trim()),t}}var f;function u(t,e,a){e=e&&e.globalTrcResponseJSON&&e.globalTrcResponseJSON.dcga&&e.globalTrcResponseJSON.dcga.pubConfigOverride,e=e&&e[t];return e&&a&&(m.globalConfig[t]=e),e||m.globalConfig[t]}},"list-suffix":function(t,C){var e,R,S,a,n;function I(t,e,a){var r=0,n=window.getComputedStyle(t,e,a);return n&&"none"!==n.content&&(a.formatsData.sendAbTestEvent("has_pseudo_el"),t=n,e=a,n=parseInt(t.width),a=t.content,isNaN(n)&&0<a.length&&(n=B(e,a,t.fontWeight,t.fontSize,t.fontFamily),e.formatsData.sendAbTestEvent("has_text_pseudo_el")),r=n),r}function B(t,e,a,r,n){try{if(null==e||""===e)return null;if(null==r&&(null==n||""===n))return null;if(null==f)return t.formatsData.sendAbTestEvent("measureText_no_canvas"),null;var o=f.getContext("2d");if(null==o)return t.formatsData.sendAbTestEvent("measureText_no_canvas_context"),null;var i=[];if(null!=a&&i.push(a.toString()),null!=r&&i.push(parseInt(r)+"px"),null!=n&&i.push(n),0===i.length)return t.formatsData.sendAbTestEvent("measureText_no_font_parts"),null;var s=i.join(" ");if(null==s||""===s)return t.formatsData.sendAbTestEvent("measureText_empty_font_value"),null;o.font=s;var l=o.measureText(e);return null==l?(t.formatsData.sendAbTestEvent("measureText_no_metrics"),null):l.width}catch(e){return t.formatsData.sendAbTestEvent("filtered_error_measure_text_list_suffix"),null}}function L(t,e,a){var r=O(e);if((!r||0===r)&&(r=H(e,"height"))<=0)return 0;if(!t.formatsData.shouldRenderAsCTA||!a)return t.rbox.formatsData.shouldAdjustAllItemsHeight?r:0;e=t.formatsData.isAppInstall?22:0,a=u(a),a=r+e-a+Math.max(31,a);return a<=r?t.rbox.formatsData.shouldAdjustAllItemsHeight?r:0:a}function o(t,e,a){return t.getBoundingClientRect().height>a?e+"_too_large":null}function i(t,e){return t?null:e+"_not_exists"}function s(t,e){return"none"===H(t,"display","unknown")?e+"_display_none":null}function l(t,e,a,r){t=t.getBoundingClientRect(),e=e.getBoundingClientRect();return t.top>e.bottom?a+"_below_"+r:t.bottom<e.top?a+"_above_"+r:null}function d(t,e,a,r){var n=l(t,e,a,r);if(n)return n;t=t.getBoundingClientRect(),e=e.getBoundingClientRect();return t.left<e.left?a+"_left_border_outside_of_"+r:t.right>e.right?a+"_right_border_outside_of_"+r:t.bottom>e.bottom?a+"_bottom_border_outside_of_"+r:t.top<e.top?a+"_top_border_outside_of_"+r:null}function q(t){return t.querySelector(".item-label-href")}function k(t,e,a){e&&t&&((t=H(t,a))&&(e.style[a]=t))}b||(e=C.boxes,R=!1,S=0,e.forEach(function(e){try{var t=e.rbox.formatsData;if(!t||!t.hasCTAItem)return;if(!e.formatsData.shouldRenderAsCTA&&!t.shouldAdjustAllItemsHeight)return;var a=e.querySelector(".video-label-box");if(!a)return void e.formatsData.sendAbTestEvent("filtered_no_videoLabelBox_list_suffix");if(e.rbox.container.querySelector(".story-widget"))return void e.formatsData.sendAbTestEvent("filterd_item_in_reco_reel_story_widget_list_suffix");var r=a.querySelector(".branding");if(r&&e.formatsData.shouldRenderAsCTA&&e.formatsData.isAppInstall&&function(t,e,a){t.formatsData.sendAbTestEvent("renderedAppInstall");t=function(t){var e,a=document.createElement("span");if(a.classList.add("video-branding-flex-cta-rating"),t.formatsData.price&&((e=document.createElement("span")).innerText=t.formatsData.price,e.classList.add("video-branding-flex-cta-price-wrapper"),a.appendChild(e)),t.formatsData.price&&t.formatsData.rating&&((e=document.createElement("span")).classList.add("video-branding-flex-cta-oval-wrapper"),e.insertAdjacentHTML("beforeend",'<svg class="cta-rating-oval"  width="3px" height="3px" viewBox="0 0 3 3" version="1.1" xmlns="http://www.w3.org/2000/svg">    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(-172.000000, -485.000000)" fill="#666666" fill-rule="nonzero">            <circle cx="173.5" cy="486.5" r="1.5"></circle>        </g>    </g></svg>'),a.appendChild(e)),t.formatsData.rating){for(var r=t.formatsData.cardIndex,n=document.createElement("span"),o=0;o<5;o++){var i=Math.min(Math.max(t.formatsData.rating-o,0),1),i='<svg class="cta-rating-star" height="9px" version="1.1" viewBox="0 0 9 9" width="9px" xmlns="http://www.w3.org/2000/svg">    <g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1">        <linearGradient id="lg'+o+"-"+r+'" x1="0" x2="1" y1="0.5" y2="0.5">            <stop offset="0" stop-color="#737373" stop-opacity="1"/>            <stop offset="'+i+'" stop-color="#737373" stop-opacity="1"/>            <stop offset="'+i+'" stop-color="#737373" stop-opacity="0.5"/>            <stop offset="1" stop-color="#737373" stop-opacity="0.5"/>        </linearGradient>        <g fill="url(#lg'+o+"-"+r+')" fill-rule="nonzero" transform="translate(-21.000000, -19.000000)">            <polygon points="25.5 26.4626165 22.7188471 28 23.25 24.7437694 21 22.4376941 24.1094235 21.9626165 25.5 19 26.8905765 21.9626165 30 22.4376941 27.75 24.7437694 28.2811529 28"></polygon>        </g>    </g></svg>';n.insertAdjacentHTML("beforeend",i)}n.classList.add("video-branding-flex-cta-stars-wrapper"),a.appendChild(n)}return a}(t);e.insertBefore(t,a)}(e,a,r),t.shouldAdjustAllItemsHeight&&(S=Math.max(S,L(e,a,r))),!r)return void e.formatsData.sendAbTestEvent("filtered_no_branding_list_suffix");var n=r.getBoundingClientRect();if(n&&0<n.width){if(.1<parseFloat(H(r,"margin-left",0))/n.width)return void e.formatsData.sendAbTestEvent("filtered_high_margin_left_list_suffix");if(.1<parseFloat(H(r,"margin-right",0))/n.width)return void e.formatsData.sendAbTestEvent("filtered_high_margin_right_list_suffix")}var o=H(a,"height");if(H(a,"max-height")<S)return void e.formatsData.sendAbTestEvent("filtered_videoLabelBox_smaller_than_max_height_list_suffix");if(o)if(o+10<O(a))return void e.formatsData.sendAbTestEvent("filtered_videoLabelBox_smaller_than_children_list_suffix");if(e.formatsData.shouldRenderAsCTA){var i=H(r,"position");if(i&&"absolute"===i)return void e.formatsData.sendAbTestEvent("filtered_branding_absolute_position_list_suffix");var s=r.querySelector("div.logoDiv");if(s){var l=H(s,"position");if(l&&"absolute"===l)return void e.formatsData.sendAbTestEvent("filtered_branding_logo_div_inner_absolute_position_list_suffix")}var d=H((y=a,e.rbox.formatsData.isStream&&y.querySelector(".video-label")||y),"width")-104||0;if(x=e,T=H(D=r,"font-weight"),A=x.formatsData.style.fontSize||H(D,"font-size"),w=H(D,"font-family"),E=I(D,":before",x),D=I(D,":after",x),E+(B(x,x.video_data["branding-text"],T,A,w)||0)+D>=d)return void e.formatsData.sendAbTestEvent("filtered_large_branding_width_list_suffix");if(v=(h=r).querySelector(".branding-inner"),p=h.querySelector(".branding-separator"),h=h.querySelector(".logoDiv"),((v&&TRC.dom.getOuterWidth(v)||0)+(p&&TRC.dom.getOuterWidth(p)||0)+(h&&TRC.dom.getOuterWidth(h)||0)||0)>=d)return void e.formatsData.sendAbTestEvent("filtered_large_branding_parts_width_list_suffix");var f=H(a,"boxSizing",null);if(!f||"border-box"!==f){var u=a.getBoundingClientRect();if(u&&0<u.width&&.98<parseFloat(H(a,"width",0))/u.width){var c=H(a,"paddingLeft",0),m=H(a,"paddingRight",0);if(0<c||0<m)return void e.formatsData.sendAbTestEvent("filtered_padding_on_full_width_list_suffix")}}R=!0,function(t,e,a){t.formatsData.sendAbTestEvent("rendered");var r,n,o,i,s,l,d,f,d=(r=t,n=a,d=document.createElement("a"),o=r,l=n,(n=document.createElement("Button")).type="button",n.classList.add("video-cta-button","video-cta-style"),n.innerText=o.formatsData.actionText,k(l,n,"color"),k(l,n,"font-family"),o=n,d.classList.add("video-cta-href"),d.target="_blank",d.href=(l=r.link,((n=r.rbox).shiftRedirOnclick?l.logger_url:n.attachHeatMapDataToLink(l.logger_url,null))+"&cta=true"),d.ctaButton=o,i=r,s=o,Object.keys(i.formatsData.style).forEach(function(t){i.formatsData.style[t]&&(s.style[t]=i.formatsData.style[t])}),i.formatsData.isInheritTitleColor&&(H(r=i.querySelector(".video-title"),"color").indexOf("rgb(0, 0, 0)")<0&&window.TRCImpl.sendAbTestEvent("CTA_Title_Not_Black",i.formatsData.itemId),k(r,s,"color")),d.appendChild(o),d);(function(t,e,a,r){var n,o=(o=q(n=e))&&n.link&&n.link!==o?q(e):e.link;o&&o.classList.add("video-cta-style"),!e.rbox.isFeedCard&&o&&o.classList.add("non-feed-cta-item"),a&&a.classList.add("video-label-box-cta"),a&&!TRC.Browser.ie&&a.classList.add("video-label-box-cta-non-ie");var o,i,s=a.querySelectorAll(".video-label");if(s)for(var l=0;l<s.length;l++)s[l].classList.add("video-label-flex-cta-item");r&&(o=e,e=t,(r=r).classList.add("video-branding-flex-cta-item"),o.rbox.formatsData.isStream&&(i=H(r,"margin-top"))?e.style.marginTop=i+1+"px":r.classList.add("video-branding-flex-cta-item-no-stream"),r.style.order=1),a.appendChild(t)})(d,t,e,a),f=t,d.ctaButton.onclick=function(){f.formatsData.sendAbTestEvent("cta_button_clicked")},t.formatsData.renderedCtaButton=!0}(e,a,r),a.classList.contains("video-label-box-cta")&&(g=e,(_=C).fixResponsiveBoxTitleAndDesc(g),window.TRC.dom.on(window,"resize",function(){_.fixResponsiveBoxTitleAndDesc(g)}),g.video_data&&(b=_.getDetailSpansFromLabelsBoxes("branding",g)).length&&setTimeout(function(){for(var t=0;t<b.length;t++)_.fixBoxOverflow(b[t],g.video_data["branding-text"],!0,!0)},0))}}catch(t){throw e.formatsData.sendAbTestEvent(t.message,"error",t.stack.split("\n",2)[1].trim()),t}var _,g,b,h,v,p,D,x,T,A,w,E,y}),R&&e.forEach(function(t){!function(t,e){var a=t.querySelector(".video-label-box");if(t.rbox.formatsData.shouldAdjustAllItemsHeight)return e<=0||(a.style.height=e+"px");e=a.querySelector(".branding"),t=L(t,a,e);t<=0||(a.style.height=t+"px",0<(e=H(a,"max-height",0))&&e<t&&(a.style.maxHeight=t+"px"))}(t,S)}),g&&(a=[],e.forEach(function(t){t.formatsData.renderedCtaButton&&a.push(t)}),a.length<=0||(n=!1,window.TRC.dom.on(window,"scroll",function(){if(!n){var e=a[0];try{var r=!1;if(a.forEach(function(t){var e,a;r||(e=(a=t).getBoundingClientRect(),a=(t=a.ownerDocument).defaultView||t.parentWindow,0<=e.top&&0<=e.left&&e.bottom<=(a.innerHeight||t.clientHeight)&&e.right<=(a.innerWidth||t.clientWidth)&&(n=r=!0))}),!r)return;setTimeout(function(){try{a.forEach(function(t){t.formatsData.sendAbTestEvent("visible","report");var e=t.querySelector(".video-label-box"),a=e?e.querySelector(".video-cta-href"):null,r=a?a.querySelector(".video-cta-button"):null,n=e?e.querySelector(".branding"):null,a=i(e,"videoLabelBox")||i(a,"ctaAnchor")||i(r,"ctaButton")||i(n,"branding")||s(a,"ctaAnchor")||s(r,"ctaButton")||d(a,t,"ctaAnchor","videoCube")||d(a,e,"ctaAnchor","videoLabelBox")||d(r,a,"ctaButton","ctaAnchor")||l(a,n,"ctaAnchor","branding")||(e=n,n=a.getBoundingClientRect(),e=e.getBoundingClientRect(),0===n.width||0===n.height||0===e.width||0===e.height||n.left>e.right||n.right<e.left||n.top>e.bottom||n.bottom<e.top?null:"ctaAnchor_intersects_with_branding")||o(r,"ctaButton",29)||o(a,"ctaAnchor",29);a&&t.formatsData.sendAbTestEvent(a,"report")})}catch(t){e.formatsData.sendAbTestEvent("error_reporting_with_timeout","report",t.message)}},3e3)}catch(t){e.formatsData.sendAbTestEvent("error_reporting","report",t.message)}}}))))}},window.TRC.customHooks[c]=m}catch(t){window.__trcError("Error in CTA module: "+t.message)}}();
