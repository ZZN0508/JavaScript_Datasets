!function(){var u,e=(u=0,(i={exports:{}}).exports=function(e,t,n){"function"==typeof t&&(n=t,t={});var i,r,o=(t=t||{}).prefix||"__jp",a=t.name||o+u++,s=t.param||"callback",c=null!=t.timeout?t.timeout:6e4,o=encodeURIComponent,t=document.getElementsByTagName("script")[0]||document.head;function l(){i.parentNode&&i.parentNode.removeChild(i),window[a]=d,r&&clearTimeout(r)}return c&&(r=setTimeout(function(){l(),n&&n(new Error("Timeout"))},c)),window[a]=function(e){l(),n&&n(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+s+"="+o(a)).replace("?&","?"),(i=document.createElement("script")).src=e,t.parentNode.insertBefore(i,t),function(){window[a]&&l()}},i.exports);function d(){}var t,h,a,n=(t=e,(o={exports:{}}).exports={template:function(o,e){function a(e){return"\\"+n[e]}var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},s=/\\|'|\r|\n|\u2028|\u2029/g;e={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var i,t=RegExp([(e.escape||t).source,(e.interpolate||t).source,(e.evaluate||t).source].join("|")+"|$","g"),c=0,l="__p+='";o.replace(t,function(e,t,n,i,r){return l+=o.slice(c,r).replace(s,a),c=r+e.length,t?l+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?l+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(l+="';\n"+i+"\n__p+='"),e}),l+="';\n",l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(l=!e.variable?"with(obj||{}){\n"+l+"}\n":l)+"return __p;\n";try{i=new Function(e.variable||"obj","_",l)}catch(e){throw e.source=l,e}t=function(e){return i.call(this,e)},e=e.variable||"obj";return t.source="function("+e+"){\n"+l+"}",t},getBannerData:function(n,i,e){"sc_hd_topbanner"===e?window.TOP_BANNER_DATA&&i.call(this,window.TOP_BANNER_DATA,n):t("//marketing.alibaba.com/queryNicheMaterialList.do?locale="+window.alibabaHomeLocale+"&nicheRequests="+encodeURI(JSON.stringify(n)),{timeout:2e3},function(e,t){e&&i.call(this,!1,n),i.call(this,t,n)}.bind(this))},extend:function(){var e,t,n,i,r=!1,o=arguments.length,a=1,s=arguments[0]||{};for("boolean"==typeof s&&(r=s,s=arguments[a]||{},a++),"object"!=typeof s&&(s={});a<o;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],r&&i&&"object"==typeof i?s[e]=extend(r,n,i):void 0!==i&&(s[e]=i);return s}},o.exports),i=(I=x={},h=decodeURIComponent,a=encodeURIComponent,x.get=function(e,t){c(e),t="function"==typeof t?{converter:t}:t||{};var n=function(e,t){var n,i,r,o={};if(g(e)&&0<e.length)for(var a=t?h:m,s=e.split(/;\s/g),c=0,l=s.length;c<l;c++){if((r=s[c].match(/([^=]+)=/i))instanceof Array)try{n=h(r[1]),i=a(s[c].substring(r[1].length+1))}catch(e){}else n=h(s[c]),i="";n&&(o[n]=i)}return o}(document.cookie,!t.raw);return(t.converter||m)(n[e])},x.set=function(e,t,n){c(e);var i=(n=n||{}).expires,r=n.domain,o=n.path,e=e+"="+(t=!n.raw?a(String(t)):t),t=i;return"number"==typeof t&&(t=new Date).setDate(t.getDate()+i),t instanceof Date&&(e+="; expires="+t.toUTCString()),s(r)&&(e+="; domain="+r),s(o)&&(e+="; path="+o),n.secure&&(e+="; secure"),document.cookie=e},x.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)},I);function g(e){return"string"==typeof e}function s(e){return g(e)&&""!==e}function c(e){if(!s(e))throw new TypeError("Cookie name must be a non-empty string")}function m(e){return e}var l,r,o=(l=i,r={},p.prototype={attrs:{isLoggedIn:!(e={exports:{}}),isNewUser:!1,isFirstIn:!0,country:"",firstName:"",lastName:"",serviceType:"",memberSeq:"",locale:""},get:function(e){return this.attrs[e]},set:function(e,t){this.attrs[e]=t},setup:function(){var e={};if(l.get("xman_us_f"))for(var t=l.get("xman_us_f").split("&"),n=t.length;n--;){var i=t[n].split("=");e[i[0]]=i[1]}var r=l.get("xman_us_t"),o=l.get("xman_us_f"),a=/x_user=([^&"]+)/;return r&&-1!==r.indexOf("sign=y")?this.set("isLoggedIn",!0):this.set("isLoggedIn",!1),o&&a.test(o)&&(o.match(a),5<=(o=(o=RegExp.$1).split("|")).length&&(this.set("country",o[0]),this.set("firstName",o[1].replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.set("lastName",o[2].replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.set("serviceType",o[3]),this.set("memberSeq",o[4]))),""!==this.get("memberSeq")&&this.set("isNewUser",!0),""===l.get("ali_intl_firstIn")&&this.set("isFirstIn",!0),l.get("intl_locale")?this.set("locale",l.get("intl_locale")):(o=e.x_locale)?this.set("locale",o):this.set("locale","en_US"),this}},r=(new p).setup(),e.exports={getIsNewUser:function(){return r.setup(),e=!0,""!==r.get("memberSeq")&&(r.set("isNewUser",!1),e=!1),e;var e},getServiceType:function(){return r.setup(),r.get("serviceType")}},e.exports);function p(){}var f,b,v,y,_,w,x={exports:{},exports:{addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},getEvent:function(e){return e||window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getRelatedTarget:function(e){return e.relatedTarget||e.toElement||e.formElement||null},getButton:function(e){if(document.implementation.hasFeature("MouseEvents","2.0"))return e.button;switch(e.button){case 0:case 1:case 3:case 5:case 7:return 0;case 2:case 6:return 2;case 4:return 1}},getWheelDelta:function(e){return e.wheelDelta||40*-e.detail},getCharCode:function(e){return"number"==typeof e.charCode?e.charCode:e.keyCode}}}.exports,I={exports:{},exports:function(e,t,n,i){var r=(r=e?e.replace(/_\d+x\d+(xz)?\.(png|jpg|jpeg)(_\.webp)?/,""):"").replace(/http(s?):/g,""),e=null;/sc0[12]\.alicdn\.com/.test(r)?(r=r.replace(/sc0[12]\.alicdn\.com/,"i.alicdn.com/sc01"),e=t):/img\.alicdn\.com/.test(r)?(r=r.replace(/img\.alicdn\.com/,"i.alicdn.com/img"),e=i):/i\.alicdn\.com/.test(r)&&(e=t||i);i="",i=e?"_"+e+"x"+e:"";return n&&(i+="xz"),r=e?r+i+".jpg":r}}.exports,i={exports:{},exports:'<div class="sc-hd-banner-container">\n  <div class="banner-content">\n      <a \n        class="J-banner-placeholder banner-placeholder" \n        data-role="<%=type%>" \n        target="_blank" \n        href="<%= bannerInfo.bgLink %>" \n        title="Check it Now" \n        style="background-image:url(<%= bannerInfo.bgImage %>);" \n        data-goldlog="pos=tbannerclick&val=viewmore&type=<%=type%>">\n      </a>\n      <% if(linkNumber >= 4 && linkNumber <= 7) { %>\n        <div class="banner-subitem-list">\n            <% for(var i = 1; i <= linkNumber; i++) {  %>\n              <% var link = "banner" + i  + "Link"; %>\n              <div class="banner-subitem">\n                <a class="J-subitem banner-subitem-link banner-subitem-link-type-<%= style.hoverAniType %>" target="_blank" href="<%= bannerInfo[link] %>" style="width:<%= style.bgWidth %>px;" data-goldlog="index=<%=i%>"></a>\n              </div>\n            <% } %>\n          </div>\n      <% } %>\n      <% if(tabNumber >= 4 && tabNumber <= 7) { %>\n        <div class="banner-subitem-list new-banner-subitem-list">\n            <% for(var i = 0; i < tabNumber; i++) {  %>\n              <div class="banner-subitem"  data-ctrdot="<%= tabInfo[i].realCtrParam %>">\n                <a \n                  title="<%= tabInfo[i].venueCopy %>" \n                  data-goldlog="pos=tbannerclick&val=item&type=<%=type%>&blockId=<%=tabInfo[i].blockId%>&index=<%=i%>&clickParam=<%=tabInfo[i].clickParam%>" \n                  class="J-subitem banner-subitem-link banner-subitem-link-type-<%= style.hoverAniType %>" \n                  target="_blank" \n                  href="<%= tabInfo[i].linkUrl %>" \n                  style="width:<%= style.bgWidth %>px;background-color:<%= style.bottomColor %>;"\n                >\n                  <img class="banner-subitem-image" src="<%=tabInfo[i].imgUrl %>"  />\n                  <span class="banner-subitem-copy" style="width:<%=style.boxWidth%>px;color:<%= style.textColor %>"><%= tabInfo[i].venueCopy %></span>\n                </a>\n              </div>\n            <% } %>\n          </div>\n      <% } %>\n  </div>\n</div>'}.exports,i=(e={exports:{}},f=n,b=o,v=x,y=I,_=i,C.prototype={attrs:{nicheCode:"",dynamicNicheCode:"",tinyImgUrls:["sc01.alicdn.com/kf/","sc02.alicdn.com/kf/","img.alicdn.com/tfs/"],type:"",appName:"",validKey:"",isTopBanner:!(w={7:{bgWidth:132,boxWidth:64},6:{bgWidth:124,boxWidth:80},5:{bgWidth:160,boxWidth:112},4:{bgWidth:210,boxWidth:156}}),blackList:[],whiteList:[]},get:function(e){return this._attrs[e]},set:function(e,t){this._attrs[e]=t},initAttrs:function(e){this._attrs=f.extend({},this.attrs,e)},isInBlackList:function(){var e,t,n=!1,i=this.get("blackList");if(i&&0<i.length)for(var r=0,o=i.length;r<o;r++)if("string"==typeof i[r]&&-1!==window.location.href.indexOf(i[r])){n=!0;break}!1===n&&(e=b.getIsNewUser(),0<=(t=this.get("validKey")).indexOf("!newuser")?n=!0===e:0<=t.indexOf("newuser")&&(n=!0!==e)),!1===n&&(a=b.getServiceType(),t=this.get("validKey"),"string"==typeof a&&"string"==typeof t&&""!==t&&(n=0<=t.indexOf("!")?0<=t.indexOf("!"+a):!(0<=t.indexOf(a))));var a=this.get("whiteList"),s=this.get("appName");return a&&a.forEach(function(e,t){e.appName===s&&(n=!0,(e.matchUrls||[]).forEach(function(e,t){-1!==window.location.href.indexOf(e)&&(n=!1)}.bind(this)))}.bind(this)),n},formatData:function(e,t){if(200===(e=e||{}).code){var n=(e.data||{}).nicheVoList,e={};try{if(n&&0<n.length){var i,r,o=n.filter(function(e){return e.nicheCode===t[0].nicheCode})[0];return o?(o=o.materialVoList[0].universalMaterialMap,e.bannerInfo=o,e.tabNumber=0,1!==t.length&&1!==n.length&&((i=n.filter(function(e){return e.nicheCode===t[1].nicheCode||"ICBU_PC_TOP_BANNER_PLAN_B"===e.nicheCode})[0]).subNicheVoList&&0!==i.subNicheVoList.length?(r=i.subNicheVoList.sort(function(e,t){e=e.subNicheCode.match(/\d+$/)||0;return codeY=t.subNicheCode.match(/\d+$/)||0,e=Number(e[0]),codeY=Number(codeY[0]),e-codeY}.bind(this)),e.tabInfo=r.map(function(e){e=e.materialVoList[0];return{imgUrl:e.imgUrl,linkUrl:e.linkUrl,venueCopy:e.venueCopy,blockId:e.venueId,clickParam:e.clickParam,realCtrParam:e.realCtrParam}}),e.tabNumber=r.length):i.materialVoList&&0!==i.materialVoList.length&&(e.tabInfo=i.materialVoList.map(function(e){return{imgUrl:e.imgUrl,linkUrl:e.linkUrl+"&deliveryId="+e.deliveryId+"&topOfferIds="+e.productId+"&categoryIds="+(e.extendMap&&e.extendMap.categoryId2),venueCopy:e.venueCopy,blockId:e.venueId,clickParam:e.clickParam,realCtrParam:e.realCtrParam}}),e.tabNumber=i.materialVoList.length)),e):void 0}}catch(e){}}},init:function(e){this.initAttrs(e),this.get("isTopBanner")&&!0===this.isInBlackList()||(this.current=!1,(e=[]).push({nicheCode:this.get("nicheCode")}),this.get("dynamicNicheCode")&&e.push({nicheCode:this.get("dynamicNicheCode")}),this.get("isTopBanner")?this.set("type","sc_hd_topbanner"):this.set("type","sc_hd_bottombanner"),f.getBannerData(e,this.showPage.bind(this),this.get("type")))},showPage:function(e,t){this.current=this.formatData(e,t),this.current?(this.current.tabInfo&&0!==this.current.tabInfo.length&&this.resetTinyImageUrl(),this.renderUI()):"sc_hd_topbanner"!==this.get("type")||(t=document.getElementsByClassName("sc-hd-top-banner-container"))&&t[0]&&(t=t[0]).parentNode.removeChild(t)},setStyle:function(e){var t=parseInt(this.current.bannerInfo.linkNumber,10)||0,n=e.tabNumber,i=this.get("configuration");return e.linkNumber=t,e.style=w[t||n]||{},e.style.bannerHeight=i.bannerHeight||60,e.style.textColor=i.textColor||"#000",e.style.bottomColor=i.bottomColor||"#fff",e.style.hoverAniType=i.hoverAniType||"1",e},renderUI:function(){var e,t=this.current||{},n=null;(t=this.setStyle(t)).type=this.get("type"),t.bannerInfo&&t.bannerInfo.bgImage&&(t.bannerInfo.bgImage=y(t.bannerInfo.bgImage)),t.tabInfo&&0!==t.tabInfo.length&&t.tabInfo.forEach(function(e){e.imgUrl=y(e.imgUrl,50,null,50)}),this.elementStr=f.template(_)(t),!0===this.get("isTopBanner")?(n=document.getElementsByClassName("sc-hd-top-banner-container")[0])?(n.innerHTML=this.elementStr,n.setAttribute("data-spm","sc_hd_topbanner"),this.element=n):((e=document.createElement("div")).innerHTML=this.elementStr,e.setAttribute("data-spm","sc_hd_topbanner"),t=document.body.children,document.body.insertBefore(e,t[0]),this.element=e):(n=document.getElementsByClassName("sc-hd-global-bottom-banner")[0])&&(n.innerHTML=this.elementStr,n.setAttribute("data-spm","sc_hd_bottombanner"),this.element=n),this.element&&this.bindUI()},bindUI:function(){for(var e=this.element.querySelectorAll("[data-goldlog]"),t=0;t<e.length;t++){var n=e[t];v.addHandler(n,"click",function(e){e=v.getEvent(e),e=e.currentTarget||e.srcElement;this.goldlog(e)}.bind(this))}this.goldLogDot()},resetTinyImageUrl:function(){var e=this.current.tabInfo,a=this.get("tinyImgUrls"),s=[];e.forEach(function(n,e){var t,i,r,o=!1;a.forEach(function(e,t){-1!==n.imgUrl.indexOf(e)&&(o=!0)}),!0===o&&(t=n.imgUrl.match(/\.jpg|\.png/gi)||[],i=n.imgUrl.match(/(\.jpg|\.png)$/gi)||[],r=".jpg",-1!==n.imgUrl.indexOf("alicdn.com/kf/")&&(r=i[0]),1===t.length&&1===i.length&&(n.imgUrl=n.imgUrl+"_80x80"+r)),s.push(n)}.bind(this)),this.current.tabInfo=s},goldlog:function(e){var t=e.getAttribute("data-goldlog"),n=window.SC_HD_TOP_BANNER_DATA.appName||"";!window.goldlog||(e=window.goldlog).record&&e.record("/sc.sc_header_footer.tb","CLK",t+"&a_n="+n+"&niche="+this.get("nicheCode"),"H47730849")},goldLogDot:function(){var e="pos=tbanner&type="+this.get("type");this.current.tabInfo&&(e+="blockIds="+this.current.tabInfo.map(function(e){return e.blockId||""}).join(","));var t,n=window.SC_HD_TOP_BANNER_DATA.appName||"";!window.goldlog||(t=window.goldlog).record&&t.record("/sc.sc_header_footer.tbexp","EXP",e+"&a_n="+n+"&niche="+this.get("nicheCode"),"H1482419027")}},window.GlobalTopBanner=C,window.SCHdTopBanner=new C,e.exports=window.SCHdTopBanner,e.exports);function C(){}e={exports:{}},i=i,window.SCHD_COMS=window.SCHD_COMS||{},window.SCHD_COMS.TopBanner=i,e.exports=i,e.exports}();
