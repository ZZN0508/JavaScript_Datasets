!function(t){t.fn.countdown=function(e,s){var l=t.extend({date:null,offset:null,day:"Day",days:"Days",hour:"Hour",hours:"Hours",minute:"Minute",minutes:"Minutes",second:"Second",seconds:"Seconds"},e);l.date||t.error("Date is not defined."),Date.parse(l.date)||t.error("Incorrect date format, it should look like this, 12/24/2012 12:00:00.");var c=this,p=function(){return new Date},g=setInterval(function(){if((o=new Date(l.date)-p())<0)return clearInterval(g),void(s&&"function"==typeof s&&s());var e=36e5,t=Math.floor(o/864e5),a=Math.floor(o%864e5/e)+24*t,n=Math.floor(o%e/6e4),i=Math.floor(o%6e4/1e3),t=2<=String(t).length?t:"0"+t,a=2<=String(a).length?a:"0"+a,n=2<=String(n).length?n:"0"+n,i=2<=String(i).length?i:"0"+i,r=1===t?l.day:l.days,d=1===a?l.hour:l.hours,e=1===n?l.minute:l.minutes,o=1===i?l.second:l.seconds;c.find(".days").text(t),c.find(".hours").text(a),c.find(".minutes").text(n),c.find(".seconds").text(i),c.removeClass("notVisible"),c.find(".days_text").text(r),c.find(".hours_text").text(d),c.find(".minutes_text").text(e),c.find(".seconds_text").text(o)},1e3)}}(jQuery);var Snapdeal=Snapdeal||{};Snapdeal.platinumBanners=function(n){function e(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),a=0;a<e.length;a++)if(t&&void 0!==t.style[e[a]])return e[a];return!1}var i,r,d,t,o=n("html").hasClass("ie8")||n("html").hasClass("ie9")||0==e();return o||(t=n(".main-banner-wrapper").css("width"),n(".main-banner-wrapper").css("max-width",t),n(".banner-image").css("width",t)),0==e()&&n("html").addClass("no-transform"),d={timer:null,legendTimer:null,clicked:!1,bannerWidth:parseInt(n(".banner-image").css("width")),bannerSlider:parseInt(n(".banner-image").css("width")),lastTransform:parseInt(n(".banner-image").css("width"))*parseInt(n(".banner-image").not(".banner-clone").length),finalTransform:parseInt(n(".banner-image").css("width"))*(parseInt(n(".banner-image").not(".banner-clone").length)+1),slideClick:!1},r={bannerImage:n(".banner-image"),bannerItem:n(".banner-item"),topBanner:document.getElementById("top-banner"),topBan:n("#top-banner"),prevBtn:n(".prev"),nextBtn:n(".next"),bannerWrapper:n(".main-banner-wrapper"),bannerTimer:document.getElementById("homePagePlatinumTimer")&&parseInt(document.getElementById("homePagePlatinumTimer").value),homePagePlatinumHoverTimer:document.getElementById("homePagePlatinumHoverTimer")&&parseInt(document.getElementById("homePagePlatinumHoverTimer").value)},i={_init:function(e){i._bindEvents(e),i._afterWindowLoad()},_bannerTimer:function(e){setTimeout(function(){0==r.bannerImage.filter(".shown").length&&e.addClass("shown")},20)},_moveSlider:function(){d.slideClick,d.bannerSlider<=d.finalTransform&&r.topBanner&&(r.topBanner.style.transform="translate3d(-"+parseInt(d.bannerSlider)+"px, 0px, 0px)",r.topBanner.style.WebkitTransform="translate3d(-"+parseInt(d.bannerSlider)+"px, 0px, 0px)",r.topBanner.style.MozTransform="translate3d(-"+parseInt(d.bannerSlider)+"px, 0px, 0px)"),n("#top-banner").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){e.target===e.currentTarget?(r.topBanner&&(r.topBanner.style.transition="",r.topBanner.style.WebkitTransition="",r.topBanner.style.MozTransition=""),r.topBan.removeClass("sliderTransition"),d.slideClick):d.slideClick=!1})},_calculateSlider:function(e){d.slideClick=!0;var t="",a=(r.bannerImage.filter(".shown"),parseInt(r.bannerImage.not(".banner-clone").length));"next"==e&&d.bannerSlider<=d.lastTransform?(t=r.bannerImage.filter(".shown").eq(0).next(),d.bannerSlider=d.bannerSlider+d.bannerWidth):"prev"==e&&(t=r.bannerImage.filter(".shown").eq(0).prev(),d.bannerSlider=d.bannerSlider-d.bannerWidth),d.bannerSlider=Math.abs(d.bannerSlider),d.bannerSlider<=d.finalTransform&&r.topBanner&&(r.topBanner.style.transform="translate3d(-"+parseInt(d.bannerSlider)+"px, 0px, 0px)",r.topBanner.style.WebkitTransform="translate3d(-"+parseInt(d.bannerSlider)+"px, 0px, 0px)",r.topBanner.style.MozTransform="translate3d(-"+parseInt(d.bannerSlider)+"px, 0px, 0px)"),n("#top-banner").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){e.target===e.currentTarget&&(t&&t.attr("index")==parseInt(a)?0==r.bannerImage.filter(".banner-active").attr("index")&&(setTimeout(function(){r.topBanner&&(r.topBanner.style.transform="translate3d(-"+d.bannerWidth+"px, 0px, 0px)",r.topBanner.style.WebkitTransform="translate3d(-"+d.bannerWidth+"px, 0px, 0px)",r.topBanner.style.MozTransform="translate3d(-"+d.bannerWidth+"px, 0px, 0px)")},10),r.topBanner&&(r.topBanner.style.transition="",r.topBanner.style.WebkitTransition="",r.topBanner.style.MozTransition=""),r.topBan.removeClass("sliderTransition"),d.bannerSlider=d.bannerWidth):t&&-1==t.attr("index")?r.bannerImage.filter(".banner-active").attr("index")==a-1&&(r.topBanner&&(r.topBanner.style.transform="translate3d(-"+parseInt(d.lastTransform)+"px, 0px, 0px)",r.topBanner.style.WebkitTransform="translate3d(-"+parseInt(d.lastTransform)+"px, 0px, 0px)",r.topBanner.style.MozTransform="translate3d(-"+parseInt(d.lastTransform)+"px, 0px, 0px)",r.topBanner.style.transition="",r.topBanner.style.WebkitTransition="",r.topBanner.style.MozTransition=""),r.topBan.removeClass("sliderTransition"),d.bannerSlider=parseInt(d.lastTransform)):setTimeout(function(){r.topBanner&&(r.topBanner.style.transition="",r.topBanner.style.WebkitTransition="",r.topBanner.style.MozTransition=""),r.topBan.removeClass("sliderTransition")},1)),d.slideClick=!1}),t&&!t.hasClass("banner-clone")?"next"==e?r.bannerImage.filter(".shown").removeClass("banner-active").eq(0).next().addClass("banner-active"):"prev"==e&&r.bannerImage.filter(".shown").removeClass("banner-active").eq(0).prev().addClass("banner-active"):t&&t.hasClass("banner-clone")&&(r.bannerImage.filter(".shown").removeClass("banner-active"),"next"==e?r.bannerImage.eq(1).addClass("banner-active"):"prev"==e&&r.bannerImage.eq(a).addClass("banner-active"))},_showBanner:function(){o||i._calculateSlider("next");var e,t=r.bannerImage.filter(".shown").eq(0).next();e=(o?r.bannerImage.filter(".shown").removeClass("shown").css("display","none"):r.bannerImage.filter(".shown").removeClass("shown")).eq(0).next(),-1==(e=t.hasClass("banner-clone")?r.bannerImage.eq(1):e).attr("index")&&(e=r.bannerImage.eq(0)),r.bannerItem.removeClass("active");t=r.bannerItem.eq(e.attr("index"));e.css({display:"block"}),t.addClass("active"),i._bannerTimer(e)},_showBannerPrev:function(){o||i._calculateSlider("prev");var e,t=parseInt(r.bannerImage.not(".banner-clone").length),a=r.bannerImage.filter(".shown").eq(0).prev();-1==(e=(o?r.bannerImage.filter(".shown").removeClass("shown").css("display","none"):r.bannerImage.filter(".shown").removeClass("shown")).eq(0).prev()).index()&&(e=r.bannerImage.eq(-1)),a.hasClass("banner-clone")&&(e=r.bannerImage.eq(t)),r.bannerItem.removeClass("active");t=r.bannerItem.eq(e.index()-1);e.css({display:"block"}),t.addClass("active"),i._bannerTimer(e)},_onHoverAddClass:function(e){n(e.currentTarget).addClass("bannerHover"),clearInterval(d.timer)},_onMouseOutRemoveClass:function(e){n(e.currentTarget).removeClass("bannerHover"),d.clicked||(d.timer=setInterval(function(){if(!o){if(1==d.slideClick)return;r.topBanner&&(r.topBanner.style.transition="transform 1000ms ease",r.topBanner.style.WebkitTransition="transform 1000ms ease",r.topBanner.style.MozTransition="transform 1000ms ease"),r.topBan.addClass("sliderTransition")}i._showBanner()},r.bannerTimer))},_onHoverRemoveHidden:function(){},_onMouseOutAddHidden:function(){},_initiateBanner:function(){d.timer=setInterval(function(){if(!d.clicked){if(!o){if(1==d.slideClick)return;r.topBanner&&(r.topBanner.style.transition="transform 1000ms ease",r.topBanner.style.WebkitTransition="transform 1000ms ease",r.topBanner.style.MozTransition="transform 1000ms ease"),r.topBan.addClass("sliderTransition")}i._showBanner()}},r.bannerTimer)},_bindEvents:function(e){r.bannerItem.on(e=o?e||"mouseover":e||"click",function(e){r.bannerImage=n(".banner-image"),o||(d.clicked=!0),clearTimeout(d.timer),d.legendTimer&&clearTimeout(d.legendTimer);r.bannerImage.filter(".shown").attr("index");if(!o){if(!(n(this).index()<5))return;r.topBanner&&(r.topBanner.style.transition="transform 1000ms ease",r.topBanner.style.WebkitTransition="transform 1000ms ease",r.topBanner.style.MozTransition="transform 1000ms ease"),r.topBan.addClass("sliderTransition"),d.bannerSlider=d.bannerWidth*(n(this).index()+1),i._moveSlider()}r.bannerImage.removeClass("shown"),o&&r.bannerImage.css("display","none"),r.bannerImage.removeClass("banner-active"),r.bannerImage.eq(n(this).index()+1).css("display","block"),r.bannerItem.removeClass("active"),n(this).addClass("active"),o||r.bannerImage.eq(n(this).index()+1).addClass("banner-active"),i._bannerTimer(r.bannerImage.eq(n(this).index()+1)),d.legendTimer=setTimeout(function(){i._initiateBanner()},r.homePagePlatinumHoverTimer-r.bannerTimer)}),o||(r.topBanner&&(r.topBanner.style.transform="translate3d(-"+d.bannerWidth+"px, 0px, 0px)",r.topBanner.style.WebkitTransform="translate3d(-"+d.bannerWidth+"px, 0px, 0px)",r.topBanner.style.MozTransform="translate3d(-"+d.bannerWidth+"px, 0px, 0px)"),e=r.bannerWrapper.find(".banner-image").length,r.bannerWrapper.find(".top-banner-area").css("width",d.bannerWidth*e+"px")),n(window).resize(Snapdeal.utility.debounce(function(){var e,t;o||(t=parseInt(r.bannerImage.filter(".shown").attr("index")),r.bannerWrapper.css("max-width","none"),r.bannerWrapper.find(".top-banner-area").css("width","auto").css("tranform","translate3d(0, 0, 0)"),r.bannerWrapper.find(".banner-image").css("width","auto"),t=(e=parseInt(r.bannerWrapper.css("width")))*(t+1),r.bannerWrapper.css("max-width",e),r.bannerWrapper.find(".banner-image").css("width",e),d.bannerWidth=e,d.bannerSlider=t,d.lastTransform=e*parseInt(n(".banner-image").not(".banner-clone").length),d.finalTransform=e*(parseInt(n(".banner-image").not(".banner-clone").length)+1),r.topBanner&&(r.topBanner.style.transform="translate3d(-"+parseInt(t)+"px, 0px, 0px)",r.topBanner.style.WebkitTransform="translate3d(-"+parseInt(t)+"px, 0px, 0px)",r.topBanner.style.MozTransform="translate3d(-"+parseInt(t)+"px, 0px, 0px)"),t=r.bannerWrapper.find(".banner-image").length,r.bannerWrapper.find(".top-banner-area").css("width",d.bannerWidth*t+"px"),d.slideClick=!1)},1))},_afterWindowLoad:function(){n(window).load(function(){i._initiateBanner(),n(".skeletonScreen").addClass("animHide"),n(".home-page-right-section").addClass("animScroll")}),n(".main-banner-wrapper").on("click",".next",function(e){if(d.clicked=!0,clearInterval(d.timer),!o){if(1==d.slideClick)return;r.topBanner&&(r.topBanner.style.transition="transform 1000ms ease",r.topBanner.style.WebkitTransition="transform 1000ms ease",r.topBanner.style.MozTransition="transform 1000ms ease"),r.topBan.addClass("sliderTransition")}i._showBanner()}),n(".main-banner-wrapper").on("click",".prev",function(e){if(d.clicked=!0,clearInterval(d.timer),!o){if(1==d.slideClick)return;r.topBanner&&(r.topBanner.style.transition="transform 1000ms ease",r.topBanner.style.WebkitTransition="transform 1000ms ease",r.topBanner.style.MozTransition="transform 1000ms ease"),r.topBan.addClass("sliderTransition")}i._showBannerPrev()}),r.bannerImage.on("mouseover",function(e){o&&i._onHoverAddClass(e)}),r.bannerImage.on("mouseout",function(e){o&&i._onMouseOutRemoveClass(e)}),r.bannerWrapper.on("mouseover",function(e){i._onHoverRemoveHidden(e)}),r.bannerWrapper.on("mouseout",function(e){i._onMouseOutAddHidden(e)})}},{init:function(){return i._init.apply(this,arguments)}}}(window.jQuery),(Snapdeal=Snapdeal||{}).loadCXEWidgets=function(h){var f=null!==document.ontouchstart?"click":"touchstart",C={centerCardWidgets:h("#centerCardWidgets"),dealsTimer:h(".dealsTimer"),gradTimer:h(".gradTimer"),homePageWidgetCount:h("#homePageWidgetCount"),homePageVersion:h("#homePageVersion"),dealsBanner:h(".dealsBanner"),greyTemplateDiv:h(".greyTemplateDiv"),csfPageVersion:h("#csfPageVersion"),homePageDealsOfTheDayBanner:h("#homePageDealsOfTheDayBanner"),sdFooter:h("#sdFooter"),trendingData:h(".trendingData"),trendSpace:h(".trendSpace"),homeShiftTrending:h("#homeShiftTrending"),homeShiftTrendTimeout:h("#homeShiftTrendTimeout"),stackYuda:h("#stack_yuda"),isHybridCSF:!1},v={minSlides:4,maxSlides:5,sliderModel:null,tempIndex:parseInt(C.homePageWidgetCount.val())-1,count:0,counter:0,scrollIndex:0,showTemplate:-1,cookieValues:{},configURL:"",ribbonInstance:0},S={homeVersion:C.homePageVersion.val(),csfVersion:C.csfPageVersion.val(),showTempCnt:parseInt(C.homePageWidgetCount.val()),ajaxHit:!1,categoryInstance:0,widgetLen:0,ceeInstance:0,shiftSwitch:!0},b={_init:function(e){h.extend(!0,{},S,e),b._bindEvents(),b._windowUnloadRegister()},_bindEvents:function(){h(window).on("scroll.loadCXEWidgets",Snapdeal.utility.debounce(function(){var e=parseInt(C.centerCardWidgets.attr("widgetLen")),t=h(".homePageSection"),a=Math.round(S.showTempCnt/2),n=C.centerCardWidgets.find(".homePageSection").length,a=n<a?a-n:n-a;(t[a]&&1==Snapdeal.lazyLoad.isElementVisible(t[a])||t[n-1]&&1==Snapdeal.lazyLoad.isElementVisible(t[n-1])||0<h("#greyTempDiv").length&&1==Snapdeal.lazyLoad.isElementVisible(document.getElementById("greyTempDiv"))||0<C.sdFooter.length&&1==Snapdeal.lazyLoad.isElementVisible(document.getElementById("sdFooter"))||(window.innerHeight||document.documentElement.clientHeight)+h(window).scrollTop()>=C.centerCardWidgets.offset().top+C.centerCardWidgets.outerHeight()-500)&&b._fireScrollEvent(),h(window).scrollTop()+h(window).height()==h(document).height()&&v.count>=e&&(C.greyTemplateDiv.addClass("hidden"),h(window).off("scroll.loadCXEWidgets")),h(window).scrollTop()+h(window).height()!=h(document).height()||e||(C.greyTemplateDiv.addClass("hidden"),h(window).off("scroll.loadCXEWidgets"))},20))},_categoryContentCount:0,_fireScrollEvent:function(){var e=parseInt(C.centerCardWidgets.attr("widgetLen"));0==S.ajaxHit&&(v.count=v.tempIndex+1,v.tempIndex=v.tempIndex+parseInt(C.homePageWidgetCount.val()),v.tempIndex>=e&&(v.tempIndex=e-1),!e||v.count<e?b._getAjaxData():v.count===e&&(b._categoryContentCount++,1===b._categoryContentCount&&C.isHybridCSF&&(e=document.getElementById("categoryPageCSS").value,e=loadCSS(e),onloadCSS(e,function(){b._getHybridCSFListing()}))))},_getHybridCSFListing:function(){C.greyTemplateDiv.removeClass("hidden");var e=h("#sa-category").val();h.ajax({url:"/getListingPageCategoryData/"+e,type:"GET",success:function(e){""!==e&&h("#csfContent").html(e),C.greyTemplateDiv.addClass("hidden")},error:function(){C.greyTemplateDiv.addClass("hidden")}})},_windowUnloadRegister:function(){window.onunload=function(){h(window).scrollTop(0)}},_initialiseSlider:function(e,t,a){"categoryWidgets"==a?(C.centerCardWidgets.find(".widgetImageWrapper .bx-controls a").attr("href","javascript:void(0);"),e&&(v.sliderModel=t.bxSlider({prevText:'<div class="prev"><i class="prev-i"></i><i class="sd-icon sd-icon-previous"></i></div>',nextText:'<div class="next"><i class="next-i"></i><i class="sd-icon sd-icon-next"></i></div>',useCSS:!1,pager:!1,slideMargin:0,infiniteLoop:!1,hideControlOnEnd:!0,auto:!1,minSlides:v.minSlides,maxSlides:v.maxSlides})),C.centerCardWidgets.find(".widgetImageWrapper .bx-controls a.bx-prev").addClass("disabled")):e&&(v.sliderModel=t.bxSlider({prevText:'<div class="prev"><i class="prev-i"></i><i class="sd-icon sd-icon-previous"></i></div>',nextText:'<div class="next"><i class="next-i"></i><i class="sd-icon sd-icon-next"></i></div>',slideWidth:232,useCSS:!1,pager:!1,slideMargin:0,infiniteLoop:!0,hideControlOnEnd:!1,auto:!1,minSlides:v.minSlides,maxSlides:v.maxSlides}))},_formatZeros:function(e){return e<10?"0"+e:e},_setOmniCeeOnload:function(){for(var e,t,a=h(".centerCardAfterLoadWidgets").find(".mainTempDiv"),n="",i=0;i<a.length;i++)if(0!=i&&(n+="||"),n+=h(a[i]).parents(".homePageSection").attr("widgetId"),(e=h(a[i]).attr("trackingids"))&&"null"!=e&&(t=JSON.parse(e))&&t.length){for(var r=0;r<t.length;r++)if("aid"==t[r].key){n+="_"+t[r].key+"="+t[r].value;break}for(r=0;r<t.length;r++)if("jid"==t[r].key){n+="_"+t[r].key+"="+t[r].value;break}for(r=0;r<t.length;r++)if("testId"==t[r].key){n+="_"+t[r].key+"="+t[r].value;break}for(r=0;r<t.length;r++)if("ruleId"==t[r].key){n+="_"+t[r].key+"="+t[r].value;break}}for(var d=C.stackYuda.find("li").length,o=C.stackYuda.find("li"),s=0;s<d;s++)n+="_NBAwidgetName="+h(o[s]).attr("action"),n+="_NBAwidgetPosition="+(s+1);Snapdeal.omni.fire("ceeWidgetLoaded",{data:n})},_setConfigForTimer:function(e,t,a){var n=(new Date).getTime(),i="false";if(e<n&&n<t)d=t;else if(n<e)d=e,i="true";else if(e<n){var r=h(".dealsWidget");return r.css("opacity","0.4").addClass("opacityAttachd"),r.parents(".homePageSection").find("a").removeAttr("href"),r.parents(".homePageSection").find("img").addClass("opacity2"),r.parents(".homePageSection").find("img").addClass("opacity2"),void h(".opacityAttachd").find("a").attr("href","javascript:void(0);")}var r=(d=new Date(parseInt(d))).getFullYear()+"/"+b._formatZeros(d.getMonth()+1)+"/"+b._formatZeros(d.getDate()),d=b._formatZeros(d.getHours())+":"+b._formatZeros(d.getMinutes())+":"+b._formatZeros(d.getSeconds());a.countdown({date:r+" "+d,offset:null},function(){"true"==i&&b._setConfigForTimer(a.attr("startTime"),a.attr("endTime"),a)})},_appendStructure:function(e,t){var a;v.showTemplate=v.showTemplate+1;var n=v.showTemplate;if("ribbon"==e){var i,r=C.centerCardWidgets.find(".homePageSection").eq(v.ribbonInstance);r&&0<r.length?(i=h("#sectionTemplate1").html(),h(i).insertBefore(r)):(v.ribbonInstance=v.showTemplate,C.centerCardWidgets.append(h("#sectionTemplate1").html())),C.centerCardWidgets.find(".homePageSection").eq(v.ribbonInstance).attr("tempStyl",a).attr("data-index",v.ribbonInstance),C.centerCardWidgets.find("h2").eq(v.ribbonInstance).attr("id","head-ribbon_banner-"+v.ribbonInstance),C.centerCardWidgets.find(".mainTempDiv").eq(v.ribbonInstance).attr("id","ajaxWidget-ribbon_banner-"+v.ribbonInstance);var d=doT.template(h("#ribbon_banner").html());h("#ajaxWidget-ribbon_banner-"+v.ribbonInstance).append(d),h("#ajaxWidget-ribbon_banner-"+v.ribbonInstance).parents(".homePageSection").find(".widgetHead").addClass("hidden");var o=C.centerCardWidgets.attr("adTechInstance")-1;return h(".adtechGoldBanner1").eq(o).append(t),void b._showTemplate(v.ribbonInstance,"ribbon_banner")}a=e.templateStyle,e.dataSource,i=e.templateSubStyle,r=e.viewAllText,d=e.viewAllCta,o=e.widgetLabel,t=e.trackingId,e=e.id,"exclusive_widget"==a?C.centerCardWidgets.append(h("#section-exclusive").html()):"products_widget_2_tuple"==i||"trending_categories_cmp"==a?C.centerCardWidgets.append(h("#sectionTemplate2").html()):"paginated_2x2_widget"===i&&"paginated_widget"===a?C.centerCardWidgets.append(h("#infiniteFeedTemplate").html()):C.centerCardWidgets.append(h("#sectionTemplate1").html()),C.centerCardWidgets.find(".homePageSection").eq(n).attr("tempStyl",a).attr("data-index",n).attr("widgetId",e),C.centerCardWidgets.find("h2").eq(n).attr("id","head-"+a+"-"+n),C.centerCardWidgets.find(".mainTempDiv").eq(n).attr("id","ajaxWidget-"+a+"-"+n),C.centerCardWidgets.find(".mainTempDiv").eq(n).attr("trackingIds",JSON.stringify(t)),"products_c_widget_cxe"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","cee_wdgt"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidtfr","cee_wdgt"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","crsl"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl",o),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","product_list"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"products_c_widget_cmp"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","cee_wdgt"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","crsl"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl",o),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","product_list"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"category_buckets_widget_cmp"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","cat_prm"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl",o),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","cat_prm"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"gold_banner"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","gld_bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl","Gold Banner"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"card_style_banner_cmp"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","crd_bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl","Card Style Banner"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"deals_of_the_day_cmp"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","dod_wdgt"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","crsl"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl","Deal of the Day"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","product-list"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"ribbon_banner_cmp"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","rbn_ban"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","rbn_ban"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidtfr","rbn_ban"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl","Ribbon Banner"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"super_deal_of_the_day"==a?(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","spr_deal"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","spr_deal"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidtfr","spr_deal"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl","Super Deal of the Day"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)):"trending_categories_cmp"==a&&(C.centerCardWidgets.find(".homePageSection").eq(n).addClass("ceeWidget dp-widget"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidt","trend_cat"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdit","trend_cat"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpidtfr","trend_cat"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpwlbl","Trending Categories"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpdat","bnr"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpcol","c"),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dppos",n),C.centerCardWidgets.find(".homePageSection").eq(n).attr("data-dpid",e)),"products_c_widget_cmp"!=a&&"deals_of_the_day_cmp"!=a&&"exclusive_widget"!=a&&"top_brands"!=a||r&&d&&(h("h2#head-"+a+"-"+n).parents(".homePageSection").find(".loadMoreBtn").removeClass("hidden"),h("h2#head-"+a+"-"+n).parents(".homePageSection").find(".viewAllAnchor").attr("href",d),"deals_of_the_day_cmp"==a&&h("h2#head-"+a+"-"+n).parents(".homePageSection").find(".dealsBanner a").attr("href",d)),"shopping_list_widget"==a&&(h("h2#head-"+a+"-"+n).parents(".homePageSection").find(".loadMoreBtn").removeClass("hidden"),h("h2#head-"+a+"-"+n).parents(".homePageSection").find(".viewAllAnchor").attr("href",absoluteHttpPath+"/shopping-list"),h("h2#head-"+a+"-"+n).html("SHOPPING LIST")),"super_deal_of_the_day"!=a&&"category_buckets_widget_cmp"!=a&&"ribbon_banner_cmp"!=a&&"download_App"!=a&&"card_style_banner_cmp"!=a&&"gold_banner"!=a||h("h2#head-"+a+"-"+n).parent().addClass("hidden"),!o||"super_deal_of_the_day"==a&&"ribbon_banner_cmp"==a&&"download_App"==a||h("h2#head-"+a+"-"+n).html(o)},_showTemplate:function(e,t){h("#ajaxWidget-"+t+"-"+e).parents(".homePageSection").removeClass("greyTemplate").find(".sectnDiv").addClass("animScroll"),b._createDPInfoData(h("#ajaxWidget-"+t+"-"+e)),1==S.ceeInstance&&1==S.shiftSwitch&&(h(".tnTemplate").addClass("animHide"),h("#ajaxWidget-"+t+"-"+e).parents("section.inPlaceTrend").removeClass("greyTemplate"),C.trendSpace.addClass("animScroll").find(".sectnDiv").addClass("animScroll"))},_processTemplate:function(e,t){var a,n;if(e){var i,r,d,o,s=e.templateStyle,l=e.templateSubStyle,c=s;if("products_c_widget_cmp"!=c&&"products_c_widget_cxe"!=c||(c="products_c_widget"),n=JSON.parse(e.data),h("#"+c).html()&&(a=doT.template(h("#"+c).html())))switch(n&&"deals_of_the_day_cmp"!=s&&"products_c_widget"!=c&&"super_deal_of_the_day"!=s&&"exclusive_widget"!=s&&"shopping_list_widget"!=s?(b._appendStructure(e),n.widgetList?h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)):h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n)),b._showTemplate(v.showTemplate,s)):n||"ribbon_banner"!=s&&"download_App"!=s||h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a),1!=C.homeShiftTrending.val()&&"true"!=C.homeShiftTrending.val()||1!=S.shiftSwitch||!(n&&n.length||n&&n.widgetList.length)||"products_c_widget_cxe"!=s&&"products_c_widget_cmp"!=s||(S.ceeInstance+=1),c){case"products_c_widget":if(n){var p=(n.widgetList||n).length;if(1==S.ceeInstance&&1==S.shiftSwitch){if(4<=p){b._appendStructure(e),n.widgetList?h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)):h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n));var g=C.trendSpace.find(".trendingNowWidget").html(),m=C.trendSpace.find(".trendingNowWidget").attr("data-dpid"),u=h("#ajaxWidget-"+s+"-"+v.showTemplate).parents(".homePageSection");return C.trendSpace.find(".trendingNowWidget").html(u.html()),C.trendSpace.find(".trendingNowWidget").addClass("inPlaceTrend ceeWidget homePageSection dp-widget").removeClass("trendingNowWidget dp-fired").attr("widgetid",u.attr("widgetid")).attr("data-dpwlbl",u.attr("data-dpwlbl")).attr("data-dppos",u.attr("data-dppos")).attr("data-dpidtfr",u.attr("data-dpidtfr")).attr("tempstyl",u.attr("tempstyl")).attr("data-index","-1"),5<p?(b._initialiseSlider(!0,C.trendSpace.find("#ajaxWidget-"+s+"-"+v.showTemplate)),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("sliderHomeWidget")):4==p?C.trendSpace.find("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack"):5==p&&C.trendSpace.find("#ajaxWidget-"+s+"-"+v.showTemplate).find(".product-relative").addClass("noMaxWidth"),C.centerCardWidgets.find("#ajaxWidget-"+s+"-"+v.showTemplate).parents(".homePageSection").html(g).removeClass("greyTemplate").addClass("sliderHomeWidget trendingNowWidget dp-widget").find(".sectnDiv").addClass("animScroll"),5<C.centerCardWidgets.find(".trendingProd").length?b._initialiseSlider(!0,C.centerCardWidgets.find(".trendingData")):4==C.centerCardWidgets.find(".trendingProd").length?C.centerCardWidgets.find(".trendingData").addClass("whiteBack"):5==C.centerCardWidgets.find(".trendingProd").length&&C.centerCardWidgets.find(".trendingProd").addClass("noMaxWidth dp-widget-link"),b._showTemplate(v.showTemplate,s),C.centerCardWidgets.find(".trendingNowWidget").attr("tempstyl","trendingNowWidget").attr("data-dpidt","cee_wdgt").attr("data-dpdit","crsl").attr("data-dpwlbl","Trending Products").attr("data-dpcol","c").attr("data-dpdat","product_list").attr("data-dpid",m).removeAttr("widgetid"),void C.centerCardWidgets.find(".trendingNowWidget").removeClass("dp-fired ceeWidget")}C.trendSpace.addClass("animScroll").removeClass("dp-click-widgets").find(".sectnDiv").addClass("animScroll"),h(".tnTemplate").addClass("animHide"),C.trendSpace.find(".trendingNowWidget").removeClass("dp-widget ceeWidget dp-fired"),5<C.trendSpace.find(".trendingProd").length&&b._initialiseSlider(!0,C.trendSpace.find(".trendingData"))}"products_widget_2_tuple"==l?(4<=p&&(b._appendStructure(e),p%5==0||4==p?(n.widgetList?h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)):h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n)),4==p?h("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack"):5==p&&h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".product-relative").addClass("noMaxWidth")):(m=(m=n.widgetList||n).splice(0,p-p%5),h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(m))),b._showTemplate(v.showTemplate,s)),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("sliderTwoTupleWidget")):4<=p&&(b._appendStructure(e),n.widgetList?h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)):h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n)),b._showTemplate(v.showTemplate,s),"products_widget_6_pog"==l&&"touchstart"!=f&&(h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".product-relative").addClass("sixPogCard").find(".stats-container").addClass("sixPogWidget"),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("sixPogSection"),h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".lfloat").removeClass("lfloat"),h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".sixPogButtn").removeClass("hidden"),5==p&&h("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack")),5<p&&(b._initialiseSlider(!0,h("#ajaxWidget-"+s+"-"+v.showTemplate)),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("sliderHomeWidget")),4==p?h("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack"):5==p&&"products_widget_6_pog"!=l&&h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".product-relative").addClass("noMaxWidth"))}break;case"exclusive_widget":n&&n.widgetList&&2<n.widgetList.length&&(b._appendStructure(e),h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)),o=h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".products-container"),b._showTemplate(v.showTemplate,s),0<o.length&&3<n.widgetList.length&&b._initialiseSlider(!0,o));break;case"super_deal_of_the_day":n&&n.widgetList&&(p=n.widgetList.length-1,n.widgetList[p]&&0==n.widgetList[p].soldout&&(b._appendStructure(e),h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)),b._showTemplate(v.showTemplate,s),u=h("#ajaxWidget-"+s+"-"+v.showTemplate).parents(".homePageSection"),n.startDate&&n.endDate?(r=n.startDate,d=n.endDate,i=h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".gradTimer"),h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".gradTimer, .timerMins").removeClass("hidden"),b._setConfigForTimer(r,d,i)):h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".gradTimer, .timerMins").addClass("hidden")));break;case"deals_of_the_day_cmp":n&&n.widgetList&&3<=n.widgetList.length&&(b._appendStructure(e),h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)),C.dealsBanner.removeClass("hidden").insertBefore(h("#ajaxWidget-"+s+"-"+v.showTemplate)),i=h("#ajaxWidget-"+s+"-"+v.showTemplate).parents(".homePageSection").find(".viewAllBtn").attr("href"),h(".dealsBanner a").attr("href",i),C.homePageDealsOfTheDayBanner.val()||h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").find(".bx-wrapper").addClass("zeroMarginLeft"),b._showTemplate(v.showTemplate,s),4<n.widgetList.length&&(b._initialiseSlider(!0,h("#ajaxWidget-"+s+"-"+v.showTemplate)),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("sliderHomeWidget dealsWidget")),3==n.widgetList.length?h("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack"):4==n.widgetList.length&&(h("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack"),h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".product-relative").addClass("noMaxWidth")),n.startDate&&n.endDate&&(h("h2#head-"+s+"-"+v.showTemplate).parent().addClass("widgetTimerHead"),C.dealsTimer.removeClass("hidden").insertAfter(h("h2#head-"+s+"-"+v.showTemplate)),r=n.startDate,d=n.endDate,b._setConfigForTimer(r,d,C.dealsTimer)));break;case"ribbon_banner":v.counter=v.counter+1,C.centerCardWidgets.attr("adTechInstance",v.counter),v.ribbonInstance=C.centerCardWidgets.find(".homePageSection").length,"category-store-front"==h("#sa-page").val()?Snapdeal.csfAdTechDarwin.init():h("html").hasClass("ie8")||h("html").hasClass("ie9")||Snapdeal.homePageAdtechIntegration.init();break;case"shopping_list_widget":h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("fmcg-container"),n&&n.widgetList&&3<n.widgetList.length&&(b._appendStructure(e),h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a(n.widgetList)),b._showTemplate(v.showTemplate,s),5<n.widgetList.length?(b._initialiseSlider(!0,h("#ajaxWidget-"+s+"-"+v.showTemplate)),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("sliderHomeWidget")):5==n.widgetList.length?h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".product-relative").addClass("noMaxWidth"):4==n.widgetList.length&&h("#ajaxWidget-"+s+"-"+v.showTemplate).addClass("whiteBack"));break;case"category_buckets_widget_cmp":S.categoryInstance+=1,0<(o=h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".multiProds")).length&&b._initialiseSlider(!0,o,"categoryWidgets"),1==S.categoryInstance?h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".leftCategoryText").addClass("firstCategoryBackGrnd"):2==S.categoryInstance?h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".leftCategoryText").addClass("secondCategoryBackGrnd"):3==S.categoryInstance&&(S.categoryInstance=0,h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".leftCategoryText").addClass("thirdCategoryBackGrnd"),h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".leftCategoryText").find(".textLinks a").addClass("darkFontColor")),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("categoryWidgetWrapper-homepage");break;case"download_App":b._appendStructure(e),h("#ajaxWidget-"+s+"-"+v.showTemplate).append(a),h("#ajaxWidget-"+s+"-"+v.showTemplate).find(".downloadIconsImg").removeClass("lazyBg"),b._showTemplate(v.showTemplate,s),h("#ajaxWidget-"+s+"-"+v.showTemplate).parents("section").addClass("downloadAppFullWidth downloadBackImage");break;case"paginated_widget":b._appendStructure(e),Snapdeal.infiniteFeed.createInfiniteFeed(e,"home")}}v.tempIndex>=parseInt(S.widgetLen)-1&&C.greyTemplateDiv.addClass("hidden")},_appendTemplateStructure:function(e,t,a){var n,i;if(e){for(n=t;n<=a;n++)i=e[n],b._processTemplate(i,n);"HomePage"==pageName&&(Snapdeal.WidgetLogger.init(),h(".lazyBg").removeClass("lazyBg")),0==t&&(0!=S.ceeInstance||1!=S.shiftSwitch||1!=C.homeShiftTrending.val()&&"true"!=C.homeShiftTrending.val()||(0==C.trendSpace.find(".bx-wrapper").length&&b._initialiseSlider(!0,C.trendSpace.find(".trendingData")),h(".tnTemplate").addClass("animHide"),C.trendSpace.addClass("animScroll").find(".sectnDiv").addClass("animScroll"),S.shiftSwitch=!1)),"touchstart"==f&&(C.centerCardWidgets.find(".shortlist-products").show(),C.trendSpace.find(".shortlist-products").show(),h("#productNewTab").val("false"),h(".product-card").removeAttr("target"))}},_getAjaxData:function(){var e,t,a,o=null,s=v.count,l=v.tempIndex;"getHomeWidgets"==v.configURL?a=Snapdeal.getAjaxResourcesPath("/web/getHomePageData/"+S.homeVersion+"/"+s+"/"+l+"?uCookie="+v.cookieValues.uCookie+"&spin="+v.cookieValues.spinCookie+"&hpcl="+v.cookieValues.hpclCookie):"getCSFWidgets"==v.configURL&&(e=h("#sa-category").val(),t=h("#sa-cart-id").val(),a=Snapdeal.getAjaxResourcesPath("/web/getCSFData/"+S.csfVersion+"/"+s+"/"+l+"?uCookie="+v.cookieValues.uCookie+"&spin="+v.cookieValues.spinCookie+"&cartId="+t+"&categoryUrl="+e)),S.ajaxHit=!0,h.ajax({url:a,type:"GET",beforeSend:function(){0==s&&(o=setTimeout(function(){0==C.trendSpace.find(".bx-wrapper").length&&b._initialiseSlider(!0,C.trendSpace.find(".trendingData")),h(".tnTemplate").addClass("animHide"),C.trendSpace.addClass("animScroll").removeClass("dp-click-widgets").find(".sectnDiv").addClass("animScroll"),C.trendSpace.find(".trendingNowWidget").removeClass("dp-widget ceeWidget dp-fired"),S.shiftSwitch=!1},C.homeShiftTrendTimeout.val()))},success:function(e){S.ajaxHit=!1,clearTimeout(o);try{var t,a,n,i,r,d;void 0!==e.chatEnabled&&(a='<input type="hidden" value="'+(t=e.chatEnabled)+'" id="chatFlag" />',e.chatDepartment&&(i=(n=JSON.parse(e.chatDepartment)).group,r=parseInt(n.timegap),(d=document.getElementById("chatDepartment"))?d.value=i||"":((d=document.createElement("input")).id="chatDepartment",d.type="hidden",d.value=i||"",document.body.appendChild(d))),0<h("#chatFlag").length?h("#chatFlag").val(t):h("body").append(a),!Snapdeal.Cookie.get("pdpChat")&&Snapdeal.chat&&window.setTimeout(function(){Snapdeal.chat.init()},1e3*r))}catch(e){}e=e.widgets;e&&0<e.length&&C.centerCardWidgets.attr("widgetLen",e.length),(0<h("#greyTempDiv").length&&1==Snapdeal.lazyLoad.isElementVisible(document.getElementById("greyTempDiv"))||0<C.sdFooter.length&&1==Snapdeal.lazyLoad.isElementVisible(document.getElementById("sdFooter"))||(window.innerHeight||document.documentElement.clientHeight)+h(window).scrollTop()>=C.centerCardWidgets.offset().top+C.centerCardWidgets.outerHeight()-500)&&b._fireScrollEvent(),e&&0<e.length?(S.widgetLen=C.centerCardWidgets.attr("widgetLen"),b._appendTemplateStructure(e,s,l)):(S.ajaxHit=!1,S.widgetLen&&b._fireScrollEvent(),v.count>=S.widgetLen&&C.greyTemplateDiv.addClass("hidden")),e&&"products_c_widget_category"===e[e.length-1].templateStyle&&(C.isHybridCSF=!0)},error:function(e){S.ajaxHit=!1,S.widgetLen&&b._fireScrollEvent(),v.count>=S.widgetLen&&C.greyTemplateDiv.addClass("hidden")}})},_fetchAjaxWidgets:function(e){v.configURL=e,v.cookieValues={uCookie:Snapdeal.Cookie.get("u")?Snapdeal.Cookie.get("u"):"",spinCookie:Snapdeal.Cookie.get("spin")?Snapdeal.Cookie.get("spin"):"",hpclCookie:Snapdeal.Cookie.get("hpcl")?Snapdeal.Cookie.get("hpcl"):""},b._getAjaxData()},_createDPInfoData:function(e){var a=[];e.find(".dp-track-prod-info").each(function(e,t){a.push(JSON.parse(t.value.replace(/\"/g,"").replace(/\'/g,'"')))}),0<(a=JSON.stringify(a).replace(/\"/g,"'")).length&&e.closest(".dp-widget").append('<input class="dp-info-collect" type="hidden" value="'+a+'">')}};return{init:function(){return b._init.apply(this,arguments)},initialiseSlider:function(){return b._initialiseSlider.apply(this,arguments)},fetchAjaxWidgets:function(){return b._fetchAjaxWidgets.apply(this,arguments)},appendStructure:function(){return b._appendStructure.apply(this,arguments)},setOmniCeeOnload:function(){return b._setOmniCeeOnload.apply(this,arguments)}}}(window.jQuery),Snapdeal.loadCXEWidgets.init(),(Snapdeal=Snapdeal||{}).WidgetLogger=function(h){var n={loggingInterval:+h("#dpWidgetLoggingInterval").val()||3e3,clearWait:+h("#dpWidgetClearWait").val()||6e4,lastIndexLeft:0,lastIndexCenter:0,lastIndexRight:0,isIntervalActive:!1,fireDpWidgetInterval:!1},r={_init:function(){"true"==h("#dpWidgetLoggingSwitch").val()&&(r._markDPWidgets(),r._fireWidgetLog(),h(window).on("newProductsLoaded",r._fireDPWidgetInterval))},_markDPWidgets:function(){h(".dp-click-widgets").off("click",".dp-widget .dp-widget-link").on("click",".dp-widget .dp-widget-link",function(){var e=h(this).closest(".dp-widget"),t=h(this),a=t.parents(".product-tuple-listing"),n=t.parents(".product-relative"),i=t.parents(".bannerWrapper"),r=t.parents(".homePageSection"),d=t.parents(".catNavSection"),o=t.parents(".platBanner"),s=t.parents(".trendingCategories"),t=a.length?t.parents(".product-tuple-listing").attr("data-index"):n.length?t.parents(".product-relative").attr("index"):i.length?t.parents(".bannerWrapper").attr("data-container"):s.length?t.attr("index"):r.length?parseInt(t.parents(".dp-widget").attr("data-dppos")):d.length?t.attr("data-index"):o.length?t.parents(".platBanner").attr("index"):"";if(window.sdLoggerSwitch&&SDLogger&&"function"==typeof SDLogger.log){var l={widgetId:e.attr("data-dpid"),href:h(this).attr("href")&&-1===h(this).attr("href").indexOf("javascript:void(0)")?h(this).attr("href").replace(/https?:\/\/(((?!sdlcdn).)*?\/)/g,"/"):"",widgetIdentifier:e.attr("data-dpidt"),position:t},c=[],p={};h(this).hasClass("dp-widget-viewall")&&(l.viewAllLink=!0);var g,t=h(this).parents(".homePageSection").find(".mainTempDiv"),t=h(t).attr("trackingids");if((c=t&&"null"!=t?JSON.parse(t):c)&&c.length){for(var m=0,u=c.length;m<u;m++)p[c[m].key]=c[m].value;l.aid=p.aid||"",l.jid=p.jid||"",l.testId=p.testId||"",l.ruleId=p.ruleId||"",l.throttleId=p.throttleId||""}l.widgetId&&l.widgetId.startsWith("ads_wdgt")&&(g=JSON.parse(h(this).find(".dp-item-click-data").val().replace(/\"/g,"").replace(/\'/g,'"')),h.each(Object.keys(g),function(e,t){l[t]=g[t]}));h(this).closest(".ceeProd");t=h(this).parents(".homePageSection").find(".dp-widget-tracks").html();"null"!=t&&t&&(l.tmReftag=JSON.parse(t)[0].value),l.tmWidgetId=h(this).parents(".homePageSection").attr("widgetid"),l.pogId=h(this).attr("pog"),SDLogger.log("clickStream","widgetAction",l,!0)}}),h(".dp-widget:not(.dp-fired)").each(function(e,t){var a;!h(t).hasClass("hidden")&&h(t).html().trim()&&("l"===(a=h(t).attr("data-dpcol"))?(n.lastIndexLeft+=1,h(t).attr("data-dppos",n.lastIndexLeft)):"c"===a?(n.lastIndexCenter+=1,h(t).attr("data-dppos",n.lastIndexCenter)):"r"===a&&(n.lastIndexRight+=1,h(t).attr("data-dppos",n.lastIndexRight)),h(t).attr("data-dpid",h(t).attr("data-dpidt")+"_"+Snapdeal.Cookie.get("u")+"_"+Math.floor(9999*Math.random()+1)+"_"+(new Date).getTime()))}),r._fireDPWidgetInterval()},_fireDPWidgetInterval:function(){1==n.isIntervalActive?clearInterval(n.fireDPWidgetInterval):n.isIntervalActive;var e=0;n.fireDPWidgetInterval=setInterval(function(){(e+=n.loggingInterval)>n.clearWait&&(clearInterval(n.fireDPWidgetInterval),n.isIntervalActive=!1),r._fireWidgetLog()},n.loggingInterval)},_isIntervalActive:function(){return n.isIntervalActive},_fireWidgetLog:function(){try{var a,n,i;window.sdLoggerSwitch&&SDLogger&&"function"==typeof SDLogger.log&&(a=[],i=0,h(".dp-widget:not(.dp-fired)").each(function(e,t){!h(t).hasClass("hidden")&&h(t).html().trim()&&(null==h(t).attr("data-dppos")&&(i=r._getWidgetPos(h(t)))&&h(t).attr("data-dppos",i),null==h(t).attr("data-dpid")&&h(t).attr("data-dpid",h(t).attr("data-dpidt")+"_"+Snapdeal.Cookie.get("u")+"_"+Math.floor(9999*Math.random()+1)+"_"+(new Date).getTime()),(n=r._createWidgetData(h(t)))&&a.push(n))}),a.length&&SDLogger.log("layoutRender","widgetImpression",a))}catch(e){return!0}},_createWidgetData:function(e){try{var a,n,i,t={},r=e.find(".dp-info-collect:eq(0)"),d=[],o=0;if(e.hasClass("cat-nav-wrapper")){if(!e.parents(".comp-left-wrapper").length)return!1;a="[",e.find("a").each(function(e,t){h(t).addClass("dp-widget-link"),n=h(t).attr("href"),i=h(t).find("div:eq(0)").text().replace(/'/g,"").replace(/"/g,""),a+="{'k2': '"+n+"', 'k4': '"+i+"' }, "}),a+=" ]",e.find(".dp-info-collect").val(a)}if(r.length){if(t.wIdt=e.attr("data-dpidt"),t.diT=e.attr("data-dpdit"),t.daT=e.attr("data-dpdat"),t.cl=e.attr("data-dpcol"),t.nm=e.attr("data-dpwlbl"),t.pos=e.attr("data-dppos"),t.id=e.attr("data-dpid"),t.lytH=e.height(),t.lytW=e.width(),t.lytX=e.offset().left,t.lytY=e.offset().top,e.hasClass("ceeWidget")){var s=[],l={},c={};0<e.find(".mainTempDiv,.cee-wrapper").length&&(s=JSON.parse(e.find(".mainTempDiv,.cee-wrapper").attr("trackingids")));for(var p=0,g=s.length;p<g;p++)l[s[p].key]=s[p].value;c.aid=l.aid||"",c.jid=l.jid||"",c.testId=l.testId||"",c.ruleId=l.ruleId||"",c.throttleId=l.throttleId||"",c.tmWidgetId=e.attr("widgetid")||"",t.cee=c}if(t.data={},d=JSON.parse(r.val().replace(/\"/g,"").replace(/\'/g,'"').replace(/,([ ]*\])$/,"$1").replace(/https?:\/\/(((?!sdlcdn).)*?\/)/g,"/")),"cat_prm"===t.diT){for(var m in o=1,d[0])if(d[0].hasOwnProperty(m))for(p=0;p<d[0][m].length;p++)d[0][m][p].k15=o,o++}else for(p=0;p<d.length;p++)d[p].k15=p+1;return"cat_nav"===t.wIdt&&(d.length=Math.min(d.length,99)),t.data.items=d,e.addClass("dp-fired"),t}return!1}catch(e){return!1}},_getWidgetPos:function(e){var a=e.attr("data-dpcol"),n=0,i=0;return(n=r._getWidgetPosLeftSiblings(e,a))||e.parentsUntil("#content_wrapper").each(function(e,t){if(n=r._getWidgetPosLeftSiblings(h(t),a))return!1}),(i=r._getWidgetPosRightSiblings(e,a))||e.parentsUntil("#content_wrapper").each(function(e,t){if(i=r._getWidgetPosRightSiblings(h(t),a))return!1}),(0!==n||0!==i?r._getFinalPos(n,i):1)||0},_getWidgetPosLeftSiblings:function(e,t){var a=0,n=e.prevAll(),i=[];if(n.length)for(var r=0;r<n.length;r++){for(var d=(i=h(n[r]).find('.dp-widget[data-dpcol="'+t+'"]')).length-1;0<=d;d--)if(h(i[d]).attr("data-dppos")){a=h(i[d]).attr("data-dppos");break}if(a)break;if(!a&&h(n[r]).hasClass("dp-widget")&&h(n[r]).attr("data-dpcol")===t&&h(n[r]).attr("data-dppos")){a=h(n[r]).attr("data-dppos");break}}return a},_getWidgetPosRightSiblings:function(e,t){var a=0,n=e.nextAll();if(n.length)for(var i=0;i<n.length;i++){for(var r=h(n[i]).find('.dp-widget[data-dpcol="'+t+'"]'),d=0;d<r.length;d++)if(h(r[d]).attr("data-dppos")){a=h(r[d]).attr("data-dppos");break}if(a)break;if(!a&&h(n[i]).hasClass("dp-widget")&&h(n[i]).attr("data-dpcol")===t&&h(n[i]).attr("data-dppos")){a=h(n[i]).attr("data-dppos");break}}return a},_getFinalPos:function(e,t){return 0===t?+e+1:0===e?h(".topHookContainer.dp-widget.dp-fired").length&&h(".topHookContainer.dp-widget.dp-fired").attr("data-dppos")?h(".topHookContainer.dp-widget.dp-fired").attr("data-dppos")+".1":"0.1":-1===t.indexOf(".")?-1===e.indexOf(".")?e+".1":(t=e.split("."))[0]+"."+(+t[t.length-1]+1):-1===e.indexOf(".")?e+".0.1":e+".1"}};return{init:function(){return r._init.apply(this,arguments)},fireWidgetLog:function(){return r._fireWidgetLog.apply(this,arguments)},isIntervalActive:function(){return r._isIntervalActive.apply(this,arguments)}}}(window.jQuery),(Snapdeal=Snapdeal||{}).homePage=function(l){var n={centerCardWidgets:l("#centerCardWidgets"),centerCardAfterLoadWidgets:l(".centerCardAfterLoadWidgets"),trendingData:l(".trendingData"),homePageWidgetCount:l("#homePageWidgetCount"),homePageVersion:l("#homePageVersion"),dealsBanner:l(".dealsBanner"),loginRegBtnHpage:l(".loginRegBtnHpage"),backToTop:l("#back-top"),homepageTopBannerFeature:l("#homepageTopBannerFeature"),homepageTopBannerImg:l("#homepageTopBannerImg"),homeShiftTrending:l("#homeShiftTrending")},t={_init:function(e){l.extend(!0,{},void 0,e),t._bindEvents(),t._loadDependencies(),t._afterWindowLoad(),t._setOmniCookie(),t._setCeeOmniOnClick()},_bindEvents:function(){var e=null!==document.ontouchstart?"click":"touchstart";"true"!=n.homeShiftTrending.val()&&1!=n.homeShiftTrending.val()&&(4<n.trendingData.find(".trendingProd").length&&Snapdeal.loadCXEWidgets.initialiseSlider(!0,n.trendingData,"trendingWidget"),n.trendingData.find(".trendingProd").length<=4&&n.trendingData.addClass("noSliderTrending")),"touchstart"==e&&n.trendingData.find(".shortlist-products").show(),l(window).on("scroll",Snapdeal.utility.debounce(function(){1e3<l(this).scrollTop()?n.backToTop.fadeIn():n.backToTop.fadeOut()},50)),1!=n.homepageTopBannerFeature.val()&&"true"!=n.homepageTopBannerFeature.val()||!n.homepageTopBannerImg.val()||l(".nav-bottom-barcode").addClass("navBottom"),l("#back-top a").click(function(){return l("body,html").animate({scrollTop:0},800),!1}),l(".system_message .close").on("click",function(){l(".system_message").fadeOut()}),setTimeout(function(){l(".system_message").fadeOut()},5e3)},_setOmniCookie:function(){l(".top-banner-area a").mousedown(function(){Snapdeal.Cookie.set("track",l(this).attr("hidOmnTrack").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""))}),n.centerCardAfterLoadWidgets.on("mousedown",".product-relative",function(){var e=parseInt(l(this).attr("index"))+1,t=l(this).parents(".homePageSection"),a=parseInt(t.attr("data-index"))+1,n=l(this).attr("pog"),i=t.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),t=l(this).parents(".homePageSection").find(".widgetLabelHead").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+t+"_"+i+"_"+a+"_"+e+"_"+n)}),n.centerCardAfterLoadWidgets.on("click",".product-relative",function(){var e=parseInt(l(this).attr("index"))+1,t=l(this).parents(".homePageSection"),a=parseInt(t.attr("data-index"))+1,n=l(this).attr("pog"),i=t.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),t=l(this).parents(".homePageSection").find(".widgetLabelHead").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+t+"_"+i+"_"+a+"_"+e+"_"+n)}),l(".shiftTrend").on("click",".product-relative",function(){var e,t,a,n,i;0==l(this).parents(".trendingData").length&&(e=parseInt(l(this).attr("index"))+1,i=l(this).parents(".inPlaceTrend"),t=parseInt(i.attr("data-index"))+1,a=l(this).attr("pog"),n=i.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),i=l(this).parents(".inPlaceTrend").find(".widgetLabelHead").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),Snapdeal.Cookie.set("track","HID="+i+"_"+n+"_"+t+"_"+e+"_"+a))}),n.centerCardAfterLoadWidgets.on("mousedown",".dealsBanner",function(){var e=l(this).find("a").attr("title"),t=l(this).parents(".homePageSection"),a=t.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),n=parseInt(t.attr("data-index"))+1,t=t.find(".widgetLabelHead").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+t+"_"+a+n+e)}),n.centerCardAfterLoadWidgets.on("click",".bannerLinker",function(){var e=l(this).attr("bannerName"),t=l(this).parents(".homePageSection"),a=t.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),n=parseInt(t.attr("data-index"))+1,t=t.find(".widgetLabelHead").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+t+a+"_"+n+"_"+e)}),n.centerCardAfterLoadWidgets.on("mousedown",".superdealLink",function(){var e=l(this).attr("pog"),t=parseInt(l(this).parents(".homePageSection").attr("data-index"))+1,a=l(this).parents(".homePageSection").attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+a+"_"+t+"_"+e)}),n.centerCardAfterLoadWidgets.on("mousedown",".trendingCategories",function(){var e=parseInt(l(this).parents(".homePageSection").attr("data-index"))+1,t=l(this).parents(".homePageSection").attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),a=escape(l(this).find("a").attr("href"));Snapdeal.Cookie.set("track","HID="+t+"_"+e+"_"+a)}),n.centerCardAfterLoadWidgets.on("mousedown",".goldBannr",function(){var e=parseInt(l(this).parents(".homePageSection").attr("data-index"))+1,t=l(this).parents(".homePageSection").attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),a=l(this).find("a").attr("title").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),n=escape(l(this).find("a").attr("href"));Snapdeal.Cookie.set("track","HID="+t+"_"+e+"_"+a+"_"+n)}),n.centerCardAfterLoadWidgets.on("mousedown",".multiPogList",function(){var e=parseInt(l(this).parents(".homePageSection").attr("data-index"))+1,t=l(this).parents(".homePageSection").attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),a=escape(l(this).find("a").attr("href"));Snapdeal.Cookie.set("track","HID="+t+"_"+e+"_"+a)}),n.centerCardAfterLoadWidgets.on("mousedown",".smallImgBan",function(){var e=parseInt(l(this).parents(".homePageSection").attr("data-index"))+1,t=l(this).parents(".homePageSection").attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),a=l(this).find("a").attr("title").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),n=escape(l(this).find("a").attr("href"));Snapdeal.Cookie.set("track","HID="+t+"_"+e+"_"+a+"_"+n)}),n.centerCardAfterLoadWidgets.on("mousedown",".loadMoreBtn",function(){var e=parseInt(l(this).parents(".homePageSection").attr("data-index"))+1,t=l(this).parents(".homePageSection").attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+t+"_"+e+"_viewAll")}),l(".hooksContents").mousedown(function(){var e=parseInt(l(this).attr("data-index"))+1,t=l(this).find(".hookLink").text().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+t+"_"+e)}),n.centerCardAfterLoadWidgets.on("mousedown",".smallBanner2 .categoryImg",function(){var e=l(this).attr("title").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),t=escape(l(this).attr("href")),a=l(this).parents(".homePageSection"),n=a.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),a=parseInt(a.attr("data-index"))+1;Snapdeal.Cookie.set("track","HID="+n+"_"+a+"_HalfBanner_"+e+"_"+t,90)}),n.centerCardAfterLoadWidgets.on("mousedown",".bigBanner  .categoryImg",function(){var e=l(this).attr("title").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),t=escape(l(this).attr("href")),a=l(this).parents(".homePageSection"),n=a.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),a=parseInt(a.attr("data-index"))+1;Snapdeal.Cookie.set("track","HID="+n+"_"+a+"_FullBanner_"+e+"_"+t,90)}),n.centerCardAfterLoadWidgets.on("mousedown",".headerLinks a",function(){var e=l(this).parents(".widgetHeader").children(".headerTxt").children().children("h2").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),e="HID=CategoryWidget_"+(l(this).parents(".categoryPosWrapper").index()+1)+"_"+e+"_Header_"+l(this).html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track",e,90)}),l(".omnTrack").mousedown(function(){Snapdeal.Cookie.set("track",l(this).attr("omnValue").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),90)}),l(".trendingNowWidget").on("mousedown",".trendingProd",function(){Snapdeal.Cookie.set("track","HID=trendingNow_"+l(this).find("a").attr("hidomntrack").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+l(this).find("a").attr("pogid"))}),n.centerCardAfterLoadWidgets.on("mousedown",".ribbonBanner",function(){var e=l(this).parents(".ribbonBannerCtr").attr("index"),t=l(this).parents(".homePageSection"),a=t.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),n=parseInt(t.attr("data-index"))+1,t=l(this).attr("bannerName").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID="+a+"_"+n+"_"+t+"_"+e)}),n.centerCardAfterLoadWidgets.on("mousedown",".categoryBanner img",function(){var e=l(this).parents(".widgetCont").prev().children(".headerTxt").children().children("h2").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track","HID=CategoryWidget_"+e+"_Banner_"+l(this).parent("a").attr("title"),90)}),n.centerCardAfterLoadWidgets.on("mousedown",".bannerText img",function(){var e="HID=CategoryWidget_"+l(this).parents(".widgetCont").prev().children(".headerTxt").children().children("h2").html()+"_BannerWithLinks_"+l(this).parent("a").attr("title").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");Snapdeal.Cookie.set("track",e,90)}),n.centerCardAfterLoadWidgets.on("mousedown",".textLinks",function(){escape(l(this).find("a").attr("href"));var e=l(this).find("a").html().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),t=l(this).parents(".homePageSection"),a=t.attr("tempstyl").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""),t=parseInt(t.attr("data-index"))+1;Snapdeal.Cookie.set("track","HID="+a+"_"+t+"_TextWidget_"+e)}),n.centerCardAfterLoadWidgets.on("mousedown",".widgetImageWrapper",function(){var e=l(this).parents(".widgetCont").prev().children(".headerTxt").children("h2").html();null==e&&(e=l(this).parents(".widgetCont").prev().children(".headerTxt").children().children("h2").html());var t=l(this).find("a").attr("title");null==t&&null==(t=l(this).find("img").attr("alt"))&&(t=""),Snapdeal.Cookie.set("track","HID=CategoryWidget_"+e.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_BannerWithOverlay_BackgroundBanner_"+t.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,""))}),n.centerCardAfterLoadWidgets.on("mousedown",".textLinks",function(){var e=l(this).find("a").attr("href");window.open(e,"_self")}),n.centerCardAfterLoadWidgets.on("mousedown",".nonGradientDiv",function(){0<l(this).parents(".pogBannerDiv").find(".superdealLink").length&&(e=l(this).parents(".pogBannerDiv").find(".superdealLink").attr("href"),window.open(e,"_self"));var e=l(this).parents(".homePageSection"),e=parseInt(e.attr("data-index"))+1;Snapdeal.Cookie.set("track","HID=Super_deal_of_the_day_timer_"+e)})},_setCeeOmniOnClick:function(){l(".centerCardAfterLoadWidgets").on("click",".js-omni",function(){var e=l(this),t=parseInt(e.attr("index")),a=parseInt(e.parents(".homePageSection").attr("data-index"))+1,n=e.parents(".mainTempDiv").attr("trackingids"),i="";n&&(i=JSON.parse(n));var r="WEB:ceeWidget_"+e.parents(".homePageSection").find(".widgetLabelHead").html();if(i)for(var d=0;d<i.length;d++)r+="_"+i[d].key+"="+i[d].value;var o=e.find(".dp-widget-tracks").html();try{o=JSON.parse(o)}catch(e){o=null}if(o)for(var s=0;s<o.length;s++)r+="_"+o[s].key+"="+o[s].value;r+="_widgetId="+e.parents(".homePageSection").attr("widgetId"),r+="_"+parseInt(a)+"__"+t,Snapdeal.Cookie.set("ceeTrack",encodeURIComponent(r.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")))})},_loadDependencies:function(){var a=0;l("#sdHeader").on("userLoggedOut",function(e,t){2==++a&&n.loginRegBtnHpage.removeClass("hidden"),parseInt(Snapdeal.localStorage.getItem("timeStamp"))&&Snapdeal.localStorage.setItem("timeStamp",0)}),l(document).on("iframeLoaded",function(){2==++a&&n.loginRegBtnHpage.removeClass("hidden")}),Snapdeal.platinumBanners.init(),l(document).ready(function(){var e,t="getHomeWidgets";l("html").hasClass("ie8")?Snapdeal.loadCXEWidgets.fetchAjaxWidgets(t):e=setInterval(function(){document.getElementById("homeTemplates")&&0<document.getElementById("homeTemplates").innerHTML.length&&(Snapdeal.loadCXEWidgets.fetchAjaxWidgets(t),clearInterval(e))},100),Snapdeal.WidgetLogger.init()})},_afterWindowLoad:function(){}};return{init:function(){return t._init.apply(this,arguments)}}}(window.jQuery),Snapdeal.homePage.init(),(Snapdeal=Snapdeal||{}).nextBestAction=function(c){var p={clickeventtype:"click",index:0,isAnimating:!1,visible:3,current:0,infinite:!0,pinCode:"",animCounter:0,stackItemsAnimationDelay:0,cartQty:Snapdeal.Cookie.get("cartQty"),cookieValues:{},removeItem:!1,nextWidgetLen:0},g={buttonAccept:c(".button--accept"),stackItem:c(".stack__item"),greenTimeLine:c(".greenTimeLine"),stackDiv:c("#stack_yuda"),loginActnWidget:c(".loginActnWidget"),pincodeActnWidget:c(".pincodeActnWidget"),orderActnWidget:c(".orderActnWidget"),itemsInCartActnWidget:c(".itemsInCartActnWidget"),nbaDonationWidget:c(".nbaDonationWidget"),logInBtnNba:c(".logInBtnNba"),nbaPincode:c(".nbaPincode"),pincodeNbaSubmit:c(".pincodeNbaSubmit"),errorPincode:c(".errorPincode"),pincodeSkipSubmit:c(".pincodeSkipSubmit"),nextBestActnWidget:c(".nextBestActnWidget"),modalContentBox:c("#cartModal").find(".modal-box-content"),cartProductInfoModal:c(".cartProductInfoModal"),genericWidgetBannerImg:c("#genericWidgetBannerImg")},m={cartWidgetCount:0,shortlistWidgetCount:0,shoppingListCount:0,platSupp:function(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),a=0;a<e.length;a++)if(t&&void 0!==t.style[e[a]])return e[a];return!1}()},d={_init:function(e){c.extend(!0,{},m,e),0==m.platSupp&&c("html").addClass("no-transform"),d._bindOnLoadEvents(),d._afterWindowLoad()},_bindOnLoadEvents:function(){g.stackDiv.on("click",".logInBtnNba",function(e){return e.preventDefault(),window.showLogin("","NBA"),!1})},_fetchMoreShoppingList:function(){var n=m.shoppingListCount,e=Snapdeal.getAjaxResourcesPath("/web/getHomePageNBA/V2/"+n+"?spin="+p.cookieValues.spinCookie+"&cartId="+p.cookieValues.cartCookie);c.ajax({url:e,type:"GET",dataType:"JSON",success:function(e){var t,a;e&&(t=doT.template(c("#SL").html()),(a=JSON.parse(e[n].data).products)&&a.length?g.stackDiv.find(".shoppingListWidget").html(c(t(JSON.parse(e[n].data))).html()):(g.stackDiv.find(".shoppingListWidget").find(".heartLine").html("There are no items in your cart"),g.stackDiv.find(".shoppingListWidget").remove(),d._fetchMore()))}})},_fetchMoreCartItems:function(){var n=m.cartWidgetCount,e=Snapdeal.getAjaxResourcesPath("/web/getHomePageNBA/V2/"+n+"?spin="+p.cookieValues.spinCookie+"&cartId="+p.cookieValues.cartCookie);c.ajax({url:e,type:"GET",dataType:"JSON",success:function(e){var t,a;e&&(t=doT.template(c("#IC").html()),(e=JSON.parse(e[n].data))&&e.length?(g.stackDiv.find(".itemsInCartActnWidget").html(c(t(e)).html()),(a=e[0].cartCount)&&0<=a&&(g.stackDiv.find(".cartCount").html(a),Snapdeal.Cookie.set("cartQty",a),c(".cartQuantity").html(a)),parseInt(Snapdeal.Cookie.get("cartQty")),0<a?c(".cartQuantity").removeClass("hidden"):c(".cartQuantity").addClass("hidden")):(g.stackDiv.find(".itemsInCartActnWidget").find(".heartLine").html("There are no items in your cart"),g.stackDiv.find(".itemsInCartActnWidget").remove(),a=parseInt(Snapdeal.Cookie.get("cartQty")),(a-=1)&&0<=a&&(g.stackDiv.find(".cartCount").html(a),Snapdeal.Cookie.set("cartQty",a),c(".cartQuantity").html(a)),d._fetchMore()))}})},_removeCartItem:function(t,e,a,n){var i;Snapdeal.Cookie.get("spin")&&(i=(i=Snapdeal.Cookie.get("spin").split("-"))[0]),c.ajax({url:"/json/cart/operation/removeItemFromCart?catalogId="+a+"&vendorCode="+n+"&supc="+e+"&pincode="+i+"&bundleId=",type:"GET",success:function(e){t.parent().fadeOut();t.attr("index");d._fetchMoreCartItems()}})},_createBuyNowUrl:function(e,t){var a,n="",i=void 0===(i=e.attr("productType"))||""===i?"":"&productType="+i,r=e.attr("vendorCode"),d=e.attr("vendorScore");return i="OOPD"==e.attr("productType")?"&productType=OOD":i,n+=absoluteHttpsPath,n+="/buyNow",n+="?catalogId="+e.attr("catalog"),n+="&vendorCode="+r,n+="&vendorScore="+d||"",n+=i,n+="&supc="+e.attr("supc"),n+="&ref="+t,(a=c(".add-to-cart:eq(0)").is(":visible")?+c(".buy-quantity-count:eq(0)").text().trim():+c(".updated-quantity-number:eq(0)").text().trim())&&!isNaN(a)&&(n+="&quantity="+a),n},_next:function(t){g.stackDiv.find(".errorPincode").addClass("hidden");var e=c("html").hasClass("ie8")||c("html").hasClass("ie9")||0==m.platSupp;if(!(p.isAnimating||!p.infinite&&p.hasEnded)){p.isAnimating=!0;var a,n=g.stackDiv.find("li:visible"),i=g.stackDiv.find("li:visible").length;if(1!=i){a=n[p.current]||n[n.length-1],c(a).removeClass("stack__item--current"),"accept"===t&&c(a).addClass("stack__item--accept");var r=document.querySelector(".stack__item--accept");if(e||r.addEventListener("animationend",function(e){3<i&&0==c(".noAtionWidget").length?(a.style.opacity=0,a.style.pointerEvents="none",a.style.zIndex=-1,a.style.MozTransform=a.style.WebkitTransform=a.style.transform="translate3d(0px, 0px, -"+parseInt(50*p.visible)+"px)",a.style.transition="transform 0.5s ease-out",a.style.WebkitTransition="transform 0.5s ease-out",a.style.MozTransition="transform 0.5s ease-out"):2==i?(c(".stack__item--accept").css("margin","14px 0px 0 12px"),c(".stack__item--accept").css("z-index","2"),c(".stack__item--accept").css("opacity","1"),c(".stack__item--accept").css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),c(".stack__item--accept").css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),c(".stack__item--accept").css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)")):3==i&&(c(".stack__item--accept").css("margin","28px 0 0 24px"),c(".stack__item--accept").css("z-index","1"),c(".stack__item--accept").css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item--accept").css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item--accept").css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)")),"accept"===t&&c(a).removeClass("stack__item--accept"),n[p.current].style.zIndex=p.visible+1,p.isAnimating=!1,p.animCounter=0,p.infinite||0!==p.current||(p.hasEnded=!0)},!1),!(l=c("html").hasClass("ie8")||c("html").hasClass("ie9")||0==m.platSupp))for(var d=0;d<i&&!(d>=p.visible);++d){if(p.infinite)o=p.current+d<i-1?p.current+d+1:d-(i-p.current-1);else{if(p.current+d>=i-1)break;var o=p.current+d+1}var s=n[o];setTimeout(function(a,n){return function(){var e,t;t=n,(e=a)&&(p.animCounter=p.animCounter+1,e.style.pointerEvents="auto",e.style.opacity=1,e.style.zIndex=parseInt(p.visible-t),l||0!=c(".noAtionWidget").length||(1==p.animCounter?c(e).hasClass("stack__item--accept")?e.style.zIndex=4:(e.style.MozTransform=e.style.WebkitTransform=e.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",e.style.margin="0 0 0 0",e.style.zIndex=3):2==p.animCounter?c(e).hasClass("stack__item--accept")?e.style.zIndex=4:(e.style.MozTransform=e.style.WebkitTransform=e.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)",e.style.margin="14px 0px 0 12px",e.style.zIndex=2):3==p.animCounter&&(c(e).hasClass("stack__item--accept")?e.style.zIndex=4:(e.style.MozTransform=e.style.WebkitTransform=e.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)",e.style.margin="28px 0 0 24px",e.style.zIndex=1))))}}(s,d),p.stackItemsAnimationDelay)}var l=c("html").hasClass("ie8")||c("html").hasClass("ie9")||0==m.platSupp;p.current=p.current<i-1?p.current+1:0;r=n[p.current];c(r).addClass("stack__item--current"),l&&(c(".stack__item").css("opacity","0"),c(".stack__item").css("z-index","-1"),c(".stack__item--accept").css("opacity","0"),p.isAnimating=!1,c(".stack__item--current").css("z-index","3"),c(".stack__item--current").css("opacity","1"),c(a).removeClass("stack__item--accept"),p.animCounter=0,p.infinite||0!==p.current||(p.hasEnded=!0))}}},_accept:function(){d._next("accept")},_fetchMore:function(){if(c("html").hasClass("ie8")||c("html").hasClass("ie9")||0==m.platSupp)c(".stack__item").eq(0).css("z-index","3"),c(".stack__item").eq(0).css("opacity","1");else{var e=c(".stack__item").filter(function(){return 2==c(this).css("z-index")});if(e.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)"),e.css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)"),e.css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)"),e.css("margin","0 0 0 0"),e.css("z-index","4"),!e.next())return c(".stack__item").eq(0).css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),c(".stack__item").eq(0).css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),c(".stack__item").eq(0).css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),c(".stack__item").eq(0).css("margin","14px 0px 0 12px"),c(".stack__item").eq(0).css("z-index","2"),c(".stack__item").eq(1).css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item").eq(1).css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item").eq(1).css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item").eq(1).css("margin","28px 0 0 24px"),void c(".stack__item").eq(1).css("z-index","1");var t=e.next();t.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),t.css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),t.css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -50, 1)"),t.css("margin","14px 0px 0 12px"),t.css("z-index","2"),e.next().next()?((e=e.next().next()).css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),e.css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),e.css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),e.css("margin","28px 0 0 24px"),e.css("z-index","1")):(c(".stack__item").eq(0).css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item").eq(0).css("-webkit-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item").eq(0).css("-moz-transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -100, 1)"),c(".stack__item").eq(0).css("margin","28px 0 0 24px"),c(".stack__item").eq(0).css("z-index","1"))}},_bindStack:function(){g.stackDiv.addClass("perspective");for(var e=g.stackDiv.find("li:visible").length,t=g.stackDiv.find("li:visible"),a=0;a<e;++a){var n=t[a];a<p.visible?(n.style.opacity=1,n.style.pointerEvents="auto",n.style.zIndex=0===a?parseInt(p.visible+1):parseInt(p.visible-a),c("html").hasClass("ie8")||c("html").hasClass("ie9")||0==m.platSupp||(n.style.MozTransform=n.style.WebkitTransform=n.style.transform="translate3d(0px, 0px, "+parseInt(-50*a)+"px)",n.style.transition="transform 0.5s ease-out",n.style.WebkitTransition="transform 0.5s ease-out",n.style.MozTransition="transform 0.5s ease-out",0==a?n.style.margin="0 0 0 0":1==a?n.style.margin="14px 0px 0 12px":2==a&&(n.style.margin="28px 0 0 24px"))):(n.style.MozTransform=n.style.WebkitTransform=n.style.transform="translate3d(0,0,-"+parseInt(50*p.visible)+"px)",n.style.transition="transform 0.5s ease-out",n.style.WebkitTransition="transform 0.5s ease-out",n.style.MozTransition="transform 0.5s ease-out")}var i=t[p.current];c(i).addClass("stack__item--current")},_bindNBAEvents:function(){c(".loginWidgetImg , .pincodeImg").removeClass("lazyBg"),d._bindStack(),Snapdeal.loadCXEWidgets.setOmniCeeOnload(),g.stackDiv.on("click",'.button--accept[data-stack = "stack_yuda"]',function(){var e=c(this).parents(".nextBestActlist").attr("action");Snapdeal.omni.fire("nextBestAction",{widgetName:e}),d._accept(c(this))}),g.stackDiv.on("click",".pincodeSkipSubmit",function(){g.errorPincode.addClass("hidden"),Snapdeal.Cookie.get("spin")&&(g.stackDiv.find(".check-avail-pin-input-nba").addClass("hidden"),g.stackDiv.find(".nbaPincode").removeClass("hidden"),g.stackDiv.find(".pincodeNbaSubmit").text("Change Pincode").addClass("changePincode"))}),g.stackDiv.on("keyup","#pincode-check-nba",function(e){13==e.keyCode&&g.stackDiv.find(".pincodeNbaSubmit").trigger("click")}),g.stackDiv.on("click",".nbaPincode",function(){g.stackDiv.find(".pincodeNbaSubmit").trigger("click")}),g.stackDiv.on("click",".pincodeNbaSubmit",function(){var e=g.stackDiv.find("#pincode-check-nba").val();if(getOmnitureScript({pincode:e},"pdpZipCheckedNBA"),g.stackDiv.find(".errorPincode").addClass("hidden"),c(this).hasClass("changePincode"))return g.stackDiv.find(".check-avail-pin-input-nba").removeClass("hidden"),g.stackDiv.find(".nbaPincode").addClass("hidden"),g.stackDiv.find("#pincode-check-nba").val(""),void g.stackDiv.find(".pincodeNbaSubmit").text("Submit").removeClass("changePincode");e=g.stackDiv.find("#pincode-check-nba").val();e&&6==parseInt(e).toString().length&&0<e?(g.stackDiv.find(".check-avail-pin-input-nba").addClass("hidden"),g.stackDiv.find(".nbaPincode").removeClass("hidden").find(".pincodeNbaText").text(e),Snapdeal.Cookie.set("spin",e+"-homepage"),g.stackDiv.find(".errorPincode").addClass("hidden"),g.stackDiv.find(".pincodeNbaSubmit").text("Change Pincode").addClass("changePincode")):g.stackDiv.find(".errorPincode").removeClass("hidden")}),g.stackDiv.on("click",".viewAllCartBtn",function(){c(".headerBar").addClass("showCartZindx"),Snapdeal.shoppingCart.showCart("header"),getOmnitureScript({catalogId:c("#catalogId").val()},"openCart")}),g.stackDiv.on("click",".shortView",function(){Snapdeal.Cookie.set("track","HID=nextBestAction_Shortlist_viewAll")}),g.stackDiv.on("click",".superView",function(){Snapdeal.Cookie.set("track","HID=nextBestAction_SuperDeal_viewAll")}),g.stackDiv.on("click",".nbaViewDet, .shortListName, .shortListImg",function(){c(this).parents(".nextBestActlist").hasClass("shortListActnWidget")&&Snapdeal.Cookie.set("track","HID=nextBestAction_shortlist_NBA")}),g.stackDiv.on("click",".nbaViewDet, .shortListName, .shortListImg",function(){c(this).parents(".nextBestActlist").hasClass("shoppingListWidget")&&Snapdeal.Cookie.set("track","HID=nextBestAction_shoppinglist_NBA")}),g.stackDiv.on("click",".nbaViewDet, .shortListName, .shortListImg",function(){c(this).parents(".nextBestActlist").hasClass("itemsInCartActnWidget")&&Snapdeal.Cookie.set("track","HID=nextBestAction_cart_NBA")}),g.stackDiv.on("click",".genericBan",function(){var e=c(this).parent().attr("href");Snapdeal.Cookie.set("track","HID=nextBestAction_generic_widget_"+e)}),g.stackDiv.on("click",".genericAnchr",function(){c(this).attr("href");Snapdeal.Cookie.set("track","HID=nextBestAction_generic_widget_viewAll")}),g.stackDiv.on("click",".superDealOfTheDayWidget",function(){Snapdeal.Cookie.set("track","HID=nextBestAction_superDeal")}),g.stackDiv.on("click",".nbaDonationWidget",function(){Snapdeal.Cookie.set("track","HID=nextBestAction_donationWidget")}),g.stackDiv.on("click",".donationSubmit",function(){Snapdeal.Cookie.set("track","HID=nextBestAction_donationSubmit")}),g.stackDiv.on("click",".donationSubmit",function(){Snapdeal.Cookie.set("track","HID=nextBestAction_Donation")}),g.nextBestActnWidget.on("click",".trackOrderButton",function(){window.open(absoluteHttpPath+"/myorders","_blank"),Snapdeal.Cookie.set("track","HID=nextBestAction_myOrders_viewAll")}),g.nextBestActnWidget.on("click",".cartDelete",function(){var e=c(this),t=e.attr("supc"),a=e.attr("catalogId"),n=e.attr("vendorCode");d._removeCartItem(e,t,a,n)}),g.nextBestActnWidget.on("click",".shortListDel",function(){var e=c(this),t=e.attr("data-pog");getOmnitureScript({podId:t,action:"remove"},pageName+"Shortlists"),d._removeShortListItem(e,t)}),g.nextBestActnWidget.on("click",".removeShopping",function(){var e=c(this).parents(".shoppingDiv"),t=c(this).attr("data-pog");c.ajax({url:"/json/removePOGFromFMCGCollection?pogId="+t,type:"POST",dataType:"json",cache:"false",success:function(){e.fadeOut(),d._fetchMoreShoppingList()}})}),g.nextBestActnWidget.on("click",".nbaBuyLink",function(){var e=c(this),e=(e.attr("supc"),e.attr("catalogId"),e.attr("vendorCode"),d._createBuyNowUrl(e,"BuyButton-nbaBuy"));Snapdeal.Cookie.set("track","HID=nextBestAction_nbaBuy"),window.location.href=e})},_fetchMoreShortlistItems:function(){var a=m.shortlistWidgetCount,e=Snapdeal.getAjaxResourcesPath("/web/getHomePageNBA/V2/"+a+"?spin="+p.cookieValues.spinCookie+"&cartId="+p.cookieValues.cartCookie);c.ajax({url:e,type:"GET",dataType:"JSON",success:function(e){var t;0<e.length&&(t=doT.template(c("#SP").html()),(e=JSON.parse(e[a].data))?g.stackDiv.find(".shortListActnWidget").html(c(t(e)).html()):(g.stackDiv.find(".shortListActnWidget").find(".heartLine").html("There are no items in your shortlist"),g.stackDiv.find(".shortListActnWidget").remove(),d._fetchMore()))}})},_removeShortListItem:function(t,e){return c.ajax({url:"/wishlist/remove?pog="+e,type:"GET",dataType:"json",cache:"false",success:function(e){"FAIL"==e.status||(t.parent().fadeOut(),t.attr("index"),c(".shortLstDiv:visible").length,d._fetchMoreShortlistItems())}})},_appendPin:function(){var e;Snapdeal.Cookie.get("spin")&&"null"!=Snapdeal.Cookie.get("spin")&&"undefined"!=Snapdeal.Cookie.get("spin")&&(e=(e=Snapdeal.Cookie.get("spin").split("-"))[0])&&6==parseInt(e).toString().length&&(g.stackDiv.find(".nbaPincode").removeClass("hidden").find(".pincodeNbaText").text(e),g.stackDiv.find(".check-avail-pin-input-nba").addClass("hidden"),g.stackDiv.find(".pincodeNbaSubmit").text("Change Pincode").addClass("changePincode"))},_computeNextBestActn:function(e,t){var a,n,i=c(".nextBestActnWidget").attr("widgetLength"),r=e[t].widgetLabel;c("#"+r).html()&&(n=doT.template(c("#"+r).html()),"OW"==r&&JSON.parse(e[t].data)&&0<JSON.parse(e[t].data).pendingOrderItems.length?(g.stackDiv.append(n(JSON.parse(e[t].data))),g.stackDiv.find(".nbaDefaultWidget").remove()):"IC"==r&&JSON.parse(e[t].data)&&0<JSON.parse(e[t].data).length?(a=JSON.parse(e[t].data).length,g.stackDiv.append(n(JSON.parse(e[t].data))),1<a?(g.stackDiv.find(".areField").html("are"),g.stackDiv.find(".itemsVal").html("items")):(g.stackDiv.find(".areField").html("is"),g.stackDiv.find(".itemsVal").html("item")),(a=JSON.parse(e[t].data)[0].cartCount)&&0<=a&&(g.stackDiv.find(".cartCount").html(a),Snapdeal.Cookie.set("cartQty",a),c(".cartQuantity").html(a)),0<a?c(".cartQuantity").removeClass("hidden"):c(".cartQuantity").addClass("hidden"),m.cartWidgetCount=t,g.stackDiv.find(".nbaDefaultWidget").remove()):"SP"==r&&JSON.parse(e[t].data)&&0<JSON.parse(e[t].data).shortListProducts.length?(g.stackDiv.append(n(JSON.parse(e[t].data))),m.shortlistWidgetCount=t,g.stackDiv.find(".nbaDefaultWidget").remove()):"SDOD"==r&&JSON.parse(e[t].data)&&JSON.parse(e[t].data).widgetList?(JSON.parse(e[t].data).widgetList[JSON.parse(e[t].data).widgetList.length-1]&&"PRODUCT"==JSON.parse(e[t].data).widgetList[JSON.parse(e[t].data).widgetList.length-1].bannerType&&1!=JSON.parse(e[t].data).widgetList[JSON.parse(e[t].data).widgetList.length-1].soldout&&g.stackDiv.append(n(JSON.parse(e[t].data))),g.stackDiv.find(".nbaDefaultWidget").remove()):"LM"==r?(JSON.parse(Snapdeal.localStorage.getItem("authData"))&&JSON.parse(Snapdeal.localStorage.getItem("authData")).trackingEmail||g.stackDiv.append(n(JSON.parse(e[t].data))),g.stackDiv.find(".nbaDefaultWidget").remove()):"PINM"==r?(g.stackDiv.append(n(JSON.parse(e[t].data))),d._appendPin(),g.stackDiv.find(".nbaDefaultWidget").remove(),c(".lazyBg").removeClass("lazyBg")):"DW"==r||"GW"==r&&JSON.parse(e[t].data)?(g.stackDiv.append(n(JSON.parse(e[t].data))),g.stackDiv.find(".nbaDefaultWidget").remove()):"SL"==r&&JSON.parse(e[t].data)&&0<JSON.parse(e[t].data).products.length&&(g.stackDiv.append(n(JSON.parse(e[t].data))),m.shoppingListCount=t,g.stackDiv.find(".nbaDefaultWidget").remove()),1==g.stackDiv.find("li").length&&(c(".stack__item").css("opacity","1").css("z-index","4"),c(".lazyBg").removeClass("lazyBg"))),(t+=1)<i?(p.index=t,d._nextBestHit()):d._bindNBAEvents()},_nextBestHit:function(){var t,e;p.cookieValues={spinCookie:Snapdeal.Cookie.get("spin")?Snapdeal.Cookie.get("spin"):"",cartCookie:Snapdeal.Cookie.get("cartId")?Snapdeal.Cookie.get("cartId"):""},t=p.index,e=Snapdeal.getAjaxResourcesPath("/web/getHomePageNBA/V2/"+t+"?spin="+p.cookieValues.spinCookie+"&cartId="+p.cookieValues.cartCookie),c.ajax({url:e,type:"GET",dataType:"JSON",success:function(e){0<e.length&&(c(".nextBestActnWidget").attr("widgetLength",e.length),p.nextWidgetLen=c(".nextBestActnWidget").attr("widgetLength"),d._computeNextBestActn(e,t))}})},_afterWindowLoad:function(){c(window).load(function(){var e;c("html").hasClass("ie8")?d._nextBestHit():e=setInterval(function(){0<document.getElementById("homeTemplates").innerHTML.length&&(d._nextBestHit(),clearInterval(e))},100)})}};return{init:function(){return d._init.apply(this,arguments)}}}(window.jQuery),Snapdeal.nextBestAction.init(),(Snapdeal=Snapdeal||{}).homePageAdtechIntegration=function(C){var h={centerCardWidgets:C("#centerCardWidgets"),homePageWidgetCount:C("#homePageWidgetCount")},v=(parseInt(h.homePageWidgetCount.val()),{_init:function(){v._fixedPositionGoldBanner()},_goldBanner1:function(){var e=parseInt(h.centerCardWidgets.attr("adTechInstance"));if("true"==C("#adtechHomePageGoldBanner1Switch").val()&&"true"==C("#adtechGlobalSwitchWeb").val()){var t=Snapdeal.Cookie.get("u"),a=C("#homePagePagetypeGoldBanner1Web").val(),n=C("#homePageResponseTypeGoldBanner1web").val(),i=C("#homePageResponseTimeGoldBanner1Web").val(),r=C("#homePageTemplateIdGoldBanner1Web").val(),d=C("#homePageAdSpaceIdGoldBanner1Web").val()+"-"+e,o=C("#homePagePubIdGoldBanner1Web").val(),s=C("#homePageSiteIdGoldBanner1Web").val(),l=C("#homePageWebIpGoldBanner1Web").val(),c=e-1,p=v._getCookie("spin"),g=v._getCookie("zone"),e="";try{e=JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile}catch(e){}p=null!=p?p.split("-")[0]:"";C.ajax({type:"GET",dataType:"html",contentType:"application/x-www-form-urlencoded; charset=UTF-8",url:l+"/pub/getContent?pubId="+o+"&rs=html&templateId="+r+"&adspaceId="+d+"&siteId="+s+"&response_type="+n+"&pagetype="+a+"&sdId="+t+"&pincode="+p+"&zone="+g+"&phn="+e,cache:!0,timeout:i,success:function(e){e?Snapdeal.loadCXEWidgets.appendStructure("ribbon",e):C(".adtechGoldBanner1").eq(c).closest(".homePageSection").addClass("hidden")},error:function(e,t,a){C(".adtechGoldBanner1").eq(c).closest(".homePageSection").addClass("hidden")}}),C("#adtechGoldBanner1").on("click",function(){Snapdeal.Cookie.set("track","HID=RibbonBanner_adtech_"+a.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+n.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+d)})}},_fixedPositionGoldBanner:function(){var e=parseInt(h.centerCardWidgets.attr("adTechInstance"));if("true"==C("#adtechHomePageGoldBanner1Switch").val()&&"true"==C("#adtechGlobalSwitchWeb").val()){var t=Snapdeal.Cookie.get("u");email=(email=Snapdeal.Cookie.get("eid"))?email.substring(1,email.length-1):"";var a=C("#homePagePagetypeGoldBanner1Web").val(),n=C("#homePageResponseTypeGoldBanner1web").val(),i=C("#homePageResponseTimeGoldBanner1Web").val(),r=C("#homePageTemplateIdGoldBanner1Web").val(),d=C("#homePageAdSpaceIdGoldBanner1Web").val()+"-"+e+"-"+e,o=C("#homePagePubIdGoldBanner1Web").val(),s=C("#homePageSiteIdGoldBanner1Web").val(),l=(C("#adspaceIdParameter").val(),C("#responseTypeParameter").val(),C("#homePageWebIpGoldBanner1Web").val()),c=e-1,p=v._getCookie("spin"),g=v._getCookie("zone"),e="";try{e=JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile}catch(e){}var p=null!=p?p.split("-")[0]:"",e=l+"?pubId="+o+"&rs=html&templateId="+r+"&adspaceId="+d+"&siteId="+s+"&response_type="+n+"&pagetype="+a+"&sdId="+t+"&eId="+email+"&pincode="+p+"&zone="+g+"&phn="+e,m=new XMLHttpRequest;if(window.XMLHttpRequest)try{m=new XMLHttpRequest}catch(e){m=new window.ActiveXObject("Microsoft.XMLHTTP")}m.onreadystatechange=function(){var e;4==m.readyState&&200==m.status?(clearTimeout(u),e=setInterval(function(){var t;"complete"!==document.readyState&&"interactive"!==document.readyState||(clearInterval(e),t=setInterval(function(){var e;C&&C.fn&&(clearInterval(t),(e=C(m.responseText))?(Snapdeal.loadCXEWidgets.appendStructure("ribbon",e),C(".adtechGoldBanner1").removeClass("hidden").append(e)):C(".adtechGoldBanner1").eq(c).closest(".homePageSection").addClass("hidden"))},50))},100)):C(".adtechGoldBanner1").eq(c).closest(".homePageSection").addClass("hidden")},m.open("GET",e,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.send();var u=setTimeout(function(){m.abort()},i);C(".centerCardAfterLoadWidgets").on("mousedown",".adtechGoldBanner1",function(){Snapdeal.Cookie.set("track","HID=RibbonBanner_adtech_"+a.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+n.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+d)})}},_platinumBanner:function(){if("true"==C("#adtechHomePagePlatinumbanner5thSwitch").val()&&"true"==C("#adtechGlobalSwitchWeb").val()){var e=Snapdeal.Cookie.get("u");email=(email=Snapdeal.Cookie.get("eid"))?email.substring(1,email.length-1):"";var t=C("#homePagePagetypeplatinum5thWeb").val(),a=C("#homePageResponseTypeplatinum5thweb").val(),n=C("#homePageResponseTimeplatinum5thWeb").val(),i=C("#homePageTemplateIdplatinum5thWeb").val(),r=C("#homePageAdSpaceIdplatinum5thWeb").val(),d=C("#homePagePubIdplatinum5thWeb").val(),o=C("#homePageSiteIdplatinum5thWeb").val(),s=C("#adspaceIdParameter").val(),l=C("#responseTypeParameter").val(),c=C("#homePageWebIpplatinum5thWeb").val(),p=v._getCookie("spin"),g=v._getCookie("zone"),m="";try{m=JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile}catch(e){}p=null!=p?p.split("-")[0]:"",m=c+"?pubId="+d+"&rs=html&templateId="+i+"&"+s+"="+r+"&siteId="+o+"&"+l+"="+a+"&pagetype="+t+"&sdId="+e+"&eId="+email+"&pincode="+p+"&zone="+g+"&phn="+m;C.ajax({type:"GET",dataType:"html",contentType:"application/x-www-form-urlencoded; charset=UTF-8",url:m,cache:!0,timeout:n,success:function(e){e?(C(".main-banner-wrapper").find("#platinumBanner-adtech").append(e).removeClass("hidden"),C(".main-banner-wrapper").find("#platinumBanner-adtech-fallback").remove()):C(".main-banner-wrapper").find("#platinumBanner-adtech").remove()},error:function(e,t,a){C(".main-banner-wrapper").find("#platinumBanner-adtech").remove()}}),C("#platinumBanner-adtech").on("click",function(){Snapdeal.Cookie.set("track","HID=TopBanner_adtech_"+t.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+a.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+r)})}},_configurablePositionGoldBanner:function(){if("true"==C("#adtechHomePageGoldBanner2Switch").val()&&"true"==C("#adtechGlobalSwitchWeb").val()){var e=Snapdeal.Cookie.get("u");email=(email=Snapdeal.Cookie.get("eid"))?email.substring(1,email.length-1):"";var i=C("#homePageRowGoldBanner2Web").val(),t=C("#homePagePagetypeGoldBanner2Web").val(),a=C("#homePageResponseTypeGoldBanner2web").val(),n=C("#homePageResponseTimeGoldBanner2Web").val(),r=C("#homePageTemplateIdGoldBanner2Web").val(),d=C("#homePageAdSpaceIdGoldBanner2Web").val(),o=d.split("-");o[4];o[4]=i,o[4],adSpaceIdNew=(d=o).join("-");var s=C("#homePagePubIdGoldBanner2Web").val(),l=C("#homePageSiteIdGoldBanner2Web").val(),c=(C("#adspaceIdParameter").val(),C("#responseTypeParameter").val(),C("#homePageWebIpGoldBanner2Web").val()),p=C("#adspaceIdParameter").val(),g=C("#responseTypeParameter").val(),m=v._getCookie("spin"),u=v._getCookie("zone"),o="";try{o=JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile}catch(e){}var m=null!=m?m.split("-")[0]:"",o=c+"?pubId="+s+"&rs=html&templateId="+r+"&"+p+"="+adSpaceIdNew+"&siteId="+l+"&"+g+"="+a+"&pagetype="+t+"&sdId="+e+"&eId="+email+"&pincode="+m+"&zone="+u+"&phn="+o,h=new XMLHttpRequest;if(window.XMLHttpRequest)try{h=new XMLHttpRequest}catch(e){h=new window.ActiveXObject("Microsoft.XMLHTTP")}h.onreadystatechange=function(){var e;4==h.readyState&&200==h.status?(clearTimeout(f),e=setInterval(function(){var n;"complete"!==document.readyState&&"interactive"!==document.readyState||(clearInterval(e),n=setInterval(function(){var e,t,a;C&&C.fn&&(clearInterval(n),(a=C(h.responseText))?((e=C("#adtechGoldBanner2")).removeClass("hidden"),t=e.append(a).append('<img src="http://test.snapdeal.biz/test-pixel" width="1" height="1"  class="hidden">'),a='.adtechBannerHomePage[data-row="'+i+'"]',"2"==i&&(a=C(a).find('.adClass[name="smallBanner"]:first')),t.insertAfter(a)):e.addClass("hidden"))},50))},100)):C(".adtechGoldBanner2").addClass("hidden")},h.open("GET",o,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(),"true"===C("#adTechBannerRequestSendFlag").val()&&C("#adtechGoldBanner2").append('<img src="http://test.snapdeal.biz/test-pixel" width="1" height="1"  class="hidden">');var f=setTimeout(function(){h.abort()},n);C("#adtechGoldBanner2").on("click",function(){Snapdeal.Cookie.set("track","HID=RibbonBanner_adtech_"+t.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+a.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")+"_"+d)}),0<C(".exclusives-homepage").length&&C("#ribbonBannerContainer1").insertBefore(".exclusives-homepage")}},_getCookie:function(e){if(0<document.cookie.length){if(begin=document.cookie.indexOf(" "+e+"="),-1!=begin)return begin+=e.length+2,end=document.cookie.indexOf(";",begin),-1==end&&(end=document.cookie.length),unescape(document.cookie.substring(begin,end));if(begin=document.cookie.indexOf(e+"="),-1!=begin)return begin+=e.length+1,end=document.cookie.indexOf(";",begin),-1==end&&(end=document.cookie.length),unescape(document.cookie.substring(begin,end))}return null}});return{init:function(){return v._init.apply(this,arguments)}}}(window.jQuery),(Snapdeal=Snapdeal||{}).fmcgProductTuple=function(s){var d={succesMsg:"",errorMsg:"Something went wrong, please try again.",updateErrorMsg:"Sorry! Item quantity could not be updated. Please try again later or continue without updating.",addCartErrorMsg:"Sorry, unable to add item to your cart at this moment. Please try again later.",removeCartErrorMsg:"Sorry! Item could not be removed. Please try again later or continue without removing.",showCartErrorMsg:"Sorry, unable to show your cart at this moment. Please try again later.",quantityErrorMsg:"Sorry! You can not add more items to the cart. Please remove some items from cart to continue.",updateSuccessMsg:"Updated successfully",removeSuccessMsg:"Product removed successfully",errorClassName:"error-msg",toastDisplayTimeInMiliSec:2e3,maxFMCGQuantity:s("#maxFMCGQuantity").val()?+s("#maxFMCGQuantity").val().trim():0},e="csfDarwin"==pageName,l={productRow:s(e?".fmcg-container":".centerCard-section"),stackDiv:s("#stack_yuda")},c={_init:function(e){"true"===s("#isFMCGAvailable").val()&&(s.extend(!0,{},d,e),c._bindEvents())},_bindEvents:function(){l.productRow.on("click",".pt-quantity-control",function(e){e.preventDefault(),e.stopPropagation(),c._handleQuantityControlClick(s(this))}),l.productRow.on("click",".pt-add-cart-btn",function(e){e.preventDefault(),e.stopPropagation(),c._handleAddCartClick(s(this))}),l.stackDiv.on("click",".pt-add-cart-btn",function(e){e.preventDefault(),e.stopPropagation(),c._handleAddCartClick(s(this))}),l.productRow.on("click",".pt-cart-plus, .pt-cart-minus",function(e){e.preventDefault(),e.stopPropagation(),c._handleUpdateClick(s(this))}),s(window).load(function(){}),s(window).on("newProductsLoaded",function(){c._updateFMCGQuantity()}),s(".cartToastMsg").on("click",".openCartModal",function(){c._opentCartFromContinue()}),s(document).on("cartItemUpdation",function(e,t){c._cartOperationsHandler(t)}),s(document).on("addItemToCart",function(e,t){c._addItemHandler(t)}),s(document).on("updateQuantityCartItem",function(e,t){c._updateItemHandler(t)}),s(document).on("removeCartItem",function(e,t){c._removeItemHandler(t)})},_handleQuantityControlClick:function(e){var t,a,n,i,r;e.hasClass("disable-count-arrow")||(n=(a=(t=e.closest(".category-pt-cart-options")).find(".pt-quantity-value")).text().trim(),i=0,r=d.maxFMCGQuantity,e.hasClass("ptQuantityControlUp")?i=+n+1:e.hasClass("ptQuantityControlDown")&&(i=+n-1),1===i?(a.text(1),a.attr("title",1),t.find(".ptQuantityControlDown").addClass("disable-count-arrow"),t.find(".ptQuantityControlUp").removeClass("disable-count-arrow")):(0<r&&i===r?t.find(".ptQuantityControlUp").addClass("disable-count-arrow"):t.find(".ptQuantityControlUp").removeClass("disable-count-arrow"),a.text(i),a.attr("title",i),t.find(".ptQuantityControlDown").removeClass("disable-count-arrow")))},_handleAddCartClick:function(e){var t=e.closest(".category-pt-cart-options"),a=e.closest(".product-relative"),n=a.attr("data-defaultCatalogueIdForFMCG"),i=a.attr("data-vendorCode"),r=a.attr("data-defaultSupcForFMCG"),t=t.find(".pt-quantity-value").text().trim();s(a.find(".product-tuple-image .product-image")[0]).attr("src"),a.find(".product-tuple-description .product-title").text();e.hasClass("nbaAddToCartLink")&&(t=1),Snapdeal.shoppingCart.getCartJsonData("addItemToCart",{catalogId:n,vendorCode:i,supc:r,qty:t,pogid:a.attr("id")},!0,{},c._omnitureAddToCart(a))},_handleUpdateClick:function(e){var t,a,n,i,r,d,o;e.hasClass("disable-count-arrow")||(o=e.closest(".category-pt-cart-options"),a=(t=e.closest(".product-relative")).attr("data-defaultCatalogueIdForFMCG"),n=t.attr("data-vendorCode"),i=t.attr("data-defaultSupcForFMCG"),r=o.find(".pt-update-number").text().trim(),d=0,Snapdeal.Cookie.get("cartId"),s(t.find(".product-tuple-image .product-image")[0]).attr("src"),t.find(".product-tuple-description .product-title").text(),o={},e.hasClass("pt-cart-plus")?d=+r+1:e.hasClass("pt-cart-minus")&&(d=+r-1),o.catalogId=a,o.pageName=s("body").attr("data-pagename")||"",0===d?Snapdeal.shoppingCart.getCartJsonData("removeCartItem",{catalogId:a,vendorCode:n,supc:i,qty:d,pogid:t.attr("id")},!0,{},o):0<d&&(o.qty=d,Snapdeal.shoppingCart.getCartJsonData("updateQuantityCartItem",{catalogId:a,vendorCode:n,supc:i,qty:d,pogid:t.attr("id")},!0,{},o)))},_addItemHandler:function(e){c._handleAjaxResponse(e)},_updateItemHandler:function(e){c._handleAjaxResponse(e)},_removeItemHandler:function(e){c._removeAddedProduct(e.obj),c._getFMCGItems(e.data)},_handleAjaxResponse:function(e){for(var t=c._getFMCGItems(e),a=t.length,n=0,n=0;n<a;n++)c._updateFMCGTuple(t[n])},_getFMCGItems:function(e){if(e&&null!=e.data){var t,a,n=e.data.cartSRO,i=n.baskets,r=[],e=0,d=(i=i?Snapdeal.Utils.fixArray(i):[]).length,e=n.cartItem?Snapdeal.Utils.fixArray(n.cartItem).length:0;if(d)for(t=0;t<d;t++)if("FMCG"==i[t].basketType){a=i[t];break}return a&&(e+=(r=a.basketItems?Snapdeal.Utils.fixArray(a.basketItems):[]).length),c._updateCartCount(e),r}},_updateFMCGTuple:function(e){var t=e.POGId,a=e.vendorCode,n=e.supc,i=e.quantity,e=e.maxUnitsAllowed,t=l.productRow.find(".product-relative[id="+t+"]");t.attr("data-defaultsupcforfmcg")==n&&t.attr("data-vendorcode")==a&&(i?(t.find(".pt-update-number").text(i),t.find(".pt-cart-add-options").addClass("display-none"),t.find(".pt-cart-update-options").removeClass("display-none"),t.find(".pt-added-bar").removeClass("display-none").find(".pt-added-text").text(i+" ADDED"),i===e?t.find(".pt-cart-plus").addClass("disable-count-arrow"):t.find(".pt-cart-plus").removeClass("disable-count-arrow")):(t.find(".pt-cart-add-options").removeClass("display-none").find(".ptQuantityControlDown").addClass("disable-count-arrow").end().find(".ptQuantityControlUp").removeClass("disable-count-arrow"),t.find(".pt-cart-update-options").addClass("display-none"),t.find(".pt-quantity-value").text("1"),t.find(".pt-added-bar").addClass("display-none")))},_removeAddedProduct:function(e){null==e||null!=e.isRemoved&&0==e.isRemoved||((e=l.productRow.find(".product-relative[data-defaultsupcforfmcg = "+e.supc+"]")).find(".pt-quantity-value").text(1),e.find(".pt-cart-add-options").removeClass("display-none").find(".ptQuantityControlDown").addClass("disable-count-arrow").end().find(".ptQuantityControlUp").removeClass("disable-count-arrow"),e.find(".pt-cart-update-options").addClass("display-none"),e.find(".pt-added-bar").addClass("display-none"))},_updateCartCount:function(e){s("#cartModal").trigger("updateCartQty",{cartQty:e}),Snapdeal.Cookie.set("cartQty",e,1e3)},_updateTupleControls:function(e,t,a){for(var n=Snapdeal.Utils.fixArray(e.cartSRO.cartItem),i=n.length,r=0;r<i;r++)n[r].supc==a&&(t.find(".pt-update-number").text(n[r].quantity),n[r].quantity===n[r].maxUnitsAllowed?t.find(".pt-cart-plus").addClass("disable-count-arrow"):t.find(".pt-cart-plus").removeClass("disable-count-arrow"))},_toastMsgString:function(e){var t="";try{t='<div class="msgToast"><span >'+e+"</span></div>"}catch(e){t=d.errorMsg}return t},_updateFMCGQuantity:function(o){var a=[],n="";s(".cart-enabled-tuple").each(function(e,t){n=s(t),a.push({vendorCode:n.attr("data-vendorCode"),supc:n.attr("data-defaultSupcForFMCG"),fmcgQuantity:0,pogId:n.attr("id")})}),s.ajax({method:"POST",url:"/acors/json/getFMCGDetails",data:JSON.stringify({fmcgDetailsDTOList:a}),contentType:"application/json",success:function(e){if(null!=e&&null!=e.fmcgDetailsDTOList){for(var t,a,n,i="",r=e.fmcgDetailsDTOList.length,d=0;d<r;d++)a=(t=e.fmcgDetailsDTOList[d]).fmcgQuantity,i=l.productRow.find(".product-relative[id="+t.pogId+"]"),0==a?(i.find(".pt-cart-add-options").removeClass("display-none").find(".ptQuantityControlDown").addClass("disable-count-arrow").end().find(".ptQuantityControlUp").removeClass("disable-count-arrow"),i.find(".pt-cart-update-options").addClass("display-none"),i.find(".pt-quantity-value").text("1"),i.find(".pt-added-bar").addClass("display-none")):(i.find(".pt-cart-add-options").addClass("display-none"),i.find(".pt-cart-update-options").removeClass("display-none"),i.find(".pt-update-number").text(a),i.find(".pt-added-bar").removeClass("display-none").find(".pt-added-text").text(a+" ADDED")),i.removeClass("cart-enabled-tuple");o&&(n=0<e.cartQuantity?e.cartQuantity:0,c._updateCartCount(n))}else o&&c._updateCartCount(Snapdeal.Cookie.get("cartQty")||0)}})},_opentCartFromContinue:function(){Snapdeal.shoppingCart.showCart("",!0)},_cartOperationsHandler:function(e){var t=e.url,a=e.supc,n=e.qty,i=e.maxUnits;switch(t){case"updateListQuanity":c._updateListProductQuantity(a,n,i);break;case"removeListQuanity":c._removeListProductQuantity(a)}},_updateListProductQuantity:function(e,t,a){l.productRow.find(".product-relative[data-defaultsupcforfmcg = "+e+"] .pt-update-number").text(t),l.productRow.find(".product-relative[data-defaultsupcforfmcg = "+e+"]").find(".pt-added-text").text(t+" ADDED"),t==a?l.productRow.find(".product-relative[data-defaultsupcforfmcg = "+e+"] .pt-cart-plus").addClass("disable-count-arrow"):l.productRow.find(".product-relative[data-defaultsupcforfmcg = "+e+"] .pt-cart-plus").removeClass("disable-count-arrow")},_removeListProductQuantity:function(e){e=l.productRow.find(".product-relative[data-defaultsupcforfmcg = "+e+"]");e.find(".pt-added-bar").addClass("display-none"),e.find(".pt-quantity-value").text(1),e.find(".pt-cart-add-options").removeClass("display-none").find(".ptQuantityControlDown").addClass("disable-count-arrow").end().find(".ptQuantityControlUp").removeClass("disable-count-arrow"),e.find(".pt-cart-update-options").addClass("display-none"),e.find(".pt-added-bar").addClass("display-none")},_omnitureAddToCart:function(e){var t=e.find(".cashBackColor").text().toLowerCase().replace("rs.","").trim();return{quantity:e.find(".pt-quantity-value").text(),basketId:"true",pageName:s("body").attr("data-pagename"),catalogId:e.attr("data-defaultcatalogueidforfmcg"),categoryUrl:window.location.href,prebook:e.attr("data-isPrebook"),live:e.attr("data-isLive"),vendorCode:e.attr("data-vendorcode"),vendorScore:e.attr("vendorscore")||"",buyBtnOrder:"addToCartFMCG",shippingCharges:e.attr("shippingcharges")||"",cashBackValue:t||0}}};return{init:function(){return c._init.apply(this,arguments)}}}(window.jQuery),Snapdeal.fmcgProductTuple.init(),(Snapdeal=Snapdeal||{}).mandatoryRating=function(o){var s={mandatoryWidgetHomepage:o("#mandatoryWidgetHomepage"),mandatoryRatingEnable:o("#mandatoryRatingEnable"),rtoWidgetHomepage:o("#rtoWidgetHomepage"),filledIndex:-1},l={suborderCode:"",productId:"",catalogId:"",emailId:""},a={_init:function(){a._bindEvents(),"true"==s.mandatoryRatingEnable.val()&&a._windowLoad()},_bindEvents:function(){o(".common-modal").on("click",".ratings-modal .single-star",function(e){Snapdeal.commonModal.showLoader(),a._changeRatings(o(this)),Snapdeal.commonModal.hideLoader()}),o(".rtoTextarea").on("focus",function(){o("#rtoErrorTextarea").addClass("hidden"),"Write a reason"==o(this).val()&&(o(this).val(""),o(this).addClass("colorTextarea"))}),o(".common-modal-container").on("click",".radioButtonCont",function(){o(".rtoError").addClass("hidden"),o(".common-modal-container").find(".radioButtonCont").removeClass("radioSelected"),o(this).addClass("radioSelected"),o("#selectedMsg").val(o(this).next(".radioButtonMsg").text()),"Other Reasons"==o(this).next(".radioButtonMsg").text().trim()?o(".rtoTextarea").addClass("displayBlock"):o(".rtoTextarea").removeClass("displayBlock")}),o(".common-modal").on("mouseover",".ratings-modal .single-star",function(e){var t=o(this).index()+1;o(".rate-text-modal").addClass("hidden"),o(".rate-text-modal-hover").html(["Disappointing","Bad","Average","Good","Excellent"][t-1]).removeClass("hidden"),o(".ratings-modal .single-star").removeClass("filled"),o(".ratings-modal .single-star:lt("+o(this).index()+")").addClass("hovered"),o(this).addClass("hovered"),a._rateStarBackStyling()}),o(".common-modal").on("mouseleave",".ratings-modal .single-star",function(e){var t=s.filledIndex+1;o(".rate-text-modal-hover").html("").addClass("hidden"),o(".rate-text-modal").removeClass("hidden"),o(".ratings-modal .single-star:lt("+o(this).index()+")").removeClass("hovered"),o(this).removeClass("hovered"),a._rateStarBackStyling(),o(".ratings-modal .single-star:lt("+t+")").addClass("filled")}),o(".ratings-modal-class").on("click",".okayButton",function(){Snapdeal.commonModal.close()}),o(".common-modal").on("click","#ratingsSubmit",function(e){a._submitRatings()}),o(".common-modal").on("click",".ratingsCancel",function(e){a._closeRatings()}),o(".common-modal").on("click",".common-modal-content",function(e){e.stopPropagation()}),o(".common-modal").click(function(){o("#rtoFeedbackPopup").addClass("hidden"),Snapdeal.commonModal.close()}),o("#rtoFeedbackSubmit").on("click",function(){var e;o(".common-modal-container").find(".radioButtonCont").hasClass("radioSelected")&&("Other Reasons"!=o("#selectedMsg").val().trim()||"Write a reason"!=o(".rtoTextarea").val()&&""!=o(".rtoTextarea").val())&&(o(".common-modal").addClass("hidden"),e={},e="Write a reason"==o(".rtoTextarea").val()?{orderCode:o("#rtoOrderCode").val(),formType:o("#formType").val(),reasonSelected:o("#selectedMsg").val().trim()}:{orderCode:o("#rtoOrderCode").val(),formType:o("#formType").val(),reasonSelected:o("#selectedMsg").val().trim()+": "+o(".rtoTextarea").val()},window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("clickStream","rtoFeedbackSubmit",e)),"Other Reasons"==o("#selectedMsg").val().trim()?"Write a reason"!=o(".rtoTextarea").val()&&""!=o(".rtoTextarea").val()||o("#rtoErrorTextarea").removeClass("hidden"):o("#rtoFeedbackReason").removeClass("hidden")}),o(".rtoModalClose").on("click",function(){o("#rtoFeedbackPopup").addClass("hidden");var e={orderCode:o("#rtoOrderCode").val(),formType:o("#formType").val(),type:"modalCross"};window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("clickStream","rtoFeedbackAction",e)})},_windowLoad:function(){Snapdeal.Cookie.get("eid")&&(a=Snapdeal.Cookie.get("eid").replace(/"/g,""),l.emailId=a);var e=!0,d=new Date(Date.now()).getTime(),t=parseInt(Snapdeal.localStorage.getItem("popUpShownDate")),a=o("#webRtoFeedbackHitTime").val();(e=t?(d-t)/3600/1e3>parseInt(a):e)&&o.ajax({url:"/getFeedbackPopUp",type:"POST",dataType:"html",success:function(e){if(e){var t;if(null!=(e=JSON.parse(e))&&"MANDATORY_RATING"==e.popUpType){var a='<div class = "prodImg"><img src = "'+Snapdeal.getResourcePath(e.imageUrl)+'"></div><div class = "prodName bold" title = "'+e.itemName+'">'+e.itemName+"</div>";l.productId=e.productId,l.suborderCode=e.suborderCode,s.mandatoryWidgetHomepage.find(".leftComprtment").append(a),o(".common-modal-content-block").addClass("modalWidth"),Snapdeal.commonModal.open(o("#mandatoryPopUp"),"","ratings-modal",!1),o(".common-modal-close").addClass("hidden"),Snapdeal.localStorage.setItem("popUpShownDate",d),l.catalogId=e.catalogId,getOmnitureScript({catalogId:l.catalogId,emailId:l.emailId},"rating_popup_load"),sdLogdata={pogId:l.productId,emailId:l.emailId,phone:JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile},window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("render","rating_popup",sdLogdata)}else if(null!=e&&"RTO"==e.popUpType){var n=e.messages;o(".numberOfMessages").val(n.length);n.length>=parseInt("5")&&o(".reasonContainer").addClass("feedbackFormScroll");for(var i=0;i<n.length;i++){var r='<div class="radioButtonCont" msgCode="'+n[i].messageCode+'"><span class="sd-icon sd-icon-checkmark"></span></div><span class="radioButtonMsg">'+n[i].message+" </span><br>";s.rtoWidgetHomepage.removeClass("hidden").find(".reasonContainer").append(r)}o(".common-modal-content-block").removeClass("modalWidth"),Snapdeal.commonModal.open(o("#rtoFeedbackPopup"),"","ratings-modal",!1),o(".common-modal-close").addClass("hidden"),0==e.mandatory?(o(".rtoModalClose").removeClass("hidden"),o("#formType").val("optional")):(o(".rtoModalClose").addClass("hidden"),o("#formType").val("mandatory")),o("#rtofeedbackHeadingContainer").removeClass("hidden"),o("#rtofeedbackHeadingContainer").find("#rtofeedbackHeading").html(e.heading),o("#rtofeedbackHeadingContainer").find("#rtofeedbackSubHeading").html(e.subHeading),o("#rtofeedbackHeadingContainer").find("#rtofeedbackSubtitle").html(e.reasonSubtitle),o("#rtoOrderCode").val(e.orderCode),t={orderCode:e.orderCode,formType:o("#formType").val()},window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("render","rtoFeedbackView",t),Snapdeal.localStorage.setItem("popUpShownDate",d)}}}})},_changeRatings:function(e){var t=e.index()+1;s.filledIndex=e.index(),o(".rate-text-modal").html(["Disappointing","Bad","Average","Good","Excellent"][t-1]),o(".rate-text-modal").addClass("change-color"),o(".ratings-modal .single-star").removeClass("filled"),o(".ratings-modal .single-star:lt("+e.index()+")").addClass("filled"),e.addClass("filled"),o(".modal-btn").addClass("btnFillColor"),o(".rate-text-modal").removeClass("notSelectStar"),o(".ratings-modal .filled").length&&o("#ratingsSubmit").removeClass("disabled"),getOmnitureScript({catalogId:l.catalogId,emailId:l.emailId},"rating_popup_rated");l.productId,l.emailId,JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile;window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("clickStream","ugcSubmission",{type:"rating_submission",pogId:l.productId,suborderCode:l.suborderCode,ratingSubmitted:o(".ratings-modal .filled").length,source:"home"})},_submitRatings:function(){var e;o(".rate-text-modal").hasClass("disabled")||(0==o(".stars-wrapper span.single-star.filled").length?o(".rate-text-modal").addClass("notSelectStar"):(getOmnitureScript({catalogId:l.catalogId,emailId:l.emailId,final_rating:o(".ratings-modal .filled").length},"rating_popup_submit"),l.productId,l.emailId,JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile,window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("clickStream","ugcSubmission",{type:"rating_submission",pogId:l.productId,suborderCode:l.suborderCode,ratingSubmitted:o(".ratings-modal .filled").length,source:"home"}),e={productId:l.productId,rating:o(".ratings-modal .filled").length},o.ajax({url:"/review/post/rating",type:"GET",data:e,success:function(){o(".ratings-modal").addClass("ratings-modal-class"),Snapdeal.commonModal.close()}})))},_rateStarBackStyling:function(){var e=o(".rating-stars .stars-wrapper span.single-star.hovered").length,t=o(".rating-stars");switch(e){case 1:t.css("background-image",'url("/img/ratingStarBgRight1.png")');break;case 2:t.css("background-image",'url("/img/ratingStarBgRight2.png")');break;case 3:t.css("background-image",'url("/img/ratingStarBgRight3.png")');break;case 4:t.css("background-image",'url("/img/ratingStarBgRight4.png")');break;case 5:t.css("background-image",'url("/img/ratingStarBgRight5.png")');break;default:t.css("background-image",'url("/img/ratingStarBgRight.png")')}},_closeRatings:function(){getOmnitureScript({catalogId:l.catalogId,emailId:l.emailId},"rating_popup_skip");var e={pogId:l.productId,emailId:l.emailId,phone:JSON.parse(Snapdeal.localStorage.getItem("authData")).mobile};window.sdLoggerSwitch&&"object"==typeof SDLogger&&"function"==typeof SDLogger.log&&SDLogger.log("click","rating_popup_skip",e);e={suborderCode:l.suborderCode};o.ajax({url:"/review/post/rating",type:"GET",data:e,success:function(){Snapdeal.commonModal.close()}})}};return{init:function(){a._init()}}}(window.jQuery),Snapdeal.mandatoryRating.init(),(Snapdeal=Snapdeal||{}).infiniteFeed=function(r){var c,d=[],o=[],s=!1,p={start:0,count:10,page:0,adsPogCount:0,endOfFeed:!1,followUps:""},l="#infiniteFeedLoader",g="#loadMoreBtn",m="#placeholder-1",u=doT.template(r("#products_c_widget").html()),h={_productClickHandler:function(t){r("#infiniteFeedWrapper").on("click",".product-card",function(e){window.sdLoggerSwitch&&SDLogger&&"function"==typeof SDLogger.log&&e.currentTarget&&e.currentTarget.getAttribute("pog")&&SDLogger.log("clickStream","ceeAction",{templateStyle:c.templateStyle,templateSubStyle:c.templateSubStyle,widgetTemplate:c.templateType,slotPos:c.slot,pCatId:e.currentTarget.getAttribute("cat"),pogId:e.currentTarget.getAttribute("pog"),widgetSource:t+"Feed",bucketId:e.currentTarget.getAttribute("bucket")})})},_sendInfiniteFeedRenderEvent:function(e,t){var a=e.products,n=e.exclusions||[];if(a&&0!==a.length){var i,r={isAds:[],isFlashSale:[],defaultSupcs:[],pogIds:[],vendorCodes:[],page:p.page,feedSource:[],feedSourceId:[],prices:[],basePrices:[],sourcePage:t};if(n.length){for(var d={eliminatedPogsArray:[],initialPositionArray:[],eliminatedPogsReasonArray:[]},o=0;o<n.length;o++){var s=n[o];d.eliminatedPogsArray.push(s.pog),d.eliminatedPogsReasonArray.push(s.reason),d.initialPositionArray.push(s.position)}n.length&&Object.assign(r,d)}for(i in c.trackingId)r[c.trackingId[i].key]=c.trackingId[i].value;for(i in a){var l=a[i];r.isAds.push(l.productAd),r.isFlashSale.push(!!l.flashSaleOfferDetail),r.defaultSupcs.push(l.defaultSupc),r.pogIds.push(l.pogId),r.vendorCodes.push(l.vendorCode),r.prices.push(l.effectivePrice),r.basePrices.push(l.basePrice),l.feedSource?r.feedSource.push(l.feedSource):r.feedSource.push("default"),l.feedSourceId?r.feedSourceId.push(l.feedSourceId):r.feedSourceId.push("default")}e.adsPogCount&&0<e.adsPogCount&&e.impressionPixel&&(r.adTracker=e.impressionPixel),1===p.page?SDLogger.log("render","feedView",r):SDLogger.log("render","feedViewLoadMore",r)}},_updateLoadMoreParams:function(e){p.endOfFeed=e.endOfFeed,p.followUps=e.followUps,p.adsPogCount=e.adsPogCount||0,p.page+=1},_loadMoreClickHandler:function(){s=!0,p.start+=p.count;var e=t+"&start="+p.start+"&count="+p.count+"&adsPogCount="+parseInt(p.adsPogCount)+"&followUps="+p.followUps;r(g).css("display","none"),r(l).css("display","block"),r.ajax({url:e,cache:!0,beforeSend:function(e){Snapdeal.CommonUtils.setMobApiHeaders(e)},type:"GET",success:function(e){s=!1;var t=e.products,t=o.concat(t);o=[];var a=u(t);r(a).insertBefore(r(m)),h._updateLoadMoreParams(e),window.sdLoggerSwitch&&SDLogger&&"function"==typeof SDLogger.log&&h._sendInfiniteFeedRenderEvent(e),p.endOfFeed?r(g).css("display","none"):(r(g).css("display","block"),r(l).css("display","none"))}})},_infiniteFeedScrollHandler:function(){var e;!Snapdeal.utility.isScrolledIntoView("#eleToObserve")||s||p.endOfFeed||(s=!0,p.start+=p.count,e=t+"&start="+p.start+"&count="+p.count+"&adsPogCount="+parseInt(p.adsPogCount)+"&followUps="+p.followUps,r(l).css("display","block"),r.ajax({url:e,cache:!0,beforeSend:function(e){Snapdeal.CommonUtils.setMobApiHeaders(e)},type:"GET",success:function(e){r(l).css("display","none"),s=!1;var t,a=e.products,n=a.length;h._updateLoadMoreParams(e),window.sdLoggerSwitch&&SDLogger&&"function"==typeof SDLogger.log&&h._sendInfiniteFeedRenderEvent(e);for(var i=0;i<n;i++){if(!(d.length<50)){o=a.splice(i),r(window).off("scroll",h._infiniteFeedScrollHandler),r(g).css("display","block");break}d=d.concat([a[i]]),t=u([a[i]]),r(t).insertBefore(r(m))}}}))},_createInfiniteFeed:function(e,n){(t=(c=e).api)&&(e=t+"&start="+p.start+"&count="+p.count+"&adsPogCount="+parseInt(p.adsPogCount)+"&followUps="+p.followUps,r.ajax({url:e,cache:!0,beforeSend:function(e){Snapdeal.CommonUtils.setMobApiHeaders(e)},type:"GET",success:function(e){var t=e.products,a=u(t);d=d.concat(t),r(a).insertBefore(r(m)),h._updateLoadMoreParams(e),r(window).on("scroll",h._infiniteFeedScrollHandler),r(g).on("click",h._loadMoreClickHandler),window.sdLoggerSwitch&&SDLogger&&"function"==typeof SDLogger.log&&h._sendInfiniteFeedRenderEvent(e,n),h._productClickHandler(n)}}))}},t={createInfiniteFeed:function(e,t){return h._createInfiniteFeed.apply(this,arguments)}};return t}(window.jQuery);
