function UET(h){this.stringExists=function(e){return e&&0<e.length},this.domain="bat.bing.com",this.URLLENGTHLIMIT=4096,this.pageLoadEvt="pageLoad",this.customEvt="custom",this.pageViewEvt="page_view",h.Ver=void 0===h.Ver||"1"!==h.Ver&&1!==h.Ver?2:1,this.uetConfig={},this.uetConfig.consent={enabled:!1,adStorageAllowed:!0,adStorageUpdated:!1,hasWaited:!1,waitForUpdate:0},this.beaconParams={},this.supportsCORS=this.supportsXDR=!1,this.paramValidations={string_currency:{type:"regex",regex:/^[a-zA-Z]{3}$/,error:"{p} value must be ISO standard currency code"},number:{type:"num",digits:3,max:999999999999},integer:{type:"num",digits:0,max:999999999999},hct_los:{type:"num",digits:0,max:30},date:{type:"regex",regex:/^\d{4}-\d{2}-\d{2}$/,error:"{p} value must be in YYYY-MM-DD date format"},enum:{type:"enum",error:"{p} value must be one of the allowed values"},array:{type:"array",error:"{p} must be an array with 1+ elements"}},this.knownParams={event_action:{beacon:"ea"},event_category:{beacon:"ec"},event_label:{beacon:"el"},event_value:{type:"number",beacon:"ev"},page_title:{},page_location:{},page_path:{},ecomm_prodid:{beacon:"prodid"},ecomm_pagetype:{type:"enum",values:["home","searchresults","category","product","cart","purchase","other"],beacon:"pagetype"},ecomm_totalvalue:{type:"number"},ecomm_category:{},ecomm_query:{},ecomm_exp:{},hct_base_price:{type:"number"},hct_booking_xref:{},hct_checkin_date:{type:"date"},hct_checkout_date:{type:"date"},hct_length_of_stay:{type:"hct_los"},hct_partner_hotel_id:{},hct_total_price:{type:"number"},hct_pagetype:{type:"enum",values:["home","searchresults","offerdetail","conversionintent","conversion","property","cart","purchase","cancel","other"]},travel_destid:{},travel_originid:{},travel_pagetype:{type:"enum",values:["home","searchresults","offerdetail","conversionintent","conversion","cancel","other"]},travel_startdate:{type:"date"},travel_enddate:{type:"date"},travel_totalvalue:{type:"number"},flight_destid:{},flight_originid:{},flight_pagetype:{type:"enum",values:["home","searchresults","offerdetail","cart","purchase","cancel","other"]},flight_startdate:{type:"date"},flight_enddate:{type:"date"},flight_totalvalue:{type:"number"},affiliation:{},brs_response_id:{},checkout_option:{},checkout_step:{type:"integer"},content_id:{},content_type:{},coupon:{},currency:{type:"string_currency",beacon:"gc"},description:{},fatal:{},method:{},name:{},revenue_value:{type:"number",beacon:"gv"},screen_name:{},search_term:{},shipping:{type:"number"},tax:{type:"number"},transaction_id:{},rep:{},vid:{},items:{type:"array"},"items.brand":{},"items.category":{},"items.creative_name":{},"items.creative_slot":{},"items.id":{},"items.list_name":{},"items.list_position":{type:"integer"},"items.location_id":{},"items.name":{},"items.price":{type:"number"},"items.quantity":{type:"number"},"items.variant":{},promotions:{type:"array"},"promotions.creative_name":{},"promotions.creative_slot":{},"promotions.id":{},"promotions.name":{}},this.knownEvents={add_payment_info:[],add_to_cart:["revenue_value","currency","items"],add_to_wishlist:["revenue_value","currency","items"],begin_checkout:["revenue_value","currency","items","coupon"],checkout_progress:["revenue_value","currency","items","coupon","checkout_step","checkout_option"],exception:["description","fatal"],generate_lead:["revenue_value","currency","transaction_id"],login:["method"],page_view:["page_title","page_location","page_path","rep"],purchase:["transaction_id","revenue_value","currency","tax","shipping","items","coupon"],refund:["transaction_id","revenue_value","currency","tax","shipping","items"],remove_from_cart:["revenue_value","currency","items"],screen_view:["screen_name"],search:["search_term"],select_content:["items","promotions","content_type","content_id"],set_checkout_option:["checkout_step","checkout_option"],share:["method","content_type","content_id"],sign_up:["method"],view_item:["items"],view_item_list:["items"],view_promotion:["promotions"],view_search_results:["search_term"]},this.pageLevelParams={},this.legacyValidPageLoadKeyNames={rep:1},this.legacyValidCustomEventKeyNames={ec:1,el:1,ev:1,ea:1,gv:1,gc:1,prodid:1,pagetype:1},this.ambiguousValidCustomEventKeyNames={ecomm_prodid:1,ecomm_pagetype:1,rep:1},this.validRetailPageTypeValues={home:1,searchresults:1,category:1,product:1,cart:1,purchase:1,other:1},this.invalidKeyException="Invalid data: Key Name: ",this.invalidEventException="Invalid event type: Event Type: ",this.invalidPageTypeException="Invalid pagetype value: ",this.invalidProdIdException="The prodid value must be within 1 to 50 characters.",this.missingPageTypeException="The pagetype parameter is required when you include the prodid parameter.",this.goalCurrencyFormatException="gc value must be ISO standard currency code",this.missingHotelParametersException="The hotel total price (hct_total_price) and currency parameters are required when you include other hotel parameters.",this.hotelVariableRevenueException="The variable revenue parameter (revenue_value) cannot be sent when you include other hotel parameters.",this.evq=h.q instanceof Array?h.q:[],this.evqDispatch=!1,this.pageLoadDispatch=!1,this.documentLoaded=!1,this.eventPushQueue=[];var n=this;this.domainName=null,this.sessionCookieName="_uetsid",this.sessionExpirationTime=86400,this.visitorExpirationTime=33696e3,this.cookieIdMaxLength=36,this.msClkIdCookieValuePrefix="_uet",this.msClkIdCookieName="_uetmsclkid",this.msClkIdParamName="msclkid",this.msClkIdExpirationTime=7776e3,this.lengthMsClkId=32,this.msClkId=null,this.subVersion=1,this.previousPage=null,this.checkuetHostdocumentload=function(){if(this.documentLoaded=!(!document.body||document.readyState&&"interactive"!==document.readyState&&"complete"!==document.readyState&&"loaded"!==document.readyState),n.documentLoaded){if(n.uetConfig.consent.enabled&&!n.uetConfig.consent.hasWaited&&0<n.uetConfig.consent.waitForUpdate)n.uetConfig.consent.hasWaited=!0,setTimeout(function(){n.checkuetHostdocumentload()},n.uetConfig.consent.waitForUpdate);else if(0<n.eventPushQueue.length){for(var e=0;e<n.eventPushQueue.length;e++)n._push(n.eventPushQueue[e]);n.eventPushQueue=[]}}else setTimeout(function(){n.checkuetHostdocumentload()},5)},this.loadConfig=function(){var e,t,i,o,n;for(o in!(this.uetConfig.cookieAllowed=!0)===h.storeConvTrackCookies&&(this.uetConfig.cookieAllowed=!1),this.uetConfig.cookieDomain="",h.hasOwnProperty("cookieDomain")&&h.cookieDomain&&"string"==typeof h.cookieDomain&&(this.uetConfig.cookieDomain=h.cookieDomain),this.uetConfig.cookieFlags="",h.hasOwnProperty("cookieFlags")&&h.cookieFlags&&"string"==typeof h.cookieFlags&&(this.uetConfig.cookieFlags=h.cookieFlags),!(this.uetConfig.navTimingApi=!1)===h.navTimingApi&&(this.uetConfig.navTimingApi=!0),this.uetConfig.errorBeaconLevel=0,h.hasOwnProperty("errorBeaconLevel")&&("number"==typeof(t=h.errorBeaconLevel)&&t%1==0&&0<=t&&t<=2&&(this.uetConfig.errorBeaconLevel=t)),!(this.uetConfig.disableAutoPageView=!1)===h.disableAutoPageView&&(this.uetConfig.disableAutoPageView=!0),!(this.uetConfig.disableVisibilityEvents=!1)===h.disableVisibilityEvents&&(this.uetConfig.disableVisibilityEvents=!0),!(this.uetConfig.removeQueryFromUrls=!1)===h.removeQueryFromUrls&&(this.uetConfig.removeQueryFromUrls=!0),!(this.uetConfig.allRep=!1)===h.allRep&&(this.uetConfig.allRep=!0),e="_uetmsdns",h.hasOwnProperty("msDnsCookie")&&h.msDnsCookie&&"string"==typeof h.msDnsCookie&&(e=h.msDnsCookie),this.uetConfig.msDns="1"===this.getCookie(e,"",1),!(this.uetConfig.disableUetVid=!1)===h.disableUetVid&&(this.uetConfig.disableUetVid=!0),this.uetConfig.vidCookie="_uetvid",this.uetConfig.uidCookie="_uetuid",h.hasOwnProperty("uidCookie")&&h.uidCookie&&"string"==typeof h.uidCookie&&(this.uetConfig.uidCookie=h.uidCookie),h.hasOwnProperty("clarityProjectId")&&h.clarityProjectId&&"string"==typeof h.clarityProjectId&&((n=document.createElement("script")).src="https://clarity.microsoft.com/js/"+h.clarityProjectId,n.type="text/javascript",n.setAttribute("crossorigin","anonymous"),n.async=1,n.onload=this.clarityOnLoad,document.head.appendChild(n)),void 0!==window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&(this.supportsCORS=!0),"undefined"!=typeof XDomainRequest&&(this.supportsXDR=!0),t=0,1===h.Ver&&void 0!==h.advertiserId&&(t=h.advertiserId),this.postURL=(e="https:")+"//"+this.domain+"/action/"+t,this.urlPrefix=this.postURL+"?",this.errPrefix=e+"//"+this.domain+"/action-err/"+t+"?",this.previewPrefix=e+"//"+this.domain+"/actionp/"+t+"?",i=1!==h.Ver?(this.stringExists(h.tagId)&&!this.stringExists(h.ti)&&(h.ti=h.tagId),{ti:0,Ver:0,tm:1,Tag:0,EXT_Data:0}):{Ver:0,tagId:0,Tag:0,Sig:0,EXT_Data:0},h)i.hasOwnProperty(o)&&(this.beaconParams[o]=1===i[o]?encodeURIComponent(h[o]):h[o]);this.beaconParams.mid=this.getUuidV4(!0),this.stringExists(h.ti)&&((n=document.createElement("script")).src=e+"//"+this.domain+"/p/action/"+h.ti+".js",n.type="text/javascript",n.async=1,document.head.appendChild(n))},this.push=function(){var e,t,i=arguments,o=!1;if(1===i.length)if(e="event",i[0]===this.pageLoadEvt)t=[this.pageViewEvt,{}],o=!0;else{if(i[0]instanceof Array){if(!(0<i[0].length))return;i[0]=i[0][0]}t=["",i[0]||{}],o=!0}else{if(!(1<i.length&&i[0]!==this.pageLoadEvt))return;e=i[0],t=Array.prototype.slice.call(i,1)}n.documentLoaded||"set"===e||"consent"===e?n._push([e,t,o]):n.eventPushQueue.push([e,t,o])},this._push=function(e){var t,i,o,n;if(e[1]instanceof Array)if("event"===e[0])n=e[1][1]||{},null!=(o=e[1][0])&&(i=o===this.pageViewEvt?this.pageLoadEvt:this.customEvt,this.evt(i,o,n,e[2]));else if("set"===e[0]){if("object"==typeof e[1][0])for(t in e[1][0])this.knownParams.hasOwnProperty(t)&&(this.pageLevelParams[t]=e[1][0][t])}else"consent"===e[0]&&(this.uetConfig.consent.enabled=!0,i=e[1][1],o=e[1][0],null!==i&&"object"==typeof i&&("default"===o?(i.hasOwnProperty("ad_storage")&&!1===this.uetConfig.consent.adStorageUpdated&&(this.uetConfig.consent.adStorageAllowed="denied"!==i.ad_storage),i.hasOwnProperty("wait_for_update")&&(n=parseInt(i.wait_for_update,10),!isNaN(n)&&0<n&&(n=Math.min(n,1e4),this.uetConfig.consent.waitForUpdate=n))):"update"===o&&i.hasOwnProperty("ad_storage")&&(this.uetConfig.consent.adStorageAllowed="denied"!==i.ad_storage,this.uetConfig.consent.adStorageUpdated=!0,this.uetConfig.consent.adStorageAllowed?this.pageLoadDispatch&&this.addMsClkId({}):(delete this.beaconParams.sid,delete this.beaconParams.vid))))},this.dispatchq=function(e){var t,i,o,n,s,a,r;for((e||!(this.evqDispatch=!0)===this.uetConfig.disableVisibilityEvents&&"onpagehide"in window&&(window.addEventListener("pageshow",this.firePageShow.bind(this)),window.addEventListener("pagehide",this.firePageHide.bind(this))),o=0);o<this.evq.length;o++)if("object"==typeof this.evq[o]){if(n=this.evq[o],"set"===t)e&&this.push(t,n);else if("consent"===t)e&&void 0!==i&&this.push(t,i,n);else if(!e)if("event"===t){for(a in s=!1,this.legacyValidCustomEventKeyNames)if(n.hasOwnProperty(a)){s=!0;break}void 0!==i&&(this.push(t,i,s?{}:n),s&&this.push(n))}else this.push(n);t=i=void 0}else"string"==typeof this.evq[o]||this.evq[o]instanceof String?(void 0!==t&&void 0!==i&&(e||this.push(t,i,{}),t=i=void 0),r=this.evq[o],void 0!==t||"set"!==r&&"consent"!==r&&"event"!==r?void 0!==t&&void 0===i?i=r:t=i=void 0:t=r,o!==this.evq.length-1||"event"!==t||e||void 0===i||this.push(t,i,{})):t=i=void 0},this.invisibleDiv=null,this.invisibleFrame=null,this._SB=function(e){return(e+256).toString(16).substring(1,3)},this._SU=function(e,t){for(var i="",o=0;o<16;o++)t&&4<=o&&o<=10&&o%2==0&&(i+="-"),i+=this._SB(e[o]);return i},this.getRandomValues=window.crypto&&window.crypto.getRandomValues&&window.crypto.getRandomValues.bind(window.crypto)||window.msCrypto&&window.msCrypto.getRandomValues&&window.msCrypto.getRandomValues.bind(window.msCrypto)||function(e){for(var t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())},this.getUuidV1=function(e){var t,i,o,n;try{for(t=new Uint8Array(10),this.getRandomValues(t),i=1e4*(Date.now()+122192928e5)+(t[8]+(t[9]<<8))%1e4,(o=new Uint8Array(16))[3]=255&i,o[2]=i>>8&255,o[1]=i>>16&255,o[0]=i>>24&255,i/=4294967296,o[5]=255&i,o[4]=i>>8&255,o[7]=i>>16&255,o[6]=i>>24&255,n=0;n<8;n++)o[n+8]=t[n];return o[8]&=63,o[8]|=128,o[6]&=15,o[6]|=16,o[10]|=1,this._SU(o,e)}catch(e){return""}},this.getUuidV4=function(e){try{var t=new Uint8Array(16);return this.getRandomValues(t),t[8]&=63,t[8]|=128,t[6]&=15,t[6]|=64,this._SU(t,e)}catch(e){return""}},this.stringifyToRequest=function(e,t){var i,o="",n=t?t+".":"";for(i in e)o+="object"==typeof e[i]?this.stringifyToRequest(e[i],n+i):n+i+"="+e[i]+"&";return o},this.createInvisibleElement=function(e,t){t=document.createElement(t);return t.setAttribute("style","width:0px; height:0px; display:none; visibility:hidden;"),t.id="batBeacon"+Math.floor(1e12*Math.random()),e.appendChild(t),t},this.createInvisibleDiv=function(e){return this.invisibleDiv=this.createInvisibleElement(e,"div"),this.invisibleDiv.id},this.fireBeaconImg=function(e){var t,i=this.createInvisibleElement(this.invisibleDiv,"img");return i.width=0,i.height=0,e=e+"&rn="+(t=Math.floor(1e6*Math.random())),i.setAttribute("alt",""),h.alt&&i.setAttribute("alt",h.alt),i.setAttribute("src",e),t},this.addLoadTime=function(e){var t,i;if(window.performance&&(t=window.performance.timing.domContentLoadedEventEnd,void 0!==(t=window.performance.timing.loadEventEnd?window.performance.timing.loadEventEnd:t)&&0!==t&&(t=t-window.performance.timing.navigationStart,e.lt=t),this.uetConfig.navTimingApi&&null!=window.performance.timing)){for(var o=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],n=window.performance.timing[o[0]],s=n,a=1;a<o.length;a++)s+=",",s+=null==(i=window.performance.timing[o[a]])||0===i?"":i-n;s.length<=150&&(e.pt=s),null!=window.performance.navigation&&(e.pn=window.performance.navigation.type+","+window.performance.navigation.redirectCount)}return e},this.hashCode=function(e){var t,i=0;if(0===e.length)return i;for(t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i&=i;return i},this.addPluginData=function(e){for(var t,i,o,n=[],s=0;s<window.navigator.plugins.length;s++)n.push({name:window.navigator.plugins[s].name});for(t=n.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}),i="",o=0;o<t.length;o++)i+=t[o].name;return e.pi=this.hashCode(i),e},this.addFraudSignals=function(e){e=this.addPluginData(e);var t=window.navigator.userLanguage||window.navigator.language;return this.stringExists(t)&&(e.lg=t),screen&&(screen.width&&(e.sw=screen.width),screen.height&&(e.sh=screen.height),screen.colorDepth&&(e.sc=screen.colorDepth)),e},this.addUrlData=function(e){var t,i,o,n,s;if(window.self!=window.top)try{for(t=0,i=window.self;t<=5&&null!=i&&i!=window.top;t++,i=i.parent)if(null!=i.document&&this.stringExists(i.document.referrer)&&"about:blank"!==i.document.referrer.toLowerCase()){n=i.document.referrer,!0===this.uetConfig.removeQueryFromUrls&&(n=n.split("?")[0]),e.p=encodeURIComponent(n),e.r="";break}}catch(e){}else o=window.document.referrer,n=window.location.href,!0===this.uetConfig.removeQueryFromUrls&&(n=n.split("?")[0],o=o.split("?")[0]),s=window.location.hash,s=0<=n.indexOf(s)?n:n+s,e.p=encodeURIComponent(s),e.r=encodeURIComponent(o);return e},this.extractMsClkId=function(e){this.stringExists(this.msClkId)||(this.msClkId=this.getQueryParam(e.p,this.msClkIdParamName))},this.addPageData=function(e,t){var i;return t=!0===t,e=this.addFraudSignals(e),i=window.document.title,this.stringExists(i)&&!this.stringExists(e.tl)&&(e.tl=encodeURIComponent(i).replace(/%2C/gi,",")),window.document.head.getElementsByTagName("meta").keywords&&(i=window.document.head.getElementsByTagName("meta").keywords.content,this.stringExists(i)&&(e.kw=encodeURIComponent(i).replace(/%2C/gi,","))),t?this.stringExists(this.previousPage)&&!e.hasOwnProperty("r")&&(e.r=this.previousPage):(e=this.addUrlData(e),e=this.addLoadTime(e)),e},this.removeTrailingAmp=function(e){var t=e.charAt(e.length-1);return e="&"===t||"?"===t?e.substring(0,e.length-1):e},this.throwError=function(e){var t;throw"function"==typeof CustomEvent&&(t={errMsg:e,tagId:h.ti},t=new CustomEvent("uetError",{detail:t}),window.dispatchEvent(t)),0<this.uetConfig.errorBeaconLevel&&(this.invisibleDiv||this.createInvisibleDiv(document.body),t=this.combine(this.beaconParams,{errMsg:encodeURIComponent(e)}),t=this.stringifyToRequest(t),t=this.removeTrailingAmp(this.errPrefix+t),this.fireBeaconImg(t)),e},this.validateValue=function(e,t,i,o){var n=0,s=t,a=void 0===i||0===i;return-1!==t.toString().indexOf(",")&&(s=t.replace(/,/g,"")),n=parseFloat(s),(isNaN(s)||isNaN(n)||a&&-1!==n.toString().indexOf("."))&&this.throwError(e+" should be "+(a?"an integer":"a number")),o<n?this.throwError(e+" cannot be greater than "+o):n<0?this.throwError(e+" cannot be less than 0"):this.getDecimalPlaces(n)>i&&this.throwError(e+" cannot have more than "+i+" decimal places"),n},this.validateRegex=function(e,t,i){e=null==e?"":e.toString();return e.match(t)||this.throwError(i),e},this.encodeParameter=function(e){return(null==e?"":e.toString()).replace(/&/gi,"%26").replace(/#/gi,"%23")},this._validateProdId=function(e){return null==e&&this.throwError(this.invalidProdIdException),((e=e.toString()).length<1||50<e.length)&&this.throwError(this.invalidProdIdException),e},this.validateProdId=function(e){var t,i="";if(e instanceof Array){for(t=0;t<e.length;t++)e[t]instanceof Array&&this.throwError(this.invalidProdIdException),null!==e[t]&&void 0!==e[t]&&(i+=""!==i?",":"",i+=encodeURIComponent(this._validateProdId(e[t])));""===i&&this.throwError(this.invalidProdIdException)}else i=encodeURIComponent(this._validateProdId(e));return i},this.validatePageType=function(e,t){null==e&&this.throwError(this.invalidPageTypeException+e);e=e.toString().toLowerCase();return t[e]||this.throwError(this.invalidPageTypeException+e),e},this.getDecimalPlaces=function(e){var t=parseFloat(e);return isNaN(e)||isNaN(t)?0:(e=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},this.validateParameter=function(e,t,i){var o,n;if(t.match(/^[a-z_]{2,32}$/)||this.throwError(e+" invalid parameter name"),null==i.type||null==this.paramValidations[i.type])return e.toString();switch((o=this.paramValidations[i.type]).type){case"regex":n=o.error.replace("{p}",t),e=this.validateRegex(e,o.regex,n);break;case"num":e=this.validateValue(t,e,o.digits,o.max);break;case"enum":""!==(e=e.toString().toLowerCase())&&-1===i.values.indexOf(e)&&this.throwError(o.error.replace("{p}",t));break;case"array":e instanceof Array&&!(e.length<1)||this.throwError(o.error.replace("{p}",t)),e=this.validateParameterArray(e,t);break;default:e=e.toString()}return e},this.validateParameterArray=function(e,t){for(var i=0;i<e.length;i++)"object"==typeof e[i]&&(e[i]=this.validateSubparams(e[i],t+"."),e[i]=this.removeTrailingAmp(this.stringifyToRequest(e[i])));return e.join(",")},this.validateSubparams=function(e,t){var i,o,n,s={};for(i in e)if(this.knownParams.hasOwnProperty(t+i)&&null!=e[i]){if(o=this.knownParams[t+i],"string"==typeof(n=this.validateParameter(e[i],i,o))||n instanceof String){if(""===n)continue;n=encodeURIComponent(n)}s[o.hasOwnProperty("beacon")?o.beacon:i]=n}return s},this.eventBasicChecks=function(e,t){e||this.throwError(this.invalidEventException+"undefined event."),e!==this.pageLoadEvt&&e!==this.customEvt&&this.throwError(this.invalidEventException+e),t||this.throwError("undefined data object passed to validate")},this.validateDataObjectNew=function(e,t){var i,o,n;if(this.eventBasicChecks(e,t),!t.hasOwnProperty("ecomm_prodid")||null==t.ecomm_prodid||"string"==typeof t.ecomm_prodid&&""===t.ecomm_prodid.toString()||(t.ecomm_prodid=this.validateProdId(t.ecomm_prodid)),null!=(e=t.event_action)&&this.knownEvents.hasOwnProperty(e))for(o in i=this.knownEvents[e])n=i[o],this.pageLevelParams.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=this.pageLevelParams[n]);return!(e=this.validateSubparams(t,"")).hasOwnProperty("pagetype")&&e.hasOwnProperty("prodid")&&this.throwError(this.missingPageTypeException),(e.hasOwnProperty("hct_base_price")||e.hasOwnProperty("hct_booking_xref")||e.hasOwnProperty("hct_pagetype")||e.hasOwnProperty("hct_checkin_date")||e.hasOwnProperty("hct_checkout_date")||e.hasOwnProperty("hct_length_of_stay")||e.hasOwnProperty("hct_partner_hotel_id"))&&(e.hasOwnProperty("hct_total_price")&&e.hasOwnProperty("gc")||this.throwError(this.missingHotelParametersException)),e.hasOwnProperty("hct_total_price")&&e.hasOwnProperty("gv")&&this.throwError(this.hotelVariableRevenueException),e},this.validateDataObject=function(e,t){var i,o,n;for(i in this.eventBasicChecks(e,t),t)e===this.customEvt&&(this.legacyValidCustomEventKeyNames[i]||this.ambiguousValidCustomEventKeyNames[i])||e===this.pageLoadEvt&&this.legacyValidPageLoadKeyNames[i]||this.throwError(this.invalidKeyException+i);0<t.hasOwnProperty("ev")&&(t.ev=this.validateValue("ev",t.ev,3,999999999999)),0<t.hasOwnProperty("gv")&&(t.gv=this.validateValue("gv",t.gv,3,999999999999)),0<t.hasOwnProperty("gc")&&(t.gc=this.validateRegex(t.gc,/^[a-zA-Z]{3}$/,this.goalCurrencyFormatException)),0<t.hasOwnProperty("ec")&&null!==t.ec&&void 0!==t.ec&&(o=encodeURIComponent(t.ec),t.ec=this.encodeParameter(t.ec),t.ec!==o&&(t.ec2=o)),0<t.hasOwnProperty("ea")&&null!==t.ea&&void 0!==t.ea&&(n=encodeURIComponent(t.ea),t.ea=this.encodeParameter(t.ea),t.ea!==n&&(t.ea2=n)),0<t.hasOwnProperty("el")&&null!==t.el&&void 0!==t.el&&(n=encodeURIComponent(t.el),t.el=this.encodeParameter(t.el),t.el!==n&&(t.el2=n)),0<t.hasOwnProperty("ecomm_prodid")&&(t.prodid=t.ecomm_prodid,delete t.ecomm_prodid),0<t.hasOwnProperty("ecomm_pagetype")&&(t.pagetype=t.ecomm_pagetype,delete t.ecomm_pagetype),!t.hasOwnProperty("pagetype")||null!=t.pagetype&&""!==t.pagetype.toString()||delete t.pagetype,t.hasOwnProperty("prodid")&&(null==t.prodid||"string"==typeof t.prodid&&""===t.prodid)&&delete t.prodid,0<t.hasOwnProperty("pagetype")?(t.pagetype=this.validatePageType(t.pagetype,this.validRetailPageTypeValues),0<t.hasOwnProperty("prodid")&&(t.prodid=this.validateProdId(t.prodid))):0<t.hasOwnProperty("prodid")&&this.throwError(this.missingPageTypeException)},this.evt=function(e,t,i,o){var n,s,a,r,h,d;if(o=!1!==o,i=i||{},!1===this.evqDispatch&&this.dispatchq(!0),!0===this.uetConfig.disableAutoPageView&&!1===this.evqDispatch&&this.dispatchq(!1),"object"==typeof i){if(!0===this.uetConfig.allRep?i.rep="1":i.hasOwnProperty("rep")&&(1===i.rep||"1"===i.rep||!0===i.rep?i.rep="1":delete i.rep),o?this.validateDataObject(e,i):(i.event_action=t,i=this.validateDataObjectNew(e,i)),e===this.customEvt){for(s in n=[],i)n.push(s);if(0===n.length)return;o||(i.en="Y")}else if(e===this.pageLoadEvt){if(null!=i.ea&&this.knownEvents.hasOwnProperty(i.ea))for(r in a=this.knownEvents[i.ea],i)-1===a.indexOf(r)&&delete i[r];if(d=!o&&i.hasOwnProperty("page_path")){if(!(i.spa="Y")===this.pageLoadDispatch?(h=this.addPageData(h={},!1),this.stringExists(h.p)&&(this.previousPage=h.p),i.r=h.r,i.lt=h.lt,h.hasOwnProperty("pt")&&(i.pt=h.pt),h.hasOwnProperty("pn")&&(i.pn=h.pn)):(this.firePageHide(),this.beaconParams.mid=this.getUuidV4(!0)),i.hasOwnProperty("page_title")&&(i.tl=i.page_title,delete i.page_title),this.stringExists(this.previousPage)){if(-1===(h=(t=this.previousPage.toUpperCase()).indexOf("%3A%2F%2F")))return;"%2F"===i.page_path.substring(0,3).toUpperCase()?(h=t.indexOf("%2F",h+=9),i.p=-1===h?this.previousPage+i.page_path:this.previousPage.substring(0,h)+i.page_path):i.p=this.previousPage}}else{if(!0===this.pageLoadDispatch)return;if(!0===this.uetConfig.disableAutoPageView&&o)return}!1===this.pageLoadDispatch&&(this.pageLoadDispatch=!0),i=this.addPageData(i,d),this.stringExists(i.p)&&(this.previousPage=i.p)}this.invisibleDiv||this.createInvisibleDiv(document.body),i.evt=e,window.self!=window.top&&(i.ifm=1),this.addCookieId(this.beaconParams,"sid","",this.sessionCookieName,this.sessionExpirationTime),this.addCookieId(this.beaconParams,"uid","",this.uetConfig.uidCookie,0),this.pageLevelParams.hasOwnProperty("vid")?"string"==typeof(d=this.pageLevelParams.vid)&&this.stringExists(d)&&((d=d.replace(/[-{}]/g,"").toLowerCase()).match(/^[0-9a-f]{32}$/)&&(this.beaconParams.vid=d,this.beaconParams.vids="3")):this.uetConfig.disableUetVid||this.addCookieId(this.beaconParams,"vid","vids",this.uetConfig.vidCookie,this.uetConfig.disableUetVid?0:this.visitorExpirationTime),i=this.addMsClkId(i),e===this.pageLoadEvt&&(i.sv=this.subVersion),!0===this.uetConfig.consent.enabled&&(i.asc=this.uetConfig.consent.adStorageAllowed?"G":"D"),!0!==this.uetConfig.msDns&&(this.fireBeacon(i),i.abf=!0),e===this.pageLoadEvt&&!1===this.evqDispatch&&this.dispatchq(!1)}},this.removeLocalStorageBackup=function(e){try{localStorage.removeItem(e+"_exp"),localStorage.removeItem(e)}catch(e){}},this.setLocalStorageBackup=function(e,t,i){try{var o=new Date;o.setTime(o.getTime()+1e3*i),localStorage.setItem(e,t),localStorage.setItem(e+"_exp",o.toUTCString())}catch(e){}},this.getLocalStorageBackup=function(e,t){var i,o;try{return null==(i=localStorage.getItem(e+"_exp"))?null:new Date>new Date(i)?(this.removeLocalStorageBackup(e),null):null==(o=localStorage.getItem(e))||o.length>t?null:o}catch(e){return null}},this.getCookie=function(e,t,i){var o,n,s,a;if(!this.stringExists(e)||0===(o=document.cookie).length)return null;for(this.stringExists(t)||(t=""),s=0;s<o.length;){if((n=o.indexOf(e+"="+t,s))<0)return null;if(!(0<n&&" "!==o[n-1]&&";"!==o[n-1]))break;s=n+e.length+1}return a=0<=(a=o.indexOf(";",n))?a:o.length,(a=o.substring(n+e.length+1+t.length,a)).length>i?null:a},this._setCookie=function(e,t,i,o,n){return document.cookie=e+"="+t+";expires="+i.toUTCString()+(o?";domain=."+o:"")+";path=/"+(this.stringExists(n)?";"+n:"")},this.getHostname=function(){return document.location&&document.location.hostname},this.setCookie=function(e,t,i,o,n,s,a){var r,h,d,c;if(!this.stringExists(e)||(this.stringExists(s)||(s=""),!this.stringExists(t)||t.length>a))return null;if((r=new Date).setTime(r.getTime()+1e3*i),(h=new Date).setTime(0),n&&this.setLocalStorageBackup(e,t,i),null===this.domainName||o){if((i=this.getHostname())&&"string"==typeof i&&"localhost"!==i)for(c=(d=i.split(".")).pop(),3===d.length&&0<=Number(c)&&(d=[]);0<d.length;)if(c=d.pop()+"."+c,(""===this.uetConfig.cookieDomain||this.uetConfig.cookieDomain.toLowerCase()===c.toLowerCase())&&(o&&(this._setCookie(e,"",h,c,this.uetConfig.cookieFlags),o=!!this.getCookie(e,s,a)),!o&&(this._setCookie(e,s+t,r,c,this.uetConfig.cookieFlags),this.getCookie(e,s,a))))return void(this.domainName=c);this.domainName=""}this._setCookie(e,s+t,r,this.domainName,this.uetConfig.cookieFlags)},this.getQueryParam=function(e,t){if(!this.stringExists(e)||!this.stringExists(t)||/[^\d\w]/.exec(t))return null;try{e=decodeURIComponent(e)}catch(e){}return(new RegExp("[?&]"+t+"=([^&#]*)","i").exec(e)||[,null])[1]},this.addCookieId=function(e,t,i,o,n){if(h.Ver<2||!1===this.uetConfig.cookieAllowed||!1===this.uetConfig.consent.adStorageAllowed)return e;var s="2",a=!0,r=this.getCookie(o,"",this.cookieIdMaxLength);return this.stringExists(r)||(a=!1,r=this.getLocalStorageBackup(o,this.cookieIdMaxLength)),0===n?this.stringExists(r)&&(e[t]=encodeURIComponent(r),this.stringExists(i)&&(e[i]=s)):(this.stringExists(r)&&!r.match(/^[0-9a-f]{32}$/)&&(r=r.replace(/-/g,"")),s=this.stringExists(r)&&r.match(/^[0-9a-f]{32}$/)?"0":(r=this.getUuidV1(!1),"1"),this.setCookie(o,r,n,a,!0,"",this.cookieIdMaxLength),this.getCookie(o,"",this.cookieIdMaxLength)!==r&&this.getLocalStorageBackup(o,this.cookieIdMaxLength)!==r||(e[t]=encodeURIComponent(r),this.stringExists(i)&&(e[i]=s))),e},this.addMsClkId=function(e){if(h.Ver<2||!1===this.uetConfig.cookieAllowed||!1===this.uetConfig.consent.adStorageAllowed)return e;this.extractMsClkId(this.addUrlData({}));var t="0",i=this.getCookie(this.msClkIdCookieName,this.msClkIdCookieValuePrefix,this.lengthMsClkId);return this.stringExists(i)||(i=this.getLocalStorageBackup(this.msClkIdCookieName,this.lengthMsClkId)),this.stringExists(this.msClkId)?i!==this.msClkId&&(t="1"):this.msClkId=i,this.stringExists(this.msClkId)?(this.setCookie(this.msClkIdCookieName,this.msClkId,this.msClkIdExpirationTime,!0,!0,this.msClkIdCookieValuePrefix,this.lengthMsClkId),this.getCookie(this.msClkIdCookieName,this.msClkIdCookieValuePrefix,this.lengthMsClkId)!==this.msClkId&&(t+="N"),e.msclkid=encodeURIComponent(this.msClkId+"-"+t)):e.msclkid="N",e},this.clone=function(e,t){for(var i in void 0===t&&(t={}),e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},this.combine=function(e,t){e=this.clone(e);return e.alt&&delete e.alt,this.clone(t,e)},this.fireBeacon=function(e){for(var t,i=this.urlPrefix,o=this.combine(this.beaconParams,e),n=this.stringifyToRequest(o),s=this.removeTrailingAmp(i+n),a=["r","el2","ec2","ea2","page_location","page_path","kw","p","tl","items"],r=0;encodeURI(s).length>this.URLLENGTHLIMIT&&r<a.length;r++)(t=a[r])in o&&(0==r?o[t]=o[t].split("?")[0]:r<=3?o[t]="":delete o[t],n=this.stringifyToRequest(o),s=this.removeTrailingAmp(i+n));this.fireBeaconImg(s)},this.firePageShow=function(e){!1===this.uetConfig.disableVisibilityEvents&&e&&e.persisted&&this.fireSendBeacon("pageShow")},this.firePageHide=function(){!1===this.uetConfig.disableVisibilityEvents&&this.fireSendBeacon("pageHide")},this.fireSendBeacon=function(e){e=this.combine(this.beaconParams,{evt:e}),e=this.removeTrailingAmp(this.previewPrefix+this.stringifyToRequest(e));navigator.sendBeacon?navigator.sendBeacon(e):this.fireBeaconImg(e)},this.clarityOnLoad=function(){"undefined"!=typeof clarity&&window.clarity.start()},this.loadConfig(),this.checkuetHostdocumentload()}function UET_init(e,t){"object"==typeof window[e]&&"[object Array]"!==Object.prototype.toString.call(window[e])||(t.q=window[e],window[e]=new UET(t))}function UET_push(e){var t=Array.prototype.slice.call(arguments,1);window[e].push.apply(window[e],t)}
