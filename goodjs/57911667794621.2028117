!function(r,i,f){"use strict";r.kkkns||(r.kkkns={}),r.kkkns.des||(r.kkkns.des={}),r.kkkns.des.feed;var e,n=0,h="ontouchstart"in r,o=(e=navigator.userAgent.toLowerCase(),!(!history.pushState||void 0===history.state)&&(-1<e.indexOf("iphone")||-1<e.indexOf("ipad")||-1<e.indexOf("ipod")||e.indexOf("android"),!0)),c={},u=function(e){return"number"==typeof e&&(Number.isNaN?Number.isNaN(e):isNaN(e))},v=function(e,n,t){var o,s,i=!1,r=!1,c=function(e){i=!0,o=e},a=function(e){r=!0},d=function(e){r||(n(o),t&&s()),o=null,r=!1,e.preventDefault()},l=function(e){i||(n(e),t&&s()),i=!1};h&&f(e).on("touchstart",c).on("touchmove",a).on("touchend",d),f(e).on("click",l)},s=function(){o&&history.replaceState(c,"")},w=function(e){var n=i.createElement("div"),t=i.createElement("span"),o=f(".c-feed_cell",e.obj).get(),s=f(".c-feed_visual",e.obj).get();return n.className="c-feed_btn_more",t.className="c-feed_btn_more_in",{obj:e.obj,index:e.index,cells:o,visuals:s,nextShow:e.nextShow||18,currentShow:0,btn:n,btnArea:f(".c-feed_btn",e.obj)[0],btnIn:t}},a=function(e){f(e.btnArea).removeClass("is-show")},m=function(e){for(var n=0,t=0,n=e.cells.length-e.currentShow-e.nextShow<0?e.cells.length-e.currentShow:e.nextShow,o=e.currentShow;o<e.currentShow+n;o++)0<f(".c-feed_item-none",e.cells[o]).length&&t++;"number"==typeof(n-=t)?e.btnIn.innerHTML="&#27425;&#x306e;"+n+"&#x4ef6;&#x3092;&#x8868;&#x793a;":a(e)},b=function(e){var n=e.cells.length-e.currentShow;e.nextShow<n&&(n=e.nextShow);for(var t=0;t<n;t++)f(e.cells[e.currentShow+t]).removeClass("is-hide"),f(e.visuals[e.currentShow+t]).lazyload({effect:"fadeIn",effect_speed:200,threshold:200});e.currentShow=e.currentShow+n,c["feed"+e.index]?u(c["feed"+e.index])?c["feed"+e.index]=0:c["feed"+e.index]++:c["feed"+e.index]=1,s(),k(e),e.cells.length===e.currentShow?a(e):(f(e.btn).trigger("mouseleave"),m(e))},g=function(e){f(this).addClass("is-hover")},x=function(e){f(this).removeClass("is-hover")},k=function(e){for(var e=void 0!==e.type?e.data.setting:e,n=f(".c-feed",e.obj).get(),t=0;t<n.length;t++)r.kkkns.des.heightFit({mode:"innerHeight",className:"c-feed_item",parent:n[t],column:+n[t].className.split("c-feed-col")[1].split(" ")[0]||1})},t=function(){var i={},e=f(".s-feed").get(),n=function(e,n){var a,t=f(".c-feed",e).get(),d=0,l=0,o=function(e){for(var n=f(".c-feed_row",e).get(),t=(e.className.split("c-feed-col")[1].split(" ")[0],function(){f(a.visuals[l]).lazyload({effect:"fadeIn",effect_speed:200,threshold:200}),a.currentShow++}),o=function(){f(a.cells[l]).addClass("is-hide")},s=0;s<n.length;s++){for(var i=f(".c-feed_cell",n[s]).length,r=-1<n[s].className.indexOf("is-hide"),c=0;c<i;c++)r?0<d?(t(),d--):o():t(),l++;f(n[s]).removeClass("is-hide")}};i.obj=e,i.index=n,a=w(i),c["feed"+n]&&(d=+c["feed"+n],u(d)?d=0:d*=a.nextShow);for(var s=0;s<t.length;s++)o(t[s]);a.currentShow<a.cells.length-1&&f(a.btnArea).addClass("is-show"),f(r).resize({setting:a},k),k(a),v(a.btn,function(){b(a)}),f(a.btn).on("mouseenter",g).on("mouseleave",x),a.btn.appendChild(a.btnIn),a.btnArea.appendChild(a.btn),m(a)};o&&history.state&&(c=history.state);for(var t=0;t<e.length;t++)n(e[t],t)},d=function(){if(r.kkkns.des.heightFit&&f.fn.lazyload)t();else{if(!(++n<20))throw"import error : feed.js";setTimeout(d,10)}};d()}(window,document,window.jQuery||window.j$);
