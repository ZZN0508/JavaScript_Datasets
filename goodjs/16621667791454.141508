var Adobe=AccessEnabler=function(s){function t(t){for(var e,n,r=t[0],i=t[1],o=0,a=[];o<r.length;o++)n=r[o],c[n]&&a.push(c[n][0]),c[n]=0;for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(s[e]=i[e]);for(l&&l(t);a.length;)a.shift()()}var n={},c={4:0};function u(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,u),e.l=!0,e.exports}u.e=function(i){var t,o,e,a,n=[],r=c[i];return 0!==r&&(r?n.push(r[2]):(t=new Promise(function(t,e){r=c[i]=[t,e]}),n.push(r[2]=t),t=document.getElementsByTagName("head")[0],(o=document.createElement("script")).charset="utf-8",o.timeout=120,u.nc&&o.setAttribute("nonce",u.nc),o.src=u.p+""+({}[i]||i)+".js",e=function(t){o.onerror=o.onload=null,clearTimeout(a);var e,n,r=c[i];0!==r&&(r&&(e=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,(t=new Error("Loading chunk "+i+" failed.\n("+e+": "+n+")")).type=e,t.request=n,r[1](t)),c[i]=void 0)},a=setTimeout(function(){e({type:"timeout",target:o})},12e4),o.onerror=o.onload=e,t.appendChild(o))),Promise.all(n)},u.m=s,u.c=n,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="",u.oe=function(t){throw console.error(t),t},u.h="27b61ce0c61970691f6b",u.cn="AccessEnabler";var e=(r=window.webpackJsonpAdobe_AccessEnabler=window.webpackJsonpAdobe_AccessEnabler||[]).push.bind(r);r.push=t;for(var r=r.slice(),i=0;i<r.length;i++)t(r[i]);var l=e;return u(u.s=34)}([function(t,e,n){"use strict";(r=r=r||{})[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var r=(i.prototype.debug=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},i.prototype.warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},i.prototype.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},i.prototype.info=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},i.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},i.prototype.trace=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},i.prototype.setLevel=function(t){this.level=t,this.bindConsoleLog()},i.prototype.setPrefix=function(t){this.prefix="["+t+"]",this.bindConsoleLog()},i.prototype.bindConsoleLog=function(){if(console)for(var t in console){var e;console.hasOwnProperty(t)&&(e="function"==typeof console[t],this.logMethods.indexOf(t)>=this.level?this[t]=console[e?t:"log"].bind(window.console,this.prefix+"["+t.toString()+"]"):this[t]=function(){})}},i);function i(){this.level=2,this.prefix="",this.logMethods=["trace","debug","info","warn","error"],this.bindConsoleLog()}e.a=new r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=n(2),a=n(0),s=n(4),c="error",r=(u.Z500=function(t){return{errorId:"Z500",level:c,resource:t}},u.Z010=function(t){return{errorId:"Z010",level:"warning",resource:t}},u.Z011=function(t){return{errorId:"Z011",level:"info",resource:t}},u.Z100=function(t,e){return{errorId:"Z100",level:c,message:t,resource:e}},u.Z110=function(t,e){return{errorId:"Z110",level:c,message:t,resource:e}},u.Z120=function(t){return{errorId:"Z120",level:c,message:"network error",resource:t}},u.Z130=function(t,e){return{errorId:"Z130",level:c,message:""===t?"invalid resource":t,resource:e}},u.Z169=function(t,e){return{errorId:"Z169",level:c,message:t,resource:e}},u.IS2XX=function(t,e){return{errorId:t,level:c,message:e}},u.buildError=function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),(i=void 0===i?{}:i).level=e=void 0===e?c:e,n&&(i.message=n),r&&(i.subErrorId=r),s.a.extend({errorId:t},i)},u.fromAuthzErrorResponse=function(t,e){if("code"in t&&"message"in t)a.a.warn("Received a non xhr object!"),i=t;else{if(!t.responseText)return u.Z120(e);var n=t.responseText.split("details")[1];n&&2<n.length&&(n=n.substring(1,n.length-2));var r=t.responseHeaders["authzf-error-code"],t=t.responseHeaders["authzf-sub-error-code"],i=t&&"1010"===t?{code:o.a.USER_NOT_AUTHORIZED_ERROR,subErrorCode:t,message:n}:{code:o.a.USER_NOT_AUTHORIZED_ERROR,shortErrorCode:r,message:n}}if("authzNone"===i.shortErrorCode)return u.Z169(i.message,e);if("invalid"===i.shortErrorCode)return u.Z130(i.message,e);if("1010"===i.subErrorCode)return u.Z110(i.message,e);switch(i.code){case o.a.USER_NOT_AUTHORIZED_ERROR:return i.message!==o.a.USER_NOT_AUTHORIZED_NETWORK_ERROR?u.Z100(i.message,e):u.Z120(e);case o.a.USER_NOT_AUTHENTICATED_ERROR:return u.N000;default:return u.Z500(e)}},u.getReasonFromErrorResponse=function(t){var e,n=null,r=t.indexOf("<reason>");return 0<=r&&(0<=(e=t.indexOf("</reason>"))&&(n=t.substring(r+"<reason>".length,e))),n},u.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS=-1,u.PREFIX_IS="IS",u.PREFIX_CFG="CFG",u.SEC420={errorId:"SEC420",level:c},u.SEC412={errorId:"SEC412",level:"warning"},u.CFG100={errorId:"CFG100",level:"warning",message:"incorrect time"},u.R400={errorId:"R400",level:c,message:"application is not registered"},u.R401={errorId:"R401",level:c,message:"error fetching access token"},u.REG500={errorId:"REG500",level:c,message:"error fetching registration code"},u.N000={errorId:"N000",level:"info",message:"user not authenticated"},u.N010={errorId:"N010",level:"warning"},u.N011={errorId:"N011",level:"info",message:"authenticated with temp pass"},u.N111={errorId:"N111",level:"warning"},u.N005={errorId:"N005",level:"info",message:"authentication cancelled"},u.N500={errorId:"N500",level:c},u.N130={errorId:"N130",level:c},u.LS011={errorId:"LS011",level:"warning",message:"using volatile storage"},u.N001={errorId:"N001",level:"info",message:"passive authentication"},u.P100={errorId:"P100",level:c},u);function u(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=(i.SERVER_API_TOO_OLD="API version too old. Please update your application.",i.USER_AUTHENTICATED="User Authenticated",i.USER_NOT_AUTHENTICATED_ERROR="User Not Authenticated Error",i.GENERIC_AUTHENTICATION_ERROR="Generic Authentication Error",i.USER_NOT_AUTHORIZED_ERROR="User not Authorized Error",i.GENERIC_AUTHORIZATION_ERROR="Generic Authorization Error",i.USER_NOT_AUTHORIZED_NETWORK_ERROR='A network error occured when communicating with the provider"s authorization service',i.PROVIDER_NOT_SELECTED_ERROR="Provider not Selected Error",i.PROVIDER_ALREADY_AUTHENTICATED="You are already authenticated with this Provider",i.PROVIDER_NOT_AVAILABLE_ERROR="Provider not Available Error",i.TRACK_AUTHORIZATION_DETECTION="authorizationDetection",i.TRACK_AUTHENTICATION_DETECTION="authenticationDetection",i.TRACK_MVPD_SELECTION="mvpdSelection",i.BACKGROUND_LOGIN_IE_COOKIE="apass-ie-background-login-cookie",i.MISSING_INDIVIDUALIZATION_KEY_ERROR="Missing Individualization Key Error",i.INVALID_INDIVIDUALIZATION_DATA_ERROR="Invalid Individualization Data Error",i);function i(){}},function(t,e,r){"use strict";function n(t,e,n){return t._api_methods||(t._api_methods={}),t._api_methods[e]=e,n}var c=r(2),s=r(8),u=(N.prototype.execute=function(){return this.fn.apply(this.thisArg,this.params)},N),l=r(11),a=r(9),h=r(6),i=r(12),d=r(1),g=r(0),o=(D.prototype.bind=function(t,e){this.validate(t),this.validate(e),this.callbackMap[t]&&Array.isArray(this.callbackMap[t])||(this.callbackMap[t]=[]),this.callbackMap[t].push(e)},D.prototype.unbind=function(t,e){this.validate(t),e&&this.validate(e),this.callbackMap[t]&&Array.isArray(this.callbackMap[t])&&(e?-1<(e=this.callbackMap[t].indexOf(e))&&this.callbackMap[t].splice(e,1):delete this.callbackMap[t])},D.prototype.executeCallbacks=function(t,e){if(this.callbackMap[t]&&Array.isArray(this.callbackMap[t]))for(var n=0,r=this.callbackMap[t];n<r.length;n++){var i=r[n],i=e?[i].concat(e):[i];this.callbackFacade.callCallback.apply(this.callbackFacade,i)}},D.prototype.onErrorHandler=function(t){g.a.debug("Sending",t),this.executeCallbacks("errorEvent",t)},D.prototype.validate=function(t){if(1024<t.length)throw new TypeError("InvalidArgumentError");if(null==t.match(/^[0-9a-zA-Z][-._a-zA-Z0-9]*$/))throw new TypeError("InvalidArgumentError")},D),p=r(4),E=r(5),I=r(13),f=r(16),T=(O.getValue=function(r,t){var i=M.getInstance().callCallback;switch(r){case"TTL_AUTHN":O.getAuthnTTL();break;case"TTL_AUTHZ":O.getAuthzTTL(t);break;case"DEVICEID":O.getDeviceID();break;default:try{var e,n,o=h.b.getInstance().getUserMetadata(),a=O.CACHE;if(!r)return void i("setMetadataStatus",r,null,null);O.isMetadataValid(o)?O.isMetadataValid(a)&&a.updated>=o.updated?(n=(e=a.data[r])?a.encrypted&&-1<p.b.inArray(r,a.encrypted):null,i("setMetadataStatus",r,n,e)):M.getInstance().getService().retrieveEncryptedMetadata(o,function(t){try{t=JSON.parse(t);var e=(O.CACHE=t)&&t.data&&t.data[r]?t.data[r]:null,n=t&&t.encrypted&&-1<p.b.inArray(r,t.encrypted);i("setMetadataStatus",r,null!=e?n:null,e)}catch(t){g.a.error(t),i("setMetadataStatus",r,null,null)}},function(t,e){e===d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?M.getInstance().callbackManager.onErrorHandler(r):i("setMetadataStatus",r,null,null)}):i("setMetadataStatus",r,null,null)}catch(t){i("setMetadataStatus",r,null,null)}}},O.getAuthnTTL=function(){var t=null,e=h.b.getInstance().getAuthenticationToken();e&&e.isValid()&&(t=e.getExpiryDate().getTime()),M.getInstance().callCallback("setMetadataStatus","TTL_AUTHN",null,t)},O.getAuthzTTL=function(t){var e=null,n=Array.isArray(t)&&0<t.length?t[0]:null;!n||(n=h.b.getInstance().getAuthorizationToken(M.requestorID,n))&&n.isValid()&&(e=n.getExpiryDate().getTime()),M.getInstance().callCallback("setMetadataStatus","TTL_AUTHZ",t,e)},O.getDeviceID=function(){function e(t,e){e===d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS&&M.getInstance().callbackManager.onErrorHandler(t),n("setMetadataStatus","DEVICEID",null,null)}var n=M.getInstance().callCallback;f.a.getInstance().getDeviceId().then(function(t){M.getInstance().getService().retrieveDeviceIDHash(t,function(t){t=t,I.a.checkPendingLogout(t)?(M.getInstance().ditchTokens(),n("setMetadataStatus","DEVICEID",null,null)):n("setMetadataStatus","DEVICEID",null,t)},e)},function(t){e(t,d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},O.isMetadataValid=function(t){return t&&t.data&&t.updated},O.CACHE=null,O),v=(_.prototype.callSetConfig=function(){return this.clientInfo.callSetConfig},_.prototype.getVisitorID=function(){return this.clientInfo.visitorID},_.prototype.isBackgroundLogin=function(){return this.clientInfo.backgroundLogin},_.prototype.isBackgroundLogout=function(){return this.clientInfo.backgroundLogout},_.prototype.getMvpdConfig=function(){return this.mvpdConfigs},_.prototype.isIFrameRequiredForMvpd=function(t){t=this.mvpdConfigs[t];return t?t.iFrameRequired:null},_.prototype.parseClientInfo=function(t){for(var e in this.clientInfo)t&&t.hasOwnProperty(e)&&typeof this.clientInfo[e]==typeof t[e]&&(this.clientInfo[e]=t[e])},_.prototype.parseMvpdConfig=function(t){var e=t&&t.mvpdConfig;if(!p.a.isEmpty(e))for(var n in g.a.error(e),e)if(e.hasOwnProperty(n)){var r,i=e[n],o={};for(r in this.mvpdConfigDefault)i&&i.hasOwnProperty(r)&&typeof this.mvpdConfigDefault[r]==typeof i[r]&&(o[r]=i[r]);o!=={}&&(this.mvpdConfigs[n]=p.a.extend({},this.mvpdConfigDefault,o))}},_),A=r(23),R=r(7),m=(y.KEY_VISITOR_ID="ap_vi",y),S=r(14);function y(){}function _(t){this.info=t,this.clientInfo={callSetConfig:!1,backgroundLogin:!1,backgroundLogout:!1,visitorID:""},this.mvpdConfigs={},this.mvpdConfigDefault={iFrameRequired:!1,iFrameWidth:0,iFrameHeight:0},this.parseClientInfo(t),this.parseMvpdConfig(t),g.a.debug("Parsed ClientInfo data",this.clientInfo,this.mvpdConfigs)}function O(){}function D(t){this.callbackMap={},this.callbackFacade=t}function N(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.thisArg=t,this.fn=e,this.params=[],n&&(this.params=Array.isArray(n)?n:[n])}r.d(e,"a",function(){return M});var e=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a},P=r(26),C=r(24),k=r(17),M=(b.getInstance=function(t){return this.instance||(this.instance=new b(t)),this.instance},b.prototype.completeBackgroundLogout=function(){g.a.debug("completeBackgroundLogout"),this.callCallback("setAuthenticationStatus",0,""),this.callbackManager.onErrorHandler(d.a.N000)},b.prototype.doBackgroundLogout=function(t){g.a.debug("Performing background logout..."),this.callCallback("doBackgroundLogout",t)},b.prototype.ditchTokens=function(){this.storageManager.switchToSessionStorage(),this.storageManager.resetStorage(),this.storageManager.switchToLocalStorage(),this.storageManager.resetStorage(),T.CACHE=null},b.prototype.authnSuccess=function(t){var e,n,r;I.a.checkPendingLogout(t)?this.ditchTokens():(this.configuration.resetAuthenticationProviderURL(),n=E.a.getNodeText("authnToken",t),e=new a.a(n)),this.storageManager.setRegCode(null),e&&e.isValid()?(g.a.debug("Successfully retrieved authn token"),this.cachedAuthentication=!1,r=e.getMVPDID(),n=this.mvpdManager.getMVPDByID(r),this.mvpdManager.setCurrentMvpdID(r),n&&!n.tempPass&&this.storageManager.setCanAuthenticate(!0),this.storageManager.setAuthenticationToken(e),r=E.a.getNodeText("userMeta",t),this.storageManager.setUserMetadata(r),T.CACHE=null,this.backgroundLoginInProgress&&this.backgroundLoginSuccessHelper(e,n),this.configuration.initialized||this.configurationInitializedHelper()):this.authnError(t,null,null,e)},b.prototype.authnError=function(t,e,n,r){var i=this;return void 0===r&&(r=null),e===d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(g.a.warn("Authentication token retrieval failed due to missing required prerequisites!"),this.callbackManager.onErrorHandler(t),void this.completeAuthnError()):400!==e||!this.retryDueToInvalidIndividualization||"34763"!==d.a.getReasonFromErrorResponse(n.responseText)&&"34764"!==d.a.getReasonFromErrorResponse(n.responseText)?(this.configuration.resetAuthenticationProviderURL(),401===e||400===e&&"34763"===d.a.getReasonFromErrorResponse(n.responseText)?this.callbackManager.onErrorHandler(d.a.N130):this.callbackManager.onErrorHandler(d.a.N000),r?r.isExpired()&&(!(r=this.mvpdManager.getCurrentMvpdID())||(r=this.mvpdManager.getMVPDByID(r))&&r.tempPass&&this.callbackManager.onErrorHandler(d.a.N111)):g.a.error("Error retrieving authentication token:",t),void this.completeAuthnError()):(g.a.warn("Authentication token retrieval failed due to invalid individualization. Will retry the call!"),this.retryDueToInvalidIndividualization=!1,this.storageManager.clearDeviceId(),void this.service.retrieveAuthenticationToken(function(t){return i.authnSuccess(t)},function(t,e,n){return i.authnError(t,e,n)}))},b.prototype.completeBackgroundLogin=function(){g.a.debug("completeBackgroundLogin");var t=this.mvpdManager.getCurrentMvpdID();!t||(t=this.mvpdManager.getMVPDByID(t))&&t.iFrameRequired&&(g.a.debug("Calling destroyIFrame."),this.callCallback("destroyIFrame")),this.configuration.retrieveAuthenticationToken()},b.prototype.callCallback=function(r){for(var i=this,o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];setTimeout(function(){switch(g.a.debug("Callback: "+r+"()"),r){case"reload":location.reload();break;case"openIFrame":createIFrame(o[1],o[2]);var t=o[0]+"&"+S.a.param({redirect_url:i.getRedirectURL(o[3])}),e=document.getElementsByName("mvpdframe");0<e.length?(g.a.debug("iframe url: ",t),e[0].setAttribute("src",t)):(g.a.debug("popup url: ",t),i.openLoginWindow(t,"mvpdframe"));break;case"navigateToURL":var n=o[0]+"&"+S.a.param({redirect_url:i.getRedirectURL(o[1])});g.a.debug("navigateToUrl:",n),o[2]?i.openLoginWindow(n,"mvpdwindow"):window.location.href=n;break;case"doBackgroundLogout":i.createHiddenIframe("com_adobe_pass_background_logout",o[0]);break;default:n=window.eval.call(window,r);if(void 0===n)return void g.a.warn("Callback < "+r+" > is NOT implemented");n.apply(window,o)}},4)},b.prototype.bind=function(t,e){g.a.debug("bind("+t+", "+(e=void 0===e?void 0:e)+")"),this.callbackManager.bind(t,e)},b.prototype.unbind=function(t,e){this.callbackManager.unbind(t,e=void 0===e?void 0:e)},b.prototype.getProxyMVPD=function(){var t,e=null,n=this.storageManager.getAuthenticationToken();n&&(t=n.getMVPDID(),n=n.getSubMVPDID(),t&&n&&""!==t&&""!==n&&(e=t)),this.callCallback("proxyMVPD",e)},b.prototype.setRequestor=function(t){var e=this;void 0===t&&(t="");for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.a.isEmpty(h.b.error)||(this.callbackManager.onErrorHandler(h.b.error),h.b.error=null);var i=null,o={};P(n,function(t){Array.isArray(t)?i=t:o=t}),o.callSetConfig="function"==typeof setConfig;var a=(b.clientInfo=new v(o)).getVisitorID();p.a.isEmpty(a)||(R.a.globalData[m.KEY_VISITOR_ID]=a),T.CACHE=null,b.requestorID=String(t),g.a.debug("processing setRequestor("+b.requestorID+","+i+")"),this.service=new s.a(l.a.serviceProviderURL,b.requestorID),this.mvpdManager.clearRequestorMVPDs(),this.configuration=new l.a(b.requestorID,null!=b.clientInfo&&b.clientInfo.callSetConfig(),function(){return e.onConfigurationInitialized()}),this.configuration.initialize(i),this.retryDueToInvalidIndividualization=!0},b.prototype.getSelectedProvider=function(){var t,e,n,r;this.configuration&&this.configuration.initialized?(g.a.debug("Processing getSelectedProvider()"),t="New User",!(e=this.mvpdManager.getCurrentMvpdID())||(n=this.storageManager.getAuthenticationToken())&&((r=n.getSubMVPDID())&&""!==r&&(e=r),t=n.isValid()?"User Authenticated":"User Not Authenticated"),this.callCallback("selectedProvider",{MVPD:e,AE_State:t})):(g.a.debug("put getSelectedProvider() in call queue"),this.pendingCallsQueue.push(new u(this,this.getSelectedProvider)))},b.prototype.setSelectedProvider=function(t){this.configuration&&this.configuration.initialized?(g.a.debug("Processing setSelectedProvider()",t),t&&0<t.length?this.authenticationInProgress?(this.mvpdManager.setCurrentMvpdID(t),this.service=new s.a(this.mvpdManager.getCurrentSP(),b.requestorID),this.sendTrackingData(c.a.TRACK_MVPD_SELECTION),this.isRedirectedToMvpdLoginPage()||(this.callbackManager.onErrorHandler(d.a.N500),this.callCallback("setAuthenticationStatus",0,c.a.GENERIC_AUTHENTICATION_ERROR))):String(t)===this.mvpdManager.getCurrentMvpdID()?this.callCallback("setAuthenticationStatus",1,c.a.PROVIDER_ALREADY_AUTHENTICATED):(this.callbackManager.onErrorHandler(d.a.N500),this.callCallback("setAuthenticationStatus",0,c.a.GENERIC_AUTHENTICATION_ERROR)):(this.mvpdManager.setCurrentMvpdID(null),this.authenticationInProgress=!1,this.backgroundLoginInProgress=!1,this.pendingAuthorizationInProgress&&this.completeAuthorizationInternalFlow(),this.callbackManager.onErrorHandler(d.a.N005),this.callCallback("setAuthenticationStatus",0,c.a.PROVIDER_NOT_SELECTED_ERROR),this.sendTrackingData(c.a.TRACK_AUTHENTICATION_DETECTION,!1))):(g.a.debug("put setSelectedProvider() in call queue"),this.pendingCallsQueue.push(new u(this,this.setSelectedProvider,t)))},b.prototype.getAuthorization=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0),this.configuration&&this.configuration.initialized?(this.resourceID=t,this.authorizationExtraParameters=n,this.methodInvokingAuthorization="getAuthorization",this.getAuthenticationInternalStatusMessages()===c.a.USER_AUTHENTICATED?this.startAuthorizationInternalFlow(this.resourceID,this.authorizationExtraParameters):(this.pendingAuthorizationInProgress=!0,this.getAuthentication([e,this.authorizationExtraParameters]))):(g.a.debug("put getAuthorization() in call queue"),this.pendingCallsQueue.push(new u(this,this.getAuthorization,t,e,n)))},b.prototype.checkAuthorization=function(t,e){void 0===e&&(e=void 0),this.configuration&&this.configuration.initialized?(this.resourceID=t,this.authorizationExtraParameters=e,this.methodInvokingAuthorization="checkAuthorization",this.getAuthenticationInternalStatusMessages()===c.a.USER_AUTHENTICATED?this.startAuthorizationInternalFlow(this.resourceID,this.authorizationExtraParameters):this.onAuthorizationError(null,null,{code:c.a.USER_NOT_AUTHENTICATED_ERROR,message:"",resourceID:t})):(g.a.debug("put checkAuthorization() in call queue"),this.pendingCallsQueue.push(new u(this,this.checkAuthorization,t,e)))},b.prototype.getAuthentication=function(t,e){void 0===t&&(t=void 0),void 0===e&&(e=void 0),this.configuration&&this.configuration.initialized?(g.a.debug("Processing getAuthentication()!"),t&&(this.redirectURL=t),e&&(this.authenticationExtraParameters=e),this.getAuthenticationInternalStatusMessages()===c.a.USER_AUTHENTICATED?(this.callCallback("setAuthenticationStatus",1,""),this.sendTrackingData(c.a.TRACK_AUTHENTICATION_DETECTION,!0)):this.startAuthenticationInternalFlow()):(g.a.debug("put getAuthentication() in call queue"),this.pendingCallsQueue.push(new u(this,this.getAuthentication,t,e)))},b.prototype.checkAuthentication=function(){var t,e;this.configuration&&this.configuration.initialized?(g.a.debug("Processing checkAuthentication()!"),(e=this.getAuthenticationInternalStatusMessages())===c.a.USER_AUTHENTICATED?(t=1,e="",this.mvpdManager.getMVPDByID(this.storageManager.getMvpdID()).tempPass&&this.callbackManager.onErrorHandler(d.a.N011),this.storageManager.getAuthenticationToken().isAuthNAll()&&this.callbackManager.onErrorHandler(d.a.N010),this.sendTrackingData(c.a.TRACK_AUTHENTICATION_DETECTION,!0)):(t=0,this.sendTrackingData(c.a.TRACK_AUTHENTICATION_DETECTION,!1),this.callbackManager.onErrorHandler(e===c.a.USER_NOT_AUTHENTICATED_ERROR?d.a.N000:d.a.N500)),this.callCallback("setAuthenticationStatus",t,e)):(g.a.debug("put checkAuthentication() in call queue"),this.pendingCallsQueue.push(new u(this,this.checkAuthentication)))},b.prototype.getMetadata=function(t,e){void 0===e&&(e=[]),this.configuration&&this.configuration.initialized?this.storageManager.getAuthenticationToken()?T.getValue(t,e):this.callCallback("setMetadataStatus",t,null,null):(g.a.debug("put getMetadata() in call queue"),this.pendingCallsQueue.push(new u(this,this.getMetadata,t,e)))},b.prototype.checkPreauthorizedResources=function(t,e){var o=this;if(void 0===t&&(t=[]),void 0===e&&(e=!0),this.configuration&&this.configuration.initialized){var n=this.storageManager.getAuthenticationToken();if(n&&n.isValid()){var a,r=n.getAuthorizedResources();if(r&&0<r.length){for(var i=new Array,s=0,c=r.length;s<c;s++)i.push(r[s].getAuthorizedResourceID().toUpperCase());n=this.intersectPreflight(t,i);this.callCallback("preauthorizedResources",n)}else e&&this.requestedResourcesEqualsPreauthorizationCache(t)?this.callCallback("preauthorizedResources",this.getAuthorizedResourcesFromPreauthorizationCache()):(a=function(t,e){e===d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(g.a.warn("/preauthorize call was not made - returning empty preauthorizedResources array"),o.callCallback("preauthorizedResources",[]),o.callbackManager.onErrorHandler(t)):(g.a.warn("/preauthorize call failed - returning empty preauthorizedResources array"),o.callCallback("preauthorizedResources",[]),o.callbackManager.onErrorHandler(d.a.P100))},this.service.checkPreauthorizedResources(t,function(t,e){var n,r,i;200===e?(n=[],r=[],t&&(i=E.a.getNodes("resource",t),P(i,function(t){t={id:E.a.getNodeText("id",t),authorized:"true"===E.a.getNodeText("authorized",t).toLowerCase()};n.push(t),t.authorized&&r.push(t.id)})),o.storageManager.setPreauthorizationCache(n),o.callCallback("preauthorizedResources",r)):a(t,e)},a))}}else g.a.debug("put checkPreauthorizedResources() in call queue"),this.pendingCallsQueue.push(new u(this,this.checkPreauthorizedResources,t,e))},b.prototype.logout=function(){var t;this.configuration&&this.configuration.initialized?(g.a.debug("Processing logout()!"),this.authenticationInProgress=!1,t=this.storageManager.getAuthenticationToken(),this.configuration.isValidRequestor()&&this.ditchTokens(),this.service.logout(t)):(g.a.debug("put logout() in call queue"),this.pendingCallsQueue.push(new u(this,this.logout)))},b.prototype.getStorageData=function(){this.callCallback("storageData",this.storageManager.getStorageData())},b.prototype.sendTrackingData=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=null);var i=null,o=this.mvpdManager.getCurrentMvpdID(),a=null,s=this.storageManager.getAuthenticationToken();switch(s&&s.getSubMVPDID()&&(a=o,o=s.getSubMVPDID()),t){case c.a.TRACK_MVPD_SELECTION:i=[this.mvpdManager.getCurrentMvpdID(),b.deviceInfo.deviceType,b.deviceInfo.clientType,b.deviceInfo.os];break;case c.a.TRACK_AUTHENTICATION_DETECTION:e?(i=[!0,o,C(s.getProperty("simpleTokenAuthenticationGuid")),this.cachedAuthentication,b.deviceInfo.deviceType,b.deviceInfo.clientType,b.deviceInfo.os,a],this.cachedAuthentication=!0):i=[!1,null,null,null,b.deviceInfo.deviceType,b.deviceInfo.clientType,b.deviceInfo.os,null];break;case c.a.TRACK_AUTHORIZATION_DETECTION:i=e?[!0,o,C(s.getProperty("simpleTokenAuthenticationGuid")),this.cachedAuthorization,n,r,b.deviceInfo.deviceType,b.deviceInfo.clientType,b.deviceInfo.os,a]:[!1,o,s?C(s.getProperty("simpleTokenAuthenticationGuid")):null,this.cachedAuthorization,n,r,b.deviceInfo.deviceType,b.deviceInfo.clientType,b.deviceInfo.os,a]}this.callCallback("sendTrackingData",t,i)},b.prototype.getService=function(){return this.service},b.prototype.getSoftwareStatement=function(){return this.softwareStatement},b.prototype.intersectPreflight=function(t,e){var n=[];if(t&&e)for(var r=0,i=t;r<i.length;r++){var o=i[r];0<=e.indexOf(o.toUpperCase())&&n.push(o)}return n},b.prototype.getAuthorizedResourcesFromPreauthorizationCache=function(){for(var t=this.storageManager.getPreauthorizationCache(),e=new Array,n=0,r=t.length;n<r;n++)!0===t[n].authorized&&e.push(t[n].id);return e},b.prototype.requestedResourcesEqualsPreauthorizationCache=function(t){var e=this.storageManager.getPreauthorizationCache();if(e.length!==t.length)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(-1===p.b.inArray(i,e))return!1}return!0},b.prototype.getAuthenticationInternalStatusMessages=function(){var t=this.storageManager.getAuthenticationToken();return t&&t.isValid()?this.mvpdManager.isValidMVPD(t.getMVPDID())?c.a.USER_AUTHENTICATED:c.a.GENERIC_AUTHENTICATION_ERROR:this.configuration.isValidRequestor()?c.a.USER_NOT_AUTHENTICATED_ERROR:c.a.GENERIC_AUTHENTICATION_ERROR},b.prototype.isRedirectedToMvpdLoginPage=function(){var t,e=!1;return this.authenticationInProgress&&(!(t=this.mvpdManager.getCurrentMvpdID())||(t=this.mvpdManager.getMVPDByID(t))&&(this.backgroundLoginInProgress=b.clientInfo&&b.clientInfo.isBackgroundLogin(),this.service.goToLoginPage(t,this.redirectURL,this.authenticationExtraParameters),e=!0)),e},b.prototype.backgroundLoginSuccessHelper=function(t,e){this.backgroundLoginInProgress=!1,t&&t.isAuthNAll()&&this.callbackManager.onErrorHandler(d.a.N010),e&&e.tempPass&&this.callbackManager.onErrorHandler(d.a.N011),this.pendingAuthorizationInProgress?null!==this.resourceID?(g.a.debug("Performing authorization for pending resource: "+this.resourceID+" and extra parameters: "+this.authorizationExtraParameters),this.getAuthorization(this.resourceID,null,this.authorizationExtraParameters)):(this.callbackManager.onErrorHandler(d.a.Z100),this.callCallback("tokenRequestFailed",this.resourceID,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!1,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.completeAuthorizationInternalFlow()):(this.callCallback("setAuthenticationStatus","1",""),this.sendTrackingData(c.a.TRACK_AUTHENTICATION_DETECTION,!0))},b.prototype.completeAuthorizationInternalFlow=function(){this.pendingAuthorizationInProgress=!1,this.methodInvokingAuthorization=null,this.authorizationExtraParameters=null,this.resourceID=null},b.prototype.onAuthorizationComplete=function(t,e,n){var r=this;if(I.a.checkPendingLogout(t))return this.ditchTokens(),"34764"===I.a.getPendingLogoutReason(t)&&(g.a.warn("Device id mismatch!"),this.callbackManager.onErrorHandler(d.a.SEC412),this.storageManager.clearDeviceId()),void("getAuthorization"===this.methodInvokingAuthorization?this.getAuthorization(this.resourceID):this.checkAuthorization(this.resourceID));try{t=p.c.parseXML(t)}catch(r){return g.a.warn("Authorization failed"),void this.onAuthorizationError(t,e,n)}var i=E.a.getNodeText("authzToken",t);if(!i)return g.a.warn("Authorization failed"),void this.onAuthorizationError(t,e,n);var o=new a.a(i);o&&o.isValid()?(g.a.debug("Successfully retrieved authorization token!"),this.storageManager.setAuthorizationToken(o),(i=E.a.getNodeText("userMeta",t))&&(g.a.debug("Merging user metadata tokens."),this.storageManager.mergeUserMetadata(i),T.CACHE=null),this.service.retrieveMediaToken(o,JSON.stringify({}),function(t,e,n){return r.onMediaTokenComplete(t,e,n)},function(t,e,n){return r.onMediaTokenError(t,e,n)})):this.onAuthorizationError(t,e,n)},b.prototype.onMediaTokenComplete=function(t,e,n){var r=new a.a(t).getResourceID();I.a.checkPendingLogout(t)?(this.ditchTokens(),"58772"===I.a.getPendingLogoutReason(t)&&(g.a.warn("Device id mismatch!"),this.callbackManager.onErrorHandler(d.a.SEC412),this.storageManager.clearDeviceId()),"getAuthorization"===this.methodInvokingAuthorization?this.getAuthorization(r):this.checkAuthorization(r)):(g.a.debug("Successfully retrieved media token!"),this.callCallback("setToken",r,t),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!0),(t=this.storageManager.getAuthorizationToken(b.requestorID,r))&&t.isAuthZAll()&&this.callbackManager.onErrorHandler(d.a.Z010(r)),(t=this.mvpdManager.getCurrentMvpd())&&t.tempPass&&this.callbackManager.onErrorHandler(d.a.Z011(r)),this.completeAuthorizationInternalFlow())},b.prototype.onAuthorizationError=function(t,e,n){var r=n.resourceID;e===d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(g.a.warn("Authorization token retrieval failed due to missing required prerequisites!"),this.callbackManager.onErrorHandler(t),this.callCallback("tokenRequestFailed",r,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!1,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.completeAuthorizationInternalFlow()):400===e&&"34763"===d.a.getReasonFromErrorResponse(n.responseText)?(this.storageManager.clearDeviceId(),this.retryDueToInvalidIndividualization?(g.a.warn("Authorization token retrieval failed due to invalid individualization. Will retry the call!"),this.retryDueToInvalidIndividualization=!1,this.startAuthorizationInternalFlow(r,this.authorizationExtraParameters)):(this.callbackManager.onErrorHandler(d.a.N130),this.completeAuthorizationInternalFlow())):(e=this.parseErrorResponse(n),this.callbackManager.onErrorHandler(d.a.fromAuthzErrorResponse(n,r)),this.callCallback("tokenRequestFailed",r,e.code,e.message),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!1,e.code,e.message),this.completeAuthorizationInternalFlow())},b.prototype.onMediaTokenError=function(t,e,n){e===d.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(g.a.warn("Media token retrieval failed due to missing required prerequisites!"),this.callbackManager.onErrorHandler(t),this.callCallback("tokenRequestFailed",this.resourceID,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!1,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.completeAuthorizationInternalFlow()):400===e&&"34763"===d.a.getReasonFromErrorResponse(n.responseText)?(this.storageManager.clearDeviceId(),this.retryDueToInvalidIndividualization?(g.a.warn("Media token retrieval failed due to invalid individualization. Will retry the call!"),this.retryDueToInvalidIndividualization=!1,this.startAuthorizationInternalFlow(this.resourceID,this.authorizationExtraParameters)):(this.callbackManager.onErrorHandler(d.a.N130),this.completeAuthorizationInternalFlow())):(n=this.parseErrorResponse(n),this.callCallback("tokenRequestFailed",this.resourceID,c.a.USER_NOT_AUTHORIZED_ERROR,n.message),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!1,c.a.USER_NOT_AUTHORIZED_ERROR,n.message),this.completeAuthorizationInternalFlow())},b.prototype.startAuthorizationInternalFlow=function(t,e){var r=this,n=this.storageManager.getAuthorizationToken(b.requestorID,t);n&&n.isValid()?(g.a.debug("Authorization token found and valid!"),this.cachedAuthorization=!0,this.service.retrieveMediaToken(n,JSON.stringify({}),function(t,e,n){return r.onMediaTokenComplete(t,e,n)},function(t,e,n){return r.onMediaTokenError(t,e,n)})):(g.a.debug("Authorization token not found or invalid!"),this.cachedAuthorization=!1,this.service.retrieveAuthorizationToken(Array.isArray(t)?t[0]:t,e,function(t,e,n){return r.onAuthorizationComplete(t,e,n)},function(t,e,n){return r.onAuthorizationError(t,e,n)}))},b.prototype.completeAuthnError=function(){this.backgroundLoginInProgress&&this.backgroundLoginFailHelper(),this.configuration.initialized||this.configurationInitializedHelper(),this.storageManager.setRegCode(null)},b.prototype.backgroundLoginFailHelper=function(){this.backgroundLoginInProgress=!1,this.pendingAuthorizationInProgress?(this.callCallback("tokenRequestFailed",this.resourceID,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.sendTrackingData(c.a.TRACK_AUTHORIZATION_DETECTION,!1,c.a.GENERIC_AUTHORIZATION_ERROR,""),this.completeAuthorizationInternalFlow()):(this.callCallback("setAuthenticationStatus","0",c.a.USER_NOT_AUTHENTICATED_ERROR),this.sendTrackingData(c.a.TRACK_AUTHENTICATION_DETECTION,!1))},b.prototype.mustRetrieveAuthenticationPerRequestorForMvpd=function(t){return t&&t.authPerAggregator&&t.passiveAuthnEnabled&&null===this.storageManager.getAuthenticationToken()&&this.storageManager.searchForFirstValidAuthenticationTokenForCurrentMvpd()},b.prototype.onConfigurationInitialized=function(){var t=this.mvpdManager.getCurrentSP();p.a.isEmpty(t)||(this.service=new s.a(t,b.requestorID));var e=this.mvpdManager.getCurrentMvpdID(),t=this.mvpdManager.getMVPDByID(e);this.mvpdManager.switchToCurrentMvpdStorageType(e),this.mustRetrieveAuthenticationPerRequestorForMvpd(t)?(g.a.debug("Attempt to retrieve authn per requestor token."),this.doPassiveAuthentication(),this.callbackManager.onErrorHandler(d.a.N001)):this.configurationInitializedHelper()},b.prototype.configurationInitializedHelper=function(){this.removeGenericEvent("configInit",this.onConfigurationInitialized);var t=this.mvpdManager.getCurrentSP();p.a.isEmpty(t)||(this.service=new s.a(t,b.requestorID)),this.configuration.initialized=!0,b.clientInfo&&b.clientInfo.callSetConfig()&&(t=this.configuration.getConfigForProgrammer()||"",this.callCallback("setConfig",t));for(var e=0,n=this.pendingCallsQueue;e<n.length;e++){var r=n[e];g.a.debug("Executing pending call: "),r.execute()}this.pendingCallsQueue.length=0},b.prototype.startAuthenticationInternalFlow=function(){var t=!(this.authenticationInProgress=!0);if(this.storageManager.getCanAuthenticate()&&(this.storageManager.setCanAuthenticate(!1),t=this.isRedirectedToMvpdLoginPage()),!t){this.storageManager.setCanAuthenticate(!1);var e,n,r=[],i=this.mvpdManager.getRequestorMVPDs();for(e in i)i.hasOwnProperty(e)&&(n=i[e],r.push({ID:n.id,displayName:n.displayName,logoURL:n.logoUrl}));0<r.length?this.callCallback("displayProviderDialog",r):(this.callbackManager.onErrorHandler(d.a.N500),this.callCallback("setAuthenticationStatus",0,c.a.GENERIC_AUTHENTICATION_ERROR))}},b.prototype.doPassiveAuthentication=function(){var e=this;g.a.debug("Performing passive authentication...");var t=this.mvpdManager.getCurrentMvpdID(),t=this.mvpdManager.getMVPDByID(t);this.service.getLoginPageUrl(!0,t,this.authenticationExtraParameters,!1).then(function(t){e.backgroundLoginInProgress=b.clientInfo&&b.clientInfo.isBackgroundLogin(),p.b.createHiddenIframe("com_adobe_pass_passive_authn",t)})},b.prototype.completePassiveAuthentication=function(){var r=this;g.a.debug("completePassiveAuthentication"),this.service.retrieveAuthenticationToken(function(t){return r.authnSuccess(t)},function(t,e,n){return r.authnError(t,e,n)})},b.prototype.configureApassEndpoints=function(t){t&&t.host&&t.host.match(/(.*)-staging.(.*)/)&&(this.spHost="sp.auth-staging.adobe.com"),l.a.serviceProviderURL="https://"+this.spHost+"/adobe-services",g.a.info("Running against: "+this.spHost)},b.prototype.addGenericEvent=function(t,e){window.addEventListener?window.addEventListener(t,e,!1):window.attachEvent("on"+t,e)},b.prototype.removeGenericEvent=function(t,e){window.removeEventListener?window.removeEventListener(t,e,!1):window.detachEvent("on"+t,e)},b.prototype.passiveAuthnHandler=function(t){t&&"PASSIVE_AUTHN_COMPLETE"===t.data&&this.completePassiveAuthentication()},b.prototype.isDebug=function(t){return-1!==document.cookie.indexOf("debug")||t&&t.hasOwnProperty("query")&&t.query.hasOwnProperty("debug")},b.prototype.getRedirectURL=function(t){return t&&"null"!==t&&4<t.length?t:window.location.href},b.prototype.createHiddenIframe=function(t,e){var n=document.querySelector("iframe[name="+t+"]");n?n.setAttribute("src",e):((n=document.createElement("iframe")).setAttribute("name",t),n.setAttribute("src",e),n.setAttribute("style","display:none"),document.body.appendChild(n))},b.prototype.receiveMessage=function(t){var e,n=this;!t.origin||/auth.*\.adobe\.com/.test(t.origin)?(e={PROXY_LOADED:function(){return n.completeInitialization()},LOGIN_COMPLETE:this.completeBackgroundLogin,LOGOUT_COMPLETE:this.completeBackgroundLogout}[t.data])&&e.call(this):g.a.trace("Ignoring postmessage from origin "+t.origin)},b.prototype.completeInitialization=function(){var t=this;this.mvpdManager=i.a.getInstance(),this.storageManager=h.b.getInstance(),this.storageManager.syncStorage().then(function(){g.a.debug("Initial storage sync complete!"),t.callCallback("entitlementLoaded")})},b.prototype.loadProxy=function(t){var e=this.determineProxyHost(t);g.a.info("Loading proxy from: "+e);var n=t.pathname.replace("AccessEnabler.js","");R.a.globalOptions.proxyURL="https://"+e+n+"AccessEnablerProxy.html";n=R.a.globalOptions.proxyURL+"?"+r.h;this.isDebug(t)&&(n+="&debug"),n+="#"+encodeURIComponent(document.location.href),window.accessEnablerProxy=document.createElement("iframe"),accessEnablerProxy.setAttribute("name","adobeIFrame"),accessEnablerProxy.setAttribute("id","adobeIFrame"),accessEnablerProxy.setAttribute("style","display:none"),accessEnablerProxy.setAttribute("src",n),E.a.appendChild(accessEnablerProxy)},b.prototype.determineProxyHost=function(t){if(t)switch(t.hostname){case"entitlement.auth.adobe.com":return g.a.info("Environment: PRODUCTION"),"sp.auth.adobe.com";case"entitlement.auth-staging.adobe.com":return g.a.info("Environment: STAGING"),"sp.auth-staging.adobe.com";default:return g.a.info("Environment: CUSTOM"),t.host}},b.prototype.parseErrorResponse=function(t){var e="code"in t&&"message"in t?(g.a.warn("Received a non xhr object!"),t):400===t.status?(h.b.getInstance().clearStorage(),{code:c.a.GENERIC_AUTHORIZATION_ERROR,message:t.statusText}):t.responseText?((e=t.responseText.split("details")[1])&&2<e.length&&(e=e.substring(1,e.length-2)),{code:c.a.USER_NOT_AUTHORIZED_ERROR,message:e}):{code:c.a.GENERIC_AUTHORIZATION_ERROR,message:""};return e},b.prototype.openLoginWindow=function(n,r){var i=this;setTimeout(function(){var t,e=window.open(n,r);p.b.isIE()&&(g.a.warn("Internet Explorer 11 or older detected: using a timer to handle login completion..."),t=setInterval(function(){e.closed&&(g.a.debug("Login window closed"),clearInterval(t),i.completeBackgroundLogin())},200))},150)},b.clientInfo=null,b.deviceInfo={deviceType:"",clientType:"",os:""},b.requestorID=null,e([n],b.prototype,"completeBackgroundLogout",null),e([n],b.prototype,"doBackgroundLogout",null),e([n],b.prototype,"ditchTokens",null),e([n],b.prototype,"authnSuccess",null),e([n],b.prototype,"authnError",null),e([n],b.prototype,"completeBackgroundLogin",null),e([n],b.prototype,"callCallback",null),e([n],b.prototype,"bind",null),e([n],b.prototype,"unbind",null),e([n],b.prototype,"getProxyMVPD",null),e([n],b.prototype,"setRequestor",null),e([n],b.prototype,"getSelectedProvider",null),e([n],b.prototype,"setSelectedProvider",null),e([n],b.prototype,"getAuthorization",null),e([n],b.prototype,"checkAuthorization",null),e([n],b.prototype,"getAuthentication",null),e([n],b.prototype,"checkAuthentication",null),e([n],b.prototype,"getMetadata",null),e([n],b.prototype,"checkPreauthorizedResources",null),e([n],b.prototype,"logout",null),e([n],b.prototype,"getStorageData",null),b);function b(t){var e=this;this.callbackManager=new o(this),this.spHost="sp.auth.adobe.com",this.methodInvokingAuthorization=null,this.cachedAuthorization=!1,this.cachedAuthentication=!0,this.authenticationInProgress=!1,this.pendingAuthorizationInProgress=!1,this.authorizationExtraParameters=null,this.authenticationExtraParameters=null,this.resourceID=null,this.redirectURL=null,this.pendingCallsQueue=[],this.backgroundLoginInProgress=null,this.configuration=null,this.retryDueToInvalidIndividualization=!0,this.softwareStatement=t;t=new k(A.a.get(),null,!0);g.a.info("Version: 4.2.1-fbe07ba "+(this.isDebug(t)?"DEBUG":"RELEASE")),g.a.setLevel(this.isDebug(t)?1:4),this.loadProxy(t),this.configureApassEndpoints(t),this.addGenericEvent("message",function(t){return e.passiveAuthnHandler(t)}),this.addGenericEvent("message",function(t){return e.receiveMessage(t)})}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=(c.parseXML=function(t){return t&&"string"==typeof t?(new DOMParser).parseFromString(t,"text/xml"):null},c),i=(s.extend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=1;n<t.length;n++)for(var r in t[n])t[n].hasOwnProperty(r)&&(t[0][r]=t[n][r]);return t[0]},s.isEmpty=function(t){if(!t||s.isUndefined(t)||null===t)return!0;if(t.length)return!t.length;if(t.size)return!t.size;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},s.isUndefined=function(t){return void 0===t},s),o=(a.inArray=function(t,e){if(e.indexOf)return e.indexOf(t);for(var n in e)if(e[n]===t)return n;return-1},a.createHiddenIframe=function(t,e){var n,r=document.getElementsByTagName("iframe");if(0<r.length)for(var i=0;i<r.length;i++)if(r[i].getAttribute("name")===t){n=r[i];break}n||((n=document.createElement("iframe")).setAttribute("name",t),n.setAttribute("id",t),n.setAttribute("style","display:none"),document.body.appendChild(n)),n.setAttribute("src",e)},a.convertServerDateToISO8601DateFormat=function(t){var e=t.split(" "),n=e[0],r=e[1],t=e[3],n=n.split("/").join("-"),e=t.length-2;return n+"T"+r+t.substr(0,e)+":"+t.substr(e)},a.isIE=function(){var t=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/),e=!(!navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/));return t||e},a);function a(){}function s(){}function c(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=(i.getNodeText=function(t,e){return this._getNode(t,e,"textContent")},i.getNode=function(t,e){return this._getNode(t,e)},i.getNodes=function(t,e){return this._getNode(t,e,void 0,!0)},i.appendChild=function(t){"interactive"===document.readyState||"complete"===document.readyState?document.body.appendChild(t):(this.createDOMContentLoadedListener(),this.elementsToBeAppended.push(t))},i.createDOMContentLoadedListener=function(){var t,e=this;this.DOMContentLoadedListenerCreated||(this.DOMContentLoadedListenerCreated=!0,t=function(){for(;0<e.elementsToBeAppended.length;)document.body.appendChild(e.elementsToBeAppended.pop());document.removeEventListener?document.removeEventListener("DOMContentLoaded",t,!1):document.detachEvent("onDOMContentLoaded",t)},document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):document.attachEvent("onDOMContentLoaded",t))},i._getNode=function(t,e,n,r){if(void 0===n&&(n=null),void 0===r&&(r=!1),e){t=e.getElementsByTagName(t);if(0<t.length)return r?t:n?t[0][n]:t[0]}return""},i.elementsToBeAppended=[],i.DOMContentLoadedListenerCreated=!1,i);function i(){}},function(t,e,n){"use strict";var a=n(9),r=n(1),i=(m.prototype.setItem=function(t,e){this.memoryStorageContent[t]=e},m.prototype.getItem=function(t){return this.memoryStorageContent[t]},m.prototype.removeItem=function(t){delete this.memoryStorageContent[t]},m),o=n(4),s=(R.AUTHN_TOKEN="authenticationToken",R.AUTHZ_TOKEN="authorizationToken",R.USER_METADATA="userMeta",R.MVPD="mvpd",R.CAN_AUTHN="canAuthenticate",R.PREAUTHORIZATION_CACHE="preauthorizationCache",R),c=(A.prototype.setAuthenticationTokens=function(t){this.authenticationToken=t},A.prototype.getAuthenticationTokens=function(){return this.authenticationToken},A.prototype.setAuthorizationTokens=function(t){this.authorizationToken=t},A.prototype.getAuthorizationTokens=function(){return this.authorizationToken},A.prototype.setUserMetadata=function(t){this.userMeta=t},A.prototype.getUserMetadata=function(){return this.userMeta},A.prototype.setMvpdID=function(t){this.mvpd=t},A.prototype.getMvpdID=function(){return this.mvpd},A.prototype.setCanAuthenticate=function(t){this.canAuthenticate=t},A.prototype.getCanAuthenticate=function(){return this.canAuthenticate},A.prototype.setPreauthorizationCache=function(t){this.preauthorizationCache=t},A.prototype.getPreauthorizationCache=function(){return this.preauthorizationCache},A.prototype.loadEntitlementTokenFromJSONObject=function(t){this.authenticationToken=t[s.AUTHN_TOKEN],this.authorizationToken=t[s.AUTHZ_TOKEN],this.userMeta=t[s.USER_METADATA],this.mvpd=t[s.MVPD],this.canAuthenticate=t[s.CAN_AUTHN],this.preauthorizationCache=t[s.PREAUTHORIZATION_CACHE]},A.prototype.isEntitlementTokenContentValid=function(){return this&&!o.a.isUndefined(this.authenticationToken)&&!o.a.isUndefined(this.authorizationToken)&&!o.a.isUndefined(this.mvpd)&&!o.a.isUndefined(this.canAuthenticate)&&Array.isArray(this.authenticationToken)&&Array.isArray(this.authorizationToken)},A),u=n(10),l=n(0),h=n(12),d=n(3),g=n(18),p=n(7),E=n(19),I=n(22),f=n(21),T=(v.createEmptyDataObject=function(t){switch(t){case S.APPLICATION_REGISTRATION:return new E.a;case S.ACCESS_TOKEN:return new I.a;case S.REG_CODE:return new f.a;default:return null}},v);function v(){}function A(){this.authenticationToken=[],this.authorizationToken=[],this.userMeta={},this.mvpd=null,this.canAuthenticate=!1,this.preauthorizationCache=[]}function R(){}function m(){this.memoryStorageContent={}}n.d(e,"a",function(){return S}),n.d(e,"b",function(){return _});var S=(N.LOCAL_STORAGE_PRIMARY_KEY="entitlementToken",N.SESSION_STORAGE_PRIMARY_KEY="sessionStorage",N.MEMORY_STORAGE_PRIMARY_KEY="memoryStorage",N.STORAGE_VERSION_KEY="storageVersion",N.GENERIC_REQUESTOR="GenericRequestor",N.DEVICE_IID_KEY="iid",N.DEVICE_SFP_KEY="sfp",N.APPLICATION_REGISTRATION="applicationRegistration",N.ACCESS_TOKEN="accessToken",N.REG_CODE="regCode",N),y=(D.LOCAL_STORAGE="local",D.SESSION_STORAGE="session",D.MEMORY_STORAGE="memory",D),_=(O.getInstance=function(){return this.instance||(this.instance=new O),this.instance},O.prototype.getEntitlementToken=function(){return this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken},O.prototype.syncStorage=function(){var r=this;return new Promise(function(n){r.pm.postStorage("getItems",S.STORAGE_VERSION_KEY,S.DEVICE_IID_KEY,S.GENERIC_REQUESTOR,S.LOCAL_STORAGE_PRIMARY_KEY,S.SESSION_STORAGE_PRIMARY_KEY).then(function(e){if(!r.isDirty&&!o.a.isEmpty(e)&&!e.error)for(var t in e)if(e[t]!==localStorage.getItem(t)&&(localStorage.setItem(t,e[t]),t===r.storagePrimaryKey))try{r.entitlementToken=JSON.parse(e[t])}catch(t){l.a.error("Error parsing value from SSO storage",t)}r.pm.postStorage("isSessionCookieSet").then(function(t){r.isDirty||o.a.isEmpty(e)||t.isSessionCookieSet&&u.a.setSessionCookie()}),r.startTimer(),n()})})},O.prototype.getStorageData=function(){return[this.internalLocalStorage.getItem(S.LOCAL_STORAGE_PRIMARY_KEY),this.internalLocalStorage.getItem(S.SESSION_STORAGE_PRIMARY_KEY)]},O.prototype.switchToSessionStorage=function(){this.isLocalStorageSpaceEnabled()&&(l.a.warn("Switch to using session storage!"),this.storageType=y.SESSION_STORAGE,this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage),this.entitlementToken=this.loadEntitlementTokenFromStorage()},O.prototype.switchToLocalStorage=function(){this.isLocalStorageSpaceEnabled()&&(l.a.warn("Switch to using local storage!"),this.storageType=y.LOCAL_STORAGE,this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage),this.entitlementToken=this.loadEntitlementTokenFromStorage()},O.prototype.setApplicationRegistration=function(t){this.saveDataToStorage(t,S.APPLICATION_REGISTRATION)},O.prototype.getApplicationRegistration=function(){return this.loadDataFromStorage(S.APPLICATION_REGISTRATION)},O.prototype.setAccessToken=function(t){this.saveDataToStorage(t,S.ACCESS_TOKEN)},O.prototype.getAccessToken=function(){return this.loadDataFromStorage(S.ACCESS_TOKEN)},O.prototype.setRegCode=function(t){this.saveDataToStorage(t,S.REG_CODE)},O.prototype.getRegCode=function(){return this.loadDataFromStorage(S.REG_CODE)},O.prototype.setAuthenticationToken=function(t){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var e=this.entitlementToken.getAuthenticationTokens(),n=0;n<e.length;)new a.a(e[n]).getRequestorID()===t.getRequestorID()?e.splice(n,1):n++;e.push(t.getSource()),this.saveEntitlementTokenToStorage(this.entitlementToken)},O.prototype.getAuthenticationToken=function(){var t=this.getMvpdID(),e=null;return!t||(t=h.a.getInstance().getMVPDByID(t))&&(e=t.authPerAggregator?this.searchForAuthenticationTokenForRequestor(d.a.requestorID):this.searchForFirstValidAuthenticationToken()),e},O.prototype.searchForFirstValidAuthenticationTokenForCurrentMvpd=function(){var t=this.getMvpdID(),e=null;if(t){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var n=void 0,r=0,i=this.entitlementToken.getAuthenticationTokens();r<i.length;r++){var o=i[r];if((n=new a.a(o)).getMVPDID()===t&&n.isValid()){e=n;break}}}return e},O.prototype.setAuthorizationToken=function(t){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var e,n=this.entitlementToken.getAuthorizationTokens(),r=0;r<n.length;)(e=new a.a(n[r])).getRequestorID()===t.getResourceID()&&e.getResourceID()===t.getResourceID()?n.splice(r,1):r++;n.push(t.getSource()),this.saveEntitlementTokenToStorage(this.entitlementToken)},O.prototype.getAuthorizationToken=function(t,e){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var n=null,r=0,i=this.entitlementToken.getAuthorizationTokens();r<i.length;r++){var o=i[r];if((o=new a.a(o)).getRequestorID()===t&&o.getResourceID()===e){n=o;break}}return n},O.prototype.setUserMetadata=function(t){if(this.isDirty=!0,o.a.isEmpty(t))l.a.warn("Received empty userMetadata");else if(d.a.requestorID){var e,n,r,i=this.getMvpdID();this.entitlementToken=this.loadEntitlementTokenFromStorage();try{this.entitlementToken.getUserMetadata()||this.entitlementToken.setUserMetadata({}),i?(e=h.a.getInstance().getMVPDByID(i))?(n=JSON.parse(t),r=e.authPerAggregator?d.a.requestorID:S.GENERIC_REQUESTOR,this.entitlementToken.getUserMetadata()[r]=n,this.saveEntitlementTokenToStorage(this.entitlementToken)):l.a.warn("Cannot set user metadata token: invalid MVPD selected."):l.a.warn("Cannot set user metadata token: no MVPD selected.")}catch(t){l.a.error(t)}}else l.a.warn("Cannot set user metadata: requestor is not configured.")},O.prototype.mergeUserMetadata=function(t){var e=this.getUserMetadata();try{var n=JSON.parse(t),r=parseInt(n.updated,10);if(parseInt(e.updated,10)<r&&n.data)try{e.updated=r;var i,o=n.data;for(i in o)o.hasOwnProperty(i)&&(e.data[i]=o[i]);this.setUserMetadata(JSON.stringify(e))}catch(e){l.a.warn("Error merging user metadata tokens."),this.setUserMetadata(t)}else l.a.warn("The metadata token received from the server has invalid properties.")}catch(t){l.a.warn("The metadata token received from the server cannot be parsed.")}},O.prototype.getUserMetadata=function(){var t,e=this.getMvpdID(),n=null;return!e||(t=h.a.getInstance().getMVPDByID(e))&&(this.entitlementToken=this.loadEntitlementTokenFromStorage(),(e=this.entitlementToken.getUserMetadata())&&(n=t.authPerAggregator?e[d.a.requestorID]:e[S.GENERIC_REQUESTOR])),n},O.prototype.setMvpdID=function(t){this.isDirty=!0,this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdID(null===t?null:String(t)),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY)},O.prototype.getMvpdID=function(){return this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY),this.entitlementToken.getMvpdID()},O.prototype.setCanAuthenticate=function(t){this.isDirty=!0,this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setCanAuthenticate(Boolean(t)),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY)},O.prototype.getCanAuthenticate=function(){return this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===y.SESSION_STORAGE&&(this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY),Boolean(this.entitlementToken.getCanAuthenticate())},O.prototype.setPreauthorizationCache=function(t){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setPreauthorizationCache(t.concat()),this.saveEntitlementTokenToStorage(this.entitlementToken)},O.prototype.getPreauthorizationCache=function(){return this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.getPreauthorizationCache()},O.prototype.setDeviceId=function(t){var e=this;this.isDirty=!0,this.storage.setItem(S.DEVICE_IID_KEY,t),this.storageType!==y.MEMORY_STORAGE&&this.pm.postStorage("setItem",S.DEVICE_IID_KEY,t).then(function(){return e.isDirty=!1})},O.prototype.setSFP=function(t){var e=this;this.isDirty=!0,this.storage.setItem(S.DEVICE_SFP_KEY,t),this.storageType!==y.MEMORY_STORAGE&&this.pm.postStorage("setItem",S.DEVICE_SFP_KEY,t).then(function(){return e.isDirty=!1})},O.prototype.getDeviceId=function(){return this.storage.getItem(S.DEVICE_IID_KEY)},O.prototype.getSFP=function(){return this.storage.getItem(S.DEVICE_SFP_KEY)},O.prototype.clearDeviceId=function(){this.storage.removeItem(S.DEVICE_IID_KEY)},O.prototype.getSAMLNameID=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();var t=this.searchForFirstValidAuthenticationToken();return t?t.getProperty("simpleSamlNameID"):null},O.prototype.getSAMLSessionIndex=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();var t=this.searchForFirstValidAuthenticationToken();return t?t.getProperty("simpleSamlSessionIndex"):null},O.prototype.clearStorage=function(t){void 0===t&&(t=!0),this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdID(null),this.entitlementToken.setCanAuthenticate(!1),t&&(l.a.warn("Storage content was reset!"),this.entitlementToken.setAuthenticationTokens([]),this.entitlementToken.setUserMetadata({})),this.entitlementToken.setAuthorizationTokens([]),this.saveEntitlementTokenToStorage(this.entitlementToken)},O.prototype.resetStorage=function(){this.isDirty=!0,l.a.warn("Storage content was reset!"),this.saveDataToStorage(null,S.APPLICATION_REGISTRATION),this.saveDataToStorage(null,S.ACCESS_TOKEN),this.saveDataToStorage(null,S.REG_CODE),this.entitlementToken=new c,this.saveEntitlementTokenToStorage(this.entitlementToken)},O.prototype.searchForAuthenticationTokenForRequestor=function(t){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var e=null,n=0,r=this.entitlementToken.getAuthenticationTokens();n<r.length;n++){var i=r[n];if((i=new a.a(i)).getRequestorID()===t){e=i;break}}return e},O.prototype.searchForFirstValidAuthenticationToken=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t=null,e=0,n=this.entitlementToken.getAuthenticationTokens();e<n.length;e++){var r=n[e];if((r=new a.a(r)).isValid()){t=r;break}}return t},O.prototype.loadEntitlementTokenFromStorage=function(){var t=this,e=null,n=new c;try{var r=this.storage.getItem(this.storagePrimaryKey);r&&(e=JSON.parse(r))}catch(t){l.a.error(t),l.a.warn("Storage content was invalid when trying to convert from String to JSON Object!")}if(!e)return l.a.warn("Storage content was missing, null or couldn't be parsed!"),this.resetStorage(),new c;if(o.a.isEmpty(e))return l.a.warn("Storage content was an empty JSON Object!"),this.resetStorage(),new c;if(n.loadEntitlementTokenFromJSONObject(e),!n.isEntitlementTokenContentValid())return l.a.warn("Storage content was invalid when trying to validate entitlement token content!"),this.resetStorage(),new c;if(this.storageType!==y.SESSION_STORAGE||u.a.isSessionCookieSet())return n;l.a.warn("New authentication session! Session storage was reset!"),this.isDirty=!0,u.a.setSessionCookie(),this.pm.postStorage("setSessionCookie").then(function(){t.isDirty=!1});n=new c;return this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY,this.saveEntitlementTokenToStorage(n),n},O.prototype.saveEntitlementTokenToStorage=function(e){var n=this;try{this.storageType===y.MEMORY_STORAGE&&this.isLocalStorageSpaceEnabled()&&(this.storagePrimaryKeyBeforeSwitchingToMemoryStorage===S.LOCAL_STORAGE_PRIMARY_KEY?(l.a.warn("Switch to local storage from memory storage!"),this.storageType=y.LOCAL_STORAGE,this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY):(l.a.warn("Switch to session storage from memory storage!"),this.storageType=y.SESSION_STORAGE,this.storagePrimaryKey=S.SESSION_STORAGE_PRIMARY_KEY),this.storage=this.internalLocalStorage),this.storage.setItem(this.storagePrimaryKey,JSON.stringify(e)),this.storageType!==y.MEMORY_STORAGE&&this.pm.postStorage("setItem",this.storagePrimaryKey,JSON.stringify(e)).then(function(){var t=n.getDeviceId();o.a.isEmpty(t)||n.pm.postStorage("setItem",S.DEVICE_IID_KEY,t),n.isDirty=!1})}catch(t){l.a.error(t),e=this.sanitizeEntitlementToken(e);try{this.storage.setItem(this.storagePrimaryKey,JSON.stringify(e)),this.pm.postStorage("setItem",this.storagePrimaryKey,JSON.stringify(e)).then(function(){var t=n.getDeviceId();o.a.isEmpty(t)||n.pm.postStorage("setItem",S.DEVICE_IID_KEY,t),n.isDirty=!1})}catch(n){l.a.error(n),l.a.warn("Web browser localStorage space is still exceeded, switch to using memory storage!"),this.storagePrimaryKeyBeforeSwitchingToMemoryStorage=this.storagePrimaryKey,this.storageType=y.MEMORY_STORAGE,this.storagePrimaryKey=S.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage,this.storage.setItem(this.storagePrimaryKey,JSON.stringify(e))}}},O.prototype.loadDataFromStorage=function(t){var e=null,n=T.createEmptyDataObject(t);try{var r=this.storage.getItem(t);r&&(e=JSON.parse(r))}catch(e){return l.a.warn("Storage data was invalid when trying to convert from String to JSON Object!",t),null}return e?(n.copyFromJSONObject(e),n.isValid()?n:(l.a.warn("Storage data was invalid when trying to validate content!",t),null)):(l.a.warn("Storage data was missing, null or couldn't be parsed!",t),null)},O.prototype.saveDataToStorage=function(e,n){try{this.storage.setItem(n,JSON.stringify(e))}catch(t){l.a.error(t),l.a.warn("Web browser localStorage space is exceeded, switch to using memory storage!"),this.storagePrimaryKeyBeforeSwitchingToMemoryStorage=this.storagePrimaryKey,this.storageType=y.MEMORY_STORAGE,this.storagePrimaryKey=S.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage,this.storage.setItem(n,JSON.stringify(e))}},O.prototype.isLocalStorageSpaceEnabled=function(){try{return this.internalLocalStorage=localStorage,!0}catch(t){return O.error=r.a.LS011,!1}},O.prototype.isLocalStorageSpaceAvailable=function(){try{return this.internalLocalStorage.setItem("canWrite","test"),this.internalLocalStorage.removeItem("canWrite"),this.internalLocalStorage.setItem("canWrite","yes"),"yes"===this.internalLocalStorage.getItem("canWrite")||(O.error=r.a.LS011,!1)}catch(t){return O.error=r.a.LS011,!1}},O.prototype.startTimer=function(){var t=this;setTimeout(function(){return t.syncStorage()},1e3)},O.prototype.sanitizeEntitlementToken=function(t){for(var e=t.getAuthenticationTokens(),n=0;n<e.length;)new a.a(e[n]).isValid()?n++:e.splice(n,1);for(var r=t.getAuthorizationTokens(),n=0;n<r.length;)new a.a(r[n]).isValid()?n++:r.splice(n,1);return t},O);function O(){this.internalMemoryStorage=new i,this.pm=new g.a(p.a.globalOptions.proxyURL,window.accessEnablerProxy.contentWindow),this.isLocalStorageSpaceEnabled()&&this.isLocalStorageSpaceAvailable()?(this.storageType=y.LOCAL_STORAGE,this.storagePrimaryKey=S.LOCAL_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage):(l.a.warn("Web localStorage is not enabled or not available, switch to using memory storage!"),this.storageType=y.MEMORY_STORAGE,this.storagePrimaryKey=S.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage),this.storage.setItem(S.STORAGE_VERSION_KEY,2),this.storageType!==y.MEMORY_STORAGE&&this.pm.postStorage("setItem",S.STORAGE_VERSION_KEY,2)}function D(){}function N(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(14),o=n(4),a=n(0),s=n(18),i=n(6),c=n(20),u=n(1),l=n(17),h=(d.xhrToObject=function(t){if(t.getAllResponseHeaders){var e={};t.getAllResponseHeaders().split("\r\n").map(function(t){t=t.split(": ");2===t.length&&(e[t[0].toLowerCase()]=t[1])});var n={status:t.status,statusText:t.statusText,responseText:t.responseText,responseHeaders:e};return t.resourceID&&(n.resourceID=t.resourceID),a.a.debug("Converted xhr into serializable object",t,n),n}return a.a.warn("trying to objectify a non xhr!",t),t},d.isCors=function(t){t=new l(t,null,!1);return 0!==window.location.href.indexOf(t.origin)},d.prototype.send=function(){var i=this;this.options.proxyRequest?(a.a.debug("Sending proxy request: ",this.options),this.postMesager.postAjax(this.options).then(function(t){a.a.debug("Proxy response received: ",t);var e=t.status,n=t.data,r=200<=t.status&&t.status<400?i.options.success:i.options.error,n="xml"===i.options.dataType?o.c.parseXML(n):n;401===t.status&&i.retrialAjax?i.onAuthorizationFailureHandler():r.apply(i.options.context,[n,e,t.xhr])})):(a.a.debug("Sending request: ",this.options),this.xhr.send(this.options.data))},d.prototype.processOptions=function(t){var e=o.a.extend(Object.create(d.globalOptions),this.defaultOptions,t);return t.data&&(e.data=o.a.extend({},this.defaultOptions.data,t.data)),t.headers&&(e.headers=o.a.extend({},this.defaultOptions.headers,t.headers)),e},d.prototype.setData=function(){var t;o.a.isEmpty(this.options.data)||(t=r.a.param(this.options.data,this.options.traditional),"POST"===this.options.type?"json"===this.options.dataType?this.options.data=JSON.stringify(this.options.data):this.options.data=t:(this.urlObj.query&&1<this.urlObj.query.length?this.urlObj.query+="&"+t:this.urlObj.query=t,this.options.data=null))},d.prototype.setCookies=function(){for(var t in this.options.cookies)this.options.cookies.hasOwnProperty(t)&&(o.a.isEmpty(this.options.cookies[t])?document.cookie=t+"= ;Secure ;SameSite=None ;path=/ ;expires=Thu, 01 Jan 1970 00:00:00 UTC;":document.cookie=t+"="+this.options.cookies[t]+" ;Secure ;SameSite=None ;path=/")},d.prototype.setCache=function(){var t;this.options.cache||(a.a.debug("busting cache!"),t="_="+(new Date).getTime(),this.urlObj.query&&1<this.urlObj.query.length?this.urlObj.query+="&"+t:this.urlObj.query=t)},d.prototype.setHeaders=function(){if("POST"===this.options.type&&("json"===this.options.dataType?this.xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"):this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),this.options.headers)for(var t in this.options.headers)this.options.headers.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.headers[t]);this.options.dataType&&this.mimeTypes[this.options.dataType]&&this.xhr.setRequestHeader("Accept",this.mimeTypes[this.options.dataType])},d.prototype.getXHR=function(){var t=new XMLHttpRequest;return d.isCors(this.urlObj.origin)&&(a.a.debug("Enabling CORS"),t.withCredentials=!0),t},d.prototype.onAuthorizationFailureHandler=function(){var e=this;a.a.warn("Ajax call failed due to invalid authorization. Will invalidate application registration and access token!"),i.b.getInstance().setApplicationRegistration(null),i.b.getInstance().setAccessToken(null),c.a.getInstance().obtainAccessToken().then(function(t){a.a.warn("Will retry the Ajax call with new access token!"),e.options.headers.Authorization="Bearer "+t.getAccessToken(),new d(e.options,!1).send()},function(t){e.options.error(t,u.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},d.globalOptions={proxyURL:"AccessEnablerProxy.html"},d.globalHeaders={},d.globalCookies={client_type:"html5",client_version:"4.2.1"},d.globalData={},d);function d(i,t){void 0===t&&(t=!0);var o=this;this.defaultOptions={url:window.location.href,async:!0,cache:!1,type:"GET",context:this,dataType:"xml",timeout:3e4,data:d.globalData,headers:d.globalHeaders,cookies:d.globalCookies,traditional:!1,proxyRequest:!(navigator.vendor&&navigator.vendor.match(/Apple/)),proxyResponse:!1},this.mimeTypes={xml:"application/xml",json:"application/json",text:"*/*"},this.retrialAjax=!0,this.options=this.processOptions(i),this.urlObj=new l(this.options.url,null,!1),this.retrialAjax=t,this.options.proxyRequest?(t=this.options.proxyURL+"#"+encodeURIComponent(document.location.href),this.postMesager=new s.a(t,window.accessEnablerProxy.contentWindow)):(this.setCookies(),this.setCache(),this.setData(),this.xhr=this.getXHR(),this.xhr.onreadystatechange=function(t){var e,n,r=t.target;i.data&&i.data.resource_id&&(r.resourceID=i.data.resource_id),4===r.readyState&&(a.a.debug("XHR response received: ",r),e=200<=r.status&&r.status<400?o.options.success:o.options.error,n="xml"!==o.options.dataType||o.options.proxyResponse?r.responseText:r.responseXML,!1===o.options.proxyResponse&&401===r.status&&o.retrialAjax?o.onAuthorizationFailureHandler():e.apply(o.options.context,[n,t.target.status,d.xhrToObject(r)]))},this.options.url=this.options.url=this.urlObj.toString(),this.xhr.open(this.options.type,this.options.url,this.options.async),this.options.async&&(this.xhr.timeout=this.options.timeout),this.setHeaders())}},function(t,e,i){"use strict";var u=i(1),c=i(14),l=i(7),n=i(16),o=i(0),r=i(6),h=i(3),s=i(12),d=i(4),a=i(20),g=i(15),p=i(11),E=i(21),I=i(17),f=(A.getInstance=function(){return this.instance||(this.instance=new A),this.instance},A.prototype.obtainRegCode=function(r){var i=this;return new Promise(function(e,n){var t=i.storageManager.getRegCode();t?e(t):i.retrieveRegCode(r).then(function(t){e(t)},function(t){n(t)})})},A.prototype.retrieveRegCode=function(o){var a=this;return new Promise(function(e,n){function r(t){t=new E.a(t.data),a.storageManager.setRegCode(t),e(t)}function i(t){A.RETRY_RETRIEVING_REG_CODE?(A.RETRY_RETRIEVING_REG_CODE=!1,a.retrieveRegCode(o).then(function(t){e(t)},function(t){n(t)})):t.status===u.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?n(t.data):n(u.a.REG500)}a.identificationManager.getDeviceId().then(function(t){a.httpService.post("/reggie/v1/"+o+R.REG_CODE_ENDPOINT_PATH,{requestor:o,deviceId:t,format:"json"},{url:new I(p.a.serviceProviderURL,null,!0).origin,dataType:"application/x-www-form-urlencoded"}).then(r,i)},function(t){n(t)})})},A.RETRY_RETRIEVING_REG_CODE=!0,A),T=i(2),v=i(10);function A(){this.httpService=g.a.getInstance(),this.storageManager=r.b.getInstance(),this.identificationManager=n.a.getInstance()}i.d(e,"b",function(){return R}),i.d(e,"a",function(){return m});var R=(y.AUTHENTICATION_ENDPOINT_PATH="/authenticate/saml?",y.AUTHENTICATION_TOKEN_ENDPOINT_PATH="/session",y.AUTHORIZATION_TOKEN_ENDPOINT_PATH="/authorize",y.MEDIA_TOKEN_ENDPOINT_PATH="/shortAuthorize",y.PREAUTHORIZATION_ENDPOINT_PATH="/preauthorize",y.LOGOUT_ENDPOINT_PATH="/logout?",y.DEVICE_ID_ENDPOINT_PATH="/getMetadata",y.USER_METADATA_ENDPOINT_PATH="/usermetadata",y.CONFIG_ENDPOINT_PATH="/config",y.INDIVIDUALIZATION_ENDPOINT_PATH="/indiv/devices",y.CLIENT_REGISTRATION_ENDPOINT_PATH="/o/client/register",y.ACCESS_TOKEN_ENDPOINT_PATH="/o/client/token",y.REG_CODE_ENDPOINT_PATH="/regcode",y.PASSIVE_AUTHENTICATION_REDIRECT_ENDPOINT_PATH="/completePassiveAuthentication",y.BACKGROUND_LOGIN_COMPLETE="completeBackgroundLogin.html",y.BACKGROUND_LOGOUT_COMPLETE="completeBackgroundLogout.html",y.BACKGROUND_LOGIN_TEMP_PASS_COMPLETE="completeBackgroundTempPassLogin.html",y),m=(S.prototype.goToLoginPage=function(e,n,t){var r=h.a.clientInfo&&h.a.clientInfo.isBackgroundLogin();this.getLoginPageUrl(!1,e,t,r&&!e.tempPass).then(function(t){return r&&(n=i.p+R.BACKGROUND_LOGIN_COMPLETE),r&&e.tempPass?(o.a.debug("Attempting background temp pass..."),void new l.a({url:t,dataType:"text/html",data:{redirect_url:i.p+R.BACKGROUND_LOGIN_TEMP_PASS_COMPLETE},success:function(){return h.a.getInstance().completeBackgroundLogin()},error:function(){return h.a.getInstance().completeBackgroundLogin()}}).send()):(!1===r&&v.a.setPendingAuthenticationCookieState(!0),void(e.iFrameRequired?h.a.getInstance().callCallback("openIFrame",t,e.iFrameWidth,e.iFrameHeight,n):h.a.getInstance().callCallback("navigateToURL",t,n,r)))},function(t){h.a.getInstance().callbackManager.onErrorHandler(t.data),h.a.getInstance().callCallback("setAuthenticationStatus",0,T.a.GENERIC_AUTHENTICATION_ERROR)})},S.prototype.getLoginPageUrl=function(r,i,o,a){var s=this;return void 0===o&&(o=null),void 0===a&&(a=!1),new Promise(function(e,n){s.regCodeService.obtainRegCode(s.requestorID).then(function(t){t={reg_code:t.getCode(),noflash:!0,mso_id:i.id,requestor_id:s.requestorID,no_iframe:a?"true":"false",domain_name:"adobe.com"};o&&(t.generic_data=o),r&&(t.passive="true",t.redirect_url=s.spURL+R.PASSIVE_AUTHENTICATION_REDIRECT_ENDPOINT_PATH),h.a.clientInfo&&null!==h.a.clientInfo.isIFrameRequiredForMvpd(i.id)&&(t.iframe_required=h.a.clientInfo.isIFrameRequiredForMvpd(i.id));t=d.a.extend(t,l.a.globalData),t=s.spURL+R.AUTHENTICATION_ENDPOINT_PATH+c.a.param(t);e(t)},function(t){n({data:t,status:u.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})})})},S.prototype.retrieveAuthenticationToken=function(n,r){var i=this;this.getRequiredHeaders(R.AUTHENTICATION_TOKEN_ENDPOINT_PATH).then(function(e){i.regCodeService.obtainRegCode(i.requestorID).then(function(t){new l.a({type:"POST",url:i.spURL+R.AUTHENTICATION_TOKEN_ENDPOINT_PATH,data:{_method:"GET",reg_code:t.getCode(),requestor_id:i.requestorID},dataType:"xml",success:n,error:r,headers:e}).send()},function(t){r(t,u.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},function(t){r(t.data,t.status)})},S.prototype.retrieveAuthorizationToken=function(n,r,i,o){var a=this;this.getRequiredHeaders(R.AUTHORIZATION_TOKEN_ENDPOINT_PATH).then(function(t){var e=a.storageManager.getAuthenticationToken();new l.a({type:"POST",url:a.spURL+R.AUTHORIZATION_TOKEN_ENDPOINT_PATH,data:{resource_id:n,requestor_id:a.requestorID,authentication_token:e.getSource(),mso_id:s.a.getInstance().getCurrentMvpdID(),generic_data:r,userMeta:1},dataType:"text",success:i,error:o,headers:t,context:a}).send()},function(t){o(t.data,t.status)})},S.prototype.retrieveMediaToken=function(n,r,i,o){var a=this;this.getRequiredHeaders(R.MEDIA_TOKEN_ENDPOINT_PATH).then(function(t){var e=a.storageManager.getAuthenticationToken();new l.a({type:"POST",url:a.spURL+R.MEDIA_TOKEN_ENDPOINT_PATH,data:{authz_token:n.getSource(),requestor_id:a.requestorID,generic_data:r,session_guid:e.getProperty("simpleTokenAuthenticationGuid"),hashed_guid:"false"},dataType:"text",success:i,error:o,headers:t,context:a}).send()},function(t){o(t.data,t.status)})},S.prototype.retrieveDeviceIDHash=function(e,n,r){var i=this;this.requestorID?this.getRequiredHeaders(R.DEVICE_ID_ENDPOINT_PATH).then(function(t){new l.a({type:"POST",url:i.spURL+R.DEVICE_ID_ENDPOINT_PATH,data:{requestor_id:i.requestorID,device_id:e},dataType:"text/plain",success:n,error:r,headers:t,context:i}).send()},function(t){r(t.data,t.status)}):r(null)},S.prototype.retrieveEncryptedMetadata=function(e,n,r){var i=this,o=this.storageManager.getAuthenticationToken();this.requestorID&&o?this.getRequiredHeaders(R.USER_METADATA_ENDPOINT_PATH).then(function(t){new l.a({type:"POST",url:i.spURL+R.USER_METADATA_ENDPOINT_PATH,data:{requestor:i.requestorID,authn:o.getSource(),metadata:JSON.stringify(e)},dataType:"text",success:n,error:r,headers:t,context:i}).send()},function(t){r(t.data,t.status)}):r(null)},S.prototype.checkPreauthorizedResources=function(e,n,r){var i=this,o=this.storageManager.getAuthenticationToken();o&&o.isValid()&&this.spURL&&this.getRequiredHeaders(R.PREAUTHORIZATION_ENDPOINT_PATH).then(function(t){new l.a({type:"POST",url:i.spURL+R.PREAUTHORIZATION_ENDPOINT_PATH,data:{authentication_token:o.getSource(),requestor_id:i.requestorID,resource_id:e,noflash:!0},dataType:"xml",success:n,error:r,headers:t,context:i,traditional:!0}).send()},function(t){r(t.data,t.status)})},S.prototype.logout=function(t){var e,n=h.a.clientInfo&&h.a.clientInfo.isBackgroundLogout();t&&this.spURL?(e={noflash:!0,mso_id:t.getMVPDID(),requestor_id:this.requestorID,name_id:t.getProperty("simpleSamlNameID"),session_index:t.getProperty("simpleSamlSessionIndex"),pi:t.getProperty("simpleSamlNameID")},(t=t.getProperty("simpleTransientPartOfGuid"))&&(e.p1=t),e=d.a.extend(e,l.a.globalData),t=this.spURL+R.LOGOUT_ENDPOINT_PATH,n?(e.redirect_url=i.p+R.BACKGROUND_LOGOUT_COMPLETE,h.a.getInstance().doBackgroundLogout(t+c.a.param(e))):h.a.getInstance().callCallback("navigateToURL",t+c.a.param(e),null,null)):n?h.a.getInstance().completeBackgroundLogout():h.a.getInstance().callCallback("reload")},S.prototype.getRequiredHeaders=function(s){var c=this;return new Promise(function(e,n){var r=JSON.parse(JSON.stringify(c.identificationManager.getDeviceInfo())),t=c.storageManager.getSAMLNameID();t&&(r.ap_19=t);var i=c.storageManager.getSAMLSessionIndex();i&&(r.ap_23=i);function o(){c.clientRegistrationService.obtainAccessToken().then(function(t){r.Authorization="Bearer "+t.getAccessToken(),e(r)},function(t){n({data:t,status:u.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})})}var t=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(-1!==s.indexOf(r))return!0}return!1},i=t(S.ENDPOINTS_REQUIRING_DEVICE_ID_HEADER),a=t(S.ENDPOINTS_REQUIRING_ACCESS_TOKEN_HEADER);i?c.identificationManager.getDeviceId().then(function(t){r.ap_21=t,r.pass_sfp=c.storageManager.getSFP(),a?o():e(r)},function(t){n({data:t,status:u.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})}):a?o():e(r)})},S.ENDPOINTS_REQUIRING_DEVICE_ID_HEADER=[R.AUTHENTICATION_TOKEN_ENDPOINT_PATH,R.AUTHORIZATION_TOKEN_ENDPOINT_PATH,R.MEDIA_TOKEN_ENDPOINT_PATH],S.ENDPOINTS_REQUIRING_ACCESS_TOKEN_HEADER=[R.INDIVIDUALIZATION_ENDPOINT_PATH,R.CONFIG_ENDPOINT_PATH,R.AUTHENTICATION_ENDPOINT_PATH,R.AUTHENTICATION_TOKEN_ENDPOINT_PATH,R.AUTHORIZATION_TOKEN_ENDPOINT_PATH,R.MEDIA_TOKEN_ENDPOINT_PATH,R.PREAUTHORIZATION_ENDPOINT_PATH,R.LOGOUT_ENDPOINT_PATH,R.DEVICE_ID_ENDPOINT_PATH,R.USER_METADATA_ENDPOINT_PATH,R.REG_CODE_ENDPOINT_PATH],S);function S(t,e){this.spURL=t,this.requestorID=e,this.storageManager=r.b.getInstance(),this.identificationManager=n.a.getInstance(),this.clientRegistrationService=a.a.getInstance(),this.regCodeService=f.getInstance()}function y(){}},function(t,e,n){"use strict";var r=n(5),i=n(0),o=(c.prototype.getAuthorizedResourceID=function(){return i.a.debug("Entered - AuthorizedResource::getAuthorizedResourceID()"),this.xmlElement?this.xmlElement.getAttribute("simpleResourceID"):null},c),a=n(3),s=n(4);function c(t){this.xmlElement=t}n.d(e,"a",function(){return u});var u=(l.prototype.getSource=function(){return this.source},l.prototype.getExpiryDate=function(){if(n=this.getProperty("simpleTokenExpires"))n=new Date(s.b.convertServerDateToISO8601DateFormat(n));else{var t=void 0,e=this.getProperty("issueTime");if(e)var t=this.getProperty("ttl"),e=new Date(s.b.convertServerDateToISO8601DateFormat(e)).getTime(),n=new Date(e+t);else{if(!(t=this.getProperty("simpleTokenTTL")))throw{message:"Invalid token format."};n=new Date(s.b.convertServerDateToISO8601DateFormat(t))}}return n},l.prototype.isExpired=function(){try{var t=this.getExpiryDate().getTime();return(new Date).getTime()>t}catch(t){return i.a.error(t.message),!1}},l.prototype.isValid=function(){try{var t=!this.isExpired();return t=t&&this.isAuthZAll()?a.a.requestorID===this.getRequestorID():t}catch(t){return i.a.error(t.message),!1}},l.prototype.isAuthNAll=function(){var t=this.getProperty("simpleTokenAuthenticationGuid");return"d35b501e0385360feccc755c59f5767b46c54c7d"===t||0===t.indexOf("95cf93bcd183214a")},l.prototype.isAuthZAll=function(){return"true"===this.getProperty("zAll")},l.prototype.getProperty=function(t){return r.a.getNodeText(t,this.xmlData)},l.prototype.getRequestorID=function(){return this.getProperty("simpleTokenRequestorID")},l.prototype.getResourceID=function(){return this.getProperty("simpleTokenResourceID")||this.getProperty("resourceID")},l.prototype.getMVPDID=function(){return this.getProperty("simpleTokenMsoID")},l.prototype.getSubMVPDID=function(){return this.getProperty("simpleTokenSubMvpdID")},l.prototype.getAuthorizedResources=function(){i.a.trace("Entered - Token::getAuthorizedResources()");var t=new Array(0);if(this.xmlData)for(var e=this.xmlData.getElementsByTagName("simpleAuthorizedResource"),t=new Array(e.length),n=0;n<t.length;n++){var r=new o(e[n]);t[n]=r}return t},l);function l(t){this.source=t,this.xmlData=s.c.parseXML(t.split("<signatureInfo>")[2])}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=(a.SESSION_COOKIE_NAME="ap_93",a.PENDING_AUTHENTICATION_COOKIE_NAME="pend_authn",a),i=(o.setSessionCookie=function(){document.cookie=r.SESSION_COOKIE_NAME+"="+(new Date).getTime()+";path=/"},o.isSessionCookieSet=function(){return-1!==document.cookie.indexOf(r.SESSION_COOKIE_NAME)},o.setPendingAuthenticationCookieState=function(t){document.cookie=!0===t?r.PENDING_AUTHENTICATION_COOKIE_NAME+"= ;expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/":r.PENDING_AUTHENTICATION_COOKIE_NAME+"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"},o.isPendingAuthenticationCookieSet=function(){return-1!==document.cookie.indexOf(r.PENDING_AUTHENTICATION_COOKIE_NAME)},o);function o(){}function a(){}},function(t,e,n){"use strict";var u=n(3),l=n(5),i=n(26),a=(E.prototype.getMvpds=function(){var r=this;return this.mvpds||(this.mvpds=[],i(l.a.getNodes(this.MVPD,this.config),function(t){var e=l.a.getNodeText(r.MVPD_ID,t),n={id:e,displayName:r.extractMvpdConfig(r.MVPD_DISPLAY_NAME,e,t,!1),logoUrl:r.extractMvpdConfig(r.MVPD_LOGO_URL,e,t,!1),authPerAggregator:r.extractMvpdConfig(r.MVPD_AUTH_PER_AGGREGATOR,e,t,!0),passiveAuthnEnabled:r.extractMvpdConfig(r.MVPD_PASSIVE_AUTHN,e,t,!0,!0),authPerBrowserSession:r.extractMvpdConfig(r.MVPD_AUTH_PER_BROWER_SESSION,e,t,!0),iFrameRequired:r.extractMvpdConfig(r.MVPD_IFRAME_REQUIRED,e,t,!0),tempPass:l.a.getNodeText(r.TEMP_PASS,t).toLowerCase()===r.TRUE};n.iFrameRequired&&(n.iFrameHeight=r.extractMvpdConfig(r.MVPD_IFRAME_HEIGHT,e,t,!1),n.iFrameWidth=r.extractMvpdConfig(r.MVPD_IFRAME_WIDTH,e,t,!1)),r.mvpds.push(n)})),this.mvpds},E.prototype.getConfigForProgrammer=function(){var e=null;if(this.config&&this.config.documentElement){var n=this.config.documentElement.cloneNode(!0);if(this.removeNonVisibleNode(n))if(void 0!==window.XMLSerializer)try{e=(new XMLSerializer).serializeToString(n)}catch(t){e=n.xml}else e=n.xml}return e},E.prototype.removeNonVisibleNode=function(t){var e=!1;return t.getAttribute(this.ATTR_VISIBLE)===this.VISIBLE_TRUE?(t.removeAttribute(this.ATTR_VISIBLE),e=!0):t.hasChildNodes()&&(e=this.removeNonVisibleChildNodes(t))&&this.removeAttributes(t),e},E.prototype.removeNonVisibleChildNodes=function(t){for(var e=!1,n=t.childNodes,r=0;r<n.length;r++){var i=n[r];1===i.nodeType&&(this.removeNonVisibleNode(i)?e=!0:(t.removeChild(i),r--))}return e},E.prototype.removeAttributes=function(t){for(var e=t.attributes.length-1;0<=e;e--){var n=t.attributes.item(e);t.removeAttributeNode(n)}},E.prototype.extractMvpdConfig=function(t,e,n,r,i){void 0===i&&(i=null);var o,a=u.a.clientInfo&&u.a.clientInfo.getMvpdConfig()?u.a.clientInfo.getMvpdConfig():{},s=null!==a[e]&&void 0!==a[e]&&null!==a[e][t]&&void 0!==a[e][t],c=l.a.getNode(t,n);return s?(o=a[e][t],c&&(c.textContent=o),o):null!==(o=l.a.getNodeText(t,n))&&void 0!==o&&""!==o||void 0===i?r?o===this.TRUE:o:i},E),s=n(1),c=n(13),h=n(2),r=n(8),d=n(0),o=n(15),g=n(12),p=n(10);function E(t){this.TRUE="true",this.ATTR_VISIBLE="visible",this.VISIBLE_TRUE="true",this.MVPD="mvpd",this.MVPD_ID="id",this.MVPD_LOGO_URL="logoUrl",this.MVPD_DISPLAY_NAME="displayName",this.MVPD_AUTH_PER_AGGREGATOR="authPerAggregator",this.MVPD_PASSIVE_AUTHN="passiveAuthnEnabled",this.MVPD_AUTH_PER_BROWER_SESSION="authPerBrowserSession",this.MVPD_IFRAME_REQUIRED="iFrameRequired",this.MVPD_IFRAME_HEIGHT="iFrameHeight",this.MVPD_IFRAME_WIDTH="iFrameWidth",this.TEMP_PASS="tempPass",this.mvpds=null,this.config=t}n.d(e,"a",function(){return I});var I=(f.prototype.initialize=function(t){var e=this;t&&Array.isArray(t)&&0<t.length&&(f.serviceProviderURL=t[0]),f.numConfigCalls++,o.a.getInstance().get(r.b.CONFIG_ENDPOINT_PATH+"/"+this.reqID,{noflash:!0},{url:f.serviceProviderURL,dataType:"xml"}).then(function(t){return e.onConfig(t.data,t.status)},function(t){return e.onConfig(t.data,t.status)})},f.prototype.isValidRequestor=function(){return this.validRequestor},f.prototype.getConfigForProgrammer=function(){return this.configForProgrammer},f.prototype.retrieveAuthenticationToken=function(){this.instance.authenticationProviderURL||(this.instance.authenticationProviderURL=f.serviceProviderURL),d.a.debug("Pending authentication detected..."),new r.a(this.instance.authenticationProviderURL,u.a.requestorID).retrieveAuthenticationToken(function(t){return u.a.getInstance().authnSuccess(t)},function(t,e,n,r){return u.a.getInstance().authnError(t,e,n,r)})},f.prototype.completeInitialization=function(){0!==f.numConfigCalls||this.instance.authenticationProviderURL||(d.a.debug("Configuration INITIALIZED"),this.completeHandler())},f.prototype.resetAuthenticationProviderURL=function(){this.instance.authenticationProviderURL=null},f.prototype.onConfig=function(t,e){if(200!==e){if(e===s.a.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)return void u.a.getInstance().callbackManager.onErrorHandler(t);if(d.a.error("Invalid configuration response: HTTP",e),u.a.getInstance().callbackManager.onErrorHandler(0===e?s.a.SEC420:s.a.buildError(s.a.PREFIX_CFG+e)),410===e)return void u.a.getInstance().callCallback("setAuthenticationStatus",0,h.a.SERVER_API_TOO_OLD)}c.a.checkPendingLogout(t)&&u.a.getInstance().ditchTokens(),200===e&&(this.validRequestor=!0);var n=0;l.a.getNode("time",t)&&(n=parseInt(l.a.getNodeText("time",t),10),d.a.debug("Server time:",n));e=(new Date).getTime();n&&0<n&&((59e3<(r=e-n)||r<-59e3)&&u.a.getInstance().callbackManager.onErrorHandler(s.a.CFG100)),""===u.a.deviceInfo.deviceType&&l.a.getNode("device",t)&&(u.a.deviceInfo.deviceType=l.a.getNodeText("device",t)),""===u.a.deviceInfo.clientType&&l.a.getNode("clientType",t)&&(u.a.deviceInfo.clientType=l.a.getNodeText("clientType",t)),""===u.a.deviceInfo.os&&l.a.getNode("os",t)&&(u.a.deviceInfo.os=l.a.getNodeText("os",t));var r=new a(t),t=r.getMvpds();this.callSetConfig&&(this.configForProgrammer=r.getConfigForProgrammer());for(var i=0,o=t;i<o.length;i++)o[i].serviceProvider=f.serviceProviderURL;g.a.getInstance().addMvpds(t),--f.numConfigCalls,!0!==p.a.isPendingAuthenticationCookieSet()||this.instance.authenticationProviderURL?this.instance.completeInitialization():(p.a.setPendingAuthenticationCookieState(!1),this.instance.retrieveAuthenticationToken())},f.serviceProviderURL=null,f.numConfigCalls=0,f);function f(t,e,n){this.initialized=!1,this.authenticationProviderURL=null,this.validRequestor=!1,this.configForProgrammer=null,(this.instance=this).reqID=t,this.callSetConfig=e,this.completeHandler=n}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(6),i=n(4),o=(a.getInstance=function(){return this.instance||(this.instance=new a),this.instance},a.prototype.getCurrentSP=function(){var t=null,e=this.getCurrentMvpdID();return t=e&&this.getMVPDByID(e)?this.getMVPDByID(e).serviceProvider:t},a.prototype.setCurrentMvpdID=function(t){this.switchToCurrentMvpdStorageType(t),this.storageManager.clearStorage(t!==this.getCurrentMvpdID()),this.storageManager.setMvpdID(t)},a.prototype.getCurrentMvpdID=function(){return this.storageManager.getMvpdID()},a.prototype.getRequestorMVPDs=function(){return this.mvpds},a.prototype.clearRequestorMVPDs=function(){this.mvpds={}},a.prototype.addMvpds=function(t){if(t&&0<t.length)for(var e=0,n=t;e<n.length;e++){var r=n[e];this.mvpds.hasOwnProperty(r.id)||(this.mvpds[r.id]=r)}},a.prototype.getMVPDByID=function(t){return!i.a.isEmpty(this.mvpds)&&this.mvpds.hasOwnProperty(t)?this.mvpds[t]:null},a.prototype.isValidMVPD=function(t){var e=this.getMVPDByID(t);return!!e&&e.id===t},a.prototype.switchToCurrentMvpdStorageType=function(t){!t||(t=this.getMVPDByID(t))&&(t.authPerBrowserSession?this.storageManager.switchToSessionStorage():this.storageManager.switchToLocalStorage())},a.prototype.getCurrentMvpd=function(){var t=null,e=this.getCurrentMvpdID();return t=e?this.getMVPDByID(e):t},a);function a(){this.mvpds={},this.storageManager=r.b.getInstance()}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(5),i=(o.checkPendingLogout=function(t){if("string"==typeof t)return new RegExp("<pendingLogout.*>(s)*true(s)*</pendingLogout>").test(t);var e=!1;return e=r.a.getNode("pendingLogout",t)&&"true"===r.a.getNodeText("pendingLogout",t)?!0:e},o.getPendingLogoutReason=function(t){var e,n=null;return"string"==typeof t?n=(n=new RegExp('<pendingLogout reason="(.*)">true</pendingLogout>').exec(t))[1]?n[1]:null:(e=r.a.getNode("pendingLogout",t))&&"true"===r.a.getNodeText("pendingLogout",t)&&(n=e.attr("reason")),n},o);function o(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var s=(o.prototype.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?this.class2type[this.toString.call(t)]||"object":typeof t},o.prototype.isFunction=function(t){return"function"===this.type(t)},o.prototype.buildParams=function(t,e,n){var r,i,o;if(Array.isArray(e))for(i in e)e.hasOwnProperty(i)&&(o=e[i],this.rbracket.test(t)?n(t,o):this.buildParams(t+"["+("object"==typeof o?i:"")+"]",o,n));else if("object"===this.type(e))for(r in e)e.hasOwnProperty(r)&&this.buildParams(t+"["+r+"]",e[r],n);else n(t,e)},new o),r=(i.param=function(t,e){var n,r;void 0===e&&(e=!1);function i(t,e){e=s.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)}var o=[];if(Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&i(r,t[r]);else for(n in t)t.hasOwnProperty(n)&&s.buildParams(n,t[n],i);var a=o.join("&").replace(s.r20,"+");return a=e?a.replace(/%5B%5D/g,""):a},i);function i(){}function o(){this.r20=/%20/g,this.class2type={},this.rbracket=/\[\]$/,this.toString=this.class2type.toString}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(7),c=n(3),i=(o.getInstance=function(){return this.instance||(this.instance=new o),this.instance},o.prototype.ajax=function(e,i,o){var a,s=this;return void 0===o&&(o={}),new Promise(function(r,n){c.a.getInstance().getService().getRequiredHeaders(e).then(function(t){a=new s.ajaxReference({type:o.method||"GET",url:""+o.url+e,data:i,dataType:o.dataType||"json",success:function(t,e,n){r({data:t,status:e,headers:n&&n.responseHeaders?n.responseHeaders:[]})},error:function(t,e){n({data:t,status:e})},headers:t,context:o.context||s});try{a.send()}catch(t){n(t)}},function(t){n(t)})})},o.prototype.post=function(t,e,n){return(n=void 0===n?{}:n).method="POST",this.ajax(t,e,n)},o.prototype.get=function(t,e,n){return void 0===e&&(e={}),(n=void 0===n?{}:n).method="GET",this.ajax(t,e,n)},o.prototype.delete=function(t,e,n){return void 0===e&&(e={}),(n=void 0===n?{}:n).method="DELETE",this.ajax(t,e,n)},o.prototype.put=function(t,e,n){return(n=void 0===n?{}:n).method="PUT",this.ajax(t,e,n)},o);function o(){this.ajaxReference=r.a}},function(t,e,r){"use strict";var n=r(6),s=r(1),c=r(2),i=r(0),o=r(24),a=(E.getInstance=function(){return this.instance||(this.instance=new E),this.instance},E.prototype.getFingerprint=function(){var n=this;return new Promise(function(e){Promise.all([r.e(0),r.e(1)]).then(function(){try{(new(r(36).Fingerprint)).get(function(t){i.a.debug("Fingerprinting result ",t),e(t)})}catch(t){i.a.error("Error calculating fingerprint!",t),e(n.defaultFingerprint)}}.bind(null,r)).catch(function(t){i.a.error("Error loading fingerprint library",t),i.a.debug("Using default fingerprinting value ",n.defaultFingerprint),e(n.defaultFingerprint)})})},E),u=r(15),l=r(11),h=r(8),d=r(17),g=(p.prototype.getIndividualizationData=function(){var a=this;return new Promise(function(i,o){a.fingerprintService.getFingerprint().then(function(t){a.httpService.post(h.b.INDIVIDUALIZATION_ENDPOINT_PATH,{fingerprint:t},{url:new d(l.a.serviceProviderURL,null,!0).origin}).then(function(e){try{for(var t=JSON.parse(e.data),n=0,r=a.REQUIRED_INDIVIDUALIZATION_KEYS;n<r.length;n++)if(!t[r[n]])return void o(s.a.IS2XX(""+s.a.PREFIX_IS+e.status,c.a.MISSING_INDIVIDUALIZATION_KEY_ERROR));i({iid:t[a.INDIVIDUALIZATION_DEVICE_ID_KEY],sfp:e.headers.pass_sfp})}catch(t){o(s.a.IS2XX(""+s.a.PREFIX_IS+e.status,c.a.INVALID_INDIVIDUALIZATION_DATA_ERROR))}},function(t){o(s.a.buildError(""+s.a.PREFIX_IS+t.status))})})})},p);function p(){this.INDIVIDUALIZATION_DEVICE_ID_KEY="deviceId",this.REQUIRED_INDIVIDUALIZATION_KEYS=[this.INDIVIDUALIZATION_DEVICE_ID_KEY],this.fingerprintService=a.getInstance(),this.httpService=u.a.getInstance()}function E(){this.defaultFingerprint=o(navigator.userAgent)}r.d(e,"a",function(){return I});var I=(f.getInstance=function(){return this.instance||(this.instance=new f),this.instance},f.prototype.getDeviceInfo=function(){return{ap_42:navigator.vendor||"anonymous",ap_11:navigator.platform,ap_z:navigator.userAgent}},f.prototype.getDeviceId=function(){var r=this;return new Promise(function(e,n){var t=r.storageManager.getDeviceId();t?e(t):r.individualizationService.getIndividualizationData().then(function(t){r.storageManager.setDeviceId(t.iid),r.storageManager.setSFP(t.sfp),e(t.iid)},function(t){n(t)})})},f);function f(){this.storageManager=n.b.getInstance(),this.individualizationService=new g}},function(t,e,n){"use strict";!function(i){var d=n(28),g=n(27),e=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,p=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],a={hash:1,query:1};function E(t){var e,n=i&&i.location||{},r={},n=typeof(t=t||n);if("blob:"===t.protocol)r=new f(unescape(t.pathname),{});else if("string"==n)for(e in r=new f(t,{}),a)delete r[e];else if("object"==n){for(e in t)e in a||(r[e]=t[e]);void 0===r.slashes&&(r.slashes=o.test(t.href))}return r}function I(t){t=e.exec(t);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function f(t,o,e){if(!(this instanceof f))return new f(t,o,e);var n,r,i,a,s,c=p.slice(),u=typeof o,l=this,h=0;for("object"!=u&&"string"!=u&&(e=o,o=null),e&&"function"!=typeof e&&(e=g.parse),o=E(o),n=!(u=I(t||"")).protocol&&!u.slashes,l.slashes=u.slashes||n&&o.slashes,l.protocol=u.protocol||o.protocol||"",t=u.rest,u.slashes||(c[2]=[/(.*)/,"pathname"]);h<c.length;h++)r=(i=c[h])[0],s=i[1],r!=r?l[s]=t:"string"==typeof r?~(a=t.indexOf(r))&&(t="number"==typeof i[2]?(l[s]=t.slice(0,a),t.slice(a+i[2])):(l[s]=t.slice(a),t.slice(0,a))):(a=r.exec(t))&&(l[s]=a[1],t=t.slice(0,a.index)),l[s]=l[s]||n&&i[3]&&o[s]||"",i[4]&&(l[s]=l[s].toLowerCase());e&&(l.query=e(l.query)),n&&o.slashes&&"/"!==l.pathname.charAt(0)&&(""!==l.pathname||""!==o.pathname)&&(l.pathname=function(t){for(var e=(o.pathname||"/").split("/").slice(0,-1).concat(t.split("/")),n=e.length,t=e[n-1],r=!1,i=0;n--;)"."===e[n]?e.splice(n,1):".."===e[n]?(e.splice(n,1),i++):i&&(0===n&&(r=!0),e.splice(n,1),i--);return r&&e.unshift(""),"."!==t&&".."!==t||e.push(""),e.join("/")}(l.pathname)),d(l.port,l.protocol)||(l.host=l.hostname,l.port=""),l.username=l.password="",l.auth&&(i=l.auth.split(":"),l.username=i[0]||"",l.password=i[1]||""),l.origin=l.protocol&&l.host&&"file:"!==l.protocol?l.protocol+"//"+l.host:"null",l.href=l.toString()}f.prototype={set:function(t,e,n){var r,i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||g.parse)(e)),i[t]=e;break;case"port":i[t]=e,d(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":e?(r="pathname"===t?"/":"#",i[t]=e.charAt(0)!==r?r+e:e):i[t]=e;break;default:i[t]=e}for(var o=0;o<p.length;o++){var a=p[o];a[4]&&(i[a[1]]=i[a[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=g.stringify);var e=this,n=e.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");n+=e.slashes?"//":"";return e.username&&(n+=e.username,e.password&&(n+=":"+e.password),n+="@"),n+=e.host+e.pathname,(t="object"==typeof e.query?t(e.query):e.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),e.hash&&(n+=e.hash),n}},f.extractProtocol=I,f.location=E,f.qs=g,t.exports=f}.call(this,n(25))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var c=n(0),o=n(7),a=n(4),u=n(10),r=(i.prototype.postMessage=function(t){this.target.postMessage(t,this.url.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},i.prototype.postAjax=function(i){var o=this;return new Promise(function(e){try{var t=a.a.extend({},i);t.proxyRequest=!1,t.proxyResponse=!0,delete t.context,delete t.success,delete t.error;var n="c.a.p.pm.xhr."+o.getOpId();o.addEventListener(n,function(t){t.data.id===n&&(c.a.debug("Proxy response event message received: ",t),o.removeEventListener(t.data.id),e(t.data))});var r={id:n,payload:t};c.a.debug("Sending proxy request event message: ",r),o.postMessage(r)}catch(t){c.a.error(t),e({error:t.toString()})}})},i.prototype.postStorage=function(r){for(var i=this,o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];return new Promise(function(e){try{var n="c.a.p.pm.s."+i.getOpId();i.addEventListener(n,function(t){t.data.id===n&&(i.removeEventListener(t.data.id),e(t.data.result))});var t={id:n,operation:r,params:o};i.postMessage(t)}catch(t){c.a.error(t),e()}})},i.prototype.handleAjax=function(){var i=this;this.addEventListener("ajax",function(r){if(r&&r.data&&r.data.id&&0===r.data.id.indexOf("c.a.p.pm.xhr.")){var t=r.data.payload;t.success=t.error=function(t,e,n){n={id:r.data.id,status:e,data:t,xhr:n};c.a.debug("Sending proxy response event message: ",n),i.postMessage(n)};try{c.a.debug("Handling proxy request event message: ",r),new o.a(t).send()}catch(t){c.a.error(t)}}})},i.prototype.handleStorage=function(){var s=this;this.addEventListener("storage",function(t){if(t&&t.data&&t.data.id&&0===t.data.id.indexOf("c.a.p.pm.s.")&&t.data.operation&&t.data.params){var e={id:t.data.id},n=t.data.params;switch(t.data.operation){case"getItems":if(e.result={},s.isLocalStorageSpaceEnabled())for(var r=0,i=n;r<i.length;r++){var o=i[r],a=localStorage.getItem(o);null!==a&&(e.result[o]=a)}else e.result.error=!0,c.a.debug("Web localStorage is not available for 3rd parties for read operations");break;case"setItem":s.isLocalStorageSpaceEnabled()?2===n.length?localStorage.setItem(n[0],n[1]):c.a.error("Did not receive valid data to write!",n):c.a.debug("Web localStorage is not available for 3rd parties for write operations");break;case"isSessionCookieSet":e.result={isSessionCookieSet:u.a.isSessionCookieSet()};break;case"setSessionCookie":u.a.setSessionCookie();break;default:c.a.error("Unsupported storage operation: ",t.data.operation)}s.postMessage(e)}})},i.prototype.addEventListener=function(t,e){this.handlers[t]=e,window.addEventListener("message",e,!1)},i.prototype.removeEventListener=function(t){window.removeEventListener("message",this.handlers[t],!1),delete this.handlers[t]},i.prototype.getOpId=function(){return 1e3<i.opSeq&&(i.opSeq=0),+new Date+"."+i.opSeq++},i.prototype.isLocalStorageSpaceEnabled=function(){try{return localStorage.setItem("canWrite","test"),localStorage.removeItem("canWrite"),!0}catch(t){return!1}},i.opSeq=0,i);function i(t,e){void 0===t&&(t=null),void 0===e&&(e=parent),this.handlers={},this.url=t,this.target=e,this.handlers={}}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return a});var r=n(0),i=(u.CLIENT_CREDENTIALS="client_credentials",u),o=(c.CLIENT_ID="client_id",c.CLIENT_SECRET="client_secret",c.GRANT_TYPES="grant_types",c.REDIRECT_URI="redirect_uris",c.CREATED_AT="client_id_issued_at",c),a=(s.prototype.getClientId=function(){return this.clientId},s.prototype.getClientSecret=function(){return this.clientSecret},s.prototype.isValid=function(){return this&&null!=this.clientId&&null!=this.clientSecret&&null!=this.grantTypes&&null!=this.redirectURI&&null!=this.createdAt},s.prototype.copyFromJSONObject=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},s);function s(t){if(this.clientId=null,this.clientSecret=null,this.grantTypes=null,this.redirectURI=null,this.createdAt=null,t)try{var e=JSON.parse(t);this.clientId=e[o.CLIENT_ID],this.clientSecret=e[o.CLIENT_SECRET],this.grantTypes=e[o.GRANT_TYPES],this.redirectURI=e[o.REDIRECT_URI],this.createdAt=e[o.CREATED_AT]}catch(t){r.a.error("Application registration response data has invalid JSON format!")}}function c(){}function u(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(15),i=n(6),o=n(22),a=n(19),s=n(3),c=n(11),u=n(8),l=n(1),h=n(17),d=(g.getInstance=function(){return this.instance||(this.instance=new g),this.instance},g.prototype.obtainAccessToken=function(){var r=this;return new Promise(function(e,n){var t=r.storageManager.getAccessToken();null!=t?e(t):r.obtainApplicationRegistration().then(function(t){r.retrieveAccessToken(t).then(function(t){e(t)},function(t){n(t)})},function(t){n(t)})})},g.prototype.obtainApplicationRegistration=function(){var r=this;return new Promise(function(e,n){var t=r.storageManager.getApplicationRegistration();null!=t?e(t):r.retrieveApplicationRegistration().then(function(t){e(t)},function(t){n(t)})})},g.prototype.retrieveAccessToken=function(t){var r=this;return new Promise(function(e,n){r.httpService.post(u.b.ACCESS_TOKEN_ENDPOINT_PATH,{grant_type:a.b.CLIENT_CREDENTIALS,client_id:t.getClientId(),client_secret:t.getClientSecret()},{url:new h(c.a.serviceProviderURL,null,!0).origin,dataType:"application/x-www-form-urlencoded"}).then(function(t){t=new o.a(t.data);r.storageManager.setAccessToken(t),e(t)},function(){g.RETRY_RETRIEVING_ACCESS_TOKEN?(g.RETRY_RETRIEVING_ACCESS_TOKEN=!1,r.retrieveApplicationRegistration().then(function(t){r.retrieveAccessToken(t).then(function(t){e(t)},function(t){n(t)})},function(t){n(t)})):n(l.a.R401)})})},g.prototype.retrieveApplicationRegistration=function(){var r=this;return new Promise(function(e,n){r.httpService.post(u.b.CLIENT_REGISTRATION_ENDPOINT_PATH,{software_statement:s.a.getInstance().getSoftwareStatement()},{url:new h(c.a.serviceProviderURL,null,!0).origin,dataType:"json"}).then(function(t){t=new a.a(t.data);r.storageManager.setApplicationRegistration(t),e(t)},function(){g.RETRY_RETRIEVING_APPLICATION_REGISTRATION?(g.RETRY_RETRIEVING_APPLICATION_REGISTRATION=!1,r.retrieveApplicationRegistration().then(function(t){e(t)},function(t){n(t)})):n(l.a.R400)})})},g.RETRY_RETRIEVING_ACCESS_TOKEN=!0,g.RETRY_RETRIEVING_APPLICATION_REGISTRATION=!0,g);function g(){this.httpService=r.a.getInstance(),this.storageManager=i.b.getInstance()}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=(s.ID="id",s.CODE="code",s.REQUESTOR="requestor",s.MVPD="mvpd",s.GENERATED="generated",s.EXPIRES="expires",s.INFO="info",s),o=(a.prototype.getCode=function(){return this.code},a.prototype.isValid=function(){return this&&null!=this.id&&null!=this.code&&null!=this.requestor&&null==this.mvpd&&null!=this.generated&&null!=this.expires&&null!=this.info&&(new Date).getTime()<this.expires},a.prototype.copyFromJSONObject=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},a);function a(t){if(this.id=null,this.code=null,this.requestor=null,this.mvpd=null,this.generated=null,this.expires=null,this.info=null,t)try{var e=JSON.parse(t);this.id=e[i.ID],this.code=e[i.CODE],this.requestor=e[i.REQUESTOR],this.mvpd=e[i.MVPD],this.generated=e[i.GENERATED],this.expires=e[i.EXPIRES],this.info=e[i.INFO]}catch(t){r.a.error("Registration Code response data has invalid JSON format!")}}function s(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=(s.ACCESS_TOKEN="access_token",s.EXPIRES_IN="expires_in",s.TOKEN_TYPE="token_type",s.CREATED_AT="created_at",s),o=(a.prototype.getAccessToken=function(){return this.accessToken},a.prototype.isValid=function(){return this&&null!=this.accessToken&&null!=this.tokenType&&null!=this.createdAt&&null!=this.expiresIn&&(new Date).getTime()<this.createdAt+1e3*this.expiresIn},a.prototype.copyFromJSONObject=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},a);function a(t){if(this.accessToken=null,this.expiresIn=null,this.tokenType=null,this.createdAt=null,t)try{var e=JSON.parse(t);this.accessToken=e[i.ACCESS_TOKEN],this.expiresIn=e[i.EXPIRES_IN],this.tokenType=e[i.TOKEN_TYPE],this.createdAt=e[i.CREATED_AT]}catch(t){r.a.error("Access token response data has invalid JSON format!")}}function s(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=(i.get=function(){var t=this.findScript(document.getElementsByTagName("script"));return(t=(t=!t&&window.$?this.findScript($("script")):t)||this.findUsingStacktraces())&&0<t.length?t:this.DEFAULT_SCRIPT_URL},i.findScript=function(t){for(var e,n=new RegExp("(.*)AccessEnabler.js(.*)"),r=0,i=t;r<i.length;r++){var o=i[r];if(o.src&&o.src.match(n)){e=o.src;break}}return e},i.findUsingStacktraces=function(){function e(t,e){n=e}var n;try{throw new Error}catch(t){return"AccessEnabler.js"in t?n=t["AccessEnabler.js"]:"stacktrace"in t?t.stacktrace.replace(/called from line \d+, column \d+ in (.*):/gm,e):"stack"in t&&t.stack.replace(/at.*?\(?(\S+):\d+:\d+\)?$/g,e),n}},i.DEFAULT_SCRIPT_URL="https://entitlement.auth.adobe.com/entitlement/AccessEnabler.js",i);function i(){}},function(e,l,I){var f;!function(){"use strict";function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function s(t,e,n,r,i,o){return h((o=h(h(e,t),h(r,o)))<<i|o>>>32-i,n)}function d(t,e,n,r,i,o,a){return s(e&n|~e&r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return s(e&r|n&~r,t,e,i,o,a)}function p(t,e,n,r,i,o,a){return s(e^n^r,t,e,i,o,a)}function E(t,e,n,r,i,o,a){return s(n^(e|~r),t,e,i,o,a)}function a(t,e){var n,r,i,o;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var a=1732584193,s=-271733879,c=-1732584194,u=271733878,l=0;l<t.length;l+=16)s=E(s=E(s=E(s=E(s=p(s=p(s=p(s=p(s=g(s=g(s=g(s=g(s=d(s=d(s=d(s=d(r=s,c=d(i=c,u=d(o=u,a=d(n=a,s,c,u,t[l],7,-680876936),s,c,t[l+1],12,-389564586),a,s,t[l+2],17,606105819),u,a,t[l+3],22,-1044525330),c=d(c,u=d(u,a=d(a,s,c,u,t[l+4],7,-176418897),s,c,t[l+5],12,1200080426),a,s,t[l+6],17,-1473231341),u,a,t[l+7],22,-45705983),c=d(c,u=d(u,a=d(a,s,c,u,t[l+8],7,1770035416),s,c,t[l+9],12,-1958414417),a,s,t[l+10],17,-42063),u,a,t[l+11],22,-1990404162),c=d(c,u=d(u,a=d(a,s,c,u,t[l+12],7,1804603682),s,c,t[l+13],12,-40341101),a,s,t[l+14],17,-1502002290),u,a,t[l+15],22,1236535329),c=g(c,u=g(u,a=g(a,s,c,u,t[l+1],5,-165796510),s,c,t[l+6],9,-1069501632),a,s,t[l+11],14,643717713),u,a,t[l],20,-373897302),c=g(c,u=g(u,a=g(a,s,c,u,t[l+5],5,-701558691),s,c,t[l+10],9,38016083),a,s,t[l+15],14,-660478335),u,a,t[l+4],20,-405537848),c=g(c,u=g(u,a=g(a,s,c,u,t[l+9],5,568446438),s,c,t[l+14],9,-1019803690),a,s,t[l+3],14,-187363961),u,a,t[l+8],20,1163531501),c=g(c,u=g(u,a=g(a,s,c,u,t[l+13],5,-1444681467),s,c,t[l+2],9,-51403784),a,s,t[l+7],14,1735328473),u,a,t[l+12],20,-1926607734),c=p(c,u=p(u,a=p(a,s,c,u,t[l+5],4,-378558),s,c,t[l+8],11,-2022574463),a,s,t[l+11],16,1839030562),u,a,t[l+14],23,-35309556),c=p(c,u=p(u,a=p(a,s,c,u,t[l+1],4,-1530992060),s,c,t[l+4],11,1272893353),a,s,t[l+7],16,-155497632),u,a,t[l+10],23,-1094730640),c=p(c,u=p(u,a=p(a,s,c,u,t[l+13],4,681279174),s,c,t[l],11,-358537222),a,s,t[l+3],16,-722521979),u,a,t[l+6],23,76029189),c=p(c,u=p(u,a=p(a,s,c,u,t[l+9],4,-640364487),s,c,t[l+12],11,-421815835),a,s,t[l+15],16,530742520),u,a,t[l+2],23,-995338651),c=E(c,u=E(u,a=E(a,s,c,u,t[l],6,-198630844),s,c,t[l+7],10,1126891415),a,s,t[l+14],15,-1416354905),u,a,t[l+5],21,-57434055),c=E(c,u=E(u,a=E(a,s,c,u,t[l+12],6,1700485571),s,c,t[l+3],10,-1894986606),a,s,t[l+10],15,-1051523),u,a,t[l+1],21,-2054922799),c=E(c,u=E(u,a=E(a,s,c,u,t[l+8],6,1873313359),s,c,t[l+15],10,-30611744),a,s,t[l+6],15,-1560198380),u,a,t[l+13],21,1309151649),c=E(c,u=E(u,a=E(a,s,c,u,t[l+4],6,-145523070),s,c,t[l+11],10,-1120210379),a,s,t[l+2],15,718787259),u,a,t[l+9],21,-343485551),a=h(a,n),s=h(s,r),c=h(c,i),u=h(u,o);return[a,s,c,u]}function c(t){for(var e="",n=32*t.length,r=0;r<n;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}function u(t){var e=[];for(e[(t.length>>2)-1]=void 0,r=0;r<e.length;r+=1)e[r]=0;for(var n=8*t.length,r=0;r<n;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}function r(t){for(var e,n="",r=0;r<t.length;r+=1)e=t.charCodeAt(r),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n}function n(t){return unescape(encodeURIComponent(t))}function i(t){return c(a(u(t=n(t)),8*t.length))}function o(t,e){return function(t,e){var n,r=u(t),i=[],o=[];for(i[15]=o[15]=void 0,16<r.length&&(r=a(r,8*t.length)),n=0;n<16;n+=1)i[n]=909522486^r[n],o[n]=1549556828^r[n];return e=a(i.concat(u(e)),512+8*e.length),c(a(o.concat(e),640))}(n(t),n(e))}function t(t,e,n){return e?n?o(e,t):r(o(e,t)):n?i(t):r(i(t))}void 0===(f=function(){return t}.call(l,I,l,e))||(e.exports=f)}()},function(t,e){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t,e,n){if(t.forEach)t.forEach(e,n);else for(var r=0;r<t.length;r+=1)e.call(n,t[r],r,t)}},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty;function o(t){return decodeURIComponent(t.replace(/\+/g," "))}e.stringify=function(t,e){var n,r=[];for(n in"string"!=typeof(e=e||"")&&(e="?"),t)i.call(t,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return r.length?e+r.join("&"):""},e.parse=function(t){for(var e=/([^=?&]+)=?([^&]*)/g,n={};i=e.exec(t);){var r=o(i[1]),i=o(i[2]);r in n||(n[r]=i)}return n}},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"AccessEnabler",function(){return s});var n=r(3),i=r(23),o=r(0),a=r(17),s=(c.prototype.loadAccessEnablerHelper=function(t){var e,r=n.a.getInstance(t),i=this;for(e in r._api_methods)!function(n){r._api_methods.hasOwnProperty(n)&&(i[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r[n].apply(r,t)})}(e);this.version="4.2.1-fbe07ba"},c);function c(t){var e=this;o.a.setPrefix("AccessEnabler.js");var n=new a(i.a.get(),null,!0);r.p=n.protocol+"//"+n.host+n.pathname.replace("AccessEnabler.js",""),"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?this.loadAccessEnablerHelper(t):(o.a.warn("Non standards compliant browser! Loading polyfills."),(n=document.createElement("script")).src=r.p+"/polyfill.js",n.onload=function(){e.loadAccessEnablerHelper(t)},n.onerror=function(){o.a.error("Failed to load polyfills!"),e.loadAccessEnablerHelper(t)},document.head.appendChild(n))}}]);
