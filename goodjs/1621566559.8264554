_borschik("CdfAb")&&(window.MOUSE_TRACKING=function(){var t=$(window),e=$(document),n=$.extend({ATTENTION_MIN_DURATION:1e3,ATTENTION_MAX_INTERRUPT:6e4,VIEWPORT_CHANGE_TIMEOUT:500,REQID_CHECK_INTERVAL:1e3,ALIVE_PACKET_ENABLED:!0,ALIVE_PACKET_INTERVAL:3e3,SENDER_MAX_REQUEST_COUNT:60,SENDER_MAX_PACKET_SIZE:1e3,SENDER_REQUEST_INTERVAL:1e4,SENDER_REQUEST_CACHE_TIMEOUT:3e4,COORDINATES_SCALE:1,MOUSEMOVE_LOG:1},window.MOUSE_TRACKING_SETTINGS||{});function i(t){return function(){try{return t.apply(this,arguments)}catch(e){e.message="Mouse tracking: "+e.message,window.logSerpJsError(e)}}}function r(t,e){return window.setTimeout(i(t),e)}function s(t,e){return window.setInterval(i(t),e)}t.one("load",i((function(){function o(){return(new Date).getTime()}var u=o();function a(){return Math.round((o()-u)/50)}function h(t,e){t.push(255&e)}function c(t,e){for(e=Math.max(0,0|e);e>127;)t.push(127&e|128),e>>=7;t.push(e)}function d(t,e){if(e){for(var n=!1,i=0,r=e.length;i<r;i++){var s=e.charCodeAt(i);s<128?t.push(s):n=!0}if(n){var o=new Error("Mouse tracking: baobabId must be US-ASCII");o.additional={baobabId:e},window.logSerpJsError(o)}t.push(0)}else window.logSerpJsError("Mouse tracking: empty baobabId in encodeASCIIString")}function l(t){try{return window.BEM&&BEM.blocks["i-global"].param(t)}catch(e){return""}}function E(t){return Math.floor(t*n.COORDINATES_SCALE)}function _(t){var e=[];return h(e,t),c(e,a()),e}var f={attention:function(t,e,n){var i=[];return h(i,110),c(i,t),c(i,e),d(i,n),i},serpItem:function(t,e,n){var i=[],r=(t=$(t)).offset();return d(i,e),c(i,n),c(i,E(r.left)),c(i,E(r.top)),c(i,E(t.outerWidth())),c(i,E(t.outerHeight())),i},serpItems:function(t,e,n){var i=[];h(i,108),c(i,a()),c(i,t),c(i,e),c(i,n.length);for(var r=0,s=n.length;r<s;r++){var o=n[r][1];if(o)$.merge(i,f.serpItem(n[r][0],o,n[r][2]));else{var u=n[r][0];window.logSerpJsError("Mouse tracking: element with empty blockId {cid:"+u.getAttribute("data-cid")+", log-node:"+u.getAttribute("data-log-node")+"}")}}return i},viewport:function(t){var e=[];return h(e,103),c(e,a()),c(e,E(t[0])),c(e,E(t[1])),c(e,E(t[2])),c(e,E(t[3])),e},mouseClick:function(t,e,n,i){var r=[];return h(r,109),c(r,a()),c(r,E(t)),c(r,E(e)),d(r,n),c(r,i),r},alive:function(){return _(105)},windowFocus:function(){return _(107)},windowBlur:function(){return _(106)}},g=function(t){$.extend(this,t||{}),this._active=!0,this._timeLast=this.timeStart,this.mouseMove(this.serpItem,this.timeStart)};g.prototype={grabberDom:null,sender:null,serpItem:null,timeStart:0,mouseMove:function(t,e){return this.serpItem&&t===this.serpItem&&50*(e-this._timeLast)<n.ATTENTION_MAX_INTERRUPT?(this._timeLast=e,!0):(this.close(),!1)},close:function(){if(this._active&&(this._active=!1,void 0!==this._timeLast&&void 0!==this.timeStart&&this.serpItem&&this.sender)){var t=this._timeLast-this.timeStart;if(50*t>n.ATTENTION_MIN_DURATION){var e=this.serpItem.getAttribute("data-log-node");e&&this.sender.enqueue(f.attention,[this.timeStart,t,e])}}}};var p=function(t){this.sender=t,this._pageTimestamp=o(),this.updateDom(),s(this.updateDom.bind(this),n.REQID_CHECK_INTERVAL)};p.prototype={reqid:"",updateDom:$.throttle((function(){var t=l("reqid");this.reqid!==t&&(this.reqid=t,this._grabDOM(),this.grabViewport())})),_grabDOM:function(){this.elements=this._getElements();var t=this.elements.toArray().map((function(t){return[t,t.getAttribute("data-log-node"),0]}),this);t.length>0&&this.sender.enqueue(f.serpItems,[50,this._pageTimestamp,t])},_getElements:function(){return $(".serp-list .distr-default-search, .serp-item[data-log-node], .misspell")},grabViewport:$.throttle((function(){var e=[t.scrollLeft(),t.scrollTop(),t.width(),t.height()];this.sender.enqueue(f.viewport,[e])}),10)};var m=function(){this._ls=null;try{this._ls=localStorage}catch(t){}};m.prototype={set:function(t,e){if(this.isEnabled())try{!e||$.isArray(e)&&!e.length?this.remove(t):this._ls.setItem(this._getLsKey(t),JSON.stringify(e))}catch(n){}},get:function(t){if(this.isEnabled())try{return JSON.parse(this._ls.getItem(this._getLsKey(t)))}catch(e){}return null},remove:function(t){if(this.isEnabled())try{this._ls.removeItem(this._getLsKey(t))}catch(e){}},isEnabled:function(){return this._ls&&"object"==typeof this._ls&&"object"==typeof JSON},_getLsKey:function(t){return"_mt__"+t}};var T={abc:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%-_",encode:function(t){for(var e,n=T.abc,i=t.length,r=[],s=i-i%3,o=0;o<s;o+=3)e=(t[o]<<16)+(t[o+1]<<8)+t[o+2],r.push(n[e>>18&63],n[e>>12&63],n[e>>6&63],n[63&e]);switch(i-s){case 1:e=t[s]<<4,r.push(n[e>>6&63],n[63&e],n[64],n[64]);break;case 2:e=(t[s]<<10)+(t[s+1]<<2),r.push(n[e>>12&63],n[e>>6&63],n[63&e],n[64])}return r.join("")}},S=function(t){$.extend(this,t||{}),this._started=!1,this._countRequestSent=this.countRequestSentInit||0,this._packetQueue=this.packetQueueInit||[]};S.prototype={requestsTimeout:n.SENDER_REQUEST_INTERVAL,reqid:"",countRequestSentInit:0,packetQueueInit:null,enqueue:function(t,e){if(this.reqid&&this.hasQuota()&&this._packetQueue.length<n.SENDER_MAX_PACKET_SIZE){var i=t.apply(this,e);if(i)return this._packetQueue.push.apply(this._packetQueue,i),this._dumpToStorage(),this.start(),!0}return!1},flush:function(){if(this.reqid){var t=this._packetQueue.splice(0,n.SENDER_MAX_PACKET_SIZE),e=T.encode(t);window.b(null,{nodeId:Ya.SerpContext.clckId,event:"tech",type:"mousetracking",data:{no:this._countRequestSent+1,blob:e},logHref:l("retpath")}),this._dumpToStorage(),this._countRequestSent++}},start:function(){if(!this._started){this._started=!0;var t=this;r((function(){t.flush(),t._started=!1,t.hasQuota()&&t._packetQueue.length>0&&t.start()}),this.requestsTimeout)}},hasQuota:function(){return this._countRequestSent<n.SENDER_MAX_REQUEST_COUNT},_dumpToStorage:$.throttle((function(){if(this.storage&&this.storage.isEnabled()){var t=this.storage.get("data")||{};if(this._packetQueue.length>0){var e=this._packetQueue.slice(0,n.SENDER_MAX_PACKET_SIZE);t[this.reqid]=[e,o(),this._countRequestSent]}else delete t[this.reqid];this.storage.set("data",t)}}),10)};var b=function(){this._senders={},this.storage=new m,this.sendAllFromStorage(),r(this.sendAllFromStorage.bind(this),n.SENDER_REQUEST_CACHE_TIMEOUT)};b.prototype={enqueue:function(t,e){var n=l("reqid");return!!n&&("object"!=typeof this._senders[n]&&(this._senders[n]=new S({reqid:n,storage:this.storage})),this._senders[n].enqueue(t,e))},sendAllFromStorage:function(){if(this.storage&&this.storage.isEnabled()){var t=this.storage.get("data")||{},e={};this.storage.set("data",{}),$.each(t,(function(t,i){if($.isArray(i)){var r=i[0],s=i[1],u=i[2],a=o()-s;if(!(a<0||u<0||u>=n.SENDER_MAX_REQUEST_COUNT||!$.isArray(r)||r.length<1))if(a>n.SENDER_REQUEST_CACHE_TIMEOUT)new S({reqid:t,requestsTimeout:0,countRequestSentInit:u,packetQueueInit:r}).flush();else i[0]=r.slice(0,n.SENDER_MAX_PACKET_SIZE),e[t]=i}})),this.storage.set("data",e)}}};var I=function(){this.grabberAttention=null,this.sender=new b,this.grabberDom=new p(this.sender),n.ALIVE_PACKET_ENABLED&&s(function(){this.sender.enqueue(f.alive)}.bind(this),n.ALIVE_PACKET_INTERVAL)};I.prototype={onMouseMove:function(t){var e=$(t).closest(this.grabberDom.elements).first(),n=a();e&&e.length>0?this.grabberAttention&&this.grabberAttention.mouseMove(e[0],n)||(this.grabberAttention=new g({serpItem:e[0],timeStart:n,sender:this.sender,grabberDom:this.grabberDom})):(this.grabberAttention&&this.grabberAttention.close(),this.grabberAttention=null)},onMouseClick:function(t,e,n,i){var r=$(t).closest(this.grabberDom.elements).first(),s=Ya.SerpContext.clckId;r.length>0&&(s=r.attr("data-log-node")),this.sender.enqueue(f.mouseClick,[e,n,s,i])},onWindowFocus:function(){this.sender.enqueue(f.windowFocus)},onWindowBlur:function(){this.sender.enqueue(f.windowBlur)}};var A=new I;n.MOUSEMOVE_LOG&&e.on("mousemove",$.throttle(i((function(t){A.onMouseMove(t.target)})),10)),e.on("click",i((function(t){A.onMouseClick(t.target,t.pageX,t.pageY,t.which)}))),t.on("scroll resize",$.debounce(i((function(){A.grabberDom.grabViewport()})),n.VIEWPORT_CHANGE_TIMEOUT)).on("focus",i((function(){A.onWindowFocus()}))).on("blur",i((function(){A.onWindowBlur()})))})))},window.$&&$.throttle&&window.BEM&&window.w?MOUSE_TRACKING():window.Ya&&Ya.define?Ya.define("mouse-tracking",["jquery","BEM"],MOUSE_TRACKING):function(){if(window.logSerpJsError){var t=new Error("Mouse tracking requires global $ and BEM, or Ya.define");t.additional={scripts:function(){var t,e=[],n=document.getElementsByTagName("script");for(t=0;t<n.length;t++){var i=n[t],r=i.src,s=i.id,o={};r&&(o.src=r),s&&(o.id=s),e.push(o)}return e}()},logSerpJsError(t)}}());