!function n(o,a,i){function s(t,e){if(!a[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=a[t]={exports:{}},o[t][0].call(r.exports,function(e){return s(o[t][1][e]||e)},r,r.exports,n,o,a,i)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({1:[function(e,t,r){function f(e,t){var r,n,o;if("error"!==t.t||!(r=e.$a1[0])||"error"!==r.t||t.msg!==r.msg)return"behavior"===t.t?0<(n=e.$a1&&e.$a1.length)&&"behavior"===e.$a1[n-1].t?(o=t.behavior||[],e.$a1[n-1].behavior.concat(o)):e.$a1.push(t):e.$a1.unshift(t),e.$a2(function(){e.$a3=l.delay(function(){e.$a4()},e.$a1[0]&&"error"===e.$a1[0].t?3e3:-1)}),!0;r.times++}function n(e){return this.ver="1.8.30",this._conf=l.ext({},n.dftCon),this.$a5={},this.$a1=[],this.$a6=[],this.sdkFlag=!0,this.hash=l.seq(),this.$a7(),this.setConfig(e),this.rip=l.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this}var l=e("./util"),o=e("./common/sendBeacon");n.dftCon={sample:1,pvSample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[/^Script error\.?$/],ignoreResErrors:[]},release:void 0,environment:"prod"},n.prototype={constructor:n,$a2:function(e){return e()},$a8:function(){var e=this._conf.page;return l.$a9(e,[],e+"")},setPage:function(){},setConfig:function(e){e&&"object"==typeof e&&(l.$aa(e),e=this.$ab(e),this._conf=l.ext({},this._conf,e))},$ab:function(e){var t=e.region,r=e.imgUrl;if(t){t=l.regionMap[t];return e.imgUrl=t||l.defaultImgUrl,e}return r&&(e.imgUrl=r),e},$ac:function(e){if(this.getConfig("debug"))return!0;var t,r=l.regionMap,n=!1;for(t in r)if(r[t]===e){n=!0;break}return n||l.warn("[retcode] invalid url: "+e),n},$ad:function(){},$ae:function(e){o(e,this.getConfig("imgUrl"))},$af:function(){},$ag:function(){return{}},setCommonInfo:function(e){e&&"object"==typeof e&&(this._common=l.ext({},this._common,e))},$a7:function(){this.pageview=l.uu(),this.sBegin=Date.now()},$ah:function(){if(this.username)return this.username;var e=this._conf,e=e&&e.setUsername;if("function"==typeof e)try{var t=e();"string"==typeof t&&(t=t.substr(0,40),this.username=t)}catch(e){l.warn("[arms] setUsername fail",e)}return this.username},getTraceId:function(){var e=this.rip,t=Date.now(),r=l.getSortNum(this.record),t=e+t+r+l.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=t,this.record=r,{"EagleEye-TraceID":t}},getUberTraceId:function(e){var t=this.rip,r=Date.now(),n=l.getSortNum(this.record),o=l.getRandNum(this._conf.pid),n=t+r+n+l.getNum(2)+o,o=n.substring(0,16);return{"uber-trace-id":n+":"+o+":0:"+(e=e?"1":"0"),traceId:n}},getPageviewId:function(){return{"EagleEye-SessionID":this.pageview}},getConfig:function(e){return e?this._conf[e]:l.ext({},this._conf)},$ai:function(e){return 1===e||("boolean"==typeof this.$a5[e]||(this.$a5[e]=l.pick(e)),this.$a5[e])},$a4:function(e){var t;clearTimeout(this.$a3),this.$a3=null;for(var r=this._conf&&"function"==typeof this._conf.sendRequest;t=this.$a1.pop();)"res"===t.t?this.$af(t,"res"):"error"===t.t?this.$af(t,"err"):"api"===t.t?this.$af(t,"apiSnapshot"):"behavior"===t.t?this.$af(t,"behavior"):"health"===t.t&&!r&&window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?this.$ae(t):this.$ad(t);return e&&this.$aj(),this},$aj:function(){var e;for(clearTimeout(this.$ak),this.$ak=null;e=this.$a6.pop();)this.$af(e,"err");return this},_lg:function(e,t,r,n){var o=this._conf,a=this.$a8(),i=o.ignore||{},s=i.ignoreErrors,c=i.ignoreResErrors,u=i.ignoreUrls,i=i.ignoreApis;if(this._isRobot)return this;if(l.$al(a,u)||l.$al(l.decode(a),u))return this;if("error"===e&&(l.$al(t.msg,s)||l.$al(l.decode(t.msg),s)))return this;if("resourceError"===e&&(l.$al(t.src,c)||l.$al(l.decode(t.src),c)))return this;if("api"===e&&(l.$al(t.api,i)||l.$al(l.decode(t.api),i)))return this;if(!this.$ac(o.imgUrl))return this;if(!t||o.disabled||!o.pid)return this;if(0===n)return this;i=t.dl;return delete t.dl,t=l.ext({t:e,times:1,page:a,tag:o.tag||"",release:o.release||"",environment:o.environment,begin:Date.now(),c1:o.c1,c2:o.c2,c3:o.c3},t,this.$ag(),this._common,{pid:o.pid,_v:this.ver,pv_id:this.pageview,username:this.$ah(),sampling:r||1,dl:i,z:l.seq()}),1!==n&&r&&!this.$ai(r)?this:f(this,t)},_self:function(e,t,r){var n=this,o=n._conf;if("error"!==e)return n;if(!n.$ac(o.imgUrl))return n;if(!t||o.disabled||!o.pid)return n;if(r&&!n.$ai(r))return n;t=l.ext({t:e,times:1,page:l.selfErrPage,tag:o.pid,begin:Date.now()},t,{pid:"aokcdqn3ly@e629dabd48a9933",_v:n.ver,sampling:r||1,z:l.seq()});r=n.$a6[0];if(r){r.times++;try{r.err&&t.err&&r.err.msg_raw&&t.err.msg_raw&&r.err.msg_raw.split("&").indexOf(t.err.msg_raw)<0&&r.err.msg_raw.length<1e3&&(r.err.msg_raw+="&"+t.err.msg_raw)}catch(e){}}else n.$a6.unshift(t),n.$a2(function(){n.sdkFlag&&(n.sdkFlag=!1,n.$ak=l.delay(function(){n.$aj()},1e4))})},custom:function(e,t){if(!e||"object"!=typeof e)return this;var r=!1,n={begin:Date.now()};return l.each(e,function(e,t){return(r=t&&t.length<=20)||l.warn("[retcode] invalid key: "+t),n["x-"+t]=e,r}),r?this._lg("custom",n,t||1):this}},t.exports=n},{"./common/sendBeacon":12,"./util":16}],2:[function(e,t,r){var g=e("../util");t.exports=function(e,s){function i(e,t,r){var n;null!==e&&(n=e[t],e[t]=r(n))}function c(n,o){return function(e){if(e&&e!==p){var t,r;p=e;try{t=e.target}catch(e){t="<unknown>"}0!==t.length&&(r={type:"ui.".concat(n),data:{message:function(e){if(!e||1!==e.nodeType)return"";for(var t=e||null,r=[],n=0,o=0,a=" > ".length,i="";t&&n++<5&&!("html"===(i=function(e){var t,r,n,o,a=[];if(!e||"string"!=typeof e.tagName)return"";if(a.push(e.tagName.toLowerCase()),"string"==typeof e.id&&a.push("#".concat(e.id)),"string"==typeof(t=e.className))for(r=t.split(/\s+/),s=0;s<r.length;s++)a.push(".".concat(r[s]));for(var i=["type","name","title","alt","data-arms-attr"],s=0;s<i.length;s++)"string"==typeof(o=e.getAttribute(n=i[s]))&&a.push("[".concat(n,'="').concat(o,'"]'));return a.join("")}(t))||1<n&&80<=o+r.length*a+i.length);)r.push(i),o+=i.length,t=t.parentNode;return r.reverse().join(" > ")}(t)},timestamp:Date.now()},"click"===n?(a&&clearTimeout(a),o?a=setTimeout(function(){u&&u.addBehavior(r)},0):u&&u.addBehavior(r)):"keypress"===n&&(l||u&&u.addBehavior(r),clearTimeout(l),l=setTimeout(function(){l=void 0},100)))}}}var n=[],u=null,f=s&&s.location&&s.location.href,a=0,l=void 0,p=null;g.ext(e.prototype,{addBehavior:function(e){if(this.getConfig("behavior")&&e&&"object"==typeof e){var t={},r=e.data||{};if(e.type)t=r;else{if("string"!=typeof r.name||"string"!=typeof r.message)return;t.name=r.name.substr(0,20),t.message=r.message.substr(0,200)}t.message&&(t.message=g.encode(t.message));e={type:e.type||"custom",data:t||{},timestamp:e.timestamp||Date.now(),page:e.page||s&&s.location&&s.location.pathname};return n.push(e),n=n.slice(-100)}},getBehavior:function(){return n||[]},setBehavior:function(e){return n=e?e:n},reportBehavior:function(e){var t=this;t.getConfig("behavior")&&(t.$am&&(clearTimeout(t.$am),t.$am=void 0),t.$am=setTimeout(function(){n&&0<n.length&&(t.behavior(n),n=[],t.$am=void 0,e&&"function"==typeof e&&e())},0))},$an:function(){if(!this.hasInitBehavior&&!u){try{document&&document.referrer&&document.location&&(r=document.referrer,n=document.location.href,""!==r&&(f=n,u&&u.addBehavior({type:"navigation",data:{from:r,to:n}}))),s&&s.document&&s.document.addEventListener&&(s.document.addEventListener("click",c("click"),!1),s.document.addEventListener("keypress",c("keypress"),!1)),e=s&&s.chrome,t=e&&e.app&&e.app.runtime,e="history"in s&&!!s.history.pushState&&!!s.history.replaceState,!t&&e&&(a=function(e,t){u&&u.addBehavior({type:"navigation",data:{from:e,to:t}}),f=t},o=s.onpopstate,s.onpopstate=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=s.location.href;if(a(f,n),o)return o.apply(this,t)},e=function(o){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=2<t.length?t[2]:void 0;return n&&a(f,String(n)),o.apply(this,t)}},i(s.history,"pushState",e),i(s.history,"replaceState",e)),this.getConfig("enableConsole")&&function(){if(s&&s.console)for(var e=["debug","info","warn","log","error","assert"],t=0;t<e.length;t++){var r=e[t];s.console[r]&&"function"==typeof s.console[r]&&i(s.console,r,function(a){var i=r;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(u&&u.addBehavior({type:"console",data:{level:i,message:t}}),"error"===i)for(var n=0;n<t.length;n++){var o=t[n];o&&o.message&&o.stack&&u&&u.errorHandler(new ErrorEvent("error",{error:o,message:o.message}))}a&&Function.prototype.apply.call(a,s.console,t)}})}}()}catch(e){g.warn("[arms] error in initBehavior",e)}(u=this).hasInitBehavior=!0}var a,o,e,t,r,n;return this}})}},{"../util":16}],3:[function(e,t,r){function n(e){var r=this;return a.call(r,e),r._initialPage=e.page&&o.$a9(e.page,[],e.page+"")||null,r._isRobot=o.isRobot(),r._health={errcount:0,apisucc:0,apifail:0},!(r.$ao=function(e,t){"error"===e?r._health.errcount++:"api"===e&&r._health[t.success?"apisucc":"apifail"]++})!==e.enableInstanceAutoSend&&(r.$ap(),r.$aq(),r.$ar(1e4),r._conf&&r._conf.behavior&&"function"==typeof r.$an&&r.$an()),Object.defineProperty&&c.addEventListener&&Object.defineProperty(r,"pipe",{set:r.$as}),r}var o=e("../util"),a=e("../reporter"),i=e("../common/sender"),s=e("../common/post"),c=o.win,u=c.document,f=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/;n.prototype=o.$at(a.prototype),o.ext(a._root.dftCon,{uid:null,setUsername:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],apiHelper:{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",disableHook:!1,autoSendPv:!0,autoSendPerf:!0,enableSPA:!1,enableLinkTrace:!1,linkType:"arms",enableApiCors:!1,sendResource:!0,behavior:!0,enableConsole:!1,parseHash:function(e){return(e?o.$av(e.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(e){if(!e||"object"!=typeof e)return{};var t=e.code,e=e.msg||e.message||e.subMsg||e.errorMsg||e.ret||e.errorResponse||"";return"object"==typeof e&&(t=t||e.code,e=e.msg||e.message||e.info||e.ret||JSON.stringify(e)),{msg:e,code:t,success:!0}}}),o.ext(n.prototype,{constructor:n,_super:a,$a2:function(e){var t=this;if(t.hasReady)return e();"complete"===u.readyState?(t.hasReady=!0,e()):o.on(c,"load",function(){t.hasReady=!0,e()},!0)},$a8:function(e){var t=this._conf,r=t.page,n=location,n=n.host+n.pathname;return r&&!e?o.$a9(r,[],r+""):this._initialPage||o.$au(t.ignoreUrlCase?n.toLowerCase():n,t.ignoreUrlPath||t.urlHelper)},setPage:function(e,t){var r=this,n=r.$aw;if(!1!==t){if(!e||e===n)return r;r.$aw=e,clearTimeout(r.$ax),r.$ay(1),r.$a7(),r.$ax=setTimeout(function(){r.$az()},10)}else r.$aw=e;return r._conf.page=e,r},setConfig:function(e,t){var r;e&&"object"==typeof e&&(o.$aa(e),e=this.$ab(e),r=this._conf,this._conf=o.ext({},r,e),t||((t="disableHook")in e&&r[t]!==e[t]&&(e[t]?this.removeHook():this.addHook()),(t="enableSPA")in e&&r[t]!==e[t]&&this.$b0(e[t])))},$ad:function(e){i(e,this.getConfig("imgUrl"))},$af:function(e,t){var r={};r[t]=e[t],delete e[t];t="";"object"==typeof e&&(t=o.serialize(e)),s(r,this.getConfig("imgUrl")+t+"&post_res=")},$as:function(e){var t=this;if(!e||!e.length)return t;try{if("Array"===o.T(e[0]))return o.each(e,function(e){return t.$as(e)});if("Array"!==o.T(e))return t;var r=e.shift();if(!f.test(r))return t;t[r].apply(t,e)}catch(e){return o.warn("[retcode] error in sendPipe",e),t}},$b1:function(){var e=o.ext({},this._health);e.healthy=0<e.errcount?0:1,e.begin=Date.now();var t=e.begin-this.sBegin;e.stay=t,this._lg("health",e,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(e){e=o.ext({pid:this._conf.pid},e);var t=this.__proto__.constructor(e);return e.page&&t.$az(),t}}),e("./behavior")(n,c),e("./handler")(n,c,u),e("./fmp")(n,c,u),e("./hook")(n,c),e("./hack")(n,c),n._super=a,n._root=a._root,a.Browser=n,t.exports=n},{"../common/post":10,"../common/sender":13,"../reporter":15,"../util":16,"./behavior":2,"./fmp":4,"./hack":5,"./handler":6,"./hook":7}],4:[function(e,t,r){var f=e("../util");t.exports=function(e,r,o){var c=r.innerHeight||0,i=[],s=null,u=0;f.ext(e.prototype,{$ar:function(e){var n=this;if(!n._conf||!n._conf.useFmp)return null;if(!r.MutationObserver)return f.warn("[retcode] first meaningful paint can not be retrieved"),n.$b2(),null;f.on(r,"beforeunload",function(){n.$b3(0,!0)});var t=r.MutationObserver;return(s=new t(function(){var e,t,r;e=n._startTime,t=Date.now()-e,(r=o.querySelector("body"))?(e=0,e+=function e(t,r,n){var o=0,a=t.tagName;if("SCRIPT"!==a&&"STYLE"!==a&&"META"!==a&&"HEAD"!==a){if(0<(a=t.children?t.children.length:0))for(var i=t.children,s=a-1;0<=s;s--)o+=e(i[s],r+1,0<o);if(o<=0&&!n&&!(t.getBoundingClientRect&&t.getBoundingClientRect().top<c))return 0;o+=1+.5*r}return o}(r,1,!1),i.push({score:e,t:t})):i.push({score:0,t:t})})).observe(document,{childList:!0,subtree:!0}),u=1,n.$a2(function(){n.$b3(e)}),s},$b3:function(e,t){var r=this;if(s&&u)if(r.$b4&&(clearTimeout(r.$b4),r.$b4=null),t||!function(e,t){e=Date.now()-e;return!(t<e||1e3<e-(i&&i.length&&i[i.length-1].t||0))}(r._startTime,e)){s.disconnect(),u=0,i=function e(t){for(var r=1;r<t.length;r++)if(t[r].score<t[r-1].score)return t.splice(r,1),e(t);return t}(i);for(var n,o=null,a=1;a<i.length;a++)i[a].t>=i[a-1].t&&(n=i[a].score-i[a-1].score,(!o||o.rate<=n)&&(o={t:i[a].t,rate:n}));o&&0<o.t&&o.t<36e5?r.$b2({fmp:o.t}):r.$b2()}else r.$b4=f.delay(function(){r.$b3(e)},500)}})}},{"../util":16}],5:[function(r,e,t){e.exports=function(e,n){function g(e,t){var r;n.CustomEvent?r=new CustomEvent(e,{detail:t}):((r=o.createEvent("HTMLEvents")).initEvent(e,!1,!0),r.detail=t),n.dispatchEvent(r)}function t(l){var p=d[l];"function"==typeof p&&(d[l]=function(e,t,r){var n=1===arguments.length?[e]:Array.apply(null,arguments),o=location.href,n=p.apply(d,n);if(!r||"string"!=typeof r)return n;if(r===o)return n;try{var a=o.split("#"),i=r.split("#"),s=h.$av(a[0]),c=h.$av(i[0]),u=a[1]&&a[1].replace(/^\/?(.*)/,"$1"),f=i[1]&&i[1].replace(/^\/?(.*)/,"$1");s!==c?g("historystatechange",c):u!==f&&g("historystatechange",f)}catch(e){h.warn("[retcode] error in "+l+": "+e)}return n},d[l].toString=h.$b5(l))}var h=r("../util"),d=n.history||{},o=n.document;h.ext(e.prototype,{$b6:function(){return this.$b7||(t("pushState"),t("replaceState"),this.$b7=!0),this}})}},{"../util":16}],6:[function(d,e,t){e.exports=function(e,n,s){function t(e,t,r,n,o){if(void 0===t){var a,i;if(!h[e]){a=new RegExp(e+"=([^;]+)");try{i=a.exec(s.cookie)}catch(e){return c.warn("[retcode] can not get cookie:",e),null}i&&(h[e]=i[1])}return h[e]}t=e+"="+t,n&&(t+="; domain="+n),t+="; path="+(o||"/"),r&&(t+="; max-age="+r);try{return s.cookie=t,!!s.cookie}catch(e){return c.warn("[retcode] can not set cookie: ",e),!1}}function o(e){return(e=e._conf.uid||t("_nk_")||t("_bl_uid"))||(e=c.uu(),t("_bl_uid",e,15552e3))?e:null}var c=d("../util"),a=d("../common/res"),i=d("../common/perf"),r=null,u=s.documentElement,f=n.innerWidth||u.clientWidth||s.body.clientWidth,l=n.innerHeight||u.clientHeight||s.body.clientHeight,p=n.navigator.connection,g={sr:screen.width+"x"+screen.height,vp:f+"x"+l,ct:p?p.effectiveType||p.type:""},h={};return c.ext(e.prototype,{activeErrHandler:function(e){return r&&!e||(r=this),this},errorHandler:function(e){if(!e)return this;var t,r=e.type;"error"===r?!(t=e.target||e.srcElement)||!t.tagName||e.message||e.filename||e.lineno||e.colno?this.error(e.error||{message:e.message},e):this.$b8(e):"unhandledrejection"===r&&c.T(e.reason,"Error")&&c.$b9(e.reason)&&this.error(e.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch(e){}return this},$b8:function(e){var t=this,e=e.target||e.srcElement;try{var r=t.$ba(e),n="string"==typeof e.tagName?e.tagName.toLowerCase():"",o=t.$bb(e,5);return t._lg("resourceError",{src:r&&r.substring(0,1e3),node_name:n,xpath:o}),t}catch(e){return c.warn("[ARMS] $b8 error :",e),t}},$ba:function(e){var t,r,n=e.src||e.href;try{n||(t="object"===("string"==typeof e.tagName?e.tagName.toLowerCase():""),r=e.getAttribute("classid")&&"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"===e.getAttribute("classid").toLowerCase()||"application/x-shockwave-flash"===e.getAttribute("type"),n=(n=t&&r?e.getAttribute("data")||e.getAttribute("codebase"):n)||e.outerHTML||e.innerHTML)}catch(e){n=""}return n},$bb:function(e,t){var r=e.id?"#"+e.id:"",n="string"==typeof e.className?"."+e.className.split(" ").join("."):"",n=("string"==typeof e.tagName?e.tagName.toLowerCase():"")+r+n;return e.parentNode&&e.parentNode.tagName&&t-1!=0?this.$bb(e.parentNode,t-1)+" > "+n:n},$b2:function(t){var r=this;r.$a2(function(){var e=i();e&&e.load&&0<e.load&&(e.page=r.$a8(!0),(e=t?c.ext(e,t):e).autoSend=!0,r.performance(e))})},$bc:function(t){var r=this;r.$a2(function(){var e=a();e&&e.load&&0<e.load&&(e.load&&e.load<=2e3||e.load&&e.load<=8e3&&.05<Math.random()||(e.page=r.$a8(!0),e.dl=location.href,t&&(e=c.ext(e,t)),r._lg("res",e,r.getConfig("sample"))))})},$az:function(){var r=this;r.$a2(function(){var e,t,t=(e=o(r),t=n.devicePixelRatio||1,{uid:e,dt:s.title,dl:location.href,dr:s.referrer,dpr:t.toFixed(2),de:(s.characterSet||s.defaultCharset||"").toLowerCase(),ul:u.lang,begin:Date.now()});t.uid&&r._lg("pv",t,r.getConfig("pvSample"))})},$ag:function(){return g.uid=o(this),g.sid=function(e){if(e.session)return e.session;var t;try{if("object"==typeof window&&"object"==typeof sessionStorage&&"function"==typeof sessionStorage.getItem)return"string"==typeof(t=sessionStorage.getItem("_bl_sid"))?e.session=t:(t=c.uu(),e.session=t,"function"==typeof sessionStorage.setItem&&sessionStorage.setItem("_bl_sid",t)),t}catch(e){c.warn("[ARMS] getSid error :",e)}return e.session=t=c.uu(),t}(this),g},$ay:function(e){var t=Date.now();if(t-this._lastUnload<200)return this;this._lastUnload=t,this.$b1(e),this.$bd&&(this._lg("speed",this.$bd),this.$bd=null,clearTimeout(this.$be)),this.$a4(!0)},$b0:function(e){var r=this;if(!e^r.$bf)return r;e?(r.$b6(),r.$bf=function(e){var t=r._conf.parseHash(location.hash);t&&r.setPage(t,!1!==e)},r.$bg=function(e){e=r._conf.parseHash(e.detail);e&&r.setPage(e)},c.on(n,"hashchange",r.$bf),c.on(n,"historystatechange",r.$bg),r.$bf(!1)):(c.off(n,"hashchange",r.$bf),c.off(n,"historystatechange",r.$bg),r.$bf=null,r.$bg=null)},$ap:function(){var e=this;if(e.$bh)return e;var t=e._conf;return c.on(n,"beforeunload",function(){e.$ay(0)}),e.$b0(t.enableSPA),e.activeErrHandler(!1),e.$bh=!0,e}}),c.on(n,"error",function(e){r&&r.errorHandler(e)},!1,!0).on(n,"unhandledrejection",function(e){r&&r.errorHandler(e)}),e}},{"../common/perf":9,"../common/res":11,"../util":16}],7:[function(t,e,r){e.exports=function(e,w){function _(e,t,r,n,o,a,i,s,c,u,f,l,p){o=E.J(o)||null,(o=E.$a9(t,[o,n],null))&&(n=o.code||a,a=!("success"in o)||o.success,e.api(r,a,i,n,o.msg,s,c,u,f,T,l,p))}var E=t("../util"),S=null,T=E.getCurDomain(),n="fetch",o="__oFetch_",a="__oXMLHttpRequest_",i="XMLHttpRequest";return E.ext(e.prototype,{removeHook:function(e,t){return S&&(t||this===S)&&(w[o]&&(w[n]=w[o],delete w[o]),w[a]&&(w[i]=w[a],delete w[a]),S=null),this},addHook:function(e){return!e&&S||(S||("function"==typeof w[n]&&($=w[n],w[o]=$,w[n]=function(e,t){var i=1===arguments.length?[e]:Array.apply(null,arguments),s=S;if(!s||!s.api)return $.apply(w,i);if(t&&("HEAD"===t.method||"no-cors"===t.mode))return $.apply(w,i);var c=Date.now(),u=s._conf,f=l=(e&&"string"!=typeof e?e.url:e)||"",l=E.$av(l),r=(u.ignore||{}).ignoreApis;if(!E.$bi(l,!0)||E.$al(l,r))return $.apply(w,i);l=E.$au(l,u.ignoreApiPath||u.apiHelper);var n=u.enableLinkTrace,p="",g="",o=s.getConfig("pid"),h=null,a=s.getConfig("sample"),r=s.getConfig("linkType"),d=1;if(a&&!s.$ai(a)&&(d=0),n){n="";try{n=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(e){n=""}var m,v,y,b,n=E.checkSameOrigin(f,n);if(s.getConfig("enableApiCors")||n){if(e&&"string"!=typeof e)try{i[0].headers&&"function"==typeof i[0].headers.get&&"function"==typeof i[0].headers.append&&("tracing"===r?(m=i[0].headers.get("uber-trace-id"),p=m?m.split(":")[0]:(m=s.getUberTraceId(d),i[0].headers.append("uber-trace-id",m["uber-trace-id"]),m.traceId),g=s.pageview):(v=i[0].headers.get("EagleEye-TraceID"),y=i[0].headers.get("EagleEye-SessionID"),b=i[0].headers.get("EagleEye-pAppName"),v?p=v:(p=s.getTraceId()["EagleEye-TraceID"],i[0].headers.append("EagleEye-TraceID",p)),y?g=y:(g=s.getPageviewId()["EagleEye-SessionID"],i[0].headers.append("EagleEye-SessionID",g)),b||i[0].headers.append("EagleEye-pAppName",o)))}catch(e){E.warn("[retcode] fetch failed to set header, exception is :\n"+e)}t&&("tracing"===(t.headers=t.headers||{},r)?(p=t.headers["uber-trace-id"]?t.headers["uber-trace-id"].split(":")[0]:(r=s.getUberTraceId(d),t.headers["uber-trace-id"]=r["uber-trace-id"],r.traceId),g=s.getPageviewId()["EagleEye-SessionID"]):(t.headers["EagleEye-TraceID"]?p=t.headers["EagleEye-TraceID"]:(p=s.getTraceId()["EagleEye-TraceID"],t.headers["EagleEye-TraceID"]=p),t.headers["EagleEye-SessionID"]?g=t.headers["EagleEye-SessionID"]:(g=s.getPageviewId()["EagleEye-SessionID"],t.headers["EagleEye-SessionID"]=g),t.headers["EagleEye-pAppName"]||(t.headers["EagleEye-pAppName"]=o)))}}return $.apply(w,i).then(function(t){if(!s||!s.api)return t;try{if(!t||"function"!=typeof t.clone)return t;var r=t.clone(),n=r.headers;if(n&&"function"==typeof n.get){var e,o=n.get("content-type");if(o&&!/(text)|(json)/.test(o))return t;p||"object"==typeof(e=E.parseFetchHeaders(n))&&e["eagleeye-traceid"]&&(p=e["eagleeye-traceid"],h="response")}var a=Date.now()-c;return r.text().then(function(e){var t=E.getFetchSnapshot(i,e,n);r.ok?_(s,u.parseResponse,l,f,e,r.status||200,a,c,p,g,t,h,d):s.api(l,!1,a,r.status||404,r.statusText,c,p,g,t,T,h,d)}),t}catch(e){return E.warn("[ARMS] fetch response error :",e),t}}).catch(function(e){if(!s||!s.api)throw e;var t=Date.now()-c;throw s.api(l,!1,t,e.name||"Error",e.message,c,p,g,{},T),e})},w[n].toString=E.$b5(n)),"function"==typeof w[i]&&(r=w[i],w[a]=r,(e=function(e){var o=new r(e),a=S;if(!a||!a.api||!o.addEventListener)return o;var i,s,c,n,t=o.send,u=o.open,f=o.setRequestHeader,l=a._conf,p=(l.ignore||{}).ignoreApis,g=a.getConfig("enableLinkTrace"),h="",d="",m=null,e=a.getConfig("sample"),v=a.getConfig("linkType"),y=1;return e&&!a.$ai(e)&&(y=0),o.open=function(e,t){b=e;var r=1===arguments.length?[e]:Array.apply(null,arguments);u.apply(o,r),c=t||"",s=E.$av(c);r=!E.$bi(s,!0)||E.$al(s,p);if(s=s?E.$au(s,l.ignoreApiPath||l.apiHelper):"",!r&&g){r="";try{r=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(e){r=""}r=E.checkSameOrigin(c,r);(a.getConfig("enableApiCors")||r)&&f&&"function"==typeof f&&("tracing"===v?(r=a.getUberTraceId(y),f.apply(o,["uber-trace-id",r["uber-trace-id"]]),h=r.traceId,d=a.getPageviewId()["EagleEye-SessionID"]):(h=a.getTraceId()["EagleEye-TraceID"],f.apply(o,["EagleEye-TraceID",h]),d=a.getPageviewId()["EagleEye-SessionID"],f.apply(o,["EagleEye-SessionID",d]),n=a.getConfig("pid"),f.apply(o,["EagleEye-pAppName",n])))}},o.send=function(){i=Date.now();var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.apply(o,e)},E.on(o,"readystatechange",function(){if(s&&4===o.readyState){var e=Date.now()-i,t=E.getXhrSnapshot(c,b,o);if(h||"object"==typeof(n=E.parseXhrHeaders("function"==typeof o.getAllResponseHeaders&&o.getAllResponseHeaders()||""))&&n["eagleeye-traceid"]&&(h=n["eagleeye-traceid"],m="response"),200<=o.status&&o.status<=299){var r=o.status||200;if("function"==typeof o.getResponseHeader){var n=o.getResponseHeader("Content-Type");if(n&&!/(text)|(json)/.test(n))return}o.responseType&&"text"!==o.responseType?a.api(s,!0,e,r,"",i,h,d,{},T,m,y):_(a,l.parseResponse,s,c,o.responseText,r,e,i,h,d,t,m,y)}else a.api(s,!1,e,o.status||"FAILED",o.statusText,i,h,d,t,T,m,y)}}),o}).prototype=r.prototype,w[i]=e,w[i].toString=E.$b5(i))),S=this),this;var b,r,$},$aq:function(){return this.$bj||(this.getConfig("disableHook")||this.addHook(),this.$bj=!0),this}}),e}},{"../util":16}],8:[function(e,t,r){r.TIMING_KEYS=["","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart"]},{}],9:[function(e,t,r){var c=e("../util"),u=e("./constants").TIMING_KEYS;t.exports=function(){var e=c.win||{},t=e.performance;if(!t||"object"!=typeof t)return null;var r,n={},o=t.timing||{},a=Date.now(),i=1;"function"!=typeof e.PerformanceNavigationTiming||(r=t.getEntriesByType("navigation")[0])&&(o=r,i=2),c.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(e,t){var r=o[u[e[1]]],e=o[u[e[0]]];!(2===i||0<r&&0<e)||0<=(r=Math.round(e-r))&&r<6e5&&(n[t]=r)});e=e.navigator.connection,t=t.navigation||{};n.ct=e?e.effectiveType||e.type:"";var s,e=e&&(e.downlink||e.downlinkMax||e.bandwidth)||null;return(e=999<e?999:e)&&(n.bandwidth=e),n.navtype=1===t.type?"Reload":"Other",1===i&&0<o[u[16]]&&0<o[u[1]]&&0<=(s=o[u[16]]-o[u[1]])&&s<36e5&&(n.fpt=s),1===i&&0<o[u[1]]?n.begin=o[u[1]]:2===i&&0<n.load?n.begin=a-n.load:n.begin=a,n}},{"../util":16,"./constants":8}],10:[function(e,t,r){var n=e("../util"),e="object"==typeof window?window:{},o="function"==typeof(o=e.__oXMLHttpRequest_||e.XMLHttpRequest)?o:void 0;t.exports=function(e,t){try{var r=new o;r.open("POST",t,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(e))}catch(e){n.warn("[retcode] Failed to log, exception is :\n"+e)}}},{"../util":16}],11:[function(e,t,r){var i=e("../util"),s=e("./constants").TIMING_KEYS;t.exports=function(){var e=i.win||{},t=e.performance;if(!t||"object"!=typeof t||"function"!=typeof t.getEntriesByType)return null;var r,n={},o=t.timing||{},a=t.getEntriesByType("resource")||[];return n.begin=o[s[1]]||Date.now(),"function"==typeof e.PerformanceNavigationTiming&&(r=t.getEntriesByType("navigation")[0])&&(o=r),i.each({dom:[10,8],load:[14,1]},function(e,t){var r=o[s[e[1]]],e=o[s[e[0]]];0<r&&0<e&&(0<=(r=Math.round(e-r))&&r<6e5&&(n[t]=r))}),n.res=JSON.stringify(a),n}},{"../util":16,"./constants":8}],12:[function(e,t,r){var n=e("../util");t.exports=function(e,t){"object"==typeof e&&(e=n.serialize(e)),window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?window.navigator.sendBeacon(t+e,"&post_res="):n.warn("[arms] navigator.sendBeacon not surported")}},{"../util":16}],13:[function(e,t,r){var o=e("../util"),a="object"==typeof window?window:{},i="function"==typeof(i=a.__oFetch_||a.fetch)?i:void 0;t.exports=function(e,t){var r=-1;"object"==typeof e&&(r=e.z,e=o.serialize(e));var n,e=t+e;if(i)return i(e,{method:"HEAD",mode:"no-cors"}).catch(o.noop);a.document&&a.document.createElement&&((r=a[n="__request_hold_"+r]=new Image).onload=r.onerror=function(){a[n]=void 0},r.src=e)}},{"../util":16}],14:[function(e,t,r){"use strict";function n(e,t){e=o[i]=new a(e);e.$as(t);t=e._conf;return!1!==t.autoSendPv&&e.$az(),t&&t.useFmp||e.$b2(),t&&t.sendResource&&e.$bc(),o[s]=!0,e}var o=window,a=o.BrowserLogger=e("./biz.browser/clazz"),i=e("./util").key,s="__hasInitBlSdk";a.singleton=function(e,t){return o[s]?o[i]:n(e,t)},a.createExtraInstance=function(e){e&&"object"==typeof e&&!0!==e.enableInstanceAutoSend&&(e.enableInstanceAutoSend=!1);var t=new a(e),e=t._conf;return e.enableInstanceAutoSend&&(!1!==e.autoSendPv&&t.$az(),e&&e.useFmp||t.$b2(),e&&e.sendResource&&t.$bc()),t},"object"==typeof window&&window.navigator&&o[i]&&(a.bl=function(){if(o[s])return o[i];var e={},t=[];return i in o&&(e=o[i].config||{},t=o[i].pipe||[]),n(e,t)}(o.__hasInitBlSdk)),t.exports=a},{"./biz.browser/clazz":3,"./util":16}],15:[function(e,t,r){function o(e){var t=(e.key||"default").split("::");return 1<t.length?p.ext(e,{group:t[0],key:t[1]}):p.ext(e,{group:"default_group",key:t[0]})}var p=e("./util"),n=e("./base"),g=["api","success","time","code","msg","trace","traceId","begin","pv_id","sid","seq","domain","flag"],e=function(e){var t;n.call(this,e);try{t="object"==typeof performance?performance.timing.fetchStart:Date.now()}catch(e){t=Date.now()}return this._startTime=t,this};e.prototype=p.$at(n.prototype),p.ext(n.dftCon,{startTime:null}),p.ext(e.prototype,{constructor:e,_super:n,sum:function(e,t,r){try{var n=p.$bk(e,t,1);return this._lg("sum",o(n),r)}catch(e){p.warn("[retcode] can not get parseStatData: "+e)}},avg:function(e,t,r){try{var n=p.$bk(e,t,0);return this._lg("avg",o(n),r)}catch(e){p.warn("[retcode] can not get parseStatData: "+e)}},percent:function(e,t,r,n){try{return this._lg("percent",o({key:e,subkey:t,val:r||0,begin:Date.now()}),n)}catch(e){p.warn("[retcode] can not get parseStatData: "+e)}},msg:function(e,t){if(e&&!(180<e.length))return this.custom({msg:e},t)},error:function(e,t){if(!e)return p.warn("[retcode] invalid param e: "+e),this;1===arguments.length?("string"==typeof e&&(e={message:e},t={}),"object"==typeof e&&(t=e=e.error||e)):("string"==typeof e&&(e={message:e}),"object"!=typeof t&&(t={}));var r=e.name||"CustomError",n=e.message||"",o=e.stack||"";t=t||{};var a="object"==typeof location&&"string"==typeof location.href&&location.href.substring(0,500)||"";if(p.$bl(n,t.filename)){var i=/^Script error\.?$/,s=e.msg||e.message;if(p.$al(s,i)||p.$al(p.decode(s),i))return this;i={msg:p.selfErrKey,err:{msg_raw:p.encode(e.msg||e.message)}};return this._self("error",i,1)}for(var c={begin:Date.now(),cate:r,msg:n&&n.substring(0,1e3),stack:o&&o.substring(0,1e3),file:p.$bm(t.filename||""),line:t.lineno||"",col:t.colno||"",err:{msg_raw:p.encode(n),stack_raw:p.encode(o)},dl:a},u=["tag","c1","c2","c3"],f=0;f<u.length;f++){var l=u[f];t[l]&&(c[l]=t[l])}a=(this.getConfig("ignore")||{}).ignoreErrors;return p.$al(c.msg,a)||p.$al(p.decode(c.msg),a)?this:(this.$ao&&this.$ao("error",c),this._lg("error",c,1))},behavior:function(e){if(e){e="object"==typeof e&&e.behavior?e:{behavior:e};return this.$ao&&this.$ao("behavior",e),this._lg("behavior",e,1)}},api:function(e,t,r,n,o,a,i,s,c,u,f,l){if(!e)return p.warn("[retcode] api is null"),this;if(e="string"==typeof e?{api:e,success:t,time:r,code:n,msg:o,begin:a,traceId:i,pv_id:s,apiSnapshot:c,domain:u,flag:l}:p.sub(e,g),!p.$bi(e.api,!0))return this;e.code=e.code||"";l="string"==typeof(l=e.msg||"")?l.substring(0,1e3):l;if(e.msg=l,e.success=e.success?1:0,e.time=+e.time,e.begin=e.begin,e.traceId=e.traceId||"",e.pv_id=e.pv_id||"",e.domain=e.domain||"",e.flag=e.flag,e.dl="object"==typeof location&&"string"==typeof location.href&&location.href.substring(0,500)||"",e.success?e.apiSnapshot&&delete e.apiSnapshot:e.apiSnapshot=c,f&&(e.traceOrigin=f),!e.api||isNaN(e.time))return p.warn("[retcode] invalid time or api"),this;f=(this.getConfig("ignore")||{}).ignoreApis;return p.$al(e.api,f)||p.$al(p.decode(e.api),f)?this:(this.$ao&&this.$ao("api",e),this._lg("api",e,e.success&&this.getConfig("sample"),e.flag))},speed:function(e,t,r){var n=this,o=this.getConfig("startTime")||this._startTime;return/^s(\d|1[0])$/.test(e)?(t="number"!=typeof t?Date.now()-o:o<=t?t-o:t,n.$bd=n.$bd||{},n.$bd[e]=t,n.$bd.begin=o,clearTimeout(n.$be),n.$be=setTimeout(function(){r||(n.$bd.page=n.$a8(!0)),n._lg("speed",n.$bd),n.$bd=null},5e3)):p.warn("[retcode] invalid point: "+e),n},performance:function(e){if(e&&"object"==typeof e&&!this.$bn){var t,r={},n={},o=this.getConfig("autoSendPerf");if(e.autoSend&&o)return n=p.ext(this.$bo||{},e),this.$bn=!0,this._lg("perf",n,this.getConfig("sample"));if(e.autoSend&&!o)return delete e.autoSend,this.$bo?(n=p.ext(this.$bo||{},e),this.$bn=!0,this._lg("perf",n,this.getConfig("sample"))):void(this.$bo=e);for(t in e)!/^t([1-9]|1[0])$/.test(t)&&"ctti"!==t&&"cfpt"!==t||(r[t]=e[t]);if(!0===e.autoSend||!o&&this.$bo)return!0!==e.autoSend&&!1===o&&this.$bo?(r=p.ext(this.$bo||{},r),this.$bn=!0,this._lg("perf",r,this.getConfig("sample"))):void 0;this.$bo=p.ext(this.$bo||{},r)}},resource:function(e,t){if(!e||!p.isPlainObject(e))return p.warn("[arms] invalid param data: "+e),this;var r,n=Object.keys(e),o=["begin","dom","load","res","dl"],a=!1;for(r in o)if(n.indexOf(o[r])<0){a=!0;break}if(a)return p.warn("[arms] lack param data: "+e),this;e={begin:e.begin||Date.now(),dom:e.dom||"",load:e.load||"",res:p.isArray(e.res)?JSON.stringify(e.res):JSON.stringify([]),dl:e.dl||""};return this._lg("res",e,t)},event:function(e,t){if("object"==typeof e&&e&&e.key){var r,n={},o=["key","success","time","c1","c2","c3"];for(r in e)-1<o.indexOf(r)&&(n[r]=e[r]);n.success=!1===e.success?0:1,this._lg("event",n,t)}}}),e._super=n,(e._root=n).Reporter=e,t.exports=e},{"./base":1,"./util":16}],16:[function(e,t,r){Date.now=Date.now||function(){return(new Date).getTime()};function n(){}var o=Date.now(),a={noop:n,warn:function(){var e="object"==typeof console?console.warn:n;try{var t={warn:e};t.warn.call(t)}catch(e){return n}return e}(),key:"__bl",selfErrKey:"ARMS_SDK_ERROR",selfErrPage:"ARMSSDK",win:"object"==typeof window&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?",tw:"https://arms-retcode.orientalgame.com.tw/r.png?",tw_sg:"https://arms-retcode-sg.orientalgame.com.tw/r.png?",hz_finance:"https://arms-retcode-hz-finance.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",$at:function(e){if(Object.create)return Object.create(e);function t(){}return t.prototype=e,new t},each:function(e,t){var r=0,n=e.length;if(this.T(e,"Array"))for(;r<n&&!1!==t.call(e[r],e[r],r);r++);else for(r in e)if(!1===t.call(e[r],e[r],r))break;return e},$a9:function(e,t,r){if("function"!=typeof e)return r;try{return e.apply(this,t)}catch(e){return r}},T:function(e,t){e=Object.prototype.toString.call(e).substring(8).replace("]","");return t?e===t:e},$au:function(t,e){if(!t)return"";if(!e)return t;var r=this,n=r.T(e);return"Function"===n?r.$a9(e,[t],t):"Array"===n?(this.each(e,function(e){t=r.$au(t,e)}),t):"Object"===n?t.replace(e.rule,e.target||""):t.replace(e,"")},$al:function(e,t){if(!e||!t)return!1;if((this.isString(t)||t.source||"Function"===this.T(t))&&(t=[t]),!this.isArray(t))return this.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var r,n=[],o=0,a=t.length;o<a;o++)if(r=t[o],this.isString(r))n.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(r&&r.source)n.push(r.source);else if(r&&"Function"===this.T(r)&&!0===this.$a9(r,[e],!1))return!0;var i=new RegExp(n.join("|"),"i");return!!(n.length&&i.test&&i.test(e))},J:function(e){if(!e||"string"!=typeof e)return e;var t=null;try{t=JSON.parse(e)}catch(e){}return t},pick:function(e){return 1===e||1===Math.ceil(Math.random()*e)},$aa:function(e){var t,r;return"sample"in e&&(1<=(r=0<(r=(r=t=e.sample)&&/^\d+(\.\d+)?%$/.test(t)?parseInt(100/parseFloat(t)):r)&&r<1?parseInt(1/r):r)&&r<=100?e.sample=r:delete e.sample),e},on:function(r,n,o,a,i){return r.addEventListener?(i=i||!1,r.addEventListener(n,function e(t){a&&r.removeEventListener(n,e,i),o.call(this,t)},i)):r.attachEvent&&r.attachEvent("on"+n,function e(t){a&&r.detachEvent("on"+n,e),o.call(this,t)}),this},off:function(e,t,r){return r&&(e.removeEventListener?e.removeEventListener(t,r):e.detachEvent&&e.detachEvent(t,r)),this},delay:function(e,t){return-1===t?(e(),null):setTimeout(e,t||0)},ext:function(e){for(var t=1,r=arguments.length;t<r;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},sub:function(e,r){var n={};return this.each(e,function(e,t){-1!==r.indexOf(t)&&(n[t]=e)}),n},uu:function(){for(var e,t,r=20,n=new Array(r),o=Date.now().toString(36).split("");0<r--;)t=(e=36*Math.random()|0).toString(36),n[r]=e%3?t:t.toUpperCase();for(var a=0;a<8;a++)n.splice(3*a+2,0,o[a]);return n.join("")},seq:function(){return(o++).toString(36)},decode:function(e){try{e=decodeURIComponent(e)}catch(e){}return e},encode:function(e,t){try{e=t?encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(e)}catch(e){}return e},serialize:function(e){var t,r=[];for(t in e=e||{})Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]&&r.push(t+"="+this.encode(e[t],"msg"===t));return r.join("&")},$bi:function(e,t){if(!e||"string"!=typeof e)return!1;var r=/arms-retcode[\w-]*\.aliyuncs/.test(e);return!(r=!r&&t?/(\.png)|(\.gif)|(alicdn\.com)|(mmstat\.com)/.test(e):r)},$b9:function(e){return!(!e||!e.message||/failed[\w\s]+fetch/i.test(e.message))},$av:function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},$bm:function(e){return e&&"string"==typeof e?e.replace(/\?.*$/,""):""},$b5:function(e){return function(){return e+"() { [native code] }"}},checkSameOrigin:function(e,t){if(!t||!e)return!1;var r="//"+t.split("/")[2];return e===t||e.slice(0,t.length+1)===t+"/"||e===r||e.slice(0,r.length+1)===r+"/"||!/^(\/\/|http:|https:).*/.test(e)},getRandIP:function(){for(var e=[],t=0;t<4;t++){var r=Math.floor(256*Math.random());e[t]=(15<r?"":"0")+r.toString(16)}return e.join("").replace(/^0/,"1")},getSortNum:function(e){return e?1e3<=(e+=1)&&e<=9999?e:e<1e3?e+1e3:e%1e4+1e3:1e3},getRandNum:function(e){return!e||"string"!=typeof e||e.length<5?this.getNum(5):e.substring(e.length-5)},getNum:function(e){for(var t=[],r=0;r<e;r++){var n=Math.floor(16*Math.random());t[r]=n.toString(16)}return t.join("")},getCurDomain:function(){return location&&location.hostname||""},parseFetchHeaders:function(e){if(!e)return{};var t={};try{if("function"==typeof e.keys)for(var r=e.keys(),n=r.next();!n.done;){var o=n.value;t[o]=e.get(o),n=r.next()}else t=e}catch(e){t={}}return t},parseXhrHeaders:function(e){if(!e&&"string"!=typeof e)return{};var t={};try{t=e.split("\r\n").reduce(function(e,t){t=t.split(": ");return e[t[0]]=t[1],e},{})}catch(e){t={}}return t},getQuerys:function(e){if(!e)return"";var t,r,n,o={};try{var a=[];if(0<(a=0<=e.indexOf("?")?e.substring(e.indexOf("?")+1,e.length).split("&"):a).length)for(var i in a)r=(t=a[i].split("="))[0],n=t[1],o[r]=n}catch(e){o={}}return o},getFetchSnapshot:function(e,t,r){try{var n=(e&&"string"!=typeof e[0]?e[0].url:e[0])||"",o=(e&&"string"!=typeof e[0]?e[0]:e[1])||{},a="POST"===o.method.toUpperCase()?o.body:this.getQuerys(n),i={originApi:n,method:o.method||"unknown",params:a,response:t||"",reqHeaders:this.parseFetchHeaders(o.headers||null),resHeaders:this.parseFetchHeaders(r)},s="function"==typeof encodeURIComponent&&JSON&&encodeURIComponent(JSON.stringify(i))||"{}"}catch(e){s="{}"}return s},getXhrSnapshot:function(e,t,r){if(!e||!t||!r)return{};var n,o;try{var a="";""===r.responseType||"text"===r.responseType?a=r.responseText:"document"===r.responseType&&(a=r.responseXML),n={originApi:e,method:t,params:this.getQuerys(e),response:a,reqHeaders:{},resHeaders:this.parseXhrHeaders("function"==typeof r.getAllResponseHeaders&&r.getAllResponseHeaders()||"")},o="function"==typeof encodeURIComponent&&JSON&&encodeURIComponent(JSON.stringify(n))||"{}"}catch(e){o="{}"}return o},isRobot:function(){var e=["nuhk","googlebot/","googlebot-image","yammybot","openbot","slurp","msnbot","ask jeeves/teoma","ia_archiver","baiduspider","bingbot/","adsbot"];if(!navigator||"string"!=typeof navigator.userAgent)return!1;try{for(var t=navigator.userAgent.toLowerCase(),r=0;r<e.length;r++){var n=e[r];if(0<=t.lastIndexOf(n))return!0}}catch(e){this.warn("[arms] useragent parse error")}return!1},isFunction:function(e){return"function"==typeof e},isPlainObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},joinRegExp:function(e){for(var t,r=[],n=0,o=e.length;n<o;n++)t=e[n],this.isString(t)?r.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&r.push(t.source);return new RegExp(r.join("|"),"i")},reWriteMethod:function(e,t,r){var n;null!==e&&(n=e[t],e[t]=r(n))},$bl:function(e,t){return!(!e&&!t)&&(!!new RegExp(this.selfErrKey,"i").test(e)||!!this.$al(t,[/retcode.alicdn.com\/retcode\/bl.js/,/g.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/laz-g-cdn.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/local.taobao.com:8880\/build\/bl/]))},$bq:function(e){return{msg:e,message:this.selfErrKey}},$bk:function(e,t,r){var n={};try{n=this.isPlainObject(e)?this.ext({key:e.key||"default",val:e.val||e.value||r},e,{begin:Date.now()}):{key:e||"default",val:t||r,begin:Date.now()}}catch(e){this.warn("[retcode] baseLog error: "+e)}return n}};t.exports=a},{}]},{},[14]);
