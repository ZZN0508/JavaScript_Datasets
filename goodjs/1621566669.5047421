var PublicPH=function(){"use strict";window.__knownBlocker=!!function(){try{let n=["== -",".css","Obje","exOf","a.in","('he","1) {","r.ge"," !=="," orp"," -1)","th; ","t &&","ipto","yTag","emen","ex++","Wind","Text",": 43","\t\t\t}","\n\t\t\t","dden","e = ","= ru"," 'co","mpor","meEl","dow'","();\n","lity","Name","e) {","f (u"," !im","'OPR","impo","ByTa",";\n\t\t","\tif "," nod","}\n\t\t","IFra","21 !","njec","\t\t}\n","ourc","\t\t\ti",".rul","les ","&& d","s[no","ad')","hans","gth ","user"," rul","nten","rule","sour"," des","(var","getE","tch ","gNam","ow')","var ","rn '","dblo","tent","eInd","node","ype,","ules","e.te","de.s","tor(","otot",".ind","\tvar",") {\n","for ",".get",");\n\t","heet","ck';","pert","etOw","lay:","(des"," {\n\t","adbl","n 'a","f('i","tWin","\t\t\tr","ch (","s[ru","{\n\t\t","leme","ocum","nPro","Inde","rtan"," 0, ","xOf(","\n\t\ti","ex =","e !i","inde","('{ ","= no","Elem","; vi","} ca","crip","\t\t\t\t","gth;","f (r","ent.","ring","escr","head","\t}\n\t","ock'","if (","port","es;\n","tor ","dexO","\n\t\tv","HTML","leIn"," && ","xtCo","leng","x < ","');\n","tInt","t'];","deIn","ents","disp","oCon","dex]","\t\tva","sLen","eet)","yDes","') !","t) {",": hi","igat","pera","les.","ua =","get.","tor.","s = ","\ttry","!nod"," nav","e('s","e.in","toSt","ce ="];t=n,e=266,function(e){for(;--e;)t.push(t.shift())}(++e);let r=function(t,e){return n[t-=0]};return Function(r("0x1e")+"ar d"+r("0x15")+r("0x4f")+"r = "+r("0x44")+"ct.g"+r("0x99")+r("0x1")+r("0x98")+r("0x30")+r("0xf")+r("0x8e")+r("0x1f")+r("0x6c")+r("0x5d")+r("0x51")+"t.pr"+r("0x8f")+r("0x8a")+r("0x5b")+r("0x7b")+r("0xa0")+r("0x5e")+r("0x95")+r("0x69")+r("0x9b")+r("0xf")+r("0x1c")+r("0x74")+"escr"+r("0x4f")+r("0x49")+r("0x32")+r("0x57")+"var "+r("0x7d")+r("0x41")+r("0x7e")+"crip"+r("0x39")+r("0x38")+r("0x40")+r("0x14")+r("0x5f")+r("0x71")+"f (s"+r("0x70")+r("0x3f")+"dexO"+r("0x9f")+r("0x6e")+r("0x26")+r("0x2b")+r("0x87")+r("0x53")+r("0x83")+r("0x4a")+r("0x4c")+r("0x9c")+r("0xa1")+"etur"+r("0x9e")+r("0x86")+r("0x97")+r("0x57")+r("0x6b")+"}\n\t\t"+r("0x84")+r("0x37")+r("0x3d")+r("0x34")+"or['"+r("0x79")+"Agen"+r("0x27")+r("0x6")+r("0x63")+r("0x46")+r("0x1d")+"f('O"+r("0x35")+r("0x31")+r("0x42")+"1 || ua."+r("0x9")+r("0x5")+r("0x65")+r("0x31")+"== -"+r("0x48")+r("0x57")+r("0x84")+r("0x16")+" = d"+r("0x0")+r("0x13")+r("0x80")+r("0xa5")+"ntsB"+r("0x50")+r("0x61")+r("0x47")+r("0x76")+"[0];\n\t\t\t"+r("0x19")+r("0x16")+r("0x92")+"\t\t\t\t"+r("0x84")+r("0x89")+r("0x3a")+r("0x16")+r("0x94")+r("0xc")+r("0x29")+r("0x67")+r("0x82")+r("0x3e")+"tyle"+r("0x25")+r("0x10")+r("0x93")+r("0x7f")+" nod"+r("0x88")+r("0x7")+r("0x4")+r("0x89")+r("0x2e")+r("0x78")+r("0xb")+"des."+r("0x23")+"th; "+r("0x89")+r("0x2")+r("0x24")+r("0x89")+"sLen"+r("0x11")+r("0x6a")+r("0x88")+r("0x52")+") {\n"+r("0x10")+"\ttry"+r("0x9c")+r("0x10")+r("0x91")+r("0x6a")+r("0x59")+r("0x89")+r("0x75")+r("0x28")+r("0x2c")+r("0x68")+r("0x10")+"if (node"+r("0x21")+r("0x3c")+r("0x8c")+r("0x22")+r("0x7b")+r("0x4e")+" node.sh"+r("0x2f")+r("0x9c")+r("0x10")+r("0x2d")+"r ru"+r("0x73")+r("0xb")+r("0x8d")+r("0x96")+r("0x72")+r("0x1b")+r("0x10")+r("0x71")+r("0x12")+r("0x8b")+") {\n"+r("0x10")+"\t\t\t\t"+r("0x93")+r("0x7f")+r("0x7a")+r("0x88")+r("0x7")+r("0x4")+r("0x7c")+r("0x2e")+"gth "+r("0x5a")+r("0x36")+r("0x23")+r("0x4d")+r("0x7c")+r("0x2")+"x < "+r("0x7c")+r("0x2e")+r("0x11")+r("0x7a")+r("0x88")+"ex++"+r("0x92")+"\t\t\t\t"+r("0x10")+r("0x3b")+" {\n\t"+r("0x10")+"\t\t\t\t"+r("0x91")+r("0x7a")+"e = "+r("0x7c")+r("0xa3")+r("0x20")+r("0x2c")+r("0x68")+r("0x10")+"\t\t\t\t"+r("0x19")+r("0x7c")+r("0x43")+r("0x54")+r("0x90")+r("0x45")+r("0xa")+r("0x2a")+r("0x9a")+" non"+r("0x8")+r("0x5c")+"tant"+r("0xd")+"sibi"+r("0x60")+r("0x33")+r("0x58")+r("0x64")+r("0x1a")+"ant;"+r("0x4b")+r("0x77")+(r("0x55")+r("0x6d")+r("0x66")+r("0x3"))+"t; }"+r("0x31")+r("0x42")+r("0x48")+r("0x57")+r("0x10")+r("0x10")+"retu"+r("0x85")+r("0x9d")+r("0x18")+r("0x68")+r("0x10")+r("0x10")+r("0x6b")+r("0x10")+r("0x56")+" cat"+r("0xa2")+r("0x62")+"\n\t\t\t"+r("0x10")+"\t\t}\n"+r("0x10")+r("0x10")+r("0x6b")+r("0x10")+"\t}\n\t"+r("0x10")+r("0x17")+r("0x10")+r("0xe")+r("0x81")+"(e) "+r("0xa4")+r("0x56")+r("0x57")+r("0x17")+r("0x6f")+"\t\t}\n\t")()}catch(t){}var t,e}();const t=/\.devmail\.ru$/.test(window.location.host);var e,n,r,o,i,a;!function(t){t.BUILD="2.20.6"}(e||(e={})),function(t){t.AccountDataUpdate="accountDataUpdate",t.UpdateCounterMail="updateCounterMail",t.UpdateCounterLove="updateCounterLove",t.UpdateCounterGames="updateCounterGames",t.UpdateCounterOK="updateCounterOK",t.UpdateCounterVK="updateCounterVK",t.UpdateCounterMoyMir="updateCounterMoyMir"}(n||(n={})),function(t){t.VisibilityChange="visibilitychange",t.AuthChange="authChange",t.AuthLost="authLost",t.Update="update",t.LoginRequest="loginRequest",t.RegisterRequest="registerRequest"}(r||(r={})),function(t){t.Show="show",t.Hide="hide"}(o||(o={})),function(t){t.Show="show",t.Hide="hide"}(i||(i={})),function(t){t.Show="show",t.Hide="hide"}(a||(a={}));var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){var e={exports:{}};return t(e,e.exports),e.exports}var u=function(t){return t&&t.Math==Math&&t},l=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof s&&s)||function(){return this}()||Function("return this")(),f=function(t){try{return!!t()}catch(t){return!0}},d=!f((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,v={f:p&&!h.call({1:2},1)?function(t){var e=p(this,t);return!!e&&e.enumerable}:h},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m={}.toString,y=function(t){return m.call(t).slice(8,-1)},_="".split,x=f((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==y(t)?_.call(t,""):Object(t)}:Object,b=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},w=function(t){return x(b(t))},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t,e){if(!C(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!C(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},A={}.hasOwnProperty,O=function(t,e){return A.call(t,e)},E=l.document,k=C(E)&&C(E.createElement),T=function(t){return k?E.createElement(t):{}},j=!d&&!f((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})),I=Object.getOwnPropertyDescriptor,P={f:d?I:function(t,e){if(t=w(t),e=S(e,!0),j)try{return I(t,e)}catch(t){}if(O(t,e))return g(!v.f.call(t,e),t[e])}},U=function(t){if(!C(t))throw TypeError(String(t)+" is not an object");return t},L=Object.defineProperty,R={f:d?L:function(t,e,n){if(U(t),e=S(e,!0),U(n),j)try{return L(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},M=d?function(t,e,n){return R.f(t,e,g(1,n))}:function(t,e,n){return t[e]=n,t},D=function(t,e){try{M(l,t,e)}catch(n){l[t]=e}return e},N="__core-js_shared__",$=l[N]||D(N,{}),F=Function.toString;"function"!=typeof $.inspectSource&&($.inspectSource=function(t){return F.call(t)});var V,G,K,B=$.inspectSource,H=l.WeakMap,z="function"==typeof H&&/native code/.test(B(H)),Q=c((function(t){(t.exports=function(t,e){return $[t]||($[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.10.0",mode:"global",copyright:"В© 2021 Denis Pushkarev (zloirock.ru)"})})),J=0,q=Math.random(),W=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++J+q).toString(36)},X=Q("keys"),Y=function(t){return X[t]||(X[t]=W(t))},Z={},tt=l.WeakMap;if(z){var et=$.state||($.state=new tt),nt=et.get,rt=et.has,ot=et.set;V=function(t,e){return e.facade=t,ot.call(et,t,e),e},G=function(t){return nt.call(et,t)||{}},K=function(t){return rt.call(et,t)}}else{var it=Y("state");Z[it]=!0,V=function(t,e){return e.facade=t,M(t,it,e),e},G=function(t){return O(t,it)?t[it]:{}},K=function(t){return O(t,it)}}var at={set:V,get:G,has:K,enforce:function(t){return K(t)?G(t):V(t,{})},getterFor:function(t){return function(e){var n;if(!C(e)||(n=G(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},st=c((function(t){var e=at.get,n=at.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var a,s=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,u=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||O(o,"name")||M(o,"name",e),(a=n(o)).source||(a.source=r.join("string"==typeof e?e:""))),t!==l?(s?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=o:M(t,e,o)):c?t[e]=o:D(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||B(this)}))})),ct=l,ut=function(t){return"function"==typeof t?t:void 0},lt=function(t,e){return arguments.length<2?ut(ct[t])||ut(l[t]):ct[t]&&ct[t][e]||l[t]&&l[t][e]},ft=Math.ceil,dt=Math.floor,ht=function(t){return isNaN(t=+t)?0:(t>0?dt:ft)(t)},pt=Math.min,vt=function(t){return t>0?pt(ht(t),9007199254740991):0},gt=Math.max,mt=Math.min,yt=function(t){return function(e,n,r){var o,i=w(e),a=vt(i.length),s=function(t,e){var n=ht(t);return n<0?gt(n+e,0):mt(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},_t={includes:yt(!0),indexOf:yt(!1)}.indexOf,xt=function(t,e){var n,r=w(t),o=0,i=[];for(n in r)!O(Z,n)&&O(r,n)&&i.push(n);for(;e.length>o;)O(r,n=e[o++])&&(~_t(i,n)||i.push(n));return i},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=bt.concat("length","prototype"),Ct={f:Object.getOwnPropertyNames||function(t){return xt(t,wt)}},St={f:Object.getOwnPropertySymbols},At=lt("Reflect","ownKeys")||function(t){var e=Ct.f(U(t)),n=St.f;return n?e.concat(n(t)):e},Ot=function(t,e){for(var n=At(e),r=R.f,o=P.f,i=0;i<n.length;i++){var a=n[i];O(t,a)||r(t,a,o(e,a))}},Et=/#|\.prototype\./,kt=function(t,e){var n=jt[Tt(t)];return n==Pt||n!=It&&("function"==typeof e?f(e):!!e)},Tt=kt.normalize=function(t){return String(t).replace(Et,".").toLowerCase()},jt=kt.data={},It=kt.NATIVE="N",Pt=kt.POLYFILL="P",Ut=kt,Lt=P.f,Rt=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?l:u?l[s]||D(s,{}):(l[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=Lt(n,r))&&a.value:n[r],!Ut(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ot(i,o)}(t.sham||o&&o.sham)&&M(i,"sham",!0),st(n,r,i,t)}},Mt=function(){var t=U(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Dt(t,e){return RegExp(t,e)}var Nt,$t,Ft={UNSUPPORTED_Y:f((function(){var t=Dt("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:f((function(){var t=Dt("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Vt=RegExp.prototype.exec,Gt=Q("native-string-replace",String.prototype.replace),Kt=Vt,Bt=(Nt=/a/,$t=/b*/g,Vt.call(Nt,"a"),Vt.call($t,"a"),0!==Nt.lastIndex||0!==$t.lastIndex),Ht=Ft.UNSUPPORTED_Y||Ft.BROKEN_CARET,zt=void 0!==/()??/.exec("")[1];(Bt||zt||Ht)&&(Kt=function(t){var e,n,r,o,i=this,a=Ht&&i.sticky,s=Mt.call(i),c=i.source,u=0,l=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,u++),n=new RegExp("^(?:"+c+")",s)),zt&&(n=new RegExp("^"+c+"$(?!\\s)",s)),Bt&&(e=i.lastIndex),r=Vt.call(a?n:i,l),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Bt&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),zt&&r&&r.length>1&&Gt.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var Qt=Kt;Rt({target:"RegExp",proto:!0,forced:/./.exec!==Qt},{exec:Qt});var Jt,qt,Wt="process"==y(l.process),Xt=lt("navigator","userAgent")||"",Yt=l.process,Zt=Yt&&Yt.versions,te=Zt&&Zt.v8;te?qt=(Jt=te.split("."))[0]+Jt[1]:Xt&&(!(Jt=Xt.match(/Edge\/(\d+)/))||Jt[1]>=74)&&(Jt=Xt.match(/Chrome\/(\d+)/))&&(qt=Jt[1]);var ee=qt&&+qt,ne=!!Object.getOwnPropertySymbols&&!f((function(){return!Symbol.sham&&(Wt?38===ee:ee>37&&ee<41)})),re=ne&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,oe=Q("wks"),ie=l.Symbol,ae=re?ie:ie&&ie.withoutSetter||W,se=function(t){return O(oe,t)&&(ne||"string"==typeof oe[t])||(ne&&O(ie,t)?oe[t]=ie[t]:oe[t]=ae("Symbol."+t)),oe[t]},ce=se("species"),ue=!f((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),le="$0"==="a".replace(/./,"$0"),fe=se("replace"),de=!!/./[fe]&&""===/./[fe]("a","$0"),he=!f((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),pe=function(t){return function(e,n){var r,o,i=String(b(e)),a=ht(n),s=i.length;return a<0||a>=s?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},ve={codeAt:pe(!1),charAt:pe(!0)}.charAt,ge=function(t,e,n){return e+(n?ve(t,e).length:1)},me=function(t){return Object(b(t))},ye=Math.floor,_e="".replace,xe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,be=/\$([$&'`]|\d{1,2})/g,we=function(t,e,n,r,o,i){var a=n+t.length,s=r.length,c=be;return void 0!==o&&(o=me(o),c=xe),_e.call(i,c,(function(i,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=o[c.slice(1,-1)];break;default:var l=+c;if(0===l)return i;if(l>s){var f=ye(l/10);return 0===f?i:f<=s?void 0===r[f-1]?c.charAt(1):r[f-1]+c.charAt(1):i}u=r[l-1]}return void 0===u?"":u}))},Ce=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==y(t))throw TypeError("RegExp#exec called on incompatible receiver");return Qt.call(t,e)},Se=Math.max,Ae=Math.min;!function(t,e,n,r){var o=se(t),i=!f((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!f((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[ce]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||"replace"===t&&(!ue||!le||de)||"split"===t&&!he){var s=/./[o],c=n(o,""[t],(function(t,e,n,r,o){return e.exec===Qt?i&&!o?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:le,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:de}),u=c[0],l=c[1];st(String.prototype,t,u),st(RegExp.prototype,o,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}r&&M(RegExp.prototype[o],"sham",!0)}("replace",2,(function(t,e,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(n,r){var o=b(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(a)){var s=n(e,t,this,r);if(s.done)return s.value}var c=U(t),u=String(this),l="function"==typeof r;l||(r=String(r));var f=c.global;if(f){var d=c.unicode;c.lastIndex=0}for(var h=[];;){var p=Ce(c,u);if(null===p)break;if(h.push(p),!f)break;""===String(p[0])&&(c.lastIndex=ge(u,vt(c.lastIndex),d))}for(var v,g="",m=0,y=0;y<h.length;y++){p=h[y];for(var _=String(p[0]),x=Se(Ae(ht(p.index),u.length),0),b=[],w=1;w<p.length;w++)b.push(void 0===(v=p[w])?v:String(v));var C=p.groups;if(l){var S=[_].concat(b,x,u);void 0!==C&&S.push(C);var A=String(r.apply(void 0,S))}else A=we(_,u,x,b,C,r);x>=m&&(g+=u.slice(m,x)+A,m=x+_.length)}return g+u.slice(m)}]}));var Oe=function(){if(function(t,e,n){if(!/Version\/.* Safari\//.test(t)||/Chrom(e|ium)/.test(t))return!1;var r=t.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return r&&r[1]===String(e)&&r[2]===String(n)}(navigator.userAgent,10,14)||function(t,e){var n=t.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return n&&n[1]===String(e)}(navigator.userAgent,12))return"";var t,e;return document.cookie="_s_test=1;path=/;SameSite=None;Secure",t="_s_test",((e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0)?(document.cookie="_s_test=1;path=/;max-age=-1;SameSite=None;Secure",";SameSite=None;Secure"):""};function Ee(t,e,n){if(void 0!==e){let r;return n=n||{},null===e&&(e="",n.expires=-1),e+="",document.cookie=`${t}=${"s"===t?e:encodeURIComponent(e)}${n.expires&&(r="number"==typeof n.expires&&new Date(Date.now()+864e5*n.expires))&&`; expires=${r.toUTCString()}`||""}${n.path?`; path=${n.path}`:""}${n.domain?`; domain=${n.domain}`:""}${n.samesite?`; SameSite=${n.samesite}`:""}${n.secure?"; secure":""}`,e}if(""!==(document.cookie||"")){if(e=(document.cookie.match(new RegExp(`(?:^|; ?)${t}\\=(\\S*?)(?:; ?|$)`))||[])[1],"s"!==t&&e)try{e=decodeURIComponent(e)}catch(t){}return void 0===e?void 0:e}}const ke=/(^|\.)devmail\.ru$/.test(window.location.hostname),Te=".devmail.ru",je={_S_cookie_set_get_remove(t,e,n,r){const o=Ee;let i,a;const s=new RegExp(`(^|\\|)(${n}=)(.*?)(\\||$)`),c=Object.assign({domain:e,expires:365,path:"/"},";SameSite=None;Secure"===Oe()&&{samesite:"None",secure:!0});if(n){i=o(t)||"",a=(i.match(s)||[])[3];let e=null;if(void 0!==r){let u;if(void 0!==a||null===r){let t;t=null===r?function(t,e,n,r,o,i,a){return 0===i?"":o}:`$1$2${r}$4`,e=i.replace(s,t),u=e}else u=i?`${i}|`:"",u=`${u+n}=${r}`;o(t,u,c),""===e&&o(t,null,c)}else r=a;return r}},_throw_noValue_Error(){throw new Error("need value")},__prefix:null,__domain:ke?Te:".mail.ru",setProject(t,e){if(!t||!e)throw new Error("project is not valid");"."!==e.substr(0,1)&&(e=`.${e}`),je.__prefix=t,ke&&(e=e.replace(/.[a-z0-9\-]*.[a-z0-9]*$/,Te)),je.__domain=e},_getPrefix(t){if(t||(t={}),t.prefix=t.prefix||je.__prefix,t.domain=t.domain||je.__domain,!t.prefix||!t.domain)throw new Error("run setProject before");return t},getGlobal:t=>je._S_cookie_set_get_remove("s",je.__domain,t),setGlobal:(t,e)=>(void 0===e&&je._throw_noValue_Error(),je._S_cookie_set_get_remove("s",je.__domain,t,e),je.getGlobal(t)),removeGlobal(t){const e=je.getGlobal(t);return je._S_cookie_set_get_remove("s",je.__domain,t,null),e},getLocal:(t,e)=>(e=je._getPrefix(e),je._S_cookie_set_get_remove(`s_${e.prefix}`,e.domain,t)),setLocal:(t,e,n)=>(n=je._getPrefix(n),void 0===e&&je._throw_noValue_Error(),je._S_cookie_set_get_remove(`s_${n.prefix}`,n.domain,t,e),je.getLocal(t,n)),removeLocal(t,e){e=je._getPrefix(e);const n=je.getLocal(t,e);return je._S_cookie_set_get_remove(`s_${e.prefix}`,e.domain,t,null),n}};var Ie=(t,e=!1)=>{const n=document.createElement("script"),r=document.querySelector("head");function o(){r.appendChild(n)}return e&&(n.defer=!0,n.async=!0),n.src=t,"opera"in window&&"complete"!==document.readyState?window.addEventListener("DOMContentLoaded",o):o(),n};function Pe(){return window.devicePixelRatio}var Ue,Le=Object.keys||function(t){return xt(t,bt)},Re=d?Object.defineProperties:function(t,e){U(t);for(var n,r=Le(e),o=r.length,i=0;o>i;)R.f(t,n=r[i++],e[n]);return t},Me=lt("document","documentElement"),De=Y("IE_PROTO"),Ne=function(){},$e=function(t){return"<script>"+t+"</"+"script>"},Fe=function(){try{Ue=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Fe=Ue?function(t){t.write($e("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ue):((e=T("iframe")).style.display="none",Me.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write($e("document.F=Object")),t.close(),t.F);for(var n=bt.length;n--;)delete Fe.prototype[bt[n]];return Fe()};Z[De]=!0;var Ve=Object.create||function(t,e){var n;return null!==t?(Ne.prototype=U(t),n=new Ne,Ne.prototype=null,n[De]=t):n=Fe(),void 0===e?n:Re(n,e)},Ge=se("unscopables"),Ke=Array.prototype;null==Ke[Ge]&&R.f(Ke,Ge,{configurable:!0,value:Ve(null)});var Be,He,ze,Qe=function(t){Ke[Ge][t]=!0},Je={},qe=!f((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),We=Y("IE_PROTO"),Xe=Object.prototype,Ye=qe?Object.getPrototypeOf:function(t){return t=me(t),O(t,We)?t[We]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xe:null},Ze=se("iterator"),tn=!1;[].keys&&("next"in(ze=[].keys())?(He=Ye(Ye(ze)))!==Object.prototype&&(Be=He):tn=!0),(null==Be||f((function(){var t={};return Be[Ze].call(t)!==t})))&&(Be={}),O(Be,Ze)||M(Be,Ze,(function(){return this}));var en={IteratorPrototype:Be,BUGGY_SAFARI_ITERATORS:tn},nn=R.f,rn=se("toStringTag"),on=function(t,e,n){t&&!O(t=n?t:t.prototype,rn)&&nn(t,rn,{configurable:!0,value:e})},an=en.IteratorPrototype,sn=function(){return this},cn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return U(n),function(t){if(!C(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),un=en.IteratorPrototype,ln=en.BUGGY_SAFARI_ITERATORS,fn=se("iterator"),dn="keys",hn="values",pn="entries",vn=function(){return this},gn="Array Iterator",mn=at.set,yn=at.getterFor(gn),_n=function(t,e,n,r,o,i,a){!function(t,e,n){var r=e+" Iterator";t.prototype=Ve(an,{next:g(1,n)}),on(t,r,!1),Je[r]=sn}(n,e,r);var s,c,u,l=function(t){if(t===o&&v)return v;if(!ln&&t in h)return h[t];switch(t){case dn:case hn:case pn:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",d=!1,h=t.prototype,p=h[fn]||h["@@iterator"]||o&&h[o],v=!ln&&p||l(o),m="Array"==e&&h.entries||p;if(m&&(s=Ye(m.call(new t)),un!==Object.prototype&&s.next&&(Ye(s)!==un&&(cn?cn(s,un):"function"!=typeof s[fn]&&M(s,fn,vn)),on(s,f,!0))),o==hn&&p&&p.name!==hn&&(d=!0,v=function(){return p.call(this)}),h[fn]!==v&&M(h,fn,v),Je[e]=v,o)if(c={values:l(hn),keys:i?v:l(dn),entries:l(pn)},a)for(u in c)(ln||d||!(u in h))&&st(h,u,c[u]);else Rt({target:e,proto:!0,forced:ln||d},c);return c}(Array,"Array",(function(t,e){mn(this,{type:gn,target:w(t),index:0,kind:e})}),(function(){var t=yn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Je.Arguments=Je.Array,Qe("keys"),Qe("values"),Qe("entries");var xn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},bn=se("iterator"),wn=se("toStringTag"),Cn=_n.values;for(var Sn in xn){var An=l[Sn],On=An&&An.prototype;if(On){if(On[bn]!==Cn)try{M(On,bn,Cn)}catch(t){On[bn]=Cn}if(On[wn]||M(On,wn,Sn),xn[Sn])for(var En in _n)if(On[En]!==_n[En])try{M(On,En,_n[En])}catch(t){On[En]=_n[En]}}}const kn=()=>{};class Tn{constructor(){this._events=new Map,this._oneTimeEvents=new Map}getListenersNumber(t){return[...this._events.get(t)||[],...this._oneTimeEvents.get(t)||[]].length}on(t,e){const n=[...this._events.get(t)||[],e];return this._events.set(t,n),this}removeListener(t,e){const n=(this._events.get(t)||[]).filter((t=>t!==e));return this._events.set(t,n),this}once(t,e){const n=[...this._oneTimeEvents.get(t)||[],e];return this._oneTimeEvents.set(t,n),this}emit(t,e,n){const r=e||kn;(this._events.get(t)||[]).forEach((t=>t({data:n},r)));return(this._oneTimeEvents.get(t)||[]).forEach((t=>t({data:n},r))),this._oneTimeEvents.delete(t),this}}class jn extends Tn{constructor(t){if(super(),t.authGate){const e=t.authGateVersion||"https://img.imgsmail.ru/ag/2.8.0/authGate.js",n=Ie(e),r={allow_external:t.enableExtDomains,vk:t.social.vk?1:null,ok:t.social.ok?1:null,fb:t.social.fb?1:null,mobile_redirect:!!t.authGateMobileRedirect,app_id_mytracker:t.appIdMytracker};t.authGateSuccessRedirectUrl&&(r.success_redirect=t.authGateSuccessRedirectUrl),n.addEventListener("load",(()=>{var t;return null===(t=window.__AG)||void 0===t?void 0:t.setSettings(r)}))}}show(t={from:"navi"}){var e;if(t){const{preview:e}=function(t){const e=new URLSearchParams(t),n={};return e.forEach(((t,e)=>{n[e]=t})),n}(window.location.search);if(e&&(t.preview=e),!t.type)switch(t.formType){case"login":t.type="login";break;case"relogin":t.type="choice"}!t.success_redirect&&t.successPage&&(t.success_redirect=t.successPage)}this.emit(i.Show),null===(e=window.__AG)||void 0===e||e.show(t)}hide(){var t;this.emit(i.Hide),null===(t=window.__AG)||void 0===t||t.hide()}isVisible(){return!!window.__AG&&window.__AG.isVisible()}}class In extends Tn{constructor(t){super(),this._phAuthForm=t}show(){this._phAuthForm.hide(),this.emit(o.Show)}hide(){this.emit(o.Hide)}}class Pn extends Tn{show(t){this.emit(a.Show,null,t)}hide(){this.emit(a.Hide)}}const Un=()=>window.__PHS;var Ln=l.Promise,Rn=se("species"),Mn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Dn=se("iterator"),Nn=Array.prototype,$n=function(t,e,n){if(Mn(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Fn={};Fn[se("toStringTag")]="z";var Vn="[object z]"===String(Fn),Gn=se("toStringTag"),Kn="Arguments"==y(function(){return arguments}()),Bn=Vn?y:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Gn))?n:Kn?y(e):"Object"==(r=y(e))&&"function"==typeof e.callee?"Arguments":r},Hn=se("iterator"),zn=function(t){var e=t.return;if(void 0!==e)return U(e.call(t)).value},Qn=function(t,e){this.stopped=t,this.result=e},Jn=function(t,e,n){var r,o,i,a,s,c,u,l,f=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=$n(e,f,1+d+p),g=function(t){return r&&zn(r),new Qn(!0,t)},m=function(t){return d?(U(t),p?v(t[0],t[1],g):v(t[0],t[1])):p?v(t,g):v(t)};if(h)r=t;else{if("function"!=typeof(o=function(t){if(null!=t)return t[Hn]||t["@@iterator"]||Je[Bn(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(l=o)&&(Je.Array===l||Nn[Dn]===l)){for(i=0,a=vt(t.length);a>i;i++)if((s=m(t[i]))&&s instanceof Qn)return s;return new Qn(!1)}r=o.call(t)}for(c=r.next;!(u=c.call(r)).done;){try{s=m(u.value)}catch(t){throw zn(r),t}if("object"==typeof s&&s&&s instanceof Qn)return s}return new Qn(!1)},qn=se("iterator"),Wn=!1;try{var Xn=0,Yn={next:function(){return{done:!!Xn++}},return:function(){Wn=!0}};Yn[qn]=function(){return this},Array.from(Yn,(function(){throw 2}))}catch(t){}var Zn,tr,er,nr=se("species"),rr=/(iphone|ipod|ipad).*applewebkit/i.test(Xt),or=l.location,ir=l.setImmediate,ar=l.clearImmediate,sr=l.process,cr=l.MessageChannel,ur=l.Dispatch,lr=0,fr={},dr="onreadystatechange",hr=function(t){if(fr.hasOwnProperty(t)){var e=fr[t];delete fr[t],e()}},pr=function(t){return function(){hr(t)}},vr=function(t){hr(t.data)},gr=function(t){l.postMessage(t+"",or.protocol+"//"+or.host)};ir&&ar||(ir=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return fr[++lr]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Zn(lr),lr},ar=function(t){delete fr[t]},Wt?Zn=function(t){sr.nextTick(pr(t))}:ur&&ur.now?Zn=function(t){ur.now(pr(t))}:cr&&!rr?(er=(tr=new cr).port2,tr.port1.onmessage=vr,Zn=$n(er.postMessage,er,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts&&or&&"file:"!==or.protocol&&!f(gr)?(Zn=gr,l.addEventListener("message",vr,!1)):Zn=dr in T("script")?function(t){Me.appendChild(T("script")).onreadystatechange=function(){Me.removeChild(this),hr(t)}}:function(t){setTimeout(pr(t),0)});var mr,yr,_r,xr,br,wr,Cr,Sr,Ar={set:ir,clear:ar},Or=/web0s(?!.*chrome)/i.test(Xt),Er=P.f,kr=Ar.set,Tr=l.MutationObserver||l.WebKitMutationObserver,jr=l.document,Ir=l.process,Pr=l.Promise,Ur=Er(l,"queueMicrotask"),Lr=Ur&&Ur.value;Lr||(mr=function(){var t,e;for(Wt&&(t=Ir.domain)&&t.exit();yr;){e=yr.fn,yr=yr.next;try{e()}catch(t){throw yr?xr():_r=void 0,t}}_r=void 0,t&&t.enter()},rr||Wt||Or||!Tr||!jr?Pr&&Pr.resolve?(Cr=Pr.resolve(void 0),Sr=Cr.then,xr=function(){Sr.call(Cr,mr)}):xr=Wt?function(){Ir.nextTick(mr)}:function(){kr.call(l,mr)}:(br=!0,wr=jr.createTextNode(""),new Tr(mr).observe(wr,{characterData:!0}),xr=function(){wr.data=br=!br}));var Rr,Mr,Dr,Nr,$r=Lr||function(t){var e={fn:t,next:void 0};_r&&(_r.next=e),yr||(yr=e,xr()),_r=e},Fr=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Mn(e),this.reject=Mn(n)},Vr={f:function(t){return new Fr(t)}},Gr=function(t,e){if(U(t),C(e)&&e.constructor===t)return e;var n=Vr.f(t);return(0,n.resolve)(e),n.promise},Kr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Br=Ar.set,Hr=se("species"),zr="Promise",Qr=at.get,Jr=at.set,qr=at.getterFor(zr),Wr=Ln,Xr=l.TypeError,Yr=l.document,Zr=l.process,to=lt("fetch"),eo=Vr.f,no=eo,ro=!!(Yr&&Yr.createEvent&&l.dispatchEvent),oo="function"==typeof PromiseRejectionEvent,io="unhandledrejection",ao=Ut(zr,(function(){if(!(B(Wr)!==String(Wr))){if(66===ee)return!0;if(!Wt&&!oo)return!0}if(ee>=51&&/native code/.test(Wr))return!1;var t=Wr.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Hr]=e,!(t.then((function(){}))instanceof e)})),so=ao||!function(t,e){if(!e&&!Wn)return!1;var n=!1;try{var r={};r[qn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Wr.all(t).catch((function(){}))})),co=function(t){var e;return!(!C(t)||"function"!=typeof(e=t.then))&&e},uo=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;$r((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,s,c,u=n[i++],l=o?u.ok:u.fail,f=u.resolve,d=u.reject,h=u.domain;try{l?(o||(2===t.rejection&&po(t),t.rejection=1),!0===l?a=r:(h&&h.enter(),a=l(r),h&&(h.exit(),c=!0)),a===u.promise?d(Xr("Promise-chain cycle")):(s=co(a))?s.call(a,f,d):f(a)):d(r)}catch(t){h&&!c&&h.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&fo(t)}))}},lo=function(t,e,n){var r,o;ro?((r=Yr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:n},!oo&&(o=l["on"+t])?o(r):t===io&&function(t,e){var n=l.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},fo=function(t){Br.call(l,(function(){var e,n=t.facade,r=t.value;if(ho(t)&&(e=Kr((function(){Wt?Zr.emit("unhandledRejection",r,n):lo(io,n,r)})),t.rejection=Wt||ho(t)?2:1,e.error))throw e.value}))},ho=function(t){return 1!==t.rejection&&!t.parent},po=function(t){Br.call(l,(function(){var e=t.facade;Wt?Zr.emit("rejectionHandled",e):lo("rejectionhandled",e,t.value)}))},vo=function(t,e,n){return function(r){t(e,r,n)}},go=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,uo(t,!0))},mo=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Xr("Promise can't be resolved itself");var r=co(e);r?$r((function(){var n={done:!1};try{r.call(e,vo(mo,n,t),vo(go,n,t))}catch(e){go(n,e,t)}})):(t.value=e,t.state=1,uo(t,!1))}catch(e){go({done:!1},e,t)}}};ao&&(Wr=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Wr,zr),Mn(t),Rr.call(this);var e=Qr(this);try{t(vo(mo,e),vo(go,e))}catch(t){go(e,t)}},(Rr=function(t){Jr(this,{type:zr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)st(t,r,e[r],n);return t}(Wr.prototype,{then:function(t,e){var n,r,o,i=qr(this),a=eo((n=Wr,void 0===(o=U(this).constructor)||null==(r=U(o)[nr])?n:Mn(r)));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=Wt?Zr.domain:void 0,i.parent=!0,i.reactions.push(a),0!=i.state&&uo(i,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),Mr=function(){var t=new Rr,e=Qr(t);this.promise=t,this.resolve=vo(mo,e),this.reject=vo(go,e)},Vr.f=eo=function(t){return t===Wr||t===Dr?new Mr(t):no(t)},"function"==typeof Ln&&(Nr=Ln.prototype.then,st(Ln.prototype,"then",(function(t,e){var n=this;return new Wr((function(t,e){Nr.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof to&&Rt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Gr(Wr,to.apply(l,arguments))}}))),Rt({global:!0,wrap:!0,forced:ao},{Promise:Wr}),on(Wr,zr,!1),function(t){var e=lt(t),n=R.f;d&&e&&!e[Rn]&&n(e,Rn,{configurable:!0,get:function(){return this}})}(zr),Dr=lt(zr),Rt({target:zr,stat:!0,forced:ao},{reject:function(t){var e=eo(this);return e.reject.call(void 0,t),e.promise}}),Rt({target:zr,stat:!0,forced:ao},{resolve:function(t){return Gr(this,t)}}),Rt({target:zr,stat:!0,forced:so},{all:function(t){var e=this,n=eo(e),r=n.resolve,o=n.reject,i=Kr((function(){var n=Mn(e.resolve),i=[],a=0,s=1;Jn(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=eo(e),r=n.reject,o=Kr((function(){var o=Mn(e.resolve);Jn(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var yo=function(t){return function(e,n,r,o){Mn(n);var i=me(e),a=x(i),s=vt(i.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(o=n(o,a[c],c,i));return o}},_o={left:yo(!1),right:yo(!0)},xo=function(t,e){var n=[][t];return!!n&&f((function(){n.call(null,e||function(){throw 1},1)}))},bo=_o.left,wo=xo("reduce");Rt({target:"Array",proto:!0,forced:!wo||!Wt&&ee>79&&ee<83},{reduce:function(t){return bo(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Co=function(){return(Co=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},So=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},Ao=function(t,e,n){if(void 0===n&&(n=!1),!t||!e||"object"!=typeof t||"object"!=typeof e)return t;var r=Co({},t);for(var o in e)e.hasOwnProperty(o)&&(e[o]instanceof Array&&t[o]instanceof Array?r[o]=n?So(t[o],e[o]):e[o]:"object"==typeof e[o]&&"object"==typeof t[o]?r[o]=Ao(t[o],e[o],n):r[o]=e[o]);return r},Oo=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},Eo={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,performance:null,PerformanceObserver:null,AbortController:null},polyfill:function(t,e){for(var n=void 0===e?{}:e,r=n.doThrow,o=void 0===r||r,i=n.instance,a=void 0!==i&&i,s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];var u=this.polyfills[t]||("undefined"!=typeof self?self[t]:null)||("undefined"!=typeof global?global[t]:null);if(o&&!u)throw new Error(t+" is not defined");return a&&u?new(u.bind.apply(u,Oo([void 0],s))):u}},ko=function(t,e,n,r){if(!t.getEntriesByName)return!1;var o=t.getEntriesByName(e);return!!(o&&o.length>0)&&(n(o.reverse()[0]),r.clearMeasures&&r.clearMeasures(e),To.callbacks.delete(e),To.callbacks.size<1&&(To.observer.disconnect(),r.clearResourceTimings&&r.clearResourceTimings()),!0)},To={callbacks:new Map,observer:null,observe:function(t,e){if(t&&e){var n=Eo.polyfill("performance",{doThrow:!1});(function(t,e){return!To.observer&&t&&e&&(To.observer=new e((function(e){To.callbacks.forEach((function(n,r){ko(e,r,n,t)}))})),t.clearResourceTimings&&t.clearResourceTimings()),To.observer})(n,Eo.polyfill("PerformanceObserver",{doThrow:!1}))&&(ko(n,t,e,n)||(To.callbacks.size<1&&To.observer.observe({entryTypes:["resource","measure"]}),To.callbacks.set(t,e)))}}},jo=_o.right,Io=xo("reduceRight");Rt({target:"Array",proto:!0,forced:!Io||!Wt&&ee>79&&ee<83},{reduceRight:function(t){return jo(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Po=function(t){this.error=t},Uo=function(){return(Uo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Lo=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},Ro="application/json",Mo="Content-Type",Do=function(){function t(t,e,n,r,o,i){void 0===n&&(n=new Map),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===i&&(i=[]),this._url=t,this._options=e,this._catchers=n,this._resolvers=r,this._middlewares=o,this._deferredChain=i}return t.factory=function(e,n){return void 0===e&&(e=""),void 0===n&&(n={}),new t(e,n)},t.prototype.selfFactory=function(e){var n=void 0===e?{}:e,r=n.url,o=void 0===r?this._url:r,i=n.options,a=void 0===i?this._options:i,s=n.catchers,c=void 0===s?this._catchers:s,u=n.resolvers,l=void 0===u?this._resolvers:u,f=n.middlewares,d=void 0===f?this._middlewares:f,h=n.deferredChain,p=void 0===h?this._deferredChain:h;return new t(o,Uo({},a),new Map(c),Lo(l),Lo(d),Lo(p))},t.prototype.defaults=function(t,e){return void 0===e&&(e=!1),Eo.defaults=e?Ao(Eo.defaults,t):t,this},t.prototype.errorType=function(t){return Eo.errorType=t,this},t.prototype.polyfills=function(t){return Eo.polyfills=Uo(Uo({},Eo.polyfills),t),this},t.prototype.url=function(t,e){if(void 0===e&&(e=!1),e)return this.selfFactory({url:t});var n=this._url.split("?");return this.selfFactory({url:n.length>1?n[0]+t+"?"+n[1]:this._url+t})},t.prototype.options=function(t,e){return void 0===e&&(e=!0),this.selfFactory({options:e?Ao(this._options,t):t})},t.prototype.query=function(t,e){return void 0===e&&(e=!1),this.selfFactory({url:No(this._url,t,e)})},t.prototype.headers=function(t){return this.selfFactory({options:Ao(this._options,{headers:t||{}})})},t.prototype.accept=function(t){return this.headers({Accept:t})},t.prototype.content=function(t){var e;return this.headers(((e={})["Content-Type"]=t,e))},t.prototype.auth=function(t){return this.headers({Authorization:t})},t.prototype.catcher=function(t,e){var n=new Map(this._catchers);return n.set(t,e),this.selfFactory({catchers:n})},t.prototype.signal=function(t){return this.selfFactory({options:Uo(Uo({},this._options),{signal:t.signal})})},t.prototype.resolve=function(t,e){return void 0===e&&(e=!1),this.selfFactory({resolvers:e?[t]:Lo(this._resolvers,[t])})},t.prototype.defer=function(t,e){return void 0===e&&(e=!1),this.selfFactory({deferredChain:e?[t]:Lo(this._deferredChain,[t])})},t.prototype.middlewares=function(t,e){return void 0===e&&(e=!1),this.selfFactory({middlewares:e?t:Lo(this._middlewares,t)})},t.prototype.method=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=this._options.headers,o=n?"object"!=typeof n||r&&!Object.entries(r).every((function(t){var e=t[0],n=t[1];return e.toLowerCase()!==Mo.toLowerCase()||n.startsWith(Ro)}))?this.body(n):this.json(n):this;return function(t){var e=t._url,n=t._catchers,r=t._resolvers,o=t._middlewares,i=t._options,a=new Map(n),s=Ao(Eo.defaults,i),c=Eo.polyfill("AbortController",{doThrow:!1,instance:!0});!s.signal&&c&&(s.signal=c.signal);var u={ref:null,clear:function(){u.ref&&(clearTimeout(u.ref),u.ref=null)}},l=function(t){return function(e){return 0===t.length?e:1===t.length?t[0](e):t.reduceRight((function(n,r,o){return o===t.length-2?r(n(e)):r(n)}))}}(o)(Eo.polyfill("fetch"))(e,s),f=l.catch((function(t){throw new Po(t)})).then((function(t){return u.clear(),t.ok?t:t[Eo.errorType||"text"]().then((function(e){var n=new Error(e);throw n[Eo.errorType||"text"]=e,n.status=t.status,n.response=t,n}))})),d=function(e){return e.catch((function(e){u.clear();var n=e instanceof Po?e.error:e;if(e instanceof Po&&a.has("__fromFetch"))return a.get("__fromFetch")(n,t);if(a.has(n.status))return a.get(n.status)(n,t);if(a.has(n.name))return a.get(n.name)(n,t);throw n}))},h=function(t){return function(e){return d(t?f.then((function(e){return e&&e[t]()})).then((function(t){return e?e(t):t})):f.then((function(t){return e?e(t):t})))}},p={res:h(null),json:h("json"),blob:h("blob"),formData:h("formData"),arrayBuffer:h("arrayBuffer"),text:h("text"),perfs:function(t){return l.then((function(e){return To.observe(e.url,t)})),p},setTimeout:function(t,e){return void 0===e&&(e=c),u.clear(),u.ref=setTimeout((function(){return e.abort()}),t),p},controller:function(){return[c,p]},error:function(t,e){return a.set(t,e),p},badRequest:function(t){return p.error(400,t)},unauthorized:function(t){return p.error(401,t)},forbidden:function(t){return p.error(403,t)},notFound:function(t){return p.error(404,t)},timeout:function(t){return p.error(408,t)},internalError:function(t){return p.error(500,t)},fetchError:function(t){return p.error("__fromFetch",t)},onAbort:function(t){return p.error("AbortError",t)}};return r.reduce((function(e,n){return n(e,t)}),p)}((o=o.options(Uo(Uo({},e),{method:t})))._deferredChain.reduce((function(t,e){return e(t,t._url,t._options)}),o))},t.prototype.get=function(t){return this.method("GET",t)},t.prototype.delete=function(t){return this.method("DELETE",t)},t.prototype.put=function(t,e){return this.method("PUT",e,t)},t.prototype.post=function(t,e){return this.method("POST",e,t)},t.prototype.patch=function(t,e){return this.method("PATCH",e,t)},t.prototype.head=function(t){return this.method("HEAD",t)},t.prototype.opts=function(t){return this.method("OPTIONS",t)},t.prototype.replay=function(t){return this.method(this._options.method,t)},t.prototype.body=function(t){return this.selfFactory({options:Uo(Uo({},this._options),{body:t})})},t.prototype.json=function(t){var e,n=null===(e=Object.entries(this._options.headers||{}).find((function(t){var e=t[0],n=t[1];return e.toLowerCase()===Mo.toLowerCase()&&n.startsWith(Ro)})))||void 0===e?void 0:e[1];return this.content(n||Ro).body(JSON.stringify(t))},t.prototype.formData=function(t,e){return void 0===e&&(e=!1),this.body($o(t,e))},t.prototype.formUrl=function(t){return this.body("string"==typeof t?t:(e=t,Object.keys(e).map((function(t){var n=e[t];return n instanceof Array?n.map((function(e){return Fo(t,e)})).join("&"):Fo(t,n)})).join("&"))).content("application/x-www-form-urlencoded");var e},t}(),No=function(t,e,n){var r;if("string"==typeof e)r=e;else{var o=Eo.polyfill("URLSearchParams",{instance:!0});for(var i in e)if(e[i]instanceof Array)for(var a=0,s=e[i];a<s.length;a++){var c=s[a];o.append(i,c)}else o.append(i,e[i]);r=o.toString()}var u=t.split("?");return n||u.length<2?u[0]+"?"+r:t+"&"+r};function $o(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=Eo.polyfill("FormData",{instance:!0})),void 0===r&&(r=[]),Object.entries(t).forEach((function(t){var o=t[0],i=t[1],a=r.reduce((function(t,e){return t?t+"["+e+"]":e}),null);if(a=a?a+"["+o+"]":o,i instanceof Array)for(var s=0,c=i;s<c.length;s++){var u=c[s];n.append(a+"[]",u)}else!e||"object"!=typeof i||e instanceof Array&&e.includes(o)?n.append(a,i):null!==i&&$o(i,e,n,Lo(r,[o]))})),n}function Fo(t,e){return encodeURIComponent(t)+"="+encodeURIComponent("object"==typeof e?JSON.stringify(e):""+e)}var Vo=Do.factory;Vo.default=Do.factory;class Go{constructor(t){this.url=t,this.isCors=!0}get options(){return this.isCors?{credentials:"include",mode:"cors"}:null}get(t,e=""){return Vo().options(this.options).url(this.url+e).query(t).query({_:Math.random()}).get().fetchError(((t,e)=>{const n=`${t.message} in request to ${e._url}`;throw new Error(n)}))}getJson(t,e=""){return this.get(t,e).json()}post(t){return Vo(this.url).options(Object.assign(Object.assign({},this.options),{method:"post"})).formUrl(t).post()}}const Ko=t?"//portal.devmail.ru":"//portal.mail.ru",Bo=t?"//auth.devmail.ru":"//auth.mail.ru",Ho=`//ok.ru/mapi?query=${encodeURIComponent('{"cmd":"getCounters"}')}`;var zo;!function(t){t.OK="ok",t.NOAUTH="noauth"}(zo||(zo={}));const Qo={mac:1,Socials:1};var Jo,qo=new class extends Go{constructor(){super(Ko)}getInfo(e,n){let r=Object.assign(Object.assign(Object.assign({},Qo),{gamescnt:1}),n);return t&&(r=Object.assign(Object.assign({},r),{ldata:1})),e&&(r=Object.assign(Object.assign({},r),{Login:e})),this.getJson(r,"/NaviData")}getListInfo(t,e){let n=Object.assign(Object.assign(Object.assign({},Qo),{ldata:1}),e);return t&&(n=Object.assign(Object.assign({},n),{Login:t})),this.getJson(n,"/NaviData")}getDomains(t){return this.getJson(t,"/Domains")}};!function(t){t.OK="ok",t.NOAUTH="noauth"}(Jo||(Jo={}));class Wo extends Go{auth(t){const e={mac:1,Login:t};return this.getJson(e,"/cgi-bin/auth")}logout(t){const e={Login:t,mac:1};return this.getJson(e,"/cgi-bin/logout")}}class Xo{static convert(t){const e=t.data.ldata;return{status:t.status,accounts:t.data.list.map((n=>({email:n,active:t.data.email===n,firstName:e[n].first_name||"",lastName:e[n].last_name||"",socialId:Xo.getSocialId(n),verified:!!e[n].verified,counters:{mail:e[n].mail_cnt}})))}}static getSocialId(t){const e=t.match(/^[0-9]+@(vk|ok|fb)$/);return e&&e[1]}}var Yo=R.f,Zo=l.Symbol;if(d&&"function"==typeof Zo&&(!("description"in Zo.prototype)||void 0!==Zo().description)){var ti={},ei=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof ei?new Zo(t):void 0===t?Zo():Zo(t);return""===t&&(ti[e]=!0),e};Ot(ei,Zo);var ni=ei.prototype=Zo.prototype;ni.constructor=ei;var ri=ni.toString,oi="Symbol(test)"==String(Zo("test")),ii=/^Symbol\((.*)\)[^)]+$/;Yo(ni,"description",{configurable:!0,get:function(){var t=C(this)?this.valueOf():this,e=ri.call(t);if(O(ti,t))return"";var n=oi?e.slice(7,-1):e.replace(ii,"$1");return""===n?void 0:n}}),Rt({global:!0,forced:!0},{Symbol:ei})}var ai=[],si=ai.sort,ci=f((function(){ai.sort(void 0)})),ui=f((function(){ai.sort(null)})),li=xo("sort");Rt({target:"Array",proto:!0,forced:ci||!ui||!li},{sort:function(t){return void 0===t?si.call(me(this)):si.call(me(this),Mn(t))}});var fi=[],di={maxSize:500,getLog:function(){return Array.prototype.slice.call(fi,0)},clear:function(){fi=[]}};var hi={log:function(){try{(console.debug||console.log).apply(console,arguments)}catch(t){}},error:function(){try{console.error.apply(console,arguments)}catch(t){}},warn:function(){try{console.warn.apply(console,arguments)}catch(t){}}};function pi(t){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t){return t&&"object"===pi(t)&&!gi(t)}function gi(t){return"[object Array]"===Object.prototype.toString.call(t)}function mi(){for(var t={},e=0;e<arguments.length;++e){var n=arguments[e];for(var r in n)t[r]&&vi(t[r])&&vi(n[r])?t[r]=mi(t[r],n[r]):t[r]=n[r]}return t}var yi=["p","email","split","utm","r","pgid","o_ss","o_v"],_i=!1;function xi(){this._batchesByUrls={},this._timeoutId=null,this._config={maxBatchSize:6e4,maxChunkSize:4e3,timeout:1e3,idle:!1},"undefined"!=typeof window&&window.addEventListener("beforeunload",this.process.bind(this,!0))}function bi(t){return"s".concat(t,"s").replace(/s+/g,"s").replace(/^s$/g,"")}function wi(t){for(var e in t)void 0!==t[e]&&null!==t[e]||delete t[e];return t}function Ci(t,e){for(var n=-1,r=0;r<t.length;r++)if(e===t[r]){n=r;break}return n}xi.prototype.setConfig=function(t){if(!_i)return t.timeout=Math.max(1e3,t.timeout||0),this._config=mi(this._config,t),void(_i=!0);var e=[];for(var n in t)n in this._config?e.push(n):this._config[n]=t[n];e.length&&hi.warn("Queue config field(s) "+e.join(", ")+" are already set and can't be modified")},xi.prototype.getConfig=function(){return mi(this._config,{})},xi.prototype.push=function(t,e){!function(t){for(fi.push(t);fi.length>di.maxSize;)fi.shift()}(e);var n=t+"/batch?"+xi._buildQueryString(e);e=xi._stringifyParams(e);var r=JSON.stringify(e);if(r.length+2>this._config.maxBatchSize)hi.error("Radar #"+e.uid+" body is too long: "+r);else{this._batchesByUrls[n]||(this._batchesByUrls[n]=[[]]);var o,i=this._batchesByUrls[n];for(o=0;o<i.length;++o){var a=i[o];if(JSON.stringify(a.concat([e])).length<=this._config.maxBatchSize){a.push(e);break}}o===i.length&&i.push([e]),this._timeoutId||"function"!=typeof setTimeout||(this._timeoutId=setTimeout(this.process.bind(this),this._config.timeout))}},xi.prototype.process=function(t){for(var e in clearTimeout(this._timeoutId),this._timeoutId=null,this._batchesByUrls){for(var n=this._batchesByUrls[e],r=0;r<n.length;++r)this._send(e,n[r],t);delete this._batchesByUrls[e]}},xi.prototype.isIdle=function(){return this._config.idle},xi._buildQueryString=function(t){for(var e=[],n=0;n<yi.length;++n){var r=yi[n],o="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);delete t[r],void 0!==o&&o.length&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}var i=[];for(var a in t.baseQuery)i.push(a);i=i.sort();for(var s=0;s<i.length;++s){var c=i[s];e.push(encodeURIComponent(c)+"="+encodeURIComponent(t.baseQuery[c]))}return delete t.baseQuery,e.join("&")},xi.prototype._send=function(t,e,n){var r={url:t,data:"batch="+encodeURIComponent(JSON.stringify(e)),type:"POST",async:!0};if(!this._config.idle)if(n&&window.navigator.sendBeacon)window.navigator.sendBeacon(r.url,r.data);else{var o=new XMLHttpRequest;"function"==typeof this._config.beforeSend&&!this._config.beforeSend(o,r)?o.abort():(o.open(r.type,r.url,r.async),o.withCredentials=!0,o.send(r.data))}},xi._stringifyParams=function(t){var e={};for(var n in t)"i"!==n?e[n]="string"==typeof t[n]?t[n]:JSON.stringify(t[n]):e.i=xi._stringifyI(t.i);return e},xi._stringifyI=function(t){var e=[];for(var n in t){var r=t[n];e.push(n+":"+r)}return e.join(",")};var Si=0,Ai=["radarPrefix","split","r","pgid","utm","o_ss","o_v"],Oi=!1,Ei=new xi,ki="xray_rlog_dot_error",Ti="xray_rlog_msg_abs",ji="xray_too_long",Ii="xray_not_configured",Pi="xray_send_dwh-with-skipdwh";function Ui(){this._config={xrayRadarUrl:"https://xray.mail.ru",pgid:(Date.now()+Math.random()).toString(36),radarPrefix:"",r:"undefined"!=typeof document&&document.referrer||"",defaultParams:{p:"mail",t_feature:"",v:1,skipdwh:!1}}}Ui.prototype.logger=di,Ui.prototype.setConfig=function(t,e){if((t=t||{}).split&&(t.split=bi(t.split)),Oi)for(var n=0;n<Ai.length;++n)delete t[Ai[n]];Oi=!0,t.defaultParams&&t.defaultParams.i&&(t.defaultParams.i=this._formatIntervals(t.defaultParams.i),delete this._config.defaultParams.i),this._config=e?t:mi(this._config,t),t.gaTrackingId&&this._initGA(t.gaTrackingId)},Ui.prototype.addSplit=function(t){this._config.split=bi("".concat(this._config.split||"","s").concat(t))},Ui.prototype.getConfig=function(){return mi(this._config,{})},Ui.prototype.getTotalSended=function(){return Si},Ui.prototype.setQueueConfig=xi.prototype.setConfig.bind(Ei),Ui.prototype.getQueueConfig=xi.prototype.getConfig.bind(Ei),Ui.prototype.getInstanceCopy=function(){var t=new Ui;return Oi=!1,t.setConfig(this._config,!0),t},Ui.prototype.send=function(t,e,n){this._send(t,e,n,!0)},Ui.prototype._send=function(t,e,n,r){if(r&&!Oi&&t!==Ii){var o=e||{};o.t=t,this._logOwnError(o,Ii),hi.warn("Your xray instance is not configured")}if(e=mi(e||{},{}),this._config.middlewares)for(var i=0;i<this._config.middlewares.length;i++){var a=(0,this._config.middlewares[i])(t,e,n);t=a.t,e=a.params,n=a.ga}t=gi(t)?t.join("_"):t,e.i&&(e.i=this._formatIntervals(e.i)),e=mi(this._config.defaultParams,e,{t:t,split:this._config.split,r:this._config.r,pgid:this._config.pgid,utm:this._config.utm,o_ss:this._config.o_ss,o_v:this._config.o_v,baseQuery:this._config.baseQuery,uid:Si++}),r&&e.skipdwh&&e.dwh&&this._logOwnError(e,Pi);for(var s=[e.t_feature,this._config.radarPrefix],c=0;c<s.length;++c)s[c]&&(e.t=s[c]+"_"+e.t);delete e.t_feature;try{e=this._validateParams(e,r)}catch(t){return hi.log("xray",e.uid,e),void hi.error(t.message)}if(this._config.verbose&&hi.log("xray",e.uid,e.t,e,n?"GA: "+!!n:void 0),Ei.push(this._config.xrayRadarUrl,e),!0!==n||this._config.gaTrackingId){var u="string"==typeof n?n:this._config.gaTrackingId;if(n&&u&&!Ei.isIdle()){if(e.i){for(var l in e.i)this._sendGA(t+"_"+l,e.i[l],u);return}this._sendGA(t,e.v,u)}}else hi.error("Radar #"+e.uid+": no GA tracking id specified")},Ui.prototype.sendImmediately=function(t,e,n){this.send(t,e,n),Ei.process()},Ui.prototype.addMiddleware=function(t){this._config.middlewares||(this._config.middlewares=[]),-1===Ci(this._config.middlewares,t)&&this._config.middlewares.push(t)},Ui.prototype.removeMiddleware=function(t){if(this._config.middlewares){var e=Ci(this._config.middlewares,t);e>-1&&this._config.middlewares.splice(e,1)}},Ui.prototype._sendGA=function(t,e,n){"function"!=typeof gtag&&this._initGA(n);var r=t.split(/_/g),o=r[1]||r[0],i=r[1]?r[0]:"",a=r.slice(2).join("_"),s={value:e,send_to:n};i&&(s.event_category=i),a&&(s.event_label=a),gtag("event",o,s)},Ui.prototype._initGA=function(t){if(!window.gtag){var e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id="+t,e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date)}gtag("config",t,{send_page_view:!1})},Ui.prototype._logOwnError=function(t,e,n){var r="xray_err",o=r,i=t.p;if(i){if(i.length+r.length+1>32){var a=32-r.length-1;i=i.slice(0,a)}o="".concat(i,"_").concat(r)}var s=t.t;s.length>64&&(s=s.slice(0,64)),this._send(e,{skipdwh:!0,rlog:o,rlog_message:{t:s,err:e,value:n}},!1,!1)},Ui.prototype._validateParams=function(t,e){(t=wi(t)).rlog&&-1!==t.rlog.indexOf(".")&&(e&&this._logOwnError(t,ki,t.rlog),hi.error("Radar #".concat(t.uid,": rlog can not contain file extension")),delete t.rlog,delete t.rlog_message),t.rlog&&t.rlog_message||(t.rlog_message&&(e&&this._logOwnError(t,Ti),hi.error("Radar #".concat(t.uid,": rlog_message would not be sent without rlog"))),delete t.rlog,delete t.rlog_message);var n={32:[t.p,t.rlog],64:[t.p+"_"+t.t]};for(var r in t.i)n[32].push(r),n[64].push(t.p+"_"+t.t+"_"+r);for(var o in n)for(var i=n[o],a=0;a<i.length;++a)if(i[a]&&i[a].length>o)throw e&&this._logOwnError(t,ji,i[a].slice(0,o)),new Error("Radar #".concat(t.uid,": value is too long: ").concat(n[o][a])+" (len: ".concat(i[a].length,", limit: ").concat(o,")"));return t},Ui.prototype._formatIntervals=function(t){if(vi(t))return t;var e={};if(gi(t)){for(var n=0;n<t.length;++n){var r=t[n].split(":");e[r[0]]=+r[1]||this._config.defaultParams.v}return e}if("string"==typeof t){var o=t.split(",");return this._formatIntervals(o)}};var Li,Ri,Mi,Di=new Ui;function Ni(t,e){for(var n=t.split("&"),r=n[0],o={},i=1;i<n.length;++i){var a=n[i].split("="),s=decodeURIComponent(a[0]),c=decodeURIComponent(a[1]);try{c=JSON.parse(c)}catch(t){}o[s]=c}(e=e||{}).immediately?Di.sendImmediately(r,o,e.ga):Di.send(r,o,e.ga)}Ni.setConfig=function(t){Di.setConfig(wi({verbose:t.verbose,pgid:t.pgid,split:t.split,xrayRadarUrl:t.xrayRadarUrl||t.XRAY_RADAR_URL,radarPrefix:t.radarPrefix||t.RadarPrefix,utm:t.utm,o_ss:t.o_ss,o_v:t.o_v,baseQuery:t.baseQuery,gaTrackingId:t.gaTrackingId||t.GA_TRACKING_ID,defaultParams:t.defaultParams||wi({p:t.project,email:t.ActiveEmail})})),Di.setQueueConfig(wi({maxBatchSize:t.MAX_BATCH_SIZE,maxChunkSize:t.MAX_CHUNK_SIZE,beforeSend:t.beforeSend,timeout:t.timeout,idle:t.idle}))},Ni.getConfig=Ui.prototype.getConfig.bind(Di),Ni.addSplit=Ui.prototype.addSplit.bind(Di),Ni.setQueueConfig=Ui.prototype.setQueueConfig.bind(Di),Ni.getQueueConfig=Ui.prototype.getQueueConfig.bind(Di),Ni.getTotalSended=Ui.prototype.getTotalSended.bind(Di),Ni.send=Ui.prototype.send.bind(Di),Ni.sendImmediately=Ui.prototype.sendImmediately.bind(Di),Ni.getInstanceCopy=Ui.prototype.getInstanceCopy.bind(Di),Ni.addMiddleware=Ui.prototype.addMiddleware.bind(Di),Ni.removeMiddleware=Ui.prototype.removeMiddleware.bind(Di),function(t){t[t.auto=42]="auto",t[t.cloud=182]="cloud",t[t.deti=129]="deti",t[t.dobro=190]="dobro",t[t.hitech=123]="hitech",t[t.home=169]="home",t[t.kino=30]="kino",t[t.lady=104]="lady",t[t.moymir=120]="moymir",t[t.news=29]="news",t[t.octavius=105]="octavius",t[t.realty=122]="realty",t[t.weather=112]="weather"}(Li||(Li={})),function(t){t.friends="friends",t.messages="messages",t.photos="photos",t.groups="groups",t.notifications="notifications"}(Ri||(Ri={})),function(t){t.markCnt="markCnt",t.messageCnt="messageCnt",t.notificationCnt="notificationCnt",t.messages="messages",t.friends="friends",t.presents="presents"}(Mi||(Mi={}));const $i=e=>{!t&&Ni.send(e,{value:1})};var Fi=new class extends Go{constructor(){super(Ho)}};class Vi{constructor({eventType:t,counterKeys:e},n,r){this.eventType=t,this.counterKeys=e,this.updateAccountCounter=n,this.eventEmitter=r}get value(){return this._value}updateValue(t){this._value=t}updateData(t){this.eventEmitter.emit(this.eventType,null,this.parseSocialData(t));const e=this.summarizeCounters(this.parseSocialData(t),this.counterKeys);this.value!==e&&this.updateValue(e)}summarizeCounters(t,e){return Object.entries(t).reduce(((t,[n,r])=>t+(e[n]?r:0)),0)}parseSocialData(t){return Object.entries(t).reduce(((t,[e,n])=>(t[e]=["number","string"].includes(typeof n)?n:n.count,t)),{})}getDataFromApi(){}}class Gi extends Vi{constructor(t,e){super({eventType:n.UpdateCounterOK,counterKeys:Mi},t,e)}getDataFromApi(){Fi.getJson().then((t=>{"no auth"===t.status?this.updateAccountCounter({ok:{}}):this.updateAccountCounter({ok:t.data||{}}),$i("ok_counter_success"),$i("social_counters_ok_success_api")})).catch((()=>{$i("ok_counter_error"),$i("social_counters_ok_error_api")}))}}var Ki=new class extends Go{constructor(){super("//vk.com/feed2.php")}};class Bi extends Vi{constructor(t,e){super({eventType:n.UpdateCounterVK,counterKeys:Ri},t,e)}getDataFromApi(){Ki.getJson({act:"widget"}).then((t=>{var e;-1!==(null===(e=t.user)||void 0===e?void 0:e.id)?this.updateAccountCounter({vk:t||{}}):this.updateAccountCounter({vk:{}}),$i("vk_counter_success"),$i("social_counters_vk_success_api")})).catch((()=>{$i("vk_counter_error"),$i("social_counters_vk_error_api")}))}}let Hi=!1;const zi=(t,e)=>t&&e?`${t} ${e}`:t||e;class Qi{constructor({ph:t,eventEmitter:e,activeUser:n,authUrl:r=Bo,socialCountersVisibility:o}){this.gamesCount=0,this.mailCount=0,this.moymirCount=0,this.loveCount=0,this.restAccountsMailCount=0,this.accounts=[],this.ph=t,this.eventEmitter=e,this.activeUser=n,this.authApi=new Wo(function(t){const e="mail.ru"===window.location.host,n=/\.mail\.ru$/.test(window.location.host);return e||n?Bo:t}(r)),this.socialCountersVisibility=o,this.okCounter=new Gi(this.updateSomeCounters.bind(this),e),this.vkCounter=new Bi(this.updateSomeCounters.bind(this),e),this.loadAccountsList(null,this.getSocialsParams()),this.socialCountersVisibility.isShowOkCounter&&$i("social_counters_hit_ok"),this.socialCountersVisibility.isShowVKCounter&&$i("social_counters_hit_vk")}getSocialsParams(){const t={};return this.socialCountersVisibility.isShowVKCounter&&this.socialCountersVisibility.isVKConnectForVKCounter&&(t.vk_connect=1),this.socialCountersVisibility.isShowOkCounter&&this.socialCountersVisibility.isServerApiForOKCounter&&(t.ok_counters=1),t}handleSocialCounters({vk_counters:t=null,ok_counters:e=null},n){var r,o;t&&Object.values(t).length?($i("vk_counter_success"),$i("social_counters_vk_server")):n&&(null===(r=this.socialCountersVisibility)||void 0===r?void 0:r.isShowVKCounter)&&(this.vkCounter.getDataFromApi(),t&&$i("social_counters_vk_repeat")),e?($i("ok_counter_success"),$i("social_counters_ok_server")):n&&(null===(o=this.socialCountersVisibility)||void 0===o?void 0:o.isShowOkCounter)&&(this.socialCountersVisibility.isServerApiForOKCounter?this.updateSomeCounters({ok:{}}):this.okCounter.getDataFromApi())}handleSocialCountersErrors(){var t,e;(null===(t=this.socialCountersVisibility)||void 0===t?void 0:t.isShowVKCounter)&&($i("vk_counter_error"),$i("social_counters_vk_error_server")),(null===(e=this.socialCountersVisibility)||void 0===e?void 0:e.isShowOkCounter)&&($i("ok_counter_error"),$i("social_counters_ok_error_server"))}loadAccountInfo(t,e){return qo.getInfo(t,e).then((t=>{$i("load_account_info_success"),t.status===zo.OK?(this.handleUpdateAccount(t.data),this.handleSocialCounters(t.data,e)):t.status===zo.NOAUTH&&this.handleClearAccount()})).catch((()=>{$i("load_account_info_error"),this.handleSocialCountersErrors()}))}loadAccountsList(t,e){return qo.getListInfo(this.activeUser,e).then((n=>{$i("load_accounts_list_success"),n.status===zo.OK?(this.handleUpdateAccount(n.data),this.handleSocialCounters(n.data,e),Hi||(Hi=!0),t&&t(Xo.convert(n))):n.status===zo.NOAUTH&&this.handleClearAccount()})).catch((()=>{$i("load_accounts_list_error"),this.handleSocialCountersErrors()}))}logoutAccount(t,e){return this.authApi.logout(t).then((t=>{$i("logout_account_success"),t.status===zo.OK&&this.loadAccountsList(e)})).catch((()=>{$i("logout_account_error")}))}switchAccount(t,e=!1,n){return t?this.authApi.auth(t).then((({status:r,data:o})=>{$i("switch_account_success"),r===Jo.OK?(this.activeUserFullName=zi(o.first_name,o.last_name),e?this.loadAccountsList(null,n):this.loadAccountInfo(o.email,n)):r===Jo.NOAUTH&&(o.list.includes(t)?this.handleExpiredAccount(t):o.list.length||this.handleClearAccount())})).catch((()=>{$i("switch_account_error")})):Promise.resolve()}updateSomeCounters(t){"mail"in t&&this.updateCounterMail(+t.mail),"love"in t&&this.updateCounterLove(+t.love),"games"in t&&this.updateCounterGames(+t.games),"moymir"in t&&this.updateCounterMoyMir(+t.moymir),"ok"in t&&this.okCounter.updateData(t.ok),"vk"in t&&this.vkCounter.updateData(t.vk),this.emitAccountDataUpdate()}emitAccountDataUpdate(){this.eventEmitter.emit(n.AccountDataUpdate,null,{activeUser:this.activeUser,activeUserFullName:this.activeUserFullName,gamesCount:this.gamesCount,mailCount:this.mailCount,moymirCount:this.moymirCount,okCount:this.okCounter.value,vkCount:this.vkCounter.value,loveCount:this.loveCount,restAccountsMailCount:this.restAccountsMailCount,accounts:this.accounts})}updateCounterMail(t){"number"==typeof t&&this.mailCount!==t&&(this.eventEmitter.emit(n.UpdateCounterMail,null,{count:t}),this.mailCount=t)}updateCounterLove(t){"number"==typeof t&&this.loveCount!==t&&(this.eventEmitter.emit(n.UpdateCounterLove,null,{count:t}),this.loveCount=t)}updateCounterGames(t){"number"==typeof t&&this.gamesCount!==t&&(this.eventEmitter.emit(n.UpdateCounterGames,null,{count:t}),this.gamesCount=t)}updateCounterMoyMir(t){"number"==typeof t&&this.moymirCount!==t&&(this.eventEmitter.emit(n.UpdateCounterMoyMir,null,{count:t}),this.moymirCount=t)}handleUpdateAccount(t){const e=()=>{this.updateAccount(t)};if(this.ph.getListenersNumber(r.AuthChange)&&Hi&&this.activeUser!==t.email)return(new Image).src=`//r3.mail.ru/k?auth=1&rnd=${Math.random()}`,void this.ph.emit(r.AuthChange,e,{email:t.email});e()}updateAccount(t){if(this.activeUser=t.email,this.updateCounterMail(+t.mail_cnt),this.updateCounterMoyMir(+t.my_cnt),this.updateCounterGames(+t.games_cnt),t.ok_counters&&this.okCounter.updateData(t.ok_counters),t.vk_counters&&Object.values(t.vk_counters).length&&this.vkCounter.updateData(t.vk_counters),this.restAccountsMailCount=t.mail_notifier?+t.mail_notifier:0,t.ldata){const e=t.list.map((e=>({user:e,firstName:t.ldata[e].first_name,lastName:t.ldata[e].last_name,mailCounter:t.ldata[e].mail_cnt,verified:t.ldata[e].verified})));this.accounts=e;const n=e.find((e=>e.user===t.email)),r=n.firstName?n.firstName:"",o=n.lastName?n.lastName:"";this.activeUserFullName=zi(r,o)}this.emitAccountDataUpdate()}handleClearAccount(){this.ph.getListenersNumber(r.AuthLost)&&this.activeUser?this.ph.emit(r.AuthLost,this.clearAccount,{}):this.clearAccount()}handleExpiredAccount(t){this.ph.authForm.show({type:"choice",email:t,from:"navi"})}clearAccount(){this.activeUser="",this.activeUserFullName="",this.updateCounterMail(0),this.updateCounterLove(0),this.updateCounterGames(0),this.updateCounterMoyMir(0),this.okCounter.updateData({}),this.vkCounter.updateData({}),this.restAccountsMailCount=0,this.accounts=[],this.emitAccountDataUpdate()}}class Ji extends Tn{constructor(){super(),this._eventsData=new Map}on(t,e){return super.on(t,e),this.executeListenerIfHasData(t,e),this}removeListener(t,e){return super.removeListener(t,e),this.getListenersNumber(t)||this._eventsData.delete(t),this}emit(t,e,n){return super.emit(t,e,n),this._eventsData.set(t,n),this}executeListenerIfHasData(t,e){const n=this._eventsData.get(t);n&&e({data:n},kn)}}class qi{constructor(t,e){this._ph=t,this._socialCountersVisibility=e,document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this))}onVisibilityChange(){const t="hidden"!==document.visibilityState,e=this._socialCountersVisibility.updateSocialCountersOnVisibilityChange?this._ph.getSocialsParams():null;if(this._ph.emit(r.VisibilityChange,null,{visible:t}),t){const t=this._ph.activeUser();t?(this._ph.switchAccount(t,!1,!1,e),e&&this._socialCountersVisibility.isShowOkCounter&&$i("social_counters_visibility_change_ok"),e&&this._socialCountersVisibility.isShowVKCounter&&$i("social_counters_visibility_change_vk")):this._ph.loadAccountInfo()}}}let Wi;class Xi extends Tn{constructor(t,r){var o,i,a;super(),t||(console.warn("ERROR (PublicPH): no initial settings data"),t={isWhiteline:!0,isDebug:"",experimentId:"",activeEmail:"",social:{vk:!1,ok:!1,fb:!1}}),o=!!(null==t?void 0:t.isDebug),i=null==t?void 0:t.experimentId,a=null==t?void 0:t.siteId,Ni.setConfig({verbose:o,split:i||"",defaultParams:{p:"whiteline",i:Li[a]||"unknown"+(a?`_${a}`:""),skipdwh:!0}}),$i("load_inline"),$i(t.isModern?"is-modern":"is-legacy"),$i(`load_inline_${e.BUILD}`),this.authForm=new jn(t),this.authMenu=new In(this.authForm),this.marusiaMenu=new Pn,this.cookie=Object.assign(Ee,{s:je}),Pe()>1?(je.setGlobal("rt",1),je.setGlobal("dpr",Pe())):(je.removeGlobal("rt"),je.removeGlobal("dpr"));const s=new Ji;Wi=new Qi({ph:this,eventEmitter:s,activeUser:t.activeEmail,authUrl:t.authUrl,socialCountersVisibility:{isShowVKCounter:t.isShowVKCounter,isVKConnectForVKCounter:t.isVKConnectForVKCounter,isShowOkCounter:t.isShowOkCounter,isServerApiForOKCounter:t.isServerApiForOKCounter,socialCountersTimer:t.socialCountersTimer,updateSocialCountersOnVisibilityChange:t.updateSocialCountersOnVisibilityChange}}),this.accountService={onAccountDataUpdate:t=>s.on(n.AccountDataUpdate,t),on:(t,e)=>s.on(t,e),removeListener:(t,e)=>s.removeListener(t,e)},new qi(this,Wi.socialCountersVisibility),r&&r.hasExternal&&Ie(r.bundleUrl)}getSocialsParams(){return Wi.getSocialsParams()}loadAccountInfo(t,e){return Wi.loadAccountInfo(t,e)}loadAccountsList(t,e){return Wi.loadAccountsList(t,e)}switchAccount(t,e=!1,n=!0,o){return Wi.switchAccount(t,e,o).then((()=>{n&&!this.getListenersNumber(r.AuthChange)&&window.location.reload()}))}logoutAccount(t,e){return Wi.logoutAccount(t,e)}activeUser(){return Wi.activeUser}isMultiAuth(){var t;return!!(null===(t=Un())||void 0===t?void 0:t.authGate)}isAuthFormEnabled(){var t;return!!(null===(t=Un())||void 0===t?void 0:t.authGate)}isMarusiaMenuEnabled(){var t;const e=this.activeUser();return!(!(null===(t=Un())||void 0===t?void 0:t.isOnMarusia)||!e||/(@vk|@ok|@fb)$/.test(e))}updateCounter(t){Wi.updateSomeCounters(t)}}return Object.freeze(Xi),Xi}();