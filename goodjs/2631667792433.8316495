(function(){var e=YUI.Env;e._ready||(e._ready=function(){e.DOMReady=!0,e.remove(YUI.config.doc,"DOMContentLoaded",e._ready)},e.add(YUI.config.doc,"DOMContentLoaded",e._ready))})(),YUI.add("event-base",function(_,e){_.publish("domready",{fireOnce:!0,async:!0}),YUI.Env.DOMReady?_.fire("domready"):_.Do.before(function(){_.fire("domready")},YUI.Env,"_ready");function i(e){if(!e)return e;try{e&&3==e.nodeType&&(e=e.parentNode)}catch(e){return null}return _.one(e)}function t(e,t,n){this._event=e,this._currentTarget=t,this._wrapper=n||a,this.init()}var o=_.UA,a={},l={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9,63272:46,63273:36,63275:35};_.extend(t,Object,{init:function(){var e=this._event,t=this._wrapper.overrides,n=e.pageX,a=e.pageY,r=this._currentTarget;this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.shiftKey=e.shiftKey,this.type=t&&t.type||e.type,this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=n,this.pageY=a,a=e.keyCode||e.charCode,o.webkit&&a in l&&(a=l[a]),this.keyCode=a,this.charCode=a,this.which=e.which||e.charCode||a,this.button=this.which,this.target=i(e.target),this.currentTarget=i(r),this.relatedTarget=i(e.relatedTarget),"mousewheel"!=e.type&&"DOMMouseScroll"!=e.type||(this.wheelDelta=e.detail?-1*e.detail:Math.round(e.wheelDelta/80)||(e.wheelDelta<0?-1:1)),this._touch&&this._touch(e,r,this._wrapper)},stopPropagation:function(){this._event.stopPropagation(),this._wrapper.stopped=1,this.stopped=1},stopImmediatePropagation:function(){var e=this._event;e.stopImmediatePropagation?e.stopImmediatePropagation():this.stopPropagation(),this._wrapper.stopped=2,this.stopped=2},preventDefault:function(e){var t=this._event;t.preventDefault(),t.returnValue=e||!1,this._wrapper.prevented=1,this.prevented=1},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}}),t.resolve=i,_.DOM2EventFacade=t,_.DOMEventFacade=t,function(){_.Env.evt.dom_wrappers={},_.Env.evt.dom_map={};function e(){YUI.Env.windowLoaded=!0,_.Event._load(),a(v,"load",e)}function t(){_.Event._unload()}function p(e){try{return e&&"string"!=typeof e&&_.Lang.isNumber(e.length)&&!e.tagName&&!_.DOM.isWindow(e)}catch(e){return!1}}function c(e){var t=o.apply(this,arguments);return this.hasSubs()||_.Event._clean(this),t}var l,d,u,s,h,i=_.Env.evt,n=_.config,v=n.win,f=YUI.Env.add,a=YUI.Env.remove,r="domready",y="~yui|2|compat~",o=_.CustomEvent.prototype._delete,g=(l=!1,d=0,u=[],s=i.dom_wrappers,h=i.dom_map,{POLL_RETRYS:1e3,POLL_INTERVAL:40,lastError:null,_interval:null,_dri:null,DOMReady:!1,startInterval:function(){g._interval||(g._interval=setInterval(g._poll,g.POLL_INTERVAL))},onAvailable:function(e,t,n,a,r,i){for(var o,l=_.Array(e),c=0;c<l.length;c+=1)u.push({id:l[c],fn:t,obj:n,override:a,checkReady:r,compat:i});return d=this.POLL_RETRYS,setTimeout(g._poll,0),o=new _.EventHandle({_delete:function(){if(o.handle)o.handle.detach();else for(var e,t=0;t<l.length;t++)for(e=0;e<u.length;e++)l[t]===u[e].id&&u.splice(e,1)}})},onContentReady:function(e,t,n,a,r){return g.onAvailable(e,t,n,a,!0,r)},attach:function(e,t,n,a){return g._attach(_.Array(arguments,0,!0))},_createWrapper:function(t,e,n,a,r){var i,o=_.stamp(t),l="event:"+o+e;return!1===r&&(l+="native"),n&&(l+="capture"),(i=s[l])||((i=_.publish(l,{silent:!0,bubbles:!1,emitFacade:!1,contextFn:function(){return a?i.el:(i.nodeRef=i.nodeRef||_.one(i.el),i.nodeRef)}})).overrides={},i.el=t,i.key=l,i.domkey=o,i.type=e,i.fn=function(e){i.fire(g.getEvent(e,t,a||!1===r))},i.capture=n,t==v&&"load"==e&&(i.fireOnce=!0,0),i._delete=c,s[l]=i,h[o]=h[o]||{},h[o][l]=i,f(t,e,i.fn,n)),i},_attach:function(n,a){var r,e,t,i,o=!1,l=n[0],c=n[1],d=n[2]||v,u=a&&a.facade,s=a&&a.capture,h=a&&a.overrides;if(n[n.length-1]===y&&(t=!0),!c||!c.call)return!1;if(p(d))return r=[],_.each(d,function(e,t){n[2]=e,r.push(g._attach(n.slice(),a))}),new _.EventHandle(r);if(_.Lang.isString(d)){if(t)e=_.DOM.byId(d);else switch((e=_.Selector.query(d)).length){case 0:e=null;break;case 1:e=e[0];break;default:return n[2]=e,g._attach(n,a)}if(!e)return i=g.onAvailable(d,function(){i.handle=g._attach(n,a)},g,!0,!1,t);d=e}return!!d&&(_.Node&&_.instanceOf(d,_.Node)&&(d=_.Node.getDOMNode(d)),u=g._createWrapper(d,l,s,t,u),h&&_.mix(u.overrides,h),d==v&&"load"==l&&YUI.Env.windowLoaded&&(o=!0),t&&n.pop(),t=n[3],i=u._on(c,t,4<n.length?n.slice(4):null),o&&u.fire(),i)},detach:function(e,t,n,a){var r,i,o,l,c=_.Array(arguments,0,!0);if(c[c.length-1]===y&&(l=!0),e&&e.detach)return e.detach();if("string"==typeof n&&(l?n=_.DOM.byId(n):(r=(n=_.Selector.query(n)).length)<1?n=null:1==r&&(n=n[0])),!n)return!1;if(n.detach)return c.splice(2,1),n.detach.apply(n,c);if(p(n)){for(i=!0,o=0,r=n.length;o<r;++o)c[2]=n[o],i=_.Event.detach.apply(_.Event,c)&&i;return i}return e&&t&&t.call?(l="event:"+_.stamp(n)+e,!!(l=s[l])&&l.detach(t)):g.purgeElement(n,!1,e)},getEvent:function(e,t,n){var a=e||v.event;return n?a:new _.DOMEventFacade(a,t,s["event:"+_.stamp(t)+e.type])},generateId:function(e){return _.DOM.generateID(e)},_isValidCollection:p,_load:function(e){l||(l=!0,_.fire&&_.fire(r),g._poll())},_poll:function(){if(!g.locked)if(!_.UA.ie||YUI.Env.DOMReady){g.locked=!0;for(var e,t,n=(n=!l)||0<d,a=[],r=function(e,t){var n,a=t.override;try{t.compat?(n=t.override?!0===a?t.obj:a:e,t.fn.call(n,t.obj)):(n=t.obj||_.one(e),t.fn.apply(n,_.Lang.isArray(a)?a:[]))}catch(e){}},i=0,o=u.length;i<o;++i)(e=u[i])&&!e.checkReady&&((t=e.compat?_.DOM.byId(e.id):_.Selector.query(e.id,null,!0))?(r(t,e),u[i]=null):a.push(e));for(i=0,o=u.length;i<o;++i)(e=u[i])&&e.checkReady&&((t=e.compat?_.DOM.byId(e.id):_.Selector.query(e.id,null,!0))?(l||t.get&&t.get("nextSibling")||t.nextSibling)&&(r(t,e),u[i]=null):a.push(e));d=0===a.length?0:d-1,n?g.startInterval():(clearInterval(g._interval),g._interval=null),g.locked=!1}else g.startInterval()},purgeElement:function(e,t,n){var a,r,i,o,e=_.Lang.isString(e)?_.Selector.query(e,null,!0):e,l=g.getListeners(e,n);if(t&&e)for(l=l||[],r=(i=_.Selector.query("*",e)).length,a=0;a<r;++a)(o=g.getListeners(i[a],n))&&(l=l.concat(o));if(l)for(a=0,r=l.length;a<r;++a)l[a].detachAll()},_clean:function(e){var t=e.key,n=e.domkey;a(e.el,e.type,e.fn,e.capture),delete s[t],delete _._yuievt.events[t],h[n]&&(delete h[n][t],_.Object.size(h[n])||delete h[n])},getListeners:function(e,t){var n=_.stamp(e,!0),a=h[n],r=[],e=t?"event:"+n+t:null,n=i.plugins;return a?(e?(n[t]&&n[t].eventDef&&(e+="_synth"),a[e]&&r.push(a[e]),a[e+="native"]&&r.push(a[e])):_.each(a,function(e,t){r.push(e)}),r.length?r:null):null},_unload:function(n){_.each(s,function(e,t){"unload"==e.type&&e.fire(n),e.detachAll()}),a(v,"unload",t)},nativeAdd:f,nativeRemove:a});if(_.Event=g,n.injected||YUI.Env.windowLoaded?e():f(v,"load",e),_.UA.ie&&(_.on(r,g._poll),_.UA.ie<7))try{f(v,"unload",t)}catch(e){}g.Custom=_.CustomEvent,g.Subscriber=_.Subscriber,g.Target=_.EventTarget,g.Handle=_.EventHandle,g.Facade=_.EventFacade,g._poll()}(),_.Env.evt.plugins.available={on:function(e,t,n,a){var r=4<arguments.length?_.Array(arguments,4,!0):null;return _.Event.onAvailable.call(_.Event,n,t,a,r)}},_.Env.evt.plugins.contentready={on:function(e,t,n,a){var r=4<arguments.length?_.Array(arguments,4,!0):null;return _.Event.onContentReady.call(_.Event,n,t,a,r)}}},"3.12.0",{requires:["event-custom-base"]});
