(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1021:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n(35),c=n(0),s=n(4),u=n(14),l=n(15),d=n(16),h=n(17),p=n(9),f=n(2),a=n(3),g=n.n(a),r=n(1),m=n(39),o=n(26),a=n(938),b=n.n(a),a=n(83),A=n.n(a);function C(e,t){return t?e.trim():e}var v={useTrim:!0},E={required:function(){return""!==C(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",(2<arguments.length&&void 0!==arguments[2]?arguments[2]:v).useTrim)},maxLength:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;return C(e,(2<arguments.length&&void 0!==arguments[2]?arguments[2]:v).useTrim).length<=t},minLength:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;return C(e,(2<arguments.length&&void 0!==arguments[2]?arguments[2]:v).useTrim).length>=t},pattern:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:v).useTrim;return t.test(C(e,n))}};function O(){return function(e){return n=(t=e).contextTypes,e=t.defaultProps,o=Object.assign({},t.prototype),Object.assign(t.prototype,{componentWillMount:function(){var e=this.context.form;e&&(e.attachToForm(this),this.setState({_value:"",_validations:[]}));for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.apply(void 0,["componentWillMount"].concat(n))},componentWillUnmount:function(){var e=this.context.form;e&&e.detachFromForm(this);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.apply(void 0,["componentWillUnmount"].concat(n))},getValue:function(){var e=(this.state||{})._value;return null==e?"":e},setValue:function(e,t){this.setState({_value:e},function(){"function"==typeof t&&t()})},getValidationMessage:function(){var e=this.getValidationMessages();return e&&e[0]},getValidationClassName:function(){var e=(this.state||{})._validations;return e&&e[0]&&e[0].className},getValidationMessages:function(){var e=(this.state||{})._validations;return null==e?void 0:e.map(function(e){e=e.message;return e?"string"==typeof e?e:e.message||"æœªçŸ¥é”™è¯¯":""})},setValidations:function(e){var t=this;this.setState({_validations:e},function(){return t.forceUpdate()})},clearValidations:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=(this.state||{})._validations;n&&0<n.length&&this.setState(Object.assign({},e,{_validations:[]}),t)},addValidation:function(t){this.setState(function(e){e=e._validations;return{_validations:[t].concat(Object(s.a)(e||[]))}})},addManualValidation:function(e){this.addValidation({type:"manual",message:e})},validate:function(){this.context.form.validate(this)}}),Object.assign(t,{contextTypes:Object.assign({},n,{form:g.a.object}),defaultProps:Object.assign({},e,{validations:[]})}),t;function r(e){for(var e=o[e],t=arguments.length,n=new Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return"function"==typeof e?e.apply(void 0,n):void 0}var t,n,o}}r=function(e){Object(d.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(p.a)(n);return t=a?(e=Object(p.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(h.a)(this,t)});function o(){var a;Object(u.a)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(a=r.call.apply(r,[this].concat(t))).state={isValid:!0},a.inputs=[],a.attachToForm=function(e){var t=e.props.name;if(!t||a.inputs.includes(t))throw new Error("form input must specify a unqie name, but current is ".concat(t));a.inputs.push(e)},a.detachFromForm=function(e){e=a.inputs.indexOf(e);-1!==e&&(a.inputs=[].concat(Object(s.a)(a.inputs.slice(0,e)),Object(s.a)(a.inputs.slice(e+1))))},a.validate=function(e){var o=e.state._value,t=e.props.validations,i=[],c=[];return t?((t=!Array.isArray(t)&&t.type?[t]:t).forEach(function(e){var t=e.type,n=e.value,a=e.options,r=E[t];if(!r)throw new Error("no ".concat(t," rules, please define it at Form.validateRules"));a=r(o,n,a);b()(a)?c=[].concat(Object(s.a)(c),[a.then(function(){},function(){i.push(e)})]):a||(i=[].concat(Object(s.a)(i),[e]))}),Promise.all(c).then(function(){return e.setValidations(i),i})):i},a.handleSubmit=function(e){e.preventDefault();var t=a.props,e=t.onPreSubmit,n=t.onSubmit,t=t.isWechat;e(),t?new Promise(function(e){var t=a.inputs.find(function(e){return"username"===e.props.name});t&&!t.state._value&&Object(m.findDOMNode)(t.inputEl).value&&t.handleChange({target:{value:Object(m.findDOMNode)(t.inputEl).value}});var n=a.inputs.find(function(e){return"password"===e.props.name});n&&!n.state._value&&t&&Object(m.findDOMNode)(t.inputEl).value&&n.handleChange({target:{value:Object(m.findDOMNode)(n.inputEl).value}}),e()}).then(function(){a.validateAll().then(function(e){e&&(e=a.inputs.reduce(function(e,t){return Object.assign({},e,Object(c.a)({},t.props.name,t.state._value))},{}),n(e))})}):a.validateAll().then(function(e){e&&(e=a.inputs.reduce(function(e,t){return Object.assign({},e,Object(c.a)({},t.props.name,t.state._value))},{}),n(e))})},a}return Object(l.a)(o,[{key:"getChildContext",value:function(){return{form:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,getValue:this.getValue,setValue:this.setValue,validate:this.validate}}}},{key:"componentDidMount",value:function(){}},{key:"validateAll",value:function(){var t=this,e=this.props,n=e.onValid,a=e.onInvalid,r=[],o=[];return this.inputs.forEach(function(e){e=t.validate(e);b()(e)?o=[].concat(Object(s.a)(o),[e.then(function(e){r=[].concat(Object(s.a)(r),Object(s.a)(e))})]):e&&(r=[].concat(Object(s.a)(r),Object(s.a)(e)))}),Promise.all(o).then(function(){var e=0===r.length;return t.setState({isValid:e},function(){e?n():a(r.map(function(e){return e.message}))}),e})}},{key:"render",value:function(){var e=A()(this.props,["onValid","onInvalid","onSubmit","onPreSubmit","isWechat","dispatch"]),t=e.children,n=e.onRef,e=Object(i.a)(e,["children","onRef"]);return Object(f.b)("form",Object.assign({noValidate:!0,onSubmit:this.handleSubmit,ref:n},e,{children:t}))}}]),o}(r.Component);r.childContextTypes={form:g.a.object},r.propTypes={onValid:g.a.func,onInvalid:g.a.func,onSubmit:g.a.func,onPreSubmit:g.a.func},r.validateRules=E,r.defaultProps={onValid:function(){},onInvalid:function(){},onSubmit:function(){},onPreSubmit:function(){}},t.b=Object(o.connect)(function(e){return{isWechat:e.env.userAgent.Wechat}})(r)},1096:function(e,t,n){"use strict";n.d(t,"b",function(){return o});var a=n(63),r={400:"è¯·æ±‚å‚æ•°æœ‰è¯¯",401:"ç”¨æˆ·è®¤è¯å¤±è´¥",403:"æœåŠ¡å·²æ‹’ç»",404:"èµ„æºä¸å­˜åœ¨",405:"è¯·æ±‚æ–¹å¼æœ‰è¯¯",410:"èµ„æºå·²è§£æ•£",502:"ç½‘å…³é”™è¯¯",503:"æœåŠ¡æ— å“åº”",504:"ç½‘å…³è¶…æ—¶"},o=function(e){var t;return(null==e||null===(t=e.payload)||void 0===t?void 0:t.message)||(null==e?void 0:e.status)&&r[e.status]||"æ“ä½œå¤±è´¥"};t.a=function(){a.a.dispatch("ui/showToast",{icon:"fail",text:o(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})})}},1111:function(e,t,n){"use strict";var s=n(0),u=n(35),i=n(14),c=n(15),l=n(16),d=n(17),h=n(9),p=n(2),a=n(3),r=n.n(a),o=n(1),a=n(11),f=n.n(a),a=n(83),g=n.n(a),m=n(136),n=n(1021);o=function(e){Object(l.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(h.a)(n);return t=a?(e=Object(h.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(d.a)(this,t)});function o(){var n;Object(i.a)(this,o);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))).handleErrorHide=function(){n.getValidationMessage()&&n.setState({errorMaskShown:!1},function(){n.clearValidations({errorMaskShown:!0},function(){return n.inputEl.focus()})})},n.handleKeyUp=function(e){8!==e.keyCode&&9!==e.keyCode||n.clearValidations()},n.handleChange=function(e){var t=e.target.value,e=n.props.onChange;n.setValue(t),"function"==typeof e&&e(t)},n}return Object(c.a)(o,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&this.setValue(e),this.setState({errorMaskShown:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.manualValidateError,a=t.type,r=t.smsType,o=e.manualValidateError,i=e.type,t=e.defaultValue,e=e.smsType;!n&&o||"string"==typeof n&&n!==o?this.addManualValidation(o):n&&!o&&this.clearValidations({errorMaskShown:!0}),a===i&&r===e||(this.setValue(t),this.clearValidations({errorMaskShown:!0}))}},{key:"render",value:function(){var t=this,e=g()(this.props,["validations","defaultValue","onChange","smsType","manualValidateError","dispatch"]),n=e.className,a=e.inputClassName,r=e.errorMessageClassName,o=Object(u.a)(e,["className","inputClassName","errorMessageClassName"]),i=(this.state||{}).errorMaskShown,c=this.getValue(),e=this.getValidationMessage();return Object(p.c)("div",{className:f()("SignFlowInput",n),children:[Object(p.b)(m.a,Object.assign({onRef:function(e){t.inputEl=e},value:c,onChange:this.handleChange,onKeyUp:this.handleKeyUp,onClick:this.handleErrorHide,onBlur:function(){return t.validate()},className:a},o)),Object(p.b)("div",{className:f()("SignFlowInput-errorMask",this.getValidationClassName(),(o={},Object(s.a)(o,r,e),Object(s.a)(o,"SignFlowInput-requiredErrorMask",!c),Object(s.a)(o,"SignFlowInput-errorMask--hidden",!e||!i),o)),onClick:this.handleErrorHide,children:e})]})}}]),o}(o.Component);o.propTypes={inputClassName:r.a.string,errorMessageClassName:r.a.string,manualValidateError:r.a.node},t.a=Object(n.a)()(o)},1128:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M14.782 16.78a.737.737 0 0 1-1.052 0L9.218 12.53a.758.758 0 0 1 0-1.063L13.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L11 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};n.defaultProps={name:"ArrowLeft"},t.a=n},1291:function(e,t,n){"use strict";var l=n(35),c=n(14),r=n(15),s=n(16),u=n(17),d=n(9),h=n(2),a=n(3),o=n.n(a),i=n(1),p=n(26),f=n(178),a=n(83),g=n.n(a),a=n(219),m=n(1111);n(43),n(793);i.Component;i=function(e){Object(s.a)(i,e);var n,a,o=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(u.a)(this,t)});function i(){var r;Object(c.a)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=o.call.apply(o,[this].concat(t))).state={selectedCountry:null},r.handleSelect=function(e,t){var n=r.props,a=n.supportedCountries,n=n.onSelect,t=a[t];r.setState({selectedCountry:t}),n(t)},r}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.supportedCountries,e=e.getSupportedCountries;t&&t.length||e()}},{key:"render",value:function(){var e=g()(this.props,["getSupportedCountries","onSelect"]),t=e.supportedCountries,n=e.onChange,a=e.defaultPhoneNo,r=e.type,o=e.defaultSelectedCountry,i=e.supportedCountriesShown,c=e.placeholderPrefix,s=void 0===c?"":c,u=e.getPlaceholder,c=Object(l.a)(e,["supportedCountries","onChange","defaultPhoneNo","type","defaultSelectedCountry","supportedCountriesShown","placeholderPrefix","getPlaceholder"]),e=this.state.selectedCountry||o,o=e.name,e=e.code,i=Boolean(i&&t&&t.length);return Object(h.c)("div",{className:"SignFlow-account",children:[i&&Object(h.c)(h.a,{children:[Object(h.b)("div",{className:"SignFlow-supportedCountriesSelectContainer",children:Boolean(t)&&Boolean(t.length)&&Object(h.b)(f.b,{plain:!0,text:"".concat(o," ").concat(e),onChange:this.handleSelect,children:t.map(function(e,t){var n=e.name,e=e.code;return Object(h.b)(f.a,{value:"".concat(n," ").concat(e)},t)})})}),Object(h.b)("span",{className:"SignFlow-accountSeperator",children:"Â "})]}),Object(h.b)(m.a,Object.assign({className:"SignFlow-accountInputContainer",name:"register"===r?"phoneNo":"username",inputClassName:"SignFlow-accountInput",placeholder:u(r,s),onChange:n,defaultValue:a,validations:[{type:"required",message:u(r,"è¯·è¾“å…¥")}],type:"digits"===r||"register"===r?"tel":"text"},c))]})}}]),i}(i.Component);i.propTypes={defaultPhoneNo:o.a.string,defaultSelectedCountry:o.a.object,supportedCountries:o.a.array,onSelect:o.a.func,onChange:o.a.func,getSupportedCountries:o.a.func,type:o.a.oneOf(["register","digits","password"]).isRequired,supportedCountriesShown:o.a.bool,placeholderPrefix:o.a.string,getPlaceholder:o.a.func},i.defaultProps={defaultPhoneNo:"",defaultSelectedCountry:{name:"ä¸­å›½",code:"+86"},supportedCountriesShown:!0,getPlaceholder:function(e,t){e="digits"===e||"register"===e?"æ‰‹æœºå·":"æ‰‹æœºå·æˆ–é‚®ç®±";return"".concat(t).concat(e)}},t.a=Object(p.connect)(function(e){return{supportedCountries:e.sms.supportedCountries}},{getSupportedCountries:a.b})(i)},1320:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(35),c=n(14),s=n(15),u=n(16),l=n(17),d=n(9),h=n(2),a=n(3),r=n.n(a),t=n(1),p=n(31),f=n(1341),g=n(1342),a=n(83),m=n.n(a),b=n(1111);var o=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(e){var t;return Object(c.a)(this,o),(t=r.call(this,e)).handleSwitchPasswordInputType=function(){t.setState(function(e){return{inputType:"password"===e.inputType?"text":"password"}})},t.handleChange=function(e){t.state.hasValue!==Boolean(e)&&t.setState({hasValue:Boolean(e)}),t.props.onChange(e)},t.state={hasValue:Boolean(e.defaultValue),inputType:e.defaultType},t}return Object(s.a)(o,[{key:"render",value:function(){var e=m()(this.props,["onChange","defaultType"]),t=e.switchDisabled,n=e.placeholderPrefix,a=Object(i.a)(e,["switchDisabled","placeholderPrefix"]),r=this.state,e=r.inputType,r=r.hasValue;return Object(h.c)("div",{className:"SignFlow-password",children:[Object(h.b)(b.a,Object.assign({name:"password",inputClassName:"password"===e&&r?"SignFlow-passwordInput":"",type:e,placeholder:"".concat(n||"","å¯†ç "),onChange:this.handleChange,errorMessageClassName:"SignFlow-passwordErrorMask",validations:[{type:"required",message:"è¯·è¾“å…¥å¯†ç ",className:"SignFlow-requiredPasswordErrorMask"}]},a)),!t&&Object(h.b)(p.c,{className:"SignFlow-switchPassword",tabIndex:-1,preset:"plain",onClick:this.handleSwitchPasswordInputType,icon:("password"===e?f:g).a})]})}}]),o}(t.Component);o.propTypes={onChange:r.a.func.isRequired,switchDisabled:r.a.bool,defaultType:r.a.string},o.defaultProps={defaultType:"password"}},1321:function(e,t,n){"use strict";var o=n(35),i=n(14),c=n(15),s=n(16),u=n(17),l=n(9),d=n(2),a=n(3),r=n.n(a),a=n(1),h=n(1111);a=function(e){Object(s.a)(r,e);var n,a,t=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(l.a)(n);return t=a?(e=Object(l.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(u.a)(this,t)});function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.validations,e=Object(o.a)(e,["onChange","validations"]);return Object(d.b)(h.a,Object.assign({className:"SignFlow-username",onChange:t,validations:n||[{type:"required",message:"è¯·è¾“å…¥ç”¨æˆ·å"}]},e))}}]),r}(a.Component);a.propTypes={onChange:r.a.func.isRequired},t.a=a},1325:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};n.defaultProps={name:"WeChat"},t.a=n},1326:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};n.defaultProps={name:"Weibo"},t.a=n},1341:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M1 11.5C1 15 7 19 12 19s11-4 11-7.5S17 4 12 4 1 8 1 11.5zm11 5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm-3-5c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z",fillRule:"evenodd"}))};n.defaultProps={name:"Eye"},t.a=n},1342:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};n.defaultProps={name:"EyeSlash"},t.a=n},1362:function(e,t,n){"use strict";function i(e){return f.a.createElement(O.a,w({viewBox:"0 0 8 8"},e),f.a.createElement("path",{d:"M7.755 1.434A.839.839 0 007.75.248.837.837 0 006.565.244L4 2.81 1.434.245A.839.839 0 00.248.248c-.33.33-.33.86-.004 1.186L2.81 4 .246 6.566A.839.839 0 00.25 7.752c.33.33.86.33 1.185.004L4 5.19l2.566 2.565a.839.839 0 001.186-.004c.33-.33.33-.86.004-1.185L5.19 4l2.565-2.566z",fillRule:"evenodd"}))}function c(e){return f.a.createElement(O.a,y({viewBox:"0 0 20 20"},e),f.a.createElement("circle",{cx:"83",cy:"111",r:"10",transform:"translate(-73 -101)"}))}var s=n(14),u=n(15),l=n(16),d=n(17),h=n(9),p=n(2),a=n(3),r=n.n(a),o=n(1),f=n.n(o),g=n(26),m=n(122),b=n(4),a=n(11),A=n.n(a),C=n(799),v=n(31),E=n(1111),O=n(131),w=Object.assign,y=Object.assign;n=function(e){Object(l.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(h.a)(n);return t=a?(e=Object(h.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(d.a)(this,t)});function o(){var e;Object(s.a)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state={hovered:!0},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e}return Object(u.a)(o,[{key:"componentWillReceiveProps",value:function(e){this.props.position!==e.position&&this.handleMouseLeave()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.position!==e.position||this.state.hovered!==t.hovered}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.onUnMark,a=this.state.hovered,e=a?i:c;return Object(p.c)(v.c,{className:"ChineseCaptchaPoint",style:t,onClick:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,preset:"plain",children:[Object(p.b)(c,{className:A()("ChineseCaptchaPoint-backIcon",{"ChineseCaptchaPoint-backIcon--hovered":a}),fill:a?"#0f88eb":"#aad9ff",width:20,height:20}),Object(p.b)(e,{className:A()("ChineseCaptchaPoint-frontIcon",{"ChineseCaptchaPoint-frontIcon--hovered":a}),fill:a?"#ffffff":"#0f88eb",width:a?8:12,height:a?8:12})]})}}]),o}(o.Component);n.propTypes={onUnMark:r.a.func.isRequired,position:r.a.object.isRequired};var S=n;var j="æœ€å¤šåªèƒ½é€‰æ‹© ".concat(7," ä¸ªç‚¹"),n=function(e){Object(l.a)(i,e);var n,a,r=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(h.a)(n);return t=a?(e=Object(h.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(d.a)(this,t)});function i(){var o;Object(s.a)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=r.call.apply(r,[this].concat(t))).state={markPositionsArray:[],isClient:!1},o.updateSize=function(){var e;o.chineseCaptchaImg&&(e=o.chineseCaptchaImg.getBoundingClientRect(),o.chineseImgWidth=e.width,o.chineseImgHeight=e.height)},o.handleMarkPoint=function(e){var t,n,a,r;o.chineseCaptchaImg&&(t=o.state.markPositionsArray,r=o.props.onValidation,7<=t.length?r({validationMessage:j}):(n=e.pageX,a=e.pageY,o.updateSize(),e=(r=o.chineseCaptchaImg.getBoundingClientRect()).top,r=r.left,e=a-e-window.pageYOffset-10,r=n-r-window.pageXOffset-10,r=[].concat(Object(b.a)(t),[{top:e,left:60+r+16}]),o.updateMarkPoint(r)))},o.handleUnMarkPoint=function(e){var t=Object(b.a)(o.state.markPositionsArray);t.splice(e,1),o.updateMarkPoint(t)},o.updateMarkPoint=function(e){o.setState({markPositionsArray:e},function(){o.props.onUpdateInput(o.parseMarkPositionsArrayToInputValue(e))})},o.parseMarkPositionsArrayToInputValue=function(e){return JSON.stringify({img_size:[o.chineseImgWidth,o.chineseImgHeight],input_points:e.map(function(e){var t=e.top;return[e.left+10-60-16,t+10]})})},o}return Object(u.a)(i,[{key:"componentDidMount",value:function(){this.setState({isClient:!0}),this.updateSize()}},{key:"componentWillReceiveProps",value:function(e){this.props.url!==e.url&&this.props.isChinese&&this.setState({markPositionsArray:[]})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.url!==e.url||this.props.validationMessage!==e.validationMessage||this.props.isShown!==e.isShown||this.props.className!==e.className||this.state.markPositionsArray!==t.markPositionsArray}},{key:"renderCaptcha",value:function(){var n=this,e=this.props,t=e.url,a=e.isChinese,e=e.onRefresh;return t?Object(p.c)("div",{className:a?"Captcha-chineseContainer":"Captcha-englishContainer",children:[Object(p.b)("img",{"data-tooltip":"çœ‹ä¸æ¸…æ¥šï¼Ÿæ¢ä¸€å¼ ",className:a?"Captcha-chineseImg":"Captcha-englishImg",src:t,alt:"å›¾å½¢éªŒè¯ç ",onClick:a?this.handleMarkPoint:e,ref:a&&function(e){n.chineseCaptchaImg=e}}),a?this.state.markPositionsArray.map(function(e,t){return Object(p.b)(S,{onUnMark:function(){return n.handleUnMarkPoint(t)},position:e},t)}):null]}):null}},{key:"render",value:function(){var e=this.props,t=e.isChinese,n=e.validationMessage,a=e.className,r=e.onUpdateInput,o=e.validations,i=e.isShown,c=e.onRefresh,s=this.state.isClient,e=this.renderCaptcha();return Object(p.b)("div",{className:A()("Captcha",a,{"Captcha-chinese":t&&s}),style:i?{}:{width:"0",height:"0",opacity:"0",overflow:"hidden",margin:"0",padding:"0",border:"0"},children:t?Object(p.c)("div",{children:[Object(p.c)("div",{className:"Captcha-chineseOperator",children:[Object(p.b)("span",{className:A()("Captcha-info",{"Captcha-error":Boolean(n)}),children:n||"è¯·ç‚¹å‡»å›¾ä¸­å€’ç«‹çš„æ–‡å­—"}),Object(p.b)(v.c,{className:"Captcha-chineseRefreshButton",preset:"plain",onClick:c,children:Object(p.b)(C.a,{size:20})})]}),e]}):Object(p.c)("div",{children:[Object(p.b)(E.a,{name:"captcha",type:"text",errorMessageClassName:"Captcha-errorMessage",placeholder:"éªŒè¯ç ",onChange:r,validations:i?o:[],manualValidateError:n,tabIndex:i?0:-1}),Object(p.b)("span",{className:"Captcha-englishImage",children:e})]})})}}]),i}(o.Component);n.propTypes={isChinese:r.a.bool,url:r.a.string,validationMessage:r.a.string,onValidation:r.a.func,onRefresh:r.a.func.isRequired,onUpdateInput:r.a.func.isRequired,isShown:r.a.bool,validations:r.a.array},n.defaultProps={isChinese:!1,isShown:!1,validations:[{type:"required",message:"è¯·å¡«å†™éªŒè¯ç ",className:"Captcha-requiredErrorMessage"}]};var B=n;o=function(e){Object(l.a)(i,e);var n,a,o=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(h.a)(n);return t=a?(e=Object(h.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(d.a)(this,t)});function i(){var r;Object(s.a)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=o.call.apply(o,[this].concat(t))).state={validationMessage:""},r.handleValidation=function(e){var t=e.message,n=e.needsRefresh;t&&r.setState({validationMessage:t});var a=r.props,e=a.captchaNeeded,t=a.checkIfCaptchaNeeded,a=a.requestForCaptcha;!e&&n?t(r.lang):n&&a(r.lang)},r.handleRefresh=function(){r.props.requestForCaptcha(r.lang)},r}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.isChinese,e=e.checkIfCaptchaNeeded;this.lang=n?"cn":"en",this.type="register"===t?"register":"login",e(this.lang)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.validationResult,a=void 0===n?{}:n,r=t.captchaNeeded,n=t.requestForCaptcha,t=e.validationResult,t=void 0===t?{}:t,e=e.captchaNeeded;!r&&e&&n(this.lang),a.timestamp!==t.timestamp&&this.handleValidation(t)}},{key:"componentWillUnmount",value:function(){this.props.resetCaptchaInfo()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.onUpdateInput,r=e.className,o=e.captchaBase64String,i=e.isShown,e=this.state.validationMessage,t="digitsLogin"!==t?B.defaultProps.validations:[];return Object(p.b)(B,{className:r,isShown:i,isChinese:n,url:"data:image/jpg;base64,".concat(o),validationMessage:e,onRefresh:this.handleRefresh,onValidation:this.handleValidation,validations:t,onUpdateInput:a})}}]),i}(o.Component);o.propTypes={canCaptchaShown:r.a.bool,isChinese:r.a.bool,type:r.a.oneOf(["login","digitsLogin","register"]).isRequired,validationResult:r.a.object,captchaNeeded:r.a.bool,captchaBase64String:r.a.string,onUpdateInput:r.a.func,checkIfCaptchaNeeded:r.a.func,requestForCaptcha:r.a.func},o.defaultProps={canCaptchaShown:!1,isChinese:!1};o=Object(g.connect)(function(e,t){var n=e.captcha,e=n.captchaNeeded,n=n.captchaBase64String,t=t.canCaptchaShown;return{isShown:Boolean(t&&e&&n),captchaNeeded:e,captchaBase64String:n}},{checkIfCaptchaNeeded:m.c,requestForCaptcha:m.f,resetCaptchaInfo:m.h})(o);t.a=o},1371:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(e){return setTimeout(e,t)})};function r(e){var n=[];return e.reduce(function(e,t){return e.then(function(){return t().then(function(e){n.push(e)})})},Promise.resolve()).then(function(){return n})}},1372:function(e,t,n){"use strict";var a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;t.a=function(e){return a.test(e)}},1403:function(e,t,n){"use strict";function a(o){for(var e=arguments.length,n=new Array(1<e?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];return function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];var r=a[a.length-1]||{};return n.reduce(function(e,t,n){return e.concat(Number.isInteger(t)&&a[t]||r[t],o[n+1])},[o[0]]).join("")}}n.d(t,"a",function(){return a})},1404:function(e,t,n){},1433:function(e,t,n){"use strict";var c=n(0),s=n(14),r=n(15),u=n(16),l=n(17),d=n(9),h=n(2),a=n(1),o=n(19),i=n(26),p=n(31),f=n(249),g=n(421),m=n(122),b=n(1021),A=n(1291),C=n(1320),v=n(1321),E=n(1362);n(1404);var O={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},a=function(e){Object(u.a)(i,e);var n,a,o=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function i(){var r;Object(s.a)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=o.call.apply(o,[this].concat(t))).state={email:"",password:"",fullname:"",captcha:"",customErrorInputMap:Object.assign({},O)},r.handleChange=function(t){return function(e){r.setState(Object(c.a)({},t,e))}},r.runBeforeCheckCaptcha=function(t){var e=r.state.captcha,n=r.props,a=n.captchaNeeded,n=n.checkCaptcha;if(!r.captchaValidated&&a)return e?void n(e).then(function(e){e.payload.success&&(r.captchaValidated=!0,t())}):void r.setState({validationResult:{message:"è¯·è¾“å…¥éªŒè¯ç ",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},r.handleSubmit=function(){r.runBeforeCheckCaptcha(function(){var e=r.props,t=e.validateAndRegister;(0,e.resetRegisterValidateResult)();e=r.state;t({source:"com.zhihu.web",registerType:"email",email:e.email,password:e.password,fullname:e.fullname})})},r}return Object(r.a)(i,[{key:"componentDidMount",value:function(){this.props.isLogin&&(location.href="https://www.zhihu.com/logout?next=/email-register")}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,t=e.captchaValidationMessage,e=e.registerConfirmSucceeded;!a&&e&&(location.href="/"),!n&&t&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:t,needsRefresh:Boolean(t),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this.state.validationResult,t=this.props.registerValidateErrors,n=t.email,a=(n=void 0===n?{}:n).message,n=t.fullname,n=(n=void 0===n?{}:n).message,t=t.password,t=(t=void 0===t?{}:t).message;return Object(h.c)(b.b,{className:"SignContainer-content EmailRegister",onSubmit:this.handleSubmit,children:[Object(h.b)(v.a,{onChange:this.handleChange("fullname"),name:"fullname",placeholder:"ç”¨æˆ·å",manualValidateError:n}),Object(h.b)(A.a,{type:"register",placeholder:"è¾“å…¥é‚®ç®±",onChange:this.handleChange("email"),manualValidateError:a,supportedCountriesShown:!1}),Object(h.b)(C.a,{onChange:this.handleChange("password"),manualValidateError:t}),Object(h.b)(E.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:!0,onUpdateInput:this.handleChange("captcha"),validationResult:e}),Object(h.b)(p.c,{className:"EmailRegister-submitButton",preset:"primary",color:"blue",type:"submit",children:"æ³¨å†Œ"})]})}}]),i}(a.Component);t.a=Object(o.compose)(Object(f.b)(),Object(i.connect)(function(e){var t=e.captcha,n=t.captchaNeeded,t=t.captchaValidationMessage,e=e.register;return{captchaNeeded:n,registerValidateErrors:e.registerValidateErrors,captchaValidationMessage:t,registerConfirmSucceeded:e.registerConfirmSucceeded}},{checkCaptcha:m.b,validateAndRegister:g.f,resetRegisterValidateResult:g.d}))(a)},1437:function(e,t,n){"use strict";var i=n(35),c=n(14),s=n(15),u=n(16),l=n(17),d=n(9),h=n(2),a=n(3),r=n.n(a),o=n(1),a=n(11),p=n.n(a),f=n(31),a=n(83),g=n.n(a);o=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(e){var t;return Object(c.a)(this,o),(t=r.call(this,e)).clearTimer=function(){t.timer&&window.clearInterval(t.timer)},t.handleClick=function(e){t.state.isCounting||t.startTiming(e)},t.state={countDownTime:e.countDownTime,isCounting:!1},t.isInitialState=!0,t}return Object(s.a)(o,[{key:"componentDidMount",value:function(){this.props.startAtOnce&&this.startTiming()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.interceptTime,a=t.reStartTime,t=e.interceptTime,e=e.reStartTime;n!==t&&this.resetTiming(),a!==e&&(this.resetTiming(),this.startTiming())}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"resetTiming",value:function(){this.clearTimer(),this.setState({countDownTime:this.props.countDownTime,isCounting:!1})}},{key:"startTiming",value:function(e){var t=this,n=this.props,a=n.event,r=n.countDownEndEvent,o=null,n=function(){t.isInitialState=!1,t.setState({isCounting:!0}),t.timer=setInterval(function(){var e=t.state.countDownTime;e<=0?(r&&r(),t.resetTiming()):t.setState({countDownTime:e-1})},1e3)};!1!==(o="function"==typeof a?a(e,n):o)&&n()}},{key:"renderText",value:function(){var e=this.props,t=e.initialText,n=e.resetText,a=e.countingText,r=this.state,e=r.countDownTime;return r.isCounting?a({count:e}):!this.isInitialState&&n||t}},{key:"render",value:function(){var e=g()(this.props,["initialText","resetText","countingText","startAtOnce","countDownTime","event","interceptTime","countDownEndEvent","reStartTime"]),t=e.className,n=e.disabled,a=Object(i.a)(e,["className","disabled"]),e=this.state.isCounting;return Object(h.b)(f.c,Object.assign({className:p()("CountingDownButton",t,{"is-counting":e})},a,{onClick:this.handleClick,disabled:n||e,children:this.renderText()}))}}]),o}(o.Component);o.propTypes={countDownTime:r.a.number,startAtOnce:r.a.bool,initialText:r.a.string.isRequired,resetText:r.a.string,countingText:r.a.func.isRequired,event:r.a.func,countDownEndEvent:r.a.func,interceptTime:r.a.number,reStartTime:r.a.number},o.defaultProps={countDownTime:60,startAtOnce:!1,interceptTime:-1,reStartTime:-1},t.a=o},1693:function(e,t,n){"use strict";var B,I,h,p;function a(i,e,t){var c,s,u,d,l,h,p=0,f=[],g=0,m=!1,r=[],o=[],b=!1,A=!1,C=-1,n=(t=t||{}).encoding||"UTF8";if((h=t.numRounds||1)!==parseInt(h,10)||h<1)throw Error("numRounds must a integer >= 1");if("SHA-1"===i)d=512,E=X,l=$,u=160,O=function(e){return e.slice()};else if(0===i.lastIndexOf("SHA-",0))if(E=function(e,t){return ee(e,t,i)},l=function(e,t,n,a){var r,o;if("SHA-224"===i||"SHA-256"===i)r=15+(t+65>>>9<<4),o=16;else{if("SHA-384"!==i&&"SHA-512"!==i)throw Error("Unexpected error in SHA-2 implementation");r=31+(t+129>>>10<<5),o=32}for(;e.length<=r;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[r]=4294967295&(t+=n),e[r-1]=t/4294967296|0,n=e.length,t=0;t<n;t+=o)a=ee(e.slice(t,t+o),a,i);if("SHA-224"===i)e=[a[0],a[1],a[2],a[3],a[4],a[5],a[6]];else if("SHA-256"===i)e=a;else if("SHA-384"===i)e=[a[0].a,a[0].b,a[1].a,a[1].b,a[2].a,a[2].b,a[3].a,a[3].b,a[4].a,a[4].b,a[5].a,a[5].b];else{if("SHA-512"!==i)throw Error("Unexpected error in SHA-2 implementation");e=[a[0].a,a[0].b,a[1].a,a[1].b,a[2].a,a[2].b,a[3].a,a[3].b,a[4].a,a[4].b,a[5].a,a[5].b,a[6].a,a[6].b,a[7].a,a[7].b]}return e},O=function(e){return e.slice()},"SHA-224"===i)d=512,u=224;else if("SHA-256"===i)d=512,u=256;else if("SHA-384"===i)d=1024,u=384;else{if("SHA-512"!==i)throw Error("Chosen SHA variant is not supported");d=1024,u=512}else{if(0!==i.lastIndexOf("SHA3-",0)&&0!==i.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var v=6,E=te,O=function(e){for(var t=[],n=0;n<5;n+=1)t[n]=e[n].slice();return t},C=1;if("SHA3-224"===i)d=1152,u=224;else if("SHA3-256"===i)d=1088,u=256;else if("SHA3-384"===i)d=832,u=384;else if("SHA3-512"===i)d=576,u=512;else if("SHAKE128"===i)d=1344,u=-1,v=31,A=!0;else{if("SHAKE256"!==i)throw Error("Chosen SHA variant is not supported");d=1088,u=-1,v=31,A=!0}l=function(e,t,n,a,r){for(var o=v,i=[],c=(n=d)>>>5,s=0,u=t>>>5,l=0;l<u&&n<=t;l+=c)a=te(e.slice(l,l+c),a),t-=n;for(e=e.slice(l),t%=n;e.length<c;)e.push(0);for(e[(l=t>>>3)>>2]^=o<<l%4*8,e[c-1]^=2147483648,a=te(e,a);32*i.length<r&&(e=a[s%5][s/5|0],i.push(e.b),!(32*i.length>=r));)i.push(e.a),0==64*(s+=1)%n&&(te(null,a),s=0);return i}}s=N(e,n,C),c=_(i),this.setHMACKey=function(e,t,n){var a;if(!0===m)throw Error("HMAC key already set");if(!0===b)throw Error("Cannot set HMAC key after calling update");if(!0===A)throw Error("SHAKE is not supported for HMAC");for(e=(t=N(t,(n||{}).encoding||"UTF8",C)(e)).binLen,t=t.value,n=(a=d>>>3)/4-1,a<e/8&&(t=l(t,e,0,_(i),u));t.length<=n;)t.push(0);for(e=0;e<=n;e+=1)r[e]=909522486^t[e],o[e]=1549556828^t[e];c=E(r,c),p=d,m=!0},this.update=function(e){var t,n,a,r=0,o=d>>>5;for(e=(t=s(e,f,g)).binLen,n=t.value,t=e>>>5,a=0;a<t;a+=o)r+d<=e&&(c=E(n.slice(a,a+o),c),r+=d);p+=r,f=n.slice(r>>>5),g=e%d,b=!0},this.getHash=function(e,t){var n,a,r,o;if(!0===m)throw Error("Cannot call getHash after setting HMAC key");if(r=Q(t),!0===A){if(-1===r.shakeLen)throw Error("shakeLen must be specified in options");u=r.shakeLen}switch(e){case"HEX":n=function(e){return w(e,u,C,r)};break;case"B64":n=function(e){return y(e,u,C,r)};break;case"BYTES":n=function(e){return S(e,u,C)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return j(e,u,C)};break;case"UINT8ARRAY":try{a=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}n=function(e){return k(e,u,C)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(o=l(f.slice(),g,p,O(c),u),a=1;a<h;a+=1)!0===A&&0!=u%32&&(o[o.length-1]&=16777215>>>24-u%32),o=l(o,u,0,_(i),u);return n(o)},this.getHMAC=function(e,t){var n,a;if(!1===m)throw Error("Cannot call getHMAC without first setting HMAC key");switch(a=Q(t),e){case"HEX":n=function(e){return w(e,u,C,a)};break;case"B64":n=function(e){return y(e,u,C,a)};break;case"BYTES":n=function(e){return S(e,u,C)};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return j(e,u,C)};break;case"UINT8ARRAY":try{n=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}n=function(e){return k(e,u,C)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return t=l(f.slice(),g,p,O(c),u),e=E(o,_(i)),n(e=l(t,u,d,e,u))}}function R(e,t){this.a=e,this.b=t}function r(e,t,n,a){var r,o,i,c,s;for(t=t||[0],o=(n=n||0)>>>3,s=-1===a?3:0,r=0;r<e.length;r+=1)i=(c=r+o)>>>2,t.length<=i&&t.push(0),t[i]|=e[r]<<8*(s+c%4*a);return{value:t,binLen:8*e.length+n}}function w(e,t,n,a){var r,o,i,c="";for(t/=8,i=-1===n?3:0,r=0;r<t;r+=1)o=e[r>>>2]>>>8*(i+r%4*n),c+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return a.outputUpper?c.toUpperCase():c}function y(e,t,n,a){for(var r,o,i="",c=t/8,s=-1===n?3:0,u=0;u<c;u+=3)for(r=u+1<c?e[u+1>>>2]:0,o=u+2<c?e[u+2>>>2]:0,o=(e[u>>>2]>>>8*(s+u%4*n)&255)<<16|(r>>>8*(s+(u+1)%4*n)&255)<<8|o>>>8*(s+(u+2)%4*n)&255,r=0;r<4;r+=1)i+=8*u+6*r<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63):a.b64Pad;return i}function S(e,t,n){var a,r,o,i="";for(t/=8,o=-1===n?3:0,a=0;a<t;a+=1)r=e[a>>>2]>>>8*(o+a%4*n)&255,i+=String.fromCharCode(r);return i}function j(e,t,n){t/=8;for(var a=new ArrayBuffer(t),r=new Uint8Array(a),o=-1===n?3:0,i=0;i<t;i+=1)r[i]=e[i>>>2]>>>8*(o+i%4*n)&255;return a}function k(e,t,n){t/=8;for(var a=new Uint8Array(t),r=-1===n?3:0,o=0;o<t;o+=1)a[o]=e[o>>>2]>>>8*(r+o%4*n)&255;return a}function Q(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(t.outputUpper=(e=e||{}).outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function N(e,h,p){switch(h){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,n){var a,r,o,i,c,s,u=e.length;if(0!=u%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],c=(n=n||0)>>>3,s=-1===p?3:0,a=0;a<u;a+=2){if(r=parseInt(e.substr(a,2),16),isNaN(r))throw Error("String of HEX type contains invalid characters");for(o=(i=(a>>>1)+c)>>>2;t.length<=o;)t.push(0);t[o]|=r<<8*(s+i%4*p)}return{value:t,binLen:4*u+n}};break;case"TEXT":e=function(e,t,n){var a,r,o,i,c,s,u,l,d=0;if(t=t||[0],c=(n=n||0)>>>3,"UTF8"===h)for(l=-1===p?3:0,o=0;o<e.length;o+=1)for(r=[],(a=e.charCodeAt(o))<128?r.push(a):a<2048?(r.push(192|a>>>6),r.push(128|63&a)):a<55296||57344<=a?r.push(224|a>>>12,128|a>>>6&63,128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(o+=1)),r.push(240|a>>>18,128|a>>>12&63,128|a>>>6&63,128|63&a)),i=0;i<r.length;i+=1){for(s=(u=d+c)>>>2;t.length<=s;)t.push(0);t[s]|=r[i]<<8*(l+u%4*p),d+=1}else if("UTF16BE"===h||"UTF16LE"===h)for(l=-1===p?2:0,r="UTF16LE"===h&&1!==p||"UTF16LE"!==h&&1===p,o=0;o<e.length;o+=1){for(a=e.charCodeAt(o),!0===r&&(a=(i=255&a)<<8|a>>>8),s=(u=d+c)>>>2;t.length<=s;)t.push(0);t[s]|=a<<8*(l+u%4*p),d+=2}return{value:t,binLen:8*d+n}};break;case"B64":e=function(e,t,n){var a,r,o,i,c,s,u,l,d=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(r=e.indexOf("="),e=e.replace(/\=/g,""),-1!==r&&r<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],s=(n=n||0)>>>3,l=-1===p?3:0,r=0;r<e.length;r+=4){for(c=e.substr(r,4),o=i=0;o<c.length;o+=1)i|=(a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(o)))<<18-6*o;for(o=0;o<c.length-1;o+=1){for(a=(u=d+s)>>>2;t.length<=a;)t.push(0);t[a]|=(i>>>16-8*o&255)<<8*(l+u%4*p),d+=1}}return{value:t,binLen:8*d+n}};break;case"BYTES":e=function(e,t,n){var a,r,o,i,c,s;for(t=t||[0],o=(n=n||0)>>>3,s=-1===p?3:0,r=0;r<e.length;r+=1)a=e.charCodeAt(r),i=(c=r+o)>>>2,t.length<=i&&t.push(0),t[i]|=a<<8*(s+c%4*p);return{value:t,binLen:8*e.length+n}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,n){return r(new Uint8Array(e),t,n,p)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,n){return r(e,t,n,p)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function l(e,t){return e<<t|e>>>32-t}function f(e,t){return 32<t?new R(e.b<<(t-=32)|e.a>>>32-t,e.a<<t|e.b>>>32-t):0!==t?new R(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function o(e,t){return e>>>t|e<<32-t}function i(e,t){var n=new R(e.a,e.b);return t<=32?new R(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new R(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function c(e,t){return t<=32?new R(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new R(0,e.a>>>t-32)}function T(e,t,n){return e&t^~e&n}function P(e,t,n){return new R(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function M(e,t,n){return e&t^e&n^t&n}function D(e,t,n){return new R(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function V(e){return o(e,2)^o(e,13)^o(e,22)}function U(e){var t=i(e,28),n=i(e,34);return e=i(e,39),new R(t.a^n.a^e.a,t.b^n.b^e.b)}function F(e){return o(e,6)^o(e,11)^o(e,25)}function x(e){var t=i(e,14),n=i(e,18);return e=i(e,41),new R(t.a^n.a^e.a,t.b^n.b^e.b)}function z(e){return o(e,7)^o(e,18)^e>>>3}function q(e){var t=i(e,1),n=i(e,8);return e=c(e,7),new R(t.a^n.a^e.a,t.b^n.b^e.b)}function L(e){return o(e,17)^o(e,19)^e>>>10}function H(e){var t=i(e,19),n=i(e,61);return e=c(e,6),new R(t.a^n.a^e.a,t.b^n.b^e.b)}function J(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function W(e,t,n,a){var r=(65535&e)+(65535&t)+(65535&n)+(65535&a);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)&65535)<<16|65535&r}function K(e,t,n,a,r){var o=(65535&e)+(65535&t)+(65535&n)+(65535&a)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)+(o>>>16)&65535)<<16|65535&o}function Y(e,t){var n,a=(65535&e.b)+(65535&t.b),r=(65535&(n=(e.b>>>16)+(t.b>>>16)+(a>>>16)))<<16|65535&a;return a=(65535&e.a)+(65535&t.a)+(n>>>16),new R((65535&(e.a>>>16)+(t.a>>>16)+(a>>>16))<<16|65535&a,r)}function Z(e,t,n,a){var r,o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b),i=(65535&(r=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(o>>>16)))<<16|65535&o;return o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(r>>>16),new R((65535&(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(o>>>16))<<16|65535&o,i)}function G(e,t,n,a,r){var o,i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b)+(65535&r.b),c=(65535&(o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r.b>>>16)+(i>>>16)))<<16|65535&i;return i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(65535&r.a)+(o>>>16),new R((65535&(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r.a>>>16)+(i>>>16))<<16|65535&i,c)}function g(e,t){return new R(e.a^t.a,e.b^t.b)}function _(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new R(3418070365,n[0]),new R(1654270250,n[1]),new R(2438529370,n[2]),new R(355462360,n[3]),new R(1731405415,n[4]),new R(41048885895,n[5]),new R(3675008525,n[6]),new R(1203062813,n[7])];break;case"SHA-512":n=[new R(t[0],4089235720),new R(t[1],2227873595),new R(t[2],4271175723),new R(t[3],1595750129),new R(t[4],2917565137),new R(t[5],725511199),new R(t[6],4215389547),new R(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;e<5;e+=1)n[e]=[new R(0,0),new R(0,0),new R(0,0),new R(0,0),new R(0,0)]}return n}function X(e,t){for(var n,a=[],r=t[0],o=t[1],i=t[2],c=t[3],s=t[4],u=0;u<80;u+=1)a[u]=u<16?e[u]:l(a[u-3]^a[u-8]^a[u-14]^a[u-16],1),n=u<20?K(l(r,5),o&i^~o&c,s,1518500249,a[u]):u<40?K(l(r,5),o^i^c,s,1859775393,a[u]):u<60?K(l(r,5),M(o,i,c),s,2400959708,a[u]):K(l(r,5),o^i^c,s,3395469782,a[u]),s=c,c=i,i=l(o,30),o=r,r=n;return t[0]=J(r,t[0]),t[1]=J(o,t[1]),t[2]=J(i,t[2]),t[3]=J(c,t[3]),t[4]=J(s,t[4]),t}function $(e,t,n,a){for(var r=15+(t+65>>>9<<4);e.length<=r;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[r]=4294967295&(t+=n),e[r-1]=t/4294967296|0,t=e.length,r=0;r<t;r+=16)a=X(e.slice(r,r+16),a);return a}function ee(e,t,n){var a,r,o,i,c,s,u,l,d,h,p,f,g,m,b,A,C,v,E,O,w,y,S,j=[];if("SHA-224"===n||"SHA-256"===n)h=64,f=1,y=Number,g=J,m=W,b=K,A=z,C=L,v=V,E=F,w=M,O=T,S=B;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");h=80,f=2,y=R,g=Y,m=Z,b=G,A=q,C=H,v=U,E=x,w=D,O=P,S=I}for(n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],c=t[5],s=t[6],u=t[7],p=0;p<h;p+=1)p<16?(l=e.length<=(d=p*f)?0:e[d],d=e.length<=d+1?0:e[d+1],j[p]=new y(l,d)):j[p]=m(C(j[p-2]),j[p-7],A(j[p-15]),j[p-16]),l=b(u,E(i),O(i,c,s),S[p],j[p]),d=g(v(n),w(n,a,r)),u=s,s=c,c=i,i=g(o,l),o=r,r=a,a=n,n=g(l,d);return t[0]=g(n,t[0]),t[1]=g(a,t[1]),t[2]=g(r,t[2]),t[3]=g(o,t[3]),t[4]=g(i,t[4]),t[5]=g(c,t[5]),t[6]=g(s,t[6]),t[7]=g(u,t[7]),t}function te(e,t){var n,a,r,o=[],i=[];if(null!==e)for(a=0;a<e.length;a+=2)t[(a>>>1)%5][(a>>>1)/5|0]=g(t[(a>>>1)%5][(a>>>1)/5|0],new R(e[a+1],e[a]));for(n=0;n<24;n+=1){for(r=_("SHA3-"),a=0;a<5;a+=1){var c=t[a][0],s=t[a][1],u=t[a][2],l=t[a][3],d=t[a][4];o[a]=new R(c.a^s.a^u.a^l.a^d.a,c.b^s.b^u.b^l.b^d.b)}for(a=0;a<5;a+=1)i[a]=g(o[(a+4)%5],f(o[(a+1)%5],1));for(a=0;a<5;a+=1)for(c=0;c<5;c+=1)t[a][c]=g(t[a][c],i[a]);for(a=0;a<5;a+=1)for(c=0;c<5;c+=1)r[c][(2*a+3*c)%5]=f(t[a][c],p[a][c]);for(a=0;a<5;a+=1)for(c=0;c<5;c+=1)t[a][c]=g(r[a][c],new R(~r[(a+1)%5][c].a&r[(a+2)%5][c].a,~r[(a+1)%5][c].b&r[(a+2)%5][c].b));t[0][0]=g(t[0][0],h[n])}return t}I=[new R((B=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new R(B[1],602891725),new R(B[2],3964484399),new R(B[3],2173295548),new R(B[4],4081628472),new R(B[5],3053834265),new R(B[6],2937671579),new R(B[7],3664609560),new R(B[8],2734883394),new R(B[9],1164996542),new R(B[10],1323610764),new R(B[11],3590304994),new R(B[12],4068182383),new R(B[13],991336113),new R(B[14],633803317),new R(B[15],3479774868),new R(B[16],2666613458),new R(B[17],944711139),new R(B[18],2341262773),new R(B[19],2007800933),new R(B[20],1495990901),new R(B[21],1856431235),new R(B[22],3175218132),new R(B[23],2198950837),new R(B[24],3999719339),new R(B[25],766784016),new R(B[26],2566594879),new R(B[27],3203337956),new R(B[28],1034457026),new R(B[29],2466948901),new R(B[30],3758326383),new R(B[31],168717936),new R(B[32],1188179964),new R(B[33],1546045734),new R(B[34],1522805485),new R(B[35],2643833823),new R(B[36],2343527390),new R(B[37],1014477480),new R(B[38],1206759142),new R(B[39],344077627),new R(B[40],1290863460),new R(B[41],3158454273),new R(B[42],3505952657),new R(B[43],106217008),new R(B[44],3606008344),new R(B[45],1432725776),new R(B[46],1467031594),new R(B[47],851169720),new R(B[48],3100823752),new R(B[49],1363258195),new R(B[50],3750685593),new R(B[51],3785050280),new R(B[52],3318307427),new R(B[53],3812723403),new R(B[54],2003034995),new R(B[55],3602036899),new R(B[56],1575990012),new R(B[57],1125592928),new R(B[58],2716904306),new R(B[59],442776044),new R(B[60],593698344),new R(B[61],3733110249),new R(B[62],2999351573),new R(B[63],3815920427),new R(3391569614,3928383900),new R(3515267271,566280711),new R(3940187606,3454069534),new R(4118630271,4000239992),new R(116418474,1914138554),new R(174292421,2731055270),new R(289380356,3203993006),new R(460393269,320620315),new R(685471733,587496836),new R(852142971,1086792851),new R(1017036298,365543100),new R(1126000580,2618297676),new R(1288033470,3409855158),new R(1501505948,4234509866),new R(1607167915,987167468),new R(1816402316,1246189591)],h=[new R(0,1),new R(0,32898),new R(2147483648,32906),new R(2147483648,2147516416),new R(0,32907),new R(0,2147483649),new R(2147483648,2147516545),new R(2147483648,32777),new R(0,138),new R(0,136),new R(0,2147516425),new R(0,2147483658),new R(0,2147516555),new R(2147483648,139),new R(2147483648,32905),new R(2147483648,32771),new R(2147483648,32770),new R(2147483648,128),new R(0,32778),new R(2147483648,2147483658),new R(2147483648,2147516545),new R(2147483648,32896),new R(0,2147483649),new R(2147483648,2147516424)],p=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(t=function(){return a}.call(t,n,t,e))||(e.exports=t)},1694:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M12.003 2c-2.265 0-6.29 1.364-6.29 7.325v1.195S3.55 14.96 3.55 17.474c0 .665.17 1.025.281 1.025.114 0 .902-.484 1.748-2.072 0 0-.18 2.197 1.904 3.967 0 0-1.77.495-1.77 1.182 0 .686 4.078.43 6.29 0 2.239.425 6.287.687 6.287 0 0-.688-1.768-1.182-1.768-1.182 2.085-1.77 1.905-3.967 1.905-3.967.845 1.588 1.634 2.072 1.746 2.072.111 0 .283-.36.283-1.025 0-2.514-2.166-6.954-2.166-6.954V9.325C18.29 3.364 14.268 2 12.003 2z",fillRule:"evenodd"}))};n.defaultProps={name:"QQ"},t.a=n},1695:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(18),n=function(e){return r.a.createElement(o.a,e,r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#0F88EB",d:"M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"}),r.a.createElement("path",{fill:"#FFF",d:"M9.78 15.728l-2.633-2.999s-.458-.705.242-1.362c.7-.657 1.328-.219 1.328-.219l1.953 2.132 4.696-4.931s.663-.348 1.299.198c.636.545.27 1.382.27 1.382s-3.466 3.858-5.376 5.782c-.98.93-1.778.017-1.778.017z"})))};n.defaultProps={name:"BadgeCert"},t.a=n},1770:function(e,t,n){"use strict";var c=n(14),s=n(15),u=n(16),l=n(17),d=n(9),Xe=n(2),$e=n(1),a=n.n($e),r=n(11),b=n.n(r),h=n(90),et=n(30),o=n(249),tt=n(0),i=n(66),p=n(19),nt=n(26),at=n(368),A=n(31),C=n(1128),f=n(364),g=n(24),rt=n(421),ot=n(122),it=n(1021),v=n(1362),E=n(1291),m=n(841),O=n(35),w=n(3),r=n.n(w),y=n(1437),S=n(1403),j=n(1111);function B(){var e=Object(m.a)([""," ç§’åŽå¯é‡å‘"]);return B=function(){return e},e}w=function(e){Object(u.a)(r,e);var n,a,t=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.countDownEvent,n=e.countDownEndEvent,a=e.startAtOnce,r=e.interceptTime,o=e.isEmail,i=e.reStartTime,c=e.smsType,e=Object(O.a)(e,["countDownEvent","countDownEndEvent","startAtOnce","interceptTime","isEmail","reStartTime","smsType"]),o=o?"é‚®ç®±":"voice"===c?"è¯­éŸ³":"çŸ­ä¿¡";return Object(Xe.c)("div",{className:"SignFlow SignFlow-smsInputContainer",children:[Object(Xe.b)(j.a,Object.assign({name:"digits",className:"SignFlow-smsInput",type:"number",smsType:c,errorMessageClassName:"SignFlow-smsInputErrorMessage",placeholder:"è¾“å…¥ 6 ä½".concat(o,"éªŒè¯ç "),validations:[{type:"required",message:"è¯·è¾“å…¥".concat(o,"éªŒè¯ç "),className:"SignFlow-smsInputRequiredErrorMask"}]},e)),Object(Xe.b)(y.a,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"èŽ·å–".concat(o,"éªŒè¯ç "),resetText:"é‡æ–°èŽ·å–".concat(o,"éªŒè¯ç "),countingText:Object(S.a)(B(),"count"),startAtOnce:a,event:t,countDownEndEvent:n,interceptTime:r,reStartTime:i})]})}}]),r}($e.Component);w.propTypes={countDownEvent:r.a.func.isRequired,startAtOnce:r.a.bool,interceptTime:r.a.number,reStartTime:r.a.number,isEmail:r.a.bool,countDownEndEvent:r.a.func,smsType:r.a.string},w.defaultProps={startAtOnce:!1,isEmail:!1};var I=w,R=n(1320),k=n(1321),w=n(38),Q=n.n(w);var N={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},w=function(e){Object(u.a)(r,e);var n,a,t=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function r(e){var h;return Object(c.a)(this,r),(h=t.call(this,e)).handleCountDownEndEvent=function(){h.setState({smsBackUpDisplay:!0})},h.handleChange=function(t){return function(e){h.setState(Object(tt.a)({},t,e))}},h.testPhoneNo=function(){var e=h.state,t=e.selectedCountry.code,e=e.phoneNo;return"+86"!==t||/^\d{11}$/.test(e)},h.handleBackUpDigits=function(){h.setState({smsType:"text"===h.state.smsType?"voice":"text",reStartTime:Date.now()})},h.sendDigits=function(){var e=h.props,t=e.sendDigits,n=e.validateRegisterForm;(0,e.resetRegisterValidateResult)();var a=h.state,r=a.phoneNo,e=a.selectedCountry,o=a.smsType,i="".concat(e.code).concat(r);n({phoneNo:i}).then(function(e){return e.payload.success?(h.setState({smsBackUpDisplay:!1}),void t(i,o)):void h.setState({smsInputInterceptTime:Date.now()})})},h.runBeforeCheckCaptcha=function(t){var e=h.state.captcha,n=h.props,a=n.captchaNeeded,n=n.checkCaptcha;if(!h.captchaValidated&&a)return e?void n(e,h.captchaIsChinese?"cn":"en").then(function(e){e.payload.success&&(h.captchaValidated=!0,t())}):void h.setState({validationResult:{message:h.captchaIsChinese?"è¯·ç‚¹å‡»å›¾ä¸­å€’ç«‹çš„æ–‡å­—":"è¯·è¾“å…¥éªŒè¯ç ",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},h.runBeforeResetValidateResult=function(e){h.props.resetRegisterValidateResult(),h.setState({customErrorInputMap:Object.assign({},N),validationResult:{needsRefresh:!1,timestamp:Date.now()}},function(){e()})},h.handleSendDigits=function(){et.a.trackEvent(Object(i.a)(h),{id:4940}),h.runBeforeResetValidateResult(function(){var e=h.state.phoneNo;h.testPhoneNo()?h.runBeforeResetValidateResult(function(){h.runBeforeCheckCaptcha(function(){h.sendDigits()})}):h.setState({customErrorInputMap:Object.assign({},h.state.customErrorInputMap,{phoneNoError:e?"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·":"è¯·è¾“å…¥æ‰‹æœºå·"}),smsInputInterceptTime:Date.now()})})},h.parseErrorMessages=function(){var e=h.props,t=e.registerValidateErrors,n=void 0===t?{}:t,a=e.onChangeToSigin,r=n.phoneNo,o=void 0===r?{}:r,t=n.fullname,e=void 0===t?{}:t,r=n.password,t=void 0===r?{}:r,r=n.username,n=void 0===r?"":r,r=o.code,o=o.message;return{phoneNoError:r===g.s?Object(Xe.c)("span",{children:["è¯¥æ‰‹æœºå·å·²æ³¨å†ŒÂ Â·Â ",Object(Xe.b)(A.c,{preset:"plain",style:{color:"#3f3f3f"},onClick:function(){a()},children:"ç›´æŽ¥ç™»å½•"})]}):o,fullnameError:e.message,passwordError:t.message,usernameError:n}},h.handlePhoneNumberFormSubmit=function(o){et.a.trackEvent(Object(i.a)(h),{id:4942}),h.runBeforeCheckCaptcha(function(){h.runBeforeResetValidateResult(function(){var e=o.digits,t=h.props,n=t.validateDigits,a=t.onSetShowHeader,r=h.state,t=r.phoneNo,r=r.selectedCountry;t&&e&&n("".concat(r.code).concat(t),e).then(function(e){e.payload.success?h.setState({digitsValidated:!0},function(){a(!1)}):h.setState({customErrorInputMap:Object.assign({},h.state.customErrorInputMap,{digitsError:"éªŒè¯ç å¡«å†™é”™è¯¯"})})})})})},h.handleSetNameFormSubmit=function(d){h.runBeforeCheckCaptcha(function(){h.runBeforeResetValidateResult(function(){var e=h.state,t=e.phoneNo,n=e.digits,a=e.password,r=e.fullname,o=e.selectedCountry,i=h.props,c=i.confirmRegister,s=i.validateRegister,e=i.nextUrl,i={phoneNo:"".concat(o.code).concat(t),password:a,digits:n,fullname:r},e=Object(at.c)(e),u=e.utm_source,l=e.utm_medium;s(i).then(function(e){e.payload.success&&c({phoneNo:"".concat(o.code).concat(t),digits:n,password:a,fullname:r||d.fullname,registerType:"phone_digits",source:"com.zhihu.web",utmSource:u,refSource:l})})})})},h.state={fullname:"",password:"",captcha:"",phoneNo:"",digits:"",smsType:"text",digitsValidated:!1,smsBackUpDisplay:!0,selectedCountry:{name:"ä¸­å›½",code:"+86"},validationResult:{},customErrorInputMap:Object.assign({},N),smsInputInterceptTime:-1,reStartTime:Date.now()},h.captchaIsChinese=Math.random()<.5,h}return Object(s.a)(r,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=t.sendDigitsError,o=t.isInSignPage,i=t.nextUrl,c=e.captchaValidationMessage,s=e.registerConfirmSucceeded,u=e.sendDigitsError;if(!a&&s){t=this.state,e=t.selectedCountry.code,t=t.phoneNo;return et.a.trackEvent(this,{action:"StatusReport",id:234},{status:{result:"Success",event:{action:"SignUp",element:"Button"}},account:{phone:"".concat(e).concat(t),type:"Zhihu"}}),void(i?location.href=i:o?location.href="/":location.reload())}(!r&&u||a!==s&&!1===s)&&(s={},!r&&u&&(s={smsInputInterceptTime:Date.now(),smsBackUpDisplay:!0},this.captchaValidated=!1),this.setState(Object.assign({},s,{validationResult:{message:r,needsRefresh:!0,timestamp:Date.now()}}))),!n&&c&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:c,needsRefresh:Boolean(c),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.phoneNo,a=t.smsType,r=t.password,o=t.reStartTime,i=t.digitsValidated,c=t.validationResult,s=t.smsBackUpDisplay,u=t.customErrorInputMap,l=t.smsInputInterceptTime,d=this.props,h=d.sendDigitsError,p=d.onSetShowHeader,f=this.parseErrorMessages(),g=f.phoneNoError,m=f.fullnameError,t=f.passwordError,d=f.usernameError,f=u.phoneNoError,u=u.digitsError;return Object(Xe.b)("div",{className:"Register",children:i?Object(Xe.c)("div",{className:"Register-padName",children:[Object(Xe.c)("div",{className:"Register-padNameHeader",children:[Object(Xe.b)(A.c,{onClick:function(){e.setState({digitsValidated:!1},function(){p(!0)})},children:Object(Xe.b)(C.a,{size:30})}),Object(Xe.b)("span",{className:"Register-padNameTitle",children:"è®¾ç½®ç”¨æˆ·åå’Œå¯†ç "})]}),Object(Xe.c)(it.b,{onSubmit:this.handleSetNameFormSubmit,children:[Object(Xe.b)(k.a,{name:"fullname",placeholder:"ç”¨æˆ·å",onChange:this.handleChange("fullname"),manualValidateError:m}),Object(Xe.b)(R.a,{defaultValue:r,onChange:this.handleChange("password"),manualValidateError:t}),Object(Xe.b)(A.c,{className:"Register-getIn",type:"submit",preset:"primary",color:"blue",children:"è¿›å…¥çŸ¥ä¹Ž"})]})]}):Object(Xe.b)($e.Fragment,{children:Object(Xe.c)("div",{className:"Register-content",children:[Object(Xe.c)(it.b,{onSubmit:this.handlePhoneNumberFormSubmit,children:[Object(Xe.b)(E.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:g||f||d}),Object(Xe.b)(v.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(n),onUpdateInput:this.handleChange("captcha"),validationResult:c}),Object(Xe.c)("div",{className:"Register-SMSInput",children:[Object(Xe.b)(I,{smsType:a,reStartTime:o,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:l,manualValidateError:u||h}),Object(Xe.b)("div",{className:b()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!s}),children:Object(Xe.c)("span",{onClick:this.handleBackUpDigits,children:["æŽ¥æ”¶","text"===a?"è¯­éŸ³":"çŸ­ä¿¡","éªŒè¯ç "]})})]}),Object(Xe.b)(A.c,{className:"Register-submitButton",preset:"primary",color:"blue",type:"submit",children:"æ³¨å†Œ"})]}),Object(Xe.c)("div",{className:"Register-footer",children:[Object(Xe.c)("span",{className:"Register-declaration",children:["æ³¨å†Œå³ä»£è¡¨åŒæ„",Object(Xe.b)("a",{href:"//".concat(Q.a.wwwHost,"/term/zhihu-terms"),children:"ã€ŠçŸ¥ä¹Žåè®®ã€‹"}),Object(Xe.b)("a",{href:"//".concat(Q.a.wwwHost,"/term/privacy"),children:"ã€Šéšç§ä¿æŠ¤æŒ‡å¼•ã€‹"})]}),Object(Xe.b)("a",{className:"Register-org",href:"//".concat(Q.a.wwwHost,"/org/signup"),onClick:function(e){return et.a.trackEvent(e.currentTarget,{id:4943})},children:"æ³¨å†Œæœºæž„å·"})]})]})})})}}]),r}($e.Component),f=(Object(p.compose)(Object(f.b)(function(){return{module:"SignUpForm",view:{id:233},trackCardShow:!0}}),Object(nt.connect)(function(e){var t=e.captcha,n=t.captchaNeeded,t=t.captchaValidationMessage,e=e.register;return{captchaNeeded:n,sendDigitsError:e.sendDigitsError,registerValidateErrors:e.registerValidateErrors,captchaValidationMessage:t,registerConfirmSucceeded:e.registerConfirmSucceeded}},{sendDigits:rt.e,checkCaptcha:ot.b,validateDigits:rt.g,confirmRegister:rt.a,validateRegister:rt.h,validateRegisterForm:rt.i,resetRegisterValidateResult:rt.d}))(w),n(1433),n(183)),T=n.n(f),ct=n(387),st=n(25),w=n(1693),P=n.n(w),M=(n(80),"c3cef7c66a1843f8b3a9e6a1e3160e20");"".concat("z_").concat("c0"),"".concat("SZYUpkoc0tvY").concat("Xh0V2E2UTB").concat("UID096dwe");var ut=function(e,t){var n=Date.now(),a=new P.a("SHA-1","TEXT");return a.setHMACKey("d1b964811afb40118a12068ff74a12f4","TEXT"),a.update(e),a.update(M),a.update("com.zhihu.web"),a.update(String(n)),Object.assign({clientId:M,grantType:e,timestamp:n,source:"com.zhihu.web",signature:a.getHMAC("HEX")},t)};function D(e){var t=e.onBack,n=(r=e.data).phoneNo,a=r.code,r=r.targetNo,e=e.onSubmit;return Object(Xe.c)("div",{className:"SMSIdentify",children:[Object(Xe.c)("div",{className:"SMSIdentify-back",onClick:t,children:[Object(Xe.b)(C.a,{fill:"#8590a6",size:36,center:!0}),"è¿”å›ž"]}),Object(Xe.b)("div",{className:"SMSIdentify-title",children:"èº«ä»½éªŒè¯"}),Object(Xe.c)("div",{className:"SMSIdentify-tip",children:["è¯·ç”¨æ‰‹æœºå·Â ",n.slice(0,-8),"****",n.slice(-4),"Â å‘é€çŸ­ä¿¡"]}),Object(Xe.c)("div",{className:"SMSIdentify-content",children:[Object(Xe.c)("div",{children:["çŸ­ä¿¡å†…å®¹",Object(Xe.b)("span",{children:a})]}),Object(Xe.c)("div",{children:["å‘é€åˆ°å·ç ",Object(Xe.b)("span",{children:r})]})]}),Object(Xe.b)("div",{className:"SMSIdentify-submitTip",children:"å‘é€å®ŒæˆåŽï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿›è¡Œæ ¡éªŒ"}),Object(Xe.b)(A.c,{className:"SMSIdentify-submit",preset:"primary",color:"blue",onClick:e,children:"æˆ‘å·²å‘é€"})]})}function lt(e){var t=e.handleChangeType,n=e.setState,a=e.handleChange,r=e.testPhoneNo,o=e.handleSendDigits,i=e.continueActionRef,c=e.captchaV2Ref,s=e.captchaNeeded,u=e.captchaV2;return Object(Xe.b)(L.Provider,{value:{handleChangeType:t,handleChange:a,testPhoneNo:r,handleSendDigits:o,setState:n,continueActionRef:i,captchaV2Ref:c,captchaNeeded:s,captchaV2:u},children:e.children})}function V(e){return a.a.createElement(K.a,Y({width:"116",height:"116",viewBox:"0 0 116 116"},e),a.a.createElement("path",{d:"M58 106c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-5c23.748 0 43-19.252 43-43S81.748 15 58 15 15 34.252 15 58s19.252 43 43 43zm-7.495-32.502L80.113 38.89a3.017 3.017 0 014.262-.017c1.184 1.176 1.17 3.075-.015 4.26l-31.71 31.71c-1.183 1.182-3.096 1.194-4.27.02l-12.52-12.52a2.997 2.997 0 01-.008-4.24 2.996 2.996 0 014.242.008L50.507 68.5z"}))}function U(e){return a.a.createElement(K.a,Z({width:"116",height:"116",viewBox:"0 0 116 116"},e),a.a.createElement("path",{d:"M58 106c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-5c23.748 0 43-19.252 43-43S81.748 15 58 15 15 34.252 15 58s19.252 43 43 43zm-4-19c0-2.21 1.795-4 4-4 2.21 0 4 1.795 4 4 0 2.21-1.795 4-4 4-2.21 0-4-1.795-4-4zm1-48.993A3.006 3.006 0 0158 30c1.657 0 3 1.334 3 3.007v36.986A3.006 3.006 0 0158 73c-1.657 0-3-1.334-3-3.007V33.007z",fillRule:"evenodd"}))}function F(e){return a.a.createElement(K.a,G({width:"52",height:"52",fill:"none"},e),a.a.createElement("mask",{id:"id-320414155-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},a.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),a.a.createElement("g",{mask:"url(#id-320414155-a)"},a.a.createElement("path",{fill:"#06F",d:"M0 0l52 52V0H0z"}),a.a.createElement("path",{fill:"#fff",d:"M22.125 4h13.75A4.125 4.125 0 0140 8.125v27.75A4.125 4.125 0 0135.875 40h-13.75A4.125 4.125 0 0118 35.875V8.125A4.125 4.125 0 0122.125 4zm6.938 34.222c1.139 0 2.062-.945 2.062-2.11 0-1.167-.923-2.112-2.063-2.112-1.139 0-2.062.945-2.062 2.111 0 1.166.923 2.111 2.063 2.111zM21 8.333v24h16v-24H21z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{fill:"#fff",d:"M46.996 15.482L39 19.064l-7.996-3.582A1.6 1.6 0 0132.6 14h12.8a1.6 1.6 0 011.596 1.482zM47 16.646V24.4a1.6 1.6 0 01-1.6 1.6H32.6a1.6 1.6 0 01-1.6-1.6v-7.754l8 3.584 8-3.584z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{fill:"#06F",d:"M31 15.483v1.17l8 3.577 8-3.577v-1.17l-8 3.581-8-3.581z"})))}var x={phoneNoError:null,fullnameError:null,digitsError:null},f=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var d;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(d=r.call.apply(r,[this].concat(t))).state={fullname:d.props.defaultFullname||"",avatarPath:"",phoneNo:"",digits:"",captcha:"",isRegister:null,smsBackUpDisplay:!0,smsType:"text",selectedCountry:{name:"ä¸­å›½",code:"+86"},smsInputInterceptTime:-1,reStartTime:-1,customErrorInputMap:Object.assign({},x),validationResult:{}},d.captchaIsChinese=Math.random()<.5,d.getSocialInfo=function(e){var t=e||d.props,e=t.getSocialInfo,t=t.socialType;t&&e(t).then(function(e){var t=e.payload,e=t.name,t=t.profileImageUrl;d.setState({avatarPath:t.split("/").reverse()[0],fullname:e})})},d.testPhoneNo=function(){var e=d.state,t=e.selectedCountry.code,e=e.phoneNo;return"+86"!==t||/^\d{11}$/.test(e)},d.handleChange=function(t){return function(e){d.setState(Object(tt.a)({},t,e))}},d.handleBackUpDigits=function(){d.setState({smsType:"text"===d.state.smsType?"voice":"text",reStartTime:Date.now()})},d.handleCountDownEndEvent=function(){d.setState({smsBackUpDisplay:!0})},d.parseServerError=function(e){var t=e||d.props,n=t.showNotification,a=t.registerValidateErrors,r=t.loginConfirmError,o=t.registerConfirmError,i=t.sendDigitsError,c=r||{},s=c.username,u=c.password,l=c.digits,e=c.captcha,t=o||{},r=t.username,c=t.password,o=t.digits,t=t.undefined;t&&n(t,"red");t=i||{},i=t.username,t=t.captcha,a=(a||{}).fullname;return{usernameServerError:s||i,passwordServerError:u||c,digitsServerError:l||o,captchaServerError:e||t,fullnameServerError:(a=void 0===a?{}:a).message||r}},d.runBeforeCheckCaptcha=function(t){var e=d.state.captcha,n=d.props,a=n.captchaNeeded,n=n.checkCaptcha;if(!d.captchaValidated&&a)return e?void n(e,d.captchaIsChinese?"cn":"en").then(function(e){e.payload.success&&(d.captchaValidated=!0,t())}):void d.setState({validationResult:{message:d.captchaIsChinese?"è¯·ç‚¹å‡»å›¾ä¸­å€’ç«‹çš„æ–‡å­—":"è¯·è¾“å…¥éªŒè¯ç ",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},d.runBeforeResetValidateResult=function(e){d.setState({customErrorInputMap:Object.assign({},x),validationResult:{needsRefresh:!1,timestamp:Date.now()}},function(){e()})},d.handleSendDigits=function(){var e=d.state.phoneNo;e&&d.testPhoneNo()?d.runBeforeCheckCaptcha(function(){d.runBeforeCheckCaptcha(d.sendDigits)}):d.setState({customErrorInputMap:Object.assign({},d.state.customErrorInputMap,{phoneNoError:e?"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·":"è¯·è¾“å…¥æ‰‹æœºå·"}),smsInputInterceptTime:Date.now()})},d.sendDigits=function(){var e=d.state,t=e.selectedCountry,n=e.phoneNo,a=e.smsType,r=d.props.sendLoginDigits;d.props.validateRegisterForm({phoneNo:"".concat(t.code).concat(n)}).then(function(e){e=e.payload;d.setState({smsBackUpDisplay:!1,isRegister:!(e.phoneNo&&e.phoneNo.code===g.s)}),r("".concat(t.code).concat(n),a)})},d.handleSumbit=function(){d.runBeforeCheckCaptcha(function(){d.runBeforeResetValidateResult(function(){var e=d.state,t=e.selectedCountry,n=e.phoneNo,a=e.digits,r=e.isRegister,o=e.fullname,i=e.avatarPath,c=d.props,s=c.validateAndLogin,u=c.validateAndRegister,l=c.nextUrl,e=c.socialType,c=Object(at.c)(l),l=c.utm_source,c=c.utm_medium;r?u(Object.assign({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(t.code).concat(n),fullname:o,digits:a,refSource:c,utmSource:l},i&&{avatarPath:i},e&&{socialRegisterType:e})):s(ut("digits",{username:"".concat(t.code).concat(n),digits:a,refSource:c,utmSource:l}))})})},d}return Object(s.a)(o,[{key:"componentDidMount",value:function(){var e;T.a.get("atoken")?(this.getSocialInfo(),e=T.a.get("accountcallback"),!this.state.fullname&&e&&(e=JSON.parse(decodeURIComponent(e)),this.setState({fullname:e.fullname}))):this.props.onResetRegister()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.nextUrl,a=t.socialType,r=t.defaultFullname,o=t.sendDigitsError,i=t.loginConfirmError,c=t.loginConfirmSucceeded,s=t.registerConfirmSucceeded,u=t.captchaValidationMessage,l=e.socialType,d=e.defaultFullname,h=e.sendDigitsError,p=e.loginConfirmError,f=e.loginConfirmSucceeded,g=e.registerConfirmSucceeded,t=e.captchaValidationMessage;!a&&l&&this.getSocialInfo(e),r!==d&&this.setState({fullname:d}),!c&&f||!s&&g?n?location.href=n:location.reload():(!i&&p&&p.validateDigitsError&&this.setState({customErrorInputMap:Object.assign({},this.state.customErrorInputMap,{digitsError:p.validateDigitsError}),smsInputInterceptTime:Date.now()}),!o&&h&&(e=this.parseServerError(e).captchaServerError,this.setState({validationResult:{message:e,needsRefresh:!0,timestamp:Date.now()},smsInputInterceptTime:Date.now()})),!u&&t&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:t,needsRefresh:Boolean(t),timestamp:Date.now()}}))}},{key:"render",value:function(){var e=this.state,t=e.smsInputInterceptTime,n=e.customErrorInputMap,a=e.smsBackUpDisplay,r=e.validationResult,o=e.reStartTime,i=e.isRegister,c=e.phoneNo,s=e.smsType,u=e.fullname,l=this.props.onResetRegister,d=n.phoneNoError,h=n.digitsError,p=this.parseServerError(),e=p.usernameServerError,n=p.fullnameServerError,p=p.digitsServerError;return Object(Xe.c)(it.b,{className:"Register-content",onSubmit:this.handleSumbit,children:[Object(Xe.b)("div",{className:"Register-socialHeader",children:Object(Xe.c)("div",{className:"Register-socialTitle",children:[Object(Xe.b)(A.c,{onClick:l,children:Object(Xe.b)(C.a,{size:30})}),"ç»‘å®šæ‰‹æœºå·"]})},"header"),Object(Xe.b)(k.a,{className:b()("Register-socialName",{"Register-hiddenSocialName":!i}),name:"fullname",placeholder:"ç”¨æˆ·å",value:u,onChange:this.handleChange("fullname"),manualValidateError:n,validations:[]},"fullname"),Object(Xe.b)(E.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:d||e}),Object(Xe.b)(v.a,{className:"SignFlow-captchaContainer",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(c),onUpdateInput:this.handleChange("captcha"),validationResult:r}),Object(Xe.b)(I,{smsType:s,reStartTime:o,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:t,manualValidateError:h||p}),Object(Xe.b)("div",{className:b()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!a}),children:Object(Xe.c)("span",{onClick:this.handleBackUpDigits,children:["æŽ¥æ”¶","text"===s?"è¯­éŸ³":"çŸ­ä¿¡","éªŒè¯ç "]})}),Object(Xe.b)(A.c,{className:"Register-submitButton",type:"submit",preset:"primary",color:"blue",children:"è¿›å…¥çŸ¥ä¹Ž"})]})}}]),o}($e.Component),z=Object(nt.connect)(function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register,o=r.registerConfirmError,i=r.registerValidateErrors,c=r.registerConfirmSucceeded,s=e.login,t=s.loginConfirmSucceeded,r=s.validateDigitsError,e=s.loginConfirmError;return{captchaNeeded:n,sendDigitsError:s.sendDigitsError,registerConfirmError:o,registerValidateErrors:i,captchaValidationMessage:a,registerConfirmSucceeded:c,loginConfirmSucceeded:t,validateDigitsError:r,loginConfirmError:e}},{showNotification:st.h,checkCaptcha:ot.b,validateDigits:ct.i,sendLoginDigits:ct.g,validateAndLogin:ct.h,validateAndRegister:rt.f,getSocialInfo:rt.c,validateRegisterForm:rt.i,resetLoginValidateResult:ct.f,resetRegisterValidateResult:rt.d})(f),w=n(34),q=n(49),dt=n(43),ht=n(78),pt=Object(nt.connect)(null,{getSMSIdentify:ct.d,postSMSIdentify:ct.e,showNotification:st.h})(function(e){var t=e.getSMSIdentify,n=e.postSMSIdentify,a=e.showNotification,r=e.onBack,o=e.phoneNo,i=Object($e.useState)({code:"",phoneNo:"",targetNo:""}),e=Object(dt.a)(i,2),i=e[0],c=e[1];Object($e.useEffect)(function(){et.a.trackCardShow(null,{id:5935})},[]),Object($e.useEffect)(function(){o&&t(o).then(function(e){e=e.payload;e&&c(e)}).catch(function(e){e=e.payload;e&&c(e)})},[t,o]);e=D;return Object(Xe.b)(e,{onBack:r,onSubmit:function(){et.a.trackEvent(null,{id:23456}),n(o).then(function(e){e=e.payload;et.a.trackEvent(null,{id:6729,action:"Click",name:e.success?"é€šè¿‡":"å¤±è´¥"}),e.success?r():a("æ²¡æœ‰æ”¶åˆ°çŸ­ä¿¡ï¼Œè¯·ç¨åŽé‡è¯•","red")})},data:i})}),L=Object($e.createContext)({}),H=L,J=n(373),W=n(181),K=n(131),Y=Object.assign,Z=Object.assign,G=Object.assign;var _={1:"a",2:"b",3:"c"},f=function(e){Object(u.a)(r,e);var n,a,t=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).cancelCheckQrcodeScanStatus=function(){a.timer&&window.clearInterval(a.timer)},a.checkQrcodeScanStatus=function(e){var t=a.props.checkQrcodeScanStatus;a.timer=setInterval(function(){t({token:e})},2e3)},a.handleChangestatus=function(e,t){a.setState({status:e}),"init"!==e||t||a.getToken()},a.handleChangeLoginType=function(){var e=a.props.onChangeType;a.cancelCheckQrcodeScanStatus(),e()},a.initTips=function(){var e=a.props,t=e.guideType,n=e.isInSignPage,e=a.state.enableSwitchGuide,n=!n||!["2","3"].includes(t),t=e?7300:1e3;e&&(a.showSwitchGuideTimeout=setTimeout(function(){a.setState({showSwitchGuide:!0}),a.hideSwitchGuideTimeout=setTimeout(function(){a.setState({showSwitchGuide:!1})},3e3)},1e3)),n&&(a.showTipsTimeout=setTimeout(function(){a.setState({showTips:!0}),a.hideTipsTimeout=setTimeout(function(){a.setState({showTips:!1})},5e3)},t))},a.state={type:"password",status:"init",errorMessage:"",showTips:!1,showSwitchGuide:!1,enableSwitchGuide:a.props.isInSignPage&&["1","2","3"].includes(a.props.guideType),guideTypeSymbol:_[a.props.guideType]||"d"},a}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.isInSignPage,t=this.state.guideTypeSymbol;e&&et.a.trackCardShow(null,{id:9214,name:t}),this.getToken().then(this.initTips)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.qrcodeLoginToken,a=t.qrcodeLoginScanStatus,r=e.qrcodeLoginToken,o=e.qrcodeLoginScanStatus,t=e.qrcodeLoginError,e=e.qrcodeLoginReturnNewToken;""!==r&&n!==r?(this.cancelCheckQrcodeScanStatus(),"init"!==this.state.status&&this.handleChangestatus("init",!0),this.checkQrcodeScanStatus(r)):a!==o?2!==o&&this.handleChangestatus(1===o?"success":"init",e||1===a&&0===o):t&&t.code&&(this.cancelCheckQrcodeScanStatus(),40321===t.code&&this.setState({status:"error",errorMessage:t.message}))}},{key:"componentWillUnmount",value:function(){this.cancelCheckQrcodeScanStatus(),clearTimeout(this.showTipsTimeout),clearTimeout(this.hideTipsTimeout),clearTimeout(this.showSwitchGuideTimeout),clearTimeout(this.hideSwitchGuideTimeout)}},{key:"getToken",value:function(){return this.props.getQrcodeLoginToken()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.qrcodeLoginToken,r=t.guideType,o=t.isInSignPage,i=this.state,c=i.status,s=i.errorMessage,u=i.showTips,l=i.showSwitchGuide,d=i.enableSwitchGuide,t=i.guideTypeSymbol,i="init"===c?Object(Xe.c)("div",{className:"Qrcode-content",children:[Object(Xe.b)("div",{className:b()("Qrcode-img",{"Qrcode-img--hover":u}),children:a?Object(Xe.c)(Xe.a,{children:[Object(Xe.b)("img",{className:"Qrcode-qrcode",width:"150",height:"150",src:"//".concat(Q.a.wwwHost,"/api/v3/account/api/login/qrcode/").concat(a,"/image").concat(o?"?utm_campaign=internal&utm_medium=qr&utm_source=login&utm_term=force_launch&utm_content=qrscan".concat(t):""),alt:"äºŒç»´ç "}),Object(Xe.b)("img",{className:"Qrcode-tips",src:"https://pic1.zhimg.com/80/v2-3ca9dfefdc7ab9034c123abd69a57ae0.png"})]}):Object(Xe.b)(J.a,{count:3})}),"3"===r?Object(Xe.c)("p",{children:["ä½¿ç”¨"," ",Object(Xe.b)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:"çŸ¥ä¹Ž App"})," ","| å¾®ä¿¡ æ‰«ä¸€æ‰«ç™»å½•"]}):Object(Xe.c)(Xe.a,{children:[Object(Xe.c)("p",{children:["æ‰“å¼€",Object(Xe.c)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:[" ","çŸ¥ä¹Ž App"]})]}),Object(Xe.b)("p",{children:"åœ¨ã€Œæˆ‘çš„ã€é¡µé¢é¡¶éƒ¨æ‰“å¼€æ‰«ä¸€æ‰«"}),Object(Xe.b)("p",{children:"å¦‚æ‰«ç å¼‚å¸¸è¯·ä¸‹è½½æœ€æ–°ç‰ˆå®¢æˆ·ç«¯"})]})]}):"success"===c?Object(Xe.c)($e.Fragment,{children:[Object(Xe.c)("div",{className:"Qrcode-content",children:[Object(Xe.b)("div",{className:"Qrcode-scanResultStaus",children:Object(Xe.b)(V,{fill:"#2db370",size:58})}),Object(Xe.b)("p",{className:"Qrcode-scanResultTips",children:"æ‰«ææˆåŠŸ"}),Object(Xe.b)("p",{children:"è¯·åœ¨æ‰‹æœºä¸Šã€Œç¡®è®¤ç™»å½•ã€"})]}),Object(Xe.b)("div",{className:"Qrcode-cutButton",children:Object(Xe.b)("span",{onClick:function(){return e.handleChangestatus("init")},children:"è¿”å›žäºŒç»´ç "})})]}):Object(Xe.c)("div",{className:"Qrcode-content Qrcode-failure",children:[Object(Xe.b)("div",{children:Object(Xe.b)(U,{fill:"#ffaa00",size:58})}),Object(Xe.b)("p",{children:s})]});return Object(Xe.c)("div",{className:b()("Qrcode-container",n),children:[d&&Object(Xe.b)(h.Box,{color:"GBL01A",fontSize:"14px",height:"40px",width:"260px",mt:"-24px",mx:"auto",mb:"15px",css:function(e){return{textAlign:"center",lineHeight:"40px",backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.1),borderRadius:"20px",borderTopRightRadius:"0",transformOrigin:"top right",transform:"scale(".concat(l?"1":"0",")"),opacity:l?"1":"0",transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms linear"}},children:"ç‚¹å‡»ä½¿ç”¨æ‰‹æœºå·ã€å¸å·å¯†ç ç™»å½•"}),Object(Xe.b)("div",{className:"Qrcode-title",children:"æ‰«ç ç™»å½•"}),i,Object(Xe.b)(F,{onClick:this.handleChangeLoginType})]})}}]),r}($e.Component);f.propTypes={type:r.a.string,isShowPasswordLogin:r.a.bool,onChangeType:r.a.func,getQrcodeLoginToken:r.a.func,checkQrcodeScanStatus:r.a.func,isInSignPage:r.a.bool},f.defaultProps={qrcodeLoginToken:"",qrcodeLoginScanStatus:""};function ft(e){var t=e.type,n=Object($e.useContext)(H).handleChangeType;return Object(Xe.c)("div",{className:"SignFlow-tabs",children:[Object(Xe.b)("div",{className:b()("SignFlow-tab",{"SignFlow-tab--active":"digits"===t}),onClick:function(){"digits"!==t&&n("digits")},children:"å…å¯†ç ç™»å½•"}),Object(Xe.b)("div",{className:b()("SignFlow-tab",{"SignFlow-tab--active":"password"===t}),onClick:function(){"password"!==t&&n("password")},children:"å¯†ç ç™»å½•"}),Object(Xe.b)("div",{className:"SignFlow-qrcodeTab",onClick:function(){n("qrcode")},children:Object(Xe.b)($,{})})]})}function gt(e){var t=e.type,n=e.isOversea,a=e.supportedCountriesShown,r=e.selectedCountry,o=e.username,i=e.usernameServerError,e=(e=void 0===(e=e.customErrorInputMap)?{}:e).username,c=Object($e.useContext)(H).handleChange;return Object(Xe.b)(E.a,{type:"digits"===t||a?"digits":"password",supportedCountriesShown:"digits"===t||n,onChange:function(e){return c("username",e)},onSelect:function(e){return c("selectedCountry",e)},defaultSelectedCountry:r,manualValidateError:i||e,defaultValue:o})}function mt(e){var t=e.handleRegister,n=Object($e.useContext)(H),a=Object(nt.useDispatch)(),r=n.fullnameError,o=n.password,i=n.passwordServerError,e=n.submitDisabled,c=n.setState,n=Object(ht.c)(function(t){return function(e){return c(Object(tt.a)({},t,e))}});return Object(Xe.c)(it.b,{className:"SignFlow-setting",onSubmit:t,children:[Object(Xe.c)("div",{className:"SignFlow-back",onClick:function(){return a(ct.f.apply(void 0,arguments))},children:[Object(Xe.b)(C.a,{center:!0,size:28,fill:"#8590a6"}),"è¿”å›ž"]}),Object(Xe.b)("div",{className:"SignFlow-settingTitle",children:"è®¾ç½®ç”¨æˆ·åå’Œå¯†ç "}),Object(Xe.b)(k.a,{name:"fullname",placeholder:"ç”¨æˆ·å",onChange:n("fullname"),manualValidateError:r}),Object(Xe.b)(R.a,{onChange:n("password"),defaultValue:o,placeholderPrefix:"8 ä½æ•°å­—æˆ–å­—æ¯",defaultType:"text",manualValidateError:i}),Object(Xe.b)(A.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:e,children:"è¿›å…¥çŸ¥ä¹Ž"})]},"setting")}function bt(e){var t=e.type,n=e.smsInputInterceptTime,a=e.digitsServerError,r=e.smsType,o=e.reStartTime,i=e.passwordServerError,c=e.password,s=(d=Object($e.useContext)(H)).handleSendDigits,u=d.setState,l=Object(ht.c)(function(){u({smsBackUpDisplay:!0})}),e=Object(ht.c)(function(e){return u({digits:e})}),d=Object(ht.c)(function(e){return u({password:e})});return Object(Xe.c)(Xe.a,{children:["digits"===t&&Object(Xe.b)(Xe.a,{children:Object(Xe.b)(I,{countDownEvent:s,countDownEndEvent:l,interceptTime:n,manualValidateError:a,smsType:r,reStartTime:o,onChange:e})}),"password"===t&&Object(Xe.b)(Xe.a,{children:Object(Xe.b)(R.a,{onChange:d,manualValidateError:i,defaultValue:c})})]})}function At(e){var t=e.smsBackUpName,n=e.smsBackUpDisplay,a=e.isOverSea,r=e.smsType,o=e.type,i=(s=Object($e.useContext)(H)).handleChangeType,c=s.setState,e=Object(ht.c)(function(){et.a.trackEvent(event.currentTarget,{id:4947}),et.a.trackEvent(void 0,{action:"Click",element:"Button",element_name:"ResetPassword"}),window.open("".concat(g.E,"/account/password_reset"),"_blank")}),s=Object(ht.c)(function(e){et.a.trackEvent(e.currentTarget,{id:4941}),c({smsType:"text"===r?"voice":"text",smsBackUpName:"text"===r?"çŸ­ä¿¡":"è¯­éŸ³",reStartTime:Date.now()})});return Object(Xe.c)("div",{className:"Login-options",children:[Object(Xe.b)(A.c,{preset:"plain",className:"Login-switchType",onClick:function(){"digits"!==o&&i(a?"email":"oversea")},children:"digits"!==o&&(a?"é‚®ç®±å¸å·ç™»å½•":"æµ·å¤–æ‰‹æœºå·ç™»å½•")}),Object(Xe.b)(A.c,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===o?s:e,children:"digits"===o?n&&"æŽ¥æ”¶".concat(t,"éªŒè¯ç "):"å¿˜è®°å¯†ç ï¼Ÿ"})]})}function Ct(e){var t=e.type,e=e.submitDisabled;return Object(Xe.c)(Xe.a,{children:[Object(Xe.c)(A.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:e,children:["password"===t?"":"æ³¨å†Œ/","ç™»å½•"]}),Object(Xe.b)("div",{className:"SignContainer-tip",children:Object(Xe.b)("div",{children:Object(Xe.c)("div",{children:["æœªæ³¨å†Œæ‰‹æœºéªŒè¯åŽè‡ªåŠ¨ç™»å½•ï¼Œæ³¨å†Œå³ä»£è¡¨åŒæ„",Object(Xe.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"ã€ŠçŸ¥ä¹Žåè®®ã€‹"}),Object(Xe.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"ã€Šéšç§ä¿æŠ¤æŒ‡å¼•ã€‹"})]})})})]})}var vt=Object(p.compose)(w.withRouter,Object(nt.connect)(function(e){var t=e.login;return{qrcodeLoginToken:t.qrcodeLoginToken,qrcodeLoginTokenExpires:t.qrcodeLoginTokenExpires,qrcodeLoginScanStatus:t.qrcodeLoginScanStatus,qrcodeLoginError:t.qrcodeLoginError,qrcodeLoginReturnNewToken:t.qrcodeLoginReturnNewToken,edition:Object(W.b)(e),guideType:Object(W.a)(e,"web_login")}},{getQrcodeLoginToken:ct.c,checkQrcodeScanStatus:ct.a}))(f),X=Object.assign,$=function(e){return a.a.createElement(K.a,X({width:"52",height:"52",fill:"none",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),a.a.createElement("mask",{id:"id-3757926926-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},a.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),a.a.createElement("g",{mask:"url(#id-3757926926-a)"},a.a.createElement("path",{fill:"#06F",d:"M0 0h48a4 4 0 014 4v48L0 0z"}),a.a.createElement("path",{fill:"url(#pattern0)",d:"M0 0h52v52H0z"})),a.a.createElement("defs",null,a.a.createElement("pattern",{id:"pattern0",width:"1",height:"1",patternContentUnits:"objectBoundingBox"},a.a.createElement("use",{transform:"scale(.00216)",xlinkHref:"#image0"})),a.a.createElement("image",{id:"image0",width:"463",height:"463",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc8AAAHPCAYAAAA1eFErAAAABGdBTUEAALGOfPtRkwAAGNxJREFUeAHt3UGOG0cSBdDRgAdwA7wrr2Ce1QR4BI0JDHPhhToNfVZFZjxtugylIyNeVOuDK/7448+/fv7Hn/YCz9s1YvB1f0TqVC2SckrOt7M57+SbolZS4L/JYmoRIECAAIEOAsKzw5bNSIAAAQJRAeEZ5VSMAAECBDoICM8OWzYjAQIECEQFhGeUUzECBAgQ6CAgPDts2YwECBAgEBUQnlFOxQgQIECgg4Dw7LBlMxIgQIBAVEB4RjkVI0CAAIEOAsKzw5bNSIAAAQJRAeEZ5VSMAAECBDoICM8OWzYjAQIECEQFhGeUUzECBAgQ6CAgPDts2YwECBAgEBUQnlFOxQgQIECgg4Dw7LBlMxIgQIBAVEB4RjkVI0CAAIEOAsKzw5bNSIAAAQJRgUuy2vN2TZZT6xuBr/vjmxPH/3XFdyDplKqVdErVSs32eut27in5W5VySva0c63kO+6T585vitkIECBA4CMCwvMjrIoSIECAwM4CwnPn7ZqNAAECBD4iIDw/wqooAQIECOwsIDx33q7ZCBAgQOAjAsLzI6yKEiBAgMDOAsJz5+2ajQABAgQ+IiA8P8KqKAECBAjsLCA8d96u2QgQIEDgIwLC8yOsihIgQIDAzgLCc+ftmo0AAQIEPiIgPD/CqigBAgQI7CwgPHfertkIECBA4CMCwvMjrIoSIECAwM4CwnPn7ZqNAAECBD4iIDw/wqooAQIECOwsIDx33q7ZCBAgQOAjApePVP3Noslv+/7NVj7yv+/87fEVd5f0Ts2XqvORF1TR5QR2f5+Sv8Op5frkmZJUhwABAgTaCAjPNqs2KAECBAikBIRnSlIdAgQIEGgjIDzbrNqgBAgQIJASEJ4pSXUIECBAoI2A8GyzaoMSIECAQEpAeKYk1SFAgACBNgLCs82qDUqAAAECKQHhmZJUhwABAgTaCAjPNqs2KAECBAikBIRnSlIdAgQIEGgjIDzbrNqgBAgQIJASEJ4pSXUIECBAoI2A8GyzaoMSIECAQEpAeKYk1SFAgACBNgLCs82qDUqAAAECKQHhmZJUhwABAgTaCAjPNqs2KAECBAikBC6pQuoQeAk8b1cQEwIVnb7uj4nOjz1S0elYAbdVFfDJs+pm9EWAAAECZQWEZ9nVaIwAAQIEqgoIz6qb0RcBAgQIlBUQnmVXozECBAgQqCogPKtuRl8ECBAgUFZAeJZdjcYIECBAoKqA8Ky6GX0RIECAQFkB4Vl2NRojQIAAgaoCwrPqZvRFgAABAmUFhGfZ1WiMAAECBKoKCM+qm9EXAQIECJQVEJ5lV6MxAgQIEKgqIDyrbkZfBAgQIFBWQHiWXY3GCBAgQKCqgPCsuhl9ESBAgEBZAeFZdjUaI0CAAIGqAsKz6mb0RYAAAQJlBS5lO9NYe4Gv+yNi8LxdI3VeRVK1UrPFBgvOluxJLQJVBXzyrLoZfREgQIBAWQHhWXY1GiNAgACBqgLCs+pm9EWAAAECZQWEZ9nVaIwAAQIEqgoIz6qb0RcBAgQIlBUQnmVXozECBAgQqCogPKtuRl8ECBAgUFZAeJZdjcYIECBAoKqA8Ky6GX0RIECAQFkB4Vl2NRojQIAAgaoCwrPqZvRFgAABAmUFhGfZ1WiMAAECBKoKCM+qm9EXAQIECJQVEJ5lV6MxAgQIEKgqIDyrbkZfBAgQIFBWQHiWXY3GCBAgQKCqgPCsuhl9ESBAgEBZAeFZdjUaI0CAAIGqApeKjT1v14pt6WlC4Ov+mDh17JGKPR0rMHdb0in1O1yxpznNY0+lvI/teu3bfPJce3+6J0CAAIETBITnCeiuJECAAIG1BYTn2vvTPQECBAicICA8T0B3JQECBAisLSA8196f7gkQIEDgBAHheQK6KwkQIEBgbQHhufb+dE+AAAECJwgIzxPQXUmAAAECawsIz7X3p3sCBAgQOEFAeJ6A7koCBAgQWFtAeK69P90TIECAwAkCwvMEdFcSIECAwNoCwnPt/emeAAECBE4QEJ4noLuSAAECBNYWEJ5r70/3BAgQIHCCgPA8Ad2VBAgQILC2gPBce3+6J0CAAIETBC7JO5Pf+p7sS601BZ63a6Tx5Hupp8hKFPm/QPLdhHqsgE+ex3q7jQABAgQ2EBCeGyzRCAQIECBwrIDwPNbbbQQIECCwgYDw3GCJRiBAgACBYwWE57HebiNAgACBDQSE5wZLNAIBAgQIHCsgPI/1dhsBAgQIbCAgPDdYohEIECBA4FgB4Xmst9sIECBAYAMB4bnBEo1AgAABAscKCM9jvd1GgAABAhsICM8NlmgEAgQIEDhWQHge6+02AgQIENhAQHhusEQjECBAgMCxAsLzWG+3ESBAgMAGAsJzgyUagQABAgSOFRCex3q7jQABAgQ2EBCeGyzRCAQIECBwrMCPn3//OfZKtxGYE/i6P+YOfnPqebt+c2L+r1M9zd/4/cnkfN/fNneC05yTU+sK+OS57u50ToAAAQInCQjPk+BdS4AAAQLrCgjPdXencwIECBA4SUB4ngTvWgIECBBYV0B4rrs7nRMgQIDASQLC8yR41xIgQIDAugLCc93d6ZwAAQIEThIQnifBu5YAAQIE1hUQnuvuTucECBAgcJKA8DwJ3rUECBAgsK6A8Fx3dzonQIAAgZMEhOdJ8K4lQIAAgXUFhOe6u9M5AQIECJwkIDxPgnctAQIECKwrIDzX3Z3OCRAgQOAkAeF5ErxrCRAgQGBdAeG57u50ToAAAQInCVyS3/ie+kb7ij2dtJ9fXpt0+uVF/+IvU+/Av7iy/dGK70H7pUwCpHZX8fcuNduLMjVfsiefPCdfcscIECBAgMBbQHi+JfwkQIAAAQKTAsJzEsoxAgQIECDwFhCebwk/CRAgQIDApIDwnIRyjAABAgQIvAWE51vCTwIECBAgMCkgPCehHCNAgAABAm8B4fmW8JMAAQIECEwKCM9JKMcIECBAgMBbQHi+JfwkQIAAAQKTAsJzEsoxAgQIECDwFhCebwk/CRAgQIDApIDwnIRyjAABAgQIvAWE51vCTwIECBAgMCkgPCehHCNAgAABAm8B4fmW8JMAAQIECEwKCM9JKMcIECBAgMBbQHi+JfwkQIAAAQKTApfJc8se+7o/Ir0/b9dInWSRij0l50vVSr0Dr34qmqfmS86W6in1DiTr7Dzbyyk13+7vk0+eyd8qtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghcAl+W3fLcQCQ6a+qT3QSrxE8n1K1Up6p2qlZnstMFkr/kL8ZsHkbKnd/eZIbf73pHfqPUj25JNnm1fZoAQIECCQEhCeKUl1CBAgQKCNgPBss2qDEiBAgEBKQHimJNUhQIAAgTYCwrPNqg1KgAABAikB4ZmSVIcAAQIE2ggIzzarNigBAgQIpASEZ0pSHQIECBBoIyA826zaoAQIECCQEhCeKUl1CBAgQKCNgPBss2qDEiBAgEBKQHimJNUhQIAAgTYCwrPNqg1KgAABAikB4ZmSVIcAAQIE2ggIzzarNigBAgQIpASEZ0pSHQIECBBoIyA826zaoAQIECCQEhCeKUl1CBAgQKCNwOXr/mgz7G6DPm/X2EgV34NUT0mnFHhqtlQ/rzoVnZLz7VzL+zS33eQ77pPnnLlTBAgQIEBgCAjPQeGBAAECBAjMCQjPOSenCBAgQIDAEBCeg8IDAQIECBCYExCec05OESBAgACBISA8B4UHAgQIECAwJyA855ycIkCAAAECQ0B4DgoPBAgQIEBgTkB4zjk5RYAAAQIEhoDwHBQeCBAgQIDAnIDwnHNyigABAgQIDAHhOSg8ECBAgACBOQHhOefkFAECBAgQGALCc1B4IECAAAECcwLCc87JKQIECBAgMASE56DwQIAAAQIE5gSE55yTUwQIECBAYAhckt+sXfHbzMekhR5S5rznlpp0Su1urnOnkgKp3SXfp9R8qdlS/VStk9ydT55Vt6wvAgQIECgrIDzLrkZjBAgQIFBVQHhW3Yy+CBAgQKCsgPAsuxqNESBAgEBVAeFZdTP6IkCAAIGyAsKz7Go0RoAAAQJVBYRn1c3oiwABAgTKCgjPsqvRGAECBAhUFRCeVTejLwIECBAoKyA8y65GYwQIECBQVUB4Vt2MvggQIECgrIDwLLsajREgQIBAVQHhWXUz+iJAgACBsgLCs+xqNEaAAAECVQWEZ9XN6IsAAQIEygoIz7Kr0RgBAgQIVBUQnlU3oy8CBAgQKCsgPMuuRmMECBAgUFXgUrGx5+0aa+vr/ojVqlYo6ZSaraJ3RaeU96vO7vMlrarVsru5jVT8d8Unz7ndOUWAAAECBIaA8BwUHggQIECAwJyA8JxzcooAAQIECAwB4TkoPBAgQIAAgTkB4Tnn5BQBAgQIEBgCwnNQeCBAgAABAnMCwnPOySkCBAgQIDAEhOeg8ECAAAECBOYEhOeck1MECBAgQGAICM9B4YEAAQIECMwJCM85J6cIECBAgMAQEJ6DwgMBAgQIEJgTEJ5zTk4RIECAAIEhIDwHhQcCBAgQIDAnIDznnJwiQIAAAQJDQHgOCg8ECBAgQGBOQHjOOTlFgAABAgSGwI8//vzr5/ivDR9S39Re8ZvMK64r5f2araJ5ar6Ks+3+PlWcz3swt5WKv3c+ec7tzikCBAgQIDAEhOeg8ECAAAECBOYEhOeck1MECBAgQGAICM9B4YEAAQIECMwJCM85J6cIECBAgMAQEJ6DwgMBAgQIEJgTEJ5zTk4RIECAAIEhIDwHhQcCBAgQIDAnIDznnJwiQIAAAQJDQHgOCg8ECBAgQGBOQHjOOTlFgAABAgSGgPAcFB4IECBAgMCcgPCcc3KKAAECBAgMAeE5KDwQIECAAIE5AeE55+QUAQIECBAYAsJzUHggQIAAAQJzAsJzzskpAgQIECAwBITnoPBAgAABAgTmBH78/PvP3NE1T33dH+Uaf96u5Xra2anibMkXIPU+JZ1SPSWdUrWSTqmedvZOGaXr+OSZFlWPAAECBLYXEJ7br9iABAgQIJAWEJ5pUfUIECBAYHsB4bn9ig1IgAABAmkB4ZkWVY8AAQIEthcQntuv2IAECBAgkBYQnmlR9QgQIEBgewHhuf2KDUiAAAECaQHhmRZVjwABAgS2FxCe26/YgAQIECCQFhCeaVH1CBAgQGB7AeG5/YoNSIAAAQJpAeGZFlWPAAECBLYXEJ7br9iABAgQIJAWEJ5pUfUIECBAYHsB4bn9ig1IgAABAmkB4ZkWVY8AAQIEthf48ceff/2sNmXFb0Wv+O3xyb2lzDkltzJXa3fzOQWnUgKpfwtS/bzqpN7x5Gw+eSY3rBYBAgQItBAQni3WbEgCBAgQSAoIz6SmWgQIECDQQkB4tlizIQkQIEAgKSA8k5pqESBAgEALAeHZYs2GJECAAIGkgPBMaqpFgAABAi0EhGeLNRuSAAECBJICwjOpqRYBAgQItBAQni3WbEgCBAgQSAoIz6SmWgQIECDQQkB4tlizIQkQIEAgKSA8k5pqESBAgEALAeHZYs2GJECAAIGkgPBMaqpFgAABAi0EhGeLNRuSAAECBJICwjOpqRYBAgQItBAQni3WbEgCBAgQSApcnrdrst62tTitu1q7W3d3yc53fg++7o8kVaRWsqfU7pI9+eQZeU0UIUCAAIFOAsKz07bNSoAAAQIRAeEZYVSEAAECBDoJCM9O2zYrAQIECEQEhGeEURECBAgQ6CQgPDtt26wECBAgEBEQnhFGRQgQIECgk4Dw7LRtsxIgQIBAREB4RhgVIUCAAIFOAsKz07bNSoAAAQIRAeEZYVSEAAECBDoJCM9O2zYrAQIECEQEhGeEURECBAgQ6CQgPDtt26wECBAgEBEQnhFGRQgQIECgk4Dw7LRtsxIgQIBAREB4RhgVIUCAAIFOApfkN2t3gttt1tQ3te/m8s95Ur8vSe9krX/Oe/Z/p7yTcyR7qri71HwVZ0u+Bz55JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJgUuy2PN2TZZT6xuBr/vjmxPH/3XFdyDptPN8ydmS5se/xb++Men065vO+duK81V8n3zyPOf9dCsBAgQILCwgPBdentYJECBA4BwB4XmOu1sJECBAYGEB4bnw8rROgAABAucICM9z3N1KgAABAgsLCM+Fl6d1AgQIEDhHQHie4+5WAgQIEFhYQHguvDytEyBAgMA5AsLzHHe3EiBAgMDCAsJz4eVpnQABAgTOERCe57i7lQABAgQWFhCeCy9P6wQIECBwjoDwPMfdrQQIECCwsIDwXHh5WidAgACBcwSE5znubiVAgACBhQWE58LL0zoBAgQInCMgPM9xdysBAgQILCxwqdh7xW8NTzpV/Kb25HypWhXfg4o9pbx3r2N3cxtOOe3+75xPnnPvk1MECBAgQGAICM9B4YEAAQIECMwJCM85J6cIECBAgMAQEJ6DwgMBAgQIEJgTEJ5zTk4RIECAAIEhIDwHhQcCBAgQIDAnIDznnJwiQIAAAQJDQHgOCg8ECBAgQGBOQHjOOTlFgAABAgSGgPAcFB4IECBAgMCcgPCcc3KKAAECBAgMAeE5KDwQIECAAIE5AeE55+QUAQIECBAYAsJzUHggQIAAAQJzAsJzzskpAgQIECAwBITnoPBAgAABAgTmBITnnJNTBAgQIEBgCAjPQeGBAAECBAjMCVzmjjlFYF2B5+1arvmv+yPWU8X5Uj3t7pScL/ZChQpVnC31Xr6IfPIMvSjKECBAgEAfAeHZZ9cmJUCAAIGQgPAMQSpDgAABAn0EhGefXZuUAAECBEICwjMEqQwBAgQI9BEQnn12bVICBAgQCAkIzxCkMgQIECDQR0B49tm1SQkQIEAgJCA8Q5DKECBAgEAfAeHZZ9cmJUCAAIGQgPAMQSpDgAABAn0EhGefXZuUAAECBEICwjMEqQwBAgQI9BEQnn12bVICBAgQCAkIzxCkMgQIECDQR0B49tm1SQkQIEAgJCA8Q5DKECBAgEAfgUufUU16hEDy2+OT3/p+xOxn3ZE0P2uGI+5NOSXfy1St1GyvPaR6Su40NV+qzms2nzyTG1aLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFLsliqVrP2zVVSp2DBXbf3df9cbDo99elzHee7aWYmi9V5/vNOvEWSL3j73qJnz55JhTVIECAAIFWAsKz1boNS4AAAQIJAeGZUFSDAAECBFoJCM9W6zYsAQIECCQEhGdCUQ0CBAgQaCUgPFut27AECBAgkBAQnglFNQgQIECglYDwbLVuwxIgQIBAQkB4JhTVIECAAIFWAsKz1boNS4AAAQIJAeGZUFSDAAECBFoJCM9W6zYsAQIECCQEhGdCUQ0CBAgQaCUgPFut27AECBAgkBAQnglFNQgQIECglYDwbLVuwxIgQIBAQkB4JhTVIECAAIFWApfktL5hPam5Zq3kO1Dx2+Mr9pQ0T711KafkbKmeUkZV66TMK3qnZnvtzifPqm+wvggQIECgrIDwLLsajREgQIBAVQHhWXUz+iJAgACBsgLCs+xqNEaAAAECVQWEZ9XN6IsAAQIEygoIz7Kr0RgBAgQIVBUQnlU3oy8CBAgQKCsgPMuuRmMECBAgUFVAeFbdjL4IECBAoKyA8Cy7Go0RIECAQFUB4Vl1M/oiQIAAgbICwrPsajRGgAABAlUFhGfVzeiLAAECBMoKCM+yq9EYAQIECFQVEJ5VN6MvAgQIECgrIDzLrkZjBAgQIFBVQHhW3Yy+CBAgQKCsgPAsuxqNESBAgEBVgf8BFD9n1bBqeo4AAAAASUVORK5CYII="})))},ee=n(1096),f=n(44),te=n.n(f),ne=n(124),ae=n(885),re=n(1371);function Et(e){var t=e.type,n=e.captchaV2Ref,a=e.onVerify,r=e.lastSubmittedTimestamp,o=Object(nt.useDispatch)(),i=(e=Object($e.useContext)(H)).continueActionRef,e=e.captchaV2,c=Ot({type:t,captchaV2:e});return Object($e.useEffect)(function(){c()},[c]),Object($e.useEffect)(function(){var e;r&&-1!==r&&(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh())},[r,n]),Object(Xe.b)(oe,{ref:n,onVerify:function(e){if(e instanceof Error)return o(Object(st.h)(e.message||"éªŒè¯å¤±è´¥","red"));if(null==e||!e.type||null==e||!e.result)return o(Object(st.h)("é”™è¯¯çš„éªŒè¯æ–¹å¼","red"));e=e.result;o(Object(ot.g)(JSON.stringify(e),!0,"captcha_sign_in")).then(function(e){var e=e.payload;null!=e&&e.success&&(null==a||a({result:"success"}),i&&(null===(e=i.current)||void 0===e||e.call(i)))}).catch(function(e){if(null==a||a({result:"fail"}),120001!==e.payload.code)throw o(Object(st.h)(Object(ee.b)(e),"red")),e;o(Object(st.h)("é¡µé¢å·²è¿‡æœŸï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•","red"))}).finally(function(){i&&(i.current=null)})},onClose:function(){var e;r||(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh())}})}var oe=a.a.memo(a.a.forwardRef(function(e,t){var n=e.onReady,a=e.onVerify,r=e.onClose,o=Object(nt.useSelector)(function(e){return e.captcha}).v2,i=Object($e.useRef)(null),c=Object(ae.a)(),s=null==o||null===(h=o.script)||void 0===h?void 0:h[1],u=Object($e.useRef)(null),l=Object($e.useRef)(),d=Object($e.useRef)(),h=Object($e.useState)("init"),p=(h=Object(dt.a)(h,2))[0],f=h[1];Object($e.useEffect)(function(){if(null!=o&&o.script){var e=s?te.a.parse(null==s?void 0:s.split("?")[1]).captchaId:"0";return u.current&&u.current!==e?(c.confirm("é¡µé¢å°†è‡ªåŠ¨åˆ·æ–°ï¼Œè¯·åœ¨åˆ·æ–°åŽé‡è¯•",{title:"éªŒè¯ç å·²è¿‡æœŸ",ok:"åˆ·æ–°"}).then(function(){location.reload()}).catch(function(){i.current&&clearTimeout(i.current)}),i.current=setTimeout(function(){location.reload()},5e3)):u.current=e,function(){i.current&&clearTimeout(i.current)}}},[o,s,c]),Object($e.useImperativeHandle)(t,function(){return{get required(){return Boolean(o)},get ready(){return Boolean(d.current)},get type(){var e;return(null===(e=d.current)||void 0===e?void 0:e.type)||"vendor"},show:function(){var e;null===(e=d.current)||void 0===e||e.show()},close:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.close()},refresh:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.refresh()}}});var g=Object(ht.c)(function(e){var t;null!==(t=e.script)&&void 0!==t&&t.length?(f("loading"),e=e.script.map(function(e){return function(){return Object(ne.loadScript)(e)}}),Object(re.b)(e).then(function(){return f("mount"),window.ZS_CAP.init({element:l.current,callback:function(e){null==a||a(e)},onClose:r})}).then(function(e){d.current=e,f("ready"),null==n||n()}).catch(function(e){var t;return null===(t=window.Raven)||void 0===t?void 0:t.captureException(e)})):f("bypass")});return Object($e.useEffect)(function(){o&&"init"===p&&g(o)},[o,p,g]),o?Object(Xe.b)("div",{ref:l}):null})),Ot=function(e){var t=e.type,n=e.captchaV2,a=Object(nt.useDispatch)();return Object(ht.c)(function(){"qrcode"!==t&&(n&&a(Object(ot.h)()),a(Object(ot.d)("captcha_sign_in")))})},wt=n(1372);function yt(e,t){if(!e)return{};var n,a=e=e.trim(),r=Object(wt.a)(e);return{value:a=!r?(n={hasCode:(n=e).startsWith("+")||n.startsWith("00"),parsedPhoneNo:n.startsWith("00")?"+".concat(n.slice(2)):n}).hasCode?n.parsedPhoneNo:"".concat(t).concat(e):a,isEmail:r}}function St(e){return{smsType:"text",smsBackUpName:"è¯­éŸ³",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,selectedCountry:e.selectedCountry,username:e.username,password:e.password,fullname:"",customErrorInputMap:Object.assign({},Bt),submitDisabled:!1,lastSubmittedTimestamp:-1}}function jt(e,t){var n=t.type,a=t.callback;return n!==kt?e:(t=t.payload,a&&a(e),Object.assign({},e,t))}var Bt={username:null,password:null,captcha:null,digits:null},It=function(e){var t=e.props,n=e.captchaV2Ref,a=t.captchaValidated,r=t.captchaNeeded;return Object(ht.c)(function(){var e;return!a&&r&&null!==(e=n.current)&&void 0!==e&&e.required?(n.current.show(),Promise.resolve(!1)):Promise.resolve(!0)})},Rt=n(444),kt="UPDATE_STATE",f=function(e){var a,t,r,o,i,c,s,u,l,d,h,p,f,g,m,b,A,C,v,n,E,O,w,y,S,j,B,I,R,k,Q,N,T,P,M,D,V,U,F,x,z,q,L,H,J,W,K,Y,Z,G,_,X,$,ee,te,ne,ae,re,oe,ie=e.isInSignPage,ce=e.type,se=e.isOversea,ue=e.needSMSIdentify,le=e.captchaV2,de=e.registerConfirmSucceeded,he=e.loginConfirmSucceeded,pe=e.nextUrl,fe=e.captchaNeeded,ge=e.loginUnregisteredError,me=e.loginConfirmError,be=e.captchaValidationMessage,Ae=Object(nt.useDispatch)().dispatch,Ce=Object($e.useReducer)(jt,e,St),ve=Object(dt.a)(Ce,2),Ee=ve[0],Oe=ve[1],we=Ee.selectedCountry,ye=Ee.username,Se=Ee.supportedCountriesShown,je=Ee.customErrorInputMap,Be=Ee.smsInputInterceptTime,Ie=Ee.smsType,Re=Ee.reStartTime,ke=Ee.password,Qe=Ee.smsBackUpDisplay,Ne=Ee.smsBackUpName,Te=Ee.submitDisabled,Pe=Ee.captcha,Me=Ee.fullname,De=Ee.digits,Ve=Ee.lastSubmittedTimestamp,Ue=Object($e.useRef)(null),Fe=Object($e.useRef)(null),xe=Object($e.useRef)(null),ze=Object(ht.c)(function(e,t){return Oe({type:kt,payload:e,callback:t})}),qe=(F=(U={props:e,state:Ee,setState:ze,rootRef:xe}).props,x=U.setState,U=U.state,z=F.onChangeType,q=F.type,L=F.captchaV2,H=Object(nt.useDispatch)(),J=U.username,W=Ot({props:F}),Object(ht.c)(function(e){H(Object(ct.f)()),z(e),"qrcode"!==e&&"password"!==e||et.a.trackEvent(null,{action:"Click",name:"qrcode"===e?"ä½¿ç”¨äºŒç»´ç ç™»å½•":"ä½¿ç”¨å¯†ç ç™»å½•"},{account:{type:"Zhihu"}}),"qrcode"!==e&&(x({username:"password"===q&&Object(wt.a)(J)?"":J,smsBackUpDisplay:!0}),L||W())})),V=(N=(Q=e).loginConfirmError,T=Q.sendDigitsError,P=Q.registerValidateErrors,M=Object(nt.useDispatch)(),V=(D=N||{}).username,Ce=D.password,ve=D.digits,U=D.captcha,F=D.undefined,Q=D.validateDigitsError,D=(N=P||{}).fullname,P=(D=void 0===D?{}:D).message,D=N.password,N=(D=void 0===D?{}:D).message,T=(D=T||{}).username,D=D.undefined,(F||D)&&M(Object(st.h)(F||D,"red")),{usernameServerError:T||V,passwordServerError:Ce||N,digitsServerError:ve||Q,captchaServerError:U,fullnameError:P}),Ce=V.usernameServerError,N=V.digitsServerError,ve=V.passwordServerError,Q=(R={setState:ze}.setState,k=Object(nt.useDispatch)(),Object(ht.c)(function(e,t){k(Object(ct.f)()),R(Object(tt.a)({},e,t))})),P=(U=(U={state:Ee}).state,B=U.selectedCountry.code,I=U.username,Object(ht.c)(function(){return"+86"!==B||/^\d{11}$/.test(I)})),V=(S={setState:ze}.setState,j=Object(nt.useDispatch)(),Object(ht.c)(function(e,t){return j(Object(ct.f)()),S({customErrorInputMap:Object.assign({},Bt),validationResult:{needsRefresh:!1,timestamp:Date.now()}},e),t})),U=(g=(Ee={customErrorInputMap:je,smsType:Ie,selectedCountry:we,username:ye,runBeforeResetValidateResult:V,testPhoneNo:P,setState:ze,captchaNeeded:fe,captchaV2Ref:Fe,continueActionRef:Ue}).customErrorInputMap,m=Ee.smsType,b=Ee.selectedCountry.code,A=Ee.username,C=Ee.testPhoneNo,v=Ee.captchaV2Ref,n=Ee.runBeforeResetValidateResult,E=Ee.setState,O=Ee.captchaNeeded,w=Ee.continueActionRef,y=Object(nt.useDispatch)(),Object(ht.c)(function(e,a){return n(function(){var e;if(C()){var t=yt(A,b).value,n=function(){y(Object(ct.j)({username:t,smsType:m,type:"login"})),E({smsBackUpDisplay:!1})};if(!A||O){if(O&&null!==(e=v.current)&&void 0!==e&&e.required)return v.current.show(),!(w.current=function(){n(),a()});E({customErrorInputMap:Object.assign({},g,{username:A?"":"è¯·è¾“å…¥æ‰‹æœºå·"})})}else n()}else E({customErrorInputMap:Object.assign({},g,{username:A?"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·":"è¯·è¾“å…¥æ‰‹æœºå·"}),smsInputInterceptTime:Date.now()})},!O)})),Ee=It({props:e,captchaV2Ref:Fe}),Ee=(Ee=(V={props:e,selectedCountry:we,captcha:Pe,setState:ze,runBeforeResetValidateResult:V,runBeforeCheckCaptcha:Ee,testPhoneNo:P,continueActionRef:Ue,customErrorInputMap:je,username:ye}).props,a=V.setState,t=V.runBeforeResetValidateResult,r=V.runBeforeCheckCaptcha,o=V.testPhoneNo,i=V.continueActionRef,c=V.selectedCountry,s=V.captcha,u=V.customErrorInputMap,l=V.username,d=Ee.type,h=Ee.isOverSea,p=Ee.nextUrl,f=Object(nt.useDispatch)(),Object(ht.c)(function(n){et.a.trackEvent(void 0,{id:4948}),t(function(){var t;"digits"!==d&&!h||o()?(t=function(){var e=Object(at.c)(p),t=e.utm_source,e=e.utm_medium,e=Object.assign({},n,{username:yt(n.username,c.code).value,captcha:s,utmSource:t,refSource:e});a({lastSubmittedTimestamp:Date.now()}),f(Object(ct.h)(ut(d,e)))},i.current=t,r().then(function(e){e&&t()}).finally(function(){return a({submitDisabled:!1})})):a({customErrorInputMap:Object.assign({},u,{username:l?"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·":"è¯·è¾“å…¥æ‰‹æœºå·"}),smsInputInterceptTime:Date.now()})})}));K=(be={registerConfirmSucceeded:de,loginConfirmSucceeded:he,nextUrl:pe,username:ye,isInSignPage:ie,loginConfirmError:me,captchaValidationMessage:be,setState:ze,loginUnregisteredError:ge}).registerConfirmSucceeded,Y=be.loginConfirmSucceeded,Z=be.sendDigitsError,G=be.nextUrl,_=be.username,X=be.isInSignPage,$=be.loginConfirmError,ee=be.captchaValidationMessage,te=be.setState,ne=be.loginUnregisteredError,ae=be.loginBindWechatError,re=be.type,oe=Object(nt.useDispatch)(),Object($e.useEffect)(function(){!$||ne||ae||(oe(Object(ot.i)(re)),oe(Object(ot.d)()))},[$,ne,ae,te,oe,re]),Object($e.useEffect)(function(){var e;ee&&(e=ee?{smsInputInterceptTime:Date.now()}:{},te(Object.assign({captchaValidated:!1,captchaNeeded:!0},e)))},[ee,te]),Object($e.useEffect)(function(){(Y||K)&&(Object(Rt.b)(_),G?location.href=G:X?location.href="/":location.reload())},[Y,K]),Object($e.useEffect)(function(){var e;!Z&&!1!==Y||(e=Z?{smsInputInterceptTime:Date.now()}:{},te(Object.assign({},e,{captchaValidated:!1,captchaNeeded:!0})))},[Z,Y]),Object($e.useEffect)(function(){(ee||Z&&null===$)&&te({smsBackUpDisplay:!0})},[ee,Z]);var Le,He,Je,We,Ke,Ye,Ze,Ge,_e,Me=(Me=(e={props:e,captchaV2Ref:Fe,continueActionRef:Ue,setState:ze,selectedCountry:we,username:ye,fullname:Me,digits:De,password:ke}).props,De=e.captchaV2Ref,Le=e.continueActionRef,He=e.setState,Je=e.selectedCountry.code,We=e.username,Ke=e.fullname,Ye=e.digits,Ze=e.password,Ge=Object(nt.useDispatch)(),_e=It({props:Me,captchaV2Ref:De}),Object(ht.c)(function(){function t(){Ge(Object(rt.f)({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(Je).concat(We),fullname:Ke,digits:Ye,password:Ze}))}Le&&(Le.current=t),He({submitDisabled:!0}),_e().then(function(e){return e&&t()}).finally(function(){return He({submitDisabled:!1})})})),De=null;if("qrcode"===ce)De=Object(Xe.b)(vt,{ref:xe,isInSignPage:ie,className:"SignInQrcode",onChangeType:function(){return qe("password")}});else{if(ue)return Object(Xe.b)(pt,{ref:xe,onBack:function(){return Ae(Object(ct.f)())},phoneNo:"".concat(we.code).concat(ye)});De=ge&&"digits"==ce?Object(Xe.b)(mt,{handleRegister:Me,setState:ze}):Object(Xe.c)(it.b,{className:"SignFlow Login-content",onSubmit:Ee,children:[Object(Xe.b)(ft,{type:ce}),Object(Xe.b)(gt,{type:ce,isOversea:se,supportedCountriesShown:Se,selectedCountry:we,username:ye,usernameServerError:Ce,customErrorInputMap:je}),Object(Xe.b)(bt,{type:ce,smsInputInterceptTime:Be,digitsServerError:N,smsType:Ie,reStartTime:Re,passwordServerError:ve,password:ke}),Object(Xe.b)(At,{type:ce,isOverSea:se,smsBackUpName:Ne,smsBackUpDisplay:Qe,smsType:Ie}),Object(Xe.b)(Et,{type:ce,captchaV2Ref:Fe,lastSubmittedTimestamp:Ve}),Object(Xe.b)(Ct,{submitDisabled:Te,type:ce})]})}return Object(Xe.b)(lt,{handleChangeType:qe,setState:ze,dispatch:Oe,handleChange:Q,testPhoneNo:P,handleSendDigits:U,continueActionRef:Ue,captchaNeeded:fe,captchaV2:le,children:De})};f.propTypes={validateAndLogin:r.a.func,resetLoginValidateResult:r.a.func,validateSendDigits:r.a.func,loginConfirmSucceeded:r.a.bool,loginConfirmError:r.a.object,sendDigitsError:r.a.object,captchaValidationMessage:r.a.string,captchaNeeded:r.a.bool,selectedCountry:r.a.object,username:r.a.string,password:r.a.string,type:r.a.oneOf(["password","digits","qrcode"]),onChangeType:r.a.func,isInSignPage:r.a.bool},f.defaultProps={selectedCountry:{name:"ä¸­å›½",code:"+86"},username:"",password:""};var ie=Object(nt.connect)(function(e){var t=e.captcha,n=t.captchaValidationMessage,a=t.captchaNeeded,r=t.captchaValidated,o=t.v2,i=e.login,c=i.loginConfirmSucceeded,s=i.loginConfirmError,u=i.sendDigitsError,t=i.needSMSIdentify,i=i.loginUnregisteredError,e=e.register;return{loginConfirmSucceeded:c,loginConfirmError:s,sendDigitsError:u,loginUnregisteredError:i,captchaValidationMessage:n,captchaNeeded:a,captchaValidated:r,registerValidateErrors:e.registerValidateErrors,registerConfirmError:e.registerConfirmError,registerConfirmSucceeded:e.registerConfirmSucceeded,needSMSIdentify:t,captchaV2:o}})(f),ce=n(213);f=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var t;Object(c.a)(this,o);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n))).state={type:t.props.showQrcodeFirst?"qrcode":"digits",isOversea:!1,passwordType:"email"},t.handleSwitchLoginType=function(e){"email"!==e&&"oversea"!==e?t.setState({type:e}):t.setState({type:"password",isOversea:"oversea"===e,passwordType:e})},t}return Object(s.a)(o,[{key:"renderNotification",value:function(){var e=this.props,t=e.notification,n=e.account,a=n.isAppealed,e=n.spamLevel,n=a||e?g.K:g.J,a=6===e?Object.assign({},t,{theme:"red"}):t;return Object(Xe.b)(ce.a,{notification:a.global,delay:n,className:"AppHeader-notification"})}},{key:"render",value:function(){var e=this.props,t=e.nextUrl,n=e.isInSignPage,a=this.state,e=a.type,a=a.isOversea;return Object(Xe.c)(Xe.a,{children:[Object(Xe.b)(ie,{type:e,isInSignPage:n,isOversea:a,onChangeType:this.handleSwitchLoginType,nextUrl:t}),this.renderNotification()]})}}]),o}($e.Component);f.propTypes={nextUrl:r.a.string,isInSignPage:r.a.bool};var se=Object(p.compose)(w.withRouter,Object(nt.connect)(function(e,t){return{showQrcodeFirst:t.showQrcodeFirst||t.isInSignPage&&["1","2","3"].includes(Object(q.a)(e,"web_login")),notification:e.notification,account:e.account}}))(f),ue=n(1325),le=n(1694),de=n(1326),he=n(365),pe={sina:"Weibo",qq:"QQ",wechat:"Wechat"};var fe="/oauth/account_callback",ge={qqconn:"/oauth/redirect/login/qqconn?next=",sina:"/oauth/redirect/login/sina?next=",wechat:"/oauth/redirect/login/wechat?next="};var me=function(e){Object(u.a)(i,e);var n,a,r=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function i(){var o;Object(c.a)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=r.call.apply(r,[this].concat(t))).accountCallback=function(e){var t=o.props,n=t.onRegister,a=t.nextUrl,r=e.login,t=e.type,e=e.fullname;r?(Object(Rt.b)(o.clickedServiceName),o.handleLogSocialLoginSuccess(),a?location.href=a:location.reload()):n({bySocial:!0,socialType:t,fullname:e})},o.handleBuildSocialAuthLink=function(e){o.clickedServiceName=e,o.handleLogSingleSocialButtonClick(e);var t=ge[e],n=Object(at.c)(),a=n.utm_source,n=n.utm_medium;"sina"===e&&/WindowsWechat/.test(navigator.userAgent)?location.href="https://www.zhihu.com".concat(t).concat(fe,"&from=").concat(encodeURIComponent(o.parseNextInfoFromUrl())):(o.ready(),window.open("https://www.zhihu.com".concat(t).concat(fe).concat(a?"&utm_source=".concat(a):"","&ref_source=").concat(n),"_blank","top=200,left=400,width=600,height=550,directories=no,menubar=no,toolbar=no"))},o.handleEntranceButtonClick=function(e){o.props.onEntranceButtonClick&&o.props.onEntranceButtonClick(e),o.handleLogSocialLogin(),o.setState(function(e){return{socialButtonExpanded:!e.socialButtonExpanded}})},o.parseNextInfoFromUrl=function(){var t=o.props.router.location.query.next,n="/";if(t)try{n=decodeURIComponent(t)}catch(e){n=unescape(t)}return n},o}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var e,t;document.referrer.startsWith("https://www.zhihu.com/oauth/callback/sina")&&(t=T.a.get("atoken"),e=T.a.get("accountcallback"),t&&e&&((t=JSON.parse(decodeURIComponent(e)))&&(e=t.fullname,t=t.type,(0,this.props.onRegister)({fullname:e,socialType:t}))))}},{key:"componentWillUnmount",value:function(){this.unready()}},{key:"ready",value:function(){window.NWEB={accountCallback:this.accountCallback},this.domain=document.domain,document.domain="zhihu.com"}},{key:"unready",value:function(){if(window.NWEB&&"www.zhihu.com"===location.host){try{document.domain=this.domain}catch(e){}delete window.NWEB}}},{key:"handleLogSocialLogin",value:function(){et.a.trackEvent(this,{action:"Click",element:"Button",element_name:"SNSSignIn"})}},{key:"handleLogSingleSocialButtonClick",value:function(e){et.a.trackEvent(this,{action:"SignIn",element:"Button",element_name:void 0},{account:{type:pe[e]}})}},{key:"handleLogSocialLoginSuccess",value:function(){var e=this.clickedServiceName;et.a.trackEvent(this,{id:236,action:"StatusReport",element_name:void 0},{status:{result:"Success",event:{action:"SignIn",element:"Button"}},account:e})}},{key:"render",value:function(){var e=this;return Object(Xe.c)("div",{className:"Login-socialLogin",children:[Object(Xe.b)("span",{children:"ç¤¾äº¤å¸å·ç™»å½•"}),Object(Xe.c)("span",{className:"Login-socialButtonGroup",children:[Object(Xe.c)(A.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("wechat")},children:[Object(Xe.b)(ue.a,{className:"Login-socialIcon",fill:"#60c84d",size:20}),"å¾®ä¿¡"]}),Object(Xe.c)(A.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("qqconn")},children:[Object(Xe.b)(le.a,{className:"Login-socialIcon",fill:"#50c8fd",size:20}),"QQ"]}),Object(Xe.c)(A.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("sina")},children:[Object(Xe.b)(de.a,{className:"Login-socialIcon",fill:"#fb6622",size:20}),"å¾®åš"]})]})]})}}]),i}($e.Component);function be(e){var t=Object(he.b)();return/bux/.test(t.origin)?null:Object(Xe.b)(me,Object.assign({},e))}me.propTypes={onRegister:r.a.func.isRequired,onEntranceButtonClick:r.a.func},Object(w.withRouter)(me);function Ae(e){return a.a.createElement(K.a,Ee({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),a.a.createElement("path",{fill:"url(#paint0_linear)",d:"M16.131 0H3.87A3.869 3.869 0 000 3.869V16.13A3.869 3.869 0 003.869 20H16.13A3.869 3.869 0 0020 16.131V3.87A3.869 3.869 0 0016.131 0z"}),a.a.createElement("path",{fill:"#fff",d:"M14.9 10.046V7.391l2.67-.137.232-.015c.147-.26.214-.559.192-.857-.02-.071-.059-.19-.178-.163a9.048 9.048 0 01-1.204.207c-.777.092-1.119.116-2.196.193-1.893.14-3.56.205-3.56.205a.722.722 0 00.75.724c.642-.027 1.582-.071 2.531-.119v2.617h-3.616a.753.753 0 00.753.754h2.843v2.008c0 .255-.13.341-.345.347h-1.1a1.187 1.187 0 00.632.742c.244.081.503.109.76.08.385-.02.836-.237.836-1.014V10.8h3.175a.362.362 0 00.361-.362v-.392H14.9z"}),a.a.createElement("path",{fill:"#fff",d:"M12.414 8.251a.65.65 0 00-.908-.148l-.107.077 1.187 1.662.635-.457-.807-1.134zm4.147-.057l-.89 1.166.647.472 1.273-1.685-.107-.077a.653.653 0 00-.923.124zM9.737 7.031H6.263v6.065h.858l.112.732 1.154-.732h1.356L9.737 7.03zm-1.465 5.311l-.674.415-.065-.427h-.487V7.785h1.908v4.557h-.682zM5.637 9.761H4.379V7.785h1.436v-.368a.386.386 0 00-.383-.385h-2.24a115.436 115.436 0 01.347-1.018 1.187 1.187 0 00-.68.199.908.908 0 00-.385.551c-.151.416-.296.813-.368 1.05-.136.38-.466 1.048-.466 1.048.248-.002.493-.06.716-.169a1.205 1.205 0 00.575-.822c0-.027 0-.053.024-.086h.65V9.35c0 .142 0 .279-.018.412H2.433a.754.754 0 00-.754.754h1.837a4.955 4.955 0 01-.226 1.035 4.746 4.746 0 01-.845 1.484 9.363 9.363 0 01-.89.845 1.56 1.56 0 001.527-.27 4.21 4.21 0 00.908-1.623c.152-.483.258-.98.318-1.483h1.685v-.38a.362.362 0 00-.356-.362z"}),a.a.createElement("path",{fill:"#fff",d:"M4.747 11.318l-.658.425 1.418 2.118a1.96 1.96 0 00.19-.629.908.908 0 00-.08-.617l-.87-1.297z"}),a.a.createElement("defs",null,a.a.createElement("linearGradient",{id:"paint0_linear",x1:"-6.708",x2:"25.504",y1:"29.91",y2:"-8.476",gradientUnits:"userSpaceOnUse"},a.a.createElement("stop",{offset:".42",stopColor:"#06F"}),a.a.createElement("stop",{offset:".92",stopColor:"#00C4FF"}))))}function Ce(e){var t=void 0!==(a=e.isQRCodeShown)&&a,n=e.onQRCodeLinkClick,a=e.zaClickId,e=Object(O.a)(e,["isQRCodeShown","onQRCodeLinkClick","zaClickId"]);return Object(Xe.c)(h.Flex,Object.assign({px:"24px",color:"GBL01A",width:"400px",height:"60px",alignItems:"center"},e,{children:[Object(Xe.b)(h.Box,{flex:"1",children:Object(Xe.c)(h.Link,{href:"/org/signup",color:"inherit","data-za-detail-view-id":a,children:[Object(Xe.b)(ve.a,{size:26,css:{marginRight:".5em"},center:!0}),"å¼€é€šæœºæž„å·"]})}),Object(Xe.b)(h.Box,{height:"20px",width:"1px",bg:"GBK09C"}),Object(Xe.b)(h.Box,{flex:"1",textAlign:"right",children:Object(Xe.b)(h.Button,{bg:"unset",color:"inherit",fontSize:"inherit",fontWeight:"inherit",padding:0,onClick:n,children:t?"å…³é—­äºŒç»´ç ":Object(Xe.c)(Xe.a,{children:[Object(Xe.b)(Ae,{center:!0,css:{marginRight:".5em"}}),"ä¸‹è½½çŸ¥ä¹Ž App"]})})})]}))}var ve=n(1695),Ee=Object.assign;n(1404);n=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var n;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))).state={showHeader:!0,showQrcode:!1,fullname:"",socialType:""},n.changeSignType=function(e){n.props.onChangeSignType(e),n.handleSetShowHeader(!0)},n.handleSetShowHeader=function(e){n.setState({showHeader:e})},n.handleSocialRegister=function(e){var t=e.fullname,e=e.socialType;n.props.onChangeSignType("register"),n.setState({fullname:t,socialType:e,showHeader:!1})},n.handleResetRegister=function(){n.props.onChangeSignType("login"),n.setState({fullname:"",socialType:"",showHeader:!0})},n}return Object(s.a)(o,[{key:"componentDidMount",value:function(){var e=this.props,t=e.nextUrl;e.isLogin&&(location.href=t||"/")}},{key:"render",value:function(){var t=this,e=this.state,n=e.fullname,a=e.socialType,r=e.showQrcode,o=this.props,i=o.nextUrl,c=o.isInSignPage,s=o.signType,e=o.showQrcodeFirst,o=c?h.Card:h.Box;return Object(Xe.c)(o,{bg:"background",width:400,css:{overflow:"hidden"},children:["login"===s?Object(Xe.b)("div",{className:"SignContainer-content",children:Object(Xe.c)("div",{className:"SignContainer-inner",children:[Object(Xe.b)(se,{showQrcodeFirst:e,nextUrl:i,isInSignPage:c}),Object(Xe.b)("div",{className:b()("SignFlowQRImage",{"SignFlowQRImage--isHidden":!r}),children:Object(Xe.b)("div",{})})]})}):Object(Xe.b)(z,{socialType:a,nextUrl:i,defaultFullname:n,onResetRegister:this.handleResetRegister}),Object(Xe.b)(h.Box,{mx:"24px",sx:{borderTop:"1px solid",borderColor:"GBK09A"}}),Object(Xe.b)(be,{onRegister:this.handleSocialRegister}),Object(Xe.b)(Ce,{zaClickId:c?4943:8270,isQRCodeShown:r,onQRCodeLinkClick:function(e){t.setState({showQrcode:!r}),c?r&&et.a.trackEvent(e.currentTarget,{id:4945}):et.a.trackEvent(e.currentTarget,{id:r?8272:8271})},bg:"GBK10A"})]})}}]),o}($e.Component);t.a=Object(o.b)()(n)},2616:function(e,t,n){"use strict";n.r(t);var c=n(14),s=n(15),u=n(16),l=n(17),d=n(9),g=n(2),a=n(3),r=n.n(a),o=n(1),i=n(19),h=n(26),m=n(227),p=n(249),f=n(0),b=n(31),A=n(134),C=n(30),v=n(1021),E=n(1291),O=n(841),w=n(4),y=n(35),S=n(1437),j=n(1403),B=n(1111);function I(){var e=Object(O.a)(["","s åŽå¯é‡å‘"]);return I=function(){return e},e}var R=function(e){Object(u.a)(r,e);var n,a,t=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.countDownEvent,n=e.startAtOnce,a=e.interceptTime,r=e.resetText,o=e.manualValidateError,i=e.onChange,c=e.validations,s=e.countDownEndEvent,u=e.reStartTime,l=e.isIOS,e=Object(y.a)(e,["countDownEvent","startAtOnce","interceptTime","resetText","manualValidateError","onChange","validations","countDownEndEvent","reStartTime","isIOS"]);return Object(g.c)("div",{className:"SignFlow SignFlow-smsBindPhoneInputContainer",children:[Object(g.b)(B.a,Object.assign({name:"digits",className:"SignFlow-smsBindPhoneInput",type:l?"tel":"number",errorMessageClassName:"SignFlow-smsBindPhoneInputErrorMask",placeholder:"è¾“å…¥ 6 ä½éªŒè¯ç ",manualValidateError:o,onChange:i,validations:[{type:"required",message:"è¯·å¡«å†™éªŒè¯ç ",className:"SignFlow-smsInputBindPhoneRequiredErrorMask"}].concat(Object(w.a)(c||[]))},e)),Object(g.b)(S.a,{className:"SignFlow-smsBindPhoneInputButton",preset:"plain",initialText:"å‘é€éªŒè¯ç ",resetText:r,countingText:Object(j.a)(I(),"count"),startAtOnce:n,event:t,countDownEndEvent:s,interceptTime:a,reStartTime:u})]})}}]),r}(o.Component);R.propTypes={countDownEvent:r.a.func.isRequired,startAtOnce:r.a.bool,interceptTime:r.a.number,resetText:r.a.string,manualValidateError:r.a.string},R.defaultProps={startAtOnce:!1,resetText:"é‡å‘éªŒè¯ç "};var k=Object(h.connect)(function(e){return{isIOS:e.env.userAgent.iOS}})(R),Q=n(24);var N=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var s;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=r.call.apply(r,[this].concat(t))).state={selectedCountry:{code:"+86",name:"ä¸­å›½"},phoneNo:null,smsInputInterceptTime:-1,manualError:null,showFooter:!1,sendValidationCodeButtonText:"å‘é€éªŒè¯ç ",identifyingCodeError:null},s.testPhoneNo=function(){var e=s.state,t=e.selectedCountry.code,e=e.phoneNo;return"+86"!==t||/^\d{11}$/.test(e)},s.handleChange=function(t){return function(e){s.setState(Object(f.a)({},t,e))}},s.handleSendDigits=function(e){var t=s.props.requestPhoneVerificationCode,n=s.state,a=n.selectedCountry.code,r=n.phoneNo,n=n.manualError;return C.a.trackEvent(e.target,{action:"GetCaptcha"}),s.testPhoneNo()?t("".concat(a).concat(r)).then(function(){s.setState({manualError:null})}).catch(function(e){e=e.payload,e=(e=void 0===e?{}:e).message;return s.setState({manualError:e,smsInputInterceptTime:Date.now()})}):s.setState({manualError:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·"===n?" ".concat("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·"):"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·",smsInputInterceptTime:Date.now()})},s.handleSubmit=function(e){var n=e.phoneNo,t=e.digits,a=s.props,r=a.updatePhoneNumber,o=a.onSuccess,i=a.onNeedUnbind,e=s.state,a=e.selectedCountry.code,c=e.identifyingCodeError;r("".concat(a).concat(n),t).then(function(e){var t=e.payload,e=t.data;if(t.success)return o();t=e.bindedAccountFullname,e=e.requestAccountFullname;return i({phoneNumber:n,bindName:t,requiredName:e})}).catch(function(e){var t=e.payload,e=(t=void 0===t?{}:t).code,t=t.message;e===Q.B&&s.setState({identifyingCodeError:c===t?" ".concat(t):t})})},s.handleZaOK=function(e){C.a.trackEvent(e.target,{action:"Ok"})},s.renderContent=function(){var e=s.state,t=e.smsInputInterceptTime,n=e.manualError,a=e.sendValidationCodeButtonText,e=e.identifyingCodeError;return Object(g.b)("div",{ref:function(e){s.container=e},children:Object(g.c)(v.b,{className:"SignFlow BindPhoneForm",onSubmit:s.handleSubmit,children:[!1,Object(g.b)(E.a,{type:"register",supportedCountriesShown:!0,manualValidateError:n,onSelect:s.handleChange("selectedCountry"),onChange:s.handleChange("phoneNo")}),Object(g.b)(k,{resetText:a,interceptTime:t,countDownEvent:s.handleSendDigits,manualValidateError:e},"sms-input"),Object(g.b)("div",{className:"BindPhone-helpWrapper",children:Object(g.b)(b.c,{className:"BindPhone-helpText",preset:"link",onClick:function(){s.setState({showFooter:!0})},children:"éœ€è¦å¸®åŠ©ï¼Ÿ"})}),Object(g.b)(b.c,{css:{display:"block",width:"220px",margin:"55px auto 0"},preset:"primary",color:"blue",type:"submit",onClick:s.handleZaOK,children:"ç¡®è®¤"})]})})},s}return Object(s.a)(o,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose,t=this.state.showFooter;return Object(g.b)(A.b,{title:"è®¾ç½®æ‰‹æœºå·",subtitle:"ç»‘å®šæ‰‹æœºåŽï¼Œä½ å°±å¯ä»¥ä½¿ç”¨çŸ¥ä¹Žçš„æé—®ã€å›žç­”ã€è¯„è®ºç­‰åŠŸèƒ½ã€‚",footer:t?"å¦‚éœ€è¦å¸®åŠ©ï¼Œè¯·è”ç³» i@zhihu.comï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¸®ä½ è§£å†³":null,onClose:e,size:"default",children:this.renderContent()})}}]),o}(o.Component);N.propTypes={requestPhoneVerificationCode:r.a.func.isRequired,updatePhoneNumber:r.a.func.isRequired,onClose:r.a.func.isRequired,onSuccess:r.a.func.isRequired,onNeedUnbind:r.a.func.isRequired};var T=n(102);var P=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var a;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(a=r.call.apply(r,[this].concat(t))).zaKnowMore=function(e){C.a.trackEvent(e.target,{action:"OpenUrl",name:"äº†è§£æ›´å¤š"})},a.toBindPhone=function(e){var t=a.props.onBindPhone;C.a.trackEvent(e.target,{action:"OpenUrl",name:"åŽ»ç»‘å®šæ‰‹æœº"}),t()},a.handleClose=function(e){var t=a.props,n=t.onClose,t=t.config.canWrite;C.a.trackEvent(e.target,{action:"Cancel",name:t?"æš‚ä¸ç»‘å®š":"å–æ¶ˆ"}),n()},a.renderContent=function(){var e=a.props.config,t=e.tip,e=e.canWrite;return Object(g.c)("div",{ref:function(e){a.container=e},children:[Object(g.c)("p",{children:[t,Object(g.b)(T.a,{preset:"link",target:"_blank",href:"https://zhuanlan.zhihu.com/p/27257715",onClick:a.zaKnowMore,children:"äº†è§£æ›´å¤š"})]}),Object(g.c)("div",{className:"BindPhone-buttonSection",children:[Object(g.b)(T.a,{className:"BindPhone-button",onClick:a.handleClose,children:e?"æš‚ä¸ç»‘å®š":"å–æ¶ˆ"}),Object(g.b)(b.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:a.toBindPhone,children:"åŽ»ç»‘å®šæ‰‹æœº"})]})]})},a}return Object(s.a)(o,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose;return Object(g.b)(A.b,{className:!1,title:"ç»‘å®šæ‰‹æœº",onClose:e,size:"default",children:this.renderContent()})}}]),o}(o.Component);P.propTypes={config:r.a.object,onClose:r.a.func,onBindPhone:r.a.func};var M=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var n;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))).handleCancel=function(e){var t=n.props.onClose;C.a.trackEvent(e.target,{action:"Cancel",name:"ä¸ç»‘å®š"}),t()},n}return Object(s.a)(o,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindMailForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var t=this,e=this.props.onClose;return Object(g.b)(A.b,{className:!1,title:"æ‰‹æœºå·ç»‘å®šæˆåŠŸ",onClose:e,size:"default",children:Object(g.c)("div",{ref:function(e){t.container=e},children:[Object(g.b)("p",{children:"ç”±äºŽä½ æ­¤å‰ç»‘å®šçš„é‚®ç®±æœªç»éªŒè¯ï¼Œæœªæ¥è¯·ä½¿ç”¨æ‰‹æœºå·ç™»å½•çŸ¥ä¹Žã€‚"}),Object(g.b)(b.c,{className:"BindPhone-remindLoginWithPhoneButton",onClick:this.handleCancel,preset:"primary",color:"blue",children:"çŸ¥é“äº†"})]})})}}]),o}(o.Component);M.propTypes={onClose:r.a.func};var D=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var n;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))).handleCancel=function(e){var t=n.props.onCancel;C.a.trackEvent(e.target,{action:"Click",name:"æš‚ä¸ç»‘å®š"}),t()},n.handleConfirm=function(e){var t=n.props.onConfirm;C.a.trackEvent(e.target,{action:"Click",name:"ç¡®è®¤è§£ç»‘"}),t()},n}return Object(s.a)(o,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneFailForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var t=this,e=this.props,n=e.onClose,a=e.phoneNumber,r=e.bindName,e=e.requiredName;return Object(g.b)(A.b,{className:!1,title:"ç»‘å®šå¤±è´¥",onClose:n,size:"default",children:Object(g.c)("div",{ref:function(e){t.container=e},children:[Object(g.c)("p",{children:["ä½ æ‰€è¾“å…¥çš„æ‰‹æœºå· ",a," å·²ç»è¢«ç»‘å®šåˆ°å¸å·ã€Œ",r,"ã€ã€‚"]}),!1,Object(g.c)("p",{children:["ä½ å¯ä»¥é€‰æ‹©å°†è¯¥æ‰‹æœºå·ä»Žè¯¥å¸å·ä¸­è§£ç»‘ï¼Œå¹¶ç»‘å®šè‡³å½“å‰å¸å·ã€Œ",e,"ã€ã€‚"]}),!1,Object(g.b)("p",{children:Object(g.c)("b",{children:["è§£ç»‘åŽï¼Œä½ å°†æ— æ³•å†é€šè¿‡æ‰‹æœºå·ç™»å½•åŽŸå¸å·ã€Œ",r,"ã€ã€‚"]})}),Object(g.c)("div",{className:"BindPhone-buttonSection",children:[Object(g.b)(b.c,{className:"BindPhone-button",onClick:this.handleConfirm,children:"ç¡®è®¤è§£ç»‘"}),Object(g.b)(b.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel,children:"æš‚ä¸ç»‘å®š"})]})]})})}}]),o}(o.Component);D.propTypes={onClose:r.a.func.isRequired,onCancel:r.a.func.isRequired,onConfirm:r.a.func.isRequired,phoneNumber:r.a.string.isRequired,bindName:r.a.string.isRequired,requiredName:r.a.string.isRequired};var V=function(e){Object(u.a)(i,e);var n,a,r=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function i(){var o;Object(c.a)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=r.call.apply(r,[this].concat(t))).handleUnbind=function(e){var t=o.props,n=t.onSuccess,a=t.monopolizePhoneNumber,r=t.showNotification;C.a.trackEvent(e.target,{action:"Click",name:"ç¡®è®¤è§£ç»‘"}),a().then(function(){return r("ç»‘å®šæˆåŠŸï¼","white"),n()})},o.handleCancel=function(e){var t=o.props.onCancel;C.a.trackEvent(e.target,{action:"Click",name:"æš‚ä¸ç»‘å®š"}),t()},o}return Object(s.a)(i,[{key:"componentDidMount",value:function(){C.a.setModule(this.container,{module:"BindPhoneVerifyForm"}),C.a.trackCardShow(this.container)}},{key:"render",value:function(){var t=this,e=this.props,n=e.onClose,e=e.bindName;return Object(g.b)(A.b,{className:!1,title:"è§£ç»‘æ‰‹æœº",onClose:n,size:"default",children:Object(g.c)("div",{ref:function(e){t.container=e},children:[Object(g.b)("p",{children:Object(g.b)("b",{children:"è§£ç»‘æ“ä½œæ— æ³•æ’¤é”€ã€‚"})}),!1,Object(g.c)("p",{children:["å¦‚æžœä½ æ²¡æœ‰å…¶ä»–ç™»å½•æ–¹å¼ï¼Œä½ å°†æ— æ³•å†ä½¿ç”¨å¸å·ã€Œ",e,"ã€ã€‚"]}),Object(g.c)("div",{className:"BindPhone-buttonSection",children:[Object(g.b)(b.c,{className:"BindPhone-button",onClick:this.handleUnbind,children:"ç¡®è®¤è§£ç»‘"}),Object(g.b)(b.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel,children:"æš‚ä¸ç»‘å®š"})]})]})})}}]),i}(o.Component);V.propTypes={onClose:r.a.func.isRequired,onSuccess:r.a.func.isRequired,onCancel:r.a.func.isRequired,bindName:r.a.string.isRequired,showNotification:r.a.func.isRequired,monopolizePhoneNumber:r.a.string.isRequired};a=n(125),R=n(36),n=n(25);o=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var a;Object(c.a)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(a=r.call.apply(r,[this].concat(t))).state={},a.handleBindPhoneSuccess=function(){var e=a.props,t=e.needShowLoginWithPhoneNumber,n=e.showNotification,e=e.onToggle;return t?a.goToStep("LOGIN_WITH_PHONE")():(n("ç»‘å®šæˆåŠŸï¼","white"),setTimeout(function(){return location.reload()},2e3),e())},a.handleNeedUnbind=function(e){var t=e.bindName,n=e.phoneNumber,e=e.requiredName;return a.setState({bindName:t,phoneNumber:n,requiredName:e,step:"NEED_UNBIND"})},a.goToStep=function(e){return function(){return a.setState({step:e})}},a.handleCloseWithReload=function(){return location.reload()},a}return Object(s.a)(o,[{key:"componentDidMount",value:function(){(0,this.props.fillCurrentUserIfNeeded)(["email","isActive"])}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.getUnlockRequest,a=t.hasActiveEmail,r=t.shown,o=t.account,i=o.errorStatus,t=o.challenge,o=document.querySelector(".VerificationDialogModalHeader");e.shown&&!r&&(n(),n="",n=a?"CONFIRM_BIND_PHONE":i&&!o&&t&&t.length?"SAFETY_VERIFICATION":"BIND_PHONE",this.setState({step:n}))}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.requestPhoneVerificationCode,a=e.updatePhoneNumber,r=e.monopolizePhoneNumber,o=e.showNotification,i=e.config,c=e.account,s=e.unlockTicketByDigits,u=e.requestUnlockTicket,l=e.unlockTicketByPassword,d=e.onToggle,h=this.state,p=h.step,f=h.bindName,e=h.phoneNumber,h=h.requiredName;return t?"CONFIRM_BIND_PHONE"===p?Object(g.b)(P,{onBindPhone:this.goToStep("SAFETY_VERIFICATION"),onClose:d,config:i}):"BIND_PHONE"===p?Object(g.b)(N,{onClose:d,onSuccess:this.handleBindPhoneSuccess,onNeedUnbind:this.handleNeedUnbind,requestPhoneVerificationCode:n,updatePhoneNumber:a}):"LOGIN_WITH_PHONE"===p?Object(g.b)(M,{onClose:this.handleCloseWithReload}):"NEED_UNBIND"===p?Object(g.b)(D,{onClose:d,onCancel:this.goToStep("BIND_PHONE"),onConfirm:this.goToStep("CONFIRM_UNBIND"),bindName:f,phoneNumber:e,requiredName:h}):"CONFIRM_UNBIND"===p?Object(g.b)(V,{onClose:d,onSuccess:this.handleBindPhoneSuccess,onCancel:this.goToStep("BIND_PHONE"),bindName:f,monopolizePhoneNumber:r,showNotification:o}):"SAFETY_VERIFICATION"===p?Object(g.b)(m.a,{isShown:!0,account:c,unlockTicketByDigits:s,requestUnlockTicket:u,unlockTicketByPassword:l,onClose:d,onSuccess:this.goToStep("BIND_PHONE"),zaModuleName:"BindMailForm"}):null:null}}]),o}(o.Component);o.propTypes={shown:r.a.bool.isRequired,onToggle:r.a.func.isRequired,needShowLoginWithPhoneNumber:r.a.bool.isRequired,config:r.a.object.isRequired,requestPhoneVerificationCode:r.a.func.isRequired,updatePhoneNumber:r.a.func.isRequired,monopolizePhoneNumber:r.a.func.isRequired},t.default=Object(i.compose)(Object(p.b)(),Object(h.connect)(function(e,t){var n=e.account,e=t.currentUser,t=e.isActive,e=e.email;return{account:n,hasActiveEmail:t&&e,needShowLoginWithPhoneNumber:!t&&!!e,config:Q.O}},{requestPhoneVerificationCode:a.l,updatePhoneNumber:a.v,monopolizePhoneNumber:a.i,showNotification:n.h,getUnlockRequest:a.g,unlockTicketByDigits:a.q,requestUnlockTicket:a.m,unlockTicketByPassword:a.r,fillCurrentUserIfNeeded:R.e}))(o)},780:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var i=n(35),c=n(14),s=n(15),u=n(16),l=n(17),d=n(9),h=n(2),t=n(1),p=n(73),f=n(1770);var a=function(e){Object(u.a)(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Object(d.a)(n);return t=a?(e=Object(d.a)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),Object(l.a)(this,t)});function o(){var t;Object(c.a)(this,o);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n))).state={signType:t.props.signType||"login"},t.handleChangeSignType=function(e){t.setState({signType:e})},t}return Object(s.a)(o,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.showQrcodeFirst,a=e.titlePart,e=Object(i.a)(e,["onClose","showQrcodeFirst","titlePart"]);return Object(h.c)(p.b,Object.assign({className:"signFlowModal",onClose:t},e,{children:[a,Object(h.b)(f.a,{showQrcodeFirst:n,signType:this.state.signType,onChangeSignType:this.handleChangeSignType})]}))}}]),o}(t.Component)},841:function(e,t,n){"use strict";function a(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return a})},885:function(e,t,n){"use strict";function u(e){var t=e.title,n=e.content,a=e.ok,r=e.cancel,o=e.onOk,i=e.onCancel,c=Object(h.a)(e,["title","content","ok","cancel","onOk","onCancel"]),s=Object(f.useState)(!0),e=(l=Object(d.a)(s,2))[0],u=l[1],s=function(e){return function(){u(!1),e()}},l=Object(A.b)();return Object(p.b)(m.b,Object.assign({closeButton:null,maskClosable:!1,hotKeyClosable:!1,css:[{overflow:"hidden",maxWidth:"96vw",".Modal-content":{margin:0,padding:0}},l.Mobile&&{width:320,borderRadius:12,boxShadow:""}]},c,{children:e&&Object(p.c)(g.Box,{px:"36px",py:"24px",children:[t&&Object(p.b)(g.Text,{fontSize:"18px",lineHeight:"28px",fontWeight:"bold",textAlign:"center",children:t}),n&&Object(p.b)(g.Text,{mt:t?"16px":"0",fontSize:"14px",lineHeight:"normal",color:"GBK03A",maxHeight:"calc(67vh - 100px)",css:{wordBreak:"break-all",overflowY:"auto",WebkitOverflowScrolling:"touch",marginRight:-10,paddingRight:10},children:n}),Object(p.c)(g.Flex,{mt:"16px",css:{button:{padding:0,flex:1,height:36,lineHeight:1,fontSize:15,borderRadius:4,":active":{opacity:.6}}},fontWeight:"bold",children:[r&&Object(p.b)(b.c,{css:{marginRight:4},onClick:s(i),children:r}),Object(p.b)(b.c,{preset:"primary",color:"blue",onClick:s(o),children:a})]})]})}))}var d=n(43),h=n(35),p=n(2),f=n(1),g=n(90),m=n(73),b=n(31),a=n(111),l=n.n(a),A=n(365),r=n(404);t.a=function(){function c(e){return setTimeout(function(){return t(e)},300)}var e=Object(r.b)(),s=e.addInstance,t=e.removeInstance;return{alert:function(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.title,r=e.ok;return new Promise(function(e){n=Object(p.b)(u,{content:t,title:a,ok:r||"ç¡®å®š",onOk:e,css:{textAlign:"center"}},l()("modal")),s(n)}).finally(function(){return c(n)})},confirm:function(n){var a,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e.title,o=e.ok,i=e.cancel;return new Promise(function(e,t){a=Object(p.b)(u,{content:n,title:r,ok:o||"ç¡®å®š",onOk:e,cancel:i||"å–æ¶ˆ",onCancel:t},l()("modal")),s(a)}).finally(function(){return c(a)})}}}},938:function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n,e.exports.default=n}}]);
