$(function(){function e(e,t,a){var n;0==e?(n=t=t||13,c("/js/weather/id2pref.json","#select-area1",null,function(e){e.attr("name","pref_id"),e.change(function(){i($(this).val())}),n&&e.val(n),$("#area1-label").text("éƒ½é“åºœçœŒ")}),i(t,a)):c("/js/weather/country2area.json","#select-area1",e,function(e){e.attr("name","city_id"),e.unbind("change"),$("#area1-label").text("åœ°åŸŸ"),$("#area2").css("display","none")})}function a(){$("#weather-setting").css("display","none"),$("aside#close_layer").css("z-index","-1")}var c=function(e,c,i,o){$.get(e,function(e){var t,a=e;for(t in i&&(a=a[i]),$(c).empty(),a){var n=$("<option></option>");n.val(t),n.text(a[t]),n.appendTo($(c))}$.isFunction(o)&&o($(c))})},i=function(e,t){c("/js/weather/pref2area.json","#select-area2",e,function(e){e.attr("name","city_id"),t&&e.val(t),$("#area2").css("display",""),$("#weather-form .area2-select").text($("#select-area2 option:selected").text())})};$("#select-area1").on("change",function(){$("#weather-form .area1-select").text($("option:selected",this).text())}).trigger("change"),$("#select-area2").on("change",function(){$("#weather-form .area2-select").text($("option:selected",this).text())}).trigger("change"),$("#select-country").change(function(){e($(this).val())}),$(document.body).on("submit","#weather-form",function(){var t,e;t=$("select[name='city_id']").val(),e="/"+$LDTOP_VERSION+"/weather/city_"+t+".inc",$.get(e,function(e){$("#weather").html(e),$.post("/weather",{city_id:t}),a()})}),$(document.body).on("click","#side-bar .side-weather .setting",function(){$("#weather-setting").css("display","block"),$("#close_layer").css("z-index","5"),$("#weather-form .area1-select").text($("#select-area1 option:selected").text()),$("#weather-form .area2-select").text($("#select-area2 option:selected").text())}),$("#weather-setting .btn-close").on("click",function(){$("#slide-box").css("display","none"),a()}),$("#close_layer").on("click",function(){$("#slide-box").css("display","none"),a()})});
