!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VISION",[],t):"object"==typeof exports?exports.VISION=t():e.VISION=t()}("undefined"!=typeof self?self:this,function(){return i={624:(e,t,n)=>{"use strict";function i(){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node}function r(e){return e instanceof Uint8Array&&(!i()||!Buffer.isBuffer(e))}function s(e){return e instanceof ArrayBuffer}function o(e){return i()&&Buffer.isBuffer(e)}var c=n(350).g,u=n(508).l,l="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";t.uncompress=function(e){if(!r(e)&&!s(e)&&!o(e))throw new TypeError(l);var t=!1,n=!1;r(e)?t=!0:s(e)&&(n=!0,e=new Uint8Array(e));var i,a=new c(e),e=a.readUncompressedLength();if(-1===e)throw new Error("Invalid Snappy bitstream");if(t){if(i=new Uint8Array(e),!a.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream")}else if(n){if(i=new ArrayBuffer(e),n=new Uint8Array(i),!a.uncompressToBuffer(n))throw new Error("Invalid Snappy bitstream")}else if(i=Buffer.alloc(e),!a.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream");return i},t.compress=function(e){if(!r(e)&&!s(e)&&!o(e))throw new TypeError(l);var t=!1,n=!1;r(e)?t=!0:s(e)&&(n=!0,e=new Uint8Array(e));var i,a=new u(e),e=a.maxCompressedLength(),a=t?(i=new Uint8Array(e),a.compressToBuffer(i)):n?(i=new ArrayBuffer(e),n=new Uint8Array(i),a.compressToBuffer(n)):(i=Buffer.alloc(e),a.compressToBuffer(i));return i.slice(0,a)}},508:(e,t)=>{"use strict";var w=new Array(15);function I(e,t){return 506832829*e>>>t}function k(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function A(e,t,n){return e[t]===e[n]&&e[t+1]===e[n+1]&&e[t+2]===e[n+2]&&e[t+3]===e[n+3]}function O(e,t,n,i,a){return n<=60?(i[a]=n-1<<2,a+=1):n<256?(i[a]=240,i[a+1]=n-1,a+=2):(i[a]=244,i[a+1]=n-1&255,i[a+2]=n-1>>>8,a+=3),function(e,t,n,i,a){for(var r=0;r<a;r++)n[i+r]=e[t+r]}(e,t,i,a,n),a+n}function E(e,t,n,i){return i<12&&n<2048?(e[t]=1+(i-4<<2)+(n>>>8<<5),e[t+1]=255&n,t+2):(e[t]=2+(i-1<<2),e[t+1]=255&n,e[t+2]=n>>>8,t+3)}function s(e,t,n,i,a){for(var r=1;1<<r<=n&&r<=14;)r+=1;var s=32- --r;void 0===w[r]&&(w[r]=new Uint16Array(1<<r));for(var o=w[r],c=0;c<o.length;c++)o[c]=0;var u,l,d,_,p,f,m,g,v,h=t+n,b=t,y=t,S=!0;if(15<=n)for(u=h-15,d=I(k(e,t+=1),s);S;){f=32,_=t;do{if(l=d,m=f>>>5,f+=1,_=(t=_)+m,u<t){S=!1;break}}while(d=I(k(e,_),s),p=b+o[l],o[l]=t-b,!A(e,t,p));if(!S)break;a=O(e,y,t-y,i,a);do{for(v=t,g=4;t+g<h&&e[t+g]===e[p+g];)g+=1;if(t+=g,a=function(e,t,n,i){for(;68<=i;)t=E(e,t,n,64),i-=64;return 64<i&&(t=E(e,t,n,60),i-=60),E(e,t,n,i)}(i,a,v-p,g),u<=(y=t)){S=!1;break}}while(o[I(k(e,t-1),s)]=t-1-b,p=b+o[v=I(k(e,t),s)],o[v]=t-b,A(e,t,p));if(!S)break;d=I(k(e,t+=1),s)}return a=y<h?O(e,y,h-y,i,a):a}function n(e){this.array=e}n.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},n.prototype.compressToBuffer=function(e){for(var t,n=this.array,i=n.length,a=0,r=function(e,t,n){for(;t[n]=127&e,0<(e>>>=7)&&(t[n]+=128),n+=1,0<e;);return n}(i,e,r=0);a<i;)r=s(n,a,t=Math.min(i-a,65536),e,r),a+=t;return r},t.l=n},350:(e,t)=>{"use strict";var u=[0,255,65535,16777215,4294967295];function n(e){this.array=e,this.pos=0}n.prototype.readUncompressedLength=function(){for(var e,t,n=0,i=0;i<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<i>>>i!=t)return-1;if(n|=t<<i,e<128)return n;i+=7}return-1},n.prototype.uncompressToBuffer=function(e){for(var t,n,i,a,r=this.array,s=r.length,o=this.pos,c=0;o<r.length;)if(t=r[o],o+=1,0==(3&t)){if(60<(n=1+(t>>>2))){if(s<=o+3)return!1;i=n-60,n=1+((n=r[o]+(r[o+1]<<8)+(r[o+2]<<16)+(r[o+3]<<24))&u[i]),o+=i}if(s<o+n)return!1;(function(e,t,n,i,a){for(var r=0;r<a;r++)n[i+r]=e[t+r]})(r,o,e,c,n),o+=n,c+=n}else{switch(3&t){case 1:n=4+(t>>>2&7),a=r[o]+(t>>>5<<8),o+=1;break;case 2:if(s<=o+1)return!1;n=1+(t>>>2),a=r[o]+(r[o+1]<<8),o+=2;break;case 3:if(s<=o+3)return!1;n=1+(t>>>2),a=r[o]+(r[o+1]<<8)+(r[o+2]<<16)+(r[o+3]<<24),o+=4}if(0===a||c<a)return!1;(function(e,t,n,i){for(var a=0;a<i;a++)e[t+a]=e[t-n+a]})(e,c,a,n),c+=n}return!0},t.g=n},943:e=>{e.exports={config:{disableSdkVersions:"",disableMediaSdkVersions:"",disableAppVersions:"",disableMediaAppVersions:"",collection:!0,mediaCollection:!0,compression:"none",pollConfigIntervalSec:600,flushAtEventCount:10,flushIntervalSec:60,mediaLengthShortSec:90,mediaLengthMediumSec:3600,mediaHeartbeatShortSec:5,mediaHeartbeatMediumSec:10,mediaHeartbeatLongSec:20,mediaPauseTimeoutSec:600,mediaAdHeartbeatSec:10,pageHeartbeatCollection:!1,pageHeartbeatInSeconds:60,pageActiveThreshold:120,privacy:!1,vpk:"vision"},storageVariables:{localStorage:["visionEvents","visionMediaEvents","visionConfigTimestamp","visionConfiguration","visionSession","visionAnonId"],sessionStorage:["visionPageId","visionPageIdSource","visionPageInstanceId","visionPageLocation","visionPagePreviousUrl","visionDeviceAdvertiserId","visionStateTest","visionStatePrivacy","visionUserGuestId","visionUserAffiliate","visionUserMvpdShortName","visionUserMvpdName","visionUserSubscriberType","visionUserAccessMethod","visionUserDisneyPlusBundle","visionUserSubscriptionId","visionUserDssId","visionBrowserSession"]}}},436:e=>{e.exports={globalMappings:{browser_height:["br2",!1,!0],browser_width:["br3",!1,!0],browser_cookies_flag:["br4",!1,!0],browser_local_storage_flag:["br5",!1,!0],browser_java_flag:["br6",!1,!0],browser_javascript_version:["br7",!1,!0],browser_plugins:["br8",!1,!0],browser_flash_version:["br9",!1,!0],device_height:["d5",!1,!0],device_width:["d6",!1,!0],device_advertiser_id:["d13",!1,!0],user_guest_id:["u1",!1,!0],user_affiliate:["u2",!0,!0],user_mvpd_short_name:["u3",!0,!0],user_mvpd_name:["u4",!0,!0],user_subscriber_type:["u5",!0,!0],user_access_method:["u6",!0,!0],user_disney_plus_bundle:["u7",!0,!0],user_anonymous_id:["u8",!1,!0],user_subscription_id:["u9",!0,!0],user_dss_id:["u10",!0,!0]},eventMappings:{ad_id:"ad1",ad_creative:"ad2",ad_type:"ad3",ad_placement:"ad4",ad_orientation:"ad6",ad_destination_url:"ad7",ad_version:"ad8",ad_parent_type:"ad9",ad_parent_id:"ad10",ad_pod_number:"ad11",ad_pod_size:"ad12",api_url:"ap1",api_method:"ap2",api_response_time:"ap3",article_id:"ar1",article_id_source:"ar2",article_name:"ar3",event_name:"e2",event_instance_id:["e3",!1,!0],event_session_sequence_num:["e4",!1,!0],event_timestamp:"e6",event_log_timestamp:["e7",!1,!0],event_test:"e10",event_error_code:"e11",event_error_message:"e12",event_error_stack_trace:"e13",funnel_type:"fn1",funnel_name:"fn2",funnel_milestone:"fn3",link_module_name:"l1",link_module_position:"l2",link_name:"l4",link_position:"l5",link_destination_location:"l7",link_destination_url:"l8",media_id:"m1",media_id_source:"m2",media_name:"m3",media_observed_bitrate:"m5",media_content_length:"m6",media_current_position:"m7",media_current_chapter:"m8",media_player_name:"m9",media_player_type:"m10",media_player_version:"m11",media_session_id:"m12",media_subtitle_language:"m16",media_audio_language:"m18",media_video_type:"m20",media_playlist_id:"m24",media_ad_id:"m26",media_ad_id_source:"m27",media_time_spent:"m28",media_ad_time_spent:"m29",media_live:"m30",media_viewing_mode:"m31",media_channel:"m32",media_air_date:"m33",media_air_time:"m34",media_airing_id:"m35",media_program_code:"m36",media_segment:"m37",media_sport:"m38",media_league:"m39",media_start_type:"m40",media_network_name:"m41",media_is_mute:"m42",media_live_scoring:"m43",media_autoplay_sound:"m45",media_video_type_detail:"m46",media_show_code:"m47",media_play_location:"m48",media_gam_event_key_part:"m49",media_gam_line_item_id:"m50",media_gam_impression_id:"m51",media_gam_time_usec2:"m52",media_binge_play_count:"m53",page_location:["p1",!0],page_url:["p2",!0],page_id:["p3",!0],page_id_source:["p4",!0],page_instance_id:["p5",!0],page_previous_url:["p6",!0,!0],page_z_axis:"p7",page_version:"p8",page_type:["p9",!0],page_time_spent:"p10",page_user_mode:"p11",page_auth_flag:"p12",page_nav_method:"p13",page_premium_content:"p14",pzncon_event:"pc1",pzncon_personalized:"pc2",pzncon_curated:"pc3",pzncon_reason:"pc4",pzncon_rule:"pc5",pzncon_edition:"pc6",pzncon_slot_position:"pc7",pzncon_presentation_type:"pc8",pzncon_content_id:"pc9",pzncon_content_id_type:"pc10",pzncon_nav_method:"pc11",pzncon_clubhouse:"pc12",pzncon_feed_version:"pc13",pzncon_content_score:"pc14",pzncon_entitled:"pc15",pzncon_collection_id:"pc16",pzncon_collection_id_type:"pc17",pzncon_personal_metadata:"pc18",pzncon_originally_published:"pc19",pzncon_last_modified:"pc20",pznfav_event:"pf1",pznfav_entity_id:"pf2",pznfav_entity_type:"pf3",prompt_view:"pr1",prompt_input:"pr2",payment_id:"py1",payment_category:"py2",payment_balance:"py3",payment_type:"py4",payment_sub_type:"py5",payment_currency:"py6",payment_country:"py7",payment_amount:"py8",payment_partner:"py9",payment_item:"py10",payment_item_count:"py11",payment_pay_wall_shown:"py12",payment_program_data:"py13",registration_guest_id:"r1",registration_guest_id_domain:"r2",registration_flow:"r3",registration_step:"r4",state_cmp:["s1",!0],state_test:["s2",!0],state_orientation:["s3",!1,!0],session_id:["se1",!1,!0],session_language:["se2",!1,!0],session_first_page:["se3",!1,!0],session_first_url:["se4",!1,!0],session_first_referrer_url:["se5",!1,!0],session_start_timestamp:["se9",!1,!0],session_total_time:["se10",!1,!0],search_module:"sr1",search_type:"sr2",search_keyword_executed:"sr3",search_keyword_typed:"sr4",search_refinement:"sr5",search_results_count:"sr6"}}},94:(e,t,n)=>{var i=n(436),a=i.globalMappings,l=i.eventMappings,_=n(769),p=n(758).logError;function d(e,t,n,i,a){var r,s,o={};for(s in n)try{var c=r=!1,u=n[s];Array.isArray(u)&&(c=u[1]||!1,r=u[2]||!1,u=u[0]),function(e,t,n,i,a,r,s,o,c){var u,l,d;try{o||(l=i[r],delete i[r]),void 0!==l&&""!==l||(t[r]&&t[r].getValue?l=t[r].getValue(c):s&&(u=r.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),l=_.getFromState(e,u)))}catch(e){p("Error caught in fetching property "+r+" value",e.stack)}try{void 0!==l&&""!==l&&(n[a]=l,s)&&(d=r.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),_.saveToState(e,d,l))}catch(e){p("Error caught in retrieving property "+r+" value",e.stack)}}(e,t,o,i,u,s,c,r,a)}catch(e){}return o}e.exports={createEventProps:function(e,t,n,i){for(var a=[],r=0;r<n.length;r++){var s,o=n[r]||{};if(0!==Object.keys(o).length){"page_view"!==o.event_name||(s=_.getFromState(e,"PageUrl"))&&_.saveToState(e,"PagePreviousUrl",s),o.page_location&&!_.getLocalValue("session_first_page")&&_.updateSession({session_first_page:o.page_location}),o.page_url&&!_.getLocalValue("session_first_url")&&_.updateSession({session_first_url:o.page_url}),_.getLocalValue("session_first_referrer_url")||(s=_.getFromState(e,"PagePreviousUrl"))&&_.updateSession({session_first_referrer_url:s}),o.hasOwnProperty("event_timestamp")||(o.event_timestamp=Date.now());try{var c={},u=d(e,t,l,o,i);Object.assign(c,u),0<Object.keys(o).length&&(c.unmapped=o),a.push(c)}catch(e){p("Error caught in building event",e.stack)}}}return a},buildGlobalJson:function(e,t,n){var i={global:{a1:e.app_bundle_id,a2:e.app_suite,a3:e.app_platform,a4:e.app_version,a5:"9.10.4",a6:e.app_region,a7:e.app_country,a8:e.app_network,a10:e.app_zipcode,a11:e.app_id},events:[]},n=d(e,t,a,{},n);return Object.assign(i.global,n),i}}},596:(e,t,n)=>{var I=n(758).mediaSessionUuid;e.exports=function(s,a){function o(e){return null===e?s.mediaHeartbeatLongSec:e<s.mediaLengthShortSec?s.mediaHeartbeatShortSec:e<s.mediaLengthMediumSec?s.mediaHeartbeatMediumSec:s.mediaHeartbeatLongSec}function c(e){(e=JSON.parse(e)).media_session_id=m,e.event_name="media_ad_stop",w(e,"ad"),S=h=y=b=0,m=v=null}function u(e){var t=JSON.parse(e),n=Date.now()-parseInt(v,10)+b;t.media_session_id=m,t.event_name="media_ad_heartbeat",t.media_current_position=null,v&&12e4<Date.now()-parseInt(v,10)?(f&&clearTimeout(f),_&&clearInterval(_),b=n,c(e)):w(t,"ad",n)}function l(e){var t=JSON.parse(e),e=Date.now()-parseInt(g,10)+h;t.media_session_id=m,t.event_name="media_heartbeat",t.media_current_position=null,w(t,"video",e)}var d,_,p,f,m,g=null,v=null,h=0,b=0,y=0,S=0,w=function(e,t,n){var i=("ad"===t&&n?n:b)/1e3||0,n=("ad"!==t&&n?n:h)/1e3||0;"ad"===t?Math.abs(y-i)>s.mediaAdHeartbeatSec+1&&(i=y+s.mediaAdHeartbeatSec,b=1e3*i,v=Date.now()):(t=o(e.media_content_length),Math.abs(S-n)>t+1&&(h=1e3*(n=S+t),g=Date.now())),S=n,y=i;n=Object.assign(e,{media_ad_time_spent:i,media_time_spent:n,event_timestamp:Date.now()});a(n)};return{createEvent:function(e){var t,n,i=s.mediaHeartbeatShortSec,a=Date.now();switch(e.media_session_id=m,e.event_name){case"media_ad_start":m||(t=Object.assign({},e),m=I(),t.event_name="media_init",t.media_session_id=m,w(t,"ad"),e.event_name="media_ad_start"),v=a,b=b||0,e.media_session_id=m,_&&clearInterval(_),_=setInterval(u.bind(null,JSON.stringify(e)),1e3*s.mediaAdHeartbeatSec),g&&(h=Date.now()-parseInt(g,10)+h,clearInterval(d),g=null),w(e,"ad");break;case"media_ad_stop":if(null==m)return;clearInterval(_),f&&clearTimeout(f),v&&(b=Date.now()-parseInt(v,10)+b),0<h&&(g=a,i=o(e.media_content_length),d&&clearInterval(d),d=setInterval(l.bind(null,JSON.stringify(e)),1e3*i)),w(e,"ad"),v=null;break;case"media_ad_skipped":if(null==m)return;clearInterval(_),f&&clearTimeout(f),v&&(b=Date.now()-parseInt(v,10)+b),0<h&&(g=a,i=o(e.media_content_length),d&&clearInterval(d),d=setInterval(l.bind(null,JSON.stringify(e)),1e3*i)),w(e,"ad");var r=Object.assign({},e,{event_name:"media_ad_stop"});w(r,"ad"),v=null;break;case"media_dispose_ad_stop":if(clearInterval(_),f&&clearTimeout(f),d&&clearInterval(d),null===v)return;b=Date.now()-parseInt(v,10)+b,e.event_name="media_ad_stop",w(e,"ad"),S=h=y=b=0,m=g=null;break;case"media_ad_play":m||(r=Object.assign({},e),m=I(),r.event_name="media_init",r.media_session_id=m,w(r),e.event_name="media_ad_start"),e.media_session_id=m,v=a,f&&clearTimeout(f),_&&clearInterval(_),_=setInterval(u.bind(null,JSON.stringify(e)),1e3*s.mediaAdHeartbeatSec),w(e,"ad");break;case"media_ad_pause":if(null==m)return;clearInterval(_),b=Date.now()-parseInt(v,10)+b,f=setTimeout(c.bind(null,JSON.stringify(e)),1e3*s.mediaPauseTimeoutSec),v=null,w(e,"ad");break;case"media_buffer_start":case"media_buffer_end":if(null==m)return;h=Date.now()-parseInt(g,10)+h,g=a,w(e,"video");break;case"media_start":m||(n=Object.assign({},e),m=I(),n.event_name="media_init",n.media_session_id=m,w(n),e.event_name="media_start"),b=b||0,g=a,i=o(e.media_content_length),d&&clearInterval(d),d=setInterval(l.bind(null,JSON.stringify(e)),1e3*i),e.media_session_id=m,w(e);break;case"media_pause":if(!m||!g)return;h=Date.now()-parseInt(g,10)+h,p=setTimeout(function(e){e=JSON.parse(e);m=null,e.event_name="media_stop",w(e),S=h=y=b=0,v=g=null}.bind(null,JSON.stringify(e)),1e3*s.mediaPauseTimeoutSec),clearInterval(d),g=null,w(e);break;case"media_play":m||(n=Object.assign({},e),m=I(),n.event_name="media_init",n.media_session_id=m,w(n),e.event_name="media_start"),g=a,i=o(e.media_content_length),d&&clearInterval(d),d=setInterval(l.bind(null,JSON.stringify(e)),1e3*i),p&&clearTimeout(p),e.media_session_id=m,w(e);break;case"media_stop":if(d&&clearInterval(d),p&&clearTimeout(p),null==m)return;m=null,g&&(h=Date.now()-parseInt(g,10)+h),w(e),S=h=y=b=0,g=null;break;case"media_forward":if(null==m)return;h=Date.now()-parseInt(g,10)+h,g=a,w(e,"video");break;case"media_backward":if(!m||!g)return;h=Date.now()-parseInt(g,10)+h,g=a,w(e,"video")}}}}},108:(e,t,n)=>{function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=n(450),a=n(317),_=a.config,p=function(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};for(var n,i={},a=Object.keys(e),r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}(a,["config"]),r=n(476),f=n(94),a=n(921),m=a.subscribe,g=a.publish,v=n(438),h=n(769),a=n(758),b=a.removeEmpty,y=a.removeEmptyFromArray,S=a.removeFromIdArray,w=a.wrapFunction,I=a.logError,k=n(943).storageVariables;p.init(),r.init(),h.init();r=function(){"use strict";var a;function r(){return a=a||this}r.getInstance=function(){return a||new r},r.prototype.__producerData={},r.prototype.__mediaInstances=[],r.prototype.__queuefn=[],r.prototype.__pageInstance={},r.prototype.__mediaInstance={},r.setConfigs=function(e){a=r.getInstance();try{p.setConfig(e),a.__initVision()}catch(e){g("debug",e,"error"),I(e)}},r.clearStorage=function(){if((a=r.getInstance()).__variableLogic){if(_.storageEnabled){for(var e=0;e<k.localStorage.length;e++)localStorage.removeItem(k.localStorage[e]);for(var t=0;t<k.sessionStorage.length;t++)sessionStorage.removeItem(k.sessionStorage[t])}}else a.__queuefn.push(w(r.clearStorage,a))},r.prototype.__getCollectionStatus=function(){var e=_.disableSdkVersions,t=_.disableAppVersions,n=_.disableMediaSdkVersions,i=_.disableMediaAppVersions;return{isEnabled:_.collection&&(!e||-1===e.split(",").indexOf(this.__variableLogic.app_logging_lib_version.getValue()))&&(!t||-1===t.split(",").indexOf(_.app_version.replace(/\(.*\)/g,"").trim())),isMediaEnabled:_.mediaCollection&&(!n||-1===n.split(",").indexOf(this.__variableLogic.app_logging_lib_version.getValue()))&&(!i||-1===i.split(",").indexOf(_.app_version.replace(/\(.*\)/g,"").trim()))}},r.prototype.__setBatchInterval=function(){this.batchIntervalId&&clearInterval(this.batchIntervalId),this.batchIntervalId=setInterval(this.__postEventsInBatch.bind(this),1e3*_.flushIntervalSec)},r.prototype.__initVision=function(){this.__pageInstance.sessionStartTime||(m("config.flush-interval-update",this.__setBatchInterval.bind(this)),p.startRemoteConfigSync(),this.__setVariableLogic(),this.__setBatchInterval(),setInterval(this.__pageHeartbeatCallback.bind(this),1e3*_.pageHeartbeatInSeconds),document.addEventListener("scroll",this.__scrollCallback.bind(this)),window.onbeforeunload=this.__beforeUnloadCallback,this.__pageInstance.sessionStartTime=Date.now(),this.__pageInstance.lastUserActive=Date.now())},r.prototype.__pageHeartbeatCallback=function(){var t=Date.now(),e=this.__pageInstance,n=e.sessionStartTime,e=e.lastUserActive;Math.abs(t-n)>1e3*(_.pageHeartbeatInSeconds+10)||!1!==e&&(t-e<1e3*_.pageActiveThreshold?_.pageHeartbeatCollection&&a.__trackQueue({event_name:"page_heartbeat"}):(a.__trackQueue({event_name:"page_close"}),this.__pageInstance.lastUserActive=!1),h.updateSession({session_total_time:function(e){return(t-n)/1e3+parseFloat(e||0)}})),this.__pageInstance.sessionStartTime=Date.now()},r.prototype.__scrollCallback=function(){this.__pageInstance.lastUserActive=Date.now()},r.prototype.__beforeUnloadCallback=function(){var t=a.__pageInstance.sessionStartTime;h.updateSession({session_total_time:function(e){return(Date.now()-t)/1e3+parseFloat(e||0)}})},r.prototype.__setVariableLogic=function(){var e=new d;for(this.__variableLogic=e.getVariableLogic(),window.JSON||document.write('<script src="http://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"><\/script>'),h.setOnloadState({PagePreviousUrl:document.referrer||"na",PageInstanceId:Date.now()+"-"+Math.floor(1e13*Math.random())});0<this.__queuefn.length;)this.__queuefn.shift()()},r.prototype.__postEventsInBatch=function(){if(0!==(t=JSON.parse(localStorage.getItem("visionEvents"))||[]).length)try{var e=f.buildGlobalJson(_,a.__variableLogic,a),t=y(t);(e=b(e)).events=t,v.sendEvents(e,_,a.__trackCallback.bind(a),a.__trackErrorCallback.bind(a),!0),localStorage.removeItem("visionEvents")}catch(e){I("Error in initial track request",e.stack)}},r.prototype.set=function(){this.__variableLogic?this.__set(arguments):this.__queuefn.push(w(this.__set,this,arguments))},r.prototype.__set=function(e){try{if("object"===c(e)){if(void 0!==arguments[1]&&!0===arguments[1]&&void 0!==this.__producerData[e])return;Object.assign(this.__producerData,e)}else"string"==typeof e&&(this.__producerData[e]=arguments[1])}catch(e){I("Error in setting singleton property",e.stack)}},r.prototype.get=function(e){return this.__producerData[e]},r.prototype.__trackCallback=function(){},r.prototype.__trackErrorCallback=function(e,t,n,i){i?(401===n&&(p.resetConfigVpk(),p.fetchRemoteConfig()),v.sendEvents(e,_,this.__trackCallback.bind(this),this.__trackErrorCallback.bind(this),!1)):g("debug",JSON.stringify(t),"error")},r.prototype.__addGuestIdQueue=function(t,e,n,i){var a=this.userGuestId||[];try{i?i instanceof String||(i=i.toString()):i="tertiary","primary"===i.toLowerCase()?a[0]={id:t,s:e,l:n}:"secondary"===i.toLowerCase()?a[1]={id:t,s:e,l:n}:a.some(function(e){return e.id===t})||a.push({id:t,s:e,l:n}),this.userGuestId=a}catch(a){I("Error adding guest information: "+t+", "+e+", "+n+", "+i+", to array",a.stack)}};function s(e){return function(){h.deleteFromState(_,e)}}function o(i){return function(){a=r.getInstance();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.__variableLogic?i.call.apply(i,[a].concat(t)):a.__queuefn.push(w(i,a,[].concat(t)))}}return["device_advertiser_id","state_privacy","user_affiliate","user_mvpd_short_name","user_mvpd_name","user_subscriber_type","user_access_method","user_disney_plus_bundle"].forEach(function(e){var t,n=e.split("_").slice(1).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),e=e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("");r["set"+n]=o((t=e,function(e){h.saveToState(_,t,e)})),r["unset"+n]=o(s(e))}),["state_test","user_dss_id"].forEach(function(e){var n,i,t=e.split("_").slice(1).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),e=e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("");r["add"+t]=o((i=e,function(t,e){var n=JSON.parse(h.getFromState(_,i))||[];n.some(function(e){return e.id===t})||h.saveToState(_,i,[].concat(u(n),[{id:t,s:e}]))})),r["unset"+t]=o((n=e,function(e){var t=JSON.parse(h.getFromState(_,n))||[],e=S(e,t,0);return e&&h.saveToState(_,n,t),e})),r["unsetAll"+t]=o(s(e))}),r.addGuestId=o(r.prototype.__addGuestIdQueue),r.addSubscriptionId=o(function(){for(var e="UserSubscriptionId",t=JSON.parse(h.getFromState(_,e))||[],n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var r,s=1===i.length?[void 0,i[0]]:i,r=(r=2,function(e){if(Array.isArray(e))return e}(s=s)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}}(s,r)||l(s,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],c=r[1];t.some(function(e){return e.id===o&&e.s===c})||h.saveToState(_,e,[].concat(u(t),[{id:o,s:c}]))}),r.unsetSubscriptionId=o(function(t){var e="UserSubscriptionId",n=JSON.parse(h.getFromState(_,e))||[],i=n.filter(function(e){return e.s!==t}),n=n.length!==i.length;return n&&h.saveToState(_,e,i),n}),r.unsetAllSubscriptionId=o(s("UserSubscriptionId")),r}();e.exports=r},698:e=>{e.exports={browser:{width:{id:"browser_width",getValue:function(){return parseInt(window.innerWidth,10)||parseInt(document.body.clientWidth,10)}},height:{id:"browser_height",getValue:function(){return parseInt(window.innerHeight,10)||parseInt(document.body.clientHeight,10)}},plugins:{id:"browser_plugins",getValue:function(){var e,t=[];for(e in navigator.plugins)t.push(navigator.plugins[e].name);return t.join(";")}},localStorage:{id:"browser_local_storage_flag",getValue:function(){var e,t="test";try{sessionStorage.setItem(t,t),sessionStorage.removeItem(t),e=!0}catch(t){e=!1}return e}},jsVersion:{id:"browser_javascript_version",getValue:function(){var e=[];return Number.prototype.toFixed&&e.push("1.5"),[].indexOf&&[].forEach&&e.push("1.6"),function(){var t;try{t=[1,3]}catch(e){t=!1}return t}()&&e.push("1.7"),[].reduce&&[].reduceRight&&JSON&&e.push("1.8"),"".trimLeft&&e.push("1.8.1"),e[e.length-1]}},javaFlag:{id:"browser_java_flag",getValue:function(){return navigator.javaEnabled&&navigator.javaEnabled()}},cookies:{id:"browser_cookies_flag",getValue:function(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}},flashVersion:{id:"browser_flash_version",getValue:function(){var e,t,n,i,a=-1;return null!=navigator.plugins&&0<navigator.plugins.length?(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])&&(n=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",t=(i=(e=navigator.plugins["Shockwave Flash"+n].description.split(" "))[2].split("."))[0],n=i[1],"d"===(i=""===(i=e[3])?e[4]:i)[0]?i=i.substring(1):"r"===i[0]&&0<(i=i.substring(1)).indexOf("d")&&(i=i.substring(0,i.indexOf("d"))),a=t+"."+n+"."+i):-1!==navigator.userAgent.toLowerCase().indexOf("webtv/2.6")?a=4:-1!==navigator.userAgent.toLowerCase().indexOf("webtv/2.5")?a=3:-1!==navigator.userAgent.toLowerCase().indexOf("webtv")?a=2:(t=!(-1===navigator.appVersion.indexOf("MSIE")),n=!(-1===navigator.appVersion.toLowerCase().indexOf("win")),i=!(-1===navigator.userAgent.indexOf("Opera")),t&&n&&!i&&(a=function(){var e,t;try{e=(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version")}catch(e){}if(!e)try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e="WIN 6,0,21,0",t.AllowScriptAccess="always",e=t.GetVariable("$version")}catch(e){}if(!e)try{e=(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.3")).GetVariable("$version")}catch(e){}if(!e)try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),e="WIN 3,0,18,0"}catch(e){}if(!e)try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e="WIN 2,0,0,11"}catch(t){e=-1}return e}())),"flash_version:"+a}}}}},159:e=>{e.exports={device:{advertiserId:{id:"device_advertiser_id",getValue:function(){return sessionStorage.getItem("visionDeviceAdvertiserId")}},height:{id:"device_height",getValue:function(){return parseInt(screen.height,10)}},width:{id:"device_width",getValue:function(){return parseInt(screen.width,10)}}}}},485:(e,t,n)=>{var i=n(769);e.exports={event:{instanceId:{id:"event_instance_id",getValue:function(){return Date.now()+"-"+Math.floor(1e13*Math.random())}},logTimestamp:{id:"event_log_timestamp",getValue:function(){return Date.now()}},sessionSequenceNum:{id:"event_session_sequence_num",getValue:function(){var e=i.getLocalValue("event_session_sequence_num")+1;return i.updateSession({event_session_sequence_num:e}),e}}}}},450:(e,t,n)=>{var r=n(698).browser,s=n(159).device,o=n(485).event,c=n(909).page,u=n(542).session,l=n(398).state,d=n(717).user;function i(){try{this.__initialize()}catch(e){}}i.prototype.__initialize=function(){var e,t={},n=[r,s,o,c,u,l,d];for(e in n){var i,a=n[e];for(i in a)t[a[i].id]=a[i]}return this.__variableLogic=t},i.prototype.getVariableLogic=function(){return this.__variableLogic},e.exports=i},909:e=>{e.exports={page:{instanceId:{id:"page_instance_id",getValue:function(){return sessionStorage.getItem("visionPageInstanceId")}},location:{id:"page_location",getValue:function(){return sessionStorage.getItem("visionPageLocation")||""}}}}},542:(e,t,n)=>{var i=n(769),n=["session_id","session_first_page","session_first_url","session_first_referrer_url","session_start_timestamp"].reduce(function(e,t){return e[t.split("_").slice(1,2).join("")+t.split("_").slice(2).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("")]={id:t,getValue:function(){return i.getLocalValue(t)}},e},{});n.language={id:"session_language",getValue:function(){return navigator.language||navigator.browserLanguage}},n.totalTime={id:"session_total_time",getValue:function(e){var t=e.__pageInstance.sessionStartTime,e=i.getLocalValue("session_total_time")||0;return Math.abs(Date.now()-t)<3e5&&(e+=(Date.now()-t)/1e3),e}},e.exports={session:n}},398:(e,t,n)=>{var i=n(212).url;e.exports={state:{stateCmp:{id:"state_cmp",getValue:function(){var e=i("?cmp",document.URL.toLowerCase());return(e=e&&unescape(e))||""}},test:{id:"state_test",getValue:function(){return JSON.parse(sessionStorage.getItem("visionStateTest"))||[]}},orientation:{id:"state_orientation",getValue:function(){return window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait"}}}}},717:(e,t,n)=>{var i=n(769),n=["user_affiliate","user_mvpd_short_name","user_mvpd_name","user_subscriber_type","user_access_method"].reduce(function(e,t){var n=t.split("_").slice(1,2).join("")+t.split("_").slice(2).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),i="vision"+t.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("");return e[n]={id:t,getValue:function(){return sessionStorage.getItem(i)}},e},{});n.guestId={id:"user_guest_id",getValue:function(e){return e.userGuestId||[]}},n.subscriptionId={id:"user_subscription_id",getValue:function(){return JSON.parse(sessionStorage.getItem("visionUserSubscriptionId"))||[]}},n.disneyPlusBundle={id:"user_disney_plus_bundle",getValue:function(){var e=sessionStorage.getItem("visionUserDisneyPlusBundle");return null!==e?"true"===e:null}},n.dssId={id:"user_dss_id",getValue:function(){return JSON.parse(sessionStorage.getItem("visionUserDssId"))||[]}},n.anonymousId={id:"user_anonymous_id",getValue:function(){return i.getLocalValue("user_anonymous_id",!0)}},e.exports={user:n}},317:(e,t,n)=>{function r(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function i(i){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach(function(e){var t,n;t=i,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}function a(){var e=null!==(e=localStorage.getItem("visionConfiguration"))&&JSON.parse(e)||{};localStorage.setItem("visionConfiguration",JSON.stringify(i(i({},e),{},{vpk:"vision"}))),m({vpk:"vision"})}function s(e,t,n){n?(401===t&&m({vpk:"vision"}),p.fetchConfiguration(f,g,s,!1)):_("debug",e,"error")}function o(){p.fetchConfiguration(f,g,s,!0)}var c=n(943).config,u=n(698).browser,l=n(921),d=l.subscribe,_=l.publish,p=n(438),f={},m=function(e){Object.assign(f,e)},g=function(e){var t,n=function(e){return null==e?void 0:e.split(",").map(function(e){return e.trim()}).join(",")},n=i(i({},e.config),{},{disableSdkVersions:n(null===(t=e.config)||void 0===t?void 0:t.disableSdkVersions),disableMediaSdkVersions:n(null===(t=e.config)||void 0===t?void 0:t.disableMediaSdkVersions),disableAppVersions:n(null===(t=e.config)||void 0===t?void 0:t.disableAppVersions),disableMediaAppVersions:n(null===(n=e.config)||void 0===n?void 0:n.disableMediaAppVersions),vpk:e.vpk||f.vpk});localStorage.setItem("visionConfigTimestamp",Date.now()),localStorage.setItem("visionConfiguration",JSON.stringify(n));e=n.flushIntervalSec&&n.flushIntervalSec!==f.flushIntervalSec;m(n),_("debug",JSON.stringify(n)),e&&_("config.flush-interval-update")};e.exports={config:f,resetConfigVpk:a,init:function(){m(i(i({},c),{},{storageEnabled:u.localStorage.getValue()})),d("session.update",a)},setConfig:function(e){if(null==e||!e.url)throw new Error("API endpoint missing");m(e)},fetchRemoteConfig:o,startRemoteConfigSync:function(){var e=localStorage.getItem("visionConfigTimestamp");!e||(Date.now()-e)/1e3>=f.pollConfigIntervalSec?o():(e=JSON.parse(localStorage.getItem("visionConfiguration"))||{},m(e)),setInterval(o,1e3*f.pollConfigIntervalSec)}}},476:(e,t,n)=>{var i=n(921).subscribe,a=n(317).config;e.exports={init:function(){i("debug",function(e,t){t="string"==typeof t&&t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Debug",a.debugMode&&console.log("VISION Log: %s - "+e,t)})}}},900:e=>{function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(n,i,a){function t(e){var t={event_name:e,media_player_type:n.currentType(),media_observed_bitrate:n.playbackRate(),media_content_length:isFinite(n.duration())&&n.duration()||null,media_current_position:n.currentTime(),media_viewing_mode:n.isFullscreen()?"full screen":"browse",media_is_mute:n.muted(),media_ad_id:n.ads&&n.ads.ad&&n.ads.ad.id,media_player_name:n.bcAnalytics&&n.bcAnalytics.settings&&n.bcAnalytics.settings.playerName,media_player_version:n.bcAnalytics&&n.bcAnalytics.settings&&n.bcAnalytics.settings.platformVersion,media_audio_language:n.language()},e=Object.assign({},n.mediainfo,i);a(t,e)}var e,r,s,o,c,u,l,d,_,p,f,m,g,v=!1,h={};n.hasStarted_&&!n.paused()&&(h.started=!0,t("media_start")),e=function(){v=!0,t("media_ad_start")},r=function(){t("media_ad_stop"),v=!1},s=function(){t("media_ad_play")},o=function(){t("media_ad_pause")},c=function(){t("media_ad_skipped"),v=!1},u=function(){v&&(t("media_ad_stop"),v=!1),h.started||(h.started=!0,t("media_start"))},l=function(){h.started&&h.paused&&(h.paused=!1,t("media_play"))},d=function(){n.scrubbing()||n.seeking()||h.seeking||(h.paused=!0,t("media_pause"))},_=function(){t("media_stop"),h.paused=null,h.started=null},p=function(){var e;n&&(e="object"===b(n.ads)&&n.ads.isAdPlaying()?"media_dispose_ad_stop":"media_stop",t(e)),h.started=!1},f=function(){0!==n.bufferedEnd()||h.buffering||(h.buffering=!0,t("media_buffer_start")),h.seeking=!0},m=function(){var e;h.buffering&&(t("media_buffer_end"),h.buffering=!1),e=parseFloat(h.lastUpdatedTime)<parseFloat(n.currentTime())?"media_forward":"media_backward",t(e),h.seeking=!1},g=function(){n.scrubbing()||n.seeking()||h.seeking||(h.lastUpdatedTime=n.currentTime())},n.on("ads-ad-started",e),n.on("ads-ad-ended",r),n.on("ads-play",s),n.on("ads-pause",o),n.on("ads-ad-skipped",c),n.on("playing",u),n.on("play",l),n.on("pause",d),n.on("ended",_),n.on("dispose",p),n.on("seeking",f),n.on("seeked",m),n.on("timeupdate",g)}},921:e=>{function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var r={};e.exports={subscribe:function(e,t){var n;r[e]=Array.isArray(r[e])?[].concat(function(e){if(Array.isArray(e))return a(e)}(n=r[e])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e){if(e){if("string"==typeof e)return a(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,void 0):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]):[t];var i=r[e].length-1;return function(){r[e].splice(i,1)}},publish:function(e){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return null===(t=r[e])||void 0===t?void 0:t.forEach(function(e){return e.apply(void 0,i)})}}},438:(e,t,n)=>{function s(e){return e.privacy||"true"===sessionStorage.getItem("visionStatePrivacy")}function o(t){var n=["a6","a7","a10","d13","u1","u2","u8","u10"],i=["se2"];Object.keys(t.global).forEach(function(e){-1!==n.indexOf(e)&&delete t.global[e]}),null!=t.global.u9&&t.global.u9.forEach(function(e){delete e.id}),t.events.forEach(function(t){t.s4=!0,Object.keys(t).forEach(function(e){-1!==i.indexOf(e)&&delete t[e]})})}function c(e,t,n){var i=d.getLocalValue("session_id"),a=d.getLocalValue("vision_id"),r=t.vpk,r=l(i,r);e.setRequestHeader("Authorization",r),e.setRequestHeader("Vauth",r),e.setRequestHeader("Session-Id",i),e.setRequestHeader("Suite",t.app_suite),e.setRequestHeader("Vision-Id",a),null!=n&&(e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Event-Count",n.events.length.toString())),e.crossOrigin=!0,e.withCredentials=!0}function u(e,t,n){return t.debugMode||"snappy"!==t.compression?JSON.stringify(n):(n=r(JSON.stringify(n)),n=i.compress(n),e.setRequestHeader("Content-Encoding","snappy"),e.processData=!0,new Blob([n],{type:"text/plain"}))}var i=n(624),a=n(758),r=a.str2ab,l=a.hash,d=n(769);e.exports={fetchConfiguration:function(e,t,n,i){var a=XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");a.onreadystatechange=function(){4===this.readyState&&(200===this.status&&t(JSON.parse(this.responseText)),400<=this.status&&this.status<=500&&n(this.statusText,this.status,i))},a.open("GET",e.url+"config/"+e.app_suite,!0),c(a,e),a.contentType="application/json",a.send()},sendEvents:function(e,t,n,i,a){var r;e.events=e.events.filter(function(e){return null==e.event_properties}),0!==e.events.length&&(s(t)&&o(e),(r=XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4===this.readyState&&(200!==this.status&&202!==this.status||n("success"),400<=this.status&&this.status<=500&&i(e,this.statusText,this.status,a))},r.open("POST",t.url+"event",!0),c(r,t,e),r.send(u(r,t,e)))},sendMedia:function(e,t,n,i,a){var r;e.events=e.events.filter(function(e){return null==e.event_properties}),0!==e.events.length&&(s(t)&&o(e),(r=XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4===this.readyState&&(200!==this.status&&202!==this.status||n("success"),400<=this.status&&this.status<=500&&i(e,this.statusText,this.status,a))},r.open("POST",t.url+"media",!0),c(r,t,e),r.setRequestHeader("Event-Type",e.events[0].e2),r.setRequestHeader("Media-Session-Id",e.events[0].m12),r.send(u(r,t,e)))}}},758:e=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={getVideoName:function(e){e=e.split("/");return e[e.length-1].split(".")[0]},hash:function(e,t){for(var n=e.concat(t),i=n.length,a=[7,11],r=[71,173],s=[2277735313,289559509],o=[1291169091,658871167],c=0;c<i;c+=1)a=[(a[0]<<5)-a[0]+n.charCodeAt(c),(a[1]<<3)-a[1]+n.charCodeAt(c)],r=[(r[0]<<4)-r[0]+n.charCodeAt(c),(r[1]<<6)-r[1]+n.charCodeAt(c)],a=[a[0]^s[0],a[1]^s[1]],r=[r[0]^o[0],r[1]^o[1]];return("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)},removeEmpty:function(t){return Object.keys(t).forEach(function(e){return t[e]&&"object"===n(t[e])&&!Array.isArray(t[e])&&i.removeEmpty(t[e])||(""===t[e]||null===t[e]||"null"===t[e]||void 0===t[e]||"undefined"===t[e]||Array.isArray(t[e])&&0===t[e].length)&&delete t[e]}),t},removeEmptyFromArray:function(e){var t=[];return e.forEach(function(e){e=i.removeEmpty(e);t.push(e)}),t},removeFromIdArray:function(e,t,n){for(var i in t)if(t[i]&&t[i].hasOwnProperty("id")&&t[i].id===e)return n<=i?t.splice(i,1):t[i]={},!0;return!1},str2ab:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0,a=e.length;i<a;i++)n[i]=e.charCodeAt(i);return t},mediaSessionUuid:function(){return Date.now()+"-"+Math.floor(1e13*Math.random())},wrapFunction:function(e,t,n){return function(){e.apply(t,n)}},logError:function(e,t){}};e.exports=i},769:(e,t,n)=>{var a=n(921).publish,i={};e.exports={store:i,init:function(){i.visionSession=this.getSession(),i.visionAnonId=this.getAnonId(),this.extendSession()},saveData:function(e,t){i[e]=t;try{localStorage.setItem(e,JSON.stringify(t))}catch(e){a("debug",e,"error")}},getLocalValue:function(e,t){return(t?i.visionAnonId:i.visionSession)[e]},createNewSession:function(){var e=Date.now(),e={session_start_timestamp:Date.now(),session_total_time:0,session_id:e+"-"+Math.floor(1e13*Math.random()),vision_id:e+"-"+Math.floor(1e13*Math.random()),active:e+18e5,expires:e+432e5,event_session_sequence_num:0};return this.saveData("visionSession",e),a("session.update"),e},extendSession:function(){var e=this.getSession(),t=Date.now();0<t-e.expires||0<t-e.active?this.createNewSession():((e=e).active=t+18e5,this.saveData("visionSession",e))},getSession:function(e){var t={};try{var n=localStorage.getItem("visionSession");(t=JSON.parse(n))||(t=this.createNewSession())}catch(e){a("debug",e,"error")}return e?t[e]:t},updateSession:function(n){var i=this.getSession(),e=Object.keys(n).reduce(function(e,t){return e[t]="function"==typeof n[t]?n[t](i[t]):n[t],e},{}),e=Object.assign({},i,e);this.saveData("visionSession",e)},createNewAnonId:function(){var e=Date.now(),e={user_anonymous_id:e+"-"+Math.floor(1e13*Math.random()),expires:e+33927469800};return this.saveData("visionAnonId",e),e},getAnonId:function(e){var t={},n=Date.now();try{var i=localStorage.getItem("visionAnonId"),t=!!i&&JSON.parse(i)||this.createNewAnonId()}catch(e){a("debug",e,"error")}return 0<n-t.expires&&(t=this.createNewAnonId()),e?t[e]:t},getFromState:function(e,t){var n;return n=e.storageEnabled?sessionStorage.getItem("vision"+t):n},saveToState:function(e,t,n){e.storageEnabled&&null!=n&&sessionStorage.setItem("vision"+t,Array.isArray(n)?JSON.stringify(n):n)},deleteFromState:function(e,t){e.storageEnabled&&sessionStorage.removeItem("vision"+t)},setOnloadState:function(t){Object.keys(t).forEach(function(e){null!=t[e]&&sessionStorage.setItem("vision"+e,Array.isArray(t[e])?JSON.stringify(t[e]):t[e])})}}},212:e=>{function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}e.exports={url:function(e,t){var n,i,a,r,s,o=t||window.location.toString();if(!e)return o;if(e=e.toString(),"//"===o.substring(0,2)?o="http:"+o:1===o.split("://").length&&(o="http://"+o),n={auth:""},i=1===(i=(t=o.split("/"))[2].split("@")).length?i[0].split(":"):(n.auth=i[0],i[1].split(":")),n.protocol=t[0],n.hostname=i[0],n.port=i[1]||"80",n.pathname=(3<t.length?"/":"")+t.slice(3,t.length).join("/").split("?")[0].split("#")[0],"/"===(a=n.pathname).charAt(a.length-1)&&(a=a.substring(0,a.length-1)),t=(i=n.hostname).split("."),a=a.split("/"),"hostname"===e)return i;if("domain"===e)return t.slice(-2).join(".");if("sub"===e)return t.slice(0,t.length-2).join(".");if("port"===e)return n.port||"80";if("protocol"===e)return n.protocol.split(":")[0];if("auth"===e)return n.auth;if("user"===e)return n.auth.split(":")[0];if("pass"===e)return n.auth.split(":")[1]||"";if("path"===e)return n.pathname;if("."===e.charAt(0)){if(l(e=e.substring(1)))return t[(e=parseInt(e,10))<0?t.length+e:e-1]||""}else{if(l(e))return a[(e=parseInt(e,10))<0?a.length+e:e]||"";if("file"===e)return a.slice(-1)[0];if("filename"===e)return a.slice(-1)[0].split(".")[0];if("fileext"===e)return a.slice(-1)[0].split(".")[1]||"";if("?"===e.charAt(0)||"#"===e.charAt(0)){if(r=o,"?"===e.charAt(0)?r=(r.split("?")[1]||"").split("#")[0]:"#"===e.charAt(0)&&(r=r.split("#")[1]||""),!e.charAt(1))return r;e=e.substring(1);for(var c=0,u=(r=r.split("&")).length;c<u;c++)if((s=r[c].split("="))[0]===e)return s[1];return null}}return""}}},322:(e,t,n)=>{var i=n(900),a=n(94),r=n(317),s=r.config,o=function(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};for(var n,i={},a=Object.keys(e),r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}(r,["config"]),c=n(921).publish,u=n(438),l=n(769),d=n(596),r=n(758),_=r.removeEmpty,p=r.removeEmptyFromArray,f=r.wrapFunction,m=n(557),n={trackMedia:function(e,t){this.__variableLogic?this.__trackMedia(e,t):this.__queuefn.push(f(this.__trackMedia,this,[e,t]))},__trackMedia:function(e,t){var n,i,a=this,r=m.getInstance().__getCollectionStatus();r.isEnabled&&r.isMediaEnabled&&(n=e,r=(r=t.originalPublishDate||t.originalAirDate)&&new Date(r),this.autoplaySound="autostart"===t.startType&&"media_start"===e.event_name&&(e.media_is_mute?"Autoplay Sound Off":"Autoplay Sound On")||this.autoplaySound,n.media_autoplay_sound=this.autoplaySound,n.media_air_date=r?r.toLocaleDateString():void 0,n.media_air_time=r?r.toLocaleTimeString():void 0,n.media_id=t.id,n.media_name=t.headline||t.name,n.media_video_type=t.status||"vod",n.media_live=t.live,n.media_channel=t.publisher,n.media_airing_id=t.simulcastAiringId||t.airingId,n.media_program_code=t.program,n.media_segment=t.segment,n.media_sport=t.sportName,n.media_league=t.leagueName,n.media_start_type=t.startType,n.media_network_name=t.publisher,n.media_video_type_detail=t.custom_fields&&t.custom_fields.mediaType,n.media_show_code=t.showcode,n.media_live_scoring=null==t.liveScoring?t.liveScoring:t.liveScoring?"Live Scoring On":"Live Scoring Off",n.media_id_source=t.webHref,n.media_ad_id_source=t.adIdSource,n.media_playlist_id=t.playlistId,n.media_play_location=t.playLocation,n.media_gam_event_key_part=t.gamEventKeyPart,n.media_gam_line_item_id=t.gamLineItemId&&parseInt(t.gamLineItemId,10),n.media_gam_impression_id=t.gamImpressionId,n.media_gam_time_usec2=t.gamTimeUsec2&&parseInt(t.gamTimeUsec2,10),n.media_binge_play_count=parseInt(t.playlistCount,10)||void 0,0<=(r=this.__mediaInstances.findIndex(function(e){return e.mediaId===t.id}))?(i=this.__mediaInstances[r].instance,this.__pageInstance.latestMediaEvent=JSON.stringify(n),"media_pause"===e.event_name&&Math.abs(n.media_content_length-n.media_current_position)<1&&setTimeout(function(){var e=JSON.parse(a.__pageInstance.latestMediaEvent);"media_pause"===e.event_name&&(e.event_name="media_stop",i.createEvent(e))},2e3),i.createEvent(n),"media_stop"===e.event_name&&this.__mediaInstances.splice(r,1)):"media_start"!==e.event_name&&"media_ad_start"!==e.event_name||(e=new d(s,this.__mediaCallback.bind(this)),this.__mediaInstances.push({mediaId:t.id,instance:e}),e.createEvent(n)))},__mediaCallback:function(e){l.extendSession(),this.__pageInstance.lastUserActive=Date.now();var t=a.createEventProps(s,this.__variableLogic,[e],this),e=a.buildGlobalJson(s,this.__variableLogic,this),t=p(t);(e=_(e)).events=t,u.sendMedia(e,s,this.__trackMediaCallback.bind(this),this.__trackMediaErrorCallback.bind(this),!0)},__trackMediaCallback:function(){},__trackMediaErrorCallback:function(e,t,n,i){i?(401===n&&(o.resetConfigVpk(),o.fetchRemoteConfig()),u.sendMedia(e,s,this.__trackMediaCallback.bind(this),this.__trackMediaErrorCallback.bind(this),!1)):c("debug",t,"error")}};Object.assign(m.prototype,n),m.videojsPlugin=i,e.exports=m},557:(e,t,n)=>{function l(e){var t=d.getInstance(),t=_.buildGlobalJson(p,t.__variableLogic,t);return e=a(e),(t=i(t)).events=e,t}var d=n(108),_=n(94),p=n(317).config,f=n(921).publish,m=n(438),g=n(769),n=n(758),i=n.removeEmpty,a=n.removeEmptyFromArray,r=n.wrapFunction,v=n.logError,n={track:function(e){var t=d.getInstance();t.__variableLogic?t.__trackQueue(e):t.__queuefn.push(r(t.__trackQueue,t,[e]))},__trackQueue:function(e){var t=d.getInstance();if(!(t.__getCollectionStatus().isEnabled&&e instanceof Object))return!1;for(var n,i,a,r=Array.isArray(e)?e:[e],s=[],o=0;o<r.length;o++)r[o].hasOwnProperty("event_name")?(a=r[o].event_name,n=new Date(r[o].pzncon_originally_published),i=new Date(r[o].pzncon_last_modified),r[o].pzncon_originally_published=n instanceof Date&&!isNaN(n)?n.getTime():void 0,r[o].pzncon_last_modified=i instanceof Date&&!isNaN(i)?i.getTime():void 0,-1===["page_close","page_heartbeat"].indexOf(a)&&(g.extendSession(),t.__pageInstance.lastUserActive=Date.now()),"pzncon"!==a&&(a=r.splice(o,1),s.push(a[0]))):(r.splice(o,1),f("debug","Missing property event_name. Event not sent","error"));if(0<s.length&&(s=_.createEventProps(p,t.__variableLogic,s,t),c=l(s),m.sendEvents(c,p,t.__trackCallback.bind(t),t.__trackErrorCallback.bind(t),!0)),0===r.length)return!0;var c=_.createEventProps(p,t.__variableLogic,r,t),c=(JSON.parse(localStorage.getItem("visionEvents"))||[]).concat(c);if(localStorage.setItem("visionEvents",JSON.stringify(c)),c.length>=p.flushAtEventCount)try{var u=l(c);localStorage.removeItem("visionEvents"),m.sendEvents(u,p,t.__trackCallback.bind(t),t.__trackErrorCallback.bind(t),!0)}catch(e){v("Error in initial track request",e.stack)}return!0}};Object.assign(d.prototype,n),e.exports=d,e.exports.visionMain=n}},a={},function e(t){if(a[t])return a[t].exports;var n=a[t]={exports:{}};return i[t](n,n.exports,e),n.exports}(322);var i,a});
