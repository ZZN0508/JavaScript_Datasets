!function(i){var r={};function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=i,s.c=r,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"_",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t._)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(e){var t=e&&e._?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=171)}([function(e,t,i){"use strict";var r,s=i(59),o=s.Reader,n=s.Writer,a=s.util,l=s.roots.default||(s.roots.default={});function d(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function c(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function h(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function p(e){if(this.platformCappedLineItemIdList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function g(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function m(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function f(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function y(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function b(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function v(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function P(e){if(this.prebids=[],this.bids=[],this.postBids=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function S(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function I(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function T(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function k(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function A(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function O(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function C(e){if(this.bids=[],this.noBids=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function w(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function x(e){if(this.billingNoticeUrlList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function E(e){if(this.lineItemResponses=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function L(e){if(this.ignoredFloorPriceFactorIndexes=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function R(e){if(this.lineItems={},this.customMacros={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function M(e){if(this.keywordList=[],this.trackList=[],this.renditionList=[],this.customFields=[],this.videoIndexes=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function B(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function j(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function D(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function _(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function F(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function N(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function U(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function V(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function q(e){if(this.filters=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function H(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function W(e){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function G(e){if(this.adBreakTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function $(e){if(this.adSlotPositions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function z(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function J(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Q(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Y(e){if(this.cookieList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function X(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function K(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Z(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function ee(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function te(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function ie(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function re(e){if(this.domains=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function se(e){if(this.types=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}l.ProtoAdBreak=(se.prototype.types=a.emptyArray,se.prototype.maxAdPodDuration=0,se.prototype.maxAdSlotDuration=180,se.prototype.numberOfAdSlots=1,se.encode=function(e,t){if(t=t||n.create(),null!=e.types&&e.types.length){t.uint32(10).fork();for(var i=0;i<e.types.length;++i)t.int32(e.types[i]);t.ldelim()}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&t.uint32(16).int32(e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&t.uint32(24).int32(e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&t.uint32(32).int32(e.numberOfAdSlots),t},se.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoAdBreak;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:if(r.types&&r.types.length||(r.types=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.types.push(e.int32());else r.types.push(e.int32());break;case 2:r.maxAdPodDuration=e.int32();break;case 3:r.maxAdSlotDuration=e.int32();break;case 4:r.numberOfAdSlots=e.int32();break;default:e.skipType(7&s)}}return r},se.fromObject=function(e){if(e instanceof l.ProtoAdBreak)return e;var t=new l.ProtoAdBreak;if(e.types){if(!Array.isArray(e.types))throw TypeError(".ProtoAdBreak.types: array expected");t.types=[];for(var i=0;i<e.types.length;++i)switch(e.types[i]){default:case"None":case 0:t.types[i]=0;break;case"PreRoll":case 1:t.types[i]=1;break;case"MidRoll":case 2:t.types[i]=2;break;case"PostRoll":case 3:t.types[i]=3}}return null!=e.maxAdPodDuration&&(t.maxAdPodDuration=0|e.maxAdPodDuration),null!=e.maxAdSlotDuration&&(t.maxAdSlotDuration=0|e.maxAdSlotDuration),null!=e.numberOfAdSlots&&(t.numberOfAdSlots=0|e.numberOfAdSlots),t},se.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.types=[]),t.defaults&&(i.maxAdPodDuration=0,i.maxAdSlotDuration=180,i.numberOfAdSlots=1),e.types&&e.types.length){i.types=[];for(var r=0;r<e.types.length;++r)i.types[r]=t.enums===String?l.ProtoAdBreakTypeEnum[e.types[r]]:e.types[r]}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&(i.maxAdPodDuration=e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&(i.maxAdSlotDuration=e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&(i.numberOfAdSlots=e.numberOfAdSlots),i},se.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},se),l.ProtoPlayerPlaybackModeEnum=(r={},(i=Object.create(r))[r[0]="Autoplay"]=0,i[r[1]="ScrollToPlay"]=1,i[r[2]="ClickToPlay"]=2,i),l.ProtoPlayerCloseButtonMode=(r={},(i=Object.create(r))[r[0]="Off"]=0,i[r[1]="OnHover"]=1,i[r[2]="OnHoverAfterFirstAd"]=2,i[r[3]="AlwaysOn"]=3,i),l.ProtoPlayerFloatingMode=(r={},(i=Object.create(r))[r[0]="Off"]=0,i[r[1]="OnPageLoad"]=1,i[r[2]="AfterInView"]=2,i[r[3]="Always"]=3,i),l.ProtoPlayerSoundMode=(r={},(i=Object.create(r))[r[0]="Mute"]=0,i[r[1]="On"]=1,i[r[2]="Hover"]=2,i),l.ProtoPlayerInsertMode=(r={},(i=Object.create(r))[r[0]="WithinContainer"]=0,i[r[1]="BeforeContainer"]=1,i[r[2]="AfterContainer"]=2,i[r[3]="ReplaceContainer"]=3,i[r[4]="HideContainer"]=4,i),l.ProtoAdViewabilityPolicy=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Strict"]=1,i),l.ProtoSharingDestination=(r={},(i=Object.create(r))[r[0]="Facebook"]=0,i[r[1]="Twitter"]=1,i[r[2]="LinkedIn"]=2,i),l.ProtoFloatingFixedPositionMode=(r={},(i=Object.create(r))[r[0]="Page"]=0,i[r[1]="Element"]=1,i),l.ProtoPositionMode=(r={},(i=Object.create(r))[r[0]="BottomRight"]=0,i[r[1]="BottomLeft"]=1,i[r[2]="TopRight"]=2,i[r[3]="TopLeft"]=3,i),l.ProtoAdPlaybackMode=(r={},(i=Object.create(r))[r[0]="Autoplay"]=0,i[r[1]="ScrollToPlay"]=1,i),l.ProtoFloatingAppendLocationEnum=(r={},(i=Object.create(r))[r[0]="Above"]=0,i[r[1]="Below"]=1,i[r[2]="Within"]=2,i),l.ProtoPlayerAdSkippability=(r={},(i=Object.create(r))[r[0]="IfLongerThan31Sec"]=0,i[r[1]="Always"]=1,i[r[2]="NoRestrictions"]=2,i),l.ProtoVideoQuality=(r={},(i=Object.create(r))[r[0]="Auto"]=0,i[r[1]="High1080p"]=1,i[r[2]="High720p"]=2,i[r[3]="Medium360p"]=3,i),l.ProtoImplementationType=(r={},(i=Object.create(r))[r[0]="Web"]=0,i[r[1]="Amp"]=1,i),l.ProtoAdBreakTypeEnum=(r={},(i=Object.create(r))[r[0]="None"]=0,i[r[1]="PreRoll"]=1,i[r[2]="MidRoll"]=2,i[r[3]="PostRoll"]=3,i),l.ProtoAdSlotAdTypeEnum=(r={},(i=Object.create(r))[r[0]="SingleAd"]=0,i[r[1]="AdPod"]=1,i),l.ProtoAdDomainBlockingResponse=(re.prototype.domains=a.emptyArray,re.encode=function(e,t){if(t=t||n.create(),null!=e.domains&&e.domains.length)for(var i=0;i<e.domains.length;++i)t.uint32(10).string(e.domains[i]);return t},re.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoAdDomainBlockingResponse;e.pos<i;){var s=e.uint32();s>>>3==1?(r.domains&&r.domains.length||(r.domains=[]),r.domains.push(e.string())):e.skipType(7&s)}return r},re.fromObject=function(e){if(e instanceof l.ProtoAdDomainBlockingResponse)return e;var t=new l.ProtoAdDomainBlockingResponse;if(e.domains){if(!Array.isArray(e.domains))throw TypeError(".ProtoAdDomainBlockingResponse.domains: array expected");t.domains=[];for(var i=0;i<e.domains.length;++i)t.domains[i]=String(e.domains[i])}return t},re.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.domains=[]),e.domains&&e.domains.length){i.domains=[];for(var r=0;r<e.domains.length;++r)i.domains[r]=e.domains[r]}return i},re.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},re),l.ProtoCoreTamBidRequest=(ie.prototype.lineItemId="",ie.prototype.code="",ie.prototype.metadata=null,ie.prototype.exploration=!1,ie.encode=function(e,t){return t=t||n.create(),null!=e.lineItemId&&e.hasOwnProperty("lineItemId")&&t.uint32(10).string(e.lineItemId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(18).string(e.code),null!=e.metadata&&e.hasOwnProperty("metadata")&&l.MetadataModel.encode(e.metadata,t.uint32(26).fork()).ldelim(),null!=e.exploration&&e.hasOwnProperty("exploration")&&t.uint32(32).bool(e.exploration),t},ie.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoCoreTamBidRequest;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.lineItemId=e.string();break;case 2:r.code=e.string();break;case 3:r.metadata=l.MetadataModel.decode(e,e.uint32());break;case 4:r.exploration=e.bool();break;default:e.skipType(7&s)}}return r},ie.fromObject=function(e){if(e instanceof l.ProtoCoreTamBidRequest)return e;var t=new l.ProtoCoreTamBidRequest;if(null!=e.lineItemId&&(t.lineItemId=String(e.lineItemId)),null!=e.code&&(t.code=String(e.code)),null!=e.metadata){if("object"!=typeof e.metadata)throw TypeError(".ProtoCoreTamBidRequest.metadata: object expected");t.metadata=l.MetadataModel.fromObject(e.metadata)}return null!=e.exploration&&(t.exploration=Boolean(e.exploration)),t},ie.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.lineItemId="",i.code="",i.metadata=null,i.exploration=!1),null!=e.lineItemId&&e.hasOwnProperty("lineItemId")&&(i.lineItemId=e.lineItemId),null!=e.code&&e.hasOwnProperty("code")&&(i.code=e.code),null!=e.metadata&&e.hasOwnProperty("metadata")&&(i.metadata=l.MetadataModel.toObject(e.metadata,t)),null!=e.exploration&&e.hasOwnProperty("exploration")&&(i.exploration=e.exploration),i},ie.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},ie),l.MetadataModel=(te.prototype.version=0,te.prototype.sessionId="",te.prototype.playerId="",te.prototype.userId="",te.prototype.browser=null,te.prototype.geo=null,te.prototype.clientAb0=0,te.prototype.clientAb1=0,te.prototype.serverAb0=0,te.prototype.serverAb1=0,te.prototype.pageUrl="",te.prototype.bundleId="",te.prototype.implementationType=0,te.prototype.trackAllRequests=!1,te.prototype.customParam1="",te.prototype.customParam2="",te.prototype.customParam3="",te.prototype.abTestId="",te.prototype.pageInFocus=!1,te.prototype.customParam4="",te.prototype.customParam5="",te.encode=function(e,t){return t=t||n.create(),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(8).int32(e.version),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(18).string(e.sessionId),null!=e.playerId&&e.hasOwnProperty("playerId")&&t.uint32(26).string(e.playerId),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(34).string(e.userId),null!=e.browser&&e.hasOwnProperty("browser")&&l.Browser.encode(e.browser,t.uint32(42).fork()).ldelim(),null!=e.geo&&e.hasOwnProperty("geo")&&l.GeoLocation.encode(e.geo,t.uint32(50).fork()).ldelim(),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&t.uint32(56).int32(e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&t.uint32(64).int32(e.clientAb1),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&t.uint32(72).int32(e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&t.uint32(80).int32(e.serverAb1),null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(122).string(e.pageUrl),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&t.uint32(138).string(e.bundleId),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&t.uint32(144).int32(e.implementationType),null!=e.trackAllRequests&&e.hasOwnProperty("trackAllRequests")&&t.uint32(152).bool(e.trackAllRequests),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&t.uint32(162).string(e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&t.uint32(170).string(e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&t.uint32(178).string(e.customParam3),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&t.uint32(194).string(e.abTestId),null!=e.pageInFocus&&e.hasOwnProperty("pageInFocus")&&t.uint32(200).bool(e.pageInFocus),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&t.uint32(210).string(e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&t.uint32(218).string(e.customParam5),t},te.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.MetadataModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.version=e.int32();break;case 2:r.sessionId=e.string();break;case 3:r.playerId=e.string();break;case 4:r.userId=e.string();break;case 5:r.browser=l.Browser.decode(e,e.uint32());break;case 6:r.geo=l.GeoLocation.decode(e,e.uint32());break;case 7:r.clientAb0=e.int32();break;case 8:r.clientAb1=e.int32();break;case 9:r.serverAb0=e.int32();break;case 10:r.serverAb1=e.int32();break;case 15:r.pageUrl=e.string();break;case 17:r.bundleId=e.string();break;case 18:r.implementationType=e.int32();break;case 19:r.trackAllRequests=e.bool();break;case 20:r.customParam1=e.string();break;case 21:r.customParam2=e.string();break;case 22:r.customParam3=e.string();break;case 24:r.abTestId=e.string();break;case 25:r.pageInFocus=e.bool();break;case 26:r.customParam4=e.string();break;case 27:r.customParam5=e.string();break;default:e.skipType(7&s)}}return r},te.fromObject=function(e){if(e instanceof l.MetadataModel)return e;var t=new l.MetadataModel;if(null!=e.version&&(t.version=0|e.version),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.browser){if("object"!=typeof e.browser)throw TypeError(".MetadataModel.browser: object expected");t.browser=l.Browser.fromObject(e.browser)}if(null!=e.geo){if("object"!=typeof e.geo)throw TypeError(".MetadataModel.geo: object expected");t.geo=l.GeoLocation.fromObject(e.geo)}switch(null!=e.clientAb0&&(t.clientAb0=0|e.clientAb0),null!=e.clientAb1&&(t.clientAb1=0|e.clientAb1),null!=e.serverAb0&&(t.serverAb0=0|e.serverAb0),null!=e.serverAb1&&(t.serverAb1=0|e.serverAb1),null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.bundleId&&(t.bundleId=String(e.bundleId)),e.implementationType){case"Web":case 0:t.implementationType=0;break;case"Amp":case 1:t.implementationType=1}return null!=e.trackAllRequests&&(t.trackAllRequests=Boolean(e.trackAllRequests)),null!=e.customParam1&&(t.customParam1=String(e.customParam1)),null!=e.customParam2&&(t.customParam2=String(e.customParam2)),null!=e.customParam3&&(t.customParam3=String(e.customParam3)),null!=e.abTestId&&(t.abTestId=String(e.abTestId)),null!=e.pageInFocus&&(t.pageInFocus=Boolean(e.pageInFocus)),null!=e.customParam4&&(t.customParam4=String(e.customParam4)),null!=e.customParam5&&(t.customParam5=String(e.customParam5)),t},te.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.version=0,i.sessionId="",i.playerId="",i.userId="",i.browser=null,i.geo=null,i.clientAb0=0,i.clientAb1=0,i.serverAb0=0,i.serverAb1=0,i.pageUrl="",i.bundleId="",i.implementationType=t.enums===String?"Web":0,i.trackAllRequests=!1,i.customParam1="",i.customParam2="",i.customParam3="",i.abTestId="",i.pageInFocus=!1,i.customParam4="",i.customParam5=""),null!=e.version&&e.hasOwnProperty("version")&&(i.version=e.version),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(i.sessionId=e.sessionId),null!=e.playerId&&e.hasOwnProperty("playerId")&&(i.playerId=e.playerId),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.browser&&e.hasOwnProperty("browser")&&(i.browser=l.Browser.toObject(e.browser,t)),null!=e.geo&&e.hasOwnProperty("geo")&&(i.geo=l.GeoLocation.toObject(e.geo,t)),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&(i.clientAb0=e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&(i.clientAb1=e.clientAb1),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&(i.serverAb0=e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&(i.serverAb1=e.serverAb1),null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&(i.pageUrl=e.pageUrl),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&(i.bundleId=e.bundleId),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&(i.implementationType=t.enums===String?l.ProtoImplementationType[e.implementationType]:e.implementationType),null!=e.trackAllRequests&&e.hasOwnProperty("trackAllRequests")&&(i.trackAllRequests=e.trackAllRequests),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&(i.customParam1=e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&(i.customParam2=e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&(i.customParam3=e.customParam3),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&(i.abTestId=e.abTestId),null!=e.pageInFocus&&e.hasOwnProperty("pageInFocus")&&(i.pageInFocus=e.pageInFocus),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&(i.customParam4=e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&(i.customParam5=e.customParam5),i},te.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},te),l.ProtoDeviceType=(r={},(i=Object.create(r))[r[0]="Desktop"]=0,i[r[1]="Smartphone"]=1,i[r[2]="Tablet"]=2,i[r[3]="GameConsole"]=3,i[r[4]="SmartTV"]=4,i[r[5]="WearableComputer"]=5,i[r[6]="PDA"]=6,i[r[7]="Unrecognized"]=7,i),l.Browser=(ee.prototype.browserVersion="",ee.prototype.browserType="",ee.prototype.osCode="",ee.prototype.device=0,ee.encode=function(e,t){return t=t||n.create(),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(10).string(e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&t.uint32(18).string(e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&t.uint32(26).string(e.osCode),null!=e.device&&e.hasOwnProperty("device")&&t.uint32(32).int32(e.device),t},ee.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.Browser;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.browserVersion=e.string();break;case 2:r.browserType=e.string();break;case 3:r.osCode=e.string();break;case 4:r.device=e.int32();break;default:e.skipType(7&s)}}return r},ee.fromObject=function(e){if(e instanceof l.Browser)return e;var t=new l.Browser;switch(null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.browserType&&(t.browserType=String(e.browserType)),null!=e.osCode&&(t.osCode=String(e.osCode)),e.device){case"Desktop":case 0:t.device=0;break;case"Smartphone":case 1:t.device=1;break;case"Tablet":case 2:t.device=2;break;case"GameConsole":case 3:t.device=3;break;case"SmartTV":case 4:t.device=4;break;case"WearableComputer":case 5:t.device=5;break;case"PDA":case 6:t.device=6;break;case"Unrecognized":case 7:t.device=7}return t},ee.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.browserVersion="",i.browserType="",i.osCode="",i.device=t.enums===String?"Desktop":0),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&(i.browserType=e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&(i.osCode=e.osCode),null!=e.device&&e.hasOwnProperty("device")&&(i.device=t.enums===String?l.ProtoDeviceType[e.device]:e.device),i},ee.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},ee),l.GeoLocation=(Z.prototype.countryGeoId=0,Z.prototype.cityId=0,Z.prototype.subdivisionId=0,Z.prototype.dmaId=0,Z.prototype.ip="",Z.prototype.lat=0,Z.prototype.lon=0,Z.encode=function(e,t){return t=t||n.create(),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&t.uint32(8).int32(e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&t.uint32(16).int32(e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&t.uint32(24).int32(e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&t.uint32(32).int32(e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(42).string(e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&t.uint32(49).double(e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&t.uint32(57).double(e.lon),t},Z.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.GeoLocation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.countryGeoId=e.int32();break;case 2:r.cityId=e.int32();break;case 3:r.subdivisionId=e.int32();break;case 4:r.dmaId=e.int32();break;case 5:r.ip=e.string();break;case 6:r.lat=e.double();break;case 7:r.lon=e.double();break;default:e.skipType(7&s)}}return r},Z.fromObject=function(e){if(e instanceof l.GeoLocation)return e;var t=new l.GeoLocation;return null!=e.countryGeoId&&(t.countryGeoId=0|e.countryGeoId),null!=e.cityId&&(t.cityId=0|e.cityId),null!=e.subdivisionId&&(t.subdivisionId=0|e.subdivisionId),null!=e.dmaId&&(t.dmaId=0|e.dmaId),null!=e.ip&&(t.ip=String(e.ip)),null!=e.lat&&(t.lat=Number(e.lat)),null!=e.lon&&(t.lon=Number(e.lon)),t},Z.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.countryGeoId=0,i.cityId=0,i.subdivisionId=0,i.dmaId=0,i.ip="",i.lat=0,i.lon=0),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&(i.countryGeoId=e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&(i.cityId=e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&(i.subdivisionId=e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&(i.dmaId=e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&(i.lat=t.json&&!isFinite(e.lat)?String(e.lat):e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&(i.lon=t.json&&!isFinite(e.lon)?String(e.lon):e.lon),i},Z.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},Z),l.ProtoCoreTamBidResponse=(K.prototype.errorMessage="",K.prototype.encryptedBidPrice="",K.prototype.ofskp=0,K.prototype.impressionTimeSpent=0,K.prototype.bidRate=0,K.prototype.successRate=0,K.encode=function(e,t){return t=t||n.create(),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&t.uint32(10).string(e.errorMessage),null!=e.encryptedBidPrice&&e.hasOwnProperty("encryptedBidPrice")&&t.uint32(82).string(e.encryptedBidPrice),null!=e.ofskp&&e.hasOwnProperty("ofskp")&&t.uint32(97).double(e.ofskp),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&t.uint32(104).int32(e.impressionTimeSpent),null!=e.bidRate&&e.hasOwnProperty("bidRate")&&t.uint32(113).double(e.bidRate),null!=e.successRate&&e.hasOwnProperty("successRate")&&t.uint32(121).double(e.successRate),t},K.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoCoreTamBidResponse;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.errorMessage=e.string();break;case 10:r.encryptedBidPrice=e.string();break;case 12:r.ofskp=e.double();break;case 13:r.impressionTimeSpent=e.int32();break;case 14:r.bidRate=e.double();break;case 15:r.successRate=e.double();break;default:e.skipType(7&s)}}return r},K.fromObject=function(e){if(e instanceof l.ProtoCoreTamBidResponse)return e;var t=new l.ProtoCoreTamBidResponse;return null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),null!=e.encryptedBidPrice&&(t.encryptedBidPrice=String(e.encryptedBidPrice)),null!=e.ofskp&&(t.ofskp=Number(e.ofskp)),null!=e.impressionTimeSpent&&(t.impressionTimeSpent=0|e.impressionTimeSpent),null!=e.bidRate&&(t.bidRate=Number(e.bidRate)),null!=e.successRate&&(t.successRate=Number(e.successRate)),t},K.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.errorMessage="",i.encryptedBidPrice="",i.ofskp=0,i.impressionTimeSpent=0,i.bidRate=0,i.successRate=0),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(i.errorMessage=e.errorMessage),null!=e.encryptedBidPrice&&e.hasOwnProperty("encryptedBidPrice")&&(i.encryptedBidPrice=e.encryptedBidPrice),null!=e.ofskp&&e.hasOwnProperty("ofskp")&&(i.ofskp=t.json&&!isFinite(e.ofskp)?String(e.ofskp):e.ofskp),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),i},K.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},K),l.ProtoCookieSettings=(X.prototype.name="",X.prototype.value="",X.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,X.encode=function(e,t){return t=t||n.create(),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).string(e.value),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(24).int64(e.timestamp),t},X.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoCookieSettings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.name=e.string();break;case 2:r.value=e.string();break;case 3:r.timestamp=e.int64();break;default:e.skipType(7&s)}}return r},X.fromObject=function(e){if(e instanceof l.ProtoCookieSettings)return e;var t=new l.ProtoCookieSettings;return null!=e.name&&(t.name=String(e.name)),null!=e.value&&(t.value=String(e.value)),null!=e.timestamp&&(a.Long?(t.timestamp=a.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},X.toObject=function(e,t){var i,r={};return(t=t||{}).defaults&&(r.name="",r.value="",a.Long?(i=new a.Long(0,0,!1),r.timestamp=t.longs===String?i.toString():t.longs===Number?i.toNumber():i):r.timestamp=t.longs===String?"0":0),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?a.Long.prototype.toString.call(e.timestamp):t.longs===Number?new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),r},X.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},X),l.ProtoCookieSecureModeEnum=(r={},(i=Object.create(r))[r[0]="Secure"]=0,i[r[1]="Unsecure"]=1,i[r[2]="Auto"]=2,i),l.ProtoCookieSyncRequest=(Y.prototype.cookieList=a.emptyArray,Y.prototype.secureMode=0,Y.prototype.browserInfo=null,Y.encode=function(e,t){if(t=t||n.create(),null!=e.cookieList&&e.cookieList.length)for(var i=0;i<e.cookieList.length;++i)l.ProtoCookieSettings.encode(e.cookieList[i],t.uint32(10).fork()).ldelim();return null!=e.secureMode&&e.hasOwnProperty("secureMode")&&t.uint32(16).int32(e.secureMode),null!=e.browserInfo&&e.hasOwnProperty("browserInfo")&&l.Browser.encode(e.browserInfo,t.uint32(26).fork()).ldelim(),t},Y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoCookieSyncRequest;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.cookieList&&r.cookieList.length||(r.cookieList=[]),r.cookieList.push(l.ProtoCookieSettings.decode(e,e.uint32()));break;case 2:r.secureMode=e.int32();break;case 3:r.browserInfo=l.Browser.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},Y.fromObject=function(e){if(e instanceof l.ProtoCookieSyncRequest)return e;var t=new l.ProtoCookieSyncRequest;if(e.cookieList){if(!Array.isArray(e.cookieList))throw TypeError(".ProtoCookieSyncRequest.cookieList: array expected");t.cookieList=[];for(var i=0;i<e.cookieList.length;++i){if("object"!=typeof e.cookieList[i])throw TypeError(".ProtoCookieSyncRequest.cookieList: object expected");t.cookieList[i]=l.ProtoCookieSettings.fromObject(e.cookieList[i])}}switch(e.secureMode){case"Secure":case 0:t.secureMode=0;break;case"Unsecure":case 1:t.secureMode=1;break;case"Auto":case 2:t.secureMode=2}if(null!=e.browserInfo){if("object"!=typeof e.browserInfo)throw TypeError(".ProtoCookieSyncRequest.browserInfo: object expected");t.browserInfo=l.Browser.fromObject(e.browserInfo)}return t},Y.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.cookieList=[]),t.defaults&&(i.secureMode=t.enums===String?"Secure":0,i.browserInfo=null),e.cookieList&&e.cookieList.length){i.cookieList=[];for(var r=0;r<e.cookieList.length;++r)i.cookieList[r]=l.ProtoCookieSettings.toObject(e.cookieList[r],t)}return null!=e.secureMode&&e.hasOwnProperty("secureMode")&&(i.secureMode=t.enums===String?l.ProtoCookieSecureModeEnum[e.secureMode]:e.secureMode),null!=e.browserInfo&&e.hasOwnProperty("browserInfo")&&(i.browserInfo=l.Browser.toObject(e.browserInfo,t)),i},Y.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},Y),l.ProtoUserInformation=(Q.prototype.userId="",Q.prototype.lookupId="",Q.prototype.lookupResponseCode=0,Q.prototype.callFraudSensor=!1,Q.prototype.publisherAdsTxt="",Q.encode=function(e,t){return t=t||n.create(),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(10).string(e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&t.uint32(26).string(e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&t.uint32(32).int32(e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&t.uint32(40).bool(e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&t.uint32(50).string(e.publisherAdsTxt),t},Q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoUserInformation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.userId=e.string();break;case 3:r.lookupId=e.string();break;case 4:r.lookupResponseCode=e.int32();break;case 5:r.callFraudSensor=e.bool();break;case 6:r.publisherAdsTxt=e.string();break;default:e.skipType(7&s)}}return r},Q.fromObject=function(e){if(e instanceof l.ProtoUserInformation)return e;var t=new l.ProtoUserInformation;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.lookupId&&(t.lookupId=String(e.lookupId)),null!=e.lookupResponseCode&&(t.lookupResponseCode=0|e.lookupResponseCode),null!=e.callFraudSensor&&(t.callFraudSensor=Boolean(e.callFraudSensor)),null!=e.publisherAdsTxt&&(t.publisherAdsTxt=String(e.publisherAdsTxt)),t},Q.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.userId="",i.lookupId="",i.lookupResponseCode=0,i.callFraudSensor=!1,i.publisherAdsTxt=""),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&(i.lookupId=e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&(i.lookupResponseCode=e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&(i.callFraudSensor=e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&(i.publisherAdsTxt=e.publisherAdsTxt),i},Q.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},Q),l.ProtoTrackerType=(r={},(i=Object.create(r))[r[0]="Image"]=0,i[r[1]="Javascript"]=1,i),l.ProtoTrackerTriggerType=(r={},(i=Object.create(r))[r[0]="Impression"]=0,i[r[1]="Complete25Pc"]=1,i[r[2]="Complete50Pc"]=2,i[r[3]="Complete75Pc"]=3,i[r[4]="ViewCompletion"]=4,i[r[5]="VideoClick"]=5,i[r[6]="Pause"]=6,i[r[7]="Resume"]=7,i[r[8]="Mute"]=8,i[r[9]="Unmute"]=9,i),l.CreativeTrackerViewModel=(J.prototype.type=0,J.prototype.trigger=0,J.prototype.url="",J.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.CreativeTrackerViewModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.trigger=e.int32();break;case 3:r.url=e.string();break;default:e.skipType(7&s)}}return r},J.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"Image":0,i.trigger=t.enums===String?"Impression":0,i.url=""),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoTrackerType[e.type]:e.type),null!=e.trigger&&e.hasOwnProperty("trigger")&&(i.trigger=t.enums===String?l.ProtoTrackerTriggerType[e.trigger]:e.trigger),null!=e.url&&e.hasOwnProperty("url")&&(i.url=e.url),i},J),l.ProtoCreativeTypeEnum=(r={},(i=Object.create(r))[r[0]="ThirdParty"]=0,i[r[1]="MediaFile"]=1,i[r[2]="Rtb"]=2,i[r[3]="External"]=3,i[r[4]="HeaderBidder"]=4,i[r[7]="Tam"]=7,i),l.ProtoResetCapTypeEnum=(r={},(i=Object.create(r))[r[0]="TimeCapping"]=0,i[r[1]="ContentCapping"]=1,i[r[2]="OpportunityCapping"]=2,i),l.ProtoAdSlotsEnum=(r={},(i=Object.create(r))[r[0]="PreRoll"]=0,i[r[1]="MidRoll"]=1,i[r[2]="PostRoll"]=2,i),l.ProtoLineItemPriority=(r={},(i=Object.create(r))[r[0]="House"]=0,i[r[1]="Default"]=1,i[r[2]="Preferred"]=2,i[r[3]="Top"]=3,i),l.ProtoAdSkipMode=(r={},(i=Object.create(r))[r[0]="IfLongerThan31Sec"]=0,i[r[1]="Always"]=1,i[r[2]="Never"]=2,i[r[3]="NotAplicable"]=3,i),l.ProtoAdType=(r={},(i=Object.create(r))[r[0]="Video"]=0,i[r[1]="Overlay"]=1,i),l.ProtoChoiceCriteriaEnum=(r={},(i=Object.create(r))[r[0]="Only"]=0,i[r[1]="Except"]=1,i),l.ProtoLineItemAdBreakTypeEnum=(r={},(i=Object.create(r))[r[1]="All"]=1,i[r[2]="SingleAd"]=2,i[r[3]="AdPod"]=3,i),l.ProtoLineItemTargetingTypeEnum=(r={},(i=Object.create(r))[r[0]="Only"]=0,i[r[1]="Except"]=1,i),l.ProtoLineItemAdSlotTargetingTypeEnum=(r={},(i=Object.create(r))[r[1]="SpecificSlots"]=1,i[r[2]="Interval"]=2,i),l.ProtoLineItemPauseAdOutOfViewEnum=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Strict"]=1,i),l.ProtoLineItemContextualTargetingEnum=(r={},(i=Object.create(r))[r[0]="IncludeAny"]=0,i[r[1]="IncludeAll"]=1,i[r[2]="ExcludeAny"]=2,i[r[3]="ExcludeAll"]=3,i),l.ProtoSizeChoiceCriteriaEnum=(r={},(i=Object.create(r))[r[0]="GreaterThan"]=0,i[r[1]="SmallerThan"]=1,i[r[2]="Between"]=2,i),l.ProtoLineItemAdBreakTargeting=(z.prototype.adRollType=0,z.prototype.adBreakTypeEnum=1,z.encode=function(e,t){return t=t||n.create(),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&t.uint32(8).int32(e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&t.uint32(16).int32(e.adBreakTypeEnum),t},z.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdBreakTargeting;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.adRollType=e.int32();break;case 2:r.adBreakTypeEnum=e.int32();break;default:e.skipType(7&s)}}return r},z.fromObject=function(e){if(e instanceof l.ProtoLineItemAdBreakTargeting)return e;var t=new l.ProtoLineItemAdBreakTargeting;switch(e.adRollType){case"None":case 0:t.adRollType=0;break;case"PreRoll":case 1:t.adRollType=1;break;case"MidRoll":case 2:t.adRollType=2;break;case"PostRoll":case 3:t.adRollType=3}switch(e.adBreakTypeEnum){case"All":case 1:t.adBreakTypeEnum=1;break;case"SingleAd":case 2:t.adBreakTypeEnum=2;break;case"AdPod":case 3:t.adBreakTypeEnum=3}return t},z.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.adRollType=t.enums===String?"None":0,i.adBreakTypeEnum=t.enums===String?"All":1),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&(i.adRollType=t.enums===String?l.ProtoAdBreakTypeEnum[e.adRollType]:e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&(i.adBreakTypeEnum=t.enums===String?l.ProtoLineItemAdBreakTypeEnum[e.adBreakTypeEnum]:e.adBreakTypeEnum),i},z.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},z),l.ProtoLineItemAdPodTargeting=($.prototype.targetingType=0,$.prototype.adSlotTargetingType=1,$.prototype.adSlotPositions=a.emptyArray,$.encode=function(e,t){if(t=t||n.create(),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&t.uint32(8).int32(e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&t.uint32(16).int32(e.adSlotTargetingType),null!=e.adSlotPositions&&e.adSlotPositions.length){t.uint32(26).fork();for(var i=0;i<e.adSlotPositions.length;++i)t.int32(e.adSlotPositions[i]);t.ldelim()}return t},$.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdPodTargeting;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.targetingType=e.int32();break;case 2:r.adSlotTargetingType=e.int32();break;case 3:if(r.adSlotPositions&&r.adSlotPositions.length||(r.adSlotPositions=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.adSlotPositions.push(e.int32());else r.adSlotPositions.push(e.int32());break;default:e.skipType(7&s)}}return r},$.fromObject=function(e){if(e instanceof l.ProtoLineItemAdPodTargeting)return e;var t=new l.ProtoLineItemAdPodTargeting;switch(e.targetingType){case"Only":case 0:t.targetingType=0;break;case"Except":case 1:t.targetingType=1}switch(e.adSlotTargetingType){case"SpecificSlots":case 1:t.adSlotTargetingType=1;break;case"Interval":case 2:t.adSlotTargetingType=2}if(e.adSlotPositions){if(!Array.isArray(e.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");t.adSlotPositions=[];for(var i=0;i<e.adSlotPositions.length;++i)t.adSlotPositions[i]=0|e.adSlotPositions[i]}return t},$.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adSlotPositions=[]),t.defaults&&(i.targetingType=t.enums===String?"Only":0,i.adSlotTargetingType=t.enums===String?"SpecificSlots":1),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&(i.targetingType=t.enums===String?l.ProtoLineItemTargetingTypeEnum[e.targetingType]:e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&(i.adSlotTargetingType=t.enums===String?l.ProtoLineItemAdSlotTargetingTypeEnum[e.adSlotTargetingType]:e.adSlotTargetingType),e.adSlotPositions&&e.adSlotPositions.length){i.adSlotPositions=[];for(var r=0;r<e.adSlotPositions.length;++r)i.adSlotPositions[r]=e.adSlotPositions[r]}return i},$.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},$),l.ProtoLineItemAdBreakSettings=(G.prototype.adBreakTargeting=a.emptyArray,G.prototype.adPodTargeting=null,G.encode=function(e,t){if(t=t||n.create(),null!=e.adBreakTargeting&&e.adBreakTargeting.length)for(var i=0;i<e.adBreakTargeting.length;++i)l.ProtoLineItemAdBreakTargeting.encode(e.adBreakTargeting[i],t.uint32(10).fork()).ldelim();return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&l.ProtoLineItemAdPodTargeting.encode(e.adPodTargeting,t.uint32(18).fork()).ldelim(),t},G.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdBreakSettings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.adBreakTargeting&&r.adBreakTargeting.length||(r.adBreakTargeting=[]),r.adBreakTargeting.push(l.ProtoLineItemAdBreakTargeting.decode(e,e.uint32()));break;case 2:r.adPodTargeting=l.ProtoLineItemAdPodTargeting.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},G.fromObject=function(e){if(e instanceof l.ProtoLineItemAdBreakSettings)return e;var t=new l.ProtoLineItemAdBreakSettings;if(e.adBreakTargeting){if(!Array.isArray(e.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");t.adBreakTargeting=[];for(var i=0;i<e.adBreakTargeting.length;++i){if("object"!=typeof e.adBreakTargeting[i])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");t.adBreakTargeting[i]=l.ProtoLineItemAdBreakTargeting.fromObject(e.adBreakTargeting[i])}}if(null!=e.adPodTargeting){if("object"!=typeof e.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");t.adPodTargeting=l.ProtoLineItemAdPodTargeting.fromObject(e.adPodTargeting)}return t},G.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adBreakTargeting=[]),t.defaults&&(i.adPodTargeting=null),e.adBreakTargeting&&e.adBreakTargeting.length){i.adBreakTargeting=[];for(var r=0;r<e.adBreakTargeting.length;++r)i.adBreakTargeting[r]=l.ProtoLineItemAdBreakTargeting.toObject(e.adBreakTargeting[r],t)}return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&(i.adPodTargeting=l.ProtoLineItemAdPodTargeting.toObject(e.adPodTargeting,t)),i},G.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},G),l.ProtoLineItem=(W.prototype.publisherLineItemId="",W.prototype.advertiserLineItemId="",W.prototype.adTag="",W.prototype.creativeType=0,W.prototype.sound=!1,W.prototype.viewability=!1,W.prototype.impressionTimeSpent=0,W.prototype.vendorId="",W.prototype.trackers=a.emptyArray,W.prototype.duration=0,W.prototype.renditions=a.emptyArray,W.prototype.mediaCreativeId="",W.prototype.ignoreFilledRequests=!1,W.prototype.requestCap=3,W.prototype.impressionCap=0,W.prototype.successRate=0,W.prototype.lineItemPriority=0,W.prototype.headerBidderBids="",W.prototype.headerBidderTimeout=0,W.prototype.mediaCreativeClickUrl="",W.prototype.resetRequestsCapTime=60,W.prototype.resetImpressionsCapTime=60,W.prototype.resetCapType=0,W.prototype.creativeHlsFileName="",W.prototype.timeBetweenRequests=0,W.prototype.skipMode=0,W.prototype.mediaIdTargeting=null,W.prototype.mediaKeywordsTargeting=null,W.prototype.mediaLanguageTargeting=null,W.prototype.adType=0,W.prototype.overlayTime=30,W.prototype.floorPrice=0,W.prototype.adBreakSettings=null,W.prototype.floorPrices=a.emptyArray,W.prototype.bidRate=0,W.prototype.pauseAdOutOfView=0,W.prototype.moatTrackingEnabled=!1,W.prototype.cnxCreativeId="",W.prototype.blockedDomainsRevisionNumber=0,W.prototype.advertiserContextualTargeting=a.emptyArray,W.prototype.publisherContextualTargeting=a.emptyArray,W.prototype.playerSizeTargetings=null,W.prototype.playerSize="",W.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItem;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.publisherLineItemId=e.string();break;case 2:r.advertiserLineItemId=e.string();break;case 3:r.adTag=e.string();break;case 4:r.creativeType=e.int32();break;case 6:r.sound=e.bool();break;case 7:r.viewability=e.bool();break;case 9:r.impressionTimeSpent=e.int32();break;case 10:r.vendorId=e.string();break;case 12:r.trackers&&r.trackers.length||(r.trackers=[]),r.trackers.push(l.CreativeTrackerViewModel.decode(e,e.uint32()));break;case 13:r.duration=e.int32();break;case 14:r.renditions&&r.renditions.length||(r.renditions=[]),r.renditions.push(l.ProtoRendition.decode(e,e.uint32()));break;case 15:r.mediaCreativeId=e.string();break;case 16:r.ignoreFilledRequests=e.bool();break;case 17:r.requestCap=e.int32();break;case 18:r.impressionCap=e.int32();break;case 19:r.successRate=e.double();break;case 20:r.lineItemPriority=e.int32();break;case 21:r.headerBidderBids=e.string();break;case 22:r.headerBidderTimeout=e.int32();break;case 23:r.mediaCreativeClickUrl=e.string();break;case 24:r.resetRequestsCapTime=e.int32();break;case 25:r.resetImpressionsCapTime=e.int32();break;case 26:r.resetCapType=e.int32();break;case 27:r.creativeHlsFileName=e.string();break;case 28:r.timeBetweenRequests=e.int32();break;case 29:r.skipMode=e.int32();break;case 30:r.mediaIdTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 31:r.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 32:r.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 33:r.adType=e.int32();break;case 34:r.overlayTime=e.int32();break;case 35:r.floorPrice=e.double();break;case 36:r.adBreakSettings=l.ProtoLineItemAdBreakSettings.decode(e,e.uint32());break;case 38:if(r.floorPrices&&r.floorPrices.length||(r.floorPrices=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.floorPrices.push(e.double());else r.floorPrices.push(e.double());break;case 39:r.bidRate=e.double();break;case 40:r.pauseAdOutOfView=e.int32();break;case 41:r.moatTrackingEnabled=e.bool();break;case 42:r.cnxCreativeId=e.string();break;case 44:r.blockedDomainsRevisionNumber=e.int32();break;case 45:r.advertiserContextualTargeting&&r.advertiserContextualTargeting.length||(r.advertiserContextualTargeting=[]),r.advertiserContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 46:r.publisherContextualTargeting&&r.publisherContextualTargeting.length||(r.publisherContextualTargeting=[]),r.publisherContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 47:r.playerSizeTargetings=l.ProtoPlayerSizeTargetings.decode(e,e.uint32());break;case 101:r.playerSize=e.string();break;default:e.skipType(7&s)}}return r},W.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.trackers=[],i.renditions=[],i.floorPrices=[],i.advertiserContextualTargeting=[],i.publisherContextualTargeting=[]),t.defaults&&(i.publisherLineItemId="",i.advertiserLineItemId="",i.adTag="",i.creativeType=t.enums===String?"ThirdParty":0,i.sound=!1,i.viewability=!1,i.impressionTimeSpent=0,i.vendorId="",i.duration=0,i.mediaCreativeId="",i.ignoreFilledRequests=!1,i.requestCap=3,i.impressionCap=0,i.successRate=0,i.lineItemPriority=t.enums===String?"House":0,i.headerBidderBids="",i.headerBidderTimeout=0,i.mediaCreativeClickUrl="",i.resetRequestsCapTime=60,i.resetImpressionsCapTime=60,i.resetCapType=t.enums===String?"TimeCapping":0,i.creativeHlsFileName="",i.timeBetweenRequests=0,i.skipMode=t.enums===String?"IfLongerThan31Sec":0,i.mediaIdTargeting=null,i.mediaKeywordsTargeting=null,i.mediaLanguageTargeting=null,i.adType=t.enums===String?"Video":0,i.overlayTime=30,i.floorPrice=0,i.adBreakSettings=null,i.bidRate=0,i.pauseAdOutOfView=t.enums===String?"Default":0,i.moatTrackingEnabled=!1,i.cnxCreativeId="",i.blockedDomainsRevisionNumber=0,i.playerSizeTargetings=null,i.playerSize=""),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.adTag&&e.hasOwnProperty("adTag")&&(i.adTag=e.adTag),null!=e.creativeType&&e.hasOwnProperty("creativeType")&&(i.creativeType=t.enums===String?l.ProtoCreativeTypeEnum[e.creativeType]:e.creativeType),null!=e.sound&&e.hasOwnProperty("sound")&&(i.sound=e.sound),null!=e.viewability&&e.hasOwnProperty("viewability")&&(i.viewability=e.viewability),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.vendorId&&e.hasOwnProperty("vendorId")&&(i.vendorId=e.vendorId),e.trackers&&e.trackers.length){i.trackers=[];for(var r=0;r<e.trackers.length;++r)i.trackers[r]=l.CreativeTrackerViewModel.toObject(e.trackers[r],t)}if(null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),e.renditions&&e.renditions.length)for(i.renditions=[],r=0;r<e.renditions.length;++r)i.renditions[r]=l.ProtoRendition.toObject(e.renditions[r],t);if(null!=e.mediaCreativeId&&e.hasOwnProperty("mediaCreativeId")&&(i.mediaCreativeId=e.mediaCreativeId),null!=e.ignoreFilledRequests&&e.hasOwnProperty("ignoreFilledRequests")&&(i.ignoreFilledRequests=e.ignoreFilledRequests),null!=e.requestCap&&e.hasOwnProperty("requestCap")&&(i.requestCap=e.requestCap),null!=e.impressionCap&&e.hasOwnProperty("impressionCap")&&(i.impressionCap=e.impressionCap),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.lineItemPriority&&e.hasOwnProperty("lineItemPriority")&&(i.lineItemPriority=t.enums===String?l.ProtoLineItemPriority[e.lineItemPriority]:e.lineItemPriority),null!=e.headerBidderBids&&e.hasOwnProperty("headerBidderBids")&&(i.headerBidderBids=e.headerBidderBids),null!=e.headerBidderTimeout&&e.hasOwnProperty("headerBidderTimeout")&&(i.headerBidderTimeout=e.headerBidderTimeout),null!=e.mediaCreativeClickUrl&&e.hasOwnProperty("mediaCreativeClickUrl")&&(i.mediaCreativeClickUrl=e.mediaCreativeClickUrl),null!=e.resetRequestsCapTime&&e.hasOwnProperty("resetRequestsCapTime")&&(i.resetRequestsCapTime=e.resetRequestsCapTime),null!=e.resetImpressionsCapTime&&e.hasOwnProperty("resetImpressionsCapTime")&&(i.resetImpressionsCapTime=e.resetImpressionsCapTime),null!=e.resetCapType&&e.hasOwnProperty("resetCapType")&&(i.resetCapType=t.enums===String?l.ProtoResetCapTypeEnum[e.resetCapType]:e.resetCapType),null!=e.creativeHlsFileName&&e.hasOwnProperty("creativeHlsFileName")&&(i.creativeHlsFileName=e.creativeHlsFileName),null!=e.timeBetweenRequests&&e.hasOwnProperty("timeBetweenRequests")&&(i.timeBetweenRequests=e.timeBetweenRequests),null!=e.skipMode&&e.hasOwnProperty("skipMode")&&(i.skipMode=t.enums===String?l.ProtoAdSkipMode[e.skipMode]:e.skipMode),null!=e.mediaIdTargeting&&e.hasOwnProperty("mediaIdTargeting")&&(i.mediaIdTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaIdTargeting,t)),null!=e.mediaKeywordsTargeting&&e.hasOwnProperty("mediaKeywordsTargeting")&&(i.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaKeywordsTargeting,t)),null!=e.mediaLanguageTargeting&&e.hasOwnProperty("mediaLanguageTargeting")&&(i.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaLanguageTargeting,t)),null!=e.adType&&e.hasOwnProperty("adType")&&(i.adType=t.enums===String?l.ProtoAdType[e.adType]:e.adType),null!=e.overlayTime&&e.hasOwnProperty("overlayTime")&&(i.overlayTime=e.overlayTime),null!=e.floorPrice&&e.hasOwnProperty("floorPrice")&&(i.floorPrice=t.json&&!isFinite(e.floorPrice)?String(e.floorPrice):e.floorPrice),null!=e.adBreakSettings&&e.hasOwnProperty("adBreakSettings")&&(i.adBreakSettings=l.ProtoLineItemAdBreakSettings.toObject(e.adBreakSettings,t)),e.floorPrices&&e.floorPrices.length)for(i.floorPrices=[],r=0;r<e.floorPrices.length;++r)i.floorPrices[r]=t.json&&!isFinite(e.floorPrices[r])?String(e.floorPrices[r]):e.floorPrices[r];if(null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.pauseAdOutOfView&&e.hasOwnProperty("pauseAdOutOfView")&&(i.pauseAdOutOfView=t.enums===String?l.ProtoLineItemPauseAdOutOfViewEnum[e.pauseAdOutOfView]:e.pauseAdOutOfView),null!=e.moatTrackingEnabled&&e.hasOwnProperty("moatTrackingEnabled")&&(i.moatTrackingEnabled=e.moatTrackingEnabled),null!=e.cnxCreativeId&&e.hasOwnProperty("cnxCreativeId")&&(i.cnxCreativeId=e.cnxCreativeId),null!=e.blockedDomainsRevisionNumber&&e.hasOwnProperty("blockedDomainsRevisionNumber")&&(i.blockedDomainsRevisionNumber=e.blockedDomainsRevisionNumber),e.advertiserContextualTargeting&&e.advertiserContextualTargeting.length)for(i.advertiserContextualTargeting=[],r=0;r<e.advertiserContextualTargeting.length;++r)i.advertiserContextualTargeting[r]=l.ProtoContextualTargetingCaseModel.toObject(e.advertiserContextualTargeting[r],t);if(e.publisherContextualTargeting&&e.publisherContextualTargeting.length)for(i.publisherContextualTargeting=[],r=0;r<e.publisherContextualTargeting.length;++r)i.publisherContextualTargeting[r]=l.ProtoContextualTargetingCaseModel.toObject(e.publisherContextualTargeting[r],t);return null!=e.playerSizeTargetings&&e.hasOwnProperty("playerSizeTargetings")&&(i.playerSizeTargetings=l.ProtoPlayerSizeTargetings.toObject(e.playerSizeTargetings,t)),null!=e.playerSize&&e.hasOwnProperty("playerSize")&&(i.playerSize=e.playerSize),i},W),l.ProtoTargetingChoiceModel=(H.prototype.choiceCriteria=0,H.prototype.items=a.emptyArray,H.encode=function(e,t){if(t=t||n.create(),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&t.uint32(8).int32(e.choiceCriteria),null!=e.items&&e.items.length)for(var i=0;i<e.items.length;++i)t.uint32(18).string(e.items[i]);return t},H.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoTargetingChoiceModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.choiceCriteria=e.int32();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(e.string());break;default:e.skipType(7&s)}}return r},H.fromObject=function(e){if(e instanceof l.ProtoTargetingChoiceModel)return e;var t=new l.ProtoTargetingChoiceModel;switch(e.choiceCriteria){case"Only":case 0:t.choiceCriteria=0;break;case"Except":case 1:t.choiceCriteria=1}if(e.items){if(!Array.isArray(e.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i)t.items[i]=String(e.items[i])}return t},H.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.choiceCriteria=t.enums===String?"Only":0),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&(i.choiceCriteria=t.enums===String?l.ProtoChoiceCriteriaEnum[e.choiceCriteria]:e.choiceCriteria),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=e.items[r]}return i},H.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},H),l.ProtoContextualTargetingCaseModel=(q.prototype.filters=a.emptyArray,q.encode=function(e,t){if(t=t||n.create(),null!=e.filters&&e.filters.length)for(var i=0;i<e.filters.length;++i)l.ProtoContextualTargetingFilterModel.encode(e.filters[i],t.uint32(10).fork()).ldelim();return t},q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoContextualTargetingCaseModel;e.pos<i;){var s=e.uint32();s>>>3==1?(r.filters&&r.filters.length||(r.filters=[]),r.filters.push(l.ProtoContextualTargetingFilterModel.decode(e,e.uint32()))):e.skipType(7&s)}return r},q.fromObject=function(e){if(e instanceof l.ProtoContextualTargetingCaseModel)return e;var t=new l.ProtoContextualTargetingCaseModel;if(e.filters){if(!Array.isArray(e.filters))throw TypeError(".ProtoContextualTargetingCaseModel.filters: array expected");t.filters=[];for(var i=0;i<e.filters.length;++i){if("object"!=typeof e.filters[i])throw TypeError(".ProtoContextualTargetingCaseModel.filters: object expected");t.filters[i]=l.ProtoContextualTargetingFilterModel.fromObject(e.filters[i])}}return t},q.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.filters=[]),e.filters&&e.filters.length){i.filters=[];for(var r=0;r<e.filters.length;++r)i.filters[r]=l.ProtoContextualTargetingFilterModel.toObject(e.filters[r],t)}return i},q.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},q),l.ProtoContextualTargetingFilterModel=(V.prototype.type=0,V.prototype.items=a.emptyArray,V.encode=function(e,t){if(t=t||n.create(),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(8).int32(e.type),null!=e.items&&e.items.length)for(var i=0;i<e.items.length;++i)t.uint32(18).string(e.items[i]);return t},V.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoContextualTargetingFilterModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(e.string());break;default:e.skipType(7&s)}}return r},V.fromObject=function(e){if(e instanceof l.ProtoContextualTargetingFilterModel)return e;var t=new l.ProtoContextualTargetingFilterModel;switch(e.type){case"IncludeAny":case 0:t.type=0;break;case"IncludeAll":case 1:t.type=1;break;case"ExcludeAny":case 2:t.type=2;break;case"ExcludeAll":case 3:t.type=3}if(e.items){if(!Array.isArray(e.items))throw TypeError(".ProtoContextualTargetingFilterModel.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i)t.items[i]=String(e.items[i])}return t},V.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.type=t.enums===String?"IncludeAny":0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoLineItemContextualTargetingEnum[e.type]:e.type),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=e.items[r]}return i},V.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},V),l.ProtoPlayerSizeTargetings=(U.prototype.sizeChoiceCriteria=0,U.prototype.minWidth=0,U.prototype.maxWidth=0,U.encode=function(e,t){return t=t||n.create(),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&t.uint32(8).int32(e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&t.uint32(16).int32(e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&t.uint32(24).int32(e.maxWidth),t},U.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayerSizeTargetings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.sizeChoiceCriteria=e.int32();break;case 2:r.minWidth=e.int32();break;case 3:r.maxWidth=e.int32();break;default:e.skipType(7&s)}}return r},U.fromObject=function(e){if(e instanceof l.ProtoPlayerSizeTargetings)return e;var t=new l.ProtoPlayerSizeTargetings;switch(e.sizeChoiceCriteria){case"GreaterThan":case 0:t.sizeChoiceCriteria=0;break;case"SmallerThan":case 1:t.sizeChoiceCriteria=1;break;case"Between":case 2:t.sizeChoiceCriteria=2}return null!=e.minWidth&&(t.minWidth=0|e.minWidth),null!=e.maxWidth&&(t.maxWidth=0|e.maxWidth),t},U.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.sizeChoiceCriteria=t.enums===String?"GreaterThan":0,i.minWidth=0,i.maxWidth=0),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&(i.sizeChoiceCriteria=t.enums===String?l.ProtoSizeChoiceCriteriaEnum[e.sizeChoiceCriteria]:e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&(i.minWidth=e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&(i.maxWidth=e.maxWidth),i},U.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},U),l.ProtoRendition=(N.prototype.height=0,N.prototype.codec="",N.prototype.file="",N.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRendition;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.height=e.int32();break;case 2:r.codec=e.string();break;case 3:r.file=e.string();break;default:e.skipType(7&s)}}return r},N.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.height=0,i.codec="",i.file=""),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=e.codec),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},N),l.ProtoLiveMediaMetadataResponse=(F.prototype.startDate="",F.prototype.outputUrl="",F.prototype.thumbnailUrl="",F.prototype.altText="",F.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLiveMediaMetadataResponse;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.startDate=e.string();break;case 2:r.outputUrl=e.string();break;case 3:r.thumbnailUrl=e.string();break;case 4:r.altText=e.string();break;default:e.skipType(7&s)}}return r},F.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.startDate="",i.outputUrl="",i.thumbnailUrl="",i.altText=""),null!=e.startDate&&e.hasOwnProperty("startDate")&&(i.startDate=e.startDate),null!=e.outputUrl&&e.hasOwnProperty("outputUrl")&&(i.outputUrl=e.outputUrl),null!=e.thumbnailUrl&&e.hasOwnProperty("thumbnailUrl")&&(i.thumbnailUrl=e.thumbnailUrl),null!=e.altText&&e.hasOwnProperty("altText")&&(i.altText=e.altText),i},F),l.ProtoLoggingLevelEnum=(r={},(i=Object.create(r))[r[0]="FATAL"]=0,i[r[1]="WARNING"]=1,i[r[2]="INFO"]=2,i),l.ProtoLoggingRequest=(_.prototype.message="",_.prototype.version=0,_.prototype.level=0,_.prototype.callStack="",_.prototype.pageUrl="",_.prototype.exception="",_.prototype.sessionId="",_.encode=function(e,t){return t=t||n.create(),null!=e.message&&e.hasOwnProperty("message")&&t.uint32(10).string(e.message),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(16).int32(e.version),null!=e.level&&e.hasOwnProperty("level")&&t.uint32(24).int32(e.level),null!=e.callStack&&e.hasOwnProperty("callStack")&&t.uint32(34).string(e.callStack),null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(42).string(e.pageUrl),null!=e.exception&&e.hasOwnProperty("exception")&&t.uint32(50).string(e.exception),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(58).string(e.sessionId),t},_.fromObject=function(e){if(e instanceof l.ProtoLoggingRequest)return e;var t=new l.ProtoLoggingRequest;switch(null!=e.message&&(t.message=String(e.message)),null!=e.version&&(t.version=0|e.version),e.level){case"FATAL":case 0:t.level=0;break;case"WARNING":case 1:t.level=1;break;case"INFO":case 2:t.level=2}return null!=e.callStack&&(t.callStack=String(e.callStack)),null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.exception&&(t.exception=String(e.exception)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),t},_.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},_),l.ProtoSpriteSheet=(D.prototype.file="",D.prototype.height=0,D.prototype.count=0,D.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoSpriteSheet;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.file=e.string();break;case 2:r.height=e.int32();break;case 3:r.count=e.int32();break;default:e.skipType(7&s)}}return r},D.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.file="",i.height=0,i.count=0),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.count&&e.hasOwnProperty("count")&&(i.count=e.count),i},D),l.ProtoTrack=(j.prototype.file="",j.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoTrack;e.pos<i;){var s=e.uint32();s>>>3==1?r.file=e.string():e.skipType(7&s)}return r},j.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.file=""),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},j),l.ProtoCustomField=(B.prototype.name="",B.prototype.value="",B.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoCustomField;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.name=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&s)}}return r},B.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.name="",i.value=""),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),null!=e.value&&e.hasOwnProperty("value")&&(i.value=e.value),i},B),l.ProtoMediaMetadataResponse=(M.prototype.title="",M.prototype.description="",M.prototype.duration=0,M.prototype.clickUrl="",M.prototype.keywordList=a.emptyArray,M.prototype.trackList=a.emptyArray,M.prototype.spriteSheet=null,M.prototype.thumbnail="",M.prototype.renditionList=a.emptyArray,M.prototype.customFields=a.emptyArray,M.prototype.hlsFilePath="",M.prototype.languageId="",M.prototype.sourceItemId="",M.prototype.altText="",M.prototype.videoIndexes=a.emptyArray,M.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoMediaMetadataResponse;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.title=e.string();break;case 2:r.description=e.string();break;case 3:r.duration=e.int32();break;case 4:r.clickUrl=e.string();break;case 5:r.keywordList&&r.keywordList.length||(r.keywordList=[]),r.keywordList.push(e.string());break;case 6:r.trackList&&r.trackList.length||(r.trackList=[]),r.trackList.push(l.ProtoTrack.decode(e,e.uint32()));break;case 7:r.spriteSheet=l.ProtoSpriteSheet.decode(e,e.uint32());break;case 8:r.thumbnail=e.string();break;case 9:r.renditionList&&r.renditionList.length||(r.renditionList=[]),r.renditionList.push(l.ProtoRendition.decode(e,e.uint32()));break;case 10:r.customFields&&r.customFields.length||(r.customFields=[]),r.customFields.push(l.ProtoCustomField.decode(e,e.uint32()));break;case 11:r.hlsFilePath=e.string();break;case 12:r.languageId=e.string();break;case 13:r.sourceItemId=e.string();break;case 14:r.altText=e.string();break;case 15:r.videoIndexes&&r.videoIndexes.length||(r.videoIndexes=[]),r.videoIndexes.push(e.string());break;default:e.skipType(7&s)}}return r},M.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.keywordList=[],i.trackList=[],i.renditionList=[],i.customFields=[],i.videoIndexes=[]),t.defaults&&(i.title="",i.description="",i.duration=0,i.clickUrl="",i.spriteSheet=null,i.thumbnail="",i.hlsFilePath="",i.languageId="",i.sourceItemId="",i.altText=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(i.description=e.description),null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&(i.clickUrl=e.clickUrl),e.keywordList&&e.keywordList.length){i.keywordList=[];for(var r=0;r<e.keywordList.length;++r)i.keywordList[r]=e.keywordList[r]}if(e.trackList&&e.trackList.length)for(i.trackList=[],r=0;r<e.trackList.length;++r)i.trackList[r]=l.ProtoTrack.toObject(e.trackList[r],t);if(null!=e.spriteSheet&&e.hasOwnProperty("spriteSheet")&&(i.spriteSheet=l.ProtoSpriteSheet.toObject(e.spriteSheet,t)),null!=e.thumbnail&&e.hasOwnProperty("thumbnail")&&(i.thumbnail=e.thumbnail),e.renditionList&&e.renditionList.length)for(i.renditionList=[],r=0;r<e.renditionList.length;++r)i.renditionList[r]=l.ProtoRendition.toObject(e.renditionList[r],t);if(e.customFields&&e.customFields.length)for(i.customFields=[],r=0;r<e.customFields.length;++r)i.customFields[r]=l.ProtoCustomField.toObject(e.customFields[r],t);if(null!=e.hlsFilePath&&e.hasOwnProperty("hlsFilePath")&&(i.hlsFilePath=e.hlsFilePath),null!=e.languageId&&e.hasOwnProperty("languageId")&&(i.languageId=e.languageId),null!=e.sourceItemId&&e.hasOwnProperty("sourceItemId")&&(i.sourceItemId=e.sourceItemId),null!=e.altText&&e.hasOwnProperty("altText")&&(i.altText=e.altText),e.videoIndexes&&e.videoIndexes.length)for(i.videoIndexes=[],r=0;r<e.videoIndexes.length;++r)i.videoIndexes[r]=e.videoIndexes[r];return i},M),l.ProtoMediaTypeEnum=(r={},(i=Object.create(r))[r[0]="Image"]=0,i[r[1]="Video"]=1,i),l.ProtoRtbRequest=(R.prototype.metadata=null,R.prototype.coppa=!1,R.prototype.refererUrl="",R.prototype.testMode=!1,R.prototype.videoWidth=0,R.prototype.videoHeight=0,R.prototype.gdprCompliant=!1,R.prototype.soundOn=!1,R.prototype.gdprConsentData="",R.prototype.explorationMode=!1,R.prototype.viewability=!1,R.prototype.outstream=!1,R.prototype.domainURL="",R.prototype.isClickToPlay=!1,R.prototype.appVersion="",R.prototype.deviceID="",R.prototype.lineItems=a.emptyObject,R.prototype.isCcpaBlockingUserInfo=!1,R.prototype.usPrivacyString="",R.prototype.adSkippability=0,R.prototype.skipAdAfter=5,R.prototype.gdprConsentMode=0,R.prototype.maxAdDuration=180,R.prototype.customMacros=a.emptyObject,R.encode=function(e,t){if(t=t||n.create(),null!=e.metadata&&e.hasOwnProperty("metadata")&&l.MetadataModel.encode(e.metadata,t.uint32(10).fork()).ldelim(),null!=e.coppa&&e.hasOwnProperty("coppa")&&t.uint32(32).bool(e.coppa),null!=e.refererUrl&&e.hasOwnProperty("refererUrl")&&t.uint32(42).string(e.refererUrl),null!=e.testMode&&e.hasOwnProperty("testMode")&&t.uint32(48).bool(e.testMode),null!=e.videoWidth&&e.hasOwnProperty("videoWidth")&&t.uint32(56).int32(e.videoWidth),null!=e.videoHeight&&e.hasOwnProperty("videoHeight")&&t.uint32(64).int32(e.videoHeight),null!=e.gdprCompliant&&e.hasOwnProperty("gdprCompliant")&&t.uint32(72).bool(e.gdprCompliant),null!=e.soundOn&&e.hasOwnProperty("soundOn")&&t.uint32(80).bool(e.soundOn),null!=e.gdprConsentData&&e.hasOwnProperty("gdprConsentData")&&t.uint32(90).string(e.gdprConsentData),null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&t.uint32(96).bool(e.explorationMode),null!=e.viewability&&e.hasOwnProperty("viewability")&&t.uint32(104).bool(e.viewability),null!=e.outstream&&e.hasOwnProperty("outstream")&&t.uint32(112).bool(e.outstream),null!=e.domainURL&&e.hasOwnProperty("domainURL")&&t.uint32(130).string(e.domainURL),null!=e.isClickToPlay&&e.hasOwnProperty("isClickToPlay")&&t.uint32(144).bool(e.isClickToPlay),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&t.uint32(170).string(e.appVersion),null!=e.deviceID&&e.hasOwnProperty("deviceID")&&t.uint32(194).string(e.deviceID),null!=e.lineItems&&e.hasOwnProperty("lineItems"))for(var i=Object.keys(e.lineItems),r=0;r<i.length;++r)t.uint32(202).fork().uint32(10).string(i[r]),l.ProtoRtbRequestLineItemEntry.encode(e.lineItems[i[r]],t.uint32(18).fork()).ldelim().ldelim();if(null!=e.isCcpaBlockingUserInfo&&e.hasOwnProperty("isCcpaBlockingUserInfo")&&t.uint32(208).bool(e.isCcpaBlockingUserInfo),null!=e.usPrivacyString&&e.hasOwnProperty("usPrivacyString")&&t.uint32(218).string(e.usPrivacyString),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&t.uint32(256).int32(e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&t.uint32(264).int32(e.skipAdAfter),null!=e.gdprConsentMode&&e.hasOwnProperty("gdprConsentMode")&&t.uint32(288).int32(e.gdprConsentMode),null!=e.maxAdDuration&&e.hasOwnProperty("maxAdDuration")&&t.uint32(296).int32(e.maxAdDuration),null!=e.customMacros&&e.hasOwnProperty("customMacros"))for(i=Object.keys(e.customMacros),r=0;r<i.length;++r)t.uint32(306).fork().uint32(10).string(i[r]).uint32(18).string(e.customMacros[i[r]]).ldelim();return t},R.fromObject=function(e){if(e instanceof l.ProtoRtbRequest)return e;var t=new l.ProtoRtbRequest;if(null!=e.metadata){if("object"!=typeof e.metadata)throw TypeError(".ProtoRtbRequest.metadata: object expected");t.metadata=l.MetadataModel.fromObject(e.metadata)}if(null!=e.coppa&&(t.coppa=Boolean(e.coppa)),null!=e.refererUrl&&(t.refererUrl=String(e.refererUrl)),null!=e.testMode&&(t.testMode=Boolean(e.testMode)),null!=e.videoWidth&&(t.videoWidth=0|e.videoWidth),null!=e.videoHeight&&(t.videoHeight=0|e.videoHeight),null!=e.gdprCompliant&&(t.gdprCompliant=Boolean(e.gdprCompliant)),null!=e.soundOn&&(t.soundOn=Boolean(e.soundOn)),null!=e.gdprConsentData&&(t.gdprConsentData=String(e.gdprConsentData)),null!=e.explorationMode&&(t.explorationMode=Boolean(e.explorationMode)),null!=e.viewability&&(t.viewability=Boolean(e.viewability)),null!=e.outstream&&(t.outstream=Boolean(e.outstream)),null!=e.domainURL&&(t.domainURL=String(e.domainURL)),null!=e.isClickToPlay&&(t.isClickToPlay=Boolean(e.isClickToPlay)),null!=e.appVersion&&(t.appVersion=String(e.appVersion)),null!=e.deviceID&&(t.deviceID=String(e.deviceID)),e.lineItems){if("object"!=typeof e.lineItems)throw TypeError(".ProtoRtbRequest.lineItems: object expected");t.lineItems={};for(var i=Object.keys(e.lineItems),r=0;r<i.length;++r){if("object"!=typeof e.lineItems[i[r]])throw TypeError(".ProtoRtbRequest.lineItems: object expected");t.lineItems[i[r]]=l.ProtoRtbRequestLineItemEntry.fromObject(e.lineItems[i[r]])}}switch(null!=e.isCcpaBlockingUserInfo&&(t.isCcpaBlockingUserInfo=Boolean(e.isCcpaBlockingUserInfo)),null!=e.usPrivacyString&&(t.usPrivacyString=String(e.usPrivacyString)),e.adSkippability){case"IfLongerThan31Sec":case 0:t.adSkippability=0;break;case"Always":case 1:t.adSkippability=1;break;case"NoRestrictions":case 2:t.adSkippability=2}switch(null!=e.skipAdAfter&&(t.skipAdAfter=0|e.skipAdAfter),e.gdprConsentMode){case"Unknown":case 0:t.gdprConsentMode=0;break;case"NoCmp":case 1:t.gdprConsentMode=1;break;case"NoConsent":case 2:t.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:t.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:t.gdprConsentMode=4;break;case"AllGood":case 5:t.gdprConsentMode=5}if(null!=e.maxAdDuration&&(t.maxAdDuration=0|e.maxAdDuration),e.customMacros){if("object"!=typeof e.customMacros)throw TypeError(".ProtoRtbRequest.customMacros: object expected");for(t.customMacros={},i=Object.keys(e.customMacros),r=0;r<i.length;++r)t.customMacros[i[r]]=String(e.customMacros[i[r]])}return t},R.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},R),l.ProtoRtbRequestLineItemEntry=(L.prototype.availableRequests=0,L.prototype.cachedFloorPrice=0,L.prototype.ignoredFloorPriceFactorIndexes=a.emptyArray,L.prototype.gdprConsent=!1,L.prototype.publisherLineItemId="",L.prototype.slotWidth=0,L.prototype.slotHeight=0,L.encode=function(e,t){if(t=t||n.create(),null!=e.availableRequests&&e.hasOwnProperty("availableRequests")&&t.uint32(8).int32(e.availableRequests),null!=e.cachedFloorPrice&&e.hasOwnProperty("cachedFloorPrice")&&t.uint32(17).double(e.cachedFloorPrice),null!=e.ignoredFloorPriceFactorIndexes&&e.ignoredFloorPriceFactorIndexes.length){t.uint32(26).fork();for(var i=0;i<e.ignoredFloorPriceFactorIndexes.length;++i)t.int32(e.ignoredFloorPriceFactorIndexes[i]);t.ldelim()}return null!=e.gdprConsent&&e.hasOwnProperty("gdprConsent")&&t.uint32(32).bool(e.gdprConsent),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.slotWidth&&e.hasOwnProperty("slotWidth")&&t.uint32(48).int32(e.slotWidth),null!=e.slotHeight&&e.hasOwnProperty("slotHeight")&&t.uint32(56).int32(e.slotHeight),t},L.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRtbRequestLineItemEntry;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.availableRequests=e.int32();break;case 2:r.cachedFloorPrice=e.double();break;case 3:if(r.ignoredFloorPriceFactorIndexes&&r.ignoredFloorPriceFactorIndexes.length||(r.ignoredFloorPriceFactorIndexes=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.ignoredFloorPriceFactorIndexes.push(e.int32());else r.ignoredFloorPriceFactorIndexes.push(e.int32());break;case 4:r.gdprConsent=e.bool();break;case 5:r.publisherLineItemId=e.string();break;case 6:r.slotWidth=e.int32();break;case 7:r.slotHeight=e.int32();break;default:e.skipType(7&s)}}return r},L.fromObject=function(e){if(e instanceof l.ProtoRtbRequestLineItemEntry)return e;var t=new l.ProtoRtbRequestLineItemEntry;if(null!=e.availableRequests&&(t.availableRequests=0|e.availableRequests),null!=e.cachedFloorPrice&&(t.cachedFloorPrice=Number(e.cachedFloorPrice)),e.ignoredFloorPriceFactorIndexes){if(!Array.isArray(e.ignoredFloorPriceFactorIndexes))throw TypeError(".ProtoRtbRequestLineItemEntry.ignoredFloorPriceFactorIndexes: array expected");t.ignoredFloorPriceFactorIndexes=[];for(var i=0;i<e.ignoredFloorPriceFactorIndexes.length;++i)t.ignoredFloorPriceFactorIndexes[i]=0|e.ignoredFloorPriceFactorIndexes[i]}return null!=e.gdprConsent&&(t.gdprConsent=Boolean(e.gdprConsent)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.slotWidth&&(t.slotWidth=0|e.slotWidth),null!=e.slotHeight&&(t.slotHeight=0|e.slotHeight),t},L.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.ignoredFloorPriceFactorIndexes=[]),t.defaults&&(i.availableRequests=0,i.cachedFloorPrice=0,i.gdprConsent=!1,i.publisherLineItemId="",i.slotWidth=0,i.slotHeight=0),null!=e.availableRequests&&e.hasOwnProperty("availableRequests")&&(i.availableRequests=e.availableRequests),null!=e.cachedFloorPrice&&e.hasOwnProperty("cachedFloorPrice")&&(i.cachedFloorPrice=t.json&&!isFinite(e.cachedFloorPrice)?String(e.cachedFloorPrice):e.cachedFloorPrice),e.ignoredFloorPriceFactorIndexes&&e.ignoredFloorPriceFactorIndexes.length){i.ignoredFloorPriceFactorIndexes=[];for(var r=0;r<e.ignoredFloorPriceFactorIndexes.length;++r)i.ignoredFloorPriceFactorIndexes[r]=e.ignoredFloorPriceFactorIndexes[r]}return null!=e.gdprConsent&&e.hasOwnProperty("gdprConsent")&&(i.gdprConsent=e.gdprConsent),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.slotWidth&&e.hasOwnProperty("slotWidth")&&(i.slotWidth=e.slotWidth),null!=e.slotHeight&&e.hasOwnProperty("slotHeight")&&(i.slotHeight=e.slotHeight),i},L.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},L),l.ProtoRtbResponse=(E.prototype.lineItemResponses=a.emptyArray,E.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRtbResponse;e.pos<i;){var s=e.uint32();s>>>3==3?(r.lineItemResponses&&r.lineItemResponses.length||(r.lineItemResponses=[]),r.lineItemResponses.push(l.ProtoRtbLineItem.decode(e,e.uint32()))):e.skipType(7&s)}return r},E.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.lineItemResponses=[]),e.lineItemResponses&&e.lineItemResponses.length){i.lineItemResponses=[];for(var r=0;r<e.lineItemResponses.length;++r)i.lineItemResponses[r]=l.ProtoRtbLineItem.toObject(e.lineItemResponses[r],t)}return i},E),l.ProtoRtbBid=(x.prototype.winNoticeUrl="",x.prototype.adQualityCheckUrl="",x.prototype.vastTag="",x.prototype.encryptedPrice="",x.prototype.creativeId="",x.prototype.seatId="",x.prototype.adomain="",x.prototype.syncedUser=!1,x.prototype.requestedFloorPrice=0,x.prototype.floorPriceFactorIndex=0,x.prototype.campaignId="",x.prototype.width=0,x.prototype.height=0,x.prototype.billingNoticeUrlList=a.emptyArray,x.prototype.mime="text/html",x.prototype.gtkpbp=0,x.prototype.successRate=0,x.prototype.impressionTimeSpent=0,x.prototype.bidRate=0,x.prototype.dspId="",x.prototype.cnxBidId="",x.encode=function(e,t){if(t=t||n.create(),null!=e.winNoticeUrl&&e.hasOwnProperty("winNoticeUrl")&&t.uint32(18).string(e.winNoticeUrl),null!=e.adQualityCheckUrl&&e.hasOwnProperty("adQualityCheckUrl")&&t.uint32(26).string(e.adQualityCheckUrl),null!=e.vastTag&&e.hasOwnProperty("vastTag")&&t.uint32(34).string(e.vastTag),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&t.uint32(50).string(e.encryptedPrice),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(58).string(e.creativeId),null!=e.seatId&&e.hasOwnProperty("seatId")&&t.uint32(66).string(e.seatId),null!=e.adomain&&e.hasOwnProperty("adomain")&&t.uint32(74).string(e.adomain),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(80).bool(e.syncedUser),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&t.uint32(89).double(e.requestedFloorPrice),null!=e.floorPriceFactorIndex&&e.hasOwnProperty("floorPriceFactorIndex")&&t.uint32(96).int32(e.floorPriceFactorIndex),null!=e.campaignId&&e.hasOwnProperty("campaignId")&&t.uint32(106).string(e.campaignId),null!=e.width&&e.hasOwnProperty("width")&&t.uint32(112).int32(e.width),null!=e.height&&e.hasOwnProperty("height")&&t.uint32(120).int32(e.height),null!=e.billingNoticeUrlList&&e.billingNoticeUrlList.length)for(var i=0;i<e.billingNoticeUrlList.length;++i)t.uint32(130).string(e.billingNoticeUrlList[i]);return null!=e.mime&&e.hasOwnProperty("mime")&&t.uint32(138).string(e.mime),null!=e.gtkpbp&&e.hasOwnProperty("gtkpbp")&&t.uint32(145).double(e.gtkpbp),null!=e.successRate&&e.hasOwnProperty("successRate")&&t.uint32(153).double(e.successRate),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&t.uint32(160).int32(e.impressionTimeSpent),null!=e.bidRate&&e.hasOwnProperty("bidRate")&&t.uint32(169).double(e.bidRate),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(178).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(186).string(e.cnxBidId),t},x.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRtbBid;e.pos<i;){var s=e.uint32();switch(s>>>3){case 2:r.winNoticeUrl=e.string();break;case 3:r.adQualityCheckUrl=e.string();break;case 4:r.vastTag=e.string();break;case 6:r.encryptedPrice=e.string();break;case 7:r.creativeId=e.string();break;case 8:r.seatId=e.string();break;case 9:r.adomain=e.string();break;case 10:r.syncedUser=e.bool();break;case 11:r.requestedFloorPrice=e.double();break;case 12:r.floorPriceFactorIndex=e.int32();break;case 13:r.campaignId=e.string();break;case 14:r.width=e.int32();break;case 15:r.height=e.int32();break;case 16:r.billingNoticeUrlList&&r.billingNoticeUrlList.length||(r.billingNoticeUrlList=[]),r.billingNoticeUrlList.push(e.string());break;case 17:r.mime=e.string();break;case 18:r.gtkpbp=e.double();break;case 19:r.successRate=e.double();break;case 20:r.impressionTimeSpent=e.int32();break;case 21:r.bidRate=e.double();break;case 22:r.dspId=e.string();break;case 23:r.cnxBidId=e.string();break;default:e.skipType(7&s)}}return r},x.fromObject=function(e){if(e instanceof l.ProtoRtbBid)return e;var t=new l.ProtoRtbBid;if(null!=e.winNoticeUrl&&(t.winNoticeUrl=String(e.winNoticeUrl)),null!=e.adQualityCheckUrl&&(t.adQualityCheckUrl=String(e.adQualityCheckUrl)),null!=e.vastTag&&(t.vastTag=String(e.vastTag)),null!=e.encryptedPrice&&(t.encryptedPrice=String(e.encryptedPrice)),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.seatId&&(t.seatId=String(e.seatId)),null!=e.adomain&&(t.adomain=String(e.adomain)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.requestedFloorPrice&&(t.requestedFloorPrice=Number(e.requestedFloorPrice)),null!=e.floorPriceFactorIndex&&(t.floorPriceFactorIndex=0|e.floorPriceFactorIndex),null!=e.campaignId&&(t.campaignId=String(e.campaignId)),null!=e.width&&(t.width=0|e.width),null!=e.height&&(t.height=0|e.height),e.billingNoticeUrlList){if(!Array.isArray(e.billingNoticeUrlList))throw TypeError(".ProtoRtbBid.billingNoticeUrlList: array expected");t.billingNoticeUrlList=[];for(var i=0;i<e.billingNoticeUrlList.length;++i)t.billingNoticeUrlList[i]=String(e.billingNoticeUrlList[i])}return null!=e.mime&&(t.mime=String(e.mime)),null!=e.gtkpbp&&(t.gtkpbp=Number(e.gtkpbp)),null!=e.successRate&&(t.successRate=Number(e.successRate)),null!=e.impressionTimeSpent&&(t.impressionTimeSpent=0|e.impressionTimeSpent),null!=e.bidRate&&(t.bidRate=Number(e.bidRate)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),t},x.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.billingNoticeUrlList=[]),t.defaults&&(i.winNoticeUrl="",i.adQualityCheckUrl="",i.vastTag="",i.encryptedPrice="",i.creativeId="",i.seatId="",i.adomain="",i.syncedUser=!1,i.requestedFloorPrice=0,i.floorPriceFactorIndex=0,i.campaignId="",i.width=0,i.height=0,i.mime="text/html",i.gtkpbp=0,i.successRate=0,i.impressionTimeSpent=0,i.bidRate=0,i.dspId="",i.cnxBidId=""),null!=e.winNoticeUrl&&e.hasOwnProperty("winNoticeUrl")&&(i.winNoticeUrl=e.winNoticeUrl),null!=e.adQualityCheckUrl&&e.hasOwnProperty("adQualityCheckUrl")&&(i.adQualityCheckUrl=e.adQualityCheckUrl),null!=e.vastTag&&e.hasOwnProperty("vastTag")&&(i.vastTag=e.vastTag),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&(i.encryptedPrice=e.encryptedPrice),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&(i.creativeId=e.creativeId),null!=e.seatId&&e.hasOwnProperty("seatId")&&(i.seatId=e.seatId),null!=e.adomain&&e.hasOwnProperty("adomain")&&(i.adomain=e.adomain),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&(i.syncedUser=e.syncedUser),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&(i.requestedFloorPrice=t.json&&!isFinite(e.requestedFloorPrice)?String(e.requestedFloorPrice):e.requestedFloorPrice),null!=e.floorPriceFactorIndex&&e.hasOwnProperty("floorPriceFactorIndex")&&(i.floorPriceFactorIndex=e.floorPriceFactorIndex),null!=e.campaignId&&e.hasOwnProperty("campaignId")&&(i.campaignId=e.campaignId),null!=e.width&&e.hasOwnProperty("width")&&(i.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),e.billingNoticeUrlList&&e.billingNoticeUrlList.length){i.billingNoticeUrlList=[];for(var r=0;r<e.billingNoticeUrlList.length;++r)i.billingNoticeUrlList[r]=e.billingNoticeUrlList[r]}return null!=e.mime&&e.hasOwnProperty("mime")&&(i.mime=e.mime),null!=e.gtkpbp&&e.hasOwnProperty("gtkpbp")&&(i.gtkpbp=t.json&&!isFinite(e.gtkpbp)?String(e.gtkpbp):e.gtkpbp),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.dspId&&e.hasOwnProperty("dspId")&&(i.dspId=e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&(i.cnxBidId=e.cnxBidId),i},x.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},x),l.ProtoRtbNoBid=(w.prototype.connatixReason=0,w.prototype.partnerReason=0,w.prototype.syncedUser=!1,w.prototype.requestedFloorPrice=0,w.prototype.floorPriceFactorIndex=0,w.prototype.partnerCustomHeaders="",w.encode=function(e,t){return t=t||n.create(),null!=e.connatixReason&&e.hasOwnProperty("connatixReason")&&t.uint32(8).int32(e.connatixReason),null!=e.partnerReason&&e.hasOwnProperty("partnerReason")&&t.uint32(16).int32(e.partnerReason),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&t.uint32(33).double(e.requestedFloorPrice),null!=e.floorPriceFactorIndex&&e.hasOwnProperty("floorPriceFactorIndex")&&t.uint32(40).int32(e.floorPriceFactorIndex),null!=e.partnerCustomHeaders&&e.hasOwnProperty("partnerCustomHeaders")&&t.uint32(50).string(e.partnerCustomHeaders),t},w.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRtbNoBid;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.connatixReason=e.int32();break;case 2:r.partnerReason=e.int32();break;case 3:r.syncedUser=e.bool();break;case 4:r.requestedFloorPrice=e.double();break;case 5:r.floorPriceFactorIndex=e.int32();break;case 6:r.partnerCustomHeaders=e.string();break;default:e.skipType(7&s)}}return r},w.fromObject=function(e){if(e instanceof l.ProtoRtbNoBid)return e;var t=new l.ProtoRtbNoBid;switch(e.connatixReason){case"RequestException":case 0:t.connatixReason=0;break;case"Timeout":case 1:t.connatixReason=1;break;case"EmptyResponse":case 2:t.connatixReason=2;break;case"InvalidResponse":case 3:t.connatixReason=3;break;case"NoBid":case 4:t.connatixReason=4;break;case"BidBelowFloor":case 5:t.connatixReason=5;break;case"DealIdMismatch":case 6:t.connatixReason=6;break;case"CsInvalidResponse":case 7:t.connatixReason=7;break;case"CsRequestException":case 8:t.connatixReason=8;break;case"CsEmptyResponse":case 9:t.connatixReason=9;break;case"NoLibInPage":case 11:t.connatixReason=11}switch(e.partnerReason){case"Unknown":case 0:t.partnerReason=0;break;case"TechnicalError":case 1:t.partnerReason=1;break;case"InvalidRequest":case 2:t.partnerReason=2;break;case"KnownWebSpider":case 3:t.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:t.partnerReason=4;break;case"CloudIP":case 5:t.partnerReason=5;break;case"UnsupportedDevice":case 6:t.partnerReason=6;break;case"BlockedPublisher":case 7:t.partnerReason=7;break;case"UnmatchedUser":case 8:t.partnerReason=8;break;case"DailyReaderCapMet":case 9:t.partnerReason=9;break;case"DailyDomainCapMet":case 10:t.partnerReason=10}return null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.requestedFloorPrice&&(t.requestedFloorPrice=Number(e.requestedFloorPrice)),null!=e.floorPriceFactorIndex&&(t.floorPriceFactorIndex=0|e.floorPriceFactorIndex),null!=e.partnerCustomHeaders&&(t.partnerCustomHeaders=String(e.partnerCustomHeaders)),t},w.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.connatixReason=t.enums===String?"RequestException":0,i.partnerReason=t.enums===String?"Unknown":0,i.syncedUser=!1,i.requestedFloorPrice=0,i.floorPriceFactorIndex=0,i.partnerCustomHeaders=""),null!=e.connatixReason&&e.hasOwnProperty("connatixReason")&&(i.connatixReason=t.enums===String?l.ConnatixNoBidReasonEnum[e.connatixReason]:e.connatixReason),null!=e.partnerReason&&e.hasOwnProperty("partnerReason")&&(i.partnerReason=t.enums===String?l.PartnerNoBidReasonEnum[e.partnerReason]:e.partnerReason),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&(i.syncedUser=e.syncedUser),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&(i.requestedFloorPrice=t.json&&!isFinite(e.requestedFloorPrice)?String(e.requestedFloorPrice):e.requestedFloorPrice),null!=e.floorPriceFactorIndex&&e.hasOwnProperty("floorPriceFactorIndex")&&(i.floorPriceFactorIndex=e.floorPriceFactorIndex),null!=e.partnerCustomHeaders&&e.hasOwnProperty("partnerCustomHeaders")&&(i.partnerCustomHeaders=e.partnerCustomHeaders),i},w.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},w),l.ProtoRtbLineItem=(C.prototype.id="",C.prototype.cachedFloorPrice=0,C.prototype.bids=a.emptyArray,C.prototype.noBids=a.emptyArray,C.encode=function(e,t){if(t=t||n.create(),null!=e.id&&e.hasOwnProperty("id")&&t.uint32(10).string(e.id),null!=e.cachedFloorPrice&&e.hasOwnProperty("cachedFloorPrice")&&t.uint32(17).double(e.cachedFloorPrice),null!=e.bids&&e.bids.length)for(var i=0;i<e.bids.length;++i)l.ProtoRtbBid.encode(e.bids[i],t.uint32(26).fork()).ldelim();if(null!=e.noBids&&e.noBids.length)for(i=0;i<e.noBids.length;++i)l.ProtoRtbNoBid.encode(e.noBids[i],t.uint32(34).fork()).ldelim();return t},C.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRtbLineItem;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.id=e.string();break;case 2:r.cachedFloorPrice=e.double();break;case 3:r.bids&&r.bids.length||(r.bids=[]),r.bids.push(l.ProtoRtbBid.decode(e,e.uint32()));break;case 4:r.noBids&&r.noBids.length||(r.noBids=[]),r.noBids.push(l.ProtoRtbNoBid.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return r},C.fromObject=function(e){if(e instanceof l.ProtoRtbLineItem)return e;var t=new l.ProtoRtbLineItem;if(null!=e.id&&(t.id=String(e.id)),null!=e.cachedFloorPrice&&(t.cachedFloorPrice=Number(e.cachedFloorPrice)),e.bids){if(!Array.isArray(e.bids))throw TypeError(".ProtoRtbLineItem.bids: array expected");t.bids=[];for(var i=0;i<e.bids.length;++i){if("object"!=typeof e.bids[i])throw TypeError(".ProtoRtbLineItem.bids: object expected");t.bids[i]=l.ProtoRtbBid.fromObject(e.bids[i])}}if(e.noBids){if(!Array.isArray(e.noBids))throw TypeError(".ProtoRtbLineItem.noBids: array expected");for(t.noBids=[],i=0;i<e.noBids.length;++i){if("object"!=typeof e.noBids[i])throw TypeError(".ProtoRtbLineItem.noBids: object expected");t.noBids[i]=l.ProtoRtbNoBid.fromObject(e.noBids[i])}}return t},C.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.bids=[],i.noBids=[]),t.defaults&&(i.id="",i.cachedFloorPrice=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.cachedFloorPrice&&e.hasOwnProperty("cachedFloorPrice")&&(i.cachedFloorPrice=t.json&&!isFinite(e.cachedFloorPrice)?String(e.cachedFloorPrice):e.cachedFloorPrice),e.bids&&e.bids.length){i.bids=[];for(var r=0;r<e.bids.length;++r)i.bids[r]=l.ProtoRtbBid.toObject(e.bids[r],t)}if(e.noBids&&e.noBids.length)for(i.noBids=[],r=0;r<e.noBids.length;++r)i.noBids[r]=l.ProtoRtbNoBid.toObject(e.noBids[r],t);return i},C.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},C),l.ConnatixNoBidReasonEnum=(r={},(i=Object.create(r))[r[0]="RequestException"]=0,i[r[1]="Timeout"]=1,i[r[2]="EmptyResponse"]=2,i[r[3]="InvalidResponse"]=3,i[r[4]="NoBid"]=4,i[r[5]="BidBelowFloor"]=5,i[r[6]="DealIdMismatch"]=6,i[r[7]="CsInvalidResponse"]=7,i[r[8]="CsRequestException"]=8,i[r[9]="CsEmptyResponse"]=9,i[r[11]="NoLibInPage"]=11,i),l.PartnerNoBidReasonEnum=(r={},(i=Object.create(r))[r[0]="Unknown"]=0,i[r[1]="TechnicalError"]=1,i[r[2]="InvalidRequest"]=2,i[r[3]="KnownWebSpider"]=3,i[r[4]="SuspectedNonHumanTraffic"]=4,i[r[5]="CloudIP"]=5,i[r[6]="UnsupportedDevice"]=6,i[r[7]="BlockedPublisher"]=7,i[r[8]="UnmatchedUser"]=8,i[r[9]="DailyReaderCapMet"]=9,i[r[10]="DailyDomainCapMet"]=10,i),l.ProtoSupplyChain=(O.prototype.businessDomain="",O.prototype.supplyChainId="",O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoSupplyChain;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.businessDomain=e.string();break;case 3:r.supplyChainId=e.string();break;default:e.skipType(7&s)}}return r},O.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.businessDomain="",i.supplyChainId=""),null!=e.businessDomain&&e.hasOwnProperty("businessDomain")&&(i.businessDomain=e.businessDomain),null!=e.supplyChainId&&e.hasOwnProperty("supplyChainId")&&(i.supplyChainId=e.supplyChainId),i},O),l.ProtoAdBlockDetectionTypeEnum=(r={},(i=Object.create(r))[r[0]="Banner"]=0,i[r[1]="Network"]=1,i),l.ProtoAdClickTrackingRequest=(A.prototype.trackingRequestMeta=null,A.prototype.mediaGuid="",A.prototype.publisherLineItemId="",A.prototype.advertiserLineItemId="",A.prototype.type=1,A.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(26).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(34).string(e.advertiserLineItemId),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(40).int32(e.type),t},A.fromObject=function(e){if(e instanceof l.ProtoAdClickTrackingRequest)return e;var t=new l.ProtoAdClickTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoAdClickTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),e.type){case"AdClick":case 1:t.type=1;break;case"AdClickThrough":case 2:t.type=2;break;case"AdSkipClick":case 3:t.type=3;break;case"VolumeClick":case 4:t.type=4;break;case"PauseClick":case 5:t.type=5;break;case"PlayClick":case 6:t.type=6;break;case"FullScreenClick":case 7:t.type=7;break;case"MuteClick":case 8:t.type=8;break;case"UnmuteClick":case 9:t.type=9}return t},A.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},A),l.ProtoAdClickTypeEnum=(r={},(i=Object.create(r))[r[1]="AdClick"]=1,i[r[2]="AdClickThrough"]=2,i[r[3]="AdSkipClick"]=3,i[r[4]="VolumeClick"]=4,i[r[5]="PauseClick"]=5,i[r[6]="PlayClick"]=6,i[r[7]="FullScreenClick"]=7,i[r[8]="MuteClick"]=8,i[r[9]="UnmuteClick"]=9,i),l.ProtoAdOpportunityRequest=(k.prototype.sessionId="",k.prototype.trackingRequestMeta=null,k.prototype.adBreak=0,k.encode=function(e,t){return t=t||n.create(),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(10).string(e.sessionId),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(18).fork()).ldelim(),null!=e.adBreak&&e.hasOwnProperty("adBreak")&&t.uint32(24).int32(e.adBreak),t},k.fromObject=function(e){if(e instanceof l.ProtoAdOpportunityRequest)return e;var t=new l.ProtoAdOpportunityRequest;if(null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoAdOpportunityRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(e.adBreak){case"None":case 0:t.adBreak=0;break;case"PreRoll":case 1:t.adBreak=1;break;case"MidRoll":case 2:t.adBreak=2;break;case"PostRoll":case 3:t.adBreak=3}return t},k.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},k),l.ProtoAdsourceTypeEnum=(r={},(i=Object.create(r))[r[0]="Unknown"]=0,i[r[1]="Vpaid"]=1,i[r[2]="VastMedia"]=2,i[r[3]="CnxMedia"]=3,i[r[4]="Jw"]=4,i[r[5]="Ima"]=5,i[r[6]="AOL"]=6,i),l.ProtoGdprConsentModeEnum=(r={},(i=Object.create(r))[r[0]="Unknown"]=0,i[r[1]="NoCmp"]=1,i[r[2]="NoConsent"]=2,i[r[3]="NoConnatixConsent"]=3,i[r[4]="NotAllDemandConsent"]=4,i[r[5]="AllGood"]=5,i),l.ProtoPrebid=(T.prototype.publisherLineItemId="",T.prototype.advertiserLineItemId="",T.prototype.syncedUser=!1,T.prototype.timeSpent=0,T.prototype.reason=0,T.prototype.rtbRequestNumber=0,T.prototype.partnerReason=0,T.prototype.requestedFloorPrice=0,T.prototype.partnerCustomHeaders="",T.prototype.prebidJsBidderName="",T.encode=function(e,t){return t=t||n.create(),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(10).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(32).int32(e.timeSpent),null!=e.reason&&e.hasOwnProperty("reason")&&t.uint32(40).int32(e.reason),null!=e.rtbRequestNumber&&e.hasOwnProperty("rtbRequestNumber")&&t.uint32(48).int32(e.rtbRequestNumber),null!=e.partnerReason&&e.hasOwnProperty("partnerReason")&&t.uint32(56).int32(e.partnerReason),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&t.uint32(65).double(e.requestedFloorPrice),null!=e.partnerCustomHeaders&&e.hasOwnProperty("partnerCustomHeaders")&&t.uint32(74).string(e.partnerCustomHeaders),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(98).string(e.prebidJsBidderName),t},T.fromObject=function(e){if(e instanceof l.ProtoPrebid)return e;var t=new l.ProtoPrebid;switch(null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),e.reason){case"RequestException":case 0:t.reason=0;break;case"Timeout":case 1:t.reason=1;break;case"EmptyResponse":case 2:t.reason=2;break;case"InvalidResponse":case 3:t.reason=3;break;case"NoBid":case 4:t.reason=4;break;case"BidBelowFloor":case 5:t.reason=5;break;case"DealIdMismatch":case 6:t.reason=6;break;case"CsInvalidResponse":case 7:t.reason=7;break;case"CsRequestException":case 8:t.reason=8;break;case"CsEmptyResponse":case 9:t.reason=9;break;case"NoLibInPage":case 11:t.reason=11}switch(null!=e.rtbRequestNumber&&(t.rtbRequestNumber=0|e.rtbRequestNumber),e.partnerReason){case"Unknown":case 0:t.partnerReason=0;break;case"TechnicalError":case 1:t.partnerReason=1;break;case"InvalidRequest":case 2:t.partnerReason=2;break;case"KnownWebSpider":case 3:t.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:t.partnerReason=4;break;case"CloudIP":case 5:t.partnerReason=5;break;case"UnsupportedDevice":case 6:t.partnerReason=6;break;case"BlockedPublisher":case 7:t.partnerReason=7;break;case"UnmatchedUser":case 8:t.partnerReason=8;break;case"DailyReaderCapMet":case 9:t.partnerReason=9;break;case"DailyDomainCapMet":case 10:t.partnerReason=10}return null!=e.requestedFloorPrice&&(t.requestedFloorPrice=Number(e.requestedFloorPrice)),null!=e.partnerCustomHeaders&&(t.partnerCustomHeaders=String(e.partnerCustomHeaders)),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),t},T.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},T),l.ProtoBid=(I.prototype.publisherLineItemId="",I.prototype.advertiserLineItemId="",I.prototype.syncedUser=!1,I.prototype.timeSpent=0,I.prototype.rtbRequestNumber=0,I.prototype.creativeId="",I.prototype.rtbSeatId="",I.prototype.rtbAdomain="",I.prototype.encryptedPrice="",I.prototype.requestedFloorPrice=0,I.prototype.prebidJsBidderName="",I.prototype.customClientPrice=0,I.prototype.dspId="",I.prototype.cnxBidId="",I.encode=function(e,t){return t=t||n.create(),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(10).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(32).int32(e.timeSpent),null!=e.rtbRequestNumber&&e.hasOwnProperty("rtbRequestNumber")&&t.uint32(40).int32(e.rtbRequestNumber),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(50).string(e.creativeId),null!=e.rtbSeatId&&e.hasOwnProperty("rtbSeatId")&&t.uint32(58).string(e.rtbSeatId),null!=e.rtbAdomain&&e.hasOwnProperty("rtbAdomain")&&t.uint32(66).string(e.rtbAdomain),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&t.uint32(74).string(e.encryptedPrice),null!=e.requestedFloorPrice&&e.hasOwnProperty("requestedFloorPrice")&&t.uint32(81).double(e.requestedFloorPrice),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(106).string(e.prebidJsBidderName),null!=e.customClientPrice&&e.hasOwnProperty("customClientPrice")&&t.uint32(113).double(e.customClientPrice),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(122).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(130).string(e.cnxBidId),t},I.fromObject=function(e){if(e instanceof l.ProtoBid)return e;var t=new l.ProtoBid;return null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),null!=e.rtbRequestNumber&&(t.rtbRequestNumber=0|e.rtbRequestNumber),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.rtbSeatId&&(t.rtbSeatId=String(e.rtbSeatId)),null!=e.rtbAdomain&&(t.rtbAdomain=String(e.rtbAdomain)),null!=e.encryptedPrice&&(t.encryptedPrice=String(e.encryptedPrice)),null!=e.requestedFloorPrice&&(t.requestedFloorPrice=Number(e.requestedFloorPrice)),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),null!=e.customClientPrice&&(t.customClientPrice=Number(e.customClientPrice)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),t},I.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},I),l.ProtoPostBid=(S.prototype.publisherLineItemId="",S.prototype.advertiserLineItemId="",S.prototype.syncedUser=!1,S.prototype.timeSpent=0,S.prototype.error="",S.prototype.loaded=!1,S.prototype.creativeId="",S.prototype.rtbSeatId="",S.prototype.rtbAdomain="",S.prototype.adsourceType=0,S.prototype.vastMediaType="",S.prototype.adPodSlotPosition=0,S.prototype.prebidJsBidderName="",S.prototype.dspId="",S.prototype.cnxBidId="",S.prototype.winToAdLoadedTime=0,S.encode=function(e,t){return t=t||n.create(),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(10).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(24).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(32).int32(e.timeSpent),null!=e.error&&e.hasOwnProperty("error")&&t.uint32(42).string(e.error),null!=e.loaded&&e.hasOwnProperty("loaded")&&t.uint32(48).bool(e.loaded),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(58).string(e.creativeId),null!=e.rtbSeatId&&e.hasOwnProperty("rtbSeatId")&&t.uint32(66).string(e.rtbSeatId),null!=e.rtbAdomain&&e.hasOwnProperty("rtbAdomain")&&t.uint32(74).string(e.rtbAdomain),null!=e.adsourceType&&e.hasOwnProperty("adsourceType")&&t.uint32(80).int32(e.adsourceType),null!=e.vastMediaType&&e.hasOwnProperty("vastMediaType")&&t.uint32(90).string(e.vastMediaType),null!=e.adPodSlotPosition&&e.hasOwnProperty("adPodSlotPosition")&&t.uint32(96).int32(e.adPodSlotPosition),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(106).string(e.prebidJsBidderName),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(114).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(122).string(e.cnxBidId),null!=e.winToAdLoadedTime&&e.hasOwnProperty("winToAdLoadedTime")&&t.uint32(128).int32(e.winToAdLoadedTime),t},S.fromObject=function(e){if(e instanceof l.ProtoPostBid)return e;var t=new l.ProtoPostBid;switch(null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),null!=e.error&&(t.error=String(e.error)),null!=e.loaded&&(t.loaded=Boolean(e.loaded)),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.rtbSeatId&&(t.rtbSeatId=String(e.rtbSeatId)),null!=e.rtbAdomain&&(t.rtbAdomain=String(e.rtbAdomain)),e.adsourceType){case"Unknown":case 0:t.adsourceType=0;break;case"Vpaid":case 1:t.adsourceType=1;break;case"VastMedia":case 2:t.adsourceType=2;break;case"CnxMedia":case 3:t.adsourceType=3;break;case"Jw":case 4:t.adsourceType=4;break;case"Ima":case 5:t.adsourceType=5;break;case"AOL":case 6:t.adsourceType=6}return null!=e.vastMediaType&&(t.vastMediaType=String(e.vastMediaType)),null!=e.adPodSlotPosition&&(t.adPodSlotPosition=0|e.adPodSlotPosition),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),null!=e.winToAdLoadedTime&&(t.winToAdLoadedTime=0|e.winToAdLoadedTime),t},S.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},S),l.ProtoBidTrackingsRequest=(P.prototype.trackingRequestMeta=null,P.prototype.mediaGuid="",P.prototype.prebids=a.emptyArray,P.prototype.bids=a.emptyArray,P.prototype.postBids=a.emptyArray,P.prototype.logEveryting=!1,P.prototype.hasGdprConsentPayload=!1,P.prototype.gdprConsentMode=0,P.prototype.useExploration=!1,P.encode=function(e,t){if(t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.prebids&&e.prebids.length)for(var i=0;i<e.prebids.length;++i)l.ProtoPrebid.encode(e.prebids[i],t.uint32(34).fork()).ldelim();if(null!=e.bids&&e.bids.length)for(i=0;i<e.bids.length;++i)l.ProtoBid.encode(e.bids[i],t.uint32(42).fork()).ldelim();if(null!=e.postBids&&e.postBids.length)for(i=0;i<e.postBids.length;++i)l.ProtoPostBid.encode(e.postBids[i],t.uint32(50).fork()).ldelim();return null!=e.logEveryting&&e.hasOwnProperty("logEveryting")&&t.uint32(56).bool(e.logEveryting),null!=e.hasGdprConsentPayload&&e.hasOwnProperty("hasGdprConsentPayload")&&t.uint32(80).bool(e.hasGdprConsentPayload),null!=e.gdprConsentMode&&e.hasOwnProperty("gdprConsentMode")&&t.uint32(88).int32(e.gdprConsentMode),null!=e.useExploration&&e.hasOwnProperty("useExploration")&&t.uint32(96).bool(e.useExploration),t},P.fromObject=function(e){if(e instanceof l.ProtoBidTrackingsRequest)return e;var t=new l.ProtoBidTrackingsRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoBidTrackingsRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}if(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),e.prebids){if(!Array.isArray(e.prebids))throw TypeError(".ProtoBidTrackingsRequest.prebids: array expected");t.prebids=[];for(var i=0;i<e.prebids.length;++i){if("object"!=typeof e.prebids[i])throw TypeError(".ProtoBidTrackingsRequest.prebids: object expected");t.prebids[i]=l.ProtoPrebid.fromObject(e.prebids[i])}}if(e.bids){if(!Array.isArray(e.bids))throw TypeError(".ProtoBidTrackingsRequest.bids: array expected");for(t.bids=[],i=0;i<e.bids.length;++i){if("object"!=typeof e.bids[i])throw TypeError(".ProtoBidTrackingsRequest.bids: object expected");t.bids[i]=l.ProtoBid.fromObject(e.bids[i])}}if(e.postBids){if(!Array.isArray(e.postBids))throw TypeError(".ProtoBidTrackingsRequest.postBids: array expected");for(t.postBids=[],i=0;i<e.postBids.length;++i){if("object"!=typeof e.postBids[i])throw TypeError(".ProtoBidTrackingsRequest.postBids: object expected");t.postBids[i]=l.ProtoPostBid.fromObject(e.postBids[i])}}switch(null!=e.logEveryting&&(t.logEveryting=Boolean(e.logEveryting)),null!=e.hasGdprConsentPayload&&(t.hasGdprConsentPayload=Boolean(e.hasGdprConsentPayload)),e.gdprConsentMode){case"Unknown":case 0:t.gdprConsentMode=0;break;case"NoCmp":case 1:t.gdprConsentMode=1;break;case"NoConsent":case 2:t.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:t.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:t.gdprConsentMode=4;break;case"AllGood":case 5:t.gdprConsentMode=5}return null!=e.useExploration&&(t.useExploration=Boolean(e.useExploration)),t},P.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},P),l.ProtoHeavyAdBlockTypeEnum=(r={},(i=Object.create(r))[r[0]="Global"]=0,i[r[1]="Script"]=1,i[r[2]="VpaidIframe"]=2,i[r[3]="OverlayIframe"]=3,i),l.ProtoHeavyAdTrackingRequest=(v.prototype.trackingRequestMeta=null,v.prototype.advertiserLineItemId="",v.prototype.heavyAdBlockTypeEnum=0,v.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(18).string(e.advertiserLineItemId),null!=e.heavyAdBlockTypeEnum&&e.hasOwnProperty("heavyAdBlockTypeEnum")&&t.uint32(24).int32(e.heavyAdBlockTypeEnum),t},v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoHeavyAdTrackingRequest;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.trackingRequestMeta=l.MetadataModel.decode(e,e.uint32());break;case 2:r.advertiserLineItemId=e.string();break;case 3:r.heavyAdBlockTypeEnum=e.int32();break;default:e.skipType(7&s)}}return r},v.fromObject=function(e){if(e instanceof l.ProtoHeavyAdTrackingRequest)return e;var t=new l.ProtoHeavyAdTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoHeavyAdTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),e.heavyAdBlockTypeEnum){case"Global":case 0:t.heavyAdBlockTypeEnum=0;break;case"Script":case 1:t.heavyAdBlockTypeEnum=1;break;case"VpaidIframe":case 2:t.heavyAdBlockTypeEnum=2;break;case"OverlayIframe":case 3:t.heavyAdBlockTypeEnum=3}return t},v.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.trackingRequestMeta=null,i.advertiserLineItemId="",i.heavyAdBlockTypeEnum=t.enums===String?"Global":0),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&(i.trackingRequestMeta=l.MetadataModel.toObject(e.trackingRequestMeta,t)),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.heavyAdBlockTypeEnum&&e.hasOwnProperty("heavyAdBlockTypeEnum")&&(i.heavyAdBlockTypeEnum=t.enums===String?l.ProtoHeavyAdBlockTypeEnum[e.heavyAdBlockTypeEnum]:e.heavyAdBlockTypeEnum),i},v.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},v),l.ProtoMediaClickTrackingRequest=(b.prototype.trackingRequestMeta=null,b.prototype.mediaGuid="",b.prototype.type=0,b.prototype.clickUrl="",b.prototype.slideTitle="",b.prototype.slideNumber=0,b.prototype.slideMediaType=0,b.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(24).int32(e.type),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&t.uint32(34).string(e.clickUrl),null!=e.slideTitle&&e.hasOwnProperty("slideTitle")&&t.uint32(42).string(e.slideTitle),null!=e.slideNumber&&e.hasOwnProperty("slideNumber")&&t.uint32(48).int32(e.slideNumber),null!=e.slideMediaType&&e.hasOwnProperty("slideMediaType")&&t.uint32(56).int32(e.slideMediaType),t},b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoMediaClickTrackingRequest;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.trackingRequestMeta=l.MetadataModel.decode(e,e.uint32());break;case 2:r.mediaGuid=e.string();break;case 3:r.type=e.int32();break;case 4:r.clickUrl=e.string();break;case 5:r.slideTitle=e.string();break;case 6:r.slideNumber=e.int32();break;case 7:r.slideMediaType=e.int32();break;default:e.skipType(7&s)}}return r},b.fromObject=function(e){if(e instanceof l.ProtoMediaClickTrackingRequest)return e;var t=new l.ProtoMediaClickTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoMediaClickTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),e.type){case"Click":case 0:t.type=0;break;case"UrlClick":case 1:t.type=1;break;case"VolumeClick":case 2:t.type=2;break;case"PlayClick":case 3:t.type=3;break;case"PauseClick":case 4:t.type=4;break;case"NextClick":case 5:t.type=5;break;case"PreviousClick":case 6:t.type=6;break;case"MuteClick":case 7:t.type=7;break;case"UnmuteClick":case 8:t.type=8;break;case"CloseClick":case 9:t.type=9;break;case"ScrollClick":case 10:t.type=10;break;case"GalleryClick":case 11:t.type=11;break;case"SubtitleClick":case 12:t.type=12;break;case"FullScreenClick":case 13:t.type=13;break;case"ExitFullScreenClick":case 14:t.type=14}switch(null!=e.clickUrl&&(t.clickUrl=String(e.clickUrl)),null!=e.slideTitle&&(t.slideTitle=String(e.slideTitle)),null!=e.slideNumber&&(t.slideNumber=0|e.slideNumber),e.slideMediaType){case"Image":case 0:t.slideMediaType=0;break;case"Video":case 1:t.slideMediaType=1}return t},b.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.trackingRequestMeta=null,i.mediaGuid="",i.type=t.enums===String?"Click":0,i.clickUrl="",i.slideTitle="",i.slideNumber=0,i.slideMediaType=t.enums===String?"Image":0),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&(i.trackingRequestMeta=l.MetadataModel.toObject(e.trackingRequestMeta,t)),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&(i.mediaGuid=e.mediaGuid),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoMediaClickTypeEnum[e.type]:e.type),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&(i.clickUrl=e.clickUrl),null!=e.slideTitle&&e.hasOwnProperty("slideTitle")&&(i.slideTitle=e.slideTitle),null!=e.slideNumber&&e.hasOwnProperty("slideNumber")&&(i.slideNumber=e.slideNumber),null!=e.slideMediaType&&e.hasOwnProperty("slideMediaType")&&(i.slideMediaType=t.enums===String?l.ProtoMediaTypeEnum[e.slideMediaType]:e.slideMediaType),i},b.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},b),l.ProtoMediaClickTypeEnum=(r={},(i=Object.create(r))[r[0]="Click"]=0,i[r[1]="UrlClick"]=1,i[r[2]="VolumeClick"]=2,i[r[3]="PlayClick"]=3,i[r[4]="PauseClick"]=4,i[r[5]="NextClick"]=5,i[r[6]="PreviousClick"]=6,i[r[7]="MuteClick"]=7,i[r[8]="UnmuteClick"]=8,i[r[9]="CloseClick"]=9,i[r[10]="ScrollClick"]=10,i[r[11]="GalleryClick"]=11,i[r[12]="SubtitleClick"]=12,i[r[13]="FullScreenClick"]=13,i[r[14]="ExitFullScreenClick"]=14,i),l.ProtoMediaTrackingRequest=(y.prototype.trackingRequestMeta=null,y.prototype.mediaGuid="",y.prototype.quartile=0,y.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(18).string(e.mediaGuid),null!=e.quartile&&e.hasOwnProperty("quartile")&&t.uint32(32).int32(e.quartile),t},y.fromObject=function(e){if(e instanceof l.ProtoMediaTrackingRequest)return e;var t=new l.ProtoMediaTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoMediaTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),e.quartile){case"Start":case 0:t.quartile=0;break;case"First":case 1:t.quartile=1;break;case"Second":case 2:t.quartile=2;break;case"Third":case 3:t.quartile=3;break;case"Fourth":case 4:t.quartile=4}return t},y.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},y),l.ProtoQuartilesEnum=(r={},(i=Object.create(r))[r[0]="Start"]=0,i[r[1]="First"]=1,i[r[2]="Second"]=2,i[r[3]="Third"]=3,i[r[4]="Fourth"]=4,i),l.ProtoSessionAdBlockerRequest=(f.prototype.trackingRequestMeta=null,f.prototype.adBlockDetectionType=0,f.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.adBlockDetectionType&&e.hasOwnProperty("adBlockDetectionType")&&t.uint32(16).int32(e.adBlockDetectionType),t},f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoSessionAdBlockerRequest;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.trackingRequestMeta=l.MetadataModel.decode(e,e.uint32());break;case 2:r.adBlockDetectionType=e.int32();break;default:e.skipType(7&s)}}return r},f.fromObject=function(e){if(e instanceof l.ProtoSessionAdBlockerRequest)return e;var t=new l.ProtoSessionAdBlockerRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoSessionAdBlockerRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(e.adBlockDetectionType){case"Banner":case 0:t.adBlockDetectionType=0;break;case"Network":case 1:t.adBlockDetectionType=1}return t},f.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.trackingRequestMeta=null,i.adBlockDetectionType=t.enums===String?"Banner":0),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&(i.trackingRequestMeta=l.MetadataModel.toObject(e.trackingRequestMeta,t)),null!=e.adBlockDetectionType&&e.hasOwnProperty("adBlockDetectionType")&&(i.adBlockDetectionType=t.enums===String?l.ProtoAdBlockDetectionTypeEnum[e.adBlockDetectionType]:e.adBlockDetectionType),i},f.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},f),l.ProtoSessionTimeTrackingRequest=(m.prototype.trackingRequestMeta=null,m.prototype.timePlayed=0,m.prototype.timePlayedInView=0,m.prototype.sessionTime=0,m.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.timePlayed&&e.hasOwnProperty("timePlayed")&&t.uint32(16).int32(e.timePlayed),null!=e.timePlayedInView&&e.hasOwnProperty("timePlayedInView")&&t.uint32(24).int32(e.timePlayedInView),null!=e.sessionTime&&e.hasOwnProperty("sessionTime")&&t.uint32(32).int32(e.sessionTime),t},m.fromObject=function(e){if(e instanceof l.ProtoSessionTimeTrackingRequest)return e;var t=new l.ProtoSessionTimeTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoSessionTimeTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}return null!=e.timePlayed&&(t.timePlayed=0|e.timePlayed),null!=e.timePlayedInView&&(t.timePlayedInView=0|e.timePlayedInView),null!=e.sessionTime&&(t.sessionTime=0|e.sessionTime),t},m.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},m),l.ProtoTrackingRequest=(g.prototype.trackingRequestMeta=null,g.prototype.hasAdBlocker=!1,g.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.hasAdBlocker&&e.hasOwnProperty("hasAdBlocker")&&t.uint32(32).bool(e.hasAdBlocker),t},g.fromObject=function(e){if(e instanceof l.ProtoTrackingRequest)return e;var t=new l.ProtoTrackingRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoTrackingRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}return null!=e.hasAdBlocker&&(t.hasAdBlocker=Boolean(e.hasAdBlocker)),t},g.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},g),l.ProtoTrackingResponse=(p.prototype.errorMessage="",p.prototype.platformCappedLineItemIdList=a.emptyArray,p.prototype.impressionRevenue=0,p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoTrackingResponse;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.errorMessage=e.string();break;case 2:r.platformCappedLineItemIdList&&r.platformCappedLineItemIdList.length||(r.platformCappedLineItemIdList=[]),r.platformCappedLineItemIdList.push(e.string());break;case 3:r.impressionRevenue=e.double();break;default:e.skipType(7&s)}}return r},p.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.platformCappedLineItemIdList=[]),t.defaults&&(i.errorMessage="",i.impressionRevenue=0),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(i.errorMessage=e.errorMessage),e.platformCappedLineItemIdList&&e.platformCappedLineItemIdList.length){i.platformCappedLineItemIdList=[];for(var r=0;r<e.platformCappedLineItemIdList.length;++r)i.platformCappedLineItemIdList[r]=e.platformCappedLineItemIdList[r]}return null!=e.impressionRevenue&&e.hasOwnProperty("impressionRevenue")&&(i.impressionRevenue=t.json&&!isFinite(e.impressionRevenue)?String(e.impressionRevenue):e.impressionRevenue),i},p),l.ProtoVideoAdImpressionRequest=(u.prototype.trackingRequestMeta=null,u.prototype.mediaGuid="",u.prototype.publisherLineItemId="",u.prototype.advertiserLineItemId="",u.prototype.syncedUser=!1,u.prototype.timeSpent=0,u.prototype.encryptedPrice="",u.prototype.creativeId="",u.prototype.rtbSeatId="",u.prototype.rtbAdomain="",u.prototype.customClientPrice=0,u.prototype.adsourceType=0,u.prototype.vastMediaType="",u.prototype.adPodSlotPosition=0,u.prototype.prebidJsBidderName="",u.prototype.dspId="",u.prototype.cnxBidId="",u.prototype.winToAdLoadedTime=0,u.prototype.startAdToImpressionTime=0,u.prototype.declaredDuration=0,u.prototype.impressionDuration=0,u.prototype.useExploration=!1,u.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(26).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(50).string(e.advertiserLineItemId),null!=e.syncedUser&&e.hasOwnProperty("syncedUser")&&t.uint32(56).bool(e.syncedUser),null!=e.timeSpent&&e.hasOwnProperty("timeSpent")&&t.uint32(64).int32(e.timeSpent),null!=e.encryptedPrice&&e.hasOwnProperty("encryptedPrice")&&t.uint32(74).string(e.encryptedPrice),null!=e.creativeId&&e.hasOwnProperty("creativeId")&&t.uint32(82).string(e.creativeId),null!=e.rtbSeatId&&e.hasOwnProperty("rtbSeatId")&&t.uint32(90).string(e.rtbSeatId),null!=e.rtbAdomain&&e.hasOwnProperty("rtbAdomain")&&t.uint32(98).string(e.rtbAdomain),null!=e.customClientPrice&&e.hasOwnProperty("customClientPrice")&&t.uint32(105).double(e.customClientPrice),null!=e.adsourceType&&e.hasOwnProperty("adsourceType")&&t.uint32(112).int32(e.adsourceType),null!=e.vastMediaType&&e.hasOwnProperty("vastMediaType")&&t.uint32(122).string(e.vastMediaType),null!=e.adPodSlotPosition&&e.hasOwnProperty("adPodSlotPosition")&&t.uint32(144).int32(e.adPodSlotPosition),null!=e.prebidJsBidderName&&e.hasOwnProperty("prebidJsBidderName")&&t.uint32(154).string(e.prebidJsBidderName),null!=e.dspId&&e.hasOwnProperty("dspId")&&t.uint32(162).string(e.dspId),null!=e.cnxBidId&&e.hasOwnProperty("cnxBidId")&&t.uint32(170).string(e.cnxBidId),null!=e.winToAdLoadedTime&&e.hasOwnProperty("winToAdLoadedTime")&&t.uint32(176).int32(e.winToAdLoadedTime),null!=e.startAdToImpressionTime&&e.hasOwnProperty("startAdToImpressionTime")&&t.uint32(184).int32(e.startAdToImpressionTime),null!=e.declaredDuration&&e.hasOwnProperty("declaredDuration")&&t.uint32(193).double(e.declaredDuration),null!=e.impressionDuration&&e.hasOwnProperty("impressionDuration")&&t.uint32(201).double(e.impressionDuration),null!=e.useExploration&&e.hasOwnProperty("useExploration")&&t.uint32(208).bool(e.useExploration),t},u.fromObject=function(e){if(e instanceof l.ProtoVideoAdImpressionRequest)return e;var t=new l.ProtoVideoAdImpressionRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),null!=e.syncedUser&&(t.syncedUser=Boolean(e.syncedUser)),null!=e.timeSpent&&(t.timeSpent=0|e.timeSpent),null!=e.encryptedPrice&&(t.encryptedPrice=String(e.encryptedPrice)),null!=e.creativeId&&(t.creativeId=String(e.creativeId)),null!=e.rtbSeatId&&(t.rtbSeatId=String(e.rtbSeatId)),null!=e.rtbAdomain&&(t.rtbAdomain=String(e.rtbAdomain)),null!=e.customClientPrice&&(t.customClientPrice=Number(e.customClientPrice)),e.adsourceType){case"Unknown":case 0:t.adsourceType=0;break;case"Vpaid":case 1:t.adsourceType=1;break;case"VastMedia":case 2:t.adsourceType=2;break;case"CnxMedia":case 3:t.adsourceType=3;break;case"Jw":case 4:t.adsourceType=4;break;case"Ima":case 5:t.adsourceType=5;break;case"AOL":case 6:t.adsourceType=6}return null!=e.vastMediaType&&(t.vastMediaType=String(e.vastMediaType)),null!=e.adPodSlotPosition&&(t.adPodSlotPosition=0|e.adPodSlotPosition),null!=e.prebidJsBidderName&&(t.prebidJsBidderName=String(e.prebidJsBidderName)),null!=e.dspId&&(t.dspId=String(e.dspId)),null!=e.cnxBidId&&(t.cnxBidId=String(e.cnxBidId)),null!=e.winToAdLoadedTime&&(t.winToAdLoadedTime=0|e.winToAdLoadedTime),null!=e.startAdToImpressionTime&&(t.startAdToImpressionTime=0|e.startAdToImpressionTime),null!=e.declaredDuration&&(t.declaredDuration=Number(e.declaredDuration)),null!=e.impressionDuration&&(t.impressionDuration=Number(e.impressionDuration)),null!=e.useExploration&&(t.useExploration=Boolean(e.useExploration)),t},u.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},u),l.ProtoVideoAdImpressionViewableRequest=(h.prototype.trackingRequestMeta=null,h.prototype.mediaGuid="",h.prototype.publisherLineItemId="",h.prototype.advertiserLineItemId="",h.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(26).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(50).string(e.advertiserLineItemId),t},h.fromObject=function(e){if(e instanceof l.ProtoVideoAdImpressionViewableRequest)return e;var t=new l.ProtoVideoAdImpressionViewableRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionViewableRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}return null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),t},h.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},h),l.ProtoVideoAdQuartilesRequest=(c.prototype.trackingRequestMeta=null,c.prototype.mediaGuid="",c.prototype.publisherLineItemId="",c.prototype.advertiserLineItemId="",c.prototype.quartile=0,c.encode=function(e,t){return t=t||n.create(),null!=e.trackingRequestMeta&&e.hasOwnProperty("trackingRequestMeta")&&l.MetadataModel.encode(e.trackingRequestMeta,t.uint32(10).fork()).ldelim(),null!=e.mediaGuid&&e.hasOwnProperty("mediaGuid")&&t.uint32(26).string(e.mediaGuid),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&t.uint32(42).string(e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&t.uint32(50).string(e.advertiserLineItemId),null!=e.quartile&&e.hasOwnProperty("quartile")&&t.uint32(56).int32(e.quartile),t},c.fromObject=function(e){if(e instanceof l.ProtoVideoAdQuartilesRequest)return e;var t=new l.ProtoVideoAdQuartilesRequest;if(null!=e.trackingRequestMeta){if("object"!=typeof e.trackingRequestMeta)throw TypeError(".ProtoVideoAdQuartilesRequest.trackingRequestMeta: object expected");t.trackingRequestMeta=l.MetadataModel.fromObject(e.trackingRequestMeta)}switch(null!=e.mediaGuid&&(t.mediaGuid=String(e.mediaGuid)),null!=e.publisherLineItemId&&(t.publisherLineItemId=String(e.publisherLineItemId)),null!=e.advertiserLineItemId&&(t.advertiserLineItemId=String(e.advertiserLineItemId)),e.quartile){case"Start":case 0:t.quartile=0;break;case"First":case 1:t.quartile=1;break;case"Second":case 2:t.quartile=2;break;case"Third":case 3:t.quartile=3;break;case"Fourth":case 4:t.quartile=4}return t},c.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},c),l.ProtoUserSyncRequest=(d.prototype.userId="",d.prototype.demandPartner=0,d.prototype.demandPartnerUserId="",d.encode=function(e,t){return t=t||n.create(),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(10).string(e.userId),null!=e.demandPartner&&e.hasOwnProperty("demandPartner")&&t.uint32(16).int32(e.demandPartner),null!=e.demandPartnerUserId&&e.hasOwnProperty("demandPartnerUserId")&&t.uint32(26).string(e.demandPartnerUserId),t},d.fromObject=function(e){if(e instanceof l.ProtoUserSyncRequest)return e;var t=new l.ProtoUserSyncRequest;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.demandPartner&&(t.demandPartner=0|e.demandPartner),null!=e.demandPartnerUserId&&(t.demandPartnerUserId=String(e.demandPartnerUserId)),t},d.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},d),e.exports=l},function(e,t,i){"use strict";function r(e){return"string"==typeof e}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return s(e)&&0<e}function o(e){return r(e)&&0<e.length}function a(e){return void 0!==e}function l(e){return"function"==typeof e}function d(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function c(e){try{if(e.contentWindow||e.contentDocument)return!0}catch(e){}return!1}i.d(t,"g",function(){return r}),i.d(t,"d",function(){return s}),i.d(t,"e",function(){return n}),i.d(t,"h",function(){return o}),i.d(t,"a",function(){return a}),i.d(t,"b",function(){return l}),i.d(t,"f",function(){return d}),i.d(t,"c",function(){return c})},function(e,t,i){"use strict";i.d(t,"v",function(){return p}),i.d(t,"R",function(){return g}),i.d(t,"Q",function(){return m}),i.d(t,"N",function(){return f}),i.d(t,"M",function(){return y}),i.d(t,"B",function(){return b}),i.d(t,"A",function(){return v}),i.d(t,"z",function(){return P}),i.d(t,"a",function(){return S}),i.d(t,"L",function(){return I}),i.d(t,"u",function(){return T}),i.d(t,"U",function(){return k}),i.d(t,"O",function(){return A}),i.d(t,"m",function(){return O}),i.d(t,"l",function(){return C}),i.d(t,"n",function(){return w}),i.d(t,"b",function(){return x}),i.d(t,"c",function(){return E}),i.d(t,"f",function(){return L}),i.d(t,"V",function(){return R}),i.d(t,"o",function(){return M}),i.d(t,"i",function(){return B}),i.d(t,"P",function(){return j}),i.d(t,"e",function(){return D}),i.d(t,"q",function(){return F}),i.d(t,"j",function(){return N}),i.d(t,"t",function(){return U}),i.d(t,"d",function(){return V}),i.d(t,"y",function(){return q}),i.d(t,"x",function(){return H}),i.d(t,"w",function(){return W}),i.d(t,"k",function(){return G}),i.d(t,"h",function(){return z}),i.d(t,"g",function(){return J}),i.d(t,"E",function(){return Q}),i.d(t,"J",function(){return Y}),i.d(t,"T",function(){return X}),i.d(t,"D",function(){return K}),i.d(t,"s",function(){return Z}),i.d(t,"r",function(){return ee}),i.d(t,"K",function(){return te}),i.d(t,"F",function(){return ie}),i.d(t,"W",function(){return re}),i.d(t,"p",function(){return se}),i.d(t,"G",function(){return ne}),i.d(t,"S",function(){return oe}),i.d(t,"H",function(){return ae}),i.d(t,"C",function(){return le}),i.d(t,"I",function(){return de});var r=i(24),l=i(1),n=i(6),s=i(3),o=i(7),d=i(0),c=i(5);function a(e,t){e&&(e.style.display=t?"":"none")}function h(e,t){if(Object(l.a)(e.classList))return e.classList.add(t),0;t=`${e.getAttribute("class")} ${t}`;e.setAttribute("class",t)}function u(e,t){if(Object(l.a)(e.classList))return e.classList.remove(t),0;t=e.getAttribute("class").replace(t,"");e.setAttribute("class",t)}function p(e){a(e,!1)}function g(e){a(e,!0)}function m(e,t){for(const i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}function f(t,...e){e.forEach(e=>{t.style[e]=""})}function y(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,i,r,s){if(t)try{const n=i.document.createElement("link");return n.id=e.id,n.type="text/css",n.rel="stylesheet",n.href=e.src,Object(l.b)(r)&&(n.onload=()=>{r()}),Object(l.b)(s)&&(n.onerror=e=>{t.removeChild(n),Object(l.g)(e)?s(`link_stylesheet_load_error_${e}`):s(`link_stylesheet_load_error_${function(e,t){const i=e.document.createElement("div");return i.appendChild(t),i.innerHTML}(i,n)}`)}),t.appendChild(n),n}catch(e){return null}}function v(t,i,e,r,s,n=!0,o){try{const a=e.document.createElement("script");return a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),Object(l.b)(r)&&(a.onload=()=>{r()}),a.onerror=e=>{i.removeChild(a),n&&Object(c.a)({message:o,exception:"script_load_error",callStack:t.src,level:d.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1}),Object(l.b)(s)&&s()},i.appendChild(a),a}catch(i){return n&&Object(c.a)({message:o,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:d.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),Object(l.b)(s)&&s(),null}}function P(e,t,i){if(e)try{const r=t.document.createElement("script"),s=t.document.createTextNode(i);return r.appendChild(s),e.appendChild(r),r}catch(e){return null}}function S(t,...e){t&&e.forEach(e=>{Object(l.h)(e)&&h(t,e)})}function I(t,...e){t&&e.forEach(e=>{Object(l.h)(e)&&u(t,e)})}function T(e,t){return e&&e.classList.contains(t)}function k(e,t,i){return!!e&&(Object(l.a)(i)?i?(S(e,t),!0):(I(e,t),!1):e.classList.toggle(t))}function A(e,t,i,r=!1){e&&(u(e,t),r&&B(e),h(e,i))}const O=(e,t)=>t.document.getElementById(e),C=(e,t,i)=>t.getComputedStyle(e,i),w=(e,t)=>t.document.getElementsByClassName(e);function x(e,t="",i){const r=i.document.getElementsByTagName("head")[0],s=i.document.createElement("style");s.setAttribute("type","text/css"),s.id=t,s.styleSheet?s.styleSheet.cssText=e:s.appendChild(i.document.createTextNode(e)),r.appendChild(s)}function E(e,t){const i=t.document.getElementsByTagName("head")[0],r=t.document.createElement("link");r.setAttribute("rel","preconnect"),r.setAttribute("link",e),i.appendChild(r)}function L(e,t){const i=t.document.createElement("div");return i.innerHTML=e,i.firstElementChild}function R(e,t){0<t?(e.removeAttribute("muted"),e.muted=!1):(e.setAttribute("muted",""),e.muted=!0)}function M(t){return r.b.find(e=>{if(e.keys.fullscreenEnabled in t)return!0})}function B(e){e.getBoundingClientRect()}function j(e,t){return(e.requestAnimationFrame||e.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)})(t)}function D(e,t){return(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||function(e){return clearTimeout(e)})(t)}function _(e,t,i){t=(t=function(e,i){let t=i;for(;t;){const i=t.parentNode;if(i){const t=e.reduce((e,t)=>e||i.querySelector(t),null);if(t)return t}t=i}return null}(e,t))?C(t,U(t)):null;return t?t.getPropertyValue(i):null}function F(e){return _(["h1","h2"],e,"font-family")||"inherit"}function N(e){return _(["p"],e,"font-family")||"inherit"}function U(e){try{return e.ownerDocument.defaultView}catch(e){return null}}function V(e,t){e&&t&&(Array.isArray(e)?e.forEach(e=>t.appendChild(e)):t.appendChild(e))}function q(t,e,i){let r=!1;var s=Object(n.c)(e.children);for(let e=0;e<s.length;e++)if(i-1===e||0===i){r=!0,Array.isArray(t)?H(s[e],...t):H(s[e],t);break}r||V(t,e)}function H(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function W(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function G(e,t){return Object(n.c)(t.children).indexOf(e)}function $(e){var t=U(e);t&&(t=C(e,t)["display"],"none"===t&&(e.style.display="block"))}function z(t,i=()=>{}){function r(e){"opacity"===e.propertyName&&(I(t,s.n.FadeOutBase,s.n.FadeOut),i(),t.removeEventListener("transitionend",r))}S(t,s.n.FadeOutBase),$(t),B(t),t.addEventListener("transitionend",r),S(t,s.n.FadeOut)}function J(t,i=()=>{}){function r(e){"opacity"===e.propertyName&&(I(t,s.n.FadeInBase,s.n.FadeIn),i(),t.removeEventListener("transitionend",r))}S(t,s.n.FadeInBase),$(t),B(t),t.addEventListener("transitionend",r),S(t,s.n.FadeIn)}function Q(e){var t=U(e);if(!t)return!0;var{display:e,opacity:t}=C(e,t);return"none"===e||"0"===t}function Y(e,t){return null===e.firstChild?e.appendChild(t):e.insertBefore(t,e.firstChild)}function X(e,t){const i=t.document.createElement("div");return i.innerHTML=e||"",i.innerText}function K(){var e=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===e||"yes"===e}function Z(e,t){e=Object(o.f)(e).topFrame;return e[t]?e:null}function ee(e,t){let i=e,r=null;try{for(;!r;){try{i.frames[t]&&(r=i)}catch(e){}if(!e.top||e.top===i)break;i=i.parent}}catch(e){}return r}function te(e,t){let i=[];try{i=i.slice.call(t.document.querySelectorAll(e),0)}catch(e){}return i}function ie(e){return-1!==Object(o.f)(e).topFrame.location.protocol.indexOf("https")}function re(e){ie(e)&&[window,e].forEach(e=>{if(null===e.document.querySelector("meta[content=upgrade-insecure-requests]")){const t=e.document.createElement("meta");t.setAttribute("http-equiv","Content-Security-Policy"),t.content="upgrade-insecure-requests",e.document.head.appendChild(t)}})}function se(e){return Object(o.f)(e).topFrame.document.referrer}function ne(e,t){t=Object(o.f)(t).topFrame.location.hostname,e=Object(o.g)(e);return e&&e.hostname===t}function oe(e){e.removeAttribute("href"),e.removeAttribute("target"),e.removeAttribute("download"),e.removeAttribute("ping"),e.removeAttribute("rel"),e.removeAttribute("media"),e.removeAttribute("hreflang"),e.removeAttribute("type")}function ae(e,i){try{e.onclick=e=>{var{tagName:t,className:e}=e.target;Object(c.a)({message:`${i} - click on tag:${t} class:${e}`,level:d.ProtoLoggingLevelEnum.INFO})}}catch(e){Object(c.a)({message:`${i}_Error - iframe click`,level:d.ProtoLoggingLevelEnum.WARNING,callStack:e.stack})}}function le(e){e.currentTime=e.currentTime+.01}function de(e,t){!function(e,t){const i=e.document.createElement("link");i.rel="preload",i.href=t,i.as="script",e.document.head.appendChild(i)}(t,e)}},function(e,t,i){"use strict";var r,s,n,o,a,l,d,c,h,u,p,g,m;i.d(t,"h",function(){return r}),i.d(t,"g",function(){return s}),i.d(t,"j",function(){return n}),i.d(t,"t",function(){return f}),i.d(t,"p",function(){return y}),i.d(t,"i",function(){return o}),i.d(t,"k",function(){return a}),i.d(t,"f",function(){return l}),i.d(t,"m",function(){return d}),i.d(t,"l",function(){return c}),i.d(t,"e",function(){return h}),i.d(t,"o",function(){return u}),i.d(t,"n",function(){return b}),i.d(t,"r",function(){return p}),i.d(t,"s",function(){return g}),i.d(t,"b",function(){return v}),i.d(t,"c",function(){return P}),i.d(t,"d",function(){return S}),i.d(t,"q",function(){return I}),i.d(t,"a",function(){return T}),(t=r=r||{}).Invisible="cnx-mod-invisible",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none",(t=s=s||{}).Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.CanClose="cnx-in-can-close",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.AlwaysOn="cnx-ui-always-on",t.PodLoadingScreen="cnx-in-pod-loading",t.UiInView="cnx-ui-in-view",(t=n=n||{}).Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended";const f={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},y={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};(t=o=o||{}).Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed",(t=a=a||{}).ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container",(t=l=l||{}).Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill",(t=d=d||{}).InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family",(t=c=c||{}).Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF",(h=h||{}).CaptionContainer="cnx-captions-text-holder",(t=u=u||{}).MainClass="cnx-float",t.TransitionClass="cnx-float-transition";const b={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};(t=p=p||{}).CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right",(g=g||{}).OpacityInTransition="cnx-tooltip-animation-in",(m=m=m||{}).Card="cnx-g-card",m.CardSlot="cnx-g-card-slot",m.CardImage="cnx-g-card-image",m.CardText="cnx-g-card-text",m.CardTextContainer="cnx-g-card-text-container",m.CardPlaceholder="cnx-g-card-placeholder",m.CardRail="cnx-g-rail",m.StyleDetailed="cnx-g-style-detailed",m.StyleVisual="cnx-g-style-visual",m.ExploreMore="cnx-g-explore-more",m.FadeOut="cnx-g-fade-out";const v={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},P="cnx-ratio",S="cnx-hide-video",I={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},T={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},function(e,t,i){"use strict";var r,s;i.d(t,"a",function(){return r}),i.d(t,"b",function(){return s}),(t=r=r||{}).Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail",(t=s=s||{}).AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"},function(e,t,i){"use strict";var n=i(19),o=i(25),a=i(0),l=i(13),d=i(31);var c=i(38);i.d(t,"a",function(){return m});var h=function(e,t){var i={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]]);return i};const u=500;let p=window.location&&window.location.href,g=!1;try{p=window.top.location.href}catch(e){}function m(e){var{throttle:t=30,sendMaxLog:i=!0,logJsonState:r=!1}=e,e=h(e,["throttle","sendMaxLog","logJsonState"]);if(!g)if(e.playerDestroyed&&(g=!0),e.sessionId=d.a.sessionId,d.a.incrementLogCount(e.message),d.a.isMaxLogOverflow(e.message)&&m({message:"Logging_max_log_overflow_1000",exception:e.message,callStack:e.callStack,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,throttle:100,sessionId:d.a.sessionId}),d.a.isMaxLog(e.message,t))i&&!d.a.isMaxLogSent(e.message)&&(d.a.setMaxLogSent(e.message),m({message:"Logging_max_log_sent",exception:e.message,callStack:e.callStack,level:a.ProtoLoggingLevelEnum.FATAL,sessionId:d.a.sessionId}));else{if(r&&(e.callStack=c.a.getJsonString()),void 0===e.callStack){const s=new Error(e.message);e.callStack=s.stack}if(e.callStack=e.callStack.substring(0,u),n.a.logToServer){e.pageUrl=p,e.version=n.a.version;const s={requestData:e,endpoint:l.a.endPoints.tracking.logging,ProtoRequest:a.ProtoLoggingRequest,logError:!0};e.sendBeacon?o.a.sendProtoBeaconRequest(s):o.a.sendProtoRequest(s).catch(e=>{})}n.a.logToConsole&&function(e){let t;switch(e.level){case a.ProtoLoggingLevelEnum.FATAL:t="#8B0000";break;case a.ProtoLoggingLevelEnum.WARNING:t="#FF8C00";break;case a.ProtoLoggingLevelEnum.INFO:t="#000000"}console.log(`%cConnatix Logging:\n   message: ${e.message}\n   exception: ${e.exception}\n   level: ${e.level}\n   version: ${e.version}\n   sessionId: ${e.sessionId}\n   callStack: ${e.callStack}`,`color:${t}`)}(e)}}},function(e,t,i){"use strict";i.d(t,"g",function(){return l}),i.d(t,"m",function(){return d}),i.d(t,"e",function(){return c}),i.d(t,"c",function(){return h}),i.d(t,"f",function(){return u}),i.d(t,"h",function(){return p}),i.d(t,"i",function(){return g}),i.d(t,"l",function(){return m}),i.d(t,"j",function(){return f}),i.d(t,"a",function(){return y}),i.d(t,"b",function(){return b}),i.d(t,"n",function(){return v}),i.d(t,"k",function(){return P}),i.d(t,"d",function(){return S});var r=i(32),s=i(7),n=i(1),o=i(5),a=i(0);function l(e,t){return-1<t.indexOf(e)}function d(e){return Array.isArray(e)?e:[e]}function c(t,e){const i=[],r=new Map;return e.forEach(e=>{r.has(e[t])||(r.set(e[t],!0),i.push(e))}),i}function h(e){return[].slice.call(e)}function u(e){const t=[];for(const i in e)i&&0<=parseInt(i,10)&&t.push(e[i]);return t}function p(e){return e&&0<e.length}function g(e){return e.every(e=>Object(n.d)(e))}function m(t){let i="[";for(let e=0;e<t.length;e++)i+=Object(r.c)(t[e])+(e===t.length-1?"":",");return i+="]"}function f(e,i){return!(!e||!i)&&e.length===i.length&&(e===i||0===e.length&&0===i.length||e.every((e,t)=>Object(s.i)(e,i[t])))}function y(e,t){return e.filter(e=>!t.includes(e))}function b(e,t){return e.filter(e=>t.includes(e))}function v(i){return i.filter((e,t)=>i.indexOf(e)===t)}function P(e,t){var i=e.indexOf(t);-1!==i?e.splice(i,1):Object(o.a)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(t),level:a.ProtoLoggingLevelEnum.WARNING})}function S(e){const t=[];return e.forEach(e=>t.push(e)),t}},function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"d",function(){return l}),i.d(t,"e",function(){return d}),i.d(t,"g",function(){return c}),i.d(t,"f",function(){return h}),i.d(t,"m",function(){return u}),i.d(t,"l",function(){return p}),i.d(t,"b",function(){return g}),i.d(t,"a",function(){return m}),i.d(t,"i",function(){return f}),i.d(t,"h",function(){return y}),i.d(t,"j",function(){return b}),i.d(t,"k",function(){return v});var r=i(17),n=i(1),o=i(32),a=i(6);function s(){let i=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===e?t:3&t|8).toString(16)})}function l(){return s().replace(/-/g,"")}function d(e,t){let i="";if(!e.err)try{i=e.topFrame.location.href}catch(e){}if(!i||0===i.length)try{i=t.top.location.href}catch(e){}if(!i||0===i.length)try{i=e.topFrame.document.referrer}catch(e){}return i}function c(e){try{var t=e.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}catch(e){return null}}function h(e){let t=e,i=null,r=!1;try{for(;t.parent.document!==t.document;){if(!t.parent.document){r=!0;break}i=t,t=t.parent}}catch(e){r=!0}return{topFrame:t,topChildFrame:i,err:r}}function u(e=[],t,i={}){e.forEach(e=>{Object(n.g)(e)&&((new t.Image).src=`${e}${Object(r.c)(e)}${function(i,r){const s=[];return Object.keys(i).forEach(e=>{var t=r?`${r}[${e}]`:e,e=i[e];if(Object(n.f)(e))s.push(`${encodeURIComponent(t)}=${Object(o.c)(e)}`);else if(Array.isArray(e))s.push(`${encodeURIComponent(t)}=${Object(a.l)(e)}`);else if(null!=e){const i=encodeURIComponent(e),r=encodeURIComponent(t);i&&r&&s.push(`${r}=${i}`)}}),s.join("&")}(i)}`)})}function p(t){var i=Math.floor(100*Math.random());let r=0,s=0;for(let e=0;e<t.length;e++)if(i<(s+=t[e])){r=e;break}return r}function g(){let e=!1;try{const t=document.createElement("audio");t.volume=1,t.muted=!1;const i=t.play();void 0!==i&&i.catch(()=>{}),e=!t.paused,t.pause()}catch(e){}return e}function m(e,t=0,...i){return setTimeout(()=>{e.apply(this,i)},t)}function f(e,t){return Object(n.f)(e)?Object(o.b)(e,t):Array.isArray(e)?Object(a.j)(e,t):e===t}function y(e,t,i){let r=0,s=e;for(;r<=i;){if(r++,s.classList.contains(t))return!0;if(!(s=s.parentElement))return!1}return!1}function b(r,s){try{var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),o=parseInt(n[1],16),a=parseInt(n[2],16),l=parseInt(n[3],16);o/=255,a/=255,l/=255;var d=Math.max(o,a,l),c=Math.min(o,a,l);let e,t,i=(d+c)/2;if(d===c)e=t=0;else{const r=d-c;switch(t=.5<i?r/(2-d-c):r/(d+c),d){case o:e=(a-l)/r+(a<l?6:0);break;case a:e=(l-o)/r+2;break;case l:e=(o-a)/r+4}e/=6}return e=Math.round(360*e),t=Math.round(100*t),i=Math.round(100*i),`hsl(${e},${t}%,${i+=s/100*(100-i)}%)`}catch(s){return r}}function v(r,s=5){return new Promise((t,i)=>{r().then(t).catch(e=>{1!==s?v(r,s-1).then(t,i):i(e)})})}},function(e,t,i){"use strict";var r,s;(s=r=r||{})[s.HoldStart=0]="HoldStart",s[s.HoldEnd=1]="HoldEnd",s[s.TapLeft=2]="TapLeft",s[s.TapRight=3]="TapRight",s[s.SwipeEnd=4]="SwipeEnd",s[s.SwipeMove=5]="SwipeMove",s[s.Scroll=6]="Scroll",s[s.Click=7]="Click",t.a=r},function(e,t,i){"use strict";var r,s=i(59),o=s.Reader,n=s.Writer,a=s.util,l=s.roots.default||(s.roots.default={});function d(e){if(this.types=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function c(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function h(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function p(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function g(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function m(e){if(this.filters=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function f(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function y(e){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function b(e){if(this.adBreakTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function v(e){if(this.adSlotPositions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function P(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function S(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function I(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function T(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function k(e){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function A(e){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.adBreaks=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function O(e){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function C(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function w(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function x(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function E(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function L(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function R(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function M(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function B(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function j(e){if(this.chunkList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function D(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function _(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function F(e){if(this.capabilityList=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function N(e){if(this.slides=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function U(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function V(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function q(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function H(e){if(this.renditions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function W(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}l.ProtoPlayspaceCodecEnum=(r={},(i=Object.create(r))[r[0]="h264"]=0,i[r[1]="hevc"]=1,i),l.ProtoPlayspaceVideoSlideRendition=(W.prototype.width=0,W.prototype.height=0,W.prototype.videoUrl="",W.prototype.codec=0,W.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceVideoSlideRendition;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.width=e.int32();break;case 2:r.height=e.int32();break;case 3:r.videoUrl=e.string();break;case 4:r.codec=e.int32();break;default:e.skipType(7&s)}}return r},W.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.width=0,i.height=0,i.videoUrl="",i.codec=t.enums===String?"h264":0),null!=e.width&&e.hasOwnProperty("width")&&(i.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.videoUrl&&e.hasOwnProperty("videoUrl")&&(i.videoUrl=e.videoUrl),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=t.enums===String?l.ProtoPlayspaceCodecEnum[e.codec]:e.codec),i},W),l.ProtoPlayspaceVideoSettings=(H.prototype.renditions=a.emptyArray,H.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceVideoSettings;e.pos<i;){var s=e.uint32();s>>>3==1?(r.renditions&&r.renditions.length||(r.renditions=[]),r.renditions.push(l.ProtoPlayspaceVideoSlideRendition.decode(e,e.uint32()))):e.skipType(7&s)}return r},H.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.renditions=[]),e.renditions&&e.renditions.length){i.renditions=[];for(var r=0;r<e.renditions.length;++r)i.renditions[r]=l.ProtoPlayspaceVideoSlideRendition.toObject(e.renditions[r],t)}return i},H),l.ProtoPlayerOrientationEnum=(r={},(i=Object.create(r))[r[0]="Mixed"]=0,i[r[1]="Portrait"]=1,i[r[2]="Landscape"]=2,i),l.ProtoEndOfSlideCycleMode=(r={},(i=Object.create(r))[r[0]="Loop"]=0,i[r[1]="Stop"]=1,i),l.ProtoPlayspaceColorSchemeEnum=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Accent"]=1,i[r[2]="Primary"]=2,i[r[3]="Secondary"]=3,i),l.ProtoPlayspaceSlideTypeEnum=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Cover"]=1,i[r[2]="Description"]=2,i[r[3]="BulletList"]=3,i[r[4]="Stock"]=4,i[r[5]="Quote"]=5,i[r[6]="Instagram"]=6,i),l.ProtoPlayspaceSlideCapabilitiesEnum=(r={},(i=Object.create(r))[r[0]="VolumeControls"]=0,i[r[1]="PlaybackControls"]=1,i[r[2]="PlaylistControls"]=2,i[r[3]="CtaButton"]=3,i[r[4]="TopStoryTitle"]=4,i[r[5]="TopSlideTitle"]=5,i),l.ProtoMediaContextEnum=(r={},(i=Object.create(r))[r[0]="None"]=0,i[r[1]="Logo"]=1,i),l.ProtoSlideCapabilityMetadata=(q.prototype.label="",q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoSlideCapabilityMetadata;e.pos<i;){var s=e.uint32();s>>>3==1?r.label=e.string():e.skipType(7&s)}return r},q.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.label=""),null!=e.label&&e.hasOwnProperty("label")&&(i.label=e.label),i},q),l.ProtoPlayspaceSlideCapability=(V.prototype.type=0,V.prototype.metadata=null,V.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceSlideCapability;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.metadata=l.ProtoSlideCapabilityMetadata.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},V.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"VolumeControls":0,i.metadata=null),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoPlayspaceSlideCapabilitiesEnum[e.type]:e.type),null!=e.metadata&&e.hasOwnProperty("metadata")&&(i.metadata=l.ProtoSlideCapabilityMetadata.toObject(e.metadata,t)),i},V),l.ProtoFallbackStoryResponse=(U.prototype.storyId="",U.prototype.activeVersionId="",U.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoFallbackStoryResponse;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.storyId=e.string();break;case 2:r.activeVersionId=e.string();break;default:e.skipType(7&s)}}return r},U.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.storyId="",i.activeVersionId=""),null!=e.storyId&&e.hasOwnProperty("storyId")&&(i.storyId=e.storyId),null!=e.activeVersionId&&e.hasOwnProperty("activeVersionId")&&(i.activeVersionId=e.activeVersionId),i},U),l.ProtoPlayspaceMediaMetadataResponse=(N.prototype.slides=a.emptyArray,N.prototype.storyTitle="",N.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceMediaMetadataResponse;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.slides&&r.slides.length||(r.slides=[]),r.slides.push(l.ProtoPlayspaceSlideMetadata.decode(e,e.uint32()));break;case 2:r.storyTitle=e.string();break;default:e.skipType(7&s)}}return r},N.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.slides=[]),t.defaults&&(i.storyTitle=""),e.slides&&e.slides.length){i.slides=[];for(var r=0;r<e.slides.length;++r)i.slides[r]=l.ProtoPlayspaceSlideMetadata.toObject(e.slides[r],t)}return null!=e.storyTitle&&e.hasOwnProperty("storyTitle")&&(i.storyTitle=e.storyTitle),i},N),l.ProtoPlayspaceSlideMetadata=(F.prototype.mediaType=0,F.prototype.title="",F.prototype.clickUrl="",F.prototype.imageUrl="",F.prototype.slideDuration=0,F.prototype.videoRendition=null,F.prototype.type=0,F.prototype.coverMetadata=null,F.prototype.descriptionMetadata=null,F.prototype.bulletListMetadata=null,F.prototype.stockMetadata=null,F.prototype.quoteMetadata=null,F.prototype.instagramMetadata=null,F.prototype.capabilityList=a.emptyArray,F.prototype.portraitImageUrl="",F.prototype.mediaContext=0,F.prototype.altText="",F.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceSlideMetadata;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.mediaType=e.int32();break;case 2:r.title=e.string();break;case 3:r.clickUrl=e.string();break;case 4:r.imageUrl=e.string();break;case 5:r.slideDuration=e.int32();break;case 6:r.videoRendition=l.ProtoPlayspaceVideoSettings.decode(e,e.uint32());break;case 7:r.type=e.int32();break;case 8:r.coverMetadata=l.ProtoPlayspaceCoverMetadata.decode(e,e.uint32());break;case 9:r.descriptionMetadata=l.ProtoPlayspaceDescriptionMetadata.decode(e,e.uint32());break;case 10:r.bulletListMetadata=l.ProtoPlayspaceBulletListMetadata.decode(e,e.uint32());break;case 11:r.stockMetadata=l.ProtoPlayspaceStockMetadata.decode(e,e.uint32());break;case 12:r.quoteMetadata=l.ProtoPlayspaceQuoteMetadata.decode(e,e.uint32());break;case 16:r.instagramMetadata=l.ProtoPlayspaceInstagramMetadata.decode(e,e.uint32());break;case 13:r.capabilityList&&r.capabilityList.length||(r.capabilityList=[]),r.capabilityList.push(l.ProtoPlayspaceSlideCapability.decode(e,e.uint32()));break;case 14:r.portraitImageUrl=e.string();break;case 15:r.mediaContext=e.int32();break;case 17:r.altText=e.string();break;default:e.skipType(7&s)}}return r},F.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.capabilityList=[]),t.defaults&&(i.mediaType=t.enums===String?"Image":0,i.title="",i.clickUrl="",i.imageUrl="",i.slideDuration=0,i.videoRendition=null,i.type=t.enums===String?"Default":0,i.coverMetadata=null,i.descriptionMetadata=null,i.bulletListMetadata=null,i.stockMetadata=null,i.quoteMetadata=null,i.portraitImageUrl="",i.mediaContext=t.enums===String?"None":0,i.instagramMetadata=null,i.altText=""),null!=e.mediaType&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?l.ProtoMediaTypeEnum[e.mediaType]:e.mediaType),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.clickUrl&&e.hasOwnProperty("clickUrl")&&(i.clickUrl=e.clickUrl),null!=e.imageUrl&&e.hasOwnProperty("imageUrl")&&(i.imageUrl=e.imageUrl),null!=e.slideDuration&&e.hasOwnProperty("slideDuration")&&(i.slideDuration=e.slideDuration),null!=e.videoRendition&&e.hasOwnProperty("videoRendition")&&(i.videoRendition=l.ProtoPlayspaceVideoSettings.toObject(e.videoRendition,t)),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoPlayspaceSlideTypeEnum[e.type]:e.type),null!=e.coverMetadata&&e.hasOwnProperty("coverMetadata")&&(i.coverMetadata=l.ProtoPlayspaceCoverMetadata.toObject(e.coverMetadata,t)),null!=e.descriptionMetadata&&e.hasOwnProperty("descriptionMetadata")&&(i.descriptionMetadata=l.ProtoPlayspaceDescriptionMetadata.toObject(e.descriptionMetadata,t)),null!=e.bulletListMetadata&&e.hasOwnProperty("bulletListMetadata")&&(i.bulletListMetadata=l.ProtoPlayspaceBulletListMetadata.toObject(e.bulletListMetadata,t)),null!=e.stockMetadata&&e.hasOwnProperty("stockMetadata")&&(i.stockMetadata=l.ProtoPlayspaceStockMetadata.toObject(e.stockMetadata,t)),null!=e.quoteMetadata&&e.hasOwnProperty("quoteMetadata")&&(i.quoteMetadata=l.ProtoPlayspaceQuoteMetadata.toObject(e.quoteMetadata,t)),e.capabilityList&&e.capabilityList.length){i.capabilityList=[];for(var r=0;r<e.capabilityList.length;++r)i.capabilityList[r]=l.ProtoPlayspaceSlideCapability.toObject(e.capabilityList[r],t)}return null!=e.portraitImageUrl&&e.hasOwnProperty("portraitImageUrl")&&(i.portraitImageUrl=e.portraitImageUrl),null!=e.mediaContext&&e.hasOwnProperty("mediaContext")&&(i.mediaContext=t.enums===String?l.ProtoMediaContextEnum[e.mediaContext]:e.mediaContext),null!=e.instagramMetadata&&e.hasOwnProperty("instagramMetadata")&&(i.instagramMetadata=l.ProtoPlayspaceInstagramMetadata.toObject(e.instagramMetadata,t)),null!=e.altText&&e.hasOwnProperty("altText")&&(i.altText=e.altText),i},F),l.ProtoPlayspaceCoverMetadata=(_.prototype.title="",_.prototype.subtitle="",_.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceCoverMetadata;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.title=e.string();break;case 2:r.subtitle=e.string();break;default:e.skipType(7&s)}}return r},_.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.title="",i.subtitle=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.subtitle&&e.hasOwnProperty("subtitle")&&(i.subtitle=e.subtitle),i},_),l.ProtoPlayspaceDescriptionChunk=(D.prototype.text="",D.prototype.colorScheme=0,D.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceDescriptionChunk;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.text=e.string();break;case 2:r.colorScheme=e.int32();break;default:e.skipType(7&s)}}return r},D.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.text="",i.colorScheme=t.enums===String?"Default":0),null!=e.text&&e.hasOwnProperty("text")&&(i.text=e.text),null!=e.colorScheme&&e.hasOwnProperty("colorScheme")&&(i.colorScheme=t.enums===String?l.ProtoPlayspaceColorSchemeEnum[e.colorScheme]:e.colorScheme),i},D),l.ProtoPlayspaceDescriptionMetadata=(j.prototype.chunkList=a.emptyArray,j.prototype.label=null,j.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceDescriptionMetadata;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.chunkList&&r.chunkList.length||(r.chunkList=[]),r.chunkList.push(l.ProtoPlayspaceDescriptionChunk.decode(e,e.uint32()));break;case 2:r.label=l.ProtoPlayspaceDescriptionChunk.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},j.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.chunkList=[]),t.defaults&&(i.label=null),e.chunkList&&e.chunkList.length){i.chunkList=[];for(var r=0;r<e.chunkList.length;++r)i.chunkList[r]=l.ProtoPlayspaceDescriptionChunk.toObject(e.chunkList[r],t)}return null!=e.label&&e.hasOwnProperty("label")&&(i.label=l.ProtoPlayspaceDescriptionChunk.toObject(e.label,t)),i},j),l.ProtoBulletOptions=(B.prototype.title="",B.prototype.description="",B.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoBulletOptions;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.title=e.string();break;case 2:r.description=e.string();break;default:e.skipType(7&s)}}return r},B.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.title="",i.description=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(i.description=e.description),i},B),l.ProtoPlayspaceBulletListMetadata=(M.prototype.title="",M.prototype.items=a.emptyArray,M.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceBulletListMetadata;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.title=e.string();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(l.ProtoBulletOptions.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return r},M.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.title=""),null!=e.title&&e.hasOwnProperty("title")&&(i.title=e.title),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=l.ProtoBulletOptions.toObject(e.items[r],t)}return i},M),l.ProtoPlayspaceQuoteMetadata=(R.prototype.text="",R.prototype.source="",R.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceQuoteMetadata;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.text=e.string();break;case 2:r.source=e.string();break;default:e.skipType(7&s)}}return r},R.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.text="",i.source=""),null!=e.text&&e.hasOwnProperty("text")&&(i.text=e.text),null!=e.source&&e.hasOwnProperty("source")&&(i.source=e.source),i},R),l.ProtoPlayspaceStockMetadata=(L.encode=function(e,t){return t=t||n.create()},L.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,t=new l.ProtoPlayspaceStockMetadata;e.pos<i;){var r=e.uint32();e.skipType(7&r)}return t},L.fromObject=function(e){return e instanceof l.ProtoPlayspaceStockMetadata?e:new l.ProtoPlayspaceStockMetadata},L.toObject=function(){return{}},L.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},L),l.ProtoPlayspaceInstagramMetadata=(E.prototype.handle="",E.prototype.createdDate="",E.prototype.likes="",E.prototype.comments="",E.encode=function(e,t){return t=t||n.create(),null!=e.handle&&e.hasOwnProperty("handle")&&t.uint32(10).string(e.handle),null!=e.createdDate&&e.hasOwnProperty("createdDate")&&t.uint32(18).string(e.createdDate),null!=e.likes&&e.hasOwnProperty("likes")&&t.uint32(26).string(e.likes),null!=e.comments&&e.hasOwnProperty("comments")&&t.uint32(34).string(e.comments),t},E.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceInstagramMetadata;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.handle=e.string();break;case 2:r.createdDate=e.string();break;case 3:r.likes=e.string();break;case 4:r.comments=e.string();break;default:e.skipType(7&s)}}return r},E.fromObject=function(e){if(e instanceof l.ProtoPlayspaceInstagramMetadata)return e;var t=new l.ProtoPlayspaceInstagramMetadata;return null!=e.handle&&(t.handle=String(e.handle)),null!=e.createdDate&&(t.createdDate=String(e.createdDate)),null!=e.likes&&(t.likes=String(e.likes)),null!=e.comments&&(t.comments=String(e.comments)),t},E.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.handle="",i.createdDate="",i.likes="",i.comments=""),null!=e.handle&&e.hasOwnProperty("handle")&&(i.handle=e.handle),null!=e.createdDate&&e.hasOwnProperty("createdDate")&&(i.createdDate=e.createdDate),null!=e.likes&&e.hasOwnProperty("likes")&&(i.likes=e.likes),null!=e.comments&&e.hasOwnProperty("comments")&&(i.comments=e.comments),i},E.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},E),l.ProtoMediaTypeEnum=(r={},(i=Object.create(r))[r[0]="Image"]=0,i[r[1]="Video"]=1,i),l.ProtoPlayspaceColorPrimary=(x.prototype.background="#F1F1F1",x.prototype.foreground="#000000",x.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceColorPrimary;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.background=e.string();break;case 2:r.foreground=e.string();break;default:e.skipType(7&s)}}return r},x.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.background="#F1F1F1",i.foreground="#000000"),null!=e.background&&e.hasOwnProperty("background")&&(i.background=e.background),null!=e.foreground&&e.hasOwnProperty("foreground")&&(i.foreground=e.foreground),i},x),l.ProtoPlayspaceColorSecondary=(w.prototype.background="#000000 ",w.prototype.foreground="#F1F1F1",w.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceColorSecondary;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.background=e.string();break;case 2:r.foreground=e.string();break;default:e.skipType(7&s)}}return r},w.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.background="#000000 ",i.foreground="#F1F1F1"),null!=e.background&&e.hasOwnProperty("background")&&(i.background=e.background),null!=e.foreground&&e.hasOwnProperty("foreground")&&(i.foreground=e.foreground),i},w),l.ProtoPlayspaceColorAccent=(C.prototype.background="",C.prototype.foreground="",C.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspaceColorAccent;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.background=e.string();break;case 2:r.foreground=e.string();break;default:e.skipType(7&s)}}return r},C.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.background="",i.foreground=""),null!=e.background&&e.hasOwnProperty("background")&&(i.background=e.background),null!=e.foreground&&e.hasOwnProperty("foreground")&&(i.foreground=e.foreground),i},C),l.ProtoPlayspaceRequest=(O.prototype.tokens=a.emptyArray,O.prototype.pageUrl="",O.prototype.userId="",O.prototype.forceLineItemId="",O.prototype.forcePlayerId="",O.prototype.forceStoryId="",O.prototype.version=0,O.prototype.clientAb0=0,O.prototype.clientAb1=0,O.prototype.customParam1="",O.prototype.customParam2="",O.prototype.customParam3="",O.prototype.forceExploration=!1,O.prototype.es6=!1,O.prototype.bundleId="",O.prototype.parseDomain=!1,O.prototype.implementationType=0,O.prototype.queryJsTargeting=a.emptyObject,O.prototype.isConsentConnatix=!0,O.prototype.reloadedPlayers=a.emptyObject,O.prototype.disableTracking=!1,O.prototype.referrer="",O.prototype.customParam4="",O.prototype.customParam5="",O.encode=function(e,t){if(t=t||n.create(),null!=e.tokens&&e.tokens.length)for(var i=0;i<e.tokens.length;++i)t.uint32(10).string(e.tokens[i]);if(null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(26).string(e.pageUrl),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(42).string(e.userId),null!=e.forceLineItemId&&e.hasOwnProperty("forceLineItemId")&&t.uint32(50).string(e.forceLineItemId),null!=e.forcePlayerId&&e.hasOwnProperty("forcePlayerId")&&t.uint32(58).string(e.forcePlayerId),null!=e.forceStoryId&&e.hasOwnProperty("forceStoryId")&&t.uint32(66).string(e.forceStoryId),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(72).int32(e.version),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&t.uint32(80).int32(e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&t.uint32(88).int32(e.clientAb1),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&t.uint32(114).string(e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&t.uint32(122).string(e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&t.uint32(130).string(e.customParam3),null!=e.forceExploration&&e.hasOwnProperty("forceExploration")&&t.uint32(136).bool(e.forceExploration),null!=e.es6&&e.hasOwnProperty("es6")&&t.uint32(144).bool(e.es6),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&t.uint32(154).string(e.bundleId),null!=e.parseDomain&&e.hasOwnProperty("parseDomain")&&t.uint32(160).bool(e.parseDomain),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&t.uint32(168).int32(e.implementationType),null!=e.queryJsTargeting&&e.hasOwnProperty("queryJsTargeting"))for(var r=Object.keys(e.queryJsTargeting),i=0;i<r.length;++i)t.uint32(178).fork().uint32(10).string(r[i]).uint32(18).string(e.queryJsTargeting[r[i]]).ldelim();if(null!=e.isConsentConnatix&&e.hasOwnProperty("isConsentConnatix")&&t.uint32(184).bool(e.isConsentConnatix),null!=e.reloadedPlayers&&e.hasOwnProperty("reloadedPlayers"))for(r=Object.keys(e.reloadedPlayers),i=0;i<r.length;++i)t.uint32(202).fork().uint32(10).string(r[i]).uint32(18).string(e.reloadedPlayers[r[i]]).ldelim();return null!=e.disableTracking&&e.hasOwnProperty("disableTracking")&&t.uint32(216).bool(e.disableTracking),null!=e.referrer&&e.hasOwnProperty("referrer")&&t.uint32(226).string(e.referrer),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&t.uint32(234).string(e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&t.uint32(242).string(e.customParam5),t},O.fromObject=function(e){if(e instanceof l.ProtoPlayspaceRequest)return e;var t=new l.ProtoPlayspaceRequest;if(e.tokens){if(!Array.isArray(e.tokens))throw TypeError(".ProtoPlayspaceRequest.tokens: array expected");t.tokens=[];for(var i=0;i<e.tokens.length;++i)t.tokens[i]=String(e.tokens[i])}switch(null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.forceLineItemId&&(t.forceLineItemId=String(e.forceLineItemId)),null!=e.forcePlayerId&&(t.forcePlayerId=String(e.forcePlayerId)),null!=e.forceStoryId&&(t.forceStoryId=String(e.forceStoryId)),null!=e.version&&(t.version=0|e.version),null!=e.clientAb0&&(t.clientAb0=0|e.clientAb0),null!=e.clientAb1&&(t.clientAb1=0|e.clientAb1),null!=e.customParam1&&(t.customParam1=String(e.customParam1)),null!=e.customParam2&&(t.customParam2=String(e.customParam2)),null!=e.customParam3&&(t.customParam3=String(e.customParam3)),null!=e.forceExploration&&(t.forceExploration=Boolean(e.forceExploration)),null!=e.es6&&(t.es6=Boolean(e.es6)),null!=e.bundleId&&(t.bundleId=String(e.bundleId)),null!=e.parseDomain&&(t.parseDomain=Boolean(e.parseDomain)),e.implementationType){case"Web":case 0:t.implementationType=0;break;case"Amp":case 1:t.implementationType=1}if(e.queryJsTargeting){if("object"!=typeof e.queryJsTargeting)throw TypeError(".ProtoPlayspaceRequest.queryJsTargeting: object expected");t.queryJsTargeting={};for(var r=Object.keys(e.queryJsTargeting),i=0;i<r.length;++i)t.queryJsTargeting[r[i]]=String(e.queryJsTargeting[r[i]])}if(null!=e.isConsentConnatix&&(t.isConsentConnatix=Boolean(e.isConsentConnatix)),e.reloadedPlayers){if("object"!=typeof e.reloadedPlayers)throw TypeError(".ProtoPlayspaceRequest.reloadedPlayers: object expected");for(t.reloadedPlayers={},r=Object.keys(e.reloadedPlayers),i=0;i<r.length;++i)t.reloadedPlayers[r[i]]=String(e.reloadedPlayers[r[i]])}return null!=e.disableTracking&&(t.disableTracking=Boolean(e.disableTracking)),null!=e.referrer&&(t.referrer=String(e.referrer)),null!=e.customParam4&&(t.customParam4=String(e.customParam4)),null!=e.customParam5&&(t.customParam5=String(e.customParam5)),t},O.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},O),l.ProtoPlayspace=(A.prototype.playerId="",A.prototype.playbackMode=0,A.prototype.soundMode=0,A.prototype.endOfCycleMode=0,A.prototype.containerSelector="",A.prototype.position=0,A.prototype.insertPosition=0,A.prototype.forceInsertPath=!1,A.prototype.renderInFrame=!1,A.prototype.scrollHijackingProtection=!1,A.prototype.preRollBreak=0,A.prototype.postRollBreak=0,A.prototype.midRollNumber=-1,A.prototype.slidesBetweenAds=0,A.prototype.minSlidesBeforeFirstAd=0,A.prototype.adViewabilityPolicy=0,A.prototype.casting=!1,A.prototype.sharingDestinations=a.emptyArray,A.prototype.expandButton=!1,A.prototype.closeButtonMode=0,A.prototype.floatingMode=0,A.prototype.floatingDeviceMode=a.emptyArray,A.prototype.floatingCloseButtonMode=0,A.prototype.floatingFixedPosition=0,A.prototype.floatingPageElement="",A.prototype.floatingUseElementWidth=!1,A.prototype.floatingScrollPosition=0,A.prototype.floatingGutterX=0,A.prototype.floatingGutterY=0,A.prototype.floatingWidth=0,A.prototype.html="",A.prototype.logoUrl="",A.prototype.lineItems=a.emptyArray,A.prototype.adPlaybackMode=0,A.prototype.css="",A.prototype.sessionId="",A.prototype.orientation=0,A.prototype.orientationBreakpoint=0,A.prototype.activeVersion="",A.prototype.storyId="",A.prototype.floatingAppendLocation=0,A.prototype.floatingYAxisPadding=0,A.prototype.contentTitleTextColor="",A.prototype.useAccentColorForProgressBar=!1,A.prototype.primaryColorList=null,A.prototype.secondaryColorList=null,A.prototype.accentColorList=null,A.prototype.customJsCode="",A.prototype.initializationSettingsJson="",A.prototype.publisherName="",A.prototype.adSkippability=0,A.prototype.skipAdAfter=5,A.prototype.adBreaks=a.emptyArray,A.prototype.amazonTamSlotId="",A.prototype.limitClientSideApiUse=!1,A.prototype.abTestId="",A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayspace;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.playerId=e.string();break;case 2:r.playbackMode=e.int32();break;case 3:r.soundMode=e.int32();break;case 4:r.endOfCycleMode=e.int32();break;case 5:r.containerSelector=e.string();break;case 6:r.position=e.int32();break;case 7:r.insertPosition=e.int32();break;case 8:r.forceInsertPath=e.bool();break;case 9:r.renderInFrame=e.bool();break;case 10:r.scrollHijackingProtection=e.bool();break;case 11:r.preRollBreak=e.int32();break;case 12:r.postRollBreak=e.int32();break;case 13:r.midRollNumber=e.int32();break;case 14:r.slidesBetweenAds=e.int32();break;case 15:r.minSlidesBeforeFirstAd=e.int32();break;case 16:r.adViewabilityPolicy=e.int32();break;case 18:r.casting=e.bool();break;case 19:if(r.sharingDestinations&&r.sharingDestinations.length||(r.sharingDestinations=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.sharingDestinations.push(e.int32());else r.sharingDestinations.push(e.int32());break;case 20:r.expandButton=e.bool();break;case 21:r.closeButtonMode=e.int32();break;case 22:r.floatingMode=e.int32();break;case 23:if(r.floatingDeviceMode&&r.floatingDeviceMode.length||(r.floatingDeviceMode=[]),2==(7&s))for(n=e.uint32()+e.pos;e.pos<n;)r.floatingDeviceMode.push(e.int32());else r.floatingDeviceMode.push(e.int32());break;case 24:r.floatingCloseButtonMode=e.int32();break;case 25:r.floatingFixedPosition=e.int32();break;case 26:r.floatingPageElement=e.string();break;case 27:r.floatingUseElementWidth=e.bool();break;case 28:r.floatingScrollPosition=e.int32();break;case 29:r.floatingGutterX=e.int32();break;case 30:r.floatingGutterY=e.int32();break;case 31:r.floatingWidth=e.int32();break;case 35:r.html=e.string();break;case 36:r.logoUrl=e.string();break;case 37:r.lineItems&&r.lineItems.length||(r.lineItems=[]),r.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 38:r.adPlaybackMode=e.int32();break;case 39:r.css=e.string();break;case 40:r.sessionId=e.string();break;case 41:r.orientation=e.int32();break;case 42:r.orientationBreakpoint=e.int32();break;case 43:r.activeVersion=e.string();break;case 44:r.storyId=e.string();break;case 50:r.floatingAppendLocation=e.int32();break;case 51:r.floatingYAxisPadding=e.int32();break;case 57:r.contentTitleTextColor=e.string();break;case 58:r.useAccentColorForProgressBar=e.bool();break;case 59:r.primaryColorList=l.ProtoPlayspaceColorPrimary.decode(e,e.uint32());break;case 60:r.secondaryColorList=l.ProtoPlayspaceColorSecondary.decode(e,e.uint32());break;case 61:r.accentColorList=l.ProtoPlayspaceColorAccent.decode(e,e.uint32());break;case 62:r.customJsCode=e.string();break;case 63:r.initializationSettingsJson=e.string();break;case 64:r.publisherName=e.string();break;case 65:r.adSkippability=e.int32();break;case 66:r.skipAdAfter=e.int32();break;case 67:r.adBreaks&&r.adBreaks.length||(r.adBreaks=[]),r.adBreaks.push(l.ProtoAdBreak.decode(e,e.uint32()));break;case 68:r.amazonTamSlotId=e.string();break;case 69:r.limitClientSideApiUse=e.bool();break;case 70:r.abTestId=e.string();break;default:e.skipType(7&s)}}return r},A.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.sharingDestinations=[],i.floatingDeviceMode=[],i.lineItems=[],i.adBreaks=[]),t.defaults&&(i.playerId="",i.playbackMode=t.enums===String?"Autoplay":0,i.soundMode=t.enums===String?"Mute":0,i.endOfCycleMode=t.enums===String?"Loop":0,i.containerSelector="",i.position=0,i.insertPosition=t.enums===String?"WithinContainer":0,i.forceInsertPath=!1,i.renderInFrame=!1,i.scrollHijackingProtection=!1,i.preRollBreak=0,i.postRollBreak=0,i.midRollNumber=-1,i.slidesBetweenAds=0,i.minSlidesBeforeFirstAd=0,i.adViewabilityPolicy=t.enums===String?"Default":0,i.casting=!1,i.expandButton=!1,i.closeButtonMode=t.enums===String?"Off":0,i.floatingMode=t.enums===String?"Off":0,i.floatingCloseButtonMode=t.enums===String?"Off":0,i.floatingFixedPosition=t.enums===String?"Page":0,i.floatingPageElement="",i.floatingUseElementWidth=!1,i.floatingScrollPosition=t.enums===String?"BottomRight":0,i.floatingGutterX=0,i.floatingGutterY=0,i.floatingWidth=0,i.html="",i.logoUrl="",i.adPlaybackMode=t.enums===String?"Autoplay":0,i.css="",i.sessionId="",i.orientation=t.enums===String?"Mixed":0,i.orientationBreakpoint=0,i.activeVersion="",i.storyId="",i.floatingAppendLocation=t.enums===String?"Above":0,i.floatingYAxisPadding=0,i.contentTitleTextColor="",i.useAccentColorForProgressBar=!1,i.primaryColorList=null,i.secondaryColorList=null,i.accentColorList=null,i.customJsCode="",i.initializationSettingsJson="",i.publisherName="",i.adSkippability=t.enums===String?"IfLongerThan31Sec":0,i.skipAdAfter=5,i.amazonTamSlotId="",i.limitClientSideApiUse=!1,i.abTestId=""),null!=e.playerId&&e.hasOwnProperty("playerId")&&(i.playerId=e.playerId),null!=e.playbackMode&&e.hasOwnProperty("playbackMode")&&(i.playbackMode=t.enums===String?l.ProtoPlayerPlaybackModeEnum[e.playbackMode]:e.playbackMode),null!=e.soundMode&&e.hasOwnProperty("soundMode")&&(i.soundMode=t.enums===String?l.ProtoPlayerSoundMode[e.soundMode]:e.soundMode),null!=e.endOfCycleMode&&e.hasOwnProperty("endOfCycleMode")&&(i.endOfCycleMode=t.enums===String?l.ProtoEndOfSlideCycleMode[e.endOfCycleMode]:e.endOfCycleMode),null!=e.containerSelector&&e.hasOwnProperty("containerSelector")&&(i.containerSelector=e.containerSelector),null!=e.position&&e.hasOwnProperty("position")&&(i.position=e.position),null!=e.insertPosition&&e.hasOwnProperty("insertPosition")&&(i.insertPosition=t.enums===String?l.ProtoPlayerInsertMode[e.insertPosition]:e.insertPosition),null!=e.forceInsertPath&&e.hasOwnProperty("forceInsertPath")&&(i.forceInsertPath=e.forceInsertPath),null!=e.renderInFrame&&e.hasOwnProperty("renderInFrame")&&(i.renderInFrame=e.renderInFrame),null!=e.scrollHijackingProtection&&e.hasOwnProperty("scrollHijackingProtection")&&(i.scrollHijackingProtection=e.scrollHijackingProtection),null!=e.preRollBreak&&e.hasOwnProperty("preRollBreak")&&(i.preRollBreak=e.preRollBreak),null!=e.postRollBreak&&e.hasOwnProperty("postRollBreak")&&(i.postRollBreak=e.postRollBreak),null!=e.midRollNumber&&e.hasOwnProperty("midRollNumber")&&(i.midRollNumber=e.midRollNumber),null!=e.slidesBetweenAds&&e.hasOwnProperty("slidesBetweenAds")&&(i.slidesBetweenAds=e.slidesBetweenAds),null!=e.minSlidesBeforeFirstAd&&e.hasOwnProperty("minSlidesBeforeFirstAd")&&(i.minSlidesBeforeFirstAd=e.minSlidesBeforeFirstAd),null!=e.adViewabilityPolicy&&e.hasOwnProperty("adViewabilityPolicy")&&(i.adViewabilityPolicy=t.enums===String?l.ProtoAdViewabilityPolicy[e.adViewabilityPolicy]:e.adViewabilityPolicy),null!=e.casting&&e.hasOwnProperty("casting")&&(i.casting=e.casting),e.sharingDestinations&&e.sharingDestinations.length){i.sharingDestinations=[];for(var r=0;r<e.sharingDestinations.length;++r)i.sharingDestinations[r]=t.enums===String?l.ProtoSharingDestination[e.sharingDestinations[r]]:e.sharingDestinations[r]}if(null!=e.expandButton&&e.hasOwnProperty("expandButton")&&(i.expandButton=e.expandButton),null!=e.closeButtonMode&&e.hasOwnProperty("closeButtonMode")&&(i.closeButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.closeButtonMode]:e.closeButtonMode),null!=e.floatingMode&&e.hasOwnProperty("floatingMode")&&(i.floatingMode=t.enums===String?l.ProtoPlayerFloatingMode[e.floatingMode]:e.floatingMode),e.floatingDeviceMode&&e.floatingDeviceMode.length)for(i.floatingDeviceMode=[],r=0;r<e.floatingDeviceMode.length;++r)i.floatingDeviceMode[r]=t.enums===String?l.ProtoDeviceType[e.floatingDeviceMode[r]]:e.floatingDeviceMode[r];if(null!=e.floatingCloseButtonMode&&e.hasOwnProperty("floatingCloseButtonMode")&&(i.floatingCloseButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.floatingCloseButtonMode]:e.floatingCloseButtonMode),null!=e.floatingFixedPosition&&e.hasOwnProperty("floatingFixedPosition")&&(i.floatingFixedPosition=t.enums===String?l.ProtoFloatingFixedPositionMode[e.floatingFixedPosition]:e.floatingFixedPosition),null!=e.floatingPageElement&&e.hasOwnProperty("floatingPageElement")&&(i.floatingPageElement=e.floatingPageElement),null!=e.floatingUseElementWidth&&e.hasOwnProperty("floatingUseElementWidth")&&(i.floatingUseElementWidth=e.floatingUseElementWidth),null!=e.floatingScrollPosition&&e.hasOwnProperty("floatingScrollPosition")&&(i.floatingScrollPosition=t.enums===String?l.ProtoPositionMode[e.floatingScrollPosition]:e.floatingScrollPosition),null!=e.floatingGutterX&&e.hasOwnProperty("floatingGutterX")&&(i.floatingGutterX=e.floatingGutterX),null!=e.floatingGutterY&&e.hasOwnProperty("floatingGutterY")&&(i.floatingGutterY=e.floatingGutterY),null!=e.floatingWidth&&e.hasOwnProperty("floatingWidth")&&(i.floatingWidth=e.floatingWidth),null!=e.html&&e.hasOwnProperty("html")&&(i.html=e.html),null!=e.logoUrl&&e.hasOwnProperty("logoUrl")&&(i.logoUrl=e.logoUrl),e.lineItems&&e.lineItems.length)for(i.lineItems=[],r=0;r<e.lineItems.length;++r)i.lineItems[r]=l.ProtoLineItem.toObject(e.lineItems[r],t);if(null!=e.adPlaybackMode&&e.hasOwnProperty("adPlaybackMode")&&(i.adPlaybackMode=t.enums===String?l.ProtoAdPlaybackMode[e.adPlaybackMode]:e.adPlaybackMode),null!=e.css&&e.hasOwnProperty("css")&&(i.css=e.css),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(i.sessionId=e.sessionId),null!=e.orientation&&e.hasOwnProperty("orientation")&&(i.orientation=t.enums===String?l.ProtoPlayerOrientationEnum[e.orientation]:e.orientation),null!=e.orientationBreakpoint&&e.hasOwnProperty("orientationBreakpoint")&&(i.orientationBreakpoint=e.orientationBreakpoint),null!=e.activeVersion&&e.hasOwnProperty("activeVersion")&&(i.activeVersion=e.activeVersion),null!=e.storyId&&e.hasOwnProperty("storyId")&&(i.storyId=e.storyId),null!=e.floatingAppendLocation&&e.hasOwnProperty("floatingAppendLocation")&&(i.floatingAppendLocation=t.enums===String?l.ProtoFloatingAppendLocationEnum[e.floatingAppendLocation]:e.floatingAppendLocation),null!=e.floatingYAxisPadding&&e.hasOwnProperty("floatingYAxisPadding")&&(i.floatingYAxisPadding=e.floatingYAxisPadding),null!=e.contentTitleTextColor&&e.hasOwnProperty("contentTitleTextColor")&&(i.contentTitleTextColor=e.contentTitleTextColor),null!=e.useAccentColorForProgressBar&&e.hasOwnProperty("useAccentColorForProgressBar")&&(i.useAccentColorForProgressBar=e.useAccentColorForProgressBar),null!=e.primaryColorList&&e.hasOwnProperty("primaryColorList")&&(i.primaryColorList=l.ProtoPlayspaceColorPrimary.toObject(e.primaryColorList,t)),null!=e.secondaryColorList&&e.hasOwnProperty("secondaryColorList")&&(i.secondaryColorList=l.ProtoPlayspaceColorSecondary.toObject(e.secondaryColorList,t)),null!=e.accentColorList&&e.hasOwnProperty("accentColorList")&&(i.accentColorList=l.ProtoPlayspaceColorAccent.toObject(e.accentColorList,t)),null!=e.customJsCode&&e.hasOwnProperty("customJsCode")&&(i.customJsCode=e.customJsCode),null!=e.initializationSettingsJson&&e.hasOwnProperty("initializationSettingsJson")&&(i.initializationSettingsJson=e.initializationSettingsJson),null!=e.publisherName&&e.hasOwnProperty("publisherName")&&(i.publisherName=e.publisherName),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&(i.adSkippability=t.enums===String?l.ProtoPlayerAdSkippability[e.adSkippability]:e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&(i.skipAdAfter=e.skipAdAfter),e.adBreaks&&e.adBreaks.length)for(i.adBreaks=[],r=0;r<e.adBreaks.length;++r)i.adBreaks[r]=l.ProtoAdBreak.toObject(e.adBreaks[r],t);return null!=e.amazonTamSlotId&&e.hasOwnProperty("amazonTamSlotId")&&(i.amazonTamSlotId=e.amazonTamSlotId),null!=e.limitClientSideApiUse&&e.hasOwnProperty("limitClientSideApiUse")&&(i.limitClientSideApiUse=e.limitClientSideApiUse),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&(i.abTestId=e.abTestId),i},A),l.ProtoPlayspaceResponse=(k.prototype.errorMessage="",k.prototype.players=a.emptyArray,k.prototype.browser=null,k.prototype.geoLocation=null,k.prototype.lineItems=a.emptyArray,k.prototype.cookieSyncUrls=a.emptyObject,k.prototype.explorationMode=!1,k.prototype.supplyChain=null,k.prototype.secondLevelDomain="",k.prototype.userInformation=null,k.prototype.serverAb0=0,k.prototype.serverAb1=0,k.prototype.isSeoTraffic=!1,k.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i,r=void 0===t?e.len:e.pos+t,s=new l.ProtoPlayspaceResponse;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:s.errorMessage=e.string();break;case 10:s.players&&s.players.length||(s.players=[]),s.players.push(l.ProtoPlayspace.decode(e,e.uint32()));break;case 11:s.browser=l.Browser.decode(e,e.uint32());break;case 12:s.geoLocation=l.GeoLocation.decode(e,e.uint32());break;case 13:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 14:e.skip().pos++,s.cookieSyncUrls===a.emptyObject&&(s.cookieSyncUrls={}),i=e.int32(),e.pos++,s.cookieSyncUrls[i]=e.string();break;case 15:s.explorationMode=e.bool();break;case 17:s.supplyChain=l.ProtoSupplyChain.decode(e,e.uint32());break;case 18:s.secondLevelDomain=e.string();break;case 20:s.userInformation=l.ProtoUserInformation.decode(e,e.uint32());break;case 21:s.serverAb0=e.int32();break;case 22:s.serverAb1=e.int32();break;case 23:s.isSeoTraffic=e.bool();break;default:e.skipType(7&n)}}return s},k.toObject=function(e,t){var i,r={};if(((t=t||{}).arrays||t.defaults)&&(r.players=[],r.lineItems=[]),(t.objects||t.defaults)&&(r.cookieSyncUrls={}),t.defaults&&(r.errorMessage="",r.browser=null,r.geoLocation=null,r.explorationMode=!1,r.supplyChain=null,r.secondLevelDomain="",r.userInformation=null,r.serverAb0=0,r.serverAb1=0,r.isSeoTraffic=!1),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),e.players&&e.players.length){r.players=[];for(var s=0;s<e.players.length;++s)r.players[s]=l.ProtoPlayspace.toObject(e.players[s],t)}if(null!=e.browser&&e.hasOwnProperty("browser")&&(r.browser=l.Browser.toObject(e.browser,t)),null!=e.geoLocation&&e.hasOwnProperty("geoLocation")&&(r.geoLocation=l.GeoLocation.toObject(e.geoLocation,t)),e.lineItems&&e.lineItems.length)for(r.lineItems=[],s=0;s<e.lineItems.length;++s)r.lineItems[s]=l.ProtoLineItem.toObject(e.lineItems[s],t);if(e.cookieSyncUrls&&(i=Object.keys(e.cookieSyncUrls)).length)for(r.cookieSyncUrls={},s=0;s<i.length;++s)r.cookieSyncUrls[i[s]]=e.cookieSyncUrls[i[s]];return null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&(r.explorationMode=e.explorationMode),null!=e.supplyChain&&e.hasOwnProperty("supplyChain")&&(r.supplyChain=l.ProtoSupplyChain.toObject(e.supplyChain,t)),null!=e.secondLevelDomain&&e.hasOwnProperty("secondLevelDomain")&&(r.secondLevelDomain=e.secondLevelDomain),null!=e.userInformation&&e.hasOwnProperty("userInformation")&&(r.userInformation=l.ProtoUserInformation.toObject(e.userInformation,t)),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&(r.serverAb0=e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&(r.serverAb1=e.serverAb1),null!=e.isSeoTraffic&&e.hasOwnProperty("isSeoTraffic")&&(r.isSeoTraffic=e.isSeoTraffic),r},k),l.ProtoDeviceType=(r={},(i=Object.create(r))[r[0]="Desktop"]=0,i[r[1]="Smartphone"]=1,i[r[2]="Tablet"]=2,i[r[3]="GameConsole"]=3,i[r[4]="SmartTV"]=4,i[r[5]="WearableComputer"]=5,i[r[6]="PDA"]=6,i[r[7]="Unrecognized"]=7,i),l.Browser=(T.prototype.browserVersion="",T.prototype.browserType="",T.prototype.osCode="",T.prototype.device=0,T.encode=function(e,t){return t=t||n.create(),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(10).string(e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&t.uint32(18).string(e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&t.uint32(26).string(e.osCode),null!=e.device&&e.hasOwnProperty("device")&&t.uint32(32).int32(e.device),t},T.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.Browser;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.browserVersion=e.string();break;case 2:r.browserType=e.string();break;case 3:r.osCode=e.string();break;case 4:r.device=e.int32();break;default:e.skipType(7&s)}}return r},T.fromObject=function(e){if(e instanceof l.Browser)return e;var t=new l.Browser;switch(null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.browserType&&(t.browserType=String(e.browserType)),null!=e.osCode&&(t.osCode=String(e.osCode)),e.device){case"Desktop":case 0:t.device=0;break;case"Smartphone":case 1:t.device=1;break;case"Tablet":case 2:t.device=2;break;case"GameConsole":case 3:t.device=3;break;case"SmartTV":case 4:t.device=4;break;case"WearableComputer":case 5:t.device=5;break;case"PDA":case 6:t.device=6;break;case"Unrecognized":case 7:t.device=7}return t},T.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.browserVersion="",i.browserType="",i.osCode="",i.device=t.enums===String?"Desktop":0),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&(i.browserType=e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&(i.osCode=e.osCode),null!=e.device&&e.hasOwnProperty("device")&&(i.device=t.enums===String?l.ProtoDeviceType[e.device]:e.device),i},T.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},T),l.GeoLocation=(I.prototype.countryGeoId=0,I.prototype.cityId=0,I.prototype.subdivisionId=0,I.prototype.dmaId=0,I.prototype.ip="",I.prototype.lat=0,I.prototype.lon=0,I.encode=function(e,t){return t=t||n.create(),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&t.uint32(8).int32(e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&t.uint32(16).int32(e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&t.uint32(24).int32(e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&t.uint32(32).int32(e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(42).string(e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&t.uint32(49).double(e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&t.uint32(57).double(e.lon),t},I.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.GeoLocation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.countryGeoId=e.int32();break;case 2:r.cityId=e.int32();break;case 3:r.subdivisionId=e.int32();break;case 4:r.dmaId=e.int32();break;case 5:r.ip=e.string();break;case 6:r.lat=e.double();break;case 7:r.lon=e.double();break;default:e.skipType(7&s)}}return r},I.fromObject=function(e){if(e instanceof l.GeoLocation)return e;var t=new l.GeoLocation;return null!=e.countryGeoId&&(t.countryGeoId=0|e.countryGeoId),null!=e.cityId&&(t.cityId=0|e.cityId),null!=e.subdivisionId&&(t.subdivisionId=0|e.subdivisionId),null!=e.dmaId&&(t.dmaId=0|e.dmaId),null!=e.ip&&(t.ip=String(e.ip)),null!=e.lat&&(t.lat=Number(e.lat)),null!=e.lon&&(t.lon=Number(e.lon)),t},I.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.countryGeoId=0,i.cityId=0,i.subdivisionId=0,i.dmaId=0,i.ip="",i.lat=0,i.lon=0),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&(i.countryGeoId=e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&(i.cityId=e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&(i.subdivisionId=e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&(i.dmaId=e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&(i.lat=t.json&&!isFinite(e.lat)?String(e.lat):e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&(i.lon=t.json&&!isFinite(e.lon)?String(e.lon):e.lon),i},I.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},I),l.ProtoTrackerType=(r={},(i=Object.create(r))[r[0]="Image"]=0,i[r[1]="Javascript"]=1,i),l.ProtoTrackerTriggerType=(r={},(i=Object.create(r))[r[0]="Impression"]=0,i[r[1]="Complete25Pc"]=1,i[r[2]="Complete50Pc"]=2,i[r[3]="Complete75Pc"]=3,i[r[4]="ViewCompletion"]=4,i[r[5]="VideoClick"]=5,i[r[6]="Pause"]=6,i[r[7]="Resume"]=7,i[r[8]="Mute"]=8,i[r[9]="Unmute"]=9,i),l.CreativeTrackerViewModel=(S.prototype.type=0,S.prototype.trigger=0,S.prototype.url="",S.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.CreativeTrackerViewModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.trigger=e.int32();break;case 3:r.url=e.string();break;default:e.skipType(7&s)}}return r},S.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"Image":0,i.trigger=t.enums===String?"Impression":0,i.url=""),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoTrackerType[e.type]:e.type),null!=e.trigger&&e.hasOwnProperty("trigger")&&(i.trigger=t.enums===String?l.ProtoTrackerTriggerType[e.trigger]:e.trigger),null!=e.url&&e.hasOwnProperty("url")&&(i.url=e.url),i},S),l.ProtoCreativeTypeEnum=(r={},(i=Object.create(r))[r[0]="ThirdParty"]=0,i[r[1]="MediaFile"]=1,i[r[2]="Rtb"]=2,i[r[3]="External"]=3,i[r[4]="HeaderBidder"]=4,i[r[7]="Tam"]=7,i),l.ProtoResetCapTypeEnum=(r={},(i=Object.create(r))[r[0]="TimeCapping"]=0,i[r[1]="ContentCapping"]=1,i[r[2]="OpportunityCapping"]=2,i),l.ProtoAdSlotsEnum=(r={},(i=Object.create(r))[r[0]="PreRoll"]=0,i[r[1]="MidRoll"]=1,i[r[2]="PostRoll"]=2,i),l.ProtoLineItemPriority=(r={},(i=Object.create(r))[r[0]="House"]=0,i[r[1]="Default"]=1,i[r[2]="Preferred"]=2,i[r[3]="Top"]=3,i),l.ProtoAdSkipMode=(r={},(i=Object.create(r))[r[0]="IfLongerThan31Sec"]=0,i[r[1]="Always"]=1,i[r[2]="Never"]=2,i[r[3]="NotAplicable"]=3,i),l.ProtoAdType=(r={},(i=Object.create(r))[r[0]="Video"]=0,i[r[1]="Overlay"]=1,i),l.ProtoChoiceCriteriaEnum=(r={},(i=Object.create(r))[r[0]="Only"]=0,i[r[1]="Except"]=1,i),l.ProtoLineItemAdBreakTypeEnum=(r={},(i=Object.create(r))[r[1]="All"]=1,i[r[2]="SingleAd"]=2,i[r[3]="AdPod"]=3,i),l.ProtoLineItemTargetingTypeEnum=(r={},(i=Object.create(r))[r[0]="Only"]=0,i[r[1]="Except"]=1,i),l.ProtoLineItemAdSlotTargetingTypeEnum=(r={},(i=Object.create(r))[r[1]="SpecificSlots"]=1,i[r[2]="Interval"]=2,i),l.ProtoLineItemPauseAdOutOfViewEnum=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Strict"]=1,i),l.ProtoLineItemContextualTargetingEnum=(r={},(i=Object.create(r))[r[0]="IncludeAny"]=0,i[r[1]="IncludeAll"]=1,i[r[2]="ExcludeAny"]=2,i[r[3]="ExcludeAll"]=3,i),l.ProtoSizeChoiceCriteriaEnum=(r={},(i=Object.create(r))[r[0]="GreaterThan"]=0,i[r[1]="SmallerThan"]=1,i[r[2]="Between"]=2,i),l.ProtoLineItemAdBreakTargeting=(P.prototype.adRollType=0,P.prototype.adBreakTypeEnum=1,P.encode=function(e,t){return t=t||n.create(),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&t.uint32(8).int32(e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&t.uint32(16).int32(e.adBreakTypeEnum),t},P.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdBreakTargeting;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.adRollType=e.int32();break;case 2:r.adBreakTypeEnum=e.int32();break;default:e.skipType(7&s)}}return r},P.fromObject=function(e){if(e instanceof l.ProtoLineItemAdBreakTargeting)return e;var t=new l.ProtoLineItemAdBreakTargeting;switch(e.adRollType){case"None":case 0:t.adRollType=0;break;case"PreRoll":case 1:t.adRollType=1;break;case"MidRoll":case 2:t.adRollType=2;break;case"PostRoll":case 3:t.adRollType=3}switch(e.adBreakTypeEnum){case"All":case 1:t.adBreakTypeEnum=1;break;case"SingleAd":case 2:t.adBreakTypeEnum=2;break;case"AdPod":case 3:t.adBreakTypeEnum=3}return t},P.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.adRollType=t.enums===String?"None":0,i.adBreakTypeEnum=t.enums===String?"All":1),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&(i.adRollType=t.enums===String?l.ProtoAdBreakTypeEnum[e.adRollType]:e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&(i.adBreakTypeEnum=t.enums===String?l.ProtoLineItemAdBreakTypeEnum[e.adBreakTypeEnum]:e.adBreakTypeEnum),i},P.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},P),l.ProtoLineItemAdPodTargeting=(v.prototype.targetingType=0,v.prototype.adSlotTargetingType=1,v.prototype.adSlotPositions=a.emptyArray,v.encode=function(e,t){if(t=t||n.create(),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&t.uint32(8).int32(e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&t.uint32(16).int32(e.adSlotTargetingType),null!=e.adSlotPositions&&e.adSlotPositions.length){t.uint32(26).fork();for(var i=0;i<e.adSlotPositions.length;++i)t.int32(e.adSlotPositions[i]);t.ldelim()}return t},v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdPodTargeting;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.targetingType=e.int32();break;case 2:r.adSlotTargetingType=e.int32();break;case 3:if(r.adSlotPositions&&r.adSlotPositions.length||(r.adSlotPositions=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.adSlotPositions.push(e.int32());else r.adSlotPositions.push(e.int32());break;default:e.skipType(7&s)}}return r},v.fromObject=function(e){if(e instanceof l.ProtoLineItemAdPodTargeting)return e;var t=new l.ProtoLineItemAdPodTargeting;switch(e.targetingType){case"Only":case 0:t.targetingType=0;break;case"Except":case 1:t.targetingType=1}switch(e.adSlotTargetingType){case"SpecificSlots":case 1:t.adSlotTargetingType=1;break;case"Interval":case 2:t.adSlotTargetingType=2}if(e.adSlotPositions){if(!Array.isArray(e.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");t.adSlotPositions=[];for(var i=0;i<e.adSlotPositions.length;++i)t.adSlotPositions[i]=0|e.adSlotPositions[i]}return t},v.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adSlotPositions=[]),t.defaults&&(i.targetingType=t.enums===String?"Only":0,i.adSlotTargetingType=t.enums===String?"SpecificSlots":1),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&(i.targetingType=t.enums===String?l.ProtoLineItemTargetingTypeEnum[e.targetingType]:e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&(i.adSlotTargetingType=t.enums===String?l.ProtoLineItemAdSlotTargetingTypeEnum[e.adSlotTargetingType]:e.adSlotTargetingType),e.adSlotPositions&&e.adSlotPositions.length){i.adSlotPositions=[];for(var r=0;r<e.adSlotPositions.length;++r)i.adSlotPositions[r]=e.adSlotPositions[r]}return i},v.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},v),l.ProtoLineItemAdBreakSettings=(b.prototype.adBreakTargeting=a.emptyArray,b.prototype.adPodTargeting=null,b.encode=function(e,t){if(t=t||n.create(),null!=e.adBreakTargeting&&e.adBreakTargeting.length)for(var i=0;i<e.adBreakTargeting.length;++i)l.ProtoLineItemAdBreakTargeting.encode(e.adBreakTargeting[i],t.uint32(10).fork()).ldelim();return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&l.ProtoLineItemAdPodTargeting.encode(e.adPodTargeting,t.uint32(18).fork()).ldelim(),t},b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdBreakSettings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.adBreakTargeting&&r.adBreakTargeting.length||(r.adBreakTargeting=[]),r.adBreakTargeting.push(l.ProtoLineItemAdBreakTargeting.decode(e,e.uint32()));break;case 2:r.adPodTargeting=l.ProtoLineItemAdPodTargeting.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},b.fromObject=function(e){if(e instanceof l.ProtoLineItemAdBreakSettings)return e;var t=new l.ProtoLineItemAdBreakSettings;if(e.adBreakTargeting){if(!Array.isArray(e.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");t.adBreakTargeting=[];for(var i=0;i<e.adBreakTargeting.length;++i){if("object"!=typeof e.adBreakTargeting[i])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");t.adBreakTargeting[i]=l.ProtoLineItemAdBreakTargeting.fromObject(e.adBreakTargeting[i])}}if(null!=e.adPodTargeting){if("object"!=typeof e.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");t.adPodTargeting=l.ProtoLineItemAdPodTargeting.fromObject(e.adPodTargeting)}return t},b.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adBreakTargeting=[]),t.defaults&&(i.adPodTargeting=null),e.adBreakTargeting&&e.adBreakTargeting.length){i.adBreakTargeting=[];for(var r=0;r<e.adBreakTargeting.length;++r)i.adBreakTargeting[r]=l.ProtoLineItemAdBreakTargeting.toObject(e.adBreakTargeting[r],t)}return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&(i.adPodTargeting=l.ProtoLineItemAdPodTargeting.toObject(e.adPodTargeting,t)),i},b.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},b),l.ProtoLineItem=(y.prototype.publisherLineItemId="",y.prototype.advertiserLineItemId="",y.prototype.adTag="",y.prototype.creativeType=0,y.prototype.sound=!1,y.prototype.viewability=!1,y.prototype.impressionTimeSpent=0,y.prototype.vendorId="",y.prototype.trackers=a.emptyArray,y.prototype.duration=0,y.prototype.renditions=a.emptyArray,y.prototype.mediaCreativeId="",y.prototype.ignoreFilledRequests=!1,y.prototype.requestCap=3,y.prototype.impressionCap=0,y.prototype.successRate=0,y.prototype.lineItemPriority=0,y.prototype.headerBidderBids="",y.prototype.headerBidderTimeout=0,y.prototype.mediaCreativeClickUrl="",y.prototype.resetRequestsCapTime=60,y.prototype.resetImpressionsCapTime=60,y.prototype.resetCapType=0,y.prototype.creativeHlsFileName="",y.prototype.timeBetweenRequests=0,y.prototype.skipMode=0,y.prototype.mediaIdTargeting=null,y.prototype.mediaKeywordsTargeting=null,y.prototype.mediaLanguageTargeting=null,y.prototype.adType=0,y.prototype.overlayTime=30,y.prototype.floorPrice=0,y.prototype.adBreakSettings=null,y.prototype.floorPrices=a.emptyArray,y.prototype.bidRate=0,y.prototype.pauseAdOutOfView=0,y.prototype.moatTrackingEnabled=!1,y.prototype.cnxCreativeId="",y.prototype.blockedDomainsRevisionNumber=0,y.prototype.advertiserContextualTargeting=a.emptyArray,y.prototype.publisherContextualTargeting=a.emptyArray,y.prototype.playerSizeTargetings=null,y.prototype.playerSize="",y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItem;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.publisherLineItemId=e.string();break;case 2:r.advertiserLineItemId=e.string();break;case 3:r.adTag=e.string();break;case 4:r.creativeType=e.int32();break;case 6:r.sound=e.bool();break;case 7:r.viewability=e.bool();break;case 9:r.impressionTimeSpent=e.int32();break;case 10:r.vendorId=e.string();break;case 12:r.trackers&&r.trackers.length||(r.trackers=[]),r.trackers.push(l.CreativeTrackerViewModel.decode(e,e.uint32()));break;case 13:r.duration=e.int32();break;case 14:r.renditions&&r.renditions.length||(r.renditions=[]),r.renditions.push(l.ProtoRendition.decode(e,e.uint32()));break;case 15:r.mediaCreativeId=e.string();break;case 16:r.ignoreFilledRequests=e.bool();break;case 17:r.requestCap=e.int32();break;case 18:r.impressionCap=e.int32();break;case 19:r.successRate=e.double();break;case 20:r.lineItemPriority=e.int32();break;case 21:r.headerBidderBids=e.string();break;case 22:r.headerBidderTimeout=e.int32();break;case 23:r.mediaCreativeClickUrl=e.string();break;case 24:r.resetRequestsCapTime=e.int32();break;case 25:r.resetImpressionsCapTime=e.int32();break;case 26:r.resetCapType=e.int32();break;case 27:r.creativeHlsFileName=e.string();break;case 28:r.timeBetweenRequests=e.int32();break;case 29:r.skipMode=e.int32();break;case 30:r.mediaIdTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 31:r.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 32:r.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 33:r.adType=e.int32();break;case 34:r.overlayTime=e.int32();break;case 35:r.floorPrice=e.double();break;case 36:r.adBreakSettings=l.ProtoLineItemAdBreakSettings.decode(e,e.uint32());break;case 38:if(r.floorPrices&&r.floorPrices.length||(r.floorPrices=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.floorPrices.push(e.double());else r.floorPrices.push(e.double());break;case 39:r.bidRate=e.double();break;case 40:r.pauseAdOutOfView=e.int32();break;case 41:r.moatTrackingEnabled=e.bool();break;case 42:r.cnxCreativeId=e.string();break;case 44:r.blockedDomainsRevisionNumber=e.int32();break;case 45:r.advertiserContextualTargeting&&r.advertiserContextualTargeting.length||(r.advertiserContextualTargeting=[]),r.advertiserContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 46:r.publisherContextualTargeting&&r.publisherContextualTargeting.length||(r.publisherContextualTargeting=[]),r.publisherContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 47:r.playerSizeTargetings=l.ProtoPlayerSizeTargetings.decode(e,e.uint32());break;case 101:r.playerSize=e.string();break;default:e.skipType(7&s)}}return r},y.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.trackers=[],i.renditions=[],i.floorPrices=[],i.advertiserContextualTargeting=[],i.publisherContextualTargeting=[]),t.defaults&&(i.publisherLineItemId="",i.advertiserLineItemId="",i.adTag="",i.creativeType=t.enums===String?"ThirdParty":0,i.sound=!1,i.viewability=!1,i.impressionTimeSpent=0,i.vendorId="",i.duration=0,i.mediaCreativeId="",i.ignoreFilledRequests=!1,i.requestCap=3,i.impressionCap=0,i.successRate=0,i.lineItemPriority=t.enums===String?"House":0,i.headerBidderBids="",i.headerBidderTimeout=0,i.mediaCreativeClickUrl="",i.resetRequestsCapTime=60,i.resetImpressionsCapTime=60,i.resetCapType=t.enums===String?"TimeCapping":0,i.creativeHlsFileName="",i.timeBetweenRequests=0,i.skipMode=t.enums===String?"IfLongerThan31Sec":0,i.mediaIdTargeting=null,i.mediaKeywordsTargeting=null,i.mediaLanguageTargeting=null,i.adType=t.enums===String?"Video":0,i.overlayTime=30,i.floorPrice=0,i.adBreakSettings=null,i.bidRate=0,i.pauseAdOutOfView=t.enums===String?"Default":0,i.moatTrackingEnabled=!1,i.cnxCreativeId="",i.blockedDomainsRevisionNumber=0,i.playerSizeTargetings=null,i.playerSize=""),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.adTag&&e.hasOwnProperty("adTag")&&(i.adTag=e.adTag),null!=e.creativeType&&e.hasOwnProperty("creativeType")&&(i.creativeType=t.enums===String?l.ProtoCreativeTypeEnum[e.creativeType]:e.creativeType),null!=e.sound&&e.hasOwnProperty("sound")&&(i.sound=e.sound),null!=e.viewability&&e.hasOwnProperty("viewability")&&(i.viewability=e.viewability),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.vendorId&&e.hasOwnProperty("vendorId")&&(i.vendorId=e.vendorId),e.trackers&&e.trackers.length){i.trackers=[];for(var r=0;r<e.trackers.length;++r)i.trackers[r]=l.CreativeTrackerViewModel.toObject(e.trackers[r],t)}if(null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),e.renditions&&e.renditions.length)for(i.renditions=[],r=0;r<e.renditions.length;++r)i.renditions[r]=l.ProtoRendition.toObject(e.renditions[r],t);if(null!=e.mediaCreativeId&&e.hasOwnProperty("mediaCreativeId")&&(i.mediaCreativeId=e.mediaCreativeId),null!=e.ignoreFilledRequests&&e.hasOwnProperty("ignoreFilledRequests")&&(i.ignoreFilledRequests=e.ignoreFilledRequests),null!=e.requestCap&&e.hasOwnProperty("requestCap")&&(i.requestCap=e.requestCap),null!=e.impressionCap&&e.hasOwnProperty("impressionCap")&&(i.impressionCap=e.impressionCap),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.lineItemPriority&&e.hasOwnProperty("lineItemPriority")&&(i.lineItemPriority=t.enums===String?l.ProtoLineItemPriority[e.lineItemPriority]:e.lineItemPriority),null!=e.headerBidderBids&&e.hasOwnProperty("headerBidderBids")&&(i.headerBidderBids=e.headerBidderBids),null!=e.headerBidderTimeout&&e.hasOwnProperty("headerBidderTimeout")&&(i.headerBidderTimeout=e.headerBidderTimeout),null!=e.mediaCreativeClickUrl&&e.hasOwnProperty("mediaCreativeClickUrl")&&(i.mediaCreativeClickUrl=e.mediaCreativeClickUrl),null!=e.resetRequestsCapTime&&e.hasOwnProperty("resetRequestsCapTime")&&(i.resetRequestsCapTime=e.resetRequestsCapTime),null!=e.resetImpressionsCapTime&&e.hasOwnProperty("resetImpressionsCapTime")&&(i.resetImpressionsCapTime=e.resetImpressionsCapTime),null!=e.resetCapType&&e.hasOwnProperty("resetCapType")&&(i.resetCapType=t.enums===String?l.ProtoResetCapTypeEnum[e.resetCapType]:e.resetCapType),null!=e.creativeHlsFileName&&e.hasOwnProperty("creativeHlsFileName")&&(i.creativeHlsFileName=e.creativeHlsFileName),null!=e.timeBetweenRequests&&e.hasOwnProperty("timeBetweenRequests")&&(i.timeBetweenRequests=e.timeBetweenRequests),null!=e.skipMode&&e.hasOwnProperty("skipMode")&&(i.skipMode=t.enums===String?l.ProtoAdSkipMode[e.skipMode]:e.skipMode),null!=e.mediaIdTargeting&&e.hasOwnProperty("mediaIdTargeting")&&(i.mediaIdTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaIdTargeting,t)),null!=e.mediaKeywordsTargeting&&e.hasOwnProperty("mediaKeywordsTargeting")&&(i.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaKeywordsTargeting,t)),null!=e.mediaLanguageTargeting&&e.hasOwnProperty("mediaLanguageTargeting")&&(i.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaLanguageTargeting,t)),null!=e.adType&&e.hasOwnProperty("adType")&&(i.adType=t.enums===String?l.ProtoAdType[e.adType]:e.adType),null!=e.overlayTime&&e.hasOwnProperty("overlayTime")&&(i.overlayTime=e.overlayTime),null!=e.floorPrice&&e.hasOwnProperty("floorPrice")&&(i.floorPrice=t.json&&!isFinite(e.floorPrice)?String(e.floorPrice):e.floorPrice),null!=e.adBreakSettings&&e.hasOwnProperty("adBreakSettings")&&(i.adBreakSettings=l.ProtoLineItemAdBreakSettings.toObject(e.adBreakSettings,t)),e.floorPrices&&e.floorPrices.length)for(i.floorPrices=[],r=0;r<e.floorPrices.length;++r)i.floorPrices[r]=t.json&&!isFinite(e.floorPrices[r])?String(e.floorPrices[r]):e.floorPrices[r];if(null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.pauseAdOutOfView&&e.hasOwnProperty("pauseAdOutOfView")&&(i.pauseAdOutOfView=t.enums===String?l.ProtoLineItemPauseAdOutOfViewEnum[e.pauseAdOutOfView]:e.pauseAdOutOfView),null!=e.moatTrackingEnabled&&e.hasOwnProperty("moatTrackingEnabled")&&(i.moatTrackingEnabled=e.moatTrackingEnabled),null!=e.cnxCreativeId&&e.hasOwnProperty("cnxCreativeId")&&(i.cnxCreativeId=e.cnxCreativeId),null!=e.blockedDomainsRevisionNumber&&e.hasOwnProperty("blockedDomainsRevisionNumber")&&(i.blockedDomainsRevisionNumber=e.blockedDomainsRevisionNumber),e.advertiserContextualTargeting&&e.advertiserContextualTargeting.length)for(i.advertiserContextualTargeting=[],r=0;r<e.advertiserContextualTargeting.length;++r)i.advertiserContextualTargeting[r]=l.ProtoContextualTargetingCaseModel.toObject(e.advertiserContextualTargeting[r],t);if(e.publisherContextualTargeting&&e.publisherContextualTargeting.length)for(i.publisherContextualTargeting=[],r=0;r<e.publisherContextualTargeting.length;++r)i.publisherContextualTargeting[r]=l.ProtoContextualTargetingCaseModel.toObject(e.publisherContextualTargeting[r],t);return null!=e.playerSizeTargetings&&e.hasOwnProperty("playerSizeTargetings")&&(i.playerSizeTargetings=l.ProtoPlayerSizeTargetings.toObject(e.playerSizeTargetings,t)),null!=e.playerSize&&e.hasOwnProperty("playerSize")&&(i.playerSize=e.playerSize),i},y),l.ProtoTargetingChoiceModel=(f.prototype.choiceCriteria=0,f.prototype.items=a.emptyArray,f.encode=function(e,t){if(t=t||n.create(),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&t.uint32(8).int32(e.choiceCriteria),null!=e.items&&e.items.length)for(var i=0;i<e.items.length;++i)t.uint32(18).string(e.items[i]);return t},f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoTargetingChoiceModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.choiceCriteria=e.int32();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(e.string());break;default:e.skipType(7&s)}}return r},f.fromObject=function(e){if(e instanceof l.ProtoTargetingChoiceModel)return e;var t=new l.ProtoTargetingChoiceModel;switch(e.choiceCriteria){case"Only":case 0:t.choiceCriteria=0;break;case"Except":case 1:t.choiceCriteria=1}if(e.items){if(!Array.isArray(e.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i)t.items[i]=String(e.items[i])}return t},f.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.choiceCriteria=t.enums===String?"Only":0),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&(i.choiceCriteria=t.enums===String?l.ProtoChoiceCriteriaEnum[e.choiceCriteria]:e.choiceCriteria),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=e.items[r]}return i},f.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},f),l.ProtoContextualTargetingCaseModel=(m.prototype.filters=a.emptyArray,m.encode=function(e,t){if(t=t||n.create(),null!=e.filters&&e.filters.length)for(var i=0;i<e.filters.length;++i)l.ProtoContextualTargetingFilterModel.encode(e.filters[i],t.uint32(10).fork()).ldelim();return t},m.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoContextualTargetingCaseModel;e.pos<i;){var s=e.uint32();s>>>3==1?(r.filters&&r.filters.length||(r.filters=[]),r.filters.push(l.ProtoContextualTargetingFilterModel.decode(e,e.uint32()))):e.skipType(7&s)}return r},m.fromObject=function(e){if(e instanceof l.ProtoContextualTargetingCaseModel)return e;var t=new l.ProtoContextualTargetingCaseModel;if(e.filters){if(!Array.isArray(e.filters))throw TypeError(".ProtoContextualTargetingCaseModel.filters: array expected");t.filters=[];for(var i=0;i<e.filters.length;++i){if("object"!=typeof e.filters[i])throw TypeError(".ProtoContextualTargetingCaseModel.filters: object expected");t.filters[i]=l.ProtoContextualTargetingFilterModel.fromObject(e.filters[i])}}return t},m.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.filters=[]),e.filters&&e.filters.length){i.filters=[];for(var r=0;r<e.filters.length;++r)i.filters[r]=l.ProtoContextualTargetingFilterModel.toObject(e.filters[r],t)}return i},m.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},m),l.ProtoContextualTargetingFilterModel=(g.prototype.type=0,g.prototype.items=a.emptyArray,g.encode=function(e,t){if(t=t||n.create(),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(8).int32(e.type),null!=e.items&&e.items.length)for(var i=0;i<e.items.length;++i)t.uint32(18).string(e.items[i]);return t},g.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoContextualTargetingFilterModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(e.string());break;default:e.skipType(7&s)}}return r},g.fromObject=function(e){if(e instanceof l.ProtoContextualTargetingFilterModel)return e;var t=new l.ProtoContextualTargetingFilterModel;switch(e.type){case"IncludeAny":case 0:t.type=0;break;case"IncludeAll":case 1:t.type=1;break;case"ExcludeAny":case 2:t.type=2;break;case"ExcludeAll":case 3:t.type=3}if(e.items){if(!Array.isArray(e.items))throw TypeError(".ProtoContextualTargetingFilterModel.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i)t.items[i]=String(e.items[i])}return t},g.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.type=t.enums===String?"IncludeAny":0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoLineItemContextualTargetingEnum[e.type]:e.type),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=e.items[r]}return i},g.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},g),l.ProtoPlayerSizeTargetings=(p.prototype.sizeChoiceCriteria=0,p.prototype.minWidth=0,p.prototype.maxWidth=0,p.encode=function(e,t){return t=t||n.create(),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&t.uint32(8).int32(e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&t.uint32(16).int32(e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&t.uint32(24).int32(e.maxWidth),t},p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayerSizeTargetings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.sizeChoiceCriteria=e.int32();break;case 2:r.minWidth=e.int32();break;case 3:r.maxWidth=e.int32();break;default:e.skipType(7&s)}}return r},p.fromObject=function(e){if(e instanceof l.ProtoPlayerSizeTargetings)return e;var t=new l.ProtoPlayerSizeTargetings;switch(e.sizeChoiceCriteria){case"GreaterThan":case 0:t.sizeChoiceCriteria=0;break;case"SmallerThan":case 1:t.sizeChoiceCriteria=1;break;case"Between":case 2:t.sizeChoiceCriteria=2}return null!=e.minWidth&&(t.minWidth=0|e.minWidth),null!=e.maxWidth&&(t.maxWidth=0|e.maxWidth),t},p.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.sizeChoiceCriteria=t.enums===String?"GreaterThan":0,i.minWidth=0,i.maxWidth=0),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&(i.sizeChoiceCriteria=t.enums===String?l.ProtoSizeChoiceCriteriaEnum[e.sizeChoiceCriteria]:e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&(i.minWidth=e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&(i.maxWidth=e.maxWidth),i},p.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},p),l.ProtoRendition=(u.prototype.height=0,u.prototype.codec="",u.prototype.file="",u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRendition;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.height=e.int32();break;case 2:r.codec=e.string();break;case 3:r.file=e.string();break;default:e.skipType(7&s)}}return r},u.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.height=0,i.codec="",i.file=""),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=e.codec),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},u),l.ProtoPlayerPlaybackModeEnum=(r={},(i=Object.create(r))[r[0]="Autoplay"]=0,i[r[1]="ScrollToPlay"]=1,i[r[2]="ClickToPlay"]=2,i),l.ProtoPlayerCloseButtonMode=(r={},(i=Object.create(r))[r[0]="Off"]=0,i[r[1]="OnHover"]=1,i[r[2]="OnHoverAfterFirstAd"]=2,i[r[3]="AlwaysOn"]=3,i),l.ProtoPlayerFloatingMode=(r={},(i=Object.create(r))[r[0]="Off"]=0,i[r[1]="OnPageLoad"]=1,i[r[2]="AfterInView"]=2,i[r[3]="Always"]=3,i),l.ProtoPlayerSoundMode=(r={},(i=Object.create(r))[r[0]="Mute"]=0,i[r[1]="On"]=1,i[r[2]="Hover"]=2,i),l.ProtoPlayerInsertMode=(r={},(i=Object.create(r))[r[0]="WithinContainer"]=0,i[r[1]="BeforeContainer"]=1,i[r[2]="AfterContainer"]=2,i[r[3]="ReplaceContainer"]=3,i[r[4]="HideContainer"]=4,i),l.ProtoAdViewabilityPolicy=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Strict"]=1,i),l.ProtoSharingDestination=(r={},(i=Object.create(r))[r[0]="Facebook"]=0,i[r[1]="Twitter"]=1,i[r[2]="LinkedIn"]=2,i),l.ProtoFloatingFixedPositionMode=(r={},(i=Object.create(r))[r[0]="Page"]=0,i[r[1]="Element"]=1,i),l.ProtoPositionMode=(r={},(i=Object.create(r))[r[0]="BottomRight"]=0,i[r[1]="BottomLeft"]=1,i[r[2]="TopRight"]=2,i[r[3]="TopLeft"]=3,i),l.ProtoAdPlaybackMode=(r={},(i=Object.create(r))[r[0]="Autoplay"]=0,i[r[1]="ScrollToPlay"]=1,i),l.ProtoFloatingAppendLocationEnum=(r={},(i=Object.create(r))[r[0]="Above"]=0,i[r[1]="Below"]=1,i[r[2]="Within"]=2,i),l.ProtoPlayerAdSkippability=(r={},(i=Object.create(r))[r[0]="IfLongerThan31Sec"]=0,i[r[1]="Always"]=1,i[r[2]="NoRestrictions"]=2,i),l.ProtoVideoQuality=(r={},(i=Object.create(r))[r[0]="Auto"]=0,i[r[1]="High1080p"]=1,i[r[2]="High720p"]=2,i[r[3]="Medium360p"]=3,i),l.ProtoImplementationType=(r={},(i=Object.create(r))[r[0]="Web"]=0,i[r[1]="Amp"]=1,i),l.ProtoAdBreakTypeEnum=(r={},(i=Object.create(r))[r[0]="None"]=0,i[r[1]="PreRoll"]=1,i[r[2]="MidRoll"]=2,i[r[3]="PostRoll"]=3,i),l.ProtoAdSlotAdTypeEnum=(r={},(i=Object.create(r))[r[0]="SingleAd"]=0,i[r[1]="AdPod"]=1,i),l.ProtoSupplyChain=(h.prototype.businessDomain="",h.prototype.supplyChainId="",h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoSupplyChain;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.businessDomain=e.string();break;case 3:r.supplyChainId=e.string();break;default:e.skipType(7&s)}}return r},h.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.businessDomain="",i.supplyChainId=""),null!=e.businessDomain&&e.hasOwnProperty("businessDomain")&&(i.businessDomain=e.businessDomain),null!=e.supplyChainId&&e.hasOwnProperty("supplyChainId")&&(i.supplyChainId=e.supplyChainId),i},h),l.ProtoUserInformation=(c.prototype.userId="",c.prototype.lookupId="",c.prototype.lookupResponseCode=0,c.prototype.callFraudSensor=!1,c.prototype.publisherAdsTxt="",c.encode=function(e,t){return t=t||n.create(),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(10).string(e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&t.uint32(26).string(e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&t.uint32(32).int32(e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&t.uint32(40).bool(e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&t.uint32(50).string(e.publisherAdsTxt),t},c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoUserInformation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.userId=e.string();break;case 3:r.lookupId=e.string();break;case 4:r.lookupResponseCode=e.int32();break;case 5:r.callFraudSensor=e.bool();break;case 6:r.publisherAdsTxt=e.string();break;default:e.skipType(7&s)}}return r},c.fromObject=function(e){if(e instanceof l.ProtoUserInformation)return e;var t=new l.ProtoUserInformation;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.lookupId&&(t.lookupId=String(e.lookupId)),null!=e.lookupResponseCode&&(t.lookupResponseCode=0|e.lookupResponseCode),null!=e.callFraudSensor&&(t.callFraudSensor=Boolean(e.callFraudSensor)),null!=e.publisherAdsTxt&&(t.publisherAdsTxt=String(e.publisherAdsTxt)),t},c.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.userId="",i.lookupId="",i.lookupResponseCode=0,i.callFraudSensor=!1,i.publisherAdsTxt=""),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&(i.lookupId=e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&(i.lookupResponseCode=e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&(i.callFraudSensor=e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&(i.publisherAdsTxt=e.publisherAdsTxt),i},c.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},c),l.ProtoAdBreak=(d.prototype.types=a.emptyArray,d.prototype.maxAdPodDuration=0,d.prototype.maxAdSlotDuration=180,d.prototype.numberOfAdSlots=1,d.encode=function(e,t){if(t=t||n.create(),null!=e.types&&e.types.length){t.uint32(10).fork();for(var i=0;i<e.types.length;++i)t.int32(e.types[i]);t.ldelim()}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&t.uint32(16).int32(e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&t.uint32(24).int32(e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&t.uint32(32).int32(e.numberOfAdSlots),t},d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoAdBreak;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:if(r.types&&r.types.length||(r.types=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.types.push(e.int32());else r.types.push(e.int32());break;case 2:r.maxAdPodDuration=e.int32();break;case 3:r.maxAdSlotDuration=e.int32();break;case 4:r.numberOfAdSlots=e.int32();break;default:e.skipType(7&s)}}return r},d.fromObject=function(e){if(e instanceof l.ProtoAdBreak)return e;var t=new l.ProtoAdBreak;if(e.types){if(!Array.isArray(e.types))throw TypeError(".ProtoAdBreak.types: array expected");t.types=[];for(var i=0;i<e.types.length;++i)switch(e.types[i]){default:case"None":case 0:t.types[i]=0;break;case"PreRoll":case 1:t.types[i]=1;break;case"MidRoll":case 2:t.types[i]=2;break;case"PostRoll":case 3:t.types[i]=3}}return null!=e.maxAdPodDuration&&(t.maxAdPodDuration=0|e.maxAdPodDuration),null!=e.maxAdSlotDuration&&(t.maxAdSlotDuration=0|e.maxAdSlotDuration),null!=e.numberOfAdSlots&&(t.numberOfAdSlots=0|e.numberOfAdSlots),t},d.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.types=[]),t.defaults&&(i.maxAdPodDuration=0,i.maxAdSlotDuration=180,i.numberOfAdSlots=1),e.types&&e.types.length){i.types=[];for(var r=0;r<e.types.length;++r)i.types[r]=t.enums===String?l.ProtoAdBreakTypeEnum[e.types[r]]:e.types[r]}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&(i.maxAdPodDuration=e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&(i.maxAdSlotDuration=e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&(i.numberOfAdSlots=e.numberOfAdSlots),i},d.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},d),e.exports=l},function(e,t,i){"use strict";i.d(t,"b",function(){return r}),i.d(t,"d",function(){return s}),i.d(t,"e",function(){return n}),i.d(t,"f",function(){return o}),i.d(t,"g",function(){return a}),i.d(t,"a",function(){return l}),i.d(t,"c",function(){return d});const r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,s=36e5,n=6e4,o=1e3,a=60,l=864e5,d=60},function(e,t,i){"use strict";var r,s,n,o;i.d(t,"a",function(){return r}),i.d(t,"d",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"b",function(){return o}),(t=r=r||{})[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Ready=2]="Ready",t[t.Error=3]="Error",t[t.Capped=4]="Capped",t[t.InWin=5]="InWin",t[t.Consumed=6]="Consumed",t[t.InImpression=7]="InImpression",(t=s=s||{})[t.Javascript=0]="Javascript",t[t.Video=1]="Video",(t=n=n||{}).Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.VpaidError="vpaidError",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.SpotxError="spotxError",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.SpotXAdOSInit="spotxAdOSInit",t.SpotXLoadAd="spotxLoadAd",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidEnforcements="vpaidEnforcements",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.AolImpresssionFunction="aolCustom",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.CreateSameAd="createSameAd",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorNoHtml="displayIntegratorNoMime",t.DisplayIntegratorJavascriptSyntax="displayIntegratorJavascriptSyntax",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",(t=o=o||{}).Html="text/html",t.Javascript="application/javascript"},function(e,t,i){"use strict";i=i(4).b,i=Object.assign(Object.assign({},i),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"});t.a=i},function(e,t,i){"use strict";var r=i(19);class s{constructor(e){this.base=e,this.api={pls:e.core+"core/pls",story:e.core+"core/story",rtb:e.core+"rtb/g",vpaid:e.core+"vpaid",syncUrls:e.core+"core/us",fallbackstory:e.core+"core/fallbackstory",cookie:e.core+"core/ck",tam:e.core+"core/atam"},this.tracking={session_rendered:e.tracking+"sr",session_view:e.tracking+"sv",session_time:e.tracking+"st",session_client_error:e.tracking+"e",media_quartile:e.tracking+"mq",media_click:e.tracking+"mc",ad_impression:e.tracking+"ai",bids:e.tracking+"abt",ad_impression_viewable:e.tracking+"av",ad_quartile:e.tracking+"aq",ad_click:e.tracking+"ac",contentLoad:e.tracking+"clr",noContent:e.tracking+"nc",eventService:e.tracking+"et",tracking:e.tracking+"tr",vastWin:e.tracking+"vw",rtb:e.tracking+"g",logging:e.tracking+"e",galleryCardClick:e.tracking+"cc",playerStart:e.tracking+"ps",adOpportunity:e.tracking+"ao",sessionAdBlocker:e.tracking+"sab",heavy_ad_intervention:e.tracking+"ha"},this.assets={css:{elements:`${this.$(e.assets)}connatix.player.css`,playspace:`${this.$(e.assets)}connatix.playspace.css`}}}$(e){return"development"===r.a.env?"//cd.connatix.com/":`${e}p/${r.a.version}/`}}var n=i(17),o=i(7);i.d(t,"a",function(){return a});class a{static Z(){var e=Object(n.b)("cnxEnv",Object(o.f)(window).topFrame.location.href);return e&&(r.a.domainPrefix=`-${e}`),Object.keys(this.tt).forEach(e=>{this.tt[e]=this.tt[e].replace("{{env}}",r.a.domainPrefix)}),new s(a.tt)}static get endPoints(){return null===a.it&&(a.it=a.Z()),a.it}}a.tt={a:"//a{{env}}.connatix.com/",video:"//vid.connatix.com/",image:"//img.connatix.com/",core:"https://capi{{env}}.connatix.com/",tracking:"//capi{{env}}.connatix.com/tr/",metadata:"//vid.connatix.com/",assets:"//cds{{env}}.connatix.com/",lineItems:"//lit.connatix.com/"},a.it=null},function(e,t,i){"use strict";i.d(t,"g",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return a}),i.d(t,"h",function(){return l}),i.d(t,"f",function(){return d}),i.d(t,"a",function(){return c}),i.d(t,"b",function(){return h});var r=i(1);function s(e,t,i,r,s){return i+(s-e)/(t-e)*(r-i)}function n(i,e){return e.reduce((e,t)=>Math.abs(t-i)<=Math.abs(e-i)?t:e)}function o(e,t){let i=e,r=t;for(;0!==i&&0!==r;)i>r?i%=r:r%=i;return 0===i?r:i}function a(e,t){return t/100*e}function l(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}function d(e){return!Object(r.e)(e.width)||!Object(r.e)(e.height)}function c(e){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}];let i;for(i=t.length-1;0<i&&!(e>=t[i].value);i--);return e/t[i].value<t[i].value/10?(Math.floor(e/t[i].value*10)/10).toFixed(1).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t[i].symbol:Math.floor(e/t[i].value).toFixed(0)+t[i].symbol}function h(t,i){for(let e=i;1<e;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},function(e,t,i){function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var r,n;"undefined"!=typeof window&&(e.exports=(r=[function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return n});i=i(5);function o(){}var r={trace:o,debug:o,log:o,warn:o,info:o,error:o},a=r,l=Object(i.a)(),s=function(e){if(l.console&&!0===e||"object"==typeof e){!function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];i.forEach(function(e){var s,n;a[e]=t[e]?t[e].bind(t):(s=e,(n=l.console[s])?function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];i[0]&&(i[0]=(e=i[0],"["+s+"] > "+e)),n.apply(l.console,i)}:o)})}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=r}}else a=r},n=a},function(e,t,i){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(e,t,i){"use strict";var r,s;i.d(t,"b",function(){return r}),i.d(t,"a",function(){return s}),(t=r=r||{}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",(t=s=s||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},function(e,t,i){"use strict";i.d(t,"b",function(){return r});var c,h=i(5),i=(a.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a.getID3Data=function(e,t){for(var i=t,r=0;a.isHeader(e,t);)r+=10,r+=a.et(e,t+6),a.isFooter(e,t+10)&&(r+=10),t+=r;if(0<r)return e.subarray(i,i+r)},a.et=function(e,t){var i=0,i=(127&e[t])<<21;return i|=(127&e[t+1])<<14,(i|=(127&e[t+2])<<7)|127&e[t+3]},a.getTimeStamp=function(e){for(var t=a.getID3Frames(e),i=0;i<t.length;i++){var r=t[i];if(a.isTimeStampFrame(r))return a.st(r)}},a.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},a.nt=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=a.et(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}},a.getID3Frames=function(e){for(var t=0,i=[];a.isHeader(e,t);){for(var r=a.et(e,t+6),s=(t+=10)+r;t+8<s;){var n=a.nt(e.subarray(t)),o=a.rt(n);o&&i.push(o),t+=n.size+10}a.isFooter(e,t)&&(t+=10)}return i},a.rt=function(e){return"PRIV"===e.type?a.at(e):"T"===e.type[0]?a.ht(e):"W"===e.type[0]?a.ot(e):void 0},a.st=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}},a.at=function(e){if(!(e.size<2)){var t=a.ct(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}},a.ht=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=a.ct(e.data.subarray(1),!0);t+=i.length+1;t=a.ct(e.data.subarray(t));return{key:e.type,info:i,data:t}}t=a.ct(e.data.subarray(1));return{key:e.type,data:t}}},a.ot=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=a.ct(e.data.subarray(1));t+=i.length+1;t=a.ct(e.data.subarray(t));return{key:e.type,info:i,data:t}}t=a.ct(e.data);return{key:e.type,data:t}},a.ct=function(e,t){void 0===t&&(t=!1);var i=(r=Object(h.a)(),c=c||void 0===r.TextDecoder?c:new r.TextDecoder("utf-8"));if(i){var r=i.decode(e);if(t){i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var s,n,o,a=e.length,l="",d=0;d<a;){if(0===(s=e[d++])&&t)return l;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(s);break;case 12:case 13:n=e[d++],l+=String.fromCharCode((31&s)<<6|63&n);break;case 14:n=e[d++],o=e[d++],l+=String.fromCharCode((15&s)<<12|(63&n)<<6|(63&o)<<0)}}return l},a);function a(){}var r=i.ct;t.a=i},function(e,t,i){"use strict";function r(){return"undefined"==typeof window?self:window.cnxRenderWindow||window}i.d(t,"a",function(){return r})},function(e,t){e.exports=void 0},function(e,t,i){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}r=a.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=a.normalizePath(r.path),a.buildURLFromParts(r)):t;t=a.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(s=n.exec(t.path),t.netLoc=s[1],t.path=s[2]),t.netLoc&&!t.path&&(t.path="/");var s,e={scheme:t.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};return r.netLoc||(e.netLoc=t.netLoc,"/"===r.path[0])||(r.path?(s=(s=t.path).substring(0,s.lastIndexOf("/")+1)+r.path,e.path=a.normalizePath(s)):(e.path=t.path,r.params||(e.params=t.params,r.query||(e.query=t.query)))),null===e.path&&(e.path=i.alwaysNormalize?a.normalizePath(r.path):r.path),a.buildURLFromParts(e)},parseURL:function(e){e=r.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(s,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a},function(e,t,i){"use strict";var r=Object.prototype.hasOwnProperty,p="~";function s(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,i,r,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");s=new n(i,r||e,s),t=p?p+t:t;return e.lt[t]?e.lt[t].fn?e.lt[t]=[e.lt[t],s]:e.lt[t].push(s):(e.lt[t]=s,e.ut++),e}function l(e,t){0==--e.ut?e.lt=new s:delete e.lt[t]}function a(){this.lt=new s,this.ut=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(p=!1)),a.prototype.eventNames=function(){var e,t,i=[];if(0===this.ut)return i;for(t in e=this.lt)r.call(e,t)&&i.push(p?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var e=p?p+e:e,t=this.lt[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,r=t.length,s=new Array(r);i<r;i++)s[i]=t[i].fn;return s},a.prototype.listenerCount=function(e){e=p?p+e:e,e=this.lt[e];return e?e.fn?1:e.length:0},a.prototype.emit=function(e,t,i,r,s,n){var o=p?p+e:e;if(!this.lt[o])return!1;var a,l=this.lt[o],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,r),!0;case 5:return l.fn.call(l.context,t,i,r,s),!0;case 6:return l.fn.call(l.context,t,i,r,s,n),!0}for(u=1,a=new Array(d-1);u<d;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else for(var c,h=l.length,u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,i);break;case 4:l[u].fn.call(l[u].context,t,i,r);break;default:if(!a)for(c=1,a=new Array(d-1);c<d;c++)a[c-1]=arguments[c];l[u].fn.apply(l[u].context,a)}return!0},a.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,i,r){e=p?p+e:e;if(!this.lt[e])return this;if(!t)return l(this,e),this;var s=this.lt[e];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||l(this,e);else{for(var n=0,o=[],a=s.length;n<a;n++)(s[n].fn!==t||r&&!s[n].once||i&&s[n].context!==i)&&o.push(s[n]);o.length?this.lt[e]=1===o.length?o[0]:o:l(this,e)}return this},a.prototype.removeAllListeners=function(e){return e?(e=p?p+e:e,this.lt[e]&&l(this,e)):(this.lt=new s,this.ut=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=p,e.exports=a.EventEmitter=a},function(e,t,i){"use strict";var V=i(1),q=i(2),a=(c.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},c),l=(o.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},o),d=((P=n.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),r=0;r<4;r++)i[r]=t.getUint32(4*r);return i},P.initTable=function(){for(var e=this.sBox,t=this.invSBox,i=this.subMix,r=i[0],s=i[1],n=i[2],o=i[3],i=this.invSubMix,a=i[0],l=i[1],d=i[2],c=i[3],h=new Uint32Array(256),u=0,p=0,g=0,g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;e[u]=m=m>>>8^255&m^99;var f=h[t[m]=u],y=h[f],b=h[y],v=257*h[m]^16843008*m;r[u]=v<<24|v>>>8,s[u]=v<<16|v>>>16,n[u]=v<<8|v>>>24,o[u]=v,a[m]=(v=16843009*b^65537*y^257*f^16843008*u)<<24|v>>>8,l[m]=v<<16|v>>>16,d[m]=v<<8|v>>>24,c[m]=v,u?(u=f^h[h[h[b^f]]],p^=h[h[p]]):u=p=1}},P.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,r=0;r<t.length&&i;)i=t[r]===this.key[r],r++;if(!i){this.key=t;var s=this.keySize=t.length;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size="+s);for(var n,o,a,l=this.ksRows=4*(s+6+1),d=this.keySchedule=new Uint32Array(l),c=this.invKeySchedule=new Uint32Array(l),h=this.sBox,u=this.rcon,e=this.invSubMix,p=e[0],g=e[1],m=e[2],f=e[3],y=0;y<l;y++)y<s?o=d[y]=t[y]:(a=o,y%s==0?(a=h[(a=a<<8|a>>>24)>>>24]<<24|h[a>>>16&255]<<16|h[a>>>8&255]<<8|h[255&a],a^=u[y/s|0]<<24):6<s&&y%s==4&&(a=h[a>>>24]<<24|h[a>>>16&255]<<16|h[a>>>8&255]<<8|h[255&a]),d[y]=o=(d[y-s]^a)>>>0);for(n=0;n<l;n++)y=l-n,a=3&n?d[y]:d[y-4],c[n]=n<4||y<=4?a:p[h[a>>>24]]^g[h[a>>>16&255]]^m[h[a>>>8&255]]^f[h[255&a]],c[n]=c[n]>>>0}},P.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},P.decrypt=function(e,t,i,r){for(var s,n,o,a,l,d,c,h,u,p,g,m,f,y,b=this.keySize+6,v=this.invKeySchedule,P=this.invSBox,S=this.invSubMix,I=S[0],T=S[1],k=S[2],A=S[3],i=this.uint8ArrayToUint32Array_(i),O=i[0],C=i[1],w=i[2],x=i[3],E=new Int32Array(e),L=new Int32Array(E.length),R=this.networkToHostOrderSwap;t<E.length;){for(u=R(E[t]),p=R(E[t+1]),g=R(E[t+2]),m=R(E[t+3]),l=u^v[0],d=m^v[1],c=g^v[2],h=p^v[3],f=4,y=1;y<b;y++)s=I[l>>>24]^T[d>>16&255]^k[c>>8&255]^A[255&h]^v[f],n=I[d>>>24]^T[c>>16&255]^k[h>>8&255]^A[255&l]^v[f+1],o=I[c>>>24]^T[h>>16&255]^k[l>>8&255]^A[255&d]^v[f+2],a=I[h>>>24]^T[l>>16&255]^k[d>>8&255]^A[255&c]^v[f+3],l=s,d=n,c=o,h=a,f+=4;s=P[l>>>24]<<24^P[d>>16&255]<<16^P[c>>8&255]<<8^P[255&h]^v[f],n=P[d>>>24]<<24^P[c>>16&255]<<16^P[h>>8&255]<<8^P[255&l]^v[f+1],o=P[c>>>24]<<24^P[h>>16&255]<<16^P[l>>8&255]<<8^P[255&d]^v[f+2],a=P[h>>>24]<<24^P[l>>16&255]<<16^P[d>>8&255]<<8^P[255&c]^v[f+3],f+=3,L[t]=R(s^O),L[t+1]=R(a^C),L[t+2]=R(o^w),L[t+3]=R(n^x),O=u,C=p,w=g,x=m,t+=4}return r?(r=(e=(i=L.buffer).byteLength)&&new DataView(i).getUint8(e-1))?i.slice(0,e-r):i:L.buffer},P.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},n),H=i(0),s=i(5),m=((P=r.prototype).isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},P.decrypt=function(t,i,r,s){var e,n,o=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(H.b.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new d),e.expandKey(i),s(e.decrypt(t,0,r,this.removePKCS7Padding))):(this.logEnabled&&(H.b.log("WebCrypto AES decrypt"),this.logEnabled=!1),n=this.subtle,this.key!==i&&(this.key=i,this.fastAesKey=new l(n,i)),this.fastAesKey.expandKey().then(function(e){new a(n,r).decrypt(t,e).catch(function(e){o.onWebCryptoError(e,t,i,r,s)}).then(function(e){s(e)})}).catch(function(e){o.onWebCryptoError(e,t,i,r,s)}))},P.onWebCryptoError=function(e,t,i,r,s){this.config.enableSoftwareAES?(H.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,i,r,s)):(H.b.error("decrypting error : "+e.message),this.observer.trigger(V.a.ERROR,{type:q.b.MEDIA_ERROR,details:q.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},P.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},r),g=i(3);function r(e,t,i){i=(void 0===i?{}:i).removePKCS7Padding,i=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i)try{var r=Object(s.a)().crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}function n(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}function o(e,t){this.subtle=e,this.key=t}function c(e,t){this.subtle=e,this.aesIV=t}function h(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function p(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return t+1<e.length&&h(e,t)}function y(e,t,i,r,s){e.samplerate||(s=function(e,t,i,r){var s,n,o,a=navigator.userAgent.toLowerCase(),l=r,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&t[i+2])>>>6);if(!((s=(60&t[i+2])>>>2)>d.length-1))return n=(1&t[i+2])<<2,n|=(192&t[i+3])>>>6,H.b.log("manifest codec:"+r+",ADTS data:type:"+c+",sampleingIndex:"+s+"["+d[s]+"Hz],channelConfig:"+n),r=/firefox/i.test(a)?6<=s?(c=5,o=new Array(4),s-3):(c=2,o=new Array(2),s):-1!==a.indexOf("android")?(c=2,o=new Array(2),s):(c=5,o=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&6<=s?s-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(6<=s&&1==n||/vivaldi/i.test(a))||!r&&1==n)&&(c=2,o=new Array(2)),s)),o[0]=c<<3,o[0]|=(14&s)>>1,o[1]|=(1&s)<<7,o[1]|=n<<3,5===c&&(o[1]|=(14&r)>>1,o[2]=(1&r)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:d[s],channelCount:n,codec:"mp4a.40."+c,manifestCodec:l};e.trigger(V.a.ERROR,{type:q.b.MEDIA_ERROR,details:q.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})}(t,i,r,s),e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,H.b.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount))}function b(e){return 9216e4/e}function v(e,s,n,o,a){var t=function(e){var t=s.length,i=u(s,n),r=p(s,n);if(0<(r-=i)&&n+i+r<=t)return{headerLength:i,frameLength:r,stamp:o+a*e}}(b(e.samplerate));if(t){var i=t.stamp,r=t.headerLength,t=t.frameLength,i={unit:s.subarray(n+r,n+r+t),pts:i,dts:i};return e.samples.push(i),{sample:i,length:t+r}}}var P,O=i(4),T=((P=N.prototype).resetInitSegment=function(e,t,i,r){this.dt={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},P.resetTimeStamp=function(){},N.probe=function(e){if(!e)return!1;for(var t=(O.a.getID3Data(e,0)||[]).length,i=e.length;t<i;t++)if(function(e,t){if(f(e,t)){var i=u(e,t),i=t+(i=t+5<e.length?p(e,t):i);if(i===e.length||i+1<e.length&&h(e,i))return 1}}(e,t))return H.b.log("ADTS sync word found !"),!0;return!1},P.append=function(e,t,i,r){for(var s=this.dt,n=O.a.getID3Data(e,0)||[],o=O.a.getTimeStamp(n),a=Object(g.a)(o)?90*o:9e4*t,l=0,d=a,c=e.length,h=n.length,u=[{pts:d,dts:d,data:n}];h<c-1;)if(f(e,h)&&h+5<c){y(s,this.observer,e,h,s.manifestCodec);var p=v(s,e,h,a,l);if(!p){H.b.log("Unable to parse AAC frame");break}h+=p.length,d=p.sample.pts,l++}else O.a.isHeader(e,h)?(n=O.a.getID3Data(e,h),u.push({pts:d,dts:d,data:n}),h+=n.length):h++;this.remuxer.remux(s,{samples:[]},{samples:u,inputTimeScale:9e4},{samples:[]},t,i,r)},P.destroy=function(){},N),k=i(10),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,i,r,s){if(!(i+24>t.length)){var n=this.parseHeader(t,i);if(n&&i+n.frameLength<=t.length){s=r+s*(9e4*n.samplesPerFrame/n.sampleRate),s={unit:t.subarray(i,i+n.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(s),{sample:s,length:n.frameLength}}}},parseHeader:function(e,t){var i=e[t+1]>>3&3,r=e[t+1]>>1&3,s=e[t+2]>>4&15,n=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!=i&&0!=s&&15!=s&&3!=n){s=1e3*S.BitratesMap[14*(3==i?3-r:3==r?3:4)+s-1],n=S.SamplingRateMap[3*(3==i?0:2==i?1:2)+n],e=e[t+3]>>6==3?1:2,t=S.SamplesCoefficients[i][r],i=S.BytesInSlot[r],r=8*t*i;return{sampleRate:n,channelCount:e,frameLength:parseInt(t*s/n+o,10)*i,samplesPerFrame:r}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var i=this.parseHeader(e,t),r=4,r=t+(r=i&&i.frameLength?i.frameLength:r);if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},I=S,C=((i=_.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");r.set(e.subarray(i,i+t)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},i.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},i.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return 32<e&&H.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},i.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},i.skipUEG=function(){this.skipBits(1+this.skipLZ())},i.skipEG=function(){this.skipBits(1+this.skipLZ())},i.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},i.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},i.readBoolean=function(){return 1===this.readBits(1)},i.readUByte=function(){return this.readBits(8)},i.readUShort=function(){return this.readBits(16)},i.readUInt=function(){return this.readBits(32)},i.skipScalingList=function(e){for(var t=8,i=8,r=0;r<e;r++)t=0===(i=0!==i?(t+this.readEG()+256)%256:i)?t:i},i.readSPS=function(){var e,t,i,r,s=0,n=0,o=0,a=0,l=this.readUByte.bind(this),d=this.readBits.bind(this),c=this.readUEG.bind(this),h=this.readBoolean.bind(this),u=this.skipBits.bind(this),p=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(l(),e=l(),d(5),u(3),l(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var f=c();if(3===f&&u(1),g(),g(),u(1),h())for(i=3!==f?8:12,r=0;r<i;r++)h()&&m(r<6?16:64)}g();var f=c();if(0===f)c();else if(1===f)for(u(1),p(),p(),t=c(),r=0;r<t;r++)p();g(),u(1),f=c(),g=c(),0===(d=d(1))&&u(1),u(1),h()&&(s=c(),n=c(),o=c(),a=c());var y=[1,1];if(h()&&h())switch(l()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[l()<<8|l(),l()<<8|l()]}return{width:Math.ceil(16*(f+1)-2*s-2*n),height:(2-d)*(g+1)*16-(d?2:4)*(o+a),pixelRatio:y}},i.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},_),A=((i=D.prototype).decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},i.decryptAacSample=function(t,i,r,s){var n=t[i].unit,e=n.subarray(16,n.length-n.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),o=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e),n.set(e,16),s||o.decryptAacSamples(t,i+1,r)})},i.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,r),!r)return}}},i.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),r=0,s=32;s<=e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i},i.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var i=0,r=32;r<=e.length-16;r+=160,i+=16)e.set(t.subarray(i,i+16),r);return e},i.decryptAvcSample=function(t,i,r,s,n,o){var a=this.discardEPB(n.data),e=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(e.buffer,function(e){n.data=l.getAvcDecryptedUnit(a,e),o||l.decryptAvcSamples(t,i,r+1,s)})},i.decryptAvcSamples=function(e,t,i,r){for(;;t++,i=0){if(t>=e.length)return void r();for(var s=e[t].units;!(i>=s.length);i++){var n=s[i];if(!(n.length<=48||1!==n.type&&5!==n.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,r,n,o),!o)return}}}},D),w={video:1,audio:2,id3:3,text:4},x=((i=j.prototype).setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new A(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},j.probe=function(e){e=j.ft(e);return!(e<0||(e&&H.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},j.ft=function(e){for(var t=Math.min(1e3,e.length-564),i=0;i<t;){if(71===e[i]&&71===e[i+188]&&71===e[i+376])return i;i++}return-1},j.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:w[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},i.resetInitSegment=function(e,t,i,r){this.pmtParsed=!1,this.pt=-1,this.bt=j.createTrack("video",r),this.dt=j.createTrack("audio",r),this.vt=j.createTrack("id3",r),this.gt=j.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=i,this.yt=r},i.resetTimeStamp=function(){},i.append=function(e,t,i,r){var s,n,o,a,l,d=e.length,c=!1;this.contiguous=i;var h=this.pmtParsed,u=this.bt,p=this.dt,g=this.vt,m=u.pid,f=p.pid,y=g.pid,b=this.pt,v=u.pesData,P=p.pesData,S=g.pesData,I=this.wt,T=this.xt,k=this.kt,A=this.St.bind(this),O=this.Ot.bind(this),C=this._t.bind(this),w=this.jt.bind(this),x=j.ft(e);for(d-=(d+x)%188,s=x;s<d;s+=188)if(71===e[s]){if(n=!!(64&e[s+1]),o=((31&e[s+1])<<8)+e[s+2],1<(48&e[s+3])>>4){if((a=s+5+e[s+4])===s+188)continue}else a=s+4;switch(o){case m:n&&(v&&(l=k(v))&&A(l,!1),v={data:[],size:0}),v&&(v.data.push(e.subarray(a,s+188)),v.size+=s+188-a);break;case f:n&&(P&&(l=k(P))&&(p.isAAC?O:C)(l),P={data:[],size:0}),P&&(P.data.push(e.subarray(a,s+188)),P.size+=s+188-a);break;case y:n&&(S&&(l=k(S))&&w(l),S={data:[],size:0}),S&&(S.data.push(e.subarray(a,s+188)),S.size+=s+188-a);break;case 0:n&&(a+=e[a]+1),b=this.pt=I(e,a);break;case b:n&&(a+=e[a]+1);var E=T(e,a,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(m=E.avc)&&(u.pid=m),0<(f=E.audio)&&(p.pid=f,p.isAAC=E.isAAC),0<(y=E.id3)&&(g.pid=y),c&&!h&&(H.b.log("reparse from beginning"),c=!1,s=x-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(V.a.ERROR,{type:q.b.MEDIA_ERROR,details:q.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});v&&(l=k(v))?(A(l,!0),u.pesData=null):u.pesData=v,P&&(l=k(P))?((p.isAAC?O:C)(l),p.pesData=null):(P&&P.size&&H.b.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=P),S&&(l=k(S))?(w(l),g.pesData=null):g.pesData=S,null==this.sampleAes?this.remuxer.remux(p,u,g,this.gt,t,i,r):this.decryptAndRemux(p,u,g,this.gt,t,i,r)},i.decryptAndRemux=function(e,t,i,r,s,n,o){var a;e.samples&&e.isAAC?(a=this).sampleAes.decryptAacSamples(e.samples,0,function(){a.decryptAndRemuxAvc(e,t,i,r,s,n,o)}):this.decryptAndRemuxAvc(e,t,i,r,s,n,o)},i.decryptAndRemuxAvc=function(e,t,i,r,s,n,o){var a;t.samples?(a=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){a.remuxer.remux(e,t,i,r,s,n,o)}):this.remuxer.remux(e,t,i,r,s,n,o)},i.destroy=function(){this.At=this.It=void 0,this.yt=0},i.wt=function(e,t){return(31&e[t+10])<<8|e[t+11]},i.xt=function(e,t,i,r){var s,n={audio:-1,avc:-1,id3:-1,isAAC:!0},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){H.b.log("unknown stream type:"+e[t]);break}case 15:-1===n.audio&&(n.audio=s);break;case 21:-1===n.id3&&(n.id3=s);break;case 219:if(!r){H.b.log("unknown stream type:"+e[t]);break}case 27:-1===n.avc&&(n.avc=s);break;case 3:case 4:i?-1===n.audio&&(n.audio=s,n.isAAC=!1):H.b.log("MPEG audio found, not supported in this browser for now");break;case 36:H.b.warn("HEVC stream type found, not supported for now");break;default:H.b.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return n},i.kt=function(e){var t,i,r,s,n,o,a=0,l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&1<l.length;){var d=new Uint8Array(l[0].length+l[1].length);d.set(l[0]),d.set(l[1],l[0].length),l[0]=d,l.splice(1,1)}if(1!==((t=l[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;if(192&(r=t[7])&&(4294967295<(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)&&(s-=8589934592),64&r?(4294967295<(n=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(n-=8589934592),54e5<s-n&&(H.b.warn(Math.round((s-n)/9e4)+"s delta between PTS and DTS, align them"),s=n)):n=s),o=(r=t[8])+9,e.size<=o)return null;e.size-=o;for(var c=new Uint8Array(e.size),h=0,u=l.length;h<u;h++){var p=(t=l[h]).byteLength;if(o){if(p<o){o-=p;continue}t=t.subarray(o),p-=o,o=0}c.set(t,a),a+=p}return i&&(i-=r+3),{data:c,pts:s,dts:n,len:i}},i.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var i=t.samples,r=i.length;if(isNaN(e.pts)){if(!r)return void t.dropped++;var s=i[r-1];e.pts=s.pts,e.dts=s.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,i.push(e)):t.dropped++}e.debug.length&&H.b.log(e.pts+"/"+e.dts+":"+e.debug)},i.St=function(f,e){function y(e,t,i,r){return{key:e,pts:t,dts:i,units:[],debug:r}}var b,v,P,S=this,I=this.bt,t=this.Tt(f.data),T=this.avcSample,k=!1,A=this.pushAccesUnit.bind(this);f.data=null,T&&t.length&&!I.audFound&&(A(T,I),T=this.avcSample=y(!1,f.pts,f.dts,"")),t.forEach(function(e){switch(e.type){case 1:v=!0,(T=T||(S.avcSample=y(!0,f.pts,f.dts,""))).frame=!0;var t=e.data;k&&4<t.length&&(2!==(u=new C(t).readSliceType())&&4!==u&&7!==u&&9!==u||(T.key=!0));break;case 5:v=!0,(T=T||(S.avcSample=y(!0,f.pts,f.dts,""))).key=!0,T.frame=!0;break;case 6:v=!0,(b=new C(S.discardEPB(e.data))).readUByte();for(var i=0,r=0,s=!1,n=0;!s&&1<b.bytesAvailable;){for(i=0;i+=n=b.readUByte(),255===n;);for(r=0;r+=n=b.readUByte(),255===n;);if(4===i&&0!==b.bytesAvailable){if(s=!0,181===b.readUByte()&&49===b.readUShort()&&1195456820===b.readUInt()&&3===b.readUByte()){var o=b.readUByte(),a=31&o,l=[o,b.readUByte()];for(P=0;P<a;P++)l.push(b.readUByte()),l.push(b.readUByte()),l.push(b.readUByte());S.Ct(S.gt.samples,{type:3,pts:f.pts,bytes:l})}}else if(5===i&&0!==b.bytesAvailable){if(s=!0,16<r){var d=[];for(P=0;P<16;P++)d.push(b.readUByte().toString(16)),3!==P&&5!==P&&7!==P&&9!==P||d.push("-");var c=r-16,h=new Uint8Array(c);for(P=0;P<c;P++)h[P]=b.readUByte();S.Ct(S.gt.samples,{pts:f.pts,payloadType:i,uuid:d.join(""),userDataBytes:h,userData:Object(O.b)(h.buffer)})}}else if(r<b.bytesAvailable)for(P=0;P<r;P++)b.readUByte()}break;case 7:if(k=v=!0,!I.sps){var u=(b=new C(e.data)).readSPS();I.width=u.width,I.height=u.height,I.pixelRatio=u.pixelRatio,I.sps=[e.data],I.duration=S.yt;var p=e.data.subarray(1,4),g="avc1.";for(P=0;P<3;P++){var m=p[P].toString(16);g+=m=m.length<2?"0"+m:m}I.codec=g}break;case 8:v=!0,I.pps||(I.pps=[e.data]);break;case 9:v=!1,I.audFound=!0,T&&A(T,I),T=S.avcSample=y(!1,f.pts,f.dts,"");break;case 12:v=!1;break;default:v=!1,T&&(T.debug+="unknown NAL "+e.type+" ")}T&&v&&T.units.push(e)}),e&&T&&(A(T,I),this.avcSample=null)},i.Ct=function(e,t){var i=e.length;if(0<i){if(t.pts>=e[i-1].pts)e.push(t);else for(var r=i-1;0<=r;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},i.Pt=function(){var e,t,i=this.avcSample;return t=(i=!i||0===i.units.length?(e=this.bt.samples)[e.length-1]:i)?(i=i.units)[i.length-1]:t},i.Tt=function(e){var t,i,r,s,n,o,a,l,d=0,c=e.byteLength,h=this.bt,u=h.naluState||0,p=u,g=[],m=-1;for(-1===u&&(s=31&e[m=0],u=0,d=1);d<c;)t=e[d++],u=u?1!==u?t?1===t?(0<=m?(r={data:e.subarray(m,d-u-1),type:s},g.push(r)):(n=this.Pt())&&(p&&d<=4-p&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-p)),0<(i=d-u-1))&&((o=new Uint8Array(n.data.byteLength+i)).set(n.data,0),o.set(e.subarray(0,i),n.data.byteLength),n.data=o),d<c?(s=31&e[m=d],0):-1):0:3:t?0:2:t?0:1;return 0<=m&&0<=u&&(r={data:e.subarray(m,c),type:s,state:u},g.push(r)),0===g.length&&(a=this.Pt())&&((l=new Uint8Array(a.data.byteLength+e.byteLength)).set(a.data,0),l.set(e,a.data.byteLength),a.data=l),h.naluState=u,g},i.discardEPB=function(e){for(var t=e.byteLength,i=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(i.push(r+2),r+=2):r++;if(0===i.length)return e;for(var s=t-i.length,n=new Uint8Array(s),o=0,r=0;r<s;o++,r++)o===i[0]&&(o++,i.shift()),n[r]=e[o];return n},i.Ot=function(e){var t,i,r,s,n,o,a=this.dt,l=e.data,d=e.pts,c=this.aacOverFlow,h=this.aacLastPTS;for(c&&((e=new Uint8Array(c.byteLength+l.byteLength)).set(c,0),e.set(l,c.byteLength),l=e),i=0,s=l.length;i<s-1&&!f(l,i);i++);if(!i||(o=i<s-1?(n="AAC PES did not start with ADTS header,offset:"+i,!1):(n="no ADTS header found in AAC PES",!0),H.b.warn("parsing error:"+n),this.observer.trigger(V.a.ERROR,{type:q.b.MEDIA_ERROR,details:q.a.FRAG_PARSING_ERROR,fatal:o,reason:n}),!o)){for(y(a,this.observer,l,i,this.audioCodec),t=0,o=b(a.samplerate),c&&h&&(o=h+o,1<Math.abs(o-d)&&(H.b.log("AAC: align PTS for overlapping frames by "+Math.round((o-d)/90)),d=o));i<s;){if(f(l,i)){if(i+5<s){var u=v(a,l,i,d,t);if(u){i+=u.length,r=u.sample.pts,t++;continue}}break}i++}c=i<s?l.subarray(i,s):null,this.aacOverFlow=c,this.aacLastPTS=r}},i._t=function(e){for(var t=e.data,i=t.length,r=0,s=0,n=e.pts;s<i;)if(I.isHeader(t,s)){var o=I.appendFrame(this.dt,t,s,n,r);if(!o)break;s+=o.length,r++}else s++},i.jt=function(e){this.vt.samples.push(e)},j),E=((i=B.prototype).resetInitSegment=function(e,t,i,r){this.dt={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},i.resetTimeStamp=function(){},B.probe=function(e){var t,i,r=O.a.getID3Data(e,0);if(r&&void 0!==O.a.getTimeStamp(r))for(t=r.length,i=Math.min(e.length-1,t+100);t<i;t++)if(I.probe(e,t))return H.b.log("MPEG Audio sync word found !"),!0;return!1},i.append=function(e,t,i,r){for(var s=O.a.getID3Data(e,0),n=O.a.getTimeStamp(s),o=n?90*n:9e4*t,a=s.length,l=e.length,d=0,c=0,h=this.dt,u=[{pts:o,dts:o,data:s}];a<l;)if(I.isHeader(e,a)){var p=I.appendFrame(h,e,a,o,d);if(!p)break;a+=p.length,c=p.sample.pts,d++}else O.a.isHeader(e,a)?(s=O.a.getID3Data(e,a),u.push({pts:c,dts:c,data:s}),a+=s.length):a++;this.remuxer.remux(h,{samples:[]},{samples:u,inputTimeScale:9e4},{samples:[]},t,i,r)},i.destroy=function(){},B),F=(M.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},M),L=Math.pow(2,32)-1,W=(R.init=function(){for(var e in R.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})R.types.hasOwnProperty(e)&&(R.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);R.HDLR_TYPES={video:t,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);R.STTS=R.STSC=R.STCO=s,R.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),R.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),R.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),i=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);R.FTYP=R.box(R.types.ftyp,t,s,t,i),R.DINF=R.box(R.types.dinf,R.box(R.types.dref,r))},R.box=function(e){for(var t,i=Array.prototype.slice.call(arguments,1),r=8,s=i.length,n=s;s--;)r+=i[s].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),s=0,r=8;s<n;s++)t.set(i[s],r),r+=i[s].byteLength;return t},R.hdlr=function(e){return R.box(R.types.hdlr,R.HDLR_TYPES[e])},R.mdat=function(e){return R.box(R.types.mdat,e)},R.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+L)),t=Math.floor(t%(1+L));return R.box(R.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},R.mdia=function(e){return R.box(R.types.mdia,R.mdhd(e.timescale,e.duration),R.hdlr(e.type),R.minf(e))},R.mfhd=function(e){return R.box(R.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},R.minf=function(e){return"audio"===e.type?R.box(R.types.minf,R.box(R.types.smhd,R.SMHD),R.DINF,R.stbl(e)):R.box(R.types.minf,R.box(R.types.vmhd,R.VMHD),R.DINF,R.stbl(e))},R.moof=function(e,t,i){return R.box(R.types.moof,R.mfhd(e),R.traf(i,t))},R.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=R.trak(e[t]);return R.box.apply(null,[R.types.moov,R.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(R.mvex(e)))},R.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=R.trex(e[t]);return R.box.apply(null,[R.types.mvex].concat(i))},R.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+L)),t=Math.floor(t%(1+L)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return R.box(R.types.mvhd,t)},R.sdtp=function(e){for(var t,i=e.samples||[],r=new Uint8Array(4+i.length),s=0;s<i.length;s++)t=i[s].flags,r[s+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return R.box(R.types.sdtp,r)},R.stbl=function(e){return R.box(R.types.stbl,R.stsd(e),R.box(R.types.stts,R.STTS),R.box(R.types.stsc,R.STSC),R.box(R.types.stsz,R.STSZ),R.box(R.types.stco,R.STCO))},R.avc1=function(e){for(var t,i,r=[],s=[],n=0;n<e.sps.length;n++)i=(t=e.sps[n]).byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(t));for(n=0;n<e.pps.length;n++)i=(t=e.pps[n]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(t));var o=R.box(R.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(s))),a=e.width,l=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return R.box(R.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,R.box(R.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),R.box(R.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))},R.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},R.mp4a=function(e){var t=e.samplerate;return R.box(R.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),R.box(R.types.esds,R.esds(e)))},R.mp3=function(e){var t=e.samplerate;return R.box(R.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},R.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?R.box(R.types.stsd,R.STSD,R.mp4a(e)):R.box(R.types.stsd,R.STSD,R.mp3(e)):R.box(R.types.stsd,R.STSD,R.avc1(e))},R.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,r=e.width,s=e.height,e=Math.floor(i/(1+L)),i=Math.floor(i%(1+L));return R.box(R.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,s>>8&255,255&s,0,0]))},R.traf=function(e,t){var i=R.sdtp(e),r=e.id,s=Math.floor(t/(1+L)),t=Math.floor(t%(1+L));return R.box(R.types.traf,R.box(R.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),R.box(R.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,t>>24,t>>16&255,t>>8&255,255&t])),R.trun(e,i.length+16+20+8+16+8+8),i)},R.trak=function(e){return e.duration=e.duration||4294967295,R.box(R.types.trak,R.tkhd(e),R.mdia(e))},R.trex=function(e){e=e.id;return R.box(R.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},R.trun=function(e,t){var i,r,s,n,o,a=e.samples||[],l=a.length,e=12+16*l,d=new Uint8Array(e);for(d.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<l;i++)r=(o=a[i]).duration,s=o.size,n=o.flags,o=o.cts,d.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,s>>>24&255,s>>>16&255,s>>>8&255,255&s,n.isLeading<<2|n.dependsOn,n.isDependedOn<<6|n.hasRedundancy<<4|n.paddingValue<<1|n.isNonSync,61440&n.degradPrio,15&n.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*i);return R.box(R.types.trun,d)},R.initSegment=function(e){R.types||R.init();var t=R.moov(e);return(e=new Uint8Array(R.FTYP.byteLength+t.byteLength)).set(R.FTYP),e.set(t,R.FTYP.byteLength),e},R);function R(){}function M(){}function B(e,t,i){this.observer=e,this.config=i,this.remuxer=t}function j(e,t,i,r){this.observer=e,this.config=i,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}function D(e,t,i,r){this.decryptdata=i,this.discardEPB=r,this.decrypter=new m(e,t,{removePKCS7Padding:!1})}function _(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function N(e,t,i){this.observer=e,this.config=i,this.remuxer=t}function U(e,t,i,r){i=e*t*(i=void 0===i?1:i);return(r=void 0===r?!1:r)?Math.round(i):i}function G(e,t){return U(e,1e3,1/9e4,t=void 0===t?!1:t)}function $(e,t){return U(e,9e4,1/(t=void 0===t?1:t))}var z,J=$(10),Q=$(.2),Y=((i=Z.prototype).destroy=function(){},i.resetTimeStamp=function(e){this.At=this.It=e},i.resetInitSegment=function(){this.ISGenerated=!1},i.remux=function(e,t,i,r,s,n,o){var a,l,d,c,h,u;this.ISGenerated||this.generateIS(e,t,s),this.ISGenerated&&(u=e.samples.length,a=t.samples.length,d=l=s,u&&a&&(c=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale,l+=Math.max(0,c),d+=Math.max(0,-c)),u?(e.timescale||(H.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,s)),u=this.remuxAudio(e,l,n,o),a&&(u&&(h=u.endPTS-u.startPTS),t.timescale||(H.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,s)),this.remuxVideo(t,d,n,h,o))):!a||(o=this.remuxVideo(t,d,n,0,o))&&e.codec&&this.remuxEmptyAudio(e,l,n,o)),i.samples.length&&this.remuxID3(i,s),r.samples.length&&this.remuxText(r,s),this.observer.trigger(V.a.FRAG_PARSED)},i.generateIS=function(e,t,i){var r,s,n=this.observer,o=e.samples,a=t.samples,l=this.typeSupported,d="audio/mp4",c={},h={tracks:c},u=void 0===this.At;u&&(r=s=1/0),e.config&&o.length&&(e.timescale=e.samplerate,H.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(d="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),c.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:W.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(r=s=o[0].pts-e.inputTimeScale*i)),t.sps&&t.pps&&a.length&&(e=t.inputTimeScale,t.timescale=e,c.video={container:"video/mp4",codec:t.codec,initSegment:W.initSegment([t]),metadata:{width:t.width,height:t.height}},u&&(r=Math.min(r,a[0].pts-e*i),s=Math.min(s,a[0].dts-e*i),this.observer.trigger(V.a.INIT_PTS_FOUND,{initPTS:r}))),Object.keys(c).length?(n.trigger(V.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,u&&(this.At=r,this.It=s)):n.trigger(V.a.ERROR,{type:q.b.MEDIA_ERROR,details:q.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.remuxVideo=function(e,t,i,r,s){var n,o,a=8,l=e.timescale,d=e.samples,c=[],h=d.length,u=this.Mt,p=this.At,g=this.nextAvcDts,m=this.isSafari;if(0!==h){m&&(i|=d.length&&g&&(s&&Math.abs(t-g/l)<.1||Math.abs(d[0].pts-g-p)<l/5)),i||(g=t*l),d.forEach(function(e){e.pts=u(e.pts-p,g),e.dts=u(e.dts-p,g)}),d.sort(function(e,t){var i=e.dts-t.dts,r=e.pts-t.pts;return i||r||e.id-t.id});var f=d.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*Q)},0);if(f<0){H.b.warn("PTS < DTS detected in video samples, shifting DTS by "+G(f,!0)+" ms to overcome this issue");for(var y=0;y<d.length;y++)d[y].dts+=f}var s=d[0],b=Math.max(s.dts,0),v=Math.max(s.pts,0),t=b-g;i&&t&&(1<t?H.b.log("AVC: "+G(t,!0)+" ms hole between fragments detected,filling it"):t<-1&&H.b.log("AVC: "+G(-t,!0)+" ms overlapping between fragments detected"),b=g,d[0].dts=b,v=Math.max(v-t,g),d[0].pts=v,H.b.log("Video: PTS/DTS adjusted: "+G(v,!0)+"/"+G(b,!0)+", delta: "+G(t,!0)+" ms")),s=d[d.length-1],i=Math.max(s.dts,0),t=Math.max(s.pts,0,i),m&&(n=Math.round((i-b)/(d.length-1)));for(var P=0,S=0,I=0;I<h;I++){for(var T=d[I],k=T.units,A=k.length,O=0,C=0;C<A;C++)O+=k[C].data.length;S+=O,P+=A,T.length=O,T.dts=m?b+I*n:Math.max(T.dts,b),T.pts=Math.max(T.pts,T.dts)}s=S+4*P+8;try{o=new Uint8Array(s)}catch(e){return void this.observer.trigger(V.a.ERROR,{type:q.b.MUX_ERROR,details:q.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:s,reason:"fail allocating video mdat "+s})}var w=new DataView(o.buffer);w.setUint32(0,s),o.set(W.types.mdat,4);for(var x=0;x<h;x++){for(var E,L,R=d[x],M=R.units,B=0,j=void 0,D=0,_=M.length;D<_;D++){var F=M[D],N=F.data,F=F.data.byteLength;w.setUint32(a,F),a+=4,o.set(N,a),a+=F,B+=4+F}j=m?Math.max(0,n*Math.round((R.pts-R.dts)/n)):(x<h-1?n=d[x+1].dts-R.dts:(L=this.config,E=R.dts-d[0<x?x-1:x].dts,L.stretchShortVideoTrack?(L=L.maxBufferHole,Math.floor(L*l)<(L=(r?v+r*l:this.nextAudioPts)-R.pts)?((n=L-E)<0&&(n=E),H.b.log("It is approximately "+G(L,!1)+" ms to the next segment; using duration "+G(n,!1)+" ms for the last video frame.")):n=E):n=E),Math.round(R.pts-R.dts)),c.push({size:B,duration:n,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:R.key?2:1,isNonSync:R.key?0:1}})}this.nextAvcDts=i+n;var U,i=e.dropped;e.nbNalu=0,e.dropped=0,c.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((U=c[0].flags).dependsOn=2,U.isNonSync=0),e.samples=c,U=W.moof(e.sequenceNumber++,b,e),e.samples=[];i={data1:U,data2:o,startPTS:v/l,endPTS:(t+n)/l,startDTS:b/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:i};return this.observer.trigger(V.a.FRAG_PARSING_DATA,i),i}},i.remuxAudio=function(e,t,i,r){var s,n,o,a,l,d=e.inputTimeScale,c=e.timescale,h=d/c,u=(e.isAAC?1024:1152)*h,p=this.Mt,g=this.At,m=!e.isAAC&&this.typeSupported.mpeg,f=m?0:8,y=e.samples,b=[],v=this.nextAudioPts;if(i|=y.length&&v&&(r&&Math.abs(t-v/d)<.1||Math.abs(y[0].pts-v-g)<20*u),y.forEach(function(e){e.pts=e.dts=p(e.pts-g,t*d)}),0!==(y=y.filter(function(e){return 0<=e.pts})).length){if(i||(v=r?t*d:y[0].pts),e.isAAC)for(var P=this.config.maxAudioFramesDrift,S=0,I=v;S<y.length;){var T,k=y[S];if((T=k.pts-I)<=-P*u)H.b.warn("Dropping 1 audio frame @ "+G(I,!0)+" ms due to "+G(T,!0)+" ms overlap."),y.splice(S,1);else if(P*u<=T&&T<J&&I){var A=Math.round(T/u);H.b.warn("Injecting "+A+" audio frames @ "+G(I,!0)+" ms due to "+G(I,!0)+" ms gap.");for(var O=0;O<A;O++){var C=Math.max(I,0);(n=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(H.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),n=k.unit.subarray()),y.splice(S,0,{unit:n,pts:C,dts:C}),I+=u,S++}k.pts=k.dts=I,I+=u,S++}else Math.abs(T),k.pts=k.dts=I,I+=u,S++}for(var w=y.length,x=0;w--;)x+=y[w].unit.byteLength;for(var E=0,L=y.length;E<L;E++){var R=y[E],M=R.unit,R=R.pts;if(void 0!==l)s.duration=Math.round((R-l)/h);else{var B=R-v,j=0;if(i&&e.isAAC&&B){if(0<B&&B<J)j=Math.round((R-v)/u),H.b.log(G(B,!0)+" ms hole between AAC samples detected,filling it"),0<j&&(x+=j*(n=!(n=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))?M.subarray():n).length);else if(B<-12){H.b.log("drop overlapping AAC sample, expected/parsed/delta: "+G(v,!0)+" ms / "+G(R,!0)+" ms / "+G(-B,!0)+" ms"),x-=M.byteLength;continue}R=v}if(a=R,!(0<x))return;x+=f;try{o=new Uint8Array(x)}catch(e){return void this.observer.trigger(V.a.ERROR,{type:q.b.MUX_ERROR,details:q.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating audio mdat "+x})}m||(new DataView(o.buffer).setUint32(0,x),o.set(W.types.mdat,4));for(var D=0;D<j;D++)(n=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(H.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),n=M.subarray()),o.set(n,f),f+=n.byteLength,s={size:n.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(s)}o.set(M,f);B=M.byteLength;f+=B,b.push(s={size:B,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),l=R}var _=0;if(2<=(w=b.length)&&(_=b[w-2].duration,s.duration=_),w){this.nextAudioPts=v=l+h*_,e.samples=b,c=m?new Uint8Array:W.moof(e.sequenceNumber++,a/h,e),e.samples=[];r=a/d,_=v/d,_={data1:c,data2:o,startPTS:r,endPTS:_,startDTS:r,endDTS:_,type:"audio",hasAudio:!0,hasVideo:!1,nb:w};return this.observer.trigger(V.a.FRAG_PARSING_DATA,_),_}return null}},i.remuxEmptyAudio=function(e,t,i,r){var s=e.inputTimeScale,n=s/(e.samplerate||s),o=this.nextAudioPts,a=(void 0!==o?o:r.startDTS*s)+this.It,s=r.endDTS*s+this.It,l=1024*n,d=Math.ceil((s-a)/l),c=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(H.b.warn("remux empty Audio"),c){for(var h=[],u=0;u<d;u++){var p=a+u*l;h.push({unit:c,pts:p,dts:p})}e.samples=h,this.remuxAudio(e,t,i)}else H.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.remuxID3=function(e){var t,i=e.samples.length,r=e.inputTimeScale,s=this.At,n=this.It;if(i){for(var o=0;o<i;o++)(t=e.samples[o]).pts=(t.pts-s)/r,t.dts=(t.dts-n)/r;this.observer.trigger(V.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},i.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,i=e.samples.length,r=e.inputTimeScale,s=this.At;if(i){for(var n=0;n<i;n++)(t=e.samples[n]).pts=(t.pts-s)/r;this.observer.trigger(V.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},i.Mt=function(e,t){var i;if(void 0===t)return e;for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e},Z),X=((i=K.prototype).destroy=function(){},i.resetTimeStamp=function(){},i.resetInitSegment=function(){},i.remux=function(e,t,i,r,s,n,o,a){var l=this.observer,d="";e&&(d+="audio"),t&&(d+="video"),l.trigger(V.a.FRAG_PARSING_DATA,{data1:a,startPTS:s,startDTS:s,type:d,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(V.a.FRAG_PARSED)},K),i=Object(s.a)();function K(e){this.observer=e}function Z(e,t,i,r){this.observer=e,this.config=t,this.typeSupported=i;i=navigator.userAgent;this.isSafari=r&&-1<r.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}try{z=i.performance.now.bind(i.performance)}catch(e){H.b.debug("Unable to use Performance API on this environment"),z=i.Date.now}(i=ee.prototype).destroy=function(){var e=this.demuxer;e&&e.destroy()},i.push=function(e,i,r,s,n,o,a,l,d,c,h,u){var t,p,g=this;0<e.byteLength&&null!=i&&null!=i.key&&"AES-128"===i.method?(null==(t=this.decrypter)&&(t=this.decrypter=new m(this.observer,this.config)),p=z(),t.decrypt(e,i.key.buffer,i.iv.buffer,function(e){var t=z();g.observer.trigger(V.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:t}}),g.pushDecrypted(new Uint8Array(e),i,new Uint8Array(r),s,n,o,a,l,d,c,h,u)})):this.pushDecrypted(new Uint8Array(e),i,new Uint8Array(r),s,n,o,a,l,d,c,h,u)},i.pushDecrypted=function(e,t,i,r,s,n,o,a,l,d,c,h){if(!(S=this.demuxer)||(o||a)&&!this.probe(e)){for(var u=this.observer,p=this.typeSupported,g=this.config,m=[{demux:x,remux:Y},{demux:k.a,remux:X},{demux:T,remux:Y},{demux:E,remux:Y}],f=0,y=m.length;f<y;f++){var b=m[f],v=b.demux.probe;if(v(e)){var P=this.remuxer=new b.remux(u,g,p,this.vendor),S=new b.demux(u,P,g,p);this.probe=v;break}}if(!S)return void u.trigger(V.a.ERROR,{type:q.b.MEDIA_ERROR,details:q.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=S}var I=this.remuxer;(o||a)&&(S.resetInitSegment(i,r,s,d),I.resetInitSegment()),o&&(S.resetTimeStamp(h),I.resetTimeStamp(h)),"function"==typeof S.setDecryptData&&S.setDecryptData(t),S.append(e,n,l,c)},i=ee;function ee(e,t,i,r){this.observer=e,this.typeSupported=t,this.config=i,this.vendor=r}t.a=i},function(e,t,i){"use strict";var n=i(0),a=i(1),o=Math.pow(2,32)-1,i=((i=u.prototype).resetTimeStamp=function(e){this.initPTS=e},i.resetInitSegment=function(e,t,i,r){var s,n;e&&e.byteLength?(null==t&&(t="mp4a.40.5"),null==i&&(i="avc1.42e01e"),n={},(s=this.initData=u.parseInitSegment(e)).audio&&s.video?n.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:r?e:null}:(s.audio&&(n.audio={container:"audio/mp4",codec:t,initSegment:r?e:null}),s.video&&(n.video={container:"video/mp4",codec:i,initSegment:r?e:null})),this.observer.trigger(a.a.FRAG_PARSING_INIT_SEGMENT,{tracks:n})):(t&&(this.audioCodec=t),i&&(this.videoCodec=i))},u.probe=function(e){return 0<u.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},u.bin2str=function(e){return String.fromCharCode.apply(null,e)},u.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<8|e[t+1];return t<0?65536+t:t},u.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t},u.writeUint32=function(e,t,i){e.data&&(t+=e.start,e=e.data),e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i},u.findBox=function(e,t){var i,r,s,n,o,a=[];if(e.data?(n=e.start,r=e.end,e=e.data):(n=0,r=e.byteLength),!t.length)return null;for(i=n;i<r;)o=1<(s=u.readUint32(e,i))?i+s:r,u.bin2str(e.subarray(i+4,i+8))===t[0]&&(1===t.length?a.push({data:e,start:i+8,end:o}):(s=u.findBox({data:e,start:i+8,end:o},t.slice(1))).length&&(a=a.concat(s))),i=o;return a},u.parseSegmentIndex=function(e){var t=u.findBox(e,["moov"])[0],t=t?t.end:null,i=0,r=u.findBox(e,["sidx"]);if(!r||!r[0])return null;var s=[],e=(r=r[0]).data[0],i=0===e?8:16,n=u.readUint32(r,i);i+=4,i+=0===e?8:16;var o=r.end+0,a=u.readUint16(r,i+=2);i+=2;for(var l=0;l<a;l++){var d=i,c=u.readUint32(r,d);d+=4;var h=2147483647&c;if(1==(2147483648&c)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");c=u.readUint32(r,d);d+=4,s.push({referenceSize:h,subsegmentDuration:c,info:{duration:c/n,start:o,end:o+h-1}}),o+=h,i=d+=4}return{earliestPresentationTime:0,timescale:n,version:e,referencesCount:a,references:s,moovEndOffset:t}},u.parseInitSegment=function(e){var s=[];return u.findBox(e,["moov","trak"]).forEach(function(e){var t,i,r=u.findBox(e,["tkhd"])[0];r&&(i=0===r.data[r.start]?12:20,t=u.readUint32(r,i),(r=u.findBox(e,["mdia","mdhd"])[0])&&(i=0===r.data[r.start]?12:20,r=u.readUint32(r,i),!(i=u.findBox(e,["mdia","hdlr"])[0])||(i={soun:"audio",vide:"video"}[u.bin2str(i.data.subarray(i.start+8,i.start+12))])&&((e=u.findBox(e,["mdia","minf","stbl","stsd"])).length&&(e=e[0],e=u.bin2str(e.data.subarray(e.start+12,e.start+16)),n.b.log("MP4Demuxer:"+i+":"+e+" found")),s[t]={timescale:r,type:i},s[i]={timescale:r,id:t})))}),s},u.getStartDTS=function(i,e){var e=u.findBox(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),e=i[e].timescale||9e4;return u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],i=u.readUint32(e,4);return 1===t&&(i*=Math.pow(2,32),i+=u.readUint32(e,8)),i})[0]/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},u.offsetStartDTS=function(i,e,s){u.findBox(e,["moof","traf"]).map(function(t){return u.findBox(t,["tfhd"]).map(function(e){var e=u.readUint32(e,4),r=i[e].timescale||9e4;u.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],i=u.readUint32(e,4);0===t?u.writeUint32(e,4,i-s*r):(i*=Math.pow(2,32),i+=u.readUint32(e,8),i-=s*r,i=Math.max(i,0),t=Math.floor(i/(1+o)),i=Math.floor(i%(1+o)),u.writeUint32(e,4,t),u.writeUint32(e,8,i))})})})},i.append=function(e,t,i,r){var s=this.initData;s||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),s=this.initData);var n,o=this.initPTS;void 0===o&&(n=u.getStartDTS(s,e),this.initPTS=o=n-t,this.observer.trigger(a.a.INIT_PTS_FOUND,{initPTS:o})),u.offsetStartDTS(s,e,o),o=u.getStartDTS(s,e),this.remuxer.remux(s.audio,s.video,null,null,o,i,r,e)},i.destroy=function(){},u);function u(e,t){this.observer=e,this.remuxer=t}t.a=i},function(e,t,u){function n(i){var r={};function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=i,s.c=r,s.i=function(e){return e},s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"_",{value:!0})},s.n=function(e){var t=e&&e._?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var e=s(s.s=ENTRY_MODULE);return e.default||e}var p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function g(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(h,e){var i={main:u.m},r=(e=e||{}).all?{main:Object.keys(i.main)}:function(e){for(var t={main:[h]},i={main:[]},r={main:{}};function(i){return Object.keys(i).reduce(function(e,t){return e||0<i[t].length},!1)}(t);)for(var s=Object.keys(t),n=0;n<s.length;n++){var o=s[n],a=t[o].pop();if(r[o]=r[o]||{},!r[o][a]&&e[o][a]){r[o][a]=!0,i[o]=i[o]||[],i[o].push(a);for(var l=function(e,t,i){var r={};r[i]=[];var s=t.toString();if(!(t=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)))return r;for(var n,t=t[1],o=new RegExp("(\\\\n|\\W)"+g(t)+p,"g");n=o.exec(s);)"dll-reference"!==n[3]&&r[i].push(n[3]);for(o=new RegExp("\\("+g(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+p,"g");n=o.exec(s);)e[n[2]]||(r[i].push(n[1]),e[n[2]]=u(n[1]).m),r[n[2]]=r[n[2]]||[],r[n[2]].push(n[4]);for(var a,l=Object.keys(r),d=0;d<l.length;d++)for(var c=0;c<r[l[d]].length;c++)a=r[l[d]][c],isNaN(+a)||(r[l[d]][c]=+r[l[d]][c]);return r}(e,e[o][a],o),d=Object.keys(l),c=0;c<d.length;c++)t[d[c]]=t[d[c]]||[],t[d[c]]=t[d[c]].concat(l[d[c]])}}return i}(i),s="";Object.keys(r).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;r[t][e];)e++;r[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"});var s=s+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+r.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);",t=new window.Blob([s],{type:"text/javascript"});if(e.bare)return t;e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),t=new window.Worker(e);return t.objectURL=e,t}},function(e,t,i){"use strict";i.r(t);var o=i(9),a=i(1),l=i(0),d=i(8);t.default=function(r){var s=new d.EventEmitter;s.trigger=function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];s.emit.apply(s,[e,e].concat(i))},s.off=function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];s.removeListener.apply(s,[e].concat(i))};function n(e,t){r.postMessage({event:e,data:t})}r.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);r.demuxer=new o.a(s,t.typeSupported,i,t.vendor),Object(l.a)(i.debug),n("init",null);break;case"demux":r.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),s.on(a.a.FRAG_DECRYPTED,n),s.on(a.a.FRAG_PARSING_INIT_SEGMENT,n),s.on(a.a.FRAG_PARSED,n),s.on(a.a.ERROR,n),s.on(a.a.FRAG_PARSING_METADATA,n),s.on(a.a.FRAG_PARSING_USERDATA,n),s.on(a.a.INIT_PTS_FOUND,n),s.on(a.a.FRAG_PARSING_DATA,function(e,t){var i=[],e={event:e,data:t};t.data1&&(e.data1=t.data1.buffer,i.push(t.data1.buffer),delete t.data1),t.data2&&(e.data2=t.data2.buffer,i.push(t.data2.buffer),delete t.data2),r.postMessage(e,i)})}},function(e,t,i){"use strict";i.r(t);var p,s,r=i(7),d=i(2),k=i(3),f=i(1),A=i(0),n={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},o=((_e=a.prototype).destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},_e.onHandlerDestroying=function(){},_e.onHandlerDestroyed=function(){},_e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},_e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(n[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},_e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},_e.onEvent=function(e,t){this.onEventGeneric(e,t)},_e.onEventGeneric=function(e,t){try{!function(e,t){var i="on"+e.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)}.call(this,e,t).call()}catch(t){A.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(f.a.ERROR,{type:d.b.OTHER_ERROR,details:d.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},a);function a(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}(Me=p=p||{}).MANIFEST="manifest",Me.LEVEL="level",Me.AUDIO_TRACK="audioTrack",Me.SUBTITLE_TRACK="subtitleTrack",(je=s=s||{}).MAIN="main",je.AUDIO="audio",je.SUBTITLE="subtitle";var l=i(10);var c,O=(W=[{key:"uri",get:function(){return!this.Et&&this.reluri&&(this.Et=Object(r.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this.Et}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(h.prototype,W),h);function h(e,t){this.Et=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}(Le=c=c||{}).AUDIO="audio",Le.VIDEO="video";var C=((_e=u.prototype).setByteRange=function(e,t){var i=e.split("@",2),e=[];1===i.length?e[0]=t?t.byteRangeEndOffset:0:e[0]=parseInt(i[1]),e[1]=parseInt(i[0])+e[0],this.Rt=e},_e.addElementaryStream=function(e){this.Dt[e]=!0},_e.hasElementaryStream=function(e){return!0===this.Dt[e]},_e.createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},_e.setDecryptDataFromLevelKey=function(e,t){var i=e;return e&&e.method&&e.uri&&!e.iv&&((i=new O(e.baseuri,e.reluri)).method=e.method,i.iv=this.createInitializationVector(t)),i},_e=[{key:"url",get:function(){return!this.Lt&&this.relurl&&(this.Lt=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this.Lt},set:function(e){this.Lt=e}},{key:"byteRange",get:function(){return this.Rt||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this.levelkey||this.Bt?(!this.Bt&&this.levelkey&&("number"!=typeof(e=this.sn)&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&A.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this.Bt=this.setDecryptDataFromLevelKey(this.levelkey,e)),this.Bt):null;var e}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(k.a)(this.programDateTime))return null;var e=Object(k.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(u.prototype,_e),u);function u(){var e;this.Lt=null,this.Rt=null,this.Bt=null,this.Dt=((e={})[c.AUDIO]=!1,e[c.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var w=(Me=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(k.a)(this.fragments[0].programDateTime))}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(v.prototype,Me),v),g=/^(\d+)x(\d+)$/,m=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,x=((je=b.prototype).decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},je.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,i=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(2*r,2*r+2),16);return i}return null},je.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},je.decimalFloatingPoint=function(e){return parseFloat(this[e])},je.enumeratedString=function(e){return this[e]},je.decimalResolution=function(e){e=g.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},b.parseAttrList=function(e){var t,i={};for(m.lastIndex=0;null!==(t=m.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),i[t[1]]=r}return i},b),y={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function b(e){for(var t in e="string"==typeof e?b.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}function v(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}function P(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var S=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,I=/#EXT-X-MEDIA:(.*)/g,E=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),L=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,R=/\.(mp4|m4s|m4v|m4a)$/i,T=(M.findGroup=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(r.id===t)return r}},M.convertAVC1ToAVCOTI=function(e){var t,i=e.split(".");return 2<i.length?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=e,t},M.resolve=function(e,t){return r.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},M.parseMasterPlaylist=function(e,t){var i=[];function r(r,s){["video","audio"].forEach(function(i){var e,t=r.filter(function(e){return t=e,!!(e=y[i])&&!0===e[t.slice(0,4)];var t});t.length&&(e=t.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}),s[i+"Codec"]=(0<e.length?e:t)[0],r=r.filter(function(e){return-1===t.indexOf(e)}))}),s.unknownCodecs=r}for(S.lastIndex=0;null!=(o=S.exec(e));){var s={},n=s.attrs=new x(o[1]);s.url=M.resolve(o[2],t);var o=n.decimalResolution("RESOLUTION");o&&(s.width=o.width,s.height=o.height),s.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),s.name=n.NAME,r([].concat((n.CODECS||"").split(/[ ,]+/)),s),s.videoCodec&&-1!==s.videoCodec.indexOf("avc1")&&(s.videoCodec=M.convertAVC1ToAVCOTI(s.videoCodec)),i.push(s)}return i},M.parseMasterPlaylistMedia=function(e,t,i,r){void 0===r&&(r=[]);var s=[],n=0;for(I.lastIndex=0;null!==(o=I.exec(e));){var o,a=new x(o[1]);a.TYPE===i&&(o={id:n++,groupId:a["GROUP-ID"],name:a.NAME||a.LANGUAGE,type:i,default:"YES"===a.DEFAULT,autoselect:"YES"===a.AUTOSELECT,forced:"YES"===a.FORCED,lang:a.LANGUAGE},a.URI&&(o.url=M.resolve(a.URI,t)),r.length&&(a=M.findGroup(r,o.groupId),o.audioCodec=(a||r[0]).codec),s.push(o))}return s},M.parseLevelPlaylist=function(e,t,i,r,s){var n,o,a,l=0,d=0,c=new w(t),h=0,u=null,p=new C,g=null;for(E.lastIndex=0;null!==(n=E.exec(e));){var m=n[1];if(m){p.duration=parseFloat(m);var f=(" "+n[2]).slice(1);p.title=f||null,p.tagList.push(f?["INF",m,f]:["INF",m])}else if(n[3])Object(k.a)(p.duration)&&(y=l++,p.type=r,p.start=d,a&&(p.levelkey=a),p.sn=y,p.level=i,p.cc=h,p.urlId=s,p.baseurl=t,p.relurl=(" "+n[3]).slice(1),m=u,(y=p).rawProgramDateTime?y.programDateTime=Date.parse(y.rawProgramDateTime):m&&m.programDateTime&&(y.programDateTime=m.endProgramDateTime),Object(k.a)(y.programDateTime)||(y.programDateTime=null,y.rawProgramDateTime=null),c.fragments.push(p),d+=(u=p).duration,p=new C);else if(n[4]){var y=(" "+n[4]).slice(1);u?p.setByteRange(y,u):p.setByteRange(y)}else if(n[5])p.rawProgramDateTime=(" "+n[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===g&&(g=c.fragments.length);else if(n=n[0].match(L)){for(o=1;o<n.length&&void 0===n[o];o++);var b=(" "+n[o+1]).slice(1),v=(" "+n[o+2]).slice(1);switch(n[o]){case"#":p.tagList.push(v?[b,v]:[b]);break;case"PLAYLIST-TYPE":c.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":l=c.startSN=parseInt(b);break;case"TARGETDURATION":c.targetduration=parseFloat(b);break;case"VERSION":c.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"DIS":h++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(b);break;case"KEY":var P=new x(b),S=P.enumeratedString("METHOD"),I=P.URI,P=P.hexadecimalInteger("IV");S&&(a=new O(t,I),I&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(S)&&(a.method=S,a.key=null,a.iv=P));break;case"START":var T=new x(b).decimalFloatingPoint("TIME-OFFSET");Object(k.a)(T)&&(c.startTimeOffset=T);break;case"MAP":T=new x(b);p.relurl=T.URI,T.BYTERANGE&&p.setByteRange(T.BYTERANGE),p.baseurl=t,p.level=i,p.type=r,p.sn="initSegment",c.initSegment=p,(p=new C).rawProgramDateTime=c.initSegment.rawProgramDateTime;break;default:A.b.warn("line parsed but not handled: "+n)}}else A.b.warn("No matches on slow regex match for level playlist!")}return(p=u)&&!p.relurl&&(c.fragments.pop(),d-=p.duration),c.totalduration=d,c.averagetargetduration=d/c.fragments.length,c.endSN=l-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=h,!c.initSegment&&c.fragments.length&&c.fragments.every(function(e){return R.test(e.relurl)})&&(A.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new C).relurl=c.fragments[0].relurl,p.baseurl=t,p.level=i,p.type=r,p.sn="initSegment",c.initSegment=p,c.needSidxRanges=!0),g&&function(e,t){for(var i=e[t],r=t-1;0<=r;r--){var s=e[r];s.programDateTime=i.programDateTime-1e3*s.duration,i=s}}(c.fragments,g),c},M);function M(){}var B=window.performance,j=function(t){var e;function u(e){return(e=t.call(this,e,f.a.MANIFEST_LOADING,f.a.LEVEL_LOADING,f.a.AUDIO_TRACK_LOADING,f.a.SUBTITLE_TRACK_LOADING)||this).loaders={},e}i=t,(e=u).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i,u.canHaveQualityLevels=function(e){return e!==p.AUDIO_TRACK&&e!==p.SUBTITLE_TRACK},u.mapContextToLevelType=function(e){switch(e.type){case p.AUDIO_TRACK:return s.AUDIO;case p.SUBTITLE_TRACK:return s.SUBTITLE;default:return s.MAIN}},u.getResponseUrl=function(e,t){e=e.url;return e=void 0===e||0===e.indexOf("data:")?t.url:e};var i=u.prototype;return i.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,r=t.loader,t=new(i||r)(t);return e.loader=t,this.loaders[e.type]=t},i.getInternalLoader=function(e){return this.loaders[e.type]},i.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},i.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},i.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},i.onManifestLoading=function(e){this.load({url:e.url,type:p.MANIFEST,level:0,id:null,responseType:"text"})},i.onLevelLoading=function(e){this.load({url:e.url,type:p.LEVEL,level:e.level,id:e.id,responseType:"text"})},i.onAudioTrackLoading=function(e){this.load({url:e.url,type:p.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},i.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:p.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},i.load=function(e){var t,i,r,s,n=this.hls.config;if(A.b.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id),a=this.getInternalLoader(e)){var o=a.context;if(o&&o.url===e.url)return A.b.trace("playlist request ongoing"),!1;A.b.warn("aborting previous loader for type: "+e.type),a.abort()}switch(e.type){case p.MANIFEST:t=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,r=n.manifestLoadingRetryDelay,s=n.manifestLoadingMaxRetryTimeout;break;case p.LEVEL:r=s=t=0,i=n.levelLoadingTimeOut;break;default:t=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,r=n.levelLoadingRetryDelay,s=n.levelLoadingMaxRetryTimeout}var a=this.createInternalLoader(e),l={timeout:i,maxRetry:t,retryDelay:r,maxRetryDelay:s},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return A.b.debug("Calling internal loader delegate for URL: "+e.url),a.load(e,l,o),!0},i.loadsuccess=function(e,t,i,r){if(void 0===r&&(r=null),i.isSidxRequest)return this.Ft(e,i),void this.Ut(e,t,i,r);if(this.resetInternalLoader(i.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var s=e.data;t.tload=B.now(),0===s.indexOf("#EXTM3U")?0<s.indexOf("#EXTINF:")||0<s.indexOf("#EXT-X-TARGETDURATION:")?this.$t(e,t,i,r):this.Vt(e,t,i,r):this.Nt(e,i,"no EXTM3U delimiter",r)},i.loaderror=function(e,t,i){this.Ht(t,i=void 0===i?null:i,!1,e)},i.loadtimeout=function(e,t,i){this.Ht(t,i=void 0===i?null:i,!0)},i.Vt=function(e,t,i,r){var s,n,o=this.hls,a=e.data,l=u.getResponseUrl(e,i),d=T.parseMasterPlaylist(a,l);d.length?(s=d.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),s=T.parseMasterPlaylistMedia(a,l,"AUDIO",s),a=T.parseMasterPlaylistMedia(a,l,"SUBTITLES"),s.length&&(n=!1,s.forEach(function(e){e.url||(n=!0)}),!1===n&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(A.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),s.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))),o.trigger(f.a.MANIFEST_LOADED,{levels:d,audioTracks:s,subtitles:a,url:l,stats:t,networkDetails:r})):this.Nt(e,i,"no level found in manifest",r)},i.$t=function(e,t,i,r){var s=this.hls,n=i.id,o=i.level,a=i.type,l=u.getResponseUrl(e,i),d=Object(k.a)(n)?n:0,c=Object(k.a)(o)?o:d,h=u.mapContextToLevelType(i),d=T.parseLevelPlaylist(e.data,l,c,h,d);d.tload=t.tload,a===p.MANIFEST&&s.trigger(f.a.MANIFEST_LOADED,{levels:[{url:l,details:d}],audioTracks:[],url:l,stats:t,networkDetails:r}),t.tparsed=B.now(),d.needSidxRanges?(l=d.initSegment.url,this.load({url:l,isSidxRequest:!0,type:a,level:o,levelDetails:d,id:n,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})):(i.levelDetails=d,this.Ut(e,t,i,r))},i.Ft=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var i,r=l.a.parseSegmentIndex(new Uint8Array(e.data));r&&(e=r.references,i=t.levelDetails,e.forEach(function(e,t){e=e.info;!i||0===(t=i.fragments[t]).byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}),i&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0"))},i.Nt=function(e,t,i,r){this.hls.trigger(f.a.ERROR,{type:d.b.NETWORK_ERROR,details:d.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:i,networkDetails:r})},i.Ht=function(e,t,i,r){var s,n;void 0===i&&(i=!1),void 0===r&&(r=null),A.b.info("A network error occured while loading a "+e.type+"-type playlist");var o=this.getInternalLoader(e);switch(e.type){case p.MANIFEST:s=i?d.a.MANIFEST_LOAD_TIMEOUT:d.a.MANIFEST_LOAD_ERROR,n=!0;break;case p.LEVEL:s=i?d.a.LEVEL_LOAD_TIMEOUT:d.a.LEVEL_LOAD_ERROR,n=!1;break;case p.AUDIO_TRACK:s=i?d.a.AUDIO_TRACK_LOAD_TIMEOUT:d.a.AUDIO_TRACK_LOAD_ERROR,n=!1;break;default:n=!1}o&&(o.abort(),this.resetInternalLoader(e.type));t={type:d.b.NETWORK_ERROR,details:s,fatal:n,url:e.url,loader:o,context:e,networkDetails:t};r&&(t.response=r),this.hls.trigger(f.a.ERROR,t)},i.Ut=function(e,t,i,r){var s=i.type,n=i.level,o=i.id,a=i.levelDetails;if(a&&a.targetduration)if(u.canHaveQualityLevels(i.type))this.hls.trigger(f.a.LEVEL_LOADED,{details:a,level:n||0,id:o||0,stats:t,networkDetails:r});else switch(s){case p.AUDIO_TRACK:this.hls.trigger(f.a.AUDIO_TRACK_LOADED,{details:a,id:o,stats:t,networkDetails:r});break;case p.SUBTITLE_TRACK:this.hls.trigger(f.a.SUBTITLE_TRACK_LOADED,{details:a,id:o,stats:t,networkDetails:r})}else this.Nt(e,i,"invalid target duration",r)},u}(o),D=function(r){var e;function t(e){return(e=r.call(this,e,f.a.FRAG_LOADING)||this).loaders={},e}i=r,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.destroy=function(){var e,t=this.loaders;for(e in t){var i=t[e];i&&i.destroy()}this.loaders={},r.prototype.destroy.call(this)},i.onFragLoading=function(e){var t=e.frag,i=t.type,r=this.loaders,s=this.hls.config,n=s.fLoader,o=s.loader;t.loaded=0,(e=r[i])&&(A.b.warn("abort previous fragment loader for type: "+i),e.abort());var e=r[i]=t.loader=new(s.fLoader?n:o)(s),n={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},o=t.byteRangeStartOffset,t=t.byteRangeEndOffset;Object(k.a)(o)&&Object(k.a)(t)&&(n.rangeStart=o,n.rangeEnd=t),t={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:s.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},e.load(n,t,s)},i.loadsuccess=function(e,t,i,r){void 0===r&&(r=null);e=e.data,i=i.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(f.a.FRAG_LOADED,{payload:e,frag:i,stats:t,networkDetails:r})},i.loaderror=function(e,t,i){void 0===i&&(i=null);var r=t.frag,s=r.loader;s&&s.abort(),this.loaders[r.type]=void 0,this.hls.trigger(f.a.ERROR,{type:d.b.NETWORK_ERROR,details:d.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:i})},i.loadtimeout=function(e,t,i){void 0===i&&(i=null);var r=t.frag,s=r.loader;s&&s.abort(),this.loaders[r.type]=void 0,this.hls.trigger(f.a.ERROR,{type:d.b.NETWORK_ERROR,details:d.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:i})},i.loadprogress=function(e,t,i,r){void 0===r&&(r=null);t=t.frag;t.loaded=e.loaded,this.hls.trigger(f.a.FRAG_LOAD_PROGRESS,{frag:t,stats:e,networkDetails:r})},t}(o),_=function(t){var e;function i(e){return(e=t.call(this,e,f.a.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}r=t,(e=i).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=i.prototype;return r.destroy=function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t,i=e.frag,r=i.type,s=this.loaders[r];i.decryptdata?(t=i.decryptdata.uri)!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,s&&(A.b.warn("abort previous key loader for type:"+r),s.abort()),t?(i.loader=this.loaders[r]=new e.loader(e),this.decrypturl=t,this.decryptkey=null,r={url:t,frag:i,responseType:"arraybuffer"},t={timeout:e.fragLoadingTimeOut,maxRetry:0,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},e={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.loader.load(r,t,e)):A.b.warn("key uri is falsy")):this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(f.a.KEY_LOADED,{frag:i})):A.b.warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,i){i=i.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(f.a.KEY_LOADED,{frag:i})):A.b.error("after key load, decryptdata unset")},r.loaderror=function(e,t){var i=t.frag,t=i.loader;t&&t.abort(),delete this.loaders[i.type],this.hls.trigger(f.a.ERROR,{type:d.b.NETWORK_ERROR,details:d.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},r.loadtimeout=function(e,t){var i=t.frag,t=i.loader;t&&t.abort(),delete this.loaders[i.type],this.hls.trigger(f.a.ERROR,{type:d.b.NETWORK_ERROR,details:d.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},i}(o),F="NOT_LOADED",N="APPENDING",U="PARTIAL",V=function(i){var e;function t(e){var t;return(t=i.call(this,e,f.a.BUFFER_APPENDED,f.a.FRAG_BUFFERED,f.a.FRAG_LOADED)||this).bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}r=i,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,o.prototype.destroy.call(this),i.prototype.destroy.call(this)},r.getBufferedFrag=function(t,i){var r=this.fragments,e=Object.keys(r).filter(function(e){e=r[e];if(e.body.type!==i)return!1;if(!e.buffered)return!1;e=e.body;return e.startPTS<=t&&t<=e.endPTS});if(0===e.length)return null;e=e.pop();return r[e].body},r.detectEvictedFragments=function(r,s){var n,o,a=this;Object.keys(this.fragments).forEach(function(e){var t=a.fragments[e];if(!0===t.buffered){e=t.range[r];if(e){n=e.time;for(var i=0;i<n.length;i++)if(o=n[i],!1===a.isTimeBuffered(o.startPTS,o.endPTS,s)){a.removeFragment(t.body);break}}}})},r.detectPartialFragments=function(i){var r=this,e=this.getFragmentKey(i),s=this.fragments[e];s&&(s.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){var t;i.hasElementaryStream(e)&&(t=r.timeRanges[e],s.range[e]=r.getBufferedTimes(i.startPTS,i.endPTS,t))}))},r.getBufferedTimes=function(e,t,i){for(var r,s,n=[],o=!1,a=0;a<i.length;a++){if(r=i.start(a)-this.bufferPadding,s=i.end(a)+this.bufferPadding,r<=e&&t<=s){n.push({startPTS:Math.max(e,i.start(a)),endPTS:Math.min(t,i.end(a))});break}if(e<s&&r<t)n.push({startPTS:Math.max(e,i.start(a)),endPTS:Math.min(t,i.end(a))}),o=!0;else if(t<=r)break}return{time:n,partial:o}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(t){var i,r,s=this,n=null,o=0;return Object.keys(this.fragments).forEach(function(e){e=s.fragments[e];s.isPartial(e)&&(i=e.body.startPTS-s.bufferPadding,r=e.body.endPTS+s.bufferPadding,i<=t&&t<=r&&(r=Math.min(t-i,r-t),o<=r&&(n=e.body,o=r)))}),n},r.getState=function(e){var t=this.getFragmentKey(e),e=this.fragments[t],t=F;return t=void 0!==e?e.buffered?!0===this.isPartial(e)?U:"OK":N:t},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,i){for(var r,s,n=0;n<i.length;n++){if(r=i.start(n)-this.bufferPadding,s=i.end(n)+this.bufferPadding,r<=e&&t<=s)return!0;if(t<=r)return!1}return!1},r.onFragLoaded=function(e){e=e.frag;Object(k.a)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var i=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=i.timeRanges[e];i.detectEvictedFragments(e,t)})},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){e=this.getFragmentKey(e);return void 0!==this.fragments[e]},r.removeFragment=function(e){e=this.getFragmentKey(e);delete this.fragments[e]},r.removeAllFragments=function(){this.fragments=Object.create(null)},t}(o),q=function(e,t){for(var i,r,s=0,n=e.length-1;s<=n;){var o=t(r=e[i=(s+n)/2|0]);if(0<o)s=1+i;else{if(!(o<0))return r;n=i-1}}return null},H=(z.isBuffered=function(e,t){try{if(e)for(var i=e.buffered,r=0;r<i.length;r++)if(t>=i.start(r)&&t<=i.end(r))return!0}catch(e){}return!1},z.bufferInfo=function(e,t,i){try{if(e){for(var r=e.buffered,s=[],n=0;n<r.length;n++)s.push({start:r.start(n),end:r.end(n)});return this.bufferedInfo(s,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},z.bufferedInfo=function(e,t,i){e.sort(function(e,t){return e.start-t.start||t.end-e.end});var r=[];if(i)for(var s=0;s<e.length;s++){var n,o=r.length;o?(n=r[o-1].end,e[s].start-n<i?e[s].end>n&&(r[o-1].end=e[s].end):r.push(e[s])):r.push(e[s])}else r=e;for(var a,l=0,d=t,c=t,h=0;h<r.length;h++){var u=r[h].start,p=r[h].end;if(u<=t+i&&t<p)d=u,l=(c=p)-t;else if(t+i<u){a=u;break}}return{len:l,start:d,end:c,nextStart:a}},z),W=i(8),G=i(11),$=i(9);function z(){}function J(){return window.MediaSource||window.WebKitMediaSource}var Q,Y=i(5),X=(Q=W.EventEmitter,Le=Q,(_e=te).prototype=Object.create(Le.prototype),(_e.prototype.constructor=_e).__proto__=Le,te.prototype.trigger=function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(i))},te),K=J()||{isTypeSupported:function(){return!1}},Z=((Me=ee.prototype).destroy=function(){var e=this.w;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null);var t=this.observer;t&&(t.removeAllListeners(),this.observer=null)},Me.push=function(e,t,i,r,s,n,o,a){var l=this.w,d=Object(k.a)(s.startPTS)?s.startPTS:s.start,c=s.decryptdata,h=this.frag,u=!(h&&s.cc===h.cc),p=!(h&&s.level===h.level),h=h&&s.sn===h.sn+1,h=!p&&h;u&&A.b.log(this.id+":discontinuity detected"),p&&A.b.log(this.id+":switch detected"),this.frag=s,l?l.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:i,videoCodec:r,timeOffset:d,discontinuity:u,trackSwitch:p,contiguous:h,duration:n,accurateTimeOffset:o,defaultInitPTS:a},e instanceof ArrayBuffer?[e]:[]):(l=this.demuxer)&&l.push(e,c,t,i,r,d,u,p,h,n,o,a)},Me.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":Object(Y.a)().URL.revokeObjectURL(this.w.objectURL);break;case f.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},ee);function ee(i,e){var r=this;this.hls=i,this.id=e;var t=this.observer=new X,s=i.config,n=function(e,t){(t=t||{}).frag=r.frag,t.id=r.id,i.trigger(e,t)};t.on(f.a.FRAG_DECRYPTED,n),t.on(f.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(f.a.FRAG_PARSING_DATA,n),t.on(f.a.FRAG_PARSED,n),t.on(f.a.ERROR,n),t.on(f.a.FRAG_PARSING_METADATA,n),t.on(f.a.FRAG_PARSING_USERDATA,n),t.on(f.a.INIT_PTS_FOUND,n);var o,a={mp4:K.isTypeSupported("video/mp4"),mpeg:K.isTypeSupported("audio/mpeg"),mp3:K.isTypeSupported('audio/mp4; codecs="mp3"')},n=navigator.vendor;if(s.enableWorker&&"undefined"!=typeof Worker){A.b.log("demuxing in webworker");try{o=this.w=G(12),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(e){i.trigger(f.a.ERROR,{type:d.b.OTHER_ERROR,details:d.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:a,vendor:n,id:e,config:JSON.stringify(s)})}catch(i){A.b.warn("Error in worker:",i),A.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&Object(Y.a)().URL.revokeObjectURL(o.objectURL),this.demuxer=new $.a(t,a,s,n),this.w=void 0}}else this.demuxer=new $.a(t,a,s,n)}function te(){return Q.apply(this,arguments)||this}function ie(e,t,i){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(i);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(i)}}function re(e,t,i){var r=e[t],s=e[i],e=s.startPTS;Object(k.a)(e)?t<i?(r.duration=e-r.start,r.duration<0&&A.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(s.duration=r.start-e,s.duration<0&&A.b.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):s.start=t<i?r.start+r.duration:Math.max(r.start-s.duration,0)}function se(e,t,i,r,s,n){var o=i;Object(k.a)(t.startPTS)&&(a=Math.abs(t.startPTS-i),Object(k.a)(t.deltaPTS)?t.deltaPTS=Math.max(a,t.deltaPTS):t.deltaPTS=a,o=Math.max(i,t.startPTS),i=Math.min(i,t.startPTS),r=Math.max(r,t.endPTS),s=Math.min(s,t.startDTS),n=Math.max(n,t.endDTS));var a=i-t.start;t.start=t.startPTS=i,t.maxStartPTS=o,t.endPTS=r,t.startDTS=s,t.endDTS=n,t.duration=r-i;var l,d,i=t.sn;if(!e||i<e.startSN||i>e.endSN)return 0;for(i=i-e.startSN,(l=e.fragments)[i]=t,d=i;0<d;d--)re(l,d,d-1);for(d=i;d<l.length-1;d++)re(l,d,d+1);return e.PTSKnown=!0,a}var ne=function(e){for(var t="",i=e.length,r=0;r<i;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t};function oe(i,e){e.fragments.forEach(function(e){var t;e&&(t=e.start+i,e.start=e.startPTS=t,e.endPTS=t+e.duration)}),e.PTSKnown=!0}function ae(e,t,i){var r,s,n,o;r=e,s=i,e=!1,(e=!!((n=t)&&n.details&&s&&(s.endCC>s.startCC||r&&r.cc<s.startCC))||e)&&(o=function(){var e=n.details.fragments,t=s.fragments;if(t.length&&e.length){t=function(e,t){for(var i=null,r=0;r<e.length;r+=1){var s=e[r];if(s&&s.cc===t){i=s;break}}return i}(e,t[0].cc);if(t&&(!t||t.startPTS))return t;A.b.log("No frag in previous level to align on")}else A.b.log("No fragments to align")}())&&(A.b.log("Adjusting PTS using last level due to CC increase within current level"),oe(o.start,s)),!i.PTSKnown&&t&&(o=i,(i=t.details)&&i.fragments.length&&o.hasProgramDateTime&&i.hasProgramDateTime&&(t=i.fragments[0].programDateTime,i=(o.fragments[0].programDateTime-t)/1e3+i.fragments[0].start,Object(k.a)(i)&&(A.b.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),oe(i,o))))}function le(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0);t=Math.min(t,i.duration+(i.deltaPTS||0));return i.start+i.duration-t<=e?1:i.start-t>e&&i.start?-1:0}var de=((je=Pe.prototype).poll=function(e){var t=this.config,i=this.media,r=this.stalled,s=i.currentTime,n=i.seeking,o=this.seeking&&!n,a=!this.seeking&&n;if(this.seeking=n,s===e){if((a||o)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&i.buffered.length){e=H.bufferInfo(i,s,0),a=0<e.len,o=e.nextStart||0;if(a||o){if(n){if(2<e.len||!o||2<o-s)return;this.moved=!1}if(!this.moved&&this.stalled){var l=Math.max(o,e.start||0)-s;if(0<l&&l<=2)return void this.qt(null)}o=self.performance.now();null!==r?(l=o-r,!n&&250<=l&&this.zt(e.len),t=H.bufferInfo(i,s,t.maxBufferHole),this.Wt(t,l)):this.stalled=o}}}else this.moved=!0,null!==r&&(this.stallReported&&(r=self.performance.now()-r,A.b.warn("playback not stuck anymore @"+s+", after "+Math.round(r)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)},je.Wt=function(e,t){var i=this.config,r=this.fragmentTracker,s=this.media.currentTime,s=r.getPartialFragment(s);s&&this.qt(s)||e.len>i.maxBufferHole&&t>1e3*i.highBufferWatchdogPeriod&&(A.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this.Gt())},je.zt=function(e){var t=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,A.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer"),t.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},je.qt=function(e){for(var t=this.config,i=this.hls,r=this.media,s=r.currentTime,n=0,o=0;o<r.buffered.length;o++){var a=r.buffered.start(o);if(s+t.maxBufferHole>=n&&s<a){a=Math.max(a+.05,r.currentTime+.1);return A.b.warn("skipping hole, adjusting currentTime from "+s+" to "+a),this.moved=!0,this.stalled=null,r.currentTime=a,e&&i.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+s+" to "+a,frag:e}),a}n=r.buffered.end(o)}return 0},je.Gt=function(){var e=this.config,t=this.hls,i=this.media,r=i.currentTime,s=(this.nudgeRetry||0)+1;(this.nudgeRetry=s)<e.nudgeMaxRetry?(s=r+s*e.nudgeOffset,A.b.warn("Nudging 'currentTime' from "+r+" to "+s),i.currentTime=s,t.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_NUDGE_ON_STALL,fatal:!1})):(A.b.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_STALLED_ERROR,fatal:!0}))},Pe),ce="STOPPED",he="IDLE",ue="KEY_LOADING",pe="FRAG_LOADING",ge="FRAG_LOADING_WAITING_RETRY",me="PARSING",fe="PARSED",ye="BUFFER_FLUSHING",be="ERROR",ve="WAITING_LEVEL";function Pe(e,t,i,r){this.config=e,this.media=t,this.fragmentTracker=i,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var Se=function(r){var e;function t(e,t){var i;return(i=r.call(this,e,f.a.MEDIA_ATTACHED,f.a.MEDIA_DETACHING,f.a.MANIFEST_LOADING,f.a.MANIFEST_PARSED,f.a.LEVEL_LOADED,f.a.KEY_LOADED,f.a.FRAG_LOADED,f.a.FRAG_LOAD_EMERGENCY_ABORTED,f.a.FRAG_PARSING_INIT_SEGMENT,f.a.FRAG_PARSING_DATA,f.a.FRAG_PARSED,f.a.ERROR,f.a.AUDIO_TRACK_SWITCHING,f.a.AUDIO_TRACK_SWITCHED,f.a.BUFFER_CREATED,f.a.BUFFER_APPENDED,f.a.BUFFER_FLUSHED)||this).fragmentTracker=t,i.config=e.config,i.audioCodecSwap=!1,i.Jt=ce,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i}i=r,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.startLoad=function(e){var t,i,r;this.levels?(t=this.lastCurrentTime,i=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(r=i.startLevel)&&(this.bitrateTest=!(r=0)),this.level=i.nextLoadLevel=r,this.loadedmetadata=!1),0<t&&-1===e&&(A.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=he,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=ce)},i.stopLoad=function(){this.forceStartLoad=!1,r.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case ye:this.fragLoadError=0;break;case he:this.Qt();break;case ve:var e=this.levels[this.level];e&&e.details&&(this.state=he);break;case ge:var t=window.performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(A.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=he)}this.Xt(),this.Yt()},i.Qt=function(){var e=this.hls,t=e.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&t.startFragPrefetch)){var r=this.loadedmetadata?i.currentTime:this.nextLoadPosition,s=e.nextLoadLevel,n=this.levels[s];if(n){var o=n.bitrate,o=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength;o=Math.min(o,t.maxMaxBufferLength);i=H.bufferInfo(this.mediaBuffer||i,r,t.maxBufferHole),t=i.len;if(!(o<=t)){A.b.trace("buffer length of "+t.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=s;n=n.details;if(!n||n.live&&this.levelLastLoaded!==s)this.state=ve;else{if(this.Kt(i,n)){s={};return this.altAudio&&(s.type="video"),this.hls.trigger(f.a.BUFFER_EOS,s),void(this.state="ENDED")}this.Zt(r,i,n)}}}}},i.Zt=function(e,t,i){var r=this.fragPrevious,s=this.level,n=i.fragments,o=n.length;if(0!==o){var a,l=n[0].start,d=n[o-1].start+n[o-1].duration,c=t.end;if(i.initSegment&&!i.initSegment.data)a=i.initSegment;else if(i.live){t=this.config.initialLiveManifestSize;if(o<t)return void A.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+t);if(null===(a=this.ti(i,c,l,d,r,n,o)))return}else c<l&&(a=n[0]);(a=a||this.ii(l,r,o,n,c,d,i))&&(a.encrypted?(A.b.log("Loading key for "+a.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+s),this.ei(a)):(A.b.log("Loading "+a.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+s+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this.si(a)))}},i.ti=function(e,t,i,r,s,n,o){var a,l=this.hls.config,d=this.media,c=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;return t<Math.max(i-l.maxFragLookUpTolerance,r-c)&&(t=i=this.liveSyncPosition=this.computeLivePosition(i,e),d&&!d.paused&&d.readyState&&d.duration>i&&i>d.currentTime&&(A.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+i.toFixed(3)),d.currentTime=i),this.nextLoadPosition=i),e.PTSKnown&&r<t&&d&&d.readyState?null:(this.startFragRequested&&!e.PTSKnown&&(s&&(e.hasProgramDateTime?(A.b.log("live playlist, switching playlist, load frag with same PDT: "+s.programDateTime),a=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!Object(k.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var r,s,n,o=0;o<e.length;++o){var a=e[o];if(r=t,s=i,n=a,s=1e3*Math.min(i,n.duration+(n.deltaPTS||0)),(n.endProgramDateTime||0)-s>r)return a}return null}(n,s.endProgramDateTime,l.maxFragLookUpTolerance)):((l=s.sn+1)>=e.startSN&&l<=e.endSN&&(e=n[l-e.startSN],s.cc===e.cc&&A.b.log("live playlist, switching playlist, load frag with next SN: "+(a=e).sn)),a||(a=q(n,function(e){return s.cc-e.cc}))&&A.b.log("live playlist, switching playlist, load frag with same CC: "+a.sn))),a||(a=n[Math.min(o-1,Math.round(o/2))],A.b.log("live playlist, switching playlist, unknown, load middle frag : "+a.sn))),a)},i.ii=function(e,s,t,i,r,n,o){var a,l=this.hls.config;return(a=r<n?function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var r=s?e[s.sn-e[0].sn+1]:null;return r&&!le(t,i,r)?r:q(e,le.bind(null,t,i))}(i,r,r>n-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):i[t-1])&&(r=a.sn-o.startSN,n=s&&a.level===s.level,t=i[r-1],i=i[1+r],s&&a.sn===s.sn&&(n&&!a.backtracked?a.sn<o.endSN?(o=s.deltaPTS)&&o>l.maxBufferHole&&s.dropped&&r?(a=t,A.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):A.b.log("Re-loading fragment with SN: "+(a=i).sn):a=null:a.backtracked&&(i&&i.backtracked?(A.b.warn("Already backtracked from fragment "+i.sn+", will not backtrack to fragment "+a.sn+". Loading fragment "+i.sn),a=i):(A.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),a.dropped=0,t?(a=t).backtracked=!0:r&&(a=null))))),a},i.ei=function(e){this.state=ue,this.hls.trigger(f.a.KEY_LOADING,{frag:e})},i.si=function(e){var t=this.fragmentTracker.getState(e);"initSegment"!==(this.fragCurrent=e).sn&&(this.startFragRequested=!0),Object(k.a)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===F||t===U?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(f.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Z(this.hls,"main")),this.state=pe):t===N&&this.ni(e.duration)&&this.fragmentTracker.removeFragment(e)},i.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,s.MAIN)},i.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},i.Yt=function(){var e,t,i=this.media;i&&i.readyState&&!1===i.seeking&&((e=i.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),H.isBuffered(i,e)?t=this.getBufferedFrag(e):H.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)&&((e=t)!==this.fragPlaying&&(this.hls.trigger(f.a.FRAG_CHANGED,{frag:e}),t=e.level,this.fragPlaying&&this.fragPlaying.level===t||this.hls.trigger(f.a.LEVEL_SWITCHED,{level:t}),this.fragPlaying=e))},i.immediateLevelSwitch=function(){var e;A.b.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,H.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},i.nextLevelSwitch=function(){var e,t,i=this.media;i&&i.readyState&&((e=this.getBufferedFrag(i.currentTime))&&1<e.startPTS&&this.flushMainBuffer(0,e.startPTS-1),t=i.paused?0:(t=this.hls.nextLoadLevel,e=this.levels[t],(t=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*e.bitrate/(1e3*t)+1:0),(i=this.getBufferedFrag(i.currentTime+t))&&(i=this.followingBufferedFrag(i))&&((t=this.fragCurrent)&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)))},i.flushMainBuffer=function(e,t){this.state=ye;t={startOffset:e,endOffset:t};this.altAudio&&(t.type="video"),this.hls.trigger(f.a.BUFFER_FLUSHING,t)},i.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new de(e,t,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(A.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},i.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:void 0;Object(k.a)(e)&&A.b.log("media seeked to "+e.toFixed(3)),this.tick()},i.onManifestLoading=function(){A.b.log("trigger BUFFER_RESET"),this.hls.trigger(f.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},i.onManifestParsed=function(e){var t,i=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(i=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=i&&r,this.audioCodecSwitch&&A.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)},i.onLevelLoaded=function(e){var t=e.details,i=e.level,r=this.levels[this.levelLastLoaded],s=this.levels[i],n=t.totalduration,o=0;A.b.log("level "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live?(e=s.details)&&0<t.fragments.length?(function(s,l){l.initSegment&&s.initSegment&&(l.initSegment=s.initSegment);var d,c=0;if(function(e,t){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,n=i;n<=r;n++){var o=e.fragments[s+n],a=t.fragments[n];if(!o||!a)break;a=a,c=(o=o).cc-a.cc,Object(k.a)(o.startPTS)&&(a.start=a.startPTS=o.startPTS,a.endPTS=o.endPTS,a.duration=o.duration,a.backtracked=o.backtracked,a.dropped=o.dropped,d=a),l.PTSKnown=!0}}(s,l),l.PTSKnown){if(c){A.b.log("discontinuity sliding from playlist, take drift into account");for(var e=l.fragments,t=0;t<e.length;t++)e[t].cc+=c}d?se(l,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS):function(){var e=l.startSN-s.startSN,t=s.fragments,i=l.fragments;if(!(e<0||e>t.length))for(var r=0;r<i.length;r++)i[r].start+=t[e].start}(),l.PTSKnown=s.PTSKnown}}(e,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,e),t.PTSKnown&&Object(k.a)(o)?A.b.log("live playlist sliding:"+o.toFixed(3)):(A.b.log("live playlist - outdated PTS, unknown sliding"),ae(this.fragPrevious,r,t))):(A.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,ae(this.fragPrevious,r,t)):t.PTSKnown=!1,s.details=t,this.levelLastLoaded=i,this.hls.trigger(f.a.LEVEL_UPDATED,{details:t,level:i}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(i=t.startTimeOffset,Object(k.a)(i)?(i<0&&(A.b.log("negative start time offset "+i+", count from end of last fragment"),i=o+n+i),A.b.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):t.live?(this.startPosition=this.computeLivePosition(o,t),A.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===ve&&(this.state=he),this.tick()},i.onKeyLoaded=function(){this.state===ue&&(this.state=he,this.tick())},i.onFragLoaded=function(e){var t,i,r=this.fragCurrent,s=this.hls,n=this.levels,o=this.media,a=e.frag;this.state===pe&&r&&"main"===a.type&&a.level===r.level&&a.sn===r.sn&&(i=e.stats,n=(t=n[r.level]).details,this.bitrateTest=!1,this.stats=i,A.b.log("Loaded "+r.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+r.level),a.bitrateTest&&s.nextLoadLevel?(this.state=he,this.startFragRequested=!1,i.tparsed=i.tbuffered=window.performance.now(),s.trigger(f.a.FRAG_BUFFERED,{stats:i,frag:r,id:"main"}),this.tick()):"initSegment"===a.sn?(this.state=he,i.tparsed=i.tbuffered=window.performance.now(),n.initSegment.data=e.payload,s.trigger(f.a.FRAG_BUFFERED,{stats:i,frag:r,id:"main"}),this.tick()):(A.b.log("Parsing "+r.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+r.level+", cc "+r.cc),this.state=me,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a})),i=!(o&&o.seeking)&&(n.PTSKnown||!n.live),a=n.initSegment?n.initSegment.data:[],o=this.ri(t),(this.demuxer=this.demuxer||new Z(this.hls,"main")).push(e.payload,a,o,t.videoCodec,r,n.totalduration,i))),this.fragLoadError=0},i.onFragParsingInitSegment=function(e){var t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===me){var r,s,n=e.tracks;for(r in n.audio&&this.altAudio&&delete n.audio,(s=n.audio)&&(i=this.levels[this.level].audioCodec,t=navigator.userAgent.toLowerCase(),i&&this.audioCodecSwap&&(A.b.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==s.metadata.channelCount&&-1===t.indexOf("firefox")&&(i="mp4a.40.5"),-1!==t.indexOf("android")&&"audio/mpeg"!==s.container&&A.b.log("Android: force audio codec to "+(i="mp4a.40.2")),s.levelCodec=i,s.id=e.id),(s=n.video)&&(s.levelCodec=this.levels[this.level].videoCodec,s.id=e.id),this.hls.trigger(f.a.BUFFER_CODECS,n),n){s=n[r],A.b.log("main track:"+r+",container:"+s.container+",codecs[level/parsed]=["+s.levelCodec+"/"+s.codec+"]");var o=s.initSegment;o&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(f.a.BUFFER_APPENDING,{type:r,data:o,parent:"main",content:"initSegment"}))}this.tick()}},i.onFragParsingData=function(t){var i=this,e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===me){var s=this.levels[this.level],r=e;if(Object(k.a)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&r.addElementaryStream(c.AUDIO),!0===t.hasVideo&&r.addElementaryStream(c.VIDEO),A.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)A.b.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{e=s.details;if(!e||r.sn!==e.startSN)return A.b.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=he,this.fragPrevious=r,void this.tick();A.b.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var r=se(s.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),n=this.hls;n.trigger(f.a.LEVEL_PTS_UPDATED,{details:s.details,level:this.level,drift:r,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&i.state===me&&(i.appended=!0,i.pendingBuffering=!0,n.trigger(f.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},i.onFragParsed=function(e){var t=this.fragCurrent,i=e.frag;t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===me&&(this.stats.tparsed=window.performance.now(),this.state=fe,this.ai())},i.onAudioTrackSwitching=function(e){var t,i=!!e.url,e=e.id;i||(this.mediaBuffer!==this.media&&(A.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(A.b.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=he),(t=this.hls).trigger(f.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),t.trigger(f.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1)},i.onAudioTrackSwitched=function(e){var t=e.id,e=!!this.hls.audioTracks[t].url;!e||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(A.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=e,this.tick()},i.onBufferCreated=function(e){var t,i,r,s=e.tracks,n=!1;for(r in s){var o=s[r];"main"===o.id?(t=o,"video"===(i=r)&&(this.videoBuffer=s[r].buffer)):n=!0}n&&t?(A.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},i.onBufferAppended=function(e){var t;"main"===e.parent&&((t=this.state)!==me&&t!==fe||(this.pendingBuffering=0<e.pending,this.ai()))},i.ai=function(){var e,t;this.state!==fe||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer||this.media,A.b.log("main buffered : "+ne(t.buffered)),this.fragPrevious=e,(t=this.stats).tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(f.a.FRAG_BUFFERED,{stats:t,frag:e,id:"main"}),this.state=he),this.tick())},i.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var i,r=!!this.media&&H.isBuffered(this.media,this.media.currentTime)&&H.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case d.a.FRAG_LOAD_ERROR:case d.a.FRAG_LOAD_TIMEOUT:case d.a.KEY_LOAD_ERROR:case d.a.KEY_LOAD_TIMEOUT:e.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),A.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ge):(A.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=be));break;case d.a.LEVEL_LOAD_ERROR:case d.a.LEVEL_LOAD_TIMEOUT:this.state!==be&&(e.fatal?(this.state=be,A.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==ve||(this.state=he));break;case d.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==me&&this.state!==fe||(r?(this.ni(this.config.maxBufferLength),this.state=he):(A.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},i.ni=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,A.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},i.Xt=function(){var e=this.media;e&&0!==e.readyState&&(e=(this.mediaBuffer||e).buffered,!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this.oi()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e))},i.onFragLoadEmergencyAborted=function(){this.state=he,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},i.onBufferFlushed=function(){var e=this.mediaBuffer||this.media;e&&this.fragmentTracker.detectEvictedFragments(c.VIDEO,e.buffered),this.state=he,this.fragPrevious=null},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.oi=function(){var e=this.media,t=e.currentTime,i=e.seeking?t:this.startPosition;t!==i&&0<=i&&(A.b.log("target start position not buffered, seek to buffered.start(0) "+i+" from current time "+t+" "),e.currentTime=i)},i.ri=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(A.b.log("swapping playlist audio codec"),e=e&&(-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,[{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this.Jt=e,A.b.log("main stream-controller: "+t+"->"+e),this.hls.trigger(f.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this.Jt}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getBufferedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this.ci},set:function(e){this.ci=e}}]),t}(function(e){var t;function i(){return e.apply(this,arguments)||this}r=e,(t=i).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var r=i.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ce},r.Kt=function(e,t){var i=this.fragCurrent,r=this.fragmentTracker;if(t.live||!i||i.backtracked||i.sn!==t.endSN||e.nextStart)return!1;i=r.getState(i);return i===U||"OK"===i},r.onMediaSeeking=function(){var e,t=this.config,i=this.media,r=this.mediaBuffer,s=this.state,n=i?i.currentTime:null,o=H.bufferInfo(r||i,n,this.config.maxBufferHole);Object(k.a)(n)&&A.b.log("media seeking to "+n.toFixed(3)),s===pe?(e=this.fragCurrent,0===o.len&&e&&(r=t.maxFragLookUpTolerance,t=e.start-r,r=e.start+e.duration+r,n<t||r<n?(e.loader&&(A.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=he):A.b.log("seeking outside of buffer but within currently loaded fragment range"))):"ENDED"===s&&(0===o.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=he),i&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=ce,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-i)},i}(function(s){var e;function t(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return(e=s.call.apply(s,[this,e].concat(i))||this).li=void 0,e.ui=null,e.di=null,e.fi=0,e.li=e.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)),e}i=s,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this.di},i.hasNextTick=function(){return!!this.ui},i.setInterval=function(e){return!this.di&&(this.di=self.setInterval(this.li,e),!0)},i.clearInterval=function(){return!!this.di&&(self.clearInterval(this.di),!(this.di=null))},i.clearNextTick=function(){return!!this.ui&&(self.clearTimeout(this.ui),!(this.ui=null))},i.tick=function(){this.fi++,1===this.fi&&(this.doTick(),1<this.fi&&(this.clearNextTick(),this.ui=self.setTimeout(this.li,0)),this.fi=0)},i.doTick=function(){},t}(o)));window.performance;var Ie,Te=function(t){var e;function i(e){return(e=t.call(this,e,f.a.MANIFEST_LOADED,f.a.LEVEL_LOADED,f.a.AUDIO_TRACK_SWITCHED,f.a.FRAG_LOADED,f.a.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,Ie=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}r=t,(e=i).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=i.prototype;return r.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},r.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},r.startLoad=function(){var e=this.pi;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},r.stopLoad=function(){this.canload=!1},r.onManifestLoaded=function(e){var t,i=[],r=[],s={},n=null,o=!1,a=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,a=a||!!e.audioCodec,Ie&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(n=s[e.bitrate])?n.url.push(e.url):(e.url=[e.url],e.urlId=0,s[e.bitrate]=e,i.push(e)),t&&(t.AUDIO&&(a=!0,ie(n||e,"audio",t.AUDIO)),t.SUBTITLES&&ie(n||e,"text",t.SUBTITLES))}),i=(i=o&&a?i.filter(function(e){return!!e.videoCodec}):i).filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||P(t,"audio"))&&(!e||P(e,"video"))}),e.audioTracks&&(r=e.audioTracks.filter(function(e){return!e.audioCodec||P(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),0<i.length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this.pi=i;for(var l=0;l<i.length;l++)if(i[l].bitrate===t){this.bi=l,A.b.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(f.a.MANIFEST_PARSED,{levels:i,audioTracks:r,firstLevel:this.bi,stats:e.stats,audio:a,video:o,altAudio:r.some(function(e){return!!e.url})})}else this.hls.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},r.setLevelInternal=function(e){var t,i=this.pi,r=this.hls;0<=e&&e<i.length?(this.clearTimer(),this.currentLevelIndex!==e&&(A.b.log("switching to level "+e),(t=i[this.currentLevelIndex=e]).level=e,r.trigger(f.a.LEVEL_SWITCHING,t)),(i=(t=i[e]).details)&&!i.live||(i=t.urlId,r.trigger(f.a.LEVEL_LOADING,{url:t.url[i],level:e,id:i}))):r.trigger(f.a.ERROR,{type:d.b.OTHER_ERROR,details:d.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},r.onError=function(e){if(e.fatal)e.type===d.b.NETWORK_ERROR&&this.clearTimer();else{var t,i=!1,r=!1;switch(e.details){case d.a.FRAG_LOAD_ERROR:case d.a.FRAG_LOAD_TIMEOUT:case d.a.KEY_LOAD_ERROR:case d.a.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case d.a.LEVEL_LOAD_ERROR:case d.a.LEVEL_LOAD_TIMEOUT:t=e.context.level,i=!0;break;case d.a.REMUX_ALLOC_ERROR:t=e.level,i=!0}void 0!==t&&this.recoverLevel(e,t,i,r)}},r.recoverLevel=function(e,t,i,r){var s=this,n=this.hls.config,o=e.details,a=this.pi[t];if(a.loadError++,a.fragmentError=r,i){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return A.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);n=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},n),e.levelRetry=!0,this.levelRetryCount++,A.b.warn("level controller, "+o+", retry in "+n+" ms, current retry count is "+this.levelRetryCount)}(i||r)&&(1<(i=a.url.length)&&a.loadError<i?(a.urlId=(a.urlId+1)%i,a.details=void 0,A.b.warn("level controller, "+o+" for level "+t+": switching to redundant URL-id "+a.urlId)):-1===this.manualLevelIndex?(t=0===t?this.pi.length-1:t-1,A.b.warn("level controller, "+o+": switch to "+t),this.hls.nextAutoLevel=this.currentLevelIndex=t):r&&(A.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},r.onFragLoaded=function(e){e=e.frag;void 0===e||"main"!==e.type||void 0!==(e=this.pi[e.level])&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)},r.onLevelLoaded=function(e){var t,i,r=this,s=e.level,n=e.details;s===this.currentLevelIndex&&((i=this.pi[s]).fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live?(t=i.details,s=n,i=e.stats.trequest,n=1e3*(s.averagetargetduration||s.targetduration),e=n/2,t&&s.endSN===t.endSN&&(n=e),i&&(n=Math.max(e,n-(window.performance.now()-i))),n=Math.round(n),A.b.log("live playlist, reload in "+Math.round(n)+" ms"),this.timer=setTimeout(function(){return r.loadLevel()},n)):this.clearTimer())},r.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var r=-1,s=0;s<i.audioGroupIds.length;s++)if(i.audioGroupIds[s]===t){r=s;break}r!==i.urlId&&(i.urlId=r,this.startLoad())}},r.loadLevel=function(){var e,t,i;A.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload&&"object"==typeof(i=this.pi[this.currentLevelIndex])&&0<i.url.length&&(e=this.currentLevelIndex,t=i.urlId,i=i.url[t],A.b.log("Attempt loading level index "+e+" with URL-id "+t),this.hls.trigger(f.a.LEVEL_LOADING,{url:i,level:e,id:t}))},r=[{key:"levels",get:function(){return this.pi}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this.pi;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this.vi&&(this.vi=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this.bi},set:function(e){this.bi=e}},{key:"startLevel",get:function(){if(void 0!==this.vi)return this.vi;var e=this.hls.config.startLevel;return void 0!==e?e:this.bi},set:function(e){this.vi=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,r),i}(o),ke=i(4);var Ae=function(t){var e;function i(e){return(e=t.call(this,e,f.a.MEDIA_ATTACHED,f.a.MEDIA_DETACHING,f.a.FRAG_PARSING_METADATA,f.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}r=t,(e=i).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=i.prototype;return r.destroy=function(){o.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){!function(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return function(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}(i,this.media),i}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,i=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=this.hls.config.cnxRenderWindow.WebKitDataCue||his.hls.config.cnxRenderWindow.VTTCue||his.hls.config.cnxRenderWindow.TextTrackCue,s=0;s<i.length;s++){var n=ke.a.getID3Frames(i[s].data);if(n){var o=i[s].pts,a=s<i.length-1?i[s+1].pts:t.endPTS;o===a?a+=1e-4:a<o&&(A.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),a=o+.25);for(var l=0;l<n.length;l++){var d,c=n[l];ke.a.isTimeStampFrame(c)||((d=new r(o,a,"")).value=c,this.id3Track.addCue(d))}}}},r.onLiveBackBufferReached=function(e){var e=e.bufferEnd,t=this.id3Track;if(t&&t.cues&&t.cues.length){var i=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var i=0,r=e.length-1;i<=r;){var s=Math.floor((r+i)/2);if(t<e[s].endTime)r=s-1;else{if(!(t>e[s].endTime))return e[s];i=s+1}}return e[i].endTime-t<t-e[r].endTime?e[i]:e[r]}(t.cues,e);if(i)for(;t.cues[0]!==i;)t.removeCue(t.cues[0])}},i}(o),Oe=((W=xe.prototype).sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},W.getTotalWeight=function(){return this.totalWeight_},W.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},xe),Ce=((_e=we.prototype).sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},_e.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},_e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},_e.destroy=function(){},we);function we(e,t,i,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Oe(t),this.fast_=new Oe(i)}function xe(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var Ee=window.performance,Le=function(i){var e;function t(e){var t;return(t=i.call(this,e,f.a.FRAG_LOADING,f.a.FRAG_LOADED,f.a.FRAG_BUFFERED,f.a.ERROR)||this).lastLoadedFragLevel=0,t.mi=-1,t.hls=e,t.timer=null,t.bwEstimator=null,t.onCheck=t.gi.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)),t}r=i,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.destroy=function(){this.clearTimer(),o.prototype.destroy.call(this)},r.onFragLoading=function(e){var t,i,r=e.frag;"main"!==r.type||(this.timer||(this.fragCurrent=r,this.timer=setInterval(this.onCheck,100)),this.bwEstimator)||(e=(i=this.hls).config,r=r.level,r=i.levels[r].details.live?(t=e.abrEwmaFastLive,e.abrEwmaSlowLive):(t=e.abrEwmaFastVoD,e.abrEwmaSlowVoD),this.bwEstimator=new Ce(i,r,t,e.abrEwmaDefaultEstimate))},r.gi=function(){var e=this.hls,t=e.media,i=this.fragCurrent;if(i){var r=i.loader,s=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return A.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this.mi=-1);var n=r.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&i.autoLevel&&i.level){var o=Ee.now()-n.trequest,a=Math.abs(t.playbackRate);if(o>500*i.duration/a){var l=e.levels,d=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/o),c=l[i.level],h=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,c=n.total||Math.max(n.loaded,Math.round(i.duration*h/8)),h=t.currentTime,c=(c-n.loaded)/d,u=(H.bufferInfo(t,h,e.config.maxBufferHole).end-h)/a;if(u<2*i.duration/a&&u<c){for(var p=i.level-1;s<p;p--){var g=l[p].realBitrate?Math.max(l[p].realBitrate,l[p].bitrate):l[p].bitrate;if(i.duration*g/(6.4*d)<u)break}void 0<c&&(A.b.warn("loading too slow, abort fragment loading and switch to level "+p+":fragLoadedDelay["+p+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+c.toFixed(1)+":"+u.toFixed(1)),e.nextLoadLevel=p,this.bwEstimator.sample(o,n.loaded),r.abort(),this.clearTimer(),e.trigger(f.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:n}))}}}}},r.onFragLoaded=function(e){var t,i,r=e.frag;"main"===r.type&&Object(k.a)(r.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=r.level,this.mi=-1,this.hls.config.abrMaxWithRealBitrate&&(r=((t=this.hls.levels[r.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,i=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:r,duration:i},t.realBitrate=Math.round(8*r/i)),e.frag.bitrateTest&&((i=e.stats).tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)))},r.onFragBuffered=function(e){var t=e.stats,i=e.frag;!0===t.aborted||"main"!==i.type||!Object(k.a)(i.sn)||i.bitrateTest&&t.tload!==t.tbuffered||(e=t.tparsed-t.trequest,A.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(e,t.loaded),t.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)},r.onError=function(e){switch(e.details){case d.a.FRAG_LOAD_ERROR:case d.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.clearTimer=function(){clearInterval(this.timer),this.timer=null},r.yi=function(e,t,i,r,s,n,o,a,l){for(var d=s;r<=d;d--){var c=l[d];if(c){var h=c.details,u=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=d<=e?o*i:a*i,c=l[d].realBitrate?Math.max(l[d].realBitrate,l[d].bitrate):l[d].bitrate,h=c*u/g;if(A.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+d+"/"+Math.round(g)+"/"+c+"/"+u+"/"+n+"/"+h),c<g&&(!h||p&&!this.bitrateTestDelay||h<n))return d}}return-1},r=[{key:"nextAutoLevel",get:function(){var e=this.mi,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this.nextABRAutoLevel;return t=-1!==e?Math.min(e,t):t},set:function(e){this.mi=e}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,i=e.levels,r=e.config,s=e.minAutoLevel,n=e.media,o=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,d=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(H.bufferInfo(n,l,r.maxBufferHole).end-l)/d,u=this.yi(o,a,c,s,t,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,i);if(0<=u)return u;A.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");e=a?Math.min(a,r.maxStarvationDelay):r.maxStarvationDelay,n=r.abrBandWidthFactor,l=r.abrBandWidthUpFactor;return 0!=h||(d=this.bitrateTestDelay)&&(e=(a?Math.min(a,r.maxLoadingDelay):r.maxLoadingDelay)-d,A.b.trace("bitrate test took "+Math.round(1e3*d)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),n=l=1),u=this.yi(o,a,c,s,t,h+e,n,l,i),Math.max(u,0)}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,r),t}(o),Re=J(),Me=function(t){var e;function i(e){var o;return(o=t.call(this,e,f.a.MEDIA_ATTACHING,f.a.MEDIA_DETACHING,f.a.MANIFEST_PARSED,f.a.BUFFER_RESET,f.a.BUFFER_APPENDING,f.a.BUFFER_CODECS,f.a.BUFFER_EOS,f.a.BUFFER_FLUSHING,f.a.LEVEL_PTS_UPDATED,f.a.LEVEL_UPDATED)||this).wi=null,o.xi=null,o.ki=10,o.Si=null,o.Oi=null,o._i=!1,o.ji=!1,o.config=void 0,o.audioTimestampOffset=void 0,o.bufferCodecEventsExpected=0,o.Ai=0,o.media=null,o.mediaSource=null,o.segments=[],o.parent=void 0,o.appending=!1,o.appended=0,o.appendError=0,o.flushBufferCounter=0,o.tracks={},o.pendingTracks={},o.sourceBuffer={},o.flushRange=[],o.Ii=function(){A.b.log("media source opened"),o.hls.trigger(f.a.MEDIA_ATTACHED,{media:o.media});var e=o.mediaSource;e&&e.removeEventListener("sourceopen",o.Ii),o.checkPendingTracks()},o.Ti=function(){A.b.log("media source closed")},o.Ci=function(){A.b.log("media source ended")},o.Pi=function(){o.audioTimestampOffset&&o.sourceBuffer.audio&&(t=o.sourceBuffer.audio,A.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+o.audioTimestampOffset),t.timestampOffset=o.audioTimestampOffset,delete o.audioTimestampOffset),o._i&&o.doFlush(),o.ji&&o.checkEos(),o.appending=!1;var e,i=o.parent,t=o.segments.reduce(function(e,t){return t.parent===i?e+1:e},0),r={},s=o.sourceBuffer;for(e in s){var n=s[e];if(!n)throw Error("handling source buffer update end error: source buffer for "+e+" uninitilized and unable to update buffered TimeRanges.");r[e]=n.buffered}o.hls.trigger(f.a.BUFFER_APPENDED,{parent:i,pending:t,timeRanges:r}),o._i||o.doAppending(),o.updateMediaElementDuration(),0===t&&o.flushLiveBackBuffer()},o.Mi=function(e){A.b.error("sourceBuffer error:",e),o.hls.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_APPENDING_ERROR,fatal:!1})},o.config=e.config,o}r=t,(e=i).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=i.prototype;return r.destroy=function(){o.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,i=this.tracks.audio;if("audio"===t&&i&&"audio/mpeg"===i.container){t=this.sourceBuffer.audio;if(!t)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(.1<Math.abs(t.timestampOffset-e.start)){i=t.updating;try{t.abort()}catch(e){A.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(A.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.start),t.timestampOffset=e.start)}}},r.onManifestParsed=function(e){this.bufferCodecEventsExpected=this.Ai=e.altAudio?2:1,A.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;t&&Re&&((e=this.mediaSource=new Re).addEventListener("sourceopen",this.Ii),e.addEventListener("sourceended",this.Ci),e.addEventListener("sourceclose",this.Ti),t.src=window.URL.createObjectURL(e),this.Oi=t.src)},r.onMediaDetaching=function(){A.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){A.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.Ii),e.removeEventListener("sourceended",this.Ci),e.removeEventListener("sourceclose",this.Ti),this.media&&(this.Oi&&this.hls.config.cnxRenderWindow.URL.revokeObjectURL(this.Oi),this.media.src===this.Oi?(this.media.removeAttribute("src"),this.media.load()):A.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this.Oi=null,this.bufferCodecEventsExpected=this.Ai,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(f.a.MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,i=Object.keys(t).length;(i&&!e||2===i)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e,t=this.sourceBuffer;for(e in t){var i=t[e];try{i&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.Pi),i.removeEventListener("error",this.Mi))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(t){var i=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){i.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t,i=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!i[t]){var s=e[t];if(!s)throw Error("source buffer exists for track "+t+", however track does not");var n=s.levelCodec||s.codec,o=s.container+";codecs="+n;A.b.log("creating sourceBuffer("+o+")");try{var a=i[t]=r.addSourceBuffer(o);a.addEventListener("updateend",this.Pi),a.addEventListener("error",this.Mi),this.tracks[t]={buffer:a,codec:n,id:s.id,container:s.container,levelCodec:s.levelCodec}}catch(e){A.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(f.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(f.a.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._i||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer){var i;e.type&&e.type!==t||(i=this.sourceBuffer[t])&&!i.ended&&(i.ended=!0,A.b.log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var i in e){i=e[i];if(i){if(!i.ended)return;if(i.updating)return void(this.ji=!0)}}A.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){A.b.warn("exception while calling mediaSource.endOfStream()")}this.ji=!1}else this.ji=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this.Si){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,i=this.sourceBuffer,r=Object.keys(i),s=t-Math.max(e,this.ki),n=r.length-1;0<=n;n--){var o,a=r[n],l=i[a];!l||0<(o=l.buffered).length&&s>o.start(0)&&this.removeBufferRange(a,l,0,s)&&this.hls.trigger(f.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:s})}else A.b.error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){e=e.details;0<e.fragments.length&&(this.xi=e.totalduration+e.fragments[0].start,this.ki=e.averagetargetduration||e.targetduration||10,this.Si=e.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this.xi&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer){i=this.sourceBuffer[i];if(i&&!0===i.updating)return}e=this.media.duration,null===this.wi&&(this.wi=this.mediaSource.duration),!0===this.Si&&!0===t.liveDurationInfinity?(A.b.log("Media Source duration is set to Infinity"),this.wi=this.mediaSource.duration=1/0):(this.xi>this.wi&&this.xi>e||!Object(k.a)(e))&&(A.b.log("Updating Media Source duration to "+this.xi.toFixed(3)),this.wi=this.mediaSource.duration=this.xi)}},r.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._i=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._i=!1;var t=0,i=this.sourceBuffer;try{for(var r in i){var s=i[r];s&&(t+=s.buffered.length)}}catch(e){A.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(f.a.BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,i=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void A.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var s=i.shift();if(s)try{var n=r[s.type];n?n.updating?i.unshift(s):(n.ended=!1,this.parent=s.parent,n.appendBuffer(s.data),this.appendError=0,this.appended++,this.appending=!0):this.Pi()}catch(r){A.b.error("error while trying to append buffer:"+r.message),i.unshift(s);s={type:d.b.MEDIA_ERROR,parent:s.parent,details:"",fatal:!1};22===r.code?(this.segments=[],s.details=d.a.BUFFER_FULL_ERROR):(this.appendError++,s.details=d.a.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(A.b.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],s.fatal=!0)),t.trigger(f.a.ERROR,s)}}}},r.flushBuffer=function(e,t,i){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var s="null";if(this.media&&(s=this.media.currentTime.toFixed(3)),A.b.log("flushBuffer,pos/start/end: "+s+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return A.b.warn("abort flushing too many retries"),!0;r=r[i];if(r){if(r.ended=!1,r.updating)return A.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(i,r,e,t))return this.flushBufferCounter++,!1}return A.b.log("buffer flushed"),!0},r.removeBufferRange=function(e,t,i,r){try{for(var s=0;s<t.buffered.length;s++){var n=t.buffered.start(s),o=t.buffered.end(s),a=Math.max(n,i),l=Math.min(o,r);if(.5<Math.min(l,o)-a){var d="null";return this.media&&(d=this.media.currentTime.toString()),A.b.log("sb remove "+e+" ["+a+","+l+"], of ["+n+","+o+"], pos:"+d),t.remove(a,l),!0}}}catch(e){A.b.warn("removeBufferRange failed",e)}return!1},i}(o);function Be(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var je=function(t){function s(e){return(e=t.call(this,e,f.a.FPS_DROP_LEVEL_CAPPING,f.a.MEDIA_ATTACHING,f.a.MANIFEST_PARSED,f.a.BUFFER_CODECS,f.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}e=t,(i=s).prototype=Object.create(e.prototype),(i.prototype.constructor=i).__proto__=e;var e,i=s.prototype;return i.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},i.onFpsDropLevelCapping=function(e){s.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},i.onMediaAttaching=function(e){this.media=e.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?e.media:null},i.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},i.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},i.onLevelsUpdated=function(e){this.levels=e.levels},i.onMediaDetaching=function(){this.stopCapping()},i.detectPlayerSize=function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)},i.getMaxLevel=function(i){var r=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return s.isLevelAllowed(t,r.restrictedLevels)&&t<=i});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},i.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.isLevelAllowed=function(e,t){return-1===(t=void 0===t?[]:t).indexOf(e)},s.getMaxLevelByMediaSize=function(e,t,i){if(!e||!e.length)return-1;for(var r,s=e.length-1,n=0;n<e.length;n+=1){var o=e[n];if((o.width>=t||o.height>=i)&&(!(r=e[n+1])||o.width!==r.width||o.height!==r.height)){s=n;break}}return s},e=[{key:"contentScaleFactor",get:function(){return 1}}],Be((i=s).prototype,[{key:"mediaWidth",get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=s.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=s.contentScaleFactor),e}}]),Be(i,e),s}(o),De=window.performance,W=function(t){var e;function i(e){return t.call(this,e,f.a.MEDIA_ATTACHING)||this}r=t,(e=i).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=i.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},r.checkFPS=function(e,t,i){var r,s,n,o,a=De.now();t&&(this.lastTime&&(n=a-this.lastTime,r=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*r/n,(n=this.hls).trigger(f.a.FPS_DROP,{currentDropped:r,currentDecoded:o,totalDroppedFrames:i}),0<s&&r>n.config.fpsDroppedMonitoringThreshold*o&&(o=n.currentLevel,A.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o&&(-1===n.autoLevelCapping||n.autoLevelCapping>=o)&&(n.trigger(f.a.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:n.currentLevel}),n.autoLevelCapping=o,n.streamController.nextLevelSwitch()))),this.lastTime=a,this.lastDroppedFrames=i,this.lastDecodedFrames=t)},r.checkFPSInterval=function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},i}(o),_e=window,Fe=_e.performance,Ne=_e.XMLHttpRequest,_e=((_e=Ue.prototype).destroy=function(){this.abort(),this.loader=null},_e.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},_e.load=function(e,t,i){this.context=e,this.config=t,this.callbacks=i,this.stats={trequest:Fe.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},_e.loadInternal=function(){var e=this.context,t=this.loader=new Ne,i=this.stats;i.tfirst=0,i.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(i){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},_e.readystatechange=function(e){var t,i=e.currentTarget,r=i.readyState,s=this.stats,n=this.context,o=this.config;!s.aborted&&2<=r&&(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(Fe.now(),s.trequest)),4===r?200<=(e=i.status)&&e<300?(s.tload=Math.max(s.tfirst,Fe.now()),r="arraybuffer"===n.responseType?(t=i.response).byteLength:(t=i.responseText).length,s.loaded=s.total=r,t={url:i.responseURL,data:t},this.callbacks.onSuccess(t,s,n,i)):s.retry>=o.maxRetry||400<=e&&e<499?(A.b.error(e+" while loading "+n.url),this.callbacks.onError({code:e,text:i.statusText},n,i)):(A.b.warn(e+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),s.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))},_e.loadtimeout=function(){A.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},_e.loadprogress=function(e){var t=e.currentTarget,i=this.stats;i.loaded=e.loaded,e.lengthComputable&&(i.total=e.total);e=this.callbacks.onProgress;e&&e(i,this.context,null,t)},Ue);function Ue(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}i(6),(Ve=Ve=Ve||{}).WIDEVINE="com.widevine.alpha",Ve.PLAYREADY="com.microsoft.playready";var Ve,Ve=void 0!==(Ve=window.cnxRenderWindow)&&Ve.navigator&&Ve.navigator.requestMediaKeySystemAccess?Ve.navigator.requestMediaKeySystemAccess.bind(Ve.navigator):null;var qe=function(r){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},t=Object.keys(s);(t="function"==typeof Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})):t).forEach(function(e){var t,i;t=r,e=s[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e})}return r}({cnxRenderWindow:window,autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:_e,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Le,bufferController:Me,capLevelController:je,fpsController:W,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Ve},{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t,i){return t&&We(e.prototype,t),i&&We(e,i),e}i.d(t,"default",function(){return $e});var $e=function(g){var e;function m(e){var t;void 0===e&&(e={}),(t=g.call(this)||this).config=void 0,t.Ei=void 0,t.abrController=void 0,t.capLevelController=void 0,t.levelController=void 0,t.streamController=void 0,t.networkControllers=void 0,t.audioTrackController=void 0,t.subtitleTrackController=void 0,t.emeController=void 0,t.coreComponents=void 0,t.media=null,t.url=null;var i=m.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");t.config=function(r){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},t=Object.keys(s);(t="function"==typeof Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})):t).forEach(function(e){var t,i;t=r,e=s[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e})}return r}({},i,e),window.cnxRenderWindow=t.config.cnxRenderWindow;var r=He(t).config;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(A.a)(r.debug),t.Ei=-1;var s=t.abrController=new r.abrController(He(t)),n=new r.bufferController(He(t)),o=t.capLevelController=new r.capLevelController(He(t)),a=new r.fpsController(He(t)),l=new j(He(t)),d=new D(He(t)),c=new _(He(t)),h=new Ae(He(t)),u=t.levelController=new Te(He(t)),i=new V(He(t)),e=[u,t.streamController=new Se(He(t),i)],u=r.audioStreamController;u&&e.push(new u(He(t),i)),t.networkControllers=e;var p,a=[l,d,c,s,n,o,a,h,i];return(u=r.audioTrackController)&&(h=new u(He(t)),t.audioTrackController=h,a.push(h)),(u=r.subtitleTrackController)&&(p=new u(He(t)),t.subtitleTrackController=p,e.push(p)),(u=r.emeController)&&(p=new u(He(t)),t.emeController=p,a.push(p)),(u=r.subtitleStreamController)&&e.push(new u(He(t),i)),(u=r.timelineController)&&a.push(new u(He(t))),t.coreComponents=a,t}t=g,(e=m).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,m.isSupported=function(){var e=J();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!e&&!!t},Ge(m,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return f.a}},{key:"ErrorTypes",get:function(){return d.b}},{key:"ErrorDetails",get:function(){return d.a}},{key:"DefaultConfig",get:function(){return m.defaultConfig||qe},set:function(e){m.defaultConfig=e}}]);var t=m.prototype;return t.destroy=function(){A.b.log("destroy"),this.trigger(f.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this.Ei=-1},t.attachMedia=function(e){A.b.log("attachMedia"),this.media=e,this.trigger(f.a.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){A.b.log("detachMedia"),this.trigger(f.a.MEDIA_DETACHING),this.media=null},t.loadSource=function(e){e=r.buildAbsoluteURL(this.config.cnxRenderWindow.location.href,e,{alwaysNormalize:!0}),A.b.log("loadSource:"+e),this.url=e,this.trigger(f.a.MANIFEST_LOADING,{url:e})},t.startLoad=function(t){void 0===t&&(t=-1),A.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.stopLoad=function(){A.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){A.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){A.b.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},Ge(m,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){A.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){A.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){A.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){A.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){A.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this.Ei},set:function(e){A.b.log("set autoLevelCapping:"+e),this.Ei=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,i=e?e.length:0,r=0;r<i;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),m}(X);$e.defaultConfig=void 0}],n={},s.m=r,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"_",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t._)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(e){var t=e&&e._?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=13).default))},function(e,t,i){"use strict";i.d(t,"c",function(){return r}),i.d(t,"d",function(){return s}),i.d(t,"b",function(){return n}),i.d(t,"a",function(){return o});const r={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged"},s={OmidViewabilityThreshold:"OmidViewabilityThreshold"},n=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),r),s),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var o;(t=o=o||{}).SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError"},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"e",function(){return o}),i.d(t,"c",function(){return a}),i.d(t,"a",function(){return l}),i.d(t,"d",function(){return c});var r=i(1);const s=".cdn.ampproject.org";function n(e,t){t=t||location.search,e=e.replace(/\[/,"\\[").replace(/]/,"\\]");t=new RegExp(`[\\?&]${e}=([^&#]*)`,"i").exec(t);return null===t?null:decodeURIComponent(t[1])}function o(e,t,i){var r=new RegExp(`([?&])${t}=.*?(&|$)`,"i"),s=-1!==e.indexOf("?")?"&":"?";return e.match(r)?i?e.replace(r,`$1${t}=${i}$2`):e.replace(r,"$1"):`${e}${s}${t}=${i}`}function a(e){return-1<e.indexOf("?")?"&":"?"}function l(e){if(Object(r.h)(e))return-1<e.indexOf("://")?e.split("/")[2]:e.split("/")[0]}function d(e,t){return`${"http"+(/(\/s\/)+/.test(e.replace(t,""))?"s":"")}://${t}`}function c(e,t=!0){return e=-1===(i=e=function(e){var t=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(e);if(null===t)return e;t=e.replace(t[0],"");return d(e,t)}(e=function(e){if(-1<e.indexOf(s)){e=e.replace("https://","");const t=/^[^\/]+(\/[a-z]+\/)+s*\/*/,i=t.test(e)?e.replace(t.exec(e)[0],""):e;return d(e,i)}return e}(e))).indexOf(s)||-1<(i=(i=(i=(i=(i=(i=(i=i.replace(s,"")).replace("www-","www.")).replace("amp-","amp.")).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace("www.","amp.")).indexOf("amp.")?i:(i=i.replace("http://","http://amp.")).replace("https://","https://amp."),e=t?function(e){if(-1===e.indexOf("#origin-")&&-1===e.indexOf("viewerUrl-"))return e;var t=e.split("#origin-")[1].split("viewerUrl-");return c(e=decodeURIComponent(t[1]),!1)}(e):e;var i}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(6);class r{constructor(){this.Li={}}subscribe(e,t,i){this.Li[e]||(this.Li[e]=[]),this.Li[e].push({context:t,func:i})}unsubscribe(e,t,i){this.Li[e]&&(this.Li[e]=this.Li[e].filter(e=>!(e.context===t&&(e.func===i||!i))))}unsubscribeAll(t){Object.keys(this.Li).forEach(e=>{this.Li[e]=this.Li[e].filter(e=>e.context!==t)})}publish(t,e,i={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Li,e)&&this.Li[e].forEach(e=>{e.context===t&&e.func(i)})}relay(e,i,r,s){Object(n.m)(e).forEach(t=>{this.subscribe(t,i,e=>{s.publish(r,t,e)})})}relayBulk(e,t,i){e.forEach(e=>{this.relay(e.channel,e.source,t,i)})}}},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return s});const r=JSON.parse('{"version":117946,"domainPrefix":"","logToConsole":true,"logToServer":true,"env":"production"}'),s=!0},function(e,t,i){"use strict";var r,s,n,o;i.d(t,"a",function(){return r}),i.d(t,"b",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return o}),(t=r=r||{})[t.X=0]="X",t[t.Y=1]="Y",(t=s=s||{}).Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend",(t=n=n||{})[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold",(t=o=o||{})[t.Left=0]="Left",t[t.Right=1]="Right"},function(e,t,i){"use strict";var r;i.d(t,"c",function(){return r}),i.d(t,"b",function(){return s}),i.d(t,"a",function(){return n}),(t=r=r||{}).SessionRendered="rendered",t.SessionView="enter_view";const s={UserInteraction:"userInteraction",GeneralUserInteraction:"generalUserInteraction",CanStart:"canStart",Destroy:"destroy"},n={StateChanged:"stateChanged"}},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r});var r,i=i(0);const s=[i.ProtoDeviceType.Smartphone,i.ProtoDeviceType.Tablet];(i=r=r||{}).Ios="ios",i.Android="android",i.Mac="macos",i.Windows="windows",i.Linux="linux"},function(e,t,i){"use strict";var r;i.d(t,"a",function(){return r}),(t=r=r||{})[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"},function(e,t,i){"use strict";var r,s,n;i.d(t,"a",function(){return r}),i.d(t,"d",function(){return s}),i.d(t,"b",function(){return o}),i.d(t,"c",function(){return n}),(t=r=r||{}).Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie",(t=s=s||{}).Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o";const o=[{name:s.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:s.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:s.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:s.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:s.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];(t=n=n||{}).Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r,p=i(5),g=i(0),m=i(7),f=i(1),y=i(17);function b(e,t){const r=function({requestUrl:e,requestType:t="POST",contentType:i="",responseType:r="",withCredentials:s=!1}){const n=new XMLHttpRequest;return n.open(t,e,!0),0<i.length&&n.setRequestHeader("Content-Type",i),0<r.length&&(n.responseType=r),n.timeout=3e4,n.withCredentials=s,n}(e),s=new Date;return new Promise((e,i)=>{r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200===r.status)e(r.response);else{let e="";try{e=r.responseText}catch(e){}var t=(new Date).getTime()-s.getTime();i(new Error(`Request fail. status:${r.status}, readyState:${r.readyState}, response:${e}, time:${t}`))}},r.ontimeout=()=>{var e=(new Date).getTime()-s.getTime();i(new Error(`Request timeout status:${r.status}. time:${e}`))},r.send(t)})}function v(e,t,i){try{var r=Object(m.l)([95,5]);!r||t&&0!==Object.keys(t).length||Object(p.a)({message:"empty_proto_request",callStack:"empty_function_argument",exception:i,level:g.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});var s=e.fromObject(t);!r||s&&0!==Object.keys(s).length||Object(p.a)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:i,level:g.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});var n=e.encode(s).finish();return!r||n&&0!==Object.keys(n).length||Object(p.a)({message:"empty_proto_request",callStack:"empty_encode_result",exception:i,level:g.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1}),n}catch(e){throw Object(p.a)({throttle:10,sendMaxLog:!0,exception:i,level:g.ProtoLoggingLevelEnum.FATAL,callStack:JSON.stringify(t),message:"Protobuf_encode"}),Error()}}(i=r=r||{}).fetchXMLRequest=function(e,t=!0){const r=b({requestUrl:e,requestType:"GET",withCredentials:t});return new Promise((t,i)=>{r.then(e=>{t(e)}).catch(e=>{i(e)})})},i.sendProtoRequest=function({ProtoResponse:e,ProtoRequest:t,requestData:i,endpoint:r,requestType:s,withCredentials:n,queryParams:o,logError:a}){var l,d,c,h,u,i=i?v(t,i,r):null;return[e,o,s="POST",i,n]=[e,(h=r,u=o,Object(f.f)(u)&&Object.keys(u).forEach(e=>h=Object(y.e)(h,e,u[e])),r=h),s,i,n],l=e,d=b({requestUrl:o,requestType:s,withCredentials:n,contentType:"POST"===s?"multipart/form-data":"",responseType:"arraybuffer"},i),c=o,new Promise((i,r)=>{d.then(t=>{if(l){let e=null;try{const i=t?new Uint8Array(t):new Uint8Array;e=l.toObject(l.decode(i),{defaults:!0,arrays:!0,objects:!0})}catch(e){Object(p.a)({exception:`${c}__${e.message}`,message:"Protobuf_decode",callStack:e.stack,level:g.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0,throttle:100})}e&&e.errorMessage&&"500"===e.errorMessage&&r(e.errorMessage),i(e)}}).catch(e=>{r(e)})}).catch(e=>{throw a&&Object(m.l)([95,5])&&Object(p.a)({message:"Xhr_error",exception:r,callStack:`${e}`,level:g.ProtoLoggingLevelEnum.INFO}),new Error(e)})},i.sendProtoBeaconRequest=function({ProtoRequest:e,requestData:t,endpoint:i}){t=t?v(e,t,i):null;return navigator.sendBeacon(i,t)},i.trackPixel=function(e){try{(new Image).src=e}catch(e){Object(p.a)({message:"Xhr_trackPixel",exception:e.message,callStack:e.stack,level:g.ProtoLoggingLevelEnum.FATAL})}}},function(e,t,i){"use strict";i.d(t,"h",function(){return r}),i.d(t,"i",function(){return s}),i.d(t,"j",function(){return n}),i.d(t,"f",function(){return o}),i.d(t,"b",function(){return a}),i.d(t,"a",function(){return l}),i.d(t,"g",function(){return d}),i.d(t,"e",function(){return c}),i.d(t,"c",function(){return h}),i.d(t,"d",function(){return u});const r=200,s=.9,n=1.1,o=31,a=2e3,l=1e3,d=.5,c="connatix.com",h=2,u=41},function(e,t,i){"use strict";var r,s=i(59),o=s.Reader,n=s.Writer,a=s.util,l=s.roots.default||(s.roots.default={});function d(e){if(this.types=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function c(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function h(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function p(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function g(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function m(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function f(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function y(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function b(e){if(this.filters=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function v(e){if(this.items=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function P(e){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function S(e){if(this.adBreakTargeting=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function I(e){if(this.adSlotPositions=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function T(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function k(e){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function A(e){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.playlist=[],this.adBreaks=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function O(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function C(e){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}l.ProtoElementsRequest=(C.prototype.tokens=a.emptyArray,C.prototype.pageUrl="",C.prototype.userId="",C.prototype.forceLineItemId="",C.prototype.forcePlayerId="",C.prototype.forceMediaId="",C.prototype.forcePlaylistId="",C.prototype.version=0,C.prototype.clientAb0=0,C.prototype.clientAb1=0,C.prototype.customParam1="",C.prototype.customParam2="",C.prototype.customParam3="",C.prototype.forceExploration=!1,C.prototype.es6=!1,C.prototype.bundleId="",C.prototype.forceSourceItemId="",C.prototype.parseDomain=!1,C.prototype.implementationType=0,C.prototype.queryJsTargeting=a.emptyObject,C.prototype.isConsentConnatix=!0,C.prototype.reloadedPlayers=a.emptyObject,C.prototype.disableTracking=!1,C.prototype.referrer="",C.prototype.localTimestamp=a.Long?a.Long.fromBits(0,0,!1):0,C.prototype.customParam4="",C.prototype.customParam5="",C.encode=function(e,t){if(t=t||n.create(),null!=e.tokens&&e.tokens.length)for(var i=0;i<e.tokens.length;++i)t.uint32(10).string(e.tokens[i]);if(null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&t.uint32(26).string(e.pageUrl),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(42).string(e.userId),null!=e.forceLineItemId&&e.hasOwnProperty("forceLineItemId")&&t.uint32(50).string(e.forceLineItemId),null!=e.forcePlayerId&&e.hasOwnProperty("forcePlayerId")&&t.uint32(58).string(e.forcePlayerId),null!=e.forceMediaId&&e.hasOwnProperty("forceMediaId")&&t.uint32(66).string(e.forceMediaId),null!=e.forcePlaylistId&&e.hasOwnProperty("forcePlaylistId")&&t.uint32(74).string(e.forcePlaylistId),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(80).int32(e.version),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&t.uint32(96).int32(e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&t.uint32(104).int32(e.clientAb1),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&t.uint32(130).string(e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&t.uint32(138).string(e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&t.uint32(146).string(e.customParam3),null!=e.forceExploration&&e.hasOwnProperty("forceExploration")&&t.uint32(160).bool(e.forceExploration),null!=e.es6&&e.hasOwnProperty("es6")&&t.uint32(168).bool(e.es6),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&t.uint32(178).string(e.bundleId),null!=e.forceSourceItemId&&e.hasOwnProperty("forceSourceItemId")&&t.uint32(186).string(e.forceSourceItemId),null!=e.parseDomain&&e.hasOwnProperty("parseDomain")&&t.uint32(192).bool(e.parseDomain),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&t.uint32(200).int32(e.implementationType),null!=e.queryJsTargeting&&e.hasOwnProperty("queryJsTargeting"))for(var r=Object.keys(e.queryJsTargeting),i=0;i<r.length;++i)t.uint32(210).fork().uint32(10).string(r[i]).uint32(18).string(e.queryJsTargeting[r[i]]).ldelim();if(null!=e.isConsentConnatix&&e.hasOwnProperty("isConsentConnatix")&&t.uint32(216).bool(e.isConsentConnatix),null!=e.reloadedPlayers&&e.hasOwnProperty("reloadedPlayers"))for(r=Object.keys(e.reloadedPlayers),i=0;i<r.length;++i)t.uint32(234).fork().uint32(10).string(r[i]).uint32(18).string(e.reloadedPlayers[r[i]]).ldelim();return null!=e.disableTracking&&e.hasOwnProperty("disableTracking")&&t.uint32(248).bool(e.disableTracking),null!=e.referrer&&e.hasOwnProperty("referrer")&&t.uint32(258).string(e.referrer),null!=e.localTimestamp&&e.hasOwnProperty("localTimestamp")&&t.uint32(264).int64(e.localTimestamp),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&t.uint32(274).string(e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&t.uint32(282).string(e.customParam5),t},C.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i,r=void 0===t?e.len:e.pos+t,s=new l.ProtoElementsRequest;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:s.tokens&&s.tokens.length||(s.tokens=[]),s.tokens.push(e.string());break;case 3:s.pageUrl=e.string();break;case 5:s.userId=e.string();break;case 6:s.forceLineItemId=e.string();break;case 7:s.forcePlayerId=e.string();break;case 8:s.forceMediaId=e.string();break;case 9:s.forcePlaylistId=e.string();break;case 10:s.version=e.int32();break;case 12:s.clientAb0=e.int32();break;case 13:s.clientAb1=e.int32();break;case 16:s.customParam1=e.string();break;case 17:s.customParam2=e.string();break;case 18:s.customParam3=e.string();break;case 20:s.forceExploration=e.bool();break;case 21:s.es6=e.bool();break;case 22:s.bundleId=e.string();break;case 23:s.forceSourceItemId=e.string();break;case 24:s.parseDomain=e.bool();break;case 25:s.implementationType=e.int32();break;case 26:e.skip().pos++,s.queryJsTargeting===a.emptyObject&&(s.queryJsTargeting={}),i=e.string(),e.pos++,s.queryJsTargeting[i]=e.string();break;case 27:s.isConsentConnatix=e.bool();break;case 29:e.skip().pos++,s.reloadedPlayers===a.emptyObject&&(s.reloadedPlayers={}),i=e.string(),e.pos++,s.reloadedPlayers[i]=e.string();break;case 31:s.disableTracking=e.bool();break;case 32:s.referrer=e.string();break;case 33:s.localTimestamp=e.int64();break;case 34:s.customParam4=e.string();break;case 35:s.customParam5=e.string();break;default:e.skipType(7&n)}}return s},C.fromObject=function(e){if(e instanceof l.ProtoElementsRequest)return e;var t=new l.ProtoElementsRequest;if(e.tokens){if(!Array.isArray(e.tokens))throw TypeError(".ProtoElementsRequest.tokens: array expected");t.tokens=[];for(var i=0;i<e.tokens.length;++i)t.tokens[i]=String(e.tokens[i])}switch(null!=e.pageUrl&&(t.pageUrl=String(e.pageUrl)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.forceLineItemId&&(t.forceLineItemId=String(e.forceLineItemId)),null!=e.forcePlayerId&&(t.forcePlayerId=String(e.forcePlayerId)),null!=e.forceMediaId&&(t.forceMediaId=String(e.forceMediaId)),null!=e.forcePlaylistId&&(t.forcePlaylistId=String(e.forcePlaylistId)),null!=e.version&&(t.version=0|e.version),null!=e.clientAb0&&(t.clientAb0=0|e.clientAb0),null!=e.clientAb1&&(t.clientAb1=0|e.clientAb1),null!=e.customParam1&&(t.customParam1=String(e.customParam1)),null!=e.customParam2&&(t.customParam2=String(e.customParam2)),null!=e.customParam3&&(t.customParam3=String(e.customParam3)),null!=e.forceExploration&&(t.forceExploration=Boolean(e.forceExploration)),null!=e.es6&&(t.es6=Boolean(e.es6)),null!=e.bundleId&&(t.bundleId=String(e.bundleId)),null!=e.forceSourceItemId&&(t.forceSourceItemId=String(e.forceSourceItemId)),null!=e.parseDomain&&(t.parseDomain=Boolean(e.parseDomain)),e.implementationType){case"Web":case 0:t.implementationType=0;break;case"Amp":case 1:t.implementationType=1}if(e.queryJsTargeting){if("object"!=typeof e.queryJsTargeting)throw TypeError(".ProtoElementsRequest.queryJsTargeting: object expected");t.queryJsTargeting={};for(var r=Object.keys(e.queryJsTargeting),i=0;i<r.length;++i)t.queryJsTargeting[r[i]]=String(e.queryJsTargeting[r[i]])}if(null!=e.isConsentConnatix&&(t.isConsentConnatix=Boolean(e.isConsentConnatix)),e.reloadedPlayers){if("object"!=typeof e.reloadedPlayers)throw TypeError(".ProtoElementsRequest.reloadedPlayers: object expected");for(t.reloadedPlayers={},r=Object.keys(e.reloadedPlayers),i=0;i<r.length;++i)t.reloadedPlayers[r[i]]=String(e.reloadedPlayers[r[i]])}return null!=e.disableTracking&&(t.disableTracking=Boolean(e.disableTracking)),null!=e.referrer&&(t.referrer=String(e.referrer)),null!=e.localTimestamp&&(a.Long?(t.localTimestamp=a.Long.fromValue(e.localTimestamp)).unsigned=!1:"string"==typeof e.localTimestamp?t.localTimestamp=parseInt(e.localTimestamp,10):"number"==typeof e.localTimestamp?t.localTimestamp=e.localTimestamp:"object"==typeof e.localTimestamp&&(t.localTimestamp=new a.LongBits(e.localTimestamp.low>>>0,e.localTimestamp.high>>>0).toNumber())),null!=e.customParam4&&(t.customParam4=String(e.customParam4)),null!=e.customParam5&&(t.customParam5=String(e.customParam5)),t},C.toObject=function(e,t){var i,r,s={};if(((t=t||{}).arrays||t.defaults)&&(s.tokens=[]),(t.objects||t.defaults)&&(s.queryJsTargeting={},s.reloadedPlayers={}),t.defaults&&(s.pageUrl="",s.userId="",s.forceLineItemId="",s.forcePlayerId="",s.forceMediaId="",s.forcePlaylistId="",s.version=0,s.clientAb0=0,s.clientAb1=0,s.customParam1="",s.customParam2="",s.customParam3="",s.forceExploration=!1,s.es6=!1,s.bundleId="",s.forceSourceItemId="",s.parseDomain=!1,s.implementationType=t.enums===String?"Web":0,s.isConsentConnatix=!0,s.disableTracking=!1,s.referrer="",a.Long?(r=new a.Long(0,0,!1),s.localTimestamp=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):s.localTimestamp=t.longs===String?"0":0,s.customParam4="",s.customParam5=""),e.tokens&&e.tokens.length){s.tokens=[];for(var n=0;n<e.tokens.length;++n)s.tokens[n]=e.tokens[n]}if(null!=e.pageUrl&&e.hasOwnProperty("pageUrl")&&(s.pageUrl=e.pageUrl),null!=e.userId&&e.hasOwnProperty("userId")&&(s.userId=e.userId),null!=e.forceLineItemId&&e.hasOwnProperty("forceLineItemId")&&(s.forceLineItemId=e.forceLineItemId),null!=e.forcePlayerId&&e.hasOwnProperty("forcePlayerId")&&(s.forcePlayerId=e.forcePlayerId),null!=e.forceMediaId&&e.hasOwnProperty("forceMediaId")&&(s.forceMediaId=e.forceMediaId),null!=e.forcePlaylistId&&e.hasOwnProperty("forcePlaylistId")&&(s.forcePlaylistId=e.forcePlaylistId),null!=e.version&&e.hasOwnProperty("version")&&(s.version=e.version),null!=e.clientAb0&&e.hasOwnProperty("clientAb0")&&(s.clientAb0=e.clientAb0),null!=e.clientAb1&&e.hasOwnProperty("clientAb1")&&(s.clientAb1=e.clientAb1),null!=e.customParam1&&e.hasOwnProperty("customParam1")&&(s.customParam1=e.customParam1),null!=e.customParam2&&e.hasOwnProperty("customParam2")&&(s.customParam2=e.customParam2),null!=e.customParam3&&e.hasOwnProperty("customParam3")&&(s.customParam3=e.customParam3),null!=e.forceExploration&&e.hasOwnProperty("forceExploration")&&(s.forceExploration=e.forceExploration),null!=e.es6&&e.hasOwnProperty("es6")&&(s.es6=e.es6),null!=e.bundleId&&e.hasOwnProperty("bundleId")&&(s.bundleId=e.bundleId),null!=e.forceSourceItemId&&e.hasOwnProperty("forceSourceItemId")&&(s.forceSourceItemId=e.forceSourceItemId),null!=e.parseDomain&&e.hasOwnProperty("parseDomain")&&(s.parseDomain=e.parseDomain),null!=e.implementationType&&e.hasOwnProperty("implementationType")&&(s.implementationType=t.enums===String?l.ProtoImplementationType[e.implementationType]:e.implementationType),e.queryJsTargeting&&(i=Object.keys(e.queryJsTargeting)).length)for(s.queryJsTargeting={},n=0;n<i.length;++n)s.queryJsTargeting[i[n]]=e.queryJsTargeting[i[n]];if(null!=e.isConsentConnatix&&e.hasOwnProperty("isConsentConnatix")&&(s.isConsentConnatix=e.isConsentConnatix),e.reloadedPlayers&&(i=Object.keys(e.reloadedPlayers)).length)for(s.reloadedPlayers={},n=0;n<i.length;++n)s.reloadedPlayers[i[n]]=e.reloadedPlayers[i[n]];return null!=e.disableTracking&&e.hasOwnProperty("disableTracking")&&(s.disableTracking=e.disableTracking),null!=e.referrer&&e.hasOwnProperty("referrer")&&(s.referrer=e.referrer),null!=e.localTimestamp&&e.hasOwnProperty("localTimestamp")&&("number"==typeof e.localTimestamp?s.localTimestamp=t.longs===String?String(e.localTimestamp):e.localTimestamp:s.localTimestamp=t.longs===String?a.Long.prototype.toString.call(e.localTimestamp):t.longs===Number?new a.LongBits(e.localTimestamp.low>>>0,e.localTimestamp.high>>>0).toNumber():e.localTimestamp),null!=e.customParam4&&e.hasOwnProperty("customParam4")&&(s.customParam4=e.customParam4),null!=e.customParam5&&e.hasOwnProperty("customParam5")&&(s.customParam5=e.customParam5),s},C.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},C),l.ProtoOutstreamInitialRenderingEnum=(r={},(i=Object.create(r))[r[0]="ExpandWithAd"]=0,i[r[1]="FullyRendered"]=1,i),l.ProtoOutstreamEndAdBreakPolicyEnum=(r={},(i=Object.create(r))[r[0]="Hide"]=0,i[r[1]="HouseScreen"]=1,i[r[2]="Loop"]=2,i),l.ProtoGalleryStyleMode=(r={},(i=Object.create(r))[r[0]="None"]=0,i[r[1]="Detailed"]=1,i[r[2]="Visual"]=2,i),l.ProtoLogoPositionMode=(r={},(i=Object.create(r))[r[0]="None"]=0,i[r[1]="ControlBar"]=1,i[r[2]="BottomRight"]=2,i[r[3]="BottomLeft"]=3,i[r[4]="TopRight"]=4,i[r[5]="TopLeft"]=5,i[r[6]="Center"]=6,i),l.ProtoGalleryOrientationEnum=(r={},(i=Object.create(r))[r[0]="Landscape"]=0,i[r[1]="Portrait"]=1,i),l.ProtoElementsTypeEnum=(r={},(i=Object.create(r))[r[0]="InStream"]=0,i[r[1]="OutStream"]=1,i[r[2]="InStreamInApp"]=2,i[r[3]="Live"]=3,i),l.ProtoPlayerUpNextMode=(r={},(i=Object.create(r))[r[0]="Loop"]=0,i[r[1]="Next"]=1,i[r[2]="Stop"]=2,i),l.ProtoPlaylistItem=(O.prototype.mediaId="",O.prototype.revisionNumber=0,O.prototype.mediaContentVersionId="",O.encode=function(e,t){return t=t||n.create(),null!=e.mediaId&&e.hasOwnProperty("mediaId")&&t.uint32(10).string(e.mediaId),null!=e.revisionNumber&&e.hasOwnProperty("revisionNumber")&&t.uint32(16).int32(e.revisionNumber),null!=e.mediaContentVersionId&&e.hasOwnProperty("mediaContentVersionId")&&t.uint32(26).string(e.mediaContentVersionId),t},O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlaylistItem;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.mediaId=e.string();break;case 2:r.revisionNumber=e.int32();break;case 3:r.mediaContentVersionId=e.string();break;default:e.skipType(7&s)}}return r},O.fromObject=function(e){if(e instanceof l.ProtoPlaylistItem)return e;var t=new l.ProtoPlaylistItem;return null!=e.mediaId&&(t.mediaId=String(e.mediaId)),null!=e.revisionNumber&&(t.revisionNumber=0|e.revisionNumber),null!=e.mediaContentVersionId&&(t.mediaContentVersionId=String(e.mediaContentVersionId)),t},O.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.mediaId="",i.revisionNumber=0,i.mediaContentVersionId=""),null!=e.mediaId&&e.hasOwnProperty("mediaId")&&(i.mediaId=e.mediaId),null!=e.revisionNumber&&e.hasOwnProperty("revisionNumber")&&(i.revisionNumber=e.revisionNumber),null!=e.mediaContentVersionId&&e.hasOwnProperty("mediaContentVersionId")&&(i.mediaContentVersionId=e.mediaContentVersionId),i},O.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},O),l.ProtoElements=(A.prototype.playerId="",A.prototype.playbackMode=0,A.prototype.soundMode=0,A.prototype.upNextMode=1,A.prototype.containerSelector="",A.prototype.position=0,A.prototype.insertPosition=0,A.prototype.forceInsertPath=!1,A.prototype.renderInFrame=!1,A.prototype.scrollHijackingProtection=!1,A.prototype.preRollBreak=0,A.prototype.postRollBreak=0,A.prototype.midRollNumber=-1,A.prototype.timeBetweenAds=0,A.prototype.minTimeBeforeFirstAd=0,A.prototype.adViewabilityPolicy=0,A.prototype.responsive=!1,A.prototype.ratioWidth=0,A.prototype.ratioHeight=0,A.prototype.fixedWidth=0,A.prototype.fixedHeight=0,A.prototype.casting=!1,A.prototype.sharingDestinations=a.emptyArray,A.prototype.closedCaption=!1,A.prototype.muteWatermark=!1,A.prototype.expandButton=!1,A.prototype.closeButtonMode=0,A.prototype.floatingMode=0,A.prototype.floatingDeviceMode=a.emptyArray,A.prototype.floatingCloseButtonMode=0,A.prototype.floatingFixedPosition=0,A.prototype.floatingPageElement="",A.prototype.floatingUseElementWidth=!1,A.prototype.floatingScrollPosition=0,A.prototype.floatingGutterX=0,A.prototype.floatingGutterY=0,A.prototype.floatingWidth=0,A.prototype.iconsColor="",A.prototype.accentColor="",A.prototype.tooltipTextColor="",A.prototype.tooltipBackgroundColor="",A.prototype.html="",A.prototype.galleryStyle=0,A.prototype.logoPosition=0,A.prototype.logoUrl="",A.prototype.lineItems=a.emptyArray,A.prototype.adPlaybackMode=0,A.prototype.css="",A.prototype.sessionId="",A.prototype.playlistId="",A.prototype.playerType=0,A.prototype.outstreamInitialRendering=0,A.prototype.outstreamHouseBackgroundColor="",A.prototype.outstreamTotalAdBreakLength=0,A.prototype.outstreamEndAdBreakPolicy=0,A.prototype.galleryOrientation=0,A.prototype.playlist=a.emptyArray,A.prototype.floatingAppendLocation=0,A.prototype.floatingYAxisPadding=0,A.prototype.customJsCode="",A.prototype.videoQuality=0,A.prototype.initializationSettingsJson="",A.prototype.adSkippability=0,A.prototype.skipAdAfter=5,A.prototype.adBreaks=a.emptyArray,A.prototype.amazonTamSlotId="",A.prototype.midRollOnlyOnLongContent=!0,A.prototype.limitClientSideApiUse=!1,A.prototype.abTestId="",A.encode=function(e,t){if(t=t||n.create(),null!=e.playerId&&e.hasOwnProperty("playerId")&&t.uint32(10).string(e.playerId),null!=e.playbackMode&&e.hasOwnProperty("playbackMode")&&t.uint32(16).int32(e.playbackMode),null!=e.soundMode&&e.hasOwnProperty("soundMode")&&t.uint32(24).int32(e.soundMode),null!=e.upNextMode&&e.hasOwnProperty("upNextMode")&&t.uint32(32).int32(e.upNextMode),null!=e.containerSelector&&e.hasOwnProperty("containerSelector")&&t.uint32(42).string(e.containerSelector),null!=e.position&&e.hasOwnProperty("position")&&t.uint32(48).int32(e.position),null!=e.insertPosition&&e.hasOwnProperty("insertPosition")&&t.uint32(56).int32(e.insertPosition),null!=e.forceInsertPath&&e.hasOwnProperty("forceInsertPath")&&t.uint32(64).bool(e.forceInsertPath),null!=e.renderInFrame&&e.hasOwnProperty("renderInFrame")&&t.uint32(72).bool(e.renderInFrame),null!=e.scrollHijackingProtection&&e.hasOwnProperty("scrollHijackingProtection")&&t.uint32(80).bool(e.scrollHijackingProtection),null!=e.preRollBreak&&e.hasOwnProperty("preRollBreak")&&t.uint32(88).int32(e.preRollBreak),null!=e.postRollBreak&&e.hasOwnProperty("postRollBreak")&&t.uint32(96).int32(e.postRollBreak),null!=e.midRollNumber&&e.hasOwnProperty("midRollNumber")&&t.uint32(104).int32(e.midRollNumber),null!=e.timeBetweenAds&&e.hasOwnProperty("timeBetweenAds")&&t.uint32(112).int32(e.timeBetweenAds),null!=e.minTimeBeforeFirstAd&&e.hasOwnProperty("minTimeBeforeFirstAd")&&t.uint32(120).int32(e.minTimeBeforeFirstAd),null!=e.adViewabilityPolicy&&e.hasOwnProperty("adViewabilityPolicy")&&t.uint32(128).int32(e.adViewabilityPolicy),null!=e.responsive&&e.hasOwnProperty("responsive")&&t.uint32(144).bool(e.responsive),null!=e.ratioWidth&&e.hasOwnProperty("ratioWidth")&&t.uint32(152).int32(e.ratioWidth),null!=e.ratioHeight&&e.hasOwnProperty("ratioHeight")&&t.uint32(160).int32(e.ratioHeight),null!=e.fixedWidth&&e.hasOwnProperty("fixedWidth")&&t.uint32(168).int32(e.fixedWidth),null!=e.fixedHeight&&e.hasOwnProperty("fixedHeight")&&t.uint32(176).int32(e.fixedHeight),null!=e.casting&&e.hasOwnProperty("casting")&&t.uint32(184).bool(e.casting),null!=e.sharingDestinations&&e.sharingDestinations.length){t.uint32(194).fork();for(var i=0;i<e.sharingDestinations.length;++i)t.int32(e.sharingDestinations[i]);t.ldelim()}if(null!=e.closedCaption&&e.hasOwnProperty("closedCaption")&&t.uint32(200).bool(e.closedCaption),null!=e.muteWatermark&&e.hasOwnProperty("muteWatermark")&&t.uint32(208).bool(e.muteWatermark),null!=e.expandButton&&e.hasOwnProperty("expandButton")&&t.uint32(216).bool(e.expandButton),null!=e.closeButtonMode&&e.hasOwnProperty("closeButtonMode")&&t.uint32(224).int32(e.closeButtonMode),null!=e.floatingMode&&e.hasOwnProperty("floatingMode")&&t.uint32(232).int32(e.floatingMode),null!=e.floatingDeviceMode&&e.floatingDeviceMode.length){for(t.uint32(242).fork(),i=0;i<e.floatingDeviceMode.length;++i)t.int32(e.floatingDeviceMode[i]);t.ldelim()}if(null!=e.floatingCloseButtonMode&&e.hasOwnProperty("floatingCloseButtonMode")&&t.uint32(248).int32(e.floatingCloseButtonMode),null!=e.floatingFixedPosition&&e.hasOwnProperty("floatingFixedPosition")&&t.uint32(256).int32(e.floatingFixedPosition),null!=e.floatingPageElement&&e.hasOwnProperty("floatingPageElement")&&t.uint32(266).string(e.floatingPageElement),null!=e.floatingUseElementWidth&&e.hasOwnProperty("floatingUseElementWidth")&&t.uint32(272).bool(e.floatingUseElementWidth),null!=e.floatingScrollPosition&&e.hasOwnProperty("floatingScrollPosition")&&t.uint32(280).int32(e.floatingScrollPosition),null!=e.floatingGutterX&&e.hasOwnProperty("floatingGutterX")&&t.uint32(288).int32(e.floatingGutterX),null!=e.floatingGutterY&&e.hasOwnProperty("floatingGutterY")&&t.uint32(296).int32(e.floatingGutterY),null!=e.floatingWidth&&e.hasOwnProperty("floatingWidth")&&t.uint32(304).int32(e.floatingWidth),null!=e.iconsColor&&e.hasOwnProperty("iconsColor")&&t.uint32(314).string(e.iconsColor),null!=e.accentColor&&e.hasOwnProperty("accentColor")&&t.uint32(322).string(e.accentColor),null!=e.tooltipTextColor&&e.hasOwnProperty("tooltipTextColor")&&t.uint32(330).string(e.tooltipTextColor),null!=e.tooltipBackgroundColor&&e.hasOwnProperty("tooltipBackgroundColor")&&t.uint32(338).string(e.tooltipBackgroundColor),null!=e.html&&e.hasOwnProperty("html")&&t.uint32(346).string(e.html),null!=e.galleryStyle&&e.hasOwnProperty("galleryStyle")&&t.uint32(360).int32(e.galleryStyle),null!=e.logoPosition&&e.hasOwnProperty("logoPosition")&&t.uint32(368).int32(e.logoPosition),null!=e.logoUrl&&e.hasOwnProperty("logoUrl")&&t.uint32(378).string(e.logoUrl),null!=e.lineItems&&e.lineItems.length)for(i=0;i<e.lineItems.length;++i)l.ProtoLineItem.encode(e.lineItems[i],t.uint32(394).fork()).ldelim();if(null!=e.adPlaybackMode&&e.hasOwnProperty("adPlaybackMode")&&t.uint32(400).int32(e.adPlaybackMode),null!=e.css&&e.hasOwnProperty("css")&&t.uint32(410).string(e.css),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(418).string(e.sessionId),null!=e.playlistId&&e.hasOwnProperty("playlistId")&&t.uint32(426).string(e.playlistId),null!=e.playerType&&e.hasOwnProperty("playerType")&&t.uint32(432).int32(e.playerType),null!=e.outstreamInitialRendering&&e.hasOwnProperty("outstreamInitialRendering")&&t.uint32(440).int32(e.outstreamInitialRendering),null!=e.outstreamHouseBackgroundColor&&e.hasOwnProperty("outstreamHouseBackgroundColor")&&t.uint32(450).string(e.outstreamHouseBackgroundColor),null!=e.outstreamTotalAdBreakLength&&e.hasOwnProperty("outstreamTotalAdBreakLength")&&t.uint32(456).int32(e.outstreamTotalAdBreakLength),null!=e.outstreamEndAdBreakPolicy&&e.hasOwnProperty("outstreamEndAdBreakPolicy")&&t.uint32(464).int32(e.outstreamEndAdBreakPolicy),null!=e.galleryOrientation&&e.hasOwnProperty("galleryOrientation")&&t.uint32(472).int32(e.galleryOrientation),null!=e.playlist&&e.playlist.length)for(i=0;i<e.playlist.length;++i)l.ProtoPlaylistItem.encode(e.playlist[i],t.uint32(482).fork()).ldelim();if(null!=e.floatingAppendLocation&&e.hasOwnProperty("floatingAppendLocation")&&t.uint32(488).int32(e.floatingAppendLocation),null!=e.floatingYAxisPadding&&e.hasOwnProperty("floatingYAxisPadding")&&t.uint32(496).int32(e.floatingYAxisPadding),null!=e.customJsCode&&e.hasOwnProperty("customJsCode")&&t.uint32(506).string(e.customJsCode),null!=e.videoQuality&&e.hasOwnProperty("videoQuality")&&t.uint32(512).int32(e.videoQuality),null!=e.initializationSettingsJson&&e.hasOwnProperty("initializationSettingsJson")&&t.uint32(522).string(e.initializationSettingsJson),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&t.uint32(528).int32(e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&t.uint32(536).int32(e.skipAdAfter),null!=e.adBreaks&&e.adBreaks.length)for(i=0;i<e.adBreaks.length;++i)l.ProtoAdBreak.encode(e.adBreaks[i],t.uint32(546).fork()).ldelim();return null!=e.amazonTamSlotId&&e.hasOwnProperty("amazonTamSlotId")&&t.uint32(554).string(e.amazonTamSlotId),null!=e.midRollOnlyOnLongContent&&e.hasOwnProperty("midRollOnlyOnLongContent")&&t.uint32(560).bool(e.midRollOnlyOnLongContent),null!=e.limitClientSideApiUse&&e.hasOwnProperty("limitClientSideApiUse")&&t.uint32(568).bool(e.limitClientSideApiUse),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&t.uint32(578).string(e.abTestId),t},A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoElements;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.playerId=e.string();break;case 2:r.playbackMode=e.int32();break;case 3:r.soundMode=e.int32();break;case 4:r.upNextMode=e.int32();break;case 5:r.containerSelector=e.string();break;case 6:r.position=e.int32();break;case 7:r.insertPosition=e.int32();break;case 8:r.forceInsertPath=e.bool();break;case 9:r.renderInFrame=e.bool();break;case 10:r.scrollHijackingProtection=e.bool();break;case 11:r.preRollBreak=e.int32();break;case 12:r.postRollBreak=e.int32();break;case 13:r.midRollNumber=e.int32();break;case 14:r.timeBetweenAds=e.int32();break;case 15:r.minTimeBeforeFirstAd=e.int32();break;case 16:r.adViewabilityPolicy=e.int32();break;case 18:r.responsive=e.bool();break;case 19:r.ratioWidth=e.int32();break;case 20:r.ratioHeight=e.int32();break;case 21:r.fixedWidth=e.int32();break;case 22:r.fixedHeight=e.int32();break;case 23:r.casting=e.bool();break;case 24:if(r.sharingDestinations&&r.sharingDestinations.length||(r.sharingDestinations=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.sharingDestinations.push(e.int32());else r.sharingDestinations.push(e.int32());break;case 25:r.closedCaption=e.bool();break;case 26:r.muteWatermark=e.bool();break;case 27:r.expandButton=e.bool();break;case 28:r.closeButtonMode=e.int32();break;case 29:r.floatingMode=e.int32();break;case 30:if(r.floatingDeviceMode&&r.floatingDeviceMode.length||(r.floatingDeviceMode=[]),2==(7&s))for(n=e.uint32()+e.pos;e.pos<n;)r.floatingDeviceMode.push(e.int32());else r.floatingDeviceMode.push(e.int32());break;case 31:r.floatingCloseButtonMode=e.int32();break;case 32:r.floatingFixedPosition=e.int32();break;case 33:r.floatingPageElement=e.string();break;case 34:r.floatingUseElementWidth=e.bool();break;case 35:r.floatingScrollPosition=e.int32();break;case 36:r.floatingGutterX=e.int32();break;case 37:r.floatingGutterY=e.int32();break;case 38:r.floatingWidth=e.int32();break;case 39:r.iconsColor=e.string();break;case 40:r.accentColor=e.string();break;case 41:r.tooltipTextColor=e.string();break;case 42:r.tooltipBackgroundColor=e.string();break;case 43:r.html=e.string();break;case 45:r.galleryStyle=e.int32();break;case 46:r.logoPosition=e.int32();break;case 47:r.logoUrl=e.string();break;case 49:r.lineItems&&r.lineItems.length||(r.lineItems=[]),r.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 50:r.adPlaybackMode=e.int32();break;case 51:r.css=e.string();break;case 52:r.sessionId=e.string();break;case 53:r.playlistId=e.string();break;case 54:r.playerType=e.int32();break;case 55:r.outstreamInitialRendering=e.int32();break;case 56:r.outstreamHouseBackgroundColor=e.string();break;case 57:r.outstreamTotalAdBreakLength=e.int32();break;case 58:r.outstreamEndAdBreakPolicy=e.int32();break;case 59:r.galleryOrientation=e.int32();break;case 60:r.playlist&&r.playlist.length||(r.playlist=[]),r.playlist.push(l.ProtoPlaylistItem.decode(e,e.uint32()));break;case 61:r.floatingAppendLocation=e.int32();break;case 62:r.floatingYAxisPadding=e.int32();break;case 63:r.customJsCode=e.string();break;case 64:r.videoQuality=e.int32();break;case 65:r.initializationSettingsJson=e.string();break;case 66:r.adSkippability=e.int32();break;case 67:r.skipAdAfter=e.int32();break;case 68:r.adBreaks&&r.adBreaks.length||(r.adBreaks=[]),r.adBreaks.push(l.ProtoAdBreak.decode(e,e.uint32()));break;case 69:r.amazonTamSlotId=e.string();break;case 70:r.midRollOnlyOnLongContent=e.bool();break;case 71:r.limitClientSideApiUse=e.bool();break;case 72:r.abTestId=e.string();break;default:e.skipType(7&s)}}return r},A.fromObject=function(e){if(e instanceof l.ProtoElements)return e;var t=new l.ProtoElements;switch(null!=e.playerId&&(t.playerId=String(e.playerId)),e.playbackMode){case"Autoplay":case 0:t.playbackMode=0;break;case"ScrollToPlay":case 1:t.playbackMode=1;break;case"ClickToPlay":case 2:t.playbackMode=2}switch(e.soundMode){case"Mute":case 0:t.soundMode=0;break;case"On":case 1:t.soundMode=1;break;case"Hover":case 2:t.soundMode=2}switch(e.upNextMode){case"Loop":case 0:t.upNextMode=0;break;case"Next":case 1:t.upNextMode=1;break;case"Stop":case 2:t.upNextMode=2}switch(null!=e.containerSelector&&(t.containerSelector=String(e.containerSelector)),null!=e.position&&(t.position=0|e.position),e.insertPosition){case"WithinContainer":case 0:t.insertPosition=0;break;case"BeforeContainer":case 1:t.insertPosition=1;break;case"AfterContainer":case 2:t.insertPosition=2;break;case"ReplaceContainer":case 3:t.insertPosition=3;break;case"HideContainer":case 4:t.insertPosition=4}switch(null!=e.forceInsertPath&&(t.forceInsertPath=Boolean(e.forceInsertPath)),null!=e.renderInFrame&&(t.renderInFrame=Boolean(e.renderInFrame)),null!=e.scrollHijackingProtection&&(t.scrollHijackingProtection=Boolean(e.scrollHijackingProtection)),null!=e.preRollBreak&&(t.preRollBreak=0|e.preRollBreak),null!=e.postRollBreak&&(t.postRollBreak=0|e.postRollBreak),null!=e.midRollNumber&&(t.midRollNumber=0|e.midRollNumber),null!=e.timeBetweenAds&&(t.timeBetweenAds=0|e.timeBetweenAds),null!=e.minTimeBeforeFirstAd&&(t.minTimeBeforeFirstAd=0|e.minTimeBeforeFirstAd),e.adViewabilityPolicy){case"Default":case 0:t.adViewabilityPolicy=0;break;case"Strict":case 1:t.adViewabilityPolicy=1}if(null!=e.responsive&&(t.responsive=Boolean(e.responsive)),null!=e.ratioWidth&&(t.ratioWidth=0|e.ratioWidth),null!=e.ratioHeight&&(t.ratioHeight=0|e.ratioHeight),null!=e.fixedWidth&&(t.fixedWidth=0|e.fixedWidth),null!=e.fixedHeight&&(t.fixedHeight=0|e.fixedHeight),null!=e.casting&&(t.casting=Boolean(e.casting)),e.sharingDestinations){if(!Array.isArray(e.sharingDestinations))throw TypeError(".ProtoElements.sharingDestinations: array expected");t.sharingDestinations=[];for(var i=0;i<e.sharingDestinations.length;++i)switch(e.sharingDestinations[i]){default:case"Facebook":case 0:t.sharingDestinations[i]=0;break;case"Twitter":case 1:t.sharingDestinations[i]=1;break;case"LinkedIn":case 2:t.sharingDestinations[i]=2}}switch(null!=e.closedCaption&&(t.closedCaption=Boolean(e.closedCaption)),null!=e.muteWatermark&&(t.muteWatermark=Boolean(e.muteWatermark)),null!=e.expandButton&&(t.expandButton=Boolean(e.expandButton)),e.closeButtonMode){case"Off":case 0:t.closeButtonMode=0;break;case"OnHover":case 1:t.closeButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:t.closeButtonMode=2;break;case"AlwaysOn":case 3:t.closeButtonMode=3}switch(e.floatingMode){case"Off":case 0:t.floatingMode=0;break;case"OnPageLoad":case 1:t.floatingMode=1;break;case"AfterInView":case 2:t.floatingMode=2;break;case"Always":case 3:t.floatingMode=3}if(e.floatingDeviceMode){if(!Array.isArray(e.floatingDeviceMode))throw TypeError(".ProtoElements.floatingDeviceMode: array expected");for(t.floatingDeviceMode=[],i=0;i<e.floatingDeviceMode.length;++i)switch(e.floatingDeviceMode[i]){default:case"Desktop":case 0:t.floatingDeviceMode[i]=0;break;case"Smartphone":case 1:t.floatingDeviceMode[i]=1;break;case"Tablet":case 2:t.floatingDeviceMode[i]=2;break;case"GameConsole":case 3:t.floatingDeviceMode[i]=3;break;case"SmartTV":case 4:t.floatingDeviceMode[i]=4;break;case"WearableComputer":case 5:t.floatingDeviceMode[i]=5;break;case"PDA":case 6:t.floatingDeviceMode[i]=6;break;case"Unrecognized":case 7:t.floatingDeviceMode[i]=7}}switch(e.floatingCloseButtonMode){case"Off":case 0:t.floatingCloseButtonMode=0;break;case"OnHover":case 1:t.floatingCloseButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:t.floatingCloseButtonMode=2;break;case"AlwaysOn":case 3:t.floatingCloseButtonMode=3}switch(e.floatingFixedPosition){case"Page":case 0:t.floatingFixedPosition=0;break;case"Element":case 1:t.floatingFixedPosition=1}switch(null!=e.floatingPageElement&&(t.floatingPageElement=String(e.floatingPageElement)),null!=e.floatingUseElementWidth&&(t.floatingUseElementWidth=Boolean(e.floatingUseElementWidth)),e.floatingScrollPosition){case"BottomRight":case 0:t.floatingScrollPosition=0;break;case"BottomLeft":case 1:t.floatingScrollPosition=1;break;case"TopRight":case 2:t.floatingScrollPosition=2;break;case"TopLeft":case 3:t.floatingScrollPosition=3}switch(null!=e.floatingGutterX&&(t.floatingGutterX=0|e.floatingGutterX),null!=e.floatingGutterY&&(t.floatingGutterY=0|e.floatingGutterY),null!=e.floatingWidth&&(t.floatingWidth=0|e.floatingWidth),null!=e.iconsColor&&(t.iconsColor=String(e.iconsColor)),null!=e.accentColor&&(t.accentColor=String(e.accentColor)),null!=e.tooltipTextColor&&(t.tooltipTextColor=String(e.tooltipTextColor)),null!=e.tooltipBackgroundColor&&(t.tooltipBackgroundColor=String(e.tooltipBackgroundColor)),null!=e.html&&(t.html=String(e.html)),e.galleryStyle){case"None":case 0:t.galleryStyle=0;break;case"Detailed":case 1:t.galleryStyle=1;break;case"Visual":case 2:t.galleryStyle=2}switch(e.logoPosition){case"None":case 0:t.logoPosition=0;break;case"ControlBar":case 1:t.logoPosition=1;break;case"BottomRight":case 2:t.logoPosition=2;break;case"BottomLeft":case 3:t.logoPosition=3;break;case"TopRight":case 4:t.logoPosition=4;break;case"TopLeft":case 5:t.logoPosition=5;break;case"Center":case 6:t.logoPosition=6}if(null!=e.logoUrl&&(t.logoUrl=String(e.logoUrl)),e.lineItems){if(!Array.isArray(e.lineItems))throw TypeError(".ProtoElements.lineItems: array expected");for(t.lineItems=[],i=0;i<e.lineItems.length;++i){if("object"!=typeof e.lineItems[i])throw TypeError(".ProtoElements.lineItems: object expected");t.lineItems[i]=l.ProtoLineItem.fromObject(e.lineItems[i])}}switch(e.adPlaybackMode){case"Autoplay":case 0:t.adPlaybackMode=0;break;case"ScrollToPlay":case 1:t.adPlaybackMode=1}switch(null!=e.css&&(t.css=String(e.css)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.playlistId&&(t.playlistId=String(e.playlistId)),e.playerType){case"InStream":case 0:t.playerType=0;break;case"OutStream":case 1:t.playerType=1;break;case"InStreamInApp":case 2:t.playerType=2;break;case"Live":case 3:t.playerType=3}switch(e.outstreamInitialRendering){case"ExpandWithAd":case 0:t.outstreamInitialRendering=0;break;case"FullyRendered":case 1:t.outstreamInitialRendering=1}switch(null!=e.outstreamHouseBackgroundColor&&(t.outstreamHouseBackgroundColor=String(e.outstreamHouseBackgroundColor)),null!=e.outstreamTotalAdBreakLength&&(t.outstreamTotalAdBreakLength=0|e.outstreamTotalAdBreakLength),e.outstreamEndAdBreakPolicy){case"Hide":case 0:t.outstreamEndAdBreakPolicy=0;break;case"HouseScreen":case 1:t.outstreamEndAdBreakPolicy=1;break;case"Loop":case 2:t.outstreamEndAdBreakPolicy=2}switch(e.galleryOrientation){case"Landscape":case 0:t.galleryOrientation=0;break;case"Portrait":case 1:t.galleryOrientation=1}if(e.playlist){if(!Array.isArray(e.playlist))throw TypeError(".ProtoElements.playlist: array expected");for(t.playlist=[],i=0;i<e.playlist.length;++i){if("object"!=typeof e.playlist[i])throw TypeError(".ProtoElements.playlist: object expected");t.playlist[i]=l.ProtoPlaylistItem.fromObject(e.playlist[i])}}switch(e.floatingAppendLocation){case"Above":case 0:t.floatingAppendLocation=0;break;case"Below":case 1:t.floatingAppendLocation=1;break;case"Within":case 2:t.floatingAppendLocation=2}switch(null!=e.floatingYAxisPadding&&(t.floatingYAxisPadding=0|e.floatingYAxisPadding),null!=e.customJsCode&&(t.customJsCode=String(e.customJsCode)),e.videoQuality){case"Auto":case 0:t.videoQuality=0;break;case"High1080p":case 1:t.videoQuality=1;break;case"High720p":case 2:t.videoQuality=2;break;case"Medium360p":case 3:t.videoQuality=3}switch(null!=e.initializationSettingsJson&&(t.initializationSettingsJson=String(e.initializationSettingsJson)),e.adSkippability){case"IfLongerThan31Sec":case 0:t.adSkippability=0;break;case"Always":case 1:t.adSkippability=1;break;case"NoRestrictions":case 2:t.adSkippability=2}if(null!=e.skipAdAfter&&(t.skipAdAfter=0|e.skipAdAfter),e.adBreaks){if(!Array.isArray(e.adBreaks))throw TypeError(".ProtoElements.adBreaks: array expected");for(t.adBreaks=[],i=0;i<e.adBreaks.length;++i){if("object"!=typeof e.adBreaks[i])throw TypeError(".ProtoElements.adBreaks: object expected");t.adBreaks[i]=l.ProtoAdBreak.fromObject(e.adBreaks[i])}}return null!=e.amazonTamSlotId&&(t.amazonTamSlotId=String(e.amazonTamSlotId)),null!=e.midRollOnlyOnLongContent&&(t.midRollOnlyOnLongContent=Boolean(e.midRollOnlyOnLongContent)),null!=e.limitClientSideApiUse&&(t.limitClientSideApiUse=Boolean(e.limitClientSideApiUse)),null!=e.abTestId&&(t.abTestId=String(e.abTestId)),t},A.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.sharingDestinations=[],i.floatingDeviceMode=[],i.lineItems=[],i.playlist=[],i.adBreaks=[]),t.defaults&&(i.playerId="",i.playbackMode=t.enums===String?"Autoplay":0,i.soundMode=t.enums===String?"Mute":0,i.upNextMode=t.enums===String?"Next":1,i.containerSelector="",i.position=0,i.insertPosition=t.enums===String?"WithinContainer":0,i.forceInsertPath=!1,i.renderInFrame=!1,i.scrollHijackingProtection=!1,i.preRollBreak=0,i.postRollBreak=0,i.midRollNumber=-1,i.timeBetweenAds=0,i.minTimeBeforeFirstAd=0,i.adViewabilityPolicy=t.enums===String?"Default":0,i.responsive=!1,i.ratioWidth=0,i.ratioHeight=0,i.fixedWidth=0,i.fixedHeight=0,i.casting=!1,i.closedCaption=!1,i.muteWatermark=!1,i.expandButton=!1,i.closeButtonMode=t.enums===String?"Off":0,i.floatingMode=t.enums===String?"Off":0,i.floatingCloseButtonMode=t.enums===String?"Off":0,i.floatingFixedPosition=t.enums===String?"Page":0,i.floatingPageElement="",i.floatingUseElementWidth=!1,i.floatingScrollPosition=t.enums===String?"BottomRight":0,i.floatingGutterX=0,i.floatingGutterY=0,i.floatingWidth=0,i.iconsColor="",i.accentColor="",i.tooltipTextColor="",i.tooltipBackgroundColor="",i.html="",i.galleryStyle=t.enums===String?"None":0,i.logoPosition=t.enums===String?"None":0,i.logoUrl="",i.adPlaybackMode=t.enums===String?"Autoplay":0,i.css="",i.sessionId="",i.playlistId="",i.playerType=t.enums===String?"InStream":0,i.outstreamInitialRendering=t.enums===String?"ExpandWithAd":0,i.outstreamHouseBackgroundColor="",i.outstreamTotalAdBreakLength=0,i.outstreamEndAdBreakPolicy=t.enums===String?"Hide":0,i.galleryOrientation=t.enums===String?"Landscape":0,i.floatingAppendLocation=t.enums===String?"Above":0,i.floatingYAxisPadding=0,i.customJsCode="",i.videoQuality=t.enums===String?"Auto":0,i.initializationSettingsJson="",i.adSkippability=t.enums===String?"IfLongerThan31Sec":0,i.skipAdAfter=5,i.amazonTamSlotId="",i.midRollOnlyOnLongContent=!0,i.limitClientSideApiUse=!1,i.abTestId=""),null!=e.playerId&&e.hasOwnProperty("playerId")&&(i.playerId=e.playerId),null!=e.playbackMode&&e.hasOwnProperty("playbackMode")&&(i.playbackMode=t.enums===String?l.ProtoPlayerPlaybackModeEnum[e.playbackMode]:e.playbackMode),null!=e.soundMode&&e.hasOwnProperty("soundMode")&&(i.soundMode=t.enums===String?l.ProtoPlayerSoundMode[e.soundMode]:e.soundMode),null!=e.upNextMode&&e.hasOwnProperty("upNextMode")&&(i.upNextMode=t.enums===String?l.ProtoPlayerUpNextMode[e.upNextMode]:e.upNextMode),null!=e.containerSelector&&e.hasOwnProperty("containerSelector")&&(i.containerSelector=e.containerSelector),null!=e.position&&e.hasOwnProperty("position")&&(i.position=e.position),null!=e.insertPosition&&e.hasOwnProperty("insertPosition")&&(i.insertPosition=t.enums===String?l.ProtoPlayerInsertMode[e.insertPosition]:e.insertPosition),null!=e.forceInsertPath&&e.hasOwnProperty("forceInsertPath")&&(i.forceInsertPath=e.forceInsertPath),null!=e.renderInFrame&&e.hasOwnProperty("renderInFrame")&&(i.renderInFrame=e.renderInFrame),null!=e.scrollHijackingProtection&&e.hasOwnProperty("scrollHijackingProtection")&&(i.scrollHijackingProtection=e.scrollHijackingProtection),null!=e.preRollBreak&&e.hasOwnProperty("preRollBreak")&&(i.preRollBreak=e.preRollBreak),null!=e.postRollBreak&&e.hasOwnProperty("postRollBreak")&&(i.postRollBreak=e.postRollBreak),null!=e.midRollNumber&&e.hasOwnProperty("midRollNumber")&&(i.midRollNumber=e.midRollNumber),null!=e.timeBetweenAds&&e.hasOwnProperty("timeBetweenAds")&&(i.timeBetweenAds=e.timeBetweenAds),null!=e.minTimeBeforeFirstAd&&e.hasOwnProperty("minTimeBeforeFirstAd")&&(i.minTimeBeforeFirstAd=e.minTimeBeforeFirstAd),null!=e.adViewabilityPolicy&&e.hasOwnProperty("adViewabilityPolicy")&&(i.adViewabilityPolicy=t.enums===String?l.ProtoAdViewabilityPolicy[e.adViewabilityPolicy]:e.adViewabilityPolicy),null!=e.responsive&&e.hasOwnProperty("responsive")&&(i.responsive=e.responsive),null!=e.ratioWidth&&e.hasOwnProperty("ratioWidth")&&(i.ratioWidth=e.ratioWidth),null!=e.ratioHeight&&e.hasOwnProperty("ratioHeight")&&(i.ratioHeight=e.ratioHeight),null!=e.fixedWidth&&e.hasOwnProperty("fixedWidth")&&(i.fixedWidth=e.fixedWidth),null!=e.fixedHeight&&e.hasOwnProperty("fixedHeight")&&(i.fixedHeight=e.fixedHeight),null!=e.casting&&e.hasOwnProperty("casting")&&(i.casting=e.casting),e.sharingDestinations&&e.sharingDestinations.length){i.sharingDestinations=[];for(var r=0;r<e.sharingDestinations.length;++r)i.sharingDestinations[r]=t.enums===String?l.ProtoSharingDestination[e.sharingDestinations[r]]:e.sharingDestinations[r]}if(null!=e.closedCaption&&e.hasOwnProperty("closedCaption")&&(i.closedCaption=e.closedCaption),null!=e.muteWatermark&&e.hasOwnProperty("muteWatermark")&&(i.muteWatermark=e.muteWatermark),null!=e.expandButton&&e.hasOwnProperty("expandButton")&&(i.expandButton=e.expandButton),null!=e.closeButtonMode&&e.hasOwnProperty("closeButtonMode")&&(i.closeButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.closeButtonMode]:e.closeButtonMode),null!=e.floatingMode&&e.hasOwnProperty("floatingMode")&&(i.floatingMode=t.enums===String?l.ProtoPlayerFloatingMode[e.floatingMode]:e.floatingMode),e.floatingDeviceMode&&e.floatingDeviceMode.length)for(i.floatingDeviceMode=[],r=0;r<e.floatingDeviceMode.length;++r)i.floatingDeviceMode[r]=t.enums===String?l.ProtoDeviceType[e.floatingDeviceMode[r]]:e.floatingDeviceMode[r];if(null!=e.floatingCloseButtonMode&&e.hasOwnProperty("floatingCloseButtonMode")&&(i.floatingCloseButtonMode=t.enums===String?l.ProtoPlayerCloseButtonMode[e.floatingCloseButtonMode]:e.floatingCloseButtonMode),null!=e.floatingFixedPosition&&e.hasOwnProperty("floatingFixedPosition")&&(i.floatingFixedPosition=t.enums===String?l.ProtoFloatingFixedPositionMode[e.floatingFixedPosition]:e.floatingFixedPosition),null!=e.floatingPageElement&&e.hasOwnProperty("floatingPageElement")&&(i.floatingPageElement=e.floatingPageElement),null!=e.floatingUseElementWidth&&e.hasOwnProperty("floatingUseElementWidth")&&(i.floatingUseElementWidth=e.floatingUseElementWidth),null!=e.floatingScrollPosition&&e.hasOwnProperty("floatingScrollPosition")&&(i.floatingScrollPosition=t.enums===String?l.ProtoPositionMode[e.floatingScrollPosition]:e.floatingScrollPosition),null!=e.floatingGutterX&&e.hasOwnProperty("floatingGutterX")&&(i.floatingGutterX=e.floatingGutterX),null!=e.floatingGutterY&&e.hasOwnProperty("floatingGutterY")&&(i.floatingGutterY=e.floatingGutterY),null!=e.floatingWidth&&e.hasOwnProperty("floatingWidth")&&(i.floatingWidth=e.floatingWidth),null!=e.iconsColor&&e.hasOwnProperty("iconsColor")&&(i.iconsColor=e.iconsColor),null!=e.accentColor&&e.hasOwnProperty("accentColor")&&(i.accentColor=e.accentColor),null!=e.tooltipTextColor&&e.hasOwnProperty("tooltipTextColor")&&(i.tooltipTextColor=e.tooltipTextColor),null!=e.tooltipBackgroundColor&&e.hasOwnProperty("tooltipBackgroundColor")&&(i.tooltipBackgroundColor=e.tooltipBackgroundColor),null!=e.html&&e.hasOwnProperty("html")&&(i.html=e.html),null!=e.galleryStyle&&e.hasOwnProperty("galleryStyle")&&(i.galleryStyle=t.enums===String?l.ProtoGalleryStyleMode[e.galleryStyle]:e.galleryStyle),null!=e.logoPosition&&e.hasOwnProperty("logoPosition")&&(i.logoPosition=t.enums===String?l.ProtoLogoPositionMode[e.logoPosition]:e.logoPosition),null!=e.logoUrl&&e.hasOwnProperty("logoUrl")&&(i.logoUrl=e.logoUrl),e.lineItems&&e.lineItems.length)for(i.lineItems=[],r=0;r<e.lineItems.length;++r)i.lineItems[r]=l.ProtoLineItem.toObject(e.lineItems[r],t);if(null!=e.adPlaybackMode&&e.hasOwnProperty("adPlaybackMode")&&(i.adPlaybackMode=t.enums===String?l.ProtoAdPlaybackMode[e.adPlaybackMode]:e.adPlaybackMode),null!=e.css&&e.hasOwnProperty("css")&&(i.css=e.css),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(i.sessionId=e.sessionId),null!=e.playlistId&&e.hasOwnProperty("playlistId")&&(i.playlistId=e.playlistId),null!=e.playerType&&e.hasOwnProperty("playerType")&&(i.playerType=t.enums===String?l.ProtoElementsTypeEnum[e.playerType]:e.playerType),null!=e.outstreamInitialRendering&&e.hasOwnProperty("outstreamInitialRendering")&&(i.outstreamInitialRendering=t.enums===String?l.ProtoOutstreamInitialRenderingEnum[e.outstreamInitialRendering]:e.outstreamInitialRendering),null!=e.outstreamHouseBackgroundColor&&e.hasOwnProperty("outstreamHouseBackgroundColor")&&(i.outstreamHouseBackgroundColor=e.outstreamHouseBackgroundColor),null!=e.outstreamTotalAdBreakLength&&e.hasOwnProperty("outstreamTotalAdBreakLength")&&(i.outstreamTotalAdBreakLength=e.outstreamTotalAdBreakLength),null!=e.outstreamEndAdBreakPolicy&&e.hasOwnProperty("outstreamEndAdBreakPolicy")&&(i.outstreamEndAdBreakPolicy=t.enums===String?l.ProtoOutstreamEndAdBreakPolicyEnum[e.outstreamEndAdBreakPolicy]:e.outstreamEndAdBreakPolicy),null!=e.galleryOrientation&&e.hasOwnProperty("galleryOrientation")&&(i.galleryOrientation=t.enums===String?l.ProtoGalleryOrientationEnum[e.galleryOrientation]:e.galleryOrientation),e.playlist&&e.playlist.length)for(i.playlist=[],r=0;r<e.playlist.length;++r)i.playlist[r]=l.ProtoPlaylistItem.toObject(e.playlist[r],t);if(null!=e.floatingAppendLocation&&e.hasOwnProperty("floatingAppendLocation")&&(i.floatingAppendLocation=t.enums===String?l.ProtoFloatingAppendLocationEnum[e.floatingAppendLocation]:e.floatingAppendLocation),null!=e.floatingYAxisPadding&&e.hasOwnProperty("floatingYAxisPadding")&&(i.floatingYAxisPadding=e.floatingYAxisPadding),null!=e.customJsCode&&e.hasOwnProperty("customJsCode")&&(i.customJsCode=e.customJsCode),null!=e.videoQuality&&e.hasOwnProperty("videoQuality")&&(i.videoQuality=t.enums===String?l.ProtoVideoQuality[e.videoQuality]:e.videoQuality),null!=e.initializationSettingsJson&&e.hasOwnProperty("initializationSettingsJson")&&(i.initializationSettingsJson=e.initializationSettingsJson),null!=e.adSkippability&&e.hasOwnProperty("adSkippability")&&(i.adSkippability=t.enums===String?l.ProtoPlayerAdSkippability[e.adSkippability]:e.adSkippability),null!=e.skipAdAfter&&e.hasOwnProperty("skipAdAfter")&&(i.skipAdAfter=e.skipAdAfter),e.adBreaks&&e.adBreaks.length)for(i.adBreaks=[],r=0;r<e.adBreaks.length;++r)i.adBreaks[r]=l.ProtoAdBreak.toObject(e.adBreaks[r],t);return null!=e.amazonTamSlotId&&e.hasOwnProperty("amazonTamSlotId")&&(i.amazonTamSlotId=e.amazonTamSlotId),null!=e.midRollOnlyOnLongContent&&e.hasOwnProperty("midRollOnlyOnLongContent")&&(i.midRollOnlyOnLongContent=e.midRollOnlyOnLongContent),null!=e.limitClientSideApiUse&&e.hasOwnProperty("limitClientSideApiUse")&&(i.limitClientSideApiUse=e.limitClientSideApiUse),null!=e.abTestId&&e.hasOwnProperty("abTestId")&&(i.abTestId=e.abTestId),i},A.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},A),l.ProtoElementsResponse=(k.prototype.errorMessage="",k.prototype.players=a.emptyArray,k.prototype.browser=null,k.prototype.geoLocation=null,k.prototype.lineItems=a.emptyArray,k.prototype.cookieSyncUrls=a.emptyObject,k.prototype.explorationMode=!1,k.prototype.supplyChain=null,k.prototype.secondLevelDomain="",k.prototype.userInformation=null,k.prototype.serverAb0=0,k.prototype.serverAb1=0,k.prototype.isSeoTraffic=!1,k.encode=function(e,t){if(t=t||n.create(),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&t.uint32(10).string(e.errorMessage),null!=e.players&&e.players.length)for(var i=0;i<e.players.length;++i)l.ProtoElements.encode(e.players[i],t.uint32(82).fork()).ldelim();if(null!=e.browser&&e.hasOwnProperty("browser")&&l.Browser.encode(e.browser,t.uint32(90).fork()).ldelim(),null!=e.geoLocation&&e.hasOwnProperty("geoLocation")&&l.GeoLocation.encode(e.geoLocation,t.uint32(98).fork()).ldelim(),null!=e.lineItems&&e.lineItems.length)for(i=0;i<e.lineItems.length;++i)l.ProtoLineItem.encode(e.lineItems[i],t.uint32(106).fork()).ldelim();if(null!=e.cookieSyncUrls&&e.hasOwnProperty("cookieSyncUrls"))for(var r=Object.keys(e.cookieSyncUrls),i=0;i<r.length;++i)t.uint32(114).fork().uint32(8).int32(r[i]).uint32(18).string(e.cookieSyncUrls[r[i]]).ldelim();return null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&t.uint32(120).bool(e.explorationMode),null!=e.supplyChain&&e.hasOwnProperty("supplyChain")&&l.ProtoSupplyChain.encode(e.supplyChain,t.uint32(138).fork()).ldelim(),null!=e.secondLevelDomain&&e.hasOwnProperty("secondLevelDomain")&&t.uint32(146).string(e.secondLevelDomain),null!=e.userInformation&&e.hasOwnProperty("userInformation")&&l.ProtoUserInformation.encode(e.userInformation,t.uint32(162).fork()).ldelim(),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&t.uint32(168).int32(e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&t.uint32(176).int32(e.serverAb1),null!=e.isSeoTraffic&&e.hasOwnProperty("isSeoTraffic")&&t.uint32(184).bool(e.isSeoTraffic),t},k.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i,r=void 0===t?e.len:e.pos+t,s=new l.ProtoElementsResponse;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:s.errorMessage=e.string();break;case 10:s.players&&s.players.length||(s.players=[]),s.players.push(l.ProtoElements.decode(e,e.uint32()));break;case 11:s.browser=l.Browser.decode(e,e.uint32());break;case 12:s.geoLocation=l.GeoLocation.decode(e,e.uint32());break;case 13:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(l.ProtoLineItem.decode(e,e.uint32()));break;case 14:e.skip().pos++,s.cookieSyncUrls===a.emptyObject&&(s.cookieSyncUrls={}),i=e.int32(),e.pos++,s.cookieSyncUrls[i]=e.string();break;case 15:s.explorationMode=e.bool();break;case 17:s.supplyChain=l.ProtoSupplyChain.decode(e,e.uint32());break;case 18:s.secondLevelDomain=e.string();break;case 20:s.userInformation=l.ProtoUserInformation.decode(e,e.uint32());break;case 21:s.serverAb0=e.int32();break;case 22:s.serverAb1=e.int32();break;case 23:s.isSeoTraffic=e.bool();break;default:e.skipType(7&n)}}return s},k.fromObject=function(e){if(e instanceof l.ProtoElementsResponse)return e;var t=new l.ProtoElementsResponse;if(null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),e.players){if(!Array.isArray(e.players))throw TypeError(".ProtoElementsResponse.players: array expected");t.players=[];for(var i=0;i<e.players.length;++i){if("object"!=typeof e.players[i])throw TypeError(".ProtoElementsResponse.players: object expected");t.players[i]=l.ProtoElements.fromObject(e.players[i])}}if(null!=e.browser){if("object"!=typeof e.browser)throw TypeError(".ProtoElementsResponse.browser: object expected");t.browser=l.Browser.fromObject(e.browser)}if(null!=e.geoLocation){if("object"!=typeof e.geoLocation)throw TypeError(".ProtoElementsResponse.geoLocation: object expected");t.geoLocation=l.GeoLocation.fromObject(e.geoLocation)}if(e.lineItems){if(!Array.isArray(e.lineItems))throw TypeError(".ProtoElementsResponse.lineItems: array expected");for(t.lineItems=[],i=0;i<e.lineItems.length;++i){if("object"!=typeof e.lineItems[i])throw TypeError(".ProtoElementsResponse.lineItems: object expected");t.lineItems[i]=l.ProtoLineItem.fromObject(e.lineItems[i])}}if(e.cookieSyncUrls){if("object"!=typeof e.cookieSyncUrls)throw TypeError(".ProtoElementsResponse.cookieSyncUrls: object expected");t.cookieSyncUrls={};for(var r=Object.keys(e.cookieSyncUrls),i=0;i<r.length;++i)t.cookieSyncUrls[r[i]]=String(e.cookieSyncUrls[r[i]])}if(null!=e.explorationMode&&(t.explorationMode=Boolean(e.explorationMode)),null!=e.supplyChain){if("object"!=typeof e.supplyChain)throw TypeError(".ProtoElementsResponse.supplyChain: object expected");t.supplyChain=l.ProtoSupplyChain.fromObject(e.supplyChain)}if(null!=e.secondLevelDomain&&(t.secondLevelDomain=String(e.secondLevelDomain)),null!=e.userInformation){if("object"!=typeof e.userInformation)throw TypeError(".ProtoElementsResponse.userInformation: object expected");t.userInformation=l.ProtoUserInformation.fromObject(e.userInformation)}return null!=e.serverAb0&&(t.serverAb0=0|e.serverAb0),null!=e.serverAb1&&(t.serverAb1=0|e.serverAb1),null!=e.isSeoTraffic&&(t.isSeoTraffic=Boolean(e.isSeoTraffic)),t},k.toObject=function(e,t){var i,r={};if(((t=t||{}).arrays||t.defaults)&&(r.players=[],r.lineItems=[]),(t.objects||t.defaults)&&(r.cookieSyncUrls={}),t.defaults&&(r.errorMessage="",r.browser=null,r.geoLocation=null,r.explorationMode=!1,r.supplyChain=null,r.secondLevelDomain="",r.userInformation=null,r.serverAb0=0,r.serverAb1=0,r.isSeoTraffic=!1),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),e.players&&e.players.length){r.players=[];for(var s=0;s<e.players.length;++s)r.players[s]=l.ProtoElements.toObject(e.players[s],t)}if(null!=e.browser&&e.hasOwnProperty("browser")&&(r.browser=l.Browser.toObject(e.browser,t)),null!=e.geoLocation&&e.hasOwnProperty("geoLocation")&&(r.geoLocation=l.GeoLocation.toObject(e.geoLocation,t)),e.lineItems&&e.lineItems.length)for(r.lineItems=[],s=0;s<e.lineItems.length;++s)r.lineItems[s]=l.ProtoLineItem.toObject(e.lineItems[s],t);if(e.cookieSyncUrls&&(i=Object.keys(e.cookieSyncUrls)).length)for(r.cookieSyncUrls={},s=0;s<i.length;++s)r.cookieSyncUrls[i[s]]=e.cookieSyncUrls[i[s]];return null!=e.explorationMode&&e.hasOwnProperty("explorationMode")&&(r.explorationMode=e.explorationMode),null!=e.supplyChain&&e.hasOwnProperty("supplyChain")&&(r.supplyChain=l.ProtoSupplyChain.toObject(e.supplyChain,t)),null!=e.secondLevelDomain&&e.hasOwnProperty("secondLevelDomain")&&(r.secondLevelDomain=e.secondLevelDomain),null!=e.userInformation&&e.hasOwnProperty("userInformation")&&(r.userInformation=l.ProtoUserInformation.toObject(e.userInformation,t)),null!=e.serverAb0&&e.hasOwnProperty("serverAb0")&&(r.serverAb0=e.serverAb0),null!=e.serverAb1&&e.hasOwnProperty("serverAb1")&&(r.serverAb1=e.serverAb1),null!=e.isSeoTraffic&&e.hasOwnProperty("isSeoTraffic")&&(r.isSeoTraffic=e.isSeoTraffic),r},k.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},k),l.ProtoCreativeTypeEnum=(r={},(i=Object.create(r))[r[0]="ThirdParty"]=0,i[r[1]="MediaFile"]=1,i[r[2]="Rtb"]=2,i[r[3]="External"]=3,i[r[4]="HeaderBidder"]=4,i[r[7]="Tam"]=7,i),l.ProtoResetCapTypeEnum=(r={},(i=Object.create(r))[r[0]="TimeCapping"]=0,i[r[1]="ContentCapping"]=1,i[r[2]="OpportunityCapping"]=2,i),l.ProtoAdSlotsEnum=(r={},(i=Object.create(r))[r[0]="PreRoll"]=0,i[r[1]="MidRoll"]=1,i[r[2]="PostRoll"]=2,i),l.ProtoLineItemPriority=(r={},(i=Object.create(r))[r[0]="House"]=0,i[r[1]="Default"]=1,i[r[2]="Preferred"]=2,i[r[3]="Top"]=3,i),l.ProtoAdSkipMode=(r={},(i=Object.create(r))[r[0]="IfLongerThan31Sec"]=0,i[r[1]="Always"]=1,i[r[2]="Never"]=2,i[r[3]="NotAplicable"]=3,i),l.ProtoAdType=(r={},(i=Object.create(r))[r[0]="Video"]=0,i[r[1]="Overlay"]=1,i),l.ProtoChoiceCriteriaEnum=(r={},(i=Object.create(r))[r[0]="Only"]=0,i[r[1]="Except"]=1,i),l.ProtoLineItemAdBreakTypeEnum=(r={},(i=Object.create(r))[r[1]="All"]=1,i[r[2]="SingleAd"]=2,i[r[3]="AdPod"]=3,i),l.ProtoLineItemTargetingTypeEnum=(r={},(i=Object.create(r))[r[0]="Only"]=0,i[r[1]="Except"]=1,i),l.ProtoLineItemAdSlotTargetingTypeEnum=(r={},(i=Object.create(r))[r[1]="SpecificSlots"]=1,i[r[2]="Interval"]=2,i),l.ProtoLineItemPauseAdOutOfViewEnum=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Strict"]=1,i),l.ProtoLineItemContextualTargetingEnum=(r={},(i=Object.create(r))[r[0]="IncludeAny"]=0,i[r[1]="IncludeAll"]=1,i[r[2]="ExcludeAny"]=2,i[r[3]="ExcludeAll"]=3,i),l.ProtoSizeChoiceCriteriaEnum=(r={},(i=Object.create(r))[r[0]="GreaterThan"]=0,i[r[1]="SmallerThan"]=1,i[r[2]="Between"]=2,i),l.ProtoLineItemAdBreakTargeting=(T.prototype.adRollType=0,T.prototype.adBreakTypeEnum=1,T.encode=function(e,t){return t=t||n.create(),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&t.uint32(8).int32(e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&t.uint32(16).int32(e.adBreakTypeEnum),t},T.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdBreakTargeting;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.adRollType=e.int32();break;case 2:r.adBreakTypeEnum=e.int32();break;default:e.skipType(7&s)}}return r},T.fromObject=function(e){if(e instanceof l.ProtoLineItemAdBreakTargeting)return e;var t=new l.ProtoLineItemAdBreakTargeting;switch(e.adRollType){case"None":case 0:t.adRollType=0;break;case"PreRoll":case 1:t.adRollType=1;break;case"MidRoll":case 2:t.adRollType=2;break;case"PostRoll":case 3:t.adRollType=3}switch(e.adBreakTypeEnum){case"All":case 1:t.adBreakTypeEnum=1;break;case"SingleAd":case 2:t.adBreakTypeEnum=2;break;case"AdPod":case 3:t.adBreakTypeEnum=3}return t},T.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.adRollType=t.enums===String?"None":0,i.adBreakTypeEnum=t.enums===String?"All":1),null!=e.adRollType&&e.hasOwnProperty("adRollType")&&(i.adRollType=t.enums===String?l.ProtoAdBreakTypeEnum[e.adRollType]:e.adRollType),null!=e.adBreakTypeEnum&&e.hasOwnProperty("adBreakTypeEnum")&&(i.adBreakTypeEnum=t.enums===String?l.ProtoLineItemAdBreakTypeEnum[e.adBreakTypeEnum]:e.adBreakTypeEnum),i},T.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},T),l.ProtoLineItemAdPodTargeting=(I.prototype.targetingType=0,I.prototype.adSlotTargetingType=1,I.prototype.adSlotPositions=a.emptyArray,I.encode=function(e,t){if(t=t||n.create(),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&t.uint32(8).int32(e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&t.uint32(16).int32(e.adSlotTargetingType),null!=e.adSlotPositions&&e.adSlotPositions.length){t.uint32(26).fork();for(var i=0;i<e.adSlotPositions.length;++i)t.int32(e.adSlotPositions[i]);t.ldelim()}return t},I.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdPodTargeting;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.targetingType=e.int32();break;case 2:r.adSlotTargetingType=e.int32();break;case 3:if(r.adSlotPositions&&r.adSlotPositions.length||(r.adSlotPositions=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.adSlotPositions.push(e.int32());else r.adSlotPositions.push(e.int32());break;default:e.skipType(7&s)}}return r},I.fromObject=function(e){if(e instanceof l.ProtoLineItemAdPodTargeting)return e;var t=new l.ProtoLineItemAdPodTargeting;switch(e.targetingType){case"Only":case 0:t.targetingType=0;break;case"Except":case 1:t.targetingType=1}switch(e.adSlotTargetingType){case"SpecificSlots":case 1:t.adSlotTargetingType=1;break;case"Interval":case 2:t.adSlotTargetingType=2}if(e.adSlotPositions){if(!Array.isArray(e.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");t.adSlotPositions=[];for(var i=0;i<e.adSlotPositions.length;++i)t.adSlotPositions[i]=0|e.adSlotPositions[i]}return t},I.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adSlotPositions=[]),t.defaults&&(i.targetingType=t.enums===String?"Only":0,i.adSlotTargetingType=t.enums===String?"SpecificSlots":1),null!=e.targetingType&&e.hasOwnProperty("targetingType")&&(i.targetingType=t.enums===String?l.ProtoLineItemTargetingTypeEnum[e.targetingType]:e.targetingType),null!=e.adSlotTargetingType&&e.hasOwnProperty("adSlotTargetingType")&&(i.adSlotTargetingType=t.enums===String?l.ProtoLineItemAdSlotTargetingTypeEnum[e.adSlotTargetingType]:e.adSlotTargetingType),e.adSlotPositions&&e.adSlotPositions.length){i.adSlotPositions=[];for(var r=0;r<e.adSlotPositions.length;++r)i.adSlotPositions[r]=e.adSlotPositions[r]}return i},I.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},I),l.ProtoLineItemAdBreakSettings=(S.prototype.adBreakTargeting=a.emptyArray,S.prototype.adPodTargeting=null,S.encode=function(e,t){if(t=t||n.create(),null!=e.adBreakTargeting&&e.adBreakTargeting.length)for(var i=0;i<e.adBreakTargeting.length;++i)l.ProtoLineItemAdBreakTargeting.encode(e.adBreakTargeting[i],t.uint32(10).fork()).ldelim();return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&l.ProtoLineItemAdPodTargeting.encode(e.adPodTargeting,t.uint32(18).fork()).ldelim(),t},S.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItemAdBreakSettings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.adBreakTargeting&&r.adBreakTargeting.length||(r.adBreakTargeting=[]),r.adBreakTargeting.push(l.ProtoLineItemAdBreakTargeting.decode(e,e.uint32()));break;case 2:r.adPodTargeting=l.ProtoLineItemAdPodTargeting.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},S.fromObject=function(e){if(e instanceof l.ProtoLineItemAdBreakSettings)return e;var t=new l.ProtoLineItemAdBreakSettings;if(e.adBreakTargeting){if(!Array.isArray(e.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");t.adBreakTargeting=[];for(var i=0;i<e.adBreakTargeting.length;++i){if("object"!=typeof e.adBreakTargeting[i])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");t.adBreakTargeting[i]=l.ProtoLineItemAdBreakTargeting.fromObject(e.adBreakTargeting[i])}}if(null!=e.adPodTargeting){if("object"!=typeof e.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");t.adPodTargeting=l.ProtoLineItemAdPodTargeting.fromObject(e.adPodTargeting)}return t},S.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.adBreakTargeting=[]),t.defaults&&(i.adPodTargeting=null),e.adBreakTargeting&&e.adBreakTargeting.length){i.adBreakTargeting=[];for(var r=0;r<e.adBreakTargeting.length;++r)i.adBreakTargeting[r]=l.ProtoLineItemAdBreakTargeting.toObject(e.adBreakTargeting[r],t)}return null!=e.adPodTargeting&&e.hasOwnProperty("adPodTargeting")&&(i.adPodTargeting=l.ProtoLineItemAdPodTargeting.toObject(e.adPodTargeting,t)),i},S.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},S),l.ProtoLineItem=(P.prototype.publisherLineItemId="",P.prototype.advertiserLineItemId="",P.prototype.adTag="",P.prototype.creativeType=0,P.prototype.sound=!1,P.prototype.viewability=!1,P.prototype.impressionTimeSpent=0,P.prototype.vendorId="",P.prototype.trackers=a.emptyArray,P.prototype.duration=0,P.prototype.renditions=a.emptyArray,P.prototype.mediaCreativeId="",P.prototype.ignoreFilledRequests=!1,P.prototype.requestCap=3,P.prototype.impressionCap=0,P.prototype.successRate=0,P.prototype.lineItemPriority=0,P.prototype.headerBidderBids="",P.prototype.headerBidderTimeout=0,P.prototype.mediaCreativeClickUrl="",P.prototype.resetRequestsCapTime=60,P.prototype.resetImpressionsCapTime=60,P.prototype.resetCapType=0,P.prototype.creativeHlsFileName="",P.prototype.timeBetweenRequests=0,P.prototype.skipMode=0,P.prototype.mediaIdTargeting=null,P.prototype.mediaKeywordsTargeting=null,P.prototype.mediaLanguageTargeting=null,P.prototype.adType=0,P.prototype.overlayTime=30,P.prototype.floorPrice=0,P.prototype.adBreakSettings=null,P.prototype.floorPrices=a.emptyArray,P.prototype.bidRate=0,P.prototype.pauseAdOutOfView=0,P.prototype.moatTrackingEnabled=!1,P.prototype.cnxCreativeId="",P.prototype.blockedDomainsRevisionNumber=0,P.prototype.advertiserContextualTargeting=a.emptyArray,P.prototype.publisherContextualTargeting=a.emptyArray,P.prototype.playerSizeTargetings=null,P.prototype.playerSize="",P.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoLineItem;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.publisherLineItemId=e.string();break;case 2:r.advertiserLineItemId=e.string();break;case 3:r.adTag=e.string();break;case 4:r.creativeType=e.int32();break;case 6:r.sound=e.bool();break;case 7:r.viewability=e.bool();break;case 9:r.impressionTimeSpent=e.int32();break;case 10:r.vendorId=e.string();break;case 12:r.trackers&&r.trackers.length||(r.trackers=[]),r.trackers.push(l.CreativeTrackerViewModel.decode(e,e.uint32()));break;case 13:r.duration=e.int32();break;case 14:r.renditions&&r.renditions.length||(r.renditions=[]),r.renditions.push(l.ProtoRendition.decode(e,e.uint32()));break;case 15:r.mediaCreativeId=e.string();break;case 16:r.ignoreFilledRequests=e.bool();break;case 17:r.requestCap=e.int32();break;case 18:r.impressionCap=e.int32();break;case 19:r.successRate=e.double();break;case 20:r.lineItemPriority=e.int32();break;case 21:r.headerBidderBids=e.string();break;case 22:r.headerBidderTimeout=e.int32();break;case 23:r.mediaCreativeClickUrl=e.string();break;case 24:r.resetRequestsCapTime=e.int32();break;case 25:r.resetImpressionsCapTime=e.int32();break;case 26:r.resetCapType=e.int32();break;case 27:r.creativeHlsFileName=e.string();break;case 28:r.timeBetweenRequests=e.int32();break;case 29:r.skipMode=e.int32();break;case 30:r.mediaIdTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 31:r.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 32:r.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.decode(e,e.uint32());break;case 33:r.adType=e.int32();break;case 34:r.overlayTime=e.int32();break;case 35:r.floorPrice=e.double();break;case 36:r.adBreakSettings=l.ProtoLineItemAdBreakSettings.decode(e,e.uint32());break;case 38:if(r.floorPrices&&r.floorPrices.length||(r.floorPrices=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.floorPrices.push(e.double());else r.floorPrices.push(e.double());break;case 39:r.bidRate=e.double();break;case 40:r.pauseAdOutOfView=e.int32();break;case 41:r.moatTrackingEnabled=e.bool();break;case 42:r.cnxCreativeId=e.string();break;case 44:r.blockedDomainsRevisionNumber=e.int32();break;case 45:r.advertiserContextualTargeting&&r.advertiserContextualTargeting.length||(r.advertiserContextualTargeting=[]),r.advertiserContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 46:r.publisherContextualTargeting&&r.publisherContextualTargeting.length||(r.publisherContextualTargeting=[]),r.publisherContextualTargeting.push(l.ProtoContextualTargetingCaseModel.decode(e,e.uint32()));break;case 47:r.playerSizeTargetings=l.ProtoPlayerSizeTargetings.decode(e,e.uint32());break;case 101:r.playerSize=e.string();break;default:e.skipType(7&s)}}return r},P.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.trackers=[],i.renditions=[],i.floorPrices=[],i.advertiserContextualTargeting=[],i.publisherContextualTargeting=[]),t.defaults&&(i.publisherLineItemId="",i.advertiserLineItemId="",i.adTag="",i.creativeType=t.enums===String?"ThirdParty":0,i.sound=!1,i.viewability=!1,i.impressionTimeSpent=0,i.vendorId="",i.duration=0,i.mediaCreativeId="",i.ignoreFilledRequests=!1,i.requestCap=3,i.impressionCap=0,i.successRate=0,i.lineItemPriority=t.enums===String?"House":0,i.headerBidderBids="",i.headerBidderTimeout=0,i.mediaCreativeClickUrl="",i.resetRequestsCapTime=60,i.resetImpressionsCapTime=60,i.resetCapType=t.enums===String?"TimeCapping":0,i.creativeHlsFileName="",i.timeBetweenRequests=0,i.skipMode=t.enums===String?"IfLongerThan31Sec":0,i.mediaIdTargeting=null,i.mediaKeywordsTargeting=null,i.mediaLanguageTargeting=null,i.adType=t.enums===String?"Video":0,i.overlayTime=30,i.floorPrice=0,i.adBreakSettings=null,i.bidRate=0,i.pauseAdOutOfView=t.enums===String?"Default":0,i.moatTrackingEnabled=!1,i.cnxCreativeId="",i.blockedDomainsRevisionNumber=0,i.playerSizeTargetings=null,i.playerSize=""),null!=e.publisherLineItemId&&e.hasOwnProperty("publisherLineItemId")&&(i.publisherLineItemId=e.publisherLineItemId),null!=e.advertiserLineItemId&&e.hasOwnProperty("advertiserLineItemId")&&(i.advertiserLineItemId=e.advertiserLineItemId),null!=e.adTag&&e.hasOwnProperty("adTag")&&(i.adTag=e.adTag),null!=e.creativeType&&e.hasOwnProperty("creativeType")&&(i.creativeType=t.enums===String?l.ProtoCreativeTypeEnum[e.creativeType]:e.creativeType),null!=e.sound&&e.hasOwnProperty("sound")&&(i.sound=e.sound),null!=e.viewability&&e.hasOwnProperty("viewability")&&(i.viewability=e.viewability),null!=e.impressionTimeSpent&&e.hasOwnProperty("impressionTimeSpent")&&(i.impressionTimeSpent=e.impressionTimeSpent),null!=e.vendorId&&e.hasOwnProperty("vendorId")&&(i.vendorId=e.vendorId),e.trackers&&e.trackers.length){i.trackers=[];for(var r=0;r<e.trackers.length;++r)i.trackers[r]=l.CreativeTrackerViewModel.toObject(e.trackers[r],t)}if(null!=e.duration&&e.hasOwnProperty("duration")&&(i.duration=e.duration),e.renditions&&e.renditions.length)for(i.renditions=[],r=0;r<e.renditions.length;++r)i.renditions[r]=l.ProtoRendition.toObject(e.renditions[r],t);if(null!=e.mediaCreativeId&&e.hasOwnProperty("mediaCreativeId")&&(i.mediaCreativeId=e.mediaCreativeId),null!=e.ignoreFilledRequests&&e.hasOwnProperty("ignoreFilledRequests")&&(i.ignoreFilledRequests=e.ignoreFilledRequests),null!=e.requestCap&&e.hasOwnProperty("requestCap")&&(i.requestCap=e.requestCap),null!=e.impressionCap&&e.hasOwnProperty("impressionCap")&&(i.impressionCap=e.impressionCap),null!=e.successRate&&e.hasOwnProperty("successRate")&&(i.successRate=t.json&&!isFinite(e.successRate)?String(e.successRate):e.successRate),null!=e.lineItemPriority&&e.hasOwnProperty("lineItemPriority")&&(i.lineItemPriority=t.enums===String?l.ProtoLineItemPriority[e.lineItemPriority]:e.lineItemPriority),null!=e.headerBidderBids&&e.hasOwnProperty("headerBidderBids")&&(i.headerBidderBids=e.headerBidderBids),null!=e.headerBidderTimeout&&e.hasOwnProperty("headerBidderTimeout")&&(i.headerBidderTimeout=e.headerBidderTimeout),null!=e.mediaCreativeClickUrl&&e.hasOwnProperty("mediaCreativeClickUrl")&&(i.mediaCreativeClickUrl=e.mediaCreativeClickUrl),null!=e.resetRequestsCapTime&&e.hasOwnProperty("resetRequestsCapTime")&&(i.resetRequestsCapTime=e.resetRequestsCapTime),null!=e.resetImpressionsCapTime&&e.hasOwnProperty("resetImpressionsCapTime")&&(i.resetImpressionsCapTime=e.resetImpressionsCapTime),null!=e.resetCapType&&e.hasOwnProperty("resetCapType")&&(i.resetCapType=t.enums===String?l.ProtoResetCapTypeEnum[e.resetCapType]:e.resetCapType),null!=e.creativeHlsFileName&&e.hasOwnProperty("creativeHlsFileName")&&(i.creativeHlsFileName=e.creativeHlsFileName),null!=e.timeBetweenRequests&&e.hasOwnProperty("timeBetweenRequests")&&(i.timeBetweenRequests=e.timeBetweenRequests),null!=e.skipMode&&e.hasOwnProperty("skipMode")&&(i.skipMode=t.enums===String?l.ProtoAdSkipMode[e.skipMode]:e.skipMode),null!=e.mediaIdTargeting&&e.hasOwnProperty("mediaIdTargeting")&&(i.mediaIdTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaIdTargeting,t)),null!=e.mediaKeywordsTargeting&&e.hasOwnProperty("mediaKeywordsTargeting")&&(i.mediaKeywordsTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaKeywordsTargeting,t)),null!=e.mediaLanguageTargeting&&e.hasOwnProperty("mediaLanguageTargeting")&&(i.mediaLanguageTargeting=l.ProtoTargetingChoiceModel.toObject(e.mediaLanguageTargeting,t)),null!=e.adType&&e.hasOwnProperty("adType")&&(i.adType=t.enums===String?l.ProtoAdType[e.adType]:e.adType),null!=e.overlayTime&&e.hasOwnProperty("overlayTime")&&(i.overlayTime=e.overlayTime),null!=e.floorPrice&&e.hasOwnProperty("floorPrice")&&(i.floorPrice=t.json&&!isFinite(e.floorPrice)?String(e.floorPrice):e.floorPrice),null!=e.adBreakSettings&&e.hasOwnProperty("adBreakSettings")&&(i.adBreakSettings=l.ProtoLineItemAdBreakSettings.toObject(e.adBreakSettings,t)),e.floorPrices&&e.floorPrices.length)for(i.floorPrices=[],r=0;r<e.floorPrices.length;++r)i.floorPrices[r]=t.json&&!isFinite(e.floorPrices[r])?String(e.floorPrices[r]):e.floorPrices[r];if(null!=e.bidRate&&e.hasOwnProperty("bidRate")&&(i.bidRate=t.json&&!isFinite(e.bidRate)?String(e.bidRate):e.bidRate),null!=e.pauseAdOutOfView&&e.hasOwnProperty("pauseAdOutOfView")&&(i.pauseAdOutOfView=t.enums===String?l.ProtoLineItemPauseAdOutOfViewEnum[e.pauseAdOutOfView]:e.pauseAdOutOfView),null!=e.moatTrackingEnabled&&e.hasOwnProperty("moatTrackingEnabled")&&(i.moatTrackingEnabled=e.moatTrackingEnabled),null!=e.cnxCreativeId&&e.hasOwnProperty("cnxCreativeId")&&(i.cnxCreativeId=e.cnxCreativeId),null!=e.blockedDomainsRevisionNumber&&e.hasOwnProperty("blockedDomainsRevisionNumber")&&(i.blockedDomainsRevisionNumber=e.blockedDomainsRevisionNumber),e.advertiserContextualTargeting&&e.advertiserContextualTargeting.length)for(i.advertiserContextualTargeting=[],r=0;r<e.advertiserContextualTargeting.length;++r)i.advertiserContextualTargeting[r]=l.ProtoContextualTargetingCaseModel.toObject(e.advertiserContextualTargeting[r],t);if(e.publisherContextualTargeting&&e.publisherContextualTargeting.length)for(i.publisherContextualTargeting=[],r=0;r<e.publisherContextualTargeting.length;++r)i.publisherContextualTargeting[r]=l.ProtoContextualTargetingCaseModel.toObject(e.publisherContextualTargeting[r],t);return null!=e.playerSizeTargetings&&e.hasOwnProperty("playerSizeTargetings")&&(i.playerSizeTargetings=l.ProtoPlayerSizeTargetings.toObject(e.playerSizeTargetings,t)),null!=e.playerSize&&e.hasOwnProperty("playerSize")&&(i.playerSize=e.playerSize),i},P),l.ProtoTargetingChoiceModel=(v.prototype.choiceCriteria=0,v.prototype.items=a.emptyArray,v.encode=function(e,t){if(t=t||n.create(),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&t.uint32(8).int32(e.choiceCriteria),null!=e.items&&e.items.length)for(var i=0;i<e.items.length;++i)t.uint32(18).string(e.items[i]);return t},v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoTargetingChoiceModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.choiceCriteria=e.int32();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(e.string());break;default:e.skipType(7&s)}}return r},v.fromObject=function(e){if(e instanceof l.ProtoTargetingChoiceModel)return e;var t=new l.ProtoTargetingChoiceModel;switch(e.choiceCriteria){case"Only":case 0:t.choiceCriteria=0;break;case"Except":case 1:t.choiceCriteria=1}if(e.items){if(!Array.isArray(e.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i)t.items[i]=String(e.items[i])}return t},v.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.choiceCriteria=t.enums===String?"Only":0),null!=e.choiceCriteria&&e.hasOwnProperty("choiceCriteria")&&(i.choiceCriteria=t.enums===String?l.ProtoChoiceCriteriaEnum[e.choiceCriteria]:e.choiceCriteria),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=e.items[r]}return i},v.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},v),l.ProtoContextualTargetingCaseModel=(b.prototype.filters=a.emptyArray,b.encode=function(e,t){if(t=t||n.create(),null!=e.filters&&e.filters.length)for(var i=0;i<e.filters.length;++i)l.ProtoContextualTargetingFilterModel.encode(e.filters[i],t.uint32(10).fork()).ldelim();return t},b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoContextualTargetingCaseModel;e.pos<i;){var s=e.uint32();s>>>3==1?(r.filters&&r.filters.length||(r.filters=[]),r.filters.push(l.ProtoContextualTargetingFilterModel.decode(e,e.uint32()))):e.skipType(7&s)}return r},b.fromObject=function(e){if(e instanceof l.ProtoContextualTargetingCaseModel)return e;var t=new l.ProtoContextualTargetingCaseModel;if(e.filters){if(!Array.isArray(e.filters))throw TypeError(".ProtoContextualTargetingCaseModel.filters: array expected");t.filters=[];for(var i=0;i<e.filters.length;++i){if("object"!=typeof e.filters[i])throw TypeError(".ProtoContextualTargetingCaseModel.filters: object expected");t.filters[i]=l.ProtoContextualTargetingFilterModel.fromObject(e.filters[i])}}return t},b.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.filters=[]),e.filters&&e.filters.length){i.filters=[];for(var r=0;r<e.filters.length;++r)i.filters[r]=l.ProtoContextualTargetingFilterModel.toObject(e.filters[r],t)}return i},b.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},b),l.ProtoContextualTargetingFilterModel=(y.prototype.type=0,y.prototype.items=a.emptyArray,y.encode=function(e,t){if(t=t||n.create(),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(8).int32(e.type),null!=e.items&&e.items.length)for(var i=0;i<e.items.length;++i)t.uint32(18).string(e.items[i]);return t},y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoContextualTargetingFilterModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.items&&r.items.length||(r.items=[]),r.items.push(e.string());break;default:e.skipType(7&s)}}return r},y.fromObject=function(e){if(e instanceof l.ProtoContextualTargetingFilterModel)return e;var t=new l.ProtoContextualTargetingFilterModel;switch(e.type){case"IncludeAny":case 0:t.type=0;break;case"IncludeAll":case 1:t.type=1;break;case"ExcludeAny":case 2:t.type=2;break;case"ExcludeAll":case 3:t.type=3}if(e.items){if(!Array.isArray(e.items))throw TypeError(".ProtoContextualTargetingFilterModel.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i)t.items[i]=String(e.items[i])}return t},y.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.items=[]),t.defaults&&(i.type=t.enums===String?"IncludeAny":0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoLineItemContextualTargetingEnum[e.type]:e.type),e.items&&e.items.length){i.items=[];for(var r=0;r<e.items.length;++r)i.items[r]=e.items[r]}return i},y.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},y),l.ProtoPlayerSizeTargetings=(f.prototype.sizeChoiceCriteria=0,f.prototype.minWidth=0,f.prototype.maxWidth=0,f.encode=function(e,t){return t=t||n.create(),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&t.uint32(8).int32(e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&t.uint32(16).int32(e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&t.uint32(24).int32(e.maxWidth),t},f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoPlayerSizeTargetings;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.sizeChoiceCriteria=e.int32();break;case 2:r.minWidth=e.int32();break;case 3:r.maxWidth=e.int32();break;default:e.skipType(7&s)}}return r},f.fromObject=function(e){if(e instanceof l.ProtoPlayerSizeTargetings)return e;var t=new l.ProtoPlayerSizeTargetings;switch(e.sizeChoiceCriteria){case"GreaterThan":case 0:t.sizeChoiceCriteria=0;break;case"SmallerThan":case 1:t.sizeChoiceCriteria=1;break;case"Between":case 2:t.sizeChoiceCriteria=2}return null!=e.minWidth&&(t.minWidth=0|e.minWidth),null!=e.maxWidth&&(t.maxWidth=0|e.maxWidth),t},f.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.sizeChoiceCriteria=t.enums===String?"GreaterThan":0,i.minWidth=0,i.maxWidth=0),null!=e.sizeChoiceCriteria&&e.hasOwnProperty("sizeChoiceCriteria")&&(i.sizeChoiceCriteria=t.enums===String?l.ProtoSizeChoiceCriteriaEnum[e.sizeChoiceCriteria]:e.sizeChoiceCriteria),null!=e.minWidth&&e.hasOwnProperty("minWidth")&&(i.minWidth=e.minWidth),null!=e.maxWidth&&e.hasOwnProperty("maxWidth")&&(i.maxWidth=e.maxWidth),i},f.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},f),l.ProtoTrackerType=(r={},(i=Object.create(r))[r[0]="Image"]=0,i[r[1]="Javascript"]=1,i),l.ProtoTrackerTriggerType=(r={},(i=Object.create(r))[r[0]="Impression"]=0,i[r[1]="Complete25Pc"]=1,i[r[2]="Complete50Pc"]=2,i[r[3]="Complete75Pc"]=3,i[r[4]="ViewCompletion"]=4,i[r[5]="VideoClick"]=5,i[r[6]="Pause"]=6,i[r[7]="Resume"]=7,i[r[8]="Mute"]=8,i[r[9]="Unmute"]=9,i),l.CreativeTrackerViewModel=(m.prototype.type=0,m.prototype.trigger=0,m.prototype.url="",m.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.CreativeTrackerViewModel;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.type=e.int32();break;case 2:r.trigger=e.int32();break;case 3:r.url=e.string();break;default:e.skipType(7&s)}}return r},m.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.type=t.enums===String?"Image":0,i.trigger=t.enums===String?"Impression":0,i.url=""),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.ProtoTrackerType[e.type]:e.type),null!=e.trigger&&e.hasOwnProperty("trigger")&&(i.trigger=t.enums===String?l.ProtoTrackerTriggerType[e.trigger]:e.trigger),null!=e.url&&e.hasOwnProperty("url")&&(i.url=e.url),i},m),l.ProtoRendition=(g.prototype.height=0,g.prototype.codec="",g.prototype.file="",g.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoRendition;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.height=e.int32();break;case 2:r.codec=e.string();break;case 3:r.file=e.string();break;default:e.skipType(7&s)}}return r},g.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.height=0,i.codec="",i.file=""),null!=e.height&&e.hasOwnProperty("height")&&(i.height=e.height),null!=e.codec&&e.hasOwnProperty("codec")&&(i.codec=e.codec),null!=e.file&&e.hasOwnProperty("file")&&(i.file=e.file),i},g),l.ProtoPlayerPlaybackModeEnum=(r={},(i=Object.create(r))[r[0]="Autoplay"]=0,i[r[1]="ScrollToPlay"]=1,i[r[2]="ClickToPlay"]=2,i),l.ProtoPlayerCloseButtonMode=(r={},(i=Object.create(r))[r[0]="Off"]=0,i[r[1]="OnHover"]=1,i[r[2]="OnHoverAfterFirstAd"]=2,i[r[3]="AlwaysOn"]=3,i),l.ProtoPlayerFloatingMode=(r={},(i=Object.create(r))[r[0]="Off"]=0,i[r[1]="OnPageLoad"]=1,i[r[2]="AfterInView"]=2,i[r[3]="Always"]=3,i),l.ProtoPlayerSoundMode=(r={},(i=Object.create(r))[r[0]="Mute"]=0,i[r[1]="On"]=1,i[r[2]="Hover"]=2,i),l.ProtoPlayerInsertMode=(r={},(i=Object.create(r))[r[0]="WithinContainer"]=0,i[r[1]="BeforeContainer"]=1,i[r[2]="AfterContainer"]=2,i[r[3]="ReplaceContainer"]=3,i[r[4]="HideContainer"]=4,i),l.ProtoAdViewabilityPolicy=(r={},(i=Object.create(r))[r[0]="Default"]=0,i[r[1]="Strict"]=1,i),l.ProtoSharingDestination=(r={},(i=Object.create(r))[r[0]="Facebook"]=0,i[r[1]="Twitter"]=1,i[r[2]="LinkedIn"]=2,i),l.ProtoFloatingFixedPositionMode=(r={},(i=Object.create(r))[r[0]="Page"]=0,i[r[1]="Element"]=1,i),l.ProtoPositionMode=(r={},(i=Object.create(r))[r[0]="BottomRight"]=0,i[r[1]="BottomLeft"]=1,i[r[2]="TopRight"]=2,i[r[3]="TopLeft"]=3,i),l.ProtoAdPlaybackMode=(r={},(i=Object.create(r))[r[0]="Autoplay"]=0,i[r[1]="ScrollToPlay"]=1,i),l.ProtoFloatingAppendLocationEnum=(r={},(i=Object.create(r))[r[0]="Above"]=0,i[r[1]="Below"]=1,i[r[2]="Within"]=2,i),l.ProtoPlayerAdSkippability=(r={},(i=Object.create(r))[r[0]="IfLongerThan31Sec"]=0,i[r[1]="Always"]=1,i[r[2]="NoRestrictions"]=2,i),l.ProtoVideoQuality=(r={},(i=Object.create(r))[r[0]="Auto"]=0,i[r[1]="High1080p"]=1,i[r[2]="High720p"]=2,i[r[3]="Medium360p"]=3,i),l.ProtoImplementationType=(r={},(i=Object.create(r))[r[0]="Web"]=0,i[r[1]="Amp"]=1,i),l.ProtoAdBreakTypeEnum=(r={},(i=Object.create(r))[r[0]="None"]=0,i[r[1]="PreRoll"]=1,i[r[2]="MidRoll"]=2,i[r[3]="PostRoll"]=3,i),l.ProtoAdSlotAdTypeEnum=(r={},(i=Object.create(r))[r[0]="SingleAd"]=0,i[r[1]="AdPod"]=1,i),l.ProtoDeviceType=(r={},(i=Object.create(r))[r[0]="Desktop"]=0,i[r[1]="Smartphone"]=1,i[r[2]="Tablet"]=2,i[r[3]="GameConsole"]=3,i[r[4]="SmartTV"]=4,i[r[5]="WearableComputer"]=5,i[r[6]="PDA"]=6,i[r[7]="Unrecognized"]=7,i),l.Browser=(p.prototype.browserVersion="",p.prototype.browserType="",p.prototype.osCode="",p.prototype.device=0,p.encode=function(e,t){return t=t||n.create(),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(10).string(e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&t.uint32(18).string(e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&t.uint32(26).string(e.osCode),null!=e.device&&e.hasOwnProperty("device")&&t.uint32(32).int32(e.device),t},p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.Browser;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.browserVersion=e.string();break;case 2:r.browserType=e.string();break;case 3:r.osCode=e.string();break;case 4:r.device=e.int32();break;default:e.skipType(7&s)}}return r},p.fromObject=function(e){if(e instanceof l.Browser)return e;var t=new l.Browser;switch(null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.browserType&&(t.browserType=String(e.browserType)),null!=e.osCode&&(t.osCode=String(e.osCode)),e.device){case"Desktop":case 0:t.device=0;break;case"Smartphone":case 1:t.device=1;break;case"Tablet":case 2:t.device=2;break;case"GameConsole":case 3:t.device=3;break;case"SmartTV":case 4:t.device=4;break;case"WearableComputer":case 5:t.device=5;break;case"PDA":case 6:t.device=6;break;case"Unrecognized":case 7:t.device=7}return t},p.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.browserVersion="",i.browserType="",i.osCode="",i.device=t.enums===String?"Desktop":0),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.browserType&&e.hasOwnProperty("browserType")&&(i.browserType=e.browserType),null!=e.osCode&&e.hasOwnProperty("osCode")&&(i.osCode=e.osCode),null!=e.device&&e.hasOwnProperty("device")&&(i.device=t.enums===String?l.ProtoDeviceType[e.device]:e.device),i},p.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},p),l.GeoLocation=(u.prototype.countryGeoId=0,u.prototype.cityId=0,u.prototype.subdivisionId=0,u.prototype.dmaId=0,u.prototype.ip="",u.prototype.lat=0,u.prototype.lon=0,u.encode=function(e,t){return t=t||n.create(),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&t.uint32(8).int32(e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&t.uint32(16).int32(e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&t.uint32(24).int32(e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&t.uint32(32).int32(e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(42).string(e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&t.uint32(49).double(e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&t.uint32(57).double(e.lon),t},u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.GeoLocation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.countryGeoId=e.int32();break;case 2:r.cityId=e.int32();break;case 3:r.subdivisionId=e.int32();break;case 4:r.dmaId=e.int32();break;case 5:r.ip=e.string();break;case 6:r.lat=e.double();break;case 7:r.lon=e.double();break;default:e.skipType(7&s)}}return r},u.fromObject=function(e){if(e instanceof l.GeoLocation)return e;var t=new l.GeoLocation;return null!=e.countryGeoId&&(t.countryGeoId=0|e.countryGeoId),null!=e.cityId&&(t.cityId=0|e.cityId),null!=e.subdivisionId&&(t.subdivisionId=0|e.subdivisionId),null!=e.dmaId&&(t.dmaId=0|e.dmaId),null!=e.ip&&(t.ip=String(e.ip)),null!=e.lat&&(t.lat=Number(e.lat)),null!=e.lon&&(t.lon=Number(e.lon)),t},u.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.countryGeoId=0,i.cityId=0,i.subdivisionId=0,i.dmaId=0,i.ip="",i.lat=0,i.lon=0),null!=e.countryGeoId&&e.hasOwnProperty("countryGeoId")&&(i.countryGeoId=e.countryGeoId),null!=e.cityId&&e.hasOwnProperty("cityId")&&(i.cityId=e.cityId),null!=e.subdivisionId&&e.hasOwnProperty("subdivisionId")&&(i.subdivisionId=e.subdivisionId),null!=e.dmaId&&e.hasOwnProperty("dmaId")&&(i.dmaId=e.dmaId),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.lat&&e.hasOwnProperty("lat")&&(i.lat=t.json&&!isFinite(e.lat)?String(e.lat):e.lat),null!=e.lon&&e.hasOwnProperty("lon")&&(i.lon=t.json&&!isFinite(e.lon)?String(e.lon):e.lon),i},u.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},u),l.ProtoSupplyChain=(h.prototype.businessDomain="",h.prototype.supplyChainId="",h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoSupplyChain;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.businessDomain=e.string();break;case 3:r.supplyChainId=e.string();break;default:e.skipType(7&s)}}return r},h.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.businessDomain="",i.supplyChainId=""),null!=e.businessDomain&&e.hasOwnProperty("businessDomain")&&(i.businessDomain=e.businessDomain),null!=e.supplyChainId&&e.hasOwnProperty("supplyChainId")&&(i.supplyChainId=e.supplyChainId),i},h),l.ProtoUserInformation=(c.prototype.userId="",c.prototype.lookupId="",c.prototype.lookupResponseCode=0,c.prototype.callFraudSensor=!1,c.prototype.publisherAdsTxt="",c.encode=function(e,t){return t=t||n.create(),null!=e.userId&&e.hasOwnProperty("userId")&&t.uint32(10).string(e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&t.uint32(26).string(e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&t.uint32(32).int32(e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&t.uint32(40).bool(e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&t.uint32(50).string(e.publisherAdsTxt),t},c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoUserInformation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:r.userId=e.string();break;case 3:r.lookupId=e.string();break;case 4:r.lookupResponseCode=e.int32();break;case 5:r.callFraudSensor=e.bool();break;case 6:r.publisherAdsTxt=e.string();break;default:e.skipType(7&s)}}return r},c.fromObject=function(e){if(e instanceof l.ProtoUserInformation)return e;var t=new l.ProtoUserInformation;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.lookupId&&(t.lookupId=String(e.lookupId)),null!=e.lookupResponseCode&&(t.lookupResponseCode=0|e.lookupResponseCode),null!=e.callFraudSensor&&(t.callFraudSensor=Boolean(e.callFraudSensor)),null!=e.publisherAdsTxt&&(t.publisherAdsTxt=String(e.publisherAdsTxt)),t},c.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.userId="",i.lookupId="",i.lookupResponseCode=0,i.callFraudSensor=!1,i.publisherAdsTxt=""),null!=e.userId&&e.hasOwnProperty("userId")&&(i.userId=e.userId),null!=e.lookupId&&e.hasOwnProperty("lookupId")&&(i.lookupId=e.lookupId),null!=e.lookupResponseCode&&e.hasOwnProperty("lookupResponseCode")&&(i.lookupResponseCode=e.lookupResponseCode),null!=e.callFraudSensor&&e.hasOwnProperty("callFraudSensor")&&(i.callFraudSensor=e.callFraudSensor),null!=e.publisherAdsTxt&&e.hasOwnProperty("publisherAdsTxt")&&(i.publisherAdsTxt=e.publisherAdsTxt),i},c.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},c),l.ProtoAdBreak=(d.prototype.types=a.emptyArray,d.prototype.maxAdPodDuration=0,d.prototype.maxAdSlotDuration=180,d.prototype.numberOfAdSlots=1,d.encode=function(e,t){if(t=t||n.create(),null!=e.types&&e.types.length){t.uint32(10).fork();for(var i=0;i<e.types.length;++i)t.int32(e.types[i]);t.ldelim()}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&t.uint32(16).int32(e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&t.uint32(24).int32(e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&t.uint32(32).int32(e.numberOfAdSlots),t},d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new l.ProtoAdBreak;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:if(r.types&&r.types.length||(r.types=[]),2==(7&s))for(var n=e.uint32()+e.pos;e.pos<n;)r.types.push(e.int32());else r.types.push(e.int32());break;case 2:r.maxAdPodDuration=e.int32();break;case 3:r.maxAdSlotDuration=e.int32();break;case 4:r.numberOfAdSlots=e.int32();break;default:e.skipType(7&s)}}return r},d.fromObject=function(e){if(e instanceof l.ProtoAdBreak)return e;var t=new l.ProtoAdBreak;if(e.types){if(!Array.isArray(e.types))throw TypeError(".ProtoAdBreak.types: array expected");t.types=[];for(var i=0;i<e.types.length;++i)switch(e.types[i]){default:case"None":case 0:t.types[i]=0;break;case"PreRoll":case 1:t.types[i]=1;break;case"MidRoll":case 2:t.types[i]=2;break;case"PostRoll":case 3:t.types[i]=3}}return null!=e.maxAdPodDuration&&(t.maxAdPodDuration=0|e.maxAdPodDuration),null!=e.maxAdSlotDuration&&(t.maxAdSlotDuration=0|e.maxAdSlotDuration),null!=e.numberOfAdSlots&&(t.numberOfAdSlots=0|e.numberOfAdSlots),t},d.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.types=[]),t.defaults&&(i.maxAdPodDuration=0,i.maxAdSlotDuration=180,i.numberOfAdSlots=1),e.types&&e.types.length){i.types=[];for(var r=0;r<e.types.length;++r)i.types[r]=t.enums===String?l.ProtoAdBreakTypeEnum[e.types[r]]:e.types[r]}return null!=e.maxAdPodDuration&&e.hasOwnProperty("maxAdPodDuration")&&(i.maxAdPodDuration=e.maxAdPodDuration),null!=e.maxAdSlotDuration&&e.hasOwnProperty("maxAdSlotDuration")&&(i.maxAdSlotDuration=e.maxAdSlotDuration),null!=e.numberOfAdSlots&&e.hasOwnProperty("numberOfAdSlots")&&(i.numberOfAdSlots=e.numberOfAdSlots),i},d.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},d),e.exports=l},function(e,t,i){"use strict";i.d(t,"j",function(){return r}),i.d(t,"k",function(){return s}),i.d(t,"i",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"g",function(){return a}),i.d(t,"h",function(){return l}),i.d(t,"b",function(){return d}),i.d(t,"f",function(){return c}),i.d(t,"c",function(){return h}),i.d(t,"e",function(){return u}),i.d(t,"a",function(){return p});const r="1.3.13-iab2343",s="1.3.13-iab2343",n="Connatix";var o,a,l,d,c,h,u,p;(t=o=o||{}).Generic="generic",t.Video="video",(t=a=a||{}).Click="click",t.InvitationAccept="invitationAccept",(t=l=l||{}).PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone",(t=d=d||{}).SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish",(t=c=c||{}).DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender",(t=h=h||{}).DefinedByJavascript="definedByJavaScript",t.Video="video",(t=u=u||{}).sessionError="sessionError",t.geometryChange="geometryChange",(t=p=p||{}).backgrounded="backgrounded",t.notFound="notFound"},function(e,t,i){"use strict";var r;i.d(t,"c",function(){return r}),i.d(t,"a",function(){return s}),i.d(t,"b",function(){return n}),(t=r=r||{}).Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82";const s="cnx_usr_storage",n=["1YNY"]},,function(e,t,i){"use strict";i.d(t,"a",function(){return r});class r{}r.MaxLogOverflow=1e3,r.maxLogOverflowCount={},r.logCount={},r.maxLogSent={},r.sessionId="",r.pageFocus=!1,r.incrementLogCount=e=>{r.logCount[e]?(++r.maxLogOverflowCount[e],++r.logCount[e]):(r.logCount[e]=1,r.maxLogOverflowCount[e]=1)},r.isMaxLog=(e,t)=>!!(r.logCount[e]&&r.logCount[e]>t),r.isMaxLogOverflow=e=>r.maxLogOverflowCount[e]>r.MaxLogOverflow&&(r.maxLogOverflowCount[e]=1,!0),r.setMaxLogSent=e=>{r.maxLogSent[e]=!0},r.isMaxLogSent=e=>!!r.maxLogSent[e]},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"c",function(){return o}),i.d(t,"b",function(){return a});var s=i(7),n=i(1);const r=t=>Object.keys(t).map(e=>t[e]);function o(e){for(const t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=`%22${encodeURIComponent(e[t])}%22`);return JSON.stringify(e).cnx_replaceAll('"',"")}function a(t,i){if(!Object(n.f)(t)||!Object(n.f)(i))return!1;const e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i);return e.length===r.length&&e.every(e=>Object(s.i)(t[e],i[e]))}},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"b",function(){return a}),i.d(t,"f",function(){return l}),i.d(t,"e",function(){return d}),i.d(t,"c",function(){return c});var s=i(1),r=i(10);function n(e){let t,i;return Object(s.g)(e)&&(t=e.match(r.b))&&(i=parseInt(t[1],10)*r.d+parseInt(t[2],10)*r.e+parseInt(t[3],10)*r.f+parseInt(t[5]||0,10)),isNaN(i)?null:i}function o(e,t){return/^\d+(\.\d+)?%$/g.test(e)?t?t*parseFloat(e.replace("%",""))/100:null:n(e)}function a(e){return Date.now()+e*r.a}function l(e,t=":"){var i=e=>10<=e?e:`0${e}`;return`${i(Math.floor(e/60))}${t}${i(Math.floor(e%60))}`}function d(t){t=Date.parse(t+" GMT");if(Object(s.d)(t)){var i=Math.floor((Date.parse(new Date(Date.now()).toUTCString())-t)/1e3);if(!Object(s.e)(i))return"just now";var r=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let e;for(e=r.length-1;0<e&&!(i>=r[e].value);e--);return Math.floor(i/r[e].value).toFixed(0)+r[e].symbol+" ago"}}function c(e,t){var i=Date.now();return!(i<e||t<i)}},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return s});const r="https://connatix.com/privacy-policy/",s="v"},function(e,i,t){"use strict";function r(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),r(t(149)),r(t(150)),r(t(151)),r(t(152))},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return o});class r{}r.clientAb0=1,r.clientAb1=1;class s{}var n;s.clientAb0=1,s.clientAb1=1,(t=n=n||{})[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService";class o{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(e){return(this.abServiceType!==n.PlayspaceABService?r:s)[e]}}},function(e,i,t){"use strict";function r(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),r(t(73)),r(t(153)),r(t(74)),r(t(75)),r(t(154)),r(t(61)),r(t(76)),r(t(155)),r(t(156))},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(11),s=i(4),n=i(27);class o{static Ri(){var e=o.Bi;return o.Bi++,e}static Di(e){return o.Fi[e]}static Ui(e){e.forEach(e=>{o.Fi[e.advertiserLineItemId]&&o.addCustomHistoryLine("duplicate",{id:e.advertiserLineItemId}),o.Fi[e.advertiserLineItemId]=o.Ri()})}static $i(e){return e.map(e=>({advertiserLineItemId:e.advertiserLineItemId,creativeType:e.creativeType,impressionTimeout:e.impressionTimeSpent,lineItemPriority:e.lineItemPriority,playerSize:e.playerSize,requestCap:e.requestCap,sound:e.sound,viewability:e.viewability}))}static setClientSideAdList(e){o.Vi&&(o.Ni=o.$i(JSON.parse(JSON.stringify(e))),o.Ui(o.Ni))}static setRtbAdList(e){o.Vi&&(o.Hi=o.$i(JSON.parse(JSON.stringify(e))),o.Ui(o.Hi))}static setHeaderBidderAdList(e){o.Vi&&(o.qi=o.$i(JSON.parse(JSON.stringify(e))),o.Ui(o.qi))}static setTamAdList(e){o.Vi&&(o.zi=o.$i(JSON.parse(JSON.stringify(e))),o.Ui(o.zi))}static setLineItemStatus(e,t){o.Vi&&(e=o.Di(e),o.Wi.push({type:"status",id:e,status:r.a[t]}))}static setVpaidEvent(e,t){if(o.Vi)try{var i=o.Di(e);switch(t){case s.b.AdLoaded:case s.b.AdStarted:case s.b.AdError:case s.b.AdSkipped:case s.b.AdStopped:case s.b.AdPaused:case s.b.AdPlaying:case s.b.AdImpression:o.Wi.push({type:"vpaid",id:i,event:t})}}catch(e){}}static setViewabilityState(e){o.Vi&&o.Wi.push({type:"view",inView:e})}static setFocusState(e){o.Vi&&o.Wi.push({type:"focus",inView:e})}static setAdState(e){o.Vi&&o.Wi.push({type:"adState",state:n.ProtoAdSlotsEnum[e]})}static enforcerAction(e){o.Vi&&o.Wi.push({type:"enforcer",action:e})}static addCustomHistoryLine(e,t){o.Vi&&o.Wi.push(Object.assign({type:e},t))}static getJsonString(){return o.Vi?JSON.stringify({clientAdList:o.Ni,rtbAdList:o.Hi,headerBidderAdList:o.qi,mappedAdList:o.Fi,history:o.Wi}).substring(0,o.Gi):""}static playerDestroyed(){this.Ji=!0}static isPlayerDestroyed(){return this.Ji}}o.Vi=Date.now()-1581093917537<0,o.Gi=5e4,o.Bi=0,o.Fi={},o.Ni=[],o.Hi=[],o.qi=[],o.zi=[],o.Wi=[],o.Ji=!1},function(e,t,i){"use strict";var r;i.d(t,"a",function(){return r}),(t=r=r||{})[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"},function(e,t,i){"use strict";i.d(t,"a",function(){return r});class r{constructor(){this.Qi=!1,this.promise=new Promise((e,t)=>{this.Xi=e,this.Yi=t})}Ki(){this.Qi||(this.Qi=!0)}resolve(e){this.Ki(),this.Xi(e)}reject(e){this.Ki(),this.Yi(e)}get isPending(){return!this.Qi}}},function(e,i,n){"use strict";!function(e){var r=i;function s(e,t,i){for(var r=Object.keys(t),s=0;s<r.length;++s)void 0!==e[r[s]]&&i||(e[r[s]]=t[r[s]]);return e}function t(e){function i(e,t){if(!(this instanceof i))return new i(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&s(this,t)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return e}}),i.prototype.toString=function(){return this.name+": "+this.message},i}r.asPromise=n(136),r.base64=n(137),r.EventEmitter=n(138),r.float=n(139),r.inquire=n(140),r.utf8=n(141),r.pool=n(142),r.LongBits=n(143),r.global="undefined"!=typeof window&&window||void 0!==e&&e||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r.Zi=null,r.te=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r.te(e):new r.Array(e):r.Buffer?r.Zi(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){e=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},r.merge=s,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=t,r.ProtocolError=t("ProtocolError"),r.oneOfGetter=function(e){for(var i={},t=0;t<e.length;++t)i[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===i[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},r.oneOfSetter=function(i){return function(e){for(var t=0;t<i.length;++t)i[t]!==e&&delete this[i[t]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r.ie=function(){var i=r.Buffer;i?(r.Zi=i.from!==Uint8Array.from&&i.from||function(e,t){return new i(e,t)},r.te=i.allocUnsafe||function(e){return new i(e)}):r.Zi=r.te=null}}.call(this,n(69))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(35),i=(s.encode=function(e,t){var i;if((i=(e="string"==typeof e?parseInt(e,10):e).toString(2)).length>t||e<0)throw new r.EncodingError(e+" too large to encode into "+t);return i=i.length<t?"0".repeat(t-i.length)+i:i},s.decode=function(e,t){if(t!==e.length)throw new r.DecodingError("invalid bit length");return parseInt(e,2)},s);function s(){}t.IntEncoder=i},function(e,t,i){"use strict";var c=this&&this.ee||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"_",{value:!0});var r=(s.prototype.clone=function(){var i=this,r=new this.constructor;return Object.keys(this).forEach(function(e){var t=i.deepClone(i[e]);void 0!==t&&(r[e]=t)}),r},s.prototype.deepClone=function(e){var t,i,r=typeof e;if("number"==r||"string"==r||"boolean"==r)return e;if(null!==e&&"object"==r){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){var s=[];try{for(var n=c(e),o=n.next();!o.done;o=n.next()){var a=o.value;s.push(this.deepClone(a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return e instanceof Array?s:new e.constructor(s)}var l,d={};for(l in e)e.hasOwnProperty(l)&&(d[l]=this.deepClone(e[l]));return d}},s);function s(){}t.Cloneable=r},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return u});var t=i(53),o=i(0),a=i(13),r=i(1),l=i(5);const d=new t.a(o.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let s;const h=new Map;function n(n){s=s||new Promise(t=>{var e=n.find(e=>e.blockedDomainsRevisionNumber);if(e){const{publisherLineItemId:i,blockedDomainsRevisionNumber:r}=e,s=`${a.a.endPoints.base.lineItems}${i}/blockedDomains_${r}.bin`;d.fetchMetadata(s,c).then(e=>{h.set(i,e.domains),t()}).catch(()=>{Object(l.a)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:o.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),t()})}else t()})}function u(t,i){return new Promise(e=>{Object(r.h)(i)?s.then(()=>{h.has(t)&&h.get(t).some(e=>i.includes(e))?e(!0):e(!1)}):e(!1)})}},function(e,t){e.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"></path><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"></path></svg>'},function(e,t){e.exports="<cnx class=cnx-ui-progress-label> <cnx-span></cnx-span> </cnx> "},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=(s.encode=function(e){return+e+""},s.decode=function(e){return"1"===e},s);function s(){}t.BooleanEncoder=r},function(e,t,i){"use strict";var r;(r=r=r||{}).prebid="prebid",r.bid="bid",r.win="win",r.impression="impression",r.viewableImpression="viewableImpression",r.postbid="postbid",r.initAd="initAd",r.request="request"},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r,o=i(54),a=i(2),l=i(7);!function(e){const s=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],n="cnxtestadblock",i={src:o.a};e.detectUsingCSS=function(t){try{let e=!1;t.document.body.insertAdjacentHTML("beforeend",(i=s.join(" "),`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${n}" class="${i}"></div>`));const r=t.document.getElementById(n);return 0!==r.getBoundingClientRect().height&&0!==r.getBoundingClientRect().width||(e=!0),t.document.body.removeChild(r),e}catch(t){return!1}var i},e.detectUsingScript=function(){return new Promise(e=>{const t=Object(l.f)(window).topFrame;t.googletag&&e(!1),Object(a.A)(i,t.document.head,t,()=>t.googletag?e(!1):e(!0),()=>e(!0))})}}(r=r||{})},function(e,t,i){"use strict";var o=i(7),r=i(29),a=i(25),n=i(0),s=i(13),l=i(1),d=i(34),c=i(19);class h{constructor(e){this.se=e,this.ne=!0,this.re="",this.ae=!1,this.he=[]}static getInstance(e){const t=r.a,i=Object(o.f)(e).topFrame;return i[t]||(i[t]=new h(i)),i[t]}get userId(){if(Object(l.h)(this.ce))return this.ce.split("_")[0]}set userId(e){this.ce=e}get isCcpaApplicable(){return this.ne}set isCcpaApplicable(e){this.ne=e}get usPrivacyString(){return this.re}set usPrivacyString(e){this.re=e}get consentPayload(){return this.le}set consentPayload(e){this.le||(this.le=e)}getScope(){return this.se}syncDemandPartner(e){this.userId&&(e={userId:this.userId,demandPartner:parseInt(e.demandPartner,10),demandPartnerUserId:e.demandPartnerUserId},a.a.sendProtoRequest({ProtoRequest:n.ProtoUserSyncRequest,endpoint:s.a.endPoints.api.syncUrls,requestData:e,queryParams:{[d.b]:c.a.version},logError:!0}).then(e=>{}).catch(e=>{}))}registerPlsCall(e){return this.ae?(this.he.push(e),()=>{}):this.userId?(e(),()=>{}):(this.ae=!0,e(),()=>{this.ae=!1,this.he.forEach(e=>e()),this.he=[]})}}var u,p=i(33),g=i(5),m=i(6);(u=u||{}).USER_ID="cnx_userId";class f{constructor(e,t){this.ue=e,this.de=t,this.fe={[u.USER_ID]:30},this.pe=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.be=!1}ve({name:e,value:t}){e===u.USER_ID&&(this.ue.userId=this.me(t))}ge(e){let t="";var i=this.fe[e.name];i&&(t=`; expires=${new Date(Object(p.b)(i)).toUTCString()}`),this.de.document.cookie=`${e.name}=${e.value}${t}; path=/`}ye(e,t){if(Object(m.h)(e)){t={cookieList:e,secureMode:t?n.ProtoCookieSecureModeEnum.Unsecure:n.ProtoCookieSecureModeEnum.Auto,browserInfo:this.we};return a.a.sendProtoRequest({requestData:t,ProtoRequest:n.ProtoCookieSyncRequest,endpoint:s.a.endPoints.api.cookie,withCredentials:!0,queryParams:{[d.b]:c.a.version},logError:!1}).catch(e=>Object(g.a)({message:"UserCookieManager_setThirdPartyCookie",exception:e.message,callStack:e.callStack,level:n.ProtoLoggingLevelEnum.FATAL}))}}me(e){return e.split("_")[0]}xe(e){try{var t,i=e+"=";for(t of decodeURIComponent(this.de.document.cookie).split(";")){for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return this.me(t.substring(i.length,t.length))}}catch(e){}return""}getUserId(){return this.ue.userId}syncFirstPartyCookie(e){const t={name:e,value:"",timestamp:Object(p.b)(this.fe[e])};e===u.USER_ID&&(t.value=this.ue.userId),Object(l.h)(t.value)&&this.ge(t)}syncThirdPartyCookieList(e){const t=[u.USER_ID],i=[];t.forEach(e=>{e===u.USER_ID&&Object(l.h)(this.ue.userId)&&i.push({name:u.USER_ID,value:this.ue.userId,timestamp:Object(p.b)(this.fe[u.USER_ID])})}),this.ye(i,e)}setBrowserInfo(e,t){this.we=e,this.be=this.pe.includes(e.browserType),this.be&&t&&this.syncThirdPartyCookieList(this.be)}setUserInformation(e){e&&this.ve({name:u.USER_ID,value:e.userId})}fetchCookies(){[u.USER_ID].map(e=>({name:e,value:this.xe(e)})).filter(({value:e})=>Object(l.h)(e)).forEach(e=>this.ve(e))}get unsecuredCookieSync(){return this.be}}var y=i(23);const b={[y.a.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[y.a.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class v{constructor(e,t){this.ke=e,this.Se=t,this.apiType=y.a.CmpApi,this.Oe={},this.le=null,this._e=r=>new Promise((e,t)=>{try{var i="string"==typeof r.data?JSON.parse(r.data):r.data;if("object"==typeof i&&i.je)if(i.je.callId===this.Ae){const r=i.je.returnValue&&i.je.returnValue.vendorConsents;this.Ie(r).then(()=>e(this.Ae))}else if(i.je.callId===this.Te){const r=i.je.returnValue&&i.je.returnValue.consentData;this.Ce(r).then(()=>e(this.Te))}}catch(e){t()}})}isApiOnPage(){return null!==this.ke||null!==this.Se}bindToApi(){return null!==this.ke?new Promise((e,t)=>{this.Pe(this.ke).then(()=>e()).catch(e=>t(e))}):null!==this.Se?this.Me(this.Se):Promise.reject()}isConsentForVendor(e){return!!this.Oe[e]}getConsentPayload(){return this.le}setInAppConsentData(e){this.Ie(e),this.Ce(e.consentString)}hasIvtConsent(){return this.isConsentForVendor(r.c.Connatix)}isConsentForPurposes(e){return!0}Me(s){this.Te=Object(o.c)(),this.Ae=Object(o.c)();const n={};return new Promise(t=>{const i=e=>{this._e(e).then(e=>{n[e]=!0,n[this.Te]&&n[this.Ae]&&(window.removeEventListener("message",i,!1),t())}).catch(e=>{})};window.addEventListener("message",i,!1);var e=b[y.a.CmpApi].getVendorConsentDataMethodName,r=b[y.a.CmpApi].getConsentDataMethodName;s.postMessage({Ee:{command:e,parameter:null,callId:this.Ae}},"*"),s.postMessage({Ee:{command:r,parameter:null,callId:this.Te}},"*")})}Pe(e){const t=b[y.a.CmpApi].windowPropertyName,r=b[y.a.CmpApi].getVendorConsentDataMethodName,s=b[y.a.CmpApi].getConsentDataMethodName;if(e&&e[t]){var i=new Promise(i=>{e[t](r,null,(e,t)=>{if(t){const t=e["vendorConsents"];this.Ie(t).then(()=>i())}})}),n=new Promise(i=>{e[t](s,null,(e,t)=>{if(t){const t=e["consentData"];this.Ce(t).then(()=>i())}})});return Promise.all([i,n])}return Promise.reject()}Ie(e){return Object(l.f)(e)?(this.Oe=e,Promise.resolve()):Promise.reject()}Ce(e){return Object(l.g)(e)?(this.le=e,Promise.resolve()):Promise.reject()}}var P=i(2),S=i(84),I=i(85);const T=(e,t)=>{t=b[t].windowPropertyName;return Object(P.s)(e,t)},k=(e,t)=>{t=b[t].framePropertyName;return Object(P.r)(e,t)},A=(e,t)=>null!==T(e,t)||null!==k(e,t),O=e=>{const t=S.TCString.decode(e),i={},r={};return t.vendorConsents.forEach((e,t)=>i[t]=e),t.purposeConsents.forEach((e,t)=>r[t]=e),{vendorConsents:i,purposeConsents:r,tcString:e}},C=e=>{const t=I.decodeConsentString(e);let i="";var r=t.maxVendorId;for(let e=1;e<=r;e++)i+="0";const s=i.split("");return t.allowedVendorIds.forEach(e=>{s[e-1]="1"}),(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(s.join(""))},w=(e,t,i)=>{let r;try{r=t(e)}catch(e){}if(Object(l.f)(r))return r;try{r=i(e)}catch(e){}return r},x=e=>{return Object(l.h)(null===e||void 0===e?void 0:e.tcString)},E=e=>{return Object(l.h)(null===e||void 0===e?void 0:e.consentString)},L=({cmpEncodedString:e,tcfEncodedString:t})=>{if(!Object(l.h)(e)&&!Object(l.h)(t))return null;let i=null;return Object(l.h)(t)&&(i=w(t,O,C)),Object(l.f)(i)?i:Object(l.h)(e)?(i=w(e,C,O),Object(l.f)(i)?i:(Object(g.a)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:e,tcfEncodedString:t}),level:n.ProtoLoggingLevelEnum.FATAL}),null)):(Object(g.a)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:t}),level:n.ProtoLoggingLevelEnum.FATAL}),null)};class R{constructor(e,t){this.Le=e,this.Re=t,this.apiType=y.a.TcfApi,this.Be=r=>new Promise((e,i)=>{try{let t=r.data;if("string"==typeof r.data)try{t=JSON.parse(r.data)}catch(e){t=void 0}if("object"==typeof t&&t.De&&t.De.callId===this.Fe){const r=t.De.returnValue.tcString;this.Ie(r).then(()=>e(this.Fe)).catch(e=>i())}}catch(e){i()}})}isApiOnPage(){return null!==this.Le||null!==this.Re}bindToApi(){return null!==this.Le?new Promise((e,t)=>{this.Pe(this.Le).then(()=>e()).catch(e=>t(e))}):null!==this.Re?this.Me(this.Re):Promise.reject()}isConsentForVendor(e){var t,i;return!(null===(t=this.Ue)||void 0===t||!t.vendorConsents||null===(i=this.Ue)||void 0===i||!i.vendorConsents[e])}getConsentPayload(){var e;return null===(e=this.Ue)||void 0===e?void 0:e.tcString}setInAppConsentData(e){this.Ue=Object.assign(Object.assign({},this.Ue),e)}hasIvtConsent(){return!0}isConsentForPurposes(e){var t;return!(null===(t=this.Ue)||void 0===t||!t.purposeConsents)&&e.every(e=>!!this.Ue.purposeConsents[e])}Me(r){this.Fe=Object(o.c)();const s={};return new Promise(t=>{const i=e=>{this.Be(e).then(e=>{s[e]=!0,s[this.Fe]&&(window.removeEventListener("message",i,!1),t())}).catch(e=>{})};window.addEventListener("message",i,!1);var e=b[y.a.TcfApi].getVendorConsentDataMethodName;r.postMessage({$e:{command:e,parameter:null,callId:this.Fe}},"*")})}Pe(e){const r=b[y.a.TcfApi].windowPropertyName,t=b[y.a.TcfApi].consentUpdateMethodName,s=b[y.a.TcfApi].removeUpdateListenerMethodName;return e&&e[r]?new Promise(i=>{this.Le[r](t,2,(e,t)=>{if(t&&("useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus)){const t=e.tcString;this.Ie(t).then(()=>i()),this.Le[r](s,2,()=>{},e.listenerId)}})}):Promise.reject()}Ie(e){e=L({tcfEncodedString:e});return x(e)?(this.Ue=e,Promise.resolve()):Promise.reject()}}var M=i(39);const B=[M.a.P1,M.a.P2,M.a.P4,M.a.P7,M.a.P8];class j{constructor(e,t,i={}){this.Ve=e,this.de=t;e=L({cmpEncodedString:null===(e=i.cmp)||void 0===e?void 0:e.consentString,tcfEncodedString:null===(t=i.tcf)||void 0===t?void 0:t.tcString}),t=this.Ne(e);null!==t?(this.He(t),(x(e)||E(e))&&this.qe.setInAppConsentData(e)):Object(g.a)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:i}),level:n.ProtoLoggingLevelEnum.FATAL})}setPageUrl(e){this.ze=e}setAmpUserConsent(t){if(this.isConsentRequired()){var i=t.consentStringTypeEnum.US_PRIVACY_STRING,r=null===(r=t.consentMetadata)||void 0===r?void 0:r.consentStringType,s=t.encodeConsentString||(null===(s=t.consentMetadata)||void 0===s?void 0:s.additionalConsent);let e;Object(l.h)(s)?r!==i?(i=L({tcfEncodedString:s,cmpEncodedString:s}),x(i)?e=new R(null,null):E(i)&&(e=new v(null,null)),e?e?(this.qe=e,this.qe.setInAppConsentData(i)):Object(g.a)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:n.ProtoLoggingLevelEnum.WARNING,callStack:s,exception:`${JSON.stringify(t)}__pageURL__${this.ze}`,throttle:2,sendMaxLog:!1}):Object(g.a)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:n.ProtoLoggingLevelEnum.WARNING,callStack:s,exception:`${JSON.stringify(t)}__pageURL__${this.ze}`,throttle:2,sendMaxLog:!1})):Object(g.a)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:n.ProtoLoggingLevelEnum.WARNING,callStack:s,exception:`${JSON.stringify(t)}__pageURL_${this.ze}`,throttle:2,sendMaxLog:!1}):Object(g.a)({level:n.ProtoLoggingLevelEnum.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.ze})}}isConsentRequired(){return this.Ve}isConsent(e,t=[]){return!this.isConsentRequired()||this.qe.isConsentForVendor(e)&&this.qe.isConsentForPurposes(t)}isConsentConnatix(){return this.isConsent(r.c.Connatix,B)}getConsentDataPayload(){return this.qe.getConsentPayload()}bindToConsentApi(){return this.qe.bindToApi()}isConsentApiOnPage(){return this.qe.isApiOnPage()}hasIVTConsent(){return this.qe.hasIvtConsent()}getConsentApiType(){return this.qe.apiType}He(e){var t=T(this.de,e),i=k(this.de,e);e===y.a.TcfApi?this.qe=new R(t,i):this.qe=new v(t,i)}Ne(e){return!x(e)&&(E(e)||!A(this.de,y.a.TcfApi)&&A(this.de,y.a.CmpApi))?y.a.CmpApi:y.a.TcfApi}}var D=i(17);const _="CookieSync_syncScript_not_properly_loaded",F="CookieSync_param_not_parsed_properly",N=(e,t)=>{if(!window.PubMaticSync)return V(_,"PUBMATIC"),!1;e=Number.parseInt(e,10);return Object(l.d)(e)?!!Object(l.h)(t)||(V(F,"PUBMATIC","predirect"),!1):(V(F,"PUBMATIC","p"),!1)},U=(e,t,i,r)=>{const s={pubId:Number.parseInt(e,10),url:t};i&&(s.delay=1e3,s.gdpr=1,s.gdprConsent=r),window.PubMaticSync.sync(s)},V=(e,t,i="")=>{Object(g.a)({message:e,callStack:t,exception:i,level:n.ProtoLoggingLevelEnum.FATAL,throttle:1,sendMaxLog:!1})};class q{constructor(e,t){this.We=e,this.Ve=t,this.Ge=[]}replaceuserIdMacros(e,t){let i=e;return i=(i=(i=i.replace("%5BuserId%5D",t)).replace("[userId]",t)).replace("%7bUSER_ID%7d",t)}Je(e,t){try{if(this.Qe(e)){const i=t.document.createElement("iframe");i.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),i.src=e.url,t.document.body.appendChild(i)}else Object(P.A)({src:e.url},t.document.head,t,null,null,1===Object(o.l)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(e){return!1}}Qe(e){switch(e.vendorId){case r.c.Rubicon:case r.c.Pubmatic:return!0;default:return-1<e.url.indexOf("yellowblue.io")}}syncUrls(t,i){this.Ge.forEach(e=>{if(this.We.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===r.c.Pubmatic)return s=e.url,n=this.We.isConsentRequired(),o=this.We.getConsentDataPayload(),void new Promise((e,t)=>{const i=Object(D.b)("p",s),r=Object(D.b)("predirect",s);window.PubMaticSync?N(i,r)?(U(i,r,n,o),e(!0)):t():Object(P.A)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,()=>{N(i,r)?(U(i,r,n,o),e(!0)):t()},()=>{t()},!0,"UserThirdPartySyncManager_Pubmatic")}).then(()=>{e.synced=!0});if(-1!==e.url.indexOf("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`https://capi.connatix.com/core/us?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),a.a.trackPixel(e.url),void(e.synced=!0);if(-1<e.url.indexOf("pixel.advertising.com")&&(e.url=e.url.replace("gdpr=",`gdpr=${this.We.isConsentRequired()?1:0}`),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.Ve){e.url=Object(D.e)(e.url,"gdpr","1");const t=this.We.getConsentDataPayload();e.url=Object(D.e)(e.url,"gdpr_consent",t)}this.Je(e,i)&&(e.synced=!0)}var s,n,o})}setSyncUrls(t={}){return!(0<this.Ge.length||(this.Ge=[],Object.keys(t).forEach(e=>{this.Ge.push({vendorId:e,url:t[e],synced:!1})}),0))}}var H,W,G=i(40);const $={subdivision:{California:5332921},country:{US:6252001}};class z{constructor(e,t){this.ue=e,this.Xe=1,this.Ye="__uspapi",this.Ke="getUSPData",this.Ze(t)}getUsPrivacyString(){if(this.ue.usPrivacyString||this.ue.isCcpaApplicable)return this.ue.usPrivacyString}isCcpaApplicable(){return this.ue.isCcpaApplicable}isSellUserAllowed(){return!this.ue.isCcpaApplicable||this.ts()}setGeoLocation(e){(this.es=e).subdivisionId!==$.subdivision.California&&(this.ue.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.ss()&&this.ns(),this.isCcpaApplicable()?new Promise(e=>{this.getUsPrivacyString()?e():e(this.rs())}):Promise.resolve()}rs(){return new Promise((i,r)=>{const e=this.ue.getScope()[this.Ye];e?e(this.Ke,this.Xe,(e,t)=>{t?(this.Ze(e.uspString),i()):r()}):r()})}ts(){return!this.ue.usPrivacyString||Object(m.g)(this.ue.usPrivacyString,r.b)}Ze(e){this.ue.usPrivacyString=e}ss(){if(!Object(o.l)([95,5]))return!1;var e=new Date(2020,10,16,12,0,0).getTime(),t=new Date(2020,10,17,12,0,0).getTime();return Object(p.c)(e,t)}ns(){var{countryGeoId:e,subdivisionId:t}=this.es;e===$.country.US&&Object(g.a)({message:"UserCcpaManager_logCCPA",level:n.ProtoLoggingLevelEnum.INFO,callStack:JSON.stringify(t),exception:this.ue.usPrivacyString})}}i.d(t,"a",function(){return H}),i.d(t,"b",function(){return J}),(t=H=H||{}).CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate",(t=W=W||{}).SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived";class J{constructor(e,t,i,r={}){this.hs=t,this.cs=i,this._appSettings=r,this.gdprConsentMode=n.ProtoGdprConsentModeEnum.Unknown,this.ls={},this.us="",this.ds=!1,this.fs=()=>{!this.We.isConsentRequired()||this.hs?this.resolveEvent(H.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.We.isConsentApiOnPage()||this.cs?n.ProtoGdprConsentModeEnum.NoConsent:n.ProtoGdprConsentModeEnum.NoCmp,this.We.bindToConsentApi().then(()=>{this.isConsentConnatix()||(this.gdprConsentMode=n.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(H.CONSENT_DATA_UPDATE)}).catch(e=>{}))},this.ps=()=>{this.isConsentConnatix()&&(this.onEvent([W.USER_INFO_RECEIVED]).then(()=>{this.ds&&(this.bs.syncThirdPartyCookieList(),this.bs.unsecuredCookieSync&&this.bs.syncThirdPartyCookieList(this.bs.unsecuredCookieSync),this.bs.syncFirstPartyCookie(u.USER_ID))}),this.onEvent([W.SYNC_URLS_RECEIVED,H.CONSENT_DATA_UPDATE,H.CCPA_INFO_RECEIVED]).then(()=>{if(this.isConsentConnatix()&&this.vs.isSellUserAllowed())try{this.ms.syncUrls(this.ue.userId,this.ue.getScope())}catch(e){Object(g.a)({level:n.ProtoLoggingLevelEnum.WARNING,message:"UserManager_syncUrls",exception:e.message,callStack:e.stack})}}))};try{this.ue=h.getInstance(e),this.hs||(this.bs=new f(this.ue,e));const{cmp:t,tcf:i}=this._appSettings;this.We=new j(!!this.us,e,{cmp:t,tcf:i}),this.ms=new q(this.We,this.isGDPR()),this.vs=new z(this.ue,this._appSettings.usPrivacyString),this.gs()}catch(e){Object(g.a)({callStack:e.stack,exception:e.message,message:"UserManager_constructor",level:n.ProtoLoggingLevelEnum.FATAL})}}gs(){this.bs&&this.bs.fetchCookies(),this.fs(),this.onEvent([H.CONSENT_DATA_UPDATE]).then(()=>{setTimeout(()=>{try{if(this.hs)return;this.ps()}catch(e){Object(g.a)({callStack:e.stack,exception:e.message,message:"UserManager_consent_data_received",level:n.ProtoLoggingLevelEnum.FATAL})}},0)})}ys(e){return void 0===this.ls[e]&&(this.ls[e]=new G.a,this.ls[e].promise.catch(()=>this.ls[e].reject())),this.ls[e]}resolveEvent(e,t){this.ys(e).resolve(t)}setAmpUserConsent(e){this.We.setAmpUserConsent(e),this.resolveEvent(H.CONSENT_DATA_UPDATE)}setPageUrl(e){this.We&&this.We.setPageUrl(e)}onEvent(e){e=e.map(e=>this.ys(e).promise);return Promise.all(e)}isConsent(e,t){return this.We.isConsent(e,t)}isConsentConnatix(){return this.We.isConsentConnatix()}getConsentPayload(){return this.We.getConsentDataPayload()}isConsentRequired(){return this.We.isConsentRequired()}setThirdPartySyncUrls(e){this.hs||this.ms.setSyncUrls(e)&&this.resolveEvent(W.SYNC_URLS_RECEIVED)}setGeoLocation(e){this.vs.setGeoLocation(e),this.vs.fetchUsPrivacyString().then(()=>{this.resolveEvent(H.CCPA_INFO_RECEIVED)}).catch(()=>{this.resolveEvent(H.CCPA_INFO_RECEIVED)})}getUserId(){if(this.isConsentConnatix()&&this.bs)return this.bs.getUserId()}ws(){return this.bs&&this.bs.getUserId()}setUserInformation(e){this.bs&&(this.bs.setUserInformation(e),this.resolveEvent(W.USER_INFO_RECEIVED),!this.hs&&this.isConsentConnatix()&&this.bs.syncFirstPartyCookie(u.USER_ID))}isGDPR(){return!!this.us}getUsPrivacyString(){return this.vs.getUsPrivacyString()}isCcpaApplicable(){return this.vs.isCcpaApplicable()}isSellUserAllowed(){return this.hs||this.vs.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}ks(){return this._appSettings.deviceID}getTrackableUser(){return this.hs?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.hs?this.ks():this.ws()}registerPlsCall(e){return this.isConsentConnatix()||(this.ds=!0),this.ue.registerPlsCall(e)}setBrowserInfo(e){this.bs&&this.bs.setBrowserInfo(e,this.isConsentConnatix())}getGdprConsentApiType(){return this.We.getConsentApiType()}}},function(e,t,i){"use strict";var r,s;i.d(t,"a",function(){return n}),(t=r=r||{}).hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden",(t=s=s||{}).visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange";class n{constructor(e){this.Ss=e,this.Os=[],this._s(),this.js()}on(e){this.Os.push(e),e(this.isDocumentVisible())}off(t){this.Os=this.Os.filter(e=>e!==t)}_s(){void 0!==this.Ss.getDocumentProperty(r.hidden)?(this.As=r.hidden,this.Is=s.visibilitychange):void 0!==this.Ss.getDocumentProperty(r.msHidden)?(this.As=r.msHidden,this.Is=s.msvisibilitychange):void 0!==this.Ss.getDocumentProperty(r.webkitHidden)&&(this.As=r.webkitHidden,this.Is=s.webkitvisibilitychange)}js(){this.Ss.addEventListenerOnGlobal(this.Is,()=>{this.Os.forEach(e=>{e(this.isDocumentVisible())})},!0,!1)}isDocumentVisible(){return!this.Ss.getDocumentProperty(this.As)}}},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return s});var r,t=i(0);(i=r=r||{})[i.PreRoll=0]="PreRoll",i[i.MidRoll=1]="MidRoll",i[i.PostRoll=2]="PostRoll",i[i.Standalone=3]="Standalone";const s={[t.ProtoAdSlotsEnum.PreRoll]:r.PreRoll,[t.ProtoAdSlotsEnum.MidRoll]:r.MidRoll,[t.ProtoAdSlotsEnum.PostRoll]:r.PostRoll}},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(0),n=i(7),s=i(5),o=i(1),a=i(25);class l{constructor(e,t){this.Ts=e,this.Cs=t,this.Ps=e=>new Promise((t,i)=>{a.a.sendProtoRequest({ProtoResponse:this.Ts,endpoint:e,requestType:"GET",logError:!0}).then(e=>{t(e)}).catch(e=>{i(e)})})}fetchMetadata(s,e=5){return new Promise((i,r)=>{Object(n.k)(()=>this.Ps(s),e).then(e=>{if(Object(o.f)(e))return i(e);var t=new Error("invalid metadata");return this.Es({url:s,metadata:e,e:t}),r(t)}).catch(e=>{this.Es({url:s,e:e}),r(e)})})}Es(e){var t;const i=Object(o.h)(null===(t=e.e)||void 0===t?void 0:t.message)?e.e.message:"";-1===i.indexOf("XhrUtils_XMLHttpRequest_error")&&Object(s.a)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.Cs}_${i}:${JSON.stringify(e)}`,callStack:e.e&&e.e.stack,level:r.ProtoLoggingLevelEnum.FATAL})}}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});const r="//securepubads.g.doubleclick.net/tag/js/gpt.js"},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-settings-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg> </cnx> <cnx class=cnx-hd-flag> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 17 11"><g fill=none><rect class=cnx-color-accent width=17 height=11 rx=2 fill=#09F /><path class=cnx-color-icon d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-button-caption cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-caption-off-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-caption-on-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><g fill=none><path d="M20.6 3C21.9 3 23 4 23 5.3L23 18.8C23 20 21.9 21 20.6 21L3.4 21C2.1 21 1 20 1 18.8L1 5.3C1 4 2.1 3 3.4 3L20.6 3Z" class=cnx-color-accent /><path d="M11 11L9.5 11 9.5 10.5 7.5 10.5 7.5 13.5 9.5 13.5 9.5 13 11 13 11 14C11 14.6 10.6 15 10 15L7 15C6.5 15 6 14.6 6 14L6 10C6 9.5 6.5 9 7 9L10 9C10.6 9 11 9.5 11 10L11 11ZM18 11L16.5 11 16.5 10.5 14.5 10.5 14.5 13.5 16.5 13.5 16.5 13 18 13 18 14C18 14.6 17.6 15 17 15L14 15C13.5 15 13 14.6 13 14L13 10C13 9.5 13.5 9 14 9L17 9C17.6 9 18 9.5 18 10L18 11Z" class=cnx-color-icon /></g></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-progress-bar cnx-video-progress"> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-accent"></cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(e,t){e.exports='<cnx class=cnx-ui-loader> <svg class=cnx-color-accent version=1.1 viewBox="0 0 79 90" xmlns=http://www.w3.org/2000/svg><polygon points="21 73.322 11 79 11 12 21 17.678" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="27 70 27 21 38 27.267 38 63.733" fill=transparent stroke-linecap=round stroke-linejoin=round /><polygon points="44 61 44 31 54 36.769 54 55.231" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="60 51 60 40 70 45.5" fill=none stroke-linecap=round stroke-linejoin=round /></svg> </cnx> '},function(e,t,i){"use strict";e.exports=i(135)},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r,s,n,o,a,l,d,c,h,u,p,g,m,f,y,b,v=i(37),v=(r=v.Fields.cmpId,s=v.Fields.cmpVersion,n=v.Fields.consentLanguage,o=v.Fields.consentScreen,a=v.Fields.created,l=v.Fields.isServiceSpecific,d=v.Fields.lastUpdated,c=v.Fields.policyVersion,h=v.Fields.publisherCountryCode,u=v.Fields.publisherLegitimateInterests,p=v.Fields.publisherConsents,g=v.Fields.purposeConsents,m=v.Fields.purposeLegitimateInterests,f=v.Fields.purposeOneTreatment,y=v.Fields.specialFeatureOptins,b=v.Fields.useNonStandardStacks,i=v.Fields.vendorListVersion,v=v.Fields.version,P[r]=12,P[s]=12,P[n]=12,P[o]=6,P[a]=36,P[l]=1,P[d]=36,P[c]=6,P[h]=12,P[u]=24,P[p]=24,P[g]=24,P[m]=24,P[f]=1,P[y]=12,P[b]=1,P[i]=12,P[v]=6,P.anyBoolean=1,P.encodingType=1,P.maxId=16,P.numCustomPurposes=6,P.numEntries=12,P.numRestrictions=12,P.purposeId=6,P.restrictionType=2,P.segmentType=3,P.singleOrRange=1,P.vendorId=16,P);function P(){}t.BitLength=v},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0}),(t=t.RestrictionType||(t.RestrictionType={}))[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(47),n=i(35),o=i(37),i=(r.encode=function(e,t){for(var i="",r=1;r<=t;r++)i+=s.BooleanEncoder.encode(e.has(r));return i},r.decode=function(e,t){if(e.length!==t)throw new n.DecodingError("bitfield encoding length mismatch");for(var i=new o.Vector,r=1;r<=t;r++)s.BooleanEncoder.decode(e[r-1])&&i.set(r);return i.bitLength=e.length,i},r);function r(){}t.FixedVectorEncoder=i},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"></circle></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"></path></svg>'},function(e,t,i){"use strict";e.exports=h;var r,s=i(41),n=s.LongBits,o=s.base64,a=s.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function d(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new l(d,0,0),this.tail=this.head,this.states=null}function u(e,t,i){t[i]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}h.create=s.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h},h.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(h.alloc=s.pool(h.alloc,s.Array.prototype.subarray)),h.prototype.Ls=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},(p.prototype=Object.create(l.prototype)).fn=function(e,t,i){for(;127<e;)t[i++]=127&e|128,e>>>=7;t[i]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this.Ls(g,10,n.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){e=n.from(e);return this.Ls(g,e.length(),e)},h.prototype.sint64=function(e){e=n.from(e).zzEncode();return this.Ls(g,e.length(),e)},h.prototype.bool=function(e){return this.Ls(u,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this.Ls(m,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){e=n.from(e);return this.Ls(m,4,e.lo).Ls(m,4,e.hi)},h.prototype.float=function(e){return this.Ls(s.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this.Ls(s.float.writeDoubleLE,8,e)};var f=s.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};h.prototype.bytes=function(e){var t,i=e.length>>>0;return i?(s.isString(e)&&(t=h.alloc(i=o.length(e)),o.decode(e,t,0),e=t),this.uint32(i).Ls(f,i,e)):this.Ls(u,1,0)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t).Ls(a.write,t,e):this.Ls(u,1,0)},h.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(d,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(d,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},h.ie=function(e){r=e}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";e.exports=l;var r,s=i(41),n=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var d,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")};function h(){var e=new n(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new n(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}l.create=s.Buffer?function(e){return(l.create=function(e){return s.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c,l.prototype.Rs=s.Array.prototype.subarray||s.Array.prototype.slice,l.prototype.uint32=(d=4294967295,function(){if(d=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return d;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return d}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return u(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|u(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this.Rs.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l.ie=function(e){r=e;var t=s.Long?"toLong":"toNumber";s.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,i,t){"use strict";function r(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),r(t(72)),r(t(60)),r(t(157)),r(t(161)),r(t(77)),r(t(83))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(35),i=(r.encode=function(e){if(!/^[0-1]+$/.test(e))throw new s.EncodingError("Invalid bitField");var t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";for(var i="",r=0;r<e.length;r+=this.BASIS)i+=this.DICT[parseInt(e.substr(r,this.BASIS),2)];return i},r.decode=function(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var t="",i=0;i<e.length;i++){var r=this.REVERSE_DICT.get(e[i]).toString(2);t+="0".repeat(this.BASIS-r.length)+r}return t},r.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",r.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),r.BASIS=6,r.LCM=24,r);function r(){}t.Base64Url=i},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,s=(n=i(43).Cloneable,s(o,n),o.prototype.isEmpty=function(){return!this.root},o.prototype.add=function(e){var t,i={value:e,left:null,right:null};if(this.isEmpty())this.root=i;else for(t=this.root;;)if(e<t.value){if(null===t.left){t.left=i;break}t=t.left}else{if(!(e>t.value))break;if(null===t.right){t.right=i;break}t=t.right}},o.prototype.get=function(){for(var e=[],t=this.root;t;)if(t.left){for(var i=t.left;i.right&&i.right!=t;)i=i.right;t=i.right==t?(i.right=null,e.push(t.value),t.right):(i.right=t).left}else e.push(t.value),t=t.right;return e},o.prototype.contains=function(e){for(var t=!1,i=this.root;i;){if(i.value===e){t=!0;break}e>i.value?i=i.right:e<i.value&&(i=i.left)}return t},o.prototype.min=function(e){var t;for(void 0===e&&(e=this.root);e;)e=e.left||(t=e.value,null);return t},o.prototype.max=function(e){var t;for(void 0===e&&(e=this.root);e;)e=e.right||(t=e.value,null);return t},o.prototype.remove=function(e,t){void 0===t&&(t=this.root);for(var i,r=null,s="left";t;)e<t.value?(t=(r=t).left,s="left"):e>t.value?(t=(r=t).right,s="right"):(t.left||t.right?t.left?t.right?(i=this.min(t.right),this.remove(i,t.right),t.value=i):r?r[s]=t.left:this.root=t.left:r?r[s]=t.right:this.root=t.right:r?r[s]=null:this.root=null,t=null)},o);function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.root=null,e}t.BinarySearchTree=s},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=(s.cmpId="cmpId",s.cmpVersion="cmpVersion",s.consentLanguage="consentLanguage",s.consentScreen="consentScreen",s.created="created",s.supportOOB="supportOOB",s.isServiceSpecific="isServiceSpecific",s.lastUpdated="lastUpdated",s.numCustomPurposes="numCustomPurposes",s.policyVersion="policyVersion",s.publisherCountryCode="publisherCountryCode",s.publisherCustomConsents="publisherCustomConsents",s.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",s.publisherLegitimateInterests="publisherLegitimateInterests",s.publisherConsents="publisherConsents",s.publisherRestrictions="publisherRestrictions",s.purposeConsents="purposeConsents",s.purposeLegitimateInterests="purposeLegitimateInterests",s.purposeOneTreatment="purposeOneTreatment",s.specialFeatureOptins="specialFeatureOptins",s.useNonStandardStacks="useNonStandardStacks",s.vendorConsents="vendorConsents",s.vendorLegitimateInterests="vendorLegitimateInterests",s.vendorListVersion="vendorListVersion",s.vendorsAllowed="vendorsAllowed",s.vendorsDisclosed="vendorsDisclosed",s.version="version",s);function s(){}t.Fields=r},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,o=i(43),a=i(35),l=i(61),s=(n=o.Cloneable,s(d,n),d.unHash=function(e){var t=e.split(this.hashSeparator),i=new d;if(2!==t.length)throw new a.TCModelError("hash",e);return i.purposeId=parseInt(t[0],10),i.restrictionType=parseInt(t[1],10),i},Object.defineProperty(d.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+d.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(e){this.purposeId_=e},enumerable:!0,configurable:!0}),d.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&0<this.purposeId&&(this.restrictionType===l.RestrictionType.NOT_ALLOWED||this.restrictionType===l.RestrictionType.REQUIRE_CONSENT||this.restrictionType===l.RestrictionType.REQUIRE_LI)},d.prototype.isSameAs=function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType},d.hashSeparator="-",d);function d(e,t){var i=n.call(this)||this;return void 0!==e&&(i.purposeId=e),void 0!==t&&(i.restrictionType=t),i}t.PurposeRestriction=s},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0}),(t=t.Segment||(t.Segment={})).CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"},function(e,i,t){"use strict";function r(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),r(t(47)),r(t(78)),r(t(158)),r(t(62)),r(t(42)),r(t(79)),r(t(80)),r(t(82)),r(t(81))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(42),s=i(35),i=(n.encode=function(e,t){return r.IntEncoder.encode(Math.round(e.getTime()/100),t)},n.decode=function(e,t){if(t!==e.length)throw new s.DecodingError("invalid bit length");var i=new Date;return i.setTime(100*r.IntEncoder.decode(e,t)),i},n);function n(){}t.DateEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var s=i(42),n=i(35),i=(r.encode=function(e,t){var i=(e=e.toUpperCase()).charCodeAt(0)-65,r=e.charCodeAt(1)-65;if(i<0||25<i||r<0||25<r)throw new n.EncodingError("invalid language code: "+e);if(t%2==1)throw new n.EncodingError("numBits must be even, "+t+" is not valid");return s.IntEncoder.encode(i,t/=2)+s.IntEncoder.encode(r,t)},r.decode=function(e,t){if(t!==e.length||e.length%2)throw new n.DecodingError("invalid bit length for language");var i=e.length/2,t=s.IntEncoder.decode(e.slice(0,i),i)+65,i=s.IntEncoder.decode(e.slice(i),i)+65;return String.fromCharCode(t)+String.fromCharCode(i)},r);function r(){}t.LangEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var g=i(60),m=i(47),f=i(35),y=i(42),b=i(37),i=(r.encode=function(d){var c=y.IntEncoder.encode(d.numRestrictions,g.BitLength.numRestrictions);return d.isEmpty()||d.getRestrictions().forEach(function(e){c+=y.IntEncoder.encode(e.purposeId,g.BitLength.purposeId),c+=y.IntEncoder.encode(e.restrictionType,g.BitLength.restrictionType);for(var t=d.getVendors(e),i=t.length,r=0,s=0,n="",o=0;o<i;o++){var a,l=t[o];0===s&&(r++,s=l),(o===i-1||t[o+1]>l+1)&&(n+=m.BooleanEncoder.encode(a=!(l===s)),n+=y.IntEncoder.encode(s,g.BitLength.vendorId),a&&(n+=y.IntEncoder.encode(l,g.BitLength.vendorId)),s=0)}c+=y.IntEncoder.encode(r,g.BitLength.numEntries),c+=n}),c},r.decode=function(e){var t=0,i=new b.PurposeRestrictionVector,r=y.IntEncoder.decode(e.substr(t,g.BitLength.numRestrictions),g.BitLength.numRestrictions);t+=g.BitLength.numRestrictions;for(var s=0;s<r;s++){var n=y.IntEncoder.decode(e.substr(t,g.BitLength.purposeId),g.BitLength.purposeId);t+=g.BitLength.purposeId;var o=y.IntEncoder.decode(e.substr(t,g.BitLength.restrictionType),g.BitLength.restrictionType);t+=g.BitLength.restrictionType;var a=new b.PurposeRestriction(n,o),l=y.IntEncoder.decode(e.substr(t,g.BitLength.numEntries),g.BitLength.numEntries);t+=g.BitLength.numEntries;for(var d=0;d<l;d++){var c=m.BooleanEncoder.decode(e.substr(t,g.BitLength.anyBoolean));t+=g.BitLength.anyBoolean;var h=y.IntEncoder.decode(e.substr(t,g.BitLength.vendorId),g.BitLength.vendorId);if(t+=g.BitLength.vendorId,c){var u=y.IntEncoder.decode(e.substr(t,g.BitLength.vendorId),g.BitLength.vendorId);if(t+=g.BitLength.vendorId,u<h)throw new f.DecodingError("Invalid RangeEntry: endVendorId "+u+" is less than "+h);for(var p=h;p<=u;p++)i.add(p,a)}else i.add(h,a)}}return i.bitLength=t,i},r);function r(){}t.PurposeRestrictionVectorEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var u=i(37),p=i(71),g=i(42),m=i(47),f=i(62),y=i(82),b=i(35),i=(r.encode=function(i){var r,s=[],n=[],e=g.IntEncoder.encode(i.maxId,p.BitLength.maxId),o="",t=p.BitLength.maxId+p.BitLength.encodingType,a=t+i.maxId,l=2*p.BitLength.vendorId+p.BitLength.singleOrRange+p.BitLength.numEntries,d=t+p.BitLength.numEntries;return i.forEach(function(e,t){o+=m.BooleanEncoder.encode(e),(r=i.maxId>l&&d<a)&&e&&(i.has(t+1)?0===n.length&&(n.push(t),d+=p.BitLength.singleOrRange,d+=p.BitLength.vendorId):(n.push(t),d+=p.BitLength.vendorId,s.push(n),n=[]))}),r?(e+=y.VectorEncodingType.RANGE+"",e+=this.buildRangeEncoding(s)):(e+=y.VectorEncodingType.FIELD+"",e+=o),e},r.decode=function(e,t){var i,r=0,s=g.IntEncoder.decode(e.substr(r,p.BitLength.maxId),p.BitLength.maxId);r+=p.BitLength.maxId;var n=g.IntEncoder.decode(e.charAt(r),p.BitLength.encodingType);if(r+=p.BitLength.encodingType,n===y.VectorEncodingType.RANGE){if(i=new u.Vector,1===t){if("1"===e.substr(r,1))throw new b.DecodingError("Unable to decode default consent=1");r++}var o=g.IntEncoder.decode(e.substr(r,p.BitLength.numEntries),p.BitLength.numEntries);r+=p.BitLength.numEntries;for(var a=0;a<o;a++){var l=m.BooleanEncoder.decode(e.charAt(r));r+=p.BitLength.singleOrRange;var d=g.IntEncoder.decode(e.substr(r,p.BitLength.vendorId),p.BitLength.vendorId);if(r+=p.BitLength.vendorId,l){var c=g.IntEncoder.decode(e.substr(r,p.BitLength.vendorId),p.BitLength.vendorId);r+=p.BitLength.vendorId;for(var h=d;h<=c;h++)i.set(h)}else i.set(d)}}else{t=e.substr(r,s);r+=s,i=f.FixedVectorEncoder.decode(t,s)}return i.bitLength=r,i},r.buildRangeEncoding=function(e){var t=e.length,i=g.IntEncoder.encode(t,p.BitLength.numEntries);return e.forEach(function(e){var t=1===e.length;i+=m.BooleanEncoder.encode(!t),i+=g.IntEncoder.encode(e[0],p.BitLength.vendorId),t||(i+=g.IntEncoder.encode(e[1],p.BitLength.vendorId))}),i},r);function r(){}t.VendorVectorEncoder=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0}),(t=t.VectorEncodingType||(t.VectorEncodingType={}))[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"},function(e,i,t){"use strict";function r(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"_",{value:!0}),r(t(159)),r(t(160))},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var a=i(71),l=i(37),d=i(42),c=i(162),i=(r.encode=function(r,e){var s,n="";return r=a.SemanticPreEncoder.process(r,e),(s=Array.isArray(null===e||void 0===e?void 0:e.segments)?e.segments:new a.SegmentSequence(r,e)[""+r.version]).forEach(function(e,t){var i="";t<s.length-1&&(i="."),n+=a.SegmentEncoder.encode(r,e)+i}),n},r.decode=function(e,t){var i=e.split("."),r=i.length;t=t||new c.TCModel;for(var s=0;s<r;s++){var n=i[s],o=a.Base64Url.decode(n.charAt(0)).substr(0,a.BitLength.segmentType),o=l.SegmentIDs.ID_TO_KEY[d.IntEncoder.decode(o,a.BitLength.segmentType).toString()];a.SegmentEncoder.decode(n,t,o)}return t},r);function r(){}t.TCString=i},function(e,t,i){"use strict";i=i(165).decodeConsentString;e.exports={decodeConsentString:i}},function(t,i,e){"use strict";e.d(i,"a",function(){return B});var s=e(0),n=e.n(s),r=e(5),a=e(7),h=e(2),o=e(134),c=e(129),l=e(87),u=e(88),d=e(17),f=e(19),p=e(31),b=e(1),v=e(6),m=e(16),g=e(51),y=e(36),w=e(50),x=e(89),k=e(131),S=e(130),O=e(28),_=e(24),j=e(90),A=e(18),I=e(21),T=e(3),C=e(91),P=e(133),M=e(132),E=e(44),L=e(49);const R="player_instance";class B extends A.a{constructor(e,t,i,r,s,n){super(),this.services=e,this.GLOBAL=t,this.hs=i,this.cs=r,this.Ds=s,this.readyCallback=n,this.Fs={},this.Us="<cnx-placeholder></cnx-placeholder>",this.$s=100,this.Vs=1e3,this.isServerlessMode=!1,this.Ns=!1,this.Hs=[],this.qs="{{omidVerificationClient}}",this.hs&&this.zs(),this.Ws=L.a.detectUsingCSS(this.GLOBAL),this.Gs=Object(h.p)(this.GLOBAL)}Js(){const e={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(e.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(e.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(e.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(e.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(e.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(e.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=e}Qs(t){var i=this.GLOBAL.frameElement;if(Object(h.E)(i)){let e=i&&t?!1:!0;(e?Object(h.v):Object(h.R))(i)}}Ys(e,t){try{return this.Ks(e,t)}catch(e){return null}}Zs(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}tn(t,i){var e=this.Ys(t,i);return null===e?new Promise(e=>{setTimeout(()=>{e(this.tn(t,i))},this.$s)}):Promise.resolve(e)}in(e,t){e=this.Zs(e);return Promise.resolve(this.tn(e,t))}Ks(e,t){let i;return e.split(/(\.cnxEq\(\d+\))/).filter(e=>e).forEach(e=>{i=-1===e.indexOf("cnxEq")?i?i.querySelectorAll(e):Object(h.K)(e,t):this.en(i,e)}),i?(i.hasOwnProperty("length")&&(i=0<i.length?i[0]:null),i):null}en(e,t){t=/\d+/g.exec(t),t=parseInt(t[0],10);return t>e.length?Object(v.c)(e)[e.length-1]:Object(v.c)(e)[t]}nn(){return this.cs?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}rn(t,n){const o=Object(a.f)(this.GLOBAL);let i;return i=(Object(b.a)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering:n).forceInsertPath,new Promise((r,e)=>{let s=Object(h.f)(this.Us,this.GLOBAL);if(i||t.tag.parentNode===this.GLOBAL.document.head&&(!o.topChildFrame||n.renderInFrame)){let e,t,i;o.topChildFrame&&Object(h.L)(o.topChildFrame.frameElement,T.h.DisplayNone),e=(Object(b.h)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering:n).containerSelector,t=(Object(b.a)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering:n).insertPosition,i=(Object(b.a)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering:n).position,this.in(e,o.topFrame).then(e=>{this.an(e,s,t,i),r({insertContainer:s,insertWindow:o.topFrame})})}else o.topChildFrame&&!n.renderInFrame?(s=Object(h.f)(this.Us,o.topFrame),o.topChildFrame.frameElement.parentNode.insertBefore(s,o.topChildFrame.frameElement),Object(h.a)(o.topChildFrame.frameElement,T.h.DisplayNone),r({insertContainer:s,insertWindow:o.topFrame})):(t.tag.parentNode.insertBefore(s,t.tag),r({insertContainer:s}))})}hn(e,t,i){Object(h.y)(t,e,i)}cn(e,t,i){switch(i){case s.ProtoPlayerInsertMode.BeforeContainer:e.parentElement.insertBefore(t,e);break;case s.ProtoPlayerInsertMode.ReplaceContainer:e.parentElement.insertBefore(t,e),Object(h.M)(e);break;case s.ProtoPlayerInsertMode.HideContainer:e.parentElement.insertBefore(t,e),Object(h.v)(e);break;case s.ProtoPlayerInsertMode.AfterContainer:e.nextElementSibling?e.parentElement.insertBefore(t,e.nextElementSibling):e.parentElement.appendChild(t)}}an(e,t,i,r){i===s.ProtoPlayerInsertMode.WithinContainer?this.hn(e,t,r):this.cn(e,t,i)}ln(e,t=[]){e.lineItems=[...e.lineItems,...t];t=e.lineItems.length;e.lineItems=Object(v.e)("advertiserLineItemId",e.lineItems),t!==e.lineItems.length&&Object(r.a)({level:s.ProtoLoggingLevelEnum.WARNING,message:"Loader_duplicated_adsources",callStack:"_"})}un(t,i){const n=t.players[i],{playerModel:o,globalDomUtilsService:a}=this.Fs[i];if(this.Ws||this.services.UserManagerService.setThirdPartySyncUrls(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),p.a.sessionId=n.sessionId,this.dn.addPlayerSession(n.playerId,n.sessionId),o){var d=new u.a({browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:o.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,appID:this.externalAttributes._appSettings.appID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,deviceId:this.externalAttributes._appSettings.deviceID,isRecyclerViewIntegration:this.externalAttributes._appSettings.isRecyclerViewIntegration,appPageURL:this.externalAttributes._appSettings.appPageURL}),h=d.browser.browserType===_.a.InternetExplorer,f=new g.a(a),y=this.getViewabilityService(o,f,h),h=this.Ws;this.Ws=L.a.detectUsingCSS(o.global),h!==this.Ws&&Object(r.a)({message:"Loader_adBlockerDetection_changed_after_new_global",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO,exception:`${h}`});const v=new l.a(o,t.geoLocation,d.pageUrl,d.pageDomain,this.externalAttributes._appSettings,this.Gs),S={services:{GlobalDomUtilsService:a,ViewabilityService:y,TrackingService:this.pn(o,t,i),ResizeObserver:new c.a(o.global),UserManagerService:this.services.UserManagerService,MacrosService:v,EventsStorageService:this.services.EventsStorageService,PageFocusService:f,InteractionService:new M.a(o.global,d.isMobile)},config:d};this.Ws&&S.services.TrackingService.trackSessionAdBlocker(s.ProtoAdBlockDetectionTypeEnum.Banner),S.services.UserManagerService.setPageUrl(S.config.pageUrl);f=this.nn();S.services.TrackingService.setImplementationTypeOnMeta(f),o.externalMacros&&S.services.MacrosService.addExtraMacros(o.externalMacros),S.services.UserManagerService.onEvent([w.a.CCPA_INFO_RECEIVED]).then(()=>{S.services.MacrosService.setUsPrivacyString(S.services.UserManagerService.getUsPrivacyString())}),S.services.UserManagerService.onEvent([w.a.CONSENT_DATA_UPDATE]).then(()=>{S.services.TrackingService.updateMetadataModel({userId:S.services.UserManagerService.getTrackableUser()});const e=S.services.UserManagerService.getConsentPayload();if(S.services.TrackingService.hasGdprConsentPayload=Object(b.h)(e),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.hs){const e=o.lineItemSettings.lineItems.filter(e=>Object(b.h)(e.vendorId)).every(e=>this.services.UserManagerService.isConsent(e.vendorId));this.services.UserManagerService.gdprConsentMode=e?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}});d={wasPlayerReloaded:this.dn.wasPlayerReloaded(n.playerId),wasPlayerInView:this.dn.getSessionInView(n.playerId)};this.renderer=this.getRendererInstance(o,S,this.Ws,d,this.externalAttributes._appSettings),this.subscribe(I.c.SessionView,this.renderer,()=>{this.dn.addSessionInView(n.playerId)}),this.subscribe(I.c.SessionRendered,this.renderer,()=>{var e;this.bn&&(e=this.services.UserManagerService.getUserId(),new P.a(v,a,this.bn,e).addFraudSensorScript())});f=this.renderer.init(),d=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let e=n.customJsCode;if(e){const t=`${R}_${S.config.appId}`;this.GLOBAL[t]=d,e=e.cnx_replaceAll(`"{{${R}}}"`,`window.${t}`)}f?this.registerApiSuccess(d,e):this.registerApiError(m.a.RenderError,"Player size under supported value")}else this.registerApiError(m.a.SetupError,"No playlist was provided!")}pn(e,t,i){return e.disableTracking?new x.a:new o.a({userManagerService:this.services.UserManagerService,browser:t.browser,geoLocation:t.geoLocation,playerId:e.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:t.players[i].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:t.players[i].abTestId,explorationMode:t.explorationMode})}vn(t,i={useSafeMode:!0}){if(t){var{global:r,useSafeMode:i}=i,r=r||this.GLOBAL;let e;e=i?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,Object(h.z)(r.document.head,r,e.trim())}}zs(){var e;this.qs.includes("{{omidVerificationClient")||(e={useSafeMode:!1,global:window},this.vn(decodeURI(this.qs),e))}mn(){var{playerId:e,parseDomain:t}=this.gn;return this.yn(e,t).catch(e=>{e=new Error(e);throw Object(r.a)({callStack:e.stack,level:s.ProtoLoggingLevelEnum.FATAL,exception:e.message,message:"Prerender_Loader_player_id_call_get_pls",throttle:1e3}),this.registerApiError(m.a.SetupError,"player data call error"),this.wn(),e})}xn(t){var{browser:e,userInformation:i}=t;if(this.services.UserManagerService.setUserInformation(i),this.services.UserManagerService.setBrowserInfo(e),i&&i.callFraudSensor){const{lookupId:t,lookupResponseCode:r,publisherAdsTxt:s}=i;this.bn={lookupId:t,lookupResponseCode:r,publisherAdsTxt:s,deviceType:e.device}}y.a.serverAb0=t.serverAb0,y.a.serverAb1=t.serverAb1,Object(v.h)(t.players)?(1<t.players.length&&(this.Js(),this.Ns=!0),Object.keys(t.players).forEach(e=>{this.kn(t,this.gn,e)})):this.registerApiError(m.a.NoPlayer,`No player available for given player id:${this.gn.playerId}`),this.wn()}wn(){this.Sn(),this._n()}_n(){setTimeout(()=>{var e;this.Ns||(e=this.Hs[0],this.readyCallback&&this.readyCallback(e.apiErrorObj,e.apiConfigObj)),this.jn()})}jn(){this.Hs.filter(e=>e.apiErrorObj).forEach(()=>{this.services.EventsStorageService.emitRenderError()}),this.Hs.filter(e=>e.customJs).forEach(e=>{this.vn(e.customJs)})}kn(e,t,i){var r=e.players[i],s=this.Fs[i]["playerModel"];this.Qs(r.renderInFrame),this.un(e,i),this.An(s,this.renderer.playerContainer)}yn(e,t=!1){let i={parseDomain:t,referrer:this.Gs,pageUrl:this.pageUrl,tokens:[e]};i.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(i.forceLineItemId=this.queryParams.cnxLineItemId),this.queryParams.cnxPlayerId?i.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(i.forcePlayerId=e),this.queryParams.cnxExplorationMode&&(i.forceExploration=!0);const r=this.externalAttributes.settings["queryJsTargeting"];return Object(b.f)(r)&&0<Object.keys(r).length&&(i.queryJsTargeting=Object.keys(r).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:`${r[t]}`}),{})),i.customParam1=this.externalAttributes.customParam1,i.customParam2=this.externalAttributes.customParam2,i.customParam3=this.externalAttributes.customParam3,i.customParam4=this.externalAttributes.customParam4,i.customParam5=this.externalAttributes.customParam5,i.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,i.version=f.a.version,i.es6=f.b,i.userId=this.services.UserManagerService.getForcedTrackableUser(),i.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),i.clientAb0=y.a.clientAb0,i.clientAb1=y.a.clientAb1,i.implementationType=this.nn(),i.reloadedPlayers=this.dn.getCookiePlayersSession(),i=Object.assign(Object.assign({},i),this.getSpecificRequestData()),this.gn.playerId?this.getPlayerResponse(i,this.gn.playerId||"serverless"):new Promise((e,t)=>{this.isServerlessMode=!0,e(this.defaultInitFromProto())})}In(){var e=Object(d.b)("cnxVideoPosition",this.pageUrl),t=parseInt(Object(d.b)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:Object(d.b)("cnxStoryId",this.pageUrl),cnxLineItemId:Object(d.b)("cnxLineItemId",this.pageUrl),cnxPlayerId:Object(d.b)("cnxPlayerId",this.pageUrl),cnxMediaId:Object(d.b)("cnxMediaId",this.pageUrl),cnxPlaylistId:Object(d.b)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:e?parseInt(e,10):null,cnxExplorationMode:"true"===Object(d.b)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:Object(b.e)(t)?t:null,cnxSkipAdsFlag:"true"===Object(d.b)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt(Object(d.b)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===Object(d.b)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===Object(d.b)("cnxIsSeoTraffic",this.pageUrl)}}An(e,t){var i=this.getDelegateHandler();new k.a(this.GLOBAL,this.services.EventsStorageService,i,e,t).start()}Tn(){var e=this.GLOBAL.OmidSessionClient&&this.GLOBAL.OmidSessionClient[O.j];e?this.Cn=new S.a(e,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):Object(r.a)({message:"OmidSessionClient not found.",level:s.ProtoLoggingLevelEnum.FATAL})}Pn(n){const e=()=>new Promise((e,t)=>{var i=this.Mn();n.addCssStylesheetToHead(i,()=>e(),e=>t(e))});return Object(a.k)(()=>e()).catch(e=>{throw Object(r.a)({message:"Loader_add_css_link",exception:e,level:s.ProtoLoggingLevelEnum.INFO}),new Error(e)})}updateQueryParams(){this.queryParams=this.In()}loadScriptTag(e,t){let i;if(this.externalAttributes=e,t&&(i=this.GLOBAL.document.getElementById(t)),!i)return Object(r.a)({message:"Loader_no_script_id",exception:`${e.playerId}`,level:s.ProtoLoggingLevelEnum.WARNING}),this.registerApiError(m.a.SetupError,"Could not locate any script tag ids in the page"),!1;t=Object(b.f)(e.settings.plugins.adobeAnalyticsSettings);return this.Ds&&this.Tn(),this.gn={parseDomain:t,playerId:e.playerId,tag:i},!0}insertRenderer(){try{this.dn=new j.a(this.queryParams.cnxReloadTime),this.Qs();this.Sn=this.services.UserManagerService.registerPlsCall(()=>{try{this.mn().then(o=>{const t=[];o.players.forEach((i,n)=>{o.players[n].limitClientSideApiUse&&this.Js();var e=this.rn(this.gn,i).then(e=>{this.ln(i,o.lineItems);var t=this.getPlayerModel(e,o,n.toString()),e=new C.a(t.global);return Object(E.a)(t.lineItemSettings.lineItems),this.Fs[n]={playerModel:t,globalDomUtilsService:e},this.Pn(e)}).catch(e=>{this.registerApiError(m.a.SetupError,"rendering error"),Object(r.a)({message:"Loader_send_data_to_renderer",exception:e.message,callStack:e.stack,level:s.ProtoLoggingLevelEnum.FATAL})});t.push(e)}),Promise.all(t).then(()=>this.xn(o))})}catch(e){Object(r.a)({message:"Prerender_Loader_do_player_call",callStack:e.stack,exception:e.message,throttle:1e3})}})}catch(e){Object(r.a)({message:"Prerender_Loader_insert_renderer",exception:e.message,callStack:e.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||Object(a.e)(Object(a.f)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||Object(r.a)({message:"Prerender_Loader_find_page_url",level:s.ProtoLoggingLevelEnum.INFO,throttle:1e3}),new Promise(e=>{setTimeout(()=>{this.findPageUrl(t,i,!0).then(()=>e())},this.Vs)});try{return this.pageUrl=Object(d.d)(this.pageUrl),Promise.resolve()}catch(t){return Object(r.a)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL}),Promise.reject()}}registerApiError(e=m.a.SetupError,t=""){this.Hs.push({apiErrorObj:{type:e,message:t}})}registerApiSuccess(e,t){this.Hs.push({apiConfigObj:e,customJs:t})}destroy(){this.renderer&&this.renderer.destroy()}}},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o,a=i(0),r=i(7),s=i(2),n=i(32),l=i(26),d=i(1);(i=o=o||{}).AppUrl="APP_URL",i.AppBundle="APP_BUNDLE",i.AppName="APP_NAME",i.Uuid="UUID",i.PageUrl="PAGE_URL",i.AdPosition="AD_POSITION",i.VideoTitle="VIDEO_TITLE",i.MediaTitle="MEDIA_TITLE",i.VideoDuration="VIDEO_DURATION",i.ContentLength="CONTENT_LENGTH",i.VideoDescription="VIDEO_DESCRIPTION",i.VideoUrl="VIDEO_URL",i.VideoId="VIDEO_ID",i.VideoTime="VIDEO_TIME",i.DescriptionUrl="DESCRIPTION_URL",i.VideoKeywords="VIDEO_KEYWORDS",i.Autoplay="AUTOPLAY",i.UserAgent="UA",i.Ip="IP",i.CashBuster="CB",i.Width="WIDTH",i.Height="HEIGHT",i.Domain="DOMAIN",i.SourceReferrer="SOURCE_REFERRER",i.Gdpr="GDPR",i.GdprConsent="GDPR_CONSENT",i.Consent="CONSENT",i.Ctd="CTD",i.Publisher="PUBLISHER",i.Random="RAND",i.Site="SITE",i.SubId="SUB_ID",i.Url="URL",i.UserLat="USER_LAT",i.UserLong="USER_LONG",i.UsPrivacyString="US_PRIVACY",i.DoNotTrack="DNT",i.FraudSensorUserId="FS_USER_ID",i.PublisherId="PUBLISHER_ID",i.SessionId="SESSION_ID",i.FraudSensorDeviceType="FS_DEVICE_TYPE",i.FraudSensorLookupId="MGID",i.FraudSensorLookupResponseCode="MGTO",i.FraudSensorMediaType="FS_MEDIA_TYPE",i.CnxSupplierId="CNX_SUPPLIER_ID";class c{constructor(e,t,i,r,s,n){this.En=new Map,this.Ln="[",this.Rn="]",this.En.set(o.Autoplay,e.playbackMode===a.ProtoPlayerPlaybackModeEnum.Autoplay),this.En.set(o.UserAgent,navigator.userAgent),this.En.set(o.UserLong,t.lon),this.En.set(o.UserLat,t.lat),this.En.set(o.Ip,t.ip),this.Bn(s),this.Dn(n),this.Fn(i),this.Un(),this.En.set(o.Domain,r),this.En.set(o.CnxSupplierId,l.e),this.En.set(o.SessionId,e.sessionId)}Bn(e){this.En.set(o.AppBundle,e.bundleID),this.En.set(o.AppName,e.appName),this.En.set(o.AppUrl,e.storeURL)}Dn(e){this.En.set(o.SourceReferrer,e)}Un(){var e=Object(s.D)()?1:0;this.En.set(o.DoNotTrack,e)}Fn(e){this.En.set(o.PageUrl,e),this.En.set(o.Url,e),this.En.set(o.Publisher,e),this.En.set(o.Site,e),this.En.set(o.DescriptionUrl,e)}$n(){var e=Object(r.c)();this.En.set(o.CashBuster,e),this.En.set(o.Random,e),this.En.set(o.Ctd,e)}Vn(e){return e.split("?")[0]}Nn(e){return e.split("?").slice(1).join("?")}Hn(e,t,i){return 0===e.indexOf(t)&&e.indexOf(i,i.length)===e.length-t.length}qn(e,t){var i=this.Vn(e),t=this.zn(this.Nn(e),t);return`${i}${t?`?${t}`:""}`}zn(e,i,r=!1){let s=e;return s.split("&").forEach(e=>{const t=e.split("=");if(t[1])if(this.Hn(t[1],this.Ln,this.Rn))s=s.replace(t[1],this.Wn(t[1].toLowerCase(),i,r));else if(1<decodeURIComponent(t[1]).split("=").length){const e=this.zn(decodeURIComponent(t[1]),i,!0);s=s.replace(t[1],encodeURIComponent(e))}}),this.Gn(s)}Gn(e){return e=-1<(e=-1<e.indexOf(this.Ln)?e.cnx_replaceAll(this.Ln,encodeURIComponent(this.Ln)):e).indexOf(this.Rn)?e.cnx_replaceAll(this.Rn,encodeURIComponent(this.Rn)):e}Wn(e,t,i){let r,s=e;return t.forEach((e,t)=>{for(;-1<s.indexOf(this.Ln+t.toLowerCase()+this.Rn);)r=i?e:encodeURIComponent(e),s=s.replace(this.Ln+t.toLowerCase()+this.Rn,r)}),s}setAdWidth(e){this.En.set(o.Width,Math.floor(e))}setAdHeight(e){this.En.set(o.Height,Math.floor(e))}setSubId(e){this.En.set(o.SubId,e)}setGDPR(e){this.En.set(o.Gdpr,e)}setUUID(e){this.En.set(o.Uuid,e)}setGDPRConsent(e){this.En.set(o.GdprConsent,e)}setConsent(e){this.En.set(o.Consent,e)}setVideoId(e){this.En.set(o.VideoId,e)}setVideoTime(e){this.En.set(o.VideoTime,Math.floor(e))}setVideoUrl(e){this.En.set(o.VideoUrl,e)}setVideoDescription(e){this.En.set(o.VideoDescription,e)}setVideoDuration(e){this.En.set(o.VideoDuration,e),this.En.set(o.ContentLength,e)}setVideoTitle(e){let t;this.En.set(o.VideoTitle,e),this.En.set(o.MediaTitle,e),e&&(t=e.split(" ").join(",")),this.En.set(o.VideoKeywords,t)}setAdPosition(e="midRoll"){this.En.set(o.AdPosition,e)}setupMacros(e){return this.$n(),this.qn(e,this.En)}addExtraMacros(t){const i=Object(n.a)(o);Object.keys(t).filter(e=>!i.includes(e.toUpperCase())).forEach(e=>{this.En.set(e,t[e])})}getExtraMacros(){const i=Object(n.a)(o),r={};return this.En.forEach((e,t)=>{i.includes(t)||null==e||(r[t]=Object(d.h)(e)?e:JSON.stringify(e))}),r}setUsPrivacyString(e){this.En.set(o.UsPrivacyString,e||"")}setUserId(e){this.En.set(o.FraudSensorUserId,e)}setPublisherId(e){this.En.set(o.PublisherId,e)}setFraudSensorMacros(e){this.En.set(o.FraudSensorDeviceType,e.deviceType),this.En.set(o.FraudSensorLookupId,e.lookupId),this.En.set(o.FraudSensorLookupResponseCode,e.lookupResponseCode),this.En.set(o.FraudSensorMediaType,e.mediaType)}destroy(){}}},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i(22),r=i(7),n=i(24),o=i(17),a=i(1);class l{constructor(e){this.Jn=e,this.Qn=100,this.Xn=Object(r.f)(window).topFrame,this.Yn=-1<s.a.indexOf(this.Jn.browser.device),this.Kn=Object(r.d)(),this.Zn={browserType:this.tr(),browserVersion:this.Jn.browser.browserVersion},this.ir=this.er(),this.sr=this.pageUrl.substr(0,this.Qn),this.nr=Object(o.a)(this.sr)}tr(){let t;return Object.keys(n.a).forEach(e=>{-1<this.Jn.browser.browserType.toLowerCase().indexOf(n.a[e])&&(t=n.a[e])}),t}er(){let t,e=0;const i=this.Jn.browser.osCode.split("_"),r=i[0].toLowerCase();return Object.keys(s.b).forEach(e=>{-1<r.indexOf(s.b[e])&&(t=s.b[e])}),1<i.length&&(e=parseFloat(`${i[1]||0}.${i[2]||0}`)),{os:t,osVersion:e}}get device(){return this.Jn.browser.device}get browser(){return this.Zn}get os(){return this.ir}get geoLocation(){return this.Jn.geoLocation}get pageUrl(){return this.Jn.pageUrl||""}get pageUrlTrunc(){return this.sr}get pageDomain(){return this.nr}get isMobile(){return this.Yn}get isInApp(){return Object(a.h)(this.Jn.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===s.b.Android}get playerId(){return this.Jn.playerId}get appId(){return this.Kn}get bundleID(){return this.Jn.bundleID}get iOSAppID(){return this.Jn.appID}get domainURL(){return this.Jn.domainURL}get storeURL(){return this.Jn.storeURL}get explorationMode(){return this.Jn.explorationMode}get appName(){return this.Jn.appName}get appCategories(){return this.Jn.appCategories}get appVersion(){return this.Jn.appVersion}get appPrivacyPolicy(){return this.Jn.appPrivacyPolicy}get appIsPaid(){return this.Jn.appIsPaid}get deviceId(){return this.Jn.deviceId}get topWindow(){return this.Xn}get isRecyclerViewIntegration(){return this.Jn.isRecyclerViewIntegration}get appPageURL(){return this.Jn.appPageURL}}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});class r{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdStart(){}startBidRequests(){}addPrebid(){}addPostBid(){}addBid(){}trackVideoAdImpression(){}trackVideoAdImpressionViewable(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}trackSessionAdBlocker(){}getMetadataModel(){}updateMetadataModel(){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}addPlatformCappedLineItemSubscriber(){}removePlatformCappedLineItemSubscriber(){}setImpressionRevenueSubscriber(){}unsubscribeToImpressionRevenue(){}trackHeavyAdIntervention(){}}},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var r=i(7),s=i(5),n=i(0),o=i(10);class a{constructor(e){this.RELOAD_TIME=o.a,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.rr={},this.ar={},this.hr={},this.Xn=Object(r.f)(window).topFrame,this.or(e);try{this.cr()}catch(e){Object(s.a)({message:"PlayerReloader_cookie_fetch_failed",level:n.ProtoLoggingLevelEnum.WARNING,exception:e})}}wasPlayerReloaded(e){return!!this.rr[e]}addPlayerSession(e,t){this.ar[e]=t}getCookiePlayersSession(){return this.rr}addSessionInView(e){this.ar[e]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(e){return this.hr[e]}or(e){setTimeout(()=>{this.lr(),this.Xn.location.reload()},e||this.RELOAD_TIME)}cr(){decodeURIComponent(this.Xn.document.cookie).split(";").forEach(e=>{const t=e.split("=");-1<t[0].indexOf(this.RELOAD_COOKIES)&&(this.rr=JSON.parse(t[1]))}),this.ur(),this.dr()}ur(){Object.keys(this.rr).forEach(e=>{var t=this.rr[e].indexOf(this.SESSION_IN_VIEW_FLAG);-1<t&&(this.rr[e]=this.rr[e].substr(0,t),this.hr[e]=!0)})}dr(){this.Xn.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}lr(){Object.keys(this.hr).forEach(e=>{-1===this.ar[e].indexOf(this.SESSION_IN_VIEW_FLAG)&&this.addSessionInView(e)});const e=new Date;var t=e.getTime();t+=o.g*o.f,e.setTime(t),this.Xn.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.ar)}; expires=${e.toUTCString()}; path=/`}}},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i(7),n=i(2),r=i(13),o=i(6),a=i(5),l=i(0),d=i(15),c=i(1);class h{constructor(e){this.createElement=(e,t=this.de)=>t.document.createElement(e),this.de=e,this.addPreconnect()}initHls(e){return e.cnxRenderWindow=this.de,new d(e)}addCssString(e,t=""){return Object(n.b)(e,t,this.de)}addPreconnect(){Object(n.c)(r.a.endPoints.base.video,this.de),Object(n.c)(r.a.endPoints.base.core,this.de),Object(n.c)(r.a.endPoints.base.image,this.de)}getLineHeightPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("line-height")}getFontSizePropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("font-size")}getFontWeightPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("font-weight")}getTransformPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("transform")}getPaddingTopPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-top")}getMarginBottomPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-left")}getMarginRightPropertyValue(e){return Object(n.l)(e,this.de).getPropertyValue("margin-right")}createElementByString(e,t=this.de){return Object(n.f)(e,t)}createDocumentFragment(e=this.de){return e.document.createDocumentFragment()}isHttpsProtocolUsed(){return Object(n.F)(this.de)}isURLSameDomainToTop(e){return Object(n.G)(e,this.de)}isDetachedFromDOM(e){let t=e;for(;t.parentNode;)if((t=t.parentNode)===this.de.document.body)return!1;return!0}querySelector(e,t=this.de){let i;try{i=t.document.querySelector(e)}catch(e){}return i}addCssStylesheetToHead(e,t,i){const r=this.de.document;r.getElementById(e.id)?Object(c.b)(t)&&t():Object(n.B)(e,r.head,this.de,t,i)}getFullscreenKeys(e){return Object(n.o)(e||this.de.document)}exitFullscreen(e,t){(t||this.de.document)[e]()}getDocumentProperty(e){return this.de.document[e]}addEventListenerOnGlobal(e,t,i,r=!1){(i?this.de.document:this.de).addEventListener(e,t,r)}removeEventListenerOnGlobal(e,t,i,r=!1){(i?this.de.document:this.de).removeEventListener(e,t,r)}trackWithImages(e,t){Object(s.m)(e,this.de,t)}getElementCoordinates(e){var{top:t,left:i}=e.getBoundingClientRect(),{width:r,height:s}=e.getBoundingClientRect(),e=this.de.pageYOffset;return{clientX:i+=this.de.pageXOffset,clientY:t+=e,width:r,height:s}}requestAnimationFrameHelper(e){return Object(n.P)(this.de,e)}cancelRequestAnimationFrame(e){return Object(n.e)(this.de,e)}getGlobalLocationProperties(){var e=this.de.location;return{hostname:e.hostname,pathname:e.pathname,href:e.href,protocol:e.protocol,host:e.host,port:e.port,search:e.search,hash:e.hash}}open(e,t){this.de.open(e,t)}getComputedTranslateX(e){let t=0;const i=Object(n.l)(e,this.de).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return Object(o.h)(i)&&(t=parseFloat(i[1].split(", ")[4])),t}getBodyDimensions(){try{var e=Object(s.f)(this.de).topFrame.document.body,{offsetWidth:t,offsetHeight:i}=e,r=Object(n.l)(e,this.de);return{width:t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),height:i+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}}catch(e){return Object(a.a)({message:"DomUtils_error_getting_body_dimensions",exception:e.message,callStack:e.stack,level:l.ProtoLoggingLevelEnum.FATAL}),{width:0,height:0}}}getViewportWidth(){return Object(s.f)(this.de).topFrame.innerWidth}getViewportHeight(){return Object(s.f)(this.de).topFrame.innerHeight}getGlobalClosestTop(){return Object(s.f)(this.de)}stripHtmlTags(e){return Object(n.T)(e,this.de)}getComputedStyle(e,t){return Object(n.l)(e,this.de,t)}getElementById(e){return Object(n.m)(e,this.de)}getElementsByClassName(e){return Object(n.n)(e,this.de)}insertScript(e,t,i){this.de.document.getElementById(e.id)?Object(c.b)(t)&&t():Object(n.A)(e,this.de.document.head,this.de,t,null,!0,i)}destroy(){}}},function(e,t){e.exports='<cnx class="cnx-tooltip-holder cnx-color-tt-bg"> <cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-up-next-container cnx-hide-on-single-video"> <cnx class=cnx-up-next-box> <cnx class=cnx-up-next-box-image> <img/> </cnx> <cnx class=cnx-up-next-box-gradient></cnx> <cnx class=cnx-up-next-box-text></cnx> <cnx class=cnx-up-next-box-button> <cnx class=cnx-up-next-box-button-text>NEXT</cnx> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-context"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports="<cnx class=cnx-captions> <cnx class=cnx-captions-container> <cnx-span class=cnx-captions-text-holder></cnx-span> </cnx> </cnx> "},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-icon"></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-icon"></cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-expand-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-collapse-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill-rule=evenodd><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-quality"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports='<svg viewBox="0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},function(e,t){e.exports='<cnx class="cnx-ad-skip-button cnx-ui-btn"> <cnx class=cnx-icon-button> <cnx class=cnx-skip-ad-text> Skip <cnx-span></cnx-span> </cnx> <cnx class=cnx-skip-ad-icon> <svg markup-inline viewBox="0 0 24 24" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule=evenodd /></svg> </cnx> </cnx> <cnx class=cnx-timer-loader> <svg markup-inline xmlns=http://www.w3.org/2000/svg width=36 height=36 viewBox="0 0 36 36"><circle class=cnx-svg-circle-stroke cx=18 cy=18 r=17 /></svg> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"></path></svg>'},function(e,t){e.exports="<cnx class=cnx-pod-loading-screen-container> <img class=cnx-pod-loading-background /> <cnx class=cnx-pod-loading-info> <cnx class=cnx-pod-open-new-icon> </cnx> <cnx class=cnx-pod-visit-website-text> <cnx-span>Visit Advertiser website</cnx-span> </cnx> <cnx class=cnx-pod-read-more-container> <cnx-span class=cnx-pod-read-more-btn>GO TO PAGE</cnx-span> </cnx> </cnx> <cnx class=cnx-pod-loading-fallback> <cnx class=cnx-pod-loading-spinner></cnx> <cnx-span class=cnx-pod-slot-count-text></cnx-span> </cnx> </cnx>"},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-icon-button> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"></path><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"></path><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"></rect><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(e,t){e.exports='<cnx class="cnx-live-poster cnx-mod-active"> <cnx class=cnx-live-broadcast> <cnx class=cnx-live-icon> <svg class=cnx-live-icon-starting markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=none fill-rule=nonzero><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill=#FFF /><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill=#FF4047 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill=#FFF /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill=#FFF transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> <svg class=cnx-live-icon-ended markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=#FFF fill-rule=evenodd><rect class=cnx-live-icon-svg-rectangle transform="rotate(90 22.06 21.43)" x=20.059 y=15.929 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> </cnx> <cnx class=cnx-live-message> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"> <cnx class=cnx-ui-live-badge> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 37 9" fill-rule=nonzero><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 1 0 0 6 3 3 0 1 0 0-6z" fill=#fff /><path d="M3 3a2 2 0 1 1 0 4 2 2 0 1 1 0-4z" fill=#ff4047 /></svg> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"></path><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"></path></svg>'},function(e,t){e.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(e,t){e.exports="<cnx class=cnx-slides-progress-bar> </cnx> "},function(e,t){e.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"></path></svg>'},function(e,t){e.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(e,t){e.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"></polygon></svg>'},function(e,t){e.exports='<cnx class=cnx-ui-click-to-play-btn> <cnx class=cnx-ui-click-to-play-btn-content> <svg markup-inline class="cnx-click-to-play-btn-icon cnx-color-accent" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg> <cnx class=cnx-onion-ring></cnx> <cnx-span class=cnx-click-to-play-btn-text>PLAY</cnx-span> </cnx> </cnx> '},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"></path></svg>'},function(e,t){e.exports=" <cnx class=cnx-button-text-label>1 min. story</cnx> "},function(e,t){e.exports='<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"> </cnx>'},function(e,t){e.exports="<cnx class=cnx-ui-ps-video-container></cnx> "},function(e,t,i){"use strict";var o,r,s=i(5),n=i(0),a=i(2),l=[],d="ResizeObserver loop completed with undelivered notifications.";(r=o=o||{}).BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";function g(e){if(I(e)){var t=e.getBBox(),i=t.width,t=t.height;return!i&&!t}return i=e.offsetWidth,t=e.offsetHeight,!(i||t||e.getClientRects().length)}function c(e){var t=null===(t=null===e||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(t&&e instanceof t.Element)}function m(e){return parseFloat(e||"0")}function f(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?t:e)||0,blockSize:(i?e:t)||0})}function h(e,t){if(void 0===t&&(t=!1),k.has(e)&&!t)return k.get(e);if(g(e))return k.set(e,w),w;var i=getComputedStyle(e),r=I(e)&&e.ownerSVGElement&&e.getBBox(),s=!C&&"border-box"===i.boxSizing,n=O.test(i.writingMode||""),o=!r&&A.test(i.overflowY||""),a=!r&&A.test(i.overflowX||""),l=r?0:m(i.paddingTop),d=r?0:m(i.paddingRight),c=r?0:m(i.paddingBottom),h=r?0:m(i.paddingLeft),u=r?0:m(i.borderTopWidth),p=r?0:m(i.borderRightWidth),t=r?0:m(i.borderBottomWidth),d=h+d,c=l+c,p=(r?0:m(i.borderLeftWidth))+p,u=u+t,t=a?e.offsetHeight-u-e.clientHeight:0,a=o?e.offsetWidth-p-e.clientWidth:0,o=s?d+p:0,s=s?c+u:0,o=r?r.width:m(i.width)-o-a,s=r?r.height:m(i.height)-s-t,p=o+d+a+p,u=s+c+t+u,s=Object.freeze({devicePixelContentBoxSize:f(Math.round(o*devicePixelRatio),Math.round(s*devicePixelRatio),n),borderBoxSize:f(p,u,n),contentBoxSize:f(o,s,n),contentRect:new S(h,l,o,s)});return k.set(e,s),s}function u(e,t,i){var r=(i=h(e,i)).borderBoxSize,s=i.contentBoxSize,n=i.devicePixelContentBoxSize;switch(t){case o.DEVICE_PIXEL_CONTENT_BOX:return n;case o.BORDER_BOX:return r;default:return s}}function p(e){if(g(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t}function y(e){return void 0===e&&(e=0),Date.now()+e}function b(e){!M&&0<e&&_.start(),(M+=e)||_.stop()}function v(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1}var P,S=(z.prototype.toJSON=function(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}},z.fromRect=function(e){return new z(e.x,e.y,e.width,e.height)},z),I=function(e){return e instanceof SVGElement&&"getBBox"in e},T="undefined"!=typeof window?window:{},k=new WeakMap,A=/auto|scroll/,O=/^tb|vertical/,C=/msie|trident/i.test(T.navigator&&T.navigator.userAgent),w=Object.freeze({devicePixelContentBoxSize:f(),borderBoxSize:f(),contentBoxSize:f(),contentRect:new S(0,0,0,0)}),x=function(e){var t=h(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},E=function(){var s=1/0,t=[];l.forEach(function(e){var r;0!==e.activeTargets.length&&(r=[],e.activeTargets.forEach(function(e){var t=new x(e.target),i=p(e.target);r.push(t),e.lastReportedSize=u(e.target,e.observedBox),i<s&&(s=i)}),t.push(function(){e.callback.call(e.observer,r,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length))});for(var e=0,i=t;e<i.length;e++)(0,i[e])();return s},L=function(i){l.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(e){e.isActive()&&(p(e.target)>i?t.activeTargets:t.skippedTargets).push(e)})})},R=[],M=0,B={attributes:!0,characterData:!0,childList:!0,subtree:!0},j=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],D=!1,_=($.prototype.run=function(t){var i,e,r,s,n,o=this;void 0===t&&(t=250),D||(D=!0,i=y(t),e=function(){var e=!1;try{e=function(){var e,t=0;for(L(t);l.some(function(e){return 0<e.activeTargets.length});)t=E(),L(t);return l.some(function(e){return 0<e.skippedTargets.length})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:d}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=d),window.dispatchEvent(e)),0<t}()}finally{if(D=!1,t=i-y(),!M)return;e?o.run(1e3):0<t?o.run(t):o.start()}},r=function(){requestAnimationFrame(e)},P||(s=0,n=document.createTextNode(""),new MutationObserver(function(){return R.splice(0).forEach(function(e){return e()})}).observe(n,{characterData:!0}),P=function(){n.textContent=""+(s?s--:s++)}),R.push(r),P())},$.prototype.schedule=function(){this.stop(),this.run()},$.prototype.observe=function(){function e(){return t.observer&&t.observer.observe(document.body,B)}var t=this;document.body?e():T.addEventListener("DOMContentLoaded",e)},$.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),j.forEach(function(e){return T.addEventListener(e,t.listener,!0)}))},$.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),j.forEach(function(e){return T.removeEventListener(e,t.listener,!0)}),this.stopped=!0)},new $),F=(G.prototype.isActive=function(){var e=u(this.target,this.observedBox,!0),t=this.target;return I(t)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return 1}}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},G),N=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},U=new WeakMap,V=(W.connect=function(e,t){t=new N(e,t);U.set(e,t)},W.observe=function(e,t,i){var r=U.get(e),e=0===r.observationTargets.length;v(r.observationTargets,t)<0&&(e&&l.push(r),r.observationTargets.push(new F(t,i&&i.box)),b(1),_.schedule())},W.unobserve=function(e,t){var i=U.get(e),e=v(i.observationTargets,t),t=1===i.observationTargets.length;0<=e&&(t&&l.splice(l.indexOf(i),1),i.observationTargets.splice(e,1),b(-1))},W.disconnect=function(t){var i=this,e=U.get(t);e.observationTargets.slice().forEach(function(e){return i.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},W),q=(H.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");V.observe(this,e,t)},H.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");V.unobserve(this,e)},H.prototype.disconnect=function(){V.disconnect(this)},H.toString=function(){return"function ResizeObserver () { [polyfill code] }"},H);function H(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");V.connect(this,e)}function W(){}function G(e,t){this.target=e,this.observedBox=t||o.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}function $(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}function z(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}i.d(t,"a",function(){return J});class J{constructor(e){this.pr=[],this.br=(e,t)=>{e.forEach(e=>{this.vr(e.target).forEach(e=>{e&&(Object(a.i)(e.element),e.callback(e.element))})})};try{const t=e.ResizeObserver||q;this.mr=new t(this.br)}catch(e){Object(s.a)({message:"ResizeObserver_constructor",callStack:e.stack,exception:e.message,level:n.ProtoLoggingLevelEnum.FATAL})}}on(e,t){this.gr(e,t)||(this.pr.push({element:e,callback:t}),this.mr.observe(e))}off(e,t){t=this.gr(e,t);t&&(this.mr.unobserve(t.element),0<=(t=this.pr.indexOf(t))&&this.pr.splice(t,1))}destroy(){if(this.pr)for(;0<this.pr.length;)this.pr.pop();this.mr.disconnect()}vr(t){return this.pr.filter(e=>e.element===t)}gr(t,i){return this.pr.find(e=>e.element===t&&e.callback===i)}}},function(e,t,i){"use strict";var r,n,s=i(28),o=i(12),a=i(52);(d=r=r||{}).Minimized="minimized",d.Collapsed="collapsed",d.Normal="normal",d.Expanded="expanded",d.Fullscreen="fullscreen",(n=n||{}).StateChanged="stateChanged";class l{constructor(e){this.mediator=e}computeState(e){var t=this.yr(e);this.wr&&this.wr.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.wr={dimensions:e,name:t},this.xr||t!==r.Normal||(this.xr=Object.assign({},this.wr))}setPlayerState(e){this.wr&&this.wr.name===e||this.mediator.publish(this,n.StateChanged,{payload:{state:e}}),this.wr={name:e},this.xr||e!==r.Normal||(this.xr=Object.assign({},this.wr))}get currentState(){return this.wr&&this.wr.name}yr(e){if(!this.xr)return r.Normal;var{width:t,height:i}=this.xr.dimensions,i=t*i,e=e.width*e.height;switch(!0){case i<e:return r.Expanded;case e<i:return r.Collapsed;default:return r.Normal}}}var d=i(18),c=i(5),h=i(0);i.d(t,"a",function(){return u});class u extends d.a{constructor(e,t,i){super(),this.kr=e,this.Sr=t,this.Or=new l(this),this._r=!1,this.jr={[o.a.AdError]:()=>this.Ar(),[o.a.PlayError]:()=>this.Ir(),[o.a.RenderError]:()=>this.Tr(),[o.a.AdImpression]:()=>this.Cr(),[o.a.AdComplete]:()=>this.Pr(),[o.a.AdVideoStart]:({adVideoStartMetadata:e})=>this.Mr(e),[o.a.AdVideoFirstQuartile]:()=>this.Er(),[o.a.AdVideoMidpoint]:()=>this.Lr(),[o.a.AdVideoThirdQuartile]:()=>this.Rr(),[o.a.AdVideoComplete]:()=>this.Br(),[o.a.VolumeChange]:({volume:e})=>this.Dr(e),[o.a.AdPause]:()=>this.Fr(),[o.a.AdPlay]:()=>this.Ur(),[o.a.AdSkipped]:()=>this.$r(),[o.a.AdClickThru]:()=>this.Vr(),[o.a.AdInteraction]:()=>this.Nr(),[o.a.AdLoaded]:({adLoadedMetadata:e})=>this.Hr(e),[o.a.AdStateChange]:({adStateChangedMetadata:e})=>this.qr(e),[o.a.PlayerResized]:({playerDimensionsMetadata:e})=>this.zr(e),[o.a.OnEnterFullscreen]:()=>this.Wr(),[o.a.PlayerCollapsed]:()=>this.Gr(),[o.a.PlayerExpanded]:()=>this.Jr(),[o.a.Destroy]:()=>this.unsubscribeAll(this.Or)},this.Qr=e=>{try{const t=this.jr[e.name];if(!t)return;t(e.metadata)}catch(e){Object(c.a)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:e.message,callStack:e.callStack,level:h.ProtoLoggingLevelEnum.WARNING})}};try{const{AdSession:e,AdEvents:t,MediaEvents:r}=this.kr,s=this.Xr(i);this.Yr=new e(s),this.Kr=new t(this.Yr),this.Zr=new r(this.Yr),this.Sr.subscribe(this.Qr),this.subscribe(n.StateChanged,this.Or,({payload:{state:e}})=>{this.ta(e)}),this.ia()}catch(e){Object(c.a)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:e.message,callStack:e.callStack,level:h.ProtoLoggingLevelEnum.WARNING})}}Ar(){this.Yr.error(s.d.Video,o.a.AdError)}Ir(){this.Yr.error(s.d.Video,o.a.PlayError)}Tr(){this.Yr.error(s.d.Generic,o.a.RenderError)}Xr(e){const{Partner:t,Context:i}=this.kr;return new i(new t(s.i,e))}Cr(){this._r=!0,this.Kr.impressionOccurred();var e=this.Or.currentState;e!==r.Normal&&this.ta(e)}Pr(){this._r=!1}Mr(e){var{duration:t,mediaPlayerVolume:e}=e;this.Zr.start(t,e)}Er(){this.Zr.firstQuartile()}Lr(){this.Zr.midpoint()}Rr(){this.Zr.thirdQuartile()}Br(){this.Zr.complete()}Dr(e){this._r&&this.Zr.volumeChange(e)}Fr(){this.Zr.pause()}Ur(){this.Zr.resume()}$r(){this.Zr.skipped()}Vr(){this.Zr.adUserInteraction(s.g.Click)}Nr(){this.Zr.adUserInteraction(s.g.InvitationAccept)}Hr(e){const{isSkippable:t,skipOffset:i,isAutoPlay:r}=e,s=this.kr["VastProperties"],n=new s(t,i,r,this.ea);this.Kr.loaded(n)}qr({state:e}){this.ea=s.h[a.a[e]]}ta(e){e&&this.Zr.playerStateChange(e)}sa(e){this.Or.computeState(e)}na(e){this.Or.setPlayerState(e)}zr(e){this.sa(e)}Wr(){this.na(r.Fullscreen)}Gr(){this.na(r.Minimized)}Jr(){this.na(r.Normal)}ia(){this.Yr.registerSessionObserver(e=>{e.type===s.b.SessionStart?this.ra(e):e.type===s.b.SessionError&&Object(c.a)({message:"SessionClientWrapper_omsdk_session_error",exception:e.type,callStack:JSON.stringify(e),level:h.ProtoLoggingLevelEnum.WARNING,throttle:1,sendMaxLog:!1})})}ra(e){e.data.creativeType===s.c.DefinedByJavascript&&this.Yr.setCreativeType(s.c.Video),e.data.impressionType===s.f.DefinedByJavascript&&this.Yr.setImpressionType(s.f.BeginToRender)}}},function(e,t,i){"use strict";var r,s,n=i(2);class o{constructor(e){this.aa=[],this.ha=e=>{this.aa.push(e)},this.oa=e.subscribe(this.ha)}get cachedEvents(){return this.aa}destroy(){this.aa=null,this.oa()}}(s=r=r||{}).AdobeAnalytics="AdobeAnalytics",s.MoatAnalytics="MoatAnalytics";const a={AdobeAnalytics:{id:"cnx-adobe-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.external.measurement.js"},MoatAnalytics:{id:"cnx-moat-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.moat.plugin.js"}};var l=i(1),d=i(5),c=i(0),h=i(6),u=i(32),p=i(7),g=i(17),m=i(19);i.d(t,"a",function(){return f});class f{constructor(e,t,i,r,s){this.Sr=t,this.ca=i,this.la=r,this.ua=s,this.da=[],this.fa=t=>{try{this.pa(t);const l=this.da.find(e=>e.name===t.type);let e;if(l&&!l.started){l.started=!0;const t=l.eventsCacheHandler;e=t.cachedEvents,t.destroy()}var{adobeAnalyticsSettings:i,moatAnalyticsSettings:r,_debugLogging:s}=this.la.apiConfig.settings.plugins,{secondLevelDomain:n,playerId:o}=this.la,a={cachedEvents:e,adobeAnalyticsSettings:i,moatAnalyticsSettings:r,_debugLogging:s,secondLevelDomain:n,playerId:o,pageName:this.ba,pageUrl:this.ze,version:m.a.version,delegateHandlers:this.ca,playerContainer:this.ua,playerWindow:window};t.getInstance().start(this.Sr,a)}catch(t){Object(d.a)({callStack:t.stack,exception:t.message,level:c.ProtoLoggingLevelEnum.FATAL,message:"PluginsHandler_initPlugin"})}};e=Object(p.f)(e);this.de=e.topFrame,this.ze=Object(p.e)(e,this.de),this.ze=Object(g.d)(this.ze),this.ba=Object(g.a)(this.ze)}start(){this.va(),this.ma(),this.de.cnxPlugins.pluginsHandlers.push(this.fa)}va(){let e=[];Array.isArray(this.de.cnxPlugins)&&0<this.de.cnxPlugins.length&&(e=this.de.cnxPlugins).forEach(e=>this.fa(e)),Object(l.f)(this.de.cnxPlugins)||this.ga(e)}ma(){var e=this.ya();Object(h.h)(e)&&this.wa(e)}xa(t){const e=this.de.cnxPlugins.cachedPlugins;if(Object(h.h)(e))return e.find(e=>e.type===t)}pa(e){this.xa(e.type)||this.de.cnxPlugins.cachedPlugins.push(e)}ga(e){this.de.cnxPlugins={cachedPlugins:e,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach(e=>{e(t)})}}}wa(e){e.forEach(e=>{this.xa(e)||this.da.push({name:e,started:!1,eventsCacheHandler:new o(this.Sr)})}),this.da.forEach(({name:e})=>this.ka(e))}Sa(e){return Object(u.a)(e).every(e=>Object(l.h)(e))}ya(){const e=[];return this.la.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.Sa(this.la.apiConfig.settings.plugins.adobeAnalyticsSettings)&&e.push(r.AdobeAnalytics),this.la.moatTrackingEnabled&&e.push(r.MoatAnalytics),e}ka(e){e=a[e];this.de.document.getElementById(e.id)||Object(n.A)(e,this.de.document.head,this.de,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},function(e,t,i){"use strict";var r=i(3),s=i(8),n=i(20),o=i(6),a=i(2);const l={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function d(e){return e.button===l.MAIN}var c=i(14),h=i(1);i.d(t,"a",function(){return u});class u{constructor(e,t,i){this.Oa=e,this.Yn=t,this.mediator=null,this._a=30,this.ja=250,this.Aa=25,this.Ia=[],this.Ta={},this.Ca=0,this.Pa=0,this.Ma=!0,this.Ea=null,this.La=!1,this.Ra=!1,this.Ba=!1,this.Da=!1,this.Fa=0,this.Ua=0,this.$a=null,this.Va=null,this.Na=null,this.Ha=!0,this.qa=e=>{this.Yn?(e.element.addEventListener("touchstart",this.za),e.element.addEventListener("touchmove",this.Wa),e.element.addEventListener("touchend",this.Ga),e.element.addEventListener("touchcancel",this.Ja)):(e.element.addEventListener("mousedown",this.Qa),e.element.addEventListener("mouseup",this.Xa))},this.Ya=e=>{this.Yn?(e.element.removeEventListener("touchstart",this.za),e.element.removeEventListener("touchmove",this.Wa),e.element.removeEventListener("touchend",this.Ga),e.element.removeEventListener("touchcancel",this.Ja)):(e.element.removeEventListener("mousedown",this.Qa),e.element.removeEventListener("mouseup",this.Xa))},this.za=e=>{e.stopPropagation();var t=this.Ka(e);this.Na=t,this.Ra=!1,this.Za(t,n.c.Hold)&&this.th(e);var i=this.ih(e);this.Pa=i.eventX,this.Ca=i.eventY,this.eh(e,t,n.b.InteractionStart),this.Ma=!0},this.Wa=e=>{e.stopPropagation();const t=this.Ka(e),i=this.ih(e);this.Ma&&(Math.abs(i.deltaXFromStart)>this.Aa||Math.abs(i.deltaYFromStart)>this.Aa)&&(this.Ma=!1),(this.La||this.Za(t,n.c.Swipe))&&(null===this.$a&&this.sh(t,i),this.$a!==n.a.Y&&(e.preventDefault(),null===this.Va&&(this.Va=Object(a.P)(this.Oa,()=>{this.Va=null,this.nh(i.deltaXFromStart),t.mediator.publish(t.context,s.a[s.a.SwipeMove],{payload:i.deltaXFromStart})}))))},this.Ga=e=>{const t=this.Ka(e);var i;this.Na===t&&(i=this.ih(e),e.cancelable&&this.Za(t,n.c.Hold)&&Math.abs(i.deltaXFromStart)<this.Aa&&Math.abs(i.deltaYFromStart)<this.Aa&&e.preventDefault(),this.rh(e,t,i),this.ah(i)===n.a.Y&&Math.abs(i.deltaYFromStart)>=this.Aa?this.Ha&&t.mediator.publish(t.context,s.a[s.a.Scroll]):!this.Ma||this.Ba||this.Ra||t.mediator.publish(t.context,s.a[s.a.Click])),this.Na=null},this.Ja=e=>{var t=this.Ka(e);this.rh(e,t),this.Na=null},this.Qa=e=>{var t;d(e)?(t=this.Ka(e),this.Na=t,e.stopPropagation(),e.preventDefault(),this.Za(t,n.c.Hold)&&this.th(e),this.eh(e,t,n.b.InteractionStart)):this.hh(n.b.InteractionStart,e)},this.Xa=e=>{if(!d(e)||!this.Na)return this.hh(n.b.Interaction,e),void this.hh(n.b.InteractionEnd,e);const t=this.Ka(e);e.stopPropagation(),e.preventDefault(),this.eh(e,this.Na,n.b.Interaction),this.eh(e,this.Na,n.b.InteractionEnd),(this.La||this.Za(t,n.c.Hold))&&this.oh(e),this.Na===t&&(this.eh(e,t,n.b.Click),t.mediator.publish(t.context,s.a[s.a.Click])),this.Na=null},this.lh=e=>{if(!d(e))return this.hh(n.b.Interaction,e),void this.hh(n.b.InteractionEnd,e);this.Na=null},this.uh=e=>{if(!d(e)||!this.Na)return this.hh(n.b.Interaction,e),void this.hh(n.b.InteractionEnd,e);this.eh(e,this.Na,n.b.Interaction),this.eh(e,this.Na,n.b.InteractionEnd),(this.La||this.Za(this.Na,n.c.Hold))&&this.oh(e),this.Na=null};var{leftTapSizeThreshold:e,holdTriggerDuration:t,scrollThreshold:i}=Object.assign({},i);this._a=e||this._a,this.ja=t||this.ja,this.Aa=i||this.Aa,this.Oa.document.addEventListener("mousedown",this.lh),this.Oa.document.addEventListener("mouseup",this.uh)}register(e,t,i,r={},s=[]){s={element:e,mediator:t,context:i,callbacks:r||{},allowedSpecialInteractions:s,disabledSpecialInteractions:[]};this.Ia.push(s),this.qa(s)}unregister(t){var e=this.Ia.find(e=>e.element===t);e&&(this.Ia=this.Ia.filter(e=>e.element!==t),this.Ya(e))}unregisterAll(t){const e=this.Ia.filter(e=>e.mediator===t);e.forEach(this.Ya),this.Ia=Object(o.a)(this.Ia,e)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach(e=>{this.Ta[e]=this.Ta[e]||[],this.Ta[e].push({initiator:t,action:i[e]})})}removeGlobalActions(t){Object.keys(this.Ta).forEach(e=>{this.Ta[e].some(e=>e.initiator===t)&&(this.Ta[e]=this.Ta[e].filter(e=>e.initiator!==t))})}disableSpecialInteractions(e){const t=this.dh(e);t.disabledSpecialInteractions=Object(o.n)(t.allowedSpecialInteractions)}enableSpecialInteractions(e){this.dh(e).disabledSpecialInteractions=[]}getNonInterruptibleInteractions(){return[s.a.HoldStart,s.a.HoldEnd,s.a.SwipeMove,s.a.SwipeEnd,s.a.Scroll]}disableScrollEvent(){this.Ha=!1}enableScrollEvent(){this.Ha=!0}destroy(){clearTimeout(this.Ea),this.Ia.forEach(this.Ya),this.Oa.document.removeEventListener("mousedown",this.lh),this.Oa.document.removeEventListener("mouseup",this.uh)}fh(e){const t=this.Ka(e),i=t.element.getBoundingClientRect(),r=this.ph(e),s=i.width,n=Object(c.g)(0,s,0,100,r);this.bh(t,this._a,n)}bh(e,t,i){i<t?e.mediator.publish(e.context,s.a[s.a.TapLeft]):e.mediator.publish(e.context,s.a[s.a.TapRight])}th(e){clearTimeout(this.Ea),this.La=!1,this.Ba=!1;const t=this.Ka(e);Object(a.a)(t.element,r.h.OnHold),this.Ea=setTimeout(()=>{this.La=!0,this.Ma&&(this.Ba=!0,t.mediator.publish(t.context,s.a[s.a.HoldStart]))},this.ja)}oh(e){clearTimeout(this.Ea);const t=this.Ka(e);Object(a.L)(t.element,r.h.OnHold),this.La?(this.La=!1,this.Ba&&(this.Ba=!1,t.mediator.publish(t.context,s.a[s.a.HoldEnd]))):(this.Ra=!0,this.fh(e))}rh(e,t,i){i=i||this.ih(e),e.stopPropagation(),this.eh(e,t,n.b.Interaction),this.eh(e,t,n.b.InteractionEnd),(this.La||this.Da||this.Ma&&this.Za(t,n.c.Hold))&&this.oh(e),(this.Da||this.Za(t,n.c.Swipe))&&this.vh(t,i)}sh(e,t){this.$a=this.ah(t),this.$a===n.a.X&&(this.Da=!0,this.La||(clearTimeout(this.Ea),this.Ea=null,this.La=!0,e.mediator.publish(e.context,s.a[s.a.HoldStart])))}vh(e,t){this.Da&&(t=this.mh(t),e.mediator.publish(e.context,s.a[s.a.SwipeEnd],{payload:t})),Object(a.e)(this.Oa,this.Va),this.Va=null,this.Da=!1,this.Pa=null,this.Ca=null,this.$a=null,this.Fa=0,this.Ua=0}nh(e){this.Ua<this.Aa?this.Ua++:(this.Fa=e,this.Ua=0)}ah(e){return Math.abs(e.deltaXFromStart)>=Math.abs(e.deltaYFromStart)?n.a.X:n.a.Y}mh(e){return e.deltaXFromStart-this.Fa<0?n.d.Left:n.d.Right}ih(e){e=e.changedTouches[0];return{deltaXFromStart:e.clientX-this.Pa,deltaYFromStart:e.clientY-this.Ca,eventX:e.clientX,eventY:e.clientY}}Ka(e){return this.Na||this.dh(e.currentTarget)}dh(t){return this.Ia.find(e=>e.element===t)}ph(e){const t=this.Ka(e);return this.Yn?e.changedTouches[0].clientX-t.element.getBoundingClientRect().left:e.offsetX}Za(e,t){return e.allowedSpecialInteractions.includes(t)&&!e.disabledSpecialInteractions.includes(t)}eh(e,t,i){const r=t.callbacks[i];Object(h.b)(r)&&r(e),this.hh(i,e)}hh(e,t){null===(e=this.Ta[e])||void 0===e||e.forEach(e=>{e.action(t)})}}},function(e,t,i){"use strict";var r,s,n=i(1),o=i(0);(s=r=r||{})[s.Desktop=2]="Desktop",s[s.SmartTV=3]="SmartTV",s[s.Smartphone=4]="Smartphone",s[s.Tablet=5]="Tablet",s[s.GameConsole=6]="GameConsole",s[s.Unrecognized=7]="Unrecognized";const a={[o.ProtoDeviceType.Desktop]:r.Desktop,[o.ProtoDeviceType.Smartphone]:r.Smartphone,[o.ProtoDeviceType.Tablet]:r.Tablet,[o.ProtoDeviceType.GameConsole]:r.GameConsole,[o.ProtoDeviceType.SmartTV]:r.SmartTV,[o.ProtoDeviceType.WearableComputer]:r.Unrecognized,[o.ProtoDeviceType.PDA]:r.Unrecognized,[o.ProtoDeviceType.Unrecognized]:r.Unrecognized},l="cnx_fraud_sensor";i.d(t,"a",function(){return d});class d{constructor(e,t,i,r){this.gh=e,this.yh=t,this.bn=i,this.wh(r)}addFraudSensorScript(){var e;this.yh.getElementById(l)||(e={id:l,src:this.gh.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[APP_BUNDLE]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")},this.yh.insertScript(e,null,"FraudSensor_script_error"))}wh(e){e=Object(n.h)(e)?e:"00000000-0000-0000-0000-000000000000";var{lookupId:t,lookupResponseCode:i,publisherAdsTxt:r}=this.bn,s=a[this.bn.deviceType];this.gh.setPublisherId(r),this.gh.setUserId(e),this.gh.setFraudSensorMacros({lookupId:t,lookupResponseCode:i,deviceType:s,mediaType:2})}}},function(e,t,i){"use strict";var n=i(25),o=i(0),m=i(19),r=i(13),s=i(10);class f{constructor(){this.xh=null,this.kh=0}Sh(){var e;null!==this.xh&&(e=(new Date).getTime(),this.kh=e-this.xh)}startCountingTime(){this.xh=(new Date).getTime()}stopCountingTime(){this.Sh(),this.xh=null}fetchTime(e){this.Sh();var t=Math.round(this.kh/s.f);return this.kh=0,null!==this.xh&&this.startCountingTime(),e<t?e:t}}var a=i(18),l=i(1),y=i(36),d=i(34),b=i(7),v=i(6),c=i(31);i(48),i.d(t,"a",function(){return h});class h extends a.a{constructor({userId:e,playerId:t,geoLocation:i,browser:r,sessionId:s,pageUrl:n,bundleId:o,userManagerService:a,customParam1:l,customParam2:d,customParam3:c,customParam4:h,customParam5:u,abTestId:p,explorationMode:g}){super(),this.hasGdprConsentPayload=!1,this._h={},this.jh={},this.Ah=!1,this.Ih=!1,this.Th=!1,this.Ch=!1,this.Ph=[],this.Mh=[],this.Eh=[],this.Lh=5e3,this.Rh=!1,this.Oh=!1,this.Bh=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.Dh=0,this.Fh=[],Object(v.g)(t,["47286b3d-90c5-4634-ac87-0061769d15a8","2a9c6007-6213-4187-9b0d-1a6e9d7826f0","dac6e2fc-472a-46e6-8a6b-b5bea57a50bc","112cdb88-91ea-452d-990c-03a7d3118d2c","075127fa-fec9-4ee7-9a4c-bfb4478a4412","2febda63-6ec9-4951-9c07-5939376b8226","55ca7ad7-f311-4854-b29a-a2d590760493","62bbbcda-024e-4769-968a-db84830f65cc","648d8d4d-fa41-496c-8415-26f3ad2d1989","6fdffbf5-b899-44ac-96a6-4eab50497b5b","b6094ff6-54a0-4ddd-b799-66193f8346c7","c81bb1f8-de80-428b-ae42-1ce0e75d3998","ddbadb2c-9e78-442a-b757-a49113a791ed","20d71b12-41ce-45db-8135-1a3cd111b25d","13e4ee65-6bed-40e6-8e41-4ef9087c294b","62d76d13-cd32-4021-a243-98b2444cd14d","b1c78103-4bb7-47ac-9cfe-dcd9b603e8a2","77a7ef56-c608-456d-8ff9-a382d139ff95","5d8eeea7-4ee0-4ad7-9023-97fbc8d97fa7","ed379095-5f46-4c1c-917d-ad063d84eaf1","0527ea2b-cb60-408e-85c1-e500bee128c3","148a0193-55d6-47a1-8a33-2c4ba9c97b5e","27937f13-f008-457b-938c-87c9fe447de8","4c2b6243-5715-4651-a27e-f6052b61af80","10efae62-af17-4d47-a65e-baabc2b60496","65d7cfb4-70a5-480a-95a7-25a713d61695","6e3ef6a1-2ccf-48b3-973c-55244487dc38","13426e00-211b-4c70-981e-d71a622543cf","728b020d-aa32-4009-ad0d-9c1b6b57b3c9","77e6bf0d-befe-4364-9f95-df37d478f297","19e14bfd-d5ef-4f82-8c9d-ea19512d0793","8c175c10-202a-4275-9e10-5ab9b216a61d","9429315c-a644-4fbf-938f-30cd23f2b098","a1bf91f8-98cb-4642-a2ec-2124782bf273","3025741e-c645-46ee-93db-c6b1c5cdb842","c32f1fb1-68d7-41cc-9a33-5f541d5b0cfd","c92ebcd4-b4c1-449e-809a-6744a0cd21d1","d0ad8360-284d-47d3-861d-6be5b09619e1","9b3b0ce6-cae5-43e0-b669-023c76e9127f","bbb6ab44-3b47-44d8-990c-642de4bb12ba","eeb97179-3486-4ca8-968c-c18f49e3be4a","ffc13c6a-6d6b-48dc-9965-d5a5adfea0f1","a8ec4044-50c7-46b1-8e8a-4da98ff95aed","ce2e36d0-8e66-4433-bb3c-47e78ad6f250","079b7e9c-6d8f-4772-b5d7-579c6f5f873b","04f884af-47ec-4754-a913-b38823f701a5","2e7b1501-840a-46f0-a3ae-015008b666d8","2ea0b3ba-66c9-46f4-a4a3-300f1bb36a93","3e1fcf24-0e7a-4aeb-9dce-a98d552dd7c7","5156a44c-a3d9-40ad-a592-b6ffb8019b2a","6b55d261-63c7-4349-804f-3d9bbd7aac85","8d95a3a5-ffa0-4932-8208-e06a8f659b55","a49d8dbb-b91f-41a3-b5a8-8a5b053af776","a585524a-2784-4b2d-924b-d872994cb7a8","225f96d6-6d58-483b-8856-ddffd61bac40","ad5efc62-db13-40f2-a76e-df9b90a2687b","08b46451-1849-433c-9019-85b2aeca87d1","bb5ad3b4-8fcd-4cb8-af70-383839db3712","e68c7376-e6c7-44ff-ad65-775691372f19","f5a3920b-15fc-4b52-8586-16091b9bedde","0c83603a-5d0c-4b62-a613-5f2db36510d3","0f3c7056-05d4-46fe-824c-32df48115369","81329826-a1f3-4f0b-86e1-2c1fb58cac85","a7b4eaad-8dea-41d5-8bd0-c8f13cd84296","c1282781-f75a-46b7-b774-5695e0a74c3d","d47819ae-be18-4054-8ffd-dc86eb6fdb5a"])?this._h.trackAllRequests=!0:this._h.trackAllRequests=1===Object(b.l)([99,1]),this.Uh=a,this._h.userId=e,this._h.playerId=t,this._h.geo=i,this._h.browser=r,this._h.version=m.a.version,this._h.sessionId=s,this._h.clientAb0=y.a.clientAb0,this._h.clientAb1=y.a.clientAb1,this._h.serverAb0=y.a.serverAb0,this._h.serverAb1=y.a.serverAb1,this._h.pageUrl=n,this._h.bundleId=o,this._h.customParam1=l,this._h.customParam2=d,this._h.customParam3=c,this._h.customParam4=h,this._h.customParam5=u,this._h.abTestId=p,this.$h=new f,this.Vh=new f,this.Nh=g}Hh(e,t=o.ProtoTrackingRequest,i,r=!0){return this._h.pageInFocus=c.a.pageFocus,n.a.sendProtoBeaconRequest({endpoint:e,ProtoRequest:t,requestData:Object.assign({trackingRequestMeta:r?this._h:void 0},i),logError:!1})}qh(e,t=o.ProtoTrackingRequest,i,r=!0){this._h.pageInFocus=c.a.pageFocus;const s=n.a.sendProtoRequest({endpoint:e,ProtoRequest:t,ProtoResponse:o.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:r?this._h:void 0},i),queryParams:{[d.b]:m.a.version},withCredentials:!0,logError:!0});return s.then(e=>{const t=e.platformCappedLineItemIdList;Object(v.h)(t)&&this.Fh.forEach(e=>{e.setPlatformCappedLineItemIdList(t)}),Object(l.e)(e.impressionRevenue)&&this.zh&&this.zh.notifyImpressionRevenue(e.impressionRevenue)}).catch(e=>{}),s}addPlatformCappedLineItemSubscriber(e){this.Fh.push(e)}removePlatformCappedLineItemSubscriber(e){e=this.Fh.indexOf(e);0<=e&&this.Fh.splice(e,1)}setImpressionRevenueSubscriber(e){this.zh=e}unsubscribeToImpressionRevenue(e){this.zh!==e&&(this.zh=void 0)}Wh(e,t,i=o.ProtoMediaTrackingRequest){const r=Object.assign({},t);Object(l.h)(this.jh.mediaId)&&(r.mediaGuid=this.jh.mediaId),this.qh(e,i,r)}Gh(){this.Rh||(this.Rh=!0,this.qh(r.a.endPoints.tracking.playerStart,o.ProtoTrackingRequest))}Jh(e,t,i=o.ProtoMediaTrackingRequest){return this.qh(e,i,Object.assign({mediaGuid:this.jh.mediaId},t))}Qh(e){this.Wh(r.a.endPoints.tracking.media_quartile,{baseMeta:this.jh,mediaId:this.jh.mediaId,quartile:e})}Xh(){this.Yh(this.Mh,this.Ph,this.Eh),this.Mh=[],this.Ph=[],this.Eh=[]}Yh(e,t,i){0===e.length&&0===t.length&&0===i.length||(i.forEach(e=>{e.error&&0<e.error.length&&(e.error=e.error.substring(0,500))}),i={mediaGuid:this.jh.mediaId,prebids:e,bids:t,postBids:i,logEveryting:this.Oh,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.Uh.gdprConsentMode,useExploration:this.Nh},this.qh(r.a.endPoints.tracking.bids,o.ProtoBidTrackingsRequest,i))}Kh(e){this.qh(r.a.endPoints.tracking.ad_click,o.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.jh.mediaId},e))}Zh(e){this.Hh(r.a.endPoints.tracking.heavy_ad_intervention,o.ProtoHeavyAdTrackingRequest,e)}to(){const e=this.Bh[this.Dh];clearTimeout(this.io),this.io=setTimeout(()=>{this.eo(e.delay),Object(l.e)(e.timesRepeatDelay)&&e.timesRepeatDelay--,0===e.timesRepeatDelay&&this.Dh++,this.to()},1e3*e.delay)}eo(e){this.qh(r.a.endPoints.tracking.session_time,o.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this._h,sessionTime:e,timePlayed:this.$h.fetchTime(e),timePlayedInView:this.Vh.fetchTime(e)})}so(e){var t=this._h["sessionId"];this.qh(r.a.endPoints.tracking.adOpportunity,o.ProtoAdOpportunityRequest,{sessionId:t,adBreak:e.adBreakType})}setNewMedia(e){this.jh=e}updateMediaMetadata(e){this.jh=e}setImplementationTypeOnMeta(e){this._h.implementationType=e}setMediaStart(){this.Qh(o.ProtoQuartilesEnum.Start)}setContentStart(){this.Gh()}setSessionPlayback(e){this.Th!==e&&(this.Th=e,this.Ch&&this.Th&&this.Vh.startCountingTime(),this.Th?this.$h.startCountingTime():(this.$h.stopCountingTime(),this.Vh.stopCountingTime()))}setSessionViewability(e){this.Ch!==e&&(this.Ch=e,this.Ch&&this.Th?this.Vh.startCountingTime():this.Ch||this.Vh.stopCountingTime())}trackSessionRendered(e){this.Ah||(this.qh(r.a.endPoints.tracking.session_rendered,o.ProtoTrackingRequest,{hasAdBlocker:e}),this.Ah=!0,this.to())}trackSessionViewability(){!this.Ih&&this.Rh&&(this.qh(r.a.endPoints.tracking.session_view),this.Ih=!0)}trackMediaQuartile(e){this.Qh(e)}trackMediaClick(e=o.ProtoMediaClickTypeEnum.Click){e={type:e,clickUrl:e===o.ProtoMediaClickTypeEnum.UrlClick?this.jh.clickUrl:void 0,slideTitle:this.jh.slideTitle,slideNumber:this.jh.slideNumber,slideMediaType:this.jh.slideMediaType};this.Wh(r.a.endPoints.tracking.media_click,e,o.ProtoMediaClickTrackingRequest)}setAdStart(){this.Gh()}startBidRequests(){this.no=setInterval(()=>{this.Xh()},this.Lh)}addPrebid(e){this.Mh.push(e)}addPostBid(e){Object(l.g)(e.error)||(e.error=JSON.stringify(e.error)),this.Eh.push(e)}addBid(e){this.Ph.push(e)}trackVideoAdImpression(e){return this.Jh(r.a.endPoints.tracking.ad_impression,e,o.ProtoVideoAdImpressionRequest)}trackVideoAdImpressionViewable(e){return this.Jh(r.a.endPoints.tracking.ad_impression_viewable,e,o.ProtoVideoAdImpressionViewableRequest)}trackVideoAdQuartile(e){this.Wh(r.a.endPoints.tracking.ad_quartile,e,o.ProtoVideoAdQuartilesRequest)}trackAdClick(e){this.Kh(e)}trackAdOpportunity(e){this.so(e)}trackSessionAdBlocker(e){this.qh(r.a.endPoints.tracking.sessionAdBlocker,o.ProtoSessionAdBlockerRequest,{trackingRequestMeta:this._h,adBlockDetectionType:e})}getMetadataModel(){return this._h}updateMetadataModel(e){this._h=Object.assign(Object.assign({},this._h),e)}trackHeavyAdIntervention(e){this.Zh(e)}destroy(){clearInterval(this.io),clearInterval(this.no)}}},function(e,t,i){"use strict";var r=t;function s(){r.Reader.ie(r.BufferReader),r.util.ie()}r.build="minimal",r.Writer=i(68),r.BufferWriter=i(144),r.Reader=i(70),r.BufferReader=i(145),r.util=i(41),r.rpc=i(146),r.roots=i(148),r.configure=s,r.Writer.ie(r.BufferWriter),s()},function(e,t,i){"use strict";e.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,r=2,o=!0;r<arguments.length;)i[n++]=arguments[r++];return new Promise(function(r,s){i[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,s(e))}})}},function(e,t,i){"use strict";t.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;1<--t%4&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var d=new Array(64),l=new Array(123),r=0;r<64;)l[d[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,i){for(var r,s=null,n=[],o=0,a=0;t<i;){var l=e[t++];switch(a){case 0:n[o++]=d[l>>2],r=(3&l)<<4,a=1;break;case 1:n[o++]=d[r|l>>4],r=(15&l)<<2,a=2;break;case 2:n[o++]=d[r|l>>6],n[o++]=d[63&l],a=0}8191<o&&((s=s||[]).push(String.fromCharCode.apply(String,n)),o=0)}return a&&(n[o++]=d[r],n[o++]=61,1===a&&(n[o++]=61)),s?(o&&s.push(String.fromCharCode.apply(String,n.slice(0,o))),s.join("")):String.fromCharCode.apply(String,n.slice(0,o))},t.decode=function(e,t,i){for(var r,s=i,n=0,o=0;o<e.length;){var a=e.charCodeAt(o++);if(61===a&&1<n)break;if(void 0===(a=l[a]))throw Error("invalid encoding");switch(n){case 0:r=a,n=1;break;case 1:t[i++]=r<<2|(48&a)>>4,r=a,n=2;break;case 2:t[i++]=(15&r)<<4|(60&a)>>2,r=a,n=3;break;case 3:t[i++]=(3&r)<<6|a,n=0}}if(1===n)throw Error("invalid encoding");return i-s},t.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},function(e,t,i){"use strict";function r(){this.ro={}}(e.exports=r).prototype.on=function(e,t,i){return(this.ro[e]||(this.ro[e]=[])).push({fn:t,ctx:i||this}),this},r.prototype.off=function(e,t){if(void 0===e)this.ro={};else if(void 0===t)this.ro[e]=[];else for(var i=this.ro[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this.ro[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this}},function(e,t,i){"use strict";function r(e){return"undefined"!=typeof Float32Array?(d=new Float32Array([-0]),c=new Uint8Array(d.buffer),h=128===c[3],e.writeFloatLE=h?g:m,e.writeFloatBE=h?m:g,e.readFloatLE=h?f:y,e.readFloatBE=h?y:f):(e.writeFloatLE=u.bind(null,b),e.writeFloatBE=u.bind(null,v),e.readFloatLE=p.bind(null,P),e.readFloatBE=p.bind(null,S)),"undefined"!=typeof Float64Array?(a=new Float64Array([-0]),l=new Uint8Array(a.buffer),h=128===l[7],e.writeDoubleLE=h?r:s,e.writeDoubleBE=h?s:r,e.readDoubleLE=h?n:o,e.readDoubleBE=h?o:n):(e.writeDoubleLE=t.bind(null,b,0,4),e.writeDoubleBE=t.bind(null,v,4,0),e.readDoubleLE=i.bind(null,P,0,4),e.readDoubleBE=i.bind(null,S,4,0)),e;function t(e,t,i,r,s,n){var o,a,l=r<0?1:0;0===(r=l?-r:r)?(e(0,s,n+t),e(0<1/r?0:2147483648,s,n+i)):isNaN(r)?(e(0,s,n+t),e(2146959360,s,n+i)):17976931348623157e292<r?(e(0,s,n+t),e((l<<31|2146435072)>>>0,s,n+i)):r<22250738585072014e-324?(e((o=r/5e-324)>>>0,s,n+t),e((l<<31|o/4294967296)>>>0,s,n+i)):(1024===(a=Math.floor(Math.log(r)/Math.LN2))&&(a=1023),e(4503599627370496*(o=r*Math.pow(2,-a))>>>0,s,n+t),e((l<<31|a+1023<<20|1048576*o&1048575)>>>0,s,n+i))}function i(e,t,i,r,s){t=e(r,s+t),r=e(r,s+i),s=2*(r>>31)+1,i=r>>>20&2047,t=4294967296*(1048575&r)+t;return 2047==i?t?NaN:1/0*s:0==i?5e-324*s*t:s*Math.pow(2,i-1075)*(t+4503599627370496)}function r(e,t,i){a[0]=e,t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],t[i+4]=l[4],t[i+5]=l[5],t[i+6]=l[6],t[i+7]=l[7]}function s(e,t,i){a[0]=e,t[i]=l[7],t[i+1]=l[6],t[i+2]=l[5],t[i+3]=l[4],t[i+4]=l[3],t[i+5]=l[2],t[i+6]=l[1],t[i+7]=l[0]}function n(e,t){return l[0]=e[t],l[1]=e[t+1],l[2]=e[t+2],l[3]=e[t+3],l[4]=e[t+4],l[5]=e[t+5],l[6]=e[t+6],l[7]=e[t+7],a[0]}function o(e,t){return l[7]=e[t],l[6]=e[t+1],l[5]=e[t+2],l[4]=e[t+3],l[3]=e[t+4],l[2]=e[t+5],l[1]=e[t+6],l[0]=e[t+7],a[0]}var a,l,d,c,h;function u(e,t,i,r){var s=t<0?1:0;0===(t=s?-t:t)?e(0<1/t?0:2147483648,i,r):isNaN(t)?e(2143289344,i,r):e(34028234663852886e22<t?(s<<31|2139095040)>>>0:t<11754943508222875e-54?(s<<31|Math.round(t/1401298464324817e-60))>>>0:(s<<31|(s=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,i,r)}function p(e,t,i){e=e(t,i),t=2*(e>>31)+1,i=e>>>23&255,e&=8388607;return 255==i?e?NaN:1/0*t:0==i?1401298464324817e-60*t*e:t*Math.pow(2,i-150)*(8388608+e)}function g(e,t,i){d[0]=e,t[i]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=c[3]}function m(e,t,i){d[0]=e,t[i]=c[3],t[i+1]=c[2],t[i+2]=c[1],t[i+3]=c[0]}function f(e,t){return c[0]=e[t],c[1]=e[t+1],c[2]=e[t+2],c[3]=e[t+3],d[0]}function y(e,t){return c[3]=e[t],c[2]=e[t+1],c[1]=e[t+2],c[0]=e[t+3],d[0]}}function b(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function v(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function P(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function S(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(t,i,e){"use strict";function s(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=s},function(e,t,i){"use strict";t.length=function(e){for(var t,i=0,r=0;r<e.length;++r)(t=e.charCodeAt(r))<128?i+=1:t<2048?i+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,i+=4):i+=3;return i},t.read=function(e,t,i){if(i-t<1)return"";for(var r,s=null,n=[],o=0;t<i;)(r=e[t++])<128?n[o++]=r:191<r&&r<224?n[o++]=(31&r)<<6|63&e[t++]:239<r&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,n[o++]=55296+(r>>10),n[o++]=56320+(1023&r)):n[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<o&&((s=s||[]).push(String.fromCharCode.apply(String,n)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,n.slice(0,o))),s.join("")):String.fromCharCode.apply(String,n.slice(0,o))},t.write=function(e,t,i){for(var r,s,n=i,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(s=e.charCodeAt(o+1)))?(++o,t[i++]=(r=65536+((1023&r)<<10)+(1023&s))>>18|240,t[i++]=r>>12&63|128):t[i++]=r>>12|224,t[i++]=r>>6&63|128),t[i++]=63&r|128);return i-n}},function(e,t,i){"use strict";e.exports=function(t,i,e){var r=e||8192,s=r>>>1,n=null,o=r;return function(e){if(e<1||s<e)return t(e);r<o+e&&(n=t(r),o=0);e=i.call(n,o,o+=e);return 7&o&&(o=1+(7|o)),e}}},function(e,t,i){"use strict";e.exports=s;var r=i(41);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=s.zero=new s(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return n;var t=e<0,i=(e=t?-e:e)>>>0,e=(e-i)/4294967296>>>0;return t&&(e=~e>>>0,i=~i>>>0,4294967295<++i&&(i=0,4294967295<++e&&(e=0))),new s(i,e)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(r.isString(e)){if(!r.Long)return s.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):n},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,e=~this.hi>>>0;return-(t+4294967296*(e=!t?e+1>>>0:e))}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;s.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?n:new s((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},function(e,t,i){"use strict";e.exports=o;var r=i(68);(o.prototype=Object.create(r.prototype)).constructor=o;var s=i(41),n=s.Buffer;function o(){r.call(this)}o.alloc=function(e){return(o.alloc=s.te)(e)};var a=n&&n.prototype instanceof Uint8Array&&"set"===n.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]};function l(e,t,i){e.length<40?s.utf8.write(e,t,i):t.utf8Write(e,i)}o.prototype.bytes=function(e){var t=(e=s.isString(e)?s.Zi(e,"base64"):e).length>>>0;return this.uint32(t),t&&this.Ls(a,t,e),this},o.prototype.string=function(e){var t=n.byteLength(e);return this.uint32(t),t&&this.Ls(l,t,e),this}},function(e,t,i){"use strict";e.exports=s;var r=i(70);(s.prototype=Object.create(r.prototype)).constructor=s;i=i(41);function s(e){r.call(this,e)}i.Buffer&&(s.prototype.Rs=i.Buffer.prototype.slice),s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,i){"use strict";t.Service=i(147)},function(e,t,i){"use strict";e.exports=r;var a=i(41);function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}((r.prototype=Object.create(a.EventEmitter.prototype)).constructor=r).prototype.rpcCall=function e(i,t,r,s,n){if(!s)throw TypeError("request must be specified");var o=this;if(!n)return a.asPromise(e,o,i,t,r,s);if(o.rpcImpl)try{return o.rpcImpl(i,t[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,t){if(e)return o.emit("error",e,i),n(e);if(null!==t){if(!(t instanceof r))try{t=r[o.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return o.emit("error",e,i),n(e)}return o.emit("data",t,i),n(null,t)}o.end(!0)})}catch(e){return o.emit("error",e,i),void setTimeout(function(){n(e)},0)}else setTimeout(function(){n(Error("already ended"))},0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,s=(n=Error,s(o,n),o);function o(e){e=n.call(this,e)||this;return e.name="DecodingError",e}t.DecodingError=s},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,s=(n=Error,s(o,n),o);function o(e){e=n.call(this,e)||this;return e.name="EncodingError",e}t.EncodingError=s},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,s=(n=Error,s(o,n),o);function o(e){e=n.call(this,e)||this;return e.name="GVLError",e}t.GVLError=s},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,s=(n=Error,s(o,n),o);function o(e,t,i){i=n.call(this,"invalid value "+t+" passed for "+e+" "+(i=void 0===i?"":i))||this;return i.name="TCModelError",i}t.TCModelError=s},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=(s.prototype.has=function(e){return s.langSet.has(e)},s.prototype.forEach=function(e){s.langSet.forEach(e)},Object.defineProperty(s.prototype,"size",{get:function(){return s.langSet.size},enumerable:!0,configurable:!0}),s.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","ZH"]),s);function s(){}t.ConsentLanguages=r},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,o=i(75),a=i(73),l=i(61),s=(n=i(43).Cloneable,s(d,n),d.prototype.has=function(e){return this.map.has(e)},d.prototype.isOkToHave=function(e,t,i){var r,s=!0;if(null!==(r=this.gvl)&&void 0!==r&&r.vendors){var n=this.gvl.vendors[i];if(n)if(e===l.RestrictionType.NOT_ALLOWED)s=n.legIntPurposes.includes(t)||n.purposes.includes(t);else if(n.flexiblePurposes.length)switch(e){case l.RestrictionType.REQUIRE_CONSENT:s=n.flexiblePurposes.includes(t)&&n.legIntPurposes.includes(t);break;case l.RestrictionType.REQUIRE_LI:s=n.flexiblePurposes.includes(t)&&n.purposes.includes(t)}else s=!1;else s=!1}return s},d.prototype.add=function(e,t){this.isOkToHave(t.restrictionType,t.purposeId,e)&&(t=t.hash,this.has(t)||(this.map.set(t,new a.BinarySearchTree),this.bitLength=0),this.map.get(t).add(e))},d.prototype.getVendors=function(e){var t,i=[];return e?(e=e.hash,this.has(e)&&(i=this.map.get(e).get())):(t=new Set,this.map.forEach(function(e){e.get().forEach(function(e){t.add(e)})}),i=Array.from(t)),i},d.prototype.getRestrictionType=function(e,t){var i;return this.getRestrictions(e).forEach(function(e){e.purposeId===t&&(void 0===i||i>e.restrictionType)&&(i=e.restrictionType)}),i},d.prototype.vendorHasRestriction=function(e,t){for(var i=!1,r=this.getRestrictions(e),s=0;s<r.length&&!i;s++)i=t.isSameAs(r[s]);return i},d.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach(function(e){t=Math.max(e.max(),t)}),t},d.prototype.getRestrictions=function(i){var r=[];return this.map.forEach(function(e,t){i&&!e.contains(i)||r.push(o.PurposeRestriction.unHash(t))}),r},d.prototype.getPurposes=function(){var i=new Set;return this.map.forEach(function(e,t){i.add(o.PurposeRestriction.unHash(t).purposeId)}),Array.from(i)},d.prototype.remove=function(e,t){var i=t.hash,t=this.map.get(i);t&&(t.remove(e),t.isEmpty()&&(this.map.delete(i),this.bitLength=0))},Object.defineProperty(d.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){var r=this;this.gvl_||(this.gvl_=e,this.map.forEach(function(t,e){var i=o.PurposeRestriction.unHash(e);t.get().forEach(function(e){r.isOkToHave(i.restrictionType,i.purposeId,e)||t.remove(e)})}))},enumerable:!0,configurable:!0}),d.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(d.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),d);function d(){var e=null!==n&&n.apply(this,arguments)||this;return e.bitLength=0,e.map=new Map,e}t.PurposeRestrictionVector=s},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(76),i=(s.ID_TO_KEY=[r.Segment.CORE,r.Segment.VENDORS_DISCLOSED,r.Segment.VENDORS_ALLOWED,r.Segment.PUBLISHER_TC],s.KEY_TO_ID=((i={})[r.Segment.CORE]=0,i[r.Segment.VENDORS_DISCLOSED]=1,i[r.Segment.VENDORS_ALLOWED]=2,i[r.Segment.PUBLISHER_TC]=3,i),s);function s(){}t.SegmentIDs=i},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.ao||function(i,r){var s,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(o=2&t[0]?n.return:t[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,t[1])).done)return o;switch(n=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,n=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){a.label=t[1];break}if(6===t[0]&&a.label<o[1]){a.label=o[1],o=t;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(t);break}o[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(i,a)}catch(e){t=[6,e],n=0}finally{s=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o=this&&this.ee||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"_",{value:!0});var a,l=i(43),d=i(35),s=(a=l.Cloneable,s(c,a),c.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=1,e.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},c.prototype.values=function(){return this.set_.values()},Object.defineProperty(c.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),c.prototype.has=function(e){return this.set_.has(e)},c.prototype.unset=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t.unset(e)}):"object"==typeof e?this.unset(Object.keys(e).map(function(e){return+e})):(this.set_.delete(e),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(function(e){t.maxId_=Math.max(t.maxId,e)})))},c.prototype.isIntMap=function(t){var i=this;return"object"==typeof t&&Object.keys(t).every(function(e){return Number.isInteger(parseInt(e,10))&&i.isValidNumber(t[e].id)&&void 0!==t[e].name})},c.prototype.isValidNumber=function(e){return 0<parseInt(e,10)},c.prototype.isSet=function(e){var t=!1;return t=e instanceof Set?Array.from(e).every(this.isValidNumber):t},c.prototype.set=function(e){var t=this;if(Array.isArray(e))e.forEach(function(e){return t.set(e)});else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(function(e){return+e}));else{if(!this.isValidNumber(e))throw new d.TCModelError("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}},c.prototype.empty=function(){this.set_=new Set},c.prototype.forEach=function(e){var t,i;try{for(var r=o(this),s=r.next();!s.done;s=r.next()){var n=s.value;e(n[1],n[0])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},Object.defineProperty(c.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),c.prototype.setAll=function(e){this.set(e)},c);function c(){var e=null!==a&&a.apply(this,arguments)||this;return e.bitLength=0,e.maxId_=0,e.set_=new Set,e}t.Vector=s},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(72),l=i(60),d=i(77),s=i(83),c=i(35),h=i(74),u=i(37),s=(n.encode=function(s,n){var e,o=this;try{e=this.fieldSequence[""+s.version][n]}catch(e){throw new c.EncodingError("Unable to encode version: "+s.version+", segment: "+n)}var a="";return n!==u.Segment.CORE&&(a=d.IntEncoder.encode(u.SegmentIDs.KEY_TO_ID[n],l.BitLength.segmentType)),e.forEach(function(t){var e=s[t],i=d.FieldEncoderMap[t],r=l.BitLength[t];void 0===r&&o.isPublisherCustom(t)&&(r=+s[h.Fields.numCustomPurposes]);try{a+=i.encode(e,r)}catch(e){throw new c.EncodingError("Error encoding "+n+"->"+t+": "+e.message)}}),r.Base64Url.encode(a)},n.decode=function(e,s,t){var n=this,o=r.Base64Url.decode(e),a=0;return t===u.Segment.CORE&&(s.version=d.IntEncoder.decode(o.substr(a,l.BitLength[h.Fields.version]),l.BitLength[h.Fields.version])),t!==u.Segment.CORE&&(a+=l.BitLength.segmentType),this.fieldSequence[""+s.version][t].forEach(function(e){var t=d.FieldEncoderMap[e],i=l.BitLength[e];if(0!==(i=void 0===i&&n.isPublisherCustom(e)?+s[h.Fields.numCustomPurposes]:i)){var r=o.substr(a,i);if(t===d.VendorVectorEncoder?s[e]=t.decode(r,s.version):s[e]=t.decode(r,i),Number.isInteger(i))a+=i;else{if(!Number.isInteger(s[e].bitLength))throw new c.DecodingError(e);a+=s[e].bitLength}}}),s},n.isPublisherCustom=function(e){return 0===e.indexOf("publisherCustom")},n.fieldSequence=new s.FieldSequence,n);function n(){}t.SegmentEncoder=s},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r,s,n,o,a,l,d,c,h,u,p,g,m,f,y,b,v,P,S,I,T,k,A,O,C=i(37),w=i(47),x=i(78),E=i(62),L=i(42),R=i(79),M=i(80),B=i(81),E=(r=C.Fields.version,s=C.Fields.created,n=C.Fields.lastUpdated,o=C.Fields.cmpId,a=C.Fields.cmpVersion,l=C.Fields.consentScreen,d=C.Fields.consentLanguage,c=C.Fields.vendorListVersion,h=C.Fields.policyVersion,u=C.Fields.isServiceSpecific,p=C.Fields.useNonStandardStacks,g=C.Fields.specialFeatureOptins,m=C.Fields.purposeConsents,f=C.Fields.purposeLegitimateInterests,y=C.Fields.purposeOneTreatment,b=C.Fields.publisherCountryCode,v=C.Fields.vendorConsents,P=C.Fields.vendorLegitimateInterests,S=C.Fields.publisherRestrictions,I=C.Fields.vendorsDisclosed,T=C.Fields.vendorsAllowed,k=C.Fields.publisherConsents,A=C.Fields.publisherLegitimateInterests,O=C.Fields.numCustomPurposes,i=C.Fields.publisherCustomConsents,C=C.Fields.publisherCustomLegitimateInterests,j[r]=L.IntEncoder,j[s]=x.DateEncoder,j[n]=x.DateEncoder,j[o]=L.IntEncoder,j[a]=L.IntEncoder,j[l]=L.IntEncoder,j[d]=R.LangEncoder,j[c]=L.IntEncoder,j[h]=L.IntEncoder,j[u]=w.BooleanEncoder,j[p]=w.BooleanEncoder,j[g]=E.FixedVectorEncoder,j[m]=E.FixedVectorEncoder,j[f]=E.FixedVectorEncoder,j[y]=w.BooleanEncoder,j[b]=R.LangEncoder,j[v]=B.VendorVectorEncoder,j[P]=B.VendorVectorEncoder,j[S]=M.PurposeRestrictionVectorEncoder,j.segmentType=L.IntEncoder,j[I]=B.VendorVectorEncoder,j[T]=B.VendorVectorEncoder,j[k]=E.FixedVectorEncoder,j[A]=E.FixedVectorEncoder,j[O]=L.IntEncoder,j[i]=E.FixedVectorEncoder,j[C]=E.FixedVectorEncoder,j);function j(){}t.FieldEncoderMap=E},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(37);t.FieldSequence=function(){var e;this[1]=((e={})[r.Segment.CORE]=[r.Fields.version,r.Fields.created,r.Fields.lastUpdated,r.Fields.cmpId,r.Fields.cmpVersion,r.Fields.consentScreen,r.Fields.consentLanguage,r.Fields.vendorListVersion,r.Fields.purposeConsents,r.Fields.vendorConsents],e),this[2]=((e={})[r.Segment.CORE]=[r.Fields.version,r.Fields.created,r.Fields.lastUpdated,r.Fields.cmpId,r.Fields.cmpVersion,r.Fields.consentScreen,r.Fields.consentLanguage,r.Fields.vendorListVersion,r.Fields.policyVersion,r.Fields.isServiceSpecific,r.Fields.useNonStandardStacks,r.Fields.specialFeatureOptins,r.Fields.purposeConsents,r.Fields.purposeLegitimateInterests,r.Fields.purposeOneTreatment,r.Fields.publisherCountryCode,r.Fields.vendorConsents,r.Fields.vendorLegitimateInterests,r.Fields.publisherRestrictions],e[r.Segment.PUBLISHER_TC]=[r.Fields.publisherConsents,r.Fields.publisherLegitimateInterests,r.Fields.numCustomPurposes,r.Fields.publisherCustomConsents,r.Fields.publisherCustomLegitimateInterests],e[r.Segment.VENDORS_ALLOWED]=[r.Fields.vendorsAllowed],e[r.Segment.VENDORS_DISCLOSED]=[r.Fields.vendorsDisclosed],e)}},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=i(37);t.SegmentSequence=function(e,t){this[1]=[r.Segment.CORE],this[2]=[r.Segment.CORE],2===e.version&&(e.isServiceSpecific?this[2].push(r.Segment.PUBLISHER_TC):((t=!(!t||!t.isForVendors))&&!0!==e[r.Fields.supportOOB]||this[2].push(r.Segment.VENDORS_DISCLOSED),t&&(e[r.Fields.supportOOB]&&0<e[r.Fields.vendorsAllowed].size&&this[2].push(r.Segment.VENDORS_ALLOWED),this[2].push(r.Segment.PUBLISHER_TC))))}},function(e,t,i){"use strict";var P=this&&this.ee||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S=this&&this.ho||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,n=i.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=n.next()).done;)o.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o};Object.defineProperty(t,"_",{value:!0});var r=i(35),I=i(37),i=(s.process=function(e,t){var i=e.gvl;if(!i)throw new r.EncodingError("Unable to encode TCModel without a GVL");if(!i.isReady)throw new r.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=i.language.toUpperCase(),0<(null===t||void 0===t?void 0:t.version)&&(null===t||void 0===t?void 0:t.version)<=this.processor.length?e.version=t.version:e.version=this.processor.length;t=e.version-1;if(!this.processor[t])throw new r.EncodingError("Invalid version: "+e.version);return this.processor[t](e,i)},s.processor=[function(e){return e},function(e,t){var i,r,s,n;e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset(1);var o=new Map;o.set("legIntPurposes",e.vendorLegitimateInterests),o.set("purposes",e.vendorConsents);try{for(var a=P(o),l=a.next();!l.done;l=a.next()){var d=S(l.value,2),c=d[0],h=d[1];try{for(var u=(s=void 0,P(h.values())),p=u.next();!p.done;p=u.next()){var g=p.value,m=t.vendors[g];if(!m||m.deletedDate)h.unset(g);else if(0===m[c].length)if(e.isServiceSpecific)if(0===m.flexiblePurposes.length)h.unset(g);else{for(var f=e.publisherRestrictions.getRestrictions(g),y=!1,b=0,v=f.length;b<v&&!y;b++)y=f[b].restrictionType===I.RestrictionType.REQUIRE_CONSENT&&"purposes"===c||f[b].restrictionType===I.RestrictionType.REQUIRE_LI&&"legIntPurposes"===c;y||h.unset(g)}else h.unset(g)}}catch(e){s={error:e}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(s)throw s.error}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return e.vendorsDisclosed.set(t.vendors),e}],s);function s(){}t.SemanticPreEncoder=i},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"_",{value:!0});var n,o=i(43),a=i(35),l=i(163),d=i(37),s=(n=o.Cloneable,s(c,n),Object.defineProperty(c.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){l.GVL.isInstanceOf(e)||(e=new l.GVL(e)),this.gvl_=e,this.publisherRestrictions.gvl=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(e){if(!(Number.isInteger(+e)&&1<e))throw new a.TCModelError("cmpId",e);this.cmpId_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(e){if(!(Number.isInteger(+e)&&-1<e))throw new a.TCModelError("cmpVersion",e);this.cmpVersion_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(e){if(!(Number.isInteger(+e)&&-1<e))throw new a.TCModelError("consentScreen",e);this.consentScreen_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(e){if(!/^([A-z]){2}$/.test(e))throw new a.TCModelError("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if((e=+e>>0)<0)throw new a.TCModelError("vendorListVersion",e);this.vendorListVersion_=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new a.TCModelError("policyVersion",e)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"version",{get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(e){this.useNonStandardStacks_=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e},enumerable:!0,configurable:!0}),c.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},c.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},c.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},c.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},c.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},c.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},c.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},c.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},c.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},c.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},c.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},c.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},c.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},c.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},c.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},c.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(c.prototype,"numCustomPurposes",{get:function(){var e,t=this.numCustomPurposes_;return"object"==typeof this.customPurposes&&(e=Object.keys(this.customPurposes).sort(function(e,t){return+e-+t}),t=parseInt(e.pop(),10)),t},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new a.TCModelError("numCustomPurposes",e)},enumerable:!0,configurable:!0}),c.prototype.updated=function(){this.lastUpdated=new Date},c.consentLanguages=l.GVL.consentLanguages,c);function c(e){var t=n.call(this)||this;return t.isServiceSpecific_=!1,t.supportOOB_=!0,t.useNonStandardStacks_=!1,t.purposeOneTreatment_=!1,t.publisherCountryCode_="AA",t.version_=2,t.consentScreen_=0,t.policyVersion_=2,t.consentLanguage_="EN",t.cmpId_=0,t.cmpVersion_=0,t.vendorListVersion_=0,t.numCustomPurposes_=0,t.specialFeatureOptins=new d.Vector,t.purposeConsents=new d.Vector,t.purposeLegitimateInterests=new d.Vector,t.publisherConsents=new d.Vector,t.publisherLegitimateInterests=new d.Vector,t.publisherCustomConsents=new d.Vector,t.publisherCustomLegitimateInterests=new d.Vector,t.vendorConsents=new d.Vector,t.vendorLegitimateInterests=new d.Vector,t.vendorsDisclosed=new d.Vector,t.vendorsAllowed=new d.Vector,t.publisherRestrictions=new d.PurposeRestrictionVector,e&&(t.gvl=e),t.created=new Date,t.updated(),t}t.TCModel=s},function(e,t,i){"use strict";var r,s=this&&this.Bs||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.oo||function(e,o,a,l){return new(a=a||Promise)(function(i,t){function r(e){try{n(l.next(e))}catch(e){t(e)}}function s(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?i(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,s)}n((l=l.apply(e,o||[])).next())})},a=this&&this.ao||function(i,r){var s,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(o=2&t[0]?n.return:t[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,t[1])).done)return o;switch(n=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,n=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){a.label=t[1];break}if(6===t[0]&&a.label<o[1]){a.label=o[1],o=t;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(t);break}o[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(i,a)}catch(e){t=[6,e],n=0}finally{s=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"_",{value:!0});var n,l=i(43),d=i(35),c=i(164),i=i(37),i=(n=l.Cloneable,s(h,n),Object.defineProperty(h,"baseUrl",{get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new d.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");0<e.length&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e},enumerable:!0,configurable:!0}),h.emptyLanguageCache=function(e){var t=!1;return void 0===e&&0<h.LANGUAGE_CACHE.size?(h.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(h.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t},h.emptyCache=function(e){var t=!1;return Number.isInteger(e)&&0<=e?(h.CACHE.delete(e),t=!0):void 0===e&&(h.CACHE=new Map,t=!0),t},h.prototype.cacheLanguage=function(){h.LANGUAGE_CACHE.has(this.lang_)||h.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},h.prototype.fetchJson=function(r){return o(this,void 0,void 0,function(){var t,i;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this.populate,[4,c.Json.fetch(r)];case 1:return t.apply(this,[e.sent()]),[3,3];case 2:throw i=e.sent(),new d.GVLError(i.message);case 3:return[2]}})})},h.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},h.prototype.changeLanguage=function(n){return o(this,void 0,void 0,function(){var t,i,r,s;return a(this,function(e){switch(e.label){case 0:if(s=n.toUpperCase(),!h.consentLanguages.has(s))return[3,6];if(s===this.lang_)return[3,5];if(this.lang_=s,!h.LANGUAGE_CACHE.has(s))return[3,1];for(i in t=h.LANGUAGE_CACHE.get(s))t.hasOwnProperty(i)&&(this[i]=t[i]);return[3,5];case 1:r=h.baseUrl+h.languageFilename.replace("[LANG]",n),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return e.sent(),this.cacheLanguage(),[3,5];case 4:throw s=e.sent(),new d.GVLError("unable to load language: "+s.message);case 5:return[3,7];case 6:throw new d.GVLError("unsupported language "+n);case 7:return[2]}})})},Object.defineProperty(h.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),h.prototype.isVendorList=function(e){return void 0!==e&&void 0!==e.vendors},h.prototype.populate=function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&h.CACHE.set(h.LATEST_CACHE_KEY,this.getJson()),h.CACHE.has(this.vendorListVersion)||h.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},h.prototype.mapVendors=function(e){var r=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(e){r.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(e){r.bySpecialPurposeVendorMap[e]=new Set}),Object.keys(this.features).forEach(function(e){r.byFeatureVendorMap[e]=new Set}),Object.keys(this.specialFeatures).forEach(function(e){r.bySpecialFeatureVendorMap[e]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(e){return+e})),this.vendorIds=new Set(e),this.vendors_=e.reduce(function(e,t){var i=r.vendors_[""+t];return i&&void 0===i.deletedDate&&(i.purposes.forEach(function(e){r.byPurposeVendorMap[e+""].consent.add(t)}),i.specialPurposes.forEach(function(e){r.bySpecialPurposeVendorMap[e+""].add(t)}),i.legIntPurposes.forEach(function(e){r.byPurposeVendorMap[e+""].legInt.add(t)}),i.flexiblePurposes&&i.flexiblePurposes.forEach(function(e){r.byPurposeVendorMap[e+""].flexible.add(t)}),i.features.forEach(function(e){r.byFeatureVendorMap[e+""].add(t)}),i.specialFeatures.forEach(function(e){r.bySpecialFeatureVendorMap[e+""].add(t)}),e[t]=i),e},{})},h.prototype.getFilteredVendors=function(e,t,i,r){var s=this,n=e.charAt(0).toUpperCase()+e.slice(1),o={};return("purpose"===e&&i?this["by"+n+"VendorMap"][t+""][i]:this["by"+(r?"Special":"")+n+"VendorMap"][t+""]).forEach(function(e){o[e+""]=s.vendors[e+""]}),o},h.prototype.getVendorsWithConsentPurpose=function(e){return this.getFilteredVendors("purpose",e,"consent")},h.prototype.getVendorsWithLegIntPurpose=function(e){return this.getFilteredVendors("purpose",e,"legInt")},h.prototype.getVendorsWithFlexiblePurpose=function(e){return this.getFilteredVendors("purpose",e,"flexible")},h.prototype.getVendorsWithSpecialPurpose=function(e){return this.getFilteredVendors("purpose",e,void 0,!0)},h.prototype.getVendorsWithFeature=function(e){return this.getFilteredVendors("feature",e)},h.prototype.getVendorsWithSpecialFeature=function(e){return this.getFilteredVendors("feature",e,void 0,!0)},Object.defineProperty(h.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),h.prototype.narrowVendorsTo=function(e){this.mapVendors(e)},Object.defineProperty(h.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),h.prototype.clone=function(){return new h(this.getJson())},h.isInstanceOf=function(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo},h.LANGUAGE_CACHE=new Map,h.CACHE=new Map,h.LATEST_CACHE_KEY=0,h.DEFAULT_LANGUAGE="EN",h.consentLanguages=new i.ConsentLanguages,h.latestFilename="vendor-list.json",h.versionedFilename="archives/vendor-list-v[VERSION].json",h.languageFilename="purposes-[LANG].json",h);function h(e){var t=n.call(this)||this;t.isReady_=!1,t.isLatest=!1;var i=h.baseUrl;if(t.lang_=h.DEFAULT_LANGUAGE,t.isVendorList(e))t.populate(e),t.readyPromise=Promise.resolve();else{if(!i)throw new d.GVLError("must specify GVL.baseUrl before loading GVL json");0<e?h.CACHE.has(e=e)?(t.populate(h.CACHE.get(e)),t.readyPromise=Promise.resolve()):(i+=h.versionedFilename.replace("[VERSION]",e+""),t.readyPromise=t.fetchJson(i)):h.CACHE.has(h.LATEST_CACHE_KEY)?(t.populate(h.CACHE.get(h.LATEST_CACHE_KEY)),t.readyPromise=Promise.resolve()):(t.isLatest=!0,t.readyPromise=t.fetchJson(i+h.latestFilename))}return t}t.GVL=i},function(e,t,i){"use strict";Object.defineProperty(t,"_",{value:!0});var r=(s.absCall=function(e,s,n,o){return new Promise(function(t,i){var r=new XMLHttpRequest;r.withCredentials=n,r.addEventListener("load",function(){if(r.readyState==XMLHttpRequest.DONE)if(200<=r.status&&r.status<300){var e=r.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}t(e)}else i(new Error("HTTP Status: "+r.status+" response type: "+r.responseType))}),r.addEventListener("error",function(){i(new Error("error"))}),r.addEventListener("abort",function(){i(new Error("aborted"))}),null===s?r.open("GET",e,!0):r.open("POST",e,!0),r.responseType="json",r.timeout=o,r.ontimeout=function(){i(new Error("Timeout "+o+"ms "+e))},r.send(s)})},s.post=function(e,t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=0),this.absCall(e,JSON.stringify(t),i,r)},s.fetch=function(e,t,i){return this.absCall(e,null,t=void 0===t?!1:t,i=void 0===i?0:i)},s);function s(){}t.Json=r},function(e,t,i){"use strict";var i=i(166),y=i.decodeBitsToIds,b=i.decodeFromBase64;e.exports={decodeConsentString:function(e){var t=b(e),i=t.version,r=t.cmpId,s=t.vendorListVersion,n=t.purposeIdBitString,o=t.maxVendorId,a=t.created,l=t.lastUpdated,d=t.isRange,c=t.defaultConsent,h=t.vendorIdBitString,u=t.vendorRangeList,p=t.cmpVersion,e=t.consentScreen,t=t.consentLanguage,g={version:i,cmpId:r,vendorListVersion:s,allowedPurposeIds:y(n),maxVendorId:o,created:a,lastUpdated:l,cmpVersion:p,consentScreen:e,consentLanguage:t};if(d){var m=u.reduce(function(e,t){for(var i=t.isRange,r=t.startVendorId,t=t.endVendorId,s=i?t:r,n=r;n<=s;n+=1)e[n]=!0;return e},{});g.allowedVendorIds=[];for(var f=1;f<=o;f+=1)(c&&!m[f]||!c&&m[f])&&-1===g.allowedVendorIds.indexOf(f)&&g.allowedVendorIds.push(f)}else g.allowedVendorIds=y(h);return g}}},function(e,t,i){"use strict";var l=i(167),i=i(169),d=i.versionNumBits,c=i.vendorVersionMap;function u(e,t,i){return parseInt(e.substr(t,i),2)}function p(e){e=u(e);return String.fromCharCode(e+65).toLowerCase()}function a(e){var t=e.input,d=e.output,i=e.startPosition,r=e.field,s=r.type,n=r.numBits,o=r.decoder,e=r.validator,a=r.listCount;if("function"==typeof e&&!e(d))return{newPosition:i};if("function"==typeof o)return o(t,d,i);var l,c,h="function"==typeof n?n(d):n;switch(s){case"int":return{fieldValue:u(t,i,h)};case"bool":return{fieldValue:1===parseInt(t.substr(i,1),2)};case"date":return{fieldValue:new Date(100*u(t,i,h))};case"bits":return{fieldValue:t.substr(i,h)};case"list":return function(e,t,i,r){var s=0;"function"==typeof r?s=r(d):"number"==typeof r&&(s=r);for(var n=t,o=[],a=0;a<s;a+=1){var l=g({input:e,fields:i.fields,startPosition:n}),n=l.newPosition;o.push(l.decodedObject)}return{fieldValue:o,newPosition:n}}(t,i,r,a);case"language":return{fieldValue:(l=i,c=h,p((l=t.substr(l,c)).slice(0,c/2))+p(l.slice(c/2)))};default:throw new Error("ConsentString - Unknown field type "+s+" for decoding")}}function g(e){var n=e.input,t=e.fields,e=e.startPosition,o=void 0===e?0:e;return{decodedObject:t.reduce(function(e,t){var i=t.name,r=t.numBits,s=a({input:n,output:e,startPosition:o,field:t}),t=s.fieldValue,s=s.newPosition;return void 0!==t&&(e[i]=t),void 0!==s?o=s:"number"==typeof r&&(o+=r),e},{}),newPosition:o}}e.exports={decodeBitsToIds:function(e){return e.split("").reduce(function(e,t,i){return"1"===t&&-1===e.indexOf(i+1)&&e.push(i+1),e},[])},decodeFromBase64:function(e,t){for(var i=e;i.length%4!=0;)i+="=";for(var r,i=i.replace(/-/g,"+").replace(/_/g,"/"),s=l.decode(i),n="",o=0;o<s.length;o+=1){var a=s.charCodeAt(o).toString(2);n+=(a=8-(r=a).length,function(e,t){for(var i=1<arguments.length&&void 0!==t?t:"0",r="",s=0;s<e;s+=1)r+=i;return r}(Math.max(0,a))+r)}return function(e,t){var i=1<arguments.length&&void 0!==t?t:c,t=u(e,0,d);if("number"!=typeof t)throw new Error("ConsentString - Unknown version number in the string to decode");if(!c[t])throw new Error("ConsentString - Unsupported version "+t+" in the string to decode");return g({input:e,fields:i[t].fields}).decodedObject}(n,t)}}},function(e,o,l){!function(r,s){var n;!function(){var e=(r&&r.exports,"object"==typeof s&&s);e.global!==e&&e.window;function t(e){this.message=e}(t.prototype=new Error).name="InvalidCharacterError";function d(e){throw new t(e)}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=/[\t\n\f\r ]/g,i={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&d("The string to be encoded contains characters outside of the Latin1 range.");for(var t,i,r,s,n=e.length%3,o="",a=-1,l=e.length-n;++a<l;)t=e.charCodeAt(a)<<16,i=e.charCodeAt(++a)<<8,r=e.charCodeAt(++a),o+=c.charAt((s=t+i+r)>>18&63)+c.charAt(s>>12&63)+c.charAt(s>>6&63)+c.charAt(63&s);return 2==n?(t=e.charCodeAt(a)<<8,i=e.charCodeAt(++a),o+=c.charAt((s=t+i)>>10)+c.charAt(s>>4&63)+c.charAt(s<<2&63)+"="):1==n&&(s=e.charCodeAt(a),o+=c.charAt(s>>2)+c.charAt(s<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(a,"")).length;(t=t%4==0?(e=e.replace(/==?$/,"")).length:t)%4!=1&&!/[^+a-zA-Z0-9\/]/.test(e)||d("Invalid character: the string to be decoded is not correctly encoded.");for(var i,r,s=0,n="",o=-1;++o<t;)r=c.indexOf(e.charAt(o)),i=s%4?64*i+r:r,s++%4&&(n+=String.fromCharCode(255&i>>(-2*s&6)));return n},version:"0.1.0"};void 0===(n=function(){return i}.call(o,l,o,r))||(r.exports=n)}()}.call(this,l(168)(e),l(69))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";e.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}}}},function(e,t){String.prototype.cnx_replaceAll=function(e,t){return this.split(e).join(t)}},function(e,t,i){"use strict";i.r(t);var r,g=i(5),m=i(50),f=(i(170),i(0)),s=i(86),n=i(18),o=i(21),d=i(32),p=i(6),l=i(3),a=i(38);(Te=r=r||{}).Deprecation="deprecation",Te.Intervention="intervention",Te.Crash="crash";class c{constructor(e,t,i){this.de=e,this.co=t,this.uo=i,this.do=!1,this.fo=()=>{"hidden"===this.de.document.visibilityState&&this.po()},this.po=()=>{var e;!this.do&&this.bo&&(e=this.bo.takeRecords(),this.vo(e),this.do=!0)},this.vo=e=>{e.filter(({body:e})=>{return"HeavyAdIntervention"===(null===e||void 0===e?void 0:e.id)}).forEach(()=>{this.co.trackHeavyAdIntervention(this.uo)})},this.mo()&&this.gs()}destroy(){this.de.removeEventListener("pagehide",this.po),this.de.removeEventListener("visibilitychange",this.fo)}mo(){return!!this.de.ReportingObserver}gs(){this.bo=new this.de.ReportingObserver(e=>{this.vo(e)},{buffered:!0,types:[r.Intervention]}),this.bo.observe(),this.de.addEventListener("pagehide",this.po),this.de.addEventListener("visibilitychange",this.fo)}}class h extends n.a{constructor(e,t,i,r,s,n){super(),this.mediator=e,this.playerModel=t,this.app=i,this.Ws=r,this.yo=s,this._appSettings=n,this.macroElements={player:[]},this.wo=!1,this.xo={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.ko=null,this.So=500,this.createExperience(t,n),this.Oo=new c(t.global,this.app.services.TrackingService,{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.Global}),this._o=new c(window,this.app.services.TrackingService,{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.Script})}subscribeToEvents(){this.subscribe(o.b.Destroy,this.experience,()=>{this.destroy()}),this.subscribe(o.b.CanStart,this.experience,()=>{this.experience.start()}),this.subscribe(o.c.SessionRendered,this.experience,()=>{this.yo.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(this.Ws),this.mediator.publish(this,o.c.SessionRendered)}),this.subscribe(o.c.SessionView,this.experience,()=>{this.yo.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,o.c.SessionView))}),Object(d.a)(this.experience.events).forEach(t=>{this.subscribe(t,this.experience,e=>{this.experienceApi.trigger(t,e.payload)})})}updateMacroContent(e,t){e&&e.forEach(e=>{e.textContent=t})}Pn(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}jo(e){return`<cnx>${e}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Ao(){if(this.experienceContainer=this.Io(),this.playerModel.html){var e=this.app.services.GlobalDomUtilsService.createElementByString(this.jo(this.playerModel.html));this.To(e);const t=this.macroElements.player[0];if(!t)throw Error("player macro was not found");t.innerHTML="",t.parentNode.insertBefore(this.experienceContainer,t),t.parentNode.removeChild(t),Object(p.c)(e.children).forEach(e=>{this.playerModel.targetContainer.parentNode.insertBefore(e,this.playerModel.targetContainer)})}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}Io(){var e=this.app.config.isMobile?l.g.Mobile:l.g.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${l.b.MainContainer} ${e} ${this.Co}"></cnx>`)}To(e){Object(p.c)(e.children).forEach(i=>{0<i.children.length&&this.To(i),Object.keys(this.xo).forEach(e=>{var t=this.xo[e];-1<i.textContent.indexOf(t)&&this.Po(e,i)})})}Po(e,t){this.macroElements[e]||(this.macroElements[e]=[]),this.macroElements[e].push(t),t.textContent=""}Mo(){null!==this.ko&&(clearInterval(this.ko),this.ko=null)}init(){this.Pn(),this.Ao();var e=this.app.config.device;return this.isSupportedBreakpoint(e)?(this.subscribeToEvents(),this.experience.Eo(this.playerModel,this.app,this.experienceContainer),this.ko=setInterval(()=>{this.wo?this.Mo():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),Object(g.a)({message:"player_removed_from_DOM",level:f.ProtoLoggingLevelEnum.INFO}))},this.So),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{a.a.playerDestroyed(),this.wo=!0,this.Mo(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.Oo.destroy(),this._o.destroy()}catch(e){Object(g.a)({callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING,message:"Renderer_destroy",exception:e.message})}}}var u,y,b,v=i(4);(t=u=u||{}).EnterStart="enterStart",t.EnterStop="enterStop",t.ExitStart="exitStart",t.ExitStop="exitStop",(Te=y=y||{})[Te.DirectionIn=0]="DirectionIn",Te[Te.DirectionOut=1]="DirectionOut",Te[Te.FadeIn=2]="FadeIn",(t=b=b||{}).Float="float",t.Embed="embed";var P,S=i(2);class I{constructor(e,t,i,r,s,n=0){this.Lo=e,this.Jn=t,this.Ro=i,this.Bo=r,this.Ss=s,this.Do=n,this.Fo=0,this.Uo=void 0,this.$o=null,this.Vo=!1,this.No=500,this.Ho=()=>{this.Uo&&this.qo()},this.zo=()=>{this.Jn.width=this.Wo.clientWidth,this.Go(),this.Uo&&this.Jo(!1)},this.Go=()=>{this.Qo()?!this.Xo||this.Uo||this.Vo?this.Yo():this.Ko():this.Uo&&this.Zo()},this.tc=e=>{if(this.ic(e.propertyName))switch(this.transitionState){case y.DirectionIn:this.transitionState=void 0,this.ec();break;case y.DirectionOut:this.transitionState=void 0,this.sc();break;case y.FadeIn:this.transitionState=void 0,this.nc()}},this.rc()}get transitionState(){return this.ac}set transitionState(e){this.ac===y.FadeIn&&this.hc(l.n.FadeInBase,l.n.FadeIn),this.ac=e}oc(...e){Object(S.a)(this.Ro,...e)}hc(...e){Object(S.L)(this.Ro,...e)}Yo(){this.Bo!==f.ProtoDeviceType.Smartphone&&(this.Ro.style.width=`${this.Jn.width}px`);var e=this.Ro.getBoundingClientRect().width;this.Ro.style.height=this.Jn.getHeight(e)}lc(){return Object(p.g)(this.Bo,this.Jn.floatingDeviceMode)}uc(){this.Ss.addEventListenerOnGlobal("scroll",this.Ho)}qo(){this.Wo&&(this.dc(),this.fc<this.Jn.floatingGutterY?this.pc(this.Jn.floatingGutterY):this.pc(this.fc))}bc(){this.Wo=this.Ss.querySelector(this.Jn.pageElement),this.Wo&&(clearInterval(this.$o),this.Jn.width=this.Wo.clientWidth,this.Go(),this.Lo.on(this.Wo,this.zo),this.Lo.on(this.Ss.getGlobalClosestTop().topFrame.document.body,this.zo))}dc(){switch(this.Jn.appendLocation){case f.ProtoFloatingAppendLocationEnum.Above:this.fc=this.Wo.getBoundingClientRect().top-this.Ro.offsetHeight-this.Jn.floatingYAxisPadding;break;case f.ProtoFloatingAppendLocationEnum.Below:this.fc=this.Wo.getBoundingClientRect().top+this.Wo.offsetHeight+this.Jn.floatingYAxisPadding;break;case f.ProtoFloatingAppendLocationEnum.Within:this.fc=this.Wo.getBoundingClientRect().top}}vc(){this.$o=setInterval(()=>{this.bc()},this.No),this.bc()}mc(){return this.Jn.floatingPosition===f.ProtoFloatingFixedPositionMode.Element}ic(e){switch(this.transitionState){case y.DirectionIn:case y.DirectionOut:if("right"===e||"left"===e)return!0;break;case y.FadeIn:if("opacity"===e)return!0}return!1}gc(){this.Ro.style.top="",this.Ro.style.bottom="",this.Ro.style.left="",this.Ro.style.right="",this.Ro.style.width="",this.Ro.style.height="",this.Ro.style.transform=""}sc(){this.Uo=!1,this.hc(l.o.MainClass,l.o.TransitionClass,this.Jn.positionClass),this.gc(),this.yc()}wc(){this.Jn.isPositionedTop?(this.Ro.style.top=`${this.Jn.floatingGutterY}px`,this.Ro.style.bottom="auto"):this.Jn.isPositionedBottom&&(this.Ro.style.top="auto",this.Ro.style.bottom=`${this.Jn.floatingGutterY}px`)}pc(e){this.Ro.style.transform=`translateY(${e}px)`}xc(e){e?this.oc(l.o.TransitionClass):this.hc(l.o.TransitionClass)}kc(e,t=!1,i=!1){this.xc(t),i||this.Jn.isPositionedLeft?(this.Ro.style.left=`${e}px`,this.Ro.style.right="auto"):(this.Ro.style.left="auto",this.Ro.style.right=`${e}px`)}Qo(){return Object(S.t)(this.Ro).document.body.getBoundingClientRect().width>=this.Do}Ko(){!this.Qo()||this.mc()&&(!this.Wo||this.Wo&&0===this.Wo.clientWidth)||(this.Uo=!0,this.transitionState=y.DirectionIn,this.oc(l.o.MainClass,this.Jn.positionClass),this.Go(),this.mc()?(this.Ro.style.top="0px",this.Sc(),this.kc(this.Fo,!1,!0),this.qo()):(this.wc(),this.kc(this.Fo)),this.Oc(),Object(S.i)(this.Ro),this.Wo?this.Jo(!0):this.kc(this.Jn.floatingGutterX,!0))}Sc(){this.Wo&&(this.Ss.getElementCoordinates(this.Wo).clientX<this.Ss.getBodyDimensions().width/2?(this.Jn.isPositionedLeft=!0,this.Jn.isPositionedRight=!1):(this.Jn.isPositionedLeft=!1,this.Jn.isPositionedRight=!0),this.rc())}rc(){this.mc()&&this.Jn.isPositionedRight?this.Fo=this.Ss.getBodyDimensions().width+(this.Jn.floatingWidth||1e3)+20:this.Fo=-((this.Jn.floatingWidth||1e3)+20)}Jo(e){let t;this.Sc(),t=this.Ss.getElementCoordinates(this.Wo).clientX,this.Jn.isPositionedLeft?t+=this.Jn.floatingGutterX:t-=this.Jn.floatingGutterX,this.kc(t,e,!0)}Zo(e=!0){var t;e&&(this.transitionState=y.DirectionOut),this._c(),t=this.mc(),this.kc(this.Fo,e,t),e||this.sc()}jc(){this.Ro.addEventListener("transitionend",this.tc),this.Lo.on(this.Ro,this.Go),this.mc()&&(this.vc(),this.uc())}Ac(){this.Lo.off(this.Ro,this.Go),this.Ro.removeEventListener("transitionend",this.tc),this.Wo&&(this.Lo.off(this.Wo,this.zo),this.Lo.off(this.Ss.getGlobalClosestTop().topFrame.document.body,this.zo),this.Ss.removeEventListenerOnGlobal("scroll",this.Ho),clearInterval(this.$o))}get isInFloating(){return this.Uo}}class T extends I{constructor(e,t,i,r,s,n,o,a=0){super(i,s,r,n,o,a),this.mediator=e,this.Ic=t,this.Tc=!0,this.Cc=!0,this.Pc=!1,this.Xo=!1,this.Mc=e=>{var t=this.Ic.getIsTabInFocus();e&&this.isInFloating&&(this.Xo=!1,this.Zo()),this.Tc&&this.Jn.floatingMode===f.ProtoPlayerFloatingMode.AfterInView&&e&&(this.Tc=!1),!e&&!this.Tc&&this.Cc&&t&&(this.Xo=!0,super.Ko())},this.Yo=()=>{this.isInFloating&&super.Yo()}}Zo(){var e=!this.Pc;super.Zo(e)}_c(){this.mediator.publish(this,u.ExitStart)}yc(){this.Ec()}Oc(){this.mediator.publish(this,u.EnterStart)}Ec(){this.transitionState=y.FadeIn,this.hc(l.n.FadeIn),this.oc(l.n.FadeInBase),Object(S.i)(this.Ro),this.oc(l.n.FadeIn)}ec(){this.mediator.publish(this,u.EnterStop)}nc(){this.hc(l.n.FadeInBase,l.n.FadeIn),this.mediator.publish(this,u.ExitStop),this.Vo&&super.Ac()}Lc(){this.Ic.on(this.Ro.parentElement,this.Mc,{threshold:.5})}Rc(){this.Ic.off(this.Ro.parentElement,this.Mc)}start(){this.lc()&&(super.jc(),this.Jn.floatingMode===f.ProtoPlayerFloatingMode.OnPageLoad&&(this.Tc=!1),this.Lc(),this.Mc(this.Ic.check({element:this.Ro.parentElement,threshold:.5})))}canFloat(){return this.lc()&&this.Jn.floatingMode!==f.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.sc(),this.Vo=!0):super.Ac(),this.Rc()}get enabled(){return this.Cc}set enabled(e){this.Cc=e}fullscreenStateChange(e){(this.Pc=e)?this.Rc():this.Lc(),this.Mc(e)}}(Te=P=P||{})[Te.Play=0]="Play",Te[Te.Pause=1]="Pause",Te[Te.Replay=2]="Replay",Te[Te.Volume=3]="Volume",Te[Te.Mute=4]="Mute",Te[Te.Unmute=5]="Unmute",Te[Te.Seek=6]="Seek",Te[Te.DraggingStart=7]="DraggingStart",Te[Te.DraggingStopped=8]="DraggingStopped",Te[Te.SeekingStart=9]="SeekingStart",Te[Te.SeekingStopped=10]="SeekingStopped",Te[Te.Expand=11]="Expand",Te[Te.Collapse=12]="Collapse",Te[Te.Quality=13]="Quality",Te[Te.Close=14]="Close",Te[Te.Next=15]="Next",Te[Te.Prev=16]="Prev",Te[Te.Settings=17]="Settings",Te[Te.CaptionOn=18]="CaptionOn",Te[Te.CaptionOff=19]="CaptionOff",Te[Te.CaptionUpdate=20]="CaptionUpdate",Te[Te.VolumeHoverStart=21]="VolumeHoverStart",Te[Te.VolumeHoverStopped=22]="VolumeHoverStopped",Te[Te.OverlayClick=23]="OverlayClick",Te[Te.UIHideStart=24]="UIHideStart",Te[Te.UIShowStart=25]="UIShowStart",Te[Te.UIEndShowHide=26]="UIEndShowHide",Te[Te.AboutClick=27]="AboutClick",Te[Te.ContextClick=28]="ContextClick",Te[Te.SettingsMenu=29]="SettingsMenu",Te[Te.HoverStart=30]="HoverStart",Te[Te.HoverEnd=31]="HoverEnd",Te[Te.StateChanged=32]="StateChanged",Te[Te.RebindComponent=33]="RebindComponent",Te[Te.SkipAd=34]="SkipAd",Te[Te.LogoClicked=35]="LogoClicked",Te[Te.ContextMenuOpen=36]="ContextMenuOpen",Te[Te.ContextMenuClose=37]="ContextMenuClose";var k=i(1),A=i(16);class O extends I{constructor(e,t,i,r,s,n,o=0){super(t,r,i,s,n,o),this.mediator=e,this.Xo=!0}Oc(){}ec(){this.mediator.publish(this,u.EnterStop)}_c(){}yc(){}nc(){}start(){this.lc()&&(super.jc(),super.Ko())}}const C={DetachedFromDom:"detachedFromDom",AdSlotResized:"adSlotResized"},w={DetachedFromDom:"detachedFromDom",AdsEnabled:"adsEnabled"};class x{constructor(e,t,i,r){this.Ro=e,this.Bc=r,this.Dc=this.Fc(i,t)}Fc(e,t){return Object.assign({},e[t]||e[f.ProtoDeviceType.Smartphone])}updateWidth(e){e=this.Uc(e);e!==this.currentBreakpointClass&&(Object(S.L)(this.Ro,this.currentBreakpointClass),Object(S.a)(this.Ro,e),this.currentBreakpointClass=e)}Uc(e){switch(!0){case e>=this.Dc.xxl:return this.Bc.Xxl;case e>=this.Dc.xl:return this.Bc.Xl;case e>=this.Dc.lg:return this.Bc.Lg;case e>=this.Dc.md:return this.Bc.Md;case e>=this.Dc.sm:return this.Bc.Sm;case e>=this.Dc.xs:return this.Bc.Xs;default:return this.Bc.Xxs}}}var E=i(27),L=i(10);const R={TimeElapsed:"timeElapsed",TimeUpdate:"timeUpdate"};class M{constructor(e,t=0,i=1e3){this.mediator=e,this.timerDuration=t,this.$c=i,this.Vc=0,this.Nc=null,this.Hc=!1,this.qc=()=>{this.zc(),this.mediator.publish(this,R.TimeUpdate),this.Wc(),this.Gc=(new Date).getTime()},t||this.disable()}zc(){this.Vc+=(new Date).getTime()-this.Gc}Jc(){this.Hc||(this.Wc(),this.Gc=(new Date).getTime(),this.Nc=setInterval(this.qc,this.$c))}Qc(){clearInterval(this.Nc),this.Nc=null}Xc(){this.disable(),this.mediator.publish(this,R.TimeElapsed),this.Vc=0}Wc(){this.Vc/L.f>=this.timerDuration/L.f&&this.Xc()}start(){this.Yc=!0,null===this.Nc&&this.Jc()}stop(){this.Yc=!1,null!==this.Nc&&(this.zc(),this.Qc())}reset(e){e&&(this.timerDuration=e),this.Vc=0,this.Hc=!1,null===this.Nc&&!this.Yc||(this.Qc(),this.Jc())}get timeElapsed(){return this.Vc}get timeRemaining(){return this.timerDuration-this.Vc}disable(){this.Hc=!0,this.Qc()}}const B={MidRollCapped:"midRollCapped",TotalAdBreakLengthExpired:"totalAdBreakLengthExpired",EnableAds:"enableAds",DisableAds:"disableAds",ForceStopAdSlot:"ForceStopAdSlot",ForceStopAdPod:"ForceStopAdPod",AdOpportunity:"adOpportunity",AdPodRemainingTime:"AdPodRemainingTime"};var j,D=i(26);(t=j=j||{})[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds";class _ extends n.a{constructor(e,t,i,r){super(),this.mediator=e,this.controlData=i,this.app=r,this.Kc=0,this.Zc=0,this.tl=null,this.currentPlayerAdSlot=E.ProtoAdSlotsEnum.PreRoll,this.il={stopped:!1,viewability:!1,inImpression:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,inAppRecyclerViewViewability:!1},this.firstAdBreakStarted=!1,this.el=!1,this.viewabilityStateChanged(t),this.onResize(this.controlData.playerDimensions.width,this.controlData.playerDimensions.height),this.controlData.totalAdBreakLength&&(this.sl=new M(this,this.controlData.totalAdBreakLength),this.subscribe(R.TimeElapsed,this.sl,()=>{this.mediator.publish(this,B.TotalAdBreakLengthExpired)}))}nl(){return this.Zc>=this.controlData.numberOfMidRolls&&-1!==this.controlData.numberOfMidRolls}rl(e){if(e)return e.stop(),this.unsubscribeAll(e),null}al(){var e;this.el&&(this.el=!1,e={[f.ProtoAdSlotsEnum.PreRoll]:f.ProtoAdBreakTypeEnum.PreRoll,[f.ProtoAdSlotsEnum.MidRoll]:f.ProtoAdBreakTypeEnum.MidRoll,[f.ProtoAdSlotsEnum.PostRoll]:f.ProtoAdBreakTypeEnum.PostRoll},this.mediator.publish(this,B.AdOpportunity,{payload:{adBreakType:e[this.currentPlayerAdSlot]}})),this.mediator.publish(this,B.EnableAds),this.sl&&this.sl.start()}canEnableAds(){return this.il.stopped||this.il.viewability||this.il.inImpression||this.il.forceDisable||this.il.zeroDimension||this.il.isAppBackgrounded||this.il.inAppRecyclerViewViewability||this.currentPlayerAdSlot===E.ProtoAdSlotsEnum.MidRoll&&this.nl()||this.currentPlayerAdSlot!==E.ProtoAdSlotsEnum.MidRoll&&0<this.Kc?{enableAds:!1,disableReason:j.Unknown}:{enableAds:!0,disableReason:j.Unknown}}toggleEnableAds(){var e=this.canEnableAds();e.enableAds?this.al():(this.mediator.publish(this,B.DisableAds,{payload:e.disableReason}),this.sl&&!this.il.inImpression&&this.sl.stop())}startAds(){this.il.stopped=!1,this.toggleEnableAds()}forceRecheck(){this.toggleEnableAds()}onAdImpression(e){this.currentPlayerAdSlot===E.ProtoAdSlotsEnum.MidRoll&&(this.firstAdBreakStarted||(this.firstAdBreakStarted=!0)),this.il.inImpression=!0,this.toggleEnableAds(),this.hl(),this.ol(),this.cl(e.payload.adSkipMode,e.payload.adDuration)&&(this.tl=setTimeout(()=>{this.mediator.publish(this,B.ForceStopAdSlot)},D.f*L.f))}ol(){this.controlData.maxAdPodDuration&&!this.ll&&(this.ll=new M(this,this.controlData.maxAdPodDuration),this.ll.start(),this.subscribe(R.TimeElapsed,this.ll,()=>{this.mediator.publish(this,B.ForceStopAdPod)}),this.subscribe(R.TimeUpdate,this.ll,()=>{var e=this.ll.timeRemaining;this.mediator.publish(this,B.AdPodRemainingTime,{payload:{remainingTime:e}})}))}hl(){this.controlData.maxAdSlotDuration&&!this.ul&&(this.ul=new M(this,this.controlData.maxAdSlotDuration),this.ul.start(),this.subscribe(R.TimeElapsed,this.ul,()=>{this.mediator.publish(this,B.ForceStopAdSlot)}))}cl(e,t){switch(this.controlData.playerAdsSkippability){case f.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((e===f.ProtoAdSkipMode.Never||e===f.ProtoAdSkipMode.IfLongerThan31Sec)&&!t)return!0;if(e===f.ProtoAdSkipMode.Never&&t>D.f)return!0;break;case f.ProtoPlayerAdSkippability.NoRestrictions:if(e===f.ProtoAdSkipMode.IfLongerThan31Sec&&!t)return!0}return!1}onAdFinished(e,t=!1){this.ul=this.rl(this.ul),t||(this.ll=this.rl(this.ll),this.currentPlayerAdSlot===E.ProtoAdSlotsEnum.MidRoll?this.Zc++:this.Kc++),this.nl()&&!t&&this.mediator.publish(this,B.MidRollCapped),e&&(this.el=!0),this.il.inImpression=!1,t?this.al():this.toggleEnableAds(),clearTimeout(this.tl)}onAdPause(){this.ll&&this.ll.stop(),this.ul&&this.ul.stop(),this.sl&&this.sl.stop()}onAdPlay(){this.ll&&this.ll.start(),this.ul&&this.ul.start(),this.sl&&this.sl.start()}onStop(){this.currentPlayerAdSlot=null,this.il.stopped=!0,this.toggleEnableAds()}onAdStateChange(e,t,i){this.controlData.maxAdSlotDuration=t.maxAdSlotDuration,this.controlData.maxAdPodDuration=t.maxAdPodDuration,e===this.currentPlayerAdSlot&&e===E.ProtoAdSlotsEnum.MidRoll||(null===e&&this.dl===E.ProtoAdSlotsEnum.MidRoll||(this.el=!0),e!==E.ProtoAdSlotsEnum.MidRoll&&(this.Kc=0,this.firstAdBreakStarted=!1),this.currentPlayerAdSlot=e,this.dl=e,this.startAds())}contentChanged(){this.Zc=0,this.firstAdBreakStarted=!1,this.toggleEnableAds()}viewabilityStateChanged(e,t=0,i=!1){this.fl=e,this.controlData.viewabilityPolicy===E.ProtoAdViewabilityPolicy.Strict&&(this.il.viewability=!e),i||this.toggleEnableAds()}setToggleAdsReason(e){this.il.isAppBackgrounded=e.isAppBackgrounded,this.il.inAppRecyclerViewViewability=e.inAppRecyclerViewViewability,this.toggleEnableAds()}disableAdvertising(){this.il.forceDisable=!0,this.toggleEnableAds()}enableAdvertising(){this.il.forceDisable=!1,this.toggleEnableAds()}destroy(){this.sl&&this.sl.disable(),clearTimeout(this.tl),this.ul=this.rl(this.ul),this.ll=this.rl(this.ll)}get inView(){return this.fl}onResize(e,t){this.il.zeroDimension=0===e||0===t,this.toggleEnableAds()}}(Te=Me=Me||{})[Te.Portrait=0]="Portrait",Te[Te.Landscape=1]="Landscape";var F=Me;class N{constructor(){this.pl={},this.bl=[]}getImage(e,t,i,r,s="",n=!1){return this.vl=e,this.ml=Object(k.h)(t)?t:"",this.gl=i,this.yl=r,this.wl=s,this.kl=n,this.Sl()}Sl(){var e=this.Ol();if(e)return e;const t=this.vl+this.wl,i=new Image;return i.src=t,i.alt=this.ml,this.pl[this.vl]=this.pl[this.vl]||{},this.pl[this.vl][this.gl]=this.pl[this.vl][this.gl]||{},this.pl[this.vl][this.gl][this.yl]=this.pl[this.vl][this.gl][this.yl]||{},this.pl[this.vl][this.gl][this.yl][this.wl]=i,i}Ol(){var e=this._l();if(e)return e;if(this.kl){this.jl();e=this.Al();return e?e:this.Il()||void 0}}jl(){const r=[];if(this.pl[this.vl]){const s=this.pl[this.vl],n=this.gl>this.yl?F.Landscape:F.Portrait;Object.keys(s).forEach(t=>{const i=parseInt(t,10);Object.keys(s[t]).filter(e=>!!s[t][e]).forEach(e=>{e=parseInt(e,10);(i>e?F.Landscape:F.Portrait)===n&&(e={area:i*e,img:this.Tl(this.vl,i,e)},r.push(e))})}),this.bl=[...r]}else this.bl=[]}Tl(e,t,i){if(this.pl[e]&&this.pl[e][t]&&this.pl[e][t][i])return this.pl[e][t][i][Object.keys(this.pl[e][t][i])[0]]}_l(){return this.pl[this.vl]&&this.pl[this.vl][this.gl]&&this.pl[this.vl][this.gl][this.yl]&&this.pl[this.vl][this.gl][this.yl][this.wl]}Al(){if(0!==this.bl.length){const t=this.gl*this.yl,e=this.bl.filter(({area:e})=>e>t).sort((e,t)=>e.area-t.area);return 0!==e.length?e[0].img:void 0}}Il(){if(0!==this.bl.length){const t=this.gl*this.yl,e=this.bl.filter(({area:e})=>e<t&&t/e<=1.3).sort((e,t)=>t.area-e.area);return 0!==e.length?e[0].img:void 0}}}var U,V,q,H=i(52);const W={Play:"play",Pause:"pause",Mute:"mute",Unmute:"unmute",Canplay:"canplay",Ended:"ended",Timeupdate:"timeupdate",Seeking:"seeking",Seeked:"seeked",Volumechange:"volumechange",Durationchange:"durationchange",Fullscreen:"fullscreen",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Error:"error"};(t=U=U||{})[t.Auto=0]="Auto",t[t.Strict=1]="Strict",(Te=V=V||{})[Te.PlayingState=0]="PlayingState",Te[Te.PausedState=1]="PausedState",Te[Te.PrerollState=2]="PrerollState",Te[Te.PostrollState=3]="PostrollState",Te[Te.StoppedState=4]="StoppedState",Te[Te.ReplayState=5]="ReplayState",Te[Te.HiddenState=6]="HiddenState",Te[Te.BufferingState=7]="BufferingState",Te[Te.LiveStreamStarting=8]="LiveStreamStarting",Te[Te.LiveStreamEnded=9]="LiveStreamEnded",Te[Te.LiveStreamStopped=10]="LiveStreamStopped",Te[Te.LiveStreamNotSupported=11]="LiveStreamNotSupported",(Me=q=q||{}).H264="h264",Me.Hevc="hevc";const G={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},$={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};(t=Cd=Cd||{})[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p";function z(e,t){e=e.length-1;return{currentIndex:t,nextIndex:t===e?0:t+1,prevIndex:0===t?e:t-1,firstIndex:0,lastIndex:e}}class J{constructor(e){this.Cl=e,this.Pl={breakType:f.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.Ml=null}setNewBreak(t){this.Cl.forEach(e=>{e.types.forEach(i=>{!function(e){let t=!1;switch(i){case f.ProtoAdBreakTypeEnum.PreRoll:t=e===f.ProtoAdSlotsEnum.PreRoll;break;case f.ProtoAdBreakTypeEnum.MidRoll:t=e===f.ProtoAdSlotsEnum.MidRoll;break;case f.ProtoAdBreakTypeEnum.PostRoll:t=e===f.ProtoAdSlotsEnum.PostRoll}return t}(t)||(this.Pl.currentPodNumber=e.numberOfAdSlots,this.Pl.maxAdSlotDuration=e.maxAdSlotDuration,this.Pl.maxAdPodDuration=e.maxAdPodDuration,this.Pl.totalNumberOfAdSlots=e.numberOfAdSlots)})})}adStarted(){this.El(),0===this.Pl.currentPodNumber&&(this.Pl.currentPodNumber=this.Pl.totalNumberOfAdSlots),this.Pl.currentPodNumber--}endPod(){this.El(),this.Pl.currentPodNumber=0}enterPodTimeout(e){this.El(),this.Ml=setTimeout(()=>{this.El(),e()},5e3)}isInAdPod(){return 0<this.Pl.currentPodNumber}isCurrentBreakInPod(){return 1<this.Pl.totalNumberOfAdSlots}getMaxAdSlotDuration(){return this.Pl.maxAdSlotDuration}getMaxAdPodDuration(){return this.Pl.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let e=0;e<this.Cl.length;e++){if(0===this.Cl[e].maxAdSlotDuration)return 0;t=Math.max(t,this.Cl[e].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.Pl.totalNumberOfAdSlots-this.Pl.currentPodNumber}getNextSlotIndex(){var e=this.getCurrentSlotIndex();return this.Pl.totalNumberOfAdSlots>e?e+1:1}getTotalNumberOfSlots(){return this.Pl.totalNumberOfAdSlots}isInPodTimeout(){return!!this.Ml}El(){clearTimeout(this.Ml),this.Ml=null}}var Q=i(14),Y=i(7),X=i(49),K=i(22);const Z=["com.accuweather.android"],ee=.05*L.f;class te extends n.a{constructor(e,t,i){super(),this.mediator=e,this.Ws=t,this._appSettings=i,this.Ll=.01,this.Rl=.5,this.Bl=2e3,this.Dl=0,this.Fl=!1,this.Ul=!1,this.$l=!1,this.Vl=!1,this.Nl=!1,this.Hl=!1,this.fl=!1,this.ea=f.ProtoAdSlotsEnum.PreRoll,this.ql=!1,this.zl=!1,this.Wl=!1,this.Gl=!1,this.Jl=!1,this.Ql=!1,this.Yl=!1,this.Kl={[v.b.AdRemainingTimeChange]:e=>{var t;this.Jl&&this.app.config.isInAppAndroid&&(null===(t=this.adHandler)||void 0===t||t.pause())},[v.b.AdImpression]:e=>{this.Zl.onAdImpression(e),this.tu(),this.mediator.publish(this,A.b.AdImpression,e);var{adSourceData:t,customAdData:e}=e.payload;this.iu(t,e)},[v.b.AdStopped]:e=>{this.mediator.publish(this,A.b.AdStopped,e),this.eu(),this.su(),this.app.services.EventsStorageService.emitAdStopped(),this.fl&&this.nu()},[v.b.AdError]:e=>{this.adHandler.inImpression&&this.eu(),this.mediator.publish(this,A.b.AdError,e),this.app.services.EventsStorageService.emitAdError()},[v.b.AdSkipped]:e=>{this.mediator.publish(this,A.b.AdSkipped,e),this.app.services.EventsStorageService.emitAdSkipped(),this.floatingModule&&(this.floatingModule.enabled=!0),this.eu(!0),this.su(),this.fl&&this.nu()},[v.b.AdPaused]:e=>{this.Zl.onAdPause(),this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(),this.mediator.publish(this,A.b.AdPause,e)},[v.b.AdPlaying]:e=>{this.Zl.onAdPlay(),this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(),this.mediator.publish(this,A.b.AdPlay,e)},[v.b.AdVideoFirstQuartile]:e=>{this.mediator.publish(this,A.b.AdCompleted25,e),this.app.services.EventsStorageService.emitAdVideoFirstQuartile()},[v.b.AdVideoMidpoint]:e=>{this.mediator.publish(this,A.b.AdCompleted50,e),this.app.services.EventsStorageService.emitAdVideoMidpoint()},[v.b.AdVideoThirdQuartile]:e=>{this.mediator.publish(this,A.b.AdCompleted75,e),this.app.services.EventsStorageService.emitAdVideoThirdQuartile()},[v.b.AdVideoComplete]:e=>{this.mediator.publish(this,A.b.AdCompleted100,e),this.app.services.EventsStorageService.emitAdVideoComplete()},[v.b.AdClickThru]:e=>{this.mediator.publish(this,A.b.AdClick,e),this.app.services.EventsStorageService.emitAdClickThru()},[v.b.AdInteraction]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdUserAcceptInvitation]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdUserClose]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdUserMinimize]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[v.b.AdVideoStart]:e=>{var e=e.payload["adSourceData"],e={duration:e&&e.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(e)},[v.b.AdLoaded]:e=>{const t=e.payload["adLoadedData"];(null===(e=t)||void 0===e?void 0:e.skipOffset)<0&&(t.skipOffset=void 0);e=this.ru(t);this.app.services.EventsStorageService.emitAdLoaded(e)},[v.b.AdVolumeChange]:()=>{this.app.services.EventsStorageService.emitAdVolumeChange()}},this.au=i=>e=>{const t=this.Kl[i];t&&t(e)},this.hu=e=>{(this.zl=e)&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.hu),this.ou())},this.cu=e=>{e&&this.adHandler&&!this.Gl&&setTimeout(()=>{this.adHandler.resumeWithoutUserInteraction()},ee)},this.lu=()=>{!this.Ul&&this.uu()&&(this.mediator.publish(this,o.b.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.lu))},this.du=({payload:{playback:e,isFullscreenClose:t}})=>{this.floatingModule&&Object(k.a)(e)&&!t&&(this.floatingModule.enabled=e)},this.fu=()=>{this.pu(1)},this.bu=()=>{this.pu(0)},this.vu=e=>{this.du(e);var e=e.payload["playback"];Object(k.a)(e)&&(e?(this.app.services.EventsStorageService.emitAdPlay(),this.Gl=!1):(this.app.services.EventsStorageService.emitAdPause(),this.Gl=!0))},this.mu=new N}gu(){}iu(e,t){this.app.services.EventsStorageService.emitAdImpression(e,t)}su(){this.app.services.EventsStorageService.emitAdComplete()}yu(){}nu(){}wu(){}xu(){}ku(){}Su(){}Ou(){}_u(e){this.app.services.EventsStorageService.emitAdStateChange({state:e})}ju(){var{clientWidth:e,clientHeight:t}=this.$playerContainer;this.app.services.EventsStorageService.emitPlayerResized({width:e,height:t})}Au(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}Iu(){this.app.services.EventsStorageService.emitOnExitFullscreen()}Tu(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}Cu(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}Pu(e){this.Mu(e),this.Eu(e),this.Lu(e),this.ea=e,this.Ru(e)}Eu(e){this.adHandler&&this.adHandler.adStateChange(e,this.Bu.getMaxAdSlotDuration())}Lu(e){this.Zl.onAdStateChange(e,{maxAdPodDuration:this.Bu.getMaxAdPodDuration(),maxAdSlotDuration:this.Bu.getMaxAdSlotDuration()})}Mu(e){this.Bu.setNewBreak(e)}Ru(e){this._u(H.b[e])}Du(){this.adHandler&&this.adHandler.contentChanged(),this.Zl.contentChanged()}Fu(){this.adHandler=this.Uu(),this.$u(),this.relay(A.b.ImpressionPrice,this.adHandler,this,this.mediator),this.subscribe(o.b.UserInteraction,this.adHandler,this.vu),this.subscribe(C.DetachedFromDom,this.adHandler,()=>{this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.$experienceContainer)?this.triggerDestroy():(this.unsubscribeAll(this.adHandler),this.adHandler.destroy(),this.adHandler=null,Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"only_adHandler_destroyed",sendMaxLog:!1,throttle:1}))});const e=()=>{this.app.services.TrackingService.setAdStart(),this.Wl=!0,this.Gl=!1,this.ou(),this.unsubscribe(w.AdsEnabled,this.adHandler,e)};this.subscribe(w.AdsEnabled,this.adHandler,e),this.subscribe(C.AdSlotResized,this.adHandler,({payload:{width:e,height:t}})=>{this.Zl.onResize(e,t)})}$u(){Object.keys(v.b).forEach(i=>{this.subscribe(v.b[i],this.adHandler,e=>{var t=v.b[i];this.au(t)(e),this.mediator.publish(this,t,e)})})}eu(e=!1){let t=this.Bu.isInAdPod();e&&(t=!1,this.Bu.endPod()),this.Zl.onAdFinished(this.adHandler.inImpression,t),this.Vu(),this.Nu.isCloseButton&&(this.floatingModule&&this.floatingModule.isInFloating?this.Hu(this.Nu.floatingCloseButtonMode):this.Hu(this.Nu.closeButtonMode))}tu(){this.Bu.adStarted(),this.adHandler.show()}Vu(){this.adHandler.hide()}qu(e){this.adHandler.enterAdPodLoadingState(),this.Bu.enterPodTimeout(()=>{this.Bu.endPod(),e()})}zu(){Object(S.i)(this.$playerContainer),this.Zl=this.Wu(),this.subscribe(B.EnableAds,this.Zl,()=>{this.adHandler&&this.adHandler.enableAds()}),this.subscribe(B.DisableAds,this.Zl,e=>{this.adHandler&&this.adHandler.disableAds(e.payload)}),this.subscribe(B.ForceStopAdSlot,this.Zl,()=>{this.adHandler&&this.adHandler.stopAd("forceStopAdSlot")}),this.subscribe(B.ForceStopAdPod,this.Zl,()=>{this.adHandler&&(this.adHandler.inImpression?(this.Bu.endPod(),this.adHandler.stopAd("forceStopAdPod")):this.eu(!0))}),this.subscribe(B.AdPodRemainingTime,this.Zl,e=>{this.adHandler&&this.adHandler.updatePodRemainingTime(e.payload.remainingTime)}),this.subscribe(B.AdOpportunity,this.Zl,e=>{e=e.payload;this.app.services.TrackingService.trackAdOpportunity(e),this.adHandler&&this.adHandler.newAdOpportunity()})}Gu(){this.app.services.ViewabilityService.on(this.$playerContainer,this.hu,{threshold:this.Rl,callbackDelay:this.Bl}),this.app.services.ViewabilityService.on(this.$playerContainer,(e,t)=>this.Mc(e,t),{threshold:this.Ll}),this.app.services.ViewabilityService.subscribe(A.d.OmidViewabilityThreshold,e=>{this.mediator.publish(this,A.d.OmidViewabilityThreshold,{payload:{threshold:e}})}),this.app.config.os.os===K.b.Ios&&this.app.services.PageFocusService.on(this.cu)}ou(){this.zl&&this.Wl&&this.mediator.publish(this,o.c.SessionView)}Mc(e,t=!1){var i=this.app.config["isRecyclerViewIntegration"];this.Zl.setToggleAdsReason({isAppBackgrounded:t,inAppRecyclerViewViewability:i&&!e}),this.app.config.isInApp&&(t?(this.Jl=!0,this.Yl?this.Ql=!0:this.Ql=!1,this.Ju=this.getVolume(),this.setVolume(0),null===(t=this.adHandler)||void 0===t||t.disableAds(j.Unknown),this.pause()):(this.Ju&&(this.setVolume(this.Ju),this.Ju=null),this.Jl&&(this.Jl=!1,this.Ql||this.play()))),this.fl=e,this.mediator.publish(this,A.b.IsViewable,{payload:e}),this.Zl.viewabilityStateChanged(this.checkFloatingViewability(e),this.Bu.isInAdPod(),this.Bu.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(e)}checkFloatingViewability(e){var t=this.app.services.ViewabilityService.getIsTabInFocus();return!(e||!this.floatingModule||!this.floatingModule.isInFloating||!t)||e}zr(){const e=this.$playerContainer.clientWidth,t=this.$playerContainer.clientHeight;var i;this.adHandler?(i=this.ql?v.a.Fullscreen:v.a.Normal,this.adHandler.resizeAd(e,t,i)):this.Zl.onResize(e,t),this.breakPointsHandler.updateWidth(e),setTimeout(()=>{this.mediator.publish(this,A.b.SizeChanged,{payload:{width:e,height:t}}),this.Qu()})}Qu(){this.ql||this.ju()}Xu(){this.app.services.ResizeObserver.on(this.$playerContainer,()=>{this.zr()})}Yu(){this.ql=!0,this.app.services.InteractionService.disableScrollEvent(),this.Au(),this.adHandler&&this.adHandler.setVastViewMode(v.a.Fullscreen)}Ku(){this.ql=!1,this.app.services.InteractionService.enableScrollEvent(),this.Iu(),this.adHandler&&this.adHandler.setVastViewMode(v.a.Normal)}Zu(){var e=`<cnx class='${l.c}'></cnx>`,e=this.app.services.GlobalDomUtilsService.createElementByString(e);return this.td(e),e}td(e){Object(S.Q)(e,{"padding-bottom":`${this.ed()}%`})}ed(){return this.Nu.playerSize.ratioHeight/this.Nu.playerSize.ratioWidth*100}sd(){this.subscribe(u.EnterStart,this.floatingModule,()=>{this.mediator.publish(this,A.c.PlayerFloatChanged,{payload:b.Float})}),this.subscribe(u.ExitStop,this.floatingModule,()=>{this.mediator.publish(this,A.c.PlayerFloatChanged,{payload:b.Embed})}),this.subscribe(u.EnterStop,this.floatingModule,()=>{this.Mc(!0)})}nd(){this.floatingModule=new T(this,this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.Nu.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.rd),this.sd(),this.floatingModule.start()}hd(){const e=new O(this,this.app.services.ResizeObserver,this.$experienceContainer,this.Nu.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService);this.subscribe(u.EnterStop,e,()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}),e.start()}setNewVolume(e){this.adHandler&&this.adHandler.setVolume(e)}od(){this.ld(),this.adHandler&&this.ud(this.adHandler)}ud(e){this.subscribe(o.b.UserInteraction,e,({payload:{volume:e}})=>{e&&this.dd()})}Dr(e){this.mediator.publish(this,A.b.VolumeChanged,{payload:e}),this.app.services.EventsStorageService.emitVolumeChange(e)}pu(e){this.getVolume()!==e&&this.setNewVolume(e)}ld(){this.Fl=!0,this.$playerContainer.addEventListener("mouseover",this.fu),this.$playerContainer.addEventListener("mouseout",this.bu)}dd(){this.Fl&&(this.Fl=!1,this.$playerContainer.removeEventListener("mouseover",this.fu),this.$playerContainer.removeEventListener("mouseout",this.bu))}fd(e){switch(e){case f.ProtoPlayerCloseButtonMode.OnHover:case f.ProtoPlayerCloseButtonMode.AlwaysOn:return!0;case f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd:return!(!this.adHandler||!this.adHandler.firstAdShown);default:return!1}}Hu(e){this.fd(e)?(Object(S.a)(this.$playerContainer,l.g.CanClose),this.pd(e)):Object(S.L)(this.$playerContainer,l.g.CanClose)}bd(){this.breakPointsHandler=new x(this.$playerContainer,this.app.config.device,this.vd,this.gd),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}yd(){this.Nu.isCloseButton&&(this.subscribe(P[P.Close],this.adHandler,()=>{this.handleClose()}),this.Hu(this.Nu.closeButtonMode),this.floatingModule&&this.floatingModule.canFloat()&&(this.subscribe(u.EnterStop,this.floatingModule,()=>{this.Hu(this.Nu.floatingCloseButtonMode)}),this.subscribe(u.ExitStart,this.floatingModule,()=>{this.Hu(this.Nu.closeButtonMode)}),this.subscribe(u.ExitStop,this.floatingModule,()=>{this.Hu(this.Nu.closeButtonMode)})))}ru(e){var e=e["skipOffset"];return{isAutoPlay:this.Nu.playbackMode===f.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:e,isSkippable:Object(k.d)(e)}}wd(){this.Wl=!0,this.app.services.TrackingService.setContentStart(),this.ou()}uu(){var{clientWidth:e,clientHeight:t}=this.$experienceContainer;return!Object(Q.f)({width:e,height:t})||this.xd()}xd(){return Z.includes(this.app.config.bundleID)}kd(e){try{var{display:t,width:i,height:r,flex:s,maxWidth:n,minWidth:o}=this.app.services.GlobalDomUtilsService.getComputedStyle(e),{width:a,height:l}=e.getBoundingClientRect(),d={display:t,compWidth:i,boundWidth:a,compHeight:r,boundHeight:l,flex:s,maxWidth:n,minWidth:o};return{type:e.nodeName,styles:JSON.stringify(d)}}catch(e){return{err:"BaseExperience_getElementInfo_error"}}}Sd(){var e;Object(Y.l)([95,5])&&(e={parent:this.kd(this.$experienceContainer.parentElement),main:this.kd(this.$experienceContainer)},Object(g.a)({message:"BaseExperience_invalid_dimensions",level:f.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(e)}))}Od(){this.Bu=new J(this.Nu.adBreaks)}Eo(e,t,i){this.Nu=e,this.app=t,this.$experienceContainer=i,this.gu(),this.app.services.ViewabilityService.setViewableThreshold(this.Dl),this.generateHTML(),this.Od(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.lu),this.uu()?this.mediator.publish(this,o.b.CanStart):this.Sd()}start(){this.Ul=!0,Object(S.a)(this.$experienceContainer,l.b.MainContainerFlex),this.mediator.publish(this,o.c.SessionRendered),this.bd(),this.Xu(),this.Nu.floatingSettings.floatingMode===f.ProtoPlayerFloatingMode.Always?this.hd():(this.ju(),this.nd()),this.Gu(),0<this.Nu.lineItemSettings.lineItems.length&&!this.Nu.disableAdvertising&&!this.Ws&&this.Fu(),this.app.config.isMobile||this.Nu.soundMode!==f.ProtoPlayerSoundMode.Hover||this.od(),this.Nu.isCloseButton&&this.yd(),this.zu(),this.Ws||X.a.detectUsingScript().then(e=>{e&&(this.app.services.TrackingService.trackSessionAdBlocker(f.ProtoAdBlockDetectionTypeEnum.Network),this.Zl.disableAdvertising())})}play(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.play()}pause(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.pause()}setVolume(e){this.setNewVolume(e),this.dd()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(e,t){Object(Q.f)({width:e,height:t})||Object(S.Q)(this.$experienceContainer,{width:`${e}px`,height:`${t}px`})}setCustomMacros(e){this.app.services.MacrosService.addExtraMacros(e)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.Ll})}setViewableThreshold(e){this.app?this.app.services.ViewabilityService.setViewableThreshold(e):this.Dl=e}setAmpUserConsent(e){this.app.services.UserManagerService.setAmpUserConsent(e)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,o.b.Destroy)}disableAdvertising(){this.Zl.disableAdvertising()}enableAdvertising(){this.Zl.enableAdvertising()}destroy(){this.adHandler&&this.adHandler.destroy(),this.Zl&&this.Zl.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null)}}var ie,re,se=i(13);class ne{static getScaledImageUrl(e,t,i,r){if(e&&!Object(Q.f)({width:t,height:i}))return Object(k.e)(r)&&(t=Object(Q.e)(t,r),i=Object(Q.e)(i,r)),`${e}${ne.getScaledImageQueryParams(t,i)}`.trim()}static getScaledImageQueryParams(e,t){return Object(Q.f)({width:e,height:t})?"":`?width=${e}&height=${t}&fit=bounds`}static getSmartCroppedImageUrl(e,t,i){return Object(k.h)(e)||(e=se.a.endPoints.base.image),Object(Q.f)({width:t,height:i})&&(t=140,i=80),`${e}${ne.getSmartCroppedImageQueryParams(t,i)}`}static getSmartCroppedImageQueryParams(e,t){return Object(Q.f)({width:e,height:t})?"":`?crop=${e}:${t},smart&width=${e}&height=${t}&format=jpeg&quality=60&fit=crop`}}class oe{constructor(e){this.context=e}onClick(){}canTransitionToState(e){return!0}enterState(){this.initState(),this.context.currentState=this}}function ae(r,e,s,n){r.style.top=`${function(e,t){let i=e-s.clientY;e=s.clientY+s.height-e;return n.alignTop&&i>r.offsetHeight?i-=r.offsetHeight:!n.alignTop&&e<r.offsetHeight?i-=r.offsetHeight-e:(i+=t)+r.offsetHeight>s.height&&(i=s.height-r.offsetHeight),i}(e.clientY,e.height)}px`,r.style.left=`${function(e,t,i,r){var s=r.distanceFromMargin||0;let n=Math.ceil(t)-Math.ceil(i.clientX),o=t,a=o+e.offsetWidth;t=i.clientX+i.width;if(r.alignMiddle){const l=e.offsetWidth/2;n-=Math.ceil(l),o-=l,a-=l}return r.alignMiddle||r.forceRight?i.clientX>o?n=0+s:t<a&&(n-=Math.ceil(a)-Math.ceil(t)+s):a>t&&(n-=e.offsetWidth),n}(r,e.clientX,s,n)}px`}(Te=ie=ie||{})[Te.PlayButton=0]="PlayButton",Te[Te.BigPlayButton=1]="BigPlayButton",Te[Te.VolumeButton=2]="VolumeButton",Te[Te.VolumeProgress=3]="VolumeProgress",Te[Te.VolumeControls=4]="VolumeControls",Te[Te.ExpandButton=5]="ExpandButton",Te[Te.SettingsButton=6]="SettingsButton",Te[Te.CaptionButton=7]="CaptionButton",Te[Te.CaptionComponent=8]="CaptionComponent",Te[Te.CastButton=9]="CastButton",Te[Te.ShareButton=10]="ShareButton",Te[Te.UpNextButton=11]="UpNextButton",Te[Te.UpNextBox=12]="UpNextBox",Te[Te.PreviousButton=13]="PreviousButton",Te[Te.LogoComponent=14]="LogoComponent",Te[Te.LogoOutstream=15]="LogoOutstream",Te[Te.MoreButton=16]="MoreButton",Te[Te.ElapsedTimeLabel=17]="ElapsedTimeLabel",Te[Te.TotalDurationLabel=18]="TotalDurationLabel",Te[Te.ProgressBar=19]="ProgressBar",Te[Te.QualityMenu=20]="QualityMenu",Te[Te.QueStateOverlay=21]="QueStateOverlay",Te[Te.Loader=22]="Loader",Te[Te.ContextMenu=23]="ContextMenu",Te[Te.ElementsSettingsMenu=24]="ElementsSettingsMenu",Te[Te.CloseButton=25]="CloseButton",Te[Te.SkipAdButton=26]="SkipAdButton",Te[Te.AdLoadingScreen=27]="AdLoadingScreen",Te[Te.CtaButton=28]="CtaButton",Te[Te.PlayspaceProgressBar=29]="PlayspaceProgressBar",Te[Te.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",Te[Te.ClickToPlayButton=31]="ClickToPlayButton",Te[Te.SlideTitle=32]="SlideTitle",Te[Te.SkipAd=33]="SkipAd",Te[Te.TopTitle=34]="TopTitle",Te[Te.TopLogo=35]="TopLogo",Te[Te.TopSlideTitle=36]="TopSlideTitle",Te[Te.TopStoryTitle=37]="TopStoryTitle",Te[Te.TextLabel=38]="TextLabel",Te[Te.LivePoster=39]="LivePoster",Te[Te.LiveIcon=40]="LiveIcon",(Me=re=re||{})[Me.Top=1]="Top",Me[Me.Bottom=2]="Bottom",Me[Me.Right=4]="Right",Me[Me.Left=8]="Left",Me[Me.Middle=16]="Middle";class le extends n.a{constructor(e,t,i,r,s){super(),this.mediator=e,this.Ss=t,this._d=i,this.Yn=s,this.jd=t.createElementByString(r)}getContainer(){return this.jd}getCoordinates(e){const t=this.Ss.getElementCoordinates(this.jd);return this.Yn&&e?((e&re.Top)===re.Top&&(t.clientY-=this.jd.clientHeight),(e&re.Right)===re.Right&&(t.clientX+=this.jd.clientWidth)):t.clientX+=t.width/2,t}showComponent(e=!1){var t;this.jd&&this.jd.parentElement&&(t=Object(S.u)(this.jd.parentElement,"cnx-ui-btn")?this.jd.parentElement:this.jd,(e&&Object(S.E)(t)?Object(S.g):Object(S.R))(t))}hideComponent(e=!1){if(this.jd&&this.jd.parentElement){const t=Object(S.u)(this.jd.parentElement,"cnx-ui-btn")?this.jd.parentElement:this.jd;e&&!Object(S.E)(t)?Object(S.h)(t,()=>Object(S.v)(t)):Object(S.v)(t)}}destroy(){this.jd.innerHTML="",this.jd.style.display="none",this._d.unregisterAll(this)}}var de,ce=i(8);class he extends le{constructor(e,t,i,r,s){super(e,t,i,r,s),this.eventList=[ce.a[ce.a.Scroll],ce.a[ce.a.Click]],this.Id=e=>{this.onInteractionHandler(e)},this.onBeforeClick=e=>{e.stopPropagation()},this.onClick=e=>{this.onInteractionHandler(e),this.onClickHandler(e)}}onInteractionHandler(e){e.stopPropagation()}onClickHandler(e){}initComponent(){var e={interactionstart:this.onBeforeClick,interaction:this.Id,click:this.onClick};this._d.register(this.jd,this,this._d,e),this.Yn&&(this.subscribe(ce.a[ce.a.Click],this._d,()=>{this.onClickHandler()}),this.relay(ce.a[ce.a.Scroll],this._d,this,this.mediator))}destroy(){this.unsubscribeAll(this._d),super.destroy()}}class ue extends he{constructor(){super(...arguments),this.onClick=e=>{this.onInteractionHandler(e),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){Object(S.a)(this.jd,"cnx-boom"),this.jd.getClientRects(),Object(S.a)(this.jd,"cnx-boom-anim");const t=e=>{"transform"===e.propertyName&&(Object(S.L)(this.jd,"cnx-boom"),Object(S.L)(this.jd,"cnx-boom-anim"),this.jd.removeEventListener("transitionend",t))};this.jd.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.jd.appendChild(this.Ss.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class pe extends ue{constructor(){super(...arguments),this.eventList=[P[P.HoverStart],P[P.HoverEnd],...this.eventList],this.onStartHover=()=>{Object(S.a)(this.jd,l.h.HoverStart),Object(S.a)(this.jd,l.h.HoverEnd),this.mediator.publish(this,P[P.HoverStart])},this.onEndHover=()=>{Object(S.L)(this.jd,l.h.HoverEnd),this.mediator.publish(this,P[P.HoverEnd])}}initComponent(){super.initComponent(),this.Yn?(this.jd.addEventListener("touchstart",this.onStartHover),this.jd.addEventListener("touchend",this.onEndHover),this.jd.addEventListener("touchcancel",this.onEndHover)):(this.jd.addEventListener("mouseenter",this.onStartHover),this.jd.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Yn?(this.jd.removeEventListener("touchstart",this.onStartHover),this.jd.removeEventListener("touchend",this.onEndHover),this.jd.removeEventListener("touchcancel",this.onEndHover)):(this.jd.removeEventListener("mouseenter",this.onStartHover),this.jd.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(e){this.onEndHoverClick()}onEndHoverClick(){Object(S.L)(this.jd,l.h.HoverEnd),Object(S.L)(this.jd,l.h.HoverStart)}}(t=de=de||{})[t.Play=0]="Play",t[t.Pause=1]="Pause";class ge extends pe{constructor(e,t,i,r,s){super(e,t,i,r,s),this.Td=!1,this.eventList=[P[P.Play],P[P.Pause],P[P.Replay],P[P.StateChanged],...this.eventList],this.Cd="Play",this.Pd="Pause",this.setState(de.Pause)}onClickHandler(){this.Jt===de.Pause?this.mediator.publish(this,P[P.Pause]):this.Td?this.mediator.publish(this,P[P.Replay]):this.mediator.publish(this,P[P.Play])}Ed(){}toggleReplay(e){this.Td=e}setState(e){this.Jt!==e&&(this.Jt=e,this.Ed(),this.mediator.publish(this,P[P.StateChanged]))}get tooltip(){return this.Jt===de.Play?this.Cd:this.Pd}}class me extends oe{initState(){this.context.$uiContainer.classList.add(l.j.Playing);const e=this.context.getComponent(ie.PlayButton);e&&e.setState(de.Pause);const t=this.context.getComponent(ie.BigPlayButton);t&&t.setState(de.Pause)}exitState(){this.context.$uiContainer.classList.remove(l.j.Playing)}}class fe extends me{constructor(){super(...arguments),this.Ld=100}Rd(){if(!this.elapsedTimeoutId&&this.context.duration){const t=Date.now();this.elapsedTimeoutId=setTimeout(()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const e=this.context.getComponent(ie.ProgressBar);e&&e.setProgress(Object(Q.g)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.Rd()},this.Ld)}}initState(){super.initState(),this.context.duration&&this.Rd()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class ye extends oe{initState(){this.context.$uiContainer.classList.add(l.j.Paused);const e=this.context.getComponent(ie.PlayButton);e&&e.setState(de.Play);const t=this.context.getComponent(ie.BigPlayButton);t&&t.setState(de.Play)}exitState(){this.context.$uiContainer.classList.remove(l.j.Paused)}}class be extends ye{initState(){super.initState()}exitState(){super.exitState()}}class ve{constructor(e,t){this.Bd=e,this.Ss=t,this.Dd=/\[\[([0-9]+)]]/g,this.Fd=[],this.Ud=[],this.$d=this.Ss.createElementByString(this.Vd(this.Bd))}Nd(e){return`<cnx class="pl_${e}"></cnx>`}Vd(e){return e.replace(this.Dd,(e,t)=>(this.Fd.push(parseInt(t,10)),this.Nd(t)))}Hd(t,i){return this.Ud.some(e=>e.slotName===t)||this.Ud.some(e=>e.component===i)?null:this.$d.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.Fd}getRenderedDom(){return this.$d}registerSlot(e,t){const i=this.Hd(e,t);if(null===i)return!1;var r=t.getContainer();return i.parentNode.replaceChild(r,i),this.Ud.push({component:t,slotName:e}),!0}initComponents(){this.Ud.forEach(e=>e.component.initComponent())}}class Pe extends n.a{constructor(e,t,i){super(),this.globalDomUtilsService=e,this.templateString=t,this.componentFactory=i,this.qd={},this.zd=new ve(t,e),this.addComponents()}addComponents(){this.zd.getComponentList().forEach(e=>{var t=this.componentFactory.createComponent(e,this);this.registerComponent(e,t)})}registerComponent(e,t){this.zd.registerSlot(e,t),this.qd[e]=t,this.Wd(t)}Wd(i){i.eventList.forEach(t=>{this.subscribe(t,i,e=>{t===P[P.RebindComponent]&&this.rebindComponentEvents(i),this.handleComponentEvent(t,e,i)})})}rebindComponentEvents(e){e&&(this.unsubscribeAll(e),this.Wd(e))}getComponent(e){return this.qd[e]}destroy(){Object.keys(this.qd).forEach(e=>{this.qd[e].destroy()})}}class Se extends Pe{constructor(e,t,i,r,s){super(i,r,s),this.mediator=e,this.$container=t,this.componentFactory=s,this.$uiContainer=this.zd.getRenderedDom(),t.appendChild(this.$uiContainer),this.zd.initComponents()}changeState(e){const t=this.Gd[e];t!==this.currentState&&this.currentState.canTransitionToState(t)&&(this.currentState.exitState(t),t.enterState())}hide(){Object(S.a)(this.$uiContainer,l.h.DisplayNone)}show(){Object(S.L)(this.$uiContainer,l.h.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}var Ie,Te=i(92),ke=i.n(Te);class Ae{constructor(e,t){this.Jd=e,this.Ss=t,this.Qd=[],this.Xd={top:12,bottom:24,margin:4},this.Yd=!1}Kd(){this.Zd=this.Ss.getElementCoordinates(this.Jd.parentElement)}tf(e,t){e.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=t}if(t){if(t&&t.tooltip&&!this.Yd&&!this.Qd.find(e=>e.component===t)){var i=this.Ss.createElementByString(ke.a);this.tf(i,t.tooltip),this.Kd();const a=t.getCoordinates();let e=!1;var{clientY:r,height:s}=a,{clientY:n,height:o}=this.Ss.getElementCoordinates(this.Jd);r<=n+o/2-s?a.clientY+=this.Xd.top:(a.clientY-=this.Xd.bottom,e=!0),this.Jd.appendChild(i),ae(i,a,this.Zd,{alignMiddle:!0,alignTop:e,forceRight:!0,distanceFromMargin:this.Xd.margin}),Object(S.i)(i),Object(S.a)(i,l.s.OpacityInTransition),this.Qd.push({component:t,domElement:i})}}ef(t){var e;!t.tooltip||(e=this.Qd.find(e=>e.component===t))&&(e=e.domElement,this.Jd.removeChild(e),this.Qd=this.Qd.filter(e=>e.component!==t))}sf(e){var t;!e.tooltip||(t=this.Qd.find(e=>e.component===this.nf))&&this.tf(t.domElement,e.tooltip)}rf(){this.nf=null,this.Qd.forEach(e=>this.ef(e.component))}setDistanceValues(e){this.Xd=Object.assign(Object.assign({},this.Xd),e)}hoverStart(e){this.nf=e,this.if(e)}hoverEnd(e){this.nf=null,this.ef(e)}stateChanged(e){this.nf===e&&this.sf(e)}disableTooltips(){this.Yd=!0,this.rf()}enableTooltips(){this.Yd=!1,this.if(this.nf)}}(Me=Ie=Ie||{})[Me.expand=0]="expand",Me[Me.collapse=1]="collapse";class Oe extends pe{constructor(){super(...arguments),this.eventList=[P[P.Expand],P[P.Collapse],...this.eventList],this.af="Full Screen",this.hf="Exit Full Screen"}onClickHandler(){switch(this.Jt){case Ie.collapse:this.mediator.publish(this,P[P.Expand]);break;case Ie.expand:this.mediator.publish(this,P[P.Collapse]);break;default:this.mediator.publish(this,P[P.Expand])}}Ed(){this.jd&&(this.Jt===Ie.expand?this.jd.classList.add(l.h.Active):this.jd.classList.remove(l.h.Active))}setState(e){this.Jt!==e&&(this.Jt=e,this.Ed())}get tooltip(){return this.Jt===Ie.expand?this.hf:this.af}}class Ce extends Se{constructor(e,t,i,r,s){super(e,t,i,r,s),this.cf=new Ae(this.$uiContainer,i)}handleComponentEvent(e,t,i){let r=i;switch(t.payload&&t.payload.targetComponent&&(r=t.payload.targetComponent),e){case P[P.HoverStart]:this.cf.hoverStart(r);break;case P[P.HoverEnd]:this.cf.hoverEnd(r);break;case P[P.StateChanged]:this.cf.stateChanged(r)}}updateDuration(e,t){if(Object(S.u)(this.$uiContainer,l.g.ShowControls)){const i=this.getComponent(ie.ElapsedTimeLabel),r=this.getComponent(ie.TotalDurationLabel),s=this.getComponent(ie.ProgressBar);if(i&&i.setTime(e),r&&r.setTime(t),s){const i=0,r=t;s.setProgress(Object(Q.g)(0,r,0,100,e))}}}updateVolume(e){}expand(){this.getComponent(ie.ExpandButton).setState(Ie.expand)}collapse(){this.getComponent(ie.ExpandButton).setState(Ie.collapse)}}class we extends pe{constructor(){super(...arguments),this.eventList=[P[P.Settings],...this.eventList],this.lf="Settings"}onClickHandler(){this.mediator.publish(this,P[P.Settings])}toggleHDFlag(e){(e?Object(S.a):Object(S.L))(this.jd,l.h.Active)}get tooltip(){return this.lf}}var t=i(55),xe=i.n(t);class Ee extends pe{constructor(e,t,i,r,s,n=!1,o){super(e,t,i,r,o),this.uf=s,this.isActive=n}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.Jt}set isActive(e){this.Jt=e,(this.Jt?Object(S.a):Object(S.L))(this.jd,this.uf)}}class Le extends Ee{constructor(){super(...arguments),this.eventList=[P[P.CaptionOn],P[P.CaptionOff],P[P.StateChanged],...this.eventList],this.df="Subtitles On",this.ff="Subtitles Off"}onStateChange(){this.mediator.publish(this,this.isActive?P[P.CaptionOn]:P[P.CaptionOff]),this.mediator.publish(this,P[P.StateChanged])}get tooltip(){return this.isActive?this.ff:this.df}}var Te=i(56),Re=i.n(Te),Me=i(93),Be=i.n(Me);class je extends he{constructor(){super(...arguments),this.fl=!1,this.eventList=[P[P.Next]]}onClickHandler(){this.mediator.publish(this,P[P.Next])}show(){this.fl=!0,this.jd.classList.add("cnx-fade-in-up-next")}hide(){this.fl=!1,this.jd.classList.remove("cnx-fade-in-up-next")}isInView(){return this.fl}updateCard(e,t){const i=this.jd.getElementsByTagName("img")[0];i.setAttribute("src",e),i.style.display="none",i.onload=()=>{i.style.display="block"},this.jd.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=Object(k.h)(t)?t:""}}class De extends le{constructor(e,t,i,r,s){super(e,t,i,r),this.settings=s,this.eventList=[],this.pf=144,this.bf=36}createLogo(){let e=this.Ss.createElement("img");e.onload=()=>{e=this.resizeLogo(e),this.jd.appendChild(e)},e.src=this.settings.logoUrl,e.alt=""}resizeLogo(e){var t=e.naturalWidth,i=e.naturalHeight;return t&&i&&(this.settings.logoPosition===E.ProtoLogoPositionMode.ControlBar?(e.style.setProperty("height",`${this.bf}px`,"important"),e.style.setProperty("width",`${this.bf}px`,"important")):this.bf*(t/i)>this.pf?(e.style.setProperty("width",`${this.pf}px`,"important"),e.style.setProperty("height","auto","important")):(e.style.setProperty("width","auto","important"),e.style.setProperty("height",`${this.bf}px`,"important"))),e}initComponent(){try{this.createLogo()}catch(e){Object(g.a)({message:"LogoComponent_createLogo",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}}var _e=i(33);class Fe extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.vf=this.jd.getElementsByTagName("cnx-span")[0]}setTime(e){isNaN(e)||"number"!=typeof e?Object(S.a)(this.jd,l.h.Invisible):(this.vf.innerHTML=Object(_e.f)(e),Object(S.L)(this.jd,l.h.Invisible))}}var t=i(46),Ne=i.n(t);class Ue extends le{constructor(e,t,i,r,s=!1){super(e,t,i,r,s),this.mf=0,this.gf=null,this.yf=0,this.wf=0,this.xf=100,this.cacheDomElements()}cacheDomElements(){this.kf=this.jd.getElementsByClassName("cnx-progress-fill")[0],this.Sf=this.jd.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.mf=this.fixedRailWidth||this.Sf.getBoundingClientRect().width,this.gf=this.Sf.getBoundingClientRect().left}updateUi(e){e=this.getComputedTranslation(e);this.yf=e,this.kf.style.transform=`translateX(${e}px)`}isValidTranslation(){return 0<=this.yf&&this.yf<=this.mf}getComputedTranslation(e){return e<0?0:e>this.mf?this.mf:e}setProgress(e){this.cacheWidths();e=this.getComputedTranslation(Object(Q.g)(0,100,0,this.mf,e));this.updateUi(e)}disableTransition(){Object(S.a)(this.jd,l.h.NoTransition)}enableTransition(){Object(S.L)(this.jd,l.h.NoTransition)}Of(e){this.disableTransition(),this.setProgress(e),Object(S.i)(this.kf),this.enableTransition()}forceStartState(){this.Of(this.wf)}forceEndState(){this.Of(this.xf)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class Ve extends Ue{constructor(e,t,i,r,s=!1){super(e,t,i,r,s),this._f=0,this.Va=null,this.jf=!1,this.eventList=[P[P.DraggingStart],P[P.DraggingStopped]],this.Af=e=>{this.cacheWidths(),this.If(this.Tf(e)),this.Yn?this.jd.addEventListener(this.Cf,this.Pf):this.Ss.addEventListenerOnGlobal(this.Cf,this.Pf),this.onDragStart()},this.Pf=t=>{null===this.Va&&(this.jf||(this.jf=!0,this.disableTransition()),this.Va=this.Ss.requestAnimationFrameHelper(()=>{var e=this.Mf+(this.Tf(t)-this.Ef);this.isValidTranslation()&&this.Lf(e),this.Va=null}))},this.Rf=e=>{e.stopPropagation(),this.Yn?this.jd.removeEventListener(this.Cf,this.Pf):this.Ss.removeEventListenerOnGlobal(this.Cf,this.Pf),this.jf=!1,this.enableTransition(),this.onDragEnd()},this.Cf=s?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.Bf=this.jd.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this._f=this.Bf.getBoundingClientRect().width/2}updateUi(e){super.updateUi(e);e=this.getComputedTranslation(e);this.Bf.style.transform=`translateX(${e-this._f}px)`}onDragEnd(){this.mediator.publish(this,P[P.DraggingStopped])}onDragStart(){this.mediator.publish(this,P[P.DraggingStart])}Tf(e){return(this.Yn?e.touches.item(0):e).clientX}If(e){this.Mf=e-this.gf,this.Ef=e,this.Lf(this.Mf)}Lf(e){var t;this.isValidTranslation()&&(t=this.getComputedTranslation(e),e=this.mf,this.updateUi(t),this.onProgressChange(Object(Q.g)(0,e,0,100,t)))}setProgress(e){super.setProgress(e)}initComponent(){super.initComponent();var e={interactionstart:this.Af,interactionend:this.Rf};this._d.register(this.jd,this,this._d,e)}destroy(){super.destroy()}}class qe extends Ve{constructor(e,t,i,r,s=!1){super(e,t,i,r,s),this.Df=!1,this.Ff=e=>{Object(S.a)(this.jd,l.h.HoverEnd),this.Df=!0},this.Uf=e=>{e=this.getComputedTranslation(e.clientX-this.gf);this.$f.style.transform=`translateX(${e}px)`},this.Vf=e=>{this.$f.style.transform="translateX(0)",this.Df=!1,this.Nf()},this.eventList=this.eventList.concat([P[P.Seek],P[P.SeekingStart],P[P.SeekingStopped]])}onProgressChange(e){this.mediator.publish(this,P[P.Seek],{payload:e-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,P[P.SeekingStopped]),this.Nf()}onDragStart(){super.onDragStart(),this.mediator.publish(this,P[P.SeekingStart])}Nf(){this.Df||this.jf||Object(S.L)(this.jd,l.h.HoverEnd)}initComponent(){super.initComponent(),this.jd.addEventListener("mousemove",this.Uf),this.jd.addEventListener("mouseenter",this.Ff),this.jd.addEventListener("mouseleave",this.Vf),this.$f=this.jd.getElementsByClassName("cnx-progress-follow")[0]}hide(){Object(S.v)(this.jd)}show(){Object(S.R)(this.jd)}destroy(){super.destroy(),this.jd.removeEventListener("mousemove",this.Uf),this.jd.removeEventListener("mouseenter",this.Ff),this.jd.removeEventListener("mouseleave",this.Vf)}}var Te=i(57),He=i.n(Te);class We extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(S.R)(this.jd)}hide(){Object(S.v)(this.jd)}}var Ge,Me=i(94),$e=i.n(Me),t=i(58),ze=i.n(t),Te=i(95),Je=i.n(Te);(Me=Ge=Ge||{})[Me.SimpleMenuItem=0]="SimpleMenuItem",Me[Me.ToggleMenuItem=1]="ToggleMenuItem",Me[Me.SubmenuMenuItem=2]="SubmenuMenuItem";class Qe extends le{constructor(e,t,i,r,s,n,o,a){super(e,t,i,r,a),this.eventName=s,this.Hf=n,this.qf=o,this.zf=[],this.eventList=[P[P.RebindComponent],ce.a[ce.a.HoldStart],ce.a[ce.a.HoldEnd],P[P.ContextMenuOpen],P[P.ContextMenuClose]],this.Wf=!1,this.Gf=10,this.Jf=e=>{this.Qf.removeChild(e.target),this.Qf.style.width=`${this.jd.clientWidth}px`},this.close=e=>{e&&Object(Y.h)(e.target,l.g.ContextController,this.Gf)||!1!==this.isOpen&&(this.Wf&&(this.mediator.publish(this,ce.a[ce.a.HoldEnd]),Object(S.L)(this.qf,l.h.OnHold),this.Wf=!1),this.isOpen=!1,this.mediator.publish(this,P[P.ContextMenuClose]),Object(S.a)(this.jd,l.h.Invisible),this._d.removeGlobalActions(this.jd),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.Qf=this.jd.getElementsByClassName(l.k.Container)[0],this.Xf=this.Ss.createElementByString(`<cnx class="${l.k.Items}"></cnx>`),this.Qf.appendChild(this.Xf),Object(S.a)(this.Qf,l.g.ContextController)}addNewItemsEvent(e){e=e.filter(e=>!Object(p.g)(e,this.eventList));0<e.length&&(this.eventList=[...this.eventList,...e],this.mediator.publish(this,P[P.RebindComponent],{payload:this.Hf}))}cacheCoordinates(){this.Zd=this.Ss.getElementCoordinates(this.qf)}positionContextMenu(e){this.cacheCoordinates(),ae(this.jd,e,this.Zd,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}Yf(e){switch(e.type){case Ge.SimpleMenuItem:this.close();break;case Ge.SubmenuMenuItem:this.Kf(e)}}sendEvent(e,t){this.mediator.publish(this,e,t)}Kf(e){var t=this.jd.clientWidth;e.isOpen?(e.$menuContainer.addEventListener("transitionend",this.Jf),this.Xf.style.left="0px",e.$menuContainer.style.left="0px"):(e.$menuContainer.removeEventListener("transitionend",this.Jf),this.Qf.style.width=`${2*t}px`,this.Qf.appendChild(e.$menuContainer),Object(S.i)(this.Qf),this.Xf.style.left=`${-t}px`,e.$menuContainer.style.left=`${-t}px`),e.isOpen=!e.isOpen}closeAllSubmenuItems(){this.zf.forEach(e=>{e.type===Ge.SubmenuMenuItem&&e.isOpen&&this.Kf(e)})}buildContextMenu(e){let t=[];this.Xf.innerHTML="",this.Qf.style.width=`${this.jd.clientWidth}px`,this.zf.forEach(e=>this.unsubscribeAll(e)),this.zf=e,this.zf.forEach(i=>{t=[...t,...i.eventList],i.eventList.forEach(t=>this.subscribe(t,i,e=>{this.Yf(i),this.sendEvent(t,e)})),i.initComponent(),this.Xf.appendChild(i.getContainer())}),this.addNewItemsEvent(t)}getAnchorCoordinatesTo(e){return null===e||void 0===e?void 0:e.getCoordinates()}open(e,t=!1){t&&(this.Wf=t,this.mediator.publish(this,ce.a[ce.a.HoldStart]),Object(S.a)(this.qf,l.h.OnHold)),this.isOpen=!0,this.mediator.publish(this,P[P.ContextMenuOpen]),this.positionContextMenu(e);e={interactionend:this.close};this._d.addGlobalActions(this.jd,e),Object(S.L)(this.jd,l.h.Invisible)}}class Ye extends he{constructor(e,t,i,r,s){super(e,t,i,Ye.getTemplate(s),r),this.mediator=e,this.Zf=!1,this.type=Ge.SimpleMenuItem,this.eventList=[],this.event=s.activeEvent,this.name=s.name,s.eventList?this.eventList=s.eventList:this.eventList.push(this.event),this.tp=this.jd.getElementsByClassName(l.k.ItemTitle)[0],this.ep=this.jd.getElementsByClassName(l.k.ItemIcon)[0]}static getTemplate(e){var t=`<cnx class="${l.k.ItemIcon}">${e.icon}</cnx>`,i=`<cnx class="${l.k.ItemExtra}">${e.label}</cnx>`;return`<cnx class="${l.k.ClickOption}">\n                    ${e.icon?t:""}\n                    <cnx class="${l.k.ItemTitle}">${e.name}</cnx>\n                    ${e.label?i:""}\n                </cnx>`}onClickHandler(e){this.mediator.publish(this,this.event)}changeItemName(e){this.tp.innerHTML=e}changeItemIcon(e){this.ep.innerHTML=e}get isActive(){return this.Zf}set isActive(e){this.Zf=e,(this.Zf?Object(S.a):Object(S.L))(this.jd,l.h.Active,l.f.AccentColor)}}var t=i(45),Xe=i.n(t),Ke=i(19);class Ze extends Qe{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}sp(){var e=Ke.a.version?`V${Ke.a.version}`:"dev",e=[new Ye(this,this.Ss,this._d,this.Yn,{activeEvent:P[P.AboutClick],name:"About Connatix",icon:Xe.a,label:e})];this.buildContextMenu(e)}initComponent(){this.sp()}onResize(){this.cacheCoordinates(),this.close()}}class et extends Ee{constructor(e,t,i,r,s){super(e,t,i,et.getTemplate(s),l.h.Active,s.defaultState,r),this.mediator=e,this.eventList=[],this.type=Ge.ToggleMenuItem,{eventOn:this.np,eventOff:this.rp}=s,this.eventList.push(this.np,this.rp)}static getTemplate(e){var t=`<cnx class="${l.k.ItemIcon}">${e.icon}</cnx>`;return`<cnx class="${l.k.ToggleOption} ${e.defaultState?l.h.Active:""}">\n                    ${e.icon?t:""}\n                    <cnx class="${l.k.ItemTitle}">${e.name}</cnx>\n                    <cnx class="${l.k.ItemExtra}">\n                        <cnx class="cnx-cm-toggle-switch">\n                            <cnx class="cnx-cm-slider ${l.f.AccentColor}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>`}onStateChange(){this.mediator.publish(this,this.isActive?this.np:this.rp)}get tooltip(){return""}}const tt={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextCaption:"Closed Caption"};class it extends Qe{constructor(e,t,i,r,s,n,o,a,l,d=!0){super(e,t,i,r,s,n,o,l),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.ap=[new Ye(this,this.Ss,this._d,this.Yn,{activeEvent:P[P.AboutClick],name:tt.ContextAbout,icon:Xe.a,label:Ke.a.version?`V${Ke.a.version}`:"dev"})],this.op=new et(this,this.Ss,this._d,this.Yn,{eventOff:P[P.CaptionOff],eventOn:P[P.CaptionOn],defaultState:d,name:tt.ContextCaption,icon:Re.a}),this.cp=[this.op],this.lp=a}up(){let e=this.ap;this.lp===l.t.Lg&&(e=[...this.cp,...this.ap]),this.buildContextMenu(e)}initComponent(){this.up()}onResize(e,t){this.isOpen&&this.positionContextMenu(e),this.lp!==t?(this.lp=t,this.closeAllSubmenuItems(),this.up()):this.lp=t}toggleCaptionState(e){this.op.isActive!==e&&(this.op.isActive=e)}hideCaptionOption(){this.op.hideComponent()}showCaptionOption(){this.op.showComponent()}getAnchorCoordinatesTo(e){let t=re.Right;return this.lp!==l.t.Xl&&this.lp!==l.t.Xxl&&(t|=re.Top),e.getCoordinates(t)}}function rt(e){return e.replace(/[-â€”]/g,"&#x2011;")}function st(i){try{return Object.keys(i).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:Object(k.h)(i[t])&&i[t].includes("%%")?void 0:i[t]}),{})}catch(e){return Object(g.a)({message:"sanitizeDfpMacros_error",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING}),Object.keys(i).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:Object(k.h)(i[t])&&-1<i[t].indexOf("%%")?void 0:i[t]}),{})}}function nt(e){return/<[a-z\/][\s\S]*>/i.test(e)}class ot extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.dp=this.jd.getElementsByClassName(l.e.CaptionContainer)[0]}updateCaptions(e){this.dp.innerHTML=e&&e.text?e.text.replace(/(?:\r\n|\r|\n)/g,"<br>"):""}}var Te=i(96),at=i.n(Te);class lt extends De{constructor(){super(...arguments),this.fp="cnx-logo-height",this.pp="cnx-logo-width"}createLogo(){this.jd.onload=()=>{this.jd.style.visibility="visible",this.resizeLogo(this.jd)},this.jd.style.visibility="hidden",this.jd.src=this.settings.logoUrl}resizeLogo(e){var t=e.naturalWidth,i=e.naturalHeight;return t&&i&&(i<t?Object(S.a)(e,this.pp):Object(S.a)(e,this.fp)),e}}var Me=i(97),dt=i.n(Me),t=i(98),ct=i.n(t);class ht extends Ve{constructor(e,t,i,r,s=!1){super(e,t,i,r,s),this.bp=80,this.fixedRailWidth=this.bp,this.eventList.push(P[P.Volume])}onProgressChange(e){this.mediator.publish(this,P[P.Volume],{payload:e})}}var Te=i(99),ut=i.n(Te),Me=i(100),pt=i.n(Me);function gt(e,t,i){const r=i?U[U.Auto]:t.height.toString();e.forEach(e=>-1<e.name.indexOf(r)?e.isActive=!0:e.isActive=!1);const s=e.find(e=>U[e.event]===U.Auto);if(i){const i=e.find(e=>e.event===t.height.toString());if(i){const e=`${s.name} (${i.name})`;s.changeItemName(e)}}else s.changeItemName(s.name)}class mt extends Qe{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.vp=[],this.mp={height:360,quality:U.Auto},this.gp=!0}sendEvent(e){this.gp=U[e]===U.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.gp?this.mp.height:parseInt(e,10),quality:this.gp?U.Auto:U.Strict}})}initComponent(){}createQualityMenu(e){this.vp=[],this.yp=e,this.yp.forEach(e=>{this.vp.push(new Ye(this,this.Ss,this._d,this.Yn,{name:`${e.videoHeight}p`,activeEvent:e.videoHeight.toString(),label:e.isHD?"HD":void 0}))}),this.vp.push(new Ye(this,this.Ss,this._d,this.Yn,{name:U[U.Auto],activeEvent:U[U.Auto]})),gt(this.vp,this.mp,this.gp),this.buildContextMenu(this.vp)}onResize(e){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(e)}updateQuality(e){Object(p.h)(this.yp)&&(this.gp=e.quality===U.Auto,this.mp.quality=e.quality,this.mp.height=Object(Q.c)(e.height,this.yp.map(e=>e.videoHeight)),gt(this.vp,this.mp,this.gp))}}var t=i(101),ft=i.n(t);class yt extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(S.R)(this.jd),Object(S.i)(this.jd),Object(S.a)(this.jd,l.h.Active)}hide(){Object(S.L)(this.jd,l.h.Active),Object(S.v)(this.jd)}}class bt extends pe{constructor(e,t,i,r,s,n,o){super(e,t,i,r,s),this.tooltip=o,this.wp=ie[n],this.eventList.push(this.wp)}onClickHandler(){this.mediator.publish(this,this.wp)}}class vt extends he{constructor(e,t,i,r,s,n,o){super(e,t,i,r,s),this.tooltip=o,this.eventList=[],this.wp=ie[n],this.eventList.push(this.wp)}onClickHandler(){this.mediator.publish(this,this.wp)}}class Pt{constructor(e,t,i,r){this.Ss=e,this._d=t,this.Yn=i,this.xp=new Map,Object.keys(r).forEach(e=>this.kp(ie[e],r[e]))}getButton(e,t){var{isHoverable:i,template:r,tooltip:s}=this.Sp(e);return new(i?bt:vt)(t,this.Ss,this._d,r,this.Yn,e,s)}isGeneralComponent(e){return this.xp.has(e)}Sp(e){return this.xp.get(e)}kp(e,t){this.xp.set(e,t)}}Te=i(102),Me=i.n(Te);function St(e,t,i=!0){return i?`\n            <cnx class="cnx-icon-button cnx-button-${ie[e].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${t}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${ie[e].toLowerCase()}">${t}</cnx>`}var t=i(63),Te=i.n(t),t=i(103),t=i.n(t),It={[ie[ie.MoreButton]]:{template:St(ie.MoreButton,t.a),tooltip:"More",isHoverable:!0},[ie[ie.CloseButton]]:{template:St(ie.CloseButton,Me.a),tooltip:"Close Player",isHoverable:!0},[ie[ie.UpNextButton]]:{template:St(ie.UpNextButton,Te.a),tooltip:"Next",isHoverable:!0},[ie[ie.PreviousButton]]:{template:St(ie.PreviousButton,Te.a),tooltip:"Previous",isHoverable:!0}};class Tt extends pe{constructor(){super(...arguments),this.eventList=[P[P.SkipAd],...this.eventList],this.Op=-1,this._p=-1}initComponent(){super.initComponent(),this.hideComponent(),this.jp=this.jd.getElementsByTagName("cnx-span")[0],this.jp.innerHTML="Ad",this.Ap=this.jd.querySelectorAll(`.${l.q.Timer} svg`)[0]}setSecondsUntilSkip(e){this.Op=Math.ceil(e),this._p=-1,0<this.Op&&Object(S.Q)(this.Ap,{"animation-duration":this.Op+"s"})}tickDown(e){var t=this.Op-Math.floor(e);t<0||0===this._p||(e=Object(S.u)(this.jd,l.q.InTimer),this._p=t,0===this._p?(e&&Object(S.L)(this.jd,l.q.InTimer),this.jp.innerHTML="Ad"):(e||Object(S.a)(this.jd,l.q.InTimer),this.jp.innerHTML=`in ${this._p}s`))}get tooltip(){}onClickHandler(){0===this._p&&this.mediator.publish(this,P[P.SkipAd])}}var Me=i(104),kt=i.n(Me),Te=i(105),At=i.n(Te),Ot=i(24);class Ct extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Tp=this.jd.getElementsByClassName(l.a.BackgroundImg)[0],this.Cp=this.jd.getElementsByClassName(l.a.Icon)[0],this.Cp.innerHTML=At.a,this.Pp=this.jd.getElementsByClassName(l.a.ButtonContainer)[0];var e=this.jd.getElementsByClassName(l.a.Button)[0];this.Mp=this.Ss.createElementByString(`<a class="${l.a.Wrapper}" href="#">`),this.Mp.target=Ot.c.Blank,this.Mp.appendChild(e),this.Pp.innerHTML="",this.Pp.appendChild(this.Mp),this.Ep=this.jd.getElementsByClassName(l.a.InfoContainer)[0],this.Lp=this.jd.getElementsByClassName(l.a.FallbackContainer)[0],this.Rp=this.jd.getElementsByClassName(l.a.SlotCountText)[0]}setBackgroundImg(e){Object(k.h)(e)?(Object(S.L)(this.Tp,l.h.DisplayNone),this.Tp.src=e):Object(S.a)(this.Tp,l.h.DisplayNone)}setClickUrl(e){if(!Object(k.h)(e))return Object(S.R)(this.Lp),void Object(S.v)(this.Ep);Object(S.R)(this.Ep),Object(S.v)(this.Lp),this.Mp.href=e}setFallbackText(e,t){this.Rp.innerHTML=`Loading ad ${e||1}/${t||1}`}}var wt,Me=i(106),xt=i.n(Me);class Et{constructor(e,t,i,r={},s={}){this.Ss=e,this._d=t,this.jd=i,this.Jn=r,this.Bp={[ie.PlayButton]:e=>this.Dp(!1,e),[ie.BigPlayButton]:e=>this.Dp(!0,e),[ie.VolumeProgress]:e=>new ht(e,this.Ss,this._d,ut.a),[ie.ExpandButton]:e=>new Oe(e,this.Ss,this._d,pt.a,this.Jn.isMobile),[ie.QualityMenu]:e=>new mt(e,this.Ss,this._d,ft.a,P[P.Quality],ie.QualityMenu,this.jd,this.Jn.isMobile),[ie.Loader]:e=>new yt(e,this.Ss,this._d,ze.a),[ie.SkipAdButton]:e=>new Tt(e,this.Ss,this._d,kt.a,this.Jn.isMobile),[ie.AdLoadingScreen]:e=>new Ct(e,this.Ss,this._d,xt.a)},this.Dp=(e,t)=>new ge(t,this.Ss,this._d,function(e=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${e?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${dt.a}</cnx>\n            <cnx class="cnx-pause-icon">${ct.a}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(e),this.Jn.isMobile),this.Fp=i=>e=>{const t=this.Bp[i];if(t)return t(e)},this.Up=new Pt(this.Ss,this._d,this.Jn.isMobile,Object.assign(Object.assign({},It),s))}createComponent(e,t){return this.Fp(e)(t)||(this.Up.isGeneralComponent(e)?this.Up.getButton(e,t):void 0)}}(Te=wt=wt||{})[Te.Mute=0]="Mute",Te[Te.Unmute=1]="Unmute";class Lt extends pe{constructor(e,t,i,r,s,n){super(e,t,i,r,n),this.eventList=[P[P.Mute],P[P.Unmute],P[P.StateChanged],...this.eventList],this.$p="Mute",this.Vp="Unmute",this.Jt=s}onClickHandler(){this.Jt===wt.Mute?(this.mediator.publish(this,P[P.Unmute]),this.setState(wt.Unmute)):(this.mediator.publish(this,P[P.Mute]),this.setState(wt.Mute))}Ed(){this.Jt===wt.Mute?Object(S.O)(this.jd,"cnx-sound-on","cnx-sound-off"):Object(S.O)(this.jd,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Jt===wt.Mute?this.Vp:this.$p}initComponent(){super.initComponent(),this.Ed()}setState(e){this.Jt!==e&&(this.Jt=e,this.Ed(),this.mediator.publish(this,P[P.StateChanged]))}setVolume(e){0<e?this.setState(wt.Unmute):this.setState(wt.Mute)}}class Rt extends Pe{constructor(e,t,i,r){super(t,i,r),this.mediator=e,this.jd=this.zd.getRenderedDom()}getContainer(){return this.jd}initComponent(){this.zd.initComponents()}showComponent(){Object(S.R)(this.jd)}hideComponent(){Object(S.v)(this.jd)}}class Mt extends Rt{constructor(e,t,i,r){super(e,t,i,r),this.Np=null,this.eventList=[P[P.Volume],P[P.VolumeHoverStart],P[P.VolumeHoverStopped],P[P.DraggingStopped],P[P.DraggingStart],P[P.HoverStart],P[P.HoverEnd],P[P.StateChanged]],this.Hp=.2,this.qp=600,this.zp=!1,this.Wp=e=>{clearTimeout(this.Np),Object(S.a)(this.jd,"cnx-mod-hover"),this.mediator.publish(this,P[P.VolumeHoverStart])},this.Gp=()=>{this.zp||(null!==this.Np&&clearTimeout(this.Np),this.Np=setTimeout(()=>{Object(S.L)(this.jd,"cnx-mod-hover"),this.mediator.publish(this,P[P.VolumeHoverStopped])},this.qp))},this.Jp=this.Hp,this.Qp=this.getComponent(ie.VolumeButton),this.Xp=this.getComponent(ie.VolumeProgress)}handleComponentEvent(e,t,i){let r;switch(e){case P[P.Volume]:r=t.payload/100,this.Yp(r),this.Kp(t.payload);break;case P[P.Mute]:r=0,this.setVolumeProgress(0);break;case P[P.Unmute]:r=this.Jp,this.setVolumeProgress(100*this.Jp);break;case P[P.DraggingStopped]:this.zp=!1,this.mediator.publish(this,P[P.DraggingStopped]),this.Gp();break;case P[P.DraggingStart]:this.zp=!0,this.mediator.publish(this,P[P.DraggingStart]);break;case P[P.HoverStart]:this.mediator.publish(this,P[P.HoverStart],{payload:{targetComponent:i}});break;case P[P.HoverEnd]:this.mediator.publish(this,P[P.HoverEnd],{payload:{targetComponent:i}});break;case P[P.StateChanged]:this.mediator.publish(this,P[P.StateChanged],{payload:{targetComponent:i}})}void 0!==r&&this.Zp(r)}Yp(e){e<this.Hp?this.Jp=this.Hp:this.Jp=e}Zp(e){this.mediator.publish(this,P[P.Volume],{payload:e})}Kp(e){0===e?this.Qp.setState(wt.Mute):this.Qp.setState(wt.Unmute)}setVolumeProgress(e){this.Xp.setProgress(e)}initComponent(){super.initComponent(),this.jd.addEventListener("mouseenter",this.Wp),this.jd.addEventListener("mouseleave",this.Gp)}setVolume(e){e*=100;this.Kp(e),this.setVolumeProgress(e)}destroy(){super.destroy(),this.jd.removeEventListener("mouseenter",this.Wp),this.jd.removeEventListener("mouseleave",this.Gp)}}var Bt=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${ie.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${ie.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim(),Me=i(107),Te=i.n(Me),Me=i(108),Me=i.n(Me),jt={[ie[ie.ShareButton]]:{template:St(ie.ShareButton,Me.a),tooltip:"Share",isHoverable:!0},[ie[ie.CastButton]]:{template:St(ie.CastButton,Te.a),tooltip:"Cast",isHoverable:!0}},Me=i(109),Dt=i.n(Me),Te=i(110),_t=i.n(Te),Me=i(111),Ft=i.n(Me);const Nt=90*L.g,Ut="This live stream will start shortly";class Vt extends le{constructor(){super(...arguments),this.eventList=[],this.tb=null}initComponent(){this.ib=this.Ss.createElementByString("<img/>"),this.jd.appendChild(this.ib),this.eb=this.jd.getElementsByTagName("cnx-span")[0],this.sb=this.jd.getElementsByClassName("cnx-live-message")[0],this.rb=this.jd.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(e){Object(k.h)(e)&&(this.ib.src=e)}setPosterAltText(e){this.ib.alt=e}setIconToStarting(){this.rb.innerHTML=`${_t.a}`}setIconToEnded(){this.rb.innerHTML=`${Ft.a}`}setMessageToStarting(){this.ab(Ut)}setMessageToEnded(){this.ab("This live stream is not currently available. Please check again shortly")}setMessageToNotSupported(){this.ab("Live stream not supported by browser")}handleDelayedStart(e){Object(k.e)(Date.parse(e))&&(this.hb=new Date(e),0<this.ob()&&(this.cb(),clearInterval(this.tb),this.tb=setInterval(()=>{this.cb()},L.f*L.g)))}showMessage(){Object(S.R)(this.rb),Object(S.R)(this.sb)}hideMessage(){Object(S.v)(this.rb),Object(S.v)(this.sb)}show(){Object(S.R)(this.jd),Object(S.a)(this.jd,l.h.Active)}hide(){Object(S.L)(this.jd,l.h.Active),Object(S.v)(this.jd)}destroy(){super.destroy(),clearInterval(this.tb)}cb(){var e=this.ob();0<e?(e=this.lb(e),this.ab(`Live in ${e}`)):(this.ab(Ut),clearInterval(this.tb),this.tb=null)}ob(){return(Math.max(this.hb.getTime(),Date.now())-Date.now())/L.f}lb(e){var t=e>=Nt?Math.round(e/(L.g*L.c)):Math.ceil(e/L.g);return`${t} ${e>=Nt?"hours":`minute${1===t?"":"s"}`}`}ab(e){this.eb.innerHTML=e}}var Te=i(112),qt=i.n(Te);class Ht extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}var Wt,Me=i(113),Gt=i.n(Me);class $t extends Et{constructor(e,t,i,r,s){super(e,t,i,r,jt),this.Ss=e,this.jd=i,this.Jn=r,this.ub=s,this.fb={[ie.VolumeControls]:e=>new Mt(e,this.Ss,Bt,this),[ie.VolumeButton]:e=>new Lt(e,this.Ss,this._d,Dt.a,wt.Mute,this.Jn.isMobile),[ie.SettingsButton]:e=>new we(e,this.Ss,this._d,xe.a,this.Jn.isMobile),[ie.CaptionButton]:e=>new Le(e,this.Ss,this._d,Re.a,l.h.Active,this.Jn.closedCaptionDefault,this.Jn.isMobile),[ie.UpNextBox]:e=>new je(e,this.Ss,this._d,Be.a,this.Jn.isMobile),[ie.LogoComponent]:e=>{if(!Object(k.a)(this.Jn.logoUrl)&&!Object(k.a)(this.Jn.logoPosition))throw new Error("custom logo is undefined");return new De(e,this.Ss,this._d,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Jn.logoUrl,logoPosition:this.Jn.logoPosition})},[ie.LogoOutstream]:e=>{if(!Object(k.a)(this.Jn.logoUrl)&&!Object(k.a)(this.Jn.logoPosition))throw new Error("outstream logo undefined");return new lt(e,this.Ss,this._d,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Jn.logoUrl})},[ie.LivePoster]:e=>new Vt(e,this.Ss,this._d,qt.a),[ie.LiveIcon]:e=>new Ht(e,this.Ss,this._d,Gt.a),[ie.ElapsedTimeLabel]:e=>new Fe(e,this.Ss,this._d,Ne.a),[ie.TotalDurationLabel]:e=>new Fe(e,this.Ss,this._d,Ne.a),[ie.ProgressBar]:e=>new qe(e,this.Ss,this._d,He.a,this.Jn.isMobile),[ie.QueStateOverlay]:e=>new We(e,this.Ss,this._d,ze.a),[ie.ContextMenu]:e=>new Ze(e,this.Ss,this._d,$e.a,P[P.ContextClick],ie.ContextMenu,this.jd,this.Jn.isMobile),[ie.ElementsSettingsMenu]:e=>new it(e,this.Ss,this._d,Je.a,P[P.SettingsMenu],ie.ElementsSettingsMenu,this.jd,this.ub,this.Jn.isMobile,this.Jn.closedCaptionDefault),[ie.CaptionComponent]:e=>new ot(e,this.Ss,this._d,at.a)},this.pb=i=>e=>{const t=this.fb[i];if(t)return t(e)}}createComponent(e,t){return this.pb(e)(t)||super.createComponent(e,t)}}(Te=Wt=Wt||{}).InPod="cnx-ad-in-pod",Te.AdMarkerInPodTextContainer="cnx-ad-marker-text",Te.CardImage="cnx-ad-card-image",Te.CardTitle="cnx-ad-card-title",Te.AdUiContent="cnx-ui-ad-content";class zt extends Ce{constructor(e,t,i,r,s,n,o={},a){super(e,s,t,n,a||new $t(t,r,s,o)),this.mediator=e,this.globalDomUtilsService=t,this.Ic=i,this.$container=s,this.settings=o,this.Gd={[V.PlayingState]:new fe(this),[V.PausedState]:new be(this)},this.bb=0,this.Va=null,this.vb=e=>{Object(S.U)(this.$uiContainer,l.g.UiInView,e)},this.cf.setDistanceValues({top:4,bottom:4}),this.Gd[V.PausedState].enterState(),this.mb=this.$container.querySelector(`.${Wt.CardImage}`),this.gb=this.$container.querySelector(`.${Wt.CardTitle}`),this.yb=this.$container.querySelector(`.${Wt.AdUiContent}`)}handleComponentEvent(e,t,i){switch(super.handleComponentEvent(e,t,i),e){case P[P.Volume]:this.mediator.publish(this,P[P.Volume],t);break;case P[P.Mute]:this.mediator.publish(this,P[P.Mute]);break;case P[P.Unmute]:this.mediator.publish(this,P[P.Unmute]);break;case ie[ie.CloseButton]:this.mediator.publish(this,P[P.Close]);break;default:this.mediator.publish(this,e,t)}}updateDuration(e){const t=this.getComponent(ie.ProgressBar),i=this.getComponent(ie.TotalDurationLabel),r=this.getComponent(ie.SkipAdButton);!e&&r&&(r.setSecondsUntilSkip(0),r.tickDown(0)),e||!t?(this.elapsedTime=0,this.duration=e,t&&t.setProgress(Object(Q.g)(0,e,0,100,0)),i&&i.setTime(e),this.wb(this.bb)):t.setProgress(100)}updateVolume(e){const t=this.getComponent(ie.VolumeControls),i=this.getComponent(ie.VolumeButton);t&&t.setVolume(e),i&&i.setVolume(e)}get elapsedTime(){return this.bb}set elapsedTime(e){this.bb=e,this.wb(this.bb)}showSkipAdButton(e){const t=this.getComponent(ie.SkipAdButton);t&&(t.showComponent(),t.setSecondsUntilSkip(e))}hideSkipAdButton(){const e=this.getComponent(ie.SkipAdButton);e&&e.hideComponent()}addPodAdMarker(t,i){Object(S.a)(this.$uiContainer,Wt.InPod),Object(p.c)(this.$uiContainer.getElementsByClassName(Wt.AdMarkerInPodTextContainer)).forEach(e=>{e.innerHTML=`${t+1}/${i}`})}removeAddPodAdMarker(){Object(S.L)(this.$uiContainer,Wt.InPod)}wb(e){const t=this.getComponent(ie.ElapsedTimeLabel);t&&t.setTime(e);const i=this.getComponent(ie.SkipAdButton);i&&i.tickDown(e)}hideAdLoadingScreen(){const e=this.getComponent(ie.AdLoadingScreen);e&&e.hideComponent(),Object(S.L)(this.$container,l.g.PodLoadingScreen)}showAdLoadingScreen(e,t,i,r){const s=this.getComponent(ie.AdLoadingScreen);s&&(s.showComponent(),s.setBackgroundImg(e),s.setClickUrl(t),s.setFallbackText(i,r),Object(S.a)(this.$container,l.g.PodLoadingScreen))}hideAdMarker(){var e=this.$container.querySelector(".cnx-ad-marker");Object(S.v)(e)}hideProgressBar(){this.getComponent(ie.ProgressBar).hideComponent()}setContinueReadingCard(e){this.mb.style.backgroundImage=`url("${e.imageSrc}")`,this.gb.innerHTML=e.title}cardHasData(){return Object(k.h)(this.mb.style.backgroundImage)&&Object(k.h)(this.gb.innerHTML)}showContinueReadingCard(e){Object(S.a)(this.$container,l.g.AdShowCard),null===this.Va&&(this.Va=this.globalDomUtilsService.requestAnimationFrameHelper(()=>{this.Va=null,Object(S.Q)(e,{height:`${this.yb.clientHeight}px`})}))}hideContinueReadingCard(e){Object(S.L)(this.$container,l.g.AdShowCard),Object(S.N)(e,"height")}show(){super.show(),this.Ic.on(this.$uiContainer,this.vb,{threshold:.5})}hide(){super.hide(),Object(S.U)(this.$uiContainer,l.g.UiInView,!1),this.Ic.off(this.$uiContainer,this.vb)}}var Me=i(114),Jt=i.n(Me);class Qt{get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content">\n                    <cnx class="cnx-ad-marker">\n                        <cnx class="cnx-ad-marker-svg">${Jt.a}</cnx>\n                        <cnx class="cnx-ad-marker-text">1/1</cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${ie.CloseButton}]]</cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${ie.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${ie.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${ie.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${ie.SkipAdButton}]]\n                    <cnx class="cnx-ad-progress-bar">[[${ie.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${Wt.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${Wt.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${ie.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}}var Yt=i(17);class Xt extends n.a{constructor(e,t,i,r,s,n){super(),this.mediator=e,this.la=t,this.xb=i,this.kb=r,this.Sb=s,this.Ob=n,this._b=[],this.firstAdShown=!1,this._r=!1,this.jb=0,this.Ab=!0,this.Ib=!1,this.Tb=!1,this.Cb=v.a.Normal,this.Pb=this.getNewAdManager(),this.subscribe(w.AdsEnabled,this.Pb,()=>{this.mediator.publish(this,w.AdsEnabled)})}Mb(e,t,i){this.Pb.initAd(e,t,this.Cb,1,i,[{container:this.Eb,width:e,height:t,type:f.ProtoAdType.Video}])}Lb(){this.Rb.showSkipAdButton(this.la.skipAdAfter)}Bb(e){var t=this.Pb.getCurrentAdClickTrackingProperties();t&&this.Ob.services.TrackingService.trackAdClick(Object.assign(Object.assign({},t),{type:e}))}Db(e){if(e.payload.adLoadedData.skipOffset&&0<=e.payload.adLoadedData.skipOffset)return!1;var t=this.Pb.getAdDuration();switch(this.la.adSkippability){case f.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((e.payload.adSkipMode===f.ProtoAdSkipMode.IfLongerThan31Sec||e.payload.adSkipMode===f.ProtoAdSkipMode.Never)&&(t<D.f||!t))return!1;break;case f.ProtoPlayerAdSkippability.NoRestrictions:if(e.payload.adSkipMode===f.ProtoAdSkipMode.Never||e.payload.adSkipMode===f.ProtoAdSkipMode.IfLongerThan31Sec&&(t<D.f||!t))return!1}return!0}Fb(t){this._b.filter(e=>e!==t).forEach(e=>{Object(S.a)(e,l.h.Hide)})}Ub(){this._b.forEach(e=>{Object(S.L)(e,l.h.Hide)})}updateFilterConfig(e){this.Pb.updateFilterConfig(e)}$b(){this.Tb=!1,this.Rb.hideAdLoadingScreen()}Vb(){this.Rb.hideSkipAdButton()}Nb(){let r;Object.keys(v.b).forEach(i=>{this.subscribe(v.b[i],this.Pb,e=>{switch(r=!1,v.b[i]){case v.b.AdLoaded:const t=e;this.Ib=this.Db(e),this.Ib&&(t.payload.adLoadedData.skipOffset=this.la.skipAdAfter);break;case v.b.AdPaused:this.Rb.changeState(V.PausedState);break;case v.b.AdPlaying:this.Rb.changeState(V.PlayingState);break;case v.b.AdImpression:this.Hb(e);break;case v.b.AdSkipped:this.Bb(f.ProtoAdClickTypeEnum.AdSkipClick),this.Ub(),r=!0;break;case v.b.AdStopped:case v.b.AdError:this.Ub(),r=!0;break;case v.b.AdClickThru:this.Bb(f.ProtoAdClickTypeEnum.AdClickThrough)}this.Ab&&this.mediator.publish(this,v.b[i],e),this.Ab=!0,r&&(this._r=!1,this.Rb.changeState(V.PausedState))})}),this.subscribe(P[P.Volume],this.Rb,({payload:e})=>{this.setVolume(e),this.Bb(f.ProtoAdClickTypeEnum.VolumeClick)}),this.subscribe(P[P.Play],this.Rb,()=>{this.Bb(f.ProtoAdClickTypeEnum.PlayClick),this.play()}),this.subscribe(P[P.Pause],this.Rb,()=>{this.Bb(f.ProtoAdClickTypeEnum.PauseClick),this.pause()}),this.subscribe(P[P.Close],this.Rb,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,P[P.Close])}),this.subscribe(P[P.Mute],this.Rb,()=>{this.setVolume(0),this.Bb(f.ProtoAdClickTypeEnum.MuteClick)}),this.subscribe(P[P.Unmute],this.Rb,()=>{this.setVolume(1),this.Bb(f.ProtoAdClickTypeEnum.UnmuteClick)}),this.subscribe(w.DetachedFromDom,this.Pb,()=>{this.mediator.publish(this,C.DetachedFromDom)}),this.relay(A.b.ImpressionPrice,this.Pb,this,this.mediator)}Hb(e){this.Vb(),this.updateContinueReadingCard(),e.payload.adDuration=this.Pb.getAdDuration(),e.payload.adDuration||this.firstAdShown||this.show(),this.firstAdShown=!0,this._r=!0,this.Ib&&this.Lb(),this.Rb.updateDuration(e.payload.adDuration),this.Rb.changeState(V.PlayingState),this.qb=e.payload.clickThroughUrl,this.Fb(e.payload.selectedAdSlot),1<this.Sb.getTotalNumberOfSlots()?this.Rb.addPodAdMarker(this.Sb.getCurrentSlotIndex(),this.Sb.getTotalNumberOfSlots()):this.Rb.removeAddPodAdMarker()}zb(e){this.xb.appendChild(e)}Wb(e=""){return this.Ob.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${e}"></div>`)}Gb(){this.Eb=this.Wb(),this.zb(this.Eb),this._b.push(this.Eb)}Jb(){var e,t,e=(e=this.la,t=this.Ob.config,{logoUrl:e.logoUrl,isMobile:t.isMobile,closeButtonMode:e.closeButtonMode,floatingCloseButtonMode:e.floatingCloseButtonMode,isCloseButton:e.isCloseButton,uiComponentsVisibility:e.uiComponentsVisibility,sharingDestinations:e.sharingDestinations});this.Rb=new zt(this,this.Ob.services.GlobalDomUtilsService,this.Ob.services.ViewabilityService,this.Ob.services.InteractionService,this.xb,(new Qt).template,e),this.Rb.hide()}start(e,t,i){try{this.Jb(),this.Gb(),this.Mb(e,t,i),this.setVolume(i),this.Nb()}catch(e){Object(g.a)({callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL,exception:e.message,message:"adhandler_start"})}}getVolume(){return this.jb}hide(){Object(S.L)(this.xb,l.g.Ad,l.g.AdOverlayType),this.Rb.hide()}show(){const e=[l.g.Ad],t=this.Pb.getCurrentAdType();t===f.ProtoAdType.Overlay&&e.push(l.g.AdOverlayType),this.Qb=t,Object(S.a)(this.xb,...e),this.Rb.show(),this.Rb.updateVolume(this.jb),this.$b()}setVolume(e){this.jb=e,this.Pb.setAdVolume(e),this.Rb&&this.Rb.updateVolume(e),this.mediator.publish(this,o.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,P[P.Volume],{payload:{volume:e}})}resizeAd(e,t,i){this.setVastViewMode(i),this.updateContinueReadingCard(),this.mediator.publish(this,C.AdSlotResized,{payload:{width:e,height:t}})}adStateChange(e,t){this.Pb.onAdStateChange(e,t)}contentChanged(){this.Pb.onContentChange()}get inImpression(){return this._r}get adInWin(){return this.Pb.adInWin}get inAdPodLoadingState(){return this.Tb}resumeWithoutUserInteraction(){this.Pb.resumeAd(!1)}play(){this.Pb.resumeAd(!0),this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}})}Xb(e){if(Object(Yt.b)("cnxShowAdCard",this.Ob.config.pageUrl))return!0;let t=!1;var i;return e.adType===f.ProtoAdType.Video&&(i=this.xb.clientWidth*(e.heightRatio/e.widthRatio),t=76<=this.xb.clientHeight-i),e.adType===f.ProtoAdType.Overlay&&(t=76<=this.xb.clientHeight-e.height),t}updateContinueReadingCard(){var e=this.Pb.getAdMediaSize();Object(k.a)(e)&&(this.Xb(this.Pb.getAdMediaSize())?this.Rb.showContinueReadingCard(this.Eb):this.Rb.hideContinueReadingCard(this.Eb))}setContinueReadingCard(e){this.Rb.setContinueReadingCard({imageSrc:ne.getSmartCroppedImageUrl(e.imageSrc,270,150),title:e.title})}pause(){this.Pb.pauseAd(!0),this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}})}stopAd(e){var t=()=>{this.mediator.publish(this,v.b.AdStopped),this.Ab=!1};this.Pb&&this.inImpression?(t(),this.Pb.stopAd(e)):this.inAdPodLoadingState&&t()}skipAd(){this.Pb&&this.inImpression?this.Pb.skipAd():this.Tb&&(this.mediator.publish(this,v.b.AdSkipped),this.$b())}userInteraction(e){this.Pb.userInteraction(e)}enableAds(){this.Pb.enableAds()}enterAdPodLoadingState(){this.Tb=!0;var{width:e,height:t}=this.Pb.getLastAdSlot(this.Qb);this.Rb.showAdLoadingScreen(ne.getSmartCroppedImageUrl(this.Yb,e,t),this.qb,this.Sb.getNextSlotIndex(),this.Sb.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(e){this.Yb=e}updatePodRemainingTime(e){this.Pb.updatePodRemainingTime(e)}newAdOpportunity(){this.Pb.newAdOpportunity()}disableAds(e){this.Pb.disableAds(e)}setVastViewMode(e){this.Cb=e,this.Pb.setVastViewMode(e)}destroy(){var e;null===(e=this.Pb)||void 0===e||e.disableAds(j.Unknown),null===(e=this.Rb)||void 0===e||e.destroy(),null===(e=this.Pb)||void 0===e||e.destroy()}}Te=i(29);(Me=wn=wn||{}).AppNexus="appnexus",Me.DistrictM="districtm",Me.IndexExchange="ix",Me.Lkqd="lkqd",Me.OneVideo="oneVideo",Me.OpenX="openx",Me.Pubmatic="pubmatic",Me.RhythmOne="rhythmone",Me.Rubicon="rubicon",Me.SpotX="spotx",Me.Telaria="telaria",Me.MediaNet="medianet",Me.Adman="adman",Me.IronSource="ironsource",Me.Undertone="undertone",Me.SynacorMedia="synacormedia",Me.AmxRTB="amx",Me.Smaato="smaato";const Kt={[wn.Lkqd]:Te.c.Lkqd,[wn.RhythmOne]:Te.c.RhythmOne,[wn.Telaria]:Te.c.Telaria,[wn.IronSource]:Te.c.IronSource,[wn.Undertone]:Te.c.Undertone,[wn.SynacorMedia]:Te.c.SynacorMedia},Zt=[wn.AppNexus,wn.DistrictM,wn.IndexExchange,wn.OneVideo,wn.OpenX,wn.Pubmatic,wn.RhythmOne,wn.Rubicon,wn.SpotX,wn.Telaria,wn.MediaNet,wn.Adman,wn.IronSource,wn.Undertone,wn.AmxRTB,wn.Smaato],ei=[wn.AppNexus,wn.DistrictM,wn.IndexExchange,wn.OneVideo,wn.OpenX,wn.Pubmatic,wn.RhythmOne,wn.Rubicon,wn.SpotX,wn.Telaria,wn.MediaNet,wn.Adman,wn.AmxRTB,wn.Smaato],ti=[wn.OneVideo,wn.IndexExchange,wn.Rubicon,wn.Pubmatic,wn.SpotX,wn.AppNexus,wn.DistrictM,wn.OpenX,wn.MediaNet,wn.Adman,wn.IronSource,wn.Undertone,wn.SynacorMedia,wn.AmxRTB,wn.Smaato],ii="https://prebid.adnxs.com/pbc/v1/cache",ri=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],si={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6},ni={VPAID_1:1,VPAID_2:2};class oi{constructor(){this.Kb=Date.now(),this.Zb={advertiser:{}}}addPrebid(e){Object(k.a)(this.Zb.advertiser[e])||this.tv(e),this.Zb.advertiser[e].prebidData.push({timestamp:Date.now()})}addBid(e,t){Object(k.a)(this.Zb.advertiser[e])||this.tv(e),this.Zb.advertiser[e].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:t})}addImpression(e,t){Object(k.a)(this.Zb.advertiser[e])||this.tv(e),this.Zb.advertiser[e].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:t})}shouldRequestLineItem(e){var t=Date.now();return!(this.ev(t,3)&&this.sv(e,t,5)<-.5&&11.5<=this.nv(e,t,3)&&this.rv(e,t,10,.1)<.35)}ev(e,t){return e-this.Kb>=t*L.e}sv(e,t,i){e=this.Zb.advertiser[e];if(!Object(k.a)(e))return-1;const r=this.av(e.impressionRevenueList,t,i).map(e=>e.obfuscatedPrice);let s=0;return Object(p.h)(r)&&(s=r.reduce((e,t)=>e+this.hv(t))),this.ov(s)}nv(e,t,i){e=this.Zb.advertiser[e];if(!Object(k.a)(e))return-1;i=this.av(e.prebidData,t,i).length;return this.ov(i)}rv(e,t,i,r){e=this.Zb.advertiser[e];if(!Object(k.a)(e))return-1;i=this.av(e.impressionRevenueList,t,i).map(e=>e.floorPrice),r=this.cv(i,r);return this.ov(r)}av(t,e,i){const r=e-L.f,s=e-i*L.e,n=[];for(let e=t.length-1;0<=e&&t[e].timestamp>=s;e--)t[e].timestamp<=r&&n.push(t[e]);return n}ov(e){return 0===e?-1:e}tv(e){this.Zb.advertiser[e]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}hv(e){return 2*(e+41)}cv(e,t){if(0===e.length)return 0;if(t<=0)return e[0];if(1<=t)return e[e.length-1];var i=((e=e.sort((e,t)=>e-t)).length-1)*t,r=Math.floor(i),t=r+1,i=i%1;return t>=e.length?e[r]:e[r]*(1-i)+e[t]*i}}class ai{constructor(){this.lv=new Set}addPlatformCappedLineItemIdList(e){e.forEach(e=>{this.lv.add(e)})}isLineItemPlatformCapped(e){return this.lv.has(e)}}var li=function(e,t){return(li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function di(e,t){function i(){this.constructor=e}li(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function ci(e){return"function"==typeof e}var hi=!1,ui={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,hi=e},get useDeprecatedSynchronousErrorHandling(){return hi}};function pi(e){setTimeout(function(){throw e},0)}var gi={closed:!0,next:function(e){},error:function(e){if(ui.useDeprecatedSynchronousErrorHandling)throw e;pi(e)},complete:function(){}},mi=Array.isArray||function(e){return e&&"number"==typeof e.length};function fi(e){return null!==e&&"object"==typeof e}var yi=(Pi.prototype=Object.create(Error.prototype),Pi),bi=(vi.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this.uv,i=this.fv,r=this.oa,s=this.dv;if(this.closed=!0,this.uv=null,this.dv=null,e instanceof vi)e.remove(this);else if(null!==e)for(var n=0;n<e.length;++n)e[n].remove(this);if(ci(r)){i&&(this.oa=void 0);try{r.call(this)}catch(e){t=e instanceof yi?Si(e.errors):[e]}}if(mi(s))for(var n=-1,o=s.length;++n<o;){var a=s[n];if(fi(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof yi?t=t.concat(Si(e.errors)):t.push(e)}}if(t)throw new yi(t)}},vi.prototype.add=function(e){var t,i=e;if(!e)return vi.EMPTY;switch(typeof e){case"function":i=new vi(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;i instanceof vi||(t=i,(i=new vi).dv=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=i.uv;if(null===r)i.uv=this;else if(r instanceof vi){if(r===this)return i;i.uv=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}r=this.dv;return null===r?this.dv=[i]:r.push(i),i},vi.prototype.remove=function(e){var t=this.dv;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},vi.EMPTY=((Te=new vi).closed=!0,Te),vi);function vi(e){this.closed=!1,this.uv=null,this.dv=null,e&&(this.fv=!0,this.oa=e)}function Pi(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function Si(e){return e.reduce(function(e,t){return e.concat(t instanceof yi?t.errors:t)},[])}var Ii,Ti,ki="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ai=(di(wi,Ti=bi),wi.prototype[ki]=function(){return this},wi.create=function(e,t,i){i=new wi(e,t,i);return i.syncErrorThrowable=!1,i},wi.prototype.next=function(e){this.isStopped||this.pv(e)},wi.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this.bv(e))},wi.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.vv())},wi.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Ti.prototype.unsubscribe.call(this))},wi.prototype.pv=function(e){this.destination.next(e)},wi.prototype.bv=function(e){this.destination.error(e),this.unsubscribe()},wi.prototype.vv=function(){this.destination.complete(),this.unsubscribe()},wi.prototype.mv=function(){var e=this.uv;return this.uv=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this.uv=e,this},wi),Oi=(di(Ci,Ii=Ai),Ci.prototype.next=function(e){var t;!this.isStopped&&this.pv&&(t=this.gv,ui.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.wv(t,this.pv,e)&&this.unsubscribe():this.xv(this.pv,e))},Ci.prototype.error=function(e){if(!this.isStopped){var t=this.gv,i=ui.useDeprecatedSynchronousErrorHandling;if(this.bv)i&&t.syncErrorThrowable?this.wv(t,this.bv,e):this.xv(this.bv,e),this.unsubscribe();else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):pi(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;pi(e)}}},Ci.prototype.complete=function(){var e,t,i=this;this.isStopped||(e=this.gv,this.vv&&(t=function(){return i.vv.call(i.yv)},ui.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.wv(e,t):this.xv(t)),this.unsubscribe())},Ci.prototype.xv=function(e,t){try{e.call(this.yv,t)}catch(e){if(this.unsubscribe(),ui.useDeprecatedSynchronousErrorHandling)throw e;pi(e)}},Ci.prototype.wv=function(e,t,i){if(!ui.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this.yv,i)}catch(t){return ui.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):pi(t),!0}return!1},Ci.prototype.oa=function(){var e=this.gv;this.yv=null,this.gv=null,e.unsubscribe()},Ci);function Ci(e,t,i,r){var s,n=Ii.call(this)||this;n.gv=e;e=n;return ci(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==gi&&(ci((e=Object.create(t)).unsubscribe)&&n.add(e.unsubscribe.bind(e)),e.unsubscribe=n.unsubscribe.bind(n))),n.yv=e,n.pv=s,n.bv=i,n.vv=r,n}function wi(e,t,i){var r=Ti.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=gi;break;case 1:if(!e){r.destination=gi;break}if("object"==typeof e){e instanceof wi?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new Oi(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new Oi(r,e,t,i)}return r}var xi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ei(e){return e}var Li=(Ri.prototype.lift=function(e){var t=new Ri;return t.source=this,t.operator=e,t},Ri.prototype.subscribe=function(e,t,i){var r=this.operator,i=function(e,t,i){if(e){if(e instanceof Ai)return e;if(e[ki])return e[ki]()}return e||t||i?new Ai(e,t,i):new Ai(gi)}(e,t,i);if(r?i.add(r.call(i,this.source)):i.add(this.source||ui.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this.Sv(i):this.Ov(i)),ui.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},Ri.prototype.Ov=function(t){try{return this.Sv(t)}catch(e){ui.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e,i=t.closed,r=t.destination,t=t.isStopped;if(i||t)return;e=r&&r instanceof Ai?r:null}return 1}(t)?t.error(e):console.warn(e)}},Ri.prototype.forEach=function(r,e){var s=this;return new(e=Mi(e))(function(e,t){var i=s.subscribe(function(e){try{r(e)}catch(e){t(e),i&&i.unsubscribe()}},t,e)})},Ri.prototype.Sv=function(e){var t=this.source;return t&&t.subscribe(e)},Ri.prototype[xi]=function(){return this},Ri.prototype.pipe=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return 0===e.length?this:(0===(t=e).length?Ei:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},Ri.prototype.toPromise=function(e){var r=this;return new(e=Mi(e))(function(e,t){var i;r.subscribe(function(e){return i=e},function(e){return t(e)},function(){return e(i)})})},Ri.create=function(e){return new Ri(e)},Ri);function Ri(e){this.kv=!1,e&&(this.Sv=e)}function Mi(e){if(!(e=e||(ui.Promise||Promise)))throw new Error("no Promise impl found");return e}var Bi,ji,Di,_i,Fi,Ni=(Ji.prototype=Object.create(Error.prototype),Ji),Ui=(di(zi,_i=bi),zi.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},zi),Vi=(di($i,Di=Ai),$i),qi=(di(Gi,ji=Li),Gi.prototype[ki]=function(){return new Vi(this)},Gi.prototype.lift=function(e){var t=new Hi(this,this);return t.operator=e,t},Gi.prototype.next=function(e){if(this.closed)throw new Ni;if(!this.isStopped)for(var t=this.observers,i=t.length,r=t.slice(),s=0;s<i;s++)r[s].next(e)},Gi.prototype.error=function(e){if(this.closed)throw new Ni;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,r=t.slice(),s=0;s<i;s++)r[s].error(e);this.observers.length=0},Gi.prototype.complete=function(){if(this.closed)throw new Ni;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),r=0;r<t;r++)i[r].complete();this.observers.length=0},Gi.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Gi.prototype.Ov=function(e){if(this.closed)throw new Ni;return ji.prototype.Ov.call(this,e)},Gi.prototype.Sv=function(e){if(this.closed)throw new Ni;return this.hasError?(e.error(this.thrownError),bi.EMPTY):this.isStopped?(e.complete(),bi.EMPTY):(this.observers.push(e),new Ui(this,e))},Gi.prototype.asObservable=function(){var e=new Li;return e.source=this,e},Gi.create=function(e,t){return new Hi(e,t)},Gi),Hi=(di(Wi,Bi=qi),Wi.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},Wi.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},Wi.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},Wi.prototype.Sv=function(e){return this.source?this.source.subscribe(e):bi.EMPTY},Wi);function Wi(e,t){var i=Bi.call(this)||this;return i.destination=e,i.source=t,i}function Gi(){var e=ji.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function $i(e){var t=Di.call(this,e)||this;return t.destination=e,t}function zi(e,t){var i=_i.call(this)||this;return i.subject=e,i.subscriber=t,i.closed=!1,i}function Ji(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}class Qi{constructor(){this._v=new qi,this.jv=new qi,this.Av=new qi,this.Iv=new qi,this.Tv=new qi,this.Cv=new qi,this.callingLineItems=[],this.bids=[],this.bidsLoading=[],this.bidsReady=[],this.bidStarted=null}get onBid(){return this._v.asObservable()}get onBidConsumed(){return this.jv.asObservable()}get onBidLoadingConsumed(){return this.Av.asObservable()}get onBidReady(){return this.Iv.asObservable()}get onBidStarted(){return this.Tv.asObservable()}get onBidReadyConsumed(){return this.Cv.asObservable()}addBid(e){this.bids.push(e),this._v.next(e)}moveBidToLoading(e){this.bidsLoading.push(e),this.consumeBid(e)}moveBidToReady(e){this.bidsReady.push(e),this.consumeBidLoading(e),this.Iv.next(e)}moveBidToStarted(e){this.bidStarted=e,this.consumeBidReady(e),this.Tv.next(e)}consumeBid(e){Object(p.k)(this.bids,e),this.jv.next(e)}consumeBidLoading(e){Object(p.k)(this.bidsLoading,e),this.Av.next(e)}consumeBidReady(e){Object(p.k)(this.bidsReady,e)}consumeBidStarted(e){this.bidStarted=null,this.Cv.next(e)}getAllBids(){var e=this.bidStarted?[this.bidStarted]:[];return[...this.bids,...this.bidsReady,...e]}}class Yi{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class Xi{constructor(e){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new Yi,e.inLine?this.Pv(e.inLine):this.Mv(e.wrapper)}Pv(e){this.Ev(e.errors),this.Lv(e.impressions),this.Rv(e.creatives)}Mv(e){this.Ev(e.errors),this.Lv(e.impressions),this.Rv(e.creatives)}Bv(e){this.Dv(e.trackingEvents),this.Fv(e.videoClicks)}Fv(e){e&&(this.Uv(e.clickTrackings),this.$v(e.customClicks))}Uv(e){this.clickTrackings.push(...e)}$v(e){this.customClicks.push(...e)}Dv(e){e.forEach(t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(e){Object(g.a)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO})}})}Rv(e){e.forEach(e=>{e.linear&&this.Bv(e.linear)})}Ev(e){this.errorUrls.push(...e)}Lv(e){this.impressions.push(...e)}}const Ki={[f.ProtoTrackerTriggerType.Impression]:"adImpression",[f.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[f.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[f.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[f.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[f.ProtoTrackerTriggerType.VideoClick]:"adClick",[f.ProtoTrackerTriggerType.Pause]:"adPause",[f.ProtoTrackerTriggerType.Resume]:"adResume",[f.ProtoTrackerTriggerType.Mute]:"adMute",[f.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class Zi{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(e,i,r,t){if(Array.isArray(e)){const{width:s,height:n}=t.adContainerState.get(r.adType),o=t.adBreakState["adBreakType"],{mediaDescription:a,mediaDuration:l,mediaId:d,mediaUrl:c,mediaTitle:h}=t.media;e.forEach(e=>{if(e.url)try{var t=i.replace(e.url,r.vendorId,{adMacros:{adWidth:s,adHeight:n,adPostion:o},mediaMacros:{mediaDescription:a,mediaDuration:l,mediaId:d,mediaUrl:c,mediaTitle:h}});switch(e.type){case f.ProtoTrackerType.Image:Object(Y.m)([t],window);break;case f.ProtoTrackerType.Javascript:Object(S.A)({src:t},window.document.head,window)}}catch(e){}})}}}function er(e,t){e.forEach(e=>function(e,t){var i;i=e.trigger,t[Ki[i]].push({type:e.type,url:e.url})}(e,t))}function tr(e){return{type:f.ProtoTrackerType.Image,url:e}}function ir(e){return e.map(e=>tr(e))}(Te=Fi=Fi||{})[Te.HandlingSdkUrl=0]="HandlingSdkUrl",Te[Te.NetworkRequestUrl=1]="NetworkRequestUrl",Te[Te.XmlInvalidString=2]="XmlInvalidString",Te[Te.XmlParseGeneral=3]="XmlParseGeneral",Te[Te.XmlInvalidTree=4]="XmlInvalidTree",Te[Te.XmlInvalidAd=5]="XmlInvalidAd",Te[Te.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",Te[Te.HTMLUnknownMimeType=7]="HTMLUnknownMimeType",Te[Te.ImaAdsManagerInit=8]="ImaAdsManagerInit",Te[Te.ImaVastEmptyResponse=9]="ImaVastEmptyResponse",Te[Te.ImaRequestException=10]="ImaRequestException",Te[Te.ImaTimeout=11]="ImaTimeout",Te[Te.ImaInvalidResponse=12]="ImaInvalidResponse";const rr={[Fi.HandlingSdkUrl]:f.ConnatixNoBidReasonEnum.CsRequestException,[Fi.NetworkRequestUrl]:f.ConnatixNoBidReasonEnum.CsRequestException,[Fi.XmlInvalidString]:f.ConnatixNoBidReasonEnum.CsEmptyResponse,[Fi.XmlParseGeneral]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Fi.XmlInvalidTree]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Fi.XmlInvalidAd]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Fi.XmlAdaptorWrapperLimit]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Fi.HTMLUnknownMimeType]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Fi.ImaAdsManagerInit]:f.ConnatixNoBidReasonEnum.CsRequestException,[Fi.ImaVastEmptyResponse]:f.ConnatixNoBidReasonEnum.CsInvalidResponse,[Fi.ImaRequestException]:f.ConnatixNoBidReasonEnum.CsRequestException,[Fi.ImaTimeout]:f.ConnatixNoBidReasonEnum.Timeout,[Fi.ImaInvalidResponse]:f.ConnatixNoBidReasonEnum.CsInvalidResponse};var sr,nr,or,ar,lr=i(11);(Te=sr=sr||{}).VOLUME_DETECTED="volume_detected",Te.MALWARE_DETECTED="malware_detected",Te.BADURI_DETECTED="baduri_detected",(Te=nr=nr||{})[Te.None=0]="None",Te[Te.Mute=1]="Mute",Te[Te.ScrollHijack=2]="ScrollHijack",Te[Te.MemoryLeak=4]="MemoryLeak",Te[Te.Malware=8]="Malware",Te[Te.All=15]="All";class dr{constructor(){this.Vv=new qi}get onVpaidEvent(){return this.Vv.asObservable()}handshakeVersion(e=0){return"2.0"}}function cr(e=[]){e.forEach(e=>e.unsubscribe())}(Te=or=or||{})[Te.Win=0]="Win",Te[Te.AdLoaded=1]="AdLoaded",Te[Te.AdStarted=2]="AdStarted",Te[Te.AdImpression=3]="AdImpression";class hr{constructor(e){this.Nv=e,this.Hv=new Map,Object(k.a)(this.Nv.settings.bidLifecycle)||(this.Nv.settings.bidLifecycle={})}onTrackingLifecycleEvent(e){switch(this.Hv.set(e,Date.now()),e){case or.AdLoaded:this.qv();break;case or.AdImpression:this.zv()}}qv(){this.Nv.settings.bidLifecycle.winToAdLoadedTime=this.Wv}zv(){this.Nv.settings.bidLifecycle.startAdToImpressionTime=this.Gv}get Gv(){return this.Hv.get(or.AdImpression)&&this.Hv.get(or.AdStarted)?this.Hv.get(or.AdImpression)-this.Hv.get(or.AdStarted):0}get Wv(){return this.Hv.get(or.AdLoaded)&&this.Hv.get(or.Win)?this.Hv.get(or.AdLoaded)-this.Hv.get(or.Win):0}}(Te=ar=ar||{}).IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",Te.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",Te.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",Te.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",Te.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT";const ur="cnx-ad-bid-slot-selected",pr="Connatix Ad";class gr extends dr{constructor(e){super(),this.settings=e,this.Jv=null,this.Qv=null,this.Xv=null,this.Yv=null,this.Kv=void 0,this.Zv=!1,this.Vo=!1,this.tm=!1,this.im=!1,this.em=null,this.dv=[],this.nm=new qi,this.rm=()=>{this.am({type:v.b.AdError,payload:{errorMessage:lr.c.Timeout}}),this.hm()},this.om=()=>{this.cm(),this.lm(ar.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.Jv,this.um)},this.um=e=>{const t=this.lm(ar.VIEWABLE_IMPRESSION_TIMEOUT);e?t.timeoutHandle.timeoutId||t.setTimeout():t.clearTimeout()},this.dm=()=>{this.am({type:v.b.AdSkipped}),this.hm()},this.fm=()=>{this.am({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}}),this.hm()},this.pm=()=>{this.am({type:v.b.AdError,payload:{errorMessage:lr.c.TimeoutLoaded}}),this.hm()},this.lm=e=>{const t=this.bm[e];return{timeoutHandle:t,setTimeout:()=>{t.timeoutId=setTimeout(()=>{t.callback()},t.timeout)},clearTimeout:()=>{null!==t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=null)}}},this.creativeId=this.settings.externalCreativeId,this.vm=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.mm=`cnx-ad-slot-${this.settings.id}`;var e=this.settings.adManagerLineItem.protoLineItem["adType"];this.bm={[ar.IMPRESSION_TIMEOUT]:{callback:this.rm,timeout:25e3,timeoutId:null},[ar.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.om,timeout:e===E.ProtoAdType.Video?D.b:D.a,timeoutId:null},[ar.SKIP_AD_TIMEOUT]:{callback:this.dm,timeout:500,timeoutId:null},[ar.STOP_AD_TIMEOUT]:{callback:this.fm,timeout:500,timeoutId:null},[ar.AD_LOADED_TIMEOUT]:{callback:this.pm,timeout:25e3,timeoutId:null}}}skipAd(){this.lm(ar.SKIP_AD_TIMEOUT).setTimeout()}stopAd(e){this.lm(ar.STOP_AD_TIMEOUT).setTimeout()}startAd(){this.im&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.mm}`,level:f.ProtoLoggingLevelEnum.FATAL}),this.im=!0,this.lm(ar.IMPRESSION_TIMEOUT).setTimeout()}initAd(e,t,i,r,s,n,o){this.tm&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.mm}`,level:f.ProtoLoggingLevelEnum.FATAL}),this.tm=!0,this.lm(ar.AD_LOADED_TIMEOUT).setTimeout(),this.gm(o),this.ym=new hr(this),this.ym.onTrackingLifecycleEvent(or.Win)}setAdVolume(e){this.Qv.volume=e,Object(S.V)(this.Qv,e),e<=0?this.settings.adEnforcer.start(nr.Mute):this.settings.adEnforcer.stop(nr.Mute)}get impressionStarted(){return this.Zv}get creativeId(){return this.Kv}set creativeId(e){Object(k.h)(this.creativeId)||(this.Kv=e)}get onAdViewableImpression(){return this.nm.asObservable()}wm(e){let t;Object(k.d)(e.payload.skipOffset)&&(t=e.payload.skipOffset);e={type:v.b.AdLoaded,payload:{adLoadedData:{skipOffset:t},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e}xm(e){return{type:v.b.AdImpression,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:pr},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}km(e){return{type:v.b.AdVideoStart,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:pr},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}am(e){if(this.Om(e))switch(e.type){case v.b.AdLoaded:this.ym.onTrackingLifecycleEvent(or.AdLoaded),this.lm(ar.AD_LOADED_TIMEOUT).clearTimeout(),this.Vv.next(this.wm(e));break;case v.b.AdImpression:this.ym.onTrackingLifecycleEvent(or.AdImpression),this.lm(ar.IMPRESSION_TIMEOUT).clearTimeout(),this._m(),Object(S.a)(this.Xv,ur),this.Vv.next(this.xm(e)),this.Zv=!0;break;case v.b.AdVideoStart:this.ym.onTrackingLifecycleEvent(or.AdStarted),this.Vv.next(this.km(e));break;case v.b.AdStopped:case v.b.AdSkipped:case v.b.AdError:this.Vo&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:f.ProtoLoggingLevelEnum.WARNING}),this.Ac(),this.Vv.next(e);break;default:this.Vv.next(e)}else this.am({type:v.b.AdError,payload:{errorMessage:lr.c.InvalidVpaidEvent}})}gm(e){this.Yv=this.jm(),this.Xv=this.Yv.slotsContainer,Object(S.a)(this.Xv,this.vm),this.Jv=this.Yv.adSlot,this.Jv.id=this.mm,this.Xv.id=this.settings.bidSlotId,this.Qv=this.Yv.videoSlot,this.Qv.volume=e,Object(S.V)(this.Qv,e),this.settings.adEnforcer.registerContainer(this.Xv,this.mm),this.dv.push(this.settings.adEnforcer.onEnforcerEvent.subscribe(e=>{this.Am(e)})),this.settings.adEnforcer.start(nr.All)}jm(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}Ac(){this.Vo=!0,Object(S.L)(this.Xv,ur),Object(S.L)(this.Xv,this.vm),this.Jv.removeAttribute("id"),this.Xv.removeAttribute("id"),cr(this.dv),this.hm(),this.settings.adEnforcer.deregisterContainer(this.Xv),this.settings.viewabilityService.off(this.Jv,this.um),null!==this.em&&clearTimeout(this.em),this.Im()}Im(){this.em=setTimeout(()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.Yv)},500)}cm(){var{advertiserLineItemId:e,publisherLineItemId:t}=this.settings.adManagerLineItem.protoLineItem;this.nm.next({advertiserLineItemId:e,publisherLineItemId:t})}_m(){var e=D.g,t=this.Jv;this.settings.viewabilityService.on(t,this.um,{threshold:e}),this.um(this.settings.viewabilityService.check({threshold:e,element:t}))}hm(){Object.keys(this.bm).forEach(e=>{this.lm(e).clearTimeout()})}Om(e){return!(!this.Zv&&(e.type===v.b.AdStopped||e.type===v.b.AdSkipped))}Am(t){if(t.detectedContainer===this.Xv){let e;switch(t.type){case sr.BADURI_DETECTED:e="AdManager_enforcer_BadUri";break;case sr.MALWARE_DETECTED:e="AdManager_enforcer_malware",this.am({type:v.b.AdError,payload:{errorMessage:lr.c.EnforcementMalware}});break;case sr.VOLUME_DETECTED:e="AdManager_enforcer_soundBlock",this.am({type:v.b.AdError,payload:{errorMessage:lr.c.EnforcementVolume}})}Object(g.a)({message:e,exception:t.message,level:f.ProtoLoggingLevelEnum.WARNING})}}Tm(e,t,i){var r=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=this.creativeId;Object(g.a)({message:`AdManager_${e}_${t}`,exception:`advertiserLineItemId:${r}_creativeId:${s}_errorMessage:${null===(s=i)||void 0===s?void 0:s.message}`,callStack:null===i||void 0===i?void 0:i.stack,throttle:5,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0})}}var mr=i(44);class fr extends dr{constructor(e,t,i,r,s,n,o){super(),this.Cm=e,this.ir=t,this.Pm=i,this.Mm=r,this.Em=s,this.Lm=n,this.Rm=o,this.Bm=new qi,this.Dm=t=>{if(this.Fm(t)){let e="";try{e=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.ImaError+"_"+e}})}},this.Um=e=>{var t=this.Cm.AdEvent.Type;switch(e.type){case t.CLICK:this.Vv.next({type:v.b.AdClickThru,payload:{}});break;case t.LOADED:this.Hr(e);break;case t.IMPRESSION:var i={adsManager:this.Em,adContainer:this.$m,viewMode:this.Vm(this.Nm),adTag:this.Mm};this.Vv.next({type:v.b.AdVideoStart}),this.Vv.next({type:v.b.AdImpression,payload:{imaMetadata:i}});break;case t.STARTED:this.Vv.next({type:v.b.AdStarted});break;case t.FIRST_QUARTILE:this.Vv.next({type:v.b.AdVideoFirstQuartile});break;case t.MIDPOINT:this.Vv.next({type:v.b.AdVideoMidpoint});break;case t.THIRD_QUARTILE:this.Vv.next({type:v.b.AdVideoThirdQuartile});break;case t.COMPLETE:this.Vv.next({type:v.b.AdVideoComplete}),this.Vv.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}});break;case t.ALL_ADS_COMPLETED:break;case t.DURATION_CHANGE:this.Vv.next({type:v.b.AdDurationChange});break;case t.PAUSED:this.Vv.next({type:v.b.AdPaused});break;case t.RESUMED:this.Vv.next({type:v.b.AdPlaying});break;case t.LINEAR_CHANGED:this.Vv.next({type:v.b.AdLinearChange});break;case t.SKIPPABLE_STATE_CHANGED:this.Vv.next({type:v.b.AdSkippableStateChange});break;case t.SKIPPED:this.Vv.next({type:v.b.AdSkipped});break;case t.VOLUME_CHANGED:this.Vv.next({type:v.b.AdVolumeChange});break;case t.USER_CLOSE:this.Vv.next({type:v.b.AdUserClose});break;case t.LOG:this.Vv.next({type:v.b.AdLog})}},this.Hm()}get onCreativeReceived(){return this.Bm.asObservable()}initAd(e,t,i,r,s,n){this.$m=n.slot,this.qm=n.videoSlot,this.Nm=i||v.a.Normal;try{this.Em.setVolume(0),this.Em.init(e,t,this.Vm(this.Nm))}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.ImaManagerInit}})}}startAd(){try{this.Em.start()}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.WrapperStartAdError+`_${e.message}`}})}}stopAd(e){this.Em.stop(),this.Vv.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(e,t,i){this.Em.resize(e,t,this.Vm(i))}pauseAd(){this.Em.pause()}resumeAd(){this.Em.resume(),this.ir===K.b.Ios&&Object(S.C)(this.qm)}expandAd(){this.Em.expand()}collapseAd(){this.Em.collapse()}skipAd(){this.Em.skip()}getAdRemainingTime(){return this.Em.getRemainingTime()||0}getAdDuration(){return this.zm?this.zm.getDuration():0}getAdVolume(){return this.Em.getVolume()}getAdMediaWidth(){return this.zm?this.zm.getVastMediaWidth():0}getAdMediaHeight(){return this.zm?this.zm.getVastMediaHeight():0}setAdVolume(e){this.Em.setVolume(e)}getMediaFile(){return this.zm?this.zm.getMediaUrl():void 0}Hm(){this.Pm.addEventListener(this.Cm.AdErrorEvent.Type.AD_ERROR,this.Dm),this.Em.addEventListener(this.Cm.AdErrorEvent.Type.AD_ERROR,this.Dm),Object.keys(this.Cm.AdEvent.Type).forEach(e=>{this.Em.addEventListener(this.Cm.AdEvent.Type[e],this.Um,!1)})}Wm(){this.Pm.removeEventListener(this.Cm.AdErrorEvent.Type.AD_ERROR,this.Dm),this.Em.removeEventListener(this.Cm.AdErrorEvent.Type.AD_ERROR,this.Dm),Object.keys(this.Cm.AdEvent.Type).forEach(e=>{this.Em.removeEventListener(this.Cm.AdEvent.Type[e],this.Um,!1)})}Vm(e){return e===v.a.Fullscreen?this.Cm.ViewMode.FULLSCREEN:this.Cm.ViewMode.NORMAL}Fm(e){e=e.getUserRequestContext();return!e||e.id===this.Lm.id}Hr(e){this.zm=e.getAd(),this.Bm.next(this.zm.getCreativeId());let t=-1,i="";try{t=this.zm.getSkipTimeOffset();var r=e.getAdData().clickThroughUrl;i=Object(k.h)(r)?r:void 0}catch(e){}Object(mr.b)(this.Rm,i).then(e=>{e?this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.DomainBlocked}}):this.Vv.next({type:v.b.AdLoaded,payload:{skipOffset:t}})})}destroy(){try{this.Wm(),setTimeout(()=>{this.Em.destroy()})}catch(e){}}}const yr={ImaObjectNotFound:lr.c.ImaObjectNotFound,ImaScriptFailure:lr.c.ImaScriptFailure},br="//imasdk.googleapis.com/js/sdkloader/ima3.js";class vr{static preloadImaSdk(e){Object(S.I)(br,e)}static fetchImaSdk(s,n){return new Promise((t,i)=>{var e=vr.Gm(s);if(e)t(e);else{const r=n&&1===Object(Y.l)([95,5]);Object(S.A)({src:br},s.document.head,s,()=>{var e=vr.Gm(s);e?t(e):(r&&Object(g.a)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:f.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i(yr.ImaObjectNotFound))},()=>{i(yr.ImaScriptFailure)},r,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}})}static Gm(e){return e.google&&e.google.ima}}class Pr extends gr{constructor(e){super(e),this.settings=e,this.Yv=null,this.adMediaType="ima",this.adSourceType=f.ProtoAdsourceTypeEnum.Ima,this.Jm=[],this.Yv=this.settings.imaAdSlotContainer,this.Qm=new fr(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(e,t,i,r,s,n,o){try{super.initAd(e,t,i,r,s,n,o),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Xm(),this.Jm.push(this.Qm.onVpaidEvent.subscribe(e=>{this.am(e)}),this.Qm.onCreativeReceived.subscribe(e=>{this.creativeId=e})),this.Qm.initAd(e,t,i,r,s,{slot:this.Jv,videoSlot:this.Qv})}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorInitAdError+`_${e.message}`}})}}startAd(){try{super.startAd(),this.Qm.startAd()}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){try{super.stopAd(e),this.Qm.stopAd(e)}catch(e){this.Tm("ImaBidAdaptor","stopAd",e)}}resizeAd(e,t,i){try{this.Qm.resizeAd(e,t,i)}catch(e){this.Tm("ImaBidAdaptor","resizeAd",e)}}pauseAd(){try{this.Qm.pauseAd()}catch(e){this.Tm("ImaBidAdaptor","pauseAd",e)}}resumeAd(){try{this.Qm.resumeAd()}catch(e){this.Tm("ImaBidAdaptor","resumeAd",e)}}expandAd(){try{this.Qm.expandAd()}catch(e){this.Tm("ImaBidAdaptor","expandAd",e)}}collapseAd(){try{this.Qm.collapseAd()}catch(e){this.Tm("ImaBidAdaptor","collapseAd",e)}}skipAd(){try{super.skipAd(),this.Qm.skipAd()}catch(e){this.Tm("ImaBidAdaptor","skipAd",e)}}getAdRemainingTime(){try{return this.Qm.getAdRemainingTime()}catch(e){return this.Tm("ImaBidAdaptor","getAdRemainingTime",e),0}}getAdDuration(){try{return this.Qm&&this.Qm.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(e){return this.Tm("ImaBidAdaptor","getAdDuration",e),0}}getAdVolume(){try{return this.Qm.getAdVolume()}catch(e){return this.Tm("ImaBidAdaptor","getAdVolume",e),0}}getAdMediaSize(){return{width:this.Qm.getAdMediaWidth(),height:this.Qm.getAdMediaHeight()}}setAdVolume(e){try{super.setAdVolume(e),this.Qm.setAdVolume(e)}catch(e){this.Tm("ImaBidAdaptor","setAdVolume",e)}}get adVideoUrl(){return this.Qm.getMediaFile()}get declaredDurationInSeconds(){return this.Qm.getAdDuration()}xm(e){const t=super.xm(e);return t.payload.adSourceData.imaMetadata=e.payload.imaMetadata,t}jm(){return this.Yv}Im(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.Yv)}Xm(){vr.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}Ac(){try{super.Ac(),cr(this.Jm),this.Qm.destroy()}catch(e){this.Tm("ImaBidAdaptor","_destroy",e)}}}class Sr{constructor(e,t,i,r,s,n,o){this.Cm=e,this.Pm=t,this.gl=i,this.yl=r,this.Mm=s,this.qm=n,this.ze=o,this.Ym=new qi,this.Km=new qi,this.Zm={id:Object(Y.c)()},this.Em=null,this.Dm=e=>{if(this.Fm(e))switch(e.getError().getErrorCode()){case this.Cm.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.tg(Fi.ImaVastEmptyResponse);break;case this.Cm.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.Cm.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.tg(Fi.ImaInvalidResponse);break;default:this.tg(Fi.ImaRequestException)}},this.ig=e=>{this.Fm(e)&&(this.Em=e.getAdsManager(this.qm,{loadVideoTimeout:25*L.f}),this.eg(),this.Ym.next({imaAdsManager:this.Em,requestAdsContext:this.Zm}))},this.Pm.addEventListener(this.Cm.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.ig),this.Pm.addEventListener(this.Cm.AdErrorEvent.Type.AD_ERROR,this.Dm)}get onSuccess(){return this.Ym.asObservable()}get onError(){return this.Km.asObservable()}loadAd(){const e=new this.Cm.AdsRequest;e.adTagUrl=this.Mm,e.linearAdSlotWidth=e.nonLinearAdSlotWidth=this.gl,e.linearAdSlotHeight=e.nonLinearAdSlotHeight=this.yl,e.pageUrl=this.ze,this.Pm.requestAds(e,this.Zm)}tg(e){this.Km.next(e)}eg(){this.Pm.removeEventListener(this.Cm.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.ig),this.Pm.removeEventListener(this.Cm.AdErrorEvent.Type.AD_ERROR,this.Dm)}Fm(e){e=e.getUserRequestContext();return!e||e.id===this.Zm.id}destroy(){var e;try{this.eg(),null===(e=this.Em)||void 0===e||e.destroy()}catch(e){}}}class Ir{constructor(e){this.settings=e,this.sg=!1,this.ng=[],this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime(),this.rg=this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer);var e=new Promise((e,t)=>{setTimeout(()=>{t(Fi.ImaTimeout)},25e3)}),t=this.ag(this.rg);return Promise.race([t,e]).then(e=>(this.metrics.fetchEnd=(new Date).getTime(),this.sg=!0,this.hg&&cr(this.ng),e)).catch(e=>{throw this.metrics.fetchEnd=(new Date).getTime(),this.sg=!0,this.hg&&(cr(this.ng),this.hg.destroy(),this.settings.adSlotContainerRecycler.recycleAdSlot(this.rg)),e})}ag(e){return e.fetchImaDependencies().then(e=>(this.og=e,this.cg(e))).then(e=>this.ug(e)).catch(e=>{throw Object(k.a)(e)?e:Fi.ImaRequestException})}cg(r){return this.sg?Promise.reject():new Promise((t,i)=>{var e=this.dg();this.hg=new Sr(r.imaSdk,r.imaAdsLoader,e.width,e.height,this.settings.url,this.rg.videoSlot,this.settings.pageUrl),this.ng.push(this.hg.onSuccess.subscribe(e=>{t(e)}),this.hg.onError.subscribe(e=>{i(e)})),this.hg.loadAd()})}dg(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}ug(e){return new Pr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,imaSdk:this.og.imaSdk,imaAdsLoader:this.og.imaAdsLoader,imaAdsManager:e.imaAdsManager,requestAdsContext:e.requestAdsContext,imaAdSlotContainer:this.rg,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl})}}function Tr(t,i){t.sort((e,t)=>e.width===t.width?e.bitrate-t.bitrate:e.width-t.width);for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const kr=()=>`cnx_bid_slot_${Object(Y.c)()}`;var Ar=i(15);const Or=Ar&&Ar.isSupported(),Cr={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class wr{constructor(e,t,i){this.fg=e,this.pg=t,this.bg=i,this.vg=(e,t)=>{if(t.fatal)switch(t.type){case Ar.ErrorTypes.NETWORK_ERROR:if(t.details===Ar.ErrorDetails.MANIFEST_PARSING_ERROR||t.details===Ar.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mg();this.gg.startLoad();break;case Ar.ErrorTypes.MEDIA_ERROR:this.gg.recoverMediaError();break;default:this.mg()}},this.yg=()=>{this.gg.off(Ar.Events.MEDIA_ATTACHED,this.yg),this.gg.loadSource(this.fg),this.gg.once(Ar.Events.MANIFEST_PARSED,this.wg)},this.wg=()=>{this.gg.off(Ar.Events.MANIFEST_PARSED,this.wg),this.xg()}}start(e,t){this.xg=e,this.mg=t,Or?(this.gg=this.bg.initHls(Cr),this.kg()):this.mg()}destroy(){this.gg&&(this.gg.destroy(),this.gg=null)}kg(){this.gg.on(Ar.Events.ERROR,this.vg),this.gg.attachMedia(this.pg),this.gg.once(Ar.Events.MEDIA_ATTACHED,this.yg)}}var xr,Er,Lr,Rr,Mr=i(51);class Br extends dr{constructor(e,t,i,r,s,n,o,a,l=!1){super(),this.Ss=e,this.Sg=t,this.qm=i,this.ir=r,this.Og=s,this._g=n,this.jg=o,this.Ag=a,this.Ig=l,this.Tg=!1,this.pageFocus=new Mr.a(this.Ss),this.Cg=Object(d.a)(W),this.Pg=!1,this.Mg=!1,this.Eg=[{event:v.b.AdVideoStart,position:0},{event:v.b.AdVideoFirstQuartile,position:25},{event:v.b.AdVideoMidpoint,position:50},{event:v.b.AdVideoThirdQuartile,position:75},{event:v.b.AdVideoComplete,position:100}],this.Rg=this.Eg[0],this.Bg=e=>{try{switch(e.type){case W.Pause:this.Pg=!1;break;case W.Play:if(!this.Pg&&this.Ig)return void this.qm.pause();break;case W.Canplay:case W.Durationchange:this.Dg();break;case W.Timeupdate:this.Fg();break;case W.Error:this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.VastVideoTagEventError}});break;case"click":this.Vv.next({type:v.b.AdClickThru,payload:{}})}}catch(e){Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,callStack:e.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:e.message,throttle:10,sendMaxLog:!1})}}}initAd(e,t,i,r,s,n){try{this.qm=n.videoSlot,this.width=e,this.height=t,this.Ug(this.Og,this.qm.parentElement),this.resizeAd(e,t,i),this.addVideoEvents(this.qm),this.Ag&&Or?this.$g():(this.qm.setAttribute("src",this.Sg),this.qm.setAttribute("preload","metadata"),this.qm.load()),this.pageFocus.isDocumentVisible()||this.Dg()}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.WrapperInitAdError+`_${e.message}`}})}}startAd(){try{Object(S.a)(this.qm,"cnx-ad-video-slot"),this.Pg=!0,this.pageFocus.isDocumentVisible()?this.qm.play().then(()=>{this.Vv.next({type:v.b.AdStarted}),this.Vv.next({type:v.b.AdImpression,payload:{}})}).catch(e=>{this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.VastPlayPromiseReject}})}):(this.Vv.next({type:v.b.AdStarted}),this.Vv.next({type:v.b.AdImpression,payload:{}}),this.qm.play())}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.WrapperStartAdError+`_${e.message}`}})}}stopAd(e){this.Ig&&this.qm.pause(),"videoComplete"===e&&this._g?this.Vv.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!1}}):this.Vv.next({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(e,t,i){Object(S.Q)(this.qm,{width:`${e}px`,height:`${t}px`}),this.Vv.next({type:v.b.AdSizeChange})}pauseAd(){this.Pg=!1,this.jg&&void 0===this.Rg&&(this.Rg=this.Eg[0]),this.qm.pause(),this.Vv.next({type:v.b.AdPaused})}resumeAd(){this._g&&void 0===this.Rg&&(this.Rg=this.Eg[0]),this.Pg=!0,this.qm.play(),this.ir===K.b.Ios&&Object(S.C)(this.qm),this.Vv.next({type:v.b.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.Vv.next({type:v.b.AdSkipped})}getAdRemainingTime(){return this.qm.duration-this.qm.currentTime}getAdDuration(){return this.qm.duration||0}getAdVolume(){return this.qm.volume}setAdVolume(e){this.qm.volume=e}getAdMediaWidth(){return this.qm.videoWidth}getAdMediaHeight(){return this.qm.videoHeight}destroy(){if(!this.jg&&!this._g)try{Object(S.L)(this.qm,"cnx-ad-video-slot"),this.Vg(this.qm),this.qm.removeAttribute("src"),this.Ng&&(this.Ng.destroy(),this.Ng=null)}catch(e){Object(g.a)({level:f.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_destroyAd",exception:e.message,callStack:e.stack})}}$g(){this.Ng=new wr(this.Sg,this.qm,this.Ss),this.Ng.start(()=>{this.Dg()},()=>{this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.CnxMediaSrcNotSupported}})})}Ug(e,t){this.Hg=this.Ss.createElement("a"),e&&(this.Hg.href=e,this.Hg.target="_blank"),Object(S.a)(this.Hg,"cnx-ad-slot"),t.appendChild(this.Hg),this.Hg.addEventListener("click",this.Bg)}addVideoEvents(t){this.Cg.forEach(e=>{t.addEventListener(e,this.Bg)}),this.Hg&&this.Hg.addEventListener("click",this.Bg)}Vg(t){this.Cg.forEach(e=>{t.removeEventListener(e,this.Bg)}),this.Hg&&this.Hg.removeEventListener("click",this.Bg)}Dg(){this.Tg||(this.Tg=!0,this.Vv.next({type:v.b.AdLoaded,payload:{}}))}Fg(){this.Vv.next({type:v.b.AdRemainingTimeChange});const e=Object(Q.g)(0,this.qm.duration,0,100,this.qm.currentTime);if(this.Rg&&e>=this.Rg.position){this.Mg||this.Vv.next({type:this.Rg.event});const e=this.Rg;this.Rg=this.Eg[this.Eg.indexOf(this.Rg)+1],e.event===v.b.AdVideoComplete&&(this.stopAd("videoComplete"),this.Mg=!0)}}}(xr=xr||{}).errorIframe="Error creating iframe";class jr{constructor(e,t,i){this.Ss=e,this.co=t,this.Oa=i}qg(t,i,r){let s=!1;return e=>{if(e.contentWindow&&!s)return s=!0,this.zg(e,this.Wg(t,i),r)?void 0:(e&&e.parentNode&&e.parentNode.removeChild(e),null)}}Gg(e,t,i,r,s){return this.Jg(e,this.qg(t,i,r),s)}Jg(e,t,i){const r=this.Ss.createElement("iframe",i);return r.allow="autoplay",r.src="javascript:false",r.srcdoc="",r.width="100%",r.height="100%",r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.margin="0px",r.style.padding="0px",r.style.border="0px",r.style.width="100%",r.style.height="100%",r.setAttribute("SCROLLING","NO"),r.onload=()=>{t(r)},e.appendChild(r),t(r),r}zg(e,t,i){try{const r=e.contentWindow&&e.contentWindow.document;r.open(),r.write(t),i(e)}catch(t){return this.Ss.isDetachedFromDOM(e)?Object(g.a)({message:"iframeLoader_(inDom_false)",exception:t.message,callStack:t.stack,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:1}):Object(g.a)({message:"iframeLoader_(inDom_true)",exception:t.message,level:f.ProtoLoggingLevelEnum.WARNING,logJsonState:!0,sendMaxLog:!1,throttle:1}),!1}return!0}Wg(i,r){return Object.keys(r).forEach(function(e){var t=r[e];i=i.replace(new RegExp(`{{${e}}}`,"g"),t)}),i}loadIframe(i){const r='<!DOCTYPE html><html lang="en"><head>'+(i.customHead||"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(i.customHtml||"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',o="cnx-iframe_"+Object(Y.c)();return new Promise((s,n)=>{this.Qg=this.Gg(i.container,r,{iframeID:o},i=>{null===i&&n(xr.errorIframe);const r=e=>{let t;try{t=JSON.parse(e.data)}catch(e){return}t.id===o&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",r),s({iframe:i})):n("The Iframe is no longer in the DOM"))};i.contentWindow.addEventListener("message",r)},this.Oa);var{advertiserLineItemId:e,heavyAdBlockTypeEnum:t}=i.customReportingLog;this.Xg=new c(this.Qg.contentWindow,this.co,{advertiserLineItemId:e,heavyAdBlockTypeEnum:t})})}get iframe(){return this.Qg}destroy(){this.Xg.destroy(),this.Qg=null}}class Dr{constructor(e,t,i,r,s){this.Yg=e,this.Ss=t,this.co=i,this.Kn=r,this.Kg=s,this.Zg={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Yg}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Kn}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Kn}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.ty=new jr(this.Ss,this.co)}iy(e){return this.ty.loadIframe({customHead:this.Zg.headTamplate,customHtml:this.Zg.bodyTamplate,container:e,customReportingLog:{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.Kg}})}loadAdUnitIframe(e){return new Promise((t,i)=>{this.iy(e).then(e=>{e.adContainer=e.iframe.contentWindow.document.querySelector(".ad-element"),t(e)}).catch(e=>{i(e)})})}destroyAdUnit(){try{const e=this.ty.iframe.contentWindow.clearAll;e&&e()}catch(e){Object(g.a)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null===e||void 0===e?void 0:e.message,callStack:null===e||void 0===e?void 0:e.stack,level:f.ProtoLoggingLevelEnum.WARNING,throttle:2,sendMaxLog:!0})}this.ty.destroy(),this.ty=null}}(Te=Er=Er||{})[Te.handshakeVersion=0]="handshakeVersion",Te[Te.initAd=1]="initAd",Te[Te.startAd=2]="startAd",Te[Te.stopAd=3]="stopAd",Te[Te.skipAd=4]="skipAd",Te[Te.resizeAd=5]="resizeAd",Te[Te.pauseAd=6]="pauseAd",Te[Te.resumeAd=7]="resumeAd",Te[Te.expandAd=8]="expandAd",Te[Te.collapseAd=9]="collapseAd",Te[Te.subscribe=10]="subscribe",Te[Te.unsubscribe=11]="unsubscribe";class _r extends dr{constructor(e,t,i,r,s,n,o){super(),this.Sg=e,this.Ss=t,this.co=i,this.ey=r,this.Kg=s,this.Kv=n,this.ir=o,this.sy=[],this.ny=new Set,this.ay=new Set,this.hy=(e,t,i)=>{this.oy(v.b.AdClickThru,{url:e,playerHandles:i})},this.oy=(e,t)=>{if(this.ay.add(e),!this.ny.has(e))return e!==v.b.AdImpression||this.ay.has(v.b.AdLoaded)?void this.ly(e,t):(Object(g.a)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.Kg}_creativeId:${this.Kv}_vpaidSrc:${this.Sg}`,callStack:JSON.stringify(Object(p.d)(this.ay)),throttle:1e3,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.ny.add(v.b.AdLoaded),void this.ly(v.b.AdLoaded,t))},this.ly=(e,t)=>{switch(e){case v.b.AdError:this.Vv.next({type:v.b.AdError,payload:{errorMessage:Object(k.g)(t)?t:JSON.stringify(t)}});break;case v.b.AdLoaded:this.Vv.next({type:v.b.AdLoaded,payload:{skipOffset:Object(k.f)(t)?t.skipOffset:void 0}});break;case v.b.AdImpression:this.Vv.next({type:v.b.AdImpression,payload:{}});break;case v.b.AdClickThru:this.Vv.next({type:v.b.AdClickThru,payload:Object(k.f)(t)?t:{}});break;default:this.Vv.next({type:v.b[e]})}}}initAd(e,t,i,r,s,n){try{this.gl=e,this.yl=t,this.Nm=i,this.uy=r,this.py=s,this.by=n,this.vy=new Dr(this.Sg,this.Ss,this.co,this.ey,this.Kg),this.my=this.vy.loadAdUnitIframe(n.slot).then(e=>{this.gy(e)}).catch(e=>{this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.VpaidOnLoad}})})}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.VpaidOnLoad}})}}startAd(){try{this.ay.has(v.b.AdImpression)&&!this.ny.has(v.b.AdImpression)&&(Object(g.a)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.Kg}_creativeId:${this.Kv}_vpaidSrc:${this.Sg}`,callStack:JSON.stringify(Object(p.d)(this.ay)),throttle:1e3,level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.ny.add(v.b.AdImpression),this.Vv.next({type:v.b.AdImpression,payload:{}})),this.yy.startAd()}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.WrapperStartAdError}})}}stopAd(e){var t;null===(t=this.my)||void 0===t||t.then(()=>{this.yy?this.yy.stopAd(e):Object(g.a)({message:"stopAd",exception:e,level:f.ProtoLoggingLevelEnum.WARNING})})}resizeAd(e,t,i){this.yy.resizeAd(e,t,i)}pauseAd(){this.yy.pauseAd()}resumeAd(){this.yy.resumeAd(),this.ir===K.b.Ios&&Object(S.C)(this.by.videoSlot)}expandAd(){this.yy.expandAd()}collapseAd(){this.yy.collapseAd()}skipAd(){this.yy.skipAd()}getAdRemainingTime(){return this.yy.getAdRemainingTime()}getAdDuration(){var e;return null===(e=this.yy)||void 0===e?void 0:e.getAdDuration()}getAdVolume(){return this.yy.getAdVolume()}setAdVolume(e){this.yy.setAdVolume(e)}destroy(){var e;this.wy(),this.sy.length=0,(this.yy=null)===(e=this.vy)||void 0===e||e.destroyAdUnit()}gy(e){const t=e.iframe.contentWindow.getVPAIDAd;if("function"==typeof t){const i=t();this.yy=i,this.$u(),this.xy(i)?i.initAd(this.gl,this.yl,this.Nm,this.uy,this.py,{slot:e.adContainer,videoSlot:this.by.videoSlot}):this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.VpaidInvalid}})}else this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.VpaidGetVpaidAdError}})}$u(){Object.keys(v.b).forEach(e=>{let t=this.oy.bind(this,v.b[e]);v.b[e]===v.b.AdClickThru&&(t=this.hy),this.sy.push({handler:t,event:e}),this.yy.subscribe(t,e)})}wy(){this.sy.forEach(e=>{this.yy.unsubscribe(e.handler,e.event)})}xy(t){return Object.keys(Object(p.f)(Er)).every(e=>Object(k.b)(t[Er[e]]))}}class Fr extends gr{constructor(e){super(e),this.settings=e,this.adSourceType=f.ProtoAdsourceTypeEnum.Unknown,this.ky=[],this.creativeId=e.vastResponse.creativeId}initAd(t,i,r,s,e,n,o){try{super.initAd(t,i,r,s,e,n,o),Object(mr.b)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.clickThrough).then(e=>{e?this.am({type:v.b.AdError,payload:{errorMessage:lr.c.DomainBlocked}}):(this.Sy=this.Oy(t,this.Qv),null!==this.Sy?(this.adMediaType=this.Sy.type,this.Sy.getMediaFileType()===lr.d.Video?(this._y=new Br(this.settings.globalDomUtilsService,this.Sy.src,this.Qv,this.settings.os,this.settings.vastResponse.clickThrough,this.settings.loopAdWhenFinished),this.adSourceType=f.ProtoAdsourceTypeEnum.VastMedia):(this._y=new _r(this.Sy.src,this.settings.globalDomUtilsService,this.settings.trackingService,this.mm,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=f.ProtoAdsourceTypeEnum.Vpaid),this.ky.push(this._y.onVpaidEvent.subscribe(e=>{var t;e.type===v.b.AdLoaded&&(e.payload.skipOffset=this.settings.vastResponse.skipoffset),e.type===v.b.AdClickThru&&(this.jy=e.payload.url,(t=e.payload.url||this.settings.vastResponse.clickThrough)&&e.payload.playerHandles&&this.settings.globalDomUtilsService.open(t,Ot.c.Blank)),this.am(e)})),e={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters},this._y.initAd(t,i,r,s,e,{slot:this.Jv,videoSlot:this.Qv})):this.am({type:v.b.AdError,payload:{errorMessage:lr.c.VastUnsupportedMedia}}))}).catch(e=>this.Ay(e))}catch(t){this.Ay(t)}}startAd(){try{super.startAd(),this._y.startAd()}catch(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){super.stopAd(e),this._y?this._y.stopAd(e):Object(g.a)({message:"stopAd",exception:e,level:f.ProtoLoggingLevelEnum.WARNING})}resizeAd(e,t,i){try{this._y.resizeAd(e,t,i)}catch(e){this.Tm("VastBidAdaptor","resizeAd",e)}}pauseAd(){try{this._y.pauseAd()}catch(e){this.Tm("VastBidAdaptor","pauseAd",e)}}resumeAd(){try{this._y.resumeAd()}catch(e){this.Tm("VastBidAdaptor","resumeAd",e)}}expandAd(){try{this._y.expandAd()}catch(e){this.Tm("VastBidAdaptor","expandAd",e)}}collapseAd(){try{this._y.collapseAd()}catch(e){this.Tm("VastBidAdaptor","collapseAd",e)}}skipAd(){try{super.skipAd(),this._y.skipAd()}catch(e){this.Tm("VastBidAdaptor","skipAd",e)}}getAdRemainingTime(){try{return this._y.getAdRemainingTime()}catch(e){return this.Tm("VastBidAdaptor","getAdRemainingTime",e),0}}getAdDuration(){try{return this._y&&this._y.getAdDuration()||Math.round(this.settings.vastResponse.duration/L.f)}catch(e){return this.Tm("VastBidAdaptor","getAdDuration",e),0}}getAdVolume(){try{return this._y.getAdVolume()}catch(e){return this.Tm("VastBidAdaptor","getAdVolume",e),0}}getAdMediaSize(){let e=0,t=0;return t=this._y instanceof Br?(e=this._y.getAdMediaWidth(),this._y.getAdMediaHeight()):(e=this.Sy.width,this.Sy.height),{width:e,height:t}}setAdVolume(e){try{super.setAdVolume(e),this._y.setAdVolume(e)}catch(e){this.Tm("VastBidAdaptor","setAdVolume",e)}}get adVideoUrl(){var e;return null===(e=this.Sy)||void 0===e?void 0:e.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/L.f}km(e){e=super.km(e);return this.Iy(e)}xm(e){e=super.xm(e);return this.Iy(e)}Ac(){var e;if(!this.settings.loopAdWhenFinished)try{super.Ac(),cr(this.ky),null===(e=this._y)||void 0===e||e.destroy()}catch(e){this.Tm("VastBidAdaptor","_destroy",e)}}Iy(e){var t;return e.payload.adSourceData.name=null===(t=this.settings.vastResponse)||void 0===t?void 0:t.adTitle,e.payload.clickThroughUrl=this.jy||this.settings.vastResponse.clickThrough,e}Ty(e,t){return e.filter(e=>e.getMediaFileType()===lr.d.Video&&t.canPlayType(e.type))}Oy(e,t){const i=this.Ty(this.settings.vastResponse.mediaFiles,t),r=i.filter(e=>"video/mp4"===e.type);if(r.length)return Tr(r,e);if(i.length)return Tr(i,e);t=this.settings.vastResponse.mediaFiles.filter(e=>e.getMediaFileType()===lr.d.Javascript);return t.length?Tr(t,e):null}Ay(e){this.Vv.next({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorInitAdError+`_${e.message}`}})}}function Nr(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):isFinite(Date.parse(e))?new Date(e):"string"==typeof e?e.trim():e}(Te=Lr=Lr||{}).JXONTree=function s(n){let t=0,o="";if(this.keyAttributes||(this.keyAttributes={}),n.hasChildNodes()){for(let e,t,i,r=0;r<n.childNodes.length;r++)((e=n.childNodes.item(r)).nodeType-1|1)===Node.TEXT_NODE?o+=e.nodeType===Node.TEXT_NODE?e.nodeValue.trim():e.nodeValue:1!==e.nodeType||e.prefix||(t=e.nodeName.toLowerCase(),i=new s(e),this.hasOwnProperty(t)?(this[t].constructor!==Array&&(this[t]=[this[t]]),this[t].push(i)):this[t]=i);this.keyValue=o?Nr(o):null}if(void 0===n.hasAttributes?0<n.attributes.length:n.hasAttributes()){let e;for(;t<n.attributes.length;t++)e=n.attributes.item(t),this.keyAttributes[e.name.toLowerCase()]=Nr(e.value.trim())}},Te.getKeyValue=function(e){if(e&&e.keyValue)return e.keyValue},Te.decodeXMLText=function(e){if("string"==typeof e)return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};class Ur{constructor(e){this.Cy=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.Py="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=e.keyAttributes.delivery,this.type=e.keyAttributes.type,this.width=e.keyAttributes.width,this.height=e.keyAttributes.height,this.codec=e.keyAttributes.codec,this.id=e.keyAttributes.id,this.bitrate=e.keyAttributes.bitrate,this.minBitrate=e.keyAttributes.minbitrate,this.maxBitrate=e.keyAttributes.maxbitrate,this.scalable=e.keyAttributes.scalable,this.maintainAspectRatio=e.keyAttributes.maintainaspectratio,this.apiFramework=e.keyAttributes.apiframework,this.src=Lr.getKeyValue(e)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.Py||Object(p.g)(this.type,this.Cy)?lr.d.Javascript:lr.d.Video}}class Vr{constructor(e,t){this.name=e.keyAttributes.event,this.uri=Lr.getKeyValue(e),"progress"===this.name&&(this.offset=Object(_e.d)(e.keyAttributes.offset,t))}}class qr{constructor(e){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=Lr.getKeyValue(e.clickthrough),this.clickTrackings=this.My(Object(p.m)(e.clicktracking)),this.customClicks=this.My(Object(p.m)(e.customclick))}My(e){const t=[];return void 0!==e[0]&&e.forEach(e=>{t.push(Lr.getKeyValue(e))}),t}}class Hr{constructor(e){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=Object(_e.a)(Lr.getKeyValue(e.duration)),this.skipoffset=Object(_e.d)(e.keyAttributes.skipoffset,this.duration),e.mediafiles&&(this.mediaFiles=this.Ey(Object(p.m)(e.mediafiles.mediafile))),e.trackingevents&&(this.trackingEvents=this.Ly(Object(p.m)(e.trackingevents.tracking))),e.videoclicks&&(this.videoClicks=new qr(e.videoclicks)),e.adparameters&&(this.adParameters=Lr.getKeyValue(e.adparameters),e.adparameters["@xmlEncoded"]&&(this.adParameters=Lr.decodeXMLText(this.adParameters)))}Ly(e){const t=[];return void 0!==e[0]&&e.forEach(e=>{t.push(new Vr(e,this.duration))}),t}Ey(e){const i=[];return void 0!==e[0]&&e.forEach(e=>{const t=new Ur(e);t.isSupported()&&i.push(t)}),i}isSupported(){return!0}}class Wr{constructor(e){this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.id=e.keyAttributes.id,this.sequence=e.keyAttributes.sequence,this.adId=e.keyAttributes.adid,e.linear&&(this.linear=new Hr(e.linear))}isSupported(){return!0}}function Gr(e){const t=[];return void 0!==e[0]&&e.forEach(e=>{t.push(Lr.getKeyValue(e))}),t}(Te=Rr=Rr||{}).parseImpressions=Gr,Te.parseCretives=function(e){const t=[];return e.forEach(e=>{t.push(new Wr(e))}),t},Te.parseErrors=Gr;class $r{constructor(e){this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=Lr.getKeyValue(e.adtitle),this.adSystem=Lr.getKeyValue(e.adsystem),this.impressions=Rr.parseImpressions(Object(p.m)(e.impression)),this.creatives=Rr.parseCretives(Object(p.m)(e.creatives.creative)),this.description=Lr.getKeyValue(e.description),this.advertiser=Lr.getKeyValue(e.advertiser),this.surveys=Lr.getKeyValue(e.survey),this.errors=Rr.parseErrors(Object(p.m)(e.error)),this.pricing=Lr.getKeyValue(e.pricing),this.extensions=Lr.getKeyValue(e.extensions)}isSupported(){return!0}}class zr{constructor(e){this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=Lr.getKeyValue(e.adSystem),this.impressions=Rr.parseImpressions(Object(p.m)(e.impression)),this.VASTAdTagURI=Lr.getKeyValue(e.vastadtaguri),this.creatives=e.creatives.creative?Rr.parseCretives(Object(p.m)(e.creatives.creative)):[],this.errors=Rr.parseErrors(Object(p.m)(e.error)),this.extensions=e.extensions,this.fallowAdditionalWrappers=!e.keyAttributes.followadditionalwrappers||e.keyAttributes.followadditionalwrappers,this.allowMultipleAds=e.keyAttributes.allowmultipleads,this.fallbackOnNoAd=e.keyAttributes.fallbackonnoad}}class Jr{constructor(e){Array.isArray(e)?this.Ry(e):this.By(e)}isSupported(){return!0}By(e){this.id=e.keyAttributes.id,this.sequence=e.keyAttributes.sequence,e.inline?this.inLine=new $r(e.inline):e.wrapper&&(this.wrapper=new zr(e.wrapper))}Ry(e){e=e.filter(e=>{e=this.Dy(e).filter(e=>e.linear);return!!Object(p.h)(e)});Object(p.h)(e)&&this.By(e[0])}Dy(e){return e.inline?Object(p.m)(e.inline.creatives.creative):e.wrapper?Object(p.m)(e.wrapper.creatives.creative):[]}}class Qr{constructor(e=2){this.Fy=e}parseVastXml(e){try{if(!this.Uy(e))return{error:!0,errorReason:Fi.XmlInvalidString};var t=(new DOMParser).parseFromString(e,"application/xml"),i=new Lr.JXONTree(t.documentElement);if(!this.$y(i,this.Fy))return{error:!0,errorReason:Fi.XmlInvalidTree};var r=new Jr(i.ad);return this.Vy(r)?{error:!1,result:r}:{error:!0,errorReason:Fi.XmlInvalidAd}}catch(e){return{error:!0,errorReason:Fi.XmlParseGeneral}}}Uy(e){return Object(k.h)(e)}$y(e,t){if(!e.ad)return!1;e=parseInt(e.keyAttributes.version,10);return!(e&&e<t)}Vy(e){var t=e.wrapper,e=e.inLine;return!(!e&&!t)&&(!(t&&!t.VASTAdTagURI)&&!(!t&&![...e.creatives].filter(e=>{return null===(e=null===e||void 0===e?void 0:e.linear)||void 0===e?void 0:e.mediaFiles.length}).length))}}class Yr{constructor(e){this.mediaFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.clickThrough=void 0,this.creativeId=void 0,e.forEach(e=>{e.inLine?(this.adTitle=e.inLine.adTitle,this.Rv(e.inLine.creatives)):e.wrapper&&this.Rv(e.wrapper.creatives)})}Bv(e){this.duration=e.duration,this.Ny(e.mediaFiles),this.Hy(e.skipoffset),this.qy(e.adParameters),e.videoClicks&&e.videoClicks.clickThrough&&this.Ug(e.videoClicks.clickThrough)}qy(e){this.adParameters=e}Hy(e){this.skipoffset=e}Ny(e){this.mediaFiles=[...this.mediaFiles,...e]}Ug(e){this.clickThrough=e}Rv(e){e.forEach(e=>{e.linear&&(this.creativeId=e.id,this.Bv(e.linear))})}}class Xr{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=10)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.zy(this.settings.xml).then(e=>(this.metrics.fetchEnd=(new Date).getTime(),e)).catch(e=>{throw this.metrics.fetchEnd=(new Date).getTime(),e})}zy(r){return new Promise((e,t)=>{var i=new Qr(2).parseVastXml(r);!0!==i.error?(this.Wy(i.result),e(this.Gy(i.result))):t(i.errorReason)})}Gy(i){return new Promise((e,t)=>{i.wrapper?(this.settings.maxWrapperLimit<=0&&t(Fi.XmlAdaptorWrapperLimit),t=this.settings.maxWrapperLimit-1,e(new ts({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:t,url:i.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}).fetchBid())):e(new Fr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,vastResponse:new Yr(this.settings.vastAdsChain),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished}))})}Wy(e){!function(e,t){e=new Xi(e);t.adError.push(...ir(e.errorUrls)),t.adImpression.push(...ir(e.impressions)),t.adClick.push(...ir(e.clickTrackings)),t.adMute.push(...ir(e.trackingEvents.mute)),t.adPause.push(...ir(e.trackingEvents.pause)),t.adQuartileFirst.push(...ir(e.trackingEvents.firstQuartile)),t.adQuartileSecond.push(...ir(e.trackingEvents.midpoint)),t.adQuartileThird.push(...ir(e.trackingEvents.thirdQuartile)),t.adQuartileFourth.push(...ir(e.trackingEvents.complete)),t.adResume.push(...ir(e.trackingEvents.resume)),t.adSkip.push(...ir(e.trackingEvents.skip)),t.adStarted.push(...ir(e.trackingEvents.creativeView)),t.adVideoStart.push(...ir([...e.trackingEvents.start])),t.adUnmute.push(...t.adUnmute,...ir(e.trackingEvents.unmute)),t.adUserAcceptInvitation.push(...ir([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),t.adUserClose.push(...ir(e.trackingEvents.close)),t.adUserMinimize.push(...t.adUserMinimize,...ir([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(e,this.settings.trackersInformation),this.settings.vastAdsChain.push(e)}}var Kr,Zr=i(25);(Te=Kr=Kr||{})[Te.None=0]="None",Te[Te.Ima=1]="Ima";const es={[Kr.Ima]:".g.doubleclick.net"};class ts{constructor(e){this.settings=e,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=!0),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Jy(this.settings.url).then(e=>e.fetchBid()).then(e=>(this.metrics.fetchEnd=(new Date).getTime(),e)).catch(e=>{throw this.metrics.fetchEnd=(new Date).getTime(),e})}Qy(t){let i=Kr.None;return Object.keys(es).forEach(e=>{-1!==t.indexOf(es[e])&&(i=parseInt(e,10))}),i}Jy(e){var t=this.Xy(e);switch(this.Qy(e)){case Kr.None:return this.Yy(t);case Kr.Ima:return this.Ky(t);default:return Promise.reject(Fi.HandlingSdkUrl)}}Ky(e){return Promise.resolve(new Ir({url:e,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl}))}Yy(e){return Zr.a.fetchXMLRequest(e,this.settings.requestWithCredentials).catch(e=>Promise.reject(Fi.NetworkRequestUrl)).then(e=>new Xr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:e,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}))}Xy(e){var{width:t,height:i}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),i={adHeight:i,adWidth:t,adPostion:this.settings.callingState.adBreakState.adBreakType},t={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(e,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:i,mediaMacros:t})}}class is{constructor(e={}){this.data=e,Object(k.h)(this.data.cnxBidId)||(this.data.cnxBidId=Object(Y.c)())}}var rs,ss=i(34);function ns(e,t){return e.find(e=>e.adManagerLineItem.protoLineItem.advertiserLineItemId===t).adManagerLineItem}function os(e){const t=[];return e.callers.forEach(e=>{e=e.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(p.g)(e,t)||t.push(e)}),e.bids.forEach(e=>{e=e.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(p.g)(e,t)||t.push(e)}),t}function as(e){return[f.ProtoCreativeTypeEnum.Tam,f.ProtoCreativeTypeEnum.Rtb,f.ProtoCreativeTypeEnum.HeaderBidder].includes(e)}(Te=rs=rs||{})[Te.FirstQuartile=0]="FirstQuartile",Te[Te.SecondQuartile=1]="SecondQuartile",Te[Te.ThirdQuartile=2]="ThirdQuartile",Te[Te.FourthQuartile=3]="FourthQuartile";class ls{constructor(e,t,i,r,s){this.Zy=e,this.tw=t,this.Kg=i,this.Ss=r,this.co=s,this.iw="div-cnx-display",this.ew=new qi,this.Km=new qi}get onDisplayAd(){return this.ew.asObservable()}get onError(){return this.Km.asObservable()}initializeAd(t,i){try{this.Jv=t,this.ty=new jr(this.Ss,this.co);let e="";this.Zy===lr.b.Html&&(e=this.tw);var r=this.sw(this.Jv,i);this.ty.loadIframe({customHead:"<style>html, body {position:relative;width:100%;height:100%}#"+this.iw+"{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#"+this.iw+"{border:3px solid white}#"+this.iw+" iframe{display:block}</style>",customHtml:'<div id="'+this.iw+'">'+e+"</div>",container:r,customReportingLog:{heavyAdBlockTypeEnum:f.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.Kg}}).then(e=>{this.nw=e.iframe;const t=this.nw.contentWindow;if(this.rw=t.document.getElementById(this.iw),this.Zy===lr.b.Javascript&&Object(S.z)(this.rw,t,this.tw),""===this.nw.contentWindow.document.head.innerHTML){const e="html, body {position:relative;width:100%;height:100%;margin:0;border:0}";this.aw("html, body {position:relative;width:100%;height:100%;margin:0;border:0}")}Object(S.H)(this.nw.contentWindow,"AdHtmlWrapper"),this.ew.next()}).catch(e=>{this.Km.next(lr.c.DisplayIntegratorIframeLoad)})}catch(t){this.Km.next(lr.c.WrapperInitAdError)}}getAdMediaWidth(){return this.rw.clientWidth}getAdMediaHeight(){return this.rw.clientHeight}destroy(){this.nw&&this.Jv&&Object(S.M)(this.nw),this.ty&&(this.ty.destroy(),this.ty=null)}sw(e,t){if(!t.width||!t.height)return e;t=this.Ss.createElementByString(`<div class="cnx-iframe-container" style="width: ${t.width}px; height: ${t.height}px"></div>`);return this.Jv.appendChild(t),t}aw(e){const t=this.nw.contentWindow.document.createElement("style"),i=this.nw.contentWindow.document.createTextNode(e);t.appendChild(i),this.nw.contentWindow.document.head.appendChild(t)}}class ds{constructor(e=0,t=1e3,i=1){this.timerDuration=e,this.$c=t,this.hw=i,this.Vc=0,this.Nc=null,this.Hc=!1,this.Yc=!1,this.ow=new qi,this.cw=new qi,this.lw=new qi,this.uw=[{event:rs.FirstQuartile,quartile:1},{event:rs.SecondQuartile,quartile:2},{event:rs.ThirdQuartile,quartile:3},{event:rs.FourthQuartile,quartile:4}],this.dw=null,this.qc=()=>{this.zc(),this.ow.next(),this.Wc(),this.Gc=(new Date).getTime()},e||this.disable()}start(){this.Yc=!0,null===this.Nc&&this.Jc()}stop(){this.Yc=!1,null!==this.Nc&&(this.zc(),this.Qc())}reset(e){e&&(this.timerDuration=e),this.Vc=0,this.Hc=!1,(this.dw=null)===this.Nc&&!this.Yc||(this.Qc(),this.Jc())}get timeElapsed(){return this.Vc}get timeRemaining(){return this.timerDuration-this.Vc}disable(){this.Hc=!0,this.Qc()}get onTimeUpdate(){return this.ow.asObservable()}get onTimeElapsed(){return this.cw.asObservable()}get onQuartile(){return this.lw.asObservable()}zc(){this.Vc+=(new Date).getTime()-this.Gc}Jc(){this.Hc||(this.Wc(),this.Gc=(new Date).getTime(),this.Nc=setInterval(this.qc,this.$c))}Qc(){clearInterval(this.Nc),this.Nc=null}Xc(){this.disable(),this.cw.next(),this.fw(this.Vc,this.timerDuration,this.hw),this.Vc=0}Wc(){this.Vc/L.f>=this.timerDuration/L.f&&this.Xc()}fw(e,t,i){i=Object(Q.h)(e/L.f,i);this.pw(i,t)}pw(e,t){const i=Math.floor(Object(Q.g)(0,t,0,4,e));this.dw<=i&&(this.uw.forEach(({event:e,quartile:t})=>{t===i&&this.lw.next(e)}),this.dw++)}}const cs={[rs.FirstQuartile]:v.b.AdVideoFirstQuartile,[rs.SecondQuartile]:v.b.AdVideoMidpoint,[rs.ThirdQuartile]:v.b.AdVideoThirdQuartile,[rs.FourthQuartile]:v.b.AdVideoComplete};class hs extends gr{constructor(e){super(e),this.settings=e,this.adMediaType="displayHtml",this.adSourceType=f.ProtoAdsourceTypeEnum.Unknown,this.vw="html",this.$c=500,this.hw=1,this.mw=[];e=this.settings.adManagerLineItem.protoLineItem.overlayTime*L.f;this.gw=new ds(e,this.$c,this.hw),this.mw.push(this.gw.onTimeUpdate.subscribe(()=>{this.am({type:v.b.AdRemainingTimeChange})}),this.gw.onTimeElapsed.subscribe(()=>{this.stopAd("htmlTimerElapsed")}),this.gw.onQuartile.subscribe(e=>{this.am({type:cs[e],payload:{}})}))}get adVideoUrl(){return this.vw}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(e,t,i,r,s,n,o){try{super.initAd(e,t,i,r,s,n,o),this.gl=e,this.yl=t,this.am({type:v.b.AdLoaded,payload:{}})}catch(e){this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorInitAdError+`_${e.message}`}})}}startAd(){try{super.startAd(),this.gw.start(),this.yw=new ls(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.trackingService),this.mw.push(this.yw.onDisplayAd.subscribe(()=>{this.am({type:v.b.AdStarted}),this.am({type:v.b.AdVideoStart}),this.am({type:v.b.AdImpression,payload:{}})}),this.yw.onError.subscribe(e=>{this.am({type:v.b.AdError,payload:{errorMessage:e}}),this.gw.stop()})),this.yw.initializeAd(this.Jv,{width:this.gl,height:this.yl})}catch(e){this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){try{super.stopAd(e),this.gw.stop(),this.am({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(e){this.Tm("HtmlBidAdaptor","stopAd",e)}}skipAd(){try{super.skipAd(),this.am({type:v.b.AdSkipped})}catch(e){this.Tm("HtmlBidAdaptor","skipAd",e)}}pauseAd(){try{this.gw.stop(),this.am({type:v.b.AdPaused})}catch(e){this.Tm("HtmlBidAdaptor","pauseAd",e)}}resumeAd(){try{this.gw.start(),this.am({type:v.b.AdPlaying})}catch(e){this.Tm("HtmlBidAdaptor","resumeAd",e)}}collapseAd(){}expandAd(){}getAdDuration(){return this.gw.timerDuration/L.f}getAdRemainingTime(){return this.gw.timeRemaining/L.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.yw.getAdMediaWidth(),height:this.yw.getAdMediaHeight()}}setAdVolume(e){}resizeAd(e,t,i){this.gl=e,this.yl=t}Ac(){var e;try{super.Ac(),this.gw.stop(),cr(this.mw),null===(e=this.yw)||void 0===e||e.destroy()}catch(e){this.Tm("HtmlBidAdaptor","_destroy",e)}}}class us{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.ww(this.settings.mime))return Promise.reject(Fi.HTMLUnknownMimeType);var e=new hs({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(e)}ww(t){return Object.keys(lr.b).some(e=>lr.b[e]===t)}}class ps{constructor(e,t,i,r,s,n,o,a){this.xw=e,this.kw=t,this.Ob=i,this.Sw=r,this.Ow=s,this._w=n,this.jw=o,this.Aw=a,this.Iw=0,this.Tw=new Map}request(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video),e=this.Cw(e,i),i=this.Pw(t);return!e||Object.keys(i.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.Mw(i).then(e=>this.Ew(e,t)).catch(e=>(Object(g.a)({message:"RtbCallAggregator",exception:e.message,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),{bids:[],noBids:[]}))}destroy(){}Ew(i,r){const s={bids:[],noBids:[]};return i.lineItemResponses.forEach(e=>{const t=ns(r.lineItemRequestDataList,e.id);Object(k.d)(e.cachedFloorPrice)&&this.Tw.set(e.id,e.cachedFloorPrice),e.bids.forEach(e=>{e=this.Lw(e,t,i,r.callingState);e&&s.bids.push(e)}),e.noBids.forEach(e=>{s.noBids.push(this.Rw(e,t,i))})}),s}Rw(e,t,i){return{lineItem:t,requestMetadata:new is({requestedFloorPrice:e.requestedFloorPrice,requestedFloorPriceIndex:e.floorPriceFactorIndex,rtbRequestNumber:this.Iw,syncedUser:e.syncedUser,partnerCustomHeaders:e.partnerCustomHeaders,partnerReason:e.partnerReason,requestTrackingHandledByServer:!0}),reason:e.connatixReason}}Lw(e,t,i,r){var s=e,n=this.Bw(s,t),o=new is({requestedFloorPrice:s.requestedFloorPrice,requestedFloorPriceIndex:s.floorPriceFactorIndex,syncedUser:s.syncedUser,rtbRequestNumber:this.Iw,encryptedPrice:s.encryptedPrice,dspId:s.dspId,rtbAdomain:s.adomain,rtbSeatId:s.seatId,rtbCampainId:s.campaignId,cnxBidId:s.cnxBidId,requestTrackingHandledByServer:!0}),a=kr();switch(t.protoLineItem.adType){case f.ProtoAdType.Video:return new Xr({id:Object(Y.c)(),adManagerLineItem:t,replaceTrackingMacros:!0,trackersInformation:n,xml:s.vastTag,bidSlotId:a,requestMetadata:o,callingState:r,adMacroReplacer:this.Sw,adContainer:this.Ow.get(t.protoLineItem.adType),globalDomUtilsService:this.Ob.services.GlobalDomUtilsService,viewabilityService:this.Ob.services.ViewabilityService,trackingService:this.Ob.services.TrackingService,obfuscatedPrice:s.gtkpbp,adEnforcer:this.jw,creativeId:s.creativeId,successRate:s.successRate,os:this.Ob.config.os.os,adSlotContainerRecycler:this.Aw,pageUrl:this.Ob.config.pageUrl});case f.ProtoAdType.Overlay:return new us({id:Object(Y.c)(),adManagerLineItem:t,dimensions:{width:s.width,height:s.height},html:s.vastTag,mime:s.mime,bidSlotId:a,replaceTrackingMacros:!0,requestMetadata:o,trackersInformation:n,callingState:r,adContainer:this.Ow.get(t.protoLineItem.adType),globalDomUtilsService:this.Ob.services.GlobalDomUtilsService,viewabilityService:this.Ob.services.ViewabilityService,trackingService:this.Ob.services.TrackingService,obfuscatedPrice:s.gtkpbp,adEnforcer:this.jw,creativeId:s.creativeId,successRate:s.successRate,os:this.Ob.config.os.os,adSlotContainerRecycler:this.Aw})}}Bw(e,t){const i=new Zi;er(t.protoLineItem.trackers,i);t=[...e.billingNoticeUrlList,e.adQualityCheckUrl].filter(e=>Object(k.h)(e)).map(e=>tr(e));return i.adImpression.push(...t),Object(k.h)(e.winNoticeUrl)&&i.adWin.push(tr(e.winNoticeUrl)),i}Dw(e,t){if(e.protoLineItem.adType===f.ProtoAdType.Overlay){var i=t.adContainerState.get(f.ProtoAdType.Video),e=t.adContainerState.get(e.protoLineItem.adType);if(i.height!==e.height||i.width!==e.width)return{width:e.width,height:e.height}}return null}Fw(e,s){const n={};return e.filter(e=>this._w.shouldRequestLineItem(e.adManagerLineItem.protoLineItem.advertiserLineItemId)).forEach(e=>{var t=e.adManagerLineItem,i=this.Dw(t,s),r=this.Tw.get(t.protoLineItem.advertiserLineItemId);n[t.protoLineItem.advertiserLineItemId]={availableRequests:e.maxAvailableRequests,gdprConsent:this.Ob.services.UserManagerService.isConsent(t.protoLineItem.vendorId),cachedFloorPrice:r||void 0,ignoredFloorPriceFactorIndexes:os(t),publisherLineItemId:t.protoLineItem.publisherLineItemId,slotHeight:null===i||void 0===i?void 0:i.height,slotWidth:null===i||void 0===i?void 0:i.width}}),n}Pw(e){var{width:t,height:i,viewability:r}=e.callingState.adContainerState.get(f.ProtoAdType.Video);return{metadata:this.Ob.services.TrackingService.getMetadataModel(),gdprCompliant:this.Ob.services.UserManagerService.isGDPR(),gdprConsentData:this.Ob.services.UserManagerService.getConsentPayload(),soundOn:e.callingState.sound,videoHeight:i,videoWidth:t,testMode:"true"===Object(Yt.b)("cnxRtbTest",this.Ob.config.pageUrl),explorationMode:this.Ob.config.explorationMode,viewability:r,outstream:this.xw,domainURL:this.Ob.config.domainURL,isClickToPlay:e.callingState.clickToPlay,appVersion:this.Ob.config.appVersion,deviceID:this.Ob.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.Ob.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Ob.services.UserManagerService.getUsPrivacyString(),adSkippability:this.kw.adSkippability,skipAdAfter:this.kw.skipAdAfter,gdprConsentMode:this.Ob.services.UserManagerService.gdprConsentMode,customMacros:this.Ob.services.MacrosService.getExtraMacros(),maxAdDuration:e.maxAdDuration,lineItems:this.Fw(e.lineItemRequestDataList,e.callingState)}}Mw(e){return this.Iw++,Zr.a.sendProtoRequest({endpoint:se.a.endPoints.api.rtb,ProtoRequest:f.ProtoRtbRequest,ProtoResponse:f.ProtoRtbResponse,requestData:e,queryParams:{[ss.b]:Ke.a.version},logError:!1})}Cw(e,t){return 0!==e&&0!==t||(Object(g.a)({message:"AdManager_BidderCaller_dimensions",exception:`width:${e}_height:${t}_destroyed:${a.a.isPlayerDestroyed()}`,throttle:5,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}var gs=i(23),Te=i(39);const ms=[Te.a.P1,Te.a.P2,Te.a.P4,Te.a.P7,Te.a.P8];class fs{constructor(e){this.Uh=e}Uw(e,t){let i=[];switch(t){case gs.a.CmpApi:i=Zt;break;case gs.a.TcfApi:i=ei}return Object(p.g)(e,i)}$w(e){var t=this.Uh.getGdprConsentApiType();if(this.Uw(e,t))return!0;e=Kt[e]||"";return this.Uh.isConsent(e,ms)}Vw(e){return!!Object(p.g)(e,ti)||!!this.Uh.isSellUserAllowed()}isBidderCallable(e){return this.Uh.isGDPR()?this.$w(e):!this.Uh.isCcpaApplicable()||this.Vw(e)}}const ys=[...ri],bs=[si.VAST_2_WRAPPER,si.VAST_2,si.VAST_3,si.VAST_3_WRAPPER],vs=[ni.VPAID_1,ni.VPAID_2],Ps={[wn.Telaria]:(e,t)=>{const i=Object.assign({},e);return e.srcPageUrl||(i.srcPageUrl=t.pageUrl),i},[wn.OneVideo]:(e,t)=>{Object(k.h)(e.pubId)||Object(g.a)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:f.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1});const i=Object.assign(Object.assign({},e),{pubId:e.pubId,video:{playerWidth:Math.floor(t.playerWidth),playerHeight:Math.floor(t.playerHeight),mimes:ys,protocols:bs,api:vs},site:{page:t.pageUrl}}),r=t.floorPrice;return Object(k.e)(r)&&(i.bidfloor=r),i},[wn.IndexExchange]:(e,t)=>{var i=e.siteId;if(Object(k.h)(i)){const r=Object.keys(si).map(e=>si[e]),s={siteId:i,size:[Math.floor(t.playerWidth),Math.floor(t.playerHeight)],video:{mimes:ri,minduration:0,maxduration:t.maxDuration,protocols:r}};Object(k.d)(e.minduration)&&(s.video.minduration=e.minduration),Object(k.d)(e.maxduration)&&e.maxduration<=t.maxDuration&&(s.video.maxduration=e.maxduration),Object(k.h)(e.id)&&(s.id=e.id);e=t.floorPrice;return Object(k.e)(e)&&(s.bidFloor=e,s.bidFloorCur="USD"),s}Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:t.lineItemId})},[wn.Rubicon]:(e,t)=>{const i=Object.assign({},e),r=t.floorPrice;return Object(k.e)(r)&&(i.floor=r),i},[wn.RhythmOne]:(e,t)=>{const i=Object.assign({},e),r=t.floorPrice;return Object(k.e)(r)&&(i.floor=r),i},[wn.Pubmatic]:(e,t)=>{const i=Object.assign({},e),r=t.floorPrice;return Object(k.e)(r)&&(i.kadfloor=String(r)),i},[wn.SpotX]:(e,t)=>{const i=Object.assign({},e),r=t.floorPrice;return Object(k.e)(r)&&(i.price_floor=r),t.isOutstream&&(i.outstream_options={slot:t.bidSlotId}),i},[wn.MediaNet]:(e,t)=>{const i=Object.assign({},e);Object(k.h)(i.cid)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:t.lineItemId}),Object(k.h)(i.crid)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:t.lineItemId});e=t.floorPrice;return Object(k.e)(e)&&(i.bidFloor=e),i.video={api:Object.keys(ni).map(e=>ni[e]),mimes:Object.keys(ri).map(e=>ri[e]),protocols:Object.keys(si).map(e=>si[e]),maxDuration:t.maxDuration,w:t.playerWidth,h:t.playerHeight},i},[wn.Adman]:(e,t)=>{e=Object.assign({},e);return Object(k.h)(e.placementId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:t.lineItemId}),e},[wn.IronSource]:(e,t)=>{const i=Object.assign({},e);Object(k.h)(i.isOrg)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IronSource_adapter_missing_isOrg_string",callStack:t.lineItemId});var t=t["floorPrice"];return Object(k.e)(t)&&(i.floorPrice=t),i},[wn.Undertone]:(e,t)=>{e=Object.assign({},e);return Object(k.h)(e.placementId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:t.lineItemId}),Object(k.d)(e.publisherId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:t.lineItemId}),e},[wn.SynacorMedia]:(e,t)=>{const i=Object.assign({},e);Object(k.h)(i.seatId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:t.lineItemId}),Object(k.h)(i.tagId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:t.lineItemId});e=t.floorPrice;return Object(k.e)(e)&&(i.bidfloor=e),i.video={api:Object.keys(ni).map(e=>ni[e]),mimes:Object.keys(ri).map(e=>ri[e]),protocols:Object.keys(si).map(e=>si[e]),maxduration:t.maxDuration},i},[wn.AmxRTB]:(e,t)=>{const i=Object.assign({},e),r=t.floorPrice;return Object(k.e)(r)&&(i.floor=r),i},[wn.Smaato]:(e,t)=>{e=Object.assign({},e);return Object(k.h)(e.publisherId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_publisherId",callStack:t.lineItemId}),Object(k.h)(e.adspaceId)||Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_adspaceId",callStack:t.lineItemId}),e}},Ss=(t,i)=>{try{var e=JSON.parse(t);return 1<e.length&&Object(g.a)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:f.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){Object(g.a)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:f.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:2,sendMaxLog:!1})}};class Is{constructor(e,t,i,r,s){this.Nw=e,this.ze=t,this.xw=i,this.Hw=r,this.qw=s}requestHeaderBidder(r,s,n){return new Promise((t,i)=>{this.zw().then(()=>{var e=r.map(e=>this.Ww(e,s,n).then(e=>e));Promise.all(e).then(e=>{t(e)})}).catch(e=>{i(f.ConnatixNoBidReasonEnum.NoBid)})})}Ww(n,r,o){return new Promise(s=>{let e=[];const t=n.lineItem.floorPrices;if(Object(p.h)(t))e=this.Gw(t,n.ignoredFloorPriceIndexes,n.availableRequests).map(e=>this.Jw(n.lineItem,e.floorPrice,e.floorPriceIndex,r,o,t,n.maxAdDuration));else if(!Object(p.h)(n.ignoredFloorPriceIndexes)&&0<n.availableRequests){const s=0,i=this.Jw(n.lineItem,n.lineItem.floorPrice,0,r,o,t,n.maxAdDuration);e.push(i)}Promise.all(e).then(e=>{const t=[],i=[],r=n.lineItem.advertiserLineItemId;e.forEach(e=>{(e.reason?i:t).push(e)}),s({bids:t,noBids:i,lineItemId:r})})})}Jw(e,i,r,s,n,o,a){return new Promise(t=>{this.Qw(e,i,r,s,n,o,a).then(e=>{t(e)}).catch(e=>{t(e)})})}zw(){return new Promise((e,t)=>{window.pbjs?(this.Xw=window.pbjs,e()):Object(S.A)({src:"//cds.connatix.com/p/plugins/prebid4.36.0-1.js"},window.document.head,window,()=>{this.Xw=window.pbjs,this.Yw(),e()},()=>{t(f.ConnatixNoBidReasonEnum.NoBid)},!0,"AdManager_HeaderBidder_unable_to_insert_prebidJs_script")})}Yw(){var e=((e,t,i,r)=>{const s={usePrebidCache:!0,cache:{url:ii},userSync:{syncEnabled:!0,iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:0,syncDelay:3e3,auctionDelay:0,aliasSyncEnabled:!0,userIds:[{name:"criteo"},{name:"pubCommonId",params:{enableSharedId:!0},storage:{type:"cookie",name:"_pubcid",expires:180}}]},ix:{timeout:900}};return i&&(s.schain={validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:(i=i).businessDomain,hp:1,sid:i.supplyChainId||null}]}}),(e||t)&&(s.consentManagement=e?{gdpr:{cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}}:t?{usp:{cmpApi:"iab",timeout:2e3}}:{}),Object(k.h)(r)&&(s.pageUrl=r),s})(this.Hw,this.qw,this.Nw,this.ze);window.pbjs.setConfig(e)}Qw(d,c,h,t,i,u,r){return new Promise((n,o)=>{const a=((e,t,i,r,s)=>{const n={code:Object(Y.c)(),mediaTypes:{video:{playerSize:[Math.floor(e),Math.floor(t)],context:i?"outstream":"instream",mimes:ys,protocols:bs,linearity:1,api:vs,frameworks:[ni.VPAID_1,ni.VPAID_2],maxduration:r,minDuration:0}},bids:[]};return Object(k.e)(s)&&(n.floors={currency:"USD",schema:{fields:["mediaType"]},values:{video:s}}),n})(t,i,this.xw,r,c);try{const t=d.headerBidderBids;a.bids=JSON.parse(t)}catch(e){return Object(g.a)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING}),void o({reason:f.ConnatixNoBidReasonEnum.NoBid,floorPrice:c,floorPriceIndex:h})}const l=kr();a.bids.forEach(e=>this.Kw(e,t,i,c,d.advertiserLineItemId,r,l)),this.Xw.que.push(()=>{this.Xw.addAdUnits(a);var e={timeout:d.headerBidderTimeout,adUnits:[a],bidsBackHandler:()=>{try{var e;if(!(e=this.Xw.getHighestCpmBids(a.code)[0]))return void o({reason:f.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:c,floorPriceIndex:h});if(!this.Zw(e))return Object(g.a)({level:f.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(e)}),void o({reason:f.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:c,floorPriceIndex:h});var t=this.tx(e),i=e.cpm||e.adResponse.ad.cpm,r=d["advertiserLineItemId"],s={adTag:t,lineItemId:r,floorPrice:c,floorPriceIndex:h,cpm:i,slotId:l};Object(k.e)(c)&&i<c&&Object(g.a)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:f.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:5,exception:`floorPrices_${u}_index_${h}_cpm_${i}_li_${d.advertiserLineItemId}`,callStack:Ss(d.headerBidderBids,d.advertiserLineItemId)}),n(s)}catch(e){Object(g.a)({level:f.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_Prebidjs_error",exception:e.message,callStack:e.stack}),o({reason:f.ConnatixNoBidReasonEnum.NoBid,floorPrice:c,floorPriceIndex:h})}}};this.Xw.requestBids(e)})})}Kw(e,t,i,r,s,n,o){const a=Ps[e.bidder];a&&(e.params=a(e.params,{playerWidth:t,playerHeight:i,maxDuration:n,pageUrl:this.ze,floorPrice:r,lineItemId:s,isOutstream:this.xw,bidSlotId:o}))}Zw(e){return e.adserverTargeting&&Object(k.h)(e.adserverTargeting.hb_cache_id)}tx(e){return`${ii}?uuid=${e.adserverTargeting.hb_cache_id}`}Gw(t,i,r){const s=[];let n=0;for(let e=0;e<t.length;e++)-1===i.indexOf(e)&&n<r&&(s.push({floorPrice:t[e],floorPriceIndex:e}),n++);return s}}class Ts{constructor(e,t,i,r,s,n,o,a){this.xw=e,this.Nw=t,this.Ob=i,this.Sw=r,this.Ow=s,this.jw=n,this.Aw=o,this._g=a,this.ex=new Map,this.sx=new Is(this.Nw,this.Ob.config.pageUrl,this.xw,this.Ob.services.UserManagerService.isGDPR(),this.Ob.services.UserManagerService.isCcpaApplicable()),this.nx=new fs(this.Ob.services.UserManagerService)}request(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video),e=this.Cw(e,i),i=this.ax(t.lineItemRequestDataList);return Object(p.h)(i)&&e?(t.lineItemRequestDataList=i,this.hx(t).then(e=>Promise.resolve(this.ox(e,t))).catch(()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){}ox(e,s){const n={bids:[],noBids:[]};return e.forEach(e=>{const r=ns(s.lineItemRequestDataList,e.lineItemId);e.bids.forEach(e=>{var t=new Zi,i=new is({requestedFloorPrice:e.floorPrice,requestedFloorPriceIndex:e.floorPriceIndex,prebidJsBidderName:this.lx(r)});er(r.protoLineItem.trackers,t),n.bids.push(new ts({id:Object(Y.c)(),adManagerLineItem:r,replaceTrackingMacros:!0,requestMetadata:i,trackersInformation:t,url:e.adTag,callingState:s.callingState,adMacroReplacer:this.Sw,adContainer:this.Ow.get(r.protoLineItem.adType),globalDomUtilsService:this.Ob.services.GlobalDomUtilsService,viewabilityService:this.Ob.services.ViewabilityService,trackingService:this.Ob.services.TrackingService,cpm:e.cpm,adEnforcer:this.jw,os:this.Ob.config.os.os,adSlotContainerRecycler:this.Aw,bidSlotId:e.slotId,loopAdWhenFinished:this._g,pageUrl:this.Ob.config.pageUrl}))}),e.noBids.forEach(e=>{var t=new is({requestedFloorPrice:e.floorPrice,requestedFloorPriceIndex:e.floorPriceIndex});n.noBids.push({lineItem:r,requestMetadata:t,reason:e.reason})})}),n}hx(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video),r=t.lineItemRequestDataList.map(e=>this.ux(e,t.maxAdDuration));return this.sx.requestHeaderBidder(r,e,i)}ux(e,t){var i=e.adManagerLineItem;return{availableRequests:e.maxAvailableRequests,lineItem:i.protoLineItem,ignoredFloorPriceIndexes:os(i),maxAdDuration:t}}ax(e){return e.filter(e=>{e=this.lx(e.adManagerLineItem);return this.px(e)})}Cw(e,t){return 0!==e&&0!==t||(Object(g.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${e}_height:${t}_destroyed:${a.a.isPlayerDestroyed()}`,throttle:5,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}px(e){return this.nx.isBidderCallable(e)}lx(e){var t=this.ex.get(e);return Object(k.h)(t)?t:Ss(e.protoLineItem.headerBidderBids,e.protoLineItem.advertiserLineItemId)||""}}const ks={libPropertyName:"apstag",mediaType:"video"};class As{constructor(e,t){this.Ob=e,this.bx=t,this.vx=()=>{this.mx||this.gx(),this.yx&&clearInterval(this.yx),this.mx||Object(g.a)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:f.ProtoLoggingLevelEnum.WARNING})};t=this.Ob.config.topWindow;this.wx=Object(Y.f)(t).topFrame,this.gx()}requestBids(e){e=e.map(e=>this.xx(e));return Promise.all(e)}destroy(){this.yx&&clearInterval(this.yx),this.wx.removeEventListener("load",this.vx)}xx(t){return this.kx(this.bx,ks.mediaType).then(e=>this.Sx(t,e)).then(e=>({bids:[e],lineItemId:t.advertiserLineItemId,noBids:[]})).catch(e=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:e}]}))}kx(e,r){return new Promise((t,i)=>{this.mx||i(f.ConnatixNoBidReasonEnum.NoLibInPage),this.mx.fetchBids({slots:[{slotID:e,mediaType:r}]},e=>{Object(p.h)(e)?t(e[0]):i(f.ConnatixNoBidReasonEnum.EmptyResponse)})})}Sx(e,r){const s={lineItemId:e.advertiserLineItemId,code:r.amznbid,metadata:this.Ob.services.TrackingService.getMetadataModel(),exploration:this.Ob.config.explorationMode};return new Promise((t,i)=>{Zr.a.sendProtoRequest({endpoint:se.a.endPoints.api.tam,ProtoRequest:f.ProtoCoreTamBidRequest,ProtoResponse:f.ProtoCoreTamBidResponse,requestData:s,queryParams:{[ss.b]:Ke.a.version},logError:!0}).then(e=>{Object(k.h)(e.errorMessage)?i(f.ConnatixNoBidReasonEnum.RequestException):e.encryptedBidPrice?t({encryptedPrice:e.encryptedBidPrice,vastTag:`https://aax.amazon-adsystem.com/e/dtb/vast?b=${r.amzniid}&rnd=${Object(Y.c)()}&pp=${r.amznbid}`,ofskp:e.ofskp,successRate:e.successRate,slotId:kr()}):i(f.ConnatixNoBidReasonEnum.InvalidResponse)}).catch(()=>{i(f.ConnatixNoBidReasonEnum.RequestException)})})}gx(){this.wx[ks.libPropertyName]?this.mx=this.wx[ks.libPropertyName]:this.yx||"complete"!==this.wx.document.readyState&&(this.wx.addEventListener("load",this.vx),this.yx=setInterval(()=>{this.gx()},L.f)),this.mx&&clearInterval(this.yx)}}class Os{constructor(e,t,i,r,s,n){this.Ob=e,this.Ox=t,this.Sw=i,this.Ow=r,this.jw=s,this.Aw=n,this._x=new As(this.Ob,this.Ox)}request(t){var{width:e,height:i}=t.callingState.adContainerState.get(f.ProtoAdType.Video);return this.Cw(e,i)?this.jx(t).then(e=>Promise.resolve(this.Ax(e,t))).catch(()=>Promise.resolve({bids:[],noBids:[]})):Promise.resolve({bids:[],noBids:[]})}destroy(){this._x.destroy()}jx(e){e=e.lineItemRequestDataList.map(e=>e.adManagerLineItem.protoLineItem);return this._x.requestBids(e)}Ax(e,s){const n={bids:[],noBids:[]};return e.forEach(e=>{const r=ns(s.lineItemRequestDataList,e.lineItemId);e.bids.forEach(e=>{var t=new Zi,i=new is({encryptedPrice:e.encryptedPrice});er(r.protoLineItem.trackers,t),n.bids.push(new ts({id:Object(Y.c)(),adManagerLineItem:r,replaceTrackingMacros:!0,requestMetadata:i,trackersInformation:t,url:e.vastTag,bidSlotId:e.slotId,callingState:s.callingState,adMacroReplacer:this.Sw,adContainer:this.Ow.get(r.protoLineItem.adType),globalDomUtilsService:this.Ob.services.GlobalDomUtilsService,viewabilityService:this.Ob.services.ViewabilityService,trackingService:this.Ob.services.TrackingService,adEnforcer:this.jw,requestWithCredentials:!1,successRate:e.successRate,obfuscatedPrice:e.ofskp,os:this.Ob.config.os.os,adSlotContainerRecycler:this.Aw,pageUrl:this.Ob.config.pageUrl}))}),e.noBids.forEach(e=>{n.noBids.push({lineItem:r,requestMetadata:new is,reason:e.reason})})}),n}Cw(e,t){return 0!==e&&0!==t||(Object(g.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${e}_height:${t}_destroyed:${a.a.isPlayerDestroyed()}`,throttle:5,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}const Cs=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class ws{constructor(e,t,i){this.Ix=e,this.Tx=t,this.Cx=i,this.iw=`div-gpt-ad-1589549806211-${Object(Y.c)()}`,this.ew=new qi,this.Km=new qi,this.Bm=new qi}get onCreativeReceived(){return this.Bm.asObservable()}get onDisplayAd(){return this.ew.asObservable()}get onError(){return this.Km.asObservable()}getAdMediaHeight(){return this.Px?this.Px.clientHeight:0}getAdMediaWidth(){return this.Px?this.Px.clientWidth:0}initializeAd(e,t){try{this.Mx=e,this.gm(e);const i=this.Ex(t.width,t.height);this.Ix.cmd.push(()=>{this.Lx=this.Ix.defineSlot(this.Cx,i,this.iw).addService(this.Ix.pubads()).setTargeting("domains",this.Tx),this.Ix.enableServices(),this.Rx(this.Lx),this.Ix.pubads().isInitialLoadDisabled()&&this.Ix.pubads().refresh([this.Lx]),this.Ix.display(this.iw)})}catch(e){this.Km.next(lr.c.WrapperInitAdError)}}destroy(){this.Ix.cmd.push(()=>{this.Ix.destroySlots&&this.Lx&&this.Ix.destroySlots([this.Lx])})}Rx(r){this.Ix.pubads().addEventListener("slotOnload",e=>{var t,i;if(e.slot===r){try{const r=null===(i=null===(t=null===e||void 0===e?void 0:e.slot)||void 0===t?void 0:t.getResponseInformation())||void 0===i?void 0:i.creativeId;r&&this.Bm.next(r.toString())}catch(e){Object(g.a)({message:"AdManager_GptWrapper_creativeId",level:f.ProtoLoggingLevelEnum.WARNING,exception:e.message,callStack:e.stack})}this.ew.next()}}),this.Ix.pubads().addEventListener("slotRenderEnded",e=>{var t;if(e.slot===this.Lx){try{this.Px=null===(t=this.Mx)||void 0===t?void 0:t.getElementsByTagName("iframe")[0],Object(k.a)(this.Lx)&&Object(S.H)(this.Px.contentWindow,"GPTWrapper")}catch(e){}e.isEmpty&&this.Km.next(lr.c.AdxOverlayNoFill)}})}gm(e){e.id=this.iw}Ex(t,i){return Cs.filter(e=>!Array.isArray(e)||!Object(p.i)(e)||Object(p.h)(e)&&e[0]<=t&&e[1]<=i)}}var xs,Es,Ls=i(54);class Rs extends gr{constructor(e){super(e),this.settings=e,this.adMediaType="displayAdx",this.adSourceType=f.ProtoAdsourceTypeEnum.Unknown,this.vw="adx",this.Bx={[rs.FirstQuartile]:v.b.AdVideoFirstQuartile,[rs.SecondQuartile]:v.b.AdVideoMidpoint,[rs.ThirdQuartile]:v.b.AdVideoThirdQuartile,[rs.FourthQuartile]:v.b.AdVideoComplete},this.Dx=[];e=this.settings.adManagerLineItem.protoLineItem.overlayTime*L.f;this.gw=new ds(e,500),this.Dx.push(this.gw.onTimeUpdate.subscribe(()=>{this.am({type:v.b.AdRemainingTimeChange})}),this.gw.onTimeElapsed.subscribe(()=>{this.stopAd("adxTimerElapsed")}),this.gw.onQuartile.subscribe(e=>{this.am({type:this.Bx[e],payload:{}})}))}initAd(e,t,i,r,s,n,o){try{super.initAd(e,t,i,r,s,n,o),this.Fx={width:e,height:t},this.Ux().then(e=>{this.$x=new ws(e,this.settings.domain,this.settings.adxAdUnitPath),this.Dx.push(this.$x.onCreativeReceived.subscribe(e=>{this.creativeId=e})),this.am({type:v.b.AdLoaded,payload:{skipOffset:0}})}).catch(e=>{this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdxOverlayGptScriptLoad+`_${e.message}`}})})}catch(e){this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorInitAdError+`_${e.message}`}})}}startAd(){try{super.startAd(),this.Dx.push(this.$x.onDisplayAd.subscribe(()=>{this.am({type:v.b.AdStarted}),this.am({type:v.b.AdVideoStart}),this.am({type:v.b.AdImpression,payload:{}}),this.gw.start()}),this.$x.onError.subscribe(e=>{this.am({type:v.b.AdError,payload:{errorMessage:e}}),this.gw.stop()})),this.$x.initializeAd(this.Jv,this.Fx)}catch(e){this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorStartAdError+`_${e.exception}`}})}}stopAd(e){try{super.stopAd(e),this.gw.stop(),this.am({type:v.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(e){this.Tm("AdxBidAdaptor","stopAd",e)}}resizeAd(e,t,i){this.Fx&&(this.Fx.width=e,this.Fx.height=t)}pauseAd(){try{this.gw.stop(),this.am({type:v.b.AdPaused})}catch(e){this.Tm("AdxBidAdaptor","pauseAd",e)}}resumeAd(){try{this.gw.start(),this.am({type:v.b.AdPlaying})}catch(e){this.Tm("AdxBidAdaptor","resumeAd",e)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.am({type:v.b.AdSkipped})}catch(e){this.Tm("AdxBidAdaptor","skipAd",e)}}getAdRemainingTime(){return this.gw.timeRemaining/L.f}getAdDuration(){return this.gw.timerDuration/L.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.$x.getAdMediaWidth(),height:this.$x.getAdMediaHeight()}}setAdVolume(e){}get adVideoUrl(){return this.vw}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Ux(){const i=Object(Y.f)(window).topFrame;return i.googletag?Promise.resolve(i.googletag):(i.googletag=window.googletag||{cmd:[]},new Promise((e,t)=>{Object(S.A)({src:Ls.a},i.document.head,i,()=>{e(i.googletag)},()=>{t()})}))}Ac(){var e;try{super.Ac(),this.gw.stop(),cr(this.Dx),null===(e=this.$x)||void 0===e||e.destroy()}catch(e){this.Tm("AdxBidAdaptor","_destroy",e)}}}class Ms{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();var e=new Rs({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this.Vx(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(e)}Vx(e){return e.substr("https://adx.connatix.com".length)}}class Bs extends gr{constructor(e){super(e),this.settings=e,this.adMediaType="cnxMedia",this.adSourceType=f.ProtoAdsourceTypeEnum.CnxMedia,this.Nx=[]}initAd(i,r,s,n,o,a,l){try{let e;super.initAd(i,r,s,n,o,a,l);let t=!1;if(Object(k.h)(this.settings.externalMediaFile))e=this.settings.externalMediaFile;else if(Object(k.h)(this.settings.externalHlsFile))e=this.settings.externalHlsFile,t=!0;else{if(!Object(p.h)(this.settings.renditions))return void this.am({type:v.b.AdError,payload:{errorMessage:lr.c.CnxMediaNoRenditions}});e=this.Hx(this.settings.renditions,r,this.settings.mediaId)}this.qx=e,this.zx=new Br(this.settings.globalDomUtilsService,this.qx,this.Qv,this.settings.os,this.settings.clickUrl,this.settings.loopAdWhenFinished,this.settings.pauseAdWhenFinished,t,this.settings.inApp),this.Nx.push(this.zx.onVpaidEvent.subscribe(e=>{this.am(e)})),this.zx.initAd(i,r,s,n,o,{slot:this.Jv,videoSlot:this.Qv})}catch(i){this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorInitAdError+`_${i.message}`}})}}startAd(){try{super.startAd(),this.zx.startAd()}catch(e){this.am({type:v.b.AdError,payload:{errorMessage:lr.c.AdaptorStartAdError+`_${e.message}`}})}}stopAd(e){super.stopAd(e),this.zx?this.zx.stopAd(e):Object(g.a)({message:"stopAd",exception:e,level:f.ProtoLoggingLevelEnum.WARNING})}resizeAd(e,t,i){try{this.zx.resizeAd(e,t,i)}catch(e){this.Tm("CnxMediaBidAdaptor","resizeAd",e)}}pauseAd(){try{this.zx.pauseAd()}catch(e){this.Tm("CnxMediaBidAdaptor","pauseAd",e)}}resumeAd(){try{this.zx.resumeAd()}catch(e){this.Tm("CnxMediaBidAdaptor","resumeAd",e)}}expandAd(){try{this.zx.expandAd()}catch(e){this.Tm("CnxMediaBidAdaptor","expandAd",e)}}collapseAd(){try{this.zx.collapseAd()}catch(e){this.Tm("CnxMediaBidAdaptor","collapseAd",e)}}skipAd(){try{super.skipAd(),this.zx.skipAd()}catch(e){this.Tm("CnxMediaBidAdaptor","skipAd",e)}}getAdRemainingTime(){try{return this.zx.getAdRemainingTime()}catch(e){return this.Tm("CnxMediaBidAdaptor","getAdRemainingTime",e),0}}getAdDuration(){try{return this.zx?this.zx.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(e){return this.Tm("CnxMediaBidAdaptor","getAdDuration",e),0}}getAdVolume(){try{return this.zx.getAdVolume()}catch(e){return this.Tm("CnxMediaBidAdaptor","getAdVolume",e),0}}getAdMediaSize(){return{width:this.zx.getAdMediaWidth(),height:this.zx.getAdMediaHeight()}}setAdVolume(e){try{super.setAdVolume(e),this.zx.setAdVolume(e)}catch(e){this.Tm("CnxMediaBidAdaptor","setAdVolume",e)}}get adVideoUrl(){return this.qx}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Ac(){var e;if(!this.settings.pauseAdWhenFinished&&!this.settings.loopAdWhenFinished)try{super.Ac(),cr(this.Nx),null===(e=this.zx)||void 0===e||e.destroy()}catch(e){this.Tm("CnxMediaBidAdaptor","_destroy",e)}}Hx(e,t,i){let r,s;return s=e.filter(e=>e.codec===q.H264),r=Object(Q.c)(t,s.map(e=>e.height)),0<(s=s.filter(e=>e.height===r)).length?`${se.a.endPoints.base.video}${i}/${s[0].file}`:null}}class js{constructor(e){this.settings=e,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();var e=new Bs({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(e)}}(wn=xs=xs||{})[wn.IDLE=0]="IDLE",wn[wn.RUNNING=1]="RUNNING",wn[wn.STOPPING=2]="STOPPING";class Ds{constructor(e){this.Wx=e,this.Jt=xs.IDLE,this.Gx=Promise.resolve()}start(){this.Jt!==xs.IDLE&&this.Jt!==xs.STOPPING||(this.Jt=xs.RUNNING,this.Jx())}stop(){this.Jt=xs.STOPPING}setPromiseNotifier(e){return this.Qx=e,this}setIdleNotifier(e){return this.Xx=e,this}getState(){return this.Jt}Yx(){const e=this.Wx();void 0!==e?this.Gx=e.then(e=>{this.Qx&&this.Qx(e)}).then(()=>{this.Jt===xs.STOPPING&&(this.Jt=xs.IDLE)}):this.Jt=xs.IDLE}Jx(){this.Jt===xs.IDLE?this.Xx&&this.Xx():this.Jt===xs.RUNNING&&(this.Yx(),this.Gx.then(()=>{this.Jx()}))}}class _s{constructor(e,t=1){this.Wx=e,this.Kx=t,this.Zx=[],this.tk(t)}start(){return this.Zx.forEach(e=>{e.start()}),this}stop(){return this.Zx.forEach(e=>{e.stop()}),this}setPromiseNotifier(t){return this.Zx.forEach(e=>{e.setPromiseNotifier(t)}),this}setAllThreadsIdleNotifier(e){return this.ik=e,this.ek(),this}setNumberOfThreads(e){e<=0||(0<(e=(this.Kx=e)-this.Kx)?this.tk(e):e<0&&this.sk(e))}getState(){return this.Zx.reduce((e,t)=>(e[t.getState()]++,e),{[xs.IDLE]:0,[xs.RUNNING]:0,[xs.STOPPING]:0})}tk(t){for(let e=0;e<t;e++){const t=new Ds(this.Wx).setPromiseNotifier(this.Qx);this.Zx.push(t)}}sk(t){t=Math.min(t,this.Zx.length);for(let e=0;e<t;e++)this.Zx.pop().stop()}ek(){const t=()=>{this.getState()[xs.IDLE]===this.Zx.length&&this.ik()};this.Zx.forEach(e=>{e.setIdleNotifier(t)})}}class Fs{constructor(){this.nk=[]}canCall(t,i){return this.nk.every(e=>e.canCall(t,i))}registerRequestForLineItem(t,i){return this.nk.forEach(e=>{e.registerRequestForLineItem(t,i)}),this}registerImpressionForLineItem(t,i){return this.nk.forEach(e=>{e.registerImpressionForLineItem(t,i)}),this}registerCallingValidator(e){return this.nk.push(e),this}registerCallingValidators(e){return e.forEach(e=>{this.registerCallingValidator(e)}),this}destroy(){this.nk.forEach(e=>{e.destroy()})}}i(48);class Ns{constructor(){this.initialized=!1,this.logged=!1,this.startTime=0,this.winIds=[]}}class Us{constructor(){this.adSlotType=f.ProtoAdBreakTypeEnum[f.ProtoAdBreakTypeEnum.PreRoll],this.timeToFirstBid=-1,this.timeToFirstWin=-1,this.timeToFirstStartAd=-1,this.timeToFirstAdImpression=-1,this.numberOfBids=0,this.numberOfWins=0,this.numberOfPostBids=0,this.indexOfWinThatGaveImpression=-1}}class Vs{constructor(){this.metadata=new Ns,this.metrics=new Us}}const qs=new Map;function Hs(e){return qs.has(e)||qs.set(e,new Vs),qs.get(e)}function Ws(e){if(qs.has(e)&&Object(Y.l)([95,5])){const t=qs.get(e);t.metadata.initialized&&!t.metadata.logged&&(t.metadata.logged=!0,Object(g.a)({message:"Preroll_Problem_Logs",exception:JSON.stringify(t.metrics),level:f.ProtoLoggingLevelEnum.INFO}))}}(wn=Es=Es||{}).initialize=function(e){const t=Hs(e);t.metadata.initialized=!0,t.metadata.startTime=(new Date).getTime()},wn.log=Ws,wn.trackBid=function(e){const t=Hs(e);0===t.metrics.numberOfBids&&(t.metrics.timeToFirstBid=(new Date).getTime()-t.metadata.startTime),t.metrics.numberOfBids++},wn.trackStartAd=function(e){const t=Hs(e);-1===t.metrics.timeToFirstStartAd&&(t.metrics.timeToFirstStartAd=(new Date).getTime()-t.metadata.startTime)},wn.trackAdImpression=function(e,t){const i=Hs(e);-1===i.metrics.timeToFirstAdImpression&&(i.metrics.timeToFirstAdImpression=(new Date).getTime()-i.metadata.startTime),i.metrics.indexOfWinThatGaveImpression=i.metadata.winIds.indexOf(t.settings.id),Ws(e)},wn.trackPostBid=function(e){Hs(e).metrics.numberOfPostBids++},wn.trackWin=function(e,t){const i=Hs(e);i.metadata.winIds.push(t.settings.id),0===i.metrics.numberOfWins&&(i.metrics.timeToFirstWin=(new Date).getTime()-i.metadata.startTime),i.metrics.numberOfWins++};class Gs{constructor(e){this.settings=e,this.rk=new Map,this.dv=[],this.ak=!1,this.hk=new qi,this.ck=()=>{const e=this.lk();if(e)return this.uk(e.lineItemList),this.dk(e.lineItemList,e.state).then(()=>{this.fk(e.lineItemList),this.pk()}).catch(()=>{this.fk(e.lineItemList),this.pk()})},this.bk=(e,t)=>this.settings.adCallerYo.getWinningYoScore(t.settings.id)-this.settings.adCallerYo.getWinningYoScore(e.settings.id),this.settings.lineItemList.forEach(e=>{as(e.protoLineItem.creativeType)?e.protoLineItem.timeBetweenRequests=10:e.protoLineItem.timeBetweenRequests=6}),this.dv.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe(()=>{this.vk()}),this.settings.adBidPool.onBidConsumed.subscribe(()=>{this.vk()}),this.settings.adBidPool.onBidLoadingConsumed.subscribe(()=>{this.vk()}),this.settings.adBidPool.onBidReadyConsumed.subscribe(()=>{this.vk()})),this.mk=(new Fs).registerCallingValidators([this.settings.lineItemServices.requestCapsService,this.settings.lineItemServices.impressionCapsService,this.settings.lineItemServices.timeBetweenRequestsService]),this.gk=new _s(this.ck,4),this.settings.lineItemList.find(e=>e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.Rtb)&&this.rk.set(f.ProtoCreativeTypeEnum.Rtb,{auctionPending:!1,caller:new ps(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.settings.lineItemList.find(e=>e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.HeaderBidder)&&this.rk.set(f.ProtoCreativeTypeEnum.HeaderBidder,{auctionPending:!1,caller:new Ts(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler,this.settings.loopAdWhenFinished)}),this.settings.lineItemList.find(e=>e.protoLineItem.creativeType===f.ProtoCreativeTypeEnum.Tam)&&this.rk.set(f.ProtoCreativeTypeEnum.Tam,{auctionPending:!1,caller:new Os(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.gk.setAllThreadsIdleNotifier(()=>{this.settings.lineItemServices.lineItemServicesTimer.start()})}get onFirstAggregatedBatchFinished(){return this.hk.asObservable()}call(e){this.gk.setNumberOfThreads(e.maxParallelCalls),this.yk=e,this.ak=!0,this.vk()}stop(){this.ak=!1,this.gk.stop()}destroy(){this.stop(),this.mk.destroy(),this.rk.forEach(e=>{e.caller.destroy()}),cr(this.dv)}pk(){let t=!0;this.rk.forEach(e=>{e.auctionPending&&(t=!1)}),t&&this.hk.next()}wk(e){return e.filter(e=>!(0<e.aggregators.size)&&!(!as(e.protoLineItem.creativeType)&&(0<e.bids.size||0<e.callers.size))&&this.mk.canCall(e,this.xk())).filter(e=>!this.settings.platformCappedLineItemRepo.isLineItemPlatformCapped(e.protoLineItem.advertiserLineItemId))}vk(){this.ak&&this.gk.start()}lk(){var e=this.wk(this.settings.lineItemList),e=this.settings.adCallerYo.getBestCallable(e,this.yk.stateSettings);if(e&&this.kk(e.lineItemList[0],e.state))return e}kk(e,t){if(as(e.protoLineItem.creativeType))return!0;const i=this.settings.adBidPool.bids.filter(e=>this.settings.adCallerYo.isBidWinnable(e,t,this.settings.lineItemServices.impressionCapsService,this.settings.platformCappedLineItemRepo)),r=this.settings.adBidPool.callingLineItems,s=[...i.map(e=>this.settings.adCallerYo.getWinningYoScore(e.settings.id)),...r.map(e=>this.settings.adCallerYo.getCallingYoScore(e.protoLineItem.advertiserLineItemId))],n=this.settings.adCallerYo.getCallingYoScore(e.protoLineItem.advertiserLineItemId);for(let e=0;e<s.length;e++)if(n<s[e])return!1;return!0}uk(e){this.settings.adBidPool.callingLineItems=[...this.settings.adBidPool.callingLineItems,...e]}fk(t){this.settings.adBidPool.callingLineItems=this.settings.adBidPool.callingLineItems.filter(e=>!Object(p.g)(e,t))}dk(e,t){return as(e[0].protoLineItem.creativeType)?this.Sk(e,t):this.Ok(e[0],t)}Ok(e,t){this.mk.registerRequestForLineItem(e,this.xk());t=this._k(e,t);return this.jk(t),this.Ak(t)}Sk(t,i){const r=this.rk.get(t[0].protoLineItem.creativeType);t.forEach(e=>e.aggregators.add(r.caller)),r.auctionPending=!0;var e={lineItemRequestDataList:t.map(e=>({adManagerLineItem:e,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(e,this.xk())})),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration};return r.caller.request(e).then(e=>{e.bids.length||e.noBids.length||t.forEach(e=>{this.mk.registerRequestForLineItem(e,this.xk())}),t.forEach(e=>e.aggregators.delete(r.caller)),e.noBids.forEach(e=>{this.mk.registerRequestForLineItem(e.lineItem,this.xk()),this.Ik(i,e.lineItem,e.reason,e.requestMetadata)}),e.bids.forEach(e=>this.jk(e)),e.bids.sort(this.bk);e=e.bids.map(e=>(this.mk.registerRequestForLineItem(e.settings.adManagerLineItem,this.xk()),this.Ak(e)));return Promise.all(e)}).catch().then(()=>{r.auctionPending=!1})}Ak(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch(e=>{t.settings.adManagerLineItem.callers.delete(t),this.settings.adCallerYo.registerPreBid(t.settings.id);e=rr[e]||f.ConnatixNoBidReasonEnum.RequestException;return this.Ik(t.settings.callingState,t.settings.adManagerLineItem,e,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()}).then(e=>{t.settings.adManagerLineItem.callers.delete(t),this.Tk(e,Date.now()-t.metrics.fetchStart)}).catch(e=>{void 0!==e&&Object(g.a)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL,throttle:5,sendMaxLog:!0})})}Tk(e,t){var i=e.settings.adManagerLineItem,r=e.settings.requestMetadata;e.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,requestedFloorPrice:r.data.requestedFloorPrice,rtbRequestNumber:r.data.rtbRequestNumber,syncedUser:r.data.syncedUser,prebidJsBidderName:r.data.prebidJsBidderName,customClientPrice:e.settings.cpm,timeSpent:t,dspId:r.data.dspId,encryptedPrice:r.data.encryptedPrice,rtbAdomain:r.data.rtbAdomain,creativeId:e.creativeId,rtbSeatId:r.data.rtbSeatId,cnxBidId:e.settings.requestMetadata.data.cnxBidId}),this.settings.adRequestGatekeeper.addBid(i.protoLineItem.advertiserLineItemId,r.data.requestedFloorPrice),this.settings.adCallerYo.isBidWinnableEverInSession(e,e.settings.callingState)?(Es.trackBid(this.settings.app.config.playerId),e.settings.adManagerLineItem.bids.add(e),this.settings.adBidPool.addBid(e)):this.settings.adCallerYo.registerPreBid(e.settings.id)}Ik(e,t,i,r,s,n){s&&Zi.track(s.adError,this.settings.adMacroReplacer,t.protoLineItem,e),r.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:t.protoLineItem.advertiserLineItemId,publisherLineItemId:t.protoLineItem.publisherLineItemId,partnerCustomHeaders:r.data.partnerCustomHeaders,partnerReason:r.data.partnerReason,requestedFloorPrice:r.data.requestedFloorPrice,rtbRequestNumber:r.data.rtbRequestNumber,syncedUser:r.data.syncedUser,prebidJsBidderName:r.data.prebidJsBidderName,reason:i,timeSpent:n}),this.settings.adRequestGatekeeper.addPrebid(t.protoLineItem.advertiserLineItemId)}_k(e,t){var i=new Zi;er(e.protoLineItem.trackers,i);var r={id:Object(Y.c)(),adManagerLineItem:e,replaceTrackingMacros:!0,requestMetadata:new is,trackersInformation:i,callingState:t,adContainer:this.settings.adContainerMap.get(e.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,cpm:e.protoLineItem.floorPrice||e.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:kr()};switch(e.protoLineItem.creativeType){case f.ProtoCreativeTypeEnum.External:case f.ProtoCreativeTypeEnum.ThirdParty:return e.protoLineItem.adType===f.ProtoAdType.Overlay?new Ms(Object.assign(Object.assign({},r),{url:e.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new ts(Object.assign(Object.assign({},r),{url:e.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer,trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.app.config.pageUrl}));case f.ProtoCreativeTypeEnum.MediaFile:return new js(Object.assign(Object.assign({},r),{clickUrl:e.protoLineItem.mediaCreativeClickUrl,mediaId:e.protoLineItem.mediaCreativeId,renditions:e.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.app.config.isInApp}))}}jk(e){var{creativeType:t,floorPrice:i,successRate:r,advertiserLineItemId:s,lineItemPriority:n}=e.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:t,floorPrice:i,lineItemId:s,priority:n,bidId:e.settings.id,cpm:e.settings.cpm,obfuscatedPrice:e.settings.obfuscatedPrice,successRate:e.settings.successRate||r})}xk(){return(this.yk.stateSettings.currentState||this.yk.stateSettings.predictedState).adOpportunity.id}}const $s="uncategorized";class zs{resetCapsBasedOnExternalEvent(e){for(const t of this.Ck.keys())this.Pk(t,e)&&this.Mk(t,$s)}Pk(e,t){return e.protoLineItem.resetCapType===t}Ek(e){return this.Pk(e,f.ProtoResetCapTypeEnum.TimeCapping)&&0<this.Lk(e)}}class Js{constructor(e){this.Rk=e,this.Bk=new Map}setNumberOfImpressions({value:e,categoryId:t}){Object(k.a)(t)&&this.Rk===f.ProtoResetCapTypeEnum.OpportunityCapping||(t=$s),this.Bk.set(t,e)}getNumberOfImpressions({categoryId:e}){return Object(k.a)(e)&&this.Rk===f.ProtoResetCapTypeEnum.OpportunityCapping||(e=$s),this.Bk.get(e)||0}}class Qs extends zs{constructor(e=Date.now()){super(),this.Dk=e,this.Ck=new Map}canCall(e,t){this.Fk(e);const i=this.Ck.get(e);return void 0===i||0===e.protoLineItem.impressionCap||i.getNumberOfImpressions({categoryId:t})<e.protoLineItem.impressionCap}registerImpressionForLineItem(e,t){let i=this.Ck.get(e);return void 0===i&&(this.Ck.set(e,new Js(e.protoLineItem.resetCapType)),i=this.Ck.get(e),this.Ek(e)&&(i.nextImpressionCapResetTimestamp=this.Uk(this.Lk(e)))),i.setNumberOfImpressions({value:i.getNumberOfImpressions({categoryId:t})+1,categoryId:t}),this}registerRequestForLineItem(e,t){return this}destroy(){this.Ck.clear()}Mk(e,t){this.Ck.get(e).setNumberOfImpressions({value:0,categoryId:t})}Lk(e){return e.protoLineItem.resetImpressionsCapTime*L.f}Fk(e,t=Date.now()){if(this.Ek(e)){const i=this.Ck.get(e);void 0!==i&&this.$k(e,t)&&(i.setNumberOfImpressions({value:0}),i.nextImpressionCapResetTimestamp=this.Uk(this.Lk(e),t))}}$k(e,t){return t>=this.Ck.get(e).nextImpressionCapResetTimestamp}Uk(e,t=Date.now()){e=Math.ceil((t-this.Dk)/e)*e;return this.Dk+e}}class Ys{constructor(e){this.Rk=e,this.Vk=new Map}setNumberOfRequests({value:e,categoryId:t}){Object(k.a)(t)&&this.Rk===f.ProtoResetCapTypeEnum.OpportunityCapping||(t=$s),this.Vk.set(t,e)}getNumberOfRequests({categoryId:e}){return Object(k.a)(e)&&this.Rk===f.ProtoResetCapTypeEnum.OpportunityCapping||(e=$s),this.Vk.get(e)||0}}class Xs extends zs{constructor(e=Date.now()){super(),this.Dk=e,this.allowResetOnTime=!0,this.Ck=new Map}canCall(e,t){this.Fk(e);const i=this.Ck.get(e);return void 0===i||0===e.protoLineItem.requestCap||i.getNumberOfRequests({categoryId:t})<e.protoLineItem.requestCap}registerRequestForLineItem(e,t,i=Date.now()){let r=this.Ck.get(e);return void 0===r&&(this.Ck.set(e,new Ys(e.protoLineItem.resetCapType)),r=this.Ck.get(e),this.Ek(e)&&(r.nextRequestCapResetTimestamp=this.Uk(this.Lk(e)))),r.setNumberOfRequests({value:r.getNumberOfRequests({categoryId:t})+1,categoryId:t}),this}registerImpressionForLineItem(e){return this}getAvailableRequestsForLineItem(e,t){const i=this.Ck.get(e);return void 0===i?e.protoLineItem.requestCap:e.protoLineItem.requestCap-i.getNumberOfRequests({categoryId:t})}restoreOneCapForLineItem(e,t){if(e.protoLineItem.ignoreFilledRequests){const i=this.Ck.get(e);void 0!==i&&(0<(e=i.getNumberOfRequests({categoryId:t}))&&i.setNumberOfRequests({value:e-1,categoryId:t}))}}destroy(){this.Ck.clear()}Mk(e,t){this.Ck.get(e).setNumberOfRequests({value:0,categoryId:t})}Lk(e){return e.protoLineItem.resetRequestsCapTime*L.f}Fk(e,t=Date.now()){if(this.Ek(e)){const i=this.Ck.get(e);void 0!==i&&this.$k(e,t)&&(i.setNumberOfRequests({value:0}),i.nextRequestCapResetTimestamp=this.Uk(this.Lk(e),t))}}$k(e,t){return t>=this.Ck.get(e).nextRequestCapResetTimestamp&&this.allowResetOnTime}Uk(e,t=Date.now()){e=Math.ceil((t-this.Dk)/e)*e;return this.Dk+e}}class Ks{constructor(){this.Ck=new Map}registerRequestForLineItem(e,t,i=Date.now()){let r=this.Ck.get(e);return void 0===r&&(this.Ck.set(e,{}),r=this.Ck.get(e)),r.lastRequestTimestamp=i,this}registerImpressionForLineItem(e){return this}canCall(e,t,i=Date.now()){var r=this.Ck.get(e);return void 0===r||0===e.protoLineItem.timeBetweenRequests||i>=r.lastRequestTimestamp+e.protoLineItem.timeBetweenRequests*L.f}destroy(){this.Ck.clear()}}class Zs{constructor(){this.Nk=null,this.Hk=new qi}start(){return this.qk(),this}stop(){return this.zk(),this}onTimer(){return this.Hk.asObservable()}destroy(){this.zk()}qk(){null===this.Nk&&(this.Nk=setInterval(()=>{this.Hk.next()},500))}zk(){clearInterval(this.Nk),this.Nk=null}}class en extends n.a{constructor(e,t,i,r){super(),this.Wk=e,this.Gk=t,this.Ic=i,this.Jk=r,this.Qk=new qi,this.forceTriggerUpdateState=()=>{[...this.Wk.keys()].forEach(e=>this.Xk(e))},this.Xk=(e,t)=>{this.Yk.set(e,this.Kk(this.Wk.get(e),t))},this.Zk=e=>{this.tS([f.ProtoAdType.Video],e)},this.iS=e=>{this.tS([f.ProtoAdType.Overlay],e)},this.br=()=>{this.tS([f.ProtoAdType.Overlay,f.ProtoAdType.Video])},this.tS=(e,t)=>{e.forEach(e=>this.Xk(e,t)),this.Qk.next()},this.Yk=new Map,this.eS={[f.ProtoAdType.Video]:this.Zk,[f.ProtoAdType.Overlay]:this.iS},this.forceTriggerUpdateState(),this.Wk.forEach((e,t)=>{this.Gk.on(e,this.br),this.Ic.on(e,this.eS[t],{threshold:this.Jk})})}get onContainerStateUpdate(){return this.Qk.asObservable()}getContainerMap(){return this.Wk}getContainerStateMap(){return this.Yk}destroy(){this.Wk.forEach((e,t)=>{this.Gk.off(e,this.br),this.Ic.off(e,this.eS[t])})}Kk(e,t){let i=t;return void 0===i&&(i=this.Ic.check({element:e,threshold:this.Jk})),{width:e.clientWidth,height:e.clientHeight,viewability:i}}}const tn="cnxpl-rf";class rn{constructor(){this.sS=!0,this.nS=new qi,this.rS=[],this.aS=e=>{if(!this.sS){const t=e.target;if(0<t.volume&&(t.volume=0,!t.paused)){const e=t.getAttribute(tn);this.nS.next(e)}e.preventDefault?e.preventDefault():e.returnValue=!1}}}get onVolumeDetected(){return this.nS.asObservable()}enforce(e,t){let i=e;Object(k.c)(e)&&(i=e.contentDocument||e.contentWindow.document),this.sS=!1,Object(p.c)(i.getElementsByTagName("video")).forEach(e=>{this.hS(e,t)})}stopEnforce(){this.sS=!0}clearEnforce(t){try{const i=[];this.rS=this.rS.filter(e=>e.getAttribute(tn)!==t||(i.push(e),!1)),i.forEach(e=>{e.removeAttribute("cnxpl-vl"),e.removeAttribute(tn),e.removeEventListener("volumechange",this.aS)})}catch(t){}}hS(e,t){e&&!e.getAttribute("cnxpl-vl")&&(e.volume=0,e.setAttribute("cnxpl-vl","true"),e.setAttribute(tn,t),e.addEventListener("volumechange",this.aS),this.rS.push(e))}}class sn{constructor(){}oS(e){function t(){}e.Element.prototype.scrollIntoView=t,e.Element.prototype.scrollIntoViewIfNeeded=t,e.scroll=t,e.scrollTo=t,e.scrollBy=t}enforce(e){Object(k.c)(e)&&this.oS(e.contentWindow)}stopEnforce(){}clearEnforce(){}}class nn{constructor(e){this.cS=e=>e.cnxEnfStorage||null,this.de=e;try{this.cS(this.de)||this.lS(this.de)}catch(e){Object(g.a)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}lS(e){Object(S.z)(e.document.head,e,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(e,t){if(Object(k.c)(e))try{e.contentWindow.self===top||e.contentWindow.Function.prototype.cnxInnerTag||e.contentWindow.Object.defineProperty(e.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:t}),e.contentWindow.self===top||e.contentWindow.Object.prototype.cnxInnerTag||e.contentWindow.Object.defineProperty(e.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:t})}catch(e){}}stopEnforce(){}clearEnforce(e){try{const t=this.cS(this.de);t.eventListeners[e]&&(t.eventListeners[e].forEach(e=>{e.element.removeEventListener(e.type,e.handler,e.options)}),t.eventListeners[e]=[]),t.setInterval[e]&&(t.setInterval[e].forEach(e=>this.de.clearInterval(e)),t.setInterval[e]=[]),t.setTimeout[e]&&(t.setTimeout[e].forEach(e=>this.de.clearTimeout(e)),t.setTimeout[e]=[])}catch(e){}}}class on{constructor(){this.uS=["viralgains","serving-sys.com","commercialadsdistributor"],this.dS=["beachfrontmedia","commercialadsdistributor"],this.fS=["commercialadsdistributor"],this.pS=["pixel.clearstream.tv","pixel.clrstm.com"],this.bS=new qi,this.vS=new qi}get onMalwareDetected(){return this.bS.asObservable()}get onBadUriDetected(){return this.vS.asObservable()}enforce(e,t){if(Object(k.c)(e)){this.mS=t;try{this.gS(e),this.yS(e),this.wS(e),this.xS(e)}catch(e){}}}stopEnforce(){}clearEnforce(){}kS(e,t,i,r){e.every(e=>-1===i.indexOf(e))&&!t.getAttribute("cnx")&&(t.setAttribute("cnx","true"),this.vS.next({referenceId:this.mS,enforcementMessage:`${r}-${t}`}))}gS(e){const t=e.getAttribute("src");t&&(this.uS.forEach(e=>{-1<t.indexOf(e)&&this.bS.next({referenceId:this.mS,enforcementMessage:`malware-${e}`})}),this.kS(["//","about:blank","about:self","javascript:"],e,t,"iframe"))}yS(e){Object(p.c)(e.contentDocument.getElementsByTagName("script")).forEach(e=>{const t=e.getAttribute("src");t&&(this.dS.forEach(e=>{-1<t.indexOf(e)&&this.bS.next({referenceId:this.mS,enforcementMessage:`malware-${e}`})}),this.kS(["//"],e,t,"script"))})}wS(e){Object(p.c)(e.contentDocument.getElementsByTagName("a")).forEach(e=>{const t=e.getAttribute("href");t&&this.fS.forEach(e=>{-1<t.indexOf(e)&&this.bS.next({referenceId:this.mS,enforcementMessage:`malware-${e}`})})})}xS(e){Object(p.c)(e.contentDocument.getElementsByTagName("img")).forEach(e=>{const t=e.getAttribute("src");t&&this.pS.forEach(e=>{-1<t.indexOf(e)&&this.bS.next({referenceId:this.mS,enforcementMessage:`malware-${e}`})})})}}class an{constructor(e,t,i){if(this.SS=i,this.OS=null,this._S=new Map,this.jS=nr.None,this.AS=300,this.dv=[],this.IS=new Map,this.Am=new qi,this._S.set(nr.MemoryLeak,new nn(t)),i||this._S.set(nr.ScrollHijack,new sn),!e){const e=new rn;this._S.set(nr.Mute,e),this.dv.push(e.onVolumeDetected.subscribe(e=>{this.TS(sr.VOLUME_DETECTED,e,"")}))}const r=new on;this.dv.push(r.onBadUriDetected.subscribe(e=>{this.TS(sr.BADURI_DETECTED,e.referenceId,e.enforcementMessage)}),r.onMalwareDetected.subscribe(e=>{this.TS(sr.MALWARE_DETECTED,e.referenceId,e.enforcementMessage)})),this._S.set(nr.Malware,r)}get onEnforcerEvent(){return this.Am.asObservable()}registerContainer(e,t){this.IS.get(e)||this.IS.set(e,t)}deregisterContainer(t){this.IS.get(t)&&(this._S.forEach(e=>{e.clearEnforce(this.IS.get(t))}),this.IS.delete(t),this.IS.size||this.stop(nr.All))}start(e){this.SS&&(e^=nr.ScrollHijack),this.jS|=e,null===this.OS&&(this.OS=setInterval(()=>{try{this.IS.forEach((e,t)=>{this.CS(t,e)})}catch(e){}},this.AS))}stop(i){this.jS&=~i,this.jS===nr.None&&(clearInterval(this.OS),this.OS=null),this._S.forEach((e,t)=>{i&t&&e.stopEnforce()})}destroy(){this.stop(nr.All),cr(this.dv),this.IS.forEach((e,t)=>{this.deregisterContainer(t)})}CS(i,r){Object(p.c)(i.getElementsByTagName("iframe")).forEach(e=>{try{this.CS(e,r)}catch(e){}}),this._S.forEach((e,t)=>{this.jS&t&&e.enforce(i,r)})}TS(e,i,t){let r;this.IS.forEach((e,t)=>{e===i&&(r=t)}),this.Am.next({message:t,type:e,detectedContainer:r})}}class ln{constructor(e){this.Jn=e,this.PS=!1,this.MS=void 0,this.ES=[],this.dv=[],this.LS=!1,this.RS=new qi,this.BS=new qi,this.DS=[],this.dv.push(this.Jn.adBidPool.onBidReady.subscribe(()=>{this.FS()}),this.Jn.impressionCapsTimer.onTimer().subscribe(()=>{this.FS()}))}get onAdSelected(){return this.RS.asObservable()}get onAdFinished(){return this.BS.asObservable()}start(e){this.$S=e,this.PS=!0,this.FS()}stop(){this.PS=!1}destroy(){this.stop(),cr(this.dv),this.MS||this.VS()}FS(){var e,t;!this.PS||this.LS||(e=this.NS(this.$S))&&(t=this.HS(e),this.MS&&this.Jn.removeBidIfHigherYoScore&&t?(this.VS(),this.MS.stopAd("removeStartedBid"),this.qS(e)):this.MS||this.qS(e))}qS(e){this.MS=e,this.DS=[],this.Jn.adBidPool.moveBidToStarted(e),this.RS.next(e),this.zS(e),Es.trackStartAd(this.Jn.playerId),e.startAd()}VS(){this.MS&&(cr(this.ES),this.ES=[],this.Jn.adBidPool.consumeBidStarted(this.MS),this.MS=void 0,this.DS=[])}WS(e){e=e.settings.adManagerLineItem;return this.Jn.impressionCapsService.canCall(e,this.$S.adOpportunity.id)}NS(e){var t=this.Jn.adBidPool.bidsReady.filter(e=>this.WS(e));return this.Jn.adImpressionerYo.getBestBid(t,e)}HS(e){return!!this.MS&&this.Jn.adImpressionerYo.getBetterBid(e,this.MS)!==this.MS}GS(e,t){this.LS&&Object(g.a)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${e.creativeId}`,callStack:`${e.adMediaType}`,throttle:1e3,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),this.Jn.adImpressionerYo.registerImpression(e.settings.id,e.settings.adManagerLineItem.protoLineItem.creativeType),Es.trackAdImpression(this.Jn.playerId,e),this.LS=!0,this.Jn.adRequestGatekeeper.addImpression(e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,e.settings.obfuscatedPrice),this.Jn.impressionCapsService.registerImpressionForLineItem(e.settings.adManagerLineItem,this.$S.adOpportunity.id),this.Jn.requestCapsService.restoreOneCapForLineItem(e.settings.adManagerLineItem,this.$S.adOpportunity.id),e.settings.adManagerLineItem.bids.delete(e),this.JS(e,t)}QS(e,t,i,r=!0){this.XS(e,t,i,r),this.Jn.loopAdWhenFinished?e.resumeAd():this.Jn.pauseAdWhenFinished?e.pauseAd():(this.BS.next(e),this.VS(),this.FS())}XS(e,t,i,r=!0){this.LS?this.LS=!1:r&&(this.Jn.adImpressionerYo.registerPostBid(e.settings.id,e.settings.adManagerLineItem.protoLineItem.creativeType,i),this.YS(e,i,t),e.settings.adManagerLineItem.bids.delete(e))}JS(e,t){var i=this.$S.adBreakState,r=Object(k.d)(Object(Q.h)(e.getAdDuration(),2))?Object(Q.h)(e.getAdDuration(),2):0,s=Object(k.d)(Object(Q.h)(e.declaredDurationInSeconds,2))?Object(Q.h)(e.declaredDurationInSeconds,2):0;this.Jn.trackingService.trackVideoAdImpression({adPodSlotPosition:i.adPodSlotIndex,adsourceType:e.adSourceType,advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:e.settings.cpm,encryptedPrice:e.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:e.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:e.settings.requestMetadata.data.rtbAdomain,creativeId:e.creativeId,rtbSeatId:e.settings.requestMetadata.data.rtbSeatId,syncedUser:e.settings.requestMetadata.data.syncedUser,timeSpent:t,vastMediaType:e.adMediaType,dspId:e.settings.requestMetadata.data.dspId,cnxBidId:e.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(t=e.settings.bidLifecycle)||void 0===t?void 0:t.winToAdLoadedTime,startAdToImpressionTime:null===(e=e.settings.bidLifecycle)||void 0===e?void 0:e.startAdToImpressionTime,impressionDuration:r-s,declaredDuration:s,useExploration:this.Jn.explorationMode})}YS(e,t,i){var r=this.$S.adBreakState;Es.trackPostBid(this.Jn.playerId),this.Jn.trackingService.addPostBid({adPodSlotPosition:r.adPodSlotIndex,adsourceType:e.adSourceType,advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:t,loaded:!0,prebidJsBidderName:e.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:e.adMediaType,syncedUser:e.settings.requestMetadata.data.syncedUser,rtbSeatId:e.settings.requestMetadata.data.rtbSeatId,rtbAdomain:e.settings.requestMetadata.data.rtbAdomain,creativeId:e.creativeId,timeSpent:i,dspId:e.settings.requestMetadata.data.dspId,cnxBidId:e.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(e=e.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime})}KS(e,t){0<=this.DS.indexOf(t)&&!this.Jn.pauseAdWhenFinished&&!this.Jn.loopAdWhenFinished?1===Object(Y.l)([99,1])&&Object(g.a)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:f.ProtoLoggingLevelEnum.WARNING,exception:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:e.adMediaType}):(this.DS.push(t),this.Jn.trackingService.trackVideoAdQuartile({advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:t}))}zS(s){const n=Date.now();this.ES.push(s.onVpaidEvent.subscribe(e=>{var t,i=function(e,t){switch(e){case v.b.AdImpression:return t.adImpression;case v.b.AdClickThru:return t.adClick;case v.b.AdStarted:return t.adStarted;case v.b.AdVideoStart:return t.adVideoStart;case v.b.AdVideoFirstQuartile:return t.adQuartileFirst;case v.b.AdVideoMidpoint:return t.adQuartileSecond;case v.b.AdVideoThirdQuartile:return t.adQuartileThird;case v.b.AdVideoComplete:return t.adQuartileFourth;case v.b.AdPaused:return t.adPause;case v.b.AdPlaying:return t.adResume;case v.b.AdSkipped:return t.adSkip;case v.b.AdUserClose:return t.adUserClose;case v.b.AdUserAcceptInvitation:return t.adUserAcceptInvitation;case v.b.AdUserMinimize:return t.adUserMinimize;case v.b.AdError:return t.adError}}(e.type,s.settings.trackers),r=Date.now()-n;switch(i||e.type!==v.b.AdImpression||(this.ZS("AdManager_AdImpressionController_tracker_impression_not_found"),Object(g.a)({sendMaxLog:!1,message:"AdManager_AdImpressionController_tracker_impression_not_found",level:f.ProtoLoggingLevelEnum.FATAL})),Zi.track(i,this.Jn.adMacroReplacer,s.settings.adManagerLineItem.protoLineItem,s.settings.callingState),e.type){case v.b.AdError:this.QS(s,r,e.payload.errorMessage);break;case v.b.AdSkipped:this.QS(s,r,lr.c.AdStopped);break;case v.b.AdStopped:this.QS(s,r,lr.c.AdStopped,null===(t=e.payload)||void 0===t?void 0:t.shouldTrackPostBid);break;case v.b.AdImpression:this.GS(s,r);break;case v.b.AdVideoFirstQuartile:this.KS(s,f.ProtoQuartilesEnum.First);break;case v.b.AdVideoMidpoint:this.KS(s,f.ProtoQuartilesEnum.Second);break;case v.b.AdVideoThirdQuartile:this.KS(s,f.ProtoQuartilesEnum.Third);break;case v.b.AdVideoComplete:this.KS(s,f.ProtoQuartilesEnum.Fourth)}})),this.ES.push(s.onAdViewableImpression.subscribe(e=>{this.Jn.trackingService.trackVideoAdImpressionViewable(e)}))}ZS(e,t){Object(g.a)({message:e,level:f.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,exception:null===t||void 0===t?void 0:t.message,callStack:null===t||void 0===t?void 0:t.stack})}}const dn={[f.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[f.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[f.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class cn{constructor(e,t){this.tO=e,this.Uh=t}replace(e,t,i){this.tO.setAdWidth(i.adMacros.adWidth),this.tO.setAdHeight(i.adMacros.adHeight),this.tO.setAdPosition(dn[i.adMacros.adPostion]),i.mediaMacros.mediaDescription&&this.tO.setVideoDescription(i.mediaMacros.mediaDescription),i.mediaMacros.mediaDuration&&this.tO.setVideoDuration(i.mediaMacros.mediaDuration),i.mediaMacros.mediaId&&this.tO.setVideoId(i.mediaMacros.mediaId),i.mediaMacros.mediaTitle&&this.tO.setVideoTitle(i.mediaMacros.mediaTitle),i.mediaMacros.mediaUrl&&this.tO.setVideoUrl(i.mediaMacros.mediaUrl);i=this.Uh.isConsent(t);this.tO.setGDPR(this.Uh.isConsentRequired()?1:0),this.tO.setConsent(i?1:0),this.tO.setGDPRConsent(this.Uh.getConsentPayload());t=this.Uh.getTrackableUser(),t=this.Uh.isConsentConnatix()&&i?t:void 0;return this.tO.setUUID(t),this.tO.setupMacros(e)}}const hn=30*L.f;class un{constructor(){this.iO=null}onAdRemoved(){this.iO=null,this.eO()}pauseViaUserInteraction(){this.iO&&(this.iO.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.iO&&(this.iO.pausedWithUserInteraction=!1,this.eO())}sO(e){this.iO={currentAd:e,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:hn,lastAdPausedStartedTimestamp:void 0},this.eO()}checkPauseAd(e,t){e&&(null===this.iO&&this.sO(e),t?this.nO(e):this.rO(e))}rO(e){this.aO(e)&&(this.iO.isPaused=!0,this.iO.lastAdPausedStartedTimestamp=Date.now(),e.pauseAd(),this.eO(),this.hO=setTimeout(()=>{e.stopAd("pauseOutOfView"),this.iO=null,this.eO()},this.iO.remainingTimeForAdToBePaused))}nO(e){e.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&e.impressionStarted&&this.iO.isPaused&&!this.iO.pausedWithUserInteraction&&(this.eO(),this.iO.isPaused=!1,this.iO.remainingTimeForAdToBePaused=this.iO.remainingTimeForAdToBePaused-(Date.now()-this.iO.lastAdPausedStartedTimestamp),e.resumeAd())}eO(){clearTimeout(this.hO),this.hO=void 0}aO(e){return e.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&e.impressionStarted&&!this.iO.isPaused&&!this.iO.pausedWithUserInteraction}}function pn(t,i){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new fn(t,i))}}function gn(r){return function(e){for(var t=0,i=r.length;t<i&&!e.closed;t++)e.next(r[t]);e.complete()}}var mn,fn=(vn.prototype.call=function(e,t){return t.subscribe(new yn(e,this.project,this.thisArg))},vn),yn=(di(bn,mn=Ai),bn.prototype.pv=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},bn);function bn(e,t,i){e=mn.call(this,e)||this;return e.project=t,e.count=0,e.thisArg=i||e,e}function vn(e,t){this.project=e,this.thisArg=t}function Pn(e){return e&&"number"==typeof e.length&&"function"!=typeof e}var Sn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function In(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Tn=function(e){if(e&&"function"==typeof e[xi])return s=e,function(e){var t=s[xi]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Pn(e))return gn(e);if(In(e))return i=e,function(t){return i.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,pi),t};if(e&&"function"==typeof e[Sn])return r=e,function(t){for(var e=r[Sn]();;){var i=void 0;try{i=e.next()}catch(e){return t.error(e),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,i,s,e=fi(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function kn(r,s){return new Li(function(e){var t=new bi,i=0;return t.add(s.schedule(function(){i!==r.length?(e.next(r[i++]),e.closed||t.add(this.schedule())):e.complete()})),t})}var An,On,Cn=(di(En,On=Ai),En.prototype.pv=function(e){this.parent.notifyNext(e)},En.prototype.bv=function(e){this.parent.notifyError(e),this.unsubscribe()},En.prototype.vv=function(){this.parent.notifyComplete(),this.unsubscribe()},En),wn=(di(xn,An=Ai),xn.prototype.notifyNext=function(e){this.destination.next(e)},xn.prototype.notifyError=function(e){this.destination.error(e)},xn.prototype.notifyComplete=function(){this.destination.complete()},xn);function xn(){return null!==An&&An.apply(this,arguments)||this}function En(e){var t=On.call(this)||this;return t.parent=e,t}function Ln(t,s,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof s?function(e){return e.pipe(Ln(function(i,r){return((e=t(i,r))instanceof Li?e:new Li(Tn(e))).pipe(pn(function(e,t){return s(i,e,r,t)}));var e},i))}:("number"==typeof s&&(i=s),function(e){return e.lift(new Mn(t,i))})}var Rn,Mn=(Dn.prototype.call=function(e,t){return t.subscribe(new Bn(e,this.project,this.concurrent))},Dn),Bn=(di(jn,Rn=wn),jn.prototype.pv=function(e){this.active<this.concurrent?this.oO(e):this.buffer.push(e)},jn.prototype.oO=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this.active++,this.cO(t)},jn.prototype.cO=function(e){var t=new Cn(this),i=this.destination;i.add(t);e=function(e,t){if(!t.closed)return e instanceof Li?e.subscribe(t):Tn(e)(t)}(e,t);e!==t&&i.add(e)},jn.prototype.vv=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},jn.prototype.notifyNext=function(e){this.destination.next(e)},jn.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this.pv(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},jn);function jn(e,t,i){void 0===i&&(i=Number.POSITIVE_INFINITY);e=Rn.call(this,e)||this;return e.project=t,e.concurrent=i,e.hasCompleted=!1,e.buffer=[],e.active=0,e.index=0,e}function Dn(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}function _n(t,i){return function(e){return e.lift(new Nn(t,i))}}var Fn,Nn=(qn.prototype.call=function(e,t){return t.subscribe(new Un(e,this.predicate,this.thisArg))},qn),Un=(di(Vn,Fn=Ai),Vn.prototype.pv=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},Vn);function Vn(e,t,i){e=Fn.call(this,e)||this;return e.predicate=t,e.thisArg=i,e.count=0,e}function qn(e,t){this.predicate=e,this.thisArg=t}function Hn(t,i){return void 0===i&&(i=!1),function(e){return e.lift(new Gn(t,i))}}var Wn,Gn=(Jn.prototype.call=function(e,t){return t.subscribe(new $n(e,this.predicate,this.inclusive))},Jn),$n=(di(zn,Wn=Ai),zn.prototype.pv=function(e){var t,i=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void i.error(e)}this.nextOrComplete(e,t)},zn.prototype.nextOrComplete=function(e,t){var i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())},zn);function zn(e,t,i){e=Wn.call(this,e)||this;return e.predicate=t,e.inclusive=i,e.index=0,e}function Jn(e,t){this.predicate=e,this.inclusive=t}function Qn(){}function Yn(t,i,r){return function(e){return e.lift(new to(t,i,r))}}var Xn,Kn,Zn,eo,to=(so.prototype.call=function(e,t){return t.subscribe(new io(e,this.nextOrObserver,this.error,this.complete))},so),io=(di(ro,Xn=Ai),ro.prototype.pv=function(e){try{this.lO.call(this.yv,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},ro.prototype.bv=function(e){try{this.uO.call(this.yv,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},ro.prototype.vv=function(){try{this.dO.call(this.yv)}catch(e){return void this.destination.error(e)}return this.destination.complete()},ro);function ro(e,t,i,r){e=Xn.call(this,e)||this;return e.lO=Qn,e.uO=Qn,e.dO=Qn,e.uO=i||Qn,e.dO=r||Qn,ci(t)?(e.yv=e).lO=t:t&&(e.yv=t,e.lO=t.next||Qn,e.uO=t.error||Qn,e.dO=t.complete||Qn),e}function so(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}class no{constructor(e){this.bid=e,this.cancelled=!1,this.fO=new qi,this.pO=!1,this.Ym=this.bid.onVpaidEvent.pipe(_n(e=>e.type===v.b.AdLoaded),Hn(()=>!this.pO),Yn(()=>{this.pO=!0})),this.Km=this.bid.onVpaidEvent.pipe(_n(e=>e.type===v.b.AdError),pn(e=>e.payload.errorMessage),Hn(()=>!this.pO),Yn(()=>{this.pO=!0}))}get onSuccess(){return this.Ym}get onFailure(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Number.POSITIVE_INFINITY,r=null,s=e[e.length-1];return s&&"function"==typeof s.schedule?(r=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(i=e.pop())):"number"==typeof s&&(i=e.pop()),null===r&&1===e.length&&e[0]instanceof Li?e[0]:Ln(Ei,i=void 0===(i=i)?Number.POSITIVE_INFINITY:i)((i=e,r?kn(i,r):new Li(gn(i))))}(this.fO,this.Km)}loadBid(e,t,i,r,s){this.bid.initAd(e,t,i,r,void 0,void 0,s)}cancelLoad(){this.cancelled=!0,this.pO=!0,this.bid.stopAd("cancel"),this.fO.next(lr.c.Cancelled)}}class oo{constructor(e){this.Jn=e,this.bO=new Set,this.vO=new Map,this.dv=[],this.Cc=!1,this.mO=null,this.gO=()=>{if(!this.yO()){const t=this.wO(this.Jn.adBidPool.bids);if(t&&this.xO(t.bid)){const i=new no(t.bid);return this.bO.add(i),this.Jn.adBidPool.moveBidToLoading(t.bid),this.kO(t.bid,i,t.state,this.SO.vastViewMode).catch(e=>{throw this.bO.delete(i),this.Jn.adBidPool.consumeBidLoading(t.bid),t.bid.settings.adManagerLineItem.bids.delete(t.bid),this.Jn.adWinnerYo.registerPostBid(t.bid.settings.id,t.bid.settings.adManagerLineItem.protoLineItem.creativeType,e),this.OO(),i}).then(()=>{this.bO.delete(i),this.Jn.adBidPool.moveBidToReady(t.bid),this.OO()}).catch(e=>{})}}},this.gk=new _s(this.gO,1),this.dv.push(this.Jn.adBidPool.onBid.subscribe(e=>{this.Jn.removeLoadingBids&&(null!==this.mO&&clearTimeout(this.mO),this.mO=setTimeout(()=>{this.mO=null,this._O(this.Jn.adBidPool.bids)},500)),this.OO()}),this.Jn.adBidPool.onBidStarted.subscribe(()=>{this.OO()}),this.Jn.adBidPool.onBidReadyConsumed.subscribe(()=>{this.OO()}),this.Jn.impressionCapsTimer.onTimer().subscribe(()=>{this.OO()}))}isLoadingBids(){return 0<this.bO.size}win(e){this.SO=e,this.gk.setNumberOfThreads(e.maxParallelWins),this.Cc=!0,this.OO()}stop(){this.Cc=!1,this.gk.stop()}destroy(){this.stop(),cr(this.dv),this.vO.forEach(e=>e())}OO(){this.Cc&&this.gk.start()}xO(e){var t=[...Object(p.d)(this.bO).map(e=>e.bid),...this.Jn.adBidPool.bidsReady];if(t.length<=0)return!0;t=this.wO(t);return!t||this.Jn.adWinnerYo.getWinningYoScore(e.settings.id)>this.Jn.adWinnerYo.getWinningYoScore(t.bid.settings.id)}jO(e,t){return e!==t&&!!this.Jn.adWinnerYo.isBetterBid(e,t)}_O(e){if(this.Jn.removeLoadingBids&&this.Cc&&this.yO()){e=this.wO(e);if(e){const t=Object(p.d)(this.bO).sort((e,t)=>this.Jn.adWinnerYo.getWinningYoScore(e.bid.settings.id)-this.Jn.adWinnerYo.getWinningYoScore(t.bid.settings.id))[0];t&&!t.cancelled&&this.jO(e.bid,t.bid)&&t.cancelLoad()}}}yO(){return-1!==this.Jn.maxNumberOfWins&&this.Jn.adBidPool.bidsReady.length+this.bO.size+(this.Jn.adBidPool.bidStarted?1:0)>=this.Jn.maxNumberOfWins}wO(e){return this.Jn.adWinnerYo.getBestBid(e,this.SO.stateSettings,this.Jn.impressionCapsService,this.Jn.platformCappedLineItemRepo)}kO(n,o,a,l){return new Promise((e,t)=>{const i=Date.now(),{width:r,height:s}=a.adContainerState.get(n.settings.adManagerLineItem.protoLineItem.adType);Zi.track(n.settings.trackers.adWin,this.Jn.adMacroReplacer,n.settings.adManagerLineItem.protoLineItem,a),o.onSuccess.subscribe(()=>{e()}),o.onFailure.subscribe(e=>{this.AO(n,e,Date.now()-i),t(e)}),Es.trackWin(this.Jn.playerId,n),o.loadBid(r,s,l,this.Jn.desiredBitRateForWins,a.soundValue)})}AO(e,t,i){var r,s=(null===(r=null===(r=this.SO.stateSettings)||void 0===r?void 0:r.currentState)||void 0===r?void 0:r.adBreakState)||(null===(s=null===(s=this.SO.stateSettings)||void 0===s?void 0:s.predictedState)||void 0===s?void 0:s.adBreakState);Zi.track(e.settings.trackers.adError,this.Jn.adMacroReplacer,e.settings.adManagerLineItem.protoLineItem,e.settings.callingState),Es.trackPostBid(this.Jn.playerId),this.Jn.trackingService.addPostBid({adPodSlotPosition:s.adPodSlotIndex,adsourceType:e.adSourceType,advertiserLineItemId:e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:e.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:t,loaded:!1,prebidJsBidderName:e.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:e.adMediaType,syncedUser:e.settings.requestMetadata.data.syncedUser,rtbSeatId:e.settings.requestMetadata.data.rtbSeatId,rtbAdomain:e.settings.requestMetadata.data.rtbAdomain,creativeId:e.creativeId,timeSpent:i,dspId:e.settings.requestMetadata.data.dspId,cnxBidId:e.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(e=e.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime})}}function ao(e,t){if(Object(p.h)(t.items)&&Array.isArray(e)){const i=Object(p.b)(e,t.items).length;return t.choiceCriteria===f.ProtoChoiceCriteriaEnum.Only?0<i:0===i}const i=Object(p.g)(e,t.items);return t.choiceCriteria===f.ProtoChoiceCriteriaEnum.Only?i:!i}function lo(e,t){return e.some(e=>function(t,i){for(let e=0;e<t.filters.length;e++){const r=t.filters[e],s=i.filter(e=>r.items.includes(e)).length;switch(r.type){case f.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===s)return!1;break;case f.ProtoLineItemContextualTargetingEnum.IncludeAll:if(s!==r.items.length)return!1;break;case f.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(0<s)return!1;break;case f.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(s===r.items.length)return!1}}return!0}(e,t))}(wn=Kn=Kn||{}).isAllowedBySound=function(e,t){return!e.protoLineItem.sound||t.sound},wn.isAllowedByViewability=function(e,t){t=t.adContainerState.get(e.protoLineItem.adType).viewability;return!e.protoLineItem.viewability||t},wn.isAllowedByAdBreakType=function(e,t){return!e.protoLineItem.adBreakSettings||e.protoLineItem.adBreakSettings.adBreakTargeting.some(e=>{if(e.adRollType===t.adBreakState.adBreakType)return function(e,t){switch(e){case f.ProtoLineItemAdBreakTypeEnum.All:return!0;case f.ProtoLineItemAdBreakTypeEnum.AdPod:return t;case f.ProtoLineItemAdBreakTypeEnum.SingleAd:return!t}}(e.adBreakTypeEnum,t.adBreakState.isAdPodBreak)})},wn.isAllowedByMediaTargeting=function(e,t){return!(e.protoLineItem.mediaIdTargeting&&!ao(t.media.mediaId,e.protoLineItem.mediaIdTargeting)||e.protoLineItem.mediaKeywordsTargeting&&!ao(t.media.mediaKeywords,e.protoLineItem.mediaKeywordsTargeting)||e.protoLineItem.mediaLanguageTargeting&&!ao(t.media.mediaLanguage,e.protoLineItem.mediaLanguageTargeting))},wn.isAllowedByContextualTargeting=function(e,t){var{advertiserContextualTargeting:i,publisherContextualTargeting:e}=e.protoLineItem,t=t.media.videoIndexes||[];return!(Object(p.h)(i)&&!lo(i,t)||Object(p.h)(e)&&!lo(e,t))},wn.isAllowedByPlayerSizeTargeting=function(e,t){var i=e.protoLineItem["playerSizeTargetings"],e=t.adContainerState.get(e.protoLineItem.adType)["width"];return!Object(k.f)(i)||!Object(k.d)(e)||(i.sizeChoiceCriteria===f.ProtoSizeChoiceCriteriaEnum.GreaterThan?!Object(k.d)(i.minWidth)||e>=i.minWidth:i.sizeChoiceCriteria===f.ProtoSizeChoiceCriteriaEnum.SmallerThan?!Object(k.d)(i.maxWidth)||e<=i.maxWidth:i.sizeChoiceCriteria!==f.ProtoSizeChoiceCriteriaEnum.Between||!Object(k.d)(i.maxWidth)||!Object(k.d)(i.minWidth)||e>=i.minWidth&&e<=i.maxWidth)},wn.isAllowedByPodTargeting=function(e,t){const i=null===(e=e.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!i)return!0;if(!t.adBreakState.isAdPodBreak)return!0;var r=t.adBreakState.adPodSlotIndex;let s=!0;switch(i.adSlotTargetingType){case f.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(r<i.adSlotPositions[0]||r>i.adSlotPositions[1])&&(s=!1);break;case f.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===i.adSlotPositions.indexOf(r)&&(s=!1)}return i.targetingType===f.ProtoLineItemTargetingTypeEnum.Except&&(s=!s),s},wn.isAllowedRegardingDuration=function(e,t){return!e||0===t||e<=t},wn.isAllowedRegardingSkippability=function(e,t,i){switch(i){case f.ProtoPlayerAdSkippability.IfLongerThan31Sec:if(t===f.ProtoAdSkipMode.Never&&e>D.f)return!1;break;case f.ProtoPlayerAdSkippability.Always:if(t===f.ProtoAdSkipMode.IfLongerThan31Sec&&e&&e<D.f)return!1}return!0};class co{constructor(e,t){this.IO=e,this.TO=t}getCallingYoScore(e){return this.IO.getCallingYoScore(e)}getWinningYoScore(e){return this.IO.getWinningYoScore(e)}getImpressionYoScore(e){return this.IO.getImpressionYoScore(e)}registerBiddingInformation(e){this.IO.registerBiddingInformation(e)}registerPreBid(e){this.IO.registerPreBid(e)}registerImpression(e,t){this.IO.registerImpression(e,t)}registerPostBid(e,t,i){this.IO.registerPostBid(e,t,i)}CO(e,t){return Kn.isAllowedByViewability(e,t)&&Kn.isAllowedBySound(e,t)&&Kn.isAllowedByAdBreakType(e,t)&&Kn.isAllowedByMediaTargeting(e,t)&&Kn.isAllowedByPodTargeting(e,t)&&Kn.isAllowedByContextualTargeting(e,t)&&Kn.isAllowedByPlayerSizeTargeting(e,t)}PO(e,t){var i=e.getAdDuration(),e=e.settings.adManagerLineItem.protoLineItem.skipMode,t=t.adBreakState.sessionMaxAdDuration;return Kn.isAllowedRegardingDuration(i,t)&&Kn.isAllowedRegardingSkippability(i,e,this.TO)}MO(e,t){e=e.getAdDuration(),t=t.adBreakState.remainingAdDuration;return Kn.isAllowedRegardingDuration(e,t)}EO(e,t,i,r){return!r.isLineItemPlatformCapped(e.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)&&i.canCall(e.settings.adManagerLineItem,t.adOpportunity.id)&&this.CO(e.settings.adManagerLineItem,t)&&this.PO(e,t)&&this.MO(e,t)}}class ho extends co{getBestCallable(e,t){return this.LO(e,t.currentState||t.predictedState)}isBidWinnable(e,t,i,r){return this.EO(e,t,i,r)}isBidWinnableEverInSession(e,t){return this.PO(e,t)}LO(e,t){if(t){var i=this.RO(e,t),e=this.BO(i);return e?{state:t,lineItemList:this.DO(e,i)}:void 0}}BO(e){let t=e;return e.some(e=>as(e.protoLineItem.creativeType))&&(t=t.filter(e=>as(e.protoLineItem.creativeType))),this.FO(t)[0]}FO(e=[]){return e.sort((e,t)=>this.getCallingYoScore(t.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(e.protoLineItem.advertiserLineItemId))}RO(e,t){return e.filter(e=>this.CO(e,t))}DO(e,t){const i=e.protoLineItem["creativeType"];return as(i)?this.FO(t.filter(e=>i===e.protoLineItem.creativeType)):[e]}}class uo extends co{getBestBid(e,t){return this.UO(e,t)}getBetterBid(e,t){return this.getImpressionYoScore(e.settings.id)>this.getImpressionYoScore(t.settings.id)?e:t}UO(e,t){return[...e].sort((e,t)=>this.getImpressionYoScore(t.settings.id)-this.getImpressionYoScore(e.settings.id))[0]}}class po extends co{getBestBid(e,t,i,r){e=e.filter(e=>this.EO(e,t.currentState||t.predictedState,i,r));return this.$O(e,t.currentState||t.predictedState,i,r)}isBetterBid(e,t){return this.getWinningYoScore(e.settings.id)>this.getWinningYoScore(t.settings.id)}$O(e,t,i,r){r=this.VO(e,t,i,r);if(r)return{state:t,bid:r}}VO(e,t,i,r){return[...e].filter(e=>this.EO(e,t,i,r)).sort((e,t)=>this.getWinningYoScore(t.settings.id)-this.getWinningYoScore(e.settings.id))[0]}}class go{constructor(e){this.Jn=e,this.NO=new qi,this.HO=!1,this.qO=!1,this.zO=null,this.WO=!1,this.GO=(e,t)=>this.Jn.yoScoreManager.getCallingYoScore(t.protoLineItem.advertiserLineItemId)-this.Jn.yoScoreManager.getCallingYoScore(e.protoLineItem.advertiserLineItemId),this.HO=e.locked,e.adBidPool.onBid.subscribe(()=>{this.HO||this.JO()})}get onAuctionEnd(){return this.NO.asObservable()}startAuction(e){this.qO=!1,0!==e||this.HO||null!==this.zO?this.JO()||(this.WO=!1,this.QO(),this.zO=setTimeout(()=>{this.WO=!0,this.HO||this.NO.next()},e)):this.NO.next()}lock(){this.HO=!0}unlock(){this.HO=!1,this.qO||(this.WO?this.NO.next():this.JO())}cancel(){this.qO=!0,this.QO()}QO(){clearTimeout(this.zO),this.zO=null}JO(){if(this.qO)return!1;this.Jn.adBidPool.bids.sort((e,t)=>this.Jn.yoScoreManager.getWinningYoScore(t.settings.id)-this.Jn.yoScoreManager.getWinningYoScore(e.settings.id));var e=this.Jn.adBidPool.bids[0];if(!e)return!1;this.Jn.adBidPool.callingLineItems.sort(this.GO);var t=this.Jn.adBidPool.callingLineItems[0],i=this.Jn.yoScoreManager.getWinningYoScore(e.settings.id),e=this.Jn.yoScoreManager.getCallingYoScore(null===t||void 0===t?void 0:t.protoLineItem.advertiserLineItemId);return(!t||e<=i)&&(this.NO.next(),this.QO(),!0)}}class mo{constructor(e){this.protoLineItem=e,this.allowedSlots=[],this.bids=new Set,this.callers=new Set,this.aggregators=new Set}}const fo="cnx-ad-slot";class yo{constructor(e,t){this.parentContainer=e,this.bg=t,this.isImaSlot=!1,this.slotsContainer=this.bg.createElementByString('<div class= "cnx-ad-bid-slot"></div>'),this.adSlot=this.bg.createElementByString(`<div class="${fo}"></div>`),this.videoSlot=this.bg.createElementByString(`<video class="${fo} cnx-ad-video-slot"></video>`),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.slotsContainer.appendChild(this.videoSlot),this.slotsContainer.appendChild(this.adSlot),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}sanitize(){}}class bo extends yo{constructor(){super(...arguments),this.isImaSlot=!0,this.XO=!1,this.YO={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return vr.fetchImaSdk(window,!0).then(e=>this.KO(e))}destroy(){this.YO.imaAdsLoader&&this.YO.imaAdsLoader.destroy(),this.YO.imaAdDisplayContainer&&this.YO.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.YO.imaAdsLoader.contentComplete(),super.sanitize()}KO(e){if(this.XO)return this.YO;e.settings.setDisableCustomPlaybackForIOS10Plus(!0);var t=this.ZO(e),i=this.t_(e,t);return this.YO={imaSdk:e,imaAdDisplayContainer:t,imaAdsLoader:i},this.XO=!0,this.YO}ZO(e){const t=new e.AdDisplayContainer(this.adSlot,this.videoSlot);return t.initialize(),t}t_(e,t){const i=new e.AdsLoader(t);return i.getSettings().setVpaidMode(e.ImaSdkSettings.VpaidMode.INSECURE),i}}class vo{constructor(t){this.settings=t,this.i_=new Set,this.e_=new Set,this.s_=[10,15,20],this.n_=0,vr.preloadImaSdk(window);for(let e=1;e<=3;e++){const i=new bo(t.slot,this.settings.globalDomUtilsService);i.fetchImaDependencies(),this.i_.add(i)}}requestAdSlot(e){e=new yo(e,this.settings.globalDomUtilsService);return this.r_(e),this.a_(),e}requestAdSlotIma(e){let t=this.h_();return t=t||new bo(e,this.settings.globalDomUtilsService),this.r_(t),this.a_(),t}destroyAdSlot(e){this.e_.delete(e),e.destroy()}recycleAdSlot(e){this.e_.delete(e),this.o_(e)?(e.sanitize(),this.i_.add(e)):this.destroyAdSlot(e)}o_(e){return e.isImaSlot}h_(){let t=null;return this.i_.forEach(e=>{this.o_(e)&&null===t&&(t=e)}),t}r_(e){this.i_.delete(e),this.e_.add(e)}a_(){var e=this.i_.size+this.e_.size;e===this.s_[this.n_]&&(this.c_(this.s_[this.n_]),e===this.s_[this.s_.length-1]&&this.s_.push(this.s_[this.s_.length-1]+20),this.n_++)}c_(e){Object(g.a)({message:"AdSlotContainerRecycler_slotcount",exception:`${e}`,callStack:"",level:f.ProtoLoggingLevelEnum.INFO,throttle:20,sendMaxLog:!0})}}function Po(e){return[e-(e-e%100),e-e%100]}function So(e,t=!1){if(t)return Math.random();var{successRate:i,cpm:t,priority:e}=e;0===i&&Math.random();return+t+D.h*e}class Io{constructor(e,t){this.l_=t,this.u_=this.d_(e)}registerBiddingInformation(e){var t=function(e){switch(e.creativeType){case f.ProtoCreativeTypeEnum.Tam:case f.ProtoCreativeTypeEnum.Rtb:return(e.obfuscatedPrice+D.d)*D.c;case f.ProtoCreativeTypeEnum.HeaderBidder:return e.cpm;default:return e.floorPrice}}(e),{priority:i,successRate:r,lineItemId:s,bidId:n}=e,o=as(e.creativeType)?So({cpm:t,priority:i,successRate:r},this.l_):this.getCallingYoScore(e.lineItemId);this.f_(s,n,o)}registerPreBid(e){this.p_(e)}registerImpression(e,t){this.p_(e),as(t)||this.b_(e)}registerPostBid(e,t,i){this.p_(e),as(t)||i===lr.c.Cancelled||this.v_(e)}getCallingYoScore(e){e=this.m_(e);return e?e.yoScore:0}getWinningYoScore(e){const t=this.g_(e);return t?t.bidMap.get(e):(Object(g.a)({message:"YoScoreManager_getWinningYoScore_error",exception:`bid was not yet registered: ${e}`,level:f.ProtoLoggingLevelEnum.WARNING}),0)}getImpressionYoScore(e){return this.getWinningYoScore(e)}v_(e){var t=this.g_(e);t&&(e=(e=Po(t.yoScore))[1]+e[0]*D.i,this.y_(t,e))}b_(e){var t=this.g_(e);t&&(e=(e=Po(t.yoScore))[1]+e[0]*D.j,this.y_(t,e))}y_(e,t){e&&(e.yoScore=t)}f_(e,t,i){const r=this.m_(e);r&&(e=this.w_(r),!this.l_||r.bidMap.has(t)||-1===e?this.x_(r,t)&&r.bidMap.set(t,i):r.bidMap.set(t,e))}w_(e){e=[...e.bidMap.values()];return Object(p.h)(e)?e[0]:-1}x_(e,t){return!this.l_||!e.bidMap.has(t)}d_(e){return e.map(e=>{var{floorPrice:t,lineItemPriority:i,successRate:r,advertiserLineItemId:s,creativeType:e}=e;return{lineItemId:s,yoScore:as(e)?Math.random():So({cpm:t,priority:i,successRate:r},this.l_),bidMap:new Map}})}m_(t){return this.u_.find(e=>e.lineItemId===t)}g_(t){return this.u_.find(e=>e.bidMap.has(t))}p_(e){if(e){const t=this.g_(e);t&&0!==t.bidMap.size&&t.bidMap.delete(e)}}}(wn=Zn=Zn||{})[wn.Default=0]="Default",wn[wn.Prefetch=1]="Prefetch";class To{constructor(e){this.Jn=e,this.k_=!1,this.S_=!1,this.dv=[],this.O_=null,this.__=!1,this.Vv=new qi,this.j_=new qi,this.A_=!1,this.I_=new ai,this.T_=new un,this.Jn.app.services.TrackingService.addPlatformCappedLineItemSubscriber(this),this.Jn.app.services.TrackingService.setImpressionRevenueSubscriber(this),this.Jn.app.services.TrackingService.startBidRequests();var t=this.Jn.lineItemList.map(e=>new mo(e)),i=new Io(this.Jn.lineItemList,this.Jn.app.config.explorationMode);this.C_=new Zs,this.P_=new Qs,this.M_=new Xs,this.E_=new Ks,this.Eb=new en(this.Jn.adContainerMap,this.Jn.app.services.ResizeObserver,this.Jn.app.services.ViewabilityService,D.g);e=new vo({globalDomUtilsService:this.Jn.app.services.GlobalDomUtilsService,recycleAdSlots:!0,slot:this.Eb.getContainerMap().get(f.ProtoAdType.Video)});this.L_=new Qi,this.R_=new go({adBidPool:this.L_,locked:!0,yoScoreManager:i}),this._w=new oi,this.Sw=new cn(this.Jn.app.services.MacrosService,this.Jn.app.services.UserManagerService),this.B_=new Gs({adBidPool:this.L_,adCallerYo:new ho(i,this.Jn.skipAdsSettings.adSkippability),adContainerMap:this.Eb.getContainerMap(),adMacroReplacer:this.Sw,amazonSlotId:this.Jn.amazonTamSlotId,app:this.Jn.app,isOutstream:this.Jn.outstream,lineItemList:t,schainSettings:this.Jn.pbjsSchainSettings,skipAdSettings:this.Jn.skipAdsSettings,trackingService:this.Jn.app.services.TrackingService,lineItemServices:{impressionCapsService:this.P_,lineItemServicesTimer:this.C_,requestCapsService:this.M_,timeBetweenRequestsService:this.E_},adRequestGatekeeper:this._w,platformCappedLineItemRepo:this.I_,adEnforcer:new an(this.Jn.app.config.isMobile,Object(S.t)(this.Jn.adContainerMap.get(f.ProtoAdType.Video)),this.Jn.disableScrollHijackEnforcement),pauseAdWhenFinished:this.Jn.pauseAdWhenFinished,loopAdWhenFinished:this.Jn.loopAdWhenFinished,os:this.Jn.app.config.os.os,adSlotContainerRecycler:e}),this.D_=new oo({adBidPool:this.L_,adWinnerYo:new po(i,this.Jn.skipAdsSettings.adSkippability),desiredBitRateForWins:1,maxNumberOfWins:-1,removeLoadingBids:!1,trackingService:this.Jn.app.services.TrackingService,impressionCapsService:this.P_,impressionCapsTimer:this.C_,platformCappedLineItemRepo:this.I_,adMacroReplacer:this.Sw,playerId:this.Jn.app.config.playerId}),this.F_=new ln({adBidPool:this.L_,adImpressionerYo:new uo(i,this.Jn.skipAdsSettings.adSkippability),impressionCapsService:this.P_,impressionCapsTimer:this.C_,requestCapsService:this.M_,playerSkippability:this.Jn.skipAdsSettings.adSkippability,removeBidIfHigherYoScore:!1,trackingService:this.Jn.app.services.TrackingService,adRequestGatekeeper:this._w,pauseAdWhenFinished:this.Jn.pauseAdWhenFinished,loopAdWhenFinished:this.Jn.loopAdWhenFinished,adMacroReplacer:this.Sw,explorationMode:this.Jn.app.config.explorationMode,playerId:this.Jn.app.config.playerId}),this.dv.push(this.R_.onAuctionEnd.subscribe(()=>{this.k_=!0,this.U_()}),this.Eb.onContainerStateUpdate.subscribe(()=>{var e,t,i;this.O_&&({width:e,height:t,viewability:i}=this.V_(),this.N_(i),this.O_.resizeAd(e,t,this.H_)),this.S_&&this.q_(),this.k_&&this.U_()}),this.F_.onAdSelected.subscribe(e=>{this.O_=e,this.z_(),e.setAdVolume(this.W_.sound)}),this.F_.onAdFinished.subscribe(e=>{this.G_()}),this.L_.onBidReady.subscribe(e=>{this.A_&&(this.B_.stop(),this.S_=!1)}));const r=this.B_.onFirstAggregatedBatchFinished.subscribe(()=>{this.R_.unlock(),r.unsubscribe()})}get onVpaidEvent(){return this.Vv.asObservable()}get onImpressionRevenueEvent(){return this.j_.asObservable()}setAdVolume(e){this.O_&&(this.J_(e),this.O_.setAdVolume(e))}setAdViewMode(e){var t,i;this.O_&&(this.H_=e,{width:t,height:i}=this.V_(),this.O_.resizeAd(t,i,e))}stopAd(e){this.O_&&this.O_.stopAd(e)}pauseAd(e){this.O_&&this.O_.pauseAd(),e&&this.T_.pauseViaUserInteraction()}resumeAd(e){this.O_&&this.O_.resumeAd(),e&&this.T_.resumeViaUserInteraction()}skipAd(){this.O_&&(this.O_.setAdVolume(0),this.O_.skipAd())}getCurrentAdMetadata(){if(this.O_)return{advertiserLineItemId:this.O_.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.O_.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.O_.settings.adManagerLineItem.protoLineItem.adType,duration:this.O_.getAdDuration(),adSkipMode:this.O_.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.O_.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}enableImpressions(e){this.disablePredict(),this.A_=!1,this.Q_(e),this.W_=e,this.X_||(this.X_=this.W_),this.M_.allowResetOnTime=!0,this.Eb.forceTriggerUpdateState(),this.Y_(e),this.S_=!0,this.q_(),e.adOpportunity&&!e.adOpportunity.startedAuctionWithTimeout&&e.adOpportunity.startAuctionWithTimeout(),this.R_.startAuction(0)}disableImpressions(){this.k_&&(this.R_.cancel(),this.F_.stop(),this.B_.stop(),this.k_=!1,this.S_=!1,this.O_&&!this.__&&this.Jn.app.config.isInApp&&this.O_.stopAd("inApp_disable"))}enablePredict(e,t){if(!(0<this.L_.bidsReady.length)){switch(this.W_=null,this.A_=!0,this.X_=e,this.X_.predictType=t){case Zn.Prefetch:this.M_.allowResetOnTime=!1;break;case Zn.Default:this.M_.allowResetOnTime=!0}this.S_=!0,this.q_()}}disablePredict(){this.A_&&(this.B_.stop(),this.S_=!1)}setPlatformCappedLineItemIdList(e){this.I_.addPlatformCappedLineItemIdList(e)}notifyImpressionRevenue(e){this.j_.next(e)}getAdMediaSize(){if(this.O_){var e=this.O_.getAdMediaSize().width,t=this.O_.getAdMediaSize().height,{widthRatio:i,heightRatio:r}=Object(Q.b)(e,t);return{width:e,height:t,widthRatio:i,heightRatio:r,adType:this.O_.settings.adManagerLineItem.protoLineItem.adType}}}destroy(){this.disableImpressions(),cr(this.dv),this.B_.destroy(),this.D_.destroy(),this.F_.destroy(),this.C_.destroy(),this.O_&&(this.K_(),this.O_.stopAd("adManagerDestroy"),this.G_()),this.Jn.app.services.TrackingService.removePlatformCappedLineItemSubscriber(this),this.Jn.app.services.TrackingService.unsubscribeToImpressionRevenue(this)}isLoadingAds(){return!!this.O_||!!this.D_.isLoadingBids()}U_(){(this.W_||this.X_)&&this.W_&&this.F_.start(this.Z_(this.W_))}q_(){this.B_.call(this.tj()),this.D_.win(this.ij())}tj(){return{maxParallelCalls:5,stateSettings:{currentState:this.Z_(this.W_),predictedState:this.ej(this.X_)}}}ij(){return{desiredBitRate:1,maxParallelWins:10,vastViewMode:(this.W_||this.X_).vastViewMode,stateSettings:{currentState:this.Z_(this.W_),predictedState:this.ej(this.X_)}}}ej(e){if(e){let i;return e.predictType===Zn.Prefetch?(i=new Map,this.Eb.getContainerStateMap().forEach((e,t)=>{i.set(t,Object.assign(Object.assign({},e),{viewability:!0}))})):i=this.Eb.getContainerStateMap(),{clickToPlay:e.clickToPlay,media:e.mediaMetada,sound:!!e.sound,soundValue:e.sound,adContainerState:i,adBreakState:e.adBreakState,adOpportunity:e.adOpportunity}}}Z_(e){if(e)return{clickToPlay:e.clickToPlay,media:e.mediaMetada,sound:!!e.sound,soundValue:e.sound,adContainerState:this.Eb.getContainerStateMap(),adBreakState:e.adBreakState,adOpportunity:e.adOpportunity}}z_(){var e;this.Vv.next({type:v.b.AdLoaded,payload:null===(e=this.O_.settings.adLoadedPayload)||void 0===e?void 0:e.payload}),this.sj=this.O_.onVpaidEvent.subscribe(e=>{if(e.type===v.b.AdImpression){this.__=!0;const e=this.V_()["viewability"];this.N_(e)}this.Vv.next(e)})}V_(){return this.Eb.getContainerStateMap().get(this.O_.settings.adManagerLineItem.protoLineItem.adType)}K_(){this.sj&&(this.sj.unsubscribe(),this.sj=null)}G_(){this.__=!1,this.T_.onAdRemoved(),this.O_=null,this.K_()}N_(e){this.T_.checkPauseAd(this.O_,e)}Y_(e){const t=[this.P_,this.M_];e.newContent&&t.forEach(e=>{e.resetCapsBasedOnExternalEvent(f.ProtoResetCapTypeEnum.ContentCapping)})}J_(e){var t=this.O_.getAdVolume();let i=null;0===t&&0<e?i=this.O_.settings.trackers.adUnmute:0<t&&0===e&&(i=this.O_.settings.trackers.adMute),i&&Zi.track(i,this.Sw,this.O_.settings.adManagerLineItem.protoLineItem,this.Z_(this.W_||this.X_))}Q_(e){var t=this.Jn.app.config["playerId"],i=e["adOpportunity"],e=e.adBreakState["adBreakType"];i&&e===f.ProtoAdBreakTypeEnum.PreRoll&&Es.initialize(t),e!==f.ProtoAdBreakTypeEnum.PreRoll&&Es.log(t)}}class ko{constructor(){this.nj=Object(Y.c)(),this.rj=!1}get id(){return this.nj}get startedAuctionWithTimeout(){return this.rj}startAuctionWithTimeout(){this.rj=!0}}const Ao={[f.ProtoAdSlotsEnum.PreRoll]:f.ProtoAdBreakTypeEnum.PreRoll,[f.ProtoAdSlotsEnum.MidRoll]:f.ProtoAdBreakTypeEnum.MidRoll,[f.ProtoAdSlotsEnum.PostRoll]:f.ProtoAdBreakTypeEnum.PostRoll};class Oo extends n.a{constructor(e,t,i,r,s,n=!1,o,a,l,d,c,h,u,p,g){super(),this.mediator=e,this.aj=t,this.hj=i,this.kw=r,this.Ob=s,this.oj=n,this.Sb=a,this.bx=l,this.cj=c,this.jg=h,this.lj=u,this.Cl=p,this._g=g,this.dv=[],this.uj=!1,this.dj=!1,this.Ow=new Map,this.fj=!1;let m=f.ProtoAdBreakTypeEnum.MidRoll;this.Cl.forEach(e=>{e.types.some(e=>e===f.ProtoAdBreakTypeEnum.PreRoll)&&(m=f.ProtoAdBreakTypeEnum.PreRoll)});g=this.pj(this.Sb.getMaxAdSlotDuration(),m);this.W_={mediaMetada:{},clickToPlay:!1,adOpportunity:new ko,newContent:!1,sound:0,vastViewMode:v.a.Normal,adBreakState:g}}get adInWin(){return this.Pb.isLoadingAds()}enableAds(){this.uj=!0,this.bj(),this.mediator.publish(this,w.AdsEnabled)}disableAds(e){this.uj=!1,this.Pb&&(this.Pb.disableImpressions(),this.fj||e!==j.TimeoutBetweenAds||this.Pb.enablePredict(this.W_,Zn.Default))}updateFilterConfig(e){this.W_.mediaMetada.mediaId=e.mediaId,this.W_.mediaMetada.mediaLanguage=e.mediaLanguage,this.W_.mediaMetada.mediaKeywords=e.mediaKeywords;e=Object.assign(this.W_.mediaMetada,e);this.bj({mediaMetada:e})}userInteraction(e){this.bj({clickToPlay:!0})}newAdOpportunity(){this.bj({adOpportunity:this.fj?this.W_.adOpportunity:new ko}),this.vj()}initAd(e,t,i,r,s,n){n.forEach(e=>{this.Ow.set(e.type,e.container),this.Ow.get(f.ProtoAdType.Overlay)||this.Ow.set(f.ProtoAdType.Overlay,this.Ow.get(f.ProtoAdType.Video))}),this.Mb(),this.dj=!0,this.bj({sound:s})}setAdVolume(e){var t;null===(t=this.Pb)||void 0===t||t.setAdVolume(e),this.bj({sound:e})}resizeAd(e,t,i){var r;this.mj!==i&&(this.setVastViewMode(i),null===(r=this.Pb)||void 0===r||r.setAdViewMode(i))}stopAd(e){var t;null===(t=this.Pb)||void 0===t||t.stopAd(e)}pauseAd(e){var t;null===(t=this.Pb)||void 0===t||t.pauseAd(e)}resumeAd(e){var t;null===(t=this.Pb)||void 0===t||t.resumeAd(e)}skipAd(){var e;null===(e=this.Pb)||void 0===e||e.skipAd()}getAdMediaSize(){var e;return null===(e=this.Pb)||void 0===e?void 0:e.getAdMediaSize()}getCurrentAdClickTrackingProperties(){var{publisherLineItemId:e,advertiserLineItemId:t}=null===(t=this.Pb)||void 0===t?void 0:t.getCurrentAdMetadata();return{publisherLineItemId:e,advertiserLineItemId:t}}getAdDuration(){return this.Pb.getCurrentAdMetadata().duration}getCurrentAdType(){return this.Pb.getCurrentAdMetadata().adType}getLastAdSlot(e){e=this.Ow.get(e);return{height:e.clientHeight,width:e.clientWidth}}updatePodRemainingTime(e){var t;e<=0||(t=this.W_.adBreakState,Math.round(e/L.f)>t.remainingAdDuration||this.bj({adBreakState:this.pj(e,t.adBreakType)}))}onAdStateChange(e,t){e=Ao[e];this.bj({adBreakState:this.pj(t,e)})}onContentChange(){this.bj({newContent:!0})}setVastViewMode(e){this.mj=e,this.gj({vastViewMode:e})}destroy(){cr(this.dv)}bj(e){this.gj(e),this.uj&&this.dj&&(this.Pb.enableImpressions(this.W_),this.yj())}gj(e){Object.assign(this.W_,e),this.W_.adBreakState=this.pj(this.W_.adBreakState.remainingAdDuration,this.W_.adBreakState.adBreakType)}yj(){this.gj({clickToPlay:!1,newContent:!1})}pj(e,t){return{isAdPodBreak:this.Sb.isCurrentBreakInPod(),adPodSlotIndex:this.Sb.isCurrentBreakInPod()?this.Sb.getNextSlotIndex():0,maxAdDuration:Math.round(this.Sb.getMaxAdSlotDuration()/L.f||180),remainingAdDuration:Math.round(e/L.f),sessionMaxAdDuration:Math.round(this.Sb.getMaxAdSlotPossibleDuration()/L.f),adBreakType:t}}Mb(){this.Pb=new To({adBreakHelper:this.Sb,adContainerMap:this.Ow,amazonTamSlotId:this.bx,app:this.Ob,lineItemList:this.aj.lineItems,outstream:this.oj,pbjsSchainSettings:this.hj,prerollTimeMs:this.cj,skipAdsSettings:this.kw,disableScrollHijackEnforcement:!this.aj.disableScrollHijackEnforcement,pauseAdWhenFinished:this.jg,loopAdWhenFinished:this._g}),this.dv.push(this.Pb.onVpaidEvent.subscribe(e=>{switch(e.type){case v.b.AdLoaded:this.wj(e);break;case v.b.AdImpression:this.xj(e);break;case v.b.AdVideoStart:case v.b.AdError:this.mediator.publish(this,e.type,{payload:e.payload});break;default:this.mediator.publish(this,e.type,{payload:{}})}})),this.Pb.onImpressionRevenueEvent.subscribe(e=>{this.mediator.publish(this,A.b.ImpressionPrice,{payload:e})}),this.lj===f.ProtoAdPlaybackMode.ScrollToPlay&&this.kj()}kj(){this.fj=!0,this.Pb.enablePredict(this.W_,Zn.Prefetch)}vj(){this.fj=!1}wj(e){var t={payload:{adSkipMode:e.payload.adSkipMode,adLoadedData:{skipOffset:e.payload.adLoadedData.skipOffset}}};this.mediator.publish(this,e.type,t)}xj(e){var{adId:t,adVideoUrl:i,creativeId:r,name:s,length:n,imaMetadata:o,moatTrackingEnabled:a}=e.payload.adSourceData,l=this.Pb.getCurrentAdMetadata(),l={payload:{adSkipMode:e.payload.adSkipMode,adSourceData:{moatTrackingEnabled:a,adId:t,length:n,imaMetadata:o,adVideoUrl:i,creativeId:r,name:s},clickThroughUrl:e.payload.clickThroughUrl,customAdData:{ADVERTISER:null===(s=e.payload.customAdData)||void 0===s?void 0:s.ADVERTISER,CAMPAIGN_ID:null===(s=e.payload.customAdData)||void 0===s?void 0:s.CAMPAIGN_ID,CREATIVE_ID:e.payload.customAdData.CREATIVE_ID},adDuration:e.payload.adSourceData.length,selectedAdSlot:this.Ow.get(l.adType)}};this.mediator.publish(this,e.type,l)}}const Co={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape"},wo={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},xo={VideoSizeSlot:"cnx-ad-video-size-slot"},Eo={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out",SlideDown:"cnx-top-title-slide-down",SlideInitial:"cnx-top-title-slide-initial"};class Lo extends Xt{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n)}getNewAdManager(){var e={adSkippability:this.la.adSkippability,skipAdAfter:this.la.skipAdAfter};return new Oo(this,this.la.lineItemSettings,this.la.supplyChainSettings,e,this.Ob,!1,this.la.adSkippability,this.Sb,this.la.amazonTamSlotId,this.la.global,this.la.preRollBreak,this.la.pauseAdWhenFinished,this.la.adPlaybackMode,this.la.adBreaks,this.la.loopAdWhenFinished)}Mb(e,t,i){this.Pb.initAd(e,t,this.Cb,1,i,[{container:this.Eb,width:this.Eb.offsetWidth,height:this.Eb.offsetHeight,type:f.ProtoAdType.Overlay},{container:this.Sj,width:this.Sj.offsetWidth,height:this.Sj.offsetHeight,type:f.ProtoAdType.Video}])}Jb(){this.Rb=new zt(this,this.Ob.services.GlobalDomUtilsService,this.Ob.services.ViewabilityService,this.Ob.services.InteractionService,this.xb,(new Qt).template),this.Rb.hide()}Oj(){this.Sj=this.Wb(xo.VideoSizeSlot),this.zb(this.Sj),this._b.push(this.Sj)}Gb(){super.Gb(),this.Oj()}Fb(e){super.Fb(e),e===this.Sj&&Object(S.a)(this.xb,l.g.AdFullSize)}Nb(){super.Nb(),this.subscribe(P[P.SkipAd],this.Rb,()=>this._j())}_j(){this.skipAd(),this.userInteraction(!0)}updateContinueReadingCard(){var e=this.Pb.getAdMediaSize();Object(k.a)(e)&&(this.Xb(this.Pb.getAdMediaSize())?this.Rb.showContinueReadingCard(this.Eb):this.Rb.hideContinueReadingCard(this.Eb))}}const Ro={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",CloseButtonClicked:"closeButtonClicked",GeneralClickInteraction:"generalClickInteraction"},Mo={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},Bo=Object.assign(Object.assign({},o.a),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),jo={SlideTransitionStart:"slideTransitionStart",SlideChanged:"slideChanged",SlideTransitionEnd:"slideTransitionEnd",SlideTimeUpdate:"slideTimeUpdate",SlideCycleEnd:"slideCycleEnd"},Do=Object.assign(Object.assign({},Mo),Ro);class _o{constructor(e,t=0){this.jj=e,this.setCurrentSlide(t)}Aj(e=this.jj.indexOf(this.Ij)){return z(this.jj,e)}get currentSlide(){return this.Ij}getCurrentThumbnailUrlParams(e,t){return this.Ij.media.getThumbnailUrlParams(e,t)}getCurrentMetadata(){return this.Ij.metadata}setCurrentSlide(e){this.Ij=this.jj[e]}get currentSlideIndex(){return this.Aj().currentIndex}get nextSlideIndex(){return this.Aj().nextIndex}get prevSlideIndex(){return this.Aj().prevIndex}get firstSlideIndex(){return this.Aj().firstIndex}get lastSlideIndex(){return this.Aj().lastIndex}get slides(){return this.jj}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(r=this.Aj().currentIndex){const s=[];for(let e=0,t=r,i=r;e<2;e++)t=this.Aj(t).nextIndex,i=this.Aj(i).prevIndex,s.push(this.jj[i],this.jj[t]);return Object(p.n)(s)}}(wn=eo=eo||{})[wn.Right=0]="Right",wn[wn.Left=1]="Left";class Fo extends n.a{constructor(e,t){super(),this.mediator=e,this.Tj=t,this.inTransition=!1,this.Cj=0,this.Pj=null,this.Mj=!1,this.Ej=400,this.Lj=!0,this.Rj=()=>{clearTimeout(this.Pj),this.Pj=null,this.Mj=!1,this.Bj(),this.Cj=this.Dj(this.Fj),this.mediator.publish(this,jo.SlideTransitionEnd),this.Uj()},this.$j=e=>{e.stopPropagation(),e.target.parentElement===this.Tj&&this.Vj()&&(this.Pj=setTimeout(()=>{this.Mj&&this.Nj()},this.Ej))},this.Hj=e=>{e.stopPropagation(),e.target.parentElement===this.Tj&&this.inTransition&&this.Mj&&this.Vj()&&this.Nj()},this.qj=Object(p.c)(this.Tj.childNodes),this.Tj.addEventListener("transitionstart",this.$j),this.Tj.addEventListener("transitionend",this.Hj)}destroy(){clearTimeout(this.Pj),this.Pj=null,this.Tj.removeEventListener("transitionend",this.Hj),this.Tj.removeEventListener("transitionstart",this.$j)}setCurrentSlide(e,t,i=!0){this.Fj=e,(i=!this.Lj?!1:i)&&!this.zj(this.Fj)&&this.Wj()&&this.Lj?this.inTransition||(this.Cj<this.Dj(this.Fj)?this.Gj(t):this.Gj(eo.Left)):this.Jj()}offsetSlides(e,t){this.inTransition||(Object(S.a)(t,l.r.NextSlide),this.Bj(),this.Qj(e))}removeNextClass(e){e.forEach(e=>{Object(S.L)(e,l.r.NextSlide)})}cleanLastSlide(e,t){Object(S.N)(e,"transform"),Object(S.L)(t,l.r.NextSlide)}setAnimationAllowed(e){this.Lj=e}Qj(e){Object(S.Q)(this.Xj(),{transform:`translate(${e}px)`})}Jj(){Object(S.L)(this.Xj(),l.r.CurrentSlide,l.r.SlideLeft,l.r.SlideRight),this.Yj(this.Dj(this.Fj)),Object(S.a)(this.Fj,l.r.CurrentSlide),this.Rj()}Gj(e){this.Yj(this.Dj(this.Fj)),this.Kj(),Object(S.a)(this.Fj,l.r.NextSlide),e===eo.Right?(Object(S.a)(this.Fj,l.r.CurrentSlide),Object(S.a)(this.Xj(),l.r.SlideLeft)):e===eo.Left&&(Object(S.a)(this.Fj,l.r.CurrentSlide),Object(S.a)(this.Xj(),l.r.SlideRight)),Object(S.N)(this.Xj(),"transform")}zj(e){return e===this.Xj()}Uj(){this.mediator.publish(this,jo.SlideChanged)}Yj(e){this.Mj=!0,this.mediator.publish(this,jo.SlideTransitionStart,{payload:{nextIndex:e}})}Wj(){return Object(k.a)(this.Xj())}Dj(e){return Object(S.k)(e,this.Tj)}Xj(){return this.qj[this.Cj]}Kj(){this.Zj(),this.tA()}Bj(){this.iA(),this.eA()}eA(){Object(S.a)(this.Tj,l.h.NoTransition)}Zj(){Object(S.L)(this.Tj,l.h.NoTransition)}iA(){this.inTransition=!1}tA(){this.inTransition=!0}sA(){Object(S.L)(this.Xj(),l.r.CurrentSlide,l.r.SlideLeft,l.r.SlideRight),Object(S.O)(this.Fj,l.r.NextSlide,l.r.CurrentSlide)}Nj(){this.sA(),this.Rj()}Vj(){return Object(S.u)(this.Xj(),l.r.SlideLeft)||Object(S.u)(this.Xj(),l.r.SlideRight)}}class No extends n.a{constructor(e,t,i,r,s,n){super(),this.mediator=e,this.bg=t,this.nA=i,this.rA=r,this.aA=s,this.hA=n,this.oA=!1,this.cA=[],this.lA=!1,this.uA=()=>{this.goToNextSlide()},this.dA=()=>{this.mediator.publish(this,jo.SlideTimeUpdate,{payload:{elapsedTime:this.gw.timeElapsed,duration:this.fA.currentSlide.media.duration}})},this.pA=this.bg.createElementByString(`<cnx class="${wo.Slider}"></cnx>`),this.rA.appendChild(this.pA),this.bA()}vA(){this.nA.on(e=>{this.lA=e,this.mA.setAnimationAllowed(e)})}gA(e=eo.Right){this.mA.setCurrentSlide(this.fA.currentSlide.$container,e)}yA(){let e;this.fA.currentSlide.load(),(e=this.hA?[...this.fA.slides]:[...this.fA.getAdjacentSlides()]).forEach(e=>e.load())}wA(){this.mA=new Fo(this,this.pA),this.subscribe(jo.SlideTransitionStart,this.mA,({payload:{nextIndex:e}})=>{this.lA&&this.gw.disable(),this.mediator.publish(this,jo.SlideTransitionStart,{payload:{nextSlide:this.fA.slides[e]}})}),this.subscribe(jo.SlideChanged,this.mA,()=>{this.gw.reset(this.fA.currentSlide.media.duration),this.fA.slides.forEach(e=>e.media.reset());var e={payload:{index:this.fA.currentSlideIndex}};this.mediator.publish(this,jo.SlideChanged,e),this.oA?this.fA.currentSlide.media.play():this.pause()}),this.subscribe(jo.SlideTransitionEnd,this.mA,()=>{this.mediator.publish(this,jo.SlideTransitionEnd)})}bA(){this.gw=new M(this,0,100),this.subscribe(R.TimeElapsed,this.gw,this.uA),this.subscribe(R.TimeUpdate,this.gw,this.dA)}xA(e){this.cA=e;const t=this.kA(e),i=e.map(e=>{e=this.aA.getSlide(e,this,t);return this.subscribe(Ro.CallToAction,e,()=>{this.mediator.publish(this,Ro.CallToAction)}),this.relay(Ro.GeneralClickInteraction,e,this,this.mediator),this.subscribe(P[P.Next],e,()=>{this.mediator.publish(this,P[P.Next])}),e});this.fA=new _o(i),this.gw.reset(this.fA.currentSlide.media.duration),this.pA.innerHTML="",this.fA.slides.forEach(e=>{Object(S.d)(e.$container,this.pA),this.relay($.Change,e.media,this,this.mediator)})}kA(e){e=e.map(e=>e.slideDuration).reduce((e,t)=>e+t,0);return Object(k.e)(e)?Math.ceil(e/L.g):1}SA(){var e=this.fA.getAdjacentSlides().map(e=>e.$container);this.mA.removeNextClass(e)}OA(e){return(0<e?this.fA.prevSlide:this.fA.nextSlide).$container}getNextSlide(){return this.fA.nextSlide}setCurrentSlide(e,t){this.mA.inTransition||(this.fA.currentSlide&&this.fA.currentSlide.media.pause(),this.fA.setCurrentSlide(e),this.yA(),this.gA(t))}getCurrentSlide(){if(this.fA)return this.fA.currentSlide}getCurrentThumbnailUrlParams(e,t){if(this.fA)return this.fA.getCurrentThumbnailUrlParams(e,t)}getCurrentMetadata(){if(this.fA)return this.fA.getCurrentMetadata()}goToNextSlide(){if(this.fA.currentSlideIndex===this.fA.lastSlideIndex)return this.mA.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,jo.SlideCycleEnd);this.setCurrentSlide(this.fA.nextSlideIndex,eo.Right)}goToPrevSlide(){this.setCurrentSlide(this.fA.prevSlideIndex,eo.Left)}resetSlider(){this.setCurrentSlide(this.fA.firstSlideIndex)}setVolume(t){this.fA&&this.fA.slides.forEach(e=>{e.media.type===f.ProtoMediaTypeEnum.Video&&(e.media.volume=t)})}play(){this.oA=!0,this.gw.start(),this.fA.currentSlide.media.play()}pause(){this.oA=!1,this.gw.stop(),this.fA.currentSlide.media.pause()}stop(){this.fA.setCurrentSlide(this.fA.firstSlideIndex),this.yA(),this.pause(),this.mA.setCurrentSlide(this.fA.currentSlide.$container,null,!1)}get remainingTime(){return this.gw.timeRemaining}setQuality(i){this.fA.slides.forEach(e=>{var t;e.media.type===f.ProtoMediaTypeEnum.Video&&(t={height:e.media.getClosestSourceQuality(i.height).videoHeight,quality:i.quality},e.media.setQuality(t))})}getQuality(){var e=this.fA["currentSlide"];if(e.media.type!==f.ProtoMediaTypeEnum.Image){const{getClosestSourceQuality:t,currentQuality:i}=e.media;return t(i.height).videoHeight}}start(e){try{this.xA(e),this.wA(),this.vA()}catch(e){Object(g.a)({message:"SlidesManager_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}offsetSlides(e){var t;this.SA(),0!==e&&(t=this.OA(e),this.mA.offsetSlides(e,t))}destroy(){this.gw.disable(),this.mA&&this.mA.destroy()}get isPlaying(){return this.oA}onPlayerContainerResize(){Object(k.a)(this.fA)&&Object(p.h)(this.fA.slides)&&this.fA.slides.forEach(e=>e.media.onSlideResizeCallback())}get slides(){return Object(k.a)(this.fA)&&Object(p.h)(this.fA.slides)?this.fA.slides:[]}get currentSlideIndex(){return Object(k.a)(this.fA)?this.fA.currentSlideIndex:0}updateCapabilityMetadata(e,t){if(Object(k.a)(this.fA)&&Object(p.h)(this.fA.slides)){const i=this.fA.slides[e];i&&i.updateCapabilityMetadata(t)}}get slidesMetadata(){return this.cA}}var Uo=i(9);class Vo{constructor(e){this._A=e}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps">\n            <cnx class="cnx-ui-click-to-play-overlay"></cnx>\n            <cnx class="${wo.Content}">\n                [[${ie.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                    <cnx class="cnx-ui-ps-nav">\n                        ${this.jA()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                        <cnx class="cnx-ui-ps-branding">\n                            [[${ie.TopTitle}]]\n                        </cnx>\n                        <cnx class="cnx-ui-ps-btns">\n                            <cnx class="cnx-ui-btn ${l.g.ContextController}">[[${ie.MoreButton}]]</cnx>\n                            <cnx class="cnx-ui-btn cnx-close-button">[[${ie.CloseButton}]]</cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-controls--wrapper cnx-ui-ps-side-mg">\n                    <cnx class="cnx-ui-ps-controls">\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${ie.PreviousButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${ie.PlayButton}]]</cnx>\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${ie.UpNextButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${ie.VolumeButton}]]</cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg"></cnx>\n                [[${ie.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${wo.Footer}">\n                <cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n                    ${this.AA()}\n                </cnx>\n            </cnx>\n            [[${ie.Loader}]]\n        </cnx>\n        `.trim()}jA(){return this._A.disableStoryProgressBarRendering?"":`[[${ie.PlayspaceProgressBar}]]`}AA(){return this._A.disableTitleRendering?"":`[[${ie.SlideTitle}]]`}}class qo extends Ue{constructor(){super(...arguments),this.IA=100,this.eventList=[ce.a[ce.a.Scroll]],this.isEndState=!1,this.TA=()=>{this.mediator.publish(this,Ro.ProgressBarItemClicked,{payload:this.jd})},this.CA=e=>{e.stopPropagation()}}PA(){var e=this.Ss.getComputedTranslateX(this.kf),t=this.mf;return Object(Q.g)(0,t,0,100,e)}MA(e){Object(S.Q)(this.kf,{transition:`transform ${e}ms linear`})}EA(){Object(S.Q)(this.kf,{transition:"none"})}startProgress(e){this.MA(e),this.setProgress(this.IA)}pauseProgress(){this.setProgress(this.PA()),this.EA()}forceEndState(){this.EA(),super.forceEndState(),this.isEndState=!0}forceStartState(){this.EA(),super.forceStartState(),this.isEndState=!1}initComponent(){super.initComponent();var e={click:this.TA,interactionstart:this.CA};this._d.register(this.jd,this,this._d,e),this.Yn&&(this.subscribe(ce.a[ce.a.Click],this._d,()=>{this.TA()}),this.relay(ce.a[ce.a.Scroll],this._d,this,this.mediator))}destroy(){super.destroy()}onResize(e,t){this.setProgress(this.PA()),this.EA(),t&&(this.setProgress(this.IA),this.MA(e))}}var wn=i(115),Ho=i.n(wn);class Wo extends le{constructor(){super(...arguments),this.eventList=[Ro.ProgressBarItemClicked,ce.a[ce.a.Scroll]],this.jj=[],this.LA=({payload:e})=>{e=Object(S.k)(e,this.jd);this.mediator.publish(this,Ro.ProgressBarItemClicked,{payload:e})}}RA(e){const t=this.jj[e];t.forceStartState(),t.startProgress(this.yt)}startProgress(){if(Object(k.a)(this.Cj)){for(let e=0;e<this.jj.length;e++)e<this.Cj?this.jj[e].forceEndState():e===this.Cj&&!this.jj[e].isEndState||this.jj[e].forceStartState();this.jj[this.Cj].startProgress(this.yt)}}pauseProgress(){this.jj[this.Cj]&&this.jj[this.Cj].pauseProgress()}resetProgress(){Object(k.a)(this.Cj)&&this.jj.forEach(e=>e.forceStartState())}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let e=0;e<t;e++){const t=new qo(this,this.Ss,this._d,Ho.a,this.Yn);this.subscribe(Ro.ProgressBarItemClicked,t,this.LA),this.relay(ce.a[ce.a.Scroll],t,this,this.mediator),this.jj.push(t),t.initComponent(),this.jd.appendChild(t.getContainer())}}setDuration(e){this.yt=e}setCurrentIndex(e){e===this.Cj&&this.RA(e),this.Cj=e}initComponent(){}destroy(){super.destroy(),this.jj.forEach(e=>e.destroy())}resizeProgressBar(i,r){this.jj.forEach((e,t)=>{t<this.Cj&&e.forceEndState(),t===this.Cj&&e.onResize(i,r)})}}var wn=i(116),Go=i.n(wn),wn=i(64),$o=i.n(wn);class zo extends he{constructor(e,t,i,r,s){super(e,t,i,zo.getTemplate(s),r),this.mediator=e,this.zf=[],this.Zf=!1,this.type=Ge.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=s.event,this.eventList.push(this.event),this.BA=new Ye(this,t,i,r,{activeEvent:s.event,name:s.name.toUpperCase(),icon:""}),this.$menuContainer=this.Ss.createElementByString(`<cnx class="${l.k.Items}"></cnx>`),this.DA=this.jd.getElementsByClassName(l.k.ItemExtra)[0]}static getTemplate(e){var t=`<cnx class="${l.k.ItemIcon}">${e.icon}</cnx>`;return`<cnx class="${l.k.SubmenuOption}">\n                    ${e.icon?t:""}\n                    <cnx class="${l.k.ItemTitle}">${e.name}</cnx>\n                    <cnx class="${l.k.ItemExtra} ${l.f.AccentColor}">${e.label||""}${$o.a}</cnx>\n                </cnx>`}onClickHandler(e){this.mediator.publish(this,this.event)}handleItemsEvents(e){this.mediator.publish(this,this.event,{payload:e===this.event?void 0:e})}buildContextMenu(e){this.$menuContainer.innerHTML="",this.zf.forEach(e=>this.unsubscribeAll(e)),this.zf=[this.BA,...e],this.zf.forEach(t=>{t.eventList.forEach(e=>this.subscribe(e,t,()=>this.handleItemsEvents(e))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())})}changeLabel(e){this.DA.innerHTML=`${e}${$o.a}`}get isActive(){return this.Zf}set isActive(e){this.Zf=e,(this.Zf?Object(S.a):Object(S.L))(this.jd,l.h.Active)}}class Jo extends zo{constructor(e,t,i,r,s){super(e,t,i,r,{event:P[P.Quality],name:s,icon:xe.a,options:[]}),this.mediator=e,this.mp={height:360,quality:U.Auto},this.gp=!0}handleItemsEvents(e){e!==P[P.Quality]&&(this.gp=e===U[U.Auto],e={height:this.gp?this.mp.height:parseInt(e,10),quality:this.gp?U.Auto:U.Strict},this.mediator.publish(this,this.event,{payload:e}))}FA(){let e=null;var t;this.gp?e=U[U.Auto]:(t=this.UA.find(e=>e.event===this.mp.height.toString()))&&(e=t.name),e&&this.changeLabel(e)}updateQuality(e,t=!1){Object(p.h)(this.yp)&&(this.gp=e.quality===U.Auto,this.mp.quality=e.quality,this.mp.height=Object(Q.c)(e.height,this.yp.map(e=>e.videoHeight)),this.FA(),gt(this.UA,this.mp,this.gp),this.isActive=t)}updateAvailableQualities(e){this.UA=[],this.yp=e,this.UA=this.yp.map(e=>new Ye(this,this.Ss,this._d,this.Yn,{name:`${e.videoHeight}p`,activeEvent:e.videoHeight.toString(),label:e.isHD?"HD":void 0})),this.UA.push(new Ye(this,this.Ss,this._d,this.Yn,{name:U[U.Auto],activeEvent:U[U.Auto]})),this.FA(),gt(this.UA,this.mp,this.gp),this.buildContextMenu(this.UA)}}var wn=i(65),Qo=i.n(wn),wn=i(117),Yo=i.n(wn);const Xo={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextExpand:"Full Screen"};class Ko extends Qe{constructor(e,t,i,r,s,n,o,a){super(e,t,i,r,s,n,o,a),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1}initComponent(){this.$A=new Ye(this,this.Ss,this._d,this.Yn,{activeEvent:P[P.Expand],eventList:[P[P.Expand],P[P.Collapse]],icon:Qo.a,name:Xo.ContextExpand}),this.VA=new Jo(this,this.Ss,this._d,this.Yn,Xo.ContextQuality),this.buildContextMenu([this.VA,this.$A,new Ye(this,this.Ss,this._d,this.Yn,{activeEvent:P[P.AboutClick],name:Xo.ContextAbout,icon:Xe.a,label:Ke.a.version?`V${Ke.a.version}`:"dev"})])}setExpand(){this.$A.event=P[P.Collapse],this.$A.changeItemIcon(Yo.a)}setCollapse(){this.$A.event=P[P.Expand],this.$A.changeItemIcon(Qo.a)}showExpandButton(){this.$A.showComponent()}hideExpandButton(){this.$A.hideComponent()}updateQualityMenu(e){Object(p.h)(e)?(this.VA.updateAvailableQualities(e),this.VA.showComponent()):this.VA.hideComponent()}updateQuality(e,t=!1){this.VA.updateQuality(e,t)}}var Zo,ea,wn=i(118),ta=i.n(wn),wn=i(119),ia=i.n(wn);(wn=Zo=Zo||{})[wn.VolumeControls=0]="VolumeControls",wn[wn.PlaybackControls=1]="PlaybackControls",wn[wn.PlaylistControls=2]="PlaylistControls",wn[wn.CtaButton=3]="CtaButton",wn[wn.SlideTitle=4]="SlideTitle",wn[wn.TopLogo=5]="TopLogo",wn[wn.TopStoryTitle=6]="TopStoryTitle",wn[wn.TopSlideTitle=7]="TopSlideTitle",wn[wn.TextLabel=8]="TextLabel",(wn=ea=ea||{})[wn.Default=0]="Default",wn[wn.Description=1]="Description",wn[wn.Quote=2]="Quote",wn[wn.Bullet=3]="Bullet",wn[wn.Cover=4]="Cover",wn[wn.Instagram=5]="Instagram";const ra={TimerLabel:"cnx-cta-btn-timer-label",TimerLoader:"cnx-svg-circle-stroke",TextLabel:"cnx-cta-btn-text",TextContainer:"cnx-cta-btn-content",AlignWithContent:"cnx-cta-align-with-content"};class sa extends he{constructor(e,t,i,r,s,n,o){super(e,t,i,s.template,n),this.mr=r,this.NA=s,this.HA=o,this.eventList=[Ro.CallToAction,ce.a[ce.a.Scroll]],this.qA=!1,this.zA=!1,this.WA=!1,this.br=()=>{this.GA()},this.ow=()=>{const e=Math.round(this.JA.timeRemaining/L.f);this.QA(e.toString())},this.XA=this.jd.querySelector(".cnx-ui-ps-cta")}startProgress(){this.qA=!0,this.JA&&(this.JA.start(),this.ow())}pauseProgress(){this.qA=!1,this.JA&&(this.JA.stop(),this.ow())}changeLabel(e){Object(k.h)(e)&&(this.vf.innerHTML=e.substring(0,16))}initComponent(){super.initComponent(),this.vf=this.jd.querySelector(`.${ra.TextLabel}`),this.DA=this.jd.querySelector(`.${ra.TextContainer}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(e){var t,i,r,s,n;!Object(p.h)(e)||(s=e.find(({type:e})=>e===Zo.CtaButton))&&s.metadata&&({url:t,label:n,duration:i,ctaAlignToContent:r,ctaAlignToFooter:e,title:s}=s.metadata,this.zA=e,this.YA(t,s),this.changeLabel(n),n=Object(k.e)(i),this.KA(n),this.ZA(n,i),this.tI(r),this.iI())}setFooterElement(e){this.eI=e,this.iI()}handleCapabilities(e){this.onSlideTransitionStart(e)}hideComponent(){super.hideComponent(),this.sI()}tI(e){(e?Object(S.a):Object(S.L))(this.XA,ra.AlignWithContent)}onClickHandler(){const e={payload:null};Object(k.h)(this.Lt)&&(e.payload=this.Lt),this.mediator.publish(this,Ro.CallToAction,e)}iI(){this.WA||this.eI&&this.zA&&(this.mr.on(this.eI,this.br),this.WA=!0)}GA(){var e;this.eI?(e=(this.eI.clientHeight-this.jd.clientHeight)/2*-1,Object(S.Q)(this.jd,{bottom:`${e}px`})):Object(S.N)(this.jd,"bottom")}KA(e){e?this.nI||this.rI():this.aI()}rI(){this.nI=this.Ss.createElementByString(this.NA.getTimerTemplate()),Object(S.x)(this.DA,this.nI),this.hI(this.nI)}hI(e){this.oI=e.querySelector(`.${ra.TimerLabel}`),this.cI=e.querySelector(`.${ra.TimerLoader}`)}aI(){Object(S.M)(this.nI),this.nI=null,this.oI=null,this.cI=null}ZA(e,t){e?(this.lI(),this.JA.reset(t*L.f),this.QA(t.toString()),this.qA&&this.JA.start(),this.uI(),Object(S.Q)(this.cI,{"animation-duration":`${t}s`})):this.sI()}lI(){this.JA||(this.JA=new M(this),this.subscribe(R.TimeUpdate,this.JA,this.ow))}sI(){this.JA&&(this.unsubscribe(R.TimeUpdate,this.JA,this.ow),this.JA.disable(),this.JA=null)}uI(){Object(S.O)(this.cI,ra.TimerLoader,ra.TimerLoader,!0)}QA(e){this.oI&&Object(k.h)(e)&&(this.oI.innerText=e)}YA(e,t){if((this.Lt=e)&&(this.XA.title=t,!this.HA)){this.XA.href=e;const t=this.Ss.isURLSameDomainToTop(e);this.XA.target=t?Ot.c.Top:Ot.c.Blank,this.XA.rel="nofollow"}}}var wn=i(66),na=i.n(wn),wn=i(120),oa=i.n(wn),wn=i(121),aa=i.n(wn);class la{get template(){return`\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                ${oa.a}\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                ${aa.a}\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        `.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${na.a}\n                    ${na.a}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${ra.TimerLabel}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class da extends he{constructor(){super(...arguments),this.eventList=[P[P.Play]]}onClickHandler(){this.mediator.publish(this,P[P.Play])}}var ca,ha,ua,pa,wn=i(122),ga=i.n(wn);(wn=ca=ca||{})[wn.TopLogo=0]="TopLogo",wn[wn.TopSlideTitle=1]="TopSlideTitle",wn[wn.TopStoryTitle=2]="TopStoryTitle";const ma={[Zo.TopLogo]:ca.TopLogo,[Zo.TopSlideTitle]:ca.TopSlideTitle,[Zo.TopStoryTitle]:ca.TopStoryTitle},fa={[ca.TopLogo]:Zo.TopLogo,[ca.TopSlideTitle]:Zo.TopSlideTitle,[ca.TopStoryTitle]:Zo.TopStoryTitle},ya=[ca.TopLogo,ca.TopStoryTitle,ca.TopSlideTitle];class ba extends Rt{constructor(e,t,i,r){super(e,t,i,r),this.eventList=[P[P.LogoClicked],ce.a[ce.a.Scroll]],this.dI=[],this.fI={},this.pI=this.jd.querySelector(`.${Eo.TitlesContainer}`)}triggerLogoAnimation(){const e=this.getComponent(ie.TopLogo);e&&e.triggerLogoAnimation()}onSlideTransitionStart(e){var t=this.bI(e);this.fI=Object.assign({},t),this.vI(e)}onSlideTransitionEnd(){}onSlideTimeUpdate(e,t){}handleComponentEvent(e,t,i){this.mediator.publish(this,e,t)}mI(e){return e.map(({type:e})=>ma[e]).filter(e=>Object(k.a)(e))}bI(e){return e.reduce((e,{type:t,metadata:i})=>{switch(t){case fa[ca.TopStoryTitle]:if(!i.label&&!i.useFallbackLabel)return e;var r=i.label||"Top Articles";return Object.assign(Object.assign({},e),{[ca[ca.TopStoryTitle]]:this.gI(r,i.useTransition)});case fa[ca.TopSlideTitle]:return Object.assign(Object.assign({},e),{[ca[ca.TopSlideTitle]]:this.gI(i.label,i.useTransition)});case fa[ca.TopLogo]:return Object.assign(Object.assign({},e),{[ca[ca.TopLogo]]:Object.assign({},i)});default:return e}},{})}gI(e,t=!1){return{useTransition:t,label:this.yI(e)}}yI(e){if(e)return 36<e.length?`${e.substring(0,36)}...`:e}vI(e,t=!1){const i=this.mI(e),r=Object(p.a)(ya,i),s=Object(p.a)(i,this.dI),n=Object(p.b)(i,this.dI);this.dI=i,this.wI(i),Object(S.i)(this.pI),r.forEach(e=>this.xI(e,t)),s.forEach(e=>this.kI(e,t)),n.forEach(e=>this.SI(e,t))}wI(e){switch(!0){case this.OI(e):this._I();break;case this.jI(e):this.AI();break;default:this.II()}}OI(e){return e.includes(ca.TopSlideTitle)&&e.includes(ca.TopStoryTitle)}jI(e){var t=e.includes(ca.TopSlideTitle)&&!e.includes(ca.TopStoryTitle),e=!e.includes(ca.TopSlideTitle)&&e.includes(ca.TopStoryTitle);return t||e}_I(){Object(S.L)(this.pI,Eo.SlideDown),Object(S.a)(this.pI,Eo.SlideInitial)}AI(){Object(S.L)(this.pI,Eo.SlideInitial),Object(S.a)(this.pI,Eo.SlideDown)}II(){Object(S.L)(this.pI,Eo.SlideInitial,Eo.SlideDown)}xI(e,t=!1){const i=this.TI(e);if(i){const r=this.CI(e);t&&(r.useTransition=!1),i.hide(r)}}kI(e,t=!1){const i=this.TI(e);if(i){const r=this.CI(e);t&&(r.useTransition=!1),i.show(r)}}SI(e,t=!1){const i=this.TI(e);if(i){const r=this.CI(e);t&&(r.useTransition=!1),i.update(r)}}TI(e){return this.getComponent(ie[ca[e]])}CI(e){return this.fI[ca[e]]||{}}}(wn=ha=ha||{}).Wrapper="cnx-ui-ps__wrapper",wn.Container="cnx-ui-ps__container",wn.Placeholder="cnx-ui-ps__placeholder",wn.Text="cnx-ui__span--text",wn.Label="cnx-ui__span--label",wn.Title="cnx-ui__span--title",wn.VerticalLine="cnx-ui-ps__vertical-line",wn.Instagram="cnx-ui-ps__slide--instagram",wn.Cover="cnx-ui-ps__slide--cover",wn.HighlightInner="cnx-top-title-highlight-text-inner-container",wn.HighlightText="cnx-ui-ps-highlight-text",(wn=ua=ua||{}).Default="cnx-ui-ps__sliding--default",wn.Basic="cnx-ui-ps__sliding--basic",wn.Cover="cnx-ui-ps__sliding--cover",wn.SlideIn="cnx-title-slide-in",wn.SlideOut="cnx-title-slide-out",(wn=pa=pa||{}).Cover="cnx-ui-ps__title--cover",wn.Quote="cnx-ui-ps__title--quote",wn.Bullet="cnx-ui-ps__title--bullet",wn.Default="cnx-ui-ps__title--default",wn.Description="cnx-ui-ps__title--description",wn.Instagram="cnx-ui-ps__title--instagram";class va{constructor(e,t=0,i=!0){if(this.MI=e,this.EI=i,!Object(p.h)(this.MI))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(t)}setCurrentItem(e){this.LI=this.MI[e]}get currentItem(){return this.LI}goToNextItem(){this.Aj().nextIndex===this.Aj().firstIndex&&this.EI?this.setCurrentItem(this.Aj().firstIndex):this.setCurrentItem(this.Aj().nextIndex)}get listLength(){return this.MI.length}get previousItem(){return this.MI[this.Aj().prevIndex]}get currentItemIndex(){return this.Aj().currentIndex}Aj(e=this.MI.indexOf(this.LI)){return z(this.MI,e)}}const Pa="cnx-aux",Sa="cnx-aux-container",Ia="cnx-ui-lines";class Ta{constructor(e){this.Ss=e}RI(e,t){const{maxLineWidth:i,maxLines:r,minLines:s}=t,n=[...e],o=[];if(!n.length||!Object(k.e)(i))return o;let a=0,l=-1,d=0;for(;0<n.length;){if(a=0,o[++l]=[],250<=++d){Object(g.a)({message:"Split text base line wrap infinite loop",level:f.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}for(;n[0]&&a+n[0].width<=i;)if(a+=n[0].width,o[l].push(n.shift()),250<=++d){Object(g.a)({message:"Split text base line wrap infinite loop",level:f.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}if(n[0]&&o.length>=r){o[l].push(...n);break}}return o.length<s&&4<o[0].length&&(o[1]=o[0].splice(-2,2)),o[l].length<2&&1<o.length&&o[l].unshift(o[l-1].pop()),o}BI(e){return e.map(e=>({innerHTML:e.nodeName.toLowerCase()===Pa?e.innerHTML:e.outerHTML,width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}))}getWordsHtml(e){if(!Object(k.h)(e))return"";let t=[];if(nt(e))try{t=function(e){const t=document.createElement("cnx");t.innerHTML=e;const i=[];return Object(p.c)(t.childNodes).forEach(e=>{e.outerHTML?i.push(e.outerHTML):" "===e.nodeValue?i.push(" "):e.nodeValue.split(" ").forEach(e=>i.push(e))}),i}(e.trim())}catch(t){return Object(g.a)({message:"MultilinePadded_getRows_html_split",exception:t.message,level:f.ProtoLoggingLevelEnum.INFO,callStack:t.stack,throttle:1,sendMaxLog:!1}),e}else t=e.trim().split(" ");return t.map(e=>{let t=" ";return!nt(e)&&" "!==e||(t=""),`<${Pa}>${e}${t}</${Pa}>`}).join("")}DI(e,t){const i=e.querySelectorAll(t),u=e.clientWidth||e.getBoundingClientRect().width;Object(p.c)(i).forEach(r=>{const e=Object(p.c)(r.querySelectorAll(Pa)),t=r.parentElement;if(e.length&&r.nodeType===Node.ELEMENT_NODE){const i=this.Ss.getComputedStyle(r),s=parseInt(this.Ss.getComputedStyle(r,"before").getPropertyValue("width"),10),n=parseInt(i.getPropertyValue("--max-title-lines"),10),o=parseInt(i.getPropertyValue("--min-title-lines"),10),a=parseInt(i.getPropertyValue("font-size"),10),l={maxLineWidth:s||r.getBoundingClientRect().width-20,maxLines:n||15,minLines:o||1},d=this.BI(e),c=this.RI(d,l),h=this.Ss.createElementByString(`<cnx class='${Ia}'></cnx>`);h.dataset.split=u.toString(),h.dataset.split+=","+a,c.forEach(e=>{const t=r.cloneNode();Object(S.L)(t,Sa);var i=e.map(e=>e.innerHTML.trim());t.innerHTML+=this.FI(i).replace(/\s\s+/g," "),h.dataset.split+=","+e.length,Object(S.d)(t,h)}),this.UI(h).lines!==this.UI(t).lines?r.classList.contains(Sa)?this.Ss.requestAnimationFrameHelper(()=>{null!==t.parentNode&&Object(S.w)(t,h),Object(S.M)(t)}):this.Ss.requestAnimationFrameHelper(()=>{null!==r.parentNode&&Object(S.w)(r,h),Object(S.M)(r)}):Object(S.M)(r)}})}brakeLongLines(e,s){var t,i=e.querySelectorAll(s);i.length&&(t=e.clientWidth||e.getBoundingClientRect().width,i=this.UI(i[0].parentElement),isNaN(i.width)?this.DI(e,s):i.width&&0===Math.abs(i.width-t)||(t=e.querySelectorAll(`.${Ia}[data-split]`),Object(p.c)(t).forEach(e=>{const t=e.querySelectorAll(s),i=t[0].cloneNode(!1),r=Object(p.c)(t).map(e=>e.innerHTML).join("");i.innerHTML=this.getWordsHtml(r),Object(S.a)(i,Sa),e.prepend(i)}),this.DI(e,s)))}UI(e){const t=e.dataset.split?e.dataset.split.split(","):[],i=t.shift();return{width:parseInt(i,10),lines:t.join("")}}FI(e){return e.reduce((e,t,i)=>Object(p.g)("<",t)&&nt(t)?e+t:" "===e?e:e+`${t} `,"")}}class ka extends he{constructor(e,t,i,r,s,n){super(e,t,i,n.template,s),this.mediator=e,this.Ss=t,this.mr=r,this.Yn=s,this.$I=n,this.splitTextSelector=`.${ha.Text}`,this.br=()=>{this.Ss.requestAnimationFrameHelper(()=>{this.VI.brakeLongLines(this.jd,this.splitTextSelector)})},this.NI=t.createDocumentFragment(),this.VI=new Ta(t)}get $templateFragment(){return this.NI}HI(e,t){t=this.$I.titleTemplate(e,t);return this.Ss.createElementByString(t)}qI(e,t){t=this.$I.labelTemplate(e,t);return this.Ss.createElementByString(t)}zI(e,t){t=this.$I.textTemplate(e,t);return this.Ss.createElementByString(t)}WI(){var e=this.$I.placeholderTemplate();return this.Ss.createElementByString(e)}GA(){}GI(){this.resetAnimation(),Object(S.a)(this.jd,ua.SlideIn)}JI(){this.resetAnimation(),Object(S.a)(this.jd,ua.SlideOut)}onSlideTransitionStart(e){this.QI(e),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.GI()}onSlideTimeUpdate(e,t){}resetAnimation(){var e=[ua.SlideIn,ua.SlideOut];Object(S.L)(this.jd,...e)}initComponent(e){super.initComponent(),this.XI=e,this.mr.on(this.XI,this.br)}render(){Object(S.J)(this.jd,this.NI),Object(S.d)(this.jd,this.XI)}setFooterElement(e){return this.eI=e,this.GA(),this.eI}destroy(){this.mr.off(this.XI,this.br),Object(S.M)(this.jd),this.jd=this.Ss.createElementByString(this.$I.template),this.unsubscribeAll(this._d),this._d.unregisterAll(this)}}function Aa(e,t){return e=rt(e),t=(i=t).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(`<${t}>(.*?)</${t}>`,"g"),e.replace(t,(e,t)=>t.split(" ").map(e=>`<${i}>${e}</${i}>`).join(" "));var i}const Oa={[Uo.ProtoPlayspaceColorSchemeEnum.Accent]:l.f.AccentColor,[Uo.ProtoPlayspaceColorSchemeEnum.Primary]:l.f.PrimaryColor,[Uo.ProtoPlayspaceColorSchemeEnum.Secondary]:l.f.SecondaryColor};class Ca extends ka{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n),this.mediator=e,this.Ss=t,this.Yn=s,this.$I=n,this.eventList=[],this.className=pa.Description}YI(e){return e/this.KI.listLength*(this.KI.currentItemIndex+1)}ZI(e){e=e.map((e,t)=>{var i=this.tT(e);return Object(S.d)(i,this.$templateFragment),0===t&&Object(S.a)(i,"active"),Object.assign(Object.assign({},e),{shown:!1,element:i})});this.KI=new va(e)}iT(e){return this.qI(e.text,Oa[e.colorScheme])}tT(e){return this.zI(this.VI.getWordsHtml(Aa(e.text,"em")),Oa[e.colorScheme])}QI(e){var{descriptionChunkList:t,label:i,labelColorScheme:e}=e,e={text:i,colorScheme:e};Object(k.h)(e.text)&&Object(S.d)(this.iT(e),this.$templateFragment),Object(p.h)(t)&&this.ZI(t)}eT(){this.KI.currentItem.shown=!0,Object(S.L)(this.KI.currentItem.element,"active"),this.KI.goToNextItem(),this.Ss.requestAnimationFrameHelper(()=>{this.resetAnimation(),this.Ss.requestAnimationFrameHelper(()=>{Object(S.a)(this.KI.currentItem.element,"active"),this.GI()})})}onSlideTimeUpdate(e,t){t<=e||e>=this.YI(t)&&!this.KI.currentItem.shown&&this.eT()}}class wa{get template(){return`<cnx class="${l.f.TitleComponent}"></cnx>`}titleTemplate(e,t){return`<cnx class="${ha.Title} ${t}">${e}</cnx>`}labelTemplate(e,t){return`<cnx class="${ha.Label} ${t} ">${e}</cnx>`}textTemplate(e,t){return`<cnx class="${ha.Text} ${t}">${e}</cnx>`}containerTemplate(){return`<cnx class="${ha.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${ha.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${ha.Wrapper}"></cnx>`}}class xa extends wa{get template(){return`<cnx class="${ua.Basic} ${l.f.TitleComponent}"></cnx>`}textTemplate(e,t){return`<cnx class="${ha.Placeholder}">\n            <cnx class="${ha.Text} ${t}">${e}</cnx>\n        </cnx>`}}class Ea extends wa{get template(){return`<cnx class="${ua.Default} ${l.f.TitleComponent}">\n            <cnx class="${ha.VerticalLine} ${l.f.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(e){return`<cnx class="${l.m.InheritBodyFontFamily} ${ha.Text} ${l.f.PrimaryColor} ${ha.HighlightInner} ${ha.HighlightText}">${e}</cnx>`.trim()}}class La extends ka{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n),this.mediator=e,this.Ss=t,this.Yn=s,this.$I=n,this.className=pa.Default,this.sT=!0,this.eventList=[...this.eventList,Ro.CallToAction]}QI(e){var{url:t,label:e}=e;if(t?(this.jd.setAttribute("title",t),Object(S.a)(this.jd,l.f.TitleLink)):(this.jd.removeAttribute("title"),Object(S.L)(this.jd,l.f.TitleLink)),Object(k.h)(e)){const i=this.VI.getWordsHtml(Aa(e,"em"));Object(S.d)(this.zI(i),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,Ro.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.sT=!0}onSlideTimeUpdate(e,t){this.sT&&t-e<1200&&(this.JI(),this.sT=!1)}destroy(){super.destroy(),this.unsubscribeAll(this._d),this._d.unregisterAll(this)}}class Ra extends ka{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n),this.mediator=e,this.Ss=t,this.Yn=s,this.$I=n,this.eventList=[],this.className=pa.Bullet}ZI(e){e=e.map(e=>{if(Object(k.h)(e.title)){const t=this.nT(e);return Object(S.d)(t,this.$templateFragment),Object.assign(Object.assign({},e),{activated:!1,element:t,titleElement:t.firstChild,containerElement:t.querySelector(`.${ha.Container}`)})}});this.rT=new va(e)}aT(e){const t=e.element.querySelector(`.${ha.Container}`),i=t.querySelectorAll(`.${ha.Text}`),r=Object(k.a)(i)?i.length:0,s=Object(k.a)(i[0])?i[0].clientHeight:0;Object(S.Q)(t,{"max-height":`${r*s}px`}),e.activated=!0,Object(S.O)(e.titleElement,l.f.PrimaryColor,l.f.SecondaryColor),Object(S.a)(e.element,"active")}hT(e){var t=e.element.querySelector(`.${ha.Container}`);Object(S.N)(t,"max-height"),Object(S.O)(e.titleElement,l.f.SecondaryColor,l.f.PrimaryColor),Object(S.L)(e.element,"active")}oT(e){e=this.$I.labelTemplate(e);return this.Ss.createElementByString(e)}nT(e){var t=this.oT(e.title),i=this.zI(this.VI.getWordsHtml(e.description)),e=this.WI();return Object(S.d)([t,i],e),e}QI(e){const{label:t,bulletChunkList:i}=e;Object(k.h)(t)&&Object(S.d)(this.HI(t),this.$templateFragment),Object(p.h)(i)&&this.ZI(i.slice(0,3))}onSlideTimeUpdate(e,t){const i=this.rT;i&&!i.currentItem.activated&&(0===i.currentItemIndex?1e3<=e&&(this.aT(i.currentItem),i.goToNextItem()):(t-1e3)/i.listLength*i.currentItemIndex+1e3<e&&(this.hT(i.previousItem),this.aT(i.currentItem),i.goToNextItem()))}}class Ma extends wa{get template(){return`<cnx class="${ua.Basic} ${l.f.TitleComponent}"></cnx>`}titleTemplate(e){return`<cnx class="${ha.Title} ${l.f.AccentColor}">${e}</cnx>`}labelTemplate(e){return`<cnx class="${ha.Label} ${l.f.PrimaryColor}">\n            <cnx class="${ha.VerticalLine} ${l.f.AccentColor}"></cnx>\n            ${e}\n        </cnx>`.trim()}textTemplate(e){return`<cnx class="${ha.Container}">\n                    <cnx class="${ha.Text}  ${l.f.SecondaryColor}">${e}</cnx>\n                </cnx>\n        `.trim()}}class Ba extends ka{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n),this.mediator=e,this.Ss=t,this.Yn=s,this.$I=n,this.eventList=[],this.className=pa.Cover,this.splitTextSelector=`.${ha.Text}, .${ha.Title}`,this.br=()=>{this.Ss.requestAnimationFrameHelper(()=>{var e;this.VI.brakeLongLines(this.jd,this.splitTextSelector),this.eI&&(e=this.eI.clientHeight/2*-1,Object(S.Q)(this.labelElement,{bottom:`${e}px`,position:"absolute"}))})}}QI(e){var{coverChunk:{title:t,subtitle:i}}=e,e=e["label"];if(Object(k.h)(t)&&(t=Aa(t,"em"),Object(S.d)(this.HI(this.VI.getWordsHtml(t)),this.$templateFragment)),Object(k.h)(i)&&(i=Aa(i,"em"),Object(S.d)(this.zI(this.VI.getWordsHtml(i)),this.$templateFragment)),Object(k.h)(e)){if(this.labelElement=this.qI(e),this.eI){const r=(this.eI.clientHeight-this.jd.clientHeight)/2*-1;Object(S.Q)(this.labelElement,{bottom:`${r}px`,position:"absolute"})}Object(S.d)(this.labelElement,this.$templateFragment)}}}class ja extends wa{get template(){return`<cnx class="${ua.Cover} ${l.f.TitleComponent}"></cnx>`}titleTemplate(e){return`<cnx class="${ha.Placeholder}">\n            <cnx class="${ha.Title} ${l.f.PrimaryColor}">${e}</cnx>\n        </cnx>`}textTemplate(e){return`<cnx class="${ha.Placeholder}">\n            <cnx class="${ha.Text} ${l.f.SecondaryColor}">${e}</cnx>\n        </cnx>`}labelTemplate(e){return`<cnx class="${ha.Placeholder}">\n            <cnx class="${ha.Label}">${e}</cnx>\n        </cnx>`}}var wn=i(67),Da=i.n(wn);class _a extends ka{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n),this.mediator=e,this.Ss=t,this.Yn=s,this.$I=n,this.eventList=[],this.className=pa.Quote}QI(e){var{quote:t,source:e}=e;if(Object(k.h)(t)){const i=this.VI.getWordsHtml(`${Da.a}${rt(t)}${Da.a}`);Object(S.d)(this.zI(i),this.$templateFragment)}Object(k.h)(e)&&Object(S.d)(this.qI(e),this.$templateFragment)}}class Fa extends wa{get template(){return`\n            <cnx class="${ua.Basic} ${l.f.TitleComponent}"></cnx>\n        `.trim()}textTemplate(e){return`\n        <cnx class="${ha.Text} ${l.f.PrimaryColor}"> ${e}</cnx>`.trim()}labelTemplate(e){return`<cnx class="${ha.Label}">${e}</cnx>`.trim()}}class Na extends ka{constructor(e,t,i,r,s,n){super(e,t,i,r,s,n),this.mediator=e,this.Ss=t,this.Yn=s,this.$I=n,this.eventList=[],this.className=pa.Instagram}QI(e){var{instagramMetadata:{createdDate:t,comments:i,likes:r},label:e}=e;this.cT({createdDate:t,comments:i,likes:r}),Object(k.h)(e)&&Object(S.d)(this.HI(e),this.$templateFragment)}cT(e){const{createdDate:t,comments:i,likes:r}=e,s=this.Ss.createElementByString(this.$I.instagramMetaTemplate(t,r,i));if(this.lT(i)&&this.lT(r)){const e=s.querySelector(`.${ha.Instagram}-date cnx-span`);Object(S.a)(e,l.h.Show)}Object(S.d)(s,this.$templateFragment)}lT(e){return!Object(k.h)(e)||"0"===e}}var wn=i(123),Ua=i.n(wn),wn=i(124),Va=i.n(wn),wn=i(125),qa=i.n(wn);class Ha extends wa{get template(){return`<cnx class="${ua.Basic} ${l.f.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(e,t,i){e=Object(k.h)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${l.m.InheritBodyFontFamily}">\n                ${qa.a}\n                <cnx-span class="cnx-date-label ${l.m.InheritBodyFontFamily}">Posted </cnx-span>${Object(_e.e)(e)}\n            </cnx-span>`.trim():"",t=Object(k.h)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${l.m.InheritBodyFontFamily}">\n                ${Ua.a} ${Object(Q.a)(parseInt(t,10))}\n            </cnx-span>`.trim():"",i=Object(k.h)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${l.m.InheritBodyFontFamily}">\n                ${Va.a} ${Object(Q.a)(parseInt(i,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${l.m.InheritBodyFontFamily}">\n                ${e}\n                ${t}\n                ${i}\n            </cnx>\n        `.trim()}titleTemplate(e){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${ha.Instagram}-title ${l.m.InheritBodyFontFamily}">\n                ${e}\n            </cnx>\n        `.trim()}}class Wa extends le{constructor(e,t,i,r,s,n,o){super(e,t,i,r,n),this.mediator=e,this.Ss=t,this.mr=s,this.Yn=n,this.HA=o,this.eventList=[],this.uT=new Map,this.dT()}setFooterElement(t){this.uT.forEach(e=>{e.setFooterElement(t)})}onSlideTransitionStart(e){Object(S.S)(this.jd),this.jd.removeAttribute("title");const t=e.find(({type:e})=>e===Zo.SlideTitle),i=e.find(({type:e})=>e===Zo.CtaButton);if(i&&i.metadata&&i.metadata.url){if(this.fT=i.metadata.url,!this.HA){this.jd.href=this.fT;const r=this.Ss.isURLSameDomainToTop(this.fT);this.jd.target=r?Ot.c.Top:Ot.c.Blank}this.jd.title=t.metadata.label,i.metadata.title=t.metadata.label}Object(k.f)(t)&&Object(k.f)(t.metadata)&&((e=this.uT.get(t.metadata.titleType))&&(this.pT(e),this.bT.onSlideTransitionStart(t.metadata)))}onSlideTransitionEnd(){this.bT&&this.bT.onSlideTransitionEnd()}onSlideTimeUpdate(e,t){this.bT&&this.bT.onSlideTimeUpdate(e,t)}initComponent(){}pT(e){this.bT?(this.bT.destroy(),Object(S.O)(this.jd,this.vT,e.className)):Object(S.a)(this.jd,e.className),this.vT=e.className,this.jd.innerHTML="",this.bT=e,this.bT.initComponent(this.jd)}dT(){this.uT.set(ea.Default,new La(this,this.Ss,this._d,this.mr,this.Yn,new Ea)),this.uT.set(ea.Description,new Ca(this,this.Ss,this._d,this.mr,this.Yn,new xa)),this.uT.set(ea.Quote,new _a(this,this.Ss,this._d,this.mr,this.Yn,new Fa)),this.uT.set(ea.Bullet,new Ra(this,this.Ss,this._d,this.mr,this.Yn,new Ma)),this.uT.set(ea.Cover,new Ba(this,this.Ss,this._d,this.mr,this.Yn,new ja)),this.uT.set(ea.Instagram,new Na(this,this.Ss,this._d,this.mr,this.Yn,new Ha)),this.uT.forEach(e=>{e.eventList.forEach(t=>{this.subscribe(t,e,()=>{const e={payload:null};t===Ro.CallToAction&&(e.payload=this.fT),this.mediator.publish(this,t,e)})})})}destroy(){super.destroy(),this.bT&&this.bT.destroy()}}var Ga={[ie[ie.SkipAd]]:{template:St(ie.SkipAd,"Skip Ad",!1),tooltip:"Skip Ad",isHoverable:!1}};class $a{constructor(e){this.mT=e}get template(){return`\n            <cnx class="${Eo.Main}">\n                ${this.gT()}\n                <cnx class="${Eo.TitlesContainer}">\n                    [[${ie.TopStoryTitle}]]\n                    [[${ie.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}gT(){return this.mT?`[[${ie.TopLogo}]]`:""}}class za{get template(){return`<a class="${ha.Wrapper}"></a>`}}class Ja extends he{constructor(e,t,i,r,s,n){super(e,t,i,r,s),this.mediator=e,this.Yn=s,this.eventList=[...this.eventList,P[P.LogoClicked]],this.hideComponent(!1),this.yT=this.jd.querySelector(`.${Eo.Logo}`),this.yT.src=`${n}`,this.yT.alt="",this.yT.onload=()=>{this.wT()}}show(e){this.showComponent(e.useTransition)}hide(e){this.hideComponent(e.useTransition)}update(e){this.showComponent(e.useTransition)}triggerLogoAnimation(){Object(S.a)(this.jd,Eo.LogoAnimation)}onClickHandler(){this.mediator.publish(this,P[P.LogoClicked])}wT(){this.yT.naturalHeight>this.yT.naturalWidth?this.yT.naturalWidth>this.yT.parentElement.clientWidth&&.8<=this.yT.naturalWidth/this.yT.naturalHeight?Object(S.a)(this.yT,Eo.LogoLandscape):Object(S.a)(this.yT,Eo.LogoPortrait):this.yT.naturalHeight>this.yT.parentElement.clientHeight&&.8<=this.yT.naturalHeight/this.yT.naturalWidth?Object(S.a)(this.yT,Eo.LogoPortrait):Object(S.a)(this.yT,Eo.LogoLandscape)}}class Qa{get template(){return`\n            <cnx class="${Eo.LogoContainer}">\n                <img class="${Eo.Logo}" />\n            </cnx>\n        `.trim()}}class Ya{get template(){return`\n            <cnx class="${Eo.TopSlideTitle} ${l.m.InheritTitleFontFamily}">\n                <cnx class="${Eo.TextPlaceholder}">\n                    <cnx class="${Eo.Text} ${l.f.SecondaryColor}">\n                        <cnx class="${Eo.TextOuterContainer}">\n                            <cnx class="${Eo.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Xa{get template(){return`\n            <cnx class="${Eo.TopStoryTitle} ${l.m.InheritTitleFontFamily}">\n                <cnx class="${Eo.TextPlaceholder}">\n                    <cnx class="${Eo.Text} ${l.f.SecondaryColor}">\n                        <cnx class="${Eo.TextOuterContainer}">\n                            <cnx class="${Eo.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Ka extends le{constructor(e,t,i,r,s){super(e,t,i,r,s),this.mediator=e,this.eventList=[],this.xT=this.jd.querySelector(`.${Eo.TextInnerContainer}`)}show(e){var t;this.xT&&({label:t,useTransition:e}=e,Object(k.h)(t)&&t!==this.iT&&(clearTimeout(this.kT),this.iT=t,this.ST(t),this.GI(e)))}initComponent(){}hide(e){var e=e["useTransition"];clearTimeout(this.kT),this.JI(e),this.iT=null}update(e){if(this.xT){const{label:t,useTransition:i}=e;Object(k.h)(t)&&t!==this.iT&&(clearTimeout(this.kT),this.JI(i),this.iT=t,this.kT=setTimeout(()=>{this.ST(t),this.GI(i)},600))}}ST(e){this.xT.innerHTML=e}GI(e=!1){e?Object(S.u)(this.jd,Eo.SlideIn)||(this.OT(),Object(S.L)(this.jd,l.h.Hide,l.h.Active),Object(S.i)(this.jd),Object(S.O)(this.jd,Eo.SlideOut,Eo.SlideIn)):(Object(S.O)(this.jd,l.h.Hide,l.h.Active),Object(S.L)(this.jd,Eo.SlideIn,Eo.SlideOut))}JI(e=!1){e?(Object(S.L)(this.jd,l.h.Hide,l.h.Active),Object(S.O)(this.jd,Eo.SlideIn,Eo.SlideOut)):(Object(S.O)(this.jd,l.h.Active,l.h.Hide),Object(S.L)(this.jd,Eo.SlideIn,Eo.SlideOut))}OT(){var e=[Eo.SlideIn,Eo.SlideOut];Object(S.L)(this.xT,...e),Object(S.i)(this.xT)}}class Za extends le{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(e){e=this._T(e);e&&this.jT(e.metadata.label)}_T(e){return e.find(({type:e,metadata:t})=>e===Zo.TextLabel&&Object(k.f)(t))}jT(e){Object(k.h)(e)&&(this.jd.innerText=e)}}var wn=i(126),el=i.n(wn);class tl extends Et{constructor(e,t,i,r,s){super(e,t,r,s,Ga),this.Ss=e,this._d=t,this.Lo=i,this.jd=r,this.Jn=s,this.fb={[ie.VolumeButton]:e=>new Lt(e,this.Ss,this._d,ia.a,wt.Mute,this.Jn.isMobile),[ie.PlayspaceProgressBar]:e=>new Wo(e,this.Ss,this._d,Go.a,this.Jn.isMobile),[ie.PlayspaceSettingsMenu]:e=>new Ko(e,this.Ss,this._d,ta.a,P[P.SettingsMenu],ie.PlayspaceSettingsMenu,this.jd,this.Jn.isMobile),[ie.CtaButton]:e=>new sa(e,this.Ss,this._d,this.Lo,new la,this.Jn.isMobile,this.Jn.disableClickUrl),[ie.ClickToPlayButton]:e=>new da(e,this.Ss,this._d,ga.a,this.Jn.isMobile),[ie.TopTitle]:e=>new ba(e,this.Ss,new $a(this.Jn.logoUrl).template,this),[ie.TopLogo]:e=>new Ja(e,this.Ss,this._d,(new Qa).template,this.Jn.isMobile,this.Jn.logoUrl),[ie.TopSlideTitle]:e=>new Ka(e,this.Ss,this._d,(new Ya).template,this.Jn.isMobile),[ie.TopStoryTitle]:e=>new Ka(e,this.Ss,this._d,(new Xa).template,this.Jn.isMobile),[ie.SlideTitle]:e=>new Wa(e,this.Ss,this._d,(new za).template,this.Lo,this.Jn.isMobile,this.Jn.disableClickUrl),[ie.ElapsedTimeLabel]:e=>new Fe(e,this.Ss,this._d,Ne.a),[ie.TotalDurationLabel]:e=>new Fe(e,this.Ss,this._d,Ne.a),[ie.VolumeControls]:e=>new Mt(e,this.Ss,Bt,this),[ie.ProgressBar]:e=>new qe(e,this.Ss,this._d,He.a,this.Jn.isMobile),[ie.TextLabel]:e=>new Za(e,this.Ss,this._d,el.a)},this.pb=i=>e=>{const t=this.fb[i];if(t)return t(e)}}createComponent(e,t){return this.pb(e)(t)||super.createComponent(e,t)}}class il{constructor(e){this.AT=e}IT(t){return this.AT.filter(e=>t.instance!==e.instance)}TT(t){return this.AT.find(({name:e})=>t===e)}CT(e){e.forEach(({instance:e})=>{e.isOpen&&e.close()})}toggleContextMenu(e,t={}){const i=this.TT(e);if(i.instance.isOpen)return i.instance.close(),!1;{const{targetCoordinates:e,holdPause:r}=t,s=e||i.instance.getAnchorCoordinatesTo(i.linkedComponent);return i.instance.open(s,r),this.CT(this.IT(i)),!0}}isAnyContextMenuOpen(){return!!this.AT.find(({instance:e})=>e.isOpen)}closeContextMenu(e){const t=this.TT(e).instance;t.isOpen&&t.close()}closeAllContextMenus(){this.CT(this.AT)}}class rl extends me{enterState(){super.enterState();const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.startProgress();const t=this.context.getComponent(ie.CtaButton);t&&t.startProgress(),this.context.interactionService.enableSpecialInteractions(this.context.$container),this.context.autoHideHandler&&this.context.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.context.autoHideHandler&&this.context.autoHideHandler.showUi()}updateDuration(){const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.startProgress()}}class sl extends ye{enterState(){super.enterState();const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.pauseProgress();const t=this.context.getComponent(ie.CtaButton);t&&t.pauseProgress(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){}}class nl extends sl{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}}class ol extends sl{enterState(){super.enterState(),Object(S.a)(this.context.$uiContainer,l.j.Preroll);const e=this.context.getComponent(ie.Loader);e&&e.show(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState(),Object(S.L)(this.context.$uiContainer,l.j.Preroll);const e=this.context.getComponent(ie.Loader);e&&e.hide()}}class al extends sl{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.resetProgress()}}var ll={[Zo.PlaybackControls]:[ie.PlayButton],[Zo.VolumeControls]:[ie.VolumeButton],[Zo.CtaButton]:[ie.CtaButton],[Zo.PlaylistControls]:[ie.UpNextButton,ie.PreviousButton],[Zo.SlideTitle]:[ie.SlideTitle],[Zo.TextLabel]:[ie.TextLabel]};class dl{constructor(){this.PT=Object.keys(ll).reduce((e,t)=>[...e,...ll[t]],[])}setCapabilityList(e){this.MT=e.map(e=>ll[e.type]).filter(e=>Array.isArray(e)).reduce((e,t)=>[...e,...t],[])}getComponentList(){return{excludedComponents:Object(p.a)(this.PT,this.MT),includedComponents:Object(p.b)(this.PT,this.MT)}}}class cl{constructor(e){this.jd=e,this.ET=!1}isUIHidden(){return this.ET}startAutoHide(){this.LT=setTimeout(()=>{this.RT()},3e3)}showUi(){clearTimeout(this.LT),this.BT()}resetAutoHideTimer(){clearTimeout(this.LT),this.BT(),this.startAutoHide()}RT(){Object(S.a)(this.jd,l.g.HideUI),this.ET=!0}BT(){Object(S.L)(this.jd,l.g.HideUI),this.ET=!1}}var hl=i(20);class ul extends Se{constructor(e,t,i,r,s,n,o,a,l){super(e,t,i,s,new tl(i,l,r,t,n)),this.mediator=e,this.$container=t,this.globalDomUtilsService=i,this.settings=n,this.Kn=o,this.interactionService=l,this.DT=80,this.FT=[ie.SlideTitle,ie.CtaButton,ie.TopTitle,ie.TextLabel],this.Gd={[V.PlayingState]:new rl(this),[V.PausedState]:new sl(this),[V.StoppedState]:new nl(this),[V.HiddenState]:new al(this),[V.PrerollState]:new ol(this),[V.PostrollState]:new ol(this)},this.UT=new dl,this.$T=()=>{this.mediator.publish(this,P[P.Play]),this.VT(P[P.Play])},this.eI=this.$container.querySelector(`.${wo.Footer}`),this.NT(),this.HT(),this.qT(),this.zT(),this.Gd[a].enterState(),this.WT(),this.GT(!1),this.JT(),this.QT=this.$uiContainer.querySelector(`.${wo.Content}`),this.XT=this.$uiContainer.querySelector(`.${wo.Overlay}`),this.interactionService.register(this.XT,this,this.interactionService),this.subscribe(ce.a[ce.a.Click],this.interactionService,()=>{this.$T()})}NT(){const e=this.getComponent(ie.SlideTitle);e&&e.setFooterElement(this.footer)}YT(e,t){const i=this.getComponent(ie.PlayspaceProgressBar);i&&i.resizeProgressBar(e,t)}handleComponentEvent(e,t,i){switch(this.VT(e),e){case P[P.Mute]:this.mediator.publish(this,P[P.Volume],{payload:0});break;case P[P.Unmute]:this.mediator.publish(this,P[P.Volume],{payload:1});break;case ie[ie.CloseButton]:this.mediator.publish(this,P[P.Close]);break;case ie[ie.MoreButton]:const i={holdPause:!0};this.KT.toggleContextMenu(ie.PlayspaceSettingsMenu,i);break;case P[P.AboutClick]:this.globalDomUtilsService.open(ss.a,Ot.c.Blank);break;case P[P.Quality]:t.payload&&this.mediator.publish(this,P[P.Quality],{payload:t.payload});break;case ie[ie.UpNextButton]:this.mediator.publish(this,P[P.Next]);break;case ie[ie.PreviousButton]:this.mediator.publish(this,P[P.Prev]);break;case Ro.CallToAction:Object(k.h)(t.payload)?this.mediator.publish(this,Ro.CallToAction,t):this.mediator.publish(this,P[P.Next]);break;default:this.mediator.publish(this,e,t)}}VT(e){switch(e){case Ro.CallToAction:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.UrlClick});break;case ce.a[ce.a.Scroll]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.ScrollClick});break;case ie[ie.VolumeButton]:case ie[ie.VolumeProgress]:case ie[ie.VolumeControls]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.VolumeClick});break;case ie[ie.PlayButton]:case ie[ie.BigPlayButton]:case ie[ie.ClickToPlayButton]:case P[P.Play]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.PlayClick});break;case P[P.Pause]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.PauseClick});break;case P[P.Next]:case ie[ie.UpNextButton]:case ie[ie.UpNextBox]:case ce.a[ce.a.TapRight]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.NextClick});break;case P[P.Prev]:case ie[ie.PreviousButton]:case ce.a[ce.a.TapLeft]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.PreviousClick});break;case P[P.Mute]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.MuteClick});break;case P[P.Unmute]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.UnmuteClick});break;case P[P.Close]:case ie[ie.CloseButton]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.CloseClick})}}qT(){const e=[],t=this.ZT();t&&e.push({instance:t,linkedComponent:this.getComponent(ie.MoreButton),name:ie.PlayspaceSettingsMenu}),this.KT=new il(e)}zT(){this.settings.isMobile&&this.tC(),this.interactionService.register(this.$container,this,this.interactionService,{},[hl.c.Hold,hl.c.Swipe]);const r=this.interactionService.getNonInterruptibleInteractions();Object.keys(ce.a).filter(e=>isNaN(parseInt(e,10))).forEach(i=>{this.subscribe(i,this.interactionService,e=>{var t=!r.includes(ce.a[i]);if(this.autoHideHandler&&t){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.VT(i),this.mediator.publish(this,i,e)})})}tC(){this.autoHideHandler=new cl(this.$container)}HT(){var e=`id_${this.Kn}`;this.$uiContainer.id=e;var{bodyFontFamily:t,titleFontFamily:i}=this.iC(),t=`\n            #${e} .${l.f.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${e} .${l.f.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${e}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${e} .cnx-ui-loader polygon {\n                animation-name: ${e}-bar;\n            }\n            #${e} .${l.f.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${e} .${l.f.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${e} .${l.f.TitleComponent}.${l.f.TitleLink}:${this.settings.isMobile?"active":"hover"} .${ha.Text} {\n                background-color: ${Object(Y.j)(this.settings.accentColorList.background,this.DT)}\n            }\n            #${e} .${l.f.SlideProgressBar} .${l.f.ProgressFill}.${l.f.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:l.l.Icons}\n            }\n            #${e} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${e} .${l.m.InheritTitleFontFamily} {\n                font-family: ${i} !important;\n            }\n            #${e} .${l.m.InheritBodyFontFamily} {\n                font-family: ${t} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(t)}iC(){var{bodyFontFamily:e,titleFontFamily:t}=this.settings.fontFamilySettings;return Object(k.h)(e)&&Object(k.h)(t)?this.settings.fontFamilySettings:{titleFontFamily:Object(S.q)(this.$container),bodyFontFamily:Object(S.j)(this.$container)}}JT(){this.eC()&&this.hideExpandButton()}eC(){return this.sC()||!this.nC()}sC(){return this.settings.os===K.b.Ios}nC(){return!0===this.settings.expandButtonEnabled}rC(e={}){const t=this.getComponent(ie.CtaButton);t&&Object(k.h)(e.label)&&t.changeLabel(e.label)}hideExpandButton(){this.ZT().hideExpandButton()}showExpandButton(){this.ZT().showExpandButton()}ZT(){return this.getComponent(ie.PlayspaceSettingsMenu)}WT(e=[]){this.UT.setCapabilityList(e)}GT(t=!0){const{excludedComponents:e,includedComponents:i}=this.UT.getComponentList();e.map(e=>this.getComponent(e)).forEach(e=>e&&e.hideComponent(t)),i.map(e=>this.getComponent(e)).forEach(e=>e&&e.showComponent(t))}updateQualityMenu(e){const t=this.getComponent(ie.PlayspaceSettingsMenu);t&&t.updateQualityMenu(e)}updateQuality(e){const t=this.getComponent(ie.PlayspaceSettingsMenu);t&&t.updateQuality(e)}setTotalSlides(e){const t=this.getComponent(ie.PlayspaceProgressBar);t&&t.setSlides(e)}setDuration(e){const t=this.getComponent(ie.PlayspaceProgressBar);t&&(t.setDuration(e),this.currentState.updateDuration())}setCurrentIndex(e){const t=this.getComponent(ie.PlayspaceProgressBar);t&&t.setCurrentIndex(e)}updateVolume(e){const t=this.getComponent(ie.VolumeButton);t&&t.setState(0<e?wt.Unmute:wt.Mute)}expand(){this.ZT().setExpand()}collapse(){this.ZT().setCollapse()}onResizeUi(e,t){this.KT.closeAllContextMenus(),this.YT(e,t)}onFirstTimeInView(){const e=this.getComponent(ie.TopTitle);e&&e.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(e){Object(S.J)(this.QT,e)}get $mediaContainer(){return this.QT}onSlideTransitionStart(i){const e=this.getComponent(ie.PlayspaceProgressBar);e&&e.pauseProgress(),this.WT(i),this.GT(),this.FT.forEach(e=>{const t=this.getComponent(e);t&&t.onSlideTransitionStart&&t.onSlideTransitionStart(i)})}onSlideTransitionEnd(){this.FT.forEach(e=>{const t=this.getComponent(e);t&&t.onSlideTransitionEnd&&t.onSlideTransitionEnd()})}onSlideTimeUpdate(i,r){this.FT.forEach(e=>{const t=this.getComponent(e);t&&t.onSlideTimeUpdate&&t.onSlideTimeUpdate(i,r)})}updateCapabilityMetadata(e){e.type===Zo.CtaButton&&this.rC(e.metadata)}get footer(){return this.eI}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}}const pl={StateChanged:"stateChanged",ContentReset:"contentReset",ContentStart:"contentStart",ContentEnd:"contentEnd"};class gl{constructor(e,t,i,r,s,n,o){this.mediator=e,this.aC=t,this.hC=i,this.oC=r,this.cC=s,this.lC=n,this.uC=o,this.dC=!1,this.fC=!1,this.pC=!1,this.fl=!1,this.bC=!1,this.vC=!0,this.mC=()=>{this.dC=!0,this.gC===V.PlayingState?this.play(!1):this.pause(!1)},this.yC=()=>{switch(this.fC=!0,this.lC){case Uo.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case Uo.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.wC=null,this.xC=null,this.uC&&(this.dC=!0)}kC(e){this.wC!==e&&(this.xC=this.wC,this.wC=e,this.mediator.publish(this,pl.StateChanged,{payload:this.wC}))}SC(e){return this.wC===e}resume(){this.xC&&this.kC(this.xC)}stop(){this.aC.stop(),this.kC(V.StoppedState)}handleSlidesEnd(){this.OC()}_C(){this.kC(V.PrerollState)}OC(){this.mediator.publish(this,Bo.ContentEnd),this.cC?this.kC(V.PostrollState):this.yC()}jC(e){return e===V.PrerollState||e===V.PostrollState}AC(e){return e===V.PrerollState&&this.dC||e===V.PostrollState&&this.fC}setViewabilityState(e){this.fl=e}play(e){if(this.gC=V.PlayingState,!(this.SC(V.PlayingState)||this.SC(V.HiddenState)&&this.pC||this.jC(this.wC)&&!this.AC(this.wC)||this.SC(V.StoppedState)&&!e))if(!this.oC||this.dC){if(this.SC(V.StoppedState))return this.dC=!1,void this.reset();this.hC.setDuration(this.aC.remainingTime),this.aC.play(),this.kC(V.PlayingState),this.vC&&(this.vC=!1,this.mediator.publish(this,Bo.ContentStart))}else this._C()}reset(){this.mediator.publish(this,pl.ContentReset),this.wC=null,this.fC=!1,this.vC=!0,this.aC.resetSlider(),this.play(!1)}pause(e){this.gC=V.PausedState,this.SC(V.PausedState)||this.SC(V.HiddenState)||this.jC(this.wC)&&!this.AC(this.wC)||this.SC(V.StoppedState)&&!e||(this.aC.pause(),this.kC(V.PausedState))}pauseToggle(){if(this.SC(V.PausedState)||this.SC(V.PlayingState))return this.SC(V.PausedState)&&this.bC?(this.bC=!1,void this.play(!1)):this.SC(V.PlayingState)?(this.bC=!0,void this.pause(!1)):void 0}hide(){this.aC.pause(),this.pC=!0,this.kC(V.HiddenState)}show(){this.SC(V.HiddenState)&&(this.pC=!1,this.xC!==V.PostrollState?this.xC!==V.PrerollState?this.fl?this.goToNextSlide():this.gC===V.PlayingState?this.play(!1):this.pause(!1):this.mC():this.yC())}setCurrentSlide(e){this.jC(this.wC)&&!this.AC(this.wC)||this.aC.setCurrentSlide(e)}goToNextSlide(){this.jC(this.wC)&&!this.AC(this.wC)||(this.aC.goToNextSlide(),this.SC(V.StoppedState)||this.play(!1))}goToPrevSlide(){this.jC(this.wC)||(this.play(!1),this.aC.goToPrevSlide())}exitRollBreak(){this.wC!==V.PostrollState?this.mC():this.yC()}}class ml extends n.a{constructor(e,t,i,r){super(),this.mediator=e,this.IC=t,this.bg=i,this.Lo=r,this.Zf=!1,this.TC=!1,Object(k.h)(t.imageUrl)||(t.imageUrl=se.a.endPoints.base.image),this.mu=new N,this.QT=this.bg.createElementByString(this.CC()),this.PC()}set isLoaded(e){this.TC=e}get isLoaded(){return this.TC}MC(e,t){var i=t<e?F.Landscape:F.Portrait;return{imageUrl:this.EC[i],altText:Object(k.a)(this.IC.altText)?this.IC.altText:"",queryParams:this.IC.mediaContext===Uo.ProtoMediaContextEnum.Logo?ne.getScaledImageQueryParams(e,t):ne.getSmartCroppedImageQueryParams(e,t),width:e,height:t}}PC(){var{imageUrl:e,portraitImageUrl:t}=this.IC;this.EC={[F.Landscape]:e,[F.Portrait]:Object(k.h)(t)?t:e}}get duration(){return this.IC.slideDuration*L.f}getThumbnailUrlParams(e,t){return this.MC(e,t)}destroy(){}}var wn=i(127),fl=i.n(wn);class yl extends ml{constructor(e,t,i,r){super(e,t,i,r),this.type=f.ProtoMediaTypeEnum.Image,this.LC=e=>{e.preventDefault()},this.RC()}RC(){this.IC.mediaContext===Uo.ProtoMediaContextEnum.Logo&&Object(S.a)(this.QT,wo.MediaLogo)}BC(){this.DC=this.QT.clientWidth,this.FC=this.QT.clientHeight}UC(){this.$C=setTimeout(()=>{var{clientWidth:e,clientHeight:t}=this.QT.parentElement,{imageUrl:i,altText:r,width:s,height:e,queryParams:t}=this.MC(e,t),t=this.mu.getImage(i,r,s,e,t,!0);this.ib&&this.QT.removeChild(this.ib),t&&(this.QT.appendChild(t),this.ib=t,this.VC(this.ib))},0)}NC(){this.ib&&Object(k.h)(this.IC.imageUrl)&&this.UC()}HC(){return Object(k.a)(this.QT)&&Object(k.a)(this.DC)&&Object(k.a)(this.FC)}qC(e){return!!this.HC()&&Math.abs(this.DC-this.QT.clientWidth)>=this.DC/e}zC(e){return!!this.HC()&&Math.abs(this.FC-this.QT.clientHeight)>=this.FC/e}VC(e){e.addEventListener("mousedown",this.LC)}WC(e){e.removeEventListener("mousedown",this.LC)}CC(){return fl.a}reset(){this.isLoaded&&(this.QT.style.transitionDuration="",this.QT.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.qC(10)||this.zC(10))&&(this.NC(),this.BC())}play(){this.isLoaded&&(this.QT.style.transform="",this.QT.style.transitionDuration=`${this.IC.slideDuration}s`,Object(S.O)(this.QT,l.j.Paused,l.j.Playing))}pause(){this.isLoaded&&(this.QT.style.transitionDuration="",this.QT.style.transform=this.bg.getTransformPropertyValue(this.QT),Object(S.O)(this.QT,l.j.Playing,l.j.Paused))}load(e){this.isLoaded||(this.isLoaded=!0,e.appendChild(this.QT),this.BC(),this.pause(),this.UC())}destroy(){this.ib&&this.WC(this.ib),clearTimeout(this.$C),super.destroy()}}var bl,wn=i(128),vl=i.n(wn);class Pl{constructor(t){this.GC=[{id:q.H264,extension:"mp4",type:"video/mp4"},{id:q.Hevc,extension:"mp4",type:"video/mp4"}],this.JC=this.GC.find(e=>e.id===t)}get type(){var e=this.JC.codecs?`codecs=${this.JC.codecs}`:"";return`${this.JC.type}; ${e}`}get id(){return this.JC.id}}class Sl{constructor(e,t,i){this.mediator=e,this.Lo=t,this.QC=i,this.XC={quality:U.Auto,height:360},this.resizeObserverBinded=!1,this.YC=30,this.Go=()=>{var e=this.QC.clientHeight;this.KC(e)&&this.currentQualitySettings.quality===U.Auto&&(e={height:e,quality:U.Auto},this.setCurrentQualitySettings(e),this.mediator.publish(this,$.CurrentQuality,{payload:e}))}}setCurrentQualitySettings(e){this.XC.quality=e.quality,this.XC.height!==e.height&&(this.XC.height=e.height,this.mediator.publish(this,$.Change))}KC(e){return!this.XC.height||e/this.XC.height*100-100>this.YC}addResizeObserver(){this.resizeObserverBinded=!0,this.Lo.on(this.QC,this.Go)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Lo.off(this.QC,this.Go)}setQuality(e){e.quality===U.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:e.height,quality:e.quality}),this.addResizeObserver(),this.Go()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(e)),this.mediator.publish(this,$.CurrentQuality,{payload:this.XC})}get currentQualitySettings(){return this.XC}destroy(){this.removeResizeObserver()}}const Il={TrackLoaded:"trackLoaded"},Tl={height:0,quality:U.Auto};class kl extends n.a{constructor(e,t,i){super(),this.mediator=e,this.bg=t,this.pg=i,this.ZC=[],this.tP=()=>{this.mediator.publish(this,Il.TrackLoaded)}}iP(e){this.eP=e,this.sP()}nP(e){this.pg.innerHTML="",e.forEach(e=>{this.pg.appendChild(e)})}rP(){return this.ZC}sP(){if(this.ZC=[],this.eP&&this.eP.subtitle){const e=this.bg.createElement("track");e.src=this.eP.subtitle,e.srclang="en",e.kind="subtitle",e.default=!0,e.addEventListener("load",this.tP,!1),e.addEventListener("loaded",this.tP,!1),this.ZC.push(e)}}}class Al extends kl{constructor(e,t,i,r,s,n={},o){super(e,t,s),this.Lo=i,this.xb=r,this.aP=o,this.hP=null,this.oP=10.13,this.cP=this.lP(n)}start(){try{this.uP=new Sl(this,this.Lo,this.xb),this.dP(),this.setQuality(this.aP)}catch(e){Object(g.a)({message:"Mp4SourceHandler_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}onQualityChanged(){return this.attachMedia()}setSource(e,t=!1){this.iP(e),this.fP(this.pP(),t)}setQuality(e){this.uP.setQuality(e)}get currentQualitySettings(){return this.uP.currentQualitySettings}attachMedia(){return new Promise(e=>{this.bP(),e()})}detachMedia(){this.pg.removeAttribute("src"),this.fP(null)}destroy(){this.uP.destroy()}dP(){this.relay($.CurrentQuality,this.uP,this,this.mediator),this.subscribe($.Change,this.uP,()=>{this.vP()})}vP(){this.fP(this.pP()),this.mediator.publish(this,$.Change,{payload:this.uP.currentQualitySettings.height})}mP(e){this.nP(e),this.pg.load()}pP(){return[...this.gP(),...this.rP()]}gP(){if(!this.pg||!this.eP)return[];const i=[];return this.eP.getSources(this.uP.currentQualitySettings.height,this.cP).forEach(e=>{const t=this.bg.createElement("source");t.src=e.src,t.type=e.type,i.push(t)}),i}bP(){this.hP&&(this.mP(this.hP),this.hP=null)}fP(e,t=!1){this.hP=e,t&&this.bP()}lP(e){let t;switch(e.os){case K.b.Ios:t=[q.Hevc,q.H264];break;case K.b.Mac:t=e.osVersion>this.oP&&e.browser===Ot.a.Safari?[q.Hevc,q.H264]:[q.H264];break;default:t=[q.H264]}return t.map(e=>new Pl(e))}}const Ol={UnexpectedError:"unexpectedError",BufferingError:"bufferingError",FragBuffered:"fragBuffered",ManifestLoaded:"manifestLoaded",LevelSwitching:"levelSwitching",StreamEnded:"streamEnded"};(wn=bl=bl||{}).Http="http",wn.Https="https";var Cl,wl=i(40);const xl={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class El extends kl{constructor(e,t,i,r,s,n){super(e,t,i),this.yP=r,this.aP=s,this.wP=n,this.xP=[],this.kP=U.Auto,this.SP=320,this.OP=!1,this._P=!1,this.jP=!1,this.yg=()=>{this.gg.off(Ar.Events.MEDIA_ATTACHED,this.yg);var e=this.AP(this.IP);this.gg.loadSource(e),this.gg.once(Ar.Events.MANIFEST_PARSED,this.wg)},this.wg=()=>{this.gg.off(Ar.Events.MANIFEST_PARSED,this.wg),this.gg.on(Ar.Events.LEVEL_SWITCHING,this.TP),this.gg.on(Ar.Events.LEVEL_SWITCHED,this.CP),this.gg.on(Ar.Events.FRAG_BUFFERED,this.PP),this.gg.on(Ar.Events.FRAG_LOADING,this.MP),this.gg.on(Ar.Events.FRAG_LOADED,this.EP),this.gg.on(Ar.Events.BUFFER_APPENDING,this.LP),this.gg.on(Ar.Events.BUFFER_APPENDED,this.RP),this.gg.on(Ar.Events.BUFFER_EOS,this.BP),this.IP=null,this.DP(),this.FP(),this.UP(),this.$P.resolve()},this.VP=()=>{this.IP=null,this.pg.removeEventListener(W.LoadedMetadata,this.VP),this.NP.resolve()},this.FP=()=>{var e=this.xP.map(e=>({videoHeight:e.height,isHD:720<=e.height,label:e.level.toString()}));this.mediator.publish(this,Ol.ManifestLoaded,{payload:{qualityList:e}})},this.PP=()=>{this.mediator.publish(this,Ol.FragBuffered)},this.MP=()=>{this.OP=!0},this.EP=()=>{this.OP=!1},this.LP=()=>{this._P=!0},this.RP=()=>{this._P=!1},this.BP=()=>{this.mediator.publish(this,Ol.StreamEnded)},this.vg=(e,t)=>{if(t.details===Ar.ErrorDetails.BUFFER_STALLED_ERROR&&(this.OP||this._P?this.mediator.publish(this,Ol.BufferingError):(this.jP||(this.gg.recoverMediaError(),this.pg.play().then(()=>{this.jP=!1}).catch(()=>{this.jP=!1})),this.jP=!0)),t.fatal)switch(t.type){case Ar.ErrorTypes.NETWORK_ERROR:if(t.details===Ar.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.HP("hls_network_error_manifest_parsing_error_FATAL");if(t.details===Ar.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mediator.publish(this,Ol.UnexpectedError);this.gg.startLoad();break;case Ar.ErrorTypes.MEDIA_ERROR:this.gg.recoverMediaError();break;default:this.HP("hls_unexpected_error_FATAL",`type_${t.type}_details_${t.details}`)}else t.type===Ar.ErrorTypes.MEDIA_ERROR&&t.details===Ar.ErrorDetails.BUFFER_APPENDING_ERROR&&this.HP("hls_media_error_buffer_appending_error"),t.type===Ar.ErrorTypes.NETWORK_ERROR&&t.details===Ar.ErrorDetails.MANIFEST_PARSING_ERROR&&this.HP("hls_network_error_manifest_parsing_error")},this.qP=()=>{this.HP("hls_video_tag_error",`code_${this.pg.error.code}_message_${this.pg.error.message}`)},this.CP=(e,t)=>{this.SP=this.xP.find(e=>e.level===t.level).height,this.mediator.publish(this,$.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,$.CurrentQuality,{payload:this.currentQualitySettings})},this.TP=()=>{this.mediator.publish(this,Ol.LevelSwitching)},Or&&(this.gg=this.bg.initHls(xl),this.wP&&(this.gg.autoLevelCapping=1)),this.SP=this.aP.height,this.kP=this.aP.quality}start(){}get liveSyncPosition(){if(this.gg)return this.gg.liveSyncPosition}setSource(e,t=!1){this.zP=e.id,this.iP(e),this.IP=e,t&&this.attachMedia()}attachMedia(){return new Promise(e=>{var t;this.gg?this.gg.on(Ar.Events.ERROR,this.vg):this.pg.addEventListener(W.Error,this.qP),this.IP?(t=this.rP(),this.nP(t),(this.gg?this.WP():this.GP()).then(()=>{e()})):e()})}detachMedia(){this.xP=[],this.gg?(this.gg.detachMedia(),this.JP()):(this.pg.removeAttribute("src"),this.pg.removeEventListener(W.LoadedMetadata,this.VP),this.pg.removeEventListener(W.Error,this.qP))}setQuality(e){this.kP=e.quality,this.SP=e.height,this.gg&&this.UP(),this.mediator.publish(this,$.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,$.CurrentQuality,{payload:this.currentQualitySettings})}get currentQualitySettings(){return{quality:this.kP,height:this.SP}}onQualityChanged(){return new Promise(()=>{})}destroy(){this.gg?(this.JP(),this.gg.destroy(),this.gg=null):(this.pg.removeEventListener(W.LoadedMetadata,this.VP),this.pg.removeEventListener(W.Error,this.qP))}WP(){return this.$P=new wl.a,this.gg.attachMedia(this.pg),this.gg.once(Ar.Events.MEDIA_ATTACHED,this.yg),this.$P.promise}GP(){return this.NP=new wl.a,this.pg.src=this.AP(this.IP),this.pg.addEventListener(W.LoadedMetadata,this.VP),this.NP.promise}JP(){this.gg.off(Ar.Events.MEDIA_ATTACHED,this.yg),this.gg.off(Ar.Events.MANIFEST_PARSED,this.wg),this.gg.off(Ar.Events.ERROR,this.vg),this.gg.off(Ar.Events.LEVEL_SWITCHING,this.TP),this.gg.off(Ar.Events.LEVEL_SWITCHED,this.CP),this.gg.off(Ar.Events.FRAG_BUFFERED,this.PP),this.gg.off(Ar.Events.FRAG_LOADING,this.MP),this.gg.off(Ar.Events.FRAG_LOADED,this.EP),this.gg.off(Ar.Events.BUFFER_APPENDING,this.LP),this.gg.off(Ar.Events.BUFFER_APPENDED,this.RP),this.gg.off(Ar.Events.BUFFER_EOS,this.BP)}DP(){this.gg.levels.forEach((e,t)=>{this.wP&&1<t||this.xP.push({level:t,height:e.height})})}HP(e,t){Object(g.a)({message:e,exception:this.zP,level:f.ProtoLoggingLevelEnum.WARNING,callStack:t}),this.mediator.publish(this,Ol.UnexpectedError)}UP(){if(this.kP===U.Auto)this.gg.currentLevel=-1;else try{this.gg.currentLevel=this.xP.find(e=>e.height===this.SP).level}catch(e){Object(g.a)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}AP(e){try{var t=e.getHlsSource(),i=Object(Y.g)(t);return i&&i.protocol?t:`${this.yP}:${t}`}catch(e){Object(g.a)({exception:e.message,message:"HlsSourceHandler_undefined_sourceMeta",level:f.ProtoLoggingLevelEnum.FATAL,callStack:e.stack,throttle:5,sendMaxLog:!1})}}}(wn=Cl=Cl||{}).Disabled="disabled",wn.Hidden="hidden",wn.Showing="showing";class Ll{constructor(e,t,i,r,s){this.mediator=e,this.pg=t,this.Cg=i,this.Ob=s,this.QP=!1,this.XP=!1,this.YP=Cl.Hidden,this.KP=0,this.Pg=!1,this.ZP=null,this.tM=e=>{switch(e.type){case W.Play:if(!this.Pg&&this.Ob.config.isInAppAndroid)return void this.pause();this.QP=!0;break;case W.Timeupdate:this.mediator.publish(this,e.type,{payload:this.QP});break;case W.Error:var t=this.pg.error?this.pg.error.message:"";this.mediator.publish(this,G.PlayError,{payload:t});break;case W.LoadedMetadata:this.XP=!0,Object(k.d)(this.iM)&&(this.currentTime=this.iM,this.iM=null),this.mediator.publish(this,e.type);break;default:this.mediator.publish(this,e.type)}},this.play=()=>(this.Pg=!0,this.ZP=this.pg.play(),null!==this.ZP?(this.KP++,this.ZP.then(()=>{this.QP=!0,this.Ob.config.os.os===K.b.Ios&&Object(S.C)(this.pg),this.KP--,this.eM(),this.ZP=null}).catch(e=>{throw this.mediator.publish(this,G.PlayError,{payload:e}),this.QP=!1,this.KP--,this.ZP=null,e})):Promise.resolve()),this.pause=()=>{null!==this.ZP?this.ZP.then(this.sM).catch(this.sM):this.nM()},this.sM=()=>{1<this.KP||this.nM()},this.volume=r,this.dP()}dP(){this.Cg.forEach(e=>{this.pg.addEventListener(e,this.tM)})}eM(){this.pg.textTracks&&0!==this.pg.textTracks.length&&Object.keys(this.pg.textTracks).forEach(e=>{this.pg.textTracks[e].mode=this.YP})}set poster(e){Object(k.h)(e)&&(this.pg.poster=e)}get poster(){return this.pg.poster}nM(){this.pg.pause(),this.QP=!1,this.Pg=!1}get volume(){return this.Ju}set volume(e){this.Ju=e<=1?e:e/100,this.pg.volume=this.Ju,Object(S.V)(this.pg,this.Ju)}get currentTime(){return this.pg.currentTime}set currentTime(e){this.XP?this.pg.currentTime=e:this.iM=e}get duration(){return this.pg.duration}get playing(){return this.QP}destroy(){this.Cg.forEach(e=>{this.pg.removeEventListener(e,this.tM)})}setTrackModes(e){this.YP=e,this.eM()}setMetaLoaded(e){this.XP=e}setCrossOriginAttribute(){this.pg.getAttribute("crossorigin")||this.pg.setAttribute("crossorigin","anonymous")}setPoster(e){this.poster=e.getThumbnailUrl(this.pg.clientWidth,this.pg.clientHeight)}getCurrentTrack(){return this.pg.textTracks&&0!==this.pg.textTracks.length?this.pg.textTracks[0]:null}isPlayPending(){return 0<this.KP}}class Rl extends n.a{constructor(e,t,i,r,s,n,o={},a,l){if(super(),this.mediator=e,this.Ob=t,this.bg=i,this.xb=r,this.Lo=s,this.rM=n,this.JC=o,this.aM=a,this.aP=l,this.hM=!0,this.oM=!1,this.cM=!1,this.lM=()=>{let e;this.currentTrack.activeCues&&0<this.currentTrack.activeCues.length&&(e=this.currentTrack.activeCues[0]),this.mediator.publish(this,P[P.CaptionUpdate],{payload:e})},this.tP=()=>{this.currentTrack&&(this.currentTrack.mode=this.uM?Cl.Hidden:Cl.Disabled,this.currentTrack.oncuechange=this.lM)},this.dM(),this.fM.appendChild(this.pg),this.xb.appendChild(this.fM),this.aP=this.aP||Tl,this.pM=new Al(this,i,this.Lo,this.xb,this.pg,this.JC,this.aP),Or||this.pg.canPlayType("application/vnd.apple.mpegurl")){const e=this.bg.isHttpsProtocolUsed()?bl.Https:bl.Http,t=Object(k.h)(this.Ob.config.bundleID);this.Ng=new El(this,this.bg,this.pg,e,this.aP,t),this.bM()}else this.hM=!1,Object(g.a)({message:"Hls_not_supported",level:f.ProtoLoggingLevelEnum.INFO})}start(){try{this.Cg=Object(d.a)(W),this.vM=new Ll(this,this.pg,this.Cg,this.rM,this.Ob),this.mM(),this.gM(),this.yM()}catch(e){Object(g.a)({message:"VideoHandler_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}wM(){const e=this.currentTime;this.setSource(this.xM,!0,this.pM),this.kM.attachMedia().then(()=>{this.vM.play().then(()=>{this.cM=!1,this.SM.resolve(),this.vM.currentTime=e}).catch(e=>{this.SM&&this.SM.isPending&&(this.cM=!1,this.SM.reject(),Object(g.a)({message:"VideoHandler_hls_error_content_player_play",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL}))})}).catch(e=>{this.SM&&this.SM.isPending&&(this.cM=!1,this.SM.reject()),Object(g.a)({message:"VideoHandler_hls_error_attach_media",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL})})}bM(){this.subscribe(Ol.UnexpectedError,this.Ng,()=>{this.cM=!0,this.wM()}),this.subscribe(Ol.ManifestLoaded,this.Ng,({payload:e})=>{this.mediator.publish(this,$.Loaded,{payload:{qualityList:e,videoMeta:this.xM}}),this.vM.setMetaLoaded(!0)}),this.subscribe(Ol.BufferingError,this.Ng,()=>{this.mediator.publish(this,G.Buffering)}),this.subscribe(Ol.FragBuffered,this.Ng,()=>{this.mediator.publish(this,G.Buffered)}),this.subscribe(Ol.StreamEnded,this.Ng,()=>{this.mediator.publish(this,G.EndOfStream)}),this.subscribe(Ol.LevelSwitching,this.Ng,()=>{this.mediator.publish(this,G.LevelSwitching)})}mM(){this.OM(this.pM)}gM(){this.Ng&&this.OM(this.Ng)}OM(e){e.start(),this._M(e)}yM(){this.Cg.forEach(t=>{this.subscribe(t,this.vM,e=>{t===W.Canplay&&this.aM&&(this.currentTime=this.aM,this.aM=null),this.mediator.publish(this,t,e)})}),this.relay(G.PlayError,this.vM,this,this.mediator)}_M(e){this.relay([$.CurrentQuality,G.NewVideo],e,this,this.mediator),this.subscribe($.Change,e,({payload:e})=>{this.onQualityChanged(e)}),this.subscribe(Il.TrackLoaded,e,()=>{this.tP()})}get width(){return this.fM.getBoundingClientRect().width}get height(){return this.fM.getBoundingClientRect().height}get currentTime(){return this.vM.currentTime}set currentTime(e){this.vM.currentTime=e}forceCurrentTime(e){this.vM.currentTime=e,this.aM=e}get duration(){return this.vM.duration}get volume(){return this.vM.volume}set volume(e){this.vM.volume=e}get playing(){return this.vM.playing}get isIosFullscreen(){return this.oM}set isIosFullscreen(e){this.oM=e,this.oM&&this.uM?this.jM():this.AM()}get currentQualitySettings(){return this.kM.currentQualitySettings}hide(){Object(S.a)(this.fM,l.d)}show(){Object(S.L)(this.fM,l.d)}setSource(i,r=!1,s){return this.aM=null,new Promise((e,t)=>{try{this.xM=i,this.kM&&this.kM.detachMedia(),s?this.IM(s):Object(k.h)(i.hlsFilePath)&&this.Ng?this.kM=this.Ng:this.IM(this.pM),i&&i.subtitle&&this.vM.setCrossOriginAttribute(),this.vM.setPoster(i),this.vM.setTrackModes(this.uM?Cl.Hidden:Cl.Disabled),r&&this.vM.setMetaLoaded(!1),this.kM.setSource(i,r),this.mediator.publish(this,G.NewVideo),e()}catch(e){Object(g.a)({message:"VideoHandler_set_video_source",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL}),t()}})}setQuality(e){this.kM.setQuality(e)}pause(){this.vM.pause()}play(){return this.SM=new wl.a,this.kM.attachMedia().then(()=>{this.vM.play().then(()=>{this.SM.resolve()}).catch(e=>{!this.cM&&this.SM&&this.SM.isPending&&(this.SM.reject(),Object(g.a)({message:"VideoHandler_public_play_content_player_play",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL}))})}).catch(e=>{this.SM&&this.SM.isPending&&this.SM.reject(e),Object(g.a)({message:"VideoHandler_public_play_attach_media_error",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL})}),this.SM.promise}isPlayPending(){return this.vM.isPlayPending()}showCaptions(){this.uM=!0,this.vM.setTrackModes(Cl.Hidden)}hideCaptions(){this.uM=!1,this.vM.setTrackModes(Cl.Disabled),this.currentTrack&&this.mediator.publish(this,P[P.CaptionUpdate])}destroy(){this.kM.destroy(),this.fM.parentNode.removeChild(this.fM)}dM(){this.fM=this.bg.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.pg=this.bg.createElementByString('<video class="cnx-video-tag"></video>'),this.JC.os===K.b.Ios&&(this.pg.setAttribute("playsinline",""),this.pg.setAttribute("webkit-playsinline",""))}IM(e){this.kM=e,this.kM.setQuality({quality:U.Auto,height:0})}onQualityChanged(e){var t=this.vM.playing;this.aM=this.currentTime,t&&this.kM.onQualityChanged&&this.kM.onQualityChanged().then(()=>{this.vM.setMetaLoaded(!1),this.vM.play().catch(e=>{Object(g.a)({message:"VideoHandler_quality_changed",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})})}),this.mediator.publish(this,$.Change,{payload:e})}get currentTrack(){return this.vM.getCurrentTrack()}jM(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,P[P.CaptionUpdate]),this.currentTrack.mode=Cl.Showing)}AM(){if(this.currentTrack){switch(this.currentTrack.mode){case Cl.Showing:case Cl.Hidden:this.uM=!0;break;case Cl.Disabled:this.uM=!1}this.mediator.publish(this,this.uM?P[P.CaptionOn]:P[P.CaptionOff])}this.tP()}}class Ml extends class{constructor(e,t,i){this.nj=e,this.TM=t,this.CM=[],this.PM=[],this.MM=[],this.EM=[],this.LM=[],this.yp=[],this.RM=i.title,this.ml=i.altText,this.BM=i.description,this.Og=i.clickUrl,this.CM=i.keywordList,this.DM=i.languageId,this.PM=i.trackList,this.FM=i.thumbnail,this.yt=i.duration,this.EM=i.customFields,this.UM=i.hlsFilePath,this.$M=i.sourceItemId,this.LM=i.videoIndexes,Object(p.h)(i.renditionList)&&(this.MM=this.VM(i.renditionList),this.NM(i.renditionList))}VM(e){return e.sort((e,t)=>e.height-t.height)}setAvailableQualities(e){this.yp=e}NM(e){Object(p.e)("height",e).forEach((e,t)=>{this.yp.push({videoHeight:e.height,label:`${e.height}p`,isHD:720<=e.height})})}HM(t,i){return this.MM.find(e=>e.codec===t&&e.height===i)}qM(e,t){let i=`${e}${this.nj}/`;return Object(k.h)(this.TM)?i+=`${this.TM}/${t}`:i+=t,i}zM(e,t){e=Object(Q.c)(e,this.yp.map(e=>e.videoHeight));return this.HM(t,e)}get hlsFilePath(){return this.UM}getAvailableQualities(){return this.yp}getClosestSourceQuality(e){let t;const i=Object(Q.c)(e,this.yp.map(e=>e.videoHeight));return this.yp.forEach(e=>{e.videoHeight===i&&(t=e)}),t}getSources(i,e){const r=[];return e.forEach(e=>{var t=this.zM(i,e.id);Object(p.h)(r)||t&&r.push({src:this.qM(se.a.endPoints.base.video,t.file),type:e.type})}),r}getHlsSource(){return this.qM(se.a.endPoints.base.video,this.UM)}getThumbnailUrl(e,t){var i=this.qM(se.a.endPoints.base.image,this.FM);return ne.getSmartCroppedImageUrl(i,e,t)}get title(){return this.RM}get altText(){return Object(k.a)(this.ml)?this.ml:""}get description(){return this.BM}get clickUrl(){return this.Og}get keywords(){return this.CM}get languageId(){return this.DM}get sourceItemId(){return this.$M}get subtitle(){if(this.PM&&this.PM[0])return this.qM(se.a.endPoints.base.video,this.PM[0].file)}get spriteSheet(){return this.WM}get duration(){return this.yt}get id(){return this.nj}get customFields(){return this.EM}get videoIndexes(){return this.LM}}{constructor(e){super(null,null,e)}getSources(i,e){return e.map(({id:e,type:t})=>{e=this.zM(i,e);if(e)return{type:t,src:`${e.file}`}}).filter(e=>e)}getThumbnailUrl(e,t){return ne.getSmartCroppedImageUrl(this.FM,e,t)}}class Bl extends ml{constructor(e,t,i,r,s,n=0,o={}){super(e,t,r,s),this.Ob=i,this.rM=n,this.JC=o,this.GM=.1,this.type=f.ProtoMediaTypeEnum.Video,this.JM={[F.Landscape]:{renditionList:[],videoSourceMeta:void 0},[F.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.QM=null,this.getClosestSourceQuality=e=>(this.XM||this.YM(),this.JM[this.XM].videoSourceMeta.getClosestSourceQuality(e)),this.KM(),this.ZM()}KM(){this.IC.videoRendition.renditions.forEach(({codec:e,height:t,width:i,videoUrl:r})=>{r={codec:Uo.ProtoPlayspaceCodecEnum[e],height:t,file:r};(t<i?this.JM[F.Landscape]:this.JM[F.Portrait]).renditionList.push(r)});var e=this.JM[F.Landscape].renditionList,t=this.JM[F.Portrait].renditionList;Object(p.h)(e)||Object(p.h)(t)?(Object(p.h)(e)||(this.JM[F.Landscape].renditionList=t),Object(p.h)(t)||(this.JM[F.Portrait].renditionList=e)):Object(g.a)({message:"SlideVideo_no_renditions",level:f.ProtoLoggingLevelEnum.FATAL})}ZM(){Object.keys(this.JM).forEach(e=>{const t=this.JM[e];t.videoSourceMeta=new Ml({title:this.IC.title,altText:this.IC.altText,clickUrl:this.IC.clickUrl,renditionList:t.renditionList,thumbnail:this.IC.imageUrl})})}tE(e){this.iE=new Rl(this,this.Ob,this.bg,e,this.Lo,this.rM,this.JC,this.GM)}eE(){this.subscribe($.Change,this.iE,({payload:e})=>{e=this.getClosestSourceQuality(e);this.mediator.publish(this,$.Change,{payload:e.videoHeight})})}YM(){var{clientHeight:e,clientWidth:t}=this.QT;this.XM=e<t?F.Landscape:F.Portrait}sE(e){let t;this.iE&&(e&&(t=this.iE.currentTime),this.iE.setSource(this.JM[this.XM].videoSourceMeta,!0).then(()=>{e&&this.iE.forceCurrentTime(t),this.iE.playing&&this.nE()}))}CC(){return vl.a}nE(){this.iE.play().catch(()=>{})}play(){this.isLoaded&&this.nE()}pause(){this.isLoaded&&this.iE.pause()}reset(){this.TC&&(this.iE.currentTime=this.GM)}load(e){this.isLoaded||(e.appendChild(this.QT),this.isLoaded=!0,this.tE(this.QT),this.eE(),this.iE.start(),this.YM(),this.sE(),this.QM&&this.setQuality(this.QM),this.pause())}getAvailableQualities(){return this.JM[this.XM].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.iE.currentQualitySettings}get volume(){return this.isLoaded?this.iE.volume:this.rM}set volume(e){this.isLoaded?this.iE.volume=e:this.rM=e}setQuality(e){this.iE?this.iE.setQuality(e):this.QM=e}onSlideResizeCallback(){const e=this.XM;this.bg.cancelRequestAnimationFrame(this.rE),this.rE=this.bg.requestAnimationFrameHelper(()=>{if(this.YM(),e!==this.XM){const e=!0;this.sE(!0)}})}}class jl{constructor(e){this._A=e}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.aE()}\n            </cnx>\n        </cnx>\n        `.trim()}aE(){return this._A.disableCTARendering?"":`[[${ie.CtaButton}]]`}}class Dl extends me{enterState(){super.enterState();const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.startProgress();const t=this.context.getComponent(ie.CtaButton);t&&t.startProgress()}exitState(){super.exitState()}updateDuration(){const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.startProgress()}}class _l extends ye{enterState(){super.enterState();const e=this.context.getComponent(ie.PlayspaceProgressBar);e&&e.pauseProgress();const t=this.context.getComponent(ie.CtaButton);t&&t.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class Fl extends _l{enterState(){super.enterState()}exitState(){super.exitState()}}class Nl extends _l{enterState(){super.enterState()}exitState(){super.exitState()}}class Ul extends _l{enterState(){super.enterState()}exitState(){super.exitState()}}class Vl extends Se{constructor(e,t,i,r,s,n,o,a,l){super(e,t,i,s,new tl(i,l,r,t,{isMobile:n})),this.mediator=e,this.$container=t,this.bg=i,this.eI=o,this.PT=[ie.CtaButton],this.UT=new dl,this.Gd={[V.PlayingState]:new Dl(this),[V.PausedState]:new _l(this),[V.StoppedState]:new Fl(this),[V.HiddenState]:new Nl(this),[V.PrerollState]:new Ul(this),[V.PostrollState]:new Ul(this)},this.hE(),this.Gd[a].enterState(),this.WT(),this.GT(!1)}hE(){const e=this.getComponent(ie.CtaButton);e&&e.setFooterElement(this.eI)}WT(e=[]){this.UT.setCapabilityList(e)}GT(t=!0){const{excludedComponents:e,includedComponents:i}=this.UT.getComponentList();e.map(e=>this.getComponent(e)).forEach(e=>e&&e.hideComponent(t)),i.map(e=>this.getComponent(e)).forEach(e=>e&&e.showComponent(t))}VT(e){switch(e){case Ro.CallToAction:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.UrlClick});break;case ce.a[ce.a.Scroll]:this.mediator.publish(this,Ro.GeneralClickInteraction,{payload:f.ProtoMediaClickTypeEnum.ScrollClick})}}handleComponentEvent(e,t,i){this.VT(e),e===Ro.CallToAction?Object(k.h)(t.payload)?this.mediator.publish(this,Ro.CallToAction,t):this.mediator.publish(this,P[P.Next]):this.mediator.publish(this,e,t)}handleCapabilityList(i){this.WT(i),this.GT(),this.PT.forEach(e=>{const t=this.getComponent(e);t&&t.handleCapabilities(i)})}}class ql extends n.a{constructor(e,t,i,r,s,n,o,a,l,d){super(),this.mediator=e,this.IC=t,this.bg=i,this._d=r,this.Lo=s,this.oE=n,this.Yn=o,this._A=a,this.eI=l,this.Nu=d,this.cE=[{type:Zo.TopLogo,metadata:{}}],this.jd=this.bg.createElementByString(`<cnx class="${wo.Slide}"></cnx>`),this.lE(),this.uE=this.jd.querySelector(".cnx-ui-ps-slide")}get $container(){return this.jd}get slideCapabilityList(){return this.cE}get metadata(){return this.IC}get media(){return this.oE}load(){this.oE.load(this.uE)}get clickUrl(){return this.IC.clickUrl}updateCapabilityMetadata(t){if(Object(p.h)(this.cE)){const e=this.cE.find(({type:e})=>e===t.type);e&&(e.metadata=Object.assign(Object.assign({},e.metadata),t.metadata))}}changeState(e){this.hC.changeState(e)}lE(){this.hC=new Vl(this,this.jd,this.bg,this.Lo,this.CC(),this.Yn,this.eI,this.Nu.playbackMode===Uo.ProtoPlayerPlaybackModeEnum.ClickToPlay?V.StoppedState:V.PausedState,this._d),this.subscribe(Ro.CallToAction,this.hC,({})=>{this.mediator.publish(this,Ro.CallToAction)}),this.relay(Ro.GeneralClickInteraction,this.hC,this,this.mediator),this.subscribe(P[P.Next],this.hC,()=>{this.mediator.publish(this,P[P.Next])})}CC(){return new jl(this._A).template}dE(e,t){this.cE.push({type:e,metadata:t})}fE(){var e=this.pE(this.IC);e&&this.dE(Zo.TopSlideTitle,{label:e,useTransition:!0})}pE(e){var t=e.publisherName||e.title,t=this.bg.stripHtmlTags(t).trim();return e.publisherName?`by <em>${t}</em>`:t}onSlideTransitionStart(e){this.hC&&this.hC.handleCapabilityList(e)}}class Hl extends ql{constructor(e,t,i,r,s,n,o,a,l,d){super(e,t,i,r,s,n,o,a,l,d),this.type=Uo.ProtoPlayspaceSlideTypeEnum.BulletList,Object(k.f)(t.bulletListMetadata)&&Object(p.h)(this.metadata.bulletListMetadata.items)?(this.bE(),this.onSlideTransitionStart(this.cE)):Object(g.a)({message:"BulletSlide_no_metadata",level:f.ProtoLoggingLevelEnum.FATAL})}bE(){this.vE(),this.fE(),this.mE()}vE(){const{title:e,items:t}=this.IC.bulletListMetadata;4<t.length&&(t.length=4);const i=Zo.SlideTitle,r={bulletChunkList:t,titleType:ea.Bullet};Object(k.h)(e)&&(r.label=e),this.dE(i,r)}mE(){var e={label:this.IC.storyTitle,useFallbackLabel:!0};this.dE(Zo.TopStoryTitle,e)}}class Wl extends ql{constructor(e,t,i,r,s,n,o,a,l,d){super(e,t,i,r,s,n,o,a,l,d),this.type=Uo.ProtoPlayspaceSlideTypeEnum.Description,Object(k.f)(t.descriptionMetadata)&&Object(p.h)(this.metadata.descriptionMetadata.chunkList)?(this.gE(),this.yE(),this.onSlideTransitionStart(this.cE)):Object(g.a)({message:"DescriptionSlide_no_metadata",level:f.ProtoLoggingLevelEnum.FATAL})}gE(){const{chunkList:e,label:t}=this.IC.descriptionMetadata;let i=!1;const r=e=>Object(k.e)(e);Object(k.f)(t)&&Object(k.h)(t.text)&&(i=!0,t.colorScheme=r(t.colorScheme)?t.colorScheme:Uo.ProtoPlayspaceColorSchemeEnum.Primary),Object(p.h)(e)&&e.forEach((e,t)=>{e.colorScheme=0!==t||i?r(e.colorScheme)?e.colorScheme:Uo.ProtoPlayspaceColorSchemeEnum.Secondary:r(e.colorScheme)?e.colorScheme:Uo.ProtoPlayspaceColorSchemeEnum.Primary})}yE(){this.wE(),this.mE(),this.fE()}wE(){const{chunkList:e,label:t}=this.IC.descriptionMetadata,i=Zo.SlideTitle,r={descriptionChunkList:e,titleType:ea.Description};Object(k.f)(t)&&(r.label=t.text,r.labelColorScheme=t.colorScheme),this.dE(i,r)}mE(){var e={label:this.IC.storyTitle,useFallbackLabel:!0};this.dE(Zo.TopStoryTitle,e)}}const Gl={[f.ProtoMediaTypeEnum.Image]:"Read more",[f.ProtoMediaTypeEnum.Video]:"Continue video"};class $l extends ql{constructor(e,t,i,r,s,n,o,a,l,d){super(e,t,i,r,s,n,o,a,l,d),this.type=Uo.ProtoPlayspaceSlideTypeEnum.Default,this.yE(),this.onSlideTransitionStart(this.cE)}yE(){this.xE(),this.kE(),this.SE(),this.OE(),this._E(),this.mE(),this.IC.publisherName&&this.fE()}xE(){var{clickUrl:e,title:t}=this.IC,t={url:e,label:t,titleType:ea.Default};this.dE(Zo.SlideTitle,t)}kE(){this.dE(Zo.PlaybackControls)}SE(){this.dE(Zo.PlaylistControls)}_E(){var{clickUrl:e,title:t}=this.IC;Object(k.h)(e)&&(t={url:e,label:this.jE(this.IC),title:t,ctaAlignToContent:!0},this.dE(Zo.CtaButton,t))}OE(){this.IC.mediaType===f.ProtoMediaTypeEnum.Video&&this.dE(Zo.VolumeControls)}mE(){var e=this.bg.stripHtmlTags(this.IC.storyTitle).trim();e&&this.dE(Zo.TopStoryTitle,{label:e,useFallbackLabel:!0})}jE(e){const{capabilityList:t,mediaType:i}=e;if(!Object(p.h)(t))return Gl[i];e=t.find(({type:e})=>e===Uo.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton);return e&&e.metadata?e.metadata.label:Gl[i]}}class zl extends ql{constructor(e,t,i,r,s,n,o,a,l,d,c){super(e,t,i,r,s,n,a,l,d,c),this.AE=o,this.type=Uo.ProtoPlayspaceSlideTypeEnum.Cover,this.IE(),this.yE(),this.onSlideTransitionStart(this.cE)}IE(){Object(S.a)(this.jd,ha.Cover)}yE(){this.xE(),this._E()}xE(){var e=Zo.SlideTitle,t={titleType:ea.Cover,coverChunk:this.IC.coverMetadata,label:`${this.AE} min. story`};this.dE(e,t)}_E(){var e={label:"START",duration:this.IC.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.dE(Zo.CtaButton,e)}}class Jl extends ql{constructor(e,t,i,r,s,n,o,a,l,d){super(e,t,i,r,s,n,o,a,l,d),this.type=Uo.ProtoPlayspaceSlideTypeEnum.Quote,Object(k.f)(t.quoteMetadata)?(this.yE(),this.onSlideTransitionStart(this.cE)):Object(g.a)({message:"QuoteSlide_no_metadata",level:f.ProtoLoggingLevelEnum.FATAL})}yE(){this.mE(),this.fE(),this.TE()}mE(){var e={label:this.IC.storyTitle,useFallbackLabel:!0};this.dE(Zo.TopStoryTitle,e)}TE(){var{text:e,source:t}=this.IC.quoteMetadata,i=Zo.SlideTitle,t={quote:e,source:t,titleType:ea.Quote};this.dE(i,t)}}class Ql extends ql{constructor(e,t,i,r,s,n,o,a,l,d){super(e,t,i,r,s,n,o,a,l,d),this.type=Uo.ProtoPlayspaceSlideTypeEnum.Instagram,this.IE(),this.yE(),this.onSlideTransitionStart(this.cE)}IE(){Object(S.a)(this.jd,ha.Instagram)}yE(){this.CE(),this.mE(),this.fE(),this._E()}CE(){var{createdDate:e,comments:t,likes:i}=this.IC.instagramMetadata,i={label:this.IC.title,instagramMetadata:{createdDate:e,comments:t,likes:i},titleType:ea.Instagram};this.dE(Zo.SlideTitle,i)}mE(){var e={label:this.IC.storyTitle,useFallbackLabel:!0};this.dE(Zo.TopStoryTitle,e)}_E(){var{clickUrl:e,title:t}=this.IC;Object(k.h)(e)&&this.dE(Zo.CtaButton,{url:e,label:"VISIT POST",title:t,ctaAlignToContent:!1,ctaAlignToFooter:!0})}PE(e){var t=this.metadata.instagramMetadata.handle||e.publisherName,t=this.bg.stripHtmlTags(t).trim();return e.publisherName?`by <em>${t}</em>`:t}fE(){var e=this.PE(this.IC);e&&this.dE(Zo.TopSlideTitle,{label:e,useTransition:!0})}}class Yl{constructor(e,t,i,r,s,n,o,a,l,d){this.Ob=e,this.bg=t,this._d=i,this.Lo=r,this.rM=s,this.JC=n,this.Yn=o,this.ME=a,this.eI=l,this.Nu=d,this.EE={[Uo.ProtoPlayspaceSlideTypeEnum.Description]:Wl,[Uo.ProtoPlayspaceSlideTypeEnum.Default]:$l,[Uo.ProtoPlayspaceSlideTypeEnum.Quote]:Jl,[Uo.ProtoPlayspaceSlideTypeEnum.BulletList]:Hl,[Uo.ProtoPlayspaceSlideTypeEnum.Instagram]:Ql}}getSlide(e,t,i){const r=this.EE[e.type]||$l,s=this.LE(e,t);return e.type!==Uo.ProtoPlayspaceSlideTypeEnum.Cover?new r(t,e,this.bg,this._d,this.Lo,s,this.Yn,this.ME,this.eI,this.Nu):new zl(t,e,this.bg,this._d,this.Lo,s,i,this.Yn,this.ME,this.eI,this.Nu)}LE(e,t){if(e.mediaType===f.ProtoMediaTypeEnum.Video)return new Bl(t,e,this.Ob,this.bg,this.Lo,this.rM,this.JC);if(e.mediaType===f.ProtoMediaTypeEnum.Image)return new yl(t,e,this.bg,this.Lo);throw new Error("Slide not found")}}var Xl,Kl,Zl,ed=i(53);class td extends n.a{constructor(e,t,i,r,s,n,o){super(),this.mediator=e,this.bg=t,this.Lo=i,this.Nu=r,this.Ob=s,this.rA=n,this.RE=o,this.BE=new ed.a(Uo.ProtoPlayspaceMediaMetadataResponse,"PlayspaceContentHandler"),this.DE=0,this.FE=!1,this.UE=e=>{e&&(this.hC.onFirstTimeInView(),this.Ob.services.ViewabilityService.off(this.rA,this.UE))},this.$E(),this.lE(),this.VE(),this.NE(),this.volume=this.Nu.soundMode===f.ProtoPlayerSoundMode.On?1:0,this.Nb(),this.Ob.services.ViewabilityService.on(this.rA,this.UE,{threshold:.5})}HE(e){return new Promise((t,i)=>{this.BE.fetchMetadata(e).then(e=>{window.parent.cnx_ps_slide_list&&Object(Yt.b)("cnx_ps_slide_list",this.Ob.config.pageUrl)&&(e.slides=[...window.parent.cnx_ps_slide_list,...e.slides]),e.slides=this.qE(e.slides),e.slides=this.zE(e.slides),2<=e.slides.length?t(e):this.FE?i({message:"fallbackstory_already_used"}):(this.FE=!0,this.WE().then(e=>{e=`${se.a.endPoints.base.metadata}${e.storyId}/${e.activeVersionId}.bin`;t(this.HE(e))}).catch(e=>{Object(g.a)({level:f.ProtoLoggingLevelEnum.FATAL,message:"PlayspaceContentH_error_getting_default_story"}),i(e)}))}).catch(e=>{i(e)})})}WE(){return new Promise((t,i)=>{Zr.a.sendProtoRequest({ProtoResponse:Uo.ProtoFallbackStoryResponse,endpoint:se.a.endPoints.api.fallbackstory,logError:!0}).then(e=>{t(e)}).catch(e=>{i(e)})})}qE(e){let t;if(Object(k.h)(this.Ob.config.appPageURL)){const{hostname:e,pathname:i}=Object(Y.g)(this.Ob.config.appPageURL);t=`${e}${i}`}else{const{hostname:e,pathname:r}=this.bg.getGlobalLocationProperties();t=`${e}${r}`}return e.filter(e=>{e=Object(Y.g)(e.clickUrl);return!(e&&e.hostname+e.pathname===t)})}zE(e){return e.filter(e=>e.type!==Uo.ProtoPlayspaceSlideTypeEnum.Stock)}VE(){var e=this.Ob.config.browser["browserType"],{os:t,osVersion:i}=this.Ob.config.os,r={disableCTARendering:this.Nu.disableCTARendering};this.aC=new No(this,this.bg,this.Ob.services.PageFocusService,this.hC.$mediaContainer,new Yl(this.Ob,this.bg,this.Ob.services.InteractionService,this.Lo,this.Nu.soundMode===f.ProtoPlayerSoundMode.On?1:0,{browser:e,os:t,osVersion:i},this.Ob.config.isMobile,r,this.hC.footer,this.Nu),this.Nu.isSeoTraffic)}$E(){this.GE={logoUrl:this.Nu.logoUrl,isMobile:this.Ob.config.isMobile,closeButtonMode:this.Nu.closeButtonMode,floatingCloseButtonMode:this.Nu.floatingCloseButtonMode,isCloseButton:this.Nu.isCloseButton,sharingDestinations:this.Nu.sharingDestinations,os:this.Ob.config.os.os,expandButtonEnabled:this.Nu.uiComponentsVisibility.expandButton,primaryColorList:{background:this.Nu.primaryColorList.background||l.l.PrimaryBackground,foreground:this.Nu.primaryColorList.foreground||l.l.PrimaryForeground},secondaryColorList:{background:this.Nu.secondaryColorList.background||l.l.SecondaryBackground,foreground:this.Nu.secondaryColorList.foreground||l.l.SecondaryForeground},accentColorList:{background:this.Nu.accentColorList.background,foreground:this.Nu.accentColorList.foreground||l.l.AccentForeground},useAccentColorForProgressBar:this.Nu.useAccentColorForProgressBar,disableClickUrl:this.Nu.disableClickUrl,fontFamilySettings:this.Nu.fontFamilySettings}}lE(){var e=new Vo({disableStoryProgressBarRendering:this.Nu.disableStoryProgressBarRendering,disableTitleRendering:this.Nu.disableTitleRendering});this.hC=new ul(this,this.rA,this.Ob.services.GlobalDomUtilsService,this.Ob.services.ResizeObserver,e.template,this.GE,this.Ob.config.appId,this.Nu.playbackMode===f.ProtoPlayerPlaybackModeEnum.ClickToPlay?V.StoppedState:V.PausedState,this.Ob.services.InteractionService),this.hC.setMediaContainerRatio(this.RE.getContentRatioContainer()),this.hC.show()}Nb(){this.subscribe(jo.SlideTransitionStart,this.aC,({payload:{nextSlide:e}})=>{const t=e;let i=[];t.media.type===f.ProtoMediaTypeEnum.Video&&(i=t.media.getAvailableQualities(),this.hC.updateQuality(t.media.currentQuality)),this.hC.updateQualityMenu(i),this.hC.onSlideTransitionStart(t.slideCapabilityList),t.onSlideTransitionStart(t.slideCapabilityList)}),this.subscribe(jo.SlideTransitionEnd,this.aC,()=>{this.hC.onSlideTransitionEnd()}),this.subscribe(jo.SlideTimeUpdate,this.aC,({payload:{elapsedTime:e,duration:t}})=>{this.hC.onSlideTimeUpdate(e,t)}),this.subscribe(jo.SlideChanged,this.aC,({payload:{index:e}})=>{this.hC.setCurrentIndex(e),this.hC.setDuration(this.aC.remainingTime),this.mediator.publish(this,Mo.ChangeSlide)}),this.subscribe(jo.SlideCycleEnd,this.aC,()=>{this.JE.handleSlidesEnd()}),this.subscribe($.Change,this.aC,({payload:e})=>{var t=this.aC.getCurrentSlide();t&&t.media.type===f.ProtoMediaTypeEnum.Video&&this.hC.updateQuality(t.media.currentQuality),this.mediator.publish(this,$.Change,{payload:e})}),this.subscribe(P[P.Play],this.hC,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}}),this.play(!0)}),this.subscribe(P[P.Pause],this.hC,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}}),this.pause(!0)}),this.subscribe(P[P.Volume],this.hC,({payload:e})=>{this.volume=e,this.mediator.publish(this,o.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,P[P.Volume],{payload:{volume:e}})}),this.subscribe(P[P.Close],this.hC,()=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,P[P.Close])}),this.subscribe(P[P.LogoClicked],this.hC,()=>{this.mediator.publish(this,P[P.LogoClicked])}),this.subscribe(Ro.ProgressBarItemClicked,this.hC,({payload:e})=>{this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}}),this.setSlide(e),this.mediator.publish(this,Ro.ProgressBarItemClicked,{payload:e})}),this.subscribe(Ro.CallToAction,this.aC,()=>{this.mediator.publish(this,Ro.CallToAction)}),this.subscribe(P[P.Expand],this.hC,()=>{this.mediator.publish(this,P[P.Expand])}),this.subscribe(P[P.Collapse],this.hC,()=>{this.mediator.publish(this,P[P.Collapse])}),this.subscribe(ce.a[ce.a.HoldStart],this.hC,()=>{this.JE.pauseToggle()}),this.subscribe(ce.a[ce.a.HoldEnd],this.hC,()=>{this.JE.pauseToggle()}),this.subscribe(ce.a[ce.a.TapLeft],this.hC,()=>{this.QE(),this.goToPrevSlide()}),this.subscribe(ce.a[ce.a.TapRight],this.hC,()=>{this.QE(),this.goToNextSlide()}),this.subscribe(ce.a[ce.a.SwipeEnd],this.hC,({payload:e})=>{e===hl.d.Left?this.JE.goToNextSlide():this.JE.goToPrevSlide()}),this.subscribe(ce.a[ce.a.SwipeMove],this.hC,({payload:e})=>{this.aC.offsetSlides(e)}),this.subscribe(P[P.Quality],this.hC,({payload:e})=>{this.aC.setQuality(e)}),this.subscribe(P[P.Next],this.hC,()=>{this.QE(),this.goToNextSlide()}),this.subscribe(P[P.Next],this.aC,()=>{this.QE(),this.goToNextSlide()}),this.subscribe(P[P.Prev],this.hC,()=>{this.QE(),this.goToPrevSlide()}),this.relay(Ro.GeneralClickInteraction,this.hC,this,this.mediator),this.relay(Ro.GeneralClickInteraction,this.aC,this,this.mediator)}XE(){if(Object(k.a)(this.Nu.storyMetadata)){var i=this.Nu.storyMetadata;this.YE(i)}else{let{storyId:e,activeVersion:t}=this.Nu;i=Object(Yt.b)("cnx_force_fallback",this.Ob.config.pageUrl);i&&(e="00000000-0000-0000-0000-000000000002",t=i);i=`${se.a.endPoints.base.metadata}${e}/${t}.bin`;Object(k.h)(t)?this.HE(i).then(e=>{this.YE(e)}).catch(()=>{this.KE()}):this.KE()}}KE(){this.WE().then(e=>{e=`${se.a.endPoints.base.metadata}${e.storyId}/${e.activeVersionId}.bin`;return this.HE(e)}).then(e=>{this.YE(e)})}YE(t){t.slides=t.slides.map(e=>Object.assign(Object.assign({},e),{storyTitle:t.storyTitle,publisherName:this.Nu.publisherName})),this.aC.start(t.slides),this.hC.setTotalSlides(t.slides.length);var e=this.Nu.storyPosition&&this.Nu.storyPosition<t.slides.length?this.Nu.storyPosition:0;this.aC.setCurrentSlide(e),this.mediator.publish(this,Bo.ContentHandlerReady)}NE(){var{preRollBreak:e,postRollBreak:t}=this.Nu,e=Object(k.e)(e),t=Object(k.e)(t);this.JE=new gl(this,this.aC,this.hC,e,t,this.Nu.endOfSlideCycleMode,null!==this.Nu.storyPosition),this.ZE()}ZE(){this.subscribe(pl.StateChanged,this.JE,({payload:e})=>{this.hC.changeState(e);const t=this.aC.getCurrentSlide();t&&t.changeState(e),this.mediator.publish(this,Bo.StateChanged,{payload:e})}),this.subscribe(pl.ContentReset,this.JE,()=>{this.mediator.publish(this,Bo.NewStory)}),this.relay([Bo.ContentStart,Bo.ContentEnd],this.JE,this,this.mediator)}QE(){this.mediator.publish(this,o.b.UserInteraction,{payload:{playback:!0}})}setViewabilityState(e){this.JE.setViewabilityState(e)}goToNextSlide(){this.JE.goToNextSlide()}goToPrevSlide(){this.JE.goToPrevSlide()}getNextSlide(){return this.aC.getNextSlide()}getCurrentThumbnailUrlParams(e,t){return this.aC.getCurrentThumbnailUrlParams(e,t)}getCurrentMetadata(){return this.aC.getCurrentMetadata()}start(){this.XE()}get volume(){return this.DE}set volume(e){this.DE=e,this.aC.setVolume(e),this.hC.updateVolume(e)}play(e){this.JE.play(e)}pause(e){this.JE.pause(e)}show(){this.JE.show()}hide(){this.JE.hide()}enterFullscreen(){this.hC.expand()}exitFullscreen(){this.hC.collapse()}setSlide(e){this.play(!1),this.JE.setCurrentSlide(e)}onResize(){this.aC.onPlayerContainerResize(),this.hC.onResizeUi(this.aC.remainingTime,this.aC.isPlaying)}get currentSlideIndex(){return this.aC.currentSlideIndex}get slides(){return this.aC.slides}updateCtaLabel(e,t){t={type:Zo.CtaButton,metadata:{label:t}};this.aC.updateCapabilityMetadata(e,t),e===this.aC.currentSlideIndex&&this.hC.updateCapabilityMetadata(t)}get slidesMetadata(){return this.aC.slidesMetadata}toggleExpandButton(e){e?this.hC.showExpandButton():this.hC.hideExpandButton()}getQuality(){return this.aC.getQuality()}setQuality(e){e={height:e,quality:U.Strict};this.aC.setQuality(e)}stop(){this.JE&&this.JE.stop()}resume(){this.JE&&this.JE.resume()}startContent(){this.JE.exitRollBreak()}destroy(){this.aC&&this.aC.destroy(),this.hC&&this.hC.destroy()}}const id={lg:630,md:400,sm:320,xs:0},rd={[f.ProtoDeviceType.Desktop]:Object.assign({},id),[f.ProtoDeviceType.Tablet]:Object.assign({},id),[f.ProtoDeviceType.Smartphone]:Object.assign({},id)};(wn=Xl=Xl||{})[wn.Play=0]="Play",wn[wn.Pause=1]="Pause";class sd{constructor(e,t){switch(this.mediator=e,this.inView=!1,this.tL=!1,this.iL=!1,this.eL=()=>{},t){case f.ProtoPlayerPlaybackModeEnum.Autoplay:this.sL(this.nL);break;case f.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.sL(this.rL);break;case f.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.sL(this.aL)}}sL(e){this.eL=()=>{this.tL||e.call(this)}}nL(){!this.iL&&this.inView&&(this.iL=!0,this.mediator.publish(this,Xl[Xl.Play]))}aL(){this.inView?this.mediator.publish(this,Xl[Xl.Play]):this.mediator.publish(this,Xl[Xl.Pause])}rL(){}setViewability(e){this.inView=e,this.eL()}setUserPlayback(e){!this.iL&&e&&(this.iL=e),this.tL=!e}}(wn=Kl=Kl||{}).enter="enterFullscreen",wn.exit="exitFullscreen";class nd{constructor(e,t,i,r){if(this.mediator=e,this.bg=t,this.ir=r,this.hL=!1,this.oL=1e3,this.cL=!0,this.ql=!1,this.lL=()=>{this.hL&&this.uL()},this.dL=e=>{this.hL?null!==this.fullscreenElement?this.uL():this.fL():this.mediator.publish(this,Kl.exit)},this.fL=()=>{this.ql=!1,this.pL.reject(),this.hL=!1,clearTimeout(this.bL)},this.QC=r&&r===K.b.Ios?i.getElementsByTagName("video")[0]:i,!this.QC)throw new Error("element is missing");try{const e=this.vL();if(null==e)return void(this.cL=!1);this.mL=e.keys,this.gL=e.name,this.dP()}catch(e){this.cL=!1,Object(g.a)({message:"Fullscreen init failed",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}vL(){return this.ir===K.b.Ios?this.bg.getFullscreenKeys(this.QC):this.bg.getFullscreenKeys()}get fullscreenElement(){return this.bg.getDocumentProperty(this.mL.fullscreenElement)}get fullscreenEnabled(){return this.bg.getDocumentProperty(this.mL.fullscreenEnabled)}enterFullScreen(){if(this.cL){this.pL=new wl.a,this.hL=!0,clearTimeout(this.bL),this.bL=setTimeout(this.fL,this.oL);try{this.QC[this.mL.requestFullscreen]()}catch(e){this.fL()}return this.pL.promise}}exitFullScreen(){try{this.bg.exitFullscreen(this.mL.exitFullscreen,this.ir===K.b.Ios?this.QC:void 0)}catch(e){Object(g.a)({message:"fullscreen_exit",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.WARNING})}this.ql=!1}dP(){this.gL===Ot.d.Moz||this.gL===Ot.d.Ms?(this.bg.addEventListenerOnGlobal(this.mL.fullscreenchange,this.dL),this.bg.addEventListenerOnGlobal(this.mL.fullscreenerror,this.fL)):(this.QC.addEventListener(this.mL.fullscreenchange,this.dL),this.QC.addEventListener(this.mL.fullscreenerror,this.fL)),this.ir===K.b.Ios&&(this.QC.addEventListener("webkitbeginfullscreen",this.lL),this.QC.addEventListener("webkitendfullscreen",this.dL))}yL(){this.gL===Ot.d.Moz||this.gL===Ot.d.Ms?(this.bg.removeEventListenerOnGlobal(this.mL.fullscreenchange,this.dL),this.bg.removeEventListenerOnGlobal(this.mL.fullscreenerror,this.fL)):(this.QC.removeEventListener(this.mL.fullscreenchange,this.dL),this.QC.removeEventListener(this.mL.fullscreenerror,this.fL)),this.ir===K.b.Ios&&(this.QC.removeEventListener("webkitbeginfullscreen",this.lL),this.QC.removeEventListener("webkitendfullscreen",this.dL))}uL(){this.ql=!0,this.mediator.publish(this,Kl.enter),this.pL.resolve(),this.hL=!1,clearTimeout(this.bL)}get isFullscreen(){return this.ql}destroy(){this.isFullscreen&&this.exitFullScreen(),this.yL(),this.pL&&this.pL.isPending&&this.pL.reject()}}const od={xl:720,lg:320,md:204,sm:142,xs:0},ad={[f.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[f.ProtoDeviceType.Tablet]:Object.assign({},od),[f.ProtoDeviceType.Smartphone]:Object.assign({},od)},ld={xl:720,lg:320,md:204,sm:142,xs:0},dd=(Object.assign({},ld),Object.assign({},ld),{xl:ld.xl+176,lg:ld.lg+160,md:ld.md+144,sm:ld.sm+112}),cd=(Object.assign({},dd),Object.assign({},dd),{lg:320,md:204,sm:0}),hd=(Object.assign({},cd),Object.assign({},cd),{xxl:1080,xl:0}),ud=(Object.assign({},hd),Object.assign({},hd),Object.assign(Object.assign({},A.b),Do));(wn=Zl=Zl||{})[wn.PlayerOrientationChange=0]="PlayerOrientationChange",wn[wn.MainOrientationChange=1]="MainOrientationChange";class pd{constructor(e,t,i,r){this.mediator=e,this.Jn=t,this.wL=i,this.Ss=r,this.xL={current:null,previous:null},this.kL={current:null,previous:null},this.SL=!1}setFloatingModule(e){this.OL=e}start(e){this.ua=e,this._L(this.Jn.orientation),this.jL(this.Jn.orientation)}forceOrientation(e){this.SL=!1,this.setMainOrientation(e),this.setPlayerClassByOrientation(e),this.SL=!0}setPlayerClassByOrientation(e=this.Jn.orientation){this._L(e),this.xL.previous&&this.xL.current===this.xL.previous||(this.AL(this.wL),this.xL.previous=this.xL.current,this.mediator.publish(this,Zl[Zl.PlayerOrientationChange],{payload:this.xL.current}))}setMainOrientation(e=this.Jn.orientation){this.jL(e),this.kL.previous&&this.kL.previous===this.kL.current||(this.kL.previous=this.kL.current,this.mediator.publish(this,Zl[Zl.MainOrientationChange],{payload:this.kL.current}))}get playerOrientation(){return this.xL.current}get mainOrientation(){return this.kL.current}shouldChangeMainOrientation(){return!this.Uo()}_L(e){this.xL.current=this.IL(e)}jL(e){this.kL.current=this.TL(e)}IL(e){return this.Uo()?Uo.ProtoPlayerOrientationEnum.Landscape:this.SL?this.kL.current:e!==Uo.ProtoPlayerOrientationEnum.Mixed?e:this.CL()}TL(e){return this.SL?this.kL.current:e!==Uo.ProtoPlayerOrientationEnum.Mixed?e:this.CL()}Uo(){return this.OL&&this.OL.isInFloating}CL(){return this.Ss.getViewportWidth()<this.Jn.orientationBreakpoint?Uo.ProtoPlayerOrientationEnum.Portrait:Uo.ProtoPlayerOrientationEnum.Landscape}AL(e){this.xL.previous?Object(S.O)(this.ua,e(this.xL.previous),e(this.xL.current)):Object(S.a)(this.ua,e(this.xL.current))}}class gd{constructor(e){this.bg=e,this.PL=[]}createRatioContainer(e){var t=this.ML();return this.PL.push(t),this.setRatio(e),t}setRatio(e){this.EL=e,this.LL()}ML(){return this.bg.createElementByString(`<cnx class='${l.c}'></cnx>`)}LL(){this.PL.forEach(e=>{Object(S.Q)(e,{"padding-bottom":`${this.EL}%`})})}}class md{constructor(e,t){this.RL={width:1,height:1},this.BL=e,this.DL=t}start(e){this.FL(e)}getComputedPlayspaceRatio(e){return this.UL(e)/this.$L(e)*100}getComputedContentRatio(e){return this.VL(e)/this.NL(e)*100}FL(e){this.HL=e}$L(e){if(e!==Uo.ProtoPlayerOrientationEnum.Landscape)return this.DL.width;{if(!this.HL.clientWidth)return this.BL.width;const e=this.qL();return this.HL.clientWidth/e}}UL(e){return e===Uo.ProtoPlayerOrientationEnum.Landscape?this.HL.clientWidth?this.zL()/this.qL():this.BL.height:this.DL.height}zL(){return this.BL.height/this.BL.width*this.HL.clientWidth+72}qL(){var e=this.zL();return Object(Q.d)(this.HL.clientWidth,e)}NL(e){return(e===Uo.ProtoPlayerOrientationEnum.Landscape?this.BL:this.RL).width}VL(e){return(e===Uo.ProtoPlayerOrientationEnum.Landscape?this.BL:this.RL).height}}class fd extends n.a{constructor(e,t,i,r,s){super(),this.mediator=e,this.Jn=t,this.bg=s,this.WL(),this.GL=new md(i,r),this.JL=new gd(s),this.QL=new gd(s)}setFloatingModule(e){this.XL.setFloatingModule(e),this.setRatio()}start(e,t){this.XL.start(e),this.GL.start(t)}getPlayspaceRatioContainer(){return this.JL.createRatioContainer(this.YL())}getContentRatioContainer(){return this.QL.createRatioContainer(this.KL())}setRatio(e=!1){this.XL.setPlayerClassByOrientation(),(e||this.XL.shouldChangeMainOrientation())&&(this.XL.setMainOrientation(),this.JL.setRatio(this.YL())),this.QL.setRatio(this.KL())}getOrientation(){return this.XL.playerOrientation}setOrientation(e){this.XL.forceOrientation(e),this.JL.setRatio(this.YL()),this.QL.setRatio(this.KL())}WL(){this.XL=new pd(this,this.Jn,this.wL,this.bg),this.subscribe(Zl[Zl.PlayerOrientationChange],this.XL,({payload:e})=>{this.mediator.publish(this,Zl[Zl.PlayerOrientationChange],{payload:e})}),this.subscribe(Zl[Zl.MainOrientationChange],this.XL,({payload:e})=>{this.mediator.publish(this,Zl[Zl.MainOrientationChange],{payload:e})})}YL(){var e=this.XL.mainOrientation;return this.GL.getComputedPlayspaceRatio(e)}KL(){var e=this.XL.playerOrientation;return this.GL.getComputedContentRatio(e)}wL(e){return e===Uo.ProtoPlayerOrientationEnum.Portrait?Co.OrientationPortrait:Co.OrientationLandscape}}const yd={PlaybackModeEnum:{AutoPlay:f.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:f.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:f.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:f.ProtoPlayerSoundMode.On,Off:f.ProtoPlayerSoundMode.Mute,OnHover:f.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:f.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:f.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:f.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:f.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:f.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:f.ProtoPlayerCloseButtonMode.Off,On:f.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:f.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:f.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:f.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:Cd,LineItemExcludedSlotsEnum:{PreRoll:f.ProtoAdSlotsEnum.PreRoll,MidRoll:f.ProtoAdSlotsEnum.MidRoll,PostRoll:f.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:A.a.SetupError,NoPlayer:A.a.NoPlayer},FloatingModeEnum:{Off:f.ProtoPlayerFloatingMode.Off,OnPageLoad:f.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:f.ProtoPlayerFloatingMode.AfterInView,Always:f.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:f.ProtoDeviceType.Desktop,Smartphone:f.ProtoDeviceType.Smartphone,Tablet:f.ProtoDeviceType.Tablet,Other:f.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:f.ProtoFloatingFixedPositionMode.Page,Element:f.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:f.ProtoPositionMode.BottomRight,BottomLeft:f.ProtoPositionMode.BottomLeft,TopRight:f.ProtoPositionMode.TopRight,TopLeft:f.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:b.Float,Embed:b.Embed},ImplementationTypeEnum:{Amp:f.ProtoImplementationType.Amp,Web:f.ProtoImplementationType.Web}},bd=Object.assign(Object.assign({},yd),{EndOfSlideCycleEnum:{Loop:Uo.ProtoEndOfSlideCycleMode.Loop,Stop:Uo.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:F.Portrait,Landscape:F.Landscape},OrientationEnum:{Mixed:Uo.ProtoPlayerOrientationEnum.Mixed,Portrait:Uo.ProtoPlayerOrientationEnum.Portrait,Landscape:Uo.ProtoPlayerOrientationEnum.Landscape}});class vd extends _{constructor(e,t,i,r){super(e,t,i,r),this.mediator=e,this.controlData=i,this.ZL=0,this.tR=0,this.onStop(),this.il.slides=!1,this.iR()}eR(){this.controlData.minSlidesBeforeFirstAd&&this.tR<=this.controlData.minSlidesBeforeFirstAd&&(this.il.slides=!0)}sR(){this.controlData.slidesBetweenAds&&this.ZL<=this.controlData.slidesBetweenAds&&(this.il.slides=!0)}iR(){this.il.slides=!1,this.firstAdBreakStarted?this.sR():this.eR(),this.toggleEnableAds()}canEnableAds(){var e=super.canEnableAds();return e.enableAds&&this.currentPlayerAdSlot===f.ProtoAdSlotsEnum.MidRoll&&this.il.slides&&this.fl?{enableAds:!1,disableReason:j.TimeoutBetweenAds}:e}contentPlaybackStateChanged(e){}slideChanged(){this.ZL++,this.tR++,this.iR()}onAdImpression(e){this.ZL=0,super.onAdImpression(e)}onAdFinished(e,t=!1){t||this.iR(),super.onAdFinished(e,t)}contentChanged(){this.iR(),super.contentChanged()}}class Pd{constructor(e,t,i,r,s=1200){this.nR=e,this.rR=t,this.aR=i,this.hR=r,this.oR=s,this.cR=null,this.lR=!1,this.uR=()=>{if(this.QO(),!this.lR&&this.rR&&this.rR.adInWin)return this.lR=!0,void this.dR(this.oR);this.nR.startContent()}}destroy(){this.QO()}changeState(e){switch(e){case V.PrerollState:this.lR=!1,this.dR(this.aR);break;case V.PostrollState:this.lR=!1,this.dR(this.hR);break;default:this.cR&&this.QO()}}QO(){clearTimeout(this.cR),this.cR=null}dR(e){this.QO(),this.cR=setTimeout(this.uR,e)}}class Sd extends te{constructor(){super(...arguments),this.vd=rd,this.gd=l.p,this.rd=288,this.BL={width:16,height:9},this.DL={width:4,height:5},this.events=Object.assign({},ud),this.fR=()=>{this.pR(),this.bR(),this.Nu.adPlaybackMode===Uo.ProtoAdPlaybackMode.Autoplay&&this.Nu.playbackMode!==Uo.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.Nu.preRollBreak&&this.Pu(Uo.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,ud.Ready)},this.vR=()=>{this.mR.enterFullScreen().then(()=>{this.gR()}).catch(()=>{Object(g.a)({message:"PlayspaceExperience_enterFullscreen",level:f.ProtoLoggingLevelEnum.WARNING})})},this.Ku=()=>{this.nR.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.mediator.publish(this,ud.FullscreenChanged,{payload:!1}),super.Ku()},this.Yu=()=>{this.mediator.publish(this,ud.FullscreenChanged,{payload:!0}),super.Yu()}}gu(){var e={orientation:this.Nu.orientation,orientationBreakpoint:this.Nu.orientationBreakpoint};this.yR=new fd(this,e,this.BL,this.DL,this.app.services.GlobalDomUtilsService),this.subscribe(Zl[Zl.PlayerOrientationChange],this.yR,({payload:e})=>{this.mediator.publish(this,ud.LayoutChanged,{payload:bd.LayoutEnum[Uo.ProtoPlayerOrientationEnum[e]]})}),this.subscribe(Zl[Zl.MainOrientationChange],this.yR,({payload:e})=>{switch(e){case Uo.ProtoPlayerOrientationEnum.Landscape:Object(S.N)(this.$experienceContainer,"maxWidth");break;case Uo.ProtoPlayerOrientationEnum.Portrait:Object(S.Q)(this.$experienceContainer,{maxWidth:`${rd[this.app.config.device].lg-1}px`})}})}wR(e){this.yR.setFloatingModule(e)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${l.b.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${wo.Container}"></cnx>`),this.yR.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.yR.setRatio(),this.xR()}xR(){this.kR=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${wo.ImageWrapper} ${wo.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.kR)}SR(){return this.nR.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}OR(){var e=this.SR();if(e){const{imageUrl:t,altText:i,width:r,height:s,queryParams:n}=e,o=this.mu.getImage(t,i,r,s,n,!0);o&&(o.className=l.b.ImagePlaceholder,this._R&&this.kR.removeChild(this._R),this.kR.appendChild(o),this._R=o,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(t))}}jR(){this.floatingModule&&this.floatingModule.canFloat()&&this.OR()}AR(e=!1){this.kR&&(e?Object(S.a):Object(S.L))(this.kR,wo.MediaLogo)}addPlayerSize(){var e=this.yR.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(e),Object(S.a)(this.$playerWrapper,l.i.Responsive)}handleClose(){this.mediator.publish(this,ud.CloseButtonClicked),this.Uo()?(this.floatingModule.destroy(),this.pause()):this.mR&&this.mR.isFullscreen?this.mR.exitFullScreen():this.triggerDestroy()}getVolume(){return this.nR.volume}setNewVolume(e){super.setNewVolume(e),this.nR.volume=e,this.Dr(e)}destroy(){var e;super.destroy(),null===(e=this.IR)||void 0===e||e.destroy(),this.nR&&this.nR.destroy(),this.mR&&this.mR.destroy()}TR(){this.nR=new td(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.Nu,this.app,this.$playerContainer,this.yR),this.subscribe(Bo.ContentHandlerReady,this.nR,this.fR),this.Nu.isCloseButton&&this.subscribe(P[P.Close],this.nR,()=>this.handleClose()),this.subscribe(P[P.Volume],this.nR,({payload:{volume:e}})=>{this.Dr(e),this.adHandler&&this.adHandler.setVolume(e)}),this.subscribe(Bo.StateChanged,this.nR,({payload:e})=>{var t;null===(t=this.IR)||void 0===t||t.changeState(e),this.CR(e),e===V.PlayingState&&this.wd(),this.PR(e)}),this.subscribe(Mo.ChangeSlide,this.nR,()=>{this.Zl.slideChanged();var e,t=this.MR();this.OR(),this.floatingModule&&this.floatingModule.canFloat()&&(e=t&&t.mediaContext===Uo.ProtoMediaContextEnum.Logo,this.AR(e)),this.app.services.TrackingService.updateMediaMetadata(this.ER()),this.mediator.publish(this,ud.ChangeSlide,{payload:t})}),this.subscribe(Bo.NewStory,this.nR,()=>{this.Du(),this.pR()}),this.subscribe(Bo.ContentStart,this.nR,()=>{this.app.services.TrackingService.setMediaStart(),this.mediator.publish(this,ud.ContentStart,{payload:this.getStoryMetadata()})}),this.subscribe(Bo.ContentEnd,this.nR,()=>{this.app.services.TrackingService.trackMediaQuartile(f.ProtoQuartilesEnum.Fourth),this.mediator.publish(this,ud.ContentComplete,{payload:this.getStoryMetadata()})}),this.floatingModule&&this.subscribe(o.b.UserInteraction,this.nR,this.du),this.subscribe(Ro.ProgressBarItemClicked,this.nR,({payload:e})=>{this.mediator.publish(this,ud.ProgressBarItemClicked,{payload:this.LR(e)})}),this.subscribe(P[P.Volume],this.adHandler,({payload:{volume:e}})=>{this.Dr(e),this.nR.volume=e}),this.subscribe(Ro.CallToAction,this.nR,()=>{this.mediator.publish(this,ud.CallToAction,{payload:this.MR()})}),this.subscribe(P[P.LogoClicked],this.nR,()=>{this.mediator.publish(this,ud.BrandingClicked)}),this.subscribe($.Change,this.nR,({payload:e})=>{this.QM!==e&&(this.QM=e,this.mediator.publish(this,ud.QualityChanged,{payload:e}))}),this.subscribe(Ro.GeneralClickInteraction,this.nR,({payload:e})=>{this.app.services.TrackingService.trackMediaClick(e)}),this.nR.start()}RR(e,t){var{preRollBreak:i,postRollBreak:r}=this.Nu;this.IR=new Pd(e,t,i,r)}CR(e){switch(e){case V.PlayingState:this.Pu(Uo.ProtoAdSlotsEnum.MidRoll);break;case V.PrerollState:this.Pu(Uo.ProtoAdSlotsEnum.PreRoll);break;case V.PostrollState:this.Pu(Uo.ProtoAdSlotsEnum.PostRoll);break;case V.PausedState:this.Nu.adViewabilityPolicy===f.ProtoAdViewabilityPolicy.Default&&!this.BR.inView||this.Zl.onStop();break;case V.StoppedState:this.Zl.onStop()}}PR(e){switch(e){case V.PlayingState:this.app.services.TrackingService.setSessionPlayback(!0),this.mediator.publish(this,ud.Play,{payload:this.MR()});break;case V.PausedState:this.mediator.publish(this,ud.Pause,{payload:this.MR()}),this.app.services.TrackingService.setSessionPlayback(!1);break;case V.StoppedState:this.mediator.publish(this,ud.ContentComplete,{payload:this.getStoryMetadata()}),this.app.services.TrackingService.setSessionPlayback(!1);break;default:this.app.services.TrackingService.setSessionPlayback(!0)}}bR(){this.BR=new sd(this,this.Nu.playbackMode),this.subscribe(Xl[Xl.Play],this.BR,()=>{this.nR.play(!1)}),this.subscribe(Xl[Xl.Pause],this.BR,()=>{this.nR.pause(!1)}),this.subscribe(o.b.UserInteraction,this.nR,({payload:{playback:e}})=>{Object(k.a)(e)&&this.BR.setUserPlayback(e)}),this.BR.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.Ll}))}DR(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.Nu.soundMode===Uo.ProtoPlayerSoundMode.On?1:0),this.Zl.forceRecheck())}tu(){var e=this.getNextSlide();this.adHandler.setContinueReadingCard({imageSrc:e.metadata.imageUrl,title:e.metadata.title}),super.tu(),this.nR.hide()}Vu(){this.Bu.isInAdPod()?this.qu(()=>{this.Zl.onAdFinished(this.adHandler.inImpression,this.Bu.isInAdPod()),super.Vu(),this.nR.show()}):(super.Vu(),this.nR.show())}Uu(){return new Lo(this,this.Nu,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.Bu,this.app)}Wu(){return new vd(this,this.isViewable(),{minSlidesBeforeFirstAd:this.Nu.minSlidesBeforeFirstAd,slidesBetweenAds:this.Nu.slidesBetweenAds,numberOfMidRolls:this.Nu.midRollNumber,viewabilityPolicy:this.Nu.adViewabilityPolicy,maxAdSlotDuration:this.Bu.getMaxAdSlotDuration(),maxAdPodDuration:this.Bu.getMaxAdPodDuration(),playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight},playerAdsSkippability:this.Nu.adSkippability},this.app)}zr(){super.zr(),this.nR&&this.nR.onResize(),this.yR.setRatio(),this.jR(),this.FR.updateWidth(this.$playerContainer.clientWidth)}Uo(){return this.floatingModule&&this.floatingModule.isInFloating}Mc(e,t=!1){super.Mc(e,t),this.BR&&this.BR.setViewability(e),this.nR&&this.nR.setViewabilityState(e)}UR(){var e=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(e,()=>{this.yR.setRatio(!0)})}ru(){return{isAutoPlay:this.Nu.playbackMode===Uo.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}start(){try{super.start(),this.wR(this.floatingModule),this.TR(),this.DR(),this.RR(this.nR,this.adHandler),this.ud(this.nR),this.$R(),this.UR(),this.FR=new x(this.$playerContainer,this.app.config.device,ad,l.t),this.VR(this.$playerContainer)}catch(e){Object(g.a)({message:"PlayspaceExperience_start",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.FATAL})}}setSlide(e){this.nR.setSlide(e)}getNextSlide(){return this.nR.getNextSlide()}play(){super.play(),this.nR.play(!1)}pause(){super.pause(),this.nR.pause(!1)}getStoryId(){return this.Nu.storyId}getStoryPosition(){return this.nR.currentSlideIndex}getStoryTimeline(){return this.nR.slides.map(e=>e.media.duration/L.f)}updateCtaLabel(e,t){Object(k.d)(e)&&Object(k.h)(t)&&this.nR.updateCtaLabel(e,t)}getStoryMetadata(){return this.nR.slidesMetadata.map(({title:e,clickUrl:t,slideDuration:i})=>({title:e,clickUrl:t,duration:i}))}toggleFullscreenButton(e){this.nR.toggleExpandButton(e)}toggleFullscreen(e){Object(k.a)(e)||(e=!this.mR.isFullscreen),this.mR.isFullscreen!==e&&(e?this.vR():this.mR.exitFullScreen())}getQuality(){return this.nR.getQuality()}setQuality(e){this.nR.setQuality(e)}getOrientation(){return this.yR.getOrientation()}setOrientation(e){this.yR.setOrientation(e)}$R(){this.app.config.os.os!==K.b.Ios&&(this.mR=new nd(this,this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this.NR())}NR(){this.subscribe(P[P.Expand],this.nR,this.vR),this.subscribe(P[P.Collapse],this.nR,()=>this.mR.exitFullScreen()),this.subscribe(Kl.exit,this.mR,this.Ku),this.subscribe(Kl.enter,this.mR,this.Yu)}gR(){this.nR.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)}MR(){return this.nR.getCurrentMetadata()}LR(e){if(!(e<0||this.nR.slidesMetadata.length<e))return this.nR.slidesMetadata[e]}pR(){this.app.services.TrackingService.setNewMedia(this.ER())}ER(){var e=this.nR.getCurrentMetadata(),t=e.title||e.coverMetadata&&e.coverMetadata.title;return{mediaId:this.Nu.storyId,clickUrl:e.clickUrl,slideTitle:t,slideNumber:this.nR.currentSlideIndex+1,slideMediaType:e.mediaType}}VR(e){var t;!Object(k.h)(this.Nu.sdkVersion)&&Object(k.h)(this.app.config.bundleID)&&(t=this.app.services.GlobalDomUtilsService.querySelector("body"),Object(S.Q)(t,{margin:"0"}),300<=e.clientWidth&&(Object(S.Q)(e,{"min-height":"250px"}),Object(S.i)(e)),Object(Y.l)([95,5])&&Object(g.a)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:f.ProtoLoggingLevelEnum.INFO}))}pd(){}}class Id{constructor(){this.dv={}}on(e,t){if(this.dv[e]=this.dv[e]||[],!Object(k.b)(t))throw new Error(`${e} event callback is not a function`);return this.dv[e].push(t),()=>this.dv[e]=this.dv[e].filter(e=>e!==t)}once(e,t){const i=this.on(e,e=>{try{t(e)}catch(e){}i()})}remove(e,t){this.dv[e]&&(this.dv[e]=this.dv[e].filter(e=>e!==t))}removeAll(){this.dv={}}trigger(e,t){this.dv[e]&&this.dv[e].forEach(e=>{try{e(t)}catch(e){}})}}class Td extends class{constructor(e){this.experience=e,this.HR=(e,t)=>this.bo.on(e,t),this.qR=(e,t)=>{this.bo.remove(e,t)},this.zR=()=>{this.bo.removeAll()},this.WR=(e,t)=>{this.bo.once(e,t)},this.GR=()=>this.experience.isViewable(),this.JR=e=>{this.experience.setViewableThreshold(e)},this.QR=()=>{this.experience.play()},this.XR=()=>{this.experience.pause()},this.YR=()=>this.experience.getVolume(),this.KR=e=>{this.experience.setVolume(e)},this.Ac=()=>{this.experience.triggerDestroy()},this.ZR=()=>{this.experience.disableAdvertising()},this.tB=()=>{this.experience.enableAdvertising()},this.iB=e=>{this.experience.setCustomMacros(e)},this.eB=e=>{this.experience.setAmpUserConsent(e)},this.bo=new Id}trigger(e,t){this.bo.trigger(e,t)}setDestroyed(){this.trigger(A.b.Removed)}getApiMethods(){return{on:this.HR,remove:this.qR,removeAll:this.zR,once:this.WR,isViewable:this.GR,setViewableThreshold:this.JR,play:this.QR,pause:this.XR,getVolume:this.YR,setVolume:this.KR,disableAdvertising:this.ZR,enableAdvertising:this.tB,setMacros:this.iB,setAmpUserConsent:this.eB,destroy:this.Ac}}}{constructor(){super(...arguments),this.sB=()=>this.experience.getStoryPosition(),this.nB=()=>this.experience.getStoryId(),this.rB=()=>this.experience.getStoryTimeline(),this.aB=e=>{this.experience.setSlide(e)},this.hB=(e,t)=>{this.experience.updateCtaLabel(e,t)},this.oB=()=>this.experience.getStoryMetadata(),this.cB=e=>{this.experience.toggleFullscreenButton(e)},this.lB=e=>{this.experience.toggleFullscreen(e)},this.uB=()=>this.experience.getQuality(),this.dB=e=>{this.experience.setQuality(e)},this.fB=()=>{var e=this.experience.getOrientation();return bd.LayoutEnum[Uo.ProtoPlayerOrientationEnum[e]]},this.pB=t=>{var e=Object.keys(bd.LayoutEnum).find(e=>bd.LayoutEnum[e]===t);e&&Uo.ProtoPlayerOrientationEnum[e]&&this.experience.setOrientation(Uo.ProtoPlayerOrientationEnum[e])},this.bB=()=>this.experience.getSize()}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.sB,setStoryPosition:this.aB,getStoryId:this.nB,getStoryTimeline:this.rB,setCtaLabel:this.hB,getStoryMetadata:this.oB,toggleFullscreen:this.lB,toggleFullscreenButton:this.cB,getQuality:this.uB,setQuality:this.dB,getLayout:this.fB,setLayout:this.pB,getPlayerSize:this.bB})}}class kd extends h{constructor(){super(...arguments),this.Co="cnx-ps"}createExperience(e,t){this.experience=new Sd(this,this.Ws,t),this.experienceApi=new Td(this.experience)}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(e){return!(this.experienceContainer.clientWidth<rd[e].xs)}}var Ad,Od,Cd,wd=i(31);(Cd=Ad=Ad||{})[Cd.none=0]="none",Cd[Cd.friendly=1]="friendly",Cd[Cd.safe=2]="safe";class xd{constructor(e,t,i){this.de=e,this.nA=t,this.vB=[],this.mB=Ad.none,this.gB={intersectionObserver:!1,fallbackImplementation:!1},this.yB=null,this.wB=[0,.01,.1,.2,.5],this.xB=250,this.kB=!1,this.SB=e=>{this.kB=e,this.OB(),a.a.setFocusState(e),wd.a.pageFocus=e},this.OB=()=>{this.vB.forEach(e=>{var t=this._B(e.element);this.onViewHandle(e,t)})},this.jB=()=>{null===this.yB&&(this.yB=setTimeout(()=>{this.OB(),clearTimeout(this.yB),this.yB=null},this.xB))},this.AB(i),this.IB(),this.TB()}TB(){this.nA.on(this.SB),wd.a.pageFocus=this.nA.isDocumentVisible()}AB(e){this.de.IntersectionObserver&&!e?this.gB.intersectionObserver=!0:this.gB.fallbackImplementation=!0,this.de.self!==this.de.top?(this.CB=this.PB(this.de),null!==this.CB?this.mB=Ad.friendly:this.mB=Ad.safe):this.CB=this.de.frameElement}PB(e){let t;try{if((t=e.parent)===this.de.top)return e.frameElement}catch(e){return null}return this.PB(t)}IB(){this.gB.intersectionObserver?this.MB=new this.de.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.wB}):(this.de.addEventListener("scroll",this.jB),this.de.addEventListener("load",this.OB),this.de.addEventListener("resize",this.OB))}EB(t){return this.vB.find(e=>e.element===t)}_B(e){if(this.mB===Ad.safe){const t=this.EB(e);return t?t.cachedPercentInView:0}let t=1;const i=e.getBoundingClientRect(),r={bottomRatio:i.bottom/i.height,topRatio:(this.de.top.innerHeight-i.top)/i.height,leftRatio:(this.de.top.innerWidth-i.left)/i.width,rightRatio:i.right/i.width};return Object.keys(r).forEach(e=>{r[e]<=0&&(t=0),0<r[e]&&r[e]<1&&(t*=r[e])}),t}onObserverEnter(e){e.forEach(t=>{this.vB.filter(e=>e.element===t.target).forEach(e=>{this.onViewHandle(e,t.intersectionRatio)})})}onViewHandle(e,t){e.cachedPercentInView=t,e.list.forEach(e=>{!e.callbackSent&&e.threshold<=t&&this.kB?(e.callbackSent=!0,e.timeout=Object(Y.a)(e.callback,e.callbackDelay,!0)):e.callbackSent&&(e.threshold>t||!this.kB)&&(e.callbackSent=!1,clearTimeout(e.timeout),e.timeout=Object(Y.a)(e.callback,0,!1))})}on(t,e,i={}){let r=!1;if(this.gB.fallbackImplementation)if(this.mB===Ad.friendly&&t.ownerDocument.defaultView!==this.de.top)t=this.CB;else if(this.mB===Ad.safe)return void Object(Y.a)(e,0,!1);let s=this.vB.find(e=>e.element===t);s?r=!0:(s={element:t,list:[],cachedPercentInView:0},this.vB.push(s)),s.list.push({threshold:i.threshold,callbackSent:!1,callbackDelay:i.callbackDelay,timeout:null,callback:e}),this.gB.intersectionObserver?(r&&this.MB.unobserve(t),this.MB.observe(t)):this.gB.fallbackImplementation&&this.OB()}off(t,i){const r=this.vB.find(e=>e.element===t);if(r){let e=r.list.length;for(;e;)e--,r.list[e].callback===i&&r.list.splice(e,1);0===r.list.length&&(this.MB&&this.MB.unobserve(t),this.vB.splice(this.vB.indexOf(r),1))}}check(e={threshold:.1}){if(!e.element)return!1;let t=e.element;return this.mB===Ad.friendly&&(t=this.CB),this._B(t)>=e.threshold&&this.kB}triggerRecheck(t){this.gB.fallbackImplementation&&t&&this.vB.forEach(e=>{if(e.element===t){const t=this._B(e.element);this.onViewHandle(e,t)}})}setViewableThreshold(e){}getIsTabInFocus(){return this.kB}subscribe(e,t){}destroy(){this.de.removeEventListener("scroll",this.jB),this.de.removeEventListener("load",this.OB),this.de.removeEventListener("resize",this.OB),[].slice.call(this.vB).forEach(t=>{[].slice.call(t.list).forEach(e=>{this.off(t.element,e.callback),this.de.clearTimeout(e.timeout)})}),this.nA.off(this.SB),clearTimeout(this.yB)}}class Ed{constructor(){this.vB=[],this._B=0,this.LB=!1,this.OB=t=>{this.vB.forEach(e=>{t&&t!==e.element||this.RB(e,this._B)})}}BB(t){let e=this.vB.find(e=>e.element===t);return e||(e={element:t,list:[],cachedPercentInView:0},this.vB.push(e)),e.list}RB(e,t){e.list.forEach(e=>{!e.callbackSent&&e.threshold<=t?(e.callbackSent=!0,e.timeout=Object(Y.a)(e.callback,e.callbackDelay,!0,this.LB)):e.callbackSent&&e.threshold>t&&(e.callbackSent=!1,clearTimeout(e.timeout),e.timeout=Object(Y.a)(e.callback,0,!1,this.LB))})}on(e,t,i){this.BB(e).push({threshold:i.threshold,callbackSent:!1,callbackDelay:i.callbackDelay,timeout:null,callback:t}),this.OB()}off(t,i){const r=this.vB.find(e=>e.element===t);if(r){for(let e=r.list.length;e--;)r.list[e].callback===i&&r.list.splice(e,1);0===r.list.length&&this.vB.splice(this.vB.indexOf(r))}}check(e={threshold:.1}){return this._B>=e.threshold}triggerRecheck(e){this.OB(e)}DB(e){this.LB=e}setViewableThreshold(e){this._B=e,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(e,t){}destroy(){for(let e=this.vB.length;e--;){var t=this.vB[e];for(let e=t.list.length;e--;)clearTimeout(t.list[e].timeout),this.off(t.element,t.list[e].callback)}}}class Ld{constructor(e=0){this.FB=e,this.UB=16,this.$B=9}getHeightByRatio(e){return Math.round(e/this.UB*this.$B)+this.FB}}class Rd{constructor(e,t,i={}){this.floatingMode=Object(k.a)(i.mode)?i.mode:e.floatingMode,Object(p.h)(i.devices)?this.floatingDeviceMode=i.devices:this.floatingDeviceMode=Object(p.h)(e.floatingDeviceMode)?e.floatingDeviceMode:[f.ProtoDeviceType.Desktop],Object(k.a)(i.closeButton)?this.floatingCloseButtonMode=i.closeButton:Object(k.a)(e.floatingCloseButtonMode)?this.floatingCloseButtonMode=e.floatingCloseButtonMode:this.floatingCloseButtonMode=f.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=Object(k.a)(i.fixedPosition)?i.fixedPosition:e.floatingFixedPosition,this.floatingScrollPosition=Object(k.a)(i.scrollPosition)?i.scrollPosition:e.floatingScrollPosition,this.floatingWidth=Object(k.a)(i.floatingWidth)?i.floatingWidth:e.floatingWidth||400,this.floatingGutterX=(Object(k.a)(i.floatingGutterX)?i:e).floatingGutterX,this.floatingGutterY=(Object(k.a)(i.floatingGutterY)?i:e).floatingGutterY,this.pageElement=e.floatingPageElement,this.appendLocation=e.floatingAppendLocation,this.floatingYAxisPadding=e.floatingYAxisPadding,this.VB=this.floatingScrollPosition===f.ProtoPositionMode.BottomLeft||this.floatingScrollPosition===f.ProtoPositionMode.TopLeft,this.NB=this.floatingScrollPosition===f.ProtoPositionMode.BottomRight||this.floatingScrollPosition===f.ProtoPositionMode.TopRight,this.HB=this.floatingScrollPosition===f.ProtoPositionMode.TopLeft||this.floatingScrollPosition===f.ProtoPositionMode.TopRight,this.qB=this.floatingScrollPosition===f.ProtoPositionMode.BottomRight||this.floatingScrollPosition===f.ProtoPositionMode.BottomLeft,this.zB=new Ld(t)}get isPositionedLeft(){return this.VB}get isPositionedRight(){return this.NB}get isPositionedTop(){return this.HB}get isPositionedBottom(){return this.qB}set isPositionedLeft(e){this.VB=e}set isPositionedRight(e){this.NB=e}set isPositionedBottom(e){this.qB=e}get positionClass(){switch(this.floatingScrollPosition){case f.ProtoPositionMode.BottomLeft:return"bottom-left";case f.ProtoPositionMode.TopLeft:return"top-left";case f.ProtoPositionMode.TopRight:return"top-right";default:return"bottom-right"}}set width(e){this.floatingWidth=e}get width(){return this.floatingWidth}getHeight(e){return`${this.zB.getHeightByRatio(e)}px`}}function Md(e){return Object(k.f)(e)&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function Bd(e){return Md(e)?jd({},e):e}function jd(e,t){return function(t,i){const r={};return Md(t)&&Object.keys(t).forEach(e=>{r[e]=Bd(t[e])}),Object.keys(i).forEach(e=>{Md(i[e])&&t[e]?r[e]=jd(t[e],i[e]):r[e]=Bd(i[e])}),r}(e,t)}(Cd=Od=Od||{})[Cd.Normal=0]="Normal",Cd[Cd.Buzzfeed=1]="Buzzfeed";class Dd extends class{constructor(i,e,t,r,s,n,o,a,l,d,c=0){if(this.global=i,this.targetContainer=e,this.WB=t,this.Bo=r,this.secondLevelDomain=s,this.apiConfig=n,this.supplyChainSettings=a,this.isSeoTraffic=l,this.videoPosition=d,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,Object(k.h)(t.initializationSettingsJson))try{const i=JSON.parse(t.initializationSettingsJson);this.apiConfig=jd(this.apiConfig,i)}catch(i){Object(g.a)({message:"invalid_init_json",exception:i.message,callStack:i.callStack,level:f.ProtoLoggingLevelEnum.FATAL})}this.apiConfig.playerMode!==Od.Buzzfeed&&!this.apiConfig.settings.pauseAdWhenFinished||(this.pauseAdWhenFinished=!0),this.GB(this.WB.lineItems);const h=[];this.soundMode=Object(k.a)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:t.soundMode,this.playbackMode=(Object(k.a)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings:t).playbackMode,this.playbackMode===f.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===f.ProtoPlayerSoundMode.Mute||Object(Y.b)()||(this.soundMode=f.ProtoPlayerSoundMode.Mute),this.html=t.html,this.css=t.css,this.floatingSettings=new Rd(t,c,this.apiConfig.settings.customization.floating),this.logoUrl=(Object(k.h)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization:t).logoUrl;d=t.amazonTamSlotId;if(Object(k.h)(d)&&(this.amazonTamSlotId=d),Object(k.a)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),Object(k.a)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.JB(),this.QB(),Object(p.h)(this.apiConfig.settings.advertising.lineItems)){const i=t.lineItems.filter(e=>e.creativeType===f.ProtoCreativeTypeEnum.External);this.apiConfig.settings.advertising.lineItems.forEach(t=>{if(this.XB(t),o){const i=this.YB(),e=this.KB(t,i);h.push(e)}else i.forEach(e=>{t.id===e.advertiserLineItemId&&(t.url||t.headerBidderBids||t.externalMediaFile||t.externalHlsFile)&&(e=this.KB(t,e),h.push(e))})})}!0!==this.apiConfig.settings.advertising.blockConnatixDemand&&h.push(...t.lineItems.filter(e=>e.creativeType!==f.ProtoCreativeTypeEnum.External)),h.forEach(e=>{e.creativeType===f.ProtoCreativeTypeEnum.External&&(e.headerBidderBids&&"[]"!==e.headerBidderBids?e.creativeType=f.ProtoCreativeTypeEnum.HeaderBidder:e.externalMediaFile||e.externalHlsFile?e.creativeType=f.ProtoCreativeTypeEnum.MediaFile:e.creativeType=f.ProtoCreativeTypeEnum.ThirdParty)});c=this.ZB(h),d=(Object(k.a)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering:t).scrollHijackingProtection;this.lineItemSettings={lineItems:c,disableScrollHijackEnforcement:d},this.midRollNumber=Object(k.a)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:t.midRollNumber,this.adViewabilityPolicy=t.adViewabilityPolicy,this.preRollBreak=(Object(k.a)(this.apiConfig.settings.advertising.preRollBreak)?this.apiConfig.settings.advertising:t).preRollBreak*L.f,this.postRollBreak=(Object(k.a)(this.apiConfig.settings.advertising.postRollBreak)?this.apiConfig.settings.advertising:t).postRollBreak*L.f,this.playerId=t.playerId,this.floatingCloseButtonMode=this.floatingSettings.floatingCloseButtonMode,t.floatingMode===f.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingCloseButtonMode:this.closeButtonMode=(Object(k.a)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization:t).closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:Object(k.a)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:t.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=t.adPlaybackMode,Object(k.a)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);var c=(n.settings.advertising.skipAdSettings||{})["skipAdAfter"],d=(n.settings.advertising.skipAdSettings||{})["adSkippability"];this.skipAdAfter=Object(k.a)(c)?c:t.skipAdAfter,this.adSkippability=Object(k.a)(d)?d:t.adSkippability;var n=n.settings._connatixInternals["disableTracking"];(n||o||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.WB.sessionId,this.moatTrackingEnabled=this.lineItemSettings.lineItems.some(e=>e.moatTrackingEnabled)}tD(e,t){t.adTag=Object(k.a)(e.url)?e.url:t.adTag,t.requestCap=Object(k.a)(e.contentRequestCap)?e.contentRequestCap:t.requestCap,t.impressionCap=Object(k.a)(e.contentImpressionCap)?e.contentImpressionCap:t.impressionCap,t.viewability=(Object(k.a)(e.viewability)?e:t).viewability,t.sound=(Object(k.a)(e.sound)?e:t).sound,t.ignoreFilledRequests=(Object(k.a)(e.ignoreFilledRequests)?e:t).ignoreFilledRequests,t.headerBidderBids=(Object(k.a)(e.headerBidderBids)?e:t).headerBidderBids,t.headerBidderTimeout=(Object(k.a)(e.headerBidderTimeout)?e:t).headerBidderTimeout,t.resetRequestsCapTime=(Object(k.a)(e.resetRequestsCapTime)?e:t).resetRequestsCapTime,t.resetImpressionsCapTime=(Object(k.a)(e.resetImpressionsCapTime)?e:t).resetImpressionsCapTime,t.resetCapType=(Object(k.a)(e.resetCapType)?e:t).resetCapType,t.timeBetweenRequests=(Object(k.a)(e.timeBetweenRequests)?e:t).timeBetweenRequests,t.skipMode=(Object(k.a)(e.skipMode)?e:t).skipMode,t.floorPrice=(Object(k.a)(e.floorPrice)?e:t).floorPrice,t.adBreakSettings=(Object(k.a)(e.adBreakSettings)?e:t).adBreakSettings,t.pauseAdOutOfView=(Object(k.a)(e.pauseAdOutOfView)?e:t).pauseAdOutOfView}JB(){this.iD(this.apiConfig.settings.advertising.preRollBreak,f.ProtoAdBreakTypeEnum.PreRoll),this.iD(this.apiConfig.settings.advertising.postRollBreak,f.ProtoAdBreakTypeEnum.PostRoll),this.iD(this.apiConfig.settings.advertising.maxNumberOfMidRolls,f.ProtoAdBreakTypeEnum.MidRoll)}iD(e,t){var i=this.eD(this.apiConfig.settings.advertising.adBreaks,t),r=this.eD(this.WB.adBreaks,t),t={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[t]};i?this.adBreaks.push(i):!Object(k.a)(e)||i||r?!i&&r&&this.adBreaks.push(r):this.adBreaks.push(t)}eD(e,i){if(e){let t;return e.forEach(e=>{e.types.includes(i)&&((t=Object.assign({},e)).types=[i])}),t}}ZB(e){const t=this["adBreaks"];let i=e;const r=[];return t.forEach(t=>{t.types.forEach(e=>r.push(Object.assign(Object.assign({},t),{types:[e]})))}),r.forEach(e=>{i=this.removeCompatibleLineItems(e,i)}),e.filter(e=>!i.includes(e))}removeCompatibleLineItems(e,t){const i=e.types[0],r=1<e.numberOfAdSlots?f.ProtoLineItemAdBreakTypeEnum.AdPod:f.ProtoLineItemAdBreakTypeEnum.SingleAd;return t.filter(e=>!e.adBreakSettings.adBreakTargeting.some(e=>e.adRollType===i&&(e.adBreakTypeEnum===f.ProtoLineItemAdBreakTypeEnum.All||e.adBreakTypeEnum===r)))}GB(e){e.forEach(e=>{e.adBreakSettings||this.sD(e),this.XB(e)})}sD(e){e.adBreakSettings={adBreakTargeting:[{adRollType:f.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:f.ProtoLineItemAdBreakTypeEnum.All},{adRollType:f.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:f.ProtoLineItemAdBreakTypeEnum.All},{adRollType:f.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:f.ProtoLineItemAdBreakTypeEnum.All}]}}XB(e){0===e.requestCap&&(e.requestCap=20)}QB(){this.adBreaks.forEach(e=>{e.maxAdSlotDuration*=L.f,e.maxAdPodDuration*=L.f,e.numberOfAdSlots<=1?e.maxAdPodDuration=0:e.maxAdSlotDuration>e.maxAdPodDuration&&(e.maxAdSlotDuration=e.maxAdPodDuration)})}KB(e,t){const i=Object.assign({},t);return this.tD(e,i),Object(k.a)(e.externalMediaFile)&&(i.externalMediaFile=e.externalMediaFile),Object(k.a)(e.externalHlsFile)&&(i.externalHlsFile=e.externalHlsFile),i.customCpm=e.cpm,i}YB(){return f.ProtoLineItem.toObject(f.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}}{constructor(e,t,i,r,s,n,o,a,l,d,c){super(e,t,i,r,s,n,o,a,c,l,72),this.global=e,this.targetContainer=t,this.WB=i,this.videoPosition=l,this.storyPosition=d,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.activeVersion=this.WB.activeVersion,this.storyId=this.WB.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=Object(k.a)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.WB.minSlidesBeforeFirstAd,this.slidesBetweenAds=(Object(k.a)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising:this.WB).slidesBetweenAds,this.WB.floatingMode===Uo.ProtoPlayerFloatingMode.Always?this.orientation=Uo.ProtoPlayerOrientationEnum.Landscape:this.orientation=(Object(k.a)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization:this.WB).orientation,this.orientationBreakpoint=(Object(k.a)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization:this.WB).orientationBreakpoint,Object(k.f)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.nD(),this.rD(),this.aD(),this.hD(),this.oD(),this.cD(),this.useAccentColorForProgressBar=(Object(k.a)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization:this.WB).useAccentColorForProgressBar,this.endOfSlideCycleMode=Object(k.a)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.WB.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=Object(k.a)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=Object(k.a)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=Object(k.a)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=(Object(k.h)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization:this.WB).publisherName}nD(){this.apiConfig.settings.customization.primaryColorList&&Object(k.h)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.WB.primaryColorList&&Object(k.h)(this.WB.primaryColorList.background)&&(this.primaryColorList.background=this.WB.primaryColorList.background)}rD(){this.apiConfig.settings.customization.primaryColorList&&Object(k.h)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.WB.primaryColorList&&Object(k.h)(this.WB.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.WB.primaryColorList.foreground)}aD(){this.apiConfig.settings.customization.secondaryColorList&&Object(k.h)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.WB.secondaryColorList&&Object(k.h)(this.WB.secondaryColorList.background)&&(this.secondaryColorList.background=this.WB.secondaryColorList.background)}hD(){this.apiConfig.settings.customization.secondaryColorList&&Object(k.h)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.WB.secondaryColorList&&Object(k.h)(this.WB.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.WB.secondaryColorList.foreground)}oD(){this.apiConfig.settings.customization.accentColorList&&Object(k.h)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.WB.accentColorList&&Object(k.h)(this.WB.accentColorList.background)&&(this.accentColorList.background=this.WB.accentColorList.background)}cD(){this.apiConfig.settings.customization.accentColorList&&Object(k.h)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.WB.accentColorList&&Object(k.h)(this.WB.accentColorList.foreground)&&(this.accentColorList.foreground=this.WB.accentColorList.foreground)}}var _d=i(28);class Fd extends Ed{constructor(e,t){super(),this.de=e;try{this.bo=new Id,this.gs()}catch(e){Object(g.a)({message:"omid_verification_client_error",exception:e.message,callStack:e.callStack,level:t?f.ProtoLoggingLevelEnum.FATAL:f.ProtoLoggingLevelEnum.INFO})}}subscribe(e,t){return this.bo.on(e,t)}gs(){const e=this.lD();if(this.uD=new e,!this.uD.isSupported())throw new Error("omid_not_implemented");this.dD(),this.Nb()}lD(){if(!this.de.OmidVerificationClient)throw new Error("omid_verification_client_not_found");if(!this.de.OmidVerificationClient[_d.k])throw new Error("omid_verification_client_wrong_version");return this.de.OmidVerificationClient[_d.k]}dD(){this.uD.registerSessionObserver(e=>{e&&e.type===_d.e.sessionError&&Object(g.a)({message:"omid_verification_client_session_error",exception:e.data.message,level:f.ProtoLoggingLevelEnum.WARNING})})}Nb(){this.uD.addEventListener(_d.e.geometryChange,e=>{try{const{percentageInView:i,reasons:r}=e.data.adView,s=[_d.a.backgrounded,_d.a.notFound].some(e=>r.includes(e));this.DB(s);var t=i/100;this.setViewableThreshold(t),this.bo.trigger(A.d.OmidViewabilityThreshold,t)}catch(e){Object(g.a)({message:"omid_verification_client_geometry_change_error",exception:e.message,callStack:e.callStack,level:f.ProtoLoggingLevelEnum.FATAL,throttle:1})}})}}const Nd={src:se.a.endPoints.assets.css.playspace,id:"cnx-playspace-css"};class Ud extends s.a{Mn(){return Nd}getDelegateHandler(){return{getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(e,t,i,r,s){return new kd(this,e,t,i,r,s)}getViewabilityService(e,t,i=!1){return this.externalAttributes.settings.useExternalViewabilityService?new Ed:this.hs?new Fd(window,this.Ds):new xd(e.global,t,i)}getPlayerResponse(e,t){return new Promise((t,i)=>{Zr.a.sendProtoRequest({ProtoResponse:Uo.ProtoPlayspaceResponse,ProtoRequest:Uo.ProtoPlayspaceRequest,requestData:e,endpoint:se.a.endPoints.api.story,withCredentials:!0,queryParams:{[ss.b]:Ke.a.version},logError:!0}).then(e=>{window.parent.connatixDummy&&Object(Yt.b)("connatixDummy",this.pageUrl)&&(e.players[0]=Object.assign(Object.assign({},e.players[0]),window.parent.connatixDummy)),t(e)}).catch(e=>{this.GLOBAL.cnxDummyResponse?t(this.GLOBAL.cnxDummyResponse):i(e)})})}getPlayerModel(e,t,i){return new Dd(e.insertWindow||this.GLOBAL,e.insertContainer,t.players[i],t.browser.device,t.secondLevelDomain,this.externalAttributes,this.isServerlessMode,t.supplyChain,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,t.isSeoTraffic||this.queryParams.cnxIsSeoTraffic)}getApiConfigEnums(){return bd}getApiConfigEvents(){return ud}getSpecificRequestData(){const e={};return this.queryParams.cnxStoryId?e.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(e.forceStoryId=this.externalAttributes.storyId),e}defaultInitFromProto(){return function(e,t){const i=e.toObject({},{defaults:!0,arrays:!0,objects:!0}),r=t.toObject({},{defaults:!0,arrays:!0,objects:!0});return i.players.push(r),i.browser=f.Browser.toObject(f.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),i.geoLocation=f.GeoLocation.toObject(f.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),i}(Uo.ProtoPlayspaceResponse,Uo.ProtoPlayspace)}Js(){super.Js(),this.externalAttributes.settings.story=void 0}}var s=i(36),Vd=i(12);class qd{constructor(e=!1){this._debugLogging=e,this.fD="eventEmitted",this.bo=new Id}subscribe(e){return this.bo.on(this.fD,e)}unsubscribe(e){this.bo.remove(this.fD,e)}emitSessionStart(e){this.pD({metadata:{videoMetadata:e},name:Vd.a.SessionStart})}emitContentComplete(){this.pD({name:Vd.a.ContentComplete})}emitSessionEnd(){this.pD({name:Vd.a.SessionEnd})}emitPlay(){this.pD({name:Vd.a.Play})}emitPause(){this.pD({name:Vd.a.Pause})}emitAdPlay(){this.pD({name:Vd.a.AdPlay})}emitAdPause(){this.pD({name:Vd.a.AdPause})}emitAdPlaying(){this.pD({name:Vd.a.AdPlaying})}emitAdPaused(){this.pD({name:Vd.a.AdPaused})}emitAdImpression(e,t){this.pD({metadata:{adMetadata:e,customAdMetadata:t},name:Vd.a.AdImpression})}emitAdComplete(){this.pD({name:Vd.a.AdComplete})}emitAdStopped(){this.pD({name:Vd.a.AdStopped})}emitAdBreakStart(e){this.pD({metadata:{adBreakMetadata:e},name:Vd.a.AdBreakStart})}emitAdBreakComplete(){this.pD({name:Vd.a.AdBreakComplete})}emitPlayerResized(e){this.pD({metadata:{playerDimensionsMetadata:e},name:Vd.a.PlayerResized})}emitOnEnterFullscreen(){this.pD({name:Vd.a.OnEnterFullscreen})}emitOnExitFullscreen(){this.pD({name:Vd.a.OnExitFullscreen})}emitOnPlayerCollapsed(){this.pD({name:Vd.a.PlayerCollapsed})}emitOnPlayerExpanded(){this.pD({name:Vd.a.PlayerExpanded})}emitAdError(){this.pD({name:Vd.a.AdError})}emitPlayError(){this.pD({name:Vd.a.PlayError})}emitRenderError(){this.pD({name:Vd.a.RenderError})}emitAdClickThru(){this.pD({name:Vd.a.AdClickThru})}emitAdInteraction(){this.pD({name:Vd.a.AdInteraction})}emitAdVideoStart(e){this.pD({metadata:{adVideoStartMetadata:e},name:Vd.a.AdVideoStart})}emitAdLoaded(e){this.pD({metadata:{adLoadedMetadata:e},name:Vd.a.AdLoaded})}emitAdStateChange(e){this.pD({metadata:{adStateChangedMetadata:e},name:Vd.a.AdStateChange})}emitAdVideoFirstQuartile(){this.pD({name:Vd.a.AdVideoFirstQuartile})}emitAdVideoMidpoint(){this.pD({name:Vd.a.AdVideoMidpoint})}emitAdVideoThirdQuartile(){this.pD({name:Vd.a.AdVideoThirdQuartile})}emitAdVideoComplete(){this.pD({name:Vd.a.AdVideoComplete})}emitVolumeChange(e){this.pD({name:Vd.a.VolumeChange,metadata:{volume:e}})}emitAdVolumeChange(){this.pD({name:Vd.a.AdVolumeChange})}emitAdSkipped(){this.pD({name:Vd.a.AdSkipped})}pD(e){this._debugLogging&&console.log("Connatix Player Elements debugging: ",e),this.bo.trigger(this.fD,e)}destroy(){this.pD({name:Vd.a.Destroy}),this.bo.removeAll()}}const Hd=window.parent,Wd=[];window.addEventListener("unload",function(e){Wd.forEach(e=>e.destroy())});const Gd=Object(Y.f)(Hd).topFrame;s.a.abServiceType=s.b.PlayspaceABService;try{!function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))return Object(g.a)({message:"Prerender_Playspace_main_IE_check",level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3});let e=[];function t(i){var e;return i.settings=i.settings||{},i._appSettings=i._appSettings||{},i._appSettings.cmp=i._appSettings.cmp||{},i._appSettings.tcf=i._appSettings.tcf||{},i.settings.customization=i.settings.customization||{},i.settings.rendering=i.settings.rendering||{},i.settings.advertising=i.settings.advertising||{},i.settings._connatixInternals=i.settings._connatixInternals||{},i.settings.plugins=i.settings.plugins||{},i.settings.advertising.skipAdSettings=i.settings.advertising.skipAdSettings||{},["602660809","com.thomsonreuters.reuters","12345","com.cnx.androidsdkapp"].includes(null===(e=null===i||void 0===i?void 0:i._appSettings)||void 0===e?void 0:e.bundleID)&&Object(g.a)({level:f.ProtoLoggingLevelEnum.INFO,message:"CNX_REUTERS_APPSETTINGS",exception:JSON.stringify(i._appSettings)}),i=(e=>{const t=Object.assign({},e),i=null===(s=t._appSettings)||void 0===s?void 0:s.cmp;(Object(k.h)(null===(n=t._appSettings)||void 0===n?void 0:n.gdprConsentString)||Object(k.h)(null===(o=t._appSettings)||void 0===o?void 0:o.gdprParsedVendorString))&&(t._appSettings.cmp={consentString:Object(k.h)(null===i||void 0===i?void 0:i.consentString)?i.consentString:t._appSettings.gdprConsentString,parsedVendorConsents:Object(k.h)(null===i||void 0===i?void 0:i.parsedVendorConsents)?i.parsedVendorConsents:t._appSettings.gdprParsedVendorString});var r=Object.assign({},st(Object.assign({},t._appSettings.cmp))),e=Object.assign({},st(Object.assign({},t._appSettings.tcf))),{usPrivacyString:s,deviceID:n,appPageURL:o}=st({usPrivacyString:t._appSettings.usPrivacyString,deviceID:t._appSettings.deviceID,appPageURL:t._appSettings.appPageURL});return t._appSettings=Object.assign(Object.assign({},t._appSettings),{cmp:r,tcf:e,usPrivacyString:s,deviceID:n,appPageURL:o}),t})(i),{render:function(e,t){try{!function(e,t,i){var r,s=Object(k.h)(e._appSettings.bundleID),n=Object(k.h)(e._appSettings.sdkVersion);if(n){const t=parseInt(e._appSettings.sdkVersion.substr(0,1),10);e.settings.useExternalViewabilityService=!(3<=t)}const{cmp:o,tcf:a,usPrivacyString:l,deviceID:d}=e._appSettings,c=(r=e,Hd.AMP_CONTEXT_DATA||r.settings.implementationType===f.ProtoImplementationType.Amp),h={UserManagerService:new m.b(Hd,s,c,{cmp:o,tcf:a,usPrivacyString:l,deviceID:d}),EventsStorageService:new qd(e.settings.plugins._debugLogging)},u=new Ud(h,Hd,s,c,n,i);Wd.push(u);function p(){Object(Y.k)(()=>new Promise((e,t)=>{if(Object(S.m)(Nd.id,Gd))return e();Object(S.B)(Nd,Gd.document.head,Gd,()=>e(),e=>t(e))||t()})).catch(e=>{throw Object(g.a)({message:"Prerender_Playspace_Loader_add_css_link",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3}),e}).then(()=>{try{Object(S.W)(Hd),u.updateQueryParams(),u.loadScriptTag(e,t)?u.insertRenderer():Object(g.a)({message:"Prerender_Playspace_main_no_script_tag",level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}catch(e){Object(g.a)({message:"Prerender_Playspace_main_insertRenderer",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}).catch(()=>{})}s?p():u.findPageUrl(Hd,null===(s=null===e||void 0===e?void 0:e.settings)||void 0===s?void 0:s.ampUrl).then(()=>p()).catch(e=>{Object(g.a)({message:"Prerender_Playspace_main_init",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3}),u.registerApiError()})}(i,e,t)}catch(e){Object(g.a)({message:"Prerender_Playspace_main_initPlayer",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}}}Hd.cnxps&&(e=Hd.cnxps.cmd),Hd.cnxps=(t.cmd={push:function(e){try{e()}catch(e){Object(g.a)({message:"Prerender_Playspace_main_push_callback",level:f.ProtoLoggingLevelEnum.INFO,exception:e.message,callStack:e.stack,throttle:1e3})}}},t.configEnums=bd,t.configEvents=ud,t),e.forEach(e=>{try{e()}catch(e){Object(g.a)({message:"Prerender_Playspace_main_commands_callback",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}})}()}catch(e){Object(g.a)({message:"Prerender_Playspace_main",exception:e.message,callStack:e.stack,level:f.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}]);
