!function(t){var e=function(o,r){"use strict";if(r.getElementsByClassName){var z,t=r.documentElement,a=o.addEventListener,v=o.setTimeout,l=o.requestAnimationFrame||v,y=/^picture$/i,n=["load","error","lazyincluded","_lazyloaded"],h=function(t,e){e=new RegExp("(\\s|^)"+e+"(\\s|$)");return t.className.match(e)&&e},p=function(t,e){h(t,e)||(t.className+=" "+e)},A=function(t,e){(e=h(t,e))&&(t.className=t.className.replace(e," "))},C=function(e,a,t){var i=t?"addEventListener":"removeEventListener";t&&C(e,a),n.forEach(function(t){e[i](t,a)})},b=function(t,e,a,i,n){var s=r.createEvent("CustomEvent");return s.initCustomEvent(e,!i,!n,a||{}),s.details=s.detail,t.dispatchEvent(s),s},E=function(t,e){var a;o.HTMLPictureElement||((a=o.picturefill||o.respimage||z.pf)?a({reevaluate:!0,elements:[t]}):e&&e.src&&(t.src=e.src))},d=function(t,e){return getComputedStyle(t,null)[e]},c=function(t,e,a){for(a=a||t.offsetWidth;a<z.minSize&&e&&!t._lazysizesWidth;)a=e.offsetWidth,e=e.parentNode;return a},e=function(t){function e(){v(r)}function a(){l(e)}var i,n=0,s=o.Date,r=function(){i=!1,n=s.now(),t()};return function(){var t;i||(t=z.throttle-(s.now()-n),i=!0,v(a,t=t<9?9:t))}},i=(D=/^img$/i,F=/^iframe$/i,H="onscroll"in o&&!/glebot/.test(navigator.userAgent),j=I=0,q=1,G=function(t){j--,t&&t.target&&C(t.target,G),t&&!(j<0)&&t.target||(j=0)},J=e(function(){var t,e,a,i,n,s,r,o,l;if((_=z.loadMode)&&j<8&&(t=g.length)){for(e=0,q++,I<P&&j<1&&3<q&&2<_?(I=P,q=0):I=I!=O&&1<_&&2<q&&j<6?O:0;e<t;e++)g[e]&&!g[e]._lazyRace&&(H?(l!==(s=!(o=g[e].getAttribute("data-expand"))||!(s=+o)?I:s)&&(x=innerWidth+s,B=innerHeight+s,r=-1*s,l=s),a=g[e].getBoundingClientRect(),(T=a.bottom)>=r&&(S=a.top)<=B&&(R=a.right)>=r&&(W=a.left)<=x&&(T||R||W||S)&&(w&&j<3&&!o&&(_<3||q<4)||function(t,e){var a,i=t,n="hidden"!=d(t,"visibility");for(S-=e,T+=e,W-=e,R+=e;n&&(i=i.offsetParent);)(n=0<(d(i,"opacity")||1))&&"visible"!=d(i,"overflow")&&(a=i.getBoundingClientRect(),n=R>a.left&&W<a.right&&T>a.top-1&&S<a.bottom+1);return n}(g[e],s))?(U(g[e],a.width),n=!0):!n&&w&&!i&&j<3&&q<4&&2<_&&(M[0]||z.preloadAfterLoad)&&(M[0]||!o&&(T||R||W||S||"auto"!=g[e].getAttribute(z.sizesAttr)))&&(i=M[0]||g[e])):U(g[e]));i&&!n&&U(i)}}),K=function(t){p(t.target,z.loadedClass),A(t.target,z.loadingClass),C(t.target,K)},k=[],Q=function(t){k.push(t),$||($=!0,l(V))},{_:function(){g=r.getElementsByClassName(z.lazyClass),M=r.getElementsByClassName(z.lazyClass+" "+z.preloadClass),O=z.expand,P=Math.round(O*z.expFactor),a("scroll",J,!0),a("resize",J,!0),o.MutationObserver?new MutationObserver(J).observe(t,{childList:!0,subtree:!0,attributes:!0}):(t.addEventListener("DOMNodeInserted",J,!0),t.addEventListener("DOMAttrModified",J,!0),setInterval(J,999)),a("hashchange",J,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(t){r.addEventListener(t,J,!0)}),(w=/d$|^c/.test(r.readyState))?X():(a("load",X),r.addEventListener("DOMContentLoaded",J)),J()},checkElems:J,unveil:U=function(t,e){var a,i,n,s,r,o,l,d,c,u,f=D.test(t.nodeName),m=t.getAttribute(z.sizesAttr)||t.getAttribute("sizes"),g="auto"==m;(!g&&w||!f||!t.src&&!t.srcset||t.complete||h(t,z.errorClass))&&(t._lazyRace=!0,j++,Q(function(){if(t._lazyRace&&delete t._lazyRace,A(t,z.lazyClass),!(d=b(t,"lazybeforeunveil")).defaultPrevented){if(m&&(g?(N.updateElem(t,!0,e),p(t,z.autosizesClass)):t.setAttribute("sizes",m)),r=t.getAttribute(z.srcsetAttr),s=t.getAttribute(z.srcAttr),f&&(o=t.parentNode,l=o&&y.test(o.nodeName||"")),c=d.detail.firesLoad||"src"in t&&(r||s||l),d={target:t},c&&(C(t,G,!0),clearTimeout(L),L=v(G,2500),p(t,z.loadingClass),C(t,K,!0)),l)for(a=o.getElementsByTagName("source"),i=0,n=a.length;i<n;i++)(u=z.customMedia[a[i].getAttribute("data-media")||a[i].getAttribute("media")])&&a[i].setAttribute("media",u),(u=a[i].getAttribute(z.srcsetAttr))&&a[i].setAttribute("srcset",u);r?t.setAttribute("srcset",r):s&&(F.test(t.nodeName)?function(e,a){try{e.contentWindow.location.replace(a)}catch(t){e.setAttribute("src",a)}}(t,s):t.setAttribute("src",s)),(r||l)&&E(t,{src:s})}c&&!t.complete||(c?G(d):j--,K(d))}))}}),N={_:function(){f=r.getElementsByClassName(z.autosizesClass),a("resize",m)},checkElems:m=e(function(){var t,e=f.length;if(e)for(t=0;t<e;t++)u(f[t])}),updateElem:u},s=function(){s.i||(s.i=!0,N._(),i._())};return function(){var t,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:2,expand:359,loadMode:2,throttle:125};for(t in z=o.lazySizesConfig||o.lazysizesConfig||{},e)t in z||(z[t]=e[t]);o.lazySizesConfig=z,v(function(){z.init&&s()})}(),{cfg:z,autoSizer:N,loader:i,init:s,uP:E,aC:p,rC:A,hC:h,fire:b,gW:c}}function u(t,e,a){var i,n,s,r,o=t.parentNode;if(o&&(a=c(t,o,a),!(r=b(t,"lazybeforesizes",{width:a,dataAttr:!!e})).defaultPrevented&&(a=r.detail.width)&&a!==t._lazysizesWidth)){if(t._lazysizesWidth=a,t.setAttribute("sizes",a+="px"),y.test(o.nodeName||""))for(n=0,s=(i=o.getElementsByTagName("source")).length;n<s;n++)i[n].setAttribute("sizes",a);r.detail.dataAttr||E(t,r.detail)}}var f,m,g,M,w,L,_,x,B,S,W,R,T,O,P,$,k,D,F,H,I,j,q,G,J,K,Q,U;function V(){for(;k.length;)k.shift()();$=!1}function X(){function t(){z.loadMode=3,J()}var e;w=!0,q+=8,z.loadMode=3,a("scroll",function(){3==z.loadMode&&(z.loadMode=2),clearTimeout(e),e=v(t,99)},!0)}}(t,t.document);t.lazySizes=e,"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e)}(window);
