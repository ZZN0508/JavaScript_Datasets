!function(){"use strict";angular.module("tmh.dynamicLocale",[]).config(["$provide",function(e){function t(e){return e.$stateful=!0,e}e.decorator("dateFilter",["$delegate",t]),e.decorator("numberFilter",["$delegate",t]),e.decorator("currencyFilter",["$delegate",t])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(e){function l(e,t,o,a,n,c,r){function i(a,n){$===o&&(angular.forEach(a,function(e,t){n[t]?angular.isArray(n[t])&&(a[t].length=n[t].length):delete a[t]}),angular.forEach(n,function(e,t){angular.isArray(n[t])||angular.isObject(n[t])?(a[t]||(a[t]=angular.isArray(n[t])?[]:{}),i(a[t],n[t])):a[t]=n[t]}))}if(v[o])return v[o];var l,u,s,h,d,g,m,f=n.defer();return o===$?f.resolve(t):(l=c.get(o))?($=o,a.$evalAsync(function(){i(t,l),a.$broadcast("$localeChangeSuccess",o,t),y.put(p,o),f.resolve(t)})):(v[$=o]=f.promise,e=e,u=function(){var e=angular.injector(["ngLocale"]).get("$locale");i(t,e),c.put(o,e),delete v[o],a.$apply(function(){a.$broadcast("$localeChangeSuccess",o,t),y.put(p,o),f.resolve(t)})},s=function(){delete v[o],a.$apply(function(){$===o&&($=t.id),a.$broadcast("$localeChangeError",o),f.reject(o)})},h=r,d=document.createElement("script"),g=document.getElementsByTagName("body")[0],m=!1,d.type="text/javascript",d.readyState?d.onreadystatechange=function(){"complete"!==d.readyState&&"loaded"!==d.readyState||(d.onreadystatechange=null,h(function(){m||(m=!0,g.removeChild(d),u())},30,!1))}:(d.onload=function(){m||(m=!0,g.removeChild(d),u())},d.onerror=function(){m||(m=!0,g.removeChild(d),s())}),d.src=e,d.async=!1,g.appendChild(d)),f.promise}var u,y,$,s="angular/i18n/angular-locale_{{locale}}.js",h="tmhDynamicLocaleStorageCache",p=e,v={};this.localeLocationPattern=function(e){return e?(s=e,this):s},this.useStorage=function(e){h=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){u=e},this.storageKey=function(e){return e?(p=e,this):p},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(t,e,a,n,o,c,r){var i=a(s);return y=e.get(h),t.$evalAsync(function(){var e;(e=y.get(p)||u)&&l(i({locale:e}),n,e,t,o,c,r)}),{set:function(e){return l(i({locale:e}),n,e,t,o,c,r)},get:function(){return $}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop])}(window);
