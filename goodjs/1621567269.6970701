!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-dl",[],t):"object"==typeof exports?exports["wafer-dl"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-dl"]=t())}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="https://s.yimg.com/aaq/wf/",t(t.s="./src/entry.js")}({"./src/base.js":function(e,t,i){"use strict";function n(){return h=l(i("./src/data.js"))}function r(){return v=l(i("./src/plugins/autoscroller.js"))}function a(){return p=l(i("./src/plugins/staticcaption.js"))}function s(){return y=l(i("./src/plugins/tracking.js"))}function o(){return g=l(i("./src/plugins/responsive.js"))}function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h,v,p,y,g,_=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},b=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),w=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},k=window.wafer,E=k.base,S=k.features,C=k.utils,P=k.WaferBaseClass,O=k.constants,A=S.transformProperty,j=C.bindEvent,x=C.clearAndSetInnerHTML,T=C.convertNodeListToArray,L=C.fetchWithCache,I=C.isVisible,M=C.throttle,B=C.unbindEvent,D=3,V=O.ATTR_PREFIX,R="active",W=["next","prev","_addTransientEventListeners","_removeTransientEventListeners","_beforeSlideChange","_afterSlideChange"],F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;e.style.webkitTransition="transform "+t+"ms ease-out",e.style.transition="transform "+t+"ms ease-out"},N=function(e){e.style.webkitTransition="",e.style.transition=""},z=function(){var e=[],t=!1;return{add:function(t,i){e.push(function(e){return function(){return t.call(e)}}(i)),this.exec()},exec:function(){var i=this;t||(t=!0,setTimeout(function(){t=!1,e.shift().call(),e.length&&i.exec()},275))}}}(),X=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.counter,a=void 0===r?0:r,s=i.syncDelay,o=void 0===s?25:s;c(this,t);var l=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{},{})),u=e.getAttribute("data-wf-behavior"),f=e.getAttribute("data-wf-pagination-target"),v=e.getAttribute("data-wf-trigger-wf-during-transition"),p=e.getAttribute(V+"stickiness-local-storage-key"),y=e.getAttribute(V+"stickiness-cookie-name"),g=e.getAttribute(V+"stickiness-time"),_=e.getAttribute(V+"stickiness-version"),b=e.getAttribute("data-wf-cycle"),w=parseInt(e.getAttribute("data-wf-dl-max-children"))||D,k="true"===e.getAttribute("data-wf-autoscroll"),S="true"===e.getAttribute("data-wf-static-captions"),C="true"===e.getAttribute("data-wf-tracking-enabled"),P="true"===e.getAttribute("data-wf-responsiveness-enabled"),O=document.location.host&&"w.main.welcomescreen.aol.com"===document.location.host,A=document.location.host&&document.location.host.indexOf("aol.com")>-1,j=A&&!O;l._util={elem:e,triggerWafersDuringTransition:"1"===v?1:0,behavior:u,maxChildren:w,hasAutoScrollEnabled:k,hasStaticCaptions:S,hasTrackingEnabled:C,hasResponsivenessEnabled:P,stickinessLocalStorageKey:p,stickinessCookieName:y,maxSiblingsPerSide:Math.floor(w/2),plugins:[],tracking:{rapidPageViewPerSlideEnabled:j,rapidLinkViewPerSlideEnabled:!0,comscorePerSlideEnabled:!O}},l.updateElemVisbility(e,!0),l._syncWithThrottle=M(function(){E.sync(e)},o,l),l._util.stickinessLocalStorageKey&&(l._util.stickinessTimeSeconds=parseInt(g)||1200,l._util.stickinessVersion=parseInt(_)||-1,l.initializeStickiness());var x=l.getStickinessFromLocalStorage(),L=x.activeIndex;if("native"===l._util.behavior){var I;return I=l._initNativeScrollview(),d(l,I)}var B=f&&document.body.querySelector(f)||T(e.getElementsByClassName("indicators"))[0],N=void 0,z=void 0;B&&"count"===(N=B.getAttribute("data-wf-pagination-type")||"default")&&(z=T(B.getElementsByClassName("current-page"))[0]);var X=new((h||n()).default),U=T(e.getElementsByClassName("slides"))[0],H=l._util=m({},l._util,{counter:a,cycle:null===b||void 0===b?0:Number(b),dataList:X,drag:{endX:0,endY:0,isVerticalDirection:!1,startX:0,startY:0},elem:e,indicatorCountElem:z,indicatorElem:B,indicatorType:N,nextBtn:T(e.getElementsByClassName("next-btn"))[0],prevBtn:T(e.getElementsByClassName("prev-btn"))[0],sliderElem:U,sliderItemsDataMapping:new Map});l._util.sliderElem.children.length<1&&(l.updateElemVisbility(e,!1),l.destroy()),l._state={disableEventHandlers:!1,hasBeenThreadmilled:!1,slideWidth:l._getSlideWidth(),virtualCounter:0},H.sliderItems=T(H.sliderElem.children),H.indicatorItems=H.indicatorElem?Array.prototype.slice.call(H.indicatorElem.children):null;var Y=H.sliderItems.length;l.updateWidth(),F(H.sliderElem),H.sliderElem.style.cursor="-webkit-grab";for(var q=document.createDocumentFragment(),Q=void 0,K=!1,J=0;J<Y;J++){var G=H.sliderItems[J];X.add(G),G.style.width=l._state.slideWidth+"px",!K&&J>0&&G.classList.contains(R)&&(Q=J,K=!0),q.appendChild(G)}if(!K&&L&&(Q=L),H.sliderElem.appendChild(q),Q>0){for(var Z=0;Z<Q;Z++)l._state.virtualCounter++,l._util.counter++,X.setNextAsActive();X.getActive().classList.remove(R)}return W.forEach(function(e){l[e]=l[e].bind(l)}),l._initPlugins(),l._threadmill(),l._beforeSlideChange(),l.renderSlide(X.getActive(),{prefetch:!0}),l._afterSlideChange(),l.updateElemVisbility(e,!0),l.addEventListeners(),l.updateIndicators(l._util.counter),l.updateButtons(!0),l.preFetch(),l._util.plugins.forEach(function(e){e.onAfterInit()}),l}return f(t,e),b(t,[{key:"_initPlugins",value:function(){this._util.hasAutoScrollEnabled&&this._util.plugins.push(new((v||r()).default)(this._util.elem,this)),this._util.hasStaticCaptions&&this._util.plugins.push(new((p||a()).default)(this._util.elem,this)),this._util.hasTrackingEnabled&&this._util.plugins.push(new((y||s()).default)(this._util.elem,this)),this._util.hasResponsivenessEnabled&&this._util.plugins.push(new((g||o()).default)(this._util.elem,this))}},{key:"_getSlideWidth",value:function(){var e=this._util,t=e.sliderElem,i=e.elem;return t.style.width="",parseInt(i.getAttribute("data-wf-slide-width"))||t.getBoundingClientRect().width}},{key:"_initNativeScrollview",value:function(){var e=this._util.elem,t=void 0;if(T(e.children).some(function(e){return!!e.classList.contains(R)&&(t=e,!0)}),t&&0===e.scrollLeft){var i=e.getBoundingClientRect(),n=i.width,r=t.getBoundingClientRect(),a=r.width,s=r.left;e.scrollLeft=a>=n?s-30:s-(n-a)/2}this.addEventListeners()}},{key:"updateElemVisbility",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.style.visibility=t?"visible":"hidden"}},{key:"slidesHasBeenUpdated",value:function(){var e=this._util,t=this._state.slideWidth;e.sliderItems=T(e.sliderElem.children);var i=e.sliderItems.length;this._state.slideWidth=t;for(var n=0;n<i;n++){e.sliderItems[n].style.width=t+"px"}this.updateWidth()}},{key:"updateWidth",value:function(){var e=this._util,t=e.sliderElem,i=e.sliderItems,n=this._getSlideWidth();e.containerWidth=t.getBoundingClientRect().width,t.style.width=n*i.length+"px",this._setTransform()}},{key:"_getTransformValue",value:function(){var e=this._util,t=this._state.virtualCounter,i=this._state.slideWidth;return e.containerWidth=e.containerWidth,e.sliderElem.children.length>1&&(e.edgePaddingPerSide=(e.containerWidth-i)/2),t*i-e.edgePaddingPerSide}},{key:"addEventListeners",value:function(){var e=this._util,i=e.elem;if("native"===e.behavior)return void j(i,"scroll",this._syncWithThrottle);w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListeners",this).call(this)}},{key:"_toggleActiveClasses",value:function(){var e=this._util.dataList,t=e.getBackward(1),i=e.getForward(1),n=e.getActive(),r=!n.classList.contains(R);r?n.classList.add(R):n.classList.remove(R),t&&(r?t.classList.add("prev-slide"):t.classList.remove("prev-slide")),i&&(r?i.classList.add("next-slide"):i.classList.remove("next-slide"))}},{key:"_beforeSlideChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._removeTransientEventListeners(),this._toggleActiveClasses(),this._util.plugins.forEach(function(t){t.onBeforeSlideChange(e)})}},{key:"_afterSlideChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.preFetch(),this._addTransientEventListeners(),this._enablePointerEvents(),this.updateStickinessValue(),this._util.plugins.forEach(function(i){i.onAfterSlideChange(e,t)})}},{key:"_addTransientEventListeners",value:function(){var e=this,i=t.transientEvents,n=this._util.elem;for(var r in i){(function(t){if(!i.hasOwnProperty(t))return"continue";[].concat(u(i[t])).forEach(function(i){var r=_(i,2),a=r[0],s=r[1];[].concat(u(n.getElementsByClassName(a))).forEach(function(i){i.addEventListener(t,e[s])})})})(r)}}},{key:"_removeTransientEventListeners",value:function(){var e=this,i=t.transientEvents,n=this._util.elem;for(var r in i){(function(t){if(!i.hasOwnProperty(t))return"continue";[].concat(u(i[t])).forEach(function(i){var r=_(i,2),a=r[0],s=r[1];[].concat(u(n.getElementsByClassName(a))).forEach(function(i){i.removeEventListener(t,e[s])})})})(r)}}},{key:"removeEventListeners",value:function(){var e=this._util,i=e.elem;if("native"===e.behavior)return void B(i,"scroll",this._syncWithThrottle);this._removeTransientEventListeners(),w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeEventListeners",this).call(this)}},{key:"preFetch",value:function(){for(var e=this._util,t=e.dataList,i=e.maxSiblingsPerSide,n=1;n<i+1;n++){var r=t.getForward(n),a=t.getBackward(n);r&&this.renderSlide(r,{prefetch:!0}),a&&this.renderSlide(a,{prefetch:!0})}}},{key:"handleResize",value:function(){if("native"!==this._util.behavior){var e=this._util.sliderElem;this._util.plugins.forEach(function(e){e.onBeforeResize()}),I(e)&&(N(e),this.updateWidth(),this._util.plugins.forEach(function(e){e.onAfterResize()}),setTimeout(function(){F(e)},0))}}},{key:"handleFetch",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fetchUrl,a=n.prefetch,s=void 0!==a&&a,o=n.replace,l=void 0!==o&&o,u=n.resultSelector,c=this._util,d=c.dataList,f=c.sliderItemsDataMapping;f.has(e)||f.set(e,{});var h=f.get(e);!r||void 0!==h.fetchStatus&&2!==h.fetchStatus?(s?E.prefetch(e):E.sync(e),l&&this.slidesHasBeenUpdated()):(h.fetchStatus=0,L(r,{useRid:0}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.assets,r=void 0===n?{}:n,a=t.html;if(a){var o=void 0;if(E.destroy(e),l){var c=e.parentNode,f=document.createElement("div");f.innerHTML=a;f=u&&f.querySelector(u)||f;var v=T((f||{}).children);d.appendWithReplace(e,v);var p=T(c.children).indexOf(e),y=T(c.children).indexOf(d.getActive());if(-1!==p&&f.children.length){var g=void 0;g=p<y?d.getBackward(y-p):p>y?d.getForward(p-y):d.getActive(),e.insertAdjacentElement("beforebegin",g),c.removeChild(e),E.sync(g)}o=c}else x(e,a),o=e;h.fetchStatus=1,E.syncAssets(r),s?E.prefetch(e):E.sync(o),l&&i.slidesHasBeenUpdated()}}).catch(function(i){E.emitError({name:t.constructor.name,elem:e,meta:{fetchUrl:r},stack:i.stack}),h.fetchStatus=2}))}},{key:"renderSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._util.dataList.getActive(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.prefetch,n=void 0!==i&&i,r=void 0,a=void 0,s=void 0,o=e.getAttribute("data-wf-url");switch(o&&(r="fetch",s=!!Number(e.getAttribute("data-wf-replace")),a=e.getAttribute("data-wf-result-selector")),r){case"fetch":this.handleFetch(e,{fetchUrl:o,prefetch:n,replace:s,resultSelector:a});break;default:n&&E.prefetch(e),setTimeout(function(){E.sync(e)},250)}}},{key:"updateElemsUsingVirtualElements",value:function(e,t,i){var n=this,r=this._util,a=this._state,s=r.cycle,o=r.dataList,l=r.sliderElem,u=r.maxSiblingsPerSide,c=o.size,d=a.slideWidth;if(1===e){var f=t>c-1;if(!s&&f)return;var h=o.getForward(u+1);h.style.width=d+"px",a.virtualCounter++,F(l),this._setTransform(),o.setNextAsActive(),this._toggleActiveClasses(),z.add(function(){var t=r.sliderElem,s=T(t.children);t.removeChild(s[0]),t.appendChild(h),r.sliderItems=T(t.children),a.virtualCounter--,N(t),n._setTransform(),n._afterSlideChange(e,i)},this)}else if(-1===e){var v=t<0;if(!s&&v)return;var p=o.getBackward(u+1);p.style.width=""+d,a.virtualCounter--,F(l),this._setTransform(),o.setPreviousAsActive(),this._toggleActiveClasses(),z.add(function(){var t=r.sliderElem,s=T(t.children);t.removeChild(s[s.length-1]),t.insertBefore(p,t.firstChild),r.sliderItems=T(t.children),a.virtualCounter++,N(t),n._setTransform(),n._afterSlideChange(e,i)},this)}}},{key:"_setTransform",value:function(){var e=this._util,t=e.sliderElem,i="translateX(-"+this._getTransformValue()+"px)";i!==this._util.transformValue&&(t.style[A]=i,this._util.transformValue=i)}},{key:"_hasReachedEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._util,n=i.dataList,r=n.size,a=e+t;return-1===t&&a<0||1===t&&a>=r}},{key:"showCurrent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._util,n=i.counter,r=i.dataList,a=i.elem,s=r.size,o=n;if(this.isValidMove(e)){if(this._hasReachedEnd(o,e)?1===e?o=0:-1===e&&(o=s-1):o=n+e,o===n)return this._setTransform();this._beforeSlideChange(e),this.updateElemsUsingVirtualElements(e,o,t),this._util.counter=o,this.renderSlide(),this.updateIndicators(o,n),this.updateButtons(),E.emitWaferEvent("dl:change",{elem:a,meta:{index:o+1,prevIndex:n+1}})}}},{key:"_threadmill",value:function(){var e=this._util,t=e.sliderElem,i=e.maxSiblingsPerSide,n=e.dataList;for(N(t);t.hasChildNodes();)t.removeChild(t.lastChild);t.insertBefore(n.getActive(),t.firstChild);for(var r=1;r<=i;r++)t.insertBefore(n.getBackward(r),t.firstChild);for(var a=1;a<=i;a++)t.appendChild(n.getForward(a));this._state.virtualCounter=i,this.slidesHasBeenUpdated(),this._state.hasBeenThreadmilled=!0}},{key:"_disablePointerEvents",value:function(){this._util.elem.style.pointerEvents="none"}},{key:"_enablePointerEvents",value:function(){this._util.elem.style.pointerEvents="all"}},{key:"updateIndicators",value:function(e,t){var i=this._util;if("count"===i.indicatorType){var n=i.indicatorCountElem;n&&(n.innerHTML=e+1)}else{var r=i.indicatorItems;r&&(r[t]&&r[t].classList.remove(R),r[e]&&r[e].classList.add(R))}}},{key:"updateButtons",value:function(e){var t=this._util,i=t.counter,n=t.cycle,r=t.nextBtn,a=t.prevBtn,s=t.dataList,o=s.size;n||(r&&(n&&!e||i!==o-1?r.removeAttribute("disabled"):r.setAttribute("disabled",!0)),a&&(n&&!e||0!==i?a.removeAttribute("disabled"):a.setAttribute("disabled",!0)))}},{key:"updateAfterDrag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._util.drag,i=t.currentDirection,n=t.endX,r=t.horizontalDirection,a=t.startX,s=n-a,o=i===r;o&&s>0&&Math.abs(s)>30?this.showCurrent(-1,e):o&&s<0&&Math.abs(s)>30?this.showCurrent(1,e):this.showCurrent(),this._util.plugins.forEach(function(e){e.onUpdateAfterDrag()})}},{key:"isValidMove",value:function(e){var t=this._util,i=t.counter,n=t.cycle,r=t.dataList,a=r.size;return n?1===e&&i<=a-1||-1===e&&i>=0||0===e:1===e&&i<a-1||-1===e&&i>0||0===e}},{key:"grab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._util.drag;this._util.pointerDown=!1,t.endX&&this.updateAfterDrag(e),this.clearDrag()}},{key:"grabbing",value:function(){var e=this._util,t=e.drag,i=e.elem,n=e.itemWidth,r=e.sliderElem,a=e.triggerWafersDuringTransition,s=this._state.virtualCounter,o=t.startX,l=t.endX,u=-1*(s*n+(o-l)),c="translateX("+u+"px)";a&&2*Math.abs(u)>=n&&E.sync(i),c!==this._util.transformValue&&(this._util.drag.grabbing=!0,r.style[A]=c,this._util.transformValue=c),this._util.plugins.forEach(function(e){e.onUpdateAfterDrag()})}},{key:"clearDrag",value:function(){var e=this;this._util.drag={currentDirection:null,endX:0,endY:0,grabbing:!1,horizontalDirection:0,last:0,startX:0,startY:0},this._util.grabTimeout&&clearTimeout(this._grabTimeout),this._util.grabTimeout=setTimeout(function(){e._util.drag.isVerticalDirection=!1},50)}},{key:"next",value:function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.contains("dl__slide-overlay")&&this._disablePointerEvents();var t=e.eventTarget&&e.eventTarget.classList.contains("next-btn")?"button":"edge";this._util.plugins.forEach(function(e){e.onBeforeUserPaginate(1,t)}),this.showCurrent(1,{source:t,type:"next",sourceEvent:e})}},{key:"prev",value:function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.contains("dl__slide-overlay")&&this._disablePointerEvents();var t=e.eventTarget&&e.eventTarget.classList.contains("prev-btn")?"button":"edge";this._util.plugins.forEach(function(e){e.onBeforeUserPaginate(-1,t)}),this.showCurrent(-1,{source:t,type:"prev",sourceEvent:e})}},{key:"keydown",value:function(e){this._state.disableEventHandlers||(e=e||window.event,37===e.keyCode?this.showCurrent(-1,{source:"key",type:"prev"}):39===e.keyCode&&this.showCurrent(1,{source:"key",type:"next"}))}},{key:"touchstart",value:function(e){if(!this._state.disableEventHandlers){var t=this._util,i=e.touches[0],n=i.pageX,r=i.pageY;t.pointerDown=!0,t.drag.isVerticalDirection=!1,t.drag.startX=n,t.drag.startY=r}}},{key:"touchend",value:function(e){this._state.disableEventHandlers||(this._util.pointerDown=!1,this.grab({source:"touch"}))}},{key:"touchmove",value:function(e){if(!this._state.disableEventHandlers){var t=this._util,i=t.drag,n=i.startX,r=i.startY,a=e.touches[0],s=a.pageX,o=a.pageY,l=0;i.isVerticalDirection||(Math.abs(r-o)>8&&(i.isVerticalDirection=r>o?1:-1),n!==s&&(l=n>s?1:-1),i.horizontalDirection=l,i.last!==s&&(i.currentDirection=i.last>s?1:-1,i.last=s),t.pointerDown&&(i.endX=s,i.endY=o,this.isValidMove(l)&&(t.drag.grabbing&&e.cancelable&&e.preventDefault(),Math.abs(r-o)>8&&(i.isVerticalDirection=r>o?1:-1),l&&!i.isVerticalDirection&&this.grabbing())))}}},{key:"mousedown",value:function(e){if(!this._state.disableEventHandlers){e.preventDefault&&e.preventDefault();var t=this._util,i=e.pageX,n=e.pageY;t.pointerDown=!0,t.drag.isVerticalDirection=!1,t.drag.startX=i,t.drag.startY=n}}},{key:"mouseup",value:function(e){this._state.disableEventHandlers||(this._util.sliderElem.style.cursor="-webkit-grab",this.grab({source:"mouse"}))}},{key:"mouseleave",value:function(e){if(!this._state.disableEventHandlers){e.preventDefault();var t=this._util,i=t.pointerDown,n=t.drag,r=t.sliderElem;if(i){var a=e.pageX,s=e.pageY;n.endX=a,n.endY=s,r.style.cursor="-webkit-grabbing",this.grabbing()}this._util.plugins.forEach(function(e){e.onMouseLeave()})}}},{key:"mouseover",value:function(e){this._state.disableEventHandlers||(e.preventDefault(),this._util.plugins.forEach(function(e){e.onMouseOver()}))}},{key:"mousemove",value:function(e){if(!this._state.disableEventHandlers){var t=this._util,i=t.pointerDown,n=t.sliderElem,r=t.drag;if(i){var a=e.pageX,s=e.pageY;this._util.pointerDown=!1,n.style.cursor="-webkit-grab",r.endX=a,r.endY=s,this.updateAfterDrag(),this.clearDrag()}}}},{key:"updateStickinessValue",value:function(){if(this._util.stickinessLocalStorageKey){var e=this.getStickinessFromLocalStorage();e.activeIndex=this._util.counter,this.setStickiness(e)}}},{key:"initializeStickiness",value:function(){var e=this.getStickinessFromLocalStorage(),t=this._util,i=t.stickinessTimeSeconds,n=t.stickinessVersion,r=t.elem,a=Date.now(),s=a+1e3*i,o=T(r.getElementsByClassName("slides"))[0];0===Object.keys(e).length||e.version<n?(e.activeIndex=0,e.expire_time=s,e.version=n):e.expire_time<a?(e.activeIndex=0,e.expire_time=s):e.activeIndex>=o.children.length&&(e.activeIndex=0,e.expire_time=s,e.version=n),this.setStickiness(e)}},{key:"setStickiness",value:function(e){var t=this._util,i=t.stickinessLocalStorageKey,n=t.stickinessCookieName;if(S.localStorage)try{window.localStorage.setItem(i,JSON.stringify(e))}catch(e){}if(n)try{var r=new Date(e.expire_time);delete e.expire_time,document.cookie=n+"="+JSON.stringify(e)+"; expires= "+r.toUTCString()+'";'}catch(e){}}},{key:"getStickinessFromLocalStorage",value:function(){var e=this._util.stickinessLocalStorageKey,t={};if(S.localStorage)try{t=JSON.parse(window.localStorage.getItem(e))||{}}catch(e){}return t}},{key:"remove",value:function(){this._util.elem.remove()}},{key:"destroy",value:function(){this.removeEventListeners(),w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(P);X.events={click:[["next-btn","next"],["prev-btn","prev"]],keydown:[["_self","keydown"]],mousedown:[["slides","mousedown"]],mouseover:[["dl__controls","mouseover"],["slides","mouseover"]],mouseleave:[["dl__controls","mouseleave"],["slides","mouseleave"]],mousemove:[["slides","mousemove"]],mouseup:[["slides","mouseup"]],touchend:[["slides","touchend"]],touchmove:[["slides","touchmove"]],touchstart:[["slides","touchstart"]]},X.transientEvents={click:[["next-slide","next"],["prev-slide","prev"]]},t.default=X,e.exports=t.default},"./src/components/queue.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=[],t=!1;return{add:function(t,i){e.push(function(e){return function(){return t.call(e)}}(i)),this.exec()},exec:function(){var i=this;t||(t=!0,setTimeout(function(){t=!1;var n=e.shift();Promise.resolve(n.call()).then(function(){e.length&&i.exec()})},25))}}}();t.default=n,e.exports=t.default},"./src/controller.js":function(e,t,i){"use strict";function n(){return l=r(i("./src/base.js"))}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=window.wafer.controllers,f=d.WaferBaseController,h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.root,r=void 0===i?document:i,o=e.selector,u=void 0===o?".wafer-dl":o;a(this,t);var c=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{root:r,selector:u,WaferClass:(l||n()).default}));return c.sync(),c}return o(t,e),c(t,[{key:"handleVisibilityChange",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._state.elementInstances,i=!0,n=!1,r=void 0;try{for(var a,s=t.entries()[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){u(a.value,2)[1].instance._util.plugins.forEach(function(t){t.onVisibiltyChange(e)})}}catch(e){n=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw r}}}},{key:"handleScroll",value:function(){var e=this._state.elementInstances,t=!0,i=!1,n=void 0;try{for(var r,a=e.entries()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){u(r.value,2)[1].instance._util.plugins.forEach(function(e){e.onScroll()})}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}}},{key:"didSync",value:function(){var e=this._state.elementInstances,t=!0,i=!1,n=void 0;try{for(var r,a=e.entries()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){u(r.value,2)[1].instance._util.plugins.forEach(function(e){e.doSync()})}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}}}]),t}(f);t.default=h,e.exports=t.default},"./src/data.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a="next",s="prev",o=function(){function e(){n(this,e),this.active=null,this.elemMapping=new Map,this.tail=null,this.head=null}return r(e,[{key:"add",value:function(e){var t=this.tail;if(t){var i=this.elemMapping.get(t);this.elemMapping.set(e,new Map([[a,i.get(a)],[s,t]])),this.elemMapping.get(this.tail).set(a,e),this.elemMapping.get(this.head).set(s,e),this.tail=e}else this.elemMapping.set(e,new Map([[a,e],[s,e]])),this.head=this.tail=e;this.active||(this.active=e)}},{key:"remove",value:function(e){var t=this.elemMapping.get(e);if(t){var i=t.get(a),n=t.get(s);n.set(a,n),i.set(s,i),this.elemMapping.delete(t)}}},{key:"getActive",value:function(){return this.active}},{key:"setNextAsActive",value:function(){this.active=this.elemMapping.get(this.active).get(a)}},{key:"setPreviousAsActive",value:function(){this.active=this.elemMapping.get(this.active).get(s)}},{key:"getForward",value:function(e){for(var t=0,i=this.active;t++<e;){i=this.elemMapping.get(i).get(a)}return i}},{key:"getBackward",value:function(e){for(var t=0,i=this.active;t++<e;){i=this.elemMapping.get(i).get(s)}return i}},{key:"appendWithReplace",value:function(e,t){var i=this;e=e||this.active;var n=this.elemMapping.get(e),r=n.get(s),o=n.get(a),l=r;t.forEach(function(e){i.elemMapping.set(e,new Map([[a,null],[s,l]])),i.elemMapping.get(l).set(a,e),l=e}),this.elemMapping.get(l).set(a,o),this.elemMapping.get(o).set(s,l),this.elemMapping.delete(e)}},{key:"size",get:function(){return this.elemMapping.size}}]),e}();t.default=o,e.exports=t.default},"./src/entry.js":function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r;t.default=new((r||function(){return r=n(i("./src/controller.js"))}()).default)({}),e.exports=t.default},"./src/plugins/autoscroller.js":function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=window.wafer.utils,d=c.convertNodeListToArray,f=c.elementInView,h=window.wafer.base,v=8e3,p=["_start","_stop","_reset","_handlePlayPauseClick"],y=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.isPlayingBtnClass,o=void 0===s?"dl-playing":s,u=n.playPauseBtnSelector,c=void 0===u?"play-pause-btn":u;r(this,t);var f=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return f._util=l({},f._util,{isPlayingBtnClass:o,playPauseBtn:d(e.getElementsByClassName(c))[0],scrollIntervalDelay:parseInt(f._util.elem.getAttribute("data-wf-autoscroll-interval"),10)||v}),f._state={interval:null,manuallyStopped:!1},p.forEach(function(e){f[e]=f[e].bind(f)}),f._util.playPauseBtn&&f._util.playPauseBtn.addEventListener("click",f._handlePlayPauseClick),f}return s(t,e),u(t,[{key:"_isElemInView",value:function(){return f(this._util.elem,{},h.viewport)}},{key:"_start",value:function(){var e=this;!this._state.interval&&this._isElemInView()&&(this._updateBtn(1),this._state.interval=setInterval(function(){e._util.svInstance.showCurrent(1,{source:"autoscroll",type:"next",sourceEvent:null})},this._util.scrollIntervalDelay))}},{key:"_stop",value:function(){this._state.interval&&(clearInterval(this._state.interval),this._state.interval=null)}},{key:"_reset",value:function(){this._stop(),!this._state.manuallyStopped&&this._start()}},{key:"_manualStop",value:function(){this._state.manuallyStopped=!0,this._updateBtn(-1),this._stop()}},{key:"_handlePlayPauseClick",value:function(){var e=this._util.playPauseBtn,t=e.classList.contains(this._util.isPlayingBtnClass);this._state.interval&&t?this._manualStop():(this._state.manuallyStopped=!1,this._start())}},{key:"_updateBtn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._util.playPauseBtn&&0!==e){var t=this._util.playPauseBtn,i=this._util.isPlayingBtnClass;switch(e){case 1:t.classList.add(i);break;case-1:t.classList.remove(i)}}}},{key:"onBeforeUserPaginate",value:function(e){this._util.playPauseBtn&&this._manualStop()}},{key:"onAfterSlideChange",value:function(){this._reset()}},{key:"onVisibiltyChange",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this._stop():!this._state.manuallyStopped&&this._start()}},{key:"onScroll",value:function(){f(this._util.elem,{},h.viewport)?!this._state.manuallyStopped&&this._start():this._stop()}},{key:"onMouseLeave",value:function(){!this._state.manuallyStopped&&this._start()}},{key:"onMouseOver",value:function(){this._stop()}}]),t}((o||function(){return o=n(i("./src/plugins/base.js"))}()).default);t.default=y,e.exports=t.default},"./src/plugins/base.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i){n(this,e),this._util={elem:t,svInstance:i}}return r(e,[{key:"onAfterInit",value:function(){}},{key:"onBeforeResize",value:function(){}},{key:"onAfterResize",value:function(){}},{key:"onScroll",value:function(){}},{key:"onBeforeSlideChange",value:function(e){}},{key:"onAfterSlideChange",value:function(e,t){}},{key:"onBeforeUserPaginate",value:function(){}},{key:"onAfterUserPaginate",value:function(){}},{key:"onUpdateBeforeDrag",value:function(){}},{key:"onUpdateAfterDrag",value:function(){}},{key:"onVisibiltyChange",value:function(){}},{key:"onMouseLeave",value:function(){}},{key:"onMouseOver",value:function(){}},{key:"doSync",value:function(){}},{key:"destroy",value:function(){}}]),e}();t.default=a,e.exports=t.default},"./src/plugins/responsive.js":function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=function(e){function t(e,i){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n._util=l({},n._util,{slides:n._util.svInstance._util.sliderItems,svState:n._util.svInstance._state,originalWidth:parseInt(n._util.elem.getAttribute("data-wf-slide-width"),10)||640,responsiveLimits:{mobileMax:parseInt(n._util.elem.getAttribute("data-wf-responsiveness-m-max"),10)||754,tabletMin:parseInt(n._util.elem.getAttribute("data-wf-responsiveness-t-min"),10)||899,tabletMax:parseInt(n._util.elem.getAttribute("data-wf-responsiveness-t-max"),10)||1128}}),n._state={isDefaultSize:!0},n}return s(t,e),u(t,[{key:"_setWidth",value:function(e){var t=this._util,i=t.elem,n=t.slides,r=t.svState;i.setAttribute("data-wf-slide-width",e),n.forEach(function(t){t.style.width=e+"px"}),r.slideWidth=e}},{key:"onAfterInit",value:function(){this._util.svInstance.handleResize()}},{key:"onBeforeResize",value:function(){var e=this._util,t=e.elem,i=e.originalWidth,n=e.responsiveLimits,r=window.innerWidth,a=t.offsetWidth;r<n.mobileMax||r>n.tabletMin&&r<n.tabletMax?(this._setWidth(a),this._state.isDefaultSize=!1):this._state.isDefaultSize||(this._setWidth(i),this._state.isDefaultSize=!0)}}]),t}((o||function(){return o=n(i("./src/plugins/base.js"))}()).default);t.default=c,e.exports=t.default},"./src/plugins/staticcaption.js":function(e,t,i){"use strict";function n(){return c=r(i("./src/components/queue.js"))}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=["_set"],v=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n.selectorClass,n.placeholderQuerySelector),a=void 0===r?"div[data-wf-dl-placeholder]":r,l=n.slideTypeDataAttr,u=void 0===l?"data-wf-dl-slide-type":l,c=n.waferStateVarContent,f=void 0===c?"waferdl-caption":c,v=n.waferStateVarSlideType,p=void 0===v?"waferdl-slideType":v,y=n.syncDelay,g=void 0===y?50:y,_=n.maxAttemptsToFindElem,m=void 0===_?10:_;s(this,t);var b=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return b._util=d({},b._util,{placeholderQuerySelector:a,slideTypeDataAttr:u,waferStateVarContent:f,waferStateVarSlideType:p,syncDelay:g,maxAttemptsToFindElem:m}),b._state={attemptsToFindElemMap:{}},h.forEach(function(e){b[e]=b[e].bind(b)}),window.wafer.ready(function(){b._addEventListeners()}),b}return l(t,e),f(t,[{key:"_addEventListeners",value:function(){var e=this;window.wafer.on("uac:adinjected",function(t){var i=t.elem;e._nodeIsStillActive(i)&&(c||n()).default.add(function(){e._updateCaption()},e)})}},{key:"_set",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard";window.wafer&&(window.wafer.state=(e={},a(e,this._util.waferStateVarSlideType,i),a(e,this._util.waferStateVarContent,{value:t}),e))}},{key:"_nodeIsStillActive",value:function(e){return e===this._util.svInstance._util.dataList.getActive()}},{key:"_waitForElem",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._util.maxAttemptsToFindElem;return new Promise(function(n,r){var a=setInterval(function(){if(++t._state.attemptsToFindElemMap[e]>i)return clearInterval(a),t._state.attemptsToFindElemMap[e]=0,r();var s=t._util.svInstance._util.dataList.getActive(),o=s.querySelector(e);o&&(t._state.attemptsToFindElemMap[e]=0,n(o))},50)})}},{key:"_updateCaption",value:function(){var e=this;return new Promise(function(t,i){var n=e._util,r=n.placeholderQuerySelector,a=n.slideTypeDataAttr;e._waitForElem(r).then(function(i){var n=i.innerHTML,r=i.getAttribute(a)||"standard";t(e._set(n,r))}).catch(function(i){t(e._set())})})}},{key:"onBeforeSlideChange",value:function(e){var t=this;(c||n()).default.add(function(){window.wafer.ready(function(){t._updateCaption()})},this)}}]),t}((u||function(){return u=r(i("./src/plugins/base.js"))}()).default);t.default=v,e.exports=t.default},"./src/plugins/tracking.js":function(e,t,i){"use strict";function n(){return c=r(i("./src/components/queue.js"))}function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=window.wafer.utils,v=h.convertNodeListToArray,p="https://www.aol.com/dl_track/",y={cpos:-1,elm:"arrow",sec:"dl",itc:0,ll1:0,ll2:"amp-bon",mtest:"",expb:""},g=["autoscroll"],_=function(e){function t(e,i){a(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),s(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n._util=d({},n._util,{comscoreTrackUrl:n._util.elem.getAttribute("data-wf-comscore-track-url")||p}),n._state={rapidQueue:[],threadmilledBeforeRapidInit:i._state.hasBeenThreadmilled},n._rapidEvent(function(t){n._state.threadmilledBeforeRapidInit=i._state.hasBeenThreadmilled,t.addModules([e.id],!1,{clickonly:!0})}),n._addRapidListener(),window.wafer.ready(function(){n._addEventListeners()}),n}return l(t,e),f(t,[{key:"_addRapidListener",value:function(){var e=this;document.addEventListener("rapid:init",function(){for(;e._state.rapidQueue.length>0;){e._state.rapidQueue.shift()(window.rapidInstance)}},{passive:!0,once:!0})}},{key:"_rapidEvent",value:function(e){window.rapidInstance?e(window.rapidInstance):this._state.rapidQueue.push(e)}},{key:"_addEventListeners",value:function(){var e=this;window.wafer.on("uac:adinjected",function(t){t.elem;(c||n()).default.add(function(){e._refreshRapid(),!0===e._util.svInstance._util.tracking.rapidLinkViewPerSlideEnabled&&e._doRapidLinkViewTracking(e._util.svInstance._util.dataList.getActive())},e)})}},{key:"_doRapidBeaconClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];if(0!==e){var i=1===e?"next":"prev",n={sec:"dl",slk:i},r=1===e?this._util.svInstance._util.dataList.getForward(1):this._util.svInstance._util.dataList.getBackward(1),a=void 0;try{a=JSON.parse(r.dataset.ylkClick)||y}catch(e){a=y}var s=Object.assign(a,n);"edge"===t&&(s.elm="edge");var o=s.sec;delete s.sec,delete s.slk,delete s.ll1,this._rapidEvent(function(e){e.beaconClick(o,i,0,s)})}}},{key:"_doRapidPageViewTracking",value:function(){this._rapidEvent(function(e){e.beaconPageview({_R:window.location.href,expn:"dynamic-lead",navtype:"client"})})}},{key:"_doComscoreTracking",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._util.svInstance._util.tracking.comscorePerSlideEnabled&&0!==e)try{var t=document.getElementById("dl-track");null===t&&(t=document.createElement("iframe"),t.setAttribute("id","dl-track"),document.body.appendChild(t)),t.display="none",t.style.display="none",t.height=t.width=0,t.src=this._util.comscoreTrackUrl}catch(e){}}},{key:"_doRapidLinkViewTracking",value:function(e){try{var t=[],i=e.querySelectorAll("[data-ylk]:not([data-lv-fired])");if(v(i).forEach(function(e){var i=e.dataset.ylk.split(";"),n=i.reduce(function(e,t){var i=t.split(":");return i[1]&&(e[i[0]]=i[1]),e},{});t.push(n),e.setAttribute("data-lv-fired",!0)}),0===t.length)return;this._rapidEvent(function(e){e.beaconLinkViews([{sec:"dl",itc:0,_links:t}],2,{})})}catch(e){}}},{key:"_doSlideChangeTracking",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._state.threadmilledBeforeRapidInit&&this._refreshRapid(),!0===this._util.svInstance._util.tracking.rapidPageViewPerSlideEnabled&&0!==t&&-1===g.indexOf(i.source)&&this._doRapidPageViewTracking(),!0===this._util.svInstance._util.tracking.rapidLinkViewPerSlideEnabled&&this._doRapidLinkViewTracking(e)}},{key:"_refreshRapid",value:function(){var e=this._util.elem;this._rapidEvent(function(t){t.refreshModule(e.id,!1,!1)})}},{key:"onBeforeUserPaginate",value:function(e,t){this._doRapidBeaconClick(e,t),this._doComscoreTracking(e)}},{key:"onAfterSlideChange",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(c||n()).default.add(function(){t._doSlideChangeTracking(t._util.svInstance._util.dataList.getActive(),e,i)},this)}},{key:"doSync",value:function(){this._refreshRapid()}}]),t}((u||function(){return u=r(i("./src/plugins/base.js"))}()).default);t.default=_,e.exports=t.default}})});