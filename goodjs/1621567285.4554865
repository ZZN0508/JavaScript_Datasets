var promoTracker={fireGTM:function(){if(0!==promoTracker.gridOffsets.length){var a=[],b=[];$.each(promoTracker.gridOffsets,function(c,d){$(d).find(".active .js-promo-body-title:visible, .active-promo p:visible, .js-promo-two-ways-title:visible").text()&&$(d).offset().top<window.pageYOffset+window.innerHeight?a.push($(d)):b.push(d)}),promoTracker.gridOffsets=b,$.each(a,function(a,b){var c={event:"ad_impression",site_section:promoTracker.siteSection};c.placement=b.attr("data-location")?b.attr("data-location"):"grid",c.type="promo",b.hasClass("js-promo-top")?c.title=promoTracker.getCleanText(b.find("p:visible, .js-promo-two-ways-title:visible").first()):b.hasClass("js-promo-body")&&(c.title=promoTracker.getCleanText(b.find(".active .js-promo-body-title:visible"))),dataLayer.push(c)})}},getCleanText:function(a){return a.text().replace(/\s+/g," ")},init:function(){dataLayer&&dataLayer[0]&&dataLayer[0].site_section&&(this.siteSection=dataLayer[0].site_section),this.promoTop(),this.promoBody(),promoTracker.gridOffsets=$(".js-promo-top, .js-promo-body"),$(window).scroll(webutils.debounce(promoTracker.fireGTM,300))},mavsSet:!1,addDL:function(a){var b=$(this).attr("href"),c=$(this).attr("target");dataLayer&&dataLayer.push(a),b&&webutils.redirect(b,c)},promoTop:function(){var a=$(".js-promo-top");if(a.length)var b=setInterval(function(){if(a.find(".active-promo p:visible, .js-promo-two-ways-title:visible")){promoTracker.fireGTM();var c={event:"ad_click",site_section:promoTracker.siteSection,placement:a.attr("data-location"),type:"promo",title:promoTracker.getCleanText(a.find(".active-promo p:visible, .js-promo-two-ways-title:visible").first())};a.find(".cta, .anchor").click(function(a){a.preventDefault(),promoTracker.addDL.call(this,c)}),clearTimeout(b)}},500)},promoBody:function(){var a=$(".js-promo-body");if(a.length)var b=setInterval(function(){a.find(".active .js-promo-body-title:visible")&&(promoTracker.fireGTM(),a.find("a").click(function(b){if(b.preventDefault(),$(this).parents(".js-promo-body").find(".js-promo-body-title").length<2)var c=$(this).parents(".js-promo-body"),d={event:"ad_click",site_section:promoTracker.siteSection,placement:c.attr("data-location"),type:"promo",title:promoTracker.getCleanText(c.find(".js-promo-body-title"))};else var d={event:"ad_click",site_section:promoTracker.siteSection,placement:a.attr("data-location"),type:"promo",title:promoTracker.getCleanText(a.find(".active .js-promo-body-title:visible"))};promoTracker.addDL.call(this,d)}),clearTimeout(b))},500)}};promoTracker.init();