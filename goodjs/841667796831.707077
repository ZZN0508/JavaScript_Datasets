!function(s){function e(e){for(var t,i,n=e[0],r=e[1],a=0,o=[];a<n.length;a++)i=n[a],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&o.push(c[i][0]),c[i]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t]);for(u&&u(e);o.length;)o.shift()()}var i={},c={8:0,7:0};function d(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.e=function(n){var e,r,a,t,o,i=[],s=c[n];return 0!==s&&(s?i.push(s[2]):(e=new Promise(function(e,t){s=c[n]=[e,t]}),i.push(s[2]=e),(r=document.createElement("script")).charset="utf-8",r.timeout=120,d.nc&&r.setAttribute("nonce",d.nc),r.src=d.p+""+({0:"pako_deflate",4:"vendors~crypto",5:"vendors~jszip",6:"vendors~kiwi.mat",7:"vendors~pako_deflate"}[n]||n)+".96a4ce86.js",a=new Error,t=function(e){r.onerror=r.onload=null,clearTimeout(o);var t,i=c[n];0!==i&&(i&&(t=e&&("load"===e.type?"missing":e.type),e=e&&e.target&&e.target.src,a.message="Loading chunk "+n+" failed.\n("+t+": "+e+")",a.name="ChunkLoadError",a.type=t,a.request=e,i[1](a)),c[n]=void 0)},o=setTimeout(function(){t({type:"timeout",target:r})},12e4),r.onerror=r.onload=t,document.head.appendChild(r))),Promise.all(i)},d.m=s,d.c=i,d.d=function(e,t,i){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(d.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)d.d(i,n,function(e){return t[e]}.bind(null,n));return i},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="//static.iqiyi.com/js/player_v2/",d.oe=function(e){throw console.error(e),e};var t=(n=window.iqiyiPlayerJSONPCallback=window.iqiyiPlayerJSONPCallback||[]).push.bind(n);n.push=e;for(var n=n.slice(),r=0;r<n.length;r++)e(n[r]);var u=t;d(d.s=588)}([function(e,t,i){"use strict";t.a={Status_Idle:"idle",Status_Ready:"ready",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadedMetaData:"loadedmetadata",Status_StartPlay:"startplay",Status_EveryStartPlay:"everystartplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"stoped",Status_End_Play:"endplay",Status_PlayError:"error",Status_PatchStartplay:"patchstartplay",Status_MiddStoped:"middstoped",Status_AdLoaded:"adloaded",Status_AdInit:"adinit",Status_AdLoadstart:"adloadstart",Status_AdStartPlay:"adstartplay",Status_ADEveryStartPlay:"adeverystartplay",Status_AdPlaying:"adplaying",Status_AdPaused:"adpaused",Status_AdWillPlayEnded:"adwillended",Status_AdPlayEnded:"adended",Status_AdError:"aderror",Status_AdStalled:"adstalled",Status_AdWaiting:"adwaiting",Status_AresPlay:"aresplay",Status_AresEnded:"aresended",Status_AresNoticeInfo:"aresnoticeinfo",Status_ADLoadedMetaData:"adloadedmetadata",Status_Error:"ntferror",Status_Destroy:"ntfdestroy",NTF_StatusChanged:"statusChanged",NTF_Error:"engineError",NTF_SRC_Attaching:"srcAttaching",NTF_VideoRefresh:"videorefresh",NTF_VideoChange:"videochange",NTF_VideoChanged:"videochanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_KeyVolumeChange:"keyvolumechange",NTF_DurationChanged:"durationchange",NTF_VRSStart:"vrsstart",NTF_VRSReady:"vrsready",NTF_VRSDone:"vrsdone",NTF_VRSPreloaded:"vrspreloaded",NTF_VDChangeFail:"ntfvdchangefail",NTF_AUDChanged:"ntfaudchange",NTF_AUDChangeFail:"ntfaudchangefail",NTF_ARES_Info:"ntfaresinfo",NTF_DefinitionSwitching:"definitionswitch",NTF_DefinitionSwitched:"definitionswitched",NTF_AudioSwitching:"aduioswitching",NTF_AudioSwitched:"aduioswitched",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_Before_Seeking:"beforeSeeking",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_Recharge:"recharge",NTF_BuyPlay:"buyPlay",NTF_SkipHook:"skiphook",NTF_FollowUpNextLoad:"followUpNextLoad",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",NTF_MutedStartPlay:"mutedStartPlay",NTF_PlayingFailByAutoPlay:"playingFailByAutoPlay",NTF_DelayToPlay:"delaytoplay",NTF_DelayToPlay_End:"delaytoplayend",NTF_Get_Record:"getrecord",NTF_AD_Showtips:"adshowtips",NTF_PLAY_MUTED:"playfailmuted",NTF_FPS_REPORT:"playFPSReport",NTF_IVPACKAGEPARSE_Failed:"IVPackageParse_Failed",NTF_IVPACKAGEPARSE_Finished:"IVPackageParse_Finished",NTF_AD_CanPlayThrough:"adcanplaythrough",NTF_AD_VolumeChanged:"advolumechanged",NTF_AD_DurationChanged:"addurationchange",NTF_AD_TimeUpdate:"adtimeupdate",NTF_AD_Progress:"adprogress",NTF_AD_Seeking:"adseeking",NTF_AD_Seeked:"adseeked",NTF_AD_NotifyManager:"jsNotifyAdManager",NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_AD_CloudPlay:"adcloudplay",NTF_AD_CloudPlayEnd:"adcloudplayend",NTF_AD_BLOCK:"adblock",NTF_ARES_Load:"aresload",NTF_Show_VIPPay:"showVIPPay",NTF_PREVIEW_END:"previewEnd",NTF_TW_BLOCK:"twBlock",Evt_StartFromHistory:"playStartFromHistory",Evt_SkipHeader:"playSkipHeader",Evt_SkipTailer:"playSkipTailer",Evt_StartShareTime:"playShareTime",Evt_PreloadAD:"playPreloadAD",ERROR_HttpFailed:"P00001",ERROR_AnalyzFailed:"P00002",Enjoy_Evt_PlayEnd:"enjoy_play_end",Enjoy_Evt_PanleShow:"enjoy_panle_show",HTTP_ENGINE:"HTTP",ENGINE_TYPE:"KIWI",CDN_LOADERMODE:"CDN",P2P_LOADERMODE:"P2P"}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){var n=i(221);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){var n=i(32).default,r=i(38);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?r(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){"use strict";var n=0,r="ntf_";t.a={NTF_PLG_Enable:r+n++,NTF_PLG_Disable:r+n++,NTF_HOTKEY_ControlbarShow:r+n++,NTF_Play:r+n++,NTF_Pause:r+n++,NTF_Replay:r+n++,NTF_ChangeVolume:r+n++,NTF_PlayerSmallWindowStatus:r+n++,NTF_AllPluginsLoaded:r+n++,NTF_ControlbarShow:r+n++,NTF_ControlbarHide:r+n++,NTF_DefinitionBtnClick:r+n++,NTF_DefinitionBtnMouseEnter:r+n++,NTF_DefinitionBtnMouseLeave:r+n++,NTF_DefinitionListShow:r+n++,NTF_DefinitionListhide:r+n++,NTF_DefinitionADShow:r+n++,NTF_DefinitionADClick:r+n++,NTF_DefinitionUpdateText:r+n++,NTF_FullScreen:r+n++,NTF_WebFullScreen:r+n++,NTF_SetDownLoad:r+n++,NTF_BarrageSelfSend:r+n++,NTF_BarrageSettingChange:r+n++,NTF_HIDE_BOTTOM_TOP:r+n++,NTF_SHOW_BOTTOM_TOP:r+n++,NTF_BOTTOM_MUTUAL_EXCLUSION:r+n++,NTF_SHOW_VIDEOLIST:r+n++,NTF_HIDE_VIDEOLIST:r+n++,NTF_VIDEOLIST_CHANGED:r+n++,NTF_HIDE_TOPBAR:r+n++,NTF_SHOW_TOPBAR:r+n++,NTF_CLICK_PLAYLIST_BTN:r+n++,NTF_SHOW_PLAYLIST_BTN:r+n++,NTF_HIDE_PLAYLIST_BTN:r+n++,NTF_SHOW_CONTROLBAR_PINGBACK:r+n++,NTF_SEEKBAR_HOVER:r+n++,NTF_SHOW_HEATMAP:r+n++,NTF_HIDE_CONTROLBAR_VIDEOTIP:r+n++,NTF_SHOW_TOAST:r+n++,NTF_SHOW_SETTING_BOX:r+n++,NTF_SUBTITLES_REGISTER_DOM:r+n++,NTF_USERSET_SKIP_BTN:r+n++,NTF_PROGRESS_SKIP_BTN:r+n++,NTF_KeyVolumeChange:r+n++,NTF_SHOW_LOGIN_PANEL:r+n++,NTF_SHOW_RECOMMEND_PANEL:r+n++,NTF_HIDE_RECOMMEND_PANEL:r+n++,NTF_VideoListChanged:"videolistchanged",NTF_ADDVideoList:"addvideolist",NTF_REMOVEVideoList:"removevideolist",NTF_ClientInstallChecked:"clientinstallchecked",NTF_IV_SWITCH_FromStoryLine:"ivswitchfromstoryline",NTF_IV_REPLAY:"ivreplay",NTF_IV_PLAYEND:"ivplayend",NTF_IV_INTERACTIONSTART:"ivinteractionstart",NTF_IV_INTERACTIONEND:"ivinteractionend",NTF_IV_SHOWSTROYGUIDE:"ivshowstoryguide",NTF_IV_SHOWSTROYLIST:"ivshowstorylinelist",NTF_BACKTO_IVMAIN:"ivbacktomain",NTF_FOLLOW_SET_INFO:"followsetinfo",NTF_FOLLOW_CHANGE_STATE:"followchangestate",NTF_GESTURE_ASYNC_CONTROLS:r+n++,NTF_USER_SEEK:r+n++,NTF_BanTipHide:r+n++,NTF_WebFullScreen_BeforeChange:r+n++,NTF_WebFullScreen_AfterChange:r+n++,NTF_WebFullScreen_SetSwitch:r+n++,NTF_FullScreen_BeforeChange:r+n++,NTF_FullScreen_AfterChange:r+n++,NTF_ScoreTask_ScoreChange:r+n++,NTF_FullScreen_SetSwitch:r+n++,NTF_VideoPercent_Changed:r+n++,NTF_RIGHTBAR_STATUS_CHANGED:r+n++,NTF_EXPANDSCREEN_STATUS_CHANGED:r+n++,NTF_Barrage_SetConfigInfo:r+n++,NTF_Barrage_SetChannelConfigInfo:r+n++,NTF_Barrage_SetSwitch:r+n++,NTF_Barrage_ShowLike:r+n++,NTF_Barrage_ShowMoreLike:r+n++,NTF_Barrage_ShowReport:r+n++,NTF_Barrage_EnsureReport:r+n++,NTF_Barrage_ShowRulePage:r+n++,NTF_Barrage_NotifyBarrageData:r+n++,NTF_Barrage_ClearBanWord:r+n++,NTF_Barrage_AddBanWord:r+n++,NTF_Barrage_RemoveBanWord:r+n++,NTF_Barrage_CatchSystemBarrage:r+n++,NTF_Barrage_NotifyGiftInfo:r+n++,NTF_Barrage_ShowSystemBarrage:r+n++,NTF_Barrage_ClickSystemBarrage:r+n++,NTF_Barrage_ClickSystemBarrageButton:r+n++,NTF_Barrage_RequestBarrageData:r+n++,NTF_Subtitles_Changing:r+n++,NTF_Subtitles_Changed:r+n++,NTF_Subtitles_ChangeFailed:r+n++,NTF_FeedBack_Show:r+n++,NTF_FeedBack_Hide:r+n++,NTF_FeedBack_Panel_show:r+n++,NTF_FeedBack_getInfo:r+n++,NTF_TO_DIVERSION:r+n++,NTF_AIView_ItemClick:r+n++,NTF_AIView_AIResult:r+n++,NTF_AIView_AIFeedback:r+n++,NTF_AIView_CLOSE:r+n++,NTF_AIView_BAIKE_CLOSE:r+n++,NTF_AIView_BAIKE_STATECHANGE:r+n++,NTF_IVOS_DATA_COMPLETE:r+n++,NTF_IVOS_REQUEST_IN:r+n++,NTF_IVOS_PREVIEW_CLOSE:r+n++,NTF_IVOS_PREVIEW_STARTPLAY:r+n++,NTF_IVOS_STATE_CHANGED:r+n++,NTF_SVP_POINTSREFRESH:r+n++,NTF_Voice_Change:r+n++,NTF_CTXMenu_Copied:r+n++,NTF_Hotkey_Percent_Seek:r+n++,NTF_Hotkey_Playback_Rate:r+n++,MINI_NTF_PLAY_END:r+n++,MINI_NTF_POSTER_SHOW:r+ +n,MINI_NTF_POSTER_HIDE:r+105,Type_Play:"play",Type_Pause:"pause",Type_Replay:"replay",Type_ExitPic:"exitpicinpic",Type_SEEK_DRAGSTART:"seekdragstart",Type_SEEK_DRAGEND:"seekdragend"}},function(e,t,i){"use strict";var n=i(32),r=i.n(n),n=i(2),a=i.n(n),n=i(3),n=i.n(n),o=(i(10),i(82),i(26),i(17),i(110),i(19),i(37),i(168),i(27),i(25),i(90),i(48),i(21)),s=document,c=window,d=/^-ms-/,u=/-([a-z])/g,l=Object.prototype.toString,h=Array.prototype.slice;function f(e){return e.replace(d,"ms-").replace(u,function(e,t){return t.toUpperCase()})}function p(e,t){return e.className&&void 0!==e.className.baseVal?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.getAttribute("class")):0<=(" "+e.className+" ").indexOf(" "+t+" ")}function _(e,t){var i=e.className&&void 0!==e.className.baseVal;p(e,t)||(i?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=(e.className?" ":"")+t)}function g(e,t){if(e.className&&void 0!==e.className.baseVal){var i=e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");p(e,t)&&e.setAttribute("class",i)}else{for(var n=" "+e.className+" ";0<=n.indexOf(" "+t+" ");)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}}var y=(n()(v,[{key:"find",value:function(e){return this._query(e,new v)}},{key:"_query",value:function(e,t){var i,n=[];if(!e)return this;if("[object nodelist]"===l.call(e).toLowerCase())n=e;else if(e.nodeType)n.push(e);else if(t)for(i=0;i<this.length;i++)n=n.concat(h.call(this[i].querySelectorAll(e)));else n=e.__$__&&"length"in e?h.call(e):s.querySelectorAll(e);for(t=t||this,i=0;i<n.length;i++)t[i]=n[i];return t.__$__=!0,t.length=n.length,t}},{key:"_each",value:function(e){for(var t=0;t<this.length&&!1!==e.call(this[t],t,this[t]);t++);return this}},{key:"addClass",value:function(i){return this._each(function(e,t){_(t,i)})}},{key:"removeClass",value:function(i){return this._each(function(e,t){g(t,i)})}},{key:"replaceClass",value:function(n){return this._each(function(e,t){var i;i=n,t.className="function"==typeof i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")})}},{key:"toggleClass",value:function(n){return this._each(function(e,t){var i;(p(i=t,t=n)?g:_)(i,t)})}},{key:"hasClass",value:function(e){return p(this[0],e)}},{key:"css",value:function(i,n){if("object"!==r()(i))return void 0!==n?this._each(function(e,t){t.style[f(i)]=n}):n=0<this.length?getComputedStyle(this[0])[f(i)]:n;for(var e in i)this.css(e,i[e])}},{key:"show",value:function(){return this.css("display","")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"attr",value:function(i,n){return void 0!==n?this._each(function(e,t){t.setAttribute(i,n)}):n=0<this.length?this[0].getAttribute(i):n}},{key:"removeAttr",value:function(i){this._each(function(e,t){1===t.nodeType&&t.removeAttribute(i)})}},{key:"children",value:function(){var e,t=[],i=this[0];if(i)for(e=i.firstChild;e;)1===e.nodeType&&t.push(e),e=e.nextSibling;return t}},{key:"html",value:function(i){if("string"==typeof i)this._each(function(e,t){t.innerHTML=i});else if(this[0])return this[0].innerHTML}},{key:"append",value:function(e){var t,i,n=this[0];return n&&("string"==typeof e&&(t=s.createDocumentFragment(),i=s.createElement("iqpdiv"),t.appendChild(i),i.innerHTML=e,e=i.firstChild),n.appendChild(e),i=null),this}},{key:"remove",value:function(){return this._each(function(e,t){t.parentNode&&t.parentNode.removeChild(t)})}},{key:"offset",value:function(){var e=s.documentElement,t=this[0];return t?{top:(t=t.getBoundingClientRect()).top+(c.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(c.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}:{top:0,left:0}}},{key:"width",value:function(e){var t=this[0];if(!t)return 0;if(void 0!==e)return this.css("width",isNaN(e)?e:e+"px");e=this.css("width"),e=parseInt("100%"===e?0:e);return isNaN(e)&&((t=t.offsetWidth)<=0||null==t||(e=t)),e}},{key:"height",value:function(e){return this[0]?void 0!==e?this.css("height",isNaN(e)?e:e+"px"):parseInt(this.css("height")):0}},{key:"contains",value:function(e){var t,i=this[0];return e&&(e.nodeType?t=e:e.__$__&&(t=e[0])),!(!i||!t)&&i.contains(t)}},{key:"on",value:function(i,n,r){var a=this,e=this._events=this._events||[],t=e[i];return r=Object(o.a)({capture:!1,passive:!1,once:!1},r||{},!0),(t=t||(e[i]=[])).push(n),this._each(function(e,t){t.addEventListener(i,n,a._supportOptions?r:r.capture)})}},{key:"un",value:function(n,r){var e=this._events||[],a=(a=e[n])||(e[n]=[]);return this._each(function(e,t){var i;if(r){for(;-1<(i=a.indexOf(r));)a.splice(i,1);t.removeEventListener(n,r)}else 0<a.length&&(a.forEach(function(e){t.removeEventListener(n,e)}),a.splice(0,a.length))})}},{key:"fire",value:function(e,i){var t=this._events=this._events||[],n=(n=t[e])||(t[e]=[]);i.data=i.data||{},this._each(function(e,t){n.forEach(function(e){e.call(t,i)})})}}]),v);function v(e){a()(this,v);var t=!1;try{addEventListener("test",null,Object.defineProperties({},{passive:{get:function(){t=!0},configurable:!0,enumerable:!0}}))}catch(e){}return this._supportOptions=t,this._query.call(this,e)}t.a=function(e){return new y(e)}},function(e,t,i){"use strict";i(146),i(17),i(26),i(25),i(125),t.a=function(){var n={},r={},e=navigator,t=e.platform,i=e.userAgent.toLowerCase(),a=i.match(/rtrident/),o=!a&&i.match(/(ipad).*os\s([\d_]+)/),s=!a&&!o&&i.match(/(iphone\sos)\s([\d_]+)/),c=i.match(/Android\s+([\d.]+)/i),d=i.match(/(?:redmi|hm) ([\w ]+) build/i),u="",e="",e=navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:(e=i.match(/NetType\/\w+/)?i.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/","");r.userAgent=i,r.IE11=/rv\:11/.test(i),r.IE=/msie/.test(i)||r.IE11,r.IE6=/msie 6/.test(i),r.IE7=/msie 7/.test(i),r.IE8=/msie 8/.test(i),r.IE9=/msie 9/.test(i),r.IE10=/msie 10/.test(i),r.EDGE=/edge/.test(i),r.iPhone=/iphone os/.test(i)&&!a,r.iPhone4=/iphone os [45]_/.test(i)&&!a,r.iPad=/ipad/.test(i)&&!a,r.iPod=/iPod/i.test(i)&&!a,r.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,r.CHROMEIOS=/crios/.test(i),r.CHROME=/chrome/.test(i)&&!r.EDGE,r.SAFARI=/safari/.test(i)&&!/chrome/.test(i),r.FIREFOX=/firefox/.test(i),r.mobile=/mobile/gi.test(i),r.mobileSafari=r.iPhone||r.iPhone||r.iPad,r.QQ=/QQBrowser/gi.test(i),r.WECHAT=/(wechat)|(micromessenger)/gi.test(i),r.SmartTV=/SMART-TV/gi.test(i),r.CHROME&&(l=/chrome\/([\d\.]+) /gi.exec(i),r.version=l?parseInt(l[1],10):0),r.EDGE&&(h=/edge\/([\d\.]+)/gi.exec(i),r.version=h?parseInt(h[1],10):0),d&&(r.redmi=d);var l=/mac/i.test(t),h="X11"==t&&!l,d=/win/i.test(t)&&!h,t=/android/.test(i);n.unix=h,n.win=d,n.mac=l,n.android=t,n.androidMobile=t&&r.mobile,n.androidTablet=t&&(!r.mobile||/pad/i.test(i)),c&&(n.version=c[1]),n.ios=!1,s&&(n.ios=!0,n.version=s[2].replace(/_/g,".")),o&&(n.ios=!0,n.version=o[2].replace(/_/g,".")),r.iPod&&(n.ios=!0);function f(i){return u||function(){var e="01";(r.iPhone||n.android)&&(e="02"),(r.iPad||n.androidTablet)&&(e="03");var t="01";return n.android&&(t="02"),n.mac&&(t="08"),e+(t=n.ios?"03":t)+"00310100"+(i?"10":"00")+"000000"}()}var p=r.iPad?"b85da1cf3ae44351":"b6c13e26323c537d",i=i.match(/miuivideo\//i)||n.android&&4<parseInt(n.version)&&i.match(/MiuiBrowser/i),i=r.iPad||r.iPhone||n.android&&4<parseFloat(n.version)||i?"m3u8":"mp4";return/__pmode__=m3u8/.test(window.location.href)?i="m3u8":/__pmode__=mp4/.test(window.location.href)&&(i="mp4"),{browser:r,os:n,code:p,getPtid:f,setPtid:function(e){u=e},getAgentType:function(e){var t=1;switch(f(e).substr(0,4)){case"0108":t=276;break;case"0303":t=10;break;case"0302":t=11;break;case"0203":t=13;break;case"0202":t=12}return t},browserName:function(){var e="";return r.CHROME?e="CHROME":r.SAFARI?e="SAFARI":r.FIREFOX?e="FIREFOX":r.QQ?e="QQ":r.WECHAT?e="WECHAT":r.IE?e="IE":r.IE6?e="IE6":r.IE7?e="IE7":r.IE8?e="IE8":r.IE9?e="IE9":r.IE10?e="IE10":r.EDGE?e="EDGE":r.mobileSafari?e="mobileSafari":n.ios||n.ios?e="ios":n.androidMobile?e="androidMobile":n.androidTablet&&(e="androidTablet"),e},network:e,playerMode:i}}()},function(e,t,i){var n=i(22),r=i(105),a=i(103),o=i(35),s=i(39),c=i(122),d=i(220),i=i(23),u=r("Reflect","construct"),l=i(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),h=!i(function(){u(function(){})}),i=l||h;n({target:"Reflect",stat:!0,forced:i,sham:i},{construct:function(e,t){a(e),o(t);var i=arguments.length<3?e:a(arguments[2]);if(h&&!l)return u(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(d.apply(e,n))}n=i.prototype,i=c(s(n)?n:Object.prototype),n=Function.apply.call(e,i,t);return s(n)?n:i}})},function(e,t,i){var n=i(167),r=i(85),i=i(237);n||r(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,i){"use strict";t.a={M4S:"m4s",TS:"ts",FTS:"fts",DASH:"dash",VP9:"vp9",AV1:"AV1"}},function(e,t,i){"use strict";i(10),i(19);var n=null;function r(){var e=new Date;return(10<=e.getHours()?e.getHours():"0"+e.getHours())+":"+(10<=e.getMinutes()?e.getMinutes().toString():"0"+e.getMinutes())+":"+(10<=e.getSeconds()?e.getSeconds().toString():"0"+e.getSeconds())}t.a=Object.defineProperties({debug:function(e){n?n.debug("__PB__ "+e):console.log("__PB__"+r()+"__ "+e)},log:function(e){n?n.log("__PB__ "+e):console.log("__PB__"+r()+"__ "+e)},info:function(e){n?n.info("__PB__ "+e):console.log("__PB__"+r()+"__ "+e)},warn:function(e){n?n.warn("__PB__ "+e):console.log("__PB__"+r()+"__ "+e)},error:function(e){n?n.error("__PB__ "+e):console.log("__PB__"+r()+"__ "+e)}},{logTarget:{set:function(e){n=e},configurable:!0,enumerable:!0}})},function(e,t,i){"use strict";i.d(t,"j",function(){return n}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return a}),i.d(t,"e",function(){return o}),i.d(t,"k",function(){return s}),i.d(t,"b",function(){return c}),i.d(t,"h",function(){return d}),i.d(t,"i",function(){return u}),i.d(t,"g",function(){return l}),i.d(t,"c",function(){return h}),i.d(t,"f",function(){return f}),i(25),i(235),i(10),i(97),i(29),i(92);var n={mobile:!1,upLoad:!0,limitP2P:"",onP2P:!0,trackerVersion:3,tracker:[],stun:[],aidList:[],defaultTracker:[],getPeerIDStep:3e4,weedOutPeerStep:3e4,connectPeerStep:2e3,NATTimeoutStep:15e3,connectMax:8,passiveMax:10,RTCMax:1500,RTCPoolSize:50,coolDownTime:3e5,switchPage:!1,closeP2PVidList:[],closeP2PNetList:[],closeP2PFileTypeList:[]},r={dispatchCfg:[8e3,8e3,8e3,8e3],TTFBCfg:[8e3,8e3,8e3,8e3],rcvCfg:[8e3,8e3,8e3,8e3],reLoadCfg:[500,2e3,4e3,6e3],maxBuff:30},a={subPieceSize:1024,chunkSize:1048576,videoDataSize:0,videoMaxSize:134217728},o={cityList:[],netList:[],cookie:1},s=50,c=localStorage.getItem("cdnbuffer")?parseInt(localStorage.getItem("cdnbuffer")):20,d=new Map,u=25,l=601,h="tpa-hcdn.iqiyi.com",f={CDN:"cdn",DCACHE:"dcache"};t.l={version:"1.0.0"}},function(e,t,i){"use strict";i(110),i(17),i(19);var r=i(21),a={},i={get:function(e,t){var i,n="";return(t=Object(r.a)({memory:!1},t,!0)).memory&&Object.prototype.hasOwnProperty.call(a,e)?n=a[e]:(!new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)||(i=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie))&&(n=i[2]||""),"string"==typeof n&&(n=decodeURIComponent(n)),t.memory&&(a[e]=n)),n},set:function(e,t,i){i=i||{},t=encodeURIComponent(t);var n=i.expires;"number"==typeof i.expires&&(n=i.expires<=0?new Date(0):new Date).setTime(n.getTime()+i.expires),delete a[e],document.cookie=e+"="+t+(i.path?"; path="+i.path:"")+(n?"; expires="+n.toUTCString():"")+(i.domain?"; domain="+i.domain:"")},remove:function(e,t){(t=t||{}).expires=-1,this.set(e,"",t)}};t.a=i},function(e,t,i){"use strict";var n=i(2),r=i.n(n),n=i(3),n=(i.n(n)()(a,null,[{key:"PlayerLogger",get:function(){return window.QiyiPlayerLoader.logger()}},{key:"levels",get:function(){return a.PlayerLogger.Levels}},{key:"stringify",value:function(e){var t="";try{t=JSON.stringify(e)}catch(e){}return t}},{key:"setLevel",value:function(e){a.PlayerLogger.setLevel(e)}},{key:"getLevel",value:function(){return a.PlayerLogger.getLevel()}},{key:"getLog",value:function(){return a.PlayerLogger.getLog()}},{key:"saveImmediately",value:function(){a.PlayerLogger.saveImmediately()}}]),a);function a(e){return r()(this,a),new a.PlayerLogger(e)}t.a=n},function(e,t,i){"use strict";i(25),i(10),i(19);var n=0,r=0,a=32,o=0,s=32,c="",d="",u=!1,l=localStorage.getItem("absDoMain");localStorage.getItem("onP2PLog")&&(u=!0);i=parseInt(localStorage.getItem("downTime"));i&&Date.now()-i<864e5&&(a=parseInt(localStorage.getItem("downMax")));i=parseInt(localStorage.getItem("upTime"));i&&Date.now()-i<864e5&&(s=parseInt(localStorage.getItem("upMax")));u=Object.defineProperties({aid:0,MixWaterMark:!1,trackerStatus:0,platform:0,p2pLog:"",onLog:u,bitrate:0,absOpen:!0,getBufferFunc:null,switchAutoDef:null,canSwitchVd:null,startPlayed:null,getReBufTimeFunc:null,sendPingBack:null,getUserInfoFunc:null,noticeDataArrived:null,checkIsMobius:null,noticeRefreshMovieData:null,playDuration:0,tvId:"",trackerIP:"",absStatus:0,cdnLoadDoMain:"",lastReadSegIndex:0,lastReadTvID:0,fileType:"",pcwBuffer:0,cdnSize:0,cdnCostTime:0,openDache:!0},{bid:{get:function(){return localStorage.getItem("bid")},configurable:!0,enumerable:!0},downMax:{get:function(){return a},configurable:!0,enumerable:!0},cdnSpeed:{get:function(){return n},set:function(e){(n=e)+r>a&&(a=n+r,localStorage.setItem("downMax",a.toString()),localStorage.setItem("downTime",Date.now().toString()))},configurable:!0,enumerable:!0},downSpeed:{get:function(){return r},set:function(e){n+(r=e)>a&&(a=n+r,localStorage.setItem("downMax",a.toString()),localStorage.setItem("downTime",Date.now().toString()))},configurable:!0,enumerable:!0},upMax:{get:function(){return s},configurable:!0,enumerable:!0},upSpeed:{get:function(){return o},set:function(e){(o=e)>s&&(s=o,localStorage.setItem("upMax",s.toString()),localStorage.setItem("upTime",Date.now().toString()))},configurable:!0,enumerable:!0},bgpIP_1:{get:function(){return c},set:function(e){c=e},configurable:!0,enumerable:!0},bgpIP_2:{get:function(){return d},set:function(e){d=e},configurable:!0,enumerable:!0},bgpIP:{get:function(){return""===c?"access.if.iqiyi.com/3eb/":c+"/3eb/"},configurable:!0,enumerable:!0},bgpIP2:{get:function(){return""===d?"":d+"/3eb/"},configurable:!0,enumerable:!0},absDoMain:{get:function(){return l},configurable:!0,enumerable:!0}});t.a=u},function(e,t,i){"use strict";var n=i(22),i=i(132);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,i){"use strict";i(9);var n=i(2),o=i.n(n),n=i(3),s=i.n(n),n=i(4),c=i.n(n),n=i(5),d=i.n(n),n=i(1),u=i.n(n);i=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=u()(i);return t=n?(e=u()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e,t,i){var n;return o()(this,a),(n=r.call(this)).view=t,n.engine=t.engine,n.name=e,n.visable=!1,n.enabled=!0,i&&(n.parent=i,n.plugin=i.querySelector('[data-player-hook="'.concat(e,'"]')),n.cache="plgcontainer"===i.getAttribute("data-player-hook")),n.cacheFragment=document.createDocumentFragment(),n}return s()(a,[{key:"_onBeforeEnableAction",value:function(){}},{key:"enable",value:function(){this.enabled||(this._onBeforeEnableAction(),this.enabled=!0,this.cache&&this.plugin&&this.parent.appendChild(this.plugin),this._onAfterEnableAction(),this.rollType=null,this.seekable=!1)}},{key:"_onAfterEnableAction",value:function(){}},{key:"_onBeforeDisableAction",value:function(){}},{key:"disable",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e&&this.rollType&&this.rollType!==e.rollType&&(this.enabled=!0),this.enabled&&(this.rollType=e.rollType,this.seekable=e.seekable,this._onBeforeDisableAction(),this.enabled=!1,this.cache&&this.plugin&&this.cacheFragment.appendChild(this.plugin),this._onAfterDisableAction())}},{key:"_onAfterDisableAction",value:function(){}},{key:"show",value:function(){this.visable=!0,this.plugin.style.display=""}},{key:"hide",value:function(){this.visable=!1,this.plugin.style.display="none"}},{key:"toggle",value:function(){this.visable?this.hide():this.show()}},{key:"destroy",value:function(){this.plugin&&this.plugin.parentNode&&this.plugin.parentNode.removeChild(this.plugin)}},{key:"fire",value:function(e,t){this.view.emit(e,t)}}],[{key:"css",value:function(){return""}},{key:"html",value:function(){return""}},{key:"padCss",value:function(){return this.css()}},{key:"padHtml",value:function(){return this.html()}},{key:"mobileCss",value:function(){return this.css()}},{key:"mobileHtml",value:function(){return this.html()}}]),a}(i(40).a);t.a=i},function(e,t,i){"use strict";var n=i(85),r=i(35),a=i(23),o=i(156),s="toString",c=RegExp.prototype,d=c.toString,i=a(function(){return"/a/b"!=d.call({source:"a",flags:"b"})}),a=d.name!=s;(i||a)&&n(RegExp.prototype,s,function(){var e=r(this),t=String(e.source),i=e.flags;return"/"+t+"/"+String(void 0===i&&e instanceof RegExp&&!("flags"in c)?o.call(e):i)},{unsafe:!0})},function(e,t,i){"use strict";i(82),i(146),i(17),i(25),i(10),i(19),i(45),i(110),i(43),i(37),i(334),i(125),i(115);var s=i(16),c=i(13),n=r("QC005");function r(e){var t="";return!new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)||(e=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie))&&(t=e[2]||""),t="string"==typeof t?decodeURIComponent(t):t}function a(){var e=r("QP0022");if(!e)return{};e=e.split("|");return{userInfo:e[0]+"|"+e[1],idc:e[2],userNetType:e[0],userArea:e[1].split("-")[0],userIP:e[1].split("-")[1]}}t.a={fireUrl:function(e,t){if("string"==typeof t&&e){var i=new Image;i.onload=i.onerror=i.onabort=function(){i.onload=i.onerror=i.onabort=null,i=null};var n,r=[];for(n in e.dur=+new Date,e)e.hasOwnProperty(n)&&r.push(n+"="+encodeURIComponent(e[n]));i.src=t+"?"+r.join("&")}},accSub:function(e,t){var i,n,r;try{i=e.toString().split(".")[1].length}catch(e){i=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return n=Math.pow(10,Math.max(i,r)),r=r<=i?i:r,parseFloat((Math.round(e*n-t*n)/n).toFixed(r))},accAdd:function(e,t){var i,n;try{i=e.toString().split(".")[1].length}catch(e){i=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}return n=Math.pow(10,Math.max(i,n)),Math.round(e*n+t*n)/n},trimNumber:function(e,t){var i=(t=t||1e4).toString().substr(1),e=Math.ceil(e);return i=0<e?(e+=t).toString().substr(1):i},getCookie:r,setCookie:function(e,t){t=encodeURIComponent(t),document.cookie=e+"="+t},searchPosIndex:function(e,t){if(e<0)return!1;var i=0,n=t.length-1;if(e>=t[n])return n;for(;i<=n;){var r=Math.floor((i+n)/2);if(e>=t[r]&&(e<t[r+1]||r===t.length-1))return r;e<t[r]?n=r-1:i=r+1}return-1},searchTSPosIndex:function(e,t){if(e<0)return!1;var i=0,n=t.length-1;if(e>=t[n].ePos)return t.length;for(;i<=n;){var r=Math.floor((i+n)/2);if(e>=t[r].sPos&&e<t[r].ePos)return r;e<t[r].sPos?n=r-1:i=r+1}return-1},getUserInfoFromCookie:a,strToNumber:function(e){for(var t=0,i=8<e.length?e.slice(0,8):e,n=0;n<i.length;n++)switch(n){case 0:t+=72057594037927940*("0x"+i[n]);break;case 1:t+=281474976710656*("0x"+i[n]);break;case 2:t+=1099511627776*("0x"+i[n]);break;case 3:t+=4294967296*("0x"+i[n]);break;case 4:t+=16777216*("0x"+i[n]);break;case 5:t+=65536*("0x"+i[n]);break;case 6:t+=256*("0x"+i[n]);break;case 7:t+=+("0x"+i[n])}return t},getQueryString:function(e,t){t=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),t=e.split("?")[1].match(t);return null!=t?decodeURIComponent(t[2]):null},sliceStr:function(e,t){var i="";if(e.length<=t){for(i=e;i.length<t;)i+="0";return i}var n=Math.floor(e.length/t);(t-1)*(n+1)+1<=e.length&&(n+=1);for(var r=0;i.length<t;)i+=e[r],r+=n;return i},getPureIP:function(e){e=e.match(/(\w+):\/\/([^/:]+):?(\d*)((?:\/|$)[^?#]*)/);return e?e[2]:""},parseURL:function(e){return e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/)},isDomain:function(e){e=e.match(/[a-z|A-Z]/g);return!!(e&&0<e.length)},shuffle:function(e){for(var t,i,n=e.length;n;)i=Math.floor(Math.random()*n--),t=e[n],e[n]=e[i],e[i]=t},ArrayBufferToStr:function(e,t,i){for(var n="",r=0;r<i;r++){var a=parseInt(e[t+r]);if(void 0===a)break;n+=(a<16?"0"+a.toString(16):a.toString(16))+"-"}return n},ArrayBufferTo10Str:function(e,t,i){for(var n="",r=0;r<i;r++){var a=parseInt(e[t+r]);if(void 0===a)break;n+=a.toString(10)+"-"}return n},setStringToData:function(e,t,i,n){for(var r=0;r<n;r++)r>=i.length?e[t+r]=0:e[t+r]=i.charCodeAt(r)},setNumberToData:function e(t,i,n,r){for(var a=n,o=i,s=r;4<s;)e(t,o,Math.floor(a/4294967296),s-4),a%=4294967296,o+=s-4,s-=s-4;for(var c=0;c<s;)t[o+c]=a/(1<<8*(s-c-1)),c++},getFileNameFromUrl:function(e){var t=e.indexOf(".ts");(t=(t=t<0?e.indexOf(".m4s"):t)<0?e.indexOf(".webm"):t)<0&&(t=e.indexOf(".mp4"));var i=e.lastIndexOf("/",t);return e.slice(i+1,t)},getTrackerIP:function(e,t,i,n){if(0<=c.j.aidList.indexOf(s.a.aid)&&0<c.j.defaultTracker.length)return c.j.defaultTracker[Math.floor(Math.random()*(c.j.defaultTracker.length-1))];for(var r="",a=0;a<t.length;a++)if(e===t[a].key||"*"===t[a].key){var o=t[a].value;o&&0<o.length&&(r=o[((i-1+1)%o.length+(n||0))%o.length]);break}return r},isHit:function(){var e=n,t=a();return!!(parseInt(e.substring(0,1))<3||t&&0<=t.userInfo.indexOf("OVERSEA"))},isOpenDcache:function(e,t){return(0<=c.e.netList.indexOf("*")||0<=c.e.netList.indexOf(e.toLowerCase()))&&0<=(0<=c.e.cityList.indexOf("*")||c.e.cityList.indexOf(t.split("_")[0].toLowerCase()))&&(!c.e.cookie||parseInt(n.substring(0,1))<c.e.cookie)},QC005:n}},function(e,t,i){"use strict";t.a=function r(a,e,o,s){function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return e&&function(e){var t,i,n;for(t in e)if(c(e,t)&&(i=e[t],n=t,void(!o&&c(a,n)||(s&&"string"!=typeof i&&"boolean"!=typeof i?(a[n]||(a[n]={}),r(a[n],i,o,s)):a[n]=i))))break}(e),a}},function(e,t,i){var d=i(24),u=i(111).f,l=i(88),h=i(85),f=i(161),p=i(219),_=i(142);e.exports=function(e,t){var i,n,r,a,o=e.target,s=e.global,c=e.stat;if(i=s?d:c?d[o]||f(o,{}):(d[o]||{}).prototype)for(n in t){if(r=t[n],a=e.noTargetGet?(a=u(i,n))&&a.value:i[n],!_(s?n:o+(c?".":"#")+n,e.forced)&&void 0!==a){if(typeof r==typeof a)continue;p(r,a)}(e.sham||a&&a.sham)&&l(r,"sham",!0),h(i,n,r,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(i,e,t){!function(e){function t(e){return e&&e.Math==Math&&e}i.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")()}.call(this,t(203))},function(e,t,i){var n=i(22),i=i(232);n({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,i){"use strict";var n=i(149),P=i(35),I=i(44),w=i(93),a=i(89),A=i(166),E=i(233),D=i(150),q=Math.max,O=Math.min;n("replace",2,function(r,b,k,e){var x=e.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=e.REPLACE_KEEPS_$0,T=x?"$":"$0";return[function(e,t){var i=a(this),n=null==e?void 0:e[r];return void 0!==n?n.call(e,i,t):b.call(String(i),e,t)},function(e,t){if(!x&&S||"string"==typeof t&&-1===t.indexOf(T)){var i=k(b,e,this,t);if(i.done)return i.value}var n=P(e),r=String(this),a="function"==typeof t;a||(t=String(t));var o,s=n.global;s&&(o=n.unicode,n.lastIndex=0);for(var c=[];;){var d=D(n,r);if(null===d)break;if(c.push(d),!s)break;""===String(d[0])&&(n.lastIndex=A(r,I(n.lastIndex),o))}for(var u,l="",h=0,f=0;f<c.length;f++){for(var d=c[f],p=String(d[0]),_=q(O(w(d.index),r.length),0),g=[],y=1;y<d.length;y++)g.push(void 0===(u=d[y])?u:String(u));var v,m=d.groups,m=a?(v=[p].concat(g,_,r),void 0!==m&&v.push(m),String(t.apply(void 0,v))):E(p,r,_,g,m,t);h<=_&&(l+=r.slice(h,_)+m,h=_+p.length)}return l+r.slice(h)}]})},function(e,t,i){"use strict";var n=i(22),r=i(23),d=i(143),u=i(39),l=i(81),h=i(44),f=i(144),p=i(164),a=i(130),o=i(31),i=i(165),_=o("isConcatSpreadable"),g=9007199254740991,y="Maximum allowed index exceeded",r=51<=i||!r(function(){var e=[];return e[_]=!1,e.concat()[0]!==e}),a=a("concat");n({target:"Array",proto:!0,forced:!r||!a},{concat:function(e){for(var t,i,n,r=l(this),a=p(r,0),o=0,s=-1,c=arguments.length;s<c;s++)if(function(e){if(!u(e))return!1;var t=e[_];return void 0!==t?!!t:d(e)}(n=-1===s?r:arguments[s])){if(o+(i=h(n.length))>g)throw TypeError(y);for(t=0;t<i;t++,o++)t in n&&f(a,o,n[t])}else{if(g<=o)throw TypeError(y);f(a,o++,n)}return a.length=o,a}})},function(e,t,i){"use strict";i(10),i(19),i(25),i(43),i(17),i(45);function n(){h=window.webEventID||""}function r(){return Object(c.a)(window.navigator.userAgent+document.cookie+Math.random()+(new Date).getTime()*d++)}function a(e,t,i){s.a.set(e,t,{expires:i||31536e6,path:"/",domain:"iqiyi.com"})}function o(){var e=s.a.get("QC006");return e||(window.QiyiPlayerIsNewUser=!0,e=r(),a("QC006",e)),e}var s=i(14),c=i(84),d=(i(86),0),u=void 0,l="",h=window.webEventID||"",i={createUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getQtsid:function(){var e,t=function(){return parseInt(new Date/1e3,10).toString()};return e=s.a.get("QC008"),s.a.get("QC010")&&e||(/^\d{10}\.\d{10}\.\d{10}\.\d+$/.test(e)?((e=e.split("."))[1]=e[2],e[2]=t(),e[3]=parseInt(e[3],10)+1):e=[t=t(),t,t,"1"],e.join(".")),e},getJsuid:o,getFluid:function(){return(e=s.a.get("QC005"))||(e=r(),a("QC005",e,283824e7)),e;var e},getWeid:function(){return h=h||(window.webEventID||Object(c.a)(o()+"weid"+ +new Date))},getEid:function(){var e;return l||(e=o(),l=Object(c.a)(e+"veid"+ +new Date)),l},getIsNewUser:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]||void 0!==u||(1===parseInt(s.a.get("QP0030"),10)?u=!1:(u=!0,a("QP0030",1,283824e7))),void 0===window.QiyiPlayerIsNewUser&&(window.QiyiPlayerIsNewUser=!1,o()),window.QiyiPlayerIsNewUser},init:function(){try{window.addEventListener("unload",n),window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n)}catch(e){}}};t.a=i},function(e,t,i){"use strict";var n=i(102),r=i(190),a=i(178),o=i(109),i=i(236),s="Array Iterator",c=o.set,d=o.getterFor(s);e.exports=i(Array,"Array",function(e,t){c(this,{type:s,target:n(e),index:0,kind:t})},function(){var e=d(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,i){"use strict";function x(e){var t=[];if("object"==a()(e))for(var i in e)t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return t.join("&").replace(/%20/g,"+")}function n(c){c=c||{},Object(S.a)(c,w);var d=c.url,u=c.dataType,l=c.params||{},h=c.success,f=c.failure;d&&function(){var i={},e=c.headers,t=c.data||null,n=x(l);i.params=l,i.url=d+(0<n.length?(/\?/i.test(d)?"&":"?")+n:""),"function"==typeof c.beforeSend&&(i=c.beforeSend(i));var r="",a=!1,o=new XMLHttpRequest;if(o.withCredentials=c.withCredentials,o.onreadystatechange=function(){var e;if(r+=", readyState = "+o.readyState,4==o.readyState)if(e=g[u]?g[u](o.responseText):o.responseText,r+=", status = "+o.status+", statusText = "+o.statusText,200==o.status){if("json"===u&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){console.error("res is not comfortable, ".concat(d),e)}h(e)}else if(!a){a=!0;var t="";try{t=JSON.stringify(e)}catch(e){t=" json error"}r+=", data = "+t+"url = "+i.url,f("xhr error, time = "+c.timeout+r)}},o.ontimeout=function(e){a||(a=!0,e="xhr timeout, time = "+c.timeout+", readyState = "+o.readyState+", status = "+o.status+", data = "+JSON.stringify(e)+"url = "+i.url,f(e))},o.open(c.method,i.url,!0),o.timeout=c.timeout,o.setRequestHeader("Accept",_[u]),p.a.isObject(e))for(var s in e)o.setRequestHeader(s,e[s]);o.send(t)}()}var r=i(32),a=i.n(r),S=(i(26),i(17),i(45),i(145),i(21)),T=i(84),p=i(33),P=document,i=function(){},I={},_={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},g={"*":null,text:null,html:null,xml:null,json:function(e){var t={},i=window.JSON?JSON.parse:function(){return{}};try{t=i(e)}catch(e){}return t}},w={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:i,success:i,failure:i};t.a={serializeParam:x,ajax:n,json:function(e){e=e||{},Object(S.a)(e,w),e.dataType="json",n(e)},jsonp:function(e){e=e||{},Object(S.a)(e,w);var t=e.url,i=e.params||{},n=x(i),r=t+(0<n.length?(/\?/i.test(t)?"&":"?")+n:""),a=e.complete,o=e.success,s=e.failure,c=(e.callbackhead||"Q")+Object(T.a)(e.fixedCallback||r),d=!!e.memory,u=Object(T.a)(r),l=I[u];if(r){if(!(d&&l&&o)){var h=function(e,t,i){switch(f(),e){case"success":d&&(I[u]=i),o(i);break;case"fail":s(i,t)}a(i)},f=function(){if(window[c]){window[c]=void 0;try{delete window[c]}catch(e){}}};window[c]=function(e){f(),setTimeout(function(){h("success","200",e)},0)};var p={},_=P.createElement("script");_.async=!0,_.type="text/javascript",_.charset=e.charset;var g=function(){if(_)try{_.onload(null,!0)}catch(e){}};_.abort=g,_.onload=_.onreadystatechange=function(e,t){!t&&_.readyState&&!/loaded|complete/.test(_.readyState)||(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),_=null,clearTimeout(y))},_.onerror=function(){h("fail",null),g()};var y=setTimeout(function(){h("fail",408),g()},e.timeout),n={};if(n[e.jsonpCallback]=c,Object(S.a)(i,n,!0),e.isSort&&1==e.isSort){var v,m=[],b="";for(v in e.params)m.push(v+"="+e.params[v]);m.sort();for(var k=0;k<m.length;k++)k===m.length-1?b+=m[k]:b+=m[k]+"&";p.url=t+(/\?/i.test(t)?"&":"?")+b}else p.url=r+(/\?/i.test(r)?"&":"?")+x(n);return p.params=i,"function"==typeof e.beforeSend&&(p=e.beforeSend(p)||p),_.src=p.url,P.getElementsByTagName("head")[0].appendChild(_),_}o(l)}},beacon:function(e,t,i){if("string"==typeof t&&e){var n,r=[];for(n in(void 0===i||i)&&(e._=+new Date),e)r.push(n+"="+encodeURIComponent(e[n]));var t=t+"?"+r.join("&"),a=new Image;a.onload=a.onerror=a.onabort=function(){a.onload=a.onerror=a.onabort=null,a=null},a.src=t}}}},function(e,t,i){var n=i(24),r=i(186),a=i(76),o=i(172),s=i(187),i=i(222),c=r("wks"),d=n.Symbol,u=i?d:d&&d.withoutSetter||o;e.exports=function(e){return a(c,e)||(s&&a(d,e)?c[e]=d[e]:c[e]=u("Symbol."+e)),c[e]}},function(t,e){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(e){return typeof e}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(e,t,i){"use strict";i(10),i(25),i(26),i(17),i(45),t.a={isBool:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isArray:function(e){return Array.isArray?Array.isArray(e):"[object array]"===Object.prototype.toString.call(e).toLowerCase()},isObject:function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},formatMilliseconds:function(e){if(isNaN(e))return"00:00:00";var t=3600<=(e=Math.round(e))?Math.floor(e/3600):0,i=10<=(i=60<=e%3600?Math.floor(e%3600/60):0)?i:"0"+i;return e=10<=(e=0<=parseInt(i,10)?e%3600%60:e)?e:"0"+e,0<t?(9<t?t:"0"+t)+":"+i+":"+e:i+":"+e},protocolRevise:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").replace("http://","//").replace("https://","//").replace(".qiyipic",".iqiyipic")},hex2rgba:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=[],n=1;n<e.length;){var r=e.substring(n,n+2);i.push(parseInt(r,16)),n+=2}return i.push(t),"rgba(".concat(i.join(","),")")}}},function(e,t,i){"use strict";t.a={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",SkinType_pc:"pc",SkinType_mobile:"mobile",SkinType_mini:"mini",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_CHECK_CLIENT_INSTALL:"checkClientInstall",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_WRITE_FLASH_LOG:"writeFlashLog",QYPLAYER_SWITCH_PLAYER:"switchPlayer",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_AD_BLOCK:"adblock",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_SCORECHANGE:"scoreTaskChange",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW:"feedbackPanelShow",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_BuyPlay:"buyPlay",QYPLAYER_NOTIFY_TO_DIVERSION:"todiversion",QYPLAYER_NOTIFY_AI_STAR_INFO:"aistarinfo",QYPLAYER_NOTIFY_AI_FEEDBACK:"aifeedback",QYPLAYER_NOTIFY_AI_STAR_CLOSE:"aistarclose",QYPLAYER_NOTIFY_SHOW_VIDEOLIST:"showvideolist",QYPLAYER_NOTIFY_FOLLOW_CLICK:"followbtnclick",QYPLAYER_NOTIFY_INTERACTION_START:"interactionstart",QYPLAYER_NOTIFY_INTERACTION_END:"interactionend",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged",QYPLAYER_H5_SEEK_DRAGSTART:"h5seekdragstart",QYPLAYER_H5_SEEK_DRAGEND:"h5seekdragend"}},function(e,t,i){var n=i(39);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,i){"use strict";e.exports=function(a){var o=[];return o.toString=function(){return this.map(function(r){var e=function(){var e=r[1]||"",t=r[3];if(!t)return e;if(a&&"function"==typeof btoa){var i="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */",n=t.sources.map(function(e){return"/*# sourceURL="+t.sourceRoot+e+" */"});return[e].concat(n).concat([i]).join("\n")}return[e].join("\n")}();return r[2]?"@media "+r[2]+"{"+e+"}":e}).join("")},o.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];null!=r&&(i[r]=!0)}for(n=0;n<e.length;n++){var a=e[n];null!=a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),o.push(a))}},o}},function(e,t,i){"use strict";var n=i(22),r=i(159).indexOf,i=i(116),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0,i=i("indexOf");n({target:"Array",proto:!0,forced:o||!i},{indexOf:function(e){return o?a.apply(this,arguments)||0:r(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n,t=i(32),s=i.n(t),t=i(2),r=i.n(t),t=i(3),t=i.n(t),c=(i(177),Object.create||function(e){function t(){}return t.prototype=e,new t}),o=Object.keys||function(e){var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return t},a=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}},d=20,u=(t()(l,[{key:"setMaxListeners",value:function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this}},{key:"getMaxListeners",value:function(){return f(this)}},{key:"emit",value:function(e){var t,i,n,r,a,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;s=new Error('Unhandled "error" event. ('+t+")");throw s.context=t,s}if(!(i=o[e]))return!1;var c="function"==typeof i;switch(n=arguments.length){case 1:!function(e,t,i){if(t)e.call(i);else for(var n=e.length,r=g(e,n),a=0;a<n;++a)try{r[a].call(i)}catch(e){console.error(e)}}(i,c,this);break;case 2:!function(e,t,i,n){if(t)e.call(i,n);else for(var r=e.length,a=g(e,r),o=0;o<r;++o)try{a[o].call(i,n)}catch(e){console.error(e)}}(i,c,this,arguments[1]);break;case 3:!function(e,t,i,n,r){if(t)e.call(i,n,r);else for(var a=e.length,o=g(e,a),s=0;s<a;++s)try{o[s].call(i,n,r)}catch(e){console.error(e)}}(i,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,i,n,r,a){if(t)e.call(i,n,r,a);else for(var o=e.length,s=g(e,o),c=0;c<o;++c)try{s[c].call(i,n,r,a)}catch(e){console.error(e)}}(i,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(n-1),a=1;a<n;a++)r[a-1]=arguments[a];!function(e,t,i,n){if(t)e.apply(i,n);else for(var r=e.length,a=g(e,r),o=0;o<r;++o)try{a[o].apply(i,n)}catch(e){console.error(e)}}(i,c,this,r)}return!0}},{key:"on",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{highPriority:!1};return function(e,t,i){var n,r,a=!!(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).highPriority;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');{var o;(n=e._events)?(n.newListener&&(e.emit("newListener",t,i.listener||i),n=e._events),r=n[t]):(n=e._events=c(null),e._eventsCount=0),r?("function"==typeof r?r=n[t]=[r,i]:a?r.shift(i):r.push(i),!r.warned&&(o=f(e))&&0<o&&r.length>o&&(r.warned=!0,(o=new Error("Possible Dispatcher memory leak detected. "+r.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=r.length,"object"===("undefined"==typeof console?"undefined":s()(console))&&console.warn&&console.warn("%s: %s",o.name,o.message))):(r=n[t]=i,++e._eventsCount)}return e}(this,e,t,i="object"!=s()(i)?{}:i)}},{key:"once",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,(t={fired:!1,wrapFn:void 0,target:i=this,type:e,listener:e=t},(i=a.call(p,t)).listener=e,t.wrapFn=i)),this;var i}},{key:"off",value:function(e,t){return function(e,t){var i,n,r,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=c(null):(delete n[e],n.off&&this.emit("off",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;0<=a;a--)if(i[a]===t||i[a].listener===t){o=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(e){for(var t=r,i=t+1,n=e.length;i<n;t+=1,i+=1)e[t]=e[i];e.pop()}(i),1===i.length&&(n[e]=i[0]),n.off&&this.emit("off",e,o||t)}return this}.call(this,e,t)}},{key:"un",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){var t,i;if(!(i=this._events))return this;if(!i.off)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=c(null):delete i[e]),this;if(0===arguments.length){for(var n,r=o(i),a=0;a<r.length;++a)"off"!==(n=r[a])&&this.removeAllListeners(n);return this.removeAllListeners("off"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.off(e,t);else if(t)for(a=t.length-1;0<=a;a--)this.off(e,t[a]);return this}},{key:"listeners",value:function(e){return _(this,e,!0)}},{key:"rawListeners",value:function(e){return _(this,e,!1)}},{key:"listenerCount",value:function(){return l.listenerCount.apply(this,arguments)}}],[{key:"listenerCount",value:function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):function(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}.call(e,t)}}]),l);function l(){r()(this,l),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),n=0===h.x}catch(e){n=!1}function f(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function p(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _(e,t,i){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?i?[t.listener||t]:[t]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(t):g(t,t.length):[]}function g(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}n?Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');d=e}}):u.defaultMaxListeners=d},function(e,t,i){"use strict";var n=i(22),r=i(104).find,i=i(190),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),i("find")},function(n,e,t){var r=t(246);function a(e,t,i){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=a=Reflect.get:n.exports=a=function(e,t,i){e=r(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(i):t.value}},n.exports.default=n.exports,n.exports.__esModule=!0,a(e,t,i||e)}n.exports=a,n.exports.default=n.exports,n.exports.__esModule=!0},function(e,t,i){"use strict";var n=i(149),u=i(189),y=i(35),l=i(89),v=i(138),m=i(166),b=i(44),k=i(150),h=i(132),i=i(23),f=[].push,x=Math.min,S=4294967295,T=!i(function(){return!RegExp(S,"y")});n("split",2,function(r,p,_){var g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var i=String(l(this)),n=void 0===t?S:t>>>0;if(0==n)return[];if(void 0===e)return[i];if(!u(e))return p.call(i,e,n);for(var r,a,o,s=[],t=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,d=new RegExp(e.source,t+"g");(r=h.call(d,i))&&!((a=d.lastIndex)>c&&(s.push(i.slice(c,r.index)),1<r.length&&r.index<i.length&&f.apply(s,r.slice(1)),o=r[0].length,c=a,s.length>=n));)d.lastIndex===r.index&&d.lastIndex++;return c===i.length?!o&&d.test("")||s.push(""):s.push(i.slice(c)),s.length>n?s.slice(0,n):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:p.call(this,e,t)}:p;return[function(e,t){var i=l(this),n=null==e?void 0:e[r];return void 0!==n?n.call(e,i,t):g.call(String(i),e,t)},function(e,t){var i=_(g,e,this,t,g!==p);if(i.done)return i.value;var n=y(e),r=String(this),i=v(n,RegExp),a=n.unicode,e=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(T?"y":"g"),o=new i(T?n:"^(?:"+n.source+")",e),s=void 0===t?S:t>>>0;if(0==s)return[];if(0===r.length)return null===k(o,r)?[r]:[];for(var c=0,d=0,u=[];d<r.length;){o.lastIndex=T?d:0;var l,h=k(o,T?r:r.slice(d));if(null===h||(l=x(b(o.lastIndex+(T?0:d)),r.length))===c)d=m(r,d,a);else{if(u.push(r.slice(c,d)),u.length===s)return u;for(var f=1;f<=h.length-1;f++)if(u.push(h[f]),u.length===s)return u;d=c=l}}return u.push(r.slice(c)),u}]},!T)},function(e,t,i){var n=i(93),r=Math.min;e.exports=function(e){return 0<e?r(n(e),9007199254740991):0}},function(e,t,i){"use strict";var n=i(22),r=i(134),a=i(102),i=i(116),o=[].join,r=r!=Object,i=i("join",",");n({target:"Array",proto:!0,forced:r||!i},{join:function(e){return o.call(a(this),void 0===e?",":e)}})},function(e,t,i){"use strict";var n=i(22),r=i(23),a=i(257),c=i(35),d=i(119),u=i(44),l=i(138),h=a.ArrayBuffer,f=a.DataView,p=h.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r(function(){return!new h(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(c(this),e);for(var i=c(this).byteLength,n=d(e,i),r=d(void 0===t?i:t,i),i=new(l(this,h))(u(r-n)),a=new f(this),o=new f(i),s=0;n<r;)o.setUint8(s++,a.getUint8(n++));return i}})},function(e,t,i){i=i(23);e.exports=!i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,i){var n,r=i(24),a=i(209),o=i(225),s=i(88);for(n in a){var c=r[n],c=c&&c.prototype;if(c&&c.forEach!==o)try{s(c,"forEach",o)}catch(e){c.forEach=o}}},,function(e,t,i){var n=i(47),r=i(191),a=i(35),o=i(121),s=Object.defineProperty;t.f=n?s:function(e,t,i){if(a(e),t=o(t,!0),a(i),r)try{return s(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){"use strict";i.d(t,"a",function(){return p}),i.d(t,"b",function(){return r}),i(9);var n=i(101),o=i.n(n),t=i(2),a=i.n(t),n=i(3),s=i.n(n),t=i(4),c=i.n(t),n=i(5),d=i.n(n),t=i(1),u=i.n(t),n=(i(45),i(82),i(27),i(94)),t=i(254),l=i(152);var h=t.a.console,f=">>>",p=new(function(e){c()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=u()(i);return t=n?(e=u()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function r(){var e;return a()(this,r),(e=t.call(this)).enable=!0,e.MSG_NAME="__log__",e}return s()(r,[{key:"info",value:function(){this.log.apply(this,arguments)}},{key:"log",value:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];l.l?p.emit(this.MSG_NAME,"log",Array.prototype.slice.call(arguments).join("")):this.enable&&(e=h.log).call.apply(e,[h,f].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];l.l?p.emit(this.MSG_NAME,"debug",Array.prototype.slice.call(arguments).join("")):this.enable&&h.debug&&(e=h.debug).call.apply(e,[h,f].concat(Array.prototype.slice.call(arguments)))}},{key:"assert",value:function(e){if(this.enable&&h.assert){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var a=Array.prototype.slice.call(n,1);a.unshift(f),(t=h.assert).call.apply(t,[h,e].concat(o()(a)))}}},{key:"warn",value:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];l.l?p.emit(this.MSG_NAME,"warn",Array.prototype.slice.call(arguments).join("")):this.enable&&(e=h.warn).call.apply(e,[h,f].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];l.l?p.emit(this.MSG_NAME,"error",Array.prototype.slice.call(arguments).join("")):this.enable&&(e=h.error).call.apply(e,[h,f].concat(Array.prototype.slice.call(arguments)))}}]),r}(n.EventEmitter));function r(e){h=e}},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"d",function(){return a}),i.d(t,"c",function(){return o});var n="iqp-big-mode",r="iqp-btn-disable",a="volumeup",o="volumedown"},function(e,t,i){"use strict";var n=i(80),r=i(356),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",function(e,t){return r.call(a(this),e,t,2<arguments.length?arguments[2]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(104).every,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",function(e){return r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(244),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",function(e){return r.apply(a(this),arguments)})},function(e,t,i){"use strict";var n=i(80),r=i(104).filter,a=i(357),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("filter",function(e){e=r(o(this),e,1<arguments.length?arguments[1]:void 0);return a(this,e)})},function(e,t,i){"use strict";var n=i(80),r=i(104).find,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",function(e){return r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(104).findIndex,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",function(e){return r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(104).forEach,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",function(e){r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(159).includes,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",function(e){return r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(159).indexOf,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",function(e){return r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(24),r=i(80),a=i(29),i=i(31)("iterator"),n=n.Uint8Array,o=a.values,s=a.keys,c=a.entries,d=r.aTypedArray,a=r.exportTypedArrayMethod,r=n&&n.prototype[i],n=!!r&&("values"==r.name||null==r.name),r=function(){return o.call(d(this))};a("entries",function(){return c.call(d(this))}),a("keys",function(){return s.call(d(this))}),a("values",r,!n),a(i,r,!n)},function(e,t,i){"use strict";var i=i(80),n=i.aTypedArray,i=i.exportTypedArrayMethod,r=[].join;i("join",function(e){return r.apply(n(this),arguments)})},function(e,t,i){"use strict";var n=i(80),r=i(269),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",function(e){return r.apply(a(this),arguments)})},function(e,t,i){"use strict";var n=i(80),r=i(104).map,a=i(138),o=n.aTypedArray,s=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",function(e){return r(o(this),e,1<arguments.length?arguments[1]:void 0,function(e,t){return new(s(a(e,e.constructor)))(t)})})},function(e,t,i){"use strict";var n=i(80),r=i(258).left,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(e){return r(a(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var n=i(80),r=i(258).right,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",function(e){return r(a(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var i=i(80),a=i.aTypedArray,i=i.exportTypedArrayMethod,o=Math.floor;i("reverse",function(){for(var e,t=this,i=a(t).length,n=o(i/2),r=0;r<n;)e=t[r],t[r++]=t[--i],t[i]=e;return t})},function(e,t,i){"use strict";var n=i(80),o=i(44),s=i(277),c=i(81),i=i(23),d=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",function(e){d(this);var t=s(1<arguments.length?arguments[1]:void 0,1),i=this.length,n=c(e),r=o(n.length),a=0;if(i<r+t)throw RangeError("Wrong length");for(;a<r;)this[t+a]=n[a++]},i(function(){new Int8Array(1).set({})}))},function(e,t,i){"use strict";var n=i(80),o=i(138),i=i(23),s=n.aTypedArray,c=n.aTypedArrayConstructor,n=n.exportTypedArrayMethod,d=[].slice;n("slice",function(e,t){for(var i=d.call(s(this),e,t),t=o(this,this.constructor),n=0,r=i.length,a=new(c(t))(r);n<r;)a[n]=i[n++];return a},i(function(){new Int8Array(1).slice()}))},function(e,t,i){"use strict";var n=i(80),r=i(104).some,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",function(e){return r(a(this),e,1<arguments.length?arguments[1]:void 0)})},function(e,t,i){"use strict";var i=i(80),n=i.aTypedArray,i=i.exportTypedArrayMethod,r=[].sort;i("sort",function(e){return r.call(n(this),e)})},function(e,t,i){"use strict";var n=i(80),r=i(44),a=i(119),o=i(138),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",function(e,t){var i=s(this),n=i.length,e=a(e,n);return new(o(i,i.constructor))(i.buffer,i.byteOffset+e*i.BYTES_PER_ELEMENT,r((void 0===t?n:a(t,n))-e))})},function(e,t,i){"use strict";var n=i(24),r=i(80),i=i(23),a=n.Int8Array,o=r.aTypedArray,r=r.exportTypedArrayMethod,s=[].toLocaleString,c=[].slice,d=!!a&&i(function(){s.call(new a(1))});r("toLocaleString",function(){return s.apply(d?c.call(o(this)):o(this),arguments)},i(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!i(function(){a.prototype.toLocaleString.call([1,2])}))},function(e,t,i){"use strict";var n=i(80).exportTypedArrayMethod,r=i(23),i=i(24).Uint8Array,i=i&&i.prototype||{},a=[].toString,o=[].join;r(function(){a.call({})})&&(a=function(){return o.call(this)});i=i.toString!=a;n("toString",a,i)},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){i(275)("Uint8",function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){"use strict";t.a={DASH:"DASH",CKNSP:"CKNSP",KIWI:"KIWI",KIWIR:"KIWIR",AD:"AD",IVG:"IVG",P00001:"P00001",P00002:"P00002",P00003:"P00003",P00004:"P00004",P00005:"P00005",P00006:"P00006",P00007:"P00007",P07001:"P07001",IV0001:"IV0001",dataKeyMap:{A00001:2,A00101:2,A00302:32,A00301:31,U00001:22,P00001:101,P00002:102,P00007:12,304:10,401:10,405:10,406:10,493:10,411:9,491:9,501:12,502:13,505:15,506:15,601:14,602:14,701:14,702:14,706:14,711:14,Q00312:22,Q00311:22,Q00501:22,P00005:21,P07001:7001},keyMap:{1:{title:"error_code_title1",desc:"error_code_desc1"},2:"error_code_desc2",6:"error_code_desc6",7:"error_code_desc7",9:{title:"error_code_title9",desc:"&nbsp;"},10:{title:"error_code_title10",desc:"&nbsp;"},11:"error_code_desc11",12:{title:"error_code_title12",desc:"error_code_desc12"},13:{title:"error_code_title13",desc:"error_code_desc12"},14:{title:"error_code_title14",desc:"&nbsp;"},15:{title:"",desc:"&nbsp;"},21:"error_code_desc21",22:{title:"error_code_desc22",desc:"&nbsp;"},31:{title:"error_private_selfsee",desc:"&nbsp;"},32:{title:"error_private_video",desc:"&nbsp;"},101:"error_code_desc_http",102:"error_code_desc_http",3e3:{title:"error_code_title301",desc:"&nbsp;"},3302:{title:"error_code_vda_err",desc:"&nbsp;"},3303:{title:"error_code_audio_err",desc:"&nbsp;"},7001:"error_code_desc_ad"}}},function(e,t,i){"use strict";var n=i(2),r=i.n(n),n=i(3),n=i.n(n),a=(i(90),i(82),i(48),i(16)),o=[],s=(n()(c,[{key:"on",value:function(e,t,i){var n=[];return this._events||(this._events={}),(n=i&&this._events[e]?this._events[e]:n).push(t),this._events[e]=n,this}},{key:"off",value:function(e,t){if(this._events){var i=this._events[e];if(!t||Array.isArray(i)&&i.length<1)delete this._events[e];else for(var n=i?i.length:0;n--;)i[n]===t&&i.splice(n,1);return this}}},{key:"emit",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i[0],a=[].slice.call(i,1),r=this._events[r];return r&&r.forEach(function(e){return e.apply(t,a)}),this}},{key:"once",value:function(r,a){var o=this;return this.on(r,function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];a.apply(o,i),o.off(r,e)}),this}},{key:"clear",value:function(){delete this._events}}]),c);function c(){r()(this,c),this._events={}}t.a={getEvent:function(){return o[a.a.tvId]},newEvent:function(){return o[a.a.tvId]=new s,o[a.a.tvId]},clearEvent:function(e){o[e]&&o[e].clear()}}},function(e,t,i){"use strict";function n(e){return!!c(e)&&(e=u(e),d(I,e)||d(w,e))}var r,a=i(266),o=i(47),s=i(24),c=i(39),d=i(76),u=i(170),l=i(88),h=i(85),f=i(50).f,p=i(179),_=i(158),g=i(31),y=i(172),v=s.Int8Array,m=v&&v.prototype,b=s.Uint8ClampedArray,i=b&&b.prototype,k=v&&p(v),x=m&&p(m),b=Object.prototype,S=b.isPrototypeOf,g=g("toStringTag"),T=y("TYPED_ARRAY_TAG"),P=a&&!!_&&"Opera"!==u(s.opera),a=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},w={BigInt64Array:8,BigUint64Array:8};for(r in I)s[r]||(P=!1);if((!P||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},P))for(r in I)s[r]&&_(s[r],k);if((!P||!x||x===b)&&(x=k.prototype,P))for(r in I)s[r]&&_(s[r].prototype,x);if(P&&p(i)!==x&&_(i,x),o&&!d(x,g))for(r in a=!0,f(x,g,{get:function(){return c(this)?this[T]:void 0}}),I)s[r]&&l(s[r],T,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:a&&T,aTypedArray:function(e){if(n(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(_){if(S.call(k,e))return e}else for(var t in I)if(d(I,r)){t=s[t];if(t&&(e===t||S.call(t,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i){if(o){if(i)for(var n in I){n=s[n];n&&d(n.prototype,e)&&delete n.prototype[e]}x[e]&&!i||h(x,e,!i&&P&&m[e]||t)}},exportTypedArrayStaticMethod:function(e,t,i){var n,r;if(o){if(_){if(i)for(n in I)(r=s[n])&&d(r,e)&&delete r[e];if(k[e]&&!i)return;try{return h(k,e,!i&&P&&v[e]||t)}catch(e){}}for(n in I)!(r=s[n])||r[e]&&!i||h(r,e,t)}},isView:function(e){if(!c(e))return!1;e=u(e);return"DataView"===e||d(I,e)||d(w,e)},isTypedArray:n,TypedArray:k,TypedArrayPrototype:x}},function(e,t,i){var n=i(89);e.exports=function(e){return Object(n(e))}},function(e,t,i){"use strict";var n=i(22),d=i(39),u=i(143),l=i(119),h=i(44),f=i(102),p=i(144),r=i(31),i=i(130)("slice"),_=r("species"),g=[].slice,y=Math.max;n({target:"Array",proto:!0,forced:!i},{slice:function(e,t){var i,n,r,a=f(this),o=h(a.length),s=l(e,o),c=l(void 0===t?o:t,o);if(u(a)&&((i="function"==typeof(i=a.constructor)&&(i===Array||u(i.prototype))||d(i)&&null===(i=i[_])?void 0:i)===Array||void 0===i))return g.call(a,s,c);for(n=new(void 0===i?Array:i)(y(c-s,0)),r=0;s<c;s++,r++)s in a&&p(n,r,a[s]);return n.length=r,n}})},function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(145),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(26),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(19),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(25),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(45),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(146),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(43),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__),_kit_dispatcher__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(40),_kit_cookie__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(14),_kit_http__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(30),_kit_md5__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(84),_kit_logger__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(15),_kit_platform__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(8),_kit_uuid__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(28),_res_authkey__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(123),_res_authkey__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_res_authkey__WEBPACK_IMPORTED_MODULE_22__),_i18n__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(98);function _createSuper(i){var n=_isNativeReflectConstruct();return function(){var e,t=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(i);return t=n?(e=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var logger=new _kit_logger__WEBPACK_IMPORTED_MODULE_19__.a("user"),NoticedLoginInfo,_isNewUser=!_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC006"),_heartBeatTimer=0,_heartBeatTime=0,_isActivation=!1,_tvid="",_bossStatus="",_agentType=1,_qdv=7,_vipTypes="",_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.browser.iPad?23:_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.os.androidTablet?24:1,preIsVip=!1,_userIpInfo="",requestVipTypesRetryTimes=0;_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()&&(_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getAgentType(!0));var getUserInfo=function getUserInfo(){var userInfo={},p00003=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00003"),qc179=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC179");return null!==p00003&&""!==p00003?userInfo.uid=p00003:null!==qc179&&""!==qc179&&(qc179=window.JSON?window.JSON.parse(qc179):eval("("+qc179+")"),userInfo.uid=qc179.uid),userInfo},onHeartBeatTimer=function(){var e={authcookie:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),agenttype:_agentType,cversion:2,device_id:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getFluid(),paid:_bossStatus,ptid:getPTID(),viptypes:_vipTypes,tv_id:_tvid,tn:Math.random().toString().replace(".","")};_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive.action",params:e,beforeSend:function(e){var t,i=[];for(t in e.params)i.push(t+"="+e.params[t]);return e.url+="&sign="+function(e){e&&e.sort();for(var t="",i=0;i<e.length;i++)t+=e[i]+"|";return t+="jfaljluixn39012$#",Object(_kit_md5__WEBPACK_IMPORTED_MODULE_18__.a)(t)}(i),e}})},getPTID=function(){return _kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getPtid(_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale())},addEvent=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)},_getVipTypesStack=[],_getVipTypesCallback=function(e){for(var t=0;t<_getVipTypesStack.length;t++)_getVipTypesStack[t](e);_getVipTypesStack=[]},isRequestVipTypes=!1,isKeepalive=!1,__QP0013=null,UserInfo=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(i,e);var t=_createSuper(i);function i(){return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,i),t.call(this)}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(i,[{key:"isLogin",value:function(){return NoticedLoginInfo?NoticedLoginInfo.login:""!==this.getUid()}},{key:"getUid",value:function(){return getUserInfo().uid||""}},{key:"passportCookie",value:function(){return NoticedLoginInfo&&NoticedLoginInfo.P00001?NoticedLoginInfo.P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001")||""}},{key:"isNewUser",value:function(){return _isNewUser}},{key:"setInfo",value:function(e){preIsVip=""!==__QP0013&&"0"!==__QP0013,!0===(NoticedLoginInfo=e).login||"true"===NoticedLoginInfo.login?NoticedLoginInfo.login=!0:NoticedLoginInfo.login=!1,this.clearVipTypes(),this.emit("infoset")}},{key:"tvid",value:function(e){_tvid=e}},{key:"bossStatus",value:function(e){_bossStatus=e}},{key:"openHeartBeat",value:function(){_isActivation||0===_heartBeatTime||(_isActivation=!0,0===_heartBeatTimer&&(onHeartBeatTimer(),_heartBeatTimer=setInterval(onHeartBeatTimer,_heartBeatTime)))}},{key:"stopHeartBeat",value:function(){_isActivation=!1,0!==_heartBeatTimer&&(clearInterval(_heartBeatTimer),_heartBeatTimer=0)}},{key:"closeHeartBeat",value:function(){var r=this,e=+new Date,t=getPTID(),e={authcookie:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),agenttype:_agentType,device_id:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getFluid()||_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getJsuid(),tv_id:_tvid,paid:_bossStatus,viptypes:_vipTypes,ptid:t,version:"4.1.1",qd_v:_qdv,ts:e};_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/off.action",params:e,beforeSend:function(e){var t,i=[];for(t in e.params)i.push(t+"="+e.params[t]);try{var n=r.verifySgin(i);e.url+="&qd_sc="+_res_authkey__WEBPACK_IMPORTED_MODULE_22___default.a.cmd5x(n)}catch(e){}return logger.log(e.url),e},isSort:!0})}},{key:"beforeunloadListener",value:function(){var t=this;addEvent(window,"beforeunload",function(){t.isVip(function(e){e&&t.closeHeartBeat()})})}},{key:"keepalive",value:function(){var e,t,r=this;isKeepalive||(isKeepalive=!0,e=getPTID(),_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()&&(_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getAgentType(!0)),(t=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"))&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive_required.action",params:{authcookie:t,agenttype:_agentType,cversion:2,device_id:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC005"),paid:_bossStatus,ptid:e,tv_id:_tvid,qd_v:_qdv,viptypes:_vipTypes},timeout:2e3,memory:!0,beforeSend:function(e){var t,i=[];for(t in e.params)i.push(t+"="+e.params[t]);try{var n=r.verifySgin(i);e.url+="&qd_sc="+_res_authkey__WEBPACK_IMPORTED_MODULE_22___default.a.cmd5x(n)}catch(e){}return e},success:function(e){e&&"A00000"==e.code&&e.data&&e.data.interval&&(0<(e=1e3*parseInt(e.data.interval,10))&&(_heartBeatTime=e=e<1e4?1e4:e,clearInterval(_heartBeatTimer),r.openHeartBeat()))},isSort:!0}))}},{key:"isVip",value:function(t){this.getVipTypes(function(e){e=e.join(",");t("0"!==e&&""!==e)})}},{key:"getVipTypes",value:function(e){this.isLogin()||this.clearVipTypes(),_getVipTypesStack.push(e),__QP0013||(e=(__QP0013=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QP0013")).match(/[0-9]/g)||[],__QP0013&&e.length!=__QP0013.replace(/,/g,"").length&&(__QP0013="")),__QP0013?(_vipTypes=__QP0013.split(","),_getVipTypesCallback(_vipTypes)):isRequestVipTypes||(isRequestVipTypes=!0,this.requestVipTypes())}},{key:"updateVipTypes",value:function(){isRequestVipTypes||(isRequestVipTypes=!0,this.requestVipTypes())}},{key:"clearVipTypes",value:function(){isRequestVipTypes=!1,requestVipTypesRetryTimes=0,_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013","",{expires:1296e6,path:"/",domain:"iqiyi.com"}),__QP0013=null}},{key:"__isChangeVipState",value:function(t){this.isVip(function(e){logger.log("isChangeVipState! preIsVip:"+preIsVip+",curIsVip: "+e),t(preIsVip!=e)})}},{key:"requestVipTypes",value:function(){var a=this,e=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");if(!this.isLogin()||!e)return isRequestVipTypes=!1,void _getVipTypesCallback([0]);e&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),platform:getPTID(),version:"3.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.createUUID(),vipTypes:_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()?"5,6,7,8,10,13,14,16,18":"1,3,4,5,7,8,10,13,14,16,18"},timeout:2e3,memory:!0,success:function(e){isRequestVipTypes=!1;try{e=JSON.parse(e||{})}catch(e){logger.error("vip_users: parse Error"),a.requestVipTypesFailed()}if("A00000"===e.code){var t,i=e.data||{},n=[];for(t in i){var r=i[t];r&&"1"==r.status&&n.push(r.vipType),r=null}n.length||n.push(0),__QP0013=n.join(","),_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013",__QP0013,{expires:1296e6,path:"/",domain:"iqiyi.com"}),logger.log("requset vipTypes success! viptypes is "+__QP0013),_getVipTypesCallback(n)}else a.requestVipTypesFailed()},failure:function(e,t){isRequestVipTypes=!1,a.requestVipTypesFailed()}})}},{key:"requestVipTypesFailed",value:function(){0<requestVipTypesRetryTimes?(__QP0013="1",logger.log("requset vipTypes failed! viptypes is "+__QP0013),_getVipTypesCallback([1])):(this.requestVipTypes(),requestVipTypesRetryTimes++)}},{key:"getUserIPInfo",value:function(t){_userIpInfo?t(_userIpInfo):_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.json({url:"//data.video.iqiyi.com/v.f4v",withCredentials:!1,timeout:2e3,memory:!0,success:function(e){t(_userIpInfo=e)},failure:function(e){t(e)}})}},{key:"reqVipTypes",value:function(o){var e=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");e?_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),platform:getPTID(),version:"3.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.createUUID(),vipTypes:_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()?"5,6,7,8,10,13,14,16,18":"1,3,4,5,7,8,10,13,14,16,18"},timeout:2e3,memory:!0,success:function(e){try{e=JSON.parse(e||{})}catch(e){o([1])}if("A00000"===e.code){var t,i=e.data||{},n=[];for(t in i){var r=i[t];r&&"1"==r.status&&n.push(parseInt(r.vipType)),r=null}n.length||n.push(0);var a=n.join(",");_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013",a,{expires:1296e6,path:"/",domain:"iqiyi.com"}),o(n)}else o([1]);logger.info("user reqVipTypes: result = ".concat(e))},failure:function(){o([1]),logger.info("user reqVipTypes: failure")}}):o([0])}},{key:"verifySgin",value:function(e){e&&e.sort();for(var t="",i=0;i<e.length;i++)i===e.length-1?t+=e[i]:t+=e[i]+"&";return t}}]),i}(_kit_dispatcher__WEBPACK_IMPORTED_MODULE_15__.a);__webpack_exports__.a=new UserInfo},function(e,t,i){"use strict";function s(e,t,i,n,r,a){return _((a=_(_(t,e),_(n,a)))<<r|a>>>32-r,i)}function l(e,t,i,n,r,a,o){return s(t&i|~t&n,e,t,r,a,o)}function h(e,t,i,n,r,a,o){return s(t&n|i&~n,e,t,r,a,o)}function f(e,t,i,n,r,a,o){return s(t^i^n,e,t,r,a,o)}function p(e,t,i,n,r,a,o){return s(i^(t|~n),e,t,r,a,o)}function _(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}t.a=function(e){return function(e){for(var t="0123456789abcdef",i="",n=0;n<4*e.length;n++)i+=t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15);return i}(function(e,t){e[t>>5]|=128<<t%32,e[14+(64+t>>>9<<4)]=t;for(var i=1732584193,n=-271733879,r=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=i,c=n,d=r,u=a,i=l(i,n,r,a,e[o+0],7,-680876936),a=l(a,i,n,r,e[o+1],12,-389564586),r=l(r,a,i,n,e[o+2],17,606105819),n=l(n,r,a,i,e[o+3],22,-1044525330);i=l(i,n,r,a,e[o+4],7,-176418897),a=l(a,i,n,r,e[o+5],12,1200080426),r=l(r,a,i,n,e[o+6],17,-1473231341),n=l(n,r,a,i,e[o+7],22,-45705983),i=l(i,n,r,a,e[o+8],7,1770035416),a=l(a,i,n,r,e[o+9],12,-1958414417),r=l(r,a,i,n,e[o+10],17,-42063),n=l(n,r,a,i,e[o+11],22,-1990404162),i=l(i,n,r,a,e[o+12],7,1804603682),a=l(a,i,n,r,e[o+13],12,-40341101),r=l(r,a,i,n,e[o+14],17,-1502002290),i=h(i,n=l(n,r,a,i,e[o+15],22,1236535329),r,a,e[o+1],5,-165796510),a=h(a,i,n,r,e[o+6],9,-1069501632),r=h(r,a,i,n,e[o+11],14,643717713),n=h(n,r,a,i,e[o+0],20,-373897302),i=h(i,n,r,a,e[o+5],5,-701558691),a=h(a,i,n,r,e[o+10],9,38016083),r=h(r,a,i,n,e[o+15],14,-660478335),n=h(n,r,a,i,e[o+4],20,-405537848),i=h(i,n,r,a,e[o+9],5,568446438),a=h(a,i,n,r,e[o+14],9,-1019803690),r=h(r,a,i,n,e[o+3],14,-187363961),n=h(n,r,a,i,e[o+8],20,1163531501),i=h(i,n,r,a,e[o+13],5,-1444681467),a=h(a,i,n,r,e[o+2],9,-51403784),r=h(r,a,i,n,e[o+7],14,1735328473),i=f(i,n=h(n,r,a,i,e[o+12],20,-1926607734),r,a,e[o+5],4,-378558),a=f(a,i,n,r,e[o+8],11,-2022574463),r=f(r,a,i,n,e[o+11],16,1839030562),n=f(n,r,a,i,e[o+14],23,-35309556),i=f(i,n,r,a,e[o+1],4,-1530992060),a=f(a,i,n,r,e[o+4],11,1272893353),r=f(r,a,i,n,e[o+7],16,-155497632),n=f(n,r,a,i,e[o+10],23,-1094730640),i=f(i,n,r,a,e[o+13],4,681279174),a=f(a,i,n,r,e[o+0],11,-358537222),r=f(r,a,i,n,e[o+3],16,-722521979),n=f(n,r,a,i,e[o+6],23,76029189),i=f(i,n,r,a,e[o+9],4,-640364487),a=f(a,i,n,r,e[o+12],11,-421815835),r=f(r,a,i,n,e[o+15],16,530742520),i=p(i,n=f(n,r,a,i,e[o+2],23,-995338651),r,a,e[o+0],6,-198630844),a=p(a,i,n,r,e[o+7],10,1126891415),r=p(r,a,i,n,e[o+14],15,-1416354905),n=p(n,r,a,i,e[o+5],21,-57434055),i=p(i,n,r,a,e[o+12],6,1700485571),a=p(a,i,n,r,e[o+3],10,-1894986606),r=p(r,a,i,n,e[o+10],15,-1051523),n=p(n,r,a,i,e[o+1],21,-2054922799),i=p(i,n,r,a,e[o+8],6,1873313359),a=p(a,i,n,r,e[o+15],10,-30611744),r=p(r,a,i,n,e[o+6],15,-1560198380),n=p(n,r,a,i,e[o+13],21,1309151649),i=p(i,n,r,a,e[o+4],6,-145523070),a=p(a,i,n,r,e[o+11],10,-1120210379),r=p(r,a,i,n,e[o+2],15,718787259),n=p(n,r,a,i,e[o+9],21,-343485551),i=_(i,s),n=_(n,c),r=_(r,d),a=_(a,u)}return Array(i,n,r,a)}(function(e){for(var t=Array(),i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}(e),8*e.length))}},function(e,t,i){var s=i(24),c=i(88),d=i(76),u=i(161),n=i(175),i=i(109),r=i.get,l=i.enforce,h=String(String).split("String");(e.exports=function(e,t,i,n){var r=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,o=!!n&&!!n.noTargetGet;"function"==typeof i&&("string"!=typeof t||d(i,"name")||c(i,"name",t),(n=l(i)).source||(n.source=h.join("string"==typeof t?t:""))),e!==s?(r?!o&&e[t]&&(a=!0):delete e[t],a?e[t]=i:c(e,t,i)):a?e[t]=i:u(t,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&r(this).source||n(this)})},function(e,t,i){"use strict";function n(){0===s&&(clearTimeout(s),s=setTimeout(function(){for(var e in s=0,a)d.setItem(e,a[e]),delete a[e];for(var t in o)d.removeItem(t),delete o[t]},1e3))}var r={},a={},o={},s=0,c={getItem:function(e){return r[e]},setItem:function(e,t){r[e]=t},removeItem:function(e){delete r[e]}},d=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return c}();t.a={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return r[e]||(r[e]=d.getItem(e)),r[e]},write:function(e,t){r[e]=t,a[e]=t,n()},remove:function(e){delete r[e],o[e]=0,n()}}},function(e,t,i){e.exports=i(363)},function(e,t,i){var n=i(47),r=i(50),a=i(120);e.exports=n?function(e,t,i){return r.f(e,t,a(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,i){"use strict";var n=i(22),l=i(119),h=i(93),f=i(44),p=i(81),_=i(164),g=i(144),i=i(130)("splice"),y=Math.max,v=Math.min;n({target:"Array",proto:!0,forced:!i},{splice:function(e,t){var i,n,r,a,o,s,c=p(this),d=f(c.length),u=l(e,d),e=arguments.length;if(0===e?i=n=0:n=1===e?(i=0,d-u):(i=e-2,v(y(h(t),0),d-u)),9007199254740991<d+i-n)throw TypeError("Maximum allowed length exceeded");for(r=_(c,n),a=0;a<n;a++)(o=u+a)in c&&g(r,a,c[o]);if(i<(r.length=n)){for(a=u;a<d-n;a++)s=a+i,(o=a+n)in c?c[s]=c[o]:delete c[s];for(a=d;d-n+i<a;a--)delete c[a-1]}else if(n<i)for(a=d-n;u<a;a--)s=a+i-1,(o=a+n-1)in c?c[s]=c[o]:delete c[s];for(a=0;a<i;a++)c[a+u]=arguments[a+2];return c.length=d-n+i,r}})},function(e,t,i){"use strict";t.a={LoaderState_ready:"LoaderState_ready",LoaderState_progress:"LoaderState_progress",LoaderState_done:"LoaderState_done",LoaderState_error:"LoaderState_error",LoaderState_error_dispatch:"LoaderState_error_dispatch",LoaderState_error_load:"LoaderState_error_load",LoaderState_dataRangeError:"loadDataRangeError",LoaderState_lowSpeed:"LoaderState_lowpeed",LoaderState_405:"LoaderState_405"}},function(e,t,i){var n,r=i(24),a=i(209),o=i(29),s=i(88),i=i(31),c=i("iterator"),d=i("toStringTag"),u=o.values;for(n in a){var l=r[n],h=l&&l.prototype;if(h){if(h[c]!==u)try{s(h,c,u)}catch(e){h[c]=u}if(h[d]||s(h,d,n),a[n])for(var f in o)if(h[f]!==o[f])try{s(h,f,o[f])}catch(e){h[f]=o[f]}}}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?n:i)(e)}},function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty,f="~";function r(){}function a(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");r=new a(i,n||e,r),t=f?f+t:t;return e._events[t]?e._events[t].fn?e._events[t]=[e._events[t],r]:e._events[t].push(r):(e._events[t]=r,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(f=!1)),s.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,r=new Array(n);i<n;i++)r[i]=t[i].fn;return r},s.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},s.prototype.emit=function(e,t,i,n,r,a){var o=f?f+e:e;if(!this._events[o])return!1;var s,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,r),!0;case 6:return c.fn.call(c.context,t,i,n,r,a),!0}for(h=1,s=new Array(d-1);h<d;h++)s[h-1]=arguments[h];c.fn.apply(c.context,s)}else for(var u,l=c.length,h=0;h<l;h++)switch(c[h].once&&this.removeListener(e,c[h].fn,void 0,!0),d){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,t);break;case 3:c[h].fn.call(c[h].context,t,i);break;case 4:c[h].fn.call(c[h].context,t,i,n);break;default:if(!s)for(u=1,s=new Array(d-1);u<d;u++)s[u-1]=arguments[u];c[h].fn.apply(c[h].context,s)}return!0},s.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},s.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},s.prototype.removeListener=function(e,t,i,n){e=f?f+e:e;if(!this._events[e])return this;if(!t)return c(this,e),this;var r=this._events[e];if(r.fn)r.fn!==t||n&&!r.once||i&&r.context!==i||c(this,e);else{for(var a=0,o=[],s=r.length;a<s;a++)(r[a].fn!==t||n&&!r[a].once||i&&r[a].context!==i)&&o.push(r[a]);o.length?this._events[e]=1===o.length?o[0]:o:c(this,e)}return this},s.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&c(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=f,e.exports=s.EventEmitter=s},function(e,t,i){"use strict";t.a={DisPatchStatus:"disPatch.status",LoadStatus:"cdnTaskLoader.loadStatus",DisLoadStatus:"dispatchLoader.status",CdnNodeMgrStateChange:"cdnNodeMgr.stateChange"}},function(e,t,i){"use strict";var n={1:{3:!0,37:!1,40:!0,42:!0,48:!0,50:!0},2:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},4:{3:!1,5:!1,14:!0,27:!0,28:!1,41:!1,46:!0,51:!1},5:{1:!0}};function r(e){for(var t=[],i=1;i<=64;i++)t.push(n[e][i]?1:0);return parseInt(t.reverse().join(""),2)}t.a={getFT1:function(){return r(1)},getFT2:function(){return r(2)},getFT4:function(){return r(4)},getFT5:function(){return r(5)},getM3U8FT1:function(){var e=[];n[1][37]=!0,n[1][38]=!0,n[1][50]=!0;for(var t=1;t<=64;t++)e.push(n[1][t]?1:0);return parseInt(e.reverse().join(""),2)},getMP4FT1:function(){var e=[];n[1][45]=!0,n[1][50]=!0;for(var t=1;t<=64;t++)e.push(n[1][t]?1:0);return parseInt(e.reverse().join(""),2)},hasBit:function(e,t){return n[e][t]},openBit:function(e,t){n[e][t]=!0},closeBit:function(e,t){n[e][t]=!1}}},function(e,t,i){"use strict";var n=i(193).charAt,r=i(109),i=i(236),a="String Iterator",o=r.set,s=r.getterFor(a);i(String,"String",function(e){o(this,{type:a,string:String(e),index:0})},function(){var e=s(this),t=e.string,i=e.index;return i>=t.length?{value:void 0,done:!0}:(i=n(t,i),e.index+=i.length,{value:i,done:!1})})},function(e,t,i){"use strict";t.a={locale:"cn_s",isTraditionalChinese:function(){var e=!1,t=this.locale;return e="tw_t"===t||"cn_t"===t?!0:e},isTWLocale:function(){var e=!1,t=this.locale;return e="tw_t"===t||"tw_s"===t?!0:e},local:function(){return this.locale},setLocale:function(e){this.locale=e}}},function(e,t,i){"use strict";var n,r,a,o,s=i(22),c=i(136),_=i(24),d=i(105),u=i(281),l=i(85),h=i(217),f=i(155),p=i(181),g=i(39),y=i(103),v=i(184),m=i(175),b=i(260),k=i(230),x=i(138),S=i(248).set,T=i(282),P=i(284),I=i(285),w=i(250),A=i(286),E=i(109),D=i(142),q=i(31),O=i(200),R=i(165),L=q("species"),M="Promise",C=E.get,N=E.set,B=E.getterFor(M),F=u,U=_.TypeError,j=_.document,V=_.process,W=d("fetch"),H=w.f,z=H,Y=!!(j&&j.createEvent&&_.dispatchEvent),G="function"==typeof PromiseRejectionEvent,Q="unhandledrejection",D=D(M,function(){if(m(F)===String(F)){if(66===R)return!0;if(!O&&!G)return!0}if(c&&!F.prototype.finally)return!0;if(51<=R&&/native code/.test(F))return!1;function e(e){e(function(){},function(){})}var t=F.resolve(1);return(t.constructor={})[L]=e,!(t.then(function(){})instanceof e)}),k=D||!k(function(e){F.all(e).catch(function(){})}),K=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},$=function(h,f){var p;h.notified||(h.notified=!0,p=h.reactions,T(function(){for(var n,e=h.value,t=1==h.state,i=0;p.length>i;){var r,a,o,s=p[i++],c=t?s.ok:s.fail,d=s.resolve,u=s.reject,l=s.domain;try{c?(t||(2===h.rejection&&function(t){S.call(_,function(){var e=t.facade;O?V.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)})}(h),h.rejection=1),!0===c?r=e:(l&&l.enter(),r=c(e),l&&(l.exit(),o=!0)),r===s.promise?u(U("Promise-chain cycle")):(a=K(r))?a.call(r,d,u):d(r)):u(e)}catch(e){l&&!o&&l.exit(),u(e)}}h.reactions=[],h.notified=!1,f&&!h.rejection&&(n=h,S.call(_,function(){var e,t=n.facade,i=n.value;if(X(n)&&(e=A(function(){O?V.emit("unhandledRejection",i,t):Z(Q,t,i)}),n.rejection=O||X(n)?2:1,e.error))throw e.value}))}))},Z=function(e,t,i){var n,r;Y?((n=j.createEvent("Event")).promise=t,n.reason=i,n.initEvent(e,!1,!0),_.dispatchEvent(n)):n={promise:t,reason:i},!G&&(r=_["on"+e])?r(n):e===Q&&I("Unhandled promise rejection",i)},X=function(e){return 1!==e.rejection&&!e.parent},J=function(t,i,n){return function(e){t(i,e,n)}},ee=function(e,t,i){e.done||(e.done=!0,(e=i?i:e).value=t,e.state=2,$(e,!0))},te=function(i,e,t){if(!i.done){i.done=!0,t&&(i=t);try{if(i.facade===e)throw U("Promise can't be resolved itself");var n=K(e);n?T(function(){var t={done:!1};try{n.call(e,J(te,t,i),J(ee,t,i))}catch(e){ee(t,e,i)}}):(i.value=e,i.state=1,$(i,!1))}catch(e){ee({done:!1},e,i)}}};D&&(F=function(e){v(this,F,M),y(e),n.call(this);var t=C(this);try{e(J(te,t),J(ee,t))}catch(e){ee(t,e)}},(n=function(e){N(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(F.prototype,{then:function(e,t){var i=B(this),n=H(x(this,F));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?V.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&$(i,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new n,t=C(e);this.promise=e,this.resolve=J(te,t),this.reject=J(ee,t)},w.f=H=function(e){return e===F||e===a?new r:z(e)},c||"function"!=typeof u||(o=u.prototype.then,l(u.prototype,"then",function(e,t){var i=this;return new F(function(e,t){o.call(i,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof W&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return P(F,W.apply(_,arguments))}}))),s({global:!0,wrap:!0,forced:D},{Promise:F}),f(F,M,!1,!0),p(M),a=d(M),s({target:M,stat:!0,forced:D},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:c||D},{resolve:function(e){return P(c&&this===a?F:this,e)}}),s({target:M,stat:!0,forced:k},{all:function(e){var s=this,t=H(s),c=t.resolve,d=t.reject,i=A(function(){var n=y(s.resolve),r=[],a=0,o=1;b(e,function(e){var t=a++,i=!1;r.push(void 0),o++,n.call(s,e).then(function(e){i||(i=!0,r[t]=e,--o||c(r))},d)}),--o||c(r)});return i.error&&d(i.value),t.promise},race:function(e){var i=this,n=H(i),r=n.reject,t=A(function(){var t=y(i.resolve);b(e,function(e){t.call(i,e).then(n.resolve,r)})});return t.error&&r(t.value),n.promise}})},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(364),r=i(365),a=i(279),o=i(366);e.exports=function(e){return n(e)||r(e)||a(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){var n=i(134),r=i(89);e.exports=function(e){return n(r(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,i){var b=i(135),k=i(134),x=i(81),S=i(44),T=i(164),P=[].push,i=function(h){var f=1==h,p=2==h,_=3==h,g=4==h,y=6==h,v=7==h,m=5==h||y;return function(e,t,i,n){for(var r,a,o=x(e),s=k(o),c=b(t,i,3),d=S(s.length),u=0,n=n||T,l=f?n(e,d):p||v?n(e,0):void 0;u<d;u++)if((m||u in s)&&(a=c(r=s[u],u,o),h))if(f)l[u]=a;else if(a)switch(h){case 3:return!0;case 5:return r;case 6:return u;case 2:P.call(l,r)}else switch(h){case 4:return!1;case 7:P.call(l,r)}return y?-1:_||g?g:l}};e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6),filterOut:i(7)}},function(e,t,i){function n(e){return"function"==typeof e?e:void 0}var r=i(206),a=i(24);e.exports=function(e,t){return arguments.length<2?n(r[e])||n(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},,function(e,t,i){"use strict";function n(e){var t,i,n,r,a,o,s,c=l(e,!1);if("string"==typeof c&&2<c.length)if(43===(t=(c=y(c)).charCodeAt(0))||45===t){if(88===(e=c.charCodeAt(2))||120===e)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+c}for(a=(r=c.slice(2)).length,o=0;o<a;o++)if((s=r.charCodeAt(o))<48||n<s)return NaN;return parseInt(r,i)}return+c}var r=i(47),a=i(24),o=i(142),s=i(85),c=i(76),d=i(100),u=i(180),l=i(121),h=i(23),f=i(122),p=i(129).f,_=i(111).f,g=i(50).f,y=i(137).trim,v="Number",m=a.Number,b=m.prototype,k=d(f(b))==v;if(o(v,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var x,S=function(e){var e=arguments.length<1?0:e,t=this;return t instanceof S&&(k?h(function(){b.valueOf.call(t)}):d(t)!=v)?u(new m(n(e)),t,S):n(e)},T=r?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),P=0;T.length>P;P++)c(m,x=T[P])&&!c(S,x)&&g(S,x,_(m,x));(S.prototype=b).constructor=S,s(a,v,S)}},function(e,t,i){"use strict";i.d(t,"f",function(){return q}),i.d(t,"d",function(){return O}),i.d(t,"c",function(){return R}),i.d(t,"b",function(){return L}),i.d(t,"a",function(){return C}),i.d(t,"e",function(){return N}),i(9);var n,r,a,o=i(2),s=i.n(o),t=i(3),c=i.n(t),o=i(4),d=i.n(o),t=i(5),u=i.n(t),o=i(1),l=i.n(o),h=(i(82),i(10),i(19),i(139),i(27),i(593)),f=i(202),y=i(51),p=i(382),_=i(615),t=i(94),v=i(242),o=i(124),m=i.n(o),o=(i(270),i(169),i(99),i(25),i(399),i(267),i(46),i(107),i(115),i(204),i(87)),b=i.n(o),k=i(254),g=i(152),x=(c()(T,[{key:"destroy",value:function(){this.abort(),this.url=this.controller=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.controller,t=this.stats;this._resetTimer(),t&&(t.isTimeout?t.aborted=!1:t.aborted=!0),e&&!e.signal.aborted&&e.abort(),t&&t.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_parseRes",value:(a=m()(b.a.mark(function e(t,i){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="arraybuffer"===e.t0?3:"json"===e.t0?7:11;break;case 3:return e.next=5,i.arrayBuffer();case 5:return n=e.sent,e.abrupt("break",14);case 7:return e.next=9,i.json();case 9:return n=e.sent,e.abrupt("break",14);case 11:return e.next=13,i.text();case 13:n=e.sent;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"_initReqTimeout",value:function(){var e=this.context;this.stats,0<e.retryParameters.timeout&&(clearTimeout(this._requestTimeout),this._requestTimeout=setTimeout(this._onTimeout.bind(this),e.retryParameters.timeout))}},{key:"_doLoad",value:(r=m()(b.a.mark(function e(){var r,t,i,n,a,o,s,c,d,u,l,h,f,p,_,g;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){return i.retry>=t.retryParameters.maxRetry||400<=o&&o<499},t=(r=this).context,i=this.stats,n=this.speedSampler,a=this.url,c=0,d=t.callbacks,p=this.controller=new AbortController,i.requestStartMark=performance.now(),r._initReqTimeout(),e.prev=8,l=a,p={method:t.method,headers:t.headers||new Headers,body:t.body||void 0,mode:"cors",credentials:t.allowCrossSiteCredentials?"include":"same-origin",signal:p.signal,cache:"no-store"},e.next=13,k.a.fetch(l,p);case 13:if(s=e.sent,!(200<=(o=s.status)&&o<300)){e.next=34;break}if(d.onProgress)return h=s.clone().body.getReader(),(_=s.headers.get("Content-Length"))&&parseInt(_,10),f=function(){var t=m()(b.a.mark(function e(t){var i,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(i){h.read().then(function(e){var t=e.done,e=e.value;i({done:t,value:e})},function(e){i({done:!0})})});case 2:if(i=e.sent,clearTimeout(r._requestTimeout),!i.done){e.next=8;break}t&&t.close(),e.next=14;break;case 8:return(n=ArrayBuffer.isView(i.value)?i.value.buffer:null)&&(c+=n.byteLength),r._onProgress(n),t&&t.enqueue(n),e.next=14,f();case 14:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),e.next=23,f();e.next=23;break;case 23:if(d.onSuccess)return e.next=26,r._parseRes(t.responseType,s);e.next=32;break;case 26:p=e.sent,_=performance.now()-i.requestStartMark,g=null,this.netType===v.a.SEGMENT&&(g=Number((p.byteLength/(_/1e3)).toFixed(3))),g={netCost:_,speed:g,url:a,data:p,status:o},i.aborted||(p&&n.sample(p.byteLength-c),d.onSuccess(g,i,t),this._onComplete(),i.dump=!0);case 32:e.next=48;break;case 34:if(!u()){e.next=47;break}if(!i.isTimeout){e.next=39;break}d.onTimeout&&d.onTimeout(i,t,{status:o,url:a}),e.next=44;break;case 39:if(d.onError)return e.next=42,r._parseRes(t.responseType,s);e.next=44;break;case 42:g=e.sent,i.aborted||d.onError({status:o,url:a,response:g},t);case 44:this._onComplete(),e.next=48;break;case 47:this._retry();case 48:e.next=54;break;case 50:e.prev=50,e.t0=e.catch(8),(e.t0 instanceof RangeError||e.t0 instanceof ReferenceError||e.t0 instanceof SyntaxError||e.t0 instanceof TypeError||e.t0 instanceof URIError)&&y.a.error("fetch ".concat(e.t0.constructor.name,": ").concat(e.t0.stack||e.t0.message||e.t0));try{i.aborted||(u()?(i.isTimeout?d.onTimeout&&d.onTimeout(i,t,{status:o,url:a}):d.onError&&d.onError({code:o,response:null,error:e.t0},t),this._onComplete()):this._retry())}catch(e){y.a.error(e.stack||e.message||e)}case 54:return e.abrupt("return",this);case 55:case"end":return e.stop()}},e,this,[[8,50]])})),function(){return r.apply(this,arguments)})},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onTimeout",value:function(){this.context,this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t=this.context,i=this.stats,t=t.callbacks;(Object(g.k)(e)||Object(g.a)(e))&&this.speedSampler.sample(e.byteLength),t.onProgress(e,i),i.dump=!0}},{key:"_onAbort",value:function(){var e=this.context;e.completed||((e=e.callbacks).onAbort&&e.onAbort(),this._onComplete())}},{key:"_onComplete",value:function(){var e,t=this.context;t&&!t.completed&&(e=t.callbacks,t.completed=!0,this.speedSampler.reset(),y.a.log("fetch onComplete"),this._resetTimer(),e.onComplete&&e.onComplete())}}],[{key:"isSupported",value:function(){if("boolean"!=typeof n){var e=!!k.a.fetch,t=!!k.a.AbortController,i=!0;if(k.a.ReadableStream)try{new ReadableStream({})}catch(e){i=!1}else i=!1;n=e&&i&&t}return n}}]),T),S=(i(580),i(404));function T(e,t,i){s()(this,T),this.netType=e,this.context=t,this.speedSampler=i}var P,I=performance&&performance.now?performance.now.bind(performance):Date.now,w=function(e){d()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return s()(this,r),(e=t.apply(this,arguments)).tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0,e.resetTimer_=new S.a(function(){e.tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0}),e}return c()(r,[{key:"averageBps",get:function(){if(null===this.bytesAll||null===this.tInit)return 0;var e=(I()-this.tInit)/1e3;return this.bytesAll/e}},{key:"reset",value:function(){this.resetTimer_.schedule(1)}},{key:"sample",value:function(e){var t,i=I();null===this.tInit?(this.tInit=i,this.tLastArrivedSecond=i,this.bytesInSecond=e):((t=(i-this.tLastArrivedSecond)/1e3)<1?this.bytesInSecond+=e:(this.bytesInSecond=e,this.tLastArrivedSecond=i),.5<(t=0==t?1:t)&&(t=this.bytesInSecond/t||0,this.bandwidth=Math.floor(Math.max(t,this.bandwidth||0))||null,this.emit("estimate",{downloadSpeed:t,bandwidth:Math.floor(Math.max(this.downloadSpeed,this.bandwidth||0))||null})))}}]),r}(t.EventEmitter),A=(i(127),i(48),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(29),"moz-chunked-arraybuffer"),E=(c()(D,[{key:"destroy",value:function(){this.abort(),this.url=this.loader=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.stats,t=this.loader;this._resetTimer(),e&&(e.isTimeout?e.aborted=!1:e.aborted=!0),t&&4!==t.readyState?t.abort():this._onAbort(),e&&e.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_doLoad",value:function(){var e=this.url,t=this.context,i=this.stats,n=this.netType,r=t.headers,a=this.loader=new XMLHttpRequest;if(i.requestStartMark=performance.now(),a.open(t.method,e,!0),0<t.retryParameters.timeout&&(this._requestTimeout=setTimeout(this._onTimeout.bind(this),t.retryParameters.timeout)),a.withCredentials=!!t.allowCrossSiteCredentials,a.onload=this._onLoad.bind(this),a.onprogress=this._onProgress.bind(this),r)if(r instanceof Headers)r.forEach?r.forEach(function(e,t){t=t.toLowerCase();a.setRequestHeader(t,e)}):y.a.warn("Native Headers mismatch forEach");else for(var o in r){var s=o.toLowerCase();a.setRequestHeader(s,t.headers[o])}return a.responseType=t.responseType||"arraybuffer",n===v.a.SEGMENT&&"arraybuffer"===a.responseType&&D.isMozChunkedSupported()&&(a.responseType=A),a.send(t.body),this}},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onLoad",value:function(e){var t,i,n=this.context,r=this.stats,a=this.url,o=e.currentTarget,s=o.status,c=n.callbacks;r.aborted?this._onAbort():(clearTimeout(this._requestTimeout),200<=s&&s<300?(t=o.response,i=performance.now()-r.requestStartMark,e=null,o.responseType===A&&(t=n.totalBuffer),c.onSuccess&&((Object(g.k)(t)||Object(g.a)(t))&&(e=Number(t.byteLength/(i/1e3)),this.speedSampler.sample(t.byteLength)),c.onSuccess({netCost:i,speed:e,status:s,data:t,url:a},r,n)),this._onComplete(),r.dump=!0):r.retry>=n.retryParameters.maxRetry||400<=s&&s<499?(r.isTimeout?c.onTimeout&&c.onTimeout(r,n,{status:s,url:a}):c.onError&&c.onError({status:s,response:o.response,url:a},n),this._onComplete()):this._retry())}},{key:"_onTimeout",value:function(){this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t,i,n,r=this.context,a=this.stats,o=(this.loader,r.callbacks);e.lengthComputable&&(a.loaded?(n=e.loaded-a.loaded,this.speedSampler.sample(n)):n=e.loaded,this.speedSampler.sample(n||0),a.loaded=e.loaded,a.total=e.total),o.onProgress&&this.netType===v.a.SEGMENT&&D.isMozChunkedSupported()&&((t=e.target?e.target.response:null)&&(i=new Uint8Array(t),n=r.totalBuffer?new Uint8Array(r.totalBuffer):new Uint8Array(0),(e=new Uint8Array(n.byteLength+i.byteLength)).set(n,0),e.set(i,n.byteLength),r.totalBuffer=e.buffer),t&&((Object(g.k)(t)||Object(g.a)(t))&&this.speedSampler.sample(t.byteLength),o.onProgress(t,a),a.dump=!0))}},{key:"_onAbort",value:function(){var e=this.context;e&&!e.completed&&((e=e.callbacks).onAbort&&e.onAbort(),this._onComplete())}},{key:"_onComplete",value:function(){var e,t=this.context;t&&!t.completed&&(e=t.callbacks,t.completed=!0,t.totalBuffer=null,this.speedSampler.reset(),this._resetTimer(),e.onComplete&&e.onComplete())}}],[{key:"isMozChunkedSupported",value:function(){if("boolean"!=typeof P)if(/firefox/gi.test(navigator.userAgent.toLowerCase())){var e=new XMLHttpRequest;try{e.responseType=A}catch(e){}P=e.responseType===A}else P=!1;return P}}]),D);function D(e,t,i){s()(this,D),this.netType=e,this.context=t,this.speedSampler=i}var q=location.protocol;function O(e,t){return{uris:e,method:"GET",headers:new Headers,body:null,responseType:"arraybuffer",allowCrossSiteCredentials:!1,retryParameters:t,callbacks:{onSuccess:function(e){},onError:function(){},onTimeout:function(e,t,i){},onAbort:function(){},onComplete:function(){}}}}function R(){return x.isSupported()||E.isMozChunkedSupported()}function L(){return{maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0}}function M(e,t,i){i[e]={loader:t}}var C=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(t){var e;return s()(this,a),(e=r.call(this)).schemes_={},e.krt_=t,e.speedSampler_=new w,x.isSupported()?(M("http",x,e.schemes_),M("https",x,e.schemes_)):(M("http",E,e.schemes_),M("https",E,e.schemes_)),e.speedSampler_.on("estimate",function(e){t&&Object(f.a)(t.ctx.stats,e)}),e}return c()(a,[{key:"setRuntime",value:function(e){e&&(this.krt_=e)}},{key:"unsetRuntime",value:function(){this.krt_=null}},{key:"request",value:function(e,t){var i=this.krt_,n=this.schemes_,r=this.speedSampler_;t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=Object(f.a)({maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0},t.retryParameters),t.uris=Object(f.a)({},t.uris);var a=new _.a(t.uris[0]),o=a.scheme,s=a.domain;if(o||(o=q.slice(0,-1),a.setScheme(o),t.uris[0]=a.toString()),e===v.a.SEGMENT&&i){if("http"===o&&/^https/gi.test(q))return y.a.warn("HTTP request in HTTPS Page: ".concat(a.toString())),void this.krt_.throwError(new h.a(h.a.severity.CRITICAL,h.a.category.NETWORK,p.a.NET_HTTPS_UNMATCHED_HTTP_SCHEME,a));i.ctx.stats.cdnHost=s,i.ctx.stats.netProtocol=o}n=n[o],n=n?n.loader:null;if(!n&&i)return y.a.warn("Wrong with scheme ".concat(o,": ").concat(a.toString())),void i.throwError(new h.a(h.a.severity.CRITICAL,h.a.category.NETWORK,p.a.NET_UNSUPPORTED_SCHEME,a));r=new n(e,t,r);return r.load(t.uris[0]),r}}]),a}(t.EventEmitter),N=new C},function(e,t,i){var n,r,a,o,s,c,d,u,l=i(231),h=i(24),f=i(39),p=i(88),_=i(76),g=i(162),y=i(173),i=i(148),h=h.WeakMap;d=l?(n=g.state||(g.state=new h),r=n.get,a=n.has,o=n.set,s=function(e,t){return t.facade=e,o.call(n,e,t),t},c=function(e){return r.call(n,e)||{}},function(e){return a.call(n,e)}):(i[u=y("state")]=!0,s=function(e,t){return t.facade=e,p(e,u,t),t},c=function(e){return _(e,u)?e[u]:{}},function(e){return _(e,u)}),e.exports={set:s,get:c,has:d,enforce:function(e){return d(e)?c(e):s(e,{})},getterFor:function(i){return function(e){var t;if(!f(e)||(t=c(e)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return t}}}},function(e,t,i){var n=i(47),r=i(24),a=i(142),o=i(180),s=i(50).f,c=i(129).f,d=i(189),u=i(156),l=i(188),h=i(85),f=i(23),p=i(109).set,_=i(181),g=i(31)("match"),y=r.RegExp,v=y.prototype,m=/a/g,b=/a/g,k=new y(m)!==m,x=l.UNSUPPORTED_Y;if(n&&a("RegExp",!k||x||f(function(){return b[g]=!1,y(m)!=m||y(b)==b||"/a/i"!=y(m,"i")}))){for(var S=function(e,t){var i,n=this instanceof S,r=d(e),a=void 0===t;if(!n&&r&&e.constructor===S&&a)return e;k?r&&!a&&(e=e.source):e instanceof S&&(a&&(t=u.call(e)),e=e.source),x&&(i=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,""));n=o(k?new y(e,t):y(e,t),n?this:v,S);return x&&i&&p(n,{sticky:i}),n},T=c(y),P=0;T.length>P;)!function(t){t in S||s(S,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})}(T[P++]);(v.constructor=S).prototype=v,h(r,"RegExp",S)}_("RegExp")},function(e,t,i){var n=i(47),r=i(205),a=i(120),o=i(102),s=i(121),c=i(76),d=i(191),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=o(e),t=s(t,!0),d)try{return u(e,t)}catch(e){}if(c(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t,i){"use strict";var n=i(22),r=i(104).map;n({target:"Array",proto:!0,forced:!i(130)("map")},{map:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,i){"use strict";i(43),i(17),i(107);var n,r=i(14),a="-1",i={get:function(){if(n)a=n.tryGetFingerPrint();else{if("-1"===a)try{a=r.a.get("__dfp")}catch(e){a=""}var e,t;""!==a&&(e=a.split("@"),t=(new Date).getTime(),3==e.length&&Number(e[2])<=t&&t<=Number(e[1])&&(a=e[0]))}return a},setSDK:function(e){n=e}};t.a=i},function(e,t,i){"use strict";i(146),i(17),i(334),i(43),i(45),i(26),i(110),i(19);function n(e){var t="",i="",n="",r="";return(e=e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/))&&(t=e[1],i=e[2],n=e[3],r=e[4]),{protocol:t,host:i,port:n,path:r}}t.a={parse:n,query:function(e,t){1===arguments.length&&(t=e,e=window.location.href);t=String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1"),t=new RegExp("(^|&|\\?|#)"+t+"=([^&#]*)(&|$|#)",""),t=e.match(t);return t?t[2]:""},query2Json:function(e){for(var t,i,n=e.substr(e.lastIndexOf("?")+1).split("&"),r=n.length,a={},o=0;o<r;o++)n[o]&&(t=(i=n[o].split("=")).shift(),i=i.join("="),void 0===a[t]&&(a[t]=i));return a},filename:function(e){e=n(e);return(e&&e.path||"").replace(/^.*[\\\/]/,"").split(".")[0]}}},function(e,t,i){"use strict";function c(e,t,i){return 0===t?i:t%2==1?c(e,t-1,i*e):c(e*e,t/2,i)}function d(e,t,i){for(var n=-1,r=i;++n<6;)r+=t*e[n],e[n]=r%1e7,r=a(r/1e7)}function u(e,t){for(var i=6,n=0;0<=--i;)n+=e[i],e[i]=a(n/t),n=n%t*1e7}function l(e){for(var t,i=6,n="";0<=--i;)""===n&&0!==i&&0===e[i]||(t=String(e[i]),n=""===n?t:n+p.call("0",7-t.length)+t);return n}var n=i(22),h=i(93),f=i(238),p=i(239),i=i(23),r=1..toFixed,a=Math.floor;n({target:"Number",proto:!0,forced:r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!i(function(){r.call({})})},{toFixed:function(e){var t,i,n=f(this),r=h(e),a=[0,0,0,0,0,0],o="",s="0";if(r<0||20<r)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||1e21<=n)return String(n);if(n<0&&(o="-",n=-n),1e-21<n)if(e=(i=function(){for(var e=0,t=n*c(2,69,1);4096<=t;)e+=12,t/=4096;for(;2<=t;)e+=1,t/=2;return e}()-69)<0?n*c(2,-i,1):n/c(2,i,1),e*=4503599627370496,0<(i=52-i)){for(d(a,0,e),t=r;7<=t;)d(a,1e7,0),t-=7;for(d(a,c(10,t,1),0),t=i-1;23<=t;)u(a,1<<23),t-=23;u(a,1<<t),d(a,1,1),u(a,2),s=l(a)}else d(a,0,e),d(a,1<<-i,0),s=l(a)+p.call("0",r);return 0<r?o+((i=s.length)<=r?"0."+p.call("0",r-i)+s:s.slice(0,i-r)+"."+s.slice(i-r)):o+s}})},function(e,t,i){"use strict";var n=i(23);e.exports=function(e,t){var i=[][e];return!!i&&n(function(){i.call(null,t||function(){throw 1},1)})}},function(e,t,i){"use strict";t.a="5.2.28"},,function(e,t,i){var n=i(93),r=Math.max,a=Math.min;e.exports=function(e,t){e=n(e);return e<0?r(e+t,0):a(e,t)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var r=i(39);e.exports=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){function n(){}function r(e){return"<script>"+e+"<\/script>"}var a,o=i(35),s=i(212),c=i(163),d=i(148),u=i(208),l=i(174),h=i(173)("IE_PROTO"),f=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e;f=a?function(e){e.write(r("")),e.close();var t=e.parentWindow.Object;return e=null,t}(a):((e=l("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(r("document.F=Object")),e.close(),e.F);for(var t=c.length;t--;)delete f.prototype[c[t]];return f()};d[h]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(n.prototype=o(e),i=new n,n.prototype=null,i[h]=e):i=f(),void 0===t?i:s(i,t)}},function(e,t,a){void 0===(t=function(e,t,i){var n=a(359),r=null;i.exports={setEngine:function(e){r=e},cmd5xdash:n.cmd5xdash,cmd5x:function(){var e=r&&r.sbtr;e&&e.authkeyInvoking();var t=n.cmd5x.apply(n,arguments);return e&&e.authkeyInvoked(),t}}}.call(t,a,t,e))||(e.exports=t)},function(e,t){function c(e,t,i,n,r,a,o){try{var s=e[a](o),c=s.value}catch(e){return i(e),0}s.done?t(c):Promise.resolve(c).then(n,r)}e.exports=function(s){return function(){var e=this,o=arguments;return new Promise(function(t,i){var n=s.apply(e,o);function r(e){c(n,t,i,r,a,"next",e)}function a(e){c(n,t,i,r,a,"throw",e)}r(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){var n=i(22),i=i(234);n({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,i){var n=i(360),r=i(361),a=i(279),o=i(362);e.exports=function(e,t){return n(e)||r(e,t)||a(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){"use strict";var n=i(22),i=i(225);n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,i){"use strict";i(25);var n=i(84),r={};t.a={generate:function(e){e=parseInt(e,10);var t=Object(n.a)(e+"IQIYI"+(new Date).getTime());return r[e]=t},getEpisodeId:function(e){var t,i;for(i in r)if(r[i]===e){t=i;break}return parseInt(t,10)},getEventId:function(e){return r[e]||""}}},function(e,t,i){var n=i(192),r=i(163).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},function(e,t,i){var n=i(23),r=i(31),a=i(165),o=r("species");e.exports=function(t){return 51<=a||!n(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(e,t){e.exports="\t\n\v\f\r  \u2028\u2029\ufeff"},function(e,t,i){"use strict";var n,l=i(156),r=i(188),h=RegExp.prototype.exec,f=String.prototype.replace,a=h,p=(n=/b*/g,h.call(i=/a/,"a"),h.call(n,"a"),0!==i.lastIndex||0!==n.lastIndex),_=r.UNSUPPORTED_Y||r.BROKEN_CARET,g=void 0!==/()??/.exec("")[1];(p||g||_)&&(a=function(e){var t,i,n,r,a=this,o=_&&a.sticky,s=l.call(a),c=a.source,d=0,u=e;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),u=String(e).slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(c="(?: "+c+")",u=" "+u,d++),i=new RegExp("^(?:"+c+")",s)),g&&(i=new RegExp("^"+c+"$(?!\\s)",s)),p&&(t=a.lastIndex),n=h.call(o?i:a,u),o?n?(n.input=n.input.slice(d),n[0]=n[0].slice(d),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:p&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),g&&n&&1<n.length&&f.call(n[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)}),n}),e.exports=a},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),a=i.n(t),t=i(3),o=i.n(t),t=i(4),s=i.n(t),t=i(5),c=i.n(t),t=i(1),d=i.n(t);var n=function(e){s()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return a()(this,r),t.apply(this,arguments)}return o()(r,[{key:"pipe",value:function(t){return this.on("reset",function(){t.reset()}),this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t}},{key:"unpipe",value:function(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}},{key:"push",value:function(e){this.emit("data",e)}},{key:"flush",value:function(e){this.emit("done",e)}},{key:"reset",value:function(){this.emit("reset")}}]),r}(i(94).EventEmitter)},function(e,t,i){var n=i(23),r=i(100),a="".split;e.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?a.call(e,""):Object(e)}:Object},function(e,t,i){var a=i(103);e.exports=function(n,r,e){if(a(n),void 0===r)return n;switch(e){case 0:return function(){return n.call(r)};case 1:return function(e){return n.call(r,e)};case 2:return function(e,t){return n.call(r,e,t)};case 3:return function(e,t,i){return n.call(r,e,t,i)}}return function(){return n.apply(r,arguments)}}},function(e,t){e.exports=!1},function(e,t,i){var n=i(89),i="["+i(131)+"]",r=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),i=function(t){return function(e){e=String(n(e));return 1&t&&(e=e.replace(r,"")),e=2&t?e.replace(a,""):e}};e.exports={start:i(1),end:i(2),trim:i(3)}},function(e,t,i){var n=i(35),r=i(103),a=i(31)("species");e.exports=function(e,t){var i,e=n(e).constructor;return void 0===e||null==(i=n(e)[a])?t:r(i)}},function(e,t,i){var n=i(85),i=Date.prototype,r="Invalid Date",a=i.toString,o=i.getTime;new Date(NaN)+""!=r&&n(i,"toString",function(){var e=o.call(this);return e==e?a.call(this):r})},function(e,t,i){var n=i(22),i=i(336);n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},,function(e,t,i){var n=i(23),r=/#|\.prototype\./,i=function(e,t){e=o[a(e)];return e==c||e!=s&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(r,".").toLowerCase()},o=i.data={},s=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},function(e,t,i){var n=i(100);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){"use strict";var n=i(121),r=i(50),a=i(120);e.exports=function(e,t,i){t=n(t);t in e?r.f(e,t,a(0,i)):e[t]=i}},function(e,t,i){"use strict";var n=i(22),r=i(103),a=i(81),o=i(23),s=i(116),c=[],d=c.sort,i=o(function(){c.sort(void 0)}),o=o(function(){c.sort(null)}),s=s("sort");n({target:"Array",proto:!0,forced:i||!o||!s},{sort:function(e){return void 0===e?d.call(a(this)):d.call(a(this),r(e))}})},function(e,t,i){"use strict";var n=i(149),u=i(35),l=i(44),r=i(89),h=i(166),f=i(150);n("match",1,function(n,c,d){return[function(e){var t=r(this),i=null==e?void 0:e[n];return void 0!==i?i.call(e,t):new RegExp(e)[n](String(t))},function(e){var t=d(c,e,this);if(t.done)return t.value;var i=u(e),n=String(this);if(!i.global)return f(i,n);for(var r=i.unicode,a=[],o=i.lastIndex=0;null!==(s=f(i,n));){var s=String(s[0]);""===(a[o]=s)&&(i.lastIndex=h(n,l(i.lastIndex),r)),o++}return 0===o?null:a}]})},function(e,t,i){i(22)({target:"Array",stat:!0},{isArray:i(143)})},function(e,t){e.exports={}},function(e,t,i){"use strict";i(17);var d=i(85),u=i(23),l=i(31),h=i(132),f=i(88),p=l("species"),_=!u(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),g="$0"==="a".replace(/./,"$0"),i=l("replace"),y=!!/./[i]&&""===/./[i]("a","$0"),v=!u(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};e="ab".split(e);return 2!==e.length||"a"!==e[0]||"b"!==e[1]});e.exports=function(i,e,t,n){var a,r,o=l(i),s=!u(function(){var e={};return e[o]=function(){return 7},7!=""[i](e)}),c=s&&!u(function(){var e=!1,t=/a/;return"split"===i&&((t={}).constructor={},t.constructor[p]=function(){return t},t.flags="",t[o]=/./[o]),t.exec=function(){return e=!0,null},t[o](""),!e});s&&c&&("replace"!==i||_&&g&&!y)&&("split"!==i||v)||(a=/./[o],t=(c=t(o,""[i],function(e,t,i,n,r){return t.exec===h?s&&!r?{done:!0,value:a.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],r=c[1],d(String.prototype,i,t),d(RegExp.prototype,o,2==e?function(e,t){return r.call(e,this,t)}:function(e){return r.call(e,this)})),n&&f(RegExp.prototype[o],"sham",!0)}},function(e,t,i){var n=i(100),r=i(132);e.exports=function(e,t){var i=e.exec;if("function"==typeof i){i=i.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},function(e,t,i){"use strict";var n=i(22),r=i(104).filter;n({target:"Array",proto:!0,forced:!i(130)("filter")},{filter:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,i){"use strict";i.d(t,"e",function(){return a}),i.d(t,"i",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"c",function(){return c}),i.d(t,"a",function(){return d}),i.d(t,"k",function(){return u}),i.d(t,"g",function(){return l}),i.d(t,"d",function(){return h}),i.d(t,"j",function(){return f}),i.d(t,"h",function(){return p}),i.d(t,"f",function(){return _}),i.d(t,"l",function(){return g});var t=i(32),n=i.n(t),r=(i(147),i(153)),a=function(e){return/^https/gi.test(e||window.location.protocol)},o=function(e){return!!e&&"object"==n()(e)},s=function(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=r.a)&&!h(e);var t},c=function(e){for(var t in e)if(Object(r.e)(e,t))return!1;return!0},d=(Array.isArray,function(e){return o(e)&&"[object arraybuffer]"===r.i.call(e).toLowerCase()}),u=function(e){return o(e)&&"[object uint8array]"===r.i.call(e).toLowerCase()},l=function(e){return"number"==typeof e&&!isNaN(e)},h=function(e){return"function"==typeof e},f=function(e){return"string"==typeof e},p=function(e){return null!==e&&"object"===n()(e)},_=function(e){return"[object map]"===r.i.call(e).toLowerCase()},g="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts},function(e,t,i){"use strict";i.d(t,"i",function(){return n}),i.d(t,"c",function(){return r}),i.d(t,"g",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"h",function(){return s}),i.d(t,"e",function(){return d}),i.d(t,"b",function(){return u}),i.d(t,"d",function(){return f}),i.d(t,"j",function(){return p}),i.d(t,"f",function(){return _}),i(10),i(19),i(139),i(367);var i=Object.prototype,n=i.toString,r=Function.prototype.toString,a=r.call(Object),o=9007199254740991,s="[object Object]",c=i.hasOwnProperty,d=function(e,t){return c.call(e,t)};function u(e,t){if(e)for(var i in e)if(d(e,i)&&t(e[i],i,e))break}var l,h,f=(l=Object.getPrototypeOf,h=Object,function(e){return l(h(e))});function p(){return{}}function _(){}},,function(e,t,i){var n=i(50).f,r=i(76),a=i(31)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,i){"use strict";var n=i(35);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,i){"use strict";var n={100:{nbid:100,value:"",qipu:"jisu",obid:96},200:{nbid:200,value:"",qipu:"300",obid:1},300:{nbid:300,value:"",qipu:"600",obid:2},400:{nbid:400,value:"",qipu:"1000",obid:3},500:{nbid:500,value:"720P",qipu:"720P",obid:4},600:{nbid:600,value:"1080P",qipu:"1080P",obid:5},601:{nbid:601,value:"HDR",qipu:"HDR",obid:51},610:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},700:{nbid:700,value:"2K",qipu:"2K",obid:6},800:{nbid:800,value:"4K",qipu:"4K",obid:10},96:{nbid:100,value:"",qipu:"jisu",obid:96},1:{nbid:200,value:"",qipu:"300",obid:1},2:{nbid:300,value:"",qipu:"600",obid:2},3:{nbid:400,value:"",qipu:"1000",obid:3},4:{nbid:500,value:"720P",qipu:"720P",obid:4},5:{nbid:600,value:"1080P",qipu:"1080P",obid:5},51:{nbid:601,value:"HDR",qipu:"HDR",obid:51},27:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},6:{nbid:700,value:"2K",qipu:"2K",obid:6},10:{nbid:800,value:"4K",qipu:"4K",obid:10}};t.a={getNewVd:function(e){return n[e]?n[e].nbid:""},getOldVd:function(e){return n[e]?n[e].obid:""}}},function(e,t,i){var r=i(35),a=i(223);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,n=!1,e={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),n=e instanceof Array}catch(e){}return function(e,t){return r(e),a(t),n?i.call(e,t):e.__proto__=t,e}}():void 0)},function(e,t,i){var c=i(102),d=i(44),u=i(119),i=function(s){return function(e,t,i){var n,r=c(e),a=d(r.length),o=u(i,a);if(s&&t!=t){for(;o<a;)if((n=r[o++])!=n)return!0}else for(;o<a;o++)if((s||o in r)&&r[o]===t)return s||o||0;return!s&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},,function(e,t,i){var n=i(24),r=i(88);e.exports=function(t,i){try{r(n,t,i)}catch(e){n[t]=i}return i}},function(e,t,i){var n=i(24),r=i(161),i="__core-js_shared__",i=n[i]||r(i,{});e.exports=i},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,i){var n=i(39),r=i(143),a=i(31)("species");e.exports=function(e,t){var i;return new(void 0===(i=r(e)&&("function"==typeof(i=e.constructor)&&(i===Array||r(i.prototype))||n(i)&&null===(i=i[a]))?void 0:i)?Array:i)(0===t?0:t)}},function(e,t,i){var n,r,a=i(24),i=i(182),a=a.process,a=a&&a.versions,a=a&&a.v8;a?r=(n=a.split("."))[0]+n[1]:i&&(!(n=i.match(/Edge\/(\d+)/))||74<=n[1])&&(n=i.match(/Chrome\/(\d+)/))&&(r=n[1]),e.exports=r&&+r},function(e,t,i){"use strict";var n=i(193).charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},function(e,t,i){var n={};n[i(31)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t,i){"use strict";var n=i(22),r=i(137).trim;n({target:"String",proto:!0,forced:i(240)("trim")},{trim:function(){return r(this)}})},function(e,t,i){i(22)({target:"Function",proto:!0},{bind:i(220)})},function(e,t,i){var n=i(167),r=i(100),a=i(31)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=n?r:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?e:o?r(t):"Object"==(e=r(t))&&"function"==typeof t.callee?"Arguments":e}},,function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++i+n).toString(36)}},function(e,t,i){var n=i(186),r=i(172),a=n("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t,i){var n=i(24),i=i(39),r=n.document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,i){var i=i(162),n=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return n.call(e)}),e.exports=i.inspectSource},function(e,t,i){var n=i(192),r=i(163);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t,i){var n=i(22),r=i(81),a=i(176);n({target:"Object",stat:!0,forced:i(23)(function(){a(1)})},{keys:function(e){return a(r(e))}})},function(e,t){e.exports={}},function(e,t,i){var n=i(76),r=i(81),a=i(173),i=i(263),o=a("IE_PROTO"),s=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=r(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,i){var a=i(39),o=i(158);e.exports=function(e,t,i){var n,r;return o&&"function"==typeof(n=t.constructor)&&n!==i&&a(r=n.prototype)&&r!==i.prototype&&o(e,r),e}},function(e,t,i){"use strict";var n=i(105),r=i(50),a=i(31),o=i(47),s=a("species");e.exports=function(e){var t=n(e),e=r.f;o&&t&&!t[s]&&e(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,i){i=i(105);e.exports=i("navigator","userAgent")||""},function(e,t,i){"use strict";i(82),i(25);var n=i(30),o={};t.a={get:function(e,a){var t=e.tvid,i=e.locale,e=t;o[e]=o[e]||[],o[e].push(a),t&&a&&(t="//pcw-api.iqiyi.com/video/video/playervideoinfo?tvid="+t,n.a.jsonp({url:t=i?t+"&locale="+i:t,memory:!0,success:function(e){"A00000"===e.code&&e.data||a({});var t=(e=e.data).tvid,i=e.videoQipuId,n=[];o[t]?(n=(o[t]||[]).slice(0),delete o[t]):o[i]&&(n=(o[i]||[]).slice(0),delete o[i]);for(var r=0;r<n.length;r++)n[r]&&function(e,t){setTimeout(function(){e({tvid:t.videoQipuId,vid:t.vid,albumId:t.albumId,cid:t.cid,vi:t,sid:t.sid,cType:t.cType})},0)}(n[r],e)},failure:function(e){a(e||{})}}))},isUGC:function(e){return!!((e+="")&&2<e.length&&"9"==e.charAt(e.length-1)&&"0"==e.charAt(e.length-2)&&0<(e=parseInt(e,10))&&9e7<e)}}},function(e,t){e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e}},function(e,t,i){"use strict";function n(e,t){var i=te[e]=T(K.prototype);return Y(i,{type:z,tag:e,description:t}),h||(i.description=t),i}function r(e,t,i){return e===Q&&r(ie,t,i),m(e),t=x(t,!0),m(i),g(te,t)?(i.enumerable?(g(e,H)&&e[H][t]&&(e[H][t]=!1),i=T(i,{enumerable:S(0,!1)})):(g(e,H)||X(e,H,S(1,{})),e[H][t]=!0),oe(e,t,i)):X(e,t,i)}function a(t,e){m(t);var i=k(e),e=P(i).concat(s(i));return W(e,function(e){h&&!o.call(i,e)||r(t,e,i[e])}),t}function o(e){var t=x(e,!0),e=ee.call(this,t);return!(this===Q&&g(te,t)&&!g(ie,t))&&(!(e||!g(this,t)||!g(te,t)||g(this,H)&&this[H][t])||e)}function s(e){var t=e===Q,e=J(t?ie:k(e)),i=[];return W(e,function(e){!g(te,e)||t&&!g(Q,e)||i.push(te[e])}),i}var c=i(22),d=i(24),u=i(105),l=i(136),h=i(47),f=i(187),p=i(222),_=i(23),g=i(76),y=i(143),v=i(39),m=i(35),b=i(81),k=i(102),x=i(121),S=i(120),T=i(122),P=i(176),I=i(129),w=i(559),A=i(207),E=i(111),D=i(50),q=i(205),O=i(88),R=i(85),L=i(186),M=i(173),C=i(148),N=i(172),B=i(31),F=i(388),U=i(389),j=i(155),V=i(109),W=i(104).forEach,H=M("hidden"),z="Symbol",M=B("toPrimitive"),Y=V.set,G=V.getterFor(z),Q=Object.prototype,K=d.Symbol,$=u("JSON","stringify"),Z=E.f,X=D.f,J=w.f,ee=q.f,te=L("symbols"),ie=L("op-symbols"),ne=L("string-to-symbol-registry"),re=L("symbol-to-string-registry"),L=L("wks"),d=d.QObject,ae=!d||!d.prototype||!d.prototype.findChild,oe=h&&_(function(){return 7!=T(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=Z(Q,t);n&&delete Q[t],X(e,t,i),n&&e!==Q&&X(Q,t,n)}:X,se=p?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof K},d=function(e,t){var i=k(e),e=x(t,!0);if(i!==Q||!g(te,e)||g(ie,e)){t=Z(i,e);return!t||!g(te,e)||g(i,H)&&i[H][e]||(t.enumerable=!0),t}},p=function(e){var e=J(k(e)),t=[];return W(e,function(e){g(te,e)||g(C,e)||t.push(e)}),t};f||(R((K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=N(e),i=function(e){this===Q&&i.call(ie,e),g(this,H)&&g(this[H],t)&&(this[H][t]=!1),oe(this,t,S(1,e))};return h&&ae&&oe(Q,t,{configurable:!0,set:i}),n(t,e)}).prototype,"toString",function(){return G(this).tag}),R(K,"withoutSetter",function(e){return n(N(e),e)}),q.f=o,D.f=r,E.f=d,I.f=w.f=p,A.f=s,F.f=function(e){return n(B(e),e)},h&&(X(K.prototype,"description",{configurable:!0,get:function(){return G(this).description}}),l||R(Q,"propertyIsEnumerable",o,{unsafe:!0}))),c({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:K}),W(P(L),function(e){U(e)}),c({target:z,stat:!0,forced:!f},{for:function(e){var t=String(e);if(g(ne,t))return ne[t];e=K(t);return ne[t]=e,re[e]=t,e},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(g(re,e))return re[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),c({target:"Object",stat:!0,forced:!f,sham:!h},{create:function(e,t){return void 0===t?T(e):a(T(e),t)},defineProperty:r,defineProperties:a,getOwnPropertyDescriptor:d}),c({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:p,getOwnPropertySymbols:s}),c({target:"Object",stat:!0,forced:_(function(){A.f(1)})},{getOwnPropertySymbols:function(e){return A.f(b(e))}}),$&&c({target:"JSON",stat:!0,forced:!f||_(function(){var e=K();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))})},{stringify:function(e,t,i){for(var n,r=[e],a=1;a<arguments.length;)r.push(arguments[a++]);if((v(n=t)||void 0!==e)&&!se(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!se(t))return t}),r[1]=t,$.apply(null,r)}}),K.prototype[M]||O(K.prototype,M,K.prototype.valueOf),j(K,z),C[H]=!0},function(e,t,i){var n=i(136),r=i(162);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:n?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){i=i(23);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(e,t,i){"use strict";i=i(23);function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i(function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),t.BROKEN_CARET=i(function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},function(e,t,i){var n=i(39),r=i(100),a=i(31)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},function(e,t,i){var n=i(31),r=i(122),i=i(50),a=n("unscopables"),o=Array.prototype;null==o[a]&&i.f(o,a,{configurable:!0,value:r(null)}),e.exports=function(e){o[a][e]=!0}},function(e,t,i){var n=i(47),r=i(23),a=i(174);e.exports=!n&&!r(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var o=i(76),s=i(102),c=i(159).indexOf,d=i(148);e.exports=function(e,t){var i,n=s(e),r=0,a=[];for(i in n)!o(d,i)&&o(n,i)&&a.push(i);for(;t.length>r;)o(n,i=t[r++])&&(~c(a,i)||a.push(i));return a}},function(e,t,i){var o=i(93),s=i(89),i=function(a){return function(e,t){var i,n=String(s(e)),r=o(t),e=n.length;return r<0||e<=r?a?"":void 0:(t=n.charCodeAt(r))<55296||56319<t||r+1===e||(i=n.charCodeAt(r+1))<56320||57343<i?a?n.charAt(r):t:a?n.slice(r,r+2):i-56320+(t-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,i){var n=i(22),r=i(335);n({target:"Array",stat:!0,forced:!i(230)(function(e){Array.from(e)})},{from:r})},function(e,t,i){"use strict";var n=i(22),r=i(159).includes,i=i(190);n({target:"Array",proto:!0},{includes:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),i("includes")},function(e,t,i){"use strict";var n=i(22),r=i(369),a=i(89);n({target:"String",proto:!0,forced:!i(370)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(r(e),1<arguments.length?arguments[1]:void 0)}})},function(e,t,i){var n=i(170),r=i(178),a=i(31)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||r[n(e)]}},function(e,t,i){"use strict";var n,r,a,o,s,c=i(22),d=i(47),u=i(24),l=i(76),h=i(39),f=i(50).f,i=i(219),p=u.Symbol;!d||"function"!=typeof p||"description"in p.prototype&&void 0===p().description||(n={},i(r=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof r?new p(e):void 0===e?p():p(e);return""===e&&(n[t]=!0),t},p),(i=r.prototype=p.prototype).constructor=r,a=i.toString,o="Symbol(test)"==String(p("test")),s=/^Symbol\((.*)\)[^)]+$/,f(i,"description",{configurable:!0,get:function(){var e=h(this)?this.valueOf():this,t=a.call(e);if(l(n,e))return"";t=o?t.slice(7,-1):t.replace(s,"$1");return""===t?void 0:t}}),c({global:!0,forced:!0},{Symbol:r}))},function(e,t,i){i(389)("iterator")},function(e,t,i){var n=i(100),i=i(24);e.exports="process"==n(i.process)},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).DEPOSIT_ERROR="DEPOSIT_ERROR",t.UPDATE_TIME_RANGES="UPDATE_TIME_RANGES",t.DEPOSIT_RAWNESS="DEPOSIT_RAWNESS",t.DEPOSIT_MANIFEST="DEPOSIT_MANIFEST",t.DEPOSIT_LOADER="DEPOSIT_LOADER",t.DEPOSIT_MUX="DEPOSIT_MUX",t.DEPOSIT_RENDERER="DEPOSIT_RENDERER",t.DEPOSIT_AUDIO="DEPOSIT_AUDIO"},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i(153);function o(i,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return e&&Object(a.b)(e,function(e,t){!n&&Object(a.e)(i,t)||(r&&"string"!=typeof e&&"boolean"!=typeof e?(i[t]||(i[t]={}),o(i[t],e,n,r)):i[t]=e)}),i}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var n=i(47),r=i(50).f,i=Function.prototype,a=i.toString,o=/^\s*function ([^ (]*)/;!n||"name"in i||r(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(e){return""}}})},function(e,t,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){e=r(this,e);return!!e&&e.enumerable}:n},function(e,t,i){i=i(24);e.exports=i},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){i=i(105);e.exports=i("document","documentElement")},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,i){var a=i(246),o=i(289);function s(e,t,i,n){return(s="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,i,n){var r,e=a(e,t);if(e){if((r=Object.getOwnPropertyDescriptor(e,t)).set)return r.set.call(n,i),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(n,t)){if(!r.writable)return!1;r.value=i,Object.defineProperty(n,t,r)}else o(n,t,i);return!0})(e,t,i,n)}e.exports=function(e,t,i,n,r){if(!s(e,t,i,n||e)&&r)throw new Error("failed to set property");return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){var n=i(105),r=i(129),a=i(207),o=i(35);e.exports=n("Reflect","ownKeys")||function(e){var t=r.f(o(e)),i=a.f;return i?t.concat(i(e)):t}},function(e,t,i){var n=i(47),o=i(50),s=i(35),c=i(176);e.exports=n?Object.defineProperties:function(e,t){s(e);for(var i,n=c(t),r=n.length,a=0;a<r;)o.f(e,i=n[a++],t[i]);return e}},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-poster{position:absolute;width:100%;height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}",""])},,,,function(e,t,i){var r=i(85);e.exports=function(e,t,i){for(var n in t)r(e,n,t[n],i);return e}},,function(e,t,i){var s=i(76),c=i(211),d=i(111),u=i(50);e.exports=function(e,t){for(var i=c(t),n=u.f,r=d.f,a=0;a<i.length;a++){var o=i[a];s(e,o)||n(e,o,r(t,o))}}},function(e,t,i){"use strict";var a=i(103),o=i(39),s=[].slice,c={};e.exports=Function.bind||function(t){var i=a(this),n=s.call(arguments,1),r=function(){var e=n.concat(s.call(arguments));return this instanceof r?function(e,t,i){if(!(t in c)){for(var n=[],r=0;r<t;r++)n[r]="a["+r+"]";c[t]=Function("C,a","return new C("+n.join(",")+")")}return c[t](e,i)}(i,e.length,e):i.apply(t,e)};return o(i.prototype)&&(r.prototype=i.prototype),r}},function(i,e){function n(e,t){return i.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i.exports.default=i.exports,i.exports.__esModule=!0,n(e,t)}i.exports=n,i.exports.default=i.exports,i.exports.__esModule=!0},function(e,t,i){i=i(187);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,i){var n=i(39);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,i){var n=i(22),r=i(23),a=i(102),o=i(111).f,i=i(47),r=r(function(){o(1)});n({target:"Object",stat:!0,forced:!i||r,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},function(e,t,i){"use strict";var n=i(104).forEach,i=i(116)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}},function(e,t,i){var n=i(22),r=i(47);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:i(50).f})},,function(e,t,i){"use strict";i.d(t,"a",function(){return r});var t=i(2),n=i.n(t),r=function e(){n()(this,e)};r.ERROR="Error",r.PRE_ERROR="PreError",r.TIMELINE_SWITCHING="DataStageSwitching",r.TIMELINE_SWITCHED="DataStageSwitched",r.STATE_CHANGE="StateChange"},function(e,t,i){var n=i(31),r=i(178),a=n("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},function(e,t,i){var r=i(31)("iterator"),a=!1;try{var n=0,o={next:function(){return{done:!!n++}},return:function(){a=!0}};o[r]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var i=!1;try{var n={};n[r]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i}},function(e,t,i){var n=i(24),i=i(175),n=n.WeakMap;e.exports="function"==typeof n&&/native code/.test(i(n))},function(e,t,i){var n=i(24),r=i(137).trim,i=i(131),a=n.parseInt,o=/^[+-]?0[Xx]/,i=8!==a(i+"08")||22!==a(i+"0x16");e.exports=i?function(e,t){e=r(String(e));return a(e,t>>>0||(o.test(e)?16:10))}:a},function(e,t,i){var n=i(81),h=Math.floor,r="".replace,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g;e.exports=function(a,o,s,c,d,e){var u=s+a.length,l=c.length,t=p;return void 0!==d&&(d=n(d),t=f),r.call(e,t,function(e,t){var i;switch(t.charAt(0)){case"$":return"$";case"&":return a;case"`":return o.slice(0,s);case"'":return o.slice(u);case"<":i=d[t.slice(1,-1)];break;default:var n=+t;if(0==n)return e;if(l<n){var r=h(n/10);return 0!==r&&r<=l?void 0===c[r-1]?t.charAt(1):c[r-1]+t.charAt(1):e}i=c[n-1]}return void 0===i?"":i})}},function(e,t,i){var n=i(24),r=i(137).trim,i=i(131),a=n.parseFloat,i=1/a(i+"-0")!=-1/0;e.exports=i?function(e){var t=r(String(e)),e=a(t);return 0===e&&"-"==t.charAt(0)?-0:e}:a},function(e,t,i){"use strict";var n=i(390),i=i(393);e.exports=n("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i)},function(e,t,i){"use strict";function _(){return this}var g=i(22),y=i(262),v=i(179),m=i(158),b=i(155),k=i(88),x=i(85),n=i(31),S=i(136),T=i(178),i=i(247),P=i.IteratorPrototype,I=i.BUGGY_SAFARI_ITERATORS,w=n("iterator"),A="values";e.exports=function(e,t,i,n,r,a,o){y(i,t,n);function s(e){if(e===r&&p)return p;if(!I&&e in h)return h[e];switch(e){case"keys":case A:case"entries":return function(){return new i(this,e)}}return function(){return new i(this)}}var c,d,u=t+" Iterator",l=!1,h=e.prototype,f=h[w]||h["@@iterator"]||r&&h[r],p=!I&&f||s(r),n="Array"==t&&h.entries||f;if(n&&(e=v(n.call(new e)),P!==Object.prototype&&e.next&&(S||v(e)===P||(m?m(e,P):"function"!=typeof e[w]&&k(e,w,_)),b(e,u,!0,!0),S&&(T[u]=_))),r==A&&f&&f.name!==A&&(l=!0,p=function(){return f.call(this)}),S&&!o||h[w]===p||k(h,w,p),T[t]=p,r)if(c={values:s(A),keys:a?p:s("keys"),entries:s("entries")},o)for(d in c)!I&&!l&&d in h||x(h,d,c[d]);else g({target:t,proto:!0,forced:I||l},c);return c}},function(e,t,i){"use strict";var n=i(167),r=i(170);e.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,i){var n=i(100);e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,i){"use strict";var r=i(93),a=i(89);e.exports="".repeat||function(e){var t=String(a(this)),i="",n=r(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(i+=t);return i}},function(e,t,i){var n=i(23),r=i(131);e.exports=function(e){return n(function(){return!!r[e]()||" "!=" "[e]()||r[e].name!==e})}},function(e,t,i){"use strict";function n(e){e=parseInt(e,10);return e=e<9e7?100*(e+9e5):e}i.d(t,"a",function(){return n}),i(25)},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{})[t.MANIFEST=0]="MANIFEST",t[t.DISPATCH=1]="DISPATCH",t[t.SEGMENT=2]="SEGMENT",t[t.LICENSE=3]="LICENSE",t[t.APP=4]="APP"},function(e,t,i){var g,y=i(581),v=i(407).utf8,m=i(582),b=i(407).bin;(g=function(e,t){e.constructor==String?e=(t&&"binary"===t.encoding?b:v).stringToBytes(e):m(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var i=y.bytesToWords(e),e=8*e.length,n=1732584193,r=-271733879,a=-1732584194,o=271733878,s=0;s<i.length;s++)i[s]=16711935&(i[s]<<8|i[s]>>>24)|4278255360&(i[s]<<24|i[s]>>>8);i[e>>>5]|=128<<e%32,i[14+(64+e>>>9<<4)]=e;for(var c=g._ff,d=g._gg,u=g._hh,l=g._ii,s=0;s<i.length;s+=16){var h=n,f=r,p=a,_=o,n=c(n,r,a,o,i[s+0],7,-680876936),o=c(o,n,r,a,i[s+1],12,-389564586),a=c(a,o,n,r,i[s+2],17,606105819),r=c(r,a,o,n,i[s+3],22,-1044525330);n=c(n,r,a,o,i[s+4],7,-176418897),o=c(o,n,r,a,i[s+5],12,1200080426),a=c(a,o,n,r,i[s+6],17,-1473231341),r=c(r,a,o,n,i[s+7],22,-45705983),n=c(n,r,a,o,i[s+8],7,1770035416),o=c(o,n,r,a,i[s+9],12,-1958414417),a=c(a,o,n,r,i[s+10],17,-42063),r=c(r,a,o,n,i[s+11],22,-1990404162),n=c(n,r,a,o,i[s+12],7,1804603682),o=c(o,n,r,a,i[s+13],12,-40341101),a=c(a,o,n,r,i[s+14],17,-1502002290),n=d(n,r=c(r,a,o,n,i[s+15],22,1236535329),a,o,i[s+1],5,-165796510),o=d(o,n,r,a,i[s+6],9,-1069501632),a=d(a,o,n,r,i[s+11],14,643717713),r=d(r,a,o,n,i[s+0],20,-373897302),n=d(n,r,a,o,i[s+5],5,-701558691),o=d(o,n,r,a,i[s+10],9,38016083),a=d(a,o,n,r,i[s+15],14,-660478335),r=d(r,a,o,n,i[s+4],20,-405537848),n=d(n,r,a,o,i[s+9],5,568446438),o=d(o,n,r,a,i[s+14],9,-1019803690),a=d(a,o,n,r,i[s+3],14,-187363961),r=d(r,a,o,n,i[s+8],20,1163531501),n=d(n,r,a,o,i[s+13],5,-1444681467),o=d(o,n,r,a,i[s+2],9,-51403784),a=d(a,o,n,r,i[s+7],14,1735328473),n=u(n,r=d(r,a,o,n,i[s+12],20,-1926607734),a,o,i[s+5],4,-378558),o=u(o,n,r,a,i[s+8],11,-2022574463),a=u(a,o,n,r,i[s+11],16,1839030562),r=u(r,a,o,n,i[s+14],23,-35309556),n=u(n,r,a,o,i[s+1],4,-1530992060),o=u(o,n,r,a,i[s+4],11,1272893353),a=u(a,o,n,r,i[s+7],16,-155497632),r=u(r,a,o,n,i[s+10],23,-1094730640),n=u(n,r,a,o,i[s+13],4,681279174),o=u(o,n,r,a,i[s+0],11,-358537222),a=u(a,o,n,r,i[s+3],16,-722521979),r=u(r,a,o,n,i[s+6],23,76029189),n=u(n,r,a,o,i[s+9],4,-640364487),o=u(o,n,r,a,i[s+12],11,-421815835),a=u(a,o,n,r,i[s+15],16,530742520),n=l(n,r=u(r,a,o,n,i[s+2],23,-995338651),a,o,i[s+0],6,-198630844),o=l(o,n,r,a,i[s+7],10,1126891415),a=l(a,o,n,r,i[s+14],15,-1416354905),r=l(r,a,o,n,i[s+5],21,-57434055),n=l(n,r,a,o,i[s+12],6,1700485571),o=l(o,n,r,a,i[s+3],10,-1894986606),a=l(a,o,n,r,i[s+10],15,-1051523),r=l(r,a,o,n,i[s+1],21,-2054922799),n=l(n,r,a,o,i[s+8],6,1873313359),o=l(o,n,r,a,i[s+15],10,-30611744),a=l(a,o,n,r,i[s+6],15,-1560198380),r=l(r,a,o,n,i[s+13],21,1309151649),n=l(n,r,a,o,i[s+4],6,-145523070),o=l(o,n,r,a,i[s+11],10,-1120210379),a=l(a,o,n,r,i[s+2],15,718787259),r=l(r,a,o,n,i[s+9],21,-343485551),n=n+h>>>0,r=r+f>>>0,a=a+p>>>0,o=o+_>>>0}return y.endian([n,r,a,o])})._ff=function(e,t,i,n,r,a,o){o=e+(t&i|~t&n)+(r>>>0)+o;return(o<<a|o>>>32-a)+t},g._gg=function(e,t,i,n,r,a,o){o=e+(t&n|i&~n)+(r>>>0)+o;return(o<<a|o>>>32-a)+t},g._hh=function(e,t,i,n,r,a,o){o=e+(t^i^n)+(r>>>0)+o;return(o<<a|o>>>32-a)+t},g._ii=function(e,t,i,n,r,a,o){o=e+(i^(t|~n))+(r>>>0)+o;return(o<<a|o>>>32-a)+t},g._blocksize=16,g._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);e=y.wordsToBytes(g(e,t));return t&&t.asBytes?e:t&&t.asString?b.bytesToString(e):y.bytesToHex(e)}},function(e,t,i){"use strict";var o=i(81),s=i(119),c=i(44);e.exports=function(e){for(var t=o(this),i=c(t.length),n=arguments.length,r=s(1<n?arguments[1]:void 0,i),n=2<n?arguments[2]:void 0,a=void 0===n?i:s(n,i);r<a;)t[r++]=e;return t}},function(e,t,i){"use strict";i(97);function u(e){var t,i,n,r;if("number"==typeof e){for(t=[],i=0;i<4;i++)t.unshift(e%256),e=E(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",n=function(e){for(var t=null,i=1,n=null,r=0,a=0;a<8;a++)0!==e[a]?(i<r&&(t=n,i=r),n=null,r=0):(null===n&&(n=a),++r);return i<r&&(t=n,i=r),t}(e),i=0;i<8;i++)r&&0===e[i]||(r=r&&!1,n===i?(t+=i?":":"::",r=!0):(t+=e[i].toString(16),i<7&&(t+=":")));return"["+t+"]"}function r(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function s(e,t,i,n){var r,a,o,s=i||re,c=0,d="",u=!1,l=!1,h=!1;for(i||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(W,"")),t=t.replace(H,""),r=m(t);c<=r.length;){switch(a=r[c],s){case re:if(!a||!L.test(a)){if(i)return q;s=oe;continue}d+=a.toLowerCase(),s=ae;break;case ae:if(a&&(M.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(i)return q;d="",s=oe,c=0;continue}if(i&&(X(e)!=v(Z,d)||"file"==d&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,i)return void(X(e)&&Z[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?s=ye:X(e)&&n&&n.scheme==e.scheme?s=se:X(e)?s=le:"/"==r[c+1]?(s=ce,c++):(e.cannotBeABaseURL=!0,e.path.push(""),s=xe)}break;case oe:if(!n||n.cannotBeABaseURL&&"#"!=a)return q;if(n.cannotBeABaseURL&&"#"==a){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,s=Te;break}s="file"==n.scheme?ye:de;continue;case se:if("/"!=a||"/"!=r[c+1]){s=de;continue}s=he,c++;break;case ce:if("/"==a){s=fe;break}s=ke;continue;case de:if(e.scheme=n.scheme,a==y)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==a||"\\"==a&&X(e))s=ue;else if("?"==a)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",s=Se;else{if("#"!=a){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),s=ke;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",s=Te}break;case ue:if(!X(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,s=ke;continue}s=fe}else s=he;break;case le:if(s=he,"/"!=a||"/"!=d.charAt(c+1))continue;c++;break;case he:if("/"==a||"\\"==a)break;s=fe;continue;case fe:if("@"==a){u&&(d="%40"+d);for(var u=!0,f=m(d),p=0;p<f.length;p++){var _=f[p];":"!=_||h?(_=$(_,K),h?e.password+=_:e.username+=_):h=!0}d=""}else if(a==y||"/"==a||"?"==a||"#"==a||"\\"==a&&X(e)){if(u&&""==d)return"Invalid authority";c-=m(d).length+1,d="",s=pe}else d+=a;break;case pe:case _e:if(i&&"file"==e.scheme){s=me;continue}if(":"!=a||l){if(a==y||"/"==a||"?"==a||"#"==a||"\\"==a&&X(e)){if(X(e)&&""==d)return O;if(i&&""==d&&(J(e)||null!==e.port))return;if(o=z(e,d))return o;if(d="",s=be,i)return;continue}"["==a?l=!0:"]"==a&&(l=!1),d+=a}else{if(""==d)return O;if(o=z(e,d))return o;if(d="",s=ge,i==_e)return}break;case ge:if(!C.test(a)){if(a==y||"/"==a||"?"==a||"#"==a||"\\"==a&&X(e)||i){if(""!=d){var g=parseInt(d,10);if(65535<g)return R;e.port=X(e)&&g===Z[e.scheme]?null:g,d=""}if(i)return;s=be;continue}return R}d+=a;break;case ye:if(e.scheme="file","/"==a||"\\"==a)s=ve;else{if(!n||"file"!=n.scheme){s=ke;continue}if(a==y)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==a)e.host=n.host,e.path=n.path.slice(),e.query="",s=Se;else{if("#"!=a){te(r.slice(c).join(""))||(e.host=n.host,e.path=n.path.slice(),ie(e)),s=ke;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",s=Te}}break;case ve:if("/"==a||"\\"==a){s=me;break}n&&"file"==n.scheme&&!te(r.slice(c).join(""))&&(ee(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),s=ke;continue;case me:if(a==y||"/"==a||"\\"==a||"?"==a||"#"==a){if(!i&&ee(d))s=ke;else if(""==d){if(e.host="",i)return;s=be}else{if(o=z(e,d))return o;if("localhost"==e.host&&(e.host=""),i)return;d="",s=be}continue}d+=a;break;case be:if(X(e)){if(s=ke,"/"!=a&&"\\"!=a)continue}else if(i||"?"!=a)if(i||"#"!=a){if(a!=y&&(s=ke,"/"!=a))continue}else e.fragment="",s=Te;else e.query="",s=Se;break;case ke:if(a==y||"/"==a||"\\"==a&&X(e)||!i&&("?"==a||"#"==a)){if(".."===(g=(g=d).toLowerCase())||"%2e."===g||".%2e"===g||"%2e%2e"===g?(ie(e),"/"==a||"\\"==a&&X(e)||e.path.push("")):ne(d)?"/"==a||"\\"==a&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ee(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(a==y||"?"==a||"#"==a))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",s=Se):"#"==a&&(e.fragment="",s=Te)}else d+=$(a,Q);break;case xe:"?"==a?(e.query="",s=Se):"#"==a?(e.fragment="",s=Te):a!=y&&(e.path[0]+=$(a,Y));break;case Se:i||"#"!=a?a!=y&&("'"==a&&X(e)?e.query+="%27":e.query+="#"==a?"%23":$(a,Y)):(e.fragment="",s=Te);break;case Te:a!=y&&(e.fragment+=$(a,G))}c++}}function c(e){var t,i=_(this,c,"URL"),n=1<arguments.length?arguments[1]:void 0,e=String(e),r=w(i,{type:"URL"});if(void 0!==n)if(n instanceof c)t=A(n);else if(o=s(t={},String(n)))throw TypeError(o);if(o=s(r,e,null,t))throw TypeError(o);var a=r.searchParams=new P,o=I(a);o.updateSearchParams(r.query),o.updateURL=function(){r.query=String(a)||null},d||(i.href=Pe.call(i),i.origin=Ie.call(i),i.protocol=we.call(i),i.username=Ae.call(i),i.password=Ee.call(i),i.host=De.call(i),i.hostname=qe.call(i),i.port=Oe.call(i),i.pathname=Re.call(i),i.search=Le.call(i),i.searchParams=Me.call(i),i.hash=Ce.call(i))}var y,n,a,o=i(22),d=i(47),l=i(288),h=i(24),f=i(212),p=i(85),_=i(184),v=i(76),g=i(336),m=i(335),b=i(193).codeAt,k=i(371),x=i(155),S=i(372),i=i(109),T=h.URL,P=S.URLSearchParams,I=S.getState,w=i.set,A=i.getterFor("URL"),E=Math.floor,D=Math.pow,q="Invalid scheme",O="Invalid host",R="Invalid port",L=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,C=/\d/,N=/^(0x|0X)/,B=/^[0-7]+$/,F=/^\d+$/,U=/^[\dA-Fa-f]+$/,j=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,V=/[\u0000\t\u000A\u000D #/:?@[\\]]/,W=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,H=/[\t\u000A\u000D]/g,z=function(e,t){var i,n,r;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(i=function(e){var t,i,n,r,a,o,s,c=[0,0,0,0,0,0,0,0],d=0,u=null,l=0,h=function(){return e.charAt(l)};if(":"==h()){if(":"!=e.charAt(1))return;l+=2,u=++d}for(;h();){if(8==d)return;if(":"!=h()){for(t=i=0;i<4&&U.test(h());)t=16*t+parseInt(h(),16),l++,i++;if("."==h()){if(0==i)return;if(l-=i,d>6)return;for(n=0;h();){if(r=null,n>0){if(!("."==h()&&n<4))return;l++}if(!C.test(h()))return;for(;C.test(h());){if(a=parseInt(h(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;l++}c[d]=256*c[d]+r,2!=++n&&4!=n||d++}if(4!=n)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;c[d++]=t}else{if(null!==u)return;l++,u=++d}}if(null!==u)for(o=d-u,d=7;0!=d&&o>0;)s=c[d],c[d--]=c[u+o-1],c[u+--o]=s;else if(8!=d)return;return c}(t.slice(1,-1)))?void(e.host=i):O;if(X(e))return t=k(t),j.test(t)||null===(i=function(e){var t,i,n,r,a,o,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(i=[],n=0;n<t;n++){if(""==(r=c[n]))return e;if(a=10,r.length>1&&"0"==r.charAt(0)&&(a=N.test(r)?16:8,r=r.slice(8==a?1:2)),""===r)o=0;else{if(!(10==a?F:8==a?B:U).test(r))return e;o=parseInt(r,a)}i.push(o)}for(n=0;n<t;n++)if(o=i[n],n==t-1){if(o>=D(256,5-t))return null}else if(o>255)return null;for(s=i.pop(),n=0;n<i.length;n++)s+=i[n]*D(256,3-n);return s}(t))?O:void(e.host=i);if(V.test(t))return O;for(i="",n=m(t),r=0;r<n.length;r++)i+=$(n[r],Y);e.host=i},Y={},G=g({},Y,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=g({},G,{"#":1,"?":1,"{":1,"}":1}),K=g({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(e,t){var i=b(e,0);return 32<i&&i<127&&!v(t,e)?e:encodeURIComponent(e)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return v(Z,e.scheme)},J=function(e){return""!=e.username||""!=e.password},ee=function(e,t){return 2==e.length&&L.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)},te=function(e){var t;return 1<e.length&&ee(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ie=function(e){var t=e.path,i=t.length;!i||"file"==e.scheme&&1==i&&ee(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},re={},ae={},oe={},se={},ce={},de={},ue={},le={},he={},fe={},pe={},_e={},ge={},ye={},ve={},me={},be={},ke={},xe={},Se={},Te={},i=c.prototype,Pe=function(){var e=A(this),t=e.scheme,i=e.username,n=e.password,r=e.host,a=e.port,o=e.path,s=e.query,c=e.fragment,d=t+":";return null!==r?(d+="//",J(e)&&(d+=i+(n?":"+n:"")+"@"),d+=u(r),null!==a&&(d+=":"+a)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(d+="?"+s),null!==c&&(d+="#"+c),d},Ie=function(){var e=A(this),t=e.scheme,i=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&X(e)?t+"://"+u(e.host)+(null!==i?":"+i:""):"null"},we=function(){return A(this).scheme+":"},Ae=function(){return A(this).username},Ee=function(){return A(this).password},De=function(){var e=A(this),t=e.host,e=e.port;return null===t?"":null===e?u(t):u(t)+":"+e},qe=function(){var e=A(this).host;return null===e?"":u(e)},Oe=function(){var e=A(this).port;return null===e?"":String(e)},Re=function(){var e=A(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Le=function(){var e=A(this).query;return e?"?"+e:""},Me=function(){return A(this).searchParams},Ce=function(){var e=A(this).fragment;return e?"#"+e:""},g=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};d&&f(i,{href:g(Pe,function(e){var t=A(this),e=String(e),e=s(t,e);if(e)throw TypeError(e);I(t.searchParams).updateSearchParams(t.query)}),origin:g(Ie),protocol:g(we,function(e){var t=A(this);s(t,String(e)+":",re)}),username:g(Ae,function(e){var t=A(this),i=m(String(e));if(!r(t)){t.username="";for(var n=0;n<i.length;n++)t.username+=$(i[n],K)}}),password:g(Ee,function(e){var t=A(this),i=m(String(e));if(!r(t)){t.password="";for(var n=0;n<i.length;n++)t.password+=$(i[n],K)}}),host:g(De,function(e){var t=A(this);t.cannotBeABaseURL||s(t,String(e),pe)}),hostname:g(qe,function(e){var t=A(this);t.cannotBeABaseURL||s(t,String(e),_e)}),port:g(Oe,function(e){var t=A(this);r(t)||(""==(e=String(e))?t.port=null:s(t,e,ge))}),pathname:g(Re,function(e){var t=A(this);t.cannotBeABaseURL||(t.path=[],s(t,e+"",be))}),search:g(Le,function(e){var t=A(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",s(t,e,Se)),I(t.searchParams).updateSearchParams(t.query)}),searchParams:g(Me),hash:g(Ce,function(e){var t=A(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",s(t,e,Te)):t.fragment=null})}),p(i,"toJSON",function(){return Pe.call(this)},{enumerable:!0}),p(i,"toString",function(){return Pe.call(this)},{enumerable:!0}),T&&(n=T.createObjectURL,a=T.revokeObjectURL,n&&p(c,"createObjectURL",function(e){return n.apply(T,arguments)}),a&&p(c,"revokeObjectURL",function(e){return a.apply(T,arguments)})),x(c,"URL"),o({global:!0,forced:!l,sham:!d},{URL:c})},function(e,t,i){var n=i(1);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){"use strict";var n,r=i(23),a=i(179),o=i(88),s=i(76),c=i(31),d=i(136),u=c("iterator"),i=!1;[].keys&&("next"in(c=[].keys())?(c=a(a(c)))!==Object.prototype&&(n=c):i=!0);r=null==n||r(function(){var e={};return n[u].call(e)!==e});r&&(n={}),d&&!r||s(n,u)||o(n,u,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:i}},function(e,t,i){function n(e){return function(){k(e)}}function r(e){k(e.data)}var a,o=i(24),s=i(23),c=i(135),d=i(208),u=i(174),l=i(249),h=i(200),f=o.location,p=o.setImmediate,_=o.clearImmediate,g=o.process,y=o.MessageChannel,v=o.Dispatch,m=0,b={},k=function(e){var t;b.hasOwnProperty(e)&&(t=b[e],delete b[e],t())},i=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};p&&_||(p=function(e){for(var t=[],i=1;i<arguments.length;)t.push(arguments[i++]);return b[++m]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},a(m),m},_=function(e){delete b[e]},h?a=function(e){g.nextTick(n(e))}:v&&v.now?a=function(e){v.now(n(e))}:y&&!l?(y=(l=new y).port2,l.port1.onmessage=r,a=c(y.postMessage,y,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&f&&"file:"!==f.protocol&&!s(i)?(a=i,o.addEventListener("message",r,!1)):a="onreadystatechange"in u("script")?function(e){d.appendChild(u("script")).onreadystatechange=function(){d.removeChild(this),k(e)}}:function(e){setTimeout(n(e),0)}),e.exports={set:p,clear:_}},function(e,t,i){i=i(182);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,i){"use strict";function n(e){var i,n;this.promise=new e(function(e,t){if(void 0!==i||void 0!==n)throw TypeError("Bad Promise constructor");i=e,n=t}),this.resolve=r(i),this.reject=r(n)}var r=i(103);e.exports.f=function(e){return new n(e)}},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),u=i.n(t),t=i(3),r=i.n(t),t=i(38),l=i.n(t),t=i(42),a=i.n(t),t=i(4),o=i.n(t),t=i(5),s=i.n(t),t=i(1),h=i.n(t),f=(i(43),i(17),i(27),i(127),i(48),i(377)),t=i(594),p=i(228),_=i(341),g=i(201);var n=function(e){o()(d,e);var i,n,c=(i=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=h()(i);return t=n?(e=h()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),s()(this,t)});function d(e){var r;u()(this,d),(r=c.call(this,{ctx:e.runtime.ctx})).$TAG="~",r.$error=null,r.silenced=!1,r.watchingKeys=[],r.watchingCallbacks=[],r.stateSlice=null,r.$watch=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=l()(r).watchingCallbacks;t?i.unshift(e):i.push(e)},r.$throwError=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=l()(r).$stream;!r.$error&&t&&(r.$error=t),i.immediately&&(e=n.error)&&n.emit(p.a.ERROR,{stream:n,error:e})};var t=e.store,i=e.watch,n=(e.pkg,e.runtime),a=e.uuid,o=e.stream,s=e.ipc,e=e.hoc;return r.watchingKeys=Object(f.a)(i),r.$store=t,r.$krt=n,r.$ipc=s,r.$stream=o,r.streamUuid=a,r.$initStateSlice(),r.$subscribeStore(),r.$watch(function(e){r.onStoreStateChanged&&Object(_.a)(function(){r.onStoreStateChanged(e)})},e),r}return r()(d,[{key:"LOG_TAG",get:function(){return"[".concat(this.$TAG).concat(this.silenced?"(silence)":"","]")}},{key:"$silenced",get:function(){return this.silenced},set:function(e){this.silenced=e}},{key:"$provideArtefact",value:function(e){e&&this.$store.dispatch({type:this.$ARTEFACT_ACTION,payload:e,meta:{stream_uid:this.streamUuid}})}},{key:"$consumeArtefact",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.$store.dispatch({type:function(e){var t,i=e.toUpperCase(),n=null;for(t in g.a){var r=t.split("_"),a=r[0],r=r[1];if("DEPOSIT"===a&&r===i){n=g.a[t];break}}return n}(e),payload:t?void 0:{},meta:{stream_uid:this.streamUuid}})}},{key:"$queryArtefact",value:function(e){return this.$store.getState()[e]}},{key:"$initStateSlice",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.$store,n=this.watchingKeys,r=this.streamUuid,a=e.getState(),o={};return n.forEach(function(e){o[e]=a[e][r]||(!0!==i&&t.stateSlice?t.stateSlice[e]:{})||{}}),this.stateSlice=o}},{key:"$drainBuffer",value:function(e){var t=this.$ARTEFACT_ACTION.split("_")[1].toLowerCase();this.$selfArtifact=null,this.$consumeArtefact(t,!!e&&e.delInStream)}},{key:"recoverAt",value:function(e){this.$error=null}},{key:"$subscribeStore",value:function(){var c=this,d=this.$store,u=this.streamUuid;this.$unSubscribeStore(),this.unsubscribe=d.subscribe(function(){var e=c.watchingKeys,t=c.watchingCallbacks,i=c.stateSlice,n=d.getState(),r=!1;if(i)for(var a=0;a<e.length;a++){var o=n[s=e[a]][u],s=i[s];if(o&&s!==o){r=!0;break}}else r=!0;r&&t.forEach(function(e){e(c.$initStateSlice())})})}},{key:"$unSubscribeStore",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"destroy",value:function(){a()(h()(d.prototype),"destroy",this).call(this),this.$error=void 0,this.streamUuid=void 0,this.stateSlice=void 0,this.$selfArtifact=void 0,this.$unSubscribeStore()}}]),d}(t.a)},,,function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n="undefined"==typeof window?self:window},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return p}),i(9);var t=i(2),o=i.n(t),t=i(4),s=i.n(t),t=i(5),c=i.n(t),t=i(1),d=i.n(t),t=i(3),u=i.n(t),x=(i(27),i(51)),S=i(607),t=i(94),l=i(340),a=i(328),P=i(608),I=i(609);i(140);var w=new(i(610).a);function A(e,t,i){for(var n,r=0;r<=t;r++)n=P.a.readUEV(e.payload,e.offset),Object(I.d)(e,n.bitLength),n=P.a.readUEV(e.payload,e.offset),Object(I.d)(e,n.bitLength),i&&(n=P.a.readUEV(e.payload,e.offset),Object(I.d)(e,n.bitLength),n=P.a.readUEV(e.payload,e.offset),Object(I.d)(e,n.bitLength)),Object(I.d)(e,1)}function h(e){var t,i=Object(I.c)(e),n=i.payload,r=[1,1],a=1,o=0,s=new Array(64),c=(14&n[0])>>1;Object(I.d)(i,8);var d=function(e,t){var i=e.payload.subarray(e.index),n=i[0]>>6,r=i[0]>>5&1,a=31&i[0],o=i.subarray(1,5),s=i.subarray(5,11),i=i[11];Object(I.d)(e,96);for(var c=[],d=[],u=0;u<t;u++)c[u]=Object(I.a)(e),d[u]=Object(I.a)(e);if(0<t)for(u=t;u<8;u++)Object(I.d)(e,2);for(u=0;u<t;u++)c[u]&&Object(I.d)(e,88),d[u]&&Object(I.d)(e,8);return{profile_space:n,tier_flag:r,profile_idc:a,profile_compatibility_flags:o,constraint_indicator_flags:s,level_idc:i}}(i,c),u=P.a.readUEV(n,i.offset);Object(I.d)(i,u.bitLength);var l=P.a.readUEV(n,i.offset),h=l.value;Object(I.d)(i,l.bitLength),3==h&&Object(I.d)(i,1);var f=P.a.readUEV(n,i.offset);Object(I.d)(i,f.bitLength);e=P.a.readUEV(n,i.offset);Object(I.d)(i,e.bitLength),Object(I.a)(i)&&(_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength));u=P.a.readUEV(n,i.offset);Object(I.d)(i,u.bitLength);l=P.a.readUEV(n,i.offset);Object(I.d)(i,l.bitLength);var p=P.a.readUEV(n,i.offset);for(Object(I.d)(i,p.bitLength),t=Object(I.a)(i)?0:c;t<=c;t++)_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength);var _=P.a.readUEV(n,i.offset);Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),Object(I.a)(i)&&(m=P.a.readBit(n,i.offset),Object(I.d)(i,1),m&&function(e){for(var t,i,n=0;n<4;n++)for(t=0;t<(3==n?2:6);t++)if(Object(I.a)(e)){var r=Math.min(64,1<<4+(n<<1));for(1<n&&(o=P.a.readSEV(e.payload,e.offset),Object(I.d)(e,o.bitLength)),i=0;i<r;i++){var a=P.a.readSEV(e.payload,e.offset);Object(I.d)(e,a.bitLength)}}else{var o=P.a.readUEV(e.payload,e.offset);Object(I.d)(e,o.bitLength)}}(i)),Object(I.d)(i,1),Object(I.d)(i,1),Object(I.a)(i)&&(Object(I.d)(i,4),Object(I.d)(i,4),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),Object(I.d)(i,1));var g=P.a.readUEV(n,i.offset);for(Object(I.d)(i,g.bitLength),t=0;t<g.value;t++)!function(e,t,i,n){var r,a,o=e.payload;if(t&&Object(I.a)(e))for(t===i&&(a=P.a.readUEV(o,e.offset),Object(I.d)(e,a.bitLength)),Object(I.d)(e,1),a=P.a.readUEV(o,e.offset),Object(I.d)(e,a.bitLength),r=n[t]=0;r<=n[t-1];r++){var s=0,c=Object(I.a)(e);c||(s=Object(I.a)(e)),(c||s)&&n[t]++}else{var d=P.a.readUEV(o,e.offset);Object(I.d)(e,d.bitLength);var u=P.a.readUEV(o,e.offset);for(Object(I.d)(e,u.bitLength),r=0;r<d.value;r++)Object(I.d)(e,P.a.readUEV(o,e.offset).bitLength),Object(I.d)(e,1);for(r=0;r<u.value;r++)Object(I.d)(e,P.a.readUEV(o,e.offset).bitLength),Object(I.d)(e,1)}}(i,t,g.value,s);if(Object(I.a)(i)){var y=P.a.readUEV(n,i.offset);for(Object(I.d)(i,y.bitLength),t=0;t<y.value;t++){var v=Math.min(p.value+4,16);Object(I.d)(i,v),Object(I.d)(i,1)}}if(Object(I.d)(i,1),Object(I.d)(i,1),Object(I.a)(i)){if(Object(I.a)(i)){var m=P.a.readByte(n,i.offset);switch(Object(I.d)(i,8),m){case 1:r=[1,1];break;case 2:r=[12,11];break;case 3:r=[10,11];break;case 4:r=[16,11];break;case 5:r=[40,33];break;case 6:r=[24,11];break;case 7:r=[20,11];break;case 8:r=[32,11];break;case 9:r=[80,33];break;case 10:r=[18,11];break;case 11:r=[15,11];break;case 12:r=[64,33];break;case 13:r=[160,99];break;case 14:r=[4,3];break;case 15:r=[3,2];break;case 16:r=[2,1];break;case 255:var b=P.a.readByte(n,i.offset);Object(I.d)(i,8);var k=P.a.readByte(n,i.offset);Object(I.d)(i,8);var x=P.a.readByte(n,i.offset);Object(I.d)(i,8);var S=P.a.readByte(n,i.offset);Object(I.d)(i,8),r=[b<<8|k,x<<8|S]}r&&(a=r[0]/r[1]),255===m&&(Object(I.d)(i,16),Object(I.d)(i,16))}Object(I.a)(i)&&Object(I.d)(i,1),Object(I.a)(i)&&(Object(I.d)(i,3),Object(I.d)(i,1),Object(I.a)(i)&&Object(I.d)(i,24)),Object(I.a)(i)&&(T=P.a.readUEV(n,i.offset),Object(I.d)(i,T.bitLength),T=P.a.readUEV(n,i.offset),Object(I.d)(i,T.bitLength)),Object(I.d)(i,3),Object(I.a)(i)&&(_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength)),Object(I.a)(i)&&(P.a.readBit(n,i.offset,32),Object(I.d)(i,32),P.a.readBit(n,i.offset,32),Object(I.d)(i,32),Object(I.a)(i)&&(_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength)),Object(I.a)(i)&&function(e,t){var i,n,r=0,a=0,o=0,a=Object(I.a)(e),o=Object(I.a)(e);for((a||o)&&((r=Object(I.a)(e))&&Object(I.d)(e,19),Object(I.d)(e,8),r&&Object(I.d)(e,4),Object(I.d)(e,15)),i=0;i<=t;i++){var s=0,c=0,d=0;(d=!Object(I.a)(e)?Object(I.a)(e):d)?(n=P.a.readUEV(e.payload,e.offset),Object(I.d)(e,n.bitLength)):c=Object(I.a)(e),c||(n=P.a.readUEV(e.payload,e.offset),Object(I.d)(e,n.bitLength),s=n.value),a&&A(e,s,r),o&&A(e,s,r)}}(i,c)),Object(I.a)(i)&&(Object(I.d)(i,3),_=P.a.readUEV(n,i.offset),Object(I.d)(i,_.bitLength),o=Math.min(_.value,4095))}var T=w.readUint32(d.profile_compatibility_flags);return Object.assign(Object.assign({payload:i.payload},d),{profile_compatibility:T,chromaFormat:h,bitDepthLumaMinus8:u.value,bitDepthChromaMinus8:l.value,minSpatialSegmentationIdc:o,width:f.value*a,height:e.value*a,pixelRatio:r,fps:0,fixedFPS:!0})}function f(e){switch(o()(this,f),this.unit_type=e[0]>>1&63,this.data=Object(a.a)(e.subarray(2)),this.rawData=e,this.unit_type){case 32:this.vps=function(e){var t=Object(I.c)(e);Object(I.d)(t,12);var i=(14&e[1])>>1,n=1&e[1];return Object(I.d)(t,4),Object(I.d)(t,16),{payload:e,numTemporalLayers:i,temporalIdNested:n}}(this.data);break;case 33:this.sps=h(this.data);break;case 34:this.pps=(t=this.data,n=Object(I.c)(t),i=P.a.readUEV(r=t,n.offset),Object(I.d)(n,i.bitLength),i=P.a.readUEV(r,n.offset),Object(I.d)(n,i.bitLength),Object(I.d)(n,7),i=P.a.readUEV(r,n.offset),Object(I.d)(n,i.bitLength),i=P.a.readUEV(r,n.offset),Object(I.d)(n,i.bitLength),i=P.a.readSEV(r,n.offset),Object(I.d)(n,i.bitLength),Object(I.d)(n,2),Object(I.a)(n)&&(i=P.a.readUEV(r,n.offset),Object(I.d)(n,i.bitLength)),i=P.a.readSEV(r,n.offset),Object(I.d)(n,i.bitLength),i=P.a.readSEV(r,n.offset),Object(I.d)(n,i.bitLength),Object(I.d)(n,4),{payload:t,tiles_enabled_flag:Object(I.a)(n),entropy_coding_sync_enabled_flag:Object(I.a)(n)})}var t,i,n,r}t=function(e){s()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e){var t;return o()(this,a),(t=r.call(this)).lastState=null,t.lastNALu=null,t.lastNALuState=null,t.codecType=e,t}return u()(a,[{key:"spitNalu_",value:function(e,t,i){var n;switch(this.codecType){case 0:n=new l.a(e);break;case 1:n=new f(e)}n.pts=t,n.dts=i,this.lastNALu=n,this.emit("nalu",n)}},{key:"push",value:function(e){var t=this.lastState,i=this.lastNALuState,n=0,r=-1,a=e.pts,o=e.dts,s=e.payload,c=e.naluSizeLength;if(c){var d=0,u=0,l=0,h=s.length;do{for(var u=0,f=0;f<c;f++)u|=s[d+f]<<8*(c-f-1)}while((l=(d+=c)+u)>h&&(l=h),this.spitNalu_(s.subarray(d,l),a,o),(d=l)<h)}else{for(var p=s.byteLength-1,_=0;0===s[p]&&(_++,0<--p););var g=(s=3<=_?s.subarray(0,p+1):s).length,y=0;do{var v,m,b,k=s[n++]}while(0!==y?1!==y?k?1===k?(0<=r?(this.lastNALuState=y,this.spitNalu_(s.subarray(r,n-1-y),a,o)):(v=this.lastNALu)&&(t&&n<=4-t&&i&&(v.rawData=v.rawData.subarray(0,v.rawData.byteLength-t)),0<(b=n-y-1)&&(x.a.log("overflow NALU found: ".concat(b,"/").concat(a,"/").concat(o)),(m=new S.a).append(v.rawData),m.append(s.subarray(0,b)),b=m.toNewBytes(),m.clear(),v.rawData=b)),n<g&&(r=n,y=0)):y=0:y=3:y=k?0:2:y=k?0:1,n<g);0<=r&&0<=y&&(this.lastNALuState=y,this.spitNalu_(s.subarray(r,g),a,o)),this.lastState=y}this.emit("done")}},{key:"reset",value:function(){this.lastState=null,this.lastNALu=null,this.lastNALuState=null}}]),a}(t.EventEmitter);function n(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)}}var r=function(e){s()(i,e);var t=n(i);function i(){return o()(this,i),t.call(this,0)}return i}(t),p=function(e){s()(i,e);var t=n(i);function i(){return o()(this,i),t.call(this,1)}return i}(t)},function(e,t,i){"use strict";i.d(t,"a",function(){return se}),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46),i(27),i(9);var n,r=i(2),h=i.n(r),a=i(4),f=i.n(a),t=i(5),c=i.n(t),r=i(1),d=i.n(r),a=(i(147),[0,0,0,0,0,0,0,0]),o=[].concat(a,[0,0,0,0]),s=[].concat(a,[1,0,0,0]),t=function e(t){var i;h()(this,e);for(var n=Array.isArray(t)?t:t.type,r=!Array.isArray(t)&&!!t.boxHead,t=function(e,t){e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e.set(n,4)},a=arguments.length,o=new Array(1<a?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];if(r&&1===o.length)t(i=o[0],i.byteLength);else{for(var c=o.length,d=c,u=8;d--;)u+=o[d].byteLength;try{i=new Uint8Array(u)}catch(e){throw"mp4 box ".concat(n," alloc mem err: ").concat(e.message)}for(t(i,u),d=0,u=8;d<c;d++)i.set(o[d],u),u+=o[d].byteLength}this.bytes=i},r=t,u={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(n in u)if(Object.prototype.hasOwnProperty.call(u,n))for(var l=0;l<4;l++)u[n].push(n.charCodeAt(l));var p=u;var _=function(e){f()(s,e);var i,n,o=(i=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function s(e){h()(this,s);for(var t,i=new Uint8Array([105,115,111,109]),n=new Uint8Array([0,0,0,1]),r=new Uint8Array([97,118,99,49]),a=0;a<e.length;a++){t=e[a],/^hvc/gi.test(t.codec)&&(r=new Uint8Array([104,118,99,49]));break}return o.call(this,p.ftyp,i,n,i,r)}return s}(r);var g=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return h()(this,a),r.call(this,{type:p.mdat,boxHead:t},e)}return a}(r),a=i(101),y=i.n(a);var v=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){return h()(this,r),t.call(this,{type:p.mfhd,boxHead:!0},new Uint8Array([].concat(y()(o),[e>>24,e>>16&255,e>>8&255,255&e])))}return r}(t),m=Math.pow(2,32)-1;i(384);var b=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];h()(this,a);for(var t,i=new Uint8Array(12+e.length),n=0;n<e.length;n++)t=e[n].flags,i[n+12]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return r.call(this,{type:p.sdtp,boxHead:!0},i)}return a}(t);var k=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e,t){return h()(this,a),r.call(this,{type:p.tfdt,boxHead:!0},new Uint8Array([].concat(y()(s),[e>>24,e>>16&255,e>>8&255,255&e,t>>24,t>>16&255,t>>8&255,255&t])))}return a}(t);var x=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){return h()(this,r),t.call(this,{type:p.tfhd,boxHead:!0},new Uint8Array([].concat(y()(o),[e>>24,e>>16&255,e>>8&255,255&e])))}return r}(t);var S=function(e){f()(l,e);var i,n,u=(i=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;h()(this,l);var i,n,r,a,o=e.length,s=20+16*o,c=new Uint8Array(s);c.set([0,0,15,1,o>>>24&255,o>>>16&255,o>>>8&255,255&o,(t+=s)>>>24&255,t>>>16&255,t>>>8&255,255&t],8);for(var d=0;d<o;d++)i=(a=e[d]).duration,n=a.size,r=a.flags,a=a.cts,c.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r.isLeading<<2|r.dependsOn,r.isDependedOn<<6|r.hasRedundancy<<4|r.paddingValue<<1|r.isNonSyncSample,61440&r.degradationPriority,15&r.degradationPriority,a>>>24&255,a>>>16&255,a>>>8&255,255&a],20+16*d);return u.call(this,{type:p.trun,boxHead:!0},c)}return l}(t);var T=function(e){f()(o,e);var i,n,a=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function o(e,t){h()(this,o);var i=e.id,n=e.samples,r=Math.floor(t/(1+m)),e=Math.floor(t%(1+m)),t=new b(n).bytes;return a.call(this,p.traf,new x(i).bytes,new k(r,e).bytes,(e=t.length+16+20+8+16+8+8,new S(n,e).bytes),t)}return o}(t);var P=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e,t,i){return h()(this,a),r.call(this,p.moof,new v(e).bytes,new T(i,t).bytes)}return a}(r);var I=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e,t){h()(this,a),t*=e;var i=Math.floor(t/(1+m)),t=Math.floor(t%(1+m)),t=new Uint8Array([].concat(y()(s),[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return r.call(this,{type:p.mvhd,boxHead:!0},t)}return a}(t);var w=function(e){f()(o,e);var i,n,a=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function o(e){h()(this,o);var t=e.id,i=e.duration*e.timescale,n=e.width,r=e.height,e=Math.floor(i/(1+m)),i=Math.floor(i%(1+m));return a.call(this,p.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))}return o}(r);var A=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e,t){h()(this,a),t*=e;var i=Math.floor(t/(1+m)),t=Math.floor(t%(1+m)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]);return r.call(this,p.mdhd,t)}return a}(r);var E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),D=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),q=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e){var t;switch(h()(this,a),e){case"video":t=E;break;case"audio":t=D}return r.call(this,p.hdlr,t)}return a}(r);var O=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,{type:p.dref,boxHead:!0},new Uint8Array([].concat(y()(o),[0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))}return r}(t))).bytes;var R=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,p.dinf,O)}return r}(t))).bytes;var L=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,{type:p.smhd,boxHead:!0},new Uint8Array([].concat(y()(o),[0,0,0,0])))}return r}(t))).bytes;var M=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,p.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}return r}(t))).bytes;var C=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,{type:p.stco,boxHead:!0},new Uint8Array([].concat(y()(o),[0,0,0,0])))}return r}(t))).bytes;var N=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,{type:p.stsz,boxHead:!0},new Uint8Array([].concat(y()(o),[0,0,0,0,0,0,0,0])))}return r}(t))).bytes;var B=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,{type:p.stsc,boxHead:!0},new Uint8Array([].concat(y()(o),[0,0,0,0])))}return r}(t))).bytes;var F=(new(function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,{type:p.stts,boxHead:!0},new Uint8Array([].concat(y()(o),[0,0,0,0])))}return r}(t))).bytes;i(82);var U=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return h()(this,r),t.call(this,p.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))}return r}(r);var j=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e,t){return h()(this,a),r.call(this,p.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e,t>>24,t>>16&255,t>>8&255,255&t]))}return a}(r);i=function(e){f()(o,e);var i,n,a=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function o(e,t){h()(this,o);for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return a.call.apply(a,[this,e,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])].concat(n))}return o}(r);function V(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)}}var W=function(e){f()(r,e);var n=V(r);function r(e,t,i){return h()(this,r),n.call(this,p.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i)))}return r}(r),H=function(e){f()(d,e);var c=V(d);function d(e){h()(this,d);for(var t,i,n=[],r=[],a=0;a<e.sps.length;a++)i=(t=e.sps[a]).byteLength,n.push(i>>>8&255),n.push(255&i),n=n.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)i=(t=e.pps[a]).byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(t));var o=e.pixelRatio[0],s=e.pixelRatio[1];return c.call(this,p.avc1,e,new W(e,n,r).bytes,(new U).bytes,new j(o,s).bytes)}return d}(i);function z(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)}}function Y(e,t){for(var i=[128&t,0,1],n=0;n<1;n++){var r=2+e.byteLength;i.push((65535&r)>>8),i.push(255&r),i.push(64),i.push(1),i=i.concat(Array.prototype.slice.call(e))}return i}var G=function(e){f()(a,e);var r=z(a);function a(e,t,i,n){return h()(this,a),r.call(this,p.hvcC,(e=e,n=!i.minSpatialSegmentationIdc||n.entropy_coding_sync_enabled_flag&&n.tiles_enabled_flag?0:n.entropy_coding_sync_enabled_flag?3:n.tiles_enabled_flag?2:1,new Uint8Array([1,i.profile_space<<6|i.tier_flag<<5|i.profile_idc,i.profile_compatibility_flags[0],i.profile_compatibility_flags[1],i.profile_compatibility_flags[2],i.profile_compatibility_flags[3],i.constraint_indicator_flags[0],i.constraint_indicator_flags[1],i.constraint_indicator_flags[2],i.constraint_indicator_flags[3],i.constraint_indicator_flags[4],i.constraint_indicator_flags[5],i.level_idc,240&i.minSpatialSegmentationIdc>>8,255&i.minSpatialSegmentationIdc,252&n,252&i.chromaFormat,248&i.bitDepthLumaMinus8,248&i.bitDepthChromaMinus8,0,0,0|t.numTemporalLayers<<3|t.temporalIdNested<<2|3,3].concat(Y(e.vps[0],32)).concat(Y(e.sps[0],33)).concat(Y(e.pps[0],34)))))}return a}(r),Q=function(e){f()(r,e);var n=z(r);function r(e){h()(this,r);var t=e.pixelRatio[0],i=e.pixelRatio[1];return n.call(this,p.hvc1,e,new G(e,e.hevc_vps,e.hevc_sps,e.hevc_pps).bytes,(new U).bytes,new j(t,i).bytes)}return r}(i);var K=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e){h()(this,a);var t=e.sampleRate;return r.call(this,p[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}return a}(r);function $(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)}}var Z=function(e){f()(n,e);var i=$(n);function n(e){h()(this,n);var t=e.config,e=t.length;return i.call(this,{type:p.esds,boxHead:!0},new Uint8Array([].concat(y()(o),[3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]).concat(t).concat([6,1,2])))}return n}(t),X=function(e){f()(r,e);var n=$(r);function r(e){h()(this,r);var t=e.sampleRate,i=e.channelCount;return n.call(this,p.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,t>>8&255,255&t,0,0]),new Z(e).bytes)}return r}(t);var J=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e){h()(this,a);var t=new Uint8Array([0,0,0,0,0,0,0,1]),e=new("audio"===e.type?e.isAAC||"mp3"!==e.codec?X:K:/^hvc1/gi.test(e.codec)?Q:H)(e).bytes;return r.call(this,p.stsd,t,e)}return a}(r);var ee=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){return h()(this,r),t.call(this,p.stbl,new J(e).bytes,F,B,N,C)}return r}(t);var te=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){return h()(this,r),t.call(this,p.minf,"audio"===e.type?L:M,R,new ee(e).bytes)}return r}(r);var ie=function(e){f()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function a(e){return h()(this,a),r.call(this,p.mdia,(t=e.timescale,i=e.duration,new A(t,i).bytes),(i=e.type,new q(i).bytes),new te(e).bytes);var t,i}return a}(r);var ne=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){return h()(this,r),t.call(this,p.trak,new w(e).bytes,new ie(e).bytes)}return r}(r);var re=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){h()(this,r);e=e.id;return t.call(this,{type:p.trex,boxHead:!0},new Uint8Array([].concat(y()(o),[e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])))}return r}(t);var ae=function(e){f()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(e){return h()(this,r),t.call.apply(t,[this,p.mvex].concat(y()(e)))}return r}(r);var oe=function(e){f()(s,e);var i,n,o=(i=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function s(e){h()(this,s);for(var t,i,n,r=e.length,a=[];r--;)a[r]=((t=e[r]).duration=t.duration||4294967295,new ne(t).bytes);return o.call.apply(o,[this,p.moov,(i=e[0].timescale,n=e[0].duration,new I(i,n).bytes)].concat(a,[function(e){for(var t,i=e.length,n=[];i--;)n[i]=(t=e[i],new re(t).bytes);return new ae(n).bytes}(e)]))}return s}(r),se={initSegment:function(t){var e,i=new oe(t).bytes,t=new _(t).bytes;try{e=new Uint8Array(t.byteLength+i.byteLength)}catch(e){throw"mp4 initSegment alloc mem err ".concat(t.byteLength,"-").concat(i.byteLength)}return e.set(t),e.set(i,t.byteLength),e},moof:function(e,t,i){return new P(e,t,i).bytes},mdat:function(e){return new g(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1]).bytes}}},function(e,t,i){"use strict";function n(e){return[255&e]}function r(e){return[255&e,e>>8&255]}function a(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return B(e,23,4)}function c(e){return B(e,52,8)}function d(e,t,i,n){var r=b(i),i=E(e);if(r+t>i.byteLength)throw N(R);return e=E(i.buffer).bytes,i=r+i.byteOffset,t=e.slice(i,i+t),n?t:t.reverse()}function u(e,t,i,n,r,a){if(i=b(i),e=E(e),i+t>e.byteLength)throw N(R);for(var o=E(e.buffer).bytes,s=i+e.byteOffset,c=n(+r),d=0;d<t;d++)o[s+d]=c[a?d:t-d-1]}var l=i(24),h=i(47),f=i(266),p=i(88),_=i(217),g=i(23),y=i(184),v=i(93),m=i(44),b=i(276),k=i(353),x=i(179),S=i(158),T=i(129).f,P=i(50).f,I=i(244),w=i(155),A=i(109),E=A.get,D=A.set,q="ArrayBuffer",O="DataView",R="Wrong index",L=l.ArrayBuffer,M=L,C=l.DataView,i=C&&C.prototype,A=Object.prototype,N=l.RangeError,B=k.pack,F=k.unpack,k=function(e,t){P(e.prototype,t,{get:function(){return E(this)[t]}})};if(f){if(!g(function(){L(1)})||!g(function(){new L(-1)})||g(function(){return new L,new L(1.5),new L(NaN),L.name!=q})){for(var U,g=(M=function(e){return y(this,M),new L(b(e))}).prototype=L.prototype,j=T(L),V=0;j.length>V;)(U=j[V++])in M||p(M,U,L[U]);g.constructor=M}S&&x(i)!==A&&S(i,A);var A=new C(new M(2)),W=i.setInt8;A.setInt8(0,2147483648),A.setInt8(1,2147483649),!A.getInt8(0)&&A.getInt8(1)||_(i,{setInt8:function(e,t){W.call(this,e,t<<24>>24)},setUint8:function(e,t){W.call(this,e,t<<24>>24)}},{unsafe:!0})}else M=function(e){y(this,M,q);e=b(e);D(this,{bytes:I.call(new Array(e),0),byteLength:e}),h||(this.byteLength=e)},C=function(e,t,i){y(this,C,O),y(e,M,O);var n=E(e).byteLength,t=v(t);if(t<0||n<t)throw N("Wrong offset");if(t+(i=void 0===i?n-t:m(i))>n)throw N("Wrong length");D(this,{buffer:e,byteLength:i,byteOffset:t}),h||(this.buffer=e,this.byteLength=i,this.byteOffset=t)},h&&(k(M,"byteLength"),k(C,"buffer"),k(C,"byteLength"),k(C,"byteOffset")),_(C.prototype,{getInt8:function(e){return d(this,1,e)[0]<<24>>24},getUint8:function(e){return d(this,1,e)[0]},getInt16:function(e){e=d(this,2,e,1<arguments.length?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=d(this,2,e,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(e){return o(d(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return o(d(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return F(d(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return F(d(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){u(this,1,e,n,t)},setUint8:function(e,t){u(this,1,e,n,t)},setInt16:function(e,t){u(this,2,e,r,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){u(this,2,e,r,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){u(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){u(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){u(this,4,e,s,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){u(this,8,e,c,t,2<arguments.length?arguments[2]:void 0)}});w(M,q),w(C,O),e.exports={ArrayBuffer:M,DataView:C}},function(e,t,i){var u=i(103),l=i(81),h=i(134),f=i(44),i=function(d){return function(e,t,i,n){u(t);var r=l(e),a=h(r),o=f(r.length),s=d?o-1:0,c=d?-1:1;if(i<2)for(;;){if(s in a){n=a[s],s+=c;break}if(s+=c,d?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;d?0<=s:s<o;s+=c)s in a&&(n=t(n,a[s],s,r));return n}};e.exports={left:i(!1),right:i(!0)}},,function(e,t,i){function g(e,t){this.stopped=e,this.result=t}var y=i(35),v=i(229),m=i(44),b=i(135),k=i(197),x=i(261);e.exports=function(e,t,i){function n(e){return a&&x(a),new g(!0,e)}function r(e){return h?(y(e),p?_(e[0],e[1],n):_(e[0],e[1])):p?_(e,n):_(e)}var a,o,s,c,d,u,l=i&&i.that,h=!(!i||!i.AS_ENTRIES),f=!(!i||!i.IS_ITERATOR),p=!(!i||!i.INTERRUPTED),_=b(t,l,1+h+p);if(f)a=e;else{if("function"!=typeof(f=k(e)))throw TypeError("Target is not iterable");if(v(f)){for(o=0,s=m(e.length);o<s;o++)if((c=r(e[o]))&&c instanceof g)return c;return new g(!1)}a=f.call(e)}for(d=a.next;!(u=d.call(a)).done;){try{c=r(u.value)}catch(e){throw x(a),e}if("object"==typeof c&&c&&c instanceof g)return c}return new g(!1)}},function(e,t,i){var n=i(35);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},function(e,t,i){"use strict";function n(){return this}var r=i(247).IteratorPrototype,a=i(122),o=i(120),s=i(155),c=i(178);e.exports=function(e,t,i){t+=" Iterator";return e.prototype=a(r,{next:o(1,i)}),s(e,t,!1,!0),c[t]=n,e}},function(e,t,i){i=i(23);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},,function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"c",function(){return u}),i.d(t,"b",function(){return l}),i(147),i(112),i(37),i(82),i(10),i(204),i(194),i(97),i(185),i(198),i(199),i(29),i(92);var a=i(290),t=i(2),n=i.n(t),t=i(3),t=i.n(t),r=(i(235),i(287),i(27),i(127),i(48),i(224),i(226),i(140),i(169),i(153)),o=i(152);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var c=(t()(d,[{key:"validKey_",value:function(e,t,i){var n=!1;return i=i||this.cachedInjectors_.get(e),t.startsWith("$")||t in e&&(-1<i.map(function(e){return e.key}).indexOf(t)||(n=!0)),{valid:n,descriptor:void 0}}},{key:"ejectApi_",value:function(e,t){Object(r.e)(e,t)&&delete e[t]}},{key:"dispose",value:function(){this.cachedInjectors_.clear()}},{key:"provide",value:function(e,t){var n,r=this,i=this.cachedInjectors_;e&&(n=[],i.has(e)?n=i.get(e):i.set(e,n),t.forEach(function(t){var i;r.validKey_(e,t,n).valid&&(Object(a.a)(e,function(e){return i=Object.getOwnPropertyDescriptor(e,t)}),n.push({key:t,descriptor:i}))}))}},{key:"inject",value:function(a){var e=this.cachedInjectors_;a&&e.forEach(function(e,r){e.forEach(function(e){var t=e.key,i=e.descriptor,n=void 0===i?{}:i,e=!!n.set,i=!!n.get;t in r&&(t in a||(e||i?Object.defineProperty(a,t,Object.assign(Object.assign({},n),{get:i?function(){return r[t]}:void 0,set:e?function(e){return r[t]=e}:void 0})):Object(o.d)(r[t])&&(a[t]=r[t].bind(r),a[t].__target__=r)))})})}},{key:"eject",value:function(t,e){var i=this;this.cachedInjectors_,t&&Array.isArray(e)&&e.forEach(function(e){i.ejectApi_(t,e)})}}]),new d);function d(){n()(this,d),this.cachedInjectors_=new Map}function u(e,t,i){e=e.$__apiDescriptorQueue__=e.$__apiDescriptorQueue__||[];if(i)return Array.isArray(e)&&-1==e.map(function(e){return e.key}).indexOf(t)&&e.push({key:t,descriptor:i}),i}function l(){var r=[];return Object(a.b)(this,function(e){e=e.$__apiDescriptorQueue__;if(Array.isArray(e)){var t,i=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return s(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;-1===r.indexOf(n.key)&&r.push(n.key)}}catch(e){i.e(e)}finally{i.f()}}}),r}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,i){"use strict";var n=i(22),r=i(24),a=i(257),i=i(181),a=a.ArrayBuffer;n({global:!0,forced:r.ArrayBuffer!==a},{ArrayBuffer:a}),i("ArrayBuffer")},,function(e,t,i){"use strict";var r=i(102),a=i(93),o=i(44),i=i(116),s=Math.min,c=[].lastIndexOf,d=!!c&&1/[1].lastIndexOf(1,-0)<0,i=i("lastIndexOf");e.exports=d||!i?function(e){if(d)return c.apply(this,arguments)||0;var t=r(this),i=o(t.length),n=i-1;for((n=1<arguments.length?s(n,a(arguments[1])):n)<0&&(n=i+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}:c},function(e,t,i){var n=i(22),r=i(24),a=i(182),o=[].slice,i=function(r){return function(e,t){var i=2<arguments.length,n=i?o.call(arguments,2):void 0;return r(i?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:i(r.setTimeout),setInterval:i(r.setInterval)})},function(e,t,i){"use strict";var n=i(22),r=i(258).left,a=i(116),o=i(165),i=i(200);n({target:"Array",proto:!0,forced:!a("reduce")||!i&&79<o&&o<83},{reduce:function(e){return r(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}})},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return f}),i(9);var t=i(2),a=i.n(t),t=i(3),o=i.n(t),t=i(4),s=i.n(t),t=i(5),r=i.n(t),t=i(1),c=i.n(t),d=(i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46),i(329)),u=i(51),t=i(133),l=i(152);function h(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c()(i);return t=n?(e=c()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),r()(this,t)}}var t=function(e){s()(r,e);var n=h(r);function r(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a()(this,r),(t=n.call(this)).eventManager_=new d.a,i.debug&&(u.a.enable=!0),t.ctx_=e,t.options_=i,t}return o()(r,[{key:"endStream",get:function(){return null}},{key:"listenEndStream_",value:function(){var t=this;this.eventManager_.on(this.endStream,"data",function(e){t.emit("ESD",e)}).on(this.endStream,"done",function(e){t.emit("O",e)}).on(this.ctx_,"error",function(e){t.emit("E",e)})}},{key:"reset",value:function(){}},{key:"destroy",value:function(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}]),r}(t.a),n=function(e){s()(r,e);var n=h(r);function r(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a()(this,r),(t=n.call(this,e,i)).eventManager_.on(t.ctx_,"info",function(e){t.emit("demux_info",e)}),t}return o()(r,[{key:"constraintPushData_",value:function(e){var t=null;return Object(l.a)(e)||Object(l.k)(e)?Object(l.a)(e)?new Uint8Array(e):e:t}}]),r}(t),f=function(e){s()(n,e);var i=h(n);function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a()(this,n),i.call(this,e,t)}return n}(t)},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]},,function(e,t,i){"use strict";function _(e,t){for(var i=0,n=t.length,r=new(H(e))(n);i<n;)r[i]=t[i++];return r}function g(e){var t;return e instanceof B||"ArrayBuffer"==(t=f(e))||"SharedArrayBuffer"==t}function n(e,t){return z(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}var a=i(22),o=i(24),r=i(47),s=i(352),c=i(80),d=i(257),y=i(184),u=i(120),v=i(88),m=i(44),b=i(276),k=i(277),l=i(121),h=i(76),f=i(170),x=i(39),S=i(122),T=i(158),P=i(129).f,I=i(355),w=i(104).forEach,A=i(181),p=i(50),E=i(111),D=i(109),q=i(180),O=D.get,R=D.set,L=p.f,M=E.f,C=Math.round,N=o.RangeError,B=d.ArrayBuffer,F=d.DataView,U=c.NATIVE_ARRAY_BUFFER_VIEWS,j=c.TYPED_ARRAY_TAG,V=c.TypedArray,W=c.TypedArrayPrototype,H=c.aTypedArrayConstructor,z=c.isTypedArray,Y="BYTES_PER_ELEMENT",G="Wrong length",D=function(e,t){L(e,t,{get:function(){return O(this)[t]}})},d=function(e,t){return n(e,t=l(t,!0))?u(2,e[t]):M(e,t)},c=function(e,t,i){return!(n(e,t=l(t,!0))&&x(i)&&h(i,"value"))||h(i,"get")||h(i,"set")||i.configurable||h(i,"writable")&&!i.writable||h(i,"enumerable")&&!i.enumerable?L(e,t,i):(e[t]=i.value,e)};r?(U||(E.f=d,p.f=c,D(W,"buffer"),D(W,"byteOffset"),D(W,"byteLength"),D(W,"length")),a({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:d,defineProperty:c}),e.exports=function(e,t,d){var u=e.match(/\d+$/)[0]/8,l=e+(d?"Clamped":"")+"Array",h="get"+e,f="set"+e,r=o[l],p=r,i=p&&p.prototype,e={};U?s&&(p=t(function(e,t,i,n){return y(e,p,l),q(x(t)?g(t)?void 0!==n?new r(t,k(i,u),n):void 0!==i?new r(t,k(i,u)):new r(t):z(t)?_(p,t):I.call(p,t):new r(b(t)),e,p)}),T&&T(p,V),w(P(r),function(e){e in p||v(p,e,r[e])}),p.prototype=i):(p=t(function(e,t,i,n){y(e,p,l);var r,a,o=0,s=0;if(x(t)){if(!g(t))return z(t)?_(p,t):I.call(p,t);var c=t,s=k(i,u),i=t.byteLength;if(void 0===n){if(i%u)throw N(G);if((r=i-s)<0)throw N(G)}else if((r=m(n)*u)+s>i)throw N(G);a=r/u}else a=b(t),c=new B(r=a*u);for(R(e,{buffer:c,byteOffset:s,byteLength:r,length:a,view:new F(c)});o<a;)!function(e,t){L(e,t,{get:function(){return function(e,t){e=O(e);return e.view[h](t*u+e.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){e=O(e);d&&(i=(i=C(i))<0?0:255<i?255:255&i),e.view[f](t*u+e.byteOffset,i,!0)}(this,t,e)},enumerable:!0})}(e,o++)}),T&&T(p,V),i=p.prototype=S(W)),i.constructor!==p&&v(i,"constructor",p),j&&v(i,j,l),e[l]=p,a({global:!0,forced:p!=r,sham:!U},e),Y in p||v(p,Y,u),Y in i||v(i,Y,u),A(l)}):e.exports=function(){}},function(e,t,i){var n=i(93),r=i(44);e.exports=function(e){if(void 0===e)return 0;var t=n(e),e=r(t);if(t!==e)throw RangeError("Wrong length or index");return e}},function(e,t,i){var n=i(354);e.exports=function(e,t){e=n(e);if(e%t)throw RangeError("Wrong offset");return e}},function(e,t,i){var n=i(22),r=i(257);n({global:!0,forced:!i(266)},{DataView:r.DataView})},function(e,t,i){var n=i(280);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){i=i(24);e.exports=i.Promise},function(e,t,i){var n,r,a,o,s,c,d,u,l=i(24),h=i(111).f,f=i(248).set,p=i(249),_=i(283),g=i(200),y=l.MutationObserver||l.WebKitMutationObserver,v=l.document,m=l.process,i=l.Promise,h=h(l,"queueMicrotask"),h=h&&h.value;h||(n=function(){var e,t;for(g&&(e=m.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():a=void 0,e}}a=void 0,e&&e.enter()},o=p||g||_||!y||!v?i&&i.resolve?(d=i.resolve(void 0),u=d.then,function(){u.call(d,n)}):g?function(){m.nextTick(n)}:function(){f.call(l,n)}:(s=!0,c=v.createTextNode(""),new y(n).observe(c,{characterData:!0}),function(){c.data=s=!s})),e.exports=h||function(e){e={fn:e,next:void 0};a&&(a.next=e),r||(r=e,o()),a=e}},function(e,t,i){i=i(182);e.exports=/web0s(?!.*chrome)/i.test(i)},function(e,t,i){var n=i(35),r=i(39),a=i(250);e.exports=function(e,t){if(n(e),r(t)&&t.constructor===e)return t;e=a.f(e);return(0,e.resolve)(t),e.promise}},function(e,t,i){var n=i(24);e.exports=function(e,t){var i=n.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,i){"use strict";var n=i(22),r=i(111).f,a=i(44),o=i(369),s=i(89),c=i(370),i=i(136),d="".startsWith,u=Math.min,c=c("startsWith");n({target:"String",proto:!0,forced:!(!i&&!c&&((r=r(String.prototype,"startsWith"))&&!r.writable)||c)},{startsWith:function(e){var t=String(s(this));o(e);var i=a(u(1<arguments.length?arguments[1]:void 0,t.length)),e=String(e);return d?d.call(t,e,i):t.slice(i,i+e.length)===e}})},function(e,t,i){var n=i(23),r=i(31),a=i(136),o=r("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),i=e.searchParams,n="";return e.pathname="c%20d",i.forEach(function(e,t){i.delete("b"),n+=t+e}),a&&!e.toJSON||!i.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==i.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!i[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){"use strict";function n(e,t){e=Object.getPrototypeOf(e);null!=e&&(t(e)||n(e,t))}function r(e,t){t(e)||n(e,t)}i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i(367)},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var t=i(32),s=i.n(t);function n(i,n){"object"!=s()(i)&&(i=[i]);var r=document.getElementsByTagName("head").item(0)||document.documentElement,a=[],o=i.length-1;!function e(t){a[t]=document.createElement("script"),a[t].setAttribute("type","text/javascript"),a[t].onload=a[t].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),t!=o?e(t+1):"function"==typeof n&&n(!0))},a[t].onerror=a[t].onstalled=function(){"function"==typeof n&&n(!1)},a[t].setAttribute("src",i[t]),r.appendChild(a[t])}(0)}},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,'@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}iqp,iqpdiv{display:block}.iqp-player{position:relative;width:100%;height:100%;min-width:200px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player.iqp-full-screen50 video{width:50%!important;height:50%!important}.iqp-player.iqp-full-screen50 video,.iqp-player.iqp-full-screen75 video{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.iqp-player.iqp-full-screen75 video{width:75%!important;height:75%!important}.iqp-player.iqp-web-screen{position:fixed;left:0;top:0;z-index:4201}.iqp-player *,.iqp-player :after,.iqp-player :before{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none;margin:0;padding:0}.iqp-player p{margin:0;padding:0}.iqp-player .clearfix:after,.iqp-player .clearfix:before{content:"";display:table}.iqp-player .clearfix:after{clear:both}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center}.iqp-player.iqp-player-mini{cursor:pointer}.dn{display:none!important}.bottom-public{position:absolute;bottom:0;height:56px;width:100%;z-index:100}.bottom-public .btn-play{border:10px dashed transparent;border-left:15px solid #ababab;display:inline-block;left:20px;top:10px;position:absolute;outline:none}.bottom-public .btn-pause{display:inline-block;left:20px;top:13px}.bottom-public .btn-pause,.bottom-public .btn-pause:before{position:absolute;height:15px;width:2px;background-color:#ababab}.bottom-public .btn-pause:before{content:"";display:block;left:10px}.bottom-public .bottom-public_play,.bottom-public .bottom-public_voice{background:rgba(26,26,26,.8);width:36px;height:36px;border-radius:50%;position:absolute;text-align:left}.bottom-public .bottom-public_play{left:20px}.bottom-public .bottom-public_play .btn-play{left:12px;top:9px;-webkit-transition:none;transition:none;z-index:1}.bottom-public .bottom-public_play .btn-pause{left:12px;top:10px}.bottom-public .bottom-public_play .btn-pause,.bottom-public .bottom-public_play .btn-pause:before{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.bottom-public .bottom-public_play:hover .btn-pause,.bottom-public .bottom-public_play:hover .btn-pause:before{background-color:#00be06}.bottom-public .bottom-public_play:hover .btn-play{border-left-color:#6cc900}.bottom-public .bottom-public_voice{left:74px;text-align:left}.bottom-public .bottom-public_voice i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:18px;height:14px;position:relative;display:inline-block;top:13px;cursor:pointer;left:5px}.bottom-public .bottom-public_voice .voice-big{left:1px;top:11px;width:26px;background-position:-65px 0!important}.bottom-public .bottom-public_voice .voice-no{left:10px;top:11px;background-position:0 0!important}.bottom-public .bottom-public_voice:hover .voice-big{background-position:-58px -180px!important;left:2px}.bottom-public .know-detail{padding:9px 15px;border-radius:30px;background:rgba(26,26,26,.8);display:block;float:right;color:#fff;margin-right:72px;line-height:18px;font-size:14px}.bottom-public .know-detail:hover{color:#57a900}.bottom-public .public-screen{background:rgba(26,26,26,.8);width:35px;height:35px;border-radius:50%;position:absolute;right:20px;text-align:left}.bottom-public .public-screen i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:20px;height:20px;display:inline-block;position:relative;top:7px;left:9px}.bottom-public .public-screen:hover .screen-small{background-position:0 -28px}.bottom-public .public-screen:hover .screen-all{background-position:-94px -28px}.bottom-public .public-screen .screen-small{background-position:-34px -28px}.bottom-public .public-screen .screen-all{background-position:-65px -28px}@font-face{font-family:ds-digital;src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot);src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.woff) format("woff"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.ttf) format("truetype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.svg#iconfont) format("svg")}.iqp-bottom-detail{position:absolute;bottom:66px;right:20px;width:90px;height:26px;line-height:26px;border-radius:13px;text-align:center;color:#fff;background-color:#00be06;z-index:100;cursor:pointer}.iqp-bottom-detail:before{content:"";width:28px;height:28px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) 0 -120px;float:right;-webkit-transform:scale(.5);transform:scale(.5);margin:0 2px 0 -14px}.iqp-bottom-detail:hover{background-color:#00c806}.iqp-big-mode .iqp-bottom-detail{bottom:80px}.iqp-player-icon{background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) no-repeat}@font-face{font-family:pcw-player-iconfont;src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot);src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.woff) format("woff"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.ttf) format("truetype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.svg#iconfont) format("svg")}.player-iconfont{font-family:pcw-player-iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.player-iconfont.icon-shuaxin:before{content:"\\e68c"}',""])},function(e,t){e.exports="<iqpdiv data-player-hook=container class=iqp-player style=width:100%;height:100%> <iqpdiv data-player-hook=ivoslayer style=display:none> </iqpdiv> <iqpdiv tabindex=-1 class=iqp-player data-player-hook=mainlayer> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> <iqpdiv class=iqp-barrage></iqpdiv> <div id=qiguanAIBox class=qiguan-baike></div> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv> </iqpdiv>"},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-pad" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mobile" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mini" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow data-style></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:350px;white-space:normal}.iqp-logo-loading .iqp-logoload-gif{width:350px}.iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}.iqp-big-mode .iqp-logo-loading .iqp-logoload-box{width:400px}",""])},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:350px;white-space:normal}.iqp-logo-loading .iqp-logoload-gif{width:350px}.iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}.iqp-big-mode .iqp-logo-loading .iqp-logoload-box{width:400px}",""])},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-player-mobile .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:263px;white-space:normal}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-bg{width:128px;height:59px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpz_loading180528.png) no-repeat;margin-bottom:27px;margin-left:auto;margin-right:auto;background-size:128px 59px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-line{width:225px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:225px 1.5px;margin-left:auto;margin-right:auto}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-bg{width:169px;height:53px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vip_loading.png) no-repeat;background-size:169px 53px;margin-bottom:15px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-line{width:202.5px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:202.5px 1.5px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-cp .iqp-logoload-bg{width:90px;height:80px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycp_loading180528.png) no-repeat;background-size:90px 80px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-db .iqp-logoload-bg{width:196px;height:52px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdb_loading180528.png) no-repeat;background-size:196px 52px;margin-bottom:22px}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}",""])},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:14px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:24px;height:24px;margin-right:10px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat}",""])},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:12px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:18px;height:18px;margin-right:5px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat;background-size:18px 18px}",""])},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_vip.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_produced.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_exclusive.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_image> <img class=loadingImage width=100% height=100% /> <iqpdiv class=iqp-btn-mid> <iqpdiv class=iqp-mid-circle> <iqpdiv class=iqp-mid-loading> <svg aria-hidden=true class="iqp-icon iqp-icon-loading"> <use xlink:href=#iqp-svg-loading class="iqp-svg-symbol iqp-svg-loading"> </use> </svg> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_common.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loading" aria-hidden=true> <use xlink:href=#iqp-svg-loading></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img src=//www.iqiyipic.com/player/cn/pad_vip.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img src=//www.iqiyipic.com/player/cn/pad_produced.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img src=//www.iqiyipic.com/player/cn/pad_exclusive.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img src=//www.iqiyipic.com/player/cn/pad_common.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText> </iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText> </iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,"@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}.iqp-layer-loading .iqp-icon-loadingmini{color:#00cc36;width:32px;height:32px;-webkit-animation:iqp-rotate-360 1s infinite;animation:iqp-rotate-360 1s infinite}",""])},function(e,t){e.exports="<iqpdiv data-player-hook=loadingposter class=iqp-poster style=display:none;background-size:cover></iqpdiv>"},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loadingmini" aria-hidden=true> <use xlink:href=#iqp-svg-loadingmini></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-player-vippay-popup{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;text-align:center;z-index:100}.iqp-player-vippay-popup .iqp-vippay-popup{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:510px;text-align:left;vertical-align:middle}.iqp-player-vippay-popup .iqp-popup-main{text-align:center}.iqp-player-vippay-popup .iqp-major-txt{display:inline-block;max-width:410px;text-align:left;font-size:16px;color:#fff;line-height:26px}.iqp-player-vippay-popup .iqp-btn-switch{direction:rtl}.iqp-player-vippay-popup .iqp-btn-wrap{text-align:center;font-size:0;padding:20px 0 30px;margin:0 -7px}.iqp-player-vippay-popup .iqp-vippay-btn{position:relative;display:inline-block;margin:0 7px;width:242px;height:36px;line-height:36px;background-color:#dab176;color:#582d00;border-radius:18px;text-align:center;font-size:16px;text-decoration:none;cursor:pointer;vertical-align:top;direction:ltr}.iqp-player-vippay-popup .iqp-vippay-btn:hover{color:#582d00;background-color:#e2bc81}.iqp-player-vippay-popup .iqp-vip-popup-profit{overflow:hidden}.iqp-player-vippay-popup .iqp-profit-h3{color:#c8a06a;font-size:16px;padding:4px 0 16px}.iqp-player-vippay-popup .iqp-profit-list{margin-right:-54px;*zoom:1}.iqp-player-vippay-popup .iqp-profit-item{float:left;padding-bottom:20px;padding-right:53px}.iqp-player-vippay-popup .iqp-profit-txt{font-size:12px;color:#fff}.iqp-player-vippay-popup .iqp-sprite-player-pay{display:inline-block;width:26px;height:26px;vertical-align:-8px;margin-right:7px;background:url(//www.iqiyipic.com/common/fix/site-v4/play/sprite-player-pay-200306.png) no-repeat}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-free-con-icon{background-position:0 -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-no-AD-icon{background-position:-40px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-vip-sign-icon{background-position:-80px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-request-play-icon{background-position:-120px -20px}",""])},function(e,t){e.exports=' <iqpdiv class=iqp-player-vippay-popup data-player-hook=vippay style=display:none;position:absolute;top:0;left:0;height:100%;width:100%> <iqpdiv class=iqp-vippay-popup> <iqpdiv class=iqp-popup-main> <iqp class=iqp-major-txt data-player-hook=viptxt></iqp> <iqpdiv class=iqp-btn-wrap> <a href=javascript:; class=iqp-vippay-btn data-player-hook=playbtn></a> </iqpdiv> </iqpdiv> <iqpdiv class=iqp-popup-intro> <iqpdiv class=iqp-vip-popup-profit> <iqph3 class=iqp-profit-h3>VIP</iqph3> <ul class=iqp-profit-list> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-free-con-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-vip-sign-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-request-play-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-no-AD-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> </ul> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,i){(e.exports=i(36)(!1)).push([e.i,".iqp-layer-tw-guide .download-intlapp-tip{line-height:20px;font-size:14px}.iqp-layer-tw-guide .download-intlapp-btn{display:inline-block;color:#fff;height:36px;line-height:36px;min-width:88px;padding:0 16px;border-radius:2px;background-color:#00cc36;font-size:14px;margin:24px 0 16px}.iqp-layer-tw-guide .download-intlapp-watch{font-weight:600;color:#00c234;font-size:13px;line-height:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.iqp-layer-tw-guide .download-intlapp-watch .icon-shuaxin{vertical-align:-1px;margin-right:5px}",""])},function(e,t){e.exports=' <iqpdiv class="iqp-layer iqp-layer-tw-guide" data-player-hook=mobiletwblock style=display:none> <iqpdiv class=iqp-layer-con> <div class=download-intlapp-tip> <p data-player-hook=twinfo> 5APP</p> </div> <div> <a class=download-intlapp-btn data-player-hook=mobiledownload>APP </a> </div> <div class=download-intlapp-watch data-player-hook=mobiletwwatch> <span data-player-hook=twpreview style=display:none>5 > </span> <span data-player-hook=twreplay style=display:none> <i class="player-iconfont icon-shuaxin"></i> </span> </div> </iqpdiv> </iqpdiv>'},function(e,t,i){"use strict";i=i(8);t.a={error_code_title1:"~",error_code_desc1:"",error_code_desc2:"",error_code_desc6:" ",error_code_desc7:" ",error_code_title9:" ",error_code_title10:"",error_code_desc10:"   ",error_code_desc11:"  ",error_code_title12:"  ",error_code_desc12:" 1080P",error_code_title13:" ",error_code_title15:"  iQIYI",error_code_desc13:" ",error_code_desc14:"AppApp",error_code_title14:"ChromeFirefox"+(i.a.browser.FIREFOX?"\b<br/>":"")+"",error_code_desc21:"",error_code_desc22:"25 ",error_code_switch_flash:"Flash",error_code_desc_http:"",error_code_title301:"<br/>~",error_code_audio_err:"<br/>~",error_code_vda_err:"  CPU <br/>~",error_code_desc_ad:"... VIP",controls_tip_cqdb:' <a href="javascript:;" class="iqp-txt-selected" data-event="download"></a>',controls_tip_vrplay:"VR APP",controls_tip_history:'<i class="iqp-txt-selected">#time#</i> , ',controls_tip_skipheader:"",controls_tip_skiptailer:"",controls_tip_zstip:"VIP,",controls_tip_cdtip:"VIP,",controls_tip_yytip:"VIP",controls_tip_recharge_type1:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">VIP</a>',controls_tip_recharge_type4:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type2:'<i class="iqp-txt-selected">#previewTime#</i>  <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type3:'<i class="iqp-txt-selected">#previewTime#</i>   <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket"></a>',controls_tip_recharge_defaultype:' <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_skipheadertailer:"",controls_yes:"",controls_no:"",controls_tip_precache:"",controls_tip_switching:"",controls_tip_switchedsucc:"",controls_tip_switchwaiting:"",controls_tip_switchedfail:"",controls_tip_switchedpic:"",controls_tip_switchhdr:' <b>#definition#</b>  <a href="javascript:;" class="iqp-txt-selected" data-event="switchHDR"></a>',controls_tip_playspeedguide:"",controls_tip_speed_changed:'<i class="iqp-txt-selected">XX</i>',controls_split_tip:' ( "" )',controls_tip_setting_normal:"",controls_subtitles_tip_switching:"",controls_subtitles_tip_switchedsucc:"",controls_subtitles_tip_switchwaiting:"",controls_subtitles_tip_switchedfail:"",controls_subtitles_tip_switchedpic:"",controls_playlistbtn:"",controls_clickplay_hover:"",controls_clickpause_hover:"",controls_replay_hover:"",controls_forward_hover:"",controls_webfullscreen_hover:"",controls_exitwebfullscreen_hover:"",controls_fullscreen_hover:"",controls_exitfullscreen_hover:"",controls_download:"",controls_download_mobile:"",controls_clientdownload_mobile:"~",controls_cycleplay:"",controls_select_player:"",controls_setting_recommend:"  [ HTML5 ]",controls_setting_playratedesc:"",controls_nextbtn:" ",definition_name_limit:"",definition_name_limit_vd:"240P",definition_name_standard:"",definition_name_standard_vd:"360P",definition_name_high:"",definition_name_high_vd:"480P",definition_name_superhigh:"",definition_name_superhigh_vd:"720P",definition_name_720p:"",definition_name_720p_vd:"720P",definition_name_1080p:"",definition_name_1080p_vd:"1080P",definition_name_hdr:"",definition_name_hdr_vd:"HDR",definition_name_4k:"4k",definition_name_4k_vd:"4k",definition_name_1080P50:"",definition_name_1080P50_vd:"1080P50",definition_name_ad:"",definition_name_auto:"(#definition#)",error_errorcode_text:" ",error_switchplayer:"",error_tryrefresh:"",error_download:"",error_jump:"",error_help:"",error_private_video:" ",error_private_selfsee:"~",error_private_pwderror:"  ",error_confirm:"",error_input_pwd:" ",loading_text:" ",score_task_guide:"10~",score_task_login:"",score_task_success:"<br> #score#",score_task_btn_info1:"",score_task_btn_info2:"",score_task_btn_close1:"",score_task_btn_close2:"",score_task_btn_login:"",score_task_btn_login1:"",ban_btn:" ",ban_tip_001:"2 ",ban_tip_002:" ",ban_tip_004:"",error_maintitle:"Flash",error_fltitle:"Flash",error_h5title:"HTML5",error_fltip:" ",subtitles_switch:"",subtitles_setting:"",subtitles_back:"",subtitles_fontsize:"",subtitles_alpha:"",subtitles_language:"",picture_in_picture:"",contentMenu_bug:"",contentMenu_link:"",contentMenu_timelink:"",contentMenu_shortcut:"",contentMenu_console:"",contentMenu_shortcut_text:"",contentMenu_shortcut_text1_1:" ",contentMenu_shortcut_text1_2:" / ",contentMenu_shortcut_text2_2:"5%",contentMenu_shortcut_text2_4:"5%",contentMenu_shortcut_text3_1:"5",contentMenu_shortcut_text4_1:"5",contentMenu_shortcut_text4_2:"",contentMenu_shortcut_text5_2:"",contentMenu_shortcut_text5_4:"",contentMenu_shortcut_text7_2:" / ",contentMenu_shortcut_text8_2:" / ",contentMenu_shortcut_text9_2:"",contentMenu_shortcut_text10_2:"",infoPanelUnknown:"",infoPanelNetText:"",infoPanelSpeedText:" ",infoPanelWaitingText:"",infoPanelLostText:"",infoPanelProtocolText:"",infoPanelCdnText:"CDN",infoPanelSolutionText:"",infoPanelVideoSizeText:"",infoPanelVoiceText:"",infoPanelEngineText:"",infoPanelVideoTypeText:"",infoPanelDRMText:"DRM",infoPanelDebugText:"",infoPanelDebugBtn:"",big_hotkey_playbackratet_text:"",loading_download_speed:" :",top_tip_like:"",top_tip_cancel_like:"",top_tip_collect:"",top_tip_cancel_collect:"",top_tip_size:"",def_vip:"VIP",def_free:"",def_sport:"",def_login:"",audiotrack_tip_switching:"",audiotrack_tip_switchedsucc:"",audiotrack_tip_switchwaiting:"...",audiotrack_tip_video:"",audiotrack_tip_switchedfail:",",toast_tip_mutestartplay:"",mini_autoplay_loading:"",aiview_request:"...",aiview_neterror:", ",aiview_zero:", "}},function(e,t,i){"use strict";i=i(8);t.a={error_code_title1:"~",error_code_desc1:"",error_code_desc2:"",error_code_desc6:"  ",error_code_desc7:"  ",error_code_title9:" ",error_code_title10:" ",error_code_desc10:"    ",error_code_desc11:" ",error_code_title12:"   ",error_code_desc12:" 1080P",error_code_title13:" ",error_code_title15:" iQIYI",error_code_desc13:" ",error_code_desc14:"AppApp",controls_tip_vrplay:"VR APP",error_code_title14:"ChromeFirefox"+(i.a.browser.FIREFOX?"\b<br/>":"")+"",error_code_desc21:" ",error_code_desc22:"25",error_code_switch_flash:"Flash",error_code_desc_http:"",error_code_title301:" <br/> ~",error_code_audio_err:"  <br/> ~",error_code_vda_err:"  CPU<br/> ~",error_code_desc_ad:"...VIP",controls_tip_history:'<i class="iqp-txt-selected">#time#</i> , ',controls_tip_skipheader:" ",controls_tip_skiptailer:"",controls_tip_zstip:"VIP,",controls_tip_cdtip:"VIP, ",controls_tip_yytip:"VIP,",controls_tip_recharge_type1:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">VIP</a>',controls_tip_recharge_type4:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type2:'<i class="iqp-txt-selected">#previewTime#</i>  <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type3:'<i class="iqp-txt-selected">#previewTime#</i>   <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket"></a>',controls_tip_recharge_defaultype:'<i class="iqp-txt-selected">preview_time</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_skipheadertailer:" ",controls_yes:"",controls_no:"",controls_tip_precache:"",controls_tip_switching:"",controls_tip_switchedsucc:"",controls_tip_switchwaiting:"",controls_tip_switchedfail:"",controls_tip_switchedpic:"",controls_tip_switchhdr:' <b>#definition#</b>  <a href="javascript:;" class="iqp-txt-selected" data-event="switchHDR"></a>',controls_tip_playspeedguide:"",controls_tip_speed_changed:'<i class="iqp-txt-selected">XX</i>',controls_split_tip:' ( "" )',controls_tip_setting_normal:"",controls_subtitles_tip_switching:"",controls_subtitles_tip_switchedsucc:"",controls_subtitles_tip_switchwaiting:"",controls_subtitles_tip_switchedfail:"",controls_subtitles_tip_switchedpic:"",controls_playlistbtn:"",controls_clickplay_hover:"",controls_clickpause_hover:"",controls_replay_hover:"",controls_forward_hover:"",controls_webfullscreen_hover:" ",controls_exitwebfullscreen_hover:" ",controls_fullscreen_hover:"",controls_exitfullscreen_hover:"",controls_download:"",controls_download_mobile:"",controls_clientdownload_mobile:" ~",controls_cycleplay:"",controls_select_player:"",controls_setting_recommend:"  [ HTML5 ]",controls_setting_playratedesc:"",controls_nextbtn:"  ",definition_name_limit:"",definition_name_limit_vd:"240P",definition_name_standard:"",definition_name_standard_vd:"360P",definition_name_high:"",definition_name_high_vd:"480P",definition_name_superhigh:"",definition_name_superhigh_vd:"720P",definition_name_720p:"",definition_name_720p_vd:"720P",definition_name_1080p:"",definition_name_1080p_vd:"1080P",definition_name_hdr:"",definition_name_hdr_vd:"HDR",definition_name_4k:"4k",definition_name_4k_vd:"4k",definition_name_1080P50:"",definition_name_1080P50_vd:"1080P50",definition_name_ad:"",definition_name_auto:"(#definition#)",error_errorcode_text:"",error_switchplayer:"",error_tryrefresh:"",error_jump:"",error_download:"",error_help:"",error_private_video:"  ",error_private_selfsee:"  ~",error_private_pwderror:"",error_confirm:"",error_input_pwd:"",loading_text:" ",score_task_guide:"10 ~",score_task_login:"",score_task_success:" <br> #score#",score_task_btn_info1:"",score_task_btn_info2:"",score_task_btn_close1:"",score_task_btn_close2:"",score_task_btn_login:" ",ban_btn:"",ban_tip_001:"2",ban_tip_002:"",ban_tip_004:"",error_maintitle:"Flash",error_fltitle:"Flash",error_h5title:"HTML5",error_fltip:"",subtitles_switch:"",subtitles_setting:"",subtitles_back:"",subtitles_fontsize:"",subtitles_alpha:"",subtitles_language:"",picture_in_picture:"",contentMenu_bug:"",contentMenu_link:"",contentMenu_shortcut:"",contentMenu_console:"",contentMenu_shortcut_text:"",contentMenu_shortcut_text1_1:" ",contentMenu_shortcut_text1_2:" / ",contentMenu_shortcut_text2_2:"5%",contentMenu_shortcut_text2_4:"5%",contentMenu_shortcut_text3_1:"5",contentMenu_shortcut_text4_1:"5",contentMenu_shortcut_text4_2:"",contentMenu_shortcut_text5_2:"",contentMenu_shortcut_text5_4:"",contentMenu_shortcut_text7_2:" / ",contentMenu_shortcut_text8_2:" / ",contentMenu_shortcut_text9_2:"",contentMenu_shortcut_text10_2:"",infoPanelUnknown:"",infoPanelNetText:"",infoPanelSpeedText:" ",infoPanelWaitingText:"",infoPanelLostText:"",infoPanelProtocolText:" ",infoPanelCdnText:"CDN",infoPanelSolutionText:"",infoPanelVideoSizeText:"",infoPanelVoiceText:"",infoPanelEngineText:"",infoPanelVideoTypeText:"",infoPanelDRMText:"DRM",infoPanelDebugText:"",infoPanelDebugBtn:"",big_hotkey_playbackratet_text:"",loading_download_speed:" :",top_tip_like:"",top_tip_cancel_like:"",top_tip_collect:"",top_tip_cancel_collect:"",top_tip_size:"",def_vip:"",def_free:"",def_login:"",audiotrack_tip_switching:"",audiotrack_tip_switchedsucc:"",audiotrack_tip_switchwaiting:"...",audiotrack_tip_video:" ",audiotrack_tip_switchedfail:"",toast_tip_mutestartplay:"",mini_autoplay_loading:"",aiview_request:"...",aiview_neterror:", ",aiview_zero:""}},,,,,,,,,,,,,,function(e,t,i){"use strict";i(9);var n=i(2),s=i.n(n),r=i(3),c=i.n(r),a=i(4),d=i.n(a),n=i(5),u=i.n(n),r=i(1),l=i.n(r),a=(i(10),i(19),i(107),i(48),i(25),i(115),i(40)),h=i(21),f=i(28),p=i(30),_=i(14),g=i(8),n=i(123),y=i.n(n),v=i(117);var m="1",b="10",k="101";g.a.browser.iPad?(m="2",b="20",k="202"):(g.a.os.ios||g.a.os.android)&&(m="2",b="20",k="201");var o=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return s()(this,a),(t=r.call(this))._core=e,t._pbisdm=1,t}return c()(a,[{key:"_send",value:function(n,r){var a=this,o=this._core,s=o.user;s.isVip(function(e){var t=o.getMovieInfo(),i=51===(i=n.ra||o.getCurrentVD())?59:i,e={bstp:6,block:"B",pf:m,p:b,p1:k,aid:t.albumId||"",c1:t.cid||"",r:t.tvid||"",u:f.a.getFluid()||"",u2:f.a.getJsuid()||"",pu:s.getUid(),pru:_.a.get("P00PRU")||"",v:v.a,ra:i,nu:f.a.getIsNewUser()?1:0,ve:f.a.getEid(),ce:f.a.getWeid(),hu:e?1:-1,ht:t.isVIP?1:0,mod:o.local,plyrtp:0,coop:"",isdm:a._pbisdm,videotp:t.is3D,tmplt:o.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse"};try{Object(h.a)(e,{as:y.a.cmd5x(e.r+""+e.p1+e.u+e.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(e){}t=o.isFullScreen?"4":o.isWebFullScreen?"7":"3",Object(h.a)(e,{wint:t}),o.params.abtest&&(e.abtest=o.params.abtest),e=Object(h.a)(e,n,r),p.a.beacon(e,"//msg.qy.net/b")})}},{key:"sendSeekPingback",value:function(e,t,i){t={rseat:"ply_seek",from:e,to:t,t:20};this._core.getMovieInfo().isShowHeatMap&&(t.s2="lvjing"),i?(t.a="901111_pcwh5_keyboard",this._send(t,!0)):this._send(t)}},{key:"sendSwitchVDPingback",value:function(e){this._send({rseat:"ply_cc",tra:51===e?59:e,t:20,ra:this._core.getCurrentVD()})}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendBlockPingback",value:function(e){e={block:e,t:21};this._core.getMovieInfo().isShowHeatMap&&(e.s2="lvjing"),this._send(e,!0)}},{key:"sendCttBlockPingback",value:function(e,t){t={block:e,rpage:t,t:21};this._core.getMovieInfo().isShowHeatMap&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendCttUserActionPingback",value:function(e,t){this._send({rseat:e,rpage:t,t:20})}},{key:"sendIVUserActionPingback",value:function(e){var t=e.rseat,i=e.r,n=e.block,r=e.rpage,a=this._core.getMovieInfo().tvid,o=this._core.getMovieInfo().albumId,e=this._core.iv_state.uniqueId;this._send({rseat:t||"",block:n||"",t:20,r:i||"",aid:o||a,sqpid:a||"",iamvid:e||"",rpage:r||""},!0)}},{key:"sendIVBlockPingback",value:function(e){var t=e.r,i=e.block,n=e.rpage,e=this._core.getMovieInfo().tvid,n={block:i||"",t:21,r:t||"",aid:this._core.getMovieInfo().albumId||e,sqpid:e||"",iamvid:this._core.iv_state.uniqueId||"",rpage:n||""};this._send(n,!0)}},{key:"setpbisdm",value:function(e){this._pbisdm=e}},{key:"sendBarrageShowRulePagePingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_etiquette"},!0)}},{key:"sendBarrageShowLikePingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_like"},!0)}},{key:"sendBarrageEnsureReportPingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_T0_sub"},!0)}},{key:"sendBarrageShowReportPingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_report"},!0)}},{key:"sendShowSystemBarragePingback",value:function(e){this._send({rpage:"full_ply",block:"dmsys",t:21,tm:e.contentId,aid:this._core.getMovieInfo().albumId,rseat:""},!0)}},{key:"sendClickSystemBarragePingback",value:function(e){this._send({rpage:"full_ply",block:"dmsys",t:20,tm:e.contentId,aid:this._core.getMovieInfo().albumId,rseat:"608241_sysclick"},!0)}},{key:"sendClickSystemBarrageButtonPingback",value:function(e){this._send({rpage:"full_ply",block:"dmsys",t:20,tm:e.contentId,aid:this._core.getMovieInfo().albumId,rseat:"608241_syspicclick"},!0)}},{key:"sendShowControlBarPingback",value:function(){var e={block:"80720_playerctrl",t:21};this._core.getMovieInfo().isShowHeatMap&&(e.s2="lvjing"),this._send(e,!0)}},{key:"sendSeekBarHoverPingback",value:function(e){var t={block:"80720_playerctrl_seekbar",t:21};e&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendShowHeatMapPingback",value:function(){this._send({block:"80720_playerctrl_lvjing",t:21,s2:"lvjing"},!0)}},{key:"showScoreTaskGuidePanel",value:function(){this._send({block:"80720_scorepannel_20m",t:21},!0)}},{key:"closeScoreTaskGuidePanel",value:function(){this._send({rseat:"80720_scorepannel_20mclose",t:20},!0)}},{key:"clickScoreTaskLoginPanel",value:function(){this._send({rseat:"80720_player_login",t:20},!0)}},{key:"showScoreTaskLoginPanel",value:function(){this._send({block:"80720_scorepannel_30mlogin",t:21},!0)}},{key:"showScoreTaskSuccessPanel",value:function(){this._send({rseat:"80720_scorepannel_30msuccess",t:20},!0)}},{key:"hoverVideoListButton",value:function(){this._send({block:"80720_playerctrl_selection",t:21},!0)}},{key:"clickVideoListButton",value:function(){this._send({block:"B",rseat:"80720_playerctrl_selection",t:20},!0)}},{key:"clickVideoListItemTitle",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickVideoListItemImage",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickSubtitlesSwitch",value:function(e){this._send({t:20,rseat:"80720_playerctrl_menu_subtitleswitch"+e},!0)}},{key:"clickSubtitlesSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle"},!0)}},{key:"clickSubtitlesFontsizeSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size"},!0)}},{key:"clickSubtitlesAlphaSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp"},!0)}},{key:"clickSubtitlesLanguageSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang"},!0)}},{key:"changeSubtitlesLanguage",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang_change"},!0)}},{key:"showSubtitlesPanel1",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel1"},!0)}},{key:"showSubtitlesPanel2",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel2"},!0)}},{key:"showContentMenu",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel"},!0)}},{key:"clickCtxMenuBugBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_feedback"},!0)}},{key:"clickCtxMenuLinkBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_linkcopy"},!0)}},{key:"clickCtxMenuShortcutBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_keyboard"},!0)}},{key:"clickCtxMenuConsoleBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_debugger"},!0)}},{key:"clickShowInfoPanelBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_state"},!0)}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendPubBlock",value:function(e){var t={block:"action_bfq",t:21};Object(h.a)(t,e),this._send(t,!0)}},{key:"sendPubClick",value:function(e){var t={block:"bfq",rseat:"80720_action_bfq",t:20};Object(h.a)(t,e),this._send(t,!0)}},{key:"sendIVOSClick",value:function(e,t){this._send({t:20,rseat:e,biz:t},!0)}},{key:"sendIVOSShow",value:function(e,t){this._send({t:21,block:e,biz:t},!0)}},{key:"sendTwBlockShow",value:function(e,t){this._send({t:21,block:t,rpage:e},!0)}},{key:"sendTwBlockClick",value:function(e,t,i){this._send({t:20,rpage:e,block:t,rseat:i},!0)}}]),a}(a.a);var x="1",S="10",T="101";g.a.browser.iPad?(x="2",S="20",T="202"):(g.a.os.ios||g.a.os.android)&&(x="2",S="20",T="201");var P=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return s()(this,a),(t=r.call(this))._core=e,t._pbisdm=1,t}return c()(a,[{key:"_send",value:function(i,n){var r=this,a=this._core,o=a.user;o.isVip(function(e){var t=a.getMovieInfo(),e={bstp:6,block:"B",pf:x,p:S,p1:T,c1:t.cid||"",r:t.tvid||"",u:f.a.getFluid()||"",u2:f.a.getJsuid()||"",pu:o.getUid(),pru:_.a.get("P00PRU")||"",v:v.a,ra:i.ra||a.getCurrentVD(),nu:f.a.getIsNewUser()||"",ve:f.a.getEid(),ce:f.a.getWeid(),hu:e?1:-1,ht:t.isVIP?1:0,mod:a.local,plyrtp:0,coop:"",isdm:r._pbisdm,videotp:t.is3D,tmplt:a.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse"};try{Object(h.a)(e,{as:y.a.cmd5x(e.r+""+e.p1+e.u+e.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(e){}t=a.isFullScreen?"4":a.isWebFullScreen?"7":"3",Object(h.a)(e,{wint:t}),e=Object(h.a)(e,i,n),p.a.beacon(e,"//msg.qy.net/b")})}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendClickTitlePingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_title",t:20},!0)}},{key:"sendClickVideoPingback",value:function(){this._core.isSimple||this._send({block:"CD",rseat:"908261_select_player_image",t:20},!0)}},{key:"sendClickPlayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_play",t:20},!0)}},{key:"sendClickPauseBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_pause",t:20},!0)}},{key:"sendClickReplayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_replay",t:20},!0)}},{key:"sendClickPlayNextBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_next",t:20},!0)}},{key:"sendClickPlayCancelBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_cancel",t:20},!0)}},{key:"sendVoiceOnPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundon",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundon",e.block="K"),this._send(e,!0)}},{key:"sendVoiceOffPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundoff",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundoff",e.block="K"),this._send(e,!0)}},{key:"sendVoiceChangePingback",value:function(e){this._send({block:"CD",rseat:"908261_select_player_sound"+e,t:20},!0)}}]),a}(a.a),r=(i(26),i(17),i(292)),I=i.n(r),n=i(293),w=i.n(n),r=i(294),A=i.n(r),n=i(295),E=i.n(n),r=i(296),D=i.n(r),n=i(18);var q,O=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return s()(this,a),r.call(this,"container",e,t)}return c()(a,null,[{key:"css",value:function(){return I.a.toString()}},{key:"html",value:function(){return w.a.toString()}},{key:"padHtml",value:function(){return A.a.toString()}},{key:"mobileHtml",value:function(){return E.a.toString()}},{key:"miniHtml",value:function(e){e=e?'style="object-fit: cover; transform: scale(1.32);"':"";return D.a.toString().replace("data-style",e)}}]),a}(n.a),r=(i(37),i(168),i(297)),R=i.n(r),r=i(298),L=i.n(r),r=i(299),M=i.n(r),r=i(300),C=i.n(r),r=i(301),N=i.n(r),r=i(302),B=i.n(r),r=i(303),F=i.n(r),r=i(304),U=i.n(r),j=i(0);var V=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return s()(this,a),(t=r.call(this,"loading",e,t)).loadingType=t.plugin.querySelector('[data-player-hook="loadingType"]'),t.loading=t.plugin.querySelector('[data-player-hook="videolayerLoading"]'),t._speedTimer=-1,q=e.i18nLang,t.showBeginLoadingType="",t.isFadeOut=!1,t.init(),t}return c()(a,[{key:"init",value:function(){var t=this,e=this.view,i=this.engine,n=e.fullscreen,r=e.webfullscreen,a=e.stagesize;g.a.os.ios||g.a.os.android||i.autoplay||i.isMini?this.showBeginLoading():this.hideBeginLoading();e=function(){t.resize()};a&&a.on(e),n&&n.on("change",e),r&&r.on("change",e),this.plugin.querySelector('[data-player-hook="videoLoadingText"]')&&(this.plugin.querySelector('[data-player-hook="videoLoadingText"]').innerHTML=q.loading_text),i.on(j.a.NTF_StatusChanged,function(e){switch(e.state){case j.a.Status_StartPlay:case j.a.Status_Playing:case j.a.Status_AdPlaying:case j.a.Status_AdStartPlay:case j.a.Status_End_Play:"image"==t.showBeginLoadingType?(t.isFadeOut=!0,t.fadeOut(function(){t.hideLoading(),t.hideBeginLoading(),t.plugin.style.opacity=1,t.beginloading.querySelector(".loadingImage").removeAttribute("src"),t.isFadeOut=!1}),t.showBeginLoadingType=""):t.isFadeOut||(t.hideLoading(),t.hideBeginLoading());break;case j.a.Status_AdWaiting:case j.a.Status_Waiting:(g.a.os.ios||g.a.os.android)&&i.getCurrenttime()<1&&t.showLoading();break;case j.a.Status_Loadstart:g.a.os.ios||g.a.os.android||t.showLoading();break;case j.a.Status_Play:(g.a.os.ios||g.a.os.android)&&i.getCurrenttime()<1&&t.showLoading();break;case j.a.Status_PlayError:}},{highPriority:!0}),i.on(j.a.NTF_VideoChange,function(){t.showBeginLoading()}),i.on(j.a.NTF_DefinitionSwitched,function(){t.hideBeginLoading()}),i.on(j.a.NTF_NeedUserGesture4Playback,function(){t.hideBeginLoading()})}},{key:"showBeginLoading",value:function(){var e,t,i,n,r,a,o,s;this.engine.isInteractVideo&&!this.engine.isIVMain||(o=this.view.isTw?"_tw":"",e=this.view.getPlayIndex(),t=this.view.params,s=((i=this.engine.movieinfo).tvid?i:t).imageLoader,a=r=n=!1,this.showBeginLoadingType="",this.beginloading&&(this.beginloading.style.display="none"),-1<e?(i=this.view.videoList[e]).isMember?n=!0:i.isQiyiProduced?r=!0:i.isExclusive&&(a=!0):"true"==t.isMember?n=!0:1==t.qiyiProduced?r=!0:1==t.exclusive&&(a=!0),this.beginloading=n?this.plugin.querySelector('[data-player-hook="videoLoadingVip'+o+'"]'):r?this.plugin.querySelector('[data-player-hook="videoLoadingQiyiProduced'+o+'"]'):a?this.plugin.querySelector('[data-player-hook="videoLoadingExclusive'+o+'"]'):this.plugin.querySelector('[data-player-hook="videoLoadingNormal'+o+'"]'),s&&this.engine.getEngineType()===j.a.ENGINE_TYPE&&!this.engine.isMini&&(this.beginloading=this.plugin.querySelector('[data-player-hook="videoLoadingNormal_image"]'),this.beginloading.querySelector(".loadingImage").setAttribute("src",s),this.showBeginLoadingType="image"),!(o=this.beginloading.querySelector('[data-player-hook="lazygif"]'))||(s=o.getAttribute("lazy_src"))&&(o.setAttribute("src",s),o.removeAttribute("lazy_src")),this.clockDownLoad(),this._begineShow=!0,this.show(),this.beginloading.style.display="block")}},{key:"hideBeginLoading",value:function(){var e;if(this._begineShow=!1,this.hide(),clearInterval(this._speedTimer),this.beginloading&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=""),this.beginloading.style.display="none",e=g.a.os.ios||g.a.os.android?this.plugin.querySelector(".iqp-logo-loading"):this.plugin.querySelector(".videoLogo_loading")))for(var t=0;t<e.length;t++)e[t].style.display="none"}},{key:"showLoading",value:function(){!0!==this._begineShow&&(this.beginloading&&(this.beginloading.style.display="none",this.clockDownLoad()),this.resize(),this.show(),this.loading.style.display="block")}},{key:"clockDownLoad",value:function(){var e=this;clearInterval(this._speedTimer),this.updateDownloadSpeed(),this._speedTimer=setInterval(function(){e.updateDownloadSpeed()},1e3)}},{key:"hideLoading",value:function(){clearInterval(this._speedTimer),this.hide(),this.loading.style.display="none"}},{key:"resize",value:function(){var e;920<this.view.getWrapperArea().width?(e=this.plugin,0<=(" "+e.className+" ").indexOf(" iqp-player_w920 ")||(e.className+=(e.className?" ":"")+"iqp-player_w920")):function(e,t){for(var i=" "+e.className+" ";0<=i.indexOf(" "+t+" ");)i=i.replace(" "+t+" "," ");e.className="function"==typeof i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}(this.plugin,"iqp-player_w920")}},{key:"fadeOut",value:function(t){var i=this,n=i.plugin,r=1e3;n.style.display="",n.style.opacity=r/1e3,function e(){r-=80,0<=n.style.opacity?(n.style.opacity=r/1e3,window.requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,16)):t.call(i)}()}},{key:"updateDownloadSpeed",value:function(){var e=this.view.getDownloadSpeed();e&&this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=q.loading_download_speed+e)}}],[{key:"css",value:function(){return R.a.toString()}},{key:"html",value:function(){return B.a.toString()}},{key:"padCss",value:function(){return L.a.toString()+C.a.toString()}},{key:"padHtml",value:function(){return F.a.toString()}},{key:"mobileCss",value:function(){return M.a.toString()+N.a.toString()}},{key:"mobileHtml",value:function(){return U.a.toString()}}]),a}(n.a),r=i(305),W=i.n(r),r=i(213),H=i.n(r),r=i(306),z=i.n(r),r=i(307),Y=i.n(r);var G=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return s()(this,a),(t=r.call(this,"loading",e,t)).loading=t.plugin.querySelector('[data-player-hook="videolayerLoading"]'),t.init(),t}return c()(a,[{key:"init",value:function(){var t=this,e=this.view,i=this.engine,e=e.stagesize;this.showBeginLoading(),e&&e.on(function(){t.resize()}),i.on(j.a.NTF_StatusChanged,function(e){switch(e.state){case j.a.Status_StartPlay:case j.a.Status_Playing:case j.a.Status_AdPlaying:case j.a.Status_AdStartPlay:case j.a.Status_End_Play:t.hide(),t.toggleBegin("none");break;case j.a.Status_Loadstart:t.showLoading()}}),i.on(j.a.NTF_VideoChange,function(){t.showBeginLoading()}),i.on(j.a.NTF_NeedUserGesture4Playback,function(){t.hide()})}},{key:"showBeginLoading",value:function(){var e=this.view,t=this.engine.params.imageLoader||"",i=this.engine.movieinfo;""!==(t=i&&i.imageLoader?i.imageLoader:t)?(e.loadHtml(z.a.toString(),e.pluginContainer),this.beginloading=document.querySelector('[data-player-hook="loadingposter"]'),this.beginloading.style.backgroundImage='url("'.concat(t,'")'),this.toggleBegin("block"),this.loading.style.display="none"):this.showLoading()}},{key:"showLoading",value:function(){this.toggleBegin("none"),this.resize(),this.loading.style.display="block",this.show()}},{key:"toggleBegin",value:function(e){this.beginloading&&(this.beginloading.style.display=e)}},{key:"resize",value:function(){var e;920<this.view.getWrapperArea().width?(e=this.plugin,0<=(" "+e.className+" ").indexOf(" iqp-player_w920 ")||(e.className+=(e.className?" ":"")+"iqp-player_w920")):function(e,t){for(var i=" "+e.className+" ";0<=i.indexOf(" "+t+" ");)i=i.replace(" "+t+" "," ");e.className="function"==typeof i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}(this.plugin,"iqp-player_w920")}}],[{key:"css",value:function(){return W.a.toString()+H.a.toString()}},{key:"html",value:function(){return Y.a.toString()}}]),a}(n.a),r=1,Q={ID_BEGIN:1,items:{ID_SHOW_CONTROL_BAR:{index:1,status:!0},ID_SHOW_CONTROL_BAR_SEEK_BAR:{index:++r,status:!0},ID_SHOW_CONTROL_BAR_SKIP_TIP:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_VIEW_TIP:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_PREVIEW:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_FF:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_LOOP_PLAY_BTN:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_NEXT_BTN:{index:++r,status:!0},ID_SHOW_CONTROL_BAR_TIME:{index:++r,status:!0},ID_SHOW_CONTROL_BAR_VOLUME:{index:++r,status:!0},ID_SHOW_CONTROL_BAR_FULLSCREEN:{index:++r,status:!0},ID_SHOW_CONTROL_BAR_SETTING:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_CAPTURE:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_CAPTION:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_TRACK:{index:++r,status:!1},ID_SHOW_DOCK:{index:++r,status:!1},ID_SHOW_DOCK_SHARE:{index:++r,status:!1},ID_SHOW_DOCK_LIGHT:{index:++r,status:!1},ID_SHOW_DOCK_DEFINITION:{index:++r,status:!1},ID_SHOW_DOCK_DETAILS:{index:++r,status:!1},ID_SHOW_DOCK_OFFLINE_WATCH:{index:++r,status:!1},ID_SHOW_WIDESCREEN_BTN:{index:++r,status:!1},ID_SHOW_LOGO:{index:++r,status:!1},ID_SHOW_RECOMMEND:{index:++r,status:!1},ID_ENABLE_AD:{index:++r,status:!1},ID_SHOW_TIPS:{index:++r,status:!1},ID_SHOW_MAX_MIN_BTN:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_EXPAND_BTN:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_TVLIST_BTN:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_3D_BTN:{index:++r,status:!1},ID_SKIP_MIDDLE_AD:{index:++r,status:!1},ID_SHOW_TWO_DIMENSION_CODE_BTN:{index:++r,status:!1},ID_SHOW_GREEN_TAIL_BTN:{index:++r,status:!1},ID_SHOW_ADD_TO_TABLE_BTN:{index:++r,status:!1},ID_SHOW_COLLECT_BTN:{index:++r,status:!1},ID_SHOW_CONTROL_BAR_ISHIDE:{index:++r,status:!1},ID_HIDE_VIDEO_LINK:{index:++r,status:!1},ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN:{index:++r,status:!1},ID_HIDE_SCORE_TASK:{index:++r,status:!1},ID_SHOW_CONTENT_MENU:{index:++r,status:!0},ID_SHOW_CONTENT_MENU_SHORTCUT:{index:++r,status:!0},ID_HIDE_HEAT_MAP:{index:++r,status:!1},ID_SHOW_SCREENSHOT:{index:++r,status:!1},ID_HIDE_PLAYBACKRATE:{index:++r,status:!1},ID_HIDE_PIPBTN:{index:++r,status:!1}},ID_END:46};var K=function(e){d()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){return s()(this,r),t.call(this)}return c()(r,[{key:"init",value:function(e){var t=this;this.enable(),this._elem=e,this.handler=function(){t.emit("change",t.isFullScreen()?"enter":"exit")},document.addEventListener("fullscreenchange",this.handler),document.addEventListener("mozfullscreenchange",this.handler),document.addEventListener("webkitfullscreenchange",this.handler),document.addEventListener("MSFullscreenChange",this.handler)}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"exit",value:function(){var e=this._elem;if(e)if(this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.exitFullscreen)e.exitFullscreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(e.mozCancelFullScreen)e.mozCancelFullScreen();else if(e.msExitFullscreen)e.msExitFullscreen();else try{e.webkitExitFullscreen()}catch(e){}}},{key:"enter",value:function(){var e=this._elem;if(this._enable||e)if(this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else try{e.webkitEnterFullScreen()}catch(e){}}},{key:"toggle",value:function(){this.isFullScreen()?this.exit():this.enter()}},{key:"isFullScreen",value:function(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen)}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("fullscreenchange",this.handler),document.removeEventListener("mozfullscreenchange",this.handler),this._elem.removeEventListener("webkitfullscreenchange",this.handler),this._elem.removeEventListener("MSFullscreenChange",this.handler),this.handler=null}}]),r}(a.a);var $,Z,X="iqp-web-screen",J=function(e){d()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){return s()(this,r),t.call(this)}return c()(r,[{key:"__notice",value:function(){this.emit("change",this.isWebFullScreen()?"enter":"exit")}},{key:"__beforeNotice",value:function(){this.emit("beforechange",this.isWebFullScreen()?"enter":"exit")}},{key:"init",value:function(e){this.enable(),this._wrapper=e}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"initButton",value:function(e){var t=this;this._elem=e,this._enter=this._elem.querySelector('[data-player-hook="webfullenter"]'),this._exit=this._elem.querySelector('[data-player-hook="webfullexit"]'),this.handler=function(){t.toggle()},this._elem.addEventListener("click",this.handler)}},{key:"exit",value:function(){var e;this.isWebFullScreen()&&(this.__beforeNotice(),this._elem&&(this._exit.style.display="none",this._enter.style.display="block"),e=(e=this._wrapper.className).replace(X," ").replace("iqp-full-screen50"," ").replace("iqp-full-screen75"," ").replace(/^\s+|\s+$/g,""),this._wrapper.className=e,document.body.style.overflow=this.__bodyOverflow,this.__notice())}},{key:"enter",value:function(){this.isWebFullScreen()||(this.__bodyOverflow=document.body.style.overflow,this.__beforeNotice(),this._elem&&(this._exit.style.display="block",this._enter.style.display="none"),this._wrapper.className+=(this._wrapper.className?" ":"")+X,document.body.style.overflow="hidden",this.__notice())}},{key:"toggle",value:function(){this.isWebFullScreen()?this.exit():this.enter()}},{key:"isWebFullScreen",value:function(){return!!this._wrapper&&0<=" ".concat(this._wrapper.className," ").indexOf(" ".concat(X," "))}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("click",this.handler),this._enter=null,this._exit=null,this.handler=null}}]),r}(a.a),ee=(i(146),i(90),document.attachEvent),te=navigator.userAgent.match(/Trident/),ie=($=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return $(e)}),ne=(Z=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return Z(e)});function re(i){var e=i.target||i.srcElement;e.__resizeRAF__&&ne(e.__resizeRAF__),e.__resizeRAF__=ie(function(){var t=e.__resizeTrigger__;t&&t.__resizeListeners__.forEach(function(e){e.call(t,i)})})}function ae(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",re)}var oe=(c()(he,[{key:"on",value:function(e){var t;this.elem.__resizeListeners__||(this.elem.__resizeListeners__=[],ee?(this.elem.__resizeTrigger__=this.elem,this.elem.attachEvent("onresize",re)):((t=this.elem.__resizeTrigger__=document.createElement("object")).setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;"),t.__resizeElement__=this.elem,t.onload=ae,t.type="text/html",te&&this.elem.appendChild(t),t.data="about:blank",te||this.elem.appendChild(t))),this.elem.__resizeListeners__.push(e)}},{key:"off",value:function(e){this.elem.__resizeListeners__.splice(this.elem.__resizeListeners__.indexOf(e),1),this.elem.__resizeListeners__.length||(ee?this.elem.detachEvent("onresize",re):(this.elem.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",re),this.elem.__resizeTrigger__=!this.elem.removeChild(this.elem.__resizeTrigger__)))}}]),he),se=(c()(le,[{key:"register",value:function(e){var t=e.type,i=e.callback;if(!t||!i||"function"!=typeof i)return null;e=this.id++;return this.mutualList[t]=this.mutualList[t]||{},this.mutualList[t][e]={enable:!0,callback:i},e}},{key:"unregister",value:function(e){var t,i=!1;if(!e)return i;for(t in this.mutualList)if(this.mutualList[t][e]){delete this.mutualList[t][e],i=!0;break}return i}},{key:"enable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!0;break}}},{key:"disable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!1;break}}},{key:"enableType",value:function(e){if(e){var t,i=this.mutualList[e];for(t in i)i[t].enable=!0}}},{key:"disableType",value:function(e){if(e){var t,i=this.mutualList[e];for(t in i)i[t].enable=!1}}},{key:"fire",value:function(e){if(e)for(var t in this.mutualList){if(e===t){this._fire(-1,this.mutualList[t]);break}if(this.mutualList[t][e]){this._fire(e,this.mutualList[t]);break}}}},{key:"_fire",value:function(e,t){for(var i in t)i!==e&&t[i].enable&&t[i].callback()}}]),le),r=(i(41),i(308)),ce=i.n(r),r=i(309),de=i.n(r),ue=i(7);function le(e){s()(this,le),this.elem=e,this.mutualList={},this.id=1}function he(e){s()(this,he),this.elem=e}var fe=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return s()(this,a),(i=r.call(this,"vippay",e,t)).$vippay=Object(ue.a)(i.plugin),i.$playbtn=i.$vippay.find('[data-player-hook="playbtn"]'),i.$playtxt=i.$vippay.find('[data-player-hook="viptxt"]'),i.$playbtn.on("click",function(e){i.$vippay.hide(),i.engine.playproxy.playFromVipPay()}),i.engine.on(j.a.NTF_Show_VIPPay,function(e){1===e?i.$playtxt.html("VIP<br>"):i.$playtxt.html("VIP<br>"),i.$vippay.show(),i.view.pingback.sendBlockPingback("diamondtip")}),i.engine.on(j.a.NTF_VideoChange,function(){i.$vippay.hide()}),i}return c()(a,null,[{key:"css",value:function(){return ce.a.toString()}},{key:"html",value:function(){return de.a.toString()}}]),a}(n.a),r=i(310),pe=i.n(r),r=i(311),_e=i.n(r),r=i(15);var ge=new r.a("mobiletwblock"),ye=function(e){d()(o,e);var i,n,a=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function o(e,t){s()(this,o);var i=a.call(this,"mobiletwblock",e,t),n=e.pingback;i.$plugin=Object(ue.a)(i.plugin),i.previewstart=!0,i.$download=i.$plugin.find('[data-player-hook="mobiledownload"]'),i.$watch=i.$plugin.find('[data-player-hook="mobiletwwatch"]'),i.$twinfo=i.$plugin.find('[data-player-hook="twinfo"]'),i.$preview=i.$plugin.find('[data-player-hook="twpreview"]'),i.$replay=i.$plugin.find('[data-player-hook="twreplay"]'),i.init();function r(){var e,t=i.engine.getTwBlockType();"TwBlockA"==t?(i.$plugin.show(),i.previewstart?(e="preview_start",i.$replay.hide(),i.$preview.show()):(e="preview_end",i.$preview.hide(),i.$replay.show()),n.sendTwBlockShow("player",e)):"TwBlockB"==t&&(i.$twinfo.html("App"),i.$download.html(""),i.$preview.html(""),i.$plugin.show(),i.$preview.show(),i.$replay.hide(),n.sendTwBlockShow("player","player_fullversion"))}i.engine.on(j.a.NTF_TW_BLOCK,function(){r(),i.engine.pause()}),i.engine.on(j.a.NTF_VRSReady,function(){var e=i.engine.getTwBlockType();ge.log("mobiletwblock, twBlockType: "+e),i.previewstart=!0,"TwBlockA"==e&&r()}),i.engine.on(j.a.NTF_PREVIEW_END,function(){i.previewstart=!1,r()});e=i.engine.getTwBlockType();return ge.log("mobiletwblock, twBlockType: "+e),r(),i}return c()(o,[{key:"init",value:function(){var t=this,e=this.view,i=this.engine,n=e.pingback,e=g.a.browser.isTouch?"touchend":"click";i.on(j.a.NTF_StatusChanged,function(e){switch(e.state){case j.a.Status_Playing:case j.a.Status_AdPlaying:case j.a.Status_PlayError:t.$plugin.hide()}}),this.$download.un(e).on(e,function(e){if(e.preventDefault(),"TwBlockB"==t.engine.getTwBlockType())return t.view.callJsDoSomething("pullupapp"),void n.sendTwBlockClick("player","player_fullversion","download");e=t.previewstart?"preview_start":"preview_end";t.view.callJsDoSomething("pullupapp",{af_adset:e}),n.sendTwBlockClick("player",e,"watchFull")}),this.$watch.un(e).on(e,function(e){return e.preventDefault(),"TwBlockB"==t.engine.getTwBlockType()?(i.play(!0),void n.sendTwBlockClick("player","player_fullversion","skip")):void(t.previewstart?(i.play(!0),n.sendTwBlockClick("player","preview_start","continuePreview")):(i.seek(0),n.sendTwBlockClick("player","preview_end","rePreview")))})}}],[{key:"padCss",value:function(){return pe.a.toString()}},{key:"padHtml",value:function(){return _e.a.toString()}},{key:"mobileCss",value:function(){return this.padCss()}},{key:"mobileHtml",value:function(){return this.padHtml()}}]),o}(n.a),ve=i(6),me=i(52);var be=new r.a("Skin.Base"),a=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;s()(this,a),(i=r.call(this)).params=e,i.pack=t,i.engine=t.engine,i.plugins={},i.conflictPanel={},i.setting=null,i.diyskin=e.diyskin||{},i.statusMap={},i.initSwitch(e),i.getUserSet(),i.engine.isMini?i.pingback=new P(i.engine):i.pingback=new o(i.engine),i.bottomShow=!1,i.topSwitch=!0,i.bottomSwitch=!0;var n=i.engine,e=n.i18n,n=n.local;return i.i18nLang=t.lang,i.isTradition=e.isTraditionalChinese(n),i.isTw=e.isTWLocale(n),i}return c()(a,[{key:"videoList",get:function(){return this.subView?this.subView.videoList:[]}},{key:"initSwitch",value:function(e){for(var e=e.components,t=void 0===e?"feffffe6e":e,i=[],n=0;n<t.length;++n){for(var r="0x"+(r=t.substr(n,1)),a=Number(r).toString(2),o=a.length,s=0;s<4-o;++s)a="0"+a;i+=a}for(var c=Q.items,d=Q.ID_BEGIN;d<Q.ID_END;++d)if(d<i.length)for(var u in c)c[u].index==d&&(c[u].status="1"==i.charAt(d));this.statusMap=c}},{key:"getUserSet",value:function(){var e=this.statusMap,t={logo:!0,ctl:!0,prog:!0,play:!0,next:!0,time:!0,rate:!0,def:!0,voice:!0,set:!0,list:!0,full:!0,webfull:!0,expandScreen:!1,vinv:!0,hotkeys:!0,score:!0,recommend:!0,ctxmenu:!0,ctxmenu_shortcut:!0,audiotrack:!0,screenshot:!0,aiview:!0,svp:!0,follow:!0,interact:!0,ivos:!0},i=this.engine.i18n.isTWLocale();t.ctl=t.ctl&&e.ID_SHOW_CONTROL_BAR.status,t.prog=t.prog&&e.ID_SHOW_CONTROL_BAR_SEEK_BAR.status,t.time=t.time&&e.ID_SHOW_CONTROL_BAR_TIME.status,t.next=t.next&&e.ID_SHOW_CONTROL_BAR_NEXT_BTN.status,t.def=t.def&&e.ID_SHOW_DOCK_DEFINITION.status,t.voice=t.voice&&e.ID_SHOW_CONTROL_BAR_VOLUME.status,t.set=t.set&&e.ID_SHOW_CONTROL_BAR_SETTING.status,t.rate=t.rate&&(e.ID_SHOW_CONTROL_BAR_SETTING.status||this.params.feedMode)&&!e.ID_HIDE_PLAYBACKRATE.status,t.webfull=t.webfull&&!e.ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN.status,t.full=t.full&&e.ID_SHOW_CONTROL_BAR_FULLSCREEN.status,t.list=t.full&&t.list&&e.ID_SHOW_CONTROL_BAR_TVLIST_BTN.status&&!i,t.score=t.score&&!e.ID_HIDE_SCORE_TASK.status&&!i,t.recommend=t.recommend&&e.ID_SHOW_RECOMMEND.status&&!i,t.ctxmenu=e.ID_SHOW_CONTENT_MENU.status,t.ctxmenu_shortcut=e.ID_SHOW_CONTENT_MENU_SHORTCUT.status,t.vinv=t.vinv&&!e.ID_HIDE_PIPBTN.status,t.audiotrack=t.audiotrack&&this.engine.audioEnabled,t.screenshot=t.screenshot&&e.ID_SHOW_SCREENSHOT.status&&!i,void 0!==this.params.isExpandScreen&&(t.expandScreen=this.params.isExpandScreen),void 0!==this.params.isSupportedHotKey&&(t.hotkeys=this.params.isSupportedHotKey),void 0!==this.params.isSupportedShot&&(t.screenshot=this.params.isSupportedShot),void 0!==this.params.logo&&0==this.params.logo&&(t.logo=!1),t.aiview=t.aiview&&!i,t.svp=t.svp&&!i,t.follow=t.follow&&!i,t.interact=t.interact&&!i,t.ivos=t.full&&t.ivos&&!i&&!this.engine.isSimple,this.setting=t,this.emit("viewsetdone")}},{key:"getCss",value:function(){if(this.engine.getEngineType()!==j.a.HTTP_ENGINE)return this.engine.isMini?O.css()+G.css():O.css()+V.css()+fe.css();var e="";return this.isTw&&(e=ye.padCss()),g.a.browser.iPad||g.a.os.androidTablet?O.padCss()+V.padCss()+e:O.mobileCss()+V.mobileCss()+e}},{key:"init",value:function(){this.playerId=this.params.parentId,this.parent=document.getElementById(this.params.parentId),this.loadCss(this.getCss()),this.engine.getEngineType()===j.a.HTTP_ENGINE?g.a.browser.iPad||g.a.os.androidTablet?this.loadHtml(O.padHtml(),this.parent):this.loadHtml(O.mobileHtml(),this.parent):this.engine.isMini?this.loadHtml(O.miniHtml("banner"==this.params.skinType),this.parent):this.loadHtml(O.html(),this.parent);var e=this.engine.getEngineType()===j.a.HTTP_ENGINE;this.video=this.parent.querySelector("video"),this.engine.isSimple||e?this.wrapper=this.videoWrapper=this.parent.querySelector('[data-player-hook="container"]'):(this.wrapper=this.parent.querySelector('[data-player-hook="container"]'),this.videoWrapper=this.parent.querySelector('[data-player-hook="mainlayer"]'),this.ivoslayer=this.parent.querySelector('[data-player-hook="ivoslayer"]')),this.pluginContainer=this.parent.querySelector('[data-player-hook="plgcontainer"]'),this.adContainer=this.parent.querySelector('[data-cupid="container"]'),e?g.a.browser.iPad||g.a.os.androidTablet?this.loadHtml(V.padHtml(),this.videoWrapper):this.loadHtml(V.mobileHtml(),this.videoWrapper):this.engine.isMini?this.loadHtml(G.html(),this.videoWrapper):this.loadHtml(V.html(),this.videoWrapper),e||this.engine.isMini||(this.loadHtml(fe.html(),this.videoWrapper),this.addPlugin(new fe(this,this.videoWrapper))),this.isTw&&e&&(this.loadHtml(ye.padHtml(),this.videoWrapper),this.addPlugin(new ye(this,this.videoWrapper))),this.addPlugin(new O(this,this.parent)),this.engine.isMini?this.addPlugin(new G(this,this.videoWrapper)):this.addPlugin(new V(this,this.videoWrapper)),this.addVideoEvent(),this.engine.init(this.video),this.videoWrapper.addEventListener("contextmenu",function(e){e.preventDefault()})}},{key:"addVideoEvent",value:function(){function e(){(i.fullscreen&&i.fullscreen.isFullScreen()||i.webfullscreen&&i.webfullscreen.isWebFullScreen()||i.engine.isWebFullScreen)&&1366<=i.videoWrapper.offsetWidth&&580<=i.videoWrapper.offsetHeight?i.videoWrapper.classList.add(me.a):i.videoWrapper.classList.remove(me.a)}var t,i=this,n=this.engine.isMini,r=0,a=this;this.clickEvent=function(){var e;a.engine.isAd()||a.engine.isPatch()||a.engine.isInteracting||((e=a.plugins.ctxmenu)&&(e.isShow||e.isShowPanel)||1==++r&&(clearTimeout(t),t=setTimeout(function(){var e=a.fullscreen&&a.fullscreen.isFullScreen(),t=a.webfullscreen&&a.webfullscreen.isWebFullScreen();n?(a.pingback.sendClickVideoPingback(),a.callJsDoSomething("miniPlayerVideoClick",{currentTime:a.engine.getCurrenttime(),isMini:!0})):a.playlistShow&&(e||t)?a.emit(ve.a.NTF_HIDE_VIDEOLIST):a.aiBaikeShow&&(e||t)?a.emit(ve.a.NTF_AIView_BAIKE_CLOSE):a.engine.hasStatus(j.a.Status_Playing)?(a.engine.pause(!0),a.pingback.sendUserActionPingback("ply_pause")):a.engine.isIVEnd||(a.engine.play(!0),a.pingback.sendUserActionPingback("ply_play")),r=0},200)))},this.video.addEventListener("click",this.clickEvent),this.setting.full&&(this.fullscreen=new K,this.engine.getEngineType()===j.a.HTTP_ENGINE?this.fullscreen.init(this.video):this.fullscreen.init(this.wrapper),this.dbClickEvent=function(e){i.engine.isAd()||n||i.engine.isInteracting||(e.preventDefault(),r=0,clearTimeout(t),i.engine.ivosRuning||i.fullToggle())},this.video.addEventListener("dblclick",this.dbClickEvent),this.engine.on(j.a.NTF_Recharge,function(){i.fullscreen.exit()}),this.fullscreen.on("change",e.bind(this))),this.setting.webfull&&(this.webfullscreen=new J,this.webfullscreen.init(this.videoWrapper),this.setting.autowebfull&&this.webfullscreen.enter(),this.engine.on(j.a.NTF_Recharge,function(){i.webfullscreen.exit()}),this.webfullscreen.on("change",e.bind(this))),this.stagesize=new oe(this.pluginContainer),this.stagesize.on(e.bind(this)),this.ivoslayer&&(this.ivossize=new oe(this.ivoslayer)),this.mutualpanel=new se(this)}},{key:"checkSubView",value:function(e,t){var i=this;this.subView?this.subView[e](t):this.once("subViewInit",function(){i.subView[e](t)})}},{key:"addView",value:function(e){this.subView=new e(this,this.engine),this.subView.init(),this.emit("subViewInit")}},{key:"loadCss",value:function(e,t){!t&&this.params.cssRendered||((t=document.createElement("style")).setAttribute("data-player-hook","playercss"),t.innerHTML=e,document.querySelector("head").appendChild(t))}},{key:"loadHtml",value:function(e,t){var i=document.createElement("iqpdiv");i.innerHTML=e,t.appendChild(i.children[0])}},{key:"addPlugin",value:function(e){this.plugins[e.name]=e}},{key:"forEach",value:function(e){for(var t in this.plugins)this.plugins[t][e]()}},{key:"enable",value:function(){this.forEach("enable")}},{key:"disable",value:function(){this.forEach("disable")}},{key:"destroy",value:function(){for(var e in this.clickEvent&&this.video.removeEventListener("click",this.clickEvent),this.dbClickEvent&&this.video.removeEventListener("dblclick",this.dbClickEvent),this.plugins)try{this.plugins[e].destroy()}catch(e){}this.plugins={},document.getElementById(this.playerId)&&(document.getElementById(this.playerId).innerHTML="")}},{key:"callJsDoSomething",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.engine.getMovieInfo();be.log("call js setJsDoSomething: "+e),t.origin=this.params.origin||"h5",t.handleType=e,t.tvid=i.tvid,this.engine.isInteractVideo&&(t.isInteractVideo=this.engine.isInteractVideo,t.uniqueId=this.engine.iv_state.uniqueId),this.emit("setJsDoSomething",t)}},{key:"addVideoList",value:function(e){this.checkSubView("addVideoList",e)}},{key:"removeVideoList",value:function(e){this.checkSubView("removeVideoList",e)}},{key:"setFollowData",value:function(e){this.checkSubView("setFollowData",e)}},{key:"hasNextVideo",value:function(){return!!this.subView&&this.subView.hasNextVideo()}},{key:"switchNextVideo",value:function(e){this.checkSubView("switchNextVideo",e)}},{key:"checkAutoPlay",value:function(){this.checkSubView("checkAutoPlay")}},{key:"switchPreVideo",value:function(){this.checkSubView("switchPreVideo")}},{key:"switchVideo",value:function(e){this.engine.switchVideo(e)}},{key:"getPlayIndex",value:function(){return this.subView?this.subView.getPlayIndex():-1}},{key:"skipPrelude",value:function(e){this.checkSubView("skipPrelude",e)}},{key:"setSmallWindowMode",value:function(e){this.checkSubView("setSmallWindowMode",e)}},{key:"setQiyiUserLogin",value:function(e){this.checkSubView("setQiyiUserLogin",e)}},{key:"setRightBarStatus",value:function(e){this.checkSubView("setRightBarStatus",e)}},{key:"getRealArea",value:function(){for(var e={width:16,height:9},t=this.engine.movieinfo.vidl,i=0;i<t.length;i++)if(t[i].vd===this.engine.getCurrentVD()){e=t[i].realArea;break}return e=e||this.getWrapperArea()}},{key:"getWrapperArea",value:function(){var e,t=getComputedStyle(this.videoWrapper),i=t.width,i=parseInt("100%"===i?0:i);return isNaN(i)&&((e=this.videoWrapper.offsetWidth)<=0||null==e||(i=e)),{width:i,height:parseInt(t.height)}}},{key:"getDownloadSpeed",value:function(){var e=this.engine.getDownloadSpeed();return e=e&&(e===1/0?0:1e9<e?(e/1e9).toFixed(2)+"Gb/s":1e6<e?(e/1e6).toFixed(2)+"Mb/s":1e3<e?(e/1e3).toFixed(2)+"Kb/s":0<e?e.toFixed(2)+"b/s":0)}},{key:"fullToggle",value:function(){var e,t,i=this.fullscreen;this.setting.expandScreen?(e=!!this.engine.isFullScreen,t=!!this.engine.isWebFullScreen,e?this.callJsDoSomething("exitExpandScreen",{from:"full"}):(t&&this.callJsDoSomething("exitExpandScreen",{from:"webfull"}),this.callJsDoSomething("enterExpandScreen",{from:"full"})),this.emit(ve.a.NTF_FullScreen_BeforeChange,e?"enter":"exit")):i&&i.toggle()}}]),a}(a.a);t.a=a},function(e,t,i){"use strict";function n(e){for(var t,i=e.byteLength,n=[],r=1,a=new Uint8Array(0);r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;t=i-n.length;try{a=new Uint8Array(t)}catch(e){throw"epsb alloc mem error ".concat(t)}for(var o=0,r=0;r<t;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=e[o];return a}i.d(t,"a",function(){return n}),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46)},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i(4),t=(i.n(n),i(5)),n=(i.n(t),i(1)),t=(i.n(n),i(2)),r=i.n(t),n=i(3),t=i.n(n),n=(i(169),i(27),i(9),i(94)),a=(i(82),i(90),t()(c,[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){e=this.map_[e];return e?e.slice():null}},{key:"getAll",value:function(){var e,t=[];for(e in this.map_)t.push.apply(t,this.map_[e]);return t}},{key:"remove",value:function(e,t){var i=this.map_[e];if(i)for(var n=0;n<i.length;++n)i[n]==t&&(i.splice(n,1),--n)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}]),c),o=(t()(s,[{key:"off",value:function(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}]),s);function s(e,t,i){r()(this,s),this.target=e,this.type=t,this.listener=i,this.target.addEventListener?this.target.addEventListener(t,i,!1):this.target.on&&this.target.on(t,i,!1)}function c(){r()(this,c),this.map_={}}var d=(t()(u,[{key:"destroy",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"on",value:function(e,t,i){if(this.bindingMap_){i=new o(e,t,i);return this.bindingMap_.push(t,i),this}}},{key:"once",value:function(t,i,n){return this.on(t,i,function(e){this.off(t,i),n(e)}.bind(this))}},{key:"off",value:function(e,t){if(!this.bindingMap_)return this;for(var i=this.bindingMap_.get(t)||[],n=0;n<i.length;++n){var r=i[n];r.target==e&&(r.off(),this.bindingMap_.remove(t,r))}return this}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(i))}},{key:"removeAll",value:function(){if(this.bindingMap_){for(var e=this.bindingMap_.getAll(),t=0;t<e.length;++t)e[t].off();this.bindingMap_.clear()}}}]),u);function u(){r()(this,u),this.bindingMap_=new a}n.EventEmitter,new n.EventEmitter},function(P,I,e){!function(e){var T;e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this,P.exports=function(t){"use strict";function i(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)}function n(e){var t=[0,2,1][e.length%3],e=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[d.charAt(e>>>18),d.charAt(e>>>12&63),2<=t?"=":d.charAt(e>>>6&63),1<=t?"=":d.charAt(63&e)].join("")}function r(e){return f(h(String(e)))}function c(e){return e.replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,"")}function a(e,t){return t?c(r(e)):r(e)}var e,o=(t=t||{}).Base64,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},i=0,n=e.length;i<n;i++)t[e.charAt(i)]=i;return t}(d),u=String.fromCharCode,l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(e){return e.replace(l,i)},f=t.btoa&&"function"==typeof t.btoa?function(e){return t.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,n)};t.Uint8Array&&(e=function(e,t){for(var i="",n=0,r=e.length;n<r;n+=3){var a=e[n],o=e[n+1],s=e[n+2],a=a<<16|o<<8|s;i+=d.charAt(a>>>18)+d.charAt(a>>>12&63)+(void 0!==o?d.charAt(a>>>6&63):"=")+(void 0!==s?d.charAt(63&a):"=")}return t?c(i):i});function p(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}}function _(e){var t=e.length,i=t%4,e=(0<t?s[e.charAt(0)]<<18:0)|(1<t?s[e.charAt(1)]<<12:0)|(2<t?s[e.charAt(2)]<<6:0)|(3<t?s[e.charAt(3)]:0);return(e=[u(e>>>16),u(e>>>8&255),u(255&e)]).length-=[0,0,2,1][i],e.join("")}function g(e){return x(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))}function y(e){return String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")}function v(e){return e=y(e),k(x(e))}var m,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=function(e){return e.replace(b,p)},x=t.atob&&"function"==typeof t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/\S{1,4}/g,_)};t.Uint8Array&&(m=function(e){return Uint8Array.from(g(y(e)),function(e){return e.charCodeAt(0)})});var S;return t.Base64={VERSION:"2.6.4",atob:g,btoa:f,fromBase64:v,toBase64:a,utob:h,encode:a,encodeURI:function(e){return a(e,!0)},btou:k,decode:v,noConflict:function(){var e=t.Base64;return t.Base64=o,e},fromUint8Array:e,toUint8Array:m},"function"==typeof Object.defineProperty&&(S=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",S(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",S(function(e){return a(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",S(function(){return a(this,!0)}))}),t.Meteor&&(Base64=t.Base64),P.exports?P.exports.Base64=t.Base64:void 0===(T=function(){return t.Base64}.apply(I,[]))||(P.exports=T),{Base64:t.Base64}}(e)}.call(this,e(203))},,,,function(e,t,i){var n=i(22),i=i(269);n({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,i){"use strict";var f=i(135),p=i(81),_=i(368),g=i(229),y=i(44),v=i(144),m=i(197);e.exports=function(e){var t,i,n,r,a,o,s=p(e),c="function"==typeof this?this:Array,d=arguments.length,u=1<d?arguments[1]:void 0,l=void 0!==u,e=m(s),h=0;if(l&&(u=f(u,2<d?arguments[2]:void 0,2)),null==e||c==Array&&g(e))for(i=new c(t=y(s.length));h<t;h++)o=l?u(s[h],h):s[h],v(i,h,o);else for(a=(r=e.call(s)).next,i=new c;!(n=a.call(r)).done;h++)o=l?_(r,u,[n.value,h],!0):n.value,v(i,h,o);return i.length=h,i}},function(e,t,i){"use strict";var h=i(47),n=i(23),f=i(176),p=i(207),_=i(205),g=i(81),y=i(134),r=Object.assign,a=Object.defineProperty;e.exports=!r||n(function(){if(h&&1!==r({b:1},r(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=r({},e)[i]||f(r({},t)).join("")!=n})?function(e,t){for(var i=g(e),n=arguments.length,r=1,a=p.f,o=_.f;r<n;)for(var s,c=y(arguments[r++]),d=a?f(c).concat(a(c)):f(c),u=d.length,l=0;l<u;)s=d[l++],h&&!o.call(c,s)||(i[s]=c[s]);return i}:r},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),a=i.n(t),t=i(3),o=i.n(t),t=i(4),s=i.n(t),t=i(5),c=i.n(t),t=i(1),d=i.n(t),u=i(273);var n=function(e){s()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return a()(this,r),t.call(this)}return o()(r,[{key:"push",value:function(e){for(var t,i,n,r=e.pts,a=e.dts,o=e.payload,s=0,c=0;s+5<o.length;)if(255===o[s]&&240==(246&o[s+1])){if(d=2*(1&~o[s+1]),t=(3&o[s+3])<<11|o[s+4]<<3|(224&o[s+5])>>5,n=9e4*(i=1024*(1+(3&o[s+6])))/u.a[(60&o[s+2])>>>2],o.byteLength<(t=s+t))return;var d={pts:r+c*n,dts:a+c*n,sampleCount:i,audioObjectType:1+(o[s+2]>>>6&3),channelCount:(1&o[s+2])<<2|(192&o[s+3])>>>6,sampleRate:u.a[(60&o[s+2])>>>2],samplingFrequencyIndex:(60&o[s+2])>>>2,sampleSize:16,data:o.subarray(s+7+d,t)};if(this.emit("frame",d),o.byteLength===t)return o=void 0,void this.emit("done");c++,o=o.subarray(t)}else s++}}]),r}(i(94).EventEmitter)},function(e,t,i){"use strict";var n=i(22),r=i(143),a=[].reverse,i=[1,2];n({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),a.call(this)}})},,function(e,t,i){"use strict";i.d(t,"a",function(){return o});var t=i(2),n=i.n(t),r=i(328),a=i(609),O=i(608),R=0;var o=function e(t){switch(n()(this,e),this.rawData=t,this.unit_type=31&t[0],this.unit_type){case 7:this.sps=function(e){var t,i=e[R=0],n=e[1],r=e[2],a=e.subarray(3),o=[1,1],s=1,c=0,d=0,u=!0,l=O.a.readUEV(a,R);if(R+=l.bitLength,100==i||110==i||122==i||244==i||44==i||83==i||86==i||118==i||128==i){var h=O.a.readUEV(a,R);R+=h.bitLength,3==(c=h.value)&&(R+=1);var f=O.a.readUEV(a,R);R+=f.bitLength;var p=O.a.readUEV(a,R);if(R+=p.bitLength,R+=1,m=O.a.readBit(a,R),R+=1,m)for(var _=0;_<(3!=h.value?8:12);_++){var g=O.a.readBit(a,R);R+=1,g&&function(e,t){for(var i,n=8,r=8,a=0;a<t;a++)0!=r&&(i=O.a.readUEV(e,R),R+=i.bitLength,r=(n+i.value+256)%256),n=e[a]}(a,_<6?16:64)}}e=O.a.readUEV(a,R);R+=e.bitLength;l=O.a.readUEV(a,R),f=l.value;if(R+=l.bitLength,0===f)b=O.a.readUEV(a,R),R+=b.bitLength;else if(1===f){R+=1,k=O.a.readSEV(a,R),R+=k.bitLength,x=O.a.readSEV(a,R),R+=x.bitLength,t=O.a.readUEV(a,R),R+=t.bitLength;for(var y,v=0;v<t.value;v++)y=O.a.readSEV(a,R),R+=y.bitLength}p=O.a.readUEV(a,R);R+=p.bitLength,R+=1;var m=O.a.readUEV(a,R);R+=m.bitLength;e=O.a.readUEV(a,R);R+=e.bitLength;l=O.a.readBit(a,R);R+=1,l||(R+=1),R+=1;var b=O.a.readBit(a,R);R+=1;var f=0,k=0,x=0,p=0;b&&(S=O.a.readUEV(a,R),R+=S.bitLength,f=S.value,S=O.a.readUEV(a,R),R+=S.bitLength,k=S.value,S=O.a.readUEV(a,R),R+=S.bitLength,x=S.value,S=O.a.readUEV(a,R),R+=S.bitLength,p=S.value);var S=O.a.readBit(a,R);if(R+=1,S){S=O.a.readBit(a,R);if(R+=1,S){var T=O.a.readByte(a,R);switch(R+=8,T){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:var P=O.a.readByte(a,R);R+=8;var I=O.a.readByte(a,R);R+=8;var w=O.a.readByte(a,R);R+=8;var A=O.a.readByte(a,R);R+=8,o=[P<<8|I,w<<8|A]}o&&(s=o[0]/o[1]),255===T&&(R+=16,R+=16)}T=O.a.readBit(a,R);R+=1,T&&(R+=1);T=O.a.readBit(a,R);R+=1,T&&(O.a.readBit(a,R,3),R+=3,R+=1,D=O.a.readBit(a,R),R+=1,D&&(R+=24));var E,D=O.a.readBit(a,R);R+=1,D&&(q=O.a.readUEV(a,R),R+=q.bitLength,E=O.a.readUEV(a,R),R+=E.bitLength);var q=O.a.readBit(a,R);R+=1,q&&(E=O.a.readBit(a,R,32),R+=32,q=O.a.readBit(a,R,32),R+=32,u=!!O.a.readBit(a,R),R+=1,d=q/(2*E))}return{payload:a,profile_idc:i,profile_compatibility:n,level_idc:r,chromaFormat:c,width:Math.ceil((16*(m.value+1)-2*f-2*k)*s),height:(2-l)*(e.value+1)*16-2*x-2*p,pixelRatio:o,fps:d,fixedFPS:u}}(Object(r.a)(t.subarray(1)));break;case 6:this.sei=function(e){for(var t=0,i=0,n=Object(a.c)(e);t+=e[n.index],255==Object(a.b)(n,8););for(;i+=e[n.index],255==Object(a.b)(n,8););var r=n.index+16;return{type:t,size:i,payload:e.subarray(r,r+i)}}(Object(r.a)(t.subarray(1)))}}},function(e,t,i){"use strict";i.d(t,"b",function(){return a}),i.d(t,"a",function(){return o});var n=!1,r=null;function a(e){n?r=e:e()}function o(e){var t=n?null:s;n=!0;try{e()}finally{t&&t()}}function s(){var e;n=!1,r&&(e=r,r=null,e())}},function(n,e,t){var r=t(221),a=t(562);function o(e,t,i){return a()?n.exports=o=Reflect.construct:n.exports=o=function(e,t,i){var n=[null];n.push.apply(n,t);n=new(Function.bind.apply(e,n));return i&&r(n,i.prototype),n},n.exports.default=n.exports,n.exports.__esModule=!0,o.apply(null,arguments)}n.exports=o,n.exports.default=n.exports,n.exports.__esModule=!0},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(349),t=i(348),r=new(i(532).a);r.register("TS_MP4",n.b),r.register("FLV_MP4",t.b)},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),s=i.n(t),t=i(3),r=i.n(t),t=i(38),c=i.n(t),t=i(4),d=i.n(t),t=i(5),u=i.n(t),t=i(1),l=i.n(t),h=(i(147),i(140),i(270),i(329)),f=i(51),p=i(202),_=i(152);var n=function(e){d()(o,e);var i,n,a=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function o(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{debug:!1};s()(this,o),(i=a.call(this))._eventManager=new h.a,n.debug&&(f.a.enable=!0);var r=Object(p.a)({},n,!1),n=Object(p.a)({},n,!1);return Array.isArray(e)&&(Object(p.a)(r,e[1]||{}),e=e[0]),Array.isArray(t)&&(Object(p.a)(n,t[1]||{}),t=t[0]),i.demuxer=new e(c()(i),r),i.remuxer=new t(c()(i),n),i._eventManager.on(i.demuxer,"demux_info",function(e){return i.emit("demux_info",e)}).on(i.demuxer,"ESD",function(e){return i.emit("demux_data",e)}).on(i.remuxer,"ESD",function(e){return i.emit("remux_data",e)}).on(i.remuxer.endStream,"done",function(){return i.emit("done")}),i}return r()(o,[{key:"push",value:function(e,t){var i=t.resetInitSegment,n=t.audioSegmentAlignPTS;"number"!=typeof n||isNaN(n)||(this.remuxer.audioAlignPTS=n),"boolean"==typeof i&&i&&this.remuxer.rebuildInitSegment(),this.config=t,this.demuxer.push(e),this._noticeIdle()}},{key:"reset",value:function(){this.demuxer.reset(),this.remuxer.reset()}},{key:"destroy",value:function(){this.demuxer.unpipe(),this.demuxer.endStream.unpipe(),this.remuxer.endStream.removeAllListeners("data"),this.remuxer.endStream.removeAllListeners("done"),this._eventManager.removeAll()}},{key:"fireErr",value:function(e){this.emit("error",e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",Object.assign(Object.assign({},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),{meta:this.config&&this.config.meta||{}}))}},{key:"_noticeIdle",value:function(){function e(){return t.emit("__idle__")}var t=this;_.l?e():setTimeout(function(){e()},0)}}]),o}(i(133).a)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var t=i(2),n=i.n(t),t=i(3),t=i.n(t),r=(i(127),i(48),i(51)),a=(t()(o,[{key:"byteLength",get:function(){var t=0;return this.bytesArray.forEach(function(e){t+=e.byteLength}),t}}]),o);function o(e){n()(this,o),this.bytesArray=[],r.a.assert(!!e,"BmffTypes should be specified to InitSegment or MediaSegment"),this.type=e}},,,function(e,t,i){"use strict";i.d(t,"b",function(){return K}),i.d(t,"a",function(){return Z}),i(9);var c,n=i(2),l=i.n(n),r=i(3),o=i.n(r),t=i(38),s=i.n(t),n=i(42),d=i.n(n),r=i(4),u=i.n(r),t=i(5),h=i.n(t),n=i(1),f=i.n(n),r=(i(140),i(27),i(115),i(90),i(530)),_=i(51),p=i(612),g=i(613),y=i(152),v=i(611),m=(i(127),i(48),i(107),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46),i(398)),b=i(255),k=i(400),t=i(272),x=i(607),S=i(382);(n=c=c||{})[n.HEAD=0]="HEAD",n[n.BODY=1]="BODY";var n=i(133),T=i(610);var P=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e){var t;l()(this,a),(t=r.call(this)).tagType=e[0],t.dataSize=16777215&t.readUint32(e,0);var i=16777215&t.readUint32(e,3),n=e[7];return t.timestamp=(n<<24)+i,t.streamId=16777215&t.readUint32(e,8),t.payload=e.subarray(11,11+t.dataSize),t.previousTagSize=t.readUint32(e,11+t.dataSize),t.totalSize=t.previousTagSize+4,t}return o()(a,[{key:"valid",value:function(){var e=this.tagType,t=this.dataSize;return this.previousTagSize===11+t&&(18===e||9===e||8===e)}}]),a}(T.a);var I,a,w=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return l()(this,a),(i=r.call(this)).ctx_=e,i.flv_=t,i.options_=n,i.cache_buffer_=new x.a,i}return o()(a,[{key:"push",value:function(e){var t,i=this.ctx_,n=this.flv_,r=this.cache_buffer_;for(r.append(e),9===n.pos&&8<r.byteLength&&(r.cut(4),n.pos+=4);0<r.byteLength&&4<=(t=r.bytes).length;){var a=11+((t[1]<<16)+(t[2]<<8)+t[3])+4;if(!(t.length>=a))break;var o=r.cut(a),a=new P(o);a.valid()?(this.emit("data",a),n.pos+=a.totalSize):(o="Encounter invalid flv tag, tag_length(".concat(a.previousTagSize,"), cache_length(").concat(r.byteLength,"), data(").concat(o,")"),_.a.error(o),this.reset(),i.fireErr(S.a.MUX_FLV_TAG_INVALID,o))}}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),a}(n.a);function A(e,t){var i=1<arguments.length&&void 0!==t&&t,n=null,t=null;if(i){try{t=new Uint8Array(e.length+1)}catch(e){_.a.error("flv parseData failed: ".concat(e.message))}t[0]=2,t.set(e,1,e.length)}else t=e;n=E(t),i&&--n.valueLength;var r=E(e.subarray(n.valueLength,e.byteLength));return{key:n.value,value:r.value,valueLength:n.valueLength+r.valueLength}}function E(e){var t={},i=0,n=new T.a;switch(e[0]){case 0:i=8,t.value=q(e.subarray(1,9)),t.valueLength=1+i;break;case 1:t.value=0!==e[i=1],t.valueLength=1+i;break;case 2:i=e[1]<<8|e[2],t.value=D(e.subarray(3,3+i)),t.valueLength=3+i;break;case 3:for(i=1,t.value={};0!=e[i]||0!=e[i+1]||9!=e[i+2];){var r=A(e.subarray(i,e.byteLength),!0);t.value[r.key]=r.value,i+=r.valueLength,0}t.valueLength=i+=3;break;case 4:i=e[1]<<8|e[2],t.value=D(e.subarray(3,3+i)),t.valueLength=3+i;break;case 5:t.value=null,t.valueLength=i=1;break;case 6:t.value=void 0,t.valueLength=i=1;break;case 7:t.value=e[1]<<8|e[2],t.valueLength=i=3;break;case 8:var a=e[1]<<24|e[2]<<16|e[3]<<8|e[4],i=5;t.value={};for(var o=0;o<a;o++){var s=A(e.subarray(i,e.byteLength),!0);t.value[s.key]=s.value,i+=s.valueLength}t.valueLength=i+=3;break;case 9:break;case 10:for(var c=[],d=n.readUint32(e,1),u=0;u<d;u++){var l=e.subarray(9*u+4+1,e.byteLength);c.push(E(l).value)}i=9*(t.value=c).length+4+1,t.valueLength=i;break;case 11:t.value=q(e.subarray(0,8)),t.valueLength=i=11;break;case 12:i=e[1]<<24|e[2]<<16|e[3]<<8|e[4],t.value=D(e.subarray(5,5+i)),t.valueLength=5+i;break;default:return null}return t}function D(e){return String.fromCharCode.apply(null,e)}function q(e){var t=new Uint8Array(e),e=new DataView(t.buffer).getFloat64(0);return e}i(278),I=I||{},I[I.AAC=10]="AAC",(a=a=a||{})[a.MONO=0]="MONO",a[a.STEREO=1]="STEREO";var O,R=function(e){u()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function r(){var e;return l()(this,r),(e=t.apply(this,arguments)).pos=0,e}return r}(n.a),L=i(595);(O=O=O||{})[O.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",O[O.AAC_RAW=1]="AAC_RAW";var M=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e,t){var i;return l()(this,a),(i=r.call(this)).dts=t,i.pts=t,i.aacPacketType=e[0],i.payload=e.subarray(1),0===i.aacPacketType&&(i.audioSpecificConfig=Object(L.a)(i.payload)),i}return a}(T.a);var C,N=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e,t){var i;switch(l()(this,a),(i=r.call(this)).soundFormat=(240&e[0])>>4,i.soundRate=(12&e[0])>>2,(2&e[0])>>1){case 0:i.sampleSize=8;break;case 1:i.sampleSize=16}return i.soundType=1&e[0],i.soundFormat===I.AAC?i.soundData=new M(e.subarray(1),t):_.a.error("flv tag audioData encounter unknown soundFormat ".concat(i.soundFormat)),i}return a}(T.a);(C=C=C||{})[C.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",C[C.NALU=1]="NALU",C[C.SEQUENCE_END=2]="SEQUENCE_END";var B=new b.a,F=[];B.on("nalu",function(e){switch(e.unit_type){case 7:case 8:case 5:case 1:F.push(e)}});var U,j=function(e){u()(c,e);var i,n,s=(i=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function c(e,t,i){l()(this,c);var n=s.call(this),r=e.flv,a=e.options;if(n.avcPacketType=t[0],1===n.avcPacketType?(e=16777215&n.readUint32(t,0),n.cts=e<<8>>8):n.cts=0,n.dts=i,n.pts=n.dts+n.cts,n.payload=t.subarray(4),0===n.avcPacketType)n.decoderConfigurationRecord=function(e){var t=e[0],i=e[1],n=e[2],r=e[3],a=1+(3&e[4]),o=[],s=[],c=5,d=31&e[c];if(0==d)_.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No SPS");else if(0<d){1<d&&_.a.warn("Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(d)),c++;for(var u=0;u<d;u++){var l=e[c]<<8|e[c+1];c+=2,s.push(e.subarray(c,c+l)),c+=l}}var h=e[c];if(0===h)_.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No PPS");else if(0<h){1<h&&_.a.warn("Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(h)),c++;for(var f=0;f<h;f++){var p=e[c]<<8|e[c+1];c+=2,o.push(e.subarray(c,c+p)),c+=p}}return{version:t,profile:i,profileCompatibility:n,level:r,naluSizeLength:a,spsNalus:s,ppsNalus:o}}(n.payload),r.decoderConfigurationRecord=n.decoderConfigurationRecord;else if(a.decodeCodec){n.naluList=[];a={pts:n.pts,dts:n.dts,payload:n.payload};if(!n.decoderConfigurationRecord){r.decoderConfigurationRecord&&(a.naluSizeLength=r.decoderConfigurationRecord.naluSizeLength),B.push(a);for(var o=0;o<F.length;o++)n.naluList.push(F[o]);F.splice(0,F.length)}}return n}return c}(T.a);U=U||{},U[U.AVC=7]="AVC";var V=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e,t,i){var n;return l()(this,a),(n=r.call(this)).frameType=t[0]>>4&15,n.isKeyframe=1===n.frameType,n.codecId=15&t[0],n.codecId===U.AVC?n.videoData=new j(e,t.subarray(1),i):_.a.error("flv tag videoData encounter unknown codecId ".concat(n.codecId)),n}return a}(T.a);var W=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return l()(this,a),(i=r.call(this)).flv_=t,i.options_=n,i.pipeCtx={ctx:e,flv:t,options:n},i}return o()(a,[{key:"push",value:function(e){switch(e.tagType){case 18:this.parseScriptData_(e.payload);break;case 9:this.parseVideoData_(e);break;case 8:this.parseAudioData_(e);break;default:_.a.error("still not supported flv tag type ".concat(e.tagType))}}},{key:"flush",value:function(){this.emit("done")}},{key:"reset",value:function(){this.emit("reset")}},{key:"parseScriptData_",value:function(e){var t,i=this.flv_,t=(t={},e=A(e),t[e.key]=e.value,t);i.emit("data",Object.assign({type:"tag",tagType:18},t))}},{key:"parseVideoData_",value:function(e){var t=this.flv_,i=new V(this.pipeCtx,e.payload,e.timestamp),i=Object.assign({type:"tag",tagType:9,timestamp:e.timestamp},i);t.emit("data",i)}},{key:"parseAudioData_",value:function(e){var t=this.flv_,i=new N(e.payload,e.timestamp),n=i.soundData;n.audioSpecificConfig&&(t.audioSpecificConfig=n.audioSpecificConfig);i=Object.assign({type:"tag",tagType:8,timestamp:e.timestamp},i);t.emit("data",i)}}]),a}(n.a);var H=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e){var t;return l()(this,a),(t=r.call(this)).signature=String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2]),t.version=e[3],t.hasAudio=(4&e[4])>>>2==1,t.hasVideo=1==(1&e[4]),t.offset=t.readUint32(e,5),t}return o()(a,[{key:"valid",value:function(){return"FLV"===this.signature}}]),a}(T.a);function z(){l()(this,z)}var Y=function(e){u()(s,e);var i,n,r=(i=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l()(this,s),(e=r.call(this,e,t)).cache_buffer_=new x.a,e.flv_=new R,e.flv_.stage=c.HEAD,e.body_=new w(e.ctx_,e.flv_,t),e.tags_=new W(e.ctx_,e.flv_,t),e.pipe(e.body_),e.body_.pipe(e.tags_),e}return o()(s,[{key:"endStream",get:function(){return this.flv_}},{key:"push",value:function(e){var t=this.ctx_,i=this.flv_,n=this.cache_buffer_,r=d()(f()(s.prototype),"constraintPushData_",this).call(this,e),e=this.cache_buffer_.byteLength;_.a.log("flv demux received ".concat(r.byteLength," bytes, cache ").concat(e," bytes."));e=t.config;for(Object(y.g)(e.offsetPos)&&(i.pos=e.offsetPos),n.append(r),i.pos<9?i.stage=c.HEAD:i.stage=c.BODY;;)if(i.stage===c.HEAD){if(!(9<=n.byteLength))break;var a=n.cut(9),o=new H(a);if(!o.valid()){t.fireErr(S.a.MUX_FLV_HEAD_SIGNATURE);break}i.emit("data",{type:"head",signature:o.signature,version:o.version,hasAudio:o.hasAudio,hasVideo:o.hasVideo,offset:o.offset}),i.stage=c.BODY,i.pos=9}else if(i.stage===c.BODY){4<=n.byteLength&&(a=n.byteLength,o=n.bytes,n.clear(),o&&this.emit("data",o),i.pos+=a);break}e.done&&(this.reset(),i.emit("done"))}},{key:"reset",value:function(){var e=this.body_,t=this.tags_,i=this.flv_,n=this.cache_buffer_;i.stage=c.HEAD,i.pos=0,n.clear(),e.reset(),t.reset()}}]),s}(t.a),G=i(616),t=i(344),Q=i(202);var K=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(){var t;return l()(this,a),(t=r.call(this,[Y,{decodeCodec:!0}],G.a)).headerCodec=new b.a,t._offsetTime=0,t.demuxer.endStream.on("data",function(e){t.isHeader?t.handleHeader_(e):t.handleFrames_(e)}).on("done",function(){t.isHeader?(t.headerDone=!0,t.checkHeader_()):t.handleDataDone_()}).on("error",function(e){}),t.headerCodec.on("nalu",function(e){7===e.unit_type?(t.box.sps=!0,t.box.vc.spsnalu=e,t.box.vc.pixelRatio=e.sps.pixelRatio):8===e.unit_type&&(t.box.pps=!0,t.box.vc.ppsnalu=e),t.checkHeader_()}),t}return o()(a,[{key:"push",value:function(e,t){var i=t.offsetPos;"number"!=typeof i||isNaN(i)||i<0||(t.meta.header?(this.box=new z,this.box.meta=t.meta,this.isHeader=!0):(this.faConfig=t.meta.vac.ac,this.fvConfig=t.meta.vac.vc,"number"==typeof t.meta.offset&&0<=t.meta.offset?this._offsetTime=1e3*t.meta.offset:this._offsetTime=0,this.isHeader=!1,this.currentFrame=[],this.newGops_()),d()(f()(a.prototype),"push",this).call(this,e,t))}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0,this.newGop_()}},{key:"handleHeader_",value:function(e){if("head"===e.type)this.box.hasAudio=e.hasAudio,this.box.hasVideo=e.hasVideo;else if("tag"===e.type)switch(e.tagType){case 18:this.updateScript_(e);break;case 8:this.box.ac||this.updateAudio_(e);break;case 9:this.box.vc||this.updateVideo_(e)}}},{key:"handleFrames_",value:function(e){switch(e.tagType){case 8:this.appendAudio_(e);break;case 9:this.appendVideo_(e)}}},{key:"appendVideo_",value:function(e){var i=this;e.videoData.naluList.forEach(function(e){var t=i.currentFrame||[];0===t.length?(t.keyframe=!1,t.duration=0,t.byteLength=e.rawData.byteLength,t.naluCount=1):(t.naluCount++,t.byteLength+=e.rawData.byteLength),t.pts=90*(e.pts+i._offsetTime),t.dts=90*(e.dts+i._offsetTime),i.gop&&0===i.gop.length&&e.unit_type,5===e.unit_type&&(t.keyframe=!0),t.push(e)}),this.pushFrameIntoGop_()}},{key:"appendAudio_",value:function(e){var t=e.soundData,i=Object(Q.a)({},this.faConfig);i.data=t.payload,i.dts=90*(t.dts+this._offsetTime),i.pts=90*(t.pts+this._offsetTime),null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config&&(e=Object(m.a)(i.audioObjectType,i.samplingFrequencyIndex,i.channelCount),this.audioTrack.config=e.config,this.audioTrack.sampleRate=e.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=e.sampleRate,this.audioTrack.channelCount=e.channelCount,this.audioTrack.codec=e.codec,this.audioTrack.realCodec=e.realCodec),this.audioTrack.frames.push(i),this.audioTrack.frames.byteLength+=t.payload.byteLength}},{key:"updateScript_",value:function(e){e=e.onMetaData;this.box.duration=e.duration,this.box.filesize=e.filesize,this.box.height=e.height,this.box.keyframePositions=e.keyframes.filepositions,this.box.keyframeTimes=e.keyframes.times,this.box.width=e.width}},{key:"updateAudio_",value:function(e){var t=e.soundData,i=t.audioSpecificConfig;this.box.ac={audioObjectType:i.audioObjectType,channelCount:i.channelConfiguration,dts:t.dts,pts:t.pts,sampleCount:i.sampleCount,sampleRate:i.sampleRate,sampleSize:e.sampleSize,samplingFrequencyIndex:i.samplingFrequencyIndex,type:"audio"}}},{key:"updateVideo_",value:function(e){var t=e.videoData,i=t.decoderConfigurationRecord;this.box.naluSizeLength=i.naluSizeLength,this.box.vc={height:0,levelIdc:0,pixelRatio:[],pps:[],profileCompatibility:0,profileIdc:0,sps:[],width:0};var n=this.box.vc,e=function(e){var t=function(e){var t=[];if(0<e)for(;e;)t.unshift(255&e),e>>=8;else t.push(0);return t}(e.length),i=new Uint8Array(t.length+e.length);return i.set(t,0),i.set(e,t.length),{naluSizeLength:t.length,payload:i}};i.ppsNalus&&(n.pps=i.ppsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},e(n.pps[0])))),i.spsNalus&&(n.sps=i.spsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},e(n.sps[0])))),n.profileIdc=i.profile,n.profileCompatibility,i.profileCompatibility,n.levelIdc=i.level,n.width=this.box.width,n.height=this.box.height}},{key:"checkHeader_",value:function(){this.box.pps&&this.box.sps&&this.headerDone&&this.isHeader&&(this.demuxer.emit("demux_info",{type:"head",data:this.box}),this.headerDone=!1,this.isHeader=!1)}},{key:"handleDataDone_",value:function(){var e,t;this.gop&&0<this.gop.length&&(t=this.gop[0],e={id:256,type:"video",timescale:9e4,duration:Number.POSITIVE_INFINITY,gops:[],firstDTS:0,firstPTS:0,codec:"",stream_type:15,constainer:"video/mp4",baseMediaDecodeTime:Math.max(t.pts,0)},this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),e.gops=this.gops,e.firstDTS=t.dts,e.firstPTS=t.pts,t=Object(k.a)(this.fvConfig.spsnalu.sps),e.codec=t.codec,Object(Q.a)(e,this.fvConfig),this.audioTrack&&0<this.audioTrack.frames.length&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts,this.audioTrack.baseMediaDecodeTime=Math.max(this.audioTrack.firstDTS,0)),this.remuxer.push({videoTrack:e,audioTrack:this.audioTrack}),this.audioTrack=null)}},{key:"pushFrameIntoGop_",value:function(){var e,t,i=this.currentFrame,n=this.gop.length;0<n&&(t=(e=this.gop[n-1]).duration,e.duration=i.dts-e.dts,i.duration=e.duration,1===n&&0===t&&(this.gop.duration+=e.duration)),0<i.length&&(this.gop.push(i),this.gop.duration+=i.duration,this.gop.byteLength+=i.byteLength,this.gop.naluCount+=i.naluCount),this.currentFrame=[]}}]),a}(t.a),$=i(412);var Z=function(e){u()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f()(i);return t=n?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),h()(this,t)});function a(e){var c;l()(this,a),(c=r.call(this,Object.assign(Object.assign({},e),{pkg:$,watch:["loader","mux"],transmuxer:"FLV_MP4"}))).$TAG="FlvMux",c.seekingOnceChecked_=!1;var t=s()(c),e=t.$stream,d=t.$videoMediaStartTimes_,i=t.$transmuxer,t=t.$eventManager,u=e.restrictor;return t.on(i,"E",function(e){c.$throwError(Object(v.a)(e.code,e.message))}).on(i,"I",function(){c.tryPush_()}).on(i,"DI",function(e){"head"===e.type&&c.$ipc.emit("headerComplete",e.data)}).on(i,"D",function(e){if(c.$checkMuxMetaMatched(c.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,i=e.container,n=e.codec,r=e.trackId,a=e.data;_.a.log("".concat(c.LOG_TAG," parsed ").concat(t," initSegment, ").concat(i,"_").concat(n)),"video"!==t&&"audio"!==t||((s=new p.a("video"===t?1:2)).bytesArray=a,s.trackId=r,s.container=i,s.codec=n,"video"===t?u.videoInitSegment=s:"audio"===t&&(u.audioInitSegment=s),c.tryProvideArtefact_());break;case"fragment":var o,r=e.contentType,i=e.data,n=e.duration,t=e.startDTS,s=e.startPTS;if(e.nextSegmentPTS,_.a.log("".concat(c.LOG_TAG," parsed ").concat(r,", startDTS/startPTS/end/duration(").concat(t.toFixed(3),"/").concat(s.toFixed(3),"/").concat((s+n).toFixed(3),"/").concat(n.toFixed(3),")")),n<0)return void _.a.warn("".concat(c.LOG_TAG," ignore parsed, due the duration ").concat(n));"video"===r?((o=new g.a(1)).bytesArray=i,o.startTime=t,o.duration=n,d.push(o.startTime),u.videoMediaSegments.push(o)):"audio"===r&&((o=new g.a(2)).bytesArray=i,o.startTime=s,o.duration=n,u.audioMediaSegments.push(o)),c.tryProvideArtefact_()}}).on(i,"O",function(e){var t=c.$videoMediaStartTimes_;0<t.length&&(c.onVideoSegmentParsed_(t[0]),c.$videoMediaStartTimes_=[])}),c.$ipc.on("fragmentHeader",function(e){i.push(e.bytes,{done:!0,meta:e.meta,offsetPos:0})}),c}return o()(a,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e,t,i=this.$krt,n=this.$stream,r=this.$transmuxer,a=this.$loaderArtifact,o=this.$selfArtifact,s=n.restrictor,c=n.renderer;!Object(y.c)(a)&&Object(y.c)(o)&&this.$canConsumeLoaderData()&&(e=a.data,n=(t=a.meta).fragKey,o=t.byteOffset,a=0,s.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||n==this.$currentDataMeta.fragKey)||(s.needSendInitSegment=!0,s.videoInitSegment=s.audioInitSegment=null),this.$currentDataMeta=t,i.conf.alwaysSeekKeyframe||(i=c.currentTimeRange,c=c.currentTime,a=(i?i.end:c)||0),r.push(e,{done:!0,stubTime:a,resetInitSegment:s.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:t,offsetPos:o}),this.$consumeArtefact("loader"))}},{key:"tryProvideArtefact_",value:function(){var e;!Object(y.c)(this.$selfArtifact)||(e=this.$stream.restrictor.consume())&&this.$provideArtefact(e)}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;t.seeking?this.seekingOnceChecked_||(this.seekingOnceChecked_=!0,e<=(t=t.currentTime)?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):_.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(t,", it should be corrected at first parsed segment"))):this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){d()(f()(a.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),a}(r.a)},function(e,t,i){"use strict";i.d(t,"b",function(){return W}),i.d(t,"a",function(){return H}),i(9);function a(e){h()(this,a);var t,i,n=0,r=((15&e[1])<<8|e[2])-4-5;for(this.pmtTable=[];n<r;n+=4)0==(t=e[n+8]<<8|e[n+9])?(i=(31&e[10+n])<<8|e[11+n],_.a.log("packet->network_PID %0x /n/n",i)):this.pmtTable.push({programNum:t,program_map_PID:(31&e[10+n])<<8|e[11+n]})}function u(e){h()(this,u);var t=(15&e[1])<<8|e[2],i=(15&e[10])<<8|e[11];if(!(i<0)){if(2<i)for(var n=0;n<i;)n+=e[13+n];var r=12+i,a=t-i-9-4,t=r+a;if(t<=r)_.a.warn("es_section_pos < es_section_end ".concat(r,", ").concat(t));else{this.pes_table=[];for(var o=0;o<a;){var s=r+o,c=e[s],d=8191&(e[s+1]<<8|e[s+2]),s=4095&(e[s+3]<<8|e[s+4]);this.pes_table.push({streamType:c,PID:d}),o+=5+s}}}}var n=i(2),h=i.n(n),r=i(3),o=i.n(r),t=i(38),s=i.n(t),n=i(42),f=i.n(n),r=i(4),c=i.n(r),t=i(5),d=i.n(t),n=i(1),p=i.n(n),r=(i(140),i(27),i(115),i(90),i(530)),_=i(51),l=i(612),g=i(613),y=i(152),v=i(611),m=i(411),t=i(272),b=i(607),k=i(382),x=(o()(S,[{key:"currentProgramPID",get:function(){for(var e=[],t=0;t<this.pat_table.length;t++)e.push(this.pat_table[t].pid);return 0<e.length?e[0]:-1}},{key:"tracks",get:function(){return this.pes_streams}},{key:"reset",value:function(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}},{key:"parse",value:function(e){0===e.PID?this._parsePat(e):1===e.PID||2===e.PID||3<=e.PID&&e.PID<=15||17===e.PID||e.PID===this.currentProgramPID&&this._parsePmt(e)}},{key:"findTrack",value:function(e){for(var t=null,i=this.pes_streams,n=0;n<i.length;n++)if(i[n].id===e){t=i[n];break}return t}},{key:"_parsePat",value:function(e){var t;e=e.payload_unit_start_indicator?(t=e.payload[0],e.payload.subarray(t+1)):e.payload;for(var i=new a(e),n=0;n<i.pmtTable.length;n++)this._add_pid_to_pmt(i.pmtTable[n].programNum,i.pmtTable[n].program_map_PID);return i}},{key:"_add_pid_to_pmt",value:function(e,t){var i=this.pat_table;!function(e){for(var t=0;t<i.length;t++)if(i[t].id===e)return 1}(e)&&i.push({id:e,pid:t})}},{key:"_parsePmt",value:function(e){var t;e=e.payload_unit_start_indicator?(t=e.payload[0],e.payload.subarray(t+1)):e.payload;for(var i=new u(e),n=0;n<i.pes_table.length;n++)this._add_pes_stream(i.pes_table[n],i);return i}},{key:"_add_pes_stream",value:function(e,t){var i=this.pes_streams;!function(e){for(var t=0;t<i.length;t++)if(i[t].id===e)return 1}(e.PID)&&i.push({id:e.PID,stream_type:e.streamType,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}}]),S),n=(i(107),i(133));function S(e){h()(this,S),this.pat_table=[],this.pes_streams=[]}var T=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e,t,i){var n;return h()(this,a),(n=r.call(this)).videoTrack=null,n.audioTrack=null,n.captionTrack=null,n.tracksGot=!1,n.context=e,n.PSI=t,n.options=i,n}return o()(a,[{key:"push",value:function(e){for(var t,i=this.context.config.resetInitSegment,n=e,r=!1,a=!1,o=0;o<n.length;o++)switch(n[o].type){case"video":r=!0;break;case"audio":a=!0}i&&!this.tracksGot&&0<this.PSI.tracks.length&&(this.tracksGot=!0,t=r,e=a,2===(i=this.PSI.tracks.length)&&(t=e=!0),this.context.emit("info",{tracksExpected:i,audio:e,video:t}));for(var s,c=0;c<n.length;c++)switch((s=n[c]).type){case"video":this._complexVideo(s);break;case"audio":this._complexAudio(s);break;default:_.a.warn("unsupported track type ".concat(s.type))}}},{key:"flush",value:function(){this.emit("done"),this._clearStream()}},{key:"reset",value:function(){this._clearStream()}},{key:"_clearStream",value:function(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null,this.tracksGot=!1}},{key:"_complexVideo",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="video",t.gops=e,t.firstDTS=e[0][0].dts,t.firstPTS=e[0][0].pts,t.duration=Number.POSITIVE_INFINITY,this.videoTrack=t,this.emit("data",{videoTrack:this.videoTrack}))}},{key:"_complexAudio",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="audio",t.frames=e,t.firstPTS=t.firstDTS=e[0].dts,t.duration=Number.POSITIVE_INFINITY,this.audioTrack=t,this.emit("data",{audioTrack:this.audioTrack}))}}]),a}(n.a),P=i(337),I=i(398);var w=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e){var t;return h()(this,a),(t=r.call(this)).PSI=e,t.trackId=null,t.codec=new P.a,t.codec.on("frame",function(e){t.frames.push(e),t.frames.byteLength+=e.data.byteLength,t.frames.trackId=t.trackId}),t.newFrames_(),t}return o()(a,[{key:"push",value:function(e){15===e.stream_type&&(this.trackId=e.pid,this.codec.push({dts:e.pes.DTS,pts:e.pes.PTS,payload:e.pes.data_byte}))}},{key:"flush",value:function(){var e,t,i,n;0<this.frames.length&&(e=this.frames.length,t=this.frames[0],n=(i=this.frames[e-1]).sampleRate*i.sampleCount/9e4,this.frames.firstDTS=t.dts,this.frames.firstPTS=t.pts,this.frames.duration=1===e?n:n+(i.pts-t.pts),this.updateTrackMeta_(t),this.emit("data",this.frames),this.reset(),this.emit("done"))}},{key:"reset",value:function(){this.trackId=null,this.newFrames_()}},{key:"newFrames_",value:function(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}},{key:"updateTrackMeta_",value:function(e){var t=this.PSI.findTrack(this.trackId),e=Object(I.a)(e.audioObjectType,e.samplingFrequencyIndex,e.channelCount);t.config=e.config,t.sampleRate=e.sampleRate,t.inputTimeScale=t.inputTimeScale||t.timescale,t.timescale=e.sampleRate,t.channelCount=e.channelCount,t.codec=e.codec,t.realCodec=e.realCodec,t.isAAC=!0}}]),a}(n.a),A=i(255),E=i(340),D=i(400);var q=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e){var t;return h()(this,a),(t=r.call(this)).trackId=null,t.currentFrame=[],t.PSI=e,t.newGop_(),t.newGops_(),t}return o()(a,[{key:"_initCodec",value:function(){var n=this;this.codec=new A.a,this.codec.on("nalu",function(e){var t,i;e instanceof E.a&&(7===e.unit_type?(t=n.PSI.findTrack(n.trackId),i=Object(D.a)(e.sps),t.codec=i.codec,t.width=e.sps.width,t.height=e.sps.height,t.profileIdc=e.sps.profile_idc,t.profileCompatibility=e.sps.profile_compatibility,t.levelIdc=e.sps.level_idc,t.pixelRatio=e.sps.pixelRatio,t.sps=[e.rawData]):8===e.unit_type&&(n.PSI.findTrack(n.trackId).pps=[e.rawData]),n.grouping_(e))})}},{key:"push",value:function(e){var t=e.stream_type,i=e.pes,e=e.pid;27===t&&(this.codec||this._initCodec(),this.trackId=e,i={pts:i.PTS,dts:i.DTS,payload:i.data_byte},this.codec.push(i))}},{key:"flush",value:function(){0<this.currentFrame.length&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),0<this.gop.length&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){9===e.unit_type?(0<this.currentFrame.length&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,0<this.gop.length&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||0<this.gop.length?this.pushFrameIntoGop_():_.a.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts):(5===e.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e)),this.currentFrame.duration=e.dts-this.currentFrame.dts}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),a}(n.a),O=i(401),R=i(153);var L=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e){var t;return h()(this,a),(t=r.call(this)).trackId=null,t.currentFrame=[],t.hevcMetVirtualAUD_=!0,t.PSI=e,t.newGop_(),t.newGops_(),t}return o()(a,[{key:"_initCodec",value:function(){var n=this;this.codec=new A.b,this.codec.on("nalu",function(e){var t,i;32===e.unit_type?((t=n.PSI.findTrack(n.trackId)).vps=[e.rawData],t.hevc_vps=e.vps):33===e.unit_type?(i=n.PSI.findTrack(n.trackId),t=Object(O.a)(e.sps),i.codec=t.codec,i.width=e.sps.width,i.height=e.sps.height,i.profileIdc=e.sps.profile_idc,i.profileCompatibility=e.sps.profile_compatibility,i.levelIdc=e.sps.level_idc,i.pixelRatio=e.sps.pixelRatio,i.sps=[e.rawData],i.hevc_sps=e.sps):34===e.unit_type&&((i=n.PSI.findTrack(n.trackId)).pps=[e.rawData],i.hevc_pps=e.pps),n.grouping_(e)})}},{key:"push",value:function(e){var t=e.stream_type,i=e.pes,e=e.pid;36===t&&(this.codec||this._initCodec(),this.trackId=e,i={pts:i.PTS,dts:i.DTS,payload:i.data_byte},this.codec.push(i))}},{key:"flush",value:function(){0<this.currentFrame.length&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),0<this.gop.length&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){this.hevcMetVirtualAUD_&&(0<this.currentFrame.length&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,0<this.gop.length&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||0<this.gop.length?this.pushFrameIntoGop_():_.a.warn("hevc codec drop frame")),Object(R.e)(this.currentFrame,"keyframe")&&(this.prevFrame=this.currentFrame),this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts,this.hevcMetVirtualAUD_=!1),e.unit_type<=21&&16<=e.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e),this.prevFrame&&(this.prevFrame.duration=e.dts-this.prevFrame.dts),0<=e.unit_type&&e.unit_type<=21&&(this.hevcMetVirtualAUD_=!0)}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),a}(n.a);var M=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return h()(this,a),(i=r.call(this)).context=e,i.PSI=t,i.options=n,i.streams=[],i}return o()(a,[{key:"initADTS_",value:function(){var r=this,e=this.PSI,t=this.streams,a=this.context,e=this.adtsStream=new w(e);t.push(e),e.on("data",function(e){var t=a.config.stubTime;if(Object(y.g)(t)){var i=e.firstPTS/9e4,n=(e.firstPTS+e.duration)/9e4;if(n<t)return void _.a.warn("drop adts, start/end/stubTime(".concat(i.toFixed(3),"/").concat(n.toFixed(3),"/").concat(t,")"))}r.emit("data",[e])})}},{key:"initAVC_",value:function(){var r=this,e=this.PSI,t=this.streams,a=this.context,e=this.avcStream=new q(e);t.push(e),e.on("data",function(e){var t=a.config.stubTime;if(Object(y.g)(t)){var i=e.firstPTS/9e4,n=(e.firstPTS+e.duration)/9e4;if(n<t)return void _.a.warn("drop avc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(n.toFixed(3),"/").concat(t,")"))}r.emit("data",[e]),r.adtsStream&&r.adtsStream.flush()})}},{key:"initHEVC_",value:function(){var r=this,e=this.PSI,a=this.context,t=this.streams,e=this.hevcStream=new L(e);t.push(e),e.on("data",function(e){var t=a.config.stubTime;if(Object(y.g)(t)){var i=e.firstPTS/9e4,n=(e.firstPTS+e.duration)/9e4;if(n<t)return void _.a.warn("drop hevc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(n.toFixed(3),"/").concat(t,")"))}r.emit("data",[e]),r.adtsStream&&r.adtsStream.flush()})}},{key:"push",value:function(e){var t=this.options,i=(this.PSI,e.stream_type);if(t.decodeCodec)switch(i){case 27:this.avcStream||this.initAVC_(),this.avcStream.push(e);break;case 36:this.hevcStream||this.initHEVC_(),this.hevcStream.push(e);break;case 15:this.adtsStream||this.initADTS_(),this.adtsStream.push(e);break;default:_.a.warn("ts elementary encounter unknown stream type ".concat(i))}else this.emit("data",e)}},{key:"flush",value:function(){for(var e=this.streams,t=0;t<this.streams.length;t++){var i=e[t];i&&i.flush()}this.emit("done")}},{key:"reset",value:function(){for(var e=0;e<this.streams.length;e++){var t=this.streams[e];t&&t.reset()}this.emit("reset")}}]),a}(n.a),C=(o()(N,[{key:"calcTimestamp_",value:function(e,t){return 536870912*(14&e[t])+(e[t+1]<<22)+(e[t+2]>>1<<15)+(e[t+3]<<7)+(e[t+4]>>1)}}]),N);function N(e){h()(this,N);var t=e[7]>>6,i=e[8];this.PTS=0,2==(2&t)&&(this.PTS=this.calcTimestamp_(e,9)),this.DTS=this.PTS,1==(1&t)&&(this.DTS=this.calcTimestamp_(e,14)),this.data_byte=e.subarray(9+i)}var B=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e,t){var i;return h()(this,a),(i=r.call(this)).PSI=t,i.PID=null,i.cache_buffer=new b.a,i}return o()(a,[{key:"push",value:function(e){255<e.PID&&e.PID<8191&&(-1==this.PSI.currentProgramPID?this.pushPacket_(e):this.PSI.currentProgramPID!==e.PID&&(1===e.payload_unit_start_indicator&&this.assembleOnePES_(),this.pushPacket_(e)))}},{key:"flush",value:function(){this.assembleOnePES_(),this.emit("done")}},{key:"reset",value:function(){this.clearCached_(),this.emit("reset")}},{key:"clearCached_",value:function(){this.PID=null,this.cache_buffer.clear()}},{key:"pushPacket_",value:function(e){var t=this.cache_buffer,i=t.empty;i&&0===e.payload_unit_start_indicator||(i&&(this.PID=e.PID),t.append(e.payload))}},{key:"assembleOnePES_",value:function(){var t=this.cache_buffer;if(!t.empty){try{e=t.bytes}catch(e){throw"pes alloc mem err ".concat(t.byteLength)}var t=new C(e),e=this.PSI.findTrack(this.PID);e&&(t={pid:e.id,stream_type:e.stream_type,pes:t},this.emit("data",t)),this.clearCached_()}}}]),a}(n.a),F=(o()(U,[{key:"valid",value:function(){return 71===this.sync_byte&&1===this.has_payload}}]),U);function U(e){var t;h()(this,U),this.sync_byte=e[0],this.payload_unit_start_indicator=e[1]>>6&1,this.PID=8191&(e[1]<<8|e[2]),this.afc=e[3]>>4&3,this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload&&(this.has_adaptation?(t=e[4],this.payload=e.subarray(5+t)):this.payload=e.subarray(4))}var j=function(e){c()(l,e);var i,n,r=(i=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return h()(this,l),(e=r.call(this,e,t)).cache_buffer_=new b.a,e.psi_=new x(e.ctx_),e.pesStream_=new B(e.ctx_,e.psi_),e.elementaryStream_=new M(e.ctx_,e.psi_,t),e.complexStream_=new T(e.ctx_,e.psi_,t),e.pipe(e.pesStream_),e.pesStream_.pipe(e.elementaryStream_),e.elementaryStream_.pipe(e.complexStream_),e}return o()(l,[{key:"endStream",get:function(){var e=this.elementaryStream_;return e=this.options_.decodeCodec?this.complexStream_:e}},{key:"push",value:function(e){var t=this.ctx_,i=this.cache_buffer_,n=this.psi_,r=t.config,a=r.done,o=r.meta,r=f()(p()(l.prototype),"constraintPushData_",this).call(this,e),e=i.byteLength,s=null;for(o&&Object(y.g)(o.byteOffset)&&(s=o.byteOffset-e),_.a.log("hls demux received ".concat(r.byteLength," bytes, cache ").concat(e," bytes. ").concat(a?"chunk done":"")),i.append(r);188<=i.byteLength;){var c=i.cut(188);if(c){var d=new F(c);if(!d.valid()){var u="Encounter invalid ts packet, startByte: ".concat(s," endByte: ").concat(s+c.byteLength," packet_length(").concat(c.length,"), cache_length(").concat(i.byteLength,"), has_payload(").concat(d.has_payload,"), data(").concat(c,")");_.a.error(u),this.reset(),t.fireErr(k.a.MUX_TS_SYNC_BYTE,u,{startByte:s,endByte:s+c.byteLength});break}n.parse(d),this.emit("data",d),s+=c.byteLength}}i.empty&&a&&this.emit("done")}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),l}(t.a),V=i(616);var W=function(e){c()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function r(){var e;return h()(this,r),(e=t.call(this,[j,{decodeCodec:!0}],V.a)).demuxer.endStream.pipe(e.remuxer),e}return r}(i(344).a);var H=function(e){c()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function a(e){var c;h()(this,a),(c=r.call(this,Object.assign(Object.assign({},e),{pkg:m,watch:["loader","mux"],transmuxer:"TS_MP4"}))).$TAG="TsMux",c.seekingOnceChecked_=!1;var t=s()(c),e=t.$stream,d=t.$videoMediaStartTimes_,t=t.$transmuxer,u=e.restrictor;return c.$eventManager.on(t,"E",function(e){c.$checkMuxMetaMatched(c.$currentDataMeta,e.data.meta)&&c.$throwError(Object(v.a)(e.code,e.message,e.data))}).on(t,"I",function(){c.tryPush_()}).on(t,"DI",function(e){_.a.log("".concat(c.LOG_TAG," ").concat(2===e.tracksExpected?2:e.audio?"audio":"video"," track(s) found by ts mux info")),c.tracksExpected=e.tracksExpected,u.hasAudio=e.audio,u.hasVideo=e.video}).on(t,"D",function(e){if(c.$checkMuxMetaMatched(c.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,i=e.container,n=e.codec,r=e.trackId,a=e.data;_.a.log("".concat(c.LOG_TAG," parsed ").concat(t," initSegment, ").concat(i,"_").concat(n)),"video"!==t&&"audio"!==t||((s=new l.a("video"===t?1:2)).bytesArray=a,s.trackId=r,s.container=i,s.codec=n,"video"===t?u.videoInitSegment=s:"audio"===t&&(u.audioInitSegment=s),c.tryProvideArtefact_());break;case"fragment":var o,a=e.contentType,r=e.data,i=e.duration,n=e.startDTS,t=e.startPTS,s=e.nextSegmentPTS;if(_.a.log("".concat(c.LOG_TAG," parsed ").concat(a,", startDTS/startPTS/end/duration(").concat(n.toFixed(3),"/").concat(t.toFixed(3),"/").concat((t+i).toFixed(3),"/").concat(i.toFixed(3),")")),i<0)return void _.a.warn("".concat(c.LOG_TAG," ignore parsed, due the duration ").concat(i));"video"===a?((o=new g.a(1)).bytesArray=r,o.startTime=n,o.duration=i,d.push(o.startTime),u.videoMediaSegments.push(o)):"audio"===a&&((o=new g.a(2)).bytesArray=r,o.startTime=t,o.duration=i,u.audioMediaSegments.push(o),c.$audioSegmentAlignPTS_=s),c.tryProvideArtefact_()}}).on(t,"O",function(e){var t=c.$videoMediaStartTimes_;0<t.length&&(c.onVideoSegmentParsed_(t[0]),c.$videoMediaStartTimes_=[])}),c}return o()(a,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e,t,i=this.$krt,n=this.$stream,r=this.$transmuxer,a=this.$loaderArtifact,o=this.$selfArtifact,s=n.restrictor,c=n.renderer;!Object(y.c)(a)&&Object(y.c)(o)&&this.$canConsumeLoaderData()&&(e=a.data,t=0,(n=a.meta)&&(o=n.level,s.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||o==this.$currentDataMeta.level)||(s.needSendInitSegment=!0,s.videoInitSegment=s.audioInitSegment=null),this.$currentDataMeta=n),i.conf.alwaysSeekKeyframe||(i=c.currentTimeRange,c=c.currentTime,t=(i?i.end:c)||0),r.push(e,{done:a.done,stubTime:t,resetInitSegment:s.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:n}),this.$consumeArtefact("loader"))}},{key:"tryProvideArtefact_",value:function(){var e;!Object(y.c)(this.$selfArtifact)||(e=this.$stream.restrictor.consume())&&this.$provideArtefact(e)}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;t.seeking?this.seekingOnceChecked_||(this.seekingOnceChecked_=!0,e<=(t=t.currentTime)?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):_.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(t,", it should be corrected at first parsed segment"))):this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){f()(p()(a.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),a}(r.a)},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{})[t.IGNORABLE=0]="IGNORABLE",t[t.RECOVERABLE=1]="RECOVERABLE",t[t.CRITICAL=2]="CRITICAL"},,function(e,t,i){var n=i(24),r=i(23),a=i(230),i=i(80).NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,s=n.Int8Array;e.exports=!i||!r(function(){s(1)})||!r(function(){new s(-1)})||!a(function(e){new s,new s(null),new s(1.5),new s(e)},!0)||r(function(){return 1!==new s(new o(2),1,void 0).length})},function(e,t){var h=Math.abs,f=Math.pow,p=Math.floor,_=Math.log,g=Math.LN2;e.exports={pack:function(e,t,i){var n,r,a=new Array(i),o=8*i-t-1,s=(1<<o)-1,c=s>>1,d=23===t?f(2,-24)-f(2,-77):0,u=e<0||0===e&&1/e<0?1:0,l=0;for((e=h(e))!=e||e===1/0?(r=e!=e?1:0,n=s):(n=p(_(e)/g),e*(i=f(2,-n))<1&&(n--,i*=2),2<=(e+=1<=n+c?d/i:d*f(2,1-c))*i&&(n++,i/=2),s<=n+c?(r=0,n=s):1<=n+c?(r=(e*i-1)*f(2,t),n+=c):(r=e*f(2,c-1)*f(2,t),n=0));8<=t;a[l++]=255&r,r/=256,t-=8);for(n=n<<t|r,o+=t;0<o;a[l++]=255&n,n/=256,o-=8);return a[--l]|=128*u,a},unpack:function(e,t){var i,n=e.length,r=8*n-t-1,a=(1<<r)-1,o=a>>1,s=r-7,c=n-1,n=e[c--],d=127&n;for(n>>=7;0<s;d=256*d+e[c],c--,s-=8);for(i=d&(1<<-s)-1,d>>=-s,s+=t;0<s;i=256*i+e[c],c--,s-=8);if(0===d)d=1-o;else{if(d===a)return i?NaN:n?-1/0:1/0;i+=f(2,t),d-=o}return(n?-1:1)*i*f(2,d-t)}}},function(e,t,i){var n=i(93);e.exports=function(e){e=n(e);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(e,t,i){var h=i(81),f=i(44),p=i(197),_=i(229),g=i(135),y=i(80).aTypedArrayConstructor;e.exports=function(e){var t,i,n,r,a,o,s=h(e),c=arguments.length,d=1<c?arguments[1]:void 0,u=void 0!==d,l=p(s);if(null!=l&&!_(l))for(o=(a=l.call(s)).next,s=[];!(r=o.call(a)).done;)s.push(r.value);for(u&&2<c&&(d=g(d,arguments[2],2)),i=f(s.length),n=new(y(this))(i),t=0;t<i;t++)n[t]=u?d(s[t],t):s[t];return n}},function(e,t,i){"use strict";var c=i(81),d=i(119),u=i(44),l=Math.min;e.exports=[].copyWithin||function(e,t){var i=c(this),n=u(i.length),r=d(e,n),a=d(t,n),t=2<arguments.length?arguments[2]:void 0,o=l((void 0===t?n:d(t,n))-a,n-r),s=1;for(a<r&&r<a+o&&(s=-1,a+=o-1,r+=o-1);0<o--;)a in i?i[r]=i[a]:delete i[r],r+=s,a+=s;return i}},function(e,t,i){var a=i(80).aTypedArrayConstructor,o=i(138);e.exports=function(e,t){for(var e=o(e,e.constructor),i=0,n=t.length,r=new(a(e))(n);i<n;)r[i]=t[i++];return r}},,function(module,exports,__webpack_require__){var _qda=["YkRXV2k=","Vi46Sg==","IDI0IDE0J0w=","Sk5NTWw=","PyAxOFcgMjc=","VWVrZkc=","ZVJnZkE=","OVQgMDggMTI=","UGpYd24=","UUZ3dmU=","IDI5IDA2IDI2Rw==","Rl8gMjEz","IyAxOVVc","TGNRYXY=","Z013VUY=","IDIwIDIxI1Y=","JSAyMEZe","emR4aUg=","IDMxUihf","IDIyKyUw","KSAxNyhU","IDE3IDExIDIwTQ==","cGNkdmI=","I1gvJg==","TDhNYQ==","IDEzWGIgMzI=","IDE0IDI0YyI=","QyAxNTtJ","MjUmIDI2","IDE1QyAxMTE=","TSAyOCogMDE=","enZQb2g=","ITYoIDA4","RVVoSnk=","IDI1XS9M","IDE3JiAyNiAwOQ==","b0Jta3I=","ViNTTA==","K0siSA==","b25lcnJvcg==","Q1BzRFM=","MyAwNmAgMTE=","IDEzWGIgMTI=","U2NMeHo=","S1RHaHA=","R2tLRnA=","R1EnRg==","IDE1YyAwOVY=","T29xUGw=","VWludDhBcnJheQ==","TUVjd08=","RmhTUFk=","cmVzcG9uc2U=","IDI5KTYw","cWR5","T29VS0c=","IDExIDE5MTs=","PUY2IDIz","Q0xXeW4=","LFJTYw==","TT9QTQ==","eXhnWXg=","ak5mclk=","KjVNKg==","SCAyOVAgMjY=","IDE5IDIxTlg=","QCJQYA==","IiAyNSJZ","SU9KS1c=","cFVOa2k=","IDE1VDYgMTI=","Q2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiA=","ZklvQXY=","NzVHUw==","RS4gMjAz","bUV6bHc=","b25SdW50aW1lSW5pdGlhbGl6ZWQ=","IDE5IDEwRF4=","MVhRJw==","IDI4IDEzYEo=","bUxtRmU=","X2ZyZWU=","OV1VIDEy","VlFLa0I=","O0FiUg==","NSAxNSAwOWI=","KyAxMU8gMTQ=","WVVXb04=","QCJQPA==","cG9w","TXhsY2Y=","WEtobHc=","IDI0MFIt","QlVJdlI=","VXlUb2U=","KyAzMSAwOV8=","ZFVwQmg=","SEVBUDg=","WSAyOCAyOSs=","KCAxMCAyNUQ=","JSAyMjogMjQ=","IDI5VzRK","IDE2VDhA","J10gMDMgMTI=","I1c0IDIz","IDE2RV47","ISAxMkFh","aFpCVHY=","SSAzMTJF","RWNoVmc=","PmIsIDAz","IDEzRiAxNCg=","d2luZG93Ow==","IDI1KVRj","KCAwMlQgMDY=","IiIgMDhf","dFVseUo=","enhza3Y=","XCAxOTggMjY=","Oi0uIDA3","OD8gMjlD","IDIzSFkgMDI=","IDI4RV0gMTY=","KUUgMDRa","IDAxIDAyQCAyNSAwNg==","ZkhwVG8=","MyohOQ==","ITc2UQ==","Y2hhckNvZGVBdA==","Y21kNXg=","IDIzIDIxMyE=","QyAyMmMgMDA=","YXJyYXk=","T3NVSlU=","VkNKWVg=","bHVVenk=","QlkgMTJK","KCAxMyAxMCAwOA==","VDEgMTUx","PiAxOTsz","T1JuQUs=","IkYgMjMgMDU=","IDMxKl1E","IDMyMmMj","dFJLYUM=","IDE4PCNe","PTBUOg==","KD8gMjVg","IDAxIDEzIDIxNCE=","UnJ1b0U=","O2AgMTNA","M11XTw==","aW11bA==","Y1hMdm4=","aURtZ0E=","d1VoTWY=","RSAyNigw","YXJn","Vk9ueW4=","Tm5EbGY=","KCAxNF8n","OV1KPw==","R211cXM=","TEhJZUc=","QWxNb3Y=","IzpbLA==","UVlPRkE=","VWJGcUI=","IDEzIDEwQ10=","Wk0gMDNb","bm9FeGl0UnVudGltZQ==","IDMxIyAwNCw=","SlJwTVk=","akNoV3I=","RjRZXw==","cW9XeVc=","MyQgMDhE","W29iamVjdCBwcm9jZXNzXQ==","VlVua2M=","MCAyNCAwOCAxMg==","ZmlsZTovLw==","b3Blbg==","IDI4XUEgMjc=","IlRcIw==","SFk3Yw==","eFRzc1c=","IDMxKkFe","Kj9HIDMw","WCAyMyAxNzo=","akxqdkw=","LVQ/Og==","bWVKYnk=","Y21kNXhsaXZl","UVJ6aUM=","QiggMjMgMjg=","YXBwbHk=","UF4gMjlf","c3RhY2s=","ZFVLQ3U=","ZnNGbWQ=","bUFwYkg=","RjJGIDI5","IDE4IDIxIDE2Nw==","QnlFdno=","ZG9jYWk=","OiQgMDVR","dHJ1bmM=","SGhkRVY=","KCAxNSFW","ZmVhUUI=","IDAxIDI2IDI4NWA=","bVNpamo=","MlkkPA==","clVjTEM=","dXNlIGFzbQ==","Y0FPYmg=","SHNZU3I=","UmdaQlI=","WiAxOTRS","QiAwOEg1","Q0l0dmI=","PCAzMSAwNiAxMA==","MzpOIDAw","SCAzMSAwMjk=","dG9TdHJpbmc=","MkY7Rw==","IDMxLCUgMTc=","IDE2U085","MCAyNi8gMDM=","Z01FQ2k=","RSAzMSAwNEA=","Lj8wMA==","JCAyMyAwMU8=","TUxoblY=","alpLRmU=","b2JqZWN0","IDI3SCAwNyAwOA==","JSAwMmNM","eW9oR2M=","IDI3VSAwMkw=","PUpDWw==","IDIxNTQj","WUNDaXI=","IyUgMjJi","d0ZURVc=","WFF0ZFU=","YXJndW1lbnRz","IDE0IDI0IDI2IDIw","PyAwMyAxNTQ=","IDI4RCAwMlY=","c2V0U3RhdHVz","O0NeIDE2","IDExTTxi","QWxFQ1Y=","IDIwYzkgMjg=","RjMgMjBP","KSc1IDI4","ST8gMjYgMTc=","IDIxXVogMjE=","YnVmZmVy","JEsgMDA1","bnVtYmVy","eWhMZ2I=","IDE4IDIxIDE2QQ==","ZFRkZVM=","LCAxNTBe","QUlLVGU=","JTEoRw==","ck9OSUI=","Q0VgPA==","T15cMQ==","IDI0SiAwNU0=","QVV2ZmE=","YWJGPg==","dXZ1ZEs=","PCAyOSAwMSAxNQ==","QlwgMDRU","RXJ4S20=","IDMyWyAyODc=","c3Jj","YmxvYjo=","cmVxdWlyZTs=","ISAyMiVM","JiMgMjNd","cHJvdG90eXBl","IDI1XS8n","IDI5KTcgMDg=","RXd5Y0k=","IDMwIDE2VCAyMQ==","JSAwNDkn","J1ggMjcn","JitbWA==","b2xJalc=","IDE5IDEyJU8=","IDMxWyAyMCM=","IDE4Q0IgMDg=","cHJpbnQ=","WklmaEw=","Qm5IU3U=","JyAwM0ZV","JmM6Lg==","S0FtTms=","QUg3IDMy","IDI5P2BW","IDE5IDIwJCAxOA==","UnVubmluZy4uLg==","IDE1VDVh","WW5PY3M=","QFk8JA==","IDI1IDA0SCU=","cXJ3eEQ=","SUVPdU8=","PFYzIDAz","JyAxNmBK","IDMxIDMwLSAwMg==","Z1ZrbUU=","SFp6cFQ=","LC5VJw==","PUc/Sg==","O0cgMDQgMjM=","JFIgMzE6","RkdROQ==","cGh3WUo=","LVwxOQ==","JEAgMjUo","TSAyNDxT","SU5JVElBTF9NRU1PUlk=","RUpoQUY=","Tks1Mw==","IDI4RCVe","UG9Sc0Y=","IDIxXGM0","MSMgMDE5","IDE1IDIzSCY=","VkhSQVg=","PiAwMF8n","RXNoams=","IDIxIDA4VCAyOA==","bG9jYXRpb24=","UkRPckM=","KCAxMERh","STQgMDFG","IDAxIDIzIDEyQD0=","ZlJ3U1E=","IDI0WzMgMzE=","WUZxQW4=","IDI0KyAyNi4=","alpSQnY=","UkNXWHQ=","R0xhbUs=","Q25BZWs=","IDIzIUQgMjY=","Z0ZTYlg=","OCxXSw==","WXBEcWg=","IDAxKVEgMjZK","NlI6Rw==","TCsgMTYgMjg=","T0tFdkk=","cmVzcG9uc2VUZXh0","QWZOS2o=","IDE2WCIu","JVkgMzE1","X21hbGxvYw==","Wkt3ZUY=","IDE5QCogMzA=","UEZ4Y28=","KS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4=","Y1hEZUk=","IDI5ME0w","IDE0IDA2IDE3IDA5","TGRSb1k=","VkZzTk4=","IDE4LjsgMDc=","IDI4RiggMjY=","UyAxMyAwNyY=","IDI0KSAwN18=","KiAwNiAwOSAxNQ==","Z0NISGQ=","IyAxNzhQ","aW94dlc=","I0szIDI4","IylTQg==","NSAxNSAxMSAwMQ==","OEA0IDA1","IDI2Li1j","MSAyNiAwMzg=","T2JVb24=","IDI3LSAxNSAyNQ==","bmF2aWdhdG9y","c2NyZWVu","YCAyMjY4","dGdaUlY=","WG1OQmY=","ZkdTSnM=","OyY7VA==","NDphIDMx","IDE4LjAm","SnFQS1Y=","S3NwUHg=","bFpEU1g=","YWdQREE=","MCAwMVQ6","IDE2VDdG","cG9zdFJ1bg==","PyAwMCxW","IDEyIDE2YFE=","Ozo2OA==","ISAwMSAxMyY=","V2RJT1M=","U1dwWHA=","Ik4gMDAt","PSs/Pg==","TFRaSXc=","dXRmLTE2bGU=","Ji0gMThH","bVB6SUE=","TDNUIDI1","bWFUVkg=","ZG9jdW1lbnQ=","IiYxVw==","KVMgMTc8","IDI0IkRY","REdOa0Y=","Z2V0TmF0aXZlVHlwZVNpemUgaW52YWxpZCBiaXRzIA==","IDMwY0wgMDg=","dG9Mb3dlckNhc2U=","IDE3SC9Q","U0R3WVg=","UXp5ZFE=","PERUUg==","VUNOWGI=","ZHluQ2FsbF92aQ==","elZPS3U=","IDIzYSAwMT8=","IDAxIDIyMydH","IDE3QUBR","KVo/MA==","UiggMTQgMTc=","R2JDUGE=","ckNMSEo=","VCAwNUMgMTg=","IDI2WCAwMEo=","UiAyNyAyMDw=","c09TSmg=","YnZGWnc=","Y2h4SUE=","LiAxNUUgMTA=","ZXZlcnk=","IDMxIDA4IDA0MA==","IDI4Yjgu","UE5pdU0=","R0VU","IDE1IDIwWCAyOA==","IDI5KEMi","LyAxMEFh","L1lJIDMy","IDI3IDEzLSM=","ZnFkaVY=","RlBIRnE=","OyAxNSAzMCAxOA==","Y2NWZ3M=","KVtVIDIx","SSZdTg==","dmZDUmI=","ISAwNCQgMDA=","dktwck8=","IDE4MyAwNT8=","UEF4d00=","IDE1OyAxNSAyOA==","LCAwNiAwNUA=","KiAzMSAwOTo=","Wm9RcFE=","WGdKdlE=","IDEzXC5I","alRrVG8=","Mz5CIDEz","JkkgMTBj","VUNRaEM=","THJaVnA=","UiAwNSAwN1E=","IDE2IDMwIDE3IDMx","IDEzIDIzIDIyUg==","aWxvdmVpcWl5aQ==","alZZSlU=","MVQ/IDI4","cmNrbHo=","MCAzMCAwMyAyMg==","TVFBdXc=","KzZfPA==","QSAyNUUgMjM=","IDE4IDE4Ky4=","IDExLF0p","S012Zm8=","IDIwIDAwIDE2LA==","KCAwMFlW","WCAyMzM3","Y1ZpVlI=","JyAyNVdf","IDE0OzI9","eUd1RWo=","ISAwNSAxNjQ=","R2JkRUQ=","IDIzIDE0IDE4Og==","TzAuLA==","c2tVT3k=","RihXSA==","QCAyMiAwM0w=","S3daYXI=","MzogMDIq","Nz4gMjMr","KCAwNlwgMDc=","UygzIDMx","bG9jYWxob3N0","OyAxNl0n","IDE2LUYgMjM=","IDMyIDA2IDEyIDIx","SUNvRE8=","VSAwMDNS","IDI4Y0te","IDIzLiU6","WW9yWlg=","SEVBUFUzMg==","R2JleHI=","YXJyYXlidWZmZXI=","LSAwMiI7","KFwgMDVS","WiAzMS4gMDE=","RlNNQ2w=","OyAxNl1G","PSAyOTxF","IyI8Uw==","IDAxIDE2IDE3YWA=","IDA3SyAxM2A=","QkFMbVQ=","IDIzXCAxNyAwNA==","cElPcGU=","VS0gMDBM","ViAwNEtH","MTsgMjggMTU=","IDAxIDIwNT1d","R2ZPckY=","IDI5RyAwOV4=","LzRXIDI4","QkNNa28=","TlZeXg==","IDMwIDI4UVY=","cE5kQmo=","MSQ8IDIx","S1JXWW4=","a1Z3ak0=","UyAyODsy","IDAxKiYyIDA2","VkFnemg=","UEh4eWo=","U1p6TU4=","SCAyOVBV","dkZqZHA=","aTMy","IDI3X1IgMjc=","KlUgMDMgMzI=","JyAwMiw2","T0Q4Sg==","IDI1VCAzMT8=","JC8gMjFB","IDIwLyAyNU0=","UF4gMzBj","IDI4RiggMDY=","ZnVuY3Rpb24=","bGFzdEluZGV4T2Y=","JEhZIDIx","Yy9aIDIz","QUhQZmw=","UywgMjcgMjQ=","IDEzRiAxNCAxOQ==","T2hJVE0=","JiAyNlxL","ZnJybEs=","IDAxIDIyUyAxMzw=","cHJlbG9hZGVkQXVkaW9z","IDE4VCAyMSAxNg==","NSAzMkk9","UVFZeUs=","IkgtIDE3","R1liY2Y=","IDE2IDMyIyAwNg==","endtZXY=","JSAyNU9U","IDEyVD8gMDU=","Ni0gMjQx","TG9rd2o=","SklYQmY=","bG9n","d2Fybg==","JCAwOCgl","bWVzc2FnZQ==","bG9jYXRlRmlsZQ==","IDE4VSAwMiAxMQ==","IS0jIDI4","IDI1Iihh","VmRMWno=","TCAxMlEgMjc=","LycyIDEw","MSAyN1AgMTc=","IyAyMzdC","RV4gMjAi","TmBCIDI4","WXFUWEc=","ISAyOCIgMzI=","IDI0WitD","MjlYVA==","RG1Pelk=","VCAxNyAwMk0=","RCAwMTwgMjM=","IDExTT0gMTk=","IDE1IDE4M0M=","Y1B3bEU=","YFQgMjY9","X2Vtc2NyaXB0ZW5fZ2V0X3NicmtfcHRy","IDE3KDJc","RWxJc2U=","OSAxNiAyMyAwOQ==","IDI3SCAwOCAwNg==","SmhWZUE=","IDIxNSAxOFg=","IDE4IDA5KS4=","TEhwTHg=","U0dLV28=","VDo0IDA0","JSAwNj4gMDQ=","UXluS0E=","X2k2NEFkZA==","IDI3IDEyJSAyNw==","eHZidlc=","YnFLVWs=","RXhpdFN0YXR1cw==","aFh2enE=","ZHFRV0w=","d053d1I=","UFJ1WVE=","a3hTQ1U=","JUBOIDI1","IDExIDE0IDAxNA==","OlggMzBH","UlVlaUs=","OT9bMA==","OiAwNyAyMzk=","NTdVIDAx","IDE2Pj4gMTM=","IDMxKkFV","IDE4LjAgMjQ=","RUg8Pw==","PDE6Uw==","JyVMQQ==","OlFGIDE0","IDIyIDAxIDE0Sg==","dG1qVUk=","LCAxMSIgMTI=","IDI3Oidd","aHRtbA==","LCAwMTAgMjc=","ZHluQ2FsbF8=","dlBFWU4=","IDE3JiAyNV4=","eGpia2I=","O1BWQw==","Y2xpZW50SGVpZ2h0","UWpGZHY=","LjggMjVg","IDE1IDE4NCAwNg==","LDc/Ng==","IDEzSyAxMjI=","ZG91Ymxl","TyAxOCIgMjU=","IDE0NzM3","cW9OYk4=","X21lbXNldA==","LCByZXRyeWluZyA=","LTNYWQ==","IDEyIDEwWF4=","IDMxJCAwMFM=","RUhSY2Q=","IDMyIDA4SVI=","Y2VpbA==","b25BYm9ydA==","IDI4TkggMDc=","J0leSg==","JF4wYg==","IDI2VyAxMlc=","M1ZfIDE1","aGVpZ2h0","IDI3K1lJ","KzIgMzAr","UHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCg=","bnVFaFk=","IDMyNVEgMjI=","TlhSPg==","IDA5IDEzV0s=","I1c0IQ==","SyAwMEg9","Lk86Og==","KSAgYXQgb2Zmc2V0IA==","Z0hjdEo=","JT1gUw==","KEBbYQ==","Jz8sYw==","RFVSRkY=","dmdUdlI=","NlMgMjRM","cHJvY2Vzczs=","Uj9iYQ==","IDE3MSAzMlo=","LCAxNicq","Il0gMDAk","P0BQIDE4","X2JpdHNoaWZ0NjRTaGw=","MzogMDFC","KyAwNEQgMTg=","KCAwMEBC","YXFEWlU=","PiAyNCAwNCg=","cHJvY2Vzcw==","aGV3clo=","IDMwIDEzIDEyIg==","IDE5XiAxOEs=","IDEyY0E9","VUhyV2Y=","Li90aGlzLnByb2dyYW0=","IDI3IDEyJVA=","cnFrRVk=","X21lbWNweQ==","cmVwbGFjZQ==","IjYnXw==","IDMxX1El","dXRmOA==","LmAgMDEh","ZElyZkk=","QCJRJQ==","IDExVVxX","IDE3WFBe","c3RhcnRzV2l0aA==","amdkeG8=","TWF0aA==","alFYTmQ=","WlFLZXQ=","VXhLZnA=","SmJkUlQ=","MVslIDI1","bFh2V3c=","eWRiUm8=","JScuIDA3","TE1xUnE=","TVVhd2s=","UyAwNyEgMjk=","aHJRUWc=","SEVBUFU4","IDEwIDE1XiAyNA==","WlluenM=","R3pSQVg=","KiAwOUBS","UlhMZ2E=","OyAxM1s1","ISAyMiVI","IDI1IDA5PiAyMw==","SUQlIDIy","IyAxOVVQ","IDE4IDA4QDE=","TlRwS08=","ZVJndHQ=","cHJpbnRFcnI=","QXNzZXJ0aW9uIGZhaWxlZDog","TiAwNFhR","LileIDAw","R3lZa1U=","IDE5LyAxNyAyNw==","dW5zaGlmdA==","IDIxUyAxNiAyNQ==","U3RHb2I=","IDMyRCAxMVw=","TmhtakE=","U05kcVY=","cExrc3k=","SU5OLg==","eUxSZm8=","KG5vIHN0YWNrIHRyYWNlIGF2YWlsYWJsZSk=","IDE3IDE5IDE3IDIz","eWRVU1A=","IDI2TyAyMU8=","R0JEb2I=","J0cgMTRT","I0EgMjIgMDk=","c2hvd24=","OiAzMENf","IzpbIDI4","Ilo4Mg==","Y3VycmVudFNjcmlwdA==","Nk03IDA5","PyAyNyAwOSAzMQ==","ekxLZ00=","cmVzcG9uc2VUeXBl","WUV4YUo=","I1EgMTEgMTU=","LEQvIDA3","Iy4gMDUgMTE=","R1dHaUM=","IDI3ViAyMUM=","IDIwVyAxMlw=","JSAyMTtQ","dkhodXo=","JVwgMTYgMTM=","IDI4OCxQ","IDI0IDI1IDMxKg==","SCcgMjM7","OlM7VA==","Y2FsbGVkUnVu","NV5AIDAy","IDE4XSAyMiAyMg==","R1hzRGM=","IDEwIDE2IDEyIDE1","LEw8XQ==","IDI1NSAwNDg=","UnNhWVo=","d0FjdWI=","IDI5IDA3JyE=","IDI1KSAwNiAwNw==","U1ViUQ==","I1EgMTBR","OT9aQw==","cWZmV0k=","I008OQ==","SiAwOVFO","IDE4LjAgMDQ=","V2hMd0Y=","R0YgMDUgMDc=","SCAxOSAyNFM=","Y1NISEE=","IDI5YiAwNiM=","IDE5TzQgMjY=","bXlLaU0=","Q2xkQ0E=","IDEyQyAyM1o=","IDE1SyAyN2A=","IDAxIDEzIDA3IDE2IDEw","TzAtWg==","IDIwJy1X","ITYnXA==","dU1uZ0Y=","c3RhY2tSZXN0b3Jl","ISAyNE9T","OiAxN1k/","IDAxRFk6IDE5","Lz1WNg==","IDI1NSAwNDc=","IDE2IDI1IDAwIDA3","IDEzWy9G","IzpcLQ==","RklZcVE=","JkQgMjUgMTc=","OCAxOSxd","ZUpTRE4=","UURxV3A=","NDg6IDE1","am9pbg==","aVVsS1E=","IDEzYyAxNiE=","cHJlUnVu","IDMwWCAzMSAzMA==","IDE1IDIzRyAyNw==","U3NmUk4=","IDAxIDE3IDMwTV4=","IDI2MklT","IDMxMzNB","IDExXTIy","SkdpaHQ=","IDE0PCAyMyAyOQ==","JiAwMyAzMjg=","MDMgMTEgMTU=","TVByQ1U=","S29oaG0=","c3Vic3Ry","K14gMjQ6","b25sb2Fk","MkY8Kg==","J2M6IDMw","LVlMIDI3","IDIxIDA0LCAwNg==","IDA5NSxQ","J1EgMDEz","b1hZY0g=","aW5kZXhPZg==","RVhRIDA2","Ij5DUg==","Iik/YA==","OSAzMi4k","OiAwMCpY","Oi8kIDE1","U1VjMA==","d2NEVEE=","LCBtYWtlIHN1cmUgaXQgaXMgZXhwb3J0ZWQ=","IDMwXFwy","ekVtbEc=","YlJDZkk=","IDAxIiAxMScgMDQ=","Rl0gMjMgMTU=","IDEwVEwgMDg=","KyAxOVpV","Q29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4=","d2tUVXQ=","TXdGZlY=","S3pmdUU=","ekZzaVk=","WlNscEU=","S253WG0=","KksgMzAgMDI=","c3RhY2tTYXZl","YWlBWWk=","bWxDWUc=","LmAgMDE2","KDYgMjMgMjQ=","IDEzIDEwQyo=","VSAyMyAxMjU=","IDAxIDE1Wz0gMjI=","IyAxOVUgMTk=","IT0gMjkgMjg=","IDIzYSAwMEk=","JFtWYw==","LVwxTQ==","IDA4IDE5LiAxNA==","PCktNA==","TypERQ==","VmBgKg==","SSAwMFBH","IDI3IDAzSyAwMw==","bVBDS0w=","O0FiVg==","VlB6WnY=","aTE2","IDE5IDA0IDE4IDI3","ME08Wg==","ZG9tYWlu","LlogMjQl","IDE1VyAyMEA=","SSAyOU1T","c2xpY2U=","IDE5YSAxOCAwMw==","IDIxIDMwIDA4Vg==","KT81Qw==","YXNt","IDAxLiAwMCAwNlA=","cmVnaVI=","IDMyTCow","UmtPVGo=","IDAxIDAyOzop","Uk5kWE4=","c2VuZA==","d016UXU=","IDI5U0tB","TC4gMDAgMDA=","bUp6dFQ=","USAxNUsgMDM=","YmluZA==","S1BIak8=","IDAxIDI2ME1T","dUV4V1k=","VUIkUA==","WEVBdnM=","IDAxIDI2S2Ek","IDI0IDIxKFM=","IDI2QkNf","Mj5BSg==","LVo2MQ==","IDAxJThLIDA1","TG9qWWY=","JiAwNi4gMjI=","anhuUkM=","Y21kNXhkYXNo","IDMwIDIwPC8=","YkxjaWg=","eHJQU2k=","Tyg2Rg==","O0NeTA==","LyAxOSAwNiAwNA==","ITxDQw==","MyAxOCAxNTo=","eHFaaXY=","dUZTRVg=","JEVcSw==","RkUkIDIx","LklbOg==","IDE0NzQy","eG1IcEQ=","MScuUg==","RGxuSng=","PVw5Vw==","JCcgMjUgMjM=","I14gMDY8","bGVuZ3Ro","JyAxOS1Q","Vk9OUVQ=","LFwgMjJB","Y29uY2F0","ZXJzUXc=","WyAwNUVO","SGdtUkk=","IDI3SyAwNUQ=","Z3NVZ0U=","IDEwOiJN","PUdiIDAy","SEVBUDE2","IDE2LUYi","dGhpc1Byb2dyYW0=","IDI4IDA5IDI1IDMy","PVRhIDEw","LycyKA==","RlhsZU8=","PSAwN1Ey","JCAyNS4/","dUF3TVI=","bnpzZ0Q=","JUBWIDI4","Y0dFWkQ=","Vlpwc08=","IUpGOw==","IDE0PCAyMyAyOA==","JDhcQA==","IDMxPkZQ","IDI4QlA0","UnpZbmg=","Jj1KNQ==","NE8gMDdG","IDMyNiAxNyY=","LGFVIDEw","LyAxMSAyNVQ=","LVJiIDI5","c2V0","Wk1OYVI=","IDEyYSAyOF0=","YiAxOUggMjk=","JiAyOD9S","aWNUZWc=","bmFtZQ==","YlZFVUw=","Y2xpZW50V2lkdGg=","IDI0XSAxOSc=","IDE1OyAxNEc=","S0shIDE1","IDI4IDI1IDI1Rw==","SWNFcVY=","d1h5Wkg=","OlMgMDg8","dGl0bGU=","IDEzNlUk","IDI4OUNM","OyY6Uw==","a2hPSUE=","LCB0eXBlIA==","I0szIDA5","VCAxNyAwMj0=","IDMxY0QgMTk=","SGFtTUM=","IDMwMUhJ","ZnJvbUNoYXJDb2Rl","OlEgMTQ8","IDIwIDEwSy0=","IDE2RV42","IDE2IDA1IDA3OQ==","RSAyNihK","YyAyNist","WlpYSEc=","RiAwM0FU","IDMxVyAwNis=","IDE5VmFh","IyAyOCAxMyAyMQ==","IDIwIDEwTCAxOA==","IDAxIDA1IDMyOFI=","ZFVQclM=","Q2hhcmFjdGVyIGNvZGUg","IDI4SF4p","RFJkamw=","SlhyVGQ=","IDI4XFBP","IDE2P2AgMDY=","IDI1JUdi","IDE1IDIwVyAxNw==","OCAwNTsgMTA=","KicgMjYgMTM=","TGVDeFY=","YllqZWQ=","YWZXTkM=","IDIxIDAzP0w=","IDIwVyAzMEo=","ZGVjb2Rl","YkQgMzBh","IDE0VmMj","QzEnVQ==","IDE4NyAyMFo=","ZHd3dnA=","cHNTVnI=","IyAxOUBL","Q2ppc1I=","ald4Sm4=","Zmxvb3I=","IDMyIDE2IDIzJg==","S1pkbUo=","RUhHd1Q=","MyAxN0hU","LSggMTRA","dXR0UkQ=","aHJlZg==","IDAxQSAzMSNY","cmRzSW0=","ZWNubEQ=","bGt0eU8=","IDMxSigi","NicgMDggMjM=","IDE2XCsr","dW5kZWZpbmVk","O0YgMDZP","RHhWU3U=","MSggMTJF","YlVKaUo=","IDIwIDAwIDE2PQ==","IDE0NCAxNVo=","ZEdYc0I=","IDE2IDAwJEs=","IDI2IDAxKVY=","IDIwSiAxNU4=","MkY8JA==","QnF6ZVc=","L1YgMTVb","bEhLZVc=","JypTNw==","KCAwNDogMjg=","ZkFEelY=","IDA5Qj0q","IDIwIDIxI2M=","OTcjSA==","WHFJa0c=","bEh5SEk=","IDExR1g3","IS4gMDMgMDg=","RCg8Kw==","JFUgMjgm","IDMyRCAxMSAwMA==","KyhKNg==","IDI3OyAwMWA=","QEdPWg==","VHppWWM=","WUhZTGk=","IDI0YCAxNSw=","IDI4RCAwMWA=","Il5CQg==","Y1hST28=","Uk1kVFQ=","IDE5IlBR","JSAxNlEgMjc=","KiJDYQ==","KiAxNE44","bHdlY04=","IDE2NCAwMl4=","RHlwRm0=","IDIwIDEwSzM=","IDIwPiAyMyc=","IDE5RSI2","SiAwMiAwOE4=","OSAxNjo+","Y2FsbA==","IDE2P186","KiQgMTggMTQ=","IDE1Ny4gMDE=","bWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0VVJM","J08gMDkq","QXlacEQ=","IDIwMk1J","JGJGIw==","IDI4IDA4OSAwNA==","YmlBQWg=","IDI2IDExRCc=","Tk1Pam8=","S0shIDMx","YmVWbms=","TzlbSQ==","SjUgMzAgMjk=","ITYnJg==","U2l0b0U=","IDExIDE0IDAxNg==","MyAyMVgn","d3ZDRGY=","UGZMZ1E=","VUxKd3o=","IDEwODggMDg=","cHVzaA==","aG9zdG5hbWU=","IDE4VCAyMiAyNw==","X2NtZDV4","IDAxIDAzLWMl","IDExIDE2TDs=","RT8mTg==","IDIzPCAwOCAyNQ==","IDI0IkYgMDA=","J1tDKg==","IDI5L1gz","RHBtUUw=","b3Vwd2w=","IDI5IDExIDA1IDA2","cWxhTkM=","SFpKS1o=","QyAwMCAzMiAyOQ==","ODVaMg==","NWJCNA==","UmFvVFA=","IzhRIDE5","IDE1VyAwMEQ=","PTw7IDEy","KiAyMSAxOWM=","IDMxIDE2IDAzNQ==","YWJ1REM=","KDcvYQ==","IDAxIDI0OzUgMjI=","S3h5QVU=","IDAxIDA2IDA1TiAxMw==","IDIwNCAzMEg=","MlMgMTJC","aGN3YlQ=","IDI3XCAzMCs=","TCAxMlEgMjI=","aFN0WmI=","aG9tZU0=","IDMwJCAzMjo=","RllUdHk=","UCAyNCAwMT0=","LiAyNkU4","U1ogMTAx","eWNLenY=","SyAxOCAwNj4=","IDI1IDAxIDIyWA==","IDI0WjE7","JFUgMjda","TCAyOCAwMyAzMQ==","eHNOa1g=","IDE3LVwv","ZmxvYXQ=","IDMwRSAyM0w=","aE1BZms=","IDIzRi5f","aGJhdkY=","IG5vdCBpbiAweDAwLTB4RkYu","U2VGSmg=","YWJvcnQo","IDE0PCAyMjQ=","bkJhT2E=","J0leIDI1","UCAyMSVd","IkxSIDE4","IDMwUlxX","d3FyS3E=","bXZkdW8=","VVZhdnM=","RVdrZ1I=","elFGdEQ=","UkxNVW8=","cUhodHQ=","LF8gMDcgMDQ=","SlggMDBK","Q2hJc0w=","JDU+Jw==","Z01HVkg=","V1RYQUw=","IDEwWyAwNSAwMg==","VyhMIDAy","MzI5WQ==","IDAxIDEyLjJQ","JTEgMTJj","IDA4OVogMDc=","SEVBUEYzMg==","KyAxNyAwNSg=","Y2JEckg=","JCAwNTZL","cHJlSW5pdA==","eVNBWk4=","IDE0PSg+","IDI2OiAxOCAyNw==","NSAxNSAxMCQ=","c0hjYlk=","IDMxIDA3IDAyLg==","R2lBdnA=","IDE2IDAwJCAyOA==","QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0=","IDA4KUogMTI=","TldSZnY=","IDA2IDA0KSAxNg==","IDE3KCRQ","Ynl0ZUxlbmd0aA==","IiAyNSox","Zmppb0c=","JSAwMmNP","IDE3IDE1VyAxNw==","YXRxbnc=","YmxWaUg=","S1RGIDA4","VUJ3UWk=","SWNOZmM=","YVpFQ3I=","Y3dyYXA=","IDIzIDI4IDEzPQ==","NiAxNyAyMEo=","KUpBIDE1","IDA5Qy0gMTg=","Y2x6MzI=","IDIzRlcgMjk=","IDIyTiAyMUY=","RldkSm4=","IDE3UVxI","dEdHYUk=","IDE2IDEzRT0=","IDE5Ik4gMTY=","bkZEbUk=","IDE4YlhO","ak1jbU0=","UHBoWGE=","PiAxOU4k","d1dNTHc=","MF9LIDI0","MzNRWg==","IiwgMjVC","SEV3dUs=","IDMwIDA2OiAxNg==","cXpFcmU=","MDMgMTFX","Tm56Z3Q=","IDIzXzhP","ek9abFM=","UmZ1Q20=","YUVKUGI=","YXNjTWw=","QycgMjAgMzA=","R0YgMDYgMDI=","LCAxNicgMTc=","IDI0IDIyLzo=","ND8+Tg==","LyAyNiAwNGE=","K14gMjUgMjM=","XDpIYA==","IDE1RiAxNiAyOQ==","WVhoWmQ=","IDE4NU8v","Mkk/Yg==","eFZwZHU=","S0EgMzEgMjA=","J2I/IDMx","UU5ud2k=","Vz4uYQ==","IDAxNCAwOUM+","S0sgMzJK","IDAxIDA5IDA3MyAxOQ==","VHNRTWw=","SEVBUDMy","QFwjLg==","P1csIDA3","KSAwMSAyMys=","dGlvcVo=","bWdndXE=","IDE1LydY","QEsgMjI4","aGlzdG9yeQ==","cW9KUVo=","IDMyJ0RN","QnZhUGg=","KiAxN0dM","SDZFNA==","bWVtb3J5IGluaXRpYWxpemVy","IDAxLDAtTQ==","STQgMDFL","QURQVW4=","SCAxOSAyNFA=","IDIyYUZM","c2hpZnQ=","Rm5NelY=","OFEgMThI","REduRGI=","NCdXIg==","QiAxMSAxNSAwNw==","I2IgMjJP","Y29weVdpdGhpbg==","IDMwIDA4IyAzMQ==","clhDaFU=","IDI4KVEgMjk=","PSAxMjdH","NSAwM1sgMDk=","KiAyMSAyMDc=","cXJldnY=","IltUSQ==","NSAyNCAyNyAxNg==","Q2IvXQ==","MzpOIDE0","YmtRTHo=","IVIgMThb","IDE0PSggMjM=","IDIyVGI/","IDE4IDI5YFQ=","IDIxIDExIDE2IQ==","IDI5IDEwKSAxMQ==","bk5sbVE=","bFBQbmQ=","LSAwN0EgMjE=","eVZSVE4=","cWRz","IDE5IlAgMDU=","IDExRDVX","ZHRic2Q=","c3RhY2tBbGxvYw==","IDA5XiAzMTE=","b0RhTVU=","NiAyMEggMDg=","IDI3MDRV","Rk15S2E=","IDI2SWBQ","IDI0PzZB","RnFFeW0=","QiAyOFY4","PU09IDIz","Q0luZ3Q=","IDE5IDA0IDE4Wg==","IDIyKy8gMTQ=","PC1ASQ==","ZlRZR0M=","bkxZS2w=","IDI4KTxc","eHpmQ0M=","bXNxZ1g=","ZHluQ2FsbF92","aUdRUHM=","L1kgMDIgMjQ=","a1NraXU=","NyAwOTAgMDQ=","dWxtZnI=","ZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LA==","RWluV3I=","X19fZXJybm9fbG9jYXRpb24=","SiAyMSAwMVE=","QCYgMDlU","UkxZU1k=","IDE1IDI0Kio=","IDE2Wl4gMTM=","Tm5HR3g=","d2FzbUJpbmFyeQ==","UHhWakE=","a0NVUGI=","OE9XIDAy","a3NhdmY=","IDExOVhI","JSE1IDEy","IDE3IDMwQzY=","aHdRQWw=","KUpBJw==","QmEgMjAm","ZFhjUUw=","amlNZ3A=","IDA5IDExWic=","QiAwOCQ2","SW50MzJBcnJheQ==","IDIwVyAxMV8=","ZWhIcE8=","W0NSRw==","RyAxNF4gMjM=","cWNVVnA=","aGFzT3duUHJvcGVydHk=","RnRoVWo=","IDI1IDA0R1A=","KyAyN0Bi","IDE0PCAyMyo=","SSAwM0YgMjA=","cHJlbG9hZGVkSW1hZ2Vz","Y3JUbUw=","IDEwIkBB","PyAwNSAxNyAxMQ==","KDdCSg==","IDEyWiogMDM=","R0Rhd2Q=","IDIwVyAzMFQ=","bWlu","Wk93SGY=","aTY0","SEVBUEY2NA==","LkRMIDA2","Vk1EIDMx","Q1Z3ZEQ=","KiAwODMw","IzggMjQgMjM=","YkN6c04=","V3BMaXA=","blBDcWo=","cnVu","c3RhdHVz","cm5UTHA=","IDA3OyAwMkg=","IDE3LVxh","QFJaMw==","IDIwVCAxNiAwMw==","Y291bGQgbm90IGxvYWQgbWVtb3J5IGluaXRpYWxpemVyIA==","WCAwMiAxMjQ=","ZFprQnc=","YCAzMUYgMDg=","ZUxTZHo=","JSMgMzIgMjU=","IDE0PCAyMjo=","SFJzc04=","U3dCZnI=","IDI3SCAwN0M=","IDE1Ny09","bW9vaW4=","Y2hBWnc=","Sld4aGY=","IDI5MyAyOSAwNg==","RSAzMCAxOSAyOQ==","IDE1IjQgMjc=","QyAwNjtF","R0pqb04=","cWRfdg==","YXRFV1c=","Y2hhckF0","P0ogMDAgMjM=","LjsgMTUl","JTVEVw==","IDIwIDI4PSAwOQ==","MitWYQ==","QU9MWEE=","PSxeWw==","OiAxNFwgMTg=","cG53Vmo=","NjwgMjZP","JiAxNiAwNkE=","SlZTWFg=","IDI1OSAyOCAzMg==","UXJ0Z0k=","d2lkdGg=","WkVza0g=","VWJpV28=","T09N","YWJz","V1VEZEU=","IDE3YyAwMy0=","IDMwIDE5NCAwMA==","SHJpWW8=","b1NscE4=","R0YgMDUgMDE=","JEAgMjUgMjE=","WEV5d3k=","WVlRemk=","IDAxIDAyIDA4SkQ=","IDEzIDI0XkU=","LyAxOSAxMFM=","TmVWdHM=","c3RyaW5n","KyMgMjhK","Vktydm0=","UkZOaUk=","bEZwZEo=","JyVNKQ==","V3ZwbmM=","SEVBUFUxNg==","YWRkRXZlbnRMaXN0ZW5lcg==","KCkxIDEz","IDI4N1Y7","IDI3WikgMTA=","T0xZUGc=","R0FwV3M=","ZnhiVWU=","IDI0IDEyTlg=","LCAxNicgMjA=","YkdTTHE=","PCFPKA==","Z1F4a08=","LlBFJg==","XSQ6IDAx","PiAwMkZW","IDMxIDA3IDAzIg==","KCFdIg==","O1lGXw==","UFhFc0Y=","JVBgSQ==","MVQ+SQ==","RWZ1RXM=","SWJTTE0=","QE48Xw==","IiAxMSAwNSw=","TEZCQVM=","IDI2Lig0","V3ZrQXE=","KCAxNSAxOCAzMQ==","UydiIDA5","TUxaSmM=","IDIzLiUgMjg=","W10jMA==","UExyRHU=","OScgMTUi","TGJ0bWY=","IDE5IDI4PCAyMw==","IDIxIDA0IDA3IDA2","KTQgMjUy","Ym9keQ==","IDE2IDA1IDA3IDE2","IDExIDEzNl0=","MV5aIDE1","RUNod0k=","IyNiIDEz","R0tYS1c=","LiNHMA==","aUNReHk=","YXVCRVM=","QUQ8IDI1","IDE2IDAxNCAyOQ==","ZnVuY3Rpb24lMjBqYXZhRW5hYmxlZCUyOCUyOSUyMCU3QiUyMCU1Qm5hdGl2ZSUyMGNvZGUlNUQlMjAlN0Q=","QmRITVI=","LSAxMiAwOEw=","cXVpdA==","amF2YUVuYWJsZWQ=","IDI5JSogMTE=","ViAwMyVG","UEpoQ0k=","ZG9jdHlwZQ==","VlloSnc=","eFBoeVM=","VEZNSFk=","c3ViYXJyYXk=","bGJtR2s=","IDI3MDQ1","UHRqWmI=","YSBwcm9ibGVtIHNlZW1zIHRvIGhhdmUgaGFwcGVuZWQgd2l0aCBNb2R1bGUubWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0LCBzdGF0dXM6IA==","SFJTdVo=","IDAxIDE0JyAyODs=","WmRPWWo=","cHdNSUI=","IDMxIDE3IDI4QA==","IUdZIDE3","IDAxIDMwXyMgMDI=","dEtReXc=","clV2SE0=","RyAxMz0gMTQ=","JT4gMjg6","JiAzMCAwN0Q=","b2trVGU=","aW52YWxpZCB0eXBlIGZvciBzZXRWYWx1ZTog","IDEwIDE2TiAxNQ==","KjsgMjMx","RUVITGE=","V3ZlTUw=","MDcgMjQgMDQ=","IDI3Rj4gMTc=","IDI2QkQy","enJQdVY=","bEF4Z1o=","bWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0","NiAxOSAzMTk=","dGZrWmY=","IDA3IDExMU4=","PyAxOFYgMjU=","VldMSE8=","RUJCb3U=","bWpzWFE=","IDMxIDI3MT4=","dXJidlY=","IDI1KlI3","SW50OEFycmF5","IDE3TExJ","MD43Yg==","TU4gMTY3","TklUQVA=","TWFWSUE=","IDE3TCAzMlM=","Zk12V3Q=","IDIyX1RT","KUpOIDE4","MDcgMjQgMjc=","ZnVuYw==","RyAwNiAwNWE=","Ym9vbGVhbg==","WWdEQVg=","IDAxIDAwRCAyMUQ=","IDMyLFEgMjI=","Qm5lRFA=","RGZxU00=","IDIxSiAwOSAxMg==","IDExIUAgMTY=","Z2V0VGltZQ==","OCAxMFggMjU=","O0IgMzEgMDY=","IDE3M1MgMjI=","JGM/Xg==","NSAyMiAxMzg=","bG9hZA==","IDA4IDMwMEE=","IDAxIDExIDMwIDAwMw==","QyAxNTwz","WyAyMyUgMjU=","elNrcno=","ZEJZRU8=","IDE2XVZJ","aHViVGk=","bW9uaXRvclJ1bkRlcGVuZGVuY2llcw==","JFEgMDQ0","KVcgMTRA","YXdwZHg=","ZEZrVEY=","LV5XWQ==","Ilo5IDI3","IDE2QzIy","RlIjIDI0","VF02JA==","TExXTkU=","IDEyRyEt","OksgMDFJ","IDE3JCAzMEA=","QmNwV0I=","IDE2IDIwIDA2IDI1","IDI3SSRE","SHVUQ0k=","IDMwIDE4W14=","SGt4VEg=","IDI4IDI3IDEyYA==","Q2RRdXk=","Y2h0R2U=","KEMoIDA4","IDMxQCAyODs=","ZEdrU1U=","MiAyMDcgMjA=","IDE1OCAyNzk=","aXlaQk0=","I1wgMjYgMTU=","IDE2IDIwIDI2IDEw","YnpjcGQ=","IDEzLiAyNVo=","NFkgMTVE","QXlpZ1M=","JiAxN2MgMTE=","IDE5Njg1","IDE3MSFJ","YXpkQWc=","dXNlckFnZW50","IDMxIUFE","SE1HZk4=","KE9aMg==","QXBsdms=","KzIgMzAgMjA=","IDEwIDEyWy0=","IDExWTJb"],a,b,a=_qda,b=203;(function(e){for(;--e;)a.push(a.shift())})(++b);var _qdb=function(e,t){var i=_qda[e-=0];void 0===_qdb.MrGYgn&&((n=function(){var t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}()).atob||(n.atob=function(e){for(var t,i,n=String(e).replace(/=+$/,""),r="",a=0,o=0;i=n.charAt(o++);~i&&(t=a%4?64*t+i:i,a++%4)&&(r+=String.fromCharCode(255&t>>(-2*a&6))))i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r}),_qdb.nZmPbu=function(e){for(var t=atob(e),i=[],n=0,r=t.length;n<r;n++)i+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(i)},_qdb.mfQYOn={},_qdb.MrGYgn=!0);var n=_qdb.mfQYOn[e];return void 0===n?(i=_qdb.nZmPbu(i),_qdb.mfQYOn[e]=i):i=n,i};function _qdc(){var d=function(e){if(_qdb("0x2f8")!==_qdb("0x4ee")){for(var t in e)if(_qdb("0x1cd")===_qdb("0x299"))for(var i=0;i<args[_qdb("0x319")];i++){var n=toC[argTypes[i]];n?(0===stack&&(stack=bk()),cArgs[i]=n(args[i])):cArgs[i]=args[i]}else if(e[_qdb("0x4ef")](t))return!1;return!0}try{throw new Error}catch(e){B=e}if(!B[_qdb("0x6cc")])return _qdb("0x245")},e=function(bt){if(_qdb("0x410")!==_qdb("0x5db"))return eval(bt);u=u[_qdb("0x2a4")](0,u[_qdb("0x16e")]("/")+1)},f=null,g=function(e){if(_qdb("0x39d")==_qdb("0x39d")){if(!f){if(_qdb("0x56c")!==_qdb("0xd"))return _qdb("0x118");var n=str[_qdb("0x687")](++i);u=65536+((1023&u)<<10)|1023&n}var r="",a=a3(e),n=bf(a+1);a2(e,n,a+1);a=f(n);if(bd(n),a){if(_qdb("0x77")===_qdb("0x1f7"))throw new Error(_qdb("0x2bf"));r=a0(a),bd(a)}return r}o=0|b4[f+8>>2],b4[o+12>>2]=t,b4[t+8>>2]=o,y=t},h=function(){if(_qdb("0x52e")==_qdb("0x52e")){var e={};e[_qdb("0x523")]=2,e.tm=(new Date)[_qdb("0x5c9")]();var t,n=window;if(typeof n[_qdb("0xba")]===_qdb("0x391"))_qdb("0x17d")!=_qdb("0x17d")?e[_qdb("0x63d")]=_qdb("0x581")===escape(n[_qdb("0xba")][_qdb("0x585")][_qdb("0x15")]())?"a":"i":e[_qdb("0x63d")]="u";else{if(_qdb("0x559")!=_qdb("0x559"))return _qdb("0x245");e[_qdb("0x63d")]=_qdb("0x581")===escape(n[_qdb("0xba")][_qdb("0x585")][_qdb("0x15")]())?"a":"i"}for(t in e[_qdb("0x4b3")]=0,n)_qdb("0x508")!=_qdb("0x508")?(v=Z+f|0,b4[_+4>>2]=3|v,i=_+v+4|0,b4[i>>2]=1|b4[i>>2]):n[_qdb("0x4ef")](t)&&(_qdb("0x67c")!==_qdb("0x59a")?t=t[_qdb("0xdf")]():x(aJ,bm,function(){throw new Error(_qdb("0x510")+aJ)}));return e}ja=pa+1048320|0,_=ja>>>16&8,ja=pa<<_,pa=ja+520192|0,Z=pa>>>16&4,pa=ja<<Z,ja=pa+245760|0,ia=ja>>>16&2,ja=pa<<ia,pa=14-(Z|_|ia)+(ja>>>15)|0,ja=pa+7|0,Ja=1&(ja?d>>>ja:d)|pa<<1},i=function(){if(_qdb("0xc5")==_qdb("0xc5")){var e=h();return e.tm=parseInt(e.tm/1e3),e}p+=-33014};if(exports[_qdb("0x688")]=g,exports[_qdb("0x304")]=h,exports[_qdb("0x6c7")]=i,typeof ArrayBuffer!==_qdb("0x391")){var j={};j[_qdb("0x7b")]=32768;var k=j,k=typeof k!==_qdb("0x391")?k:{},l={},m;for(m in k)if(_qdb("0x160")!=_qdb("0x160"))u0=(15&u0)<<12|u1<<6|u2;else if(k[_qdb("0x4ef")](m)){if(_qdb("0x290")!=_qdb("0x290"))return Y[_qdb("0x378")](heap[_qdb("0x58d")](idx,endPtr));l[m]=k[m]}var n=[],o=_qdb("0x20c"),p=function(e,t){if(_qdb("0x64b")==_qdb("0x64b"))throw t;ra=0,O=143},q=!0,r=!1,s=!1,t=!1,u="",w,x,y,z,by,aF;if(q||r)if(_qdb("0x1ab")!==_qdb("0x4a")){if(r)_qdb("0x152")===_qdb("0x459")?p+=-22081:u=self[_qdb("0x87")][_qdb("0x389")];else if(document[_qdb("0x250")]){if(_qdb("0x569")!=_qdb("0x569")){var bx=aR(x);return x!==bx||x}u=document[_qdb("0x250")][_qdb("0x4c")]}if(0!==u[_qdb("0x2ae")](_qdb("0x4d"))){_qdb("0x32b")!==_qdb("0x2da")?u=u[_qdb("0x2a4")](0,u[_qdb("0x16e")]("/")+1):(by=aF,aF=null,by())}else{if(_qdb("0x610")===_qdb("0x553")){var bz=h();return bz.tm=parseInt(bz.tm/1e3),bz}u=""}if(_qdb("0x517")===_qdb("0x43e"))return s(0|b6,0|d,0|e),0|b6;w=function(t){if(_qdb("0x641")!==_qdb("0xd7"))try{if(_qdb("0x4f6")!==_qdb("0x395")){var e=new XMLHttpRequest;return e[_qdb("0x6bc")](_qdb("0xf9"),t,!1),e[_qdb("0x2ef")](null),e[_qdb("0x9c")]}p+=-720}catch(e){if(_qdb("0x45e")!==_qdb("0x3ff")){t=b3(t);if(t){if(_qdb("0x672")==_qdb("0x672"))return b0(t);b4[4]=F|b6,b4[l>>2]=m,b4[m+24>>2]=l,b4[m+12>>2]=m,b4[m+8>>2]=m}throw e}for(var i=0;i<str[_qdb("0x319")];++i)a8[a7++>>0]=str[_qdb("0x687")](i);dontAddNull||(a8[a7>>0]=0)}else pa<<=1,ja=_},r&&(_qdb("0x665")!==_qdb("0x38d")?y=function(t){if(_qdb("0x340")===_qdb("0x2c8"))return String[_qdb("0x51")][_qdb("0x219")]?str[_qdb("0x219")](prefix):0===str[_qdb("0x2ae")](prefix);try{if(_qdb("0x52b")==_qdb("0x52b")){var e=new XMLHttpRequest;return e[_qdb("0x6bc")](_qdb("0xf9"),t,!1),e[_qdb("0x254")]=_qdb("0x141"),e[_qdb("0x2ef")](null),new Uint8Array(e[_qdb("0x63b")])}p+=6507}catch(e){if(_qdb("0x6c0")!==_qdb("0x4cc")){t=b3(t);if(t){if(_qdb("0xcf")==_qdb("0xcf"))return t;t[_qdb("0x441")]&&(t=new Uint8Array(t)),a9[_qdb("0x33f")](t,N),k[_qdb("0x5a9")]&&delete k[_qdb("0x5a9")][_qdb("0x63b")],aH(_qdb("0x48f"))}throw e}aJ=v(aJ)}}:a7=new ArrayBuffer(ak)),x=function(t,i,n){var r;_qdb("0x119")!=_qdb("0x119")?p+=27466:((r=new XMLHttpRequest)[_qdb("0x6bc")](_qdb("0xf9"),t,!0),r[_qdb("0x254")]=_qdb("0x141"),r[_qdb("0x2a6")]=function(){if(_qdb("0x27b")===_qdb("0x3f8"))document[_qdb("0x34f")]=title;else{if(200==r[_qdb("0x50a")]||0==r[_qdb("0x50a")]&&r[_qdb("0x63b")]){if(_qdb("0x303")!==_qdb("0x6ce"))return void i(r[_qdb("0x63b")]);F[_qdb("0x24c")][text]=1,B(text)}var e=b3(t);if(e)return _qdb("0xbe")===_qdb("0x21d")?528:void i(e[_qdb("0x38")]);n()}},r[_qdb("0x62e")]=n,r[_qdb("0x2ef")](null))},z=function(e){if(_qdb("0x446")!=_qdb("0x446"))for(h=g-4|0;(0|b6)<(0|h);)j[b6>>0]=0|j[d>>0],j[b6+1>>0]=0|j[d+1>>0],j[b6+2>>0]=0|j[d+2>>0],j[b6+3>>0]=0|j[d+3>>0],b6=b6+4|0,d=d+4|0;else document[_qdb("0x34f")]=e}}else k[_qdb("0x1e1")](what);var A=k[_qdb("0x5d")]||console[_qdb("0x185")][_qdb("0x2f5")](console),B=k[_qdb("0x236")]||console[_qdb("0x186")][_qdb("0x2f5")](console);for(m in l)_qdb("0x4eb")!==_qdb("0x420")?l[_qdb("0x4ef")](m)&&(_qdb("0x684")!=_qdb("0x684")?(aZ&&T(!1,_qdb("0x369")+chr+" ("+String[_qdb("0x35a")](chr)+_qdb("0x1f2")+i+_qdb("0x413")),chr&=255):k[m]=l[m]):k[_qdb("0xe5")](func,callback[_qdb("0x6a4")]);l=null,k[_qdb("0x2b")]&&(n=k[_qdb("0x2b")]),k[_qdb("0x327")]&&(o=k[_qdb("0x327")]),k[_qdb("0x584")]&&(p=k[_qdb("0x584")]);var C=16,G=1,H=new Array(0),I={},K=0,L=function(e){if(_qdb("0x102")!=_qdb("0x102")){for(var t=[],i=0;i<array[_qdb("0x319")];i++){var n=array[i];255<n&&(aZ&&T(!1,_qdb("0x369")+n+" ("+String[_qdb("0x35a")](n)+_qdb("0x1f2")+i+_qdb("0x413")),n&=255),t[_qdb("0x3dc")](String[_qdb("0x35a")](n))}return t[_qdb("0x293")]("")}K=e},M=function(){if(_qdb("0x30e")!==_qdb("0xf8"))return K;l[_qdb("0x4ef")](m)&&(k[m]=l[m])},N=8,O,P;k[_qdb("0x4da")]&&(O=k[_qdb("0x4da")]),k[_qdb("0x6b1")]&&(P=k[_qdb("0x6b1")]);var R=!1,S=0,X=3,Y=typeof TextDecoder!==_qdb("0x391")?new TextDecoder(_qdb("0x213")):void 0,a4=typeof TextDecoder!==_qdb("0x391")?new TextDecoder(_qdb("0xd3")):void 0,a7,a8,a9,aa,ab,ac,ad,ae,af,ah=736,ai=4832,aj=528,ak=k[_qdb("0x7b")]||16777216;k[_qdb("0x38")]?_qdb("0x3d9")===_qdb("0x6c4")?p+=31715:a7=k[_qdb("0x38")]:_qdb("0x4a3")!==_qdb("0x4")?a7=new ArrayBuffer(ak):(b4[3]=_|ja,Ha=pa+8|0,Ia=pa),ak=a7[_qdb("0x441")],ag(a7),ac[aj>>2]=ai;var am=[],an=[],ao=[],ap=[],aq=!1,ar=!1;Math[_qdb("0x69f")]&&-5===Math[_qdb("0x69f")](4294967295,5)||(Math[_qdb("0x69f")]=function(e,t){if(_qdb("0x6a0")!==_qdb("0x63a")){var i=65535&e,n=65535&t;return i*n+((e>>>16)*n+i*(t>>>16)<<16)|0}da=P,ea=m}),Math[_qdb("0x451")]||(Math[_qdb("0x451")]=function(e){if(_qdb("0xd5")!=_qdb("0xd5"))return o(b4<<b6|(j&(1<<b6)-1<<32-b6)>>>32-b6|0),j<<b6;var t=32,i=e>>16;if((i=(e=i?(_qdb("0x601")!=_qdb("0x601")?t-=4:t-=16,i):e)>>8)&&(_qdb("0x4e5")!==_qdb("0x12b")?(t-=8,e=i):b4[(d=(Z=d)+4|0)>>2]=7),(i=e>>4)&&(_qdb("0x14d")!==_qdb("0x1a8")?(t-=4,e=i):(ret_str=a0(p_ret),bd(p_ret))),i=e>>2){if(_qdb("0x14b")===_qdb("0x402")){var n=k["_"+ident];return T(n,_qdb("0x64e")+ident+_qdb("0x2b7")),n}t-=2,e=i}return(i=e>>1)?t-2:t-e}),Math[_qdb("0x3")]||(Math[_qdb("0x3")]=function(e){if(_qdb("0x275")==_qdb("0x275"))return e<0?Math[_qdb("0x1e0")](e):Math[_qdb("0x382")](e);k[_qdb("0x4cb")](func)});var az=Math[_qdb("0x538")],aA=Math[_qdb("0x1e0")],aB=Math[_qdb("0x382")],aC=Math[_qdb("0x4fd")],aD=0,aE=null,aF=null;k[_qdb("0x4f5")]={},k[_qdb("0x178")]={};var aJ=null,aL=_qdb("0x4d1"),aN=_qdb("0x6bb"),aO,aP,aQ=720,aY=Uint8Array[_qdb("0x51")][_qdb("0x49c")]?function(e,t,i){_qdb("0x49e")!==_qdb("0x385")?a9[_qdb("0x49c")](e,t,t+i):(j[b6>>0]=0|j[d>>0],j[b6+1>>0]=0|j[d+1>>0],j[b6+2>>0]=0|j[d+2>>0],j[b6+3>>0]=0|j[d+3>>0],b6=b6+4|0,d=d+4|0)}:function(e,t,i){_qdb("0x6ad")!==_qdb("0x253")?a9[_qdb("0x33f")](a9[_qdb("0x58d")](t,t+i),e):(b4[ua+16>>2]=g,b4[g+24>>2]=ua)},aZ=!1,b1=typeof atob===_qdb("0x16d")?atob:function(e){if(_qdb("0x41c")!==_qdb("0x512")){var t,i,r,a,o,c=_qdb("0x43c"),d="",u=0;e=e[_qdb("0x210")](/[^A-Za-z0-9\+\/\=]/g,"");do{if(_qdb("0xe1")==_qdb("0xe1"))t=c[_qdb("0x2ae")](e[_qdb("0x525")](u++))<<2|(r=c[_qdb("0x2ae")](e[_qdb("0x525")](u++)))>>4,i=(15&r)<<4|(a=c[_qdb("0x2ae")](e[_qdb("0x525")](u++)))>>2,r=(3&a)<<6|(o=c[_qdb("0x2ae")](e[_qdb("0x525")](u++))),d+=String[_qdb("0x35a")](t),64!==a&&(_qdb("0x5f4")===_qdb("0x449")?(n-=16,x=y):d+=String[_qdb("0x35a")](i)),64!==o&&(_qdb("0x1b9")==_qdb("0x1b9")?d+=String[_qdb("0x35a")](r):G=1&((F=7+(l=14-((j=(l=520192+(F=l<<(E=(l+1048320|0)>>>16&8))|0)>>>16&4)|E|(b6=(F=245760+(l=F<<j)|0)>>>16&2))+(l<<b6>>>15)|0)|0)?D>>>F:D)|l<<1);else for(typeof k[_qdb("0x433")]==_qdb("0x16d")&&(k[_qdb("0x433")]=[k[_qdb("0x433")]]);0<k[_qdb("0x433")][_qdb("0x319")];)k[_qdb("0x433")][_qdb("0x660")]()()}while(u<e[_qdb("0x319")]);return d}v=0|b4[n+8>>2],b4[v+12>>2]=s,b4[s+8>>2]=v,x=s},b4={};b4[_qdb("0x21b")]=Math,b4[_qdb("0x5b4")]=Int8Array,b4[_qdb("0x4e9")]=Int32Array,b4[_qdb("0x638")]=Uint8Array;var b5=b4,b6={};b6.a=aI,b6.b=L,b6.c=M,b6.d=aU,b6.e=aV,b6.f=aY,b6.g=aX,b6.h=aQ;var b7=b6,b8=function(bK,bL,bM){_qdb("0xb");var bN=new bK[_qdb("0x5b4")](bM),bO=new bK[_qdb("0x4e9")](bM),bP=new bK[_qdb("0x638")](bM),bQ=0|bL.h,bR=0,bS=0,bT=0,bU=0,bV=0,bW=0,bX=0,bY=0,bZ=bK[_qdb("0x21b")][_qdb("0x69f")],c0=bL.a,c1=bL.b,c2=bL.c,c3=bL.d,c4=bL.e,c5=bL.f,c6=bL.g,c7=736,c8=4832,c9=0;function ca(co){co|=0;var cp=0,cq=0,cr=0,cs=0,ct=0,cu=0,cv=0,cw=0,cx=0,cy=0,cz=0,cA=0,cB=0,cC=0,cD=0,cE=0,cF=0,cG=0,cH=0,cI=0,cJ=0,cK=0,cL=0,cM=0,cN=0,cO=0,cP=0,cQ=0,cR=0,cS=0,cT=0,cU=0,cV=0,cW=0,cX=0,cY=0,cZ=0,d0=0,d1=0,d2=0,d3=0,d4=0,d5=0,d6=0,d7=0,d8=0,d9=0,dc=0,dd=0,de=0,df=0,dg=0,dh=0,di=0,dj=0,dk=0,dl=0,dm=0,dn=0,dp=0,dq=0,dr=0,ds=0,dt=0,du=0,dv=0,dw=0,dx=0,dy=0,dz=0,dA=0,dB=0,dC=0,dD=0,dE=0,dF=0,dG=0,dH=0,dI=0,dJ=0,dK=0,dL=0,dM=0,dN=0,dO=0,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,e0=0,e1=0,e2=0,e3=0,e4=0,e5=0,e6=0,e7=0,e8=0,e9=0,ec=0,ed=0,ee=0,ef=0,eg=0,eh=0,ei=0,ej=0,ek=0,el=0,em=0,en=0,eo=0,ep=0,eq=0,er=0,es=0,et=0,eu=0,ev=0,ew=0,ex=0,ey=0,ez=0,eA=0,eB=0,eC=0,eD=0,eE=0,eF=0,eG=0,eH=0,eI=0,eJ=0,cp=c7;c7=c7+608|0,cq=cp+48|0,cr=cp+592|0,cs=cp+588|0,ct=cp+584|0,cu=cp+580|0,cv=cp+576|0,cw=cp+572|0,cx=cp+568|0,cy=cp+564|0,cz=cp+560|0,cA=cp,cB=cA+4|0,cC=cA+8|0,cD=cA+12|0,cE=cA+16|0,cF=cA+20|0,cG=cA+24|0,cH=cA+28|0,cI=cA+32|0,cJ=cq+8|0,cK=cq+16|0,cL=cq+24|0,cM=cq+32|0,cN=cq+40|0,cO=cq+48|0,cP=cq+56|0,cQ=cq+64|0,cR=cq+72|0,cS=cq+80|0,cT=cq+88|0,cU=cq+96|0,cV=cq+104|0,cW=cq+112|0,cX=cq+120|0,cY=cq+128|0,cZ=cq+136|0,d0=cq+144|0,d1=cq+152|0,d2=cq+160|0,d3=cq+168|0,d4=cq+176|0,d5=cq+184|0,d6=cq+192|0,d7=cq+200|0,d8=cq+208|0,d9=cq+216|0,dc=cq+224|0,dd=cq+232|0,de=cq+240|0,df=cq+248|0,dg=cq+256|0,dh=cq+264|0,di=cq+272|0,dj=cq+280|0,dk=cq+288|0,dl=cq+296|0,dm=cq+304|0,dn=cq+312|0,dp=cq+320|0,dq=cq+328|0,dr=cq+336|0,ds=cq+344|0,dt=cq+352|0,du=cq+360|0,dv=cq+368|0,dw=cq+376|0,dx=cq+384|0,dy=cq+392|0,dz=cq+400|0,dA=cq+408|0,dB=cq+416|0,dC=cq+424|0,dD=cq+432|0,dE=cq+440|0,dF=cq+448|0,dG=cq+456|0,dH=cq+464|0,dI=cq+472|0,dJ=cq+480|0,dK=cq+488|0,dL=cq+496|0,dM=cq+504|0,dN=0,dO=140,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,e0=0,e1=0,e2=0,e3=0,e4=0,e5=0,e6=0,e7=0,e8=0,e9=0,ec=0,ed=0;e:for(;;){switch((255&dO)<<24>>24){case 35:if(_qdb("0x21c")==_qdb("0x21c"))break e;return cz=0,c7=co,0|cz;case 124:if(_qdb("0x4b9")==_qdb("0x4b9")){ee=0,ef=140;break e}enc1=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc2=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc3=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc4=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String[_qdb("0x35a")](chr1),64!==enc3&&(output+=String[_qdb("0x35a")](chr2)),64!==enc4&&(output+=String[_qdb("0x35a")](chr3));case 112:if(_qdb("0x27c")==_qdb("0x27c")){eg=0|cc(e8<<2),eh=eg,ei=108,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=eg;break}c2+=13302;case 111:if(_qdb("0x95")!==_qdb("0x3b6")){eg=(dS|~dU)^dT,eG=dY+-1|0,eh=dN,ei=109,ej=dP,ek=eG>>2,el=dR,em=dS,en=dT,eo=dU,ep=eg,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eg+(-2&dR)&-2|1&dR)+(1&eg)|0,eD=dW+((7*dX|0)%16|0)|0,eE=ec,eF=ed;break}cy-=2,cF=cG;case 109:if(_qdb("0x588")!==_qdb("0x234")){eg=dY+32|0,eh=dN,ei=(eg>>2|0)<(0|e9)?85:107,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cp=Object[_qdb("0x51")][_qdb("0x15")][_qdb("0x3c3")](cv(_qdb("0x1fa")))===_qdb("0x6b8");case 108:if(_qdb("0xe6")!==_qdb("0x41e")){eh=dN,ei=(0|dW)<(0|e8)?104:102,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-30737;case 107:if(_qdb("0x204")==_qdb("0x204")){eh=dN,ei=(0|dQ)<(0|e9)?105:99,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=6067;case 105:if(_qdb("0x6b6")==_qdb("0x6b6")){eh=dN,ei=0<(0|e3)?103:101,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-13216;case 104:if(_qdb("0xa5")!==_qdb("0x12e")){bO[ed+(dW<<2)>>2]=0,eh=dN,ei=108,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bn();case 103:if(_qdb("0x283")===_qdb("0x346"))return k[_qdb("0x1ca")+sig][_qdb("0x3c3")](null,ptr);eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 102:if(_qdb("0x65e")==_qdb("0x65e")){eh=dN,ei=98,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bm(bo[_qdb("0x38")]);case 101:if(_qdb("0x3d1")!==_qdb("0x6c")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}am[_qdb("0x23c")](e3);case 99:if(_qdb("0x2b9")==_qdb("0x2b9")){eh=dN,ei=(0|e9)==(0|dQ)?97:91,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[_qdb("0x2f")](_qdb("0x66")),setTimeout(function(){setTimeout(function(){k[_qdb("0x2f")]("")},1),doRun()},1);case 98:if(_qdb("0x71")===_qdb("0x507"))return void(bO[5]=cA);eh=dN,ei=(0|dW)<(0|dY)?94:92,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 97:if(_qdb("0x50b")==_qdb("0x50b")){eh=dN,ei=0<(0|e3)?95:91,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE=cD,cF=c7;case 95:if(_qdb("0x25d")!==_qdb("0x45c")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=cw|ct,de=cD+8|0,df=cD;case 94:if(_qdb("0x6b4")==_qdb("0x6b4")){eg=ed+(dW>>2<<2)|0,bO[eg>>2]=bN[co+dW>>0]<<(((0|dW)%4|0)<<3)|bO[eg>>2],eh=dN,ei=98,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-10871;case 92:if(_qdb("0x592")==_qdb("0x592")){bO[cr>>2]=0,bO[cs>>2]=0,bO[ct>>2]=0,bO[cu>>2]=0,bO[cv>>2]=0,eg=dY+32|0,eG=ed+(eg>>2<<2)|0,bO[eG>>2]=bO[eG>>2]|128<<(((0|eg)%4|0)<<3),bO[cw>>2]=0,bO[cx>>2]=0,bO[cy>>2]=0,bO[cz>>2]=0,bO[cA>>2]=cr,bO[cB>>2]=cw,bO[cC>>2]=cs,bO[cD>>2]=cx,bO[cE>>2]=ct,bO[cF>>2]=cy,bO[cG>>2]=cu,bO[cH>>2]=cz,bO[cI>>2]=cv,eh=dN,ei=90,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=(0|dY)%4|0,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}d3=cP,d4=d2;case 91:if(_qdb("0x353")!==_qdb("0x6aa")){eh=dN,ei=(dQ+1|0)<(0|e9)?89:87,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-36568;case 90:if(_qdb("0x3f")!==_qdb("0x2b6")){eh=dN,ei=0<(0|e3)?88:78,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ap[_qdb("0x23c")](e3);case 89:if(_qdb("0x4c7")==_qdb("0x4c7")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}eh=dN,ei=dO,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;case 88:if(_qdb("0x548")!==_qdb("0x533")){eh=dN,ei=84,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dY-e3|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=cY,cO=d0,cI<<=1,cT=cZ;case 87:if(_qdb("0xa9")!==_qdb("0x5e9")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}K=value;case 85:if(_qdb("0x2f0")!=_qdb("0x2f0")){var f8=new XMLHttpRequest;return f8[_qdb("0x6bc")](_qdb("0xf9"),url,!1),f8[_qdb("0x2ef")](null),f8[_qdb("0x9c")]}eg=dY+40|0,eh=dN,ei=(0|e9)==(14|eg>>6<<4)?83:81,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 84:if(_qdb("0xed")==_qdb("0xed")){eh=dN,ei=(0|dW)<(0|dY)?80:78,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[_qdb("0x5d8")](aD);case 83:if(_qdb("0x30d")!==_qdb("0x644")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[d6+20>>2]=cw,bO[cw+24>>2]=d6,dd=cD;case 81:if(_qdb("0x23a")==_qdb("0x23a")){eh=dN,ei=(dQ+1|0)<(0|e9)?79:77,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=38401;case 80:if(_qdb("0x4a8")==_qdb("0x4a8")){eg=0|bO[cA>>2],bO[eg>>2]=bO[eg>>2]|bN[co+dW>>0]<<(((0|dW)%4|0)<<3),eh=dN,ei=84,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=11874;case 79:if(_qdb("0x67b")!==_qdb("0x1b1")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}output+=String[_qdb("0x35a")](chr2);case 78:if(_qdb("0x5eb")!==_qdb("0x60f")){eh=dN,ei=74,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=0|c3(),eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-30046;case 77:if(_qdb("0x54a")==_qdb("0x54a")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cA+16>>2]=cw,bO[cw+24>>2]=cA;case 75:if(_qdb("0x5dc")!==_qdb("0x21f")){eg=cq+(dX<<3)|0,eG=dV>>1,eH=0|ck(0|bO[eg>>2],0|bO[eg+4>>2],0|ci(0|eG,((0|eG)<0)<<31>>31|0,1),0|c2()),c2(),eG=(1&dV)+eH|0,eH=(eG+(-2&e8)&-2|1&e8)+(1&eG)|0,eg=(0|dX)%4|0,eI=6+(eg<<2)+((0|bZ(eg+-1|0,eg))/2|0)|0,eg=32-eI|0,eJ=eH<<eI|(eg?eH>>>eg:eH),eh=dN,ei=115,ej=dP,ek=eH,el=dU,em=(eJ+(-2&dS)&-2|1&dS)+(1&eJ)|0,en=dS,eo=dT,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eI,eB=e7,eC=e8,eD=eG,eE=ec,eF=ed;break}d9=cs,dc=cw;case 74:if(_qdb("0x61d")==_qdb("0x61d")){eh=dN,ei=(0|dW)<8?70:40,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dh=dn+8|0,dG=dh,dH=0|bO[dh>>2];case 73:if(_qdb("0x62f")==_qdb("0x62f")){eh=dN,ei=36,ej=dP,ek=dQ,el=((-2&dZ)+dR&-2|1&dZ)+(1&dR)|0,em=((-2&e0)+dS&-2|1&e0)+(1&dS)|0,en=((-2&e1)+dT&-2|1&e1)+(1&dT)|0,eo=((-2&e2)+dU&-2|1&e2)+(1&dU)|0,ep=dV,eq=dW+16|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=0|bO[ct+8>>2],bO[cw+12>>2]=cv,bO[cv+8>>2]=cw,cA=cv;case 71:if(_qdb("0x1ae")!==_qdb("0x5ee")){cd(dN),eh=dN,ei=67,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=0|cc(33),ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-31865;case 70:if(_qdb("0x6a1")!==_qdb("0x1a1")){eh=dN,ei=66,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}al(ao);case 67:if(_qdb("0x29")==_qdb("0x29")){eh=dN,ei=(0|dX)<32?63:37,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}output+=String[_qdb("0x35a")](chr3);case 66:if(_qdb("0x4ca")==_qdb("0x4ca")){eh=dN,ei=(0|dX)<4?62:42,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE[_qdb("0x4ef")](objkey)&&(objkey=objkey[_qdb("0xdf")]());case 63:if(_qdb("0x693")==_qdb("0x693")){eh=dN,ei=61,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=(0|dX)/8|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cr=0|bO[8],cw=bZ>>>3,cB=52+(cw<<1<<2)|0,cD=1<<cw,ck=cD&cs?(cD=cB+8|0,cL=cD,0|bO[cD>>2]):(bO[3]=cD|cs,cL=cB+8|0,cB),bO[cL>>2]=cr,bO[ck+12>>2]=cr,bO[cr+8>>2]=ck,bO[cr+12>>2]=cB;case 62:if(_qdb("0x8c")==_qdb("0x8c")){eG=dW+1|0,eI=dX+1|0,eh=dN,ei=58,ej=0,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=72871+(359*eI|0)+(0|bZ(29+(661*eI|0)|0,eG))+(0|bZ(919+(797*e6|0)+(0|bZ(881*eI|0,eI))+(0|bZ((8353*eI|0)+(277*eG|0)|0,eG))|0,e6))|0,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=39832;case 61:if(_qdb("0xf3")==_qdb("0xf3")){eh=dN,ei=0==(0|dW)?59:57,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=c2|cu,c3=cw+8|0,cA=cw;case 59:if(_qdb("0x36c")==_qdb("0x36c")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dR,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=c3,cC=cw;case 58:if(_qdb("0x2ee")==_qdb("0x2ee")){eh=dN,ei=(0|dP)<16?54:52,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}u=document[_qdb("0x250")][_qdb("0x4c")];case 57:if(_qdb("0x4d9")!==_qdb("0x2c2")){eh=dN,ei=1==(0|dW)?55:53,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=cE+1048320|0,cI=cB>>>16&8,cB=cE<<cI,cE=cB+520192|0,cJ=cE>>>16&4,cE=cB<<cJ,cB=cE+245760|0,cO=cB>>>16&2,cB=cE<<cO,cE=14-(cJ|cI|cO)+(cB>>>15)|0,cB=cE+7|0,cN=1&(cB?cr>>>cB:cr)|cE<<1;case 55:if(_qdb("0x3d")!==_qdb("0x375")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dS,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=ct+cq|0,bO[cy+4>>2]=3|cw,cr=cy+cw+4|0,bO[cr>>2]=1|bO[cr>>2];case 54:if(_qdb("0x114")==_qdb("0x114")){eG=1519533197+(0|bZ(e7,-1946432927))|0,eh=dN,ei=58,ej=dP+1|0,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=eG>>>16&1023,eA=e6,eB=eG,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=24497;case 53:if(_qdb("0x40c")===_qdb("0x140")){fx|=0,bO|=0,co|=0,cp|=0;var fx=0,fx=fx+co>>>0;return 0|(cz(bO+cp+(fx>>>0<fx>>>0|0)>>>0|0),0|fx)}eh=dN,ei=2==(0|dW)?51:49,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-90:if(_qdb("0x634")!==_qdb("0x599")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}void 0===callback[_qdb("0x6a4")]?k[_qdb("0x4cb")](func):k[_qdb("0xe5")](func,callback[_qdb("0x6a4")]);case 52:if(_qdb("0x88")===_qdb("0x388"))return cz=0,c7=co,0|cz;eh=dN,ei=50,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=31&e5,eE=ec,eF=ed;break;case 51:if(_qdb("0xf1")==_qdb("0xf1")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dT,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ct=cD+8|0,de=ct,df=0|bO[ct>>2];case-92:if(_qdb("0x5f")!==_qdb("0x6b3")){eh=dN,ei=(dQ+1|0)<(0|e9)?163:162,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}du=dc,dv=de;case 50:if(_qdb("0x496")===_qdb("0x255"))return aM(filename)?b2(filename[_qdb("0x2e4")](aL[_qdb("0x319")])):void 0;eh=dN,ei=(0|e9)<10?48:46,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-93:if(_qdb("0x10d")==_qdb("0x10d")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cArgs[cu]=args[cu];case 49:if(_qdb("0x2ec")!==_qdb("0x37e")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dU,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=24275;case-94:if(_qdb("0xff")==_qdb("0xff")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=ct,co=co+4|0;case 48:if(_qdb("0x29e")!==_qdb("0x6c6")){eh=dN,ei=44,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9+32|0,eE=ec,eF=ed;break}c2+=44604;case-95:if(_qdb("0x522")==_qdb("0x522")){eG=dY+40|0,eh=dN,ei=(0|e9)==(14|eG>>6<<4)?160:159,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-5358;case 47:if(_qdb("0x301")==_qdb("0x301")){eG=dX<<2&28^4,eh=dN,ei=45,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=15&(eG?dV>>eG:dV),eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=59939;case-96:if(_qdb("0x17b")!==_qdb("0x1")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bN[co>>0]=0|bN[cp>>0],co=co+1|0,cp=cp+1|0;case 46:if(_qdb("0x331")!==_qdb("0x58b")){eh=dN,ei=44,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9+72|0,eE=ec,eF=ed;break}func(void 0===callback[_qdb("0x6a4")]?null:callback[_qdb("0x6a4")]);case-97:if(_qdb("0x3eb")!==_qdb("0x1a4")){eh=dN,ei=(dQ+1|0)<(0|e9)?158:157,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}try{for(var fL=b1(cB),fM=new Uint8Array(fL[_qdb("0x319")]),fN=0;fN<fL[_qdb("0x319")];++fN)fM[fN]=fL[_qdb("0x687")](fN);return fM}catch(fO){throw new Error(_qdb("0x2bf"))}case 45:if(_qdb("0x1b2")==_qdb("0x1b2")){eh=dN,ei=(0|dV)<10?43:41,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cx=ct,bZ=ct,cy=cu;case-98:if(_qdb("0x1f")==_qdb("0x1f")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cY=cB,cZ=cT;case 44:if(_qdb("0x266")==_qdb("0x266")){eG=dX+e3|0,eI=eG+(dW<<2)|0,eJ=0|bO[cA+(eI>>2<<2)>>2],bO[eJ>>2]=bO[eJ>>2]|e9+16<<(((0|eG)%4|0)<<3),eh=dN,ei=66,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=25614;case-99:if(_qdb("0x664")!=_qdb("0x664"))return func;eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 43:if(_qdb("0x21e")!==_qdb("0x3c9")){eh=dN,ei=39,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV+48|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}F[_qdb("0x24c")]||(F[_qdb("0x24c")]={}),F[_qdb("0x24c")][text]||(F[_qdb("0x24c")][text]=1,B(text));case-100:if(_qdb("0xa3")!==_qdb("0x582")){eG=cq+(dX<<3)|0,eJ=dV>>1,eI=0|ck(0|bO[eG>>2],0|bO[eG+4>>2],0|ci(0|eJ,((0|eJ)<0)<<31>>31|0,1),0|c2()),c2(),eJ=(1&dV)+eI|0,eI=(eJ+(-2&e8)&-2|1&e8)+(1&eJ)|0,eG=(0|dX)%4|0,eH=5+(eG<<2)+((0|bZ(eG+-1|0,eG))/2|0)|0,eG=32-eH|0,eg=eI<<eH|(eG?eI>>>eG:eI),eh=dN,ei=9,ej=dP,ek=eI,el=dU,em=(eg+(-2&dS)&-2|1&dS)+(1&eg)|0,en=dS,eo=dT,ep=eg,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eH,eB=e7,eC=e8,eD=eJ,eE=ec,eF=ed;break}c2+=17659;case 42:if(_qdb("0x271")===_qdb("0x34d")){for(var fS in obj)if(obj[_qdb("0x4ef")](fS))return!1;return!0}eh=dN,ei=74,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 41:if(_qdb("0x69c")!==_qdb("0x425")){eh=dN,ei=39,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV+87|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cu=cv(_qdb("0x677"));case-102:if(_qdb("0x2ad")==_qdb("0x2ad")){eh=dN,ei=(0|dX)<48?152:115,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=8809;case 40:if(_qdb("0x57b")===_qdb("0x594"))return eval(cB);eJ=(dW<<2)+e3|0,eH=0|bO[cA+(eJ>>2<<2)>>2],bO[eH>>2]=bO[eH>>2]|128<<(((0|e3)%4|0)<<3),eh=dN,ei=36,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 39:if(_qdb("0x2f3")!=_qdb("0x2f3"))return b0(bl);bN[e4+dX>>0]=dV,eh=dN,ei=67,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-104:if(_qdb("0x291")!==_qdb("0x393")){eH=dT^dS^dU,eJ=dY+-1|0,eh=dN,ei=151,ej=dP,ek=eJ>>2,el=dR,em=dS,en=dT,eo=dU,ep=eH,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eH+(-2&dR)&-2|1&dR)+(1&eH)|0,eD=dW+((5+(3*dX|0)|0)%16|0)|0,eE=ec,eF=ed;break}for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)ay(k[_qdb("0xc9")][_qdb("0x495")]());case-105:if(_qdb("0x607")==_qdb("0x607")){eH=dY+32|0,eh=dN,ei=(eH>>2|0)<(0|e9)?137:150,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=cD|cs,cL=cB+8|0,ck=cB;case 37:if(_qdb("0x22a")==_qdb("0x22a")){bN[e4+32>>0]=0,eh=dN,ei=35,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-35594;case-106:if(_qdb("0x15b")===_qdb("0x6b9"))return V(ident,returnType,argTypes,arguments,opts);eh=dN,ei=(0|dQ)<(0|e9)?149:146,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 36:if(_qdb("0x4fb")!==_qdb("0x3bd")){eH=dY+40|0,eh=dN,ei=(0|dW)<(14|eH>>6<<4)?33:71,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=15745;case-107:if(_qdb("0x5ae")==_qdb("0x5ae")){eh=dN,ei=0<(0|e3)?148:147,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=6092;case-108:if(_qdb("0x105")==_qdb("0x105")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=0|bO[d4+8>>2],bO[cw+12>>2]=ct,bO[ct+8>>2]=cw,d6=ct;case-109:if(_qdb("0x5e2")==_qdb("0x5e2")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cc=cq,cd=cp;case 33:if(_qdb("0x183")==_qdb("0x183")){eh=dN,ei=31,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dR,eu=dS,ev=dT,ew=dU,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ax(k[_qdb("0x296")][_qdb("0x495")]());case-110:if(_qdb("0x557")!=_qdb("0x557"))throw new Error;eh=dN,ei=(0|e9)==(0|dQ)?145:142,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-111:if(_qdb("0x176")==_qdb("0x176")){eh=dN,ei=0<(0|e3)?144:142,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ay(k[_qdb("0xc9")][_qdb("0x495")]());case 31:if(_qdb("0x5a8")!==_qdb("0xf2")){eh=dN,ei=(0|dX)<16?29:9,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-18148;case-112:if(_qdb("0x412")!==_qdb("0x174")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cA+20>>2]=cw,bO[cw+24>>2]=cA,cx=ct,bZ=ct,cy=cu;case 29:if(_qdb("0x4dc")!==_qdb("0x1c5")){eH=dU&~dS|dT&dS,eJ=dY+-1|0,eh=dN,ei=28,ej=dP,ek=eJ>>2,el=dR,em=dS,en=dT,eo=dU,ep=eH,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eH+(-2&dR)&-2|1&dR)+(1&eH)|0,eD=dW+((0|dX)%16|0)|0,eE=ec,eF=ed;break}clearInterval(aE),aE=null;case-114:if(_qdb("0x381")!==_qdb("0x59")){eh=dN,ei=(dQ+1|0)<(0|e9)?141:139,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=ct,bO[co+4>>2]=ct,bO[co+8>>2]=ct,bO[co+12>>2]=ct,bO[co+16>>2]=ct,bO[co+20>>2]=ct,bO[co+24>>2]=ct,bO[co+28>>2]=ct,bO[co+32>>2]=ct,bO[co+36>>2]=ct,bO[co+40>>2]=ct,bO[co+44>>2]=ct,bO[co+48>>2]=ct,bO[co+52>>2]=ct,bO[co+56>>2]=ct,bO[co+60>>2]=ct,co=co+64|0;case 28:if(_qdb("0xaf")==_qdb("0xaf")){eH=dY+32|0,eh=dN,ei=(eH>>2|0)<(0|e9)?16:27,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-5882;case-115:if(_qdb("0x4b2")==_qdb("0x4b2")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dn=de,dp=d6,cS=136;case 27:if(_qdb("0x145")==_qdb("0x145")){eh=dN,ei=(0|dQ)<(0|e9)?26:23,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}for(;3&co;){if(!cq)return 0|cr;bN[co>>0]=0|bN[cp>>0],co=co+1|0,cp=cp+1|0,cq=cq-1|0}for(ct=-4&cs|0,cq=ct-64|0;(0|co)<=(0|cq);)bO[co>>2]=bO[cp>>2],bO[co+4>>2]=bO[cp+4>>2],bO[co+8>>2]=bO[cp+8>>2],bO[co+12>>2]=bO[cp+12>>2],bO[co+16>>2]=bO[cp+16>>2],bO[co+20>>2]=bO[cp+20>>2],bO[co+24>>2]=bO[cp+24>>2],bO[co+28>>2]=bO[cp+28>>2],bO[co+32>>2]=bO[cp+32>>2],bO[co+36>>2]=bO[cp+36>>2],bO[co+40>>2]=bO[cp+40>>2],bO[co+44>>2]=bO[cp+44>>2],bO[co+48>>2]=bO[cp+48>>2],bO[co+52>>2]=bO[cp+52>>2],bO[co+56>>2]=bO[cp+56>>2],bO[co+60>>2]=bO[cp+60>>2],co=co+64|0,cp=cp+64|0;for(;(0|co)<(0|ct);)bO[co>>2]=bO[cp>>2],co=co+4|0,cp=cp+4|0;case-116:if(_qdb("0x162")!==_qdb("0x41")){eH=cq,bO[eH>>2]=-680876936,bO[eH+4>>2]=-1,eH=cJ,bO[eH>>2]=-389564586,bO[eH+4>>2]=-1,eH=cK,bO[eH>>2]=606105819,bO[eH+4>>2]=0,eH=cL,bO[eH>>2]=-1044525330,bO[eH+4>>2]=-1,eH=cM,bO[eH>>2]=-176418897,bO[eH+4>>2]=-1,eH=cN,bO[eH>>2]=1200080426,bO[eH+4>>2]=0,eH=cO,bO[eH>>2]=-1473231341,bO[eH+4>>2]=-1,eH=cP,bO[eH>>2]=-45705983,bO[eH+4>>2]=-1,eH=cQ,bO[eH>>2]=1770035416,bO[eH+4>>2]=0,eH=cR,bO[eH>>2]=-1958414417,bO[eH+4>>2]=-1,eH=cS,bO[eH>>2]=-42063,bO[eH+4>>2]=-1,eH=cT,bO[eH>>2]=-1990404162,bO[eH+4>>2]=-1,eH=cU,bO[eH>>2]=1804603682,bO[eH+4>>2]=0,eH=cV,bO[eH>>2]=-40341101,bO[eH+4>>2]=-1,eH=cW,bO[eH>>2]=-1502002290,bO[eH+4>>2]=-1,eH=cX,bO[eH>>2]=1236535329,bO[eH+4>>2]=0,eH=cY,bO[eH>>2]=-165796510,bO[eH+4>>2]=-1,eH=cZ,bO[eH>>2]=-1069501632,bO[eH+4>>2]=-1,eH=d0,bO[eH>>2]=643717713,bO[eH+4>>2]=0,eH=d1,bO[eH>>2]=-373897302,bO[eH+4>>2]=-1,eH=d2,bO[eH>>2]=-701558691,bO[eH+4>>2]=-1,eH=d3,bO[eH>>2]=38016083,bO[eH+4>>2]=0,eH=d4,bO[eH>>2]=-660478335,bO[eH+4>>2]=-1,eH=d5,bO[eH>>2]=-405537848,bO[eH+4>>2]=-1,eH=d6,bO[eH>>2]=568446438,bO[eH+4>>2]=0,eH=d7,bO[eH>>2]=-1019803690,bO[eH+4>>2]=-1,eH=d8,bO[eH>>2]=-187363961,bO[eH+4>>2]=-1,eH=d9,bO[eH>>2]=1163531501,bO[eH+4>>2]=0,eH=dc,bO[eH>>2]=-1444681467,bO[eH+4>>2]=-1,eH=dd,bO[eH>>2]=-51403784,bO[eH+4>>2]=-1,eH=de,bO[eH>>2]=1735328473,bO[eH+4>>2]=0,eH=df,bO[eH>>2]=-1926607734,bO[eH+4>>2]=-1,eH=dg,bO[eH>>2]=-378558,bO[eH+4>>2]=-1,eH=dh,bO[eH>>2]=-2022574463,bO[eH+4>>2]=-1,eH=di,bO[eH>>2]=1839030562,bO[eH+4>>2]=0,eH=dj,bO[eH>>2]=-35309556,bO[eH+4>>2]=-1,eH=dk,bO[eH>>2]=-1530992060,bO[eH+4>>2]=-1,eH=dl,bO[eH>>2]=1272893353,bO[eH+4>>2]=0,eH=dm,bO[eH>>2]=-155497632,bO[eH+4>>2]=-1,eH=dn,bO[eH>>2]=-1094730640,bO[eH+4>>2]=-1,eH=dp,bO[eH>>2]=681279174,bO[eH+4>>2]=0,eH=dq,bO[eH>>2]=-358537222,bO[eH+4>>2]=-1,eH=dr,bO[eH>>2]=-722521979,bO[eH+4>>2]=-1,eH=ds,bO[eH>>2]=76029189,bO[eH+4>>2]=0,eH=dt,bO[eH>>2]=-640364487,bO[eH+4>>2]=-1,eH=du,bO[eH>>2]=-421815835,bO[eH+4>>2]=-1,eH=dv,bO[eH>>2]=530742520,bO[eH+4>>2]=0,eH=dw,bO[eH>>2]=-995338651,bO[eH+4>>2]=-1,eH=dx,bO[eH>>2]=-198630844,bO[eH+4>>2]=-1,eH=dy,bO[eH>>2]=1126891415,bO[eH+4>>2]=0,eH=dz,bO[eH>>2]=-1416354905,bO[eH+4>>2]=-1,eH=dA,bO[eH>>2]=-57434055,bO[eH+4>>2]=-1,eH=dB,bO[eH>>2]=1700485571,bO[eH+4>>2]=0,eH=dC,bO[eH>>2]=-1894986606,bO[eH+4>>2]=-1,eH=dD,bO[eH>>2]=-1051523,bO[eH+4>>2]=-1,eH=dE,bO[eH>>2]=-2054922799,bO[eH+4>>2]=-1,eH=dF,bO[eH>>2]=1873313359,bO[eH+4>>2]=0,eH=dG,bO[eH>>2]=-30611744,bO[eH+4>>2]=-1,eH=dH,bO[eH>>2]=-1560198380,bO[eH+4>>2]=-1,eH=dI,bO[eH>>2]=1309151649,bO[eH+4>>2]=0,eH=dJ,bO[eH>>2]=-145523070,bO[eH+4>>2]=-1,eH=dK,bO[eH>>2]=-1120210379,bO[eH+4>>2]=-1,eH=dL,bO[eH>>2]=718787259,bO[eH+4>>2]=0,eH=dM,bO[eH>>2]=-343485551,bO[eH+4>>2]=-1,eh=dN,ei=136,ej=dP,ek=0,el=1732584193,em=-271733879,en=-1732584194,eo=271733878,ep=1732584193,eq=0,er=0,es=0,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=1,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=33105;case 26:if(_qdb("0x2ba")!==_qdb("0x222")){eh=dN,ei=0<(0|e3)?25:24,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=bO[cp>>2],co=co+4|0,cp=cp+4|0;case-117:if(_qdb("0x549")==_qdb("0x549")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=52278;case 25:if(_qdb("0x2c5")===_qdb("0x2a3"))return 8;eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 24:if(_qdb("0x62")!==_qdb("0x224")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bM=k[_qdb("0x38")];case-119:if(_qdb("0x5ab")===_qdb("0x4bc"))return ptr?Z(a9,ptr,maxBytesToRead):"";eH=dY+40|0,eh=dN,ei=(0|e9)==(14|eH>>6<<4)?135:133,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 23:if(_qdb("0x398")==_qdb("0x398")){eh=dN,ei=(0|e9)==(0|dQ)?22:19,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}aI(_qdb("0x537"));case-120:if(_qdb("0xce")===_qdb("0x306"))return bN|=0,bO|=0,co|=0,(0|co)<32?(cz(bO<<co|(bN&(1<<co)-1<<32-co)>>>32-co|0),bN<<co):(cz(bN<<co-32|0),0);eh=dN,ei=134,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=dW,eF=ed;break;case 22:if(_qdb("0x438")!==_qdb("0x19d")){eh=dN,ei=0<(0|e3)?21:19,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cD=cB+8|0,cL=cD,ck=0|bO[cD>>2];case-121:if(_qdb("0x58c")===_qdb("0x27"))return dm=dl-cM|0,bO[6]=dm,dl=0|bO[9],dq=dl+cM|0,bO[9]=dq,bO[dq+4>>2]=1|dm,bO[dl+4>>2]=3|cM,cz=dl+8|0,c7=co,0|cz;eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 21:if(_qdb("0x15e")==_qdb("0x15e")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dl=dk,dm=dn?dp:dq,cS=145;case-122:if(_qdb("0x131")==_qdb("0x131")){eh=dN,ei=0==(0|bN[co+ec>>0])?128:130,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-11163;case-123:if(_qdb("0x6ab")!==_qdb("0x2c3")){eh=dN,ei=(dQ+1|0)<(0|e9)?131:129,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}a9[_qdb("0x49c")](dest,src,src+num);case 19:if(_qdb("0x198")!==_qdb("0x11b")){eh=dN,ei=(dQ+1|0)<(0|e9)?18:17,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE=c3,cF=cw;case 18:if(_qdb("0x109")!==_qdb("0x5ed")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=359;case-125:if(_qdb("0x485")==_qdb("0x485")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cy=0|bO[8],ct=bZ>>>3,cw=52+(ct<<1<<2)|0,cu=1<<ct,cA=c2&cu?(cu=cw+8|0,c3=cu,0|bO[cu>>2]):(bO[3]=c2|cu,c3=cw+8|0,cw),bO[c3>>2]=cy,bO[cA+12>>2]=cy,bO[cy+8>>2]=cA,bO[cy+12>>2]=cw;case 17:if(_qdb("0x8")===_qdb("0xc3"))return a9[_qdb("0x319")];eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-126:if(_qdb("0x380")==_qdb("0x380")){eh=dN,ei=136,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY+1|0,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cG+20>>2]=cu,bO[cu+24>>2]=cG;case 16:if(_qdb("0x674")!==_qdb("0x4af")){eH=dY+40|0,eh=dN,ei=(0|e9)==(14|eH>>6<<4)?15:14,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[m]=l[m];case-127:if(_qdb("0x2c0")==_qdb("0x2c0")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=11458;case 15:if(_qdb("0x9b")==_qdb("0x9b")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cD<<=1,cs=cw;case-128:if(_qdb("0x259")==_qdb("0x259")){eh=dN,ei=126,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=dY>>2,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-14993;case 14:if(_qdb("0x6a5")==_qdb("0x6a5")){eh=dN,ei=(dQ+1|0)<(0|e9)?13:12,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}this[_qdb("0x345")]=_qdb("0x1b0"),this[_qdb("0x188")]=_qdb("0x1ea")+status+")",this[_qdb("0x50a")]=status;case 127:if(_qdb("0x4fe")!==_qdb("0xdc")){eH=cq+(dX<<3)|0,eJ=dV>>1,eg=0|ck(0|bO[eH>>2],0|bO[eH+4>>2],0|ci(0|eJ,((0|eJ)<0)<<31>>31|0,1),0|c2()),c2(),eJ=(1&dV)+eg|0,eh=dN,ei=125,ej=dP,ek=(eJ+(-2&e8)&-2|1&e8)+(1&eJ)|0,el=dU,em=dS,en=dS,eo=dT,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=eJ,eE=ec,eF=ed;break}response=bl[_qdb("0x38")];case 13:if(_qdb("0xe2")!==_qdb("0x1f8")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=21455;case 126:if(_qdb("0x645")!==_qdb("0x5e")){eh=dN,ei=(0|dY)<6?124:122,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bN|=0,c7=bN;case 12:eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 125:eh=dN,ei=(0|(0|dX)%4)<2?123:121,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 11:eJ=cq+(dX<<3)|0,eg=dV>>1,eH=0|ck(0|bO[eJ>>2],0|bO[eJ+4>>2],0|ci(0|eg,((0|eg)<0)<<31>>31|0,1),0|c2()),c2(),eg=(1&dV)+eH|0,eH=(eg+(-2&e8)&-2|1&e8)+(1&eg)|0,eJ=5*((0|dX)%4|0)|0,eI=eJ+7|0,eG=25-eJ|0,eJ=eH<<eI|(eG?eH>>>eG:eH),eh=dN,ei=31,ej=dP,ek=eH,el=dU,em=(eJ+(-2&dS)&-2|1&dS)+(1&eJ)|0,en=dS,eo=dT,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eI,eB=e7,eC=e8,eD=eg,eE=ec,eF=ed;break;case 123:eh=dN,ei=119,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=4,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 9:eh=dN,ei=(0|dX)<32?7:154,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 122:eh=dN,ei=120,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e3+1|0,eD=e9,eE=ec,eF=ed;break;case 121:eh=dN,ei=119,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=2,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 7:eg=dU&dS|dT&~dU,eI=dY+-1|0,eh=dN,ei=6,ej=dP,ek=eI>>2,el=dR,em=dS,en=dT,eo=dU,ep=eg,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eg+(-2&dR)&-2|1&dR)+(1&eg)|0,eD=dW+((1+(5*dX|0)|0)%16|0)|0,eE=ec,eF=ed;break;case 120:eh=dN,ei=(0|e8)<33?118:116,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 6:eg=dY+32|0,eh=dN,ei=(eg>>2|0)<(0|e9)?161:5,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 119:eg=(7*((0|dX)%4|0)|0)+e6|0,eI=32-eg|0,eJ=(eI?dQ>>>eI:dQ)|dQ<<eg,eh=dN,ei=154,ej=dP,ek=dQ,el=dR,em=(eJ+(-2&dT)&-2|1&dT)+(1&eJ)|0,en=dT,eo=dU,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eg,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 5:eh=dN,ei=(0|dQ)<(0|e9)?4:1,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 118:eh=dN,ei=116,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=33,eD=e9,eE=ec,eF=ed;break;case 4:eh=dN,ei=0<(0|e3)?3:2,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 3:eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 116:eg=dY+32|0,eh=dN,ei=(8+(eg>>2)|0)<(0|e8)?112:114,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 2:eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 115:eh=dN,ei=(0|dX)<64?111:73,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 1:eh=dN,ei=(0|e9)==(0|dQ)?0:164,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 114:eg=dY+32|0,eh=dN,ei=112,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=8+(eg>>2)|0,eD=e9,eE=ec,eF=ed;break;case 0:eh=dN,ei=0<(0|e3)?166:164,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;default:eh=dN,ei=dO,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed}dN=eh,dO=ei,dP=ej,dQ=ek,dR=el,dS=em,dT=en,dU=eo,dV=ep,dW=eq,dX=er,dY=es,dZ=et,e0=eu,e1=ev,e2=ew,e3=ex,e4=ey,e5=ez,e6=eA,e7=eB,e8=eC,e9=eD,ec=eE,ed=eF}return c7=(140==(0|ef)||(ee=e4),cp),0|ee}function cb(){return 8}function cc(e){e|=0;var t,i,n,r,a=0,o=0,s=0,c=0,d=0,u=0,l=0,h=0,f=0,p=0,_=0,g=0,y=0,v=0,m=0,b=0,k=0,x=0,S=0,T=0,P=0,I=0,w=0,A=0,E=0,D=0,q=0,O=0,R=0,L=0,M=0,C=0,N=0,B=0,F=0,U=0,j=0,V=0,W=0,H=0,z=0,Y=0,G=0,Q=0,K=0,$=0,Z=0,X=0,J=0,ee=0,te=0,ie=0,ne=0,re=0,ae=0,oe=0,se=0,de=0,ue=0,le=0,he=0,fe=0,pe=0,_e=0,ge=0,ye=0,ve=0,me=0,be=0,ke=0,xe=0,Se=0,Te=0,Pe=0,Ie=0,we=0,Ae=0,Ee=0,De=0,qe=0,Oe=0,Re=c7;c7=c7+16|0,a=Re;do{if(e>>>0<245){if(s=(o=e>>>0<11?16:e+11&-8)>>>3,c=0|bO[3],3&(d=s?c>>>s:c)|0)return f=0|bO[(h=8+(l=52+((u=(1&d^1)+s|0)<<1<<2)|0)|0)>>2],(0|(_=0|bO[(p=f+8|0)>>2]))==(0|l)?bO[3]=c&~(1<<u):(bO[_+12>>2]=l,bO[h>>2]=_),bO[f+4>>2]=3|(_=u<<3),bO[(u=f+_+4|0)>>2]=1|bO[u>>2],c7=Re,0|p;if(o>>>0>(p=0|bO[5])>>>0){if(0|d)return d=0|bO[(f=8+(h=52+((l=((u=(s=(_=(u=((_=d<<s&((u=2<<s)|0-u))&0-_)-1|0)>>>12&16)?u>>>_:u)>>>5&8)|_|(s=(d=u?s>>>u:s)>>>2&4)|(d=(f=s?d>>>s:d)>>>1&2)|(f=(h=d?f>>>d:f)>>>1&1))+(f?h>>>f:h)|0)<<1<<2)|0)|0)>>2],g=(0|(_=0|bO[(s=d+8|0)>>2]))==(0|h)?bO[3]=u=c&~(1<<l):(bO[_+12>>2]=h,bO[f>>2]=_,c),l=(_=l<<3)-o|0,bO[d+4>>2]=3|o,bO[4+(f=d+o|0)>>2]=1|l,bO[d+_>>2]=l,0|p&&(_=0|bO[8],h=52+((d=p>>>3)<<1<<2)|0,v=g&(u=1<<d)?(y=u=h+8|0,0|bO[u>>2]):(bO[3]=g|u,y=h+8|0,h),bO[y>>2]=_,bO[v+12>>2]=_,bO[_+8>>2]=v,bO[_+12>>2]=h),bO[5]=l,bO[8]=f,c7=Re,0|s;if(s=0|bO[4]){for(m=0|bO[316+(((f=(h=(l=(f=(s&0-s)-1|0)>>>12&16)?f>>>l:f)>>>5&8)|l|(h=(_=f?h>>>f:h)>>>2&4)|(_=(u=h?_>>>h:_)>>>1&2)|(u=(d=_?u>>>_:u)>>>1&1))+(u?d>>>u:d)<<2)>>2],d=(-8&bO[m+4>>2])-o|0,_=u=m;;){if(m=0|bO[u+16>>2])b=m;else{if(!(h=0|bO[u+20>>2]))break;b=h}d=(h=(m=(-8&bO[b+4>>2])-o|0)>>>0<d>>>0)?m:d,u=b,_=h?b:_}if((u=_+o|0)>>>0>_>>>0){h=0|bO[_+24>>2],m=0|bO[_+12>>2];do{if((0|m)==(0|_)){if(f=0|bO[(l=_+20|0)>>2])T=f,P=l;else{if(!(x=0|bO[(k=_+16|0)>>2])){S=0;break}T=x,P=k}for(l=T,f=P;;){if(x=0|bO[(k=l+20|0)>>2])A=x,E=k;else{if(!(w=0|bO[(I=l+16|0)>>2]))break;A=w,E=I}l=A,f=E}bO[f>>2]=0,S=l}else k=0|bO[_+8>>2],bO[k+12>>2]=m,bO[m+8>>2]=k,S=m}while(0);do{if(0|h){if(m=0|bO[_+28>>2],(0|_)==(0|bO[(k=316+(m<<2)|0)>>2])){if(!(bO[k>>2]=S)){bO[4]=s&~(1<<m);break}}else if(!(bO[((0|bO[(m=h+16|0)>>2])==(0|_)?m:h+20|0)>>2]=S))break;bO[S+24>>2]=h,0|(m=0|bO[_+16>>2])&&(bO[S+16>>2]=m,bO[m+24>>2]=S),0|(m=0|bO[_+20>>2])&&(bO[S+20>>2]=m,bO[m+24>>2]=S)}}while(0);return d>>>0<16?(bO[_+4>>2]=3|(h=d+o|0),bO[(s=_+h+4|0)>>2]=1|bO[s>>2]):(bO[_+4>>2]=3|o,bO[u+4>>2]=1|d,bO[u+d>>2]=d,0|p&&(s=0|bO[8],m=52+((h=p>>>3)<<1<<2)|0,q=(k=1<<h)&c?(D=k=m+8|0,0|bO[k>>2]):(bO[3]=k|c,D=m+8|0,m),bO[D>>2]=s,bO[q+12>>2]=s,bO[s+8>>2]=q,bO[s+12>>2]=m),bO[5]=d,bO[8]=u),c7=Re,_+8|0}O=o}else O=o}else O=o}else if(e>>>0<=4294967231)if(s=-8&(m=e+11|0),k=0|bO[4]){h=0-s|0,t=(x=m>>>8)?16777215<s>>>0?31:1&((m=7+(x=14-((w=(x=520192+(m=x<<(I=(x+1048320|0)>>>16&8))|0)>>>16&4)|I|(R=(m=245760+(x=m<<w)|0)>>>16&2))+(x<<R>>>15)|0)|0)?s>>>m:s)|x<<1:0,x=0|bO[316+(t<<2)>>2];e:do{if(x)for(m=h,I=s<<(31==((R=0)|t)?0:25-(t>>>1)|0),w=x,B=0;;){if((F=(-8&bO[w+4>>2])-s|0)>>>0<m>>>0){if(!F){U=0,V=j=w,N=65;break e}W=F,H=w}else W=m,H=B;if(i=0==(0|(F=0|bO[w+20>>2]))|(0|F)==(0|(w=0|bO[w+16+(I>>>31<<2)>>2]))?R:F,!w){L=W,M=i,C=H,N=61;break}m=W,R=i,I<<=1,B=H}else L=h,C=M=0,N=61}while(0);if(61==(0|N)){if(0==(0|M)&0==(0|C)){if(!(h=((x=2<<t)|0-x)&k)){O=s;break}z=0|bO[316+(((x=(o=(h=(x=(h&0-h)-1|0)>>>12&16)?x>>>h:x)>>>5&8)|h|(o=(_=x?o>>>x:o)>>>2&4)|(_=(u=o?_>>>o:_)>>>1&2)|(u=(d=_?u>>>_:u)>>>1&1))+(u?d>>>u:d)<<2)>>2],Y=0}else z=M,Y=C;z?(U=L,j=z,V=Y,N=65):(G=L,Q=Y)}if(65==(0|N))for(d=U,u=j,_=V;;){if(x=(h=(o=(-8&bO[u+4>>2])-s|0)>>>0<d>>>0)?o:d,o=h?u:_,!(n=(h=0|bO[u+16>>2])||0|bO[u+20>>2])){G=x,Q=o;break}d=x,u=n,_=o}if(0!=(0|Q)&&G>>>0<((0|bO[5])-s|0)>>>0&&(_=Q+s|0)>>>0>Q>>>0){u=0|bO[Q+24>>2],d=0|bO[Q+12>>2];do{if((0|d)==(0|Q)){if(x=0|bO[(o=Q+20|0)>>2])$=x,Z=o;else{if(!(c=0|bO[(h=Q+16|0)>>2])){K=0;break}$=c,Z=h}for(o=$,x=Z;;){if(c=0|bO[(h=o+20|0)>>2])X=c,J=h;else{if(!(B=0|bO[(p=o+16|0)>>2]))break;X=B,J=p}o=X,x=J}bO[x>>2]=0,K=o}else h=0|bO[Q+8>>2],bO[h+12>>2]=d,bO[d+8>>2]=h,K=d}while(0);do{if(u){if(d=0|bO[Q+28>>2],(0|Q)==(0|bO[(h=316+(d<<2)|0)>>2])){if(!(bO[h>>2]=K)){ee=bO[4]=h=k&~(1<<d);break}}else if(!(bO[((0|bO[(h=u+16|0)>>2])==(0|Q)?h:u+20|0)>>2]=K)){ee=k;break}bO[K+24>>2]=u,0|(h=0|bO[Q+16>>2])&&(bO[K+16>>2]=h,bO[h+24>>2]=K),ee=((h=0|bO[Q+20>>2])&&(bO[K+20>>2]=h,bO[h+24>>2]=K),k)}else ee=k}while(0);e:do{if(G>>>0<16)bO[Q+4>>2]=3|(k=G+s|0),bO[(u=Q+k+4|0)>>2]=1|bO[u>>2];else{if(bO[Q+4>>2]=3|s,bO[_+4>>2]=1|G,u=(bO[_+G>>2]=G)>>>3,G>>>0<256){k=52+(u<<1<<2)|0,ie=(h=0|bO[3])&(d=1<<u)?(te=d=k+8|0,0|bO[d>>2]):(bO[3]=h|d,te=k+8|0,k),bO[te>>2]=_,bO[ie+12>>2]=_,bO[_+8>>2]=ie,bO[_+12>>2]=k;break}if(k=316+((ne=(k=G>>>8)?16777215<G>>>0?31:1&((d=7+(k=14-((u=(k=520192+(d=k<<(h=(k+1048320|0)>>>16&8))|0)>>>16&4)|h|(c=(d=245760+(k=d<<u)|0)>>>16&2))+(k<<c>>>15)|0)|0)?G>>>d:G)|k<<1:0)<<2)|0,bO[_+28>>2]=ne,bO[4+(d=_+16|0)>>2]=0,bO[d>>2]=0,!(ee&(d=1<<ne))){bO[4]=ee|d,bO[k>>2]=_,bO[_+24>>2]=k,bO[_+12>>2]=_,bO[_+8>>2]=_;break}d=0|bO[k>>2];t:do{if((-8&bO[d+4>>2]|0)!=(0|G)){for(k=G<<(31==(0|ne)?0:25-(ne>>>1)|0),c=d;h=0|bO[(ae=c+16+(k>>>31<<2)|0)>>2];){if((-8&bO[h+4>>2]|0)==(0|G)){re=h;break t}k<<=1,c=h}bO[ae>>2]=_,bO[_+24>>2]=c,bO[_+12>>2]=_,bO[_+8>>2]=_;break e}}while(re=d,0);o=0|bO[(d=re+8|0)>>2],bO[o+12>>2]=_,bO[d>>2]=_,bO[_+8>>2]=o,bO[_+12>>2]=re,bO[_+24>>2]=0}}while(0);return c7=Re,Q+8|0}O=s}else O=s;else O=-1}while(0);if((Q=0|bO[5])>>>0>=O>>>0)return ae=0|bO[8],15<(re=Q-O|0)>>>0?(bO[8]=G=ae+O|0,bO[5]=re,bO[G+4>>2]=1|re,bO[ae+Q>>2]=re,bO[ae+4>>2]=3|O):(bO[5]=0,bO[8]=0,bO[ae+4>>2]=3|Q,bO[(re=ae+Q+4|0)>>2]=1|bO[re>>2]),c7=Re,ae+8|0;if((ae=0|bO[6])>>>0>O>>>0)return bO[6]=re=ae-O|0,G=(Q=0|bO[9])+O|0,bO[9]=G,bO[G+4>>2]=1|re,bO[Q+4>>2]=3|O,c7=Re,Q+8|0;if(oe=0|bO[121]?0|bO[123]:(bO[123]=4096,bO[122]=4096,bO[124]=-1,bO[125]=-1,bO[126]=0,bO[114]=0,bO[121]=-16&a^1431655768,4096),a=O+48|0,(oe=(re=oe+(Q=O+47|0)|0)&(G=0-oe|0))>>>0<=O>>>0)return c7=Re,0;if(0|(ne=0|bO[113])&&(ie=(ee=0|bO[111])+oe|0)>>>0<=ee>>>0|ne>>>0<ie>>>0)return c7=Re,0;e:do{if(4&bO[114])fe=0,N=143;else{ne=0|bO[9];t:do{if(ne){for(ie=460;!((ee=0|bO[ie>>2])>>>0<=ne>>>0&&(ee+(0|bO[ie+4>>2])|0)>>>0>ne>>>0);){if(!(ee=0|bO[ie+8>>2])){N=128;break t}ie=ee}if((ee=re-ae&G)>>>0<2147483647)if((0|(te=0|ce(ee)))==((0|bO[ie>>2])+(0|bO[ie+4>>2])|0)){if(-1!=(0|te)){de=te,ue=ee,N=145;break e}se=ee}else le=te,he=ee,N=136;else se=0}else N=128}while(0);do{if(128==(0|N))if(-1!=(0|(ne=0|ce(0)))&&(s=ne,ee=(K=(0==((te=(ee=0|bO[122])-1|0)&s|0)?0:(te+s&0-ee)-s|0)+oe|0)+(s=0|bO[111])|0,O>>>0<K>>>0&K>>>0<2147483647)){if(0|(te=0|bO[113])&&ee>>>0<=s>>>0|te>>>0<ee>>>0){se=0;break}if((0|(te=0|ce(K)))==(0|ne)){de=ne,ue=K,N=145;break e}le=te,he=K,N=136}else se=0}while(0);do{if(136==(0|N)){if(K=0-he|0,!(he>>>0<a>>>0&he>>>0<2147483647&-1!=(0|le))){if(-1==(0|le)){se=0;break}de=le,ue=he,N=145;break e}if(2147483647<=(ne=Q-he+(te=0|bO[123])&0-te)>>>0){de=le,ue=he,N=145;break e}if(-1==(0|ce(ne))){ce(K),se=0;break}de=le,ue=ne+he|0,N=145;break e}}while(0);bO[114]=4|bO[114],fe=se,N=143}}while(0);if(143==(0|N)&&oe>>>0<2147483647&&!(-1==(0|(se=0|ce(oe)))|1^(le=(he=(oe=0|ce(0))-se|0)>>>0>(O+40|0)>>>0)|se>>>0<oe>>>0&-1!=(0|se)&-1!=(0|oe)^1)&&(de=se,ue=le?he:fe,N=145),145==(0|N)){fe=(0|bO[111])+ue|0,(bO[111]=fe)>>>0>(0|bO[112])>>>0&&(bO[112]=fe),fe=0|bO[9];e:do{if(fe){for(he=460;;){if((0|de)==((pe=0|bO[he>>2])+(_e=0|bO[he+4>>2])|0)){N=154;break}if(!(le=0|bO[he+8>>2]))break;he=le}if(154==(0|N)&&(le=he+4|0,0==(8&bO[he+12>>2]|0))&&fe>>>0<de>>>0&pe>>>0<=fe>>>0){bO[le>>2]=_e+ue,se=fe+(oe=0==(7&(se=fe+8|0)|0)?0:0-se&7)|0,Q=(le=(0|bO[6])+ue|0)-oe|0,bO[9]=se,bO[6]=Q,bO[se+4>>2]=1|Q,bO[fe+le+4>>2]=40,bO[10]=bO[125];break}for(de>>>0<(0|bO[7])>>>0&&(bO[7]=de),le=de+ue|0,Q=460;;){if((0|bO[Q>>2])==(0|le)){N=162;break}if(!(se=0|bO[Q+8>>2]))break;Q=se}if(162==(0|N)&&0==(8&bO[Q+12>>2]|0)){bO[Q>>2]=de,bO[(he=Q+4|0)>>2]=(0|bO[he>>2])+ue,se=de+(0==(7&(he=de+8|0)|0)?0:0-he&7)|0,oe=le+(0==(7&(he=le+8|0)|0)?0:0-he&7)|0,he=se+O|0,a=oe-se-O|0,bO[se+4>>2]=3|O;t:do{if((0|fe)==(0|oe))G=(0|bO[6])+a|0,bO[6]=G,bO[9]=he,bO[he+4>>2]=1|G;else{if((0|bO[8])==(0|oe)){G=(0|bO[5])+a|0,bO[5]=G,bO[8]=he,bO[he+4>>2]=1|G,bO[he+G>>2]=G;break}if(1==(3&(G=0|bO[oe+4>>2])|0)){ae=-8&G,re=G>>>3;i:do{if(G>>>0<256){if(ne=0|bO[oe+8>>2],(0|(K=0|bO[oe+12>>2]))==(0|ne)){bO[3]=bO[3]&~(1<<re);break}bO[ne+12>>2]=K,bO[K+8>>2]=ne;break}ne=0|bO[oe+24>>2],K=0|bO[oe+12>>2];do{if((0|K)==(0|oe)){if(s=0|bO[(ee=4+(te=oe+16|0)|0)>>2])ye=s,ve=ee;else{if(!(J=0|bO[te>>2])){ge=0;break}ye=J,ve=te}for(ee=ye,s=ve;;){if(J=0|bO[(te=ee+20|0)>>2])me=J,be=te;else{if(!(Z=0|bO[(X=ee+16|0)>>2]))break;me=Z,be=X}ee=me,s=be}bO[s>>2]=0,ge=ee}else te=0|bO[oe+8>>2],bO[te+12>>2]=K,bO[K+8>>2]=te,ge=K}while(0);if(!ne)break;c=316+((K=0|bO[oe+28>>2])<<2)|0;do{if((0|bO[c>>2])==(0|oe)){if(0|(bO[c>>2]=ge))break;bO[4]=bO[4]&~(1<<K);break i}if(!(bO[((0|bO[(te=ne+16|0)>>2])==(0|oe)?te:ne+20|0)>>2]=ge))break i}while(0)}while((bO[ge+24>>2]=ne,0|(c=0|bO[(K=oe+16|0)>>2])&&(bO[ge+16>>2]=c,bO[c+24>>2]=ge),c=0|bO[K+4>>2])&&(bO[ge+20>>2]=c,bO[c+24>>2]=ge,0));ke=oe+ae|0,xe=ae+a|0}else ke=oe,xe=a;if(bO[(re=ke+4|0)>>2]=-2&bO[re>>2],bO[he+4>>2]=1|xe,re=(bO[he+xe>>2]=xe)>>>3,xe>>>0<256){G=52+(re<<1<<2)|0,Te=(ie=0|bO[3])&(c=1<<re)?(Se=c=G+8|0,0|bO[c>>2]):(bO[3]=ie|c,Se=G+8|0,G),bO[Se>>2]=he,bO[Te+12>>2]=he,bO[he+8>>2]=Te,bO[he+12>>2]=G;break}G=xe>>>8;do{if(G){if(16777215<xe>>>0){Pe=31;break}Pe=1&((c=7+(re=14-((K=(re=520192+(c=G<<(ie=(G+1048320|0)>>>16&8))|0)>>>16&4)|ie|(te=(c=245760+(re=c<<K)|0)>>>16&2))+(re<<te>>>15)|0)|0)?xe>>>c:xe)|re<<1}else Pe=0}while(0);if(G=316+(Pe<<2)|0,bO[he+28>>2]=Pe,bO[4+(ae=he+16|0)>>2]=0,!((ae=(bO[ae>>2]=0)|bO[4])&(re=1<<Pe))){bO[4]=ae|re,bO[G>>2]=he,bO[he+24>>2]=G,bO[he+12>>2]=he,bO[he+8>>2]=he;break}re=0|bO[G>>2];i:do{if((-8&bO[re+4>>2]|0)!=(0|xe)){for(G=xe<<(31==(0|Pe)?0:25-(Pe>>>1)|0),ae=re;c=0|bO[(we=ae+16+(G>>>31<<2)|0)>>2];){if((-8&bO[c+4>>2]|0)==(0|xe)){Ie=c;break i}G<<=1,ae=c}bO[we>>2]=he,bO[he+24>>2]=ae,bO[he+12>>2]=he,bO[he+8>>2]=he;break t}}while(Ie=re,0);G=0|bO[(re=Ie+8|0)>>2],bO[G+12>>2]=he,bO[re>>2]=he,bO[he+8>>2]=G,bO[he+12>>2]=Ie,bO[he+24>>2]=0}}while(0);return c7=Re,se+8|0}for(he=460;!((a=0|bO[he>>2])>>>0<=fe>>>0&&(Ae=a+(0|bO[he+4>>2])|0)>>>0>fe>>>0);)he=0|bO[he+8>>2];for(a=(he=(a=(he=Ae+-47|0)+(0==(7&(se=he+8|0)|0)?0:0-se&7)|0)>>>0<(se=fe+16|0)>>>0?fe:a)+8|0,le=de+(Q=0==(7&(le=de+8|0)|0)?0:0-le&7)|0,G=(oe=ue+-40|0)-Q|0,bO[9]=le,bO[6]=G,bO[le+4>>2]=1|G,bO[de+oe+4>>2]=40,bO[10]=bO[125],bO[(oe=he+4|0)>>2]=27,bO[a>>2]=bO[115],bO[a+4>>2]=bO[116],bO[a+8>>2]=bO[117],bO[a+12>>2]=bO[118],bO[115]=de,bO[116]=ue,bO[118]=0,bO[117]=a,a=he+24|0;bO[(a=(G=a)+4|0)>>2]=7,(G+8|0)>>>0<Ae>>>0;);if((0|he)!=(0|fe)){if(a=he-fe|0,bO[oe>>2]=-2&bO[oe>>2],bO[fe+4>>2]=1|a,G=(bO[he>>2]=a)>>>3,a>>>0<256){le=52+(G<<1<<2)|0,De=(Q=0|bO[3])&(re=1<<G)?(Ee=re=le+8|0,0|bO[re>>2]):(bO[3]=Q|re,Ee=le+8|0,le),bO[Ee>>2]=fe,bO[De+12>>2]=fe,bO[fe+8>>2]=De,bO[fe+12>>2]=le;break}if(le=316+((r=(le=a>>>8)?16777215<a>>>0?31:1&((re=7+(le=14-((G=(le=520192+(re=le<<(Q=(le+1048320|0)>>>16&8))|0)>>>16&4)|Q|(ne=(re=245760+(le=re<<G)|0)>>>16&2))+(le<<ne>>>15)|0)|0)?a>>>re:a)|le<<1:0)<<2)|0,bO[fe+28>>2]=r,bO[fe+20>>2]=0,!((re=(bO[se>>2]=0)|bO[4])&(ne=1<<r))){bO[4]=re|ne,bO[le>>2]=fe,bO[fe+24>>2]=le,bO[fe+12>>2]=fe,bO[fe+8>>2]=fe;break}ne=0|bO[le>>2];t:do{if((-8&bO[ne+4>>2]|0)!=(0|a)){for(le=a<<(31==(0|r)?0:25-(r>>>1)|0),re=ne;Q=0|bO[(Oe=re+16+(le>>>31<<2)|0)>>2];){if((-8&bO[Q+4>>2]|0)==(0|a)){qe=Q;break t}le<<=1,re=Q}bO[Oe>>2]=fe,bO[fe+24>>2]=re,bO[fe+12>>2]=fe,bO[fe+8>>2]=fe;break e}}while(qe=ne,0);ne=0|bO[(a=qe+8|0)>>2],bO[ne+12>>2]=fe,bO[a>>2]=fe,bO[fe+8>>2]=ne,bO[fe+12>>2]=qe,bO[fe+24>>2]=0}}else 0==(0|(ne=0|bO[7]))|de>>>0<ne>>>0&&(bO[7]=de),bO[115]=de,bO[116]=ue,bO[118]=0,bO[12]=bO[121],bO[11]=-1,bO[16]=52,bO[15]=52,bO[18]=60,bO[17]=60,bO[20]=68,bO[19]=68,bO[22]=76,bO[21]=76,bO[24]=84,bO[23]=84,bO[26]=92,bO[25]=92,bO[28]=100,bO[27]=100,bO[30]=108,bO[29]=108,bO[32]=116,bO[31]=116,bO[34]=124,bO[33]=124,bO[36]=132,bO[35]=132,bO[38]=140,bO[37]=140,bO[40]=148,bO[39]=148,bO[42]=156,bO[41]=156,bO[44]=164,bO[43]=164,bO[46]=172,bO[45]=172,bO[48]=180,bO[47]=180,bO[50]=188,bO[49]=188,bO[52]=196,bO[51]=196,bO[54]=204,bO[53]=204,bO[56]=212,bO[55]=212,bO[58]=220,bO[57]=220,bO[60]=228,bO[59]=228,bO[62]=236,bO[61]=236,bO[64]=244,bO[63]=244,bO[66]=252,bO[65]=252,bO[68]=260,bO[67]=260,bO[70]=268,bO[69]=268,bO[72]=276,bO[71]=276,bO[74]=284,bO[73]=284,bO[76]=292,bO[75]=292,bO[78]=300,bO[77]=300,a=de+(se=0==(7&(a=de+8|0)|0)?0:0-a&7)|0,he=(ne=ue+-40|0)-se|0,bO[9]=a,bO[6]=he,bO[a+4>>2]=1|he,bO[de+ne+4>>2]=40,bO[10]=bO[125]}while(0);if((de=0|bO[6])>>>0>O>>>0)return bO[6]=ue=de-O|0,fe=(de=0|bO[9])+O|0,bO[9]=fe,bO[fe+4>>2]=1|ue,bO[de+4>>2]=3|O,c7=Re,de+8|0}return bO[(0|cb())>>2]=48,c7=Re,0}function cd(e){var t,i,n,r,a,o=0,s=0,c=0,d=0,u=0,l=0,h=0,f=0,p=0,_=0,g=0,y=0,v=0,m=0,b=0,k=0,x=0,S=0,T=0,P=0,I=0,w=0,A=0,E=0,D=0,q=0,O=0,R=0;if(e|=0){s=0|bO[7],t=(o=e+-8|0)+(e=-8&(c=0|bO[e+-4>>2]))|0;do{if(1&c)p=f=o,_=e;else{if(d=0|bO[o>>2],!(3&c))return;if(u=d+e|0,(i=o+(0-d)|0)>>>0<s>>>0)return;if((0|bO[8])==(0|i)){if(3==(3&(h=0|bO[(l=4+t|0)>>2])|0))return bO[5]=u,bO[l>>2]=-2&h,bO[4+i>>2]=1|u,void(bO[i+u>>2]=u);p=f=i,_=u;break}if(h=d>>>3,d>>>0<256){if(d=0|bO[8+i>>2],(0|(l=0|bO[12+i>>2]))==(0|d)){bO[3]=bO[3]&~(1<<h),p=f=i,_=u;break}bO[d+12>>2]=l,bO[l+8>>2]=d,p=f=i,_=u;break}d=0|bO[24+i>>2],l=0|bO[12+i>>2];do{if((0|l)==(0|i)){if(y=0|bO[(g=4+(h=16+i|0)|0)>>2])b=y,k=g;else{if(!(v=0|bO[h>>2])){m=0;break}b=v,k=h}for(g=b,y=k;;){if(v=0|bO[(h=g+20|0)>>2])x=v,S=h;else{if(!(r=0|bO[(n=g+16|0)>>2]))break;x=r,S=n}g=x,y=S}bO[y>>2]=0,m=g}else h=0|bO[8+i>>2],bO[h+12>>2]=l,bO[l+8>>2]=h,m=l}while(0);if(d){if(l=0|bO[28+i>>2],(0|bO[(h=316+(l<<2)|0)>>2])==(0|i)){if(!(bO[h>>2]=m)){bO[4]=bO[4]&~(1<<l),p=f=i,_=u;break}}else if(!(bO[((0|bO[(l=d+16|0)>>2])==(0|i)?l:d+20|0)>>2]=m)){p=f=i,_=u;break}bO[m+24>>2]=d,0|(h=0|bO[(l=16+i|0)>>2])&&(bO[m+16>>2]=h,bO[h+24>>2]=m),_=(p=(f=((h=0|bO[l+4>>2])&&(bO[m+20>>2]=h,bO[h+24>>2]=m),i),i),u)}else p=f=i,_=u}}while(0);if(!(t>>>0<=f>>>0)&&1&(o=0|bO[(e=4+t|0)>>2])){if(2&o)bO[e>>2]=-2&o,bO[p+4>>2]=1|_,E=bO[f+_>>2]=_;else{if((0|bO[9])==(0|t))return m=(0|bO[6])+_|0,bO[6]=m,bO[9]=p,bO[p+4>>2]=1|m,(0|p)!=(0|bO[8])?void 0:(bO[8]=0,void(bO[5]=0));if((0|bO[8])==(0|t))return m=(0|bO[5])+_|0,bO[5]=m,bO[8]=f,bO[p+4>>2]=1|m,void(bO[f+m>>2]=m);m=(-8&o)+_|0,S=o>>>3;do{if(o>>>0<256){if(x=0|bO[8+t>>2],(0|(k=0|bO[12+t>>2]))==(0|x)){bO[3]=bO[3]&~(1<<S);break}bO[x+12>>2]=k,bO[k+8>>2]=x;break}x=0|bO[24+t>>2],k=0|bO[12+t>>2];do{if((0|k)==(0|t)){if(c=0|bO[(s=4+(b=16+t|0)|0)>>2])P=c,I=s;else{if(!(h=0|bO[b>>2])){T=0;break}P=h,I=b}for(s=P,c=I;;){if(h=0|bO[(b=s+20|0)>>2])w=h,A=b;else{if(!(v=0|bO[(l=s+16|0)>>2]))break;w=v,A=l}s=w,c=A}bO[c>>2]=0,T=s}else g=0|bO[8+t>>2],bO[g+12>>2]=k,bO[k+8>>2]=g,T=k}while(0);if(0|x){if(k=0|bO[28+t>>2],(0|bO[(u=316+(k<<2)|0)>>2])==(0|t)){if(!(bO[u>>2]=T)){bO[4]=bO[4]&~(1<<k);break}}else if(!(bO[((0|bO[(k=x+16|0)>>2])==(0|t)?k:x+20|0)>>2]=T))break;bO[T+24>>2]=x,0|(u=0|bO[(k=16+t|0)>>2])&&(bO[T+16>>2]=u,bO[u+24>>2]=T),0|(u=0|bO[k+4>>2])&&(bO[T+20>>2]=u,bO[u+24>>2]=T)}}while(0);if(bO[p+4>>2]=1|m,bO[f+m>>2]=m,(0|p)==(0|bO[8]))return void(bO[5]=m);E=m}if(_=E>>>3,E>>>0<256)return f=52+(_<<1<<2)|0,q=(o=0|bO[3])&(e=1<<_)?(D=e=f+8|0,0|bO[e>>2]):(bO[3]=o|e,D=f+8|0,f),bO[D>>2]=p,bO[q+12>>2]=p,bO[p+8>>2]=q,void(bO[p+12>>2]=f);f=316+((a=(f=E>>>8)?16777215<E>>>0?31:1&((q=7+(f=14-((e=(f=520192+(q=f<<(D=(f+1048320|0)>>>16&8))|0)>>>16&4)|D|(o=(q=245760+(f=q<<e)|0)>>>16&2))+(f<<o>>>15)|0)|0)?E>>>q:E)|f<<1:0)<<2)|0,bO[p+28>>2]=a,bO[p+20>>2]=0,q=(bO[p+16>>2]=0)|bO[4],o=1<<a;e:do{if(q&o){D=0|bO[f>>2];t:do{if((-8&bO[D+4>>2]|0)!=(0|E)){for(e=E<<(31==(0|a)?0:25-(a>>>1)|0),_=D;m=0|bO[(R=_+16+(e>>>31<<2)|0)>>2];){if((-8&bO[m+4>>2]|0)==(0|E)){O=m;break t}e<<=1,_=m}bO[R>>2]=p,bO[p+24>>2]=_,bO[p+12>>2]=p,bO[p+8>>2]=p;break e}}while(O=D,0);x=0|bO[(D=O+8|0)>>2],bO[x+12>>2]=p,bO[D>>2]=p,bO[p+8>>2]=x,bO[p+12>>2]=O,bO[p+24>>2]=0}else bO[4]=q|o,bO[f>>2]=p,bO[p+24>>2]=f,bO[p+12>>2]=p,bO[p+8>>2]=p}while(0);if(p=(0|bO[11])-1|0,!(0|(bO[11]=p))){for(p=468;O=0|bO[p>>2];)p=O+8|0;bO[11]=-1}}}}function ce(e){var t,i,n=3+(e|=0)&-4;e=0|cj(),i=(t=0|bO[e>>2])+n|0;do{if((0|n)<1|t>>>0<i>>>0){if(i>>>0>(0|c4())>>>0&&0==(0|c6(0|i)))break;return bO[e>>2]=i,0|t}}while(0);return bO[(0|cb())>>2]=48,-1}function cf(e){var t=c7;return c7=15+(c7+(e|=0)|0)&-16,0|t}function cg(e){c7=0|e}function ch(){return 0|c7}function ci(e,t,i){return e|=0,t|=0,(0|(i|=0))<32?(c1(t<<i|(e&(1<<i)-1<<32-i)>>>32-i|0),e<<i):(c1(e<<i-32|0),0)}function cj(){return 528}function ck(e,t,i,n){return 0|(c1((t|=0)+(n|=0)+((i=(e|=0)+(i|=0)>>>0)>>>0<e>>>0|0)>>>0|0),0|i)}function cl(e,t,i){e|=0,t|=0;var n,r,a=0;if(512<=(0|(i|=0)))return c5(0|e,0|t,0|i),0|e;if(n=0|e,r=e+i|0,(3&e)==(3&t)){for(;3&e;){if(!i)return 0|n;bN[e>>0]=0|bN[t>>0],e=e+1|0,t=t+1|0,i=i-1|0}for(i=(a=-4&r|0)-64|0;(0|e)<=(0|i);)bO[e>>2]=bO[t>>2],bO[e+4>>2]=bO[t+4>>2],bO[e+8>>2]=bO[t+8>>2],bO[e+12>>2]=bO[t+12>>2],bO[e+16>>2]=bO[t+16>>2],bO[e+20>>2]=bO[t+20>>2],bO[e+24>>2]=bO[t+24>>2],bO[e+28>>2]=bO[t+28>>2],bO[e+32>>2]=bO[t+32>>2],bO[e+36>>2]=bO[t+36>>2],bO[e+40>>2]=bO[t+40>>2],bO[e+44>>2]=bO[t+44>>2],bO[e+48>>2]=bO[t+48>>2],bO[e+52>>2]=bO[t+52>>2],bO[e+56>>2]=bO[t+56>>2],bO[e+60>>2]=bO[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|a);)bO[e>>2]=bO[t>>2],e=e+4|0,t=t+4|0}else for(a=r-4|0;(0|e)<(0|a);)bN[e>>0]=0|bN[t>>0],bN[e+1>>0]=0|bN[t+1>>0],bN[e+2>>0]=0|bN[t+2>>0],bN[e+3>>0]=0|bN[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|r);)bN[e>>0]=0|bN[t>>0],e=e+1|0,t=t+1|0;return 0|n}function cm(e,t,i){t|=0;var n,r,a,o=(e|=0)+(i|=0)|0;if(t&=255,67<=(0|i)){for(;3&e;)bN[e>>0]=t,e=e+1|0;for(r=t|t<<8|t<<16|t<<24,a=(n=-4&o|0)-64|0;(0|e)<=(0|a);)bO[e>>2]=r,bO[e+4>>2]=r,bO[e+8>>2]=r,bO[e+12>>2]=r,bO[e+16>>2]=r,bO[e+20>>2]=r,bO[e+24>>2]=r,bO[e+28>>2]=r,bO[e+32>>2]=r,bO[e+36>>2]=r,bO[e+40>>2]=r,bO[e+44>>2]=r,bO[e+48>>2]=r,bO[e+52>>2]=r,bO[e+56>>2]=r,bO[e+60>>2]=r,e=e+64|0;for(;(0|e)<(0|n);)bO[e>>2]=r,e=e+4|0}for(;(0|e)<(0|o);)bN[e>>0]=t,e=e+1|0;return o-i|0}var cn={};return cn[_qdb("0x4d3")]=cb,cn[_qdb("0x200")]=ci,cn[_qdb("0x3df")]=ca,cn[_qdb("0x19f")]=cj,cn[_qdb("0x658")]=cd,cn[_qdb("0x1ac")]=ck,cn[_qdb("0xa0")]=cc,cn[_qdb("0x20f")]=cl,cn[_qdb("0x1d9")]=cm,cn[_qdb("0x4b7")]=cf,cn[_qdb("0x284")]=cg,cn[_qdb("0x2c7")]=ch,cn}(b5,b7,a7),b9=k[_qdb("0x4d3")]=b8[_qdb("0x4d3")],ba=k[_qdb("0x200")]=b8[_qdb("0x200")],bb=k[_qdb("0x3df")]=b8[_qdb("0x3df")],bc=k[_qdb("0x19f")]=b8[_qdb("0x19f")],bd=k[_qdb("0x658")]=b8[_qdb("0x658")],be=k[_qdb("0x1ac")]=b8[_qdb("0x1ac")],bf=k[_qdb("0xa0")]=b8[_qdb("0xa0")],bg=k[_qdb("0x20f")]=b8[_qdb("0x20f")],bh=k[_qdb("0x1d9")]=b8[_qdb("0x1d9")],bi=k[_qdb("0x4b7")]=b8[_qdb("0x4b7")],bj=k[_qdb("0x284")]=b8[_qdb("0x284")],bk=k[_qdb("0x2c7")]=b8[_qdb("0x2c7")],bq,bl,bm,bn,bo,bp;if(k[_qdb("0x2e8")]=b8,k[_qdb("0x44c")]=W,aJ&&(aM(aJ)||(aJ=v(aJ)),s||t?(bl=y(aJ),a9[_qdb("0x33f")](bl,N)):(aG(_qdb("0x48f")),bm=function(e){e[_qdb("0x441")]&&(e=new Uint8Array(e)),a9[_qdb("0x33f")](e,N),k[_qdb("0x5a9")]&&delete k[_qdb("0x5a9")][_qdb("0x63b")],aH(_qdb("0x48f"))},bn=function(){x(aJ,bm,function(){throw new Error(_qdb("0x510")+aJ)})},bo=b3(aJ),bo?bm(bo[_qdb("0x38")]):k[_qdb("0x5a9")]?(bp=function(){var e=k[_qdb("0x5a9")],t=e[_qdb("0x63b")];if(200!==e[_qdb("0x50a")]&&0!==e[_qdb("0x50a")]){var i=b3(k[_qdb("0x3c7")]);if(!i)return console[_qdb("0x186")](_qdb("0x591")+e[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t=i[_qdb("0x38")]}bm(t)},k[_qdb("0x5a9")][_qdb("0x63b")]?setTimeout(bp,0):k[_qdb("0x5a9")][_qdb("0x54e")](_qdb("0x5cf"),bp)):bn())),aF=function e(){bq||bs(),bq||(aF=e)},k[_qdb("0x509")]=bs,k[_qdb("0x433")])for(typeof k[_qdb("0x433")]==_qdb("0x16d")&&(k[_qdb("0x433")]=[k[_qdb("0x433")]]);0<k[_qdb("0x433")][_qdb("0x319")];)k[_qdb("0x433")][_qdb("0x660")]()();P=!0,bs(),f=k[_qdb("0x44c")](_qdb("0x688"),_qdb("0x3a"),[_qdb("0x3a")])}function v(e){if(_qdb("0x90")==_qdb("0x90")){if(k[_qdb("0x189")]){if(_qdb("0x51c")==_qdb("0x51c"))return k[_qdb("0x189")](e,u);b4[5]=0,b4[8]=0,b4[ka+4>>2]=3|_,ja=ka+_+4|0,b4[ja>>2]=1|b4[ja>>2]}return u+e}b4[3]=b6|j,E=l+8|0,F=l}function D(e){if(_qdb("0x400")!==_qdb("0x91")){var t=ac[aj>>2];return ac[aj>>2]=t+e+15&-16,t}p+=37843}function E(e){if(_qdb("0x13e")==_qdb("0x13e"))switch(e){case"i1":case"i8":return 1;case _qdb("0x2dd"):return 2;case _qdb("0x163"):return 4;case _qdb("0x4ff"):return 8;case _qdb("0x40e"):return 4;case _qdb("0x1d5"):return 8;default:if(_qdb("0x39f")===_qdb("0x3bb"))0===stack&&(stack=bk()),cArgs[i]=converter(args[i]);else if("*"===e[e[_qdb("0x319")]-1]){if(_qdb("0xa8")==_qdb("0xa8"))return 4;bytes[i]=decoded[_qdb("0x687")](i)}else if("i"===e[0]){if(_qdb("0x11d")==_qdb("0x11d")){var t=Number(e[_qdb("0x2a4")](1));return T(t%8==0,_qdb("0xdd")+t+_qdb("0x354")+e),t/8}t=toC[argTypes[i]];t?(0===stack&&(stack=bk()),cArgs[i]=t(args[i])):cArgs[i]=args[i]}else{if(_qdb("0x4c9")==_qdb("0x4c9"))return 0;k[_qdb("0x5d8")](aD)}}else E=D,F=C}function F(e){if(_qdb("0x215")!==_qdb("0x662")){if(F[_qdb("0x24c")]||(F[_qdb("0x24c")]={}),!F[_qdb("0x24c")][e]){if(_qdb("0x338")!=_qdb("0x338")){for(var t=b1(s),i=new Uint8Array(t[_qdb("0x319")]),n=0;n<t[_qdb("0x319")];++n)i[n]=t[_qdb("0x687")](n);return i}F[_qdb("0x24c")][e]=1,B(e)}}else p+=42849}function J(e,t,n){if(_qdb("0x4bf")==_qdb("0x4bf"))if(n&&n[_qdb("0x319")]){if(_qdb("0x5fe")!==_qdb("0x37d"))return k[_qdb("0x1ca")+e][_qdb("0x6ca")](null,[t][_qdb("0x31d")](n));p+=-37295}else{if(_qdb("0x478")!==_qdb("0x539"))return k[_qdb("0x1ca")+e][_qdb("0x3c3")](null,t);p+=-4030}else{t=str[_qdb("0x687")](i);(t=55296<=t&&t<=57343?65536+((1023&t)<<10)|1023&str[_qdb("0x687")](++i):t)<=127?++len:len+=t<=2047?2:t<=65535?3:4}}function Q(e,t,i,n){if(_qdb("0x207")===_qdb("0x83"))p+=25607;else switch("*"===(i=i||"i8")[_qdb("0x525")](i[_qdb("0x319")]-1)&&(i=_qdb("0x163")),i){case"i1":case"i8":a8[e>>0]=t;break;case _qdb("0x2dd"):aa[e>>1]=t;break;case _qdb("0x163"):ac[e>>2]=t;break;case _qdb("0x4ff"):aP=[t>>>0,1<=+az(aO=t)?0<aO?(0|aC(+aB(aO/4294967296),4294967295))>>>0:~~+aA((aO-(~~aO>>>0))/4294967296)>>>0:0],ac[e>>2]=aP[0],ac[e+4>>2]=aP[1];break;case _qdb("0x40e"):ae[e>>2]=t;break;case _qdb("0x1d5"):af[e>>3]=t;break;default:aI(_qdb("0x59f")+i)}}function T(e,t){if(_qdb("0x194")===_qdb("0x3cf"))return 0;e||(_qdb("0x5b8")!==_qdb("0x633")?aI(_qdb("0x237")+t):j[_qdb("0x63d")]="u")}function U(e){if(_qdb("0x652")!==_qdb("0x563")){var t=k["_"+e];return T(t,_qdb("0x64e")+e+_qdb("0x2b7")),t}p+=-2333}function V(e,t,i,n,r){if(_qdb("0x129")===_qdb("0x184"))return n&&n[_qdb("0x319")]?k[_qdb("0x1ca")+sig][_qdb("0x6ca")](null,[ptr][_qdb("0x31d")](n)):k[_qdb("0x1ca")+sig][_qdb("0x3c3")](null,ptr);var a={};a[_qdb("0x546")]=function(e){if(_qdb("0x60a")==_qdb("0x60a")){var t,i=0;return null!=e&&0!==e&&(_qdb("0x464")!==_qdb("0x15a")?(t=1+(e[_qdb("0x319")]<<2),a2(e,i=bi(t),t)):(aq=!0,al(an))),i}za=la,Aa=d},a[_qdb("0x68b")]=function(e){if(_qdb("0x503")!==_qdb("0x554")){var t=bi(e[_qdb("0x319")]);return a5(e,t),t}R=L,S=X,T=Y,O=65};var o=a,a=U(e),s=[],c=0;if(n)if(_qdb("0x632")===_qdb("0x486"))p+=-34334;else for(var u=0;u<n[_qdb("0x319")];u++)if(_qdb("0x15f")!=_qdb("0x15f"))requestedSize>>>=0,aW(requestedSize);else{var l=o[i[u]];if(l)_qdb("0x595")!==_qdb("0x32f")?(0===c&&(c=bk()),s[u]=l(n[u])):p+=29420;else{if(_qdb("0xb1")===_qdb("0x11"))throw k[_qdb("0x1e1")]&&k[_qdb("0x1e1")](what),what+="",B(what),R=!0,S=1,what=_qdb("0x415")+what+_qdb("0xa4"),what;s[u]=n[u]}}e=a[_qdb("0x6ca")](null,s);return a=e,e=_qdb("0x41f")==_qdb("0x41f")?t===_qdb("0x546")?a0(a):t===_qdb("0x5c1")?Boolean(a):a:(E=w,void(F=v)),0!==c&&bj(c),e}function W(t,r,a,o){if(_qdb("0x56f")==_qdb("0x56f")){var c=(a=a||[])[_qdb("0xf5")](function(e){return _qdb("0x38c")!==_qdb("0x54c")?e===_qdb("0x3a"):(Z=(0|b4[6])+d|0,b4[6]=Z,b4[9]=qa,void(b4[qa+4>>2]=1|Z))});if(r!==_qdb("0x546")&&c&&!o){if(_qdb("0x51d")==_qdb("0x51d"))return U(t);b4[y+16>>2]=i,b4[i+24>>2]=y}return function(){if(_qdb("0x3b")!==_qdb("0x4c2"))return V(t,r,a,arguments,o);p+=-7911}}b4[n+4>>2]=3|e,b4[i+4>>2]=1|h,b4[i+h>>2]=h,0|m&&(f=0|b4[8],s=52+((k=m>>>3)<<1<<2)|0,H=(v=1<<k)&g?(G=v=s+8|0,0|b4[v>>2]):(b4[3]=v|g,G=s+8|0,s),b4[G>>2]=f,b4[H+12>>2]=f,b4[f+8>>2]=H,b4[f+12>>2]=s),b4[5]=h,b4[8]=i}function Z(t,r,a){if(_qdb("0x28d")!==_qdb("0x6cf")){for(var c=r+a,d=r;t[d]&&!(c<=d);)++d;if(16<d-r&&t[_qdb("0x58d")]&&Y){if(_qdb("0x3d5")!==_qdb("0x5c5"))return Y[_qdb("0x378")](t[_qdb("0x58d")](r,d));k[_qdb("0x5a9")][_qdb("0x54e")](_qdb("0x5cf"),bp)}else{if(_qdb("0x657")===_qdb("0x6a2"))return l=52+(n<<1<<2)|0,F=(b6=0|b4[3])&(j=1<<n)?(E=j=l+8|0,0|b4[j>>2]):(b4[3]=b6|j,E=l+8|0,l),b4[E>>2]=m,b4[F+12>>2]=m,b4[m+8>>2]=F,void(b4[m+12>>2]=l);for(var f="";r<d;)if(_qdb("0x47")===_qdb("0x68"))p+=-7777;else{var g=t[r++];if(!(128&g)){if(_qdb("0x158")==_qdb("0x158")){f+=String[_qdb("0x35a")](g);continue}X=M,Y=N}var y=63&t[r++];if(192==(224&g)){if(_qdb("0x5a2")!==_qdb("0x3a6")){f+=String[_qdb("0x35a")]((31&g)<<6|y);continue}z=k,A=s}var v=63&t[r++];if(224==(240&g)){if(_qdb("0x34c")!=_qdb("0x34c"))return ja=ka-I|0,b4[6]=ja,_=0|b4[9],Z=_+I|0,b4[9]=Z,b4[Z+4>>2]=1|ja,b4[_+4>>2]=3|I,o=_+8|0,u=b6,0|o;g=(15&g)<<12|y<<6|v}else _qdb("0x552")!=_qdb("0x552")?ar=!0:g=(7&g)<<18|y<<12|v<<6|63&t[r++];if(g<65536)if(_qdb("0x4b6")!=_qdb("0x4b6")){if(200==xhr[_qdb("0x50a")]||0==xhr[_qdb("0x50a")]&&xhr[_qdb("0x63b")])return void onload(xhr[_qdb("0x63b")]);v=b3(url);if(v)return void onload(v[_qdb("0x38")]);onerror()}else f+=String[_qdb("0x35a")](g);else _qdb("0x1b4")==_qdb("0x1b4")?(g=g-65536,f+=String[_qdb("0x35a")](55296|g>>10,56320|1023&g)):(h=w,i=$,n=e)}}return f}if(k[_qdb("0x296")])for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];)ax(k[_qdb("0x296")][_qdb("0x495")]());al(am)}function a0(e,t){if(_qdb("0x498")!==_qdb("0x68d"))return e?Z(a9,e,t):"";p+=47107}function a1(e,i,n,r){if(_qdb("0x6a9")!==_qdb("0x5d4")){if(!(0<r))return 0;for(var a=n,c=n+r-1,u=0;u<e[_qdb("0x319")];++u)if(_qdb("0x417")!=_qdb("0x417"))p+=39038;else{var h=e[_qdb("0x687")](u);if(55296<=h&&h<=57343&&(_qdb("0x361")==_qdb("0x361")?h=65536+((1023&h)<<10)|1023&e[_qdb("0x687")](++u):p+=1354),h<=127)if(_qdb("0x315")===_qdb("0x4d0"))E=j=l+8|0,F=0|b4[j>>2];else{if(c<=n)break;i[n++]=h}else if(h<=2047)if(_qdb("0x155")===_qdb("0x6b"))b4[b6>>2]=b4[d>>2],b4[b6+4>>2]=b4[d+4>>2],b4[b6+8>>2]=b4[d+8>>2],b4[b6+12>>2]=b4[d+12>>2],b4[b6+16>>2]=b4[d+16>>2],b4[b6+20>>2]=b4[d+20>>2],b4[b6+24>>2]=b4[d+24>>2],b4[b6+28>>2]=b4[d+28>>2],b4[b6+32>>2]=b4[d+32>>2],b4[b6+36>>2]=b4[d+36>>2],b4[b6+40>>2]=b4[d+40>>2],b4[b6+44>>2]=b4[d+44>>2],b4[b6+48>>2]=b4[d+48>>2],b4[b6+52>>2]=b4[d+52>>2],b4[b6+56>>2]=b4[d+56>>2],b4[b6+60>>2]=b4[d+60>>2],b6=b6+64|0,d=d+64|0;else{if(c<=n+1)break;i[n++]=192|h>>6,i[n++]=128|63&h}else if(h<=65535)if(_qdb("0x3b1")===_qdb("0x31e"))p+=-22037;else{if(c<=n+2)break;i[n++]=224|h>>12,i[n++]=128|h>>6&63,i[n++]=128|63&h}else if(_qdb("0x60c")==_qdb("0x60c")){if(c<=n+3)break;i[n++]=240|h>>18,i[n++]=128|h>>12&63,i[n++]=128|h>>6&63,i[n++]=128|63&h}else s=p,t=o}return i[n]=0,n-a}p+=-16907}function a2(e,t,i){if(_qdb("0x45b")==_qdb("0x45b"))return a1(e,a9,t,i);argTypes=argTypes||[];i=argTypes[_qdb("0xf5")](function(e){return e===_qdb("0x3a")});return returnType!==_qdb("0x546")&&i&&!opts?U(ident):function(){return V(ident,returnType,argTypes,arguments,opts)}}function a3(e){if(_qdb("0x603")==_qdb("0x603")){for(var t,i=0,n=0;n<e[_qdb("0x319")];++n)_qdb("0x428")!=_qdb("0x428")?u=self[_qdb("0x87")][_qdb("0x389")]:(t=55296<=(t=e[_qdb("0x687")](n))&&t<=57343?65536+((1023&t)<<10)|1023&e[_qdb("0x687")](++n):t)<=127?++i:i+=t<=2047?2:t<=65535?3:4;return i}onload(bl[_qdb("0x38")])}function a5(e,t){_qdb("0x541")!==_qdb("0x70")?a8[_qdb("0x33f")](e,t):p+=39984}function a6(e,t,i){if(_qdb("0x5b9")==_qdb("0x5b9")){for(var n=0;n<e[_qdb("0x319")];++n)_qdb("0x126")===_qdb("0x3e8")?p+=3766:a8[t++>>0]=e[_qdb("0x687")](n);i||(a8[t>>0]=0)}else aD++,k[_qdb("0x5d8")]&&k[_qdb("0x5d8")](aD)}function ag(e){_qdb("0x322")!==_qdb("0x3b0")?(a7=e,k[_qdb("0x668")]=a8=new Int8Array(e),k[_qdb("0x325")]=aa=new Int16Array(e),k[_qdb("0x481")]=ac=new Int32Array(e),k[_qdb("0x228")]=a9=new Uint8Array(e),k[_qdb("0x54d")]=ab=new Uint16Array(e),k[_qdb("0x13f")]=ad=new Uint32Array(e),k[_qdb("0x42f")]=ae=new Float32Array(e),k[_qdb("0x500")]=af=new Float64Array(e)):a9[_qdb("0x33f")](a9[_qdb("0x58d")](src,src+num),dest)}function al(e){if(_qdb("0x31b")!==_qdb("0x373"))for(;0<e[_qdb("0x319")];)if(_qdb("0x661")==_qdb("0x661")){var t=e[_qdb("0x495")]();if(typeof t==_qdb("0x16d")){if(_qdb("0x579")!==_qdb("0x4b0")){t(k);continue}b4[123]=4096,b4[122]=4096,b4[124]=-1,b4[125]=-1,b4[126]=0,b4[114]=0,b4[121]=-16&d^1431655768,la=4096}var i=t[_qdb("0x5bf")];if(typeof i===_qdb("0x3a"))if(_qdb("0x320")!==_qdb("0x414"))if(void 0===t[_qdb("0x6a4")]){if(_qdb("0x560")===_qdb("0x1cb"))return r=(0|b4[5])+n|0,b4[5]=r,b4[8]=l,b4[m+4>>2]=1|r,b4[l+r>>2]=r,0;k[_qdb("0x4cb")](i)}else{if(_qdb("0x32")===_qdb("0x294"))return aK(filename,aL);k[_qdb("0xe5")](i,t[_qdb("0x6a4")])}else pa=ga,qa=fa,O=136;else _qdb("0x1b5")==_qdb("0x1b5")?i(void 0===t[_qdb("0x6a4")]?null:t[_qdb("0x6a4")]):p+=8001}else b4[j>>2]=-2&b6,b4[m+4>>2]=1|n,D=b4[l+n>>2]=n;else xa=ea,ya=ga}function as(){if(_qdb("0x374")!=_qdb("0x374"))p+=-27396;else{if(k[_qdb("0x296")]){if(_qdb("0x1eb")===_qdb("0x3a2"))return ja=_-I|0,ka=0|b4[8],15<ja>>>0?(Z=ka+I|0,b4[8]=Z,b4[5]=ja,b4[Z+4>>2]=1|ja,b4[ka+_>>2]=ja,b4[ka+4>>2]=3|I):(b4[5]=0,b4[8]=0,b4[ka+4>>2]=3|_,ja=ka+_+4|0,b4[ja>>2]=1|b4[ja>>2]),o=ka+8|0,u=b6,0|o;for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];){if(_qdb("0x1d8")!=_qdb("0x1d8"))return 1;ax(k[_qdb("0x296")][_qdb("0x495")]())}}al(am)}}function at(){_qdb("0x58a")!==_qdb("0x697")?(aq=!0,al(an)):p+=-30434}function au(){_qdb("0x2a")!=_qdb("0x2a")?(U=Q,V=D):al(ao)}function av(){if(_qdb("0x240")===_qdb("0x468")){var e=Number(type[_qdb("0x2a4")](1));return T(e%8==0,_qdb("0xdd")+e+_qdb("0x354")+type),e/8}ar=!0}function aw(){if(_qdb("0x567")===_qdb("0x3cd"))return bl;if(k[_qdb("0xc9")])if(_qdb("0x456")==_qdb("0x456"))for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)_qdb("0x51b")==_qdb("0x51b")?ay(k[_qdb("0xc9")][_qdb("0x495")]()):(ga=0|b4[la+8>>2],b4[ga+12>>2]=aa,b4[aa+8>>2]=ga,ua=aa);else{var e=k[_qdb("0x5a9")],t=e[_qdb("0x63b")];if(200!==e[_qdb("0x50a")]&&0!==e[_qdb("0x50a")]){var i=b3(k[_qdb("0x3c7")]);if(!i)return console[_qdb("0x186")](_qdb("0x591")+e[_qdb("0x50a")]+_qdb("0x1da")+aJ),bn(),0;t=i[_qdb("0x38")]}bm(t)}al(ap)}function ax(e){_qdb("0x5d5")===_qdb("0x5f1")?p+=14107:am[_qdb("0x23c")](e)}function ay(e){_qdb("0x23")!==_qdb("0x46b")?ap[_qdb("0x23c")](e):i=j(_qdb("0x4e"))}function aG(e){_qdb("0xec")!=_qdb("0xec")?p+=7133:(aD++,k[_qdb("0x5d8")]&&(_qdb("0x44b")===_qdb("0x590")?u0=(7&u0)<<18|u1<<12|u2<<6|63&heap[idx++]:k[_qdb("0x5d8")](aD)))}function aH(e){if(_qdb("0x57e")==_qdb("0x57e")){if(aD--,k[_qdb("0x5d8")]&&(_qdb("0x48a")==_qdb("0x48a")?k[_qdb("0x5d8")](aD):p+=25017),0==aD)if(_qdb("0x2f6")===_qdb("0x667"))objkey=objkey[_qdb("0xdf")]();else if(null!==aE&&(_qdb("0x618")!==_qdb("0x480")?(clearInterval(aE),aE=null):p+=35631),aF){if(_qdb("0x2dc")===_qdb("0x92")){var t=b3(url);if(t)return b0(t);throw B}t=aF;aF=null,t()}}else{var i=new XMLHttpRequest;i[_qdb("0x6bc")](_qdb("0xf9"),url,!0),i[_qdb("0x254")]=_qdb("0x141"),i[_qdb("0x2a6")]=function(){var e;200==i[_qdb("0x50a")]||0==i[_qdb("0x50a")]&&i[_qdb("0x63b")]?onload(i[_qdb("0x63b")]):(e=b3(url))?onload(e[_qdb("0x38")]):onerror()},i[_qdb("0x62e")]=onerror,i[_qdb("0x2ef")](null)}}function aI(e){if(_qdb("0x113")==_qdb("0x113"))throw k[_qdb("0x1e1")]&&(_qdb("0x4f0")!=_qdb("0x4f0")?p+=10774:k[_qdb("0x1e1")](e)),B(e+=""),R=!0,S=1,_qdb("0x415")+e+_qdb("0xa4");if(!f)return _qdb("0x118");var t="",i=a3(urlpara),e=bf(i+1);a2(urlpara,e,i+1);i=f(e);return bd(e),i&&(t=a0(i),bd(i)),t}function aK(e,t){if(_qdb("0x2c1")==_qdb("0x2c1"))return String[_qdb("0x51")][_qdb("0x219")]?e[_qdb("0x219")](t):0===e[_qdb("0x2ae")](t);a8[_qdb("0x33f")](array,a7)}function aM(e){if(_qdb("0x626")==_qdb("0x626"))return aK(e,aL);bq||(bq=!0,k[_qdb("0x263")]=!0,R||(at(),au(),k[_qdb("0x653")]&&k[_qdb("0x653")](),aw()))}function aR(e){if(_qdb("0x36b")!==_qdb("0x53d"))return e;k[_qdb("0x2f")]("")}function aS(e){return _qdb("0x5a7")!==_qdb("0x100")&&e[_qdb("0x210")](/\b__Z[\w\d_]+/g,function(e){if(_qdb("0x307")!=_qdb("0x307"))return K;var t=aR(e);return e===t?e:t+" ["+e+"]"})}function aT(){if(_qdb("0x3f5")==_qdb("0x3f5")){var t=new Error;if(!t[_qdb("0x6cc")])if(_qdb("0xc6")==_qdb("0xc6")){try{if(_qdb("0x368")==_qdb("0x368"))throw new Error;p+=-6170}catch(e){_qdb("0x247")===_qdb("0x1af")?p+=-14833:t=e}if(!t[_qdb("0x6cc")]){if(_qdb("0x225")!==_qdb("0x171"))return _qdb("0x245");ba=g,ca=k}}else a7=buf,k[_qdb("0x668")]=a8=new Int8Array(buf),k[_qdb("0x325")]=aa=new Int16Array(buf),k[_qdb("0x481")]=ac=new Int32Array(buf),k[_qdb("0x228")]=a9=new Uint8Array(buf),k[_qdb("0x54d")]=ab=new Uint16Array(buf),k[_qdb("0x13f")]=ad=new Uint32Array(buf),k[_qdb("0x42f")]=ae=new Float32Array(buf),k[_qdb("0x500")]=af=new Float64Array(buf);return t[_qdb("0x6cc")][_qdb("0x15")]()}if(k[_qdb("0xc9")])for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)ay(k[_qdb("0xc9")][_qdb("0x495")]());al(ap)}function aU(){if(_qdb("0x4e6")!=_qdb("0x4e6")){if(!e)return 0|f;j[M>>0]=0|j[H>>0],M=M+1|0,H=H+1|0,e=e-1|0}else for(var t=53169;;)if(_qdb("0x535")===_qdb("0x3da"))bq||bs(),bq||(aF=runCaller);else switch(t){case 56024:ie[16]=_qdb("0x659"),ie[3]=_qdb("0x613"),t+=-24831;break;case 61241:ie[15]=_qdb("0x6b2"),t+=-1889;break;case 15387:ie[38]=_qdb("0x69"),ie[37]=_qdb("0x177"),ie[25]=_qdb("0x6a3"),ie[19]=_qdb("0x640"),t+=26636;break;case 17630:ie[6]=_qdb("0x55a"),ie[5]=_qdb("0x686"),t+=-9162;break;case 515:ie[4]=_qdb("0x47a"),ie[5]=_qdb("0x11e"),ie[24]=_qdb("0x62a"),t+=30156;break;case 25634:i[103]=[],t+=-3691;break;case 28946:L=e,t+=-18581;break;case 43470:try{if(_qdb("0x41d")!=_qdb("0x41d"))return k[_qdb("0x189")]?k[_qdb("0x189")](path,u):u+path;H=Object[_qdb("0x51")][_qdb("0x15")][_qdb("0x3c3")](L(_qdb("0x1fa")))===_qdb("0x6b8")}catch(e){}t+=-33663;break;case 19317:ie[24]=_qdb("0x300"),ie[4]=_qdb("0x135"),ie[21]=_qdb("0x3d2"),ie[7]=_qdb("0x47e"),t+=18648;break;case 21758:ie[13]=_qdb("0x73"),ie[24]=_qdb("0x3e0"),ie[28]=_qdb("0x56e"),t+=3876;break;case 56419:ie[2]=_qdb("0x1aa"),t+=-49406;break;case 44830:ie[9]=_qdb("0xc8"),ie[16]=_qdb("0x1d6"),t+=-13748;break;case 31150:ie[10]=_qdb("0x5e4"),ie[20]=_qdb("0x69b"),ie[11]=_qdb("0x52"),t+=5624;break;case 43969:ie[0]=_qdb("0x5a0"),ie[12]=_qdb("0x1b6"),t+=1858;break;case 42111:ie[28]=_qdb("0x2f7"),ie[22]=_qdb("0x3f0"),t+=18213;break;case 10789:L++,t+=35243;break;case 10264:ie[4]=_qdb("0x211"),ie[0]=_qdb("0x3e1"),ie[5]=_qdb("0x35e"),ie[13]=_qdb("0x3de"),t+=35394;break;case 21950:ie=i[93],t+=-9285;break;case 8577:ie[17]=_qdb("0xd4"),t+=32569;break;case 43122:ie[17]=_qdb("0x696"),t+=3991;break;case 1531:ie[7]=_qdb("0x574"),ie[14]=_qdb("0x3ae"),ie[9]=_qdb("0xb0"),t+=25149;break;case 1692:t+=44415;break;case 10713:ie[18]=_qdb("0x561"),ie[25]=_qdb("0x13b"),t+=20908;break;case 59570:ie=i[48],t+=-39589;break;case 58161:if(L<ie[_qdb("0x319")]){if(_qdb("0x241")!=_qdb("0x241"))return _qdb("0x118");t+=-13216}else _qdb("0x3a7")==_qdb("0x3a7")?t+=-47550:t+=22481;break;case 17368:ie[14]=_qdb("0x69d"),ie[12]=_qdb("0x309"),ie[1]=_qdb("0x137"),ie[28]=_qdb("0x1bc"),t+=-6655;break;case 7013:ie[8]=_qdb("0x5fb"),t+=46942;break;case 2271:ie[7]=_qdb("0xfa"),ie[19]=_qdb("0x5e7"),t+=10335;break;case 4782:ie[9]=_qdb("0x27f"),ie[15]=_qdb("0x29a"),ie[23]=_qdb("0x6f"),ie[4]=_qdb("0x570"),t+=164;break;case 9141:H=H[_qdb("0x5ff")],t+=29;break;case 26039:ie[30]=_qdb("0x28f"),ie[6]=_qdb("0x5e1"),ie[10]=_qdb("0x608"),t+=-2641;break;case 48532:t+=7074;break;case 38717:ie[0]=_qdb("0x50c"),t+=-14849;break;case 49373:M++,t+=13923;break;case 23868:ie[1]=_qdb("0x467"),ie[6]=_qdb("0x196"),t+=8758;break;case 42710:i[65]=[],t+=-5026;break;case 53169:var i=[];t+=11294;break;case 23191:H?_qdb("0x3d8")!==_qdb("0x68e")?t+=-22037:(Z=ka+I|0,b4[8]=Z,b4[5]=ja,b4[Z+4>>2]=1|ja,b4[ka+_>>2]=ja,b4[ka+4>>2]=3|I):_qdb("0x431")==_qdb("0x431")?t+=25017:condition||aI(_qdb("0x237")+text);break;case 37549:ie[3]=_qdb("0x292"),ie[12]=_qdb("0x5be"),ie[6]=_qdb("0x586"),ie[24]=_qdb("0x115"),t+=-16373;break;case 29849:ie=i[175],t+=9998;break;case 43255:R=ie[L]%3,t+=10619;break;case 21176:ie[5]=_qdb("0x220"),t+=-348;break;case 43694:ie[7]=_qdb("0x411"),ie[0]=_qdb("0x350"),t+=-39178;break;case 53698:ie[24]=_qdb("0x6d"),ie[17]=_qdb("0x21"),t+=11237;break;case 4256:ie[17]=_qdb("0x1a0"),ie[11]=_qdb("0x3a5"),ie[2]=_qdb("0x6a7"),ie[6]=_qdb("0x461"),t+=40773;break;case 33487:ie[3]=_qdb("0x2be"),ie[8]=_qdb("0x597"),ie[25]=_qdb("0x2de"),ie[17]=_qdb("0x521"),t+=30038;break;case 24661:ie[4]=_qdb("0x1a2"),ie[31]=_qdb("0x1c"),ie[5]=_qdb("0x499"),t+=6669;break;case 51708:ie[20]=_qdb("0xca"),ie[19]=_qdb("0x124"),ie[18]=_qdb("0x1bd"),ie[5]=_qdb("0x3cc"),t+=-47452;break;case 12665:ie[23]=_qdb("0x3a4"),ie[17]=_qdb("0x623"),ie[8]=_qdb("0x23d"),ie[12]=_qdb("0x680"),t+=-5279;break;case 32746:ie[3]=_qdb("0x76"),t+=23590;break;case 23712:ie[7]=_qdb("0x5f0"),ie[10]=_qdb("0x2e3"),t+=-10849;break;case 34449:ie[22]=_qdb("0x64"),t+=4902;break;case 50181:ie[34]=_qdb("0x335"),ie[8]=_qdb("0x528"),t+=-25087;break;case 63686:ie[8]=_qdb("0x399"),ie[1]=_qdb("0x25e"),ie[10]=_qdb("0x22c"),ie[21]=_qdb("0x6b7"),t+=-41336;break;case 46788:H%=8,t+=14578;break;case 4675:ie[35]=_qdb("0x502"),ie[34]=_qdb("0x2b5"),t+=4481;break;case 45106:ie[12]=_qdb("0x40d"),ie[13]=_qdb("0x516"),t+=8060;break;case 14476:ie[26]=_qdb("0xbc"),ie[17]=_qdb("0x497"),ie[20]=_qdb("0xf7"),t+=37574;break;case 59779:ie[19]=_qdb("0x635"),t+=-8031;break;case 21314:if(i[O])if(_qdb("0x85")===_qdb("0x227"))try{var a=new XMLHttpRequest;return a[_qdb("0x6bc")](_qdb("0xf9"),url,!1),a[_qdb("0x254")]=_qdb("0x141"),a[_qdb("0x2ef")](null),new Uint8Array(a[_qdb("0x63b")])}catch(E){if(P=b3(url))return P;throw E}else t+=7133;else{if(_qdb("0x26b")===_qdb("0x2c4")){var s,c,p,b,S,P=_qdb("0x43c"),E="",D=0;for(input=input[_qdb("0x210")](/[^A-Za-z0-9\+\/\=]/g,"");s=P[_qdb("0x2ae")](input[_qdb("0x525")](D++))<<2|(p=P[_qdb("0x2ae")](input[_qdb("0x525")](D++)))>>4,c=(15&p)<<4|(b=P[_qdb("0x2ae")](input[_qdb("0x525")](D++)))>>2,p=(3&b)<<6|(S=P[_qdb("0x2ae")](input[_qdb("0x525")](D++))),E+=String[_qdb("0x35a")](s),64!==b&&(E+=String[_qdb("0x35a")](c)),64!==S&&(E+=String[_qdb("0x35a")](p)),D<input[_qdb("0x319")];);return E}t+=-10871}break;case 5143:ie[3]=_qdb("0x8f"),ie[18]=_qdb("0x5e0"),ie[20]=_qdb("0x5cb"),ie[19]=_qdb("0x33d"),t+=56897;break;case 44421:ie[5]=_qdb("0x2d7"),ie[18]=_qdb("0x408"),t+=19623;break;case 47385:ie[12]=_qdb("0x1c1"),ie[2]=_qdb("0x442"),t+=2193;break;case 59154:ie=i[8],t+=-41524;break;case 60810:ie[1]=_qdb("0x199"),ie[41]=_qdb("0x6b5"),ie[27]=_qdb("0x24d"),ie[14]=_qdb("0x40b"),t+=-4786;break;case 6944:ie=i[4],t+=14034;break;case 8185:ie[12]=_qdb("0x167"),ie[19]=_qdb("0x3f4"),t+=55011;break;case 39996:ie=i[113],t+=4337;break;case 22860:H=H[_qdb("0x575")],t+=-19256;break;case 33570:ie[27]=_qdb("0xc0"),ie[0]=_qdb("0x5ba"),t+=-18606;break;case 40492:ie[20]=_qdb("0x1fd"),t+=-27038;break;case 31205:ie[17]=_qdb("0x631"),ie[18]=_qdb("0x2d9"),ie[15]=_qdb("0x52f"),t+=950;break;case 6249:ie[13]=_qdb("0x670"),ie[12]=_qdb("0x643"),t+=5338;break;case 30552:F-=ie[0]>>8,t+=-10527;break;case 22181:ie[24]=_qdb("0x5b5"),ie[4]=_qdb("0x339"),t+=-15932;break;case 20949:ie[4]=_qdb("0x1d4"),ie[13]=_qdb("0x29d"),ie[7]=_qdb("0x5e3"),t+=17026;break;case 34545:ie[18]=_qdb("0x6ba"),ie[3]=_qdb("0x48e"),ie[10]=_qdb("0x3ca"),t+=10285;break;case 60446:ie[29]=_qdb("0x526"),ie[18]=_qdb("0x54b"),ie[37]=_qdb("0x7d"),t+=-19022;break;case 36258:if(F<ce[_qdb("0x319")]){if(_qdb("0x5b0")!=_qdb("0x5b0"))return"*"===type[type[_qdb("0x319")]-1]?4:"i"===type[0]?(T((E=Number(type[_qdb("0x2a4")](1)))%8==0,_qdb("0xdd")+E+_qdb("0x354")+type),E/8):0;t+=-14993}else _qdb("0xa1")===_qdb("0x531")?t+=4548:t+=24497;break;case 10002:ie[13]=_qdb("0x50d"),t+=19446;break;case 60584:t+=-39110;break;case 8468:ie[19]=_qdb("0x349"),ie[8]=_qdb("0x28c"),t+=-6387;break;case 34850:ie[22]=_qdb("0x308"),t+=27383;break;case 37526:try{if(_qdb("0x68c")!=_qdb("0x68c"))return R=0|b4[(F=8+(L=52+((O=(1&h^1)+f|0)<<1<<2)|0)|0)>>2],(0|(n=0|b4[(m=R+8|0)>>2]))==(0|L)?b4[3]=g&~(1<<O):(b4[n+12>>2]=L,b4[F>>2]=n),n=O<<3,b4[R+4>>2]=3|n,b4[(O=R+n+4|0)>>2]=1|b4[O>>2],u=M,0|(o=m);O=L(_qdb("0x4e"))}catch(c){}t+=22169;break;case 13141:ie[22]=_qdb("0x4f8"),ie[26]=_qdb("0x4a7"),ie[1]=_qdb("0x4dd"),t+=-7582;break;case 62085:t+=-24559;break;case 26587:i[77]=[],t+=24147;break;case 32550:ie=i[251],t+=-14706;break;case 48208:t+=-39717;break;case 53424:var O=0;t+=-39698;break;case 60563:ie[15]=_qdb("0x1d7"),ie[3]=_qdb("0x40f"),ie[7]=_qdb("0x343"),t+=-25639;break;case 32164:ie[3]=_qdb("0x621"),ie[4]=_qdb("0x298"),ie[0]=_qdb("0x267"),t+=28843;break;case 39257:i[151]=[],t+=672;break;case 25184:ie[27]=_qdb("0x60b"),ie[21]=_qdb("0x74"),ie[12]=_qdb("0x106"),ie[19]=_qdb("0x55b"),t+=-5320;break;case 13522:ie[23]=_qdb("0x3be"),t+=36582;break;case 62834:ie[26]=_qdb("0x8d"),ie[22]=_qdb("0x1c9"),ie[8]=_qdb("0x337"),ie[16]=_qdb("0x5a4"),t+=-61571;break;case 30247:ie[12]=_qdb("0x192"),t+=32322;break;case 2788:R=R[_qdb("0x687")](0),t+=36653;break;case 38685:t+=19940;break;case 49578:ie[13]=_qdb("0xee"),ie[26]=_qdb("0x170"),t+=15675;break;case 20618:ie[16]=_qdb("0x5f3"),ie[2]=_qdb("0x33c"),t+=18030;break;case 37875:ie[21]=_qdb("0x49f"),t+=6546;break;case 52424:ie[19]=_qdb("0x47f"),ie[21]=_qdb("0x49"),ie[30]=_qdb("0xc1"),ie[3]=_qdb("0x276"),t+=-19544;break;case 21099:ie=i[29],t+=16776;break;case 24727:ie=i[118],t+=-18767;break;case 12039:ie=i[1],t+=50569;break;case 55851:ie[32]=_qdb("0x12f"),ie[18]=_qdb("0x16f"),t+=4959;break;case 26939:F/=ie[0]>>12,t+=-13187;break;case 46756:ie=i[107],t+=-19668;break;case 48164:if(F<ce[_qdb("0x319")]){if(_qdb("0x1d0")===_qdb("0x122"))return;t+=-33014}else _qdb("0x63e")!==_qdb("0xc")?t+=-30737:(b4[3]=ha|g,Ba=Z+8|0,Ca=Z);break;case 41336:M<=R?_qdb("0x22b")!=_qdb("0x22b")?H=O(_qdb("0x206")):t+=-4030:_qdb("0xbf")!==_qdb("0x344")?t+=-7777:(Ba=g=Z+8|0,Ca=0|b4[g>>2]);break;case 23447:ie[2]=_qdb("0x390"),ie[5]=_qdb("0x6bd"),ie[4]=_qdb("0xe9"),ie[9]=_qdb("0x681"),t+=41e3;break;case 32626:ie[7]=_qdb("0xcd"),ie[8]=_qdb("0x281"),ie[13]=_qdb("0x476"),t+=-25153;break;case 41568:M=F+1,t+=-39202;break;case 19629:i[165]=[],t+=-1573;break;case 44792:H+=64,t+=3918;break;case 53997:ie[6]=_qdb("0x202"),ie[0]=_qdb("0x28b"),t+=-4586;break;case 54700:ie[35]=_qdb("0x379"),ie[40]=_qdb("0x166"),t+=-43283;break;case 47198:ie[4]=_qdb("0x4e8"),ie[1]=_qdb("0x1e4"),ie[2]=_qdb("0x59c"),ie[13]=_qdb("0x302"),t+=3802;break;case 5359:if(d(O))_qdb("0x62b")==_qdb("0x62b")?t+=42849:B=e;else{if(_qdb("0x384")===_qdb("0x5fa"))return 0|u;t+=39832}break;case 42359:ie[8]=_qdb("0xab"),ie[13]=_qdb("0x1f4"),ie[3]=_qdb("0x2bb"),ie[35]=_qdb("0x15d"),t+=-29385;break;case 29235:var R=0;t+=14020;break;case 36211:ie[24]=_qdb("0x3ee"),ie[8]=_qdb("0xdb"),ie[29]=_qdb("0x25c"),ie[22]=_qdb("0x1ce"),t+=-5061;break;case 41146:ie[22]=_qdb("0x4e1"),t+=-22403;break;case 43356:ie[18]=_qdb("0x314"),ie[13]=_qdb("0x366"),t+=-35132;break;case 39579:ie[16]=_qdb("0x26f"),ie[5]=_qdb("0x256"),ie[6]=_qdb("0x642"),t+=-9192;break;case 30801:ie[15]=_qdb("0x430"),ie[6]=_qdb("0xe3"),t+=16230;break;case 13816:ie[0]=_qdb("0x663"),t+=12223;break;case 31621:ie[29]=_qdb("0x1bb"),ie[5]=_qdb("0x4e4"),ie[20]=_qdb("0x149"),ie[13]=_qdb("0x669"),t+=-868;break;case 33580:ie[38]=_qdb("0x1f6"),t+=-26166;break;case 48528:ie[8]=_qdb("0x42a"),ie[14]=_qdb("0x1b8"),t+=-8153;break;case 1733:t+=38466;break;case 26988:ie[27]=_qdb("0x348"),ie[10]=_qdb("0x31c"),ie[0]=_qdb("0x397"),t+=25897;break;case 38648:ie[8]=_qdb("0x218"),ie[5]=_qdb("0x326"),ie[6]=_qdb("0x134"),t+=-14936;break;case 4286:ie[10]=_qdb("0x47c"),ie[7]=_qdb("0x602"),t+=60616;break;case 30261:t+=17903;break;case 33479:ie[1]=_qdb("0x4c0"),ie[23]=_qdb("0x14c"),t+=20219;break;case 46025:ie[8]=_qdb("0x36d"),t+=-21337;break;case 59612:ie[31]=_qdb("0x57"),ie[39]=_qdb("0x59b"),t+=-39593;break;case 8224:ie[22]=_qdb("0x96"),t+=29663;break;case 37136:ie[25]=_qdb("0x622"),ie[5]=_qdb("0x3f2"),t+=5875;break;case 32880:ie[28]=_qdb("0x3a9"),t+=17868;break;case 27088:ie[10]=_qdb("0x4ad"),ie[11]=_qdb("0x583"),ie[24]=_qdb("0x448"),t+=32068;break;case 32675:ie[8]=_qdb("0x24b"),t+=-10871;break;case 38442:M++,t+=-9207;break;case 1154:H=O[_qdb("0xba")],t+=44555;break;case 4472:ie[8]=_qdb("0x407"),ie[13]=_qdb("0x47d"),ie[23]=_qdb("0xf4"),t+=9602;break;case 37684:ie=i[65],t+=-30446;break;case 36774:ie[21]=_qdb("0x6b0"),ie[27]=_qdb("0x67f"),ie[17]=_qdb("0x630"),ie[19]=_qdb("0x558"),t+=-5129;break;case 65108:i[98]=[],t+=-47498;break;case 32831:ie[1]=_qdb("0x5b"),ie[4]=_qdb("0x41b"),t+=-20376;break;case 17498:ie[7]=_qdb("0x436"),ie[12]=_qdb("0x3cb"),t+=-15143;break;case 47031:ie[9]=_qdb("0x39"),t+=-23095;break;case 27163:i[8]=[],t+=31991;break;case 32753:ie[14]=_qdb("0xd9"),ie[21]=_qdb("0x370"),t+=-26153;break;case 13726:var L=0;t+=15220;break;case 77:ie[12]=_qdb("0x226"),ie[19]=_qdb("0x261"),t+=16951;break;case 53833:ie[11]=_qdb("0x5aa"),t+=-25627;break;case 12955:ie[12]=_qdb("0x311"),ie[2]=_qdb("0xa6"),ie[17]=_qdb("0x5d9"),ie[11]=_qdb("0x66a"),t+=22991;break;case 12974:ie[40]=_qdb("0x16c"),ie[12]=_qdb("0x2d5"),t+=46638;break;case 36798:ie[1]=_qdb("0x470"),ie[2]=_qdb("0x33e"),t+=26036;break;case 17427:t+=-12116;break;case 30753:ie[35]=_qdb("0x61c"),ie[15]=_qdb("0x39a"),ie[7]=_qdb("0x45a"),t+=-11241;break;case 26680:ie[3]=_qdb("0x168"),ie[11]=_qdb("0x179"),t+=9549;break;case 35597:ie[1]=_qdb("0x6c2"),ie[19]=_qdb("0xb7"),ie[15]=_qdb("0x35"),ie[16]=_qdb("0x479"),t+=-2110;break;case 13154:ie[18]=_qdb("0x6ac"),ie[14]=_qdb("0x573"),t+=35287;break;case 64862:ie[7]=_qdb("0x10b"),ie[10]=_qdb("0x16a"),t+=-34061;break;case 29448:i[197]=[],t+=-16036;break;case 64044:ie[9]=_qdb("0xe7"),ie[0]=_qdb("0x5df"),t+=-35768;break;case 27377:ie[5]=_qdb("0x28"),ie[4]=_qdb("0x1f5"),ie[14]=_qdb("0x4a0"),t+=-3177;break;case 25433:ie[9]=_qdb("0x666"),ie[20]=_qdb("0xcc"),t+=-22255;break;case 22273:var M=re[_qdb("0x525")](re[_qdb("0x319")]-O);t+=28760;break;case 1263:ie[19]=_qdb("0x12c"),t+=47643;break;case 14964:ie[22]=_qdb("0x4d5"),ie[10]=_qdb("0x2fe"),ie[30]=_qdb("0x269"),t+=26541;break;case 47423:re?_qdb("0x32e")===_qdb("0x1de")?(xa=s,ya=da):t+=-37295:_qdb("0x447")===_qdb("0x443")?T(!1,_qdb("0x369")+chr+" ("+String[_qdb("0x35a")](chr)+_qdb("0x1f2")+O+_qdb("0x413")):t+=785;break;case 65320:ie[33]=_qdb("0x5f5"),ie[23]=_qdb("0x26e"),t+=-54087;break;case 20086:t+=15917;break;case 41523:L=M=0,t+=6727;break;case 17610:ie=i[98],t+=-6115;break;case 60150:ie[7]=_qdb("0x624"),ie[6]=_qdb("0x611"),ie[10]=_qdb("0x6af"),t+=-26306;break;case 60324:ie[16]=_qdb("0x646"),ie[1]=_qdb("0x19a"),ie[7]=_qdb("0x4c1"),t+=-21067;break;case 6600:ie[15]=_qdb("0x44e"),ie[16]=_qdb("0x120"),t+=-4329;break;case 58027:ie[1]=_qdb("0xda"),ie[9]=_qdb("0x2e7"),t+=5655;break;case 36824:F=ie[L]>>10,t+=-6272;break;case 14776:R=ie[0]>>20,t+=43385;break;case 59695:if(typeof O===_qdb("0x16d"))_qdb("0x64c")==_qdb("0x64c")?t+=-6170:(255<(W=array[O])&&(aZ&&T(!1,_qdb("0x369")+W+" ("+String[_qdb("0x35a")](W)+_qdb("0x1f2")+O+_qdb("0x413")),W&=255),ret[_qdb("0x3dc")](String[_qdb("0x35a")](W)));else if(_qdb("0x466")===_qdb("0x2a2")){for(;3&M;)j[M>>0]=H,M=M+1|0;for(h=H|H<<8|H<<16|H<<24,O=(g=-4&f|0)-64|0;(0|M)<=(0|O);)b4[M>>2]=h,b4[M+4>>2]=h,b4[M+8>>2]=h,b4[M+12>>2]=h,b4[M+16>>2]=h,b4[M+20>>2]=h,b4[M+24>>2]=h,b4[M+28>>2]=h,b4[M+32>>2]=h,b4[M+36>>2]=h,b4[M+40>>2]=h,b4[M+44>>2]=h,b4[M+48>>2]=h,b4[M+52>>2]=h,b4[M+56>>2]=h,b4[M+60>>2]=h,M=M+64|0;for(;(0|M)<(0|g);)b4[M>>2]=h,M=M+4|0}else t+=-11163;break;case 20804:ie[7]=_qdb("0x27a"),ie[16]=_qdb("0x3c5"),ie[8]=_qdb("0x28a"),t+=-80;break;case 57804:ie[4]=_qdb("0xb3"),ie[9]=_qdb("0x617"),ie[12]=_qdb("0x698"),ie[3]=_qdb("0x24a"),t+=-37186;break;case 31949:ie[5]=_qdb("0x312"),ie[1]=_qdb("0x212"),ie[16]=_qdb("0x520"),t+=-19877;break;case 64290:H=O,t+=-11139;break;case 41747:ie[20]=_qdb("0x4ae"),ie[12]=_qdb("0x444"),ie[5]=_qdb("0x147"),ie[18]=_qdb("0x4ac"),t+=-33419;break;case 36003:t+=255;break;case 51e3:ie[0]=_qdb("0x2bd"),ie[17]=_qdb("0x54f"),ie[3]=_qdb("0x182"),t+=2691;break;case 51033:O<=ne[_qdb("0x319")]&&M!==ne[_qdb("0x525")](ne[_qdb("0x319")]-O)?_qdb("0x571")==_qdb("0x571")?t+=14107:(setTimeout(function(){k[_qdb("0x2f")]("")},1),doRun()):_qdb("0x244")===_qdb("0x21a")?(b4[n+12>>2]=F,b4[R>>2]=n,t=g):t+=-35594;break;case 1541:ne=ne||_qdb("0x136"),t+=46667;break;case 39351:i[81]=[],t+=17056;break;case 19512:ie[2]=_qdb("0x460"),ie[33]=_qdb("0x56d"),ie[16]=_qdb("0xaa"),ie[30]=_qdb("0xf0"),t+=39289;break;case 50734:ie=i[77],t+=-40762;break;case 27945:ie[23]=_qdb("0x246"),ie[8]=_qdb("0x264"),t+=-14990;break;case 30671:ie[0]=_qdb("0x27d"),ie[6]=_qdb("0x3c"),ie[10]=_qdb("0x31a"),t+=-11897;break;case 26514:if(H){if(_qdb("0x242")!=_qdb("0x242"))return x<0?Math[_qdb("0x1e0")](x):Math[_qdb("0x382")](x);t+=11458}else _qdb("0x2c9")!==_qdb("0x628")?t+=21694:(Z<<=1,ka=g);break;case 11495:ie[13]=_qdb("0x1c0"),ie[20]=_qdb("0x5c"),ie[11]=_qdb("0x56"),ie[0]=_qdb("0x3a8"),t+=6003;break;case 32155:i[38]=[],t+=30886;break;case 3604:H?_qdb("0x1a7")!==_qdb("0x639")?t+=17659:l[m]=k[m]:_qdb("0x3ef")===_qdb("0x107")?(q=O=F+8|0,r=0|b4[O>>2]):t+=44604;break;case 64053:t+=-33792;break;case 63473:ie=i[169],t+=-48086;break;case 57053:ie[12]=_qdb("0xd6"),ie[29]=_qdb("0x593"),t+=-43237;break;case 52646:ie[5]=_qdb("0x487"),ie[16]=_qdb("0x2e2"),ie[18]=_qdb("0x279"),ie[17]=_qdb("0x51a"),t+=-12583;break;case 4522:ie[8]=_qdb("0x17c"),ie[4]=_qdb("0x4b"),ie[6]=_qdb("0xd0"),ie[11]=_qdb("0x53b"),t+=20376;break;case 47675:ie[30]=_qdb("0x2cd"),ie[0]=_qdb("0x572"),ie[36]=_qdb("0x67e"),ie[31]=_qdb("0x33b"),t+=-10343;break;case 61007:ie[1]=_qdb("0x3c6"),t+=-8361;break;case 55672:ie=i[23],t+=-18080;break;case 35878:ie[21]=_qdb("0x3a1"),ie[13]=_qdb("0x387"),ie[14]=_qdb("0x26d"),ie[7]=_qdb("0x377"),t+=1671;break;case 17028:ie[41]=_qdb("0x565"),ie[28]=_qdb("0x89"),ie[10]=_qdb("0x627"),ie[7]=_qdb("0x4b1"),t+=43418;break;case 41505:ie[19]=_qdb("0x2b2"),t+=12485;break;case 34924:ie[14]=_qdb("0x483"),t+=-2975;break;case 24730:H=H[_qdb("0x589")],t+=1784;break;case 50507:i[93]=[],t+=-28557;break;case 4637:i[225]=[],t+=58826;break;case 42023:ie[30]=_qdb("0x1f1"),ie[33]=_qdb("0x1f9"),ie[23]=_qdb("0x33"),ie[34]=_qdb("0x18e"),t+=336;break;case 557:ie[15]=_qdb("0x46e"),ie[5]=_qdb("0x3e2"),t+=18283;break;case 57276:H+=12,t+=-42987;break;case 63075:i[144]=[],t+=-27344;break;case 2480:i[15]=[],t+=40217;break;case 2552:ie[28]=_qdb("0x238"),t+=1920;break;case 29888:ie[17]=_qdb("0x5d1"),t+=-83;break;case 39126:i[175]=[],t+=-9277;break;case 16737:H=O+64,t+=30051;break;case 25194:ie[5]=_qdb("0x38e"),ie[8]=_qdb("0x75"),t+=-7725;break;case 63331:i[4]=[],t+=-56387;break;case 6372:ie=i[123],t+=50700;break;case 13412:ie=i[197],t+=34933;break;case 26806:R=re[_qdb("0x525")](R),t+=-24018;break;case 59156:ie[2]=_qdb("0x34b"),ie[27]=_qdb("0x5cc"),ie[7]=_qdb("0x4c3"),ie[5]=_qdb("0x691"),t+=-11420;break;case 40244:ie[29]=_qdb("0x9a"),ie[6]=_qdb("0x587"),ie[2]=_qdb("0x2f2"),t+=-29941;break;case 25094:ie[27]=_qdb("0x2b8"),ie[6]=_qdb("0x13d"),ie[0]=_qdb("0x17e"),t+=-11096;break;case 41441:ie[16]=_qdb("0x56b"),ie[21]=_qdb("0x154"),ie[13]=_qdb("0xae"),t+=-37155;break;case 42289:ie[27]=_qdb("0x25a"),t+=16535;break;case 53955:ie[10]=_qdb("0x372"),ie[0]=_qdb("0x605"),ie[11]=_qdb("0x258"),ie[13]=_qdb("0x9f"),t+=-12834;break;case 56407:ie=i[81],t+=-30883;break;case 23814:var F=0;t+=6447;break;case 59337:ie[25]=_qdb("0x36f"),ie[24]=_qdb("0x25b"),ie[26]=_qdb("0x5c7"),ie[28]=_qdb("0x4d7"),t+=-25991;break;case 13880:ie=i[58],t+=36146;break;case 44181:i[240]=[],t+=-37051;break;case 11233:ie[40]=_qdb("0x3d4"),ie[27]=_qdb("0x1f0"),ie[39]=_qdb("0x490"),ie[1]=_qdb("0x419"),t+=6550;break;case 55953:ie[21]=_qdb("0x5c0"),ie[18]=_qdb("0x678"),ie[20]=_qdb("0x1e9"),ie[13]=_qdb("0x1a5"),t+=-47079;break;case 49333:ie[6]=_qdb("0x62d"),ie[13]=_qdb("0x3ba"),t+=-21966;break;case 62952:ie[21]=_qdb("0x30c"),ie[18]=_qdb("0x362"),ie[17]=_qdb("0x477"),t+=-28698;break;case 48928:if(typeof H===_qdb("0x3a"))if(_qdb("0x8e")==_qdb("0x8e"))t+=-26334;else{var V=b3(k[_qdb("0x3c7")]);if(!V)return console[_qdb("0x186")](_qdb("0x591")+request[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();response=V[_qdb("0x38")]}else{if(_qdb("0x506")!=_qdb("0x506"))return u=H,0|lb;t+=-720}break;case 24001:ie[15]=_qdb("0x138"),ie[11]=_qdb("0xfc"),t+=33803;break;case 37109:try{_qdb("0x615")!=_qdb("0x615")?(j<<=1,n=r):H=O(_qdb("0x206"))}catch(e){}t+=-35684;break;case 11208:ie[17]=_qdb("0x287"),ie[15]=_qdb("0x14f"),ie[25]=_qdb("0x5d3"),t+=41831;break;case 42829:ie[25]=_qdb("0x273"),ie[14]=_qdb("0x3e9"),t+=-6618;break;case 30387:ie[11]=_qdb("0x233"),ie[7]=_qdb("0x3c4"),ie[12]=_qdb("0x1dc"),ie[13]=_qdb("0x180"),t+=27130;break;case 37572:ie[16]=_qdb("0x4aa"),ie[15]=_qdb("0x42e"),ie[5]=_qdb("0x488"),ie[7]=_qdb("0x435"),t+=24373;break;case 5397:ie[36]=_qdb("0x473"),ie[42]=_qdb("0x2cf"),ie[9]=_qdb("0x232"),t+=-2845;break;case 4244:i[68]=[],t+=18367;break;case 12540:i[123]=[],t+=-6168;break;case 27528:ie[1]=_qdb("0x2eb"),ie[21]=_qdb("0x676"),ie[18]=_qdb("0x64a"),ie[6]=_qdb("0x43d"),t+=417;break;case 6264:ie[14]=_qdb("0x619"),ie[18]=_qdb("0x2d8"),ie[11]=_qdb("0x424"),t+=19169;break;case 52319:if(O<=re[_qdb("0x319")])_qdb("0x46a")===_qdb("0x249")?t+=21694:t+=-30046;else{if(_qdb("0x514")===_qdb("0x3b5")){var W=ac[aj>>2],V=W+size+15&-16;return ac[aj>>2]=V,W}t+=-18148}break;case 18017:ie[5]=_qdb("0x1ee"),ie[3]=_qdb("0x4a5"),ie[2]=_qdb("0x328"),ie[12]=_qdb("0x1b7"),t+=27290;break;case 12863:ie[0]=_qdb("0x121"),t+=48040;break;case 37311:ie[1]=_qdb("0x132"),ie[15]=_qdb("0x5f9"),ie[5]=_qdb("0x201"),t+=-22761;break;case 29012:ie[24]=_qdb("0x209"),ie[32]=_qdb("0x2af"),t+=-22748;break;case 10320:ie[23]=_qdb("0x699"),t+=11438;break;case 52764:ie[25]=_qdb("0x4fc"),t+=-16886;break;case 36787:var H=0;t+=16637;break;case 45191:H=O[_qdb("0xd8")],t+=-4984;break;case 11587:i[48]=[],t+=47983;break;case 50500:ie[3]=_qdb("0xad"),t+=-23337;break;case 12577:if(0<H){if(_qdb("0x7f")==_qdb("0x7f"))t+=15745;else if(obj[_qdb("0x4ef")](prop))return!1}else _qdb("0x5b2")!=_qdb("0x5b2")?(b4[x+20>>2]=ce,b4[ce+24>>2]=x):t+=35631;break;case 10611:t+=-6260;break;case 51312:ie[14]=_qdb("0x440"),t+=-49158;break;case 45307:ie[0]=_qdb("0x14a"),ie[1]=_qdb("0x351"),ie[7]=_qdb("0x24"),t+=-7683;break;case 50572:ie[9]=_qdb("0x636"),ie[3]=_qdb("0x2ac"),ie[21]=_qdb("0x3d7"),ie[11]=_qdb("0x578"),t+=-4211;break;case 33559:t+=-17179;break;case 56577:H+=9,t+=-22764;break;case 59977:t+=-3161;break;case 56885:t+=-22714;break;case 14074:ie[20]=_qdb("0x5bc"),ie[31]=_qdb("0x40"),ie[33]=_qdb("0x49a"),ie[11]=_qdb("0x165"),t+=14578;break;case 25154:ie[31]=_qdb("0x161"),t+=-16384;break;case 52637:ie[16]=_qdb("0x423"),ie[5]=_qdb("0x187"),ie[29]=_qdb("0x580"),ie[2]=_qdb("0x195"),t+=-42178;break;case 9170:if(H){if(_qdb("0x1f3")!=_qdb("0x1f3")){Y|=0;var Y=0;return u=15+(u+(Y=u)|0)&-16,0|Y}t+=24275}else _qdb("0xa")!=_qdb("0xa")?(m=R=h,n=O):t+=39038;break;case 25524:ie[8]=_qdb("0x18"),ie[2]=_qdb("0x4bd"),ie[14]=_qdb("0x13c"),ie[9]=_qdb("0x80"),t+=12048;break;case 37837:ie[14]=_qdb("0x39b"),ie[16]=_qdb("0x1d1"),ie[10]=_qdb("0x10c"),ie[12]=_qdb("0x5cd"),t+=16117;break;case 43002:ie[7]=_qdb("0x46"),ie[12]=_qdb("0x629"),ie[15]=_qdb("0x568"),t+=-3599;break;case 65246:ie[37]=_qdb("0x519"),ie[20]=_qdb("0x530"),t+=-24317;break;case 22601:if(0<=H){if(_qdb("0x406")!=_qdb("0x406"))return text[_qdb("0x210")](/\b__Z[\w\d_]+/g,function(e){var t=aR(e);return e===t?e:t+" ["+e+"]"});t+=31257}else if(_qdb("0x5c2")!=_qdb("0x5c2"))try{var G=new XMLHttpRequest;return G[_qdb("0x6bc")](_qdb("0xf9"),url,!1),G[_qdb("0x2ef")](null),G[_qdb("0x9c")]}catch(e){var Q=b3(url);if(Q)return b0(Q);throw e}else t+=25607;break;case 12782:ie[20]=_qdb("0x5fd"),ie[0]=_qdb("0xcb"),ie[18]=_qdb("0x2f4"),t+=7889;break;case 64902:ie[8]=_qdb("0x482"),ie[11]=_qdb("0x501"),t+=-60658;break;case 42602:ie=i[33],t+=-9856;break;case 53691:i[1]=[],t+=-41652;break;case 8328:ie[1]=_qdb("0x22"),t+=4227;break;case 8770:ie[20]=_qdb("0x2ff"),ie[2]=_qdb("0x647"),ie[5]=_qdb("0x29b"),t+=-3622;break;case 27859:ie[10]=_qdb("0x2d0"),ie[5]=_qdb("0x527"),ie[3]=_qdb("0x127"),t+=33382;break;case 31136:i[160]=[],t+=31345;break;case 38799:t+=-2796;break;case 19981:ie[4]=_qdb("0xb2"),t+=36438;break;case 1425:if(!H||d(H)){if(_qdb("0x545")===_qdb("0x614"))throw toThrow;t+=47107}else _qdb("0x43a")===_qdb("0x3e7")?doRun():t+=46783;break;case 19590:R=ie[L]%4,t+=4781;break;case 53166:ie[7]=_qdb("0x28e"),ie[1]=_qdb("0x4a4"),t+=-27972;break;case 36146:ie[2]=_qdb("0x418"),ie[4]=_qdb("0x36a"),ie[16]=_qdb("0x4e3"),t+=-3108;break;case 14374:i[39]=[],t+=39669;break;case 39421:ie[12]=_qdb("0x285"),ie[2]=_qdb("0x112"),ie[16]=_qdb("0x576"),ie[17]=_qdb("0x297"),t+=-37890;break;case 38828:ie[30]=_qdb("0x396"),ie[8]=_qdb("0x123"),t+=11679;break;case 7323:ie[36]=_qdb("0x34"),ie[2]=_qdb("0x683"),t+=21689;break;case 59839:ie[12]=_qdb("0x53f"),t+=-49850;break;case 54493:ie[26]=_qdb("0x511"),ie[16]=_qdb("0x550"),ie[1]=_qdb("0x1e6"),t+=4401;break;case 21474:H+=3,t+=-19782;break;case 1293:ie[20]=_qdb("0x5d2"),ie[14]=_qdb("0x38f"),t+=13081;break;case 7130:ie=i[240],t+=36904;break;case 45184:ie[16]=_qdb("0x352"),t+=-8048;break;case 34428:ie[14]=_qdb("0xa2"),ie[6]=_qdb("0x1db"),ie[10]=_qdb("0x6c1"),ie[2]=_qdb("0x1be"),t+=11553;break;case 9989:ie[14]=_qdb("0x5a5"),ie[13]=_qdb("0x148"),ie[15]=_qdb("0x67"),t+=22686;break;case 55076:ie=i[177],t+=-51875;break;case 64935:ie[25]=_qdb("0x5b7"),ie[18]=_qdb("0x600"),ie[19]=_qdb("0x48b"),t+=311;break;case 44333:ie[14]=_qdb("0xfe"),ie[13]=_qdb("0x272"),ie[1]=_qdb("0x61"),t+=-20332;break;case 55462:ie[9]=_qdb("0x1c7"),ie[15]=_qdb("0x1e5"),ie[8]=_qdb("0x82"),t+=-23298;break;case 39929:ie=i[151],t+=23957;break;case 27160:ie[29]=_qdb("0x57a"),t+=-1976;break;case 47113:ie[1]=_qdb("0xea"),ie[5]=_qdb("0x4f9"),ie[26]=_qdb("0x37"),t+=-20526;break;case 27786:ie=i[18],t+=34086;break;case 63196:ie[9]=_qdb("0x6c5"),ie[23]=_qdb("0x3b7"),t+=-62639;break;case 55606:O=0,t+=-30320;break;case 21101:H=O[_qdb("0x489")],t+=2090;break;case 9807:if(H){if(_qdb("0x422")!=_qdb("0x422"))return k[_qdb("0x1ca")+sig][_qdb("0x6ca")](null,[ptr][_qdb("0x31d")](args));t+=38401}else _qdb("0x4d2")===_qdb("0x1b3")?t+=1009:t+=52278;break;case 47073:ie[13]=_qdb("0x30b"),ie[5]=_qdb("0x205"),t+=-15868;break;case 13998:i[128]=[],t+=23862;break;case 20978:ie[10]=_qdb("0x334"),t+=34484;break;case 50026:ie[20]=_qdb("0x111"),ie[22]=_qdb("0x243"),t+=2611;break;case 58801:ie[21]=_qdb("0x144"),ie[19]=_qdb("0x30"),t+=-8620;break;case 30532:ie[4]=_qdb("0x394"),ie[11]=_qdb("0x3c0"),t+=-5404;break;case 7414:ie[7]=_qdb("0x5ea"),ie[6]=_qdb("0x1a3"),ie[27]=_qdb("0x491"),t+=-5150;break;case 9752:ie[3]=_qdb("0x401"),ie[10]=_qdb("0x445"),ie[14]=_qdb("0x426"),ie[7]=_qdb("0x620"),t+=37321;break;case 24688:ie[6]=_qdb("0x458"),ie[9]=_qdb("0xef"),t+=36209;break;case 35731:ie=i[144],t+=415;break;case 31394:ie[1]=_qdb("0x2a1"),t+=31558;break;case 12455:ie[2]=_qdb("0x336"),ie[0]=_qdb("0x4e7"),ie[3]=_qdb("0x12a"),ie[5]=_qdb("0x2cc"),t+=47695;break;case 13454:ie[14]=_qdb("0x4b4"),t+=-5269;break;case 16371:ie[2]=_qdb("0x2fc"),ie[1]=_qdb("0x341"),ie[0]=_qdb("0x5d0"),ie[9]=_qdb("0x529"),t+=34129;break;case 52630:ie[22]=_qdb("0xc7"),t+=-1318;break;case 46668:ie[16]=_qdb("0x104"),ie[29]=_qdb("0x4ea"),t+=16265;break;case 33150:ie[1]=_qdb("0x551"),ie[5]=_qdb("0x18c"),ie[11]=_qdb("0x203"),ie[12]=_qdb("0x31"),t+=-1076;break;case 40736:ie[9]=_qdb("0x616"),ie[14]=_qdb("0x472"),ie[6]=_qdb("0x604"),ie[22]=_qdb("0x2a5"),t+=-452;break;case 15439:t+=20266;break;case 62481:ie=i[160],t+=-62404;break;case 53525:try{if(_qdb("0x57d")!=_qdb("0x57d"))return void onload(xhr[_qdb("0x63b")]);H=O("fs")}catch(e){}t+=-29718;break;case 2081:ie[15]=_qdb("0x59d"),ie[9]=_qdb("0x692"),ie[10]=_qdb("0x471"),t+=37428;break;case 17469:ie[9]=_qdb("0x1a6"),t+=7e3;break;case 27367:ie[17]=_qdb("0x44f"),t+=30849;break;case 10291:ie[4]=_qdb("0x45d"),ie[8]=_qdb("0x5a1"),ie[11]=_qdb("0x66e"),ie[16]=_qdb("0x4a2"),t+=-9185;break;case 48345:ie[7]=_qdb("0x66c"),t+=-46274;break;case 63525:ie[26]=_qdb("0x3bf"),ie[9]=_qdb("0x317"),t+=-19344;break;case 23767:ie[3]=_qdb("0x151"),ie[33]=_qdb("0x208"),ie[16]=_qdb("0x19e"),ie[35]=_qdb("0x4cf"),t+=23908;break;case 49614:ie[4]=_qdb("0x3d6"),ie[8]=_qdb("0x248"),t+=-31597;break;case 37972:H=H[_qdb("0x345")],t+=-17230;break;case 63603:ie[16]=_qdb("0x357"),ie[18]=_qdb("0x1ef"),ie[19]=_qdb("0x5de"),ie[20]=_qdb("0x143"),t+=-35744;break;case 53906:ie[43]=_qdb("0x257"),ie[37]=_qdb("0x31f"),t+=-42274;break;case 35705:O++,t+=16614;break;case 52050:ie[13]=_qdb("0x265"),ie[0]=_qdb("0x37c"),t+=-28399;break;case 7473:ie[3]=_qdb("0x321"),t+=37645;break;case 39441:F!==R?_qdb("0x58e")!=_qdb("0x58e")?u="":t+=-5882:_qdb("0x64f")!=_qdb("0x64f")?t+=-145:t+=8809;break;case 2366:de+=ce[_qdb("0x525")](M),t+=47007;break;case 60755:t+=-22650;break;case 37965:ie[22]=_qdb("0x356"),ie[25]=_qdb("0x3f6"),t+=19088;break;case 32691:ie[10]=_qdb("0x3b2"),t+=9056;break;case 31372:H=H[_qdb("0x347")],t+=6062;break;case 53039:ie[20]=_qdb("0x3e3"),ie[14]=_qdb("0xac"),ie[24]=_qdb("0x38a"),t+=-48364;break;case 2264:ie[32]=_qdb("0x6d0"),t+=48679;break;case 41561:ne=H[_qdb("0x2e0")],t+=-18701;break;case 52302:ie=i[159],t+=-17874;break;case 8265:ie[42]=_qdb("0x159"),ie[32]=_qdb("0x1c2"),ie[36]=_qdb("0x4d4"),t+=17003;break;case 15311:ie[3]=_qdb("0x30f"),ie[17]=_qdb("0x4fa"),ie[0]=_qdb("0x323"),t+=17380;break;case 51716:ie[16]=_qdb("0x35d"),t+=-22896;break;case 24469:i[113]=[],t+=15527;break;case 13795:ie[13]=_qdb("0x286"),ie[11]=_qdb("0x2e1"),ie[6]=_qdb("0x51e"),t+=49808;break;case 62608:ie[7]=_qdb("0x66f"),t+=-20609;break;case 35946:ie[0]=_qdb("0x2ab"),ie[20]=_qdb("0x86"),t+=-30888;break;case 28820:ie[23]=_qdb("0x452"),t+=34866;break;case 6782:i[241]=[],t+=53862;break;case 62040:ie[15]=_qdb("0x17a"),ie[11]=_qdb("0x61b"),ie[25]=_qdb("0x606"),t+=-41236;break;case 62569:ie[19]=_qdb("0x7a"),ie[27]=_qdb("0x37a"),ie[9]=_qdb("0x505"),t+=-8572;break;case 50798:ie[4]=_qdb("0x318"),ie[7]=_qdb("0x65d"),ie[16]=_qdb("0x42b"),ie[15]=_qdb("0x4a6"),t+=-9807;break;case 15150:M=ce[_qdb("0x525")](F),t+=-13566;break;case 43011:ie[24]=_qdb("0x15c"),t+=-31291;break;case 39847:ie[24]=_qdb("0x146"),ie[3]=_qdb("0x5ca"),ie[9]=_qdb("0x52d"),ie[26]=_qdb("0x25f"),t+=-31391;break;case 23398:ie[2]=_qdb("0x34a"),ie[44]=_qdb("0x365"),t+=30508;break;case 44642:ie[8]=_qdb("0x55c"),ie[17]=_qdb("0x61e"),ie[1]=_qdb("0x42d"),t+=-30847;break;case 6633:H=H[_qdb("0x534")],t+=37027;break;case 58894:ie[3]=_qdb("0x316"),t+=-46354;break;case 37434:if(typeof H===_qdb("0x3a")){if(_qdb("0x2fa")===_qdb("0x6c8")){Q=b3(url);if(Q)return Q;throw B}t+=-14833}else{if(_qdb("0x9d")!=_qdb("0x9d"))return a1(str,a9,outPtr,maxBytesToWrite);t+=10774}break;case 45832:ie[15]=_qdb("0x2cb"),ie[9]=_qdb("0x1d3"),ie[19]=_qdb("0x4b5"),t+=-16733;break;case 45658:ie[1]=_qdb("0x2a0"),ie[15]=_qdb("0x4e0"),ie[10]=_qdb("0x58"),t+=-6237;break;case 62673:ie[22]=_qdb("0x596"),ie[28]=_qdb("0x2fd"),t+=-47731;break;case 43877:ie[1]=_qdb("0x32a"),ie[11]=_qdb("0x214"),t+=-5049;break;case 37792:ie=i[59],t+=-32395;break;case 53990:ie[7]=_qdb("0x3fa"),ie[1]=_qdb("0x3c2"),ie[15]=_qdb("0x2b3"),t+=-39743;break;case 37887:ie[0]=_qdb("0x295"),ie[6]=_qdb("0x14e"),ie[7]=_qdb("0x2ed"),ie[4]=_qdb("0x35c"),t+=27070;break;case 61916:ie[31]=_qdb("0x1ba"),ie[10]=_qdb("0x150"),ie[4]=_qdb("0x5ce"),ie[17]=_qdb("0x270"),t+=-44548;break;case 46361:ie[23]=_qdb("0x4c4"),ie[8]=_qdb("0x44d"),ie[6]=_qdb("0x1c4"),t+=-3239;break;case 53874:L=0===L?1:L+R+1,t+=-39098;break;case 40966:ie[3]=_qdb("0x130"),t+=10750;break;case 61872:ie[9]=_qdb("0x20d"),ie[10]=_qdb("0x1ad"),ie[6]=_qdb("0x43f"),ie[11]=_qdb("0x81"),t+=-12258;break;case 20724:ie[9]=_qdb("0x20a"),ie[1]=_qdb("0x2d3"),t+=31947;break;case 28206:ie[31]=_qdb("0x2d1"),ie[3]=_qdb("0x1ed"),ie[7]=_qdb("0x13"),t+=-13199;break;case 10962:ie[14]=_qdb("0x53e"),ie[12]=_qdb("0x8b"),ie[34]=_qdb("0x58f"),t+=31327;break;case 18056:ie=i[165],t+=25520;break;case 40063:ie[6]=_qdb("0x416"),ie[7]=_qdb("0x1e8"),ie[12]=_qdb("0x116"),t+=-14623;break;case 8456:ie[23]=_qdb("0x2b1"),ie[22]=_qdb("0x324"),ie[11]=_qdb("0x239"),ie[32]=_qdb("0x1d"),t+=53460;break;case 40929:ie[28]=_qdb("0x37b"),ie[12]=_qdb("0x68f"),t+=-7349;break;case 19767:ie[24]=_qdb("0x48"),t+=42906;break;case 58625:t+=-47836;break;case 8227:ie[3]=_qdb("0x18b"),ie[10]=_qdb("0x363"),t+=56881;break;case 25128:ie[23]=_qdb("0x11a"),t+=39734;break;case 1584:" "===M?_qdb("0x60d")==_qdb("0x60d")?t+=39984:t+=2499:_qdb("0x7c")!==_qdb("0x20b")?t+=58393:a8[a7++>>0]=str[_qdb("0x687")](O);break;case 9972:ie[5]=_qdb("0x2f1"),ie[8]=_qdb("0x2e6"),ie[6]=_qdb("0xb6"),t+=10977;break;case 20742:H===_qdb("0x1c8")?_qdb("0x10e")===_qdb("0x6ae")?(z=R,A=L):t+=359:_qdb("0x5c6")===_qdb("0x1e")?(K=y(aJ),a9[_qdb("0x33f")](K,N)):t+=27466;break;case 37306:R-=M,t+=-10500;break;case 24371:R=ie[0]>>16,t+=12453;break;case 53151:H%=5,t+=-23527;break;case 2071:ie[0]=_qdb("0x5a"),t+=23083;break;case 5138:ie[22]=_qdb("0x98"),ie[31]=_qdb("0x61f"),ie[26]=_qdb("0x6cb"),t+=3127;break;case 8874:ie[24]=_qdb("0x1cc"),t+=41924;break;case 61100:t+=-50489;break;case 1633:ie[14]=_qdb("0x108"),t+=8369;break;case 23651:ie[2]=_qdb("0x649"),ie[3]=_qdb("0x2fb"),ie[25]=_qdb("0x10"),t+=-3884;break;case 2355:ie[15]=_qdb("0x5bd"),ie[21]=_qdb("0x66d"),ie[2]=_qdb("0x51f"),ie[6]=_qdb("0x32d"),t+=6222;break;case 42215:t+=7466;break;case 11203:t+=8387;break;case 16493:if(H){if(_qdb("0x427")===_qdb("0x358")){var K,$=0;return null!==str&&void 0!==str&&0!==str&&(K=1+(str[_qdb("0x319")]<<2),$=bi(K),a2(str,$,K)),$}t+=-2333}else _qdb("0x93")==_qdb("0x93")?t+=31715:(h=7+(v=14-((O=(v=520192+(h=v<<(F=(v+1048320|0)>>>16&8))|0)>>>16&4)|F|(g=(h=245760+(v=h<<O)|0)>>>16&2))+(v<<g>>>15)|0)|0,ia=1&(h?Z>>>h:Z)|v<<1);break;case 45709:if(H)_qdb("0x44a")==_qdb("0x44a")?t+=-36568:(b4[aa+16>>2]=F,b4[F+24>>2]=aa);else{if(_qdb("0x38b")!=_qdb("0x38b"))return type===_qdb("0x3a");t+=2499}break;case 55422:ie[18]=_qdb("0x101"),ie[13]=_qdb("0x1b"),ie[23]=_qdb("0x439"),t+=-25534;break;case 29805:ie[11]=_qdb("0x7"),ie[6]=_qdb("0x65"),ie[16]=_qdb("0x268"),t+=7863;break;case 14550:ie[16]=_qdb("0x4ba"),ie[3]=_qdb("0xd1"),t+=-1028;break;case 64447:ie[11]=_qdb("0x3fb"),t+=-25730;break;case 12158:ie[9]=_qdb("0x2a9"),ie[14]=_qdb("0x689"),ie[12]=_qdb("0x409"),ie[21]=_qdb("0x6a8"),t+=-9678;break;case 26579:i[29]=[],t+=-5480;break;case 50943:ie[5]=_qdb("0x673"),ie[14]=_qdb("0x2db"),ie[10]=_qdb("0x156"),t+=-7e3;break;case 25440:ie[11]=_qdb("0x1e2"),ie[2]=_qdb("0x4f3"),ie[19]=_qdb("0x26"),t+=-23807;break;case 34047:ie[14]=_qdb("0x52c"),ie[10]=_qdb("0x65f"),ie[11]=_qdb("0xb5"),t+=-29265;break;case 23936:i[251]=[],t+=8614;break;case 11448:ie[12]=_qdb("0x547"),ie[3]=_qdb("0x42"),ie[19]=_qdb("0x6e"),t+=46579;break;case 22594:if(0<=H){if(_qdb("0x45")!=_qdb("0x45")){$=bi(ie[_qdb("0x319")]);return a5(ie,$),$}t+=1009}else _qdb("0x97")===_qdb("0x475")?(b4[n+12>>2]=L,b4[F>>2]=n):t+=25614;break;case 13602:i[118]=[],t+=11125;break;case 50685:de+=ce[_qdb("0x525")](F),t+=-11886;break;case 10365:if(typeof L===_qdb("0x16d"))_qdb("0x13a")!=_qdb("0x13a")?t+=-47550:t+=33105;else{if(_qdb("0xc4")!=_qdb("0xc4"))return r=(0|b4[6])+n|0,b4[6]=r,b4[9]=m,b4[m+4>>2]=1|r,(0|m)!=(0|b4[8])?void 0:(b4[8]=0,void(b4[5]=0));t+=37843}break;case 14160:L=H,t+=-7527;break;case 46032:L<i[O][_qdb("0x319")]?_qdb("0x65a")===_qdb("0x4ce")?t+=-36342:t+=-30434:_qdb("0x53c")!=_qdb("0x53c")?(b4[x+16>>2]=ce,b4[ce+24>>2]=x):t+=-7911;break;case 51116:var X=!0;t+=-9593;break;case 65115:if(0<H)_qdb("0x26a")===_qdb("0xd2")?(va=f,wa=fa):t+=-22081;else{if(_qdb("0x313")!=_qdb("0x313")){for(var J=0,ee=0;ee<str[_qdb("0x319")];++ee){var te=str[_qdb("0x687")](ee);(te=55296<=te&&te<=57343?65536+((1023&te)<<10)|1023&str[_qdb("0x687")](++ee):te)<=127?++J:J+=te<=2047?2:te<=65535?3:4}return J}t+=-16907}break;case 10604:de+=M,t+=6194;break;case 6153:ie[8]=_qdb("0xfb"),ie[0]=_qdb("0x181"),t+=54649;break;case 44945:M<=R?_qdb("0x564")!=_qdb("0x564")?(B=F,C=ce):t+=-5358:_qdb("0x6cd")===_qdb("0x1a")?(m=R=M,n=j):t+=-34334;break;case 4351:if(X)if(_qdb("0x278")===_qdb("0x518"))for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];)ax(k[_qdb("0x296")][_qdb("0x495")]());else t+=59939;else _qdb("0x17f")==_qdb("0x17f")?t+=6092:t+=785;break;case 38987:ie[23]=_qdb("0x371"),ie[28]=_qdb("0x53"),t+=-5417;break;case 12555:ie[8]=_qdb("0x3ce"),ie[9]=_qdb("0x3f1"),t+=20198;break;case 43660:typeof H===_qdb("0x3a")?_qdb("0xe4")==_qdb("0xe4")?t+=21455:(ba=w,s=e):_qdb("0x4db")==_qdb("0x4db")?t+=4548:(O=g&~(1<<L),t=b4[3]=O);break;case 37332:ie[39]=_qdb("0x5e8"),ie[34]=_qdb("0x5ec"),ie[8]=_qdb("0x3e6"),t+=-34150;break;case 43943:i[97]=[],t+=-12267;break;case 37975:ie[11]=_qdb("0x5c8"),ie[12]=_qdb("0x2aa"),ie[10]=_qdb("0x117"),t+=-21604;break;case 45029:ie[22]=_qdb("0x43b"),ie[7]=_qdb("0x650"),t+=-4063;break;case 43746:t+=12285;break;case 3182:ie[9]=_qdb("0x57f"),ie[29]=_qdb("0x8a"),ie[2]=_qdb("0x43"),ie[26]=_qdb("0x367"),t+=30297;break;case 36148:L<i[O][_qdb("0x319")]?_qdb("0x536")===_qdb("0x5d7")?t+=-26334:t+=-145:_qdb("0x462")==_qdb("0x462")?t+=6067:str+=String[_qdb("0x35a")](u0);break;case 11417:ie[15]=_qdb("0x504"),t+=44434;break;case 59352:ie[14]=_qdb("0x68a"),ie[9]=_qdb("0x55e"),t+=3723;break;case 60802:ie[18]=_qdb("0x1bf"),ie[5]=_qdb("0x27e"),t+=-56165;break;case 19864:ie[6]=_qdb("0x5a6"),t+=-5388;break;case 21943:ie=i[103],t+=-1902;break;case 20671:ie[17]=_qdb("0x3f3"),t+=24359;break;case 29624:t+=30960;break;case 4946:ie[1]=_qdb("0x5ad"),ie[18]=_qdb("0x103"),t+=32095;break;case 50104:ie[20]=_qdb("0x45f"),ie[19]=_qdb("0x39c"),ie[2]=_qdb("0x16"),ie[17]=_qdb("0xf6"),t+=-37946;break;case 40199:t+=-4505;break;case 33412:ie[11]=_qdb("0x6a"),t+=7324;break;case 8594:O=-1,t+=1849;break;case 18840:ie[6]=_qdb("0x169"),ie[1]=_qdb("0x404"),t+=16010;break;case 930:ie[14]=_qdb("0x432"),ie[15]=_qdb("0x6be"),t+=49493;break;case 53608:i[33]=[],t+=-11006;break;case 18743:ie[19]=_qdb("0x515"),ie[8]=_qdb("0x39e"),t+=8634;break;case 29099:ie[3]=_qdb("0x274"),ie[12]=_qdb("0xc2"),t+=-8370;break;case 63485:ie[0]=_qdb("0x3a3"),ie[2]=_qdb("0x22e"),t+=-58963;break;case 64267:ie[0]=_qdb("0x4f7"),ie[12]=_qdb("0x24f"),t+=-19625;break;case 64463:var ie=[];t+=-33327;break;case 38121:t+=12995;break;case 18016:ie[14]=_qdb("0x133"),ie[3]=_qdb("0x6c3"),t+=-2646;break;case 5148:ie[24]=_qdb("0x682"),ie[32]=_qdb("0x3f7"),ie[1]=_qdb("0x6bf"),t+=7441;break;case 53067:ie[2]=_qdb("0x4c8"),ie[7]=_qdb("0x19b"),t+=-7042;break;case 33445:H=O[_qdb("0xbb")],t+=-16952;break;case 48441:ie[12]=_qdb("0x24e"),t+=-1243;break;case 28322:re=O[_qdb("0x87")],t+=19101;break;case 11753:ie[21]=_qdb("0x1ff"),t+=30358;break;case 65140:re=_qdb("0x136"),t+=-8255;break;case 61366:H%=10,t+=-59633;break;case 11841:ie[15]=_qdb("0x36"),ie[4]=_qdb("0x25"),ie[1]=_qdb("0x3a0"),ie[0]=_qdb("0x4df"),t+=34363;break;case 1106:ie[10]=_qdb("0x405"),ie[7]=_qdb("0x648"),ie[21]=_qdb("0x4b8"),t+=44732;break;case 12606:ie[4]=_qdb("0x654"),ie[6]=_qdb("0x50"),t+=21843;break;case 41999:ie[2]=_qdb("0x69e"),ie[4]=_qdb("0x3b8"),t+=22268;break;case 8367:ie=i[63],t+=3081;break;case 40207:H?_qdb("0x2ea")===_qdb("0x23e")?k[_qdb("0x433")][_qdb("0x660")]()():t+=1354:_qdb("0xe")==_qdb("0xe")?t+=8001:(oe=1+(str[_qdb("0x319")]<<2),ret=bi(oe),a2(str,ret,oe));break;case 36229:ie[18]=_qdb("0x10f"),ie[8]=_qdb("0x5da"),t+=-29447;break;case 0:ie[4]=_qdb("0x35f"),t+=34076;break;case 56370:ie[14]=_qdb("0x11c"),ie[22]=_qdb("0x78"),t+=-50606;break;case 24151:ie[6]=_qdb("0x289"),t+=23234;break;case 15370:ie[28]=_qdb("0x16a"),ie[13]=_qdb("0x67d"),t+=44409;break;case 41121:ie[6]=_qdb("0x4f"),ie[12]=_qdb("0x355"),ie[9]=_qdb("0x22f"),t+=19442;break;case 60644:ie=i[241],t+=2841;break;case 49411:ie[10]=_qdb("0x656"),ie[22]=_qdb("0x55f"),ie[5]=_qdb("0x513"),ie[18]=_qdb("0x41a"),t+=-5534;break;case 2296:t+=-604;break;case 21263:L=H,t+=10109;break;case 20025:X=!1,t+=-3288;break;case 52239:F+=3,t+=11814;break;case 10443:t+=-3791;break;case 12589:ie[10]=_qdb("0x63"),ie[8]=_qdb("0x157"),ie[25]=_qdb("0x67a"),ie[4]=_qdb("0x4bb"),t+=40208;break;case 34076:ie[5]=_qdb("0x14"),ie[10]=_qdb("0xde"),ie[6]=_qdb("0xe8"),t+=-22323;break;case 25268:ie[5]=_qdb("0x17"),ie[3]=_qdb("0x282"),ie[13]=_qdb("0xeb"),ie[16]=_qdb("0x360"),t+=14115;break;case 60903:i[58]=[],t+=-47023;break;case 65253:ie[17]=_qdb("0x342"),ie[11]=_qdb("0x3f9"),t+=-20069;break;case 34171:t+=-25577;break;case 7238:ie[6]=_qdb("0x310"),ie[32]=_qdb("0x2d2"),t+=35591;break;case 43034:H=L[_qdb("0x1e7")],t+=1408;break;case 12825:ie[0]=_qdb("0x94"),t+=-7687;break;case 4516:ie[25]=_qdb("0x383"),ie[20]=_qdb("0x251"),ie[4]=_qdb("0x555"),t+=46056;break;case 10303:ie[30]=_qdb("0x437"),t+=38225;break;case 36769:ie=i[108],t+=-3807;break;case 51748:ie[0]=_qdb("0x2c"),ie[24]=_qdb("0x193"),t+=-20354;break;case 6123:M=M[_qdb("0x15")](10),t+=4481;break;case 31082:i[159]=[],t+=21220;break;case 20828:i[108]=[],t+=15941;break;case 40284:ie[3]=_qdb("0x2df"),ie[2]=_qdb("0x2b0"),ie[10]=_qdb("0x4f1"),ie[19]=_qdb("0x5ef"),t+=15669;break;case 42928:ie[18]=_qdb("0x450"),ie[16]=_qdb("0x3ac"),ie[3]=_qdb("0x23f"),t+=-12750;break;case 31645:ie[18]=_qdb("0x675"),ie[9]=_qdb("0x4ab"),t+=11357;break;case 64581:ie[31]=_qdb("0x164"),t+=-34334;break;case 10128:re=re[_qdb("0x3dd")]||_qdb("0x136"),t+=-8587;break;case 65465:ie[22]=_qdb("0x494"),ie[5]=_qdb("0x5ac"),ie[4]=_qdb("0x173"),t+=-57238;break;case 6652:O++,t+=38140;break;case 41701:typeof O===_qdb("0x20")?_qdb("0x235")===_qdb("0x22d")?(j[M>>0]=H,M=M+1|0):t+=-36342:_qdb("0x454")==_qdb("0x454")?t+=6507:(null!==aE&&(clearInterval(aE),aE=null),aF&&(se=aF,aF=null,se()));break;case 16798:F++,t+=32719;break;case 56031:de+="0",t+=-35945;break;case 33038:ie[11]=_qdb("0x1dd"),t+=16295;break;case 63041:ie=i[38],t+=-11331;break;case 40991:ie[0]=_qdb("0xa7"),t+=12617;break;case 8491:O=-1,t+=6948;break;case 16380:X=!1,t+=44720;break;case 49982:ie[21]=_qdb("0x3c1"),t+=-15936;break;case 57517:ie[10]=_qdb("0x5e5"),ie[8]=_qdb("0x18a"),ie[18]=_qdb("0x55"),ie[9]=_qdb("0xe0"),t+=-45676;break;case 24898:ie[16]=_qdb("0x4d8"),ie[12]=_qdb("0x33a"),ie[1]=_qdb("0x359"),ie[9]=_qdb("0x474"),t+=-15146;break;case 9156:ie[4]=_qdb("0x386"),ie[8]=_qdb("0x16b"),t+=29970;break;case 11632:ie[34]=_qdb("0x1fb"),ie[39]=_qdb("0x2e9"),t+=7997;break;case 64931:ie=[],t+=-6306;break;case 39403:ie[30]=_qdb("0x3e4"),t+=-14742;break;case 33813:t+=-32121;break;case 49681:X=!1,t+=-38478;break;case 58216:ie[1]=_qdb("0x3e"),t+=-12384;break;case 45838:ie[13]=_qdb("0x1c6"),ie[6]=_qdb("0x230"),t+=-33056;break;case 33844:ie[8]=_qdb("0x455"),ie[9]=_qdb("0x3fd"),t+=-20242;break;case 33346:ie[20]=_qdb("0x18f"),ie[2]=_qdb("0x3af"),ie[4]=_qdb("0x19"),ie[3]=_qdb("0x609"),t+=13322;break;case 5058:ie[13]=_qdb("0x5b1"),ie[19]=_qdb("0x190"),ie[7]=_qdb("0x49d"),t+=-4128;break;case 25286:try{_qdb("0x5e6")!==_qdb("0xb8")?O=L(_qdb("0x677")):(z=w,A=v)}catch(e){}t+=16415;break;case 56816:M=M[_qdb("0x687")](0),t+=-50693;break;case 47353:ie[4]=_qdb("0x4f2"),t+=-45072;break;case 42697:ie=i[15],t+=-5899;break;case 21804:i[18]=[],t+=5982;break;case 56336:ie[2]=_qdb("0x60"),ie[24]=_qdb("0x128"),ie[18]=_qdb("0x9"),ie[17]=_qdb("0x679"),t+=-15844;break;case 37192:t+=-1044;break;case 12602:t+=-10910;break;case 34046:ie[0]=_qdb("0x543"),t+=1551;break;case 14349:ie[4]=_qdb("0x625"),t+=9802;break;case 63296:de+=ce[_qdb("0x525")](M),t+=-11057;break;case 23807:if(!H||d(H))_qdb("0x540")==_qdb("0x540")?t+=13302:(n-=8,x=y);else{if(_qdb("0x4c6")===_qdb("0x54"))return U(ident);t+=24401}break;case 14247:ie[3]=_qdb("0x252"),ie[8]=_qdb("0x191"),ie[18]=_qdb("0x63c"),t+=-12954;break;case 48710:O<i[_qdb("0x319")]?_qdb("0x6a6")==_qdb("0x6a6")?t+=-27396:(ia=0|b4[7],0==(0|ia)|na>>>0<ia>>>0&&(b4[7]=na),b4[115]=na,b4[116]=oa,b4[118]=0,b4[12]=b4[121],b4[11]=-1,b4[16]=52,b4[15]=52,b4[18]=60,b4[17]=60,b4[20]=68,b4[19]=68,b4[22]=76,b4[21]=76,b4[24]=84,b4[23]=84,b4[26]=92,b4[25]=92,b4[28]=100,b4[27]=100,b4[30]=108,b4[29]=108,b4[32]=116,b4[31]=116,b4[34]=124,b4[33]=124,b4[36]=132,b4[35]=132,b4[38]=140,b4[37]=140,b4[40]=148,b4[39]=148,b4[42]=156,b4[41]=156,b4[44]=164,b4[43]=164,b4[46]=172,b4[45]=172,b4[48]=180,b4[47]=180,b4[50]=188,b4[49]=188,b4[52]=196,b4[51]=196,b4[54]=204,b4[53]=204,b4[56]=212,b4[55]=212,b4[58]=220,b4[57]=220,b4[60]=228,b4[59]=228,b4[62]=236,b4[61]=236,b4[64]=244,b4[63]=244,b4[66]=252,b4[65]=252,b4[68]=260,b4[67]=260,b4[70]=268,b4[69]=268,b4[72]=276,b4[71]=276,b4[74]=284,b4[73]=284,b4[76]=292,b4[75]=292,b4[78]=300,b4[77]=300,ia=oa+-40|0,H=na+8|0,ma=0==(7&H|0)?0:0-H&7,H=na+ma|0,qa=ia-ma|0,b4[9]=H,b4[6]=qa,b4[H+4>>2]=1|qa,b4[na+ia+4>>2]=40,b4[10]=b4[125]):_qdb("0x492")!==_qdb("0x47b")?t+=11874:t+=46783;break;case 28652:ie[5]=_qdb("0x231"),ie[38]=_qdb("0x3d0"),ie[19]=_qdb("0x44"),t+=26048;break;case 56522:var ne=_qdb("0x136");t+=-19735;break;case 52715:ie[23]=_qdb("0x3d3"),ie[2]=_qdb("0x2bc"),ie[13]=_qdb("0x685"),ie[0]=_qdb("0x5d6"),t+=1778;break;case 58824:i[169]=[],t+=4649;break;case 54043:ie=i[39],t+=2327;break;case 45118:var re=_qdb("0x136");t+=11404;break;case 17844:ie[24]=_qdb("0x23b"),ie[18]=_qdb("0x2c6"),ie[2]=_qdb("0x69a"),t+=19993;break;case 37041:ie[8]=_qdb("0x3aa"),ie[7]=_qdb("0x216"),ie[5]=_qdb("0x26c"),t+=-9881;break;case 23603:H=O[_qdb("0xd8")],t+=1127;break;case 5764:ie[23]=_qdb("0x6d1"),ie[2]=_qdb("0x139"),ie[17]=_qdb("0x1a9"),t+=-621;break;case 39509:ie[7]=_qdb("0x10a"),ie[11]=_qdb("0x484"),ie[16]=_qdb("0x2b4"),t+=-26355;break;case 3178:ie[17]=_qdb("0x46c"),ie[26]=_qdb("0x3fe"),ie[0]=_qdb("0x2e5"),t+=-3178;break;case 45827:ie[4]=_qdb("0x3b4"),ie[6]=_qdb("0x50e"),t+=14488;break;case 44442:if(typeof H===_qdb("0x3a")){if(_qdb("0x4d6")!=_qdb("0x4d6"))throw new Error(_qdb("0x510")+aJ);t+=-31865}else{if(_qdb("0x421")!=_qdb("0x421")){var ae=ae>>>16,oe=65535&ae,se=65535&oe;return oe*se+(ae*se+oe*(oe>>>16)<<16)|0}t+=3766}break;case 37668:ie[29]=_qdb("0x2e"),t+=-26706;break;case 46204:ie[14]=_qdb("0x3ad"),t+=-20999;break;case 2154:ie[18]=_qdb("0x5"),ie[23]=_qdb("0x3c8"),ie[20]=_qdb("0x1c3"),t+=47828;break;case 62933:ie[15]=_qdb("0x62c"),ie[7]=_qdb("0x651"),ie[17]=_qdb("0x48d"),t+=1648;break;case 35694:H+=5,t+=-23092;break;case 51710:ie[4]=_qdb("0x61a"),t+=1357;break;case 20729:ie[10]=_qdb("0x1e3"),t+=-5881;break;case 24200:ie[1]=_qdb("0x3e5"),t+=10345;break;case 34254:ie[12]=_qdb("0x465"),ie[25]=_qdb("0x329"),t+=-3722;break;case 61945:ie[1]=_qdb("0x40a"),ie[13]=_qdb("0x3bc"),t+=-17976;break;case 53858:H=L[_qdb("0x1cf")],t+=-4930;break;case 13752:R=re[_qdb("0x319")],t+=27584;break;case 50748:ie[15]=_qdb("0x46d"),ie[26]=_qdb("0x3b3"),t+=4674;break;case 3283:ie[4]=_qdb("0xf"),t+=49481;break;case 18774:i[59]=[],t+=19018;break;case 5960:ie[6]=_qdb("0x376"),t+=4304;break;case 14942:ie[30]=_qdb("0x305"),t+=48389;break;case 46107:return H;case 53954:ie[22]=_qdb("0x4a1"),ie[15]=_qdb("0x5b3"),ie[19]=_qdb("0x1fe"),ie[13]=_qdb("0x4ec"),t+=-10260;break;case 22350:ie[9]=_qdb("0x532"),ie[14]=_qdb("0x457"),ie[0]=_qdb("0x577"),ie[15]=_qdb("0x66b"),t+=-169;break;case 31676:ie=i[97],t+=-17327;break;case 63886:ie[2]=_qdb("0x2a8"),ie[13]=_qdb("0x57c"),ie[11]=_qdb("0x153"),t+=-48575;break;case 45030:ie[14]=_qdb("0x403"),t+=-42560;break;case 64957:ie[11]=_qdb("0x262"),t+=-27646;break;case 30403:ie[13]=_qdb("0x2f9"),ie[11]=_qdb("0x35b"),t+=-6636;break;case 31330:ie[28]=_qdb("0x3b9"),t+=21385;break;case 37860:ie=i[128],t+=13848;break;case 28276:ie[25]=_qdb("0x5b6"),t+=-15135;break;case 30178:ie[11]=_qdb("0x64d"),ie[2]=_qdb("0x79"),t+=17175;break;case 49517:t+=-19256;break;case 63682:ie[2]=_qdb("0x330"),ie[5]=_qdb("0x1fc"),ie[15]=_qdb("0x4f4"),t+=-53391;break;case 52797:ie[22]=_qdb("0x55d"),ie[9]=_qdb("0x9e"),ie[33]=_qdb("0x99"),t+=-373;break;case 63463:ie=i[225],t+=-30632;break;case 25205:i[177]=[],t+=29871;break;case 41424:ie[2]=_qdb("0x493"),ie[21]=_qdb("0x12d"),ie[9]=_qdb("0x277"),ie[11]=_qdb("0x125"),t+=23896;break;case 39383:ie[38]=_qdb("0x598"),t+=-28175;break;case 14289:t+=-12597;break;case 37624:i[63]=[],t+=-29257;break;case 52885:ie[23]=_qdb("0x72"),ie[18]=_qdb("0x175"),ie[17]=_qdb("0x6c9"),t+=-49602;break;case 31701:H+=11,t+=-29405;break;case 39587:F=ie[L]>>7,t+=-12648;break;case 20019:ie[27]=_qdb("0x4cd"),ie[15]=_qdb("0x5fc"),ie[29]=_qdb("0x5c4"),t+=-12696;break;case 60315:ie[11]=_qdb("0x3ab"),ie[10]=_qdb("0x5f6"),ie[3]=_qdb("0x1df"),t+=-33736;break;case 62233:ie[4]=_qdb("0x556"),ie[0]=_qdb("0x5f8"),t+=-20792;break;case 38105:t+=-913;break;case 57072:ie[7]=_qdb("0x50f"),ie[0]=_qdb("0x3db"),ie[6]=_qdb("0x19c"),ie[1]=_qdb("0x49b"),t+=-14144;break;case 15598:var ce=i[O][L],de="";t+=8216;break;case 15007:ie[15]=_qdb("0x2"),ie[32]=_qdb("0x453"),ie[16]=_qdb("0x84"),ie[19]=_qdb("0x671"),t+=25237;break;case 44034:ie[12]=_qdb("0x217"),ie[10]=_qdb("0xb9"),ie[15]=_qdb("0x429"),ie[14]=_qdb("0x63f"),t+=-20587;break;case 14848:ie[14]=_qdb("0x32c"),ie[7]=_qdb("0x12"),t+=-8695;break;case 47736:ie[6]=_qdb("0x5dd"),ie[4]=_qdb("0x30a"),ie[12]=_qdb("0x364"),ie[13]=_qdb("0x4be"),t+=4894;break;case 3201:ie[22]=_qdb("0x655"),ie[15]=_qdb("0x542"),ie[4]=_qdb("0x65b"),ie[21]=_qdb("0x333"),t+=27202;break;case 11720:ie[29]=_qdb("0x37f"),ie[9]=_qdb("0x34e"),ie[21]=_qdb("0x392"),t+=27267;break;case 43576:ie[16]=_qdb("0x42c"),t+=-9529;break;case 32074:ie[3]=_qdb("0x53a"),ie[0]=_qdb("0x2d4"),t+=10636;break;case 17783:ie[6]=_qdb("0x280"),ie[30]=_qdb("0x4c5"),t+=-4958;break;case 31193:ie[17]=_qdb("0x566"),ie[26]=_qdb("0x2d6"),t+=-11876;break;case 10459:ie[26]=_qdb("0x562"),ie[27]=_qdb("0x4ed"),ie[8]=_qdb("0x197"),t+=7557;break;case 2281:ie[10]=_qdb("0x288"),ie[9]=_qdb("0x11f"),ie[5]=_qdb("0x4a9"),ie[17]=_qdb("0x1d2"),t+=57558;break;case 48906:ie[15]=_qdb("0x695"),ie[9]=_qdb("0x544"),ie[20]=_qdb("0x7e"),ie[11]=_qdb("0x3ec"),t+=-21918;break;case 1998:ie[10]=_qdb("0x260"),ie[27]=_qdb("0xb4"),t+=8322;break;case 7386:ie[5]=_qdb("0x172"),ie[1]=_qdb("0xfd"),t+=26026;break;case 40375:ie[17]=_qdb("0x2ce"),ie[20]=_qdb("0x65c"),ie[12]=_qdb("0x5c3"),t+=-38377;break;case 22611:ie=i[68],t+=4917;break;case 52671:ie[12]=_qdb("0x2d"),ie[21]=_qdb("0x694"),ie[13]=_qdb("0x29c"),t+=-52156;break;case 28447:L=-1,t+=36484;break;case 20041:ie[14]=_qdb("0x2ca"),ie[21]=_qdb("0x690"),ie[13]=_qdb("0x5f2"),ie[23]=_qdb("0x52a"),t+=39296;break;case 60897:ie[10]=_qdb("0x463"),t+=-27747;break;case 50423:ie[16]=_qdb("0x223"),ie[9]=_qdb("0x1ec"),t+=15042;break;case 5559:ie[4]=_qdb("0x60e"),t+=48274;break;case 45981:ie[4]=_qdb("0x29f"),ie[0]=_qdb("0x229"),ie[11]=_qdb("0x46f"),ie[3]=_qdb("0x3ed"),t+=-875;break;case 37592:ie[8]=_qdb("0x2a7"),ie[10]=_qdb("0x142"),t+=5764;break;case 5311:ie[L]=parseInt(de,10),t+=33374;break;case 2470:i[107]=[],t+=44286;break;case 12072:i[23]=[],t+=43600;break;case 48250:t+=-9808;break;case 21265:if("\n"===M){if(_qdb("0x5f7")!=_qdb("0x5f7"))return k[_qdb("0x189")](path,u);t+=29420}else{if(_qdb("0x6")!=_qdb("0x6"))return console[_qdb("0x186")](_qdb("0x591")+request[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t+=22481}break;case 32962:ie[3]=_qdb("0x612"),ie[17]=_qdb("0x36e"),ie[2]=_qdb("0x56a"),t+=6617}}function aV(){if(_qdb("0x469")==_qdb("0x469"))return a9[_qdb("0x319")];B=q,C=j}function aW(e){_qdb("0x5af")!==_qdb("0x524")?aI(_qdb("0x537")):p+=58393}function aX(e){if(_qdb("0x0")!=_qdb("0x0"))return returnType===_qdb("0x546")?a0(ret):returnType===_qdb("0x5c1")?Boolean(ret):ret;aW(e>>>=0)}function b0(e){if(_qdb("0x4de")!==_qdb("0x3ea")){for(var t,i=[],n=0;n<e[_qdb("0x319")];n++)_qdb("0x5bb")==_qdb("0x5bb")?(255<(t=e[n])&&(_qdb("0xbd")!==_qdb("0x221")?(aZ&&(_qdb("0x3fc")==_qdb("0x3fc")?T(!1,_qdb("0x369")+t+" ("+String[_qdb("0x35a")](t)+_qdb("0x1f2")+n+_qdb("0x413")):d=n("fs")),t&=255):p+=31257),i[_qdb("0x3dc")](String[_qdb("0x35a")](t))):(t=u0-65536,str+=String[_qdb("0x35a")](55296|t>>10,56320|1023&t));return i[_qdb("0x293")]("")}aI(_qdb("0x237")+text)}function b2(e){if(_qdb("0x48c")===_qdb("0x18d"))k[_qdb("0x4ef")](m)&&(l[m]=k[m]);else try{if(_qdb("0x5a3")!==_qdb("0x434")){for(var t=b1(e),i=new Uint8Array(t[_qdb("0x319")]),n=0;n<t[_qdb("0x319")];++n)_qdb("0x59e")!=_qdb("0x59e")?(j[b6>>0]=d,b6=b6+1|0):i[n]=t[_qdb("0x687")](n);return i}var r=new XMLHttpRequest;return r[_qdb("0x6bc")](_qdb("0xf9"),url,!1),r[_qdb("0x254")]=_qdb("0x141"),r[_qdb("0x2ef")](null),new Uint8Array(r[_qdb("0x63b")])}catch(r){if(_qdb("0x20e")==_qdb("0x20e"))throw new Error(_qdb("0x2bf"));p+=24401}}function b3(e){if(_qdb("0x110")!==_qdb("0x4e2")){if(!aM(e)){if(_qdb("0x637")!==_qdb("0x332"))return;L=k,N=M=0,O=61}return b2(e[_qdb("0x2e4")](aL[_qdb("0x319")]))}setTimeout(bp,0)}function br(e){this[_qdb("0x345")]=_qdb("0x1b0"),this[_qdb("0x188")]=_qdb("0x1ea")+e+")",this[_qdb("0x50a")]=e}function bs(e){function t(){bq||(bq=!0,k[_qdb("0x263")]=!0,R||(at(),au(),k[_qdb("0x653")]&&k[_qdb("0x653")](),aw()))}0<aD||(as(),0<aD||(k[_qdb("0x2f")]?(k[_qdb("0x2f")](_qdb("0x66")),setTimeout(function(){setTimeout(function(){k[_qdb("0x2f")]("")},1),t()},1)):t()))}}_qdc()},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(t,e,i){t=function(o){"use strict";var c,e=Object.prototype,d=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",i=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,i){return e[t]=i}}function s(e,t,i,n){var r,a,o,s,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),n=new P(n||[]);return t._invoke=(r=e,a=i,o=n,s=l,function(e,t){if(s===f)throw new Error("Generator is already running");if(s===p){if("throw"===e)throw t;return w()}for(o.method=e,o.arg=t;;){var i=o.delegate;if(i){var n=function e(t,i){var n=t.iterator[i.method];if(n===c){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=c,e(t,i),"throw"===i.method))return _;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var n=u(n,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,_;n=n.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=c),i.delegate=null,_):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,_)}(i,o);if(n){if(n===_)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===l)throw s=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=f;n=u(r,a,o);if("normal"===n.type){if(s=o.done?p:h,n.arg===_)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(s=p,o.method="throw",o.arg=n.arg)}}),t}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var l="suspendedStart",h="suspendedYield",f="executing",p="completed",_={};function g(){}function y(){}function v(){}var m={};m[n]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(I([])));t&&t!==e&&d.call(t,n)&&(m=t);var b=v.prototype=g.prototype=Object.create(m);function k(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function x(o,s){var t;this._invoke=function(i,n){function e(){return new s(function(e,t){!function t(e,i,n,r){e=u(o[e],o,i);if("throw"!==e.type){var a=e.arg;return(i=a.value)&&"object"==typeof i&&d.call(i,"__await")?s.resolve(i.__await).then(function(e){t("next",e,n,r)},function(e){t("throw",e,n,r)}):s.resolve(i).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,r)})}r(e.arg)}(i,n,e,t)})}return t=t?t.then(e,e):e()}}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,e=function e(){for(;++i<t.length;)if(d.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=c,e.done=!0,e};return e.next=e}}return{next:w}}function w(){return{value:c,done:!0}}return((y.prototype=b.constructor=v).constructor=y).displayName=a(v,r,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,a(e,r,"GeneratorFunction")),e.prototype=Object.create(b),e},o.awrap=function(e){return{__await:e}},k(x.prototype),x.prototype[i]=function(){return this},o.AsyncIterator=x,o.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var a=new x(s(e,t,i,n),r);return o.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},k(b),a(b,r,"Generator"),b[n]=function(){return this},b.toString=function(){return"[object Generator]"},o.keys=function(i){var e,n=[];for(e in i)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&d.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function e(e,t){return a.type="throw",a.arg=i,n.next=e,t&&(n.method="next",n.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=d.call(r,"catchLoc"),s=d.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&d.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}var a=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),_}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n,r=i.completion;return"throw"===r.type&&(n=r.arg,T(i)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:I(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=c),_}},o}(t.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},function(e,t,i){var n=i(280);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){var n=i(22),r=i(23),a=i(81),o=i(179),i=i(263);n({target:"Object",stat:!0,forced:r(function(){o(1)}),sham:!i},{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,i){var r=i(35),a=i(261);e.exports=function(t,e,i,n){try{return n?e(r(i)[0],i[1]):e(i)}catch(e){throw a(t),e}}},function(e,t,i){var n=i(189);e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,i){var n=i(31)("match");e.exports=function(t){var i=/./;try{"/./"[t](i)}catch(e){try{return i[n]=!1,"/./"[t](i)}catch(e){}}return!1}},function(e,t,i){"use strict";function y(e){return e+22+75*(e<26)}function a(e){var t,i=[],n=(e=function(e){for(var t=[],i=0,n=e.length;i<n;){var r,a=e.charCodeAt(i++);55296<=a&&a<=56319&&i<n?56320==(64512&(r=e.charCodeAt(i++)))?t.push(((1023&a)<<10)+(1023&r)+65536):(t.push(a),i--):t.push(a)}return t}(e)).length,r=128,a=0,o=72;for(u=0;u<e.length;u++)(t=e[u])<128&&i.push(k(t));var s=i.length,c=s;for(s&&i.push("-");c<n;){for(var d=v,u=0;u<e.length;u++)(t=e[u])>=r&&t<d&&(d=t);var l=c+1;if(d-r>b((v-a)/l))throw RangeError(m);for(a+=(d-r)*l,r=d,u=0;u<e.length;u++){if((t=e[u])<r&&++a>v)throw RangeError(m);if(t==r){for(var h=a,f=36;;f+=36){var p=f<=o?1:o+26<=f?26:f-o;if(h<p)break;var _=h-p,g=36-p;i.push(k(y(p+_%g))),h=b(_/g)}i.push(k(y(h))),o=function(e,t,i){var n=0;for(e=i?b(e/700):e>>1,e+=b(e/t);455<e;n+=36)e=b(e/35);return b(n+36*e/(e+38))}(a,l,c==s),a=0,++c}}++a,++r}return i.join("")}var v=2147483647,o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",b=Math.floor,k=String.fromCharCode;e.exports=function(e){for(var t,i=[],n=e.toLowerCase().replace(s,".").split("."),r=0;r<n.length;r++)t=n[r],i.push(o.test(t)?"xn--"+a(t):t);return i.join(".")}},function(e,t,i){"use strict";i(29);function r(t){try{return decodeURIComponent(t)}catch(e){return t}}function n(e){return B[e]}function a(e){return encodeURIComponent(e).replace(N,n)}function u(e){this.entries.length=0,F(this.entries,e)}function d(e,t){if(e<t)throw TypeError("Not enough arguments")}function l(){y(this,l,E);var e,t,i,n,r,a,o,s,c=0<arguments.length?arguments[0]:void 0,d=[];if(q(this,{type:E,entries:d,updateURL:function(){},updateSearchParams:u}),void 0!==c)if(x(c))if("function"==typeof(e=I(c)))for(i=(t=e.call(c)).next;!(a=i.call(t)).done;){if((a=(r=(n=P(k(a.value))).next).call(n)).done||(o=r.call(n)).done||!r.call(n).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:o.value+""})}else for(s in c)v(c,s)&&d.push({key:s,value:c[s]+""});else F(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")}var o=i(22),s=i(105),c=i(288),h=i(85),f=i(217),p=i(155),_=i(262),g=i(109),y=i(184),v=i(76),m=i(135),b=i(170),k=i(35),x=i(39),S=i(122),T=i(120),P=i(373),I=i(197),i=i(31),w=s("fetch"),A=s("Headers"),i=i("iterator"),E="URLSearchParams",D="URLSearchParamsIterator",q=g.set,O=g.getterFor(E),R=g.getterFor(D),L=/\+/g,M=Array(4),C=function(e){var t,i=e.replace(L," "),n=4;try{return decodeURIComponent(i)}catch(e){for(;n;)i=i.replace((t=n--,M[t-1]||(M[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),r);return i}},N=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(e,t){if(t)for(var i,n=t.split("&"),r=0;r<n.length;)(i=n[r++]).length&&(i=i.split("="),e.push({key:C(i.shift()),value:C(i.join("="))}))},U=_(function(e,t){q(this,{type:D,iterator:P(O(e).entries),kind:t})},"Iterator",function(){var e=R(this),t=e.kind,i=e.iterator.next(),e=i.value;return i.done||(i.value="keys"===t?e.key:"values"===t?e.value:[e.key,e.value]),i}),_=l.prototype;f(_,{append:function(e,t){d(arguments.length,2);var i=O(this);i.entries.push({key:e+"",value:t+""}),i.updateURL()},delete:function(e){d(arguments.length,1);for(var t=O(this),i=t.entries,n=e+"",r=0;r<i.length;)i[r].key===n?i.splice(r,1):r++;t.updateURL()},get:function(e){d(arguments.length,1);for(var t=O(this).entries,i=e+"",n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){d(arguments.length,1);for(var t=O(this).entries,i=e+"",n=[],r=0;r<t.length;r++)t[r].key===i&&n.push(t[r].value);return n},has:function(e){d(arguments.length,1);for(var t=O(this).entries,i=e+"",n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){d(arguments.length,1);for(var i,n=O(this),r=n.entries,a=!1,o=e+"",s=t+"",c=0;c<r.length;c++)(i=r[c]).key===o&&(a?r.splice(c--,1):(a=!0,i.value=s));a||r.push({key:o,value:s}),n.updateURL()},sort:function(){for(var e,t,i=O(this),n=i.entries,r=n.slice(),a=n.length=0;a<r.length;a++){for(e=r[a],t=0;t<a;t++)if(n[t].key>e.key){n.splice(t,0,e);break}t===a&&n.push(e)}i.updateURL()},forEach:function(e){for(var t,i=O(this).entries,n=m(e,1<arguments.length?arguments[1]:void 0,3),r=0;r<i.length;)n((t=i[r++]).value,t.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),h(_,i,_.entries),h(_,"toString",function(){for(var e,t=O(this).entries,i=[],n=0;n<t.length;)e=t[n++],i.push(a(e.key)+"="+a(e.value));return i.join("&")},{enumerable:!0}),p(l,E),o({global:!0,forced:!c},{URLSearchParams:l}),c||"function"!=typeof w||"function"!=typeof A||o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,i,n=[e];return 1<arguments.length&&(x(t=arguments[1])&&(i=t.body,b(i)===E&&((e=t.headers?new A(t.headers):new A).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=S(t,{body:T(0,String(i)),headers:T(0,e)}))),n.push(t)),w.apply(this,n)}}),e.exports={URLSearchParams:l,getState:O}},function(e,t,i){var n=i(35),r=i(197);e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},function(e,t,i){"use strict";var n=i(149),o=i(35),s=i(89),c=i(375),d=i(150);n("search",1,function(n,r,a){return[function(e){var t=s(this),i=null==e?void 0:e[n];return void 0!==i?i.call(e,t):new RegExp(e)[n](String(t))},function(e){var t=a(r,e,this);if(t.done)return t.value;var i=o(e),t=String(this),e=i.lastIndex;c(e,0)||(i.lastIndex=0);t=d(i,t);return c(i.lastIndex,e)||(i.lastIndex=e),null===t?-1:t.index}]})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(254),n={stringify:function(e,t,i){var n="";try{n=r.a.JSON.stringify(e,t,i)}catch(e){}return n},parse:function(e,t){return r.a.JSON?r.a.JSON.parse(e,t):null}}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var t=i(101),n=i.n(t);function r(e){return n()(new Set(e))}i(395),i(10),i(97),i(29),i(92)},function(e,n,r){"use strict";!function(e,t){var i=r(409),t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t,t=Object(i.a)(t);n.a=t}.call(this,r(203),r(561)(e))},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{})[t.UNKNOWN=0]="UNKNOWN",t[t.LIB=1]="LIB",t[t.KERNEL=2]="KERNEL",t[t.NETWORK=3]="NETWORK",t[t.DRM=4]="DRM",t[t.TIMELINE=5]="TIMELINE",t[t.MANIFEST=6]="MANIFEST",t[t.LOADER=7]="LOADER",t[t.MUX=8]="MUX",t[t.AVCODEC=9]="AVCODEC",t[t.AVFORMAT=10]="AVFORMAT",t[t.RENDERER=11]="RENDERER",t[t.MAT=12]="MAT"},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),a=i.n(t),t=i(4),o=i.n(t),t=i(5),s=i.n(t),t=i(1),c=i.n(t);var n=function(e){o()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=c()(i);return t=n?(e=c()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),s()(this,t)});function r(){return a()(this,r),t.apply(this,arguments)}return r}(i(228).a);n.DESTROYING="Destroying",n.DESTROYED="Destroying",n.STREAM_ENCRYPTED="StreamEncrypted",n.MSE_ATTACHING="MSEAttaching",n.MSE_ATTACHED="MSEAttached",n.MSE_DETACHING="MSEDetaching",n.MSE_DETACHED="MediaDetached",n.MEDIA_IDLE="MediaIdle",n.BUFFER_CREATED="BufferCreated",n.BUFFER_UPDATED="BufferUpdated",n.BUFFER_EXPECTING="BufferExpecting",n.BUFFER_APPENDING="BufferAppending",n.BUFFER_APPENDED="BufferAppended",n.BUFFER_FLUSHING="BufferFlushing",n.BUFFER_FLUSHED="BufferFlushed",n.MANIFEST_LOADED="ManifestLoaded",n.DATA_EOD="DataEOD",n.AUDIO_TRACK_SWITCHED_FAILED="TrackSwitchedFailed",n.AUDIO_TRACK_SWITCHED_SUCCESS="TrackSwitchedSuccess",n.FPS_REPORT="FpsReport",n.FPS_STUCK="FpsStuck",n.DNS_PARSER_SUCCESS="DNS_PARSER_SUCCESS"},,function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{})[t.UNKNOWN=0]="UNKNOWN",t[t.NET_UNSUPPORTED_SCHEME=1e3]="NET_UNSUPPORTED_SCHEME",t[t.NET_HTTPS_UNMATCHED_HTTP_SCHEME=1001]="NET_HTTPS_UNMATCHED_HTTP_SCHEME",t[t.MFT_FAILED_TO_PARSE_M3U8=2101]="MFT_FAILED_TO_PARSE_M3U8",t[t.MFT_FAILED_TO_PARSE_FLV=2102]="MFT_FAILED_TO_PARSE_FLV",t[t.MFT_FAILED_TO_PARSE_MPD=2103]="MFT_FAILED_TO_PARSE_MPD",t[t.MFT_FAILED_TO_PARSE_JDASH=2104]="MFT_FAILED_TO_PARSE_JDASH",t[t.MFT_FAILED_TO_PARSE_MPD_XML=2301]="MFT_FAILED_TO_PARSE_MPD_XML",t[t.MEDIA_VIDEO_ERROR=3e3]="MEDIA_VIDEO_ERROR",t[t.MEDIA_SOURCE_OPERATION_FAILED=3001]="MEDIA_SOURCE_OPERATION_FAILED",t[t.MEDIA_SOURCE_OPERATION_THREW=3002]="MEDIA_SOURCE_OPERATION_THREW",t[t.MEDIA_QUOTA_EXCEEDED=3003]="MEDIA_QUOTA_EXCEEDED",t[t.MEDIA_HIGH_BUFFER=3004]="MEDIA_HIGH_BUFFER",t[t.MEDIA_PIPELINE_ERROR_DECODE=3300]="MEDIA_PIPELINE_ERROR_DECODE",t[t.MEDIA_VIDEO_DECODE_ERROR=3301]="MEDIA_VIDEO_DECODE_ERROR",t[t.MEDIA_VDA_ERROR=3302]="MEDIA_VDA_ERROR",t[t.MEDIA_AUDIO_RENDERER_ERROR=3303]="MEDIA_AUDIO_RENDERER_ERROR",t[t.MEDIA_URL_SAFE_REJECTED=3401]="MEDIA_URL_SAFE_REJECTED",t[t.UNSUPPORTED_PLAY_RANGE=4e3]="UNSUPPORTED_PLAY_RANGE",t[t.DATA_AD_ERROR=4027]="DATA_AD_ERROR",t[t.DATA_P2P_DISPATCH=4100]="DATA_P2P_DISPATCH",t[t.DATA_P2P_LOAD=4101]="DATA_P2P_LOAD",t[t.DATA_P2P_LOAD_ACCESS=4102]="DATA_P2P_LOAD_ACCESS",t[t.DATA_P2P_MEMORY_ALLOC=4103]="DATA_P2P_MEMORY_ALLOC",t[t.DATA_P2P_DASH_BYTES_LENGTH=4104]="DATA_P2P_DASH_BYTES_LENGTH",t[t.DATA_P2P_AUTH=4105]="DATA_P2P_AUTH",t[t.DATA_P2P_RANGE_ERROR=4106]="DATA_P2P_RANGE_ERROR",t[t.DATA_P2P_DATA_NULL=4107]="DATA_P2P_DATA_NULL",t[t.DATA_HLS_DISPATCH_TIMEOUT=4200]="DATA_HLS_DISPATCH_TIMEOUT",t[t.DATA_HLS_DISPATCH_ERROR=4201]="DATA_HLS_DISPATCH_ERROR",t[t.DATA_HLS_CDN_TIMEOUT=4202]="DATA_HLS_CDN_TIMEOUT",t[t.DATA_HLS_CDN_ERROR=4203]="DATA_HLS_CDN_ERROR",t[t.DATA_AUTH_Error=4204]="DATA_AUTH_Error",t[t.DATA_FLV_TIMEOUT=4301]="DATA_FLV_TIMEOUT",t[t.DATA_FLV_ERROR=4302]="DATA_FLV_ERROR",t[t.DATA_FLV_DISPATCH_ERROR=4303]="DATA_FLV_DISPATCH_ERROR",t[t.DATA_DASH_TIMEOUT=4401]="DATA_DASH_TIMEOUT",t[t.DATA_DASH_ERROR=4402]="DATA_DASH_ERROR",t[t.DATA_DASH_DISPATCH_ERROR=4403]="DATA_DASH_DISPATCH_ERROR",t[t.DATA_DASH_RANGE_ERROR=4404]="DATA_DASH_RANGE_ERROR",t[t.DATA_AUDIO_LOADED_ERROR=4601]="DATA_AUDIO_LOADED_ERROR",t[t.DATA_AUDIO_LOADED_TIMEOUT=4602]="DATA_AUDIO_LOADED_TIMEOUT",t[t.MUX_UNKNOWN_FAILED=5e3]="MUX_UNKNOWN_FAILED",t[t.MUX_WORKER_INITIALIZE=5001]="MUX_WORKER_INITIALIZE",t[t.MUX_WORKER_INTERNAL_EXCEPTION=5002]="MUX_WORKER_INTERNAL_EXCEPTION",t[t.MUX_WORKER_MESSAGE_EXCEPTION=5003]="MUX_WORKER_MESSAGE_EXCEPTION",t[t.MUX_TS_SYNC_BYTE=5100]="MUX_TS_SYNC_BYTE",t[t.MUX_FLV_TAG_INVALID=5200]="MUX_FLV_TAG_INVALID",t[t.MUX_FLV_HEAD_SIGNATURE=5201]="MUX_FLV_HEAD_SIGNATURE",t[t.MUX_FLV_NOT_EXPECTED_ADJACENT_DATA=5202]="MUX_FLV_NOT_EXPECTED_ADJACENT_DATA",t[t.MUX_M4S_FTYP_INVALID=5300]="MUX_M4S_FTYP_INVALID",t[t.DRM_NO_RECOGNIZED_KEY_SYSTEMS=6e3]="DRM_NO_RECOGNIZED_KEY_SYSTEMS",t[t.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE=6001]="DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE",t[t.DRM_FAILED_TO_CREATE_CDM=6002]="DRM_FAILED_TO_CREATE_CDM",t[t.DRM_FAILED_TO_ATTACH_TO_VIDEO=6003]="DRM_FAILED_TO_ATTACH_TO_VIDEO",t[t.DRM_INVALID_SERVER_CERTIFICATE=6004]="DRM_INVALID_SERVER_CERTIFICATE",t[t.DRM_FAILED_TO_CREATE_SESSION=6005]="DRM_FAILED_TO_CREATE_SESSION",t[t.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST=6006]="DRM_FAILED_TO_GENERATE_LICENSE_REQUEST",t[t.DRM_LICENSE_REQUEST_ERROR=6007]="DRM_LICENSE_REQUEST_ERROR",t[t.DRM_LICENSE_REQUEST_TIMEOUT=6008]="DRM_LICENSE_REQUEST_TIMEOUT",t[t.DRM_NO_LICENSE_SERVER_RESPONSE=6009]="DRM_NO_LICENSE_SERVER_RESPONSE",t[t.DRM_LICENSE_RESPONSE_REJECTED=6010]="DRM_LICENSE_RESPONSE_REJECTED",t[t.DRM_NO_LICENSE_SERVER_GIVEN=6012]="DRM_NO_LICENSE_SERVER_GIVEN",t[t.DRM_NO_RECOGNIZED_ERROR=6013]="DRM_NO_RECOGNIZED_ERROR",t[t.DRM_SERVER_REJECT_BY_LICENSE_SDK=6015]="DRM_SERVER_REJECT_BY_LICENSE_SDK"},,function(e,t,i){var n=i(47),r=i(50),a=i(156),i=i(188).UNSUPPORTED_Y;n&&("g"!=/./g.flags||i)&&r.f(RegExp.prototype,"flags",{configurable:!0,get:a})},,,function(e,t,i){var n=i(24),r=i(135),a=Function.call;e.exports=function(e,t,i){return r(a,n[e].prototype[t],i)}},function(e,t,i){i=i(31);t.f=i},function(e,t,i){var n=i(206),r=i(76),a=i(388),o=i(50).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});r(t,e)||o(t,e,{value:a.f(e)})}},function(e,t,i){"use strict";var g=i(22),y=i(24),v=i(142),m=i(85),b=i(391),k=i(260),x=i(184),S=i(39),T=i(23),P=i(230),I=i(155),w=i(180);e.exports=function(i,e,t){function n(e){var i=f[e];m(f,e,"add"==e?function(e){return i.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(u&&!S(e))&&i.call(this,0===e?0:e)}:"get"==e?function(e){return u&&!S(e)?void 0:i.call(this,0===e?0:e)}:"has"==e?function(e){return!(u&&!S(e))&&i.call(this,0===e?0:e)}:function(e,t){return i.call(this,0===e?0:e,t),this})}var r,a,o,s,c,d=-1!==i.indexOf("Map"),u=-1!==i.indexOf("Weak"),l=d?"set":"add",h=y[i],f=h&&h.prototype,p=h,_={};return v(i,"function"!=typeof h||!(u||f.forEach&&!T(function(){(new h).entries().next()})))?(p=t.getConstructor(e,i,d,l),b.REQUIRED=!0):v(i,!0)&&(a=(r=new p)[l](u?{}:-0,1)!=r,o=T(function(){r.has(1)}),s=P(function(e){new h(e)}),c=!u&&T(function(){for(var e=new h,t=5;t--;)e[l](t,t);return!e.has(-0)}),s||(((p=e(function(e,t){x(e,p,i);e=w(new h,e,p);return null!=t&&k(t,e[l],{that:e,AS_ENTRIES:d}),e})).prototype=f).constructor=p),(o||c)&&(n("delete"),n("has"),d&&n("get")),(c||a)&&n(l),u&&f.clear&&delete f.clear),_[i]=p,g({global:!0,forced:p!=h},_),I(p,i),u||t.setStrong(p,i,d),p}},function(e,t,i){function n(e){s(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})}var r=i(148),a=i(39),o=i(76),s=i(50).f,c=i(172),d=i(392),u=c("meta"),l=0,h=Object.isExtensible||function(){return!0},f=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,u)){if(!h(e))return"F";if(!t)return"E";n(e)}return e[u].objectID},getWeakData:function(e,t){if(!o(e,u)){if(!h(e))return!0;if(!t)return!1;n(e)}return e[u].weakData},onFreeze:function(e){return d&&f.REQUIRED&&h(e)&&!o(e,u)&&n(e),e}};r[u]=!0},function(e,t,i){i=i(23);e.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,i){"use strict";var d=i(50).f,u=i(122),l=i(217),h=i(135),f=i(184),p=i(260),o=i(236),s=i(181),_=i(47),g=i(391).fastKey,i=i(109),y=i.set,v=i.getterFor;e.exports={getConstructor:function(e,i,n,r){function a(e,t,i){var n,r=c(e),a=o(e,t);return a?a.value=i:(r.last=a={index:n=g(t,!0),key:t,value:i,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=a),i&&(i.next=a),_?r.size++:e.size++,"F"!==n&&(r.index[n]=a)),e}function o(e,t){var i,n=c(e);if("F"!==(e=g(t)))return n.index[e];for(i=n.first;i;i=i.next)if(i.key==t)return i}var s=e(function(e,t){f(e,s,i),y(e,{type:i,index:u(null),first:void 0,last:void 0,size:0}),_||(e.size=0),null!=t&&p(t,e[r],{that:e,AS_ENTRIES:n})}),c=v(i);return l(s.prototype,{clear:function(){for(var e=c(this),t=e.index,i=e.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete t[i.index],i=i.next;e.first=e.last=void 0,_?e.size=0:this.size=0},delete:function(e){var t,i=c(this),n=o(this,e);return n&&(t=n.next,e=n.previous,delete i.index[n.index],n.removed=!0,e&&(e.next=t),t&&(t.previous=e),i.first==n&&(i.first=t),i.last==n&&(i.last=e),_?i.size--:this.size--),!!n},forEach:function(e){for(var t,i=c(this),n=h(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:i.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!o(this,e)}}),l(s.prototype,n?{get:function(e){e=o(this,e);return e&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),_&&d(s.prototype,"size",{get:function(){return c(this).size}}),s},setStrong:function(e,t,i){var n=t+" Iterator",r=v(t),a=v(n);o(e,t,function(e,t){y(this,{type:n,target:e,state:r(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"==t?{value:i.key,done:!1}:"values"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:{value:e.target=void 0,done:!0}},i?"entries":"values",!i,!0),s(t)}}},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(10),i(19),i(139);var n={create:function(){return Math.ceil(1e16*Math.random()+(new Date).getTime()).toString(32)}}},function(e,t,i){"use strict";var n=i(390),i=i(393);e.exports=n("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i)},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),a=i.n(t),t=i(3),o=i.n(t),t=i(4),s=i.n(t),t=i(5),c=i.n(t),t=i(1),d=i.n(t);var n=function(e){s()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=d()(i);return t=n?(e=d()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)});function r(){return a()(this,r),t.apply(this,arguments)}return o()(r,[{key:"trigger",value:function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(i))}}]),r}((i(27),i(94)).EventEmitter)},function(e,t,h){"use strict";h.d(t,"a",function(){return i});var t=h(32),a=h.n(t);function o(i){var n={};function r(e){try{if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};i[e].call(t.exports,t,t.exports,r),t.l=!0}catch(e){throw"__webpack_require__ failed ".concat(e.stack||e.message)}return t.exports}r.m=i,r.c=n,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===a()(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var e=r(r.s=ENTRY_MODULE);return e.default||e}h(226),h(563),h(169),h(26),h(17),h(10),h(19),h(139),h(146),h(110),h(177),h(271),h(27),h(127),h(48),h(151),h(45),h(112),h(245),h(97),h(29),h(92);var f="[\\.|\\-|\\+|\\w|/|@]+",p="\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function _(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(l,e){var i={main:h.m},n=(e=e||{}).all?{main:Object.keys(i.main)}:function(e){for(var t={main:[l]},i={main:[]},n={main:{}};function(i){return Object.keys(i).reduce(function(e,t){return e||0<i[t].length},!1)}(t);)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],s=t[o].pop();if(n[o]=n[o]||{},!n[o][s]&&e[o][s]){n[o][s]=!0,i[o]=i[o]||[],i[o].push(s);for(var c=function(e,t,i){var n={};n[i]=[];var r=t.toString();if(!(t=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/)))return n;for(var a,t=t[1],o=new RegExp("(\\\\n|\\W)"+_(t)+p,"g");a=o.exec(r);)"dll-reference"!==a[3]&&n[i].push(a[3]);for(o=new RegExp("\\("+_(t)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+p,"g");a=o.exec(r);)e[a[2]]||(n[i].push(a[1]),e[a[2]]=h(a[1]).m),n[a[2]]=n[a[2]]||[],n[a[2]].push(a[4]);for(var s,c=Object.keys(n),d=0;d<c.length;d++)for(var u=0;u<n[c[d]].length;u++)s=n[c[d]][u],isNaN(+s)||(n[c[d]][u]=+n[c[d]][u]);return n}(e,e[o][s],o),d=Object.keys(c),u=0;u<d.length;u++)t[d[u]]=t[d[u]]||[],t[d[u]]=t[d[u]].concat(c[d[u]])}}return i}(i),r="";Object.keys(n).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;n[t][e];)e++;n[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+t+" = ("+o.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"});var r=r+"new (("+o.toString().replace("ENTRY_MODULE",JSON.stringify(l))+")({"+n.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);",t=new window.Blob([r],{type:"text/javascript"}),t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),e=new window.Worker(t,e.worker||{});return e.objectURL=t,e}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i(51),s=i(273),c=i(531);function n(e,t,i){var n,r,a=e;if(!(t>s.a.length-1))return n=c.a.FIREFOX?6<=t?(e=5,r=new Array(4),t-3):(e=2,r=new Array(2),t):c.b.android?(e=2,r=new Array(2),t):(e=5,r=new Array(4),6<=t?t-3:(1===i&&(e=2,r=new Array(2)),t)),r[0]=e<<3,r[0]|=(14&t)>>1,r[1]|=(1&t)<<7,r[1]|=i<<3,5===e&&(r[1]|=(14&n)>>1,r[2]=(1&n)<<7,r[2]|=8,r[3]=0),{config:r,sampleRate:s.a[t],channelCount:i,codec:"mp4a.40."+e,realCodec:"mp4a.40."+a};o.a.error("invalid sampling index:".concat(t))}},function(e,t,i){var n=i(22),i=i(80);n({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},function(e,t,i){"use strict";function n(e){for(var t="avc1.",i=[e.profile_idc,e.profile_compatibility,e.level_idc],n=0;n<i.length;n++){var r=i[n].toString(16);t+=r=r.length<2?"0"+r:r}return{codec:t}}i.d(t,"a",function(){return n}),i(10),i(19),i(139)},function(e,t,i){"use strict";function n(e){var t=e.profile_compatibility,i=e.level_idc,n=e.profile_space,r=e.profile_idc,a=e.tier_flag,o=e.constraint_indicator_flags,s="";switch(n){case 0:s=""+r;break;case 1:s="A"+r;break;case 2:s+="B"+r;break;case 3:s+="C"+r}for(var c,t=t.toString(16).replace(/0/gi,"").toUpperCase(),a=(0===a?"L":"H")+i,d=[],u=o.length-1,l=!0;0<=u;u--)c=o[u],l&&0===c||(l=!1,d.push(c));return i=d.reverse().map(function(e){return e.toString(16).toUpperCase()}).join("."),{codec:"hvc1.".concat(s,".").concat(t,".").concat(a,".").concat(i)}}i.d(t,"a",function(){return n}),i(26),i(17),i(10),i(19),i(139),i(45),i(112),i(338),i(27)},function(e,t,i){"use strict";function n(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}i.d(t,"a",function(){return n}),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46)},function(e,t,i){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)for(var i=t<0||arguments.length<=t?void 0:arguments[t],n=0;n<i.length;n++){var r=i[n],a=e.indexOf(r);-1===a?e.push(r):e.splice(a,1)}return e}i.d(t,"a",function(){return n}),i(37),i(90)},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var t=i(2),n=i.n(t),t=i(3),t=i.n(t),r=(i(270),t()(a,[{key:"running",get:function(){return null!==this._id}},{key:"cancel",value:function(){this.running&&(clearTimeout(this._id),this._id=null)}},{key:"schedule",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e),this._id=setTimeout(function(){t._callback()},this._frequency)}},{key:"scheduleRepeated",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e),this._id=setTimeout(function e(){t._callback(),t.running&&(t._id=setTimeout(e,t._frequency))},this._frequency)}},{key:"adjustFrequency",value:function(e){this._frequency=1e3*e}}]),a);function a(e){n()(this,a),this._id=null,this._frequency=1/0,this._callback=function(){e()}}},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).ERROR="ERROR",t.TIMEOUT="TIMEOUT",t.ABORT="ABORT"},function(e){e.exports=JSON.parse('{"a":"1.0.21"}')},function(e,t){var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}};e.exports=i},function(e,t,i){"use strict";var n=i(22),r=i(111).f,a=i(44),o=i(369),s=i(89),c=i(370),i=i(136),d="".endsWith,u=Math.min,c=c("endsWith");n({target:"String",proto:!0,forced:!(!i&&!c&&((r=r(String.prototype,"endsWith"))&&!r.writable)||c)},{endsWith:function(e){var t=String(s(this));o(e);var i=1<arguments.length?arguments[1]:void 0,n=a(t.length),n=void 0===i?n:u(a(i),n),e=String(e);return d?d.call(t,e,n):t.slice(n-e.length,n)===e}})},function(e,t,i){"use strict";function n(e){var t,e=e.Symbol;return"function"==typeof e?e.observable?t=e.observable:(t=e("observable"),e.observable=t):t="@@observable",t}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r});var n=new(i(532).a);function r(e){n.copyServices(e.cloneServices())}},function(e){e.exports=JSON.parse('{"name":"@mux/m2ts-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@mux/flv-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(77),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(53),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(54),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(55),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(56),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(57),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(58),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(59),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(60),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(61),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(62),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(63),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(64),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(65),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(66),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(67),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(68),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(69),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(70),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(71),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(72),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(73),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(74),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(75),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(29),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(46),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(146),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(26),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33__),_utils_Log__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(12),_RunTime__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(16),_PlayerState__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(91),_Config__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(13),_enum_EventType__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(95),_utils_Event__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(79),_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(11),mozResponseType="moz-chunked-arraybuffer",isSupportMoz=null,xhrStatusProgress="",XHRLoader=(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(PE0,[{key:"load",value:function(e,t){if(this.tast=e,this.dataLen=0,this.loadType=t,this.loader=new XMLHttpRequest,null===isSupportMoz&&/firefox/gi.test(navigator.userAgent.toLowerCase())){try{this.loader.responseType=mozResponseType}catch(e){}isSupportMoz=this.loader.responseType===mozResponseType}if(isSupportMoz?this.loader.responseType=mozResponseType:(this.loader.responseType="arraybuffer",isSupportMoz=!1),this.taskList=[{start:this.tast.begin,end:this.tast.end}],isSupportMoz||(this.taskList=checkTask(this.tast.begin,this.tast.end,Math.min(Math.max(1024*this.tast.rate,32768),1048576),this.tast.segment.fileType)),0===this.taskList.length)return this.running=!1,void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done");_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"open"),this.check()}},{key:"close",value:function(){this.running=!1,this.loader&&this.loader.abort(),this.loader=null,this.cache&&delete this.cache}},{key:"loadStatus",value:function(e,t){if("Error"!==e&&t&&(this.tast.range={begin:this.range.start+this.base,end:this.range.start+this.base+t.byteLength},this.tast.data=t),"OK"===e){if(-1===this.range.end&&(this.range.end=this.range.start+this.base+t.byteLength),this.videoType!==_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.TS&&this.videoType!==_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.FTS&&t.byteLength>this.range.end-this.range.start)return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("data is not right , need range "+this.range.start+"-"+this.range.end+" dataLen "+t.byteLength),void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",_PlayerState__WEBPACK_IMPORTED_MODULE_36__.a.LoaderState_dataRangeError);this.dataLen+=t.byteLength,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"progress"),this.base+=t.byteLength}else"done"===e?this.check():this.running&&(this.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",t))}},{key:"check",value:function(){var e;0<this.taskList.length?(this.range=this.taskList.shift(),e=this.tast.url,-1!==(e=!isSupportMoz&&0<e.indexOf("start=")?changeURLArg(this.tast.url,this.range):e).indexOf("start=")&&-1!==e.indexOf("end=")||(-1===e.indexOf("?")?-1!==this.range.end&&(e+="?start="+this.range.start+"&end="+this.range.end):-1!==this.range.end&&(e+="&start="+this.range.start+"&end="+this.range.end)),-1===e.indexOf("stauto")&&(e+="&stauto="+_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.absStatus),-1===e.indexOf("ori")&&(e+="&ori=pcw"+_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.platform),-1===e.indexOf("num")&&(e+="&num="+Date.now().toString()),_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("[XHR Loader start ] "+this.range.start+" - "+this.range.end+" , "+e),this.running=!0,this.base=0,this.xhrLoad(e)):(this.running=!1,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done"))}},{key:"xhrLoad",value:function(e){this.loader||(this.loader=new XMLHttpRequest,this.loader.responseType=isSupportMoz?mozResponseType:"arraybuffer");var t=0;for(this.cache=null;null===this.cache;)try{t++,this.cache=new Uint8Array(1048576)}catch(e){if(t>_Config__WEBPACK_IMPORTED_MODULE_37__.i)return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("FetchLoader catch Uint8Array err : "+e.message),void i("tryCatchError")}this.readPos=0,this.dataPos=0;var a=this;xhrStatusProgress="",this.loader.onreadystatechange=function(){xhrStatusProgress+="readyState:"+a.loader.readyState+", status:"+a.loader.status+","},this.loader.onloadend=function(e){_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader onloadend ,"+isSupportMoz);var e=e.currentTarget,t=e.status,e=e.response;if(200<=t&&t<300){if(e){var i=new Uint8Array(e);if(i&&0<i.byteLength){if(a.dataPos+i.byteLength>a.cache.byteLength){for(var n=null,r=0;null===n;)try{r++,n=new Uint8Array(a.dataPos+i.byteLength)}catch(e){if(r>_Config__WEBPACK_IMPORTED_MODULE_37__.i){if(_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("FetchLoader catch newUint8Array err : "+e.message),null===a.loader)return;a.loadStatus("Error","statusErr-"+t)}}e=a.cache.subarray(a.readPos);n.set(e,0),delete a.cache,a.dataPos=a.dataPos-a.readPos,a.readPos=0,a.cache=n}a.cache.set(i,a.dataPos),a.dataPos+=i.byteLength}}a.readPos<a.dataPos&&a.loadStatus("OK",a.cache.subarray(a.readPos,a.dataPos)),null!==a.loader&&(a.close(),a.loadStatus("done"))}else null!==a.loader&&(_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.warn("XHR Loader err , status progress, "+xhrStatusProgress),a.loadStatus("Error","statusErr-"+t))},this.loader.onprogress=function(e){var t,i;isSupportMoz&&((t=e.target?e.target.response:null)&&(i=new Uint8Array(t),a.dataPos+i.byteLength>a.cache.byteLength&&(e=new Uint8Array(a.dataPos+i.byteLength),t=a.cache.subarray(a.readPos),e.set(t,0),a.dataPos=a.dataPos-a.readPos,a.readPos=0,a.cache=e),a.cache.set(i,a.dataPos),a.dataPos+=i.byteLength),8192<=a.dataPos-a.readPos&&(i=8192*Math.floor((a.dataPos-a.readPos)/8192),a.loadStatus("OK",a.cache.subarray(a.readPos,a.readPos+i)),a.readPos+=i))};try{this.loader.open("GET",e,!0),this.loader.withCredentials=!1,this.loader.send()}catch(e){i("tryCatchError")}function i(e){null!==a.loader&&(a.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+a.eventID,"Error",e))}}}]),PE0);function PE0(e,t){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,PE0),this.videoType=e,this.eventID=t}function checkTask(e,t,i,n){var r,a=_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.getBufferFunc(),o=0,o="m4s"===n?Math.min(a.buffered.video.len,a.buffered.audio.len):a.len;o*=1e3;for(var s=[],c=0;e<t;)o<1e3?(c=i,o+=1e3):o<2e3?(c=2*i,o+=2e3):o<3e3?(c=3*i,o+=3e3):o<4e3?(c=4*i,o+=4e3):o<5e3?(c=5*i,o+=5e3):o<6e3?(c=6*i,o+=6e3):o<7e3?(c=7*i,o+=7e3):o<8e3?(c=8*i,o+=8e3):(c=10*i,o+=1e4),e=((!(e+c<t)||t-(r=e+c)<c/2)&&(r=t),s.push({start:e,end:r}),r);return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader check list "+JSON.stringify(s)),s}function changeURLArg(url,range){var pattern1="start=([^&]*)",pattern2="end=([^&]*)",replaceText1="start="+range.start,replaceText2="end="+range.end;if(url.match(pattern1)||url.match(pattern2)){var tmp="/(start=)([^&]*)/gi";url=url.replace(eval(tmp),replaceText1);var tmp2="/(end=)([^&]*)/gi";return url=url.replace(eval(tmp2),replaceText2),url}}__webpack_exports__.a=XHRLoader},function(e){e.exports=JSON.parse('{"name":"@loader/p2p","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/jdash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@renderer/mse","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return XFactorManager});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(101),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(126),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(41),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(27),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(168),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(112),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__),XFactorManager=function(){function XFactorManager(e){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this,XFactorManager),this.globalVarList=e||[]}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(XFactorManager,[{key:"clear",value:function(){this.globalVarList=[]}},{key:"reset",value:function(e){this.globalVarList=e}},{key:"setXFactor",value:function(t,e){this.globalVarList.find(function(e){return e.name===t}).initValue=e}},{key:"getXFactor",value:function(t){return this.globalVarList.find(function(e){return e.name===t})}},{key:"getXFactorValue",value:function(){return this.getXFactor()?parseInt(this.getXFactor().initValue,10):0}},{key:"isShowInteractElement",value:function(e){var t=this;return!0===(e||[]).some(function(e){return t._expressParse(e)})?1:0}},{key:"isShowInteract",value:function(e){var t=this;return!0===(e||[]).some(function(e){return t._expressParse(e)})?1:0}},{key:"getInteractActionSwitchInfo",value:function(e){var t=this;return(e||[]).find(function(e){return t._expressParse(e)})}},{key:"getEndActionSwitchInfo",value:function(e){var t=this;return(e||[]).find(function(e){return t._expressParse(e)})}},{key:"doAlgorithm",value:function doAlgorithm(algorithmList){var self=this;if(algorithmList&&0!=algorithmList.length)return algorithmList.forEach(function(exp){var pattern=/^([A-Za-z0-9]+)(=)([A-Za-z0-9]+)(\+|-)(\d*)/,_pattern$exec=pattern.exec(exp),_pattern$exec2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec,6),v1=_pattern$exec2[1],v2=_pattern$exec2[3],e=_pattern$exec2[4],n=_pattern$exec2[5],r2=self.getXFactorValue(v2),r1=eval("".concat(r2).concat(e).concat(parseInt(n,10)));self.setXFactor(v1,0<r1?r1:0)}),self.globalVarList}},{key:"_expressParse",value:function _expressParse(item){var self=this,express=item.express,expressType=item.expressType,expressPara=item.expressPara,expressParaValue=self.getXFactorValue(expressPara.trim()),__eval=function __eval(str){var pattern=/^([A-Za-z0-9]+)([><!]=?|=)(\d*)/,_pattern$exec3=pattern.exec(str),_pattern$exec4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec3,4),k=_pattern$exec4[1],s=_pattern$exec4[2],v=_pattern$exec4[3],x=self.getXFactorValue(k);return!0===eval("".concat(x).concat(s).concat(parseInt(v,10)))},__mathParse=function(e,t,i){return(e=Math[e]).call.apply(e,[null].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t.split(",").map(function(e){return e.trim()}).map(function(e){return self.getXFactorValue(e)}))))==i};switch(expressType){case"min":case"max":return __mathParse.apply(void 0,[expressType].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(express),[expressParaValue]));case"condition":return express.split("&&").map(__eval).every(function(e){return!0===e})}}}]),XFactorManager}()},function(e){e.exports=JSON.parse('{"name":"@cupid/mars","version":"7.2.1","description":"ad sdk for PCW","directories":{"example":"examples"},"scripts":{"clean":"rm -rf ../dist","dev":"webpack --inline --progress --mode development --config webpack.config.js --colors --watch","eslint":"./node_modules/.bin/eslint","lint":"npm run eslint core && npm run eslint view && echo \'perfect!\'","build":"yarn && npm run clean && npm run lint && webpack"},"author":"heke","devDependencies":{"@babel/core":"^7.4.3","@babel/plugin-transform-modules-commonjs":"^7.1.0","@babel/preset-env":"^7.4.3","babel-eslint":"^10.0.2","babel-loader":"^8.0.5","css-loader":"^2.1.1","eslint":"^6.0.1","less":"^3.9.0","less-loader":"^5.0.0","style-loader":"^0.23.1","webpack":"^4.29.6","webpack-cli":"^3.3.0","yarn":"^1.15.2"},"dependencies":{"html-loader":"^0.5.5"}}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i(9);var n=i(2),o=i.n(n),t=i(3),s=i.n(t),n=i(42),c=i.n(n),t=i(4),d=i.n(t),n=i(5),u=i.n(n),t=i(1),l=i.n(t),h=(i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46),i(90),i(152)),f=i(51),p=i(228),_=i(201),n=i(251),t=i(101),g=i.n(t),t=i(38),y=i.n(t),v=(i(169),i(26),i(17),i(245),i(97),i(92),i(127),i(48),i(27),i(115),i(267),i(329)),m=i(202),b=i(397),t=i(133),k=i(614),x=i(410),S=(s()(r,[{key:"clear",value:function(){this.msg=null,this.repostCount=0}}]),r);function r(){o()(this,r),this.msg=null,this.repostCount=0}var T=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return o()(this,a),(t=r.call(this))._eventManager=new v.a,t._error=null,t._mux=null,t._w=null,t._idle=!0,t._dryRun=!0,t._workerSignal=new S,t._args={transmuxer:e,options:i},Object(m.a)(i,{debug:!1,enableWorker:!0},!1),t._onWorkerMessage=t._onWorkerMessage.bind(y()(t)),t._onWorkerError=t._onWorkerError.bind(y()(t)),t._initialize(),t}return s()(a,[{key:"error",get:function(){return this._error}},{key:"idle",get:function(){return this._idle},set:function(e){(this._idle=e)&&this.emit("I")}},{key:"_initialize",value:function(){var t,e,n=this,i=this._args,r=i.transmuxer,a=i.options,i=function(){t=n._mux=x.a.resolve(r)};if(this.idle=!1,a.enableWorker&&void 0!==window.Worker)try{var o="kiwi_"+r.toLowerCase().replace(/-/gi,"_"),s=performance.now();f.a.log("spawn a worker thread ".concat(o)),(e=this._w=Object(b.a)(564,{worker:{name:o}})).__name__=o,e.initAt=s,e.addEventListener("message",this._onWorkerMessage),e.addEventListener("error",this._onWorkerError),e.addEventListener("messageerror",this._onWorkerMessageError),f.a.log("worker options ".concat(JSON.stringify(a))),this._postMessage(e,"__init__",{transmuxer:r,options:a})}catch(e){this._w&&URL.revokeObjectURL(this._w.objectURL),delete this._w,f.a.error("error while initializing mux-worker, fallback on mux-inline"),i()}else i();t&&([["__idle__",function(){n.idle=!0}],["error",function(e,t,i){return n._emitError(e,t,i)}],["demux_info",function(e){return n._emitDemuxInfo(e)}],["demux_data",function(e){return n._emitDemuxData(e)}],["remux_data",function(e){return n._emitRemuxData(e)}],["done",function(){return n._emitDone()}]].forEach(function(e){n._eventManager.on(t,e[0],e[1])}),this.idle=!0)}},{key:"_postMessage",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];f.a.log("mux send msg to ".concat(e.__name__," worker: ").concat(t)),this._workerSignal.msg=[e,t,i,n],e.postMessage({cmd:t,msg:i},n)}},{key:"_terminateWorker",value:function(){var e=this._w;e.removeEventListener("message",this._onWorkerMessage),e.removeEventListener("error",this._onWorkerError),e.removeEventListener("messageerror",this._onWorkerMessageError),e.terminate(),f.a.log("terminate a ".concat(e.__name__," worker thread"))}},{key:"push",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this._w;(Object(h.a)(e)||Object(h.k)(e))&&(t=Object(h.a)(t)?new Uint8Array(t):e,f.a.log("mux push buf ".concat(Object(k.a)(t.byteLength),", stubTime ").concat(i.stubTime)),this._dryRun=!1,this.idle=!1,this.emit("P"),n?this._postMessage(n,"push",{buf:t,conf:i},[]):this._mux.push(t,i))}},{key:"reset",value:function(){var e;this._error=null,this._dryRun||(e=this._w,f.a.log("mux reset ".concat(e?"worker":"inline")),e?(this._workerSignal.clear(),this._postMessage(e,"reset")):this._mux.reset())}},{key:"destroy",value:function(){this._w?(this._workerSignal.clear(),this._terminateWorker()):(this._mux.destroy(),this._eventManager.destroy()),this._error=null}},{key:"_onWorkerMessage",value:function(e){var t=e.data,i=e.target;if(null===t)this._handleACK(null);else{var e=t.cmd,n=t.msg;switch(e){case"__ACK__":this._handleACK(n);break;case"__init__":f.a.log("worker ".concat(i.__name__," initialized, cost ").concat((performance.now()-i.initAt).toFixed(3),"ms")),URL.revokeObjectURL(this._w.objectURL);break;case"__idle__":this.idle=!0;break;case"__log__":this._emitLog(n.type,n.message);break;case"error":this._emitError(n.code,n.message,n.data);break;case"demux_info":this._emitDemuxInfo(n);break;case"demux_data":this._emitDemuxData(n);break;case"remux_data":this._emitRemuxData(n);break;case"done":this._emitDone()}}}},{key:"_onWorkerError",value:function(e){var t=e.target||e.srcElement,t=t?t.__name__:"",e="worker ".concat(t," error, ").concat(e.message);f.a.warn(e),this._emitError(0,e)}},{key:"_onWorkerMessageError",value:function(e){e="Worker met error while receiving message, ".concat(e);f.a.warn(e),this._emitError(1,e)}},{key:"_handleACK",value:function(e){e?this._workerSignal.clear():(f.a.warn("master thread received worker ack signal: ".concat(e)),this._workerSignal.msg&&(this._workerSignal.repostCount<10?(this._workerSignal.repostCount++,f.a.warn("Repost the cache signal to worker at ".concat(this._workerSignal.repostCount," time")),this._postMessage.apply(this,g()(this._workerSignal.msg))):(f.a.warn(e="Worker ack message beyond repost count"),this._emitError(1,e))))}},{key:"_emitLog",value:function(e,t){f.a[e]&&f.a[e]("w: ".concat(t))}},{key:"_emitError",value:function(e,t){this._error={code:e,message:t,data:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}},this.emit("E",this._error)}},{key:"_emitDemuxInfo",value:function(e){this.emit("DI",e)}},{key:"_emitRemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("D",e)}},{key:"_emitDemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("DD",e)}},{key:"_emitDone",value:function(e){this.emit("O",e)}}]),a}(t.a);var a=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;o()(this,a),(t=r.call(this,e)).$ARTEFACT_ACTION=_.a.DEPOSIT_MUX,t.$videoMediaStartTimes_=[];var i=e.transmuxer,e=e.enableWorker;return t.$transmuxer=new T(i,{enableWorker:"boolean"!=typeof e||e}),t.$eventManager.on(t.$transmuxer,"P",function(){t.$noticeMuxAspect("swallow")}).on(t.$transmuxer,"D",function(){t.$noticeMuxAspect("spit")}),t}return s()(a,[{key:"idle",get:function(){return this.$transmuxer.idle}},{key:"$canConsumeLoaderData",value:function(){return!this.$error&&this.$transmuxer.idle&&!this.$stream.restrictor.consumable}},{key:"$constraintPushData_",value:function(e){var t=null;return Object(h.a)(e)||Object(h.k)(e)?Object(h.a)(e)?new Uint8Array(e):e:t}},{key:"$drainBuffer",value:function(e){f.a.log("mux clear cached data");var t=this.$stream,i=this.$transmuxer,n=this.$videoMediaStartTimes_,r=t.restrictor,t=r.videoMediaSegments,r=r.audioMediaSegments;t.splice(0,t.length),r.splice(0,r.length),n.splice(0,n.length),i.reset(),e.keepMuxMeta||(this.$currentDataMeta=null),this.$loaderArtifact=null,this.$audioSegmentAlignPTS_=void 0,c()(l()(a.prototype),"$drainBuffer",this).call(this,e)}},{key:"$checkMuxMetaMatched",value:function(e,t){var i=!1;return t&&e?i=e.uid===t.uid:void 0===t&&void 0===e&&(i=!0),i}},{key:"reset",value:function(){}},{key:"$noticeMuxAspect",value:function(e){this.$krt.ctx.emit(p.a.STATE_CHANGE,{state:"mux"+e})}}]),a}(n.a)},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i(17),i(37),i(43),i(25);var n={mac:!1,iphone:!1,android:!1},r={version:void 0,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1},a=navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(a)||/(opr)[/]([\w.]+)/.exec(a)||/(chrome)[ /]([\w.]+)/.exec(a)||/(firefox)[ /]([\w.]+)/.exec(a)||/(iemobile)[/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(a)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(a)||/(webkit)[ /]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0<=a.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],t=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[],i={version:void 0},o={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",versionNumber:o[4]||o[2]||"0",platform:t[0]||""};o.browser&&(i[o.browser]=!0,t=o.versionNumber.split("."),i.version={major:parseInt(o.versionNumber,10),string:o.version},1<t.length&&(i.version.minor=parseInt(t[1],10)),2<t.length&&(i.version.build=parseInt(t[2],10))),r.version=i.version,r.CHROME=!!i.chrome,r.SAFARI=!!i.safari&&!r.CHROME,r.FIREFOX=!!i.firefox,r.IE11=/rv:11/.test(a),r.IE=!!i.msie||r.IE11,r.EDGE=!!i.edge,r.WECHAT=/(wechat)|(micromessenger)/.test(a),n.mac=!!o.platform.mac,n.iphone=!!o.platform.iphone,n.android=!!o.platform.android},function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i(82),i(10),i(194),i(97),i(185),i(198),i(199),i(29),i(92),i(147);var t=i(342),s=i.n(t),t=i(2),n=i.n(t),t=i(3),t=i.n(t),r=(i(204),i(37),i(202)),a=i(152),o=i(153);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var d=(t()(u,[{key:"cloneServices",value:function(){return Object(r.a)({},this.services)}},{key:"copyServices",value:function(e){this.services=Object(r.a)({},e)}},{key:"register",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(Object(a.h)(e)){var r=e;Object(o.e)(this.services,r.name)||(this.services[r.name]={name:r.name,className:r.class,args:r.args,shared:r.shared,compiled:null})}else{if(Object(o.e)(this.services,e))throw new Error("Service '".concat(e,"' already exists"));if(!Object(a.d)(t))throw new Error("Parameter 'className' should be a class constructor");this.services[e]={name:e,className:t,args:i,shared:n,compiled:null}}}},{key:"registerMulti",value:function(e){var t,i=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return c(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.register(n)}}catch(e){i.e(e)}finally{i.f()}}},{key:"remove",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");delete this.services[e]}},{key:"has",value:function(e){return!(void 0===this.services[e])}},{key:"resolve",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");var t=this.services[e];if(t.shared&&null!==t.compiled)return t.compiled;var i,n=[];for(i in t.args){var r,a=t.args[i],o=void 0;o="string"==typeof a&&0===a.indexOf(":")?(r=a.substring(1),this.resolve(r)):a,n.push(o)}e=s()(t.className,n);return t.shared&&(t.compiled=e),e}}]),u);function u(){n()(this,u),this.services={}}},function(e,t,i){i(275)("Uint16",function(n){return function(e,t,i){return n(this,e,t,i)}})},function(e,t,i){i(275)("Int32",function(n){return function(e,t,i){return n(this,e,t,i)}})},,,,,,,,,,,,,,,,,,,function(e,t,i){i=i(554);e.exports=i},function(e,t,i){i(17),i(43);i=i(387);e.exports=i("String","split")},function(e,t,i){i=i(556);e.exports=i},function(e,t,i){i(17),i(26);i=i(387);e.exports=i("String","replace")},function(e,t,i){i=i(558);e.exports=i},function(e,t,i){i(9);i=i(206);e.exports=i.Reflect.construct},function(e,t,i){var n=i(102),r=i(129).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(n(e))}},function(e,t,i){var n=i(22),r=i(47),c=i(211),d=i(102),u=i(111),l=i(144);n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,i,n=d(e),r=u.f,a=c(n),o={},s=0;a.length>s;)void 0!==(i=r(n,t=a[s++]))&&l(o,t,i);return o}})},function(e,t){e.exports=function(e){var t;return e.webpackPolyfill||((t=Object.create(e)).children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1),t}},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,i){i(22)({target:"Object",stat:!0,sham:!i(47)},{create:i(122)})},function(e,t,i){"use strict";i.r(t),i(267),i(46),i(10),i(147),i(127),i(48),i(565);var r=i(329),d=i(51),u=i(343);t.default=function(n){var o,s=new r.a;function c(e,t,i){n.postMessage({cmd:e,msg:1<arguments.length&&void 0!==t?t:{}},2<arguments.length&&void 0!==i?i:[])}n.addEventListener("message",function(e){if(null===e.data)c("__ACK__",!1);else{var t=e.data,i=t.cmd,n=t.msg;switch(c("__ACK__",!0),i){case"__init__":try{var r=n.options,a=n.transmuxer;r.debug&&(d.a.enable=!0),o=u.a.resolve(a),s.on(d.a,d.a.MSG_NAME,function(e,t){return c("__log__",{type:e,message:t})}).on(o,"__idle__",function(){return c("__idle__")}).on(o,"error",function(e,t,i){return c("error",{code:e,message:t,data:i})}).on(o,"demux_info",function(e){return c("demux_info",e)}).on(o,"demux_data",function(e){var t=[];e.data instanceof ArrayBuffer&&t.push(e.data),c("demux_data",e,t)}).on(o,"remux_data",function(e){var t=[],i=e.data;Array.isArray(i)&&i.forEach(function(e){e instanceof ArrayBuffer&&t.push(e)}),c("remux_data",e,t)}).on(o,"done",function(){return c("done")}),c("__init__"),c("__idle__")}catch(e){throw"worker __init__ fail ".concat(e.stack||e.message)}break;case"push":o.push(n.buf,n.conf);break;case"reset":o&&o.reset()}}})}},function(e,t,i){i=i(566);e.exports=i},function(e,t,i){i(567),i(9),i(568),i(569),i(570),i(571),i(572),i(573),i(574),i(575),i(576),i(577),i(578),i(579);i=i(206);e.exports=i.Reflect},function(e,t,i){var n=i(22),r=i(105),a=i(103),o=i(35),i=i(23),s=r("Reflect","apply"),c=Function.apply;n({target:"Reflect",stat:!0,forced:!i(function(){s(function(){})})},{apply:function(e,t,i){return a(e),o(i),s?s(e,t,i):c.call(e,t,i)}})},function(e,t,i){var n=i(22),r=i(47),a=i(35),o=i(121),s=i(50);n({target:"Reflect",stat:!0,forced:i(23)(function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})}),sham:!r},{defineProperty:function(e,t,i){a(e);t=o(t,!0);a(i);try{return s.f(e,t,i),!0}catch(e){return!1}}})},function(e,t,i){var n=i(22),r=i(35),a=i(111).f;n({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var i=a(r(e),t);return!(i&&!i.configurable)&&delete e[t]}})},function(e,t,i){var n=i(22),a=i(39),o=i(35),s=i(76),c=i(111),d=i(179);n({target:"Reflect",stat:!0},{get:function e(t,i){var n,r=arguments.length<3?t:arguments[2];return o(t)===r?t[i]:(n=c.f(t,i))?s(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):a(n=d(t))?e(n,i,r):void 0}})},function(e,t,i){var n=i(22),r=i(47),a=i(35),o=i(111);n({target:"Reflect",stat:!0,sham:!r},{getOwnPropertyDescriptor:function(e,t){return o.f(a(e),t)}})},function(e,t,i){var n=i(22),r=i(35),a=i(179);n({target:"Reflect",stat:!0,sham:!i(263)},{getPrototypeOf:function(e){return a(r(e))}})},function(e,t,i){i(22)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,i){var n=i(22),r=i(35),a=Object.isExtensible;n({target:"Reflect",stat:!0},{isExtensible:function(e){return r(e),!a||a(e)}})},function(e,t,i){i(22)({target:"Reflect",stat:!0},{ownKeys:i(211)})},function(e,t,i){var n=i(22),r=i(105),a=i(35);n({target:"Reflect",stat:!0,sham:!i(392)},{preventExtensions:function(e){a(e);try{var t=r("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},function(e,t,i){var n=i(22),s=i(35),c=i(39),d=i(76),r=i(23),u=i(50),l=i(111),h=i(179),f=i(120);n({target:"Reflect",stat:!0,forced:r(function(){function e(){}var t=u.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)})},{set:function e(t,i,n){var r,a=arguments.length<4?t:arguments[3],o=l.f(s(t),i);if(!o){if(c(r=h(t)))return e(r,i,n,a);o=f(0)}if(d(o,"value")){if(!1===o.writable||!c(a))return!1;if(r=l.f(a,i)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,u.f(a,i,r)}else u.f(a,i,f(0,n));return!0}return void 0!==o.set&&(o.set.call(a,n),!0)}})},function(e,t,i){var n=i(22),r=i(35),a=i(223),o=i(158);o&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){r(e),a(t);try{return o(e,t),!0}catch(e){return!1}}})},function(e,t,i){var n=i(22),r=i(24),i=i(155);n({global:!0},{Reflect:{}}),i(r.Reflect,"Reflect",!0)},function(e,t,i){i(22)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,n=0;i<e.length;i++,n+=8)t[n>>>5]|=e[i]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var t=[],i=0;i<e.length;i+=3)for(var n=e[i]<<16|e[i+1]<<8|e[i+2],r=0;r<4;r++)8*i+6*r<=8*e.length?t.push(a.charAt(n>>>6*(3-r)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],i=0,n=0;i<e.length;n=++i%4)0!=n&&t.push((a.indexOf(e.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<2*n|a.indexOf(e.charAt(i))>>>6-2*n);return t}};e.exports=i},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(i(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))||!!e._isBuffer);var t}},function(e,t,i){"use strict";var n=i(22),r=i(104).every;n({target:"Array",proto:!0,forced:!i(116)("every")},{every:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}})},,,,,function(e,t,d){"use strict";d.r(t),d(9);function x(e,t,i,n,r,a,o,s,c,d,u,l,h){f()(this,x),this.vd=e,this.bid=R.a.getNewVd(e),this.vid=t,this.duration=n,this.vsize=r,this.realArea=a,this.isUsable=o,this.isLimit=s||!1,this.limitReason=c||[],this.fileFormat=i,this.playlist=d,this.drmType=u||1,this.watermark=l,this.dr=h}var i=d(2),f=d.n(i),n=d(3),c=d.n(n),r=d(38),l=d.n(r),a=d(4),h=d.n(a),o=d(5),u=d.n(o),s=d(1),p=d.n(s),_=(d(27),d(25),d(553),d(555),d(557),d(37),d(107),d(125),d(82),d(40)),g=(d(177),d(185),d(151),d(224),d(560),d(289)),w=d.n(g),y=d(42),v=d.n(y),S=(d(235),d(10),d(97),d(29),d(92),d(45),d(43),d(17),d(90),d(48),d(0)),R=d(157),A=d(28),L=d(14),T=(d(26),d(30)),P=d(83),M=d(21),I=d(8),E=d(15),D=d(113),m=window.location.protocol,b="420a8433732a6c99d1eae98fea69e55d/dash",q={vipauthUrl:"https://api.vip.iqiyi.com/services/cknsp.action",tsvipauthUrl:"https://api.vip.iqiyi.com/services/ckts.action",h5tmtsUrl:m+"//cache.m.iqiyi.com/jp/tmts/",vmsUrl:m+"//cache.video.iqiyi.com/dash",vmsAccess:m+"//103.44.59.54/3ea",vmsIPSuc:m+"//{{IP}}/3ea/"+b,vmsIPFail:m+"//access.if.iqiyi.com/3ea/"+b,pingbackV6Url:m+"//msg.qy.net/b",pingbackQosUrl:m+"//msg.qy.net/qos",isfanUrl:m+"//sns-api.iqiyi.com/apis/friend/follow.action",IVHistory:"".concat(m,"//iface2.iqiyi.com/lazy_cat/1.0/last_point"),IVZip:"".concat(m,"//iface2.iqiyi.com/lazy_cat/1.0/interact_info"),IVSevice:"".concat(m,"//iface2.iqiyi.com/lazy_cat/1.0/interactive"),IVFullpoints:"".concat(m,"//iface2.iqiyi.com/lazy_cat/1.0/full_points"),IVStoryLine:"".concat(m,"//iface2.iqiyi.com/lazy_cat/2.0/linear_story_line")},O=d(98),k={},C=new E.a("authremote"),N={getRequestURL:function(e){var t={version:"10.0",platform:"01010031010000000000",deviceId:A.a.getFluid()||A.a.getJsuid(),uid:P.a.getUid(),playType:"pcwh5",shareFlag:0,appname:"h5",dfp:D.a.get(),messageId:"h5_"+A.a.createUUID().replace(/-/gi,"")};return O.a.isTWLocale()&&(t.platform=I.a.getPtid(!0)),Object(M.a)(e,t),(e.fileFormat&&"f4v"!=e.fileFormat?q.tsvipauthUrl:q.vipauthUrl)+"?"+T.a.serializeParam(e)},getPreviewTime:function(e){var t=k[e];if(t){e=0;return t.data&&t.data.prv&&1==t.data.prv&&(1==t.previewType?e=60*t.previewTime*1e3:3==t.previewType&&(e=1e3*t.previewTime)),e}C.log("wrong time to invoke getPreviewTime!")},getAuthUid:function(e){e=k[e];if(e){if(e.data&&e.data.u)return e.data.u}else C.log("wrong time invoke getAuthUid is wrong!")},analyzeAuthData:function(e,t,i,n){var r=1==e.shareFlag,e=e.tvid;t&&t.hasOwnProperty("code")?(C.log("analyze authremote data,params: isShare = "+(r?"fgtw()":"")+",code = "+t.code),"A00000"===t.code?(t.bossKeyTime=+new Date,i(e,k[e]=t)):n(t.code,"CKNSP_RECHARGE_"+t.code,t)):n(null,"CKNSP_DATA_Fail")},request:function(t,n,r){var a=this,o=0;!function i(){o++;var e=a.getRequestURL(t);2===o&&(e=e.replace(/^https/gi,"http")),T.a.json({url:e,timeout:5e3,beforeSend:function(e){return C.log("check charge definition,params: url = "+e.url),e},success:function(e){a.analyzeAuthData(t,e,n,r)},failure:function(e,t){o<2?i():r(null,"CKNSP_HTTPFail")}})}()}},B=new E.a("AnalyzeVidls");function F(e,t){var i;t||(i=[]);var n=e.filter(function(e){return"265ts"===e.ff});0<n.length&&(e=n);for(var r=0;r<e.length;r++){var a=e[r],o=a.fs,s="",c=a.vid,d=R.a.getOldVd(a.bid),u=a.dr,l=a.s,h=a.drmType,f={},p=a.duration||0,_=a.vsize,g="";switch(o&&a.scrsz&&(f={width:(v=a.scrsz.split("x"))[0],height:v[1]}),a.ff){case"f4v":case"flv":s="f4v",a.fs&&0<a.fs.length&&(g=a.fs);break;case"ts":case"265ts":s=a.ff,"string"==typeof a.m3u8&&0<a.m3u8.length&&(g=a.m3u8);break;case"m4s":s=a.ff,"string"==typeof a.m3u8&&0<a.m3u8.length&&(g={m3u8:a.m3u8},a.drm&&"A00000"===a.drm.code&&(g.drm={keySystemServer:a.drm.license_host},7===h?g.drm.keySystem="com.widevine.alpha":8===h&&(g.drm.keySystem="com.microsoft.playready"),B.log("analyze  drmType 7widevine/8playready = "+h+",keySystem"+g.drm.keySystem+", server = "+g.drm.keySystemServer)));break;case"dash":switch(a.code){case 4:s="dash_vp9";break;case 5:s="dash_av1"}"string"==typeof a.m3u8&&0<a.m3u8.length&&(g=a.m3u8);break;case"mp4":"string"==typeof a.mp4Url&&a.mp4Url&&(g=a.mp4Url)}var y=!1,o=!0,v=[];void 0!==l&&(y=!0,o=0===parseInt(l,10),v=a.vut||[]);l=0;a.drm&&(l=a.drm.watermark||0),e[r].watermark&&(l=e[r].watermark||0);var m=new x(d=5===d&&4===u?51:d,c,s,p,_,f,o,y,v,g,h,l,u);if(t)d==t&&(g?i=m:B.log("analyze, targetvd is null, targetVd=".concat(t," ")));else{for(var b=!1,k=0;k<i.length;k++)i[k].vd==m.vd&&(b=!0,g&&(i[k]=m));b||i.push(m)}}return i}var U,j=d(241),V=d(86),W=d(114),H=d(128),z=d(183),Y=d(51),G=d(124),Q=d.n(G),K=d(87),$=d.n(K);d(127),d(99),d(270),(it=U=U||{}).CLEARKEY="org.w3.clearkey",it.WIDEVINE="com.widevine.alpha",it.PLAYREADY="com.microsoft.playready",it.PLAYREADY_CC="com.chromecast.playready";var Z,X,J,ee=new Map;ee.set("media",(Z=['video/mp4; codecs="hvc1.1.6.L93.90"','video/webm; codecs="vp09.00.40.08"','video/webm; codecs="av01.0.08M.08"'],function(){return new Promise(function(e){var i={};MediaSource&&MediaSource.isTypeSupported&&Z.forEach(function(e){try{i[e]=MediaSource.isTypeSupported(e);var t=e.split(";")[0];i[t]=i[t]||i[e]}catch(e){}}),e(i)})})),ee.set("drm",(X=[U.WIDEVINE,U.PLAYREADY],J=!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration),Q()($.a.mark(function e(){var r,t,a;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={status:"fullfilled"},t=[],J&&(a=[{videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}]}],X.forEach(function(n){var e=new Promise(function(e){var t=setTimeout(function(){r.status="pending",i()},1e3),i=function(){clearTimeout(t),e()};try{navigator.requestMediaKeySystemAccess(n,a).then(function(e){e=e.getConfiguration().sessionTypes,e=!!e&&0<=e.indexOf("persistent-license");r[n]={persistentState:e},i()}).catch(function(){r[n]=null,i()})}catch(e){i()}});t.push(e)})),e.abrupt("return",Promise.all(t).then(function(){return r}));case 4:case"end":return e.stop()}},e)})))),ee.set("domParser",function(){return new Promise(function(e){var t=!1;try{window.DOMParser&&(t=!!new DOMParser)}catch(e){}e(t)})});var te,ie=d(210),ne=d.n(ie),i=d(32),re=d.n(i);d(226),d(140),(n=te=te||{})[n.P2P=0]="P2P",n[n.CDN=1]="CDN";var r=d(265),ae=d(228),oe=d(201),a=d(251);function se(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)}}var o=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},ce=function(e){h()(i,e);var t=se(i);function i(){return f()(this,i),t.apply(this,arguments)}return i}((c()(ue,[{key:"len",get:function(){return this.end-this.start}}]),ue)),de=function(e){h()(i,e);var t=se(i);function i(){var e;return f()(this,i),(e=t.apply(this,arguments)).skipErrorMode_=!1,e.adjustTimestampMode_=!1,e.$ARTEFACT_ACTION=oe.a.DEPOSIT_LOADER,e.chunkMode=!1,e.chunkDataDone=!0,e}return c()(i,[{key:"currentLoaderMode",get:function(){return te[this.mode]}},{key:"endOfDown",get:function(){return!!this.eod}},{key:"skipErrorMode",get:function(){return this.skipErrorMode_},set:function(e){this.skipErrorMode_=e}},{key:"adjustTimestampMode",get:function(){return this.adjustTimestampMode_},set:function(e){this.adjustTimestampMode_=e}},{key:"seek",value:function(e,t){this.$error=null,this.$krt.ctx.emit(ae.a.STATE_CHANGE,{state:"loaderseek"})}},{key:"noticeDataPump",value:function(e){this.$krt.ctx.emit(ae.a.STATE_CHANGE,{state:"loaderpump",data:e})}},{key:"recoverAt",value:function(e){v()(p()(i.prototype),"recoverAt",this).call(this,e),this.$stream.restrictor.needSendInitSegment=!0,this.seek(e)}}]),i}(a.a);function ue(){f()(this,ue),this.start=0,this.end=0}o([r.c],de.prototype,"currentLoaderMode",null),o([r.c],de.prototype,"endOfDown",null);function le(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};f()(this,le),this.doRetry=!0,this.doDispatch=!0,this.allowIPDispatch=!0,this.timeout=1e4,this.retryNum=2,this.ipMaxRetry=1,this.flvKeyframesFusionSize=524288,Object(fe.a)(this,e)}var he=d(152),fe=d(202);function pe(e,t){for(var i,n,r=0,a=e.length-1;r<=a;){var o=t(n=e[i=(r+a)/2|0]);if(0<o)r=1+i;else{if(!(o<0))return n;a=i-1}}return null}d(169),d(19),d(139);var _e=d(593),ge=d(350),ye=d(379),ve=d(394),me=d(382),be=(d(77),d(53),d(54),d(55),d(56),d(57),d(58),d(59),d(60),d(61),d(62),d(63),d(64),d(65),d(66),d(67),d(68),d(69),d(70),d(71),d(72),d(73),d(74),d(75),d(46),d(115),d(329)),ke=d(614),xe=d(405),Se=d(242),Te=d(108),Pe=d(615),Ie=d(94),s=0,g="DISPATCH_EVENT_",we={DISPATCH_SUCCESS:g+s++,DISPATCH_FAIL:g+s++,DATA_LOAD_SUCCESS:g+s++,DATA_LOAD_PROGRESS:g+s++,DATA_LOAD_FAIL:g+s++,DNS_PARSER_REQUEST:g+5};function Ae(e,t,i,n,r,a){return Re((a=Re(Re(t,e),Re(n,a)))<<r|a>>>32-r,i)}function Ee(e,t,i,n,r,a,o){return Ae(t&i|~t&n,e,t,r,a,o)}function De(e,t,i,n,r,a,o){return Ae(t&n|i&~n,e,t,r,a,o)}function qe(e,t,i,n,r,a,o){return Ae(t^i^n,e,t,r,a,o)}function Oe(e,t,i,n,r,a,o){return Ae(i^(t|~n),e,t,r,a,o)}function Re(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function Le(e){return function(e){for(var t="0123456789abcdef",i="",n=0;n<4*e.length;n++)i+=t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15);return i}(function(e,t){e[t>>5]|=128<<t%32,e[14+(64+t>>>9<<4)]=t;for(var i=1732584193,n=-271733879,r=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=i,c=n,d=r,u=a,i=Ee(i,n,r,a,e[o+0],7,-680876936),a=Ee(a,i,n,r,e[o+1],12,-389564586),r=Ee(r,a,i,n,e[o+2],17,606105819),n=Ee(n,r,a,i,e[o+3],22,-1044525330);i=Ee(i,n,r,a,e[o+4],7,-176418897),a=Ee(a,i,n,r,e[o+5],12,1200080426),r=Ee(r,a,i,n,e[o+6],17,-1473231341),n=Ee(n,r,a,i,e[o+7],22,-45705983),i=Ee(i,n,r,a,e[o+8],7,1770035416),a=Ee(a,i,n,r,e[o+9],12,-1958414417),r=Ee(r,a,i,n,e[o+10],17,-42063),n=Ee(n,r,a,i,e[o+11],22,-1990404162),i=Ee(i,n,r,a,e[o+12],7,1804603682),a=Ee(a,i,n,r,e[o+13],12,-40341101),r=Ee(r,a,i,n,e[o+14],17,-1502002290),i=De(i,n=Ee(n,r,a,i,e[o+15],22,1236535329),r,a,e[o+1],5,-165796510),a=De(a,i,n,r,e[o+6],9,-1069501632),r=De(r,a,i,n,e[o+11],14,643717713),n=De(n,r,a,i,e[o+0],20,-373897302),i=De(i,n,r,a,e[o+5],5,-701558691),a=De(a,i,n,r,e[o+10],9,38016083),r=De(r,a,i,n,e[o+15],14,-660478335),n=De(n,r,a,i,e[o+4],20,-405537848),i=De(i,n,r,a,e[o+9],5,568446438),a=De(a,i,n,r,e[o+14],9,-1019803690),r=De(r,a,i,n,e[o+3],14,-187363961),n=De(n,r,a,i,e[o+8],20,1163531501),i=De(i,n,r,a,e[o+13],5,-1444681467),a=De(a,i,n,r,e[o+2],9,-51403784),r=De(r,a,i,n,e[o+7],14,1735328473),i=qe(i,n=De(n,r,a,i,e[o+12],20,-1926607734),r,a,e[o+5],4,-378558),a=qe(a,i,n,r,e[o+8],11,-2022574463),r=qe(r,a,i,n,e[o+11],16,1839030562),n=qe(n,r,a,i,e[o+14],23,-35309556),i=qe(i,n,r,a,e[o+1],4,-1530992060),a=qe(a,i,n,r,e[o+4],11,1272893353),r=qe(r,a,i,n,e[o+7],16,-155497632),n=qe(n,r,a,i,e[o+10],23,-1094730640),i=qe(i,n,r,a,e[o+13],4,681279174),a=qe(a,i,n,r,e[o+0],11,-358537222),r=qe(r,a,i,n,e[o+3],16,-722521979),n=qe(n,r,a,i,e[o+6],23,76029189),i=qe(i,n,r,a,e[o+9],4,-640364487),a=qe(a,i,n,r,e[o+12],11,-421815835),r=qe(r,a,i,n,e[o+15],16,530742520),i=Oe(i,n=qe(n,r,a,i,e[o+2],23,-995338651),r,a,e[o+0],6,-198630844),a=Oe(a,i,n,r,e[o+7],10,1126891415),r=Oe(r,a,i,n,e[o+14],15,-1416354905),n=Oe(n,r,a,i,e[o+5],21,-57434055),i=Oe(i,n,r,a,e[o+12],6,1700485571),a=Oe(a,i,n,r,e[o+3],10,-1894986606),r=Oe(r,a,i,n,e[o+10],15,-1051523),n=Oe(n,r,a,i,e[o+1],21,-2054922799),i=Oe(i,n,r,a,e[o+8],6,1873313359),a=Oe(a,i,n,r,e[o+15],10,-30611744),r=Oe(r,a,i,n,e[o+6],15,-1560198380),n=Oe(n,r,a,i,e[o+13],21,1309151649),i=Oe(i,n,r,a,e[o+4],6,-145523070),a=Oe(a,i,n,r,e[o+11],10,-1120210379),r=Oe(r,a,i,n,e[o+2],15,718787259),n=Oe(n,r,a,i,e[o+9],21,-343485551),i=Re(i,s),n=Re(n,c),r=Re(r,d),a=Re(a,u)}return Array(i,n,r,a)}(function(e){for(var t=Array(),i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}(e),8*e.length))}function Me(e){for(var t="",i=0;i<e.length;i+=16e3){var n=e.subarray(i,i+16e3);t+=String.fromCharCode.apply(null,n)}return t}function Ce(e){e=atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t="",i=0;i<e.length;i++)t+=("0"+e.charCodeAt(i).toString(16)).substr(-2);return t}d(267),d(533),d(278);var Ne=Te.f+"//103.44.59.54/3e8",Be="access.if.iqiyi.com";var Fe=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),(i=r.call(this)).netProxy_=new Te.a,i.dispatchURI_=new Pe.a(e),i.originDomain_=i.dispatchURI_.domain,i.originPath_=i.dispatchURI_.path,i.configure_=t,i}return c()(a,[{key:"startIPDispatch",value:function(){Y.a.warn("Start ip dispatch"),this._getIPList()}},{key:"_getIPList",value:function(){var i=this,e=Ne,n=Be;Y.a.log("Getting ip by: ".concat(e));var t=Se.a.DISPATCH,e=Object(Te.d)([e],{timeout:3e3,maxRetry:1});e.method="GET",e.responseType="text",e.callbacks={onSuccess:function(e){e&&e.data&&"string"==typeof e.data?(e=e.data.split(";")[0],e="{{IP}}".replace("{{IP}}",e),i._reqDispatchResult(e,!0)):i._reqDispatchResult(n)},onError:function(e){i._reqDispatchResult(n)},onTimeout:function(e,t){i._reqDispatchResult(n)},onAbort:function(){i._finalError(xe.a.ABORT)},onComplete:function(){}},i.ipReq_=i.netProxy_.request(t,e)}},{key:"_prepareURLParam",value:function(e){var t=this.dispatchURI_,i=this.originPath_,i="/3eb/"+Le(this.originDomain_)+btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"");return t.setScheme("https"),t.setDomain(e),t.setPath(i),t.query.update("ssl","1"),t.toString()}},{key:"_reqDispatchResult",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this,n=i._prepareURLParam(e);n||i.emit("FAIL"),Y.a.log("".concat(t?"ip":"domain"," proxy: ").concat(n));e=Se.a.DISPATCH;i.netProxy_||(i.netProxy_=new Te.a);t=Object(Te.d)([n],{timeout:i.configure_.ipTimeout,maxRetry:i.configure_.ipMaxRetry});t.method="GET",t.responseType="json",t.callbacks={onSuccess:function(e){i.emit("SUCCESS",e)},onError:function(e){e.url=n,i._finalError(xe.a.ERROR,e)},onTimeout:function(e,t){i._finalError(xe.a.TIMEOUT)},onAbort:function(){i._finalError(xe.a.ABORT)},onComplete:function(){}},i.disReq_=i.netProxy_.request(e,t)}},{key:"abort",value:function(){this.ipReq_&&this.ipReq_.abort(),this.disReq_&&this.disReq_.abort()}},{key:"destroy",value:function(){this.netProxy_=null,this.dispatchURI_=null,this.ipReq_&&(this.ipReq_.destroy(),this.ipReq_=null),this.disReq_&&(this.disReq_.destroy(),this.disReq_=null)}},{key:"_finalError",value:function(e,t){this.emit("FAIL",{reason:e,error:t})}}]),a}(Ie.EventEmitter);y=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return f()(this,a),(e=r.call(this)).hostLaborer_=null,e.ipLaborer_=null,e.configure_={maxRetry:1,timeout:5e3,allowIpRetry:!0,ipMaxRetry:1,ipTimeout:3e3},Y.a.assert(!!t,"Dispatch url should not be empty!"),e.uri_=new Pe.a(t),e.hostLaborer_=null,e.ipLaborer_=null,e.query=e.uri_.query,e.hooks={beforeLoad:function(){}},Object(fe.a)(e.configure_,i),e}return c()(a,[{key:"qkv",get:function(){var e=this.query;return{crossDomain:e.get("cross-domain"),pv:e.get("pv"),retry:e.get("retry"),client:e.get("client"),z:e.get("z"),l:e.get("l"),uid:e.get("uid"),cid:e.get("cid"),vid:e.get("vid"),t:e.get("t"),e:e.get("e"),tn:e.get("tn")}}},{key:"load",value:function(){this._startHostDispatch()}},{key:"abort",value:function(){this.hostLaborer_&&this.hostLaborer_.abort(),this.ipLaborer_&&this.ipLaborer_.abort()}},{key:"destroy",value:function(){this.hostLaborer_&&this.hostLaborer_.destroy(),this.ipLaborer_&&this.ipLaborer_.destroy()}},{key:"_startHostDispatch",value:function(){var i=this,e=this.uri_,n=this.configure_,t=Se.a.DISPATCH;i.hooks.beforeLoad(e);var r=e.toString();Y.a.log("Dispatch(normal) url: ".concat(r));e=Object(Te.d)([r],Object(fe.a)(Object(Te.b)(),{timeout:n.timeout,maxRetry:n.maxRetry}));e.method="GET",e.responseType="json",e.callbacks=Object(fe.a)(e.callbacks,{onSuccess:function(e){var t=e.data;Y.a.log("Dispatch(normal) take ".concat(e.netCost,"ms, ").concat(JSON.stringify(t))),i.emit(we.DISPATCH_SUCCESS,{l:t.l,z:t.z,t:t.t})},onError:function(e){Y.a.error("Dispatch(normal) error: ".concat(JSON.stringify(e)));var t=405===e.status&&e.response&&e.response.code&&0<=e.response.code.indexOf("D20");!n.allowIpRetry||t?i.emit(we.DISPATCH_FAIL,{reason:xe.a.ERROR,error:e}):i._startIPDispatch(r)},onTimeout:function(e,t){Y.a.error("Dispatch(normal) timeout: ".concat(r)),n.allowIpRetry?i._startIPDispatch(r):i.emit(we.DISPATCH_FAIL,{reason:xe.a.TIMEOUT})},onAbort:function(){i.emit(we.DISPATCH_FAIL,{reason:xe.a.ABORT})},onComplete:function(){}}),this.hostLaborer_=Te.e.request(t,e)}},{key:"_startIPDispatch",value:function(e){var i=this;this.emit(we.DNS_PARSER_REQUEST,e),this.ipLaborer_=new Fe(e),this.ipLaborer_.on("SUCCESS",function(e){var t=e.data;Y.a.log("Dispatch(ip) take ".concat(e.netCost,"ms, ").concat(JSON.stringify(t))),i.emit(we.DISPATCH_SUCCESS,{l:t.l,z:t.z,t:t.t})}),this.ipLaborer_.on("FAIL",function(e){i.emit(we.DISPATCH_FAIL,{reason:e.reason,error:e.error})}),this.ipLaborer_.startIPDispatch()}}]),a}(Ie.EventEmitter);var Ue=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return f()(this,a),(i=r.call(this,e,i)).retryCount=t,i.hooks.beforeLoad=i.beforeLoad_.bind(l()(i)),i}return c()(a,[{key:"beforeLoad_",value:function(){0<this.retryCount&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),a}(y);function je(e,t,i,n){var r=new Pe.a(e);switch(t){case 0:r.query.update("range","".concat(i,"-").concat(n));break;case 1:r.query.update("start","".concat(i)),r.query.update("end","".concat(n))}return r}var Ve=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).dispatcher=null,e.cdnLaborer=null,e.TAG="URIRemote",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new be.a,e.dispatcherResultDic_={},e.internalRetryCount_=0,e.internalMaxRetry_=1,e.allowRetry_=!0,e.allowIpDispatch_=!0,e.dnsInfo_={userinfo:"",idc:""},e}return c()(r,[{key:"removeDispatchDicKey",value:function(e){delete this.dispatcherResultDic_[e]}},{key:"startLoad",value:function(r){var e,a=this,t=r.fragment,i=new Pe.a(r.uri.toString()),n=t.uri.path,o=this.dispatcherResultDic_[n],s={startByte:r.pieces[0].startByte,endByte:r.pieces[r.pieces.length-1].endByte};r.loaderConfig&&(this.internalMaxRetry_=r.loaderConfig.retryNum,this.allowRetry_=r.loaderConfig.doRetry,this.allowIpDispatch_=r.loaderConfig.allowIPDispatch),o&&o.l?(t=je(o.l,r.rangeMode,s.startByte,s.endByte),this._loadCDNData(r,t)):(this.dispatcher&&(this.eventManager_.removeAll(),this.dispatcher.destroy()),o&&(e=o.z)&&i.query.update("z",e),this.dispatcher=new Ue(i.toString(),this.internalRetryCount_,{allowIpRetry:this.allowIpDispatch_}),this.eventManager_.on(this.dispatcher,we.DISPATCH_SUCCESS,function(e){a.dispatcherResultDic_[n]=e,a.dnsInfo_={userinfo:e.t,idc:e.z};e=je(e.l,r.rangeMode,s.startByte,s.endByte);a._loadCDNData(r,e)}).on(this.dispatcher,we.DNS_PARSER_REQUEST,function(e){a._doDNS(e)}).on(this.dispatcher,we.DISPATCH_FAIL,function(e){var t=e.reason,i=e.error,n=i?i.status:"";switch(t){case xe.a.TIMEOUT:a.allowRetry_&&a.internalRetryCount_<a.internalMaxRetry_?(a.internalRetryCount_++,a._internalRetry(r)):a.emit("FL",{category:"dispatcher-timeout",statusCode:n});break;case xe.a.ERROR:i&&405===i.status&&i.response&&i.response.code&&0<=i.response.code.indexOf("D20")?a.emit("FL",{category:"auth-error",statusCode:n}):a.allowRetry_&&a.internalRetryCount_<a.internalMaxRetry_?(a.internalRetryCount_++,a._internalRetry(r)):a.emit("FL",{category:"dispatcher-error",statusCode:n});break;case xe.a.ABORT:a.emit("AB");break;default:Y.a.warn("Unknown dispatch fail reason ".concat(t))}}),this.dispatcher.load())}},{key:"_loadCDNData",value:function(n,e){var r=this,a=e.toString(),t=Se.a.SEGMENT,e=Object(Te.d)([a],Object(fe.a)(Object(Te.b)(),{maxRetry:n.loaderConfig.retryNum,timeout:n.loaderConfig.timeout}));e.method="GET",e.callbacks=Object(fe.a)(e.callbacks,{onProgress:function(e,t){r.emit("PG",e,t)},onSuccess:function(e){var t=new Uint8Array(e.data);Y.a.log("".concat(r.LOG_TAG," cdn success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat((e.netCost||0).toFixed(3),"ms), ").concat(Object(ke.a)(e.speed),"/s, ").concat(e.url)),r.emit("SC",{bytes:t})},onError:function(e){Y.a.log("".concat(r.LOG_TAG," cdn error, http-status=").concat(e.status,", ").concat(e.url,", ").concat(a)),r.internalRetryCount_<r.internalMaxRetry_?(r.internalRetryCount_++,r._internalRetry(n)):(r._doDNS(a),r.emit("FL",{category:"cdn-error",statusCode:e.status}))},onTimeout:function(e,t,i){r.internalRetryCount_<r.internalMaxRetry_?(r.internalRetryCount_++,r._internalRetry(n)):(Y.a.log("".concat(r.LOG_TAG," cdn timeout, ").concat(i.url)),r._doDNS(a),r.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){r.emit("AB")},onComplete:function(){}}),Y.a.log("cdn url: ".concat(a)),this.cdnLaborer=Te.e.request(t,e)}},{key:"_internalRetry",value:function(e){var t=this.dispatcherResultDic_[e.uri.path];t&&t.l&&delete t.l,this.startLoad(e,!0)}},{key:"_doDNS",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher&&this.dispatcher.abort(),this.cdnLaborer&&this.cdnLaborer.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher&&this.dispatcher.destroy(),delete this.dispatcher,this.cdnLaborer&&this.cdnLaborer.destroy(),delete this.cdnLaborer,this.dnsInfo_={userinfo:"",idc:""}}}]),r}(Ie.EventEmitter),We=(d(112),d(404));var He=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments))._ipProxy=new Te.a,e._netProxy=new Te.a,e._ipRetry=0,e._parserUrl="",e._domainName="",e._parsing=!1,e._parserReq=null,e._data=null,e._ipReq=null,e}return c()(r,[{key:"doRequest",value:function(e){var t;e&&(e=new Pe.a((t={userInfo:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",idc:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",url:e,domainName:void 0}).url),t.domainName=e.domain,/[a-z]/i.test(t.domainName)?(this._parsing&&this.abort(),this._data=t,this._domainName=t.domainName,this._parsing=!0,this._request()):this.emit("success",{dmnm:t.domainName,ips:t.domainName,userinfo:t.userInfo,idc:t.idc}))}},{key:"abort",value:function(){this._parserReq&&this._parserReq.abort(),this._ipReq&&this._ipReq.abort(),this._parsing=!1,this._ipRetry=0,this._domainName="",this._data=null}},{key:"destroy",value:function(){this._parsing&&this.abort(),this._netProxy=null,this._parserReq&&(this._parserReq.destroy(),this._parserReq=null),this._ipProxy=null,this._ipReq&&(this._ipReq.destroy(),this._ipReq=null),this._parsing=!1,this._ipRetry=0,this._parserUrl="",this._domainName="",this._data=null}},{key:"_request",value:function(){var e,t,i=this;""!=i._parserUrl?(-1<i._parserUrl.indexOf("/3eb/")&&(i._parserUrl=i._parserUrl.replace("/3eb/","")),t=Te.f+"//"+i._parserUrl+"/3f0/hd.cloud.iqiyi.com/d?dn="+this._domainName+"&business=pcwPlayer&cross-domain=1",e=Se.a.DISPATCH,(t=Object(Te.d)([t],{timeout:3e3,maxRetry:1})).method="GET",t.responseType="text",t.callbacks={onSuccess:function(e){i._ipRetry=0,i.emit("success",{dmnm:i._domainName,ips:e.data,userinfo:i._data.userInfo,idc:i._data.idc}),i._parsing=!1,i._domainName=""},onError:function(){i._retryGetIpList()},onTimeout:function(){i._retryGetIpList()},onAbort:function(){},onComplete:function(){}},i._parserReq=i._netProxy.request(e,t)):i._getIPList(i._request.bind(i))}},{key:"_getIPList",value:function(i){var n=this,e=Ne;Y.a.log("dnsParser getting ip by: ".concat(e));var t=Se.a.DISPATCH,e=Object(Te.d)([e],{timeout:3e3,maxRetry:1});e.method="GET",e.responseType="text",e.callbacks={onSuccess:function(e){e&&e.data&&"string"==typeof e.data?(e=e.data.split(";"),n._parserUrl=e[0]):n._parserUrl=Be,i&&i()},onError:function(e){n._parserUrl=Be,i&&i()},onTimeout:function(e,t){n._parserUrl=Be,i&&i()},onAbort:function(){},onComplete:function(){}},n._ipReq=n._ipProxy.request(t,e)}},{key:"_retryGetIpList",value:function(){var e=this;this._ipRetry<1?(this._getIPList(function(){e._request()}),this._ipRetry++):this._parsing=!1}}]),r}(Ie.EventEmitter),ze=d(380);var Ye,Ge=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f()(this,a),(e=r.call(this))._config={maxBytesLength:104857600},e._pool={},e._byteLength=0,Object(fe.a)(e._config,t),e}return c()(a,[{key:"keys",get:function(){return Object.keys(this._pool)}},{key:"size",get:function(){return this._byteLength}},{key:"humanSize",get:function(){return Object(ke.a)(this._byteLength)}},{key:"isSafe",get:function(){return this._byteLength<this._config.maxBytesLength}},{key:"add",value:function(e,t){this._config;var i,n=this._pool,r=n[e];r?((i=new Uint8Array(r.byteLength+t.byteLength)).set(r,0),i.set(t,r.byteLength)):i=t,this._byteLength+=t.byteLength,n[e]=i}},{key:"del",value:function(e){var t=this._pool,i=t[e];i&&(this._byteLength-=i.byteLength,t[e]=null,delete t[e])}},{key:"read",value:function(e){return this._pool[e]}},{key:"drain",value:function(){for(var e in this._pool)this.del(e);0!==this._byteLength&&(this._pool={},this._byteLength=0)}}]),a}(Ie.EventEmitter);function Qe(e,t,i){var i=2<arguments.length&&void 0!==i?i:0,s=[],c=t.start(0)-i,d=t.end(t.length-1)+i;return e.forEach(function(a,o){var e=a.segments;0<e.length&&e.map(function(e,t,i){var n=e.startTime,r=e.startTime+e.duration;return e.enabled=(c<=n||c<r)&&(r<=d||n<d),e.fragIdx=o,e.fragKey=a.key,e.flattenIdx=s.length,s.push(e),e})}),{fragments:e,segments:s}}(b=Ye=Ye||{})[b.IDLE=0]="IDLE",b[b.LOADING=1]="LOADING",b[b.END=2]="END",b[b.ERROR=3]="ERROR";var Ke,m=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),(i=r.call(this)).error=null,i.eof=!1,i.eod=!1,i.state_=Ye.IDLE,i.silenced_=!1,i.TAG="CdnLoader",i._eventManager=new be.a,i._uuid=ve.a.create(),i.tickTimer_=new We.a(function(){return i.ticker_()}),i._downFragBufferTimeLength=30,i._bufferPool=new Ge,i._withBufferRetryCount=0,i._noBufferRetryCount=0,i.loaderBuff_=new ce,i._loaderConfig=new le,i._dnsParser=new He,i.krt=e,i.ipc=t,i._ctx=e.ctx,i._cfg=e.conf,i._maxBufferTimeLength=i._cfg.maxBufferTimeLength,i._withBufferMaxRetry=i._cfg.loaderWithBufferMaxRetry,i._noBufferMaxRetry=i._cfg.loaderNoBufferMaxRetry,i._eventManager.on(i._dnsParser,ze.a.DNS_PARSER_SUCCESS,function(e){i._ctx.emit(ze.a.DNS_PARSER_SUCCESS,e)}),i.tickTimer_.scheduleRepeated(i.silenced_?.5:.1),i}return c()(a,[{key:"silenced",set:function(e){this.silenced_=e,this.tickTimer_.adjustFrequency(this.silenced_?.5:.1)}},{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced_?"(silence)":"","]")}},{key:"loaderConfig",get:function(){return this._loaderConfig},set:function(e){Object(fe.a)(this._loaderConfig,e)}},{key:"state",get:function(){return this.state_},set:function(e){var t;this.state_!==e&&(t=this.state,this.state_=e,Y.a.log("".concat(this.LOG_TAG,": ").concat(Ye[t]," -> ").concat(Ye[e])),this.state_===Ye.END&&(this.eod=!0,Y.a.log("".concat(this.LOG_TAG,": EOD"))))}},{key:"reset",value:function(){this._uuid=ve.a.create(),this.eof=!1,this.eod=!1}},{key:"destroy",value:function(){this._eventManager.removeAll(),this._dnsParser.destroy(),this._bufferPool.drain(),this.tickTimer_.cancel(),delete this._ctx,delete this._cfg,delete this.error,delete this.tickTimer_,delete this._bufferPool,delete this._dnsParser}},{key:"ticker_",value:function(){var e=performance.now();!this.silenced_&&this.state===Ye.IDLE&&(null==this.lastGCTimestamp_||5e3<e-this.lastGCTimestamp_)&&(this.gc_&&this.gc_(),this.lastGCTimestamp_=e),this.tick_&&this.tick_()}},{key:"seek",value:function(e){Y.a.log("".concat(this.LOG_TAG," cdn loader seeking ").concat(e)),this.error=null,this.state!==Ye.ERROR&&this.state!==Ye.END||(this.state=Ye.IDLE),this.eod=!1,this.eof=!1}},{key:"getNextFrag",value:function(e){return null}},{key:"drainBufferPool",value:function(){this._bufferPool.drain()}},{key:"doDNSParser",value:function(e){this._dnsParser.doRequest(e.url,e.userinfo,e.idc)}},{key:"emitErr",value:function(e){1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||(this.error=e),this.emit("ER",e)}}]),a}(Ie.EventEmitter);(G=Ke=Ke||{})[G.UNKNOWN=-1]="UNKNOWN",G[G.HLS=0]="HLS",G[G.JDASH=1]="JDASH",G[G.F4V=2]="F4V",G[G.FLV=2]="FLV",G[G.MP4=3]="MP4",G[G.AMP4=4]="AMP4",G[G.DASH_VP9=5]="DASH_VP9",G[G.DASH_AV1=6]="DASH_AV1";var $e=(c()(Ze,[{key:"destroy",value:function(){this.pieces.splice(0,this.pieces.length),this.range.splice(0,this.range.length),this.loaderConfig=null,this.fragment=null,this.fragIdx=null,this.uri=null,this.buffer=null}}]),Ze);function Ze(e){f()(this,Ze),this.range=[],this.pieces=[],this.fragment=null,this.fragIdx=null,this.uri=null,this.rangeMode=1,this.buffer=null,this.loaderConfig=null,this.loaderConfig=e.loaderConfig,this.fragment=e.frag,this.fragIdx=e.fragIdx,this.range=e.range,this.buffer=e.bufferInfo,this.rangeMode=(void 0!==e.rangeMode&&null!==e.rangeMode?e:this).rangeMode;var t=this.pieces;if(0<this.fragment.segments.length)for(var i=this.fragment.segments,e=this.range[0],n=this.range[1],r=e;r<=n;r++)t.push(i[r]);else t.push(this.fragment.header);0<t.length&&(this.uri=t[0].uri)}var Xe=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this)).status=0,t.enabled=!0,t.uri=null,t.__url="",t.poolId="",t.fragKey="",t.bid="",t.type=e,t}return a}((c()(Je,[{key:"endTime",get:function(){return this.startTime+this.duration}}]),Je));function Je(){f()(this,Je),this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.idx=null,this.fragIdx=null}var et=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),(t=r.call(this,e,t)).TAG="flvSegmentsLoader",t.splicePTS=!1,t.skipErrorFrag=!1,t._fragments=[],t._uriRemote=new Ve,t._tempResetTime=-1,t._preLoadFIdx=-1,t._readPos={f:-1,s:-1},t._downPos={f:-1,s:-1,e:-1},t._allowFusion=!1,t.ipc.on("headerComplete",t.initSegs.bind(l()(t))),t}return c()(a,[{key:"duration",get:function(){var e=0,t=this._fragments;return e=0<t.length?(t=t[t.length-1]).startTime+t.duration:e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragments",get:function(){return this._fragments},set:function(e){0==e.length&&(this.eof=!0,this.eod=!0),this._fragments=e,this.krt.conf.openTest=!1}},{key:"applyRanges",value:function(e){var t=Qe(this._fragments,e).fragments;this._playRanges=e,this.fragments=t}},{key:"addFragment",value:function(e){var t,i=this.fragments;0<i.length&&(t=i[i.length-1],e.startTime=t.endTime,e.idx=t.idx+1),i.push(e),this.eof&&(this.eof=!1),this.eod&&(this.eod=!1,this.moveToNextDownPosOrEOD_()),Y.a.log("".concat(this.LOG_TAG," addfragment, length=").concat(this._fragments.length))}},{key:"creatUUID",value:function(){this._uuid=ve.a.create()}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,i=this._downPos.s,n=this._readPos.f,r=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0==e.length||n<0)return c;if(this.eof)0<e.length&&(d=e[e.length-1],c.start=d.endTime);else{var d=[n,r,t,i].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var u=n,l=!0,h=null;u<=t;u++){var f=e[u];if(f.segments&&0<f.segments.length&&3!=f.status&&4!=f.status){var p=f.segments,_=u===t?i:p.length-1;u===n&&(s=p[r].startTime);for(var g=u===n?r:0;g<=_;g++){var y=p[g];if(y.enabled){var v=this._bufferPool.read(y.poolId);if(v)l&&(l=!1,h=y.startTime),null!==h&&(a+=v.byteLength,o=y.endTime-h);else if(u!==t||g!==_){y="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(y.poolId,", ").concat(y.fragIdx,", ").concat(y.idx,", ").concat(y.uri.toString(),", ").concat(y.levelId,", ").concat(y.flattenIdx,"}, ").concat(y.levelId,", ").concat(y.startByte,", ").concat(y.startTime);throw Y.a.error(y),new Error(y)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof||this._readPos.f<0||0==this._fragments.length)return null;var e=null,t=this._fragments[this._readPos.f];if(0==t.segments.length||this.error)return null;var i=-1<this._readPos.s?t.segments[this._readPos.s]:null;return i&&!i.enabled?(this.moveToNextReadPosOrEOF_(t,i),null):i&&2!==i.status?null:(i&&(e={type:Ke.FLV,data:this._bufferPool.read(i.poolId),done:!0,meta:{uid:"".concat(i.levelId,"-").concat(i.fragIdx,"-").concat(i.idx),fragIdx:t.idx,segIdx:i.idx,vac:t.additional,fragKey:i.fragKey,byteOffset:i.startByte}},Y.a.log("".concat(this.LOG_TAG," got tag, pos=").concat(this._readPos.f,"-").concat(this._readPos.s,", startTime=").concat(i.startTime,", endTime=").concat(i.endTime,", uid=").concat(e.meta.uid)),this.splicePTS&&(e.meta.offset=t.startTime),this.moveToNextReadPosOrEOF_(t,i)),e)}},{key:"seek",value:function(e){v()(p()(a.prototype),"seek",this).call(this,e),this._allowFusion=!1,this._withBufferRetryCount=0,this._noBufferRetryCount=0,this.resetReadPosByTime_(e),this.krt.conf.openTest=!1}},{key:"resetReadPosByTime_",value:function(e){if(0!=this._fragments.length){var t=this.findSegmentByPTS(e),i=t.fragment,t=t.segment;if(!i)throw Error("reset pos error, pts/frag/segment(".concat(e,"/").concat(i,")"));0==i.segments.length&&(this._tempResetTime=e);i=i.idx,t=t?t.idx:0;this._readPos.f=i,this._readPos.s=t,this._downPos.f=i,this._downPos.s=t,this._downPos.e=this._downPos.s;t=this.findPieceByPos_(this._downPos).segment;t&&2===t.status&&this.moveToNextDownPosOrEOD_(),Y.a.log("".concat(this.LOG_TAG," reset pos, time=").concat(e,", readPos=").concat(JSON.stringify(this._readPos),", downPos=").concat(JSON.stringify(this._downPos))),this.state===Ye.LOADING&&this.abort_(),this.tick_()}}},{key:"findSegmentByPTS",value:function(){var e=this.findIdxByTime_(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0),t=null,i=null;return-1<e.f&&0<(t=this._fragments[e.f]).segments.length&&(i=t.segments[e.s]),t?{fragment:t,segment:i}:null}},{key:"findIdxByTime_",value:function(e){for(var t=-1,i=-1,n=this._fragments.length,r=0<n?this._fragments[n-1]:null,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&(e<this._fragments[a].endTime||a==n-1&&e==r.endTime)){t=a,0<this._fragments[a].segments.length&&(i=this.findSegIdxByTime_(a,e));break}return{f:t,s:i}}},{key:"findSegIdxByTime_",value:function(e,t){e=pe(this._fragments[e].segments,function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0});return e?e.idx:-1}},{key:"findSegIdxByByte_",value:function(e,t){e=pe(this._fragments[e].segments,function(e){return e.endByte<=t?1:e.startByte>t?-1:0});return e?e.idx:-1}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){var e;this.eod||this.error||!this._fragments||0===this._fragments.length||(e=this.getUnreadBufInfo(),this.state===Ye.IDLE&&e.timeLength<this._maxBufferTimeLength&&this.loadFragment_(e))}},{key:"decideLoadEndPos_",value:function(){var e,t,i=this._downPos.f,n=this._downPos.s,r=n;return 2<n&&(this._allowFusion?(e=(t=this._fragments[i].segments)[n],n=t[t.length-1],e&&(t=this.loaderConfig.flvKeyframesFusionSize,(t=e.startByte+t)>=n.endByte?r=n.idx:-1!==(t=this.findSegIdxByByte_(i,t))&&(r=t))):this._allowFusion=!0),r}},{key:"loadFragment_",value:function(e){var t=this.findPieceByPos_(this._downPos),i=t.fragment,t=t.segment;0==i.segments.length&&2==i.header.status||t&&2==t.status||2==i.status||(this._preLoadFIdx!==i.idx&&this.skipErrorFrag&&(this.emit("FLS",i),this._preLoadFIdx=i.idx),e=new $e({frag:i,fragIdx:this._downPos.f,range:[this._downPos.s,this.decideLoadEndPos_()],bufferInfo:e,rangeMode:0,loaderConfig:this.loaderConfig}),Y.a.log("".concat(this.LOG_TAG,": load task ").concat(e.range.join("-")," of ").concat(this._downPos.f,", levelId = ").concat(i.levelId)),this.loadContiguousSegments_(e))}},{key:"loadContiguousSegments_",value:function(i){var d=this,u=i.pieces,l=i.fragIdx,n=i.loaderConfig,e=this._eventManager,t=this._uriRemote,h=this,f=this._fragments[l],p=this._fragments.length,_=0==f.segments.length;h.state=Ye.LOADING,e.removeAll(),e.on(t,"PG",function(e,t){}),e.on(t,"SC",function(e){var t=e.bytes,e=-1,i=-1;if(_||(e=u[0].idx,i=u[u.length-1].idx),Y.a.log("".concat(h.LOG_TAG,": load ok, header:").concat(_,", seg ").concat(e,"-").concat(i," of frag ").concat(l,"->[0,").concat(p-1,"]")),_)f.header.status=2,h.state=Ye.IDLE,d.ipc.emit("fragmentHeader",{bytes:t,meta:{fragIdx:l,header:!0,uid:"".concat(f.header.levelId,"-").concat(l,"-header")}});else{for(var n=f.segments[e].startByte,r=!1,a=e;a<=i;a++){var o,s,c=f.segments[a];d._bufferPool.read(c.poolId)||(o=c.startByte-n,s=c.endByte-n,s=t.subarray(o,s),d._bufferPool.del(c.poolId),d._bufferPool.add(c.poolId,s),r=!0),c.status=2}h.state=Ye.IDLE,h.moveToNextDownPosOrEOD_(),r&&d.emit("DA")}}),e.on(t,"FL",function(e){var t;d.skipErrorFrag?(d.state=Ye.IDLE,f.status=3,Y.a.log("".concat(h.LOG_TAG,": load error, skipError, type=").concat(JSON.stringify(e),", errorPos=").concat(JSON.stringify(d._downPos))),h.emitErr(new _e.a(ge.a.CRITICAL,ye.a.LOADER,me.a.DATA_AD_ERROR),!1),d.moveToNextDownPosOrEOD_()):(t=0<d.getUnreadBufInfo().timeLength,"auth-error"!=e.category&&n.doRetry?t?d._withBufferRetryCount<d._withBufferMaxRetry?(d._withBufferRetryCount++,d.reloadTask_(i)):d.doFinalError_(e,i):d._noBufferRetryCount<d._noBufferMaxRetry?(d._noBufferRetryCount++,d.reloadTask_(i)):d.doFinalError_(e,i):d.doFinalError_(e,i))}),e.on(t,"AB",function(){var e=-1,t=-1;if(!_)for(var e=u[0].idx,t=u[u.length-1].idx,i=e;i<=t;i++){var n=f.segments[i];n.status=0,h._bufferPool.del(n.poolId)}Y.a.log("".concat(h.LOG_TAG,": load, onAbort ").concat(e," - ").concat(t," of ").concat(l,", header=").concat(_)),h.state!==Ye.ERROR&&(h.state=Ye.IDLE)}),e.on(t,"DP",function(e){h.doDNSParser(e)}),t.startLoad(i)}},{key:"initSegs",value:function(e){if(0!=e.keyframePositions.length&&0!=e.keyframeTimes.length){var t=e.meta,i=t.fragIdx,n=t.uid,r=this._fragments[i],t="".concat(r.header.levelId,"-").concat(i,"-header");if(0<r.segments.length||n!==t)Y.a.log("".concat(this.LOG_TAG,",initSegs has created segments or levelId error, return, length=").concat(r.segments.length,", cuid=").concat(t,", uid=").concat(n));else{r.additional={ac:e.ac,vc:e.vc,naluSizeLength:e.naluSizeLength},r.duration=e.duration;var i=e.keyframePositions.join(","),n=e.keyframeTimes.join(","),a=0;this.splicePTS&&(a=r.startTime);for(var o=e.keyframePositions,s=e.keyframeTimes,c=0,d=0,u=0,l=0,h=e.filesize,f=2;f<=o.length;f++){var d=f<o.length?(u=o[f-1],l=o[f],c=0==s[f-1]?0:s[f-1],0==s[f]?0:s[f]):(u=o[f-1],l=h-1,c=s[f-1],this.splicePTS?e.duration:r.endTime),p=new Xe(Ke.FLV);p.uri=new Pe.a(r.uri.toString()),p.idx=f-2,p.startTime=a+c,p.duration=d-c,p.startByte=u,p.endByte=l,p.poolId="flv-"+this._uuid+"-"+r.idx+"-"+p.idx,p.fragIdx=r.idx,p.fragKey=r.key,p.levelId=r.levelId,r.segments.push(p)}Y.a.log("".concat(this.LOG_TAG," initSegs header ok, keyframePositions=").concat(i,", keyframeTimes=").concat(n,",fid=").concat(t,", segs = ").concat(r.segments.length,", levelId=").concat(r.levelId)),this.applyRanges(this._playRanges),this.refreshFragmentsTime_(),0<=this._tempResetTime&&(this.resetReadPosByTime_(this._tempResetTime),this._tempResetTime=-1)}}}},{key:"refreshFragmentsTime_",value:function(){if(this.splicePTS)for(var e,t=this._fragments.length,i=0;i<t;i++){var n=this._fragments[i];e&&(0==n.segments.length&&(n.duration=n.endTime-e.endTime),n.startTime=e.endTime),e=n}}},{key:"doFinalError_",value:function(e,t){var i=e.category,n=e.statusCode,r=t.fragIdx,a=t.pieces,e=this._fragments[r],t=0===e.segments.length;if(!t&&0<a.length)for(var o=0;o<a.length;o++)a[o].status=3;e.status=3,this.state=Ye.ERROR;var s=me.a.UNKNOWN;switch(i){case"auth-error":s=me.a.DATA_AUTH_Error;break;case"cdn-error":s=me.a.DATA_FLV_ERROR;break;case"cdn-timeout":s=me.a.DATA_FLV_TIMEOUT;break;case"dispatcher-error":case"dispatcher-timeout":s=me.a.DATA_FLV_DISPATCH_ERROR;break;default:this.state!==Ye.ERROR&&(this.state=Ye.IDLE)}s==me.a.UNKNOWN&&this.state!==Ye.ERROR?this.state=Ye.IDLE:this.error||this.emitErr(new _e.a(ge.a.CRITICAL,ye.a.LOADER,s,n));e="no-segment";t||(i=a[0].idx,n=0<a.length&&!t?a[a.length-1].idx:i,e="seg: ".concat(i,"-").concat(n)),Y.a.log("".concat(this.LOG_TAG,": load finalError, ").concat(e," of ").concat(r,", header=").concat(t,", type=").concat(s))}},{key:"reloadTask_",value:function(e){var t=this._uriRemote;t.reset(),t.dispatcher&&t.dispatcher.destroy(),t.cdnLaborer&&t.cdnLaborer.destroy(),Y.a.log("".concat(this.LOG_TAG,": reload task ").concat(e.range.join("-")," of ").concat(this._downPos.f)),this.loadContiguousSegments_(e)}},{key:"abort_",value:function(){this._uriRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0||this._downPos.f<this._readPos.f))for(var e,t,i,n,r,a=this._bufferPool.keys,o=this._readPos.f,s=this._downPos.f,c=0;c<a.length;c++)t=(i=a[c]).split("-"),e=parseInt(t[2],10),t=parseInt(t[3],10),e<o||s<e?this.gcSeg_(i,e,t):e==o&&e==s?(n=this._readPos.s,r=this._downPos.s,(t<n||r<t)&&this.gcSeg_(i,e,t)):e==o?t<(n=this._readPos.s)&&this.gcSeg_(i,e,t):e==s&&t>(r=this._downPos.s)&&this.gcSeg_(i,e,t)}},{key:"gcSeg_",value:function(e,t,i){t=this._fragments[t];0<t.segments.length&&(i=t.segments[i],this._bufferPool.del(e),2==t.status&&(t.status=0),i.status=0)}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],i=null;return{fragment:t,segment:i=t&&0<t.segments.length?t.segments[e.s]:i}}},{key:"moveToNextDownPosOrEOD_",value:function(){this._downPos.s=this._downPos.e;for(var e=this.findPieceByPos_(this._downPos),t=e.fragment,e=e.segment,i=t.idx,n=e?e.idx:0,r=this._fragments.length,a=void 0,o=-1,s=-1,c=i;c<r;c++){var d=this._fragments[c],u=d.segments.length;if(3==d.status||4==d.status){if(!this.skipErrorFrag){a=!0;break}}else{if(0==u){o=d.idx,s=0;break}for(var l=!1,h=c==i?n+1:0;h<u;h++){var f=d.segments[h];if(f.enabled&&0==f.status){o=d.idx,s=h,l=!0;break}}if(l)break}}0<=o?(this._downPos.f=o,this._downPos.s=s,this._downPos.e=this._downPos.s):a||(e=this._fragments[this._fragments.length-1],this._downPos.f=e.idx,this._downPos.s=0<e.segments.length?e.segments.length-1:0,this._downPos.e=this._downPos.s,this.state=Ye.END)}},{key:"moveToNextReadPosOrEOF_",value:function(e,t){var i=e.idx,n=t.idx,r=this._fragments.length,a=-1,o=-1,e=!1;if(0<r){t=this._fragments[r-1];0<t.segments.length&&t.segments[t.segments.length-1].enabled&&(e=!0);for(var s=i;s<r;s++){var c=this._fragments[s],d=c.segments.length;if(3==c.status||4==c.status||0==d){a=c.idx,o=0;break}for(var u=!1,l=s==i?n+1:0;l<d;l++)if(c.segments[l].enabled){a=c.idx,o=l,u=!0;break}if(u)break}}0<=a?(this._readPos.f=a,this._readPos.s=o):e&&(this.eof=!0,Y.a.info("".concat(this.LOG_TAG,": EOF")),this.krt.conf.openTest=!0)}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._tempResetTime=-1,this._readPos.f=this._readPos.s=-1,this._downPos.f=this._downPos.s=this._downPos.e=-1,this._lastBufPos=void 0,this._lastBufInf=void 0,this.state!==Ye.IDLE&&(this.state===Ye.LOADING?this.abort_():this.state=Ye.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._uriRemote.reset(),v()(p()(a.prototype),"destroy",this).call(this)}}]),a}(m),tt=d(413);var K=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},it=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this,Object.assign(Object.assign({},e),{pkg:tt,watch:["manifest","loader"]}))).$TAG="FlvLoader",t.mode=te.CDN,t.chunkMode=!0,t.loaderDataArrived_=!1,t.loader_=new et(t.$krt,t.$ipc),t.$eventManager.on(t.loader_,"DA",function(){t._onLoaderDataArrived()}).on(t.loader_,"ER",function(e){t.$throwError(e)}).on(t.loader_,"FLS",function(e){t.emit("FLS",e)}),t}return c()(a,[{key:"$silenced",get:function(){return v()(p()(a.prototype),"$silenced",this)},set:function(e){ne()(p()(a.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof&&this.chunkDataDone}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"adjustTimestampMode",set:function(e){this.loader_.splicePTS=e,ne()(p()(a.prototype),"adjustTimestampMode",e,this,!0)}},{key:"skipErrorMode",set:function(e){(this.loader_.skipErrorFrag=e)&&(this.loader_.loaderConfig=new le({doRetry:!1,retryNum:1,allowIPDispatch:!1,ipMaxRetry:0,timeout:5e3})),ne()(p()(a.prototype),"skipErrorMode",e,this,!0)}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,i=e.manifest,n=e.loader,e=i&&!Object(he.c)(i)&&this.$manifestArtifact!==i;if(this.$selfArtifact!==n&&(this.$selfArtifact=n),e){e=this.chunkDataDone;if(i.other&&(this.chunkDataDone=i.other.done),Y.a.log("".concat(this.LOG_TAG," manifest changed, done=").concat(this.chunkDataDone,", fragments=").concat(i.fragments.length,", levelId=").concat(i.levelId)),e)this.$manifestArtifact=i,this.loader_.creatUUID(),this.loader_.drainBufferPool(),this.loader_.fragments=i.fragments,this.applyRanges(t.playRanges),0<t.playRanges.length&&(e=t.playRanges.start(0),this.seek(e));else if(0<i.fragments.length){for(var r=0;r<i.fragments.length;r++)this.loader_.addFragment(i.fragments[r]);this.applyRanges(t.playRanges)}}this.pumpLoader_(),Object(he.c)(i)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){0!==e.length&&this.loader_.applyRanges(e)}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.$manifestArtifact,t=this.$selfArtifact;Object(he.c)(e)||!Object(he.c)(t)&&null!=t||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&this.loader_.error||(t=(e=this.loader_.read())&&!!e.data,this.noticeDataPump(t),t&&this.$provideArtefact(e))}},{key:"seek",value:function(e){v()(p()(a.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){v()(p()(a.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),a}(de);function nt(e,t){return parseFloat(e+"."+t)}K([r.c],it.prototype,"fragments",null),K([r.c],it.prototype,"findPieceAt",null);var rt=function(e){h()(o,e);var i,n,t=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function o(e){return f()(this,o),(e=t.call(this,e)).TAG="hlsSegmentsLoader",e._fragments=[],e._segments=[],e._hlsRemote=new Ve,e._readPos={f:-1,s:-1,b:-1},e._downPos={f:-1,s:-1,b:-1},e}return c()(o,[{key:"duration",get:function(){var e=0,t=this._fragments;return e=0<t.length?(t=t[t.length-1]).startTime+t.duration:e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragsWithSegs",set:function(e){this.eof=!1,this.eod=!1,this._fragments=e.frags,this._segments=e.segs}},{key:"fragments",get:function(){return this._fragments}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,i=this._downPos.s,n=this._readPos.f,r=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0===e.length||n<0)return c;if(this.eof)0<e.length&&(d=e[e.length-1],c.start=d.endTime);else{var d=[n,r,t,i].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var u=n,l=!0,h=null;u<=t;u++){var f=e[u];if(f){var p=f.segments,_=u===t?i:p.length-1;u===n&&(s=p[r].startTime);for(var g=u===n?r:0;g<=_;g++){var y=p[g];if(y.enabled){var v=this._bufferPool.read(y.poolId);if(v)a+=v.byteLength,o+=y.duration,l&&(l=!1,h=y.startTime),null!==h&&(a+=v.byteLength,o=y.endTime-h);else if(u!==t||g!==_){y="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(y.poolId,", ").concat(y.fragIdx,", ").concat(y.idx,", ").concat(y.uri.toString(),", ").concat(y.bid,", ").concat(y.flattenIdx,"}, ").concat(y.levelId,", ").concat(y.startByte,", ").concat(y.startTime);throw Y.a.error(y),new Error(y)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof)return null;var e=this.findPieceByPos_(this._readPos),t=e.fragment,i=e.segment;if(!i)return null;if(!i.enabled)return this.moveToNextReadPosOrEOF_(),null;if(1!==i.status&&2!==i.status)return this.tryToSyncReadAndDownPos_(),null;var n=this._fragments.length,r=this._segments.length,a=this._readPos.f,o=this._readPos.s,s=this._readPos.b,c=i.startByte+s,d=this._bufferPool.read(i.poolId),u=null,l=!1,e=i.levelId,u=s>=d.byteLength?null:(Y.a.log("".concat(this.LOG_TAG,": Read seg ").concat(i.poolId,", flatten idx ").concat(i.flattenIdx,"->[0,").concat(r-1,"] & inner seg idx ").concat(o,"->[0,").concat(t.segments.length-1,"] of frag ").concat(a,"->[0,").concat(n-1,"], status:").concat(i.status,", level:").concat(e,", start/duration(").concat(i.startTime.toFixed(3),"/").concat(i.duration.toFixed(3),"), bytes:").concat(i.endByte-i.startByte)),d.subarray(s,d.byteLength));return 1===i.status?this._readPos.b=d.byteLength:2===i.status&&(l=!0,this.moveToNextReadPosOrEOF_()),{type:Ke.HLS,data:u,done:l,meta:{uid:"".concat(e,"-").concat(a,"-").concat(o),level:e,fragIdx:a,segIdx:o,fragKey:i.fragKey,byteOffset:c,range:[s,d.byteLength]}}}},{key:"seek",value:function(e){v()(p()(o.prototype),"seek",this).call(this,e),this._withBufferRetryCount=0,this._noBufferRetryCount=0;var t,i,n=this.findSegmentByPTS(e),r=n.fragment,a=n.segment;r&&a?(t=nt(r.idx,a.idx),i=nt(this._readPos.f,this._readPos.s),n=nt(this._downPos.f,this._downPos.s),n=i<=t&&t<=n,this._readPos.f=r.idx,this._readPos.s=a.idx,this._readPos.b=0,this._downPos.f=r.idx,this._downPos.s=a.idx,this._downPos.b=0,2===this.findPieceByPos_(this._downPos).segment.status&&this.moveToNextDownPosOrEOD_(),n||this.state!==Ye.LOADING||this.abort_(),this.tick_()):Y.a.error("Mismatch candidate pts/frag/segment(".concat(e,"/").concat(r,"/").concat(a,")"))}},{key:"findSegmentByPTS",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.findPieceByPTS_(e,this._fragments),i=null;return{fragment:t,segment:i=t?this.findPieceByPTS_(e,t.segments):i}}},{key:"findPieceByPTS_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0;return i&&!this.pieceWithinToleranceTest_(e,i)?i:pe(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0;return t.startTime+t.duration<=(e=e<0?0:e)?1:t.startTime>e&&t.startTime?-1:0}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){var e;this.eod||this.krt.error||!this._segments||0===this._segments.length||this.state!==Ye.IDLE||((e=this.getUnreadBufInfo()).timeLength>this._maxBufferTimeLength||this.checkLoad_(e))}},{key:"checkLoad_",value:function(e){var t=this.findPieceByPos_(this._downPos),i=t.fragment,t=t.segment;i&&t&&(e=new $e({frag:i,fragIdx:this._downPos.f,range:[this._downPos.s,this._downPos.s],bufferInfo:e,loaderConfig:this.loaderConfig}),this.loadSingleSegment_(e))}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],i=null;return{fragment:t,segment:i=t?t.segments[e.s]:i}}},{key:"loadSingleSegment_",value:function(i){var n=this,e=i.pieces,r=i.fragIdx,a=i.buffer,o=this,s=e[0],c=this._fragments[r],d=this._fragments.length;if(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])){if(1===s.status)return;if(2===s.status)return}o.state=Ye.LOADING;this._eventManager.removeAll(),this._eventManager.on(this._hlsRemote,"PG",function(e,t){}),this._eventManager.on(this._hlsRemote,"SC",function(e){var t=e.bytes,i="seg ".concat(s.idx,"->[0,").concat(c.segments.length-1,"]"),e="frag ".concat(r,"->[0,").concat(d-1,"]");o._bufferPool.del(s.poolId),o._bufferPool.add(s.poolId,t),s.status=2,Y.a.log("".concat(o.LOG_TAG,": Loaded ").concat(s.poolId,", ").concat(i," of ").concat(e)),o.isCurrentDownSeg_(s)&&o.moveToNextDownPosOrEOD_(),o.state!==Ye.ERROR&&(o.state=Ye.IDLE),o.emit("DA")}),this._eventManager.on(this._hlsRemote,"FL",function(e){var t=0<n.getUnreadBufInfo().timeLength;"auth-error"==e.category?n.doFinalError_(e,i,s):t?n._withBufferRetryCount<n._withBufferMaxRetry?(n._withBufferRetryCount++,n.reloadSingleSegment_(i)):n.doFinalError_(e,i,s):n._noBufferRetryCount<n._noBufferMaxRetry?(n._noBufferRetryCount++,n.reloadSingleSegment_(i)):n.doFinalError_(e,i,s)}),this._eventManager.on(this._hlsRemote,"AB",function(){var e="seg ".concat(s.idx,"->[0,").concat(c.segments.length-1,"]"),t="frag ".concat(r,"->[0,").concat(d-1,"]");Y.a.log("".concat(o.LOG_TAG,": onAbort ").concat(e," of ").concat(t,", buffer ").concat(a.timeLength,"s")),s.status=0,o._bufferPool.del(s.poolId),o.state!==Ye.ERROR&&(o.state=Ye.IDLE)}),this._eventManager.on(this._hlsRemote,"DP",function(e){o.doDNSParser(e)}),this._hlsRemote.startLoad(i)}},{key:"isCurrentDownSeg_",value:function(e){return!!e&&e.idx===this._downPos.s&&e.fragIdx===this._downPos.f}},{key:"doFinalError_",value:function(e,t,i){var n=this,r=e.category,a=e.statusCode,o=t.fragIdx,s=n._fragments[o],c=n._fragments.length;switch(r){case"cdn-error":case"dispatcher-error":case"auth-error":if(n.isCurrentDownSeg_(i)){i.status=3,n.state=Ye.ERROR,Y.a.log("".concat(n.LOG_TAG,": onError: ").concat(i.fragIdx,"-").concat(i.idx));var d=me.a.UNKNOWN;switch(r){case"cdn-error":d=me.a.DATA_HLS_CDN_ERROR;break;case"auth-error":d=me.a.DATA_AUTH_Error;break;case"dispatcher-error":d=me.a.DATA_HLS_DISPATCH_ERROR}n.emitErr(new _e.a(ge.a.CRITICAL,ye.a.LOADER,d,a))}else{var u="seg ".concat(i.idx,"->[0,").concat(s.segments.length-1,"]"),l="frag ".concat(o,"->[0,").concat(c-1,"]");Y.a.error("".concat(n.LOG_TAG,": onError ").concat(u," of ").concat(l,", buffer ").concat(t.buffer.timeLength,"s"))}break;case"cdn-timeout":case"dispatcher-timeout":n.isCurrentDownSeg_(i)?(i.status=4,n.state=Ye.ERROR,Y.a.log("".concat(n.LOG_TAG,": onTimeout: ").concat(i.fragIdx,"-").concat(i.idx)),n.emitErr(new _e.a(ge.a.CRITICAL,ye.a.LOADER,"cdn-timeout"===r?me.a.DATA_HLS_CDN_TIMEOUT:me.a.DATA_HLS_DISPATCH_TIMEOUT))):(u="seg ".concat(i.idx,"->[0,").concat(s.segments.length-1,"]"),l="frag ".concat(o,"->[0,").concat(c-1,"]"),Y.a.error("".concat(n.LOG_TAG,": onTimeout ").concat(u," of ").concat(l,", buffer ").concat(t.buffer.timeLength,"s")));break;default:n.state!==Ye.ERROR&&(n.state=Ye.IDLE)}}},{key:"getNextAvailableSegByFlatten_",value:function(e){var t=this._segments[e];return t?t.enabled?t:this.getNextAvailableSegByFlatten_(e+1):null}},{key:"moveToNextDownPosOrEOD_",value:function(){var e=this.findPieceByPos_(this._downPos).segment,e=this.getNextAvailableSegByFlatten_(e.flattenIdx+1);e?(this._downPos.f=e.fragIdx,this._downPos.s=e.idx,this._downPos.b=0,2===e.status&&this.moveToNextDownPosOrEOD_()):this.state=Ye.END}},{key:"moveToNextReadPosOrEOF_",value:function(){var e=this._fragments,t=e[this._readPos.f].segments[this._readPos.s],e=e[e.length-1],e=0<e.segments.length&&e.segments[e.segments.length-1].enabled,t=this.getNextAvailableSegByFlatten_(t.flattenIdx+1)||this._segments[t.flattenIdx+1];t?(this._readPos.f=t.fragIdx,this._readPos.s=t.idx,this._readPos.b=0):e&&(this.eof=!0,Y.a.log("".concat(this.LOG_TAG,": EOF")))}},{key:"reloadSingleSegment_",value:function(e){this._hlsRemote.reset(),this._hlsRemote.dispatcher&&this._hlsRemote.dispatcher.destroy(),this._hlsRemote.cdnLaborer&&this._hlsRemote.cdnLaborer.destroy(),this.loadSingleSegment_(e,!0)}},{key:"abort_",value:function(){this._hlsRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0))for(var e=this._fragments[this._readPos.f].segments[this._readPos.s].flattenIdx,t=this._fragments[this._downPos.f].segments[this._downPos.s].flattenIdx,i=this._segments,n=this._bufferPool,r=n.keys,a=0;a<r.length;a++){var o,s=r[a],c=s.split("-"),d=parseInt(c[1],10),c=parseInt(c[2],10),d=this._fragments[d];d&&(o=d.segments[c])?((c=o.flattenIdx)<e||t<c)&&(i[c].status=0,n.del(s)):n.del(s)}}},{key:"tryToSyncReadAndDownPos_",value:function(){var e=!1;(e=this._readPos.f>this._downPos.f||this._readPos.s>this._downPos.s?!0:e)&&(this._downPos.f=this._readPos.f,this._downPos.s=this._readPos.s,this._downPos.b=0)}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length),this._readPos.f=this._readPos.s=this._readPos.b=-1,this._downPos.f=this._downPos.s=this._downPos.b=-1,this._lastBufPos=void 0,this._lastBufInf=void 0,this.state!==Ye.IDLE&&(this.state===Ye.LOADING?this.abort_():this.state=Ye.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._hlsRemote.reset(),v()(p()(o.prototype),"destroy",this).call(this)}}]),o}(m),at=d(414);ie=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},i=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this,Object.assign(Object.assign({},e),{pkg:at,watch:["manifest","loader"]}))).mode=te.CDN,t.rangeTSTolerance_=0,t.maxSegmentSearchTolerance_=0,t.loaderDataArrived_=!1,t.loader_=new rt(e.runtime),t.rangeTSTolerance_=t.$krt.conf.hlsRangeTSTolerance,t.maxSegmentSearchTolerance_=t.$krt.conf.hlsMaxSegmentSearchTolerance,t.$eventManager.on(t.loader_,"DA",function(){t._onLoaderDataArrived()}).on(t.loader_,"ER",function(e){t.$throwError(e)}),t}return c()(a,[{key:"$silenced",get:function(){return v()(p()(a.prototype),"$silenced",this)},set:function(e){ne()(p()(a.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,i=e.loader,n=t&&!Object(he.c)(t)&&this.$manifestArtifact!==t,e=this.$selfArtifact!==i;n&&(this.$manifestArtifact=t),e&&(this.$selfArtifact=i),n&&(this.loader_.drainBufferPool(),n=this.$stream.playRanges,this.applyRanges(n),0<n.length&&(n=n.start(0),this.seek(n))),this.pumpLoader_(),Object(he.c)(t)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t,i=this.$manifestArtifact;i&&0!==e.length&&(t=i.isAccurateTimestamp,this.maxSegmentSearchTolerance_=t?0:this.$krt.conf.hlsMaxSegmentSearchTolerance,this.rangeTSTolerance_=t?0:this.$krt.conf.hlsRangeTSTolerance,e=(i=Qe(i.fragments,e)).fragments,i=i.segments,this.loader_.fragsWithSegs={frags:e,segs:i,isAccurateTimeStamp:t})}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.loader_,t=this.$manifestArtifact,i=this.$selfArtifact;Object(he.c)(t)||!Object(he.c)(i)&&null!=i||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&e.error||(e=(i=e.read())&&!!i.data,this.noticeDataPump(e),e&&this.$provideArtefact(i))}},{key:"seek",value:function(e){v()(p()(a.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){v()(p()(a.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),a}(de);ie([r.c],i.prototype,"fragments",null),ie([r.c],i.prototype,"findPieceAt",null);var ot=d(612),st=d(613);var ct=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return f()(this,a),(e=r.call(this,e)).retryCount=t,e.hooks.beforeLoad=e.beforeLoad_.bind(l()(e)),e}return c()(a,[{key:"beforeLoad_",value:function(){0<this.retryCount&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),a}(y);var dt=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).TAG="DashUriRequest",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new be.a,e.dispatcher_=null,e.dispatcherResultDic_={},e.cdnLaborer_=null,e.internalRetryCount_=0,e.internalMaxRetry_=2,e.dnsInfo_={userinfo:"",idc:""},e}return c()(r,[{key:"dispatcher",get:function(){return this.dispatcher_}},{key:"cdnLaborer",get:function(){return this.cdnLaborer_}},{key:"makeCDNUri_",value:function(e,t,i){e=new Pe.a(e);return void 0!==t&&e.query.update("start","".concat(t)),void 0!==i&&e.query.update("end","".concat(i)),e}},{key:"removeDispatchDicKey",value:function(e){delete this.dispatcherResultDic_[e]}},{key:"startLoad",value:function(n){var e,t,r=this,i=n.dispatchUrl,a=n.startByte,o=n.endByte,s=new Pe.a(i),c=this.dispatcherResultDic_[i];c&&c.l?(e=this.makeCDNUri_(c.l,a,o),this.loadCDNData_(n,e)):(this.dispatcher_&&(this.eventManager_.removeAll(),this.dispatcher_.destroy()),c&&(t=c.z)&&s.query.update("z",t),this.dispatcher_=new ct(s.toString(),this.internalRetryCount_),this.dispatcher_.hooks.beforeLoad=function(){var e=r.internalRetryCount_;0<e&&r.dispatcher_.query.update("retry","".concat(e)),r.dispatcher_.query.update("pv","0.1"),r.dispatcher_.query.update("cross-domain","1")},this.eventManager_.on(this.dispatcher_,we.DISPATCH_SUCCESS,function(e){r.dispatcherResultDic_[i]=e,r.dnsInfo_={userinfo:e.t,idc:e.z};e=r.makeCDNUri_(e.l,a,o);r.loadCDNData_(n,e)}),this.eventManager_.on(this.dispatcher_,we.DNS_PARSER_REQUEST,function(e){r.doDNS_(e)}),this.eventManager_.on(this.dispatcher_,we.DISPATCH_FAIL,function(e){var t=e.reason,i=e.error;switch(t){case xe.a.TIMEOUT:r.internalRetryCount_<r.internalMaxRetry_?(r.internalRetryCount_++,r.internalRetry_(n)):r.emit("FL",{category:"dispatcher-timeout"});break;case xe.a.ERROR:405===i.status&&i.response&&i.response.code&&0<=i.response.code.indexOf("D20")?r.emit("FL",{category:"auth-error"}):r.internalRetryCount_<r.internalMaxRetry_?(r.internalRetryCount_++,r.internalRetry_(n)):r.emit("FL",{category:"dispatcher-error"});break;case xe.a.ABORT:r.emit("AB");break;default:Y.a.warn("Unknown dispatch fail reason ".concat(t))}}),this.dispatcher_.load())}},{key:"loadCDNData_",value:function(i,e){var n=this,r=e.toString(),t=Se.a.SEGMENT,e=Object(Te.d)([r],Object(fe.a)(Object(Te.b)(),{timeout:1e4}));e.method="GET",e.callbacks=Object(fe.a)(e.callbacks,{onSuccess:function(e){var t=new Uint8Array(e.data);Y.a.log("".concat(n.LOG_TAG," cdn success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat(e.netCost,"ms), ").concat(Object(ke.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",e)},onError:function(e){Y.a.log("".concat(n.LOG_TAG," cdn error, http-status=").concat(e.status,", ").concat(e.url)),n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(i)):(n.doDNS_(r),n.emit("FL",{category:"cdn-error",statusCode:e.status}))},onTimeout:function(e,t){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(i)):(n.doDNS_(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),this.cdnLaborer_=Te.e.request(t,e)}},{key:"internalRetry_",value:function(e){var t=this.dispatcherResultDic_[e.dispatchUrl];t&&t.l&&delete t.l,this.startLoad(e)}},{key:"doDNS_",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher_&&this.dispatcher_.abort(),this.cdnLaborer_&&this.cdnLaborer_.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher_&&this.dispatcher_.destroy(),delete this.dispatcher_,this.cdnLaborer_&&this.cdnLaborer_.destroy(),delete this.cdnLaborer_,this.dnsInfo_={userinfo:"",idc:""}}}]),r}(Ie.EventEmitter);var ut=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),(e=r.call(this,e))._fragments=[],e._readPos={f:-1,s:-1},e._loadPos={f:-1,s:-1},e._preErrorData=null,e._allowLoaded=!0,e._dashRemote=new dt,e._initSegment=null,e._initSegmentData=null,e.segments=[],e.TAG="DASHLoaderUnit::".concat(t),e._loaderType=t,e}return c()(a,[{key:"fragments",get:function(){return this._fragments},set:function(e){this.eof=!1,this.eod=!1,this._fragments=e,this._preErrorData=null}},{key:"initSegment",set:function(e){e!=this._initSegment&&(this._initSegmentData=null,this._initSegment=e)}},{key:"allowLoaded",set:function(e){this._allowLoaded!==e&&((this._allowLoaded=e)&&this.state!==Ye.LOADING&&this.loadFragment_())}},{key:"initSegmentData",get:function(){return this._initSegmentData},set:function(e){this._initSegmentData=e}},{key:"duration",get:function(){var e=0;return e=0<this._fragments.length?this._fragments[this._fragments.length-1].endTime:e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"bufferTime_",get:function(){return this._currentBuf&&this._currentBuf.info?this._currentBuf.info.timeLength:0}},{key:"resetReadPosByTime_",value:function(e){var t,i=this.findFIndexByTime_(e);-1<i.f&&(t=this._readPos.f,i.f!==t&&(t=i.f),this.setReadPos_(t,i.s),Y.a.log("".concat(this.LOG_TAG," update readpos, time=").concat(e,", readpos=").concat(this._readPos.f,"-").concat(this._readPos.s,", loadpos=").concat(this._loadPos.f,"-").concat(this._loadPos.s)))}},{key:"findFIndexByTime_",value:function(e){for(var t=-1,i=-1,n=0;n<this._fragments.length;n++)if(e>=this._fragments[n].startTime&&e<this._fragments[n].endTime){t=n,i=this.findSegIdxByTime_(n,e);break}return-1!=t&&-1!=i||Y.a.log("".concat(this.LOG_TAG," find index error, f=").concat(t,", s=").concat(i,", time=").concat(e,", duration=").concat(this.duration,",fs=").concat(this._fragments.length)),{f:t,s:i}}},{key:"findSegIdxByTime_",value:function(e,t){e=pe(this._fragments[e].segments,function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0});return e?e.idx:-1}},{key:"needLoadFrag_",value:function(e){var t=0<=e.f&&0<this._fragments.length?this._fragments[e.f]:null,e=0<(0<=e.s&&t.segments&&t.segments.length)?t.segments[e.s].status:-1;return!(!t||-1===e||2===e)}},{key:"loadFragment_",value:function(){function e(){var e,t,i,n={type:a?"init":"segment",f:r._loadPos.f,s:r._loadPos.s,response:void 0,category:void 0};r._eventManager.removeAll(),r._eventManager.on(r._dashRemote,"SC",function(e){n.response=e,r.dataLoadOk_(n)}),r._eventManager.on(r._dashRemote,"FL",function(e){n.category=e.category,r.dataLoadFail_(n)}),r._eventManager.on(r._dashRemote,"AB",function(){r.dataLoadOnAbort_(n)}),r._eventManager.on(r._dashRemote,"DP",function(e){r.doDNSParser(e)}),a?e=r._initSegment.uri.toString():r._fragments&&(i=(t=r._fragments[n.f]).segments[n.s],e=t.uri.toString(),t=i.startByte,i=i.endByte),e&&(r.state=Ye.LOADING,r._dashRemote.startLoad({dispatchUrl:e,startByte:t,endByte:i}))}var r=this,a=2!==r._initSegment.status;r._fragments&&0<r._fragments.length&&r._allowLoaded&&(0<arguments.length&&void 0!==arguments[0]&&arguments[0]?e():(!a&&r.needLoadFrag_(r._readPos)&&(r._loadPos.f=r._readPos.f,r._loadPos.s=r._readPos.s,r._updateBufferTime()),r.state!==Ye.LOADING&&r.state!==Ye.ERROR&&(a||r.bufferTime_<r._maxBufferTimeLength&&r.needLoadFrag_(r._loadPos))&&e()))}},{key:"makeErrorContext_",value:function(e){var t,i=e.type,n=e.category;switch("init"==i?this._initSegment.status=3:((e=this._fragments[e.f]).status=3,this._preErrorData=e),n){case"dispatcher-error":case"dispatcher-timeout":t=me.a.DATA_DASH_DISPATCH_ERROR;break;case"auth-error":t=me.a.DATA_AUTH_Error;break;case"cdn-error":t=me.a.DATA_DASH_ERROR;break;case"cdn-timeout":t=me.a.DATA_DASH_TIMEOUT;break;case"cdn-range-error":t=me.a.DATA_DASH_RANGE_ERROR}Y.a.log("".concat(this.LOG_TAG," ,data loading error ").concat(t)),this.state=Ye.ERROR,this.errorChange_(new _e.a(ge.a.CRITICAL,ye.a.LOADER,t))}},{key:"doRetryStage_",value:function(e){var t=this,i=0===t.bufferTime_?t._noBufferRetryCount:t._withBufferRetryCount,n=0===t.bufferTime_?t._noBufferMaxRetry:t._withBufferMaxRetry;Y.a.log("".concat(this.LOG_TAG," ,data loading failure, reload, bufferTime = ").concat(t.bufferTime_,", retry = ").concat(i,", max = ").concat(n)),"auth-error"==e.category?t.makeErrorContext_(e):0===t.bufferTime_?t._noBufferRetryCount>=t._noBufferMaxRetry?t.makeErrorContext_(e):(this._noBufferRetryCount++,this.reloadSingleSegment_()):t._withBufferRetryCount>=t._withBufferMaxRetry?t.makeErrorContext_(e):(this._withBufferRetryCount++,this.reloadSingleSegment_())}},{key:"reloadSingleSegment_",value:function(){this._dashRemote.reset(),this._dashRemote.dispatcher&&this._dashRemote.dispatcher.destroy(),this._dashRemote.cdnLaborer&&this._dashRemote.cdnLaborer.destroy(),this.loadFragment_(!0)}},{key:"dataLoadOk_",value:function(e){var t=this;t._noBufferRetryCount=0,t._withBufferRetryCount=0;var i=e.f,n=e.s,r=e.response,a=e.type,o=r.status,s=r.url,c=r.speed,d=new Uint8Array(r.data);Y.a.log("".concat(t.LOG_TAG,", loaded type = ").concat(a,", ").concat(n," of frag ").concat(i,", http-status/bytes/take(").concat(o,"/").concat(d.byteLength,"/").concat(r.netCost,"ms), ").concat(Object(ke.a)(c),"/s ").concat(s));r=null,c=null;if("init"==a){var u=t._initSegment;t._initSegmentData=d,u.status=2}else{s=t._fragments[i],u=s.segments[n];if(t._bufferPool.del(u.poolId),t._bufferPool.add(u.poolId,d),u.status=2,d.byteLength!==u.endByte-u.startByte)return Y.a.log("".concat(t.LOG_TAG,", loaded range error, bytes = ").concat(d.byteLength,", seg = ").concat(u.endByte-u.startByte)),void t.makeErrorContext_({category:"cdn-range-error",f:i,s:n,type:a});n==s.segments.length-1?(s.status=2,s.idx==t._fragments.length-1?t.state=Ye.END:(r=s.idx+1,c=-1)):(r=s.idx,c=n+1),t._updateBufferTime()}t.state!==Ye.END&&(t.state=Ye.IDLE),this.emit("DA"),"init"!==a&&null!==r&&null!==c&&e.f==t._loadPos.f&&e.s==t._loadPos.s&&t.state==Ye.IDLE&&t.findNextLoad_(r,c),t.loadFragment_()}},{key:"dataLoadFail_",value:function(e){var t=e.f,i=e.s,n=e.type;if("init"!==n&&(this._loadPos.f!==t||this._loadPos.s!==i))return this.state=Ye.IDLE,void Y.a.log("".concat(this.LOG_TAG," , data loading failure, not loadpos, pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s,", obj = ").concat(e.f,"-").concat(e.s));Y.a.log("".concat(this.LOG_TAG," ,data loading failure, type = ").concat(n,", pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s)),this.loaderConfig.doRetry?this.doRetryStage_(e):this.makeErrorContext_(e)}},{key:"dataLoadOnAbort_",value:function(e){var t=e.f,i=e.s,e=e.type;Y.a.log("".concat(this.LOG_TAG,": onAbort type = ").concat(e,", ").concat(t," -> ").concat(i));try{var n="init"==e?this._initSegment:this._fragments[t].segments[i];n.status=0,this._bufferPool.del(n.poolId),this.state!==Ye.ERROR&&(this.state=Ye.IDLE)}catch(e){}}},{key:"findNextLoad_",value:function(e,t){var n=this;if(this._prePos&&e>=this._prePos.f&&(e<this._prePos.rf||e==this._prePos.rf&&t>=this._prePos.s&&t<=this._prePos.rs))return this._prePos.f=e,void(this._prePos.s=t);this._prePos={f:e,s:t},this.findNextLoad__(e,t,function(e,t,i){Object(fe.a)(n._prePos,{rf:e,rs:t}),n._loadPos.f=e,n._loadPos.s=t,i?n.state=Ye.END:(2==(e=n._fragments[e]).status&&(e.status=0),n.state==Ye.END&&(n.state=Ye.IDLE))})}},{key:"findNextLoad__",value:function(e,t,i){var n=!1,r=!1,a=this._fragments[e];a&&0<a.segments.length&&(2==a.segments[t=0<=t?t:0].status?t==a.segments.length-1?(a.status=2,a.idx==this._fragments.length-1?n=r=!0:this.findNextLoad__(e+1,-1,i)):this.findNextLoad__(a.idx,t+1,i):n=!0),n&&i(e,t,r)}},{key:"_updateBufferTime",value:function(){var e=[this._loadPos.f,this._loadPos.s,this._readPos.f,this._readPos.s].join("-");if(!this._currentBuf||this._currentBuf.pos!=e){for(var t=0,i=0,n=0,r=null,a=this._readPos.f,o=this._loadPos.f,s=a;s<=o&&0!=(r=this._fragments[s].segments).length;s++){var c=s==a?this._readPos.s:0,d=s==o?this._loadPos.s:r.length-1;s==a&&(n=r[c].startTime);for(var u=!1,l=c;l<=d;l++){if(2!=r[l].status){u=!0;break}t+=r[l].duration,i+=r[l].endByte-r[l].startByte}if(u)break}this._currentBuf={pos:e,info:{start:n,byteLength:i,timeLength:t}}}}},{key:"setReadPos_",value:function(e,t){this._readPos.f=e,this._readPos.s=t,this._updateBufferTime()}},{key:"errorChange_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._error=e,this.emit("ec",e)}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._loadPos.f<0||this._loadPos.s<0||this._loadPos.f<this._readPos.f))for(var e,t,i,n,r,a=this._bufferPool.keys,o=this._readPos.f,s=this._loadPos.f,c=0;c<a.length;c++)t=(i=a[c]).split("-"),e=parseInt(t[1],10),t=parseInt(t[2],10),e<o||s<e?this.gcSeg_(i,e,t):e==o&&e==s?(n=this._readPos.s,r=this._loadPos.s,(t<n||r<t)&&this.gcSeg_(i,e,t)):e==o?t<(n=this._readPos.s)&&this.gcSeg_(i,e,t):e==s&&t>(r=this._loadPos.s)&&this.gcSeg_(i,e,t)}},{key:"gcSeg_",value:function(e,t,i){t=this._fragments[t],i=t.segments[i];this._bufferPool.del(e),2==t.status&&(t.status=0),i.status=0}},{key:"tick_",value:function(){}},{key:"read",value:function(){var e=this,t=null;if(e._readPos.f<0||0==e._fragments.length)return null;if(e._readPos.f>=e._fragments.length&&(e.eof=!0),e.eof)return null;var i=e._fragments[e._readPos.f],n=-1<e._readPos.s&&i&&0<i.segments.length?i.segments[e._readPos.s]:null;return e.bufferTime_<5&&(3==i.status||4==i.status)&&(e._error||(e.errorChange_(new _e.a(ge.a.CRITICAL,ye.a.LOADER,me.a.DATA_DASH_ERROR)),Y.a.log("".concat(e.LOG_TAG," , read data error, create _error, readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s)))),n&&2===n.status&&(t={data:e._bufferPool.read(n.poolId),meta:{uid:"".concat(n.bid,"-").concat(n.fragIdx,"-").concat(n.idx),fragIdx:i.idx,segIdx:n.idx,level:parseInt(n.bid,10),fragKey:n.fragKey,segment:n}},Y.a.log("".concat(e.LOG_TAG,", read data return tagdata,type=").concat(this._loaderType,", readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s,", startTime = ").concat(n.startTime,", endtime = ").concat(n.startTime+n.duration,", bid = ").concat(n.bid,", byte.length = ").concat(t.data.byteLength,"\n\t\t\t, total = ").concat(n.endByte-n.startByte)),i.idx==e._fragments.length-1&&e._readPos.s==i.segments.length-1?e.eof=!0:e._readPos.s==i.segments.length-1?(i=e._fragments[i.idx+1],e.setReadPos_(i.idx,0)):e.setReadPos_(e._readPos.f,e._readPos.s+1)),e.bufferTime_<e._maxBufferTimeLength&&e.loadFragment_(),t}},{key:"seek",value:function(e){v()(p()(a.prototype),"seek",this).call(this,e),this.errorChange_(),!this._preErrorData||3!=this._preErrorData.status&&4!=this._preErrorData.status||(this._preErrorData.status=0),this.resetReadPosByTime_(e),this.findNextLoad_(this._readPos.f,this._readPos.s),this.loadFragment_()}},{key:"findSegmentByPTS",value:function(){var e=this.findFIndexByTime_(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0),t=null,i=null;return-1<e.f&&0<(t=this._fragments[e.f]).segments.length&&(i=t.segments[e.s]),t&&i?{fragment:t,segment:i}:null}},{key:"getUnreadBufInfo",value:function(){return this._currentBuf&&this._currentBuf.info?{start:this._currentBuf.info.start,byteLength:this._currentBuf.info.byteLength,timeLength:this._currentBuf.info.timeLength}:{start:0,byteLength:0,timeLength:0}}},{key:"reset",value:function(){v()(p()(a.prototype),"reset",this).call(this),this._dashRemote.reset(),this._fragments.splice(0,this._fragments.length),this._readPos.f=this._readPos.s=-1,this._loadPos.f=this._loadPos.s=-1,this._currentBuf=null,this.state=Ye.IDLE,this._preErrorData=null,this._dashRemote.reset()}}]),a}(m),lt=d(415);n=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},o=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this,Object.assign(Object.assign({},e),{pkg:lt,watch:["manifest","loader"]}))).$TAG="DashLoader",t.mode=te.CDN,t.loaderDataArrived_=!1,t.loaderBuff_=new ce,t.timeGap_=5,t.videoInitConfig_=null,t.audioInitConfig_=null,t.tickTimer_=new We.a(function(){return t.tick_()}),t.tickTimer_.scheduleRepeated(t.$silenced?.5:.1),t}return c()(a,[{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo_().buffered;return(t.video||t.audio)&&(e.start=t.video.start,e.end=t.video.start+t.video.timeLength),e}},{key:"eof",get:function(){var e=!1,t=this._audioLoader,i=this._videoLoader,n=this.$stream.restrictor,r=n.hasAudio,n=n.hasVideo;return r&&n?e=t.eof&&i.eof:r?e=t.eof:n&&(e=i.eof),e}},{key:"eod",get:function(){var e=!1,t=this._audioLoader,i=this._videoLoader,n=this.$stream.restrictor,r=n.hasAudio,n=n.hasVideo;return r&&n?e=t.eod&&i.eod:r?e=t.eod:n&&(e=i.eod),e}},{key:"duration",get:function(){return this.$manifestArtifact?this.$manifestArtifact.duration:0}},{key:"$silenced",get:function(){return v()(p()(a.prototype),"$silenced",this)},set:function(e){ne()(p()(a.prototype),"$silenced",e,this,!0);var t=this._videoLoader,i=this._audioLoader,n=this.$stream;t&&n.restrictor.hasVideo&&(t.silenced=e),i&&n.restrictor.hasAudio&&(i.silenced=e)}},{key:"timeGap",set:function(e){this.timeGap_=e}},{key:"fragments",get:function(){var e=this._videoLoader,t=this._audioLoader,i=this.$stream.restrictor,n=i.hasAudio,r=[];return i.hasVideo?r=e.fragments:n&&(r=t.fragments),r||[]}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,i=e.manifest,n=e.loader,r=e.renderer,a=i&&!Object(he.c)(i)&&this.$manifestArtifact!==i,o=this.$selfArtifact!==n,e=this.$rendererArtifact!==r;if(a&&(this.$manifestArtifact=i),e&&(this.$rendererArtifact=r),o&&(this.$selfArtifact=n),a){this.drainBufferPool();var s,a=t.playRanges,c=!1;for(s in i.tracks){var d=i.tracks[s];d&&(d=this.setTrackConfig(d,s),c=c||d)}c&&(t.restrictor.needSendInitSegment=!0),this.applyRanges(a),0<a.length&&(a=a.start(0),this.seek(a))}this.pumpLoader_(),Object(he.c)(i)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t,i,n=this.$manifestArtifact;n&&0!==e.length&&(t=n.tracks.video,i=n.tracks.audio,t&&(t=(n=Qe(t.fragments,e)).fragments,n=n.segments,this._videoLoader.fragments=t,this._videoLoader.segments=n),i&&(e=(i=Qe(i.fragments,e)).fragments,i=i.segments,this._audioLoader.fragments=e,this._audioLoader.segments=i))}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"getInitData_",value:function(e){var t,i,n,r=this._audioLoader,a=this.audioInitConfig_,o=this._videoLoader,s=this.videoInitConfig_,c=null;switch(e){case 2:i=r,c=a,t=new ot.a(2),n="audio";break;case 1:c=s,i=o,t=new ot.a(1),n="video";break;default:return}var d=i.initSegmentData;if(d){var u=c,e=u.codec,u=u.mimeType;return t.bytesArray=[d],t.container=u,t.codec=e,Y.a.log("".concat(this.LOG_TAG," ").concat(n," initSegment, codec=").concat(e,", mimeType=").concat(u,", length=").concat(d.byteLength)),t}}},{key:"pumpLoader_",value:function(){var e=this.$stream,t=this.$selfArtifact,i=this.$manifestArtifact,n=t,t=this.$rendererArtifact;Object(he.c)(i)||!Object(he.c)(n)&&null!=n||!this.loaderDataArrived_||this.eof||null!=t&&!t.expectingBuffer||0===this.buffer.len&&this.error||(this.read_(),e.restrictor.consumable?(e=e.restrictor.consume(),this.noticeDataPump(!0),this.$provideArtefact(e)):this.noticeDataPump(!1))}},{key:"checkCDNBuffer_",value:function(){var e,t,i,n=this._videoLoader,r=this._audioLoader,a=this.timeGap_,o=this.$stream;o.restrictor.hasAudio&&r&&o.restrictor.hasVideo&&n&&(e=n.initSegmentData,t=r.initSegmentData,i=n.getUnreadBufInfo().timeLength,o=r.getUnreadBufInfo().timeLength,o=!t||o<a,n.allowLoaded=(a=!e||i<a)||!o,r.allowLoaded=o||!a)}},{key:"getUnreadBufInfo_",value:function(){var e=null,t=null;return{buffered:{video:e=this._videoLoader?this._videoLoader.getUnreadBufInfo():e,audio:t=this._audioLoader?this._audioLoader.getUnreadBufInfo():t}}}},{key:"setTrackConfig",value:function(e,t){var i=this,n=this.$stream,r=e.initSegment,a=e.codec,o=e.mimeType,e="video"===t?this._preVideoInit:this._preAudioInit;return!(e&&e==r||((e=new ut(this.$krt,t)).on("ec",function(e){i.$throwError(e)}).on("DA",function(e){i._onLoaderDataArrived()}),e.silenced=this.$silenced,e.initSegment=r,"video"===t?(this._preVideoInit=r,this._videoLoader=e,this.videoInitConfig_={codec:a,mimeType:o},n.restrictor.hasVideo=!0):(this._preAudioInit=r,this._audioLoader=e,this.audioInitConfig_={codec:a,mimeType:o},n.restrictor.hasAudio=!0),0))}},{key:"tick_",value:function(){this.checkCDNBuffer_()}},{key:"findPieceAt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._videoLoader,i=this._audioLoader,n=this.$stream.restrictor,r=n.hasAudio;return n.hasVideo?t.findSegmentByPTS(e):r?i.findSegmentByPTS(e):{fragment:null,segment:null}}},{key:"seek",value:function(n){v()(p()(a.prototype),"seek",this).call(this,n);var e=this.$stream;[{type:"video",exist:e.restrictor.hasVideo,loader:this._videoLoader},{type:"audio",exist:e.restrictor.hasAudio,loader:this._audioLoader}].forEach(function(e){var t=e.type,i=e.exist,e=e.loader;i&&(i=n,Object(he.f)(n)&&(i=n[t]),e.seek(i))}),this.pumpLoader_()}},{key:"read_",value:function(){var e,t=this.$stream,i=t.restrictor,n=i.hasAudio,r=i.hasVideo;if(i.needSendInitSegment)n&&(e=this.getInitData_(2))&&(t.restrictor.audioInitSegment=e),r&&(e=this.getInitData_(1))&&(t.restrictor.videoInitSegment=e);else{var a=this.readCDN_();if(a)for(var o in a){var s,c,d,u=a[o];u&&(d=u.contentType,s=u.bytes,c=u.segment.startTime,o=u.segment.duration,"video"===d?((u=new st.a(1)).bytesArray=[s],u.startTime=c,u.duration=o,t.restrictor.videoMediaSegments.push(u)):"audio"===d&&((d=new st.a(2)).bytesArray=[s],d.startTime=c,d.duration=o,t.restrictor.audioMediaSegments.push(d)))}}}},{key:"readCDN_",value:function(){var e,t,i=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,a=r.hasAudio,o=r.hasVideo,s=!1,r=!1;return a&&o?(i=i.buffer.start)-(n=n.buffer.start)>this.timeGap_?s=!0:n-i>this.timeGap_?r=!0:s=r=!0:(s=o,r=a),!r||this._audioLoader.eof||(r=this._audioLoader.read())&&(t={contentType:"audio",bytes:r.data,segment:r.meta.segment}),!s||this._videoLoader.eof||(s=this._videoLoader.read())&&(e={contentType:"video",bytes:s.data,segment:s.meta.segment}),e||t?{video:e||null,audio:t||null}:null}},{key:"drainBufferPool",value:function(){var e=this.$stream.restrictor;e&&(this._videoLoader&&e.hasVideo&&this._videoLoader.drainBufferPool(),this._audioLoader&&e.hasAudio&&this._audioLoader.drainBufferPool())}},{key:"reset",value:function(){this._videoLoader&&this._videoLoader.reset(),this._audioLoader&&this._audioLoader.reset()}},{key:"destroy",value:function(){v()(p()(a.prototype),"destroy",this).call(this),this._videoLoader&&this._videoLoader.destroy(),this._audioLoader&&this._audioLoader.destroy(),delete this._audioLoader,delete this._videoLoader}}]),a}(de);n([r.c],o.prototype,"fragments",null),n([r.c],o.prototype,"findPieceAt",null),d(534);var ht=function(){for(var e=0,t=new Array(256),i=0;256!=i;++i)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=i)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[i]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();var ft=d(153),pt=d(13),_t=d(16),gt=d(20),s=(d(245),self.navigator.userAgent.toLowerCase()),g=/(edge)\/([\w.]+)/.exec(s)||/(opr)[\/]([\w.]+)/.exec(s)||/(chrome)[ \/]([\w.]+)/.exec(s)||/(firefox)[\/]([\w.]+)/.exec(s)||/(iemobile)[\/]([\w.]+)/.exec(s)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(s)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(s)||/(webkit)[ \/]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||0<=s.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(s)||[],b=/(ipad)/.exec(s)||/(ipod)/.exec(s)||/(windows phone)/.exec(s)||/(iphone)/.exec(s)||/(kindle)/.exec(s)||/(android)/.exec(s)||/(windows)/.exec(s)||/(mac)/.exec(s)||/(linux)/.exec(s)||/(cros)/.exec(s)||[],G={browser:g[5]||g[3]||g[1]||"",version:g[2]||g[4]||"0",majorVersion:g[4]||g[2]||"0",platform:b[0]||""},yt={};G.browser&&(yt[G.browser]=!0,Ja=G.majorVersion.split("."),yt.version={major:parseInt(G.majorVersion,10),string:G.version},1<Ja.length&&(yt.version.minor=parseInt(Ja[1],10)),2<Ja.length&&(yt.version.build=parseInt(Ja[2],10))),G.platform&&(yt[G.platform]=!0),(yt.chrome||yt.opr||yt.safari)&&(yt.webkit=!0),(yt.rv||yt.iemobile)&&(yt.rv&&delete yt.rv,G.browser="msie",yt.msie=!0),yt.edge&&(delete yt.edge,G.browser="msedge",yt.msedge=!0),yt.opr&&(G.browser="opera",yt.opera=!0),yt.safari&&yt.android&&(G.browser="android",yt.android=!0),yt.name=G.browser,yt.platform=G.platform,yt.chrome&&yt.version&&yt.version.major<=44&&(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(this.subarray(e,t))}),window.WebSocket=window.webSocket||window.WebSocket,window.URL=window.URL||window.webkitURL,window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate;var vt=Object.defineProperties({},{browser:{get:function(){return yt},configurable:!0,enumerable:!0},isHTTPS:{get:function(){return/^https/gi.test(window.location.protocol)},configurable:!0,enumerable:!0},supportFetch:{get:function(){return window.fetch&&!yt.msedge},configurable:!0,enumerable:!0},webSocket:{get:function(){return window.WebSocket},configurable:!0,enumerable:!0},dataVideo:{get:function(){return window.MediaSource&&window.URL},configurable:!0,enumerable:!0},canP2P:{get:function(){return!0===yt.chrome&&void 0!==window.RTCSessionDescription&&void 0!==window.RTCPeerConnection&&void 0!==window.RTCIceCandidate},configurable:!0,enumerable:!0}}),mt=2,bt="http://static.iqiyi.com/ext/common/h5Voddpcfg.json";vt.isHTTPS&&(bt=bt.replace(/^http:/gi,"https:"));var kt=null,xt=0,St=null;function Tt(){null!==kt&&kt.abort(),(kt=new XMLHttpRequest).responseType="json",kt.onreadystatechange=function(){if(0!==kt.readyState&&1!==kt.readyState&&2!==kt.readyState&&3!==kt.readyState)if(200===kt.status)if(kt.response)try{St=JSON.parse(JSON.stringify(kt.response)),It(),wt()}catch(e){Pt()}else Pt();else Pt(kt.status)};try{kt.open("GET",bt+"?rn="+Date.now(),!0),kt.send()}catch(e){Pt()}}function Pt(){It(),xt<5&&(xt++,Tt())}function It(){null!==kt&&kt.abort(),kt=null}function wt(){if(null!==St){pt.a.dispatchCfg=St.cdn.dispatcher.timeout,pt.j.tracker=St.tracker,St.aidList&&(pt.j.aidList=St.aidList),St.defaultTracker&&(pt.j.defaultTracker=St.defaultTracker),St.dcache1&&(pt.e.cityList=St.dcache1.cityList,pt.e.netList=St.dcache1.netList,pt.e.cookie=St.dcache1.cookie),St.config&&(_t.a.platform===mt||_t.a.checkIsMobius()||(pt.d.videoMaxSize=parseInt(St.config.videoMaxSize)),pt.j.getPeerIDStep=parseInt(St.config.getPeerIDStep),pt.j.weedOutPeerStep=parseInt(St.config.weedOutPeerStep),pt.j.connectPeerStep=parseInt(St.config.connectPeerStep),pt.j.NATTimeoutStep=parseInt(St.config.NATTimeoutStep),pt.j.connectMax=parseInt(St.config.connectMax),pt.j.passiveMax=parseInt(St.config.passiveMax),pt.j.RTCMax=parseInt(St.config.RTCMax),pt.j.RTCPoolSize=parseInt(St.config.RTCPoolSize),pt.j.coolDownTime=parseInt(St.config.coolDownTime));var e=gt.a.getUserInfoFromCookie();if(e.userInfo){var t=e.userNetType,i=e.userArea;St.closep2p&&(pt.j.closeP2PTvidList=St.closep2p.tvidList,pt.j.closeP2PNetList=St.closep2p.netList,pt.j.closeP2PFileTypeList=St.closep2p.fileTypeList);for(var n=St.stun||St.tracker,r=!(pt.j.stun=[]),a=0;a<n.length&&!r;a++){if(t===n[a].key||"*"===n[a].key)for(var r=!0,o=0;o<n[a].value.length;o++){var s=n[a].value[o];vt.browser.name,pt.j.stun.push({url:"stun:"+s.split("|")[0]+":"+s.split("|")[4],urls:"stun:"+s.split("|")[0]+":"+s.split("|")[4]})}if(gt.a.shuffle(pt.j.stun),"mozilla"===vt.browser.name)for(;2<pt.j.stun.length;)pt.j.stun.shift()}for(var c=0;c<St.cdn.cache.TTFB.length;){var d=St.cdn.cache.TTFB[c],u=d.ai.split("|")[0],l=d.ai.split("|")[1];if(!("*"!==u&&u!==t||"*"!==l&&0!==i.indexOf(l))){pt.a.TTFBCfg=d.timeout;break}c++}for(c=0;c<St.cdn.cache.load.length;){var h=St.cdn.cache.load[c];if(u=h.ai.split("|")[0],l=h.ai.split("|")[1],!("*"!==u&&u!==t||"*"!==l&&0!==i.indexOf(l))){pt.a.rcvCfg=h.timeout;break}c++}var c=0,f=!(pt.j.limitP2P="off");if(0<pt.j.closeP2PNetList.length)for(var p=0;p<pt.j.closeP2PNetList.length;p++)if(pt.j.closeP2PNetList[p]===t){f=!0;break}if(0<pt.j.closeP2PTvidList.length)for(var _=0;_<pt.j.closeP2PTvidList.length;_++)if(pt.j.closeP2PTvidList[_]===_t.a.tvId){f=!0;break}if(0<pt.j.closeP2PFileTypeList.length)for(var g=0;g<pt.j.closeP2PFileTypeList.length;g++)if(pt.j.closeP2PFileTypeList[g]===_t.a.fileType){f=!0;break}if(!f)for(;c<St.cdn.cache.p2p.length;){var y=St.cdn.cache.p2p[c];if(u=y.ai.split("|")[0],l=y.ai.split("|")[1],!("*"!==u&&u!==t||"*"!==l&&0!==i.indexOf(l))){for(var v=0;v<y.time.length;){if(At(y.time[v])){pt.j.limitP2P="on";break}v++}break}c++}if(c=0,St.cdn.cache.reLoad)for(;c<St.cdn.cache.reLoad.length;){var m=St.cdn.cache.reLoad[c];if(u=m.ai.split("|")[0],l=m.ai.split("|")[1],!("*"!==u&&u!==t||"*"!==l&&0!==i.indexOf(l))){pt.a.reLoadCfg=m.timeout;break}c++}var b=0;for(_t.a.absOpen=!1;b<St.abs.open.length;){var k=St.abs.open[b];if(u=k.ai.split("|")[0],l=k.ai.split("|")[1],!("*"!==u&&u!==t||"*"!==l&&0!==i.indexOf(l))){for(var x=k.time.length,S=0;S<x;){if(At(k.time[S])){_t.a.absOpen=!0;break}S++}break}b++}}}}function At(e){if("*"===e)return 1;var t=e.split("-")[0],i=e.split("-")[1],n=e.split("-")[2],r=60*parseInt(i.split(":")[0])+parseInt(i.split(":")[1]),e=60*parseInt(n.split(":")[0])+parseInt(n.split(":")[1]);if(0<=r&&r<e){i=new Date,n=i.getDay().toString(),i=60*i.getHours()+i.getMinutes();if(("*"===t||n===t)&&r<=i&&i<e)return 1}}var Et={load:function(){It(),xt=0,Tt()},loadBGPIP:function(){var t=new XMLHttpRequest;t.responseType="text",t.onreadystatechange=function(){if(0!==t.readyState&&1!==t.readyState&&2!==t.readyState&&3!==t.readyState&&200===t.status&&t.response)try{var e;""===_t.a.bgpIP_1&&(e=t.response.split(";"),_t.a.bgpIP_1=e[0],1<e.length&&(_t.a.bgpIP_2=e[1]))}catch(e){}};try{t.open("GET","https://103.44.59.54/3e8?rn="+Date.now(),!0),t.send()}catch(e){}},checkConfig:wt},Dt=d(12),qt=Object.defineProperties({loader:{all:0,count:0,message:""},dispatcher:{all:0,count:0,message:""},errorFragment:null},{errorMessage:{get:function(){return"[ loader:"+this.loader.message+" , dispatcher:"+this.dispatcher.message+"]"},configurable:!0,enumerable:!0}}),Ot=(c()(Rt,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.pos=[],this.time=[0],this.sourceID=null,this.loadInfo=[]}}]),Rt);function Rt(){f()(this,Rt),this.reset()}function Lt(e,t){e=e.m3u8;if("video"===t){if(e.hasOwnProperty("video_track1")&&e.video_track1.hasOwnProperty("files"))return e.video_track1.files}else if("audio"===t&&e.hasOwnProperty("audio_track1")&&e.audio_track1.hasOwnProperty("files"))return e.audio_track1.files;return null}var Mt={getM4sDuration:function(e){e=e.m3u8;return e.hasOwnProperty("video_track1")&&e.hasOwnProperty("audio_track1")?Math.min(parseFloat(e.video_track1.duration_second),parseFloat(e.audio_track1.duration_second)):e.duration},getGapPos:function(e,t,i,n){var r=Lt(e,i);if(null===r)return null;if(t>=e.duration){var a=r.length-1,i=r[a].seekable.time.length,e=r[a].seekable.pos.length;return"start"===n?{segmentIndex:a,chunkIndex:e-2,time:gt.a.accAdd(r[a].start_second,r[a].seekable.time[i-2]),pos:r[a].seekable.pos[e-2]}:{segmentIndex:a,chunkIndex:e-1,time:gt.a.accAdd(r[a].start_second,r[a].seekable.time[i-1]),pos:r[a].seekable.pos[e-1]}}for(var o=0;o<r.length;o++)if(t>=r[o].start_second&&t<gt.a.accAdd(r[o].start_second,r[o].duration_second)){for(var s=r[o].start_second,c=r[o].seekable.time,d=0;d<c.length;d++)if(t>=gt.a.accAdd(s,c[d])&&t<gt.a.accAdd(s,c[d+1]))return"start"===n?{segmentIndex:o,chunkIndex:d,time:gt.a.accAdd(s,c[d]),pos:r[o].seekable.pos[d]}:{segmentIndex:o,chunkIndex:d,time:gt.a.accAdd(s,c[d+1]),pos:r[o].seekable.pos[d+1]}}else if("end"===n&&t===gt.a.accAdd(r[o].start_second,r[o].duration_second)){var u=r[o].seekable.time.length-1;return{segmentIndex:o,chunkIndex:u-1,time:gt.a.accAdd(r[o].start_second,r[o].duration_second),pos:r[o].seekable.pos[u]}}return null},getFilesInfo:Lt,getDuratioSecond:function(e,t,i){t=Mt.getFilesInfo(e,t);return i<=t.length-1?gt.a.accAdd(t[i].duration_second,t[i].start_second):0},getSegmentIdx:function(e,t){return e+t},getSegmentSize:function(e,t,i){t=Lt(e,t);return i<t.length?t[i].size:-1},getChunkSEPos:function(e,t,i,n){t=Lt(e,t);if(t[i]&&t[i].hasOwnProperty("seekable")){i=t[i].seekable;if(i.hasOwnProperty("pos")&&i.pos[n+1])return{sPos:i.pos[n],ePos:i.pos[n+1]}}return null},getNextChunkInfo:function(e,t,i,n){e=Lt(e,t);if(e[i]&&e[i].hasOwnProperty("seekable")){t=e[i].seekable;return n+1<t.pos.length-1?{segmentIndex:i,chunkIndex:n+1,sTime:gt.a.accAdd(e[i].start_second,t.time[n+1]),eTime:gt.a.accAdd(e[i].start_second,t.time[n+2]),sPos:t.pos[n+1],ePos:t.pos[n+2]}:i<e.length-1?(t=e[i+1].seekable,{segmentIndex:i+1,chunkIndex:0,sTime:gt.a.accAdd(e[i+1].start_second,t.time[0]),eTime:gt.a.accAdd(e[i+1].start_second,t.time[1]),sPos:t.pos[0],ePos:t.pos[1]}):null}return null},getCurChunkInfo:function(e,t,i,n){e=Lt(e,t);if(e[i]&&e[i].hasOwnProperty("seekable")){t=e[i].seekable;return n<t.pos.length-1?{segmentIndex:i,chunkIndex:n,sTime:gt.a.accAdd(e[i].start_second,t.time[n]),eTime:gt.a.accAdd(e[i].start_second,t.time[n+1]),sPos:t.pos[n],ePos:t.pos[n+1]}:null}return null},getTSGapPos:function(e,t,i){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var n=e.m3u8;if(t>=e.duration){var r=n.length-1,a=n[r].time.length,e=n[r].pos.length;return"start"===i?{segmentIndex:r,chunkIndex:e-1,time:gt.a.accAdd(n[r].start_second,n[r].time[a-2]),pos:n[r].pos[e-1].sPos}:{segmentIndex:r,chunkIndex:e-1,time:gt.a.accAdd(n[r].start_second,n[r].time[a-1]),pos:n[r].pos[e-1].ePos}}for(var o=0;o<n.length;o++)if(t>=n[o].start_second&&t<gt.a.accAdd(n[o].start_second,n[o].duration_second)){for(var s=n[o].start_second,c=n[o].time,d=0;d<c.length;d++)if(d===c.length-1||t>=gt.a.accAdd(s,c[d])&&t<gt.a.accAdd(s,c[d+1]))return"start"===i?{segmentIndex:o,chunkIndex:d,time:gt.a.accAdd(s,c[d]),pos:n[o].pos[d].sPos}:{segmentIndex:o,chunkIndex:d,time:gt.a.accAdd(s,c[d+1]),pos:n[o].pos[d].ePos}}else if("end"===i&&t===gt.a.accAdd(n[o].start_second,n[o].duration_second)){var u=n[o].pos.length-1;return{segmentIndex:o,chunkIndex:u,time:gt.a.accAdd(n[o].start_second,n[o].duration_second),pos:n[o].pos[u].ePos}}return null},getTSChunkSEPos:function(e,t,i){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var n=e.m3u8;if(n[t]){e=n[t].pos;if(i<n[t].pos.length)return{sPos:e[i].sPos,ePos:e[i].ePos}}return null},getTSDuratioSecond:function(e,t){e=e.m3u8;return gt.a.accAdd(e[t].duration_second,e[t].start_second)},getTSNextChunkInfo:function(e,t,i){e=e.m3u8;return t>=e.length?null:i<e[t].pos.length-1?{segmentIndex:t,chunkIndex:i+=1,sTime:gt.a.accAdd(e[t].start_second,e[t].time[i]),eTime:gt.a.accAdd(e[t].start_second,e[t].time[i+1]),sPos:e[t].pos[i].sPos,ePos:e[t].pos[i].ePos}:t<e.length-1&&i>=e[t].pos.length-1?{segmentIndex:t+=1,chunkIndex:i=0,sTime:gt.a.accAdd(e[t].start_second,e[t].time[i]),eTime:gt.a.accAdd(e[t].start_second,e[t].time[i+1]),sPos:e[t].pos[i].sPos,ePos:e[t].pos[i].ePos}:t>=e.length-1&&i>=e[t].pos.length-1?null:void 0},getCurTSChunkInfo:function(e,t,i){e=e.m3u8;return e&&e[t]&&i<e[t].time.length-1?{segmentIndex:t,chunkIndex:i,sTime:gt.a.accAdd(e[t].start_second,e[t].time[i]),eTime:gt.a.accAdd(e[t].start_second,e[t].time[i+1]),sPos:e[t].pos[i].sPos,ePos:e[t].pos[i].ePos}:null}},Ct=Mt,Nt=d(11),Bt=(c()(Ft,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.seekable={pos:[],time:[]},this.sourceID=null,this.loadInfo=[],this.size=0}}]),Ft);function Ft(){f()(this,Ft),this.reset()}var Ut,jt,Vt=(c()(Xt,[{key:"close",value:function(){this._bitRateList=[],this._bidTovidList=null}},{key:"vidList",get:function(){return this._bidTovidList}},{key:"bitRateList",get:function(){return this._bitRateList}},{key:"parser",value:function(e){this._bidTovidList||(this._bidTovidList=e.vidlist),e.bid!==pt.g&&this._bitRateList.indexOf(e.bid)<0&&this._bitRateList.push(e.bid);var t=null;return e.type===Nt.a.M4S||e.type===Nt.a.DASH?t=function(e,t){var i,n={},r=null,a=null,o=0,s=null,c={video_track1:{files:[]},audio_track1:{files:[]}};if(t===Nt.a.M4S)r=Ct.getFilesInfo({m3u8:e},"video"),a=Ct.getFilesInfo({m3u8:e},"audio"),n.duration=Ct.getM4sDuration({m3u8:e});else{if(t!==Nt.a.DASH)return null;r=e.video.segments,a=e.audio.segments,(e.video.duration||e.audio.duration)&&(n.duration=e.video.duration||e.audio.duration)}for(var d=0,u={},l=0,h=0;h<r.length;h++)if(null!==r[h]&&r[h].hasOwnProperty("seekable")&&r[h].seekable.hasOwnProperty("pos")&&r[h].seekable.hasOwnProperty("time")){c.video_track1.files[h]=r[h];var f=r[h].seekable,p=f.pos.length;f.pos[p-1]!==r[h].size&&f.pos.push(r[h].size),f.time[p-1]!==r[h].duration_second&&f.time.push(r[h].duration_second),r[h].sourceID=gt.a.getFileNameFromUrl(r[h].file_name),d+=f.time.length-1,c.video_track1.files[h].seekable=f}else if(null!==r[h]&&r[h].hasOwnProperty("seekable")&&r[h].seekable.hasOwnProperty("pos_start")){if(i=r[h].file_name.toString(),0===h||i!==s.file_name||r[h-1].pos_end!==r[h].pos_start?(0===h?d=r.length:(s.size=r[h-1].seekable.pos_end,s.duration_second=gt.a.accSub(r[h].start_second,s.start_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),u[s.sourceID]={size:s.size,idx:l},0===r[h].seekable.pos_start&&l++),(s=new Bt).file_name=i,s.start_second=r[h].start_second,s.seekable.time.push(gt.a.accSub(r[h].start_second,s.start_second)),s.seekable.pos.push(r[h].seekable.pos_start),s.seekable.pos.push(r[h].seekable.pos_end),s.sourceID=gt.a.getFileNameFromUrl(i)):(s.seekable.pos.push(r[h].seekable.pos_end),s.seekable.time.push(gt.a.accSub(r[h].start_second,s.start_second))),h===r.length-1){s.size=r[h].seekable.pos_end,s.duration_second=gt.a.accAdd(s.seekable.time[s.seekable.time.length-1],r[h].duration_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),u[s.sourceID]={size:s.size,idx:l};var _=0,g=c.video_track1.files;for(Object.keys(u).length!==g.length?_t.a.MixWaterMark=!0:_t.a.MixWaterMark=!1;_<g.length;)g[_].size=u[g[_].sourceID].size,g[_].realIdx=u[g[_].sourceID].idx,_++}}else{p=gt.a.getFileNameFromUrl(r[h].uri.toString());if(0===h?(f=e.video.init,(s=new Bt).file_name=f.uri.toString(),s.sourceID=gt.a.getFileNameFromUrl(s.file_name),s.seekable.pos.push(f.startByte),s.seekable.pos.push(f.endByte),s.seekable.time.push(0),s.size=f.endByte,s.start_second=-1,s.realIdx=l,c.video_track1.files.push(s),l++,(s=new Bt).file_name=r[h].uri.toString(),s.sourceID=gt.a.getFileNameFromUrl(s.file_name),o=r[h].endByte,s.seekable.pos.push(r[h].startByte),s.seekable.pos.push(r[h].endByte),s.seekable.time.push(gt.a.accSub(r[h].startTime,s.start_second)),d=r.length):o===r[h].startByte&&s.sourceID===p?(s.seekable.pos.push(r[h].endByte),s.seekable.time.push(gt.a.accSub(r[h].startTime,s.start_second)),o=r[h].endByte):(s.size=r[h-1].endByte,s.duration_second=gt.a.accSub(r[h].startTime,s.start_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),u[s.sourceID]={size:s.size,idx:l},0===r[h].startByte&&l++,(s=new Bt).file_name=r[h].uri.toString(),s.sourceID=gt.a.getFileNameFromUrl(s.file_name),o=r[h].endByte,s.start_second=r[h].startTime,s.seekable.pos.push(r[h].startByte),s.seekable.pos.push(r[h].endByte),s.seekable.time.push(gt.a.accSub(r[h].startTime,s.start_second))),h===r.length-1){s.size=r[h].endByte,s.duration_second=gt.a.accAdd(s.seekable.time[s.seekable.time.length-1],r[h].duration),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),u[s.sourceID]={size:s.size,idx:l};var y=1,v=c.video_track1.files;for(Object.keys(u).length!==v.length-1?_t.a.MixWaterMark=!0:_t.a.MixWaterMark=!1;y<v.length;)v[y].size=u[v[y].sourceID].size,v[y].realIdx=u[v[y].sourceID].idx,y++}}for(var m,b,k=0;k<a.length;k++)null!==a[k]&&a[k].hasOwnProperty("seekable")&&a[k].seekable.hasOwnProperty("pos")&&a[k].seekable.hasOwnProperty("time")?(c.audio_track1.files[k]=a[k],m=(b=a[k].seekable).pos.length,b.pos[m-1]!==a[k].size&&b.pos.push(a[k].size),b.time[m-1]!==a[k].duration_second&&b.time.push(a[k].duration_second),a[k].sourceID=gt.a.getFileNameFromUrl(a[k].file_name),c.audio_track1.files[k].seekable=b):0===k?(b=e.audio.init,(s=new Bt).file_name=b.uri.toString(),s.sourceID=gt.a.getFileNameFromUrl(s.file_name),s.seekable.pos.push(b.startByte),s.seekable.pos.push(b.endByte),s.seekable.time.push(0),s.size=b.endByte,s.start_second=-1,c.audio_track1.files.push(s),(s=new Bt).file_name=a[k].uri.toString(),s.sourceID=gt.a.getFileNameFromUrl(s.file_name),o=a[k].endByte,s.seekable.pos.push(a[k].startByte),s.seekable.pos.push(a[k].endByte),s.seekable.time.push(gt.a.accSub(a[k].startTime,s.start_second))):(o===a[k].startByte?(s.seekable.pos.push(a[k].endByte),s.seekable.time.push(gt.a.accSub(a[k].startTime,s.start_second)),o=a[k].endByte):(s.size=a[k-1].endByte,s.duration_second=gt.a.accSub(a[k].startTime,s.start_second),s.seekable.time.push(s.duration_second),c.audio_track1.files.push(s),(s=new Bt).file_name=a[k].uri.toString(),s.sourceID=gt.a.getFileNameFromUrl(s.file_name),o=a[k].endByte,s.start_second=a[k].startTime,s.seekable.pos.push(a[k].startByte),s.seekable.pos.push(a[k].endByte)),k===a.length-1&&(s.size=a[k].endByte,s.duration_second=gt.a.accSub(n.duration,s.start_second),s.seekable.time.push(s.duration_second),c.audio_track1.files.push(s)));return n.m3u8=c,{info:n,chunkNum:d}}(e.dataFlow,e.type):e.type===Nt.a.TS&&(t=function(e){var t={},i=0,n={};if(e){var r=[],a=e.length,o=new Ot;o.start_second=0,o.file_name=e[0].__url,o.sourceID=gt.a.getFileNameFromUrl(o.file_name);for(var s=0,c=0,d=0,u=0;u<a;u++){0<u&&(l=gt.a.getFileNameFromUrl(e[u].__url),(h=e[u].startByte)===s&&l===o.sourceID||(o.duration_second=gt.a.accSub(d,o.start_second),o.size=s,r.push(o),t[o.sourceID]={size:o.size,idx:i},0===h&&i++,(o=new Ot).file_name=e[u].__url,o.sourceID=gt.a.getFileNameFromUrl(o.file_name),o.start_second=d));var l=e[u].startByte,h=e[u].endByte;u<a-1?c=e[u+1].startTime:n.duration=c=d+e[u].duration,o.pos.push({sPos:l,ePos:s=h});h={};h.startPos=l,h.endPos=s,h.contentlength=h.endPos-h.startPos,h.sd=d,o.loadInfo.push(h),o.time.push(gt.a.accSub(c,o.start_second)),d=c}o.duration_second=gt.a.accSub(c,o.start_second),o.size=s,t[o.sourceID]={size:o.size,idx:i},r.push(o),Object.keys(t).length!==r.length?_t.a.MixWaterMark=!0:_t.a.MixWaterMark=!1;for(var f=0;f<r.length;)r[f].size=t[r[f].sourceID].size,r[f].realIdx=t[r[f].sourceID].idx,f++;return n.m3u8=r,{info:n,chunkNum:a}}}(e.dataFlow.stream)),t?(t.info.vsize=e.vsize,t.info.vid=e.vid,t.info.chunkNum=t.chunkNum,{levelID:e.bid,data:t.info}):null}}]),Xt),Wt=(c()(Zt,[{key:"has",value:function(e){return this._dicMap.has(e)}},{key:"get",value:function(e){return this._dicMap.get(e)||null}},{key:"set",value:function(e,t){this._dicMap.has(e)||this._size++,this._dicMap.set(e,t)}},{key:"remove",value:function(e){var t=this._dicMap.get(e);return t&&(this._dicMap.delete(e),this._size--),t}},{key:"clear",value:function(){this._size=0,this._dicMap.clear()}},{key:"values",get:function(){return this._dicMap}},{key:"size",get:function(){return this._size}}]),Zt),K=(d(194),d(198),d(199),d(126)),Ht=d.n(K),zt=(d(145),/[^0-9a-eA-E]+/g),Yt=16777216,Gt=0,Qt=0,Kt=null,$t=!1;function Zt(){f()(this,Zt),this._size=0,this._dicMap=new Map}function Xt(){f()(this,Xt),this.close()}function Jt(e){var t;(Kt=e<=0?null:Kt)?e>Kt.byteLength&&((t=new Uint8Array(e)).set(Kt,0),Kt=t):Kt=new Uint8Array(e)}var ei=Object.defineProperties({resetData:function(){Gt=Qt=0,$t=!1},setStr:function(e){var t=Math.ceil(e.length/2);if(Kt||Jt(Gt+t),null!==zt.exec(e))throw"EncodeBuffer setStr string need baseEnCode!";var i=e.length%2;Qt<Gt+t&&(Jt(Gt+t),Qt=Gt+t);for(var n=0;n<e.length;n+=2){var r=void 0,a=void 0,a=1==i&&n===e.length-1?(r=parseInt("0x"+e[n]),0):(r=parseInt("0x"+e[n]),parseInt("0x"+e[n+1]));Kt[Gt+Math.ceil(n/2)]=a+15*r}Gt+=t},setCharStr:function(e){var t=Math.ceil(e.length);Kt||Jt(Gt+t),Qt<Gt+t&&(Jt(Gt+t),Qt=Gt+t);for(var i=0;i<e.length;i++)Kt[Gt+i]=parseInt("0x"+e[i]);Gt+=t},setUTF8Str:function(e){var t=Math.ceil(e.length);Kt||Jt(Gt+t),Qt<Gt+t&&(Jt(Gt+t),Qt=Gt+t);for(var i=0;i<e.length;i++)Kt[Gt+i]=e[i].charCodeAt();Gt+=t},set8:function(e){Kt||Jt(Gt+1),Qt<Gt+1&&(Jt(Gt+1),Qt=Gt+1),Kt[Gt]=e,Gt+=1},set16:function(e){Kt||Jt(Gt+2),Qt<Gt+2&&(Jt(Gt+2),Qt=Gt+2);256<=e?(Kt[Gt]=Math.floor(e/256),e%=256):Kt[Gt]=0,Kt[Gt+1]=e,Gt+=2},set32:function(e){Kt||Jt(Gt+4),Qt<Gt+4&&(Jt(Gt+4),Qt=Gt+4);Yt<=e?(Kt[Gt]=Math.floor(e/Yt),e%=Yt):Kt[Gt]=0,65536<=e?(Kt[Gt+1]=Math.floor(e/65536),e%=65536):Kt[Gt+1]=0,256<=e?(Kt[Gt+2]=Math.floor(e/256),e%=256):Kt[Gt+2]=0,Kt[Gt+3]=e,Gt+=4},setBytes:function(e,t,i){Kt||Jt(Gt+i),Qt<Gt+i&&(Jt(Gt+i),Qt=Gt+i),Kt.set(e.subarray(t,t+i),Gt),Gt+=i},clear:function(){Kt=null},toString:function(){for(var e="",t=Qt<=64?Qt:64,i=0;i<t;i++){var n=Kt[i];e+=n<16?"0"+n.toString(16):n.toString(16),i<t-1&&(e+="-")}return e},crc:function(){for(Gt=Qt,$t?Gt-=4:(Kt||Jt(Gt+4),Qt<Gt+4&&(Jt(Gt+4),Qt=Gt+4)),Ut=Math.floor(Qt/4),jt=0;jt<4;)Kt[Gt+jt]=Kt[jt*Ut],jt++;Gt+=4,$t=!0},getData:function(){return new Uint8Array(Kt.buffer.slice(0,Qt))},getReferData:function(){return new Uint8Array(Kt.buffer.slice(0,Qt))}},{position:{set:function(e){Gt=e},get:function(){return Gt},configurable:!0,enumerable:!0},length:{get:function(){return Qt},configurable:!0,enumerable:!0}});function ti(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return ii(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ii(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var ni=new Wt,ri=null,ai=0,oi=!1;function si(e){e=ni.remove(e);e&&(ri===e&&(ri=null),e.destroy())}function ci(e){var t=ni.get(e);t&&t.destroyChunk(e)}function di(){ai=0;var e=ui();if(1===_t.a.platform){for(var t=!1,i=!1,n=0;n<e.length;n++){var r=e[n].index.slice(0,1),a=e[n].index.slice(1);"a"===r&&(e[n].fileType!==Nt.a.DASH||0<a)&&ci(e[n].alias),e[n]&&(ai=e[n].memory+ai),-1!==e[n].peerCnt&&1e3<e[n].peerCnt&&(t=!0),-1!==e[n].peerCnt&&e[n].peerCnt<=1e3&&(i=!0),e[n].fileType===Nt.a.DASH&&0===a&&(e[n].status=0),e[n].tvid!==_t.a.tvId&&e[n].tvid!==_t.a.lastReadTvID&&0===e[n].status&&(e[n].status=1)}if(Dt.a.info("memorySize : "+ai+", "+Math.floor(ai/1024/1024)+"M"),ai>=pt.d.videoMaxSize){if(t&&i){e.sort(function(e,t){return t.peerCnt-e.peerCnt});for(var o=0;o<e.length;o++)if(ai>pt.d.videoMaxSize&&e[o]&&1===e[o].status&&1e3<e[o].peerCnt){ai-=e[o].memory,si(e[o].alias);break}}if(ai>=pt.d.videoMaxSize){(e=ui()).sort(function(e,t){return e.shareDataNum-t.shareDataNum});for(var s=0;s<e.length;s++)e[s].shareDataNum=0,ai>=pt.d.videoMaxSize&&e[s]&&1===e[s].status&&(ai-=e[s].memory,si(e[s].alias));if(ai>=pt.d.videoMaxSize){(e=ui()).sort(function(e,t){return parseInt(e.index.slice(1))-parseInt(t.index.slice(1))});for(var c=0;c<e.length;c++)if(e[c]&&ai>=pt.d.videoMaxSize){var d=e[c].index.slice(0,1),u=e[c].index.slice(1);if(e[c].tvid===_t.a.tvId||e[c].tvid===_t.a.lastReadTvID)continue;"e"===d&&u<_t.a.lastReadSegIndex&&e[c].shareDataNum<10&&(ai-=e[c].memory,si(e[c].alias))}}}}}else if(_t.a.platform===mt)for(var l=0;l<e.length;l++)e[l]&&(e[l].tvid!==_t.a.tvId&&e[l].tvid!==_t.a.lastReadTvID&&0===e[l].status&&(e[l].status=1),1===e[l].status?(ai-=e[l].memory,si(e[l].alias)):ci(e[l].alias));setTimeout(di,6e4)}function ui(){var e,t=[],i=ti(ni.values);try{for(i.s();!(e=i.n()).done;){var n=Ht()(e.value,2)[1];t.push(n)}}catch(e){i.e(e)}finally{i.f()}return t}var li,hi=Object.defineProperties({getSegment:function(e){return ni.get(e)},hasSegment:function(e){return ni.has(e)},setSegment:function(e,t){t&&(ni.set(e,t),oi||(oi=!0,di()))},removeSegment:si,setLoadSegment:function(e){ri&&ri.alias===e||(e?(e=ni.get(e))?(ri&&ri.clearTask(),ri&&ri.alias===e.alias||(ri=e)):ri=null:(ri&&ri.clearTask(),ri=null))},getSourceDescribe:function(e){ei.resetData();var t=ui(),i=0;ei.set16(e.length),ei.setCharStr(e);for(var n=0;n<t.length;n++)t[n].vid===e&&i++;ei.set16(i);for(var r,a=0;a<t.length;a++)t[a].vid===e&&(r=t[a].bitmap,ei.set16(r.data.byteLength+8),ei.set32(r.alias),ei.set32(r.size),ei.setBytes(r.data,0,r.data.byteLength));return ei.getData()},destroy:function(){var e,t=ti(ni.values);try{for(t.s();!(e=t.n()).done;)si(Ht()(e.value,1)[0])}catch(e){t.e(e)}finally{t.f()}}},{segmentList:{get:ui,configurable:!0,enumerable:!0},loadSegment:{get:function(){return ri},configurable:!0,enumerable:!0},memorySize:{get:function(){return ai},configurable:!0,enumerable:!0},size:{get:function(){return ni.size},configurable:!0,enumerable:!0}}),fi=new Array(5),pi=new Array(5),_i=0,gi=new Map,yi=0,vi=0,mi=0,bi=null,ki=0,xi="",Si=null,Ti=gt.a.QC005||Math.random().toString(36).substr(2),Pi=(c()(Ii,[{key:"connectWebscoket",value:function(){this.loader=new XMLHttpRequest;var i=this;this.loader.onloadend=function(e){var t=e.currentTarget,e=t.status,t=JSON.parse(t.response);200<=e&&e<300?"0"===t.errorcode?(i.levelID=parseInt(t.bitrate),i.algorithm_des=t.algorithm_des,i.receiveCount++,Dt.a.info(" receive Message  ~~~~~~~~~~~~~~~~~~~~quality: "+i.levelID+" levelID "+gi.get(i.levelID)+", msg_seq "+t.msg_seq+" ,algorithm "+i.algorithm_des)):Dt.a.error("ABS proxy return errCode "+t.errorcode):(i.algorithm_des="connectFailed",Dt.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~status err "+e))},this.loader.onerror=function(e){i.algorithm_des="connectFailed",Dt.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~error "+e)},this.loader.onabort=function(){i.algorithm_des="connectFailed",Dt.a.warn(" receive Message  ~~~~~~~~~~~~~~~~~~~~onabort")}}},{key:"bitrate",get:function(){var e=_t.a.bid;if(e)return parseInt(e);if(-1!==this.levelID&&gi.has(this.levelID)){e=gi.get(this.levelID);return e>this.lastLevel?(mi!==this.receiveCount&&(mi=this.receiveCount,vi++),1<vi?e:this.lastLevel):(e<this.lastLevel&&(vi=0),e)}return-1}},{key:"algorithmDes",get:function(){return this.algorithm_des}},{key:"close",value:function(){this.levelID=-1,this.lastLevel=-1,this.nextReqThreshold=0,this.receiveCount=0,this.algorithm_des="defal",gi.clear(),this.loader&&(this.loader.abort(),Dt.a.warn("abs close,close connnection ")),bi=Si=null}},{key:"reportData",value:function(e){e=this.makeReportJsonData(e);if(e&&this.loader&&("0"!==e.msg_seq||"-1"!==e.report.bandwidthEst))try{this.loader.open("POST",xi,!0),this.loader.withCredentials=!1,this.loader.setRequestHeader("Content-Type","application/json"),Dt.a.info(" send Message  ~~~~~~~~~~~~~~~~~~~~ num "+e.msg_seq+","+JSON.stringify(e)),this.loader.send(JSON.stringify(e))}catch(e){Dt.a.error("ABSStrategy send resquest tryCatchError"+e)}}},{key:"makeReportJsonData",value:function(e){this.lastLevel=e.bid;for(var t=[],i=0;i<e.bidList.length;i++){var n=8*Math.round(e.totalSizeList[i]/e.duration);gi.get(n)!==e.bidList[i]&&gi.set(n,e.bidList[i]),0!==e.chunkSizeList[i]&&(li={rate:n.toString(),size:e.chunkSizeList[i].toString(),chunkcnt:e.chunk_count.toString()},t.push(li))}if(0!==t.length){Si||_t.a.getUserInfoFunc(wi),(isNaN(e.rebuffTime)||!e.rebuffTime||e.rebuffTime<0)&&(e.rebuffTime=0);var r=0;e.index===yi?r+=e.rebuffTime:(yi=e.index,r=e.rebuffTime);var a=Math.round(1e3*e.buffer_level),o=0,s=0,c=0,d=0;50<=e.loadTime&&0<e.loadSize&&(fi[_i%fi.length]=e.loadSize,pi[_i%fi.length]=e.loadTime,_i++),0<e.loadSize&&0<e.loadTime&&(d=Math.round(e.loadSize/(e.loadTime/1e3)));for(var u=0;u<fi.length&&fi[u];u++)o+=fi[u],s+=pi[u];0<o&&0<s&&(c=Math.round(o/(s/1e3)));c=0<e.loadSize?8*Math.min(c,d):-1,d=8*Math.round(e.size/e.duration);return bi=bi||gt.a.getUserInfoFromCookie(),{clientid:Ti,version:"0.5.1",client_version:"111",msg_seq:(ki++).toString(),msgid:"3",device_type:"pc",isp:bi.userNetType,city:bi.userArea,isvip:Si?"1":"0",isp2p:(hi.loadSegment?1:0).toString(),channel_type:"movie",report:{last_chunk_id:e.index.toString(),last_chunk_size:e.lastChunkSize.toString(),last_chunk_quality:d.toString(),chunk_count:e.chunk_count.toString(),buffer_level:a.toString(),rebuff_time:Math.round(r).toString(),bandwidthEst:c.toString(),next_chunk_info:t,buffer_array:e.bufferArr,bufffer_step:e.bufferUpdateStep.toString()}}}}}],[{key:"clearRaiseLevelCount",value:function(){vi=0}}]),Ii);function Ii(){f()(this,Ii),this.levelID=-1,this.nextReqThreshold=0,gi.clear(),xi=_t.a.absDoMain?(vt.isHTTPS?"https":"http")+"://"+_t.a.absDoMain+"/ABSRequest":(vt.isHTTPS?"https":"http")+"://abs.video.iqiyi.com/ABSRequest",this.connectWebscoket(),this.lastLevel=-1,this.receiveCount=0,this.algorithm_des="defal",Si||_t.a.getUserInfoFunc(wi)}function wi(e){Si=e}var Ai,Ei,ie=d(243),Di=d.n(ie),y=(c()(Vi,[{key:"toString",value:function(){return this._count.toString()}},{key:"add",value:function(e){this._count+=e}},{key:"reset",value:function(){this._count=0}}]),Vi),qi={stratus_connectCnt:new y("scnt"),stratus_connectSuccess:new y("sscu"),stratus_duration:new y("sdur"),stratus_break:new y("sbrk"),cdn_taskCnt:new y("ctct"),cdn_progressCnt:new y("cpct"),cdn_progressTime:new y("cptm"),cdn_loadTime:new y("cltm"),dispatchKey_Cnt:new y("dkcnt"),dispatchKey_Done:new y("dkdon"),dispatch_Cnt:new y("dict"),dispatch_doneCount:new y("ddct"),dispatch_duration:new y("ddur"),change_definition:new y("cdef"),init:function(){Ai=Ai||[this.stratus_connectCnt,this.stratus_connectSuccess,this.stratus_duration,this.stratus_break,this.cdn_taskCnt,this.cdn_progressCnt,this.cdn_progressTime,this.cdn_loadTime,this.dispatchKey_Cnt,this.dispatchKey_Done,this.dispatch_Cnt,this.dispatch_doneCount,this.dispatch_duration,this.change_definition]},reset:function(){for(var e=0;e<Ai.length;e++)Ai[e].reset()},tail:function(e){for(var t=0;t<Ai.length;t++)e[Ai[t].name]=Ai[t].toString()}},Oi=0,Ri=0,Li=0,Mi=0,Ci=0,Ni=0,Bi=0,Fi=0,Ui=0,ji=!1;function Vi(e){f()(this,Vi),this.name=e,this._count=0}function Wi(){var e;qi.init(),ji=!0,(4<=++Hi||12582912<Oi-Ci+(Ri-Ni)+(Li-Bi))&&((e={t:"h5timing"}).lp2p=Ri-Ni,e.up2p=Li-Bi,e.lcdn=Oi-Ci,e.used=Mi-Fi,qi.tail(e),e.dats=pt.d.videoDataSize,e.srcn=hi.size,e.plydu=_t.a.playDuration-Ui,e.lmax=_t.a.downMax,zi(e),qi.reset(),Ci=Oi,Ni=Ri,Bi=Li,Fi=Mi,Ui=_t.a.playDuration,Hi=0),Ei=setTimeout(Wi,1e4)}var Hi=0;function zi(e){var t;ji&&(t=gt.a.getUserInfoFromCookie(),e.uid=_t.a.uuid,e.uif=t.userInfo,e.tvid=_t.a.tvId,e.tkip=_t.a.trackerIP,e.lstws=t.ws,e.lstidc=t.idc,e.ver=pt.l.version,e.cal=Oi,e.pal=Ri,gt.a.fireUrl(e,"//msg.qy.net/vodpb.gif"))}var Yi,Gi,Qi=Object.defineProperties({start:function(){ji||Wi()},stop:function(){ji=!1,clearTimeout(Ei)},check:function(e){ji&&(e.t="h5check",zi(e))},addPBItem:function(e,t){t?e.add(t):e.add(1)}},{cdnSize:{get:function(){return Oi},set:function(e){Oi=e},configurable:!0,enumerable:!0},p2pSize:{get:function(){return Ri},set:function(e){Ri=e},configurable:!0,enumerable:!0},upSize:{get:function(){return Li},set:function(e){Li=e},configurable:!0,enumerable:!0},usedSize:{get:function(){return Mi},set:function(e){Mi=e},configurable:!0,enumerable:!0}}),Ki=0,$i=0,Zi=null,Xi=Object.defineProperties({resetData:function(e){if(e){if(e instanceof ArrayBuffer)$i=e.byteLength,Zi=new Uint8Array(e);else{if(!(e instanceof Uint8Array))return;$i=e.byteLength,Zi=e}Ki=0}},getStr:function(e){if(!Zi)return"";var t=Math.ceil(e/2),i=e%2;if((t=$i<Ki+t?$i-Ki:t)<=0)return"";for(var n="",r=0;r<t;r++){var a=Zi[Ki+r],o=void 0;1==i&&r===t-1?n+=Math.floor(a/15).toString(16):(o=a%15,n+=Math.floor(a/15).toString(16)+o.toString(16))}return Ki+=t,n},getCharStr:function(e){if(!Zi)return"";var t=Math.ceil(e);if((t=$i<Ki+t?$i-Ki:t)<=0)return"";for(var i="",n=0;n<t;n++)i+=Zi[Ki+n].toString(16);return Ki+=t,i},getUTF8Str:function(e){if(!Zi)return"";var t=Math.ceil(e);if((t=$i<Ki+t?$i-Ki:t)<=0)return"";for(var i="",n=0;n<t;n++){var r=Zi[Ki+n];i+=String.fromCharCode(r)}return Ki+=t,i},get8:function(){if(!Zi||$i<Ki+1)return 0;var e=Zi[Ki];return Ki+=1,e},get16:function(){if(!Zi||$i<Ki+2)return 0;var e=256*Zi[Ki]+Zi[Ki+1];return Ki+=2,e},get32:function(){if(!Zi||$i<Ki+4)return 0;var e=16777216*Zi[Ki]+65536*Zi[Ki+1]+256*Zi[Ki+2]+Zi[Ki+3];return Ki+=4,e},getBytes:function(e){if(!Zi||$i<Ki+e)return null;var t=Zi.subarray(Ki,Ki+e);return Ki+=e,t},clear:function(){Zi=null},crc:function(){for(Ki=$i-4,Yi=Math.floor($i/4),Gi=0;Gi<4;){if(Zi[Ki+Gi]!==Zi[Gi*Yi])return!1;Gi++}return!0},toString:function(){for(var e="",t=$i<=64?$i:64,i=0;i<t;i++){var n=Zi[i];e+=n<16?"0"+n.toString(16):n.toString(16),i<t-1&&(e+="-")}return e}},{position:{set:function(e){Ki=e},get:function(){return Ki},configurable:!0,enumerable:!0},length:{get:function(){return $i},configurable:!0,enumerable:!0}}),m=(c()(mn,[{key:"connect",value:function(){if("off"!==_t.a.limitP2P){clearTimeout(this.retryStep),this.retryStep=0,this.reconnectCnt++,this.reconnectCnt%6==3&&this.trackerIPBase++,(3<=this.reconnectCnt%6||_t.a.trackerStatus)&&(e=gt.a.getUserInfoFromCookie(),""!==(e=gt.a.getTrackerIP(e.userNetType,pt.j.tracker,this.id,this.trackerIPBase))&&(this.firstIPInfo=e));var e=this.firstIPInfo.split("|");this.ip=e[0],this.trackerPort=e[1],this.SDomain=e[2],this.StrackerPort=e[3],this.runWSS="wss"===e[5],_t.a.trackerIP=this.ip,Qi.addPBItem(qi.stratus_connectCnt);var t=this;try{vt.isHTTPS||this.runWSS?this.socket=new WebSocket("wss://"+this.SDomain+":"+this.StrackerPort+"/ws",["binary"]):this.socket=new WebSocket("ws://"+this.ip+":"+this.trackerPort+"/ws",["binary"]),this.socket.binaryType="arraybuffer",this.socket.onopen=function(e){t.onOpen.call(t,e)},this.socket.onmessage=function(e){t.onData.call(t,e)},this.socket.onerror=function(e){t.onError.call(t,e)},this.socket.onclose=function(e){t.onClose.call(t,e)},Dt.a.info("tracker [START] IP : "+this.ip+":"+this.trackerPort)}catch(e){}this.startTime=Date.now(),clearTimeout(this.watcherStep),this.watcherStep=setTimeout(function(){t.heartBeat.call(t)},6e3),clearTimeout(this.pbTimer),this.pbTimer=setTimeout(function(){t.firePB.call(t)},2e4)}}},{key:"onOpen",value:function(e){Dt.a.info("tracker [SUCCESS] IP : "+this.ip+":"+this.trackerPort),Qi.addPBItem(qi.stratus_connectSuccess),Qi.addPBItem(qi.stratus_duration,Date.now()-this.startTime),this.open=!0,this.register()}},{key:"onTimeout",value:function(){this.running&&(Dt.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : connect timeout"),this.error())}},{key:"onClose",value:function(e){this.running&&(Qi.addPBItem(qi.stratus_break),Dt.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onClose-"+e.data),this.error())}},{key:"onError",value:function(e){this.running&&(Dt.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onError-"+e.data),this.error())}},{key:"error",value:function(){var e;this.running&&this.socket&&this.socket.readyState===WebSocket.CLOSED&&6e4<Date.now()-this.startTime&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,(e=this).retryStep=setTimeout(function(){e.connect.call(e)},2e3))}},{key:"onData",value:function(e){try{if("off"===_t.a.limitP2P)return void this.error();if(Xi.resetData(e.data),Ji=Xi.get16(),this.running&&this.socket)switch(Ji){case 1:0===(rn=Xi.get16())?(tn=Xi.get16(),nn=Xi.getCharStr(tn),this.uid=nn,_t.a.trackerStatus=Xi.get8(),_t.a.trackerStatus&&(this.trackerIPBase++,this.socket.close()),Dt.a.info("[P2P load], onRegister uid : "+this.uid),this.onMsg(fn.State_register,this.uid)):(Dt.a.warn("tracker [ERROR] register error"),this.error());break;case 3:if(0===(rn=Xi.get16())){sn=Xi.get16();for(var t=0;t<sn;t++){cn=Xi.get16(),dn=Xi.getCharStr(cn),un=Xi.get16();for(var i=0;i<un;i++){ln=Xi.get16(),hn=Xi.getCharStr(ln),en=Xi.get32();for(var n=0;n<hi.segmentList.length;n++)hi.segmentList[n].p2pID===this.id&&hi.segmentList[n].vid===dn&&hi.segmentList[n].index===hn&&(hi.segmentList[n].peerCnt=en)}}}else 400===rn?(Qi.addPBItem(qi.stratus_break),this.error()):Dt.a.warn("tracker [ERROR] update error");break;case 4:if(0===(rn=Xi.get16())){if(this.trackerStateFun){var r;Xi.get32();en=Xi.get16();for(var a=[],o=0;o<en;o++)tn=Xi.get16(),nn=Xi.getCharStr(tn),a.push(nn);if(this.peerSegment){for(var s=Xi.get16(),c=[],d=0;d<s;d++)cn=Xi.get16(),dn=Xi.getCharStr(cn),r=Xi.get32(),c.push({vid:dn,count:r});this.peerSegment.checkDefinition(c),this.peerSegment=null}this.onMsg(fn.State_upDatePeers,this.uid,a)}}else 400===rn?(Qi.addPBItem(qi.stratus_break),this.error()):Dt.a.warn("tracker [ERROR] query error");break;case 5:tn=Xi.get16(),nn=Xi.getCharStr(tn),an=Xi.get16(),(on=Xi.getUTF8Str(an))&&nn&&this.trackerStateFun&&this.onMsg(fn.State_candidate,nn,JSON.parse(on));break;case 6:tn=Xi.get16(),nn=Xi.getCharStr(tn),an=Xi.get16(),(on=Xi.getUTF8Str(an))&&nn&&this.trackerStateFun&&this.onMsg(fn.State_offer,nn,JSON.parse(on));break;case 7:tn=Xi.get16(),nn=Xi.getCharStr(tn),an=Xi.get16(),(on=Xi.getUTF8Str(an))&&nn&&this.trackerStateFun&&this.onMsg(fn.State_answer,nn,JSON.parse(on));break;case 2:break;default:Dt.a.warn("[P2P load],tracker [ERROR] not Support token : "+Ji)}}catch(e){}}},{key:"onMsg",value:function(e,t,i){throw"virtual method"}},{key:"register",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{ei.resetData(),ei.set16(1),ei.set16(pt.j.trackerVersion),ei.set16(this.uid.length),ei.setCharStr(this.uid),ei.set16(_t.a.platform),ei.set16(_t.a.aid.length),ei.setCharStr(_t.a.aid);var e=ei.getReferData();this.socket.send(e)}catch(e){}else Qi.addPBItem(qi.stratus_break),this.error()}},{key:"unRegister",value:function(){}},{key:"heartBeat",value:function(){var e=this;if(clearTimeout(this.watcherStep),this.running&&this.open&&this.socket&&this.socket.readyState===WebSocket.OPEN){try{if(ei.resetData(),ei.set16(3),_t.a.platform!==mt){for(var t=[],i=0;i<hi.segmentList.length;i++)hi.segmentList[i].p2pID===this.id&&!0===pt.j.upLoad&&(t.push(hi.segmentList[i].index),t.push(hi.segmentList[i].vid));ei.set16(t.length/2);for(var n=0;n<t.length;n+=2)ei.set16(t[n].length),ei.setCharStr(t[n]),ei.set16(t[n+1].length),ei.setCharStr(t[n+1])}var r=ei.getReferData();this.socket.send(r)}catch(e){}this.pbTimer=setTimeout(function(){e.firePB.call(e)},100)}else Qi.addPBItem(qi.stratus_break),this.error();this.watcherStep=setTimeout(function(){e.heartBeat.call(e)},2e4)}},{key:"getPeer",value:function(e){if(this.peerSegment=e,this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{var t=e.vid,i=e.vids,n=e.index;if(ei.resetData(),ei.set16(4),ei.set16(t.length),ei.setCharStr(t),ei.set16(n.length),ei.setCharStr(n),i&&0<i.length){ei.set16(i.length);for(var r=0;r<i.length;r++)ei.set16(i[r].vid.length),ei.setCharStr(i[r].vid)}else ei.set16(1),ei.set16(t.length),ei.setCharStr(t);var a=ei.getReferData();this.socket.send(a)}catch(e){}else Qi.addPBItem(qi.stratus_break),this.error()}},{key:"candidate",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{on=JSON.stringify(t),ei.resetData(),ei.set16(5),ei.set16(e.length),ei.setCharStr(e),ei.set16(on.length),ei.setUTF8Str(on);var i=ei.getReferData();this.socket.send(i)}catch(e){}else Qi.addPBItem(qi.stratus_break),this.error()}},{key:"offer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{on=JSON.stringify(t),ei.resetData(),ei.set16(6),ei.set16(e.length),ei.setCharStr(e),ei.set16(on.length),ei.setUTF8Str(on);var i=ei.getReferData();this.socket.send(i)}catch(e){}else Qi.addPBItem(qi.stratus_break),this.error()}},{key:"answer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{on=JSON.stringify(t),ei.resetData(),ei.set16(7),ei.set16(e.length),ei.setCharStr(e),ei.set16(on.length),ei.setUTF8Str(on);var i=ei.getReferData();this.socket.send(i)}catch(e){}else Qi.addPBItem(qi.stratus_break),this.error()}},{key:"firePB",value:function(){if(clearTimeout(this.pbTimer),this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{ei.resetData(),ei.set16(256),ei.set32(this.cdnSize-this.last_cdnSize),ei.set32(this.p2pSize-this.last_p2pSize),ei.set32(this.usedSize-this.last_usedSize),ei.set32(this.upSize-this.last_upSize),ei.set32(pt.d.videoDataSize),ei.set32(0),ei.set32(this.connectCnt-this.lastConnectCnt),ei.set32(this.connectDoneCnt-this.lastConnectDoneCnt),_t.a.MixWaterMark&&_t.a.sendPingBack({type:"BWReport",para:{cdnsize:this.cdnSize-this.last_cdnSize,p2psize:this.p2pSize-this.last_p2pSize,usesize:this.upSize-this.last_upSize}}),ei.set16(_t.a.platform);var e=ei.getReferData();this.socket.send(e),this.last_cdnSize=this.cdnSize,this.last_p2pSize=this.p2pSize,this.last_upSize=this.upSize,this.last_usedSize=this.usedSize,this.lastConnectCnt=this.connectCnt,this.lastConnectDoneCnt=this.connectDoneCnt}catch(e){}else Qi.addPBItem(qi.stratus_break),this.error()}},{key:"fireConnectOK",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{ei.resetData(),ei.set16(260),ei.set16(e.length),ei.setCharStr(e),ei.set16(t);var i=ei.getReferData();this.socket.send(i)}catch(e){}}},{key:"clear",value:function(){try{this.running=!1,this.open=!1,this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null),clearTimeout(this.retryStep),clearTimeout(this.watcherStep),clearTimeout(this.pbTimer)}catch(e){}}}]),mn),Ji=null,en=0,tn=0,nn="",rn=0,an=0,on="",sn=0,cn=0,dn="",un=0,ln=0,hn="",fn={State_upDatePeers:"State_upDatePeers",State_register:"State_register",State_candidate:"State_candidate",State_offer:"State_offer",State_answer:"State_answer",State_Error:"State_error"},n=m,pn={bundlePolicy:"max-compat",iceServers:[],iceTransportPolicy:"all",rtcpMuxPolicy:"require",candidateNetworkPolicy:"ALL"},_n=[],gn=[],yn=[],vn=0;function mn(e,t,i){f()(this,mn),this.socket=null,this.trackerStateFun=i,this.uid="",this.startTime=0,this.watcherStep=0,this.retryStep=0,this.pbTimer=0,this.reconnectCnt=0,this.id=e,this.firstIPInfo=t,this.running=!0,this.open=!1,this.cdnSize=0,this.p2pSize=0,this.upSize=0,this.usedSize=0,this.connectCnt=0,this.connectDoneCnt=0,this.last_cdnSize=0,this.last_p2pSize=0,this.last_upSize=0,this.last_usedSize=0,this.lastConnectCnt=0,this.lastConnectDoneCnt=0,this.trackerIPBase=0,this.connect()}function bn(e){return _n&&0<_n.length&&-1!==_n.indexOf(e)}var kn={has:bn,get:function(e){e=_n.indexOf(e);return-1!==e?gn[e]:null},use:function(e){if(pn.iceServers=pt.j.stun,pn.iceServers.length<=0)return!1;if(bn(e))return!0;for(var t=0;t<yn.length;t++)3e5<Date.now()-yn[t]&&yn.splice(t,1);if(_n.length+yn.length>pt.j.RTCPoolSize||vn>pt.j.RTCMax)return!1;++vn>=2*pt.j.RTCMax/3&&(pt.j.switchPage=!0);try{gn.push({rtc:new RTCPeerConnection(pn),channel:null})}catch(e){return!1}return _n.push(e),!0},shut:function(e){e=_n.indexOf(e);if(-1!==e){if(delete _n[e],_n[e]=null,_n.splice(e,1),null!==gn[e].channel){delete gn[e].channel.onopen,gn[e].channel.onopen=null,delete gn[e].channel.onclose,gn[e].channel.onclose=null,delete gn[e].channel.onerror,gn[e].channel.onerror=null,delete gn[e].channel.onmessage,gn[e].channel.onmessage=null;try{gn[e].channel.close()}catch(e){}delete gn[e].channel,gn[e].channel=null}if(null!==gn[e].rtc){delete gn[e].rtc.oniceconnectionstatechange,gn[e].rtc.oniceconnectionstatechange=null,delete gn[e].rtc.onicecandidate,gn[e].rtc.onicecandidate=null,delete gn[e].rtc.ondatachannel,gn[e].rtc.ondatachannel=null;try{gn[e].rtc.close()}catch(e){}delete gn[e].rtc,gn[e].rtc=null}yn.push(Date.now()),delete gn[e],gn[e]=null,gn.splice(e,1)}}},xn=512,Sn=[],Tn=0,Pn=.024,In=0,wn=0,An=0,En=-1,Dn=1536,qn=1536,On=0,Rn=Object.defineProperties({check:function(){var e;(En=Date.now())<=wn||(1e3<=(On=En-wn)&&(Dn=qn,function(){var e,t,i=0;for(e in Sn)!e||Sn[e].time+Sn[e].rto+500<En?(t=Sn.splice(i,1)[0],Tn-=t.cont):i++}(),wn=En,e=In/On,In=0,Pn+=.25*(e-Pn)),En<=An||0<(On=En-An)&&(An=En,function(e){for(;0<Tn&&1<e;){var t=Sn.shift();if(Tn-=t.cont,e-=t.cont,t)try{if(kn.has(t.id)&&null!==kn.get(t.id).channel&&"open"===kn.get(t.id).channel.readyState)try{kn.get(t.id).channel.send(t.args)}catch(e){}}catch(e){}}}(Math.min(Pn+Tn/1e3,xn/1e3)*On)))},pushTsk:function(e,t,i,n){return!(xn<=Tn||(Sn.push({args:t,id:e,rto:i,time:En,cont:n}),Tn+=n,In+=n,0))},removeTsk:function(e){var t,i,n=0;for(t in Sn)Sn[t].id===e?(i=Sn.splice(n,1)[0],Tn-=i.cont):n++}},{sendMax:{set:function(e){xn=e},configurable:!0,enumerable:!0},loadQuota:{get:function(){return Dn},set:function(e){Dn=e},configurable:!0,enumerable:!0},loadQuotaMax:{set:function(e){qn=e},configurable:!0,enumerable:!0}}),Ln=(c()(Nn,[{key:"getBit",value:function(e){if(0<=e&&e<this.size){var t=e%8,e=Math.floor(e/8);return 0!=(this.data[e]&1<<t)}return!1}},{key:"setBit",value:function(e,t){var i;0<=e&&e<this.size&&(i=e%8,e=Math.floor(e/8),this.data[e]=!0===t?this.data[e]|1<<i:this.data[e]&~(1<<i))}},{key:"getByte",value:function(e){return 0<=e&&e+8<=this.size&&e%8==0&&255===this.data[Math.floor(e/8)]}},{key:"setByte",value:function(e,t){0<=e&&e<this.size&&e%8==0&&(this.data[Math.floor(e/8)]=t?255:0)}},{key:"checkRange",value:function(e,t){for(t>this.size&&(t=this.size);e<t;)if(e%8==0&&e+8<=t){if(255!==this.data[Math.floor(e/8)])return!1;e+=8}else{if(!this.getBit(e))return!1;e++}return!0}},{key:"toData",value:function(){return ei.resetData(),ei.set32(this.alias),ei.set32(this.size),ei.setBytes(this.data,0,this.data.byteLength),ei.getData()}},{key:"fromData",value:function(e){Xi.resetData(e),this.alias=Xi.get32(),this.size=Xi.get32(),this.data=Xi.getBytes(e.byteLength-8)}},{key:"resetGap",value:function(e){if((0===e||e)&&-1!==e)for(this.gpID=e;this.gpID<this.size&&!this.getBit(this.gpID);)this.gpID++}},{key:"toString",value:function(){for(var e="",t=0,i=this.size;t<i;)e+=this.getBit(t)?"*":"_",++t%128==0&&(e+="\r\n");return e+"|"}},{key:"reset",value:function(e){for(var t=0;t<Math.ceil(this.size/8);t++)this.data[t]=e?255:0}},{key:"clear",value:function(){delete this.data,this.head&&delete this.head}}]),Nn),Mn={ordered:!1},s=(c()(Cn,[{key:"baseCheck",value:function(){return!(-1!==this.lastEventTime&&Date.now()-this.lastEventTime>=pt.j.NATTimeoutStep&&(this.peerMgr.removePeerNode(this.peerID,"5"),1))}},{key:"fireData",value:function(t,e){if(this.ready&&null!==this.rtc&&null!==this.dataChannel){var i=null;switch(t){case 0:if((i=Cn.pkgQuit())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(i.buffer)}catch(e){Dt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+e.message)}break;case 1:if((i=Cn.pkgHeartBeat(e))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(i.buffer)}catch(e){Dt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+e.message)}break;case 2:if((i=Cn.pkgRequest(e))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(i.buffer)}catch(e){Dt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+e.message)}break;case 4:if((i=Cn.pkgClear())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(i.buffer)}catch(e){Dt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+e.message)}break;case 5:if((i=Cn.pkgRefuse())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(i.buffer)}catch(e){Dt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+e.message)}break;case 6:if((i=Cn.pkgDescribe(e))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(i.buffer)}catch(e){Dt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+e.message)}}}}},{key:"onData",value:function(e){if(e&&null!==this.rtc&&null!==this.dataChannel)if(0!==e[0])this.peerMgr.removePeerNode(this.peerID,"7");else switch(this.lastEventTime=Date.now(),e[1]){case 0:this.onQuit&&this.onQuit(Cn.unPkgQuit(e));break;case 1:this.onHeartbeat&&this.onHeartbeat(Cn.unPkgHeartBeat(e));break;case 2:this.onRequest&&this.onRequest(Cn.unPkgRequest(e));break;case 3:this.onReceive&&this.onReceive(Cn.unPkgReceive(e));break;case 4:this.onClear&&this.onClear(Cn.unPkgClear(e));break;case 5:this.onRefuse&&this.onRefuse(Cn.unPkgRefuse(e));break;case 6:this.onDescribe&&this.onDescribe(Cn.unPkgDescribe(e))}}},{key:"onQuit",value:function(){throw"virtual method"}},{key:"onHeartbeat",value:function(){throw"virtual method"}},{key:"onRequest",value:function(){throw"virtual method"}},{key:"onReceive",value:function(){throw"virtual method"}},{key:"onClear",value:function(){throw"virtual method"}},{key:"onRefuse",value:function(){throw"virtual method"}},{key:"onDescribe",value:function(){throw"virtual method"}},{key:"getDataChannel",value:function(e){var t=this;this.dataChannel=e,this.dataChannel.onopen=function(){t.ready=!0,clearTimeout(t.timeStep),0===t.workTime&&(t.workTime=Date.now()),0===t.natUseTime&&(t.natUseTime=Date.now()-t.natStartTime),t.active&&(t.peerMgr.connectDoneCnt++,t.peerMgr.fireConnectOK(t.peerID,t.natUseTime)),t.lastEventTime=Date.now()},this.dataChannel.onclose=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,"3")},this.dataChannel.onerror=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,"3")},this.dataChannel.onmessage=function(e){t.onData(new Uint8Array(e.data))}}},{key:"close",value:function(){clearTimeout(this.timeStep),delete this.peerMgr,this.peerMgr=null,this.ready=!1}},{key:"rtc",get:function(){return kn.get(this.peerID).rtc}},{key:"dataChannel",get:function(){return kn.get(this.peerID).channel},set:function(e){return kn.get(this.peerID).channel=e}},{key:"offer",value:function(e){}},{key:"answer",value:function(e){this.rtc.setRemoteDescription(new RTCSessionDescription(e)).catch(function(e){console.log("RTC answer be reject:"+e)})}},{key:"candidate",value:function(e){this.rtc.addIceCandidate(new RTCIceCandidate(e)).catch(function(e){console.log("RTC candidate fail:"+e)})}},{key:"onNATTimeout",value:function(){this.peerMgr.removePeerNode(this.peerID,"5")}}],[{key:"pkgQuit",value:function(){return ei.resetData(),ei.set8(0),ei.set8(0),ei.crc(),ei.getReferData()}},{key:"unPkgQuit",value:function(e){return Xi.resetData(e),this.QuitParam||(this.QuitParam={}),this.QuitParam.version=Xi.get8(),this.QuitParam.type=Xi.get8(),this.QuitParam.crc=Xi.crc(),this.QuitParam}},{key:"pkgHeartBeat",value:function(e){ei.resetData(),ei.set8(0),ei.set8(1),ei.set32(e.localID);var t=0;return null!==e.bitmap&&(t+=1),ei.set8(t),ei.set8(e.lostR),ei.set8(e.vid.length),ei.setCharStr(e.vid),ei.set8(e.sourceID.length),ei.setCharStr(e.sourceID),ei.set32(e.alias),null!==e.bitmap&&(ei.set8(e.bitmap.byteLength),ei.setBytes(e.bitmap,0,e.bitmap.byteLength)),ei.crc(),ei.getReferData()}},{key:"unPkgHeartBeat",value:function(e){Xi.resetData(e),this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.version=Xi.get8(),this.heartbeatParam.type=Xi.get8(),this.heartbeatParam.localID=Xi.get32();var t=Xi.get8();this.heartbeatParam.lostR=Xi.get8();e=Xi.get8();return this.heartbeatParam.vid=Xi.getCharStr(e),e=Xi.get8(),this.heartbeatParam.sourceID=Xi.getCharStr(e),this.heartbeatParam.alias=Xi.get32(),1&t?(e=Xi.get8(),this.heartbeatParam.bitmap=Xi.getBytes(e)):this.heartbeatParam.bitmap=null,this.heartbeatParam.crc=Xi.crc(),this.heartbeatParam}},{key:"pkgRequest",value:function(e){if(0<e.length){for(ei.resetData(),ei.set8(0),ei.set8(2),ei.set32(e[0].alias),ei.set8(e.length);0<e.length;){var t=e.shift();ei.set32(t.subPieceID)}return ei.crc(),ei.getReferData()}return null}},{key:"unPkgRequest",value:function(e){Xi.resetData(e),this.requestParam||(this.requestParam={}),this.requestParam.version=Xi.get8(),this.requestParam.type=Xi.get8(),this.requestParam.alias=Xi.get32(),this.requestParam.taskLen=Xi.get8(),this.requestParam.requireTaskList||(this.requestParam.requireTaskList=[]);for(var t=this.requestParam.requireTaskList.length=0;t<this.requestParam.taskLen;)this.requestParam.requireTaskList.push(Xi.get32()),t++;return this.requestParam.crc=Xi.crc(),this.requestParam}},{key:"unPkgReceive",value:function(e){Xi.resetData(e),this.receiveParam||(this.receiveParam={}),this.receiveParam.version=Xi.get8(),this.receiveParam.type=Xi.get8(),this.receiveParam.alias=Xi.get32(),this.receiveParam.sIDList?this.receiveParam.sIDList.length=0:this.receiveParam.sIDList=[],this.receiveParam.dataList?this.receiveParam.dataList.length=0:this.receiveParam.dataList=[];for(var t=Xi.get8(),i=0;i<t;)this.receiveParam.sIDList[i]=Xi.get32(),this.receiveParam.dataList[i]=Xi.getBytes(pt.d.subPieceSize),i++;return this.receiveParam.crc=Xi.crc(),this.receiveParam}},{key:"pkgClear",value:function(){return ei.resetData(),ei.set8(0),ei.set8(4),ei.crc(),ei.getReferData()}},{key:"unPkgClear",value:function(e){return Xi.resetData(e),this.clearParam||(this.clearParam={}),this.clearParam.version=Xi.get8(),this.clearParam.type=Xi.get8(),this.clearParam.crc=Xi.crc(),this.clearParam}},{key:"pkgRefuse",value:function(){return ei.resetData(),ei.set8(0),ei.set8(5),ei.crc(),ei.getReferData()}},{key:"unPkgRefuse",value:function(e){return Xi.resetData(e),this.refuseParam||(this.refuseParam={}),this.refuseParam.version=Xi.get8(),this.refuseParam.type=Xi.get8(),this.refuseParam.crc=Xi.crc(),this.refuseParam}},{key:"pkgDescribe",value:function(e){return ei.resetData(),ei.set8(0),ei.set8(6),ei.set16(e.byteLength),ei.setBytes(e,0,e.byteLength),ei.crc(),ei.getReferData()}},{key:"unPkgDescribe",value:function(e){Xi.resetData(e),this.describeParam||(this.describeParam={}),this.describeParam.version=Xi.get8(),this.describeParam.type=Xi.get8();e=Xi.get16();return this.describeParam.describe=Xi.getBytes(e),this.describeParam.crc=Xi.crc(),this.describeParam}}]),Cn);function Cn(e,t,i,n){f()(this,Cn);var r=this;if(this.peerMgr=e,this.active=i,this.peerID=t,this.ready=!1,this.timeStep=-1,this.lastEventTime=-1,this.connectionState="new",this.workTime=0,this.natUseTime=0,this.natStartTime=-1,this.rtc.oniceconnectionstatechange=function(e){r.connectionState=e.currentTarget.iceConnectionState},this.rtc.onicecandidate=function(e){e.candidate&&r.peerMgr&&r.peerMgr.candidate(r.peerID,e.candidate)},this.active){try{this.getDataChannel(this.rtc.createDataChannel(null,Mn))}catch(e){}this.peerMgr.connectCnt++,this.rtc.createOffer().then(function(e){r.rtc.setLocalDescription(e).catch(function(e){Dt.a.error("RTC set local SDP error:"+e)}),r.peerMgr&&r.peerMgr.offer(r.peerID,e)}).catch(function(e){Dt.a.error("RTC create offer SDP error:"+e),r.peerMgr&&r.peerMgr.removePeerNode(r.peerID,"3")}),r.natStartTime=Date.now(),r.timeStep=setTimeout(function(){r.onNATTimeout.call(r)},pt.j.NATTimeoutStep)}else this.rtc.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){Dt.a.error("RTC set remote SDP error:"+e)}),this.rtc.ondatachannel=function(e){r.getDataChannel(e.channel)},this.rtc.createAnswer().then(function(e){r.rtc.setLocalDescription(e).then(function(){r.peerMgr&&r.peerMgr.answer(r.peerID,e)}).catch(function(e){Dt.a.error("RTC set local SDP error:"+e),r.peerMgr&&r.peerMgr.removePeerNode(r.peerID,"3")})}).catch(function(e){Dt.a.error("RTC create answer error:"+e),r.peerMgr&&r.peerMgr.removePeerNode(r.peerID,"3")}),r.natStartTime=Date.now(),r.timeStep=setTimeout(function(){r.onNATTimeout.call(r)},pt.j.NATTimeoutStep-1e3)}function Nn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;f()(this,Nn),this.alias=t,this.gpID=-1,e&&(this.size=e,this.data=new Uint8Array(Math.ceil(this.size/8)))}function Bn(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Fn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fn(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Un=Math.floor(4294967295*Math.random()),jn=new Wt,Vn=function(e){h()(o,e);var i,n,r=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function o(e,t,i,n){return f()(this,o),(n=r.call(this,e,t,i,n)).checked=!1,n.srtt=0,n.sdev=0,n.quota=32,n.mtu=1,n.lostR=0,n.lostHB=0,n.loadHB=0,n.rcvHB=0,n.upHB=0,n.lostCnt=0,n.loadCnt=0,n.rcvCnt=0,n.upCnt=0,n.peerInfo={loadBitmap:void 0,hasBitmap:!1,sourceID:"",alias:"",vid:"",peerLocalID:"",lostR:0},n.runTaskList=new Wt,n.srcDscr=new Wt,n.checkRTOLastTime=-1,n.heartbeatLastTime=-1,n.heartbeatCnt=6,n.createdTime=Date.now(),n}return c()(o,[{key:"check",value:function(){this.baseCheck()&&this.ready&&(this.checkHeartbeat()||this.loadTask(),this.checkRTO())}},{key:"checkHeartbeat",value:function(){var e;return!!(3e3<Date.now()-this.heartbeatLastTime&&hi.loadSegment)&&(this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.localID=Un,this.heartbeatParam.vid=hi.loadSegment.vid,this.heartbeatParam.alias=hi.loadSegment.alias,this.heartbeatParam.sourceID=hi.loadSegment.sourceID,hi.preLoadSegment?(this.heartbeatParam.preInfo.alias=hi.preLoadSegment.alias,this.heartbeatParam.preInfo.sourceID=hi.preLoadSegment.sourceID):(this.heartbeatParam.preInfo.alias="",this.heartbeatParam.preInfo.sourceID=""),""!==this.peerInfo.alias&&hi.hasSegment(this.peerInfo.alias)&&!0===pt.j.upLoad?(e=hi.getSegment(this.peerInfo.alias),this.heartbeatParam.bitmap=e.bitmap.toData()):this.heartbeatParam.bitmap=null,0===this.loadHB?this.heartbeatParam.lostR=255:this.heartbeatParam.lostR=this.lostR,this.fireData(1,this.heartbeatParam),this.lostHB=0,this.loadHB=0,5<this.lostR?this.lostR-=5:this.lostR=0,this.heartbeatCnt++,10<this.heartbeatCnt&&(this.heartbeatCnt=0,this.fireSourceDescribe()),this.heartbeatLastTime=Date.now(),!0)}},{key:"loadTask",value:function(){if(0<Rn.loadQuota&&this.peerInfo.hasBitmap&&hi.loadSegment&&this.peerInfo.loadBitmap.alias===hi.loadSegment.alias&&!(this.quota<this.runTaskList.size)){var e=Math.max(this.srtt<200?this.quota/2:this.quota/3,1),e=Math.min(this.quota-this.runTaskList.size,e);if(this.taskList||(this.taskList=[]),this.taskList.length=0,hi.loadSegment.getTasks(this.peerInfo.loadBitmap,this.taskList,e,this.timeout),this.taskList.length,0<this.taskList.length){this.loadHB=this.loadHB+this.taskList.length,this.loadCnt=this.loadCnt+this.taskList.length;for(var t=0;t<this.taskList.length;t++)this.runTaskList.set(this.taskList[t].key,this.taskList[t]);this.fireData(2,this.taskList),Rn.loadQuota=Rn.loadQuota-t}}}},{key:"checkRTO",value:function(){if(!(Date.now()-this.checkRTOLastTime<=500)){this.checkRTOLastTime=Date.now();var e,t=0,i=Bn(this.runTaskList.values);try{for(i.s();!(e=i.n()).done;){var n,r=Ht()(e.value,2)[1];Date.now()-r.beginTime>r.rto&&(t++,(n=hi.getSegment(r.alias))&&n.recycleP2PTask(r),this.runTaskList.remove(r.key))}}catch(e){i.e(e)}finally{i.f()}this.updateQuota(t),this.lostCnt=this.lostCnt+t,this.lostHB=this.lostHB+t,this.lostR=this.lostR+t}}},{key:"timeout",get:function(){if(0===this.srtt)return 3e3;var e=Math.min(1e3+500*this.lostR,3e3),t=this.srtt+4*this.sdev+350;return Math.min(t+e,8e3)}},{key:"update_SRTT_SDEV",value:function(e){var t;0===this.srtt?(this.srtt=e,this.sdev=e/2):(t=Math.abs(e-this.srtt),this.srtt=.875*this.srtt+.125*e,this.sdev=this.sdev+.25*(t-this.sdev))}},{key:"updateQuota",value:function(e){e?(this.quota-=Math.sqrt(e/2),this.quota<2&&(this.quota=2)):this.quota<128&&0!==this.srtt&&1<this.srtt&&this.srtt<3e3&&(this.quota+=Math.log(this.srtt+500)/50)}},{key:"onHeartbeat",value:function(e){if(e.crc){if(this.peerInfo.sourceID=e.sourceID,this.peerInfo.alias=e.alias,this.peerInfo.vid=e.vid,this.peerInfo.peerLocalID=e.localID,!1===this.checked){if(jn.has(e.localID))return void this.peerMgr.removePeerNode(this.peerID,"19");jn.set(e.localID,!0),this.checked=!0}var t=hi.getSegment(e.alias);t&&e.sourceID!==t.sourceID?this.peerMgr.removePeerNode(this.peerID,"15"):(e.bitmap?(this.peerInfo.hasBitmap=!0,void 0===this.peerInfo.loadBitmap&&(this.peerInfo.loadBitmap=new Ln),this.peerInfo.loadBitmap.fromData(e.bitmap),hi.hasSegment(this.peerInfo.loadBitmap.alias)&&this.peerInfo.loadBitmap.resetGap(hi.getSegment(this.peerInfo.loadBitmap.alias).gpID)):this.peerInfo.hasBitmap=!1,255!==e.lostR&&(this.peerInfo.lostR=e.lostR,0===this.peerInfo.lostR?this.mtu=Math.min(this.mtu+1,16):this.mtu=Math.max(this.mtu-Math.ceil(this.peerInfo.lostR/2),1)))}else this.peerMgr.removePeerNode(this.peerID,"15")}},{key:"onRequest",value:function(e){if(e.crc){var t=e.alias;if(this.requestParam||(this.requestParam={}),this.requestParam.alias=t,this.requestParam.sIDList?this.requestParam.sIDList.length=0:this.requestParam.sIDList=[],this.requestParam.dataList?this.requestParam.dataList.length=0:this.requestParam.dataList=[],hi.getSegment(t)){for(var i=hi.getSegment(t),n=0;0<e.requireTaskList.length;){var r=e.requireTaskList.shift(),a=i.requestTask(r);a&&(n<this.mtu?(this.requestParam.dataList[n]=a,this.requestParam.sIDList[n]=r,this.upHB+=a.byteLength):(Rn.pushTsk(this.peerID,o.pkgReceive(this.requestParam),this.timeout,n)&&(this.upCnt+=n+1),this.requestParam.dataList.length=0,this.requestParam.sIDList.length=0,this.requestParam.dataList[n=0]=a,this.requestParam.sIDList[n]=r),n++)}0<this.requestParam.dataList.length&&0<this.requestParam.sIDList.length&&this.requestParam.sIDList.length===this.requestParam.dataList.length&&Rn.pushTsk(this.peerID,o.pkgReceive(this.requestParam),this.timeout,n)&&(this.upHB+=this.requestParam.dataList.length,this.upCnt+=n+1)}}else this.peerMgr.removePeerNode(this.peerID,"15")}},{key:"onReceive",value:function(e){if(e.crc){var t=hi.getSegment(e.alias);if(t)for(;0<e.sIDList.length;){var i=e.sIDList.shift(),n=e.alias.toString()+"_"+i.toString(),r=e.dataList.shift();t.addSubPiece(i,r),this.rcvHB+=r.byteLength,this.rcvCnt++,this.runTaskList.has(n)?(this.update_SRTT_SDEV(Date.now()-this.runTaskList.get(n).beginTime),this.runTaskList.remove(n)):this.update_SRTT_SDEV(this.timeout)}}else this.peerMgr.removePeerNode(this.peerID,"15")}},{key:"clearTask",value:function(){var e,t=Bn(this.runTaskList.values);try{for(t.s();!(e=t.n()).done;){var i,n=Ht()(e.value,1)[0],r=this.runTaskList.remove(n);!r||(i=hi.getSegment(r.alias))&&i.recycleP2PTask(r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"onClear",value:function(e){e.crc?Rn.removeTsk(this.peerID):this.peerMgr.removePeerNode(this,"15")}},{key:"onRefuse",value:function(e){if(e.crc){var t,i=Bn(this.runTaskList.values);try{for(i.s();!(t=i.n()).done;){var n,r=Ht()(t.value,1)[0],a=this.runTaskList.remove(r);!a||(n=hi.getSegment(a.alias))&&n.recycleP2PTask(a)}}catch(e){i.e(e)}finally{i.f()}this.fireData(4,null)}else this.peerMgr.removePeerNode(this,"15")}},{key:"onQuit",value:function(e){e.crc?this.peerMgr.removePeerNode(this.peerID,"0"):this.peerMgr.removePeerNode(this.peerID,"15")}},{key:"fireSourceDescribe",value:function(){var e;!this.peerInfo.vid||(e=hi.getSourceDescribe(this.peerInfo.vid))&&0<e.byteLength&&this.fireData(6,e)}},{key:"onDescribe",value:function(e){if(e.crc){if(e.describe){Xi.resetData(e.describe);var t=Xi.get16(),e=Xi.getCharStr(t);if(hi.loadSegment&&e===hi.loadSegment.vid){this.srcDscr.clear();for(var i=Xi.get16(),n=0;n<i;n++){var t=Xi.get16(),r=new Ln;r.alias=Xi.get32(),r.size=Xi.get32(),r.data=Xi.getBytes(t-8),this.srcDscr.set(r.alias,r)}}}}else this.peerMgr.removePeerNode(this.peerID,"15")}},{key:"checkHealth",value:function(e){if(this.rcvCnt<=0||this.srcDscr.size<=0)return!1;if(this.peerInfo&&this.peerInfo.hasBitmap&&this.peerInfo.alias===e)return this.peerInfo.loadBitmap.checkRange(hi.getSegment(e).gpID,hi.getSegment(e).gpID+8);if(this.srcDscr.has(e)){var t=this.srcDscr.get(e);if(t)return t.checkRange(hi.getSegment(e).gpID,hi.getSegment(e).gpID+8)}return!1}},{key:"peerClose",value:function(e){""!==this.peerInfo.peerLocalID&&jn.has(this.peerInfo.peerLocalID)&&"19"!==e&&jn.remove(this.peerInfo.peerLocalID),this.clearTask(),this.close(),delete this.peerMgr,this.peerMgr=null}},{key:"protected",get:function(){return Date.now()-this.createdTime<=3e4}},{key:"reset",value:function(){this.rcvHB=0,this.upHB=0}},{key:"log",get:function(){return" [ "+(this.active?this.ready?"open ":"idle ":"passv")+" ] , nat : "+gt.a.trimNumber(this.natUseTime/1e3,10)+" s , rcvHB : "+gt.a.trimNumber(this.rcvHB/1024,1e3)+" K , rcvCnt : "+gt.a.trimNumber(this.rcvCnt,1e6)+", upHB : "+gt.a.trimNumber(this.upHB/1024,1e3)+" K , upCnt : "+gt.a.trimNumber(this.upCnt,1e6)+", lostHB : "+gt.a.trimNumber(this.lostHB/1024,1e3)+" K , lostCnt : "+gt.a.trimNumber(this.lostCnt,1e5)+"\r\n"}}],[{key:"pkgReceive",value:function(e){for(ei.resetData(),ei.set8(0),ei.set8(3),ei.set32(e.alias),ei.set8(e.sIDList.length);0<e.sIDList.length;)ei.set32(e.sIDList.shift()),ei.setBytes(e.dataList.shift(),0,pt.d.subPieceSize);return ei.crc(),ei.getReferData()}}]),o}(s);function Wn(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Hn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Hn(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var zn=0,Yn=new Wt,Gn="",Qn=-1,Kn=!1,$n="",Zn=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),(t=r.call(this,e,t,function(e,t,i){this.onMsg(e,t,i)})).localID="",t.workPeers=new Wt,t.trackerPeers=[],t.upTaskSum=0,t.downTaskSum=0,t.upSpeed=0,t.downSpeed=0,t}return c()(a,[{key:"onMsg",value:function(e,t,i){switch(e){case fn.State_register:this.localID=t;break;case fn.State_upDatePeers:this.localID=t,this.updatePeers(i);break;case fn.State_candidate:this.workPeers.has(t)&&this.workPeers.get(t).candidate(i);break;case fn.State_offer:this.workPeers.has(t)||this.acceptPeer(t,i);break;case fn.State_answer:this.workPeers.has(t)&&this.workPeers.get(t).answer(i);break;case fn.State_Error:}}},{key:"onTimer",value:function(){var e,t=Wn(this.workPeers.values);try{for(t.s();!(e=t.n()).done;)Ht()(e.value,2)[1].check()}catch(e){t.e(e)}finally{t.f()}}},{key:"check",value:function(e){hi.loadSegment&&hi.loadSegment.alias!==$n&&(Kn=!0),this.addPeer(),this.weedOutPeer(),this.connectPeer(),this.upSpeed=0,this.downSpeed=0,Gn="",e&&(Gn+=" ---- tracker ID : "+this.id+" , IP : "+this.ip+" , localD : "+this.localID+"\r\n");var t,i=Wn(this.workPeers.values);try{for(i.s();!(t=i.n()).done;){var n=Ht()(t.value,2)[1];e&&(Gn+=n.log),this.upSpeed+=n.upHB,this.downSpeed+=n.rcvHB,this.upTaskSum+=n.upHB,this.downTaskSum+=n.rcvHB,n.reset()}}catch(e){i.e(e)}finally{i.f()}return Gn}},{key:"addPeer",value:function(){(!this.getPeerMark||Kn||this.getPeerMark+pt.j.getPeerIDStep<Date.now())&&hi.loadSegment&&!hi.loadSegment.done&&hi.loadSegment.p2pID===this.id&&($n=hi.loadSegment.alias,Kn=!1,this.getPeerMark=Date.now(),this.getPeer(hi.loadSegment))}},{key:"weedOutPeer",value:function(){if(!this.weedOutPeerMark||this.weedOutPeerMark+pt.j.weedOutPeerStep<Date.now()){this.weedOutPeerMark=Date.now();var e,t="",i=0,n=Wn(this.workPeers.values);try{for(n.s();!(e=n.n()).done;){var r,a,o=Ht()(e.value,1)[0],s=this.workPeers.get(o);s&&!s.protected&&(r=s.rcvCnt-(s.rcvCntLT||0),s.rcvCntLT=s.rcvCnt,a=s.upCnt-(s.upCntLT||0),s.upCntLT=s.upCnt,(a+r<i||0===i)&&(i=a+r,t=s.peerID))}}catch(e){n.e(e)}finally{n.f()}6<this.workPeers.size&&""!==t&&this.removePeerNode(t,"11")}}},{key:"connectPeer",value:function(){if(-1===Qn||Date.now()-Qn>pt.j.connectPeerStep)for(var e=0;e<this.trackerPeers.length&&zn<pt.j.connectMax;){e++;var t=this.trackerPeers.shift();if(t&&!this.checkErrPeerID(t)){if(kn.use(t)){this.workPeers.set(t,new Vn(this,t,!0)),zn<pt.j.connectMax&&zn++,Qn=Date.now();break}this.trackerPeers.push(t)}}}},{key:"acceptPeer",value:function(e,t){zn<pt.j.passiveMax&&!this.workPeers.has(e)&&Date.now()-Qn>pt.j.connectPeerStep&&(kn.use(e)?(this.workPeers.set(e,new Vn(this,e,!1,t)),zn<pt.j.passiveMax&&zn++,Qn=Date.now()):this.trackerPeers.push(e))}},{key:"checkErrPeerID",value:function(e){if(null===e||""===e||e===this.localID)return!0;if(this.workPeers.has(e))return!0;e=Yn.get(e);return e&&Date.now()-e.time<e.duration}},{key:"updatePeers",value:function(e){if(e){for(var t=this.trackerPeers.length=0;t<e.length;t++){var i=e[t];this.workPeers.has(i)||null===i||""===i||i===this.localID||this.trackerPeers.push(i)}this.connectPeer()}}},{key:"clearTask",value:function(){var e,t=Wn(this.workPeers.values);try{for(t.s();!(e=t.n()).done;)Ht()(e.value,2)[1].clearTask()}catch(e){t.e(e)}finally{t.f()}}},{key:"checkP2PHealth",value:function(e){var t,i=0,n=Wn(this.workPeers.values);try{for(n.s();!(t=n.n()).done;){var r=Ht()(t.value,2)[1];r.checkHealth(e)?i++:6<this.workPeers.size&&this.removePeerNode(r.peerID,"0")}}catch(e){n.e(e)}finally{n.f()}return i}},{key:"removePeerNode",value:function(e,t){var i;this.workPeers.has(e)&&(this.workPeers.get(e).peerClose(t),this.workPeers.remove(e),kn.shut(e),0<zn&&zn--,"5"===((i={}).time=Date.now(),t)?i.duration=12e4:i.duration=6e4,(t=Yn.get(e))?Yn.set(e,{time:i.time,duration:t.duration+i.duration}):Yn.set(e,i))}},{key:"destroy",value:function(){var e,t=Wn(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){var i=Ht()(e.value,1)[0];this.removePeerNode(i,"0"),0<zn&&zn--}}catch(e){t.e(e)}finally{t.f()}this.workPeers.clear(),this.trackerPeers.length=0,this.clear()}}]),a}(n),Xn=null,Jn=null,er=0,tr=!1,ir=30;function nr(){var e,t;30<=ir&&(e=t=ir=0,_t.a.p2pLog="",Xn&&(_t.a.p2pLog+=Xn.check(_t.a.onLog),t+=Xn.upSpeed,e+=Xn.downSpeed),Jn&&(_t.a.p2pLog+=Jn.check(_t.a.onLog),t+=Jn.upSpeed,e+=Jn.downSpeed),_t.a.downSpeed=e,_t.a.upSpeed=t,t=Math.min(Math.max(_t.a.upMax,32),768),Math.ceil(Date.now()/1e3%100)<=20?Rn.sendMax=1.2*t:Rn.sendMax=.6*t,hi.loadSegment&&(Rn.loadQuotaMax=2.5*hi.loadSegment.rate)),ir%2==0?(Rn.check(),ir++):(ir++,Xn&&Xn.onTimer(),Jn&&Jn.onTimer()),er=setTimeout(nr,33)}var rr,ar,or,sr,cr,dr,ur={startProxy:function(e,t){tr||(nr(),tr=!0),null===Xn?Xn=new Zn(e,t):null===Jn?Jn=new Zn(e,t):Xn.upTaskSum>Jn.upTaskSum?(Jn.destroy(),Jn=new Zn(e,t)):(Xn.destroy(),Xn=new Zn(e,t))},getProxyByID:function(e){return Xn&&e===Xn.id?Xn:Jn&&e===Jn.id?Jn:null},hasProxyByID:function(e){return!(!Xn||e!==Xn.id)||Jn&&e===Jn.id},getProxyByIPInfo:function(e){return Xn&&e===Xn.firstIPInfo?Xn:Jn&&e===Jn.firstIPInfo?Jn:null},hasProxyByIPInfo:function(e){return!(!Xn||e!==Xn.firstIPInfo)||Jn&&e===Jn.firstIPInfo},destroy:function(){Xn&&Xn.destroy(),Jn&&Jn.destroy(),tr&&(clearTimeout(er),er=0,tr=!1)}},lr=(c()(vr,[{key:"setData",value:function(e,t){if(!this.u8a){pt.d.videoDataSize+=this.size,this.u8a=null;for(var i=0;null===this.u8a;)try{i++,this.u8a=new Uint8Array(this.size)}catch(e){if(i>pt.i)return Dt.a.error("setData Uint8Array tryCatchError"),!1}}return this.u8a.set(e,t-this.base),!0}},{key:"getData",value:function(e,t){return this.u8a?this.u8a.subarray(e-this.base,e-this.base+t):null}},{key:"clear",value:function(){this.u8a&&(pt.d.videoDataSize-=this.size,delete this.u8a)}},{key:"memory",get:function(){return this.u8a?this.size:0}}]),vr),hr=0,fr=pt.d.chunkSize,pr=pt.d.subPieceSize,_r=(c()(yr,[{key:"readBytes",value:function(e,t){if(ar=(rr=e)+t-1,rr>=this.readSize||t<=0||ar>=this.readSize)throw Dt.a.warn("readBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+rr+" _eRGPos : "+ar+" dataLen: "+t),"readBytes param Error!";or=Math.floor(rr/fr),sr=Math.floor(ar/fr);for(var i=0,n=null,r=0;null===n;)try{r++,n=new Uint8Array(t)}catch(e){if(r>pt.i)return Dt.a.error("readBytes Uint8Array tryCatchError"),++hr>pt.i&&(qt.errorStage="memoryAllocErr",qt.errorFragment=this),null}for(;or<=sr;){rr>=(cr=or*fr)&&(cr=rr),(dr=or*fr+fr-1)>=ar&&(dr=ar);var a=this.dataArr[or].getData(cr,dr-cr+1);a&&n.set(a,i),i+=dr-cr+1,or++}return this.readLastIndex=Math.floor((e+t)/fr),n}},{key:"writeBytes",value:function(e,t,i){if(ar=(rr=t)+i-1,rr>=this.readSize||i<=0||ar>this.readSize||!e)throw Dt.a.warn("writeBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+rr+" _eRGPos : "+ar+" dataLen: "+i),"writeBytes param Error!";or=Math.floor(rr/fr),sr=Math.floor(ar/fr);for(var n=0;or<=sr;){if(rr>=(cr=or*fr)&&(cr=rr),(dr=or*fr+fr-1)>=ar&&(dr=ar),!this.dataArr[or].setData(e.subarray(n,n+(dr-cr+1)),cr)){++hr>pt.i&&(qt.errorStage="memoryAllocErr",qt.errorFragment=this);break}n+=dr-cr+1,or++}return n}},{key:"clear",value:function(){for(var e=0;e<this.chunkNum;)this.dataArr[e]&&this.dataArr[e].clear(),e++;delete this.dataArr}},{key:"remove",value:function(){for(var e=0;e<this.readLastIndex;)this.dataArr[e]&&this.dataArr[e].clear(),e++}},{key:"memory",get:function(){if(!this.dataArr)return 0;for(var e=0,t=0;e<this.chunkNum;)this.dataArr[e]&&(t+=this.dataArr[e].memory),e++;return t}},{key:"resetReadLastIndex",value:function(){this.readLastIndex=0}}]),yr),gr=new Wt;function yr(e){f()(this,yr),this.readSize=Math.ceil(e/pr)*pr,this.chunkNum=Math.ceil(this.readSize/fr),this.dataArr=[];for(var t=this.readLastIndex=0;t<this.chunkNum;)this.dataArr.push(new lr(fr,t,t*fr)),t++}function vr(e,t,i){f()(this,vr),this.index=t,this.base=i,this.size=e,this.u8a=null}var mr=function(e,t){gr.has(e)||gr.set(e,new _r(t))},br=function(e){return gr.get(e)},kr=function(e){gr.has(e)&&(gr.get(e).clear(),gr.remove(e))},xr=function(e){gr.has(e)&&gr.get(e).remove()},Sr=(c()(Cr,[{key:"key",get:function(){return this.alias.toString()+"_"+this.subPieceID.toString()}},{key:"timeOut",get:function(){return this.beginTime+this.rto}}]),Cr),Tr=262144,Pr=pt.d.subPieceSize,Ir=[31,67,182,117],wr=[105,115,111,109],Ar=(c()(Mr,[{key:"tsLoadDone",get:function(){return this._tsLoadDone},set:function(e){this._tsLoadDone=e}},{key:"dataLen",get:function(){return this._dataLen},set:function(e){this._dataLen=e}},{key:"state",get:function(){return this.status},set:function(e){this.status=e}},{key:"setPosList",value:function(e){this.seekable=e}},{key:"setRange",value:function(e,t){var i=Math.floor(this.bsID/256);this.bitmap.getBit(i)&&!this.subBitmap.checkRange(256*i,256*(i+1))&&this.bitmap.setBit(i,!1);i=Math.ceil(this.esID/256);this.bitmap.getBit(i)&&!this.subBitmap.checkRange(256*i,256*(i+1))&&this.bitmap.setBit(i,!1),this.ePos=t,this.bsID=Math.floor(e/Pr),this.esID=Math.ceil(t/Pr),this.checkGpSID(this.bsID),this.checkCEPos(this.bsID),Dt.a.info("segment.setRange , index = "+this.index+",range "+e+"-"+t+" ,cePos "+this.cePos),this.refreshFun&&this.refreshFun.call(null);t=br(this.alias);t&&t.resetReadLastIndex()}},{key:"addData",value:function(e,t,i){var n=br(this.alias);if(n){i=n.writeBytes(t,e,i);for(var r=Math.ceil(e/Pr),a=e+i>=this.size?this.subPcNum:Math.floor((e+i)/Pr);r<a;)this.subBitmap.setBit(r,!0),this.runSubBitmap.setBit(r,!0),r++;this._dataLen+=i;var o=this;_t.a.pcwBuffer<2||0===e&&8192===i?this.checkData():0===this._checkDataStep&&(this._checkDataStep=setTimeout(function(){o&&o.checkData.call(o)},500))}else Dt.a.warn("segment is null when addData ,index "+this.index+", rate "+this.rate)}},{key:"checkData",value:function(){clearTimeout(this._checkDataStep),this._checkDataStep=0,this.checkGpSID(this.gpSID);for(var e=Math.floor(this.bsID/256),t=Math.ceil(this.size/Tr);e<t;){var i=256*e,n=256*(e+1);this.bsID>=i&&this.bsID<=n&&(i=this.bsID),this.esID>=i&&this.esID<=n&&(n=this.esID),this.subBitmap.checkRange(i,n)&&this.bitmap.setBit(e,!0),e++}var r=this.ceSID;this.checkCEPos(this.ceSID),this.refreshFun&&this.refreshFun(),r<this.ceSID&&_t.a.noticeDataArrived&&_t.a.noticeDataArrived()}},{key:"getData",value:function(e,t){return br(this.alias).readBytes(e,t)}},{key:"hasData",value:function(e,t){for(var i=Math.floor(e/Pr),n=Math.ceil(Math.min(e+t,this.size)/Pr);i<n;){if(!this.subBitmap.getBit(i))return!1;i++}return!0}},{key:"checkCEPos",value:function(e){for(var t=void 0!==e?e:this.ceSID;t<this.subPcNum&&this.subBitmap.getBit(t);)t++;this.ceSID=Math.min(t,this.subPcNum)}},{key:"deleteRange",value:function(e,t,i){for(var t=Math.min(e+t,this.size),n=Math.floor(e/Pr),r=Math.ceil(t/Pr);n<r;)this.subBitmap.setBit(n,!1),this.runSubBitmap.setBit(n,!1),n++;for(var a=Math.floor(e/Tr),o=Math.ceil(t/Tr);a<o;)this.bitmap.setBit(a,!1),a++;i||(this.checkGpSID(this.bsID),this.checkCEPos(this.bsID))}},{key:"checkTask",value:function(e,t){for(var i=Math.floor(e/Pr),n=Math.min(this.subPcNum,Math.ceil(t/Pr)),r=[],a=0,o=-1,s=-1;i<n;)this.subBitmap.getBit(i)?(-1!==o&&a++,32<=a&&(r.push({begin:o*Pr,end:Math.min((s+1)*Pr,this.size)}),s=o=-1,a=0)):(-1===o&&(o=i),s=i,this.runSubBitmap.setBit(i,!(a=0))),i++;return-1!==o&&r.push({begin:o*Pr,end:Math.min((s+1)*Pr,this.size)}),this.checkGpSID(this.gpSID),r}},{key:"recycleCDNTask",value:function(e){for(var t,i,n,r=0;r<e.length;r++)for(t=e[r],i=Math.floor(t.begin/Pr),n=Math.min(this.subPcNum,Math.ceil(t.end/Pr));i<n;)this.subBitmap.getBit(i)||this.runSubBitmap.setBit(i,!1),i++;this.checkGpSID(this.bsID),this.checkCEPos(this.bsID)}},{key:"recycleP2PTask",value:function(e){!this.subBitmap.getBit(e.subPieceID)&&this.runSubBitmap.getBit(e.subPieceID)&&(this.runSubBitmap.setBit(e.subPieceID,!1),e.subPieceID<this.gpSID&&this.checkGpSID(e.subPieceID))}},{key:"checkGpSID",value:function(e){for(this.gpSID=e;this.gpSID<this.subPcNum&&!(!this.runSubBitmap.getBit(this.gpSID)&&!this.subBitmap.getBit(this.gpSID)&&this.gpSID>=this.bsID&&this.gpSID<=this.esID);)this.gpSID++}},{key:"addSubPiece",value:function(e,t){if(this.fileType===Nt.a.TS){var i=0,n=e*Pr;for(0!==e&&(i=188-n%188);i<t.byteLength&&n+i<this.ePos;){if(71!==t[i])return this.dataErrCount++,void Dt.a.error("Segment reveive p2p load data err ,pos "+(n+i)+" ,dataErrCount "+this.dataErrCount);i+=188}}else if(this.fileType===Nt.a.DASH){var r=e*Pr,a=r+t.byteLength,o=gt.a.searchPosIndex(r,this.seekable);if((o=0<=o?o+1:0)<this.seekable.length-1&&this.seekable[o]>=r&&this.seekable[o]+4<=a)for(var s=this.seekable[o]-r,c=0;c<Ir.length;){if(t[s+c]!==Ir[c])return this.dataErrCount++,void Dt.a.error("Segment reveive p2p load webm data err ,pos "+s+" ,dataErrCount "+this.dataErrCount);c++}}else if(0<=this.fileType.indexOf(Nt.a.M4S)){a=e*Pr,o=a+t.byteLength,r=gt.a.searchPosIndex(a,this.seekable);if((r=0<=r?r+1:0)<this.seekable.length-1&&this.seekable[r]>=a&&this.seekable[r]+12<=o)for(var d=this.seekable[r]-a+8,u=0;u<wr.length;){if(t[d+u]!==wr[u])return this.dataErrCount++,void Dt.a.error("Segment reveive p2p load webm data err ,pos "+d+" ,dataErrCount "+this.dataErrCount);u++}}if(this._TMPRcvCnt++,Pr===t.byteLength&&-1===this._TMPKeyList.indexOf(e)){for(var l,h=!1,f=0;f<this._TMPKeyList.length;f++)if(this._TMPKeyList[f]*Pr+this._TMPDataList[f].byteLength===e*Pr){var h=!0,p=new Uint8Array(this._TMPDataList[f].byteLength+t.byteLength);p.set(this._TMPDataList[f],0),p.set(t,this._TMPDataList[f].byteLength),this._TMPDataList[f]=p;break}h||(this._TMPKeyList.push(e),this._TMPDataList.push(t)),50<=this._TMPRcvCnt?this.mergeData():0===this._p2pCheckDataStep&&((l=this)._p2pCheckDataStep=setTimeout(function(){l&&l.mergeData.call(l)},100)),Qi.p2pSize=Pr+Qi.p2pSize,this.peerMgr&&(this.peerMgr.p2pSize=Pr+this.peerMgr.p2pSize)}}},{key:"mergeData",value:function(){for(clearTimeout(this._p2pCheckDataStep),this._p2pCheckDataStep=0;0<this._TMPKeyList.length;){var e=this._TMPDataList.shift();this.addData(this._TMPKeyList.shift()*Pr,e,e.byteLength)}this._TMPRcvCnt=0}},{key:"pieceNeed",value:function(e){return e>=this.bID&&e<=this.eID&&!this.bitmap.getBit(e)}},{key:"subPieceNeed",value:function(e){return e>=this.bsID&&e<=this.esID&&!this.subBitmap.getBit(e)}},{key:"getTasks",value:function(e,t,i,n){if(e&&e.alias===this.alias&&!(this.gpSID>=this.esID)){for(var r=e,a=Math.max(this.gpID,r.gpID),o=Math.min(Math.ceil(this.esID/256),a+16),s=this.gpSID;a<o&&t.length<i;){if(r.getBit(a)&&this.pieceNeed(a)){var c,s=256*a,d=Math.min(256*(a+1),this.subPcNum);for(this.gpSID>s&&this.gpSID<d&&(s=this.gpSID);s<d&&t.length<i;)this.subPieceNeed(s)&&((c=new Sr(this.alias,s)).rto=n,t.push(c),this.runSubBitmap.setBit(s,!0)),s++}a++}0<t.length&&this.checkGpSID(this.gpSID)}}},{key:"clearTask",value:function(){this.peerMgr&&this.peerMgr.clearTask()}},{key:"checkP2PHealth",value:function(){return this.peerMgr?this.peerMgr.checkP2PHealth(this.alias):0}},{key:"requestTask",value:function(e){return this.subBitmap.getBit(e)?(this.shareDataNum++,Qi.upSize=Qi.upSize+Pr,this.peerMgr&&(this.peerMgr.upSize=Pr+this.peerMgr.upSize),this.getData(e*Pr,Pr)):null}},{key:"checkDefinition",value:function(e){if(this.vidsDesc=" [ ",this.vids&&0<this.vids.length&&0<e.length)for(var t=0;t<this.vids.length;t++){for(var i=0;i<e.length;i++)if(this.vids[t].vid===e[i].vid){this.vids[t].count=e[i].count;break}this.vidsDesc+=this.vids[t].bid+":"+(void 0===this.vids[t].count?0:this.vids[t].count)+(t<this.vids.length-1?" , ":"")}this.vidsDesc+=" ]"}},{key:"peerMgr",get:function(){return ur.getProxyByID(this.p2pID)}},{key:"cePos",get:function(){return Math.min(this.ceSID*Pr,this.size)}},{key:"done",get:function(){return 0<this.ceSID&&this.ceSID>=this.esID}},{key:"gpID",get:function(){return Math.floor(this.gpSID/256)}},{key:"eID",get:function(){return Math.ceil(this.esID/256)}},{key:"bID",get:function(){return Math.floor(this.bsID/256)}},{key:"approachEnd",get:function(){return this.cePos>=this.size-5242880}},{key:"memory",get:function(){return br(this.alias).memory}},{key:"dataUrl",get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}},{key:"toDataString",value:function(e,t,i){for(var n="",r=Math.floor((-1!==e?e:t)/Tr),a=0,o=Math.floor(t/Tr),s=Math.floor(i/Tr),c=Math.ceil(this.size/Tr),d=this.gpID,u=Math.floor(this.ceSID/256),l="";a<c;)this.bitmap.getBit(a)?(l="*",u===a&&d===a?l="(EG)":u===a?l="E":d===a&&(l="G")):(l="_",u===a&&d===a?l="(eg)":u===a?l="e":d===a&&(l="g")),void 0!==r&&r===a&&(l="R"),o===a&&(l=""+l),s===a&&(l+=""),n+=l,++a%128==0&&(n+="\r");return n+""}},{key:"destroy",value:function(){Dt.a.info("Segment be destroy : "+this.index+" bidRdate :"+this.rate+" tvid : "+this.tvid),this.bitmap.clear(),this.subBitmap.clear(),this.runSubBitmap.clear(),kr(this.alias)}},{key:"destroyChunk",value:function(e){var t=br(e);!t||0<(t=t.readLastIndex*pt.d.chunkSize)&&(Dt.a.info("Segment ready to clear data ,pos "+t+" , segment "+this.index),this.deleteRange(0,t,!0),xr(e))}}]),Mr),Er=d(91),Dr=d(95),qr=d(79),Or=(c()(Lr,[{key:"destroy",value:function(){this.loader&&(this.loader.abort(),delete this.loader,this.loader=null)}}]),Lr),Rr=d(330);function Lr(e,t,i){f()(this,Lr);this.sourceID=t,this.type=i,this.loader=new XMLHttpRequest,this.loader.responseType="json";var n=this;n.loader.onreadystatechange=function(){var e,t;n.loader.readyState,0===n.loader.readyState||1===n.loader.readyState||2===n.loader.readyState||3===n.loader.readyState||(200===n.loader.status?n.loader.response?n.loader.response.hasOwnProperty("uri")?(t=JSON.parse(JSON.stringify(n.loader.response)),gt.a.getFileNameFromUrl(t.uri)===n.sourceID&&(n.destroy(),qr.a.getEvent().emit(Dr.a.DisLoadStatus+n.type,"done",t))):r("responseHas`tProperty-l"):r("responseIsNull"):(e="",!n.loader.response&&405!==n.loader.status||(t=0,n.loader.response&&(e=JSON.stringify(n.loader.response),Dt.a.error("Dispatch failure,message "+e),t=n.loader.response.code),0<=t.indexOf("D20")&&405===n.loader.status&&(_t.a.authorStatus=Er.a.LoaderState_405)),r("statusErr-"+n.loader.status)))};try{n.loader.open("GET",e,!0),n.loader.withCredentials=!1,Dt.a.info("DispatchByXhr url "+e),n.loader.send()}catch(e){r("tryCatchError")}function r(e){n.loader&&(n.destroy(),qr.a.getEvent().emit(Dr.a.DisLoadStatus+n.type,"error",e))}}function Mr(e,t,i,n,r,a,o,s,c,d,u,l){f()(this,Mr),this.tvid=t,this.sourceID=i,this.vid=o,this.p2pID=s,this.alias=a,this.peerCnt=-1,this.vids=d,this.size=e,this.index=r,this.refreshFun=null,this._dataLen=0,this.shareDataNum=0,this.status=0,this.ceSID=0,this.gpSID=0,this.pieceNum=Math.ceil(this.size/Tr),this.subPcNum=Math.ceil(this.size/Pr),this.bitmap=new Ln(this.pieceNum,this.alias),this.subBitmap=new Ln(this.subPcNum,this.alias),this.runSubBitmap=new Ln(this.subPcNum,this.alias),this.bsID=-1,this.esID=this.subPcNum,this.fragmentName="",this.fileType=u,this.seekable=l,this.rate=c,this._checkDataStep=0,this._p2pCheckDataStep=0,this._TMPKeyList=[],this._TMPDataList=[],this._TMPRcvCnt=0,this._tsLoadDone=!1,this.dataErrCount=0,this.endPos=0,mr(this.alias,this.size)}function Cr(e,t){f()(this,Cr),this.rto=3e3,this.alias=e,this.subPieceID=t,this.beginTime=Date.now()}function Nr(e,t,i){e===pt.f.CDN?pt.h.set(t,{cdn:i,dcache:Br(pt.f.DCACHE,t)}):pt.h.set(t,{cdn:Br(pt.f.CDN,t),dcache:i})}function Br(e,t){t=pt.h&&pt.h.get(t);return t?e===pt.f.CDN?t.cdn||null:t.dcache||null:null}var Fr={setDataurl:Nr,getDataurl:Br,clearDataurl:function(e,t){if(!pt.h||!pt.h.get(t))return null;Nr(e,t,null)}},Ur=(c()($r,[{key:"load",value:function(e){var t=this;Dt.a.info("DispatchByFetch url "+e),fetch(e,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then(function(e){400<=e.status||e.status<200?t.running&&t.onError("statusErr-"+e.status):t.running&&e.json().then(function(e){gt.a.getFileNameFromUrl(e.uri)===t.sourceID&&(t.running=!1,qr.a.getEvent().emit(Dr.a.DisLoadStatus+t.type,"done",e))})}).catch(function(e){t.onError(e.message)})}},{key:"onError",value:function(e){"statusErr-405"===e&&(_t.a.authorStatus=Er.a.LoaderState_405,Dt.a.error("Dispatch failure,message "+e)),this.running&&(this.running=!1,qr.a.getEvent().emit(Dr.a.DisLoadStatus+this.type,"error",e))}},{key:"destroy",value:function(){this.running=!1}}]),$r),jr=(c()(Kr,[{key:"sendRequest",value:function(){try{this.loader.open("GET",this.url,!0),Dt.a.info("dcache Dispatch url "+this.url),this.loader.withCredentials=!1,this.loader.send()}catch(e){this.onError("tryCatchError")}}},{key:"onError",value:function(e){this.destroy(),qr.a.getEvent().emit(Dr.a.DisLoadStatus+this.type,"error",e)}},{key:"destroy",value:function(){this.loader&&(this.loader.abort(),delete this.loader,this.loader=null)}}]),Kr),Vr=null,Wr=null,Hr=(c()(Qr,[{key:"start",value:function(e,t){if(this.segment=e,this.segment.loadType===pt.f.DCACHE)qr.a.getEvent().off(Dr.a.DisLoadStatus+this.segment.type),qr.a.getEvent().once(Dr.a.DisLoadStatus+this.segment.type,this.dcacheDisLoadStatus.bind(this)),this.disDcacheDisLoader=new jr(this.segment.dispatchUrl,this.segment.sourceID,this.segment.type);else try{var i,n,r=this.segment.dispatchUrl;-1===r.indexOf("?")?r+="?pv=0.1":r+="&pv=0.1",r+="&cross-domain=1",r+="&mss=1",r+="&stauto="+_t.a.absStatus,0<t&&this.segment.errIDCList.length<3&&0<this.segment.errIDCList.length&&(r+="&retry="+this.segment.errIDCList.length.toString(),r+="&z="+this.segment.errIDCList.toLocaleString().replace(/,/g,"|")),this.segment.dispatchOnError&&(this.segment.dispatchOnError%3==1?(i=gt.a.parseURL(r),r=vt.isHTTPS?r.replace(i[2]+i[4],_t.a.bgpIP+Di()(i[2])+Rr.Base64.encode(i[4]))+"&ssl=1":r.replace(i[2]+i[4],_t.a.bgpIP+Di()(i[2])+Rr.Base64.encode(i[4]))):this.segment.dispatchOnError%3==2&&""!==_t.a.bgpIP2&&(n=gt.a.parseURL(r),r=vt.isHTTPS?r.replace(n[2]+n[4],_t.a.bgpIP2+Di()(n[2])+Rr.Base64.encode(n[4]))+"&ssl=1":r.replace(n[2]+n[4],_t.a.bgpIP2+Di()(n[2])+Rr.Base64.encode(n[4])))),Vr=Date.now(),Qi.addPBItem(qi.dispatch_Cnt),qr.a.getEvent().off(Dr.a.DisLoadStatus+this.segment.type),qr.a.getEvent().once(Dr.a.DisLoadStatus+this.segment.type,this.disLoadStatus.bind(this)),!vt.supportFetch||this.segment.dispatchOnError&&this.segment.dispatchOnError%1!=0?this.loader=new Or(r,this.segment.sourceID,this.segment.type):this.loader=new Ur(r,this.segment.sourceID,this.segment.type)}catch(e){this.disError("tryCatchError")}}},{key:"disLoadStatus",value:function(e,t){"done"===e?this.disDone(t):this.disError(t)}},{key:"dcacheDisLoadStatus",value:function(e,t){this.destroyDcacheDisLoader(),"done"===e?(Fr.setDataurl(pt.f.DCACHE,this.segment.sourceID,t.d),qr.a.getEvent().emit(Dr.a.DisPatchStatus+this.segment.type)):this.disError(t)}},{key:"disDone",value:function(e){Qi.addPBItem(qi.dispatch_doneCount),Qi.addPBItem(qi.dispatch_duration,Date.now()-Vr),Dt.a.info("Dispatch [NORMAL / VIP DONE] data : "+JSON.stringify(e)+", isHttps : "+vt.isHTTPS+", sourceID : "+this.segment.sourceID),gt.a.setCookie("QP0022",e.re+"|"+e.d[0].z);var t=e.d[0].URL;if(vt.isHTTPS&&t.indexOf("https:")<0)return Dt.a.error("Dispatch match check err,https Dispatch return http"),void this.disError("notIsHttps");Wr&&Wr===this.segment.tvid||(Fr.clearDataurl(pt.f.CDN,this.segment.sourceID),Wr=this.segment.tvid);var i=e.re.split("|"),t=i[1].split("-")[0];gt.a.isOpenDcache(i[0],t)?_t.a.openDache=!0:_t.a.openDache=!1,gt.a.getFileNameFromUrl(e.uri)===this.segment.sourceID&&(Fr.setDataurl(pt.f.CDN,this.segment.sourceID,e.d),Et.checkConfig(),vt.canP2P&&"off"!==pt.j.limitP2P&&!0===pt.j.onP2P&&!this.segment.onTracker&&(e=gt.a.getUserInfoFromCookie(),""!==(e=gt.a.getTrackerIP(e.userNetType,pt.j.tracker,this.segment.p2pID))&&(Dt.a.info("AND tracker Dispatch [DONE] IP : "+e),this.segment.setTrackerIP(e))),this.clearIn(),qr.a.getEvent().emit(Dr.a.DisPatchStatus+this.segment.type))}},{key:"disError",value:function(e){this.clearIn(),qr.a.getEvent().emit(Dr.a.DisPatchStatus+this.segment.type,e)}},{key:"clearIn",value:function(e){this.loader&&(this.loader.destroy(),this.loader=null),e&&qr.a.getEvent().off(Dr.a.DisLoadStatus+this.segment.type)}},{key:"clear",value:function(){this.clearIn(!0),qr.a.getEvent().off(Dr.a.DacheDisLoadStatus+this.segment.type),this.destroyDcacheDisLoader()}},{key:"destroyDcacheDisLoader",value:function(){this.disDcacheDisLoader&&(this.disDcacheDisLoader.destroy(),this.disDcacheDisLoader=null)}}]),Qr),zr=(c()(Gr,[{key:"load",value:function(e,t){this.AllTask=e;var i,n=0;for(this.cache=null,this.loadType=t;null===this.cache;)try{n++,this.cache=new Uint8Array(1048576)}catch(e){if(n>pt.i)return Dt.a.error("FetchLoader catch Uint8Array err : "+e.message),void this.onError("tryCatchError")}this.AllTask&&this.AllTask.url?(this.running=!0,this.reader=null,this.readPos=0,this.dataPos=0,this.base=0,this.dataLen=0,this.readLength=0,-1!==(t=this.AllTask.url).indexOf("start")&&-1!==t.indexOf("end")||(-1===t.indexOf("?")?-1!==this.AllTask.end&&(t+="?start="+this.AllTask.begin+"&end="+this.AllTask.end):-1!==this.AllTask.end&&(t+="&start="+this.AllTask.begin+"&end="+this.AllTask.end),Dt.a.debug("load start: "+this.AllTask.begin+" end: "+this.AllTask.end)),-1===t.indexOf("stauto")&&(t+="&stauto="+_t.a.absStatus),-1===t.indexOf("ori")&&(t+="&ori=pcw"+_t.a.platform),-1===t.indexOf("num")&&(t+="&num="+Date.now().toString()),Dt.a.info("[Fetch start load url] "+t),i=this,fetch(t,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then(function(e){if(400<=e.status||e.status<200)i.running&&i.onError("statusErr-"+e.status);else if(i.reader=e.body.getReader(),i.running)i.pump();else if(i.reader)try{i.reader.cancel(),i.reader=null}catch(e){}}).catch(function(e){if(i.running)"Failed to fetch"===e.message?i.onError("accessErr"):(Dt.a.warn("fetch failed ,err message "+e.message),i.onError("tryCatchError"));else if(i.reader)try{i.reader.cancel(),i.reader=null}catch(e){}})):this.onError("taskError")}},{key:"pump",value:function(){var a=this;return a.reader.read().then(function(e){if(a.running){var t=e.value;if(t){a.dataLen+=t.byteLength;try{if(a.dataPos+t.byteLength>a.cache.byteLength){for(var i=null,n=0;null===i;)try{n++,i=new Uint8Array(a.dataPos+t.byteLength)}catch(e){if(n>pt.i)return Dt.a.error("FetchLoader catch newUint8Array err : "+e.message),void a.onError("tryCatchError")}var r=a.cache.subarray(a.readPos);i.set(r,0),delete a.cache,a.dataPos=a.dataPos-a.readPos,a.base+=a.readPos,a.readPos=0,a.cache=i}a.cache.set(t,a.dataPos),a.dataPos+=t.byteLength}catch(e){return Dt.a.error("FetchLoader catch err : "+e.message),void a.onError("dataError")}}if(8192<=a.dataPos-a.readPos){r=8192*Math.floor((a.dataPos-a.readPos)/8192);if(a.AllTask.data=a.cache.subarray(a.readPos,a.readPos+r),a.AllTask.range={begin:a.AllTask.begin+a.base+a.readPos,end:a.AllTask.begin+a.base+a.readPos+r},a.videoType!==Nt.a.FTS&&a.AllTask.range.end>a.AllTask.end)return Dt.a.error("data range err , need range "+a.AllTask.begin+"-"+a.AllTask.end+" currentEnd: "+a.AllTask.range.end+" base: "+a.base),void a.onError(Er.a.LoaderState_dataRangeError);a.readLength+=r,qr.a.getEvent().emit(Dr.a.LoadStatus+a.eventID,"progress"),a.readPos+=r}if(a.running){if(-1===a.AllTask.end&&-1!==a.AllTask.segment.size&&(a.AllTask.end=a.AllTask.segment.size),e.done||-1!==a.AllTask.end&&a.AllTask.begin+a.base+a.dataPos>=a.AllTask.end){if(a.readPos<a.dataPos){if(a.AllTask.data=a.cache.subarray(a.readPos,a.dataPos),a.AllTask.range={begin:a.AllTask.begin+a.base+a.readPos,end:a.AllTask.begin+a.base+a.dataPos},"fts"!==a.videoType&&a.AllTask&&a.AllTask.range.end>a.AllTask.end)return Dt.a.error("~~ data range err , need range "+a.AllTask.begin+"-"+a.AllTask.end+" currentEnd: "+a.AllTask.range.end+" base: "+a.base+",needLen "+(a.AllTask.end-a.AllTask.begin)+",receiveLen "+a.dataLen),void a.onError("dataError");a.readLength+=a.dataPos-a.readPos,qr.a.getEvent().emit(Dr.a.LoadStatus+a.eventID,"progress"),a.readPos=a.dataPos}if(a.dataLen!==a.readLength)Dt.a.error("~~chunkLen: "+a.dataLen+" readLen: "+a.readLength);else if(a.AllTask&&a.dataLen!==a.AllTask.end-a.AllTask.begin)return Dt.a.error("need dataLen is not match receive dataLen,needLen "+(a.AllTask.end-a.AllTask.begin)+",receiveLen "+a.dataLen),void a.onError(Er.a.LoaderState_dataRangeError);return a.close(),void qr.a.getEvent().emit(Dr.a.LoadStatus+a.eventID,"done")}return a.pump()}}else if(a.reader)try{a.reader.cancel(),a.reader=null}catch(e){}})}},{key:"onError",value:function(e){if(this.running){if(this.running=!1,this.AllTask=null,this.reader)try{this.reader.cancel(),this.reader=null}catch(e){}"accessErr"===e||"statusErr-405"===e||"dataError"===e||e===Er.a.LoaderState_dataRangeError||"isPointNot80|443"===e?qr.a.getEvent().emit(Dr.a.LoadStatus+this.eventID,"error",e):qr.a.getEvent().emit(Dr.a.LoadStatus+this.eventID,"error","netError")}}},{key:"close",value:function(){if(this.running&&(this.running=!1,this.AllTask=null,this.reader))try{this.reader.cancel(),this.reader=null}catch(e){}this.cache&&delete this.cache}}],[{key:"type",get:function(){return"fetch"}}]),Gr),Yr=d(416);function Gr(e,t){f()(this,Gr),this.type=Gr.type,this.videoType=e,this.eventID=t}function Qr(){f()(this,Qr)}function Kr(e,t,i){f()(this,Kr);var n=e.split("/",3)[2];this.url=e.replace(n,pt.c),this.url.indexOf("https")&&(this.url=this.url.replace(/^http:/gi,"https:")),this.sourceID=t,this.type=i,this.loader=new XMLHttpRequest,this.loader.responseType="json";var r=this;this.loader.onload=function(){var e;200===r.loader.status?r.loader.response?r.loader.response.hasOwnProperty("uri")?(e=JSON.parse(JSON.stringify(r.loader.response)),gt.a.getFileNameFromUrl(e.uri)===r.sourceID&&(r.destroy(),qr.a.getEvent().emit(Dr.a.DisLoadStatus+r.type,"done",e))):r.onError("responseHas`tProperty-l"):r.onError("responseIsNull"):r.onError("statusErr-"+r.loader.status)},this.loader.onerror=function(){r.onError("statusErr-"+r.loader.status)},this.sendRequest()}function $r(e,t,i){f()(this,$r),this.running=!0,this.sourceID=t,this.type=i,this.load(e)}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Xr=new Map,Jr=setTimeout(ea,12e4);function ea(e){clearTimeout(Jr);var t,i=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Zr(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Zr(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(Xr);try{for(i.s();!(t=i.n()).done;){var n=Ht()(t.value,2),r=n[0],a=n[1],o=r.split("|"),s={dmnm:o[0],idc:o[1],type:3,total:a.total,failcnt:a.failcnt};_t.a.sendPingBack({type:"DNSParser",para:s}),Xr.delete(r)}}catch(e){i.e(e)}finally{i.f()}e||(Jr=setTimeout(ea,12e4))}var ta=(c()(oa,[{key:"load",value:function(e,t,i,n,r){this.segment&&this.close(!1),this.segment=e,this.retryCnt=i,this.urlIndex=n,this.CDNStateChangeEventID=r,this.tskList=t,this.tsk=null,this.url="",Fr.getDataurl(this.segment.loadType,this.segment.sourceID)&&0!==ya(this.segment.loadType,this.segment.sourceID)?(this._loadStage="CDN",this.createLoader(),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_ready),this.checkConTracker(),this.checkTask()):(this._loadStage="dispatch",this.startDisPatch())}},{key:"createLoader",value:function(){"mozilla"===vt.browser.name||"firefox"===vt.browser.name&&vt.browser.version.major<65||"chrome"===vt.browser.name&&vt.browser.version.major<43||"msedge"===vt.browser.name&&vt.browser.version.major<14||"safari"===vt.browser.name&&(vt.browser.version.major<10||10===vt.browser.version.major&&vt.browser.version.minor<1)||this.retryCnt%2==1?this.loader=new Yr.a(this.segment.fileType,this.CDNStateChangeEventID):this.loader=new zr(this.segment.fileType,this.CDNStateChangeEventID)}},{key:"checkConTracker",value:function(){var e;vt.canP2P&&"off"!==pt.j.limitP2P&&!0===pt.j.onP2P&&!this.segment.onTracker&&(Et.checkConfig(),e=gt.a.getUserInfoFromCookie(),""!==(e=gt.a.getTrackerIP(e.userNetType,pt.j.tracker,this.segment.p2pID))&&(Dt.a.info("AND tracker Dispatch [DONE] IP : "+e),this.segment.setTrackerIP(e)))}},{key:"disPatchDone",value:function(){this.segment&&(this.createLoader(),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_ready),this._loadStage="CDN",this.checkConTracker(),this.checkTask())}},{key:"disPatchErr",value:function(e){this.segment&&(this.close(!0),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_error,Er.a.LoaderState_error_dispatch,e,""))}},{key:"startDisPatch",value:function(){this.dispatcher||(this.dispatcher=new Hr),qr.a.getEvent().once(Dr.a.DisPatchStatus+this.segment.type,this.disPatchStatus.bind(this)),this.dispatcher.start(this.segment,this.retryCnt)}},{key:"disPatchStatus",value:function(e){e?this.disPatchErr(e):this.disPatchDone()}},{key:"checkTask",value:function(){var e,t;if(this.segment&&this.tskList)if(this.curLoadTskIndex>this.tskList.length-1&&!this.tsk)this._loadStage="",this.close(!1),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_done);else if(Fr.getDataurl(this.segment.loadType,this.segment.sourceID)){var i,n="",r=null,n=Fr.getDataurl(this.segment.loadType,this.segment.sourceID)?0<=this.urlIndex?(r=Fr.getDataurl(this.segment.loadType,this.segment.sourceID)[this.urlIndex]).URL:(0===(i=ga(this.segment.loadType,this.segment.sourceID)).length&&(Dt.a.info("select no vaild urlIndex,default index 0 "),i.push(0)),(r=Fr.getDataurl(this.segment.loadType,this.segment.sourceID)[i[0]]).URL):this.segment.dataUrl;r&&(this.segment.idc=this.idc=r.z),vt.isHTTPS&&(n=n.replace(/^http:/gi,"https:")),0<=this.segment.fileType.indexOf(Nt.a.TS)||this.segment.fileType===Nt.a.DASH?(o=null,o=this.segment.fileType===Nt.a.TS||this.segment.fileType===Nt.a.DASH?{startPos:this.tskList[this.curLoadTskIndex].begin,endPos:this.tskList[this.curLoadTskIndex].end,contentlength:this.tskList[this.curLoadTskIndex].end-this.tskList[this.curLoadTskIndex].begin}:this.segment.loadInfo,this.segment.dataUrl=(this.segment.fileType,a=o,(o=n)?(0<o.indexOf("&start=")?o=(o=o.replace(/\&start=[0-9.]+&/g,"&start="+a.startPos+"&")).replace(/\&start=[0-9.]+$/g,"&start="+a.startPos):0<o.indexOf("?start=")&&(o=(o=o.replace(/\?start=[0-9.]+&/g,"?start="+a.startPos+"&")).replace(/\?start=[0-9.]+$/g,"?start="+a.startPos)),0<o.indexOf("&end=")?o=(o=o.replace(/\&end=[0-9.]+&/g,"&end="+a.endPos+"&")).replace(/\&end=[0-9.]+$/g,"&end="+a.endPos):0<o.indexOf("?end=")&&(o=(o=o.replace(/\?end=[0-9.]+&/g,"?end="+a.endPos+"&")).replace(/\?end=[0-9.]+$/g,"?end="+a.endPos)),0<o.indexOf("&contentlength=")?o=(o=o.replace(/\&contentlength=[0-9.]+&/g,"&contentlength="+a.contentlength+"&")).replace(/\&contentlength=[0-9.]+$/g,"&contentlength="+a.contentlength):0<o.indexOf("?contentlength=")&&(o=(o=o.replace(/\?contentlength=[0-9.]+&/g,"?contentlength="+a.contentlength+"&")).replace(/\?contentlength=[0-9.]+$/g,"?contentlength="+a.contentlength)),o):"")):0<=this.segment.fileType.indexOf(Nt.a.M4S)&&(this.segment.dataUrl=n),this.url=this.segment.dataUrl,this.tsk=this.tskList[this.curLoadTskIndex++];var a=gt.a.getPureIP(this.url);this.segment.ip=this.domain=_t.a.cdnLoadDoMain=a;var o=this.url.indexOf(a),n=this.segment.fileType;0<=this.segment.fileType.indexOf(Nt.a.TS)&&(n=Nt.a.TS);n=this.url.indexOf("."+n);this.tsk.path=this.url.slice(o+a.length,n+4),this.tsk.url=this.url,this.tsk.rate=this.segment.rate,this.tsk.ip=a+":80",this.tsk.segment=this.segment,this.tsk.data=null,this.tsk.range=null,qr.a.getEvent().on(Dr.a.LoadStatus+this.CDNStateChangeEventID,this.loaderStateChange.bind(this));try{this.startTime=Date.now(),e=this.domain+"|"+this.idc,(t=Xr.get(e))?Xr.set(e,{total:t.total+1,failcnt:t.failcnt}):Xr.set(e,{total:1,failcnt:0}),this.loader.load(this.tsk,this.segment.loadType)}catch(e){this.segment&&(this.close(!0),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_error,Er.a.LoaderState_error_load,"trycatchError",""))}}else this.startDisPatch()}},{key:"loaderStateChange",value:function(e,t){if(this.segment)switch(e){case"progress":this.tsk&&this.tsk.data&&this.tsk.range&&(this.tsk.range.end-this.tsk.range.begin!==this.tsk.data.byteLength&&Dt.a.error("data len is not right ,url = "+this.segment.dataUrl+"range "+this.tsk.range.begin+"-"+this.tsk.range.end),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_progress,this.tsk.data,this.tsk.range.begin,this.tsk.range.end-this.tsk.range.begin));break;case"done":Dt.a.info("load [DONE] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index : "+this.segment.index),this.tsk=null,this.checkTask();break;case"error":Dt.a.info("load [error] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index-"+this.segment.index+" errDetail-"+t),qr.a.getEvent().emit(this.CDNStateChangeEventID,Er.a.LoaderState_error,Er.a.LoaderState_error_load,t,"")}}},{key:"close",value:function(e){this.tskList=null,this.tsk=null,qr.a.getEvent().off(Dr.a.DisPatchStatus+this.segment.type),this.dispatcher&&this.dispatcher.clear(),this.dispatcher=null,this.segment=null,this.loader&&(e||this.loader.type===zr.type)&&this.loader.running&&this.loader.close(),this.loader=null,qr.a.getEvent().off(Dr.a.LoadStatus+this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.segment}},{key:"loadStage",get:function(){return this._loadStage},set:function(e){this._loadStage=e}},{key:"curLoadTskIdx",get:function(){return this.curLoadTskIndex},set:function(e){this.curLoadTskIndex=e}},{key:"doMainName",get:function(){return this.domain}},{key:"dataUrl",get:function(){return this.url}},{key:"curIDC",get:function(){return this.idc}}]),oa),ia="",na=null,ra="",aa=/[a-z]/i;function oa(){f()(this,oa),this.tskList=null,this.curLoadTskIndex=0,this.tsk=null,this.retryCnt=0,this.stateChange=null,this.segment=null,this.startTime=-1,this.loader=null,this._loadStage="",this.dispatcher=null,this.domain="",this.idc=""}function sa(e,i,n){if(e){if(!aa.test(e)){var t=gt.a.getUserInfoFromCookie(),t={dmnm:e,ips:e,userinfo:t.userInfo,idc:n||t.idc,type:i};return Dt.a.debug("fetch DNSParser"+JSON.stringify(t)),_t.a.sendPingBack({type:"DNSParser",para:t}),0}if(ra=e,ia="http://"+_t.a.bgpIP.replace("3eb/","")+"3f0/hd.cloud.iqiyi.com/d?dn="+ra+"&business=pcwPlayer&cross-domain=1",vt.isHTTPS&&(ia=ia.replace(/^http:/gi,"https:")),vt.supportFetch)fetch(ia).then(function(e){400<=e.status||e.status<200?Dt.a.error("fetch err ,status "+e.status):e.text().then(function(e){var t=gt.a.getUserInfoFromCookie(),t={dmnm:ra,ips:e,userinfo:t.userInfo,idc:n||t.idc,type:i};Dt.a.debug("fetch DNSParser"+JSON.stringify(t)),_t.a.sendPingBack({type:"DNSParser",para:t})})}).catch(function(e){"Failed to fetch"===e.message?Dt.a.warn("DNSParser Failed to fetch "):Dt.a.warn("DNSParser fetch err-"+e.message)});else{(na=new XMLHttpRequest).responseType="text",na.onreadystatechange=function(){var e,t;4===na.readyState&&(200===na.status&&na.response&&(t=gt.a.getUserInfoFromCookie(),e="",na.response&&(e=na.response),t={dmnm:ra,ips:e,userinfo:t.userInfo,idc:n||t.idc,type:i},Dt.a.debug("xhr DNSParser"+JSON.stringify(t)),_t.a.sendPingBack({type:"DNSParser",para:t})),na&&(na.abort(),na=null))};try{na.open("GET",ia,!0),Dt.a.info("Xhr DNSParser Xhr url "+ia),na.send()}catch(e){Dt.a.error("xhr dns err-"+e.message),na&&na.abort()}}}}var ca=!1,da=!1,ua=0,la=0;function ha(e){return e<pt.a.dispatchCfg.length?pt.a.dispatchCfg[e]:pt.a.dispatchCfg[pt.a.dispatchCfg.length-1]}function fa(e,t,i){var n=Fr.getDataurl(pt.f.CDN,e);if(n&&t)for(var r=0;r<n.length;r++)if(t===n[r].URL.split("/")[2]){n[r].errCnt=n[r].errCnt?n[r].errCnt+1:1,n[r].errCnt>=4-n.length&&(n[r].status=i),Dt.a.info("updateCDNUrlStatus ,cdnName : "+t+", errCnt : "+n[r].errCnt+", status : "+i),Fr.setDataurl(pt.f.CDN,e,n);break}}var pa=(c()(_a,[{key:"reset",value:function(){this.videoSegment=null,this.loadTaskList=null,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,this.cdnTaskLoader=null,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0}},{key:"load",value:function(e,t,i,n){this.fireError||0===t.length||(this.videoSegment=e,this.loadTaskList=t,this.loaderIndex=i,this.urlIndex=n||-1,ca=!1,this.CDNStateChangeEventID=++ua,this.startTime=Date.now(),clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),ha(this.dispatchTimeoutCnt)),this.cdnTaskLoader=new ta,qr.a.getEvent().on(this.CDNStateChangeEventID,this.stateChange.bind(this)),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,0,this.urlIndex,this.CDNStateChangeEventID),Qi.addPBItem(qi.cdn_taskCnt))}},{key:"onDispatchTimeOut",value:function(){!this.loadTaskList||this.fireError||0<this.retryStep||(this.dispatchTimeoutCnt++,this.stateChange(Er.a.LoaderState_error,Er.a.LoaderState_error_dispatch,"timeout",Date.now()-this.startTime))}},{key:"onRcvTimeOut",value:function(){!this.loadTaskList||this.fireError||0<this.retryStep||(this.hitProgress?(this.rcvTimeoutCnt++,this.stateChange(Er.a.LoaderState_error,Er.a.LoaderState_error_load,"revTimeout",Date.now()-this.startTime)):(this.TTFBTimeoutCnt++,this.stateChange(Er.a.LoaderState_error,Er.a.LoaderState_error_load,"ttfbTimeout",Date.now()-this.startTime)))}},{key:"stateChange",value:function(e,t,i,n){var r;if(!(!this.loadTaskList||this.fireError||0<this.retryStep))switch(e){case Er.a.LoaderState_ready:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(r=this.TTFBTimeoutCnt)<pt.a.TTFBCfg.length?pt.a.TTFBCfg[r]:pt.a.TTFBCfg[pt.a.TTFBCfg.length-1]);break;case Er.a.LoaderState_progress:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(r=this.rcvTimeoutCnt)<pt.a.rcvCfg.length?pt.a.rcvCfg[r]:pt.a.rcvCfg[pt.a.rcvCfg.length-1]),this.onProgress(t,i,n);break;case Er.a.LoaderState_done:clearTimeout(this.timerStep),this.timerStep=0,this.onComplete();break;case Er.a.LoaderState_error:clearTimeout(this.timerStep),this.timerStep=0,this.onError(t,i,n)}}},{key:"onProgress",value:function(e,t,i){if(this.hitProgress||(Qi.addPBItem(qi.cdn_progressCnt),Qi.addPBItem(qi.cdn_progressTime,Date.now()-this.startTime),this.hitProgress=!0),Qi.addPBItem(qi.cdn_loadTime,Date.now()-this.startTime),_t.a.cdnSize+=i,_t.a.cdnCostTime+=Date.now()-this.startTime,this.startTime=Date.now(),this.loadSizeForSpeed+=i,-1===this.loadTimeForSpeed)this.loadTimeForSpeed=Date.now();else if(1e3<Date.now()-this.loadTimeForSpeed&&(this.speed=Math.ceil(this.loadSizeForSpeed/(Date.now()-this.loadTimeForSpeed)),Dt.a.info("load SPEED(B/S)"+1e3*this.speed+" , Rate : "+this.videoSegment.rate),function(e,t,i){var n=Fr.getDataurl(pt.f.CDN,e);if(n)for(var r=0;r<n.length;r++)if(t===n[r].URL.split("/")[2]){n[r].speed=i,Fr.setDataurl(pt.f.CDN,e,n);break}}(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,this.speed),_t.a.cdnSpeed=this.speed,this.loadSizeForSpeed=0,this.loadTimeForSpeed=Date.now(),this.speed<this.videoSegment.rate?this.speedLowCnt++:this.speedLowCnt--,5<this.speedLowCnt)){Dt.a.info("load lowSpeed ,idc:"+this.cdnTaskLoader.curIDC+",doMainName:"+this.cdnTaskLoader.doMainName),_t.a.cdnSpeed=0,this.speedLowCnt=0,this.speed<this.videoSegment.rate/2&&!da&&gt.a.isHit()&&(this.cdnTaskLoader.doMainName?sa(this.cdnTaskLoader.doMainName,1,this.cdnTaskLoader.curIDC):this.videoSegment.dispatchUrl&&sa(gt.a.getPureIP(this.videoSegment.dispatchUrl),1,this.cdnTaskLoader.curIDC),da=!0);var n=this.videoSegment.checkP2PHealth();if(n>=3+Math.ceil(this.speed/100))qt.loader.message="load-lowSpeed-"+this.videoSegment.idc+"-"+this.videoSegment.ip+"-"+this.videoSegment.sourceID,this.clear(!0),this.videoSegment.setOnP2P(15e3),Dt.a.info("start pure P2P state! health peers : "+n+" , cdnSpeed : "+this.speed+" , byteRate : "+this.videoSegment.rate);else if(this.speed<this.videoSegment.rate/2&&"video"===this.videoSegment.type){ca=!0;for(var r="",a=0;a<this.loadTaskList.length;a++)r+=this.loadTaskList[a].begin+" - "+this.loadTaskList[a].end+", ";Dt.a.info("lowSpeedFlag ,range, "+r),fa(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,1),qr.a.getEvent().emit(Dr.a.CdnNodeMgrStateChange+this.videoSegment.type,Er.a.LoaderState_lowSpeed,"",this.loaderIndex)}}if(0<i){if(this.videoSegment.fileType===Nt.a.DASH&&("a0"===this.videoSegment.index||"e0"===this.videoSegment.index)&&0===t){for(var o=0,s=Math.min(50,i);o<s&&0===e[o];)o++;if(s<=o)return Dt.a.error("vp9 load init data is null, "+this.videoSegment.dataUrl),this.stateChange(Er.a.LoaderState_error,Er.a.LoaderState_error_load,"dataError"),qt.errorStage="dataNULL",void(qt.errorFragment=this)}this.videoSegment.pushData(e,t,i)}}},{key:"onComplete",value:function(){if(this.videoSegment.fileType===Nt.a.FTS){if(ca)return;this.videoSegment.loadDone=!0}this.videoSegment.clearEndOnP2PTime(),this.hitProgress||(Qi.addPBItem(qi.cdn_progressCnt),Qi.addPBItem(qi.cdn_progressTime,Date.now()-this.startTime)),Qi.addPBItem(qi.cdn_loadTime,Date.now()-this.startTime),this.startTime=Date.now(),_t.a.cdnSpeed=0,this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!1)}},{key:"onError",value:function(e,t,i){switch(clearTimeout(this.retryStep),this.retryStep=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),e){case Er.a.LoaderState_error_dispatch:if(qt.dispatcher.message="dispatch-"+t+NaN+i+":index = "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,Dt.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt "+this.retryCnt+", msg : "+i+" ,loaderIndex : "+this.loaderIndex),"statusErr-405"===t&&(0===la||18e5<=Date.now()-la))return this.clear(!0),Fr.clearDataurl(pt.f.CDN,this.videoSegment.sourceID),this.videoSegment.dataUrl="",la=Date.now(),void _t.a.noticeRefreshMovieData(this.videoSegment.tvid);if(void 0===this.videoSegment.dispatchOnError&&(this.videoSegment.dispatchOnError=0),this.videoSegment.dispatchOnError+=1,this.videoSegment.loadType===pt.f.DCACHE){if("statusErr-302"===t||"responseIsNull"===t)return void(this.videoSegment.dcacheError=!0);if(void 0===this.videoSegment.dcacheDispatchError&&(this.videoSegment.dcacheDispatchError=0),1<++this.videoSegment.dcacheDispatchError)return void(this.videoSegment.dcacheError=!0)}""===_t.a.bgpIP_1&&Et.loadBGPIP(),3===this.videoSegment.dispatchOnError&&this.videoSegment.dispatchUrl&&sa(gt.a.getPureIP(this.videoSegment.dispatchUrl),2);break;case Er.a.LoaderState_error_load:if(this.videoSegment.loadType===pt.f.DCACHE&&1<++this.videoSegment.dcacheLoadErrCnt)return this.videoSegment.dcacheError=!0,void Dt.a.error("load [Error] ,dcache load err more than 3,range url : "+(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:null)+" , type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+i+" ,loaderIndex : "+this.loaderIndex);t===Er.a.LoaderState_dataRangeError&&(Fr.clearDataurl(this.videoSegment.loadType,this.videoSegment.sourceID),this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end)),"dataError"===t&&this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end),this.videoSegment.loadType===pt.f.CDN&&(!this.cdnTaskLoader||(r=Fr.getDataurl(this.videoSegment.loadType,this.videoSegment.sourceID))&&(r.length<=1&&3===this.retryCnt||3<=r.length||2===r.length&&(2===this.retryCnt||5===this.retryCnt))&&sa(this.cdnTaskLoader.doMainName,2,this.cdnTaskLoader.curIDC),"statusErr-405"===t&&Fr.clearDataurl(this.videoSegment.loadType,this.videoSegment.sourceID),"lowSpeed"!==t&&"tryCatchError"!==t&&this.cdnTaskLoader&&(fa(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,2),n=this.cdnTaskLoader.doMainName,r=this.cdnTaskLoader.curIDC,(r=Xr.get(n=n+"|"+r))?Xr.set(n,{total:r.total,failcnt:r.failcnt+1}):Xr.set(n,{total:0,failcnt:1})),0===ya(this.videoSegment.loadType,this.videoSegment.sourceID)&&Fr.clearDataurl(this.videoSegment.loadType,this.videoSegment.sourceID),this.cdnTaskLoader&&-1===this.videoSegment.errIDCList.indexOf(this.cdnTaskLoader.curIDC)&&this.videoSegment.errIDCList.push(this.cdnTaskLoader.curIDC)),_t.a.cdnSpeed=0,qt.loader.message="load-"+t+" message- "+i+" idc - "+this.videoSegment.idc+"-"+this.videoSegment.ip+" index- "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,Dt.a.error("load [Error] range url : "+(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:null)+" , type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+i+" ,loaderIndex : "+this.loaderIndex);break;default:Dt.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+i)}var n,r,a;if(clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,4<=this.videoSegment.checkP2PHealth())return Dt.a.info("load [Error],start pure P2P state,url "+this.cdnTaskLoader.dataUrl),this.clear(!0),void this.videoSegment.setOnP2P(15e3);this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.videoSegment.loadType!==pt.f.DCACHE&&this.retryCnt++,this.retryCnt>pt.a.dispatchCfg.length?(this.retryCnt=0,a=_t.a.getBufferFunc(),(0<=this.videoSegment.fileType.indexOf(Nt.a.M4S)?Math.min(a.buffered.video.len,a.buffered.audio.len):a.len)<2?(this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,this.fireError=!0,Dt.a.error("load [FINAL Error] !!!, loaderIndex "+this.loaderIndex),qr.a.getEvent().emit(Dr.a.CdnNodeMgrStateChange+this.videoSegment.type,e,t,this.loaderIndex)):this.retryStep=setTimeout(this.reLoad.bind(this),2e3)):this.retryStep=setTimeout(this.reLoad.bind(this),2e3)}},{key:"reLoad",value:function(){var e;clearTimeout(this.retryStep),this.retryStep=0,!this.loadTaskList||this.cdnTaskLoader.curLoadTskIndex-1>=this.loadTaskList.length||(this.startTime=Date.now(),this.videoSegment&&(0<this.cdnTaskLoader.curLoadTskIdx&&this.cdnTaskLoader.curLoadTskIdx--,e=this.videoSegment.fileType!==Nt.a.FTS?this.videoSegment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end):[{begin:this.loadTaskList[0].begin,end:this.loadTaskList[this.loadTaskList.length-1].end}]),e&&0!==e.length?(Qi.addPBItem(qi.cdn_taskCnt),this.loadTaskList=e,this.urlIndex=-1,this.videoSegment.fileType===Nt.a.FTS&&(this.videoSegment.segment.dataLen=0,ca=!1),clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),ha(this.dispatchTimeoutCnt)),Dt.a.warn("reLoad !!!!!!!!!!!~~"+JSON.stringify(e)+", loaderIndex : "+this.loaderIndex+", retryCnt : "+this.retryCnt),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,this.retryCnt,this.urlIndex,this.CDNStateChangeEventID)):this.onComplete())}},{key:"clear",value:function(e){this.loadTaskList&&this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.startTime=0,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),e||(this.fireError=!1),this.loaderIndex=-1,qr.a.getEvent().off(this.CDNStateChangeEventID),_t.a.cdnLoadDoMain=""}},{key:"mssNodeReset",value:function(){this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),qr.a.getEvent().off(this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.loadTaskList}},{key:"cdnSpeed",get:function(){return this.speed}},{key:"loadStage",get:function(){return this.cdnTaskLoader.loadStage},set:function(e){this.cdnTaskLoader.loadStage=e}},{key:"isError",get:function(){return this.fireError}}]),_a);function _a(){f()(this,_a),this.reset()}function ga(e,t,i){var n=[],r=Fr.getDataurl(e,t);if(r)for(var a=-1,o=-1,s=0;s<r.length;s++)1!==i&&i?r[s].status||n.push(s):(r[s].status||(r[s].speed&&r[s].speed>a?(a=r[s].speed,o=s):r[s].speed||-1!==o||(o=s)),s>=r.length-1&&n.push(o));return n}function ya(e,t){var i=0,n=Fr.getDataurl(e,t);if(n)for(var r=0;r<n.length;r++)n[r].status||i++;return i}var va=(c()(Sa,[{key:"reset",value:function(){this.loadTaskList=null,this.segment&&(this.resetLoader(),qr.a.getEvent().off(Dr.a.CdnNodeMgrStateChange+this.segment.type)),this.segment=null,this.loaderList=[]}},{key:"resetLoader",value:function(){for(var e=0;e<this.loaderList.length;e++)this.loaderList[e]&&(this.loaderList[e].clear(!1),this.loaderList[e]=null)}},{key:"load",value:function(e,t){this.loadTaskList||this.fireError||0===t.length||(this.segment=e,this.loadTaskList=t,qr.a.getEvent().on(Dr.a.CdnNodeMgrStateChange+this.segment.type,this.stateChange.bind(this)),t=new pa,this.loaderList.push(t),t.load(this.segment,this.loadTaskList,-1))}},{key:"stateChange",value:function(i,n,r){var u=this;if(this.segment&&this.loadTaskList){var e=function(){switch(i){case Er.a.LoaderState_lowSpeed:if(1<u.loaderList.length)return Dt.a.info("already in MSS status"),{v:void 0};if(!Fr.getDataurl(pt.f.CDN,u.segment.sourceID))return{v:void 0};var s=u.checkTastList(),c=ga(pt.f.CDN,u.segment.sourceID,s.loaderNum);if(s.loaderNum<=1||c.length<=1)return Dt.a.info("check MSS load , current dataLen is need 1 loader,so not open MSS "),{v:void 0};for(var d=0,d=0;d<u.loaderList.length;d++)u.loaderList[d].mssNodeReset();d=0;for(;d<s.loaderNum;)!function(){u.loaderList[d]||u.loaderList.push(new pa);for(var e=d<s.loaderNum-1?s.tastList.slice(d,++d):s.tastList.slice(d++),t="",i=0;i<e.length;i++)t+=e[i].begin+" - "+e[i].end+", ";var n,r,a,o=u;n=e,r=d,a=t,setTimeout(function(){o.loaderList[r-1]?(Dt.a.info("start MSS load , loaderIndex "+(r-1)+",loadRange "+a),o.loaderList[r-1].load(o.segment,n,r-1,c[r-1])):Dt.a.info("MSS load is null, loaderIndex "+(r-1)+", loaderLen "+this.loaderList.length)},50*(r-1))}();break;case Er.a.LoaderState_error_dispatch:case Er.a.LoaderState_error_load:for(var e=!0,t=0;t<u.loaderList.length;t++)if(!u.loaderList[t].isError){e=!1;break}e?u.cdnFinalErrFun(i,n):u.loaderList[r<0?0:r].clear(!0)}}();return"object"===re()(e)?e.v:void 0}}},{key:"cdnFinalErrFun",value:function(e,t){Dt.a.error("all  loader [FINAL Error]!!!!!!!!!!!!!!!!"),ea(!0),e===Er.a.LoaderState_error_dispatch?qt.errorStage="dispatch":t===Er.a.LoaderState_dataRangeError?qt.errorStage=t:qt.errorStage="load",Qi.check({rec:"fail",etyp:qt.errorStage,info:qt.loader.message}),qt.errorFragment=this}},{key:"checkTastList",value:function(){this.segment.fileType!==Nt.a.FTS&&(this.loadTaskList=this.segment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end));for(var e=0,t="",i=0;i<this.loadTaskList.length;i++)e+=this.loadTaskList[i].end-this.loadTaskList[i].begin,t+=this.loadTaskList[i].begin+" - "+this.loadTaskList[i].end+", ";var n=ya(this.segment.sourceID);if(0===n||1===n)return{loaderNum:n,tastList:this.loadTaskList};var r=Math.min(Math.max(1,Math.floor(e/1048576)),n);if(Dt.a.info("MSS loader checkTastList, NeedLoaderLen "+e+", needLoaderNum "+r+", tastList "+t),r<=this.loadTaskList.length)return{loaderNum:r,tastList:this.loadTaskList};for(var a=[],o=Math.ceil(e/r),s=this.loadTaskList[0].begin,c=0,d=0;d<r;d++)c<this.loadTaskList.length&&(s+o<=this.loadTaskList[c].end?(a.push({begin:s,end:s+o}),s+=o):(a.push({begin:s,end:this.loadTaskList[c].end}),s=this.loadTaskList[c].end),s>=this.loadTaskList[c].end&&++c<this.loadTaskList.length&&(s=this.loadTaskList[c].begin));for(;c<this.loadTaskList.length;)s<this.loadTaskList[c].end&&a.push({begin:s,end:this.loadTaskList[c].end}),s=this.loadTaskList[c].end,++c<this.loadTaskList.length&&(s=this.loadTaskList[c].begin);return Dt.a.info("MSS loader split tast res ,  "+JSON.stringify(a)),{loaderNum:r,tastList:a}}},{key:"running",get:function(){if(!this.loaderList)return!1;for(var e=0;e<this.loaderList.length;e++)if(this.loaderList[e].running)return!0;return this.reset(),!1}}]),Sa),ma="video",ba="audio",ka=new va,xa=new va;function Sa(){f()(this,Sa),this.reset()}function Ta(e,t,i){var n=parseInt(i.substring(1)),r=16<=n?gt.a.sliceStr(e+t,5)+i.substring(0,1)+n.toString(16):gt.a.sliceStr(e+t,5)+i.substring(0,1)+"0"+n.toString(16);return parseInt("0x"+r)}c()(Pa,[{key:"loadType",get:function(){return this._loadType}},{key:"dcacheError",get:function(){return this._dcacheErr},set:function(e){this._dcacheErr=e}},{key:"dcacheLoadErrCnt",get:function(){return this._dcacheLoadErrCnt},set:function(e){this._dcacheLoadErrCnt=e}},{key:"onTracker",get:function(){return ur.hasProxyByID(this.p2pID)}},{key:"updateDispatchUrl",value:function(e){this.dispatchUrl=e}},{key:"checkCreateSegment",value:function(){if(this.segment){if(this.segment.alias===this.alias&&this.segment.size===this.size){0!==this.segment.state&&(this.segment.state=0);var e=this;return this.segment.refreshFun=function(){e&&e.refreshBuffer.call(e)},Dt.a.info("segment is exit"),this.segment.setRange(this.startPos,this.endPos),void(this.seekable&&this.segment.setPosList(this.seekable))}Dt.a.info("segment is exit,but size or alias is match,so remove"),hi.removeSegment(this.alias)}var t=new Ar(this.size,this.tvid,this.sourceID,this.albumID,this.realIdx,this.alias,this.vid,this.p2pID,this.rate,this.vids,this.fileType,this.seekable);hi.setSegment(this.alias,t);var i=this;this.segment.refreshFun=function(){i&&i.refreshBuffer.call(i)},this.segment.setRange(this.startPos,this.endPos)}},{key:"loadData",value:function(e,t,i){if(this.segment){0!==this.segment.state&&(this.segment.state=0),this.fileType===Nt.a.FTS&&(this.segment.dataLen=0),this._loadType=i;i=this.checkTask(e,t);if(0===i.length)return this.segment.checkData(),void Dt.a.info("data is already have,not need load~~~ "+this.index+" : "+e+"-"+t+" state: "+this.segment.state+" cePos "+this.segment.cePos+",curCEPos "+this.lastCEPos);"video"===this.type?(Dt.a.info("after checkTask ,video loadPoint  range = "+JSON.stringify(i)),ka.load(this,i)):(Dt.a.info("after checkTask ,audio loadPoint  range = "+JSON.stringify(i)),xa.load(this,i))}}},{key:"p2pLoadSegment",value:function(){"video"===this.type&&this.segment&&this.segment.dataErrCount<10&&hi.setLoadSegment(this.alias)}},{key:"isOnP2P",get:function(){return 0<this.endOnP2PTime&&Date.now()<=this.endOnP2PTime}},{key:"segment",get:function(){return hi.getSegment(this.alias)}},{key:"setOnP2P",value:function(e){this.endOnP2PTime=e+Date.now(),this.type===ma&&(va.loadStage="P2P")}},{key:"clearEndOnP2PTime",value:function(){this.endOnP2PTime=-1}},{key:"checkTask",value:function(e,t){return this.segment?this.fileType===Nt.a.FTS?[{begin:e,end:t}]:this.segment.checkTask(e,t):(Dt.a.error("checkTask return null,because of segment is null"),null)}},{key:"dataUrl",get:function(){return this.segment.dataUrl},set:function(e){this.segment.dataUrl=e}},{key:"done",get:function(){return!!this.segment&&(this.fileType===Nt.a.M4S||this.fileType===Nt.a.DASH||this.fileType===Nt.a.TS?this.segment.done:this.fileType===Nt.a.FTS?this.segment.tsLoadDone:void 0)}},{key:"checkP2PHealth",value:function(){return this.segment?this.segment.checkP2PHealth():0}},{key:"clearData",value:function(e,t){this.segment&&this.segment.deleteRange(e,t-e)}},{key:"updateLoadRange",value:function(e,t){this.segment&&this.segment.setRange(e,t)}},{key:"setTrackerIP",value:function(e){ur.hasProxyByIPInfo(e)?ur.getProxyByIPInfo(e).id=this.p2pID:ur.startProxy(this.p2pID,e)}},{key:"recycleCDNTask",value:function(e){this.segment&&this.segment.recycleCDNTask(e)}},{key:"refreshBuffer",value:function(){this.segment&&(-1!==this.endPos?this.lastCEPos=Math.min(this.segment.cePos,this.endPos):this.lastCEPos=this.segment.cePos)}},{key:"updateCePos",value:function(e){this.segment?this.lastCEPos=e:this.lastCEPos=-1}}]),g=Pa;function Pa(e){f()(this,Pa),this.dispatchUrl=e.dispatchUrl,this.tvid=e.tvid,this.rate=e.levelId,this.vids=e.vids,this.vid=e.vid,this.albumID=e.albumID.toString(),this.sourceID=e.sourceID,this.index=e.index,this.type=e.trackerType,this.startPos=e.startPos,this.endPos=e.endPos,this.size=e.size,this.lastCEPos=-1,this.startTime=e.startTime<0?0:e.startTime,this.endTime=e.endTime<0?864e5:e.endTime,this.endOnP2PTime=0,this.fileType=e.videoType,this.realIdx=e.realSegIdx,this.alias=Ta(this.sourceID,this.vid,this.realIdx),this.fragmentName=this.alias+"_"+this.index+"|"+this.showStartTime+"-"+this.showEndTime,this.idc="",this.ip="",this.errIDCList=[],""!==this.albumID&&"0"!==this.albumID&&void 0!==this.albumID&&0!==this.albumID?this.p2pID=parseInt("0x"+Di()(this.albumID).substr(0,10)).toString():""!==this.tvid&&"0"!==this.tvid&&void 0!==this.tvid&&0!==this.tvid?this.p2pID=parseInt("0x"+Di()(this.tvid).substr(0,10)).toString():this.p2pID=this.vid,this._dcacheErr=!1,this._dcacheLoadErrCnt=0,this._loadType=e.loadType||pt.f.CDN}var Ia=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),r.call(this,e,t)}return c()(a,[{key:"pushData",value:function(e,t,i){return this.segment?(this.segment.addData(t,e,i),Qi.cdnSize=i+Qi.cdnSize,this.segment.peerMgr&&(this.loadType===pt.f.DCACHE?this.segment.peerMgr.usedSize=i+this.segment.peerMgr.usedSize:this.segment.peerMgr.cdnSize=i+this.segment.peerMgr.cdnSize)):Dt.a.warn("pushData segment is null"),!0}}]),a}(g);var wa=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),(t=r.call(this,e,t)).loadInfo=e.loadInfo,t}return c()(a,[{key:"pushData",value:function(e,t,i){if(!this.segment)return Dt.a.warn("pushData segment is null"),!0;var n=t-this.loadInfo.startPos,t=e.byteLength;return this.segment.addData(n,e,t),Qi.cdnSize=i+Qi.cdnSize,this.segment.peerMgr?(this.loadType===pt.f.DCACHE?this.segment.peerMgr.usedSize=t+this.segment.peerMgr.usedSize:this.segment.peerMgr.cdnSize=t+this.segment.peerMgr.cdnSize,!0):void 0}},{key:"loadDone",get:function(){return this.segment.tsLoadDone},set:function(e){this.segment.tsLoadDone=e}}]),a}(g);var Aa,Ea,Da,qa,Oa,Ra=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),(t=r.call(this,e,t)).seekable=e.seekable,t}return c()(a,[{key:"pushData",value:function(e,t,i){return!this.segment||(this.segment.addData(t,e,i),this.type===ma&&(Qi.cdnSize=i+Qi.cdnSize),this.segment.peerMgr&&this.type===ma&&(this.loadType===pt.f.DCACHE?this.segment.peerMgr.usedSize=i+this.segment.peerMgr.usedSize:this.segment.peerMgr.cdnSize=i+this.segment.peerMgr.cdnSize),!0)}},{key:"dataLen",get:function(){return this.segment.dataLen}}]),a}(g),La=(c()($a,[{key:"reset",value:function(){this.time=0,this.bid=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.dataFlag=!1}}]),$a),Ma=(c()(Ka,[{key:"reset",value:function(){this.levelID=-1,this.startTime=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.cEndTime=0,this.endPos=0,this.init=!1}}]),Ka),b=(c()(Qa,[{key:"reset",value:function(){this.levelID=-1,this.segmentIndex=0,this.chunkIndex=0,this.time=0,this.tvid=0}}]),Qa),Ca=!1,Na=!1,Ba=!1,Fa=new b,Ua=new b,ja=!0,Va=!1,Wa=Date.now(),Ha=[],za=0,Ya=(c()(Ga,[{key:"done",get:function(){return this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?this.videoDone&&this.audioDone:this.videoDone}},{key:"resetLoader",value:function(){ka.reset(),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||xa.reset()}},{key:"resetDoneStatus",value:function(){this.videoDone=!1,this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(this.audioDone=!1)}},{key:"refreshLoadRange",value:function(e){e[0][1]>this.rangeETime&&this.done&&this.resetDoneStatus(),this.rangeSTime=e[0][0],this.rangeETime=e[0][1],Dt.a.info("refreshLoadRange time ,start "+this.rangeSTime+", end "+this.rangeETime)}},{key:"feed",value:function(e,t,i){_t.a.tvId=this.tvid=e,this.event?this.event.clear():this.event=qr.a.newEvent(),this.curFeedBid=i.bid,null===this.levelMgr&&(this.levelMgr=new Wt),this.dashInfo&&this.dashInfo.tvid===this.tvid||(this.levelMgr.clear(),this.dashInfo=new Vt(i));e=this.dashInfo.parser(i);e&&this.levelMgr.set(e.levelID,e.data),this.rangeSTime=t[0][0],this.rangeETime=t[0][1],Dt.a.info("feed time range ,start "+this.rangeSTime+", end "+this.rangeETime+",Type "+i.type),_t.a.fileType=this.videoFormatType=i.type,_t.a.aid=i.aid}},{key:"setDefList",value:function(e){if(this.dashInfo)for(var t=0;t<e.length;){Dt.a.info("setDefList , bid ",e[t].bid);var i=this.dashInfo.parser(e[t]);i&&this.levelMgr.set(i.levelID,i.data),t++}}},{key:"checkBitRate",value:function(e){if(null===this.dashInfo)return null;-1===this._levelID?(null===this._absStrategy&&(this._absStrategy=new Pi),this.buffTimer=setTimeout(this.getBuffer.bind(this),2e3)):(0<this.buffTimer&&clearTimeout(this.buffTimer),null!==this._absStrategy&&(this._absStrategy.close(),this._absStrategy=null),Fa.tvid===this.tvid&&(-1!==Fa.levelID&&Fa.reset(),-1!==Ua.levelID&&Ua.reset()),this.levelMgr.get(e)||Dt.a.error("need feed first ,bitRate : ",e))}},{key:"levelID",get:function(){if(-1!==this._levelID)return this._levelID;if(this._absStrategy){var e=this._absStrategy.bitrate;return e=-1===e||!this.levelMgr.has(e)||!_t.a.absOpen?this.curFeedBid:e}return this.curFeedBid},set:function(e){this._levelID=e}},{key:"seek",value:function(e,t){0===this.levelID&&Dt.a.error("need set bitrate first!"),Ba=!1;var i=this.levelID;null===this.dashInfo&&Dt.a.error("need feed first!"),(e<0||void 0===e)&&(e=this.rangeSTime);var n=!1;-1===this._levelID&&this.curLoadSegment&&this.curLoadSegment.rate!==i&&this.levelMgr.has(this.curLoadSegment.rate)&&(i=this.curLoadSegment.rate),-1===this._levelID&&this._readPointer&&this._readPointer.bid!==i&&(n=!0),t||(Fa.reset(),Ua.reset()),ja=Ea=!0,this.absTocbs=!1;var r=this.levelMgr.get(i);if(r||Dt.a.error(" while seek ,levelInfo is null ,bid "+i),e>=r.duration)return Ba=!0,void(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(this.videoDone=!0,this.audioDone=!0):this.videoDone=!0);var a,o=null;this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?o=Ct.getGapPos(r,e,ma,"start"):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(o=Ct.getTSGapPos(r,e,"start")),null!==o?(this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||xa.reset(),ka.reset(!1),Ca=!0,this.resetDoneStatus(),qa=Date.now(),e<this.rangeSTime?(this.rangeSTime=e,Dt.a.info("seek update time start  range ,start "+this.rangeSTime+", end "+this.rangeETime)):e>this.rangeETime&&(this.rangeETime=Math.min(r.duration,this.rangeETime),Dt.a.info("seek update time end range ,start "+this.rangeSTime+", end "+this.rangeETime)),null===this._readPointer&&(this._readPointer=new La),t=this._readPointer.segmentIndex,this.changeSegmentState(r,"e",o.segmentIndex,0),Dt.a.info("seek update readPointer call changeSegmentState set 0 : e"+o.segmentIndex),this._readPointer.time=o.time,this._readPointer.segmentIndex=o.segmentIndex,this._readPointer.chunkIndex=o.chunkIndex,-1===this._levelID&&0!==this._readPointer.bid&&this._readPointer.bid!==i?this._readPointer.bid=this._readPointer.bid:this._readPointer.bid=i,n&&(Fa.time=this._readPointer.time,Fa.tvid=this.tvid,Fa.levelID=i,Fa.segmentIndex=this._readPointer.segmentIndex,Fa.chunkIndex=this._readPointer.chunkIndex,Oa=!0,Dt.a.info("seek cause switchVideoPointer ,"+JSON.stringify(Fa))),this.videoFormatType===Nt.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=o.pos,t!==this._readPointer.segmentIndex&&(this.changeSegmentState(r,"e",t,1),Dt.a.info("seek update readPointer call changeSegmentState set 1 : e"+t)),null===this._loadPointer?(this._loadPointer=new Ma,this.videoFormatType===Nt.a.DASH&&(this._loadPointer.init=!0)):this.videoFormatType!==Nt.a.DASH||this.hasInitData(i,ma)||(this._loadPointer.init=!0),this._loadPointer.startTime=o.time,this._loadPointer.cEndTime=o.time,this._loadPointer.segmentIndex=o.segmentIndex,this._loadPointer.chunkIndex=o.chunkIndex,this._loadPointer.chunkPos=o.pos,this._loadPointer.levelID=i,this._p2pLoaderPointer||(this._p2pLoaderPointer=new Ma),this._p2pLoaderPointer.levelID=i,this.curLoadSegment&&(a=parseInt(this.curLoadSegment.index.slice(1)),this._loadPointer.segmentIndex!==a?(this.changeSegmentState(r,"e",a,1),Dt.a.info("seek update loadPointer call changeSegmentState set 1 : e"+a)):(this.curLoadSegment.updateCePos(o.pos),this.curLoadSegment.updateLoadRange(this._loadPointer.chunkPos,this.curLoadSegment.endPos))),-1===this._levelID&&(Da=o.chunkIndex-1),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(null===(a=Ct.getGapPos(r,e,ba,"start"))?Dt.a.error("Dash.seek fetch audio start point is null,time = "+e):(null===this._loadAudioPointer?(this._loadAudioPointer=new Ma,this.videoFormatType===Nt.a.DASH&&(this._loadAudioPointer.init=!0)):this.videoFormatType!==Nt.a.DASH||this.hasInitData(i,ba)||(this._loadAudioPointer.init=!0),this.changeSegmentState(r,"a",a.segmentIndex,0),Dt.a.info("seek call changeSegmentState set 0 : a"+a.segmentIndex),o=this._loadAudioPointer.segmentIndex,this._loadAudioPointer.startTime=a.time,this._loadAudioPointer.cEndTime=a.time,this._loadAudioPointer.segmentIndex=a.segmentIndex,this._loadAudioPointer.chunkIndex=a.chunkIndex,this._loadAudioPointer.chunkPos=a.pos,this._loadAudioPointer.levelID=i,n&&(Ua.time=this._loadAudioPointer.startTime,Ua.tvid=this.tvid,Ua.levelID=i,Ua.segmentIndex=this._loadAudioPointer.segmentIndex,Ua.chunkIndex=this._loadAudioPointer.chunkIndex,Va=!0,Dt.a.info("seek cause switchAudioPointer ,"+JSON.stringify(Ua))),o!==this._loadAudioPointer.segmentIndex&&(this.changeSegmentState(r,"a",o,1),Dt.a.info("seek loadAudioPointer call changeSegmentState set 1 : a"+o)),null===this._readAudioPointer&&(this._readAudioPointer=new La),o=this._readAudioPointer.segmentIndex,this._readAudioPointer.time=a.time,this._readAudioPointer.segmentIndex=a.segmentIndex,this._readAudioPointer.chunkIndex=a.chunkIndex,this._readAudioPointer.chunkPos=a.pos,-1===this._levelID&&0!==this._readAudioPointer.bid&&this._readAudioPointer.bid!==i?this._readAudioPointer.bid=this._readAudioPointer.bid:this._readAudioPointer.bid=i,o!==this._readAudioPointer.segmentIndex?(this.changeSegmentState(r,"a",o,1),Dt.a.info("seek call changeSegmentState 1, a"+o)):this.curLoadAudioSegment&&(this.curLoadAudioSegment.updateCePos(a.pos),this.curLoadAudioSegment.updateLoadRange(this._loadAudioPointer.chunkPos,this.curLoadAudioSegment.endPos))))):Dt.a.error("Dash.seek fetch video start point is null,time = "+e)}},{key:"read",value:function(e){if(Wa=Date.now(),null!==this._readPointer&&(this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||null!==this._readAudioPointer))if(null!==this.levelMgr){var t=!1,i=!1,n=!1,r=!1,a=!1;if(this.absTocbs)Dt.a.info("abs switch cbs ing,so wait switch finished start read");else if(!Ca){if(0===this._readPointer.bid&&(this._readPointer.bid=this.levelID),this._readAudioPointer&&0===this._readAudioPointer.bid&&(this._readAudioPointer.bid=this.levelID),-1===this._levelID&&-1!==Fa.levelID&&(0<=this.videoFormatType.indexOf(Nt.a.TS)||(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH)&&-1!==Ua.levelID)&&(!(t=this._readPointer.time>=Fa.time&&Ea?!0:t)&&Fa.time>this._readPointer.time&&(r=!0),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!(i=this._readAudioPointer.time>=Ua.time&&ja?!0:i)&&Ua.time>this._readAudioPointer.time&&(a=!0),t&&(0<=this.videoFormatType.indexOf(Nt.a.TS)||(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH)&&i))){if(!_t.a.canSwitchVd())return;n=!0,Oa||(this.changeSegmentState(this.levelMgr.get(this._readPointer.bid),"e",this._readPointer.segmentIndex,1),Oa=!1),this._readPointer.bid=Fa.levelID,this._readPointer.segmentIndex=Fa.segmentIndex,this._readPointer.chunkIndex=Fa.chunkIndex,this._readPointer.time=Fa.time;var o=this.levelMgr.get(this._readPointer.bid);return o?(c=null,(c=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getChunkSEPos(o,ma,this._readPointer.segmentIndex,this._readPointer.chunkIndex):Ct.getTSChunkSEPos(o,this._readPointer.segmentIndex,this._readPointer.chunkIndex))?this.videoFormatType===Nt.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=c.sPos:Dt.a.error("switch readPointer chunkGapPos is null ,bid  "+JSON.stringify(this._readPointer))):Dt.a.error("switch readPointer levelInfo is null ,bid  "+this._readPointer.bid),Dt.a.info("read Video pointer switch level "+JSON.stringify(this._readPointer)),Fa.reset(),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(Va||(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),Va=!1),this._readAudioPointer.bid=Ua.levelID,this._readAudioPointer.segmentIndex=Ua.segmentIndex,this._readAudioPointer.chunkIndex=Ua.chunkIndex,this._readAudioPointer.time=Ua.time,(d=Ct.getChunkSEPos(o,ba,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex))?this._readAudioPointer.chunkPos=d.sPos:(Dt.a.error("switch readAudioPointer audioChunkPos is null"),(u=Ct.getGapPos(o,Ua.time,ba,"start"))?(this._readAudioPointer.segmentIndex=u.segmentIndex,this._readAudioPointer.chunkIndex=u.chunkIndex,this._readAudioPointer.chunkPos=u.pos,this._readAudioPointer.time=u.time):Dt.a.error("switch readAudioPointer startGap is null ")),Dt.a.info("read Audio pointer switch level "+JSON.stringify(this._readAudioPointer)),Ua.reset()),Dt.a.info("ABS switch bid ,notice pcw ,"+this._readPointer.bid),_t.a.switchAutoDef(this._readPointer.bid),this._readPointer.dataFlag=!1,void(this._readAudioPointer&&(this._readAudioPointer.dataFlag=!1))}if(-1===this._levelID||this._readPointer.bid===this._levelID){var s=this.levelMgr.get(this._readPointer.bid);if(void 0!==s){var c=null,d=null,o=null;if(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(d=(c=Ct.getFilesInfo(s,ma))[this._readPointer.segmentIndex].seekable.time,o=c[this._readPointer.segmentIndex].seekable.pos):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(d=(c=s.m3u8)[this._readPointer.segmentIndex].time,o=c[this._readPointer.segmentIndex].pos),Ba){if(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH){var u=Za(c,c.length-1,c[c.length-1].seekable.pos.length-1),l=Ct.getFilesInfo(s,ba),l=Za(l,l.length-1,l[l.length-1].seekable.pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:Nt.a.M4S,video:{chunkEOF:!0,data:null,index:u},audio:{chunkEOF:!0,data:null,index:l}}}l=Za(c,c.length-1,c[c.length-1].pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:"ts",stream:{chunkEOF:!0,data:null,index:l}}}if(e&&this.videoFormatType===Nt.a.DASH){var h=null,f=null,p=Ta(c[0].sourceID,s.vid,"e0"),_=hi.getSegment(p);!_||(l=Ct.getChunkSEPos(s,ma,0,0))&&(e=l.ePos-l.sPos,_.hasData(l.sPos,e)&&(h=_.getData(l.sPos,e)));p=Ta(Ct.getFilesInfo(s,ba)[0].sourceID,s.vid,"a0");return(_=hi.getSegment(p))&&(g=Ct.getChunkSEPos(s,ba,0,0))&&(y=g.ePos-g.sPos,_.hasData(g.sPos,y)&&(f=_.getData(g.sPos,y))),h&&f?(Dt.a.info("~~~~~read init data ok,bid = "+this._readPointer.bid),26!==h[0]&&Dt.a.info("init segment : "+h),{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:Nt.a.DASH,video:{data:h},audio:{data:f}}):null}var p="",_=c[this._readPointer.segmentIndex].sourceID,g=void 0!==c[this._readPointer.segmentIndex].realIdx?c[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,y=Ta(_,s.vid,"e"+g),h=null,h=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getChunkSEPos(s,ma,this._readPointer.segmentIndex,this._readPointer.chunkIndex):Ct.getTSChunkSEPos(s,this._readPointer.segmentIndex,this._readPointer.chunkIndex),f=hi.getSegment(y),_=0;h&&f&&(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(y=h.ePos-this._readPointer.chunkPos,f.hasData(this._readPointer.chunkPos,y)&&(_=y)):this.videoFormatType===Nt.a.TS?(v=Math.min(f.cePos,h.ePos)-this._readPointer.chunkPos,f.hasData(this._readPointer.chunkPos,v)&&(_=v)):this.videoFormatType===Nt.a.FTS&&(_=f.dataLen-this._readPointer.chunkPos));var v=null;(0<=this.videoFormatType.indexOf(Nt.a.TS)||this._readPointer.time<=this._readAudioPointer.time||Math.round(this._readPointer.time)-Math.round(this._readAudioPointer.time)<15||r)&&(t&&!n||f&&0<_&&(v=f.getData(this._readPointer.chunkPos,_)));r=Za(c,this._readPointer.segmentIndex,this._readPointer.chunkIndex);this.videoFormatType===Nt.a.DASH&&r--,v&&(p+="~~~~~read video data ok,bid = "+this._readPointer.bid+" index = "+r+" startPos = "+this._readPointer.chunkPos+" endPos = "+(this._readPointer.chunkPos+_),this._readPointer.chunkPos+=v.length,this._readPointer.dataFlag=!0);t=!1;v&&(Ea=!1,this.videoFormatType===Nt.a.FTS?f&&f.tsLoadDone&&this._readPointer.chunkPos===f.dataLen&&(Ea=t=!0):h&&this._readPointer.chunkPos>=h.ePos&&(Ea=t=!0)),t&&this._readPointer.segmentIndex<=c.length-1&&((this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH)&&this._readPointer.chunkIndex<o.length-1&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=o.length-1)&&(this._readPointer.segmentIndex<c.length-1?(this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,g!==(void(this._readPointer.chunkIndex=0)!==c[this._readPointer.segmentIndex].realIdx?c[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(s,"e",this._readPointer.segmentIndex-1,1),Dt.a.info("read  call changeSegmentState set 1, e"+this._readPointer.segmentIndex-1)),(k=Ct.getChunkSEPos(s,ma,this._readPointer.segmentIndex,this._readPointer.chunkIndex))&&(this._readPointer.chunkPos=k.sPos)):(this.changeSegmentState(s,"e",this._readPointer.segmentIndex,1),Dt.a.info("~~~~~read video data finish ~~ segmentIndex "+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1)))),0<=this.videoFormatType.indexOf("ts")&&this._readPointer.chunkIndex<o.length&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=o.length)&&(this._readPointer.segmentIndex<c.length-1?(this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,g!==(void(this._readPointer.chunkIndex=0)!==c[this._readPointer.segmentIndex].realIdx?c[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(s,"e",this._readPointer.segmentIndex-1,1),Dt.a.info("read  call changeSegmentState set 1, e"+(this._readPointer.segmentIndex-1))),(x=Ct.getTSChunkSEPos(s,this._readPointer.segmentIndex,this._readPointer.chunkIndex))&&(this._readPointer.chunkPos=x.sPos)):(this.changeSegmentState(s,"e",this._readPointer.segmentIndex,1),Dt.a.info("~~~~~read video data finish ~~"+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1)))),m=d[this._readPointer.chunkIndex],this._readPointer.time=gt.a.accAdd(c[this._readPointer.segmentIndex].start_second,m),p+=" ,video_time = "+this._readPointer.time);var m,b,_=null,h=0,k=null,o=null,g=null,x=0,s=!1,d="";return this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(m=this.levelMgr.get(this._readAudioPointer.bid),k=Ct.getFilesInfo(m,ba),(this._readAudioPointer.time<=this._readPointer.time||Math.round(this._readAudioPointer.time)-Math.round(this._readPointer.time)<15||a)&&(g=Ct.getChunkSEPos(m,ba,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex),a=Ta(k[this._readAudioPointer.segmentIndex].sourceID,m.vid,"a"+this._readAudioPointer.segmentIndex),o=hi.getSegment(a),g&&o&&(a=g.ePos-this._readAudioPointer.chunkPos,i&&!n||o.hasData(this._readAudioPointer.chunkPos,a)&&(h=a)),o&&0<h&&(_=o.getData(this._readAudioPointer.chunkPos,h))),x=Za(k,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex),this.videoFormatType===Nt.a.DASH&&x--,_&&(d+="~~~~~read audio data ok, bid = "+this._readAudioPointer.bid+" index = "+x+" startPos = "+this._readAudioPointer.chunkPos+" endPos = "+(this._readAudioPointer.chunkPos+h),this._readAudioPointer.chunkPos+=_.length,this._readAudioPointer.dataFlag=!0,ja=!1),_&&g&&this._readAudioPointer.chunkPos>=g.ePos&&(ja=s=!0),s&&(g=k[this._readAudioPointer.segmentIndex].seekable.pos.length-1,this._readAudioPointer.segmentIndex<=k.length-1&&this._readAudioPointer.chunkIndex<g&&(this._readAudioPointer.chunkIndex++,this._readAudioPointer.chunkIndex>=g)&&(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),Dt.a.info("read  call changeSegmentState set 1, a"+this._readAudioPointer.segmentIndex),this._readAudioPointer.segmentIndex<k.length-1?(this._readAudioPointer.segmentIndex++,this._readAudioPointer.chunkPos=0,this._readAudioPointer.chunkIndex=0,(b=Ct.getChunkSEPos(m,ba,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex))&&(this._readAudioPointer.chunkPos=b.sPos)):Dt.a.info("~~~~~read audio data finish ~~"+this._readAudioPointer.segmentIndex+" chunkIndex "+(this._readAudioPointer.chunkIndex-1))),b=k[this._readAudioPointer.segmentIndex].seekable.time[this._readAudioPointer.chunkIndex],this._readAudioPointer.time=gt.a.accAdd(k[this._readAudioPointer.segmentIndex].start_second,b),d+=" ,audio_time = "+this._readAudioPointer.time)),_t.a.lastReadSegIndex=void 0!==c[this._readPointer.segmentIndex].realIdx?c[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,_t.a.lastReadTvID=f?f.tvid:"",this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?f||o?(""!==p&&Dt.a.info(p),""!==d&&Dt.a.info(d),{tvid:(f||o).tvid,bid:(f||o).rate,loadDone:this.done,type:this.videoFormatType===Nt.a.DASH?Nt.a.DASH:Nt.a.M4S,video:{chunkEOF:t,data:v,index:r,spos:v?this._readPointer.chunkPos-v.length:this._readPointer.chunkPos},audio:{chunkEOF:s,data:_,index:x,spos:_?this._readAudioPointer.chunkPos-_.length:this._readAudioPointer.chunkPos}}):{}:this.videoFormatType!==Nt.a.TS&&this.videoFormatType!==Nt.a.FTS||!f?{}:(""!==p&&Dt.a.info(p),""!==d&&Dt.a.info(d),{tvid:f.tvid,bid:f.rate,loadDone:this.done,type:Nt.a.TS,stream:{chunkEOF:t,data:v,index:r,spos:v?this._readPointer.chunkPos-v.length:this._readPointer.chunkPos}})}Dt.a.warn("DashMove.read, readPointer bid with levelInfo is null,bid = "+this._readPointer.bid)}}}else Dt.a.warn("levelMgr is null,wait~~")}},{key:"getPlayBuffer",value:function(){var e=_t.a.getBufferFunc();return this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len}},{key:"refreshcEndTime",value:function(e,t){var i,n,r,a,o,s;this.curLoadSegment&&(a=null,i=parseInt(this.curLoadSegment.index.slice(1)),this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(s=e[i].seekable.pos,o=t[this._loadAudioPointer.segmentIndex].seekable.pos,r=e[i].seekable.time,a=t[this._loadAudioPointer.segmentIndex].seekable.time,(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH&&0!==i)&&0<=(n=gt.a.searchPosIndex(this.curLoadSegment.lastCEPos,s))&&(this._loadPointer.cEndTime=gt.a.accAdd(e[i].start_second,r[n]),this.reportData(this.curLoadSegment.rate,n)),!this.curLoadAudioSegment||this.videoFormatType===Nt.a.DASH&&"a0"===this.curLoadAudioSegment.index||0<=(o=gt.a.searchPosIndex(this.curLoadAudioSegment.lastCEPos,o))&&(this._loadAudioPointer.cEndTime=gt.a.accAdd(t[this._loadAudioPointer.segmentIndex].start_second,a[o]))):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(s=e[i].pos,r=e[i].time,this.videoFormatType===Nt.a.TS?0<=(s=gt.a.searchTSPosIndex(this.curLoadSegment.lastCEPos,s))&&(this._loadPointer.cEndTime=gt.a.accAdd(e[i].start_second,r[s]),this.reportData(this.curLoadSegment.rate,s)):this.videoFormatType===Nt.a.FTS&&this.curLoadSegment.loadDone&&(this._loadPointer.cEndTime=gt.a.accAdd(e[this._loadPointer.segmentIndex].start_second,r[this._loadPointer.chunkIndex+1]))))}},{key:"check",value:function(e){null===this._loadPointer&&(Dt.a.info("check load, loadPointer is null,call seek~~~"),this.seek(this.rangeSTime,!0));var t=this.levelID,i=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID;if(-1===this._levelID&&(i===t||!Ca&&-1===Fa.levelID&&_t.a.startPlayed()&&this._readPointer.dataFlag&&(!this._readAudioPointer||this._readAudioPointer.dataFlag)||(t=this.curLoadSegment.rate)),Na=Aa=!1,-1===this._levelID&&!this.absTocbs||(this.videoFormatType!==Nt.a.DASH&&this.videoFormatType!==Nt.a.M4S||this._loadAudioPointer||(this._loadAudioPointer=new Ma,this._readAudioPointer=new La,this._loadAudioPointer.levelID=this._loadPointer.levelID,this._loadAudioPointer.cEndTime=this._readPointer.time,this._readAudioPointer.bid=this._readPointer.bid,this._readAudioPointer.time=this._readPointer.time),0<=this.videoFormatType.indexOf(Nt.a.TS)&&this._loadAudioPointer&&(this._loadAudioPointer=null,this._readAudioPointer=null),i===t&&!this.absTocbs||(Dt.a.info("load switch video bidrate changed from "+i+" to "+t),e=this.getPlayBuffer(),ka.reset()),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||this._loadAudioPointer.levelID===t&&!this.absTocbs||(Dt.a.info("load switch  audio bidrate changed from "+this._loadAudioPointer.levelID+" to "+t+",buffer "+e),xa.reset())),-1===this._levelID&&_t.a.authorFailedStatus===Er.a.LoaderState_405&&(t=i),null!==(y=this.levelMgr.get(t))){var n=null,r=null;if(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(n=Ct.getFilesInfo(y,ma),r=Ct.getFilesInfo(y,ba)):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(n=y.m3u8),Ca||(t===i?this.refreshcEndTime(n,r):-1===this._levelID&&(u=this.getFileList(i),this.refreshcEndTime(u.vFList,u.aFList))),i!==t||this.absTocbs?(this.videoDone=!1,this.audioDone=!1):this.checkVideoLoadDone(y,n),hi.memorySize<pt.d.videoMaxSize&&this.checkP2PLoad(y,n,t,i),i=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID,!this._loadPointer.init||this._loadAudioPointer&&this._loadAudioPointer.levelID===i&&!this._loadAudioPointer.init){if(e>=pt.k)return void(Ca=Ca&&!1);e<0&&(e=0)}var a=!1,o=!1;-1===this._levelID&&(i!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t)&&(i!==t&&(this._loadPointer.cEndTime>this._readPointer.time||Ea)&&(a=!0),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||this._loadAudioPointer.levelID===t||(this._loadAudioPointer.cEndTime>this._readAudioPointer.time||ja)&&(o=!0),a&&(Dt.a.info("ABS ,video can switch bid"),ka.reset(),this.updateCEPos(ma,i,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType===Nt.a.DASH&&(this._loadPointer.init=!0)),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!o||(Dt.a.info("ABS ,audio can switch bid"),xa.reset(),this.updateCEPos(ba,this._loadAudioPointer.levelID,Math.max(this._loadAudioPointer.cEndTime,this._readAudioPointer.time)),this.videoFormatType===Nt.a.DASH&&(this._loadAudioPointer.init=!0)));var s=!1,c=!1,d="",u="";if((_t.a.openDache||"2"===localStorage.getItem("loadtype"))&&(!this._loadPointer.init||this._loadAudioPointer&&!this._loadAudioPointer.init)&&e>=pt.b?(d=this.curLoadSegment&&this.curLoadSegment.dcacheError?pt.f.CDN:pt.f.DCACHE,this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(u=this.curLoadAudioSegment&&this.curLoadAudioSegment.dcacheError?pt.f.CDN:pt.f.DCACHE)):(d=pt.f.CDN,this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(u=pt.f.CDN)),this.curLoadSegment&&this.curLoadSegment.loadType===pt.f.DCACHE&&d===pt.f.CDN&&(s=!0),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||this.curLoadAudioSegment&&this.curLoadAudioSegment.loadType===pt.f.DCACHE&&u===pt.f.CDN&&(c=!0),this._loadPointer.levelID===i&&!s||ka.reset(),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||this._loadAudioPointer.levelID===i&&!c||xa.reset(),this.checkCDNLoad(),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||this._loadAudioPointer.levelID!==t||this.checkAudioLoadDone(y),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(this._loadPointer.levelID===t&&Aa&&this._loadPointer.cEndTime>this._loadAudioPointer.cEndTime&&15<Math.floor(this._loadPointer.cEndTime)-Math.floor(this._loadAudioPointer.cEndTime)&&(Aa=!1),this._loadAudioPointer.levelID===t&&Na&&this._loadAudioPointer.cEndTime>this._loadPointer.cEndTime&&15<Math.floor(this._loadAudioPointer.cEndTime)-Math.floor(this._loadPointer.cEndTime)&&(Na=!1)),this.done&&this.absTocbs&&this._loadPointer.levelID===t&&(ka.reset(),xa.reset(),Na=Aa=!0),Aa||Na){s=gt.a.accSub(pt.k,e);if(-1!==this._levelID){(this.absTocbs||i!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t)&&(ka.reset(),c=0,this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(c=this._readPointer.time,!this.absTocbs&&i===t||Dt.a.info("CBS video switch bid, time "+c)):c=Math.max(this.rangeSTime,_t.a.getBufferFunc().end),!this.absTocbs&&i===t||Dt.a.info("CBS switch bidrate , start video loadPoint  time = "+c,"levelID = "+t),this._loadPointer.levelID=t,e=null,this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?e=Ct.getGapPos(y,c,ma,"start"):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(e=Ct.getTSGapPos(y,c,"start")),e?(this.changeSegmentState(y,"e",e.segmentIndex,0),this._loadPointer.segmentIndex=e.segmentIndex,this._loadPointer.chunkPos=e.pos,this._loadPointer.startTime=e.time,this._loadPointer.cEndTime=e.time,e.segmentIndex!==this._readPointer.segmentIndex&&this.changeSegmentState(y,"e",this._readPointer.segmentIndex,1),!this.absTocbs&&i===t||(this._readPointer.bid=this._loadPointer.levelID,this._readPointer.segmentIndex=e.segmentIndex,this._readPointer.chunkIndex=e.chunkIndex,this._readPointer.time=e.time,this.videoFormatType===Nt.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=e.pos,Dt.a.info("CBS switch bidrate ,start _readPointer "+JSON.stringify(this._readPointer)))):Dt.a.error("CBS switch bidrate, calculate startPoint is null "),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(xa.reset(),this._loadAudioPointer.levelID=this._loadPointer.levelID,l=this._readAudioPointer.time,Dt.a.info("CBS audio switch bid, time "+l),l=Ct.getGapPos(y,l,ba,"start"),Dt.a.info("CBS switch bidrate,start audio Point "+JSON.stringify(l)),l&&(this.changeSegmentState(y,"a",l.segmentIndex,0),this._loadAudioPointer.segmentIndex=l.segmentIndex,this._loadAudioPointer.chunkPos=l.pos,this._loadAudioPointer.startTime=l.time,this._loadAudioPointer.cEndTime=l.time,l.segmentIndex!==this._readAudioPointer.segmentIndex&&this.changeSegmentState(y,"a",this._readAudioPointer.segmentIndex,1),this._readAudioPointer.bid=this._loadPointer.levelID,this._readAudioPointer.segmentIndex=l.segmentIndex,this._readAudioPointer.chunkIndex=l.chunkIndex,this._readAudioPointer.chunkPos=l.pos,this._readAudioPointer.time=l.time,Dt.a.info("CBS switch bidrate, start readAudioPointer "+JSON.stringify(this._readAudioPointer)))),Ca=!0);var l=null;Aa&&!Ca&&(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?l=Ct.getGapPos(y,this._loadPointer.cEndTime,ma,"start"):this.videoFormatType!==Nt.a.TS&&this.videoFormatType!==Nt.a.FTS||(l=Ct.getTSGapPos(y,this._loadPointer.cEndTime,"start")),l?(l.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(y,"e",l.segmentIndex,0),this._loadPointer.segmentIndex=l.segmentIndex,this._loadPointer.chunkPos=l.pos,this._loadPointer.levelID=t,this._loadPointer.startTime=l.time):Dt.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime));l=0;this._loadPointer.init||(l=this.calculateVideoLoadTime(s,y,n),Ca&&(l=Math.min(1,l))),Aa&&(this._loadPointer.init?(this._loadPointer.segmentIndex=0,this._loadPointer.chunkIndex=0,this._loadPointer.chunkPos=n[0].seekable.pos[0],this._loadPointer.endPos=n[0].seekable.pos[1]):(h=null,l=gt.a.accAdd(this._loadPointer.startTime,l),this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?h=Ct.getGapPos(y,l,ma,"end"):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(h=Ct.getTSGapPos(y,l,"end")),h&&(this._loadPointer.endPos=h.pos,this._loadPointer.chunkIndex=h.chunkIndex))),Aa&&(!this.absTocbs&&this.curLoadSegment&&this.curLoadSegment.index==="e"+this._loadPointer.segmentIndex&&this.curLoadSegment.rate===t&&this.curLoadSegment.segment||(f=this.constructorSegmentInfo(n,y,ma),this.createSegmentProxy(ma,f),this.curLoadSegment.checkCreateSegment()),Dt.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos+" , loadType "+d),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos,d),this._loadPointer.init=!1):Dt.a.error("~~~~~~video Load error"+JSON.stringify(this._loadPointer)));var h=null,f=0;this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!Na||this._loadAudioPointer.init||(f=this.calculateAudioLoadTime(s,y)),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!Na||Ca||((h=Ct.getGapPos(y,this._loadAudioPointer.cEndTime,ba,"start"))?(h.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(y,"a",h.segmentIndex,0),this._loadAudioPointer.segmentIndex=h.segmentIndex,this._loadAudioPointer.chunkPos=h.pos,this._loadAudioPointer.levelID=t,this._loadAudioPointer.startTime=h.time):Dt.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!Na||(this._loadAudioPointer.init?(this._loadAudioPointer.segmentIndex=0,this._loadAudioPointer.chunkIndex=0,this._loadAudioPointer.chunkPos=r[0].seekable.pos[0],this._loadAudioPointer.endPos=r[0].seekable.pos[1]):(p=gt.a.accAdd(this._loadAudioPointer.startTime,f),(p=Ct.getGapPos(y,p,ba,"end"))&&(this._loadAudioPointer.endPos=p.pos,this._loadAudioPointer.chunkIndex=p.chunkIndex))),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!Na||(!this.absTocbs&&this.curLoadAudioSegment&&this.curLoadAudioSegment.index==="a"+this._loadAudioPointer.segmentIndex&&this.curLoadAudioSegment.rate===t&&this.curLoadAudioSegment.segment||(_=this.constructorSegmentInfo(r,y,ba),this.createSegmentProxy(ba,_),this.curLoadAudioSegment.checkCreateSegment()),Dt.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos+" , loadType "+u),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos,u),this._loadAudioPointer.init=!1):Dt.a.error("load audio point is error !!!!!!!")),this.absTocbs&&(this.absTocbs=!1)}else{if((a||(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH)&&o)&&Pi.clearRaiseLevelCount(),Aa){-1!==this.rangeETime&&this._loadPointer.startTime>=this.rangeETime&&Dt.a.info("loadPointer startTime >= rangeETime,this._loadPointer.startTime = "+this._loadPointer.startTime+"rangeETime"+this.rangeETime);var p=a?t:i,_=this.getFileList(p);if(!_)return void Dt.a.error("levelInfo and fileList is null ,bid = "+p);var g,y=_.levelInfo,n=_.vFList,p=null;Ca||(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?p=Ct.getGapPos(y,this._loadPointer.cEndTime,ma,"start"):this.videoFormatType!==Nt.a.TS&&this.videoFormatType!==Nt.a.FTS||(p=Ct.getTSGapPos(y,this._loadPointer.cEndTime,"start")),p?(p.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(y,"e",p.segmentIndex,0),this._loadPointer.segmentIndex=p.segmentIndex,this._loadPointer.chunkPos=p.pos,a?(Dt.a.info("ABS video switch  bid from "+this._loadPointer.levelID+" to "+t),this._loadPointer.levelID=t):this._loadPointer.levelID=i,this._loadPointer.startTime=p.time):Dt.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime)),this._loadPointer.init?(this._loadPointer.segmentIndex=0,this._loadPointer.chunkIndex=0,this._loadPointer.chunkPos=n[0].seekable.pos[0],this._loadPointer.endPos=n[0].seekable.pos[1]):(_=null,i=this.calculateVideoLoadTime(s,y,n),Ca&&(i=Math.min(1,i)),i=gt.a.accAdd(this._loadPointer.startTime,i),this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?_=Ct.getGapPos(y,i,ma,"end"):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(_=Ct.getTSGapPos(y,i,"end")),_&&(this._loadPointer.endPos=_.pos,this._loadPointer.chunkIndex=_.chunkIndex)),a?(Fa.levelID=this._loadPointer.levelID,Fa.segmentIndex=p.segmentIndex,Fa.chunkIndex=p.chunkIndex,Fa.time=this._loadPointer.startTime,Fa.tvid=this.tvid,Ha=[],Dt.a.info("load ABS switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)+" switchVideoPointer "+JSON.stringify(Fa))):Dt.a.info("load ABS NO switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)),this.curLoadSegment&&this.curLoadSegment.index==="e"+this._loadPointer.segmentIndex&&this.curLoadSegment.rate===this._loadPointer.levelID&&this.curLoadSegment.segment||(g=this.constructorSegmentInfo(n,y,ma),this.createSegmentProxy(ma,g),this.curLoadSegment.checkCreateSegment()),Dt.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos+" , loadType "+d),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos,d),this._loadPointer.init=!1):Dt.a.error("_loadPointer.endPos <= _loadPointer.chunkPos")}this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||!Na||(g=o?t:this._loadAudioPointer.levelID,(d=this.getFileList(g))&&(y=d.levelInfo,r=d.aFList),g=this.calculateAudioLoadTime(s,y),d=null,Ca||(s=this._loadAudioPointer.cEndTime,o&&(s=Math.min(this._loadAudioPointer.cEndTime,this._loadPointer.cEndTime),s=Math.max(s,this._readAudioPointer.time)),(d=Ct.getGapPos(y,s,ba,"start"))?(d.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(y,"a",d.segmentIndex,0),this._loadAudioPointer.segmentIndex=d.segmentIndex,this._loadAudioPointer.chunkPos=d.pos,o&&(this._loadAudioPointer.levelID=t),this._loadAudioPointer.cEndTime=this._loadAudioPointer.startTime=d.time):Dt.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)),this._loadAudioPointer.init?(this._loadAudioPointer.segmentIndex=0,this._loadAudioPointer.chunkIndex=0,this._loadAudioPointer.chunkPos=r[0].seekable.pos[0],this._loadAudioPointer.endPos=r[0].seekable.pos[1]):(g=gt.a.accAdd(this._loadAudioPointer.startTime,g),(g=Ct.getGapPos(y,g,ba,"end"))&&(this._loadAudioPointer.endPos=g.pos,this._loadAudioPointer.chunkIndex=g.chunkIndex)),o?(Dt.a.info("ABS Audio switch  bid from "+this.curLoadAudioSegment.rate+" to "+t),Ua.levelID=this._loadAudioPointer.levelID,Ua.segmentIndex=d.segmentIndex,Ua.chunkIndex=(Ca?this._loadAudioPointer:d).chunkIndex,Ua.time=this._loadAudioPointer.startTime,Ua.tvid=this.tvid,Dt.a.info("load ,ABS Audio switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)+" switchAudioPointer "+JSON.stringify(Ua))):Dt.a.info("ABS Audio No switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)),this.curLoadAudioSegment&&this.curLoadAudioSegment.index==="a"+this._loadAudioPointer.segmentIndex&&this.curLoadAudioSegment.rate===this._loadAudioPointer.levelID&&this.curLoadAudioSegment.segment||(y=this.constructorSegmentInfo(r,y,ba),this.createSegmentProxy(ba,y),this.curLoadAudioSegment.checkCreateSegment()),Dt.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos+" , loadType "+u),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos,u),this._loadAudioPointer.init=!1):Dt.a.error("_loadAudioPointer.endPos <= _loadAudioPointer.chunkPos"))}Ca=!1}else Ca=Ca&&!1}else Dt.a.warn("m3u8 is null,need call feed first ~~ ,bidrate = "+t)}},{key:"buffer",get:function(){var e=0;return this._readPointer&&this._loadPointer&&this._loadPointer.cEndTime>=this._readPointer.time&&(e=gt.a.accSub(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||this._readAudioPointer&&this._loadAudioPointer&&this._loadAudioPointer.cEndTime>=this._readAudioPointer.time&&(e=Math.min(gt.a.accSub(this._loadAudioPointer.cEndTime,this._readAudioPointer.time),e)),e}},{key:"reset",value:function(){if(Dt.a.info("~~~dashMove reset ~~~"),this.videoDone=!1,this.audioDone=!1,this.levelMgr)for(var e in this.levelMgr){var t=this.levelMgr.get(e),i=null;if(t&&(this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?i=Ct.getFilesInfo(t,ma):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(i=t.m3u8)),i)for(var n=0;n<i.length;n++)this.changeSegmentState(t,"e",n,1);if((this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH)&&t){var r=Ct.getFilesInfo(t,ba);if(r)for(var a=0;a<r.length;a++)this.changeSegmentState(t,"a",a,1)}}null!==this.dashInfo&&(qr.a.clearEvent(this.tvid),this.event=null,this.dashInfo.close(),this.dashInfo=null),null!==this._absStrategy&&this._absStrategy.close(),(this._absStrategy=null)!==this._readPointer&&(this._readPointer=null),null!==this._readAudioPointer&&(this._readAudioPointer=null),null!==this._loadPointer&&(this._loadPointer=null),null!==this._loadAudioPointer&&(this._loadAudioPointer=null),null!==this._p2pLoaderPointer&&(this._p2pLoaderPointer=null),null!==this.levelMgr&&this.levelMgr.clear(),this.levelMgr=null,this.curLoadAudioSegment&&(this.curLoadAudioSegment=null),this.curLoadSegment=null,this._levelID=0,this.absTocbs=!1,this.curFeedBid=0,clearTimeout(this.buffTimer)}},{key:"errFun",value:function(e){Dt.a.error("new segment return err"+e)}},{key:"createSegmentProxy",value:function(e,t){switch(t.videoType){case Nt.a.FTS:this.curLoadSegment=new wa(t);break;case Nt.a.TS:this.curLoadSegment=new Ia(t);break;case Nt.a.DASH:case Nt.a.M4S:e===ma?this.curLoadSegment=new Ra(t):this.curLoadAudioSegment=new Ra(t);break;default:Dt.a.error("mediaInfo.videoType is invaild when  createSegmentProxy, "+t.videoType)}}},{key:"constructorSegmentInfo",value:function(e,t,i){var n,r=null,a=ma;i===ma?(n=this._loadPointer,r="e"):i===ba?(n=this._loadAudioPointer,r="a",a=ba):"p2p"===i&&(n=this._p2pLoaderPointer,r="e");var o=n.chunkPos,s=n.startTime;-1===this._levelID&&(qa=Date.now());var c=e[n.segmentIndex].file_name,d=void 0!==e[n.segmentIndex].realIdx?e[n.segmentIndex].realIdx:n.segmentIndex,u=0,l=0;this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(u=e[n.segmentIndex].size,l=(h=e[n.segmentIndex].seekable.pos)[h.length-1]):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(u=parseInt(e[n.segmentIndex].size),l=(f=e[n.segmentIndex].pos)[f.length-1].ePos);i=e[n.segmentIndex].sourceID;vt.isHTTPS&&c&&(c=c.replace(/^http:/gi,"https:"));var h=0,h=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getDuratioSecond(t,a,n.segmentIndex):Ct.getTSDuratioSecond(t,n.segmentIndex),f=null;return this.videoFormatType!==Nt.a.DASH&&this.videoFormatType!==Nt.a.M4S||"e"!==r||(f=e[n.segmentIndex].seekable.pos),{levelId:n.levelID,tvid:this.tvid,dispatchUrl:c,startTime:s,endTime:h,vid:t.vid,index:r+n.segmentIndex,size:u,startPos:o,endPos:l,vids:this.dashInfo.vidList,videoType:this.videoFormatType,albumID:_t.a.aid,trackerType:a,sourceID:i,loadInfo:{},seekable:f,realSegIdx:r+d}}},{key:"changeSegmentState",value:function(e,t,i,n){var r;e&&(r=null,i>=(r=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getFilesInfo(e,"a"===t?ba:ma):e.m3u8).length||(r=Ta(r[i].sourceID,e.vid,t+(void 0!==r[i].realIdx?r[i].realIdx:i)),(r=hi.getSegment(r))&&(r.state=n,Dt.a.info("changeSegmentState "+t+i+" bid: "+e.bid+" status : "+r.state))))}},{key:"getSizeList",value:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.levelMgr.get(e[i]);if(void 0===n)break;var r;(r=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getNextChunkInfo(n,ma,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex):Ct.getTSNextChunkInfo(n,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex))?t.push(r.ePos-r.sPos):t.push(0)}return t}},{key:"reportData",value:function(e,t){if(this.curLoadSegment&&this._absStrategy&&_t.a.absOpen&&-1===this._levelID&&!(t===Da&&Date.now()-qa<3e4||15e3<=Date.now()-Wa)){qa=Date.now(),Da=t;var i=_t.a.cdnSize,n=_t.a.cdnCostTime,r=null,a=null,o=_t.a.cdnSize=_t.a.cdnCostTime=0,s=parseInt(this.curLoadSegment.index.slice(1)),c=this.levelMgr.get(e);(a=void 0!==c?this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(r=Ct.getFilesInfo(c,ma),Ct.getCurChunkInfo(c,ma,s,t)):(r=c.m3u8,Ct.getCurTSChunkInfo(c,s,t)):a)&&(o=a.ePos-a.sPos);a=0;if(!(r&&(a=Za(r,s,t))>=c.chunkNum-1)){for(var d=[],u=[],l=0;l<this.dashInfo.bitRateList.length;l++){var h=this.levelMgr.get(this.dashInfo.bitRateList[l]);h&&(d.push(this.dashInfo.bitRateList[l]),u.push(h.vsize))}for(var r=this.getBuffer(),f=za,p=[],_=Math.min(16,Ha.length);p.length<_;)p.push(Math.floor(1e3*Ha[f++%_]).toString());s=_t.a.getReBufTimeFunc(),t=this.getSizeList(d);0!==t.length&&(e={index:a,loadTime:n,rebuffTime:s,totalSizeList:u,bidList:d,chunkSizeList:t,chunk_count:c.chunkNum,lastChunkSize:o,duration:c.duration,buffer_level:r,size:c.vsize,loadSize:i,bid:e,bufferArr:p,bufferUpdateStep:2e3},this._absStrategy.reportData(e))}}}},{key:"checkCDNLoad",value:function(){ka.running||this.curLoadSegment&&this.curLoadSegment.isOnP2P||this.videoDone||(Aa=!0),this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||xa.running||this.audioDone||(Na=!0)}},{key:"getBuffer",value:function(){var e=this.getPlayBuffer(),e=gt.a.accAdd(e,this.buffer);return-1===this._levelID&&(clearTimeout(this.buffTimer),this.buffTimer=setTimeout(this.getBuffer.bind(this),2e3),Ha.length<16?Ha.push(e):Ha[za++%16]=e),e}},{key:"checkAudioLoadDone",value:function(e){var t;this.audioDone||Ca||this.videoFormatType!==Nt.a.M4S&&this.videoFormatType!==Nt.a.DASH||(0<this.rangeETime&&this._loadAudioPointer.cEndTime>=this.rangeETime?(this.audioDone=!0,Na=!1):(t=Ct.getFilesInfo(e,ba),e&&(t=t[e=t.length-1].size,this._loadAudioPointer.segmentIndex>=e&&this.curLoadAudioSegment&&this.curLoadAudioSegment.lastCEPos>=t?(this.audioDone=!0,Na=!1):this.audioDone=!1)))}},{key:"checkVideoLoadDone",value:function(e,t){this.videoDone||Ca||!e||(0<this.rangeETime&&this._loadPointer.cEndTime>=this.rangeETime?(this.videoDone=!0,Aa=!1,Dt.a.info("cEndTime >= rangeTime or duration,videoDone!!!!, cEndTime "+this._loadPointer.cEndTime+",duration "+e.duration+",rangeEndTime "+this.rangeETime)):(t=t[e=t.length-1].size,this.curLoadSegment&&parseInt(this.curLoadSegment.index.slice(1))>=e&&this.curLoadSegment.lastCEPos>=t?(this.videoDone=!0,Aa=!1,Dt.a.info("segmentIndex and  chunkIndex is Max,videoDone!!!! ")):this.videoDone=!1))}},{key:"checkP2PLoad",value:function(e,t,i,n){if(this.videoFormatType!==Nt.a.FTS&&"off"!==pt.j.limitP2P&&vt.canP2P&&!this.videoDone){this._p2pLoaderPointer||(this._p2pLoaderPointer=new Ma,this._p2pLoaderPointer.levelID=i);var r=!1;if(r=(r=Ca||!this.curLoadSegment||"e"+this._p2pLoaderPointer.segmentIndex!==this.curLoadSegment.index||this._p2pLoaderPointer.levelID!==i||this._p2pLoaderPointer.levelID!==n||this.absTocbs||this.curLoadSegment.done?!0:r)&&this.videoFormatType===Nt.a.DASH&&this.curLoadSegment&&"e0"===this.curLoadSegment.index?!1:r){var a=this._loadPointer.cEndTime,o=!1,s=!1;if(-1!==this._levelID)this._p2pLoaderPointer.levelID===i&&!this.absTocbs||(Dt.a.info("[P2P loader],CBS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+i),this._p2pLoaderPointer.levelID=i,this.videoFormatType===Nt.a.DASH&&(this._loadPointer.init=!0),this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(a=this._readPointer.time,Dt.a.info("CBS video switch bid, time "+a)):a=Math.max(this.rangeSTime,_t.a.getBufferFunc().end),s=!0,ka.reset());else if(-1===this._levelID)if(n!==i)if(o=this._loadPointer.cEndTime>this._readPointer.time||Ea?!0:o)ka.reset(),this.updateCEPos(ma,n,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),Dt.a.info("[P2P loader],ABS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+i),this._p2pLoaderPointer.levelID=i,this.videoFormatType===Nt.a.DASH&&(this._loadPointer.init=!0),Pi.clearRaiseLevelCount();else{if(!Ca&&this.curLoadSegment&&!this.curLoadSegment.done)return;this._p2pLoaderPointer.levelID=n;var c=this.getFileList(this._p2pLoaderPointer.levelID);c&&(e=c.levelInfo,t=c.vFList)}else this._p2pLoaderPointer.levelID!==i&&(this._p2pLoaderPointer.levelID=i);this.videoDone||(r=null,(r=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getGapPos(e,a,ma,"start"):Ct.getTSGapPos(e,a,"start"))?(n=null,n=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?t[r.segmentIndex].seekable:t[r.segmentIndex],c=0,this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(c=n.pos.length-2,this._p2pLoaderPointer.endPos=n.pos[c+1]):(c=n.pos.length-1,this._p2pLoaderPointer.endPos=n.pos[c].ePos),this._p2pLoaderPointer.chunkIndex=c,this._p2pLoaderPointer.segmentIndex=r.segmentIndex,this._p2pLoaderPointer.startTime=r.time,this._p2pLoaderPointer.chunkPos=r.pos,s&&(this._readPointer.bid=this._p2pLoaderPointer.levelID,this._readPointer.segmentIndex=this._p2pLoaderPointer.segmentIndex,this._readPointer.chunkIndex=r.chunkIndex,this._readPointer.time=this._p2pLoaderPointer.startTime,this.videoFormatType===Nt.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=r.pos,this._loadPointer.cEndTime=r.time,Dt.a.info("[P2P load] , p2p switch  bid , readPointer"+JSON.stringify(this._readPointer)+", cEndTime "+this._loadPointer.cEndTime)),o&&(Fa.levelID=this._p2pLoaderPointer.levelID,Fa.segmentIndex=this._p2pLoaderPointer.segmentIndex,Fa.chunkIndex=r.chunkIndex,Fa.time=this._p2pLoaderPointer.startTime,Fa.tvid=this.tvid,this._loadPointer.cEndTime=r.time,Dt.a.info("[P2P loader],ABS switch  bid , switchVideoPointer "+JSON.stringify(Fa))),!this.absTocbs&&this.curLoadSegment&&this.curLoadSegment.index==="e"+this._p2pLoaderPointer.segmentIndex&&this.curLoadSegment.rate===this._p2pLoaderPointer.levelID&&this.curLoadSegment.segment||(e=this.constructorSegmentInfo(t,e,"p2p"),this.createSegmentProxy(ma,e),this.curLoadSegment.checkCreateSegment()),this.absTocbs&&this.videoFormatType===Nt.a.TS&&(this.absTocbs=!1),Dt.a.info("[P2P load] , ~~~~~~video Load point"+JSON.stringify(this._p2pLoaderPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this.curLoadSegment.p2pLoadSegment()):Dt.a.error("[P2P loader], find start Point is null,time "+a+",bid "+i))}}}},{key:"hasInitData",value:function(e,t){var i=this.getFileList(e);if(t===ma){var n=Ta(i.vFList[0].sourceID,i.levelInfo.vid,"e0"),e=Ct.getChunkSEPos(i.levelInfo,ma,0,0),n=hi.getSegment(n);if(e&&n&&n.hasData(e.sPos,e.ePos-e.sPos))return!0}else if(t===ba){t=Ta(i.aFList[0].sourceID,i.levelInfo.vid,"a0"),i=Ct.getChunkSEPos(i.levelInfo,ba,0,0),t=hi.getSegment(t);if(i&&t&&t.hasData(i.sPos,i.ePos-i.sPos))return!0}return!1}},{key:"clearLoadPint",value:function(){this._loadPointer=null}},{key:"algorithmDes",get:function(){return-1===this._levelID&&this._absStrategy?this._absStrategy.algorithmDes:"absClose"}},{key:"bandwidth",get:function(){return ka&&ka.running?1e3*_t.a.cdnSpeed:_t.a.downSpeed}},{key:"updateAuthorPointer",value:function(){_t.a.dashUpdateVideoTime=this._loadPointer.startTime,Dt.a.info("Authentication failed, update dash ,notice pcw time "+_t.a.dashUpdateVideoTime)}},{key:"calculateVideoLoadTime",value:function(e,t,i){var n=0,n=this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?Ct.getDuratioSecond(t,ma,this._loadPointer.segmentIndex):Ct.getTSDuratioSecond(t,this._loadPointer.segmentIndex),n=gt.a.accSub(n,this._loadPointer.cEndTime);n<=0&&this._loadPointer.segmentIndex<i.length-1&&(n=1);n=Math.min(e,n);return-1!==this.rangeETime&&this._loadPointer.cEndTime+n>=this.rangeETime&&(n=gt.a.accSub(this.rangeETime,this._loadPointer.cEndTime),Dt.a.warn("fix loadDuration ~~~,loadPointerTime = "+this._loadPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),n=this.videoFormatType===Nt.a.FTS?1:n}},{key:"calculateAudioLoadTime",value:function(e,t){t=Ct.getDuratioSecond(t,ba,this._loadAudioPointer.segmentIndex),t=gt.a.accSub(t,this._loadAudioPointer.cEndTime),t=Math.max(1,Math.min(e,t));return-1!==this.rangeETime&&this._loadAudioPointer.cEndTime+t>=this.rangeETime&&(t=gt.a.accSub(this.rangeETime,this._loadAudioPointer.cEndTime),Dt.a.info("fix audioLoadDuration ~~~_loadAudioPointer = "+this._loadAudioPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),t}},{key:"updateCEPos",value:function(e,t,i){var n,r=this.levelMgr.get(t);r&&(n=null,this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?n=Ct.getGapPos(r,i,e,"start"):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(n=Ct.getTSGapPos(r,i,"start")),n&&(e===ma&&this.curLoadSegment&&this.curLoadSegment.cePos>n.pos&&(Dt.a.info("updateCEPos,LevelID  "+t+" before "+this.curLoadSegment.lastCEPos+" now "+n.pos+" point "+JSON.stringify(n)),this.curLoadSegment.updateCePos(n.pos)),e===ba&&this.curLoadAudioSegment&&this.curLoadAudioSegment.cePos>n.pos&&this.curLoadAudioSegment.updateCePos(n.pos)))}},{key:"getFileList",value:function(e){var t=this.levelMgr.get(e);if(t){var i=null,e=null;return this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?(i=Ct.getFilesInfo(t,ma),e=Ct.getFilesInfo(t,ba)):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(i=t.m3u8),{vFList:i,aFList:e,levelInfo:t}}return null}},{key:"checkData",value:function(e,t,i,n){var r=this.levelMgr.get(e),a=null;this.videoFormatType===Nt.a.DASH&&t++,this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?a=Ct.getFilesInfo(r,ma):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(a=r.m3u8);var o=null,s=null;this.videoFormatType===Nt.a.DASH&&0<=(s=gt.a.searchPosIndex(i,a[t].seekable.pos))&&(o=Ct.getChunkSEPos(r,ma,t,s))&&Dt.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", index "+s+", startPos "+o.sPos+",endPos "+o.ePos);r=Ta(a[t].sourceID,r.vid,"e"+(void 0!==a[t].realIdx?a[t].realIdx:t)),a=hi.getSegment(r);a&&(r=Math.min(188,n-i),n=a.getData(i,r),Dt.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+i+",endPos "+(i+r)),Dt.a.log(n),o&&(n=o.ePos-188,a=a.getData(n,188),Dt.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+n+",endPos "+o.ePos),Dt.a.log(a))),hi.destroy()}},{key:"Log",get:function(){var e=this.curLoadSegment?this.curLoadSegment.rate.toString():"null",t="P2PLog -- "+pt.l.version+"--LevelID--"+e+"\r\n";t+=" [ cdnSpeed : "+gt.a.trimNumber(_t.a.cdnSpeed,1e5)+"K , cdnSize : "+gt.a.trimNumber(Qi.cdnSize/1048576)+"M , loading : "+ka.running+" ] \r\n [ p2pSpeed : "+gt.a.trimNumber(_t.a.downSpeed/1024,1e5)+"K , p2pSize : "+gt.a.trimNumber(Qi.p2pSize/1048576)+"M , p2pLoadRate : "+(Qi.p2pSize/(Qi.cdnSize+Qi.p2pSize)*100).toFixed(2)+"% ] \r\n [ upSpeed  : "+gt.a.trimNumber(_t.a.upSpeed/1024,1e5)+"K , upSize  : "+gt.a.trimNumber(Qi.upSize/1048576)+"M ] \r\n < downMax : "+Math.ceil(_t.a.downMax/1024)+"K ,  upMax : "+Math.ceil(_t.a.upMax/1024)+"K >\r\n";var i=this.levelMgr.get(this._readPointer.bid),e=null;this.videoFormatType===Nt.a.M4S||this.videoFormatType===Nt.a.DASH?e=Ct.getFilesInfo(i,ma):0<=this.videoFormatType.indexOf(Nt.a.TS)&&(e=i.m3u8);e=Ta(e[this._readPointer.segmentIndex].sourceID,i.vid,"e"+(void 0!==e[this._readPointer.segmentIndex].realIdx?e[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)),e=hi.getSegment(e);return e&&(t+=" RD | "+e.toDataString(this._readPointer.chunkPos)+"\r\n"),this.curLoadSegment.segment&&(t+=" LD | "+this.curLoadSegment.segment.toDataString(-1)+"\r\n",t+=(void 0!==this.curLoadSegment.segment.vidsDesc?this.curLoadSegment.segment.vidsDesc:" [ ]")+"\r\n"),(t+=_t.a.p2pLog)+"\r\n"}},{key:"clearData",value:function(e){hi.destroy()}}]),Ga);function Ga(){f()(this,Ga),this.dashInfo=null,this.levelMgr=null,this._levelID=0,this._absStrategy=null,this._readPointer=null,this._loadPointer=null,this._readAudioPointer=null,this._loadAudioPointer=null,this._p2pLoaderPointer=null,this.curLoadSegment=null,this.curLoadAudioSegment=null,this.videoFormatType=null,this.rangeSTime=-1,this.rangeETime=-1,this.audioDone=!1,this.videoDone=!1,this.absTocbs=!1,this.event=null,this.curFeedBid=0,this.buffTimer=-1}function Qa(){f()(this,Qa),this.reset()}function Ka(){f()(this,Ka),this.reset()}function $a(){f()(this,$a),this.reset()}function Za(e,t,i){for(var n=0,r=0;r<=t;r++)r<t?e[r].hasOwnProperty("seekable")?n+=e[r].seekable.pos.length-1:n+=e[r].pos.length:n+=i;return n}var Xa=0,Ja=(c()(eo,[{key:"init",value:function(e){_t.a.platform=e.platform||1,Dt.a.logTarget=e.logger,_t.a.getBufferFunc=e.getBufferFunc,_t.a.getReBufTimeFunc=e.reBufTimeFunc,_t.a.switchAutoDef=e.switchAutoDef,_t.a.canSwitchVd=e.canSwitchVd,_t.a.startPlayed=e.startPlayed,_t.a.sendPingBack=e.sendPingBack,_t.a.getUserInfoFunc=e.getUserInfo,_t.a.noticeDataArrived=e.noticeDataArrived,_t.a.checkIsMobius=e.checkIsMobius,_t.a.noticeRefreshMovieData=e.noticeRefreshMovieData,_t.a.platform===mt&&(pt.j.upLoad=!1)}},{key:"feed",value:function(e,t,i,n){i?(Dt.a.info("DataProvider.feed current"),this.currentList.feed(e,t,n),this.nextListFeedDone&&this.nextList.clearLoadPint()):(Dt.a.info("DataProvider.feed next"),this.nextList.reset(),this.nextList.feed(e,t,n),this.nextListFeedDone=!0),_t.a.authorStatus!==Er.a.LoaderState_405&&(_t.a.authorStatus="")}},{key:"setBitrate",value:function(e,t){this.currentList.tvid===e?(Dt.a.info("DataProvider set current bitrate : "+t),-1!==this.currentList._levelID&&-1===t?(Dt.a.info(" CBS  to ABS !!!!!!!!!!"),this.currentList.cbsToAbs=!0):this.currentList.cbsToAbs=!1,-1===this.currentList._levelID&&-1!==t?(Dt.a.info(" ABS  to CBS!!!!!!!!!!"),this.currentList.absTocbs=!0):this.currentList.absTocbs=!1,this.currentList.levelID=t,this.currentList.checkBitRate(t),this.currentList.resetDoneStatus(),_t.a.absStatus=-1===t?1:0):(Dt.a.info("DataProvider set next move bitrate : "+t),this.nextList.levelID=t,this.nextList.checkBitRate(t),this._run())}},{key:"_run",value:function(){var e,t;clearTimeout(this._runnerStep),_t.a.authorStatus===Er.a.LoaderState_405||qt.errorFragment||(e=_t.a.getBufferFunc(),t=0,t=+(t=this.currentList.videoFormatType===Nt.a.M4S||this.currentList.videoFormatType===Nt.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len).toFixed(3),_t.a.pcwBuffer=t,t=gt.a.accAdd(t,this.currentList.buffer),this.currentList.done?this.nextListFeedDone&&(t+=this.nextList.buffer,this.nextList.check(t)):this.currentList.check(t)),_t.a.onLog&&10<=++Xa&&(console.info(this.currentList.Log),Xa=0),this._runnerStep=setTimeout(this._run.bind(this),100)}},{key:"seek",value:function(e,t){qt.errorFragment=null,qt.errorStage="",qt.loader.count=0,qt.dispatcher.count=0,t=t&&+t.toFixed(3),this.currentList.tvid===e?(Dt.a.info("DataProvider.seek currentList tvid = "+e+" time = "+t),this.nextListFeedDone&&this.nextList.clearLoadPint(),this.currentList.seek(t),this._run()):this.nextList.tvid===e&&(Dt.a.info("DataProvider.seek nextList tvid = "+e+" time ="+t),this.currentList.reset(),e=this.currentList,this.currentList=this.nextList,this.nextList=e,this.nextListFeedDone=!1,(t&&t!==this.currentList.rangeSTime||!this.currentList._readPointer)&&(this.currentList.seek(t),this._run())),Qi.start()}},{key:"read",value:function(e){return this.currentList.read(e)}},{key:"setDefList",value:function(e,t){!t||t.length<0||(this.currentList.tvid===e?this.currentList:this.nextList).setDefList(t)}},{key:"error",get:function(){return qt.errorFragment?qt.errorStage:""}},{key:"stats",get:function(){var e=function(){if(ka.running||xa.running){var e=0<_t.a.cdnSpeed?_t.a.cdnSpeed:0<_t.a.cdnCostTime?_t.a.cdnSize/_t.a.cdnCostTime:0;return{domain:_t.a.cdnLoadDoMain,bw:1e3*e,bps:1e3*e}}return{domian:"",bw:_t.a.downSpeed,bps:0}}();return{bandwidth:e.bw,bps:e.bps,cdnHost:e.domain,netProtocol:vt.isHTTPS?"https":"http"}}},{key:"algorithmDes",get:function(){return this.currentList.algorithmDes}},{key:"close",value:function(){Dt.a.info("~~dataProvider close,clear data~~"),clearTimeout(this._runnerStep),this.currentList.reset(),this.nextList.reset(),this.nextListFeedDone=!1,qt.errorFragment=null,qt.errorStage="",qt.loader.count=0,qt.dispatcher.count=0}},{key:"getBuffTime",value:function(){var e=this.currentList.buffer,t=0;return this.currentList._readPointer&&(t=this.currentList._readPointer.time),{start:t=this.currentList._readAudioPointer?Math.min(this.currentList._readAudioPointer.time,t):t,length:e}}},{key:"refreshLoadRange",value:function(e,t){this.currentList.tvid===e&&this.currentList.refreshLoadRange(t)}},{key:"checkData",value:function(e,t,i,n){this.currentList.checkData(e,t,i,n)}},{key:"recover",value:function(e){this.currentList.clearData(e)}}],[{key:"version",get:function(){return pt.l.version}}]),eo);function eo(){f()(this,eo),Et.load(),this.currentList=new Ya,this.nextList=new Ya,this.nextListFeedDone=!1}window.DataProvider=Ja;var to=window.QIYI_HTML5_P2P_PlayBack_0002=Ja,io=d(406);var no=null,ro=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).absing=!1,e.ABS_LEVEL_ID=-1,e.LOG_TAG="[P2PConnector]",e._initd=!1,e.__p=new to,e._closed=!1,e._currentTvid=null,e._nextTvid=null,e._loaderBuff=new ce,e._getBufferFunc=null,e._reBufTimeFunc=null,e._refreshTvid="",e}return c()(r,[{key:"isClosed",get:function(){return this._closed}},{key:"buffer",get:function(){var e;return this.__p&&(e=this.__p.getBuffTime(),this._loaderBuff.start=e.start,this._loaderBuff.end=e.start+e.length),this._loaderBuff}},{key:"stats",get:function(){return this.__p?this.__p.stats:{bandwidth:0,bps:0,cdnHost:"",netProtocol:""}}},{key:"algot",get:function(){return this.__p?this.__p.algorithmDes:""}},{key:"error",get:function(){if(this.__p){var e=me.a.UNKNOWN;switch(this.__p.error){case"dispatch":e=me.a.DATA_P2P_DISPATCH;break;case"load":e=me.a.DATA_P2P_LOAD;break;case"loadAccessErr":e=me.a.DATA_P2P_LOAD_ACCESS;break;case"memoryAllocErr":e=me.a.DATA_P2P_MEMORY_ALLOC;break;case"authorFailed":e=me.a.DATA_P2P_AUTH;break;case"loadDataRangeError":e=me.a.DATA_P2P_RANGE_ERROR;break;case"dataNULL":e=me.a.DATA_P2P_DATA_NULL}if(e!==me.a.UNKNOWN)return new _e.a(ge.a.CRITICAL,ye.a.LOADER,e,"")}return null}},{key:"init",value:function(e){var t;!this._initd&&this.__p&&(this._getBufferFunc=e.getBufferFunc,this._reBufTimeFunc=e.reBufTimeFunc,e={logger:Y.a,getBufferFunc:function(){return t._getBufferFunc()},reBufTimeFunc:function(){return t._reBufTimeFunc()},startPlayed:e.startPlayed,canSwitchVd:e.canSwitchVd,checkIsMobius:e.checkIsMobius,getUserInfo:e.getUserInfo,sendPingBack:e.sendPingBack,switchAutoDef:e.switchAutoDef,noticeRefreshMovieData:function(e){t._refreshTvid!==e&&(t._refreshTvid=e,t.emit("AE",e))},noticeDataArrived:function(){t.emit("DR")}},Y.a.log("".concat((t=this).LOG_TAG," p2p init")),this.__p.init(e))}},{key:"setBitrate",value:function(e,t){this.__p&&(Y.a.log("".concat(this.LOG_TAG," setBitrate ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setBitrate(e,t))}},{key:"feed",value:function(e,t,i,n){var r,a,o;this.__p&&n.bid&&n.dataFlow?this._nextTvid==e?(Y.a.log("".concat(this.LOG_TAG," feed switch: ").concat(this._currentTvid," -> ").concat(e)),this._currentTvid=this._nextTvid,this._nextTvid=null):(r=!this._currentTvid||this._currentTvid===e,a=n.bid,o=n.type,Y.a.log("".concat(this.LOG_TAG," feed ").concat(e,"(").concat(r?"cur":"next","-").concat(i,"), range=[").concat(t,"], bid=").concat(a,", type=").concat(o)),this.__p.feed(e,t,r,n),i?this._currentTvid=e:this._nextTvid=e):Y.a.log("".concat(this.LOG_TAG," feed error, p2p is null or data error"))}},{key:"seek",value:function(e,t){var i=this.hasFeed_(e);this.__p&&i&&(Y.a.log("".concat(this.LOG_TAG," seek ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.seek(e,t))}},{key:"read",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=this.hasFeed_(e);return this.__p&&e?this.__p.read(t):null}},{key:"refreshLoadRange",value:function(e,t){var i=this.hasFeed_(e);this.__p&&i&&(Y.a.log("".concat(this.LOG_TAG," refresh range ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.refreshLoadRange(e+"",t))}},{key:"checkData",value:function(e,t,i,n){if(this.__p)try{this.__p.checkData(e,t,i,n)}catch(e){Y.a.log("".concat(this.LOG_TAG," checkData failure: ").concat(e.stack||e.message))}}},{key:"checkSwitch",value:function(e){this.__p&&this._currentTvid!=e&&this._nextTvid==e&&(this._currentTvid=this._nextTvid,this._nextTvid=null,this.__p.seek(e),this.absing&&this.setBitrate(e,this.ABS_LEVEL_ID))}},{key:"recover",value:function(e){this.__p&&(Y.a.log("".concat(this.LOG_TAG," recover, time=").concat(e)),this.__p.recover(e))}},{key:"close",value:function(){var e=!!this._currentTvid||!!this._nextTvid;this.__p&&!this.isClosed&&e&&(Y.a.log("".concat(this.LOG_TAG," close")),this.__p.close(),this._closed=!0,this._currentTvid=null,this._nextTvid=null)}},{key:"setDefList",value:function(e,t){var i=this.hasFeed_(e);this.__p&&i&&(Y.a.log("".concat(this.LOG_TAG," setDefList, length=").concat(t.length,", close=").concat(this._closed,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setDefList(e,t),this._refreshTvid="")}},{key:"hasFeed_",value:function(e){return this._currentTvid==e||this._nextTvid==e}},{key:"getPosMarkById_",value:function(e){var t="~~";return null!=e&&""!=e&&(this._currentTvid===e?t="current":this._nextTvid===e&&(t="next")),t}}]),r}(Ie.EventEmitter),ao=d(417);function oo(e,t,i){var n=e.length;if(n-1<t||t===n-1&&i)return Y.a.log("eof by loader end, ".concat(t,"-").concat(n)),!0;if(!i)return!1;i=e[t+1],e=!i.enabled;return e&&Y.a.log("eof by next disable, ".concat(t,"-").concat(n,"-").concat(i.enabled)),e}G=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},K=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var o;f()(this,a),(o=r.call(this,Object.assign(Object.assign({},e),{pkg:ao,watch:["manifest","loader","renderer"]}))).mode=te.P2P,o.$TAG="P2PLoader",o._p2p=null,o._tvid="",o._timeRange=null,o._eof=!1,o._eod=!1,o.curVideoEndTime_=null,o.curAudioEndTime_=null,o.tempDefList_=null,o.baseLog_="",o.tickTimer_=new We.a(function(){return o.tick_()}),o.onDataArrived_=function(){o._pumpLoader()},o.onAuthExpired_=function(e){var t=o.$krt.params.dynamic.noticeRefreshMovieData;o._tvid==e&&(o.$silenced||t())},o.onKrlPreError_=function(e){var t,i,n,r,a=o.$manifestArtifact.manifestType;o.$silenced||(a===Ke.HLS&&e.category===ye.a.MUX?e.data[1]&&e.data[1].meta&&(t=(i=e.data[1]).startByte,r=i.endByte,i=(n=e.data[1].meta).level,n=n.fragIdx,o._p2p.checkData(i,n,t,r)):a!==Ke.DASH_AV1&&a!==Ke.DASH_VP9||e.code!==me.a.MEDIA_VIDEO_ERROR&&e.code!==me.a.MEDIA_SOURCE_OPERATION_FAILED&&e.code!==me.a.MEDIA_SOURCE_OPERATION_THREW||!o.lastReadMainSegment_||(a=(r=o.lastReadMainSegment_).startByte,e=r.endByte,o._p2p.checkData(r.levelId,r.fragIdx,a,e=200<e-a?a+200:e)))};var t,i=(t=!0,null==no&&(t=!1,no=new ro),{isCache:t,sdk:no}),t=i.sdk,i=i.isCache;return o._ctx=e.runtime.ctx,o._p2p=t,i||o._initP2P(),o._bind(),o.tickTimer_.scheduleRepeated(o.$silenced?.5:.1),o}return c()(a,[{key:"$silenced",get:function(){return v()(p()(a.prototype),"$silenced",this)},set:function(e){ne()(p()(a.prototype),"$silenced",e,this,!0),!1===e&&this._tvid&&(this._p2p.checkSwitch(this._tvid),this._pumpLoader())}},{key:"buffer",get:function(){return this._p2p.buffer}},{key:"duration",get:function(){var e,t,i=0;if(this.$manifestArtifact&&!Object(he.c)(this.$manifestArtifact))switch(this.$manifestArtifact.manifestType){case Ke.HLS:var n=this.$manifestArtifact.segments,i=(e=n[n.length-1]).startTime+e.duration;break;case Ke.DASH_VP9:case Ke.DASH_AV1:case Ke.JDASH:i=(t=this.$manifestArtifact.tracks).video?t.video.duration:0;n=t.audio?t.audio.duration:0;0===i?i=n:0<i&&0<n&&(i=Math.min(i,n))}return i}},{key:"algot",get:function(){return this._p2p.algot}},{key:"eof",get:function(){return this._eof}},{key:"eod",get:function(){return this._eod}},{key:"fragments",get:function(){var e,t=[];if(this.$manifestArtifact)switch(this.$manifestArtifact.manifestType){case Ke.HLS:t=(e=this.$manifestArtifact).fragments;break;case Ke.DASH_VP9:case Ke.DASH_AV1:case Ke.JDASH:e.tracks.video?t=e.tracks.video.fragments:e.tracks.audio&&(t=e.tracks.audio.fragments)}return t||[]}},{key:"p2pVersion",get:function(){return io.a}},{key:"destroy",value:function(){v()(p()(a.prototype),"destroy",this).call(this),this._tvid="",this._timeRange=null,this._eof=!1,this._eod=!1,this.$manifestArtifact=null,this.$rendererArtifact=null,this.lastReadMainSegment_=null,this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.tempDefList_=null,this.tickTimer_.cancel(),this._unbind()}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,i=e.loader,n=e.renderer,r=this.$manifestArtifact!==t,a=this.$selfArtifact!==i,o=this.$rendererArtifact!==n,s=!1,e=!1;r&&t&&!Object(he.c)(t)&&(t.other.fromlist?this._pushDefList(t):this.$manifestArtifact!==t&&(this._changeManifest(t),s=!0),e=!0),o&&(s=!0,this.$rendererArtifact=n),a&&(s=!0,this.$selfArtifact=i),s&&this._pumpLoader(),e&&this.$consumeArtefact("manifest")}},{key:"seek",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];v()(p()(a.prototype),"seek",this).call(this,e),this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.lastReadMainSegment_=null;var i=this.$manifestArtifact.manifestType;t&&(this._p2p.absing||i==Ke.DASH_AV1||i==Ke.DASH_VP9||i==Ke.JDASH)||(this._p2p.seek(this._tvid,e),this._pumpLoader())}},{key:"findPieceAt",value:function(e){if(this.$manifestArtifact){var t=null,i=null,n=null;switch(this.$manifestArtifact.manifestType){case Ke.HLS:t=this.$manifestArtifact,(i=this.findPieceByPTS_(e,t.fragments))&&(n=this.findPieceByPTS_(e,i.segments));break;case Ke.DASH_VP9:case Ke.DASH_AV1:case Ke.JDASH:t=this.$manifestArtifact,n=this.findPieceByPTS_(e,t.tracks.video.segments)}return n?{fragment:i,segment:n}:null}}},{key:"tick_",value:function(){Object(fe.a)(this._ctx.stats,this._p2p.stats),this._pumpLoader()}},{key:"findPieceByPTS_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0;return i&&!this.pieceWithinToleranceTest_(e,i)?i:pe(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0;return t.startTime+t.duration<=(e=e<0?0:e)?1:t.startTime>e&&t.startTime?-1:0}},{key:"changeAbsState",value:function(e){(this._p2p.absing=e)&&(this.tempDefList_=null,this._p2p.setBitrate(this._tvid,this._p2p.ABS_LEVEL_ID))}},{key:"applyRanges",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.$manifestArtifact&&0!==e.length&&(this._eod=this._eof=!1,this._timeRange=e,this._constructSegmentsByRange(this.$manifestArtifact),e=[[e.start(0),e.end(e.length-1)]],t&&this._p2p.refreshLoadRange(this._tvid,e))}},{key:"recoverAt",value:function(e){this._p2p.recover(e),v()(p()(a.prototype),"recoverAt",this).call(this,e)}},{key:"_initP2P",value:function(){var t=this,e=this.$krt,i=this.$stream,n=this.$silenced,r=this._p2p,a=this._ctx,o=e.params.dynamic,s=o.checkIsMobius,c=o.getUserInfo,d=o.sendPingBack,u=o.switchAutoDef,e=o.absing,l=o.startPlayed;n||(r.absing=e),this._p2p.init({getBufferFunc:function(){var e=i.renderer.buffer;return null!==t.curVideoEndTime_&&null!==t.curAudioEndTime_&&(e.buffered.audio.end=t.curVideoEndTime_,e.buffered.video.end=t.curAudioEndTime_),e},reBufTimeFunc:function(){return 0},canSwitchVd:function(){var e=l()&&!i.renderer.updating&&!a.isAd&&a.allowSwitchVariant;return Y.a.log("".concat(t.LOG_TAG," p2p get canSwitchVd, check=").concat(e)),e},startPlayed:l||ft.f,checkIsMobius:s||ft.f,getUserInfo:c||ft.f,sendPingBack:d||ft.f,switchAutoDef:u||ft.f})}},{key:"_bind",value:function(){var e=this._p2p;this.$krt.ctx.on(ae.a.PRE_ERROR,this.onKrlPreError_),e.on("DR",this.onDataArrived_),e.on("AE",this.onAuthExpired_)}},{key:"_unbind",value:function(){var e=this._p2p;this.$krt.ctx.off(ae.a.PRE_ERROR,this.onKrlPreError_),e.off("DR",this.onDataArrived_),e.off("AE",this.onAuthExpired_)}},{key:"_pushDefList",value:function(e){var t;this.$silenced||(t=e.other.listdone,null==this.tempDefList_&&(this.tempDefList_=[]),e=this._getP2PItemData(e),this.tempDefList_.push(e),t&&this._p2p.setDefList(this._tvid,this.tempDefList_))}},{key:"_changeManifest",value:function(e){var t=this.$silenced,i=this.$stream,n=this._p2p,r=e.manifestType,a=e.levelId,o=e.metadata,s=e.other,c=e.isSwitchLevel,d=Number(a),u=s.tvid,l=s.aid,h=s.vidlist,a=s.feed;u+="",l+="";s=this.$manifestArtifact?this.$manifestArtifact.levelId:"null";Y.a.log("".concat(this.LOG_TAG," ").concat(Ke[r]," manifest changed, tvid: ").concat(this._tvid,"->").concat(u,", bid: ").concat(s,"->").concat(d,", metadata=").concat(JSON.stringify(o))),this.baseLog_="".concat((Ke[r]||"").toLowerCase(),", tvid=").concat(u,", bid=").concat(d),this.$manifestArtifact=e;r=i.playRanges;this.applyRanges(r,!1),this._tvid=u,i.restrictor.needSendInitSegment=!0,"false"!==a&&!1!==a&&(a=[[r.start(0),r.end(r.length-1)]],l={vidlist:h,aid:l},e=this._getP2PItemData(e),this.baseLog_+=", type=".concat(e.type),Object(fe.a)(l,e),n.feed(this._tvid,a,!t,l),n.setBitrate(this._tvid,d),c||t||n.seek(this._tvid,r.start(0)),!n.absing||t||c||n.setBitrate(this._tvid,n.ABS_LEVEL_ID))}},{key:"_getP2PItemData",value:function(e){var t=e.manifestType,i=e.levelId,n=e.other,r={bid:i,vid:n.vid+""||"",type:"",vsize:n.vsize||0,dataFlow:null},a="manifest data, ";switch(t){case Ke.HLS:var o=e.segments;r.dataFlow={stream:o},r.type="ts",a+="type=hls, bid=".concat(i,", segments.len=").concat(o.length);break;case Ke.DASH_VP9:case Ke.DASH_AV1:var s=e.tracks,c=s.video,d=s.audio,o=d.segments[d.segments.length-1],s=c.segments[c.segments.length-1];r.dataFlow={audio:{duration:o.startTime+o.duration,init:d.initSegment,segments:d.segments},video:{duration:s.startTime+s.duration,init:c.initSegment,segments:c.segments}},r.type=t==Ke.JDASH?"m4s":"dash",a="type=".concat(r.type,", bid=").concat(i,", audio.segs.len = ").concat(d.segments.length,", video.segs.len = ").concat(c.segments.length);break;case Ke.JDASH:c=e.source;c.drm=e.other.drm,r.dataFlow=c,r.type="m4s",a="type=".concat(r.type,", bid=").concat(i)}return Y.a.log("".concat(this.LOG_TAG," ").concat(a)),r}},{key:"_constructSegmentsByRange",value:function(e){var s=this._timeRange;if(s){var t=function(e){for(var t=s.start(0),i=s.end(s.length-1),n=0;n<e.length;n++){var r=e[n],a=r.startTime,o=r.endTime;r.enabled=(t<=a||t<o)&&(o<=i||a<i)}};switch(e.manifestType){case Ke.HLS:t(e.segments);break;case Ke.DASH_VP9:case Ke.DASH_AV1:var i=e.tracks,n=i.video,i=i.audio;t(n.segments),t(i.segments);break;case Ke.JDASH:}}}},{key:"_pumpLoader",value:function(){var e=this.$stream,t=this.$selfArtifact,i=this.$manifestArtifact,n=t,t=this.$rendererArtifact;!i||Object(he.c)(i)||!Object(he.c)(n)&&null!=n||null==t||void 0!==t.expectingBuffer&&"boolean"!=typeof t.expectingBuffer||!1===t.expectingBuffer||this.eof||this.$silenced||this.$error&&0===this.buffer.len||this.$error&&(this.$error.code===me.a.DATA_P2P_DASH_BYTES_LENGTH||this.$error.code===me.a.MUX_M4S_FTYP_INVALID)||((t=this._p2p.error)?this.$throwError(t):(t=!1,t=e.restrictor.needSendInitSegment&&i.manifestType!==Ke.HLS?this._readInitSegment():this._readData(),this.noticeDataPump(t)))}},{key:"_readInitSegment",value:function(){var e=this.$stream,t=!1;if(!this.$manifestArtifact)return t;var i=this.$manifestArtifact,n=i.manifestType,r=i.metadata,i=r.hasVideo,r=r.hasAudio,a=null,o=null,s=[],c=this.$manifestArtifact,d=null,u=null;switch(n){case Ke.JDASH:d=c.tracks.video,u=c.tracks.audio,d&&((a=new ot.a(1)).bytesArray=[d.initSegment],a.container="video/mp4",a.codec=d.codec,s.push(a)),u&&((o=new ot.a(2)).bytesArray=[u.initSegment],o.container="audio/mp4",o.codec=u.codec,s.push(o));break;case Ke.DASH_VP9:case Ke.DASH_AV1:var l,h=this._p2p.read(this._tvid,!0);h&&(l=h.video?h.video.data:null,h=h.audio?h.audio.data:null,(l||h)&&(d=c.tracks.video,u=c.tracks.audio,d&&l&&((a=new ot.a(1)).bytesArray=[l],a.container=d.mimeType,a.codec=d.codec,s.push(a)),u&&h&&((o=new ot.a(2)).bytesArray=[h],o.container=u.mimeType,o.codec=u.codec,s.push(o))))}return(i&&r&&a&&o||i&&a||r&&o)&&(t=!(e.restrictor.needSendInitSegment=!1),Y.a.log("".concat(this.LOG_TAG," read initSegment, length=").concat(s.length)),this.$provideArtefact({segments:s})),t}},{key:"_readData",value:function(){var e,t,i=this._p2p.read(this._tvid,!1),n=!1;return i&&!Object(he.c)(i)&&(e=i.type,t=this.$manifestArtifact.manifestType,"ts"==(e=e.toLowerCase())&&t==Ke.HLS&&(n=this._parseHLS(this.$manifestArtifact.segments,i)),("m4s"==e&&t==Ke.JDASH||"dash"==e&&(t==Ke.DASH_VP9||t==Ke.DASH_AV1))&&(n=this._parseDash(this.$manifestArtifact.tracks,i))),n}},{key:"_parseHLS",value:function(e,t){var i,n,r,a=t.bid,o=t.loadDone,s=t.stream,c=null,d=!1;return s&&(i=s.index,n=s.data,r=s.chunkEOF,t=s.spos,s=e[i],a=a||s.levelId,this._eof=oo(e,i,r),this._eod=o,n&&(o=n.byteLength,Y.a.log("read hls, done=".concat(r,", uid=").concat(a,"-").concat(s.fragIdx,"-").concat(s.idx,", startByte=").concat(s.startByte,", endByte=").concat(s.endByte,", total=").concat(s.endByte-s.startByte,", byteOffset=").concat(t,", data.byteLength=").concat(o,", startTime=").concat(s.startTime,", endTime=").concat(s.startTime+s.duration,", eof=").concat(this._eof,", eod=").concat(this._eod)),c={type:Ke.HLS,data:n,done:r,meta:{uid:"".concat(a,"-").concat(s.fragIdx,"-").concat(s.idx," "),level:a,fragIdx:s.fragIdx,segIdx:s.idx,fragKey:s.fragKey,byteOffset:t}})),c&&(d=!0,this.$provideArtefact(c)),d}},{key:"_parseDash",value:function(e,s){var c,d,u=this,l=s.bid,t=s.loadDone,i=s.video,n=s.audio,r=e.video?e.video.segments:null,a=e.audio?e.audio.segments:null,h="",f=[],p=null,o=!!a&&0<a.length,_=!!r&&0<r.length,e=!1;return(r||a)&&([{type:"video",result:i,segments:r},{type:"audio",result:n,segments:a}].filter(function(e){e=e.result;return!(!e||!e.data)}).forEach(function(e){var t=e.type,i=e.result,n=e.segments,r=i.index,a=n[r],e=a.endByte-a.startByte,o="video"===t?1:2,n="".concat(l,"-").concat(a.fragIdx,"-").concat(a.idx);i.data.length!==e?(p=!0,c=ye.a.LOADER,d=me.a.DATA_P2P_DASH_BYTES_LENGTH,h+="\n".concat(t," byteLength error, p2p=").concat(i.data.length,", manifest=").concat(e,", uid=").concat(n)):"m4s"!==s.type||function(e){var t=!0,i=1==o?[0,0,0,36,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,97,118,99,49,99,109,102,115]:[0,0,0,32,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,99,109,102,115],n=i.length;if(e.length<n)t=!1;else for(var r=0;r<n;r++)if(i[r]!==e[r]){t=!1;break}return t}(i.data)?((e=new st.a(o)).bytesArray=[i.data],e.startTime=a.startTime,e.duration=a.duration,f.push(e),h+="\nreceived ".concat(t," ").concat(r," segment, uid=").concat(n,", startTime=").concat(a.startTime,", duration=").concat(a.duration),/firefox/gi.test(navigator.userAgent)||(h+=", crc32=".concat(Le(function(e,r){if(1e4<e.length)return function(e){for(var t=-1^r,i=e.length-7,n=0;n<i;)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])];for(;n<7+i;)t=t>>>8^ht[255&(t^e[n++])];return-1^t}(e);for(var t=-1^r,i=e.length-3,n=0;n<i;)t=(t=(t=(t=t>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])])>>>8^ht[255&(t^e[n++])];for(;n<3+i;)t=t>>>8^ht[255&(t^e[n++])];return-1^t}(e.bytesArray[0]).toString()))),1==o?(u.lastReadMainSegment_=a,u.curVideoEndTime_=a.endTime):u.curAudioEndTime_=a.endTime):(p=!0,c=ye.a.LOADER,d=me.a.MUX_M4S_FTYP_INVALID,i="Encounter invalid m4s ftyp, startByte: ".concat(a.startByte," endByte: ").concat(a.endByte,", data(").concat(i.data.subarray(0,100),")"),Y.a.error(i))}),n=!o||oo(a,n.index,!!n.data),i=!_||oo(r,i.index,!!i.data),this._eof=i&&n,this._eod=t,p&&this.$throwError(new _e.a(ge.a.CRITICAL,c,d,"")),0<f.length&&(e=!0,Y.a.log("".concat(this.LOG_TAG," read data, ").concat(this.baseLog_,", eof=").concat(this._eof,", eod=").concat(this._eod,", ").concat(h)),this.$provideArtefact({segments:f}))),e}}]),a}(de);G([r.c],K.prototype,"fragments",null),G([r.c],K.prototype,"p2pVersion",null),G([r.c],K.prototype,"findPieceAt",null),d(204),d(147);var ie=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},so=function(e,t){var i={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i},co=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){f()(this,a);var t=e.manifestType,e=so(e,["manifestType"]);return(e=r.call(this,e)).$ARTEFACT_ACTION=oe.a.DEPOSIT_MANIFEST,e.seekable_=!0,e.manifestType=t,e}return c()(a,[{key:"currentManifestType",get:function(){var e=this.manifestType;return null==e?null:e}},{key:"dynamicStuckMonitorPeriod",get:function(){return this.currentManifestType,this.$krt.conf.fpsStuckMonitoringPeriod}},{key:"seekable",get:function(){return this.seekable_},set:function(e){this.seekable_=e}}]),a}(a.a);ie([r.c],co.prototype,"currentManifestType",null);function uo(){f()(this,uo),this.hasAudio=!1,this.hasVideo=!1}var lo=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this)).status=0,t.enabled=!0,t.seekable=!0,t.mediumStartByte=null,t.mediumEndByte=null,t.uri=null,t.segments=[],t.header=null,t.gas=null,t.loadstart=!1,t.offset=0,t.key=ve.a.create(),t.type=e,t}return a}((c()(ho,[{key:"endTime",get:function(){return this.startTime+this.duration}}]),ho));function ho(){f()(this,ho),this.idx=null,this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.segments=[]}function fo(e,t,i,n){var r=3<arguments.length&&void 0!==n?n:null,n=null,t=e.getAttribute(t);return null==(n=null!=t?i(t):n)?r:n}function po(e){return Array.from(e.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE})?e.textContent.trim():null}function _o(e,t){t=go(e,t);return 1!=t.length?null:t[0]}function go(e,t){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.tagName==t})}d(168),d(583);var yo=$.a.mark(mo);function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function mo(t){var i,n,r,a,o,s;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=-1,r=n=void 0,a=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return vo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(t),e.prev=4,a.s();case 6:if((o=a.n()).done){e.next=16;break}if(s=o.value,0<=i)return e.next=11,{i:i,item:r,prev:n,next:s};e.next=11;break;case 11:i++,n=r,r=s;case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:if(-1!=i)return e.next=27,{i:i,prev:n,item:r,next:void 0};e.next=27;break;case 27:case"end":return e.stop()}},yo,null,[[4,18,21,24]])}function bo(e){return null!=e}function ko(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return Y.a.warn("Invalid duration string: ".concat(e)),null;t=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(t)?t:null}function xo(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;e=Number(t[1]);if(!isFinite(e))return null;t=Number(t[2]);return isFinite(t)?{start:e,end:t}:null}function So(e){var t,e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(e)?null:e}function To(e){e=Number(e);return e%1==0&&0<e?e:null}function Po(e){e=Number(e);return e%1==0&&0<=e?e:null}function Io(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return wo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ao(e){var e=_o(e,"clip_list"),i={},r={BaseURL:"baseUrl",remote_path:"url",start_ts_in_ms:{name:"startTime",parser:Po},duration_in_ms:{name:"duration",parser:Po},start_pos:{name:"startByte",parser:Po},end_pos:{name:"endByte",parser:Po},type:"type",size:{name:"size",parser:Po}};return e&&go(e,"clip").map(function(e){var t,n={type:null};t=Node.ELEMENT_NODE,Array.from(e.childNodes).filter(function(e){return e.nodeType===t}).map(function(e){var t,i=r[e.tagName];i&&(t="string"==typeof i?i:i.name,e=po(e),i.parser&&(e=i.parser(e)),n[t]=e)}),Array.isArray(i[n.type])||(i[n.type]=[]),i[n.type].push(n)}),i}function Eo(e,t){return e.filter(function(e){return e.contentType==t})}function Do(t,e){t.period=e,t.period.id||(Y.a.log("No Period ID given for Period with start time ".concat(e.start,",  Assigning a default")),t.period.id="__qvs_period_"+e.start);var i=go(e.node,"AdaptationSet").map(function(e){return function(t,e){var i=e.getAttribute("id"),n=e.getAttribute("contentType")||"",r=e.getAttribute("segmentAlignment"),a=e.getAttribute("lang")||"und",o=go(e,"Representation"),e="text"===n;t.adaptationSet={id:i,contentType:n,segmentAlignment:r,language:a};r=o.map(function(e){return function(e,t,i){var n,r=e.adaptationSet,a=r.contentType,o=t.getAttribute("id"),s=t.getAttribute("mimeType")||"",c=t.getAttribute("codecs"),d=fo(t,"bandwidth",To)||0,u=_o(t,"SegmentBase"),l=_o(t,"SegmentList"),h=_o(t,"SegmentTemplate"),f={contentType:a,id:o,mimeType:s,codecs:c,bandwidth:d,baseUris:go(t,"BaseURL").map(po),segmentBase:u,segmentList:l,segmentTemplate:h};switch(a){case"video":f.width=fo(t,"width",Po),f.height=fo(t,"height",Po),f.frameRate=fo(t,"frameRate",So);break;case"audio":f.audioSamplingRate=Po(t.getAttribute("audioSamplingRate"))}return e.representation=f,l=0,l+=(h=f).segmentBase?1:0,l+=h.segmentList?1:0,(0==(l+=h.segmentTemplate?1:0)?(Y.a.warn("Representation does not contain a segment information source: the Representation must contain one of SegmentBase, SegmentList"),0):(1!=l&&(Y.a.warn("Representation ".concat(h.id," contains multiple segment information sources: the Representation should only contain one of SegmentBase,SegmentList, or SegmentTemplate.")),h.segmentBase?(Y.a.log("Using SegmentBase by default."),h.segmentList=null):Y.a.log("Using SegmentList by default."),h.segmentTemplate=null),1))?(f.segmentList?n=function(n,e){var t=n.representation,i=t.contentType,r=_o(e,"Initialization"),a=go(e,"SegmentURL"),o=Po(e.getAttribute("startNumber")||""),e=NaN;if("video"===i)e=1e3;else{if("audio"!==i)throw"mpd unknown ".concat(i);e=t.audioSamplingRate}r={range:fo(r,"range",xo,{start:0,end:null})},a=a.map(function(e,t){e.getAttribute("indexRange")&&!n.indexRangeWarningGiven&&(n.indexRangeWarningGiven=!0);var i=Po(fo(e,"t",Po));return{startTime:i=0===t?0:i,duration:Po(fo(e,"d",Po)),range:fo(e,"mediaRange",xo,{start:0,end:null})}});return 1<a.length&&(a[0].duration=a[1].startTime),0==o&&(Y.a.warn("SegmentList@startNumber must be > 0"),o=1),{startNumber:o,timescale:e,initUri:r,mediaUris:a}}(e,f.segmentList):f.segmentBase||f.segmentTemplate?Y.a.error("mpd parser still not support parse segmentBase or segmentTemplate"):Y.a.error("Must have Segment* with non-text streams."),Object.assign({id:r.id,originalId:f.id,segmentIndex:null,mimeType:f.mimeType,codecs:f.codecs,frameRate:f.frameRate,bandwidth:f.bandwidth,width:f.width,height:f.height,language:i,type:a,channelsCount:f.numChannels},n)):(Y.a.warn("Skipping Representation",f),null)}(t,e,a)}).filter(function(e){return!!e});if(0==r.length){if(e)return null;throw new Error("DASH_EMPTY_ADAPTATION_SET")}if(!t.adaptationSet.contentType||"application"==t.adaptationSet.contentType){e=r[0].mimeType;r[0].codecs,t.adaptationSet.contentType=e.split("/")[0];var s,c=Io(r);try{for(c.s();!(s=c.n()).done;)s.value.type=t.adaptationSet.contentType}catch(e){c.e(e)}finally{c.f()}}o=o.map(function(e){return e.getAttribute("id")}).filter(bo);return{id:t.adaptationSet.id,contentType:t.adaptationSet.contentType,language:a,streams:r,representationIds:o}}(t,e)}).filter(bo),n=Eo(i,"video"),i=Eo(i,"audio");if(!n.length&&!i.length)throw"DASH_EMPTY_PERIOD";i.length||(i=[null]),n.length||(n=[null]);var r,a=[],o=Io(i);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,d=Io(n);try{for(d.s();!(s=d.n()).done;)!function(e,t,i){var n=2<arguments.length&&void 0!==i?i:[];if(e||t)if(e&&t){var r,a=Io(e.streams);try{for(a.s();!(r=a.n()).done;){var o,s=r.value,c=Io(t.streams);try{for(c.s();!(o=c.n()).done;){var d=o.value,u=(d.bandwidth||0)+(s.bandwidth||0),l={language:e.language,primary:e.main||t.main,audio:s,video:d,bandwidth:u};n.push(l)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}}else{var h,f=e||t,p=Io(f.streams);try{for(p.s();!(h=p.n()).done;){var _=h.value;u=_.bandwidth||0,l={language:f.language||"und",primary:f.main,audio:e?_:null,video:t?_:null,bandwidth:u},n.push(l)}}catch(e){p.e(e)}finally{p.f()}}}(c,s.value,a)}catch(e){d.e(e)}finally{d.f()}}}catch(e){o.e(e)}finally{o.f()}return{startTime:e.start,variants:a}}d(110),d(146);var qo=ko,Oo=function(e,t){var i,n=[],t=go(t,"Period"),r=e.presentationDuration,a=0,o=Io(mo(t));try{for(o.s();!(i=o.n()).done;){var s,c=i.value,d=c.i,u=c.item,l=c.next,h=u.getAttribute("id"),f=fo(u,"start",ko,a),p=fo(u,"duration",ko),_=null;l?null!=(s=fo(l,"start",ko))&&(_=s-f):null!=r&&(_=r-f),_&&p&&.06666666666666667<Math.abs(_-p)&&Y.a.warn("There is a gap/overlap between mpd Periods");var g=Do(e,{id:h,start:f,duration:_=null==_?p:_,node:u,isLastPeriod:null==_||!l});if(n.push(g),null==_){l&&Y.a.warn("Skipping Period",d+1,"and any subsequent Periods:","Period",d+1,"does not have a valid start time.",l),a=null;break}a=f+_}}catch(e){o.e(e)}finally{o.f()}return null!=r?(a!=r&&Y.a.warn("@mediaPresentationDuration does not match the total duration of all Periods."),{periods:n,duration:r,durationDerivedFromPeriods:!1}):{periods:n,duration:a,durationDerivedFromPeriods:!0}},Ro=d(418);function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var y=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(e){return f()(this,r),(e=t.call(this,Object.assign(Object.assign({},e),{pkg:Ro,watch:["rawness","error"],manifestType:Ke.UNKNOWN}))).$TAG="DashManifest",e}return c()(r,[{key:"onStoreStateChanged",value:function(e){if(!Object(he.c)(e.rawness)){var t=e.rawness.mpd,i=e.rawness.bid,n=e.rawness.other,i=Object(he.j)(i)?parseInt(i,10):i;if(Object(he.j)(t)){n=this.generateArtefact_(t,i,n);if(n.isSwitchLevel=!!e.rawness.isSwitchLevel,n.tracks.video){e=n.tracks.video.codec;if(/vp09/gi.test(e))this.manifestType=Ke.DASH_VP9;else{if(!/av01/gi.test(e))return void Y.a.error("".concat(this.LOG_TAG," unsupported dash manifest codec ").concat(e));this.manifestType=Ke.DASH_AV1}}this.$provideArtefact(n)}else this.$throwError(new _e.a(ge.a.CRITICAL,ye.a.MANIFEST,me.a.MFT_FAILED_TO_PARSE_MPD));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(c,x,d){try{var e=function(){var m=ve.a.create(),e=new uo,b={},t=function(e,t){var i=new DOMParser,n=null,r=null;try{r=i.parseFromString(e.trim(),"text/xml")}catch(e){throw"XML DOMParser parseFromString error: ".concat(e.message)}return(n=r&&r.documentElement.tagName==t?r.documentElement:n)&&0<n.getElementsByTagName("parsererror").length?null:n}(c,"MPD"),i=fo(t,"mediaPresentationDuration",qo),r=Ao(t),n=!!r.video,a=!!r.audio,t=Oo({clips:r,presentationDuration:i,period:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1},t).periods;e.hasAudio=a,e.hasVideo=n;var k=Ke.DASH_VP9;Object.keys(r).forEach(function(e){var t=r[e],n={};n.type=e,n.duration=i,n.fragments=[],t.map(function(e,t){var i=new lo(k);i.idx=t,i.levelId=x,i.uri=new Pe.a(e.url),i.mediumStartByte=e.startByte,i.mediumEndByte=e.endByte+1,i.startByte=0,i.endByte=i.mediumEndByte-i.mediumStartByte,Object(he.e)()&&i.uri.setScheme("https"),n.fragments.push(i)}),b[e]=n});var o,s=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Lo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Lo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(t);try{for(s.s();!(o=s.n()).done;)!function(){var v=o.value.variants[0],e=[];a&&e.push("audio"),n&&e.push("video"),e.forEach(function(e){var t=b[e],i=v[e],n=i.codecs;if(t){e=new Xe(k);e.uri=new Pe.a(t.fragments[0].uri),e.startByte=i.initUri.range.start,e.endByte=i.initUri.range.end+1,e.uri.query.add("start",e.startByte+""),e.uri.query.add("end",e.endByte+""),t.codec=n,t.mimeType=i.mimeType,t.initSegment=e,t.segments=[];for(var r=0,a=-1,o=t.fragments[r],s=i.timescale,c=i.mediaUris.length,d=!1,u=0;u<c;u++){var l=u===c-1,h=i.mediaUris[u],f=h.range.start,p=h.range.end+1,_=f-o.mediumStartByte,g=p-o.mediumStartByte,y=new Pe.a(o.uri),f=h.startTime/s,h=h.duration/s;l&&(h=t.duration-f),p<=o.mediumEndByte&&(a++,p===o.mediumEndByte&&(d=!0,o.startTime=0<o.segments.length?o.segments[0].startTime:f,o.duration=f-o.startTime+h)),y.query.update("start",_+""),y.query.update("end",g+"");p=new Xe(k);p.uri=y,p.idx=a,p.fragIdx=r,p.startTime=f,p.duration=h,p.startByte=_,p.endByte=g,p.poolId=m+"-"+r+"-"+a,p.levelId=x,p.bid=x+"",t.segments.push(p),o.segments.push(p),d&&(r++,o=t.fragments[r],d=!(a=-1))}}})}()}catch(e){s.e(e)}finally{s.f()}if(!Object(he.c)(b))return{v:{duration:i,manifestType:k,isSwitchLevel:!1,levelId:x,metadata:e,tracks:b,other:d}}}();if("object"===re()(e))return e.v}catch(e){Y.a.error("".concat(this.LOG_TAG," mpd parsed fail: ").concat(e.stack," - ").concat(e.message)),this.$throwError(new _e.a(ge.a.CRITICAL,ye.a.MANIFEST,me.a.MFT_FAILED_TO_PARSE_MPD_XML))}return null}}]),r}(co),Mo=d(419);var m=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(e){return f()(this,r),t.call(this,Object.assign(Object.assign({},e),{pkg:Mo,watch:["rawness","error"],manifestType:Ke.FLV}))}return c()(r,[{key:"onStoreStateChanged",value:function(e){if(!Object(he.c)(e.rawness)){var t=e.rawness.fs,i=e.rawness.bid,n=Object(he.j)(i)?parseInt(i,10):i,i=e.rawness.other;if(Array.isArray(t)||i.done){n=this.generateArtefact_(t,n);n.isSwitchLevel=!!e.rawness.isSwitchLevel,n.other=i,this.$provideArtefact(n)}else{try{Y.a.error(JSON.stringify(e.rawness))}catch(e){}this.$throwError(new _e.a(ge.a.CRITICAL,ye.a.MANIFEST,me.a.MFT_FAILED_TO_PARSE_FLV))}this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t){var i=new uo;i.hasAudio=!0,i.hasVideo=!0;var n={manifestType:Ke.FLV,isSwitchLevel:!1,levelId:t,metadata:i,fragments:[],segments:[],other:{}};if(e&&0<e.length)for(var r=e.length,a=null,o=0,s=0;s<r;++s){var c=e[s];(a=new lo(Ke.FLV)).idx=s,a.startTime=o,a.duration=c.duration,o+=c.duration,a.uri=new Pe.a(c.url),a.levelId=t,c.gas&&(a.gas=c.gas),Object(he.e)()&&a.uri.setScheme("https");var d=new Xe(Ke.FLV);d.startByte=0,d.endByte=9e3,d.uri=new Pe.a(c.url),d.fragIdx=s,(a.header=d).levelId=t,Object(he.e)()&&d.uri.setScheme("https"),n.fragments.push(a)}return n}}]),r}(co),Co=d(420);s=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(e){return f()(this,r),(e=t.call(this,Object.assign(Object.assign({},e),{pkg:Co,watch:["rawness","error"],manifestType:Ke.HLS}))).$TAG="HlsManifest",e}return c()(r,[{key:"onStoreStateChanged",value:function(e){var t,i,n;Object(he.c)(e.rawness)||(t=e.rawness.m3u8,i=e.rawness.bid,n=e.rawness.other,i=Object(he.j)(i)?parseInt(i,10):i,Object(he.j)(t)?((n=this.generateArtefact_(t,i,n)).isSwitchLevel=!!e.rawness.isSwitchLevel,this.$provideArtefact(n)):this.$throwError(new _e.a(ge.a.CRITICAL,ye.a.MANIFEST,me.a.MFT_FAILED_TO_PARSE_M3U8)),this.$consumeArtefact("rawness"))}},{key:"generateArtefact_",value:function(e,t,i){var n=ve.a.create(),r=new uo;r.hasAudio=!0,r.hasVideo=!0;var a={manifestType:Ke.HLS,isSwitchLevel:!1,levelId:t,metadata:r,fragments:[],segments:[],isAccurateTimestamp:!1,other:i};if(e&&""!=e){var e=this.parseM3u8_(e),o=e.durations,s=e.urls,c=e.sds,d=e.starts,u=e.ends,l=e.parts,h=s.length,f=c&&0<c.length;if(a.isAccurateTimestamp=f,0<h){var p,_,g,y,v,m,b=0,k=0,x=0;0<c.length&&(c[0]=0);for(var S=0;S<h;S++){var T=S===h-1,P=Te.f+s[S],I=o[S],w=d[S],A=u[S],E=l[S],D=void 0;T&&0===I&&(I=.04),g&&g===E||(g&&(D=p),(p=new lo(Ke.HLS)).idx=b,k=0,a.fragments.push(p),b+=1),(_=new Xe(Ke.HLS)).uri=new Pe.a(P),_.idx=k,_.startByte=w,_.endByte=A,_.poolId=n+"-"+p.idx+"-"+k,_.levelId=t,_.duration=I,_.fragIdx=p.idx,_.fragKey=p.key,_.flattenIdx=a.segments.length,_.__url=_.uri.toString(),k+=1,f?(x=c[S]/1e3,-1<m&&x<m&&(Y.a.log("".concat(this.LOG_TAG," manifest correct sd , ").concat(x," -> ").concat(m+v.duration)),x=m+v.duration),_.startTime=x,v&&(v.duration=x-v.startTime),v=_,m=x):(_.startTime=x,x+=I),a.segments.push(_),p.segments.push(_),D&&this.resetFragInfo_(D,y,t),T&&this.resetFragInfo_(p,P,t),g=E,y=P}}}return a}},{key:"parseM3u8_",value:function(e){for(var t,i=[],n=[],r=[],a=[],o=[],s=[],c=/(#EXTINF:\d+)|(\/\/\S*)/g,d=/(start=\d+)|(end=\d+)/g,u=/(&sd=\d+)|(\/\/\S*\?)/g;null!==(t=c.exec(e));)-1<t[0].indexOf("#EXTINF")?i.push(parseInt(t[0].replace("#EXTINF:",""),10)):n.push(t[0]);for(;null!==(t=d.exec(e));)-1<t[0].indexOf("start=")?a.push(parseInt(t[0].replace("start=",""),10)):o.push(parseInt(t[0].replace("end=",""),10));for(;null!==(t=u.exec(e));)-1<t[0].indexOf("&sd=")?r.push(parseInt(t[0].replace("&sd=",""),10)):s.push(t[0]);return{durations:i,urls:n,sds:r,starts:a,ends:o,parts:s}}},{key:"resetFragInfo_",value:function(e,t,i){var n=e.segments[0],r=e.segments[e.segments.length-1];e.startTime=n.startTime,e.duration=r.startTime+r.duration-e.startTime,e.levelId=i;i=n.startByte,r=r.endByte;t=(t=(t=t.replace(/start=\d+&/g,"start="+i+"&")).replace(/contentlength=\d+&/g,"contentlength="+(r-i)+"&")).replace(/sd=\d+&/g,"sd="+1e3*n.startTime+"&"),e.uri=new Pe.a(t)}}]),r}(co);function No(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),i=new Uint8Array(t.length),n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}function Bo(e,t){e=Me(e);t=null==t||t;e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/=*$/,"")}var Fo=d(421);n=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(e){return f()(this,r),t.call(this,Object.assign(Object.assign({},e),{pkg:Fo,watch:["rawness","error"],manifestType:Ke.JDASH}))}return c()(r,[{key:"onStoreStateChanged",value:function(e){if(!Object(he.c)(e.rawness)){var t=this.$stream.renderer,i=e.rawness,n=i.m3u8,r=i.drm,a=i.bid,o=i.other,i=null;try{var s=JSON.parse(n),i=s.payload[s.watermark_group[0]]}catch(e){}i?(a=Object(he.j)(a)?parseInt(a,10):a,(o=this.generateArtefact_(i,a,o)).isSwitchLevel=!!e.rawness.isSwitchLevel,t&&(t.drmInfo=r),this.$provideArtefact(o)):this.$throwError(new _e.a(ge.a.CRITICAL,ye.a.MANIFEST,me.a.MFT_FAILED_TO_PARSE_JDASH)),this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,i){window.location.protocol;var n,r,a,o,s=ve.a.create(),c=new uo,d={};for(n in e)"object"===re()(e[n])&&Array.isArray(e[n].type)&&/(video|audio)/gi.test(e[n].type.join(""))&&(a=(r=e[n]).files.length,o={type:Array.isArray(r.type)?r.type[0]:r.type,duration:parseInt(r.duration_second,10),codec:r.codec,initDataType:r.encryption_scheme,initSegment:No(r.codec_init),segments:[]},0<a&&(r.files[0].seekable.hasOwnProperty("pos")?this.parseOldData_(o.segments,r.files,o.duration,s,t):r.files[0].seekable.hasOwnProperty("pos_start")&&this.parseNewData_(o.segments,r.files,s,t)),"audio"===(d[o.type]=o).type?c.hasAudio=!0:"video"===o.type&&(c.hasVideo=!0));return Object(he.c)(d)?null:{manifestType:Ke.JDASH,isSwitchLevel:!1,levelId:t,metadata:c,tracks:d,other:i,source:e}}},{key:"parseOldData_",value:function(e,t,i,n,r){for(var a=0,o=t.length;a<o;a++)for(var s,c,d,u=t[a],l=u.size,h=u.start_second,f=a===o-1,p=0;p<u.seekable.time.length;p++)s=new Xe(Ke.JDASH),c=e[e.length-1],d=u.seekable.pos[p+1],s.uri=new Pe.a(u.file_name),Object(he.e)()&&s.uri.setScheme("https"),s.idx=p,s.poolId=n+"-"+s.idx,s.levelId=r,s.startTime=h+u.seekable.time[p],c&&(c.duration=s.startTime-c.startTime,f&&"number"!=typeof d&&(s.duration=i-s.startTime)),s.startByte=u.seekable.pos[p],s.endByte="number"==typeof d?d:l,e.push(s)}},{key:"parseNewData_",value:function(e,t,i,n){for(var r,a=0,o=t.length;a<o;a++){var s=t[a];(r=new Xe(Ke.JDASH)).uri=new Pe.a(s.file_name),Object(he.e)()&&r.uri.setScheme("https"),r.idx=a,r.poolId=i+"-"+r.idx,r.levelId=n,r.duration=s.seekable.time_end-s.seekable.time_start,r.startTime=s.start_second,r.startByte=s.seekable.pos_start,r.endByte=s.seekable.pos_end,e.push(r)}}}]),r}(co),g=d(349),b=d(348);var Uo=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).variantAudioMode=!1,e.$ARTEFACT_ACTION=oe.a.DEPOSIT_RENDERER,e}return c()(r,[{key:"appendWindowStart",get:function(){return this.appendWindowStart_},set:function(e){this.appendWindowStart_=e}},{key:"appendWindowEnd",get:function(){return this.appendWindowEnd_},set:function(e){this.appendWindowEnd_=e}},{key:"hasOperateBufferData",get:function(){return!1}},{key:"currentTimeRange",get:function(){var e=null,t=this.buffered,i=this.currentTime;if(t)for(var n=0;n<t.length;n++){var r=t.start(n),a=t.end(n);if(r<=i&&i<a){e={start:r,end:a};break}}return e}},{key:"drmInfo",set:function(e){}},{key:"bufferInfo",value:function(e,t){return{len:0,start:0,end:0}}},{key:"takeoverMediaControl",value:function(){}},{key:"releasedMediaControl",value:function(){}},{key:"$withinBuffer",value:function(e,t,i){}},{key:"$clearOperateBuffers",value:function(e){}},{key:"$flushBuffer",value:function(e,t,i){}},{key:"$drainBuffer",value:function(e){v()(p()(r.prototype),"$drainBuffer",this).call(this,e),this.hasOperateBufferData&&this.$clearOperateBuffers(null,!!e.keepInit),!1!==e.flushMedia&&this.$flushBuffer()}}]),r}(a.a),jo=d(531),Vo=(d(195),d(196),new Uint8Array([10,178,2,8,3,18,16,153,75,133,49,202,175,120,35,184,85,5,60,251,56,41,180,24,229,132,139,214,5,34,142,2,48,130,1,10,2,130,1,1,0,173,188,172,242,201,171,92,176,7,198,96,157,222,119,76,120,208,81,120,242,46,147,239,190,102,21,104,43,121,143,181,56,91,166,179,185,0,138,222,127,154,201,112,251,199,108,202,125,228,135,188,121,44,55,129,188,241,126,7,90,62,216,149,122,126,232,110,19,251,191,22,226,176,108,175,48,185,240,170,148,33,36,225,222,52,104,28,221,88,239,200,49,155,234,19,145,193,19,98,116,67,72,49,81,190,53,255,164,75,74,167,161,89,105,104,50,95,220,200,174,74,181,115,30,192,243,65,185,252,142,121,46,140,174,68,112,140,49,84,28,135,128,110,67,38,124,124,194,110,179,55,38,19,157,83,28,107,90,30,210,73,121,247,112,12,62,217,231,167,5,178,203,137,211,8,41,166,110,167,215,242,176,236,185,105,4,25,126,221,164,251,240,192,186,97,41,102,71,179,187,181,8,10,122,216,138,154,82,128,218,191,190,240,32,167,166,250,197,176,31,85,129,128,135,254,132,143,11,188,118,55,120,184,133,167,96,84,37,32,232,218,215,244,216,83,199,86,68,153,167,87,250,185,192,143,5,2,3,1,0,1,58,5,105,113,105,121,105,18,128,3,108,85,242,237,185,42,124,70,211,70,134,94,29,126,167,210,209,177,68,127,56,85,77,151,232,211,106,176,194,114,231,35,138,254,226,24,103,180,63,213,255,88,78,161,119,227,11,232,63,81,58,217,15,10,248,108,248,9,224,110,34,66,36,242,70,85,25,202,189,138,14,172,160,0,225,62,55,122,142,182,214,253,43,147,147,172,193,45,41,185,82,136,1,108,126,93,154,60,131,2,115,138,221,67,238,227,92,138,215,173,249,188,229,18,241,188,29,154,33,119,37,124,152,48,13,139,88,101,233,120,14,106,200,154,192,69,245,11,234,109,144,181,128,189,62,127,37,163,117,190,137,153,101,44,51,198,56,56,241,141,166,196,99,89,247,121,28,93,172,201,215,51,241,219,174,29,213,241,48,23,46,83,167,192,43,87,89,12,65,41,112,220,202,12,81,32,254,158,20,39,242,219,178,209,60,199,40,41,253,166,234,0,49,130,127,231,122,26,210,230,238,26,166,206,219,252,89,107,158,29,26,220,58,93,94,87,252,97,37,66,128,184,119,48,176,82,32,96,26,4,144,167,56,8,99,44,129,38,4,251,10,80,13,212,186,8,249,178,81,164,255,10,183,199,177,181,141,126,254,100,119,73,224,216,201,222,242,154,32,224,182,205,245,104,142,137,142,103,93,162,83,65,239,129,35,70,120,115,163,162,49,132,80,43,96,189,121,132,177,206,43,162,19,129,194,34,25,51,148,131,63,139,91,109,98,55,45,182,139,28,53,232,226,68,232,251,89,36,230,82,228,65,33,135,221,199,47,45,97,230,2,4,169,22,186,228,190,216,95,132,241,171,220,132,144,233,72,186,244,205,60,38,90,246]));function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Ho,zo,Yo,Go,Qo="<<EME>>",Ko=(c()(Xo,[{key:"setup",value:function(e,t,i){this.runtime_=e,this.mediaElem_=t,this.sessions=[],this.licenseRequests=[],i&&this.setDrmInfo(i),this.eventManager_.on(t,"encrypted",this.onEncrypted_.bind(this))}},{key:"destroy",value:function(){this.eventManager_.removeAll(),this.reset(),this.runtime_=null,this.mediaElem_=null,this.licenseRequests=null,this.sessions=null,this.drmInfo=null}},{key:"reset",value:function(){var i=this.sessions,e=this.licenseRequests,n=this.eventManager_;if(this.mediaElem_,Array.isArray(i)&&0<i.length){for(var t=0;t<i.length;t++)!function(e){var e=i[e].session,t=e.sessionId;n.off(e,"message"),n.off(e,"keystatuseschange"),e.close().then(function(){}).catch(function(){Y.a.warn("".concat(Qo," session ").concat(t," closed failed"))})}(t);i.splice(0,i.length)}Array.isArray(e)&&0<e.length&&e.splice(0,e.length)}},{key:"setDrmInfo",value:function(e){this.drmInfo=e?{keySystem:e.keySystem,licenseServerUri:e.keySystemServer,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null}:null}},{key:"onEncrypted_",value:(Go=Q()($.a.mark(function e(t){var i,n,r,a,o;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.mediaElem_,n=this.runtime_,r=new Uint8Array(t.initData),a=t.initDataType,Y.a.log("".concat(Qo," Encrypted initDataType/initData(").concat(a,"/").concat(r.length,")")),i.mediaKeys){e.next=45;break}return e.prev=5,e.next=8,this.queryMediaKeys_();case 8:o=e.sent,e.next=24;break;case 11:if(e.prev=11,e.t0=e.catch(5),this.queryMediaKeysPromise_=null,0===e.t0)return e.abrupt("return",n.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE)));e.next=18;break;case 18:if(1===e.t0)return e.abrupt("return",n.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_FAILED_TO_CREATE_CDM)));e.next=22;break;case 22:return Y.a.error("".concat(Qo," queryMediaKeys unknown error: ").concat(Object(he.i)(e.t0)?e.t0.message:e.t0||"unknown")),e.abrupt("return",n.throwError(new _e.a(_e.a.severity.CRITICAL,_e.a.category.DRM,me.a.DRM_NO_RECOGNIZED_ERROR)));case 24:return e.prev=24,e.next=27,this.setMediaKeys_(i,o);case 27:if(i.mediaKeys){e.next=30;break}throw this.setMediaKeysPromise_=null,"video.mediaKeys can't access";case 30:e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(24),Y.a.error("".concat(Qo," setMediaKeys error: ").concat(Object(he.i)(e.t1)?e.t1.message:e.t1||"unknown")),e.abrupt("return",n.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_FAILED_TO_ATTACH_TO_VIDEO)));case 36:return e.prev=36,e.next=39,this.setServerCertificate_(o);case 39:e.next=45;break;case 41:return e.prev=41,e.t2=e.catch(36),Y.a.warn("".concat(Qo," setServerCertificate fail: ").concat(e.t2.message)),e.abrupt("return",n.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_INVALID_SERVER_CERTIFICATE)));case 45:return e.prev=45,e.next=48,this.createSession_(i,a,r);case 48:e.next=54;break;case 50:e.prev=50,e.t3=e.catch(45),Y.a.error("".concat(Qo," createSession unknown fail: ").concat(Object(he.i)(e.t3)?e.t3.message:e.t3||"unknown")),n.throwError(new _e.a(_e.a.severity.CRITICAL,_e.a.category.DRM,me.a.DRM_NO_RECOGNIZED_ERROR));case 54:case"end":return e.stop()}},e,this,[[5,11],[24,32],[36,41],[45,50]])})),function(e){return Go.apply(this,arguments)})},{key:"setServerCertificate_",value:(Yo=Q()($.a.mark(function e(t){var i,n,r;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.drmInfo).keySystem===U.WIDEVINE&&(i.serverCertificate=Vo),i.serverCertificate&&i.serverCertificate.length)return n=!1,this.setServerCertificatePromise_||(this.setServerCertificatePromise_=t.setServerCertificate(i.serverCertificate),n=!0),e.next=7,this.setServerCertificatePromise_;e.next=9;break;case 7:r=e.sent,n&&(r?Y.a.log("".concat(Qo," The server certificate has been set by the key system(").concat(i.keySystem,").")):Y.a.warn("".concat(Qo," The server certificate has been ignored because it's not supported by the key system(").concat(i.keySystem,").")));case 9:case"end":return e.stop()}},e,this)})),function(e){return Yo.apply(this,arguments)})},{key:"queryMediaKeys_",value:function(){var a=this.drmInfo;return this.queryMediaKeysPromise_||(this.queryMediaKeysPromise_=new Promise(function(t,i){var e=[],n='audio/mp4; codecs="mp4a.40.5"',r='video/mp4; codecs="avc1.64001f"',e=void 0===MediaKeySystemAccess.prototype.getConfiguration?(Y.a.warn("Detected obsolete navigator.requestMediaKeySystem options style."),[{initDataType:"cenc",distinctiveIdentifier:"optional",persistentState:"optional",videoType:r,audioType:n}]):[{initDataTypes:["cenc"],distinctiveIdentifier:"optional",persistentState:"optional",videoCapabilities:[{contentType:r}],audioCapabilities:[{contentType:n}]}];navigator.requestMediaKeySystemAccess(a.keySystem,e).then(function(e){return e.getConfiguration(),e.createMediaKeys()},function(e){Y.a.error("".concat(Qo," requestMediaKeySystemAccess fail: ").concat(Object(he.i)(e)?e.message:e||"unknown")),i(0)}).then(function(e){t(e)},function(e){Y.a.error("".concat(Qo," createMediaKeys fail: ").concat(Object(he.i)(e)?e.message:e||"unknown")),i(1)})})),this.queryMediaKeysPromise_}},{key:"setMediaKeys_",value:(zo=Q()($.a.mark(function e(t,i){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setMediaKeysPromise_||(this.setMediaKeysPromise_=t.setMediaKeys(i)),e.abrupt("return",this.setMediaKeysPromise_);case 2:case"end":return e.stop()}},e,this)})),function(e,t){return zo.apply(this,arguments)})},{key:"createSession_",value:(Ho=Q()($.a.mark(function e(t,i,n){var r,a,o,s,c;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.runtime_,a=this.sessions,o=this.eventManager_,s=0;case 2:if(!(s<a.length)){e.next=8;break}if(function(e,t){if(!e&&!t)return 1;if(e&&t&&e.length==t.length){for(var i=0;i<e.length;++i)if(e[i]!=t[i])return;return 1}}(n,a[s].initData))return e.abrupt("return",Y.a.log("".concat(Qo," Ignoring duplicate init data.")));e.next=5;break;case 5:++s,e.next=2;break;case 8:e.prev=8,c=t.mediaKeys.createSession(),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(8),Y.a.error("".concat(Qo," ").concat(e.t0.message)),e.abrupt("return",r.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_FAILED_TO_CREATE_SESSION)));case 16:return a.push({initData:n,session:c,loaded:!1,oldExpiration:1/0}),o.on(c,"message",this.onMediaKeySessionMessage_.bind(this)).on(c,"keystatuseschange",this.onMediaKeySessionStatusChange_.bind(this)),e.next=20,c.generateRequest(i,n).catch(function(e){Y.a.error("".concat(Qo," Session.generateRequest fail: ").concat(Object(he.i)(e)?e.message:e||"unknown",", mediaKeys is ").concat(t?re()(t.mediaKeys):"placeholder")),r.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST))});case 20:case"end":return e.stop()}},e,this,[[8,12]])})),function(e,t,i){return Ho.apply(this,arguments)})},{key:"onMediaKeySessionMessage_",value:function(e){var a=this.runtime_,t=this.drmInfo,i=this.licenseRequests,o=this.mediaElem_,n=a.conf,s=e.target,r=e.message,c=e.messageType,e=t.licenseServerUri;if(!e)return a.throwError(new _e.a(_e.a.severity.CRITICAL,_e.a.category.DRM,me.a.DRM_NO_LICENSE_SERVER_GIVEN));Y.a.log("".concat(Qo," Sending license request for session ").concat(s.sessionId," of type ").concat(c,": ").concat(e));n=Object(Te.d)([e],Object(fe.a)(Object(Te.b)(),n.drm.retryParameters));n.method="POST",n.body=r,n.callbacks=Object(fe.a)(n.callbacks,{onSuccess:function(r){return Q()($.a.mark(function e(){var t,i,n;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.data,t=r.status,(i=i)&&0<i.byteLength)return n=new Uint8Array(i),Y.a.log("".concat(Qo," License got, updating session ").concat(s.sessionId)),e.prev=5,e.next=8,s.update(n);e.next=16;break;case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),Y.a.error("".concat(Qo," update() failed, ").concat(e.t0.message,", video.mediaKeys is ").concat(o?re()(o.mediaKeys):"placeholder",", ").concat(n,",")),a.throwError(new _e.a(_e.a.severity.RECOVERABLE,_e.a.category.DRM,me.a.DRM_LICENSE_RESPONSE_REJECTED,e.t0.message));case 14:e.next=18;break;case 16:Y.a.warn("".concat(Qo," License server status: ").concat(t,", data: ").concat(i?i.byteLength:"NULL")),a.throwError(new _e.a(_e.a.severity.CRITICAL,_e.a.category.DRM,204===t?me.a.DRM_SERVER_REJECT_BY_LICENSE_SDK:me.a.DRM_NO_LICENSE_SERVER_RESPONSE));case 18:case"end":return e.stop()}},e,null,[[5,10]])}))()},onError:function(){a.throwError(new _e.a(_e.a.severity.CRITICAL,_e.a.category.DRM,me.a.DRM_LICENSE_REQUEST_ERROR))},onTimeout:function(e,t){a.throwError(new _e.a(_e.a.severity.CRITICAL,_e.a.category.DRM,me.a.DRM_LICENSE_REQUEST_TIMEOUT))},onAbort:function(){},onComplete:function(){}}),t.keySystem!==U.PLAYREADY&&t.keySystem!==U.PLAYREADY_CC||this.unpackPlayReadyRequest_(n);n=Te.e.request(Se.a.LICENSE,n);i.push(n)}},{key:"unpackPlayReadyRequest_",value:function(e){var t=function(e,t){if(!e)return"";for(var i=e instanceof ArrayBuffer?e:((i=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),i.buffer),n=Math.floor(e.byteLength/2),r=new Uint16Array(n),a=new DataView(i),o=0;o<n;o++)r[o]=a.getUint16(2*o,t);return Me(r)}(e.body,!0);if(t.includes("PlayReadyKeyMessage")){for(var i=(new DOMParser).parseFromString(t,"application/xml"),n=i.getElementsByTagName("HttpHeader"),r=0;r<n.length;++r){var a=n[r].querySelector("name").textContent,o=n[r].querySelector("value").textContent;e.headers instanceof Headers?e.headers.append(a,o):e.headers[a]=o}var s=i.querySelector("Challenge");e.body=No(s.textContent).buffer}else{i="Content-Type",s="text/xml; charset=utf-8";e.headers instanceof Headers?e.headers.append(i,s):e.headers[i]=s}}},{key:"onMediaKeySessionStatusChange_",value:function(e){var t=e.target,e=t.keyStatuses;if(this.drmInfo.keySystem==U.PLAYREADY)this.onSessionStatusChangePlayready_(e,t.sessionId);else{var i,n=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Wo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Wo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(e.entries());try{for(n.s();!(i=n.n()).done;){var r=i.value,a=r[0],o=r[1],s=Ce(Bo(new Uint8Array(a)));Y.a.log("".concat(Qo," SessionId=").concat(t.sessionId," keyId=").concat(s," status=").concat(o))}}catch(e){n.e(e)}finally{n.f()}}}},{key:"onSessionStatusChangePlayready_",value:function(e,o){var s=this;e.forEach(function(e,t){var i,n,r,a;"string"==typeof t&&(a=t,t=e,e=a),s.drmInfo.keySystem==U.PLAYREADY&&16==t.byteLength&&(n=(i=new DataView(t)).getUint32(0,!0),r=i.getUint16(4,!0),a=i.getUint16(6,!0),i.setUint32(0,n,!1),i.setUint16(4,r,!1),i.setUint16(6,a,!1)),s.drmInfo.keySystem==U.PLAYREADY&&"status-pending"==e&&(e="usable");t=Ce(Bo(new Uint8Array(t)));Y.a.log("SessionId="+o+" keyId="+t+" status="+e)})}}]),Xo),$o=(c()(Zo,[{key:"playbackQuality",get:function(){var e,t=this.mediaElem_,i=0,n=0,r=0;return"function"==typeof t.getVideoPlaybackQuality?(n=(e=t.getVideoPlaybackQuality()).totalVideoFrames,r=e.droppedVideoFrames,i=n):(e=t.webkitDecodedFrameCount,t=t.webkitDroppedFrameCount,void 0!==e&&void 0!==t&&(i=e)),{totalVideoFrames:i,decodedVideoFrames:n,droppedVideoFrames:r}}},{key:"setup",value:function(e,t,i,n){this.runtime_=e,this.mediaElem_=i,this.stream_=t,this.dynamicStuckMonitorPeriod_=Object(he.g)(n)?n:e.conf.fpsStuckMonitoringPeriod}},{key:"onMSEAttaching",value:function(){this.checkFPSTimer_.scheduleRepeated(this.fpsFrequency_)}},{key:"startReportFPS",value:function(){this.shouldReport_=!0}},{key:"stopReportFPS",value:function(){this.shouldReport_=!1}},{key:"checkAndFixStuck_",value:function(e){var t=this.runtime_,i=this.mediaElem_,n=this.stream_,r=document.hidden;"boolean"==typeof r&&!r&&!i.paused&&4===i.readyState&&1<n.mediaBuffer.len&&(n.levelSwitching?this.decodeFrameStuckCount_=0:this.decodeFrameStuckCount_>this.dynamicStuckMonitorPeriod_?(t.ctx.emit(ze.a.FPS_STUCK),this.decodeFrameStuckCount_=0,t.ctx.recoverMedia()):0===e?this.decodeFrameStuckCount_++:this.decodeFrameStuckCount_=0)}},{key:"checkFPS_",value:function(e,t){var i,n,r=this.runtime_,a=performance.now();e&&(this.lastCheckFPSTime_&&(this.lastCheckFPSTime_,i=t-this.lastDroppedFrames_,n=e-this.lastDecodedFrames_,this.shouldReport_&&r.ctx.emit(ze.a.FPS_REPORT,{currentDropped:i,currentDecoded:n}),this.checkAndFixStuck_(n)),this.lastCheckFPSTime_=a,this.lastDroppedFrames_=t,this.lastDecodedFrames_=e)}},{key:"checkFPSInterval_",value:function(){var e,t;this.mediaElem_&&(e=(t=this.playbackQuality).totalVideoFrames,t=t.droppedVideoFrames,this.checkFPS_(e,t))}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.runtime_=null,this.stream_=null,this.shouldReport_=!1}},{key:"reset",value:function(){this.checkFPSTimer_&&this.checkFPSTimer_.cancel(),this.lastCheckFPSTime_=null,this.lastDroppedFrames_=null,this.lastDecodedFrames_=null}}]),Zo);function Zo(){var e=this;f()(this,Zo),this.checkFPSTimer_=new We.a(function(){return e.checkFPSInterval_()}),this.shouldReport_=!1,this.fpsFrequency_=1,this.decodeFrameStuckCount_=0}function Xo(){f()(this,Xo),this.sessions=[],this.licenseRequests=[],this.drmInfo=null,this.eventManager_=new be.a}function Jo(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;var i=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(i=.5);for(var n=0;n<e.length;n++)if(e.start(n)>t&&(0==n||e.end(n-1)-t<=i)&&0<n)return n;return null}var es=(c()(ts,[{key:"destroy",value:function(){this.reset(),this.mediaElem_=null}},{key:"reset",value:function(){this.stalled=null,this.nudgeRetry=0}},{key:"onMediaIdle",value:function(e){this.checkBuffer_(e)}},{key:"checkBuffer_",value:function(e){var t,i,n=this.runtime_,r=this.mediaElem_,a=this.plugin_,o=n.conf,s=r.currentTime,c=e.playHeadTime,d=this.mediaElem_;!n.error&&d&&a.sourceBufferManager&&!a.sourceBufferManager.bufferOperating&&(t=(i=a.sourceBufferManager).bufferInfo(s),i.hasVideoBuffer||i.hasAudioBuffer?(null===(e=Jo(r.buffered,s))?t.len<o.bufferExpectLength*Math.max(1,r.playbackRate)&&a.emit(ze.a.BUFFER_EXPECTING,t):[{type:"video",buffered:i.videoBuffered},{type:"audio",buffered:i.audioBuffered}].forEach(function(e,t,i){var n,r=e.type,a=e.buffered,o=Jo(a,s);Object(he.g)(o)&&0<o&&(n={start:a.start(o-1),end:a.end(o-1)},e={start:a.start(o),end:a.end(o)},Y.a.warn("met ".concat(r," gap, currentTime: ").concat(s,", gapIndex: ").concat(o,", gapRange: ").concat(n.end,"-").concat(e.start,", buffered length: ").concat(a.length)))}),0<=t.len&&(n=d.readyState,o=!(d.paused&&1<n||d.ended),d=performance.now(),0===t.len&&r.seeking&&(this.stalled=null),3<=n&&this.resetStalledGap(),s!==c?(this.stallReported&&(Y.a.warn("video not stuck anymore @".concat(s,", after ").concat(Math.round((d-this.stalled)/1e3),"s")),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0):o&&(o=this.stalled?d-this.stalled:0,this.stalled?(1e3<=o&&(this.stallReported||(this.stallReported=!0,Y.a.warn("video stalling @".concat(s," due to low buffer")))),i.updating||(i=i.bufferInfo(s),this.tryFixBufferStall_(i,o,e))):this.stalled=d))):a.emit(ze.a.BUFFER_EXPECTING,t))}},{key:"tryFixBufferStall_",value:function(e,t,i){var n=this.runtime_,r=this.mediaElem_;n.ctx.allowJumpGapDirectly&&null!==i?(n=r.buffered.start(i)+.08,Y.a.log("fix gap index ".concat(i,", jump to ").concat(n)),r.currentTime=n):.5<e.len&&t>this.stalledGap_&&(this.stalled=null,this.tryNudgeBuffer_())}},{key:"tryNudgeBuffer_",value:function(){var e=this.runtime_,t=this.mediaElem_,i=t.currentTime,n=(this.nudgeRetry||0)+1;this.nudgeRetry=n;var r=e.conf;n<=r.nudgeMaxRetry?(n=i+n*r.nudgeOffset,Y.a.log("adjust currentTime ".concat(i,"->").concat(n)),t.currentTime=n):(Y.a.error("still stuck in high buffer @".concat(i," after ").concat(r.nudgeMaxRetry)),e.throwError(new _e.a(ge.a.RECOVERABLE,ye.a.RENDERER,me.a.MEDIA_HIGH_BUFFER)))}},{key:"resetStalledGap",value:function(){var e=1e3*this.runtime_.conf.highBufferThreshold;this.stalledGap_=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?1e3+e:e}}]),ts);function ts(e,t,i){f()(this,ts),this.stalled=null,this.stallReported=!1,this.nudgeRetry=0,this.plugin_=e,this.runtime_=t,this.mediaElem_=i,this.stalledGap_=1e3*t.conf.highBufferThreshold}var is=(c()(ns,[{key:"updating",get:function(){var e=+new Date;return this.runtime_.conf.openTest&&1500<e-this._preLogTime&&(this._preLogTime=e,Y.a.log("=== check updating, testlog , \n            audioBufferUpdating = ".concat(this.audioBufferUpdating,",\n            videoBufferUpdating = ").concat(this.videoBufferUpdating,",\n            videoAppendStarted_ = ").concat(this.videoAppendStarted_,", \n            audioAppendStarted_= ").concat(this.audioAppendStarted_))),this.audioBufferUpdating||this.videoBufferUpdating||this.videoAppendStarted_||this.audioAppendStarted_}},{key:"videoBufferUpdating",get:function(){var e=this.videoSourceBuffer;return!!e&&e.updating}},{key:"audioBufferUpdating",get:function(){var e=this.audioSourceBuffer;return!!e&&e.updating}},{key:"bufferOperating",get:function(){return this.hasOperateBufferData||this.updating}},{key:"sourceBuffersCreated",get:function(){return this.sourceBuffersCreated_}},{key:"hasVideoBuffer",get:function(){return!!this.videoSourceBuffer}},{key:"hasAudioBuffer",get:function(){return!!this.audioSourceBuffer}},{key:"videoBuffered",get:function(){var e=null,t=this.videoSourceBuffer;return e=t?t.buffered:e}},{key:"audioBuffered",get:function(){var e=null,t=this.audioSourceBuffer;return e=t?t.buffered:e}},{key:"audioAppendStart",get:function(){if(Array.isArray(this.audioAddBufQueue_)){var e=this.audioAddBufQueue_[0];if(e.segment instanceof st.a)return e.segment.startTime}return null}},{key:"videoAppendStart",get:function(){if(Array.isArray(this.videoAddBufQueue_)){var e=this.videoAddBufQueue_[0];if(e.segment instanceof st.a)return e.segment.startTime}return null}},{key:"hasOperateBufferData",get:function(){var e=!1;return e=this.videoAddBufQueue_&&0<this.videoAddBufQueue_.length||this.audioAddBufQueue_&&0<this.audioAddBufQueue_.length||this.videoDelBufQueue_&&0<this.videoDelBufQueue_.length||this.audioDelBufQueue_&&0<this.audioDelBufQueue_.length?!0:e}},{key:"empty",get:function(){var e=this.videoSourceBuffer,t=this.audioSourceBuffer;return(!e||this.existInMSE_(e)&&0===e.buffered.length)&&(!t||this.existInMSE_(t)&&0===t.buffered.length)}},{key:"reset",value:function(){[this.videoAddBufQueue_,this.videoDelBufQueue_,this.audioAddBufQueue_,this.audioDelBufQueue_].forEach(function(e){0<e.length&&e.splice(0,e.length)}),this.unbind_(),this.appendTimer_.cancel(),this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAppendStarted_=this.audioAppendStarted_=!1,this.appendWindowStart=0,this.appendWindowEnd=Number.POSITIVE_INFINITY}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.appendTimer_=null,this.videoAddBufQueue_=this.audioAddBufQueue_=this.videoDelBufQueue_=this.audioDelBufQueue_=null,this.onUpdate_=this.onUpdateStart_=this.onUpdateEnd_=this.onError_=this.onAbort_=null}},{key:"abort",value:function(){var e=this.plugin_,t=this.videoSourceBuffer,i=this.audioSourceBuffer,n=this.videoBufferUpdating,r=this.audioBufferUpdating,e=e.mse;if(e&&"open"===e.readyState&&Object(he.b)(e.sourceBuffers)&&0<e.sourceBuffers.length){if(n&&this.existInMSE_(t))try{t.abort()}catch(e){Y.a.warn("video source buffer abort error, ".concat(e?e.message||e:""))}if(r&&this.existInMSE_(i))try{i.abort()}catch(e){Y.a.warn("audio source buffer abort error, ".concat(e?e.message||e:""))}}}},{key:"withinBuffer",value:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=this.audioSourceBuffer,t=this.videoSourceBuffer,i=[],o=[];return this.existInMSE_(e)&&i.push(e),this.existInMSE_(t)&&i.push(t),i.forEach(function(e){for(var t=e.buffered,i=0;i<t.length;i++)if(n>=t.start(i)+r&&n<t.end(i)-a){o.push(!0);break}}),o.length===i.length}},{key:"bufferInfo",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.runtime_.conf.maxBufferHole;switch(t){case"video":var n=this.videoSourceBuffer,r=this.existInMSE_(n)?n.buffered:null;break;case"audio":n=this.audioSourceBuffer;r=this.existInMSE_(n)?n.buffered:null;break;default:this.mediaElem_&&(r=this.mediaElem_.buffered)}return function(e,t,i){var n=[];if(t)for(var r=0;r<t.length;r++)n.push({start:t.start(r),end:t.end(r)});return function(e,t,i){var n,r,a,o,s,c=[];for(e.sort(function(e,t){return e.start-t.start||t.end-e.end}),s=0;s<e.length;s++){var d,u=c.length;u?(d=c[u-1].end,e[s].start-d<i?e[s].end>d&&(c[u-1].end=e[s].end):c.push(e[s])):c.push(e[s])}for(n=s=0,r=a=t;s<c.length;s++){var l=c[s].start,h=c[s].end;if(l<=t+i&&t<h)r=l,n=(a=h)-t;else if(t+i<l){o=l;break}}return{len:n,start:r,end:a,nextStart:o}}(n,e,i)}(e,r,i)}},{key:"clearOperateBuffers",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t="audio"!==e;[{clear:"video"!==e,bufQueue:this.audioAddBufQueue_},{clear:t,bufQueue:this.videoAddBufQueue_}].forEach(function(e){var t=e.clear,i=e.bufQueue;t&&0<i.length&&(n?(t=i.filter(function(e){return e.segment instanceof ot.a}),i.splice(0,i.length),t.forEach(function(e){return i.push(e)})):i.splice(0,i.length))})}},{key:"onMSEDetaching",value:function(){this.abort()}},{key:"onBufferCreated",value:function(e){this.unbind_(),this.sourceBuffersCreated_=!0,this.existInMSE_(e.videoSourceBuffer)&&(this.videoSourceBuffer=e.videoSourceBuffer),this.existInMSE_(e.audioSourceBuffer)&&(this.audioSourceBuffer=e.audioSourceBuffer),this.bind_(),this.checkAppend_()}},{key:"onBufferAppending",value:function(t){for(var r=this,e=0;e<t.length;e++)!function(e){var i=t[e],n=i.type;i.bytesArray.forEach(function(e,t){(1===n?r.videoAddBufQueue_:r.audioAddBufQueue_).push({bufferSource:e,index:t,segment:i})})}(e);(0<this.videoAddBufQueue_.length||0<this.audioAddBufQueue_.length)&&this.appending_()}},{key:"onBufferFlushing",value:function(e,t,i){var n=this.plugin_,r=this.empty,a=this.videoSourceBuffer,o=this.audioSourceBuffer;r||"closed"===n.mse.readyState?setTimeout(function(){n.emit(ze.a.BUFFER_FLUSHED)},10):(!a||i&&"video"!==i||this.videoDelBufQueue_.push({start:e,end:t}),!o||i&&"audio"!==i||this.audioDelBufQueue_.push({start:e,end:t}),this.flushing_())}},{key:"existInMSE_",value:function(e){var t=this.plugin_,i=!1;if(!t.mse||!e)return i;var n=t.mse.sourceBuffers;if(Object(he.b)(n))for(var r=0;r<n.length;r++)if(n[r]===e){i=!0;break}return i}},{key:"intersectBuffer_",value:function(e,t,i){var n=!1;if(e)for(var r,a,o=e.buffered,s=0;s<o.length;s++)if(r=o.start(s),a=o.end(s),!(i<=r||a<=t)){n=!0;break}return n}},{key:"appending_",value:function(){var u=this,e=this.plugin_,l=this.runtime_,h=this.mediaElem_,t=this.videoSourceBuffer,i=this.audioSourceBuffer;if(!(l.error||h&&h.error))if("closed"!==e.mse.readyState&&(t||i)){e.emit(ze.a.BUFFER_APPENDING);for(var n=[{contentType:"video",sb:t,adds:this.videoAddBufQueue_},{contentType:"audio",sb:i,adds:this.audioAddBufQueue_}],r=0;r<n.length;r++){var f=n[r],p=f.sb,_=!1;if(0<f.adds.length&&p&&!p.updating&&"break"===function(){var t=f.adds.shift(),e=t.bufferSource,i=t.index,n=t.segment,t=n.byteLength,r=f.contentType;"video"===r?u.videoAppendStarted_=!0:"audio"===r&&(u.audioAppendStarted_=!0);try{var a,o,s,c,d=1===n.type?"video":"audio";n instanceof st.a?(s=(a=n.startTime)+(o=n.duration),c=(1===n.bytesArray.length?"":"".concat(i+1,"/").concat(n.bytesArray.length," pieces of ")).concat(d),Y.a.log("append ".concat(c," buffer, start/end/duration(").concat(a.toFixed(3),"/").concat(s.toFixed(3),"/").concat(o.toFixed(3),")"))):n instanceof ot.a&&Y.a.log("append ".concat(d," initSegment")),p.bufferedLength_=p.buffered.length,p.updateType_="+",p.appendBuffer(e)}catch(e){Y.a.warn("".concat(r," sourceBuffer, append/currentTime/readyState(").concat(t,"/").concat(u.mediaElem_.currentTime,"/").concat(h.readyState,"): ").concat(e.stack||e.message)),_=!0,setTimeout(function(){22===e.code?l.throwError(new _e.a(ge.a.RECOVERABLE,ye.a.RENDERER,me.a.MEDIA_QUOTA_EXCEEDED,r)):l.throwError(new _e.a(ge.a.CRITICAL,ye.a.RENDERER,me.a.MEDIA_SOURCE_OPERATION_THREW,r,e))},0)}if(_)return"break"}())break}}else this.appendTimer_.cancel(),this.appendTimer_.schedule(.1)}},{key:"flushing_",value:function(){var r=this,e=this.plugin_,a=this.audioSourceBuffer,t=this.videoSourceBuffer,o=e.mse.readyState,s=!1;return[a,t].filter(function(e){return r.existInMSE_(e)}).forEach(function(e){if("closed"===o||e.updating)"open"!==o&&Y.a.warn("flushing sb.updating: ".concat(e.updating,", mediaSource state: ").concat(o));else{for(var t,i=e===a?"audio":"video",n=e===a?r.audioDelBufQueue_:r.videoDelBufQueue_;n.length&&(t=n.shift(),!r.intersectBuffer_(e,t.start,t.end));)t=null;t&&(t.end===Number.POSITIVE_INFINITY&&(t.end=e.buffered.end(e.buffered.length-1)),e.bufferedLength_=e.buffered.length,e.updateType_="-",s=!0,Y.a.log("flushing ".concat(i," [").concat(t.start,",").concat(t.end,"] of ").concat(e.buffered.length," ranges, pos:").concat(r.mediaElem_.currentTime)),e.remove(t.start,t.end))}}),s}},{key:"bind_",value:function(){var i=this;[{contentType:"video",sourceBuffer:this.videoSourceBuffer},{contentType:"audio",sourceBuffer:this.audioSourceBuffer}].filter(function(e){return i.existInMSE_(e.sourceBuffer)}).forEach(function(e){var t=e.contentType,e=e.sourceBuffer;i.eventManager_.on(e,"updatestart",i.onUpdateStart_.bind(i)),i.eventManager_.on(e,"update",i.onUpdate_.bind(i)),i.eventManager_.on(e,"updateend",i.onUpdateEnd_.bind(i)),i.eventManager_.on(e,"abort",i.onAbort_.bind(i)),i.eventManager_.on(e,"error",i.onError_.bind(i,t))})}},{key:"unbind_",value:function(){this.eventManager_.removeAll()}},{key:"onUpdateStart_",value:function(e){var t=this.videoSourceBuffer,i=this.audioSourceBuffer,n=void 0,e=e.target;t&&e===t?n="video":i&&e===i&&(n="audio"),Y.a.log("".concat(n," source buffer update start"))}},{key:"onUpdate_",value:function(e){var t=this.videoSourceBuffer,i=this.audioSourceBuffer,e=e.target;t&&e===t?this.videoAppendStarted_=!1:i&&e===i&&(this.audioAppendStarted_=!1)}},{key:"onUpdateEnd_",value:function(e){var t,i=this.plugin_,n=this.videoSourceBuffer,r=this.audioSourceBuffer,a=void 0,o=e.target,e=o.bufferedLength_;if(n&&o===n?t="video":r&&o===r&&(t="audio"),"+"===o.updateType_?a="append":"-"===o.updateType_&&(a="remove"),i.emit(ze.a.BUFFER_UPDATED,{target:o,sourceBufferType:t,operateType:a,previousBufferedLength:e,vsb:n,asb:r}),0<this.videoDelBufQueue_.length||0<this.audioDelBufQueue_.length){if(this.flushing_())return}else"-"===o.updateType_&&(o.updateType_="",i.emit(ze.a.BUFFER_FLUSHED));0<this.videoAddBufQueue_.length||0<this.audioAddBufQueue_.length?this.appending_():"+"===o.updateType_&&(o.updateType_="",i.emit(ze.a.BUFFER_APPENDED)),Y.a.log("".concat(t," source buffer update end")+"".concat(""))}},{key:"onAbort_",value:function(){this.audioAppendStarted_=this.audioAppendStarted_=!1,Y.a.warn("source buffer met abort.'")}},{key:"onError_",value:function(e,t){var i=this.runtime_,n=this.appendTimer_,r=this.mediaElem_,a=t.timeStamp,o=t.target,s=t.currentTarget,c=t.srcElement,t=r.error||{},r=t.code,t=t.message,c=s||o||c;n.cancel(),this.audioAppendStarted_=this.videoAppendStarted_=!1,Y.a.error("".concat(e," source buffer met error, timeStamp(").concat(a,"), mode(").concat(c.mode,"), mediaError(").concat(r,"/").concat(t,")")),i.throwError(new _e.a(ge.a.RECOVERABLE,ye.a.RENDERER,me.a.MEDIA_SOURCE_OPERATION_FAILED))}},{key:"checkAppend_",value:function(){(0<this.videoAddBufQueue_.length||0<this.audioAddBufQueue_.length)&&(this.appending_(),this.appendTimer_.schedule(.1))}}]),ns);function ns(e,t,i){var n=this;f()(this,ns),this.eventManager_=new be.a,this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAddBufQueue_=[],this.audioAddBufQueue_=[],this.videoDelBufQueue_=[],this.audioDelBufQueue_=[],this.appendTimer_=new We.a(function(){return n.checkAppend_()}),this.audioAppendStarted_=!1,this.videoAppendStarted_=!1,this._preLogTime=+new Date,this.appendWindowEnd=Number.POSITIVE_INFINITY,this.appendWindowStart=0,this.plugin_=e,this.runtime_=t,this.mediaElem_=i}var rs=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).sourceBuffers_={},e.numberOfSourceBuffersExpected_=2,e}return c()(r,[{key:"mse",get:function(){return this.mse_}},{key:"isEndOfStream",get:function(){return"ended"===this.mse_.readyState}},{key:"setup",value:function(e,t){this.runtime_=e,this.mediaElem_=t,this.eventManager_=new be.a,this.sourceBufferManager=new is(this,e,t),this.gapManager=new es(this,e,t)}},{key:"appendBuffer",value:function(e){for(var t=this.sourceBuffers_,i=!1,n=0;n<e.length;n++){var r=e[n],a=r.type;t[a]||(t[a]={created:!1,sourceBuffer:null,segment:r},i=!0)}i&&this.tryCreateSourceBuffers_(),this.sourceBufferManager.onBufferAppending(e)}},{key:"reset",value:function(){var e;null===(e=this.gapManager)||void 0===e||e.reset(),null===(e=this.sourceBufferManager)||void 0===e||e.reset(),this.detachMediaElement_(),this.sourceOpenEventTrulyFired_=!1,Y.a.log("new MediaSource"),this.mse_=new MediaSource,this.attachMediaElement_()}},{key:"destroy",value:function(){this.detachMediaElement_(),this.sourceBufferManager&&(this.sourceBufferManager.destroy(),this.sourceBufferManager=null),this.eventManager_&&(this.eventManager_.destroy(),this.eventManager_=null),this.runtime_=null,this.mediaElem_=null,this.mse_=null,this.sourceOpenEventTrulyFired_=!1,this.sourceBuffers_={}}},{key:"endOfStream",value:function(){var e=this.mediaElem_,t=this.mse_,i="open"===t.readyState,n=1<=e.readyState;if(i&&n)return this.sourceBufferManager&&this.sourceBufferManager.updating&&this.abortSourceBuffer(),Y.a.log("end of stream!"),t.endOfStream(),!0;e="no reason";return i?n||(e="video readyState(".concat(t.readyState,") has no metadata")):e="mediaSource readyState is ".concat(t.readyState),Y.a.log("end of stream, but ".concat(e)),!1}},{key:"attachMediaElement_",value:function(){this.bind_(),this.emit(ze.a.MSE_ATTACHING,this.mse_)}},{key:"detachMediaElement_",value:function(){this.emit(ze.a.MSE_DETACHING),this.removeSourceBuffers_(),this.unbind_(),this.emit(ze.a.MSE_DETACHED)}},{key:"tryCreateSourceBuffers_",value:function(){var t=this.runtime_,e=this.mse_,i=this.sourceBuffers_,n=this.sourceOpenEventTrulyFired_,r=this.numberOfSourceBuffersExpected_,a=Object.keys(i).length;if(e&&"open"===e.readyState&&n&&r===a){var o,s={};for(o in i){var c=parseInt(o,10),d=i[c],u=d.segment,l=void 0;if(!d.created)try{var h="".concat(u.container,";codecs=").concat(u.codec);Y.a.log("creating sourceBuffer(".concat(h,")")),l=e.addSourceBuffer("".concat(h)),d.created=!0,d.sourceBuffer=l}catch(e){return Y.a.error("mse add source error ".concat(e.stack||e.message)),t.throwError(new _e.a(ge.a.RECOVERABLE,ye.a.RENDERER,me.a.MEDIA_SOURCE_OPERATION_FAILED))}1===c?s.videoSourceBuffer=l:2===c&&(s.audioSourceBuffer=l)}this.emit(ze.a.BUFFER_CREATED,s),this.sourceBufferManager.onBufferCreated(s)}else Y.a.log("mse readystate/sourceopen(".concat(e?e.readyState:null,"/").concat(n,"), expected/got(").concat(r,"/").concat(a,")"))}},{key:"removeSourceBuffers_",value:function(){var e=this.mse_,t=this.sourceBuffers_;if(t&&0<Object.keys(t).length){for(var i in t){var n=t[i],i=n.sourceBuffer;n.sourceBuffer=null;try{n.created&&i&&e.removeSourceBuffer(i)}catch(e){}}this.sourceBuffers_={}}}},{key:"bind_",value:function(){var e=this.mse_,t=this.eventManager_;t.on(e,"error",this._onError.bind(this)),t.on(e,"opened",this._onOpened.bind(this)),t.on(e,"closed",this._onClosed.bind(this)),t.on(e,"sourceopen",this._onSourceOpened.bind(this)),t.on(e,"sourceended",this._onSourceEnded.bind(this))}},{key:"unbind_",value:function(){var e=this.eventManager_;e&&e.removeAll()}},{key:"_onError",value:function(){}},{key:"_onOpened",value:function(){}},{key:"_onClosed",value:function(){this.mse_}},{key:"_onSourceOpened",value:function(){this.runtime_;var e=this.mse_,t=this.eventManager_,i=this.mediaElem_;e.sourceBuffers&&0<e.sourceBuffers.length?Y.a.log("mse opened error, buffer length = ".concat(e.sourceBuffers.length)):(this.sourceOpenEventTrulyFired_=!0,Y.a.log("media source opened"),this.emit(ze.a.MSE_ATTACHED,e),URL.revokeObjectURL(i.src),t.off(e,"sourceopen"),this.tryCreateSourceBuffers_())}},{key:"_onSourceEnded",value:function(){}},{key:"abortSourceBuffer",value:function(){this.sourceBufferManager&&this.sourceBufferManager.abort()}}]),r}(Ie.EventEmitter),as=d(422);Ja=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},G=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this,Object.assign(Object.assign({},e),{pkg:as,watch:[e.stream.mux?"mux":"loader","renderer","audio"]}))).$TAG="Media",t.playing_=!1,t.emePlugin_=new Ko,t.msePlugin_=new rs,t.fpsPlugin_=new $o,t.idleTimer_=new We.a(function(){return t.checkIdle()}),t.tryDecodeBlobUrl_=!1,t._preLogTime=+new Date,t}return c()(a,[{key:"currentTime",get:function(){return this.mediaElement?this.mediaElement.currentTime:0},set:function(e){var t=this.readyState,i=this.mediaElement;Object(he.g)(e)&&i&&(this.playHeadTime=e,0<t&&(this.mediaElement.currentTime=e))}},{key:"duration",get:function(){return this.mediaElement?this.mediaElement.duration:NaN}},{key:"mediaElement",get:function(){return this.mediaElem_}},{key:"readyState",get:function(){return this.mediaElem_?this.mediaElem_.readyState:0}},{key:"paused",get:function(){return!this.mediaElem_||this.mediaElem_.paused}},{key:"ended",get:function(){return!this.mediaElem_||this.mediaElem_.ended}},{key:"loop",get:function(){return!!this.mediaElem_&&this.mediaElem_.loop},set:function(e){this.mediaElem_&&(this.mediaElem_.loop=e)}},{key:"playbackRate",get:function(){var e=1;return e=this.mediaElem_&&"number"!=typeof(e=this.mediaElem_.playbackRate)?1:e}},{key:"buffered",get:function(){return this.mediaElem_?this.mediaElem_.buffered:null}},{key:"error",get:function(){return this.mediaElem_?this.mediaElem_.error:null}},{key:"seeking",get:function(){return!!this.mediaElem_&&this.mediaElem_.seeking}},{key:"updating",get:function(){return!!this.s_&&this.s_.updating}},{key:"buffer",get:function(){var e=this.playHeadTime;return Object.assign(Object.assign({},this.bufferInfo(e)),{buffered:{video:this.bufferInfo(e,"video"),audio:this.bufferInfo(e,"audio")}})}},{key:"hasOperateBufferData",get:function(){return!!this.s_&&this.s_.hasOperateBufferData}},{key:"bufferOperating",get:function(){return!!this.s_&&this.s_.bufferOperating}},{key:"drmInfo",set:function(e){this.drmConfig_=e,this.emePlugin_.setDrmInfo(e)}},{key:"takeoverMediaControl",value:function(){Y.a.log("".concat(this.LOG_TAG," takeover media control")),this.initMediaContainer_(),this.initPlugin_(),this.bind_(),this.reset()}},{key:"releasedMediaControl",value:function(){var e,t=this.LOG_TAG,i=this.mediaElem_,n=this.blobUrl_,r=this.idleTimer_;i&&(e=i.src,Y.a.log("".concat(t," release media control, ").concat(e,", ").concat(e===n)),r.cancel(),this.unbind_(),this.unloadPlugin_(),e===n&&(i.removeAttribute("src"),i.load()),this.blobUrl_=null,this.mediaElem_=null)}},{key:"initMediaContainer_",value:function(){var e=this.$krt.rootElement;e instanceof HTMLVideoElement?this.mediaElem_=e:e instanceof HTMLMediaElement||(this.mediaElem_=document.createElement("video"),e.appendChild(this.mediaElement))}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,i=t.mux?e.mux:e.loader,n=this.$selfArtifact!==e.renderer,r=this.depsArtefact_!==i,a=this.audioArtefact_!==e.audio;r&&(this.depsArtefact_=i),n&&(this.$selfArtifact=e.renderer),a&&(this.audioArtefact_=e.audio),(r||a)&&(r&&(i=i.segments,Array.isArray(i)&&0<i.length&&i.filter(function(e){return e instanceof ot.a}).forEach(function(e){switch(e.type){case 2:t.audioTrack.initSegment=e;break;case 1:t.videoTrack.initSegment=e}})),this.checkIdle())}},{key:"hasUnConsumedArtefact_",value:function(){var e=this.variantAudioMode,t=this.depsArtefact_,i=this.audioArtefact_,t=!!t&&!Object(he.c)(t);return e&&(i=!!i&&!Object(he.c)(i),t=t||i),t}},{key:"tryAppendBuffer_",value:function(){if(!this.hasUnConsumedArtefact_())return!1;var e=this.$stream,t=this.variantAudioMode,i=this.depsArtefact_,n=this.audioArtefact_,r=this.$selfArtifact,i=(null==i?void 0:i.segments)||[],n=(null==n?void 0:n.segments)||[],a=[];if(t?0<i.filter(function(e){return 2===e.type&&e instanceof st.a}).length?e.audioSegmentSynced&&0<n.length&&(a=i.filter(function(e){return 1===e.type}).concat(n)):a=i.filter(function(e){return 1===e.type}):a=i,0<a.length){for(var o=!1,s=[],c=!1,d=0;d<a.length;d++){var u,l=a[d];l&&(o||(u=this.currentTime,(u=e.loader.findPieceAt(u))&&u.segment&&(0<(u=u.segment.startTime-1)&&this.$withinBuffer(u)&&this.$flushBuffer(0,u)),o=!0),c=c||l instanceof st.a,s.push(l))}if(0<s.length)return c&&(r&&!1===r.expectingBuffer||this.$provideArtefact({expectingBuffer:!1})),this.msePlugin_.appendBuffer(s),this.$consumeArtefact(e.mux?"mux":"loader"),t&&0<n.length&&this.$consumeArtefact("audio"),!0}return!1}},{key:"initPlugin_",value:function(){this.emePlugin_.setup(this.$krt,this.mediaElem_,this.drmConfig_),this.msePlugin_.setup(this.$krt,this.mediaElem_),this.s_=this.msePlugin_.sourceBufferManager,this.fpsPlugin_.setup(this.$krt,this.$stream,this.mediaElem_,this.$stream.manifest.dynamicStuckMonitorPeriod)}},{key:"unloadPlugin_",value:function(){this.s_=null,this.msePlugin_.destroy(),this.emePlugin_.destroy(),this.fpsPlugin_.destroy()}},{key:"onMSEAttaching_",value:function(e){var t=this.$stream,i=this.mediaElement,n=this.fpsPlugin_;t.emit(ze.a.MSE_ATTACHING,{stream:t}),this.playHeadTime=0,i.load(),this.blobUrl_=URL.createObjectURL(e),Y.a.log("DomString: ".concat(this.blobUrl_,", ").concat(this.tryDecodeBlobUrl_)),this.tryDecodeBlobUrl_&&/%3A\/\//g.test(this.blobUrl_)&&(this.blobUrl_=decodeURIComponent(this.blobUrl_),i.blobUrlMalformed=!0,Y.a.log("DecodedDomString: ".concat(this.blobUrl_))),this.tryDecodeBlobUrl_=!1,i.src=this.blobUrl_,n.onMSEAttaching()}},{key:"onMSEAttached_",value:function(e){var t=this.$stream;e.duration=t.loader.duration,t.emit(ze.a.MSE_ATTACHED,e)}},{key:"onMseBufferCreated_",value:function(){var e=this.$stream;e.emit(ze.a.BUFFER_CREATED,{stream:e})}},{key:"onMseAppending_",value:function(e){var t=this.$stream;t.emit(ze.a.BUFFER_APPENDING,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseUpdated_",value:function(e){var t=this.$krt,i=this.msePlugin_,n=this.$stream,r=this.mediaElem_,a=e.sourceBufferType,o=e.operateType,s=e.previousBufferedLength,e=e.vsb;t.conf.alwaysSeekKeyframe&&"append"===o&&"video"===a&&0===s&&e&&0<e.buffered.length&&(a=e.buffered.start(0),s=e.buffered.end(0),e=r.currentTime,jo.a.EDGE&&(a+=.08),e=e.toFixed(3),a=a.toFixed(3),s=s.toFixed(3),e!==a&&e!==s&&(Y.a.log("Due to alwaysSeekKeyframe, seeking to video buffered start@".concat(a,", cur(").concat(e,")")),n.seekingMayIgnored=!0,r.currentTime=parseFloat(a))),this.isSatisfyEosCondition()?i.endOfStream():this.hasOperateBufferData||this.updating||this.checkIdle()}},{key:"onMseAppended_",value:function(e){var t=this.$stream;t.emit(ze.a.BUFFER_APPENDED,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseBufferExpect_",value:function(e){var t=this.$stream,i=this.$selfArtifact;if(!this.$error&&this.error)return Y.a.log("The event is not fired by media elem"),void this.onError_();t.shouldFireError(e)?this.$throwError(null,{immediately:!0}):this.tryAppendBuffer_()||i&&!0===i.expectingBuffer||this.$provideArtefact({expectingBuffer:!0})}},{key:"onMseBufferFlushed_",value:function(){this.$stream.emit(ze.a.BUFFER_FLUSHED)}},{key:"isSatisfyEosCondition",value:function(){var e=this.$stream,t=this.variantAudioMode,i=e.loader,n=e.mux,r=e.audio,a=this.msePlugin_,e=+new Date;return this.$krt.conf.openTest&&1500<e-this._preLogTime&&(this._preLogTime=e,Y.a.log("=== check isSatisfyEosCondition, testlog,  mux.idle = ".concat(!n||n.idle,", \n            hasUnConsumedArtefact_ = ").concat(this.hasUnConsumedArtefact_(),",\n            hasOperateBufferData = ").concat(a.sourceBufferManager.hasOperateBufferData,",\n            updating = ").concat(a.sourceBufferManager.updating,", \n            isEndOfStream= ").concat(!a.isEndOfStream))),(t?i.eof&&r.eof:!i||i.eof)&&(!n||n.idle)&&!this.hasUnConsumedArtefact_()&&this.isSafetyToEOS_()}},{key:"isSafetyToEOS_",value:function(){var e=this.msePlugin_;return!e.sourceBufferManager.hasOperateBufferData&&!e.sourceBufferManager.updating&&!e.isEndOfStream}},{key:"play",value:function(){this.mediaElement.play()}},{key:"pause",value:function(){this.mediaElement.pause()}},{key:"recoverAt",value:function(e){this.$error&&this.$error.code===me.a.MEDIA_VIDEO_ERROR&&null==this.$error.message&&(this.tryDecodeBlobUrl_=!0),v()(p()(a.prototype),"recoverAt",this).call(this,e);var e=this.msePlugin_;this.$stream.seekingMayIgnored=!0,this.releasedMediaControl(),this.takeoverMediaControl(),null===(e=e.gapManager)||void 0===e||e.resetStalledGap(!0)}},{key:"reset",value:function(){var e=this.fpsPlugin_,t=this.msePlugin_,i=this.emePlugin_;this.idleTimer_.schedule(0),t.abortSourceBuffer(),e.reset(),i.reset(),t.reset(),this.playing_=!1}},{key:"destroy",value:function(){v()(p()(a.prototype),"destroy",this).call(this),this.drmConfig_=null,this.releasedMediaControl()}},{key:"checkIdle",value:function(){var e=this.$krt,t=this.idleTimer_,i=this.msePlugin_;t.running&&(e.error||i&&(null===(i=i.gapManager)||void 0===i||i.onMediaIdle({playHeadTime:this.playHeadTime})),t.schedule(.1))}},{key:"bind_",value:function(){var e=this.$eventManager,t=this.mediaElem_,i=this.msePlugin_;e.on(i,ze.a.MSE_ATTACHING,this.onMSEAttaching_.bind(this)).on(i,ze.a.MSE_ATTACHED,this.onMSEAttached_.bind(this)).on(i,ze.a.BUFFER_CREATED,this.onMseBufferCreated_.bind(this)).on(i,ze.a.BUFFER_APPENDING,this.onMseAppending_.bind(this)).on(i,ze.a.BUFFER_UPDATED,this.onMseUpdated_.bind(this)).on(i,ze.a.BUFFER_APPENDED,this.onMseAppended_.bind(this)).on(i,ze.a.BUFFER_EXPECTING,this.onMseBufferExpect_.bind(this)).on(i,ze.a.BUFFER_FLUSHED,this.onMseBufferFlushed_.bind(this)),e.on(t,"error",this.onError_.bind(this)).on(t,"encrypted",this.onEncrypted_.bind(this)).on(t,"canplay",this.onCanplay_.bind(this)).on(t,"loadstart",this.onLoadstart_.bind(this)).on(t,"loadedmetadata",this.onLoadedMetadata_.bind(this)).on(t,"playing",this.onPlaying_.bind(this)).on(t,"waiting",this.onWaiting_.bind(this)).on(t,"pause",this.onPause_.bind(this)).on(t,"ended",this.onEnded_.bind(this)).on(t,"timeupdate",this.onTimeUpdate_.bind(this)).on(t,"seeking",this.onSeeking_.bind(this)).on(t,"seeked",this.onSeeked_.bind(this))}},{key:"unbind_",value:function(){this.$eventManager.removeAll()}},{key:"onError_",value:function(){var e=null===(e=this.mediaElem_)||void 0===e?void 0:e.error;if(e){var t=e.code,i=e.msExtendedCode,n=e.message;switch(t){case 1:break;case 2:case 3:case 4:i&&(i<0&&(i+=Math.pow(2,32)),i=i.toString(16)),Y.a.error("".concat(this.LOG_TAG," error, code(").concat(t,"), message(").concat(n,"), extended(").concat(i,"), readyState(").concat(this.readyState,")"));var r=me.a.MEDIA_VIDEO_ERROR;/PIPELINE_ERROR_DECODE/.test(n)?r=/video decode error/.test(n)?me.a.MEDIA_VIDEO_DECODE_ERROR:/VDA Error/.test(n)?me.a.MEDIA_VDA_ERROR:me.a.MEDIA_PIPELINE_ERROR_DECODE:/AUDIO_RENDERER/.test(n)?r=me.a.MEDIA_AUDIO_RENDERER_ERROR:/URL safety check/.test(n)&&(r=me.a.MEDIA_URL_SAFE_REJECTED);r=new _e.a(ge.a.RECOVERABLE,ye.a.RENDERER,r,t,n,i);r.message=n,this.$throwError(r,{immediately:!0})}}}},{key:"onTimeUpdate_",value:function(){var t,e,i,n,r,a=this.currentTime,o=this.readyState;this.paused||o<=1||this.playHeadTime===a||(t=this.mediaElem_,e=this.seeking,i=this.duration,n=this.appendWindowEnd,0<(this.playHeadTime=a)&&n<=a&&!e?(r=this,t.addEventListener("pause",function e(){t.removeEventListener("pause",e,!1),r.noticeStreamStop_("timer")},!1),this.pause()):3<=o&&((o=new Event("playing")).isSimulating_=!0,this.onPlaying_(o)),i<a+.5&&this.stateChange_("willended"),e||this.stateChange_("timeupdate"))}},{key:"onLoadstart_",value:function(){this.stateChange_("loadstart")}},{key:"onLoadedMetadata_",value:function(){this.stateChange_("loadedmetadata")}},{key:"onCanplay_",value:function(){this.stateChange_("canplay")}},{key:"onSeeking_",value:function(){var e=this.$krt,t=this.msePlugin_,i=this.currentTime,n=this.duration,r=this.buffer;if(this.playing_=!1,this.playHeadTime=i,Y.a.log("seeking(".concat(i,"), duration(").concat(n,")")),null===(t=t.gapManager)||void 0===t||t.resetStalledGap(!0),jo.a.SAFARI){if(i<e.conf.safariMinStartTime)return void(this.currentTime=e.conf.safariMinStartTime)}else if(i<1&&0<r.len){r=r.start;if(r<1&&i<r)return void(this.currentTime=r)}1<n&&n-1<i?this.currentTime=n-1:this.stateChange_("seeking")}},{key:"onSeeked_",value:function(){this.stateChange_("seeked")}},{key:"onPause_",value:function(){this.playing_=!1,this.stateChange_("pause")}},{key:"onEnded_",value:function(){this.stateChange_("beforeended"),this.stateChange_("ended"),this.stateChange_("afterended")}},{key:"onPlaying_",value:function(e){!this.playing_&&(!e.isSimulating_&&1<this.readyState||e.isSimulating_)&&(this.playing_=!0,this.stateChange_("playing"))}},{key:"onWaiting_",value:function(){this.playing_=!1,this.stateChange_("waiting")}},{key:"onEncrypted_",value:function(e){this.$stream.emit(ze.a.STREAM_ENCRYPTED,e)}},{key:"noticeStreamStop_",value:function(e){Y.a.log("stream stop, by the ".concat(e)),this.onEnded_()}},{key:"stateChange_",value:function(e){var t=this.$stream;t.emit(ze.a.STATE_CHANGE,{stream:t,state:e})}},{key:"$withinBuffer",value:function(e){return this.s_.withinBuffer(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)}},{key:"$flushBuffer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;this.s_&&this.s_.onBufferFlushing(e,t,2<arguments.length?arguments[2]:void 0)}},{key:"bufferInfo",value:function(e,t){return this.s_?this.s_.bufferInfo(e,t,this.$krt.conf.maxBufferHole):{len:0,start:0,end:0}}},{key:"$drainBuffer",value:function(e){v()(p()(a.prototype),"$drainBuffer",this).call(this,e),this.depsArtefact_=null,this.audioArtefact_=null}},{key:"$clearOperateBuffers",value:function(e){this.s_&&this.s_.clearOperateBuffers(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1])}},{key:"startReportFPS",value:function(){this.fpsPlugin_.startReportFPS()}},{key:"stopReportFPS",value:function(){this.fpsPlugin_.stopReportFPS()}}]),a}(Uo);Ja([r.c],G.prototype,"currentTime",null),Ja([r.c],G.prototype,"duration",null),Ja([r.c],G.prototype,"mediaElement",null),Ja([r.c],G.prototype,"play",null),Ja([r.c],G.prototype,"pause",null),Ja([r.c],G.prototype,"startReportFPS",null),Ja([r.c],G.prototype,"stopReportFPS",null);function os(){return Math.random().toString(36).substring(7).split("").join(".")}var ss=d(378),cs={INIT:"@@redux/INIT"+os(),REPLACE:"@@redux/REPLACE"+os(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+os()}};function ds(e,t,i){if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(ds)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var n=e,r=t,a=[],o=a,s=!1;function c(){o===a&&(o=a.slice())}function d(){if(s)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return r}function u(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(s)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var i=!0;return c(),o.push(t),function(){if(i){if(s)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");i=!1,c();var e=o.indexOf(t);o.splice(e,1),a=null}}}function l(e){if(!function(e){if("object"==typeof e&&null!==e){for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw new Error("Reducers may not dispatch actions.");try{s=!0,r=n(r,e)}finally{s=!1}for(var t=a=o,i=0;i<t.length;i++)(0,t[i])();return e}return l({type:cs.INIT}),(t={dispatch:l,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");n=e,l({type:cs.REPLACE})}})[ss.a]=function(){var e,i=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(d())}return t(),{unsubscribe:i(t)}}})[ss.a]=function(){return this},e},t}function us(e){for(var t=Object.keys(e),u={},i=0;i<t.length;i++){var n=t[i];"function"==typeof e[n]&&(u[n]=e[n])}var l,r,h=Object.keys(u);try{r=u,Object.keys(r).forEach(function(e){var t=r[e];if(void 0===t(void 0,{type:cs.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:cs.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+cs.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){l=e}return function(e,t){if(void 0===e&&(e={}),l)throw l;for(var i=!1,n={},r=0;r<h.length;r++){var a=h[r],o=u[a],s=e[a],c=o(s,t);if(void 0===c){var d=(d=a,"Given "+((o=(o=t)&&o.type)&&'action "'+String(o)+'"'||"an action")+', reducer "'+d+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(d)}n[a]=c,i=i||c!==s}return(i=i||h.length!==Object.keys(e).length)?n:e}}function ls(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),i=e?i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):i}function hs(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ls(r,!0).forEach(function(e){var t,i;t=n,e=r[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):ls(r).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function fs(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function ps(n){var i=[],r=i;function a(){r===i&&(r=i.slice())}function o(t){var i=!0;return a(),r.push(t),function(){var e;i&&(i=!1,a(),e=r.indexOf(t),r.splice(e,1))}}function s(){for(var e=i=r,t=0;t<e.length;t++)e[t]()}return function(i){return function(){var t=i.apply(void 0,arguments),e=t.subscribe;return Object.assign(Object.assign({},t),{dispatch:function(){var e=t.dispatch.apply(t,arguments);return n(s),e},subscribe:o,subscribeImmediate:e})}}}var _s=d(341);function gs(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,i=t.type,n=t.payload,t=t.meta;if(i===r&&t&&t.stream_uid){if(r===oe.a.DEPOSIT_ERROR&&!(n instanceof _e.a))throw"Error state should be use type KernelError";if(null!=n)return Object.assign(Object.assign({},e),w()({},t.stream_uid,n));n=Object.assign({},e);return delete n[t.stream_uid],n}return e}}var ys={error:gs(oe.a.DEPOSIT_ERROR),rawness:gs(oe.a.DEPOSIT_RAWNESS),manifest:gs(oe.a.DEPOSIT_MANIFEST),loader:gs(oe.a.DEPOSIT_LOADER),mux:gs(oe.a.DEPOSIT_MUX),renderer:gs(oe.a.DEPOSIT_RENDERER)},vs={};function ms(){return us(Object.assign(Object.assign({},ys),vs))}function bs(){return function(e){var t=0<arguments.length&&void 0!==e?e:{},i=[function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(r){return function(){var e=r.apply(void 0,arguments),t=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}},n=a.map(function(e){return e(i)});return hs({},e,{dispatch:t=fs.apply(void 0,n)(e.dispatch)})}}}.apply(void 0,[]),ps(_s.b)],e=fs;return ds(ms(),t,e.apply(void 0,i))}({})}function ks(e,t){f()(this,ks),this.start=e,this.end=t}var xs=d(410),Ss=(c()(ws,[{key:"findRange",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;t<this.ranges_.length&&e>this.ranges_[t].end;)++t;return{index:t,contained:t<this.ranges_.length&&e>=this.ranges_[t].start}}},{key:"length",get:function(){return this.ranges_.length}},{key:"start",value:function(e){return this.ranges_[e].start}},{key:"end",value:function(e){return this.ranges_[e].end}},{key:"add",value:function(e,t){var i=this.findRange(e),n=this.findRange(t,i.index);i.contained&&(e=Math.min(e,this.ranges_[i.index].start)),n.contained&&(t=Math.max(t,this.ranges_[n.index].end));n=n.index-i.index+(n.contained?1:0);this.ranges_.splice(i.index,n,new ks(e,t))}},{key:"contain",value:function(e){return!!this.findRange(e).contained}},{key:"empty",value:function(){this.ranges_.splice(0,this.ranges_.length)}},{key:"toArray",value:function(){var e=[],t=this.ranges_;if(Array.isArray(t))for(var i=0;i<t.length;i++){var n=t[i].start,r=t[i].end;e.push([n,r])}return e}},{key:"clone",value:function(){var t=new ws;return this.toArray().forEach(function(e){t.add(e[0],e[1])}),t}}]),ws),ie=d(396),Ts=(c()(Is,[{key:"consumable",get:function(){var e=this.needSendInitSegment,t=this.hasVideo,i=this.hasAudio,n=this.needSendVideoInitSegment,r=this.needSendAudioInitSegment,a=this.videoInitSegment,o=this.audioInitSegment,s=this.videoMediaSegments,c=this.audioMediaSegments,d=!1;return e?r&&n?o&&a&&(d=!0):r?o&&(d=!0):n&&a&&(d=!0):(t&&0<s.length||i&&0<c.length)&&(d=!0),d}},{key:"needSendInitSegment",get:function(){return this.needSendAudioInitSegment||this.needSendVideoInitSegment},set:function(e){this.needSendVideoInitSegment=e,this.needSendAudioInitSegment=e}},{key:"needSendAudioInitSegment",get:function(){return this.hasAudio&&this.needSendAudioInitSegment_},set:function(e){this.hasAudio&&(this.needSendAudioInitSegment_=e)}},{key:"needSendVideoInitSegment",get:function(){return this.hasVideo&&this.needSendVideoInitSegment_},set:function(e){this.hasVideo&&(this.needSendVideoInitSegment_=e)}},{key:"consume",value:function(){var e=this.needSendInitSegment,t=this.needSendAudioInitSegment,i=this.needSendVideoInitSegment,n=this.videoInitSegment,r=this.audioInitSegment,a=this.audioMediaSegments,o=this.videoMediaSegments;if(e){if(t&&i){if(r&&n)return this.needSendAudioInitSegment=!1,this.needSendVideoInitSegment=!1,{segments:[r,n]}}else if(t){if(r)return this.needSendAudioInitSegment=!1,{segments:[r]}}else if(i&&n)return this.needSendVideoInitSegment=!1,{segments:[n]}}else{var s=[];if([a,o].forEach(function(e){0<e.length&&s.push(e.shift())}),0<s.length)return{segments:s}}return null}}]),Is),Ps=[];function Is(){f()(this,Is),this.needSendAudioInitSegment_=!1,this.needSendVideoInitSegment_=!1,this.hasAudio=!0,this.hasVideo=!0,this.audioInitSegment=null,this.videoInitSegment=null,this.audioMediaSegments=[],this.videoMediaSegments=[]}function ws(){f()(this,ws),this.ranges_=[]}function As(e){return-1<Ps.indexOf(e)}function Es(e,t){return{runtime:e,stream:t,store:e.store,uuid:t.uuid,ipc:t.ipc,hoc:!1}}var Ds=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).trackId=null,e._initSegment=null,e}return c()(r,[{key:"initSegment",get:function(){return this._initSegment},set:function(e){e&&(this._initSegment=e,this.emit("IU",e))}}]),r}(Ie.EventEmitter);var qs,a=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).levelSwitching_=!1,e.silenced_=!1,e.compLiterals=[],e.mediaRanges=new Ss,e.playRanges=new Ss,e.ipc=new Ie.EventEmitter,e.uuid=function e(){var t=ve.a.create();return As(t)?e():(As(t)||Ps.push(t),t)}(),e.audio=null,e.audioSegmentSynced=!0,e.seekingMayIgnored=!1,e.seekedToStartPos=!1,e.hasNoticeEOD=!1,e.videoTrack=new Ds,e.audioTrack=new Ds,e.restrictor=new Ts,e}return c()(r,[{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced?"(silence)":"","]")}},{key:"silenced",get:function(){return this.silenced_},set:function(t){this.silenced_=t,this.packList.forEach(function(e){e.$silenced=t})}},{key:"mediaBuffer",get:function(){var e=this.renderer;return e?Object.assign(Object.assign({},e.bufferInfo(e.playHeadTime)),{buffered:{video:e.bufferInfo(e.playHeadTime,"video"),audio:e.bufferInfo(e.playHeadTime,"audio")}}):{len:0,start:0,end:0}}},{key:"dataBuffer",get:function(){var e=this.loader;return e?e.buffer:new ce}},{key:"seekable",get:function(){var e=!1;return e=this.manifest?this.manifest.seekable:e}},{key:"duration",get:function(){return this.renderer?this.renderer.duration:0}},{key:"currentTime",get:function(){return this.renderer?this.renderer.currentTime:0},set:function(e){this.renderer&&(this.renderer.currentTime=e)}},{key:"error",get:function(){for(var e,t=null,i=0;i<this.packList.length;i++)if((e=this.packList[i]).$error instanceof _e.a){t=e.$error;break}return t}},{key:"levelSwitching",get:function(){return this.levelSwitching_},set:function(e){this.levelSwitching_=e}},{key:"packList",get:function(){return[this.manifest,this.loader,this.mux,this.renderer,this.audio].filter(function(e){return!!e})}},{key:"onTheFly",set:function(e){var t=this.renderer,i=this.restrictor;e?t&&t.takeoverMediaControl():(this.clearBuffers({rendererMayKeepInit:!1}),this.restoreStatus(),t&&t.releasedMediaControl(),i.needSendInitSegment=!0)}},{key:"destroy",value:function(){var e=this.mediaRanges,t=this.playRanges,i=this.packList;e.empty(),t.empty(),this.clearBuffers(),i.forEach(function(e){e.destroy()})}},{key:"shouldFireError",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.renderer,i=!1;return i=this.error&&(e&&e.len<=1||t.buffer.len<=1)?!0:i}},{key:"setup",value:function(e){}},{key:"registerAudioPack",value:function(e,t){this.audio=new e(Es(t,this))}},{key:"recoverImmediately",value:function(t){this.clearBuffers(),this.restoreStatus(),this.packList.forEach(function(e){return e.recoverAt(t)})}},{key:"range",value:function(e,t){var i=this.loader,n=this.renderer;t&&(Array.isArray(t)?this._generateMediaRanges(t):t instanceof Ss&&(this.mediaRanges=t)),this._generatePlayRanges(e);t=this.playRanges,e=this.mediaRanges;null!=i&&i.applyRanges&&i.applyRanges(t),n&&(n.appendWindowStart=t.start(0),n.appendWindowEnd=t.end(t.length-1)),t instanceof Ss&&0<t.length&&e instanceof Ss&&0<e.length&&Y.a.log("".concat(this.LOG_TAG," Range made, ").concat(t.length," play ").concat(t.start(0),"-").concat(t.end(t.length-1),", ").concat(e.length," media ").concat(e.start(0),"-").concat(e.end(e.length-1)))}},{key:"_generateMediaRanges",value:function(e){if(this.mediaRanges.empty(),Array.isArray(e)&&0<e.length)for(var t,i=0;t=e[i];i++)this.mediaRanges.add(t[0],t[1])}},{key:"_generatePlayRanges",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.mediaRanges,i=this.playRanges,n=t.start(0),r=t.end(t.length-1);if(i.empty(),null===e||e<r){"number"==typeof e&&e<n&&i.add(e,n);for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a);"number"==typeof e&&s<=e?e<t.start(a+1)&&i.add(e,t.start(a+1)):"number"==typeof e&&o<=e&&e<s?i.add(e,s):i.add(o,s)}}else i.add(e,Number.POSITIVE_INFINITY)}},{key:"clearBuffers",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.rendererOnlyData,i=e.rendererMayKeepInit,n=e.rendererFlushMedia,r=e.muxKeepMeta,e=this.packList,a=this.renderer,o=!!i,s="boolean"!=typeof n||n,c=!!r;Y.a.log("".concat(this.LOG_TAG," clear buffer of all packs, and ").concat(o?"will":"not"," keepInit")),e.forEach(function(e){return e.$unSubscribeStore()}),e.forEach(function(e){t&&e===a?e.$clearOperateBuffers(null,o):e.$drainBuffer({delInStream:!0,keepInit:o,flushMedia:s,keepMuxMeta:c})}),e.forEach(function(e){e.$initStateSlice(!0)}),e.forEach(function(e){return e.$subscribeStore()})}},{key:"restoreStatus",value:function(){this.seekingMayIgnored=!1,this.seekedToStartPos=!1,this.lastSeekTiming=void 0}}]),r}(ie.a);(Ja=qs=qs||{})[Ja.Roll=0]="Roll",Ja[Ja.Episode=1]="Episode",Ja[Ja.MAT=2]="MAT";var Os=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).TAG="Roll",e.streamType=qs.Roll,e}return c()(r,[{key:"isAd",get:function(){return"ad"===this.rollCategory||/^ad::/gi.test(this.rollCategory)}}]),r}(a);var Rs,Ls,Ms=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){var e;return f()(this,r),(e=t.apply(this,arguments)).TAG="Episode",e.streamType=qs.Episode,e}return c()(r,[{key:"seekable",get:function(){return!0}}]),r}(a);function Cs(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Ns(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ns(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}(Ja=Rs=Rs||{})[Ja.PRE_ROLL=0]="PRE_ROLL",Ja[Ja.MID_ROLL=1]="MID_ROLL",Ja[Ja.POST_ROLL=2]="POST_ROLL",Ja[Ja.INDETERMINACY_ROLL=3]="INDETERMINACY_ROLL",(a=Ls=Ls||{}).BEGIN="B",a.END="E",a.PLAYING_CHANGED="PC",a.PLAYING_PROGRESS="PP",d(395);var Ja=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),(i=r.call(this,{ctx:e.ctx})).playingStream_=null,i.set_=new Set,i.secClockTimer_=new We.a(function(){return i.secCronJob_()}),i.runtime=e,(i.isPreload=t)||i.$eventManager.on(l()(i),Ls.BEGIN,function(){i.secClockTimer_.scheduleRepeated(1)}),i}return c()(a,[{key:"playingStream",get:function(){return this.playingStream_},set:function(e){var t=this.runtime;!this.isPreload&&this.has(e)&&(t.error&&(t.error=null),(t=this.playingStream_)&&(t.onTheFly=!1,t.packList.forEach(function(e){e.unbindApis()})),Y.a.log("timeline change playing stream to ".concat(e.TAG).concat(e instanceof Os?"("+e.rollCategory+")":"")),(this.playingStream_=e).onTheFly=!0,e.packList.forEach(function(e){e.bindApis()}),this.isRolling||(this.runtime.conf.openTest=!1),this.emit(Ls.PLAYING_CHANGED,e))}},{key:"streams",get:function(){return this.set_.values()}},{key:"isRolling",get:function(){var e=this.playingStream;return!!e&&e instanceof Os}},{key:"rollingType",get:function(){return this.isRolling?this.playingStream.rollType:null}},{key:"episodeStream",get:function(){var e,t=null,i=Cs(this.streams);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n instanceof Ms){t=n;break}}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"rollStream",get:function(){var e,t=null,i=Cs(this.streams);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n instanceof Os){t=n;break}}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"size",get:function(){return this.set_.size}},{key:"secCronJob_",value:function(){}},{key:"startSchedules",value:function(){this.destroySchedules()}},{key:"destroySchedules",value:function(){}},{key:"destroy",value:function(){v()(p()(a.prototype),"destroy",this).call(this),this.destroySchedules(),this.clear(),this.secClockTimer_.cancel(),this.playingStream_=null}},{key:"reset",value:function(){Y.a.log("timeline reset"),this.playingStream_=null}},{key:"clear",value:function(){this.playingStream_=null,this.set_.clear()}},{key:"endOfPlayingStream",value:function(){this.tryToSwitchStream(!0)}},{key:"tryToSwitchStream",value:function(){this.playingStream}},{key:"findAdaptedStream",value:function(e){return null}},{key:"has",value:function(e){return this.set_.has(e)}},{key:"configureRoll",value:function(e,t){}}]),a}(d(594).a),Bs=d(403),Fs={cmd5x:function(){Y.a.warn("used un impl external tool: ".concat("cmd5x"))}},Us=(c()(Vs,[{key:"syncMediaTiming",value:function(e){var t,i,n,r,a,o=this.stream;o&&(t=o.loader,a=o.renderer.currentTime,i=Object(he.g)(e)&&0<=e?e:Object(he.g)(a)?a:0,n=t.findPieceAt(i),r=!1,this.currentFrag_&&(e=this.currentFrag_.startTime,a=this.currentFrag_.endTime,e<=i&&i<a?a<=i+.5&&this.stateChange_("willended"):a<=i&&0<t.fragments.length&&this.currentFrag_!==t.fragments[t.fragments.length-1]&&(this.stateChange_("ended"),r=!0)),this.currentTime_=i,this.currentFrag_=n?n.fragment:this.currentFrag_,this.currentFrag_.loadstart||(this.currentFrag_.loadstart=!0,this.stateChange_("loadstart")),this.checkCurrentGasStatus()&&r&&o.renderer&&2<=o.renderer.readyState&&this.stateChange_("playing"))}},{key:"connectStream",value:function(e){var t=this,e=(this.stream=e).loader;0<e.fragments.length?this.syncMediaTiming():this.eventManger_.once(e,"FLS",function(e){0===e.idx&&t.syncMediaTiming()})}},{key:"disconnectStream",value:function(){this.stream=null,this.currentTime_=null,this.currentFrag_=null,this.eventManger_.removeAll()}},{key:"getCurrentGas",value:function(){var e=this.stream,t=this.currentTime_;if(e){var i=e.loader,e=e.renderer,t=null!==t?t:e.currentTime;t>i.duration&&(t=i.duration);e=i.fragments,t=i.findPieceAt(t);if(t&&t.fragment){t=t.fragment;return{gas:t.gas||null,fragIdx:e.indexOf(t),fragment:t}}}return null}},{key:"abortCurrentGas",value:function(e){var t=this.stream,i=t.renderer,n=t.loader,t=e.fragIdx,t=(e.fragment,n.fragments[t+1]);t&&(t=t.startTime,0<i.readyState?i.currentTime=t:(this.syncMediaTiming(t),this.timeline_.seekStream(t,this.stream)))}},{key:"checkCurrentGasStatus",value:function(){var e=this.runtime,t=this.stream,i=!0,n=this.currentFrag_;return!n||3!=n.status&&4!=n.status||(i=!1,e.throwError(t.error)),i}},{key:"stateChange_",value:function(e){this.runtime.ctx.emit(ze.a.STATE_CHANGE,{state:e})}}]),Vs),js=d(343);function Vs(e,t){f()(this,Vs),this.stream=null,this.currentTime_=null,this.runtime=e,this.eventManger_=new be.a,this.timeline_=t}function Ws(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return Hs(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Hs(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function Hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}a=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":re()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(a<3?r(o):3<a?r(t,i,o):r(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o},Ja=function(e){h()(o,e);var i,t,n,r,a=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=r?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function o(e,t){var i;f()(this,o),(i=a.call(this,e,t)).playingStreamBufferEnd_=null,i.briefs={};var n=e.params.dynamic.externals;return t||(n&&Object(fe.a)(Fs,n),t=e.store,n=gs(oe.a.DEPOSIT_AUDIO),vs.audio=n,t.replaceReducer(ms())),Object(xs.b)(js.a),Te.e.setRuntime(e),i}return c()(o,[{key:"playingStream",get:function(){return v()(p()(o.prototype),"playingStream",this)},set:function(e){e instanceof Os&&e.isAd?(this.adManager||(this.adManager=new Us(this.runtime,this)),this.adManager.connectStream(e)):this.adManager&&this.adManager.disconnectStream(),this.playingStreamBufferEnd_=null,ne()(p()(o.prototype),"playingStream",e,this,!0)}},{key:"eot",get:function(){var e=!0,t=this.playingStream;return e=t?t.renderer.loop||t===this.episodeStream&&!this.hasAvailablePatch||t==this.patchStream:e}},{key:"isAd",get:function(){var e=!1;return e=this.isRolling?this.playingStream.isAd:e}},{key:"isQBBPatching",get:function(){var e=this.playingStream;return!!e&&e===this.patchStream}},{key:"patchStream",get:function(){var e,t=null,i=Ws(this.streams);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n instanceof Os&&"patch"===n.rollCategory){t=n;break}}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"hasAvailablePatch",get:function(){var e=this.patchStream;return e&&!e.error}},{key:"matStream",get:function(){var e,t=null,i=Ws(this.streams);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n instanceof Os&&"mat"===n.rollCategory){t=n;break}}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"episodeStream",get:function(){var e,t=null,i=Ws(this.streams);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n instanceof Ms){t=n;break}}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"bufferInfo",get:function(){return{media:this.mediaBufferInfo,data:this.dataBufferInfo}}},{key:"mediaBufferInfo",get:function(){var e=this.playingStream;return e?e.mediaBuffer:{len:0,start:0,end:0}}},{key:"dataBufferInfo",get:function(){var e=this.playingStream;return e?e.dataBuffer:new ce}},{key:"normalAdRollStream",get:function(){var e,t=null,i=Ws(this.streams);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n instanceof Os&&"ad"===n.rollCategory){t=n;break}}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"destroy",value:function(){this.reset(),Te.e.unsetRuntime(),this.adManager=null}},{key:"reset",value:function(){v()(p()(o.prototype),"reset",this).call(this);var e,t=this.adManager,i=Ws(this.streams);try{for(i.s();!(e=i.n()).done;)e.value.destroy()}catch(e){i.e(e)}finally{i.f()}this.clear(),t&&t.disconnectStream(),this.briefs={}}},{key:"onStateChange_",value:function(e){var t=e.state,i=e.stream,n=i.renderer,r=(i.loader,i.mux,i.playRanges,this.runtime),a=this.adManager,o=r.recoverProcedure,s=!0;switch(t){case"loadstart":s=!1;break;case"loadedmetadata":i.seekedToStartPos||(i.seekedToStartPos=!0,this.seekToStartPos_(i));break;case"afterended":n.loop||this.endOfPlayingStream();break;case"seeking":var c=n.currentTime;o.progressing&&(o.status=o.levels.MEDIA_SEEKING),i instanceof Os&&i.isAd&&a.syncMediaTiming(),i.lastSeekTiming=performance.now(),i.seekingMayIgnored||n.$withinBuffer(c)||(i.clearBuffers({rendererMayKeepInit:!0,muxKeepMeta:!0}),this.seekStream(c,i)),i.seekingMayIgnored=!1;break;case"seeked":i.lastSeekTiming&&Y.a.log("seeking->seeked take ".concat((performance.now()-i.lastSeekTiming).toFixed(3),"ms"));break;case"timeupdate":i instanceof Os?i.isAd&&a.syncMediaTiming():this.tryToSwitchStream(!1);break;case"waiting":c=n.bufferInfo(i.currentTime).len;(3<=n.readyState&&!jo.a.EDGE||!n.seeking&&n.updating||.1<c||c<=.1&&i.error||0<i.loader.buffer.len)&&(s=!1);break;case"playing":o.progressing&&(o.status=o.levels.STOP)}s&&i===this.playingStream&&this.runtime.ctx.emit(ze.a.STATE_CHANGE,e)}},{key:"onError_",value:function(e){var t=this.runtime,i=this.playingStream,n=this.adManager,r=t.recoverProcedure,a=e.stream,e=e.error;r.progressing&&(r.status=r.levels.STOP),a&&a===i&&(a instanceof Os&&a.isAd?e.category===ye.a.RENDERER?(Y.a.error("ad met renderer error"),t.throwError(e)):n.checkCurrentGasStatus()||this.abortCurrentADGas():t.throwError(e))}},{key:"onMediaAttaching_",value:function(e){var t=this.runtime,i=this.playingStream,e=e.stream;e&&e===i&&t.ctx.emit(ze.a.MSE_ATTACHING)}},{key:"onMediaBufferCreated_",value:function(e){var t=this.runtime,i=this.playingStream,e=e.stream;e&&e===i&&t.ctx.emit(ze.a.BUFFER_CREATED)}},{key:"onMediaBufferAppending_",value:function(e){var t=this.runtime,i=this.playingStream,e=e.stream;e&&e===i&&t.ctx.emit(ze.a.BUFFER_APPENDING)}},{key:"onMediaBufferAppended_",value:function(e){var t=this.runtime,i=this.playingStream,e=e.stream;e&&e===i&&t.ctx.emit(ze.a.BUFFER_APPENDED)}},{key:"seekStream",value:function(e,t){var i=this.runtime.recoverProcedure,n=t.loader,r=t.audio;i.progressing&&(i.status=i.levels.DATA_SEEKING),t.range(e),n.seek(e),r&&r.seek(e)}},{key:"seekToStartPos_",value:function(e){var t=this.runtime,i=e.renderer,n=e.playRanges,r=t.recoverProcedure;0<n.length?r.progressing?(r.status=r.levels.MEDIA_METADATA,0<=(r=r.targetTime)&&(Y.a.log("media recover, seek media by recover point ".concat(r)),i.currentTime=r)):(n=n.start(0),!jo.a.SAFARI||n<(t=t.conf.safariMinStartTime)&&(n=t),0<n&&(e.seekingMayIgnored=!0,Y.a.log("seek to ".concat(n," by metadata~")),i.currentTime=n)):Y.a.warn("playRanges is empty, pls fix it.")}},{key:"secCronJob_",value:function(){var e,t=this.runtime,i=this.playingStream;i&&((e=this.bufferInfo.data.end)!==this.playingStreamBufferEnd_&&(this.playingStreamBufferEnd_=e,t.ctx.emit(ze.a.STATE_CHANGE,{state:"progress"})),!i.hasNoticeEOD&&i.loader.eod&&(i instanceof Ms?(i.hasNoticeEOD=!0,t.ctx.emit(ze.a.STATE_CHANGE,{state:"EOP"})):i instanceof Os&&(i.hasNoticeEOD=!0,t.ctx.emit(ze.a.STATE_CHANGE,{state:"EOR"}))))}},{key:"configureRoll",value:function(e,t){var i=e.offset,n=e.done;t.rollType=e.rollType,t.rollCategory=e.category,t.done=!!n,n&&"ad::brief"!==t.rollCategory||(t.offset=i)}},{key:"add",value:function(e){var t=!1,i=!1;if(e instanceof Os){if(t=!0,e.isAd){switch(e.rollCategory){case"ad":if(this.normalAdRollStream)return Y.a.error("Timeline should has only one normal ad roll stream"),this;if(e.rollType===Rs.PRE_ROLL&&this.episodeStream)return Y.a.error("Timeline now has a episode stream, but add a pre-ad"),this;break;case"ad::brief":var n=e.offset,r=this.briefs[n]=this.briefs[n]||[],n=r.length,t=!0;0<n&&(r[n-1].next=e),r.push(e)}e.loader.adjustTimestampMode=!0,e.loader.skipErrorMode=!0}else if(this.patchStream)return Y.a.error("Timeline should has only one patch stream"),this}else if(e instanceof Ms&&(i=!0,this.episodeStream))return Y.a.error("Timeline should has only one episode stream"),this;return this.$eventManager.on(e,ze.a.ERROR,this.onError_.bind(this)).on(e,ze.a.STATE_CHANGE,this.onStateChange_.bind(this)).on(e,ze.a.BUFFER_CREATED,this.onMediaBufferCreated_.bind(this)).on(e,ze.a.BUFFER_APPENDING,this.onMediaBufferAppending_.bind(this)).on(e,ze.a.BUFFER_APPENDED,this.onMediaBufferAppended_.bind(this)).on(e,ze.a.MSE_ATTACHING,this.onMediaAttaching_.bind(this)),this.set_.add(e),1===this.size&&(t||i)&&(this.playingStream=e,this.emit(Ls.BEGIN),this.startSchedules()),this}},{key:"delete",value:function(e){if(e instanceof Os&&"ad::brief"===e.rollCategory){var t=e.offset,i=this.briefs[t];if(Array.isArray(i))for(var n=0;n<i.length;n++)if(i[n]===e){i.splice(n,1);break}}return this.$eventManager.off(e,ze.a.STATE_CHANGE).off(e,ze.a.BUFFER_CREATED).off(e,ze.a.ERROR).off(e,ze.a.MSE_ATTACHING),this.set_.delete(e),this}},{key:"findAdaptedStream",value:function(e){var t,i=null,n=e.streamType,r=e.roll,a=e.components,o=Ws(this.streams);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.streamType===n&&(s instanceof Ms||r&&s instanceof Os&&s.rollType===r.rollType&&"ad::brief"!==s.rollCategory&&s.rollCategory===r.category)&&(0===a.length||0===Object(Bs.a)(a,s.compLiterals).length)){i=s;break}}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"tryToSwitchStream",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.playingStream;if(t){var i=t instanceof Ms,n=this.normalAdRollStream,r=this.episodeStream,a=this.patchStream,o=this.matStream;if(t instanceof Os){if(e)if("ad"===t.rollCategory){var s=t.rollType;switch(this.delete(t),t.destroy(),s){case Rs.PRE_ROLL:var c=this.briefs[0]||[];0<c.length?this.playingStream=c.shift():r&&(this.playingStream=r);break;case Rs.MID_ROLL:r&&(this.playingStream=r);break;case Rs.POST_ROLL:this.emit(Ls.END)}}else"ad::brief"===t.rollCategory?(this.delete(t),t.destroy(),t.next?this.playingStream=t.next:r&&(this.playingStream=r)):"patch"===t.rollCategory&&e&&(this.delete(t),t.destroy(),n&&n.rollType==Rs.POST_ROLL?this.playingStream=n:this.emit(Ls.END))}else if(i)if(e)this.hasAvailablePatch?this.playingStream=a:n&&n.rollType==Rs.POST_ROLL?this.playingStream=n:this.emit(Ls.END);else{if(n&&n.rollType===Rs.MID_ROLL){e=n.offset,a=t.currentTime;if(e<=a)return this.playingStream=n,this.seekStream(a+.1,t),void(o&&(o.needInitSegment=!0))}var d=this.briefs,u=Object.keys(d);if(0<u.length){for(var l=0;l<u.length;l++){var h=u[l],f=d[h];Array.isArray(f)&&0!==f.length||delete d[h]}var p=Object.keys(d).sort().map(function(e){return parseInt(e,10)});if(0<p.length)for(l=0;l<p.length;l++){var _=p[l],g=t.currentTime,y=Math.floor(g);if(_<y)delete d[_];else if(y===_)return this.playingStream=d[_].shift(),this.seekStream(g+.1,t),void(o&&(o.needInitSegment=!0))}}}}}},{key:"switchLevel",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a=this.$eventManager,o=this.playingStream,s=this.runtime,c=o.renderer,d=o.loader,u=o.playRanges,l=c.currentTime,h=o.loader.findPieceAt(l);o.levelSwitching=!0,n&&o.clearBuffers({rendererOnlyData:!0}),s.provideRawToStore(e,o),t?this.seekStream(u.start(0),o):i||!c.currentTimeRange?n&&(a.once(o,ze.a.BUFFER_FLUSHED,function(){d.seek(c.currentTime)}),c.$flushBuffer()):r||(l=c.bufferInfo(l),this.seekStream(l.end,o,!0),h&&1<h.segment.startTime&&c.$flushBuffer(0,h.segment.startTime-1))}},{key:"getCurrentADGas",value:function(){if(this.isAd){var e=this.adManager.getCurrentGas();if(e&&e.gas)return e.gas}return null}},{key:"abortCurrentADGas",value:function(){var e,t,i,n=this.adManager,r=this.runtime;n&&this.isAd&&((e=n.getCurrentGas())&&(i=(t=n.stream).loader,t=t.rollType,i=e.fragIdx===i.fragments.length-1,r.error&&(r.error=null),i?this.abortRollingStream(t):n.abortCurrentGas(e)))}},{key:"abortRollingStream",value:function(e,t){var i,n,r,a=this;!this.isRolling||null!==e&&e!==this.rollingType||(Object(he.g)(t)&&(i=t,r=a.episodeStream,a.matStream,r&&(n=!1,e=i,0!==(t=r.duration)&&(i<0?(n=!0,i=0):t<i&&(n=!0,i=t<=1?0:t-1),n&&Y.a.warn("episode recovery point is fixed from ".concat(e," to ").concat(i)),a.seekStream(i,r)))),this.endOfPlayingStream())}},{key:"switchAudioTrack",value:(t=Q()($.a.mark(function e(t){var i,n,r,a=arguments;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=1<a.length&&void 0!==a[1]&&a[1],this.playingStream){e.next=3;break}return e.abrupt("return");case 3:i="boolean"==typeof i?i:this.runtime.conf.switchVariantImmediate,n=this.playingStream.renderer,r="immediate: ".concat(i),t?(i&&n.$flushBuffer(),Y.a.log("switch to variant audio track, ".concat(r)),n.variantAudioMode=!0):(Y.a.log("switch to original audio track, ".concat(r)),n.variantAudioMode=!1),this.loadAltAudio_(t,i);case 8:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"loadAltAudio_",value:(i=Q()($.a.mark(function e(t,i){var n,r,a,o,s;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.e(6).then(d.bind(null,663));case 2:if(o=e.sent,n=o.MAT,s=this.runtime,r=this.playingStream,a=r.renderer,(o=r.audio)||(r.registerAudioPack(n,s),o=r.audio),t)return o.enabled=!0,e.next=12,o.push(t);e.next=14;break;case 12:e.next=17;break;case 14:o.enabled=!1,o.reset(),r.mux||(r.restrictor.needSendAudioInitSegment=!0);case 17:r.clearBuffers({rendererFlushMedia:!1}),s=a.currentTime,s=i?s:a.bufferInfo(s).end,this.seekStream(s,r,!0);case 21:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})}]),o}(Ja);a([r.c],Ja.prototype,"eot",null),a([r.c],Ja.prototype,"isAd",null),a([r.c],Ja.prototype,"isQBBPatching",null),a([r.c],Ja.prototype,"patchStream",null),a([r.c],Ja.prototype,"episodeStream",null),a([r.c],Ja.prototype,"bufferInfo",null),a([r.c],Ja.prototype,"mediaBufferInfo",null),a([r.c],Ja.prototype,"dataBufferInfo",null),a([r.c],Ja.prototype,"add",null),a([r.c],Ja.prototype,"delete",null),a([r.c],Ja.prototype,"getCurrentADGas",null),a([r.c],Ja.prototype,"abortCurrentADGas",null),a([r.c],Ja.prototype,"abortRollingStream",null),a([r.c],Ja.prototype,"switchAudioTrack",null);r=new Map;r.set("events",ze.a),r.set("manifestTypes",Ke),r.set("errorCodes",me.a),r.set("timeline/pcw-vod",Ja),r.set("manifest/hls",s),r.set("loader/hls",i),r.set("mux/m2ts-mp4",g.a),r.set("manifest/flv",m),r.set("loader/flv",it),r.set("mux/flv-mp4",b.a),r.set("manifest/jdash",n),r.set("manifest/dash",y),r.set("loader/dash",o),r.set("loader/p2p",K),r.set("renderer/mse",G);var zs=d(376),Ys=new Map;d(367);var Gs=d(530);function Qs(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};f()(this,Qs),this.enableMuxWorker=!0,this.switchVariantImmediate=!1,this.alwaysSeekKeyframe=!1,this.bufferExpectLength=5,this.mediaMaxDuration=86400,this.highBufferThreshold=3,this.nudgeOffset=.1,this.nudgeMaxRetry=3,this.maxBufferHole=.5,this.maxBufferTimeLength=60,this.hlsRangeTSTolerance=5,this.hlsMaxSegmentSearchTolerance=.25,this.drm={retryParameters:{maxRetry:3,timeout:6e3}},this.datasource={retryParameters:{maxRetry:2,timeout:2e4}},this.loaderWithBufferMaxRetry=3,this.loaderNoBufferMaxRetry=1,this.fpsStuckMonitoringPeriod=5,this.safariMinStartTime=.2,this.openTest=!1;var t=jo.a.CHROME&&(jo.a.version.major<50||50===jo.a.version.major&&jo.a.version.build<2661);this.alwaysSeekKeyframe=!!(t||jo.a.EDGE||jo.a.IE),Object(fe.a)(this,e)}function Ks(){f()(this,Ks),this.global={},this.dynamic={}}var $s,Zs=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this)).isPreload=!1,t.isPreload=!!e,t}return c()(a,[{key:"destroy",value:function(){this.timeline&&(this.timeline.destroy(),this.timeline=null)}},{key:"reset",value:function(){this.timeline&&this.timeline.reset()}},{key:"setup",value:function(e,t){var i=e.params.dynamic.timeline,i=t.get(i);this.timeline=new i(e,this.isPreload)}},{key:"registerPacksIntoStream",value:function(e,t,i){var n,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,o=5<arguments.length?arguments[5]:void 0,s=function(e){var t=[];if(Array.isArray(e))for(var i=0;i<e.length;i++){var n=e[i],r=Ys.get(n);Y.a.assert(!!r,"the <<".concat(n,">> component is not installed")),r&&t.push(r)}return t}(t);switch(e){case qs.Roll:n=new Os;break;case qs.Episode:n=new Ms;break;default:Y.a.error("kernel met unknown content streamType ".concat(e))}for(var c=0;c<s.length;c++){var d=s[c];switch(Object.getPrototypeOf(d)){case co:n.manifest=new d(Es(i,n));break;case de:n.loader=new d(Es(i,n));break;case Gs.a:n.mux=new d(Es(i,n));break;case Uo:n.renderer=new d(Es(i,n))}}return n.silenced=this.isPreload,n.compLiterals=t,n.range(r,a),n instanceof Os&&this.timeline.configureRoll(o.roll,n),this.timeline.add(n),n}}]),a}(function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){return f()(this,r),t.apply(this,arguments)}return r}(ie.a)),Xs={components:{manifest:[],loader:[],mux:[],renderer:[]}};(n=$s=$s||{})[n.STOP=0]="STOP",n[n.START=1]="START",n[n.MEDIA_METADATA=2]="MEDIA_METADATA",n[n.MEDIA_SEEKING=3]="MEDIA_SEEKING",n[n.DATA_SEEKING=4]="DATA_SEEKING";var Js=(c()(ec,[{key:"progressing",get:function(){return this.status>=$s.START}},{key:"status",get:function(){return this._status},set:function(e){if(e===$s.STOP)this.targetTime=null;else if(e!=this._status+1)return;Y.a.log("recover status is ".concat(e)),this._status=e}}]),ec);function ec(){f()(this,ec),this._status=$s.STOP,this.levels=$s,this.targetTime=null}var tc=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this)).params=new Ks,t.conf=new Qs,t.store=bs(),t.recoverProcedure=new Js,t.ctx=e,t}return c()(a,[{key:"mixinDynamicParams",value:function(e){Object(fe.a)(this.params.dynamic,e||{})}},{key:"throwError",value:function(e){var t=this.ctx,i=this.recoverProcedure;Y.a.assert(e instanceof _e.a,"Wrong error type!"),null==this.error&&e instanceof _e.a&&((this.error=e).severity===ge.a.RECOVERABLE&&i.progressing&&(i.status=i.levels.STOP),t.emit(ae.a.PRE_ERROR,e),t.emit(ae.a.ERROR,e))}},{key:"provideRawToStore",value:function(e,t){var i;this.store.dispatch((i=oe.a.DEPOSIT_RAWNESS,t={stream_uid:t.uuid},function(e,t,i){var n={type:e},e=arguments.length;return t instanceof Error&&(n.error=!0),2===e?n.payload=t:3===e&&(n.payload=t,n.meta=i),n}(i,e,t)))}}]),a}(Ie.EventEmitter);function ic(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return nc(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nc(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var rc=new Ss;rc.add(0,Number.POSITIVE_INFINITY);var ac=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),(i=r.call(this)).eventManager_=new be.a,i.allowJumpGapDirectly=!1,i.stats={},i.runtime=new tc(l()(i)),i.config=i.runtime.conf,i.syntheticCfg=Xs,i.runtime.rootElement="string"==typeof e?document.querySelector(e):e,Object(fe.a)(i.runtime.params,t||{}),i.runtime.mixinDynamicParams(t),i.initContent_(!0),i}return c()(a,[{key:"timeRanges",set:function(e){this.current.timeline.playingStream.range(null,e)}},{key:"isRolling",get:function(){return this.current.timeline.isRolling}},{key:"rebooting",get:function(){return this.runtime.recoverProcedure.progressing}},{key:"allowSwitchVariant",get:function(){var e=this.current.timeline.playingStream,t=e.loader,e=e.renderer;return!t.eof||e.hasOperateBufferData}},{key:"preloaded",get:function(){return!!this.preload&&0<this.preload.timeline.size}},{key:"options_",value:function(e){return Object(fe.a)({streamType:qs.Episode,dynamicArgs:{},components:[],isCurrent:!0,parseMftOnly:!1},e||{})}},{key:"initContent_",value:function(e){var t,i=this;return e?this.current=t=new Zs(!1):this.preload=t=new Zs(!0),t.setup(this.runtime,Ys),e&&(t.timeline.bindApis(),this.eventManager_.on(t.timeline,Ls.END,function(){i.preloaded&&i.switchCS_()})),t}},{key:"switchCS_",value:function(){var e=this.current,t=this.preload;this.emit(ae.a.TIMELINE_SWITCHING),Y.a.log("switch timeline content");var i,n=ic(e.timeline.streams);try{for(n.s();!(i=n.n()).done;)i.value.destroy()}catch(e){n.e(e)}finally{n.f()}e.timeline.clear();var r,a=ic(t.timeline.streams);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.silenced=!1,e.timeline.add(o)}}catch(e){a.e(e)}finally{a.f()}t.timeline.clear(),this.emit(ae.a.TIMELINE_SWITCHED)}},{key:"loadSource",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:rc,n=3<arguments.length?arguments[3]:void 0,r=this.options_(n);r.isCurrent||this.preload||this.initContent_(!1);var a=r.isCurrent,o=r.components,s=r.dynamicArgs,c=r.streamType,d=(r.parseMftOnly,r.roll,this.runtime),u=this.current,l=this.preload,l=a?u:l,r=l.timeline.findAdaptedStream(r);d.mixinDynamicParams(s),r=r||l.registerPacksIntoStream(c,o,d,t,i,n),d.provideRawToStore(e,r)}},{key:"switchLevel",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length?arguments[4]:void 0,a=this.options_(r),o=this.runtime,s=this.current,c=a.components,d=a.dynamicArgs,u=a.streamType,l=s.timeline.playingStream,h=l.renderer,f=l.mediaRanges,p=h.currentTime,a=!1;o.mixinDynamicParams(d),r&&Array.isArray(c)&&1<Object(Bs.a)(c,l.compLiterals).length&&(f=f.clone(),this.reset(),s.registerPacksIntoStream(u,c,o,p,f,r),a=!0),e.isSwitchLevel=!0,Y.a.log("switching level, immediate: ".concat(t,", paused: ").concat(h.paused,", clearBuffer: ").concat(i,", abr: ").concat(n,", currentTimeRange: ").concat(zs.a.stringify(h.currentTimeRange))),s.timeline.switchLevel(e,a,t,i,n)}},{key:"recoverMedia",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,t=this.runtime,i=this.current,n=t.recoverProcedure,i=i.timeline.playingStream;i&&((e=0<=(e=Object(he.j)(e)?parseFloat(e):e)?e:i.currentTime)>=i.duration-.5&&(e=i.duration-.5),Y.a.log("kernel will recovery from ".concat(e)),t.error=null,n.status=n.levels.START,n.targetTime=e,i.recoverImmediately(e))}},{key:"reset",value:function(){[this.current,this.preload].forEach(function(e){e&&e.reset()})}},{key:"destroy",value:function(){[this.current,this.preload].forEach(function(e){e&&e.destroy()}),this.eventManager_.destroy()}}]),a}(Ie.EventEmitter);function oc(){return(oc=Q()($.a.mark(function e(){var n,i;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],i=[],ee.forEach(function(e,t){n.push(t),i.push(e())}),e.abrupt("return",Promise.all(i).then(function(e){for(var t={},i=0;i<n.length;i++)t[n[i]]=e[i];return t}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(e,t){1<arguments.length&&void 0!==t&&!t&&e.clear(),e.forEach(function(e,t){Ys.has(t)?Y.a.warn("kernel encounter duplicate component ".concat(e.constructor.name," from glue")):Ys.set(t,e)})}(r);function sc(){var e=(L.a.get("QC005",{memory:!0})||"").substr(0,1);return{canaryVP9_P2P:!1,canaryVP9_CDN:!1,canaryVP9:!1,canaryAV1_P2P:e=(parseInt(e,16),I.a.browser.CHROME&&78<=I.a.browser.version),canaryAV1_CDN:!1,canaryAV1:e||!1,canaryHEVC:"true"===W.a.query("__hevc__")}}var cc=Ys.get("events")||ae.a,dc=Ys.get("manifestTypes")||{},uc=Ys.get("errorCodes")||{},y=d(123),lc=d.n(y),hc={Status_Idle:"idle",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadFailed:"error",Status_LoadedMetaData:"loadedmetadata",Status_Canplay:"canplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Will_Stoped:"willended",Status_Stoped:"ended",Status_Stalled:"stalled",Status_Playing_Fail:"muted",NTF_StatusChanged:"statusChanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",Action_Type_Controls:"controls",Action_Type_Code:"code",Action_Type_Native:"native"},fc=d(78),pc=d(84),_c=d(33),gc=d(96),yc=new E.a("DashRemote"),vc=0,mc=!1;var bc=(c()(Tc,[{key:"request",value:function(e,l,h){var n,f=e.params,p=!!e.hostUseIP,_=null,g=e.params.tryCount||0,y=e.sptr,v=e.pingback,m=this,e=sc(),b=e.canaryVP9,k=e.canaryAV1,x=e.canaryHEVC;return Promise.all([(n="QiyiPlayerSupported",new Promise(function(t){var e;var i=V.a.read(n);i&&"0.0.7"===(e=JSON.parse(i)).ver?t(e):function(){return oc.apply(this,arguments)}().then(function(e){e.ver="0.0.7",e.drm&&"fullfilled"===e.drm.status&&V.a.write(n,JSON.stringify(e)),t(e)})})),new Promise(function(t){P.a.getVipTypes(function(e){t(e)})})]).then(function(e){var t=Ht()(e,2),i=t[0],r=t[1];i&&(i.drm&&(i.drm["com.widevine.alpha"]?(gc.a.openBit(1,42),mc=!0,yc.log("dashremote feature open widevine")):gc.a.closeBit(1,42),i.drm["com.microsoft.playready"]?(gc.a.openBit(4,5),mc=!0,yc.log("dashremote feature open playready")):gc.a.closeBit(4,5),mc?(gc.a.openBit(4,20),gc.a.openBit(4,21)):(gc.a.closeBit(4,20),gc.a.closeBit(4,21))),i.media&&(x&&i.media['video/mp4; codecs="hvc1.1.6.L93.90"']?(b=k=!1,gc.a.openBit(2,1),gc.a.openBit(2,2),gc.a.openBit(2,3),gc.a.openBit(2,4),gc.a.openBit(2,5),gc.a.openBit(2,6)):(gc.a.closeBit(2,1),gc.a.closeBit(2,2),gc.a.closeBit(2,3),gc.a.closeBit(2,4),gc.a.closeBit(2,5),gc.a.closeBit(2,6)),b&&i.domParser&&i.media['video/webm; codecs="vp09.00.40.08"']&&!(I.a.browser.EDGE&&I.a.browser.version<=18)?gc.a.openBit(4,28):gc.a.closeBit(4,28),k&&i.domParser&&i.media['video/webm; codecs="av01.0.08M.08"']?gc.a.openBit(4,41):gc.a.closeBit(4,41)));var n=f.tvid,a=f.vid,o=601===f.vd?600:f.vd,s=f.ppt,c=f.ost,d=lc.a.cmd5xdash(),e=0<vc?vc:d.tm;vc=0;var t=f.ugcAuthKey||"",i=I.a.getPtid(O.a.isTWLocale());y&&(y.psdkietm=+new Date,y.vcistm=+new Date),t={tvid:n,bid:o,vid:a,src:i,vt:0,rs:1,uid:P.a.getUid(),ori:"pcw",ps:f.switchvd?1:0,k_uid:A.a.getFluid()||A.a.getJsuid(),pt:0,d:0,s:"",lid:"",cf:"",ct:"",authKey:Object(pc.a)(Object(pc.a)(t)+e+""+n),k_tag:1,ost:c,ppt:s,dfp:D.a.get(),locale:O.a.isTraditionalChinese()?"zh_tw":"zh_cn",prio:f.prio||E.a.stringify({ff:"f4v",code:2}),pck:P.a.passportCookie(),k_err_retries:g,up:t},(t=Object(M.a)(t,d)).tm=e,(I.a.os.ios||I.a.os.android)&&(t.ori="h5"),f.src&&(t.src=f.src),f.preIdAll&&(t.preIdAll=f.preIdAll),f.lid&&(t.lid=f.lid,t.cf=2),-1!=t.prio.indexOf("m3u8")?t.k_ft1=gc.a.getM3U8FT1():-1!=t.prio.indexOf("mp4")?t.k_ft1=gc.a.getMP4FT1():(t.k_ft1=gc.a.getFT1(),t.k_ft4=gc.a.getFT4()),f.k_ft1&&(t.k_ft1=f.k_ft1),0<gc.a.getFT2()&&(t.k_ft2=gc.a.getFT2()),0<gc.a.getFT5()&&(t.k_ft5=gc.a.getFT5()),O.a.isTraditionalChinese()&&(t.locale="zh_tw"),"0"===L.a.get("QC004",{memory:!0})&&(t.vv="821d3c731e374feaa629dcdaab7c394b"),p&&(t.ecode="701"),t.bop=E.a.stringify({version:"10.0",dfp:D.a.get()}),_=t,m.vmsParams=_,v&&v.sendVrsRequestPingback(_);function u(e){m.requestIsAbandoned?yc.log("dashremote is abandoned!!!"):m.vmsXhrRequest=T.a.json({url:e,params:_,memory:!0,timeout:5e3,beforeSend:function(t){var e=W.a.parse(t.url).host;r.forEach(function(e){t.url+="&ut="+e,_c.a.isArray(_.ut)||(_.ut=[]),_.ut.push(parseInt(e,10))});var i="iloveiqiyi";try{var n=t.url.replace(new RegExp("^(http|https)://"+e,"ig"),"");p&&(n=n.replace("/3ea/420a8433732a6c99d1eae98fea69e55d","")),i=lc.a.cmd5x(n)}catch(e){yc.error("request, cmd5x error, catchinfo: "+(e.message||e))}return t.url+="&vf="+i,yc.log("load movie: ".concat(t.url)),t},success:function(e){m.requestIsAbandoned?yc.log("start vms request success callback is abandoned!!!"):(y&&(y.vcietm=+new Date),v&&v.sendVrsReadyPingback(_,e),yc.log("dashremote, success."),e&&Object.prototype.hasOwnProperty.call(e,"code")?"A00000"===e.code?l(e):("A00020"===e.code&&e.tm&&(vc=e.tm),h(e)):((e={}).code=fc.a.P00002,h(e)))},failure:function(e){m.requestIsAbandoned?yc.log("start vms request failure callback is abandoned!!!"):(yc.error("dash fail raw json data->"+e),(e={}).code=fc.a.P00001,h(e))}})}p?(yc.info("dashremote, ip, url = "+q.vmsAccess),T.a.ajax({url:q.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){var t;e&&"string"==typeof e?(t=(t=e.split(";"))[Math.floor(Math.random()*t.length)],yc.info("dashremote, ip ok "),u(q.vmsIPSuc.replace("{{IP}}",t))):(yc.info("dashremote, ip fail , data = "+e),u(q.vmsIPFail))},failure:function(e){yc.info("dashremote, ip fail , data = "+e),u(q.vmsIPFail)}})):u(q.vmsUrl)}),this}},{key:"getReqParams",value:function(){return this.vmsParams}},{key:"getXhrRequest",value:function(){return this.vmsXhrRequest}},{key:"setReqAbandoned",value:function(){this.requestIsAbandoned=!0}}]),Tc),kc="",xc=function(){return kc=I.a.browser.iPad?O.a.isTWLocale()?"03030031010010000000":"03030031010000000000":I.a.os.mac?O.a.isTWLocale()?"01080031010010000000":"01080031010000000000":I.a.os.androidTablet?O.a.isTWLocale()?"03020031010010000000":"03020031010000000000":O.a.isTWLocale()?"02020031010010000000":"02020031010000000000",kc=O.a.isTWLocale()?I.a.getPtid(!0):kc},Sc=window.location.protocol;function Tc(){f()(this,Tc),this.requestIsAbandoned=!1,this.vmsParams=null,this.vmsXhrRequest=null}function Pc(e,t){var i={},n=[];i.types=[],i.audio={};for(var r,a,o,s,c,d=e.audio,u=0;u<d.length;u++){var l={},h=d[u];-1==n.indexOf(h.lid)&&(l.id=h.lid,l.ispre=1==h.ispre?1:0,l.name=h.name||"",1==h.ispre&&(e.currentLid=h.lid),n.push(h.lid),i.types.push(l)),h.fs&&(i.audio=h)}if(t&&i.audio&&1<i.types.length)for(var f=i.audio.fs,p=0;p<f.length;p++)f[p].dpl=(r=e,a=f[p].l,c=s=o=void 0,s=Sc+r.baseUrl+a,c=W.a.filename(s),s=r.isVIP?(o=r.boss.data.t||"",a=r.boss.data.u,c=lc.a.cmd5x(o+c),s+"&t="+o+"&vid="+r.vid+"&ibt="+c+"&cid=afbe8fd3d73448c9&ib=4&ptime="+N.getPreviewTime(r.tvid)+"&QY00001="+a):s+"&cross-domain=1&qyid="+(A.a.getFluid()||A.a.getJsuid())+"&qypid="+r.tvid+"_"+xc());return i}var Ic={},o=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this))._curStatus="",t.hasSeeking=!1,t.seekableFlag=!0,t.__beforeSeekTime=0,t._userGesturePlayed=!1,t._currentManualAction=null,t._currentCodeActionList=[],t.delogger=new E.a("Decode[".concat(e.id,"]")),t}return c()(a,[{key:"init",value:function(i){var n=this,t=arguments;this._video=i;function e(e){var t;""!==i.src&&(t=e.status,n.emit(hc.NTF_StatusChanged,e),(n._curStatus=t)===hc.Status_Playing?n._playing=!0:n._playing=!1)}this._setSrc=function(e){1===t.length&&(n.__beforeSeekTime=0,n._video.setAttribute("src",e),I.a.os.ios||n._video.load())},Ic.loadstart=function(){n.__beforeSeekTime=0,e({status:hc.Status_Loadstart,actionType:hc.Action_Type_Native})},i.addEventListener("loadstart",Ic.loadstart),Ic.error=function(){n.__beforeSeekTime=0,e({status:hc.Status_LoadFailed,actionType:hc.Action_Type_Native})},i.addEventListener("error",Ic.error),Ic.stalled=function(){e({status:hc.Status_Stalled,actionType:hc.Action_Type_Native})},i.addEventListener("stalled",Ic.stalled),Ic.loadedmetadata=function(){e({status:hc.Status_LoadedMetaData,actionType:hc.Action_Type_Native})},i.addEventListener("loadedmetadata",Ic.loadedmetadata),Ic.canplay=function(){e({status:hc.Status_Canplay,actionType:hc.Action_Type_Native})},i.addEventListener("canplay",Ic.canplay),Ic.ended=function(){if(!1===n.seekableFlag&&2<Math.abs(n._getDecodeDuration()-n.__beforeSeekTime))return n._seek(n.__beforeSeekTime)},i.addEventListener("ended",Ic.ended),Ic.canplaythrough=function(){n.emit({type:hc.NTF_CanPlayThrough,data:{actionType:hc.Action_Type_Native}})},i.addEventListener("canplaythrough",Ic.canplaythrough),Ic.volumechange=function(){n.emit(hc.NTF_VolumeChanged,{data:n._video.volume,actionType:hc.Action_Type_Native})},i.addEventListener("volumechange",Ic.volumechange),Ic.ratechange=function(){n.emit(hc.NTF_RateChanged,{data:n._video.playbackRate,actionType:hc.Action_Type_Native})},i.addEventListener("ratechange",Ic.ratechange);var r=(new Date).getTime(),a=0;Ic.timeupdate=function(){var e=n.getCurrenttime();if(!i.seeking&&Math.abs(e-n.__beforeSeekTime)<1.2)n.__beforeSeekTime=e;else if(!1===n.seekableFlag)return n._seek(n.__beforeSeekTime);"number"==typeof i.readyState&&i.readyState<=1||n.isPaused()||(500<(e=(new Date).getTime())-r&&(clearTimeout(a),r=e,a=setTimeout(function(){n.isPaused()||n.emit(hc.NTF_TimeUpdate,{current:n.getCurrenttime(),duration:n.getDuration(),buffer:n.getBufferTime(),actionType:hc.Action_Type_Native})},0)),n._playing||(n.hasSeeking=!1))},i.addEventListener("timeupdate",Ic.timeupdate),e({status:hc.Status_Idle}),this._statusChanged=e,this._checkActionType=function(e){if(n._currentManualAction&&n._currentManualAction===e)return n._currentManualAction=null,hc.Action_Type_Controls;if(-1==n._currentCodeActionList.indexOf(e))return hc.Action_Type_Native;e=n._currentCodeActionList.indexOf(e);return n._currentCodeActionList.splice(e,1),hc.Action_Type_Code}}},{key:"video",value:function(){return this._video}},{key:"removeAllEventsListener",value:function(){this._video.removeEventListener("loadstart",Ic.loadstart),this._video.removeEventListener("error",Ic.error),this._video.removeEventListener("stalled",Ic.stalled),this._video.removeEventListener("loadedmetadata",Ic.loadedmetadata),this._video.removeEventListener("canplay",Ic.canplay),this._video.removeEventListener("pause",Ic.pause),this._video.removeEventListener("play",Ic.play),this._video.removeEventListener("playing",Ic.playing),this._video.removeEventListener("waiting",Ic.waiting),this._video.removeEventListener("ended",Ic.ended),this._video.removeEventListener("canplaythrough",Ic.canplaythrough),this._video.removeEventListener("volumechange",Ic.volumechange),this._video.removeEventListener("durationchange",Ic.durationchange),this._video.removeEventListener("timeupdate",Ic.timeupdate),this._video.removeEventListener("progress",Ic.progress)}},{key:"play",value:function(e){var t=this,n=t._video;if(0!==n.readyState){e?this._currentManualAction=hc.Status_Play:this._currentCodeActionList.push(hc.Status_Play);e=function(){t.delogger.log("decode play really invoked!");var i=n.play();if(void 0!==i){var e=new Promise(function(e,t){i.then(function(){e()}).catch(function(e){t(e)})});return e.catch(function(e){t.delogger.warn("decode play got: "+e.message)}),e}};if(!I.a.os.ios&&!I.a.os.android)return e();this._userGesturePlayed?e():this.emit(hc.NTF_NeedUserGesture4Playback)}}},{key:"pause",value:function(e,t){var i=this._video.networkState;(t||0!==i&&3!==i)&&this._video.readyState&&(e?this._currentManualAction=hc.Status_Paused:this._currentCodeActionList.push(hc.Status_Paused),this._video.pause())}},{key:"isPaused",value:function(){return this._video.paused}},{key:"replay",value:function(){this._video.play(this._video.src)}},{key:"_seek",value:function(e,t){var i,n=this;this._checkSeek&&!1===this._checkSeek(e)||(this.hasSeeking=!0,1===(i=this._video.seekable).length&&i.end(0)>e?(t?this._currentManualAction=hc.NTF_Seeking:this._currentCodeActionList.push(hc.NTF_Seeking),0<=e&&e<=this.getDuration()&&(this._video.currentTime=e),this.isPaused()&&this.play()):setTimeout(function(){n._seek(e)},10))}},{key:"isSeeking",value:function(){return this.hasSeeking}},{key:"setDecodeSrc",value:function(e,t){var i=this;i._setSrc(e),this.delogger.debug("decode src current time :"+t);try{i._video.duration=0,(i._video.buffered.length=0)<t?i._video.addEventListener("loadedmetadata",function e(){t<i.getDuration()&&i._seek(t),i._video.removeEventListener("loadedmetadata",e)},!1):i._video.currentTime=0}catch(e){}}},{key:"getSrc",value:function(){return this._video.src}},{key:"getAudioTracks",value:function(){return this._video.audioTracks}},{key:"setAudioTracks",value:function(){}},{key:"getBuffered",value:function(){return this._video.buffered}},{key:"getDecodeCurrenttime",value:function(){var e=this.getDecodeDuration(),t=this._video.currentTime||0;return t<e?t:e}},{key:"getDecodeDuration",value:function(){return this._video.duration||0}},{key:"getVolume",value:function(){return this._video.volume}},{key:"setVolume",value:function(e){this._video.volume=e=1<e?1:e}},{key:"userGesturePlayed",value:function(){this._userGesturePlayed=!0}},{key:"getPlaybackRate",value:function(){return this._video.playbackRate}},{key:"setPlaybackRate",value:function(e){0<e&&(this.delogger.log("playbackRate => ".concat(e)),this._video.playbackRate=e)}}]),a}(_.a);var wc=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t,i){var n;return f()(this,a),(n=r.call(this)).engine=i,n._movieinfo={},n._movieinfo.tvid=e,n._movieinfo.vid=t,n.tryCount=0,n.maxTryCount=2,n.usedIp=!1,n.vmsRequest=null,n._movieinfo.ugcAuthKey=i.movieinfo.ugcAuthKey,n._movieinfo.hasSendSencondAuthRemote=!1,n.logger=new E.a("DataReq[".concat(i.id,"]")),n.DASH_RETRY_ARRAY=["A00001","A00003","A00004","A00020",fc.a.P00001,fc.a.P00002,fc.a.P00003,fc.a.P00004],n}return c()(a,[{key:"startRequest",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.engine,n=t.ptr,r=t.sptr,a=t.pingbackQOS,o=t.vd,s=t.ppt,t=t.ost;this.tryCount++,this.usedIp=e,o=R.a.getNewVd(o),this.vmsRequest=(new bc).request({params:{tvid:this._movieinfo.tvid||"",vid:this._movieinfo.vid||"",vd:o,ppt:s,ost:t,tryCount:this.tryCount-1,switchvd:!1,ugcAuthKey:this._movieinfo.ugcAuthKey||""},hostUseIP:e,ptr:n,sptr:r,pingback:a},function(e){i.parse(e)},function(e){var t=e.data?e.data.st:"";i.reject(0,fc.a.DASH,e.code,t)})}},{key:"reject",value:function(e,t,i,n){if(this.logger.warn("load movieInfo, fail, level: "+e+",type:"+t+",code:"+i+",st:"+n+", retry = "+this.tryCount),-1<this.DASH_RETRY_ARRAY.indexOf(i)){if(this.tryCount<this.maxTryCount)return void this.startRequest();if(!this.usedIp)return void this.startRequest(!0)}this.emit("reject",{level:e,type:t,code:i,st:n,movieinfo:this._movieinfo})}},{key:"resolve",value:function(){this.emit("resolve",this._movieinfo)}},{key:"parse",value:function(e){var t,i,n=this,r=this._movieinfo,a=this.logger,o=this.engine.isEnjoy,s=fc.a.DASH,c="";try{var d=e.data;if(i=(t=e).code,!(null!=t.data&&Object.prototype.hasOwnProperty.call(t.data,"st")?(c=parseInt(t.data.st,10),!o||505!==c&&506!==c?(798===c&&(L.a.set("QP0032",1,{expires:36e5,path:"/"}),window.location.reload()),100<c&&c<200||(a.error("movieinfo error,params: st = "+c),n.reject(0,s,i,c),0)):(a.warn(""),n.reject(0,s,i,c),0)):(a.error("movieinfo error,params:type = data.data null or st is lose"),n.reject(0,s,fc.a.P00004),0)))return;a.log("load movieinfo,dash.st checked"),r.isTryWatch=!1,r.previewTime=1/0,r.originalData=e,r.baseUrl=_c.a.protocolRevise(d.dd)||"//pcw-data.video.iqiyi.com/videos",r.tvid=d.tvid,r.albumId=d.aid||"",r.watermark=0,r.cid=d.cid,r.authShare=d.share||{},r.sid=0,r.vipTypes=d.content.vipTypes,r.ugc=z.a.isUGC(r.tvid),r.bossStatus=d.content.bossStatus,r.isVIP=0<d.content.bossStatus,r.vipBlock=0==d.content.nu,r.videoQipuId=d.tvid,r.prelude={headTime:d.p.bt,tailTime:d.p.et},r.qiyiProduced=1===d.content.isProduced,r.exclusive=1===d.content.exclusive,r.logoOpen=!0,r.topLogoOpen=!0,r.lowerLogoOpen=!0,d.p.lgh&&(r.lowerLogoOpen=-1==d.p.lgh.indexOf(2)&&-1==d.p.lgh.indexOf("2"),r.topLogoOpen=-1==d.p.lgh.indexOf(1)&&-1==d.p.lgh.indexOf("1"));var u,l,h=d.p.wmarkPos||0;r.logoOpen=-1!=h,r.ctt=0==d.content.ctt||1==d.content.ctt?d.content.ctt:-1,r.isBanned=110===parseInt(e.data.st,10),r.vidl=[],d.program&&d.program.video&&(r.vidl=F(d.program.video),r.vidl.sort(function(e,t){return e.vd>t.vd}),r.vidl.unshift(r.vidl.pop())),d.parts&&0<d.parts.length&&(u=d.parts[0]).vs&&0<u.vs.length&&((l=u.vs)[0].ff="f4v",r.parts=F(l,R.a.getOldVd(l[0].bid))),r.audl={},d.program&&d.program.audio&&(r.audio=d.program.audio),r.duration=0,r.drmType=0<r.vidl.length?r.vidl[0].drmType:1;var f={};if(d.program&&d.program.stl&&0<d.program.stl.length)for(var p=d.program.stl,_=0;_<p.length;_++)1==parseInt(p[_].pre)&&(r.subtitlesUrl=_c.a.protocolRevise(d.dstl)+p[_].xml),f[p[_].lid]=_c.a.protocolRevise(d.dstl)+p[_].xml;r.subtitlesUrlMap=f,r.f4vInfo={};var g=e.data.p.pano;!g||2!=g.type&&3!=g.type&&4!=g.type?r.is3D=0:r.is3D=2;for(var y,v,m,b=r.vidl,k=0;k<b.length;k++){var x=b[k];if(x.playlist){r.vd=x.vd,r.watermark=x.watermark;break}}if(d.svp&&0<d.svp.length){for(var S=d.svp,T=S.length,P={data:[],ids:""},I=0;I<T;I++){var w={id:I,stars:S[I].sl.split(","),points:[],totalTime:0};P.ids+=S[I].sl+",";for(var A=S[I].vl,E=A.length,D=0;D<E;D++){var q=Number(A[D].sp),O=Number(A[D].ep);w.points.push({startTime:q,endTime:O}),w.totalTime+=O-q}w.points.sort(function(e,t){return e.startTime-t.startTime}),P.data.push(w)}r.svpinfo=P}r.isVIP?(y={},0<r.vidl.length&&0<r.vidl.filter(function(e){return e.vd===r.vd}).length&&Object(M.a)(y,{tvid:r.tvid,aid:r.albumId}),v=d.boss_ts?"boss_ts":"boss",m=this,Object.prototype.hasOwnProperty.call(d,v)&&Object.prototype.hasOwnProperty.call(d[v],"code")?N.analyzeAuthData(y,d[v],function(e,t){m.vipAuthSuccess(e,t)},function(e,t,i){m.vipAuthFail(e,t,i)}):this.vipAuth(y)):(r.audio&&(r.audl=Pc(r,!1)),this.resolve())}catch(e){r=null,a.error(e.stack),this.reject(0,s,fc.a.P00003,c)}}},{key:"getIsTennisContent",value:function(){var e=this._movieinfo;if(e.vipTypes&&0<e.vipTypes.length)for(var t=0;t<e.vipTypes.length;t++)if(1==e.vipTypes[t])return!0;return!1}},{key:"vipAuthSuccess",value:function(e,t){var i=this._movieinfo,n=this.logger,e=N.getPreviewTime(e);i.isTryWatch=1===parseInt(t.data.prv,10),i.previewType=t.previewType,i.previewTime=0===e?1/0:e,this.getIsTennisContent()?i.authTipType=10:2===parseInt(t.content.vipMode,10)?i.authTipType=6:i.authTipType=parseInt(t.data.tip_type,10),i.vipTheatre=2===parseInt(t.content.vipMode,10),1==i.previewType?i.authRTime=60*t.data.rtime*1e3:3==i.previewType&&(i.authRTime=1e3*t.data.rtime),n.log("check charge definition pass,params: isTryWatch = "+i.isTryWatch+", previewType = "+i.previewType+", previewTime = "+e),i.vidl.filter(function(e){return e.vd===i.vd}),i.boss=t,i.audio&&(i.audl=Pc(i,!1)),this.resolve()}},{key:"vipAuthFail",value:function(e,t,i){var n=this._movieinfo,r=this.logger,a=fc.a.CKNSP;n.isTryWatch=!1,i&&(n.previewType=i.previewType),r.log("check charge definition error,params: code = "+e+", msg = "+t),e?"Q00312"==e||"Q00311"==e||"Q00501"==e?this.reject(2,a,e):this.reject(1,a,e):this.reject(0,a,fc.a.P00005)}},{key:"vipAuth",value:function(e){var n=this;N.request(e,function(e,t){n.vipAuthSuccess(e,t)},function(e,t,i){n.vipAuthFail(e,t,i)})}},{key:"clear",value:function(){var e=this.vmsRequest;e&&(e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort(),this.vmsRequest=null)}}]),a}(_.a),Ac=(c()(Lc,[{key:"getPid",value:function(e,t){return e+"_"+t}},{key:"hasPreload",value:function(e){return!(!this.AllProviders[e]||"fulfilled"!==this.AllProviders[e].st)}},{key:"getParams",value:function(e){return this.AllProviders[e]?this.AllProviders[e].params:null}},{key:"getData",value:function(e){return this.AllProviders[e].data}},{key:"clearAll",value:function(e){for(var t in this.AllProviders)e?new RegExp("^".concat(e,"_*")).test(t)&&(this.AllProviders[t].dq&&this.AllProviders[t].dq.clear(),delete this.AllProviders[t]):this.AllProviders[t].dq&&this.AllProviders[t].dq.clear();e||(this.AllProviders={}),this.logger.info("clear data provider & abandon vms request. tvid = "+e)}},{key:"getPromise",value:function(e,r){var t,a=this.getPid(e,r),o=this;return this.AllProviders[a]&&"pending"===this.AllProviders[a].st?t=this.AllProviders[a].pm:(t=new Promise(function(t,i){var n;o.hasPreload(a)?t(o.getData(a)):(o.AllProviders[a]={st:"pending",data:void 0,params:null,pm:null,dq:null,retryNum:0},o._retryNum=0,(n=new wc(e,r,o.engine)).on("resolve",function(e){e.dataProviderPID=a,t(e),o.AllProviders[a]&&(o.AllProviders[a].st="fulfilled",o.AllProviders[a].params=n.vmsRequest.getReqParams(),o.AllProviders[a].data=e,o.AllProviders[a].dq=n)}),n.on("reject",function(e){var t=-1<n.DASH_RETRY_ARRAY.indexOf(e.code.toString());t&&(o.AllProviders[a].retryNum<o._retryMax?(o.AllProviders[a].retryNum++,n.tryCount=0,n.startRequest()):t=!1),t||(i(e),o.AllProviders[a]&&(o.AllProviders[a].st="rejected",o.AllProviders[a].data=e,o.AllProviders[a].dq=n))}),n.startRequest())}),this.AllProviders[a].pm=t),t}},{key:"clearCache",value:function(e,t){t=this.getPid(e,t);this.AllProviders[t]&&delete this.AllProviders[t]}}]),Lc),Ec=window.location.protocol,Dc=d(291),qc="1",Oc="10",Rc="101";function Lc(e){f()(this,Lc),this.logger=new E.a("DataProvider[".concat(e.id,"]")),this.engine=e,this.AllProviders={},this._retryMax=2}I.a.browser.iPad?(qc="2",Oc="20",Rc="202"):(I.a.os.ios||I.a.os.android)&&(qc="2",Oc="20",Rc="201");var Mc="window";I.a.os.ios||I.a.os.mac?Mc="mac":I.a.os.android&&(Mc="android");var Cc=new _.a,Nc=new Promise(function(e){var t=setTimeout(function(){e()},2e3);Cc.once("ok",function(){clearTimeout(t),e(),Cc=null})}),Bc=(c()(Fc,[{key:"os",get:function(){return Mc}},{key:"pf",get:function(){return qc}},{key:"p",get:function(){return Oc}},{key:"p1",get:function(){return Rc}},{key:"p_code",get:function(){return this.pf+"_"+this.p+"_"+this.p1}},{key:"getDrmType",value:function(e){var t="";if(e.drmType)switch(e.drmType){case 7:t=1;break;case 8:t=2}return t}},{key:"getPingbackDfp",value:function(i){function n(){return D.a.get()}return new Promise(function(t){Nc.then(function(){var e=n();e?t(e):i&&0<parseInt(i.t,10)?void 0===window.dfp?Object(Dc.a)("//security.iqiyi.com/static/cook/v1/cooksdk.js",function(e){e&&void 0!==window.dfp?(D.a.setSDK(window.dfp),t(n())):t("")}):(D.a.setSDK(window.dfp),t(n())):t("")})})}},{key:"browserName",value:function(){return I.a.browserName()}},{key:"noticeSenderFlush",value:function(){clearTimeout(this.__timer),this.__timer=setTimeout(function(){Cc&&Cc.emit("ok")},50)}}]),new Fc);function Fc(){f()(this,Fc)}var Uc=[],jc=[],Vc=function(e){h()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function r(){return f()(this,r),t.call(this)}return c()(r,[{key:"add",value:function(e,t){if(_c.a.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);else{var n=!0===t?jc:Uc;-1===n.indexOf(e)&&n.push(e)}}},{key:"remove",value:function(e){if(_c.a.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{var i=Uc.indexOf(e);-1<i&&Uc.splice(i,1)}}},{key:"removeAll",value:function(){Uc.splice(0,Uc.length)}},{key:"has",value:function(e){return-1<Uc.concat(jc).indexOf(e)}}]),r}(_.a),Wc=(c()(Hc,[{key:"_statusChanged",value:function(e,t,i){var n=this.proxy,r=this.logger,a=this.getData();a.state=e,t&&(a.actionType=t.actionType||hc.Action_Type_Native,t.gas&&(a.gas=t.gas),t.spend&&(a.spend=t.spend)),n.currStatus===e&&!0!==i||(this.updateStatusPool(e),n.currStatus=e,n.fire(S.a.NTF_StatusChanged,a),r.debug("core status changed: "+e))}},{key:"initDecode",value:function(){var n=this.proxy,t=this.engine,i=this;n.on(hc.NTF_StatusChanged,function(e){switch(e.status){case hc.Status_Loadstart:n.isAd()||"ad"===e.eventOrigin?"ad"===e.eventOrigin?i._statusChanged(S.a.Status_AdLoadstart,e,!0):i._statusChanged(S.a.Status_AdLoadstart,e):(P.a.tvid(t.getMovieInfo().tvid),P.a.bossStatus(t.movieinfo.current.bossStatus)),P.a.stopHeartBeat();break;case hc.Status_Canplay:n.isAd()&&i._statusChanged(S.a.Status_Ready,e);break;case hc.Status_Loaddone:i._statusChanged(S.a.Status_Loaddone,e);break;case hc.Status_Stalled:n.isAd()&&i._statusChanged(S.a.Status_AdStalled,e);break;case hc.Status_LoadFailed:n.isAd()?i._statusChanged(S.a.Status_AdError,e):(n._timeMark=0,i._statusChanged(S.a.Status_PlayError,e)),i.followUpNextLoadFlag||(i.followUpNextLoadFlag=!0,n.fire(S.a.NTF_FollowUpNextLoad,"")),P.a.stopHeartBeat();break;case hc.Status_Play:i._statusChanged(S.a.Status_Play,e);break;case hc.Status_Will_Stoped:n.isAd()&&i._statusChanged(S.a.Status_AdWillPlayEnded,e)}}),[[hc.NTF_CanPlayThrough,S.a.NTF_CanPlayThrough,S.a.NTF_AD_CanPlayThrough],[hc.NTF_VolumeChanged,S.a.NTF_VolumeChanged,S.a.NTF_AD_VolumeChanged],[hc.NTF_DurationChanged,S.a.NTF_DurationChanged,S.a.NTF_AD_DurationChanged],[hc.NTF_TimeUpdate,S.a.NTF_TimeUpdate,S.a.NTF_AD_TimeUpdate],[hc.NTF_Progress,S.a.NTF_Progress,S.a.NTF_AD_Progress],[hc.NTF_RateChanged,S.a.NTF_RateChanged,S.a.NTF_AD_RateChanged]].forEach(function(i){i[0]==hc.NTF_TimeUpdate?n.on(i[0],function(e){var t=(new Date).getTime();0===n._timeMark&&(n._timeMark=t),n.isAd()||n.isPatch()||n.currStatus==hc.Status_Stalled||n.currStatus==hc.Status_Waiting||n.currStatus==hc.Status_Paused||n.currStatus==hc.Status_Stoped||n.currStatus==hc.Status_LoadFailed||(n._playingDuration+=t-n._timeMark,n._playingSpend+=t-n._timeMark),n._timeMark=t,n.fire(n.isAd()?i[2]:i[1],e)}):n.on(i[0],function(e){n.fire(n.isAd()?i[2]:i[1],e)})})}},{key:"initFeatureDuration",value:function(){var t=this,i=this.proxy;this.lastCurrentTime=void 0,i.on(hc.NTF_TimeUpdate,function(){var e;i.isAd()||i.isPatch()||(e=i.getCurrenttime(),t.lastCurrentTime=e,e=1e3*i.getCurrenttime(),i.checkAppendPatch(),i.checkAuthTime(e),t._checkSecondAuthTime(e))})}},{key:"updateStatusPool",value:function(e){var t=this.statusPool;switch(e){case S.a.Status_StartPlay:t.add([S.a.Status_StartPlay],!0);break;case S.a.Status_EveryStartPlay:t.add([S.a.Status_EveryStartPlay]),Bc.noticeSenderFlush();break;case S.a.Status_AdStartPlay:t.add([S.a.Status_AdStartPlay],!0);break;case S.a.Status_ADEveryStartPlay:t.add([S.a.Status_ADEveryStartPlay]),Bc.noticeSenderFlush();break;case S.a.Status_Playing:t.add([S.a.Status_Play,S.a.Status_Playing]),t.remove([S.a.Status_Idle,S.a.Status_PlayError,S.a.Status_Stoped,S.a.Status_End_Play,S.a.Status_Paused,S.a.Status_Waiting]);break;case S.a.Status_Paused:t.add(S.a.Status_Paused),t.remove([S.a.Status_Idle,S.a.Status_Play,S.a.Status_Playing,S.a.Status_Waiting,S.a.Status_PlayError,S.a.Status_Stoped,S.a.Status_End_Play]);break;case S.a.Status_Waiting:t.add(S.a.Status_Waiting),t.remove([S.a.Status_Idle,S.a.Status_Play,S.a.Status_Playing,S.a.Status_Paused,S.a.Status_PlayError,S.a.Status_Stoped,S.a.Status_End_Play]);break;case S.a.Status_PlayError:t.add(S.a.Status_PlayError),t.remove([S.a.Status_Idle,S.a.Status_Play,S.a.Status_Playing]),Bc.noticeSenderFlush();break;case S.a.Status_Stoped:t.add(S.a.Status_Stoped),t.remove([S.a.Status_Idle,S.a.Status_Play,S.a.Status_Playing,S.a.Status_Waiting]);break;case S.a.Status_End_Play:t.add(S.a.Status_End_Play),t.remove([S.a.Status_Idle,S.a.Status_Play,S.a.Status_Playing,S.a.Status_Waiting])}}},{key:"getData",value:function(){var e=this.engine,t=e.movieinfo,i=e.playerVersion,e={},t=t.current;return e.tvid=t.tvid,e.vid=t.vid,e.albumId=t.albumId||"",e.cid=t.cid||"",e.duration=t.duration||"",e.privateVideo="0",e.origin="",e.playerVersion=i,e}},{key:"_checkSecondAuthTime",value:function(e){var t=this,i=this.logger,n=this.engine,r=this.proxy,a=r.kiwi,o=n.movieinfo,n=r._playingSpend,s=o.current;if(!this._isRequestAuthing&&s.isVIP&&!s.hasSendSencondAuthRemote&&n>s.authRTime)try{var c=o.getVDInfo(),d={};if("ts"===c.fileFormat||"mp4"===c.fileFormat)Object(M.a)(d,s.authShare),Object(M.a)(d,{tvid:s.tvid,aid:s.albumId,vid:c.vid,cid:s.cid,timeSpan:Math.floor(1e3*r.getCurrenttime()),fileFormat:c.fileFormat,shareFlag:1});else{if("f4v"!==c.fileFormat)return;for(var u=0;u<a.fragments.length;u++)if(e/1e3<=a.fragments[u].endTime){l=a.fragments[u];break}var l,h=(l=l||a.fragments[0]).uri.toString(),d=W.a.query2Json(h),f=W.a.filename(window.location.protocol+""+h);Object(M.a)(d,{filename:f,tvid:s.tvid,aid:s.albumId,fileFormat:c.fileFormat,shareFlag:1})}this._isRequestAuthing=!0,N.request(d,function(){i.debug("second boss "),t._isRequestAuthing=!1,s.hasSendSencondAuthRemote=!0},function(){t._isRequestAuthing=!1,s.hasSendSencondAuthRemote=!0})}catch(e){i.error(e&&e.stack?e.stack:e)}}},{key:"destory",value:function(){var e=this.proxy.kiwi;e.off(cc.ERROR,this.onKernelError),e.off(cc.STATE_CHANGE,this.onStatusChanged),e.off(cc.MSE_ATTACHING,this.onMediaAttaching),e.off(cc.BUFFER_CREATED,this.onMediaBufferCreated),e.off(cc.BUFFER_APPENDING,this.onMediaBufferAppending),e.off(cc.BUFFER_APPENDED,this.onMediaBufferAppended),e.off(cc.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),e.off(cc.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),e.off(cc.DNS_PARSER_SUCCESS,this.onDNSParser),window.removeEventListener("beforeunload",this.unloadEvent),this.lastCurrentTime=void 0}},{key:"initKernelEvent",value:function(){var t=this,e=this.proxy.kiwi;this.onKernelError=function(e){return t._onKernelError(e)},this.onStatusChanged=function(e){return t._onStatusChanged(e)},this.onMediaAttaching=function(e){return t._onMediaAttaching(e)},this.onMediaBufferCreated=function(e){return t._onMediaBufferCreated(e)},this.onMediaBufferAppending=function(e){return t._onMediaBufferAppending(e)},this.onMediaBufferAppended=function(e){return t._onMediaBufferAppended(e)},this.onDataSourceStageSwitching=function(e){return t._onDataSourceStageSwitching(e)},this.onDataSourceStageSwitched=function(e){return t._onDataSourceStageSwitched(e)},this.onDNSParser=function(e){return t._onDNSParser(e)},e.on(cc.ERROR,this.onKernelError),e.on(cc.STATE_CHANGE,this.onStatusChanged),e.on(cc.BUFFER_CREATED,this.onMediaBufferCreated),e.on(cc.BUFFER_APPENDING,this.onMediaBufferAppending),e.on(cc.BUFFER_APPENDED,this.onMediaBufferAppended),e.on(cc.MSE_ATTACHING,this.onMediaAttaching),e.on(cc.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),e.on(cc.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),e.on(cc.DNS_PARSER_SUCCESS,this.onDNSParser)}},{key:"_onKernelError",value:function(e){var t,i=e.severity,n=e.category,r=e.code,a=e.data&&0<e.data.length&&e.data[0]?e.data[0].gas:null,o=this.proxy,s=this.logger,c=this.engine,d=c.pingbackQOS,u=c.pingbackV6,l=c.movieinfo;r==uc.DATA_AUTH_Error&&"CDN"==c.getCurrLoaderMode()&&this._dashAuthNum<this._dashAuthMax?(t=l.getVDInfo(),this._dashAuthNum++,s.log("kiwi auth error, num="+this._dashAuthNum),o.switchVdAction({vd:t.vd,bid:t.bid,fileFormat:t.fileFormat})):i===ge.a.RECOVERABLE&&(r===uc.MEDIA_HIGH_BUFFER&&this._recoverMediaPerNum<this._recoverMediaMax||r!==uc.MEDIA_HIGH_BUFFER&&this._recoverMediaNum<this._recoverMediaMax)?(l=o.getCurrenttime(),t=this._recoverMediaNum,1==(t=r==uc.MEDIA_HIGH_BUFFER?(0<this._recoverMediaPerNum&&l+1<o.getDuration()&&(l+=1),this._recoverMediaPerNum++,this._recoverMediaPerNum):(0<this._recoverMediaNum&&l+1<o.getDuration()&&(l+=1),this._recoverMediaNum++,this._recoverMediaNum))&&d.sendLogToCompass("KIWIR-"+ye.a[n]+"-"+r),t=fc.a.KIWIR+"-"+r+"-"+t,u.sendErrorPlayPingback("",t),o.hasSeeking=!0,s.warn(t),o.kiwi.recoverMedia()):i===ge.a.IGNORABLE?(o.isAd()&&(i=fc.a.KIWI+"-"+r,d.sendLogToCompass(fc.a.AD+"-"+i),u.sendErrorPlayPingback("",i)),o._statusChanged({status:hc.Status_LoadFailed,actionType:!1,gas:a||c._getCurrentGas()})):(o._statusChanged({status:hc.Status_LoadFailed,actionType:!1,gas:a||o.getCurrentGas()}),o.isAd()?(o=fc.a.KIWI+"-4703",d.sendLogToCompass(fc.a.AD+"-"+o),u.sendErrorPlayPingback("",o),s.warn("kernel error: KIWI-"+r)):(s.error("kernel error: "+ye.a[n]+"-"+r+", "+e.data.join("-")+", recoveryNum="+this._recoverMediaNum),this.brokedown(fc.a.KIWI,r)))}},{key:"_onStatusChanged",value:function(e){var t=this,i=this.engine,n=this.proxy,r=this.logger,a=this.statusPool,o=i.sptr,s=i.sbtr,c=i.pingbackV6,d=i.pingbackQOS,u=e.state;"playing"!==u&&"pause"!==u&&"stop"!==u&&"error"!==u||(n.hasSeeking=!1);var l=n.isPatch();if(!l||-1!==["loadedmetadata","playing","ended"].indexOf(u))switch(u){case"loadedmetadata":if(i.autoplay&&this._needPlay&&!n._videoSwitchPause){if(i.isPatch())return void n.play();if(i.errorcode&&"A00302"!==i.errorcode.code&&n.isAd())return;this._needPlay=!1,this._clearWaitingTimer();var h=n.play();h&&(n._duringPlay=!0,h.then(function(){n._duringPlay=!1,i.mutedstartplay=!1,r.log("Automatic playback started!")},function(e){e&&("NotAllowedError"===e.name||e.message&&/the user didn't interact with the document first/gi.test(e.message))?(r.warn("Automatic playback failed, muted video and then try to play!"),i.mutedstart=!0,i.setVolume(0,!0),n.fire(S.a.NTF_PLAY_MUTED,{status:"playfailmuted"}),n.play().then(function(){r.warn("Play muted playback successful!"),n._duringPlay=!1,n.fire(S.a.NTF_MutedStartPlay),i.mutedstartplay=!0},function(){n._duringPlay=!1,n._needPlay=!0,r.warn("Play muted playback failed, & Show a UI element to let the user manually start playback.!"),n._canGetVideoInfo(!0),n.fire(S.a.NTF_NeedUserGesture4Playback)})):(n._duringPlay=!1,n._needPlay=!0)}))}else n.pause(),r.warn("Pause video! cause params => autoplay=false or autoplay=0 "),n._canGetVideoInfo(!0),n.fire(S.a.NTF_NeedUserGesture4Playback);n._videoSwitchPause=void 0,n._videoSwitching=void 0,n.isAd()||this._statusChanged(S.a.Status_LoadedMetaData,e);break;case"playing":n._videoSwitchPause=void 0,n.tempStore.__sendFirstFrameShow||(n.tempStore.__sendFirstFrameShow=!0,o.plyaetm=+new Date,o.adUsedTime=o.adaetm-o.adastm,o.plyUsedTime=o.plyaetm-o.plyastm,o.ffetm=o.plyaetm,n.isAd()?(o.ffstm=o.psdklstm-1,o.ffetm=o.psdklstm-1,o.vcletm=o.plyaetm):(o.vclstm=o.psdklstm-1,o.vcletm=o.psdklstm-1,o.ffetm=o.plyaetm),this.getUserIpInfo()),n._paused=!1;var f={status:hc.Status_Play,actionType:n._checkActionType(hc.Status_Play)},p=n.currStatus,_=n.isDelayPlay(),h=!1;if(s.isSeekingStatus()&&s.mediaPlaying(),n._statusChanged(f),n.isAd())n._patchFirstPlay=!1,n._ADfirstPlay&&(n._ADfirstPlay=!1,n._canGetVideoInfo(!0),this._statusChanged(S.a.Status_AdStartPlay,f),r.log("ad start play,params: info = cur ad!")),a.has(S.a.Status_ADEveryStartPlay)||this._statusChanged(S.a.Status_ADEveryStartPlay,f),"play"===W.a.query("__pmobius__")&&d.sendLogToCompass("MOBIUS-AD"),this._statusChanged(S.a.Status_AdPlaying,f);else{if(n._firstPlay&&(n._firstPlay=!1,n._canGetVideoInfo(h=!0),this._statusChanged(S.a.Status_StartPlay,f),i.autoVdUsing&&this.proxy.setDefList()),a.has(S.a.Status_EveryStartPlay)||this._statusChanged(S.a.Status_EveryStartPlay,f),l)return n._patchFirstPlay&&(n._patchFirstPlay=!1,this._statusChanged(S.a.Status_PatchStartplay,f)),void this._statusChanged(S.a.Status_Playing,f);n._patchFirstPlay=!0,this._statusChanged(S.a.Status_Playing,f),h&&c.sendTimingPingback(),p!==S.a.Status_Waiting&&p!==S.a.Status_Play||c.sendPlayingPingback(),n.tempStore.__sendMovieFirstFrameShow||(n.tempStore.__sendMovieFirstFrameShow=!0,c.sendStartPlayPingback(),d.sendPlayTimeRecord(),"play"===W.a.query("__pmobius__")&&d.sendLogToCompass("MOBIUS-MOVIE-".concat(n.kiwi.currentLoaderMode.toUpperCase()))),P.a.openHeartBeat(),P.a.keepalive()}P.a.updateVipTypes(),this.followUpNextLoadFlag||(this.followUpNextLoadFlag=!0,p={},i.isInteractVideo&&(p.uniqueId=i.iv_state.uniqueId,p.isInteractVideo=!0,p.tvid=i.getMovieInfo().tvid,p.vid=i.getMovieInfo().vid),n.fire(S.a.NTF_FollowUpNextLoad,p)),_&&n.clearDelayPlayInfo(!1),n.tempStore.__nsta||(n.tempStore.__nsta=!0,i.notyfyADInfo({type:"video-play"})),n.tempStore.__sendADStartPPB||(n.tempStore.__sendADStartPPB=!0,c.sendADStartPlayPingback()),this.sendStuckdetl(2),s.isSeekingStatus()&&(s.end(),d.sendSeekBenchmark(),"seek"===W.a.query("__pmobius__")&&d.sendLogToCompass("MOBIUS-SEEK-".concat(s.cost))),n.video().blobUrlMalformed&&(n.video().blobUrlMalformed=!1,d.sendLogToCompass("URLBLOB_WAKED")),this._clearWaitingTimer(),this._dashAuthNum=0,this._recoverMediaPerNum=0;break;case"pause":n._paused=!0;var g={status:hc.Status_Paused,actionType:n._checkActionType(hc.Status_Paused)};n._statusChanged(g),n.isAd()?this._statusChanged(S.a.Status_AdPaused,g):(n._timeMark=0,this._statusChanged(S.a.Status_Paused,g),P.a.stopHeartBeat());break;case"waiting":n._paused=!0;var y={status:hc.Status_Waiting,actionType:n._checkActionType(hc.Status_Waiting)},v=n.isAd();n._statusChanged(y),v?this._statusChanged(S.a.Status_AdWaiting,y):(n._timeMark=0,this._statusChanged(S.a.Status_Waiting,y),P.a.stopHeartBeat()),n.hasSeeking||n.kiwi.rebooting||!n.tempStore.__nsta||(this._clearWaitingTimer(),this._waitingStartTime=+new Date,this.waitingTimer=setTimeout(function(){c.sendWaitingPingback(v),clearTimeout(t.waitingTimer)},1500));break;case"seeking":g=n.getCurrenttime(),y=n.getDuration();n._videoSwitchPause=void 0,n._paused=!0,s.mediaSeeking(),n.fire(n.isAd()?S.a.NTF_AD_Seeking:S.a.NTF_Seeking,{current:g,duration:y,actionType:n._checkActionType(hc.NTF_Seeking)}),this.lastCurrentTime=void 0;break;case"seeked":var m=n.getCurrenttime(),b=n.getDuration();this._clearWaitingTimer(),n.hasSeeking=!1,s.mediaSeeked(),n.fire(n.isAd()?S.a.NTF_AD_Seeked:S.a.NTF_Seeked,{current:m,duration:b,actionType:hc.Action_Type_Code});break;case"progress":n.fire(hc.NTF_Progress,{buffer:n.getBufferTime()});break;case"EOR":i.episode.finishPres(i.getMovieInfo().tvid,!0);break;case"EOP":n._statusChanged({status:hc.Status_Loaddone,actionType:!1});break;case"willended":n._statusChanged({status:hc.Status_Will_Stoped,actionType:!1});break;case"beforeended":n.kiwi.loop=i.cyclePlay;break;case"ended":n._paused=!0;m=i.getMovieInfo(),b={status:hc.Status_Stoped};(n.isAd()||!n.isAd()&&n.checkAuthTime(m.isVIP&&m.previewTime<1/0?m.previewTime+1:1e3*n.getCurrenttime()))&&(n._statusChanged(b),this._clearWaitingTimer(),n.isAd()?this._statusChanged(S.a.Status_AdPlayEnded,b):(n._timeMark=0,n.isLast()&&this._statusChanged(S.a.Status_Stoped,b)),P.a.stopHeartBeat());break;case"loadstart":(n.isAd()||e.gas)&&n._statusChanged({status:hc.Status_Loadstart,eventOrigin:"ad",gas:e.gas});break;case"loaderseek":s.isSeekingStatus()&&s.seekLoader();break;case"loaderpump":s.isSeekingStatus()&&s.pumpLoader(e.data);break;case"muxswallow":s.isSeekingStatus()&&s.muxSwallow();break;case"muxspit":s.isSeekingStatus()&&s.muxspit()}}},{key:"_onMediaBufferCreated",value:function(){this._needPlay=!0}},{key:"_onMediaBufferAppending",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppending()}},{key:"_onMediaBufferAppended",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppended()}},{key:"_onMediaAttaching",value:function(){this.proxy.fire(S.a.NTF_SRC_Attaching)}},{key:"_onDataSourceStageSwitching",value:function(){var e,t=this.proxy;clearTimeout(t._switchDelayTimer),clearTimeout(t._switchAudioDelayTimer),t._switchDelayTimer=null,t._switchAudioDelayTimer=null,t.switchVmsRequest&&t.switchVmsRequest&&(e=t.switchVmsRequest.getXhrRequest())&&e.abort&&e.abort()}},{key:"_onDataSourceStageSwitched",value:function(){this._recoverMediaNum=0}},{key:"_onDNSParser",value:function(e){this.logger.info("DNSParser => "+JSON.stringify(e)),this.engine.pingbackQOS.sendQOSReport({type:"DNSParser",para:e})}},{key:"brokedown",value:function(e,t,i){var n=this.proxy,r=this.engine,a=this.logger,o=r.pingbackV6,s=r.pingbackQOS;n.pause();var c=this.getData();c.type=e,c.code=t,c.st=i||"";var d,u,l,h,f,p,_=e+"-"+t;i&&(_+="-"+i),512==i&&mc?n.fire(S.a.NTF_BuyPlay,c):(a.info("playproxy brokedown, pingback, ec = ".concat(_)),t&&t!==fc.a.P07001&&o.sendErrorPlayPingback("",_,i),r.errorcode=c,n.fire(S.a.NTF_Error,c),this.followUpNextLoadFlag||(this.followUpNextLoadFlag=!0,n.fire(S.a.NTF_FollowUpNextLoad,"")),d=q.vmsUrl,u=this,h=function(e){u.logger.info("request, dnsparser, info = "+e+",url = "+d),u.getUserIpInfo(function(){s.sendLogToCompass(_)})},(l=d)&&(/[a-z]/i.test(l)?(p=Q()($.a.mark(function e(t){var i;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=W.a.parse(l),i=t+"/3f0/hd.cloud.iqiyi.com/d?dn="+i.host+"&business=pcwPlayer&cross-domain=1",T.a.ajax({url:i,withCredentials:!1,success:function(e){h(e)},failure:function(e){h(e)}});case 3:case"end":return e.stop()}},e)})),T.a.ajax({url:q.vmsAccess,timeout:2e3,withCredentials:!(f=function(e){return p.apply(this,arguments)}),success:function(e){e&&"string"==typeof e?(e=e.split(";"),f(Ec+"//"+e[0])):f(q.dnsIPFail)},failure:function(e){f(q.dnsIPFail)}})):h(l)))}},{key:"getUserIpInfo",value:function(n){var r=this;P.a.getUserIPInfo(function(e){var t=P.a.getUid(),i="";t||(i=L.a.get("P00002")),r.logger.info("user info, uid = "+t+", P00002 = "+i+", P00003 = "+L.a.get("P00003")+",v.f4v = "+JSON.stringify(e)),n&&n()})}},{key:"_clearWaitingTimer",value:function(){clearTimeout(this.waitingTimer),this.waitingTimer=0,this._waitingStartTime=0}},{key:"sendStuckdetl",value:function(e){0<this.waitingTimer&&(this.engine.pingbackQOS.sendStuckdetl(e,this._waitingStartTime,this.proxy.isAd()),this._clearWaitingTimer())}}]),Hc);function Hc(e){f()(this,Hc),this.proxy=e.playproxy,this.engine=e,this.logger=new E.a("PlayProxyEvent[".concat(e.id,"]")),this.initFeatureDuration(),this.initDecode(),this.initKernelEvent(),P.a.beforeunloadListener();var t=this;this.unloadEvent=function(){e.pingbackV6.sendEndPlayPingback(3),t.sendStuckdetl(1)},window.addEventListener("beforeunload",this.unloadEvent),this._needPlay=!0,this._recoverMediaNum=0,this._recoverMediaPerNum=0,this._recoverMediaMax=3,this._dashAuthNum=0,this._dashAuthMax=2,this.waitingTimer=0,this._isRequestAuthing=!1,this._waitingStartTime=0,this.followUpNextLoadFlag=!1,this.statusPool=new Vc}function zc(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}var Yc=window.location.protocol,Gc=function(e){h()(s,e);var i,n,r=(i=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function s(e){var t;return f()(this,s),(t=r.call(this,e)).logger=new E.a("PlayProxy[".concat(e.id,"]")),t.engine=e,t.knlRevision="1.1.40",t.currStatus="",t._firstPlay=!0,t._ADfirstPlay=!0,t._patchFirstPlay=!0,t._timeMark=0,t._vdsSwitch=!1,t._playingDuration=0,t._playingSpend=0,t._skipHT=0,t._skipTT=0,t.__canGetVideoInfo=!1,t._autoVdEnable=!1,t._autoVdUsing=!1,t.autoVdValue=-1,t.tempStore={},t.failProgramKey=void 0,t._isAllowSeek=!0,t._isDelayPlay=!1,t._delayPlayTime=0,t._delayTimer=null,t._absDashRequests=[],t._absDashResponses=[],t._isMobiusTest="performance"===W.a.query("__pmobius__")&&"true"==W.a.query("debug"),t}return c()(s,[{key:"canaryCdnLoader",value:function(){if(!this.p2pEnabled())return!0;var e=W.a.query("__ploader__");if(e){if("cdn"===e)return!0;if("p2p"===e)return!1}return!1}},{key:"init",value:function(e,t){v()(p()(s.prototype),"init",this).call(this,e);var i=this,n=this.engine,r=n.pack,a=n.i18n,o=n.pingbackQOS,n=sc();this.useVP9P2P=n.canaryVP9_P2P,this.useAV1P2P=n.canaryAV1_P2P,this.useCDNLoader=this.canaryCdnLoader(a,t),this.provider=new Ac(this.engine),r.ad||(this.adDisable=!0);r=new E.a("");Object(Y.b)(r),r.on("needFireLog",function(){o.sendLogToCompass("H264-SLICE-ALGORITHM")});r=e,e={muxEnableWorker:!0,timeline:"timeline/pcw-vod",externals:{cmd5x:lc.a.cmd5x}},Y.a.log("kiwi version is ".concat("1.1.40")),e=new ac(r,e);(window.kiwi=this.kiwi=e).on(cc.FPS_REPORT,function(e){i.fire(S.a.NTF_FPS_REPORT,e)}),this._eventer=new Wc(this.engine);e=!!this.engine.params.sourcePage&&"home"==this.engine.params.sourcePage;a.isTWLocale()||e||this.useCDNLoader||0!=this.engine.userSetBid||(this._autoVdEnable=!0,this._autoVdUsing=!0,1===parseInt(L.a.get("QP0025"),10)&&(this._autoVdUsing=!1)),this.getAdLog()}},{key:"p2pEnabled",value:function(e){if(!window.Map||I.a.browser.WECHAT)return!1;if(this.engine.params.feedMode||this.engine.isMini)return!1;if(e){var t=this._transformFFToKernelKnown(e),i="false"!==V.a.read("QiyiPlayerP2P");return t===dc.JDASH||i&&(t===dc.DASH_AV1||t===dc.DASH_VP9||t===dc.HLS&&"265ts"!==e)}return!0}},{key:"load",value:function(i){var a,o=this,n=this.engine,s=this.logger,e=this.provider,c=this.kiwi,t=this.engine,r=t.episode,d=t.movieinfo,u=i.tvid,l=i.vid,h=i.ugcAuthKey,f=i.imageLoader,p=i.startPlayTime,_=i.isSupportAI,g=i.isAdvanceEnd,y=i.share_sTime,v=i.share_eTime,m=this.hasPreload(u),b="load movieInfo, tvid=".concat(u,", vid=").concat(l);n.preVideoParam||(n.preVideoParam=i),d.tvid!=u||d.vid!==l||h||n.isInteractVideo?(t="check failProgramKey, tvid = ".concat(u," , key = ").concat(this.failProgramKey),this.failProgramKey&&this.failProgramKey.tvid&&(t+=",key.tvid = ".concat(this.failProgramKey.tvid,", num = ").concat(this.failProgramKey.num),this.failProgramKey.tvid==u&&3<=this.failProgramKey.num)?s.info(t):(parseInt(u,10)<9e7&&s.error("Core Player load movie info error,params: msg = "+u+"is invalid qipu id"),this._firstPlay=!0,this._ADfirstPlay=!0,this._patchFirstPlay=!0,d.setStartPlayTime(0<p?p:0),d.tvid&&r.clear(d.tvid),h&&(d.ugcAuthKey=h||"",e.clearCache(u,l)),n.adWholeCorner=!1,a=d.current,d.current={tvid:u,vid:l,albumId:i.albumId,adPlayerID:i.cid,imageLoader:f,isPreload:m,isAdvanceEnd:i.isAdvanceEnd},a.tvid&&(b+=", pretvid=".concat(a.tvid),this.fire(S.a.NTF_VideoChange,{preMovieInfo:a,curMovieInfo:d.current})),r.valid(u,!0),clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.tempStore={},this.fire(S.a.NTF_VRSStart,{data:this._eventer.getData(),movieinfo:d.current}),this.clearDelayPlayInfo(!1),s.info(b),e.getPromise(u,l).then(function(e){e.originalData.data.p.bt&&(o._skipHT=e.originalData.data.p.bt,o._skipTT=e.originalData.data.p.et),e.parts instanceof x&&(t=o.getPatchData(e.parts,e),e.parts=t,s.info("load movieInfo ok, has parts, type = ".concat(t.type))),e.imageLoader=f||"",e.isSupportAI=Boolean(_),e.isAdvanceEnd=Boolean(g),i.cid&&(e.adPlayerID=i.cid),d.switch(e),d.initShareTime(y,v);var t=d.current;r.setInfo(u,t);e=d.getVDInfo();t.duration=e.duration,o.fire(S.a.NTF_VRSReady,{data:o._eventer.getData(),movieinfo:t}),n.eventlog.vrsready=!0,a.tvid&&o.fireChanged(),(o.adDisable||r.finishPres(u))&&o.concatCurFeature(u),t.isPreload=!1},function(e){var t="check failProgramKey ++, tvid = ".concat(u," , key = ").concat(o.failProgramKey);o.failProgramKey?o.failProgramKey.tvid==u&&o.failProgramKey.num++:o.failProgramKey={tvid:u,num:1},t+=",key.tvid = ".concat(o.failProgramKey.tvid,", num = ").concat(o.failProgramKey.num),s.info(t),d.setInfo(e.movieinfo);var t=e.level,i=e.type,n=e.code,r=e.st;switch(t){case 0:c.reset(),o._eventer.brokedown(i,n,r);break;case 1:c.reset(),o.noticeRecharge(n);break;case 2:c.reset(),o._eventer.brokedown(i,n,r);break;default:s.error(e&&e.stack?e.stack:e)}o.fire(S.a.NTF_VRSDone),a.tvid&&o.fireChanged()}))):s.error("tvid vid should not the same")}},{key:"preload",value:function(i,e){var n=this,t=this.engine,r=t.episode,a=t.movieinfo;r.valid(i,!0),this.provider.getPromise(i,e).then(function(t){n.checkVipPay(t.vipBlock,t.vipTheatre,t.albumId,t.authTipType,function(e){n.logger.info("preload movieInfo ok,checkVipPay = ".concat(e," ")),e||(t.parts instanceof x&&(e=n.getPatchData(t.parts,t),t.parts=e,n.logger.info("preload movieInfo ok, has parts, type = ".concat(e.type))),a.preload(t),r.setInfo(i,t),n.fire(S.a.NTF_VRSPreloaded,{movieinfo:t}))})},function(e){n.logger.warn("preload movie which requires auth: "+E.a.stringify(e))})}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"getCurrentGas",value:function(){var e=this.engine;return this.isAd()?this.kiwi.getCurrentADGas():{videoEventId:H.a.getEventId(e.movieinfo.tvid)}}},{key:"isAd",value:function(){return this.kiwi.isAd}},{key:"isPatch",value:function(){return!!this.engine.movieinfo.parts&&this.kiwi.isQBBPatching}},{key:"isLast",value:function(){return!!this.kiwi.eot}},{key:"_transformFFToKernelKnown",value:function(e){var t;if(e in dc)t=e;else switch(e){case"flv":case"f4v":t=dc.FLV;break;case"ts":case"265ts":t=dc.HLS;break;case"m4s":t=dc.JDASH;break;case"dash_vp9":t=dc.DASH_VP9;break;case"dash_av1":t=dc.DASH_AV1;break;default:var i="unhandled movie info fileFormat: ".concat(e,".");throw this.logger.error(i),new Error(i)}return t}},{key:"_getManifest",value:function(e,t){var i,n,r,a,o,s=[],c=this.p2pEnabled(e.fileFormat),d=(this.engine.i18n,t.isVIP),u=t.boss,l=t.vid,h=t.tvid,f=t.albumId,p=t.baseUrl;switch(e.fileFormat){case"ts":case"265ts":i=dc.HLS,n={m3u8:e.playlist,bid:e.bid},s=["manifest/hls",c?"loader/p2p":"loader/hls","mux/m2ts-mp4","renderer/mse"];break;case"f4v":i=dc.F4V,s=["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],n={bid:e.bid,fs:[]},o=e.playlist.length,a+="&su="+(r=A.a.getFluid()),a+="&mi=tv_"+f+"_"+h+"_"+l,a+="&ct="+e.vd,a+="&retry=",a+="&client=",a+="&z=",a+="&bt=",a+="&e=";for(var _=N.getPreviewTime(h),g=0,y=0;y<o;y++){var v=e.playlist[y],m=v.d,b=v.l;if(0<_&&_<=g)break;g=m,v=Yc+p+b+(/\.f4v$/gi.test(b)?"?":"&")+a;d&&(-1==v.indexOf("&vid=")&&(v+="vid="+l),v+="&t="+(b=u.data.t),-1==(v+="&cid=afbe8fd3d73448c9").indexOf("&ib=")&&(v+="&ib=4"),-1==v.indexOf("&ptime=")&&(v+="&ptime="+(_=_==1/0?0:_)),v+="&QY00001="+N.getAuthUid(h),b=b+W.a.filename(v),v+="&ibt="+lc.a.cmd5x(b,b)),-1==v.indexOf("&pv=")&&(v+="&pv=0.1"),-1==v.indexOf("&qyid=")&&(v+="&qyid="+r),n.fs.push({duration:m/1e3,url:v})}break;case"m4s":i=dc.JDASH,n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zc(Object(i),!0).forEach(function(e){w()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zc(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({bid:e.bid},e.playlist),s=["manifest/jdash","loader/p2p","renderer/mse"];break;case"mp4":i=dc.MP4,n={data:e.m3u8,bid:e.bid,duration:e.duration,size:e.vsize};break;case"dash_vp9":case"dash_av1":"dash_vp9"===e.fileFormat?i=dc.DASH_VP9:"dash_av1"===e.fileFormat?i=dc.DASH_AV1:this.logger.error("DASH unknown codec ".concat(e.code)),s=["manifest/dash",c?"loader/p2p":"loader/dash","renderer/mse"],n={mpd:e.playlist,bid:e.bid}}if(c){n.other={tvid:t.tvid,vid:e.vid,vsize:e.vsize,aid:t.albumId,vidlist:[]};for(var k="",x=0;x<t.vidl.length;x++){var S=t.vidl[x].bid,T=t.vidl[x].vid,P=t.vidl[x].fileFormat;k+=", ".concat(S,"-").concat(T,"-").concat(P),n.other.vidlist.push({bid:S,vid:T})}var I=n.other.vidlist;this.logger.info("vidlist: ".concat(k,", length = ").concat(I.length))}return{components:s,manifestType:i,manifestContent:n}}},{key:"getManifestTypes",value:function(){return dc}},{key:"clear",value:function(){var e=this.engine,t=e.adproxy,e=e.episode;this.adDisable||t.clear(),this._vdsSwitch=!1,this.currStatus="",clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.kiwi.reset(),e.clearAll(),this._clearAbsDashHttp(),this.engine.errorcode=void 0}},{key:"getAdLog",value:function(){var e=this;clearTimeout(this.getLogTimeout);var t=this.engine.adproxy,i="";!this.adDisable&&t&&(i=t.getAdLog()),this.logger.adInfo(i),this.getLogTimeout=setTimeout(function(){e.getAdLog()},3e4)}},{key:"destory",value:function(){this.clear(),this.provider.clearAll(),this._eventer.destory(),this.kiwi.destroy(),this.removeAllEventsListener()}},{key:"_getDataFlow",value:function(e){var t,i=void 0,n="getDataFlow, ..";return e&&(i={},e.segments&&(i.stream=e.segments,n="getDataFlow, segments length = ".concat(i.stream.length)),e.tracks)&&(e=(t=e.tracks).video,t=t.audio,i.audio={duration:t.duration,init:t.initSegment,segments:t.segments},i.video={duration:e.duration,init:e.initSegment,segments:e.segments},n="getDataFlow, audio.length = ".concat(t.segments.length," video.length=").concat(e.segments.length)),this.logger.info(n),i}},{key:"getDynamicArgs",value:function(){var r=this,a=this.engine;if(!this.p2pEnabled())return null;var o=a.pingbackV6,t=a.pingbackQOS;return{checkIsMobius:function(){return r._isMobiusTest},switchAutoDef:function(e){var t,i,n=R.a.getOldVd(e);r.isAd()?r.logger.info("p2p dashUpdated error , levelID or streamInfo is undefined"):(t=r.getCurrentVD(),i=R.a.getNewVd(t),r.logger.info("p2p switchAutoDef, auto=".concat(a.autoVdUsing,", vd = ").concat(t," -> ").concat(n,", levelID = ").concat(i," -> ").concat(e)),r.switchVdAction(n,!0),a.autoVdUsing&&(parseInt(e)>parseInt(i)?o.sendAutoUpToVDPingback(n,t):parseInt(e)<parseInt(i)&&o.sendAutoDwnToVDPingback(n,t)))},noticeRefreshMovieData:function(){r.provider.clearAll(),r.setDefList(!0)},getUserInfo:function(t){P.a.isVip(function(e){t({uid:P.a.getUid(),isVip:e})})},sendPingBack:function(e){t.sendQOSReport(e)},startPlayed:function(){return!r._firstPlay},abs:!0}}},{key:"concatCurFeature",value:function(e){var t,i=this.engine,n=this.provider,r=this.logger,a=this.kiwi,o=i.movieinfo,s=i.episode,c=i.sptr,d=o.getVDInfo(),u=o.current,l=o.startPlayTime,h=n.getPid(u.tvid,u.vid),f=n.getData(h),p=this._getManifest(d,u),n=p.manifestContent,p=p.components;this.p2pEnabled(d.fileFormat)&&(n.other.feed=!0,n.other.fromlist=!1,n.other.listdone=!1),f&&!s.finishFeatures(e)?(0<d.duration&&(u.duration=d.duration,l>=u.duration&&(o.startPlayTime=0)),o=(l=o.getPlayHead()).timeRanges,l=l.playHeadTime,this._eventer._recoverMediaNum=0,n&&(s.finishFeatures(e,!0),r.info("concat cur episode: ".concat(e,", vd:").concat(d.vd,", bid:").concat(d.bid,", fileFormat:").concat(d.fileFormat,",playHeadTime:").concat(l,",timeRanges:").concat(o,"duration: ").concat(u.duration,", other: ").concat(JSON.stringify(n.other))),this.tempStore.__sendFirstFrameShow||(c.ffstm=+new Date),a.loadSource(n,l,o,{streamType:qs.Episode,components:p,dynamicArgs:this.getDynamicArgs()}),i.autoVdUsing)&&(t=a.episodeStream)&&t.loader.changeAbsState(!0)):r.info("".concat(h," still not ready"))}},{key:"concatPreloadFeature",value:function(e){var t=this.logger,i=this.kiwi,n=this.engine,r=n.movieinfo,a=n.episode,o=a.getInfo(e),s=r.getPlayTimeRanges(!0),n=r.getVDInfo(!0),r=this._getManifest(n,o),o=r.manifestContent,r=r.components;this.p2pEnabled(n.fileFormat)&&(o.other.feed=!0,o.other.fromlist=!1,o.other.listdone=!1),t.log("concat preload episode: ".concat(e)),a.finishFeatures(e,!0),i.loadSource(o,null,s,{isCurrent:!1,streamType:qs.Episode,components:r,dynamicArgs:this.getDynamicArgs()})}},{key:"checkPreload",value:function(){var e=this.engine.getMovieInfo(),t=this.getCurrenttime(),i=this.getDuration();return!this.isAd()&&!this.engine.cyclePlay&&this.kiwi.endOfDown&&e.previewTime===1/0&&5<=i-t}},{key:"getCurrenttime",value:function(){var e,t=0,i=this.getDuration();return this.isAd()?(t=(e=this._getAdTimeObj()).curTime,i=e.duration):t=this.getDecodeCurrenttime(),t<i||isNaN(i)?t:i}},{key:"getDuration",value:function(){var e=this.engine.movieinfo,t=e.current,e=e.getVDInfo();return(this.isAd()?this._getAdTimeObj():t.isVIP&&t.isTryWatch&&e?e:this.kiwi).duration}},{key:"_getAdTimeObj",value:function(){var e=0,t=0,i=!1,n=this.engine,r=n.episode,n=n.adproxy;return this.isAd()&&("midroll"!=(n=n.getAdInfo()).rollType||0<(n=r.getMids(n.videoId)).length&&(i=!!n[0].isFusionMode),i?(e=this.kiwi.currentTime,t=this.kiwi.duration):(e=this.kiwi.currentTime,(i=this.kiwi.findPieceAt(e))&&(e-=i.fragment.startTime,t=i.fragment.duration))),{curTime:e,duration:t}}},{key:"refresh",value:function(e){var t=this.engine.movieinfo,i=t.current,n=i.tvid,r=i.vid,i=i.adPlayerID;n&&(t.next.isPreload=!1,t.clear(),this.clear(),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(S.a.Status_Idle),this.provider.clearAll(n),this.logger.log("Core Player refresh type = "+e),this.fire(S.a.NTF_VideoRefresh),this.load({tvid:n,vid:r,cid:i}))}},{key:"abortAres",value:function(){this.isAd()&&this.kiwi.abortCurrentADGas()}},{key:"abortAllAres",value:function(i,n){var r=this;setTimeout(function(){r.logger.info("abort all ".concat(i," roll, movieRecoverPoint=").concat(n));var e,t=null;switch(i){case"preroll":t=Rs.PRE_ROLL;break;case"midroll":t=Rs.MID_ROLL;break;case"briefRoll":t=Rs.INDETERMINACY_ROLL}void 0!==n&&(e=r.isAd(),r.fire(S.a.NTF_Before_Seeking,{currentTime:r.getCurrenttime(),isAd:e,gas:e?r.getCurrentGas():void 0})),r.kiwi.abortRollingStream(t,n)},0)}},{key:"lockSeek",value:function(){this._isAllowSeek=!1}},{key:"unlockSeek",value:function(){this._isAllowSeek=!0}},{key:"pause",value:function(e,t){this._duringPlay&&!t||(this._videoSwitching&&t&&(this._videoSwitchPause=!0),this.logger.log("Engine:request pause actionType =".concat(e,", force=").concat(t)),v()(p()(s.prototype),"pause",this).call(this,e,t))}},{key:"seek",value:function(e,t,i){var n=this.getDuration();n<e&&(e=Math.floor(n));var r=this.isAd();this.logger.log("Engine:seek(".concat(e,"), duration (").concat(n,"),isManualAction=").concat(t,", isAd=").concat(r)),this.fire(S.a.NTF_Before_Seeking,{currentTime:this.getCurrenttime(),isAd:r,gas:r?this.getCurrentGas():void 0}),e=parseFloat(e),this.hasSeeking=!0,this.checkAuthTime(1e3*e)&&(t?this._currentManualAction=hc.NTF_Seeking:this._currentCodeActionList.push(hc.NTF_Seeking),this._isAllowSeek&&(this.checkchangerange(e),this.kiwi.currentTime=e),this.isPaused()&&!i&&this.play())}},{key:"checkchangerange",value:function(e){this.engine.skip&&0<this._skipTT&&e>this._skipTT&&(e=[[0,this.getDuration()]],this.kiwi.timeRanges=e)}},{key:"checkAuthTime",value:function(e){var t=!0,i=this.engine.getMovieInfo();return i.isVIP&&e>=i.previewTime&&(this.noticeRecharge("Q00304"),t=!1),t}},{key:"noticeVidChanged",value:function(e,t){var i=this.engine.movieinfo;e?(i.vd=t,this.engine.vd=t,this.logger.log("definition changed: ".concat(t))):this.logger.log("definition changeFail: ".concat(t)),this._vdsSwitch=!1,this.fire(S.a.NTF_DefinitionSwitched,{curVD:t,success:e,isManualAction:this.__isManualAction}),this.__isManualAction=!1}},{key:"switchData",value:function(e){var t,i,n=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=this.kiwi,o=this.engine,s=this.logger,c=o.movieinfo,d=o.autoVdUsing,u=!1,l=e.vd,h=this._getManifest(e,c.current),f=h.manifestType,p=h.manifestContent,_=h.components;a.allowSwitchVariant?(t=a.currentManifestType,h=!(o=!(!d||!r))&&f!==dc.DASH_AV1&&f!=dc.DASH_VP9&&f!==dc.JDASH,null!==t&&f!==t&&(u=!0),this.p2pEnabled(e.fileFormat)&&(p.other.feed=!r,p.other.fromlist=!1,p.other.listdone=!1),(c=c.getVDInfo()).fileFormat!==e.fileFormat&&(i={components:_}),s.info("switchVD: ".concat(c.vd," -> ").concat(e.vd,", ").concat(c.bid," -> ").concat(e.bid,", ").concat(c.fileFormat," -> ").concat(e.fileFormat,", fromp2p = ").concat(r,", absing = ").concat(d)),a.switchLevel(p,u,h,o,i),r?this.noticeVidChanged(!0,l):u||this.video().readyState<3?this.once(hc.NTF_TimeUpdate,function(){n.noticeVidChanged(!0,l)}):(a=parseInt(1e3*a.bufferInfo.media.len/this.getPlaybackRate()+"",10),this.logger.log("will switch Variant after: "+a/1e3+"s"),this._switchDelayTimer=setTimeout(function(){n.noticeVidChanged(!0,l)},a)),this.switchVmsRequest=this.switchVmsResponse=null):s.warn("switchVD, failed, this stream will end, can't switch variant!")}},{key:"switchDefinition",value:function(e,t){var i=this.engine;e===this.getCurrentVD()&&!i.autoVdUsing||e===this.autoVdValue&&(i.autoVdUsing||!i.autoVdEnabled)||(e===this.autoVdValue?(this.switchVdAction(e),this.fire(S.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.fire(S.a.NTF_DefinitionSwitched,{curVD:e,success:!0,isManualAction:!0})):(this.__isManualAction=t,this._vdsSwitch=!0,this.fire(S.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.switchVdAction(e)))}},{key:"switchAudioTrack",value:function(n){var r=this,e=this.engine,t=e.movieinfo,i=e.pingbackQOS,a=e.ptr,o=e.sptr,s=t.current,c=s.audl.types;if(!(c.length<=1)){s.oldLid=s.currentLid||"";var d=t.vidl,u=s.vid,l=this.getCurrentVD();this.logger.log("switch audio: ".concat(s.oldLid,"->").concat(n));for(var h=0;h<d.length;h++)if(d[h].vd==l){u=d[h].vid;break}for(var l=R.a.getNewVd(l),f=0;f<c.length;f++)c[f].id===n&&(1!==c[f].ispre?(new bc).request({params:{tvid:s.tvid,vid:u,vd:l,lid:n,tryCount:0,switchvd:!0},pingback:i,ptr:a,sptr:o,hostUseIP:!1},function(e){var t,i;e.data&&e.data.st?(t=parseInt(e.data.st,10),e=(i=e.data).boss_ts?"boss_ts":"boss",100<t&&t<200&&i.program&&i.program.audio?(i[e]&&i[e].code&&s.boss&&s.boss.data&&(s.boss=i[e]),s.audio=i.program.audio,i=Pc(s,!0),(s.audl=i)&&i.audio?r._switchAudio(i.audio,n):r.getAdFail()):r.getAdFail()):r.getAdFail()},function(){r.getAdFail()}):this._switchAudio(null,n))}}},{key:"switchVdAction",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=this.engine,a=this.logger,i=this.kiwi,o=t.movieinfo,s=t.ptr,c=t.sptr,d=t.pingbackQOS,i=i.episodeStream;if(e==this.autoVdValue)return this._autoVdUsing=!0,i&&i.loader.changeAbsState&&i.loader.changeAbsState(!0),a.log("switchVD, changed, -> ".concat(e,", changeABS -> true, absing = ").concat(t.autoVdUsing)),this.setDefList(),void L.a.set("QP0025","0",{expires:2592e5,path:"/",domain:"iqiyi.com"});var u=o.getVDInfo(!1,e);this.p2pEnabled(u.fileFormat)&&!r&&(a.log("switchVD, changed, -> ".concat(e,", changeABS -> false")),this._autoVdUsing=!1,L.a.set("QP0025","1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),i&&i.loader.changeAbsState&&i.loader.changeAbsState(!1)),u.playlist?this.switchData(u,r):(i=(e=o.current).tvid,e=e.vid,a.info("switchVD, tvid=".concat(i,", vid=").concat(e,", isLogin=").concat(P.a.isLogin(),", vd=").concat(u.vd,", bid=").concat(u.bid)),this.switchVmsRequest=this.requestDash({params:{tvid:i,vid:u.vid,vd:u.bid,tryCount:0,switchvd:!0},pingback:d,ptr:s,sptr:c,hostUseIP:!1},{targetVd:u.vd,fileFormat:u.fileFormat},function(e){if(e){for(var t=o.current.vidl,i=0;i<t.length;i++)if(t[i].vd==e.vd){t[i]=e;break}n.switchData(e,r)}else a.info("switchVD, load movieInfo from vrs failed, fromp2p = ".concat(r)),r||n.noticeVidChanged(!1,u.vd)}))}},{key:"getAdFail",value:function(){var e=this.logger,t=this.engine,i=t.pingbackQOS,t=t.getMovieInfo();t.currentLid=t.oldLid,this.fire(S.a.NTF_AudioSwitched,{success:!1}),e.info("switch audio Fail!"),i.sendLogToCompass("KIWI-SWITCH-AUDIO-FAIL")}},{key:"_switchAudio",value:function(e,t){var i=this,n=this.logger,r=this.kiwi,a=this.engine.getMovieInfo();r.switchAudioTrack(e,!1),this.video().readyState<3?this.once(hc.NTF_TimeUpdate,function(){a.currentLid=t,i.fire(S.a.NTF_AudioSwitched,{success:!0})}):(e=null!==(r=(e=r.bufferInfo.media).buffered)&&void 0!==r&&r.audio?null===(r=e.buffered)||void 0===r?void 0:r.audio:e,e=parseInt(1e3*e.len/this.getPlaybackRate()+"",10),n.log("will switch audio after: "+e/1e3+"s"),this._switchAudioDelayTimer=setTimeout(function(){a.currentLid=t,i.fire(S.a.NTF_AudioSwitched,{success:!0})},e))}},{key:"getBufferTime",value:function(){var e=0;return e=!this.isAd()?this.kiwi.dataBufferInfo.end:e}},{key:"setSkipPrelude",value:function(){var e=this.kiwi,t=this.engine,i=t.movieinfo,n=t.skip,t=i.getPlayTimeRanges();this._skipTailTipped=!1,e.timeRanges=t,i.parts&&(n?0<this._skipTT&&((n=e.patchStream)&&0<this._skipTT&&e.delete(n)):i.parts.patchFeeded_=!1)}},{key:"adjustTimeRange",value:function(e){var t=this.engine.movieinfo,i=t.current,t=t.next,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?t:i;return 0<e.length&&(i=t.duration,t=e[0][e[0].length-1],0<i&&t<i&&i<=t+1?t=i:t+=1,e[0][e[0].length-1]=t),e}},{key:"getCurrentVD",value:function(){return parseInt(this.engine.movieinfo.vd,10)}},{key:"_canGetVideoInfo",value:function(e){var i=this;(this.__canGetVideoInfo=e)&&this.getVideoInfo(function(e){var t;e&&(t=i.engine.getMovieInfo(),e.sid&&(t.sid=e.sid,t.albumId=e.sid),t.cType=e.cType)})}},{key:"getVideoInfo",value:function(t){var i=this,e=i.engine,n=e.movieinfo,r=e.local,a=n.current,e=n.next;i.__canGetVideoInfo?((n=a).tvid||(n=e),z.a.get({tvid:n.tvid,vid:n.vid,locale:r},function(e){e.vi&&(i.engine.isInteractVideo&&i.engine.iv_state.isI5Custom?(e.vi.isI5Custom=i.engine.iv_state.isI5Custom,e.vi.IPARTMENT5_DANMUSWITCH=i.engine.iv_state.others.IPARTMENT5_DANMUSWITCH):(e.vi.isI5Custom=!1,e.vi.IPARTMENT5_DANMUSWITCH="0")),t(e)})):setTimeout(function(){var e={tvid:a.tvid,vid:a.vid,albumId:a.albumId,cid:a.cid,vi:{vid:a.vid,videoQipuId:a.tvid}};i.engine.isInteractVideo&&i.engine.iv_state.isI5Custom&&(e.vi.isI5Custom=i.engine.iv_state.isI5Custom,e.vi.IPARTMENT5_DANMUSWITCH=i.engine.iv_state.others.IPARTMENT5_DANMUSWITCH),t(e)},0)}},{key:"getVideoInfoByTvid",value:function(e,t){z.a.get({tvid:e,vid:"",locale:this.engine.local},function(e){t(e)})}},{key:"hasPreload",value:function(e){var t=this.engine.episode;return t.finishPres(e+="")&&t.finishFeatures(e)}},{key:"switchVideo",value:function(i){var e,n=this.logger,r=this.engine,t=r.movieinfo,a=r.pingbackV6,o=i.tvid,s=i.vid,c=i.cid,d=i.imageLoader,u=i.vfrm,l=i.vfrmblk,h=i.vfrmrst,f=i.startPlayTime,p=i.isSupportAI,_=i.share_sTime,g=i.share_eTime,y=i.isAdvanceEnd,v=i.innerIV,m=i.interactionType,b=i.isEnabledInteraction,k=t.current,t=t.next,x=!0===i.autoSwitch&&!!this.hasPreload(o,s);this.failProgramKey=void 0,this._videoSwitchPause=void 0,this._videoSwitching=!0,r.preVideoParam=i,o=Object(j.a)(o),parseInt(o)!==parseInt(k.tvid)||r.isInteractVideo?(h={vfrm:u||"",vfrmblk:l||"",vfrmrst:h||"",vfrmtp:i.autoSwitch?3:0,vvauto:i.autoSwitch?4:2,bkt:i.bkt||"",e:i.e||"",stype:i.stype||"",r_area:i.r_area||"",r_source:i.r_source||""},a.setvvfrom(i.vvfrom),a.setPlayPingbackInfo(h),a.sendEndPlayPingback(x?1:2,k.tvid),this.provider.clearAll(k.tvid),this._clearAbsDashHttp(),x||(t.isPreload=!1,this.pause(),this.clear(x),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(S.a.Status_Idle)),this._preplaying_spend=this._playingSpend,this._playingSpend=0,function(){i.autoSwitch=x;var e="\nswitch video:"+E.a.stringify(i)+", ivosRuning="+r.ivosRuning,t="\n"+new Array(e.length).join("-");n.log(t+e+t)}(),b=1==Number(b)&&(1==Number(m)||0==Number(m))&&!I.a.browser.EDGE,this.engine.isIVSubSwitch=!1,b?(r.isInteractVideo=e=!0,r.adPlaySource=0,r.others={},r.isIVMain=e,r.interactionMode=m+"",r.initInteractVideo({tvid:o,vid:s||r.params.vid,cid:c,imageLoader:d,resetHistory:!0})):(v?(e=o===r.iv_state.uniqueId,r.interactionMode=r.iv_state.interactionMode,r.isInteractVideo=!0,r.isIVMain=e,r.adPlaySource=61,r.isIVSubSwitch=!0):(r.isInteractVideo=!1,r.adPlaySource=0,r.others={}),y={tvid:o,vid:s||r.params.vid,cid:c,startPlayTime:f,imageLoader:d,isSupportAI:p,isAdvanceEnd:y},void 0!==_&&(y.share_sTime=_),void 0!==g&&(y.share_eTime=g),this.load(y))):n.info("switch video,params: data = "+E.a.stringify(i)+"    switch fail : Tvid is same")}},{key:"hasStatus",value:function(e){return this._eventer.statusPool.has(e)}},{key:"setEndPlay",value:function(e){this._eventer._statusChanged(S.a.Status_End_Play,e)}},{key:"fireChanged",value:function(){var i=this;i.getVideoInfo(function(e){var t=i._eventer.getData();t.vi=e.vi||{},t.vi.vid=t.vid,i.engine.isInteractVideo?z.a.get({tvid:i.engine.iv_state.uniqueId,vid:t.vid},function(e){t.vi.unique_vu=e.vi.vu,i.engine.iv_state.isI5Custom&&(t.vi.isI5Custom=!0,t.vi.IPARTMENT5_DANMUSWITCH=i.engine.iv_state.others.IPARTMENT5_DANMUSWITCH||"0"),i.fire(S.a.NTF_VideoChanged,t)}):i.fire(S.a.NTF_VideoChanged,t),i.logger.info("core videoChanged")})}},{key:"noticeRecharge",value:function(e,t,i){var n=this.engine,r=n.movieinfo,a=n.params;r.rc_code=e;var o=!1;if(r.vipTypes&&0<r.vipTypes.length)for(var s=0;s<r.vipTypes.length;s++)1==r.vipTypes[s]&&(o=!0);n=r.vipTypes||[],n=-1!=n.indexOf(1)||-1!=n.indexOf(6);this.pause(!1,!0);n={tvid:r.tvid,vid:r.vid,code:e,isTennisContent:o,from:t||0,origin:a.origin||a.parentId,vipTypes:r.vipTypes,s3:n?this.hasSeeking?"S109":"S110":"",s4:n?"SHIKAN":"",s2:n?window.location.href:"",emptionType:this.engine.emptionType||0};i&&""!=i&&(n.urlType=i),this.engine.isInteractVideo&&(n.isInteractVideo=!0,n.uniqueId=this.engine.iv_state.uniqueId),this.fire(S.a.NTF_Recharge,n)}},{key:"checkAppendPatch",value:function(){var e=this.engine,t=this.kiwi,i=e.movieinfo,e=e.skip,i=i.parts;e&&0<this._skipTT||!i||i.patchFeeded_||(i.patchFeeded_=!0,t.patchStream)||(e=i.data,i=i.components,t.loadSource(e,null,[[0,1/0]],{streamType:qs.Roll,components:i,roll:{rollType:Rs.POST_ROLL,category:"patch"}}))}},{key:"getPatchData",value:function(e,t){var i=null;return e&&t&&((t=this._getManifest(e,t)).manifestType===dc.F4V&&(t.manifestContent.isAD=!1,t.manifestContent.done=!0,t.manifestContent.rollType=Rs.POST_ROLL,i={type:t.manifestType,data:t.manifestContent,components:t.components})),i}},{key:"setDelayPlayInfo",value:function(e){this._isDelayPlay=!0,this._delayPlayTime=e}},{key:"clearDelayPlayInfo",value:function(e){this.fire(S.a.NTF_DelayToPlay_End),clearTimeout(this._delayTimer),this._isDelayPlay=!1,this._delayPlayTime=0,this._delayTimer=null,e&&this.play()}},{key:"play",value:function(e){var t=this,i=this;if(!i._isDelayPlay)return v()(p()(s.prototype),"play",this).call(this,e);i.fire(S.a.NTF_DelayToPlay,i._delayPlayTime),i._delayTimer||(this.logger.log("playproxy delay play, timeout start!"),i._delayTimer=setTimeout(function(){t.logger.debug("playproxy delay play, timeout end!"),i.fire(S.a.NTF_DelayToPlay_End),i._delayTimer=null,i._isDelayPlay=!1,i._delayPlayTime=0,v()(p()(s.prototype),"play",t).call(t,e)},i._delayPlayTime))}},{key:"isDelayPlay",value:function(){return this.isDelayPlay}},{key:"checkVipPay",value:function(e,t,i,n,r){var a,o,s,c,d=P.a.getUid()||"",u=this;e||t?(e&&(o=i,s=n,c=r,d&&e&&o&&!u.engine.isMini?(e=V.a.read("vipLayer")||"",s=parseInt(s||-1,10),-1==e.indexOf(d+"+"+o)&&5==s?P.a.reqVipTypes(function(e){var t=e.join(","),i="0"!==t&&""!==t;u.logger.log("vippay, request types callback, tt ".concat(t,", isvip ").concat(i)),-1!==e.indexOf(4)?c(!0,1):c(!1,i)},!0):c(!1)):c(!1)),t&&(i=i,n=n,a=r,d&&t&&i&&!u.engine.isMini?(t=V.a.read("vipLayer")||"",n=parseInt(n||-1,10),-1==t.indexOf(d+"+"+i)&&6==n?P.a.reqVipTypes(function(e){var t=e.join(","),i="0"!==t&&""!==t;u.logger.log("vippay, request types callback, tt ".concat(t,", isvip ").concat(i)),-1!==e.indexOf(4)?a(!0,2):a(!1,i)},!0):a(!1)):a(!1))):r(!1)}},{key:"playFromVipPay",value:function(){var e=this.engine.movieinfo.current,t=e.albumId,i=P.a.getUid()||"",n=V.a.read("vipLayer")||"",r=i+"+"+t;if(""!==n){var a=n.split("||");if(5<=a.length)for(var o=0;o<4;o++)r+="||"+a[o];else r=r+"||"+n}V.a.write("vipLayer",r),this.engine.adproxy.initSDK({data:this._eventer.getData(),movieinfo:e})}},{key:"getMP4URLByTvid",value:function(e,r){(new bc).request({params:{tvid:e,vid:"",k_ft1:"721829383634948"},hostUseIP:!1},function(e){var t="";if(e.data&&e.data.st){var e=e.data,i=e.program,e=e.st,e=parseInt(e,10);if(100<e&&e<200&&i&&i.video)for(var n=0;n<i.video.length;n++)i.video[n].mp4Url&&(t=i.video[n].mp4Url)}r(t)},function(){r("")})}},{key:"setDefList",value:function(){var r=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],a=this,o=this._absDashRequests,s=this._absDashResponses,t=this.engine,i=t.movieinfo,c=t.autoVdUsing,d=i.current,n=[],u=i.getVDInfo();c?n=d.vidl:e&&(n=[u]);for(var l,h=n.length,f=0,p=function(){var e=s;if(++f==h&&0<e.length){for(var t=0;t<e.length;t++){var i=e[t];i.other.feed=!1,i.other.fromlist=!0,i.other.listdone=t==e.length-1,a.kiwi.loadSource(i,0,[[]],{streamType:qs.Episode,parseMftOnly:!0})}a._clearAbsDashHttp()}},_=0;_<h;_++)n[_].isUsable&&601!==n[_].bid?(l=n[_],e||!l.playlist&&l.vid!==d.vid?function(i){var n=a.requestDash({params:{tvid:d.tvid,vid:i.vid,vd:i.bid,switchvd:!0}},{targetVd:i.vd,fileFormat:(c?u:i).fileFormat},function(e){var t=o.indexOf(n);-1<t&&o.splice(t,1),e&&(i.playlist=e.playlist,i.realArea=e.realArea,e=r._getManifest(e,d).manifestContent,s.push(e)),p()});o.push(n)}(l):p()):p()}},{key:"requestDash",value:function(e,o,s){var c=e.params.vid;return(new bc).request(e,function(e){var t,i,n,r,a;e.data&&e.data.program&&e.data.program.video&&(i=(n=e.data).program,r=n.st,100<(n=parseInt(r,10))&&n<200&&i.video&&(r=o.targetVd,n=o.fileFormat,!(r=F(i.video,r))||r.vid!=c||n&&n!=r.fileFormat||(a=e.data.boss_ts?"boss_ts":"boss",e.data[a]&&((t=e.data[a]).bossKeyTime=+new Date),a=r))),s(a,t)},function(){s()})}},{key:"_clearAbsDashHttp",value:function(){this._absDashRequests.forEach(function(e){e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort()}),this._absDashResponses.splice(0,this._absDashResponses.length),this._absDashRequests.splice(0,this._absDashRequests.length)}}]),s}(o);function Qc(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)}}var Kc="QiyiPlayerTimePlayedInDay",$c={},Zc=["loadstart","ready","error","ended"];function Xc(){var e=new Date;return e.getFullYear()+""+(e.getMonth()+1)+e.getDate()}function Jc(){var e=V.a.read(Kc),t=Xc(),i=0;return e&&(t=(e=e.split("|"))[0],i=parseFloat(e[1])),{day:t,totalTime:i}}var ed=function(e){h()(n,e);var i=Qc(n);function n(e){var t;return f()(this,n),t=i.call(this),e.on(S.a.NTF_AD_NotifyManager,function(e){t.emit(e)}),t}return n}(_.a),td=function(e){h()(u,e);var d=Qc(u);function u(r,e){var a;f()(this,u);var i=d.call(this),n=l()(i);i._isVip=!1,i._disableVideoOP=!1,i._user=P.a,i.bussiness=new ed(r,e),i._container=e.adContainer,i.engine=r,i.view=e,i.beforeIsAD=!1,i.beforeSeek=0,i.logger=new E.a("AdApi[".concat(r.id,"]"));var o=function(e,t){var n={type:e,gas:i.getCurrentGas()};!t||(n.data=t).gas&&(n.gas=t.gas);t=function(){var e=n.type,t=n.gas,i=t?t.id:void 0;if(!t||-1==Zc.indexOf(e))return!0;t=$c[i];if(t){if(t[e])return!1;t[e]=!0}else $c[i]={},$c[i][e]=!0;return!0}();r.isAd()&&i.logger.info("adapi, emit, type=".concat(e,", isAd=").concat(r.isAd(),", fire = ").concat(t," obj=").concat(JSON.stringify(n))),t&&i.emit(e,n)};r.on(S.a.NTF_StatusChanged,function(e){switch(e.state){case S.a.Status_AdLoadstart:o("loadstart",e);break;case S.a.Status_Ready:break;case S.a.Status_Play:o("play",e);break;case S.a.Status_AdPlaying:o("playing",e);break;case S.a.Status_Playing:$c={},o("playing",e);break;case S.a.Status_AdPaused:case S.a.Status_Paused:o("pause",e);break;case S.a.Status_AdWaiting:case S.a.Status_Waiting:o("waiting",e);break;case S.a.Status_AdError:o("error",e);break;case S.a.Status_PlayError:$c={},o("error",e);break;case S.a.Status_AdStalled:o("stalled",e);break;case S.a.Status_AdWillPlayEnded:o("willended",e);break;case S.a.Status_AdPlayEnded:case S.a.Status_End_Play:o("ended",e)}});var t=0;r.on(S.a.NTF_AD_TimeUpdate,function(i){clearTimeout(t),t=setTimeout(function(){var e=r.getCorrectTimeObj(),t=e.acurrent,e=e.aduration;i.current=t,i.duration=e,o("timeupdate",i)},0)}),r.on(S.a.NTF_Before_Seeking,function(e){var t=r.getCorrectTimeObj(),i=t.acurrent,t=t.isFusionMode;n._before={beforeIsAD:e.isAd,referrerGas:e.gas,beforeSeek:i,isFusionMode:t}});function s(e){e.isAD=r.isAd();var t=(i=r.getCorrectTimeObj()).acurrent,i=i.aduration;e.current=t,e.duration=i,o("seeked",e)}r.on(S.a.NTF_AD_Seeking,function(e){s(e)}),r.on(S.a.NTF_Seeking,function(e){s(e)});function c(e){e.isAD=r.isAd(),e.actionType="controls";var t=(i=r.getCorrectTimeObj()).acurrent,i=i.aduration;e.current=t,e.duration=i,Object(M.a)(e,n._before),o("afterSeeked",e),n._before=void 0}r.on(S.a.NTF_AD_Seeked,function(e){c(e)}),r.on(S.a.NTF_Seeked,function(e){c(e)}),r.on(S.a.NTF_TimeUpdate,function(e){o("timeupdate",e);var t,i=r.getCurrenttime(),n=i-a;a&&0<n&&n<1&&(t=n,e=Jc(),n=Xc(),e.day===n?e.totalTime+=t:e.totalTime=t,V.a.write(Kc,n+"|"+e.totalTime)),a=i}),r.on(S.a.NTF_PLAY_MUTED,function(e){o("muted",e)});e=e.fullscreen;return e&&e.on("change",function(e){o("exit"===e?"exitfullscreen":"fullscreen")}),r.on(S.a.NTF_DelayToPlay,function(){o("pausetoplay")}),P.a.on("infoset",function(){P.a.isVip(function(e){n._isVip=e})}),i}return c()(u,[{key:"load",value:function(e){e=e||{};var t=Array.isArray(e);t&&0<e.length||e.file&&!isNaN(e.offset)&&0<=e.offset?this.bussiness.emit("_playdata_",e):this.logger.warn("load error data parameter: isArray = ".concat(t,", ").concat(E.a.stringify(e)))}},{key:"getEngineType",value:function(){return"data"}},{key:"getCurrentGas",value:function(){return this.engine.getCurrentGas()}},{key:"abort",value:function(){this.engine.abortAres()}},{key:"isVIP",value:function(){return this._isVip}},{key:"getUserInfo",value:function(){var t=!1;return this._user.isVip(function(e){t=e}),{isVIP:t,passportCookie:this._user.passportCookie(),passportId:this._user.getUid(),isLogin:this._user.isLogin(),uaaUserId:A.a.getFluid()||A.a.getJsuid()}}},{key:"adcontainer",value:function(){return this._container}},{key:"video",value:function(){return this.engine.video()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"play",value:function(e){this._disableVideoOP||this.engine.play(e)}},{key:"pause",value:function(e){this._disableVideoOP||this.engine.pause(e)}},{key:"addEventListener",value:function(e,t){this.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"src",value:function(){if(1!==arguments.length)return this.engine.getSrc()||"";this.logger.error("mw is not support set src!")}},{key:"volume",value:function(e){if(!e)return this.engine.getVolume();this.engine.setVolume(e)}},{key:"muted",value:function(e){if("boolean"!=typeof e)return this.engine.getMuted();this.engine.setMuted(e)}},{key:"height",value:function(){return this.view.getWrapperArea().height}},{key:"width",value:function(){return this.view.getWrapperArea().width}},{key:"currentTime",value:function(){return this.engine.getCorrectTimeObj().acurrent}},{key:"duration",value:function(){return this.engine.getCorrectTimeObj().aduration}},{key:"buffered",value:function(){return this.engine.getBufferTime()}},{key:"sendUserActionPingback",value:function(e){this.view.pingback.sendUserActionPingback(e)}},{key:"fullscreentoggle",value:function(){this.view.fullToggle()}},{key:"isFullScreen",value:function(){var e=this.view,t=e.fullscreen;return e.setting.expandScreen?!!this.engine.isFullScreen:t?t.isFullScreen():void 0}},{key:"webfullscreentoggle",value:function(){var e=this.view.webfullscreen;e&&e.toggle()}},{key:"isWebFullScreen",value:function(){var e=this.view.webfullscreen;if(e)return e.isWebFullScreen()}},{key:"videoPlayedDurationInDay",value:function(){return Jc().totalTime}}]),u}(_.a),id=(c()(hd,[{key:"init",value:function(){var n=this,e=this.engine.pack;this.sdk=e.ad,this.initMiddle(e),this.initAdSdkEvent(),this.initEpisode();var t=!1,r=!1,a=null;this.engine.recorder?this.once(S.a.NTF_Get_Record,function(){r=!0,t&&(a.movieinfo.isPreload?n.sdk.playPreload():n.engine.playproxy.checkVipPay(a.movieinfo.vipBlock,a.movieinfo.vipTheatre,a.movieinfo.albumId,a.movieinfo.authTipType,function(e,t){e?n.fire(S.a.NTF_Show_VIPPay,t):n.initSDK(a,t)}))}):r=!0,this.on(S.a.NTF_VRSReady,function(i){t=!0,r?(n.logger.log("ares vrsready, isPreload = ".concat(i.movieinfo.isPreload,", tvid = ").concat(i.movieinfo.tvid,", vid = ").concat(i.movieinfo.vid)),i.movieinfo.isPreload?n.sdk.playPreload():n.engine.playproxy.checkVipPay(i.movieinfo.vipBlock,i.movieinfo.vipTheatre,i.movieinfo.albumId,i.movieinfo.authTipType,function(e,t){e?n.fire(S.a.NTF_Show_VIPPay,t):n.initSDK(i,t)})):a=i}),this.on(S.a.NTF_VRSPreloaded,function(e){n.initSDK(e)}),this.on(S.a.NTF_VideoChange,function(){n.middleware._disableVideoOP=!0}),this.on(S.a.NTF_VideoChanged,function(){n.middleware._disableVideoOP=!1,n.delayFireBriefAD()})}},{key:"initMiddle",value:function(e){var c=this,d=e.engine,e=e.view,u=d.playproxy,l=d.episode,h=this.logger,f=this.delayBriefAds;this.middleware=new td(d,e),this.middleware.bussiness.on("_playdata_",function(e){if(void 0!==e.length&&0<e.length)c._parseListSource(e);else{var t=e.videoEventId,i=H.a.getEpisodeId(t),t=l.valid(i),n=d.movieinfo,r=!!n.current&&n.current.tvid===i;if(h.info("ares notice-info, _playdata_, ares mw load"+(t?"":" invalid")+":"+E.a.stringify(e)),t){var a=0;switch(e.type){case"preroll":l.finishPres(i)?h.warn(i+": ignore ares gas, "+E.a.stringify(e)):(l.addPres(i,[e]),c._feedKernelAd(i,e,!1,0,"preroll"));break;case"briefRoll":e.seekable?c.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete c.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)];var o,a=e.offset,s=!0;r&&(o=n.getPlayHead().playRealStartTime,s=!d.hasStatus(S.a.Status_EveryStartPlay)&&a<=o),s?(a=0,l.addBriefs(i,[e]),c._feedKernelAd(i,e,!1,a,"briefRoll")):(f[i]||(f[i]=[]),f[i].push({videoId:i,adata:e,offset:a}));break;case"midroll":u.getCurrenttime()<e.offset?(e.seekable?c.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete c.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],l.addMids(i,[e]),c._feedKernelAd(i,e,!1,e.offset,"midroll")):h.warn(i+":drop ares gas, "+E.a.stringify(e))}}}})}},{key:"_parseListSource",value:function(e){if(void 0!==e.length&&0<e.length){for(var t=this.engine,i=this.logger,n=t.playproxy,r=t.episode,a=[],o=[],s="++++ adlog, ares notice-info, _playdata_, ares mw load, isFusionMode=true, len=".concat(e.length,","),c=0;c<e.length;c++){var d=e[c],u=d.videoEventId,l=H.a.getEpisodeId(u),u=r.valid(l),h=d.type,f=d.offset;u&&n.getCurrenttime()<f&&(a.push({duration:d.duration,url:d.file,gas:d}),o.push(Object(M.a)({isFusionMode:!0},d))),s+=", id(".concat(d.id,")-offset(").concat(f,")-seekable(").concat(d.seekable,")-duration(").concat(d.duration,")-videoValid(").concat(u,");;; ")}i.log(s),0<a.length&&(r.addMids(l,o),this._feedKernelAd(l,a,!1,f,h))}}},{key:"initSDK",value:function(e){var a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,i=this.engine,o=i.params,s=i.local,c=i.playerVersion,n=i.movieinfo,d=i.adPlaySource,u=i.episode,r=n.startPlayTime,i=n.getVDInfo(),l=e.movieinfo,h=!!l.isPreload,f=o.cid||"";l.adPlayerID&&(f=l.adPlayerID),o.isCid||!I.a.os.android&&!I.a.os.ios||(f=-1<navigator.userAgent.indexOf("MicroMessenger")?"qc_105092_300416":"qc_100001_100103");var p=o.isSupportViewpoint||!1,_=o.site||"iqiyiw",g=0;r>=i.duration&&(r=0);i=n.getPlayTimeRanges();"history"===(h?n.next:n.current).playStartFrom&&(n=i[0][0],i=i[i.length-1][1],g=n<r&&r<i?r:n);function y(e){a.middleware._isVip=e;var t=a.middleware.video(),i=l.tvid+"",n=_c.a.isNumber(l.vd)?l.vd:parseInt(a.engine.vd,10);51===n&&(n=5);var r={autoLoad:!0,autoRender:!0,isMacH5:!0,isPreload:h,adPlayerId:f,episodeId:i,videoEventId:H.a.generate(i),videoDefinition:n,showVoiceIcon:!(I.a.os.android||I.a.os.ios),videoMidware:a.middleware,isVIP:e,isSupportViewpoint:p,site:_,locale:s,passportId:P.a.getUid(),passportCookie:P.a.passportCookie(),clientVersion:c,videoContainer:t,couponCode:o.cpnc||"",couponVer:o.cpnv||"",ptid:I.a.getPtid(O.a.isTWLocale()),timePoint:g,playSource:d||0};"home"===o.sourcePage?u.finishPres(i,!0):setTimeout(function(){a.logger.log("ares init, {episodeId:".concat(i,", isPreload:").concat(h,", timePoint:").concat(g,"}, cupid:").concat(f)),a.sdk.init(r)},0)}void 0!==t?y(t):P.a.isVip(function(e){y(e)})}},{key:"initAdSdkEvent",value:function(){var d=this,e=this.sdk,s=this.engine,u=this.logger,c=this.delayBriefAds,r=s.playproxy,l=s.episode,h=s.movieinfo,a=s.skip,o=s.autoplay,f=s.pingbackQOS;e.on("roll-play",function(e){var t=e.rollType,i=e.videoEventId,n=H.a.getEpisodeId(i),r=l.valid(n);u.log("ares notice-info,  roll-play:"+(r?"":" invalid")+E.a.stringify(e));var a,o,s=!1,c=!1;"midroll"!=t||0<(o=l.getMids(n)).length&&(s=o[0].seekable,c=!!o[0].isFusionMode,a=o[0].offset),d.seekableMidAd["".concat(t,"_").concat(i)]&&(s=!0),u.log("ares notice-info, roll-play:".concat(r,", rollType:").concat(t,", isFusionMode:").concat(c,", seekable:").concat(s,", data:").concat(E.a.stringify(e))),r&&(d.adInfo={rollType:t,videoId:n,seekable:s,isFusionMode:c,offset:a},d.fire(S.a.Status_AresPlay,d.adInfo))}),e.on("roll-ended",function(e){var t=e.rollType,i=e.videoEventId,n=H.a.getEpisodeId(i),i=h.tvid==n,i=l.valid(n)&&i;if(u.info("ares notice-info, roll-ended, abortAllAres "+(i?"":" invalid")+E.a.stringify(e)+", videoId: "+n+", tvid: "+h.tvid),i){switch(t){case"preroll":r.tempStore.__sendFinishPres||(r.tempStore.__sendFinishPres=!0,f.sendFinishPresPingback()),l.finishPres(n,!0);break;case"midroll":l.finishMids(n,!0);break;case"briefRoll":l.finishBriefs(n,!0)}r.abortAllAres(t),(a&&o||!a||I.a.os.ios||I.a.os.android)&&r.isPaused()&&(u.log("manual play"),r.play()),d.fire(S.a.Status_AresEnded,{agent:"ares",data:{rollType:t,videoId:n}})}}),e.on("roll-load-finish",function(e){var t=e.rollType,i=e.videoEventId,n=H.a.getEpisodeId(i),r=l.valid(n),a=h.tvid==n;u.info("ares notice-info, roll-load-finish"+(r?"":" invalid")+":"+E.a.stringify(e));var o,i=s.sptr;if(i.asdkistm=e.initStartTime||0,i.asdkietm=e.initEndTime||0,i.adlstm=e.loadStartTime||0,i.adletm=e.loadEndTime||0,i.adirqstm=e.requestStartTime||0,i.adirqetm=e.requestEndTime||0,i.adsrqstm=e.showStartTime||0,i.adsrqetm=e.showEndTime||0,i.adaetm=+new Date,r)switch(t){case"preroll":0!==l.getPres(n).length&&a||"boolean"!=typeof(o=l.finishPres(n))||o||l.finishPres(n,!0);break;case"briefRoll":"boolean"!=typeof(o=l.finishBriefs(n))||o||l.finishBriefs(n,!0),c[n]&&c[n].length&&d.delayFireBriefAD();break;case"midroll":"boolean"!=typeof(o=l.finishMids(n))||o||l.finishMids(n,!0)}}),e.on("error",function(e){u.info("ares notice-info, error"+E.a.stringify(e)),r.brokedown(fc.a.AD,fc.a.P07001)}),e.on("adplayer_showtip",function(e){u.log("ares notice-info, adplayer_showtip"),d.fire(S.a.NTF_AD_Showtips,e)}),e.on("adplayer_ad_info",function(e){var t=(e=e||{}).data,i=t.videoEventId,n=H.a.getEpisodeId(i),i=l.valid(n);u.info("ares notice-info, adplayer_ad_info "+(i?"":" invalid")+":"+E.a.stringify(e)),i&&(t&&(_c.a.isObject(t.definitionSwitchingAd)?(l.setDefinitionAd(n,e),h.aresnoticedata.definition=t):_c.a.isArray(t.viewPoints)&&(h.aresnoticedata.viewPoints=t.viewPoints)),d.fire(S.a.Status_AresNoticeInfo,e))}),e.off("adplayer_ad_start"),e.on("adplayer_ad_start",function(e){u.log("ares notice-info, adplayer_ad_start"),e&&"13"==e.ctp&&(d.engine.adWholeCorner=!0),d.fire(S.a.NTF_AD_Start,e)}),e.off("adplayer_ad_end"),e.on("adplayer_ad_end",function(e){u.log("ares notice-info, adplayer_ad_end"),d.fire(S.a.NTF_AD_End,e)}),e.off("pause_start"),e.on("pause_start",function(e){"audio"===e.type&&(d.logger.log("ares notice-info, pause_start, get audio ad info! delayTime = ".concat(e.duration)),r.setDelayPlayInfo(1e3*e.duration||2500))}),e.off("pause_end"),e.on("pause_end",function(e){"audio"===e.type&&(d.logger.log("ares notice-info, pause_end, get audio ad info! status = ".concat(e.status)),"common"===e.status?r.clearDelayPlayInfo(!0):r.clearDelayPlayInfo(!1))}),e.off("adplayer_ad_block"),e.on("adplayer_ad_block",function(e){d.logger.info("ares notice-info, adplayer_ad_block, ".concat(JSON.stringify(e)," ")),e.videoEventId===r.getCurrentGas().videoEventId&&d.fire(S.a.NTF_AD_BLOCK)})}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"on",value:function(e,t){this.engine.on(e,t)}},{key:"once",value:function(e,t){this.engine.once(e,t)}},{key:"clear",value:function(){}},{key:"resize",value:function(){this.sdk.resize()}},{key:"initEpisode",value:function(){var n=this,e=this.engine,r=e.playproxy,e=e.episode;e.on("finishAddPres",function(e){var t=e.videoId,i=e.length,e=r.getCurrentGas(),e=H.a.getEpisodeId(e.videoEventId);n._feedKernelAd(t,null,!0,0,"preroll"),t===e||0===i&&(void 0===e||isNaN(e))?r.concatCurFeature(t):r.concatPreloadFeature(t)}),e.on("finishAddMids",function(e){var t=e.videoId,i=e.length,e=r.getCurrentGas(),e=H.a.getEpisodeId(e.videoEventId);t!==e&&(0!==i||void 0!==e&&!isNaN(e))||n._feedKernelAd(t,null,!0,null,"midroll")}),e.on("finishAddBriefs",function(e){var t=e.videoId,i=e.length,e=r.getCurrentGas(),e=H.a.getEpisodeId(e.videoEventId);t!==e&&(0!==i||void 0!==e&&!isNaN(e))||n._feedKernelAd(t,null,!0,null,"briefRoll")})}},{key:"_feedKernelAd",value:function(e,t,i,n,r){var a=this.engine,o=this.logger,s=a.movieinfo,c=a.playproxy,d=a.episode,u=a.sptr,l={},h=!1,a=[[0,1/0]],f={isCurrent:e==s.tvid,components:["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],streamType:qs.Roll,roll:{offset:n,done:i}};if(!i||!("preroll"===r&&0===d.getPres(e).length||"midroll"===r&&0===d.getMids(e).length||"briefRoll"===r&&0===d.getBriefs(e).length)){if("briefRoll"===r){if(!t)return;i=!0}if(Array.isArray(t)&&0<t.length?h=(l.fs=t)[0].gas.seekable:t&&(l.fs=[{duration:t.duration,url:t.file,gas:t}],h=t.seekable),"briefRoll"===r)f.roll.category="ad::brief",f.roll.rollType=Rs.INDETERMINACY_ROLL;else switch(f.roll.category="ad",r){case"preroll":f.roll.rollType=Rs.PRE_ROLL;break;case"midroll":f.roll.rollType=Rs.MID_ROLL}l.offset=n,l.other={seekable:h,done:i},this.firstAdData?this.firstAdData=!1:f.parseMftOnly=!0,this.firstAdData=i,o.debug("load ad, videoId=".concat(e,", tvid=").concat(s.tvid,", type: ").concat(r,", done: ").concat(l.done,", offset: ").concat(l.offset,", seekable: ").concat(l.seekable,", isFusionMode: ").concat(l.isFusionMode)),c.tempStore.__sendFirstFrameShow||(u.vclstm=+new Date),c.kiwi.loadSource(l,0,a,f)}}},{key:"delayFireBriefAD",value:function(){var a=this,o=this.delayBriefAds,e=this.engine,s=e.episode,c=e.movieinfo;this.engine.once(S.a.NTF_TimeUpdate,function(){if(o[c.tvid]){for(var e,t,i,n,r=o[c.tvid].splice(0,1)[0];r;)n=!0,e=r.videoId,t=r.adData,i=r.offset,s.addBriefs(e,[t]),a._feedKernelAd(e,t,!1,i,"briefRoll"),r=o[c.tvid].splice(0,1)[0];n&&a._feedKernelAd(e,null,!0,null,"briefRoll")}})}},{key:"getAdInfo",value:function(){return this.adInfo}},{key:"getAdLog",value:function(){return this.sdk.fetchLogs()}},{key:"destroy",value:function(){this.clear(),this.sdk.destroy()}}]),hd),nd=(c()(ld,[{key:"tvid",get:function(){return this.current.tvid},set:function(e){this.current.tvid=e}},{key:"vid",get:function(){return this.current.vid},set:function(e){this.current.vid=e}},{key:"vd",get:function(){return this.current.vd},set:function(e){this.current.vd=e}},{key:"vidl",get:function(){var e=[];return e=_c.a.isArray(this.current.vidl)?this.current.vidl:e}},{key:"adPlayerID",get:function(){return this.current.adPlayerID},set:function(e){this.current.adPlayerID=e}},{key:"isTryWatch",get:function(){return this.current.isTryWatch}},{key:"previewTime",get:function(){return this.current.previewTime}},{key:"previewType",get:function(){return this.current.previewType}},{key:"imageLoader",get:function(){return this.current.imageLoader},set:function(e){this.current.imageLoader=e}},{key:"currentLid",get:function(){return this.current.currentLid}},{key:"parts",get:function(){return this.current.parts},set:function(e){this.current.parts=e}},{key:"watermark",get:function(){return this.current.watermark},set:function(e){this.current.watermark=e}},{key:"hasSendSencondAuthRemote",get:function(){return this.current.hasSendSencondAuthRemote},set:function(e){this.current.hasSendSencondAuthRemote=e}},{key:"rc_code",get:function(){return this.current.rc_code},set:function(e){this.current.rc_code=e}},{key:"setStartPlayTime",value:function(e,t){e<0?this.logger.error("play start time set error!"):this.startPlayTime=this.current.isTryWatch&&!t?0:e}},{key:"getPlayHead",value:function(){var e=this.getPlayTimeRanges(),t=e[0][0],i=e[e.length-1][1],n=null,r=this.startPlayTime,a=t;return t<=r&&r<i&&(a=n=r),{timeRanges:e,playHeadTime:n,playRealStartTime:a}}},{key:"initShareTime",value:function(e,t){function i(e,t){var i=0,n=void 0;return{nsTime:i=e?parseInt(e,10)<0?0:parseInt(e):i,neTime:n=t?parseInt(t,10)<0?0:parseInt(t):n}}var n,r=this.engine.params;r.share_sTime||r.share_eTime?(n=i(r.share_sTime,r.share_eTime),this.current.share_start_time=n.nsTime,this.current.share_end_time=n.neTime,r.share_sTime=!1,r.share_eTime=!1):(e||t)&&(t=i(e,t),this.current.share_start_time=t.nsTime,this.current.share_end_time=t.neTime)}},{key:"getVDInfo",value:function(e,t){var i=e?this.next:this.current;t=t||i.vd;e={};return e=i.vidl?i.vidl.filter(function(e){return e.vd===t})[0]:e}},{key:"setInfo",value:function(e){this.current=e}},{key:"clear",value:function(){this.startPlayTime=0,this.endPlayTime=0,this.current={},this.next={}}},{key:"switch",value:function(){this.current=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.next,this.next={}}},{key:"preload",value:function(e){e.isPreload=!0,this.next=e}},{key:"getPlayTimeRanges",value:function(e){var t=e?this.next:this.current,i=0,n=t.isPreload?0:this.startPlayTime,r=t.prelude||{},a=this.engine.skip,e=a&&0<r.headTime?r.headTime:0,a=a&&0<r.tailTime?r.tailTime:1/0,r=a;return 0<n&&n+5<r&&(t.playStartFrom="history",i=n),0<e&&i<=e&&(t.playStartFrom="prelude",i=e),"number"==typeof t.share_start_time&&0<=t.share_start_time&&(i=parseInt(t.share_start_time),t.playStartFrom="share"),"number"==typeof t.share_start_time&&t.share_end_time&&t.share_end_time>=t.share_start_time&&(r=parseInt(t.share_end_time)),[[i,r=i>parseInt(t.share_end_time)?a:r]]}}]),ld),rd=(c()(ud,[{key:"stopTimer",value:function(){this._timer&&(clearInterval(this._timer),this._timer=null)}},{key:"startTimer",value:function(){var e=this;e._timer||(setTimeout(function(){return e._record()},5e3),e._timer=setInterval(function(){return e._record()},12e4))}},{key:"getCKUid",value:function(){return I.a.os.ios||I.a.os.android?A.a.getJsuid():A.a.getFluid()}},{key:"_getCurrent",value:function(i){var n=this;function t(){var e=P.a.isLogin()?"//l-rcd.iqiyi.com/apis/qiyirc/getvplay":"//nl-rcd.iqiyi.com/apis/urc/getvplay",t={};t.tvId=i,t.agent_type=1,P.a.isLogin()||(t.ckuid=n.getCKUid()),T.a.json({url:e,params:t,timeout:5e3,success:function(e){function t(e){n._core.getMovieInfo().tvid==e.tvId&&(n.logger.log("Movie History,params: isLogin = "+P.a.isLogin()+", time ="+e.videoPlayTime),n._setStartPlayTime(e.videoPlayTime))}e.data&&10<e.data.videoPlayTime?n._core.eventlog.vrsready?(t(e.data),n._core.emit(S.a.NTF_Get_Record)):n._core.once(S.a.NTF_VRSReady,function(){t(e.data),n._core.emit(S.a.NTF_Get_Record)}):n._core.emit(S.a.NTF_Get_Record),n.startTimer()},failure:function(){n._core.emit(S.a.NTF_Get_Record)}})}n._isSwitchingDefinition||(i?t():n._core.getVideoInfo(function(e){t(e.tvid)}))}},{key:"_setStartPlayTime",value:function(e){this.logger.log("play time point from record"+e),this._core.movieinfo.setStartPlayTime(e)}},{key:"_record",value:function(){var e,r=this,a=!1,o=null;0<arguments.length&&("boolean"==typeof(e=arguments[0])?(a=e)&&(o=0):"number"==typeof e&&(o=e)),null===o&&(o=parseInt(r._core.getCurrenttime(),10)||0),r._core.isInteractVideo&&!r._core.isIVMain||r._core.ivosRuning||!r._core.isRecordProgress||r._core.getVideoInfo(function(e){var t=P.a.isLogin(),i=t?"//l-rcd.iqiyi.com/apis/qiyirc/setrc.php":"//nl-rcd.iqiyi.com/apis/urc/setrc",n=I.a.browser.ipad||I.a.browser.ipod?21:11,n={tvId:e.tvid,terminalId:n,agent_type:1};t||(n.ckuid=r.getCKUid()),n.videoPlayTime=o,(0<n.videoPlayTime&&n.videoPlayTime<r._core.getDuration()&&!r._core.isAd()&&!r._core.isPatch()||a)&&(r.logger.log("record history"+n.videoPlayTime+", tvid: "+n.tvId+(a?"":", duration: "+r._core.getDuration())),T.a.json({url:i,params:n}))})}}]),ud),ad=(d(41),d(338),d(117)),od=d(423),sd=(c()(dd,[{key:"init",value:function(e){this._initIVState(e),this._initXFactor(e.globle||{}),this._initBlockList(e),this.processHistory()}},{key:"_IVPackageParseSuccess",value:function(e){this.logger.info("interaction package parse successed"),this.init(e)}},{key:"_IVPackageParseFailed",value:function(){var e=this.engine;this.logger.warn("interaction package parse failed"),e.playproxy._eventer.brokedown(fc.a.IVG,fc.a.IV0001)}},{key:"_initIVState",value:function(e){var t={};t.uniqueId=this.params.tvid,t.fileName=e.base.filename,t.version=e.base.fileVersion,t.interactionMode=e.base.interactMode,t.protocolVersion=e.base.protocolVersion,t.privateCustom=e.base.privateCustom,t.isI5Custom="IPARTMENT5_LANDSCAPE"===t.privateCustom,t.storylineType=e.base.storylineType,t.isVertical="1"==e.base.playerType,t.index=0,this._setState(t)}},{key:"_setState",value:function(e){this.engine.iv_state=Object.assign(this.engine.iv_state,e)}},{key:"_initBlockList",value:function(e){this.playBlockList=e.playBlockList||[],this.interactBlockList=e.interactBlockList||[]}},{key:"_getBlockByTvid",value:function(t){return this.playBlockList.find(function(e){return e.filename==t})}},{key:"_getInteractBlockIdByTvid",value:function(t){var e=this.playBlockList,i=this.interactBlockList,n=e.find(function(e){return e.filename==t}).blockid;return i.find(function(e){return e.inPlayBlockid==n}).blockid}},{key:"request",value:function(){var n=this,r=n.engine.iv_state;return new Promise(function(t,i){var e={uniqueId:n.params.tvid,qyid:A.a.getFluid()||A.a.getJsuid(),app_v:ad.a,platform_id:1079,app_Im:O.a.isTWLocale()?"tw":"cn",lang:O.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",version:r.version};T.a.json({url:q.IVHistory,timeout:3e3,params:e,success:function(e){e&&"A00000"===e.code?(n.logger.info("interaction record, last points request successed"),t(e)):i(e)},failure:function(){i()}})})}},{key:"_initXFactor",value:function(e){this.engine.XFactorManager?this.engine.XFactorManager.reset(e||{}):this.engine.XFactorManager=new od.a(e||{})}},{key:"processHistory",value:function(){function e(){r.engine.isIVMain=!0,o.storyLine="0";var e=r.params.tvid,t=r._getBlockByTvid(e);r.engine.iv_state.isI5Custom&&(r.engine.iv_state.others=t?t.others:{}),r.sendAction({status:0}),r.engine.load(r.params),r.engine.emit(S.a.NTF_Get_Record),a.IVRecorder.sendAction({status:6,currentTime:0,blockId:t.blockid,playBlockId:t.blockid,tvId:e,albumId:e,switch_type:1,switch_time:0})}var r=this,a=r.engine,o=a.iv_state;r.params.resetHistory?e():r.request().then(function(e){var t,i,n;t=e,(n={}).index=parseInt(t.index||0,10),n.storyLine=t.storyLine||1,n.isFromHistory=!0,t.pathData&&0!==t.pathData.tvId?(e=(i=t.pathData).tvId,t=i.currentTime,i=i.globleValues,r.params.tvid=e,r.params.startPlayTime=t,a.isIVMain=o.uniqueId===e,a.isIVMain?a.adPlaySource=0:a.adPlaySource=61,r._initXFactor(i)):r.engine.isIVMain=!0,r.engine.iv_state.isI5Custom&&(i=r._getBlockByTvid(r.params.tvid),r.engine.iv_state.others=i?i.others:{}),r.logger.info("interaction record ok, start load"),r._setState(n),a.load(r.params),a.emit(S.a.NTF_Get_Record)},e)}},{key:"sendAction",value:function(e){var t=this.engine.iv_state;if(e.tvId){var i=this._getBlockByTvid(e.tvId);if(i.others&&"1"==i.others.IPARTMENT5_ABANDONHISTORY)return}t={qyid:A.a.getFluid()||A.a.getJsuid(),app_v:ad.a||"",platform_id:1079,app_Im:O.a.isTWLocale()?"tw":"cn",lang:O.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:t.uniqueId,fileName:t.fileName,version:t.version,protocolVersion:t.protocolVersion,interactionMode:t.interactionMode};Object(M.a)(t,e,!0),this.logger.info("interaction upload to service"),T.a.json({url:q.IVSevice,params:t,success:function(){},failure:function(){}})}},{key:"getStoryLine",value:function(){var n=this,r=n.engine.iv_state;return n.logger.info("interaction request storyline"),new Promise(function(t,i){var e={qyid:A.a.getFluid()||A.a.getJsuid(),app_v:ad.a,platform_id:1079,app_Im:O.a.isTWLocale()?"tw":"cn",lang:O.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:r.uniqueId,fileName:r.fileName,version:r.version,protocolVersion:r.protocolVersion,language:""};T.a.json({url:q.IVStoryLine,timeout:3e3,params:e,success:function(e){e&&"A00000"===e.code?(n.logger.info("interaction request storyline successed"),t(e)):(n.logger.info("interaction request storyline code error"),i(e))},failure:function(){n.logger.info("interaction request storyline failed"),i()}})})}},{key:"backToStoryLine",value:function(){var i=this,n=i.engine;i.getStoryLine().then(function(e){var t;e&&e.graph&&((t=e.graph.nodes).pop(),(e=t.slice().reverse().find(function(e){return 1!==e.mark}))&&("VIDEO"===((t={innerIV:!0}).tvid=e.tvid,t.blockid=e.id,t.playBlockId=e.playBlockId,t.startPlayTime=e.currentTime,e.type)?t.switchType=5:t.switchType=2,i.sendAction({status:0,blockId:t.blockid,tvId:t.tvid,switch_type:t.switchType}),n.switchVideo(t)))},function(){})}},{key:"updateParams",value:function(e){this.params=e}}]),dd),cd=null;function dd(e,t){f()(this,dd),this.logger=new E.a("IVRecorder[".concat(e.id,"]")),this.engine=e,this.params=t,this.engine.on(S.a.NTF_IVPACKAGEPARSE_Finished,this._IVPackageParseSuccess.bind(this)),this.engine.on(S.a.NTF_IVPACKAGEPARSE_Failed,this._IVPackageParseFailed.bind(this))}function ud(i){f()(this,ud);function e(){t||(t=!0,r._record())}var n,r=this,t=!1;r.logger=new E.a("recorder".concat(i.id)),r._core=i,r._isSwitchingDefinition=!1,i.on(S.a.NTF_StatusChanged,function(e){e=e.state;if(e===S.a.Status_Playing&&r.startTimer(),e===S.a.Status_Paused||e===S.a.Status_Waiting||e===S.a.Status_Stoped){if(e===S.a.Status_Waiting){if(i.isSeeking())return;if(i.getCurrenttime()<=1)return}Math.abs(i.getDuration()-i.getCurrenttime())<=1&&e!==S.a.Status_Stoped||(n&&clearTimeout(n),r.stopTimer(),r._record(e===S.a.Status_Stoped))}}),i.on(S.a.NTF_Seeked,function(e){var t=parseInt(e.current,10)||0;n&&clearTimeout(n),n=setTimeout(function(){n=null,i.isAd()||r._record(t)},1e3)}),i.on(S.a.NTF_DefinitionSwitching,function(){r._isSwitchingDefinition=!0}),i.on(S.a.NTF_DefinitionSwitched,function(){r._isSwitchingDefinition=!1}).on(S.a.NTF_VideoChanged,function(){r._isSwitchingDefinition=!1}),i.once(S.a.NTF_VRSStart,function(e){i.isInteractVideo||r._getCurrent(e.data.tvid)}),window.addEventListener("unload",e),window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e)}function ld(e){f()(this,ld),this.startPlayTime=0,this.endPlayTime=0,this.goodsPoints=[],this.current={},this.next={},this.engine=e,this.aresnoticedata={},this.logger=new E.a("MovieInfo[".concat(e.id,"]"))}function hd(e){f()(this,hd),this.engine=e,this.logger=new E.a("AdProxy[".concat(e.id,"]")),this.adInfo={},this.seekableMidAd={},this.delayBriefAds={},this.firstAdData=!0}function fd(){return pd.apply(this,arguments)}function pd(){return(pd=Q()($.a.mark(function e(){var r;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.e(4).then(d.t.bind(null,661,7));case 2:return(r=e.sent.default).enc.u8array={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=new Uint8Array(i),r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;n[r]=a}return n},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e[n])<<24-n%4*8;return r.lib.WordArray.create(i,t)}},e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _d(){return(_d=Q()($.a.mark(function e(i,n){var t;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(cd){e.next=4;break}return e.next=3,fd();case 3:cd=e.sent;case 4:return t=function(){var e=cd.enc.Utf8.parse(n),t=cd.enc.u8array.parse(i);return cd.DES.decrypt(t.toString(cd.enc.Base64),e,{mode:cd.mode.ECB,padding:cd.pad.Pkcs7}).toString(cd.enc.Utf8)},e.abrupt("return",t());case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gd(){return(gd=Q()($.a.mark(function e(t,i){var n;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(cd){e.next=4;break}return e.next=3,fd();case 3:cd=e.sent;case 4:return n=function(){var e=cd.enc.Utf8.parse(i);return cd.DES.encrypt(t,e,{mode:cd.mode.ECB,padding:cd.pad.Pkcs7}).toString()},e.abrupt("return",n());case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var yd,vd,md={decryptByDES:function(e,t){return _d.apply(this,arguments)},encryptByDES:function(e,t){return gd.apply(this,arguments)}},bd="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==bd&&bd,kd="URLSearchParams"in bd,xd="Symbol"in bd&&"iterator"in Symbol,Sd="FileReader"in bd&&"Blob"in bd&&function(){try{return new Blob,!0}catch(e){return!1}}(),Td="FormData"in bd,Pd="ArrayBuffer"in bd;function Id(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function wd(e){return e="string"!=typeof e?String(e):e}function Ad(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return xd&&(e[Symbol.iterator]=function(){return e}),e}function Ed(t){this.map={},t instanceof Ed?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function Dd(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function qd(i){return new Promise(function(e,t){i.onload=function(){e(i.result)},i.onerror=function(){t(i.error)}})}function Od(e){var t=new FileReader,i=qd(t);return t.readAsArrayBuffer(e),i}function Rd(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Ld(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:Sd&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Td&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:kd&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Pd&&Sd&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Rd(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Pd&&(ArrayBuffer.prototype.isPrototypeOf(e)||vd(e))?this._bodyArrayBuffer=Rd(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="";var t=this.headers.get("content-type");t?0<=t.indexOf("json")&&"string"!=typeof this._bodyInit&&(this._bodyInit=this._bodyText):"string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):kd&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")},Sd&&(this.blob=function(){var e=Dd(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Dd(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(Od)}),this.text=function(){var e,t,i=Dd(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,i=qd(t=new FileReader),t.readAsText(e),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=new Array(t.length),n=0;n<t.length;n++)i[n]=String.fromCharCode(t[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Td&&(this.formData=function(){return this.text().then(Nd)}),this.json=function(){return this.text().then(JSON.parse)},this}Pd&&(yd=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],vd=ArrayBuffer.isView||function(e){return e&&-1<yd.indexOf(Object.prototype.toString.call(e))}),Ed.prototype.append=function(e,t){e=Id(e),t=wd(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},Ed.prototype.delete=function(e){delete this.map[Id(e)]},Ed.prototype.get=function(e){return e=Id(e),this.has(e)?this.map[e]:null},Ed.prototype.has=function(e){return this.map.hasOwnProperty(Id(e))},Ed.prototype.set=function(e,t){this.map[Id(e)]=wd(t)},Ed.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},Ed.prototype.keys=function(){var i=[];return this.forEach(function(e,t){i.push(t)}),Ad(i)},Ed.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),Ad(t)},Ed.prototype.entries=function(){var i=[];return this.forEach(function(e,t){i.push([t,e])}),Ad(i)},xd&&(Ed.prototype[Symbol.iterator]=Ed.prototype.entries);var Md=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Cd(e,t){if(!(this instanceof Cd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n=(t=t||{}).body;if(e instanceof Cd){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Ed(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Ed(t.headers)),this.method=(e=(i=t.method||this.method||"GET").toUpperCase(),-1<Md.indexOf(e)?e:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((t=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(t,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function Nd(e){var i=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(e),decodeURIComponent(t)))}),i}function Bd(e,t){if(!(this instanceof Bd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Ed(t.headers),this.url=t.url||"",this._initBody(e)}Cd.prototype.clone=function(){return new Cd(this,{body:this._bodyInit})},Ld.call(Cd.prototype),Ld.call(Bd.prototype),Bd.prototype.clone=function(){return new Bd(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Ed(this.headers),url:this.url})},Bd.error=function(){var e=new Bd(null,{status:0,statusText:""});return e.type="error",e};var Fd=[301,302,303,307,308];Bd.redirect=function(e,t){if(-1===Fd.indexOf(t))throw new RangeError("Invalid status code");return new Bd(null,{status:t,headers:{location:e}})};var Ud=bd.DOMException;try{new Ud}catch(e){(Ud=function(e,t){this.message=e,this.name=t;e=Error(e);this.stack=e.stack}).prototype=Object.create(Error.prototype),Ud.prototype.constructor=Ud}function jd(n,o){return new Promise(function(r,e){var t=new Cd(n,o);if(t.signal&&t.signal.aborted)return e(new Ud("Aborted","AbortError"));var a=new XMLHttpRequest;function i(){a.abort()}a.onload=function(){var e,i,t={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",i=new Ed,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var t=e.split(":"),e=t.shift().trim();e&&(t=t.join(":").trim(),i.append(e,t))}),i)};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;setTimeout(function(){r(new Bd(n,t))},0)},a.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){e(new Ud("Aborted","AbortError"))},0)},a.open(t.method,function(t){try{return""===t&&bd.location.href?bd.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?a.withCredentials=!0:"omit"===t.credentials&&(a.withCredentials=!1),"responseType"in a&&(Sd?a.responseType="blob":Pd&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!o||"object"!=typeof o.headers||o.headers instanceof Ed?t.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(o.headers).forEach(function(e){a.setRequestHeader(e,wd(o.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",i),a.onreadystatechange=function(){4===a.readyState&&t.signal.removeEventListener("abort",i)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})}jd.polyfill=!0,bd.fetch||(bd.fetch=jd,bd.Headers=Ed,bd.Request=Cd,bd.Response=Bd);function Vd(e){f()(this,Vd);var t=+new Date;this.psdklstm=e.pgct||t,this.psdkletm=t,this.psdkistm=t,this.psdkietm=t,this.vcistm=0,this.vcietm=0,this.ffstm=0,this.ffetm=0,this.vclstm=0,this.vcletm=0,this.asdklstm=t,this.asdkletm=t,this.asdkistm=0,this.asdkietm=0,this.adirqstm=0,this.adirqetm=0,this.adsrqstm=0,this.adsrqetm=0,this.adlstm=0,this.adletm=0,this.adastm=t,this.adaetm=0,this.plyastm=t,this.plyaetm=0,this.adUsedTime=0,this.plyUsedTime=0}function Wd(){return performance.now()}var Hd,zd=(c()(eu,[{key:"getIndexFile",value:function(){return this.indexFileObject||{}}},{key:"init",value:function(t){var i=this;i.params=t,i._getZipScriptURL(t).then(function(e){e?i._parseZip(e):i._retry(t)})}},{key:"_parseZip",value:function(n){var r=this;r.logger.info("interaction zipUrl ".concat(n)),d.e(5).then(d.t.bind(null,660,7)).then(function(e){function t(e){e&&(e.file(/^(?!__MACOSX).*index.*json$/)[0].async("uint8array").then(r._parseIndexFile.bind(r)),r.paraFileList=e.file(/^((?!__MACOSX).*Para.json)*$/))}var i=e.default;r._downloadZIP(n).then(i.loadAsync,function(){r._downloadZIP(n).then(i.loadAsync,function(){r.engine.isInteractVideo=!1,r.engine.load(r.params)}).then(t)}).then(t)})}},{key:"_retry",value:function(t){var i=this;i._getZipScriptURL(t).then(function(e){e?i._parseZip(e):(i.engine.isInteractVideo=!1,i.engine.load(t))})}},{key:"_parseIndexFile",value:function(e){var t=this;t.__parseFile(e).then(function(e){t.logger.info("interaction parseFile ok"),t.indexFileObject=e,t.indexFileObject&&t.indexFileObject.globle&&t.indexFileObject.globle.varList&&(t.globleVarList=t.indexFileObject.globle.varList),t.indexFileObject&&t.engine.emit(S.a.NTF_IVPACKAGEPARSE_Finished,t.indexFileObject)})}},{key:"__parseFile",value:function(e){var i=this.engine;return new Promise(function(t){try{md.decryptByDES(e,"$X&#ADvF").then(function(e){t(JSON.parse(e))})}catch(e){i.emit(S.a.NTF_IVPACKAGEPARSE_Failed,e)}})}},{key:"parseParaFile",value:function(i){var e=this;return e.logger.info("interaction parse ParaFile"),new Promise(function(t){e.paraFileList.find(function(e){return 0<e.name.indexOf(i)}).async("uint8array").then(e.__parseFile.bind(e)).then(function(e){t(e)})})}},{key:"_getZipScriptURL",value:function(e){var i=this,n={uniqueId:e.tvid,protocolVersion:"1.5",app_v:ad.a,platform_id:1079,lang:O.a.isTWLocale()?"zh_TW":"zh_CN",src:"pcw",qyid:A.a.getFluid()||A.a.getJsuid()};return i.logger.info("interaction getzipUrl ".concat(q.IVZip)),new Promise(function(t){T.a.json({url:q.IVZip,timeout:3e3,withCredentials:!0,params:n,success:function(e){e&&"A00000"===e.code?e.interactInfo&&e.interactInfo.operationVideoInfo&&e.interactInfo.operationVideoInfo.scriptUrl?(e=e.interactInfo.operationVideoInfo.scriptUrl,i.logger.info("interaction getzipUrl  ok ".concat(e)),t(e.replace("http:",window.location.protocol))):(i.logger.info("interaction getzipUrl fail, data error"),t(null)):(i.logger.info("interaction getzipUrl  fail, code error"),t(null))},failure:function(){i.logger.info("interaction getzipUrl  fail, code error"),t(null)}})})}},{key:"_downloadZIP",value:function(e){return fetch(e).then(function(e){return e.arrayBuffer()})}},{key:"reset",value:function(){this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null}}]),eu),Yd={1:"303",2:"302",6:"304",11:"405",12:"401",13:"401",21:"302"},Gd=(c()(Jd,[{key:"sendADStartPlayPingback",value:function(){this.__endpingback=void 0,this._send({t:15,pt:""},!0)}},{key:"sendStartPlayPingback",value:function(){this.__endpingback=void 0,this._send({t:1}),-1===this._timer&&this.sendTimingPingback()}},{key:"sendTimingPingback",value:function(){this._timer=0;var n=this,r=0;clearTimeout(this._timer);var a=!0;!function e(){var t,i;n._core.hasStatus(S.a.Status_Playing)&&((r+=1e3)%15e3==0&&a?(a=!1,n._send({t:2,tm:15})):r%3e4==0&&n._send({t:2,tm:30})),r%6e4==0&&n._core.getCurrStatus()===S.a.Status_Playing&&(t=P.a.isLogin()?"QP008":"QP007",i=""===(i=L.a.get(t))?0:parseInt(i,10),L.a.set(t,i+=60,{expires:31536e6,path:"/",domain:"iqiyi.com"})),clearTimeout(n._timer),n._timer=setTimeout(e,1e3)}()}},{key:"sendEndPlayPingback",value:function(e,t){if(void 0===this.__endpingback){this.__endpingback=!0;var i,n=this._core.getMovieInfo(),r=this._core.playproxy._playingSpend||0,a=this._core.params,o=51===(n.vd||"")?59:n.vd||"";switch(t=t||n.tvid,e){case 1:i=4;break;case 2:i=6;break;case 3:i=7;break;case 4:i=11;break;case 5:i=9;break;default:i=0}r={t:13,tm:r,endtp:i};this._lastFireData.t?Object(M.a)(r,this._lastFireData):(Object(M.a)(r,{r:t,ra:o,vfrmtp:!0===a.autoplay?1:0}),a.vvauto&&(r.vvauto=!0===a.autoplay?4:2),Object(M.a)(r,this._outerParams,!0),a.vvauto||delete r.vvauto,Object(M.a)(r,this._outerParams,!0),a.vvauto||delete r.vvauto),this._send(r,!0)}}},{key:"sendWaitingPingback",value:function(e){var t=this._core.getCDNInfo().host;e?(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"ad",stu_sc:1,isquit:0,cdnadr:t})),this.sendErrorPlayPingback("","4016"),this.sendErrorPlayPingback("","KIWI-4016")):(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"video",stu_sc:1,isquit:0,cdnadr:t})),this.sendErrorPlayPingback("","4015"),this.sendErrorPlayPingback("","KIWI-4015"))}},{key:"sendAutoUpToVDPingback",value:function(e,t){this._send({t:12,fa:5,ra:t,upto:e},!0)}},{key:"sendAutoDwnToVDPingback",value:function(e,t){this._send({t:12,fa:4,ra:t,dwnto:e},!0)}},{key:"sendPlayingPingback",value:function(){this._sentWaitingBeacon&&(this._sentWaitingBeacon=!1)}},{key:"sendErrorPlayPingback",value:function(e,t,i){this._send({t:0,ec:t||Yd[e],psrc:i||""})}},{key:"_send",value:function(n,r){var a=this,o=this._core,s=o.logger,c=o.pingbackQOS,d=a._getParams(n);Bc.getPingbackDfp(n).then(function(i){o.getVideoInfo(function(t){P.a.isVip(function(e){Object(M.a)(d,{rn:Math.random(),dfp:i,stime:(new Date).getTime(),r:t.tvid||"",hu:e?1:-1}),Object(M.a)(d,n,r),a._lastFireData=d;e=q.pingbackV6Url;0==n.t&&(e=q.pingbackQosUrl),T.a.beacon(d,e),o.params.sourcePage&&(1==n.t?(s.info("send pingback, t=1, vvauto=".concat(d.vvauto,",  pms=").concat(JSON.stringify(d))),a.__pingbackList.start++,a.__pingbackList.vvauto=d.vvauto):13==n.t&&(s.info("send pingback, t=13, vvauto=".concat(d.vvauto,",  pms=").concat(JSON.stringify(d))),(0==a.__pingbackList.start||4==a.__pingbackList.vvauto&&4!==d.vvauto)&&(s.info("send pingback, t=1|13, checkerror"),c.sendLogToCompass("pingback")),a.__pingbackList={start:0,vvauto:void 0}))})})})}},{key:"_getParams",value:function(e){var t=this,i=this._core,n=i.getMovieInfo(),r=i.getCurrLoaderMode(),a=-1,o=51===(n.vd||"")?59:n.vd||"";switch(r){case"CDN":a=0;break;case"P2P":a=1}var s={u:A.a.getFluid()||"",pu:P.a.getUid()||"",p1:Bc.p_code,v:i.playerVersion,ce:A.a.getWeid(),de:A.a.getQtsid()||"",c1:n.cid||"",ve:A.a.getEid(),ht:n.isVIP?1:0,pt:i.getCurrenttime(),isdm:0,duby:0,ra:o,clt:"",ps2:L.a.get("QC007")||"",ps3:i.params.ps3||"",ps4:"",br:I.a.browser.userAgent,mod:O.a.local()||"",purl:window.location.href,tmplt:i.getPageTmpltType(),ptid:I.a.getPtid(O.a.isTWLocale()),os:Bc.os,nu:A.a.getIsNewUser()?1:0,vfm:L.a.get("QP005")||"",coop:"",ispre:i.isTryWatch()?1:0,videotp:void 0!==n.is3D?n.is3D:"",drm:Bc.getDrmType(n),plyrv:"",rfr:window.document.referrer,fatherid:n.albumId||"",stauto:i.autoVdUsing?1:0,algot:i.autoVdAlgot,vvfrom:t._vvfrom||"",vfrmtp:!0===i.params.autoplay?1:0,pagev:i.params.pagev||"",engt:2,ldt:a,krv:i.kernelVersion||"0.0.0",wtmk:n.watermark||0,duration:1e3*i.getDuration(),bkt:t._outerParams.bkt||i.params.bkt,e:t._outerParams.e||i.params.e,stype:t._outerParams.stype||i.params.stype,r_area:t._outerParams.r_area||i.params.r_area,r_source:t._outerParams.r_source||i.params.r_source};i.picInPic?s.s4="80720_playerctrl_picinpic":s.s4=i.params.vfrmrst||"",i.params.abtest&&(s.abtest=i.params.abtest),i.params.vvauto&&(s.vvauto=!0===i.params.autoplay?4:2,t._outerParams&&t._outerParams.vvauto&&(s.vvauto=t._outerParams.vvauto)),e&&e.t&&(Object(M.a)(s,{s3:i.params.vfrmblk||""}),2==e.t&&Object(M.a)(s,{vbr:t.getVBR()}),!i.ivosRuning||1!=e.t&&2!=e.t&&13!=e.t&&15!=e.t&&8!=e.t||(s.aid=n.albumId,s.r=n.tvid,s.biz=i.currentBlockid,s.s3="006191_ivos_videoshow"));var c,d=i.getCurrManifestType();if(null!==d&&Object(M.a)(s,{mft:d}),null!==d){switch(d){case 0:c=2;break;case 1:c=7;break;case 2:c=0;break;case 3:c=5;break;case 5:c=110;break;case 6:c=101}Object(M.a)(s,{ra1:c})}r=i.params.vfrm||"",o=i.isFullScreen?(r="901111_pcwh5_browerfull",4):i.isWebFullScreen?(r="901111_pcwh5_pagefull",7):i.isSmallWindowMode||i.picInPic?2:3;Object(M.a)(s,{wint:o,s2:r});var e=0,u=0,n=-1;if(navigator.connection){d=navigator.connection.downlink,o=(navigator.connection.effectiveType||"").toLowerCase(),r=(navigator.connection.type||"").toLowerCase();switch(o){case"4g":u=18;break;case"3g":u=17;break;case"2g":u=16;break;case"slow-2g":u=14}switch(r){case"cellular":u=15;break;case"wifi":u=1;break;case"ethernet":u=13;break;case"bluetooth":u=21;break;case"wimax":u=22}r=i.getDataBufferInfo();r&&(n=r.len),e=d,Object(M.a)(s,{bw:e,ntwk:u,dl:n})}return"{}"==JSON.stringify(t._outerParams)||i.ivosRuning||Object(M.a)(s,t._outerParams,!0),i.isInteractVideo&&"0"==i.interactionMode&&!i.isIVMain&&(s.iamvid=i.iv_state&&i.iv_state.uniqueId||""),s}},{key:"getVBR",value:function(){var e=this._core,t=e.getDuration(),i=0;return e.movieinfo&&0!==t&&!e.isAd()&&(e=e.movieinfo.getVDInfo().vsize,i=parseInt(e/t)),i}},{key:"setPlayPingbackInfo",value:function(e){var t={},i=this._core;e.vfrm&&(t.s2=e.vfrm),e.vfrmblk&&(t.s3=e.vfrmblk),e.vfrmrst&&(t.s4=e.vfrmrst),e.vfrmtp&&(t.vfrmtp=e.vfrmtp),i.params.vvauto&&(t.vvauto=e.vvauto),delete e.vvauto,delete e.vfrm,delete e.vfrmblk,delete e.vfrmrst,delete e.vfrmtp,t=Object(M.a)(t,e,!0),this._outerParams=Object(M.a)(this._outerParams,t,!0)}},{key:"destory",value:function(){clearTimeout(this._timer),this._timer=-1}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}}]),Jd),Qd="",Kd=(c()(Xd,[{key:"sendVrsRequestPingback",value:function(){this._send({t:"init"})}},{key:"sendVrsReadyPingback",value:function(){this._send({t:"ready"})}},{key:"sendFinishPresPingback",value:function(){this._send({t:11})}},{key:"sendPlayTimeRecord",value:function(){var e=this._core.sptr,t=e.plyastm;7e3<e.plyUsedTime||this._send({t:10,psdklstm:0,psdkletm:e.psdkletm-e.psdklstm,psdkistm:e.psdkistm-t,psdkietm:e.psdkietm-t,vcistm:e.vcistm-t,vcietm:e.vcietm-t,asdklstm:e.asdklstm-t,asdkletm:e.asdkletm-t,asdkistm:e.asdkistm-t,asdkietm:e.asdkietm-t,adirqstm:e.adirqstm-t,adirqetm:e.adirqetm-t,adsrqstm:e.adsrqstm-t,adsrqetm:e.adsrqetm-t,adlstm:e.adlstm-t,adletm:e.adletm-t,adastm:e.adastm-t,adaetm:e.adaetm-t,plyastm:e.plyastm-t,plyaetm:e.plyaetm-t,ffstm:e.ffstm-t,ffetm:e.ffetm-t,vclstm:e.vclstm-t,vcletm:e.vcletm-t})}},{key:"sendSeekBenchmark",value:function(){var e=this._core,t=e.sbtr;0===t.diy_apc||null===t.diy_apstm||t.diy_muxtm>=t.diy_setm||this._send({t:9,ct:"pcwseektc",diy_ismob:W.a.query("__pmobius__")?1:0,diy_manifesttp:e.getCurrManifestType(),diy_sstm:t.diy_sstm,diy_setm:t.diy_setm,diy_vsitm:t.diy_vsitm,diy_vsdtm:t.diy_vsdtm,diy_vptm:t.diy_vptm,diy_lstm:t.diy_lstm,diy_frdtm:t.diy_frdtm,diy_rdc:t.diy_rdc,diy_rdtm:t.diy_rdtm||0,diy_muxc:t.diy_muxc||0,diy_muxstm:t.diy_muxstm||0,diy_muxtm:t.diy_muxtm||0,diy_apc:t.diy_apc,diy_apstm:t.diy_apstm,diy_aptm:t.diy_aptm||0,diy_fdlc:t.diy_fdlc,diy_fdlt:t.diy_fdlt})}},{key:"sendQOSReport",value:function(e){var t={t:11};switch(Object(M.a)(t,e.para),e.type){case"chunkCheck":t.ct="vcut";break;case"DNSParser":t.ct="dlscherr";break;case"BWReport":t.ct="dlbw"}this._send(t)}},{key:"sendStuckdetl",value:function(e,t,i){t=+new Date-t;this._send({t:11,ct:"stuckdetl",jampt:i?"ad":"video",isquit:e,replayt:t})}},{key:"_send",value:function(e){var t=this._core,i=t.getMovieInfo(),n=51===(i.vd||"")?59:i.vd||"",r={u:A.a.getFluid()||"",pu:P.a.getUid()||"",p1:Bc.p_code,v:Qd,ce:A.a.getWeid(),c1:i.cid||"",r:i.tvid||"",ve:A.a.getEid(),de:A.a.getQtsid()||"",ht:i.isVIP?1:0,pt:t.getCurrenttime(),isdm:0,ra:n,mod:O.a.local()||"",purl:window.location.href,tmplt:t.getPageTmpltType(),ptid:I.a.getPtid(O.a.isTWLocale()),os:Bc.os,re:window.screen.width+"x"+window.screen.height,nu:A.a.getIsNewUser()?1:0,vfm:L.a.get("QP005")||"",ispre:t.isTryWatch()?1:0,videotp:void 0!==i.is3D?i.is3D:"",drm:Bc.getDrmType(i),plyrv:"",rfr:window.document.referrer,fatherid:i.albumId||"",stauto:t.autoVdUsing?1:0,vvfrom:this._vvfrom||"",wtmk:i.watermark||0,algot:t.autoVdAlgot,br:I.a.browser.userAgent,krv:t.kernelVersion||"0.0.0",duby:0},a=t.getCurrManifestType();null!==a&&Object(M.a)(r,{mft:a});var o=-1;switch(t.getCurrLoaderMode()){case"CDN":o=0;break;case"P2P":o=1}var s,c,d=0,u=-1;if(navigator.connection){n=navigator.connection.downlink,i=(navigator.connection.effectiveType||"").toLowerCase(),a=(navigator.connection.type||"").toLowerCase();switch(i){case"4g":d=18;break;case"3g":d=17;break;case"2g":d=16;break;case"slow-2g":d=14}switch(a){case"cellular":d=15;break;case"wifi":d=1;break;case"ethernet":d=13;break;case"bluetooth":d=21;break;case"wimax":d=22}t=t.getDataBufferInfo();t&&(u=t.len),c=n,Object(M.a)(r,{bw:c,ntwk:d,dl:u,ldt:o})}Object(M.a)(e,r),Bc.getPingbackDfp(s=e).then(function(t){P.a.isVip(function(e){e={rn:Math.random(),dfp:t,stime:(new Date).getTime(),hu:e?1:-1};Object(M.a)(e,s),T.a.beacon(e,q.pingbackQosUrl)})})}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}},{key:"sendLogToCompass",value:(Hd=Q()($.a.mark(function e(t){var i,n,r,a,o,s,c;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([d.e(7),d.e(0)]).then(d.bind(null,662));case 2:o=e.sent.default,i=this._core,s=E.a.getLog(),n=o.gzip(s),r=new XMLHttpRequest,c=i.getManifestTypes(),a=i.getCurrManifestType(),o="OTHER"+a,s=(t||"").replace(/-/gi,"_"),e.t0=a,e.next=e.t0===c.HLS?14:e.t0===c.F4V||e.t0===c.FLV?16:e.t0===c.DASH_VP9?18:e.t0===c.DASH_AV1?20:e.t0===c.JDASH?22:24;break;case 14:return o="HLS",e.abrupt("break",24);case 16:return o="F4V",e.abrupt("break",24);case 18:return o="VP9",e.abrupt("break",24);case 20:return o="AV1",e.abrupt("break",24);case 22:return o="JDASH",e.abrupt("break",24);case 24:(c=[]).push(Bc.browserName()),c.push(O.a.isTWLocale()?"TW":"CN"),c.push(o),c.push(s),c.push(H.a.getEventId(i.getMovieInfo().tvid)),r.open("POST","//qosp.iqiyi.com/crashlog?source=pcwplayer"),r.setRequestHeader("Content-Encoding","gzip"),r.setRequestHeader("Content-Type","application/octet-stream"),r.setRequestHeader("File-Name",c.join("_")),r.send(n);case 35:case"end":return e.stop()}},e,this)})),function(e){return Hd.apply(this,arguments)})}]),Xd),$d=(c()(Zd,[{key:"cost",get:function(){return this.diy_setm||0}},{key:"_initData",value:function(){this.loaderStat={count:0,timeCost:0,lastPumpTime:null},this.muxStat={count:0,timeCost:0,lastSpitTime:null,lastPushTime:null},this.mediaStat={count:0,timeCost:0,lastAppendTime:null},this.authStat={count:0,timeCost:0,lastTime:null},this.diy_sstm=0,this.diy_setm=null,this.diy_vsitm=null,this.diy_vsdtm=null,this.diy_vptm=null,this.diy_lstm=null,this.diy_frdtm=null,this.diy_rdc=null,this.diy_rdtm=null,this.diy_muxc=null,this.diy_muxstm=null,this.diy_muxtm=null,this.diy_apc=null,this.diy_apstm=null,this.diy_aptm=null,this.diy_fdlc=0,this.diy_fdlt=0}},{key:"_update",value:function(e,t){1===this.status&&Object.prototype.hasOwnProperty.call(this,e)&&null!==this.benchmark&&(this[e]=null==t?Math.round(Wd()-this.benchmark):t)}},{key:"start",value:function(){this.status=1,this.benchmark=Wd(),this._initData()}},{key:"end",value:function(){this._update("diy_setm"),this.status=2}},{key:"isSeekingStatus",value:function(){return 1===this.status}},{key:"mediaSeeking",value:function(){this._update("diy_vsitm")}},{key:"mediaSeeked",value:function(){this._update("diy_vsdtm")}},{key:"mediaPlaying",value:function(){null==this.diy_vsdtm&&this._update("diy_vsdtm"),this._update("diy_vptm")}},{key:"seekLoader",value:function(){this._update("diy_lstm")}},{key:"pumpLoader",value:function(e){var t=this.loaderStat;e?(null===this.diy_frdtm&&this._update("diy_frdtm"),t.lastPumpTime&&(t.timeCost+=Math.round(Wd()-t.lastPumpTime)),t.lastPumpTime=null):t.lastPumpTime||(t.lastPumpTime=Wd()),t.count++,0<t.count&&this._update("diy_rdc",t.count),0<t.timeCost&&this._update("diy_rdtm",t.timeCost)}},{key:"muxSwallow",value:function(){var e=this.muxStat;e.count++,e.lastPushTime=Wd(),e.lastSpitTime=null}},{key:"muxspit",value:function(){var e=this.muxStat,t=Wd();null===e.lastSpitTime?e.timeCost+=Math.round(t-e.lastPushTime):e.timeCost+=Math.round(t-e.lastSpitTime),null===this.diy_muxstm&&this._update("diy_muxstm"),0<e.count&&this._update("diy_muxc",e.count),0<e.timeCost&&this._update("diy_muxtm",e.timeCost),e.lastSpitTime=t}},{key:"sbAppending",value:function(){this.mediaStat.lastAppendTime=Wd()}},{key:"sbAppended",value:function(){var e=this.mediaStat;e.count++,null!==e.lastAppendTime&&(e.timeCost+=Math.round(Wd()-e.lastAppendTime)),null===this.diy_apstm&&this._update("diy_apstm"),0<e.count&&this._update("diy_apc",e.count),0<e.timeCost&&this._update("diy_aptm",e.timeCost)}},{key:"authkeyInvoking",value:function(){this.authStat.lastTime=Wd()}},{key:"authkeyInvoked",value:function(){var e=this.authStat;null!==e.lastTime&&(e.count++,e.timeCost+=Math.round(Wd()-e.lastTime),this._update("diy_fdlc",e.count),this._update("diy_fdlt",e.timeCost))}}]),Zd);function Zd(){f()(this,Zd),this.status=0,this.benchmark=null,this._initData()}function Xd(e){f()(this,Xd),this._core=e,Qd=e.playerVersion,this._vvfrom=e.params.vvfrom}function Jd(e){f()(this,Jd),this._timer=0,this._core=e,this._sentWaitingBeacon=!1,this._lastFireData={},this._isfan="",this._outerParams={},this._vvfrom=e.params.vvfrom,this.__endpingback=void 0,this.__pingbackList={start:0,vvauto:void 0}}function eu(e,t){f()(this,eu),this.logger=new E.a("IVPackageManager[".concat(e.id,"]")),this.engine=e,this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null,this.init(t)}function tu(e){return parseInt(e,10)}var iu=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this)).logger=new E.a("EpisodeManager[".concat(e,"]")),t.EpisodeStore={},t}return c()(a,[{key:"_ensureDataStructure",value:function(e){var t=this.EpisodeStore[e]||{};_c.a.isObject(t.pres)?(t.pres.finish=!!t.pres.finish,t.pres.queue=_c.a.isArray(t.pres.queue)?t.pres.queue:[]):t.pres={finish:!1,queue:[]},_c.a.isObject(t.mids)?(t.mids.finish=!!t.mids.finish,t.mids.queue=_c.a.isArray(t.mids.queue)?t.mids.queue:[]):t.mids={finish:!1,queue:[]},_c.a.isObject(t.briefs)?(t.briefs.finish=!!t.briefs.finish,t.briefs.queue=_c.a.isArray(t.briefs.queue)?t.briefs.queue:[]):t.briefs={finish:!1,queue:[]},_c.a.isObject(t.features)?(t.features.finish=!!t.features.finish,t.features.queue=_c.a.isArray(t.features.queue)?t.features.queue:[]):t.features={finish:!1,queue:[]},this.EpisodeStore[e]=t}},{key:"clear",value:function(e){e=tu(e),delete this.EpisodeStore[e]}},{key:"clearAll",value:function(){this.EpisodeStore={}}},{key:"_getQueue",value:function(e,t){var i=[];return e=tu(e),i=this.valid(e)?this.EpisodeStore[e][t].queue:i}},{key:"getPres",value:function(e){return this._getQueue(e,"pres")}},{key:"getMids",value:function(e){return this._getQueue(e,"mids")}},{key:"getBriefs",value:function(e){return this._getQueue(e,"briefs")}},{key:"addPres",value:function(e,t){e=tu(e),this.valid(e)&&_c.a.isArray(t)&&(this.EpisodeStore[e].pres.queue=this.EpisodeStore[e].pres.queue.concat(t))}},{key:"finishPres",value:function(e,t){if(e=tu(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].pres.finish;var i=this.EpisodeStore[e].pres;t&&!1===i.finish&&(i.finish=t,this.emit("finishAddPres",{videoId:e,length:i.queue.length}),this.logger.info("finishPres "+e))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishPres invalid "+e)}}},{key:"addMids",value:function(e,t){e=tu(e),this.valid(e)&&_c.a.isArray(t)&&(this.EpisodeStore[e].mids.queue=this.EpisodeStore[e].mids.queue.concat(t))}},{key:"finishMids",value:function(e,t){if(e=tu(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].mids.finish;var i=this.EpisodeStore[e].mids;t&&!1===i.finish&&(i.finish=t,this.emit("finishAddMids",{videoId:e,length:i.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishMids invalid "+e)}}},{key:"addBriefs",value:function(e,t){e=tu(e),this.valid(e)&&_c.a.isArray(t)&&(this.EpisodeStore[e].briefs.queue=this.EpisodeStore[e].briefs.queue.concat(t))}},{key:"finishBriefs",value:function(e,t){if(e=tu(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].briefs.finish;var i=this.EpisodeStore[e].briefs;t&&!1===i.finish&&(i.finish=t,this.emit("finishAddBriefs",{videoId:e,length:i.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishBriefs invalid, "+e)}}},{key:"finishFeatures",value:function(e,t){if(e=tu(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].features.finish;this.EpisodeStore[e].features.finish=t}}},{key:"setInfo",value:function(e,t){e=tu(e),this.valid(e)&&(this.EpisodeStore[e].movieInfo=t)}},{key:"getInfo",value:function(e){var t;return t=this.valid(e)&&this.EpisodeStore[e]?this.EpisodeStore[e].movieInfo:t}},{key:"setDefinitionAd",value:function(e,t){e=tu(e),this.valid(e)&&(this.EpisodeStore[e].definitionAdInfo=t)}},{key:"valid",value:function(e,t){if(e=tu(e),"boolean"!=typeof t)return t=!(!this.EpisodeStore[e]||!0!==this.EpisodeStore[e].valid)&&(this._ensureDataStructure(e),!0);this._ensureDataStructure(e),this.EpisodeStore[e].valid=t}},{key:"destroy",value:function(){this.EpisodeStore={},this.removeAllListeners("finishAddPres"),this.removeAllListeners("finishAddMids"),this.removeAllListeners("finishAddBriefs")}}]),a}(_.a);var nu=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;f()(this,a),(i=r.call(this)).pack=t,i.params=e,i.eventlog={vrsready:!1},i.adWholeCorner=!1,i.id=e.parentId,i.ppt=e.ppt||"0",i.local=e.local||"cn_s",i.cyclePlay=!!e.cyclePlay,i.ost=i.getOst(e.ost,e.bd),i.isEnjoy="enjoy"==e.playerType,i.playbackrate=e.playrate,i.playratelist=e.playratelist,i.poster=e.poster;t=e.skinType||"";i.isMini=!!t,i.isBanner=-1<t.indexOf("banner"),i.isSimple="simple"==t||i.isBanner,i.boss=e.boss||!1,i.playerVersion=ad.a||e.playerVersion,"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay?i.autoplay=!1:i.autoplay=!0,i.isInteractVideo=!(1!=Number(e.isEnabledInteraction)||1!=Number(e.interactionType)&&0!=Number(e.interactionType)||I.a.browser.EDGE||O.a.isTWLocale()),e.isRecordProgress||!1!==e.isRecordProgress&&"false"!==e.isRecordProgress?i.isRecordProgress=!0:i.isRecordProgress=!1,i.interactionMode=e.interactionType,i.isIVMain=i.isInteractVideo,i.iv_state={},i.isInteracting=!1,i.adPlaySource=null,i.ivosRuning=!1,i.emptionType=0,lc.a.setEngine(l()(i)),i.sptr=new Vd(e),i.sbtr=new $d,i.pingbackV6=new Gd(l()(i)),i.pingbackQOS=new Kd(l()(i)),i.movieinfo=new nd(l()(i)),i.i18n=O.a,i.user=P.a,i.VI=z.a,i.picInPic=!1,i.isFullScreen=!1,i.isWebFullScreen=!1,i.isSmallWindowMode=e.isSmallWindowMode||!1,i.setMaxListeners(25),O.a.setLocale(i.local),e.ptid&&I.a.setPtid(e.ptid),gc.a.closeBit(1,37),O.a.isTWLocale()?gc.a.closeBit(4,46):(gc.a.openBit(4,3),gc.a.openBit(4,46)),i.firstLoadMovie=!0,i.logger=new E.a("DataEngine[".concat(i.id,"]")),i.mutedstart=!1,i.isInstallClient=!1;e=W.a.query("__bid__");return i.userSetBid=e?parseInt(e):0,i}return c()(a,[{key:"kernelVersion",get:function(){return this.playproxy.knlRevision}},{key:"p2pVersion",get:function(){return this.playproxy.kiwi.p2pVersion||""}},{key:"audioEnabled",get:function(){return gc.a.hasBit(1,3)&&!(I.a.browser.FIREFOX||I.a.browser.EDGE)}},{key:"vd",get:function(){var e,t=V.a.read(V.a.PLAYER_VD_KEY)||2;return t=parseInt(t,10),this.firstLoadMovie&&(this.firstLoadMovie=!1,!this.playproxy._autoVdUsing||96!=t&&1!=t||V.a.write(V.a.PLAYER_VD_KEY,t=2),P.a.isLogin()&&L.a.get("QP0023")&&(this.playproxy._autoVdUsing=!(t=4),L.a.set("QP0025","1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),L.a.remove("QP0023",{path:"/",domain:"iqiyi.com"}),V.a.write(V.a.PLAYER_VD_KEY,t)),0<this.userSetBid&&(t=R.a.getOldVd(this.userSetBid),V.a.write(V.a.PLAYER_VD_KEY,t))),96===t||1===t||2===t||P.a.isLogin()||O.a.isTWLocale()||V.a.write(V.a.PLAYER_VD_KEY,t=2),t=void 0!==this.params.vd&&!O.a.isTWLocale()?P.a.isLogin()?(e=V.a.read(V.a.PLAYER_VD_KEY)||this.params.vd,(e=R.a.getNewVd(e))>R.a.getNewVd(this.params.vd)?e:this.params.vd):this.params.vd:t},set:function(e){V.a.write(V.a.PLAYER_VD_KEY,e)}},{key:"autoVdValue",get:function(){return this.playproxy.autoVdValue}},{key:"autoVdEnabled",get:function(){var e=this.movieinfo,t=this.playproxy,i=e.getVDInfo(),e=void 0;return i&&(e=i.fileFormat),t.p2pEnabled(e)&&t._autoVdEnable}},{key:"autoVdUsing",get:function(){return this.playproxy._autoVdUsing&&this.autoVdEnabled}},{key:"autoVdAlgot",get:function(){var e,t="";return!this.autoVdUsing||this.getCurrLoaderMode()!==S.a.P2P_LOADERMODE||(e=this.playproxy.kiwi.episodeStream)&&(t=e.loader.algot),t}},{key:"skip",get:function(){return"noskip"!==L.a.get("QC157",{memory:!0})},set:function(e){e?L.a.remove("QC157",{path:"/",domain:"iqiyi.com"}):L.a.set("QC157","noskip",{expires:31536e6,path:"/",domain:"iqiyi.com"})}},{key:"voice",get:function(){var e=Number(this.params.voice)||parseFloat(V.a.read("QiyiPlayerVoice"));return isNaN(e)&&(e=.6),e=1<Number(e)?1:e}},{key:"getOst",value:function(e,t){return 1===parseInt(e,10)?1===parseInt(t)||"true"===t?1:2:0}},{key:"getMovieInfo",value:function(){return this.movieinfo.current}},{key:"init",value:function(e){this.logger.log("DataEngine Init"),this._v=e,this.episode=new iu(this.id),this.isInteractVideo?this.initInteractVideo(this.params):this._initNormalVideo()}},{key:"initInteractVideo",value:function(e){var t=this;t._initPlayProxy(),t.pack.ad&&!t.adproxy&&(t.adproxy=new id(t),t.adproxy.init()),t.IVRecorder?t.IVRecorder.updateParams(e):t.IVRecorder=new sd(t,e),t.recorder||(t.recorder=new rd(t)),t.initInteractPackage(e)}},{key:"initInteractPackage",value:function(e){this.IVPackageManager?(this.IVPackageManager.reset(),this.IVPackageManager.init(e)):this.IVPackageManager=new zd(this,e)}},{key:"_initPlayProxy",value:function(){this.playproxy||(this.playproxy=new Gc(this),this.playproxy.init(this._v,this.params.channelID),this._initVolume())}},{key:"_initAdProxy",value:function(){var e;this.pack.ad&&!this.adproxy?(this.adproxy=new id(this),this.adproxy.init()):this.adproxy={clear:e=function(){},resize:e,getAdInfo:e}}},{key:"_initVolume",value:function(){this._tempvolume=this.voice,1==parseInt(this.params.isMute,10)||1==this.params.isMute||"true"==this.params.isMute||this.params.masflag?this.setVolume(0,!0):this.setVolume(this.voice)}},{key:"_initNormalVideo",value:function(){this.isMini||(this.recorder=new rd(this)),this.playproxy=new Gc(this),this._initAdProxy(),this.playproxy.init(this._v,this.params.channelID),this._initVolume(),this.load(this.params)}},{key:"load",value:function(e){this.playproxy.load(e)}},{key:"preload",value:function(e,t){this.playproxy.preload(e,t)}},{key:"checkPreload",value:function(){return this.playproxy.checkPreload()}},{key:"refresh",value:function(e){this.playproxy.refresh(e)}},{key:"getCurrentGas",value:function(){return this.playproxy.getCurrentGas()}},{key:"abort",value:function(){this.playproxy.pause(!1,!0),this.autoplay=!1}},{key:"abortAres",value:function(){this.playproxy.abortAres()}},{key:"abortAllAres",value:function(e){this.playproxy.abortAllAres(e)}},{key:"abortAllAresAndSeek",value:function(e,t){this.playproxy.abortAllAres(e,t)}},{key:"video",value:function(){return this.playproxy.video()}},{key:"play",value:function(e){this.playproxy.play(e)}},{key:"pause",value:function(e){this.playproxy.pause(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1])}},{key:"isPaused",value:function(){return this.playproxy.isPaused()}},{key:"replay",value:function(){this.playproxy.replay()}},{key:"seek",value:function(e,t,i){this.playproxy.isPatch()||this.playproxy.seek(e,t,i)}},{key:"lockSeek",value:function(){this.playproxy.lockSeek()}},{key:"unlockSeek",value:function(){this.playproxy.unlockSeek()}},{key:"isSeeking",value:function(){return!!this.playproxy.hasSeeking}},{key:"switchDefinition",value:function(e,t){this.playproxy.switchDefinition(e,t)}},{key:"isSwitchingDefinition",value:function(){return this.playproxy._vdsSwitch}},{key:"switchAudioDefinition",value:function(e){this.movieinfo.currentLid!==e&&(this.emit(S.a.NTF_AudioSwitching,e),this.playproxy.switchAudioTrack(e))}},{key:"getBufferTime",value:function(){return this.playproxy.getBufferTime()}},{key:"getSrc",value:function(){return this.playproxy.getSrc()}},{key:"setMuted",value:function(e){var t=this.getVolume();this._tempvolume=0<t?t:this._tempvolume||.6,e?this.setVolume(0):this.setVolume(this._tempvolume)}},{key:"getMuted",value:function(){return 0===this.getVolume()}},{key:"getPlayingDuration",value:function(){return this.playproxy._playingDuration}},{key:"getSkipHeaderTime",value:function(){var e=this.playproxy._skipHT,t=parseInt(this.getDuration());return e=t<=e?t-1:e}},{key:"getSkipTailTime",value:function(){return this.playproxy._skipTT}},{key:"isSkipPrelude",value:function(e,t){var i=this.skip;if("boolean"!=typeof e)return i;i!=e&&(this.skip=e,!0!==t&&this.playproxy.setSkipPrelude())}},{key:"setStartPlayTime",value:function(e,t){this.movieinfo.setStartPlayTime(e,t)}},{key:"getStartPlayTime",value:function(){return this.movieinfo.startPlayTime}},{key:"getEndPlayTime",value:function(){return this.movieinfo.endPlayTime}},{key:"getDuration",value:function(){return this.playproxy.getDuration()}},{key:"getVolume",value:function(){return this.playproxy.getVolume()}},{key:"setVolume",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.playproxy.setVolume(e),this.playproxy.video().muted=t}},{key:"getVipTypes",value:function(){return this.getMovieInfo().vipTypes}},{key:"getCurrentVD",value:function(){return this.playproxy.getCurrentVD()}},{key:"getPlayInfo",value:function(e){var n=this;n._getpcall=n._getpcall||[],n._getpcall.push(e);var r=n.getMovieInfo(),e=function(){var t={};t.tvid=r.tvid,t.vid=r.vid,t.cid=r.cid,t.albumId=r.albumId,t.duration=n.getDuration(),t.rate=n.getCurrentVD(),t.vidl=n.movieinfo.vidl,t.previewImageUrl=r.previewImageUrl,t.audl=r.audl;var e=n._getpcall.slice(0);n._getpcall=[];for(var i=0;i<e.length;i++)e[i]&&function(e){setTimeout(function(){e(t)},0)}(e[i])};r.originalData?e():n.on(S.a.NTF_VRSReady,e)}},{key:"getVideoInfo",value:function(e){this.playproxy.getVideoInfo(e)}},{key:"getVideoInfoByTvid",value:function(e,t){this.playproxy.getVideoInfoByTvid(e,t)}},{key:"getCurrStatus",value:function(){return this.playproxy.currStatus}},{key:"isAd",value:function(){return this.playproxy.isAd()}},{key:"isPatch",value:function(){return this.playproxy.isPatch()}},{key:"getCurrentAdInfo",value:function(){var e={};return e=this.isAd()?this.adproxy.getAdInfo():e}},{key:"switchVideo",value:function(e){"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay||0==e.autoplay?this.autoplay=!1:"true"!==e.autoplay&&!0!==e.autoplay&&"1"!=e.autoplay&&1!=e.autoplay||(this.autoplay=!0),this.playproxy.switchVideo(e)}},{key:"isTryWatch",value:function(){return this.movieinfo.isTryWatch}},{key:"getPreviewType",value:function(){return parseInt(this.movieinfo.previewType||-1,10)}},{key:"getPreviewTime",value:function(){return this.movieinfo.previewTime||1/0}},{key:"recharge",value:function(e,t,i){this.playproxy.noticeRecharge(e,t,i)}},{key:"hasStatus",value:function(e){return this.playproxy.hasStatus(e)}},{key:"destroy",value:function(){this.episode.destroy(),this.adproxy.destroy(),this.playproxy.destory(),this.movieinfo.clear(),this.recorder.stopTimer(),this.pingbackV6.destory(),this.emit(S.a.Status_Destroy)}},{key:"getPlaybackRate",value:function(){return this.playproxy.getPlaybackRate()}},{key:"setPlaybackRate",value:function(e){this.playproxy.setPlaybackRate(e)}},{key:"getCurrenttime",value:function(){return this.playproxy.getCurrenttime()}},{key:"getEngineType",value:function(){return S.a.ENGINE_TYPE}},{key:"getPageTmpltType",value:function(){return this.params.pageTmpltType}},{key:"un",value:function(e,t){return this.off(e,t),this}},{key:"getVideoMuted",value:function(){return this.playproxy.video().muted}},{key:"resize",value:function(){this.adproxy.resize()}},{key:"jsNotifyAdManager",value:function(e){this.emit(S.a.NTF_AD_NotifyManager,e)}},{key:"notyfyADInfo",value:function(e){this.adproxy.sdk&&this.adproxy.sdk.emit(e.type,e.data)}},{key:"setEndPlay",value:function(e){this.playproxy.setEndPlay(e)}},{key:"getCurrManifestType",value:function(){return this.playproxy.kiwi.currentManifestType}},{key:"getManifestTypes",value:function(){return this.playproxy.getManifestTypes()}},{key:"getDownloadSpeed",value:function(){return this.playproxy?this.getCurrLoaderMode()===S.a.CDN_LOADERMODE?this.playproxy.kiwi.stats.downloadSpeed:this.playproxy.kiwi.stats.bandwidth:null}},{key:"getCDNInfo",value:function(){if(this.getCurrLoaderMode()===S.a.CDN_LOADERMODE){var e=this.playproxy.kiwi.stats;return{protocol:e.netProtocol||"",host:e.cdnHost||""}}e=this.playproxy.kiwi.stats;return{protocol:e.netProtocol||"",host:e.cdnHost||""}}},{key:"startFireFPSEvent",value:function(){this.playproxy.kiwi.startReportFPS()}},{key:"stopFireFPSEvent",value:function(){this.playproxy.kiwi.stopReportFPS()}},{key:"getCurrLoaderMode",value:function(){return this.playproxy.kiwi.currentLoaderMode}},{key:"getDataBufferInfo",value:function(){return this.playproxy.kiwi.dataBufferInfo}},{key:"setPlayPingbackInfo",value:function(e){this.pingbackV6&&this.pingbackV6.setPlayPingbackInfo(e)}},{key:"setDelayPlayInfo",value:function(e){this.playproxy.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.playproxy.clearDelayPlayInfo(e)}},{key:"getBufferInfo",value:function(){return this.playproxy.kiwi.bufferInfo}},{key:"getMP4URLByTvid",value:function(e,t){this.playproxy.getMP4URLByTvid(e,t)}},{key:"getCorrectTimeObj",value:function(){var e,t,i=this.getDuration(),n=this.getCurrenttime(),r=!1,a="",o=this.getCurrentAdInfo();return o.isFusionMode&&o.seekable?(t=i+this.movieinfo.current.duration,e=n+o.offset,r=!0,a=o.rollType):(e=n,t=i),{current:n,cduration:i,acurrent:e,aduration:t,isFusionMode:r,rollType:a}}},{key:"isFusionMode",value:function(){var e=this.getCurrentAdInfo();return e&&e.isFusionMode}}]),a}(_.a),K=(c()(ru,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this}},{key:"once",value:function(e,t){var i=this;function n(){i.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this}},{key:"off",value:function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r=0;r<n.length;r++)if((i=n[r])===t||i.fn===t){n.splice(r,1);break}return this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i)for(var n=0,r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,t);return this}},{key:"listeners",value:function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]}},{key:"hasListeners",value:function(e){return!!this.listeners(e).length}}]),ru);function ru(){f()(this,ru)}K.prototype.addEventListener=K.prototype.on,K.prototype.removeEventListener=K.prototype.off;function au(e){return(e=vu.toString.call(e)).substring(8,e.length-1).toLowerCase()}function ou(e){return re()(e)}function su(e,t){return vu.hasOwnProperty.call(e,t)}function cu(e){return e==1/0||e==-1/0}function du(e){return!isNaN(e)&&"number"==au(e)}function uu(e){return!(!du(e)||cu(e))}function lu(e){return!!uu(e)&&0==e%1}function hu(e){if(e){e=ou(e);return"object"==e||"function"==e}return!1}function fu(e){return hu(e)&&"function"!=au(e)}function pu(e){return!(!e||"object"!=au(e)||e.nodeType||e.setInterval)}function _u(e){return"string"==au(e)}function gu(e){if(!yu(e)&&fu(e)){e=e.length;if(lu(e)&&0<=e)return!0}return!1}function yu(e){return!(!e||e.window!=e)}var vu=Object.prototype,mu={_class:au,_type:ou,owns:su,nan:function(e){return e!=e},bool:function(e){return"boolean"==au(e)},infinite:cu,number:du,iod:uu,decimal:function(e){return!!uu(e)&&0!=e%1},integer:lu,oof:hu,object:fu,hash:pu,plainObject:pu,undef:function(e){return"undefined"==ou(e)},fn:function(e){return"function"==au(e)},string:_u,nos:function(e){return uu(e)||_u(e)},array:function(e){return"array"==au(e)},arraylike:gu,window:yu,empty:function(e){if(_u(e)||gu(e))return 0===e.length;if(pu(e))for(var t in e)if(su(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==au(e)}},bu=function(){var f={};f.is=mu,f.extend=f.assign=function(i){return i&&o(e.call(arguments,1),function(e){d(e,function(e,t){mu.undef(e)||(i[t]=e)})}),i};var e=[].slice;f.each=o,f.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},f.map=function(e,n){var r=[];return o(e,function(e,t,i){r[t]=n(e,t,i)}),r},f.filter=function(e,n){var r=[];return o(e,function(e,t,i){n(e,t,i)&&r.push(e)}),r},f.identity=function(e){return e},f.compact=function(e){return f.filter(e,f.identity)},f.some=function(e,t){return-1!=i(e,t)},f.every=function(e,t){return-1==i(e,n(t))},f.reduce=c,f.sum=function(e){return f.reduce(e,function(e,t){return e+t},0)},f.findIndex=i,f.find=function(e,t){t=f.findIndex(e,t);if(-1!=t)return e[t]},f.indexOf=r,f.includes=function(e,t){return-1!=r(e,t)},f.toArray=s,f.slice=function(e,t,i){var n=[],r=a(e);return 0<=r&&(t=t||0,0!==i&&(i=i||r),n=(e=!mu.fn(e.slice)?s(e):e).slice(t,i)),n},f.negate=n,f.forIn=d,f.keys=function(e){var i=[];return d(e,function(e,t){i.push(t)}),i},f.values=function(e){var i=[];return d(e,function(e,t){i.push(e)}),i};var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function a(e){if(null!=e)return e.length}function o(e,t){var i=a(e);if(i&&mu.fn(t))for(var n=0;n<i&&!1!==t(e[n],n,e);n++);return e}function i(e,n){var r=-1;return o(e,function(e,t,i){if(n(e,t,i))return r=t,!1}),r}function s(e){var t=[];return o(e,function(e){t.push(e)}),t}function n(e){return function(){return!e.apply(this,arguments)}}function r(e,t){return mu.string(e)?e.indexOf(t):i(e,function(e){return t===e})}function c(i,n,r){return o(i,function(e,t){r=n(r,e,t,i)}),r}function d(e,t){if(e)for(var i in e)if(mu.owns(e,i)&&!1===t(e[i],i,e))break;return e}function u(e){return e||0==e?e+"":""}f.trim=function(e){return null==e?"":(""+e).replace(t,"")},f.invert=function(e){var i={};return d(e,function(e,t){i[e]=t}),i},f.lower=function(e){return u(e).toLowerCase()},f.upper=function(e){return u(e).toUpperCase()},f.first=function(e){if(e)return e[0]},f.startsWith=function(e,t){return 0==r(e,t)},f.tostr=u,f.get=function(t,e){if((e=p(e)).length&&f.every(e,function(e){if(null!=t)return t=t[e],!0}))return t},f.sumBy=function(e,t){var i=0;return f.each(e,function(e){i+=f.get(e,t)||0}),i},f.has=function(t,e){return!(!(e=p(e)).length||!f.every(e,function(e){if(null!=t&&mu.owns(t,e))return t=t[e],!0}))},f.only=function(i,e){return i=i||{},c(e=mu.string(e)?e.split(/ +/):e,function(e,t){return null!=i[t]&&(e[t]=i[t]),e},{})},f.curry=function(n){var r=n.length;return function t(i){return function(){var e=i.concat(f.slice(arguments));return e.length>=r?(e.length=r,n.apply(this,e)):t(e)}}([])},f.mapObject=f.mapValues=function(e,n){var r={};return d(e,function(e,t,i){r[t]=n(e,t,i)}),r},f.before=function(e,t){return function(){if(1<e)return e--,t.apply(this,arguments)}},f.once=function(e){return f.before(2,e)},f.len=a,f.last=function(e){var t=f.len(e);if(t)return e[t-1]},f.max=function(e,i){var n=-1,r=-1/0;return i=i||f.identity,o(e,function(e,t){(e=i(e))>r&&(r=e,n=t)}),-1<n?e[n]:r},f.split=function(e,t,i){return(e=u(e)).split(t,i)},f.size=function(e){var t=f.len(e);return t=null==t?f.keys(e).length:t},f.flatten=function(e){var t=[];return o(e,function(e){mu.arraylike(e)?o(e,function(e){t.push(e)}):t.push(e)}),t},f.union=function(){return f.uniq(f.flatten(arguments))},f.uniq=function(e){return f.uniqBy(e)},f.uniqBy=function(e,i){var n=[],r=[];return mu.fn(i)||(i=null),o(e,function(e){var t=e;i&&(t=i(e)),f.includes(r,t)||(r.push(t),n.push(e))}),n},f.remove=function(e,t){for(var i=f.len(e)||0,n=[];i--;)t(e[i],i,e)&&n.push(i);return function(e,t){var i=[],n=f.len(t);if(n)for(t=t.sort(function(e,t){return e-t});n--;){var r=t[n];i.push(Array.prototype.splice.call(e,r,1)[0])}return i.reverse(),i}(e,n)},f.endsWith=function(e,t){return(t+="")==f.slice(e,f.len(e)-f.len(t))},f.isMatch=function(i,e){var n=!0;return i=i||{},d(e,function(e,t){if(e!==i[t])return n=!1}),n},f.throttle=function(e,t,i){return i=f.extend({leading:!0,trailing:!0,maxWait:t=t||0},i),f.debounce(e,t,i)},f.debounce=function(n,r,a){r=r||0;var o,s=(a=f.extend({leading:!1,trailing:!0},a)).maxWait,c=0,d=0,u=Date.now();function l(e,t,i){return c=Date.now(),e.apply(t,i)}function h(){o&&(clearTimeout(o),o=null)}function e(){u=Date.now();var e=!(r<u-c||s&&s<u-d);d=u;var t=this,i=arguments;h(),e?a.trailing&&(o=setTimeout(function(){l(n,t,i)},r)):l(n,t,i)}return a.leading||(c=u),e.cancel=h,e};var l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(mu.array(e))return e;var r=[];return u(e).replace(l,function(e,t,i,n){e=t||e;i&&(e=n.replace(h,"$1")),r.push(e)}),r}return f}();var ku="contextName",xu=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this))[ku]=e,t}return c()(a,[{key:"setParent",value:function(e){e&&(this[e[ku]]=this.parent=e)}},{key:"getParentByName",value:function(e){for(var t=this;t;){if(t[ku]==e)return t;t=t.parent}}},{key:"getVal",value:function(e){for(var t=this;t;){if(bu.has(t,e))return t[e];t=t.parent}}},{key:"getMultiVals",value:function(e){var t=this,i={};return bu.each(e,function(e){i[e]=t.getVal(e)}),i}},{key:"getParam",value:function(){for(var e=this,t=6,i=[];t--&&e;)i.push(e),e=e.parent;return i.reverse(),i.unshift({}),bu.extend.apply(bu,i)}}]),a}(K),Su=(d(271),bu.is),Tu={sep:"&",eq:"=",encode:encodeURIComponent,decode:decodeURIComponent,keepRaw:!1,sort:null,ignoreValues:[void 0]};function Pu(e,t,i){return i=bu.find(arguments,function(e){return Su.object(e)}),e=Su.nos(e)?e:void 0,t=Su.nos(t)?t:void 0,bu.extend({},Tu,i,{sep:e,eq:t})}var Iu,wu,Au=function(e,t,i,n){e+="";var r=(n=Pu(t,i,n)).decode;return e=e.split(n.sep),bu.reduce(e,function(e,t){if(2==(t=t.split(n.eq)).length){var i=t[0],t=t[1];if(!n.keepRaw)try{i=r(i),t=r(t)}catch(e){}e[i]=t}return e},{})},Eu=function(i,e,t,n){n=Pu(e,t,n);e=bu.keys(i),t=n.sort;t&&(Su.fn(t)?e.sort(t):e.sort());var r=n.encode,a=[];return bu.each(e,function(e){var t=i[e];bu.includes(n.ignoreValues,t)||(!Su.nan(t)&&null!=t||(t=""),n.keepRaw||(e=r(e),t=r(t)),a.push(e+n.eq+t))}),a.join(n.sep)},Du=bu.is,qu=bu.curry(function r(a,e){var o={};return a&&e&&bu.forIn(e,function(e,t){var i,n=a[t];null!=n&&(Du.object(n)?(i=n.type||Du._class(e),t=n.name,"object"==i?o[t]=r(n.child,e):"array"==i&&(o[t]=bu.map(e,function(e){return r(n.child,e)}))):o[n]=e)}),o}),Ou={visit:"v",player:"pl",policy:"p",show:"s",template:"tp",creative:"c",tracking:"t",exchange:"x",mixer:"m",statistics:"st",ad:"a",inventory:"i",questionnaireInquiry:"qi"},Ru={success:"s",error:"e",load:"l",skip:"sk",skipClick:"sc",click:"clk",impression:"imp",adblock:"adb",close:"cls",start:"st",unsupported:"uns"},Lu=qu({pingbackType:"p",subtype:"t",uaaUserId:"u",cupidUserId:"a",episodeId:"v",albumId:"b",channelId:"c",vvId:"e",adPlayerId:"y",customInfo:"x",timestamp:"s",videoDuration:"d",isVIP:"g",isPreload:"pl",passportId:"pp",location:"lc",sdkVersion:"av",clientVersion:"vv",requestId:"rid",sequenceId:"sq",orderItemId:"od",creativeId:"ct",dspId:"dp",adInfo:"ai",adStrategy:"as",rawInventory:"ri",originalInventory:"oi",deliveredInventory:"di",forbiddenInventory:"fi",requestDuration:"rd",requestCount:"rc",reqCount:"rc",errorCode:"ec",errCode:"ec",errorMessage:"em",errMessage:"em",errMsg:"em"}),Mu={visit:"episodeId albumId channelId location passportId customInfo isPreload",show:"requestCount requestDuration",creative:"",tracking:"",statistics:"",ad:"episodeId albumId channelId sequenceId",inventory:"episodeId albumId channelId rawInventory originalInventory deliveredInventory forbiddenInventory"},Cu=(d(287),Object.prototype.toString),Nu=function(e){switch(Cu.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==re()(e)&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(e){if(e instanceof TypeError)return"arguments"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":re()(e)},Bu=+Date.now(),Fu=window.document,Uu=/^(?:text|application)\/javascript/i,ju=/^(?:text|application)\/xml/i,Vu="application/json",Wu=/^\s*$/,Hu=function e(t){var i=Ju({},t||{});for(Iu in e.settings)void 0===i[Iu]&&(i[Iu]=e.settings[Iu]);(a=i).global&&0==Hu.active++&&zu(a),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host);var n=i.dataType,t=/=\?/.test(i.url);if("jsonp"==n||t)return t||(i.url=$u(i.url,i.jsonpCallback+"=?")),e.JSONP(i);i.url||(i.url=window.location.toString()),Zu(i);var r,a=i.accepts[n],t={},o=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,s=e.settings.xhr();i.crossDomain||(t["X-Requested-With"]="XMLHttpRequest"),a&&(-1<(t.Accept=a).indexOf(",")&&(a=a.split(",",2)[0]),s.overrideMimeType&&s.overrideMimeType(a)),(i.contentType||i.data&&"GET"!=i.type.toUpperCase())&&(t["Content-Type"]=i.contentType||"application/x-www-form-urlencoded"),i.headers=Ju(t,i.headers||{}),s.onreadystatechange=function(){if(4==s.readyState){clearTimeout(r);var t=!1;if(200<=s.status&&s.status<300||304==s.status||0==s.status&&"file:"==o){n=n||((e=s.getResponseHeader("content-type"))&&("text/html"==e?"html":e==Vu?"json":Uu.test(e)?"script":ju.test(e)&&"xml")||"text"),e=s.responseText;try{"script"==n?(0,eval)(e):"xml"==n?e=s.responseXML:"json"==n&&(e=Wu.test(e)?null:JSON.parse(e))}catch(e){t=e}t?Gu(t,"parsererror",s,i):Yu(e,s,i)}else Gu(null,"error",s,i)}var e};t=!("async"in i)||i.async;for(wu in s.open(i.type,i.url,t),i.headers)s.setRequestHeader(wu,i.headers[wu]);return!1===function(e,t){var i=t.context;if(!1===t.beforeSend.call(i,e,t)||!1===zu(t))return!1;zu(t)}(s,i)?(s.abort(),!1):(0<i.timeout&&(r=setTimeout(function(){s.onreadystatechange=Ku,s.abort(),Gu(null,"timeout",s,i)},i.timeout)),s.send(i.data||null),s)};function zu(e){if(e.global)return!0}function Yu(e,t,i){var n=i.context;i.success.call(n,e,"success",t),zu(i),Qu("success",t,i)}function Gu(e,t,i,n){var r=n.context;n.error.call(r,i,t,e),zu(n),Qu(t,i,n)}function Qu(e,t,i){var n=i.context;i.complete.call(n,t,e),zu(i),(i=i).global&&!--Hu.active&&zu(i)}function Ku(){}function $u(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Zu(e){var t,i;"object"===Nu(e.data)&&(e.data=(t=e.data,(i=[]).add=function(e,t){this.push(Xu(e)+"="+Xu(t))},function e(t,i,n,r){var a="array"===Nu(i);for(var o in i){var s=i[o];r&&(o=n?r:r+"["+(a?"":o)+"]"),!r&&a?t.add(s.name,s.value):(n?"array"===Nu(s):"object"===Nu(s))?e(t,s,n,o):t.add(o,s)}}(i,t,void 0),i.join("&").replace("%20","+"))),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=$u(e.url,e.data))}Hu.active=0,Hu.JSONP=function(i){if(!("type"in i))return Hu(i);var n,r="jsonp"+ ++Bu,a=Fu.createElement("script"),o={abort:function(){a.parentNode&&a.parentNode.removeChild(a),r in window&&(window[r]=Ku),Qu("abort",o,i)}},e=Fu.getElementsByTagName("head")[0]||Fu.documentElement;return i.error&&(a.onerror=function(){o.abort(),i.error(i,"error")}),window[r]=function(e){var t;clearTimeout(n),a.parentNode&&a.parentNode.removeChild(a),delete window[r],i.checkParserError&&(t=e,"object"!=re()(t)||"[object object]"!=Object.prototype.toString.call(t).toLowerCase()||t.length)?i.error(i,"parsererror"):Yu(e,o,i)},Zu(i),a.src=i.url.replace(/\?(.+)=\?/,"?$1="+r),e.insertBefore(a,e.firstChild),0<i.timeout&&(n=setTimeout(function(){o.abort(),Qu("timeout",o,i)},i.timeout)),o},Hu.settings={type:"GET",beforeSend:Ku,success:Ku,error:Ku,complete:Ku,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:Vu,xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,checkParserError:!1},Hu.get=function(e,t){return Hu({url:e,success:t})},Hu.post=function(e,t,i,n){return"function"===Nu(t)&&(n=n||i,i=t,t=null),Hu({type:"POST",url:e,data:t,success:i,dataType:n})},Hu.getJSON=function(e,t){return Hu({url:e,success:t,dataType:"json"})};var Xu=encodeURIComponent;function Ju(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){for(Iu in e)void 0!==e[Iu]&&(t[Iu]=e[Iu])}),t}function el(e){(new Image).src=e}function tl(e){var t=(e=e||{}).slot||{},i=e.creative||{},i=[t.cuepointType,e.dspId,e.orderItemId,i.creativeId,i.templateType];return(i=bu.map(i,function(e){return e=null==e?"":e})).join("||")}function il(e,t,i,n){var r,a;return e&&t&&(r=e.split(t),i=bu.tostr(i),e=r.join(i),n&&(a=encodeURIComponent(t))!=t&&(e=il(e,a,i))),e}function nl(e){var t=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),i=0===document.createElement("canvas").toDataURL("image/heic").indexOf("data:image/heic");return/\.jpg$/.test(e)&&(e+="?caplist=jpg",t&&(e+=",webp"),i&&(e+=",heic")),e}function rl(a,o){var s=new Image;return new Promise(function(e,t){var i=function(){s.removeEventListener("load",r),s.removeEventListener("error",n)},n=function(){i(),t("error")},r=function(){i(),e(s)};o&&setTimeout(function(){i(),t("timeout")},o),a=a.replace(/^(https:|http:)/,""),a=nl(a),s.addEventListener("load",r),s.addEventListener("error",n),s.setAttribute("src",a)})}function al(e,t,i){return e=e||{},t={width:ll.number((t=t||{}).width)?t.width:1/0,height:ll.number(t.height)?t.height:1/0},i={width:(i=i||{}).width||0,height:i.height||0},i=Math.max(i.width/e.width,i.height/e.height),e=Math.min(t.width/e.width,t.height/e.height),{min:i=e<i?e=NaN:i,max:e}}function ol(e){var t=NaN;return ll.string(e)&&(e=e.split(",")),!(e=bu.first(e))||"string"!=typeof e?t:(e=e.charCodeAt(0),t=47<e&&e<58||64<e&&e<91?e:t)}function sl(){var e=fl("idx")||"";if(!e)return!1;var t={};try{t=JSON.parse(e)}catch(e){return console.log("idx parse error",e),!1}return!!ll.object(t)&&(!!t.ip&&(!!t.geocode&&(!!t.exptime&&(e="ip:"+t.ip.replace(/X/g,".")+",gc:"+t.geocode+",ept:"+t.exptime,bu.extend(t,{idx:e})))))}function cl(e,t,i){return(new yl).init(e,t,i)}function dl(e,t,i){return cl(e,{pingbackType:"statistics",subtype:t,customInfo:i})}var ul=Hu,ll=bu.is,hl=function(){return L.a.get("P00001")||""},fl=function(e){return L.a.get(e)||""},pl=function(e,t,i){return L.a.set(e,t,i)},_l=bu.is,gl=["isVIP","isPreload"],yl=(c()(vl,[{key:"init",value:function(e,t,i){var n=this;n.addUncompressedParam(t),n.addCompressedParam(i),n.getType(),n.getContextParam(e),n.filterContextParam(),n.mergeContextParam(),n.normalizeParam(),n.compressKey(),n.mergePingbackParam(),n.send()}},{key:"getContextParam",value:function(e){e instanceof xu?(this.context=e,this.contextParam=e.getParam()):this.contextParam=e}},{key:"filterContextParam",value:function(){var e="pingbackType subtype timestamp vvId adPlayerId uaaUserId cupidUserId sdkVersion clientVersion isVIP videoDuration requestId "+Mu[this.pingbackType];this.contextParam=bu.only(this.contextParam,e)}},{key:"mergeContextParam",value:function(){this.addUncompressedParam(this.contextParam)}},{key:"getType",value:function(){var e=this.uncompressedParam;this.pingbackType=this.pingbackType||e.pingbackType,this.subtype=this.subtype||e.subtype,e.pingbackType=Ou[this.pingbackType]||this.pingbackType,e.subtype=Ru[this.subtype]||this.subtype}},{key:"normalizeParam",value:function(){var n=this.uncompressedParam;this.context&&"ad"==this.context.contextName&&(e=this.context,this.addUncompressedParam({adInfo:e.adInfo})),bu.each(gl,function(e){var t=n[e];_l.bool(t)&&(n[e]=t?1:0)});var e=0,e=this.context&&this.context.getVal("deltaTime")||0;n.timestamp=Date.now()+e,bu.forIn(n,function(e,t){var i;_l.string(e)&&(i=e.length,"em"==t&&300<i&&(e=e.slice(0,150)+"||"+e.slice(i-150)),n[t]=e)})}},{key:"addCompressedParam",value:function(e){bu.extend(this.compressedParam,e)}},{key:"addUncompressedParam",value:function(e){bu.extend(this.uncompressedParam,e)}},{key:"compressKey",value:function(){this.addCompressedParam(Lu(this.uncompressedParam))}},{key:"mergePingbackParam",value:function(){var e;this.context&&(e=this.context.getVal("pingbackParam"),bu.extend(this.pingbackParam,e))}},{key:"send",value:function(){var e=this.compressedParam||{},i=this.pingbackParam||{},n={},t="";this.context&&this.context.getParentByName("sdk").logger.getLogger("pingback")("send",this.pingbackType||e.p,this.subtype||e.t,this.uncompressedParam,e,i),bu.forIn(e,function(e,t){bu.has(i,t)||(n[t]=e)}),_l.empty(i)||(t="&"+Eu(i,"&","=",{keepRaw:!0}));t="//msg.qy.net/cp2.gif?"+Eu(n)+t;el(t)}}]),vl);function vl(){f()(this,vl);this.uncompressedParam={},this.compressedParam={},this.pingbackParam={}}function ml(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function bl(e,t,i,n,r,a){return ml((a=ml(ml(t,e),ml(n,a)))<<r|a>>>32-r,i)}function kl(e,t,i,n,r,a,o){return bl(t&i|~t&n,e,t,r,a,o)}function xl(e,t,i,n,r,a,o){return bl(t&n|i&~n,e,t,r,a,o)}function Sl(e,t,i,n,r,a,o){return bl(t^i^n,e,t,r,a,o)}function Tl(e,t,i,n,r,a,o){return bl(i^(t|~n),e,t,r,a,o)}function Pl(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i,n,r,a,o=1732584193,s=-271733879,c=-1732584194,d=271733878,u=0;u<e.length;u+=16)o=kl(i=o,n=s,r=c,a=d,e[u],7,-680876936),d=kl(d,o,s,c,e[u+1],12,-389564586),c=kl(c,d,o,s,e[u+2],17,606105819),s=kl(s,c,d,o,e[u+3],22,-1044525330),o=kl(o,s,c,d,e[u+4],7,-176418897),d=kl(d,o,s,c,e[u+5],12,1200080426),c=kl(c,d,o,s,e[u+6],17,-1473231341),s=kl(s,c,d,o,e[u+7],22,-45705983),o=kl(o,s,c,d,e[u+8],7,1770035416),d=kl(d,o,s,c,e[u+9],12,-1958414417),c=kl(c,d,o,s,e[u+10],17,-42063),s=kl(s,c,d,o,e[u+11],22,-1990404162),o=kl(o,s,c,d,e[u+12],7,1804603682),d=kl(d,o,s,c,e[u+13],12,-40341101),c=kl(c,d,o,s,e[u+14],17,-1502002290),o=xl(o,s=kl(s,c,d,o,e[u+15],22,1236535329),c,d,e[u+1],5,-165796510),d=xl(d,o,s,c,e[u+6],9,-1069501632),c=xl(c,d,o,s,e[u+11],14,643717713),s=xl(s,c,d,o,e[u],20,-373897302),o=xl(o,s,c,d,e[u+5],5,-701558691),d=xl(d,o,s,c,e[u+10],9,38016083),c=xl(c,d,o,s,e[u+15],14,-660478335),s=xl(s,c,d,o,e[u+4],20,-405537848),o=xl(o,s,c,d,e[u+9],5,568446438),d=xl(d,o,s,c,e[u+14],9,-1019803690),c=xl(c,d,o,s,e[u+3],14,-187363961),s=xl(s,c,d,o,e[u+8],20,1163531501),o=xl(o,s,c,d,e[u+13],5,-1444681467),d=xl(d,o,s,c,e[u+2],9,-51403784),c=xl(c,d,o,s,e[u+7],14,1735328473),o=Sl(o,s=xl(s,c,d,o,e[u+12],20,-1926607734),c,d,e[u+5],4,-378558),d=Sl(d,o,s,c,e[u+8],11,-2022574463),c=Sl(c,d,o,s,e[u+11],16,1839030562),s=Sl(s,c,d,o,e[u+14],23,-35309556),o=Sl(o,s,c,d,e[u+1],4,-1530992060),d=Sl(d,o,s,c,e[u+4],11,1272893353),c=Sl(c,d,o,s,e[u+7],16,-155497632),s=Sl(s,c,d,o,e[u+10],23,-1094730640),o=Sl(o,s,c,d,e[u+13],4,681279174),d=Sl(d,o,s,c,e[u],11,-358537222),c=Sl(c,d,o,s,e[u+3],16,-722521979),s=Sl(s,c,d,o,e[u+6],23,76029189),o=Sl(o,s,c,d,e[u+9],4,-640364487),d=Sl(d,o,s,c,e[u+12],11,-421815835),c=Sl(c,d,o,s,e[u+15],16,530742520),o=Tl(o,s=Sl(s,c,d,o,e[u+2],23,-995338651),c,d,e[u],6,-198630844),d=Tl(d,o,s,c,e[u+7],10,1126891415),c=Tl(c,d,o,s,e[u+14],15,-1416354905),s=Tl(s,c,d,o,e[u+5],21,-57434055),o=Tl(o,s,c,d,e[u+12],6,1700485571),d=Tl(d,o,s,c,e[u+3],10,-1894986606),c=Tl(c,d,o,s,e[u+10],15,-1051523),s=Tl(s,c,d,o,e[u+1],21,-2054922799),o=Tl(o,s,c,d,e[u+8],6,1873313359),d=Tl(d,o,s,c,e[u+15],10,-30611744),c=Tl(c,d,o,s,e[u+6],15,-1560198380),s=Tl(s,c,d,o,e[u+13],21,1309151649),o=Tl(o,s,c,d,e[u+4],6,-145523070),d=Tl(d,o,s,c,e[u+11],10,-1120210379),c=Tl(c,d,o,s,e[u+2],15,718787259),s=Tl(s,c,d,o,e[u+9],21,-343485551),o=ml(o,i),s=ml(s,n),c=ml(c,r),d=ml(d,a);return[o,s,c,d]}function Il(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function wl(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function Al(e){for(var t,i="0123456789abcdef",n="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+=i.charAt(t>>>4&15)+i.charAt(15&t);return n}function El(e){return unescape(encodeURIComponent(e))}function Dl(e){return Il(Pl(wl(e=El(e)),8*e.length))}function ql(e,t){return function(e,t){var i,n=wl(e),r=[],a=[];for(r[15]=a[15]=void 0,16<n.length&&(n=Pl(n,8*e.length)),i=0;i<16;i+=1)r[i]=909522486^n[i],a[i]=1549556828^n[i];return t=Pl(r.concat(wl(t)),512+8*t.length),Il(Pl(a.concat(t),640))}(El(e),El(t))}function Ol(e,t,i){return t?i?ql(t,e):Al(ql(t,e)):i?Dl(e):Al(Dl(e))}function Rl(e,t){var i=[],n=bu.indexOf(e,t);return-1==n?i[0]=e:(i[0]=e.slice(0,n),i[1]=e.slice(n+t.length)),i}d(374),"http https ftp gopher file".split(" ");function Ll(e,t){if("string"!=typeof e)return e;var i,n,r={};r.href=e,a=(i=Rl(e,"#"))[0],i[1]&&(r.hash="#"+i[1]),n="",e=(e=a).replace(/^[a-zA-Z][a-zA-Z0-9+-.]*:/,function(e){return n=e,""}),a=(i=[n,e])[1],r.protocol=i[0].toLowerCase();var a=(i=Rl(a,"?"))[0],e=i[1];return t&&(e=Au(e)),r.query=e,"/"!=a.charAt(0)&&r.schema?r.opaque=a:bu.startsWith(a,"//")&&(i=Rl(a=a.slice(2),"/"),r.pathname="/"+unescape(i[1]||""),t=Rl(i[0],"@"),e=t[0],(a=t[1])||(a=t[0],e=null),r.auth=(i=[e,a])[0],i=Rl(i[1],":"),r.hostname=i[0],r.port=~~i[1]),r}function Ml(e){var t;e=bu.tostr(e);for(var i=[],n=0;n<e.length;n++)(t=e.charCodeAt(n))<128?i.push(t):t<2048?i.push(192|t>>6,128|63&t):t<55296||57344<=t?i.push(224|t>>12,128|t>>6&63,128|63&t):i.push(239,191,189);return i}function Cl(e){for(var t=[],i=0,n=0,r=0;r<e.length;r++){if(224<(i=e[r]))n=(15&i)<<12,n|=(63&(i=e[++r]))<<6,n|=63&(i=e[++r]);else if(192<i)n=(31&i)<<6,n|=(63&(i=e[++r]))<<6;else{if(128<i)throw new Error("InvalidCharacterError");n=i}t.push(String.fromCharCode(n))}return t.join("")}var Nl={adPlayerId:"a",uaaUserId:"u",cupidUserId:"i",passportId:"p",requestId:"s",timestamp:"h",encryption:{name:"e",type:"object",child:{episodeId:"b",albumId:"l",channelId:"k",cuepointList:{name:"q",type:"array",child:{cuepointType:"ct",adZoneId:"zi",startTime:"st",sequenceId:"si",requestAdDuration:"rd",keyword:"kw",limit:"lm",skip:"sk"}},referrer:"r",offline:"o",mobileKey:"t",userAgent:"m",continuingVideoPlayedCount:"n",continuingVideoPlayedDuration:"y",continuingAdPlayedDuration:"w",isVIP:"v",passportCookie:"pc",network:"nw",needPolicy:"po",encryptionVersion:"pv",isPreload:"pr",couponCode:"cc",couponVer:"mv",url:"ul",videoPlayedDurationInDay:"cd",adPlayedDurationInDay:"ca",midrollPointsPlayedInView:"nm",lastRollCompleteInterval:"in",lastMidrollRequestTime:"lm",clientVersion:"cv",sdkVersion:"sv",supportIQiyiTracking:"gt",supportEmptyTracking:"ea",searchQuery:"sq",prerollOrderItemIds:"poi",pauseRequestTimes:"pt",playSource:"ps",requestIndex:"rix",vvId:"veid",usePartnerData:"upd",ptid:"ptid",timePoint:"tp",vft:"vft",idx:"idx"}}},Bl=Hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Fl=Hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function Ul(e,t){t=jl(e,t);return Cl(t)}function jl(e,t){var i=Bl;((t=t||{}).useURL||null==t.useURL&&/[-_]/.test(e))&&(i=Fl),e=e.replace(/\s+$/,"").replace(/=+$/,"").replace(/[\n\r]/g,"");for(var n,r=bu.map(e.split(""),function(e){return~~i.decodeMap[e]}),a=[],o=0;o<r.length;o+=4){var s=(n=bu.slice(r,o,o+4),void 0,s=[],null!=n[3]&&(s[2]=((3&n[2])<<6)+n[3]),null!=n[2]&&(s[1]=((15&n[1])<<4)+((60&n[2])>>2)),null!=n[1]&&(s[0]=(n[0]<<2)+((48&n[1])>>4)),s);a.push.apply(a,s)}return a}function Vl(e,t){return Wl(Ml(e),t)}function Wl(e,t){var i=Bl;(t=t||{}).useURL&&(i=Fl);for(var n,r,a=[],o=0;o<e.length;o+=3)a.push.apply(a,(n=bu.slice(e,o,o+3),void 0,r=[],null==n[2]?r[3]=64:r[3]=63&n[2],null==n[1]?r[2]=64:r[2]=(15&n[1])<<2|n[2]>>6,r[1]=(3&n[0])<<4|n[1]>>4,r[0]=n[0]>>2,r));return(a=bu.map(a,function(e){return i.encodeMap[e]||"="})).join("")}function Hl(e){e=function(e){for(var t={},i=0;i<e.length;i++)t[i]=e.charAt(i);return t}(e);return{encodeMap:e,decodeMap:bu.invert(e)}}var zl={encode:Vl,btoa:Vl,decode:Ul,atob:Ul,encodeBytes:Wl,decodeToBytes:jl};function Yl(e,i){e=zl.decodeToBytes(e),e=bu.map(e,function(e,t){return e^i.charCodeAt(t%i.length)});return Cl(e)}function Gl(e,i){e=Ml(e),e=bu.map(e,function(e,t){return e^i.charCodeAt(t%i.length)});return zl.encodeBytes(e)}function Ql(e){var t=$l(e),e=Au(t),t=e.a,t=Yl(e.e,t);return e.e=Au(t),e}function Kl(e){var t=Ql(e),i=t.e||{},n=0,r=0,e=parseInt(i.b),i=parseInt(i.l),t=bu.last(t.a);return(n=100<e?parseInt(e/100%100):n)+"y"+t+"w"+(r=100<i?parseInt(i/100%100):r)}function $l(e){e=bu.split(e,"?");return bu.last(e)}function Zl(e,t){return function(e,t){t=bu.split(t,"");for(var i,n=Ml(e),r=Math.floor(n.length/2)-16,a=31;1<=a;--a){var o=n[r+a]%(a+1);a!=o&&(i=t[a],t[a]=t[o],t[o]=i)}return t.join("")}(t,Ol(t+"cupid_show2.0"+$l(e)))}var Xl={decryptBySeed:Yl,encryptBySeed:Gl,decryptShowRequestByUrl:Ql,decryptShowResponse:function(e,t){return Yl(t,Kl(e))},encryptShowResponse:function(e,t){return Gl(t,Kl(e))},getShowCheckSum:Zl,validateShowChecksum:function(e,t){var i,n=t.match(/,"c_c_":"(\w+)"/);return!(!n||(i=n[1],Zl(e,t.replace(n[0],""))!=i))}},Jl=qu({v:"version",ics:"ipCollectionServers",cl:"clientIP",de:"serverIP",set:"serverTime",ec:"errorCode",sr:"serverError",ar:"areaId",ui:"cupidUserId",ntc:"needTimeChecking",vmd:"vipMarketingDocuments",ci:"cacheIP",idc:"idc",ims:"ims",inv:{name:"inventory",type:"object",child:{fi:"forbiddenInventory",ri:"rawInventory",oi:"originalInventory",di:"deliveredInventory"}},vcc:{name:"vipCheckConflict",type:"object",child:{v:"isVIP",c:"code",m:"message"}},pbp:"pingbackParam",m:{name:"midrollPoints",type:"object",child:{ac:"autoChoose",nm:"nextMidroll"}},pc:"pingbackConfig",vcr:{name:"vipCheckResult",type:"object",child:{v:"isVIP",uvt:"userVipType"}},vdi:{name:"videoInfo",type:"object",child:{dsa:"disableSkipAd",vd:"videoDuration",ai:"albumId",vt:"videoType"}},s:{name:"slots",type:"array",child:{ctp:"cuepointType",az:"adZoneId",st:"startTime",kw:"keyword",ea:{name:"emptyTracking",type:"object",child:{tss:"timeSlices",trp:"trackingParam"}},a:{name:"ads",type:"array",child:{comment:"comment",o:"order",ori:"orderItemId",tp:"timeSlices",p:"priority",hkw:"hitKeywords",dtp:"deliverType",ipt:"impressionTime",skt:"skipTime",bge:"badge",h:"host",se:"settle",ta:"targetedAd",ug:"userGroup",ds:"isDSP",dsi:"dspId",dst:"dspType",dsc:"dspIcon",oet:"orderItemEndTime",msm:"macroSubstitutionMap",ies:{name:"ies",type:"array",child:{dm:"domain",msm:"macroSubstitutionMap"}},va:{name:"vast",type:"object",child:{vo:"vastObject"}},rp:{name:"replay",type:"object",child:{rpt:"replayTimes",bst:"replayShowTime",bct:"replayCloseTime"}},cr:{name:"creative",type:"object",child:{cra:"creativeId",crb:"creativeType",crc:"creativeTemplate",tt:"templateType",co:"creativeObject"}},clt:"clickThrough",ctt:"clickThroughType",ct:{name:"clickTracking",type:"object",child:{at:"exchangeTracking",ctc:"cupidTracking",tpt:"thirdPartyTracking"}},it:{name:"impressionTracking",type:"object",child:{at:"exchangeTracking",ctc:"cupidTracking",tpt:"thirdPartyTracking"}},et:{name:"eventTracking",type:"array",child:{ev:"event",tr:"trackings"}},qt:{name:"iqiyiTracking",type:"object",child:{ct:{name:"cupidTracking",type:"object",child:{evs:"events",trp:"trackingParam"}},at:{name:"exchangeTracking",type:"object",child:{evs:"events",trp:"trackingParam"}}}},st:"startTime",fc:{name:"fullCorner",type:"object",child:{si:"showInterval",sd:"showDuration"}},acc:"seekable",tot:"toast"}}}},c:{name:"policySlots",type:"array",child:{az:"adZoneId",ctp:"cuepointType",sts:"startTimes",du:"duration",azl:"adZoneStyle"}},c_c_:"couponCode",conf:{name:"conf",type:"object",child:{reqMiaozhenTime:"reqMiaozhenTime",miaozhenJsonPUrl:"miaozhenJsonPUrl"}}}),eh=(d(408),function(){this.version="1.3.4";var p={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},_=new RegExp(/(?!xmlns)^.*:/),g=new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){return this.parseXML(this.stringToXML(e),t)},this.parseXML=function(e,t){for(var i in t)p[i]=t[i];var n,r={},a=0,o="";if(p.xmlns&&e.namespaceURI&&(r[p.namespaceKey]=e.namespaceURI),e.attributes&&0<e.attributes.length){for(var s={};a<e.attributes.length;a++){var c=e.attributes.item(a),d={},u=p.stripAttrPrefix?c.name.replace(_,""):c.name;p.grokAttr?d[p.valueKey]=this.grokType(c.value.replace(g,"")):d[p.valueKey]=c.value.replace(g,""),p.xmlns&&c.namespaceURI&&(d[p.namespaceKey]=c.namespaceURI),p.attrsAsObject?s[u]=d:r[p.attrKey+u]=d}p.attrsAsObject&&(r[p.attrKey]=s)}if(e.hasChildNodes())for(var l,h,d,f=0;f<e.childNodes.length;f++)4===(l=e.childNodes.item(f)).nodeType?p.mergeCDATA?o+=l.nodeValue:r.hasOwnProperty(p.cdataKey)?(r[p.cdataKey].constructor!==Array&&(r[p.cdataKey]=[r[p.cdataKey]]),r[p.cdataKey].push(l.nodeValue)):p.childrenAsArray?(r[p.cdataKey]=[],r[p.cdataKey].push(l.nodeValue)):r[p.cdataKey]=l.nodeValue:3===l.nodeType?o+=l.nodeValue:1===l.nodeType&&(0===a&&(r={}),h=p.stripElemPrefix?l.nodeName.replace(_,""):l.nodeName,d=eh.parseXML(l),r.hasOwnProperty(h)?(r[h].constructor!==Array&&(r[h]=[r[h]]),r[h].push(d)):(p.childrenAsArray?(r[h]=[],r[h].push(d)):r[h]=d,a++));else o||(p.childrenAsArray?(r[p.textKey]=[],r[p.textKey].push(null)):r[p.textKey]=null);return o&&(p.grokText?null!=(n=this.grokType(o.replace(g,"")))&&(r[p.textKey]=n):p.normalize?r[p.textKey]=o.replace(g,"").replace(/\s+/g," "):r[p.textKey]=o.replace(g,"")),r},this.xmlToString=function(e){try{return e.xml||(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}.call({})),th=eh,ih=bu.is;function nh(e){return e&&e instanceof Array?e[0]:e}function rh(e){return e&&e instanceof Array?e:[e]}function ah(e){return e&&e["#text"]&&e["#text"][0]?e["#text"]:""}function oh(e,t){return e&&e.attr&&e.attr[t]&&e.attr[t]._value}var sh={"image/jpeg":{extensions:["jpg","jpeg","jpe"]},"image/gif":{extensions:["gif"]},"image/png":{extensions:["png"]},"image/webp":{extensions:["webp"]},"application/x-shockwave-flash":{extensions:["swf"]},"video/mp4":{extensions:["mp4","mp4v","mpg4"]},"video/x-flv":{extensions:["flv"]},"video/x-f4v":{extensions:["f4v"]},"video/webm":{extensions:["webm"]},"text/html":{extensions:["html","htm","shtml"]}};function ch(e){return e=dh(e),bu.includes(e,"image")?"image":bu.includes(e,"flash")?"swf":bu.includes(e,"video")?"video":bu.includes(e,"html")?"html":void 0}var dh=function(e){if(e=Ll(e)){e=function(e){e=(e+="").split(".");return"."+bu.last(e)}(e.pathname);return i=e=bu.slice(e,1),function(t){t=bu.lower(i);var e=bu.keys(sh);return bu.find(e,function(e){return bu.includes(sh[e].extensions,t)})}()}var i},uh=(c()(lh,[{key:"init",value:function(){this._timerIdMap={timeout:{},interval:{}}}},{key:"run",value:function(){function e(){t.setIdMap(s,i,e),a()-o>=r&&("interval"===i&&(o=a()),n(),"timeout"===i&&t.clearTimeout(s))}var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"interval",n=1<arguments.length?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16.7,a=Date.now,o=a(),s=[a(),Math.random()].join("");return this.setIdMap(s,i,e),s}},{key:"setIdMap",value:function(e,t,i){i=requestAnimationFrame(i);this._timerIdMap[t][e]=i}},{key:"setTimeout",value:function(e,t){return this.run("timeout",e,t)}},{key:"clearTimeout",value:function(e){cancelAnimationFrame(this._timerIdMap.timeout[e])}},{key:"setInterval",value:function(e,t){return this.run("interval",e,t)}},{key:"clearInterval",value:function(e){cancelAnimationFrame(this._timerIdMap.interval[e])}}]),lh);function lh(){f()(this,lh),this.init()}var hh=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),(i=r.call(this)).repeatCount=t||1/0,i.interval=e,i.reset(),i.raf=new uh,i}return c()(a,[{key:"reset",value:function(){this.stop(),this.currentCount=0}},{key:"stop",value:function(){this.running&&(this.raf.clearInterval(this.timer),this.timer=null),this.running=!1}},{key:"start",value:function(){var e=this;e.running||(e.timer=this.raf.setInterval(function(){e.currentCount++,e.emit("timer"),e.currentCount==e.repeatCount&&(e.emit("timerComplete"),e.stop())},e.interval)),e.running=!0}}]),a}(K);hh.interval=function(e,t,i){i=new hh(t,i);return i.on("timer",e),i.start(),i},hh.timeout=function(e,t){return hh.interval(e,t,1)};var G=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),(i=r.call(this)).type=e,i.ad=t,i.creativeObject=t.creative.creativeObject,i.vv=t.getParentByName("vv"),i.log=i.vv.sdk.logger.getLogger(e+":"+t.id),i.$adContainer=i.vv.mw.adcontainer(),i.$adzone=document.createElement("div"),t.$adzone=i.$adzone,t.$adzone.setAttribute("data-adzone",t.slot.adZoneId),i}return c()(a,[{key:"emitCreativeError",value:function(e,t){var i=this.ad;"timeout"==e?i.emit("error",{data:{creativeUrl:t},message:"creative timeout"}):i.emit("error",{data:{creativeUrl:t},message:"creative http error"})}},{key:"loadImage",value:function(t,e){var i=this;return e=e||3e4,"image/gif"==dh(t)&&(t=t+"?"+Date.now()),rl(t,e).catch(function(e){return"timeout"===e?i.emitCreativeError("timeout",t):i.emitCreativeError("error",t),Promise.reject(e)})}},{key:"initProgress",value:function(){var e,t=this,i=t.ad,n=bu.once(function(){t.timer&&t.timer.stop(),t.timer=null,t.ad.emit("complete",{type:"timer-complete"})}),r=t.getDuration();0<r&&1/0!=r&&((e=t.timer=new hh(1e3,r)).on("timer",function(){i.remain=i.duration-e.currentCount,t.updateCountdown()}),e.on("timerComplete",n),e.reset(),e.start())}},{key:"fakeHide",value:function(){this.$adzone.style.position="absolute",this.$adzone.style.width="600px",this.$adzone.style.height="300px",this.$adzone.style.top="10px",this.$adzone.style.left="10px",this.$adzone.style.display="",this.$adzone.style.visibility="hidden"}},{key:"putOnDocument",value:function(){this.$adzone.style.position="absolute",this.hasPutOnDoc||("viewPoint"!=this.type&&this.$adzone.appendChild(this.creativeElement),this.$adzone.parentNode||(this.$adContainer.appendChild(this.$adzone),this.hasPutOnDoc=!0))}},{key:"tryAddStyle",value:function(e){var t=this;this.vv.sdk.setViewController(function(){e&&e(),t.addStyle()})}},{key:"addClickEvt",value:function(){var e=this;e.clickHandler=function(){e.ad.emit("clickAndOpen")},e.$adzone&&e.$adzone.addEventListener("click",e.clickHandler)}},{key:"addStyle",value:function(){var e=this,t=e.vv.sdk.viewController;e.$adzone.setAttribute("adId",e.ad.id),e.$adzone.setAttribute("templateType",e.type),0!=e.creativeObject.isCloseable&&t.addCloseBtn(e);var i=!!e.creativeObject.needAdBadge,n=e.option||{};n.type=e.template,i&&t.addAdBadge(e.$adzone,n);n=!!e.creativeObject.showMuteButton;"video"==e.creativeObject.renderType&&n&&t.addVolumnBtn(e)}},{key:"destroyAdzone",value:function(){var e=this.ad;"roll"==this.type||(this.log("destroy adzone"),e.$adzone.parentNode&&e.$adzone.parentNode.removeChild(e.$adzone),e.$adzone.removeEventListener("click",this.clickHandler),e.$adzone.innerHTML="",e.$adzone.setAttribute("data-adzone",""))}},{key:"updateCountdown",value:function(){var e,t=this.ad;if(this.onFirstPlaying(),e=t.remain,this.log("countdown",t.remain+"/"+t.duration),e<0)return this.log("countdown < 0 "),void t.abort()}},{key:"pause",value:function(){this.log("pause"),this.timer&&this.timer.stop()}},{key:"resume",value:function(){this.log("resume"),this.timer&&this.timer.start()}},{key:"stop",value:function(){this.log("stop"),this.timer&&this.timer.stop(),this.timer=null,this.isStopped=!0,this.destroyAdzone()}},{key:"reset",value:function(){this.isStopped=!1,this.hasPlaying=!1}},{key:"resize",value:function(){}},{key:"abort",value:function(){}},{key:"getDuration",value:function(){return 1/0}},{key:"detectCollision",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).willDefinitelyCollide,t=this.ad,i=(this.$adzone||{}).style,n=this.vv.adCollisionDetection,e={id:t.id,x:i.left.replace("px",""),y:i.top.replace("px",""),width:i.width.replace("px",""),height:i.height.replace("px",""),willDefinitelyCollide:e};n.addAdIntoCollisingList(e),n.notifyWholeCornerToHide()}}]),a}(K),fh=bu.is,ph={1:300,2:600,3:1126.4,4:1536,5:3072,10:8192,96:170},_h=bu.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}),gh={impression:0,click:1,push:2,trueview:3,start:10,firstQuartile:11,midpoint:12,thirdQuartile:13,complete:14,downloadStart:20,downloaded:21},yh={"1q":"firstQuartile",mid:"midpoint","3q":"thirdQuartile",stop:"complete",sp:"complete"},vh=bu.is,ie="https://t7z.cupid.iqiyi.com",mh=qu({type:"a",timestamp:"b",videoEventId:"r",securityCode:"s",md5Version:"ve",uploadId:"up",clientVersion:"cv",sdkVersion:"sv",startTime:"st"}),bh=(c()(kh,[{key:"init",value:function(e){return this.compressedParam={},this.uncompressedParam={},this.trackingParam={},e instanceof xu&&(this.context=e),this}},{key:"addCompressedParam",value:function(e){return bu.extend(this.compressedParam,e),this}},{key:"addUncompressedParam",value:function(e){return bu.extend(this.uncompressedParam,e),this}},{key:"addTrackingParam",value:function(e){return bu.extend(this.trackingParam,e),this}},{key:"setType",value:function(e){e="exchange"==e;return this.isExchange=e,this.type="cupid",e&&(this.type="exchange"),this}},{key:"addFrontendParam",value:function(){var e={md5Version:1},t=this.context;return t&&(e.uploadId=t.getVal("uploadId"),e.clientVersion=t.getVal("clientVersion"),e.sdkVersion=t.getVal("sdkVersion"),e.videoEventId=t.getVal("vvId"),e.startTime=t.getVal("startTime")||0),this.addUncompressedParam(e),this}},{key:"mergeUncompressedParam",value:function(){var e=mh(this.uncompressedParam);return this.addCompressedParam(e),this}},{key:"setEvent",value:function(e){return this.eventName=kh.normalizeEventName(e),this.eventCode=kh.getEventCodeByName(this.eventName),this.compressedParam.a=this.uncompressedParam.type=this.eventCode,this}},{key:"encryptParam",value:function(){var e=kh.encryptCupid;return(e=this.isExchange?kh.encryptExchange:e)(this.compressedParam,this.context,this.trackingParam),this}},{key:"getUrl",value:function(){var e=kh.cupidUrl,t="";this.isExchange&&(e=kh.exchangeUrl);var i=this.compressedParam||{},n=this.trackingParam||{},r={};return bu.forIn(i,function(e,t){bu.has(n,t)||(r[t]=e)}),vh.empty(n)||(t="&"+Eu(n,"&","=",{keepRaw:!0})),e=e+"?"+Eu(r)+t,this.url=e,this}},{key:"_send",value:function(i){var n=this,e=function(){};(e=n.context?n.context.getParentByName("sdk").logger.getLogger("qiyitracking"):e)("send",n.type,n.eventName),e("verbose send",n.type,n.eventName,n.uncompressedParam,n.compressedParam,n.trackingParam);var r=Date.now(),t=n.url;return e("url",t=/https/i.test(window.location.protocol)?t.replace(/^http:/,"https:"):t),ul({url:t,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,success:function(e,t){n.response={textStatus:t,duration:Date.now()-r,data:e},i()},error:function(){n.response={textStatus:"timeout",duration:Date.now()-r,data:"error"},i()},complete:function(e,t){"timeout"==t&&(n.response={textStatus:t,duration:Date.now()-r,data:"error"},i())}}),n}},{key:"send",value:function(e){return this.addFrontendParam().mergeUncompressedParam().encryptParam().getUrl()._send(e)}},{key:"sendPingback",value:function(e){var t={pingbackType:"tracking",subtype:"success",requestCount:-1},i=this.response,n=function(){};this.context&&(n=this.context.getParentByName("sdk").logger.getLogger("qiyitracking")),bu.includes(i.data,"ok")?(n("response success",i),t.requestDuration=i.duration):(n("error",i),t.subtype="error",r=601,"timeout"==i.textStatus?r=602:"success"!=i.textStatus&&(r=603)),this.isExchange?(t.pingbackType="exchange",vh.number(r)&&(r+=500)):this.isQixiao&&(t.pingbackType=void 0,vh.number(r)&&(r+=900)),t.errorCode=r;var r=this.context;"slot"==this.context.ContextName&&(r={slot:this.context}),t.adInfo=tl(r),cl(this.context,t,e)}}],[{key:"getEventCodeByName",value:function(e){return gh[e]}},{key:"normalizeEventName",value:function(e){return yh[e]||e}},{key:"encryptCupid",value:function(t,e,i){var n=Date.now();e&&(n+=e.getVal("deltaTime")||0),t.b=parseInt(n/1e3);n=bu.map("a b c d r".split(" "),function(e){return(null==t[e]||null==t[e]?i:t)[e]});t.s=Ol(n.join("")+"cupid")}},{key:"encryptExchange",value:function(t,e,i){var n=Date.now();e&&(n+=e.getVal("deltaTime")||0),t.b=parseInt(n/1e3);n=bu.map("a v b c r d q".split(" "),function(e){return(null==t[e]||null==t[e]?i:t)[e]});t.s=Ol(n.join("")+"qax-track")}},{key:"send",value:function(e,t,i,n,r){var a=new kh;a.init(i).addTrackingParam(t).addUncompressedParam(e).setType(n).setEvent(r).send(function(){a.sendPingback()})}}]),kh);function kh(){f()(this,kh)}bh.cupidUrl=ie+"/track2",bh.exchangeUrl=ie+"/etx";var xh=bu.is;function Sh(r,a,o){a=a||"",a=bu.trim(a);var s,e,t,i,n,c=(e=(c=r).getVal("userIP"),t=c.getVal("cupidUserId"),i=c.getVal("uaaUserId"),n=c.getVal("requestId"),h=c.getVal("clickArea"),l=c.getVal("trueviewSource"),{"[UDID]":t,"[M_IDFA]":i,"[IDFA]":t,"[IQIYI_HCID]":t,"[IQIYI_FCID]":i,"[QIYI_ID]":i,__UDID__:t,__IP__:e,"[M_ADIP]":e,"[M%5fADIP]":e,__QRID__:n,__REQUESTID__:n,"[QIYI_AUTHCOOKIE]":c.getVal("passportCookie"),"[IQIYI_OFFSET]":c.getPlayedTime(),CUPID_IAP:"1_10_101",CUPID_CLA:h,CUPID_TRS:l}),d={},u=!0;bu.each(bu.compact(r.ies),function(e){if(bu.some(e.domain,function(e){return t=e,!((i=Ll(a)).hostname!=t&&!bu.endsWith(i.hostname,"."+t)||(s=e,0));var t,i}))if(isNaN(o))u=!0,d=bu.extend(d,e.macroSubstitutionMap);else{var t=s+"_"+o;if(r.iesKeyReplaced[t])return u=!1;var i,n=bu.extend({},e.macroSubstitutionMap);for(i in n)n[i]=n[i]+"_"+o;d=bu.extend(d,n)}});var l,h=a;u&&!xh.empty(d)&&(h=Th(h,d,!0),r.debug("replace url macro",a,h),h!==a)&&(l=s+"_"+o,r.iesKeyReplaced[l]=!0),a=Th(h,c,!0);var c,c=(h=r,c=Date.now(),h=h.getVal("deltaTime"),xh.integer(h)&&(c+=h),c);return a=Th(a,{"[timestamp]":c=c||Date.now(),"[M_timestamp]":c,"[TIMESTAMP]":c,"[randnum]":c,__timeStamp__:c,__TS__:c},!0)}function Th(i,e,n){return bu.forIn(e,function(e,t){i=function e(t,i,n,r){{var a,o;t&&i&&(a=t.split(i),n=bu.tostr(n),t=a.join(n),r&&(o=encodeURIComponent(i))!=i&&(t=e(t,o,n)))}return t}(i,t,e,n)}),i}var Ph=(c()(Eh,[{key:"sendAll",value:function(){this.sendCupid(),this.sendExchange(),this.sendThirdParty()}},{key:"sendCupid",value:function(){var e,t=this.context;"ad"==t.contextName&&(e=bu.get(t,"iqiyiTracking.cupidTracking")||{},bu.includes(e.events,this.eventCode)&&(e=e.trackingParam,bh.send({},e,t,"cupid",this.eventName)))}},{key:"sendExchange",value:function(){var e,t=this.context;"ad"==t.contextName&&(e=bu.get(t,"iqiyiTracking.exchangeTracking")||{},bu.includes(e.events,this.eventCode)&&(e=e.trackingParam,bh.send({},e,t,"exchange",this.eventName)))}},{key:"sendThirdParty",value:function(){var n=this,e=n.getThirdParty(),r=n.context.getVal("pingbackConfig")||{},a=n.context.getParentByName("sdk").logger.getLogger("tracking"),o=bu.keys(r);bu.each(e,function(t){a("send","thirdParty",n.eventName,t);var e,i=bu.find(o,function(e){return bu.startsWith(t,e)});i?(a("match pingback config",i),(e=new bh).context=n.context,e.url=t,e.isQixiao=!0,e._send(function(){e.sendPingback(r[i])})):el(t)})}},{key:"getThirdParty",value:function(){var i=this,n=i.context;if("ad"!=n.contextName)return[];var e=i.eventName,t=bu.get(n,e+"Tracking.thirdPartyTracking"),e=bu.get(n,["eventTracking",e]),e=bu.compact(bu.union(t,e));return bu.map(e,function(e){return t=i.eventCode,bu.trim(Sh(n,e,t));var t})}}],[{key:"send",value:function(e,t){new Eh(e,t).sendAll()}}]),Eh),Ih="postMessage"in window,wh=(c()(Ah,[{key:"aresToEos",value:function(){var t=this;Ih||(t.element.contentWindow.navigator.eosMessage=function(e){t.callback(e)})}},{key:"listen",value:function(e){this.callback=e||function(){},Ih&&window.addEventListener("message",this.callback,!1)}},{key:"send",value:function(e){Ih?this.element.contentWindow.postMessage(e,"*"):(0,window.navigator.eosMessage)({data:e})}}]),Ah);function Ah(e){f()(this,Ah);this.type=(e=e||{}).type,this.callback=null,this.element=e.element,this.aresToEos()}function Eh(e,t){f()(this,Eh);e instanceof xu&&(this.context=e),this.eventName=bh.normalizeEventName(t),this.eventCode=bh.getEventCodeByName(this.eventName)}n=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),(e=r.call(this,e,t)).mw=e.vv.mw,e.$video=e.vv.mw.video(),e.isOutVideo=!1,e.isRatioFixed=!0,e.canExpand=!0,"roll"==e.type&&(e.renderType="roll",t.$adzone=e.$adzone=e.$adContainer),e.creativeUrl=e.creativeUrl||e.creativeObject.url,e.renderType=e.renderType||ch(e.creativeObject.url),"mraid"==e.type&&(e.creativeMode="Interactive"),e.hasPlaying=!1,e.size={},e.isSkippableAd="skippable"==t.deliverName(),e.showGuide=!1,e}return c()(a,[{key:"load",value:function(){var a=this,o=this.ad;return"mraid"==a.type&&a.vv.mw.isFullScreen()&&a.vv.exitFullscreen(),new Promise(function(e,t){if(a.isStopped)return t(new Error("has ended"));var i,n,r;a.trySetCrazyMode(),a.log("load"),"roll"==a.renderType?(n=a.vv,i="mp4",/data/i.test(n.mw.getEngineType())&&(i="f4v"),(n=function(r,e,a){r=r||{};var o=ph[e]||1024,t=bu.map(_h,function(e){var t=-1,i=e.key,n=r[i];return a==e.videoFormat&&(n=r[i],fh.empty(n)||(t=2e3+(e.priority||0),o>=e.minBandwidth?t+=e.minBandwidth:t+=1/e.minBandwidth)),bu.extend({score:t,video:n},e)}),i=bu.max(t,function(e){return e.score});if(0<i.score){var n="g",t=i.minBandwidth;return t<=170?n="b":1536<t&&(n="c"),i.videoDefinition=e,i.definitionLevel=n,i}}(o.creative.creativeObject,n.videoDefinition,i))?(a.log("matched ad video",n),r=(o.matchedVideo=n).video,"mp4"==i&&(r+="?pv=0.2"),a.creativeUrl=o.creativeUrl=r,e()):(r=new Error("fail to match ad video",o.creative.creativeObject),o.emit("error",r),t(r))):"html"==a.renderType?(e(a.loadMraid()),o.error||o.emit("creativeLoad")):t(new Error("unknown template render type"))})}},{key:"bindPlayingEvt",value:function(){var n=this.ad,r=this;"roll"==r.renderType&&n.on("video-playing",function e(){var t=n.slot.ads[n.index()-1],i=!0;t&&("ended"==t.state||t.error||n.error||(i=!1)),i||n.slot.isSeekableOriginalSlot()?(r.onFirstPlaying(),n.off("video-playing",e)):r.log("invalid playing")})}},{key:"loadRollToVideo",value:function(){var e,n=this.ad,t=this.vv.mw,r=this;"roll"==r.renderType&&(n.on("video-playing",function e(){var t=n.slot.ads[n.index()-1],i=!0;t&&("ended"==t.state||t.error||n.error||(i=!1)),i?(r.onFirstPlaying(),n.off("video-playing",e)):r.log("invalid playing")}),(e={file:r.creativeUrl,id:n.id,type:n.typeName(),seekable:Boolean(n.seekable)||15==n.slot.cuepointType,offset:parseInt(n.slot.startTime),videoEventId:r.vv.videoEventId,duration:n.duration}).file=e.file.replace(/\.qiyi\.com/,".iqiyi.com"),e.file=e.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),this.log("video load",e,e.videoEventId,n.slot.startTime),t.load(e),0===n.index()&&(n.getParentByName("sdk").loadEndTime=Date.now()))}},{key:"loadMraid",value:function(){var o=this;return new Promise(function(t,i){var e=document.createElement("iframe");e.setAttribute("scrolling","no"),e.setAttribute("frameborder",0),e.style.width="100%",e.style.height="100%",o.creativeElement=e,o.fakeHide(),o.putOnDocument();function n(e){if(e=e.data){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void o.log("parse data error",e)}e.key==o.msgKey&&("clickandopen"==e.type||"interactive"==e.type?(o.ad.hasInteracted||(o.ad.hasInteracted=!0),"clickandopen"==e.type&&o.ad.emit("clickAndOpen",e.data)):"error"==e.type&&o.log("mraid creative error",e.data))}}function r(){var e;clearTimeout(a);try{e=o.creativeElement.contentDocument}catch(e){o.log("html creative can not get contentDocument:",e)}e&&0<e.getElementsByTagName("cupid-iframe").length?(o.message=new wh({type:"mraid",element:o.creativeElement}),o.message.listen(n),t()):(o.log("html creative load error"),o.emitCreativeError("error",o.creativeUrl),i(new Error("creative error")))}var a=setTimeout(function(){o.creativeElement.removeEventListener("load",r),o.log("mraid html creative load error timeout"),o.emitCreativeError("error",o.creativeUrl),i(new Error("creative error"))},1e4);o.creativeElement.addEventListener("load",r);e=o.creativeUrl.replace(/^(https:|http:)/,"")+"?isMute=1&domain="+document.domain;o.creativeElement.setAttribute("src",e)})}},{key:"onFirstPlaying",value:function(){var e,t,i,n=this;n.hasPlaying||(n.hasPlaying=!0,i=(e=n.ad).slot,t=1<e.order?e.slot.ads[e.order-2]:null,n.vv.stopVideo(n.ad.typeName()),e.isSeekableOriginalRoll()&&n.vv.schedule&&n.vv.schedule.bindAfterSeekedEvt(),e.remain=e.duration,n.log("on first playing"),e.emit("impression"),n.slotDuration=Dh(e.slot.ads),i.hasSkippableAdInSlot&&(n.skippableDuration=qh(e.slot.ads)),n.initProgress(),"brief"==(i=e.deliverName())&&e.toast&&e.getParentByName("sdk").emit("adplayer_showtip",{des:e.toast,time:2}),"vip"==i||"origin"==i||"sports-vip"==i||"brief"==i||"overlay-brief"==i||("skippable"==i?i=t&&"skippable"==t.deliverName()?"skippable-after":"skippable-before":"trueView"==i?i="trueview-before":"roll"==n.type?i="normal":"mraid"==n.type&&(i="rolllike")),n.setVideoOptions(i,e,!0))}},{key:"initProgress",value:function(){var i=this,n=i.ad,r=i.vv.mw;n.quartiles=[{position:.25,event:"1q"},{position:.5,event:"mid"},{position:.75,event:"3q"},{position:1,event:"sp"}];var a,e=i.isSkippableAd?n.duration+5:n.duration,t=bu.once(function(){i.timer&&i.timer.stop(),i.timer=null,bu.remove(n.quartiles,function(e){return Ph.send(n,e.event),n.emit("pingback",{subtype:e.event}),!0});var e=r?r.duration()-r.currentTime():0,t=i.ad.hasPlayed&&"origin"==n.deliverName()&&Boolean(n.seekable)?"replayComplete":"complete";n.slot.isSeekableOriginalSlot()?setTimeout(function(){i.ad.emit(t,{type:"timer-complete"})},500):0<e&&e<1?setTimeout(function(){i.ad.emit(t,{type:"timer-complete"})},1e3):i.ad.emit(t,{type:"timer-complete"})});0<e&&!i.timer&&((a=i.timer=new hh(1e3,e)).on("timer",function(){n.remain=n.duration-a.currentCount,i.updateCountdown(),i.vv.adPlayedDurationInView++,bu.remove(n.quartiles,function(e){var t=Math.round(n.duration*e.position);if(a.currentCount==t)return i.log("match quartile",e.event,a.currentCount),Ph.send(n,e.event),n.emit("pingback",{subtype:e.event}),"sp"==e.event&&i.isSkippableAd&&n.sendPlayDurationPingback(n.duration),!0})}),a.on("timerComplete",t),a.reset(),a.start()),n.on("video-ended",function(){t()})}},{key:"play",value:function(){var i=this;return new Promise(function(e,t){if(i.log("ready play roll"),i.isStopped)return t("ended");if("roll"==i.renderType)return i.detectCollision({willDefinitelyCollide:!0}),e();if(i.vv.sdk.emit("single_ad_start",{type:"rollLike"}),i.log("rollLike start play"),i.vv.isCurrentVV&&i.vv.disableVideo(),i.vv.schedule.setCurrentAd(i.ad.id),i.$adzone.style.zIndex="3000",i.vv.mw.isFullScreen()&&i.vv.exitFullscreen(),i.ad.clickThrough&&(i.$adzone.style.cursor="pointer"),i.creativeElement.style.width="100%",i.creativeElement.style.height="100%",i.creativeElement.style.visibility="",i.creativeElement&&i.creativeElement.contentWindow&&i.message){i.msgKey=i.vv.videoEventId+Date.now();try{i.message.send(JSON.stringify({type:"ready",key:i.msgKey}))}catch(e){i.log("stringify data error",e),t(e)}}Oh(i.$adzone),Oh(i.$adContainer),i.resize(!0),i.onFirstPlaying(),e()})}},{key:"resume",value:function(){return this.log("resume"),this.timer&&this.timer.start(),this.midrollTip&&this.midrollTip.start(),Promise.resolve()}},{key:"pause",value:function(){this.log("pause");var e=this.vv.sdk,t="";e.rollView&&(t=e.rollView.options&&e.rollView.options.theme),!this.timer||this.isSkippableAd&&bu.includes(t,"guide")||this.timer.stop()}},{key:"updateCountdown",value:function(){var e=this,t=e.ad;e.onFirstPlaying();var i,n,r=t.slot,a=r.ads,o=e.isSkippableAd?t.remain+5:t.remain,s=e.isSkippableAd?t.duration+5:t.duration;a.length<=1?n=o:(n=o+Dh(c=bu.slice(a,t.index()+1)),e.log("countdown",o+"/"+s,n+"/"+e.slotDuration),r.hasSkippableAdInSlot&&(i=o+qh(c)+5));var c,d,u,l,o=e.vv.sdk;o.viewController&&o.rollView&&0<=n&&(c="mraid"==e.type&&e.ad.hasInteracted,o.rollView.updateCountdown(n,c)),r.hasSkippableAdInSlot&&!e.isSkippableAd&&o.viewController&&o.rollView&&(e.log("skippable countdown",i+"/"+e.skippableDuration),o.rollView.updateSkippableCountdown(i)),"trueView"==t.deliverName()&&((d=t.duration-t.remain)>=t.impressionTime&&t.emit("trueview"),o.rollView&&(l=o.rollView.options&&o.rollView.options.theme,bu.includes(l,"before")&&((u=t.skipTime-d)<=0?(e.log("trueview can skip now"),o.rollView.trySetOptions({theme:"trueview-after",ad:t}),o.rollView.updateCountdown(n)):(e.log("trueview countdown",u+"/"+t.skipTime),o.rollView.updateTrueViewCountdown(u))))),e.isSkippableAd&&(l=t.duration-t.remain,d=e.mw.duration()-e.mw.currentTime(),l>=t.impressionTime&&t.emit("trueview"),o.rollView&&(u=o.rollView.options&&o.rollView.options.theme,bu.includes(u,"before")&&((l=5-l)<=0?(e.log("skippable can skip now"),o.rollView.trySetOptions({theme:"skippable-after",ad:t}),o.rollView.updateCountdown(n)):(e.log("skippable countdown",l+"/"+e.skippableDuration),o.rollView.updateSkippableCountdown(l))),1<=d&&t.remain<=0&&!e.showGuide&&(e.showGuide=!0,e.loadGuide())))}},{key:"setVideoOptions",value:function(e,t,i){var n=this,r=n.vv.sdk;r.setViewController(function(){r.rollView.trySetOptions({theme:e,ad:t}),i&&r.rollView.setVipTitle(e,n),n.updateCountdown()})}},{key:"trySetCrazyMode",value:function(){var e;"mraid"==this.type&&(e=this.vv.mw.isFullScreen(),this.isOutVideo=!1,this.isRatioFixed=!1,e&&(this.canExpand=!1))}},{key:"resize",value:function(){var e,t=this;t.isStopped||((e=t.size).videoWidth=t.$video.offsetWidth,e.videoHeight=t.$video.offsetHeight,t.setPosition(),t.$adzone.style.width=e.videoWidth+"px",t.$adzone.style.height=e.videoHeight+"px",t.$adzone.style.top=e.y,t.$adzone.style.left=e.x,t.detectCollision({willDefinitelyCollide:!0}))}},{key:"setPosition",value:function(){var e=this.size,t=this.vv.mw,i=(t.width()-this.$video.offsetWidth)/2,t=(t.height()-this.$video.offsetHeight)/2;e.x=i,e.y=t}},{key:"stop",value:function(e){var t=this;t.log("stop template",e=e||{}),t.timer&&t.timer.stop(),t.timer=null,t.isStopped=!0,t.message=null,t.destroyAdzone(),"roll"==t.type&&e.abort&&t.vv.isCurrentVV()&&t.vv.schedule.getCurrentAd()==t.ad&&(t.isSkippableAd&&t.vv.mw.play(),t.log("force abort video"),t.vv.mw.abort()),t.vv.schedule.getCurrentAd()==t.ad&&t.setVideoOptions(),"mraid"==t.type&&(t.vv.schedule.removeCurrentAd(),t.vv.sdk.emit("single_ad_end",{type:"rollLike"}),t.log("rollLike stop"),t.vv.isCurrentVV()&&t.vv.enableVideo())}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e=(e=e||NaN)&&e!=1/0?parseInt(e):e}},{key:"loadGuide",value:function(){var e,t=this.mw,i=this.ad,n=i.slot.ads,r=this.vv.sdk,a=this.isSkippableAd?i.remain+5:i.remain,o=this.isSkippableAd?i.duration+5:i.duration;n.length<=1?e=a:(e=a+Dh(bu.slice(n,i.index()+1)),this.log("countdown",a+"/"+o,e+"/"+this.slotDuration)),r.setViewController(function(){r.rollView.updateCountdown(e),r.rollView.trySetOptions({theme:"skippable-guide",ad:i})}),t.pause()}}]),a}(G);function Dh(e){return bu.reduce(e,function(e,t){return"skippable"==t.deliverName()?e+t.duration+5:e+t.duration},0)}function qh(e){return bu.reduce(e,function(e,t){return"skippable"==t.deliverName()?e:e+t.duration},0)}function Oh(e){e.style.display="",e.style.visibility=""}r=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){return f()(this,a),r.call(this,e,t)}return c()(a,[{key:"load",value:function(){var e=this.ad,t=this.vv;e.creative.creativeObject.url=nl(e.creative.creativeObject.url);e=bu.extend({id:e.id,orderItemId:e.orderItemId,adZoneId:e.slot.adZoneId,templateType:e.creative.templateType,startTime:e.slot.startTime},e.creative.creativeObject);return t.sdk.emit("adplayer_ad_info",{type:"definitionSwitchingAd",data:{definitionSwitchingAd:e,tvId:t.episodeId,videoEventId:t.videoEventId}}),this.log("notify player definitionSwitchingAd",e),Promise.resolve()}},{key:"play",value:function(){return Promise.resolve()}}]),a}(G);y=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){f()(this,a);e=r.call(this,e,t),t=l()(e);return t.isRatioFixed=!0,t.canExpand=!0,t.creativeUrl=t.creativeUrl||t.creativeObject.url,t.renderType=t.renderType||ch(t.creativeUrl),t.isSuperShow=!!t.creativeObject.actUrl,t.size={},bu.includes(["image","html","video"],t.renderType)||t.ad.emit("error",new Error("unknown render type: "+t.creativeUrl)),t.hasPlaying=!1,t.hasPutOnDoc=!1,t.hasOpenVolumn=!1,e}return c()(a,[{key:"load",value:function(){var i=this,n=i.ad;return new Promise(function(e,t){i.isStopped&&t(new Error("has ended")),i.log("load"),"image"==i.renderType?e(i.loadImage(i.creativeUrl,5e3).then(function(e){i.creativeElement=e,i.size.creativeRawWidth=e.width,i.size.creativeRawHeight=e.height})):"html"==i.renderType?e(i.loadHtml()):"video"==i.renderType&&e(i.loadVideo()),n.error||n.emit("creativeLoad")})}},{key:"loadVideo",value:function(){var f=this;return new Promise(function(e,t){var i=document.createElement("video");i.style.width="100%",i.style.height="100%",i.setAttribute("preload","auto"),i.muted=!0,f.creativeElement=i;var n=f.creativeObject.playCount||1;f.fakeHide();var r=setTimeout(function(){f.creativeElement.removeEventListener("loadstart",a),f.log("video creative load error timeout"),f.emitCreativeError("timeout",f.creativeUrl),t(new Error("creative error"))},15e3),a=function(){var e;f.log("video pause load start");try{e=f.creativeElement}catch(e){f.log("video creative can not get contentDocument:",e)}e?(e.addEventListener("click",u),e.addEventListener("ended",s),e.addEventListener("error",c),e.addEventListener("canplay",d)):(f.log("video creative load error"),f.emitCreativeError("error",f.creativeUrl),t(new Error("creative error")))},o=1,s=function(){f.log("current play ended",o+"/"+n),o<n?(this.currentTime=0,this.play(),o++):(this.pause(),f.ad.emit("complete"))},c=function(){f.log("video creative load error"),f.emitCreativeError("error",f.creativeUrl),t(new Error("creative error"))},d=function(){clearTimeout(r),f.size.creativeRawWidth=f.creativeObject.width,f.size.creativeRawHeight=f.creativeObject.height,f.log("current play count",o+"/"+n),e()},u=function(){f.ad.emit("click")},l=f.creativeUrl,h=Ll(l),i=function(){if(document.createElement("video").canPlayType){var e=document.createElement("video"),t=e.canPlayType('video/ogg; codecs="theora, vorbis"');if(t)return"probably"==t;e=e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');return!!e&&"probably"==e}return!1}();i&&/.+\.mp4$/.test(h.href)?(f.creativeElement.addEventListener("loadstart",a),h.query&&!/pv=0.2/.test(h.query)?l+="&pv=0.2":h.query||(l+="?pv=0.2"),l=(l=l.replace(/^(https:|http:)/,"")).replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),f.creativeElement.setAttribute("src",l),f.putOnDocument()):(f.log("browser support error or video format error",i),f.emitCreativeError("error",f.creativeUrl),t(new Error("creative error")))})}},{key:"loadHtml",value:function(){var a=this;return new Promise(function(t,i){var e=document.createElement("iframe");e.setAttribute("scrolling","no"),e.setAttribute("frameborder",0),e.style.width="100%",e.style.height="100%",a.creativeElement=e,a.fakeHide();var n=setTimeout(function(){a.creativeElement.removeEventListener("load",r),a.log("html creative load error timeout"),a.emitCreativeError("timeout",a.creativeUrl),i(new Error("creative error"))},1e4),r=function(){var e;clearTimeout(n);try{e=a.creativeElement.contentDocument}catch(e){a.log("html creative can not get contentDocument:",e)}e&&0<e.getElementsByTagName("cupid-iframe").length?(e.addEventListener("click",function(){a.ad.emit("click")}),t()):(a.log("html creative load error"),a.emitCreativeError("error",a.creativeUrl),i(new Error("creative error")))};a.creativeElement.addEventListener("load",r);e=a.creativeUrl.replace(/^(https:|http:)/,"");a.creativeElement.setAttribute("src",e+"?isMute=1&domain="+document.domain),a.putOnDocument()})}},{key:"play",value:function(){var n=this;return new Promise(function(e,t){if(n.isStopped)return t("ended");var i;n.isSuperShow?(i=1e3*n.creativeObject.actDuration||2e3,rl(n.creativeObject.actUrl).then(function(e){n.actCreativeElement=e,n.creativeElement.style.display="none",n.superShowPlaying=!0,n.showSuperShow(),n.tryAddStyle(),n.ad.emit("impression"),setTimeout(function(){n.actCreativeElement.style.display="none",n.superShowPlaying=!1,n.ad.aborted||n._play()},i)}).catch(function(){n.superShowPlaying=!1,n._play()})):n._play(),e()})}},{key:"_play",value:function(){var e=this;e.log("play"),e.creativeObject.isSuperPause||(e.$adzone.style.boxShadow="#000 0px 0px 1.4rem"),e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement.style.display="",e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),Rh(e.$adzone),e.$adContainer&&Rh(e.$adContainer),e.resize(!0),e.isAudioPause()&&e.initAudio(),"video"==e.renderType&&e.creativeElement&&e.creativeElement.play(),e.notifyPlayerAudioPauseStart(),e.onFirstPlaying()}},{key:"showSuperShow",value:function(){var e=this;e.actCreativeElement.style.width="100%",e.actCreativeElement.style.height="100%",e.actCreativeElement.style.visibility="",e.$adzone.appendChild(e.actCreativeElement),e.$adContainer.appendChild(e.$adzone),Rh(e.$adzone),e.$adContainer&&Rh(e.$adContainer),e.resizeSuperShow()}},{key:"resizeSuperShow",value:function(){var e=this,t={},i=e.vv.mw.video(),n=e.creativeObject;t.videoWidth=i.offsetWidth,t.videoHeight=i.offsetHeight,t.creativeWidth=n.actWidth||980,t.creativeHeight=n.actHeight||540;i=[980,540];t.boxWidth=t.videoWidth*n.actWidthScale||i[0],t.boxHeight=t.videoHeight*n.actHeightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);i=al({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});i.max?(t.scale=i.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(t),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.$adzone.style.position="absolute",e.log("resize supershow",t)):e.log("fail to resize"),e.detectCollision()}},{key:"onFirstPlaying",value:function(){var e,t=this;t.hasPlaying||(t.hasPlaying=!0,(e=t.ad).remain=e.duration,t.log("on first playing"),e.emit("impression"),"video"!=t.renderType&&t.initProgress(),e.hasDspIcon()&&e.putIcon(e.dspIcon),1==e.targetedAd&&(t.log("precise ad and add icon"),e.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then(function(e){e.addEventListener("click",function(){window.open("http://www.iqiyi.com/common/secret.html")})})),1/0!=t.ad.duration&&"video"!=t.renderType&&t.updateCountdown())}},{key:"resize",value:function(){var e,t,i,n=this;n.superShowPlaying?n.resizeSuperShow():(e=n.size,i=n.vv.mw.video(),t=n.creativeObject,e.videoWidth=i.offsetWidth,e.videoHeight=i.offsetHeight,e.creativeWidth=t.width,e.creativeHeight=t.height,e.creativeWidth=e.creativeWidth||n.size.creativeRawWidth||300,e.creativeHeight=e.creativeHeight||n.size.creativeRawHeight||250,t.width==n.size.creativeRawWidth&&t.height==n.size.creativeRawHeight||n.log(""),i=[600,500],e.boxWidth=e.videoWidth*t.widthScale||i[0],e.boxHeight=e.videoHeight*t.heightScale||i[1],e.boxWidth=Math.min(e.boxWidth,e.videoWidth),e.boxHeight=Math.min(e.boxHeight,e.videoHeight),(i=al({width:e.creativeWidth,height:e.creativeHeight},{width:e.boxWidth,height:e.boxHeight})).max?(e.scale=i.max,e.computedWidth=e.creativeWidth*e.scale,e.computedHeight=e.creativeHeight*e.scale,n.setPosition(n.size),n.$adzone.style.width=e.computedWidth+"px",n.$adzone.style.height=e.computedHeight+"px",n.$adzone.style.top=e.y+"px",n.$adzone.style.left=e.x+"px",n.log("resize",e)):n.log("fail to resize"),n.detectCollision())}},{key:"setPosition",value:function(e){var t=this.vv.mw,i=t.video(),n=(t.width()-i.offsetWidth)/2,i=(t.height()-i.offsetHeight)/2;e.x=n+(e.videoWidth-e.computedWidth)/2,e.y=i+(e.videoHeight-e.computedHeight)/2}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e=(e=(e=e||1/0)&&e!=1/0?parseInt(e):e)&&e!=1/0?parseInt(e):e}},{key:"toggleVideoVolumn",value:function(){var e=this.ad,t=this.creativeElement;t.muted=!t.muted;var i=t.muted;return this.log("video pause muted",i),i||(this.hasOpenVolumn||(this.hasOpenVolumn=!0,dl(e,"clk","volume_button;vss:1")),e=this.vv.mw.volume(),t.volume=e||.15,this.log("video pause volume",t.volume)),i}},{key:"isAudioPause",value:function(){return!!this.creativeObject.audioUrl}},{key:"initAudio",value:function(){this.$audio=document.createElement("audio"),this.$audio.preload="auto";var e=this.creativeObject.audioUrl,t=Ll(e);t.query&&!/pv=0.2/.test(t.query)?e+="&pv=0.2":t.query||(e+="?pv=0.2"),this.$audio.src=e.replace(/^(https:|http:)/,""),this.vv.audioPause=this.ad,this.bindAudioEvt()}},{key:"closeAudioPause",value:function(e){var t,i=this;i.isStopped||i.hasClosed||(i.hasClosed=!0,"manual"!=e?i.$audio&&!i.audioError?(i.$adzone.classList.add("cupid-fade-out"),t=i.vv.mw.volume(),i.log("audio volume",t),i.$audio.volume=t,i.$audio.play()):i.abortAudioPause():i.abortAudioPause(e))}},{key:"bindAudioEvt",value:function(){var e=this;e.$audio&&(e.$audio.addEventListener("play",function(){e.log("audio start play"),e.audioPlayed=!0,e.sendAudioPingback(0)}),e.$audio.addEventListener("ended",function(){e.log("audio ended"),e.$audio=null,e.sendAudioPingback(1),e.abortAudioPause()}),e.$audio.addEventListener("error",function(){e.audioError=!0,e.$audio=null,e.audioPlayed&&e.abortAudioPause()}))}},{key:"notifyPlayerAudioPauseEnd",value:function(e){var t=this.vv.sdk;this.log("notify player pause end, is audio:",this.isAudioPause()),t.emit("pause_end",{type:this.isAudioPause()?"audio":"common",status:e||"common"})}},{key:"notifyPlayerAudioPauseStart",value:function(){var e=this.vv.sdk;this.log("notify player pause start, is audio:",this.isAudioPause()),e.emit("pause_start",{type:this.isAudioPause()?"audio":"common",duration:this.isAudioPause()?2.5:0})}},{key:"abortAudioPause",value:function(e){this.vv.audioPause=null,this.notifyPlayerAudioPauseEnd(e),this.ad.abort()}},{key:"sendAudioPingback",value:function(e){var t=this.ad,e=Eu({acp:e},",",":");dl(t,"auu",e)}}]),a}(G);function Rh(e){e.style.display="",e.style.visibility=""}o=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){f()(this,a);var i=r.call(this,e,t),e=l()(i);return e.size={},e.creativeObject=t.creative.creativeObject,e.creativeUrl=e.creativeUrl||e.creativeObject.creativeUrl,e.renderType=e.renderType||ch(e.creativeUrl),e.option={position:"bottom-left"},"image"!==e.renderType&&e.ad.emit("error",new Error("unknown render type: "+e.creativeUrl)),i}return c()(a,[{key:"load",value:function(){var t=this,i=t.ad;return new Promise(function(e){e(t.loadImage(t.creativeUrl,5e3).then(function(e){t.creativeElement=e,t.size.creativeRawWidth=e.width,t.size.creativeRawHeight=e.height,i.error||i.emit("creativeLoad")}))})}},{key:"play",value:function(){var t=this;return new Promise(function(e){t.log("play"),t.creativeElement.style.width="100%",t.creativeElement.style.height="100%",t.creativeElement.style.visibility="",t.putOnDocument(),t.tryAddStyle(),t.addClickEvt(),Lh(t.$adzone),t.$adContainer&&Lh(t.$adContainer),t.resize(!0),t.onFirstPlaying(),e()})}},{key:"resize",value:function(){var e=this,t=e.size,i=e.vv.mw.video();i&&(t.videoWidth=i.offsetWidth,t.videoHeight=i.offsetHeight);var n=e.creativeObject,i=bu.split(n.dpi,"*");n?(t.creativeWidth=n.width,t.creativeHeight=n.height,n.width===t.creativeRawWidth&&n.height===t.creativeRawHeight||e.log("")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);i=[640,100];t.boxWidth=t.videoWidth*n.maxWidthScale||i[0],t.boxHeight=t.videoHeight*n.maxHeightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);i=al({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});i.max&&(t.scale=i.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"setPosition",value:function(){var e=this.size,t=this.creativeObject,i=this.vv.mw,n=i.video(),r=(i.width()-n.offsetWidth)/2,i=(i.height()-n.offsetHeight)/2,n=e.videoWidth*t.xScale-e.computedWidth/2,t=e.videoHeight*t.yScale-e.computedHeight/2;e.x=r+n,e.y=i+t,this.log("set position size",e)}},{key:"onFirstPlaying",value:function(){var e;this.hasPlaying||(this.hasPlaying=!0,this.log("on first playing"),(e=this.ad).emit("impression"),e.remain=e.duration,this.initProgress(),e.hasDspIcon()&&e.putIcon(e.dspIcon))}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e=(e=e||1/0)&&e!=1/0?parseInt(e):e}}]),a}(G);function Lh(e){e.style.display="",e.style.visibility=""}ie=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){f()(this,a);var i=r.call(this,e,t),n=l()(i);return n.isRatioFixed=!1,n.canExpand=!0,n.creativeUrl=n.creativeObject.imgUrl,n.renderType="viewPoint",n.creativeObject.priceText=(t=n.creativeObject.price,t=parseFloat(t),isNaN(t)?"":""+t),n.size={},n.log("render type",n.renderType,n.creativeObject,e),n.hasPlaying=!1,n.hasPutOnDoc=!1,i}return c()(a,[{key:"load",value:function(){var i=this,n=i.ad;return new Promise(function(e,t){if(i.isStopped)return t(new Error("has ended"));i.log("load"),e(i.loadImage(i.creativeUrl,5e3).then(function(e){i.creativeElement=e,i.size.creativeRawWidth=e.width,i.size.creativeRawHeight=e.height})),n.error||n.emit("creativeLoad")})}},{key:"play",value:function(){var i=this;return new Promise(function(e,t){if(i.isStopped)return t("ended");i.log("play"),i.tryAddStyle(function(){i.vv.sdk.viewController.renderViewPointTip(i.$adzone,i.creativeObject)}),i.addClickEvt(),i.putOnDocument(),i.creativeElement.style.width="100%",i.creativeElement.style.height="100%",i.creativeElement.style.visibility="",i.ad.clickThrough&&(i.$adzone.style.cursor="pointer"),Mh(i.$adzone),i.$adContainer&&Mh(i.$adContainer),i.resize(),i.onFirstPlaying(),e()})}},{key:"onFirstPlaying",value:function(){var e,t,i=this;i.hasPlaying||(i.hasPlaying=!0,(e=i.ad).remain=e.duration,i.log("on first playing"),t=i.vv.sdk,i.log("notify player start_viewpoint"),t.emit("adplayer_ad_info",{type:"start_viewpoint",data:{startTime:e.slot.startTime,templateType:i.type,adUid:e.id,adZoneId:e.slot.adZoneId,videoEventId:i.vv.videoEventId}}),dl(e,"impression","viewPointTips"),"tips"==i.creativeObject.impressionArea&&i.ad.emit("impression"),i.initProgress(),e.hasDspIcon()&&e.putIcon(e.dspIcon),1==e.targetedAd&&(i.log("precise ad and add icon"),e.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then(function(e){e.addEventListener("click",function(){window.open("http://www.iqiyi.com/common/secret.html")})})),1/0!=i.ad.duration&&i.updateCountdown())}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e=(e=e||10)!=1/0?parseInt(e):e}},{key:"resize",value:function(){var e=this.size,t=this.vv.mw.video();e.videoWidth=t.offsetWidth,e.videoHeight=t.offsetHeight,e.displayWidth=298,e.displayHeight=92,e.computedWidth=e.displayWidth,e.computedHeight=e.displayHeight,this.setPosition(),this.$adzone.style.width=e.computedWidth+"px",this.$adzone.style.height=e.computedHeight+"px",this.$adzone.style.top=e.y+"px",this.$adzone.style.left=e.x+"px",this.log("resize",e),this.detectCollision()}},{key:"setPosition",value:function(){var e=this.size,t=this.vv.mw,i=t.video(),n=(t.width()-i.offsetWidth)/2,r=(t.height()-i.offsetHeight)/2,t=0,i=e.videoHeight-70-92,t=40;"right"==this.creativeObject.position&&(t=e.videoWidth-t-298),e.x=t+n,e.y=i+r}},{key:"reset",value:function(){this.isStopped=!1,this.hasPlaying=!1,this.hasPutOnDoc=!1}},{key:"addClickEvt",value:function(){var i=this;i.clickHandler=function(e){var t=e.target;"detial-btn"==t.getAttribute("class")?(dl(i.ad,"click","viewPointTipsDetails"),i.ad.emit("clickAndOpen",t),e.preventDefault(),e.stopPropagation()):(i.vv.exitFullscreen(),t=i.ad,e=i.vv.sdk,i.log("notify player expand_viewpoint"),e.emit("adplayer_ad_info",{type:"expand_viewpoint",data:{startTime:t.slot.startTime,templateType:t.creative.templateType,adUid:t.id,adZoneId:t.slot.adZoneId,videoEventId:i.vv.videoEventId}}),dl(i.ad,"click","viewPointTips"))},i.$adzone&&i.$adzone.addEventListener("click",i.clickHandler)}}]),a}(G);function Mh(e){e.style.display="",e.style.visibility=""}var Ch=(c()(Nh,[{key:"initStatus",value:function(e){return{showStatus:{duration:e.showDuration,showedSeconds:0,currentSlice:0},hideStatus:{duration:e.showInterval,hidedSeconds:0,currentSlice:0},display:!0}}},{key:"initTimer",value:function(){var e=new hh(1e3);return e.on("timer",this.timerHandler.bind(this)),e}},{key:"timerHandler",value:function(){var e,t,i=this.status;e=i.display,t=i.hideStatus,e||t.duration!==t.hidedSeconds||this.resetToShow(),e=i.display,t=i.showStatus,e&&t.duration===t.showedSeconds&&this.resetToHide(),i.display&&this.updateShowStatus(),i.display||this.updateHideStatus()}},{key:"resetToShow",value:function(){var e=this.status,t=this.timer,i=this.view.adCollisionDetection;e.display=!0,e.showStatus.currentSlice++,e.hideStatus.hidedSeconds=0,i.wholeCornerCollidedWithOriginalList()?(i.notifyWholeCornerToHide(),t.running&&t.stop(),this.log("wholecorner collisied to others while reset to show, keep hide",e)):(i.notifyWholeCornerToShow(),this.log("reset to show",e,i.wholeCornerCollidedWithOriginalList()))}},{key:"resetToHide",value:function(){var e=this.status,t=this.view.adCollisionDetection;e.display=!1,e.hideStatus.currentSlice++,e.showStatus.showedSeconds=0,t.wholeCornerCollidedWithOriginalList()?(t.notifyWholeCornerToHide(),this.log("wholecorner collisied to others while reset to hide, keep hide",e)):(t.notifyWholeCornerToHide({forceHide:!0}),this.log("reset to hide",e))}},{key:"updateShowStatus",value:function(){this.status.showStatus.showedSeconds++;var e=this.status.showStatus,t=e.showedSeconds,e=e.duration;0!=t%10&&t!=e||this.log("updating show status",t+"/"+e)}},{key:"updateHideStatus",value:function(){this.status.hideStatus.hidedSeconds++;var e=this.status.hideStatus,t=e.hidedSeconds,e=e.duration;0!=t%10&&t!=e||this.log("updating hide status",t+"/"+e)}}]),Nh);function Nh(e,t){f()(this,Nh);var i=t.vv.sdk;this.log=i.logger.getLogger("wholeCornerTimer"),this.log("init whole corner timer",t.ad),this.status=this.initStatus(e),this.timer=this.initTimer(),this.ad=t.ad,this.view=t.vv}function Bh(e){e.style.display="",e.style.visibility=""}var Fh={roll:n,crazy:n,mraid:n,common_pause:y,definition_switching:r,common_overlay:o,viewPoint:ie,whole_corner:function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){f()(this,a);var i=r.call(this,e,t),e=l()(i);return e.vv.wholeCorner=t,e.isRatioFixed=!0,e.size={},e.creativeObject=t.creative.creativeObject,e.creativeUrl=e.creativeUrl||e.creativeObject.creativeUrl,e.renderType=e.renderType||ch(e.creativeUrl),e.option={position:"bottom-left"},"image"!==e.renderType&&e.ad.emit("error",new Error("unknown render type: "+e.creativeUrl)),i}return c()(a,[{key:"load",value:function(){var t=this,i=t.ad;return new Promise(function(e){e(t.loadImage(t.creativeUrl,5e3).then(function(e){t.creativeElement=e,t.size.creativeRawWidth=e.width,t.size.creativeRawHeight=e.height,i.error||i.emit("creativeLoad")}))})}},{key:"play",value:function(){var t=this;return new Promise(function(e){t.log("play"),t.creativeElement.style.width="100%",t.creativeElement.style.height="100%",t.creativeElement.style.visibility="",t.putOnDocument(),t.tryAddStyle(),t.addClickEvt(),t.initTimerController(),Bh(t.$adzone),t.$adContainer&&Bh(t.$adContainer),t.resize(!0),t.onFirstPlaying(),e()})}},{key:"pause",value:function(){this.log("pause")}},{key:"resize",value:function(){var e=this,t=e.size,i=e.vv.mw.video();i&&(t.videoWidth=i.offsetWidth,t.videoHeight=i.offsetHeight);var n=e.creativeObject,i=bu.split(n.dpi,"*");n?(t.creativeWidth=n.width,t.creativeHeight=n.height,n.width===t.creativeRawWidth&&n.height===t.creativeRawHeight||e.log("")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);i=[640,100];t.boxWidth=t.videoWidth*n.maxWidthScale||i[0],t.boxHeight=t.videoHeight*n.maxHeightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);i=al({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});i.max&&(t.scale=i.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"detectCollision",value:function(){var e=this.ad,t=(this.$adzone||{}).style,i=this.vv.adCollisionDetection,t={id:e.id,x:t.left.replace("px",""),y:t.top.replace("px",""),width:t.width.replace("px",""),height:t.height.replace("px",""),willDefinitelyCollide:!0};this.wholeCornerTimerController&&(t.timer=this.wholeCornerTimerController.timer,t.timerStatus=this.wholeCornerTimerController.status),i.setWholeCorner(t),i.notifyWholeCornerToShow()}},{key:"setPosition",value:function(){var e=this.size,t=this.creativeObject,i=this.vv.mw,n=i.video(),r=(i.width()-n.offsetWidth)/2,i=(i.height()-n.offsetHeight)/2,n=e.videoWidth*t.xScale-e.computedWidth/2,t=e.videoHeight*t.yScale-e.computedHeight/2;e.x=r+n,e.y=i+t,this.log("set position size",e)}},{key:"onFirstPlaying",value:function(){var e;this.hasPlaying||(this.hasPlaying=!0,this.log("on first playing"),(e=this.ad).emit("impression"),e.hasDspIcon()&&e.putIcon(e.dspIcon))}},{key:"initTimerController",value:function(){var e=this.ad,e=e&&e.fullCorner?e.fullCorner:{};this.isInterval=!(!e.showDuration||!e.showInterval),this.isInterval&&(this.wholeCornerTimerController=new Ch(e,this),this.timer=this.wholeCornerTimerController.timer,this.timer.start())}}]),a}(G)},Uh={0:"page",1:"preroll",2:"midroll",3:"postroll",4:"corner",5:"mark",6:"pause",7:"toolbar",8:"viewPoint",9:"overlay",10:"common_overlay",11:"common_overlay",13:"whole_corner",15:"briefRoll"},jh={1:"PMP",2:"trueView",3:"vip",4:"origin",6:"skippable",7:"sports-vip",8:"brief",9:"brief",12:"overlay-brief",13:"brief"},Vh={0:{negative:[32,128]},32:{positive:[32,128]}},Wh={CODE_S_HTTP_ERROR:301,CODE_S_PARSE_ERROR:304,CODE_VIDEO_HTTP_ERROR:504,CODE_S_INVALID_PLAYER:308,CODE_S_PARAM_ERROR:305,CODE_S_COUPON_NOT_FOUND:309},o=(c()(zh,[{key:"parse",value:function(e){try{e=JSON.parse(e)}catch(e){}return e}},{key:"stringify",value:function(e){try{e=JSON.stringify(e)}catch(e){}return e}},{key:"set",value:function(e,t){t=this.stringify(t);try{localStorage[e]=t}catch(e){}}},{key:"get",value:function(e){var t;try{t=localStorage[e],t=this.parse(t)}catch(e){}return t}}]),zh),ie=(c()(Hh,[{key:"save",value:function(){this.store.set(this.key,this.data)}}]),new Hh("mars",new o));function Hh(e,t){f()(this,Hh);this.store=t,this.key=e,this.data=this.store.get(e)}function zh(){f()(this,zh)}G=ie.data||{},o=(new Date).getDay()!=new Date(G.timestamp).getDay(),G.timestamp&&!o||(ie.data={timestamp:(new Date).getTime(),adPlayedDurationInDay:0,videoPlayedDurationInDay:0},ie.save()),ie.save();var Yh=ie;var Gh=bu.is,Qh=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){f()(this,a);var i=r.call(this,"ad"),n=l()(i);return bu.extend(n,e),n.setParent(t),n.slot=t,n.state="idle",n.memory={},n.elements=[],n.bindEvent(),n.init(),n.setAdMap(),i}return c()(a,[{key:"init",value:function(){var e=this;e.playTimes=0,e.iesKeyReplaced={},e.id=bu.compact(["ad",e.getVal("videoEventId"),bu.uid(),e.comment]).join("-");var n,i,t,r,a,o,s,c,d=e.getParentByName("sdk");e.debug=d.logger.getLogger("ad:"+e.id),e.timeSlices=bu.split(e.timeSlices,","),e.impressionTracking=e.impressionTracking||{},e.clickTracking=e.clickTracking||{},e.eventTracking=(s=e.eventTracking,c={},bu.each(s,function(e){var t;e&&(t=e.event,Gh.array(c[t])||(c[t]=[]),bu.each(e.trackings,function(e){c[t].push(e)}))}),c),e.creative=e.creative||{},i=e,t=bu.get(e,"vast.vastObject"),d=e.debug,t&&(d("parsed vast",s=function(e,t){var i,n={};if(ih.string(e))try{(i=th.parseString(e,{attrKey:"attr",textKey:"#text"})).html&&!i.VAST&&(n.error="parse error",t("vastXML parse error")),t("vastJson",i)}catch(e){t("vastXML parse error",n.error=e)}else i=e;if(i.VAST){var r=i.VAST[0],a=nh(r.Ad);t("$ad",a,r);e=nh(a.Wrapper);t("$wrapper",e);r=nh(a.InLine);t("$inline",r),e&&(a=nh(e.VASTAdTagURI),n.redirect=ah(a));e=e||r;if(e){r=rh(e.Impression);n.impressionTrackings=bu.compact(bu.map(r,ah)),t("ret.impressionTrackings",n.impressionTrackings);r=nh(e.Creatives[0].Creative);if(t("$creative",r),r){e=nh(r.Linear);t("$linear",e);r=nh(e.Duration);n.duration=ah(r),t("ret.duration",n.duration);var o,r=nh(e.AdParameters);n.adParameters=ah(r),t("ret.adParameters",n.adParameters);try{var s=nh(e.VideoClicks[0].ClickThrough);n.clickThrough=ah(s)}catch(e){n.clickThrough=""}t("ret.clickThrough",n.clickThrough);try{var c=nh(e.Icons[0].Icon[0].StaticResource);n.icon=ah(c)}catch(e){n.icon=""}t("ret.icon",n.icon);try{o=nh(e.MediaFiles[0].MediaFile)}catch(e){}t("creativeNode",o),n.creativeUrl=ah(o)||"",n.creativeWidth=oh(o,"width")||"",n.creativeHeight=oh(o,"height")||"",t("ret.creativeUrl",n.creativeUrl),t("ret.creativeWidth",n.creativeWidth),t("ret.creativeHeight",n.creativeHeight);try{var d=rh(e.VideoClicks[0].ClickTracking);n.clickTrackings=bu.compact(bu.map(d,ah))}catch(e){n.clickTrackings=[]}t("ret.clickTrackings",n.clickTrackings);d=[];try{d=rh(e.TrackingEvents[0].Tracking)}catch(e){d=[]}t("eventTrackings",d);var u=n.eventTracking={};bu.each(d,function(e){var t=oh(e,"event");ih.array(u[t])||(u[t]=[]);e=ah(e);e&&u[t].push(e)}),t(u,n.eventTracking)}}}return n.isEmpty=function(e,t){if(!e.VAST)return!0;e=e.VAST[0]&&nh(e.VAST[0].Ad);return!e||(t("$ad:",e),!nh(e.InLine)&&!nh(e.Wrapper))}(i,t),n}(t,i.debug),t),s.isEmpty?(d("empty vast"),i.sendThirdPartyPingback({errorCode:904,errorMessage:t})):s.error?(d("vast xml parse error",s.error),i.sendThirdPartyPingback({errorCode:903,errorMessage:t})):(r=s,a=i.settle,r&&a&&(o="${SETTLEMENT}",bu.each("redirect clickThrough creativeUrl".split(" "),function(e){r[e]=il(r[e],o,a)}),r.clickTrackings=bu.map(r.clickTrackings,function(e){return il(e,o,a)}),r.impressionTrackings=bu.map(r.impressionTrackings,function(e){return il(e,o,a)}),bu.mapValues(r.eventTracking,function(e){return bu.map(e,function(e){return il(e,o,a)})})),s.clickThrough&&(i.clickThrough=s.clickThrough),i.dspIcon||(i.dspIcon=s.icon),i.impressionTracking.thirdPartyTracking=bu.union(i.impressionTracking.thirdPartyTracking,s.impressionTrackings),i.clickTracking.thirdPartyTracking=bu.union(i.clickTracking.thirdPartyTracking,s.clickTrackings),bu.forIn(s.eventTracking,function(e,t){i.eventTracking[t]=i.eventTracking[t]||[],i.eventTracking[t]=bu.union(i.eventTracking[t],e)}),i.creative.creativeObject=(d=i.creative.templateType,t=i.creative.creativeObject,s=s,t=t||{},"common_overlay"==d?t.creativeUrl=s.creativeUrl||t.creativeUrl:t.url=s.creativeUrl||t.url,t))),e.creative.rawCreativeObject=e.creative.creativeObject,e.creative.creativeObject=(t=e.creative.creativeObject,n={},bu.forIn(t,function(e,t){var i;"true"==(e=Gh.string(e)?bu.trim(e):e)?e=!0:"false"==e?e=!1:(i=parseFloat(e))==e&&(e=i),n[t]=e}),n),e.duration=e.creative.creativeObject.duration,e.seekable=e.seekable||0,e.clickArea="",e.trueviewSource=1,e.adInfo=tl(e),this.handleAdMsm()}},{key:"handleAdMsm",value:function(){var i=this;i.macroSubstitutionMap&&bu.forIn(i.macroSubstitutionMap,function(e,t){e=zl.decode(e),e=encodeURIComponent(e),i.macroSubstitutionMap[t]=e})}},{key:"bindEvent",value:function(){var r;(r=this).on("video-playing",function(){r.slot.show.request.vv.videoState="playing"}),r.on("video-play",function(){r.slot.show.request.vv.videoState="play",r.play()}),r.on("video-loadstart",function(){r.emit("creativeLoad")}),r.on("video-pause",function(){r.slot.show.request.vv.videoState="paused",r.pause()}),r.on("video-willended",function(){var e=r.template;r.debug("ad willended type and state",r.deliverName(),r.state),"skippable"==r.deliverName()&&"ended"!=r.state&&(e.showGuide=!0,e.loadGuide())}),r.on("video-ended",function(){r.emit("complete",{type:"video-ended"})}),r.on("video-error",function(){var e=r.getParentByName("vv"),t=e.sdk,i=r.slot.show.request;t.setViewController(),r.template&&(r.emit("error",{message:"creative http error",data:{creativeUrl:r.template.creativeUrl}}),t=e.schedule,(r==t.getCurrentAd()||e.isCurrentVV()&&0==r.index())&&r.abort()),i&&i.checkErrorCreativeUrls(r)}),r.on("click",bu.throttle(function(){r.debug("click",r.adInfo),Ph.send(r,"click"),"skippable"==r.deliverName()&&r.emit("trueview")},500,{trailing:!1})),r.once("impression",function(){var e,t,i;r.hasImpressed||("ended"!=r.state||r.slot.isViewPoint()?(r.debug("impression",r.creative.templateType,r.orderItemId),r.hasImpressed=!0,r.handleConflict(),r.slot.sendEmptyTrackingBeforeTimeSlice(ol(r.timeSlices)),Ph.send(r,"impression"),(i=r.slot.show.request).sendInventory(),$h(r)&&(r.debug("roll ad start"),(e=i.vv).onNetworkFree(),i=1===(t=r).slot.cuepointType,t=t.index()===t.slot.ads.length-1,i&&t&&e.schedule&&e.schedule.requestWholeCorner(),r.emit("pingback",{subtype:"start"}),Ph.send(r,"start"))):r.debug("impression , ",r))}),r.once("trueview",function(){r.debug("trueview",r.creative.templateType,r.orderItemId),Ph.send(r,"trueview")}),r.on("skip",function(e){r.debug("click skip");var t=e||!1;bu.includes(["trueView","vip","sports-vip"],r.deliverName())||t?r.debug("not send skip click"):r.emit("pingback",{subtype:"skipClick"});var i=r.getParentByName("sdk");r.isSkippable()||t?(r.debug("skip success"),e={subtype:"skip",customInfo:{ofs:r.getPlayedTime(),skt:r.getSkippedType()}},"skippable"==r.deliverName()&&(t={tag:r.getSkippedStage(),tnr:r.getSlotLength(),cor:r.getVal("order")},bu.extend(e.customInfo,t)),r.emit("pingback",e),"skippable"==r.deliverName()&&r.sendPlayDurationPingback(r.getPlayedTime()),"trueView"==r.deliverName()&&Ph.send(r,"skip"),i.rollView&&i.rollView.pingback("ply_adskpd"),bu.each(r.slot.ads,function(e){e.skipped=!0}),r.emit("end",{type:"skip"})):i.viewController&&i.viewController.pullCashier(r)}),r.once("creativeLoad",function(){cl(r,{pingbackType:"creative",subtype:"load",customInfo:bu.get(r,"matchedVideo.definitionLevel")})}),r.on("clickAndOpen",function(e,t){r.hasImpressed||r.slot.isViewPoint()?(r.emit("click"),r.emit("open",e,t)):r.debug("has not impressed")}),r.on("open",bu.throttle(function(e,t){var i,n;r.debug("open"),Gh.element(e)&&(e=(i=e).getAttribute("href"),t=t||i.getAttribute("target")),e=e||(i=r,bu.trim(Sh(i,n||i.clickThrough||i.clickThrough,1))),2<bu.size(e)&&window.open(e,t||"_blank")},500,{trailing:!1})),r.once("complete",function(e){r.debug("complete");var t=r.getParentByName("vv");$h(r)&&(Yh.data.adPlayedDurationInDay+=r.duration,Yh.save()),"pause"==Kh(r)?t.schedule.loadPause({from:r,requestIndex:r.slot.show.request.requestIndex+1}):r.emit("end",e)}),r.once("end",function(e){var t;r.debug("end by",(e=e||{}).type),r.state="ended",r.hasPlayed=!0,r.template&&(t={},"timer-complete"==e.type&&(t.abort=!0),r.template.stop(t)),Zh(r)&&(t=r.getParentByName("vv"),bu.remove(t.currentOverlayAds,function(e){return r==e})),bu.each(r.elements,function(e){e.parentNode&&e.parentNode.removeChild(e)}),r.slot.isViewPoint()&&r.slot.hasNotifiedStart&&(r.slot.notifyPlayer("adplayer_ad_end"),r.slot.complete()),!r.slot.hasInited||r.slot.isViewPoint()||r.notAutoPlayNext||r.tryPlayNextAd(),(r.slot.isWholeCorner()?ef:Jh)(r)}),r.on("replayComplete",function(e){r.debug("complete replay"),$h(r)&&(Yh.data.adPlayedDurationInDay+=r.duration,Yh.save()),r.emit("replayEnd",e)}),r.on("replayEnd",function(e){var t;r.debug("replay end by",(e=e||{}).type),r.state="ended",r.hasPlayed=!0,r.template&&(t={},"timer-complete"==e.type&&(t.abort=!0),r.template.stop(t)),bu.each(r.elements,function(e){e.parentNode&&e.parentNode.removeChild(e)}),!r.slot.hasInited||r.slot.isViewPoint()||r.notAutoPlayNext||r.tryPlayNextAd(),(r.slot.isWholeCorner()?ef:Jh)(r)}),r.on("pingback",function(e){var t=bu.map(r.slot.ads,function(e){return e.timeSlices.join("")}).join("|"),i=e.customInfo||{};i.rpt=r.playTimes-1,r.isSeekableOriginalRoll()&&bu.includes(["1q","mid","3q","sp"],e.subtype)&&(i.sek=r.isSeeked?1:0);var n=r.slot.show.request;n.adBreak&&(e.sequenceId=n.adBreak.sequenceId),e=bu.extend({},e,{pingbackType:"ad",orderItemId:r.orderItemId,creativeId:r.creative.creativeId,dspId:r.dspId,adStrategy:[r.slot.cuepointType,r.timeSlices.join(""),t].join(":"),customInfo:Eu(i,",",":")}),cl(r,e)}),r.on("tracking",function(e){e&&Ph.send(r,e)}),r.on("progressReseted",function(e,t){var i=r.template.timer;i&&(i.stop(),Gh.number(e)&&!t&&((i.currentCount=e)===r.duration?(i.emit("timerComplete"),r.debug("after ad progress reset to complete",e)):(i.start(),r.debug("after ad progress reset to",e,r.template.timer.currentCount))))}),r.on("error",function(e){r.debug("error",(e=e||{}).message,e.data,r.adInfo);var t=(r.error=e).message;"creative http error"!=t&&"creative timeout"!=t||(e=bu.get(e,"data.creativeUrl"),r.emit("creativeError",e,"creative timeout"==t?505:504)),setTimeout(function(){r.state="error"})}),r.once("creativeError",function(e,t){cl(r,{pingbackType:"creative",subtype:"error",errorCode:t,errorMessage:e,requestCount:-1})}),r.on("closeViewPoint",function(){dl(r,"close","viewPointTips")})}},{key:"index",value:function(){return bu.indexOf(this.slot.ads,this)}},{key:"tryLoadToVideo",value:function(){var i=this;return i.load().then(function(){return i.isLiving(function(){return i.template.loadRollToVideo()})}).catch(function(e){var t=i.slot.show.request;t.noCreativeUrlAds&&"fail to match ad video"==e.message&&t.noCreativeUrlAds.push(e.data),i.debug("load to video fail",e)})}},{key:"updateLoadStatusAndInitTemplate",value:function(){var t=this;return t.debug("ready to update ad load status and init template"),t.load().then(function(){return t.isLiving(function(){return t.template.bindPlayingEvt()})}).catch(function(e){t.debug("update ad load status and init template fail",e)})}},{key:"load",value:function(){var t=this;return"ended"==t.state?Promise.reject("ended"):t.initTemplate().then(function(){return t.memory.load=t.memory.load||new Promise(function(e){t.debug("load"),t.state="loading",e(t.template.load())}),t.memory.load})}},{key:"initTemplate",value:function(){var o=this;return o.isLiving(function(){return o.memory.initTemplate=o.memory.initTemplate||new Promise(function(e,t){var i,n,r,a;o.template=function(){var e=o.creative.templateType,t=Fh[e];if(t)return new t(e,o)}(),o.template?(o.duration=o.template.getDuration(),isNaN(o.duration)?t(new Error("invalid duration")):(o.debug("init template success"),"trueView"!=o.deliverName()&&"skippable"!=o.deliverName()||(o.impressionTime=(i=o.impressionTime,n=o.duration,r=bu.endsWith(i,"%"),a=parseFloat(i),0<=(i=r?n*a/100:i)&&i<=n||(i=n/2),parseInt(i)),o.skipTime=(n=o.skipTime,i=o.duration,n=0<=(n=parseInt(n))&&n<=i?n:Math.min(5,i))),e())):(cl(o,{pingbackType:"statistics",subtype:"unsupported"}),t(new Error("unknown template:"+o.creative.templateType)))}).catch(function(e){return o.emit("error",e),Promise.reject(e)}),o.memory.initTemplate})}},{key:"setAdMap",value:function(){this.getParentByName("sdk").adMap[this.id]=this}},{key:"getPlayedTime",value:function(){return(this.duration||0)-(this.remain||0)}},{key:"play",value:function(){var t=this;return t.isLiving(function(){return t.load()}).then(function(){return t.isLiving(function(){if("paused"==t.slot.show.request.vv.videoState&&$h(t)&&"roll"==t.template.type)return Promise.resolve();if(t.notAutoPlayNext=!1,"paused"==t.state)return t.resume();if("playing"!=t.state||t.slot.isSeekableOriginalSlot()&&"playing"==t.state){t.playTimes++,t.state="playing";var e=t.slot.show.request;return"pause"==e.type&&e.from&&e.from.abort(),t.isConflict()?Promise.reject(new Error("conflict")):(Zh(t)&&t.getParentByName("vv").currentOverlayAds.push(t),(t.slot.isViewPoint()||t.slot.isWholeCorner())&&t.slot.notifyPlayer("adplayer_ad_start"),t.debug("ad template play",t),t.template.play())}})}).catch(function(e){if(t.error=t.error||e,t.debug("play error",t.error.message),t.error&&t.emit("end",{type:"error"}),"ended"!==t.error)return Promise.reject(e)})}},{key:"resume",value:function(){var t=this;return t.isLiving(function(){t.debug("resume");var e=t.template;return t.state="playing",e&&Gh.fn(e.resume)?e.resume():e.play()})}},{key:"tryPlayNextAd",value:function(){var e=this.slot.ads[this.index()+1];e?e.skipped?e.tryPlayNextAd():(this.debug("play next ad"),e.play()):this.skipped||this.aborted?this.slot.end():this.slot.complete()}},{key:"abort",value:function(){this.aborted=!0,this.emit("end",{type:"abort"})}},{key:"pause",value:function(){var e=this;return e.isLiving(function(){e.state="paused",e.template.pause()})}},{key:"isLiving",value:function(e){var t;if(this.error?t=this.error:"ended"==this.state&&(t="ended"),t&&!this.canReplay())return Promise.reject(t);if(this.error)return Promise.reject(t);e=e();return Promise.resolve(e)}},{key:"deliverName",value:function(){return jh[this.deliverType]||""}},{key:"typeName",value:function(){return Kh(this)}},{key:"hasDspIcon",value:function(){return!(1!=this.isDSP||!this.dspIcon)}},{key:"putIcon",value:function(t,i){var n=this;return i=i||{},/\.qiyipic\.com/.test(t)&&(t=t.replace(/\.qiyipic\.com/,".iqiyipic.com")),rl(t).then(function(e){return n.$adzone?(n.debug("put icon",t),e.style.bottom=(i.bottom||0)+"px",e.style.left=(i.left||0)+"px",e.style.width="25px",e.style.height="25px",e.style.position="absolute",n.$adzone.appendChild(e),n.elements.push(e),e):new Error("no adzone")})}},{key:"reset",value:function(){this.debug("reset"),this.off(),this.bindEvent(),this.state="idle";var e=this.template;e&&e.reset&&e.reset()}},{key:"isConflict",value:function(){if(Zh(this)){var e=this.slot.show.request.vv.currentOverlayAds;if(bu.some(e,function(e){return e.slot.isViewPoint()}))return!0}return!1}},{key:"handleConflict",value:function(){var t=this,i=t.slot.show.request,e=i.vv.currentOverlayAds;"pause"!=i.type&&"midroll"!=i.type||bu.each(e,function(e){var t=e.$adzone;t&&(t.style.display="none"),"midroll"==i.type&&e.pause()});e=bu.filter(e,function(e){if(t!=e){if(t.slot.adZoneId==e.slot.adZoneId)return!0;if(t.slot.isViewPoint())return!0}return!1});bu.each(e,function(e){t.debug("same adzone conflict",t.orderItemId,"kill",e.orderItemId),e.abort()})}},{key:"isSkippable",value:function(){return!!bu.includes(["trueView","vip","sports-vip"],this.deliverName())||function(e){var t=e.getParentByName("vv"),e=t.sdk;if(!e.isVIP)return!1;if("tw"===e.locale&&e.isVIP)return!0;t=t.videoInfo.videoType||0,e=e.vipCheckResult.userVipType||0,t=Vh[t];return!t||(bu.has(t,"positive")?0<Xh(t.positive,e):bu.has(t,"negative")?!(Xh(t.negative,e=e)===e):void 0)}(this)}},{key:"getSkippedType",value:function(){return{2:1,3:2,6:4,7:5}[this.deliverType]}},{key:"resize",value:function(){var e=this;return e.isLiving(function(){"paused"!=e.state&&"playing"!=e.state||e.template.resize()})}},{key:"isSeekableOriginalRoll",value:function(){return"origin"==this.deliverName()&&Boolean(this.seekable)||15==this.slot.cuepointType}},{key:"canReplay",value:function(){return this.slot.isSeekableOriginalSlot()}},{key:"sendThirdPartyPingback",value:function(e){cl(this,bu.extend({pingbackType:"statistics",subtype:"tps"},e))}},{key:"getSkippedStage",value:function(){return this.remain<=0?2:1}},{key:"getSlotLength",value:function(){return this.slot.ads.length}},{key:"sendPlayDurationPingback",value:function(e){dl(this,"vpd","pt:0,pc:1,pd:"+e+",pg:"+e)}}]),a}(xu);function Kh(e){e=e.slot.cuepointType||-1;return Uh[e]||e}function $h(e){return bu.includes([1,2,3,15],e.slot.cuepointType)}function Zh(e){return bu.includes([8,10,11],e.slot.cuepointType)}function Xh(e,t){return!Array.isArray(e)||"number"!=typeof t?0:bu.sum(e)&t}function Jh(e){var t=e.slot,i=e.getParentByName("vv").adCollisionDetection;t.isWholeCorner()||(i.removeAd(e.id),e.debug("wholecorner isvalid",i.wholeCornerIsValid(),";wholecorner status",i.getWholeCorner().showing),i.notifyWholeCornerToShow())}function ef(e){e=e.getParentByName("vv").adCollisionDetection;e.setWholeCorner({}),e.notifyWholeCornerToHide()}var tf=bu.is,nf=function(e){h()(o,e);var i,n,a=(i=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function o(e,t,i){f()(this,o);var n=a.call(this,"slot"),r=l()(n);return r.setParent(i),bu.extend(r,e),r.show=t,r.state="idle",r.id=bu.uid(),r.debug=i.vv.sdk.logger.getLogger("slot"),r.hasNotifiedStart=!1,r.hasInited=!0,r.hasRequestedVipDoc=!1,r.skipAdParams={},r.parseAd(),r.hasSkippableAdInSlot=r.hasSkippableAdInSlots(),n}return c()(o,[{key:"parseAd",value:function(){var t=this;this.ads=this.ads.map(function(e){return new Qh(e,t)})}},{key:"play",value:function(){var e;1===this.cuepointType&&this.initSlotInfo(),tf.empty(this.ads)?0xe8d4a512a0!=this.adZoneId&&this.complete():(e=this.ads[0])&&(this.notifyPlayer("adplayer_ad_start"),this.state="playing",e.play())}},{key:"abort",value:function(){"ended"!=this.state&&(this.debug("abort"),bu.each(this.ads,function(e){e.abort()}),this.end())}},{key:"hasImpressed",value:function(){return bu.some(this.ads,function(e){return e.hasImpressed})}},{key:"tryLoadToVideo",value:function(){return bu.reduce(this.ads,function(e,t){return e.then(function(){return t.tryLoadToVideo()})},Promise.resolve())}},{key:"loadAllAdsToVideo",value:function(){var i=this;return i.debug("slot loadAllAdsToVideo",i),Promise.all(bu.map(i.ads,function(e){return e.updateLoadStatusAndInitTemplate()})).then(function(){var e=bu.map(i.ads,function(e){var t={file:e.template.creativeUrl,id:e.id,type:e.typeName(),seekable:Boolean(e.seekable)||15==e.slot.cuepointType,offset:parseInt(e.slot.startTime),videoEventId:i.request.vv.videoEventId,duration:e.duration};return t.file=t.file.replace(/\.qiyi\.com/,".iqiyi.com"),t.file=t.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),i.debug("video load",t,t.videoEventId,e.slot.startTime),t});i.debug("video load all Ads",e),i.request.vv.mw.load(e)})}},{key:"complete",value:function(){var e,t=this;t.debug("slot complete",t.state),t.sendEmptyTrackingBeforeTimeSlice(1/0),2==t.cuepointType&&t.hasImpressed()&&(e=t.request.adBreak)&&!e.hasMidrollPlayed&&(e.hasMidrollPlayed=!0,t.request.vv.midrollPointsPlayedInView++),t.isSeekableOriginalSlot()&&bu.map(t.ads,function(e){"ended"!==e.state&&e.emit("replayComplete",{type:"timer-complete"})}),t.end()}},{key:"isViewPoint",value:function(){return bu.includes([8],this.cuepointType)}},{key:"isWholeCorner",value:function(){return bu.includes([13],this.cuepointType)}},{key:"isSeekableOriginalSlot",value:function(){var e=bu.includes([2],this.cuepointType),t=this.ads||[],i=bu.every(t,function(e){return"origin"==e.deliverName()&&Boolean(e.seekable)});return e&&i&&1<t.length}},{key:"index",value:function(){return bu.indexOf(this.request.slots,this)}},{key:"end",value:function(){var e=this;if(e.hasNotifiedStart&&e.notifyPlayer("adplayer_ad_end"),bu.includes([1,2,3],e.cuepointType)&&(e.request.vv.lastRollCompleteTime=Date.now()),"preroll"==e.request.type)return e.state="ended",e.debug("preroll slot ended"),1!=e.cuepointType||tf.empty(e.ads)||e.request.vv.startVideo("preroll"),void e.playNextSlot();"ended"==e.state||e.isViewPoint()||(e.state="ended",e.debug("slot ended"),e.request.end())}},{key:"playNextSlot",value:function(){var e=this.request.slots[this.index()+1];e?tf.empty(e.ads)?e.end():e.play():15==this.cuepointType?this.request.end("briefRoll"):this.request.end()}},{key:"reset",value:function(){this.state="idle",bu.each(this.ads,function(e){e.reset()})}},{key:"sendEmptyTrackingBeforeTimeSlice",value:function(i){var n=this,r=n.emptyTracking||{};isNaN(i)||bu.remove(r.timeSlices,function(e){var t=ol(e.w);if(!isNaN(t)&&t<=i){n.debug("send empty tracking before",i,n.adZoneId);e=bu.extend({},e,r.trackingParam);return bh.send({},e,n,"cupid","impression"),!0}})}},{key:"notifyPlayer",value:function(e){var t=this.getParentByName("sdk"),i={ctp:this.cuepointType,id:this.id};1<=this.cuepointType&&(this.hasNotifiedStart=!("adplayer_ad_start"!=e),this.debug("slot notifyPlayer:",e,i),t.emit(e,i))}},{key:"initSlotInfo",value:function(){var e=this.request;e.blackscreenDuration=this.countRollDuration(),e.noCreativeUrlAds=[],e.errCreativeUrlAds=[]}},{key:"countRollDuration",value:function(){if(!this)return 0;if(tf.empty(this.ads))return 0;var e=this.ads;return bu.reduce(e,function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration},0)}},{key:"hasSkippableAdInSlots",value:function(){var e=this.ads;return bu.some(e,function(e){return"skippable"==e.deliverName()})}},{key:"calcRollDurationBefore",value:function(e){if(!this)return 0;var t=this.ads;if(tf.empty(t))return 0;e=e.index(),e=bu.slice(t,0,e);return tf.empty(e)?0:bu.reduce(e,function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration},0)}}]),o}(xu);function rf(){var e=fl("QC175");if(!e)return!1;try{e=JSON.parse(e)}catch(e){return console.log("parse qc175 error",e),!1}return e}function af(){var e=hl();e&&(e="https://userpref.iqiyi.com/apis/userpref/list.action?"+Eu({authcookie:e,props:"upd",agentType:1}),ul({url:e,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,success:function(e,t){e=e||{};"success"==t&&"A00000"==e.code&&(e={upd:"1"!==((e.data||{}).upd||{}).value,ct:(new Date).getTime()},pl("QC175",JSON.stringify(e),{path:"/",domain:"iqiyi.com"}))}}))}var of=bu.is,sf=(c()(cf,[{key:"load",value:function(){return this.setParam().normalizeRequestParam().compressParamKey().encryptShowParam().getUrl().sendRequest()}},{key:"addEncryptionParam",value:function(e){bu.extend(this.encryptionParam,e)}},{key:"addParam",value:function(e){bu.extend(this.param,e)}},{key:"setParam",value:function(){var e=this.request,t=e.vv.sdk,i=e.vv;t.updateUser(i),this.addParam(bu.extend({timestamp:Date.now(),requestId:e.requestId},e.getMultiVals(["adPlayerId","uaaUserId","passportId","requestId"])));var n=Ll(window.document.referrer||"")||{},r=function(){var e=window.location.href,t="";try{t=decodeURIComponent(e)}catch(e){}return(t=t.split("?")[0].split("#")[0]).replace(/[\u200B-\u200D\uFEFF]/g,"")}(),n=bu.extend({referrer:n.host,needPolicy:e.needPolicy,url:r.replace(/^https:/,"http:"),ptid:t.ptid||"",vft:e.vft,timePoint:t.timePoint,usePartnerData:function(){if(!hl())return 1;var e=rf();return!e||!1!==e.upd}()?0:1,cuepointList:e.cuepointList,supportIQiyiTracking:!0,supportEmptyTracking:!0,encryptionVersion:""},e.getMultiVals("episodeId albumId videoDuration isVIP isPreload clientVersion sdkVersion searchQuery passportCookie requestIndex vvId pauseRequestTimes prerollOrderItemIds playSource".split(" ")));"preroll"==e.type&&!i.isPreload&&"iqiyiw"==t.site&&!i.isAutoMapPlayerId&&i.couponCode&&i.couponVer&&r&&1==t.vvCnt&&(n=bu.extend(n,e.getMultiVals("couponCode couponVer".split(" "))));t=sl();t&&(n=bu.extend(n,{idx:t.idx})),this.addEncryptionParam(n);t=i.getContinuingVVs(),n={continuingVideoPlayedCount:t.length,continuingVideoPlayedDuration:bu.sumBy(t,"videoDuration"),continuingAdPlayedDuration:bu.sumBy(t.concat(i),"adPlayedDurationInView")};this.addEncryptionParam(n);t={adPlayedDurationInDay:Yh.data.adPlayedDurationInDay},n=(n=i.mw.videoPlayedDurationInDay())&&parseInt(n);return t.videoPlayedDurationInDay=n||0,"midroll"==e.type&&(t.midrollPointsPlayedInView=i.midrollPointsPlayedInView,t.lastMidrollRequestTime=i.lastMidrollRequestTime,i.lastRollCompleteTime&&(t.lastRollCompleteInterval=Math.round((Date.now()-i.lastRollCompleteTime)/1e3))),this.addEncryptionParam(t),this}},{key:"normalizeRequestParam",value:function(){var i=this;return bu.each(["needPolicy","supportIQiyiTracking","supportEmptyTracking","isVIP","isPreload"],function(e){var t=i.encryptionParam[e];of.bool(t)&&(t=t?1:0),i.encryptionParam[e]=t}),i}},{key:"compressParamKey",value:function(){return this.debug("request param",this.param),this.compressedParam=qu(Nl)(this.param),this.debug("compressed request param",bu.extend({},this.compressedParam)),this.compressedParam.e.q=this.compressedParam.e.q.map(function(e){return Eu(e,",",":")}).join(";"),this}},{key:"encryptShowParam",value:function(){var t,i=this.request.getVal("adPlayerId"),n=Eu(this.compressedParam.e,"&","=",{keepRaw:!0});if(i&&n){try{t=Xl.encryptBySeed(n,i)}catch(e){console.error("encrypt error",n,i),t=""}this.compressedParam.e=t}return this}},{key:"getUrl",value:function(){var e="/show2",t=this.compressedParam,i=this.previewParam=function(){var e=Ll(window.location.href,!0).query,t="w y z".split(" "),e=bu.only(e,t);if(bu.keys(e).length==t.length)return e}();return i&&(this.debug("preview mode",i),e="/preview3",t=bu.extend({},i,t)),this.url="https://t7z.cupid.iqiyi.com"+e+"?"+Eu(t),this.debug("show url",this.url),this}},{key:"sendRequest",value:function(){var n=this,r=Date.now();return new Promise(function(i){ul({url:n.url,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,checkParserError:!0,success:function(e,t){i({textStatus:t,data:e,duration:{start:r,end:Date.now()}})},error:function(e,t){i({textStatus:t,data:e,duration:{start:r,end:Date.now()}}),n.debug("error status:",e,t)},complete:function(e,t){"timeout"==t&&i({textStatus:t,duration:{start:r,end:Date.now()}}),n.debug("show complete",Date.now()-r,t)}})}).then(function(e){return n.onComplete(e)})}},{key:"onComplete",value:function(e){this.debug("status:",e.textStatus,e.duration);var t=this,i=t.request.vv.sdk;"preroll"==t.request.type&&(i.showTime=e.duration),t.requestCount++;var n={pingbackType:"show",requestDuration:e.duration.end-e.duration.start};if("success"==e.textStatus)return t.debug("response",e.data),n.requestCount=-1,t.parsedShow=function(t,e,i){try{a=Xl.decryptShowResponse(e.url,t)}catch(e){a=t}var n=Jl(a),r=e.request,a=bu.extend({},n);if(e.debug("humanize response",a),n.pingbackParam&&(r.pingbackParam=n.pingbackParam),n.request=r,n.errorCode){i.subtype="error",i.errorCode={302400:305,302500:306,302503:307,302600:308}[n.errorCode],i.errorMessage=n.serverError;var o=1==(n.slots&&n.slots[0]||{}).cuepointType;if(305===i.errorCode||308===i.errorCode&&"preroll"==r.type&&o){if(cl(r,i),305===i.errorCode)return{error:"paramerror",data:n};if(308===i.errorCode)return{error:"invalidplayer",data:n}}}else{i.subtype="success";a=r.vv.sdk,o=r.vv;n.cupidUserId&&(a.cupidUserId=n.cupidUserId),n.serverTime&&(r.deltaTime=e.deltaTime=n.serverTime-Date.now()),n.pingbackConfig&&(r.pingbackConfig=n.pingbackConfig),n.clientIP&&(e=zl.atob(n.clientIP),a.userIP=e),a.isVIP=a.getUser().isVIP,n.videoInfo&&(o.disableSkipAd=n.videoInfo.disableSkipAd,o.videoInfo=n.videoInfo,bu.extend(o,n.videoInfo)),n.vipCheckConflict&&(a.isVIP=1==n.vipCheckConflict.isVIP),a.vipCheckResult=n.vipCheckResult||{}}return n.slots=n.slots.map(function(e){return new nf(e,n,r)}),r.slots=n.slots,cl(r,i),n}(e.data,t,n),"preroll"!=t.request.type||function(){var e=rf();if(e){e=e.ct||0;return(new Date).getTime()-e<864e5}}()||setTimeout(af,0),t.parsedShow;i={timeout:302,parsererror:304,error:301};return n.errorCode=i[e.textStatus]||301,t.requestCount<t.max?(n.requestCount=t.requestCount,n.subtype="error",cl(t.request,n),t.debug("show request retry",t.requestCount),t.sendRequest()):(n.requestCount=-1,n.subtype="error",cl(t.request,n),t.debug("request retry use up"),{error:e.textStatus,errorCode:i[e.textStatus]||301})}}]),cf);function cf(e){f()(this,cf),this.requestCount=0,this.max=2,this.request=e,this.param={},this.debug=e.vv.sdk.logger.getLogger("show"),this.encryptionParam=this.param.encryption={}}var df=bu.is,uf="requestId adBreak cuepointList needPolicy requestIndex from type vft".split(" "),lf=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),i=r.call(this,"request"),l()(i).setParent(t),i.state="idle",i.debug=t.sdk.logger.getLogger("request"),i.type=e.type,i.init(e),i}return c()(a,[{key:"init",value:function(e){bu.extend(this,bu.only(e,uf));e=e.requestId||function(e){e=[e.vv.vvId,Date.now()];return Ol(e.join(""))}(this);this.id=this.requestId=e}},{key:"load",value:function(){var s=this;if("ended"!=s.state)return s.memoryLoad=s.memoryLoad||new Promise(function(o,t){s.state="loading",(s.show=new sf(s)).load().then(function(e){df.empty(e.policySlots)||s.vv.schedule.setPolicy(e.policySlots);var t,i,n,r,a=s.vv.sdk;s.isRoll()&&(a.requestEndTime=a.loadStartTime=Date.now(),i=s.getSlotByCpt(e.slots,15),"preroll"==s.type?(t=s.getSlotByCpt(e.slots,1),i&&s.vv.schedule.completeBriefRoll(i)):"midroll"==s.type&&(t=e.slots&&e.slots[0]),t&&!df.empty(t.ads)?("preroll"==s.type&&(n=[],bu.each(t.ads,function(e){n.push(e.orderItemId)}),s.vv.prerollOrderItemIds=n.join(",")),"mraid"==t.ads[0].creative.templateType&&(a.setViewController(),s.debug("mraid and request vc")),t.isSeekableOriginalSlot()?t.loadAllAdsToVideo().then(function(){s.vv.startLoadVideo({reason:"load complete",rollType:s.type})}):t.tryLoadToVideo(a).then(function(){1===t.cuepointType&&s.checkEmptyCreativeUrls(t),s.loadBriefRoll(i,{reason:"load complete",rollType:s.type})}).catch(function(){a.loadEndTime=a.loadEndTime||Date.now(),s.loadBriefRoll(i,{reason:"load fail",rollType:s.type})}),"midroll"==s.type&&(s.vv.lastMidrollRequestTime=t.startTime,s.vv.schedule.bindVideoTimeEvt(t.startTime-5,function(){a.setViewController(function(){a.rollView.startMidrollTip()})}))):(s.checkCoupon(),a.loadEndTime=Date.now(),s.loadBriefRoll(i,{reason:"noad",rollType:s.type}))),s.isWholeCorner()&&s.vv.schedule.initWholeCorner(e.slots),df.empty(e.conf)||(r=e.conf||{},a.reqMiaozhenTime=r.reqMiaozhenTime||0,a.miaozhenJsonPUrl=r.miaozhenJsonPUrl||"",s.debug("reqMiaozhenTime: ",a.reqMiaozhenTime,", miaozhenJsonPUrl: ",a.miaozhenJsonPUrl)),a.cupidServerTimeGap=e.serverTime-Date.now(),s.debug("cupidServerTimeGap: ",a.cupidServerTimeGap),o(e)}).catch(function(e){s.debug("show error",e),s.end(),t(e)})}),s.memoryLoad}},{key:"loadBriefRoll",value:function(e,t){var i=this,n=i.vv.sdk;e&&!df.empty(e.ads)?e.tryLoadToVideo(n).then(function(){i.vv.startLoadVideo({reason:"load complete",rollType:"briefRoll"}),"preroll"==i.type&&i.vv.startLoadVideo(t)}).catch(function(){i.vv.startLoadVideo({reason:"load fail",rollType:"briefRoll"}),"preroll"==i.type&&i.vv.startLoadVideo(t)}):("preroll"==i.type&&i.vv.startLoadVideo({reason:"noad",rollType:"briefRoll"}),i.vv.startLoadVideo(t))}},{key:"play",value:function(){var i=this;"ended"!=i.state&&i.load().then(function(e){if("ended"!=i.state){if(e.error)return i.showErrorHandler(e),void i.end();var t;e?(i.trySendInventoryDirectly(e.slots),"secondary"==i.type?(t=[],bu.each(e.slots,function(e){8==e.cuepointType?t.push(e):(i.debug("slot cpt",e.cuepointType),e.play())}),0<t.length&&i.vv.schedule.initViewPoint(t)):(e=e.slots[0],i.state="playing",e?e.play():i.end())):i.end()}}).catch(function(e){i.debug("error",e)})}},{key:"showErrorHandler",value:function(e){var t={paramerror:305,invalidplayer:308,parsererror:304,error:301}[e.error]||301;this.pullAdblockBlackScreen(this,{errorCode:t,errorMessage:e.error,requestCount:this.show.requestCount,cupidUserId:e&&e.data&&e.data.cupidUserId})}},{key:"end",value:function(e){this.state="ended",this.sendInventory(),this.isRoll()&&"ended"!=this.vv.state&&this.vv.startVideo(e||this.type)}},{key:"isRoll",value:function(){return"preroll"==this.type||"midroll"==this.type||"briefRoll"==this.type}},{key:"isWholeCorner",value:function(){return"whole_corner"==this.type}},{key:"abort",value:function(){var e;this.show&&this.show.ajax&&this.show.ajax.abort(),this.slots&&(e=this.slots,bu.each(e,function(e){e.abort()})),this.end()}},{key:"reset",value:function(){bu.each(this.slots,function(e){e.reset()})}},{key:"trySendInventoryDirectly",value:function(e){!df.empty(e)&&"secondary"!=this.type||this.sendInventory()}},{key:"sendInventory",value:function(){var e;this.inventorySent||(this.inventorySent=!0,this.show&&this.show.parsedShow&&this.show.parsedShow.inventory?(this.debug("send inventory"),e=bu.only(this.show.parsedShow.inventory,"originalInventory rawInventory deliveredInventory forbiddenInventory"),cl(this,bu.extend({pingbackType:"inventory",subtype:"success"},e))):this.debug("no data to send inventory"))}},{key:"pullAdblockBlackScreen",value:function(e,t){var i,n=this.vv.sdk;n.isPreload||n.isVIP||"iqiyiw"!=n.site&&"ppsw"!=n.site||(i=t.errorCode)&&-1!=bu.values(Wh).indexOf(i)&&(t&&(t.pingbackType="statistics",t.subtype="adblock",cl(e,t)),n.emit("adplayer_ad_block",{videoEventId:this.vv.getVal("videoEventId")}),this.debug("notify player adblock"),n.setViewController(function(){return n.viewController.blackscreen.triggerAdblockCBK(e)}))}},{key:"checkEmptyCreativeUrls",value:function(e){var t=this.show;this.noCreativeUrlAds.length==e.ads.length&&this.pullAdblockBlackScreen(this,{errorCode:Wh.CODE_VIDEO_HTTP_ERROR,errorMessage:"creativeUrl is missing",requestCount:t.requestCount})}},{key:"checkErrorCreativeUrls",value:function(e){this.errCreativeUrlAds&&(this.errCreativeUrlAds.push(e),this.errCreativeUrlAds.length==e.slot.ads.length&&this.pullAdblockBlackScreen(e,{errorCode:Wh.CODE_VIDEO_HTTP_ERROR,errorMessage:"video-error"}))}},{key:"checkCoupon",value:function(){var e=this.vv,t=e.sdk,i=window.location.pathname,n=window.location.search,n="iqiyiw"===t.site&&bu.startsWith(i,"/v_")&&!bu.includes(n,"list=");e.isPreload||e.couponCode&&e.couponVer||!n||1!=t.vvCnt||this.pullAdblockBlackScreen(this,{errorCode:Wh.CODE_S_COUPON_NOT_FOUND,errorMessage:"noad"})}},{key:"getSlotByCpt",value:function(e,t){return bu.find(e,function(e){return e.cuepointType==t})}}]),a}(xu),hf=bu.is,ff=(c()(_f,[{key:"addInfo",value:function(e){this.slot=(e=e||{}).slot||null}},{key:"isMid",value:function(){return!!(bu.includes([2,10,11,13,15],this.cuepointType)&&0<this.startTime)}},{key:"isOverlay",value:function(){return!!bu.includes([8,10,11],this.cuepointType)}},{key:"isValid",value:function(){return hf.number(this.startTime)&&hf.number(this.cuepointType)}},{key:"isLoaded",value:function(){return!!(this.request||this.ad||8==this.cuepointType||13==this.cuepointType||this.hasLoaded)}},{key:"refresh",value:function(){this.request=null,this.hasPlayed=!1,this.hasLoaded=!1}},{key:"canLoad",value:function(e){return e>=this.startTime-10&&e<=this.startTime}},{key:"abort",value:function(){this.request?this.request.abort():this.ad&&this.ad.abort()}}]),_f),pf=bu.is;function _f(e){f()(this,_f);var t=this;t.startTime=(e=e||{}).startTime,t.cuepointType=e.cuepointType,t.adZoneId=e.adZoneId,t.sequenceId=e.sequenceId,t.adZoneStyle=e.adZoneStyle,t.state=null,t.request=null,t.hasLoaded=e.hasLoaded||!1,t.ad=e.ad||null,t.slot=e.slot||null,t.priority=0,2==t.cuepointType?t.priority=10:8==t.cuepointType&&(t.priority=9)}function gf(e){e&&e.sort(function(e,t){var i=e.cuepointType-t.cuepointType;return i=0==i?e.startTime-t.startTime:i})}function yf(e){var t=bu.filter(e,function(e){return!vf(e)}),t=bu.map(t,function(e){return e.priority}),i=bu.max(t);return bu.filter(e,function(e){return!(i!=e.priority&&!vf(e)&&13!==e.cuepointType&&(e.state="banned"))})}function vf(e){if(8===e.cuepointType){e=e.slot||{};return pf.empty(e.ads)}}var mf=bu.is,bf=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){f()(this,a);var t=r.call(this),i=l()(t);return i.vv=e,i.videoEventId=e.videoEventId,i.mw=i.vv.mw,i.bindMwEvent(),i.log=e.sdk.logger.getLogger("schedule:"+e.videoEventId),i.adBreaks=[],i.allAdBreaks=[],i.midrollPoints={},i.currentAdId=null,i.hasBindSeeked=!1,i.enabled=!0,i.running=!1,i.init(),t}return c()(a,[{key:"init",value:function(){this.binVideoEvent(),this.fetchAndPlayPreroll(),this.log("schedule inited")}},{key:"bindMwEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked loadstart afterSeeked pausetoplay".split(" "),o=this;o.handleMwEvt=function(e){var t=e.type,i=bu.includes(["play","playing","timeupdate"],t),n=e.gas||{};if(o.enabled||("error"==t||"loadstart"==t)&&n.id){var r=n.id;if(n.videoEventId===o.videoEventId){if(i&&(a=o.vv.sdk,o.loadedVC||(o.loadedVC=!0,a.setViewController())),o.emit(t,e),r){var a=o.vv.sdk.adMap[r];if(a)return(i||"seeked"===t&&a.slot.isSeekableOriginalSlot())&&o.setCurrentAd(r,a,e),o.stopTimer(),void o.emitToAd(a,"video-"+t,e);o.log("error!, fail to find ad",n),o.mw.abort()}else o.startTimer();o.removeCurrentAd()}}else o.mw.pause()},e.forEach(function(e){o.mw.on(e,o.handleMwEvt)})}},{key:"binVideoEvent",value:function(){var s=this;s.timerHandler=function(e){s.currentTime=Math.round(s.mw.currentTime());var t,n,r,a,i=bu.get(e,"data.actionType"),o=bu.get(e,"data");"seeked"==e.type&&(s.log("seeked",s.currentTime,i),"controls"==i&&(s.onUserSeeked(o),s.disableAutoChooseMidroll(" seek"))),"afterSeeked"==e.type&&(s.log("after seeked",s.currentTime,i),"controls"==i&&s.afterUserSeeked(o)),null==s.lastTime&&0<(t=bu.get(s,"midrollPoints.nextMidroll"))&&t<s.currentTime&&s.disableAutoChooseMidroll(""),s.lastTime!=s.currentTime&&s.updateVideoTime(e),2<s.vv.ipdxReqErrCount||(i=s.vv.sdk.reqMiaozhenTime,mf.number(i)&&0<i&&(o=sl(),t=s.vv.sdk.cupidServerTimeGap?s.vv.sdk.cupidServerTimeGap+Date.now():Date.now(),e=o&&1e3*+o.exptime-t<3e5,o&&!e||(t=s.currentTime>i,i=s.vv.sdk.isWaitingIpdxResponse,t&&!i&&(s.log("isIpdxOverdue:",e,"ipdxInfo:",o),s.log("hasReachReqMiaozhenTime: ",t,"isWaitingIpdxResponse:",i),n=s.vv,(i=n.sdk.miaozhenJsonPUrl)?(r={pingbackType:"ipdx",subtype:"error",errorMessage:i},a=!(n.sdk.isWaitingIpdxResponse=!0),ul({url:i,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,checkParserError:!0,success:function(e,t){var i=n.sdk.cupidServerTimeGap?n.sdk.cupidServerTimeGap+Date.now():Date.now();"success"==t&&((e=e)&&e.ip&&e.geocode&&e.exptime?i>new Date(1e3*+e.exptime-3e5).getTime()?(n.ipdxReqErrCount++,cl(n,bu.extend(r,{errorCode:1905,customeInfo:Eu({rsp:e,crt:i},",",":")}))):(pl("idx",JSON.stringify(e),{expires:new Date(Date.now()+31536e6)}),cl(n,{pingbackType:"ipdx",subtype:"success",customInfo:Eu({rsp:e,crt:i},",",":")})):e&&-1==e.code?(n.ipdxReqErrCount++,cl(n,bu.extend(r,{errorCode:1904,customeInfo:Eu({rsp:e,crt:i},",",":")}))):(n.ipdxReqErrCount++,cl(n,bu.extend(r,{errorCode:1906,customeInfo:Eu({rsp:e,crt:i},",",":")})))),n.sdk.isWaitingIpdxResponse=!1},error:function(e,t){var i=n.sdk.cupidServerTimeGap?n.sdk.cupidServerTimeGap+Date.now():Date.now();n.ipdxReqErrCount++,a=!0,cl(n,"parsererror"===t?bu.extend(r,{errorCode:1903,customeInfo:Eu({crt:i},",",":")}):bu.extend(r,{errorCode:1901,customeInfo:Eu({crt:i},",",":")})),n.sdk.isWaitingIpdxResponse=!1},complete:function(e,t){"timeout"!==t||a||(t=n.sdk.cupidServerTimeGap?n.sdk.cupidServerTimeGap+Date.now():Date.now(),n.ipdxReqErrCount++,cl(n,bu.extend(r,{errorCode:1902,customeInfo:Eu({crt:t},",",":")})),n.sdk.isWaitingIpdxResponse=!1)}})):n.ipdxReqErrCount++))))},s.playHandler=function(){var e,t;s.running&&(e=s.mw.currentTime(),s.log("video play",e),s.tryToStopPause(),(t=s.midrollPoints)&&t.autoChoose&&(-1!=(t=t.nextMidrollPoint)&&t<e&&s.disableAutoChooseMidroll("")),null==s.getCurrentAd()&&s.showAndResume())},s.pauseHandler=function(e){e=bu.get(e,"data.actionType");s.log("pause",e),"controls"==e&&s.mw.currentTime()&&s.running&&(s.vv.pauseTimes++,s.loadPause(),s.pauseOtherAd())},s.bindAudioEvt()}},{key:"unbindMWEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked afterSeeked loadstart pausetoplay".split(" "),t=this;e.forEach(function(e){t.mw.off(e,t.handleMwEvt)}),t.off()}},{key:"bindAfterSeekedEvt",value:function(){this.hasBindSeeked||(this.hasBindSeeked=!0,this.on("afterSeeked",this.timerHandler))}},{key:"loadPause",value:function(e){var t=this,i=t.getAdBreaksByType(6),i=bu.map(i,function(e){return bu.extend({},e,{sequenceId:t.vv.pauseTimes,startTime:t.currentTime})});mf.empty(i)?t.log("no pause schedule"):(t.log("load pause"),(e=e||{}).requestIndex=e.requestIndex||1,t.vv.pauseRequestTimes++,t.newAdRequest({adBreak:i[0],requestIndex:e.requestIndex,cuepointList:i,needPolicy:!1,from:e.from,type:"pause"},t.vv).play())}},{key:"tryToStopPause",value:function(){bu.remove(this.vv.requests,function(e){if("pause"==e.type)return e.abort(),!0})}},{key:"pauseOtherAd",value:function(){bu.each(this.vv.requests,function(e){bu.each(e.slots,function(e){bu.each(e.ads,function(e){bu.includes(["playing","paused"],e.state)&&e.pause()})})})}},{key:"showAndResume",value:function(){var t=this;bu.each(t.vv.requests,function(e){bu.each(e.slots,function(e){bu.each(e.ads,function(e){bu.includes(["playing","paused"],e.state)&&e.resume()})})}),bu.each(t.vv.currentOverlayAds,function(e){t.log("show and resume current overlay",e.creative.templateType,e.orderItemId);e=e.$adzone;e&&(e.style.display="",e.style.visibility="")})}},{key:"emitToAd",value:function(e,t,i){e&&(/timeupdate/.test(t)||(this.log("emit",t,e.id),e.emit(t,i)))}},{key:"setCurrentAd",value:function(e,t){var i=this;t=t||{},i.lastNotNullAdId=i.currentAdId||i.lastNotNullAdId,i.lastAdId=i.currentAdId,i.currentAdId=e,i.lastAdId!=i.currentAdId&&i.log("current roll changed ",i.lastAdId," => ",i.currentAdId,t.type)}},{key:"getCurrentAd",value:function(){var e=this.vv.sdk;return this.currentAdId?e.adMap[this.currentAdId]:null}},{key:"removeCurrentAd",value:function(){this.setCurrentAd(null,{type:"remove"})}},{key:"fetchAndPlayPreroll",value:function(){this.vv.sdk.initEndTime=this.vv.sdk.requestStartTime=Date.now();var e=this.newAdRequest({needPolicy:!0,cuepointList:[{cuepointType:1},{cuepointType:15}],type:"preroll",vft:this.vv.isPreload?"13":""},this.vv);this.vv.isPreload||e.play()}},{key:"requestSecondaryAd",value:function(){var r=this,a=r.vv.sdk;r.log("try load viewpoint and definitionswitching");var e=r.getAdBreaksByType(8),t=r.getPageAdBreaks(),i=e.concat(t.dsAdBreaks);mf.empty(i)||this.newAdRequest({needPolicy:!1,type:"secondary",cuepointList:i},r.vv).play();var o,n,s,c,e=r.vv;"iqiyiw"==a.site&&0<t.otherPageAdBreaks.length&&(i={continuingVideoPlayedCount:(i=e.getContinuingVVs()).length,continuingVideoPlayedDuration:bu.sumBy(i,"videoDuration"),continuingAdPlayedDuration:bu.sumBy(i.concat(e),"adPlayedDurationInView")},o=bu.extend({continuingInfo:i,policy:t.otherPageAdBreaks,adPlayerId:a.adPlayerId},e.initAresParam),n=function(){var e,t,i,n;window.ares&&window.ares.initByMars?(n=window.ares,a.hasInitedAres=!0,n.initByMars(o)):(r.log("not find ares and start load ares"),e=function(){var e;window.ares&&(r.log("load ares success"),e=window.ares,a.hasInitedAres=!0,e.initByMars(o))},t="//static.iqiyi.com/js/common/ares6.min.js?"+Date.now(),i=document.createElement("script"),n=document.getElementsByTagName("script")[0],i.async=!0,i.src=t,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){i.onload=null,e()},n.parentNode.insertBefore(i,n))},c=0,window.ares?n():s=setInterval(function(){c++,!window.ares&&8!=c||(clearInterval(s),n())},1e3))}},{key:"requestWholeCorner",value:function(){var e=this.getAdBreaksByType(13);mf.empty(e)||(this.log("start to load whole corner"),this.newAdRequest({adBreak:e,requestIndex:this.vv.requestIndex,cuepointList:e,needPolicy:!1,from:this.vv,type:"whole_corner"},this.vv))}},{key:"newAdRequest",value:function(e,t){t=new lf(e,t);return this.vv.requests.push(t),t.load(),t}},{key:"initViewPoint",value:function(e){var t,i,n,r=this,a=r.vv.sdk;a.isSupportViewpoint?(t=[],bu.each(e,function(e){bu.each(e.ads,function(e){t.push(e)})}),mf.empty(t)||(i=bu.map(t,function(e){var t=e.slot;r.vv.viewPointAdZoneId=t.adZoneId;var i=e.creative.creativeObject;i.imgUrl=nl(i.imgUrl),i.posterUrl=nl(i.posterUrl);var n=i.posterList||[];return i.posterList=bu.map(n,nl),e.exportAdObject=bu.extend({startTime:t.startTime,badge:e.badge,adUid:e.id,source:1,orderItemId:e.orderItemId,dspIcon:e.icon},i),e.exportAdObject}),n=bu.uniqBy(i,function(e){return e.startTime}),mf.empty(n)||r.removeConflictSlotsByViewPoints(t),r.log("notify player init_viewpoint"),a.emit("adplayer_ad_info",{type:"init_viewpoint",data:{ads:i,templateType:"viewPoint",adZoneId:r.vv.viewPointAdZoneId,videoEventId:r.vv.videoEventId,viewPoints:n}})),mf.empty(e)||(e=bu.map(e,function(e){return{ad:e.ads?e.ads[0]:null,slot:e,startTime:e.startTime,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}),r.log("init viewpoint",e),r.addBreaks(e))):r.log("page not support viewpoint",a.isSupportViewpoint)}},{key:"initWholeCorner",value:function(e){mf.empty(e)?this.log("no whole_corner schedule"):(e=bu.map(e,function(e){var t=e.ads?e.ads[0]:null;return{ad:t,slot:e,startTime:t&&t.startTime?t.startTime:0,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}),this.log("init whole corner",e),this.addBreaks(e),this.hasWholeCornerAdBreak=!0)}},{key:"completeBriefRoll",value:function(e){e?(this.log("complete brief roll",e),this.completeAdBreak(e)):this.log("no brief roll slot")}},{key:"setPolicy",value:function(e){var n;this.allAdBreaks=(n=[],bu.each(e,function(i){pf.empty(i.startTimes)?n.push(new ff({cuepointType:i.cuepointType,adZoneId:i.adZoneId,adZoneStyle:i.adZoneStyle})):bu.each(i.startTimes,function(e,t){n.push(new ff({startTime:e,cuepointType:i.cuepointType,adZoneId:i.adZoneId,sequenceId:t+1,adZoneStyle:i.adZoneStyle,hasLoaded:15==i.cuepointType}))})}),n),this.adBreaks=this.allAdBreaks.filter(function(e){return e.isMid()}),gf(this.adBreaks),this.log("set policy",this.adBreaks)}},{key:"getAdBreaksByType",value:function(t){return bu.filter(this.allAdBreaks,function(e){return bu.isMatch(e,{cuepointType:t})})}},{key:"getPageAdBreaks",value:function(){var t=[],i=[];return bu.each(this.allAdBreaks,function(e){e&&0==e.cuepointType&&0xe8d4a512a0==e.adZoneId&&i.push(e),e&&0==e.cuepointType&&0xe8d4a512a0!=e.adZoneId&&t.push(e)}),{otherPageAdBreaks:t,dsAdBreaks:i}}},{key:"addBreaks",value:function(e){var t=this;e=bu.map(e,function(e){return new ff(e)}),bu.each(e,function(e){e.isValid()&&t.adBreaks.push(e)}),gf(t.adBreaks)}},{key:"completeAdBreak",value:function(t){var i=t.startTime,n=t.cuepointType;bu.each(this.adBreaks,function(e){e.startTime===i&&e.cuepointType===n&&e.addInfo({slot:t})})}},{key:"bindAudioEvt",value:function(){var t=this;t.on("pausetoplay",function(){t.log("on pausetoplay");var e=t.vv&&t.vv.audioPause;e&&e.template.closeAudioPause()})}},{key:"startTimer",value:function(){var e=this;e.running||(e.running=!0,e.log("start schedule timer"),e.on("timeupdate",e.timerHandler),e.on("seeked",e.timerHandler),e.on("play",e.playHandler),e.on("pause",e.pauseHandler))}},{key:"stopTimer",value:function(){var e=this;e.running&&(e.log("stop schedule timer"),e.off("timeupdate",e.timerHandler),e.off("seeked",e.timerHandler),e.off("play",e.playHandler),e.off("pause",e.pauseHandler),e.running=!1)}},{key:"updateVideoTime",value:function(){0==this.currentTime%10&&this.log("update video time",this.currentTime),this.emit("videotime:"+this.currentTime),this.lastTime=this.currentTime,this.adBreaksTimeHandler()}},{key:"adBreaksTimeHandler",value:function(){var n=this,t=[],i=[];bu.each(n.adBreaks,function(e){"banned"!==e.state&&(e.isLoaded()||e.canLoad(n.currentTime)&&(n.log("adBreak canLoad",e),t.push(e),e.hasPlayed=!1),e.isLoaded()&&(n.currentTime==e.startTime||13===e.cuepointType&&n.currentTime>e.startTime)&&(e.hasPlayed||(i.push(e),e.hasPlayed=!0)))});var e=yf(t),r=yf(i);e.length!=t.length&&n.log("adbreaks to load conflict",e,t),r.length!=i.length&&n.log("adbreaks to play conflict",r,i),bu.each(e,function(e){n.log("adbreak load and fill",e);var t=e.cuepointType;e.request=n.newAdRequest({needPolicy:!1,cuepointList:[e],adBreak:e,vft:"",type:Uh[t]||t},n.vv)}),bu.each(r,function(e){var t=e.request,i=e.ad;n.log("adbreak to play",t,e),t?t.play():i?(i.slot.show.request.reset(),i.play()):8!=e.cuepointType&&13!=e.cuepointType&&15!=e.cuepointType||!e.slot||e.slot.complete()})}},{key:"onUserSeeked",value:function(t){var i=this,n=i.currentTime;i.log("onUserSeeked",t),t.beforeIsAD||bu.each(i.adBreaks,function(e){e.startTime>n&&13!=e.cuepointType&&(e.isLoaded()&&e.hasPlayed||15==e.cuepointType&&i.currentTime<i.lastTime&&i.lastTime>e.startTime&&i.currentTime<e.startTime&&!t.isAD)&&(e.abort(),e.refresh())})}},{key:"setAutoChooseMidRoll",value:function(e){e&&mf.bool(e.autoChoose)&&(this.log("",e),(this.midrollPoints=e).autoChoose?this.enableAutoChooseMidroll(e.nextMidroll):this.disableAutoChooseMidroll(""))}},{key:"enableAutoChooseMidroll",value:function(t){this.currentTime>t?this.log(""):(this.log("",t),bu.each(this.adBreaks,function(e){2==e.cuepointType&&(e.startTime==t?e.state=null:e.state="banned")}))}},{key:"disableAutoChooseMidroll",value:function(e){!1!==this.midrollPoints.autoChoose&&(this.log("",e,this.midrollPoints),this.midrollPoints={autoChoose:!1},bu.each(this.adBreaks,function(e){2==e.cuepointType&&(e.state=null)}))}},{key:"ban",value:function(t){var e=bu.filter(this.adBreaks,function(e){return bu.isMatch(e,t)});bu.each(e,function(e){e.state="banned"}),this.log("ban ad breaks",t,e)}},{key:"removeConflictSlotsByViewPoints",value:function(e){var n,r=this,t=r.adBreaks;t&&e&&(n=bu.map(e,function(e){return e.slot.startTime}),r.adBreaks=bu.filter(t,function(e){var t=bu.includes([4,9,10,11],e.cuepointType),i=bu.includes(n,e.startTime);return!(t&&i&&(r.log("remove conflict points",{startTime:e.startTime,cuepointType:e.cuepointType}),1))}))}},{key:"afterUserSeeked",value:function(e){e.beforeIsAD&&this.afterUserSeekedInOriginalRoll(e)}},{key:"afterUserSeekedInOriginalRoll",value:function(e){var t=this,i=t.getCurrentAd()||null,n=Boolean(e.isFusionMode)||!1,r=(n?Number(e.current):t.currentTime)||0,a=Boolean(e.beforeIsAD)||!1,o=Number(e.beforeSeek)||0,s=Boolean(e.isAD)||!1,e=(e.referrerGas||{}).id,r={isFusionMode:n,beforeIsAD:a,beforeSeek:o,referrerGasId:e,afterIsAD:s,afterSeek:r,ad:i||null};n?(n=t.vv.sdk,e=e||t.lastAdId||t.lastNotNullAdId,(e=(n=n.adMap[e]||{}).slot||null)&&e.isSeekableOriginalSlot()&&(t.log("after seeked in origin midroll of fusion mode",r),t.seekHandlerInFusionMode(r),e=t.calcBeforeSeekOfs(r),e=Eu({ofs:Math.round(e)},",",":"),dl(n,"seek",e),n.isSeeked=!0)):i&&i.isSeekableOriginalRoll()&&(t.log("after seeked in midroll of split mode",r),t.seekHandlerInSplitMode(r),o=Eu({ofs:Math.round(o)},",",":"),dl(i,"seek",o),i.isSeeked=!0)}},{key:"seekHandlerInSplitMode",value:function(e){var t,i,n,r,a=e.ad;a&&(t=Math.round(e.afterSeek),i=e.beforeIsAD,n=e.beforeSeek,r=e.afterIsAD,n=n<e.afterSeek,"forwardInAd"!==(n=i&&r&&n?"forwardInAd":i&&r&&!n?"backwardInAd":void 0)&&"backwardInAd"!==n||(this.log("seek movement in original midroll",n),a.emit("progressReseted",t)))}},{key:"seekHandlerInFusionMode",value:function(e){var t,i,n,r,a,o,s,c,s=(t=e.beforeIsAD,i=e.beforeSeek,n=e.referrerGasId,c=e.afterIsAD,r=e.afterSeek,s=(e.ad||{}).id,a=t&&!c,o=t&&c,t=mf.empty(n),c=mf.empty(s),s=n===s,r=i<r,a?"outofAd":o&&s&&!t&&!c?"inSameAd":!o||s||t||c||!r?!o||s||t||c||r?void 0:"backwardCrossAds":"forwardCrossAds"),t=e.referrerGasId,c=e.afterSeek,r=e.ad,e=this.vv.sdk,t=t||this.lastAdId||this.lastNotNullAdId,t=e.adMap[t]||{};if(this.log("seek handler in fusion mode type",s),"outofAd"===s){t.notAutoPlayNext=!0;var d=t.duration||15;return t.emit("progressReseted",d,!0),void t.slot.complete()}"inSameAd"!==s?"forwardCrossAds"!==s&&"backwardCrossAds"!==s||(t.notAutoPlayNext=!0,d=t.duration||15,s=this.calcOfsInFusionMode(c,r),t.emit("progressReseted",d),r.template.hasPlaying=!1,r.emit("progressReseted",s)):(c=this.calcOfsInFusionMode(c,r),r.emit("progressReseted",c))}},{key:"calcBeforeSeekOfs",value:function(e){var t=e.isFusionMode,i=t.isFusionMode,e=t.beforeSeek,t=t.beforeAd;return i?t?this.calcOfsInFusionMode(e,t):0:e}},{key:"calcOfsInFusionMode",value:function(e,t){var i=t.getParentByName("slot")||{},t=e-i.startTime-i.calcRollDurationBefore(t);return 0<t?t:0}},{key:"bindVideoTimeEvt",value:function(e,t){this.on("videotime:"+e,t)}}]),a}(K),kf=(c()(xf,[{key:"addAdIntoCollisingList",value:function(e){var t;e.id&&(-1==(t=Sf(this.needDetectingList,e.id))?this.needDetectingList.push(e):this.needDetectingList[t]=e,this.log("wholecorner after addAd the list",this.needDetectingList))}},{key:"removeAd",value:function(e){e=Sf(this.needDetectingList,e);-1!=e&&this.needDetectingList.splice(e,1),this.log("wholecorner after removeAd the list",this.needDetectingList)}},{key:"wholeCornerCollidedWithOriginalList",value:function(){var e=this.wholeCorner;if(this.wholeCornerIsValid()){e=this.isCollidedWithOriginalList(e);return this.log("wholecorner collision result",e),e}return this.log("wholecorner does not exist"),!1}},{key:"isCollidedWithOriginalList",value:function(e){for(var t=this.needDetectingList,i=!1,n=0;n<t.length;n++)if(this.checkCollision(t[n],e)){i=!0;break}return this.log("wholecorner happen collising? ",i?"yes":"no"),i}},{key:"notifyWholeCornerToShow",value:function(){var e,t=this.wholeCorner;!t||!t.id||t.showing||this.wholeCornerCollidedWithOriginalList()||(e=this.vv.wholeCorner.$adzone)&&(t.timer&&t.timer.running&&!t.timerStatus.display||(t.timer&&!t.timer.running&&t.timer.start(),this.log("notify whole corner to show"),e.style.display="",e.style.visibility="",this.wholeCorner.showing=!0))}},{key:"notifyWholeCornerToHide",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.wholeCorner,i=t&&t.id&&t.showing,n=this.wholeCornerCollidedWithOriginalList(),e=n||e.forceHide;i&&e&&((e=this.vv.wholeCorner.$adzone)&&(t.timer&&!t.timer.running||(t.timer&&t.timer.running&&n&&t.timer.stop(),this.log("notify whole corner to hide"),e.style.display="none",e.style.visibility="hidden",this.wholeCorner.showing=!1)))}},{key:"setWholeCorner",value:function(e){this.wholeCorner=e}},{key:"getWholeCorner",value:function(){return this.wholeCorner}},{key:"wholeCornerIsValid",value:function(){return!(!this.wholeCorner||!this.wholeCorner.id)}},{key:"checkCollision",value:function(e,t){if(e.willDefinitelyCollide)return!0;var i=e.y,n=e.x,r=parseFloat(e.x)+parseFloat(e.width),a=parseFloat(e.y)+parseFloat(e.height),o=t.y,s=t.x,e=parseFloat(t.x)+parseFloat(t.width),t=parseFloat(t.y)+parseFloat(t.height);return!(a<o||e<n||t<i||r<s)}}]),xf);function xf(e){f()(this,xf),this.log=e.sdk.logger.getLogger("collisionDetection"),this.vv=e,this.needDetectingList=[],this.wholeCorner={}}function Sf(e,t){for(var i=-1,n=0;n<e.length;n++)if(e[n].id==t){i=n;break}return i}var Tf,Pf="videoEventId channelId episodeId albumId videoDefinition videoDuration autoload playSource isPreload isSupportViewpoint couponCode couponVer isAutoMapPlayerId vvId".split(" "),If=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){f()(this,a);var i=r.call(this,"vv"),n=l()(i);return n.setParent(e),n.mw=e.videoMidware,n.state="idle",n.initAresParam=t,n.requests=[],n.prerollOrderItemIds="",n.videoInfo={},n.lastRollCompleteTime=NaN,n.lastMidrollRequestTime=0,n.midrollPointsPlayedInView=0,n.adPlayedDurationInView=0,n.currentOverlayAds=[],n.pauseTimes=0,n.pauseRequestTimes=0,n.isBusy=!0,n.isAutoMapPlayerId=e.rawAdPlayerId!=e.adPlayerId,n.log=e.logger.getLogger("vv:"+e.videoEventId),n.ipdxReqErrCount=0,n.init(t),i}return c()(a,[{key:"init",value:function(e){var t=this,i=t.sdk;(e=bu.extend({playSource:0,isPreload:!1,isAutoMapPlayerId:i.rawAdPlayerId!=i.adPlayerId},e)).vvId=function(e){e=[e.episodeId,e.uaaUserId,Date.now(),Math.random()];return Ol(e.join(""))}(e);e=bu.only(e,Pf);t.log("vv init:",e),bu.extend(t,e),cl(t,{pingbackType:"visit",subtype:"success",location:bu.get(window,"location.href"),customInfo:t.sdk.script}),t.isPreload&&t.sdk.currentVV&&(t.continueFromVV=t.sdk.currentVV),t.schedule=new bf(t),t.adCollisionDetection=new kf(t)}},{key:"startVideo",value:function(e){var t,i=this;!0!==i.isVideoPlaying&&"ended"!=i.state&&(t={rollType:e,videoEventId:i.videoEventId},i.log(e="roll-ended",t),i.sdk.emit(e,t),i.onNetworkFree(),i.schedule&&!i.schedule.hasWholeCornerAdBreak&&i.schedule.requestWholeCorner(),i.schedule&&i.schedule.startTimer(),i.isVideoPlaying=!0,i.sdk.setViewController(function(){i.sdk.rollView.removeOptions("video start")}))}},{key:"stopVideo",value:function(e){var t=this;!1!==t.isVideoPlaying&&(e={rollType:e,videoEventId:t.videoEventId},t.log("roll-play",e),t.sdk.emit("roll-play",e),t.schedule&&t.schedule.stopTimer(),t.sdk.setViewController(function(){t.sdk.rollView.midrollTip.end()}),t.isVideoPlaying=!1)}},{key:"isCurrentVV",value:function(){return this==this.sdk.currentVV}},{key:"exitFullscreen",value:function(){var e=this.mw;e.isWebFullScreen()&&(this.log(""),e.webfullscreentoggle()),e.isFullScreen()&&(this.log(""),e.fullscreentoggle())}},{key:"disableVideo",value:function(){this.log("disable video"),this.schedule.enabled=!1;var e=this.sdk;e.setViewController(function(){e.rollView&&e.rollView.showMask()}),this.mw.pause()}},{key:"enableVideo",value:function(){this.log("enable video"),this.schedule.enabled=!0,this.mw.play();var e=this.sdk;e.rollView&&e.rollView.hideMask()}},{key:"onNetworkFree",value:function(){this.isBusy&&(this.log("networt free"),this.isBusy=!1,this.schedule.requestSecondaryAd())}},{key:"abort",value:function(){var e,t=this;"ended"!=t.state&&(t.log("abort"),t.state="ended",t.schedule&&(t.schedule.stopTimer(),t.schedule.unbindMWEvent()),e=t.sdk,t.log("notify player clear viewpoint"),e.emit("adplayer_ad_info",{type:"clear_viewpoint",data:{templateType:"viewPoint",adZoneId:t.viewPointAdZoneId,videoEventId:t.videoEventId}}),bu.each(t.requests,function(e){e.abort()}),this.stopBlackScreen())}},{key:"resize",value:function(){bu.each(this.requests,function(e){"ended"!=e.state&&bu.each(e.slots,function(e){"ended"!=e.state&&bu.each(e.ads,function(e){"ended"!=e.state&&e.resize()})})})}},{key:"isSportsVideo",value:function(){return this.videoInfo&&32==this.videoInfo.videoType}},{key:"getContinuingVVs",value:function(){for(var e=[],t=this.continueFromVV;t;)e.push(t),t=t.continueFromVV;return e}},{key:"startLoadVideo",value:function(e){var t,i,n;"ended"!=this.state&&(t="roll-load-finish",i=this.sdk,n={rollType:(e=e||{}).rollType,reason:e.reason,videoEventId:this.getVal("videoEventId")},"preroll"==e.rollType&&bu.extend(n,{showStartTime:i.showTime.start,showEndTime:i.showTime.end,showTime:i.showTime.end-i.showTime.start,requestStartTime:i.requestStartTime,requestEndTime:i.requestEndTime,requestTime:i.requestEndTime-i.requestStartTime,initStartTime:i.initStartTime,initEndTime:i.initEndTime,initTime:i.initEndTime-i.initStartTime,loadStartTime:i.loadStartTime,loadEndTime:i.loadEndTime,loadTime:i.loadEndTime-i.loadStartTime}),this.log(t,n),i.emit(t,n))}},{key:"stopBlackScreen",value:function(){var e=this.sdk;e.setViewController(function(){return e.viewController.blackscreen.stopBlackScreen()})}}]),a}(xu),ie=d(424),wf="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" "),Af=0,Ef={},K=function(){},K=K=window.console?function(e,t){var i,n=Date.now(),r=n-(Tf||n),i="color:"+(i=e.name,Ef[i]||(Ef[i]=wf[Af++%wf.length]),Ef[i]);Tf=n;var a="%c"+(t.prefix+e.name)+"%c",o=[null,i,"color:inherit"];bu.each(e.data,function(e){o.push(e),a+=" %o"}),o.push(i),a+="%c +"+r+"ms",o[0]=a,Function.prototype.apply.call(console.log,console,o)}:K,Df=bu.is,qf={level:0,MAX_LOG_LEN:3e3,debugKey:"debug",defaultLevelName:"log",defaultName:"default",_name:"",prefix:"",outputer:K},Of=(c()(Rf,[{key:"init",value:function(){var e,t,i,n;if(this.prefix=this.key+":",this.key)try{e=localStorage[this.key]}catch(e){}this._name=e,this.pattern=(i=[],n=[],(t=e)&&Df.string(t)&&bu.each(t.split(/[\s,]+/),function(e){"-"===(e=e.replace(/\*/g,".*?")).charAt(0)?i.push(new RegExp("^"+bu.slice(e,1)+"$")):n.push(new RegExp("^"+e+"$"))}),{skips:i,names:n}),this.enabled=this.isNameMatch(e)}},{key:"isNameMatch",value:function(t){var e=this.pattern;return!!t&&(!bu.some(e.skips,i)&&!!bu.some(e.names,i));function i(e){return e.test(t)}}},{key:"getLogger",value:function(e){var t=this;return e=e||t.defaultName,t.logger[e]||(t.logger[e]=function(){t.print(e,arguments)})}},{key:"print",value:function(e,t){t={name:e,key:this.key,data:t};this.logFilter(t,this.lastLog),this.enabled&&this.outputer(t,this)}},{key:"logFilter",value:function(e){e.time=Date.now(),this.saveLog(e)}},{key:"saveLog",value:function(e){this.logs.push(e),this.logs.length>this.MAX_LOG_LEN&&this.logs.shift()}}]),Rf);function Rf(e){f()(this,Rf);this.key=e,this.logger=[],this.logs=[],bu.extend(this,qf),this.init()}var Lf=ie.version+"-mars",Mf=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return f()(this,a),(t=r.call(this,"sdk")).playerId=e.playerId||"noPlayerId-"+Date.now(),t.script=bu.get(window,"document.currentScript.src"),t.vvCnt=0,t.vvs=[],t.adPlayedDurationInDay=0,t.version=t.sdkVersion=Lf,t.adMap={},t.logger=new Of("mars-"+t.playerId),t.debug=t.logger.getLogger("sdk"),t}return c()(a,[{key:"init",value:function(e){this.initStartTime=Date.now(),this.debug("sdk init",e,Lf),(e=bu.extend({},e)).episodeId=e.episodeId||e.tvId,e.isVIP=e.isVIP||!1,e.timePoint=e.timePoint||0,e.site=e.site||"iqiyiw",bu.extend(this,e),this.locale&&(bu.includes(["tw_t","cn_t"],this.locale)?this.locale="tw":this.locale="cn"),bu.includes(this.locale,"tw")&&(this.adPlayerId=this.adPlayerId||"qc_105136_100610",this.debug("tw cid",this.adPlayerId));var t,i,n=this.adPlayerId;this.adPlayerId=(i=t=n,t=bu.startsWith(i,"qc_")&&i.length=="qc_100001_100000".length?t:"qc_100001_100226"),e.isPreload?this.rawAdPlayerId=this.adPlayerId:this.rawAdPlayerId=this.rawAdPlayerId||n,this.uaaUserId=this.uaaUserId||(r=L.a.get("QC005"),(r=ll.empty(r)?L.a.get("QC006"):r)||"");var r=new If(this,e);this.vvCnt++,e.isPreload?this.preloadVV=r:(this.switchView(),this.currentVV=r),this.vvs.push(r),this.bindEvent()}},{key:"switchView",value:function(e){var t=this;this.debug("switch view",e||"normal");e="";t&&t.currentVV&&(e=t.currentVV.videoEventId),t.setViewController(function(){t.rollView.midrollTip.end()}),bu.remove(t.vvs,function(e){return e.abort(),!0}),t.currentVV=null,t.preloadVV=null,t.videoMidware&&t.videoMidware.play(),t.hasInitedAres&&e&&window.ares.stop({videoEventId:e})}},{key:"playPreload",value:function(){var t=this,i=this;this.debug("play preload");var e=i.currentVV.videoEventId;bu.remove(i.vvs,function(e){return e==i.currentVV&&(t.debug("abort vv"),e.abort(),i.currentVV=null,i.videoMidware.play(),t.debug("remove current vv"),!0)}),i.hasInitedAres&&window.ares.stop({videoEventId:e}),this.debug("play preload vv"),i.preloadVV&&(i.currentVV=i.preloadVV,i.preloadVV=null,(e=i.currentVV.requests[0])&&e.play())}},{key:"bindEvent",value:function(){var i=this,n=this;n.on("video-play",function(){i.debug("player notify video play"),i.setViewController()}),n.binResize(n.videoMidware.video()),n.on("click",function(e){var t;i.debug("click",e),e&&(t=e.data.id||e.data.adUid,(t=n.adMap[t])&&("viewpoint"==e.type?(t.emit("click"),cl(t,{pingbackType:"statistics",subtype:"click",customInfo:"viewPointSidebar"})):"definitionswitching"==e.type&&t.emit("clickAndOpen")))}),n.on("impression",function(e){var t;i.debug("impression",e),e&&(t=e.data.id||e.data.adUid,(t=n.adMap[t])&&("viewpoint"==e.type?t.hasSidebarImpressioned||(t.hasSidebarImpressioned=!0,cl(t,{pingbackType:"statistics",subtype:"impression",customInfo:"viewPointSidebar"}),"tips"!=t.creative.creativeObject.impressionArea&&t.emit("impression")):"definitionswitching"==e.type&&t.emit("impression")))}),n.on("impressionAdZone",function(e){this.debug("impressionAdZone",e);var t=e.data.adZoneId,e=n.currentVV;e&&t&&bu.each(e.requests,function(e){bu.each(e.slots,function(e){e.adZoneId==t&&e.sendEmptyTrackingBeforeTimeSlice(1/0)})})})}},{key:"binResize",value:function(t){var i=this,e=new hh(100,50),n=t.offsetWidth;function r(){var e=t.offsetWidth;e==n||(i.debug("video resize",n,"==>",e),i.resize(),n=e)}e.on("timer",r),window.addEventListener("resize",function(){r(),e.reset(),e.start()})}},{key:"getUser",value:function(){var e,t=bu.only(this,"isVIP passportId passportCookie uaaUserId cupidUserId");return this.videoMidware&&(e=this.videoMidware.getUserInfo(),bu.extend(t,e)),t||{}}},{key:"updateUser",value:function(){var e=this.getUser();return this.debug("update user info",e),bu.extend(this,e),e}},{key:"loadVC",value:function(){var e,t,i,n,r=this;return this.memoryLoadVC||(e=window.Mars_V?Promise.resolve(window.Mars_V):(t="//static.iqiyi.com/js/common/mars_v.js?"+Date.now(),i=document.createElement("script"),n=document.getElementsByTagName("script")[0],i.async=!0,new Promise(function(e){r.debug("load view controller"),i.src=t,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){i.onload=null,e()},n.parentNode.insertBefore(i,n)})),this.memoryLoadVC=this.memoryLoadVC||e,this.memoryLoadVC)}},{key:"setViewController",value:function(e){var t=this;t.viewController&&e?e():t.loadVC().then(function(){t.viewController||(t.ajax=ul,t.viewController=window.Mars_V.init(t),t.rollView=t.viewController.rollView),e&&e()})}},{key:"resize",value:function(){this.currentVV&&this.currentVV.resize()}},{key:"destroy",value:function(){this.switchView("destroy")}},{key:"fetchLogs",value:function(){this.debug("fetch logs",this.logger.logs.length);var e=this.logger.logs.slice(-500);return bu.map(e,function(e){var t=["[mars]["+(e.key||"")+"]["+e.name+"]"];return bu.each(e.data,function(e){if("object"==re()(e))try{e=JSON.stringify(e)}catch(e){}t.push(String(e))}),t.join(" ")}).join("\r\n")}}]),a}(xu),K={init:function(e){return function(e){e=new Mf(0<arguments.length&&void 0!==e?e:{});return window.Mars[e.playerId]=e}(e)}};"undefined"!=typeof window&&(window.Mars?K=window.Mars:window.Mars=K);var Cf=K,Nf=d(327),Bf=d(34),Ff=d(6),Uf=d(312),jf=d(313);var Vf=new E.a("Wonder.Data.PC"),ie=function(e){h()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(i);return t=n?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e,t){var i;return f()(this,a),i=r.call(this),e.playerType="wonder",i.adapter=t,i.ad=Cf.init({playerId:e.parentId}),e.tvid=Object(j.a)(e.tvid),i.engine=new nu(e,l()(i)),i.lang=Uf.a,i.engine.i18n.isTraditionalChinese()&&(i.lang=jf.a),i.view=new Nf.a(e,l()(i)),i.view.setting?i.view.init():i.view.once("viewsetdone",function(){i.view.init()}),A.a.init(),i.initEvent(),i}return c()(a,[{key:"initEvent",value:function(){var t=this.engine,i=this.adapter,n=!1;function r(e,t){Vf.log("adapter emit: ".concat(e)+(e===Bf.a.QYPLAYER_NOTIFY_TIMEUPDATE?"-".concat(t.current):"")),i.fire({type:e,data:t})}function a(e,t){(t=t||{}).state=e.toLocaleLowerCase(),Vf.info("state change: "+t.state),i.fire({type:Bf.a.QYPLAYER_STATE_CHANGE,data:t})}t.on(S.a.NTF_StatusChanged,function(e){switch(e.state){case S.a.Status_AdStartPlay:a(Bf.a.QYPLAYER_STATUS_AD_START_PLAY,e),i.loadSkin({isMini:t.isMini});break;case S.a.Status_AdPlaying:a(Bf.a.QYPLAYER_STATUS_AD_PLAYING,e);break;case S.a.Status_AdPaused:a(Bf.a.QYPLAYER_STATUS_AD_PAUSED,e);break;case S.a.Status_Loadstart:r(Bf.a.QYPLAYER_H5_VIDEO_LOADSTART);break;case S.a.Status_LoadedMetaData:r(Bf.a.QYPLAYER_H5_VIDEO_LOADEDMETADATA);break;case S.a.Status_StartPlay:a(Bf.a.QYPLAYER_STATUS_START_PLAY,e),i.loadSkin({isMini:t.isMini});break;case S.a.Status_Waiting:t.isSeeking()||a(Bf.a.QYPLAYER_STATUS_WAITING,e);break;case S.a.Status_Paused:a(Bf.a.QYPLAYER_STATUS_PAUSED,e);break;case S.a.Status_Playing:a(Bf.a.QYPLAYER_STATUS_PLAYING,e);break;case S.a.Status_Stoped:a(Bf.a.QYPLAYER_STATUS_STOPED,e);break;case S.a.Status_End_Play:a(Bf.a.QYPLAYER_STATUS_END_PLAY,e);break;case S.a.Status_PlayError:a(Bf.a.QYPLAYER_STATUS_ERROR,e),i.loadSkin({isMini:t.isMini})}}).on(S.a.NTF_VRSReady,function(e){r(Bf.a.QYPLAYER_STATUS_DATA_READY,e.data)}).on(S.a.NTF_CanPlayThrough,function(){}).on(S.a.NTF_VolumeChanged,function(e){n&&r(Bf.a.QYPLAYER_H5_VOLUME_CHANGED,e),n=!0}).on(S.a.NTF_DurationChanged,function(e){r(Bf.a.QYPLAYER_H5_DURATION_CHANGED,e)}).on(S.a.NTF_VideoChanged,function(e){t.isInteractVideo&&(e.isInteractVideo=t.isInteractVideo,e.uniqueId=t.iv_state.uniqueId,e.isIVSubSwitch=t.isIVSubSwitch),r(Bf.a.QYPLAYER_VIDEO_CHANGE,e)}).on(S.a.NTF_VideoChange,function(e){e.playerVersion=ad.a,t.isInteractVideo&&(e.isInteractVideo=t.isInteractVideo,e.uniqueId=t.iv_state.uniqueId),r(Bf.a.QYPLAYER_VID_CHANGE,e)}).on(S.a.NTF_FollowUpNextLoad,function(e){r(Bf.a.QYPLAYER_FOLLOW_UPNEXT_LOAD,e)}).on(S.a.NTF_AD_Start,function(e){r(Bf.a.QYPLAYER_NOTIFY_AD_START,e)}).on(S.a.NTF_AD_End,function(e){r(Bf.a.QYPLAYER_NOTIFY_AD_END,e)}).on(S.a.Status_AresNoticeInfo,function(e){r(e.type,e.data)}).on(S.a.NTF_TimeUpdate,function(e){r(Bf.a.QYPLAYER_NOTIFY_TIMEUPDATE,e)}).on(S.a.NTF_Seeking,function(e){r(Bf.a.QYPLAYER_STATUS_SEEKING,e)}).on(S.a.NTF_NeedUserGesture4Playback,function(e){Vf.info(", "),t.needUserGesture4Playback=!0,i.loadSkin({isMini:t.isMini}),r(Bf.a.QYPLAYER_NOTIFY_NeedUserGesture4Playback,e)}).on(S.a.NTF_Error,function(e){a(Bf.a.QYPLAYER_STATUS_ERROR,e),i.loadSkin({isMini:t.isMini}),"A00011"===e.code&&r(Bf.a.QYPLAYER_RECHARGE,{code:"Q00310",from:""})}).on(S.a.NTF_Recharge,function(e){i.loadSkin({isMini:t.isMini}),r(Bf.a.QYPLAYER_RECHARGE,e)}).on(S.a.NTF_BuyPlay,function(e){r(Bf.a.QYPLAYER_BuyPlay,e)}).on(S.a.NTF_AD_BLOCK,function(e){r(Bf.a.QYPLAYER_NOTIFY_AD_BLOCK,e)}),this.view.on(Bf.a.QYPLAYER_FIND_GOODS,function(e){r(Bf.a.QYPLAYER_FIND_GOODS,e)}).on(Bf.a.QYPLAYER_DOSOMETHING,function(e){r(Bf.a.QYPLAYER_DOSOMETHING,e)}).on(Ff.a.NTF_SHOW_LOGIN_PANEL,function(e){r(Bf.a.QYPLAYER_SHOW_LOGIN_PANEL,e)}).on(Ff.a.NTF_WebFullScreen_BeforeChange,function(e){r(Bf.a.QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE,"enter"===e)}).on(Ff.a.NTF_WebFullScreen_AfterChange,function(e){r(Bf.a.QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE,"enter"===e)}).on(Ff.a.NTF_FullScreen_BeforeChange,function(e){r(Bf.a.QYPLAYER_FULLSCREEN_BEFORE_CHANGE,"enter"===e)}).on(Ff.a.NTF_FullScreen_AfterChange,function(e){r(Bf.a.QYPLAYER_FULLSCREEN_AFTER_CHANGE,"enter"===e)}).on(Ff.a.NTF_ScoreTask_ScoreChange,function(){r(Bf.a.QYPLAYER_NOTIFY_SCORECHANGE)}).on(Ff.a.NTF_FeedBack_Show,function(){r(Bf.a.QYPLAYER_NOTIFY_FEEDBACK_SHOW)}).on(Ff.a.NTF_FeedBack_Hide,function(){r(Bf.a.QYPLAYER_NOTIFY_FEEDBACK_HIDE)}).on(Ff.a.NTF_FeedBack_Panel_show,function(e){r(Bf.a.QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW,e)}).on(Ff.a.NTF_USER_SEEK,function(){r(Bf.a.QYPLAYER_NOTIFY_USER_SEEK)}).on(Ff.a.NTF_AIView_AIResult,function(e){r(Bf.a.QYPLAYER_NOTIFY_AI_STAR_INFO,e)}).on(Ff.a.NTF_AIView_AIFeedback,function(e){r(Bf.a.QYPLAYER_NOTIFY_AI_FEEDBACK,e)}).on(Ff.a.NTF_AIView_CLOSE,function(e){r(Bf.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)}).on(Ff.a.NTF_AIView_BAIKE_CLOSE,function(e){r(Bf.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)}).on(Ff.a.NTF_SHOW_VIDEOLIST,function(e){r(Bf.a.QYPLAYER_NOTIFY_SHOW_VIDEOLIST,e)}).on(Ff.a.NTF_IV_INTERACTIONSTART,function(e){r(Bf.a.QYPLAYER_NOTIFY_INTERACTION_START,e)}).on(Ff.a.NTF_IV_INTERACTIONEND,function(e){r(Bf.a.QYPLAYER_NOTIFY_INTERACTION_END,e)})}},{key:"addView",value:function(e){this.view.addView(e)}},{key:"load",value:function(e){Vf.info("js call func load( ), data = "+e),this.engine.load(e)}},{key:"destroy",value:function(){this.engine.destroy(),this.view.destroy()}},{key:"play",value:function(e){Vf.info("js call func play()");var t=!1;e&&e.withUserGesture&&(t=!0),this.engine.play(t)}},{key:"resume",value:function(){Vf.info("js call func resume"),this.engine.play()}},{key:"replay",value:function(){Vf.info("js call func replay"),this.engine.replay()}},{key:"pause",value:function(){Vf.info("js call func pause , patch = ".concat(this.engine.isPatch(),", switching=").concat(this.engine.playproxy._videoSwitching)),this.engine.isPatch()||(this.engine.playproxy._videoSwitching?this.engine.pause(!0,!0):this.engine.pause())}},{key:"seek",value:function(e){Vf.info("js call func seek, time = "+e),this.engine.seek(e)}},{key:"seekN",value:function(e){var t;"number"==typeof e&&isFinite(e)&&(Vf.info("js call func seekN, time = "+e),t=this.engine.getCurrenttime(),this.engine.seek(t+e))}},{key:"setPlayPingbackInfo",value:function(e){Vf.info("js call func setPlayPingbackInfo, param = "+JSON.stringify(e)),this.engine.setPlayPingbackInfo(e)}},{key:"stop",value:function(){Vf.info("js call func stop()"),this.engine.stop()}},{key:"getMuted",value:function(){return this.engine.getMuted()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"setMuted",value:function(e){this.engine.setMuted(e)}},{key:"getPlayInfo",value:function(n){var r=this.engine,a=this.view;r.getPlayInfo(function(e){var t={};t.tvid=e.tvid,t.vid=e.vid,t.cid=e.cid,t.albumId=e.albumId,t.categoryId=e.cid,t.currentTime=r.getCurrenttime(),t.totalDuration=1e3*r.getDuration(),t.bufferTime=r.getBufferTime(),t.currentDefination=e.rate,t.currentTrack="",t.currentStatus=r.getCurrStatus(),t.isTryWatch=r.isTryWatch()?"1":"0",t.isPause=r.isPaused()?"1":"0";var i=a.getRealArea();t.width=parseInt(i.width),t.height=parseInt(i.height),t.vipTypes=r.getVipTypes(),t.playerVersion=e.playerVersion,t.ctt=r.getMovieInfo().ctt,n&&"function"==typeof n&&n(t)})}},{key:"getVideoInfo",value:function(e){this.engine.getVideoInfo(e)}},{key:"setQiyiUserLogin",value:function(e){Vf.info("js call func setQiyiUserLogin(), param = "+E.a.stringify(e)),this.view.setQiyiUserLogin(e)}},{key:"switchVideo",value:function(e){Vf.info("js call func switchVideo(), param = "+E.a.stringify(e)),this.engine.switchVideo(e)}},{key:"switchNextVideo",value:function(){Vf.info("js call func switchNextVideo()"),this.view.switchNextVideo()}},{key:"switchPreVideo",value:function(){Vf.info("js call func switchPreVideo()"),this.view.switchPreVideo()}},{key:"addVideoList",value:function(e){Vf.info("js call func addVideoList( )"),this.view.addVideoList(e)}},{key:"removeVideoList",value:function(e){Vf.info("js call func removeVideoList( ), data = "+e),this.view.removeVideoList(e)}},{key:"setSmallWindowMode",value:function(e){this.view.setSmallWindowMode(e)}},{key:"jsNotifyAdManager",value:function(e){this.engine.jsNotifyAdManager(e)}},{key:"getQiyiPlayerLog",value:function(e){try{this.package.getQiyiPlayerLog(e)}catch(e){}}},{key:"clearBanWord",value:function(){this.view.emit(Ff.a.NTF_Barrage_ClearBanWord)}},{key:"addBanWord",value:function(e){this.view.emit(Ff.a.NTF_Barrage_AddBanWord,e)}},{key:"removeBanWord",value:function(e){this.view.emit(Ff.a.NTF_Barrage_RemoveBanWord,e)}},{key:"notyfyADInfo",value:function(e){this.engine.notyfyADInfo(e)}},{key:"setRightBarStatus",value:function(e){e&&e.type&&(Vf.info("js call func setRightBarStatus, param = "+E.a.stringify(e)),this.view.setRightBarStatus(e))}},{key:"setExpandScreenStatus",value:function(e){e&&this.view.emit(Ff.a.NTF_EXPANDSCREEN_STATUS_CHANGED,e)}},{key:"getQiyiPlayerInfo",value:function(e){this.getPlayInfo(e)}},{key:"setPlayerWebFullScreen",value:function(e){this.view.emit(Ff.a.NTF_WebFullScreen_SetSwitch,e)}},{key:"setPlayerFullScreen",value:function(e){this.view.emit(Ff.a.NTF_FullScreen_SetSwitch,e)}},{key:"setDelayPlayInfo",value:function(e){this.engine.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.engine.clearDelayPlayInfo(e)}},{key:"addPlayListView",value:function(e){e.request=!0,this.view.emit(Ff.a.NTF_ADDVideoList,e)}},{key:"getSwitchVideoType",value:function(){this.view._switchVideoType}},{key:"exitPicInPic",value:function(){this.view.emit(Ff.a.Type_ExitPic)}},{key:"showToast",value:function(e){this.view.emit(Ff.a.NTF_SHOW_TOAST,{txt:e})}},{key:"refresh",value:function(e){this.engine.refresh(e)}},{key:"backToStoryLine",value:function(e){var t=this.engine.IVRecorder;t&&t.backToStoryLine(e)}},{key:"backToIVMain",value:function(e){this.view.emit(Ff.a.NTF_BACKTO_IVMAIN,e)}},{key:"setFollowData",value:function(e){Vf.info("js call func setFollowData, data = ".concat(JSON.stringify(e))),this.view.setFollowData(e)}},{key:"changeFollowState",value:function(e){Vf.info("js call func changeFollowState, data = ".concat(JSON.stringify(e))),this.view.emit(Ff.a.NTF_FOLLOW_CHANGE_STATE,e)}},{key:"changeAIBaikeState",value:function(e){Vf.info("js call func changeAIBaikeState, data = ".concat(JSON.stringify(e))),this.view.emit(Ff.a.NTF_AIView_BAIKE_STATECHANGE,e)}},{key:"setBarrageState",value:function(e){Vf.info("js call func setBarrageState, data = ".concat(JSON.stringify(e))),void 0!==e.index&&void 0!==e.focus&&(null==this.view.barrageFocux&&(this.view.barrageFocux=[]),this.view.barrageFocux[parseInt(e.index)]=e.focus)}},{key:"getFeedbackInfo",value:function(){this.view.emit(Ff.a.NTF_FeedBack_getInfo)}}]),a}(_.a);t.default=ie,K="wonder.data.pc",t=!!(_=window.QiyiPlayerLoader||{}).packLoader.usedGrayUrl[K],_.packageName!==K||(t||!_.isSyncing)&&_.isSyncing||_.setPackage(ie)},,,,,function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(2),o=i.n(n),t=i(3),n=i.n(t),r=(i(27),i(376)),t=i(379),i=i(350),a=(n()(s,[{key:"toString",value:function(){return"".concat(s.MESSAGE_HEAD," ").concat(r.a.stringify(this,null,"  "))}}]),s);function s(e,t,i){o()(this,s),this.severity=e,this.category=t,this.code=i;for(var n=arguments.length,r=new Array(3<n?n-3:0),a=3;a<n;a++)r[a-3]=arguments[a];this.data=r}a.severity=i.a,a.category=t.a,a.MESSAGE_HEAD="KIWI:"},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),o=i.n(t),t=i(3),s=i.n(t),t=i(38),c=i.n(t),t=i(4),d=i.n(t),t=i(5),u=i.n(t),t=i(1),l=i.n(t),t=(i(90),i(94)),h=i(265),f=i(329);var n=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=l()(i);return t=n?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t;return o()(this,a),(t=r.call(this)).$apiKeys=h.b.call(c()(t)),t.$eventManager=new f.a,t.ctx_=e.ctx,t.$apiInjector=h.a,t}return s()(a,[{key:"bindApis",value:function(){h.a.provide(this,this.$apiKeys),h.a.inject(this.ctx_),h.a.dispose()}},{key:"unbindApis",value:function(){h.a.eject(this.ctx_,this.$apiKeys)}},{key:"destroy",value:function(){this.$eventManager.destroy(),this.unbindApis(),this.$apiKeys.splice(0,this.$apiKeys.length)}}]),a}(t.EventEmitter);n.$__apiDescriptorQueue__=[]},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(51),a=i(273);function n(e){var t="AudioSpecificConfig",i=e[0]>>3;31==i&&r.a.error("".concat(t," unsupported audioObjectType"));var n=(7&e[0])<<1|e[1]>>7;15==n&&r.a.error("".concat(t," unsupported samplingFrequencyIndex"));t=e[1]>>3&15;return(t<0||8<=t)&&r.a.error("${LOG} unsupported channel configuration"),{audioObjectType:i,samplingFrequencyIndex:n,channelConfiguration:t,sampleCount:(e[1],1024),sampleRate:a.a[n]}}},,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",function(){return r});var t=i(2),n=i.n(t),t=i(3),t=i.n(t),r=(i(90),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46),i(27),t()(a,[{key:"bytes",get:function(){var e=this.list_,t=e.length,i=null;return 1===t?i=e[0]:1<t&&(i=this.toNewBytes()),i}},{key:"empty",get:function(){return 0===this.list_.length}},{key:"bufferList",get:function(){return this.list_}},{key:"clear",value:function(){var e=this.list_.length;0<e&&this.list_.splice(0,e),this.byteLength=0}},{key:"toNewBytes",value:function(){for(var e=this.list_,t=e.length,i=0,n=null;null===n;)try{i++,n=new Uint8Array(this.byteLength)}catch(e){if(50<i)throw"alloc_memory_error@new: ".concat(e.message,", ").concat(t,", ").concat(this.byteLength)}for(var r=0,a=0;r<t;r++){var o=e[r];n.set(o,a),a+=o.byteLength}return n}},{key:"append",value:function(e){var t=this.list_;if(e instanceof a)for(var i,t=this.list_=t.concat(e.bufferList),n=0;n<t.length;n++)i=t[n],this.byteLength+=i.byteLength;else t.push(e),this.byteLength+=e.byteLength}},{key:"cut",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=null;if(0<t&&!this.empty){for(var n=this.list_,r=0,a=0;0<n.length;){var o=n.shift();if(0!==a){var s=t-r;if(o.byteLength>=s){e&&i.set(o.subarray(0,s),r),0<(o=o.subarray(s)).byteLength&&n.unshift(o);break}e&&i.set(o,r),r+=o.byteLength;break}if(o.byteLength>=t){e&&(i=o.subarray(0,t)),o.byteLength>t&&(o=o.subarray(t),n.unshift(o));break}if(e){try{i=new Uint8Array(t)}catch(e){throw"alloc_memory_error@cut: ".concat(t," ").concat(e.message)}i.set(o,0)}r+=o.byteLength,a++}this.byteLength-=t}return i}}]),a);function a(){n()(this,a),this.byteLength=0,this.list_=[]}},function(e,t,i){"use strict";function n(e){for(var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r="",a=i;a<i+n;a++)t=7-a%8,r+=e[Math.floor(a/8)]>>t&1;return parseInt(r,2)}function r(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=[],n=8*e.byteLength,r=!1,a=0,o=0,s="",c=t;c<n;c++)if(a=7-c%8,o=e[Math.floor(c/8)]>>a&1,!r){if(0!==o){r=!0,t=c;break}i.push(0)}for(var d=i.length+1,u=t;u<t+d;u++)a=7-u%8,s+=o=e[Math.floor(u/8)]>>a&1;return{bitLength:i.length+d,value:parseInt(s,2)-1}}i.d(t,"a",function(){return a}),i(25);var a={readUEV:r,readSEV:function(e){var t=r(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),e=t.value,e=Math.pow(-1,e+1)*Math.ceil(e/2);return{bitLength:t.bitLength,value:e}},readBit:n,readByte:function(e){return n(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,8)}}},function(e,t,i){"use strict";function n(e){return{payload:e,offset:0,index:0}}function d(e){var t=e.payload,i=e.offset,t=t[e.index];return t>>=7-(7&i),t&=1,u(e,1),t}function r(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=e.payload,r=e.offset,a=(e.index,8*n.length-r);if(a<t)throw new Error("Cannot get "+t+" bit(s) from offset "+r+", "+a+" available");for(var o=0,s=0;s<t;){var c=void 0;8<=t-s&&0==(7&r)?(o|=n[r>>3]<<s,u(e,c=8)):(o|=d(e)<<s,c=1),s+=c}return i?(32!==t&&o&1<<t-1&&(o|=-1^(1<<t)-1),o):o>>>0}function u(e,t){var i=e.offset+t;if(!(i<=8*e.payload.byteLength))throw Error("".concat("bit operator: "," can't skip ").concat(t));e.offset=i,e.index=e.offset>>3}i.d(t,"c",function(){return n}),i.d(t,"a",function(){return d}),i.d(t,"b",function(){return r}),i.d(t,"d",function(){return u})},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var t=i(2),n=i.n(t),t=i(3),t=i.n(t);i(399),i(267),i(46),i(10),i(278);var r=(t()(a,[{key:"readUint32",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return t=e,e=0,ArrayBuffer.isView(t)&&(e=t.byteOffset,t=t.buffer),new DataView(t,e).getUint32(i,n)}}]),a);function a(){n()(this,a)}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var t=i(342),s=i.n(t),c=(i(27),i(350)),d=i(593),u=i(379),l=i(382);function n(e,t){var i=l.a.MUX_UNKNOWN_FAILED,n=c.a.CRITICAL;switch(e){case 0:i=l.a.MUX_WORKER_INTERNAL_EXCEPTION,n=c.a.RECOVERABLE;break;case 1:i=l.a.MUX_WORKER_MESSAGE_EXCEPTION;break;default:i=e}for(var r=arguments.length,a=new Array(2<r?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return s()(d.a,[n,u.a.MUX,i,t].concat(a))}},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),a=i.n(t),t=i(4),o=i.n(t),t=i(5),s=i.n(t),t=i(1),c=i.n(t);var n=function(e){o()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=c()(i);return t=n?(e=c()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),s()(this,t)});function r(e){return a()(this,r),(e=t.call(this,e)).container="",e.codec="",e.trackId=null,e}return r}(i(345).a)},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(9);var t=i(2),a=i.n(t),t=i(4),o=i.n(t),t=i(5),s=i.n(t),t=i(1),c=i.n(t);var n=function(e){o()(r,e);var i,n,t=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=c()(i);return t=n?(e=c()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),s()(this,t)});function r(e){return a()(this,r),t.call(this,e)}return r}(i(345).a)},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i(107),i(115),i(26),i(17),i(10),i(19),i(139),i(45);var y=/^(b|B)$/,v={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},m={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(isNaN(e))return"";var i=[],n=0,r=!0===t.bits,a=!0===t.unix,o=t.base||2,s=void 0!==t.round?t.round:a?1:2,c=void 0!==t.separator&&t.separator||"",d=void 0!==t.spacer?t.spacer:"",u=t.symbols||t.suffixes||{},l=2===o&&t.standard||"jedec",h=t.output||"string",f=!0===t.fullform,p=t.fullforms instanceof Array?t.fullforms:[],_=void 0!==t.exponent?t.exponent:-1,g=Number(e),t=g<0,e=2<o?1e3:1024;return t&&(g=-g),8<(_=(-1===_||isNaN(_))&&(_=Math.floor(Math.log(g)/Math.log(e)))<0?0:_)&&(_=8),0===g?(i[0]=0,i[1]=a?"":v[l][r?"bits":"bytes"][_]):(n=g/(2===o?Math.pow(2,10*_):Math.pow(1e3,_)),r&&(n*=8)>=e&&_<8&&(n/=e,_++),i[0]=Number(n.toFixed(0<_?s:0)),i[1]=10===o&&1===_?r?"kb":"kB":v[l][r?"bits":"bytes"][_],a&&(i[1]="jedec"===l?i[1].charAt(0):0<_?i[1].replace(/B$/,""):i[1],y.test(i[1])&&(i[0]=Math.floor(i[0]),i[1]=""))),t&&(i[0]=-i[0]),i[1]=u[i[1]]||i[1],"array"===h?i:"exponent"===h?_:"object"===h?{value:i[0],suffix:i[1],symbol:i[1]}:(f&&(i[1]=p[_]||m[l][_]+(r?"bit":"byte")+(1===i[0]?"":"s")),0<c.length&&(i[0]=i[0].toString().replace(".",c)),i.join(d))}},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var t=i(32),n=i.n(t),t=i(2),r=i.n(t),t=i(3),t=i.n(t);function a(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function o(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")}function s(e,t,i){i=2<arguments.length&&void 0!==i&&i;if("string"!=typeof e)return null;t=encodeURI(e).replace(t,a);return t=i?o(t):t}i(10),i(19),i(139),i(26),i(17),i(43),i(37),i(27),i(45),i(110),i(146),i(107);var c=(t()(l,[{key:"ensureKeyMapInitialized_",value:function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var e=this.encodedQuery_.split("&"),t=0;t<e.length;t++){var i=e[t].indexOf("="),n=null,r=null;0<=i?(n=e[t].substring(0,i),r=e[t].substring(i+1)):n=e[t],n=decodeURIComponent(n.replace(/\+/g," ")),r=r||"",this.add(n,decodeURIComponent(r.replace(/\+/g," ")))}}},{key:"getCount",value:function(){return this.ensureKeyMapInitialized_(),this.count_}},{key:"add",value:function(e,t){this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var i=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];return i||(this.keyMap_[e]=i=[]),i.push(t),this.count_++,this}},{key:"update",value:function(e,t){return this.ensureKeyMapInitialized_(),this.encodedQuery_=null,(this.keyMap_[e]=[]).push(t),this}},{key:"get",value:function(e){return this.ensureKeyMapInitialized_(),this.keyMap_[e]}},{key:"clone",value:function(){var e=new l;if(e.encodedQuery_=this.encodedQuery_,this.keyMap_){var t,i={};for(t in this.keyMap_)i[t]=this.keyMap_[t].concat();e.keyMap_=i,e.count_=this.count_}return e}},{key:"toString",value:function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var e,t=[];for(e in this.keyMap_)for(var i=encodeURIComponent(e),n=this.keyMap_[e],r=0;r<n.length;r++){var a=i;a+="="+encodeURIComponent(n[r]),t.push(a)}return this.encodedQuery_=t.join("&")}},{key:"toDecodedString",value:function(){return d.decodeOrEmpty(this.toString())}}]),l),d=(t()(u,[{key:"scheme",get:function(){return this._scheme}},{key:"domain",get:function(){return this._domain}},{key:"port",get:function(){return this._port}},{key:"userInfo",get:function(){return this._userInfo}},{key:"path",get:function(){return this._path}},{key:"hash",get:function(){return this._hash}},{key:"query",get:function(){return this._query}},{key:"setScheme",value:function(e){return this._scheme=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?u.decodeOrEmpty(e,!0):e,this._scheme&&(this._scheme=this._scheme.replace(/:$/,"")),this}},{key:"toString",value:function(){var e=[],t=this.scheme;t&&e.push(s(t,this._reDisallowedInSchemeOrUserInfo,!0),":");t=this.getDomain();t&&(e.push("//"),(i=this.userInfo)&&e.push(s(i,this._reDisallowedInSchemeOrUserInfo,!0),"@"),e.push(o(encodeURIComponent(t))),null!=(i=this.port)&&e.push(":",String(i)));var i=this.path;i&&(this.hasDomain()&&"/"!=i.charAt(0)&&e.push("/"),e.push(s(i,"/"==i.charAt(0)?this._reDisallowedInAbsolutePath:this._reDisallowedInRelativePath,!0)));i=this.getEncodedQuery();i&&e.push("?",i);i=this.hash;return i&&e.push("#",s(i,this._reDisallowedInFragment)),e.join("")}},{key:"clone",value:function(){return new u(this.toString())}},{key:"split",value:function(e){var t=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");return e.match(t)}},{key:"setUserInfo",value:function(e){return this._userInfo=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?u.decodeOrEmpty(e):e,this}},{key:"hasDomain",value:function(){return!!this._domain}},{key:"setDomain",value:function(e){return this._domain=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?u.decodeOrEmpty(e,!0):e,this}},{key:"getDomain",value:function(){return this._domain}},{key:"setPort",value:function(e){if(e){e=Number(e);if(isNaN(e)||e<0)throw Error("Bad port number "+e);this._port=e}else this._port=null;return this}},{key:"setPath",value:function(e){return this._path=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?u.decodeOrEmpty(e,!0):e,this}},{key:"setQueryData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return"object"===n()(e)&&e instanceof c?this._query=e:(t||(e=s(e,this._reDisallowedInQuery)),this._query=new c(e)),this}},{key:"getEncodedQuery",value:function(){return this._query.toString()}},{key:"setHash",value:function(e){return this._hash=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?u.decodeOrEmpty(e):e,this}}],[{key:"decodeOrEmpty",value:function(e){return e?(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?decodeURI:decodeURIComponent)(e):""}}]),u);function u(e){var t;r()(this,u),this._scheme="",this._domain="",this._port=null,this._userInfo="",this._path="",this._query=new c,this._hash="",this._reDisallowedInQuery=/[\#\?@]/g,this._reDisallowedInSchemeOrUserInfo=/[#\/\?@]/g,this._reDisallowedInRelativePath=/[\#\?:]/g,this._reDisallowedInAbsolutePath=/[\#\?]/g,this._reDisallowedInFragment=/#/g,"object"===n()(e)&&e instanceof u?(this.setScheme(e.scheme),this.setUserInfo(e.userInfo),this.setDomain(e.domain),this.setPort(e.port),this.setPath(e.path),this.setQueryData(e.query.clone()),this.setHash(e.hash)):e&&(t=this.split(String(e)))?(this.setScheme(t[1]||"",!0),this.setUserInfo(t[2]||"",!0),this.setDomain(t[3]||"",!0),this.setPort(t[4]),this.setPath(t[5]||"",!0),this.setQueryData(t[6]||"",!0),this.setHash(t[7]||"",!0)):this._query=new c(null)}function l(e){r()(this,l),this.encodedQuery_=e||null,this.count_=null}},function(e,t,i){"use strict";i.d(t,"a",function(){return b}),i(9);var n=i(2),o=i.n(n),t=i(3),s=i.n(t),n=i(38),c=i.n(n),t=i(4),d=i.n(t),n=i(5),u=i.n(n),t=i(42),l=i.n(t),n=i(1),h=i.n(n),t=(i(90),i(272)),n=i(133),P=(i(27),i(115),i(77),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(10),i(29),i(46),i(402)),A=i(51),r=i(607),a=i(256),f=(s()(v,[{key:"parse",value:function(e){var t=null,i=e.tracks.audioTrack;return i&&(this.loopAACFrames_(i,e.audioTimeOffset),0<i.samples.length&&(t={type:"fragment",contentType:"audio",arrayBufferList:this.remuxAudio_(i),duration:(this.nextSegmentPts-this.curSegmentPts)/i.inputTimeScale,startDTS:this.curSegmentPts/i.inputTimeScale,startPTS:this.curSegmentPts/i.inputTimeScale,nextSegmentPTS:this.nextSegmentPts})),t}},{key:"reset",value:function(){this.audioSequenceNumber=1,this.nextSegmentPts=void 0,this.cacheBuffer.clear()}},{key:"remuxAudio_",value:function(e){var t=this.cacheBuffer,i=a.a.moof(this.audioSequenceNumber,e.baseMediaDecodeTime,e),e=a.a.mdat(this.mdat,!0);this.audioSequenceNumber++,t.append(i),t.append(e);e=t.toNewBytes();return t.clear(),[e.buffer]}},{key:"loopAACFrames_",value:function(e,t){var i=e.frames,n=e.codec,r=e.realCodec,a=e.channelCount,o=e.timescale,s=e.inputTimeScale,c=e.isAAC,d=this.nextSegmentPts,u=s/o,l=(c?1024:1152)*u;if(e.samples=[],0!==i.length){c="number"==typeof d&&!isNaN(d)&&0<d&&(Math.abs(t-d)<.1*s||Math.abs(i[0].pts-d)<20*l);c||(A.a.log("audio track consecutive fragments as being contiguous: ".concat(c)),d=t);for(var h,f=0;f<i.length;){var p=(h=i[f]).pts-d,_=Math.abs(1e3*p/s);if(p<=-1*l)A.a.warn("Dropping 1 audio sample @ ".concat((d/e.inputTimeScale).toFixed(3),"s due to ").concat(Math.round(_)," ms overlap.")),i.byteLength-=h.data.byteLength,i.splice(f,1);else if(l<=p&&_<1e4&&d){var g=Math.round(p/l);A.a.warn("Injecting ".concat(g," audio frame (").concat(n,"/").concat(r,"/").concat(a,") @ ").concat((d/s).toFixed(3),"s due to ").concat(Math.round(1e3*p/s)," ms gap."));for(var y=0;y<g;y++){var v=Math.max(d,0),m=Object(P.a)(r,a);m||(A.a.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),m=h.data.subarray()),i.byteLength+=m.byteLength,i.splice(f,0,{data:m,pts:v,dts:v}),d+=l,f++}h.pts=h.dts=d,d+=l,f++}else h.pts=h.dts=d,d+=l,f++}if(0!==i.length){t=i[0],t=Math.max(t.pts,0);e.baseMediaDecodeTime=t/u;for(var b,k,x=0,S=8,T=new Uint8Array(S+i.byteLength);x<i.length;x++)b=i[x],k=i[x+1],e.samples.push({size:b.data.byteLength,duration:k?Math.round((k.pts-b.pts)/u):0,cts:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:0}}),T.set(b.data,S),S+=b.data.byteLength;2<=e.samples.length&&(e.samples[e.samples.length-1].duration=e.samples[e.samples.length-2].duration),this.nextSegmentPts=d,this.curSegmentPts=t,this.mdat=T}}}}]),v),p=(s()(y,[{key:"needParseIS",get:function(){return!(this._hasVideoIS&&this._hasAudioIS)}},{key:"parse",value:function(e){for(var t=[],i=e.tracks||[],n=0;n<i.length;n++){var r=i[n];switch(r.type){case"video":this._hasVideoIS||(this._hasVideoIS=!0,r.container="video/mp4",t.push(this._initSegment(r)));break;case"audio":this._hasAudioIS||(this._hasAudioIS=!0,r.container="audio/mp4",t.push(this._initSegment(r)))}}return t}},{key:"reset",value:function(){this._hasVideoIS=!1,this._hasAudioIS=!1}},{key:"_initSegment",value:function(e){var t=a.a.initSegment([e]);return{type:"initSegment",contentType:e.type,container:e.container,codec:e.codec,trackId:e.id,arrayBufferList:[t.buffer]}}}]),y),E=(i(278),i(202)),D=i(531),_=(s()(g,[{key:"parse",value:function(e){var t=null,e=e.tracks.videoTrack;return e&&(this.loopGOPs_(e),t={type:"fragment",contentType:"video",arrayBufferList:this.remuxVideo_(e),duration:(this.nextSegmentDts-e.firstDTS)/e.timescale,startDTS:e.firstDTS/e.timescale,startPTS:e.firstPTS/e.timescale}),t}},{key:"reset",value:function(){this.videoSequenceNumber=1,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null,this.cacheBuffer.clear()}},{key:"remuxVideo_",value:function(e){var t=this.cacheBuffer,i=a.a.moof(this.videoSequenceNumber,e.baseMediaDecodeTime,e),e=a.a.mdat(this.mdat,!0);this.videoSequenceNumber++,t.append(i),t.append(e);e=t.toNewBytes();return t.clear(),[e.buffer]}},{key:"loopGOPs_",value:function(e){var t,i,n,r,a,o,s=0,c=e.gops,d=-1,u=8;e.samples=[];var l=c[0],h=l[0],f=c[c.length-1],p=f[f.length-1],_=Math.max(h.dts,0),g=Math.max(h.pts,0),f=Math.max(p.dts,0),y=g;D.a.SAFARI&&(s=Math.round((f-_)/(c.frameLength-1)));p=c.length&&this.nextSegmentDts&&(Math.abs((_-this.nextSegmentDts)/e.timescale)<.1||Math.abs(g-this.nextSegmentPts)<e.timescale/5);if(p="boolean"==typeof p?!0:p){var v=Math.round((_-this.nextSegmentDts)/90);if(v)if(1<v){var p=h.duration/90,m=v%p*90,b=Math.ceil(v/p)||0;for(A.a.warn("AVC:".concat(v," ms hole between fragments detected @").concat((this.nextSegmentDts/90).toFixed(3),"ms, filling it ").concat(b," I-frame")),n=0;n<b;n++){var k=Math.max(this.nextSegmentDts,0),x=Math.max(this.nextSegmentPts,0),S=Object(E.a)([],h,!0);S.dts=k,S.pts=x,0===n&&(_=k,g=x),n===b-1&&0<m&&(S.duration=m),this.nextSegmentDts+=S.duration,this.nextSegmentPts+=S.duration,c.byteLength+=S.byteLength,c.naluCount+=S.naluCount,l.splice(n,0,S)}}else v<-1&&A.a.log("AVC:".concat(-v," ms overlapping between fragments detected"))}for(var v=u+c.byteLength+4*c.naluCount,T=new Uint8Array(v),P=new DataView(T.buffer),I=0;I<c.length;I++)for(r=c[I],t=0;t<r.length;t++){a=r[t],d+=1,D.a.SAFARI?a.dts=_+d*s:a.dts=Math.max(a.dts,_),a.pts=Math.max(a.pts,a.dts);var w={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1},cts:void 0,duration:void 0};for(D.a.SAFARI?w.cts=Math.max(0,s*Math.round((a.pts-a.dts)/s)):w.cts=a.pts-a.dts,w.duration=a.duration,w.size=4*a.length,w.size+=a.byteLength,(a.keyframe||D.a.CHROME&&0===e.samples.length)&&(w.flags.dependsOn=2,w.flags.isDependedOn=1,w.flags.isNonSyncSample=0),e.samples.push(w),i=0;i<a.length;i++)o=a[i],P.setUint32(u,o.rawData.byteLength),u+=4,T.set(o.rawData,u),u+=o.rawData.byteLength;y=Math.max(y,a.pts)}e.firstDTS=_,e.firstPTS=g,e.baseMediaDecodeTime=_;v=e.samples[e.samples.length-1].duration;this.nextSegmentPts=y+v,this.nextSegmentDts=f+v,this.mdat=T}}]),g);function g(e){o()(this,g),this.videoSequenceNumber=1,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null,this.cacheBuffer=new r.a,this.context=e}function y(e){o()(this,y),this._hasVideoIS=!1,this._hasAudioIS=!1,this.context=e}function v(e){o()(this,v),this.audioSequenceNumber=1,this.cacheBuffer=new r.a,this.context=e}var m=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=h()(i);return t=n?(e=h()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return o()(this,a),(t=r.call(this)).context=e,t.options=i,t._initComplexer=new p(e),t._audioComplexer=new f(e),t._videoComplexer=new _(e),t}return s()(a,[{key:"audioAlignPTS",set:function(e){this._audioComplexer.nextSegmentPts=e}},{key:"push",value:function(e){var t,i=this.context;if(this._initComplexer.needParseIS){var n=this._initComplexer.parse(e),r=n.length;if(0<r)for(var a=0;a<r;a++){var o=n[a];this.emit("data",{fragmentType:"initSegment",contentType:o.contentType,container:o.container,codec:o.codec,trackId:o.trackId,data:o.arrayBufferList,meta:i.config?i.config.meta:null})}}!this._audioComplexer||(t=this._audioComplexer.parse(e))&&this.emit("data",{fragmentType:"fragment",contentType:t.contentType,data:t.arrayBufferList,startDTS:t.startDTS,startPTS:t.startPTS,duration:t.duration,nextSegmentPTS:t.nextSegmentPTS,meta:i.config?i.config.meta:null}),!this._videoComplexer||(e=this._videoComplexer.parse(e))&&this.emit("data",{fragmentType:"fragment",contentType:e.contentType,data:e.arrayBufferList,startDTS:e.startDTS,startPTS:e.startPTS,duration:e.duration,meta:i.config?i.config.meta:null})}},{key:"rebuildInitSegment",value:function(){this._initComplexer.reset()}},{key:"reset",value:function(){this._initComplexer.reset(),this._audioComplexer.reset(),this._videoComplexer.reset()}}]),a}(n.a);var b=function(e){d()(a,e);var i,n,r=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=h()(i);return t=n?(e=h()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)});function a(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return o()(this,a),(t=r.call(this,e,i)).tracks=[],t._syncDTS=0,t._syncPTS=0,t._complexStream=new m(e,i),t.pipe(t._complexStream),l()((i=c()(t),h()(a.prototype)),"listenEndStream_",i).call(i),t}return s()(a,[{key:"audioAlignPTS",set:function(e){this._complexStream.audioAlignPTS=e}},{key:"endStream",get:function(){return this._complexStream}},{key:"push",value:function(e){var t=this.tracks,i=e.videoTrack,n=e.audioTrack,e=e.captionTrack;i&&!t.videoTrack&&(t.push(i),t.videoTrack=i),n&&!t.audioTrack&&(t.push(n),t.audioTrack=n),e&&!t.captionTrack&&(t.push(e),t.captionTrack=e);t=i?i.firstDTS:0,e=n?n.firstDTS:0;n&&n.frames&&i&&i.gops&&(i=n.firstDTS-i.firstDTS,e=t+Math.max(0,i)),this.emit("data",{audioTimeOffset:e,videoTimeOffset:t,tracks:this.tracks}),this.tracks.splice(0,this.tracks.length),this.tracks.videoTrack=null,this.tracks.audioTrack=null,this.tracks.captionTrack=null}},{key:"rebuildInitSegment",value:function(){this._complexStream.rebuildInitSegment()}},{key:"reset",value:function(){this.tracks=[],this._syncDTS=0,this._syncPTS=0,this.emit("reset")}}]),a}(t.b)}]);
