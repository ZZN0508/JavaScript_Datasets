(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[97443],{59350:function(e,t,i){function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,o;e.exports=(n=[function(e,t){e.exports=i(859713)},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_METADATA="PlayerSegmentMetadata"},function(e,t){e.exports=i(887757)},function(e,t){e.exports=i(281506)},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).IDLE="Idle",t.READY="Ready",t.BUFFERING="Buffering",t.PLAYING="Playing",t.ENDED="Ended"},function(e,t){e.exports=i(348926)},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i(28),r=/^(\d+)\.(\d+)\.(\d+)[+|-]?(.*)?$/,o=/^(\d+)\.(\d+)[+|-]?(.*)?$/,s=/^(\d+)$/,a={chrome:!1,chromecast:!1,domain:"",family:"",firefox:!1,host:"",major:-1,minor:-1,msEdgeLegacy:!1,msEdgeChromium:!1,msIE:!1,name:"",opera:!1,osName:"",osVersion:"",patch:-1,safari:!1,url:"",userAgent:"",mobile:!1,supportsDataChannels:!1,supportsQuicTransport:!1},u=null;function c(){if(u)return u;if("undefined"==typeof window||"undefined"==typeof navigator)return u=a;var e=n.getParser(navigator.userAgent),t=(t=String(e.getBrowserVersion()),i=r.exec(t)||o.exec(t)||s.exec(t)||[],{major:parseInt(i[1],10)||0,minor:parseInt(i[2],10)||0,patch:parseInt(i[3],10)||0}),i=e.getEngine();return u={chrome:e.some(["chrome"]),chromecast:-1<navigator.userAgent.toLowerCase().indexOf("crkey"),domain:window.location.host.split(".").slice(-2).join("."),family:e.getBrowserName().toLowerCase(),firefox:e.some(["firefox"]),host:window.location.host,major:t.major,minor:t.minor,msEdgeLegacy:e.some(["microsoft edge"])&&"Blink"!==i.name,msEdgeChromium:e.some(["microsoft edge"])&&"Blink"===i.name,msIE:e.some(["internet explorer"]),name:navigator.appVersion,opera:e.some(["opera"]),osName:e.getOSName(),osVersion:String(e.getOSVersion()),patch:t.patch,safari:e.some(["safari"]),url:window.location.href,userAgent:navigator.userAgent,mobile:!(!e.some(["mobile"])&&!e.some(["tablet"])),supportsDataChannels:"RTCPeerConnection"in window,supportsQuicTransport:"QuicTransport"in window}}},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).AVAILABLE="RemotePlayerAvailable",t.UNAVAILABLE="RemotePlayerUnavailable",t.SESSION_STARTED="RemotePlayerSessionStarted",t.SESSION_ENDED="RemotePlayerSessionEnded"},function(e,i,n){"use strict";!function(e){var t=n(29),t=n.n(t),e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0;i.a=e.Promise||t.a}.call(this,n(18))},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).ID3="MetaID3",t.CAPTION="MetaCaption"},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return o});var n=i(6);function r(){return"undefined"!=typeof MediaSource}function o(){var e=Object(n.a)();return"Windows"===e.osName&&(e.chrome||e.firefox||e.msEdgeChromium)&&r()?"mediaCapabilities"in navigator?navigator.mediaCapabilities.decodingInfo({type:"media-source",video:{contentType:'video/mp4;codecs="vp09.00.41.08"',width:1920,height:1080,bitrate:8e6,framerate:60}}).then(function(e){return e.supported&&e.smooth}):Promise.resolve(MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')):Promise.resolve(!1)}},function(e,t,i){"use strict";i.d(t,"c",function(){return Ve}),i.d(t,"e",function(){return Ne}),i.d(t,"d",function(){return Oe}),i.d(t,"b",function(){return xe}),i.d(t,"a",function(){return Ue});var n=i(0),o=i.n(n),s=i(6),a=i(1),u=null,c=null;function d(e){var t=e.type===a.a.ANALYTICS_EVENT,i=e.arg&&"video_error"===e.arg.name;if(t&&i){if(!u&&!c){i=document.createElement("canvas");try{var n,r=i.getContext("webgl")||i.getContext("experimental-webgl");"getExtension"in r&&(n=r.getExtension("WEBGL_debug_renderer_info"),"getParameter"in r&&(u=r.getParameter(n.UNMASKED_RENDERER_WEBGL),c=r.getParameter(n.UNMASKED_VENDOR_WEBGL)))}catch(e){}}e.arg.properties.gl_renderer=u,e.arg.properties.gl_vendor=c}return e}var h=(b.isSupported=function(){return window&&window.navigator&&!!window.navigator.getBattery},b.prototype.processor=function(e){var t=e.type===a.a.ANALYTICS_EVENT,i=e.arg&&"minute-watched"===e.arg.name;return t&&i&&this.batteryManager&&(e.arg.properties.battery_percent=this.batteryManager.level),e},b),l=i(10),r={keySystem:"org.w3.clearkey",uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"},f={keySystem:"com.apple.fps.2_0",certUrl:"https://fp-keyos-twitch.licensekeyserver.com/cert/a17fd33d3843df9b17679ccf50a419b2.der",licenseUrl:"https://fp-keyos-twitch.licensekeyserver.com/getkey",uuid:"94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"},t={keySystem:"com.microsoft.playready",licenseUrl:"https://pr-keyos-twitch.licensekeyserver.com/core/rightsmanager.asmx",uuid:"9a04f079-9840-4286-ab92-e65be0885f95"},n={keySystem:"com.widevine.alpha",licenseUrl:"https://wv-keyos-twitch.licensekeyserver.com",uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"},p={CLEARKEY:r,FAIRPLAY:f,PLAYREADY:t,WIDEVINE:n},m={"com.widevine.alpha":n,"com.microsoft.playready":t,"com.apple.fps.2_0":f,"org.w3.clearkey":r},v={value:4,message:"Your browser does not support any DRM Content Decryption Modules"},g={value:4,message:"There was an issue while updating DRM License"},y={value:2,message:"Error while requesting DRM license"},E={value:4,message:"Error creating key session"},S={value:4,message:"Encryption key not usable because of internal error in CDM"},k={value:4,message:"Unable to find valid CDM support on media"},T={value:2,message:"Request for AuthXML failed"},C={value:2,message:"Request for DRM certificate failed"};function b(){var t=this;o()(this,"batteryManager",void 0),this.processor=this.processor.bind(this),b.isSupported()&&window.navigator.getBattery().then(function(e){t.batteryManager=e})}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function A(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e}function M(r,o){return new Promise(function(e,t){var i,n=new XMLHttpRequest;for(i in n.open(o.method,r,!0),o.headers)o.headers.hasOwnProperty(i)&&n.setRequestHeader(i,o.headers[i]);n.responseType=o.responseType,n.onload=function(){200===n.status&&e(n.response)},n.onloadend=function(){t(n.status)},n.send(o.body)})}function L(e,t){for(var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=D(t),r=0;r<e.byteLength;){var o=i.getUint32(r);if(i.getUint32(r+4)===n)return e.subarray(r+8,r+o);r+=o}return new Uint8Array(e)}function D(e){return(e.charCodeAt(0)<<24)+(e.charCodeAt(1)<<16)+(e.charCodeAt(2)<<8)+e.charCodeAt(3)}function R(e){e=e.toString(16);return 1===e.length?"0"+e:e}function w(e){for(var t=atob(e),i=t.length,n=new Uint8Array(i),r=0;r<i;r++)n[r]=t.charCodeAt(r);return n}function _(e){return decodeURIComponent(e.replace(/\+/g," "))}var I=i(9),V=i(7),N=i(4),t=i(5),f=i.n(t),r=i(2),O=i.n(r);function x(e){var t=String.fromCharCode.apply(null,new Uint16Array(e)),e=(new DOMParser).parseFromString(t,"application/xml");return{headers:function(e){for(var t={},i=e.getElementsByTagName("name"),n=e.getElementsByTagName("value"),r=0;r<i.length;r++)t[i[r].childNodes[0].nodeValue]=n[r].childNodes[0].nodeValue;return t}(e),body:(t=null,0<(e=e).getElementsByTagName("Challenge").length&&e.getElementsByTagName("Challenge")[0]&&((e=e.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)&&(t=atob(e))),t)}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var H,B,F,G,W,Q=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],K=((t=J.prototype).configure=function(e){var t,i,n,r,o=this;this.authXml||(i=(n=(t=new URL(e)).pathname.split("/"))[n.length-1].split(".")[0],n=new URL(e).searchParams,r={},n.forEach(function(e,t){r[_(t)]=e?_(e):""}),e=r.token,n=r.sig,n="https://"+t.host+"/api/authxml/"+i+"?token="+encodeURIComponent(e)+"&sig="+n,this.authXml=M(n,{method:"GET",responseType:"text"}).catch(function(e){o.handleError(Object.assign({code:e},T))}))},t.reset=function(){this.authXml=null,this.sessions=[]},t.isProtected=function(){return null!==this.authXml},t.handleError=function(e){this.listener.onSinkError({value:e.value||4,code:e.code||0,message:e.message||""})},t.hasSession=function(e){for(var t=function(e){var t;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(t=e[Symbol.iterator]()).next.bind(t);if(Array.isArray(e)||(t=function(e){if(e){if("string"==typeof e)return U(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?U(e,void 0):void 0}}(e))){t&&(e=t);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.sessions);!(i=t()).done;){var i=i.value;if(i.initData&&function(e,t){if((e=A(e))===(t=A(t)))return 1;if(e.byteLength===t.byteLength){for(var i=new DataView(e),n=new DataView(t),r=0;r<i.byteLength;r++)if(i.getUint8(r)!==n.getUint8(r))return;return 1}}(i.initData,e))return!0}return!1},t.createKeySystemSupportChain=function(){if(null===this.cdmSupport||0===this.cdmSupport.length)return Promise.reject(k);var t=Promise.reject();return this.cdmSupport.forEach(function(e){t=t.catch(function(){return navigator.requestMediaKeySystemAccess(e.keySystem,Q)})}),t=t.catch(function(){return Promise.reject(v)})},t.handleEncrypted=(W=f()(O.a.mark(function e(t){var i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasSession(t.initData))return e.abrupt("return");e.next=2;break;case 2:if(this.sessions.push(t),"sinf"===t.initDataType)return this.handleWebKitEncrypted(t),e.abrupt("return");e.next=6;break;case 6:if(null===this.cdmSupport&&(this.cdmSupport=function(h){return e=function(){if(null===h)return[];for(var e=new DataView(h.buffer||h),t=[],i=0;;){var n,r,o=void 0;if(i>=e.buffer.byteLength)break;if(n=i+e.getUint32(i),i+=4,e.getUint32(i)===D("pssh"))if(i+=4,0===(r=e.getUint8(i))||1===r){i++,i+=3;for(var o="",s=0;s<4;s++)o+=R(e.getUint8(i+s));i+=4,o+="-";for(var a=0;a<2;a++)o+=R(e.getUint8(i+a));i+=2,o+="-";for(var u=0;u<2;u++)o+=R(e.getUint8(i+u));i+=2,o+="-";for(var c=0;c<2;c++)o+=R(e.getUint8(i+c));i+=2,o+="-";for(var d=0;d<6;d++)o+=R(e.getUint8(i+d));i+=6,o=o.toLowerCase(),e.getUint32(i),i+=4,t.push(o),i=n}else i=n;else i=n}return t}(),i=[],e.forEach(function(t){Object.keys(p).forEach(function(e){e=p[e];e.uuid===t&&i.push(e)})}),i;var e,i}(t.initData)),void 0===this.mediaKeys)return this.mediaKeys=null,e.prev=9,e.next=12,this.createKeySystemSupportChain();e.next=24;break;case 12:return i=e.sent,this.selectedCDM=m[i.keySystem],e.next=16,i.createMediaKeys();case 16:return i=e.sent,e.next=19,this.setMediaKeys(i);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),this.handleError(e.t0);case 24:this.addSession(t);case 25:case"end":return e.stop()}},e,this,[[9,21]])})),function(e){return W.apply(this,arguments)}),t.setMediaKeys=function(e){var t=this;return this.mediaKeys=e,this.pendingSessions.forEach(function(e){return t.createSessionRequest(e)}),this.pendingSessions=[],this.video.setMediaKeys(this.mediaKeys)},t.addSession=function(e){var t=this;this.mediaKeys?this.createSessionRequest(e).catch(function(){t.handleError(E)}):this.pendingSessions.push(e)},t.createSessionRequest=function(e){var t=this,i=e.initDataType,n=e.initData,e=this.mediaKeys.createSession();return e.addEventListener("message",function(e){return t.handleMessage(e)}),e.addEventListener("keystatuseschange",function(e){return t.handleKeyStatusesChange(e,n)}),e.generateRequest(i,n)},t.handleKeyStatusesChange=function(e,t){var i=this,e=e.target,n=!1;e.keyStatuses.forEach(function(e){switch(e){case"expired":n=!0;break;case"internal-error":i.handleError(S)}}),n&&e.close().then(function(){return i.removeSession(t)})},t.removeSession=function(e){for(var t=0;t<this.sessions.length;t++)if(this.sessions[t].initData===e)return void this.sessions.splice(t,1)},t.handleMessage=(G=f()(O.a.mark(function e(t){var i,n,r=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.target,e.next=3,this.generateLicense(t.message);case 3:n=e.sent,i.update(n).catch(function(){r.handleError(g)});case 5:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)}),t.generateLicense=(F=f()(O.a.mark(function e(t){var i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedCDM===p.CLEARKEY)return i=JSON.parse((new TextDecoder).decode(t)),i=i.kids.map(function(e){return{kty:"oct",alg:"A128KW",kid:e,k:e}}),i=(new TextEncoder).encode(JSON.stringify({keys:i})),e.abrupt("return",Promise.resolve(i));e.next=7;break;case 7:if(this.authXml)return e.next=10,this.authXml;e.next=14;break;case 10:return i=e.sent,e.abrupt("return",this.requestLicense(t,i));case 14:this.handleError(T);case 15:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)}),t.requestLicense=(B=f()(O.a.mark(function e(t,i){var n,r,o=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",responseType:"arraybuffer",body:t,headers:{customdata:i,"Content-Type":"application/octet-stream"}},this.selectedCDM===p.PLAYREADY&&(r=x(t),n.body=r.body,n.headers=Object.assign(n.headers,r.headers)),e.abrupt("return",M(this.selectedCDM.licenseUrl,n).catch(function(){o.handleError(Object.assign({code:status},y))}));case 3:case"end":return e.stop()}},e,this)})),function(e,t){return B.apply(this,arguments)}),t.handleWebKitEncrypted=(H=f()(O.a.mark(function e(t){var i,n=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectedCDM=p.FAIRPLAY,e.prev=1,e.next=4,M(p.FAIRPLAY.certUrl,{method:"GET",responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}});case 4:i=e.sent,this.setupWebKitMediaKeys(t,i).catch(function(e){return n.handleError(e)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.handleError(Object.assign({code:e.t0},C));case 11:case"end":return e.stop()}},e,this,[[1,8]])})),function(e){return H.apply(this,arguments)}),t.setupWebKitMediaKeys=function(e,n){var r=this;this.video.webkitKeys||this.video.webkitSetMediaKeys(new window.WebKitMediaKeys(p.FAIRPLAY.keySystem));var t,o,s=(t=e.initData,o=L(w(JSON.parse(String.fromCharCode.apply(null,t)).sinf[0]),"schi"),function(){for(var e,t="",i=function(e){var t;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(t=e[Symbol.iterator]()).next.bind(t);if(Array.isArray(e)||(t=function(e){if(e){if("string"==typeof e)return P(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,void 0):void 0}}(e))){t&&(e=t);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(L(o,"tenc").subarray(8,24));!(e=i()).done;)t+=R(e.value);return t}()),a=this.video.webkitKeys.createSession("video/mp4",e.initData);return a.contentId=s,new Promise(function(e,i){if(r.video.webkitKeys||i("Issue setting fairplay media keys"),!a)return i("Could not create key session");a.addEventListener("webkitkeymessage",function(e){var t=e.target;"certificate"===String.fromCharCode.apply(null,e.message)?t.update(new Uint8Array(n)):r.getWebkitLicense(e.message,s).then(function(e){e=e.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),t.update(w(e))}).catch(i)}),a.addEventListener("webkitkeyadded",e),a.addEventListener("webkitkeyerror",i)})},t.getWebkitLicense=function(t,i){return this.authXml?this.authXml.then(function(e){return M(p.FAIRPLAY.licenseUrl,{method:"POST",body:"spc="+(btoa(String.fromCharCode.apply(null,new Uint16Array(t)))+"&assetId=")+i,responseType:"text",headers:{"Content-Type":"application/x-www-form-urlencoded",customdata:e}}).catch(function(e){return Promise.reject(Object.assign({code:e},y))})}):Promise.reject(T)},J),j=i(16),Y=((r=q.prototype).configure=function(e){},r.enqueue=function(e){},r.endOfStream=function(){},r.setTimestampOffset=function(e){},r.onSourceDurationChanged=function(e){},r.play=function(){},r.pause=function(){},r.remove=function(e){},r.seekTo=function(e){this.video.currentTime=e},r.setPlaybackRate=function(e){this.video.playbackRate=e},r.setVolume=function(e){this.video.volume=e},r.buffered=function(){return{start:0,end:0}},r.decodedFrames=function(){return 0},r.droppedFrames=function(){return 0},r.framerate=function(){return 0},r.delete=function(){},r.getVolume=function(){return this.video.volume},r.isMuted=function(){return this.video.muted},r.setMuted=function(e){this.video.muted=e},r.getDisplayWidth=function(){return 0},r.getDisplayHeight=function(){return 0},r.getPlaybackRate=function(){return this.video.playbackRate},r.getCurrentTime=function(){return 0},r.bufferDuration=function(){return 0},r.captureGesture=function(){},q);function q(e){o()(this,"video",void 0),this.video=e}function J(e){var t=this;o()(this,"video",void 0),o()(this,"listener",void 0),o()(this,"cdmSupport",void 0),o()(this,"selectedCDM",void 0),o()(this,"mediaKeys",void 0),o()(this,"pendingSessions",void 0),o()(this,"sessions",void 0),o()(this,"authXml",void 0),this.video=e.video,this.listener=e.listener,this.cdmSupport=null,this.selectedCDM=null,this.mediaKeys=void 0,this.pendingSessions=[],this.reset(),this.video.addEventListener("encrypted",function(e){return t.handleEncrypted(e)}),this.video.addEventListener("webkitneedkey",function(e){return t.handleWebKitEncrypted(e)})}function z(e){return"number"==typeof e.webkitDecodedFrameCount?e.webkitDecodedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().totalVideoFrames:"number"==typeof e.mozDecodedFrames?e.mozDecodedFrames:-1}function X(e){return"number"==typeof e.webkitDroppedFrameCount?e.webkitDroppedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().droppedVideoFrames:-1}function Z(e,t,i){for(var n=0;n<e.length;n++){var r=e.start(n),o=e.end(n);if(!(o<=t)){if(t<r-i)break;for(var s=n+1;s<e.length&&!(e.start(s)-o>i);s++)o=e.end(s);for(var a=n-1;0<=a&&!(r-e.end(a)>i);a--)r=e.start(a);return{start:Math.min(r,t),end:o}}}return{start:t,end:t}}function $(e,t){var i=Z(e.buffered,e.currentTime,t=void 0===t?.1:t).end-e.currentTime>t,n=e.buffered;if(1<n.length||!i)for(var r=e.currentTime,o=0;o<n.length;o++){var s=n.start(o),a=n.end(o);if(r<s&&t<a-s)return s+t}return i?e.currentTime+t:e.currentTime}function ee(e,t,i){return e.addEventListener(t,i),function(){e.removeEventListener(t,i)}}var te=((t=he.prototype).volumeChange=function(){var e=!this.expectingVolumeChanged;this.expectingMutedChanged=!1,this.expectingVolumeChanged=!1;var t=this.video.muted;this.muted!==t?(this.muted=t,this.listener.onSinkMutedChanged(t)):this.listener.onSinkVolumeChanged(this.video.volume,e)},t.rateChange=function(){this.video.playbackRate!==this.expectedRateChange&&this.listener.onSinkPlaybackRateChanged(this.video.playbackRate)},t.unsubscribe=function(){this.unsubscribes.forEach(function(e){return e()})},t.onConfigure=function(){this.expectingVolumeChanged&&(this.listener.onSinkVolumeChanged(this.video.volume,!1),this.expectingVolumeChanged=!1),this.expectingMutedChanged&&(this.muted=this.video.muted,this.listener.onSinkMutedChanged(this.video.muted),this.expectingMutedChanged=!1),this.expectedRateChange=void 0},t.trackRPC=function(e,t){"setVolume"===e&&this.video.volume!==t?this.expectingVolumeChanged=!0:"setMuted"===e&&this.video.muted!==t?this.expectingMutedChanged=!0:"setPlaybackRate"===e&&this.video.playbackRate!==t&&(this.expectedRateChange=t)},he),r=i(3),ie=i.n(r),t=i(15),ne=i.n(t),re=i(8),t=((r=de.prototype).pause=function(){this.paused=!0,this.video.pause()},r.setPlaybackRate=function(e){this.video.playbackRate=e},r.delete=function(){this.unsubscribers.forEach(function(e){return e()})},r.addListener=function(e,t,i){void 0===i&&(i=this.video),this.unsubscribers.push(ee(i,e,t))},r.recordMuteChange=function(){this.lastVolumeChangeEvent={time:this.video.currentTime,muted:this.video.muted}},r.checkStopped=function(e){return!this.video.paused||this.video.ended||this.video.error||this.paused||this.listener.onSinkStop(e||this.unmuteAutopause()),!1},r.unmuteAutopause=function(){var e=this.lastVolumeChangeEvent;return!this.video.muted&&!e.muted&&this.video.currentTime===e.time},de),oe=function(r){function e(e,t,i){var n=r.call(this,e,t)||this;return o()(ie()(n),"intervalId",void 0),o()(ie()(n),"idle",void 0),o()(ie()(n),"ended",void 0),o()(ie()(n),"lastPlayhead",void 0),o()(ie()(n),"lastBufferEnd",void 0),o()(ie()(n),"fps",void 0),o()(ie()(n),"lastDecodedFrames",void 0),o()(ie()(n),"lastTimeUpdate",void 0),o()(ie()(n),"idleTimeout",void 0),o()(ie()(n),"playAttempt",!1),o()(ie()(n),"seeking",!1),o()(ie()(n),"audioBufferList",void 0),o()(ie()(n),"sinkIdleHandler",void 0),o()(ie()(n),"awaitingPotentialAutoplayRejection",!1),n.sinkIdleHandler=i,n.intervalId=0,n.idle=!0,n.ended=!1,n.lastPlayhead=0,n.lastBufferEnd=0,n.fps=0,n.lastDecodedFrames=0,n.lastTimeUpdate=performance.now(),n.idleTimeout=-1,n.audioBufferList=[],n.addListener("play",function(){return n.onVideoPlay()}),n.addListener("pause",function(){return n.onVideoPause()}),n.addListener("timeupdate",function(){return n.onVideoTimeUpdate()}),n.addListener("ended",function(){return n.onVideoEnded()}),n.addListener("error",function(){return n.onVideoError()}),n.addListener("playing",function(){return n.onVideoPlaying()}),n.addListener("seeking",function(){return n.onVideoSeeking()}),n}ne()(e,r);var t=e.prototype;return t.delete=function(){r.prototype.delete.call(this),this.audioBufferList=[],clearInterval(this.intervalId)},t.play=function(){this.paused=!1;for(var e=this.video.buffered,t=0,i=0;i<e.length;i++){var n=e.start(i);if(this.video.currentTime<=n){t=n;break}}this.video.currentTime<t&&(console.warn("Moving to buffered region",t,this.video.currentTime),this.seekTo(t)),this.playInternal()},t.endOfStream=function(){this.ended=!0,this.idle=!1,clearTimeout(this.idleTimeout),this.idleTimeout=-1},t.framerate=function(){return this.fps},t.seekTo=function(e){this.video.seekable.length&&e!==this.video.currentTime&&(this.seeking=!0,this.video.currentTime=e)},t.addSourceBuffer=function(e,t){(-1<t.indexOf("mp4a")||-1<t.indexOf("opus"))&&this.audioBufferList.push(e)},t.clearSourceBuffers=function(){this.audioBufferList=[]},t.onVideoPlay=function(){var e=this;this.playAttempt?(this.lastPlayhead=this.video.currentTime,clearInterval(this.intervalId),this.intervalId=self.setInterval(function(){return e.heartbeat()},2e3)):(this.pause(),this.listener.play()),this.playAttempt=!1},t.onVideoPause=function(){this.awaitingPotentialAutoplayRejection||(this.checkStopped(!1),clearInterval(this.intervalId))},t.onVideoTimeUpdate=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1;var e=z(this.video),t=performance.now();this.fps=1e3*Math.max(e-this.lastDecodedFrames,0)/(t-this.lastTimeUpdate),this.lastDecodedFrames=e,this.lastTimeUpdate=t,this.listener.onSinkTimeUpdate();t=Z(this.video.buffered,this.video.currentTime,.1);this.checkBufferUpdate(t),this.updateIdle(t)},t.onVideoEnded=function(){this.listener.onSinkEnded()},t.onVideoPlaying=function(){this.video.paused||this.listener.onSinkPlaying(this.paused)},t.onVideoSeeking=function(){this.seeking?this.seeking=!1:this.listener.seekTo(this.video.currentTime)},t.onVideoError=function(){var e=this.video.error,t=e.code,e=e.message;this.listener.onSinkError({value:t,code:t,message:void 0===e?"":e})},t.heartbeat=function(){var e,t=Z(this.video.buffered,this.video.currentTime,.1);this.video.paused?clearInterval(this.intervalId):this.video.currentTime===this.lastPlayhead?((e=$(this.video,.1))!==this.video.currentTime&&(console.warn("jumping "+(e-this.video.currentTime)+"s gap"),this.seekTo(e)),this.updateIdle(t,e===this.video.currentTime)):(this.checkBufferUpdate(t),this.lastPlayhead=this.video.currentTime),this.videoDisplaySizeUpdate()},t.videoDisplaySizeUpdate=function(){var e=this.video.clientWidth*window.devicePixelRatio,t=this.video.clientHeight*window.devicePixelRatio;this.listener.onSinkVideoDisplaySizeChanged(e,t)},t.checkBufferUpdate=function(e){e=e.end;e!==this.lastBufferEnd&&(this.lastBufferEnd=e,this.listener.onSinkBufferUpdate())},t.updateIdle=function(e,t){var i,n=this,r=e.end;void 0===t&&(t=!1),this.video.paused?this.idle=!0:(i=[r].concat(this.audioBufferList.map(function(e){return Z(e.buffered,n.video.currentTime,.1).end})),e=Math.max.apply(null,i),i=0<(i=this.video.buffered.length)?this.video.buffered.end(i-1):r,(r=e-this.video.currentTime<.1||t&&i<r)&&!this.idle&&(console.warn("playhead",this.video.currentTime,"max buffer",e,"max played",i),clearTimeout(this.idleTimeout),this.idleTimeout=self.setTimeout(function(){return n.onBufferingTimeout()},12e4),this.sinkIdleHandler()),this.idle=r)},t.onBufferingTimeout=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1,this.listener.onSinkError({value:101,code:101,message:"Buffering timeout"})},t.playInternal=function(){var e=this;this.playAttempt=!0,this.awaitingPotentialAutoplayRejection=!0,re.a.resolve(this.video.play()).then(function(){e.awaitingPotentialAutoplayRejection=!1}).catch(function(){e.playAttempt=!1,e.awaitingPotentialAutoplayRejection=!1,e.checkStopped(!0)})},e}(t),se=((r=ce.prototype).push=function(e){this.tail===this.buffer.length?this.buffer.push(e):this.buffer[this.tail]=e,this.tail++},r.pop=function(){var e=this.buffer[this.head];return this.buffer[this.head]=null,this.head++,this.empty()&&(this.head=0,this.tail=0),e},r.size=function(){return this.tail-this.head},r.empty=function(){return this.head>=this.tail},ce),ae=((r=ue.prototype).appendBuffer=function(e){this.schedule(function(t){try{t.appendBuffer(e)}catch(e){var i,n;"QuotaExceededError"===e.name&&(i=(n=t.buffered).start(0),n=n.end(n.length-1),t.remove((i+n)/2,n))}})},r.setTimestampOffset=function(t){this.schedule(function(e){e.timestampOffset=t})},r.remove=function(n,r){this.schedule(function(e){var t,i=e.buffered;!i.length||(t=Math.max(n,i.start(0)))<(i=Math.min(r,i.end(i.length-1)))&&e.remove(t,i)})},r.schedule=function(e){this.pending.empty()&&!this.updating()?e(this.srcBuf):(this.pending.push(e),this.process())},r.process=function(){for(;!this.pending.empty()&&!this.updating();)this.pending.pop()(this.srcBuf)},r.updating=function(){return!this.srcBuf||this.srcBuf.updating||null!==this.video.error},ue);function ue(e,t){o()(this,"video",void 0),o()(this,"srcBuf",void 0),o()(this,"pending",void 0),this.video=e,this.srcBuf=t,this.pending=new se,this.srcBuf.addEventListener("updateend",this.process.bind(this))}function ce(){o()(this,"buffer",void 0),o()(this,"head",void 0),o()(this,"tail",void 0),this.buffer=[],this.head=0,this.tail=0}function de(e,t){o()(this,"paused",!0),o()(this,"listener",void 0),o()(this,"video",void 0),o()(this,"unsubscribers",void 0),o()(this,"lastVolumeChangeEvent",void 0),this.video=e,this.listener=t,this.paused=!0,this.unsubscribers=[],this.addListener("volumechange",this.recordMuteChange.bind(this)),this.recordMuteChange()}function he(e,t){o()(this,"muted",void 0),o()(this,"video",void 0),o()(this,"listener",void 0),o()(this,"unsubscribes",[]),o()(this,"expectingMutedChanged",!1),o()(this,"expectingVolumeChanged",!1),o()(this,"expectedRateChange",void 0),this.video=e,this.listener=t,this.muted=e.muted,this.unsubscribes.push(ee(e,"volumechange",this.volumeChange.bind(this))),this.unsubscribes.push(ee(e,"ratechange",this.rateChange.bind(this)))}function le(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function fe(e){return""===e.codecs||"undefined"==typeof MediaSource||MediaSource.isTypeSupported('video/mp4;codecs="'+e.codecs+'"')}function pe(e){var t,i;return void 0!==e.hidden?(t="hidden",i="visibilitychange"):void 0!==e.msHidden?(t="msHidden",i="msvisibilitychange"):void 0!==e.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),{hidden:t,visibilityChange:i}}function me(e,t,i){return Math.min(i,Math.max(t,e))}function ve(e){e.removeAttribute("src")}var ge=((r=ye.prototype).configure=function(e){var t=this,i=e.trackID,n=e.codec,e=e.isProtected;this.codecs[i]=n,this.trackOffsets[i]=0,this.mediaSource||(this.mediaSource=Se(this.video),this.mediaSource.then(function(e){e.addEventListener("sourceended",t.onMediaSourceEnd.bind(t))})),e!==this.isProtected&&(this.isProtected=e,this.mediaSource=this.createMediaSourceWhenSinkIdles(this.video),this.tracks=Object.create(null)),this.tracks[i]||this.addSourceBuffer(i,n,0)},r.enqueue=function(e){var t=e.trackID,i=e.buffer,t=this.tracks[t];t&&t.then(function(e){return e.appendBuffer(i)},Ee)},r.endOfStream=function(){var e=this;this.scheduleUpdate().then(function(){return e.playbackMonitor.endOfStream()})},r.setTimestampOffset=function(e){var t=e.trackID,i=e.offset,e=this.tracks[t];e&&(this.trackOffsets[t]=i,this.scheduleUpdate().then(e.then(function(e){return e.setTimestampOffset(i)},Ee)))},r.onSourceDurationChanged=function(r){var o=this;this.mediaSource.then(function(e){var t,i,n,n=(t=e.duration,i=o.video.controls,n=null,r===1/0?i&&t!==1/0?n=r:i||t===1<<30||(n=1<<30):r!==t&&(n=r),n);null!==n&&o.updateMediaSourceDuration(e,n)}),this.removeTimeupdateListener(),this.removeTimeupdateListener=ee(this.video,"timeupdate",function(){return o.onSourceDurationChanged(r)})},r.play=function(){this.playbackMonitor.play()},r.pause=function(){this.playbackMonitor.pause()},r.remove=function(e){function t(e){return e.remove(n,r)}var i,n=e.start,r=e.end;for(i in this.tracks)this.tracks[i].then(t)},r.seekTo=function(e){var t=this,i=Z(this.video.buffered,this.video.currentTime,.1),n=i.start,i=i.end;n<=e&&e<i?this.scheduleUpdate().then(function(){return t.playbackMonitor.seekTo(e)}):this.playbackMonitor.seekTo(e)},r.setVolume=function(e){this.video.volume!==e&&(this.video.volume=e)},r.getVolume=function(){return this.video.volume},r.isMuted=function(){return this.video.muted},r.setMuted=function(e){this.video.muted!==e&&(this.video.muted=e)},r.getDisplayWidth=function(){return this.video.clientWidth},r.getDisplayHeight=function(){return this.video.clientHeight},r.setPlaybackRate=function(e){this.playbackMonitor.setPlaybackRate(e)},r.getPlaybackRate=function(){return this.video.playbackRate},r.getCurrentTime=function(){return this.video.currentTime},r.buffered=function(){return Z(this.video.buffered,this.video.currentTime,.1)},r.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.video.currentTime)},r.decodedFrames=function(){return z(this.video)},r.droppedFrames=function(){return X(this.video)},r.framerate=function(){return this.playbackMonitor.framerate()},r.captureGesture=function(){this.playbackMonitor.play(),this.playbackMonitor.pause()},r.delete=function(){var e;this.removeTimeupdateListener(),this.playbackMonitor.delete(),this.video.src&&(e=this.video.src,ve(this.video),this.video.load(),URL.revokeObjectURL(e))},r.addSourceBuffer=function(e,t,i){var n=this,r=this.mediaSource.then(function(e){e=e.addSourceBuffer("video/mp4;"+t);return n.playbackMonitor.addSourceBuffer(e,t),e.timestampOffset=i,new ae(n.video,e)});r.catch(function(e){return n.listener.onSinkError({value:4,code:4,message:e.toString()})}),this.tracks[e]=r},r.scheduleUpdate=function(){function e(t){return new re.a(function(e){return t.schedule(e)})}var t,i=[];for(t in this.tracks)i.push(this.tracks[t].then(e));return re.a.all(i).catch(Ee)},r.updateMediaSourceDuration=function(e,t){var i,n=this;"open"===e.readyState?e.duration=t:i=ee(e,"sourceopen",function(){i(),"open"===e.readyState&&n.scheduleUpdate().then(function(){e.duration=t})})},r.onMediaSourceEnd=function(){this.tracks=Object.create(null),this.video.load(),this.listener.onSinkReset()},r.createMediaSourceWhenSinkIdles=function(r){var o=this;return new re.a(function(i,n){function e(){o.playbackMonitor.pause(),o.playbackMonitor.clearSourceBuffers();var e=o.video.src,t=o.video.currentTime;Se(r).then(i).catch(n),e&&URL.revokeObjectURL(e),o.video.currentTime=t}r.paused?e():o.sinkIdleListener=function(){e(),o.sinkIdleListener=o.defaultSinkIdleListener}})},ye);function ye(e,t){var i=this;o()(this,"video",void 0),o()(this,"codecs",void 0),o()(this,"listener",void 0),o()(this,"playbackMonitor",void 0),o()(this,"mediaSource",void 0),o()(this,"tracks",void 0),o()(this,"trackOffsets",void 0),o()(this,"removeTimeupdateListener",void 0),o()(this,"isProtected",void 0),o()(this,"sinkIdleListener",void 0),o()(this,"defaultSinkIdleListener",void 0),this.video=t,this.codecs=Object.create(null),this.listener=e,this.defaultSinkIdleListener=function(){i.listener.onSinkIdle()},this.sinkIdleListener=this.defaultSinkIdleListener,this.playbackMonitor=new oe(t,e,function(){return i.sinkIdleListener()}),this.mediaSource=null,this.tracks=Object.create(null),this.trackOffsets=Object.create(null),this.removeTimeupdateListener=Ee,this.isProtected=!1}function Ee(){}function Se(r){return new re.a(function(t,i){var n=new MediaSource;n.addEventListener("sourceopen",function e(){n.removeEventListener("sourceopen",e),"open"===n.readyState?(n.duration=1<<30,t(n)):i(new Error("MediaSource not opened"))});var e=r.playbackRate;r.src=URL.createObjectURL(n),r.playbackRate=e})}var ke,Te=function(n){function e(e,t){var i=n.call(this,t,e)||this;o()(ie()(i),"fps",void 0),o()(ie()(i),"intervalId",void 0),o()(ie()(i),"bufferingTimeoutId",void 0),o()(ie()(i),"attemptingToPlay",void 0),o()(ie()(i),"hasPlayedSrc",void 0),o()(ie()(i),"hasReloadedOnDecodeError",void 0),i.fps=0,i.intervalId=-1,i.bufferingTimeoutId=-1,i.attemptingToPlay=!1,i.hasPlayedSrc=!1,i.hasReloadedOnDecodeError=!1,i.addListener("waiting",function(){return i.onVideoWaiting()},i.video),i.addListener("timeupdate",function(){return i.onVideoTimeUpdate()},i.video),i.addListener("durationchange",function(){return i.onVideoDurationChange()},i.video),i.addListener("error",function(){return i.onVideoError()},i.video),i.addListener("play",function(){return i.onVideoPlay()},i.video),i.addListener("pause",function(){return i.onVideoPause()},i.video),i.addListener("ended",function(){return i.onVideoEnded()},i.video),i.addListener("playing",function(){return i.onVideoPlaying()},i.video);e=pe(document).visibilityChange;return i.addListener(e,function(){return i.onVisibilityChange()},document),i.handleTrackEvents(),i}ne()(e,n);var t=e.prototype;return t.configure=function(e){e=e.path;this.hasReloadedOnDecodeError=!1,this.hasPlayedSrc=!1,this.video.src=e},t.play=function(){var e,t=this,i=this.video.buffered;0<i.length&&(e=i.start(i.length-1),i=i.end(i.length-1),this.video.duration===1/0&&(i<this.video.currentTime||this.video.currentTime<e)&&(console.warn("Moving to buffered region"),this.video.currentTime=e)),this.paused=!1,this.attemptingToPlay=!0,Promise.resolve(this.video.play()).then(function(){t.attemptingToPlay=!1,t.hasPlayedSrc=!0}).catch(function(){t.attemptingToPlay=!1,t.checkStopped(!0)})},t.pause=function(){n.prototype.pause.call(this),clearTimeout(this.intervalId)},t.seekTo=function(e){this.video.currentTime=e},t.setVolume=function(e){this.video.volume=e},t.getVolume=function(){return this.video.volume},t.buffered=function(){return Z(this.video.buffered,this.video.currentTime,.1)},t.decodedFrames=function(){return z(this.video)},t.droppedFrames=function(){return X(this.video)},t.framerate=function(){return this.fps},t.delete=function(){n.prototype.delete.call(this),this.video.src="",this.video.load()},t.isMuted=function(){return this.video.muted},t.setMuted=function(e){this.video.muted=e},t.getDisplayWidth=function(){return this.video.clientWidth},t.getDisplayHeight=function(){return this.video.clientHeight},t.getPlaybackRate=function(){return this.video.playbackRate},t.getCurrentTime=function(){return this.video.currentTime},t.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.video.currentTime)},t.enqueue=function(){},t.endOfStream=function(){},t.setTimestampOffset=function(){},t.remove=function(){},t.onSourceDurationChanged=function(e){},t.captureGesture=function(){Promise.resolve(this.video.play()).catch(function(){}),this.video.pause()},t.handleTrackEvents=function(){var a,u=this;void 0===window.DataCue&&void 0===window.WebKitDataCue||(a=this.video.addTextTrack("metadata","passthrough"),this.addListener("addtrack",function(e){var o,s=e.track;"metadata"===s.kind&&"disabled"===s.mode&&(s.mode="hidden",o=0,u.addListener("cuechange",function(){for(var e=s.cues.length;o<e;o++){var t=s.cues[o],i=t.startTime,n=t.endTime,r=t.type,t=t.value;"org.id3"===r&&t&&("TXXX"===t.key&&"segmentmetadata"!==t.info||"PRIV"==t.key&&"metadata.live-video.net"===t.info)&&((n=new(window.WebKitDataCue||window.DataCue)(i,n,"")).value="PRIV"===t.key?new TextDecoder("utf-8").decode(t.data):t.data||"",n.info=t.info||"",u.addListener("enter",function(e){e=e.target;u.listener.onPassthroughSinkMetadata(e.startTime,e.endTime,e.value,e.info)},n),a.addCue(n))}},s))},this.video.textTracks))},t.onVideoWaiting=function(){var e,t=this;Z(this.video.buffered,this.video.currentTime,.1).end-this.video.currentTime<.1&&(this.listener.onSinkIdle(),clearTimeout(this.bufferingTimeoutId),this.bufferingTimeoutId=self.setTimeout(function(){t.listener.onSinkError({value:101,code:101,message:"Buffering timeout"})},12e4),e=ee(this.video,"timeupdate",function(){e(),clearTimeout(t.bufferingTimeoutId)}));var i=ee(this.video,"timeupdate",function(){4===t.video.readyState&&(i(),t.onVideoPlaying())})},t.onVideoTimeUpdate=function(){var e=this.listener,t=this.video;e.onSinkTimeUpdate(),e.onSinkVideoDisplaySizeChanged(t.clientWidth*self.devicePixelRatio,t.clientHeight*self.devicePixelRatio)},t.onVideoDurationChange=function(){this.listener.onSinkDurationChanged(this.video.duration)},t.onVideoError=function(){var e=this.video.error,t=this.video.error,i=t.code,n=t.message,t=void 0===n?"":n,n=-1!==this.video.src.indexOf(".m3u8");if(4===i&&!this.hasPlayedSrc&&n)return clearTimeout(this.bufferingTimeoutId),void this.listener.onSinkError({value:404,code:404,message:t});3!==e.code||this.hasReloadedOnDecodeError?this.listener.onSinkError({value:i,code:i,message:t}):this.hasReloadedOnDecodeError||(this.hasReloadedOnDecodeError=!0,console.warn("Reload video element on MEDIA_ERR_DECODE 3"),this.video.load())},t.onVideoPlay=function(){var e=this,t=this.video.currentTime;clearTimeout(this.intervalId),this.intervalId=self.setTimeout(function(){return e.heartbeat(t)},2e3)},t.onVideoPause=function(){clearTimeout(this.intervalId),this.attemptingToPlay||this.checkStopped(!1)},t.onVideoEnded=function(){this.listener.onSinkEnded()},t.onVideoPlaying=function(){this.listener.onSinkPlaying(this.paused),this.trackFPS(z(this.video),performance.now()),this.trackBufferUpdate(Z(this.video.buffered,this.video.currentTime,.1).end)},t.onVisibilityChange=function(){var e=pe(document).hidden;document[e]&&(this.hasReloadedOnDecodeError=!1)},t.heartbeat=function(e){var t,i,n=this,r=this.video.currentTime;if(r===e){if(e=Z((t=this.video).buffered,t.currentTime,.1).end-(i=t.currentTime),!(t.ended||t.duration-i<.1)&&e<.1)return void this.listener.onSinkIdle();e=$(this.video,.1);e!==r&&(console.warn("jumping "+(e-r)+"s gap"),this.video.currentTime=e,r=this.video.currentTime)}this.intervalId=self.setTimeout(function(){return n.heartbeat(r)},2e3)},t.trackFPS=function(e,t){var i=this,n=z(this.video),r=performance.now();this.fps=(n-e)/(r-t)*1e3;var o=ee(this.video,"timeupdate",function(){o(),i.trackFPS(n,r)})},t.trackBufferUpdate=function(e){var t=this,i=this.buffered().end;i!==e&&this.listener.onSinkBufferUpdate();var n=ee(this.video,"timeupdate",function(){n(),t.trackBufferUpdate(i)})},e}(t),Ce=((t=be.prototype).delete=function(){this.reset(),this.remoteDevicesListener&&this.remoteDevicesListener.then(function(e){return j.a.stopLookingForRemotePlaybackDevices(e)})},t.configure=function(e){var t=e.mode,i=e.codec,n=e.trackID;this.sink instanceof Y&&(this.sink="chromecast"===t?new j.a(this.listener):new("passthrough"===t?Te:ge)(this.listener,this.video)),i?this.codecs[n]=i:e.codec=this.codecs[n],this.sink.configure(e);n=e.path,e=e.isProtected;n&&e&&this.drmManager.configure(n),this.observer.onConfigure()},t.applyRPC=function(e){var t=e.name,e=e.arg;this.observer.trackRPC(t,e),this.sink[t].call(this.sink,e)},t.getCurrentSink=function(){return this.sink},t.reset=function(){this.sink.delete(),this.drmManager.reset(),this.sink=new Y(this.video),this.listener.onSinkTimeUpdate(),this.listener.onSinkBufferUpdate()},t.videoElement=function(){return this.video},t.isProtected=function(){return this.drmManager.isProtected()},t.captureGesture=function(){this.video.played.length||this.sink.captureGesture()},t.destroy=function(){this.observer.unsubscribe(),this.delete()},t.isLowLatencyCapable=function(){return this.sink instanceof ge},be);function be(e,t,i){o()(this,"video",void 0),o()(this,"listener",void 0),o()(this,"drmManager",void 0),o()(this,"codecs",void 0),o()(this,"sink",void 0),o()(this,"observer",void 0),o()(this,"remoteDevicesListener",void 0),this.video=i||document.createElement("video"),this.listener=e,this.drmManager=new K({video:this.video,listener:e}),this.codecs=Object.create(null),this.sink=new Y(this.video),t&&(this.remoteDevicesListener=j.a.lookForRemotePlaybackDevices(this.listener)),this.observer=new te(this.video,e)}(t=ke=ke||{})[t.STATE_CHANGED=0]="STATE_CHANGED",t[t.CONFIGURE=1]="CONFIGURE",t[t.RESET=2]="RESET",t[t.ADD_CUE=3]="ADD_CUE",t[t.GET_DECODE_INFO=4]="GET_DECODE_INFO",t[t.MEDIA_SINK_RPC=5]="MEDIA_SINK_RPC",t[t.GET_EXPERIMENTS=6]="GET_EXPERIMENTS",t[t.LOG_MESSAGE=7]="LOG_MESSAGE",t[t.DATA_CHANNEL_CREATE=8]="DATA_CHANNEL_CREATE",t[t.DATA_CHANNEL_CLOSE=9]="DATA_CHANNEL_CLOSE",t[t.DATA_CHANNEL_SEND=10]="DATA_CHANNEL_SEND",t[t.RTC_SET_REMOTE_DESCRIPTION=11]="RTC_SET_REMOTE_DESCRIPTION",t[t.PROPERTY_CHANGED=12]="PROPERTY_CHANGED";var Pe,Ae=i(14),Me=((i=we.prototype).on=function(e,t){this.emitter.on(String(e),t)},i.removeListener=function(e,t){this.emitter.removeListener(String(e),t)},i.emit=function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.emitter).emit.apply(t,[String(e)].concat(n))},i.removeAllListeners=function(){this.emitter.removeAllListeners()},we),Le=((i=Re.prototype).createDataChannel=(Pe=f()(O.a.mark(function e(t,i){var n,r,o=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.peerConnection||(this.peerConnection=new RTCPeerConnection({sdpSemantics:"unified-plan",rtcpMuxPolicy:"require"})),(n=this.peerConnection.createDataChannel(t,i)).binaryType="arraybuffer",this.dataChannelMap.set(t,n),n.addEventListener("message",function(e){o.listener.onMessage(e.data)}),n.addEventListener("open",function(){return o.listener.onOpen()}),n.addEventListener("close",function(){return o.listener.onClose()}),n.addEventListener("error",function(){return function(e){return o.listener.onError(e.error.message)}}),e.prev=8,e.next=11,this.peerConnection.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1});case 11:return r=e.sent,e.next=14,this.peerConnection.setLocalDescription(r);case 14:this.listener.onOffer(r.type,r.sdp),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),this.listener.onError("connection error");case 20:case"end":return e.stop()}},e,this,[[8,17]])})),function(e,t){return Pe.apply(this,arguments)}),i.close=function(e){this.dataChannelMap.has(e)&&(this.dataChannelMap.get(e).close(),this.dataChannelMap.delete(e)),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null)},i.send=function(e,t){var i;this.dataChannelMap.has(e)?"open"===(i=this.dataChannelMap.get(e)).readyState?i.send(t):i.addEventListener("open",function(){return i.send(t)}):this.listener.onError("No data channel")},i.setRemoteDescription=function(e){this.peerConnection||this.listener.onError("No peer connection"),this.peerConnection.setRemoteDescription(e)},Re),De=function(){function r(e,t){var i=this;o()(this,"worker",void 0),o()(this,"id",void 0),o()(this,"emitter",void 0),o()(this,"seekTime",void 0),o()(this,"paused",void 0),o()(this,"isLoaded",void 0),o()(this,"autoplay",void 0),o()(this,"mediaSinkManager",void 0),o()(this,"webRTCDataChannelManager",void 0),o()(this,"experiments",void 0),o()(this,"enableRemoteSearch",void 0),o()(this,"isQualitySupported",void 0),o()(this,"onvisibilitychange",void 0),o()(this,"onmessage",void 0),o()(this,"onOnline",void 0),o()(this,"onOffline",void 0),o()(this,"pauseHiddenSilentTab",void 0),o()(this,"state",void 0),o()(this,"workerMessageProcessors",void 0),this.worker=t,this.id=r.instanceId++,this.emitter=new Me,this.seekTime=null,this.paused=!0,this.isLoaded=!1,this.autoplay=!1,this.isQualitySupported=e.isQualitySupported||fe,this.onvisibilitychange=function(){return i.onVisibilityChange()},this.onmessage=function(e){return i.onWorkerMessage(e)},this.onOnline=function(){return i.postMessage("onOnline")},this.onOffline=function(){return i.postMessage("onOffline")},this.enableRemoteSearch=e.enableRemoteSearch||!1;var n,t=Object(s.a)();this.pauseHiddenSilentTab=t.chrome&&63===t.major||t.opera,this.mediaSinkManager=new Ce(this,this.enableRemoteSearch),this.webRTCDataChannelManager=new Le({onClose:function(){return i.postMessage("onClose")},onError:function(e){return i.postMessage("onError",[e])},onMessage:function(e){return i.postMessage("onMessage",[e],[e])},onOpen:function(){return i.postMessage("onOpen")},onOffer:function(e,t){return i.postMessage("onOffer",[e,t])}}),this.experiments=null,this.workerMessageProcessors=[d],h.isSupported()&&(n=new h,this.workerMessageProcessors.push(n.processor)),this.state={averageBitrate:0,bandwidthEstimate:0,looping:!1,autoQualityMode:!0,volume:1,liveLatency:0,liveLowLatencyEnabled:!0,liveLowLatency:!1,statistics:{}},this.resetState(),this.attachHandlers(),this.postMessage("create",[{logLevel:String(e.logLevel),mseSupported:Object(l.a)(),keySystem:void 0!==e.keySystem?e.keySystem:(n=t,window.WebKitMediaKeys&&"function"==typeof window.WebKitMediaKeys.isTypeSupported&&window.WebKitMediaKeys.isTypeSupported(p.FAIRPLAY.keySystem)?p.FAIRPLAY.uuid:"function"!=typeof navigator.requestMediaKeySystemAccess||n.safari?"":(n.msIE||n.msEdgeLegacy?p.PLAYREADY:p.WIDEVINE).uuid),browserContext:t,codecs:r.isVP9Supported()?["vp09"]:[],testOnly:e.testOnly,playerFramework:e.playerFramework}]),"debug"===e.logLevel&&this.postMessage("setConfiguration",[JSON.stringify({analytics:{enabledForAllSessions:!0}})])}r.isVP9Supported=function(){return Object(l.a)()&&MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')};var e=r.prototype;return e.delete=function(){var e=pe(document).visibilityChange;this.postMessage("delete"),this.worker.removeEventListener("message",this.onmessage),document.removeEventListener(e,this.onvisibilitychange),window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline),this.mediaSinkManager.destroy(),this.emitter.removeAllListeners(),this.emitter=null},e.attachHTMLVideoElement=function(e){this.mediaSinkManager&&this.mediaSinkManager.destroy(),this.mediaSinkManager=new Ce(this,this.enableRemoteSearch,e),this.processVideoElementAttributes(e)},e.getHTMLVideoElement=function(){return this.mediaSinkManager.videoElement()},e.load=function(e,t){this.postMessage("load",[e,t=void 0===t?"":t]),this.autoplay&&this.postMessage("playIntent")},e.play=function(){this.postMessage("playIntent"),this.mediaSinkManager.captureGesture(),this.paused=!1,this.attemptPlay()},e.setAutoplay=function(e){this.autoplay=e},e.getExperiments=function(){return this.experiments},e.setExperiment=function(e,t){this.setExperimentData({id:e,assignment:t,version:0,type:""})},e.setExperimentData=function(e){this.postMessage("setExperiment",[e])},e.pause=function(){this.paused=!0,this.postMessage("pause")},e.isPaused=function(){return this.paused},e.seekTo=function(e){this.seekTime=e,this.postMessage("seekTo",[e])},e.isSeeking=function(){return null!==this.seekTime},e.isAutoplay=function(){return this.autoplay},e.getDuration=function(){return this.state.duration},e.getStartOffset=function(){return this.state.startOffset||0},e.getPosition=function(){return null===this.seekTime?this.mediaSinkManager.getCurrentSink().getCurrentTime():this.seekTime},e.getBuffered=function(){return this.mediaSinkManager.getCurrentSink().buffered()},e.getBufferDuration=function(){return this.state.bufferedPosition-this.getPosition()},e.getState=function(){return this.state.state},e.getVideoWidth=function(){return this.mediaSinkManager.videoElement().videoWidth},e.getVideoHeight=function(){return this.mediaSinkManager.videoElement().videoHeight},e.getVideoFrameRate=function(){return this.state.statistics.framerate},e.getVideoBitRate=function(){return this.state.statistics.bitrate},e.getAverageBitrate=function(){return this.state.averageBitrate},e.getBandwidthEstimate=function(){return this.state.bandwidthEstimate},e.getPath=function(){return this.state.path},e.getProtocol=function(){return this.state.protocol},e.getVersion=function(){return"1.4.0-twitch.1-rc.1"},e.isLiveLowLatency=function(){return this.state.liveLowLatencyEnabled&&this.state.liveLowLatency},e.isLooping=function(){return this.state.looping},e.setLogLevel=function(e){this.postMessage("setLogLevel",[e])},e.setLooping=function(e){this.state.looping=e,this.postMessage("setLooping",[e])},e.isMuted=function(){return this.mediaSinkManager.getCurrentSink().isMuted()},e.setMuted=function(e){this.mediaSinkManager.getCurrentSink().setMuted(e)},e.setVolume=function(e){this.state.volume=e,this.postMessage("setVolume",[this.state.volume])},e.getVolume=function(){return this.state.volume},e.getQuality=function(){return this.state.quality},e.setQuality=function(e,t){void 0===t&&(t=!1),this.mediaSinkManager.videoElement().controls||(this.postMessage("setQuality",[e,t]),this.state.autoQualityMode=!1)},e.getQualities=function(){return this.state.qualities},e.setAuthToken=function(e){this.postMessage("setAuthToken",[e])},e.isAutoQualityMode=function(){return this.state.autoQualityMode},e.setAutoQualityMode=function(e){this.state.autoQualityMode=e,this.postMessage("setAutoQualityMode",[e])},e.setAutoInitialBitrate=function(e){this.postMessage("setAutoInitialBitrate",[e])},e.setAutoMaxQuality=function(e){this.postMessage("setAutoMaxQuality",[e])},e.setAutoMaxBitrate=function(e){this.postMessage("setAutoMaxBitrate",[e])},e.setAutoMaxVideoSize=function(e,t){this.postMessage("setAutoMaxVideoSize",[e,t])},e.setAutoViewportSize=function(e,t){this.postMessage("setAutoViewportSize",[e,t])},e.getPlaybackRate=function(){return this.mediaSinkManager.getCurrentSink().getPlaybackRate()},e.setPlaybackRate=function(e){return this.mediaSinkManager.getCurrentSink().setPlaybackRate(e)},e.setClientId=function(e){this.postMessage("setClientId",[e])},e.setDeviceId=function(e){this.postMessage("setDeviceId",[e])},e.setLiveSpeedUpRate=function(e){this.postMessage("setLiveSpeedUpRate",[e])},e.setPlayerType=function(e){this.postMessage("setPlayerType",[e])},e.setLiveMaxLatency=function(e){this.postMessage("setLiveMaxLatency",[e])},e.setLiveLowLatencyEnabled=function(e){this.state.liveLowLatencyEnabled=e,this.postMessage("setLiveLowLatencyEnabled",[e])},e.setRebufferToLive=function(e){this.postMessage("setRebufferToLive",[e])},e.setVisible=function(e){this.postMessage("setVisible",[e])},e.addEventListener=function(e,t){this.emitter.on(e,t)},e.removeEventListener=function(e,t){this.emitter.removeListener(e,t)},e.getDroppedFrames=function(){return this.state.statistics.droppedFrames},e.getDecodedFrames=function(){return this.state.statistics.decodedFrames},e.getDisplayWidth=function(){return this.mediaSinkManager.getCurrentSink().getDisplayWidth()},e.getDisplayHeight=function(){return this.mediaSinkManager.getCurrentSink().getDisplayHeight()},e.getSessionId=function(){return this.state.sessionId},e.getSessionData=function(){return this.state.sessionData},e.getLiveLatency=function(){return this.state.liveLatency},e.isProtected=function(){return this.mediaSinkManager.isProtected()},e.startRemotePlayback=function(){this.postMessage("startRemotePlayback")},e.endRemotePlayback=function(){this.postMessage("endRemotePlayback")},e.setPlatformName=function(e){this.postMessage("setPlatformName",[e])},e.onSinkTimeUpdate=function(){var e=this.mediaSinkManager.getCurrentSink();null===this.seekTime&&(this.postMessage("onClientSinkUpdate",[{currentTime:e.getCurrentTime(),decodedFrames:e.decodedFrames(),droppedFrames:e.droppedFrames(),framerate:e.framerate(),bufferDuration:e.bufferDuration(),displayHeight:e.getDisplayHeight(),displayWidth:e.getDisplayWidth()}]),this.emitter.emit(a.a.TIME_UPDATE,e.getCurrentTime()))},e.onSinkBufferUpdate=function(){this.emitter.emit(a.a.BUFFER_UPDATE)},e.onSinkDurationChanged=function(e){this.postMessage("onClientSinkDurationChanged",[e])},e.onSinkEnded=function(){this.postMessage("onClientSinkEnded")},e.onSinkIdle=function(){this.postMessage("onClientSinkIdle")},e.onSinkPlaying=function(e){this.postMessage("onClientSinkPlaying"),e&&this.play()},e.onSinkStop=function(e){var t=pe(document).hidden;document[t]?this.postMessage("pause"):e?this.isMuted()?(this.pause(),this.emitter.emit(a.a.PLAYBACK_BLOCKED)):(this.setMuted(!0),this.mediaSinkManager.getCurrentSink().play(),this.emitter.emit(a.a.AUDIO_BLOCKED)):this.pause()},e.onSinkReset=function(){this.postMessage("onClientSinkReset")},e.onSinkError=function(e){var t=e.value,i=e.code,e=e.message;this.postMessage("onClientSinkError",[t,i,e])},e.onSinkVideoDisplaySizeChanged=function(e,t){this.setAutoViewportSize(e,t)},e.onSinkVolumeChanged=function(e,t){this.mediaSinkManager.videoElement().controls&&t&&this.setVolume(e),this.emitter.emit(a.a.VOLUME_CHANGED,this.state.volume)},e.onSinkMutedChanged=function(e){this.postMessage("setMuted",[e]),this.emitter.emit(a.a.MUTED_CHANGED)},e.onSinkPlaybackRateChanged=function(e){this.postMessage("setPlaybackRate",[e])},e.onPassthroughSinkMetadata=function(e,t,i,n){this.emitter.emit(a.a.TEXT_METADATA_CUE,{description:n,endTime:t,startTime:e,text:i,type:"TextMetadataCue"})},e.onRemoteDevice=function(e){this.emitter.emit(e?V.a.AVAILABLE:V.a.UNAVAILABLE)},e.onRemoteReconnect=function(){this.startRemotePlayback()},e.onSessionError=function(){this.postMessage("onClientSinkError",[1,0,"Chromecast session error"])},e.onLoadMediaError=function(){this.postMessage("onClientSinkError",[1,0,"Chromecast load media failed"])},e.onUserCancel=function(){this.endRemotePlayback(),this.emitter.emit(V.a.SESSION_ENDED)},e.onSessionStop=function(){this.endRemotePlayback(),this.emitter.emit(V.a.SESSION_ENDED)},e.onSessionStarted=function(e){this.emitter.emit(V.a.SESSION_STARTED,e)},e.attemptPlay=function(){var e=pe(document).hidden;!document[e]&&this.isLoaded&&this.postMessage("play")},e.getDecodingInfo=function(e){var t=this;navigator.mediaCapabilities.decodingInfo(e).then(function(e){t.postMessage("onMediaDecodingInfoResult",[e])})},e.postMessage=function(e,t,i){this.worker.postMessage({id:this.id,funcName:e,args:t},i=void 0===i?[]:i)},e.resetState=function(){le(this.state,{state:N.a.IDLE,quality:{name:"",group:"",codecs:"",bitrate:0,width:0,height:0,framerate:0},qualities:[],duration:0,startOffset:0,sessionData:{},volume:1,statistics:{bitrate:0,framerate:0,droppedFrames:0,decodeFrames:0,renderedFrames:0}}),this.emitter.emit(a.a.DURATION_CHANGED,0),this.seekTime=null,this.isLoaded=!1},e.attachHandlers=function(){var i=this;this.worker.addEventListener("message",this.onmessage);var e=pe(document).visibilityChange;document.addEventListener(e,this.onvisibilitychange),window.addEventListener("online",this.onOnline),window.addEventListener("offline",this.onOffline);e=this.emitter;e.on(a.a.VOLUME_CHANGED,function(){return i.onVolumeChanged()}),e.on(a.a.MUTED_CHANGED,function(){return i.onMutedChanged()}),e.on(a.a.SEEK_COMPLETED,function(){return i.onSeekCompleted()}),e.on(a.a.ERROR,function(){return i.onError()}),e.on(a.a.SESSION_DATA,function(e){return i.onSessionData(e)}),e.on(ke.STATE_CHANGED,function(e){return i.onStateChanged(e)}),e.on(ke.MEDIA_SINK_RPC,function(e){return i.mediaSinkManager.applyRPC(e)}),e.on(ke.CONFIGURE,function(e){return i.mediaSinkManager.configure(e)}),e.on(ke.RESET,function(){return i.mediaSinkManager.reset()}),e.on(ke.GET_DECODE_INFO,function(e){return i.getDecodingInfo(e)}),e.on(I.a.ID3,function(e){return i.onID3(e)}),e.on(ke.GET_EXPERIMENTS,function(e){i.experiments=e}),e.on(ke.PROPERTY_CHANGED,function(e){var t=e.key,e=e.value;i.state[t]=e}),e.on(ke.DATA_CHANNEL_CREATE,function(e){var t=e.label,e=e.options;return i.webRTCDataChannelManager.createDataChannel(t,e)}),e.on(ke.DATA_CHANNEL_CLOSE,function(e){e=e.label;return i.webRTCDataChannelManager.close(e)}),e.on(ke.DATA_CHANNEL_SEND,function(e){var t=e.label,e=e.buffer;return i.webRTCDataChannelManager.send(t,e)}),e.on(ke.RTC_SET_REMOTE_DESCRIPTION,function(e){e=e.answer;return i.webRTCDataChannelManager.setRemoteDescription(e)}),e.on(ke.LOG_MESSAGE,function(e){var t=e.level,e=e.message;return console[t](e)})},e.onVolumeChanged=function(){var e=pe(document).hidden;this.pauseHiddenSilentTab&&document[e]&&0===this.getVolume()&&this.postMessage("pause")},e.onMutedChanged=function(){var e=pe(document).hidden;this.pauseHiddenSilentTab&&document[e]&&this.isMuted()&&this.postMessage("pause")},e.onSeekCompleted=function(){this.seekTime=null},e.onError=function(){this.paused=!0},e.onStateChanged=function(e){var t,i,n,r=this;switch(e){case N.a.READY:var o=(o=this.state.qualities,t=this.isQualitySupported,i=[],n=[],o.forEach(function(e){(t(e)?i:n).push(e)}),{supported:i,unsupported:n});this.state.qualities=o.supported,o.unsupported.forEach(function(e){return r.postMessage("removeQuality",[e])}),this.isLoaded=!0,this.autoplay&&this.play(),this.paused||this.attemptPlay();break;case N.a.ENDED:this.paused=!0}this.emitter.emit(a.a.STATE_CHANGED,e),this.emitter.emit(e)},e.onID3=function(e){var t=this;e.forEach(function(e){"TXXX"!==e.id||"segmentmetadata"!==e.desc||!e.info.length||(e=function(t){try{return JSON.parse(t)}catch(e){return console.error("Failed JSON parse:",t),{}}}(e.info[0])).hasOwnProperty("stream_offset")&&(e=Number(e.stream_offset),isNaN(e)||(t.state.startOffset=e-t.getPosition()))})},e.onVisibilityChange=function(){var e=pe(document).hidden;this.paused||document[e]||this.attemptPlay(),this.pauseHiddenSilentTab&&!this.paused&&document[e]&&(this.isMuted()||0===this.getVolume())&&this.postMessage("pause"),Object(s.a)().firefox||this.postMessage("setVisible",[!document[e]])},e.onSessionData=function(e){le(this.state,e)},e.onWorkerMessage=function(e){var t,i=e.data;i&&i.id===this.id&&(e=(t=this.workerMessageProcessors.reduce(function(e,t){return t(e)},i)).type,t=t.arg,void 0!==i.arg?this.emitter.emit(e,t):this.emitter.emit(e))},e.processVideoElementAttributes=function(e){var t,i;e.hasAttribute("autoplay")&&(e.removeAttribute("autoplay"),this.setAutoplay(!0)),e.hasAttribute("playbackRate")&&(t=parseFloat(e.getAttribute("playbackRate")),isNaN(t)||(t=me(t,.25,2),this.setPlaybackRate(t)),e.removeAttribute("playbackRate")),e.hasAttribute("src")&&(i=e.src,ve(e),this.load(i)),e.hasAttribute("loop")&&(e.removeAttribute("loop"),this.setLooping(!0)),e.hasAttribute("muted")&&(e.removeAttribute("muted"),this.setMuted(!0)),e.hasAttribute("volume")&&(i=parseFloat(e.getAttribute("volume")),isNaN(i)||this.setVolume(me(i,0,1)),e.removeAttribute("volume"))},r}();function Re(e){o()(this,"peerConnection",void 0),o()(this,"listener",void 0),o()(this,"dataChannelMap",void 0),this.listener=e,this.dataChannelMap=new Map}function we(){o()(this,"emitter",void 0),this.emitter=new Ae.EventEmitter}o()(De,"instanceId",0);var _e=((i=Ie.prototype).postMessage=function(e){this.messageQueue?this.messageQueue.push(e):this.postMessageToWorker(e)},i.terminate=function(){this.terminated=!1},i.addEventListener=function(e,t){this.emitter.on(e,t)},i.removeEventListener=function(e,t){this.emitter.off(e,t)},i.loadScript=function(e,t){var i=this,n=new XMLHttpRequest;n.open("GET",e),n.addEventListener("load",function(){200<=n.status&&n.status<400?t(n.response):i.emitter.emit("error",new Error(n.statusText))}),n.addEventListener("error",function(e){i.emitter.emit("error",e)}),n.send()},i.applyWorkerEnv=function(e,t){try{Function("self","messageHandler",e)(window,this.workerPort)}catch(e){return void this.emitter.emit("error",e)}for(;!this.messageQueue.empty();)this.postMessageToWorker(this.messageQueue.pop());this.messageQueue=null},i.postMessageFromWorker=function(e){var t=this;setTimeout(function(){t.emitter.emit("message",{data:e})},0)},i.postMessageToWorker=function(e){var t=this;setTimeout(function(){t.workerPort.onmessage({data:e})},0)},Ie);function Ie(e,t){var i=this;o()(this,"workerPort",void 0),o()(this,"emitter",void 0),o()(this,"messageQueue",void 0),o()(this,"terminated",void 0),this.workerPort={postMessage:this.postMessageFromWorker.bind(this),onmessage:function(){}},this.emitter=new Ae.EventEmitter,this.messageQueue=new se,this.terminated=!1,this.loadScript(e,function(e){return i.applyWorkerEnv(e,t)})}function Ve(e,t,i){var n,r,o;return void 0===i&&(i=!1),(e=Object(s.a)().msIE?new _e(e,window):(n=e,r=window.location,(o=document.createElement("a")).href=n,o.hostname===r.hostname&&o.port===r.port&&o.protocol===r.protocol?new Worker(e):new Worker(URL.createObjectURL(new Blob(["importScripts('"+e+"')"]))))).postMessage({wasmBinaryUrl:t,showWorkerLogs:i}),e}var Ne="undefined"!=typeof window&&"object"==typeof window.WebAssembly&&"function"==typeof window.WebAssembly.instantiate,Oe=Ne;function xe(e){var t=e.asmWorker,i=e.wasmWorker,n=e.wasmBinary;if(!Oe&&!t)throw new Error("WebAssembly is not supported by the browser. This is required for playback.");n=Ve(Oe?i:t,n,e.showWorkerLog);return new Ue(e,n)}var Ue=((i=He.prototype).addEventListener=function(e,t){this.checkCore()&&this.core.addEventListener(e,t)},i.attachHTMLVideoElement=function(e){this.checkCore()&&this.core.attachHTMLVideoElement(e)},i.delete=function(){this.checkCore()&&(this.core.delete(),this.core=null)},i.endRemotePlayback=function(){this.checkCore()&&this.core.endRemotePlayback()},i.isAutoplay=function(){if(this.checkCore())return this.core.isAutoplay()},i.isAutoQualityMode=function(){if(this.checkCore())return this.core.isAutoQualityMode()},i.getAverageBitrate=function(){if(this.checkCore())return this.core.getAverageBitrate()},i.getBandwidthEstimate=function(){if(this.checkCore())return this.core.getBandwidthEstimate()},i.getBufferDuration=function(){if(this.checkCore())return this.core.getBufferDuration()},i.getBuffered=function(){if(this.checkCore())return this.core.getBuffered()},i.getDecodedFrames=function(){if(this.checkCore())return this.core.getDecodedFrames()},i.getDisplayHeight=function(){if(this.checkCore())return this.core.getDisplayHeight()},i.getDisplayWidth=function(){if(this.checkCore())return this.core.getDisplayWidth()},i.getDroppedFrames=function(){if(this.checkCore())return this.core.getDroppedFrames()},i.getDuration=function(){if(this.checkCore())return this.core.getDuration()},i.getExperiments=function(){if(this.checkCore())return this.core.getExperiments()},i.getHTMLVideoElement=function(){if(this.checkCore())return this.core.getHTMLVideoElement()},i.getLiveLatency=function(){if(this.checkCore())return this.core.getLiveLatency()},i.getPath=function(){if(this.checkCore())return this.core.getPath()},i.getProtocol=function(){if(this.checkCore())return this.core.getProtocol()},i.getPlaybackRate=function(){if(this.checkCore())return this.core.getPlaybackRate()},i.getPosition=function(){if(this.checkCore())return this.core.getPosition()},i.getQualities=function(){if(this.checkCore())return this.core.getQualities()},i.getQuality=function(){if(this.checkCore())return this.core.getQuality()},i.getSessionData=function(){if(this.checkCore())return this.core.getSessionData()},i.getSessionId=function(){if(this.checkCore())return this.core.getSessionId()},i.getStartOffset=function(){if(this.checkCore())return this.core.getStartOffset()},i.getState=function(){if(this.checkCore())return this.core.getState()},i.getVersion=function(){if(this.checkCore())return this.core.getVersion()},i.getVideoBitRate=function(){if(this.checkCore())return this.core.getVideoBitRate()},i.getVideoFrameRate=function(){if(this.checkCore())return this.core.getVideoFrameRate()},i.getVideoHeight=function(){if(this.checkCore())return this.core.getVideoHeight()},i.getVideoWidth=function(){if(this.checkCore())return this.core.getVideoWidth()},i.getVolume=function(){if(this.checkCore())return this.core.getVolume()},i.isLiveLowLatency=function(){if(this.checkCore())return this.core.isLiveLowLatency()},i.isLooping=function(){if(this.checkCore())return this.core.isLooping()},i.isMuted=function(){if(this.checkCore())return this.core.isMuted()},i.isPaused=function(){if(this.checkCore())return this.core.isPaused()},i.isProtected=function(){if(this.checkCore())return this.core.isProtected()},i.isSeeking=function(){if(this.checkCore())return this.core.isSeeking()},i.load=function(e,t){if(void 0===t&&(t=""),this.checkCore())return this.core.load(e,t)},i.pause=function(){this.checkCore()&&this.core.pause()},i.play=function(){this.checkCore()&&this.core.play()},i.removeEventListener=function(e,t){this.checkCore()&&this.core.removeEventListener(e,t)},i.seekTo=function(e){this.checkCore()&&this.core.seekTo(e)},i.setAuthToken=function(e){this.checkCore()&&this.core.setAuthToken(e)},i.setAutoInitialBitrate=function(e){this.checkCore()&&this.core.setAutoInitialBitrate(e)},i.setAutoMaxQuality=function(e){this.checkCore()&&this.core.setAutoMaxQuality(e)},i.setAutoMaxBitrate=function(e){this.checkCore()&&this.core.setAutoMaxBitrate(e)},i.setAutoMaxVideoSize=function(e,t){this.checkCore()&&this.core.setAutoMaxVideoSize(e,t)},i.setAutoplay=function(e){this.checkCore()&&this.core.setAutoplay(e)},i.setAutoQualityMode=function(e){this.checkCore()&&this.core.setAutoQualityMode(e)},i.setAutoViewportSize=function(e,t){this.checkCore()&&this.core.setAutoViewportSize(e,t)},i.setClientId=function(e){this.checkCore()&&this.core.setClientId(e)},i.setDeviceId=function(e){this.checkCore()&&this.core.setDeviceId(e)},i.setExperiment=function(e,t){this.checkCore()&&this.core.setExperiment(e,t)},i.setExperimentData=function(e){this.core.setExperimentData(e)},i.setLiveLowLatencyEnabled=function(e){this.checkCore()&&this.core.setLiveLowLatencyEnabled(e)},i.setLiveMaxLatency=function(e){this.checkCore()&&this.core.setLiveMaxLatency(e)},i.setLiveSpeedUpRate=function(e){this.checkCore()&&this.core.setLiveSpeedUpRate(e)},i.setLogLevel=function(e){this.checkCore()&&this.core.setLogLevel(e)},i.setLooping=function(e){this.checkCore()&&this.core.setLooping(e)},i.setMuted=function(e){this.checkCore()&&this.core.setMuted(e)},i.setPlaybackRate=function(e){this.checkCore()&&this.core.setPlaybackRate(e)},i.setPlayerType=function(e){this.checkCore()&&this.core.setPlayerType(e)},i.setQuality=function(e,t){void 0===t&&(t=!1),this.checkCore()&&this.core.setQuality(e,t)},i.setRebufferToLive=function(e){this.checkCore()&&this.core.setRebufferToLive(e)},i.setVisible=function(e){this.checkCore()&&this.core.setVisible(e)},i.setVolume=function(e){this.checkCore()&&this.core.setVolume(e)},i.startRemotePlayback=function(){this.checkCore()&&this.core.startRemotePlayback()},i.setPlatformName=function(e){this.checkCore()&&this.core.setPlatformName(e)},i.checkCore=function(){return!!this.core||(console.warn("Method called on deleted player instance."),!1)},He);function He(e,t){o()(this,"core",void 0),this.core=new De(e,t)}o()(Ue,"isVP9Supported",De.isVP9Supported)},function(e,t){},function(e,t,i){"use strict";var n,r;i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),(t=n=n||{}).GENERIC="Error",t.NOT_SUPPORTED="ErrorNotSupported",t.NO_SOURCE="ErrorNoSource",t.INVALID_DATA="ErrorInvalidData",t.INVALID_STATE="ErrorInvalidState",t.INVALID_PARAMETER="ErrorInvalidParameter",t.TIMEOUT="ErrorTimeout",t.NETWORK="ErrorNetwork",t.NETWORK_IO="ErrorNetworkIO",t.AUTHORIZATION="ErrorAuthorization",t.NOT_AVAILABLE="ErrorNotAvailable",(t=r=r||{})[t.GEOBLOCKED=1]="GEOBLOCKED",t[t.UNSUPPORTED_DEVICE=2]="UNSUPPORTED_DEVICE",t[t.ANONYMIZER_BLOCKED=3]="ANONYMIZER_BLOCKED",t[t.CELLULAR_NETWORK_PROHIBITED=4]="CELLULAR_NETWORK_PROHIBITED",t[t.UNAUTHORIZATION_ENTITLEMENTS=5]="UNAUTHORIZATION_ENTITLEMENTS",t[t.VOD_RESTRICTED=6]="VOD_RESTRICTED"},function(e,t){e.exports=i(717187)},function(e,t){e.exports=i(385354)},function(e,i,n){"use strict";!function(s){n.d(i,"a",function(){return t});var e=n(5),h=n.n(e),e=n(0),u=n.n(e),e=n(2),l=n.n(e),c=n(6),t=function(){function a(e){var t=this;u()(this,"remotePlayer",void 0),u()(this,"remotePlayerController",void 0),u()(this,"listener",void 0),u()(this,"seekTime",void 0),u()(this,"currentDuration",void 0),this.listener=e,this.currentDuration=0,a.prepareCastContext().then(function(){t.remotePlayer=new cast.framework.RemotePlayer,t.remotePlayerController=new cast.framework.RemotePlayerController(t.remotePlayer)}).catch(function(){t.listener.onSessionError()})}var e,t;a.canCast=function(){return Object(c.a)().chrome},a.stopLookingForRemotePlaybackDevices=function(e){window.cast&&window.cast.framework&&cast.framework.CastContext.getInstance().removeEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,e)},a.lookForRemotePlaybackDevices=(t=h()(l.a.mark(function e(i){var n,t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.prepareCastContext();case 3:return n=e.sent,t=function(e){switch(e.castState){case cast.framework.CastState.NO_DEVICES_AVAILABLE:i.onRemoteDevice(!1);break;case cast.framework.CastState.NOT_CONNECTED:i.onRemoteDevice(!0);break;case cast.framework.CastState.CONNECTED:var t=n.getCurrentSession();t&&t.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&i.onRemoteReconnect()}},n.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,t),n.setOptions({receiverApplicationId:"B3DCF968",autoJoinPolicy:chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED}),e.abrupt("return",t);case 10:e.prev=10,e.t0=e.catch(0),i.onRemoteDevice(!1);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(e){return t.apply(this,arguments)}),a.prepareCastContext=(e=h()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.cast&&window.cast.framework)return e.abrupt("return",Promise.resolve(cast.framework.CastContext.getInstance()));e.next=2;break;case 2:return e.abrupt("return",new Promise(function(i,n){var e;s.__onGCastApiAvailable=function(e,t){e?i(cast.framework.CastContext.getInstance()):n()},document.getElementById("pc-chromecast-sender")||((e=document.createElement("script")).id="pc-chromecast-sender",e.onerror=function(){document.body.removeChild(e),s.__onGCastApiAvailable=function(){},n()},e.async=!0,e.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(e))}));case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});var i,n,r,o=a.prototype;return o.configure=(r=h()(l.a.mark(function e(t){var i,n,r,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.path,e.prev=1,e.next=4,a.prepareCastContext();case 4:if(n=e.sent,r=n.getCurrentSession()){e.next=13;break}return e.next=9,n.requestSession();case 9:r=n.getCurrentSession(),this.setupRemotePlayerListeners(r,this.remotePlayerController),e.next=14;break;case 13:r.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&this.setupRemotePlayerListeners(r,this.remotePlayerController);case 14:return(s=new chrome.cast.media.MediaInfo(i,"")).streamType=chrome.cast.media.StreamType.BUFFERED,o=new chrome.cast.media.GenericMediaMetadata,s.metadata=o,s.customData={analytics:{chromecast_sender:"player-core",platform:"web"}},this.remotePlayerController.stop(),s=new chrome.cast.media.LoadRequest(s),0<this.seekTime&&(s.currentTime=this.seekTime,this.seekTime=0),this.currentDuration=0,e.next=25,r.loadMedia(s);case 25:e.next=30;break;case 27:return e.prev=27,e.t0=e.catch(1),e.abrupt("return",this.handleError(e.t0));case 30:case"end":return e.stop()}},e,this,[[1,27]])})),function(e){return r.apply(this,arguments)}),o.stopMedia=(n=h()(l.a.mark(function e(t){var i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!0),e.next=3,a.prepareCastContext();case 3:i=e.sent,(i=i.getCurrentSession())&&i.getSessionState()!==cast.framework.SessionState.SESSION_RESUMED&&i.endSession(t);case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),o.enqueue=function(){},o.endOfStream=function(){},o.setTimestampOffset=function(){},o.onSourceDurationChanged=function(){},o.play=function(){this.remotePlayer&&this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},o.pause=function(){this.remotePlayer&&!this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},o.remove=function(){},o.seekTo=function(e){this.remotePlayer&&(this.remotePlayer.playerState!==chrome.cast.media.PlayerState.IDLE?(this.remotePlayer.currentTime=e,this.remotePlayerController.seek()):this.seekTime=e)},o.setPlaybackRate=function(e){},o.addCue=function(){},o.bufferDuration=function(){return 0},o.buffered=function(){return{start:0,end:0}},o.decodedFrames=function(){return 0},o.droppedFrames=function(){return 0},o.framerate=function(){return 0},o.getDisplayWidth=function(){return 0},o.getDisplayHeight=function(){return 0},o.getPlaybackRate=function(){return 0},o.getCurrentTime=function(){return this.remotePlayer?this.remotePlayer.currentTime:0},o.delete=function(){this.remotePlayer&&this.stopMedia()},o.setMuted=function(e){this.remotePlayer&&e!==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()},o.isMuted=function(){return!!this.remotePlayer&&this.remotePlayer.isMuted},o.setVolume=function(e){this.remotePlayer&&(this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel())},o.getVolume=function(){return this.remotePlayer?this.remotePlayer.volumeLevel:0},o.captureGesture=function(){},o.getDevice=(i=h()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prepareCastContext();case 2:if(t=e.sent,t=t.getCurrentSession())return e.abrupt("return",t.getCastDevice().friendlyName);e.next=6;break;case 6:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)}),o.setupRemotePlayerListeners=function(i,e){function t(){r.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,o),r.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,s),r.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,a),r.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,u),r.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,c),r.listener.onSessionStop()}var n,r=this,o=(n=h()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=i.getMediaSession())&&(t=t.media,0===r.currentDuration&&null===t.duration&&(r.currentDuration=1/0,r.listener.onSinkDurationChanged(r.currentDuration)),r.listener.onSinkTimeUpdate());case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),s=function(){switch(r.remotePlayer.playerState){case chrome.cast.media.PlayerState.BUFFERING:r.listener.onSinkIdle();break;case chrome.cast.media.PlayerState.PLAYING:r.listener.onSinkPlaying(!1);break;case chrome.cast.media.PlayerState.IDLE:var e=i.getMediaSession();e&&e.idleReason===chrome.cast.media.IdleReason.FINISHED&&r.listener.onSinkEnded()}},a=function(){r.listener.onSinkVolumeChanged(r.remotePlayer.volumeLevel,!0)},u=function(){r.listener.onSinkMutedChanged(r.remotePlayer.isMuted)},c=function(){0!==r.remotePlayer.duration&&(r.currentDuration=r.remotePlayer.duration,r.listener.onSinkDurationChanged(r.currentDuration))};i.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,function(){r.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,o),r.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,s),r.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,a),r.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,u),r.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,c),r.listener.onSessionStarted(i.getCastDevice().friendlyName)});var d=i.getSessionObj();d.addUpdateListener(function(){d.status===chrome.cast.SessionStatus.STOPPED&&t()}),d.addMediaListener(t)},o.handleError=function(e){if(chrome.cast)switch(e){case chrome.cast.ErrorCode.SESSION_ERROR:this.listener.onSessionError();break;case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:this.listener.onRemoteDevice(!1);break;case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:this.listener.onLoadMediaError();break;case chrome.cast.ErrorCode.CANCEL:this.listener.onUserCancel();break;default:this.listener.onSinkError({value:1,code:0,message:"Error requesting chromecast session"})}else this.listener.onSinkError({value:1,code:0,message:"Error loading chromecast SDK"})},a}()}.call(this,n(18))},function(e,t){},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).UNKNOWN="Unspecified",t.FILE="File",t.SEGMENT="Segment",t.SOURCE="Source",t.DECODER="Decode",t.RENDERER="Render",t.MASTER_PLAYLIST="MasterPlaylist",t.MEDIA_PLAYLIST="MediaPlaylist"},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),(t=n=n||{}).DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error"},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(4),a=i(1);function n(e){if(void 0===e||"function"!=typeof e.getTech)throw{message:"videojs not available, Amazon IVS Quality Plugin not registered",code:1};var t,i,s,n;e.getPlugin("enableIVSQualityPlugin")||(t=e.getComponent("MenuButton"),i=e.getComponent("MenuItem"),s=e.extend(i,{constructor:function(e,t){t=t.quality;i.call(this,e,{selectable:!0,label:t.name}),this.quality=t},handleClick:function(e){i.prototype.handleClick.call(this,e);e=this.player().getIVSPlayer();"auto"===this.quality.group?e.setAutoQualityMode(!0):e.setQuality(this.quality)}}),n=e.extend(t,{constructor:function(e){t.call(this,e,{}),this.controlText("Quality")},createItems:function(){var i=this.player(),n=i.getIVSPlayer(),r=[],e=new s(i,{quality:{group:"auto",name:"Auto"}});e.selected(n.isAutoQualityMode()),e.on("click",this._clickHandler.bind(this,e)),e.on("tap",this._clickHandler.bind(this,e)),r.push(e);var o=n.getQuality(),e=n.getQualities();e&&0<e.length&&e.forEach(function(e){var t=new s(i,{quality:e});t.on("click",this._clickHandler.bind(this,t)),t.on("tap",this._clickHandler.bind(this,t)),n.isAutoQualityMode()||t.selected(o.group===e.group),r.push(t)}.bind(this));function t(t){r.forEach(function(e){!n.isAutoQualityMode()&&t&&e&&e.quality&&e.selected(t.group===e.quality.group)})}return n.addEventListener(a.a.QUALITY_CHANGED,t),this.on("dispose",function(){n.removeEventListener(a.a.QUALITY_CHANGED,t)}),r},buildCSSClass:function(){return"vjs-icon-hd vjs-icon-placeholder "+t.prototype.buildCSSClass.call(this)},_clickHandler:function(t){this.items.forEach(function(e){e!==t&&e.selected(!1)})}}),e.registerComponent("QualityMenuButton",n),(e.registerPlugin||e.plugin)("enableIVSQualityPlugin",function(){var t=this;t.getIVSPlayer().addEventListener(r.a.READY,function(){var e=t.controlBar.getChild("QualityMenuButton");e&&(e.dispose(),t.controlBar.removeChild(e)),t.controlBar.addChild("QualityMenuButton")})}))}},function(e,t){},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o,s,a=i(13),u=i(9),c=i(1),d=i(4),h=i(11);(i=o=o||{}).DURATION_CHANGE="durationchange",i.ENDED="ended",i.ERROR="error",i.LOADED_METADATA="loadedmetadata",i.LOADSTART="loadstart",i.PAUSE="pause",i.PLAY="play",i.PLAYING="playing",i.RATE_CHANGE="ratechange",i.SEEKED="seeked",i.SEEKING="seeking",i.TIME_UPDATE="timeupdate",i.VOLUME_CHANGE="volumechange",i.WAITING="waiting",(i=s=s||{})[i.HAVE_NOTHING=0]="HAVE_NOTHING",i[i.HAVE_METADATA=1]="HAVE_METADATA",i[i.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",i[i.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",i[i.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA";var l=((i={})[d.a.IDLE]=1,i[d.a.READY]=1,i[d.a.BUFFERING]=2,i[d.a.PLAYING]=2,i[d.a.ENDED]=1,i);function n(i,n){if(void 0===i||"function"!=typeof i.getTech)throw{message:"videojs not available, AmazonIVS tech not registered",code:1};if(!h.d)throw{message:"WebAssembly support is required for AmazonIVS tech",code:2};var r,e;i.getTech("AmazonIVS")||(r=i.getTech("Tech"),(e=i.extend(r,{constructor:function(e,t){this._readyState=s.HAVE_NOTHING,this._defaultPlaybackRate=1,n.playerFramework={name:"videojs",version:i.VERSION},this._mediaPlayer=Object(h.b)(n),this._mediaPlayer.setAutoplay(!0===e.autoplay),this._attachVideojsListeners(),this._mediaPlayer.addEventListener(c.a.METADATA,this._onCaptionEvent.bind(this)),this.featuresProgressEvents=!0,this.featuresTimeupdateEvents=!0,this.featuresPlaybackRate=!0,this.featuresFullscreenResize=!0,this.featuresVolumeControl=!0,this.featuresMuteControl=!0,this.featuresNativeTextTracks=!1,r.call(this,e,t),window.vttjs&&window.vttjs.restore(),this.triggerReady(),setTimeout(function(){this.options_.loop&&this._mediaPlayer.setLooping(!0),this.options_.muted&&this._mediaPlayer.setMuted(!0)}.bind(this),0)},dispose:function(){this._mediaPlayer.delete()},setPreload:function(){},autoplay:function(e){if("boolean"!=typeof e)return this._mediaPlayer.autoplay;this.setAutoplay(e)},setAutoplay:function(e){this._mediaPlayer.setAutoplay(e)},preload:function(){},load:function(){},readyState:function(){return this._readyState},networkState:function(){if(!this._mediaPlayer)return 0;if(!this._mediaPlayer.getHTMLVideoElement().src)return 3;var e=this._mediaPlayer.getState();return l[e]},ended:function(){return this._mediaPlayer.getState()===d.a.ENDED},seekable:function(){return i.createTimeRange(0,this._mediaPlayer.getDuration())},play:function(){this._mediaPlayer.play(),this.trigger(o.PLAY)},pause:function(){this._mediaPlayer.pause()},setCurrentTime:function(e){this._mediaPlayer.getHTMLVideoElement().src&&(this._mediaPlayer.seekTo(e),this.trigger(o.SEEKING))},controls:function(){return!1},setControls:function(){return!1},muted:function(){return this._mediaPlayer.isMuted()},setMuted:function(e){this._mediaPlayer.setMuted(e)},volume:function(){return this._mediaPlayer.getVolume()},setVolume:function(e){this._mediaPlayer.setVolume(e)},defaultPlaybackRate:function(e){if(!e)return this._defaultPlaybackRate;this._defaultPlaybackRate=e},playbackRate:function(){return this._mediaPlayer.getPlaybackRate()},setPlaybackRate:function(e){this._mediaPlayer.setPlaybackRate(e)},paused:function(){return this._mediaPlayer.isPaused()},duration:function(){return this._mediaPlayer.getDuration()},currentTime:function(){return this._mediaPlayer.getPosition()},createEl:function(){var t=this._mediaPlayer.getHTMLVideoElement();t.setAttribute("class","vjs-tech"),["preload","poster"].forEach(function(e){this.options_[e]&&t.setAttribute(e,this.options_[e])}.bind(this)),this.options_.playsinline&&(t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""));var e=document.createElement("div");return e.appendChild(t),e},src:function(e){this.trigger(o.LOADSTART),this._captionTrack&&(this.textTracks().removeTrack(this._captionTrack),this._captionTrack=null),e&&this._mediaPlayer.load(e)},addEventListener:function(e,t){this._mediaPlayer.addEventListener(e,t)},removeEventListener:function(e,t){this._mediaPlayer.removeEventListener(e,t)},getMediaPlayerAPI:function(){return this._mediaPlayer},supportsFullScreen:function(){return!0},enterFullScreen:function(){var e=this._mediaPlayer.getHTMLVideoElement();(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitEnterFullscreen||function(){console.error("Fullscreen API is not available")}).call(e)},exitFullScreen:function(){(document.exitFullScreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||function(){console.error("Exitscreen API is not available")}).call(document)},_onCaptionEvent:function(e){var t,i;"text/json"!==e.type||(i=JSON.parse(e.data)).caption&&(t=i.caption,this._captionTrack||(this._captionTrack=this.addTextTrack("captions",t.format),this._currentCue=null),this._currentCue&&this._captionTrack.removeCue(this._currentCue),e=this._mediaPlayer.getHTMLVideoElement(),(i=window.VTTCue||window.vttjs.VTTCue)?(this._currentCue=new i(e.currentTime,e.currentTime+2,t.text),this._captionTrack.addCue(this._currentCue)):console.warn("No VTTCue implementation available, caption may not be available"))},_attachVideojsListeners:function(){this._mediaPlayer.addEventListener(d.a.READY,function(){this._readyState=s.HAVE_METADATA,this.trigger(o.LOADED_METADATA)}.bind(this)),this._mediaPlayer.addEventListener(d.a.IDLE,function(){this._readyState=s.HAVE_NOTHING,this.trigger(o.PAUSE)}.bind(this)),this._mediaPlayer.addEventListener(d.a.PLAYING,function(){this._readyState<=s.HAVE_CURRENT_DATA&&(this._readyState=s.HAVE_FUTURE_DATA),this.trigger(o.PLAY),this.trigger(o.PLAYING)}.bind(this)),this._mediaPlayer.addEventListener(d.a.ENDED,function(){this._readyState=s.HAVE_NOTHING,this.trigger(o.ENDED)}.bind(this)),this._mediaPlayer.addEventListener(d.a.BUFFERING,function(){this._readyState=s.HAVE_CURRENT_DATA}.bind(this)),this._mediaPlayer.addEventListener(c.a.REBUFFERING,function(){this._readyState=s.HAVE_CURRENT_DATA,this.trigger(o.WAITING)}.bind(this)),this._mediaPlayer.addEventListener(c.a.TIME_UPDATE,function(){this.trigger(o.TIME_UPDATE)}.bind(this)),this._mediaPlayer.addEventListener(c.a.VOLUME_CHANGED,function(){this.trigger(o.VOLUME_CHANGE)}.bind(this)),this._mediaPlayer.addEventListener(c.a.MUTED_CHANGED,function(){this.trigger(o.VOLUME_CHANGE)}.bind(this)),this._mediaPlayer.addEventListener(c.a.ERROR,function(){this.trigger(o.ERROR)}.bind(this)),this._mediaPlayer.addEventListener(c.a.DURATION_CHANGED,function(){this.trigger(o.DURATION_CHANGE)}.bind(this)),this._mediaPlayer.addEventListener(c.a.SEEK_COMPLETED,function(){this.trigger(o.SEEKED)}.bind(this)),this._mediaPlayer.addEventListener(c.a.PLAYBACK_RATE_CHANGED,function(){this.trigger(o.RATE_CHANGE)}.bind(this))},techName:"AmazonIVS"})).supportsFullScreen=function(){return!0},e.isSupported=function(){return-1===(navigator.appVersion||"").toLowerCase().indexOf("rv:11")},e.canPlayType=function(e){return"string"==typeof e&&0<e.length&&(-1<e.indexOf("application/x-mpegURL")?"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'):""!==document.createElement("video").canPlayType(e))},e.canPlaySource=function(){return!0},i.registerTech("AmazonIVS",e),(e=i.registerPlugin||i.plugin)("getIVSEvents",function(){return{PlayerEventType:c.a,MetadataEventType:u.a,PlayerState:d.a,ErrorType:a.b}}),e("getIVSPlayer",function(){return this.tech(!0).getMediaPlayerAPI()}))}},function(e,t){e.exports=i(351206)},function(e,t){e.exports=i(509297)},,function(e,t,i){e.exports=i(32)},function(e,t,i){"use strict";i.r(t);var n=i(11);i.d(t,"createWorker",function(){return n.c}),i.d(t,"isWasmSupported",function(){return n.e}),i.d(t,"isPlayerSupported",function(){return n.d}),i.d(t,"create",function(){return n.b}),i.d(t,"MediaPlayer",function(){return n.a});var r=i(19);i.d(t,"ErrorSource",function(){return r.a});var o=i(13);i.d(t,"ErrorType",function(){return o.b}),i.d(t,"AuthorizationError",function(){return o.a});var s=i(9);i.d(t,"MetadataEventType",function(){return s.a});var a=i(20);for(f in a)["default","LogLevel","registerIVSTech","VideoJSEvents","VideoJSIVSTech","VideoJSError","registerIVSQualityPlugin","VideoJSQualityPlugin","isVP9Supported","createWorker","isWasmSupported","isPlayerSupported","create","MediaPlayer","ErrorSource","ErrorType","AuthorizationError","MetadataEventType"].indexOf(f)<0&&function(e){i.d(t,e,function(){return a[e]})}(f);var u=i(1);i.d(t,"PlayerEventType",function(){return u.a});var c=i(4);i.d(t,"PlayerState",function(){return c.a});var d=i(21);for(f in d)["default","LogLevel","registerIVSTech","VideoJSEvents","VideoJSIVSTech","VideoJSError","registerIVSQualityPlugin","VideoJSQualityPlugin","isVP9Supported","createWorker","isWasmSupported","isPlayerSupported","create","MediaPlayer","ErrorSource","ErrorType","AuthorizationError","MetadataEventType","PlayerEventType","PlayerState"].indexOf(f)<0&&function(e){i.d(t,e,function(){return d[e]})}(f);var h=i(17);for(f in h)["default","LogLevel","registerIVSTech","VideoJSEvents","VideoJSIVSTech","VideoJSError","registerIVSQualityPlugin","VideoJSQualityPlugin","isVP9Supported","createWorker","isWasmSupported","isPlayerSupported","create","MediaPlayer","ErrorSource","ErrorType","AuthorizationError","MetadataEventType","PlayerEventType","PlayerState"].indexOf(f)<0&&function(e){i.d(t,e,function(){return h[e]})}(f);var l=i(22);for(f in l)["default","LogLevel","registerIVSTech","VideoJSEvents","VideoJSIVSTech","VideoJSError","registerIVSQualityPlugin","VideoJSQualityPlugin","isVP9Supported","createWorker","isWasmSupported","isPlayerSupported","create","MediaPlayer","ErrorSource","ErrorType","AuthorizationError","MetadataEventType","PlayerEventType","PlayerState"].indexOf(f)<0&&function(e){i.d(t,e,function(){return l[e]})}(f);var f,p=i(23);for(f in p)["default","LogLevel","registerIVSTech","VideoJSEvents","VideoJSIVSTech","VideoJSError","registerIVSQualityPlugin","VideoJSQualityPlugin","isVP9Supported","createWorker","isWasmSupported","isPlayerSupported","create","MediaPlayer","ErrorSource","ErrorType","AuthorizationError","MetadataEventType","PlayerEventType","PlayerState"].indexOf(f)<0&&function(e){i.d(t,e,function(){return p[e]})}(f);var m=i(24);i.d(t,"LogLevel",function(){return m.a});var v=i(27);i.d(t,"registerIVSTech",function(){return v.a});var g=i(12);i.d(t,"VideoJSEvents",function(){return g.VideoJSEvents}),i.d(t,"VideoJSIVSTech",function(){return g.VideoJSIVSTech}),i.d(t,"VideoJSError",function(){return g.VideoJSError});var y=i(25);i.d(t,"registerIVSQualityPlugin",function(){return y.a});var E=i(26);i.d(t,"VideoJSQualityPlugin",function(){return E.VideoJSQualityPlugin});var S=i(10);i.d(t,"isVP9Supported",function(){return S.b});var k=i(7);i.d(t,"RemotePlayerEvent",function(){return k.a})}],o={},r.m=n,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=31))}}]);
