!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-rapid",[],t):"object"==typeof exports?exports["wafer-rapid"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-rapid"]=t())}("undefined"!=typeof self?self:this,function(){return r={"./src/base.js":function(e,t,r){"use strict";function s(){return c=r("./src/rapidInstance.js")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=function(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),e},o=window.wafer,a=o.base,i=o.constants,f=o.utils,o=o.WaferBaseClass,d=f.setTimeout,p=f.clearTimeout,y=i.ATTR_PREFIX,b=[],v=["handleRapidMouseEnter","handleRapidMouseLeave"],n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,o),n(h,[{key:"_beaconTrigger",value:function(){var e,t,r,n,o=(0,(c||s()).getRapidInstance)();o&&(e=(r=this._util).name,t=r.triggerMethod,n=r.pos,r=r.i13n,"beaconClick"===t?o.beaconClick(r.sec,r.slk,n,r):"beaconEvent"===t?(n=this._util.elem,a.emitLog({name:"WaferRapid",elem:n,meta:{i13n:r,name:e,type:"beaconEvent"}}),o.beaconEvent(e,r)):"beaconLinkViews"===t&&o.beaconLinkViews([l({},r,{_links:[r]})]))}},{key:"handleRapidMouseEnter",value:function(){var e=this;this._destroyed||(p(this._state.mouseEnterTimeout,this),this._state.mouseEnterTimeout=d(function(){e._beaconTrigger("hover")},100,this))}},{key:"handleRapidMouseLeave",value:function(){this._destroyed||p(this._state.mouseEnterTimeout,this)}}]),h);function h(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).selector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var r=u(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,{selector:t},{STATE_ATTRS:b})),n=e.getAttribute(y+"rapid-trigger");if(!n)return u(r);var o=e.getAttribute(y+"rapid-method"),a=e.getAttribute(y+"rapid-name"),i=(0,(c||s()).geti13nValues)(e),t=e.getAttribute("data-rapid_p")||"1";return r._util=l({},r._util,{elem:e,name:a,trigger:n,triggerMethod:o,i13n:i,pos:t}),r._state=r._state||{},v.forEach(function(e){r[e]=r[e].bind(r)}),"onLoad"===n?(r._beaconTrigger("load"),r.destroy()):"mouseenter"===n&&(r._state.mouseEnterTimeout=null,r.addEventListeners()),r}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.events={mouseenter:[["_self","handleRapidMouseEnter"]],mouseleave:[["_self","handleRapidMouseLeave"]]},t.default=n,e.exports=t.default},"./src/controller.js":function(e,t,n){"use strict";function i(){return c=n("./src/rapidInstance.js")}Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n?"value"in n?n.value:void 0!==(n=n.get)?n.call(r):void 0:null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r)}function a(e,t){if(!(a=t.get(e)))return!1;var r=a.instance._util.trigger;if(!e.id&&r)return!1;if(!e.id)return!1;var n=(0,(c||i()).getRapidInstance)();if(!n)return!1;var o,t=(o=(0,(c||i()).geti13nValues)(e)).id,a=!1;return n.isModuleTracked(t)?(0,(c||i()).checkIfModuleIsInTrackedMods)(t)||e.classList.contains("wafer-rapid-tracked")?n.refreshModule(t):(n.removeModule(t),a=!0):a=!0,a&&(t=o.sec?(r={},a=t,o=o.sec,a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r):[t],n.addModulesWithViewability(t)),e.classList.add("wafer-rapid-tracked"),!0}function s(e,t){var r=t.get(e);return r&&(t=r.instance._util.trigger,(e.id||!t)&&((e.id||t)&&((r=(0,(c||i()).getRapidInstance)())&&(t=(0,(c||i()).geti13nValues)(e).id,r.isModuleTracked(t)&&r.removeModule(t),e.classList.remove("wafer-rapid-tracked"),1))))}var u,c,r=function(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e},l=window.wafer.controllers.WaferBaseController,f=window.wafer.utils.convertNodeListToArray,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,l),r(d,[{key:"sync",value:function(e){var t,r;o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"sync",this).call(this,e),e&&(t=this._state.elementInstances,(r=function(e){for(var t=e,r=void 0;t;)t.classList.contains("wafer-rapid-module")&&(r=t),t=t.parentElement;return r}(e))?a(r,t):0<(e=f(e.getElementsByClassName("wafer-rapid-module"))).length&&Array.prototype.forEach.call(e,function(e){a(e,t)}))}},{key:"destroy",value:function(e){var t,r;e?(t=this._state.elementInstances,e.classList.contains("wafer-rapid-module")&&s(e,t),0<(r=f(e.getElementsByClassName("wafer-rapid-module",t))).length&&Array.prototype.forEach.call(r,function(e){s(e,t)}),o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"destroy",this).call(this,e)):o(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"destroy",this).call(this)}}]),d);function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.root,t=void 0===t?document:t,e=e.selector,e=void 0===e?".wafer-rapid-module":e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var r,r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,{root:t,selector:e,props:{selector:e},WaferClass:(u||(r=n("./src/base.js"),u=r&&r.__esModule?r:{default:r})).default}));return(0,(c||i()).getRapidInstance)((document.body.getAttribute("data-wf-rapid")||"rapidInstance").split(".")),r.sync(),r}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r,e.exports=t.default},"./src/entry.js":function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(n||(o=r("./src/controller.js"),n=o&&o.__esModule?o:{default:o})).default,e.exports=t.default},"./src/rapidInstance.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=window.wafer.utils.get,a=null,i=null;t.geti13nValues=function(e){var t={id:e.id},e=e.getAttribute("data-i13n")||e.getAttribute("data-ylk");return t=e?e.split(";").reduce(function(e,t){t=t.split(":");return 2===t.length&&(e[t[0]]=t[1]),e},t):t},t.getRapidInstance=function(e){return e&&(i=e),a=!a&&i&&(a=o(window,i))&&"function"!=typeof a.refreshModule?i=null:a},t.checkIfModuleIsInTrackedMods=(n=void 0,function(e){if(!(n=n||window.rapidPageConfig))return!1;var t=n.rapidConfig,t=(void 0===t?{}:t).tracked_mods_viewability;return!!t&&!!t[e]})}},o={},n.m=r,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://s.yimg.com/aaq/wf/",n(n.s="./src/entry.js");function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,o});
