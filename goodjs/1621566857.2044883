!function(){var e;function t(t,i,n){document.fullscreenEnabled||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?(t.style.position="fixed",t.style.width="100%",t.style.top="0",t.style.left="0",t.style.background="#fff",t.style.setProperty("height","100%","important"),i.style.setProperty("height","100%","important"),n.style.position="fixed",n.style.bottom="20px",n.style.left="48%",window.riddleAPI.isFullScreen=!0):(t.style.position="static",t.style.top="0",t.style.left="0",t.style.width=e,t.style.setProperty("height","auto"),n.style.position="static",window.riddleAPI.isFullScreen=!1)}function i(){for(var e=document.body.getElementsByClassName("riddle_target");e.length;)n(e[0])}function n(e){e.className="riddle-target-initialised";var t="data-riddle-"+riddleAPI.riddles.length;e.setAttribute(t,"");var i=e.getElementsByTagName("iframe");if(0==i.length){var n=e.getAttribute("data-url")||e.getAttribute("data-game");if(!n)return;e.innerHTML+='<iframe src="'+n+'"></iframe>'}var d=i[0].style;if(d.border="none",d.width="100%",d.position="absolute",(d.opacity=0)==e.getElementsByClassName("rid-load").length){var l=e.getAttribute("data-fg")||"#1486cd",r=e.getAttribute("data-bg")||"#fff";e.insertAdjacentHTML("beforeend","<style>["+t+"] .rid-load {background: "+r+";}["+t+"] .rid-load i {background: "+l+';}.rid-load {border: 1px solid #cfcfcf!important;padding-top: 56%;border-radius: 5px;position: relative;}.rid-load p {position: absolute;top: 50%;left: 50%;margin: -8px}.rid-load i {position: absolute;width: 16px;height: 16px;border-radius: 3px;left: -25px;-webkit-animation: 1s infinite rid-icon;animation: 1s infinite rid-icon;-webkit-transform: scale(.4) rotate(62deg);transform: scale(.4) rotate(62deg);opacity: 0;}.rid-load i+i {-webkit-animation-delay: .17s;animation-delay: .17s;left: 0;}.rid-load i+i+i {-webkit-animation-delay: .34s;animation-delay: .34s;left: 25px;}@-webkit-keyframes rid-icon {50% {   opacity: 1;-webkit-transform: scale(1) rotate(62deg);}}@keyframes rid-icon {50% {opacity: 1;transform: scale(1) rotate(62deg);}}</style><div class="rid-load"><p><i></i><i></i><i></i></p></div>')}riddleAPI.riddles.push(e),a()}window.riddleAPI?"loading"!=document.readyState&&i():(window.riddleAPI={init:n,update:i,riddles:[],toggleFullScreen:function(i){var n=document.querySelectorAll('[data-rid-id="'+i+'"]'),d=n[0].getElementsByTagName("iframe")[0],a=document.getElementById("riddleFullScreenButton-"+i),l=document.body;null==e&&(e=n[0].style.width),0==window.riddleAPI.isFullScreen?function(e,i,n,d){var a="";e.requestFullscreen?(e.requestFullscreen(),a="fullscreenchange"):e.msRequestFullscreen?(e.msRequestFullscreen(),a="MSFullscreenChange"):e.mozRequestFullScreen?(e.mozRequestFullScreen(),a="mozfullscreenchange"):e.webkitRequestFullScreen&&(e.webkitRequestFullScreen(),a="webkitfullscreenchange"),document.addEventListener(a,(function(){t(i,n,d)}))}(l,n[0],d,a):function(e,i,n){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),t(e,i,n)}(n[0],d,a)},isFullScreen:!1},window.addEventListener("message",(function(e){if("object"==typeof e.data)for(var t=0;t<riddleAPI.riddles.length;t++){var i=riddleAPI.riddles[t],n=i.getElementsByTagName("iframe")[0];if(e.source==n.contentWindow){if(e.data.riddleHeight){var d=n.style;if(window.riddleAPI.isFullScreen||d.setProperty("height",e.data.riddleHeight+"px","important"),0==d.opacity){d.opacity=1,d.position="static";for(var l=riddleAPI.riddles[t].getElementsByClassName("rid-load");0<l.length;)l[0].parentNode.removeChild(l[0])}null!=window.parent&&window.parent.postMessage({riddleHeight:e.data.riddleHeight+55,riddleId:e.data.riddleId},"*"),-1!=window.location.href.indexOf("?")&&i.getElementsByTagName("iframe")[0].contentWindow.postMessage({riddleQueryString:window.location.href.split("?")[1]},"*"),i.getElementsByTagName("iframe")[0].contentWindow.postMessage({riddleParentLocation:window.location.href},"*"),a()}if(e.data.riddleEvent&&window.onRiddleEvent&&window.onRiddleEvent(e.data.riddleEvent,n),"page-change"!=e.data.riddleEvent||"false"==i.getAttribute("data-auto-scroll")||e.data.isUnrolledQuiz)"page-change"==e.data.riddleEvent&&"false"==i.getAttribute("data-auto-scroll")&&(r(),a());else{var o=0;isNaN(i.getAttribute("data-auto-scroll-offset"))||(o=i.getAttribute("data-auto-scroll-offset")),n.scrollIntoView(!0),window.scrollBy(0,-10-o),a()}if(e.data.riddleEvent&&"answer-poll"==e.data.riddleEvent.action&&"false"==i.getAttribute("data-auto-scroll")&&r(),null!=e.data.redirectToCustomLandingpagePath&&null!=e.data.redirectToCustomLandingpageData){var s=e.data.redirectToCustomLandingpagePath,c=e.data.redirectToCustomLandingpageData,u=window.parent.document.createElement("form");u.setAttribute("method","post"),u.setAttribute("action",s);var m=window.parent.document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name","data"),m.setAttribute("value",c),u.appendChild(m),window.parent.document.body.appendChild(u),u.submit()}}}}),!1),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",i):i());var d=0;function a(){for(var e=0;e<riddleAPI.riddles.length;e++){var t=riddleAPI.riddles[e].getElementsByTagName("iframe")[0],i=t.getBoundingClientRect().top+window.scrollY||window.pageYOffset,n=window.scrollY||window.pageYOffset,d=n+window.innerHeight;t.contentWindow.postMessage({iframeOffetTop:i,viewtop:n,viewbottom:d},"*"),l(i,n,d,t)}}function l(e,t,i,n){if(null!=e&&null!=t&&null!=i&&n.src!=n.parentElement.getAttribute("data-embed-url")&&-1==n.src.indexOf("riddle.com")){var d=e+n.parentElement.getBoundingClientRect().height;(t<=e&&e<=i||t<=d&&d<=i)&&(n.src=n.parentElement.getAttribute("data-embed-url"))}}function r(){var e=document.documentElement;d=(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}document.addEventListener("scroll",(function(e){0!=d&&(window.scrollTo(0,d),d=0),a()}))}();