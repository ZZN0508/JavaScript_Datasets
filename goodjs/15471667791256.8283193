!function(m,u){var t,e;"function"==typeof u&&((t=function(t){this.$root=t,this.$week=this.$day=this.$month=void 0,this.monthSelector=this.$root.attr("data-month")||this.defaults.selectors.month,this.daySelector=this.$root.attr("data-day")||this.defaults.selectors.day,this.weekSelector=this.$root.attr("data-week")||this.defaults.selectors.week,this.sessionStorageKey=this.$root.attr("data-session-storage-key")||this.defaults.sessionStorageKey,this.searchParameter=this.$root.attr("data-search-parameter")||this.defaults.searchParameter,this.apiURL=this.$root.attr("data-api-url")||this.defaults.apiURL}).prototype={defaults:{selectors:{month:".asuraku-timer__month, [data-id=month]",day:".asuraku-timer__day, [data-id=day]",week:".asuraku-timer__week, [data-id=week]"},sessionStorageKey:"RJSCountDownTimer",searchParameter:"asurakutimertest",apiURL:"https://gettime.r10s.jp/"},getElements:function(){this.$month=this.$root.find(this.monthSelector),this.$day=this.$root.find(this.daySelector),this.$week=this.$root.find(this.weekSelector),this.showTimer()},showTimer:function(){var o=this;this.getCurrentDate(this.apiURL,this.sessionStorageKey,this.searchParameter,!0,function(t){var e=t.getFullYear(),s=t.getMonth(),a=t.getDate(),i=t.getDay(),i=t.getHours()<12?(t=a+1,(i+1)%7):(t=a+2,(i+2)%7),e=(s=new Date(e,s,t)).getMonth()+1;s=s.getDate(),o.$month.html(e),o.$day.html(s),o.$week.html("日月火水木金土".split("")[i])})},getCurrentDate:function(t,a,e,i,s){function o(s){u.ajax({url:t,dataType:"jsonp",scriptCharset:"utf-8",cache:!0,error:function(){s.call(void 0,new Date)},success:function(t){var e=new Date;e.setTime(1e3*t.epoch),l&&r&&i&&(t=e.getTime()-(new Date).getTime(),sessionStorage.setItem(a,m.JSON.stringify({offset:t}))),s.call(void 0,e)}})}var r,n,h,c,d,l="JSON"in m&&"parse"in m.JSON&&"stringify"in m.JSON;try{sessionStorage.setItem("session_storage_checker_data","session_storage_checker_data"),sessionStorage.removeItem("session_storage_checker_data"),r=!0}catch(t){r=!1}new RegExp("(\\?|\\&)"+e,"i").test(m.location.search)?(c=s,d=m.location.search.split(e+"=")[1].split(/-|:|\s/),c.call(void 0,new Date(Date.UTC(+d[0],+d[1]-1,+d[2],+d[3],+d[4],+d[5])-324e5))):l&&r&&sessionStorage.getItem(a)?(n=s,h=sessionStorage.getItem(a),h=m.JSON.parse(h),h=(new Date).getTime()+h.offset,n.call(void 0,new Date(h))):o(s)}},0<(e=u("#js-asuraku-timer, #asurakuDynamicArea")).length&&(t=new t(e)).getElements())}(window,window.jQuery);
