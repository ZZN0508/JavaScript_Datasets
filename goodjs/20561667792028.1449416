!function(){var t=this,e=t._,i=Array.prototype,o=Object.prototype,n=Function.prototype,r=i.push,u=i.slice,l=o.toString,s=o.hasOwnProperty,a=Array.isArray,c=Object.keys,h=n.bind,f=Object.create,d=function(){},p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=p:exports)._=p:t._=p,p.VERSION="1.8.3";var g=function(r,s,t){if(void 0===s)return r;switch(null==t?3:t){case 1:return function(t){return r.call(s,t)};case 2:return function(t,e){return r.call(s,t,e)};case 3:return function(t,e,n){return r.call(s,t,e,n)};case 4:return function(t,e,n,i){return r.call(s,t,e,n,i)}}return function(){return r.apply(s,arguments)}},v=function(t,e,n){return null==t?p.identity:p.isFunction(t)?g(t,e,n):p.isObject(t)?p.matcher(t):p.property(t)};p.iteratee=function(t,e){return v(t,e,1/0)};var m=function(u,c){return function(t){var e=arguments.length;if(e<2||null==t)return t;for(var n=1;n<e;n++)for(var i=arguments[n],r=u(i),s=r.length,o=0;o<s;o++){var a=r[o];c&&void 0!==t[a]||(t[a]=i[a])}return t}},y=function(t){if(!p.isObject(t))return{};if(f)return f(t);d.prototype=t;t=new d;return d.prototype=null,t},_=function(e){return function(t){return null==t?void 0:t[e]}},b=Math.pow(2,53)-1,x=_("length"),w=function(t){t=x(t);return"number"==typeof t&&0<=t&&t<=b};function E(a){return function(t,e,n,i){e=g(e,i,4);var r=!w(t)&&p.keys(t),s=(r||t).length,o=0<a?0:s-1;return arguments.length<3&&(n=t[r?r[o]:o],o+=a),function(t,e,n,i,r,s){for(;0<=r&&r<s;r+=a){var o=i?i[r]:r;n=e(n,t[o],o,t)}return n}(t,e,n,r,o,s)}}p.each=p.forEach=function(t,e,n){if(e=g(e,n),w(t))for(r=0,s=t.length;r<s;r++)e(t[r],r,t);else for(var i=p.keys(t),r=0,s=i.length;r<s;r++)e(t[i[r]],i[r],t);return t},p.map=p.collect=function(t,e,n){e=v(e,n);for(var i=!w(t)&&p.keys(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var a=i?i[o]:o;s[o]=e(t[a],a,t)}return s},p.reduce=p.foldl=p.inject=E(1),p.reduceRight=p.foldr=E(-1),p.find=p.detect=function(t,e,n){n=w(t)?p.findIndex(t,e,n):p.findKey(t,e,n);if(void 0!==n&&-1!==n)return t[n]},p.filter=p.select=function(t,i,e){var r=[];return i=v(i,e),p.each(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r},p.reject=function(t,e,n){return p.filter(t,p.negate(v(e)),n)},p.every=p.all=function(t,e,n){e=v(e,n);for(var i=!w(t)&&p.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0},p.some=p.any=function(t,e,n){e=v(e,n);for(var i=!w(t)&&p.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1},p.contains=p.includes=p.include=function(t,e,n,i){return w(t)||(t=p.values(t)),0<=p.indexOf(t,e,n="number"!=typeof n||i?0:n)},p.invoke=function(t,n){var i=u.call(arguments,2),r=p.isFunction(n);return p.map(t,function(t){var e=r?n:t[n];return null==e?e:e.apply(t,i)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matcher(e))},p.findWhere=function(t,e){return p.find(t,p.matcher(e))},p.max=function(t,i,e){var n,r,s=-1/0,o=-1/0;if(null==i&&null!=t)for(var a=0,u=(t=w(t)?t:p.values(t)).length;a<u;a++)n=t[a],s<n&&(s=n);else i=v(i,e),p.each(t,function(t,e,n){r=i(t,e,n),(o<r||r===-1/0&&s===-1/0)&&(s=t,o=r)});return s},p.min=function(t,i,e){var n,r,s=1/0,o=1/0;if(null==i&&null!=t)for(var a=0,u=(t=w(t)?t:p.values(t)).length;a<u;a++)(n=t[a])<s&&(s=n);else i=v(i,e),p.each(t,function(t,e,n){((r=i(t,e,n))<o||r===1/0&&s===1/0)&&(s=t,o=r)});return s},p.shuffle=function(t){for(var e,n=w(t)?t:p.values(t),i=n.length,r=Array(i),s=0;s<i;s++)(e=p.random(0,s))!==s&&(r[s]=r[e]),r[e]=n[s];return r},p.sample=function(t,e,n){return null==e||n?(t=!w(t)?p.values(t):t)[p.random(t.length-1)]:p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,i,e){return i=v(i,e),p.pluck(p.map(t,function(t,e,n){return{value:t,index:e,criteria:i(t,e,n)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};n=function(s){return function(n,i,t){var r={};return i=v(i,t),p.each(n,function(t,e){e=i(t,e,n);s(r,t,e)}),r}};p.groupBy=n(function(t,e,n){p.has(t,n)?t[n].push(e):t[n]=[e]}),p.indexBy=n(function(t,e,n){t[n]=e}),p.countBy=n(function(t,e,n){p.has(t,n)?t[n]++:t[n]=1}),p.toArray=function(t){return t?p.isArray(t)?u.call(t):w(t)?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:(w(t)?t:p.keys(t)).length},p.partition=function(t,i,e){i=v(i,e);var r=[],s=[];return p.each(t,function(t,e,n){(i(t,e,n)?r:s).push(t)}),[r,s]},p.first=p.head=p.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:p.initial(t,t.length-e)},p.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},p.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:p.rest(t,Math.max(0,t.length-e))},p.rest=p.tail=p.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var T=function(t,e,n,i){for(var r=[],s=0,o=i||0,a=x(t);o<a;o++){var u=t[o];if(w(u)&&(p.isArray(u)||p.isArguments(u))){var c=0,l=(u=!e?T(u,e,n):u).length;for(r.length+=l;c<l;)r[s++]=u[c++]}else n||(r[s++]=u)}return r};function S(s){return function(t,e,n){e=v(e,n);for(var i=x(t),r=0<s?0:i-1;0<=r&&r<i;r+=s)if(e(t[r],r,t))return r;return-1}}function k(s,o,a){return function(t,e,n){var i=0,r=x(t);if("number"==typeof n)0<s?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(a&&n&&r)return t[n=a(t,e)]===e?n:-1;if(e!=e)return 0<=(n=o(u.call(t,i,r),p.isNaN))?n+i:-1;for(n=0<s?i:r-1;0<=n&&n<r;n+=s)if(t[n]===e)return n;return-1}}p.flatten=function(t,e){return T(t,e,!1)},p.without=function(t){return p.difference(t,u.call(arguments,1))},p.uniq=p.unique=function(t,e,n,i){p.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=v(n,i));for(var r=[],s=[],o=0,a=x(t);o<a;o++){var u=t[o],c=n?n(u,o,t):u;e?(o&&s===c||r.push(u),s=c):n?p.contains(s,c)||(s.push(c),r.push(u)):p.contains(r,u)||r.push(u)}return r},p.union=function(){return p.uniq(T(arguments,!0,!0))},p.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=x(t);i<r;i++){var s=t[i];if(!p.contains(e,s)){for(var o=1;o<n&&p.contains(arguments[o],s);o++);o===n&&e.push(s)}}return e},p.difference=function(t){var e=T(arguments,!0,!0,1);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(){return p.unzip(arguments)},p.unzip=function(t){for(var e=t&&p.max(t,x).length||0,n=Array(e),i=0;i<e;i++)n[i]=p.pluck(t,i);return n},p.object=function(t,e){for(var n={},i=0,r=x(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},p.findIndex=S(1),p.findLastIndex=S(-1),p.sortedIndex=function(t,e,n,i){for(var r=(n=v(n,i,1))(e),s=0,o=x(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<r?s=a+1:o=a}return s},p.indexOf=k(1,p.findIndex,p.sortedIndex),p.lastIndexOf=k(-1,p.findLastIndex),p.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r};function j(t,e,n,i,r){return i instanceof e?(n=y(t.prototype),r=t.apply(n,r),p.isObject(r)?r:n):t.apply(n,r)}p.bind=function(t,e){if(h&&t.bind===h)return h.apply(t,u.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");function n(){return j(t,n,e,this,i.concat(u.call(arguments)))}var i=u.call(arguments,2);return n},p.partial=function(r){function s(){for(var t=0,e=o.length,n=Array(e),i=0;i<e;i++)n[i]=o[i]===p?arguments[t++]:o[i];for(;t<arguments.length;)n.push(arguments[t++]);return j(r,s,this,this,n)}var o=u.call(arguments,1);return s},p.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)t[n=arguments[e]]=p.bind(t[n],t);return t},p.memoize=function(i,r){function s(t){var e=s.cache,n=""+(r?r.apply(this,arguments):t);return p.has(e,n)||(e[n]=i.apply(this,arguments)),e[n]}return s.cache={},s},p.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},p.defer=p.partial(p.delay,p,1),p.throttle=function(n,i,r){var s,o,a,u=null,c=0;r=r||{};function l(){c=!1===r.leading?0:p.now(),u=null,a=n.apply(s,o),u||(s=o=null)}return function(){var t=p.now();c||!1!==r.leading||(c=t);var e=i-(t-c);return s=this,o=arguments,e<=0||i<e?(u&&(clearTimeout(u),u=null),c=t,a=n.apply(s,o),u||(s=o=null)):u||!1===r.trailing||(u=setTimeout(l,e)),a}},p.debounce=function(e,n,i){function r(){var t=p.now()-u;t<n&&0<=t?s=setTimeout(r,n-t):(s=null,i||(c=e.apply(a,o),s||(a=o=null)))}var s,o,a,u,c;return function(){a=this,o=arguments,u=p.now();var t=i&&!s;return s=s||setTimeout(r,n),t&&(c=e.apply(a,o),a=o=null),c}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var n=arguments,i=n.length-1;return function(){for(var t=i,e=n[i].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},p.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},p.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},p.once=p.partial(p.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function A(t,e){var n=P.length,i=t.constructor,r=p.isFunction(i)&&i.prototype||o,s="constructor";for(p.has(t,s)&&!p.contains(e,s)&&e.push(s);n--;)(s=P[n])in t&&t[s]!==r[s]&&!p.contains(e,s)&&e.push(s)}p.keys=function(t){if(!p.isObject(t))return[];if(c)return c(t);var e,n=[];for(e in t)p.has(t,e)&&n.push(e);return O&&A(t,n),n},p.allKeys=function(t){if(!p.isObject(t))return[];var e,n=[];for(e in t)n.push(e);return O&&A(t,n),n},p.values=function(t){for(var e=p.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},p.mapObject=function(t,e,n){e=v(e,n);for(var i,r=p.keys(t),s=r.length,o={},a=0;a<s;a++)o[i=r[a]]=e(t[i],i,t);return o},p.pairs=function(t){for(var e=p.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},p.invert=function(t){for(var e={},n=p.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},p.functions=p.methods=function(t){var e,n=[];for(e in t)p.isFunction(t[e])&&n.push(e);return n.sort()},p.extend=m(p.allKeys),p.extendOwn=p.assign=m(p.keys),p.findKey=function(t,e,n){e=v(e,n);for(var i,r=p.keys(t),s=0,o=r.length;s<o;s++)if(e(t[i=r[s]],i,t))return i},p.pick=function(t,e,n){var i,r,s={},o=t;if(null==o)return s;p.isFunction(e)?(r=p.allKeys(o),i=g(e,n)):(r=T(arguments,!1,!1,1),i=function(t,e,n){return e in n},o=Object(o));for(var a=0,u=r.length;a<u;a++){var c=r[a],l=o[c];i(l,c,o)&&(s[c]=l)}return s},p.omit=function(t,e,n){var i;return e=p.isFunction(e)?p.negate(e):(i=p.map(T(arguments,!1,!1,1),String),function(t,e){return!p.contains(i,e)}),p.pick(t,e,n)},p.defaults=m(p.allKeys,!0),p.create=function(t,e){t=y(t);return e&&p.extendOwn(t,e),t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t},p.isMatch=function(t,e){var n=p.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0};var I=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var r=l.call(t);if(r!==l.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,r=e.constructor;if(o!==r&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(r)&&r instanceof r)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var a=(n=n||[]).length;a--;)if(n[a]===t)return i[a]===e;if(n.push(t),i.push(e),s){if((a=t.length)!==e.length)return!1;for(;a--;)if(!I(t[a],e[a],n,i))return!1}else{var u,c=p.keys(t),a=c.length;if(p.keys(e).length!==a)return!1;for(;a--;)if(u=c[a],!p.has(e,u)||!I(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};p.isEqual=function(t,e){return I(t,e)},p.isEmpty=function(t){return null==t||(w(t)&&(p.isArray(t)||p.isString(t)||p.isArguments(t))?0===t.length:0===p.keys(t).length)},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=a||function(t){return"[object Array]"===l.call(t)},p.isObject=function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){p["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&s.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=_,p.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},p.matcher=p.matches=function(e){return e=p.extendOwn({},e),function(t){return p.isMatch(t,e)}},p.times=function(t,e,n){var i=Array(Math.max(0,t));e=g(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=p.invert(m),_=function(e){function n(t){return e[t]}var t="(?:"+p.keys(e).join("|")+")",i=RegExp(t),r=RegExp(t,"g");return function(t){return i.test(t=null==t?"":""+t)?t.replace(r,n):t}};p.escape=_(m),p.unescape=_(a),p.result=function(t,e,n){e=null==t?void 0:t[e];return p.isFunction(e=void 0===e?n:e)?e.call(t):e};var N=0;p.uniqueId=function(t){var e=++N+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function M(t){return"\\"+H[t]}var C=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g;p.template=function(s,t,e){t=p.defaults({},t=!t&&e?e:t,p.templateSettings);var e=RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),o=0,a="__p+='";s.replace(e,function(t,e,n,i,r){return a+=s.slice(o,r).replace($,M),o=r+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(a=!t.variable?"with(obj||{}){\n"+a+"}\n":a)+"return __p;\n";try{var n=new Function(t.variable||"obj","_",a)}catch(t){throw t.source=a,t}e=function(t){return n.call(this,t,p)},t=t.variable||"obj";return e.source="function("+t+"){\n"+a+"}",e},p.chain=function(t){t=p(t);return t._chain=!0,t};function R(t,e){return t._chain?p(e).chain():e}p.mixin=function(n){p.each(p.functions(n),function(t){var e=p[t]=n[t];p.prototype[t]=function(){var t=[this._wrapped];return r.apply(t,arguments),R(this,e.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=i[e];p.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],R(this,t)}}),p.each(["concat","join","slice"],function(t){var e=i[t];p.prototype[t]=function(){return R(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},p.prototype.valueOf=p.prototype.toJSON=p.prototype.value,p.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(i){var r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,n){r.Backbone=i(r,n,t,e)});else if("undefined"!=typeof exports){var t,e=require("underscore");try{t=require("jquery")}catch(t){}i(r,exports,e,t)}else r.Backbone=i(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)}(function(t,a,b,e){var n=t.Backbone,s=Array.prototype.slice;a.VERSION="1.3.3",a.$=e,a.noConflict=function(){return t.Backbone=n,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=function(n,t,i){b.each(t,function(t,e){b[e]&&(n.prototype[e]=function(t,i,r){switch(t){case 1:return function(){return b[i](this[r])};case 2:return function(t){return b[i](this[r],t)};case 3:return function(t,e){return b[i](this[r],o(t,this),e)};case 4:return function(t,e,n){return b[i](this[r],o(t,this),e,n)};default:return function(){var t=s.call(arguments);return t.unshift(this[r]),b[i].apply(b,t)}}}(t,e,i))})},o=function(e,t){return b.isFunction(e)?e:b.isObject(e)&&!t._isModel(e)?(n=b.matches(e),function(t){return n(t.attributes)}):b.isString(e)?function(t){return t.get(e)}:e;var n},r=a.Events={},u=/\s+/,c=function(t,e,n,i,r){var s,o=0;if(n&&"object"==typeof n){void 0!==i&&"context"in r&&void 0===r.context&&(r.context=i);for(s=b.keys(n);o<s.length;o++)e=c(t,e,s[o],n[s[o]],r)}else if(n&&u.test(n))for(s=n.split(u);o<s.length;o++)e=t(e,s[o],i,r);else e=t(e,n,i,r);return e};r.on=function(t,e,n){return l(this,t,e,n)};var l=function(t,e,n,i,r){return t._events=c(h,t._events||{},e,n,{context:i,ctx:t,listening:r}),r&&((t._listeners||(t._listeners={}))[r.id]=r),t};r.listenTo=function(t,e,n){if(!t)return this;var i,r=t._listenId||(t._listenId=b.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[r];return o||(i=this._listenId||(this._listenId=b.uniqueId("l")),o=s[r]={obj:t,objId:r,id:i,listeningTo:s,count:0}),l(t,e,n,this,o),this};var h=function(t,e,n,i){var r,s;return n&&(r=t[e]||(t[e]=[]),s=i.context,e=i.ctx,(i=i.listening)&&i.count++,r.push({callback:n,context:s,ctx:s||e,listening:i})),t};r.off=function(t,e,n){return this._events&&(this._events=c(f,this._events,t,e,{context:n,listeners:this._listeners})),this},r.stopListening=function(t,e,n){var i=this._listeningTo;if(!i)return this;for(var r=t?[t._listenId]:b.keys(i),s=0;s<r.length;s++){var o=i[r[s]];if(!o)break;o.obj.off(e,n,this)}return this};var f=function(t,e,n,i){if(t){var r,s=0,o=i.context,a=i.listeners;if(e||n||o){for(var u=e?[e]:b.keys(t);s<u.length;s++){var c=t[e=u[s]];if(!c)break;for(var l=[],h=0;h<c.length;h++){var f=c[h];n&&n!==f.callback&&n!==f.callback._callback||o&&o!==f.context?l.push(f):(r=f.listening)&&0==--r.count&&(delete a[r.id],delete r.listeningTo[r.objId])}l.length?t[e]=l:delete t[e]}return t}for(var d=b.keys(a);s<d.length;s++)delete a[(r=a[d[s]]).id],delete r.listeningTo[r.objId]}};r.once=function(t,e,n){var i=c(d,{},t,e,b.bind(this.off,this));return this.on(i,e="string"==typeof t&&null==n?void 0:e,n)},r.listenToOnce=function(t,e,n){n=c(d,{},e,n,b.bind(this.stopListening,this,t));return this.listenTo(t,n)};var d=function(t,e,n,i){var r;return n&&((r=t[e]=b.once(function(){i(e,r),n.apply(this,arguments)}))._callback=n),t};r.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return c(p,this._events,t,void 0,n),this};var p=function(t,e,n,i){var r,s;return t&&(r=t[e],s=t.all,r&&s&&(s=s.slice()),r&&g(r,i),s&&g(s,[e].concat(i))),t},g=function(t,e){var n,i=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};r.bind=r.on,r.unbind=r.off,b.extend(a,r);var v=a.Model=function(t,e){var n=t||{};e=e||{},this.cid=b.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var i=b.result(this,"defaults"),n=b.defaults(b.extend({},i,n),i);this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};b.extend(v.prototype,r,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return b.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return b.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!b.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var i;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,!this._validate(i,n=n||{}))return!1;var r=n.unset,s=n.silent,o=[],t=this._changing;this._changing=!0,t||(this._previousAttributes=b.clone(this.attributes),this.changed={});var a,u=this.attributes,c=this.changed,l=this._previousAttributes;for(a in i)e=i[a],b.isEqual(u[a],e)||o.push(a),b.isEqual(l[a],e)?delete c[a]:c[a]=e,r?delete u[a]:u[a]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){o.length&&(this._pending=n);for(var h=0;h<o.length;h++)this.trigger("change:"+o[h],this,u[o[h]],n)}if(t)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,b.extend({},e,{unset:!0}))},clear:function(t){var e,n={};for(e in this.attributes)n[e]=void 0;return this.set(n,b.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!b.isEmpty(this.changed):b.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&b.clone(this.changed);var e,n=this._changing?this._previousAttributes:this.attributes,i={};for(e in t){var r=t[e];b.isEqual(n[e],r)||(i[e]=r)}return!!b.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(n){n=b.extend({parse:!0},n);var i=this,r=n.success;return n.success=function(t){var e=n.parse?i.parse(t,n):t;if(!i.set(e,n))return!1;r&&r.call(n.context,i,t,n),i.trigger("sync",i,t,n)},C(this,n),this.sync("read",this,n)},save:function(t,e,n){var i;null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e;var r=(n=b.extend({validate:!0,parse:!0},n)).wait;if(i&&!r){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var s=this,o=n.success,a=this.attributes;n.success=function(t){s.attributes=a;var e=n.parse?s.parse(t,n):t;if((e=r?b.extend({},i,e):e)&&!s.set(e,n))return!1;o&&o.call(n.context,s,t,n),s.trigger("sync",s,t,n)},C(this,n),i&&r&&(this.attributes=b.extend({},a,i));e=this.isNew()?"create":n.patch?"patch":"update";"patch"!=e||n.attrs||(n.attrs=i);e=this.sync(e,this,n);return this.attributes=a,e},destroy:function(e){e=e?b.clone(e):{};function n(){i.stopListening(),i.trigger("destroy",i,i.collection,e)}var i=this,r=e.success,s=e.wait,t=!(e.success=function(t){s&&n(),r&&r.call(e.context,i,t,e),i.isNew()||i.trigger("sync",i,t,e)});return this.isNew()?b.defer(e.success):(C(this,e),t=this.sync("delete",this,e)),s||n(),t},url:function(){var t=b.result(this,"urlRoot")||b.result(this.collection,"url")||M();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},b.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=b.extend({},this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger("invalid",this,t,b.extend(e,{validationError:t})),!1)}});i(v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");function x(t,e,n){n=Math.min(Math.max(n,0),t.length);for(var i=Array(t.length-n),r=e.length,s=0;s<i.length;s++)i[s]=t[s+n];for(s=0;s<r;s++)t[s+n]=e[s];for(s=0;s<i.length;s++)t[s+r+n]=i[s]}var m=a.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,b.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};b.extend(m.prototype,r,{model:v,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,b.extend({merge:!1},e,y))},remove:function(t,e){e=b.extend({},e);var n=!b.isArray(t);t=n?[t]:t.slice();t=this._removeModels(t,e);return!e.silent&&t.length&&(e.changes={added:[],merged:[],removed:t},this.trigger("update",this,e)),n?t[0]:t},set:function(t,e){if(null!=t){(e=b.extend({},w,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!b.isArray(t);t=n?[t]:t.slice();var i=e.at;(i=(i=null!=i?+i:i)>this.length?this.length:i)<0&&(i+=this.length+1);for(var r=[],s=[],o=[],a=[],u={},c=e.add,l=e.merge,h=e.remove,f=!1,d=this.comparator&&null==i&&!1!==e.sort,p=b.isString(this.comparator)?this.comparator:null,g=0;g<t.length;g++){var v,m=t[g],y=this.get(m);y?(l&&m!==y&&(v=this._isModel(m)?m.attributes:m,e.parse&&(v=y.parse(v,e)),y.set(v,e),o.push(y),d&&!f&&(f=y.hasChanged(p))),u[y.cid]||(u[y.cid]=!0,r.push(y)),t[g]=y):c&&(m=t[g]=this._prepareModel(m,e))&&(s.push(m),this._addReference(m,e),u[m.cid]=!0,r.push(m))}if(h){for(g=0;g<this.length;g++)u[(m=this.models[g]).cid]||a.push(m);a.length&&this._removeModels(a,e)}var _=!1;if(r.length&&(!d&&c&&h)?(_=this.length!==r.length||b.some(this.models,function(t,e){return t!==r[e]}),this.models.length=0,x(this.models,r,0),this.length=this.models.length):s.length&&(d&&(f=!0),x(this.models,s,null==i?this.length:i),this.length=this.models.length),f&&this.sort({silent:!0}),!e.silent){for(g=0;g<s.length;g++)null!=i&&(e.index=i+g),(m=s[g]).trigger("add",m,this,e);(f||_)&&this.trigger("sort",this,e),(s.length||a.length||o.length)&&(e.changes={added:s,removed:a,merged:o},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?b.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,b.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,b.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,b.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t=t||{};var n=e.length;return b.isFunction(e)&&(e=b.bind(e,this)),1===n||b.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(n){var i=(n=b.extend({parse:!0},n)).success,r=this;return n.success=function(t){var e=n.reset?"reset":"set";r[e](t,n),i&&i.call(n.context,r,t,n),r.trigger("sync",r,t,n)},C(this,n),this.sync("read",this,n)},create:function(t,e){var i=(e=e?b.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,s=e.success;return e.success=function(t,e,n){i&&r.add(t,n),s&&s.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;t=new((e=e?b.clone(e):{}).collection=this).model(t,e);return t.validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r,s,o=this.get(t[i]);o&&(r=this.indexOf(o),this.models.splice(r,1),this.length--,delete this._byId[o.cid],null!=(s=this.modelId(o.attributes))&&delete this._byId[s],e.silent||(e.index=r,o.trigger("remove",o,this,e)),n.push(o),this._removeReference(o,e))}return n},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;var r,s;"destroy"===t&&this.remove(e,i),"change"!==t||(r=this.modelId(e.previousAttributes()))!==(s=this.modelId(e.attributes))&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e))}this.trigger.apply(this,arguments)}});i(m,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var e=a.View=function(t){this.cid=b.uniqueId("view"),b.extend(this,b.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments)},_=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];b.extend(e.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!(t=t||b.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];(n=!b.isFunction(n)?this[n]:n)&&(e=e.match(_),this.delegate(e[1],e[2],b.bind(n,this)))}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){var t;this.el?this.setElement(b.result(this,"el")):(t=b.extend({},b.result(this,"attributes")),this.id&&(t.id=b.result(this,"id")),this.className&&(t.class=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(t))},_setAttributes:function(t){this.$el.attr(t)}}),a.sync=function(t,e,i){var n=T[t];b.defaults(i=i||{},{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var r,s={type:n,dataType:"json"};i.url||(s.url=b.result(e,"url")||M()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),!i.emulateHTTP||"PUT"!==n&&"DELETE"!==n&&"PATCH"!==n||(s.type="POST",i.emulateJSON&&(s.data._method=n),r=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),r)return r.apply(this,arguments)}),"GET"===s.type||i.emulateJSON||(s.processData=!1);var o=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,o&&o.call(i.context,t,e,n)};s=i.xhr=a.ajax(b.extend(s,i));return e.trigger("request",e,s,i),s};var T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var i=a.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,j=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(i.prototype,r,{initialize:function(){},route:function(e,n,i){b.isRegExp(e)||(e=this._routeToRegExp(e)),b.isFunction(n)&&(i=n,n=""),i=i||this[n];var r=this;return a.history.route(e,function(t){t=r._extractParameters(e,t);!1!==r.execute(i,t,n)&&(r.trigger.apply(r,["route:"+n].concat(t)),r.trigger("route",n,t),a.history.trigger("route",r,n,t))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var t,e=b.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(O,"\\$&").replace(S,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(j,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return b.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var P=a.History=function(){this.handlers=[],this.checkUrl=b.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,N=/#.*$/;P.started=!1,b.extend(P.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){t=(t||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return(t=null==t?this._usePushState||!this._wantsHashChange?this.getPath():this.getHash():t).replace(A,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=b.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}this._hasHashChange||!this._wantsHashChange||this._usePushState||(this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1,(e=(e=document.body).insertBefore(this.iframe,e.firstChild).contentWindow).document.open(),e.document.close(),e.location.hash="#"+this.fragment);var e=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?e("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if((e=e===this.fragment&&this.iframe?this.getHash(this.iframe.contentWindow):e)===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),b.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(t,e){if(!P.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root,n=(n=""===t||"?"===t.charAt(0)?n.slice(0,-1)||"/":n)+t;if(t=this.decodeFragment(t.replace(N,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)&&(n=this.iframe.contentWindow,e.replace||(n.document.open(),n.document.close()),this._updateHash(n.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){n?(n=t.href.replace(/(javascript:|#).*$/,""),t.replace(n+"#"+e)):t.hash="#"+e}}),a.history=new P;v.extend=m.extend=i.extend=e.extend=P.extend=function(t,e){var n=this,i=t&&b.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)};return b.extend(i,n,e),i.prototype=b.create(n.prototype,t),(i.prototype.constructor=i).__super__=n.prototype,i};var M=function(){throw new Error('A "url" property or function must be specified')},C=function(e,n){var i=n.error;n.error=function(t){i&&i.call(n.context,e,t,n),e.trigger("error",e,t,n)}};return a}),function(e,n){window.TEMPLATE={},Backbone.View=Backbone.View.extend({setTemplate:function(t){t=TEMPLATE[t.substr(1)]||e(t).html();this.template=n.template(t)},getTemplate:function(t){return e.trim(this.template(t))}});var t={chunk:function(t,e){for(var n=[],i=0,r=t.length;i<r;i+=e)n.push(t.slice(i,i+e));return n}};n.mixin(t)}(jQuery,_),jQuery,window.AutoplanmallModel=Backbone.Model.extend({urlRoot:"/red-apigate/auto/section/planmalls",url:function(){return this.urlRoot}}),jQuery,window.planmallModel=Backbone.Model.extend({urlRoot:"/red-apigate/p/planmall/",url:function(){var t=this.urlRoot+({shotcut:"shotcut",plans:"plans",theme:"theme",hotdeal:"hotdeal/1",hotdeal2:"hotdeal/2",sale:"sale",sale2:"sale"}[this.id]||"shotcut");return t=!_.isEmpty(this.get("shopid"))?t+"/"+this.get("shopid"):t}}),function(t){window.layoutView=Backbone.View.extend({el:"#pcDaumTopSlotWrap",initialize:function(){this.setTemplate("#pcDaumTopSlotTemplate"),this.setEvents(),this.setSaleShopids()},cssTypeObj:{plans:{apiname:"SHOPBAG_PCTOP_CONTENTS_PLANS",className:"tit_event",title:"ì¸ê¸°ê¸°íšì „",tiara_layer2:"shopping_right planshow"},theme:{apiname:"SHOPBAG_PCTOP_CONTENTS_THEMA",className:"tit_theme",title:"ì¸ê¸°ìƒí’ˆ BEST100",tiara_layer2:"shopping_right best100"},hotdeal:{apiname:"LITHIUM_PCTOP_CONTENTS_HOTDEAL_1",className:"tit_hotdeal",title:"í•«ë”œ",tiara_layer2:"shopping_right hotdeal"},hotdeal2:{apiname:"LITHIUM_PCTOP_CONTENTS_HOTDEAL_2",className:"tit_hotdeal",title:"í•«ë”œ",tiara_layer2:"shopping_right hotdeal"},sale:{apiname:"SALE",className:"tit_sale",title:"ì‡¼í•‘ëª° í• ì¸íŠ¹ê°€",tiara_layer2:"shopping_right sale"},sale2:{apiname:"SALE_2",className:"tit_sale",title:"ì‡¼í•‘ëª° í• ì¸íŠ¹ê°€",tiara_layer2:"shopping_right sale"}},events:{"click .btn_prev":"prevPage","click .btn_next":"nextPage"},page:1,totalPage:1,contents:[],setEvents:function(){t("#btnPrev").size()&&(t("#btnPrev").on("click",_.bind(this.prevPage,this)),t("#btnNext").on("click",_.bind(this.nextPage,this))),void 0!==window.TiaraTracker&&window.TiaraTracker.getInstance().setAutoClick(!0)},render:function(){try{var t=this.getData();this.$el.html(this.getTemplate(t)),this.renderListView(),this.renderShotcutView()}catch(t){}},setSaleShopids:function(){var t=["sale","sale2"],e=_.sample(["11st","interpark","imshopping","gmarket","auction","namu-internet"],2),n=_.object(t,e),i=this.cssTypeObj;_.each(t,function(t){i[t].shopid=n[t]})},renderPage:function(){this.$el.attr("data-tiara-setnum",this.page),t("#nowPage").html(this.page),t("#totalPage").html(this.totalPage)},renderListView:function(){this.listView?this.listView.setElement(this.$el.find("#listWrap")):this.listView=new listView({model:new Backbone.Model});var t=this.contents[this.page-1];this.listView.model.set({list:t.list,height:0<=t.id.indexOf("theme")?54:60}),this.renderPage()},renderShotcutView:function(t){this.shotcutView?(this.shotcutView.setElement(this.$el.find("#shotcutWrap")),this.shotcutView.render()):(this.shotcutView=new shotcutView,this.shotcutView.setModel(t))},setModel:function(n){this.collection=new Backbone.Collection(null,{model:planmallModel}),n?(_.each(_.keys(this.cssTypeObj),function(t){var e=this.cssTypeObj[t];e.apiname&&((t=new planmallModel({id:t})).set(n[e.apiname]),this.collection.add(t))},this),this.renderShotcutView(n.SHOPBAG_PCTOP_CONTENTS_SHOTCUT),this.initData()):(this.collection.on("add",function(t){t.on("sync",this.onSuccess,this),t.on("error",this.onError,this),t.fetch()},this),_.each(_.keys(this.cssTypeObj),function(t){this.collection.add({id:t,shopid:this.cssTypeObj[t].shopid||""})},this))},successSum:0,errorSum:0,onSuccess:function(){this.successSum++,this.checkInit()},onError:function(){this.errorSum++,this.checkInit()},checkInit:function(){this.successSum+this.errorSum==_.size(this.collection.toJSON())&&this.initData()},initData:function(){var i=[];_.each(this.collection.toJSON(),function(n){var t;_.isEmpty(n.contents)||(t=_.first(n.contents,10),t=_.chunk(t,5),_.each(t,function(t,e){i.push({id:n.id,title:n.title,title_url:n.title_url,list:t})}))}),this.contents=i,this.totalPage=_.size(this.contents),this.page=_.random(1,this.totalPage),this.render()},getData:function(){var t=this.contents[this.page-1];return t.cssObj=this.cssTypeObj[t.id],t.totalPage=this.totalPage,t.page=this.page,t},prevPage:function(){this.page--,this.page<1&&(this.page=this.totalPage),this.render()},nextPage:function(){this.page++,this.page>this.totalPage&&(this.page=1),this.render()}})}(jQuery),jQuery,window.listView=Backbone.View.extend({el:"#listWrap",initialize:function(){this.setTemplate("#listTemplate"),this.model.on("reset change",this.render,this)},render:function(){try{this.$el.html(this.getTemplate(this.model.toJSON()))}catch(t){}}}),jQuery,window.shotcutView=Backbone.View.extend({el:"#shotcutWrap",initialize:function(){this.setTemplate("#shotcutTemplate")},render:function(){try{var t=this.getData();this.$el.html(this.getTemplate(t))}catch(t){}},getData:function(){return this.model.toJSON()},setModel:function(t){this.model=new planmallModel({id:"shotcut"}),this.model.on("sync reset change",this.render,this),t?this.model.set(t):this.model.fetch()}});
