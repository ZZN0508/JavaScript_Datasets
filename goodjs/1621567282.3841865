(window.shark_room_jsonp=window.shark_room_jsonp||[]).push([["PropsMallDialog_7a9d965"],{"0022b9":function(e,r,t){},"064e57":function(e,r,t){},108850:function(e,r,t){"use strict";var a,i,o,l,n,s,c,u,m,p=t("1a22b7"),f=t.n(p),d=t("292183"),_=t.n(d),h=t("447d8e"),b=t("eb3e22"),g=t("7ca7dc"),N=t("97a1f0"),v=t("db47a7"),y=t("2b8ab7"),D=(t("9dcaf9"),Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}),P="/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/SingleRecommandEntry/SingleRecommandEntry.js";function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var O=g.default.Service,w=Object(N.importObject)("live.utils.propsMallTools"),S=(a=Object(N.ErrorHandler)(f.a.createElement("div",{__source:{fileName:P,lineNumber:21},__self:void 0})),i=O(b.DataCenter.global),o=O(b.DataCenter.common),l=O(y.default),a((s=function(e){function SingleRecommandEntry(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SingleRecommandEntry);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",c,t),_initDefineProp(t,"common",u,t),_initDefineProp(t,"propsMallService",m,t),t.handleClickClose=function(e){e.stopPropagation(),t.propsMallService.hideSingleEntry()},t.handleClickContent=function(){var e=t.props.danmuData,r=e.iGoodsId;Object(v.dysub2)({action_code:"100100231",event_id:1,type:1,tid:t.cid2,r:t.rid,ext:{_out_goods_id:r}}),t.propsMallService.showOrderDialog(D({},e,{from:1}))},t.state={info:{},abtest:""},t}return _inherits(SingleRecommandEntry,e),SingleRecommandEntry.prototype.componentDidMount=function componentDidMount(){var e=this,r=this.props.danmuData.iGoodsId;this.common.get("$DATA").subscribe(function(t){e.rid=t.get("room.room_id"),e.cid2=t.get("room.cate_id"),Object(v.dysub2)({action_code:"100100231",event_id:3,type:1,tid:e.cid2,r:e.rid,ext:{_out_goods_id:r}})})},SingleRecommandEntry.prototype.render=function render(){var e=this.props.danmuData;return f.a.createElement("div",{className:"SingleRecommandEntry",__source:{fileName:P,lineNumber:90},__self:this},f.a.createElement("div",{className:"SingleRecommandEntry-wrap is-planB",onClick:this.handleClickContent,__source:{fileName:P,lineNumber:91},__self:this},f.a.createElement("div",{className:"SingleRecommandEntry-close",onClick:this.handleClickClose,__source:{fileName:P,lineNumber:92},__self:this}),f.a.createElement("div",{className:"SingleRecommandEntry-picWrap",__source:{fileName:P,lineNumber:93},__self:this},e.tag&&f.a.createElement("div",{className:"SingleRecommandEntry-tag",__source:{fileName:P,lineNumber:94},__self:this},e.tag),f.a.createElement("div",{className:"SingleRecommandEntry-pic",style:{backgroundImage:"url("+(e.sGoodsPic2||w.getDefaultPic())+")"},__source:{fileName:P,lineNumber:95},__self:this}),f.a.createElement("div",{className:"SingleRecommandEntry-name",__source:{fileName:P,lineNumber:97},__self:this},e.sGoodsName)),f.a.createElement("div",{className:"SingleRecommandEntry-priceWrap",__source:{fileName:P,lineNumber:100},__self:this},e.extend&&f.a.createElement("div",{className:"SingleRecommandEntry-extend",__source:{fileName:P,lineNumber:101},__self:this},e.extend),f.a.createElement("div",{className:"SingleRecommandEntry-price "+(+e.iPrice<+e.iOrgPrice?"is-showOrgPrice":""),__source:{fileName:P,lineNumber:102},__self:this},w.translatePrize(e.iPrice)),+e.iPrice<+e.iOrgPrice&&f.a.createElement("div",{className:"SingleRecommandEntry-originalPrice",__source:{fileName:P,lineNumber:105},__self:this},w.translatePrize(e.iOrgPrice))),f.a.createElement("div",{className:"SingleRecommandEntry-buyBtn",__source:{fileName:P,lineNumber:108},__self:this},"\u7acb\u5373\u8d2d\u4e70")))},SingleRecommandEntry}(f.a.Component),c=_applyDecoratedDescriptor(s.prototype,"global",[i],{enumerable:!0,initializer:null}),u=_applyDecoratedDescriptor(s.prototype,"common",[o],{enumerable:!0,initializer:null}),m=_applyDecoratedDescriptor(s.prototype,"propsMallService",[l],{enumerable:!0,initializer:null}),n=s))||n);S.propTypes={danmuData:_.a.object};r.default=Object(h.connect)(function mapStateToProps(e){var r=e.propsMallData;return{danmuData:(void 0===r?{}:r).singleData}})(S)},131156:function(e,r,t){"use strict";var a=t("26f3d2");r.default=a.default},"13152d":function(e,r,t){},158350:function(e,r,t){"use strict";t.r(r);var a=t("f75307");r.default=a.default},"1a350c":function(e,r,t){"use strict";var a=t("108850");r.default=a.default},"26f3d2":function(e,r,t){"use strict";var a,i,o,l,n,s=t("8126b5"),c=t("1a22b7"),u=t.n(c),m=t("292183"),p=t.n(m),f=t("447d8e"),d=t("eb3e22"),_=t("97a1f0"),h=t("7ca7dc"),b=t("2b8ab7"),g=t("e854a7"),N=(t("0022b9"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/PayDialog/PayDialog.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var v=g.default.socketStream,y=h.default.Service,D=Object(_.importObject)("live.utils.propsMallTools"),P=(a=y(d.DataCenter.global),i=y(b.default),o=function(e){function PayDialog(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PayDialog);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",l,t),_initDefineProp(t,"propsMallService",n,t),t.handleCloseDialog=function(){t.propsMallService.hidePayDialog()},t.checkPayStatus=function(){var e=t.props.payParams,r=e.serial,a=e.gameId;t.propsMallService.hidePayDialog(),t.propsMallService.hideOrderDetail(),t.propsMallService.checkPayStatus(a,r)},t.state={},t}return _inherits(PayDialog,e),PayDialog.prototype.componentDidMount=function componentDidMount(){var e=this;v.subscribe("user_order_finish",function(r){r.serial===e.props.payParams.serial&&(e.propsMallService.hidePayDialog(),e.propsMallService.showPayRes("success"))})},PayDialog.prototype.render=function render(){var e=this.props.payParams,r=e.realPrice;return u.a.createElement("div",{className:"PayDialog",__source:{fileName:N,lineNumber:67},__self:this},u.a.createElement("div",{className:"PayDialog-panel",__source:{fileName:N,lineNumber:68},__self:this},u.a.createElement("div",{className:"PayDialog-titleBg",__source:{fileName:N,lineNumber:69},__self:this},"\u8bf7\u7528APP\u626b\u7801\u652f\u4ed8"),u.a.createElement("div",{className:"PayDialog-close",onClick:this.handleCloseDialog,__source:{fileName:N,lineNumber:70},__self:this}),u.a.createElement("div",{className:"PayDialog-content",__source:{fileName:N,lineNumber:71},__self:this},u.a.createElement("div",{className:"PayDialog-qrcodeWrap",__source:{fileName:N,lineNumber:72},__self:this},u.a.createElement(s.default,{value:e.payUrl,options:{errorCorrectLevel:1},size:144,__source:{fileName:N,lineNumber:73},__self:this}))),u.a.createElement("div",{className:"PayDialog-realPrize",__source:{fileName:N,lineNumber:79},__self:this},"\u652f\u4ed8\u91d1\u989d\uff1a",D.translatePrize(r)),u.a.createElement("div",{className:"PayDialog-method",__source:{fileName:N,lineNumber:80},__self:this},u.a.createElement("i",{className:"PayDialog-methodIcon",__source:{fileName:N,lineNumber:81},__self:this}),u.a.createElement("span",{className:"PayDialog-methodLabel",__source:{fileName:N,lineNumber:82},__self:this},"\u652f\u4ed8\u65b9\u5f0f"),u.a.createElement("span",{className:"PayDialog-methodValue",__source:{fileName:N,lineNumber:83},__self:this},"\u652f\u6301 QQ\u652f\u4ed8 \u5fae\u4fe1\u652f\u4ed8")),u.a.createElement("div",{className:"PayDialog-doneBtn",onClick:this.checkPayStatus,__source:{fileName:N,lineNumber:85},__self:this},"\u652f\u4ed8\u5b8c\u6210")))},PayDialog}(u.a.Component),l=_applyDecoratedDescriptor(o.prototype,"global",[a],{enumerable:!0,initializer:null}),n=_applyDecoratedDescriptor(o.prototype,"propsMallService",[i],{enumerable:!0,initializer:null}),o);P.propTypes={payParams:p.a.object};r.default=Object(f.connect)(function mapStateToProps(e){var r=e.propsMallData;return{payParams:(void 0===r?{}:r).payParams}})(P)},"2b8ab7":function(e,r,t){"use strict";var a,i,o,l,n,s,c,u,m,p,f,d,_,h,b,g,N,v=t("97a1f0"),y=t("7ca7dc"),D=t("fc7947"),P=t.n(D),O=t("f68984"),w=t("f3f802"),S=t("b00678"),M=t("eb3e22"),E=t("722b8a"),C=t("e4a281"),R=t("72ca1a"),j=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var I=y.default.Store,z=y.default.Service,k=function covertPropsData(e){var r=j({},e);return e.goods_id&&(r=j({},e,{iGoodsId:e.goods_id,iOrgPrice:e.org_price,iPrice:e.price,sGoodsName:e.goods_name,sGoodsPic:e.goods_pic,sGoodsPic2:e.goods_pic2,iActionId:e.action_id,iFegAnchorId:e.feg_anchor_id,surplusTime:e.recommend_time,gameId:e.game_id})),r},T=(a=Object(v.Injectable)("live.playerDialogModule.PropsMallService"),i=I(),o=z(M.DataCenter.common),l=z(M.DataCenter.global),n=z(M.DataCenter.localStorage),s=z(M.DataCenter.cookie),c=z(R.default),u=Object(v.Inject)("live.common.CSRFCookieService"),a((p=function(){function PropsMallServices(){var e=this;!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PropsMallServices),_initDefineProp(this,"store",f,this),_initDefineProp(this,"common",d,this),_initDefineProp(this,"global",_,this),_initDefineProp(this,"localStorage",h,this),_initDefineProp(this,"cookie",b,this),_initDefineProp(this,"propsMallAnchorServices",g,this),_initDefineProp(this,"csrfCookieService",N,this),this.checkPropCanPay=function(e){var r=e.iActionId,t=e.iGoodsId,a=e.gameId;return M.httpClient.post(String,"/japi/propmall/www/prop/pay/check",{iActionId:r,iGoodsId:t,gameId:a},{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})},this.fetchPayInfo=function(r,t){var a=j({},r);return 1===t?e.csrfCookieService.getCSRFCookie().pipe(Object(S.switchMap)(function(e){var r,t=e.name,i=e.value;return M.httpClient.post(String,"/japi/propmall/www/prop/pay/coupon",j({},a,((r={})[t]=i,r)),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})})):e.csrfCookieService.getCSRFCookie().pipe(Object(S.switchMap)(function(e){var r,t=e.name,i=e.value;return M.httpClient.post(String,"/japi/propmall/www/prop/pay/money",j({},a,((r={})[t]=i,r)),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(O.map)(function(e){var r=e.data;return e&&0===+e.error&&e.data&&(r=v.GSON.parse(e.data)),j({},e,{data:r})}))},this.checkPayStatus=function(r,t){e.fetchHistoryByHist(0,r,t).subscribe(function(r){if(Array.isArray(r)&&r.length>0&&r[0].iStatus>=2)return void e.showPayRes("success");e.showPayRes("fail")})},this.payBySerial=function(r,t){return e.csrfCookieService.getCSRFCookie().pipe(Object(S.switchMap)(function(e){var a,i=e.name,o=e.value;return M.httpClient.post(String,"/japi/propmall/www/prop/pay/moneySerial",((a={gameId:r,serial:t})[i]=o,a),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(O.map)(function(e){return 0===e.error&&e.data?v.GSON.parse(e.data):(E.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),{})}))}}return PropsMallServices.prototype.showSingleEntry=function showSingleEntry(e){var r=k(e);this.store.dispatch(C.actions.showSingleEntry(r))},PropsMallServices.prototype.hideSingleEntry=function hideSingleEntry(){this.store.dispatch(C.actions.hideSingleEntry())},PropsMallServices.prototype.showMallDialog=function showMallDialog(e){var r=this;this.common.get("$ROLE_BARRAGE_SWITCH").subscribe(function(t){var a=t.propMallInfo;if(a&&1===a.isShowPropMall){var i=a.gameList;Array.isArray(i)&&i.length>0?r.store.dispatch(C.actions.showMallDialog(e)):E.default.info("\u8be5\u4e3b\u64ad\u6682\u65f6\u6ca1\u6709\u9053\u5177\u51fa\u552e\u6743\u9650\u54e6~")}})},PropsMallServices.prototype.hideMallDialog=function hideMallDialog(){this.store.dispatch(C.actions.hideMallDialog())},PropsMallServices.prototype.showRecommandDialog=function showRecommandDialog(){this.store.dispatch(C.actions.showRecommandDialog())},PropsMallServices.prototype.hideRecommandDialog=function hideRecommandDialog(){this.store.dispatch(C.actions.hideRecommandDialog())},PropsMallServices.prototype.showOrderDialog=function showOrderDialog(e){if(P.a.check()){var r=k(e);this.store.dispatch(C.actions.showOrderDialog(r))}else P.a.show()},PropsMallServices.prototype.hideOrderDialog=function hideOrderDialog(){this.store.dispatch(C.actions.hideOrderDialog())},PropsMallServices.prototype.freshOrderDialog=function freshOrderDialog(){var e=this;this.store.dispatch(C.actions.changeNeedRefresh(!0)),setTimeout(function(){e.store.dispatch(C.actions.changeNeedRefresh(!1))},1e3)},PropsMallServices.prototype.showHistoryDialog=function showHistoryDialog(){P.a.check()?this.store.dispatch(C.actions.showHistoryDialog()):P.a.show()},PropsMallServices.prototype.hideHistoryDialog=function hideHistoryDialog(){this.store.dispatch(C.actions.hideHistoryDialog())},PropsMallServices.prototype.showOrderDetailBySerial=function showOrderDetailBySerial(e,r){var t=this;P.a.check()?this.csrfCookieService.getCSRFCookie().subscribe(function(a){var i,o=a.name,l=a.value;M.httpClient.post(String,"/japi/propmall/www/prop/query/orderDetail",(i={gameId:e,serial:r},i[o]=l,i),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0}).subscribe(function(e){if(0===+e.error&&e.data){var r=v.GSON.parse(e.data),a=v.GSON.parse(r.sAttach);return t.store.dispatch(C.actions.showOrderDetail(j({},r,{sAttach:a,realPrice:r.iPrice-(r.iCJiFenAmount||0)}))),void t.store.dispatch(C.actions.updateOrderData({iActionId:r.iActionId,sSource:r.sSource,gameId:r.sBizCode,iGoodsId:a.iGoodsId,sSerialNum:r.sSerialNum,realPrice:r.iPrice-(r.iCJiFenAmount||0),isError:!1}))}E.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u67e5\u8be2\u8ba2\u5355\u5931\u8d25")})}):P.a.show()},PropsMallServices.prototype.updateOrderRealPrice=function updateOrderRealPrice(e){this.store.dispatch(C.actions.updateOrderData({realPrice:e}))},PropsMallServices.prototype.hideOrderDetail=function hideOrderDetail(){this.store.dispatch(C.actions.hideOrderDetail())},PropsMallServices.prototype.showPayDialog=function showPayDialog(e){this.store.dispatch(C.actions.showPayDialog(e))},PropsMallServices.prototype.hidePayDialog=function hidePayDialog(){this.store.dispatch(C.actions.hidePayDialog())},PropsMallServices.prototype.showMoreRecommendDialog=function showMoreRecommendDialog(){this.store.dispatch(C.actions.showMoreRecommendDialog())},PropsMallServices.prototype.hideMoreRecommendDialog=function hideMoreRecommendDialog(){this.store.dispatch(C.actions.hideMoreRecommendDialog())},PropsMallServices.prototype.showPayRes=function showPayRes(e){this.hideHistoryDialog(),this.hideOrderDetail(),this.store.dispatch(C.actions.showPayRes(e))},PropsMallServices.prototype.openMallDialog=function openMallDialog(e){if(+e===+this.global.get("$ROOM.room_id"))this.showMallDialog();else{var r,t=this.localStorage.get("OPEN_MALL_KEY");this.localStorage.set("OPEN_MALL_KEY",j({},t,((r={})[e]=!0,r))),window.open("//"+window.location.host+"/"+e)}},PropsMallServices.prototype.shouldOpenMallDialog=function shouldOpenMallDialog(){var e=+this.global.get("$ROOM.room_id"),r=this.localStorage.get("OPEN_MALL_KEY")||{};r[e]&&(this.showMallDialog(),delete r[e],this.localStorage.set("OPEN_MALL_KEY",r))},PropsMallServices.prototype.fetchABtest=function fetchABtest(e){return M.httpClient.post(String,"/wgapi/livenc/abtest/batch",{switch_ids:e,client_sys:"web",did:this.cookie.get("did")},{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0}).pipe(Object(O.map)(function(e){var r="C";return e&&0===+e.error&&Array.isArray(e.data)&&(r=v.GSON.parse(e.data[0]).current),r}))},PropsMallServices.prototype.fetchMallList=function fetchMallList(e,r){var t=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.config.PAGE_LIMIT;M.httpClient.get(String,"/japi/propmall/www/prop/mall/list",{roomId:e,gameId:r,pageLimit:i,currentPage:a},{noCache:!0}).subscribe(function(e){if(e&&0===+e.error){var i=v.GSON.parse(e.data),o=Array.isArray(i.records)?i.records.map(function(e){return j({},e,{iActionId:i.iActionId,gameId:r})}):[];t.store.dispatch(C.actions.putMallList({gameId:r,currentPage:a,list:o}))}})},PropsMallServices.prototype.fetchRecommendList=function fetchRecommendList(e,r){var t=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.config.PAGE_LIMIT;M.httpClient.get(String,"/japi/propmall/www/prop/recommend/list",{roomId:e,gameId:r,pageLimit:i,currentPage:a},{noCache:!0}).subscribe(function(e){if(e&&0===+e.error){var i=v.GSON.parse(e.data),o=Array.isArray(i.records)?i.records.map(function(e){return j({},e,{gameId:r})}):[];t.store.dispatch(C.actions.putRecommendList({gameId:r,currentPage:a,list:o}))}})},PropsMallServices.prototype.fetchSingleList=function fetchSingleList(e){var r=this;M.httpClient.get(String,"/japi/propmall/www/prop/recommend/singleInfo",{roomId:e},{noCache:!0}).subscribe(function(e){if(e&&0===+e.error&&v.GSON.parse(e.data)){var t=v.GSON.parse(e.data)||{},a=j({},t.recommend_prop,{gameId:t.gameId});r.showSingleEntry(a)}})},PropsMallServices.prototype.getGameStatus=function getGameStatus(e){var r=this;return new Promise(function(t,a){M.httpClient.get(String,"/japi/propmall/www/common/getGameStatus",{gameId:e},{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0}).subscribe(function(e){if(e&&0===+e.error&&v.GSON.parse(e.data)){var i=v.GSON.parse(e.data)||{};t(i),r.store.dispatch(C.actions.updatePaymentType(i))}else a(e.msg||"")})})},PropsMallServices.prototype.fetchHotList=function fetchHotList(e,r){return M.httpClient.get(String,"/japi/propmall/www/prop/recommend/hotList",{roomId:e,gameId:r},{noCache:!0}).pipe(Object(O.map)(function(e){if(0===e.error&&e.data){var t=v.GSON.parse(e.data);return Array.isArray(t.records)?t.records.map(function(e){return j({},e,{gameId:r})}):[]}return[]}))},PropsMallServices.prototype.fetchRandomList=function fetchRandomList(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,a=arguments[3];return M.httpClient.get(String,"/japi/propmall/www/prop/mall/listRandom",{roomId:e,gameId:r,pageLimit:t},{noCache:!0}).pipe(Object(O.map)(function(e){if(0===e.error&&e.data){var t=v.GSON.parse(e.data);return Array.isArray(t.records)?t.records.map(function(e){return j({},e,{iActionId:t.iActionId,gameId:r})}).filter(function(e){return e.iGoodsId!==a}):[]}return[]}))},PropsMallServices.prototype.fetchPropsInfoByID=function fetchPropsInfoByID(e){var r=this,t=e.iActionId,a=e.iGoodsId,i=e.gameId,o=e.roomId;return M.httpClient.get(String,"/japi/propmall/www/prop/mall/getPropInfoById",{roomId:o,gameId:i,iActionId:t,iGoodsId:a},{noCache:!0}).subscribe(function(e){if(0===e.error&&e.data){var l=v.GSON.parse(e.data);if("[object Object]"===Object.prototype.toString.apply(l.detail)){var n=j({},l.detail,{iActionId:t,iGoodsId:a,gameId:i,roomId:o});return void r.store.dispatch(C.actions.updateOrderData(j({},n,{isError:!1})))}}r.store.dispatch(C.actions.updateOrderData({isError:!0}))})},PropsMallServices.prototype.getBindRoleInfo=function getBindRoleInfo(e){var r=this;M.httpClient.get(String,"/japi/propmall/www/common/getBindRole",{gameId:e},{noCache:!0}).subscribe(function(t){var a={};if(0===t.error){var i=v.GSON.parse(t.data),o=i.gameRole||{},l=o.areaName,n=void 0===l?"":l,s=o.platName,c=void 0===s?"":s,u="android";n||(u="none"),(c?c.match(/\u82f9\u679c|ios/i):n.match(/\u82f9\u679c|ios/i))&&(u="ios"),a={gameAcc:i.gameAcc,gameRole:i.gameRole,bbindRole:i.bbindRole,accType:u}}else a={isError:!0};r.store.dispatch(C.actions.putCurRoleBindInfo({gameId:e,bindInfo:a}))})},PropsMallServices.prototype.getMyGameList=function getMyGameList(){return M.httpClient.get(String,"/japi/propmall/www/common/getGameList",{},{noCache:!0}).pipe(Object(O.map)(function(e){return 0===e.error&&Array.isArray(e.data)?e.data.map(function(e){return v.GSON.parse(e)}):[]}))},PropsMallServices.prototype.getTotalHistory=function getTotalHistory(e){var r=this;Object(w.zip)(this.fetchHistoryByHist(0,e),this.fetchHistoryByHist(1,e)).subscribe(function(t){var a=t[0],i=t[1],o=[].concat(a,i);r.store.dispatch(C.actions.putHistoryList({gameId:e,list:o}))})},PropsMallServices.prototype.fetchHistoryByHist=function fetchHistoryByHist(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.config.MAX_PAGE_LIMIT;return this.csrfCookieService.getCSRFCookie().pipe(Object(S.switchMap)(function(o){var l,n=o.name,s=o.value;return M.httpClient.post(String,"/japi/propmall/www/prop/pay/order",((l={hist:e,serialNum:t,currentPage:a,pageLimit:i,gameId:r})[n]=s,l),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(O.map)(function(e){return 0===e.error&&e.data?(v.GSON.parse(e.data).list||[]).map(function(e){return j({},e,{sAttach:v.GSON.parse(e.sAttach)})}):[]}))},PropsMallServices.prototype.queryCoupon=function queryCoupon(e){return this.csrfCookieService.getCSRFCookie().pipe(Object(S.switchMap)(function(r){var t,a=r.name,i=r.value;return M.httpClient.post(String,"/japi/propmall/www/prop/query/coupon",((t={})[a]=i,t.gameId=e,t),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(O.map)(function(e){return 0===e.error&&e.data?v.GSON.parse(e.data).curVal:0}))},PropsMallServices.prototype.cancelOrder=function cancelOrder(e,r){return this.csrfCookieService.getCSRFCookie().pipe(Object(S.switchMap)(function(t){var a,i=t.name,o=t.value;return M.httpClient.post(String,"/japi/propmall/www/prop/pay/orderCancel",((a={gameId:e,serial:r})[i]=o,a),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}))},PropsMallServices}(),f=_applyDecoratedDescriptor(p.prototype,"store",[i],{enumerable:!0,initializer:null}),d=_applyDecoratedDescriptor(p.prototype,"common",[o],{enumerable:!0,initializer:null}),_=_applyDecoratedDescriptor(p.prototype,"global",[l],{enumerable:!0,initializer:null}),h=_applyDecoratedDescriptor(p.prototype,"localStorage",[n],{enumerable:!0,initializer:null}),b=_applyDecoratedDescriptor(p.prototype,"cookie",[s],{enumerable:!0,initializer:null}),g=_applyDecoratedDescriptor(p.prototype,"propsMallAnchorServices",[c],{enumerable:!0,initializer:null}),N=_applyDecoratedDescriptor(p.prototype,"csrfCookieService",[u],{enumerable:!0,initializer:null}),m=p))||m);r.default=T},"2e1e08":function(e,r,t){"use strict";var a,i,o,l,n,s,c,u,m,p=t("1a22b7"),f=t.n(p),d=t("292183"),_=t.n(d),h=t("447d8e"),b=t("eb3e22"),g=t("7ca7dc"),N=t("97a1f0"),v=t("db47a7"),y=t("2b8ab7"),D=t("93e635"),P=t("814179"),O=t("e16077"),w=t("7a2652"),S=(t("064e57"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/OrderDialog/OrderDialog.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var M=g.default.Service,E=Object(N.importObject)("live.utils.propsMallTools"),C=10,R=(a=Object(N.ErrorHandler)(f.a.createElement("div",{__source:{fileName:S,lineNumber:26},__self:void 0})),i=M(b.DataCenter.global),o=M(b.DataCenter.common),l=M(y.default),a((s=function(e){function OrderDialog(r){var t=this;!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OrderDialog);var a=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(a,"global",c,a),_initDefineProp(a,"common",u,a),_initDefineProp(a,"propsMallService",m,a),a.fetchCouponData=function(){var e=a.props.propsData,r=a.state,t=r.curRoleBindInfo,i=r.paymentLoaded,o=r.accoundLoaded,l=e.gameId;i&&o&&(a.accType=t[l].accType,1===a.getPayWayInfo().type&&a.propsMallService.queryCoupon(l).subscribe(function(e){a.setState({couponRemain:e||0},function(){a.checkCoupon()})}),a.setState({accType:a.accType}))},a.subWhenOrderShow=function(){var e=a.props.propsData,r=e.iGoodsId,t=e.from;Object(v.dysub2)({action_code:"100100237",event_id:2,type:1,tid:a.cid2,r:a.rid,ext:{_out_goods_id:r,_url_source:t||""}})},a.getAndCheckProp=function(){var e=a.getPropGoodsIds();a.propsMallService.checkPropCanPay(e).subscribe(function(e){if(a.state.accoundLoaded=!0,a.fetchCouponData(),0===+e.error&&e.data){var r=N.GSON.parse(e.data)||{},t=r.deductAmount,i=r.jifenLeft,o=r.deductPrice,l=r.subtractPrice,n=r.tipMsg;a.setState({jiFenErrorMsg:"",deductAmount:t,jifenLeft:i,deductPrice:o,subtractPrice:l,tipMsg:n}),a.propsMallService.updateOrderRealPrice(o)}else a.setState({jiFenErrorMsg:e.msg})})},a.handleCloseDialog=function(){"order"===a.props.orderType&&a.propsMallService.showMoreRecommendDialog(),a.propsMallService.hideOrderDialog()},a.handleClickResShowMore=function(){a.setState({resShowMore:!0})},a.checkCoupon=function(){var e=a.state,r=e.couponRemain,t=e.jiFenErrorMsg,i=a.props,o=i.propsData,l=i.couponName,n=o.iPrice,s=a.getPayWayInfo(),c="",u=l||"";"none"===a.accType?c="\u8bf7\u5148\u7ed1\u5b9a\u6e38\u620f\u8d26\u53f7":t?c=t:1===s.type&&+r*C<+n&&(c=u+"\u4f59\u989d\u4e0d\u8db3\uff08"+r+u+"\uff09\uff0c\u8bf7\u5145\u503c\u540e\u518d\u8d2d\u4e70"),a.setState({payErrorMsg:c})},a.hanldeClickOpenMall=function(){a.propsMallService.showMallDialog()},a.renderContent=function(){var e=a.state,r=e.ownerName,i=e.randomList,o=e.couponRemain,l=e.resShowMore,n=e.payErrorMsg,s=e.deductAmount,c=e.jifenLeft,u=e.deductPrice,m=e.subtractPrice,p=e.tipMsg,d=a.props,_=d.propsData,h=d.orderType,b=d.couponName,g=_.iPrice,N=_.tag,v=_.extend,y=_.gameId,M=_.sGoodsName,C=_.sGoodsPic2,R=_.iOrgPrice,j=_.isError,I=a.getPayWayInfo(),z=+s>0?u:g,k=E.getPrice(z,I.type),T=1===I.type&&b||"";if("success"===h||"fail"===h){var L="success"===h?"\u8bf7\u8fdb\u5165\u6e38\u620f\u5e76\u767b\u5f55\u7ed1\u5b9a\u7684\u6e38\u620f\u8d26\u53f7\uff0c\u5728\u90ae\u7bb1/\u80cc\u5305\u4e2d\u9886\u53d6\u6240\u8d2d\u4e70\u9053\u5177":"\u60a8\u53ef\u4ee5\u5728\u3010\u4e3b\u64ad\u5546\u57ce-\u5386\u53f2\u8ba2\u5355\u3011\u4e2d\u91cd\u65b0\u652f\u4ed8";return f.a.createElement("div",{className:"OrderDialog-result",__source:{fileName:S,lineNumber:373},__self:t},f.a.createElement("div",{className:"OrderDialog-resultImg",__source:{fileName:S,lineNumber:374},__self:t}),f.a.createElement("div",{className:"OrderDialog-resultTitle",__source:{fileName:S,lineNumber:375},__self:t},"success"===h?"\u652f\u4ed8\u6210\u529f":"\u652f\u4ed8\u5931\u8d25"),f.a.createElement("div",{className:"OrderDialog-resultTips",__source:{fileName:S,lineNumber:378},__self:t},L),"fail"===h?f.a.createElement(O.default,{propsData:_,currPayType:I.type,__source:{fileName:S,lineNumber:380},__self:t},f.a.createElement("div",{className:"OrderDialog-payContinueBtn",__source:{fileName:S,lineNumber:384},__self:t},"\u7ee7\u7eed\u652f\u4ed8")):null,i.length>0&&f.a.createElement("div",{className:"OrderDialog-moreProps",__source:{fileName:S,lineNumber:390},__self:t},f.a.createElement("div",{className:"OrderDialog-morePropsTitle",__source:{fileName:S,lineNumber:391},__self:t},f.a.createElement("span",{className:"OrderDialog-titleText",__source:{fileName:S,lineNumber:392},__self:t},"\u66f4\u591a"),f.a.createElement("span",{className:"OrderDialog-titleAnchorName",__source:{fileName:S,lineNumber:395},__self:t},r||"\u4e3b\u64ad"),f.a.createElement("span",{className:"OrderDialog-titleText",__source:{fileName:S,lineNumber:398},__self:t},"\u7684\u5546\u54c1\u63a8\u8350")),f.a.createElement("div",{className:"OrderDialog-recommendPropsWrap",__source:{fileName:S,lineNumber:402},__self:t},f.a.createElement(D.default,{list:l?i.slice(0,12):i.slice(0,8),__source:{fileName:S,lineNumber:403},__self:t})),!l&&f.a.createElement("div",{className:"OrderDialog-resShowMoreBtn",onClick:a.handleClickResShowMore,__source:{fileName:S,lineNumber:412},__self:t},f.a.createElement("span",{className:"inner",__source:{fileName:S,lineNumber:416},__self:t},"\u5c55\u793a\u66f4\u591a"),f.a.createElement("i",{className:"inner inner-icon",__source:{fileName:S,lineNumber:417},__self:t}))))}return j?f.a.createElement(f.a.Fragment,{__source:{fileName:S,lineNumber:428},__self:t},f.a.createElement("div",{className:"OrderDialog-titleArea",__source:{fileName:S,lineNumber:429},__self:t},"\u786e\u8ba4\u8ba2\u5355"),f.a.createElement("div",{className:"OrderDialog-emptyWrap",__source:{fileName:S,lineNumber:430},__self:t},f.a.createElement(w.default,{text:"\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684\u9053\u5177\u54e6\uff0c\u770b\u770b\u5176\u4ed6\u9053\u5177\u5427",__source:{fileName:S,lineNumber:431},__self:t}))):f.a.createElement(f.a.Fragment,{__source:{fileName:S,lineNumber:438},__self:t},f.a.createElement("div",{className:"OrderDialog-titleArea",__source:{fileName:S,lineNumber:439},__self:t},"\u786e\u8ba4\u8ba2\u5355"),f.a.createElement("div",{className:"OrderDialog-bindRoleArea",__source:{fileName:S,lineNumber:440},__self:t},f.a.createElement("div",{className:"OrderDialog-bindRoleTitle",__source:{fileName:S,lineNumber:441},__self:t},f.a.createElement("i",{__source:{fileName:S,lineNumber:442},__self:t}),f.a.createElement("span",{__source:{fileName:S,lineNumber:443},__self:t},"\u6211\u7684\u6e38\u620f\u8d26\u53f7")),f.a.createElement("div",{className:"OrderDialog-bindComponent",__source:{fileName:S,lineNumber:445},__self:t},f.a.createElement(P.default,{gameId:y,__source:{fileName:S,lineNumber:446},__self:t}))),f.a.createElement("div",{className:"OrderDialog-propsInfoArea",__source:{fileName:S,lineNumber:449},__self:t},f.a.createElement("div",{className:"OrderDialog-propsInfo",__source:{fileName:S,lineNumber:450},__self:t},f.a.createElement("div",{className:"OrderDialog-propsImg",style:{backgroundImage:"url("+(C||E.getDefaultPic())+")"},__source:{fileName:S,lineNumber:451},__self:t},N&&f.a.createElement("div",{className:"OrderDialog-tag",__source:{fileName:S,lineNumber:459},__self:t},N)),f.a.createElement("div",{className:"OrderDialog-propsName",__source:{fileName:S,lineNumber:462},__self:t},M),f.a.createElement("div",{className:"OrderDialog-propsPrize",__source:{fileName:S,lineNumber:465},__self:t},k,T),v&&f.a.createElement("div",{className:"OrderDialog-extend",__source:{fileName:S,lineNumber:470},__self:t},v))),s>0&&f.a.createElement("div",{className:"OrderDialog-canUseScore",__source:{fileName:S,lineNumber:475},__self:t},f.a.createElement("i",{__source:{fileName:S,lineNumber:476},__self:t}),f.a.createElement("div",{className:"OrderDialog-canUseScoreTitle",__source:{fileName:S,lineNumber:477},__self:t},"\u672c\u5355\u53ef\u62b5\u6263",s,"\u79ef\u5206",f.a.createElement("span",{className:"OrderDialog-jifenLeft",__source:{fileName:S,lineNumber:479},__self:t},"(\u5269\u4f59",c,"\u79ef\u5206\uff09")),f.a.createElement("div",{className:"OrderDialog-canUseScoreNum",__source:{fileName:S,lineNumber:483},__self:t},"-",E.translatePrize(m))),f.a.createElement("div",{className:"OrderDialog-payMethod",__source:{fileName:S,lineNumber:488},__self:t},f.a.createElement("i",{__source:{fileName:S,lineNumber:489},__self:t}),f.a.createElement("div",{className:"OrderDialog-payMethodTitle",__source:{fileName:S,lineNumber:490},__self:t},"\u652f\u4ed8\u65b9\u5f0f"),f.a.createElement("div",{className:"OrderDialog-payMethodTips",__source:{fileName:S,lineNumber:491},__self:t},I.text,1===I.type&&f.a.createElement("span",{__source:{fileName:S,lineNumber:494},__self:t},"(",T,"\u4f59\u989d\uff1a",o,")"))),p&&p.length>0?f.a.createElement("div",{className:"OrderDialog-payTips",__source:{fileName:S,lineNumber:501},__self:t},f.a.createElement("i",{__source:{fileName:S,lineNumber:502},__self:t}),f.a.createElement("div",{className:"OrderDialog-payTipsTitle",__source:{fileName:S,lineNumber:503},__self:t},p)):"",n&&f.a.createElement("div",{className:"OrderDialog-errorMsgArea",__source:{fileName:S,lineNumber:509},__self:t},n),f.a.createElement("div",{className:"OrderDialog-payArea",__source:{fileName:S,lineNumber:513},__self:t},f.a.createElement("div",{className:"OrderDialog-payPrize",__source:{fileName:S,lineNumber:514},__self:t},"\u5408\u8ba1",f.a.createElement("span",{className:"OrderDialog-payRealPrize",__source:{fileName:S,lineNumber:516},__self:t},k,T),+R>+g&&f.a.createElement("span",{className:"OrderDialog-payOldPrize",__source:{fileName:S,lineNumber:521},__self:t},E.getPrice(+R,I.type),T)),n?f.a.createElement("div",{className:"OrderDialog-payBtn is-grey",__source:{fileName:S,lineNumber:531},__self:t},"\u7acb\u5373\u652f\u4ed8"):f.a.createElement(O.default,{propsData:_,currPayType:I.type,__source:{fileName:S,lineNumber:535},__self:t},f.a.createElement("div",{className:"OrderDialog-payBtn",__source:{fileName:S,lineNumber:539},__self:t},"\u7acb\u5373\u652f\u4ed8"))))},a.state={payUrl:"",randomList:[],orderType:"",curRoleBindInfo:{},couponRemain:0,accType:"",resShowMore:!1,deductPrice:0,deductAmount:0,jifenLeft:0,needRefresh:!1,tipMsg:"",paymentLoaded:!1,accoundLoaded:!1,jiFenErrorMsg:"",subtractPrice:0},a.roomId=a.global.get("$ROOM.room_id"),a}return _inherits(OrderDialog,e),OrderDialog.prototype.getPayWayInfo=function getPayWayInfo(){var e=this.accType,r=this.props,t=r.couponName,a=r.paymentType,i={type:0,text:"\u652f\u6301 QQ\u652f\u4ed8 \u5fae\u4fe1\u652f\u4ed8"};return 0===a||2===a&&"android"===e?i:1===a||2===a&&"ios"===e?{type:1,text:"\u652f\u6301 "+t+"\u652f\u4ed8"}:i},OrderDialog.prototype.componentDidMount=function componentDidMount(){var e=this;this.common.get("$DATA").subscribe(function(r){var t=r.get("room.owner_name");e.rid=r.get("room.room_id"),e.cid2=r.get("room.cate_id"),e.setState({ownerName:t})});var r=this.state.orderType,t=this.props.propsData.gameId;this.fetchPropsInfo(),this.propsMallService.getGameStatus(t).finally(function(){e.state.paymentLoaded=!0,e.fetchCouponData()}),"success"===r||"fail"===r?this.propsMallService.fetchRandomList(this.roomId,t,12).subscribe(function(r){e.setState({randomList:r,resShowMore:r.length<=8})}):this.subWhenOrderShow()},OrderDialog.getDerivedStateFromProps=function getDerivedStateFromProps(e,r){return r.orderType!==e.orderType?{orderType:e.orderType}:r.curRoleBindInfo!==e.curRoleBindInfo?{curRoleBindInfo:e.curRoleBindInfo}:r.needRefresh!==e.needRefresh?{needRefresh:e.needRefresh}:null},OrderDialog.prototype.componentDidUpdate=function componentDidUpdate(e,r){var t=this.props.propsData,a=this.state,i=a.orderType,o=a.curRoleBindInfo,l=a.needRefresh,n=t.gameId;r.orderType===i?r.needRefresh!==l&&l?this.fetchDataByType():JSON.stringify(r.curRoleBindInfo)!==JSON.stringify(o)&&r.curRoleBindInfo&&(o[n]||{}).gameRole!==(r.curRoleBindInfo[n]||{}).gameRole&&this.getAndCheckProp():this.fetchDataByType()},OrderDialog.prototype.fetchDataByType=function fetchDataByType(){var e=this,r=this.state.orderType,t=this.props.propsData,a=t.gameId,i=t.iGoodsId;"success"===r||"fail"===r?this.propsMallService.fetchRandomList(this.roomId,a,13,i).subscribe(function(r){e.setState({randomList:r,resShowMore:r.length<=8})}):(this.getAndCheckProp(),this.subWhenOrderShow())},OrderDialog.prototype.getPropGoodsIds=function getPropGoodsIds(){var e=this.props.propsData;return{iActionId:e.iActionId,iGoodsId:e.iGoodsId,gameId:e.gameId,roomId:e.sSource||this.roomId}},OrderDialog.prototype.fetchPropsInfo=function fetchPropsInfo(){var e=this.getPropGoodsIds();this.propsMallService.fetchPropsInfoByID(e)},OrderDialog.prototype.render=function render(){var e=this.props.orderType;return f.a.createElement("div",{className:"OrderDialog",__source:{fileName:S,lineNumber:551},__self:this},f.a.createElement("div",{className:"OrderDialog-panel is-"+e,__source:{fileName:S,lineNumber:552},__self:this},f.a.createElement("div",{className:"OrderDialog-close",onClick:this.handleCloseDialog,__source:{fileName:S,lineNumber:553},__self:this}),this.renderContent()))},OrderDialog}(f.a.Component),c=_applyDecoratedDescriptor(s.prototype,"global",[i],{enumerable:!0,initializer:null}),u=_applyDecoratedDescriptor(s.prototype,"common",[o],{enumerable:!0,initializer:null}),m=_applyDecoratedDescriptor(s.prototype,"propsMallService",[l],{enumerable:!0,initializer:null}),n=s))||n);R.propTypes={propsData:_.a.object};r.default=Object(h.connect)(function mapStateToProps(e){var r=e.propsMallData,t=void 0===r?{}:r;return{propsData:t.confirmOrderData,orderType:t.orderType,curRoleBindInfo:t.curRoleBindInfo||{},anchorRecommandList:t.anchorRecommandList||{},paymentType:t.paymentType,couponName:t.couponName,needRefresh:t.orderNeedRefresh}})(R)},"2e21b8":function(e,r,t){},"2f40d3":function(e,r,t){e.exports=t("5f575e")("9f110")},"37e066":function(e,r,t){},"4b21f4":function(e,r,t){},569931:function(e,r,t){"use strict";var a=t("61192c");r.default=a.default},"61192c":function(e,r,t){"use strict";var a,i,o,l,n,s,c,u=t("1a22b7"),m=t.n(u),p=t("292183"),f=t.n(p),d=t("447d8e"),_=t("eb3e22"),h=t("7ca7dc"),b=t("2b8ab7"),g=t("93e635"),N=(t("7b67fa"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/MoreRecommendDialog/MoreRecommendDialog.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var v=h.default.Service,y=(a=v(_.DataCenter.global),i=v(_.DataCenter.common),o=v(b.default),l=function(e){function MoreRecommendDialog(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MoreRecommendDialog);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",n,t),_initDefineProp(t,"common",s,t),_initDefineProp(t,"propsMallService",c,t),t.handleCloseDialog=function(){t.propsMallService.hideMoreRecommendDialog()},t.showMore=function(){t.setState({showMore:!0})},t.state={ownerName:"\u4e3b\u64ad",recommendList:[],showMore:!1},t}return _inherits(MoreRecommendDialog,e),MoreRecommendDialog.prototype.componentDidMount=function componentDidMount(){var e=this;this.roomId=this.global.get("$ROOM.room_id");var r=this.props.propsData;this.common.get("$DATA").subscribe(function(r){var t=r.get("room.owner_name");e.setState({ownerName:t})}),this.propsMallService.fetchRandomList(this.roomId,r.gameId,10,r.iGoodsId).subscribe(function(r){r.length<3&&e.handleCloseDialog(),e.setState({recommendList:r.slice(0,9),showMore:r.length<=3})})},MoreRecommendDialog.prototype.render=function render(){var e=this.state,r=e.ownerName,t=e.recommendList,a=e.showMore;return Array.isArray(t)&&0!==t.length?m.a.createElement("div",{className:"MoreRecommendDialog",__source:{fileName:N,lineNumber:79},__self:this},m.a.createElement("div",{className:"MoreRecommendDialog-close",onClick:this.handleCloseDialog,__source:{fileName:N,lineNumber:80},__self:this}),m.a.createElement("div",{className:"MoreRecommendDialog-title",__source:{fileName:N,lineNumber:81},__self:this},m.a.createElement("span",{className:"MoreRecommendDialog-titleText",__source:{fileName:N,lineNumber:82},__self:this}),m.a.createElement("span",{className:"MoreRecommendDialog-titleAnchorName",__source:{fileName:N,lineNumber:83},__self:this},r||"\u4e3b\u64ad"),m.a.createElement("span",{className:"MoreRecommendDialog-titleText",__source:{fileName:N,lineNumber:84},__self:this},"\u4e3a\u60a8\u51c6\u5907\u4e86\u66f4\u591a\u9053\u5177")),m.a.createElement("div",{className:"MoreRecommendDialog-content",__source:{fileName:N,lineNumber:86},__self:this},m.a.createElement(g.default,{list:a?t.slice(0,9):t.slice(0,3),lineNum:3,__source:{fileName:N,lineNumber:87},__self:this})),!a&&m.a.createElement("div",{className:"MoreRecommendDialog-btn",onClick:this.showMore,__source:{fileName:N,lineNumber:91},__self:this},"\u67e5\u770b\u66f4\u591a\u9053\u5177")):null},MoreRecommendDialog}(m.a.Component),n=_applyDecoratedDescriptor(l.prototype,"global",[a],{enumerable:!0,initializer:null}),s=_applyDecoratedDescriptor(l.prototype,"common",[i],{enumerable:!0,initializer:null}),c=_applyDecoratedDescriptor(l.prototype,"propsMallService",[o],{enumerable:!0,initializer:null}),l);y.propTypes={propsData:f.a.object};r.default=Object(d.connect)(function mapStateToProps(e){var r=e.propsMallData;return{propsData:(void 0===r?{}:r).confirmOrderData}})(y)},"72ca1a":function(e,r,t){"use strict";var a,i,o,l,n,s,c,u,m,p,f,d,_,h,b,g=t("97a1f0"),N=t("7ca7dc"),v=t("f68984"),y=t("b00678"),D=t("eb3e22"),P=t("722b8a"),O=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var w=N.default.Store,S=N.default.Service,M=40,E=(a=Object(g.Injectable)("live.playerDialogModule.PropsMallAnchorService"),i=w(),o=S(D.DataCenter.common),l=S(D.DataCenter.global),n=S(D.DataCenter.localStorage),s=S(D.DataCenter.cookie),c=Object(g.Inject)("live.common.CSRFCookieService"),a((m=function(){function PropsMallServices(){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PropsMallServices),_initDefineProp(this,"store",p,this),_initDefineProp(this,"common",f,this),_initDefineProp(this,"global",d,this),_initDefineProp(this,"localStorage",_,this),_initDefineProp(this,"cookie",h,this),_initDefineProp(this,"csrfCookieService",b,this)}return PropsMallServices.prototype.fetchSingleList=function fetchSingleList(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M;return D.httpClient.get(String,"/japi/propmall/www/anchorProp/single/list",{gameId:e,currentPage:t,pageLimit:a,sGoodsName:r},{noCache:!0}).pipe(Object(v.map)(function(r){if(r&&0===+r.error&&r.data){var t=g.GSON.parse(r.data);return Array.isArray(t.records)?t.records.map(function(r){return O({},r,{gameId:e,iActionId:t.iActionId})}):[]}return[]}))},PropsMallServices.prototype.fetchMultiList=function fetchMultiList(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M;return D.httpClient.get(String,"/japi/propmall/www/anchorProp/multi/list",{gameId:e,currentPage:t,pageLimit:a,sGoodsName:r},{noCache:!0}).pipe(Object(v.map)(function(r){if(r&&0===+r.error&&r.data){var t=g.GSON.parse(r.data);return Array.isArray(t.records)?t.records.map(function(r){return O({},r,{gameId:e,iActionId:t.iActionId})}):[]}return[]}))},PropsMallServices.prototype.fetchRecommendList=function fetchRecommendList(e){return D.httpClient.get(String,"/japi/propmall/www/anchorProp/recommend/list",{gameId:e},{noCache:!0}).pipe(Object(v.map)(function(r){if(r&&0===+r.error&&r.data){var t=g.GSON.parse(r.data);return{single_recommend:t.single_recommend,multi_recommend:Array.isArray(t.multi_recommend)&&t.multi_recommend.map(function(r){return O({},r,{gameId:e})})}}return{single_recommend:[],multi_recommend:[]}}))},PropsMallServices.prototype.singleRecommend=function singleRecommend(e,r,t){return this.csrfCookieService.getCSRFCookie().pipe(Object(y.switchMap)(function(a){var i,o=a.name,l=a.value;return D.httpClient.post(String,"/japi/propmall/www/anchorProp/single/recommend",((i={iGoodsId:e,gameId:r,iActionId:t})[o]=l,i),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(v.map)(function(e){return!(!e||0!==+e.error)||(P.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),!1)}))},PropsMallServices.prototype.stopSingleRecommend=function stopSingleRecommend(e,r,t){return this.csrfCookieService.getCSRFCookie().pipe(Object(y.switchMap)(function(a){var i,o=a.name,l=a.value;return D.httpClient.post(String,"/japi/propmall/www/anchorProp/single/recommendCancel",((i={iGoodsId:e,gameId:r,iActionId:t})[o]=l,i),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(v.map)(function(e){return!(!e||0!==+e.error)||(P.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),!1)}))},PropsMallServices.prototype.multiRecommend=function multiRecommend(e,r,t){return this.csrfCookieService.getCSRFCookie().pipe(Object(y.switchMap)(function(a){var i,o=a.name,l=a.value;return D.httpClient.post(String,"/japi/propmall/www/anchorProp/multi/recommend",((i={iGoodsId:e,gameId:r,iActionId:t})[o]=l,i),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(v.map)(function(e){return!(!e||0!==+e.error)||(P.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),!1)}))},PropsMallServices.prototype.stopMultiRecommend=function stopMultiRecommend(e,r,t){return this.csrfCookieService.getCSRFCookie().pipe(Object(y.switchMap)(function(a){var i,o=a.name,l=a.value;return D.httpClient.post(String,"/japi/propmall/www/anchorProp/multi/recommendCancel",((i={iGoodsId:e,gameId:r,iActionId:t})[o]=l,i),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(v.map)(function(e){return!(!e||0!==+e.error)||(P.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),!1)}))},PropsMallServices.prototype.setPropsToTop=function setPropsToTop(e){var r=e.gameId,t=e.iGoodsId;return this.csrfCookieService.getCSRFCookie().pipe(Object(y.switchMap)(function(e){var a,i=e.name,o=e.value;return D.httpClient.post(String,"/japi/propmall/www/anchorProp/recommend/setPropTop",((a={gameId:r,iGoodsId:t})[i]=o,a),{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0})}),Object(v.map)(function(e){return!(!e||0!==+e.error)||(P.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),!1)}))},PropsMallServices}(),p=_applyDecoratedDescriptor(m.prototype,"store",[i],{enumerable:!0,initializer:null}),f=_applyDecoratedDescriptor(m.prototype,"common",[o],{enumerable:!0,initializer:null}),d=_applyDecoratedDescriptor(m.prototype,"global",[l],{enumerable:!0,initializer:null}),_=_applyDecoratedDescriptor(m.prototype,"localStorage",[n],{enumerable:!0,initializer:null}),h=_applyDecoratedDescriptor(m.prototype,"cookie",[s],{enumerable:!0,initializer:null}),b=_applyDecoratedDescriptor(m.prototype,"csrfCookieService",[c],{enumerable:!0,initializer:null}),u=m))||u);r.default=E},"7a2652":function(e,r,t){"use strict";t.d(r,"default",function(){return Empty});var a=t("1a22b7"),i=t.n(a),o=(t("37e066"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/components/Empty.js");function Empty(e){var r=e.text,t=e.style,a=void 0===t?{}:t;return i.a.createElement("div",{className:"PropsMallEmpty",style:a,__source:{fileName:o,lineNumber:5},__self:this},i.a.createElement("div",{className:"PropsMallEmpty-img",__source:{fileName:o,lineNumber:6},__self:this}),i.a.createElement("div",{className:"PropsMallEmpty-text",__source:{fileName:o,lineNumber:7},__self:this},r||"\u8fd9\u91cc\u6682\u65f6\u6ca1\u6709\u5546\u54c1\uff0c\u7a0d\u540e\u518d\u6765\u770b\u770b\uff5e"))}},"7a8cad":function(e,r,t){"use strict";var a=t("2e1e08");r.default=a.default},"7b67fa":function(e,r,t){},810437:function(e,r,t){},814179:function(e,r,t){"use strict";var a,i,o,l=t("1a22b7"),n=t.n(l),s=t("292183"),c=t.n(s),u=t("447d8e"),m=t("7ca7dc"),p=t("fc7947"),f=t.n(p),d=t("eb3e22"),_=t("722b8a"),h=t("29c1cb"),b=t.n(h),g=t("2b8ab7"),N=(t("4b21f4"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/components/BindRole.js");function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}var v=(a=(0,m.default.Service)(g.default),i=function(e){function BindRoleBtnV3(){var r,t,a=this;!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BindRoleBtnV3);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return r=t=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(l))),function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}(t,"propsMallService",o,t),t.isLogin=f.a.check(),t.handleBtnClick=function(){if(f.a.check()){var e=t.props.gameId;d.httpClient.post(String,"/member/panel/tencentGame/getUrlOfUnionBind",{gameIdList:e,client:"web",redirectUrl:window.location.href,userType:1},{headers:{"content-type":"application/x-www-form-urlencoded"},noCache:!0}).subscribe(function(e){0!==e.error?_.default.info(e.msg||"\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u5145\u5b9e"):window.open(e.data)})}else f.a.show()},t.renderInfo=function(){var e=t.props,r=e.curRoleBindInfo,i=(void 0===r?{}:r)[e.gameId]||{},o=i.gameRole,l=i.gameAcc;return o&&o.roleName?n.a.createElement("div",{className:"BindRoleInfo-bindRole",__source:{fileName:N,lineNumber:92},__self:a},n.a.createElement("div",{className:"BindRoleInfo-roleName",__source:{fileName:N,lineNumber:93},__self:a},"\u4eb2\u7231\u7684","qq"===l.type?"QQ":"\u5fae\u4fe1","\u7528\u6237"),n.a.createElement("div",{className:"BindRoleInfo-areaName",__source:{fileName:N,lineNumber:94},__self:a},o.partitionName||o.areaName," ",o.roleName)):l&&l.type?n.a.createElement("div",{className:"BindRoleInfo-bindAccountNew",__source:{fileName:N,lineNumber:102},__self:a},n.a.createElement("span",{__source:{fileName:N,lineNumber:103},__self:a},"\u4eb2\u7231\u7684","qq"===l.type?"QQ":"\u5fae\u4fe1","\u7528\u6237, \u672a\u7ed1\u5b9a\u89d2\u8272")):n.a.createElement("div",{className:"BindRoleInfo-noBind",__source:{fileName:N,lineNumber:110},__self:a},n.a.createElement("span",{__source:{fileName:N,lineNumber:111},__self:a},"\u8bf7\u5148\u7ed1\u5b9a\u6e38\u620f\u8d26\u53f7\u54e6"))},t.renderBtn=function(){var e=t.props,r=e.curRoleBindInfo,i=(void 0===r?{}:r)[e.gameId]||{},o=i.gameRole,l=i.gameAcc;return o&&o.roleName?n.a.createElement("div",{className:"BindRoleBtn",__source:{fileName:N,lineNumber:128},__self:a},n.a.createElement("button",{type:"button",className:"BindRoleBtn-btn is-grey",onClick:t.handleBtnClick,__source:{fileName:N,lineNumber:129},__self:a},"\u5207\u6362\u89d2\u8272"),n.a.createElement("button",{type:"button",className:"BindRoleBtn-btn",onClick:t.handleBtnClick,__source:{fileName:N,lineNumber:134},__self:a},"\u5207\u6362\u8d26\u53f7")):l&&l.type?n.a.createElement("div",{className:"BindRoleBtn",__source:{fileName:N,lineNumber:146},__self:a},n.a.createElement("button",{type:"button",className:"BindRoleBtn-btn is-grey",onClick:t.handleBtnClick,__source:{fileName:N,lineNumber:147},__self:a},"\u7ed1\u5b9a\u89d2\u8272"),n.a.createElement("button",{type:"button",className:"BindRoleBtn-btn",onClick:t.handleBtnClick,__source:{fileName:N,lineNumber:152},__self:a},"\u5207\u6362\u8d26\u53f7")):n.a.createElement("div",{className:"BindRoleBtn",__source:{fileName:N,lineNumber:162},__self:a},n.a.createElement("button",{type:"button",className:"BindRoleBtn-btn",onClick:t.handleBtnClick,__source:{fileName:N,lineNumber:163},__self:a},"\u7ed1\u5b9a\u6e38\u620f\u8d26\u53f7"))},_possibleConstructorReturn(t,r)}return _inherits(BindRoleBtnV3,e),BindRoleBtnV3.prototype.componentDidMount=function componentDidMount(){var e=this;this.isLogin&&(this.propsMallService.getBindRoleInfo(this.props.gameId),this.pageVisSubscription=b.a.subscribe(function(r){r&&"visible"===r.visibilityState&&e.propsMallService.getBindRoleInfo(e.props.gameId)}))},BindRoleBtnV3.prototype.componentWillUnmount=function componentWillUnmount(){this.pageVisSubscription&&this.pageVisSubscription.unsubscribe()},BindRoleBtnV3.prototype.render=function render(){return n.a.createElement("div",{className:"BindRole",__source:{fileName:N,lineNumber:174},__self:this},n.a.createElement("div",{className:"BindRoleInfo",__source:{fileName:N,lineNumber:175},__self:this},this.renderInfo()),n.a.createElement("div",{className:"BindRoleBtnWrap",__source:{fileName:N,lineNumber:176},__self:this},this.renderBtn()))},BindRoleBtnV3}(n.a.Component),o=function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}(i.prototype,"propsMallService",[a],{enumerable:!0,initializer:null}),i);v.propTypes={curRoleBindInfo:c.a.object};r.default=Object(u.connect)(function mapStateToProps(e){return{curRoleBindInfo:e.propsMallData.curRoleBindInfo}})(v)},"81455d":function(e,r,t){},"8f167a":function(e,r,t){"use strict";var a=t("ff182a");r.default=a.default},916669:function(e,r,t){},"9240e6":function(e,r,t){"use strict";var a,i,o,l,n,s,c,u=t("1a22b7"),m=t.n(u),p=t("eb3e22"),f=t("7ca7dc"),d=t("97a1f0"),_=t("db47a7"),h=t("722b8a"),b=t("2b8ab7"),g=t("7a2652"),N=t("ad297f"),v=(t("13152d"),Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}),y="/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/HistoryDialog/HistoryDialog.js";function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var D=Object(d.importObject)("live.utils.propsMallTools"),P=f.default.Service,O={3:"\u4ea4\u6613\u5b8c\u6210",2:"\u5df2\u4ed8\u6b3e",1:"\u5f85\u652f\u4ed8","-1":"\u5df2\u5173\u95ed","-2":"\u5df2\u5173\u95ed"},w=10,S=(a=Object(d.ErrorHandler)(m.a.createElement("div",{__source:{fileName:y,lineNumber:32},__self:void 0})),i=P(p.DataCenter.global),o=P(b.default),a((n=function(e){function HistoryDialog(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,HistoryDialog);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",s,t),_initDefineProp(t,"propsMallService",c,t),t.getNextPageHistory=function(){var e=t.state.curGameId;t.currentPage+=1,t.isDataLoaded||t.propsMallService.fetchHistoryByHist(t.hist,e,"",t.currentPage,w).subscribe(function(e){t.setState({isLoading:!1});var r=1===t.currentPage&&0===t.hist?e:[].concat(t.state.historyList,e);t.setState({historyList:r},function(){e.length>0&&t.checkCanScroll()}),0===t.hist&&0===e.length&&(t.hist=1,t.currentPage=0,t.getNextPageHistory()),1===t.hist&&0===e.length&&(t.isDataLoaded=!0)})},t.checkCanScroll=function(){var e=t.listRef.current;e&&e.scrollHeight<=e.clientHeight&&t.getNextPageHistory()},t.handleClickGameTabItem=function(e){e!==t.state.curGameId&&t.setState({curGameId:e},function(){t.hist=0,t.currentPage=0,t.isDataLoaded=!1,t.getNextPageHistory()})},t.handleCloseDialog=function(){t.propsMallService.hideHistoryDialog()},t.handleOpenMall=function(e){t.propsMallService.openMallDialog(e)},t.handleOpenOrderDetail=function(e){t.propsMallService.showOrderDetailBySerial(e.sBizCode,e.sSerialNum)},t.handleClickPay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("[object Object]"===Object.prototype.toString.apply(e)){var r=t.state.curGameId,a=e.sAttach,i=void 0===a?{}:a;t.handleCloseDialog(),t.propsMallService.showOrderDialog(v({iActionId:e.iActionId,gameId:r,sSource:e.sSource,from:8},i))}},t.handleCancelOrder=function(e){t.propsMallService.cancelOrder(e.sBizCode,e.sSerialNum).subscribe(function(r){if(0!==r.error)h.default.info(r.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5");else{h.default.info("\u64cd\u4f5c\u6210\u529f");var a=t.state.historyList.map(function(r){return r.sSerialNum===e.sSerialNum?v({},r,{iStatus:-2}):r});t.setState({historyList:a})}})},t.state={curGameId:"",gameList:[],historyList:[],isLoading:!1},t.hist=0,t.currentPage=0,t.listRef=m.a.createRef(),t.isDataLoaded=!1,t}return _inherits(HistoryDialog,e),HistoryDialog.prototype.componentDidMount=function componentDidMount(){var e=this;this.propsMallService.getMyGameList().subscribe(function(r){if(r[0]&&r[0].gameId){var t=r[0].gameId;e.setState({curGameId:t,gameList:r}),e.setState({isLoading:!0}),e.getNextPageHistory(),D.handlePagenation({el:e.listRef.current,handleChange:e.getNextPageHistory})}}),Object(_.dysub2)({action_code:"100100238",event_id:2,type:1,ext:{_url_source:2}})},HistoryDialog.prototype.render=function render(){var e=this,r=this.state,t=r.curGameId,a=r.gameList,i=r.isLoading,o=r.historyList;return m.a.createElement("div",{className:"HistoryDialog",__source:{fileName:y,lineNumber:253},__self:this},m.a.createElement("div",{className:"HistoryDialog-panel",__source:{fileName:y,lineNumber:254},__self:this},m.a.createElement("div",{className:"HistoryDialog-titleBg",__source:{fileName:y,lineNumber:255},__self:this},"\u4ea4\u6613\u8ba2\u5355"),m.a.createElement("div",{className:"HistoryDialog-close",onClick:this.handleCloseDialog,__source:{fileName:y,lineNumber:256},__self:this}),m.a.createElement("div",{className:"HistoryDialog-cateTab",__source:{fileName:y,lineNumber:260},__self:this},m.a.createElement("div",{className:"HistoryDialog-cateTabList",__source:{fileName:y,lineNumber:261},__self:this},a.map(function(r,a){return m.a.createElement("div",{className:"HistoryDialog-cateTabItem "+(r.gameId===t?"is-active":""),onClick:e.handleClickGameTabItem.bind(e,r.gameId),key:a,__source:{fileName:y,lineNumber:263},__self:e},m.a.createElement("span",{__source:{fileName:y,lineNumber:275},__self:e},r.gameName))}))),m.a.createElement("div",{className:"HistoryDialog-table",__source:{fileName:y,lineNumber:280},__self:this},m.a.createElement("div",{className:"HistoryDialog-th",__source:{fileName:y,lineNumber:281},__self:this},m.a.createElement("div",{className:"order",__source:{fileName:y,lineNumber:282},__self:this},"\u8ba2\u5355"),m.a.createElement("div",{className:"num",__source:{fileName:y,lineNumber:284},__self:this},"\u6570\u91cf"),m.a.createElement("div",{className:"prize",__source:{fileName:y,lineNumber:285},__self:this},"\u91d1\u989d"),m.a.createElement("div",{className:"status",__source:{fileName:y,lineNumber:286},__self:this},"\u72b6\u6001"),m.a.createElement("div",{className:"opration",__source:{fileName:y,lineNumber:287},__self:this},"\u64cd\u4f5c")),m.a.createElement("div",{className:"HistoryDialog-tbody",ref:this.listRef,__source:{fileName:y,lineNumber:289},__self:this},o.map(function(r,t){var a=r.sAttach;return m.a.createElement("div",{className:"HistoryDialog-tr",key:t,__source:{fileName:y,lineNumber:294},__self:e},m.a.createElement("div",{className:"order tr-block",__source:{fileName:y,lineNumber:298},__self:e},m.a.createElement("img",{className:"orderPic",src:a.sGoodsPic2||D.getDefaultPic(),__source:{fileName:y,lineNumber:299},__self:e}),m.a.createElement("div",{className:"name",__source:{fileName:y,lineNumber:306},__self:e},a.sGoodsName)),m.a.createElement("div",{className:"num tr-block",__source:{fileName:y,lineNumber:313},__self:e},"1"),m.a.createElement("div",{className:"prize tr-block",__source:{fileName:y,lineNumber:314},__self:e},D.getPrice(r.iPrice,a.currPayType),a.couponName||""),m.a.createElement("div",{className:"status tr-block",__source:{fileName:y,lineNumber:320},__self:e},O[r.iStatus]),m.a.createElement("div",{className:"opration tr-block",__source:{fileName:y,lineNumber:323},__self:e},1===+r.iStatus?m.a.createElement(m.a.Fragment,{__source:{fileName:y,lineNumber:325},__self:e},m.a.createElement("div",{className:"pay",onClick:e.handleOpenOrderDetail.bind(e,r),__source:{fileName:y,lineNumber:326},__self:e},"\u7acb\u5373\u652f\u4ed8")):m.a.createElement("div",{className:"detail",onClick:e.handleOpenOrderDetail.bind(e,r),__source:{fileName:y,lineNumber:339},__self:e},"\u4ea4\u6613\u8be6\u60c5")))})),0===o.length&&!i&&m.a.createElement("div",{className:"HistoryDialog-emptyWrap",__source:{fileName:y,lineNumber:355},__self:this},m.a.createElement(g.default,{__source:{fileName:y,lineNumber:356},__self:this}))),i&&m.a.createElement(N.default,{__source:{fileName:y,lineNumber:360},__self:this})))},HistoryDialog}(m.a.Component),s=_applyDecoratedDescriptor(n.prototype,"global",[i],{enumerable:!0,initializer:null}),c=_applyDecoratedDescriptor(n.prototype,"propsMallService",[o],{enumerable:!0,initializer:null}),l=n))||l);S.propTypes={},r.default=S},"93e635":function(e,r,t){"use strict";t.d(r,"default",function(){return PropsList});var a=t("1a22b7"),i=t.n(a),o=t("97a1f0"),l=t("c6a807"),n=t("db47a7"),s=t("2f40d3"),c=t("2b8ab7"),u=(t("916669"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/components/PropsList.js"),m=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},p=Object(o.importObject)("live.utils.propsMallTools");function PropsList(e){var r=this,t=e.list,a=void 0===t?[]:t,o=e.lineNum,f=void 0===o?4:o,d=e.subParams,_=void 0===d?{}:d,h=e.from,b=Object(l.useService)(c.default);return i.a.createElement("div",{className:"PropsList",__source:{fileName:u,lineNumber:51},__self:this},a.map(function(e,t){var a=p.translatePrize(e.iPrice),o=p.translatePrize(e.iOrgPrice);return i.a.createElement("div",{className:"PropsList-item limit-"+f,key:t,onClick:function onClick(){!function handleClickItem(e){Object(n.dysub2)(m({action_code:"100100232001",event_id:1,type:1},_,{ext:m({},_.ext,{_out_goods_id:e.iGoodsId})})),b.showOrderDialog(m({},e,{from:h}))}(e)},title:e.sGoodsName,__source:{fileName:u,lineNumber:57},__self:r},i.a.createElement("div",{className:"PropsList-picWrap",__source:{fileName:u,lineNumber:58},__self:r},e.tag&&i.a.createElement("div",{className:"PropsList-tag",__source:{fileName:u,lineNumber:59},__self:r},e.tag),i.a.createElement(s.default,{offsetVertical:0,className:"PropsList-picLazyLoad",onContentVisible:function subShowPoint(e){Object(n.dysub2)(m({action_code:"100100232001",event_id:3,type:1},_,{ext:m({},_.ext,{_out_goods_id:e.iGoodsId})}))}.bind(r,e),__source:{fileName:u,lineNumber:62},__self:r},i.a.createElement("div",{className:"PropsList-pic",style:{backgroundImage:"url("+(e.sGoodsPic2||p.getDefaultPic())+")"},__source:{fileName:u,lineNumber:67},__self:r}))),i.a.createElement("div",{className:"PropsList-name",__source:{fileName:u,lineNumber:70},__self:r},e.sGoodsName),i.a.createElement("div",{className:"PropsList-prize "+(+e.iOrgPrice>+e.iPrice?"is-showOrgPrice":""),__source:{fileName:u,lineNumber:71},__self:r},a),+e.iOrgPrice>+e.iPrice&&i.a.createElement("span",{className:"PropsList-originalPrize",__source:{fileName:u,lineNumber:74},__self:r},o),i.a.createElement("div",{className:"PropsList-buyIcon",__source:{fileName:u,lineNumber:77},__self:r},"\u4e70"))}))}},"9dcaf9":function(e,r,t){},a36bfd:function(e,r,t){},ad297f:function(e,r,t){"use strict";t.d(r,"default",function(){return Loading});var a=t("1a22b7"),i=t.n(a),o=(t("a36bfd"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/components/Loading.js");function Loading(){return i.a.createElement("div",{className:"PropsMallLoading",__source:{fileName:o,lineNumber:5},__self:this},i.a.createElement("div",{className:"PropsMallLoading-text",__source:{fileName:o,lineNumber:6},__self:this},"\u52a0\u8f7d\u4e2d..."))}},b122a6:function(e,r,t){"use strict";var a=t("b34961");r.default=a.default},b34961:function(e,r,t){"use strict";var a,i,o,l,n,s,c,u,m,p=t("1a22b7"),f=t.n(p),d=t("292183"),_=t.n(d),h=t("447d8e"),b=t("eb3e22"),g=t("7ca7dc"),N=t("97a1f0"),v=t("fc7947"),y=t.n(v),D=t("db47a7"),P=t("93e635"),O=t("7a2652"),w=t("2b8ab7"),S=(t("2e21b8"),Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}),M="/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/PropsMallMainDialog/PropsMallMainDialog.js";function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var E=g.default.Service,C=Object(N.importObject)("live.utils.propsMallTools"),R=(a=Object(N.ErrorHandler)(f.a.createElement("div",{__source:{fileName:M,lineNumber:24},__self:void 0})),i=E(b.DataCenter.global),o=E(b.DataCenter.common),l=E(w.default),a((s=function(e){function PropsMallDialog(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PropsMallDialog);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",c,t),_initDefineProp(t,"common",u,t),_initDefineProp(t,"propsMallService",m,t),t.fetchTotalList=function(e){t.currentPage=1,t.propsMallService.fetchMallList(t.roomId,e,t.currentPage),t.propsMallService.fetchHotList(t.roomId,e).subscribe(function(e){t.setState({hotList:e.slice(0,4),showMoreHot:!0})})},t.showMoreHot=function(){t.setState({showMoreHot:!0})},t.showMoreAnchorRecommend=function(){t.setState({showMoreAnchorRecommend:!0})},t.handleClickGameTabItem=function(e){e!==t.state.curGameId&&t.setState({curGameId:e},function(){var r=t.contentWrapRef.current;r&&(r.scrollTop=0),t.propsMallService.getGameStatus(e),t.fetchTotalList(e)})},t.handleToggleTagFold=function(){t.setState({tagFold:!t.state.tagFold})},t.handleCloseDialog=function(){t.propsMallService.hideMallDialog()},t.handleClickHistoryEntry=function(){y.a.check()?t.propsMallService.showHistoryDialog():y.a.show()},t.listIsEmpty=function(e){return!Array.isArray(e)||0===e.length},t.state={gameList:[],curGameId:0,showMoreHot:!1,showMoreAnchorRecommend:!1,hotList:[]},t.contentWrapRef=f.a.createRef(),t.currentPage=1,t}return _inherits(PropsMallDialog,e),PropsMallDialog.prototype.componentDidMount=function componentDidMount(){var e=this;this.roomId=this.global.get("$ROOM.room_id"),this.common.get("$DATA").subscribe(function(r){var t=r.get("room.owner_name"),a=e.props.mallData;e.setState({ownerName:t}),e.rid=r.get("room.room_id"),e.cid2=r.get("room.cate_id"),Object(D.dysub2)({action_code:"100100232",event_id:2,type:1,tid:e.cid2,r:e.rid,ext:{_url_source:a.from}})}),this.common.get("$ROLE_BARRAGE_SWITCH").subscribe(function(r){var t=r.propMallInfo;if(t&&1===t.isShowPropMall){var a=t.gameList,i=(a[0]||{}).gameId;e.setState({gameList:a,curGameId:i}),e.propsMallService.getGameStatus(i),e.fetchTotalList(i),C.handlePagenation({el:e.contentWrapRef&&e.contentWrapRef.current,handleChange:function handleChange(){var r=e.props.mallListReachBottom,t=e.state.curGameId;r||e.propsMallService.fetchMallList(e.roomId,t,e.currentPage)}})}})},PropsMallDialog.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var r=this.state.curGameId;e.mallList[r]!==this.props.mallList[r]&&(this.currentPage+=1)},PropsMallDialog.prototype.render=function render(){var e=this,r=this.state,t=r.gameList,a=r.curGameId,i=r.ownerName,o=r.hotList,l=r.showMoreAnchorRecommend,n=r.showMoreHot,s=this.props,c=s.mallList,u=s.anchorRecommandList,m=s.mallData,p=u[a]||[],d={tid:this.cid2,r:this.rid},_=this.listIsEmpty(o)&&this.listIsEmpty(p)&&this.listIsEmpty(c[a]);return f.a.createElement("div",{className:"PropsMallDialog",__source:{fileName:M,lineNumber:231},__self:this},f.a.createElement("div",{className:"PropsMallDialog-panel",__source:{fileName:M,lineNumber:232},__self:this},f.a.createElement("div",{className:"PropsMallDialog-titleArea",__source:{fileName:M,lineNumber:233},__self:this},f.a.createElement("div",{className:"PropsMallDialog-title",__source:{fileName:M,lineNumber:234},__self:this},f.a.createElement("span",{className:"PropsMallDialog-titleText",__source:{fileName:M,lineNumber:235},__self:this}),f.a.createElement("span",{className:"PropsMallDialog-titleAnchorName",__source:{fileName:M,lineNumber:236},__self:this},i||"\u4e3b\u64ad"),f.a.createElement("span",{className:"PropsMallDialog-titleText",__source:{fileName:M,lineNumber:237},__self:this},"\u7684\u9053\u5177\u5546\u57ce")),f.a.createElement("a",{className:"PropsMallDialog-questionIcon",target:"_blank",href:"https://www.douyu.com/cms/gong/202011/17/17057.shtml",__source:{fileName:M,lineNumber:239},__self:this}),f.a.createElement("div",{className:"PropsMallDialog-historyEntry",onClick:this.handleClickHistoryEntry,__source:{fileName:M,lineNumber:240},__self:this},"\u5386\u53f2\u8ba2\u5355"),f.a.createElement("div",{className:"PropsMallDialog-close",onClick:this.handleCloseDialog,__source:{fileName:M,lineNumber:241},__self:this})),f.a.createElement("div",{className:"PropsMallDialog-cateTab",__source:{fileName:M,lineNumber:243},__self:this},f.a.createElement("div",{className:"PropsMallDialog-cateTabList",__source:{fileName:M,lineNumber:244},__self:this},t.map(function(r,t){return f.a.createElement("div",{className:"PropsMallDialog-cateTabItem "+(r.gameId===a?"is-active":""),onClick:e.handleClickGameTabItem.bind(e,r.gameId),key:t,__source:{fileName:M,lineNumber:247},__self:e},f.a.createElement("span",{__source:{fileName:M,lineNumber:252},__self:e},r.gameName))}))),f.a.createElement("div",{className:"PropsMallDialog-contentWrap",ref:this.contentWrapRef,__source:{fileName:M,lineNumber:258},__self:this},Array.isArray(o)&&o.length>0&&f.a.createElement("div",{className:"PropsMallDialog-hot",__source:{fileName:M,lineNumber:279},__self:this},f.a.createElement("div",{className:"PropsMallDialog-hotTitle",__source:{fileName:M,lineNumber:280},__self:this},"\u7206\u6b3e\u63a8\u8350"),f.a.createElement("div",{className:"PropsMallDialog-hotList",__source:{fileName:M,lineNumber:281},__self:this},f.a.createElement(P.default,{list:n?o:o.slice(0,4),lineNum:4,subParams:S({},d,{ext:{_com_type:"\u7206\u6b3e\u63a8\u8350",_url_source:m.from}}),from:7,__source:{fileName:M,lineNumber:282},__self:this})),!n&&f.a.createElement("div",{className:"PropsMallDialog-showMore",onClick:this.showMoreHot,__source:{fileName:M,lineNumber:291},__self:this},f.a.createElement("span",{className:"PropsMallDialog-showMoreText",__source:{fileName:M,lineNumber:292},__self:this},"\u5c55\u793a\u66f4\u591a"),f.a.createElement("i",{className:"PropsMallDialog-showMoreText icon",__source:{fileName:M,lineNumber:293},__self:this}))),Array.isArray(p)&&p.length>0&&f.a.createElement("div",{className:"PropsMallDialog-anchor",__source:{fileName:M,lineNumber:300},__self:this},f.a.createElement("div",{className:"PropsMallDialog-anchorTitle",__source:{fileName:M,lineNumber:301},__self:this},"\u4e3b\u64ad\u63a8\u8350"),f.a.createElement("div",{className:"PropsMallDialog-anchorList",__source:{fileName:M,lineNumber:302},__self:this},f.a.createElement(P.default,{list:l?p.slice(0,12):p.slice(0,8),lineNum:4,subParams:S({},d,{ext:{_com_type:"\u4e3b\u64ad\u63a8\u8350",_url_source:m.from}}),from:7,__source:{fileName:M,lineNumber:303},__self:this})),!l&&p.length>8&&f.a.createElement("div",{className:"PropsMallDialog-showMore",onClick:this.showMoreAnchorRecommend,__source:{fileName:M,lineNumber:314},__self:this},f.a.createElement("span",{className:"PropsMallDialog-showMoreText",__source:{fileName:M,lineNumber:315},__self:this},"\u5c55\u793a\u66f4\u591a"),f.a.createElement("i",{className:"PropsMallDialog-showMoreText icon",__source:{fileName:M,lineNumber:316},__self:this}))),Array.isArray(c[a])&&c[a].length>0&&f.a.createElement("div",{className:"PropsMallDialog-all",__source:{fileName:M,lineNumber:323},__self:this},f.a.createElement("div",{className:"PropsMallDialog-anchorTitle",__source:{fileName:M,lineNumber:324},__self:this},"\u5168\u90e8\u5546\u54c1"),f.a.createElement("div",{className:"PropsMallDialog-anchorList",__source:{fileName:M,lineNumber:325},__self:this},f.a.createElement(P.default,{list:c[a],lineNum:4,from:7,subParams:S({},d,{ext:{_com_type:"\u5168\u90e8\u5546\u54c1",_url_source:m.from}}),__source:{fileName:M,lineNumber:326},__self:this}))),_&&f.a.createElement(O.default,{__source:{fileName:M,lineNumber:334},__self:this}))))},PropsMallDialog}(f.a.Component),c=_applyDecoratedDescriptor(s.prototype,"global",[i],{enumerable:!0,initializer:null}),u=_applyDecoratedDescriptor(s.prototype,"common",[o],{enumerable:!0,initializer:null}),m=_applyDecoratedDescriptor(s.prototype,"propsMallService",[l],{enumerable:!0,initializer:null}),n=s))||n);R.propTypes={mallList:_.a.object,anchorRecommandList:_.a.object};r.default=Object(h.connect)(function mapStateToProps(e){var r=e.propsMallData,t=void 0===r?{}:r;return{mallList:t.mallList,mallData:t.mainMallData,mallListReachBottom:t.mallListReachBottom,anchorRecommandList:t.anchorRecommandList}})(R)},d50fef:function(e,r,t){"use strict";var a=t("d6ceb8");r.default=a.default},d6ceb8:function(e,r,t){"use strict";var a,i,o,l,n,s=t("1a22b7"),c=t.n(s),u=t("292183"),m=t.n(u),p=t("447d8e"),f=t("eb3e22"),d=t("7ca7dc"),_=t("93e635"),h=t("2b8ab7"),b=(t("eb79f5"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/PropsMallRecommandDialog/PropsMallRecommandDialog.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var g=d.default.Service,N=(a=g(f.DataCenter.global),i=g(h.default),o=function(e){function PropsMallRecommandDialog(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PropsMallRecommandDialog);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",l,t),_initDefineProp(t,"propsMallService",n,t),t.handleCloseDialog=function(){t.propsMallService.hideRecommandDialog()},t.state={list:[]},t}return _inherits(PropsMallRecommandDialog,e),PropsMallRecommandDialog.prototype.componentDidMount=function componentDidMount(){var e=Array(10).fill({pic:"",originalPrize:"\xa5199.0",prize:"\xa5100.0",name:"\u5546\u54c1\u540d\u79f0"});this.setState({list:e})},PropsMallRecommandDialog.prototype.render=function render(){var e=this.state.list;return c.a.createElement("div",{className:"PropsMallRecommandDialog",__source:{fileName:b,lineNumber:48},__self:this},c.a.createElement("div",{className:"PropsMallRecommandDialog-panel",__source:{fileName:b,lineNumber:49},__self:this},c.a.createElement("div",{className:"PropsMallRecommandDialog-titleBg",__source:{fileName:b,lineNumber:50},__self:this},c.a.createElement("div",{className:"PropsMallRecommandDialog-close",onClick:this.handleCloseDialog,__source:{fileName:b,lineNumber:51},__self:this})),c.a.createElement("div",{className:"PropsMallRecommandDialog-listWrap",__source:{fileName:b,lineNumber:53},__self:this},c.a.createElement(_.default,{lineNum:5,list:e,__source:{fileName:b,lineNumber:54},__self:this}))))},PropsMallRecommandDialog}(c.a.Component),l=_applyDecoratedDescriptor(o.prototype,"global",[a],{enumerable:!0,initializer:null}),n=_applyDecoratedDescriptor(o.prototype,"propsMallService",[i],{enumerable:!0,initializer:null}),o);N.propTypes={dialogShow:m.a.bool};r.default=Object(p.connect)(function mapStateToProps(e){var r=e.propsMallData;return{dialogShow:(void 0===r?{}:r).showRecommandDialog}})(N)},e16077:function(e,r,t){"use strict";var a,i,o,l,n,s=t("1a22b7"),c=t.n(s),u=t("722b8a"),m=t("ed7240"),p=t("7ca7dc"),f=t("eb3e22"),d=t("447d8e"),_=t("2b8ab7"),h=(t("f1ba19"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/components/PayBtn.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var b=p.default.Service,g=(a=b(_.default),i=b(f.DataCenter.global),o=function(e){function PayBtn(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PayBtn);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"propsMallService",l,t),_initDefineProp(t,"global",n,t),t.handleClickPay=function(){var e=t.props,r=e.propsData,a=e.curRoleBindInfo,i=e.couponName,o=e.currPayType,l=r.iActionId,n=r.iGoodsId,s=r.gameId,c=r.sGoodsName,m=r.sGoodsPic2,p=r.iCategoryId,f=r.sSource,d=r.realPrice,_=t.global.get("$ROOM.room_id"),h=a[s]||{},b=h.gameRole,g=void 0===b?{}:b,N=h.gameAcc,v=void 0===N?{}:N,y=g.areaName,D=g.partitionName,P=g.roleName;if(r.sSerialNum)t.payBySerial();else{var O={sGoodsName:c,sGoodsPic2:m,iGoodsId:n,iCategoryId:p,areaName:y,partitionName:D,roleName:P,accountType:v.type,currPayType:o,couponName:1===o?i:""};t.propsMallService.fetchPayInfo({iActionId:l,iGoodsId:n,roomId:f||_,gameId:s,attach:encodeURIComponent(JSON.stringify(O))},o).subscribe(function(e){if(0===+e.error)if(1===o)t.propsMallService.showPayRes("success");else{var a=e.data;if(1===+a.orderStatus)return void t.setState({modalVisible:!0,freezeSerial:a.serial,freezeName:a.goodsName});var i=a.payShareUrl||a.payRealurl;t.showPayDialog({gameId:s,serial:a.serial,payUrl:i,realPrice:d||r.iPrice})}else u.default.info(e.msg)})}},t.payBySerial=function(){var e=t.props.propsData,r=e.gameId||e.sBizCode,a=e.realPrice;t.propsMallService.payBySerial(r,e.sSerialNum).subscribe(function(i){if(1!==+i.orderStatus){var o=i.payShareUrl||i.payRealurl;o&&t.showPayDialog({gameId:r,serial:e.sSerialNum,payUrl:o,realPrice:a})}else u.default.info("\u60a8\u6709\u4e00\u7b14\u5f85\u652f\u4ed8\u7684\u8ba2\u5355\uff0c\u7ee7\u7eed\u652f\u4ed8/\u53d6\u6d88\u8ba2\u5355\u540e \u518d\u8d2d\u4e70\u5176\u4ed6\u5546\u54c1\u5427")})},t.onPayContinue=function(){var e=t.props.propsData,r=(void 0===e?{}:e).gameId,a=t.state.freezeSerial;t.propsMallService.hideOrderDialog(),t.propsMallService.showOrderDetailBySerial(r,a),t.closeModal()},t.onCancelOrder=function(){var e=t.props.propsData,r=(void 0===e?{}:e).gameId,a=t.state.freezeSerial;t.propsMallService.cancelOrder(r,a).subscribe(function(e){0===e.error?(t.closeModal(),u.default.info("\u64cd\u4f5c\u6210\u529f"),t.propsMallService.freshOrderDialog()):(t.closeModal(),u.default.info("\u8ba2\u5355\u53d6\u6d88\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u64cd\u4f5c"))})},t.closeModal=function(){t.setState({modalVisible:!1})},t.state={modalVisible:!1,freezeSerial:"",freezeName:""},t}return _inherits(PayBtn,e),PayBtn.prototype.showPayDialog=function showPayDialog(e){var r=e.gameId,t=e.serial,a=e.payUrl,i=e.realPrice;this.propsMallService.showPayDialog({serial:t,payUrl:a,gameId:r,realPrice:i})},PayBtn.prototype.render=function render(){var e=this.props.children,r=this.state,t=r.modalVisible,a=r.freezeName;return c.a.createElement("div",{className:"PayBtn",__source:{fileName:h,lineNumber:172},__self:this},c.a.createElement("div",{onClick:this.handleClickPay,__source:{fileName:h,lineNumber:173},__self:this},e),c.a.createElement(m.default,{className:"FreezeConfirm",visible:t,width:280,title:"\u60a8\u6709\u4e00\u7b14\u5f85\u652f\u4ed8\u8ba2\u5355",footer:c.a.createElement("div",{className:"FreezeConfirm-footer",__source:{fileName:h,lineNumber:181},__self:this},c.a.createElement("div",{className:"FreezeConfirm-btn FreezeConfirm-pay",onClick:this.onPayContinue,__source:{fileName:h,lineNumber:182},__self:this},"\u7ee7\u7eed\u652f\u4ed8"),c.a.createElement("div",{className:"FreezeConfirm-btn FreezeConfirm-cancel",onClick:this.onCancelOrder,__source:{fileName:h,lineNumber:183},__self:this},"\u53d6\u6d88\u8ba2\u5355")),onCancel:this.closeModal,maskClosable:!0,center:!0,__source:{fileName:h,lineNumber:176},__self:this},c.a.createElement("div",{className:"FreezeConfirm-content",__source:{fileName:h,lineNumber:189},__self:this},"\u9053\u5177\u540d\u79f0:",a),c.a.createElement("div",{className:"FreezeConfirm-tips",__source:{fileName:h,lineNumber:190},__self:this},"\u7ee7\u7eed\u652f\u4ed8/\u53d6\u6d88\u8ba2\u5355\u540e\u518d\u8d2d\u4e70\u5176\u4ed6\u5546\u54c1\u5427")))},PayBtn}(c.a.Component),l=_applyDecoratedDescriptor(o.prototype,"propsMallService",[a],{enumerable:!0,initializer:null}),n=_applyDecoratedDescriptor(o.prototype,"global",[i],{enumerable:!0,initializer:null}),o);r.default=Object(d.connect)(function mapStateToProps(e){return{curRoleBindInfo:e.propsMallData.curRoleBindInfo||{},couponName:e.propsMallData.couponName}})(g)},eb79f5:function(e,r,t){},ece04e:function(e,r,t){"use strict";var a=t("9240e6");r.default=a.default},f1ba19:function(e,r,t){},f75307:function(e,r,t){"use strict";var a,i,o,l,n,s,c,u,m=t("1a22b7"),p=t.n(m),f=t("3b6ec9"),d=t.n(f),_=t("292183"),h=t.n(_),b=t("447d8e"),g=t("eb3e22"),N=t("7ca7dc"),v=t("54992a"),y=t("b122a6"),D=t("d50fef"),P=t("7a8cad"),O=t("ece04e"),w=t("8f167a"),S=t("131156"),M=t("569931"),E=t("1a350c"),C=t("2b8ab7"),R=t("e854a7"),j=(t("810437"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/PropsMallDialog.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var I=N.default.Service,z=R.default.socketStream,k=(a=I(g.DataCenter.global),i=I(g.DataCenter.common),o=I(C.default),Object(v.log)((n=function(e){function PropsMallDialog(r){!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PropsMallDialog);var t=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(t,"global",s,t),_initDefineProp(t,"common",c,t),_initDefineProp(t,"propsMallService",u,t),t.listenSingleRecommandMsg=function(){z.subscribe("single_prop_recommend",function(e){t.propsMallService.showSingleEntry(e)}),z.subscribe("single_prop_recommend_cancel",function(e){var r=t.props.singleData;r&&r.iGoodsId===e.goods_id&&t.propsMallService.hideSingleEntry(e)})},t.state={isOpen:!1},t}return _inherits(PropsMallDialog,e),PropsMallDialog.prototype.componentDidMount=function componentDidMount(){var e=this,r=this.global.get("$ROOM.room_id");this.common.get("$ROLE_BARRAGE_SWITCH").subscribe(function(t){var a=t.propMallInfo;a&&1===a.isShowPropMall&&(e.setState({isOpen:!0}),e.propsMallService.shouldOpenMallDialog(),e.listenSingleRecommandMsg(),e.propsMallService.fetchSingleList(r))})},PropsMallDialog.prototype.render=function render(){var e=this.props,r=e.showMallDialog,t=e.showRecommandDialog,a=e.showOrderDialog,i=e.showHistoryDialog,o=e.showOrderDetail,l=e.showSingleEntry,n=e.showPayDialog,s=e.showMoreRecommendDialog;return this.state.isOpen?p.a.createElement(p.a.Fragment,{__source:{fileName:j,lineNumber:99},__self:this},l?d.a.createPortal(p.a.createElement(E.default,{__source:{fileName:j,lineNumber:100},__self:this}),document.getElementsByClassName("layout-Player-videoMain")[0]):null,t?d.a.createPortal(p.a.createElement(D.default,{__source:{fileName:j,lineNumber:101},__self:this}),document.body):null,r?p.a.createElement(y.default,{__source:{fileName:j,lineNumber:102},__self:this}):null,a?d.a.createPortal(p.a.createElement(P.default,{__source:{fileName:j,lineNumber:103},__self:this}),document.body):null,i?d.a.createPortal(p.a.createElement(O.default,{__source:{fileName:j,lineNumber:104},__self:this}),document.body):null,o?d.a.createPortal(p.a.createElement(w.default,{__source:{fileName:j,lineNumber:105},__self:this}),document.body):null,n?d.a.createPortal(p.a.createElement(S.default,{__source:{fileName:j,lineNumber:106},__self:this}),document.body):null,s?d.a.createPortal(p.a.createElement(M.default,{__source:{fileName:j,lineNumber:107},__self:this}),document.body):null):null},PropsMallDialog}(p.a.Component),s=_applyDecoratedDescriptor(n.prototype,"global",[a],{enumerable:!0,initializer:null}),c=_applyDecoratedDescriptor(n.prototype,"common",[i],{enumerable:!0,initializer:null}),u=_applyDecoratedDescriptor(n.prototype,"propsMallService",[o],{enumerable:!0,initializer:null}),l=n))||l);k.propTypes={showMallDialog:h.a.bool,showRecommandDialog:h.a.bool};r.default=Object(b.connect)(function mapStateToProps(e){return{showSingleEntry:e.propsMallData.showSingleEntry,singleData:e.propsMallData.singleData,showMallDialog:e.propsMallData.showMallDialog,showRecommandDialog:e.propsMallData.showRecommandDialog,showOrderDialog:e.propsMallData.showOrderDialog,showHistoryDialog:e.propsMallData.showHistoryDialog,showOrderDetail:e.propsMallData.showOrderDetail,showPayDialog:e.propsMallData.showPayDialog,showMoreRecommendDialog:e.propsMallData.showMoreRecommendDialog}})(k)},ff182a:function(e,r,t){"use strict";var a,i,o,l,n,s,c,u=t("1a22b7"),m=t.n(u),p=t("292183"),f=t.n(p),d=t("447d8e"),_=t("eb3e22"),h=t("7ca7dc"),b=t("97a1f0"),g=t("3c9879"),N=t.n(g),v=t("722b8a"),y=t("ed7240"),D=t("2b8ab7"),P=t("93e635"),O=t("e16077"),w=(t("81455d"),"/shark/live/src/pages/roomPage/playerDialogModule/components/PropsMallDialog/OrderDetail/OrderDetail.js");function _initDefineProp(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function _inherits(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var i=t[a],o=Object.getOwnPropertyDescriptor(r,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}(e,r))}function _applyDecoratedDescriptor(e,r,t,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,a){return a(e,r,t)||t},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}var S=Object(b.importObject)("live.utils.propsMallTools"),M=h.default.Service,E={3:"\u4ea4\u6613\u5b8c\u6210",2:"\u5df2\u4ed8\u6b3e",1:"\u5f85\u652f\u4ed8","-1":"\u5df2\u5173\u95ed","-2":"\u5df2\u5173\u95ed"},C=(a=Object(b.ErrorHandler)(m.a.createElement("div",{__source:{fileName:w,lineNumber:33},__self:void 0})),i=M(_.DataCenter.global),o=M(D.default),a((n=function(e){function OrderDetail(r){var t=this;!function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OrderDetail);var a=function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}(this,e.call(this,r));return _initDefineProp(a,"global",s,a),_initDefineProp(a,"propsMallService",c,a),a.handleCloseDialog=function(){a.propsMallService.hideOrderDetail()},a.handleClickMall=function(e){a.propsMallService.openMallDialog(e)},a.showCancelConfirm=function(){a.setState({cancelConfirmVisible:!0})},a.handleClickCancel=function(){var e=a.props.orderDetailData,r=e.sBizCode,t=e.sSerialNum;a.propsMallService.cancelOrder(r,t).subscribe(function(e){if(0===e.error)return v.default.info("\u64cd\u4f5c\u6210\u529f"),void a.propsMallService.showOrderDetailBySerial(r,t);v.default.info(e.msg||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})},a.renderCancelConfirm=function(){return m.a.createElement(y.default,{className:"CancelConfirm",visible:a.state.cancelConfirmVisible,width:340,title:"\u63d0\u793a",okText:"\u53d6\u6d88\u8ba2\u5355",cancelText:"\u518d\u60f3\u60f3",radiusStyle:!0,onOk:function onOk(){a.handleClickCancel(),a.setState({cancelConfirmVisible:!1})},onCancel:function onCancel(){a.setState({cancelConfirmVisible:!1})},maskClosable:!0,center:!0,__source:{fileName:w,lineNumber:96},__self:t},m.a.createElement("div",{className:"CancelConfirm-content",__source:{fileName:w,lineNumber:112},__self:t},"\u771f\u7684\u8981\u53d6\u6d88\u8ba2\u5355\u5417"))},a.state={recommendList:[],cancelConfirmVisible:!1},a}return _inherits(OrderDetail,e),OrderDetail.prototype.componentDidMount=function componentDidMount(){var e=this;this.roomId=this.global.get("$ROOM.room_id");var r=this.props.orderDetailData,t=r.sAttach.iGoodsId;this.propsMallService.fetchRandomList(this.roomId,r.sBizCode,11,t).subscribe(function(r){e.setState({recommendList:r.slice(0,10)})})},OrderDetail.prototype.render=function render(){var e=this.state.recommendList,r=this.props.orderDetailData,t=r.iPrice,a=r.dtBuyTime,i=r.sSerialNum,o=r.iValidSeconds,l=r.iCJiFenAmount,n=r.dtPayTime,s=r.sAttach,c=s.sGoodsName,u=s.areaName,p=s.partitionName,f=s.roleName,d=s.sGoodsPic2,_=s.accountType,h=s.couponName,b=void 0===h?"":h,g=s.currPayType,v=void 0===g?2:g,y=N()(a).valueOf()+1e3*o,D=N()(y).format("YYYY-MM-DD HH:mm:ss"),M=l||0,C=b||"";return m.a.createElement("div",{className:"OrderDetail",__source:{fileName:w,lineNumber:127},__self:this},m.a.createElement("div",{className:"OrderDetail-panel",__source:{fileName:w,lineNumber:128},__self:this},m.a.createElement("div",{className:"OrderDetail-titleBg",__source:{fileName:w,lineNumber:129},__self:this},"\u8ba2\u5355\u8be6\u60c5"),m.a.createElement("div",{className:"OrderDetail-close",onClick:this.handleCloseDialog,__source:{fileName:w,lineNumber:130},__self:this}),m.a.createElement("div",{className:"OrderDetail-content",__source:{fileName:w,lineNumber:131},__self:this},m.a.createElement("div",{className:"OrderDetail-statusArea",__source:{fileName:w,lineNumber:132},__self:this},m.a.createElement("div",{className:"OrderDetail-status",__source:{fileName:w,lineNumber:133},__self:this},E[r.iStatus]),1===+r.iStatus&&m.a.createElement("div",{className:"OrderDetail-statusTips",__source:{fileName:w,lineNumber:136},__self:this},"\u8ba2\u5355\u5c06\u5728",m.a.createElement("span",{__source:{fileName:w,lineNumber:136},__self:this},D),"\u81ea\u52a8\u5173\u95ed\uff0c\u8bf7\u5c3d\u5feb\u652f\u4ed8")),m.a.createElement("div",{className:"OrderDetail-titleArea",__source:{fileName:w,lineNumber:139},__self:this},m.a.createElement("div",{className:"icon order",__source:{fileName:w,lineNumber:140},__self:this}),m.a.createElement("div",{className:"text",__source:{fileName:w,lineNumber:141},__self:this},"\u8ba2\u5355")),m.a.createElement("div",{className:"OrderDetail-propsInfo",__source:{fileName:w,lineNumber:143},__self:this},m.a.createElement("div",{className:"order",__source:{fileName:w,lineNumber:144},__self:this},m.a.createElement("img",{src:d||S.getDefaultPic(),__source:{fileName:w,lineNumber:144},__self:this}),m.a.createElement("div",{className:"name",__source:{fileName:w,lineNumber:144},__self:this},c)),m.a.createElement("div",{className:"num",__source:{fileName:w,lineNumber:145},__self:this},"1"),m.a.createElement("div",{className:"prize",__source:{fileName:w,lineNumber:146},__self:this},m.a.createElement("div",{className:"realPrize",__source:{fileName:w,lineNumber:147},__self:this},"\u5e94\u4ed8\u6b3e\uff1a",S.getPrice(t-M,v),C),l>0&&m.a.createElement("div",{className:"jifen",__source:{fileName:w,lineNumber:148},__self:this},"\u79ef\u5206\u62b5\u6263\uff1a",S.translatePrize(l))),m.a.createElement("div",{className:"opration",__source:{fileName:w,lineNumber:150},__self:this},1===+r.iStatus&&m.a.createElement(m.a.Fragment,{__source:{fileName:w,lineNumber:152},__self:this},m.a.createElement("div",{className:"opration-btn",__source:{fileName:w,lineNumber:153},__self:this},m.a.createElement(O.default,{className:"pay",propsData:r,currPayType:v,__source:{fileName:w,lineNumber:154},__self:this},m.a.createElement("div",{className:"pay",__source:{fileName:w,lineNumber:155},__self:this},"\u7acb\u5373\u652f\u4ed8"))),m.a.createElement("div",{className:"cancel opration-btn",onClick:this.showCancelConfirm,__source:{fileName:w,lineNumber:158},__self:this},"\u53d6\u6d88\u8ba2\u5355")))),m.a.createElement("div",{className:"OrderDetail-titleArea",__source:{fileName:w,lineNumber:163},__self:this},m.a.createElement("div",{className:"icon account",__source:{fileName:w,lineNumber:164},__self:this}),m.a.createElement("div",{className:"text",__source:{fileName:w,lineNumber:165},__self:this},"\u5173\u8054\u7684\u6e38\u620f\u8d26\u53f7")),m.a.createElement("div",{className:"OrderDetail-accountInfo",__source:{fileName:w,lineNumber:167},__self:this},_&&m.a.createElement("div",{className:"OrderDetail-roleName",__source:{fileName:w,lineNumber:168},__self:this},"\u4eb2\u7231\u7684","qq"===_?"QQ":"\u5fae\u4fe1","\u7528\u6237"),m.a.createElement("div",{className:"OrderDetail-areaName",__source:{fileName:w,lineNumber:169},__self:this},p||u," ",f)),m.a.createElement("div",{className:"OrderDetail-titleArea",__source:{fileName:w,lineNumber:171},__self:this},m.a.createElement("div",{className:"icon moreInfo",__source:{fileName:w,lineNumber:172},__self:this}),m.a.createElement("div",{className:"text",__source:{fileName:w,lineNumber:173},__self:this},"\u8ba2\u5355\u4fe1\u606f")),m.a.createElement("div",{className:"OrderDetail-moreInfo",__source:{fileName:w,lineNumber:175},__self:this},m.a.createElement("div",{__source:{fileName:w,lineNumber:176},__self:this},"\u8ba2\u5355\u7f16\u53f7: ",i),m.a.createElement("div",{__source:{fileName:w,lineNumber:177},__self:this},"\u521b\u5efa\u65f6\u95f4\uff1a",a),+r.iStatus>=2&&m.a.createElement("div",{__source:{fileName:w,lineNumber:178},__self:this},"\u652f\u4ed8\u65f6\u95f4\uff1a",n)),m.a.createElement("div",{className:"OrderDetail-gotoKefu",__source:{fileName:w,lineNumber:180},__self:this},m.a.createElement("a",{className:"OrderDetail-gotoKefuLink",href:"https://kefu.douyu.com/nx/robot.html#/",target:"_blank",__source:{fileName:w,lineNumber:181},__self:this},"\u8054\u7cfb\u5ba2\u670d")),Array.isArray(e)&&e.length>0&&m.a.createElement(m.a.Fragment,{__source:{fileName:w,lineNumber:189},__self:this},m.a.createElement("div",{className:"OrderDetail-titleArea",__source:{fileName:w,lineNumber:190},__self:this},m.a.createElement("div",{className:"icon recommand",__source:{fileName:w,lineNumber:191},__self:this}),m.a.createElement("div",{className:"text",__source:{fileName:w,lineNumber:192},__self:this},"\u76f8\u5173\u63a8\u8350")),m.a.createElement("div",{className:"OrderDetail-recommandWrap",__source:{fileName:w,lineNumber:194},__self:this},m.a.createElement(P.default,{list:e,lineNum:5,__source:{fileName:w,lineNumber:195},__self:this}))))),this.renderCancelConfirm())},OrderDetail}(m.a.Component),s=_applyDecoratedDescriptor(n.prototype,"global",[i],{enumerable:!0,initializer:null}),c=_applyDecoratedDescriptor(n.prototype,"propsMallService",[o],{enumerable:!0,initializer:null}),l=n))||l);C.propTypes={orderDetailData:f.a.object};r.default=Object(d.connect)(function mapStateToProps(e){var r=e.propsMallData;return{orderDetailData:(void 0===r?{}:r).orderDetailData}})(C)}}]);
//# sourceMappingURL=http://sourcemap.douyucdn.cn:4567/room/online/sourcemaps/PropsMallDialog_7a9d965_15ee87b.js.map