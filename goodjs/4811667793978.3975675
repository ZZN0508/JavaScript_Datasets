!function(n){function o(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}var r={};o.m=n,o.c=r,o.p="/build/",o(0)}([function(e,t,n){n(1),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n,o=(n=Object(this)).length>>>0;if(0==o)return!1;for(var r,i,t=0|t,s=Math.max(0<=t?t:o-Math.abs(t),0);s<o;){if((r=n[s])===(i=e)||"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))return!0;s++}return!1}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n,o=Object(e),r=1;r<arguments.length;r++)if(null!=(n=arguments[r]))for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i]);return o},writable:!0,configurable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<n;){var i=t[r];if(e.call(o,i,r,t))return i;r++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<n;){var i=t[r];if(e.call(o,i,r,t))return r;r++}return-1},configurable:!0,writable:!0})},function(e,t,n){e.exports=n(2).polyfill()},function(t,n,o){var r;!function(M,V){var e,F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e=function(){function u(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<b;e+=2)(0,q[e])(q[e+1]),q[e]=void 0,q[e+1]=void 0;b=0}function c(e,t){var n=this,o=new this.constructor(l);void 0===o[N]&&y(o);var r,i=n._state;return i?(r=arguments[i-1],E(function(){return v(i,o,r,n._result)})):s(n,o,e,t),o}function p(e){if(e&&"object"===(void 0===e?"undefined":F(e))&&e.constructor===this)return e;var t=new this(l);return f(t,e),t}function l(){}function i(e,o,r){E(function(t){var n=!1,e=function(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}(r,o,function(e){n||(n=!0,(o!==e?f:h)(t,e))},function(e){n||(n=!0,m(t,e))},t._label);!n&&e&&(n=!0,m(t,e))},e)}function d(e,t,n){var o,r;t.constructor===e.constructor&&n===c&&t.constructor.resolve===p?(o=e,(r=t)._state===P?h(o,r._result):r._state===J?m(o,r._result):s(r,void 0,function(e){return f(o,e)},function(e){return m(o,e)})):void 0!==n&&u(n)?i(e,t,n):h(e,t)}function f(t,e){if(t===e)m(t,new TypeError("You cannot resolve a promise with itself"));else if(o=void 0===(n=e)?"undefined":F(n),null===n||"object"!==o&&"function"!==o)h(t,e);else{o=void 0;try{o=e.then}catch(e){return void m(t,e)}d(t,e,o)}var n,o}function o(e){e._onerror&&e._onerror(e._result),a(e)}function h(e,t){e._state===k&&(e._result=t,e._state=P,0!==e._subscribers.length&&E(a,e))}function m(e,t){e._state===k&&(e._state=J,e._result=t,E(o,e))}function s(e,t,n,o){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+P]=n,r[i+J]=o,0===i&&e._state&&E(a,e)}function a(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o,r=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],r=t[s+n],o?v(n,o,r,i):r(i);e._subscribers.length=0}}function v(e,t,n,o){var r=u(n),i=void 0,s=void 0,a=!0;if(r){try{i=n(o)}catch(e){a=!1,s=e}if(t===i)return void m(t,new TypeError("A promises callback cannot return that same promise."))}else i=o;t._state!==k||(r&&a?f(t,i):!1===a?m(t,s):e===P?h(t,i):e===J&&m(t,i))}function y(e){e[N]=j++,e._state=void 0,e._result=void 0,e._subscribers=[]}var e,r,_,g,w=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b=0,S=void 0,O=void 0,E=function(e,t){q[b]=e,q[b+1]=t,2===(b+=2)&&(O?O(n):C())},R="undefined"!=typeof window?window:void 0,A=R||{},T=A.MutationObserver||A.WebKitMutationObserver,x="undefined"==typeof self&&void 0!==M&&"[object process]"==={}.toString.call(M),A="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,q=new Array(1e3),C=void 0,C=x?function(){return M.nextTick(n)}:T?(r=0,_=new T(n),g=document.createTextNode(""),_.observe(g,{characterData:!0}),function(){g.data=r=++r%2}):A?((e=new MessageChannel).port1.onmessage=n,function(){return e.port2.postMessage(0)}):(void 0===R?function(){try{var e=Function("return this")().require("vertx");return void 0!==(S=e.runOnLoop||e.runOnContext)?function(){S(n)}:t()}catch(e){return t()}}:t)(),N=Math.random().toString(36).substring(2),k=void 0,P=1,J=2,j=0,I=(D.prototype._enumerate=function(e){for(var t=0;this._state===k&&t<e.length;t++)this._eachEntry(e[t],t)},D.prototype._eachEntry=function(t,e){var n,o=(n=this._instanceConstructor).resolve;if(o===p){var r,i=void 0,s=void 0,a=!1;try{i=t.then}catch(e){a=!0,s=e}i===c&&t._state!==k?this._settledAt(t._state,e,t._result):"function"!=typeof i?(this._remaining--,this._result[e]=t):n===L?(r=new n(l),a?m(r,s):d(r,t,i),this._willSettleAt(r,e)):this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(o(t),e)},D.prototype._settledAt=function(e,t,n){var o;(o=this.promise)._state===k&&(this._remaining--,e===J?m(o,n):this._result[t]=n),0===this._remaining&&h(o,this._result)},D.prototype._willSettleAt=function(e,t){var n=this;s(e,void 0,function(e){return n._settledAt(P,t,e)},function(e){return n._settledAt(J,t,e)})},D),L=(W.prototype.catch=function(e){return this.then(null,e)},W.prototype.finally=function(t){var n=this.constructor;return u(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},W);function W(e){this[N]=j++,this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof W?function(t,e){try{e(function(e){f(t,e)},function(e){m(t,e)})}catch(e){m(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function D(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[N]||y(this.promise),w(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):m(this.promise,new Error("Array Methods must be provided an Array"))}return L.prototype.then=c,L.all=function(e){return new I(this,e).promise},L.race=function(r){var i=this;return new i(w(r)?function(e,t){for(var n=r.length,o=0;o<n;o++)i.resolve(r[o]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},L.resolve=p,L.reject=function(e){var t=new this(l);return m(t,e),t},L._setScheduler=function(e){O=e},L._setAsap=function(e){E=e},L._asap=E,L.polyfill=function(){var e=void 0;if(void 0!==V)e=V;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=L},L.Promise=L},"object"===F(n)&&void 0!==t?t.exports=e():void 0!==(r="function"==typeof(r=e)?r.call(n,o,n,t):r)&&(t.exports=r)}.call(n,o(3),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function i(){f&&l&&(f=!1,l.length?d=l.concat(d):h=-1,d.length&&s())}function s(){if(!f){var e=r(i);f=!0;for(var t=d.length;t;){for(l=d,d=[];++h<t;)l&&l[h].run();h=-1,t=d.length}l=null,f=!1,function(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function u(){}var c,p,e=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(e){p=o}}();var l,d=[],f=!1,h=-1;e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new a(e,t)),1!==d.length||f||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=u,e.addListener=u,e.once=u,e.off=u,e.removeListener=u,e.removeAllListeners=u,e.emit=u,e.prependListener=u,e.prependOnceListener=u,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}}]),function(e){function t(e){Object.defineProperty(this,"val",{value:e.toString(),enumerable:!0}),this.gt=function(e){return 0<t.compare(this,e)},this.gte=function(e){return 0<=t.compare(this,e)},this.lt=function(e){return t.compare(this,e)<0},this.lte=function(e){return t.compare(this,e)<=0},this.eq=function(e){return 0===t.compare(this,e)}}e.env=e.env||{},t.prototype.toString=function(){return this.val},t.prototype.valueOf=function(){for(var e=this.val.split("."),t=[],n=0;n<e.length;n++){var o=parseInt(e[n],10),o=(o=isNaN(o)?0:o).toString();o.length<5&&(o=Array(6-o.length).join("0")+o),t.push(o),1===t.length&&t.push(".")}return parseFloat(t.join(""))},t.compare=function(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var o=parseInt(e[n],10),r=parseInt(t[n],10);if((o=window.isNaN(o)?0:o)<(r=window.isNaN(r)?0:r))return-1;if(r<o)return 1}return 0},e.version=function(e){return new t(e)}}((window,window.lib||(window.lib={}))),function(e,t){t.env=t.env||{};e=e.location.search.replace(/^\?/,"");if(t.env.params={},e)for(var n=e.split("&"),o=0;o<n.length;o++){n[o]=n[o].split("=");try{t.env.params[n[o][0]]=decodeURIComponent(n[o][1])}catch(e){t.env.params[n[o][0]]=n[o][1]}}}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,o=e.navigator.userAgent;(n=o.match(/Windows\sPhone\s(?:OS\s)?([\d\.]+)/))?t.env.os={name:"Windows Phone",isWindowsPhone:!0,version:n[1]}:o.match(/Safari/)&&(n=o.match(/Android[\s\/]([\d\.]+)/))?(t.env.os={version:n[1]},o.match(/Mobile\s+Safari/)?(t.env.os.name="Android",t.env.os.isAndroid=!0):(t.env.os.name="AndroidPad",t.env.os.isAndroidPad=!0)):(n=o.match(/(iPhone|iPad|iPod)/))&&(e=n[1],(n=o.match(/OS ([\d_\.]+) like Mac OS X/))&&(t.env.os={name:e,isIPhone:"iPhone"===e||"iPod"===e,isIPad:"iPad"===e,isIOS:!0,version:n[1].split("_").join(".")})),t.env.os||(t.env.os={name:"unknown",version:"0.0.0"}),t.version&&(t.env.os.version=t.version(t.env.os.version))}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n=e.navigator.userAgent;(e=n.match(/(?:UCWEB|UCBrowser\/)([\d\.]+)/))?t.env.browser={name:"UC",isUC:!0,version:e[1]}:(e=n.match(/MQQBrowser\/([\d\.]+)/))?t.env.browser={name:"QQ",isQQ:!0,version:e[1]}:(e=n.match(/(?:Firefox|FxiOS)\/([\d\.]+)/))?t.env.browser={name:"Firefox",isFirefox:!0,version:e[1]}:(e=n.match(/MSIE\s([\d\.]+)/))||(e=n.match(/IEMobile\/([\d\.]+)/))?(t.env.browser={version:e[1]},n.match(/IEMobile/)?(t.env.browser.name="IEMobile",t.env.browser.isIEMobile=!0):(t.env.browser.name="IE",t.env.browser.isIE=!0),n.match(/Android|iPhone/)&&(t.env.browser.isIELikeWebkit=!0)):(e=n.match(/(?:Chrome|CriOS)\/([\d\.]+)/))?(t.env.browser={name:"Chrome",isChrome:!0,version:e[1]},n.match(/Version\/[\d+\.]+\s*Chrome/)&&(t.env.browser.name="Chrome Webview",t.env.browser.isWebview=!0)):n.match(/Safari/)&&(e=n.match(/Android[\s\/]([\d\.]+)/))?t.env.browser={name:"Android",isAndroid:!0,version:e[1]}:n.match(/iPhone|iPad|iPod/)&&(n.match(/Safari/)&&(e=n.match(/Version\/([\d\.]+)/))?t.env.browser={name:"Safari",isSafari:!0,version:e[1]}:(e=n.match(/OS ([\d_\.]+) like Mac OS X/))&&(t.env.browser={name:"iOS Webview",isWebview:!0,version:e[1].replace(/\_/g,".")})),t.env.browser||(t.env.browser={name:"unknown",version:"0.0.0"}),t.version&&(t.env.browser.version=t.version(t.env.browser.version))}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};e=e.navigator.userAgent;e.match(/Weibo/i)?t.env.thirdapp={appname:"Weibo",isWeibo:!0}:e.match(/MicroMessenger/i)?t.env.thirdapp={appname:"Weixin",isWeixin:!0}:t.env.thirdapp=!1}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,o,r=e.navigator.userAgent;(o=r.match(/WindVane[\/\s]([\d\.\_]+)/))&&(n=o[1]);var i=!1,s="",a="",u="",c=e._ua_popLayer||"",p=!1,e="";(o=r.match(/AliApp\(([A-Z\-]+)\/([\d\.]+)\)/i))&&(i=!0,s=o[1],u=o[2],a=0<s.indexOf("-PD")?t.env.os.isIOS?"iPad":t.env.os.isAndroid?"AndroidPad":t.env.os.name:t.env.os.name),!s&&0<r.indexOf("TBIOS")&&(s="TB"),c&&(o=c.match(/PopLayer\/([\d\.]+)/i))&&(p=!0,e=o[1]),t.env.aliapp=!!i&&{windvane:t.version(n||"0.0.0"),appname:s||"unkown",version:t.version(u||"0.0.0"),platform:a||t.env.os.name,poplayer:p||!1,poplayerVersion:t.version(e||"0.0.0")},t.env.taobaoApp=t.env.aliapp}(window,window.lib||(window.lib={})),function(d,_){function g(){var n={},e=new a(function(e,t){n.resolve=e,n.reject=t});return n.promise=e,n}function o(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function f(e){var t,n=[];for(t in e)e[t]&&n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")}function u(e){function a(e,t){return e<<t|e>>>32-t}function u(e,t){var n=2147483648&e,o=2147483648&t,r=1073741824&e,i=1073741824&t,t=(1073741823&e)+(1073741823&t);return r&i?2147483648^t^n^o:r|i?1073741824&t?3221225472^t^n^o:1073741824^t^n^o:t^n^o}function t(e,t,n,o,r,i,s){return e=u(e,u(u(t&n|~t&o,r),s)),u(a(e,i),t)}function n(e,t,n,o,r,i,s){return e=u(e,u(u(t&o|n&~o,r),s)),u(a(e,i),t)}function o(e,t,n,o,r,i,s){return e=u(e,u(u(t^n^o,r),s)),u(a(e,i),t)}function r(e,t,n,o,r,i,s){return e=u(e,u(u(n^(t|~o),r),s)),u(a(e,i),t)}function i(e){for(var t="",n="",o=0;o<=3;o++)t+=(n="0"+(e>>>8*o&255).toString(16)).substr(n.length-2,2);return t}for(var s,c,p,l,d=function(e){for(var t,n=e.length,o=16*(1+((o=n+8)-o%64)/64),r=new Array(o-1),i=0,s=0;s<n;)i=s%4*8,r[t=(s-s%4)/4]=r[t]|e.charCodeAt(s)<<i,s++;return r[t=(s-s%4)/4]=r[t]|128<<(i=s%4*8),r[o-2]=n<<3,r[o-1]=n>>>29,r}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t}(e)),f=1732584193,h=4023233417,m=2562383102,v=271733878,y=0;y<d.length;y+=16)f=t(s=f,c=h,p=m,l=v,d[y+0],7,3614090360),v=t(v,f,h,m,d[y+1],12,3905402710),m=t(m,v,f,h,d[y+2],17,606105819),h=t(h,m,v,f,d[y+3],22,3250441966),f=t(f,h,m,v,d[y+4],7,4118548399),v=t(v,f,h,m,d[y+5],12,1200080426),m=t(m,v,f,h,d[y+6],17,2821735955),h=t(h,m,v,f,d[y+7],22,4249261313),f=t(f,h,m,v,d[y+8],7,1770035416),v=t(v,f,h,m,d[y+9],12,2336552879),m=t(m,v,f,h,d[y+10],17,4294925233),h=t(h,m,v,f,d[y+11],22,2304563134),f=t(f,h,m,v,d[y+12],7,1804603682),v=t(v,f,h,m,d[y+13],12,4254626195),m=t(m,v,f,h,d[y+14],17,2792965006),f=n(f,h=t(h,m,v,f,d[y+15],22,1236535329),m,v,d[y+1],5,4129170786),v=n(v,f,h,m,d[y+6],9,3225465664),m=n(m,v,f,h,d[y+11],14,643717713),h=n(h,m,v,f,d[y+0],20,3921069994),f=n(f,h,m,v,d[y+5],5,3593408605),v=n(v,f,h,m,d[y+10],9,38016083),m=n(m,v,f,h,d[y+15],14,3634488961),h=n(h,m,v,f,d[y+4],20,3889429448),f=n(f,h,m,v,d[y+9],5,568446438),v=n(v,f,h,m,d[y+14],9,3275163606),m=n(m,v,f,h,d[y+3],14,4107603335),h=n(h,m,v,f,d[y+8],20,1163531501),f=n(f,h,m,v,d[y+13],5,2850285829),v=n(v,f,h,m,d[y+2],9,4243563512),m=n(m,v,f,h,d[y+7],14,1735328473),f=o(f,h=n(h,m,v,f,d[y+12],20,2368359562),m,v,d[y+5],4,4294588738),v=o(v,f,h,m,d[y+8],11,2272392833),m=o(m,v,f,h,d[y+11],16,1839030562),h=o(h,m,v,f,d[y+14],23,4259657740),f=o(f,h,m,v,d[y+1],4,2763975236),v=o(v,f,h,m,d[y+4],11,1272893353),m=o(m,v,f,h,d[y+7],16,4139469664),h=o(h,m,v,f,d[y+10],23,3200236656),f=o(f,h,m,v,d[y+13],4,681279174),v=o(v,f,h,m,d[y+0],11,3936430074),m=o(m,v,f,h,d[y+3],16,3572445317),h=o(h,m,v,f,d[y+6],23,76029189),f=o(f,h,m,v,d[y+9],4,3654602809),v=o(v,f,h,m,d[y+12],11,3873151461),m=o(m,v,f,h,d[y+15],16,530742520),f=r(f,h=o(h,m,v,f,d[y+2],23,3299628645),m,v,d[y+0],6,4096336452),v=r(v,f,h,m,d[y+7],10,1126891415),m=r(m,v,f,h,d[y+14],15,2878612391),h=r(h,m,v,f,d[y+5],21,4237533241),f=r(f,h,m,v,d[y+12],6,1700485571),v=r(v,f,h,m,d[y+3],10,2399980690),m=r(m,v,f,h,d[y+10],15,4293915773),h=r(h,m,v,f,d[y+1],21,2240044497),f=r(f,h,m,v,d[y+8],6,1873313359),v=r(v,f,h,m,d[y+15],10,4264355552),m=r(m,v,f,h,d[y+6],15,2734768916),h=r(h,m,v,f,d[y+13],21,1309151649),f=r(f,h,m,v,d[y+4],6,4149444226),v=r(v,f,h,m,d[y+11],10,3174756917),m=r(m,v,f,h,d[y+2],15,718787259),h=r(h,m,v,f,d[y+9],21,3951481745),f=u(f,s),h=u(h,c),m=u(m,p),v=u(v,l);return(i(f)+i(h)+i(m)+i(v)).toLowerCase()}function i(e){return"[object Object]"=={}.toString.call(e)}function h(e){e=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return e?e[1]:void 0}function r(e,t,n){var o=new Date;o.setTime(o.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+o.toGMTString(),document.cookie=e+"=;path=/;domain=."+n+"."+t+";expires="+o.toGMTString()}function s(e){this.id=""+(new Date).getTime()+ ++v,this.params=o(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=n.slice(0)}var a=d.Promise,c=(a||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var e,t,p={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},n=[],l={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){(n=d.location.hostname)||(t=d.parent.location.hostname)&&~t.indexOf("zebra.alibaba-inc.com")&&(n=t);var e=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),t=n.match(e)||[],n=t[2]||"taobao.com",e=t[1]||"m";"taobao.net"!==n||"x"!==e&&"waptest"!==e&&"daily"!==e?"taobao.net"===n&&"demo"===e?e="demo":"alibaba-inc.com"===n&&"zebra"===e?e="zebra":"waptest"!==e&&"wapa"!==e&&"m"!==e&&(e="m"):e="waptest",t="taobao.net"===n&&"waptest"===e?"acs":"h5api",p.mainDomain=n,p.subDomain=e,p.prefix=t})(),e=d.navigator.userAgent,(t=e.match(/WindVane[\/\s]([\d\.\_]+)/))&&(p.WindVaneVersion=t[1]),(e=e.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i))&&(p.AliAppName=e[1],p.AliAppVersion=e[2]);var m="AP"===p.AliAppName&&10.1<=parseFloat(p.AliAppVersion);m&&10.1===parseFloat(p.AliAppVersion)&&parseInt(p.AliAppVersion.substr(5))<2&&(m=!1);var v=0;s.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},s.prototype.__processRequestMethod=function(e){var t=this.params,n=this.options;"get"===t.type&&"jsonp"===t.dataType?n.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?n.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?n.getJSON=!0:"post"===t.type&&(n.postJSON=!0),e()},s.prototype.__processRequestType=function(e){var t=this,n=this.params,o=this.options;if(!0===p.H5Request&&(o.H5Request=!0),!0===p.WindVaneRequest&&(o.WindVaneRequest=!0),!1===o.H5Request&&!0===o.WindVaneRequest){if(!m&&(!_.windvane||parseFloat(o.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::ç¼ºå°‘WindVaneçŽ¯å¢ƒ");if(m&&!d.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::æ”¯ä»˜å®é€šé“æœªå‡†å¤‡å¥½ï¼Œæ”¯ä»˜å®è¯·è§ https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===o.H5Request)o.WindVaneRequest=!1;else if(void 0===o.WindVaneRequest&&void 0===o.H5Request&&(_.windvane&&5.4<=parseFloat(o.WindVaneVersion)?(o.WindVaneRequest=!0,window.self!==window.top&&(o.H5Request=!0)):o.H5Request=!0,m))if(o.WindVaneRequest=o.H5Request=void 0,d.AlipayJSBridge)if(i(n.data))o.WindVaneRequest=!0;else try{i(JSON.parse(n.data))?o.WindVaneRequest=!0:o.H5Request=!0}catch(e){o.H5Request=!0}else o.H5Request=!0;var r=d.navigator.userAgent.toLowerCase();return-1<r.indexOf("youku")&&o.mainDomain.indexOf("youku.com")<0&&(o.WindVaneRequest=!1,o.H5Request=!0),-1<o.mainDomain.indexOf("youku.com")&&r.indexOf("youku")<0&&(o.WindVaneRequest=!1,o.H5Request=!0),e?e().then(function(){var e=o.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===o.WindVaneRequest&&m&&o.retJson.error||!e||-1<e.indexOf("PARAM_PARSE_ERROR")||-1<e.indexOf("HY_FAILED")||-1<e.indexOf("HY_NO_HANDLER")||-1<e.indexOf("HY_CLOSED")||-1<e.indexOf("HY_EXCEPTION")||-1<e.indexOf("HY_NO_PERMISSION")){if(!m||!isNaN(o.retJson.error)||-1!==o.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return m&&i(n.data)&&(n.data=JSON.stringify(n.data)),p.H5Request=!0,t.__sequence([t.__processRequestType,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]);void 0===o.retJson.api&&void 0===o.retJson.v&&(o.retJson.api=n.api,o.retJson.v=n.v,o.retJson.ret=[o.retJson.error+"::"+o.retJson.errorMessage],o.retJson.data={})}}):void 0};var y="_m_h5_c",w="_m_h5_tk";s.prototype.__getTokenFromAlipay=function(){var t=g(),n=this.options,e=(d.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===n.useAlipayJSBridge&&!e&&m&&d.AlipayJSBridge&&d.AlipayJSBridge.call?d.AlipayJSBridge.call("getMtopToken",function(e){e&&e.token&&(n.token=e.token),t.resolve()},function(){t.resolve()}):t.resolve(),t.promise},s.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&h(y)?e.token=h(y).split(";")[0]:e.token=e.token||h(w),e.token&&(e.token=e.token.split("_")[0]),a.resolve()},s.prototype.__waitWKWebViewCookie=function(e){var t=this.options;t.waitWKWebViewCookieFn&&t.H5Request&&d.webkit&&d.webkit.messageHandlers?t.waitWKWebViewCookieFn(e):e()},s.prototype.__processToken=function(e){var n=this,o=this.options;return this.params,o.token&&delete o.token,!0!==o.WindVaneRequest?c.then(function(){return n.__getTokenFromAlipay()}).then(function(){return n.__getTokenFromCookie()}).then(e).then(function(){var e=o.retJson,t=e.ret;if(-1<(t=t instanceof Array?t.join(","):t).indexOf("TOKEN_EMPTY")||(!0===o.CDR||!0===o.syncCookieMode)&&-1<t.indexOf("ILLEGAL_ACCESS")||-1<t.indexOf("TOKEN_EXOIRED")){if(o.maxRetryTimes=o.maxRetryTimes||5,o.failTimes=o.failTimes||0,o.H5Request&&++o.failTimes<o.maxRetryTimes){t=[n.__waitWKWebViewCookie,n.__processToken,n.__processRequestUrl,n.middlewares,n.__processRequest];return!0===o.syncCookieMode&&n.constructor.__cookieProcessorId!==n.id&&(n.constructor.__cookieProcessor?t=[function(e){function t(){n.constructor.__cookieProcessor=null,n.constructor.__cookieProcessorId=null,e()}n.constructor.__cookieProcessor?n.constructor.__cookieProcessor.then(t).catch(t):e()},n.__waitWKWebViewCookie,n.__processToken,n.__processRequestUrl,n.middlewares,n.__processRequest]:(n.constructor.__cookieProcessor=n.__requestProcessor,n.constructor.__cookieProcessorId=n.id)),n.__sequence(t)}0<o.maxRetryTimes&&(r(y,o.pageDomain,"*"),r(w,o.mainDomain,o.subDomain),r("_m_h5_tk_enc",o.mainDomain,o.subDomain)),e.retType=l.TOKEN_EXPIRED}}):void e()},s.prototype.__processRequestUrl=function(e){var t,n,o,r,i,s=this.params,a=this.options;a.hostSetting&&a.hostSetting[d.location.hostname]&&((o=a.hostSetting[d.location.hostname]).prefix&&(a.prefix=o.prefix),o.subDomain&&(a.subDomain=o.subDomain),o.mainDomain&&(a.mainDomain=o.mainDomain)),!0===a.H5Request&&(t="//"+(a.prefix?a.prefix+".":"")+(a.subDomain?a.subDomain+".":"")+a.mainDomain+"/h5/"+s.api.toLowerCase()+"/"+s.v.toLowerCase()+"/",n=s.appKey||("waptest"===a.subDomain?"4272":"12574478"),o=(new Date).getTime(),r={jsv:"2.5.1",appKey:n,t:o,sign:u(a.token+"&"+o+"&"+n+"&"+s.data)},i={data:s.data,ua:s.ua},Object.keys(s).forEach(function(e){void 0===r[e]&&void 0===i[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(r[e]=s[e])}),s.ext_querys&&Object.keys(s.ext_querys).forEach(function(e){r[e]=s.ext_querys[e]}),a.getJSONP?r.type="jsonp":a.getOriginalJSONP?r.type="originaljsonp":(a.getJSON||a.postJSON)&&(r.type="originaljson"),void 0!==s.valueType&&("original"===s.valueType?a.getJSONP||a.getOriginalJSONP?r.type="originaljsonp":(a.getJSON||a.postJSON)&&(r.type="originaljson"):"string"===s.valueType&&(a.getJSONP||a.getOriginalJSONP?r.type="jsonp":(a.getJSON||a.postJSON)&&(r.type="json"))),!0===a.useJsonpResultType&&"originaljson"===r.type&&delete r.type,a.dangerouslySetProtocol&&(t=a.dangerouslySetProtocol+":"+t),a.querystring=r,a.postdata=i,a.path=t),e()},s.prototype.__processUnitPrefix=function(e){e()};var b=0;s.prototype.__requestJSONP=function(e){function t(e){if(a&&clearTimeout(a),u.parentNode&&u.parentNode.removeChild(u),"TIMEOUT"===e)window[s]=function(){window[s]=void 0;try{delete window[s]}catch(e){}};else{window[s]=void 0;try{delete window[s]}catch(e){}}}var n=g(),o=this.params,r=this.options,i=o.timeout||2e4,s="mtopjsonp"+(o.jsonpIncPrefix||"")+ ++b,a=setTimeout(function(){e(r.timeoutErrMsg||"TIMEOUT::æŽ¥å£è¶…æ—¶"),t("TIMEOUT")},i);r.querystring.callback=s;var u=document.createElement("script");return u.src=r.path+"?"+f(r.querystring)+"&"+f(r.postdata),u.async=!0,u.onerror=function(){t("ABORT"),e(r.abortErrMsg||"ABORT::æŽ¥å£å¼‚å¸¸é€€å‡º")},window[s]=function(){r.results=Array.prototype.slice.call(arguments),t(),n.resolve()},i=u,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(i),n.promise},s.prototype.__requestJSON=function(n){function o(e){a&&clearTimeout(a),"TIMEOUT"===e&&s.abort()}var r=g(),e=this.params,i=this.options,s=new d.XMLHttpRequest,t=e.timeout||2e4,a=setTimeout(function(){n(i.timeoutErrMsg||"TIMEOUT::æŽ¥å£è¶…æ—¶"),o("TIMEOUT")},t);i.CDR&&h(y)&&(i.querystring.c=decodeURIComponent(h(y))),s.onreadystatechange=function(){if(4==s.readyState){var e,t=s.status;if(200<=t&&t<300||304==t){o(),e=s.responseText,t=s.getAllResponseHeaders()||"";try{(e=/^\s*$/.test(e)?{}:JSON.parse(e)).responseHeaders=t,i.results=[e],r.resolve()}catch(e){n("PARSE_JSON_ERROR::è§£æžJSONå¤±è´¥")}}else o("ABORT"),n(i.abortErrMsg||"ABORT::æŽ¥å£å¼‚å¸¸é€€å‡º")}};var u,c,t=i.path+"?"+f(i.querystring);i.getJSON?(u="GET",t+="&"+f(i.postdata)):i.postJSON&&(u="POST",c=f(i.postdata)),s.open(u,t,!0),s.withCredentials=!0,s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var p=e.ext_headers||e.headers;if(p)for(var l in p)s.setRequestHeader(l,p[l]);return s.send(c),r.promise},s.prototype.__requestWindVane=function(e){function t(e){r.results=[e],n.resolve()}var n=g(),o=this.params,r=this.options,i=o.data,s=o.api,a=o.v,u=r.postJSON?1:0,c=r.getJSON||r.postJSON||r.getOriginalJSONP?"originaljson":"";void 0!==o.valueType&&("original"===o.valueType?c="originaljson":"string"===o.valueType&&(c="")),!0===r.useJsonpResultType&&(c="");var p,l,d="https"===location.protocol?1:0,f=o.isSec||0,h=o.sessionOption||"AutoLoginOnly",m=o.ecode||0,v=o.ext_headers||{},y=o.ext_querys||{};v.referer=location.href,p=2*(l=void 0!==o.timer?parseInt(o.timer):void 0!==o.timeout?parseInt(o.timeout):2e4),!0===o.needLogin&&void 0===o.sessionOption&&(h="AutoLoginAndManualLogin"),void 0!==o.secType&&void 0===o.isSec&&(f=o.secType);y={api:s,v:a,post:String(u),type:c,isHttps:String(d),ecode:String(m),isSec:String(f),param:JSON.parse(i),timer:l,sessionOption:h,ext_headers:v,ext_querys:y};return o.ttid&&!0===r.dangerouslySetWVTtid&&(y.ttid=o.ttid),Object.assign&&o.dangerouslySetWindvaneParams&&Object.assign(y,o.dangerouslySetWindvaneParams),_.windvane.call("MtopWVPlugin","send",y,t,t,p),n.promise},s.prototype.__requestAlipay=function(e){var t=g(),n=this.params,o=this.options,r={apiName:n.api,apiVersion:n.v,needEcodeSign:"1"===String(n.ecode),usePost:!!o.postJSON};return i(n.data)||(n.data=JSON.parse(n.data)),r.data=n.data,n.ttid&&!0===o.dangerouslySetWVTtid&&(r.ttid=n.ttid),(o.getJSON||o.postJSON||o.getOriginalJSONP)&&(r.type="originaljson"),void 0!==n.valueType&&("original"===n.valueType?r.type="originaljson":"string"===n.valueType&&delete r.type),!0===o.useJsonpResultType&&delete r.type,Object.assign&&n.dangerouslySetAlipayParams&&Object.assign(r,n.dangerouslySetAlipayParams),d.AlipayJSBridge.call("mtop",r,function(e){o.results=[e],t.resolve()}),t.promise},s.prototype.__processRequest=function(e,t){var i=this;return c.then(function(){var e=i.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return i.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return i.__requestJSON(t);if(e.WindVaneRequest)return m?i.__requestAlipay(t):i.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::é”™è¯¯çš„è¯·æ±‚ç±»åž‹")}).then(e).then(function(){var e=i.options,t=(i.params,e.results[0]),n=t&&t.ret||[];(t.ret=n)instanceof Array&&(n=n.join(","));var o,r=t.c;e.CDR&&r&&(o=r,r=(r={domain:e.pageDomain,path:"/"})||{},document.cookie=y.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+o.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(r.domain?";domain="+r.domain:"")+(r.path?";path="+r.path:"")+(r.secure?";secure":"")+(r.httponly?";HttpOnly":"")),-1<n.indexOf("SUCCESS")?t.retType=l.SUCCESS:t.retType=l.ERROR,e.retJson=t})},s.prototype.__sequence=function(e){var i=this,s=[],a=[];e.forEach(function e(t){var n,o,r;t instanceof Array?t.forEach(e):(o=g(),r=g(),s.push(function(){return o=g(),n=(n=t.call(i,function(e){return o.resolve(e),r.promise},function(e){return o.reject(e),r.promise}))&&n.catch(function(e){o.reject(e)}),o.promise}),a.push(function(e){return r.resolve(e),n}))});for(var t,n=c;t=s.shift();)n=n.then(t);for(;t=a.pop();)n=n.then(t);return n};function S(e){e()}var O=function(e){e()};s.prototype.request=function(e){var n=this;if(this.options=o(e||{},p),!a){var t="å½“å‰æµè§ˆå™¨ä¸æ”¯æŒPromiseï¼Œè¯·åœ¨windowså¯¹è±¡ä¸ŠæŒ‚è½½Promiseå¯¹è±¡";throw _.mtop={ERROR:t},new Error(t)}t=a.resolve([O,S]).then(function(e){var t=e[0],e=e[1];return n.__sequence([t,n.__processRequestMethod,n.__processRequestType,n.__processToken,n.__processRequestUrl,n.middlewares,n.__processRequest,e])}).then(function(){var e=n.options.retJson;return e.retType!==l.SUCCESS?a.reject(e):n.options.successCallback?void n.options.successCallback(e):a.resolve(e)}).catch(function(e){e=e instanceof Error?(console.error(e.stack),{ret:[e.message],stack:[e.stack],retJson:l.ERROR}):"string"==typeof e?{ret:[e],retJson:l.ERROR}:void 0!==e?e:n.options.retJson;return _.mtop.errorListener&&_.mtop.errorListener({api:n.params.api,v:n.params.v,retJson:e}),n.options.failureCallback?void n.options.failureCallback(e):a.reject(e)});return this.__processRequestType(),n.options.H5Request&&(n.constructor.__firstProcessor||(n.constructor.__firstProcessor=t),O=function(e){n.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(e.pageDomain=e.pageDomain||function(t){try{return-1<t.toLowerCase().indexOf("lazada")&&".com"!==t.substring(t.lastIndexOf("."))?(t.split(".")||[]).length<=3?t:t.split(".").slice(1).join("."):t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)}catch(e){return t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)}}(d.location.hostname),e.mainDomain!==e.pageDomain&&(e.maxRetryTimes=4,e.CDR=!0)),this.__requestProcessor=t},_.mtop=function(e){return new s(e)},_.mtop.request=function(e,t,n){t={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:n||t};return new s(e).request(t)},_.mtop.H5Request=function(e,t,n){t={H5Request:!0,successCallback:t,failureCallback:n||t};return new s(e).request(t)},_.mtop.middlewares=n,_.mtop.config=p,_.mtop.RESPONSE_TYPE=l,_.mtop.CLASS=s}(window,window.lib||(window.lib={})),function(f,s){function u(e){return e.preventDefault(),!1}function h(e,t){var n=this,o=f.dpr||1,r=document.createElement("div"),i=document.documentElement.getBoundingClientRect(),s=Math.max(i.width,window.innerWidth)/o,a=Math.max(i.height,window.innerHeight)/o;r.style.cssText=["-webkit-transform:scale("+o+") translateZ(0)","-ms-transform:scale("+o+") translateZ(0)","transform:scale("+o+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+s+"px","height:"+a+"px","z-index:999999","position:"+(800<s?"fixed":"absolute"),"left:0","top:0px","background:"+(800<s?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");o=document.createElement("div");o.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),o.innerText=e;a=document.createElement("a");a.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),a.innerText="å…³é—­";e=document.createElement("iframe");e.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),800<s&&(o.style.cssText=["width:370px","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:"+(s/2-185)+"px","top:40px","font-size:16px","font-weight:bold","color:#333"].join(";"),e.style.cssText=["position:absolute","top:92px","left:"+(s/2-185)+"px","width:370px","height:480px","border:0","background:#FFF","overflow:hidden"].join(";")),o.appendChild(a),r.appendChild(o),r.appendChild(e),r.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(r),e.src=t,a.addEventListener("click",function(){n.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),r.dispatchEvent(e)},!1),this.addEventListener=function(){r.addEventListener.apply(r,arguments)},this.removeEventListener=function(){r.removeEventListener.apply(r,arguments)},this.show=function(){document.addEventListener("touchmove",u,!1),r.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",u),window.scrollTo(0,-i.top),r.parentNode&&r.parentNode.removeChild(r)}}if(!s||!s.mtop||s.mtop.ERROR)throw new Error("Mtop åˆå§‹åŒ–å¤±è´¥ï¼");var i=f.Promise,o=s.mtop.CLASS,a=s.mtop.config,c=s.mtop.RESPONSE_TYPE;s.mtop.middlewares.push(function(e){var o=this,r=this.options,i=this.params;return e().then(function(){var e=r.retJson,t=e.ret,n=navigator.userAgent.toLowerCase(),n=-1<n.indexOf("safari")&&n.indexOf("chrome")<0&&n.indexOf("qqbrowser")<0;if((-1<(t=t instanceof Array?t.join(","):t).indexOf("SESSION_EXPIRED")||-1<t.indexOf("SID_INVALID")||-1<t.indexOf("AUTH_REJECT")||-1<t.indexOf("NEED_LOGIN"))&&(e.retType=c.SESSION_EXPIRED,!r.WindVaneRequest&&(!0===a.LoginRequest||!0===r.LoginRequest||!0===i.needLogin))){if(!s.login)throw new Error("LOGIN_NOT_FOUND::ç¼ºå°‘lib.login");if(!0!==r.safariGoLogin||!n||"taobao.com"===r.pageDomain)return s.login.goLoginAsync().then(function(e){return o.__sequence([o.__processToken,o.__processRequestUrl,o.__processUnitPrefix,o.middlewares,o.__processRequest])}).catch(function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::ç”¨æˆ·å–æ¶ˆç™»å½•"):new Error("LOGIN_FAILURE::ç”¨æˆ·ç™»å½•å¤±è´¥")});s.login.goLogin()}})}),s.mtop.loginRequest=function(e,t,n){t={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:n||t};return new o(e).request(t)},s.mtop.antiFloodRequest=function(e,t,n){t={AntiFlood:!0,successCallback:t,failureCallback:n||t};return new o(e).request(t)},s.mtop.middlewares.push(function(e){var n=this.options;return this.params,!0!==n.H5Request||!0!==a.AntiFlood&&!0!==n.AntiFlood?void e():e().then(function(){var e=n.retJson,t=e.ret;-1<(t=t instanceof Array?t.join(","):t).indexOf("FAIL_SYS_USER_VALIDATE")&&e.data.url&&(n.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+n.AntiFloodReferer):location.href=e.data.url)})}),s.mtop.antiCreepRequest=function(e,t,n){t={AntiCreep:!0,successCallback:t,failureCallback:n||t};return new o(e).request(t)},s.mtop.middlewares.push(function(e){var p=this,l=this.options,d=this.params;return!1!==l.AntiCreep&&(l.AntiCreep=!0),!0!==d.forceAntiCreep&&!0!==l.H5Request||!0!==a.AntiCreep&&!0!==l.AntiCreep?void e():e().then(function(){var e=l.retJson,t=e.ret;if((-1<(t=t instanceof Array?t.join(","):t).indexOf("RGV587_ERROR::SM")||-1<t.indexOf("ASSIST_FLAG"))&&e.data.url){var c="_m_h5_smt",n=(t=c,(t=new RegExp("(?:^|;\\s*)"+t+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie))?t[1]:void 0),o=!1;if(!0===l.saveAntiCreepToken&&n)for(var r in n=JSON.parse(n))d[r]&&(o=!0);if(!0!==l.saveAntiCreepToken||!n||o)return new i(function(r,i){function s(){u.removeEventListener("close",s),f.removeEventListener("message",a),i("USER_INPUT_CANCEL::ç”¨æˆ·å–æ¶ˆè¾“å…¥")}function a(e){var t,n;try{t=JSON.parse(e.data)||{}}catch(e){}if(t&&"child"===t.type){u.removeEventListener("close",s),f.removeEventListener("message",a),u.hide();try{for(var o in n="string"==typeof(n=JSON.parse(decodeURIComponent(t.content)))?JSON.parse(n):n)d[o]=n[o];!0===l.saveAntiCreepToken?(document.cookie=c+"="+JSON.stringify(n)+";",f.location.reload()):p.__sequence([p.__processToken,p.__processRequestUrl,p.__processUnitPrefix,p.middlewares,p.__processRequest]).then(r)}catch(e){i("USER_INPUT_FAILURE::ç”¨æˆ·è¾“å…¥å¤±è´¥")}}}var u=new h("",e.data.url);u.addEventListener("close",s,!1),f.addEventListener("message",a,!1),u.show()});for(r in n)d[r]=n[r];return p.__sequence([p.__processToken,p.__processRequestUrl,p.__processUnitPrefix,p.middlewares,p.__processRequest])}})})}(window,window.lib||(window.lib={}));
