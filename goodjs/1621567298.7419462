Belen.Home.HomeView=function(){var k,i=function(){var n,t,a,i,l,o,r,d,c,f,s=4;function u(e,i){return-1==$.inArray(e,a)&&($.ajax({url:k.gallery.ajaxUrl,data:{locId:k.gallery.locationId,page:e},success:function(e){n=e.numPages,"function"==typeof i&&i(e)}}),a.push(e)),!1}function h(e,i){var n=$('<li class="itemtile-condensed" data-page="'+i+'"><div class="itemtile-header"><a href="'+e.linkUrl+'"><img alt="" src="'+e.imageUrl+'"></a></div><div class="itemtile-body"><h3 class="itemtile-title"><a href="'+e.linkUrl+'">'+e.title+'</a></h3><div class="itemtile-location">'+e.location+"</div></div></li>");return null!=e.priceString&&0<e.priceString.length&&n.find(".itemtile-body").append('<div class="itemtile-ribbon"><span class="itemtile-price">'+e.priceString+"</span></div>"),n}function m(){var e=d.children().length/s*l+(a.length-1)*o;d.width(e)}function p(){var e=t+1;n<=e&&(e=0),u(e,function(i){$.each(i.entries,function(){var e=h(this,i.currentPage);d.append(e)}),m()})}function g(e){var i=t-1;i<0&&(i=n-1),u(i,function(i){$.each(i.entries,function(){var e=h(this,i.currentPage);d.prepend(e)}),m(),null!=e&&"function"==typeof e&&e()})}function v(){f.click(function(e){!function(){var e=d.children().last().data("page");if(t==e){var i=d.children().slice(0,s);d.append(i),d.offset({left:d.offset().left+(l+o)})}d.animate({left:"-="+(l+o)},{start:function(){w()},complete:function(){v();var e=(t=t<n-1?t+1:0)+1;n<=e&&(e=0),-1==$.inArray(e,a)&&p()}})}()}),c.click(function(e){!function(){var e=d.children().first().data("page");if(t==e){var i=d.children().slice(d.children().length-s);d.prepend(i),d.offset({left:d.offset().left-(l+o)})}d.animate({left:"+="+(l+o)},{start:function(){w()},complete:function(){v();var e=(t=0==t?n-1:t-1)-1;e<0&&(e=n-1),-1==$.inArray(e,a)&&g(function(){d.offset({left:d.offset().left-(l+o)})})}})}()})}function w(){c.add(f).off("click")}return{init:function(){var e;n=k.gallery.initNumPages,t=k.gallery.initCurrentPage,a=[t],r=$("#home-gallery"),r.find(".carousel-viewport"),d=r.find(".carousel-list"),c=$("#home-gllry-prev"),f=$("#home-gllry-next"),l=d.width(),i=d.children("li:first-child").width(),o=(l-i*s)/(s-1),n<=1&&f.add(c).addClass("is-hidden"),1<n&&(p(),v()),2<n&&(g(),d.offset({left:d.offset().left-(l+o)})),$("#home-hpgallery-info-lnk").magnificPopup({items:{src:"#home-hpgallery-info"},type:"inline",preloader:!1}),!0===k.adblockSurvey&&(e="hpsrvy","true"!=Belen.Common.Userprefs.readCookieValue(e)&&(Belen.Common.CommonView.buildSurveyModal("https://www.surveymonkey.de/r/FLT98GT"),Belen.Common.Userprefs.writeCookieValue(e,"true")))}}}(),n=function(){var t=$("#home-ul-ctgrs");t.find("li.p-home-li-subctgrs-more a").click(function(e){e.preventDefault();var i=$(this).parents("ul").eq(0),n=$(this).parent("li:eq(0)");t.find(".is-opened").makeHidden(),t.find("li.p-home-li-subctgrs-more").revokeHidden(),i.children(".is-hidden").addClass("is-opened").revokeHidden(),n.makeHidden()})},t=function(){$("body").on("click.itemtile",".itemtile-body, .itemtile-header, .itemtile-ribbon",function(e){if(0==$(e.target).closest("a",this).length){var i=$(this).parent().find(".itemtile-title a"),n=i.data("gaevent");void 0!==n&&""!==n&&Belen.TrackingDispatcher.track(n),window.location.href=i.attr("href")}})},a=function(){var i=1;$("#home-ads").find(".itemtile").each(function(e){e%20==0&&($(this).addClass("j-feed-page").data("page",i),i++)}),$(".j-feed-item").each(function(e){e%20==0&&($(this).addClass("j-feed-page").data("page",i),i++)}),$(window).on("scroll",function(){$(".j-feed-page").not(".is-hidden").each(function(){var e,i,n;e=$(this),i=$(window).scrollTop(),n=e.offset().top,Math.abs(n-i)<50&&$(this).removeClass("j-feed-page")});var e=$(".j-feed-back2top");window.scrollY>2*window.innerHeight?e.revokeHidden():e.makeHidden(),window.innerHeight+window.scrollY>=document.body.scrollHeight&&0===$(".j-feed-page.is-hidden").length&&$(window).off("scroll")})},l=function(){var e=100,i=$(".j-feed-item").length;$(".j-feed-item:lt(100)").revokeHidden(),$(".j-feed-show-more").click(function(){e+=100,$(".j-feed-item.is-hidden:lt(100)").revokeHidden(),i<=e&&$(".j-feed-show-more").makeHidden()}),$(".j-feed-back2top").click(function(){$(window).scrollTop(0),$(this).makeHidden()})};return{init:function(e){k=e,n(),i.init(),t(),a(),l(),Belen.Tracking.trackCriteoItemPage({event:"viewHome",user_segment:"1"})}}}();