!function(e){e.MDIGITAL=e.MDIGITAL||{},e.MDIGITAL.version="2.38.0"}(window),window.KAMPYLE_CONSTANT={PLACEHOLDERS:{URL_PREFIX:"https://resources.digital-cloud.medallia.eu/",USERSNAP_CDN_URL:"//screencaptue-cdn.kampyle.com/",USERSNAP_HOST_PREFIX:"//screencapture.kampyle.com/",COOLADATA_SRC_PREFIX:"//nebula-cdn.kampyle.com/",COOLDATA_API_HOST:"udc-neb.kampyle.com/",USERSNAP_V4_HOST_PREFIX:"//scp.kampyle.com",USERSNAP_ONPREM_HOST_PREFIX:"https://md-scp.kampyle.com/"},SRC:{OPEN_SANS:"resources/form/FormBuilder/vendor/fonts-googleapis/css/open-sans-v14.css",KLOADER:"resources/onsite/images/kloader.gif",COOLADATA:"resources/onsite/js/cool-2.1.15.min.js",OOPS:"resources/onsite/images/oops.svg"},FORM_HEIGHT:"450",FORM_WIDTH:"450",COOKIE_EXPIRATION:365,DEVICES:{DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet"},FEATURE_VERSIONS:{MOBILE_DYNAMIC_SIZING:2},TIME_FORMATS:{SECONDS:"seconds",MINUTES:"minutes",HOURS:"hours",DAYS:"days",WEEKS:"weeks",MONTHS:"months",YEARS:"years"},DISPLAY_TYPES:{LIGHTBOX:"lightbox",ANIMATION:"animation",POPUP:"popup",EMBEDDED:"embedded"},FORM_TYPES:{EMBEDDED:"embedded",INVITATION:"invitation",BUTTON:"button",CODE:"code"},EVENT_DATA:{PAGE_NUMBER:"pageNumber",FEEDBACK_CORRELATION_UUID:"feedbackCorrelationUUID",FEEDBACK_UUID:"feedbackUUID"},EVENT_NAME:{NEB_LOAD_FORM:"neb_loadForm"},FEATURE_FLAGS:{WCAG:"WCAG",EXEMPT_BUTTON_FORMS_FROM_QUARANTINE:"exemptButtonFormsFromQuarantine",EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE:"exemptEmbeddedFormsFromQuarantine",EXEMPT_CODE_FORMS_FROM_QUARANTINE:"exemptCodeFormsFromQuarantine"},PROVISIONS:{cooladataNewEvents:"cooladataNewEvents",NEW_SCREEN_CAPTURE_CONFIG:"newScreenCaptureConfiguration",ON_PREM_HYBRID:"onPremHybrid",API_GATEWAY:"apiGateway",LOCALIZED_FORMS:"localizedForms",FORM_TEMPLATE_DATA_SEPERATION:"separateFormTemplateFromData",EVENT_INCLUDE_FEEDBACK_CONTENT:"eventIncludeFeedbackContent",CP_EXT_REFACTOR:"cpExtractRefactor",ADOBE_INCLUDE_LINK_TRACK_VARS:"adobeIncludeLinkTrackVars",ADOBE_ANALYTICS_OBJECT_NAME:"adobeAnalyticsObjectName",ADOBE_CONCAT_LINK_TRACK_VARS:"adobeConcatLinkTrackVars",ENABLE_OVERFLOW:"enableOverflow",SERVER_BASED_TARGETING:"serverBasedTargeting",NATIVE_SCREEN_CAPTURE:"nativeScreenCapture",COOLADATA_EVNETS_LIMIT:"cooladataEventsLimit",UBT_EXTRA_EVENTS:"UBTExtraEvents",ALTERNATIVE_UUID:"alternativeUUID",DISABLE_COOKIE_STORAGE:"cookieStorageDisable",SHARE_PROPERTY_DOMAIN:"sharePropertyBetweenSubdomains",SKIP_INVITATION_OPTIMIZATION:"skipInvitationOptimization",COOLADATA_SUBMITTED_BY_XHR:"cooladataSubmittedByXhr",DO_NOT_SURVEY_ON_UBT_NETWORK_FAIL:"doNotSurveyOnUBTNetworkFail",DHH:"dynamicHybridHosting",USER_SNAP_V4:"userSnapV4",USER_SNAP_ONPREM:"21dcr2_MPC3296_enable_usersnapOnpremCSP",DYNAMIC_ONSITE_EVENTS:"dynamicOnsiteEvents",CSP_RULES:"CSPRemoveInlineStyling",CREATE_SESSION:"cooladataCreateSessionEvent",FORM_TEMPLATES_WCAG:"formTemplatesWCAG",PREVENT_IFRAME_SCROLLBAR_FLICKERING:"20dcr32_NM11146_PreventIFrameScrollFlickering",BACKEND_GENERATED_UUID:"20dcr4_MPC2802_enable_backendGeneratedUUID",CHTML_LOGS:"chtmlLogs",EXEMPT_FORMS_FROM_QUARANTINE:"20dcr4_MPC2952_enable_exemptFormsFromQuarantine",USER_SNAP_AS_COMPONENT:"20dcr4_MPC2893_enable_ScreenCaptureAsComponent",ADDITIONAL_BUTTON_STYLES:"21dcr1_MPC3199_AdditionalButtonStyles",COOLADATA_UPGRADE:"21dcr1_MPC2883_UpgradeCooladataVersion",RTL:"21dcr1_MPC_3283_enable_RTL",GREATER_SMALLER_THAN_DECODE:"21dcr1_MPC3370_EnableGreaterSmallerThanSupport",EMBEDDED_TARGETING:"21dcr2_MPC2800_enable_EmbeddedTargeting",NEW_MODAL_DIALOGS:"21dcr3_MPC3281_enable_newModalDialogs",IS_CHTML_HANDLE_INIT_FOCUS_INDEPENDENTLY:"21dcr3_MPC3281_enable_CHTMLHandleFocusIndependently",WCAG_TRAP_FOCUS_IN_MODAL:"WCAGTrapFocusInModal",WCAG_REVIEW_FIXES:"20dcr4_MPC2905_wcagReviewFixes",PROPERTY_MESSAGES:"propertyMessages",NOT_SCROLL_TO_LAST_POSITION_DISPLAY_TYPE_ANIMATION:"willNotScrollToLastPositionDisplayTypeAnimation",CLEAR_EMBEDDED_ON_UPDATE_PAGE:"21dcr2_MPC3571_enable_ClearEmbeddedFormOnUpdatePageView",ENABLE_EVENTS_FOR_CE_DEBUG:"21DCR2_MPC3662_EnableEventsForCEDebug"},MEDALLIA_DIGITAL_EMBED_FILE:"medallia-digital-embed.js",DEFAULT_ADOBE_SDK_NAME:"s",ONPREM_URL_PREFIX:"/****ONPREM_URL_PREFIX****/",ONPREM_UDC_PREFIX:"/****JS_UDC****/",ANALYTICS_EVENT_FORBIDDEN_PROPERTIES:{sourceWindow:!0,content:!0,feedbackCorrelationUUID:!0},FORM_TRIGGER_TYPES_MAP:{embedded:"Embedded",invitation:"Intercept",button:"AlwaysOn",code:"TriggeredByCode"},LANG_MEMORY_DATA_KEY_PREFIX:"formLanguage:",FORM_JSON_DATA_KEY_PREFIX:"formJsonData:",INVITE_JSON_DATA_KEY_PREFIX:"inviteJsonData:",FORM_BUTTON:"button",FORM_INVITATION:"invitation",CUSTOM_EVENT_OTHER:"Other",EXPOSED_FORM_ID_LABEL:"Form_ID",EXPOSED_FORM_TYPE_LABEL:"Form_Type",EXPOSED_FEEDBACK_UUID_LABEL:"Feedback_UUID",EXPOSED_FEEDBACK_CONTENT_LABEL:"Content",LOCALIZED_FORM_DEFAULT_REPLACE_VALUE:"default",NOT_RECORDING:"NOT_RECORDING",IFRAME_SETTINGS:{EMBEDDED:{IFRAME_ID_PREFIX:"embeddedIframe"},LIGHTBOX:{IFRAME_ID_PREFIX:"kampyleForm",CONTAINER_ID_PREFIX:"kampyleFormModal"},ANIMATION:{CONTAINER_ID:"KampyleAnimationContainer",IFRAME_ID:"kampyleFormAnimation"},INVITATION:{IFRAME_ID:"kampyleInvite",CONTAINER_ID:"kampyleInviteModal",IFRAME_TITLE:"Invitation to provide feedback"},OOPS:{CONTAINER_ID_PREFIX:"mdigital-no-json-modal_",CLOSE_BUTTON_ID:"close-no-json-modal"},IFRAME_TITLE:"Feedback Survey"},PROPERTY_SETTINGS:{MANUALLY_INVITE_TARGETING:"MANUALLY_INVITE_TARGETING",CUSTOM_CSS_UPLOAD:"CUSTOM_CSS_UPLOAD"},EVENTS:{MDIGITAL_MANUALLY_INVITE_TARGETING:"MDigital_manuallyInviteTargeting",MDIGITAL_PAGE_TARGETING_PHASE_ENDED:"MDigital_pageTargetingPhaseEnded",MDIGITAL_BEHAVIORAL_TARGETING_PHASE_ENDED:"MDigital_behavioralTargetingPhaseEnded",MDIGITAL_QUARANTINED_SURVEY_PHASE_ENDED:"MDigital_quarantinedSurveyPhaseEnded",MDIGITAL_TARGETING_RULE_EVALUATED:"MDigital_targetingRuleEvaluated",MDIGITAL_SCREEN_CAPTURE_LOADED:"neb_screenCaptureLoaded",MDIGITAL_SDK_PAGE_VIEW:"neb_sdkPageView",MDIGITAL_WARNING:"MDigital_warning",MDIGITAL_COULD_NOT_FETCH_DATA:"MDigital_couldNotFetchData",MDIGITAL_COULD_NOT_LOAD_FORM_APPLICATION:"MDigital_couldNotLoadFormApplication",NEB_EVENT_DISPATCHER_ERROR:"neb_eventDispatcherError",NEB_LOAD_FORM:"neb_loadForm",NEB_FORM_LOADING_HAS_FAILED:"neb_formLoadingHasFailed",MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY:"MDigital_DynamicOnsiteInitializedSuccessfully",CREATE_SESSION:"createSession",MDIGITAL_NO_JSON_MODAL_SHOWN:"MDigital_noJsonModalShown",MDIGITAL_NO_JSON_MODAL_CLOSED:"MDigital_noJsonModalClosed",MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_FORM_CLOSED:"MDigital_updateTargetingWithDeclinedDateFormClosed",MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_INVITE_DECLINED:"MDigital_updateTargetingWithDeclinedDateInviteDeclined",MDIGITAL_CHTML_LOGS:"MDigital_CHTML_Logs",SCREEN_CAPTURE_RETAKE:"MDigital_screenCaptureRetake",SCREEN_CAPTURE_DELETE:"MDigital_screenCaptureDelete",CUSTOM_EVENTS_DEBUG_MESSAGE:"mdigital_customEventsDebugMessage"},LOG_MESSAGES:{TRIGGER_MESSAGE_TEMPLATE:"Event {{EVENT_NAME}} has been {{STATUS}}. \n the data is: {{DATA}}. \n the context is :{{CONTEXT}}. \n the options are : {{OPTIONS}}.\n",ERROR_LOG_TEMPLATE:"Error Message is {{ERROR_MESSAGE}}",ERROR_DYNAMIC_ONSITE_INITIALIZATION:"Failed to fetch onsite data.",ERROR_ONSITE_SDK_CONFIGURATION_MISSING:"Failed to execute KAMPYLE_ONSITE_SDK.{{METHOD}}, due to missing onsite configuration."},LOG_STATUSES:{FAILED:"failed",TRIGGERED:"triggered"},OPERATORS:{REGEX:"regex",EQUALS:"equals",DOES_NOT_EQUAL:"doesnotequal",CONTAINS:"contains",DOES_NOT_CONTAIN:"doesnotcontain",STARTS_WITH:"startswith",ENDS_WITH:"endswith",HAS_VALUE:"hasvalue",LATER_THAN:"laterthan",EARLIER_THAN:"earlierthan",GREATER_THAN:"greaterthan",SMALLER_THAN:"smallerthan"},TARGETING_STATUS:{CANDIDACY:"candidacy",TRIGGERED:"triggered",QUARANTINED:"quarantined"},TARGETING_PHASES:{PAGE_TARGETING:"pageTargeting",BEHAVIORAL_TARGETING:"behavioralTargeting",QUARANTINE_TARGETING:"quarantineTargeting"},TARGETING_RULES:{INVITE_IF_ANY_SURVEY_ALREADY_SUBMITTED_PER_SESSION:"InviteAnySurveyAlreadySubmittedPerSession",INVITE_IF_ANY_INVITE_ALREADY_SHOWN_PER_SESSION:"InvitePerSession"},REGIONS:{DEV:"dev",QA:"qa",COLO_QA:"digital-cloud-qa",COLO_US:"digital-cloud-us"},MEMORY_DATA_FIELDS:{MDIGITAL_ALTERNATIVE_UUID:"mdigital_alternative_uuid",FETCHING_DATA_IN_PROGRESS:"FETCHING_DATA_IN_PROGRESS_",DATA_JSON:"dataJson",HAS_ONSITE_CONFIGURATION:"hasOnsiteConfiguration",TIMEOUT_HANDLERS:"mdTimeoutHandlers",FEEDBACK_CORRELATION_UUID:"feedbackCorrelationUUID",IS_BUTTON_CONTAINER_CREATED:"isButtonContainerCreated",REGION:"region",FEEDBACK_BUTTON_POSITION_STYLE:"buttonPositionStyle"},SESSION_DATA_FIELDS:{IS_SURVEY_SUBMITTED_IN_SESSION:"md_isSurveySubmittedInSession"},TIMEOUT_HANDLERS:{FORM_APP_STATUS:"formAppStatus",EMBEDDED_STATUS:"embeddedFormStatus"},CSS_FONT_RULE:"CSSFontFaceRule",NETWORK:{RETRY_TIMEOUT:1e3,REQUEST_TIMEOUT:5e3,TIME_FOR_FORM_TO_LOAD_MS:6e4,NUM_OF_RETRIES:3},ERROR_CODE:{SECURITY_ERROR:18},KEY_CODES:{SPACE:32,TAB:9,ENTER:13,ESC:27},BROWSERS:{IE:"IE",CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari"},URLS:{KMA_UDC:"https://nginx-log-post.kampyle.com/?data="},TEXTS:{DEFAULT_JSON_ERROR_MESSAGES:{title:"Oops...",body:"We canâ€™t collect your feedback at the moment.<br/>Refresh your page and try again",close:"Close this modal"},SCREEN_CAPTURE:{DEFAULT_DESCRIPTION:'Click "Capture Image" button or drag the cursor to highlight a specific area'}},FORM_LOADING_FAILURE_CAUSE:{APPLICATION_FAILED:"applicationFailed",JSON_FAILED:"jsonFailed"},PROPERTY_MESSAGES:{NO_JSON_MESSAGE:{TYPE:"noJsonMessage",KEYS:{TITLE:"title",BODY:"body",CLOSE:"close"}}},BROWSER_EVENTS:{FOCUS:"focus",MOUSE_DOWN:"mousedown"},COOLADATA_INSTANCE_NAME:"cooladata_instance_for_medallia_digital",SCREEN_CAPTURE:{DOM_SELECTION:"DOM_SELECTION",DOM_SELECTION_VALUE:"domSelector",AREA_SELECTION_VALUE:"highlight"},COOLADATA_HTTP_EVENTS_BY_METHOD:{BEFORE:{GET:"neb_beforeHttpGetRequest",POST:"neb_beforeHttpPostRequest"},AFTER:{GET:"neb_afterHttpGetRequest",POST:"neb_afterHttpPostRequest"},TIMEOUT:{GET:"neb_afterHttpGetRequestOnTimeout",POST:"neb_afterHttpPostRequestOnTimeout"},ERROR:{GET:"neb_afterHttpGetRequestOnError",POST:"neb_afterHttpPostRequestOnError"},ERROR_STATUS_CODE:{GET:"neb_afterHttpGetRequestOnErrorStatusCode",POST:"neb_afterHttpPostRequestOnErrorStatusCode"}},HTTP_METHODS:{GET:"GET",POST:"POST"},COLORS:{USERSNAP_V4_SELECTION_COLOR:"#fb585b",USERSNAP_ONPREM_SELECTION_COLOR:"#004CCB"},VIEW:{FEEDBACK_BUTTON_ID:"nebula_div_btn",FEEDBACK_BUTTON_CONTAINER_ID:"kampyleButtonContainer"},CLOSE_FORM_PARAM_VALUES:{ALL:"all",EMBEDDED:"embedded",MODAL:"modal"}},window.MDIGITAL.CONFIGURATION=function(){function t(){var e=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);return e||{provisions:{"21dcr1_mpc3281_alignWCAGLogoMarkup":null,mobileSDKUseSDKMetaDataInsteadOfUA:null,"20dcr4_MPC2905_wcagReviewFixes":null,cpExtractRefactor:null,chtmlLogs:null,disableFormReloadOnClose:null,mobileSDKV2FormWCAGSupport:null,googleAnalyticsClientEventsEnabled:null,"20dcr4_MPC2802_enable_backendGeneratedUUID":null,tealeafEnabled:null,"21dcr2_MPC2743_enable_newLiveForm":null,mobileSdkSupport:null,cooladataNewEvents:null,"20dcr4_MPC2893_enable_ScreenCaptureAsComponent":null,adobeAnalytics:null,eventIncludeFeedbackContent:null,userSnapV4:!0,dynamicModalSizeInCustomHtml:!0,mobileSDKV2AndroidNewSubmitButton:!0,cspUsersnapV2Support:null,sessionRecording:null,"21dcr3_MPC3281_enable_CHTMLHandleFocusIndependently":null,doNotSurveyOnUBTNetworkFail:null,mobileInvitationLayout:!0,addingRandomTimeForTimeInSession:null,"21dcr2_MPC3571_enable_ClearEmbeddedFormOnUpdatePageView":null,"21dcr3_mpc3662_delaySurveyUntilCSSLoad":null,mobileWebDynamicFormSizeInFormBuilder:!0,cookieStorageDisable:null,screenCaptureEnabled:!0,reusableResourcesLibrary:null,formTemplatesWCAG:!1,formSpacing:!0,onPremHybrid:null,"21dcr1_MPC2883_UpgradeCooladataVersion":null,mobileWebDynamicFormSize:!0,mobileSDKV2ScoreTargeting:null,WCAGTrapFocusInModal:null,disableButtonProximity:null,errorMessageWcagSupport:null,multiOptionsID:!0,"20dcr32_NM11146_PreventIFrameScrollFlickering":null,separateFormTemplateFromData:!0,dynamicOnsiteEvents:null,mobileSDKV2AppRatingsiOSDirect:null,cooladataCreateSessionEvent:null,mobileSDKV2Responsive1to5Grading:null,mobileSDKV2AppRatingsAndroidDestination:null,"21dcr3_MPC3662_EnableContentSquareSupport":null,ibmIncludeSpecificCPsInCooladataEvent:null,exportFeedbackSpinner:null,customEventsBroadcast:!0,sharePropertyBetweenSubdomains:null,spaUrlPolling:null,customCssUpload:null,willNotScrollToLastPositionDisplayTypeAnimation:null,"21dcr2_MPC2800_enable_EmbeddedTargeting":null,mobileResponsiveRatingComponent:!0,customHtmlFormsEnable:!0,propertyMessages:null,cooladataEventsLimit:null,mobileSDKV2BannerRevamp:null,targetingEventsReporting:null,mobileSdkFixIos12KeyboardIssue:null,serverBasedTargeting:!0,CSPRemoveInlineStyling:null,enableOverflow:null,coolodataEventsByXhr:null,nativeScreenCapture:null,mobileSDKV2UiRevamp:!0,skipInvitationOptimization:null,mobileSDKV2AppRating:null,"21dcr1_MPC_3283_enable_RTL":null,"20dcr4_MPC2952_enable_exemptFormsFromQuarantine":null,"21dcr1_MPC3199_AdditionalButtonStyles":null,targetingRuleIdleTime:null,responsiveRatingComponent:!0,localizedForms:!0,"21dcr3_MPC3281_enable_newModalDialogs":null,mediaCapture:null,UBTExtraEvents:null,"21dcr2_MPC3296_enable_usersnapOnpremCSP":null,adobeAnalyticsObjectName:null,"21dcr3_MPC3779_enable_targetingNotice":null,onsiteLogger:null,dynamicHybridHosting:null,"21dcr1_MPC3370_EnableGreaterSmallerThanSupport":null,underScoreLocalization:null,thermoFisherTeaLeafIntegration:null,alternativeUUID:null,mobileSDKV2CustomIntercept:null,adobeConcatLinkTrackVars:null,adobeIncludeLinkTrackVars:null,cooladataIntegration:!0,"21DCR1_MPC3199_enable_RatingLabelAlign":null,"21DCR2_MPC3662_EnableEventsForCEDebug":null,parallelTabSolution:null,mobileSDKV2PoweredByFooter:null},sbtServerDomain:"https://ubt-lb.digital-cloud.medallia.eu",sbtEnvPrefix:"wdceu_",endUserIdentifier:{},formNodes:[],integrations:{recordedSessions:[]},usersnapEnvId:"1dca7f59-eedc-4eeb-8e29-f6d37bab8673",usersnapOnpremWidgetLoaderPath:null,propertyMessages:null,globalResourcesUrl:"https://resources.digital-cloud.medallia.eu/liveApp/resources",submitUrlPrefix:"https://feedback.digital-cloud.medallia.eu/",submitUrlSuffix:"feedback/api/feedback/submit",submitUrlWithBackendUUID:"https://feedback.digital-cloud.medallia.eu/feedback/api/v2/feedback/submit",region:"digital-cloud-eu",websiteId:82487,accountId:82318,packageVersion:null,isSpa:!1,isWCAG:!1,isManuallyInviteTargeting:!1,isGoogleAnalyticsClientGTM:!1,isFormsPreloaded:!0,cookieExpirationTime:null,adobeSdkName:null,sharedSubdomain:null,customCssUpload:!1,exemptButtonFormsFromQuarantine:!1,exemptCodeFormsFromQuarantine:!1,exemptEmbeddedFormsFromQuarantine:!1,screenCaptureSelectionTool:null}}return{init:function(){KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!1);var e=(e=t())&&e.region||KAMPYLE_CONSTANT.REGIONS.DEV;KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.REGION,e)},isOnsiteConfigurationMissing:function(){return!KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION)},getOnsiteConfiguration:t,onsiteDataSuccess:function(e){!e||e.error?MDIGITAL.CONFIGURATION.onsiteDataFailed(e):(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DYNAMIC_ONSITE_EVENTS)&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!0),e=MDIGITAL.CONFIGURATION.formatConfiguration(e),e=Object.assign({},t(),e),MDIGITAL.INIT.initOnsite(e))},onsiteDataFailed:function(e){e={errorMessage:KAMPYLE_CONSTANT.LOG_MESSAGES.ERROR_DYNAMIC_ONSITE_INITIALIZATION,additionalInfo:e},KAMPYLE_EVENT_DISPATCHER.triggerError(e),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!1)},fetchOnsiteExternalConfiguration:function(e){KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,e,null,MDIGITAL.CONFIGURATION.onsiteDataSuccess,MDIGITAL.CONFIGURATION.onsiteDataFailed)},formatConfiguration:function(e){var t,n=e;if(n.formNodes&&n.formNodes.length)for(var r=0;r<n.formNodes.length;r++)"string"==typeof n.formNodes[r].customParams&&(t=JSON.parse(n.formNodes[r].customParams),n.formNodes[r].customParams=t);return n}}}((window,document)),window.KAMPYLE_FUNC=function(){function t(e){var t;e.formNodes=e.formNodes||[];for(var n=e.formNodes.length-1;0<=n;n--)(t=e.formNodes[n]).formHeight&&"null"!==t.formHeight||(t.formHeight=KAMPYLE_CONSTANT.FORM_HEIGHT),t.formWidth&&"null"!==t.formWidth||(t.formWidth=KAMPYLE_CONSTANT.FORM_WIDTH);return e}function n(e,t){var n=KAMPYLE_DATA.getFormState(t.formId);n.loaded||n.loading||KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:t.formId})}function r(e,t){((t||{}).formIds||[]).forEach(function(e){KAMPYLE_COMMON.loadForm(e)})}function o(e,t){if(t=t||{},KAMPYLE_COMMON.closeForm(t.sourceFormId),!KAMPYLE_COMMON.showForm(t.formId))throw new Error("Form cannot be loaded")}function i(){var e;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||(e=document.querySelector("#kampyleInvite"))&&"function"==typeof e.focus&&e.focus()}function a(e,t){t=t||{},(KAMPYLE_DATA.getFormState(t.formId)||{}).inviteShown&&MDIGITAL.FORM_STATE.isInviteLoaded(t.formId)&&s(t.formId,!0)&&!z()?(KAMPYLE_VIEW.showInvite("",{formId:t.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteReady",t),KAMPYLE_DATA.setMemoryData("inviteLoadedAndShown",!0)):(E(t.formId,!0)||z())&&KAMPYLE_DATA.setFormState(t.formId,{inviteShown:!1})}function A(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_inviteDeclined:["neb_displayClosed"],neb_formClosed:["neb_displayClosed"]})}function E(e,t){var n=KAMPYLE_DATA.getMemoryJsonKey(e,t),n=KAMPYLE_DATA.getMemoryData(n),e=KAMPYLE_DATA.getFormState(e);return!1===n||!t&&e&&!1===e.loaded||t&&e&&!1===e.inviteLoaded}function s(e,t){t=KAMPYLE_DATA.getMemoryJsonKey(e,t);return!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)||KAMPYLE_DATA.getMemoryData(t)}function l(e,t){var n,r;t.failureCause===KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.APPLICATION_FAILED&&(r=KAMPYLE_DATA.getFormData(t.formId),n=KAMPYLE_DATA.getDisplayType(r),r=KAMPYLE_DATA.getFormState(t.formId),r={errorData:{formId:t.formId,displayType:n,formState:r}},KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_COULD_NOT_LOAD_FORM_APPLICATION,r)),setTimeout(function(){KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!1,loaded:!1})},0)}function _(e){var t=KAMPYLE_DATA.getFormData(e),t=KAMPYLE_DATA.getDisplayType(t);return MDIGITAL.FORM_STATE.isFormLoaded(e)||t===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP}function d(e,t){var n="neb_loadInvitation"===e,r=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.LANG_MEMORY_DATA_KEY_PREFIX+t.formId),o=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS),e=KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FETCHING_DATA_IN_PROGRESS+t.formId;o&&(e=e+"_"+r),n&&(e+="_invite"),KAMPYLE_FUNC.shouldSkipFetchingFormData(t.formId,n,r,o)||(KAMPYLE_DATA.setMemoryData(e,!0),KAMPYLE_DATA.fetchFormJsonData({formId:t.formId,isInvite:n,fetchingDataInProgressKey:e,callback:function(){var e;n?(KAMPYLE_VIEW.updateInviteIframeTitle("",t),e=t.formId,e=KAMPYLE_DATA.getMemoryJsonKey(e,!0),e=KAMPYLE_DATA.getMemoryData(e),KAMPYLE_DATA.setMemoryData("inviteVersion",e&&e.mobileDesign?1:-1),KAMPYLE_FUNC.handleInviteApplicationUpdated("",t)):KAMPYLE_FUNC.handleFormStateUpdated(t)},onError:function(e,t,n){var r=KAMPYLE_DATA.getMemoryJsonKey(e.formId,t);KAMPYLE_DATA.setMemoryData(r,!1),t||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:e.formId,failureCause:KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.JSON_FAILED});n={errorData:{formId:e.formId,isInvite:t,errorDetails:n}};KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_COULD_NOT_FETCH_DATA,n)}.bind(null,t,n)}))}function T(e){var t,n=_(e.formId)&&s(e.formId,!1),t=MDIGITAL.FORM_STATE.shouldFormBeShown(e.formId)&&(e=e.formId,(t=KAMPYLE_DATA.isSkipInvitation(e)&&z(e))&&(KAMPYLE_EVENT_DISPATCHER.trigger("neb_formReady",{formId:e}),KAMPYLE_DATA.setFormState(e,{shouldBeShown:!1}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_skipShowingForm",{formId:e})),!t);return n&&t}function u(e){T(e)?(KAMPYLE_EVENT_DISPATCHER.trigger("neb_showForm",{formId:e.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_formReady",{formId:e.formId}),KAMPYLE_DATA.setFormState(e.formId,{shown:!0,isCurrentlySubmitted:!1})):E(e.formId,!1)&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:e.formId})}function m(){var e={neb_pageView:[y],neb_showInvitation:[P,KAMPYLE_UTILS.setCurrentScrollPosition,k,i,a],neb_buttonClicked:[KAMPYLE_UTILS.setCurrentScrollPosition,k,I],neb_sdkShowForm:[KAMPYLE_UTILS.setCurrentScrollPosition,k,I],neb_skipInvitation:[KAMPYLE_UTILS.setCurrentScrollPosition,I],neb_inviteLoaded:[P,L],neb_inviteAccepted:[P,KAMPYLE_UTILS.setCurrentScrollPosition,I],neb_inviteDeclined:[P,v,KAMPYLE_UTILS.handleAfterFormPosition],neb_formClosed:[Y,KAMPYLE_UTILS.handleAfterFormPosition],neb_popupBlocked:[Y,KAMPYLE_UTILS.handleAfterFormPosition],neb_loadForm:[d,g],neb_loadInvitation:[d],neb_formLoaded:[R],neb_loadMultipileForms:[r],neb_routeToForm:[o],neb_formReady:[H,W,U],neb_feedbackSubmitted:[b],neb_sdkPageView:[C],neb_screenCaptureLoaded:[F],neb_formLoadingHasFailed:[l]};KAMPYLE_EVENT_DISPATCHER.subscribeMany(e)}function c(e){return{neb_buttonClicked:"Button",neb_sdkShowForm:"ByCode",neb_routeToForm:"ByCode",neb_skipInvitation:"Invitation",neb_inviteAccepted:"Invitation"}[e]||null}function I(e,t){(t=t||{}).triggerType=t.triggerType||c(e),KAMPYLE_DATA.saveFormExtraData(t.formId,{triggerType:t.triggerType}),KAMPYLE_DATA.setMemoryData("currentFormId",t.formId),KAMPYLE_DATA.setMemoryData("formIsShown",!0),KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!0,triggerType:t.triggerType}),u(t)}function S(){var t=KAMPYLE_FUNC.isReferrerDifferentThanHost(),e=KAMPYLE_DATA.getData("kampyleUserSession"),n=!1;try{n=""===document.referrer||""===window.parent.document.referrer}catch(e){var r={errorMessage:e.message,errorStack:e.stack,additionalInfo:"createSession- failed to access document.referrer, probably CORS problem when the customer's iframe is hosted in a website with different domain."},t=!1;KAMPYLE_COOLADATA.triggerCooladataEvent(KAMPYLE_CONSTANT.MDIGITAL_WARNING,r)}finally{e&&!n&&!t||(KAMPYLE_DATA.setMemoryData("isSyncedIdentifierData",!1),KAMPYLE_DATA.setData("kampyleUserSession",KAMPYLE_UTILS.getCurrentTimestamp()),KAMPYLE_DATA.setData("kampyleSessionPageCounter",0),t=KAMPYLE_DATA.getData("kampyleUserSessionsCount"),t=Number(t)||0,KAMPYLE_DATA.setData("kampyleUserSessionsCount",++t),KAMPYLE_DATA.deleteData("kampyleUserPercentile"),KAMPYLE_DATA.deleteData("kampyleInvitePresented"),KAMPYLE_DATA.deleteData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION))}}function L(e,t){var n;t=t||{},KAMPYLE_DATA.getMemoryData("inviteVersion")||(n=KAMPYLE_UTILS.getNestedPropertyValue(t,"inviteVersion"),KAMPYLE_DATA.setMemoryData("inviteVersion",n)),(KAMPYLE_DATA.getFormState(t.formId)||{}).inviteShown&&a(0,t)}function g(e,t){t=t||{},KAMPYLE_DATA.setFormState(t.formId,{loading:!0}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_form_loaded",{formId:t.formId})}function M(e,r){if(r=r||{},!KAMPYLE_DATA.getFormState(r.formId).inviteLoaded)return!1;KAMPYLE_UTILS.sendMessageToIframe("kampyleInvite",{action:"inviteShown"});var o={accountId:r.accountId,websiteId:r.websiteId,environment:r.enviroment,url:document.location.href,kampyle_version:window.MDIGITAL.version||"0.0.0.0",formId:r.formId,cookie_size:KAMPYLE_UTILS.getByteSize(document.cookie),isWCAG:KAMPYLE_DATA.isFeatureEnabled("WCAG"),deviceType:x(),provisions:V(),position:KAMPYLE_VIEW.getInvitePosition(r.formId),customCssUpload:KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.CUSTOM_CSS_UPLOAD)};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)?KAMPYLE_DATA.fetchFormJsonData({formId:r.formId,callback:function(e){var t=KAMPYLE_DATA.getFormData(r.formId),n=MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),t={submitUrlPrefix:n.submitUrlPrefix,submitUrlSuffix:n.submitUrlSuffix,globalResourcesUrl:n.globalResourcesUrl,versionedResourcesUrl:t.versionedResourcesUrl};o=Object.assign({},o,{inviteData:e},t),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&(o.formLanguage=MDIGITAL.LOCALIZATION.getFormLanguage(r.formId)||null),KAMPYLE_UTILS.sendMessageToIframe("kampyleInvite",{action:"setExtraData",data:o})},onError:function(e){console.error(e)},isInvite:!0},!0):KAMPYLE_UTILS.sendMessageToIframe("kampyleInvite",{action:"setExtraData",data:o})}function P(e,t){switch((t=t||{}).formId=t.formId||KAMPYLE_DATA.getMemoryData("currentFormId"),e){case"neb_showInvitation":KAMPYLE_DATA.setFormState(t.formId,{inviteShown:!0});break;case"neb_inviteDeclined":case"neb_inviteAccepted":KAMPYLE_DATA.setFormState(t.formId,{inviteShown:!1});break;case"neb_inviteLoaded":KAMPYLE_DATA.setFormState(t.formId,{inviteLoaded:!0});break;case"neb_sdkPageView":KAMPYLE_DATA.setFormState(t.formId,{inviteLoaded:null,inviteShown:!1});break;default:KAMPYLE_UTILS.showWarning("Unhandled event name "+e)}}function p(e){var t,n=e.formId;e&&(i=parseInt(e.formWidth,10),t=parseInt(e.formHeight,10));var r=document.documentElement.clientWidth,o=document.documentElement.clientHeight;KAMPYLE_UTILS.setElementStyle(document.getElementById("innerContainer"),{overflowY:"auto",height:"100%"});e={border:0,position:"relative",margin:"50px auto 50px",height:t+"px",width:i+"px"};i<r&&t<o&&(e=KAMPYLE_DATA.isCustomHtmlAndFixedSizeForm(n)?{position:"absolute",top:"50%","margin-top":-t/2+"px",left:"50%","margin-left":-i/2+"px",height:t+"px",width:i+"px"}:{position:"fixed",height:"100%",width:"100%"});var i=document.getElementById("kampyleFormModal");i&&i.style&&i.removeAttribute&&(i.removeAttribute("style"),KAMPYLE_UTILS.setElementStyle(i,e))}function f(){var e,t,n,r,o=450,i=450,a=KAMPYLE_UTILS.getUrlParam("url");KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.MOBILE?o=i="100%":(n=KAMPYLE_UTILS.getUrlParam("height"),r=KAMPYLE_UTILS.getUrlParam("width"),n&&!isNaN(n)&&(o=n),r&&!isNaN(r)&&(i=r)),a&&KAMPYLE_UTILS.validateKampyleDomain(decodeURIComponent(a))?(a=decodeURIComponent(a),a+="?region="+KAMPYLE_DATA.getMemoryData("region"),(t=KAMPYLE_UTILS.getUrlParam("formId"))?(a+="&formId="+t,KAMPYLE_DATA.setMemoryData("currentFormId",t)):(e=location.protocol+"//"+location.host,window.location=e+"/#/error/404"),(n=decodeURIComponent(window.getUrlParam("provisions")))&&(a+="&provisions="+encodeURIComponent(n)),(r=decodeURIComponent(window.getUrlParam("websiteId")))&&(a+="&websiteId="+encodeURIComponent(r)),n=KAMPYLE_UTILS.getUrlParam("type")||"direct",a+="&type="+(n=-1===["live","direct","preview"].indexOf(n.toLowerCase())?"direct":n),n=r="100%",KAMPYLE_DATA.isCustomHtmlAndFixedSizeForm(t)&&(r=o,n=i),r=KAMPYLE_UTILS.createIframe(a,n,r,"kampyleForm"+t),KAMPYLE_DATA.isCustomHtmlForm(t)&&p({formId:t,formHeight:o,formWidth:i}),(i=document.getElementById("kampyleFormModal"))&&(i.appendChild(r),r.offsetTop<30&&!KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.MOBILE&&(i.style.paddingTop=30-r.offsetTop+"px"))):(e=location.protocol+"//"+location.host,window.location=e+"/#/error/404")}function N(){var e=KAMPYLE_DATA.getUserIdentifier();if(!e)return null;e=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({name:e.source_name,type:e.type,source:e.source});return e||null}function D(e){KAMPYLE_DATA.setMemoryData("isSyncedIdentifierData",!0),O((e=e.data).DECLINED_DATE,"DECLINED_DATE"),O(e.SUBMITTED_DATE,"SUBMITTED_DATE")}function O(e,t){var n=parseInt(KAMPYLE_DATA.getData(t));n=n||null;if((e=e||null)===n)return null;null!==e&&null===n||n<e?KAMPYLE_DATA.setData(t,e):null!==n&&null===e||e<n?KAMPYLE_FUNC.updateTargeting(t,n):KAMPYLE_UTILS.showWarning("special case")}function C(){if(z())return!1;var e;KAMPYLE_DATA.setMemoryData("isInvitationShouldBeIgnored",!1),KAMPYLE_EVENT_DISPATCHER.trigger("neb_pageView"),"preview"===KAMPYLE_DATA.getMemoryData("context")?f():"manual"!==window.KAMPYLE_ONSITE_STATE&&(e=KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.MANUALLY_INVITE_TARGETING),KAMPYLE_EVENT_DISPATCHER.trigger("neb_targetingInit",{skipInviteTargeting:e}))}function y(){var e=KAMPYLE_DATA.getData("kampyleSessionPageCounter")||0,e=parseInt(e);KAMPYLE_DATA.setData("kampyleSessionPageCounter",++e)}function Y(e,t){(t=t||{}).isFormSubmitted||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&!KAMPYLE_DATA.isFormOfType(t.formId,KAMPYLE_CONSTANT.FORM_TYPES.INVITATION)||KAMPYLE_FUNC.setQuarantineDeclinedDate(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_FORM_CLOSED),KAMPYLE_DATA.setMemoryData("formIsShown",!1),KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!1,shown:!1,loaded:null}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||(w(),KAMPYLE_UTILS.triggerCustomEvent("neb_formClosed",{formId:t.formId}),"preview"===KAMPYLE_DATA.getMemoryData("context")&&window.close()),K(t.formId)}function K(e){var t=KAMPYLE_DATA.getMemoryData("buttonFormId"),n=KAMPYLE_DATA.getFormData(t),n="animation"===KAMPYLE_DATA.getDisplayType(n)?1e3:0;t?setTimeout(function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_showButton",{formId:t,formClosed:!0}),h(e)},n):h(e)}function h(e){KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterFormClosed",{formId:e}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&KAMPYLE_UTILS.triggerCustomEvent("neb_formClosed",{formId:e})}function b(e,t){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&function(e){switch(KAMPYLE_DATA.getFormTriggerType(e)){case KAMPYLE_CONSTANT.FORM_TYPES.BUTTON:return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_BUTTON_FORMS_FROM_QUARANTINE);case KAMPYLE_CONSTANT.FORM_TYPES.CODE:return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_CODE_FORMS_FROM_QUARANTINE);case KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED:return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE);default:return}}(t.formId)||KAMPYLE_FUNC.setQuarantineSubmittedDate(),KAMPYLE_DATA.setData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION,!0),KAMPYLE_DATA.setFormState(t.formId,{isCurrentlySubmitted:!0}),G(KAMPYLE_CONSTANT.PROVISIONS.NATIVE_SCREEN_CAPTURE)&&KAMPYLE_EVENT_DISPATCHER.trigger("neb_sendScreenCapture")}function v(e,t){KAMPYLE_FUNC.setQuarantineDeclinedDate(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_INVITE_DECLINED),w()}function R(e,t){KAMPYLE_DATA.setFormState(t.formId,{loading:!1,loaded:!0}),u(t)}function U(e,t){t=t||{};var n=KAMPYLE_UTILS.getBrowser(),n="MSIE"!==n.name||"MSIE"===n.name&&8<parseInt(n.version,10);!1!==t.isScreenCaptureEnabled&&n&&KAMPYLE_SCREEN_CAPTURE.init(function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_screenCaptureLoaded",{formId:t.formId})})}function F(e,t){t=t||{};var n,r=KAMPYLE_DATA.getFormData(t.formId);switch(KAMPYLE_DATA.getDisplayType(r)){case KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX:n="kampyleForm";break;case KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION:n="kampyleFormAnimation";break;default:n="kampyleForm"}t=n+t.formId;KAMPYLE_UTILS.sendMessageToIframe(t,{action:"screenCaptureLoaded"})}function k(){KAMPYLE_DATA.setMemoryData("kampyleFocusedElement",document.activeElement)}function w(){var e;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||(e=KAMPYLE_DATA.getMemoryData("kampyleFocusedElement"))&&e.focus&&e.focus()}function G(e){var t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();return!(!e||!t||!t.provisions||!t.provisions[e]&&"true"!==t.provisions[e])}function V(){var e,t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().provisions,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=G(e));return n}function x(){return KAMPYLE_DATA.getMemoryData("kampyleDevice")||KAMPYLE_DATA.setMemoryData("kampyleDevice",KAMPYLE_UTILS.getDeviceTypeByUserAgent(navigator.userAgent)),KAMPYLE_DATA.getMemoryData("kampyleDevice")||"desktop"}function B(e){return 1===KAMPYLE_DATA.getMemoryData("version")?e.screenCapture={isTaken:!1}:e.integrations.screenCapture={isTaken:!1},e}function H(e,t){t=t||{};var n,r,o=KAMPYLE_DATA.getFormData(t.formId);if(!o||!t.formId)return!1;var i=KAMPYLE_DATA.getDisplayType(o);switch(i){case"animation":r=document.getElementById("kampyleFormAnimation"+t.formId);break;case"lightbox":r=document.getElementById("kampyleForm"+t.formId);break;case"popup":n=KAMPYLE_DATA.getMemoryData("popupHandler");break;case KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED:r=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId);break;default:return KAMPYLE_UTILS.showWarning("Invalid display type - "+i),!1}var a="*";if(r&&r.getAttribute&&(a=r.getAttribute("origin")||"*",n=r.contentWindow),n&&n.postMessage){MDIGITAL.CUSTOM_PARAMETERS.hasCustomParams(t.formId)&&(E=MDIGITAL.CUSTOM_PARAMETERS.formatCustomParams(t.formId),n.postMessage('{"action": "customParamsLoaded","customParams" : '+JSON.stringify(E)+"}",a));var A='{"action": "setFormId","formId" : '+t.formId+"}";n.postMessage(A,a),(A={action:"setExtraData"}).provisions=V(),A.integrations=KAMPYLE_INTEGRATION.getIntegrationData(),A.websiteId=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null,A.device=KAMPYLE_DATA.getMemoryData("kampyleDevice"),A.context=KAMPYLE_DATA.getMemoryData("context"),A.url=encodeURIComponent(document.location.href),A.customCssUpload=KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.CUSTOM_CSS_UPLOAD),(A=B(A)).isScreenCaptureEnabled=KAMPYLE_COMMON.isScreenCaptureEnabled(t.formId),A.provisions.screenCapture=G("screenCapture")||G("screenCaptureEnabled"),A.displayType=KAMPYLE_DATA.getDisplayType(o);var E=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();Object.assign(A,{submitUrlPrefix:E.submitUrlPrefix,submitUrlSuffix:E.submitUrlSuffix,submitUrlWithBackendUUID:E.submitUrlWithBackendUUID,globalResourcesUrl:E.globalResourcesUrl,versionedResourcesUrl:o.versionedResourcesUrl}),KAMPYLE_FUNC.checkProvision("serverBasedTargeting")&&(A.endUserIdentifier=N(),KAMPYLE_EVENT_DISPATCHER.trigger("neb_initUserIdentifierOnExtraData",{hasIdentifierValue:null!==A.endUserIdentifier}));var s=KAMPYLE_DATA.flushFormExtraData(t.formId);if(s)for(var l in s)s.hasOwnProperty(l)&&(A[l]=s[l]);KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)?KAMPYLE_DATA.fetchFormJsonData({formId:o.formId,callback:function(e){A=Object.assign({},A,{formData:e}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&(A.formLanguage=MDIGITAL.LOCALIZATION.getFormLanguage(t.formId)||null),n.postMessage(JSON.stringify(A),a)},onError:function(e){console.error(e)}},!0):n.postMessage(JSON.stringify(A),a)}KAMPYLE_EVENT_DISPATCHER.trigger("neb_formShown",{formId:t.formId,feedbackCorrelationUUID:t.feedbackCorrelationUUID})}function W(e,t){t=t||{},KAMPYLE_DATA.setMemoryData("NEB_FORM_VERSION",t.formVersion||0)}function z(e,t){var n,r=KAMPYLE_DATA.getMemoryData("formsState")||{};for(n in r)if(r.hasOwnProperty(n)){var o=!MDIGITAL.FORM_STATE.isFormAlreadyShown(n)&&(e&&e==n||t&&KAMPYLE_DATA.isSkipInvitation(n));if((r[n].shown||r[n].shouldBeShown)&&!KAMPYLE_DATA.isEmbeddedDisplayType(n)&&!o)return!0}return!1}function X(){KAMPYLE_DATA.isFeatureEnabled("SPA")&&C()}function j(){var e=Number(KAMPYLE_DATA.getData("kampyleUserSession"));return e?Math.floor(KAMPYLE_UTILS.getTimeDiff(e,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS)):0}function q(){var e=Number(KAMPYLE_DATA.getData("kampylePageLoadedTimestamp"));return e?Math.floor(KAMPYLE_UTILS.getTimeDiff(e,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS)):0}function J(e){e=Number(KAMPYLE_DATA.getData(e));return e?KAMPYLE_UTILS.getTimeDiff(e,KAMPYLE_CONSTANT.TIME_FORMATS.DAYS):null}function Q(e,t){var n=(KAMPYLE_DATA.getMemoryData("kampyleDevice")||KAMPYLE_CONSTANT.DEVICES.DESKTOP).toLowerCase(),r=KAMPYLE_DATA.getFormData(t.formId),t={desktop:n===KAMPYLE_CONSTANT.DEVICES.DESKTOP,mobile:n===KAMPYLE_CONSTANT.DEVICES.MOBILE,tablet:n===KAMPYLE_CONSTANT.DEVICES.TABLET,abandon:!!KAMPYLE_DATA.getMemoryData("targetingState.abandon"),time_in_session:j(),time_on_page:q(),excluded_urls:KAMPYLE_UTILS.getNestedPropertyValue(r,"urlRules.exclusionUrl.rule"),included_urls:KAMPYLE_UTILS.getNestedPropertyValue(r,"urlRules.inclusionUrl.rule"),number_of_visits:Number(KAMPYLE_DATA.getData("kampyleUserSessionsCount"))||1,last_declined:J("DECLINED_DATE"),last_feedback:J("SUBMITTED_DATE"),percentage:KAMPYLE_TARGETING.getUserPercentile(t.formId)};KAMPYLE_DATA.setMemoryData("invitationTriggeringData",t)}return{increasePageViewCounter:y,subscribeToCustomEvents:A,subscribeToPageEvents:m,createSession:S,updateTargeting:function(e,t){var n,r;G("serverBasedTargeting")&&KAMPYLE_DATA.getMemoryData("identifierValue")&&((n={})[e]=t,r=KAMPYLE_DATA.getServerBasedTargetingPrefix()+"/api/targeting/property/"+KAMPYLE_DATA.getServerBasedTargetingEnv()+MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId+"/identity/"+encodeURIComponent(KAMPYLE_DATA.getMemoryData("identifierValue")),e=n[e],KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_updatingSbtServer",{dataState:e,dataValue:t}),KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.POST,r,n))},checkProvision:G,getAllProvisions:V,onSyncIdentifierDataSuccess:function(e,t){!t||t.error?KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError({message:"Invalid identifier data. Data: "+JSON.stringify(t)}):D(t),"function"==typeof e&&e()},shouldRenderForm:T,addScreenCaptureData:B,sendFormExtraData:H,handleVersion:W,showPreviewForm:f,updatePreviewIframeStyle:p,validateFormContract:t,getTriggerTypeByEvent:c,prepareInviteTriggeringData:Q,loadScreenCaptureApi:U,handleInviteLoaded:L,sendInviteInitialData:M,checkDevice:x,shouldSyncIdentifier:function(e){var t=KAMPYLE_DATA.getMemoryData("identifierValue"),n=!0===KAMPYLE_DATA.getMemoryData("isSyncedIdentifierData"),r=!!KAMPYLE_FUNC.checkProvision("serverBasedTargeting");return!!e&&r&&(!n||t!==e)},prepareJsonData:d,shouldSkipFetchingFormData:function(e,t,n,r){var o=KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FETCHING_DATA_IN_PROGRESS+e;return r&&(o=o+"_"+n),o=KAMPYLE_DATA.getMemoryData(o),!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)||s(e,!1)||E(e,t)||o},getTimeInSession:j,getTimeOnPage:q,isReferrerDifferentThanHost:function(){var e=document.referrer.match(/:\/\/(.[^/]+)/);if(!e)return!0;if((e=e[1])===window.location.host)return!1;var t=KAMPYLE_DATA.getPropertySharedSubdomain();return!t||(!KAMPYLE_UTILS.isHostMatchesSubdomain(e,t)||!KAMPYLE_UTILS.isHostMatchesSubdomain(window.location.host,t))},setQuarantineDeclinedDate:function(e){var t="DECLINED_DATE",n=KAMPYLE_UTILS.getCurrentTimestamp();KAMPYLE_DATA.setData(t,n),G("serverBasedTargeting")&&KAMPYLE_EVENT_DISPATCHER.trigger(e,{declinedDate:n}),KAMPYLE_FUNC.updateTargeting(t,n)},setQuarantineSubmittedDate:function(){var e="SUBMITTED_DATE",t=KAMPYLE_UTILS.getCurrentTimestamp();KAMPYLE_DATA.setData(e,t),KAMPYLE_FUNC.checkProvision("serverBasedTargeting")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_updateTargetingWithSubmittedDate",{submittedDate:t}),KAMPYLE_FUNC.updateTargeting(e,t)},handleFormClosed:Y,handleFeedbackSubmitted:b,handleInviteDeclined:v,init:function(){e={neb_inviteReady:[M],neb_buttonClicked:[n],neb_inviteAccepted:[n],neb_showInvitation:[Q],neb_sdkPageView:[P,KAMPYLE_DATA.initOnsiteDefaultState,KAMPYLE_DATA.resetAllFormsLanguagesCode]},KAMPYLE_EVENT_DISPATCHER.subscribeMany(e),KAMPYLE_VIEW.init(),window.MDIGITAL&&window.MDIGITAL.EMBEDDED&&window.MDIGITAL.EMBEDDED.init(),G(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?window.MDIGITAL&&window.MDIGITAL.MODAL_DIALOGS&&window.MDIGITAL.MODAL_DIALOGS.init():G(KAMPYLE_CONSTANT.PROVISIONS.WCAG_TRAP_FOCUS_IN_MODAL)&&window.MDIGITAL&&window.MDIGITAL.WCAG&&window.MDIGITAL.WCAG.init(),KAMPYLE_TARGETING.init(),KAMPYLE_MESSAGE.init(),KAMPYLE_ANIMATION.init();var e=t(e=MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{});KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,e),e=KAMPYLE_UTILS.getUrlParam("nebContext")||"live",KAMPYLE_DATA.setMemoryData("context",e),KAMPYLE_DATA.setMemoryData("kampyleDevice",x()),KAMPYLE_DATA.setMemoryData("hostedViewportContent",[]),KAMPYLE_DATA.setMemoryData("isGuest",!0),e=KAMPYLE_UTILS.getBrowser(),"preview"!==KAMPYLE_DATA.getMemoryData("context")&&("MSIE"!==e.name||parseInt(e.version,10)),KAMPYLE_SESSIONCAM.init(),MDIGITAL.CUSTOM_EVENTS.init(),S(),m(),A(),KAMPYLE_UTILS.setEventHandler(window,"hashchange",X)},startCheckingTargeting:C,isAnyOtherFormAlreadyShown:z,isAnyInviteShown:function(){var e,t=KAMPYLE_DATA.getMemoryData("formsState")||{};for(e in t)if(t.hasOwnProperty(e)&&t[e].inviteShown)return!0;return!1},getSafeCustomParamVal:function(e){var t=(e=e||{}).value,n=e.type||"";if(null!==(t=void 0===t?MDIGITAL.CUSTOM_PARAMETERS.fetchCPValue(e):t))switch(n.toLowerCase()){case"datetime":t="string"==typeof t?parseInt(t)||null:t instanceof Date||t.getTime&&!isNaN(t.getTime())?t.getTime():null;break;case"number":t=KAMPYLE_UTILS.getNumericValue(t);break;case"text":"string"!=typeof t&&(t=null);break;case"boolean":"true"===t?t=!0:"false"===t&&(t=!1),"boolean"!=typeof t&&(t=null);break;default:t=null,console.error("Invalid custom parameter type "+n)}return t},isPreloadConfigured:function(){var e=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();return!!e&&"false"!==e.isFormsPreloaded&&!1!==e.isFormsPreloaded},kampyleButtonClicked:function(e){e=e||{},KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:e.formId})},loadMultipileForms:r,routeToForm:o,updateIdentifierDataIntegerIfNecessary:O,syncIdentifierData:function(e,t){var n=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null,n=KAMPYLE_DATA.getServerBasedTargetingPrefix()+"/api/targeting/property/"+KAMPYLE_DATA.getServerBasedTargetingEnv()+n+"/identity/"+e,e=KAMPYLE_FUNC.onSyncIdentifierDataSuccess.bind(null,t),t=function(e,t){KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError({message:"Failed to fetch identifier data. Error: "+JSON.stringify(t)}),"function"==typeof e&&e()}.bind(null,t);KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,n,null,e,t)},getUserIdentifierVal:N,handleFormStateUpdated:u,hasApplicationLoadingFailed:E,isJsonDataLoaded:s,handleInviteApplicationUpdated:a,isFormLoaded:_}}(),window.KAMPYLE_DATA=function(){var n,r,o={abandon:"abandon",percentage:"kampyleInvitePercentageUsers",timeInSession:"kampyleTimeInSession",timeOnPage:"kampyleTimeOnPage",deviceTypes:"devicetypes",pageEvents:"pageElementEvent"},i={GTM:"isGoogleAnalyticsClientGTM",WCAG:"isWCAG",SPA:"isSpa",MANUALLY_INVITE_TARGETING:"isManuallyInviteTargeting",CUSTOM_CSS_UPLOAD:"customCssUpload"},a=[KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_BUTTON_FORMS_FROM_QUARANTINE,KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE,KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_CODE_FORMS_FROM_QUARANTINE];function A(e){var t=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);return KAMPYLE_UTILS.getNestedPropertyValue(t,e)}function E(e){return e=e||"",KAMPYLE_UTILS.getNestedPropertyValue(r,e)}function s(e,t){KAMPYLE_UTILS.setNestedPropertyValue(r,e,t)}function l(e){for(var t,n=T(),r=n.length,o=0;o<r;o++)if(t=n[o],parseInt(e)===parseInt(t.formId))return t;return null}function _(e){return E("formsState."+(e=e||""))||null}function d(e,t){t=t||{};var n,r=E("formsState")||{};for(n in r[e]=r[e]||{},t)"object"==typeof r[e][n]&&null!==r[e][n]?Object.assign(r[e][n],t[n]):r[e][n]=t[n];s("formsState",r)}function T(){return(MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{}).formNodes||[]}function u(e){var t=KAMPYLE_DATA.getMemoryData("kampyleDevice"),e=KAMPYLE_UTILS.getNestedPropertyValue(e,"formDisplay.displayType");return t!==KAMPYLE_CONSTANT.DEVICES.DESKTOP?e===KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED?KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED:KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX:e||KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX}function m(){return KAMPYLE_UTILS.getNestedPropertyValue(n,"cookieExpirationTime")||KAMPYLE_CONSTANT.COOKIE_EXPIRATION}function c(e){e=KAMPYLE_UTILS.getNestedPropertyValue(KAMPYLE_DATA.getFormData(e),"formType");return KAMPYLE_CONSTANT.FORM_TRIGGER_TYPES_MAP[e]?e:null}return{init:function(){n=MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{},r={}},isFeatureEnabled:function(e){var t=i[e];return!!(t=null==t&&-1!==a.indexOf(e)?e:t)&&!!KAMPYLE_UTILS.getNestedPropertyValue(n,t)},getData:function(t){try{return KAMPYLE_DATA.getPropertySharedSubdomain()?KAMPYLE_UTILS.kampyleGetCookie(KAMPYLE_UTILS.TOP_LEVEL_DOMAIN_COOKIE_PREFIX+t):localStorage[t]||KAMPYLE_UTILS.kampyleGetCookie(t)}catch(e){return KAMPYLE_UTILS.kampyleGetCookie(t)}},setData:function(e,t,n){if(!KAMPYLE_DATA.getPropertySharedSubdomain())try{localStorage[e]=t}catch(e){}return KAMPYLE_UTILS.kampyleSetCookie(e,t,n||m(),KAMPYLE_DATA.getPropertySharedSubdomain()),!0},deleteData:function(e){var t=KAMPYLE_DATA.getPropertySharedSubdomain();if(t)KAMPYLE_UTILS.kampyleDeleteCookie(KAMPYLE_UTILS.TOP_LEVEL_DOMAIN_COOKIE_PREFIX+e,t);else{try{void 0!==localStorage[e]&&delete localStorage[e]}catch(e){}KAMPYLE_UTILS.kampyleDeleteCookie(e)}},getAllForms:T,getInegrations:function(){return(MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{}).integrations||{}},getFormData:l,getMemoryData:E,getTargetingData:function(e,t){return e&&t&&o[t]?(e=l(e)||{},KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData."+o[t])):null},setMemoryData:s,getShownFormId:function(){var e,t=KAMPYLE_DATA.getMemoryData("formsState")||{};for(e in t)if(t.hasOwnProperty(e)&&t[e].shouldBeShown)return e;return!1},getFormState:_,setFormState:d,getInviteData:function(e){return(e=l(e))?e.inviteData:null},getDisplayType:u,saveFormExtraData:function(e,t){t=t||{};var n=(_(e)||{}).pendingExtraData||{};d(e,{pendingExtraData:t=Object.assign(n,t)})},flushFormExtraData:function(e){var t=_(e)||{},e={};return t&&t.pendingExtraData&&(e=t.pendingExtraData,delete t.pendingExtraData),e},isCustomHtmlForm:function(e){var t=l(e)||{},e=KAMPYLE_UTILS.getUrlParam("isCustomHtml");return!0===t.isCustomHtmlEnabled||"true"===t.isCustomHtmlEnabled||!0===e||"true"===e},getCookieExpiration:m,isNewMobileInvitation:function(){var e=KAMPYLE_FUNC.checkProvision("mobileInvitationLayout"),t=KAMPYLE_DATA.getMemoryData("kampyleDevice");return!!e&&"desktop"!==t},isCustomHtmlAndFixedSizeForm:function(e){var t=KAMPYLE_DATA.isCustomHtmlForm(e),n=KAMPYLE_FUNC.checkProvision("dynamicModalSizeInCustomHtml");return t&&(!n||(!0===(e=l(e=e)||{}).isFixedSize||"true"===e.isFixedSize))},deleteMemoryData:function(e){delete(r||{})[e]},getFormVersion:function(e){return e=KAMPYLE_DATA.getFormData(e),Number((e||{}).formVersion)||0},isMobileDynamicSizing:function(e){var t=KAMPYLE_DATA.getMemoryData("kampyleDevice"),n=KAMPYLE_CONSTANT.FEATURE_VERSIONS.MOBILE_DYNAMIC_SIZING;e=e||KAMPYLE_DATA.getMemoryData("currentFormId");var r=KAMPYLE_DATA.isCustomHtmlForm(e);return(r&&KAMPYLE_FUNC.checkProvision("mobileWebDynamicFormSize")||!r&&KAMPYLE_FUNC.checkProvision("mobileWebDynamicFormSizeInFormBuilder"))&&t&&"desktop"!==t&&KAMPYLE_DATA.getFormVersion(e)>=n},getPropertySharedSubdomain:function(){var e=A("sharedSubdomain");return e&&KAMPYLE_UTILS.isHostMatchesSubdomain(window.location.host,e)?e:null},getUserIdentifier:function(){for(var e=A("formNodes")||[],t=0;t<e.length;t++){var n=(e[t].customParams||[]).find(function(e){return"true"===e.is_identifier.toLowerCase()})||null;if(null!==n)return n}return null},getServerBasedTargetingPrefix:function(){return A("sbtServerDomain")},getServerBasedTargetingEnv:function(){return A("sbtEnvPrefix")},isPopupDisplayType:function(e){return u(l(e))===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP},isEmbeddedDisplayType:function(e){return u(l(e))===KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED},isLightBoxDisplayType:function(e){return u(l(e))===KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX},fetchFormJsonData:function(t,n){var r=KAMPYLE_DATA.getMemoryJsonKey(t.formId,t.isInvite),e=KAMPYLE_DATA.getMemoryData(r),o=KAMPYLE_DATA.getDataJsonUrl(t.formId,t.isInvite);if(e)return t.fetchingDataInProgressKey&&KAMPYLE_DATA.setMemoryData(t.fetchingDataInProgressKey,!1),"function"==typeof t.callback&&t.callback(e);if(!o){e=new Error("Failed to get JSON, jsonDataUrl is missing.");return"function"==typeof t.onError&&t.onError(e)}KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,o,null,function(e){n&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_warning",{message:"second http request have been made to the url: "+o}),e?(KAMPYLE_DATA.setMemoryData(r,e),t.fetchingDataInProgressKey&&KAMPYLE_DATA.setMemoryData(t.fetchingDataInProgressKey,!1),"function"==typeof t.callback&&t.callback(e)):(e=new Error("Invalid form json data. Data: "+JSON.stringify(e)),KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError(e),"function"==typeof t.onError&&t.onError(e))},function(e){KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError({message:"Failed to fetch JSON data. Error: "+JSON.stringify(e)}),"function"==typeof t.onError&&t.onError(e)})},getFormTriggerType:c,getPropertyId:function(){return MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null},isMobile:function(){var e=KAMPYLE_DATA.getMemoryData("kampyleDevice");return e&&"desktop"!==e},isSkipInvitation:function(e){return e=l(e)||{},(e=KAMPYLE_UTILS.getNestedPropertyValue(e,"inviteData.skipInvitation"))&&"false"!==e},getFormIframeId:function(e){var t=KAMPYLE_DATA.getFormData(e);return null==t?null:t.formType===KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED?KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e:(t=u(t))===KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX?KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.IFRAME_ID_PREFIX+e:t===KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION?KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+e:null},isFormOfType:function(e,t){return!!(e=c(e))&&e===t},getMemoryJsonNestedPropertyValue:function(e,t,n){return n=KAMPYLE_DATA.getMemoryJsonKey(e,n),null!=(n=KAMPYLE_DATA.getMemoryData(n))?KAMPYLE_UTILS.getNestedPropertyValue(n,t):null},resetAllFormsLanguagesCode:function(){for(var e=KAMPYLE_DATA.getAllForms(),t=0;t<e.length;t++){var n=e[t];MDIGITAL.LOCALIZATION.detectAndSetFormLanguage(n)}},getMemoryJsonKey:function(e,t){var n=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS),t=(t?KAMPYLE_CONSTANT.INVITE_JSON_DATA_KEY_PREFIX:KAMPYLE_CONSTANT.FORM_JSON_DATA_KEY_PREFIX)+e;return t=n?t+"_"+MDIGITAL.LOCALIZATION.getFormLanguage(e):t},setTimeoutHandler:function(e,t){s(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS+"."+e,t)},getTimeoutHandler:function(e){return E(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS+"."+e)},localizeUrl:function(e,t){return e=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&MDIGITAL.LOCALIZATION.getFormLanguage(e)||KAMPYLE_CONSTANT.LOCALIZED_FORM_DEFAULT_REPLACE_VALUE,t.replace("###LANGUAGE_CODE###",e)},getMemory:function(){return r},initOnsiteDefaultState:function(){for(var e,t={},n=(MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{}).formNodes||[],r=n.length,o=0;o<r;o++)(e=n[o])&&(t[e.formId]={loading:!1,loaded:null,shouldBeShown:!1,shown:!1,inviteLoaded:null,inviteShown:!1,jsonFailed:!1,applicationFailed:!1,isCurrentlySubmitted:!1,targeting:{pageTargeting:null,behavioralTargeting:[],quarantineTargeting:[]}});s("formsState",t),s("hostingElementsHeights",{}),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,!1),KAMPYLE_DATA.clearAllTimeoutHandlers()},getDataJsonUrl:function(e,t){var n=KAMPYLE_DATA.getFormData(e);return(t=KAMPYLE_UTILS.getNestedPropertyValue(n,t?"inviteData.inviteDataUrl":"formDataUrl"))?KAMPYLE_DATA.localizeUrl(e,t):null},clearAllTimeoutHandlers:function(){var e,t=E(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS);for(e in t)window.clearTimeout(t[e]);s(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS,{})},getNestedConfigurationProperty:A}}(),window.KAMPYLE_TARGETING=function(a){var t={DECLINED_DATE:"The user did not decline",SUBMITTED_DATE:"The user did not submit"};function o(e,t){t=Number(KAMPYLE_DATA.getData(t));if(e=Number(e),!t||!e)return!1;return t+864e5*e>KAMPYLE_UTILS.getCurrentTimestamp()}function e(e,t){if(t=t||{},!KAMPYLE_DATA.getFormData(t.formId))return!1;var n=KAMPYLE_DATA.getMemoryData("kampyleDevice");return n!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&n!==KAMPYLE_CONSTANT.DEVICES.TABLET||KAMPYLE_FUNC.isPreloadConfigured()&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:t.formId}),KAMPYLE_DATA.setFormState(t.formId,{loaded:null}),KAMPYLE_DATA.setMemoryData("buttonFormId",t.formId),KAMPYLE_EVENT_DISPATCHER.trigger("neb_showButton",{formId:t.formId}),KAMPYLE_DATA.setMemoryData("isButtonShown",!0),!0}function A(e){var t=KAMPYLE_DATA.getMemoryData("currentInviteFormId");if(!(e=e||KAMPYLE_DATA.getFormData(t))||KAMPYLE_DATA.getMemoryData("isInvitationShouldBeIgnored"))return!1;var n,r=KAMPYLE_DATA.getMemoryData("targetingState");for(n in r)if(!0!==r[n])return!1;t=KAMPYLE_TARGETING.shouldDisableIntercept(e);if(KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_BEHAVIORAL_TARGETING_PHASE_ENDED,e),t)return!1;t=i(e);if(KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_QUARANTINED_SURVEY_PHASE_ENDED,e),!t)return!1;KAMPYLE_DATA.setData("kampyleInvitePresented",!0);t=KAMPYLE_UTILS.getNestedPropertyValue(e,"inviteData.skipInvitation");return KAMPYLE_UTILS.isTruthy(t)?function(e){KAMPYLE_FUNC.isPreloadConfigured()||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e.formId});KAMPYLE_EVENT_DISPATCHER.trigger("neb_skipInvitation",{formId:e.formId})}(e):KAMPYLE_TARGETING.handleNotSkippedInvitaion(e),!0}function i(e){var t=f(e),n=!0===KAMPYLE_DATA.getMemoryData("formIsShown"),r=KAMPYLE_UTILS.isTrue(KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.kampyleInvitePerSession.inviteOncePerSession")),o=!r&&KAMPYLE_UTILS.isTrue(KAMPYLE_DATA.getData("kampyleInvitePresented"));KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_TARGETING_RULE_EVALUATED,{formId:e.formId,targetingRule:KAMPYLE_CONSTANT.TARGETING_RULES.INVITE_IF_ANY_INVITE_ALREADY_SHOWN_PER_SESSION,formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!o,expected:"Display Invite "+(r?"more than once per session":"once per session"),actual:!o});var i=!1;return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&(i=!r&&KAMPYLE_UTILS.isTrue(KAMPYLE_DATA.getData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION)),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_TARGETING_RULE_EVALUATED,{formId:e.formId,targetingRule:KAMPYLE_CONSTANT.TARGETING_RULES.INVITE_IF_ANY_SURVEY_ALREADY_SUBMITTED_PER_SESSION,formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!i,expected:"Display Invite "+(r?"more than once per session":"once per session"),actual:!i})),!(t||n||o||i)}function E(e){var t=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SERVER_BASED_TARGETING)&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DO_NOT_SURVEY_ON_UBT_NETWORK_FAIL)&&!KAMPYLE_DATA.getMemoryData("isGuest")&&!KAMPYLE_DATA.getMemoryData("isSyncedIdentifierData");return t&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"ubtFailed",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:!t,expected:"should ignore quarantine rules evaluation",actual:t}),t}function s(e){return!(e&&e.onSiteData&&e.onSiteData.genericRule)||("string"==typeof e.onSiteData.genericRule&&(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.GREATER_SMALLER_THAN_DECODE)&&(e.onSiteData.genericRule=KAMPYLE_UTILS.htmlDecode(e.onSiteData.genericRule)),e.onSiteData.genericRule=JSON.parse(e.onSiteData.genericRule)),KAMPYLE_TARGETING.evaluateRule(e.onSiteData.genericRule,e))}function r(e){if("string"!=typeof e)return!1;e=e.toLowerCase();var t=a.location.href.toLowerCase();return t.substring(0,e.length)===e||(t=t.replace(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i,"")).substring(0,e.length)===e}function l(e){for(var t=(e=e.split(";")).length,n=0;n<t;n++)if(!0===r(e[n]))return!0;return!1}function _(e,t){var n,r,o=!1;if(!e)return!1;var i,a,A=KAMPYLE_UTILS.safeToLower(e.condition);return e&&void 0!==e.value&&null!==e.value&&-1!==["customParam"].indexOf(e.fieldOrigin)?"customParam"===e.fieldOrigin&&((i=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamById(e.fieldId,t))&&i.source_name&&(n=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({type:i.type,name:i.source_name,source:i.source}),r=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({type:i.type,name:i.source_name,source:i.source,value:e.value}),t=i.type,a=e.condition,e={text:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL,KAMPYLE_CONSTANT.OPERATORS.CONTAINS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_CONTAIN,KAMPYLE_CONSTANT.OPERATORS.STARTS_WITH,KAMPYLE_CONSTANT.OPERATORS.ENDS_WITH,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE,KAMPYLE_CONSTANT.OPERATORS.REGEX],boolean:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE],datetime:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL,KAMPYLE_CONSTANT.OPERATORS.LATER_THAN,KAMPYLE_CONSTANT.OPERATORS.EARLIER_THAN,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE],number:[KAMPYLE_CONSTANT.OPERATORS.EQUALS,KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL,KAMPYLE_CONSTANT.OPERATORS.GREATER_THAN,KAMPYLE_CONSTANT.OPERATORS.SMALLER_THAN,KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE]},t=KAMPYLE_UTILS.safeToLower(t),a=KAMPYLE_UTILS.safeToLower(a),a=!!(t&&a&&e[t]&&-1!==e[t].indexOf(a))),void 0!==n&&a&&(o=KAMPYLE_UTILS.kampyleCompareByOperator(n,r,A,i.type))):o=!1,o}function d(e){if(e&&e.onSiteData&&e.onSiteData.devicetypes){for(var t=e.onSiteData.devicetypes.length,n=0;n<t;n++)if(e.onSiteData.devicetypes[n]===KAMPYLE_DATA.getMemoryData("kampyleDevice"))return!0;return!1}return!0}function T(e){e=e||{};var t=Number(KAMPYLE_DATA.getData("kampyleSessionPageCounter")||0);return KAMPYLE_UTILS.kampyleCompareByOperator(t,parseInt(e.numberOfRepeats),e.compareString)}function u(e,t,n){var r=1e3*parseInt(e),o=(i=KAMPYLE_DATA.getData("kampyleUserSession"),i=parseInt(i),KAMPYLE_UTILS.getTimeDiff(i)),i=KAMPYLE_DATA.getMemoryData("targetingState");i&&r<=o?(i.kampyleTimeInSession=!0,KAMPYLE_DATA.setMemoryData("targetingState",i),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"TimeInSession",formTriggerType:KAMPYLE_DATA.getFormTriggerType(t.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,isPassed:!0,expected:r,actual:"Over on the expected "+r}),KAMPYLE_TARGETING.isShowInvite()):setTimeout(function(){u(e,t)},0+(r-o))}function m(e,t){var n=(e=e||{height:"5",zIndex:"0"}).zIndex||"0",r=e.height&&"0"!==e.height?e.height+"px":"5px",e=a.getElementById("kampyle_abandon_zone");null===e?((e=a.createElement("div")).id="kampyle_abandon_zone",e.style.width="100%",e.style.height=r,e.style.zIndex=n,e.style.position="fixed",e.style.top="0px",e.onmouseover=function(){var e;e=t,KAMPYLE_DATA.setMemoryData("targetingState.abandon",!0),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"UserAbandonment",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),isPassed:!0,targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,expected:"Mouse over user abandonment",actual:"Mouse was over user abandonment"}),!1===A()&&KAMPYLE_DATA.setMemoryData("targetingState.abandon",!1)},a.body.appendChild(e)):(e.style.height=r,e.style.zIndex=n)}function c(e){if(!e||!e.selectorValue||!e.selectorType)return null;var t="{{selector}}{{value}}";switch(e.selectorType){case"className":t=t.replace("{{selector}}",".");break;case"objectId":t=t.replace("{{selector}}","#");break;default:return KAMPYLE_UTILS.showWarning("Invalid selector type:"+e.selectorType),null}return t=t.replace("{{value}}",e.selectorValue)}function I(e,t){var n=c(e);if(!n)return null;for(var r=Number(e.time)||0,o=a.querySelectorAll(n)||[],i=0;i<o.length;i++)o[i].addEventListener(e.eventName,function(){setTimeout(function(){KAMPYLE_DATA.setMemoryData("targetingState.kampylePageElementEvent",!0),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"PageElement",formTriggerType:KAMPYLE_DATA.getFormTriggerType(t.formId),isPassed:!0,targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,expected:e.eventName+" for element with "+e.selectorType+"="+e.selectorValue,actual:!0}),!1===A()&&KAMPYLE_DATA.setMemoryData("targetingState.kampylePageElementEvent",!1)},1e3*r)})}function S(e,n){null!==e?(setTimeout(function(){var e,t;KAMPYLE_DATA.setMemoryData("targetingState.kampyleTimeOnPage",!0),e=n,(t=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.kampyleTimeOnPage.time"))&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"TimeOnPage",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),isPassed:!0,targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,expected:t,actual:"Over on the expecetd "+t}),A()},1e3*e),KAMPYLE_DATA.setData("kampylePageLoadedTimestamp",KAMPYLE_UTILS.getCurrentTimestamp())):KAMPYLE_DATA.setMemoryData("targetingState.kampyleTimeOnPage",!0)}function L(e){if(null===e)return KAMPYLE_DATA.setMemoryData("targetingState.kampyleIdleTime",!0);function t(){n=KAMPYLE_UTILS.getCurrentTimestamp()}var n=KAMPYLE_UTILS.getCurrentTimestamp(),r=setInterval(function(){KAMPYLE_UTILS.getCurrentTimestamp()-n>=1e3*e&&(KAMPYLE_DATA.setMemoryData("targetingState.kampyleIdleTime",!0),A(),removeEventListener("click",t),removeEventListener("mousemove",t),removeEventListener("keydown",t),clearInterval(r))},1e3);addEventListener("click",t),addEventListener("mousemove",t),addEventListener("keydown",t)}function g(e){var t=KAMPYLE_DATA.getData("kampyleUserPercentile");return t||"0"===t||(t=100*Math.random(),KAMPYLE_DATA.setData("kampyleUserPercentile",t)),Number(t)&&Number(t).toFixed?Number(t).toFixed(1):Number(t)}function M(e){var t=g();if(e&&t&&Number(e.prec)<t)return!1;return!0}function n(e,t){var n;KAMPYLE_TARGETING.isEmbbeddedTargetingEnabled()||KAMPYLE_TARGETING.initEmbeddedTargeting(),KAMPYLE_DATA.setMemoryData("invitationTimeStamp",null),KAMPYLE_DATA.setMemoryData("buttonFormId",null),KAMPYLE_DATA.setMemoryData("formIsShown",!1),KAMPYLE_DATA.setMemoryData("isButtonShown",!1),KAMPYLE_DATA.setMemoryData("isInviteActivated",!1),KAMPYLE_DATA.setMemoryData("targetingState",{}),(n=KAMPYLE_DATA.getMemoryData("targetingState")).kampyleTimeInSession=!1,"desktop"===KAMPYLE_DATA.getMemoryData("kampyleDevice")&&(n.abandon=!1),n.kampylePageElementEvent=!1,n.kampyleTimeOnPage=!1,n.kampyleIdleTime=!1,KAMPYLE_DATA.setMemoryData("targetingState",n),P(e,t)}function P(e,t){var n,r,r=(r=null,KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SERVER_BASED_TARGETING)&&(n=null!==(r=KAMPYLE_FUNC.getUserIdentifierVal()),KAMPYLE_DATA.setMemoryData("isGuest",!n),KAMPYLE_EVENT_DISPATCHER.trigger("neb_initUserIdentifier",{hasIdentifierValue:n})),r);KAMPYLE_FUNC.shouldSyncIdentifier(r)?(KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_settingIdentifierValueOnMemory",{hasIdentifierValue:null!==r}),KAMPYLE_DATA.setMemoryData("identifierValue",r),KAMPYLE_FUNC.syncIdentifierData(encodeURIComponent(r),p.bind(this,e,t))):(KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_shouldNotSyncIdentifier"),p(0,t))}function p(e,t){t=t||{};var n=KAMPYLE_DATA.getAllForms();if(n&&n.length){KAMPYLE_TARGETING.isEmbbeddedTargetingEnabled()&&KAMPYLE_TARGETING.initEmbeddedTargeting();for(var r=n.length-1;0<=r&&(n[r].formType!==KAMPYLE_CONSTANT.FORM_TYPES.BUTTON||t.skipButtonTargeting||!1!==KAMPYLE_DATA.getMemoryData("isButtonShown")?KAMPYLE_TARGETING.shouldCheckInvite(n[r],t)&&!0===(KAMPYLE_TARGETING.validateCommonTargetingOnForm(n[r])&&KAMPYLE_TARGETING.validateCommonSessionTargeting(n[r].formId))&&KAMPYLE_TARGETING.initDynamicTargeting(n[r]):!0===KAMPYLE_TARGETING.validateCommonTargetingOnForm(n[r])&&KAMPYLE_EVENT_DISPATCHER.trigger("neb_initButton",{formId:n[r].formId}),!0!==KAMPYLE_DATA.getMemoryData("isInviteActivated")||!0!==KAMPYLE_DATA.getMemoryData("isButtonShown"));r--);KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_PAGE_TARGETING_PHASE_ENDED)}}function f(e){var t=KAMPYLE_TARGETING.isAlreadyDeclined(e),e=KAMPYLE_TARGETING.isAlreadySubmitted(e);return t||e}return{init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_targetingInit:[n],MDigital_manuallyInviteTargeting:[P],neb_initButton:[e]}),KAMPYLE_DATA.setMemoryData("targetingState",{})},initTargeting:n,initFormsTargeting:p,validateCommonTargetingOnForm:function(e){var t,n,r=!0;return!0===r&&(t=function(e){if(e.urlRules&&e.urlRules.exclusionUrl)if(e.urlRules.exclusionUrl.rule)return l(e.urlRules.exclusionUrl.rule);return!1}(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.exclusionUrl.rule")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"UrlExclude",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:!t,expected:KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.exclusionUrl.rule"),actual:location.href}),!0===t&&(r=!1)),!0===r&&(n=function(e){if(e.urlRules&&e.urlRules.inclusionUrl)if(e.urlRules.inclusionUrl.rule)return l(e.urlRules.inclusionUrl.rule);return!0}(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.inclusionUrl.rule")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingRule:"UrlInclude",targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:n,expected:KAMPYLE_UTILS.getNestedPropertyValue(e,"urlRules.inclusionUrl.rule"),actual:location.href}),!1===n&&(r=!1)),!0===r&&(n=s(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.genericRule")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"GenericRule",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:n,expected:"Generic rule evaluation result should be true",actual:n}),r=n),!0===r&&(r=d(e),KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.devicetypes")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"DeviceTypes",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:r,expected:KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.devicetypes").toString(),actual:KAMPYLE_DATA.getMemoryData("kampyleDevice")})),r},isShowInvite:A,handleButton:e,isDataValid:o,generateShouldShowInviteParamName:function(e){return e?"shouldShowInvite_"+e:null},handleNotSkippedInvitaion:function(e){KAMPYLE_DATA.getDisplayType(e)===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP?(KAMPYLE_DATA.setFormState(e.formId,{inviteShown:!0}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_showInvitation",{formId:e.formId})):KAMPYLE_FUNC.isFormLoaded(e.formId)?KAMPYLE_EVENT_DISPATCHER.trigger("neb_showInvitation",{formId:e.formId}):(KAMPYLE_DATA.setMemoryData(KAMPYLE_TARGETING.generateShouldShowInviteParamName(e.formId),!0),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e.formId}))},initDynamicTargeting:function(e){KAMPYLE_DATA.setMemoryData("isInviteActivated",!0);var t=KAMPYLE_DATA.getMemoryData("targetingState");void 0!==e.onSiteData.kampyleTimeInSession?u(e.onSiteData.kampyleTimeInSession.time,e):t.kampyleTimeInSession=!0,e.onSiteData.abandon?"desktop"===KAMPYLE_DATA.getMemoryData("kampyleDevice")&&m(e.onSiteData.abandon,e):t.abandon=!0;var n,r=KAMPYLE_DATA.getTargetingData(e.formId,"pageEvents");for(n in r?I(r,e):t.kampylePageElementEvent=!0,void 0!==e.onSiteData.kampyleTimeOnPage?S(e.onSiteData.kampyleTimeOnPage.time,e):t.kampyleTimeOnPage=!0,KAMPYLE_FUNC.checkProvision("targetingRuleIdleTime")&&void 0!==e.onSiteData.kampyleIdleTime?L(e.onSiteData.kampyleIdleTime.timeSpan):t.kampyleIdleTime=!0,KAMPYLE_DATA.setMemoryData("targetingState",t),t)if(t.hasOwnProperty(n)&&!t[n])return!1;A(e)},validateCommonSessionTargeting:function(e){e=e||"";var t=KAMPYLE_DATA.getFormData(e)||{},n=t.formType===KAMPYLE_CONSTANT.FORM_TYPES.INVITATION;if(n&&KAMPYLE_DATA.setMemoryData("currentInviteFormId",e),!1===KAMPYLE_TARGETING.isNumSessions(t))return!1;if(KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.kampyleInvitePercentageUsers.prec")){var r=M(t.onSiteData.kampyleInvitePercentageUsers);if(KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"UsersPercentage",formTriggerType:KAMPYLE_DATA.getFormTriggerType(t.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:r,expected:KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.kampyleInvitePercentageUsers.prec"),actual:g()}),!1===r)return!1}return r=!!t.onSiteData.numberOfPagesViewed&&!1===T(t.onSiteData.numberOfPagesViewed),KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.numberOfPagesViewed.numberOfRepeats")&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:t.formId,targetingRule:"NumberOfPagesViewed",targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:!r,expected:KAMPYLE_UTILS.getNestedPropertyValue(t,"onSiteData.numberOfPagesViewed.numberOfRepeats"),actual:KAMPYLE_DATA.getData("kampyleSessionPageCounter")}),!r&&(n&&(KAMPYLE_UTILS.isTrue(t.inviteData.skipInvitation)?KAMPYLE_FUNC.isPreloadConfigured()&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e}):KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadInvitation",{formId:e})),!0)},isUbtFailed:E,evaluateRule:function(e,t){var n,r=!1,o=!1;if(e&&"criteriaGroup"===e.type&&e.childrenCriterias&&e.childrenCriterias.length&&e.conjunction)for(var i=0;i<e.childrenCriterias.length&&!o;i++)(n=KAMPYLE_TARGETING.evaluateRule(e.childrenCriterias[i],t))&&"OR"===e.conjunction?o=r=!0:n||"AND"!==e.conjunction?r=n:o=!(r=!1);else e&&"criteria"===e.type&&(r=_(e,t));return r},shouldDisableIntercept:function(e){var t=!1,n=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.disableInterceptRule");return n&&("string"==typeof n&&(n=JSON.parse(n)),t=KAMPYLE_TARGETING.evaluateRule(n,e),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"disableInterceptRule",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.BEHAVIORAL_TARGETING,isPassed:t,expected:"Disable intercept rule should be true",actual:t})),t},checkPagesInSession:T,isNumSessions:function(e){var t=KAMPYLE_DATA.getData("kampyleUserSessionsCount"),n=!1,r=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.numberOfVisits.numberOfRepeats"),o=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.numberOfVisits.compareString");return t&&(n=null===r||null===o||KAMPYLE_UTILS.kampyleCompareByOperator(parseInt(t),parseInt(r),o)),r&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"NumberOfVisits",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.PAGE_TARGETING,isPassed:n,expected:o+" "+r,actual:t}),n},targetingDevice:d,getUserPercentile:g,checkPercentageUsers:M,validateGap:u,getEventQuery:c,handleTriggerByEvents:I,isUrlMatch:r,setTargetingState:function(e,t){KAMPYLE_DATA.setMemoryData("targetingState."+e,t)},getTextByQuarentine:function(e){return KAMPYLE_DATA.getData(e)?new Date(parseInt(KAMPYLE_DATA.getData(e))):t[e]},shouldCheckInvite:function(e,t){return e.formType===KAMPYLE_CONSTANT.FORM_TYPES.INVITATION&&KAMPYLE_UTILS.kampyleIsCookieEnabled()&&!t.skipInviteTargeting&&!1===KAMPYLE_DATA.getMemoryData("isInviteActivated")&&!KAMPYLE_TARGETING.isUbtFailed(e)},isQuarantinePhasePassed:i,isGenericRuleValid:s,checkQuarantine:f,initEmbeddedTargeting:function(){var e=KAMPYLE_DATA.getAllForms();if(e&&e.length)for(var t,n,r,o=e.length-1;0<=o;o--)e[o].formType===KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED&&((r=KAMPYLE_TARGETING.validateCommonTargetingOnForm(e[o]))&&KAMPYLE_TARGETING.isEmbbeddedTargetingEnabled()&&(t=!KAMPYLE_TARGETING.checkQuarantine(e[o]),n=KAMPYLE_TARGETING.validateCommonSessionTargeting(e[o].formId),r=!E(e[o])&&t&&n),r&&KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_LOAD_FORM,{formId:e[o].formId}))},isEmbbeddedTargetingEnabled:function(){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EMBEDDED_TARGETING)},isAlreadyDeclined:function(e){var t=!0===(null!==(r=(r=e.onSiteData)||{}).declined&&void 0!==r.declined&&o(r.declined.days,"DECLINED_DATE")),n=KAMPYLE_TARGETING.getTextByQuarentine("DECLINED_DATE"),r=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.declined.days");return r&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"DontInviteOnDeclined",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!t,expected:r+" days",actual:"Current: "+new Date+" Declined: "+n}),t},isAlreadySubmitted:function(e){var t=!0===function(e){if(KAMPYLE_UTILS.getNestedPropertyValue(e,"submitted"))return o(e.submitted.days,"SUBMITTED_DATE");return!1}(e.onSiteData),n=KAMPYLE_UTILS.getNestedPropertyValue(e,"onSiteData.submitted.days"),r=KAMPYLE_TARGETING.getTextByQuarentine("SUBMITTED_DATE");return n&&KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_targetingRuleEvaluated",{formId:e.formId,targetingRule:"DontInviteOnSubmitted",formTriggerType:KAMPYLE_DATA.getFormTriggerType(e.formId),targetingPhase:KAMPYLE_CONSTANT.TARGETING_PHASES.QUARANTINE_TARGETING,isPassed:!t,expected:n+" days",actual:"Current: "+new Date+" Submitted: "+r}),t}}}((window,document)),window.KAMPYLE_ANIMATION=function(){var t={ANIMATION_DIRECTION:"centerRight"};function e(e,t){d(0,t),setTimeout(function(){n(0,t)},10)}function n(e,t){t=t||{};var n,r,o,i=KAMPYLE_DATA.getFormData(t.formId),a=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(n=i,r=a,o=t.formId,!n||!r||!s(n)||KAMPYLE_FUNC.hasApplicationLoadingFailed(o,!1))return!1;KAMPYLE_DATA.setMemoryData("isInvitationShouldBeIgnored",!0);t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId);t&&(t.style.display="block");var A=E(i);switch(A){case"centerRight":KAMPYLE_UTILS.setElementStyle(a,{right:0});break;case"centerLeft":KAMPYLE_UTILS.setElementStyle(a,{left:0});break;case"bottomRight":case"bottomLeft":KAMPYLE_UTILS.setElementStyle(a,{bottom:0});break;case"topRight":case"topLeft":KAMPYLE_UTILS.setElementStyle(a,{top:0});break;default:return KAMPYLE_UTILS.showWarning("Invalid animation type - "+A),!1}}function r(){var e=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);e&&KAMPYLE_UTILS.setElementStyle(e,{width:0,height:0})}function o(e,t){setTimeout(function(){KAMPYLE_DATA.getFormData(t.formId);var e=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId);e&&(KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")?(e.remove(),KAMPYLE_DATA.initOnsiteDefaultState()):(e.src=e.src,e.style.display="none",e.removeAttribute&&e.removeAttribute("origin"))),r()},1e3)}function i(e,t){var n=KAMPYLE_DATA.getFormData(t.formId);if("animation"!==KAMPYLE_DATA.getDisplayType(n))return!1;t=t||{};t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(!n||!t||!s(n))return!1;A(n,t)}function a(e){return String((window.innerHeight-parseInt(e,10))/2)+"px"}function E(e){return e=e||{},KAMPYLE_UTILS.getNestedPropertyValue(e,"formDisplay.displayDirection")||t.ANIMATION_DIRECTION}function A(e,t){var n;switch(E(e)){case"centerRight":KAMPYLE_UTILS.setElementStyle(t,{top:a(t.style.height),right:"-"+e.formWidth+"px",bottom:null,left:null,transition:"right 1s ease-in-out"});break;case"centerLeft":KAMPYLE_UTILS.setElementStyle(t,{top:a(t.style.height),right:null,bottom:null,left:"-"+e.formWidth+"px",transition:"left 1s ease-in-out"});break;case"bottomRight":n=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:null,right:n,bottom:"-"+e.formHeight+"px",left:null,transition:"bottom 1s ease-in-out"});break;case"bottomLeft":n=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:null,right:null,bottom:"-"+e.formHeight+"px",left:n,transition:"bottom 1s ease-in-out"});break;case"topLeft":n=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:"-"+e.formHeight+"px",right:null,bottom:null,left:n,transition:"top 1s ease-in-out"});break;case"topRight":n=KAMPYLE_VIEW.getCornerMargin(e)+"px",KAMPYLE_UTILS.setElementStyle(t,{top:"-"+e.formHeight+"px",right:n,bottom:null,left:null,transition:"top 1s ease-in-out"});break;default:return void KAMPYLE_UTILS.showWarning("Invalid animation type - "+e.formDisplayDirection)}}function s(e){return"animation"===KAMPYLE_DATA.getDisplayType(e)}function l(e,t){!s(KAMPYLE_DATA.getFormData(t.formId))||(t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId))&&KAMPYLE_UTILS.setElementStyle(t,{display:"none"})}function _(e,t){t=t||{};var n=KAMPYLE_DATA.getFormData(t.formId),r=KAMPYLE_ANIMATION.getOrCreateAnimationContainer();if(!r||!n||!KAMPYLE_ANIMATION.isAnimationForm(n))return!1;document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId)||(n={border:0,height:n.formHeight+"px",width:n.formWidth+"px",display:"none"},KAMPYLE_VIEW.createFormIframe(t.formId,KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID,r,n,!1))}function d(e,t){t=t||{};var n=KAMPYLE_DATA.getFormData(t.formId),r=KAMPYLE_DATA.isSkipInvitation(t.formId),o=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(!o||!n||!s(n)||r&&KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId))return!1;document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+t.formId)||_(0,t),KAMPYLE_UTILS.setElementStyle(o,{height:n.formHeight+"px",width:n.formWidth+"px"}),A(n,o)}return{initAnimationPosition:d,getDisplayDirection:E,getOrCreateAnimationContainer:function(){var e,t=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);return t||(e=document.createElement("span"),t=document.createElement("div"),KAMPYLE_UTILS.addAttributesOnElement(t,{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID}),t.style.zIndex="2147483000",e.appendChild(t),document.body.appendChild(e),KAMPYLE_UTILS.setElementStyle(t,{border:0,position:"fixed",display:"block",zIndex:"2147483000"})),t},init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_buttonClicked:[e],neb_sdkShowForm:[e],neb_loadForm:[_,d],neb_inviteAccepted:[e],neb_skipInvitation:[e],neb_formClosed:[i,o],neb_popupBlocked:[i,o],neb_captureInit:[i],neb_captureImageClicked:[n],MDigital_Capture_Cancelled:[n],neb_formHide:[i],neb_formLoadingHasFailed:[r],neb_skipShowingForm:[l]}),KAMPYLE_ANIMATION.getOrCreateAnimationContainer(),r()},hideAnimationContainer:r,hideFormAnimationContainer:l,handleAnimationIframe:_,isAnimationForm:s}}(),window.KAMPYLE_VIEW=function(s,l){var r={CORNER_MARGIN:0,TRIANGULAR_MARGIN:0,VERTICAL_MARGIN:30};function t(e,t){t=t||{},KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!0)||(t=l.getElementById("kampyleInviteContainer"),J()?(Z(),t&&KAMPYLE_UTILS.setElementStyle(t,{top:"",bottom:"",left:"",right:"",background:"none",visibility:"",display:"none"},!0)):(KAMPYLE_UTILS.setElementStyle(t,{visibility:"visible"},!0),(t=l.getElementById("kampyleInvite"))&&KAMPYLE_UTILS.setElementStyle(t,{visibility:"visible"},!0)))}function n(e){KAMPYLE_UTILS.showInvite(),KAMPYLE_UTILS.removeEventHandler(e.srcElement,"blur",n)}function o(e){KAMPYLE_UTILS.hideInvite(),KAMPYLE_UTILS.setEventHandler(e.srcElement,"blur",n)}function i(){for(var e=l.querySelectorAll("input"),t=l.querySelectorAll("textarea"),n=[],r=0;r<e.length;r++)n.push(e[r]);for(r=0;r<t.length;r++)n.push(t[r]);return n}function a(e,t){(t=t||{}).formId=t.formId||KAMPYLE_DATA.getMemoryData("currentFormId");t=KAMPYLE_VIEW.getInvitePosition(t.formId);if(J()&&"bottom"===t)for(var n=i(),r=0;r<n.length;r++)KAMPYLE_UTILS.setEventHandler(n[r],"focus",o)}function A(e,t){(t=t||{}).formId=t.formId||KAMPYLE_DATA.getMemoryData("currentFormId");t=KAMPYLE_VIEW.getInvitePosition(t.formId);if(J()&&"bottom"===t)for(var n=i(),r=0;r<n.length;r++)KAMPYLE_UTILS.removeEventHandler(n[r],"focus",o)}function E(e,t){var n=KAMPYLE_TARGETING.generateShouldShowInviteParamName(t.formId);KAMPYLE_DATA.getMemoryData(n)&&(KAMPYLE_EVENT_DISPATCHER.trigger("neb_invitation_loaded",{formId:t.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_showInvitation",{formId:t.formId}),KAMPYLE_DATA.deleteMemoryData(n))}function _(e){l.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e).scrollIntoView()}function d(e){s.scrollTo(0,e)}function T(e,t){t=t||{},KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||d(0)}function u(e,t){var n=(t||{}).numberOfPixels||0;KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)?(_(t.formId),t=(KAMPYLE_UTILS.getScrollPosition()||{}).y||0,KAMPYLE_VIEW.doScrollY(n+t)):KAMPYLE_VIEW.doScrollY(n)}function m(e,t){var n;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)||KAMPYLE_UTILS.getNestedPropertyValue(KAMPYLE_UTILS.getBrowser(),"name")===KAMPYLE_CONSTANT.BROWSERS.SAFARI&&(t=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)?(n=KAMPYLE_DATA.getMemoryJsonKey(t.formId,!0),KAMPYLE_DATA.getMemoryData(n).desktopDesign.invitationContentText):t.inviteContent,t=(t=KAMPYLE_UTILS.htmlDecode(t)||"").replace(/<[^>]+>/g,"").trim(),l.getElementById("kampyleInvite").title=t)}function c(e,t){"true"===KAMPYLE_DATA.getData("isSkipInvitationOptimized")&&(KAMPYLE_UTILS.setElementStyle(l.getElementById("kampyleFormContainer"),{visibility:"visible"},!0),KAMPYLE_VIEW.prepareHostingDOM(),KAMPYLE_DATA.setData("isSkipInvitationOptimized",!1))}function I(e){var t=e?"block":"none",n=l.getElementsByClassName("neb-loading-spinner");if(n&&n.length)for(var r=n.length-1;0<=r;r--)KAMPYLE_UTILS.setElementStyle(n[r],{display:t})}function S(e,t){I(!1)}function L(e,t){I(!0)}function g(e,t){l.getElementById("kampyleFormContainer").scrollIntoView()}function M(e){e=e||{};var t,n="invitation"===KAMPYLE_UTILS.getNestedPropertyValue(e,"formType");if(n)t=r.CORNER_MARGIN;else switch(KAMPYLE_UTILS.getNestedPropertyValue(e,"buttonData.type")){case"vertical":case"triangular":t=r.TRIANGULAR_MARGIN;break;case"custom":t=KAMPYLE_UTILS.getNestedPropertyValue(e,"buttonData.cornerMargin")||r.CORNER_MARGIN;break;default:t=r.CORNER_MARGIN}return parseInt(t,10)}function P(e,t){t=t||{};var t=KAMPYLE_DATA.getFormData(t.formId),n=l.getElementById("nebula_div_btn");if(!n||!t)return!1;var r=M(t)+"px";switch(t=(t=t)||{},KAMPYLE_UTILS.getNestedPropertyValue(t,"buttonData.position")||"right"){case"bottomRight":n.style.right=r;break;case"bottomLeft":n.style.left=r}}function p(e,t){var n=KAMPYLE_DATA.getFormData(t.formId),r=KAMPYLE_UTILS.getNestedPropertyValue(n,"buttonData"),t=KAMPYLE_UTILS.getNestedPropertyValue(r,"verticalOffset")||0;isNaN(t)||(n=l.getElementById("nebula_div_btn"))&&n.style&&(-1<r.position.indexOf("bottom")?n.style.marginBottom=t+"px":(t=-1*Number(t),n.style.marginTop=t+"px"))}function f(e,t){t=KAMPYLE_DATA.getFormData(t.formId),t=KAMPYLE_UTILS.getNestedPropertyValue(t,"buttonData.zIndex");KAMPYLE_UTILS.isValueNumericAndDefined(t)&&(l.getElementById("nebula_div_btn").style.zIndex=t)}function N(e,t){var n=KAMPYLE_DATA.getMemoryData("currentFormId"),r=KAMPYLE_DATA.getFormData(n);if("animation"===KAMPYLE_DATA.getDisplayType(r))return!1;r=l.getElementById("kampyleFormContainer"),n=l.getElementById("kampyleForm"+n);r&&n&&KAMPYLE_UTILS.setElementStyle(r,{display:"block",visibility:"visible"},!0)}function D(){return KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?" wcagOutline ":" noOutline "}function O(){var e,t,n=KAMPYLE_DATA.getMemoryData("currentFormId");n&&(e=l.getElementById("kampyleFormContainer"),t=l.getElementById("kampyleForm"+n),n=l.getElementById("mdigital-no-json-modal_"+n),e&&(t||n)&&KAMPYLE_UTILS.setElementStyle(e,{display:"none",visibility:"hidden"},!0))}function C(e,t){t=t||{};var n,r,o=KAMPYLE_DATA.getMemoryData("currentFormId");q("remove"),null!==l.getElementById("kampyleFormContainer")&&((n=l.getElementById("kampyleForm"+o))&&(KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")?(KAMPYLE_DATA.initOnsiteDefaultState(),(r=l.getElementById("kampyleFormContainer"))&&r.remove()):(n.src=n.src,KAMPYLE_EVENT_DISPATCHER.trigger("neb_load_form_form_reload",{formId:t.formId})),KAMPYLE_UTILS.setElementStyle(n,{display:"none"},!0),n.removeAttribute&&n.removeAttribute("origin")),O(),Z()),KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")&&!KAMPYLE_DATA.isPopupDisplayType(o)||t.sourceWindow&&t.sourceWindow.close&&t.sourceWindow.close()}function y(e){e=e.buttonData||{};return["button#nebula_div_btn { height: auto !important }",".kampyle_feedback-button{",'background-color:transparent !important;font-family:"Open Sans",sans-serif;cursor:pointer;position:fixed;z-index:99999990',"}",".kampyle_feedback-button .kampyle_triangle{position:absolute;width:0;height:0;z-index:-1}",".kampyle_feedback-button .kampyle_button-text{","height:81px;width:81px;text-align:center;z-index:1000;color:"+e.textColor+";font-size:14px;font-weight:normal !important;","}",".kampyle_feedback-button .kampyle_bottom{","line-height:108px !important;","}",".kampyle_feedback-button .kampyle_top {","line-height:53px !important;","}",".kampyle_feedback-button.kampyle_top-right{","top:0;right:0;","}",".kampyle_feedback-button.kampyle_top-left .kampyle_triangle, .kampyle_feedback-button.kampyle_top-right .kampyle_triangle {","top:0;border-top:81px solid;","}",".kampyle_feedback-button.kampyle_bottom-left .kampyle_triangle, .kampyle_feedback-button.kampyle_bottom-right .kampyle_triangle {","bottom:0;border-bottom:81px solid;","}",".kampyle_feedback-button.kampyle_bottom-right .kampyle_triangle, .kampyle_feedback-button.kampyle_top-right .kampyle_triangle {","right:0;border-left:81px solid transparent;","}",".kampyle_feedback-button.kampyle_bottom-left .kampyle_triangle, .kampyle_feedback-button.kampyle_top-left .kampyle_triangle {","left:0;border-right:81px solid transparent;","}","#nebula_div_btn .kampyle_triangle {","border-bottom-color: "+e.backgroundColor+";","border-top-color: "+e.backgroundColor+";","}",".kampyle_feedback-button.kampyle_top-right .kampyle_button-text, .kampyle_feedback-button.kampyle_bottom-left .kampyle_button-text {","-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);","}",".kampyle_feedback-button.kampyle_top-left .kampyle_button-text, .kampyle_feedback-button.kampyle_bottom-right .kampyle_button-text {","-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg);","}",".kampyle_feedback-button.kampyle_top-left {","top:0;left:0;","}",".kampyle_feedback-button.kampyle_bottom-right {","bottom:0;right:0;","}",".kampyle_feedback-button.kampyle_bottom-left {","bottom:0;left:0;","}",".kampyle_feedback-button.kampyle_bottom-left, .kampyle_feedback-button.kampyle_bottom-right, .kampyle_feedback-button.kampyle_top-left, .kampyle_feedback-button.kampyle_top-right {","padding: 0 !important;","}"].join(" ")}function Y(e){var t=e.buttonData||{},n="",n=["button#nebula_div_btn { height: auto !important }",".kampyle_vertical_button {",'background-color:transparent !important;font-family:"Open Sans",sans-serif;cursor:pointer;position:fixed;top:45%;z-index:99999990;height:35px !important;min-height: 35px !important;max-height: 35px !important;width:125px !important;max-width: 125px !important;min-width: 125px !important;-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)',"}",".kampyle_vertical_button .kampyle_button {","height:35px;min-height: 35px !important;max-height: 35px !important;width:125px !important;min-width: 125px !important;max-width: 125px !important; background:{{BUTTON_BACKGROUND_COLOR}};color:{{BUTTON_TEXT_COLOR}};position:absolute;top:0;left:0;z-index:-1;","}",".kampyle_vertical_button .kampyle_button-text {","color:{{BUTTON_TEXT_COLOR}};font-size:14px;line-height:35px;text-align:center;font-weight:normal !important;"+(n=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.RTL)&&MDIGITAL.LOCALIZATION.isFormLanguageRtl(e)?"transform: scale(-1);-ms-transform: scale(-1);-webkit-transform: scale(-1)":n),"}",".kampyle_vertical_button.kampyle_left .kampyle_button {","-webkit-border-radius:3px 3px 0 0;-moz-border-radius:3px 3px 0 0;-ms-border-radius:3px 3px 0 0;border-radius:3px 3px 0 0;","}",".kampyle_vertical_button.kampyle_right {","right:-45px;","}",".kampyle_vertical_button.kampyle_left {","left:-45px","}",".kampyle_vertical_button.kampyle_right .kampyle_button {","-webkit-border-radius:0 0 3px 3px;-moz-border-radius:0 0 3px 3px;-ms-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px","}",".kampyle_vertical_button.kampyle_right, .kampyle_vertical_button.kampyle_left  {","padding: 0 !important;","}"].join(" ");return n=(n=n.replace(/{{BUTTON_TEXT_COLOR}}/g,t.textColor)).replace(/{{BUTTON_BACKGROUND_COLOR}}/g,t.backgroundColor),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)&&(n+=[".kampyle_vertical_button:hover .kampyle_button-text {","color:"+t.textHoverColor+";","}",".kampyle_vertical_button:hover .kampyle_button {","background-color:"+t.backgroundHoverColor+";","}"].join(" ")),n}function K(e){var t=KAMPYLE_VIEW.getButtonText(e),e=U(e.buttonData.position);return'<button id="nebula_div_btn" style="border: none; background: none" alt="'+t+'" tabindex="0" class="kampyle_feedback-button '+e.leftright+" "+D()+'"><div class="kampyle_triangle"></div><div data-aut="feedback" class="kampyle_button-text '+e.topbottom+'">'+t+"</div></button>"}function h(e){var t="kampyle_left",n=KAMPYLE_VIEW.getButtonText(e);switch(e.buttonData.position){case"left":t="kampyle_left";break;case"right":t="kampyle_right"}return'<button id="nebula_div_btn" style="position: fixed !important; border: none" alt="'+n+'" tabindex="0" class="kampyle_vertical_button '+t+" "+D()+'"><div class="kampyle_button"></div><div data-aut="feedback" class="kampyle_button-text">'+n+"</div></button>"}function b(e){q("add");var t=l.getElementById("kampyleFormContainer");t&&((e=l.getElementById("kampyleForm"+e))&&KAMPYLE_UTILS.setElementStyle(e,{display:"block"},!0),KAMPYLE_UTILS.setElementStyle(t,{display:"block",visibility:"visible"},!0))}function v(e){var t="mdigital-no-json-modal_"+e;C(),l.getElementById(t).style.display="none",KAMPYLE_DATA.setFormState(e,{shown:!1}),G("",{formId:KAMPYLE_DATA.getMemoryData("buttonFormId")}),KAMPYLE_UTILS.triggerCustomEvent(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_CLOSED,{formId:e}),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_CLOSED,{formId:e})}function R(e,t){var n=KAMPYLE_DATA.getFormData(t.formId);if("lightbox"===KAMPYLE_DATA.getDisplayType(n).toLowerCase()){n=l.getElementById("kampyleFormContainer");if(!n||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!1)||KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId,!0))return!1;KAMPYLE_UTILS.setElementStyle(n,{display:"block",visibility:"visible"},!0)}}function U(e){var t={topbottom:"kampyle_bottom",leftright:"kampyle_bottom-left"};switch(e){case"bottomLeft":t.leftright="kampyle_bottom-left",t.topbottom="kampyle_bottom";break;case"bottomRight":t.leftright="kampyle_bottom-right",t.topbottom="kampyle_bottom";break;case"topLeft":t.leftright="kampyle_top-left",t.topbottom="kampyle_top";break;case"topRight":t.leftright="kampyle_top-right",t.topbottom="kampyle_top"}return t}function F(e,t){e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.SPACE||e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.ENTER?KAMPYLE_VIEW.onErrModalClose(t):e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.TAB&&(e.preventDefault(),e.stopPropagation())}function k(e,t){var n;e.preventDefault(),e.keyCode!==KAMPYLE_CONSTANT.KEY_CODES.ESC?(n=l.querySelector("#mdigital-no-json-modal_"+t+" #close-no-json-modal"))&&(e.keyCode!==KAMPYLE_CONSTANT.KEY_CODES.TAB||e.shiftKey||(n.setAttribute("aria-hidden",!1),KAMPYLE_UTILS.isIE()&&HTMLElement?HTMLElement.prototype.focus.apply(n):n.focus())):KAMPYLE_VIEW.onErrModalClose(t)}function w(e,t){var n,r,o,i,a,A;!KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId)&&KAMPYLE_VIEW.shouldShowErrMsgOnForm(t.formId)&&(n="mdigital-no-json-modal_"+t.formId,r=l.getElementById("kampyleFormModal"),S(),b(t.formId),l.getElementById(n)?l.getElementById(n).style.display="block":(o=t.formId,i=KAMPYLE_CONSTANT.TEXTS.DEFAULT_JSON_ERROR_MESSAGES.title,a=KAMPYLE_CONSTANT.TEXTS.DEFAULT_JSON_ERROR_MESSAGES.body,A=KAMPYLE_CONSTANT.TEXTS.DEFAULT_JSON_ERROR_MESSAGES.close,a=MDIGITAL_ELEMENT_BUILDER.getErrorModal("mdigital-no-json-modal_"+o,"en",i,a,A),r||(ee(),r=l.getElementById("kampyleFormModal"),b(t.formId)),r.innerHTML="",r.appendChild(a),(A=l.querySelector("#"+n+" #close-no-json-modal")).onclick=v.bind(null,t.formId),(KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS))&&(a.addEventListener("keydown",function(e){k(e,t.formId)}),A.addEventListener("keydown",function(e){F(e,t.formId)}))),KAMPYLE_DATA.setFormState(t.formId,{shown:!0}),Ae("",{formId:KAMPYLE_DATA.getMemoryData("buttonFormId")}),KAMPYLE_UTILS.triggerCustomEvent(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_SHOWN,{formId:t.formId}),A={failureCause:a=KAMPYLE_COMMON.getFormFailureCause(t.formId)},a===KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.JSON_FAILED&&(A.jsonPath=KAMPYLE_DATA.getDataJsonUrl(t.formId,!1)),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_NO_JSON_MODAL_SHOWN,{additionalInfo:A,formId:t.formId}))}function G(e,t){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&null!=l.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_CONTAINER_ID)&&null!=l.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID)?(KAMPYLE_VIEW.showFeedbackButtonVisually(),function(e){e=e||{};var t=KAMPYLE_DATA.getFormData(e.formId)||{};KAMPYLE_EVENT_DISPATCHER.trigger("neb_button_displayed",{formId:e.formId,position:KAMPYLE_UTILS.getNestedPropertyValue(t,"buttonData.position")||"",formClosed:KAMPYLE_UTILS.getNestedPropertyValue(e,"formClosed")||!1})}(t)):KAMPYLE_VIEW.createButton(e,t)}function V(e,t){var r=e&&e.style;return null!=r&&null!=t&&t.length?t.reduce(function(e,t){var n=r[t];return null!=n&&(e[t]=n),e},{}):{}}function x(e,t){KAMPYLE_DATA.getFormState(e.formId).loaded||KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED)||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:e.formId}),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,!0)),KAMPYLE_UTILS.removeEventHandler(t,"mouseover",this.boundHandleLoadFormEvent)}function B(e,t){var n;null==t.origin||(n=l.getElementById("kampyleForm"+t.formId))&&n.setAttribute&&n.setAttribute("origin",t.origin)}function H(e){var t=KAMPYLE_DATA.getMemoryData("currentFormId")||KAMPYLE_DATA.getShownFormId();if(null!==l.getElementById("kampyleFormContainer")&&t){if(e=e||KAMPYLE_DATA.getFormData(t)||{},KAMPYLE_DATA.isMobileDynamicSizing(e.formId))return function(){var e=l.getElementById("formLightboxContainer");e&&e.setAttribute("aria-hidden",!1);e=l.getElementById("kampyleFormModal");e&&KAMPYLE_UTILS.setElementStyle(e,{top:0,margin:0,width:"100%"},!0)}();!function(e){var t,n=(e||{}).formId||KAMPYLE_DATA.getMemoryData("currentFormId")||KAMPYLE_DATA.getShownFormId();e&&(t=parseInt(e.formWidth,10)||450,i=parseInt(e.formHeight,10)||450);var r=l.documentElement.clientHeight;KAMPYLE_UTILS.setElementStyle(l.getElementById("innerContainer"),{overflowY:"auto",height:"100%"});var o={border:0,position:"relative",margin:"50px auto 50px",height:i+"px",width:t+"px"},e=KAMPYLE_DATA.getMemoryData("kampyleDevice");e===KAMPYLE_CONSTANT.DEVICES.MOBILE||e===KAMPYLE_CONSTANT.DEVICES.TABLET?o={position:"relative",margin:"0",height:i="100%",width:t="100%"}:KAMPYLE_DATA.isCustomHtmlAndFixedSizeForm(n)?(o={position:"absolute",top:"50%","margin-top":-i/2+"px",left:"50%","margin-left":-t/2+"px",height:i+"px",width:t+"px"},r<i&&(o.position="relative",o.top="0",o["margin-top"]="50px",o["margin-bottom"]="50px")):o={position:"fixed",height:"100%",width:"100%"};var i=l.getElementById("kampyleFormModal");i&&i.style&&i.removeAttribute&&(i.removeAttribute("style"),KAMPYLE_UTILS.setElementStyle(i,o,!0))}(e)}}function W(e,t,n,r,o){KAMPYLE_FUNC.shouldRenderForm({formId:t})&&function(e,t,n,r,o){e=KAMPYLE_COMMON.createFormUrl(e,t);var i=!(r=s.open(e,"NebulaCX"+t,"width="+n+", height="+r+",scrollbars=yes"))||r.closed||void 0===r.closed;KAMPYLE_DATA.setMemoryData("popupHandler",r),setTimeout(function(){i&&("neb_skipInvitation"!==o&&alert("The survey was blocked, please disable popup blocker and refresh the page."),KAMPYLE_EVENT_DISPATCHER.trigger("neb_popupBlocked",{formId:t}))},25)}(e,t,n,r,o)}function z(e,t){var n="neb_skipInvitation"===e;t=t||{};var r=KAMPYLE_DATA.getFormData(t.formId);if(KAMPYLE_VIEW.ignoreShowForm(r)||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!1)||KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(t.formId,!0))return!1;var o=r.formHtmlUrl,i=r.formWidth,a=r.formHeight,A=(A=KAMPYLE_DATA.getDisplayType(r)).toLowerCase();q("add"),KAMPYLE_DATA.setMemoryData("currentFormId",t.formId),KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||(KAMPYLE_DATA.setMemoryData("formIsShown",!0),KAMPYLE_DATA.setMemoryData("isInvitationShouldBeIgnored",!0));KAMPYLE_DATA.getMemoryData("kampyleDevice");var E=n&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SKIP_INVITATION_OPTIMIZATION);return"lightbox"===A?(E?KAMPYLE_DATA.setData("isSkipInvitationOptimized",!0):KAMPYLE_VIEW.prepareHostingDOM(),(n=l.getElementById("kampyleFormContainer"))?(H(r),(r=l.getElementById("kampyleForm"+t.formId))&&KAMPYLE_UTILS.setElementStyle(r,{display:"block"},!0),KAMPYLE_UTILS.setElementStyle(n,{display:"block",visibility:E?"hidden":"visible"},!0)):KAMPYLE_UTILS.showWarning("formContainer wasn't loaded properly")):"popup"===A&&W(o,t.formId,i,a,e),!0}function X(){KAMPYLE_DATA.setMemoryData("inviteLoadedAndShown",!1),q("remove");var e=l.getElementById("kampyleInviteContainer"),t=l.getElementById("kampyleInvite");e&&t&&(KAMPYLE_UTILS.setElementStyle(e,{display:"none"},!0),Z())}function j(e,t){t=t||{};var n=["top","bottom"],r=(KAMPYLE_DATA.getFormState(t.formId)||{}).inviteShown;if(!J()||!r)return!1;var o,i=KAMPYLE_VIEW.getInvitePosition(t.formId),r=l.getElementById("kampyleInviteContainer");l.getElementById("kampyleInvite");"INPUT"===l.activeElement.tagName||"TEXTAREA"===l.activeElement.tagName?(KAMPYLE_UTILS.hideInvite(),KAMPYLE_UTILS.setEventHandler(l.activeElement,"blur",(o=l.activeElement,function e(){KAMPYLE_UTILS.removeEventHandler(o,"blur",e),KAMPYLE_UTILS.showInvite()}))):KAMPYLE_UTILS.showInvite();t={display:"block",height:t.newHeight+"px",left:"0",right:"0"};t[i]=0,t[n[(n.indexOf(i)+1)%2]]="",KAMPYLE_UTILS.setElementStyle(r,t,!0)}function q(e){if(e=e||"","desktop"!==KAMPYLE_DATA.getMemoryData("kampyleDevice")){var t,n=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATES_WCAG)?"width=device-width, initial-scale=1.0":"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",r=l.getElementById("kampyleMetaViewport"),o=l.getElementsByName("viewport"),i=KAMPYLE_DATA.getMemoryData("hostedViewportContent")||[];if(o&&o.length&&!i.length)for(var a=o.length-1;0<=a;a--)o[a].hasAttribute("content")&&i.push(o[a]);switch(e.toLowerCase()){case"add":if(i&&i.length)for(a=i.length-1;0<=a;a--)i[a].hasAttribute("id")&&"kampyleMetaViewport"===i[a].id||i[a].remove&&i[a].remove();r?(r.content=n,r.name="viewport"):((t=l.createElement("meta")).content=n,t.name="viewport",t.id="kampyleMetaViewport",l.getElementsByTagName("head")[0].appendChild(t));break;case"remove":if(r&&(r.content="",r.name="",r.remove&&r.remove()),i&&i.length)for(a=i.length-1;0<=a;a--)i[a].hasAttribute("id")&&"kampyleMetaViewport"===i[a].id||l.getElementsByTagName("head")[0].appendChild(i[a])}KAMPYLE_DATA.setMemoryData("hostedViewportContent",i)}}function J(){return 0<Number(KAMPYLE_DATA.getMemoryData("inviteVersion"))&&KAMPYLE_DATA.isNewMobileInvitation()}function Q(){if(KAMPYLE_DATA.isMobileDynamicSizing())KAMPYLE_VIEW.manipulateAriaHiddens(),KAMPYLE_DATA.setMemoryData("hostedBodyOverflowXAttr",l.body.style.overflowX),l.body.style.overflowX="hidden";else{if(KAMPYLE_DATA.setMemoryData("hostedBodyPositionAttr",l.body.style.position),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ENABLE_OVERFLOW))return!1;KAMPYLE_DATA.setMemoryData("hostedBodyOverflowAttr",l.body.style.overflow),l.body.style.overflow="hidden";var e=KAMPYLE_DATA.getMemoryData("kampyleDevice");e!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&e!==KAMPYLE_CONSTANT.DEVICES.TABLET||(l.body.style.position="fixed")}}function Z(){var e;KAMPYLE_DATA.isMobileDynamicSizing()?(e=l.getElementById("kampyleFormModal"),KAMPYLE_UTILS.setElementStyle(e,{height:"100%"},!0),KAMPYLE_VIEW.restoreAriaHidden(),l.body.style.overflowX=KAMPYLE_DATA.getMemoryData("hostedBodyOverflowXAttr")||""):(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ENABLE_OVERFLOW)||(l.body.style.overflow=KAMPYLE_DATA.getMemoryData("hostedBodyOverflowAttr")||""),l.body.style.position=KAMPYLE_DATA.getMemoryData("hostedBodyPositionAttr")||"")}function $(){return KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+"resources/onsite/images/kloader.gif"}function ee(){var e,t,n=$();KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)||((e=l.createElement("span")).id="formLightboxContainer",t="",t+='<div id="kampyleFormContainer" style="top:0 !important;left:0 !important;width: 100% !important;height: 100% !important;position: fixed !important;visibility:hidden !important;display:table !important;background-color: rgba(102,102,102,0.4) !important;z-index:99999999 !important;-webkit-overflow-scrolling: touch !important; ">',t+=' <div id="innerContainer">',t+='   <img class="neb-loading-spinner" alt="Loading" style="position:absolute !important;top:50% !important;left:50% !important; margin-top: -30px !important;margin-left: -30px !important; max-width:60px !important;" src="'+n+'"/>',t+='   <div id="kampyleFormModal" style="z-index:99999999 !important; -webkit-overflow-scrolling: touch !important;"></div>',t+=" </div>",e.innerHTML=t+="</div>",l.body.appendChild(e))}function te(e,t){t=t||{};var n,r,o=KAMPYLE_DATA.getFormState(t.formId);o&&o.loaded||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId,!1)||(r=KAMPYLE_DATA.getFormData(t.formId),o=KAMPYLE_DATA.getDisplayType(r),r&&t.formId&&"lightbox"===o&&(o=KAMPYLE_CONSTANT.TIMEOUT_HANDLERS.FORM_APP_STATUS+"_"+t.formId,KAMPYLE_DATA.getTimeoutHandler(o)||(n=s.setTimeout(function(){KAMPYLE_FUNC.isFormLoaded(t.formId)||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:t.formId,failureCause:KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.APPLICATION_FAILED,formState:KAMPYLE_DATA.getFormState(t.formId)})},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS),KAMPYLE_DATA.setTimeoutHandler(o,n)),l.getElementById("kampyleFormContainer")||ee(),l.getElementById("kampyleForm"+t.formId)||(n={border:0,height:"100%","max-height":"100%","min-height":"100%",width:"100%","max-width":"100%","min-width":"100%",display:"none"},KAMPYLE_DATA.isCustomHtmlForm(t.formId)||KAMPYLE_DATA.isMobileDynamicSizing(r.formId)||(n.position="fixed"),r=l.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.CONTAINER_ID_PREFIX),KAMPYLE_VIEW.createFormIframe(t.formId,KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.IFRAME_ID_PREFIX,r,n,!0))))}function ne(e,t){var n=t.formId,t=l.getElementById("kampyleFormContainer");if(!(n&&t&&KAMPYLE_DATA.isMobileDynamicSizing(n)))return!1;KAMPYLE_UTILS.setElementStyle(t,{height:KAMPYLE_UTILS.getDocumentSize().height+"px",position:"absolute"},!0)}function re(){return KAMPYLE_UTILS.isIos()?"30px":"100%"}function oe(e){var t;KAMPYLE_DATA.isLightBoxDisplayType(e.formId)&&(t=l.getElementById("kampyleFormModal"),e=Number((e||{}).newHeight),e=isNaN(e)?re():e+"px",KAMPYLE_UTILS.setElementStyle(t,{height:e},!0))}function ie(e,t){KAMPYLE_DATA.isMobileDynamicSizing((t||{}).formId)&&(oe(t),t=KAMPYLE_UTILS.getNestedPropertyValue(t,"newHeight"),KAMPYLE_VIEW.shouldAddScroll(t)&&(t=l.getElementById("kampyleFormContainer"),KAMPYLE_UTILS.setElementStyle(t,{overflowY:"auto"},!0)))}function ae(e,t){var n=KAMPYLE_DATA.getFormData(t.formId),r=l.createElement("span"),o=$();KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)||(a="top:0 !important;left:0 !important;width: 100% !important;",a+="height: 100% !important;position: fixed !important;visibility:hidden !important;",a+="display:none !important;background-color: rgba(22,22,22,0.5) !important;",a+="z-index:99999999 !important;overflow:auto !important",A="position:absolute !important;top:50% !important;left:50% !important;",A+="margin-top: -30px !important;margin-left: -30px !important; max-width:60px !important;",r.innerHTML='<div id="kampyleInviteContainer" style="top:0 !important;left:0 !important;width: 100% !important;height: 100% !important;position: fixed !important;visibility:hidden !important;display:none !important;background-color: rgba(22,22,22,0.5) !important;z-index:99999999 !important;overflow:auto !important"><img class="neb-loading-spinner" alt="Loading" style="position:absolute !important;top:50% !important;left:50% !important;margin-top: -30px !important;margin-left: -30px !important; max-width:60px !important;" src="'+o+'"/><div id="kampyleInviteModal" style="overflow: hidden;margin: 0 auto;height:'+n.inviteData.inviteHeight+";width:"+n.inviteData.inviteWidth+';position:relative;z-index:99999999;top: 25%;-webkit-box-shadow:0 0 10px rgba(0,0,0,0.4);-moz-box-shadow:0 0 10px rgba(0,0,0,0.4); box-shadow:0 0 10px rgba(0,0,0,0.4);"></div></div>',l.body.appendChild(r));var i=l.createElement("iframe");i.id=KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.IFRAME_ID,i.title=KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.IFRAME_TITLE,i.tabIndex=-1;var a=n.inviteData.inviteHeight,A=n.inviteData.inviteWidth,o=KAMPYLE_DATA.getMemoryData("kampyleDevice");o!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&o!==KAMPYLE_CONSTANT.DEVICES.TABLET||(A=a="100%",(o=l.getElementById("kampyleInviteModal"))&&KAMPYLE_UTILS.setElementStyle(o,{height:"100%",width:"100%"},!0)),KAMPYLE_UTILS.setElementStyle(i,{height:a,width:A,display:"none",border:"0"},!0);t=n.inviteData.inviteUrl+"?formId="+t.formId;KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)&&(t+="&isWCAG=true"),i.src=t,l.getElementById("kampyleInviteModal").appendChild(i),KAMPYLE_DATA.isNewMobileInvitation()&&(i=l.getElementsByClassName("neb-loading-spinner")[0],KAMPYLE_UTILS.setElementStyle(i,{display:"none"},!0),KAMPYLE_UTILS.setElementStyle(r,{"z-index":99999998},!0),(r=l.getElementById("kampyleInviteContainer"))&&KAMPYLE_UTILS.setElementStyle(r,{"z-index":99999998},!0)),setTimeout(function(){!0!==KAMPYLE_DATA.getFormState(n.formId).inviteLoaded&&KAMPYLE_DATA.setFormState(n.formId,{inviteLoaded:!1,inviteShown:!1})},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS)}function Ae(e,t){t&&!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)&&(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?KAMPYLE_VIEW.hideFeedbackButtonVisually():KAMPYLE_VIEW.removeButton(e,t))}function Ee(e,t){var n=l.getElementById("kampyleFormContainer"),r=l.getElementById("kampyleInviteContainer"),o=l.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);KAMPYLE_VIEW.removeButton(e,t),n&&KAMPYLE_UTILS.removeAllContent(n),r&&KAMPYLE_UTILS.removeAllContent(r),o&&KAMPYLE_UTILS.removeAllContent(o)}return{setIframeOrigin:B,ignoreShowForm:function(e){return!e||"animation"===KAMPYLE_DATA.getDisplayType(e)},scrollToEmbeddedForm:_,scrollFromTop:u,doScrollY:d,removeAllShownElements:Ee,handleLightBoxIframe:te,createFormIframe:function(e,t,n,r,o){var i=KAMPYLE_DATA.getFormData(e),a=l.createElement("iframe");return KAMPYLE_UTILS.setElementStyle(a,r,o),a.id=t+e,i=i.formHtmlUrl,i=KAMPYLE_COMMON.createFormUrl(i,e),a.src=i,a.tabIndex=-1,a.setAttribute("title",KAMPYLE_CONSTANT.IFRAME_SETTINGS.IFRAME_TITLE),n.appendChild(a),a},createFormContainer:ee,showForm:z,hideForm:C,showButton:G,createButton:function(e,n){var t="";n=n||{};var r,o,i,a=KAMPYLE_DATA.getFormData(n.formId)||{},A=KAMPYLE_UTILS.getNestedPropertyValue(a,"buttonData.type")||"";if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){switch(A.toLowerCase()){case"vertical":case"triangular":t=(o={vertical:{html:h,style:Y},triangular:{html:K,style:y}}[(r=a).buttonData.type])?(KAMPYLE_UTILS.addStyle(o.style(r)),o.html(r)):(KAMPYLE_UTILS.showWarning("Invalid button type "+r.buttonData.type),"");break;case"custom":t=function(e){var t="z-index: 99999990 !important;position: fixed !important;cursor: pointer !important;line-height:1px !important; padding:0;",n=KAMPYLE_VIEW.getButtonText(e),r=[".nebula_image_button {","width: auto !important;","background: transparent !important;","}"].join(" ");switch(KAMPYLE_UTILS.addStyle(r),e.buttonData.position){case"bottomLeft":t+="bottom:0;left:0;";break;case"bottomRight":t+="bottom:0;right:0;";break;case"topLeft":t+="top:0;left:0;";break;case"topRight":t+="top:0;right:0;";break;case"left":t+="left:0;top:50%;";break;case"right":t+="right:0;top:50%;"}return'<button id="nebula_div_btn" class="nebula_image_button '+D()+'" style="'+t+';border: none" tabindex="0"><img alt="'+n+'" src="'+e.buttonData.buttonUrl+'" /></button>'}(a);break;default:return KAMPYLE_UTILS.showWarning("Invalid button type - "+A),!1}var E=l.getElementById("kampyleButtonContainer");null===E?((E=l.createElement("span")).innerHTML=t,E.id="kampyleButtonContainer",l.body.appendChild(E)):E.innerHTML=t}KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&(i=l.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE,V(i,["position","top","right"]))),KAMPYLE_EVENT_DISPATCHER.trigger("neb_button_displayed",{formId:n.formId,position:KAMPYLE_UTILS.getNestedPropertyValue(a,"buttonData.position")||"",formClosed:KAMPYLE_UTILS.getNestedPropertyValue(n,"formClosed")||!1}),E.onclick=function(e){KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(n.formId,!0)||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:n.formId}),e.preventDefault(),e.stopPropagation())},KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.DESKTOP?(this.boundHandleLoadFormEvent=x.bind(this,n,E),KAMPYLE_UTILS.setEventHandler(E,"mouseover",this.boundHandleLoadFormEvent),KAMPYLE_UTILS.setEventHandler(s,"mousemove",function(e){var t=KAMPYLE_DATA.getFormState(n.formId);if(!t||t.loading||t.loaded||KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED))return!1;KAMPYLE_UTILS.isNear("nebula_div_btn",100,e)&&(KAMPYLE_EVENT_DISPATCHER.trigger("neb_load_form_preload_proximity",{formId:n.formId}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:n.formId}),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,!0))})):KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:n.formId}),E.onkeyup=function(e){e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.TAB&&KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:n.formId})},E.onkeypress=function(e){e.keyCode===KAMPYLE_CONSTANT.KEY_CODES.ENTER&&(KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(n.formId,!0)||KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:n.formId}))}},hideInvite:X,hideButton:Ae,hideFeedbackButtonVisually:function(){var e=l.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID);null!=e&&(KAMPYLE_UTILS.setElementStyle(e,{position:"absolute",top:"-9999px",right:"-9999px"},!0),KAMPYLE_UTILS.addAttributesOnElement(e,{tabindex:-1,"aria-hidden":!0}))},showFeedbackButtonVisually:function(){var e,t=l.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID);null!=t&&(e=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE)||{},KAMPYLE_UTILS.setElementStyle(t,e,!0),KAMPYLE_UTILS.removeAttribute(t,"tabindex"),KAMPYLE_UTILS.removeAttribute(t,"aria-hidden"))},removeButton:function(e,t){var n=l.getElementById("kampyleButtonContainer");n&&(n.innerHTML="",KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)&&KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE,{}))},handleInvitationSkippedForms:c,updateIframeStyle:H,formatTriangularStyle:y,formatVerticalStyle:Y,prepareHostingDOM:Q,restoreHostingDOM:Z,getInvitePosition:function(e){return((KAMPYLE_DATA.getFormData(e)||{}).inviteData||{}).invitationPosition||"top"},newMobileInvite:J,changeInviteHeight:j,iFrameHeightChangedHandler:oe,manipulateAriaHiddens:function(){for(var e=l.body.children,t=[],n=0;n<e.length;n++)t.push({element:e[n],prevAriaHiddenValue:e[n].getAttribute("aria-hidden")}),e[n].setAttribute("aria-hidden",!0);KAMPYLE_DATA.setMemoryData("initialAriaHiddenValues",t)},restoreAriaHidden:function(){for(var e=KAMPYLE_DATA.getMemoryData("initialAriaHiddenValues")||[],t=0;t<e.length;t++)e[t].element&&e[t].element instanceof Element&&(null===e[t].prevAriaHiddenValue?e[t].element.removeAttribute("aria-hidden"):e[t].element.setAttribute("aria-hidden",e[t].prevAriaHiddenValue));KAMPYLE_DATA.deleteMemoryData("initialAriaHiddenValues")},getDefaultIframeHeight:re,shouldAddScroll:function(e){var t=KAMPYLE_UTILS.getElementStyle(l.body,"position");return("fixed"===t||"absolute"===t)&&KAMPYLE_UTILS.getDocumentSize().height<=e},shouldShowErrMsgOnForm:function(e){var t=KAMPYLE_DATA.getFormTriggerType(e);return MDIGITAL.FORM_STATE.shouldFormBeShown(e)&&(t===KAMPYLE_CONSTANT.FORM_TYPES.BUTTON||t===KAMPYLE_CONSTANT.FORM_TYPES.CODE)},onErrModalClose:v,handleLoadFormEvent:x,handleCloseButtonInErroModalKeydown:F,onErrorModalKeyPressed:k,pickElementStyleProperties:V,init:function(){var e={neb_targetingInit:[Ee],neb_loadInvitation:[ae],neb_loadForm:[te,L,ne],neb_formReady:[Ae],neb_formLoaded:[B,S,E],neb_formShown:[c],neb_inviteHeightChanged:[j],neb_iFrameHeightChanged:[ie],neb_scrollToTop:[T],neb_scrollFromTop:[u],neb_inviteReady:[t,a],neb_scrollToForm:[g],neb_showButton:[G,P,p],neb_buttonClicked:[R],neb_sdkShowForm:[Ae],neb_captureInit:[O,Ae],neb_inviteAccepted:[X,Ae,A],neb_showForm:[z],neb_sdkPageView:[X,A],neb_inviteDeclined:[X,A],neb_formClosed:[C],neb_popupBlocked:[C],neb_formHide:[O],neb_captureImageClicked:[N],MDigital_Capture_Cancelled:[N],neb_formLoadingHasFailed:[w],neb_inviteLoaded:[m]};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)&&e.neb_showButton.push(f),KAMPYLE_EVENT_DISPATCHER.subscribeMany(e),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)||(KAMPYLE_UTILS.addStyle(".noOutline{outline: none !important;}"),KAMPYLE_UTILS.addStyle(".wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}")),KAMPYLE_UTILS.setEventHandler(s,"resize",function(e){H()})},setMetaViewport:q,setZIndex:f,showVisibility:N,getCornerMargin:M,showFormCouldNotFechtedErrorMsg:w,handleInviteReady:t,getButtonText:function(e){return void 0!==MDIGITAL.LOCALIZATION&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)?MDIGITAL.LOCALIZATION.getLocalizedButtonText(e):e.buttonData.text},showInvite:function(e,t){q("add");var n="25%",r=KAMPYLE_DATA.getInviteData(t.formId);if(!r||!MDIGITAL.FORM_STATE.isInviteLoaded(t.formId)||!KAMPYLE_FUNC.isJsonDataLoaded(t.formId,!0))return!1;var o=KAMPYLE_DATA.getMemoryData("kampyleDevice");return o!==KAMPYLE_CONSTANT.DEVICES.MOBILE&&o!==KAMPYLE_CONSTANT.DEVICES.TABLET||(r.inviteHeight="100%",r.inviteWidth="100%",n=0),o=KAMPYLE_UTILS.getCurrentTimestamp(),KAMPYLE_DATA.setMemoryData("invitationTimeStamp",o),KAMPYLE_DATA.setData("LAST_INVITATION_VIEW",o),(o=l.getElementById("kampyleInviteContainer"))&&!1===KAMPYLE_DATA.getMemoryData("formIsShown")&&(KAMPYLE_UTILS.setElementStyle(o,{display:"block",visibility:KAMPYLE_DATA.isNewMobileInvitation()?"hidden":"visible"},!0),Q(),KAMPYLE_EVENT_DISPATCHER.trigger("neb_invitation_ready",{formId:t.formId}),(t=l.getElementById("kampyleInviteModal"))&&KAMPYLE_UTILS.setElementStyle(t,{top:n,width:r.inviteWidth+"px","max-width":r.inviteWidth+"px",height:r.inviteHeight+"px","max-height":r.inviteHeight+"px",display:"block"},!0),(n=l.getElementById("kampyleInvite"))&&KAMPYLE_UTILS.setElementStyle(n,{width:r.inviteWidth+"px","max-width":r.inviteWidth+"px",height:r.inviteHeight+"px","max-height":r.inviteHeight+"px",display:"block",visibility:KAMPYLE_DATA.isNewMobileInvitation()?"hidden":"visible"},!0)),!0},getWCAGClass:D,getClassDirectonByPosition:U,getLoaderGifUrl:$,updateInviteIframeTitle:m}}(window,document),window.KAMPYLE_MESSAGE=function(){function r(e){if(KAMPYLE_UTILS.isDebugMode())return!0;if(!e||!e.origin||!e.data)return!1;var t,n=KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX;return-1<n.indexOf("://")?n=(t=n.split("/"))[0]+"//"+t[2]:-1<(t=n.indexOf("/"))&&(n=n.slice(0,t)),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ON_PREM_HYBRID)||e.origin===n}function e(e){if(!r(e))return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}switch(t.action){case"inviteAccepted":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteAccepted",{formId:t.formId});break;case"inviteDeclined":case"inviteDefered":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteDeclined",{formId:t.formId});break;case"inviteHeightChanged":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteHeightChanged",{formId:t.formId,newHeight:t.newHeight});break;case"formLoaded":KAMPYLE_EVENT_DISPATCHER.trigger("neb_formLoaded",{formId:t.formId,origin:e.origin,isScreenCaptureEnabled:t.isScreenCaptureEnabled});break;case"formSubmitPending":case"formHide":KAMPYLE_EVENT_DISPATCHER.trigger("neb_formHide",{formId:t.formId});break;case"formSubmitted":var n={formId:t.formId,feedbackUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackUUID:t.uuid,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EVENT_INCLUDE_FEEDBACK_CONTENT)&&t.content&&(n.content=t.content),KAMPYLE_EVENT_DISPATCHER.trigger("neb_feedbackSubmitted",n);break;case"formClose":n={formId:t.formId,feedbackUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackUUID:t.uuid,sourceWindow:e.source,isFormSubmitted:t.isFormSubmitted,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid};KAMPYLE_EVENT_DISPATCHER.trigger("neb_formClosed",n);break;case"formPageShown":n={formId:t.formId,pageNumber:t.pageNumber,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid};KAMPYLE_EVENT_DISPATCHER.trigger("neb_formPageShown",n);break;case"triggerScreenCapture":n={formId:t.formId,screenCaptureSettings:t.screenCaptureSettings,feedbackCorrelationUUID:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?t.feedbackCorrelationUUID:t.uuid,screenCaptureUuid:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_AS_COMPONENT)?t.screenCaptureUuid:null};KAMPYLE_EVENT_DISPATCHER.trigger("neb_captureInit",n);break;case"screenCaptureDelete":KAMPYLE_EVENT_DISPATCHER.trigger("screenCaptureDelete",t);break;case"screenCaptureRetake":KAMPYLE_EVENT_DISPATCHER.trigger("screenCaptureRetake",t);break;case"scrollToForm":KAMPYLE_EVENT_DISPATCHER.trigger("neb_scrollToForm",{formId:t.formId});break;case"iFrameHeightChanged":KAMPYLE_EVENT_DISPATCHER.trigger("neb_iFrameHeightChanged",{formId:t.formId,newHeight:t.newHeight});break;case"scrollToTop":KAMPYLE_EVENT_DISPATCHER.trigger("neb_scrollToTop",{formId:t.formId});break;case"scrollFromTop":KAMPYLE_EVENT_DISPATCHER.trigger("neb_scrollFromTop",{formId:t.formId,numberOfPixels:t.numberOfPixels});break;case"inviteLoaded":KAMPYLE_EVENT_DISPATCHER.trigger("neb_inviteLoaded",{formId:t.formId,inviteVersion:t.inviteVersion,inviteContent:t.inviteContent});break;case"loadMultipleForms":KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadMultipileForms",{formId:t.formId,formIds:t.formIds});break;case"routeToForm":KAMPYLE_EVENT_DISPATCHER.trigger("neb_routeToForm",{formId:t.destinationForm,sourceFormId:t.formId},null,{isStrictMode:!0});break;case"submitFeedbackFailed":KAMPYLE_EVENT_DISPATCHER.trigger("neb_submitFeedbackFailed",t);break;case"feedbackUUIDisNull":KAMPYLE_EVENT_DISPATCHER.trigger("neb_feedbackUUIDisNull",t);break;case"MDigital_Form_Next_Page":case"MDigital_Form_Back_Page":case"MDigital_ThankYou_Displayed":case"MDigital_ThankYou_Close":case"MDigital_Form_Close_No_Submit":case"MDigital_Form_Close_Submitted":case"MDigital_CHTML_Logs":KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)||(t.feedbackCorrelationUUID=t.uuid),KAMPYLE_EVENT_DISPATCHER.trigger(t.action,t);break;default:return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ON_PREM_HYBRID)||KAMPYLE_UTILS.showWarning("invalid action - "+t.action),!1}}return{init:function(){KAMPYLE_UTILS.setEventHandler(window,"message",e)},handleMessage:e,validateMessageEvent:r}}(),window.KAMPYLE_UTILS={TOP_LEVEL_DOMAIN_COOKIE_PREFIX:"Tld-",startsWith:function(e,t,n){return e.substr(n||0,t.length)===t},isIos:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isSafari:function(){return-1<navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome")<0},isiPhone:function(){return/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isiPadOS13:function(){return KAMPYLE_UTILS.isSafari()&&!KAMPYLE_UTILS.isiPhone()&&void 0!==window.DeviceOrientationEvent},isIE:function(){return/rv:11.0/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)},isDesktop:function(){return KAMPYLE_DATA.getMemoryData("kampyleDevice")===KAMPYLE_CONSTANT.DEVICES.DESKTOP},createIEEvent:function(e,t){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!0),n.detail=t||{},n},triggerCustomEvent:function(e,t){var n=KAMPYLE_UTILS.isIE()?KAMPYLE_UTILS.createIEEvent(e,t):(t=t?{detail:t}:{},new CustomEvent(e,t));try{window.dispatchEvent(n)}catch(n){KAMPYLE_UTILS.showWarning("Could not trigger custom event "+e)}},isDebugMode:function(){var e=KAMPYLE_DATA.getMemoryData("region");return e===KAMPYLE_CONSTANT.REGIONS.DEV||e===KAMPYLE_CONSTANT.REGIONS.QA},showErrorStack:function(e){KAMPYLE_UTILS.isDebugMode()&&console.warn(e.stack)},showWarning:function(e){KAMPYLE_UTILS.isDebugMode()&&console.warn(e)},addStyle:function(e,t){var n;KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)?console.error("Should not use this method if the provision csp rules is on"):(null===(n=(t=t||window.document).getElementById("kampyleStyle"))&&((n=t.createElement("style")).type="text/css",n.id="kampyleStyle",(t.head||t.getElementsByTagName("head")[0]).appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e)))},addAttributesOnElement:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])},removeAttribute:function(e,t){e&&e.hasAttribute(t)&&e.removeAttribute(t)},getViewportSize:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},getDocumentSize:function(){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight||0,e.offsetHeight||0,t.clientHeight||0,t.scrollHeight||0,t.offsetHeight||0);return{width:Math.max(e.scrollWidth||0,t.scrollWidth||0,e.offsetWidth||0,t.offsetWidth||0,t.clientWidth||0)+(e.getBoundingClientRect&&e.getBoundingClientRect().left||0),height:n+(e.getBoundingClientRect&&e.getBoundingClientRect().top||0)}},getElementSize:function(e){var t=Math.max(e.scrollHeight||0,e.offsetHeight||0,e.clientHeight||0);return{width:Math.max(e.scrollWidth||0,e.offsetWidth||0,e.clientWidth||0),height:t}},getCurrentTimestamp:function(){return(new Date).getTime()},getTimeDiff:function(e,t){var n=void 0!==e?e:"2014-01-01 01:02:03.123456",n=new Date(n).getTime(),e=KAMPYLE_UTILS.getCurrentTimestamp();if(isNaN(n))return"";var r=0,r=n<e?e-n:n-e;switch(t){case KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS:return r.toFixed(1)/1e3;case KAMPYLE_CONSTANT.TIME_FORMATS.DAYS:return Math.floor(r/1e3/60/60/24);default:return r}},setEventHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},subscribeToCustomEvent:function(t,n){window&&window.addEventListener&&"function"==typeof n&&window.addEventListener(t,function(e){e=e&&e.detail;n.apply(null,[t,e])},!1)},removeEventHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)},setElementStyle:function(t,n,r){var o,i;if(r=r?"important":"",t)for(o in n)if(n.hasOwnProperty(o))if(r&&t&&t.style.setProperty){i=KAMPYLE_UTILS.camelToDash(o);try{t.style.setProperty(i,""+n[o],r)}catch(e){t.style.setProperty(i,""+n[o],"!"+r)}}else t.style[o]=n[o]},isNear:function(e,t,n){var r=document.getElementById(e);if(!r)return!1;var o=KAMPYLE_UTILS.offset(r).left-t,i=KAMPYLE_UTILS.offset(r).top-t,e=o+r.clientWidth+2*t,r=i+r.clientHeight+2*t,t=n.pageX,n=n.pageY;return o<t&&t<e&&i<n&&n<r},offset:function(e){if(!e)return!1;var t=e.getBoundingClientRect(),e=document.body;return{top:+t.top+e.scrollTop,left:t.left+e.scrollLeft}},createIframe:function(e,t,n,r){var o=document.createElement("iframe");return o.width=t,o.height=n,o.src=e,o.id=r,o.style.border=0,o.frameBorder=0,o.style.display="inline-block",o},getUrlParam:function(e){for(var t=location.search.substr(location.search.indexOf("?")+1),n=null,r=(t=(t=""===t?location.hash.substr(location.hash.indexOf("?")+1):t).split("&")).length,o=0;o<r;o++){var i=t[o].split("=");i&&[i[0]]==e&&(n=decodeURIComponent(i[1]))}return n},htmlDecode:function(e){var t;return e=e||"",t=new RegExp("&lt","g"),e=e.replace(t,"<"),t=new RegExp("&gt","g"),e=e.replace(t,">")},escapeRegExp:function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},replaceAll:function(e,t,n){return e.replace(new RegExp(KAMPYLE_UTILS.escapeRegExp(t),"g"),n)},sendMessageToIframe:function(e,t){var n;e&&(n=document.getElementById(e))&&n.getAttribute&&(e=n.getAttribute("origin")||"*",(n=n.contentWindow)&&n.postMessage&&n.postMessage(JSON.stringify(t),e))},getBrowser:function(){var e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return{name:"IE",version:(n=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""};if("Chrome"!==t[1]||null==(n=e.match(/\b(OPR|Edge)\/(\d+)/)))return t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(n=e.match(/version\/(\d+)/i))&&t.splice(1,1,n[1]),{name:t[0],version:t[1]};var n=n.slice(1);return{name:n[0].replace("OPR","Opera"),version:n[1]||""}},initEventSubscriptions:function(e,t){for(var n in e)e.hasOwnProperty(n)&&KAMPYLE_EVENT_DISPATCHER.subscribe(n,t)},getRandomTimeMS:function(e,t){return e+Math.round(Math.random()*(t-e))},kampyleGetUserId:function(){var e=KAMPYLE_DATA.getData("kampyle_userid");return e||(e=KAMPYLE_UTILS.kampyleCreateUUID(),KAMPYLE_DATA.setData("kampyle_userid",e),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ALTERNATIVE_UUID)&&KAMPYLE_DATA.setData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.MDIGITAL_ALTERNATIVE_UUID,KAMPYLE_UTILS.generateUUID())),e},kampyleCreateUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}for(var t=e(),n=0;n<7;n++)t+="-"+e();return t},removeAllContent:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.parentNode.removeChild(e)}},safeToLower:function(e){return"string"!=typeof e?e:e.toLowerCase()},getCookieFlagByProtocol:function(){var e=KAMPYLE_UTILS.isSecureProtocol();return"SameSite="+(e?"None":"Lax")+"; "+(e?"Secure; ":"")},buildQueryParams:function(n){return Object.keys(n||{}).map(function(e,t){return(0===t?"?":"")+e+"="+n[e]}).join("&")||""},kampyleSetCookie:function(e,t,n,r){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toUTCString(),n=r?";domain="+r+";":"",o=KAMPYLE_UTILS.getCookieFlagByProtocol();e=r?KAMPYLE_UTILS.TOP_LEVEL_DOMAIN_COOKIE_PREFIX+e:e,document.cookie=e+"="+t+"; "+o+i+";path=/"+n},isSecureProtocol:function(){return"https:"===location.protocol},getCookie:function(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name))return this.c.substring(this.name.length,this.c.length)}return null},getDomainFromHost:function(e){if(null===e)return null;var t=e.indexOf(":"),t=-1===t?e.length:t;return e.substring(0,t)},isHostMatchesSubdomain:function(e,t){e=KAMPYLE_UTILS.getDomainFromHost(e);return e===t||e.endsWith("."+t)},kampyleGetCookie:function(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name))return this.c.substring(this.name.length,this.c.length)}return""},getByteSize:function(e){return encodeURIComponent("<q></q>"+e).length},getAllKampyleData:function(){var e=["SUBMITTED_DATE","kampyleUserPercentile","kampyleUserSession","kampyle_userid","kampyleInvitePresented","DECLINED_DATE","LAST_INVITATION_VIEW"];KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ALTERNATIVE_UUID)&&e.push(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.MDIGITAL_ALTERNATIVE_UUID),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXEMPT_FORMS_FROM_QUARANTINE)&&e.push(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION);for(var t={},n=e.length-1;0<=n;n--)t[e[n]]=KAMPYLE_DATA.getData(e[n]);return t},kampyleDeleteCookie:function(e,t){var n="";t&&(n=";domain="+t+";");t=KAMPYLE_UTILS.getCookieFlagByProtocol();document.cookie=e+"= ; "+t+"expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/"+n},kampyleIsCookieEnabled:function(){return navigator.cookieEnabled},kampyleCompareTimestamps:function(e,t,n){if("number"!=typeof e||"number"!=typeof t)return!1;switch(e=new Date(e),t=new Date(t),e.setHours(0,0,0,0),n){case"equals":return t.setHours(0,0,0,0),e.getTime()===t.getTime();case"laterthan":return t.setHours(23,59,59,999),t<e;case"earlierthan":return t.setHours(0,0,0,0),e<t;case"doesnotequal":return t.setHours(0,0,0,0),e.getTime()!==t.getTime();default:return!1}},kampyleCompareByOperator:function(e,t,n,r){r=KAMPYLE_UTILS.safeToLower(r);var o=!1;if(void 0===e)return o;switch(n=KAMPYLE_UTILS.safeToLower(n)){case KAMPYLE_CONSTANT.OPERATORS.EQUALS:o="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):e===t;break;case KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_EQUAL:o="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):e!==t;break;case KAMPYLE_CONSTANT.OPERATORS.GREATER_THAN:o=t<e;break;case KAMPYLE_CONSTANT.OPERATORS.LATER_THAN:o="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):t<e;break;case KAMPYLE_CONSTANT.OPERATORS.SMALLER_THAN:o=e<t;break;case KAMPYLE_CONSTANT.OPERATORS.EARLIER_THAN:o="datetime"===r?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):t<e;break;case KAMPYLE_CONSTANT.OPERATORS.CONTAINS:o=!!e&&e.indexOf&&-1!==e.indexOf(t);break;case KAMPYLE_CONSTANT.OPERATORS.DOES_NOT_CONTAIN:o=!!e&&e.indexOf&&-1===e.indexOf(t);break;case KAMPYLE_CONSTANT.OPERATORS.STARTS_WITH:o=!!e&&e.indexOf&&0===e.indexOf(t);break;case KAMPYLE_CONSTANT.OPERATORS.ENDS_WITH:o=!!e&&e.indexOf&&e.length&&-1!==e.indexOf(t,e.length-e.length);break;case KAMPYLE_CONSTANT.OPERATORS.HAS_VALUE:o=!!e||""===e||!1===e||0===e;break;case KAMPYLE_CONSTANT.OPERATORS.REGEX:try{var i=new RegExp(t),o=!!e&&null!==i.exec(e)}catch(e){o=!1}}return o},setNestedPropertyValue:function(e,t,n){for(var r=e,o=t.split("."),i=o.length,a=0;a<i-1;a++){var A=o[a];r[A]||(r[A]={}),r=r[A]}r[o[i-1]]=n},getNestedPropertyValue:function(e,t,n){if(!e||!t||"string"!=typeof t)return null;for(var r=t.split("."),o=e,i=r.length,a=0;a<i;a++){var A=r[a].split("#DOT#").join(".");if(!o||!o.hasOwnProperty(A)&&!o[A])return void 0===n?null:n;o=o[A]}return o},validateKampyleDomain:function(e){var t=/(^https?:\/\/[A-Za-z0-9\-]+\.kampyle\.com(\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\(\)\*\+,;\=]*)?)/.test(e);return t||console.warn("Invalid url in validateKampyleDomain: "+e),t},camelToDash:function(e){return"string"!=typeof e?e:e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},objectPropertyObserver:function(n,r,o){var i=0;window.setTimeout(function e(){var t=KAMPYLE_UTILS.getNestedPropertyValue(n,r);if(t&&o instanceof Function)return o(t);i++<100&&window.setTimeout(e,100)},100)},showInvite:function(){var e=document.getElementById("kampyleInvite");KAMPYLE_UTILS.setElementStyle(e,{visibility:"visible"},!0)},hideInvite:function(){var e=document.getElementById("kampyleInvite");KAMPYLE_UTILS.setElementStyle(e,{visibility:"hidden"},!0)},getNumericValue:function(e){return""===e||null===e||"number"!=typeof e&&isNaN(Number(e))?null:Number(e)},extractAllObjectNonFunctionsProperties:function(e){var t,n={};for(t in e)"function"!=typeof e[t]&&(n[t]=e[t]);return 0<Object.keys(n).length?n:null},httpRequest:function(i,a,n,A,o,e){var E=0,s=(e||{}).numOfTimes||KAMPYLE_CONSTANT.NETWORK.NUM_OF_RETRIES,l=(e||{}).timeout||KAMPYLE_CONSTANT.NETWORK.REQUEST_TIMEOUT;function _(e,t,n){var r;E<s?(E++,r=KAMPYLE_UTILS.getRetryTimeout(),setTimeout(d,r)):(KAMPYLE_EVENT_DISPATCHER.trigger(t,n),"function"==typeof o&&o(e))}function d(){var e,r=KAMPYLE_UTILS.getCurrentTimestamp(),t={attemptNumber:E,url:a};n&&((e=Object.assign({},n)).cdUserID=KAMPYLE_COOLADATA.getUserId(),t=Object.assign({},t,{postData:e})),KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.BEFORE[i],{httpRequestData:t});var o=new XMLHttpRequest;o.open(i,a,!0),n&&o.setRequestHeader("Content-Type","application/json"),o.timeout=l||0,o.onerror=function(e){var t=KAMPYLE_UTILS.getTimeDiff(r,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS),t={requestUrl:a,responseStatus:o.status,error:e,requestTotalTimeInSeconds:t};_(t,KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.ERROR[i],{httpRequestData:t})},o.ontimeout=function(e){var t=KAMPYLE_UTILS.getTimeDiff(r,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS),t={requestUrl:a,responseStatus:o.status,error:e,attemptNumber:E,networkConnectionDetails:KAMPYLE_UTILS.extractAllObjectNonFunctionsProperties(window.navigator.connection),requestTotalTimeInSeconds:t};_(t,KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.TIMEOUT[i],{httpRequestData:t})},o.onload=function(){var e,t=KAMPYLE_UTILS.getTimeDiff(r,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS),n=KAMPYLE_UTILS.safeJsonParse(o.responseText);200===o.status?(e={requestUrl:a,attemptNumber:E,requestTotalTimeInSeconds:t},KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.AFTER[i],{httpRequestData:e}),"function"==typeof A&&A(n)):_(t={requestUrl:a,responseStatus:o.status,responseText:n,attemptNumber:E,requestTotalTimeInSeconds:t},KAMPYLE_CONSTANT.COOLADATA_HTTP_EVENTS_BY_METHOD.ERROR_STATUS_CODE[i],{httpRequestData:t})},n?o.send(JSON.stringify(t.postData)):o.send()}d()},lowerize:function(e){return e.toLowerCase()},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},getDeviceTypeByUserAgent:function(e){var t="function",n="model",r="type",o="vendor",i="mobile",a="tablet";if(KAMPYLE_UTILS.isiPadOS13())return a;for(var A,E,s,l,_,d={},T=[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[n,o,[r,a]],[/applecoremedia\/[\w\.]+ \((ipad)/],[n,[o,"Apple"],[r,a]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/SHIELD Tablet/,/A500/,/LG-V410\/V41020c/,/Puffin/,/^(?!.*Mobile).*Android.*$/],[o,n,[r,a]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[n,[o,"Amazon"],[r,a]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[n,o,[r,i]],[/\((ip[honed|\s\w*]+);/i],[n,[o,"Apple"],[r,i]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,n,[r,i]],[/\(bb10;\s(\w+)/i],[n,[o,"BlackBerry"],[r,i]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[n,[o,"Asus"],[r,a]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[n,"Xperia Tablet"],[r,a]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[o,"Sony"],[n,"Xperia Phone"],[r,i]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,n,[r,a]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[o,[n,/_/g," "],[r,i]],[/(nexus\s9)/i],[n,[o,"HTC"],[r,a]],[/(nexus\s6p)/i],[n,[o,"Huawei"],[r,i]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,n,[r,i]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[o,"Microsoft"],[r,i]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[n,[o,"Motorola"],[r,i]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[n,[o,"Motorola"],[r,a]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],n,[r,a]],[/smart-tv.+(samsung)/i],[o,[r,"smarttv"],n],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[o,"Samsung"],n,[r,i]],[/sie-(\w+)*/i],[n,[o,"Siemens"],[r,i]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[o,"Nokia"],n,[r,i]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[n,[o,"Acer"],[r,a]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],n,[r,a]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[n,[o,"LG"],[r,i]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[n,[o,"Lenovo"],[r,a]],[/linux;.+((jolla));/i],[o,n,[r,i]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,n,[r,i]],[/android.+;\s(pixel c)\s/i],[n,[o,"Google"],[r,a]],[/android.+;\s(pixel xl|pixel)\s/i],[n,[o,"Google"],[r,i]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[n,/_/g," "],[o,"Xiaomi"],[r,i]],[/android.+a000(1)\s+build/i],[n,[o,"OnePlus"],[r,i]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[r,KAMPYLE_UTILS.lowerize],o,n],[/Mobile|iP(hone|od|ad)|(Android).*(Mobile|sdk)|BlackBerry|portalmmm|BOLT|Vodafone|WindowsCE|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/],[o,n,[r,i]]],u=e||navigator.userAgent,m=0;m<T.length&&!l;){for(var c=T[m],I=T[m+1],S=A=0;S<c.length&&!l;)if(l=c[S++].exec(u))for(E=0;E<I.length;E++)_=l[++A],"object"==typeof(s=I[E])&&0<s.length?2==s.length?typeof s[1]==t?d[s[0]]=s[1].call(d,_):d[s[0]]=s[1]:3==s.length?typeof s[1]!=t||s[1].exec&&s[1].test?d[s[0]]=_?_.replace(s[1],s[2]):void 0:d[s[0]]=_?s[1].call(d,_,s[2]):void 0:4==s.length&&(d[s[0]]=_?s[3].call(d,_.replace(s[1],s[2])):void 0):d[s]=_||void 0;m+=2}return!d[r]||d[r]!==i&&d[r]!==a?"desktop":d[r]},getElementStyle:function(e,t){if(e instanceof HTMLElement)try{return window.getComputedStyle(e).getPropertyValue(t)}catch(e){}return null},isTruthy:function(e){if("string"!=typeof e)return e;try{e=JSON.parse(e)}catch(e){}return e},safeJsonParse:function(e,t){try{return JSON.parse(e)}catch(e){return KAMPYLE_UTILS.showWarning(t||"Failed to parse JSON, error message: "+(e||{}).message),KAMPYLE_UTILS.showErrorStack(e||{}),null}},addWcagStyleOnFocus:function(e){KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)&&(e.addEventListener("focusin",function(){KAMPYLE_UTILS.setElementStyle(e,{outline:"1px dashed #595959",outlineOffset:"2px",transition:"none"},!0)}),e.addEventListener("focusout",function(){e.style.outline="none",e.style.outlineOffset=null,e.style.transition=null}))},addHoverEffectOnElement:function(e,t,n){e&&"function"==typeof e.addEventListener&&(e.addEventListener("mouseenter",function(){KAMPYLE_UTILS.setElementStyle(e,n)}),e.addEventListener("mouseleave",function(){KAMPYLE_UTILS.setElementStyle(e,t)}))},handleAfterFormPosition:function(e,t){KAMPYLE_UTILS.scrollToLastPosition()},scrollToLastPosition:function(){var e=KAMPYLE_DATA.getMemoryData("scrollPosition");e&&(window.scroll(e.x,e.y),KAMPYLE_DATA.deleteMemoryData("scrollPosition"))},setCurrentScrollPosition:function(){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NOT_SCROLL_TO_LAST_POSITION_DISPLAY_TYPE_ANIMATION)&&document.body!==document.activeElement)return!1;var e=KAMPYLE_UTILS.getScrollPosition()||{};KAMPYLE_DATA.setMemoryData("scrollPosition",{x:e.x,y:e.y})},getScrollPosition:function(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"");return{x:e?window.pageXOffset:(t?document.documentElement:document.body).scrollLeft,y:e?window.pageYOffset:(t?document.documentElement:document.body).scrollTop}},getLangCodeFromNavAPI:function(){return window.navigator.language||window.navigator.userLanguage||null},getStrigifiedData:function(t){var n;if("object"==typeof t&&null!==t)try{n=JSON.stringify(t)}catch(e){n=t}else n=t;return n},appendScript:function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)},toBase64:function(e){return e=e||"",btoa(unescape(encodeURIComponent(e)))},styleObjToInline:function(e){var t,n="";for(t in e)n+=t+":"+e[t]+";";return n},getBaseUrl:function(){return location.origin+location.pathname},generateUUID:function(){var t=KAMPYLE_UTILS.getCurrentTimestamp();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,function(){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),e.toString(16)})},getRetryTimeout:function(){var e=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);return KAMPYLE_UTILS.getNestedPropertyValue(e,"retryTimout")||KAMPYLE_CONSTANT.NETWORK.RETRY_TIMEOUT},isTrue:function(e){return!0===e||"true"===e},isValueNumericAndDefined:function(e){var t=!!e,e=!isNaN(e);return t&&e},focusElement:function(e){e&&"function"==typeof e.focus&&e.focus()},isModalFormType:function(e){var t=KAMPYLE_DATA.getFormData(e),e=KAMPYLE_DATA.getDisplayType(t),t=Boolean(t)&&Boolean(e)&&t.formType!==KAMPYLE_CONSTANT.FORM_TYPES.EMBEDDED&&e!==KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP;return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?t&&e!==KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION:t},isFormInPreviewContext:function(e){e=KAMPYLE_DATA.getFormState(e);return null!=e&&"Preview"==e.triggerType}},window.KAMPYLE_EVENT_DISPATCHER=function(E){var s;function l(e){var t=(t=KAMPYLE_CONSTANT.LOG_MESSAGES.TRIGGER_MESSAGE_TEMPLATE).replace("{{EVENT_NAME}}",e.eventName).replace("{{DATA}}",KAMPYLE_UTILS.getStrigifiedData(e.data)).replace("{{CONTEXT}}",KAMPYLE_UTILS.getStrigifiedData(e.context)).replace("{{OPTIONS}}",KAMPYLE_UTILS.getStrigifiedData(e.options));return e.errorMessage?(t=t.replace("{{STATUS}}",KAMPYLE_CONSTANT.LOG_STATUSES.FAILED),t+=KAMPYLE_CONSTANT.LOG_MESSAGES.ERROR_LOG_TEMPLATE.replace("{{ERROR_MESSAGE}}",e.errorMessage)):t=t.replace("{{STATUS}}",KAMPYLE_CONSTANT.LOG_STATUSES.TRIGGERED),t}function r(e){return e&&s&&s[e]?s[e]:s}function o(e,t){if(!e||"string"!=typeof e||!t||"function"!=typeof t&&"string"!=typeof t)return!1;var n=s[e];return-1===(n=void 0===n?s[e]=[]:n).indexOf(t)&&n.push(t),!0}function _(e){e=e||{};var t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),n={};return t&&(n={accountId:t.accountId,websiteId:t.websiteId,enviroment:t.region}),Object.assign(e,n)}return{subscribe:o,subscribeOnce:function(e,t){var n=r(e);n[e]&&-1!==n.indexOf(t)||o(e,t)},subscribeMany:function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=0;n<e[t].length;n++)o(t,e[t][n])},trigger:function(t,n,r,o){var e,i,a=KAMPYLE_UTILS.getNestedPropertyValue(s,t);if(null==a)return!1;var A=(n=_(n))instanceof Array?n:[n];for(r=r||null,i=a.length,e=0;e<i;e+=1)if("string"==typeof a[e])KAMPYLE_UTILS.triggerCustomEvent(a[e]);else try{a[e].apply(r,[t].concat(A)),MDIGITAL.LOGGER.getLoggerStatus()&&MDIGITAL.LOGGER.debug(l({eventName:t,data:n,context:r,options:o,errorMessage:null}))}catch(e){if(MDIGITAL.LOGGER.getLoggerStatus()&&MDIGITAL.LOGGER.error(l({eventName:t,data:n,context:r,options:o,errorMessage:e.message})),KAMPYLE_UTILS.showErrorStack(e),E.KAMPYLE_COOLADATA&&n&&(n.errorMessage=e.message,n.errorStack=e.stack,KAMPYLE_COOLADATA.triggerCooladataEventDispatcherError(n)),o&&o.isStrictMode)break;continue}return!0},triggerError:function(e){KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_EVENT_DISPATCHER_ERROR,e)},unsubscribe:function(e,t){if(!e||"string"!=typeof e||!t||"function"!=typeof t)return!1;e=s[e];return void 0===e||-1!==(t=e.indexOf(t))&&e.splice(t,1),!0},init:function(){s={}},getEventSubscriptions:r,appendDefaultEventParams:_}}(window,document),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.LOCALIZATION=function(){function n(e){return KAMPYLE_UTILS.isTruthy(KAMPYLE_UTILS.getNestedPropertyValue(e,"formLocalizationSettings.useCustomParam"))?MDIGITAL.LOCALIZATION.getLangCodeFromCP(e):KAMPYLE_UTILS.getLangCodeFromNavAPI()}function r(e,t){var n=KAMPYLE_UTILS.getNestedPropertyValue(e,"availableLanguages"),e=e.formLocalizationSettings.defaultLanguage,r=t.split("-")[0].toLowerCase();return n.find(function(e){return e.toLowerCase()===r})||n.find(function(e){return 0===e.indexOf(r)})||e}function o(e){return MDIGITAL.LOCALIZATION.detectUsableLanguageCode({availableLanguages:e.availableLanguages,formLocalizationSettings:e.formLocalizationSettings,formId:e.formId})}function i(e){if(!e)return null;var t=KAMPYLE_CONSTANT.LANG_MEMORY_DATA_KEY_PREFIX+e.formId,e=o(e);return KAMPYLE_DATA.setMemoryData(t,e),e}return{getLangCodeFromCP:function(e){var t=KAMPYLE_UTILS.getNestedPropertyValue(e,"formId"),n=KAMPYLE_UTILS.getNestedPropertyValue(e,"formLocalizationSettings.customParam"),t=KAMPYLE_DATA.getFormData(t)||{},t=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamById(n,t)||{};return MDIGITAL.CUSTOM_PARAMETERS.fetchCPValue(t)||KAMPYLE_UTILS.getNestedPropertyValue(e,"formLocalizationSettings.defaultLanguage")},getLangCode:n,getLangaugeFallback:r,detectUsableLanguageCode:function(e){if(!e.availableLanguages)return null;var t=n(e)||"";return e.availableLanguages.find(function(e){return e.toLowerCase()===t.toLowerCase()})||r(e,t)},detectAndSetFormLanguage:i,getLocalizedButtonText:function(e){var t=KAMPYLE_CONSTANT.LANG_MEMORY_DATA_KEY_PREFIX+e.formId,n=KAMPYLE_DATA.getMemoryData(t);return n||(n=o(e),KAMPYLE_DATA.setMemoryData(t,n)),e=(e=(KAMPYLE_UTILS.getNestedPropertyValue(e,"buttonData.textLocalization")||{})[n]||e.buttonData.text)&&"object"==typeof e?e.buttonText:e},getFormLanguage:function(e){var t=KAMPYLE_DATA.getFormData(e)||{};return t?KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.LANG_MEMORY_DATA_KEY_PREFIX+e)||i(t):null},isFormLanguageRtl:function(e){var t=o(e);return(e=KAMPYLE_UTILS.getNestedPropertyValue(e,"buttonData.textLocalization")||{})[t]&&"true"===e[t].isRtl}}}(),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.EMBEDDED=function(a){function e(){if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CLEAR_EMBEDDED_ON_UPDATE_PAGE))for(var e=KAMPYLE_DATA.getAllForms(),t=0;t<e.length;t++){var n=e[t];KAMPYLE_DATA.isEmbeddedDisplayType(n.formId)&&MDIGITAL.EMBEDDED.deleteEmbeddedIframe(n.formId)}}function t(e,t){if(t=t||{},!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId))return!1;var n=A(t.formId);if(null===(r=n)||r.innerHTML&&("string"!=typeof r.innerHTML||""!==r.innerHTML.trim()))return!1;n&&(o=parseInt(getComputedStyle(n).height),i(n.id,o));var r=setTimeout(function(){KAMPYLE_FUNC.isFormLoaded(t.formId)||KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.NEB_FORM_LOADING_HAS_FAILED,{formId:t.formId,failureCause:KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE.APPLICATION_FAILED,formState:KAMPYLE_DATA.getFormState(t.formId)})},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS);KAMPYLE_DATA.setTimeoutHandler(KAMPYLE_CONSTANT.TIMEOUT_HANDLERS.EMBEDDED_STATUS+"_"+t.formId,r);var o=function(e){var t=KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e,n=a.getElementById(t);n||((n=a.createElement("iframe")).id=t,n.setAttribute("title",KAMPYLE_CONSTANT.IFRAME_SETTINGS.IFRAME_TITLE),E(e)&&n.setAttribute("scrolling","no"),s(n,{display:"none"}));return n}(t.formId),r=KAMPYLE_DATA.getFormData(t.formId);return o.src=KAMPYLE_COMMON.createFormUrl(r.formHtmlUrl,t.formId),n.appendChild(o),KAMPYLE_DATA.setFormState(t.formId,{shouldBeShown:!0}),!0}function n(e,t){if(!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||KAMPYLE_FUNC.hasApplicationLoadingFailed(t.formId))return!1;t=a.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId);return t&&s(t,{display:"block"}),!0}function A(e){e=KAMPYLE_DATA.getFormData(e);return a.getElementById(KAMPYLE_UTILS.getNestedPropertyValue(e,"embeddedData.pageElementId"))}function E(e){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.PREVENT_IFRAME_SCROLLBAR_FLICKERING)&&!KAMPYLE_DATA.isCustomHtmlForm(e)}function s(e,t){t=Object.assign({},{border:0,width:"100%",height:"100%"},t);KAMPYLE_UTILS.setElementStyle(e,t,!1)}function l(e,t){t?KAMPYLE_UTILS.removeAttribute(e,"scrolling"):KAMPYLE_UTILS.addAttributesOnElement(e,{scrolling:"no"})}function r(e,t){t=t||{};var n=KAMPYLE_DATA.getFormData(t.formId)||{},r=A(t.formId),o=a.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId);if(!KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)||null===r||null===o)return!1;var i=function(e,t,n){var r="true"===t.isFixedSize||!0===t.isFixedSize,o=r,i=r?parseInt(t.formHeight):n.newHeight,r=getComputedStyle(e),t=_(e.id);t=isNaN(t)?parseInt(e.style.height||0):t;n=isNaN(parseInt(r.maxHeight))?t||0:parseInt(r.maxHeight),e=isNaN(parseInt(r.minHeight))?0:parseInt(r.minHeight),r=0===n&&0===e;0!==n&&n<e&&(n=e);return function(e,t,n,r,o,i){var a=e;i=n?a=e:(0!==r&&r<=e&&(a=r,t=!0),e<o||e<i?0!==o?o:i:a);return{formHeight:a,iframeHeight:i,shouldBeStatic:t}}(i,o,r,n,e,t)}(r,n,t),r=function(e,t){t=parseInt(t.formWidth);return Math.min(t,KAMPYLE_UTILS.getElementSize(e).width)}(r,n);s(o,{height:i.iframeHeight+"px",width:(n=t.formId,n=KAMPYLE_DATA.getFormData(n),KAMPYLE_UTILS.getNestedPropertyValue(n,"isFullWidthEmbedded")?"100%":r+"px")}),E(t.formId)&&l(o,i.shouldBeStatic);i={height:i.formHeight,width:r,shouldBeStatic:i.shouldBeStatic};return KAMPYLE_UTILS.sendMessageToIframe(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+t.formId,{action:"setFormStyle",data:i}),i}function o(e,t){MDIGITAL.EMBEDDED.deleteEmbeddedIframe(t.formId)}function i(e,t){var n=KAMPYLE_DATA.getMemoryData("hostingElementsHeights");n[e]=t,KAMPYLE_DATA.setMemoryData("hostingElementsHeights",n)}function _(e){return KAMPYLE_DATA.getMemoryData("hostingElementsHeights")[e]||0}function d(e,t){t=t||{},KAMPYLE_DATA.isEmbeddedDisplayType(t.formId)&&KAMPYLE_DATA.isMobile()&&KAMPYLE_VIEW.scrollToEmbeddedForm(t.formId)}return{removeEmbeddedIFrames:e,init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_loadForm:[t],neb_formLoaded:[n],neb_iFrameHeightChanged:[r],neb_formClosed:[o],MDigital_ThankYou_Displayed:[d],neb_targetingInit:[e]})},createEmbeddedIframe:t,showForm:n,calculateFormSize:r,deleteEmbeddedIframe:function(e){return!!KAMPYLE_DATA.isEmbeddedDisplayType(e)&&(null!==(e=a.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+e))&&(KAMPYLE_UTILS.removeAllContent(e),!0))},addHostingElementHeight:i,getHostingElementHeight:_,handleThankyouPage:d,setIframeScrolling:l}}((window,document)),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.FORM_STATE=function(){function e(e,t){var n={};n[t.failureCause]=!0,KAMPYLE_DATA.setFormState(t.formId,n)}function t(e,t){if(!i(t))return!1;var n=KAMPYLE_DATA.getFormState(t.formId),r=[].concat(n.targeting[t.targetingPhase]||[]);r.push(o(t));n={};n[t.targetingPhase]=r,KAMPYLE_DATA.setFormState(t.formId,{targeting:n})}function o(t){var n={targetingRule:"",isPassed:!1,expected:"",actual:""};return Object.keys(n).forEach(function(e){n[e]=t[e]}),n}function i(e){e=e||{};var t=KAMPYLE_DATA.getFormState(e.formId);return!(!t||!t.targeting||!e.targetingPhase)}return{init:function(){KAMPYLE_EVENT_DISPATCHER.subscribeMany({MDigital_targetingRuleEvaluated:[t],neb_formLoadingHasFailed:[e]})},updateTargetingState:t,getRuleData:o,canUpdateState:i,shouldFormBeShown:function(e){return(e=KAMPYLE_DATA.getFormState(e))&&e.shouldBeShown},isFormLoaded:function(e){return!!(e=KAMPYLE_DATA.getFormState(e))&&!!e.loaded},isInviteLoaded:function(e){return!!(e=KAMPYLE_DATA.getFormState(e))&&!!e.inviteLoaded},isFormAlreadyShown:function(e){return(e=KAMPYLE_DATA.getFormState(e))&&e.shown}}}((window,document)),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL_ELEMENT_BUILDER=function(){function a(e,t,n){var r=document.createElement("body");KAMPYLE_UTILS.setElementStyle(r,{margin:"0px",overflow:"hidden"});var o=document.createElement("div");o.id="sc-widget",o.className="sc-widget",KAMPYLE_UTILS.setElementStyle(o,n.widget),KAMPYLE_UTILS.setElementStyle(o,{zIndex:"2147483646"});var i=document.createElement("div");i.className="sc-widget-content",KAMPYLE_UTILS.setElementStyle(i,n.widgetContent),KAMPYLE_UTILS.setElementStyle(i,{fontFamily:"Open Sans"},!0);var a=document.createElement("h2");a.className="scTitle",a.style.fontSize="16px";n=e.screenCaptureSettings&&e.screenCaptureSettings.titleInstructionsScreenCapture?e.screenCaptureSettings.titleInstructionsScreenCapture:"Screen Capture",n=document.createTextNode(n);a.appendChild(n);n=document.createElement("p");n.className="scParagraph",KAMPYLE_UTILS.setElementStyle(n,{fontSize:"12px",marginTop:"10px"});e=e.screenCaptureSettings&&e.screenCaptureSettings.bodyInstructionsScreenCapture?e.screenCaptureSettings.bodyInstructionsScreenCapture:KAMPYLE_CONSTANT.TEXTS.SCREEN_CAPTURE.DEFAULT_DESCRIPTION,e=document.createTextNode(e);return n.appendChild(e),i.appendChild(a),i.appendChild(n),o.appendChild(i),o.appendChild(t),r.appendChild(o),r}function i(n,r,o){n&&r&&o&&"function"==typeof n.addEventListener&&(n.addEventListener("mouseenter",function(){var e=n.children[0],t=n.children[1];KAMPYLE_UTILS.setElementStyle(e,o.bgElementStyle),KAMPYLE_UTILS.setElementStyle(t,o.textElementStyle)}),n.addEventListener("mouseleave",function(){var e=n.children[0],t=n.children[1];KAMPYLE_UTILS.setElementStyle(e,r.bgElementStyle),KAMPYLE_UTILS.setElementStyle(t,r.textElementStyle)}))}return{createScreenCaptureInstructionWidget:function(e,t){var n,r=KAMPYLE_COMMON.overrideDefaultScreenCaptureTexts(e.screenCaptureSettings)||{},o=KAMPYLE_COMMON.overrideDefaultScreenCaptureStyles(e.screenCaptureSettings)||{},i=(i=document.createElement("head"),(n=document.createElement("link")).rel="stylesheet",n.type="text/css",n.href=KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.OPEN_SANS,i.appendChild(n),i),r=a(e,function(e,t){var n=document.createElement("div");n.className="sc-widget-footer",KAMPYLE_UTILS.setElementStyle(n,{"font-family":"'Open Sans'",padding:"10px","font-size":"14px","padding-top":"0","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal","letter-spacing":"normal","line-height":"20px"});var r=document.createElement("button");r.className="sc-widget-footer-cancel top-tip",KAMPYLE_UTILS.addAttributesOnElement(r,{class:"sc-widget-footer-cancel top-tip",title:e.cancelScreenCaptureTooltip}),r.addEventListener("click",function(){KAMPYLE_SCREEN_CAPTURE.getUserSnapInstance().close()}),KAMPYLE_UTILS.setElementStyle(r,Object.assign({outline:"none"},t.widgetFooterCancel,t.widgetFooterBtn));var o=document.createTextNode(e.cancelScreenCaptureLabel);r.appendChild(o);var i=document.createElement("button");return KAMPYLE_UTILS.addAttributesOnElement(i,{class:"sc-widget-footer-capture top-tip",title:e.submitScreenCaptureTooltip}),i.addEventListener("click",KAMPYLE_COMMON.onSubmitScreenCaptureClick),KAMPYLE_UTILS.setElementStyle(i,Object.assign({outline:"none"},t.widgetFooterCapture,t.widgetFooterBtn)),o=document.createElement("img"),KAMPYLE_UTILS.addAttributesOnElement(o,{alt:"Loading",src:KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.KLOADER,id:"widgetFooterCaptureImg"}),KAMPYLE_UTILS.setElementStyle(o,{width:"20px",height:"20px",display:"none"}),(t=document.createElement("span")).id="widgetFooterCaptureText",t.appendChild(document.createTextNode(e.submitScreenCaptureLabel)),i.appendChild(o),i.appendChild(t),n.appendChild(r),n.appendChild(i),n}(r,o),o);r=i=(o=i,i=r,(r=document.createElement("html")).appendChild(o),r.appendChild(i),r),i=t,(t=document.createElement("iframe")).id="nebScIframe",KAMPYLE_UTILS.setElementStyle(t,{width:"310px",bottom:"20px",left:"20px",zIndex:2147483647,position:"fixed"}),KAMPYLE_UTILS.setElementStyle(t,{display:"block"},!0),t.frameBorder="0",t.sandbox="allow-top-navigation allow-same-origin allow-scripts",i?i.parentNode.insertBefore(t,i):document.body.appendChild(t),(i=t.contentDocument||t.contentWindow.document).open(),i.write("<html><head></head><body></body></html>"),i.close(),i.replaceChild(r,i.getElementsByTagName("html")[0]),t.height=i.getElementById("sc-widget")&&i.getElementById("sc-widget").scrollHeight+20,setTimeout(function(){document.activeElement.blur()},100)},createFormContainer:function(e){var t=document.createElement("span");t.id="formLightboxContainer";var n=document.createElement("div");n.id="kampyleFormContainer",KAMPYLE_UTILS.setElementStyle(n,{top:0,left:0,width:"100%",height:"100%",position:"fixed",visibility:"hidden",display:"table",backgroundColor:"rgba(102,102,102,0.4)",zIndex:"99999999",webkitOverflowScrolling:"touch"},!0);var r=document.createElement("div");r.id="kampyleFormContainer";var o=document.createElement("img");KAMPYLE_UTILS.addAttributesOnElement(o,{class:"neb-loading-spinner",alt:"Loading",src:e}),KAMPYLE_UTILS.setElementStyle(o,{position:"absolute",top:"50%",left:"50%",marginTop:"-30px",marignLeft:"-30px",maxWidth:"60px"},!0),(e=document.createElement("div")).id="kampyleFormModal",KAMPYLE_UTILS.setElementStyle(e,{zIndex:"99999999",webkitOverflowScrolling:"touch"},!0),r.appendChild(o),r.appendChild(e),n.appendChild(r),t.appendChild(n),document.body.appendChild(t)},createInviteIframeContainer:function(e){var t=document.createElement("span"),n=KAMPYLE_VIEW.getLoaderGifUrl(),r=document.createElement("div");r.id="kampyleInviteContainer",KAMPYLE_UTILS.setElementStyle(r,{top:"0",left:"0",width:"100%",height:"100%",position:"fixed",visibility:"hidden",display:"none",backgroundColor:"rgba(22,22,22,0.5)",zIndex:"99999999",overflow:"auto"},!0);var o=document.createElement("img");KAMPYLE_UTILS.addAttributesOnElement(o,{class:"neb-loading-spinner",alt:"Loading",src:n},!0),KAMPYLE_UTILS.setElementStyle(o,{position:"absolute",top:"50%",left:"50%",marginTop:"-30px",marignLeft:"-30px",maxWidth:"60px"},!0),(n=document.createElement("div")).id="kampyleInviteModal",KAMPYLE_UTILS.setElementStyle(n,{overflow:"hidden",margin:"0 auto",height:e.inviteData.inviteHeight,width:e.inviteData.inviteWidth,position:"relative",zIndex:"99999999",top:"25%",webkitBoxShadow:"0 0 10px rgba(0,0,0,0.4)",mozBoxShadow:"0 0 10px rgba(0,0,0,0.4)",boxShadow:"0 0 10px rgba(0,0,0,0.4)"}),r.appendChild(n),r.appendChild(o),t.appendChild(r),document.body.appendChild(r)},getErrorModal:function(e,t,n,r,o){var i=document.createElement("div"),e=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?{id:e}:{tabIndex:0,id:e,role:"alertdialog","aria-modal":!0,"aria-labelledby":"title-no-json-modal","aria-describedby":"description-no-json-modal",lang:i};return KAMPYLE_UTILS.addAttributesOnElement(i,e),KAMPYLE_UTILS.setElementStyle(i,{position:"relative",textAlign:"center",backgroundColor:"rgba(255,255,255, 1)",margin:"5% auto 2% auto",border:"1px solid #cccccc",boxShadow:"8px 10px 58px 2px rgba(64, 64, 74, 0.56)",color:"#2C3548",fontFamily:"helvetica",height:"500px",width:KAMPYLE_DATA.isMobile()?"98%":"450px"}),e=function(e,t){var n=document.createElement("i");KAMPYLE_UTILS.addAttributesOnElement(n,{"aria-hidden":!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS),tabIndex:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?0:-1,id:"close-no-json-modal","data-aut":"no-json-modal-close-button",role:"button",lang:t,"aria-label":e}),KAMPYLE_UTILS.setElementStyle(n,{cursor:"pointer",position:"absolute",top:"3px",right:"12px",fontStyle:"normal",fontSize:"28px",opacity:.7}),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)&&KAMPYLE_UTILS.addWcagStyleOnFocus(n);KAMPYLE_UTILS.isDesktop()&&KAMPYLE_UTILS.addHoverEffectOnElement(n,{opacity:.7},{opacity:1});return n.innerHTML="Ã—",n}(o,t),o=document.createElement("img"),KAMPYLE_UTILS.addAttributesOnElement(o,{src:KAMPYLE_COMMON.getUrlPrefix()+KAMPYLE_CONSTANT.SRC.OOPS}),KAMPYLE_UTILS.setElementStyle(o,{marginLeft:"-1px"}),t=o,o=n,n=document.createElement("h2"),KAMPYLE_UTILS.addAttributesOnElement(n,{id:"title-no-json-modal"}),KAMPYLE_UTILS.setElementStyle(n,{fontWeight:"bold",margin:"40px 0 16px",fontSize:"24px"}),n.appendChild(document.createTextNode(o)),r=function(e){var t=document.createElement("div");KAMPYLE_UTILS.addAttributesOnElement(t,{id:"description-no-json-modal"}),KAMPYLE_UTILS.setElementStyle(t,{padding:"0 44px",color:"#2C3548",fontFamily:"helvetica",lineHeight:"23px",fontSize:"16px"});var n=document.createElement("p");return n.innerHTML=e,t.appendChild(n),t}(r),i.appendChild(e),i.appendChild(t),i.appendChild(n),i.appendChild(r),i},getVerticalButton:function(e){var t=KAMPYLE_VIEW.getButtonText(e),n="kampyle_"+e.buttonData.position,r=document.createElement("button");KAMPYLE_UTILS.addAttributesOnElement(r,{id:"nebula_div_btn",alt:t,tabIndex:"0",class:"kampyle_vertical_button "+n+" "+KAMPYLE_VIEW.getWCAGClass()}),KAMPYLE_UTILS.setElementStyle(r,{backgroundColor:"transparent",height:"auto",minHeight:"35px",maxHeight:"35px",width:"125px",minWidth:"125px",maxWidth:"125px",padding:0},!0),KAMPYLE_UTILS.setElementStyle(r,{fontFamily:"Open Sans, sans-serif",cursor:"pointer",position:"fixed",top:"45%",border:"none",zIndex:"99999990",height:"35px !important","-ms-transform":"rotate(90deg)","-webkit-transform":"rotate(90deg)",transform:"rotate(90deg)"}),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?KAMPYLE_UTILS.addWcagStyleOnFocus(r):KAMPYLE_UTILS.setElementStyle(r,{outline:"none"},!0),r.style[e.buttonData.position]="-45px";var o=document.createElement("div");return o.setAttribute("class","kampyle_button"),n="left"===e.buttonData.position?"3px 3px 0 0":"0 0 3px 3px",KAMPYLE_UTILS.setElementStyle(o,{width:"125px",minWidth:"125px",maxWidth:"125px",minHeight:"35px",maxHeight:"35px","-webkit-border-radius":n,"-moz-border-radius":n,"-ms-border-radius":n,"border-radius":n},!0),KAMPYLE_UTILS.setElementStyle(o,{height:"35px",background:e.buttonData.backgroundColor,color:e.buttonData.textColor,position:"absolute",top:0,left:0,zIndex:"-1"}),n=document.createElement("div"),KAMPYLE_UTILS.addAttributesOnElement(n,{"data-aut":"feedback",class:"kampyle_button-text"}),KAMPYLE_UTILS.setElementStyle(n,{fontWeight:"normal"},!0),KAMPYLE_UTILS.setElementStyle(n,{color:e.buttonData.textColor,fontSize:"14px",lineHeight:"35px",textAlign:"center"}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.RTL)&&MDIGITAL.LOCALIZATION.isFormLanguageRtl(e)&&KAMPYLE_UTILS.setElementStyle(n,{transform:"scale(-1)","-ms-transform":"scale(-1)","-webkit-transform":"scale(-1)"}),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)&&i(r,{bgElementStyle:{backgroundColor:e.buttonData.backgroundColor},textElementStyle:{color:e.buttonData.textColor}},{bgElementStyle:{backgroundColor:e.buttonData.backgroundHoverColor||"#396CEF"},textElementStyle:{color:e.buttonData.textHoverColor||"#FFFFFF"}}),t=document.createTextNode(t),n.appendChild(t),r.appendChild(o),r.appendChild(n),r},getTriangularButton:function(e){var t={topRight:{btnStyle:{top:0,right:0},div1Style:{top:0,right:0,borderTop:"81px solid "+e.buttonData.backgroundColor,borderLeft:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(45deg)","-webkit-transform":"rotate(45deg)",transform:"rotate(45deg)"}},topLeft:{btnStyle:{top:0,left:0},div1Style:{top:0,left:0,borderTop:"81px solid "+e.buttonData.backgroundColor,borderRight:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(-45deg)","-webkit-transform":"rotate(-45deg)",transform:"rotate(-45deg)"}},bottomRight:{btnStyle:{bottom:0,right:0},div1Style:{bottom:0,right:0,borderBottom:"81px solid "+e.buttonData.backgroundColor,borderLeft:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(-45deg)","-webkit-transform":"rotate(-45deg)",transform:"rotate(-45deg)"}},bottomLeft:{btnStyle:{bottom:0,left:0},div1Style:{bottom:0,left:0,borderBottom:"81px solid "+e.buttonData.backgroundColor,borderRight:"81px solid transparent"},div2Style:{"-ms-transform":"rotate(45deg)","-webkit-transform":"rotate(45deg)",transform:"rotate(45deg)"}}},n=document.createElement("button"),r=KAMPYLE_VIEW.getButtonText(e),o=e.buttonData.position||"topLeft",i=KAMPYLE_VIEW.getClassDirectonByPosition(o),a=t[o].btnStyle,A=t[o].div1Style,t=t[o].div2Style;return KAMPYLE_UTILS.addAttributesOnElement(n,{id:"nebula_div_btn",alt:r,tabindex:0,class:"kampyle_feedback-button "+i.leftright+" "+KAMPYLE_VIEW.getWCAGClass()}),KAMPYLE_UTILS.setElementStyle(n,{backgroundColor:"transparent",height:"auto",padding:0},!0),KAMPYLE_UTILS.setElementStyle(n,Object.assign({fontFamily:"Open Sans, sans-serif",cursor:"pointer",position:"fixed",border:"none",zIndex:"99999990"},a)),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?(n.addEventListener("focusin",function(e){KAMPYLE_UTILS.setElementStyle(n,{outline:"1px dashed #595959",outlineOffset:"2px",transition:"none"},!0)}),n.addEventListener("focusout",function(e){n.style.outline="none",n.style.outlineOffset=null,n.style.transition=null})):KAMPYLE_UTILS.setElementStyle(n,{outline:"none"},!0),(a=document.createElement("div")).setAttribute("class","kampyle_triangle"),KAMPYLE_UTILS.setElementStyle(a,Object.assign({position:"absolute",width:0,height:0,zIndex:-1},A)),A=document.createElement("div"),KAMPYLE_UTILS.addAttributesOnElement(A,{"data-aut":"feedback",class:"kampyle_button-text "+i.topbottom}),KAMPYLE_UTILS.setElementStyle(A,{fontWeight:"normal",lineHeight:"bottomLeft"===o||"bottomRight"===o?"108px":"53px"},!0),KAMPYLE_UTILS.setElementStyle(A,Object.assign({height:"81px",width:"81px",textAlign:"center",zIndex:"1000",color:e.buttonData.textColor,fontSize:"14px"},t)),r=document.createTextNode(r),A.appendChild(r),n.appendChild(a),n.appendChild(A),n},getCustomButton:function(e){var t=document.createElement("button"),n=document.createElement("img"),r=KAMPYLE_VIEW.getButtonText(e),o={bottomLeft:{bottom:0,left:0},bottomRight:{bottom:0,right:0},topLeft:{top:0,left:0},topRight:{top:0,right:0},left:{left:0,top:"50%"},right:{right:0,top:"50%"}}[e.buttonData.position];return KAMPYLE_UTILS.addAttributesOnElement(t,{id:"nebula_div_btn",tabindex:0,class:"nebula_image_button "+KAMPYLE_VIEW.getWCAGClass()}),KAMPYLE_UTILS.setElementStyle(t,{zIndex:"99999990",position:"fixed",cursor:"pointer",border:"none",lineHeight:"1px",width:"auto",background:"transparent"},!0),KAMPYLE_UTILS.setElementStyle(t,Object.assign({padding:0},o)),KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)?(t.addEventListener("focusin",function(e){KAMPYLE_UTILS.setElementStyle(t,{outline:"1px dashed #595959",outlineOffset:"2px",transition:"none"},!0)}),t.addEventListener("focusout",function(e){t.style.outline="none",t.style.outlineOffset=null,t.style.transition=null})):KAMPYLE_UTILS.setElementStyle(t,{outline:"none"},!0),KAMPYLE_UTILS.addAttributesOnElement(n,{alt:r,src:e.buttonData.buttonUrl}),t.appendChild(n),t},createScreenCaptureBody:a,addHoverStyleToFeedbackButton:i}}((window,document)),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.LOGGER=(window,document,new function(){var r={DEBUG:"log",INFO:"info",WARN:"warn",ERROR:"warn"};this._logs=[],this.getLoggerStatus=function(){var e=KAMPYLE_DATA.getData("mdLogger");return"true"===e||!0===e},this.setLoggerStatus=function(e){KAMPYLE_DATA.setData("mdLogger",e)},this.debug=function(e){this.writeLog("DEBUG",e)},this.warn=function(e){this.writeLog("WARN",e)},this.error=function(e){this.writeLog("ERROR",e)},this.writeLog=function(e,t){var n=r[e]||r.DEBUG;t=this.setTimeAndLevelOnMessage(e,t),this._logs.push({type:n,message:t||""})},this.setTimeAndLevelOnMessage=function(e,t){return new Date+" ["+e+"] "+t},this.printLogs=function(){var t="";return this._logs.forEach(function(e){console[e.type](e.message),t+=" "+e.message}),t}}),window.COOLADATA_CODE=function(p){return{init:function(){var o,i,a;p.cooladata||(o=p.cooladata||[]).__SV||((p.cooladata=o)._i=[],o.init=function(e,t,n){var r=o;for(void 0!==n?r=o[n]=[]:n="cooladata",i=["trackEvent","trackEventLater","trackPageload","flush","setConfig"],a=0;a<i.length;a++)!function(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(r,i[a]);o._i.push([e,t,n])},o.__SV=1.2),function(i){var t,n=Array.prototype,o=Function.prototype,e=Object.prototype,E=n.slice,d=e.toString,T=e.hasOwnProperty,s=p.console,r=p.navigator,l=p.document,a=r.userAgent,A="http:"==l.location.protocol?"http://":"https://",e=i&&i.__SV||0,_=p.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,u=!_&&-1==a.indexOf("MSIE")&&-1==a.indexOf("Mozilla"),m={},c={api_host:"api.cooladata.com",loaded:function(){},img:!1,http_post:!1,track_pageload:!1,stored_user_key_name:"medallia_journeys_id",user_identifier_property:"user_id",protocol:!1},I=!1;function S(e){return e&&(e.preventDefault=S.preventDefault,e.stopPropagation=S.stopPropagation),e}!function(){o.bind;var a=n.forEach,e=(n.indexOf,Array.isArray),A={},r=m.each=function(e,t,n){if(null!=e)if(a&&e.forEach===a)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;r<o;r++)if(r in e&&t.call(n,e[r],r,e)===A)return}else for(var i in e)if(T.call(e,i)&&t.call(n,e[i],i,e)===A)return};m.extend=function(n){return r(E.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(n[t]=e[t])}),n},m.isArray=e||function(e){return"[object Array]"===d.call(e)},m.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},m.isArguments=function(e){return!(!e||!T.call(e,"callee"))},m.toArray=function(e){return e?e.toArray?e.toArray():m.isArray(e)||m.isArguments(e)?E.call(e):m.values(e):[]},m.values=function(e){var t=[];return null==e||r(e,function(e){t[t.length]=e}),t}}(),m.isObject=function(e){return e===Object(e)&&!m.isArray(e)},m.isUndefined=function(e){return void 0===e},m.isString=function(e){return"[object String]"==d.call(e)},m.JSONEncode=function(e){var l=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},_=function(e,t){var n,r="",o=0,i="",a="",A=r,E=[],s=t[e];switch(typeof(s=s&&"object"==typeof s&&"function"==typeof s.toJSON?s.toJSON(e):s)){case"string":return l(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(r+="    ",E=[],"[object Array]"===d.apply(s)){for(n=s.length,o=0;o<n;o+=1)E[o]=_(o,s)||"null";return a=0===E.length?"[]":r?"[\n"+r+E.join(",\n"+r)+"\n"+A+"]":"["+E.join(",")+"]",r=A,a}for(i in s)T.call(s,i)&&(a=_(i,s))&&E.push(l(i)+(r?": ":":")+a);return a=0===E.length?"{}":r?"{"+E.join(",")+A+"}":"{"+E.join(",")+"}",r=A,a}};return _("",{"":e})},m.strip_empty_properties=function(e){var n={};return m.each(e,function(e,t){m.isString(e)&&0<e.length&&(n[t]=e)}),n},m.base64Encode=function(e){var s={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,o,i,a,A="",E=0;for(e=s._utf8_encode(e);E<e.length;)r=(a=e.charCodeAt(E++))>>2,o=(3&a)<<4|(t=e.charCodeAt(E++))>>4,i=(15&t)<<2|(n=e.charCodeAt(E++))>>6,a=63&n,isNaN(t)?i=a=64:isNaN(n)&&(a=64),A=A+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(a);return A},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}};return s.encode(e)},m.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},m.HTTPBuildQuery=function(e,t){var n,r,o=[];return void 0===t&&(t="&"),m.each(e,function(e,t){n=encodeURIComponent(e.toString()),r=encodeURIComponent(t),o[o.length]=r+"="+n}),o.join(t)},m.UUID=(t=function(){for(var e=+new Date,t=0;e==+new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(screen.height*screen.width).toString(16);return t()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,n=a,o=[],r=0;function i(e,t){for(var n=0,r=0;r<t.length;r++)n|=o[r]<<8*r;return e^n}for(e=0;e<n.length;e++)t=n.charCodeAt(e),o.unshift(255&t),4<=o.length&&(r=i(r,o),o=[]);return(r=0<o.length?i(r,o):r).toString(16)}()+"-"+e+"-"+t()}),m.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")},m.register_event=(S.preventDefault=function(){this.returnValue=!1},S.stopPropagation=function(){this.cancelBubble=!0},function(e,t,n,r){var o,i,a;e?e.addEventListener&&!r?e.addEventListener(t,n,!1):(t=e[r="on"+t],e[r]=(o=e,i=n,a=t,function(e){if(e=e||S(p.event)){var t,n=!0;return m.isFunction(a)&&(t=a(e)),e=i.call(o,e),n=!1===t||!1===e?!1:n}})):s.log("No valid element provided to register_event")}),m.info={campaignParams:function(){var t,e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),n={};return m.each(e,function(e){(t=m.getQueryParam(l.URL,e)).length&&(n[e]=t)}),n},referringDomain:function(e){e=e.split("/");return 3<=e.length?e[2]:""},properties:function(){return m.extend(m.strip_empty_properties({session_screen_size:p.screen.width+"x"+p.screen.height,session_dua:r.userAgent,session_platform:r.platform,referring_url:l.referrer,referring_domain:m.info.referringDomain(l.referrer),page_title:l.title,page_url:l.location.href}),{tracker_type:"javascript",tracker_version:"2.2.20"})},pageviewInfo:function(e){return m.strip_empty_properties({event_timestamp_epoch:+new Date})}};function L(e,t,n){var r,o="cooladata"===n?i:i[n];if(!o||m.isArray(o))return(r=new g)._init(e,t,n),m.isUndefined(o)||r._execute_array(o),r;s.log("You have already initialized "+n)}var g=function(){};if(g.prototype.init=function(e,t,n){if(void 0!==n){if("cooladata"!==n){t=L(e,t,n);return(i[n]=t)._loaded(),t}s.log("You must initialize the main cooladata object right after you include the Cooladata js snippet")}else s.log("You must name your new library: init(token, config, name)")},g.prototype._init=function(e,t,n){this.__loaded=!0,this.__SV=!0,this.config={},this.eventsArray=[],this.set_config(m.extend({},c,{token:e.app_key,img:e.img_src_get_request,session_id:e.session_id,http_post:e.http_post,track_pageload:e.track_pageload,user_identifier_property:e.user_identifier_property,stored_user_key_name:e.stored_user_key_name,name:n}));var r=!e.protocol||"http"!=e.protocol&&"https"!=e.protocol?A:e.protocol+"://",n=e.api_host||c.api_host;this.set_config({api_host:r+n});n=e.user_id||this.getStoredUid()||m.UUID();this.storeUid(n),this.set_config({user_id:n}),this.__dom_loaded_queue=[],this.__request_queue=[],e.custom_event_handler&&(this.__customEventHandler=e.custom_event_handler)},g.prototype.getStoredUid=function(){var e=this.get_config("stored_user_key_name");if("undefined"!=typeof Storage&&p.localStorage.getItem(e))return p.localStorage.getItem(e);for(var t=e+"=",n=l.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},g.prototype.storeUid=function(e){var t=this.get_config("stored_user_key_name");if("undefined"==typeof Storage){var n=new Date;n.setTime(n.getTime()+31536e6);var n="; expires="+n.toGMTString(),r=["com","org","net","int","edu","gov","mil","biz"],o=p.location.host.split("."),i="";if("www"==o[0]||4==o.length)o.shift(),i=o.join(".");else switch(o.length){case 2:i=o.join(".");break;case 3:for(var a=r.length;a--;)if(r[a]===o[2]){o.shift(),i=o.join(".");break}""==i&&(i=o.join("."))}l.cookie=t+"="+e+n+";domain=."+i+";path=/; SameSite=Lax; Secure"}else p.localStorage.setItem(t,e)},g.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageload")&&this.track_pageload()},g.prototype._dom_loaded=function(){m.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),m.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue},g.prototype._track_dom=function(e,t){if(this.get_config("img"))return s.log("You can't use DOM tracking functions with img = true."),!1;if(!I)return this.__dom_loaded_queue.push([e,t]),!1;e=(new e).init(this);return e.track.apply(e,t)},g.prototype.trackEventLater=function(e,t){var n;void 0!==e?(t=t||{},n=new Date,(n=m.extend({},m.info.properties(),m.info.campaignParams(),{event_name:e,event_timestamp_epoch:n.getTime().toString(),event_timezone_offset:n.getTimezoneOffset()/60*-1,session_id:this.get_config("session_id")}))[this.get_config("user_identifier_property")]=this.get_config("user_id"),n=m.extend(n,t),this.eventsArray.push(n)):s.log("No event name provided to cooladata.trackEventLater")},g.prototype.flush=function(){this.get_config("api_host"),this.get_config("token");var e={events:this.eventsArray},e=m.JSONEncode(e);this._send_request(e),this.eventsArray=[]},g.prototype._onError=function(e,t){},g.prototype._send_request=function(e,n){if(u)this.__request_queue.push(arguments);else{function t(){var e=p.navigator.userAgent;return-1<e.indexOf("MSIE ")&&1!==e.split("MSIE ")[1].charAt(0)}var r=!1;if(1400<e.length&&(r=!0),this.__customEventHandler&&this.__customEventHandler.handleRequest){var o=null;return r||!t()&&!this.get_config("img")?_&&(o=this.get_config("http_post")||r?"post":"get"):o="image",void this.__customEventHandler.handleRequest(this,e,o)}var i,a,A,E,o=this.get_config("api_host")+"/v1/"+this.get_config("token")+"/track";r||!t()&&!this.get_config("img")?_?(a=null,this.get_config("http_post")||r?a="data="+encodeURIComponent(e):(e={data:m.base64Encode(e)},o+="?"+m.HTTPBuildQuery(e)),i=new XMLHttpRequest,this.get_config("http_post")||r?(i.open("POST",o,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")):i.open("GET",o,!0),i.withCredentials=!0,i.onreadystatechange=function(e){var t;4===i.readyState&&(200===i.status?n&&n():(t="Bad HTTP status: "+i.status+" "+i.statusText,s.log(t)))},i.send(a)):((a=l.createElement("script")).type="text/javascript",a.async=!0,a.defer=!0,a.src=o,(E=l.getElementsByTagName("script")[0]).parentNode.insertBefore(a,E)):(o=(A=this).get_config("api_host")+"/egw/5/"+this.get_config("token")+"/track/__cool.gif",o+="?data="+(e=m.base64Encode(e)),(E=l.createElement("img")).onerror=function(){A._onError(e,n)},E.width=1,E.height=1,E.src=o)}},g.prototype._execute_array=function(e){var t,n=[],r=[],o=[];m.each(e,function(e){e&&(t=e[0],"function"==typeof e?e.call(this):(m.isArray(e)&&"alias"===t?n:!m.isArray(e)||-1==t.indexOf("track")&&-1==t.indexOf("flush")||"function"!=typeof this[t]?r:o).push(e))},this);e=function(e,t){m.each(e,function(e){this[e[0]].apply(this,e.slice(1))},t)};e(n,this),e(r,this),e(o,this)},g.prototype.push=function(e){this._execute_array([e])},g.prototype.trackEvent=function(e,t,n){var r;void 0!==e?(t=t||{},r=new Date,(r=m.extend({},m.info.properties(),m.info.campaignParams(),{event_name:e,event_timestamp_epoch:r.getTime().toString(),event_timezone_offset:r.getTimezoneOffset()/60*-1,session_id:this.get_config("session_id")}))[this.get_config("user_identifier_property")]=this.get_config("user_id"),r={events:[r=m.extend(r,t)]},r=m.JSONEncode(r),this._send_request(r,n)):s.log("No event name provided to cooladata.trackEvent")},g.prototype.track_pageload=function(e){void 0===e&&(e=l.location.href),this.trackEvent("page_load",m.info.pageviewInfo(e))},g.prototype.set_config=function(e){m.isObject(e)&&m.extend(this.config,e)},g.prototype.get_config=function(e){return this.config[e]},g.prototype.toString=function(){var e=this.get_config("name");return e="cooladata"!==e?"cooladata."+e:e},m.toArray=m.toArray,m.isObject=m.isObject,m.JSONEncode=m.JSONEncode,m.info=m.info,g.prototype.init,g.prototype.track_event=g.prototype.trackEvent,g.prototype.track_event_later=g.prototype.trackEventLater,g.prototype.flush,g.prototype.track_pageload,g.prototype.set_config,g.prototype.get_config,g.prototype.toString,m.isUndefined(i))!function(){if(!m.isUndefined(s)&&s){var t=["Cooladata error:"].concat(m.toArray(arguments));try{s.error.apply(s,t)}catch(e){m.each(t,function(e){s.error(e)})}}}("'cooladata' object not initialized. Ensure you are using the latest version of the Cooladata JS Library along with the snippet we provide.");else if(i.__loaded||i.config)s.log("Cooladata library has already been downloaded at least once.");else if(e<1.1)s.critical("Version mismatch; please ensure you're using the latest version of the Cooladata code snippet.");else{var M={};if(m.each(i._i,function(e){var t;e&&m.isArray(e)&&(t=e[e.length-1],e=L.apply(this,e),M[t]=e)}),i.init=function(e,t,n){n?i[n]||(i[n]=M[n]=L(e,t,n),i[n]._loaded()):(n=i,M.cooladata?n=M.cooladata:e&&(n=L(e,t,"cooladata"))&&n._loaded(),p.cooladata=i=n,m.each(M,function(e,t){"cooladata"!==t&&(i[t]=e)}),i._=m)},i.init(),m.each(M,function(e){e._loaded()}),l.addEventListener)"complete"==l.readyState?P():l.addEventListener("DOMContentLoaded",P,!1);else if(l.attachEvent){l.attachEvent("onreadystatechange",P);e=!1;try{e=null==p.frameElement}catch(i){}l.documentElement.doScroll&&e&&!function t(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}P()}()}m.register_event(p,"load",P,!0)}function P(){P.done||(P.done=!0,u=!(I=!0),m.each(M,function(e){e._dom_loaded()}))}}(p.cooladata)}}}(window,document),window.KAMPYLE_COOLADATA=function(A,E){var s,l,_="uwbhzazjt4.execute-api.eu-west-1.amazonaws.com/Production",d={PROD:"qceuv8449dzg58ptt1bhda9g8ue19c7s",QA:"lf5shxz66ckwmizs7kowapgs2rkoejcl"},t={},T=KAMPYLE_CONSTANT.PLACEHOLDERS.COOLADATA_SRC_PREFIX+KAMPYLE_CONSTANT.SRC.COOLADATA,u={neb_pageView:{eventId:"nebula_page_view"},neb_inviteAccepted:{eventId:"nebula_invite_accepted"},neb_inviteDeclined:{eventId:"nebula_invite_declined"},neb_showInvitation:{eventId:"nebula_invitation_show",memoryDataKey:"invitationTriggeringData"},neb_feedbackSubmitted:{eventId:"nebula_form_submitted"},neb_formShown:{eventId:"nebula_form_show"},neb_buttonClicked:{eventId:"nebula_button_clicked"},neb_sdkLoadForm:{eventId:"nebula_load_form_bycode"},neb_sdkShowForm:{eventId:"nebula_code_trigger_form"},neb_routeToForm:{eventId:"nebula_route_to_form"},neb_formClosed:{eventId:"nebula_form_closed"},neb_popupBlocked:{eventId:"nebula_popup_blocked"},neb_skipInvitation:{eventId:"nebula_invitation_skipped"},neb_formPageShown:{eventId:"nebula_form_page_displayed"},neb_captureInit:{eventId:"nebula_capture_init"},neb_captureImageClicked:{eventId:"nebula_capture_image_clicked"},MDigital_Capture_Cancelled:{eventId:"nebula_cancel_capture_clicked"},neb_load_form_preload_proximity:{eventId:"nebula_load_form_preload_proximity",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_cancel_capture_clicked:{eventId:"nebula_cancel_capture_clicked"},neb_load_form_form_reload:{eventId:"nebula_load_form_form_reload",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_button_displayed:{eventId:"nebula_button_displayed",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_invitation_loaded:{eventId:"nebula_invitation_loaded",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_invitation_ready:{eventId:"nebula_invitation_ready",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_form_loaded:{eventId:"nebula_form_loaded",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_formReady:{eventId:"nebula_form_ready",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},neb_sdkSurveyDisplayed:{eventId:"nebula_code_survey_displayed"},neb_beforeHttpGetRequest:{eventId:"nebula_before_http_get_request",eventDataKey:"httpRequestData"},neb_afterHttpGetRequestOnError:{eventId:"nebula_after_http_get_request_on_error",eventDataKey:"httpRequestData"},neb_afterHttpGetRequestOnErrorStatusCode:{eventId:"nebula_after_http_get_request_on_error_status_code",eventDataKey:"httpRequestData"},neb_afterHttpGetRequestOnTimeout:{eventId:"nebula_after_http_get_request_on_timeout",eventDataKey:"httpRequestData"},neb_afterHttpGetRequest:{eventId:"nebula_after_http_get_request",eventDataKey:"httpRequestData"},MDigital_updatingSbtServer:{eventId:"MDigital_updating_sbt_server",eventDataKey:"dataObjForSbt",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_settingIdentifierValueOnMemory:{eventId:"MDigital_setting_identifier_value_on_memory",eventDataKey:"hasIdentifierValue",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_shouldNotSyncIdentifier:{eventId:"MDigital_should_not_sync_identifier",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_beforeHttpPostRequest:{eventId:"nebula_before_http_post_request",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequestOnError:{eventId:"nebula_after_http_post_request_on_error",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequest:{eventId:"nebula_after_http_post_request",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequestOnErrorStatusCode:{eventId:"nebula_after_http_post_request_on_error_status_code",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_afterHttpPostRequestOnTimeout:{eventId:"nebula_after_http_post_request_on_timeout",eventDataKey:"httpRequestData",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_updateTargetingWithDeclinedDateInviteDeclined:{eventId:"MDigital_update_targeting_with_declined_date_invite_declined",eventDataKey:"declinedDate",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_updateTargetingWithSubmittedDate:{eventId:"MDigital_update_targeting_with_submitted_date",eventDataKey:"submittedDate",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},MDigital_updateTargetingWithDeclinedDateFormClosed:{eventId:"MDigital_update_targeting_with_declined_date_form_closed",eventDataKey:"declinedDate",provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS},neb_initUserIdentifier:{eventId:"nebula_init_user_identifier",eventDataKey:"hasIdentifierValue"},neb_initUserIdentifierOnExtraData:{eventId:"nebula_init_user_identifier_on_extra_data",eventDataKey:"hasIdentifierValue"},neb_eventDispatcherError:{eventId:"nebula_eventDispatcherError",eventDataKeys:["errorMessage","errorStack","additionalInfo"]},neb_feedbackUUIDisNull:{eventId:"nebula_feedbackUuidIsNull"},neb_submitFeedbackFailed:{eventId:"nebula_submitFeedbackFailed",eventDataKeys:["uuid","errorMessage","errorStack"]},MDigital_Form_Next_Page:{eventId:"MDigital_Form_Next_Page",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_Form_Back_Page:{eventId:"MDigital_Form_Back_Page",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_Form_Close_No_Submit:{eventId:"MDigital_Form_Close_No_Submit",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_ThankYou_Displayed:{eventId:"MDigital_ThankYou_Displayed",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_ThankYou_Close:{eventId:"MDigital_ThankYou_Close",provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_warning:{eventId:"MDigital_warning",eventDataKey:"message"},MDigital_couldNotFetchData:{eventId:"MDigital_couldNotFetchData",eventDataKey:"errorData"},MDigital_couldNotLoadFormApplication:{eventId:"MDigital_couldNotLoadFormApplication",eventDataKey:"errorData"},MDigital_DynamicOnsiteInitializedSuccessfully:{eventId:KAMPYLE_CONSTANT.EVENTS.MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY,provision:KAMPYLE_CONSTANT.PROVISIONS.DYNAMIC_ONSITE_EVENTS},MDigital_noJsonModalShown:{eventId:"mdigital_noDataMessageDisplayed",eventDataKey:"additionalInfo"},screenCaptureRetake:{eventId:KAMPYLE_CONSTANT.EVENTS.SCREEN_CAPTURE_RETAKE},screenCaptureDelete:{eventId:KAMPYLE_CONSTANT.EVENTS.SCREEN_CAPTURE_DELETE}};function m(){Object.keys(u).forEach(function(e){e=u[e];a(e)&&(t[e.eventId]=0)})}function n(e){var t=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?e.feedbackUUID:e.feedbackCorrelationUUID,t={enviroment:e.enviroment,accountId:e.accountId,url:e.pageURL,websiteId:e.websiteId,feedback_uuid:t,formId:e.formId||null,formTriggerType:e.formTriggerType||null,kampyle_data:e.kampyle_data||null,cookie_size:e.cookie_size||null,kampyle_version:e.kampyle_version||"",onsite_version:A.MDIGITAL.version||"0.0.0.0",history_length:A.history.length,event_local_timestamp:KAMPYLE_UTILS.getCurrentTimestamp(),position:e.position||null,isUserIdentified:!!KAMPYLE_DATA.getMemoryData("identifierValue"),feedback_correlation_uuid:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?e.feedbackCorrelationUUID:null};return"nebula_form_page_shown"===e.eventId&&(t.pageNumber=e.pageNumber),"nebula_route_to_form"===e.eventId&&(t.destinationForm=e.formId),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&e.formId&&(t.Web_form_lang=MDIGITAL.LOCALIZATION.getFormLanguage(e.formId)||null),r(e,t),t}function r(e,t){var n=u[e.eventName],r=n?n.eventDataKeys:null;if(r)for(var o=0;o<r.length;o++)t[r[o]]=e[r[o]]||null}function o(e,t){if(!e||!t)return null;var n,r,o=Object.assign({},o,t);for(n in l)o[n]=l[n];for(r in u[e])o[r]=u[e][r];t=P(e,KAMPYLE_UTILS.getAllKampyleData(),o);return o.kampyle_data=t,o.cookie_size=KAMPYLE_UTILS.getByteSize(E.cookie),o.kampyle_version=A.MDIGITAL.version||"0.0.0.0",o.pageURL=location.href,o.eventName=e,o}function c(e,t){var n=u[e];if(!n||!i(n)||S(n))return!1;t=o(e,t=n.formatDataFunc&&"function"==typeof n.formatDataFunc?n.formatDataFunc.call(this,t):t),KAMPYLE_COOLADATA.kampyleSendCoolaData(t)}function i(e){return!e.provision||!!KAMPYLE_FUNC.checkProvision(e.provision)}function a(e){return"number"==typeof e.rateLimit&&0<e.rateLimit}function I(e){e=t[e];return"number"==typeof e?e:null}function S(e){var t=I(e.eventId);return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_EVNETS_LIMIT)&&"number"==typeof t&&t>=e.rateLimit}function L(e){return null===I(e)?null:++t[e]}function g(e,t){try{M().trackEvent(e,t),null!==I(e)&&L(e)}catch(e){console.warn(e)}}function M(){return s?A.cooladata[KAMPYLE_CONSTANT.COOLADATA_INSTANCE_NAME]:A.cooladata}function P(e,t,n){n=n||{};var r=u[e].memoryDataKey,o=KAMPYLE_DATA.getMemoryData(r);o&&(t[r]=o);e=u[e].eventDataKey,n=n[e];return n&&(t[e]=n),t}return{getDataToSend:n,kampyleSendCoolaData:function(e){if(!e||!A.cooladata)return!1;var t=n(e);return g(e.eventId,t),!0},formatData:o,appendDataByEventName:P,addEventDataKeys:r,rateLimitCounterMap:t,isEventProvisioned:i,isEventDefinedAsRateLimited:a,getEventCallsCounter:I,isRateLimitExceeded:S,increaseEventCallsCounter:L,initRateLimiting:m,init:function(){try{l={userid:KAMPYLE_UTILS.kampyleGetUserId()};var e={cookie_expiration:KAMPYLE_DATA.getCookieExpiration(),app_key:KAMPYLE_UTILS.isDebugMode()?d.QA:d.PROD,track_pageload:!1,img_src_get_request:!0,api_host:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.API_GATEWAY)?_:r=(r=KAMPYLE_CONSTANT.PLACEHOLDERS.COOLDATA_API_HOST).endsWith("/")?r.substr(0,r.length-1):r};s=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_UPGRADE);try{s?(COOLADATA_CODE.init(),A.cooladata.init(e,null,KAMPYLE_CONSTANT.COOLADATA_INSTANCE_NAME)):(A.cooladata||(t=E,(o=A.cooladata||[]).__SV||((A.cooladata=o)._i=[],o.init=function(e,t,n){var r=o;for(void 0!==n?r=o[n]=[]:n="cooladata",i=["trackEvent","trackEventLater","trackPageload","flush","setConfig"],a=0;a<i.length;a++)!function(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(r,i[a]);o._i.push([e,t,n])},o.__SV=1.2,(n=t.createElement("script")).type="text/javascript",n.async=!0,n.src=T,(t=t.getElementsByTagName("script")[0]).parentNode.insertBefore(n,t))),A.cooladata.init(e)),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_EVNETS_LIMIT)&&(m(),KAMPYLE_EVENT_DISPATCHER.subscribeOnce(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_SDK_PAGE_VIEW,m))}catch(e){console.warn(e)}return KAMPYLE_UTILS.initEventSubscriptions(u,c),!0}catch(e){console.warn(e)}var t,o,n,i,a,r},triggerCooladataEvent:c,getCooladataInstance:M,getUserId:function(){var e;try{e=KAMPYLE_DATA.getData("cd_user_id")||M().config.user_id||null}catch(e){console.warn(e)}return e},triggerCooladataEventDispatcherError:function(e){if(!e||!A.cooladata)return!1;var t=o("neb_eventDispatcherError",e),e=n(t);return g(t.eventId,e),e}}}(window,document),window.KAMPYLE_COMMON=function(o,r){var i='[data-tips]{position:relative;text-decoration:none}[data-tips]:after,[data-tips]:before{position:absolute;z-index:100;opacity:0}[data-tips]:after{content:attr(data-tips);line-height:20px;padding:0 10px;font-size:12px;text-align:center;color:#fff;background:#222;border-radius:5px;text-shadow:0 0 5px #000;-moz-box-shadow:0 0 5px rgba(0, 0, 0, .3);-webkit-box-shadow:0 0 5px rgba(0, 0, 0, .3);box-shadow:0 0 5px rgba(0, 0, 0, .3);white-space:normal;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:135px;word-wrap:break-word}[data-tips]:before{content:"";width:0;height:0;border-width:6px;border-style:solid}[data-tips]:hover:after,[data-tips]:hover:before{opacity:1}[data-tips].top-tip:after,[data-tips].top-tip:before{-webkit-transition:bottom .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:bottom .25s ease-in-out, opacity .25s ease-in-out;transition:bottom .25s ease-in-out, opacity .25s ease-in-out;bottom:90%;left:-9999px;margin-bottom:12px}[data-tips].top-tip:before{border-color:#222 transparent transparent;margin-bottom:0}[data-tips].top-tip:hover:after,[data-tips].top-tip:hover:before{bottom:100%;left:0}[data-tips].top-tip:hover:before{left:15px}[data-tips].bottom-tip:after,[data-tips].bottom-tip:before{-webkit-transition:top .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:top .25s ease-in-out, opacity .25s ease-in-out;transition:top .25s ease-in-out, opacity .25s ease-in-out;top:90%;left:-9999px;margin-top:12px}[data-tips].bottom-tip:before{border-color:transparent transparent #222;margin-top:0}[data-tips].bottom-tip:hover:after,[data-tips].bottom-tip:hover:before{top:100%;left:0}[data-tips].bottom-tip:hover:before{left:15px}[data-tips].left-tip:after,[data-tips].left-tip:before{-webkit-transition:left .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:left .25s ease-in-out, opacity .25s ease-in-out;transition:left .25s ease-in-out, opacity .25s ease-in-out;top:-9999px;left:96%;margin-left:12px}[data-tips].left-tip:before{border-color:transparent #222 transparent transparent;margin-left:0}[data-tips].left-tip:hover:after,[data-tips].left-tip:hover:before{left:100%;top:0}[data-tips].left-tip:hover:before{top:7px}[data-tips].right-tip:after,[data-tips].right-tip:before{-webkit-transition:right .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:right .25s ease-in-out, opacity .25s ease-in-out;transition:right .25s ease-in-out, opacity .25s ease-in-out;top:-9999px;right:96%;margin-right:12px}[data-tips].right-tip:before{border-color:transparent transparent transparent #222;margin-right:0}[data-tips].right-tip:hover:after,[data-tips].right-tip:hover:before{right:100%;top:0}[data-tips].right-tip:hover:before{top:7px}',a=".scTitle:focus, .scParagraph:focus, .sc-widget-footer-cancel:focus, .sc-widget-footer-capture:focus, p:focus { border: 2px solid #8e8e93 !important; box-shadow: 0 0 7px #8e8e93 !important;}",A={submitScreenCaptureLabel:"Capture Image",cancelScreenCaptureLabel:"Cancel",instructionsScreenCapture:'<h2 class="scTitle" style="font-size: 1.5em;">Screen Capture</h2><p class="scParagraph" style="font-size: 1em; margin-top: 10px;">Drag the cursor around the area you want to highlight.<br>Press Capture Image to take the snapshot and return to your feedback</p>',submitScreenCaptureTooltip:"Take snapshot",cancelScreenCaptureTooltip:"Back to Feedback"},E=["<html>","<head>",'<link rel="stylesheet" type="text/css" href="'+KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.OPEN_SANS+'" />','<script type="text/javascript">',"function resizeIframe() {",'parent.document.getElementById("nebScIframe").height = document.getElementById("sc-widget").scrollHeight + 15;','var SCWidget = parent.document.getElementById("nebScIframe");',"if (SCWidget) {","SCWidget.focus();","}","}","<\/script>","<style>{tooltipStyles} {buttonsOutlineStyle}</style>","</head>",'<body onload="resizeIframe();" style="margin:0px;overflow:hidden;">','<div id="sc-widget" class="sc-widget" style="{widget}">','<div class="sc-widget-content" style="{widgetContent}">',"{{instructionsScreenCapture}}","</div>",'<div class="sc-widget-footer" style="{widgetFooter}">','<button onclick="parent.KAMPYLE_SCREEN_CAPTURE.getUserSnapInstance().close();" class="sc-widget-footer-cancel top-tip" data-tips="{{cancelScreenCaptureTooltip}}" style="{widgetFooterBtn} {widgetFooterCancel}">',"{{cancelScreenCaptureLabel}}","</button>",'<button onclick="parent.KAMPYLE_COMMON.onSubmitScreenCaptureClick();" class="sc-widget-footer-capture top-tip" data-tips="{{submitScreenCaptureTooltip}}" style="{widgetFooterBtn} {widgetFooterCapture}">','<img alt="Loading" src="'+KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+KAMPYLE_CONSTANT.SRC.KLOADER+'" id="widgetFooterCaptureImg" style="width:20px;height:20px;display: none;" />','<span id="widgetFooterCaptureText">{{submitScreenCaptureLabel}}</span>',"</button>","</div>","</div>","</body></html>"].join(" "),s={overlay:{position:"fixed",top:"0",left:"0","z-index":"2147483646 !important",right:"0",bottom:"0",display:"block","pointer-events":"none"},widget:{"font-family":"'Open Sans'",border:"1px solid #999",width:"285px","border-radius":"5px",position:"absolute","z-index":"2147483647 !important","pointer-events":"auto",background:"#FFFFFF","text-align":"center","line-height":"20px"},widgetContent:{padding:"10px 14px",outline:"none"},widgetFooter:{"font-family":"'Open Sans' !important",padding:"10px","font-size":"14px","padding-top":"0","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal","letter-spacing":"normal","line-height":"20px"},widgetFooterBtn:{height:"34px",margin:"0 0 2px 5px","min-width":"100px",padding:"6px 12px",display:"inline-block","border-radius":"4px",cursor:"pointer","transition-delay":"0s","transition-duration":"0.3s","transition-property":"all","transition-timing-function":"ease","vertical-align":"middle","white-space":"nowrap","word-spacing":"0px",border:"none",color:"#FFF"},widgetFooterCancel:{background:"#A2A2A2",color:"#FFF"},widgetFooterCapture:{"margin-left":"5px",background:"#020202",color:"#FFF"}};function l(e){var t=s;return e&&(t.widget.background=e.backgroundColor||t.widget.background,t.widgetFooterCapture.background=e.submitButtoncolor||t.widgetFooterCapture.background,t.widgetFooterCancel.background=e.closeButtoncolor||t.widgetFooterCancel.background,t.widgetFooterCancel.color=e.closeButtonTextColor||t.widgetFooterBtn.color,t.widgetFooterCapture.color=e.submitButtonTextColor||t.widgetFooterBtn.color),t}function _(e){var t=A;if(e){for(var n in t)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n]=e[n]);return t}}function t(){var e=r.getElementById("nebScIframe").contentDocument,t=e.getElementById("widgetFooterCaptureImg");t&&(t.style.display="inline",(e=e.getElementById("widgetFooterCaptureText"))&&(e.style.display="none"))}function d(e){var t,n,r=E,o=_((e=e||{}).screenCaptureSettings);for(t in o&&o.submitScreenCaptureTooltip||(r=r.replace('data-tips="{{submitScreenCaptureTooltip}}"',"")),o&&o.cancelScreenCaptureTooltip||(r=r.replace('data-tips="{{cancelScreenCaptureTooltip}}"',"")),o)A.hasOwnProperty(t)&&(r=r.replace("{{"+t+"}}",A[t]));for(n in l(e.screenCaptureSettings))r=KAMPYLE_UTILS.replaceAll(r,"{"+n+"}",KAMPYLE_UTILS.styleObjToInline(s[n]));return r=r.replace("{tooltipStyles}",i).replace("{buttonsOutlineStyle}",a),KAMPYLE_UTILS.htmlDecode(r)}return{loadForm:function(e){return KAMPYLE_ONSITE_SDK.loadForm(e)},showForm:function(e,t){return KAMPYLE_ONSITE_SDK.showForm(e,t)},closeForm:function(e){return KAMPYLE_ONSITE_SDK.closeForm(e)},createFormUrl:function(e,t){e+="?formId="+t,e+="&type=live",e+="&isMobile="+KAMPYLE_DATA.isMobile();var n=o.location.href,r=n.split("?");return r&&r.length&&(n=r[0]),e+="&referrer="+encodeURIComponent(n),(n=KAMPYLE_DATA.getMemoryData("region"))&&(e+="&region="+n),KAMPYLE_DATA.isFeatureEnabled("WCAG")&&(e+="&isWCAG=true"),e+="&displayType="+KAMPYLE_DATA.getDisplayType(KAMPYLE_DATA.getFormData(t)),e+="&isSeparateFormTemplateFromData=true"},createScreenCaptureWidget:function(e,t){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){var n=d(e),e=r.createElement("iframe");return e.id="nebScIframe",KAMPYLE_UTILS.setElementStyle(e,{width:"310px",bottom:"20px",left:"20px",zIndex:2147483647,position:"fixed"}),KAMPYLE_UTILS.setElementStyle(e,{display:"block"},!0),e.frameBorder="0",e.sandbox="allow-top-navigation allow-same-origin allow-scripts",t?t.parentNode.insertBefore(e,t):r.body.appendChild(e),e.contentWindow&&(e.contentWindow.contents=n),e.src='javascript:window["contents"]',setTimeout(function(){r.activeElement.blur()},100),!0}},isScreenCaptureEnabled:function(e){var t=KAMPYLE_UTILS.getBrowser();return!!(e=KAMPYLE_DATA.getFormData(e))&&(e=KAMPYLE_DATA.getDisplayType(e),!!t&&("MSIE"!==t.name||8<Number(t.version))&&!!e&&"popup"!==e)},onCancelScreenCaptureClick:function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_cancelCaptureClicked",{formId:KAMPYLE_DATA.getMemoryData("currentFormId"),feedbackCorrelationUUID:KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID)})},onSubmitScreenCaptureClick:function(){t();var e=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_V4)||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?"submit":"sendReport";o.UserSnap.api[e]()},getUrlPrefix:function(){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ON_PREM_HYBRID)?MDIGITAL.ON_PREM.getPackageRoot()+"/":KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX},showScreenCaptureSpinner:t,overrideDefaultScreenCaptureStyles:l,formatScreenCaptureWidget:d,overrideDefaultScreenCaptureTexts:_,getFormFailureCause:function(e){var t,n=KAMPYLE_DATA.getFormState(e),r=null;for(t in KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE){var o=KAMPYLE_CONSTANT.FORM_LOADING_FAILURE_CAUSE[t];if(!0===n[o]){r=o;break}}return r}}}(window,document),window.KAMPYLE_THERMO_TEALEAF_FUNC={isTealeafEnabled:function(){return!!KAMPYLE_UTILS.kampyleGetCookie("TLTSID")},getTealeafData:function(){return KAMPYLE_THERMO_TEALEAF_FUNC.isTealeafEnabled()?{sid:KAMPYLE_UTILS.kampyleGetCookie("TLTSID")}:null}},window.KAMPYLE_CLICKTALE_FUNC={isClicktaleEnabled:function(){return!!window.ClickTale&&!!window.ClickTale.KampyleLink},getClicktaleData:function(){return KAMPYLE_CLICKTALE_FUNC.isClicktaleEnabled()&&window.ClickTale.KampyleLink!==KAMPYLE_CONSTANT.NOT_RECORDING?{recordingUrl:window.ClickTale.KampyleLink}:null}},window.KAMPYLE_SESSIONCAM={isSessionCamEnabled:function(){return!!window.sessionCamRecorder},getSessionCamData:function(){if(KAMPYLE_SESSIONCAM.isSessionCamEnabled()){var e=window.sessionCamRecorder.sessionId();if(e)return{recordingUrl:"https://console.sessioncam.com/Console/Recordings/PlaybackSession?sessionId="+e}}return null},sendCustomParam:function(e,t){window.sessioncamConfiguration=window.sessioncamConfiguration||{},window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects||[],window.sessioncamConfiguration.customDataObjects.push({key:e,value:t})},init:function(){KAMPYLE_EVENT_DISPATCHER.subscribe("neb_feedbackSubmitted",this.sessionCamFormSubmittedCallback)},sessionCamFormSubmittedCallback:function(e,t){"neb_feedbackSubmitted"===e&&KAMPYLE_SESSIONCAM.sendCustomParam("nebula_feedback_uuid",t.feedbackUUID)}},window.KAMPYLE_SCREEN_CAPTURE=function(n,r){function t(){this._widgetVersion="V2",this.init=function(){this.determineWidgetVersion()},this.determineWidgetVersion=function(){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?(this._widgetVersion=E,this._usersnapOnpremWidgetLoaderPath=KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),"usersnapOnpremWidgetLoaderPath")):KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_V4)&&(this._widgetVersion=s)},this.close=function(){var e;switch(this._widgetVersion){case E:case s:e="close";break;default:e="closeUsersnap"}n.UserSnap.api[e]()},this.getUrl=function(){if(this._widgetVersion===E)return KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX+this._usersnapOnpremWidgetLoaderPath;var e=KAMPYLE_CONSTANT.PLACEHOLDERS[this._widgetVersion===s?"USERSNAP_V4_HOST_PREFIX":"USERSNAP_HOST_PREFIX"]+(this._widgetVersion===s?"/":"")+"screenApi/load/"+KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),"usersnapEnvId")+".js";return this._widgetVersion===s&&(e+=KAMPYLE_UTILS.buildQueryParams({onload:l,apiaccess:"extended",cdn:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_V4_HOST_PREFIX+"/classic/frontend"})),e},this.initConfiguration=function(){var e;switch(this._widgetVersion){case E:n.usersnapConfig={cdnUrl:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX+this._usersnapOnpremWidgetLoaderPath.slice(0,this._usersnapOnpremWidgetLoaderPath.lastIndexOf("/")),onLoadCallbackName:l},e=l;break;case s:e=l;break;default:e=_}n[e]=this._widgetVersion===s||this._widgetVersion===E?function(e){e.on("open",function(e){var t={uuid:a.feedbackCorrelationUUID,websiteId:a.websiteId};S(a)&&(t.screenCaptureUuid=a.screenCaptureUuid),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?(Object.assign(t,{screenWidth:n.innerWidth,screenHeight:n.innerHeight}),e.api.setValue("custom",t)):(e.api.setValue("customData",JSON.stringify(t)),setTimeout(function(){m()}))}),e.on("opened",function(){KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)&&m()}),e.on("submit",function(){T()}),e.on("close",function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_cancelCaptureClicked",{formId:KAMPYLE_DATA.getMemoryData("currentFormId"),feedbackCorrelationUUID:KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID)}),a.canceledClicked&&I()});var t={serviceUrl:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_V4_HOST_PREFIX,mode:"headless",button:null,tools:{keys:["highlight"],colors:[KAMPYLE_CONSTANT.COLORS.USERSNAP_V4_SELECTION_COLOR]},thankYou:{isHidden:!0}};KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)&&(t.apiKey=KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),"usersnapEnvId")),e.init(t),n.UserSnap={api:e}}:{api:!0,hideUI:!0,mode:"report",hideTour:!0,cancelHandler:function(){I()},loadHandler:function(){n.UserSnap&&(n.UserSnap.on("beforeOpen",m),n.UserSnap.on("beforeSend",d),n.UserSnap.on("afterSend",T),n.UserSnap.on("uiReady",u))},hostconfig:{homeHost:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_CDN_URL,UrlSessionkey:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/sessionkey",UrlHtml2pngAndSend:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/sendScreenshot",UrlHtml2png:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/html2png",UrlSendreport:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenApi/report/sendReport",apiErrorUrl:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_HOST_PREFIX+"screenErr/yuno"}}},this.getContainer=function(){return this._widgetVersion===s||this._widgetVersion===E?r.getElementsByName("us-entrypoint-widgetApp")[0]:r.getElementById("us_sandbox")},this.initWidget=function(){var e=this._widgetVersion===s||this._widgetVersion===E?"open":"startUsersnap";n.UserSnap.api[e]()}}function o(){var e=r.getElementById("nebScIframe").contentDocument,t=e.getElementById("widgetFooterCaptureImg");t&&(t.style.display="none",(e=e.getElementById("widgetFooterCaptureText"))&&(e.style.display="inline"))}function i(e,t){a.canceledClicked=!0,KAMPYLE_UTILS.sendMessageToIframe(KAMPYLE_DATA.getFormIframeId(t.formId),{action:"cancelScreenCapture",data:t})}var a,A,E="ONPREM",s="V4",l="onUsersnapLoad",_="_usersnapconfig";function d(e){a.canceledClicked&&(a.canceledClicked=!1),e.addInfo={uuid:a.feedbackCorrelationUUID,websiteId:a.websiteId},S(a)&&(e.addInfo.screenCaptureUuid=a.screenCaptureUuid)}function T(e){this.snapId=e,a.canceledClicked||(o(),KAMPYLE_SCREEN_CAPTURE.closeScreenCaptureWidget(),e={formId:a.formId,feedbackCorrelationUUID:a.feedbackCorrelationUUID},KAMPYLE_EVENT_DISPATCHER.trigger("neb_captureImageClicked",e),KAMPYLE_UTILS.sendMessageToIframe(KAMPYLE_DATA.getFormIframeId(a.formId),{action:"takenScreenCapture",data:e})),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)&&A.close()}function u(){setTimeout(function(){var e=r.getElementById("nebScIframe").contentDocument.getElementsByClassName("sc-widget-content")[0];e&&(e.tabIndex=-1,e.focus())},1e3)}function m(){var e=A.getContainer();KAMPYLE_UTILS.setElementStyle(e,{display:"block",zIndex:"2147483646"},!0);var t=e&&e.getElementsByTagName&&e.getElementsByTagName("iframe"),t=t&&t[0];t&&KAMPYLE_UTILS.setElementStyle(t,{display:"block"},!0),KAMPYLE_COMMON.createScreenCaptureWidget(a,e)}function c(e,t){a.feedbackCorrelationUUID=(t=t||{}).feedbackCorrelationUUID,S(t)&&(a.screenCaptureUuid=t.screenCaptureUuid),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID,a.feedbackCorrelationUUID),a.websiteId=t.websiteId,a.accountId=t.accountId,a.formId=t.formId,a.screenCaptureSettings=t.screenCaptureSettings,a.canceledClicked=!1,A.initWidget()}function I(){KAMPYLE_SCREEN_CAPTURE.closeScreenCaptureWidget(),KAMPYLE_EVENT_DISPATCHER.trigger("MDigital_Capture_Cancelled",{formId:KAMPYLE_DATA.getMemoryData("currentFormId"),feedbackCorrelationUUID:KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_CORRELATION_UUID)})}function S(e){e=KAMPYLE_UTILS.getNestedPropertyValue(e,"screenCaptureSettings.screenCaptureAsComponentEnabled");return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_AS_COMPONENT)&&e}return{initScreenCaptureWidget:c,handleCaptureCancellation:I,closeScreenCaptureWidget:function(){var e=r.getElementById("us_sandbox");e&&(e.style.display="none"),(e=r.getElementById("nebScIframe"))&&e.parentNode.removeChild(e)},beforeOpen:m,UserSnapModel:t,shouldProcessScreenCaptureAsComponent:S,getUserSnapInstance:function(){return A},init:function(e){a={},(A=new t).init(),A.initConfiguration(),function(){var e="kampyleSceenCaptureScript";if(r.getElementById(e))return;var t=r.createElement("script");Object.assign(t,{id:e,type:"text/javascript",src:A.getUrl()}),r.body.appendChild(t)}(),KAMPYLE_UTILS.objectPropertyObserver(n,"UserSnap",e),KAMPYLE_EVENT_DISPATCHER.subscribeMany({neb_captureInit:[c],neb_cancelCaptureClicked:[i]})}}}(window,document),window.KAMPYLE_ONSITE_SDK=function(){function A(e){e={errorMessage:KAMPYLE_CONSTANT.LOG_MESSAGES.ERROR_ONSITE_SDK_CONFIGURATION_MISSING.replace("{{METHOD}}",e)};KAMPYLE_EVENT_DISPATCHER.triggerError(e),MDIGITAL.LOGGER.warn(e.errorMessage)}function i(e){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return A("loadForm"),!1;var t=KAMPYLE_DATA.getFormState(e);return t?(t.loaded||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkLoadForm",{formId:e}),KAMPYLE_EVENT_DISPATCHER.trigger("neb_loadForm",{formId:e})),!0):(KAMPYLE_UTILS.showWarning("Error fetching data for form id "+e),!1)}function E(e){var t=KAMPYLE_DATA.getFormState(e);if(!t||!t.shown)return!1;t=t.isCurrentlySubmitted;return KAMPYLE_EVENT_DISPATCHER.trigger("neb_formClosed",{formId:e,isFormSubmitted:t}),!0}return{loadForm:i,showForm:function(e,t){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return A("showForm"),!1;t=t||{};var n=KAMPYLE_DATA.getFormState(e);if(!n)return KAMPYLE_UTILS.showWarning("Error fetching data for form id "+e),!1;if(KAMPYLE_DATA.getMemoryData("inviteLoadedAndShown"))return KAMPYLE_UTILS.showWarning("There is already an invite displayed"),!1;if(KAMPYLE_FUNC.isAnyOtherFormAlreadyShown(e,!0))return KAMPYLE_UTILS.showWarning("There is already a form displayed"),!1;n.loaded||i(e),t.triggerType=t.triggerType||"ByCode",KAMPYLE_DATA.saveFormExtraData(e,t);var r,o={formId:e};for(r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);return KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkShowForm",{formId:e,triggerType:t.triggerType}),!0},closeForm:function(e){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return A("closeForm"),!1;if(!isNaN(e))return E(e);for(var t,n=KAMPYLE_DATA.getAllForms(),r=e&&function(e){switch(e){case KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.ALL:return function(){return!0};case KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.EMBEDDED:return function(e){return e&&e.formType===KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.EMBEDDED};case KAMPYLE_CONSTANT.CLOSE_FORM_PARAM_VALUES.MODAL:return function(e){e=KAMPYLE_DATA.getDisplayType(e);return e===KAMPYLE_CONSTANT.DISPLAY_TYPES.ANIMATION||e===KAMPYLE_CONSTANT.DISPLAY_TYPES.LIGHTBOX};default:return function(){return!1}}}(e.toLowerCase()),o=n.length,i=!1,a=0;a<o;a++)t=n[a],r&&r(t)&&(i=E(+t.formId)||i);return i},updatePageView:function(){if(MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing())return A("updatePageView"),!1;KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkPageView")},isSurveyDisplayed:function(){return MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing()?(A("isSurveyDisplayed"),!1):!(!KAMPYLE_FUNC.isAnyInviteShown()&&!KAMPYLE_FUNC.isAnyOtherFormAlreadyShown())||(KAMPYLE_EVENT_DISPATCHER.trigger("neb_sdkSurveyDisplayed"),!1)},startInviteTargeting:function(){return MDIGITAL.CONFIGURATION.isOnsiteConfigurationMissing()?(A("startInviteTargeting"),!1):KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.MANUALLY_INVITE_TARGETING)?void KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_MANUALLY_INVITE_TARGETING,{skipButtonTargeting:!0,skipInviteTargeting:!1}):(KAMPYLE_UTILS.showWarning("Manually invite targeting feature is disabled"),!1)},startLogger:function(){MDIGITAL.LOGGER.setLoggerStatus(!0)},stopLogger:function(){MDIGITAL.LOGGER.setLoggerStatus(!1)},printMdigitalLogs:function(){MDIGITAL.LOGGER.printLogs()}}}((window,document)),window.KAMPYLE_POLYFILLS=function(e,r){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=r.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}}}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n}),"function"!=typeof e.CustomEvent&&(t.prototype=e.Event.prototype,e.CustomEvent=t)}(window,document),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return o;o++}return-1}}),Element.prototype.remove||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.from||(Array.from=function(){function E(e){return"function"==typeof e||"[object Function]"===t.call(e)}function s(e){return e=function(e){e=Number(e);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(e),Math.min(Math.max(e,0),n)}var t=Object.prototype.toString,n=Math.pow(2,53)-1;return function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=1<arguments.length?arguments[1]:void 0;if(void 0!==r){if(!E(r))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var o,i=s(t.length),a=E(this)?Object(new this(i)):new Array(i),A=0;A<i;)o=t[A],a[A]=r?void 0===n?r(o,A):r.call(n,o,A):o,A+=1;return a.length=i,a}}()),window.KAMPYLE_INTEGRATION=function(){var E={sessionCam:"sessionCamRecorder",quantumMetrics:"QuantumMetricAPI"};function s(e){switch(e.source){case"var":return KAMPYLE_UTILS.getNestedPropertyValue(window,e.param);case"cookie":return KAMPYLE_UTILS.kampyleGetCookie(e.param);case"function":var t=KAMPYLE_UTILS.getNestedPropertyValue(window,e.param);if("function"!=typeof t)return null;try{var n=e.predefinedArgs;return n?(n=n.split(","))instanceof Array?t.apply(e.context,n):null:t.apply(e.context)}catch(e){return null}case"url":return KAMPYLE_UTILS.getUrlParam(KAMPYLE_UTILS.getNestedPropertyValue(window,e.param));case"storage":return localStorage.getItem(KAMPYLE_UTILS.getNestedPropertyValue(window,e.param))}}function a(e){for(var t=!0,n=e.isEnabled,e=E[e.integrationName],r=KAMPYLE_UTILS.getNestedPropertyValue(window,e),o=0;o<n.length;o++){var i=!1,a=n[o].param,A=n[o].paramValue;a||KAMPYLE_UTILS.showWarning("no current name found"),a=s({source:n[o].source,param:a,context:r,predefinedArgs:n[o].predefinedArguments}),i=null===A?null!=a:A===a,t=t&&i}return t}function A(e){for(var t={},n=e.parameters||[],r=E[e.integrationName]||null,o=KAMPYLE_UTILS.getNestedPropertyValue(window,r),i=0;i<n.length;i++){var a=s({source:n[i].source,param:n[i].param,context:o,predefinedArgs:n[i].predefinedArguments}),A=e.parameters[i].putIn;KAMPYLE_UTILS.setNestedPropertyValue(t,A,a)}return{integrationName:e.integrationName,parameters:t}}return{isEnabled:a,prepareIntegrationData:A,getParameterBySource:s,getIntegrationData:function(){var e,t,n=KAMPYLE_DATA.getInegrations()||{},r={};for(t in n)if(n.hasOwnProperty(t))for(var o=n[t],i=0;i<o.length;i++)a(e=o[i])&&(r[t]=r[t]||[],r[t].push(A(e)));return r}}}(),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.CUSTOM_EVENTS=function(){var e="formId",t="formTriggerType",n="feedbackUUID",r="feedbackCorrelationUUID",o={MDigital_Form_Close_Submitted:{customEventId:"MDigital_Form_Close_Submitted",payload:[e,t]},neb_formReady:{customEventId:"MDigital_Form_Displayed",payload:[e,t]},neb_pageView:{customEventId:"MDigital_Page_View",payload:[]},MDigital_Form_Next_Page:{customEventId:"MDigital_Form_Next_Page",payload:[e,t]},MDigital_Form_Back_Page:{customEventId:"MDigital_Form_Back_Page",payload:[e,t]},MDigital_Form_Close_No_Submit:{customEventId:"MDigital_Form_Close_No_Submit",payload:[e,t]},MDigital_ThankYou_Displayed:{customEventId:"MDigital_ThankYou_Displayed",payload:[e,t]},MDigital_ThankYou_Close:{customEventId:"MDigital_ThankYou_Close",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?n:r)},neb_feedbackSubmitted:{customEventId:"MDigital_Submit_Feedback",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?n:r).concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EVENT_INCLUDE_FEEDBACK_CONTENT)?"content":[])},neb_inviteAccepted:{customEventId:"MDigital_Invite_Accepted",payload:[e]},neb_showInvitation:{customEventId:"MDigital_Invite_Displayed",payload:[e]},neb_inviteDeclined:{customEventId:"MDigital_Invite_Declined",payload:[e]},neb_skipInvitation:{customEventId:"MDigital_invite_Skipped",payload:[e]},neb_buttonClicked:{customEventId:"MDigital_Feedback_Button_Clicked",payload:[e,t]},neb_captureInit:{customEventId:"MDigital_CaptureButton_Clicked",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?[]:r)},neb_captureImageClicked:{customEventId:"MDigital_CaptureButton_Taken",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?[]:r)},MDigital_Capture_Cancelled:{customEventId:"MDigital_CaptureButton_Cancel",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?[]:r)},screenCaptureDelete:{customEventId:"MDigital_ScreenCapture_Delete",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?[]:r)},screenCaptureRetake:{customEventId:"MDigital_ScreenCapture_Retake",payload:[e,t].concat(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?[]:r)},neb_sdkShowForm:{customEventId:"MDigital_ShowForm_Called",payload:[e,t]},MDigital_targetingRuleEvaluated:{customEventId:"MDigital_targetingRuleEvaluated",payload:[e,"isPassed","targetingRule","expected","actual",t]}},a={formId:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FORM_ID_LABEL,manipulateValueMethod:null},formTriggerType:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FORM_TYPE_LABEL,manipulateValueMethod:function(e){return KAMPYLE_CONSTANT.FORM_TRIGGER_TYPES_MAP[e]||KAMPYLE_CONSTANT.CUSTOM_EVENT_OTHER}},feedbackCorrelationUUID:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_UUID_LABEL},feedbackUUID:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_UUID_LABEL,manipulateValueMethod:null},content:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_CONTENT_LABEL,manipulateValueMethod:null}};function i(e,t){e=function(e,t){if(!e||!t)return null;for(var n in o[e])o[e].hasOwnProperty(n)&&(t[n]=o[e][n]);return t.eventName=e,t.formTriggerType=KAMPYLE_DATA.getFormTriggerType(t.formId),t}(e,t),t=A(e);t&&(e=e.customEventId,KAMPYLE_UTILS.triggerCustomEvent(e,t),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ENABLE_EVENTS_FOR_CE_DEBUG)&&KAMPYLE_COOLADATA.triggerCooladataEvent(KAMPYLE_CONSTANT.EVENTS.CUSTOM_EVENTS_DEBUG_MESSAGE,{customEventId:e,customEventData:t}))}function A(e){var t={};if(!e||!e.payload)return null;for(var n=0;n<e.payload.length;n++){var r,o=e.payload[n],i=KAMPYLE_UTILS.getNestedPropertyValue(e,o);if(null==i){t=null;break}(r=a[o])&&r.exposedProperty?t[r.exposedProperty]=r.manipulateValueMethod?r.manipulateValueMethod.apply(this,[i]):i:t[o]=i}return t}return{init:function(){try{return KAMPYLE_UTILS.initEventSubscriptions(o,i),!0}catch(e){console.warn(e)}},triggerCustomEvent:i,getCustomEventDataToSend:A}}(),window.MDIGITAL=window.MDIGITAL||{},window.MDIGITAL.CUSTOM_PARAMETERS=function(o){return{getCustomParamValue:function(e){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CP_EXT_REFACTOR))return KAMPYLE_FUNC.getSafeCustomParamVal(e);var t=e||{},e=MDIGITAL.CUSTOM_PARAMETERS.extractCPValue(t);return MDIGITAL.CUSTOM_PARAMETERS.castCPValue(e,t.type||"")},formatCustomParams:function(e){return(MDIGITAL.CUSTOM_PARAMETERS.getFormCustomParams(e)||[]).map(MDIGITAL.CUSTOM_PARAMETERS.appendValueToCPObject)},getFormCustomParams:function(e){return(KAMPYLE_DATA.getFormData(e)||{}).customParams||null},hasCustomParams:function(e){return!!(e=KAMPYLE_DATA.getFormData(e))&&!!e.customParams&&!!e.customParams.length},fetchCPValue:function(e){var t=e.value,n=(e.source||"var").toLowerCase(),r=e.name||e.source_name||"";switch(KAMPYLE_UTILS.safeToLower(n)){case"var":t=KAMPYLE_UTILS.getNestedPropertyValue(o,r);break;case"url":t=KAMPYLE_UTILS.getUrlParam(r);break;case"cookie":t=KAMPYLE_UTILS.getCookie(r);break;default:t=null}return""!==t?t:null},getCustomParamById:function(t,e){return void 0!==t&&e&&e.customParams&&e.customParams.length&&e.customParams.find(function(e){return e.id==t})||null},extractCPValue:function(e){var t=e.value;return""!==(t=void 0===t?MDIGITAL.CUSTOM_PARAMETERS.fetchCPValue(e):t)?t:null},castCPValue:function(e,t){if(null===e)return e;switch(t.toLowerCase()){case"datetime":return MDIGITAL.CUSTOM_PARAMETERS.handleDatetimeCasting(e);case"number":return KAMPYLE_UTILS.getNumericValue(e);case"text":return MDIGITAL.CUSTOM_PARAMETERS.handleTextCasting(e);case"boolean":return MDIGITAL.CUSTOM_PARAMETERS.handleBooleanCasting(e);default:return console.error("Invalid custom parameter type "+t),null}},handleDatetimeCasting:function(e){return"string"==typeof e?Number(e)||null:e instanceof Date||(e||{}).getTime&&!isNaN(e.getTime())?e.getTime():null},handleTextCasting:function(e){return"string"==typeof e?e:null},handleBooleanCasting:function(e){return"true"===e||"false"!==e&&("boolean"==typeof e?e:null)},appendValueToCPObject:function(e){e=e||{};var t=MDIGITAL.CUSTOM_PARAMETERS.getCustomParamValue({name:e.source_name,type:e.type,source:e.source});return Object.assign(e,{value:t})}}}(window,document),window.MDIGITAL.INIT=function(){var t;return{init:function(){var e;t=MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),KAMPYLE_EVENT_DISPATCHER.init(),KAMPYLE_DATA.init(),MDIGITAL.CONFIGURATION.init(),KAMPYLE_COOLADATA.init(),KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,t),KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DHH)?t.onsiteDataUrl?MDIGITAL.CONFIGURATION.fetchOnsiteExternalConfiguration(t.onsiteDataUrl):MDIGITAL.CONFIGURATION.onsiteDataFailed("onsiteDataUrl is Empty"):(KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,!0),e=MDIGITAL.CONFIGURATION.formatConfiguration(t),MDIGITAL.INIT.initOnsite(e))},initOnsite:function(e){KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,e),KAMPYLE_DATA.initOnsiteDefaultState(),KAMPYLE_FUNC.init(),KAMPYLE_FUNC.startCheckingTargeting(),MDIGITAL.INIT.reportInitComplete()},reportInitComplete:function(){KAMPYLE_UTILS.triggerCustomEvent("neb_OnsiteLoaded")}}}((window,document)),MDIGITAL.INIT.init();
