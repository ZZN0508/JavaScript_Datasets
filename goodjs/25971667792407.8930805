!function(){"use strict";function p(e,t){var n=null===(n=window.Criteo)||void 0===n?void 0:n.oneTagConfig;return null!==(e=n&&n[e])&&void 0!==e?e:t}var c="5.7.0";function s(e){try{return JSON.parse(e)}catch(e){return}}var i=(e.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__cmpLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},e.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__cmp},e.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},e.prototype.pingWithTimeout=function(o,e,t,n){function i(e,t){r.logger(t),clearTimeout(e),n()}var r=this;return window.setTimeout(function(){var n=window.setTimeout(function(){i(o,"Timeout: Unable to get ping return after "+e+"ms")},e);r.executeCommand("ping",null,function(e,t){clearTimeout(n),t?(r.logger("GDPR CMP ping returned"),!0!==e.cmpLoaded&&i(o,"GDPR ping returned cmpLoaded which is not true"),r.logger("GDPR ping returned cmpLoaded which is true")):i(o,"Error sending ping to GDPR CMP")})},t)},e.prototype.retrieveConsent=function(e){this.executeRetrieveConsent("getConsentData",null,e)},e.prototype.retrieveConsentForPassback=function(e){this.executeRetrieveConsent("getVendorConsents",[91],e)},e.prototype.executeRetrieveConsent=function(e,t,n){var o=this,i=!1,r=window.setTimeout(function(){i=!0,o.logger("Timeout: Unable to resolve GDPR consent after "+o.timeout+"ms"),n(void 0)},this.timeout),a=this.pingWithTimeout(r,this.pingTimeout,this.pingDelay,function(){i=!0,o.logger("Timeout: Unable to ping GDPR API after "+o.pingTimeout+"ms"),n(void 0)});this.executeCommand(e,t,function(e,t){clearTimeout(a),i||(clearTimeout(r),t?(o.logger("GDPR consent retrieved"),o.processConsentData(e,n)):(o.logger("Error retrieving GDPR consent data from CMP"),n(void 0)))})},e.prototype.processConsentData=function(e,t){var n;e?(n={},void 0!==e.consentData&&(n.consentData=e.consentData),void 0!==e.gdprApplies&&(n.gdprApplies=!!e.gdprApplies),t(n)):(this.logger("Unable to read GDPR consent data from CMP"),t(void 0))},e.prototype.executeCommand=function(e,t,n){var i,r=this;this.hasCallerFunctionInFrame()||(this.logger("No GDPR CMP defined on current frame"),i=this.getCMPFrame(),this.currentWindow.__cmp=function(e,t,n){if(!i)return r.logger("GDPR CMP not found in any frame"),void n({msg:"GDPR CMP not found in any frame"},!1);var o=Math.random().toString(10),t={__cmpCall:{command:e,parameter:t,callId:o}};r.cmpCallbacks[o]=n,i.postMessage(t,"*")},this.currentWindow.addEventListener("message",function(e){e="string"==typeof e.data?s(e.data):e.data;e&&e.__cmpReturn&&e.__cmpReturn.callId&&e.__cmpReturn.returnValue&&(e=e.__cmpReturn,r.cmpCallbacks&&r.cmpCallbacks[e.callId]&&(r.cmpCallbacks[e.callId](e.returnValue,e.success),delete r.cmpCallbacks[e.callId]))},!1)),this.currentWindow.__cmp(e,t,n)},e);function e(e,t,n){void 0===n&&(n=function(e){}),this.cmpCallbacks={},this.currentWindow=e,this.timeout=t.tcfTimeout,this.pingTimeout=t.tcfPingTimeout,this.pingDelay=t.tcfPingDelay,this.logger=n}var r=(t.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__tcfapiLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},t.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__tcfapi},t.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},t.prototype.pingWithTimeout=function(n,e,t,o){function i(e,t){r.logger(t),clearTimeout(e),o()}var r=this;return window.setTimeout(function(){var t=window.setTimeout(function(){i(n,"Timeout: Unable to get TCFv2 ping return after "+e+"ms")},e);r.executeCommand("ping",2,function(e){clearTimeout(t),r.logger("TCFv2 CMP ping returned in ms"),"error"===e.cmpStatus?i(n,"Error status on ping to TCFv2 CMP"):!0!==e.cmpLoaded?i(n,"TCFv2 ping returned cmpLoaded = false"):r.logger("TCFv2 ping returned cmpLoaded = true")})},t)},t.prototype.retrieveConsent=function(n){var o=this,i=!1,r=window.setTimeout(function(){i=!0,o.logger("Timeout: Unable to resolve TCFv2 consent after "+o.timeout+"ms"),n(void 0)},this.timeout),a=this.pingWithTimeout(r,this.pingTimeout,this.pingDelay,function(){i=!0,o.logger("Timeout: Unable to ping TCFv2 API after "+o.pingTimeout+"ms"),n(void 0)});this.executeCommand("getTCData",2,function(e,t){clearTimeout(a),i||(clearTimeout(r),t?(o.logger("TCFv2 consent retrieved in ms"),o.processResponseData(e,n)):(o.logger("Error retrieving TCFv2 consent data from CMP"),n(void 0)))},[91])},t.prototype.processResponseData=function(e,t){var n;e?(n={},void 0!==e.tcString&&(n.consentData=e.tcString),void 0!==e.gdprApplies&&(n.gdprApplies=!!e.gdprApplies),n.version=e.tcfPolicyVersion||2,n.purposes=null===(e=null==e?void 0:e.purpose)||void 0===e?void 0:e.consents,t(n)):(this.logger("Unable to read GDPR consent data from CMP"),t(void 0))},t.prototype.executeCommand=function(e,t,n,o){var r,a=this;this.hasCallerFunctionInFrame()||(this.logger("No TCFv2 CMP defined on current frame"),r=this.getCMPFrame(),this.currentWindow.__tcfapi=function(e,t,n,o){if(!r)return a.logger("TCFv2 CMP not found in any frame"),void n({msg:"TCFv2 CMP not found in any frame"},!1);var i=Math.random().toString(10),o={__tcfapiCall:{command:e,version:t,parameter:o,callId:i}};a.cmpCallbacks[i]=n,r.postMessage(o,"*")},this.currentWindow.addEventListener("message",function(e){e="string"==typeof e.data?s(e.data):e.data;e&&e.__tcfapiReturn&&e.__tcfapiReturn.callId&&e.__tcfapiReturn.returnValue&&(e=e.__tcfapiReturn,a.cmpCallbacks&&a.cmpCallbacks[e.callId]&&"function"==typeof a.cmpCallbacks[e.callId]&&(a.cmpCallbacks[e.callId](e.returnValue,e.success),delete a.cmpCallbacks[e.callId]))},!1)),this.currentWindow.__tcfapi(e,t,n,o)},t);function t(e,t,n){void 0===n&&(n=function(e){}),this.cmpCallbacks={},this.currentWindow=e,this.timeout=t.tcfTimeout,this.pingTimeout=t.tcfPingTimeout,this.pingDelay=t.tcfPingDelay,this.logger=n}var h=(n.prototype.getProvider=function(){return this.tcfv2ConsentProvider.hasCallerFunctionInFrame()?this.tcfv2ConsentProvider:this.tcfv1ConsentProvider.hasCallerFunctionInFrame()?this.tcfv1ConsentProvider:void 0!==this.tcfv2ConsentProvider.getCMPFrame()?this.tcfv2ConsentProvider:void 0!==this.tcfv1ConsentProvider.getCMPFrame()?this.tcfv1ConsentProvider:void 0},n.prototype.retrieveConsent=function(e){var t=this.getProvider();t?t.retrieveConsent(e):e(void 0)},n);function n(e,t,n,o){o={tcfTimeout:t=void 0===t?1e4:t,tcfPingTimeout:n=void 0===n?50:n,tcfPingDelay:o=void 0===o?1e3:o};this.tcfv1ConsentProvider=new i(e,o),this.tcfv2ConsentProvider=new r(e,o)}var m=(o.prototype.catchAndStoreException=function(e,t){try{return void 0===t?e():e.apply(this,t)}catch(e){e instanceof Error?this.exceptions.push(e):this.exceptions.push(new Error(e))}},o.prototype.setProtectedTimeout=function(e,t){var n=this;if("undefined"!=typeof window&&"function"==typeof window.setTimeout)return window.setTimeout(function(){return n.catchAndStoreException(e)},t)},o.prototype.addProtectedEventListener=function(e,t,n,o){var i=this;if(void 0!==e&&"function"==typeof e.addEventListener)return e.addEventListener(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.catchAndStoreException(n,e)},o)},o.prototype.attachProtectedEvent=function(e,t,n){var o=this;if(void 0!==e&&"function"==typeof e.attachEvent)return e.attachEvent(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.catchAndStoreException(n,e)})},o);function o(){this.exceptions=[]}function f(e,t){if(e instanceof Array)for(var n=0,o=e;n<o.length;n++)f(o[n],t);else R(t,e)||t.push(e)}function R(e,t){for(var n=JSON.stringify||encodeURIComponent||escape,o=n(t),i=0,r=e;i<r.length;i++){var a=r[i];if(a===t||n(a)===o)return 1}}function E(e){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n];null!=i&&t.push(i)}return t}function A(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t)return!1;if(!(e instanceof Array))return A([e],t);if(!(t instanceof Array))return A(e,[t]);if(e.length!==t.length)return!1;for(var n=0,o=e;n<o.length;n++)if(!R(t,o[n]))return!1;return!0}var a,x=(u.extractHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},u.getAnchorWithReferrer=function(e){if(e&&e.referrer){var t=e.createElement("a");return t.href=e.referrer,t}return null},u.getQueryString=function(t){var n;try{n=t.top.location.search}catch(e){var o=t;try{for(;o.parent.document!==o.document&&o.parent.document;)o=o.parent}catch(e){}!o||(t=u.getAnchorWithReferrer(o.document))&&(n=t.search)}return n},u.getHighestAccessibleUrl=function(e){var t=u.getHighestAccessibleWindow(e),n=t.topFrame;if(t.err)try{try{i=n.top.location.href}catch(e){var o=n.location.ancestorOrigins,i=o[o.length-1]}}catch(e){i=n.document.referrer}else i=n.location.href;return i},u.onBodyReady=function(t,n){!function e(){document.body?t.setProtectedTimeout(n,0):t.setProtectedTimeout(e,10)}()},u.onDocumentReady=function(n,o){if("complete"===document.readyState)o();else if(document.addEventListener)n.addProtectedEventListener(document,"DOMContentLoaded",o,!1),n.addProtectedEventListener(window,"load",o,!1);else{n.attachProtectedEvent(document,"onreadystatechange",o),n.attachProtectedEvent(window,"onload",o);var t,i,r,e=!1;try{e=null===window.frameElement&&document.documentElement}catch(e){}e&&e.doScroll?function t(){if(e){try{e.doScroll("left")}catch(e){return void n.setProtectedTimeout(t,50)}o()}}():(t=!1,i=null===document.onload?null:function(e,t){return e.onload(t)},r=null===document.onreadystatechange?null:function(e,t){return e.onreadystatechange(t)},document.onload=document.onreadystatechange=function(e){r instanceof Function&&r(document,e),t||document.readyState&&"complete"!==document.readyState||(i instanceof Function&&i(document,e),t=!0,o())})}},u.removeLater=function(e,t){e.setProtectedTimeout(function(){null!==t&&null!==t.parentElement&&t.parentElement.removeChild(t)},3e4)},u.appendCriteoContainer=function(e){if(!e)return null;var t=document.createElement("div");return t.setAttribute("id","criteo-tags-div"),t.style.display="none",e.appendChild(t),t},u.getHighestAccessibleWindow=function(e){var t=e,n=!1;try{for(;t.parent.document!==t.document;){if(!t.parent.document){n=!0;break}t=t.parent}}catch(e){n=!0}return{topFrame:t,err:n}},u);function u(){}function O(e){var t=e;if(e instanceof Function)return(t=e())instanceof Function?t:O(t);if(e instanceof Array)for(var t=[],n=0;n<e.length;++n)t[n]=O(e[n]);else if(e&&"[object Object]"===e.toString()){t={};for(var o=0,i=Object.getOwnPropertyNames(e);o<i.length;o++){var r=i[o];t[r]=O(e[r])}}return t}function M(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&A(t.account,i.account)){for(var r in t)t.hasOwnProperty(r)&&"account"!==r&&(i[r]=t[r]);return}}e.push(t)}function N(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&A(t.account,i.account)&&i.hash_method===t.hash_method)return void 0!==t.email&&(i.email=function(e,t){var n=[];if(void 0===e)return void 0===t?n:t.slice();if(void 0===t)return e.slice();for(var o=0,i=t;o<i.length;o++){var r=i[o];R(e,r)||n.push(r)}return e.concat(n)}(i.email instanceof Array||void 0===i.email?i.email:[i.email],t.email instanceof Array?t.email:[t.email])),0}e.push(t)}function V(e,t,n){n=O(n);return W(e,n),M(t,O(n)),1}function W(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&void 0===t.account&&void 0===i.account||A(t.account,i.account)){for(var r in t)t.hasOwnProperty(r)&&"account"!==r&&(i[r]=t[r]);return}}e.push(t)}(w=a=a||{})[w.None=0]="None",w[w.Cookie=1]="Cookie",w[w.LocalStorage=2]="LocalStorage";var L=(l.checkLocalStorageIsWritable=function(){try{if(!window.localStorage)return!1;var e="criteo_localstorage_check";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}},l.checkCookiesAreWritable=function(){var e=new l("criteo_write_test",1e4);e.setValueWithNoDomain("1");var t="1"===e.cookieValue;return e.removeWithNoDomain(),t},l.prototype.setCookieRead=function(){this.isCookieRead=!0},l.prototype.setValue=function(e){this.cookieValue=e,this.isCookieValueExternallySet=!0,this.writeOnAllStorages(e)},l.prototype.setValueFromExistingCookie=function(){var e=this.getValue();void 0!==e&&(this.cookieValue=e,this.cookieOrigin|=a.Cookie)},l.prototype.setValueFromAllStorages=function(){var e=this.getFromAllStorages();this.cookieValue=e.value,this.cookieOrigin=e.origin},l.prototype.getValue=function(){for(var e=0,t=document.cookie.split(";");e<t.length;e++){var n=t[e];if(n.substr(0,n.indexOf("=")).replace(/^\s+|\s+$/g,"")===this.cookieName){n=n.substr(n.indexOf("=")+1);return(decodeURIComponent||unescape)(n)}}},l.prototype.removeWithNoDomain=function(){this.setValueWithNoDomainWithExpiration("",0)},l.prototype.removeOnMainDomain=function(){this.setOnMainDomainWithExpiration("",0)},l.prototype.setOnMainDomain=function(e){return this.setOnMainDomainWithExpiration(e,this.cookieRetentionTimeInMs)},l.prototype.writeOnAllStorages=function(e){this.setOnMainDomain(e),this.useLocalStorage&&window.localStorage.setItem(this.cookieName,e)},l.prototype.getFromAllStorages=function(){var e=null;this.useLocalStorage&&(e=window.localStorage.getItem(this.cookieName));var t=this.getValue()||null;return{value:t||e,origin:this.computeStorageOrigin(t,e)}},l.prototype.removeFromAllStorages=function(){this.removeOnMainDomain(),this.useLocalStorage&&window.localStorage.removeItem(this.cookieName)},l.prototype.setValueWithNoDomainWithExpiration=function(e,t){var n=new Date;n.setTime(n.getTime()+t);t="expires="+n.toUTCString(),n=encodeURIComponent||escape;document.cookie=this.cookieName+"="+n(e)+";"+t+";path=/";t=this.getValue();void 0!==t&&(this.cookieValue=t)},l.prototype.setValueWithNoDomain=function(e){this.setValueWithNoDomainWithExpiration(e,this.cookieRetentionTimeInMs)},l.prototype.toFragmentData=function(){return{origin:this.cookieOrigin,value:this.cookieValue}},l.prototype.setOnMainDomainWithExpiration=function(e,t){var n=new Date;n.setTime(n.getTime()+t);for(var o="expires="+n.toUTCString(),i=null===document.location?[]:document.location.hostname.split("."),r=null,a=0;a<i.length;++a){var c="domain=."+(r=i.slice(i.length-a-1,i.length).join(".")),s=encodeURIComponent||escape;document.cookie=this.cookieName+"="+s(e)+";"+o+";"+c+";path=/";c=this.getValue();if(c&&c===e)break}return r||document.location},l.prototype.computeStorageOrigin=function(e,t){var n=a.None;return e&&(n|=a.Cookie),t&&(n|=a.LocalStorage),n},l);function l(e,t){this.cookieValue=null,this.isCookieValueExternallySet=!1,this.isCookieRead=!1,this.cookieName=e,this.cookieRetentionTimeInMs=t,this.cookieOrigin=a.None,this.useLocalStorage=l.checkLocalStorageIsWritable()}var U=(d.prototype.fillQueryStringParams=function(e){var t=this.config.trackingCallData.firstPartyIdentifier;t&&e.push("fpid="+t),this.gaid&&e.push("ai="+this.gaid),this.idfa&&e.push("idfa="+this.idfa),null!==this.axidCookie.cookieValue&&e.push("axid="+this.axidCookie.cookieValue),null!==this.pxsigCookie.cookieValue&&e.push("pxsig="+this.pxsigCookie.cookieValue),this.canWriteCookie&&e.push("adce=1"),null!==this.clickOriginPayload&&e.push("cop="+this.clickOriginPayload),null!==this.optoutCookie.cookieValue&&e.push("optout=1"),null!=this.bundleCookie.cookieValue&&e.push("bundle="+this.bundleCookie.cookieValue),null!==this.secureIdCookie.cookieValue&&(e.push("sid="+this.secureIdCookie.cookieValue),e.push("sid_read="+(this.secureIdCookie.isCookieValueExternallySet?"1":"0"))),null!==this.tld&&e.push("tld="+this.tld),null!==this.privateMode&&0!==this.privateMode&&e.push("pm="+this.privateMode),void 0!==new L("cto_clc",this.readonlyCookieRetentionTime).getValue()&&e.push("clc=1")},d.prototype.checkAcid=function(){void 0!==this.optoutCookie.getValue()?this.axidCookie.setValue("optout"):this.axidCookie.setValueFromExistingCookie(),this.pxsigCookie.setValueFromExistingCookie(),this.setCanWriteCookie(),this.setCanWriteLocalStorage()},d.prototype.setCop=function(e){var t=x.getQueryString(e);if(void 0!==t&&(this.clickOriginPayload=this.getParameterValueByName(t,"cto_pld")),null===this.clickOriginPayload)try{var n=x.getAnchorWithReferrer(e.top.document);n&&n.search&&(this.clickOriginPayload=this.getParameterValueByName(n.search,"cto_pld"))}catch(e){}},d.prototype.checkClientSideIdentityStatus=function(){this.optoutCookie.getFromAllStorages(),this.secureIdCookie.setValueFromAllStorages(),this.bundleCookie.setValueFromAllStorages(),this.ifaCookie.setValueFromAllStorages()},d.prototype.checkCookies=function(e){if(e.callbacks)for(var t=0,n="string"==typeof e.callbacks?[e.callbacks]:e.callbacks;t<n.length;t++){var o=n[t],i=document.createElement("img");i.setAttribute("style","display:none;"),i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("data-owner","criteo-tag"),i.setAttribute("src",o);o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o),x.removeLater(this.exceptionHandler,i)}else e.optout?(this.optoutCookie.setValue("1"),this.secureIdCookie.removeFromAllStorages(),this.bundleCookie.removeFromAllStorages()):(e.bundle&&this.bundleCookie.setValue(e.bundle),e.removeSid?this.secureIdCookie.removeFromAllStorages():e.sid&&this.secureIdCookie.setValue(e.sid))},d.prototype.getParameterValueByName=function(e,t){if(e&&1<e.length){var n="&"+t+"=",o=(e="?"===e[0]?"&"+e.substr(1):e).indexOf(n);if(-1!==o){t=e.indexOf("&",o+n.length);return e.slice(o+n.length,t<0?void 0:t)}}return null},d.prototype.setCanWriteCookie=function(){null===this.axidCookie.cookieValue&&null===this.pxsigCookie.cookieValue?this.canWriteCookie=L.checkCookiesAreWritable():this.canWriteCookie=!0},d.prototype.setCanWriteLocalStorage=function(){this.canWriteLocalStorage=L.checkLocalStorageIsWritable()},d.prototype.getTld=function(){var e=new L("cto_tld_test",36e5),t=e.setOnMainDomain("woot");return e.removeOnMainDomain(),t},d.prototype.getPrivateMode=function(e,t){if(e.isSafari)try{if("function"==typeof t.openDatabase)return t.openDatabase(null,null,null,null),1}catch(e){return 2}return 0},d);function d(e,t,n,o){this.readonlyCookieRetentionTime=0,this.optoutCookieRetentionTime=15768e7,this.identificationCookieRetentionTime=34164e6,this.axidCookie=new L("cto_axid",this.readonlyCookieRetentionTime),this.optoutCookie=new L("cto_optout",this.optoutCookieRetentionTime),this.pxsigCookie=new L("cto_pxsig",this.readonlyCookieRetentionTime),this.secureIdCookie=new L("cto_sid",this.identificationCookieRetentionTime),this.bundleCookie=new L("cto_bundle",this.identificationCookieRetentionTime),this.ifaCookie=new L("id_controller_ifa",this.identificationCookieRetentionTime),this.canWriteCookie=!1,this.canWriteLocalStorage=!1,this.clickOriginPayload=null,this.tld=this.getTld(),this.privateMode=this.getPrivateMode(t,n),this.exceptionHandler=e,this.config=o}var q=(g.prototype.createIframe=function(e,t,n,o){var i=document.createElement("iframe"),r=encodeURIComponent||escape,a=x.getHighestAccessibleUrl(window),r=r(x.extractHostname(a)),a=window.SYNCFRAME_ORIGIN||"onetag",t={bundle:e.bundleCookie.toFragmentData(),cw:e.canWriteCookie,optout:e.optoutCookie.toFragmentData(),origin:a,pm:e.privateMode,sid:e.secureIdCookie.toFragmentData(),tld:e.tld,topUrl:r,version:t.replace(/\./g,"_"),ifa:e.ifaCookie.toFragmentData(),lsw:e.canWriteLocalStorage},e=this.gumSyncFrameEndPoint;return"#gum-debug-mode"===window.location.hash?e+="?debug=1&topUrl="+r:e+="?topUrl="+r,a&&(e+="&origin="+a),n&&(void 0!==n.gdprApplies&&(e+="&gdpr="+(n.gdprApplies?1:0)),void 0!==n.consentData&&(e+="&gdpr_consent="+n.consentData)),e+="#"+JSON.stringify(t),i.src=e,i.id=this.gumSyncFrameId,i.width="0",i.height="0",i.frameBorder="0",i.setAttribute("style","border-width:0px; margin:0px; display:none"),i.title="Criteo GUM iframe",x.removeLater(o,i),i},g.prototype.setWaitingFlag=function(e){this.waitingForSyncframe=this.waitingForSyncframe&&null===e.secureIdCookie.cookieValue&&null===e.optoutCookie.cookieValue},g.prototype.shouldInjectSyncframe=function(){return void 0!==window.addEventListener||this.forceSyncFrame},g);function g(e){this.forceSyncFrame=!1,this.gumSyncFrameOrigin="https://gum.criteo.com",this.gumSyncFrameEndPoint=window.CriteoSyncFrameUrlOverride||this.gumSyncFrameOrigin+"/syncframe",this.gumSyncFrameId="criteo-syncframe",this.waitingForSyncframe=e.hasItp||p("waitForGum",!1)}var j=new RegExp(/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[^ ]+ \(KHTML, like Gecko\) Version\/([^ ]+)( Mobile\/[^ ]+)? Safari\/[^ ]+$/i),B=(v.prototype.canRetrieveMetrics=function(){return this.hasPerformanceApi},v.prototype.startRecordingInit=function(){this.canRetrieveMetrics()&&(this.beginInit=performance.now())},v.prototype.stopRecordingInit=function(){var e;this.canRetrieveMetrics()&&null===this.timings.initTime&&null!==this.beginInit&&(e=performance.now(),this.timings.initTime=e-this.beginInit)},v.prototype.startRecordingPush=function(){this.canRetrieveMetrics()&&(this.beginPush=performance.now())},v.prototype.stopRecordingPush=function(){var e;this.canRetrieveMetrics()&&null===this.timings.pushTime&&null!==this.beginPush&&null!==this.timings.initTime&&(e=performance.now(),this.timings.pushTime=e-this.beginPush)},v.prototype.getPerformanceOrDegradedNow=function(){return this.canRetrieveMetrics()?performance.now():(new Date).getTime()},v);function v(){this.timings={initTime:null,pushTime:null},this.beginInit=null,this.beginPush=null,this.hasPerformanceApi=void 0!==window.performance&&"function"==typeof window.performance.now}var G=(y.prototype.trySetPageId=function(e,t){this.isCbsEnabled&&this.checkNotExistOrEmpty(e.page_id)&&(e.page_id=t)},y.prototype.tryForceViewListPageId=function(e){this.isCbsEnabled&&this.checkNotExistOrEmpty(e.page_id)&&(this.checkNotExistOrEmpty(e.category)?this.checkNotExistOrEmpty(e.keywords)?e.page_id="viewList":e.page_id="viewSearchResult":e.page_id="viewCategory")},y.prototype.tryRunActionAfterAdBlockDetectionOrImmediate=function(t,e){var n=this,o=window.criteo_q;null!=o?(o=o.adBlockDetector,this.isCbsEnabled&&void 0!==o?(o(function(e){n.abe=e,t()}),e(t)):t()):t()},y.prototype.tryAppendAdBlockerParameter=function(e){void 0!==this.abe&&e.push("abe="+(this.abe?1:0))},y.prototype.tryAppendUatParameter=function(e){var t;this.isCbsEnabled&&void 0!==this.uat&&(t=encodeURIComponent||escape,e.push("uat="+t(this.uat)))},y.prototype.clean=function(){this.abe=void 0,this.isCbsEnabled=!1,this.uat=void 0},y.prototype.enable=function(){this.isCbsEnabled=!0},y.prototype.setUat=function(e){this.uat=e},y.prototype.checkNotExistOrEmpty=function(e){return void 0===e||""===e},y);function y(){this.abe=void 0,this.isCbsEnabled=!1,this.uat=void 0}var H=/^#(enable|disable)-criteo-tag-debug-mode(=(\d+))?$/;var w,k,z=(C.prototype.retrieveInterestCohort=function(t){var e,n=null===(e=(n=this.document).interestCohort)||void 0===e?void 0:e.call(n);void 0!==n?(n.then(function(e){t(e)}),this.exceptionHandler.setProtectedTimeout(t,500)):t()},C.prototype.isChrome=function(){return!!window.chrome},C.prototype.addTrialToken=function(e){var t=document.createElement("meta");t.httpEquiv="origin-trial",t.content=e,document.head.appendChild(t)},C.CRITEO_NET_TOKEN="A4RpyXPHPXj2Tt0KMMrya+U6IibH8/6yFLknmyK5ZwpgUNYhhwGyllkLZNqKedteT7fKzxsI8p/Pbpbd4tEJOQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2NyaXRlby5uZXQ6NDQzIiwiZmVhdHVyZSI6IkludGVyZXN0Q29ob3J0QVBJIiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ==",C);function C(e,t){this.document=e,this.exceptionHandler=t,this.isChrome()&&this.addTrialToken(C.CRITEO_NET_TOKEN)}(!window.criteo_q||window.criteo_q instanceof Array)&&(k=window.criteo_q||[],window.criteo_q=function(){var b=new m,s=new B;s.startRecordingInit();var t,o,i,r,e,n,g={app:{accounts:[],actions:[],bodyReady:!1,disingScheduled:[],domReady:!1,eventSent:!1,queue:[]},cbs:new G},v={hooks:{},shortNameMap:{events:{applaunched:"al",viewitem:"vp",viewhome:"vh",viewlist:"vl",viewbasket:"vb",viewsearch:"vs",viewpage:"vpg",tracktransaction:"vc",addtocart:"ac",calldising:"dis",setdata:"exd",setemail:"ce",setidentity:"id"},properties:{event:"e",account:"a",first_party_identifier:"fpid",currency:"c",product:"p",item:"p","item.id":"i","item.price":"pr","item.quantity":"q","product.id":"i","product.price":"pr","product.quantity":"q",data:"d",keywords:"kw",checkin_date:"din",checkout_date:"dout",deduplication:"dd",delivery:"dl",attribution:"at","attribution.channel":"ac","attribution.value":"v",user_segment:"si",new_customer:"nc",customer_id:"ci",email:"m",hash_method:"h",identity:"id",transaction_value:"tv",client_revenue:"cr",responseType:"rt",page_name:"pn",page_id:"pi",page_number:"pnb",category:"ca",filters:"f","filters.name":"fn","filters.operator":"fo","filters.value":"fv",retailer_visitor_id:"rvi",price:"pr",availability:"av",sub_event_type:"se",store_id:"s",item_group_id:"sp",sku_parent:"sp",zipcode:"z"}},trackingCallData:{account:p("partnerId")||null,firstPartyIdentifier:p("fpIdentifier")||null,customerInfo:[],extraData:[],handlerParams:{v:c},handlerResponseType:"single",handlerUrlPrefix:"https://sslwidget.criteo.com/event",partnerPayload:null,requestType:"pixel",responseType:"js",tagVersion:c},workflow:{container:null,disOnce:!1,manualDising:!1,manualFlush:!1,noPartialFlush:!1,partialDis:!1}},n=(e=window.navigator.userAgent.match(j),{hasItp:(n=null!==e)&&11<=parseFloat(e[1]),isSafari:n}),y=new U(b,n,window,v),w=new q(n),n=new h(window),P=new z(document,b),T=(t=n.retrieveConsent.bind(n),o=!1,i=void 0,r=[],function(e){o?e(i):(r.push(e),1===r.length&&t(function(e){o=!0,i=e;for(var t=0,n=r;t<n.length;t++)(0,n[t])(i)}))});function k(e,t,n,o,i,r,a,c){e.waitingForSyncframe&&(e.waitingForSyncframe=!1,d(e,t,n,o,i,r,a,c))}function u(l,d,p,h,m,f,g,v,e){l.shouldInjectSyncframe()&&(e=l.createIframe(h,f.tagVersion,e,b),window.addEventListener&&(b.addProtectedEventListener(window,"message",function(e){var t,n,o,i,r,a,c,s,u;t=l,n=d,o=p,i=h,r=m,a=f,c=g,s=v,((e=(u=e).data)&&u.origin==t.gumSyncFrameOrigin||window.BypassSyncframeMessageSanityCheck)&&(u.stopPropagation(),i.checkCookies(e),t.waitingForSyncframe&&k(t,n,o,i,r,a,c,s))},!0),I(d,v,g,{event:"appendtag",element:e})))}function a(e,t){!function(e){var t=!1;if(200<e.length)t=!0;else for(var n=0,o=e;n<o.length;n++){var i=o[n],r=0;if(Object.keys)r=Object.keys(i).length;else for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r+=1);if(200<r){t=!0;break}}t&&(e.length=0)}(e.extraData),e.customerInfo=[],t.clean()}function l(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];b.catchAndStoreException(function(){s.startRecordingPush();for(var e=0,t=o;e<t.length;e++){var n=t[e];g.app.queue.push(n)}d(w,g.app,g.cbs,y,v.shortNameMap,v.trackingCallData,v.hooks,v.workflow),a(v.trackingCallData,g.cbs),s.stopRecordingPush()},o),s.stopRecordingInit()}function d(e,t,n,o,i,r,a,c){for(var s=[],u=t.queue,l=0;l<u.length;++l){var d=u[l];if(d instanceof Array&&u.splice.apply(u,[l+1,0].concat(d)),d instanceof Function)u.splice(l+1,0,d());else if(d&&"[object Object]"===d.toString())switch(function(e,t,n,o,i,r,a,c,s,u,l){var d=c.event,p=D(e,c);if(null!==p)return p;switch(c.event){case"setdata":return V(i.extraData,e.actions,c);case"setparameter":for(var h in c)"event"!==h.toLowerCase()&&c.hasOwnProperty(h)&&(i.handlerParams[h]=c[h]);return 1;case"calldising":S(i,e,c);break;case"setzipcode":case"setstore":return c.event="setdata",V(i.extraData,e.actions,c);case"setcustomerid":return c.event="setdata",c.customer_id=c.id,delete c.id,V(i.extraData,e.actions,c);case"setretailervisitorid":return t.enable(),c.event="setdata",c.retailer_visitor_id=c.id,delete c.id,V(i.extraData,e.actions,c);case"setgoogleadvertisingid":return n.gaid=c.gaid,V(i.extraData,e.actions,{event:"setdata",site_type:"aa"});case"setappleadvertisingid":return n.idfa=c.idfa,V(i.extraData,e.actions,{event:"setdata",site_type:"aios"});case"setemail":case"sethashedemail":case"ceh":c.event="setemail",c.hasOwnProperty("email")&&(c.email instanceof Array||(c.email=[c.email]),c.email=E(c.email));var m=O(c);return i.customerInfo.push(m),N(e.actions,O(c)),1;case"setidentity":if(c.hasOwnProperty("identity"))if(0<(f=E(f=c.identity instanceof Array?c.identity:[c.identity])).length)return c.identity=f,e.actions.push(O(c)),1;return 0;case"setsitetype":var f="d";return"mobile"!==c.type&&"m"!==c.type||(f="m"),"tablet"!==c.type&&"t"!==c.type||(f="t"),c.event="setdata",delete c.type,c.site_type=f,V(i.extraData,e.actions,c);case"appendtag":return C(e,a,r,c);case"gettagstate":return c.callback instanceof Function?c.callback(g,v,y,w):1;case"setuat":return t.setUat(c.uat),1;case"viewsearchresult":case"viewcategory":t.trySetPageId(c,d),c.event="viewlist";break;case"viewlist":t.tryForceViewListPageId(c);break;case"viewitem":case"viewhome":case"viewbasket":case"tracktransaction":case"addtocart":t.trySetPageId(c,d);break;case"viewstore":t.trySetPageId(c,d),c.event="viewHome",c.sub_event_type="s";break;case"checkavailability":t.trySetPageId(c,d),c.event="viewBasket",c.sub_event_type="a";break;case"reserveinstore":t.trySetPageId(c,d),c.event="viewBasket",c.sub_event_type="r";break;case"flush":case"flushevents":return _(e,t,n,o,i,r,a,s!==u.length-1||0!==l.length),1;case"setaccount":return i.account=c.account,1;case"seturl":return i.handlerUrlPrefix=c.url,1;case"setcalltype":return i.handlerResponseType=c.type,1;case"setresponsetype":return i.responseType=c.type,1;case"setrequesttype":return i.requestType=c.type,1;case"setpartnerpayload":return i.partnerPayload=c.payload,1;case"oninitialized":return r.onInitialized=c.callback,1;case"ondomready":return r.onDOMReady=c.callback,1;case"beforeappend":return r.beforeAppend=c.callback,1;case"aftereval":return r.afterEval=c.callback,1;case"onflush":return r.onFlush=c.callback,1;case"onurlgenerated":return r.onUrlGenerated=c.callback,1;case"disonce":return a.disOnce=!0,1;case"manualdising":return a.manualDising=!0,1;case"manualflush":return a.manualFlush=!0,1;case"nopartialflush":return a.noPartialFlush=!0,1;case"disonpartialflush":return a.partialDis=!0,1}return e.actions.push(O(c)),1}(t,n,o,i,r,a,c,d,l,u,s)){case 0:s.push(d);break;case-1:s=s.concat(u.slice(l)),l=u.length}}a.afterEval instanceof Function&&a.afterEval(),t.queue=s||[],c.manualFlush||c.noPartialFlush&&0!==t.queue.length||e.waitingForSyncframe||_(t,n,o,i,r,a,c,0!==t.queue.length)}function S(e,t,n){n.hasOwnProperty("account")||(n.account=t.accounts);e=e.handlerResponseType;n.hasOwnProperty("type")&&(e=n.type,delete n.type),f(n.account,t.disingScheduled),"sequential"===e&&(n.dc=!0)}function I(e,t,n,o){var i=D(e,o);return null!==i?i:C(e,t,n,o)}function C(e,t,n,o){if(!e.bodyReady||t.container&&document.body.contains(t.container)||(t.container=x.appendCriteoContainer(document.body)),o.url&&(e=void 0,o.isImgUrl?((e=document.createElement("img")).setAttribute("style","display:none;"),e.setAttribute("width","1"),e.setAttribute("height","1")):((e=document.createElement("script")).setAttribute("async","true"),e.setAttribute("type","text/javascript")),e.setAttribute("src",o.url),o.element=e),n.beforeAppend instanceof Function&&(o.element=n.beforeAppend(o.element)),O(o),o.element&&(o.element.tagName||o.isImgUrl))if(t.container||"script"!==o.element.tagName.toLowerCase()&&!o.isImgUrl){if(!t.container)return 0;t.container.appendChild(o.element),x.removeLater(b,o.element)}else{t=document.getElementsByTagName("script")[0];o.element.setAttribute("data-owner","criteo-tag"),t.parentNode.insertBefore(o.element,t),x.removeLater(b,o.element)}return 1}function D(e,t){return!e.domReady&&t.requiresDOM&&"no"!==t.requiresDOM?"blocking"===t.requiresDOM?-1:0:(delete t.requiresDOM,t.event?(t.account&&f(t.account,e.accounts),t.event=t.event.toLowerCase(),null):(O(t),1))}function _(u,n,e,t,o,i,r,a){if(i.onFlush instanceof Function&&(i.onFlush(),console.warn("on flush hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")),0!==u.actions.length){for(var c=0,s=o.extraData;c<s.length;c++){var l=s[c];M(u.actions,l)}for(var d=0,p=o.customerInfo;d<p.length;d++){var h=p[d];N(u.actions,h)}if(!r.manualDising&&(!a||r.partialDis)){for(var m=[],f=0,g=u.accounts;f<g.length;f++){var v=g[f];R(u.disingScheduled,v)||m.push(v)}0<m.length&&(k=o,null!==D(C=u,a={event:"callDising",account:m})||(S(k,C,a),C.actions.push(O(a))))}var y=!1,w=function(e,t,n,o){var i,r=u.actions,a=[];1===u.accounts.length&&(o.account=u.accounts[0]),null!==o.account&&a.push("a="+F(n,o.account,[])),"js"!==o.responseType&&a.push("rt="+F(n,o.responseType,[])),!o.handlerParams||(i=decodeURIComponent(F(n,o.handlerParams,[])))&&a.push(i),e.tryAppendUatParameter(a);for(var c=0;c<r.length;++c){var s=r[c];s.account&&A(null===o.account?void 0:o.account,null===s.account?void 0:s.account)&&delete s.account,a.push("p"+c+"="+F(n,s,[]))}return t.fillQueryStringParams(a),null!==o.partnerPayload&&a.push("pp="+F(n,o.partnerPayload,[])),a.push("dtycbr="+Math.floor(1e5*Math.random())),a}(n,e,t,o);u.actions=[],T(function(e){var t;e&&w.push.apply(w,(t=[],void 0!==(e=e).gdprApplies&&t.push("gra="+(e.gdprApplies?1:0)),void 0!==e.consentData&&t.push("grs="+e.consentData),void 0!==e.version&&t.push("grv="+e.version),t)),n.tryRunActionAfterAdBlockDetectionOrImmediate(function(){P.retrieveInterestCohort(function(e){e&&w.push.apply(w,["icid="+e.id,"icv="+e.version]),y||(y=!0,n.tryAppendAdBlockerParameter(w),e=w.join("&"),e={event:"appendTag",isImgUrl:"gif"===o.responseType,url:o.handlerUrlPrefix+"?"+e},"function"==typeof i.onUrlGenerated?i.onUrlGenerated(e.url):"beacon"===o.requestType&&navigator.sendBeacon?navigator.sendBeacon(e.url):I(u,r,i,e),u.eventSent=!0,r.disOnce||(u.disingScheduled=[]))})},function(e){return b.setProtectedTimeout(e,500)})})}var k,C}function F(e,t,n){var o,i,r,a="";if(t instanceof Function)a=F(e,t(),n);else if(t instanceof Array){for(var c=[],s=0;s<t.length;++s)c[s]=F(e,t[s],n);a+="["+c.join(",")+"]"}else if(t&&"[object Object]"===t.toString()){var u,l,d=[];for(u in t)t.hasOwnProperty(u)&&(l=n.concat([u]),d.push((o=e,i=u,r=l.join("."),(o.properties[r]||i)+"="+F(e,t[u],l))));a+=d.join("&")}else 1===n.length&&"event"===n[0]?a+=e.events[t.toLowerCase()]?e.events[t.toLowerCase()]:t:a+=t;return(encodeURIComponent||escape)(a)}return b.catchAndStoreException(function(){return y.checkAcid(),y.checkClientSideIdentityStatus(),y.setCop(window),e=w,t=g.app,n=g.cbs,o=y,i=v.shortNameMap,r=v.trackingCallData,a=v.hooks,c=v.workflow,e.setWaitingFlag(o),e.waitingForSyncframe&&b.setProtectedTimeout(function(){k(e,t,n,o,i,r,a,c)},1e4),x.onBodyReady(b,function(){v.hooks.onInitialized instanceof Function?(g.app.bodyReady=v.hooks.onInitialized(),console.warn("onInitialized hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):g.app.bodyReady=!0,T(function(e){u(w,g.app,g.cbs,y,v.shortNameMap,v.trackingCallData,v.hooks,v.workflow,e)}),d(w,g.app,g.cbs,y,v.shortNameMap,v.trackingCallData,v.hooks,v.workflow)}),x.onDocumentReady(b,function(){v.hooks.onDOMReady instanceof Function?(g.app.domReady=v.hooks.onDOMReady(),console.warn("on DOM ready hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):g.app.domReady=!0,d(w,g.app,g.cbs,y,v.shortNameMap,v.trackingCallData,v.hooks,v.workflow)}),function(e){try{var t=x.getAnchorWithReferrer(document);t&&t.hostname!==document.location.hostname&&W(e,{event:"setData",ref:t.protocol+"//"+t.hostname})}catch(e){}}(v.trackingCallData.extraData),p("visitEventEnabled",!1)&&function(e,t){function n(){t.eventSent||(e({event:"setRequestType",type:"beacon"}),e({event:"viewPage"}))}window.addEventListener&&window.addEventListener("beforeunload",n);var o=p("visitEventDelay",3e4);0<=o&&setTimeout(n,o)}(l,g.app),function(e,t,n,o,i){if(document&&window.location.hash&&((a=H.exec(window.location.hash))&&4===a.length&&(r="enable"===a[1],a=Number(a[3]),new L("criteoTagDebugMode",r?864e5:0).setValueWithNoDomain(r&&a&&!isNaN(a)?String(a):"0"),window.location.href=window.location.href.substr(0,window.location.href.indexOf("#")))),!document||"function"!=typeof Array.prototype.indexOf||-1===document.cookie.indexOf("criteoTagDebugMode="))return e;var r,a,c,s,u,o=(c=i,u={exceptions:e.exceptions,m_config:n,m_state:o,originalPush:e.push,performances:e.performances,push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<e.length&&this.stagedPushes.push(e),c.stopRecordingInit()},pushError:function(e){this.stagedPushes.push(e)},removeLater:e.removeLater,setProtectedTimeout:t.setProtectedTimeout,stagedErrors:[],stagedPushes:[]},window.onerror=(s=window.onerror,function(e,t,n,o){return u.pushError({column:o,lineNumber:n,message:e,url:t}),!(!s||"function"!=typeof s)&&s.apply(window,[e,t,n,o])}),u);return document&&((e=document.createElement("script")).setAttribute("type","text/javascript"),e.setAttribute("src",document.location.protocol+"//static.criteo.net/js/ld/ld-tag-debug.5.7.0.js"),(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)),o}({exceptions:b.exceptions,performances:s.timings,push:l,removeLater:function(e){return x.removeLater(b,e)}},b,v,g,s);var e,t,n,o,i,r,a,c})}(),k.adBlockDetector,window.criteo_q.adBlockDetector=k.adBlockDetector,(w=window.criteo_q).push.apply(w,k))}();
