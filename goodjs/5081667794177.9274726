window.PDPSList=["PDPS000000046010","PDPS000000058599","PDPS000000058858","PDPS000000043766","PDPS000000060868","PDPS000000057131","PDPS000000057132","PDPS000000057133","PDPS000000055657","PDPS000000055301","PDPS000000055659","PDPS000000055658","PDPS000000055660","PDPS000000055661","PDPS000000057465","CS_PDPS000000046010","CS_PDPS000000060868"];for(var power={PDPS000000025255:["NowDate","name"],PDPS000000043763:["name","post"]},listNum=0;listNum<PDPSList.length;listNum++){let e=PDPSList[listNum];power.newPDPS=["NowDate","name","post"]}var startTime=Date.parse(new Date),timeoutId=null;function getMessage(e){try{var t=JSON.parse(e.data);console.log("鎴戜滑鎷垮埌鐨勭涓夋柟浼犺繃鏉ョ殑鏁版嵁锛�",t),"oncePost"===t.frequency?Tool.getData(t):"monitorPost"===t.frequency?Tool.getlistener(t):"resetPost"===t.frequency&&Tool.getReset(t)}catch(e){}}window.Tool={whiteList:window.PDPSList||[],getIframeDomain:function(){var e=document.getElementsByTagName("iframe");e[0]&&(url=e[0].src);e=url.split("/");return e=e[2]||""},getData:function(e){for(var t=e.oncePost,o=e.pdps||"",n=Tool.getAdsDom(o),i={frequency:e.frequency},a=0,r=t.length;a<r;a++){var s={};switch(t[a]){case"top":s={top:Tool.getIframeTop(o)};break;case"left":s={left:Tool.getIframeLeft(o)};break;case"width":s={width:Tool.getIframeWidth(o)};break;case"height":s={ifrHeight:Tool.getIframeHeight(o)};break;case"allSize":s=Tool.getIframeAllSize(o)}i=Tool.mergeObject(i,s)}n&&(e=JSON.stringify(i),n.contentWindow.postMessage(e,"*"))},mergeObject:function(e,t){var o,n=JSON.parse(JSON.stringify(e));for(o in t)n[o]=t[o];return n},getlistener:function(t){window.addEventListener?window.addEventListener("scroll",function(){null!==timeoutId&&clearTimeout(timeoutId);var e=Date.parse(new Date);e-startTime<1e3?timeoutId=setTimeout(Tool.getData(t),300):(Tool.getData(t),startTime=e)}):window.attachEvent&&window.attachEvent("onscroll",function(){Tool.getData(t)})},isPC:function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!0,n=0;n<t.length;n++)if(0<e.indexOf(t[n])){o=!1;break}return o},getAdsDom:function(e){e=this.isPC()?'[data-ad-pdps="'+e+'"]':'[data-id="'+e+'"]',e=document.querySelector(e);return e?e.getElementsByTagName("iframe")[0]:""},getIframeAllSize:function(e){for(var t=["top","left","width","height"],o={allSize:{windowH:Tool.getClientHeight(),windowW:Tool.getClientWidth()}},n=0;n<t.length;n++){var i=t[n].substring(0,1).toUpperCase()+t[n].substring(1);o.allSize[t[n]]=Tool[`getIframe${i}`](e)}return o},getPower:function(e,t){for(var o=power[e],n={},i=0,a=t.length;i<a;i++)for(var r=0,s=o.length;r<s;r++)t[i]==o[r]&&(n[t[i]]=Tool.getCookie(t[i]));return n},getCookie:function(e){for(var t=document.cookie.split("; "),o=0;o<t.length;o++){var n=t[o].split("=");if(n[0]==e)return n[1]}return""},getReset:function(e){var t=e.pdps,o=this.isPC()?'[data-ad-pdps="'+t+'"]':'[data-id="'+t+'"]',t=document.querySelector(o),o="";(o=t?t.getElementsByTagName("iframe")[0]:o)&&(203<parseInt(e.oncePost.resetSizeH)?o.style.height="203px":o.style.height=e.oncePost.resetSizeH+"px")},getDomain:function(){return document.referrer||window.location.href||document.domain},getAdsList:function(){window.addEventListener||window.attachEvent},postData:function(e){var t={init:{pdps:e,referrer:Tool.getDomain()}},e=Tool.getAdsDom(e),t=JSON.stringify(t);Tool.getIframeDomain();e&&e.contentWindow.postMessage(t,"*")},getClientHeight:function(){return(document.body.clientHeight<document.documentElement.clientHeight?document.body:document.documentElement).clientHeight},getClientWidth:function(){return(document.body.clientWidth<document.documentElement.clientWidth?document.body:document.documentElement).clientWidth},getIframeHeight:function(e){var t,e=this.isPC()?'[data-ad-pdps="'+e+'"]':'[data-id="'+e+'"]',e=document.querySelector(e);return t=e?e.clientHeight:t},getIframeWidth:function(e){var t,e=this.isPC()?'[data-ad-pdps="'+e+'"]':'[data-id="'+e+'"]',e=document.querySelector(e);return t=e?e.clientWidth:t},getIframeTop:function(e){if(e){var t,e=this.isPC()?'[data-ad-pdps="'+e+'"]':'[data-id="'+e+'"]',e=document.querySelector(e);return t=e?parseInt(e.getBoundingClientRect().top):t}},getIframeLeft:function(e){if(e){var t,e=this.isPC()?'[data-ad-pdps="'+e+'"]':'[data-id="'+e+'"]',e=document.querySelector(e);return t=e?parseInt(e.getBoundingClientRect().left):t}},throttle(t,o,n){var i=Date.parse(new Date),a=null;return function(){null!==a&&clearTimeout(a);var e=Date.parse(new Date);e-i<n?(console.log("灏忎簬1000"),a=setTimeout(t,o)):(console.log("澶т簬1000"),i=e)}}},document.cookie="NowDate="+new Date,document.cookie="name=sinaAds",document.cookie="post=massage",document.cookie="page=23333",window.addEventListener?window.addEventListener("message",function(e){getMessage(e)}):window.attachEvent&&window.attachEvent("onmessage",function(e){getMessage(e)}),Tool.getAdsList();
