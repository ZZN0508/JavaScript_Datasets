var geoUtils=function(){requestInProgress=!1,concurrentQueue=[],getDomain=function(){var e=-1!==webutils.getParameterByName("domain")?webutils.getParameterByName("domain"):window.location.hostname;return"www.zendesk.com"===e&&0===window.location.pathname.indexOf("/th/")?"www.zendesk.com/th":e};var i=getDomain();geoLocateQueue=function(e,n){for(;0<concurrentQueue.length;){var o=concurrentQueue.shift();"function"==typeof o[n]&&o[n](e)}};var c={"www.zendesk.hk":{continent:"AS",country:"HK",region:"APAC",language:"zh-tw",locale:"zh-tw"},"www.zendesk.co.jp":{continent:"AS",country:"JP",region:"APAC",language:"ja",locale:"ja-jp"},"www.zendesk.kr":{continent:"AS",country:"KR",region:"APAC",language:"ko",locale:"ko-kr"},"www.zendesk.com.ru":{continent:"AS",country:"RU",region:"EMEA",language:"ru",locale:"ru-ru"},"www.zendesk.tw":{continent:"AS",country:"TW",region:"APAC",language:"zh-tw",locale:"zh-tw"},"www.zendesk.de":{continent:"EU",country:"DE",region:"EMEA",language:"de",locale:"de-de"},"www.zendesk.es":{continent:"EU",country:"ES",region:"EMEA",language:"es",locale:"es-es"},"www.zendesk.fr":{continent:"EU",country:"FR",region:"EMEA",language:"fr",locale:"fr-fr"},"www.zendesk.co.uk":{continent:"EU",country:"GB",region:"EMEA",language:"en-gb",locale:"en-gb"},"www.zendesk.it":{continent:"EU",country:"IT",region:"EMEA",language:"it",locale:"it-it"},"www.zendesk.nl":{continent:"EU",country:"NL",region:"EMEA",language:"nl",locale:"nl-nl"},"www.zendesk.com.mx":{continent:"NA",country:"MX",region:"LATAM",language:"es-419",locale:"es-la"},"www.zendesk.com.br":{continent:"SA",country:"BR",region:"LATAM",language:"pt-br",locale:"pt-br"},"www.zendesk.com":{continent:"NA",country:"US",region:"AMER",language:"en",locale:"en-us",default:!0},"www.zendesk.com/th":{continent:"AS",country:"TH",region:"APAC",language:"th",locale:"th-th"},"www.zendesk.st":{continent:"NA",country:"US",region:"AMER",language:"en",locale:"en-us"}};return getGeoData=function(){return new Promise(function(n,t){var e=sessionStorage.getItem("geoData");return e?n(JSON.parse(e)):requestInProgress?void concurrentQueue.push({resolve:n,reject:t}):(requestInProgress=!0,void $.ajax({url:webutils.appUrl("geo.json"),type:"GET",success:function(e){try{e.disableCache||sessionStorage.setItem("geoData",JSON.stringify(e))}catch(e){}n(e),geoLocateQueue(e,"resolve")},error:function(e,n,o){console.error(o),t(o),geoLocateQueue(o,"reject")},complete:function(){requestInProgress=!1}}))})},isUserInContinentCountry=function(t,r,a){if(t)return r=r||!1,a=a||!1,new Promise(function(n,o){!c[i]||(t===c[i].continent&&r===c[i].country||!r&&t===c[i].continent)&&n(!0),geoUtils.getGeoData().then(function(e){!e&&a&&n(!0),n(r?e.country_code===r:e.continent_code===t)}).catch(function(e){console.error(e),o(e)})})},isUserInRegions=function(t,e){if(e=e||!1,t)return c[i]&&!0===c[i].default&&(e=!0),new Promise(function(n,o){c[i]&&!e&&-1!==t.indexOf(c[i].region)&&n(!0),geoUtils.getGeoData().then(function(e){e||n(!1),n(!(!t||-1===t.indexOf(e.region)))}).catch(function(e){o(e)})})},isUserInRegion=function(e){return isUserInRegions([e])},isUserIn=function(r){if(r)return new Promise(function(t,n){geoUtils.getGeoData().then(function(e){e||t(!1);var n,o=[];for(n in r)o.push(r[n]===e[n]);t(-1===o.indexOf(!1))}).catch(function(e){n(e)})})},domainLanguage=function(){return c[i]&&c[i].hasOwnProperty("language")?c[i].language:"en"},getLocale=function(){var e=-1!==webutils.getParameterByName("locale")?webutils.getParameterByName("locale"):null;return e||(c[i]&&c[i].hasOwnProperty("locale")?c[i].locale:"en-us")},{domainInfo:c,domainLanguage:domainLanguage,getLocale:getLocale,getGeoData:getGeoData,getDomain:getDomain,isUserInContinentCountry:isUserInContinentCountry,isUserInRegions:isUserInRegions,isUserInRegion:isUserInRegion,isUserIn:isUserIn}}();
