define("pkg/@alife/vbar-atmo-inverted-app/1.1.5/index",["preact-compat","jquery"],function(a,n){return i=[function(e,t,a){"use strict";var n,r=a(1),i=(n=r)&&n.__esModule?n:{default:n},l=a(2),o=a(20);a(21),e.exports={title:"邀约",login:!0,icon:{normal:"url(//img.alicdn.com/tfs/TB1EudgiLDH8KJjy1XcXXcpdXXa-14-12.png) center no-repeat",hover:"url(//img.alicdn.com/tfs/TB1nfgjiBfH8KJjy1XbXXbLdXXa-14-12.png) center no-repeat"},resource:{css:"//astyle.alicdn.com/pkg/"+o.name+"/"+o.version+"/index.css"},panel:{name:"panel-inverted",title:"收到的邀约",showHeader:!0,render:function(e){return l.createElement("div",{className:"vbar-panel-inverted-content",style:{height:"100%",overflow:"auto"}},l.createElement(i.default,null))}}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r,i=n(a(2)),l=n(a(3)),o=n(a(9)),c=n(a(12)),s=n(a(15)),d=(n(a(4)),a(18)),u=n(a(19)),f="https://widget.1688.com/front/getJsonComponent.json",p="daoliInvitationForBuyerQueryService",m="buyerIdentityStatusService",h="daoliInvitationBuyerAckService",a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,r=i.default.Component),g.prototype.componentWillMount=function(){var t=this;t.dataQuery(p,{status:"pending",pageSize:5}).then(function(e){e=e.list||[];0<e.length?t.setState({pendingList:e,list:e,number:e.length}):t.indentifyQuery(m).then(function(e){e||t.setState({hasIndentify:!0})})}),t.dataQuery(p,{status:"accept",pageSize:2}).then(function(e){e=e.list||[];t.setState({acceptList:e})})},g.prototype.dataQuery=function(e,t){var e={namespace:e,widgetId:e,methodName:"execute",needOfferDetail:!0},a=u.default.Deferred(),t=u.default.extend({},e,t);return u.default.ajax({url:f,dataType:"jsonp",data:t}).done(function(e){return e.errors.length<=0?void a.resolve(e.content):void a.reject({errorMsg:"error"})}).fail(function(e){a.reject({errorMsg:e})}),a.promise()},g.prototype.indentifyQuery=function(e){var t=u.default.Deferred();return u.default.ajax({url:f,dataType:"jsonp",data:{namespace:e,widgetId:e,methodName:"execute"}}).done(function(e){t.resolve(e.content.isExist)}).fail(function(){t.reject({errorMsg:error})}),t.promise()},g.prototype.actionQuery=function(e,t){var e={namespace:e,widgetId:e,methodName:"execute"},a=u.default.Deferred();return u.default.ajax({url:f,dataType:"jsonp",data:u.default.extend({},e,t)}).done(function(e){a.resolve(e.content.success)}).fail(function(){a.reject({errorMsg:error})}),a.promise()},g.prototype.closePop=function(){this.setState({indentifyPopShow:!1})},g.prototype.acceptListUpdate=function(t){var e=this.state.pendingList.slice(0).filter(function(e){return e.activityId!=t.activityId}),a=this.state.acceptList.slice(0);a.unshift(t),this.setState({pendingList:e,acceptList:a,list:e})},g.prototype.ingoreListUpdate=function(t){var e=this.state.pendingList.slice(0).filter(function(e){return e!==t});this.setState({pendingList:e,list:e})},g.prototype.accept=function(t,a,e){var n=this;(0,d.acceptInvoke)(),window.open(e),n.indentifyQuery(m).then(function(e){e?n.actionQuery(h,{activityId:t,status:"accept"}).done(function(e){e&&n.acceptListUpdate(a)}):n.setState({indentifyPopShow:!0})})},g.prototype.ignore=function(e,t){var a=this;(0,d.ignoreInvoke)(),a.actionQuery(h,{activityId:e,status:"reject"}).done(function(e){e&&a.ingoreListUpdate(t)})},g.prototype.render=function(){var n=this;return i.default.createElement("div",null,i.default.createElement(l.default,{dealWithNumber:this.state.pendingList.length}),this.state.list.length<=0?i.default.createElement(c.default,{hasIndentify:this.state.hasIndentify}):i.default.createElement(o.default,{list:this.state.list,showAction:this.state.pending,ignore:function(e,t){n.ignore(e,t)},accept:function(e,t,a){n.accept(e,t,a)}}),this.state.indentifyPopShow?i.default.createElement(s.default,{close:function(){n.closePop()}}):"")},g);function g(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return e.state={pendingList:[],acceptList:[],list:[],number:null,hasIndentify:!1,pending:!0,indentifyPopShow:!1},e}t.default=a},function(e,t){e.exports=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(a(2));n(a(4)),a(5);var i,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i=r.default.Component),l.prototype.render=function(){var e=this.props.dealWithNumber;return r.default.createElement("div",{className:"inverted-header"},r.default.createElement("a",{href:"https://i.crm.1688.com/page/daolibuyer.htm?status=pending",target:"_blank"},"近30天收到",r.default.createElement("span",{className:"str"},e),"条邀约",r.default.createElement("i",{className:"arr"},">")))},l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e))}t.default=a},function(e,t,a){var n;!function(){"use strict";function l(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var n=typeof a;if("string"==n||"number"==n)e.push(a);else if(Array.isArray(a)&&a.length){var r=l.apply(null,a);r&&e.push(r)}else if("object"==n)for(var i in a)o.call(a,i)&&a[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=l.default=l:void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()},function(e,t){},,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var d=n(a(2)),u=n(a(4));a(10);var r,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r=d.default.Component),i.prototype.getOfferPrice=function(e){return e=parseInt(e,10),e=!isNaN(e)?(e/100).toFixed(2):e},i.prototype.renderCard=function(e,t){return e?d.default.createElement("div",{className:"card-item"},d.default.createElement("div",{className:"title"},t),d.default.createElement("div",{className:"des"},"最高享受",e,"折扣"),d.default.createElement("div",{className:"icon"},d.default.createElement("span",{className:"img-card"}))):""},i.prototype.renderCoupon=function(e,t){return e?d.default.createElement("div",{className:"card-item"},d.default.createElement("div",{className:"title"},"专享优惠券"),8===t&&d.default.createElement("div",{className:"des"},"包邮"),8!==t&&d.default.createElement("div",{className:"des"},e,"元"),d.default.createElement("div",{className:"icon"},d.default.createElement("span",{className:"img-counpon"}))):""},i.prototype.renderYang=function(e,t,a){return e?d.default.createElement("div",{className:"card-item"},d.default.createElement("div",{className:"title"},"样品"),d.default.createElement("div",{className:"des"},d.default.createElement("a",{href:e,target:"_blank"},t)),d.default.createElement("div",{className:"icon"},d.default.createElement("img",{src:a,className:"img-offer"}))):""},i.prototype.renderImgs=function(e){var a=this;if(e.length<=0)return null;var t=e.length,n={width:63};return d.default.createElement("div",{className:"img-container"},d.default.createElement("div",{className:"img-control",style:{width:63*t,height:80}},e.map(function(e){var t="https://detail.1688.com/offer/"+e.offerId+".html";return d.default.createElement("div",{key:e.offerId,className:"img-item",style:n},d.default.createElement("a",{href:t,target:"_blank"},d.default.createElement("img",{src:e.image,width:"60",height:"60"}),d.default.createElement("p",{className:"offer-price"},"¥",a.getOfferPrice(e.price))))})))},i.prototype.render=function(){var o=this,e=this.props,t=e.list,c=e.accept,s=e.ignore,t=t||[];return d.default.createElement("div",null,d.default.createElement("div",{className:"inverted-list"},t.map(function(e,t){var a=e.extraInfo,n="https://i.crm.1688.com/page/daolibuyer.htm?status="+(o.props.showAction?"pending":"accept")+"&opendetail="+e.activityId,r=a.needSpecial,i=!!r&&a.hasDacuRedPacket,l=r?a.pcSpecialUrl:a.winportUrl,r=r?a.specialTitle:"接受并进店逛逛",a=(0,u.default)(((a={})["btn-action"]=!0,a["action-accept"]=!0,a["btn-dacu"]=i,a));return d.default.createElement("div",{className:"card",key:e.activityId,ref:e.activityId},d.default.createElement("div",{className:"card-header"},d.default.createElement("a",{href:l,target:"_blank"},d.default.createElement("p",{className:"title"},e.companyName),e.gradeName?d.default.createElement("p",{className:"des"},"您是该店铺",e.gradeName):"",d.default.createElement("span",{className:"line"}))),e.daoliActivityRightDetail.recommendTitle?d.default.createElement("div",{className:"shop-tips"},d.default.createElement("a",{href:n,target:"_blank"},e.daoliActivityRightDetail.recommendTitle,d.default.createElement("i",{className:"arr"},">"))):null,o.renderImgs(e.daoliActivityRightDetail.offerDetailInfoList),d.default.createElement("div",{className:"card-body"},d.default.createElement("a",{href:n,target:"_blank"},o.renderCard(e.daoliActivityRightDetail.discount,e.daoliActivityRightDetail.gradeName),o.renderCoupon(e.daoliActivityRightDetail.couponDiscountFee,e.daoliActivityRightDetail.couponType)),o.renderYang(e.daoliActivityRightDetail.sampleOfferUrl,e.daoliActivityRightDetail.sampleOfferTitle,e.daoliActivityRightDetail.sampleOfferImage)),o.props.showAction?d.default.createElement("div",{className:"card-action"},d.default.createElement("div",{className:a,onClick:function(){c(e.activityId,e,l)}},r),d.default.createElement("div",{className:"line"}),d.default.createElement("div",{className:"btn-action action-ignore",onClick:function(){s(e.activityId,e)}},"忽略")):"")})),d.default.createElement("div",{className:"inverted-list-more"},this.props.showAction?d.default.createElement("a",{href:"https://i.crm.1688.com/page/daolibuyer.htm?status=pending",target:"_blank"},"更多邀约>"):d.default.createElement("a",{href:"https://i.crm.1688.com/page/daolibuyer.htm?status=accept",target:"_blank"},"更多接受>")))},i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e))}t.default=a},function(e,t){},,function(e,t,a){"use strict";t.__esModule=!0;var n,r=a(2),i=(n=r)&&n.__esModule?n:{default:n};a(13);t.default=function(e){var t=i.default.createElement("div",{className:"indentify-action"},i.default.createElement("p",{className:"title"},"完善信息有助于获得更多邀约"),i.default.createElement("p",null,i.default.createElement("a",{href:"https://view.1688.com/cms/promotion/Purchasing-card.html?tracelog=1688sidebar",target:"_blank",className:"indentify-btn"},"立即完善")));return i.default.createElement("div",{className:"inverted-empty"},i.default.createElement("div",{className:"main"},i.default.createElement("img",{src:"https://img.alicdn.com/tfs/TB1WWrwSFXXXXaRXXXXXXXXXXXX-181-181.png"}),i.default.createElement("p",{className:"title"},"暂无邀约")),e.hasIndentify?t:"")}},function(e,t){},,function(e,t,a){"use strict";t.__esModule=!0;var n,r=a(2),i=(n=r)&&n.__esModule?n:{default:n};a(16);t.default=function(e){return i.default.createElement("div",{className:"indentify-action"},i.default.createElement("p",{className:"title"},"完善信息有助于获得更多邀约"),i.default.createElement("p",null,i.default.createElement("a",{href:"https://view.1688.com/cms/promotion/Purchasing-card.html?tracelog=1688sidebar",target:"_blank",className:"indentify-btn"},"立即完善"))),i.default.createElement("div",{className:"inverted-pop"},i.default.createElement("div",{className:"pop"},i.default.createElement("div",{className:"action"},i.default.createElement("a",{className:"btn go",href:"https://view.1688.com/cms/promotion/Purchasing-card.html?tracelog=1688sidebar",target:!0},"立即完善"),i.default.createElement("a",{className:"btn close",onClick:e.close},"暂不完整"),i.default.createElement("a",{className:"btn close-x",onClick:e.close},"X"))))}},function(e,t){},,function(e,t){"use strict";t.__esModule=!0,t.acceptInvoke=function(){window.goldlog&&goldlog.record("/1688crm.toolbar.accept","CLK","","H1479648468")},t.ignoreInvoke=function(){window.goldlog&&goldlog.record("/1688crm.toolbar.ignore","CLK","","H1479648432")}},function(e,t){e.exports=n},function(e,t){e.exports={name:"@alife/vbar-atmo-inverted-app",version:"1.1.5",description:"工具条-邀约中心",main:"index.js",author:"liying.ly",repository:{type:"git",url:"git@gitlab.alibaba-inc.com:vbar/vbar-inverted-app.git"},keywords:["lofty","package","vbar"],scripts:{server:"sudo ./node_modules/.bin/fdserver -d -cf ./fdserver.config.js",watch:"./node_modules/.bin/webpack --watch"},license:"MIT",readmeFilename:"README.md",dependencies:{"@alife/alpha-class":"~1.3.0","@alife/alpha-jquery":"^1.0.9","@alife/lofty-template":"^2.0.0","@alife/refly-mbox":"~0.0.1",classnames:"^2.2.5","extract-text-webpack-plugin":"^1.0.1","json-loader":"^0.5.7",xtend:"~4.0.1"},publishConfig:{registry:"http://registry.npm.alibaba-inc.com"},devDependencies:{"@ali/eslint-config-plover-app":"*","babel-core":"^6.18.0","babel-loader":"^6.2.5","babel-preset-es2015":"^6.18.0","babel-preset-react":"^6.16.0","babel-preset-stage-0":"^6.0.15","babel-register":"^6.18.0","css-loader":"^0.26.1","es3ify-loader":"^0.2.0",eslint:"^2.9.0","eslint-config-airbnb":"^8.0.0","eslint-plugin-babel":"^3.2.0","eslint-plugin-import":"^1.6.1","eslint-plugin-jsx-a11y":"^1.0.4","eslint-plugin-react":"^5.0.1","extract-text-webpack-plugin":"^1.0.1",flux:"^3.1.0",less:"^2.7.1","less-loader":"^2.2.3",mocha:"^3.1.2","react-hot-loader":"^1.3.1",should:"^11.1.1","style-loader":"^0.13.1","unicode-loader":"^1.0.6",webpack:"1.13.2","webpack-dev-server":"^1.16.2","@ali/fdserver":"~0.12.4"},apm:{build:!1,publishFolder:"dist"}}},function(e,t){}],l={},r.m=i,r.c=l,r.p="",r(0);function r(e){if(l[e])return l[e].exports;var t=l[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var i,l});
