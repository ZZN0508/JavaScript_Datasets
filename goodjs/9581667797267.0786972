!function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),o=n(t),i=o.default.util,a=i.toArray,u=i.each,c=i.extend,l=o.default.url.makeUrl,s=/^(?:cl([bn])|([adgin]))(\d+)(?:sz(\d+))?/,d=r.default._.EXPERIMENTID||null,f=r.default._.SITEZONE||null,h="//rs.mail.ru/",m=function(e){return(new Image).src=e};function p(){var n={d:"imp",sb:"click"},t={};a(arguments).reverse().forEach(function(e){e&&e.split(",").reverse().forEach(function(e){e=function(e){var t;if(!(t=e.match(s)))return null;e=!1;return{type:t[1]?"s"+t[1]:"n"===t[2]?"nc":"i"===t[2]?(e=!0,t[1]):t[2],noRandom:e,num:t[3],params:[{name:"sz",value:t[4]||f},{name:"test_id",value:d}]}}(e.trim());null!==e&&(t[e.type]||(t[e.type]=[]),t[e.type].push(e))})}),u(t,function(e,t){1===e.length?function(e){if(null!==e){var t=[h,e.type,e.num,".gif"].join("");m(l(t,e.params,1<<Number(e.noRandom)<<2))}}(e[0]):1<e.length&&n[t]&&g(n[t],e.map(function(e){return e.num}))})}function g(e,t,n){e&&t&&t.length&&m(l("//rs.mail.ru/bulkstat/",[{name:"type",value:e},{name:"banner_ids",value:t.map(encodeURIComponent).join(",")},{name:"test_id",value:n||d}],5))}c(p,{bulk:g,links:function(e){e&&e.length&&m(l("//rs.mail.ru/ns.gif",[{name:"n",value:e.map(encodeURIComponent).join(",")}],1))}});var v=/^([a-z][a-z0-9]*)/g,y=/^\.([A-z0-9\-\_]+)/g,_=/^#([A-z0-9\-\_]+)/g,w=/^@([A-z0-9\-\_]+)="([^"]+)"/g,b=/^\*(\d+)/g,x=new RegExp('"',"g"),C=/\s+/,A=/-(\w)/g;function E(e){return null===e.offsetParent}var N,S,k,I,j,O,F,T=!1;function P(a,e,u){var t=e.available,n=e.styles;if(void 0===u&&(u=!1),t){for(var c,r=0,o=n;r<o.length;r++){var i=o[r],l=i.field,i=i.value;a.style[l]=i}if(T)c=window.getComputedStyle(a);else if(T=!0,a.style.setProperty){e=a.style.getPropertyValue("display");a.style.setProperty("display","inline");t=(c=window.getComputedStyle(a)).display;if(a.style.setProperty("display",e),"inline"!==t)return u&&console.warn("[Honeypot] detect: property changed",{Bait:a,display:t,oldValue:"inline"}),!0}return n.some(function(e){for(var t=e.field,n=e.value,r=0,o=[t,t.replace(A,function(e,t){return t.toUpperCase()})];r<o.length;r++){var i=o[r];if(i in c&&c[i]!==n&&"auto"!==c[i])return u&&console.warn("[Honeypot] detect: property changed",{Bait:a,Field:t,property:c[i],oldValue:n}),!0}})}return!1}function R(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function M(e,t){var n=e,r="GET",o=null,i=!1,a=!1,u=function(){var t={readyState:4,status:-1};t.open=t.send=U;try{t=new window.XMLHttpRequest}catch(e){try{t=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}return t}(),c=null,l=new Date,s={error:c,xhr:u};"object"==typeof e&&(n=e.url,r=e.method||r,o=e.body||o,i=e.sync||i,a=e.credentials||a),u.url=n;var d=function(){!c&&4!==u.readyState||(d=U,s.error=c,u.duration=new Date-l,u.onerror=u.onreadystatechange=null,"function"==typeof t&&t(c,u))};try{u.onreadystatechange=d,u.onerror=function(e){c=e,d()},u.open(r,n,!i),u.withCredentials=a,u.send(o)}catch(e){c=e,d()}return s}var z,H=[],B=(D.prototype.check=function(i){void 0===i&&(i=!1);try{if(H.length)return H.some(function(e){return E(e)?(i&&console.warn("[Honeypot] detect: hidden bait",{Function:"checkIfHidden",Bait:e}),!0):P(e,O,i)});if(1===N.length)return i&&console.warn("[Honeypot] detect: configBaits.length === 1",{ConfigBaits:N}),!0;F=N.map(function(e){var t,n=e.split(C),e=(e.match(x)||[]).length;if(0<e&&e%2==0)for(var r=null,o=0;o<n.length;o++)null===r?(t=(n[o].match(x)||[]).length)&&t%2&&(r=o):(n[r]+=" "+n[o],-1!==n[o].indexOf('"')&&(r=null),n[o]=void 0);return n.filter(function(e){return e}).map(function(e){for(var t,n={id:null,tag:null,classes:null,attrs:null,multi:1};v.lastIndex=0,y.lastIndex=0,_.lastIndex=0,w.lastIndex=0,b.lastIndex=0,(t=v.exec(e))?(e=e.substr(v.lastIndex),n.tag=t[1]):(t=y.exec(e))?(e=e.substr(y.lastIndex),n.classes=n.classes||[],n.classes.push(t[1])):(t=_.exec(e))?(e=e.substr(_.lastIndex),n.id=t[1]):(t=w.exec(e))?(e=e.substr(w.lastIndex),n.attrs=n.attrs||{},n.attrs[t[1]]=t[2]):(t=b.exec(e))&&(e=e.substr(b.lastIndex),n.multi=parseInt(t[1],10)),t&&e.length;);if(e.length)throw new Error('Unparsed template: "'+e+'"');return n})}),m=S,O={available:"function"==typeof window.getComputedStyle,styles:m.map(function(e){e=e.split(/\s*:\s*/);return{field:e[0],value:e[1]}})},j=document.createElement("div");var e={position:"absolute",visibility:"hidden",top:"-"+R(9e3,12e3)+"px"};5<R(0,10)?e.left="-"+R(9e3,12e3)+"px":e.right="-"+R(9e3,12e3)+"px";var t=Object.keys(e);t.sort(function(){return Math.random()-.5});for(var n=0,r=t;n<r.length;n++){var o=r[n];j.style[o]=e[o]}if(document.body.appendChild(j),function(n,r){void 0===i&&(r=!1);try{if(n&&(n=n.filter(function(e){return e})).length)for(var o=document.styleSheets,e=o.length;e--;){var t=function(e){var t=o[e];if(!t.href&&n.some(function(e){if(-1!==t.ownerNode.innerText.indexOf(e))return r&&console.warn("[Honeypot] detect: css rule is found",{Function:"checkCssRules",Rule:e}),!0}))return{value:!0}}(e);if("object"==typeof t)return t.value}}catch(n){}}(I,i))return!0;for(var a=0,u=F;a<u.length;a++){var c=function(e){for(var t,n=[],r=[];t=e.pop();){var o,i=document.createElement(t.tag||"div");for(o in t.attrs||(t.attrs={}),t.id&&(t.attrs.id=t.id),t.classes&&(t.attrs.class=t.classes.join(" ")),t.attrs)t.attrs.hasOwnProperty(o)&&"length"!==o&&i.setAttribute(o,t.attrs[o]);for(var a=0,u=r;a<u.length;a++){var c=u[a];i.appendChild(c)}for(r.length=0,n.push(i),r.push(i),o=1;o<t.multi;o++){var l=i.cloneNode(!0);n.push(l),r.push(l)}}return[n,r]}(u[a]),l=c[0],s=c[1];if(l.length){for(var d=0,f=s;d<f.length;d++){var h=f[d];j.appendChild(h)}if(l.some(function(e){return H.push(e),E(e)?(i&&console.warn("[Honeypot] detect: hidden bait",{Function:"checkIfHidden",Bait:e}),!0):!!P(e,O,i)||void 0}))return!0}}if(function(e,n){void 0===i&&(n=!1);try{if(e&&(e=e.filter(function(e){return e})).length&&e.some(function(t){var e=document.querySelectorAll(t);return 0<e.length&&Array.prototype.every.call(e,function(e){if(E(e))return n&&console.warn("[Honeypot] detect: hidden element",{Function:"checkSelector",Selector:t,Elem:e}),!0})}))return 1}catch(e){}}(k,i))return!0}catch(i){return console.error("honeypot detect error",i),!0}var m;return!1},D.prototype.destroy=function(){j&&(document.body.removeChild(j),j=null),H.length=0,N=S=k=I=F=O=null},D),U=new Function,L=!1;function D(e){try{N=e[0],S=e[1],k=e[2],I=e[3]}catch(e){console.error(e)}}try{L="http://example.com/"===new URL("http://example.com/").href}catch(e){}function W(e,t){return Math.random()*(t-e+1)+e|0}function q(e){return Array.prototype.slice.call(e)}var X={random:W,randomBoolean:function(e){return W(0,100)<=e},calcString:function(e,t){if(e=parseInt(e,10),function(){if(void 0===z)try{var e;"function"==typeof window.getComputedStyle&&((e=document.createElement("div")).style.height="calc(30px + 30px)",document.getElementsByTagName("body")[0].appendChild(e),z="60px"===window.getComputedStyle(e,null).getPropertyValue("height"),e.parentNode.removeChild(e))}catch(e){z=!1}return z}()){for(var n=[],r=0,o=0,i=W(1,6);o<i;o++)n.push(W(-100,100)),r+=n[n.length-1];return r!==e&&n.push(e-r),"calc("+n.map(function(e){return e.toString()+t}).join(" + ")+")"}return e+t},replaceUrl:function(e,t,n){if(L&&t){t.startsWith("//")&&(t="https:"+t);var r=e.charAt(0),o='"'===r||"'"===r,i=+o,o=n?e.indexOf((o?r:"")+")"):o?e.indexOf(r,1+i):e.length,r=e.slice(i,o);try{r=new URL(r,t).href}catch(e){}return e.slice(0,i)+r+e.slice(o)}return e},replaceContent:function(e){var t=e.charAt(0),n='"'===t||"'"===t,r=Number(n),t=n?e.indexOf(t,r):e.indexOf(";",r),o=e.slice(r,t),i="";if(/^\\[a-z0-9]+$/.test(o)||!n)i=o;else for(var a=0;a<o.length;a++){var u=o[a].charCodeAt(0);isNaN(u)||(i+="\\"+u.toString(16))}return e.slice(0,r)+i+e.slice(t)},iterate:function(e,t,n){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"length"!==r&&t.call(n||this,e[r],r)},extend:function(){var e=q(arguments),n=e.shift();return e.forEach(function(e){for(var t in e)n[t]=e[t]}),n},merge:function(){var e=q(arguments),n=e.shift();return e.forEach(function(e){for(var t in e)n[t]||(n[t]=e[t])}),n},toArray:q};function K(e){e&&this.__rules.push(e)}function V(e,t,n){var r;this.__style=(e=e,(r=document.createElement("style")).appendChild(document.createTextNode("")),(e=e||{}).rel="stylesheet",e.type="text/css",e.media=e.media||"screen",X.iterate(e,function(e,t){e&&r.setAttribute(t,e)}),r),this.__style.__created=!0,this.__rules=[],this.__originalNode=t,this.__alwaysInHead=n}var G=/content\s*:\s*/;function J(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}var Y=/^(-?\d+)([a-z%]+)$/,Z=/\s(?![*+\-/]|[^()]+\)+|\(+)/;function Q(e,t,n,r){for(var o,i,a,u="",c=t(e.selectorText),l=0;l<e.style.length;l++){var s="important"===e.style.getPropertyPriority(e.style[l])?" !important":"",d=e.style[l];/background-(repeat|position)-[xy]/.test(d)&&(d=d.replace(/-[xy]$/,""));var f=e.style[d]||e.style[J(d)];if(void 0!==f&&f.length||(d=d.replace(/-(value|(ltr|rtl)-source)$/g,""),f=e.style[d]||e.style[J(d)]),void 0!==(f=void 0===f&&"float"===d?e.style.cssFloat:f)&&f.length){if(r.randomize&&r.randomize.length&&-1<r.randomize.indexOf(d)&&c!=e.selectorText){for(var h=f.split(Z),m=h.length,p=[];m--;){var g=Y.exec(h[m]);p.unshift(g?X.calcString(g[1],g[2]):h[m])}f=p.join(" ")}u+=d+": "+f+s+"; "}}return-1!==u.indexOf("url(")&&(i=n,a=!0,u=u.split("url(").map(function(e){return a?(a=!1,e):X.replaceUrl(e,i,!0)}).join("url(")),-1!==u.indexOf("content")&&(o=!0,u=u.split(G).map(function(e){return o?(o=!1,e):X.replaceContent(e)}).join("content:")),c+" { "+u+" }"}var ee=function(e,n,r,o,i){i=i||{},X.iterate(function(e){try{return e.cssRules||e.rules}catch(e){return null}}(e),function(e){switch(e.type){case 1:o(Q(e,n,r,i));break;case 4:var t=[];X.iterate(e.cssRules||e.rules,function(e){t.push(Q(e,n,r,i))}),o("@media "+e.media.mediaText+" { "+t.join(" ")+" }");break;default:o(e.cssText)}})},te=/^(\/|https?:\/\/([^\/]*.)?(dev|imgs)?mail.ru\/)/,ne=/.*?\/\/.*?\//,re=!(V.prototype={constructor:V,insert:function(){K.apply(this,arguments)},insertBlock:function(e,t){K.apply(this,[e+"{"+t+"}"])},setContent:function(e){this.__style.appendChild(document.createTextNode(e))},apply:function(){this.__originalNode&&this.__originalNode.parentNode?(function(e,t){e=e.getAttribute("id");e&&t.setAttribute("id",e)}(this.__originalNode,this.__style),this.__originalNode.parentNode.replaceChild(this.__style,this.__originalNode)):(!this.__alwaysInHead&&function(){for(var e=document.styleSheets,t=e.length;0<t;t--){var n=e[t-1];if(n&&n.ownerNode&&n.ownerNode.parentNode)return n.ownerNode.parentNode}}()||document.head).appendChild(this.__style),function(){this.__rules.length&&this.__style.appendChild(document.createTextNode(this.__rules.join("\n")))}.apply(this)},getSheet:function(){return this.__style.sheet}}),oe=!1,ie=!1,ae=[];function ue(e,t,n){e=e(n);return ae.includes(n)||re||t||e===n?e:e+","+n}function ce(e){var t=M({url:e,sync:!0});if(t.error){var n="[CSS LOADING ERROR] Cant load "+e;throw window.ajs&&window.ajs.log&&window.ajs.log(n),t.error.description=n,t.error.sheet=e,t.error}return t.xhr.responseText}function le(e){var t;return t=e.ownerNode?((t=e.ownerNode.href||e.ownerNode.getAttribute("x-href"))||"").replace(/^https:/,""):t}function se(e,a,u,c){var t,n,r;t=function(){[].map.call(document.styleSheets,function(e){return e}).forEach(function(e){if(e.ownerNode&&!e.ownerNode.__created&&!e.__updated&&"LINK"===e.ownerNode.tagName&&(!c.excludeStyles||!c.excludeStyles.test(e.href))){var t=e;e.__updated=!0;var n=le(e);if(e.href&&te.test(e.href))try{var r,o=function(){var t=e.href;try{return ce(t)}catch(e){if(oe)return ce(t=t.replace(ne,"/"));throw e}}();o&&((r=new V({"x-href":n,media:e.media.mediaText},e.ownerNode,e.__alwaysInHead)).setContent(o),r.apply(),(t=r.getSheet()).__updated=!0)}catch(e){if("function"==typeof u)return void u(e)}var i=new V({"x-href":n,media:e.media&&e.media.mediaText},t.ownerNode,e.__alwaysInHead);i.__updated=!0,ee(t,ue.bind(null,a,!1),n,function(e){i.insert(e.toString())},c),i.apply()}})},n=/^(https:)?\/\/[^/]+/,r=e.map(function(e){return e.replace(n,"")}),function e(){X.iterate(document.styleSheets,function(e){var t;"LINK"===e.ownerNode.tagName&&(t=le(e).replace(n,""),r=r.filter(function(e){return t!==e}))}),r.length?setTimeout(e,100):t()}()}function de(e,t,n){function r(e,t){return i(e)+(n=[],X.iterate(t,function(e,t){n.push(t+":"+e+";")}),"{"+n.join("\n")+"}");var n}var o=new V({},void 0,ie),i=ue.bind(null,t,n);return X.iterate(e,function(e,t){var n;/@(media|supports|document|page|keyframes|font-feature-values)/.test(t)?(n=[],X.iterate(e,function(e,t){n.push(r(t,e))}),o.insertBlock(t,n.join(""))):o.insert(r(t,e))}),o.apply(),o}var fe=function(e){e&&("boolean"==typeof e.justOneSelector&&(re=e.justOneSelector),"boolean"==typeof e.useRelativeProxy&&(oe=e.useRelativeProxy),"boolean"==typeof e.stylesAlwaysInHead&&(ie=e.stylesAlwaysInHead),e.justOneSelectorArr&&(ae=e.justOneSelectorArr))};function he(){return(he=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r,o=t[n];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function me(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var pe=1e3,ge=function(e){for(var t=0;t<10;t++)e.push(t.toString());for(t=0;t<25;t++)e.push(String.fromCharCode(97+t)),e.push(String.fromCharCode(65+t));return function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[--r],e[r]=e[n],e[n]=t;return e}(e)}([]),ve=ge.length,ye=function(){for(var e=[],t=0;e.length<5&&t<ge.length;t++)(0<e.length||!/[0-9]/.test(ge[t]))&&e.push(ge[t]);return e.join("")}();function _e(){return ye+function e(t){return(ve<=t?e((t/ve>>0)-1):"")+ge[t%ve>>0]}(pe++)}var we={enabled:!1},i=((t=Se.prototype).createElement=function(e){},t.getAllElements=function(){},Se),t=((c=Ne.prototype).injectDependencies=function(e){this.deps=e},c.setAttribute=function(e,t,n){},c.createElementFactory=function(){},c.createFragment=function(){},c.appendChild=function(e,t){},c.bakeFragment=function(e,t,n){},c.queryAllElements=function(e){},c.mountElementAt=function(e,t,n){},c.isComponent=function(e){return!1},c.decorateComponent=function(e,t,n){return e},Ne),be=function(i){function e(){for(var e,t=arguments,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=t[o];return(e=i.call.apply(i,[this].concat(r))||this).elements=[],e}me(e,i);var t=e.prototype;return t.createElement=function(e){e=document.createElement(e);return this.elements.push(e),e},t.getAllElements=function(){return this.elements},e}(i),c=function(e){function t(){return e.apply(this,arguments)||this}me(t,e);var n=t.prototype;return n.setAttribute=function(e,t,n){switch(t){case"id":case"className":e[t]=n;break;default:e.setAttribute(t,n)}},n.createElementFactory=function(){return new be},n.createFragment=function(){return document.createDocumentFragment()},n.appendChild=function(e,t){e.appendChild(t)},n.bakeFragment=function(e,t,n){e._allElements=t.getAllElements()},n.queryAllElements=function(e){return e._allElements},n.mountElementAt=function(e,t,n){n=e._allElements[n];n&&(t.parentNode.insertBefore(e,t),n.appendChild(t))},t}(t),xe=function(i){function e(){for(var e,t=arguments,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=t[o];return(e=i.call.apply(i,[this].concat(r))||this).elements=[],e}me(e,i);var t=e.prototype;return t.createElement=function(e){e={tag:e,attrs:{}};return this.elements.push(e),e},t.getAllElements=function(){return this.elements},e}(i),t=function(e){function t(){return e.apply(this,arguments)||this}me(t,e);var n=t.prototype;return n.setAttribute=function(e,t,n){"className"===t&&(t="class"),e.attrs=e.attrs||{},e.attrs[t]=n},n.createElementFactory=function(){return new xe},n.createFragment=function(){return{tag:"div",children:[],_isFragment:!0,attrs:{}}},n.appendChild=function(e,t){var n;e.children=e.children||[],t._isFragment?(n=e.children).push.apply(n,t.children):e.children.push(t)},n.bakeFragment=function(e,t,n){e._allElements=t.getAllElements(),void 0!==n&&(e.tag=n)},n.mountElementAt=function(e,t,n){var r=e._allElements[n];r.children=r.children||[],r.children.push(t),e._mountedAt=n,e._mountedAtChild=r.children.length-1},n.updateMountedElement=function(e,t){e._allElements[e._mountedAt].children[e._mountedAtChild]=t},n.isComponent=function(e){return!e.prototype},n.cloneFragment=function(e,t){void 0===t&&(t=[]);var n,r=e.children,o={_isFragment:e._isFragment,_mountedAt:e._mountedAt,_mountedAtChild:e._mountedAtChild,tag:e.tag,key:e.key,attrs:e.attrs};if(e._allElements?(o._isFragment=e._isFragment,o._mountedAt=e._mountedAt,o._mountedAtChild=e._mountedAtChild,o._allElements=t):t.push(o),r){o.children=[];for(var i=0;i<r.length;i++)n=this.cloneFragment(r[i],t),o.children.push(n)}return o},n.decorateComponent=function(e,n,r){var t=this.deps.feast,o=this,i=e.constructor!==Object?e.constructor:t.Block,a=e.createFragment||t.Block.prototype.createFragment;return e.constructor=function(){i.apply(this,arguments)},e.createFragment=function(){var e=a.apply(this,arguments);if(!we.enabled||!1===n.enabled||"function"==typeof n.enabled&&!1===n.enabled(this))return e;var t=this.constructor["180225_fragment"];if(t||(t=r(null,{},he({},n,{binding:"feast"})),this.constructor["180225_fragment"]=t),!t||!t.children||!t.children.length)return e;if(this.immutable&&e._isFragment)return e;t=o.cloneFragment(t);return o.updateMountedElement(t,e),t.events=e.events,t.key=e.key,e.events=void 0,e.key=void 0,t},e},t}(t),Ce={dom:new c,feast:new t},Ae={binding:"dom",tags:{div:100},attrs:{id:50,"data-bem":20,"data-mnemo":16,className:33},deps:{},unsafe:!1,minSize:0,maxSize:5,depth:5},Ee={};function Ne(){}function Se(){}function ke(){var e=_e();return Ee[e]=!0,e}function Ie(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r,o,i,a=[];for(o in e)if(i=void 0,(r=e[o]).length&&(r=e[o][0],i=e[o][1]),X.randomBoolean(r)&&(i="function"==typeof i?(n=[ke].concat(n),i.apply(void 0,n)):ke(),void 0!==i&&a.push({name:o,value:i}),t&&a.length===t))break;return o&&!a.length&&(i=("function"==typeof i?i:ke)(),a.push({name:o,value:i})),a}function je(e,t,o){o=he({},Ae,o);var i=Ce[o.binding]||Ce.dom;i.injectDependencies(o.deps);if("string"==typeof t){if(!e)return;t=X.toArray(e.querySelectorAll(t))}t=(t=void 0===t.length?[t]:t).map(function(e){var t=i.createElementFactory(),n=function e(t,n,r,o){for(var i,a=t.createFragment(),u=0,c=X.random(o.minSize,o.maxSize);u<c;u++)i=Ie(o.tags,1)[0].name,function(e,t,n,r){for(var o=Ie(n=n||Ae.attrs,0,[t]),i=0;i<o.length;i++)e.setAttribute(t,o[i].name,o[i].value);r&&!o.length&&e.setAttribute(t,r,ke())}(t,i=n.createElement(i),o.attrs,"className"),X.random(0,r)&&t.appendChild(i,e(t,n,r-1,o)),t.appendChild(a,i);return a}(i,t,o.depth,o),r=Ie(o.tags,1)[0].name;i.bakeFragment(n,t,r);t=t.getAllElements().length;return e&&t&&i.mountElementAt(n,e,X.random(0,t-1)),n});if(1===t.length)return t[0]}var Oe={isWelter:function(e){return void 0!==Ee[e]},wrap:function(e,t,n){n=n||Ae;try{if(!e)return je(null,t,n);if(e.nodeType)return je(e,t,n);if(0<=e.length){if(1===e.length)return je(e[0],t,n);X.toArray(e).forEach(function(e){return je(e,t,n)})}else console.warn('[Walter.wrap] this "context" not supported:',e)}catch(e){if(n.unsafe)throw e;console.error(e)}},detectComponentBinding:function(t){return Object.keys(Ce).find(function(e){return Ce[e].isComponent(t)})},decorateComponent:function(e,t){var n=this.detectComponentBinding(e),n=Ce[n];return n.injectDependencies(t.deps),n.decorateComponent(e,t,this.wrap)},getDefaultOptions:function(){return Ae}};function Fe(e){for(var t=arguments,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=t[o];var i,a,u=(i=r,a=Oe.getDefaultOptions(),i&&i.length?i.slice().reverse().reduce(function(e,t){return t(e)},a):a);function c(e){return Oe.decorateComponent(e,u)}return e?c(e):c}var Te,Pe,Re,Me=_e(),ze=0,He={names:{},reverse:{},wraps:{}},Be={},Ue=!1,Le=[],De=!1,$e=/([@#:.]*)([\w$-]+)/gi,We={},qe=(Pe=["top","right","bottom","left"],Re=["height","width","max-width","max-height","min-height","min-width"],(t=["margin","padding"]).forEach(function(t){Pe.forEach(function(e){Re.push(t+"-"+e)})}),Re.concat(Pe,t));function Xe(e){Ge(e)}function Ke(e,t){Ue&&e&&se(e,et,t,We)}function Ve(e,t){return de(e,et,t)}function Ge(e,t){e=X.extend({},We,e||{}),(Ue=(We=e).enable?!0:Ue)&&("boolean"==typeof e.translateAll&&(De=e.translateAll),e.match&&e.match instanceof Array&&0<e.match.length&&(Le=Le.concat(e.match),Te=new RegExp("^("+Le.join("|")+")"))),fe(e.styleSheetsOptions),e.randomize&&(e.randomize=!0===e.randomize?qe:e.randomize),e.links&&Ke(e.links,t),e.sheet&&Ve(e.sheet)}function Je(e,t){return(t?t+"@@@":"")+(e="mimic"===e?"mimic-key":e)}function Ye(e,t){if(!Ue)return e;var n=Je(e,t),r=He.names[n];return!r&&(De||Te&&Te.test(t||e))&&(r=_e(),He.names[n]=r,He.reverse[r]=e),r||e}function Ze(e,t){e=Qe(e);return t?Ye(e.elem,t)+(e.mod?"_"+Ye(e.mod,t):""):Ye(e.elem)+(e.mod?"_"+Ye(e.mod,e.elem):"")}function Qe(e){var t,n=(e?""+e:"").match(/^(.*?[^_])(_([^_]+))?$/);return n&&(e=n[1],t=n[3]),{elem:e,mod:t}}function et(e){return e.replace($e,function(e,t,n){return!t||/:/.test(t)?e:t+Ze(n)})}function tt(e,t){e=Qe(e);return t?(He.names[Je(e.elem,t)]||e.elem)+(e.mod?"_"+(He.names[Je(e.mod,t)]||e.mod):""):(He.names[e.elem]||e.elem)+(e.mod?"_"+(He.names[Je(e.mod,e.elem)]||e.mod):"")}function nt(e,t,n){return(e||"").toString().split(/\s+/).map(function(e){return t(e,n)}).join(" ")}function rt(e){e=Qe(e);return(He.reverse[e.elem]||e.elem)+(e.mod?"_"+(He.reverse[e.mod]||e.mod):"")}Xe.createWelterDecorator=function(o,i){return void 0===i&&(i=Fe),function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return i.apply(void 0,n.concat([o]))}},Xe.toggleWelterGlobal=function(e){we.enabled=e},Xe.prototype={constructor:Xe,setup:Ge,selector:function(e,t){var n=et(e);return t||e==n?n:n+", "+e},transform:function(e,t){return nt(e,Ze,t)},lookup:function(e,t){return nt(e,tt,t)},updateSheets:Ke,removeSheets:function(e){Ue&&e&&function(n){if((n=(n||[]).map(function(e){return(e||"").replace(/^https:/,"")})).length){var r=[];X.iterate(document.styleSheets,function(e){var t=le(e);t&&-1!==n.indexOf(t)&&r.push(e)});for(var e=r.length-1;0<=e;e--){var t=r[e];t.ownerNode.parentNode.removeChild(t.ownerNode)}}}(e)},insertSheet:Ve,reverse:function(e){return nt(e,rt)},isWelter:function(e){return Oe.isWelter(e)},wrap:function(e,n){var r,o;Ue&&((n=n||document)[Me]?r=n[Me]:(r=++ze,n[Me]=r),null==(o=Be[r])&&(o={}),e.forEach(function(e){var t;o[e]||(t=et(e),o[e]=t,Be[r]=o,Oe.wrap(n,t))}))},calcString:function(e,t){return Ue?X.calcString(e,t):e+t},removeCache:function(e){delete Be[e[Me]],delete e[Me]},setEnabled:function(e){delete We.enable,Ue=e},isEnabled:function(){return Ue}};function ot(e){this.base=e.base||"",this.counters=e.counters||[],this.opts=e}var it=$.util.randomInt,at=mr.switches,ut=new function(n){return function(e){var t=n.getUrl(e);if(!t)return e;if("xor"!==n.type)return n.endpoint+encodeURI(t);t=function(e,t){for(var n="",r=0;r<t.length;r++){var o=t.charCodeAt(r),i=r%e.length,i=e.charCodeAt(i);n+=String.fromCharCode(o^i)}return n}(n.key,t),t=("hex"===n.encode?function(e){for(var t="",n=0;n<e.length;n++)t+=(256+e.charCodeAt(n)).toString(16).slice(1);return t}:encodeURIComponent)(t);return n.endpoint+"/"+(n.keyId||"")+t}}({endpoint:"/"+mr.mimic.encryptPath,type:"xor",encode:"hex",key:mr.mimic&&mr.mimic.cryptoKey,keyId:mr.mimic&&mr.mimic.cryptoKeyId,getUrl:function(e){return e}}),ct=new Xe({links:mr._.STYLE,excludeStyles:mr._.DEV_WHITELINE?/devmail\.ru\/serve\/external\.css/:/limg\.imgsmail\.ru\/pkgs\/whiteline\/(\.|\d|latest)+\/external\.css/,match:["grid","grid__ccol","grid__lcol","grid__header","grid-middle","bar__grid","external","banner","news","i-pull","rectangle-banner","games","mediaprojects","tgb","informer","choose-city","horo-informer","rate","o-","i-","m-","weather","toolbar","notify","well","tabs","new-tgb-wrap"],randomize:!0}),lt=/^.+\/count\//,st=/rs?\.(mail\.ru|mradx\.net)/,dt=/^(https?:)\/\//;ot.prototype.add=function(e){var t;return(t=this.counters).push.apply(t,(e||"").split(",").filter(function(e){return!!e})),this},ot.prototype.send=function(){var t=this,e=this.counters.map(function(e){return t.fetchCounter(t.base+e)});return this.counters.length=0,Promise.all(e)},ot.send=function(e,t){return new ot(t).add(e).send()},ot.prototype.fetchCounter=function(r){var e,o;return this.opts.mimic&&(st.test(r)?o=ut(r.replace(dt,"/")):lt.test(this.base)&&(e=$.transport("/api-proxy/rb-mimic/v1/count/",{type:at.mimicAdsByXhr?"XHR":"JSONP",decorator:ut,json:!0}).fetch({params:this.getDirectParams(r),timeout:3e3}).then(function(e){if(200!==e.result.status)throw Error("invalid request")}))),(e=e||new Promise(function(e,t){var n=new Image;n.src=o||r,n.onload=e,n.onerror=t})).catch(function(){$.radar("adblock_stat_error").send()}),e},ot.prototype.getDirectParams=function(e){var t=e.split(/^\/count\//,1).pop(),e=this.opts,t={key:t,location:location.protocol+"//"+location.host+location.pathname,search_uid:$.cookie("searchuid").value(),type:"resplash",site_charset:"utf-8"};return void 0!==e.stat_id&&(t.stat_id=String(e.stat_id)),void 0!==e.page_id&&(t.page_id=Number(e.page_id)),void 0!==e.cid&&(t.cid=Number(e.cid)),document.referrer&&(t.referer=document.referrer),navigator.userAgent&&(t.agent=navigator.userAgent),"object"==typeof e.context&&(t.context={},void 0!==e.context.title&&(t.context.title=String(e.context.title)),void 0!==e.context.headers&&(t.context.headers=e.context.headers)),t};function ft(e,t){var n=document.createElement("div");return n.className=t?ct.transform(t):"",n.textContent=e||"",n}function ht(){return Math.random().toString(36).substring(Math.max(2,10*Math.random()))}function mt(e){return Array.apply(0,new Array(e)).map(function(e){return 0})}function pt(){return Math.random()<=.5}function gt(e,t){return mt(it(t=void 0===t?6:t,e=void 0===e?2:e)).reduce(function(e,t,n){return e+" news-rnd-"+(vt<=99?vt++:vt=0)},"")}var vt=0,yt=["alt","title"],_t=document.createElement("canvas"),wt=_t.getContext("2d");_t.height=_t.width=10;var bt={textWrap:function(e,t){void 0===t&&(t="");var n=e.textContent,r=n.length,o="",i=0;e.textContent="";for(var a,u=0;u<r;u++)o+=n.charAt(u),(Math.random()<.5||o.length>r/2||u===r-1)&&(e.appendChild(ft(ht(),"i-hide")),e.appendChild(ft(o,t)),o="",i++);ct.wrap(["."+t+":nth-child("+Math.ceil(i/2)+")"||"div"],e),t&&(a=e.querySelectorAll("div"),t=ct.transform(t),a.forEach(function(e){return e.classList.add(t)}))},radarOnCaught:function(e,t,n){void 0===n&&(n=1e3),e instanceof HTMLElement&&(e=function(){return!$.dom.isVisible(e)}),setTimeout(function(){e&&mr.mimic.radar("caught_"+t)},n)},hideAll:function(r,o){if(!mr._.STUCK_IN_POT)return r;var i=[],a=[];return o=o||document.body,Object.keys(r).forEach(function(e){var t,n=o.querySelector(e);n?(t=n.className+gt(1,Math.max(1,6-n.classList.length)),n.className=ct.transform(t),n.id&&(n.id=ct.transform(n.id)),r[e]&&a.push(e)):i.push(e)}),ct.wrap(a,o),i},insetRndImage:function(e,t,n){if(void 0===t&&(t=3),void 0===n&&(n=0),mr._.STUCK_IN_POT){var r;if(!n||pt()){wt.strokeText(ht(),0,0),(r=new Image).src=_t.toDataURL(),r.className=ct.transform("i-hide "+gt());for(var o=yt.length;o--&&pt();)r[yt[o]]=ht()}n<t&&[].forEach.call(e.children,function(e){bt.insetRndImage(e,t,n+1)}),r&&e.appendChild(r)}},spreadWide:function(n,r,o){void 0===r&&(r=1),void 0===o&&(o=5);var i=n.parentNode,a=n.nextSibling;if(i&&mr._.STUCK_IN_POT)for(var e=0;e<2;e++)!function(e){var t=document.createDocumentFragment();mt(it(o,r)).forEach(function(){var e=document.createElement("div");e.className=ct.transform(gt()),t.appendChild(e)}),e?i.insertBefore(t,n):a?i.insertBefore(t,a):i.appendChild(t)}(e)}},t={encrypt:ut,locator:ct,tools:bt,Counter:ot,honeyPot:B};document.addEventListener("mousedown",function(e){for(var t,n=[],r=e.target||e.srcElement;r.parentNode;)(t=r.getAttribute&&r.getAttribute("name"))&&n.push(t),r=r.parentNode;n.length&&p(n.join(","))}),o.default.util.extend(r.default,{counter:p,retarget:function(e){m(l("https://ad.mail.ru/i"+e+".gif"))},honeyPot:t.honeyPot}),o.default.util.logger(o.default.radar);B=o.default.radar("adblock");t.radar=B.send,t.rLog=B.log,o.default.util.extend(r.default.mimic,t),document.addEventListener("visibilitychange",function(){"IFRAME"===document.activeElement.tagName.toUpperCase()&&window.focus()}),window.mr=r.default}(mr,$);
