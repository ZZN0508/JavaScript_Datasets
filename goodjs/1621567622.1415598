!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(4);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(7),o=n(8),r=n(9),a=n(11);e.exports=function(e,t){return i(e)||o(e,t)||r(e,t)||a()}},function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n},writable:!0,configurable:!0})},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}},function(e,t,n){var i=n(10);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var i=n(2),o=n(13).f,r=Function.prototype,a=r.toString,s=/^\s*function ([^ (]*)/;i&&!("name"in r)&&o(r,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){var i=n(2),o=n(14),r=n(18),a=n(19),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(2),o=n(4),r=n(15);e.exports=!i&&!o((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(16),o=n(3),r=i.document,a=o(r)&&o(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(17))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(3);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var i=n(3);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";n.r(t);n(6);var i=n(0),o=n.n(i),r=n(5),a=n.n(r),s=n(1),c=n.n(s),l=function(){function e(t,n,i){o()(this,e),this.init=this.init.bind(this),this.initPixel=this.initPixel.bind(this),this.initFBEvents=this.initFBEvents.bind(this),this.window=t,this.localStorageHandler=n,this.logger=i,this.queue=[]}return c()(e,[{key:"init",value:function(e,t,n){this.initFBEvents(this.window);var i=this;this.fbPixelId=e,this.applyLDU=!0,!1===n&&(this.applyLDU=!1),t&&window.snowplowKW?window.snowplowKW((function(){var e=this.cf;i.domainUserId=e.getDomainUserId(),i.initPixel()})):i.initPixel()}},{key:"initFBEvents",value:function(e){var t,n,i,o,r,a;t=e,n=e.document,i="script",t.fbq||(o=t.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},t._fbq||(t._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(r=n.createElement(i)).async=!0,r.src="//connect.facebook.net/en_US/fbevents.js",(a=n.getElementsByTagName(i)[0]).parentNode.insertBefore(r,a))}},{key:"initPixel",value:function(){var e={};this.domainUserId&&(e.external_id=this.domainUserId),!0===this.applyLDU?(this.logger.log("FB Pixel: Applying LDU"),this.window.fbq("dataProcessingOptions",["LDU"],0,0)):(this.logger.log("FB Pixel: LDU disabled"),this.window.fbq("dataProcessingOptions",[])),this.logger.log("FB Pixel: Initializing pixel ".concat(this.fbPixelId)),this.window.fbq("init",this.fbPixelId,e),this.emptyQueue()}},{key:"emptyQueue",value:function(){this.queue&&(this.queue.forEach(function(e){var t=a()(e,3),n=t[0],i=t[1],o=t[2];this.handleFireFbEvent(n,this.fbPixelId,i,o)}.bind(this)),this.queue=null)}},{key:"sendCustom",value:function(e,t){this.queue?this.queue.push(["trackSingleCustom",e,t]):this.handleFireFbEvent("trackSingleCustom",this.fbPixelId,e,t)}},{key:"send",value:function(e,t){this.queue?this.queue.push(["trackSingle",e,t]):this.handleFireFbEvent("trackSingle",this.fbPixelId,e,t)}},{key:"handleFireFbEvent",value:function(e,t,n,i){var o=null!=i?i.eventID:null,r=null!=i?i.fireOnce:null,a="string"==typeof o||"number"==typeof o;null!=i&&delete i.fireOnce,a&&!0===r?this.fireFbEventOnce(e,t,n,o,i):this.fireFbEvent(e,t,n,i)}},{key:"fireFbEvent",value:function(e,t,n,i){this.logger.log("fbq(".concat(e,", ").concat(t,", ").concat(n,", ").concat(JSON.stringify(i),")")),this.window.fbq(e,t,n,i)}},{key:"fireFbEventOnce",value:function(e,t,n,i,o){var r="kw_fb_events_fire_once_".concat(n,"_").concat(i),a=this.localStorageHandler.getStoredObject(r);this.logger.log("Indicated fireOnce FB event eventName: ".concat(n,", eventID: ").concat(i)),1===a?this.logger.log("Not firing - event was fired previously"):(this.logger.log("First time, firing the event"),this.fireFbEvent(e,t,n,o),this.localStorageHandler.storeObject(r,1))}}]),e}(),u=function e(){o()(this,e),this.appendScriptToDom=function(e,t,n,i,o,r,a){e[o]||(e.GlobalSnowplowNamespace=e.GlobalSnowplowNamespace||[],e.GlobalSnowplowNamespace.push(o),e[o]=function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].q=e[o].q||[],r=t.createElement(n),a=t.getElementsByTagName(n)[0],r.async=1,r.src=i,a.parentNode.insertBefore(r,a))},this.snowplowVersion=function(){var e=this.snowplowSrc&&this.snowplowSrc.match(/sp-(\d+\.\d+\.\d+)\.js/);return e&&e[1]},this.addGlobalContexts=function(e){"2.10.2"===this.snowplowVersion()&&this.winObj.snowplowKW("addGlobalContexts",e)},this.initSnowplow=function(e,t,n,i,o,r){i=i||30,this.winObj=e,this.snowplowSrc=r||"//dc8xl0ndzn2cb.cloudfront.net/sp.js",this.appendScriptToDom(e,e.document,"script",this.snowplowSrc,"snowplowKW"),e.snowplowKW("newTracker","cf","pixel.keywee.co",{appId:t,cookieDomain:n,eventMethod:"get"}),e.snowplowKW("setVisitorCookieTimeout",33696e3),o&&e.snowplowKW("enableActivityTracking",i,i)}},h=function(e){var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),i=e.getDate().toString();return t+(n[1]?n:"0"+n[0])+(i[1]?i:"0"+i[0])},f=new Date,g=h(f),d=h(new Date((new Date).setDate(f.getDate()-30))),p=h(new Date(f.getFullYear(),f.getMonth(),1)),w=function(e){return+(Math.round(e+"e+2")+"e-2")},y=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},v=null,S=null,k=null,m=null,b=function(){return S.getStoredObject("keyweeHistory")},E=function(e){S.storeObject("keyweeHistory",e)},_=function(e){var t,n,i=v.document.title,o=v.location.href.indexOf("kwp_4=")>0,r=(t=e||g,b()[t]||{date:t});return r.categories||(r.categories={}),r.categories.general||(r.categories.general={articles_read:0,keywee_articles_read:0,time_spent:0,category:"general"}),(n=r.categories.general).last_visited_article!==i&&(n.articles_read++,o&&n.keywee_articles_read++,n.last_visited_article=i),function(e,t){var n=b();n[e]=t,E(n)}(e||g,r),r},P=function(e,t){var n=b();return function(e,t,n){return Object.keys(e).filter((function(e){return e>=t&&(!n||e<=n)}))}(n,e,t).map((function(e){return n[e]}))},C=function(){var e;_(),e=function(){var e=P(d),t=P(p),n=P(g,g),i=k.getAndUpdateSessionData(new Date),o=function(e){return 1===e.length?y(e[0].categories):e.reduce((function(e,t){return e.concat(y(t.categories))}),[])},r=function(e,t){return 1===e.length?e[0][t]:e.reduce((function(e,n){return e+n[t]}),0)},a=o(e),s=o(t),c=r(o(n),"keywee_articles_read"),l={noad30:e.length,noadcm:t.length,nokart:c,pvps:i.pageViews,slensec:i.sessionLengthSeconds};return["articles_read","keywee_articles_read","time_spent"].forEach((function(e){var t=function(e){return e.split("_").map((function(e){return e[0]})).join("")}(e);[[t+"30d",a],[t+"cm",s]].forEach((function(t){var n=t[0],i=t[1],o=r(i,e);l[n]=w(o)}))})),l=function(e){return e.kar30d>0&&0===e.nokart?e.kru=1:e.kru=0,e}(l)}(),m.sendCustom("KWCEPV",e),m.send("PageView")},I=function(e,t,n,i){var o,r,a;m=i,v=e,S=n,k=t,a={},p<(r=d)&&(r=p),o&&(r=o),P(r).forEach((function(e){a[e.date]=e})),E(a)},O=null,T=function(e,t,n,i){var o,r,a,s,c,l,u=(o=window.pageYOffset||document.documentElement.scrollTop,r=document.body,a=document.documentElement,s=window.innerHeight,c=Math.max(r.scrollHeight,r.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),w(Math.min(100,o/(c-s)*100))),h=null,g=u!==O,d=w((new Date-f)/6e4);if(g&&!(d>30)){h={tsop:d,lop:u,noaip:(l=document.getElementsByTagName("iframe"),Array.prototype.slice.call(l).filter((function(e){return e.dataset.googleContainerId})).length),noims:e.getNumberImagesViewed()},t&&(h.erps=t.getEstimatedRevPerSession());var p=i.getFirstTimeElapsedSessionDurationThresholds();p&&p.forEach((function(e){h["slen".concat(e)]=1})),n.sendCustom("KWCEPA",h),O=u}},x=function(e,t,n,i,o){var r=1e3*(e=e||30);setInterval(T.bind(null,t,n,i,o),r)},j=function(){function e(t,n){o()(this,e),this.document=t,this.domain=n}return c()(e,[{key:"getCookie",value:function(e){var t=("; "+this.document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}},{key:"createCookie",value:function(e,t,n){var i,o;if(n){var r=new Date;r.setTime(r.getTime()+864e5*n),i="; expires="+r.toGMTString()}else i="";o=e+"="+t+i+"; path=/;",this.domain&&(o=o+" Domain="+this.domain),this.document.cookie=o}}]),e}(),H=function(){function e(t,n){o()(this,e),this.localStorageHandler=t,this.window=n,this.document=n.document}return c()(e,[{key:"getNumberImagesViewed",value:function(){var e=this.localStorageHandler.getStoredObject("imagesInfo"),t=e["kw.images_storage"],n=e["kw.current_page_url"],i=this.document.URL,o=e["kw.max_images_per_page"],r=0,a=0;t&&(a=t),o&&(r=o);var s=this.getCurrentAmountOfImages();if(n===i){if(!(s>r))return a;a=a-r+s}else a+=s,e["kw.current_page_url"]=i;return e["kw.images_storage"]=a,e["kw.max_images_per_page"]=s,this.localStorageHandler.storeObject("imagesInfo",e),a}},{key:"getCurrentAmountOfImages",value:function(){var e=this.window,t=this.document.getElementsByTagName("img");return Array.prototype.slice.call(t).filter((function(e){return e.getBoundingClientRect().top<0})).filter((function(t){return t.height/e.screen.availHeight*100>10&&t.width/e.screen.availWidth*100>10})).length}}]),e}(),U=[30,60,90,120,180],D=function(){function e(t,n){o()(this,e),this.cookieHandler=t,this.localStorageHandler=n}return c()(e,[{key:"initSessionData",value:function(e){this.cookieHandler.createCookie("kw.session_ts",e,1/48),this.setPageViewsPerSessionCount(1)}},{key:"setPageViewsPerSessionCount",value:function(e){this.cookieHandler.createCookie("kw.pv_session",e,1)}},{key:"getCurrentPageViewPerSession",value:function(){var e=this.cookieHandler.getCookie("kw.pv_session"),t=0;return e&&(t=parseInt(e)),t}},{key:"getAndUpdateSessionData",value:function(e){var t=e.getTime(),n=1,i=0,o=this.getExisitingSessionStart();o?(n=this.getCurrentPageViewPerSession()+1,i=Math.floor((t-o)/1e3),this.setPageViewsPerSessionCount(n)):(this.initSessionData(t),this.localStorageHandler.clearLocalStorage("imagesInfo"),this.localStorageHandler.clearLocalStorage("kw.elapsed_session_duration_thresholds"));return{pageViews:n,sessionLengthSeconds:i}}},{key:"getExisitingSessionStart",value:function(){var e=this.cookieHandler.getCookie("kw.session_ts"),t=null;return e&&(t=parseInt(e)),t}},{key:"getFirstTimeElapsedSessionDurationThresholds",value:function(){var e=this.getAndUpdateSessionData(new Date).sessionLengthSeconds,t=this.localStorageHandler.getStoredObject("kw.elapsed_session_duration_thresholds")||{},n=[];return U.forEach((function(i){e>=i&&!t[i]&&(t[i]=!0,n.push(i))})),this.localStorageHandler.storeObject("kw.elapsed_session_duration_thresholds",t),n}}]),e}(),A=(n(12),function(){function e(t,n){o()(this,e),this.logger=n,this.trySetLocalStorage(t)}return c()(e,[{key:"trySetLocalStorage",value:function(e){this.isStorageValid(e)?(this.logger.log("Storage is valid"),this.storage=e.localStorage):(this.logger.log("Storage is not valid"),this.storage=!1)}},{key:"isStorageValid",value:function(e){try{var t=(new Date).toString(),n=e.localStorage;n.setItem(t,t);var i=n.getItem(t)===t;return n.removeItem(t),i}catch(e){return this.handleStorageError(e),!1}}},{key:"clearLocalStorage",value:function(e){try{this.storage&&this.storage.removeItem(e)}catch(e){this.handleStorageError(e)}}},{key:"storeObject",value:function(e,t){try{this.storage&&this.storage.setItem(e,JSON.stringify(t))}catch(e){this.handleStorageError(escape)}}},{key:"getStoredObject",value:function(e){try{var t=this.storage&&this.storage.getItem(e);return t?JSON.parse(t):{}}catch(e){return this.handleStorageError(e),{}}}},{key:"handleStorageError",value:function(e){try{"NS_ERROR_FILE_CORRUPTED"==e.name?console.error("NS_ERROR_FILE_CORRUPTED error: It looks like your browser storage has been corrupted. Please clear your storage by going to Tools -> Clear Recent History -> Cookies and set time range to 'Everything'. This will remove the corrupted browser storage across all sites."):"QuotaExceededError"==e.name?console.error("QuotaExceededError, Keywee Tracker will not be able to use Local Storage properly."):console.error(e)}catch(e){console.error(e)}}}]),e}()),F=function(){function e(t){o()(this,e),this.cookieHandler=t}return c()(e,[{key:"fbIdentifierCtx",value:function(){var e=this.cookieHandler.getCookie("_fbp")||"",t=this.cookieHandler.getCookie("_fbc")||"",n=this.cookieHandler.getCookie("keywee.kwp_4")||"";return{schema:"iglu:co.keywee/custom_fb_identifiers/jsonschema/1-0-0",data:{fbp:e.toString(),fbc:t.toString(),kw_aid:n.toString()}}}}]),e}(),N=function(){function e(t){o()(this,e);var n=t.location.href,i=new RegExp("kw_log_level=1");this.enabled=i.test(n)}return c()(e,[{key:"log",value:function(e){this.enabled&&console.log(e)}},{key:"error",value:function(e){this.enabled&&console.error(e)}},{key:"warn",value:function(e){this.enabled&&console.warn(e)}}]),e}(),q=function(){function e(t,n){o()(this,e),this.initialized=!1,this.logger=n,this.win=t,this.PICO_STATUSES_ANONYMOUS="anonymous",this.PICO_STATUSES_EXCLUDED="excluded",this.PICO_STATUSES_REGISTERED="registered",this.PICO_STATUSES_PAYING="paying"}return c()(e,[{key:"ensureInitialized",value:function(){if(!0!==this.initialized){this.logger.log("Initializing Pico Handler");var e=this;this.win.addEventListener("pico.loaded",(function(){e.logger.log("Handling 'pico.loaded' event"),e.attachPicoEventsHandler()})),this.initialized=!0}}},{key:"attachPicoEventsHandler",value:function(){var e=document.querySelector(".PicoSignal");if(e){this.logger.log("Found Pico signal element");var t=e.getAttribute("data-pico-status");this.handlePicoStatus(t);var n=this;this.observer=new MutationObserver((function(t){t.forEach((function(t){if("attributes"==t.type&&"data-pico-status"==t.attributeName){var i=e.getAttribute("data-pico-status");n.handlePicoStatus(i)}}))})),this.observer.observe(e,{attributes:!0})}else this.logger.log("Could not find Pico signal element")}},{key:"registerHandler",value:function(e,t){switch(this.ensureInitialized(),this.logger.log("Registering Pico handler for status: ".concat(e)),e){case this.PICO_STATUSES_ANONYMOUS:this.onAnonymous=t;break;case this.PICO_STATUSES_EXCLUDED:this.onExcluded=t;break;case this.PICO_STATUSES_REGISTERED:this.onRegistered=t;break;case this.PICO_STATUSES_PAYING:this.onPaying=t;break;default:this.logger.warn("Unknown Pico status: ".concat(e))}}},{key:"handlePicoStatus",value:function(e){this.logger.log("Handling Pico status: ".concat(e));var t=null;switch(e){case this.PICO_STATUSES_ANONYMOUS:t=this.onAnonymous;break;case this.PICO_STATUSES_EXCLUDED:t=this.onExcluded;break;case this.PICO_STATUSES_REGISTERED:t=this.onRegistered;break;case this.PICO_STATUSES_PAYING:t=this.onPaying;break;default:this.logger.warn("Unknown Pico status: ".concat(e))}if(t){var n=0,i={};try{this.win.Pico&&this.win.Pico.user&&this.win.Pico.user.email?(i=this.win.Pico.user,n=this.getStringHashCode(i.email)):this.logger.warn("No Pico user found")}catch(e){this.logger.error("Error trying to generate hash code for pico user: ".concat(e))}t({userID:n,user:i})}else this.logger.log("No handler was found for Pico status: ".concat(e))}},{key:"getStringHashCode",value:function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}}]),e}();if(window.kwa){var R=new function e(t){o()(this,e),this.trackingInitiated=!1,this.logger=new N(t),this.picoHandler=new q(t,this.logger),this.snowplowManager=new u,this.localStorageHandler=new A(t,this.logger),this.facebookEventSender=new l(t,this.localStorageHandler,this.logger),this.setKeyweeAdId=function(e){var n=new RegExp("kwp_4=([^&#]*)","i").exec(t.location.href),i=n&&unescape(n[1])||"";""!==i&&this.cookieHandler.createCookie("keywee.kwp_4",i,30),t.snowplowKW&&t.snowplowKW("setUserIdFromCookie","keywee.kwp_4")},this.getConfig=function(e){var n=t.document.createElement("script");n.type="text/javascript",n.src="//cdn.keywee.co/config/"+e+".js",n.async=!0,this.testConfigPath&&(n.src=this.testConfigPath),this.logger.log("Fetching config from: ".concat(n.src)),t.document.getElementsByTagName("head")[0].appendChild(n)},this.initiateTracking=function(){if(!0!==this.trackingInitiated){var e=this.config,n=this.testDomain||e.domain;this.cookieHandler=new j(t.document,n);var i=new H(this.localStorageHandler,t),o=new D(this.cookieHandler,this.localStorageHandler);if(e.appId){this.snowplowManager.initSnowplow(t,e.appId,n,this.pixelPeriodTimeSec,e.ping_activity,e.snowplow_src),this.setKeyweeAdId(n);var r=new F(this.cookieHandler).fbIdentifierCtx();this.snowplowManager.addGlobalContexts([r])}e.fbPixelId&&(this.facebookEventSender.init(e.fbPixelId,e.eid,this.initOptions.applyLDU),e.bt,x(this.pixelPeriodTimeSec,i,null,this.facebookEventSender,o),I(t,o,this.localStorageHandler,this.facebookEventSender)),this.sendPageView(),this.trackingInitiated=!0}else this.logger.log("initiateTracking: Tracker was previously initialized")},this.loadConfig=function(e){!0!==this.trackingInitiated?(this.config=Object.assign(e,this.initOptions),(e.in_eu||!1)&&!this.trackEU||this.initiateTracking()):this.logger.log("loadConfig: Tracker was previously initialized")},this.init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.trackingInitiated?(this.logger.log("Init called with appId: ".concat(e,", config: ").concat(t)),this.initOptions=t,this.pixelPeriodTimeSec=t.pixelPeriodTimeSec,this.testDomain=t.testDomain,this.testConfigPath=t.testConfigPath,void 0===t.trackEU?this.trackEU=!0:this.trackEU=t.trackEU,this.getConfig(e)):this.logger.log("init: Tracker was previously initialized")},this.sendPageView=function(){t.snowplowKW&&t.snowplowKW("trackPageView"),this.config.fbPixelId&&C(this.config.fbPixelId)},this.setCustomUrl=function(e){t.snowplowKW&&t.snowplowKW("setCustomUrl",e)},this.applyFunc=function(){try{var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),t=e.slice(1),n=e[0];if("initialize"===n)this.init.apply(this,t);else if("sendPageView"===n)this.sendPageView.apply(this,t);else if("loadConfig"===n)this.loadConfig.apply(this,t);else if("setCustomUrl"===n)this.setCustomUrl.apply(this,t);else if("sendCustomFBEvent"===n)this.facebookEventSender.sendCustom.apply(this.facebookEventSender,t);else if("sendFBEvent"===n)this.facebookEventSender.send.apply(this.facebookEventSender,t);else if("log"===n)this.logger.log.apply(this.logger,t);else if("onPicoStatus"===n)this.picoHandler.registerHandler.apply(this.picoHandler,t);else if("isCreated"===n)return!0}catch(t){n=e[0],console.log("Error in keywee-analytics-tracker occurred trying to run the function ".concat(n,": "),t)}}}(window);if(window.kwa.q)window.kwa.q.forEach((function(e){R.applyFunc.apply(R,e)})),window.kwa=R.applyFunc.bind(R);else console.warn("Keywee Tracker Queue has not been created yet, skipping and waiting for kwa('initialize')"),1==window.kwa("isCreated")?console.warn("Keywee Tracker has already been initialized. Please check if you have more than one reference to 'cdn.keywee.co/dist/analytics.min.js' on the page"):window.kwa=R.applyFunc.bind(R)}else console.warn("Keywee Tracker script is not referenced correctly. Please check if you have an explicit <script src='cdn.keywee.co/dist/analytics.min.js'/> on your page")}]);
//# sourceMappingURL=analytics.min.js.map