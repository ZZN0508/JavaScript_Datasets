!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@enterprise/shared/core",["exports","@angular/core","@angular/common","@angular/router","@angular/common/http","rxjs","rxjs/operators","@angular/platform-browser"],t):t(((e=e||self).enterprise=e.enterprise||{},e.enterprise.shared=e.enterprise.shared||{},e.enterprise.shared.core={}),e.ng.core,e.ng.common,e.ng.router,e.ng.common.http,e.rxjs,e.rxjs.operators,e.ng.platformBrowser)}(this,(function(e,t,n,r,i,o,a,c){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function e(t,n,r){return t instanceof RegExp?function(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return e}(t,n):Array.isArray(t)?function(t,n,r){for(var i=[],o=0;o<t.length;o++)i.push(e(t[o],n,r).source);return new RegExp("(?:"+i.join("|")+")",w(r))}(t,n,r):function(e,t,n){return b(g(e,n),t,n)}(t,n,r)},l=g,f=m,h=b,d=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function g(e,t){for(var n,r=[],i=0,o=0,a="",c=t&&t.delimiter||"/",s=t&&t.delimiters||"./",u=!1;null!==(n=d.exec(e));){var p=n[0],l=n[1],f=n.index;if(a+=e.slice(o,f),o=f+p.length,l)a+=l[1],u=!0;else{var h="",g=e[o],m=n[2],w=n[3],b=n[4],C=n[5];if(!u&&a.length){var S=a.length-1;s.indexOf(a[S])>-1&&(h=a[S],a=a.slice(0,S))}a&&(r.push(a),a="",u=!1);var I=h||c,P=w||b;r.push({name:m||i++,prefix:h,delimiter:I,optional:"?"===C||"*"===C,repeat:"+"===C||"*"===C,partial:""!==h&&void 0!==g&&g!==h,pattern:P?y(P):"[^"+v(I)+"]+?"})}}return(a||o<e.length)&&r.push(a+e.substr(o)),r}function m(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=r&&r.encode||encodeURIComponent,a=0;a<e.length;a++){var c=e[a];if("string"!=typeof c){var s,u=n?n[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(s=o(u[p],c),!t[a].test(s))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');i+=(0===p?c.prefix:c.delimiter)+s}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"));c.partial&&(i+=c.prefix)}else{if(s=o(String(u),c),!t[a].test(s))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+s+'"');i+=c.prefix+s}}else i+=c}return i}}function v(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function y(e){return e.replace(/([=!:$/()])/g,"\\$1")}function w(e){return e&&e.sensitive?"":"i"}function b(e,t,n){for(var r=(n=n||{}).strict,i=!1!==n.start,o=!1!==n.end,a=v(n.delimiter||"/"),c=n.delimiters||"./",s=[].concat(n.endsWith||[]).map(v).concat("$").join("|"),u=i?"^":"",p=0===e.length,l=0;l<e.length;l++){var f=e[l];if("string"==typeof f)u+=v(f),p=l===e.length-1&&c.indexOf(f[f.length-1])>-1;else{var h=f.repeat?"(?:"+f.pattern+")(?:"+v(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;t&&t.push(f),u+=f.optional?f.partial?v(f.prefix)+"("+h+")?":"(?:"+v(f.prefix)+"("+h+"))?":v(f.prefix)+"("+h+")"}}return o?(r||(u+="(?:"+a+")?"),u+="$"===s?"$":"(?="+s+")"):(r||(u+="(?:"+a+"(?="+s+"))?"),p||(u+="(?="+a+"|"+s+")")),new RegExp(u,w(n))}p.parse=l,p.compile=function(e,t){return m(g(e,t))},p.tokensToFunction=f,p.tokensToRegExp=h;var C=/~/,S=/~[01]/g;function I(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function P(e){return C.test(e)?e.replace(S,I):e}function j(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e))return e;throw new Error("Invalid JSON pointer.")}function x(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var n=(t=j(t)).length;if(1===n)return e;for(var r=1;r<n;){if(e=e[P(t[r++])],n===r)return e;if("object"!=typeof e)return}}function A(e,t,n){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=j(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,n){for(var r,i,o=1,a=t.length;o<a&&(r=P(t[o++]),i=a>o,void 0===e[r]&&(Array.isArray(e)&&"-"===r&&(r=e.length),i&&(e[r]=""!==t[o]&&t[o]<1/0||"-"===t[o]?[]:{})),i);)e=e[r];var c=e[r];return void 0===n?delete e[r]:e[r]=n,c}(e,t,n)}var E={get:x,set:A,compile:function(e){var t=j(e);return{get:function(e){return x(e,t)},set:function(e,n){return A(e,t,n)}}}};function M(e,n){if(1&e&&t.ÉµÉµelement(0,"bre-cms-component",3),2&e){var r=t.ÉµÉµnextContext().$implicit;t.ÉµÉµproperty("configuration",r)}}function T(e,n){if(1&e&&t.ÉµÉµelement(0,"bre-container",3),2&e){var r=t.ÉµÉµnextContext().$implicit;t.ÉµÉµproperty("configuration",r)}}function k(e,n){1&e&&(t.ÉµÉµelementContainerStart(0,1),t.ÉµÉµtemplate(1,M,1,1,"bre-cms-component",2),t.ÉµÉµtemplate(2,T,1,1,"bre-container",2),t.ÉµÉµelementContainerEnd()),2&e&&(t.ÉµÉµproperty("ngSwitch",n.$implicit.type),t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngSwitchCase","COMPONENT"),t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngSwitchCase","CONTAINER_COMPONENT"))}function R(e,n){1&e&&t.ÉµÉµelement(0,"bre-base-component",3),2&e&&t.ÉµÉµproperty("configuration",n.$implicit)}function O(e,n){if(1&e&&(t.ÉµÉµelementContainerStart(0),t.ÉµÉµtemplate(1,R,1,1,"bre-base-component",2),t.ÉµÉµelementContainerEnd()),2&e){var r=t.ÉµÉµnextContext();t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngForOf",null==r.configuration?null:r.configuration.components)}}function _(e,n){if(1&e&&(t.ÉµÉµelementStart(0,"div",6),t.ÉµÉµelement(1,"bre-base-component",3),t.ÉµÉµelementEnd()),2&e){var r=n.$implicit;t.ÉµÉµadvance(1),t.ÉµÉµproperty("configuration",r)}}function L(e,n){if(1&e&&(t.ÉµÉµelementStart(0,"div",4),t.ÉµÉµtemplate(1,_,2,1,"div",5),t.ÉµÉµelementEnd()),2&e){var r=t.ÉµÉµnextContext();t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngForOf",null==r.configuration?null:r.configuration.components)}}function D(e,t){}var U=["buttonElm"];function N(e,n){if(1&e&&t.ÉµÉµelement(0,"bre-base-component",2),2&e){var r=t.ÉµÉµnextContext();t.ÉµÉµproperty("configuration",r.configuration)("renderComponent",r.renderComponent)}}function F(e,n){if(1&e&&t.ÉµÉµelement(0,"bre-container",6),2&e){var r=t.ÉµÉµnextContext(2);t.ÉµÉµproperty("configuration",r.configuration)}}function q(e,n){if(1&e&&t.ÉµÉµelement(0,"bre-base-component",6),2&e){var r=t.ÉµÉµnextContext(2);t.ÉµÉµproperty("configuration",r.configuration)}}function B(e,n){if(1&e&&t.ÉµÉµelement(0,"bre-cms-component",6),2&e){var r=t.ÉµÉµnextContext(2);t.ÉµÉµproperty("configuration",r.configuration)}}function G(e,n){if(1&e&&(t.ÉµÉµelementContainerStart(0,3),t.ÉµÉµtemplate(1,F,1,1,"bre-container",4),t.ÉµÉµtemplate(2,q,1,1,"bre-base-component",4),t.ÉµÉµtemplate(3,B,1,1,"bre-cms-component",5),t.ÉµÉµelementContainerEnd()),2&e){var r=t.ÉµÉµnextContext();t.ÉµÉµproperty("ngSwitch",null==r.configuration?null:r.configuration.type),t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngSwitchCase","CONTAINER_COMPONENT"),t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngSwitchCase","CONTAINER_ITEM_COMPONENT")}}function z(e){return e.scheme+"://"+e.hostname+":"+e.port}var V=function(){function e(){var e;this.apiUrls=((e={live:{scheme:"http",hostname:"localhost",port:8080,baseUrl:"http://localhost:8080",contextPath:"site",channelPath:"",previewPrefix:"_cmsinternal",apiPath:"resourceapi",apiComponentRenderingUrlSuffix:"_hn:type=component-rendering&_hn:ref="}}).preview=Object.assign({},e.live),e)}return e.prototype.getApiUrls=function(){return this.apiUrls},e.prototype.setApiUrls=function(e){void 0===e&&(e={}),this.apiUrls=function(e,t){return t&&t.preview&&(e.preview=u({},e.preview,t.preview)),t&&t.live&&(e.live=u({},e.live,t.live)),e.preview.baseUrl=z(e.preview),e.live.baseUrl=z(e.live),e}(this.apiUrls,e),this.compilePathRegExp(this.apiUrls)},e.prototype.compilePathRegExp=function(e){this.compiledPathRegexp=function(e){var t=[];return{regexpKeys:t,regexp:p((""!==e.live.contextPath?"/:contextPath("+e.live.contextPath+")?":"")+"/:previewPrefix("+e.live.previewPrefix+")?"+(""!==e.live.channelPath?"/:channelPath("+e.live.channelPath+")?":"")+"/:pathInfo*",t)}}(e)},e.prototype.getCompiledPathRegexp=function(){return this.compiledPathRegexp},e}(),$=function(e){function n(){return e.call(this)||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.ctorParameters=function(){return[]},n.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n.Éµfac=function(e){return new(e||n)},n.Éµprov=t.ÉµÉµdefineInjectable({token:n,factory:function(e){return n.Éµfac(e)},providedIn:"root"}),n}(V),H=function(){function e(){this.componentMappings={}}return e.prototype.getComponentMappings=function(){return this.componentMappings},e.prototype.setComponentMappings=function(e){this.componentMappings=e},e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e.Éµfac=function(t){return new(t||e)},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:function(t){return e.Éµfac(t)},providedIn:"root"}),e}(),K=function(e,t,n){this.path=e,this.preview=t,this.query=n};var W=new t.InjectionToken("request"),Q=function(){function e(e,t,n){this.apiUrlsService=e,this.platformId=t,this.request=n,this.debugging=!1}return e.prototype.getDebugging=function(){return this.debugging},e.prototype.setDebugging=function(e){this.debugging=e},e.prototype.isPreviewRequest=function(){return this.requestContext.preview},e.prototype.getPath=function(){return this.requestContext.path},e.prototype.getQuery=function(){return this.requestContext.query},e.prototype.parseUrlPath=function(e){var t,r,i,o="";n.isPlatformBrowser(this.platformId)&&(o=void 0===(t=(window&&window.location||{}).hostname)?"":t),(n.isPlatformWorkerApp(this.platformId)||n.isPlatformWorkerUi(this.platformId))&&(o=void 0===(r=(self&&self.location||{}).hostname)?"":r),n.isPlatformServer(this.platformId)&&(o=void 0===(i=(this.request||{}).hostname)?"":i),this.parseRequest({hostname:o,path:e})},e.prototype.parseRequest=function(e){var t=this.apiUrlsService.getApiUrls(),n=this.apiUrlsService.getCompiledPathRegexp();this.requestContext=function(e,t,n,r){var i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e.path.split("?",2),2),o=i[1],a=void 0===o?"":o,c=t.regexp.exec(i[0]),s=function(e,t){if(e){var n=t.findIndex((function(e){return"pathInfo"===e.name}));return void 0!==e[n+1]?e[n+1]:""}return""}(c,t.regexpKeys),u=function(e,t,n,r){return function(e){var t=e.indexOf("?");if(-1!==t){var n=e.substring(t);if(-1!==n.indexOf("?bloomreach-preview=true")||-1!==n.indexOf("&bloomreach-preview=true"))return!0}return!1}(e.path)||function(e,t){return void 0!==e[t.findIndex((function(e){return"previewPrefix"===e.name}))+1]}(n,r)||e.hostname&&function(e,t){return t.live.hostname!==t.preview.hostname&&e===t.preview.hostname}(e.hostname.split(":",1)[0],t)}(e,n,c,t.regexpKeys);return r&&(console.log("### SDK debugging ### parsing URL-path '%s'",e.path),console.log("### SDK debugging ### parsed path is '%s'",s),console.log("### SDK debugging ### preview mode is %s",u)),new K(s,u,a)}(e,n,t,this.debugging)},e.ctorParameters=function(){return[{type:$},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[W]}]}]},e.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new e(t.ÉµÉµinject($),t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(W,8))},token:e,providedIn:"root"}),e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject($),t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(W,8))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:function(t){return e.Éµfac(t)},providedIn:"root"}),e}();function J(e,t){return t.reduce((function(e,t){return e&&"undefined"!==e[t]?e[t]:null}),e)}function Y(e,t,n,r){if(e&&n&&!e.classList.contains(r))try{e.insertAdjacentHTML(t,""+n),e.classList.add(r)}catch(i){console.log("Error creating HTML comment: "+i+", for data: "+n)}}function Z(e){e&&console.log("### SDK debugging ### creating CMS overlay")}var X=function(){function e(e,t,n){var r=this;this.apiUrlsService=e,this.requestContextService=t,this.http=n,this.pageModelSubject=new o.BehaviorSubject(this.pageModel),this.httpGetOptions={withCredentials:!0},this.httpPostOptions={withCredentials:!0,headers:new i.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"})},this.pageModelSubject.subscribe((function(){return r.processPageModel()}))}return e.prototype.fetchPageModel=function(){var e=this,t=this.buildApiUrl();return this.http.get(t,this.httpGetOptions).pipe(a.tap((function(t){e.setPageModel(t)})),a.catchError(this.handleError("fetchPageModel",void 0)))},e.prototype.processPageModel=function(){if(this.pageModel){var e=this.requestContextService.isPreviewRequest(),t=this.requestContextService.getDebugging();!function(e,t,n,r){!function(e,t){if(t&&J(e,["_meta","endNodeSpan",0])){var n=document.getElementById("hst-page-meta-data");n?n.innerHTML="":((n=document.createElement("div")).id="hst-page-meta-data",n.style.display="none;",document.body.appendChild(n));for(var r=0;r<e._meta.endNodeSpan.length;r++)n.insertAdjacentHTML("beforeend",e._meta.endNodeSpan[r].data)}}(e,n),t&&(t.createOverlay(),Z(r))}(this.pageModel.page,this.channelManagerApi,e,t)}},e.prototype.getPageModel=function(){return this.pageModel},e.prototype.setPageModel=function(e){return this.pageModel=e,this.pageModelSubject.next(e),this.pageModelSubject.asObservable()},e.prototype.getPageModelSubject=function(){return this.pageModelSubject},e.prototype.setChannelManagerApi=function(e){this.channelManagerApi=e},e.prototype.updateComponent=function(e,t){var n=this,r=this.requestContextService.getDebugging();!function(e,t,n){n&&(console.log("### SDK debugging ### component update triggered for '%s' with properties:",e),console.dir(t))}(e,t,r);var i,o=(i=t,Object.keys(i).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])})).join("&")),c=this.buildApiUrl(e);return this.http.post(c,o,this.httpPostOptions).pipe(a.tap((function(t){n.requestContextService.isPreviewRequest(),n.setPageModel(function(e,t,n,r,i,o){var a=function e(t,n,r,i){var o;for(var a in t)if(t.hasOwnProperty(a))if("object"==typeof t[a]){if(void 0!==(o=e(t[a],n,t,a)))return o}else if("id"===a&&t.id===n)return{parent:r,idx:i}}(n,t,null,null);return void 0!==a&&(e.page&&(a.parent[a.idx]=e.page),e.content&&(n.content||(n.content={}),Object.assign(n.content,e.content))),n}(t,e,n.pageModel))})),a.catchError(this.handleError("updateComponent",void 0)))},e.prototype.getContentViaReference=function(e){return function(e,t){return e?E.get(t,e):null}(e,this.pageModel)},e.prototype.buildApiUrl=function(e){return function(e,t,n,r,i){var o=t?e.preview:e.live,a=o.baseUrl;return""!==o.contextPath&&(a+="/"+o.contextPath),t&&""!==o.previewPrefix&&(a+="/"+o.previewPrefix),""!==o.channelPath&&(a+="/"+o.channelPath),a+="/"+o.apiPath,n&&(a+="/"+n),i&&(a=function(e,t,n){return-1!==e.indexOf("?")?e+"&"+n.preview.apiComponentRenderingUrlSuffix+t:e+"?"+n.preview.apiComponentRenderingUrlSuffix+t}(a,i,e)),r&&(a+=(a.includes("?")?"&":"?")+r),a}(this.apiUrlsService.getApiUrls(),this.requestContextService.isPreviewRequest(),this.requestContextService.getPath(),this.requestContextService.getQuery(),e)},e.prototype.handleError=function(e,t){return void 0===e&&(e="operation"),function(n){return console.log(e+" failed: "+n.message),console.log(n),o.of(t)}},e.ctorParameters=function(){return[{type:$},{type:Q},{type:i.HttpClient}]},e.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new e(t.ÉµÉµinject($),t.ÉµÉµinject(Q),t.ÉµÉµinject(i.HttpClient))},token:e,providedIn:"root"}),e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject($),t.ÉµÉµinject(Q),t.ÉµÉµinject(i.HttpClient))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:function(t){return e.Éµfac(t)},providedIn:"root"}),e}(),ee=function(){function e(e,t,n){this.apiUrlsService=e,this.requestContextService=t,this.pageModelService=n}return e.prototype.getImageUrl=function(e,t){void 0===t&&(t=null);var n=this.pageModelService.getPageModel(),r=this.apiUrlsService.getApiUrls();return function(e,t,n,r,i){var o,a=e.$ref?e.$ref:void 0,c=a?E.get(n,a):void 0;return c&&t&&c[t]&&(c=c[t]),J(c,["_links","site","href"])&&((o=c._links.site.href).match("^https?://")||(o=(r?i.preview.baseUrl:i.live.baseUrl)+c._links.site.href)),o}(e,t,n,this.requestContextService.isPreviewRequest(),r)},e.prototype.getImageUrlByPath=function(e,t){return function(e,t,n,r){var i=n?r.preview:r.live,o=i.baseUrl;return i.contextPath&&(o+="/"+i.contextPath),o+="/binaries",t&&(o+="/"+t),o+e}(e,t,this.requestContextService.isPreviewRequest(),this.apiUrlsService.getApiUrls())},e.ctorParameters=function(){return[{type:$},{type:Q},{type:X}]},e.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new e(t.ÉµÉµinject($),t.ÉµÉµinject(Q),t.ÉµÉµinject(X))},token:e,providedIn:"root"}),e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject($),t.ÉµÉµinject(Q),t.ÉµÉµinject(X))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:function(t){return e.Éµfac(t)},providedIn:"root"}),e}(),te=function(){function e(){}return e.propDecorators={configuration:[{type:t.Input}]},e.Éµfac=function(t){return new(t||e)},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-cms-component"]],inputs:{configuration:"configuration"},decls:1,vars:1,consts:[[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"configuration",4,"ngSwitchCase"],[3,"configuration"]],template:function(e,n){1&e&&t.ÉµÉµtemplate(0,k,3,3,"ng-container",0),2&e&&t.ÉµÉµproperty("ngForOf",null==n.configuration?null:n.configuration.components)},directives:function(){return[n.NgForOf,n.NgSwitch,n.NgSwitchCase,e,ne]},styles:[""]}),e}(),ne=function(){function e(e,t){this.elementRef=e,this.requestContextService=t,this.preview=!1}return e.prototype.ngOnInit=function(){this.preview=this.requestContextService.isPreviewRequest(),this.addCmsMetaData(this.preview)},e.prototype.addCmsMetaData=function(e){!function(e,t,n){e&&(Y(t,"afterbegin",J(n,["_meta","beginNodeSpan",0,"data"]),"cms-begin-comment-added"),Y(t,"beforeend",J(n,["_meta","endNodeSpan",0,"data"]),"cms-end-comment-added"))}(e,this.elementRef.nativeElement,this.configuration)},e.ctorParameters=function(){return[{type:t.ElementRef},{type:Q}]},e.propDecorators={configuration:[{type:t.Input}]},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµdirectiveInject(t.ElementRef),t.ÉµÉµdirectiveInject(Q))},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-container"]],inputs:{configuration:"configuration"},decls:2,vars:2,consts:[[4,"ngIf"],["class","hst-container",4,"ngIf"],[3,"configuration",4,"ngFor","ngForOf"],[3,"configuration"],[1,"hst-container"],["class","hst-container-item",4,"ngFor","ngForOf"],[1,"hst-container-item"]],template:function(e,n){1&e&&(t.ÉµÉµtemplate(0,O,2,1,"ng-container",0),t.ÉµÉµtemplate(1,L,2,1,"div",1)),2&e&&(t.ÉµÉµproperty("ngIf",!n.preview),t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngIf",n.preview))},directives:function(){return[n.NgIf,n.NgForOf,se]},styles:[""]}),e}(),re=function(){function e(e){this.viewContainerRef=e}return e.ctorParameters=function(){return[{type:t.ViewContainerRef}]},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµdirectiveInject(t.ViewContainerRef))},e.Éµdir=t.ÉµÉµdefineDirective({type:e,selectors:[["","base-component",""]]}),e}(),ie=function(){function e(){}return e.propDecorators={configuration:[{type:t.Input}],content:[{type:t.Input}]},e.Éµfac=function(t){return new(t||e)},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-undefined"]],inputs:{configuration:"configuration",content:"content"},decls:4,vars:1,template:function(e,n){1&e&&(t.ÉµÉµelementStart(0,"p"),t.ÉµÉµtext(1),t.ÉµÉµelementStart(2,"strong"),t.ÉµÉµtext(3,"not defined"),t.ÉµÉµelementEnd(),t.ÉµÉµelementEnd()),2&e&&(t.ÉµÉµadvance(1),t.ÉµÉµtextInterpolate1(" Component ",null==n.configuration?null:n.configuration.label," "))},styles:[""]}),e}();function oe(e,t){return t&&t.page?e?function(e,t){for(var n=e.split("/"),r=t.page;r&&r.components&&r.components.length>0;)if((r=ce(n.shift(),r))&&0===n.length)return r;return null}(e,t):t.page:null}function ae(e,t,n){return t||(e&&e.label?function(e,t){return e in t?t[e]:null}(e.label,n):null)}function ce(e,t){var n,r;try{for(var i=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(Object.keys(t.components)),o=i.next();!o.done;o=i.next()){var a=t.components[o.value];if(e===a.name||"*"===e)return a}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}var se=function(){function e(e,t,n,r){this.componentFactoryResolver=e,this.componentMappingsService=t,this.elementRef=n,this.requestContextService=r}return e.prototype.ngOnChanges=function(e){e.configuration.currentValue&&!e.configuration.previousValue&&this.createComponent()},e.prototype.createComponent=function(){var e=this.componentMappingsService.getComponentMappings(),t=ae(this.configuration,this.renderComponent,e);t||(t=ie),this.addCmsMetaData();var n=this.componentFactoryResolver.resolveComponentFactory(t);this.baseComponent.viewContainerRef.createComponent(n).instance.configuration=this.configuration},e.prototype.addCmsMetaData=function(){var e,t,n;e=this.requestContextService.isPreviewRequest(),t=this.elementRef.nativeElement,n=this.configuration,e&&(Y(t,"beforebegin",J(n,["_meta","beginNodeSpan",0,"data"]),"cms-begin-comment-added"),Y(t,"afterend",J(n,["_meta","endNodeSpan",0,"data"]),"cms-end-comment-added"))},e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:H},{type:t.ElementRef},{type:Q}]},e.propDecorators={configuration:[{type:t.Input}],renderComponent:[{type:t.Input}],baseComponent:[{type:t.ViewChild,args:[re,{static:!0}]}]},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµdirectiveInject(t.ComponentFactoryResolver),t.ÉµÉµdirectiveInject(H),t.ÉµÉµdirectiveInject(t.ElementRef),t.ÉµÉµdirectiveInject(Q))},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-base-component"]],viewQuery:function(e,n){var r;1&e&&t.ÉµÉµstaticViewQuery(re,!0),2&e&&t.ÉµÉµqueryRefresh(r=t.ÉµÉµloadQuery())&&(n.baseComponent=r.first)},inputs:{configuration:"configuration",renderComponent:"renderComponent"},features:[t.ÉµÉµNgOnChangesFeature],decls:1,vars:0,consts:[["base-component",""]],template:function(e,n){1&e&&t.ÉµÉµtemplate(0,D,0,0,"ng-template",0)},directives:[re],styles:[""]}),e}(),ue=function(){function e(e,t){this.imageUrlService=e,this.pageModelService=t}return e.prototype.ngOnInit=function(){this.getContent()},e.prototype.getContent=function(){var e=J(this.configuration,["models","document","$ref"]);e&&(this.content=this.pageModelService.getContentViaReference(e))},e.prototype.getImageUrl=function(e){return this.imageUrlService.getImageUrl(e)},e.ctorParameters=function(){return[{type:ee},{type:X}]},e.propDecorators={configuration:[{type:t.Input}]},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµdirectiveInject(ee),t.ÉµÉµdirectiveInject(X))},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-single-content-component"]],inputs:{configuration:"configuration"},decls:2,vars:0,template:function(e,n){1&e&&(t.ÉµÉµelementStart(0,"p"),t.ÉµÉµtext(1," content-component works!\n"),t.ÉµÉµelementEnd())},styles:[""]}),e}(),pe=function(){function e(e){this.requestContextService=e}return e.prototype.ngOnInit=function(){this.addCmsMetaData()},e.prototype.addCmsMetaData=function(){this.requestContextService.isPreviewRequest()&&Y(this.buttonElm.nativeElement,"afterbegin",J(this.configuration,["_meta","beginNodeSpan",0,"data"]),"cms-begin-comment-added")},e.ctorParameters=function(){return[{type:Q}]},e.propDecorators={configuration:[{type:t.Input}],buttonElm:[{type:t.ViewChild,args:["buttonElm",{static:!0}]}]},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµdirectiveInject(Q))},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-cms-edit-button"]],viewQuery:function(e,n){var r;1&e&&t.ÉµÉµstaticViewQuery(U,!0),2&e&&t.ÉµÉµqueryRefresh(r=t.ÉµÉµloadQuery())&&(n.buttonElm=r.first)},inputs:{configuration:"configuration"},decls:3,vars:0,consts:[[2,"position","relative"],["buttonElm",""]],template:function(e,n){1&e&&(t.ÉµÉµelementStart(0,"div",0),t.ÉµÉµelement(1,"span",null,1),t.ÉµÉµelementEnd())},styles:[""]}),e}(),le=function(){function e(e,t){this.changeDetectorRef=e,this.pageModelService=t}return e.prototype.ngOnInit=function(){this.configuration?this.detectChanges():this.getPageModel()},e.prototype.getPageModel=function(){var e=this;this.pageModelService.getPageModelSubject().subscribe((function(t){t&&(e.configuration=oe(e.path,t),e.detectChanges())}))},e.prototype.detectChanges=function(){this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()},e.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:X}]},e.propDecorators={path:[{type:t.Input}],renderComponent:[{type:t.Input}],configuration:[{type:t.Input}]},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµdirectiveInject(t.ChangeDetectorRef),t.ÉµÉµdirectiveInject(X))},e.Éµcmp=t.ÉµÉµdefineComponent({type:e,selectors:[["bre-render-cms-component"]],inputs:{path:"path",renderComponent:"renderComponent",configuration:"configuration"},decls:2,vars:2,consts:[[3,"configuration","renderComponent",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[3,"configuration","renderComponent"],[3,"ngSwitch"],[3,"configuration",4,"ngSwitchCase"],[3,"configuration",4,"ngSwitchDefault"],[3,"configuration"]],template:function(e,n){1&e&&(t.ÉµÉµtemplate(0,N,1,2,"bre-base-component",0),t.ÉµÉµtemplate(1,G,4,3,"ng-container",1)),2&e&&(t.ÉµÉµproperty("ngIf",n.renderComponent),t.ÉµÉµadvance(1),t.ÉµÉµproperty("ngIf",!n.renderComponent))},directives:[n.NgIf,se,n.NgSwitch,n.NgSwitchCase,n.NgSwitchDefault,ne,te],styles:[""]}),e}(),fe=function(){function e(e,t,n,r,i){this.pageModelService=e,this.requestContextService=t,this.router=n,this.platformId=r,this.transferState=i,this.onCmsInitialization=this.onCmsInitialization.bind(this),this.onComponentUpdate=this.onComponentUpdate.bind(this)}return e.prototype.initialize=function(e){var t=void 0===e?{}:e,n=t.initializePageModel,r=void 0===n||n,i=t.initializeRouterEvents,o=void 0===i||i;if(this.initializeCmsIntegration(),r&&this.initializePageModel(),o)return this.initializeRouterEvents()},e.prototype.initializeCmsIntegration=function(){n.isPlatformBrowser(this.platformId)&&"undefined"!=typeof window&&(window.SPA={init:this.onCmsInitialization,renderComponent:this.onComponentUpdate})},e.prototype.initializePageModel=function(){var e=this,t=this.transferState&&c.makeStateKey("pageModel"),r=!n.isPlatformServer(this.platformId)&&this.transferState&&this.transferState.hasKey(t);(r?this.pageModelService.setPageModel(this.transferState.get(t,null)):this.pageModelService.fetchPageModel()).pipe(a.first()).subscribe((function(){r&&e.transferState.remove(t)})),n.isPlatformServer(this.platformId)&&this.transferState&&this.transferState.onSerialize(t,(function(){return e.pageModelService.pageModel}))},e.prototype.initializeRouterEvents=function(){var e=this;return this.router.events.subscribe((function(t){t instanceof r.NavigationEnd&&(e.requestContextService.parseUrlPath(t.url),e.initializePageModel())}))},e.prototype.onCmsInitialization=function(e){var t=this.requestContextService.getDebugging();this.pageModelService.setChannelManagerApi(e),this.pageModelService.getPageModel()&&(e.createOverlay(),Z(t))},e.prototype.onComponentUpdate=function(e,t){this.pageModelService.updateComponent(e,t).subscribe()},e.ctorParameters=function(){return[{type:X},{type:Q},{type:r.Router},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:c.TransferState,decorators:[{type:t.Optional},{type:t.Inject,args:[c.TransferState]}]}]},e.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new e(t.ÉµÉµinject(X),t.ÉµÉµinject(Q),t.ÉµÉµinject(r.Router),t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(c.TransferState,8))},token:e,providedIn:"root"}),e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject(X),t.ÉµÉµinject(Q),t.ÉµÉµinject(r.Router),t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(c.TransferState,8))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:function(t){return e.Éµfac(t)},providedIn:"root"}),e}(),he=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[$,H,ee,fe,X,Q]}},e.Éµmod=t.ÉµÉµdefineNgModule({type:e}),e.Éµinj=t.ÉµÉµdefineInjector({factory:function(t){return new(t||e)},imports:[[n.CommonModule,r.RouterModule]]}),e}(),de=function(e,t){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ge(e,t){function n(){this.constructor=e}de(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var me=function(){return(me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ve(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))}function ye(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function we(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function be(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(we(arguments[t]));return e}var Ce=new t.InjectionToken("cmsConfigToken"),Se=function(){function e(e){void 0===e&&(e=null),this.cacheLimit=e,this.storage=new Map}return e.prototype.isCacheValid=function(e){return null==e||(new Date).getTime()<=e},e.prototype.get=function(e){var t=this.storage.get(e);if(t&&this.storage.has(e)&&this.isCacheValid(t.expiration))return t.value;this.delete(e)},e.prototype.has=function(e){var t=this.storage.get(e);return!!(t&&this.storage.has(e)&&this.isCacheValid(t.expiration))||(this.delete(e),!1)},e.prototype.set=function(e,t){this.storage.set(e,{expiration:this.cacheLimit?(new Date).getTime()+this.cacheLimit:null,value:t})},e.prototype.delete=function(e){this.storage.delete(e)},e}(),Ie=["credit-cards","small-business/credit-cards","bank","commercial","military","relief","auto-financing","small-business-bank"],Pe=function(){function e(e,t){this.platformId=e,this.document=t,this.isBrowser=n.isPlatformBrowser(this.platformId),this.isServer=n.isPlatformServer(this.platformId),this.newRelic={setCustomAttribute:function(){},setPageViewName:function(){},noticeError:function(){}},this.isBrowser&&window.newrelic&&(this.newRelic=window.newrelic)}return e.prototype.setCustomAttribute=function(e,t){if(this.isBrowser)this.newRelic.setCustomAttribute(e,t);else if(this.isServer){var n=this.sanitize(e),r=t;"string"==typeof t&&(r=this.sanitize(t));var i=this.document.createElement("script");i.setAttribute("type","text/javascript"),i.innerHTML='window.newrelic.setCustomAttribute("'+n+'", "'+r+'");';var o=this.document.getElementById("new-relic-init");o&&o.insertAdjacentElement("afterend",i)}},e.prototype.setPageViewName=function(e,t){this.newRelic.setPageViewName(e,t)},e.prototype.noticeError=function(e,t){this.newRelic.noticeError(e,t)},e.prototype.sanitize=function(e){return e.replace(/\"/g,"&#34;").replace(/\''/g,"&#39;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},e.Éµfac=function(r){return new(r||e)(t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(n.DOCUMENT))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}(),je=/^(\/site\/)(?!_cmsinternal\/)/,xe=function(){function e(e,t,n,r){this.document=e,this.cmsConfig=t,this.httpClient=n,this.newrelic=r,this.headCache=new Se,this.cmsInternalRegExp=/^site\/_cmsinternal\//}return e.prototype.fileExists=function(e){var t=this;if(this.headCache.has(e))return this.headCache.get(e);var n=new Promise((function(n){t.httpClient.head(e,{observe:"response"}).toPromise().then((function(e){n(200===e.status)})).catch((function(e){t.newrelic.noticeError(e),n(!1)})).finally((function(){t.headCache.delete(e)}))}));return this.headCache.set(e,n),n},e.prototype.removeHomepageChannelFromUrl=function(e){var t=this.extractRelativePath(e);return this.formatPath(t).startsWith("site/homepage")?e.replace("homepage/",""):e},e.prototype.extractHashFragmentAndQueryParams=function(e){return e.split(/[?#]/)[0]},e.prototype.hasMatchingHost=function(e){return!this.isValidUrl(e)||e.includes(this.document.location.host)},e.prototype.extractRelativePath=function(e){if(void 0===e&&(e=""),this.isValidUrl(e)){var t=e.split(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);t[4]===this.document.location.host&&(e=[t[5],t[6],t[8]].filter(Boolean).join(""))}return e},e.prototype.isValidUrl=function(e){return/^(https?:\/\/)|([a-z\d]\.)+[a-z]{2,}/i.test(e)},e.prototype.stripLeadingAndTrailingSlash=function(e){return e.replace(/^\/|\/$/g,"")},e.prototype.convertUrlToPathToJson=function(e){var t=this.formatPath(e),n="",r=-1===t.indexOf("/");this.cmsInternalRegExp.test(t)&&(n="_cmsinternal/",t=t.replace(this.cmsInternalRegExp,""));var i=this.removePreviewSuffix(t.split("/")[0]),o=r?"root":t.split("/").splice(1).join("/");return this.cmsConfig.useCache?"/assets/shell/page_models/"+i+"/resourceapi/"+o+".json":this.cmsConfig.live.scheme+"://"+this.cmsConfig.live.hostname+":"+this.cmsConfig.live.port+"/site/"+n+i+"/resourceapi/"+o},e.prototype.formatPath=function(e){var t=this.extractHashFragmentAndQueryParams(e);return this.stripLeadingAndTrailingSlash(t)},e.prototype.removeInternalPrefix=function(e){var t=this.extractRelativePath(e);return je.test(t)?t.substring(5):e},e.prototype.removePreviewSuffix=function(e){var t=this.cmsConfig.live.previewSuffix;if(void 0!==t&&0===t.length)return e;var n=this.extractRelativePath(e);return n.startsWith("/"+this.cmsConfig.live.channelPath)?n.replace(t,""):e},e.prototype.isException=function(e){var t=this.extractRelativePath(e),n=this.removeInternalPrefix(t),r=this.formatPath(n);return Ie.some((function(e){return r.startsWith(e)}))},e.prototype.isInternalLink=function(e){return ve(this,void 0,void 0,(function(){var t,n;return ye(this,(function(r){switch(r.label){case 0:return e&&this.hasMatchingHost(e)?(t=this.extractRelativePath(e),this.isException(t)?[2,!1]:je.test(t)?[2,!0]:(n=this.convertUrlToPathToJson(t),[4,this.fileExists(n)])):[3,2];case 1:if(r.sent())return[2,!0];r.label=2;case 2:return[2,!1]}}))}))},e.Éµfac=function(r){return new(r||e)(t.ÉµÉµinject(n.DOCUMENT),t.ÉµÉµinject(Ce),t.ÉµÉµinject(i.HttpClient),t.ÉµÉµinject(Pe))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac}),e}(),Ae=function(){function e(e,t,r,i,o,a,c,s){this.initializeSdkService=e,this.apiUrlsService=t,this.requestContextService=r,this.componentMappingsService=i,this.pageModelService=o,this.internalLinkService=a,this.document=c,this.platformId=s,this.contentCache=new Se,this.isBrowser=n.isPlatformBrowser(this.platformId)}return e.prototype.fetchRouteData=function(e,t,n,r){var i,o=this;if(r?(t.live=t.live||{},e="/"===(e=this.internalLinkService.extractHashFragmentAndQueryParams(e))||e==="/"+t.live.channelPath+"/"?"/root.json":e.replace("/"+t.live.channelPath+"/","/").replace(/\/$/,"")+".json",i={live:{scheme:this.document.location.protocol.replace(":",""),hostname:this.document.location.hostname,port:parseInt(this.document.location.port)||443,channelPath:t.live.channelPath,contextPath:t.live.contextPath}}):i=t,this.apiUrlsService.setApiUrls(i),this.requestContextService.parseUrlPath(e),this.componentMappingsService.setComponentMappings(n),this.initializeSdkService.initialize({initializePageModel:!1,initializeRouterEvents:!1}),r&&this.contentCache.has(e)){var a=this.contentCache.get(e);return this.pageModelService.setPageModel(a),Promise.resolve(oe("",a))}return this.pageModelService.fetchPageModel().toPromise().then((function(t){return t=o.updateAssetsPaths(r,o.apiUrlsService.getApiUrls(),t),o.contentCache.set(e,t),oe("",t)}))},e.prototype.updateAssetsPaths=function(e,t,n){if(this.isBrowser&&!e&&this.document.location.origin!==t.live.baseUrl){var r=JSON.stringify(n);r=r.replace(/("|')\/site\/binaries\//gi,"$1"+t.live.baseUrl+"/site/binaries/");var i=JSON.parse(r);return this.pageModelService.setPageModel(i),i}return n},e.Éµfac=function(r){return new(r||e)(t.ÉµÉµinject(fe),t.ÉµÉµinject($),t.ÉµÉµinject(Q),t.ÉµÉµinject(H),t.ÉµÉµinject(X),t.ÉµÉµinject(xe),t.ÉµÉµinject(n.DOCUMENT),t.ÉµÉµinject(t.PLATFORM_ID))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}();function Ee(e,t,n){return void 0===n&&(n=null),t.reduce((function(e,t){return e&&e[t]?e[t]:n}),e)}var Me,Te,ke,Re,Oe,_e,Le=function(){function e(e){this.platformId=e,this.isBrowser=n.isPlatformBrowser(e),this.geoVars=this.isBrowser?Ee(window,["c1GeoVars","geoInfo"],{}):{}}return Object.defineProperty(e.prototype,"countryCode",{get:function(){return Ee(this.geoVars,["country_code"],"us").toLowerCase()},enumerable:!0,configurable:!0}),e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject(t.PLATFORM_ID))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}(),De=function(){function e(e,t,n){this.requestContextService=e,this.pageModelService=t,this.newrelic=n,this._recipe=null,this.componentTests=null}return Object.defineProperty(e.prototype,"recipe",{get:function(){return this._recipe},set:function(e){this.newrelic.setCustomAttribute("componentTests",e||""),this._recipe=e},enumerable:!0,configurable:!0}),e.prototype.executeComponentLevelTests=function(e,t){if(this.recipe="",this.componentLevelTestAvailable(t)){var n=this.filterInvalidTests(e.components[0].components,t);return this.componentTests=t,this.recipe=this.generateComponentRecipe(n),this.applyComponentTests(e,n)}return e},e.prototype.applyComponentTests=function(e,t){var n=this,r=e.components[0].components;return t.filter((function(e){return!n.isControl(e)})).forEach((function(t){var i=n.findComponentByName(r,t.name),o=n.findAlternate(r,t.name,t.variant),a=n.constructComponent(i,o);e.components[0].components[n.getIndex(r,t.name)]=a})),e},e.prototype.getIndex=function(e,t){return e.findIndex((function(e){return e.name===t}))},e.prototype.filterInvalidTests=function(e,t){var n=this;return t.reduce((function(t,r){return n.isControl(r)||n.findAlternate(e,r.name,r.variant)?be(t,[r]):t}),[])},e.prototype.isControl=function(e){return"control"===e.variant},e.prototype.findAlternate=function(e,t,n){return Ee(this.findComponentByName(e,t),["models","alternates"],[]).find((function(e){return e.characteristicValue===n}))},e.prototype.findComponentByName=function(e,t){return e.find((function(e){return e.name===t}))},e.prototype.componentLevelTestAvailable=function(e){return e&&e.length>0&&!this.requestContextService.isPreviewRequest()},e.prototype.findComponentTest=function(e,t){return e.find((function(e){return e.name===t}))},e.prototype.constructComponent=function(e,t){var n={models:me({},this.updateContentRefs(t)),_meta:{params:t,paramsInfo:me(me({},this.updateParamsInfo(t)),{variantID:t.variantId})}};return Object.assign({},e,n)},e.prototype.generateComponentRecipe=function(e){return e.map((function(e){return e.meta+"%"+e.name+"%"+e.variant})).join("|")},e.prototype.updateParamsInfo=function(e){return Object.entries(e).reduce((function(e,t){var n=we(t,2),r=n[0],i=n[1];if("off"===i)e[r]=!1;else if("on"===i)e[r]=!0;else{if("document"===r)return e;e[r]=i}return e}),{})},e.prototype.updateContentRefs=function(e){var t=this;return Object.entries(e).reduce((function(e,n){var r=we(n,2),i=r[0],o=r[1];return e[i]=["document","contentList","list","featuredArticle"].includes(i)?me(me({},o),t.updateContentRefs(t.pageModelService.getContentViaReference(o.$ref))):"documents"===i&&o?o.reduce((function(e,n){return e.push(me(me({},n),t.pageModelService.getContentViaReference(n.$ref))),e}),[]):o,e}),{})},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject(Q),t.ÉµÉµinject(X),t.ÉµÉµinject(Pe))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}();(Me=e.GtagActionEnum||(e.GtagActionEnum={})).PageView="page_view",Me.Conversion="conversion",Me.ConversionIntent="conversion_intent",Me.DownloadClick="download_click",Me.NavigationClick="navigation_click",Me.CtaClick="cta_click",Me.ApplicationStart="application_start",Me.ApplicationStepView="application_step_view",Me.ApplicationSubmitAttempt="application_submit_attempt",Me.ApplicationSubmitFailure="application_submit_failure",Me.ApplicationSubmitComplete="application_submit_complete",Me.EmailLink="email_link",Me.PhoneLink="social_link",Me.SocialLink="social_link",Me.ExternalLink="external_link",Me.SiteSearch="site_search",Me.RegistrationAttempt="registration_attempt",Me.RegistrationFailure="registration_failure",Me.RegistrationComplete="registration_complete",Me.LoginAttempt="login_attempt",Me.LoginFail="login_fail",Me.LoginComplete="login_complete",Me.SocialShare="social_share",Me.AppStoreLinkClick="app_store_link_click",Me.Error404="404_error",Me.FormStart="form_start",Me.FormComplete="form_complete",(Te=e.GtagEventCategoryEnum||(e.GtagEventCategoryEnum={})).Download="download",Te.Navigation="navigation",Te.ConversionIntent="conversion intent",Te.Application="application",Te.ExternalLink="external link",Te.SiteSearch="site search",Te.Registration="registration",Te.Login="login",Te.Error="error",Te.Form="form",Te.Cta="cta",(ke=e.GtagEventNameEnum||(e.GtagEventNameEnum={})).Conversion="GA Event - Conversion Intent",ke.ConversionIntent="conversion_GA Event - Conversion Intent",ke.DownloadClick="GA Event - Download Click",ke.NavigationClick="GA Event - Navigation Click",ke.CtaClick="GA Event - CTA Click",ke.ApplicationSubmit="GA Event - Application Submit",ke.EmailLink="GA Event - External Email Link Click",ke.PhoneLink="GA Event - External Phone Link Click",ke.SocialLink="GA Event - External Social Link Click",ke.ExternalLink="GA Event - External General Link Click",ke.SiteSearch="GA Event - Site Search",ke.Registration="GA Event - Registration",ke.Login="GA Event - Login",ke.SocialShare="GA Event - Social Share Link",ke.AppStoreLinkClick="GA Event - Conversion Intent",ke.Error404="GA Event - 404 Error Page View",ke.Form="GA Event - Forms",(Re=e.GtagEventActionEnum||(e.GtagEventActionEnum={})).ApplicationStart="start",Re.ApplicationAttempt="submit attempt",Re.ApplicationComplete="submit complete",Re.EmailLink="email link",Re.PhoneLink="phone link",Re.SocialLink="social link",Re.GeneralLink="general link",Re.RegistrationAttempt="attempt",Re.RegistrationComplete="complete",Re.LoginAttempt="attempt",Re.LoginComplete="complete",Re.SocialShare="social share intent",Re.AppStoreLink="app store link",Re.FormStart="start",Re.FormComplete="complete",Re.Error404="error 404",(Oe=e.GtagEventLabelEnum||(e.GtagEventLabelEnum={})).Registration="username registration",Oe.Login="username login",(_e=e.ResponsiveSizes||(e.ResponsiveSizes={}))[_e.ExtraSmall=368]="ExtraSmall",_e[_e.Small=599]="Small",_e[_e.Medium=767]="Medium",_e[_e.MediumLarge=1024]="MediumLarge",_e[_e.Large=1199]="Large",_e[_e.ExtraLarge=1919]="ExtraLarge",_e[_e.LargeDisplay=9999]="LargeDisplay";var Ue,Ne=function(){function r(e,t){this.platformId=e,this.document=t,this.isBrowser=n.isPlatformBrowser(this.platformId)}return r.prototype.addPageViewData=function(t){if(this.isBrowser){var n=t.gtag||{},r=Date.now();n.action=e.GtagActionEnum.PageView,n.domain_userid=this.getCookie("C1_UDID")||void 0,n.full_referrer=this.document.referrer,n.full_url=this.document.location.toString(),n.ga_client_id=this.getGaId()||void 0,n.language=t.taxonomy.language,n.responsive_breakpoint=this.getViewportSize(),n.site_version=this.getCommitSha(),n.user_agent_string=navigator.userAgent,n.user_timezone_timestamp=new Date(r).toString(),n.user_timezone_offset=this.getOffset(new Date(r)),t.gtag=n}return t},r.prototype.getGaId=function(){var e=this.getCookie("_ga");if(e)return e.split(".").slice(2).join(".")},r.prototype.getCommitSha=function(){return this.document.getElementsByTagName("body")[0].getAttribute("data-build-sha")||void 0},r.prototype.getViewportSize=function(){var t=this.document.documentElement.clientWidth;return t<=e.ResponsiveSizes.ExtraSmall?"extra small":t<=e.ResponsiveSizes.Small?"small":t<=e.ResponsiveSizes.Medium?"medium":t<=e.ResponsiveSizes.MediumLarge?"medium large":t<=e.ResponsiveSizes.Large?"large":t<=e.ResponsiveSizes.ExtraLarge?"extra large":"large display"},r.prototype.getOffset=function(e){var t=e.getTimezoneOffset()/60;return(t>0?"-":"+")+t.toFixed(0).toString()},r.prototype.getCookie=function(e){var t=this.document.cookie.split("; ").find((function(t){return t.startsWith(e+"=")}));if(t)return t.split("=")[1]},r.Éµfac=function(e){return new(e||r)(t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(n.DOCUMENT))},r.Éµprov=t.ÉµÉµdefineInjectable({token:r,factory:r.Éµfac,providedIn:"root"}),r}(),Fe=new t.InjectionToken("appOwnerToken"),qe=function(){function e(e,t,r,i,o){void 0===o&&(o=""),this.platformId=e,this.geoVarsService=t,this.comTestService=r,this.gaService=i,this.appOwner=o,this.isBrowser=n.isPlatformBrowser(this.platformId)}return Object.defineProperty(e.prototype,"component",{get:function(){return this._component},set:function(e){this._component=e},enumerable:!0,configurable:!0}),e.prototype.createMetadata=function(e,t,n){var r=this.taxonomyAndContext(e,t,n);return r=this.gaService.addPageViewData(r),this.publishMetadata("trackAnalytics",r)},e.prototype.createTaxonomyObj=function(e){return me(me({},this.getLevelFields(e)),{country:this.geoVarsService.countryCode,language:e&&e.language?e.language:"english",system:"portal_compass"})},e.prototype.getLevelFields=function(e){var t=this.strippedPathname.split("/"),n={level1:this.appOwner||"enterprise",level2:t[0]||"",level3:this.isArticle?"article":"composed",level4:""};return t.length>1&&(n.level4=t[t.length-1]),(e=e||{}).level1=e.level1||n.level1,e.level2=e.level2||n.level2,e.level3=e.level3||n.level3,e.level4=e.level4||n.level4,e},Object.defineProperty(e.prototype,"strippedPathname",{get:function(){return this.isBrowser?window.location.pathname.replace(/^\/|\/$/g,""):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArticle",{get:function(){return"article"===Ee(this.component,["routeData","name"])},enumerable:!0,configurable:!0}),e.prototype.taxonomyAndContext=function(e,t,n){var r="";e&&""!==e.deviceInfo.type&&(r=e.deviceInfo.type);var i={taxonomy:this.createTaxonomyObj(t),deviceType:r};this.comTestService.recipe&&(i.componentLevelTest=this.comTestService.recipe),null!==n&&(i.spContexts=[{schema:"iglu:com.capitalone.snowplow/page_metadata/jsonschema/1-0-0",data:n}]);var o=this.parseKmInfo();return i.akamaiTest=this.getAdobeTestData(),i.altCustId=this.getAltCustId(o),i.kmInfo=this.getKmInfo(o),i},e.prototype.parseKmInfo=function(){var e;return this.isBrowser&&(e=window.localStorage.kmInfo),e?JSON.parse(e):{}},e.prototype.getKmInfo=function(e){return Ee(e,["info"],[]).join("_")},e.prototype.getAltCustId=function(e){return Ee(e,["umk"],"")},e.prototype.getAdobeTestData=function(){return window.siteTestData?window.siteTestData.reduce((function(e,t){return e.push(t.campaign+":"+t.campaignId+":"+t.experience+":"+t.experienceId),e}),[]).join("|"):""},e.prototype.publishMetadata=function(e,t){try{return this.isBrowser&&window.publisherFW.publishEvent(e,t),{error:"metadata",detail:{name:e,eventData:t}}}catch(n){return{error:"Error publishing to siteCatalyst ",detail:n}}},e.prototype.publishClickTrackingData=function(e,t){try{if(this.isBrowser){var n=Object.values(this.pageLevelFields).filter((function(e){return""!==e})).join(":");t.name=n+":"+t.name,window.publisherFW.publishEvent(e,t)}}catch(r){}},e.prototype.getMetadataFields=function(e,t){return void 0===t&&(t=null),this.pageLevelFields={level1:Ee(e,["level1"],""),level2:Ee(e,["level2"],""),level3:Ee(e,["level3"],""),level4:Ee(e,["level4"],""),level5:Ee(e,["level5"],"")},{levelFields:me(me({},this.pageLevelFields),{language:Ee(e,["language"],"english")}),contextFields:this.getContextData(t)}},e.prototype.getContextData=function(e){return null===e?e:{strategyAbstractedCode:this.getMetaInfo("strategy",e.metadata),intentAbstractedCode:this.getMetaInfo("intent",e.metadata),categoryAbstractedCode:this.buildCompositeFields("primaryCategory","secondaryCategory",e.metadata),topicAbstractedCode:this.buildCompositeFields("primaryTopics","secondaryTopics",e.metadata),contentTypeAbstractedCode:this.getMetaInfo("contentType",e.metadata),audienceAbstractedCode:this.getMetaInfo("audience",e.metadata),producerAbstractedCode:this.getMetaInfo("producer",e.metadata),productAbstractedCode:this.getMetaInfo("product",e.metadata),author:e.author?"true":"N/A",keyword:e.metaKeywords?"true":"N/A",useKeyword:e.keywordDriven?"true":"N/A"}},e.prototype.buildCompositeFields=function(e,t,n){var r=this.getMetaInfo(e,n);return""!==this.getMetaInfo(t,n)&&(r+="|"+this.getMetaInfo(t,n)),r},e.prototype.getMetaInfo=function(e,t){var n=this,r="";return t.forEach((function(t,i,o){t.key===e&&null!==t.value&&t.value.forEach((function(e){r+=e.code+"|"})),r=n.removeStringEndPipe(r)})),r},e.prototype.removeStringEndPipe=function(e){for(var t=e.length-1;t>=0&&"|"===e.slice(-1);t--)e=e.substring(0,e.length-1);return e},e.prototype.videoPlayerStateChange=function(e){},e.prototype.videoPlayerNavigateAway=function(e){},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(Le),t.ÉµÉµinject(De),t.ÉµÉµinject(Ne),t.ÉµÉµinject(Fe,8))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac}),e}(),Be=function(){function e(){}return e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac=function(t){return new(t||e)}}),e}();(Ue=e.ScEventName||(e.ScEventName={})).clickTracking="clickTracking",Ue.trackAnalytics="trackAnalytics",Ue.initMarketing="initMarketing";var Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ge(t,e),t.prototype.serialize=function(t){var n=e.prototype.serialize.call(this,t),r=n.indexOf("?")>-1?"?":"#",i=n.split(r);return"/"!==i[0]&&(i[0]+="/"),i.join(r)},t}(r.DefaultUrlSerializer),ze=new t.InjectionToken("componentMappings"),Ve={loading:!1,offers:null},$e=function(){function e(e,t,r){this.platformId=e,this.document=t,this.newrelic=r,this.isBrowser=n.isPlatformBrowser(this.platformId),this.testData=this.isBrowser?o.fromEvent(this.document,"siteTestDataReady").pipe(a.map((function(e){return e.detail.siteTestData}))):o.never(),this.adobeTarget=this.isBrowser&&this.enableTests()&&window.adobe?adobe.target:null,this.pageUrl="",this.pageOffers=new Promise((function(){})),this.isBrowser&&!this.enableTests()&&console.log("Adobe Target disabled for localhost. Add query string \"at_preview_token\" to enable. In chrome dev console location.search += 'at_preview_token'")}return e.prototype.getAndApplyOffers=function(e){return ve(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return[4,this.getPageOffers(e)];case 1:return t=n.sent(),this.isBrowser&&this.document.getElementsByTagName&&this.document.getElementsByTagName("content-wrapper")[0].classList.remove("min-height"),null===t||null===this.adobeTarget||(this.adobeTarget.applyOffer({mbox:"target-global-mbox",offer:t}),this.clearGlobalData()),[2]}}))}))},e.prototype.getTestUrl=function(e){return ve(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return[4,this.getPageOffers(e)];case 1:return[2,(t=n.sent())?this.getUrl(t,e):e]}}))}))},e.prototype.getComponentTests=function(e){return ve(this,void 0,void 0,(function(){var t,n,r,i;return ye(this,(function(o){switch(o.label){case 0:return[4,this.getPageOffers(e)];case 1:return(t=o.sent())?(n=t.filter((function(e){return"setJson"===e.action})),r=n&&n.length?n[0].content.filter((function(e){return e.componentLevelTest})):[],i=new Set,[2,r.flatMap((function(e){return e.componentLevelTest&&e.componentLevelTest.length?e.componentLevelTest.filter((function(e){return!i.has(e.name)&&(i.add(e.name),!0)})):[]}))]):[2,[]]}}))}))},e.prototype.getPageOffers=function(e){return this.pageUrl!==e&&(this.pageUrl=e,this.pageOffers=this.getOffers()),this.pageOffers},e.prototype.getOffers=function(){var e=this;return this.adobeTarget?new Promise((function(t,n){var r=window._sequoia&&window._sequoia.target?window._sequoia.target:Ve;r.loading?(window.addEventListener("targetResolved",(function(){t(r.offers)})),window.addEventListener("targetRejected",(function(){e.newrelic.noticeError("Adobe Target fetching data rejected"),t(null)}))):r.offers?t(r.offers):e.adobeTarget.getOffer({mbox:"target-global-mbox",success:function(e){t(e)},timeout:2e3,error:function(){e.newrelic.noticeError("Adobe Target GetOffer failed"),t(null)}})})):(this.newrelic.noticeError("Adobe Target SDK not loaded"),Promise.resolve(null))},e.prototype.getUrl=function(e,t){var n=xe.prototype.extractHashFragmentAndQueryParams(t),r=e.filter((function(e){return"setJson"===e.action})),i=r&&r.length?r[0].content.filter((function(e){return e.sequoia})):null,o=i&&i.length?i[0].sequoia:null,a=o&&o.page?o.page:null,c=a&&a[n]||"";return this.isTestUrl(c)?c:t},e.prototype.isTestUrl=function(e){return e.startsWith("/tests/")||e.startsWith("/article-tests/")},e.prototype.clearGlobalData=function(){window._sequoia.target=Ve},e.prototype.enableTests=function(){var e=this.document.location;return"localhost"!==e.hostname||"localhost"===e.hostname&&e.search.indexOf("at_preview_token")>0},e.Éµfac=function(r){return new(r||e)(t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject(n.DOCUMENT),t.ÉµÉµinject(Pe))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}(),He=function(){function e(e,t,n,r,i,o,a,c){this.cmsSdkService=e,this.targetService=t,this.cmsConfig=n,this.componentMappings=r,this.router=i,this.componentTestService=o,this.newrelic=a,this.document=c}return e.prototype.resolve=function(e,t){return ve(this,void 0,void 0,(function(){var n,r,i,o,a,c=this;return ye(this,(function(s){switch(s.label){case 0:return n=e.params["content-channel"]||e.parent&&e.parent.params["content-channel"],this.cmsConfig.live&&n&&(this.cmsConfig.live.channelPath=n+(this.cmsConfig.useCache?"":this.cmsConfig.live.previewSuffix)),this.cmsConfig.preview&&n&&(this.cmsConfig.preview.channelPath=n+(this.cmsConfig.useCache?"":this.cmsConfig.preview.previewSuffix)),[4,this.targetService.getTestUrl(t.url)];case 1:return r=s.sent(),[4,this.targetService.getComponentTests(t.url)];case 2:return i=s.sent(),r=this.removeChannelForPreview(r,this.cmsConfig),o=Object.assign.apply(Object,be([{}],this.componentMappings)),[4,this.cmsSdkService.fetchRouteData(r,this.cmsConfig,o,!!this.cmsConfig.useCache).catch((function(e){console.error("Failed to fetch route data",e),c.newrelic.noticeError(e),c.router.navigateByUrl("/page-not-found/")}))];case 3:return a=s.sent(),this.sendMetadataToNR(t,r),[2,this.componentTestService.executeComponentLevelTests(a,i)]}}))}))},e.prototype.sendMetadataToNR=function(e,t){this.newrelic.setPageViewName(e.url,this.document.location.origin),this.newrelic.setCustomAttribute("channel",this.cmsConfig.live?this.cmsConfig.live.channelPath:""),this.newrelic.setCustomAttribute("variantUrl",t)},e.prototype.removeChannelForPreview=function(e,t){if(e&&t.live&&t.live.channelPath&&t.live.previewSuffix){var n="/"+t.live.channelPath.replace(t.live.previewSuffix,"")+"/";e.startsWith(n)&&(e=e.substring(n.length-1))}return e},e.Éµfac=function(i){return new(i||e)(t.ÉµÉµinject(Ae),t.ÉµÉµinject($e),t.ÉµÉµinject(Ce),t.ÉµÉµinject(ze),t.ÉµÉµinject(r.Router),t.ÉµÉµinject(De),t.ÉµÉµinject(Pe),t.ÉµÉµinject(n.DOCUMENT))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac}),e}(),Ke=function(){function e(e,t){this.adobeTargetService=e,this.router=t}return e.prototype.resolve=function(e,t){return ve(this,void 0,void 0,(function(){var e=this;return ye(this,(function(n){return[2,this.router.events.pipe(a.first((function(e){return e instanceof r.NavigationEnd}))).subscribe((function(){return e.adobeTargetService.getAndApplyOffers(t.url)}))]}))}))},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject($e),t.ÉµÉµinject(r.Router))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac}),e}(),We={environment:"prod"};function Qe(e){return function(){return e.load()}}var Je,Ye=function(){function e(e,t,n,r){this.document=e,this.http=t,this.platformId=n,this.nodeIsProduction=r,this.environment={environment:""}}return e.prototype.getEnvironment=function(){return this.environment},e.prototype.load=function(){var e=this;if(this.isProduction())return this.environment=We,Promise.resolve();var t=n.isPlatformServer(this.platformId)||-1===window.location.hostname.indexOf("chariotwcmspa")?"/":"";return this.http.get(t+"assets/shell/environments/environment.qa.json").toPromise().then((function(t){e.environment=t}))},e.prototype.isProduction=function(){return n.isPlatformServer(this.platformId)?this.nodeIsProduction:/www[\w\d]*\.capitalone\.com/i.test(this.document.location.hostname)},e.Éµfac=function(r){return new(r||e)(t.ÉµÉµinject(n.DOCUMENT),t.ÉµÉµinject(i.HttpClient),t.ÉµÉµinject(t.PLATFORM_ID),t.ÉµÉµinject("nodeIsProduction",8))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}(),Ze=new t.InjectionToken("LobName"),Xe={bank:"bank","cap-one-tech":"tech",commercial:"enterprise","content-only":"enterprise",homepage:"enterprise","learn-grow":"enterprise",military:"enterprise",relief:"enterprise"},et=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[xe,{provide:r.UrlSerializer,useClass:Ge},{provide:t.APP_INITIALIZER,useFactory:Qe,deps:[Ye],multi:!0}]}},e.forLOB=function(t){return{ngModule:e,providers:[Ae,He,Ke,xe,{provide:Be,useClass:qe},{provide:Ze,useValue:t},{provide:Fe,useValue:Xe[t]||"enterprise"}]}},e.Éµmod=t.ÉµÉµdefineNgModule({type:e}),e.Éµinj=t.ÉµÉµdefineInjector({factory:function(t){return new(t||e)}}),e}(),tt=function(){function e(){this.tileArrayLength=10}return e.prototype.getFilteredTiles=function(e){return this.filterArray(e,this.getOriginalTileArray())},e.prototype.getTopicArray=function(){return this.topicArray},e.prototype.setTopicArray=function(e){this.topicArray=e},e.prototype.getOriginalTileArray=function(){return this.originalTileArray},e.prototype.setOriginalTileArray=function(e){this.originalTileArray=e},e.prototype.filterArray=function(e,t){var n=this;return this.newTileArray=[],t.forEach((function(t){e.forEach((function(e){t.primaryTopics.forEach((function(r){r===e&&(n.newTileArray.indexOf(t)>-1||n.newTileArray.push(t))}))}))})),this.newTileArray},e.prototype.getNewTileSet=function(e,t,n){this.tileArrayLength=Math.min(e.length,10);for(var r=this.tileArrayLength-1;r>=0;r--)if(t[e[r].hippoIdentifier]){var i=e[r];e.splice(r,1),e.length<9?e.push(i):e.splice(n?10:14,0,i)}return e},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac=function(t){return new(t||e)},providedIn:"root"}),e}(),nt=function(){function e(){}return e.prototype.getTopicLabel=function(e){if(!e)return"";var t=e.split("/"),n=t[t.length-2].replace(/-/g," ").toLowerCase()||"";return-1!==["tech innovation","privacy security"].indexOf(n)&&(n=n.replace(" "," & ")),n},e.prototype.getTopicUrl=function(e){if(!e)return e;var t=e.split("/");return t.length<4?t.join("/")+"/":t.slice(0,-1).join("/")+"/"},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac=function(t){return new(t||e)},providedIn:"root"}),e}();!function(e){e.left="grv-row--sm-start",e.center="grv-row--sm-center",e.right="grv-row--sm-end"}(Je||(Je={}));var rt,it,ot=function(){function e(){}return e.prototype.getGrvAlignmentClass=function(e){return e&&Je.hasOwnProperty(e)?this.getGravityAlignmentClass(e):Je.left},e.prototype.getGravityAlignmentClass=function(e){return Je[e]},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac=function(t){return new(t||e)},providedIn:"root"}),e}(),at={},ct=function(){function e(){}return e.prototype.setValue=function(e,t){at[e]=t},e.prototype.getValue=function(e){return at[e]},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac=function(t){return new(t||e)},providedIn:"root"}),e}(),st=function(){function e(){this.actionAlertSource=new o.Subject,this.topicPageFilterState=new o.BehaviorSubject(!1),this.filterArrayObserver=new o.Subject,this.actionAlert$=this.actionAlertSource.asObservable(),this.topicPageFilterState$=this.topicPageFilterState.asObservable(),this.filterArray$=this.filterArrayObserver.asObservable()}return e.prototype.sendAlert=function(e){this.actionAlertSource.next(e)},e.prototype.toggleTopicPageFilterClass=function(){!1===this.topicPageFilterState.getValue()?this.topicPageFilterState.next(!0):this.topicPageFilterState.next(!1)},e.prototype.filterArraySend=function(e){this.filterArrayObserver.next(e)},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac=function(t){return new(t||e)},providedIn:"root"}),e}();(rt=e.DataSource||(e.DataSource={})).Cookie="Cookie",rt.LocalStorage="LocalStorage",rt.SessionStorage="SessionStorage",rt.Service="Service",rt.Static="Static",(it=e.FetchOnError||(e.FetchOnError={})).NotFound="NotFound",it.Silent="Silent";var ut=function(){function e(e){this.platformId=e,this.videoComponentRefs=[],this._isScriptInjected=!1,this.isServer=n.isPlatformServer(this.platformId)}return e.prototype.addComponentRef=function(e){this.videoComponentRefs.push(e)},Object.defineProperty(e.prototype,"isScriptInjected",{get:function(){return this._isScriptInjected},set:function(e){this._isScriptInjected=e},enumerable:!0,configurable:!0}),e.prototype.insertIframes=function(){var e=this;this.isServer||(window.yt?this.createYouTubePlayer():window.onYouTubeIframeAPIReady=function(){e.createYouTubePlayer()})},e.prototype.createYouTubePlayer=function(){this.isServer||this.videoComponentRefs.forEach((function(e){var t=e.getPlayerConfig();t&&(window["player-"+t.videoId]=new window.YT.Player(t.videoId,t))}))},e.Éµfac=function(n){return new(n||e)(t.ÉµÉµinject(t.PLATFORM_ID))},e.Éµprov=t.ÉµÉµdefineInjectable({token:e,factory:e.Éµfac,providedIn:"root"}),e}(),pt=function(e){function n(t){var n=e.call(this)||this;return n.newRelic=t,n}return ge(n,e),n.prototype.handleError=function(t){this.newRelic.noticeError(this.getErrorMessage(t),me({},t)),e.prototype.handleError.call(this,t)},n.prototype.getErrorMessage=function(e){if("object"==typeof e&&null!==e){var t=["rejection","message"],n=Object.keys(e).find((function(e){return t.includes(e)}));return n?e[n]:e}return e},n.Éµfac=function(e){return new(e||n)(t.ÉµÉµinject(Pe))},n.Éµprov=t.ÉµÉµdefineInjectable({token:n,factory:n.Éµfac,providedIn:"root"}),n}(t.ErrorHandler);e.AdobeTargetArticleTestFolder="/article-tests/",e.AdobeTargetResolverService=Ke,e.AdobeTargetService=$e,e.AdobeTargetTestFolder="/tests/",e.AnalyticsInterface=Be,e.AnalyticsService=qe,e.ApiUrlsService=$,e.AppOwner=Fe,e.ArticleGridUtilityService=tt,e.BaseApiUrlsService=V,e.BaseComponentComponent=se,e.BloomreachExperienceNgSdkModule=he,e.CmsConfigToken=Ce,e.CmsEditButtonComponent=pe,e.CmsSdkService=Ae,e.ComponentMappingsService=H,e.ComponentMappingsToken=ze,e.ComponentObserverService=st,e.ComponentTestService=De,e.CustomErrorHandler=pt,e.EnterpriseCoreModule=et,e.EnvironmentService=Ye,e.GaService=Ne,e.GeographicalDataService=Le,e.GrvMapService=ot,e.ImageUrlService=ee,e.InitializeSdkService=fe,e.InternalLinkService=xe,e.LinkUtilityService=nt,e.LobName=Ze,e.MemoryCache=Se,e.NewRelicService=Pe,e.PageDataService=ct,e.PageModelService=X,e.REQUEST=W,e.RenderCmsComponent=le,e.RequestContext=K,e.RequestContextService=Q,e.RouteDataResolverService=He,e.SingleContentComponent=ue,e.TrailingSlashUrlSerializer=Ge,e.VideoHelperService=ut,e.getComponentConfiguration=oe,e.getCtaText=function(e){return null!=e&&{article:"Read More",audio:"Listen Now",video:"Watch Now"}[e]||"Read More"},e.getFormattedArticleTime=function(e,t){var n={article:"min read",video:"min video",audio:"min listen"};return e&&t&&n[t]&&t?e+" "+n[t]:e||""},e.getMappedComponent=ae,e.getNestedObject=J,e.nestedObject=Ee,e.parseMetaData=function(e){var t={};return Array.isArray(e)&&e.forEach((function(e){var n=void 0===e?{}:e,r=n.key,i=n.value;Array.isArray(i)&&(t[r]=i[0].name)})),t},e.siteCmsRegExp=je,e.Éµa=te,e.Éµb=ne,e.Éµc=re,e.Éµd=ie,Object.defineProperty(e,"__esModule",{value:!0})}));