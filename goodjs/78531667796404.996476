!function(){var e,t,n,w,o,r,a,i,s,l,c,d,p,u,h,_,g,m,f,y,T,v,x,C,b,S,P,D,I,L,B,k,E,M,O,R,A;try{A={L_OverlayEntity_AddMyPlaces:"添加到收藏夹",L_OverlayEntity_SaveAsFavorite:"另存为收藏",L_OverlayEntity_SaveAs:"另存为...",L_OverlayEntity_Save:"保存...",L_OverlayEntity_MoveTo:"移至",L_AddNickNameOption:"添加昵称",L_AddNoteOption:"添加描述",L_EditNickNameOption:"编辑昵称",L_EditNoteOption:"编辑描述",L_DeleteEntityOption:"删除",L_EditEntityOption:"编辑",L_DeleteNickNameOption:"删除昵称",L_DeleteNoteOption:"删除描述",L_EditHomeWorkOption:"编辑",L_HideHomeWorkOption:"不在常规地图上显示",L_DisplayHomeWorkOption:"总是在地图上显示",L_OverlayEntity_AddPushpin:"添加标注",L_OverlayEntity_Directions:"路线",L_OverlayEntity_DirectionsTo:"路线目的地",L_OverlayEntity_DirectionsFrom:"路线出发地",L_OverlayEntity_AddToRoute:"添加到路线",L_OverlayEntity_AddToItineraries:"保存到{0}",L_OverlayEntity_MoveToDay:"移至",L_OverlayEntity_Nearby:"附近",L_OverlayEntity_OpenCard:"显示详情",L_OverlayEntity_OpenNewCard:"打开为新卡",L_TrafficScheduledConstruction_Text:"规划建筑",L_TrafficOtherNews_Text:"其他新闻",L_TrafficCongestion_Text:"拥堵",L_TrafficAccident_Text:"事故",L_TrafficDisabledVehicle_Text:"禁止通行的车辆",L_TrafficRoadHazard_Text:"危险道路",L_TrafficUnScheduledContruction_Text:"无规划建筑",L_TrafficPlannedEvent_Text:"计划的事件",L_TrafficMassTransit_Text:"交通事故",L_TrafficWeather_Text:"天气警报",L_TrafficMiscellaneous_Text:"其他",L_TrafficSeverityMinor_Text:"轻度",L_TrafficSeverityModerate_Text:"中度",L_TrafficSeveritySerious_Text:"严重",L_TrafficSeverityLowImpact_Text:"影响很小",L_TrafficPopupSeverity_Text:"严重程度:",L_TrafficPopupStartTime_Text:"开始时间:",L_TrafficPopupEstEndTime_Text:"预计结束时间:",L_TrafficPopupDescription_Text:"描述:",L_TrafficCurrentCameraImage_Text:"{0} 处的当前交通状况图像",L_TrafficPreviewCameraImage_Text:"{0} 处的交通状况图像的缩略图预览",L_TrafficRecentCamerasTitle:"近期监视的摄像机",L_TrafficPopularCamerasTitle:"常用摄像机",L_TrafficIncidentsTitle:"通知",L_TrafficLegendsTitle:"交通图例",L_TrafficLegendsHeavy:"拥堵",L_TrafficLegendsModerate:"中等",L_TrafficLegendsLight:"畅通",L_TrafficLegendsNoTraffic:"无交通流量",L_TrafficLegendsClosed:"道路已封闭",L_TrafficLegendsSlow:"慢",L_TrafficLegendsFast:"快",L_TrafficModuleMoreLink:"展开",L_TrafficModuleLessLink:"收起",L_TrafficBackButtonText:"返回到摘要",L_TrafficTaskTitle_Text:"交通",L_TrafficsZoomInNotification:"放大以查看更多摄像头",L_TrafficsNoCameraNotification:"抱歉，此区域没有摄像头",L_TrafficsToggleCameras:"相机",L_TrafficCameraDirectionNorth_Text:"摄像头朝北",L_TrafficCameraDirectionSouth_Text:"摄像头朝南",L_TrafficCameraDirectionEast_Text:"摄像头朝东",L_TrafficCameraDirectionWest_Text:"摄像头朝西",L_Traffic_Camera_Tip:"查看照相机：",L_InfoboxCloseToolTip_Text:"关闭",L_TrafficCameraDisclaimer_Text:"驾驶时切勿查看交通摄像头图片。法律规定，只要引擎运行，当事人就被视为正在驾驶车辆。",L_StreetsideNoCoverageInstructions_Text:"点击突出显示的道路可进入 Streetside。",L_NavBarLocateMeToolTip_Text:"定位我的位置",L_NavBarMapSwitcherToolTip_Text:"更改地图样式",L_NavBarRotateCCToolTip_Text:"向左旋转",L_NavBarRotateToolTip_Text:"重置方向",L_NavBarRotateCToolTip_Text:"向右旋转",L_NavBarStreetsideLabel_Text:"街景视图",L_NavBarTrafficLabel_Text:"交通",L_NavBarBirdseyeV2ExitTip_Text:"退出鸟瞰图",L_NavBarBirdseyeV2NotAvailableTip_PrimaryText:"除此之外无可用图像",L_NavBarBirdseyeV2NotAvailableTip_SecondaryText:"平移到其他覆盖区域",L_NavBarBirdseyeV2NotAvailableRotationTip_PrimaryText:"旋转不可用",L_NavBarZoomInToolTip_Text:"放大",L_NavBarZoomOutToolTip_Text:"缩小",L_NavBarCloseRadialMenuToolTip_Text:"关闭",L_NavBarOpenRadialMenuToolTip_Text:"查看鸟瞰图等...",L_StreetsideNoCoverageInMapView_Text:"Streetside 在此处不可用，请按 ESC 退出。",L_StreetsideMobileNoCoverageInMapView_Text:"Streetside 在此处不可用。",L_OverlayEntity_Streetside:"查看街景视图",L_OverlayEntity_BirdseyeV2:"查看俯视图",L_OverlayEntity_Zoom:"放大",L_ScaleBarKilometers_Text:"千米",L_ScaleBarMeters_Text:"米",L_ScaleBarMiles_Text:"英里",L_ScaleBarYards_Text:"码",L_ScaleBarFeet_Text:"英尺",L_LocateMe_ChangeSettings_Text:"手动更改我的位置设置",L_LocateMe_Error_Text_Approximate_Location:"无法检索到您的确切位置，但可能位于这一区域。",L_LocateMe_Error_Text_Setting:"无法检索到您的确切位置。这是您的默认位置设置。",L_StreetsideAutoEntryTooltip_Text:"单击蓝线可进入 Streetside。",L_CurrentMapTypeToolTip_Text:"当前地图类型: {mapStyle}",L_RadialMenuAerialButtonToolTip_Text:"航测图",L_RadialMenuAerialButtonDescription_Text:"从上向下看的详细视图",L_RadialMenuBirdseyeButtonToolTip_Text:"鸟瞰图",L_RadialMenuBirdseyeButtonDescription_Text:"更好角度的空中摄影",L_RadialMenuOrdnanceSurveyButtonToolTip_Text:"地形测量局",L_RadialMenuOrdnanceSurveyButtonDescription_Text:"户外生存地图(仅英国)",L_RadialMenuRoadButtonToolTip_Text:"道路",L_RadialMenuRoadButtonDescription_Text:"标准道路地图",L_RadialMenuStreetsideButtonToolTip_Text:"街景视图",L_RadialMenuStreetsideButtonDescription_Text:"平视考察",L_DropDownMenuLabelToggleButtonToolTip_Text:"标签",L_DropDownMenuLabelToggleButtonDescription_Text:"适用于航测图和鸟瞰图",L_OverlayEntity_AddAPushpin:"添加图钉控件",L_WalkingTime:"步行 {0} 分钟",L_NearbyParkingTitle:"{0} 附近的停车场",L_NearbyParkingError:"抱歉，附近没有找到停车场!",L_CameraImageErrorText:"此摄像头的原始数据当前不可用。请稍后重试。",L_OverlayEntity_Coordinates:"坐标",L_OverlayEntity_Copy_Coordinates:"复制",L_OverlayEntity_Copy_Succeeded:"已复制",L_OverlayEntity_ZoomOut:"缩小",L_OverlayEntity_Measure:"测量距离",L_GeochainWorldText:"世界",L_NavBarMapTypeSwitcherToolTip_Text:"切换到 {0}",L_NavBarTrafficToggleToolTip_TurnOn_Text:"打开流量",L_NavBarTrafficToggleToolTip_TurnOff_Text:"关闭流量",L_DropDownMenuLabelToggleButtonDescription_Text_AerialOnly:"鸟瞰图",L_DropDownMenuLabelToggleButtonDescription_Text_RoadAerial:"公路和卫星图",L_DropDownMenuLabelToggleButtonDescription_Text_RoadAerialBirdseye:"公路、卫星和鸟瞰图",L_NavBarOpenRadialMenuToolTip_NoBirdseye_text:"查看卫星图及更多信息...",L_RadialMenuLabelToggleToolTip_Text:"打开或关闭标签",L_RadialMenuLabelToggleDisabled_Text:"禁用",L_DraggableList_Keyboard_Drag_Start_Hint:"按 Enter 以选择当前行，然后使用向上箭头键和向下箭头键进行重新排序。再次按 Enter 可取消选择",L_DraggableList_Keyboard_Drag_Move_Hint:"使用向上和向下箭头键重新排序。按 Enter 取消选择。",L_DraggableList_Keyboard_Drag_Top_Error_Hint:"已处于顶部位置",L_DraggableList_Keyboard_Drag_Bottom_Error_Hint:"已处于底部位置",L_ZoomInButtonAriaLabel:"当前级别 {0}，放大",L_ZoomOutButtonAriaLabel:"当前级别 {0}，缩小",L_ZoomButtonAriaLabelDisabled:"已禁用",L_CameraCloseAriaLabel:"关闭摄像头弹出窗口",L_RadialMenuRoadDarkButtonToolTip_Text:"夜间",L_RadialMenuRoadDarkButtonDescription_Text:"夜间路线图",L_RadialMenuGrayscaleButtonToolTip_Text:"灰度",L_RadialMenuGrayscaleButtonDescription_Text:"灰度图",L_RadialMenuCanvasDarkButtonToolTip_Text:"深色画布",L_RadialMenuCanvasDarkButtonDescription_Text:"深色图",L_RadialMenuCanvasLightButtonToolTip_Text:"浅色画布",L_RadialMenuCanvasLightButtonDescription_Text:"浅色图",L_GeochainTitle_Text:"展开/折叠 Geochain",RadialMenuBirdseyeV2ButtonDescriptionText:"我们更新了鸟瞰图。{0}",RadialMenuBirdseyeV2ButtonAlternateText:"了解更多",L_NavVarBirdseyeV2TipClose:"关闭",RadialMenuTitle:"地图样式",L_TrafficRemoveAllRecentCamerasLink:"全部移除",L_TrafficRemoveRecentCameraToolTip_Text:"移除位于 {0} 的摄像头",MapsTimeSelect:"选择这个时间",CalendarEmptyDays:"这些日子在本月无效",CalendarNextMonth:"转到 {0}",TrafficCameraAriaLabel:"放大显示 {0} 的摄像头图像",TrafficCameraName:"{0} 处的交通摄像头",TrafficCameraToggleButtonAriaLabel:"显示交通摄像头切换按钮",SpinBoxHoursLabel:"小时",SpinBoxMinutesLabel:"分钟",SpinBoxAmPmLabel:"上午或下午",L_BaseListMapMobile_Toggle_List:"列表",L_BaseListMapMobile_Toggle_Map:"地图",L_MyPlacesButton_Label:"我的地点",ClickToSelect:"选中以选择",ClickToUnselect:"取消选中以取消选择",L_Search_This_Area_Label:"在此区域中搜索",LandmarkDealsMore_Text:"还有 {0} 个",L_TrafficDateTimeFormat:"{0} {1}",L_CmtButtonTooltip:"commutability entrance",SearchBoxSearchGhostText:"Search Bing Maps"},window.$MicrosoftMaps8.ResourceManager?window.$MicrosoftMaps8.ResourceManager.init("MapDelay",A):window.$MicrosoftMaps8.ResourcesObject=A;var N=window.$MicrosoftMaps8,Y=N.Internal,X=Y._Binding,F=(Y._BoundsAccumulator,Y.CanvasDrawingContext),V=Y.ControlTemplate,H=Y._Debug,j=(Y._Dispatcher,Y._GeometryGeneralizer),W=Y._Gimme,K=Y._Helper,G=Y._JSEvent,z=Y._LruCache,U=Y._ObjectWithId,Z=Y._Observable,$=Y._ObservableCollection,J=Y._ObservableObject,q=N.ResourceManager.MapDelay,Q=Y._Url,ee=(Y._VectorMath,N.Anchor),te=(N.LocationRect,N.ResourceManager.MapDelay),ne=N.Rectangle,oe=(N.PixelCrs,N.Point),re=N.Size,ae=N.SimplePointPrimitive,ie=(N.ZoomLevel,N.GlobalConfig),se='<div id="{Binding primitive.entity.id}" class="infoboxOverlay">    <div class="infoboxTitle">        <TextBlock Text="{Binding primitive.entity.title}" />    </div>    <div class="infoboxDescription">        <TextBlock Text="{Binding primitive.entity.description}"/>    </div>    <div class="infoboxActions">        <ul class="infoboxActionList">            <ItemsControl ItemsSource="{Binding primitive.entity.actions}">                <ItemsControl.ItemTemplate>                    <DataTemplate>                        <li>                            <a href="#" title="{Binding text}" class="{Binding cssClass}" event:click="handler" data-task="{Binding taskData}" />                        </li>                    </DataTemplate>                </ItemsControl.ItemTemplate>            </ItemsControl>        </ul>    </div></div>',le='<div class="{TemplateBinding open Converter=openToClass}" data-tag="timeControl">    <SpinBox ItemsSource="{TemplateBinding col0Source}" Open="{TemplateBinding open}" Index="{TemplateBinding col0Index Mode=TwoWay}" event:openEvent="onOpen" TaskId="{TemplateBinding taskId}" />    <SpinBox ItemsSource="{TemplateBinding col1Source}" Open="{TemplateBinding open}" Index="{TemplateBinding col1Index Mode=TwoWay}" event:openEvent="onOpen" TaskId="{TemplateBinding taskId}" />    <SpinBox ItemsSource="{TemplateBinding col2Source}" Open="{TemplateBinding open}" Index="{TemplateBinding col2Index Mode=TwoWay}" event:openEvent="onOpen" TaskId="{TemplateBinding taskId}" />    <a href="#" class="dropdown" event:click="onDropdown" role="button" aria-label="{TemplateBinding ariaLabel}" aria-expanded="{TemplateBinding open}" event:mouseover="onHover"></a>    <div style="clear:both"></div></div>',ce=this&&this.__extends||(R=function(e,t){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),de=(Qe.prototype.applyControlTemplate=function(e,t){return this._controlArgs=t,this._applyTemplate(this._parsed,e,null)},Qe.prototype.applyDataTemplate=function(e){return this._applyTemplate(this._parsed,{dataContext:e},null)},Qe.prototype.dispose=function(){K._clearDisposables(this._disposables),this._disposables=[]},Qe.prototype._applyTemplate=function(e,t,n){if(e.tagName)return this._applyTag(e,t,n);if(e instanceof Array)return this._applyArray(e,t,n);if("string"==typeof e)n&&n.appendText?n.appendText(e):n.append(e);else{if(!e||!e.extensionTag)throw new Error("Unsupported template");switch(e.extensionTag){case"Binding":case"TemplateBinding":return this._applyBinding(e,t,n);case"StaticBinding":return this._applyBinding(e,this._staticResources,n);default:throw new Error("Unsupported extension tag: "+e.extensionTag)}}},Qe.prototype._createPseudoParent=function(t,n){return{append:function(e){return Z.setValue(t,n,e),this},obj:t,property:n}},Qe.prototype._applyBinding=function(e,t,n){var o,r=this,a=n.obj,i=n.property,s=e.namedParams||{},n=e.args||{},e="Binding"===e.extensionTag?"dataContext":"";return n[0]&&(e.length&&(e+="."),e+=n[0]),n=s.Mode||"OneWay",o=null,s.Converter&&(o=this._staticResources[s.Converter]),n=new X(t,e,a,i,function(e){return o?o.call(r._staticResources,e):e},n),this._disposables.push(n),n},Qe.prototype._applyTag=function(e,t,n){function o(e,t){t&&(t.dispose&&e.push(t),(t=t[Qe._controlDisposableProperty])&&t.length&&Array.prototype.push.apply(e,t))}var r,a,i,s,l,c,d,p,u,h,_,g,m=e.tagName;switch(m){case"ItemsPresenter":return this._applyItemsPresenter(e,t,n,"itemsSource","itemTemplate"),null;case"ContentPresenter":return r=e.attr.content||"content",this._applyItemsPresenter(e,t,n,r,"contentTemplate"),null;case"PopOutPresenter":return this._applyItemsPresenter(e,t,n,"popOutContent","popOutTemplate"),null;case"TabbedPresenter":return this._applyItemsPresenter(e,t,n,"tabContent","tabTemplate"),null;case"DataTemplate":case"ControlTemplate":return r=new Qe(e.content[0],this._staticResources,this._controlFactory),this._disposables.push(r),n&&n.append&&n.append(r),r}if(2===(i=m.split(".")).length){if(1!==e.content.length)throw new Error("Node property expression must have exactly 1 child");return this._applyTemplate(e.content[0],t,this._createPseudoParent(n,i[1]))}if(!(a=this._controlFactory(m,this._controlArgs)))throw new Error("Unable to create "+m);if((i=a).dispose&&this._disposables.push(i),c=[],l=e.attr)for(s in l)if(l.hasOwnProperty(s)){if(d=l[s],1===(p=s.split(":")).length)u=this._applyTemplate(d,t,this._createPseudoParent(a,s));else if(2===p.length)switch(p[0]){case"event":u=this._addHandler(a,p[1],d,t.dataContext);break;case"style":u=this._applyTemplate(d,t,this._createPseudoParent(a[0].style,p[1]))}u&&u.dispose&&c.push(u)}if(n&&n.append(a),e.content)if("style"===m&&a[0].styleSheet)a[0].styleSheet.cssText=e.content;else if(h=this._applyTemplate(e.content,t,a))if(h instanceof Array)for(_=0,g=h.length;_<g;_++)o(c,h[_]);else o(c,h);return c.length&&(a[Qe._controlDisposableProperty]=c),a},Qe.prototype._addHandler=function(e,t,n,o){var r,a=this,i=o&&Z.getValue(o,n),s=this._staticResources&&this._staticResources[n];if(i)r=function(e){return i.call(o,e)};else{if(!s)return null;r=function(e){return s.call(a._staticResources,e)}}return n=e[t]instanceof G?e[t].add(r):(e.add_event(t,r),{dispose:function(){e.remove_event(t,r)}}),this._disposables.push(n),n},Qe.prototype._applyItemsPresenter=function(e,o,a,r,i){function t(){var e=Z.getValue(o,r),t=Z.getValue(o,i),n=Z.getValue(o,"itemContainerGenerator");e===d&&t===p&&n===u||(h&&h.dispose(),p=t,u=n,(d=e)&&(s(),h=d.changed&&d.changed.add(s),_._disposables.push(h)))}function s(e){var t,n,o,r,a;if((e=e||{reset:!0}).reset||e.removed){if(c=g.nextSibling,e.removed)for(t=e.removedIndex;t--;)c=c&&c.nextSibling;for(t=0;c&&c!==m&&(!e.removed||t<e.removed.length);)n=c.nextSibling,c.dispose&&c.dispose(),K._clearDisposables(c[Qe._controlDisposableProperty]),c.parentNode.removeChild(c),c=n,t++}if(e.reset||e.added){if(c=g.nextSibling,e.added)for(t=e.addedIndex;t--;)c=c.nextSibling;if(o=c,"string"==typeof(r=e.added||d)||"number"==typeof r.nodeType)l(r,o);else if(r instanceof Array||r instanceof $)for(a=r.length,t=0;t<a;t++)l(r[t],o);else l(r,o)}}function l(e,t){var n=_._renderData(e,p),o=n,r=u&&u.generateNext(e);r&&r.append(n);e=n[Qe._controlDisposableProperty];((o=r||n)[0]||o)[Qe._controlDisposableProperty]=e,a.insertBefore(o,t)}var c,d,p,u,h,_=this,g=document.createTextNode(""),m=document.createTextNode("");a.append(g).append(m),t(),this._disposables.push(o.changed.add(t))},Qe.prototype._applyArray=function(e,t,n){for(var o=[],r=0;r<e.length;r++)o.push(this._applyTemplate(e[r],t,n));return o},Qe.prototype._renderData=function(e,t){return t?t.applyDataTemplate(e):e&&"number"==typeof e.nodeType?e:document.createTextNode(e?e.toString():"")},Qe._parseTemplate=function(e){function t(e){var t=u[u.length-1];"string"==typeof e&&0===(e=e.replace(d,"").trim()).length||(t?(t.content||(t.content=[]),t.content.push(e)):p=e)}var n,o,r;"#"===e.charAt(0)&&(e=document.getElementById(e.substr(1)).text);for(var a,i,s,l=/<\/?(?:(\w+):)?([\w\.]+)(?:\s*(?:\w+\:)?[\w\-]+=(?:"[^"]*"|'[^']*')\s*)*\s*(\/?)>/g,c=/((?:\w+\:)?[\w\-]+)=(?:"([^"]*)"|'([^']*)')/g,d=/<!--[\s\S]*?-->/g,p=null,u=[],h=0;a=l.exec(e);)if(a.index>h&&t(e.substring(h,a.index)),h=a.index+a[0].length,n=a[2],"/"===a[0].charAt(1)){if((s=u.pop()).tagName!==n)throw new Error("Unmatched ending tag: "+n)}else{for(o={};i=c.exec(a[0]);)r=function(e){var t,n,o,r,a,i,s;if(!(t=/\{(\w+)(\s+([^\}]+))?\}/g.exec(e)))return e;if(e={extensionTag:t[1]},t[2]){for(n=(n=t[2]).trim().split(" "),o=[],r={},a=0;a<n.length;a++)-1===(s=(i=n[a]).indexOf("="))?o.push(i):r[i.substring(0,s)]=i.substring(s+1);e.args=o,e.namedParams=r}return e}(i[2]||i[3]||""),o[i[1]]=r;t(s={tagName:n,namespace:a[1],attr:o}),"/"!==a[3]&&u.push(s)}return p},Qe._controlDisposableProperty="$ctrl_disp$",Qe),V=(ce(qe,O=de),qe.registerControl=function(e,t){qe._controls[e]=t},qe.createControl=function(e,t){var n=qe._controls[e];return n?new n(t):K._createElement(e)},qe._controls={},qe._textPrototypeAdded=!1,qe),pe=(ce(Je,M=U),Je.prototype.getStyle=function(){return this._style},Je.prototype.render=function(e,t,n,o,r){return this.renderGroup(e,[t],n,o,r)},Je.prototype.renderGroup=function(e,t,n,o,r){var a,i,s,l,c,d=o?null:e.getRawContext(),p=n.zoom;o||e.setStyle(this._style,r);var u=[],h=n instanceof N.Viewport?n.getRectangle():null,_=0,g=0;for(n.bounds[3]<n.crs.bounds[3]&&(_=1),n.bounds[1]>n.crs.bounds[1]&&(g=1),l=0;l<t.length;l++){b=t[l],o||e.setPrimitive(b),i!==b.crs&&(i=b.crs,a=(s=new w(i,n)).getMatrix());var m,f=b.geometry,y=b.geometryType,T=f.boundingBox,v=T&&T.crossesInternationalDateLine(!0);if(m=!v&&a?this._renderMatrixTransform(e,d,f,y,a,o):m)u=[m];else{H.logShapePrimitive(b);var x=0,C=0,b=T&&T.originalBounds;for(v&&b&&isFinite(b[1])&&isFinite(b[3])&&(b=Math.min(T.originalBounds[1],T.originalBounds[3]),T=Math.max(T.originalBounds[1],T.originalBounds[3]),C=Math.round(-b/360),x=Math.round(-T/360)),C+=g,c=x-=_;c<=C;c++)u.push(this._renderProjectionTransform(e,d,f,y,s,p,c,h,o))}}return this._matrixTransformed&&(o||d.restore(),this._matrixTransformed=null),o||e.flush(),u},Je.prototype.getIsHitTestable=function(){return 1===this._style.hitTest},Je.prototype._renderMatrixTransform=function(e,t,n,o,r,a){function i(e,t,n,o){var r,a,i={points:[]},s=e.x,l=e.y,c=s.length;if(0<c){for(var d=l[0],p=s[0],u=l[0],h=s[0],_=0;_<c;_++)r=s[_],a=l[_],d=Math.min(d,a),p=Math.min(p,r),u=Math.max(u,a),h=Math.max(h,r),i.points.push(new oe(r,a)),o||(0===_?n.moveTo(r,a):t.lineTo(r,a,s[_-1],l[_-1]));i.top=d,i.left=p,i.width=h-p,i.height=u-d}return i}var s,l,c=null;if(this._matrixTransformed!==r){if(this._matrixTransformed&&(a||t.restore(),this._matrixTransformed=null),2===o&&.1<Math.abs(Math.abs(r[0]/r[3])-1))return c;a||(t.save(),t.lineWidth*=1/r[0],t.transform.apply(t,r.getValues())),this._matrixTransformed=r}switch(c={shapes:[],type:o,style:this._style},o){case 2:c.shapes.push(i(n,e,t,a)),a||e.stroke();case 3:for(s=n.rings,l=0;l<s.length;l++)c.shapes.push(i(s[l],e,t,a)),a||t.closePath();a||(e.stroke(),e.fill())}return c},Je.prototype._renderProjectionTransform=function(e,t,n,o,r,a,i,s,l){var c,d,p,u;switch(this._matrixTransformed&&(l||t.restore(),this._matrixTransformed=null),c={shapes:[],type:o,style:this._style},o){case 2:this._renderProjection(e,t,n,o,r,a,i,s,l,d={}),d.points&&c.shapes.push(d),l||e.stroke();break;case 3:for(p=n.rings,u=0;u<p.length;u++)this._renderProjection(e,t,p[u],o,r,a,i,s,l,d={}),d.points&&c.shapes.push(d),l||t.closePath();l||(e.stroke(),e.fill())}return c},Je.prototype._renderProjection=function(e,t,n,o,r,a,i,s,l,c){var d,p,u,h;(!n.rawX||r.destinationCrs!==n.projectedCrs||n.projectedCrs&&n.projectedCrs.sceneMetadata)&&(n.rawX=[],n.rawY=[],n.projectedCrs=r.destinationCrs);var _=!ie.glPolyline||2!==o||this._style.dashes&&0!==this._style.dashes.length?j.instance.getGeneralizations(n,a,r):null,g=[],a=r.destinationCrs&&r.destinationCrs.sceneMetadata,m=K._getCoreConfig().be2PolygonFix&&3===o&&a&&a.getBoundsRectangle();r.calculateProjectedCoordinates(0,n,i,m),d=r.lastProjectedX,p=r.lastProjectedY,l||t.moveTo(d,p),g.push(new oe(d,p));for(var f,y=(_||n.x).length,T=p,v=d,x=p,C=d,b=3===o,w=!1,S=1;S<y;S++)f=_?_[S]:S,r.calculateProjectedCoordinates(f,n,i,m),u=r.lastProjectedX,h=r.lastProjectedY,s?(f=ne.fromSides(d,u,p,h),b||(s.intersects(f)?(w=!0,l||e.lineTo(u,h,d,p)):l||t.moveTo(u,h))):l||e.lineTo(r.lastProjectedX,r.lastProjectedY,d,p),d=u,p=h,T=Math.min(T,p),v=Math.min(v,d),x=Math.max(x,p),C=Math.max(C,d),g.push(new oe(d,p));if(s&&b&&(o=ne.fromPoints.apply(ne,g),w=s.intersects(o),!l&&w))for(S=1;S<y;S++)e.lineTo(g[S].x,g[S].y,g[S-1].x,g[S-1].y);c.points=g=s&&!w?null:g,c.top=T,c.left=v,c.width=C-v,c.height=x-T},Je),ue=(ce($e,E=U),$e.prototype.render=function(e,t,n,o,r,a){return this.renderGroup(e,[t],n,o,r,a)},$e.prototype.renderGroup=function(e,t,n,o,r,a){var i,s=[];if(t&&this._image)for(i=0;i<t.length;i++){var l=t[i],c=l.geometry,d=new w(l.crs,n);d.project(c.x,c.y),l=o?this.renderData(e.getDevicePixelRatio(),l.entity,d.lastProjectedX,d.lastProjectedY,r,a,l):this.renderCanvas(e,l.entity,d.lastProjectedX,d.lastProjectedY,r,a,l),s.push(l)}return s},$e.prototype.getBounds=function(){var e=this._getMetrics(),t=e.anchorX,n=e.anchorY,o=e.scaleX,r=e.scaleY;return ne.fromSides(-o*t,o*(e.width-t),-r*n,r*(e.height-n))},$e.prototype.getIsHitTestable=function(){return!0},$e.prototype.getHitTestShape=function(){return this._hitTestShape},$e.prototype.setHitTestShape=function(e){this._hitTestShape=e},$e.prototype._prepareBitmapData=function(e,t,n,o,r,a,i){var s,l;void 0===r&&(r=1);var c=n,d=o,p=this._anchor,u=this._image,h=(h=this._image.getAttribute($e.shadowStyleAttribute))&&JSON.parse(h),u=(s=i?Z.getValue(i,"imageSize"):s)?(l=s.width||0,s.height||0):(l=u.naturalWidth||u.width,u.naturalHeight||u.height);r*=this._scale,0===p.units?(n-=r*p.x*l,o-=r*p.y*u):(n-=r*p.x,o-=r*p.y),r=(window.devicePixelRatio||1)*r;n=Math.round(n),o=Math.round(o);return{resultImages:[{drawX:n,drawY:o,width:l*r,height:u*r,source:this._image,shadow:h,anchorAdjustX:n+l/2-c,anchorAdjustY:o+u/2-d}]}},$e.prototype.renderData=function(e,t,n,o,r,a,i){return this._prepareBitmapData(e,t,n,o,r,a,i)},$e.prototype.renderCanvas=function(e,t,n,o,r,a,i){var s;return void 0===r&&(r=1),(a=this._prepareBitmapData(e.getDevicePixelRatio(),t,n,o,r,a,i))&&0<a.resultImages.length&&((i=a.resultImages[0]).shadow&&i.shadow.shadowColor&&(s=e.getStyle(),e.setStyle(i.shadow)),e.drawImage(i.source,i.drawX,i.drawY,i.width,i.height),s&&e.setStyle(s)),a},$e.prototype.getScale=function(){return this._scale},$e.prototype._getMetrics=function(){var e=this._scale,t=this._image.naturalWidth||this._image.width,n=this._image.naturalHeight||this._image.height,o=this._anchor.x,r=this._anchor.y;return 0===this._anchor.units&&(o*=t,r*=n),{anchorX:o,anchorY:r,scaleX:e,scaleY:e,width:t,height:n}},$e.prototype._checkTainted=function(){var e,t=!1;if(K._renderAllPoiAndLabelsGL())if(e=this._image.src,W.Browser.is_ie&&0===e.indexOf("data:image/svg+xml;"))t=!0;else if(0===e.indexOf("http")&&Q.fromString(e).protocolAndDomain()!==Q.fromString(window.location.origin).protocolAndDomain())if(this._image.crossOrigin){e=document.createElement("canvas").getContext("2d");try{e.drawImage(this._image,0,0,1,1),e.getImageData(0,0,1,1),t=!1}catch(e){t=!0}}else t=!0;this.tainted=t},$e.shadowStyleAttribute="data-shadow",$e),he=(Ze.prototype.selectorReady=function(){var t=this;return!this._baseMapTemplateSelector||this._resetTemplateSelector?this._map.getTemplateSelector().then(function(e){return t._baseMapTemplateSelector=e,t._resetTemplateSelector=!1,t._baseMapTemplateSelector.selectorReady()}):this._baseMapTemplateSelector.selectorReady()},Ze.prototype.getMarkupStyle=function(e,t,n){var o;return e&&this._baseMapTemplateSelector&&(o=this._getPoiState(e),!n&&e.entity&&"number"==typeof e.entity.poiType&&(n=e.entity.poiType),o=this._baseMapTemplateSelector.getMarkupStyle(e,t,o,n=n||1)),o},Ze.prototype._getPoiState=function(e){var t=e.viewState,e=2;return 1===t?e=3:2===t&&(e=4),e},Ze.prototype.getTemplates=function(e,t,n){void 0===n&&(n=1);var o=null;return e&&this._baseMapTemplateSelector&&1===e.geometryType&&(e.entity&&void 0!==e.entity.poiType&&(n=e.entity.poiType),o=this._baseMapTemplateSelector.getLandmarkVectorImageTemplate(e,this._getPoiState(e),t,n)),o},Ze),_e=(ce(Ue,k=U),Ue.getDefaultFontFamily=function(e){var t=ie.features.labels,n=e.toLowerCase();return"segoebing"===n?t.useSegoeFontStack?e.concat(", "+Ue._segoeFontStack):Ue._reducedFontStack:"segoe ui"===n?t.useSegoeFontStack?Ue._segoeFontStack:Ue._reducedFontStack:e},Ue.prototype.getVectorImage=function(){return this._image},Ue.prototype.getScale=function(){return this._scale},Ue.prototype.getAnchor=function(){return this._anchor},Ue.prototype.setScale=function(e){this._scale=0===e?0:e||1},Ue.prototype.render=function(e,t,n,o,r,a){return this.renderGroup(e,[t],n,o,r,a)},Ue.prototype.renderGroup=function(e,t,n,o,r,a){var i,s,l,c,d=[];if(t)for(i=0;i<t.length;i++)(s=t[i])&&(l=s.geometry,(c=new w(s.crs,n)).project(l.x,l.y),l=c.lastProjectedX,c=c.lastProjectedY,H.logPoiLayerStyleStart(),o?d.push(this.renderData(e.getDevicePixelRatio(),s.entity,l,c,r,a,s)):d.push(this.renderCanvas(e,s.entity,l,c,r,a,s)),H.logPoiLayerStyleEnd(a),H.logPushpinPrimitive(a,s));return d},Ue.prototype._getTextScale=function(e){var t,n,o,r,a=this._templateTextRecord,i=this._cachedTextScale,s=1;return r=(e=e||"").length||0,(t=i[e])?t:(1<r&&a&&0<a.maxWidth&&1===a.style.horizontalAutoScaling&&(n=Ue._scratchContext,r=(o=this._bounds.getSize().width)-a.maxWidth,"string"!=typeof a.style.fontStyleString&&Ue._processFontStyle(a),n.setFont(a.style.fontStyleString+a.style.fontSize+"pt "+Ue.getDefaultFontFamily(a.style.font)),n=n.getRawContext().measureText(e).width,s=Math.max(1,(r+n)/o)),t=new re(s,1),i[e]=t)},Ue.prototype.getBounds=function(e){var t=this._getMetrics(e),n=t.anchorX,o=t.anchorY,r=t.scaleX,e=t.scaleY,t=this._bounds;return ne.fromSides(r*(t.minPoint.x-n),r*(t.maxPoint.x-n),e*(t.minPoint.y-o),e*(t.maxPoint.y-o))},Ue.prototype._getMetrics=function(e){this._parseRecords();var t=this._bounds,n=t.getSize(),o=n.width,r=n.height,a=this.hasText&&this._getTextScale(e)||{width:1,height:1},i=a.width*this._scale,n=a.height*this._scale,e=this._anchor.x,a=this._anchor.y;return 0===this._anchor.units&&(e=e*o+t.minPoint.x,a=a*r+t.minPoint.y),{anchorX:e,anchorY:a,scaleX:i,scaleY:n,width:o,height:r}},Ue.prototype.getIsHitTestable=function(){return 1===this._image.hitTest},Ue.prototype.getHitTestShape=function(){var e=this._hitTestShape;return e=!this.getIsHitTestable()?0:e},Ue.prototype.setHitTestShape=function(e){this._hitTestShape=e},Ue.prototype._parseRecords=function(){var e,t,n,o=this._bounds,r=this._image;if(!o){for(o=ne.empty(),t=0,n=(e=r.records||[]).length;t<n;t++)o.union(this._parseRecord(e[t]));this._bounds=o}this._anchor||(o.isEmpty()||("number"!=typeof r.hotspotX&&(r.hotspotX=(o.minPoint.x+o.maxPoint.x)/2),"number"!=typeof r.hotspotY&&(r.hotspotY=(o.minPoint.y+o.maxPoint.y)/2)),this._anchor=new ee(r.hotspotX,r.hotspotY))},Ue.prototype._parseRecord=function(e){var t,n,o;if(!e)return ne.empty();switch(e.vectorType||0){case 2:e.bounds=ne.fromPoints({x:e.centerX-e.radiusX,y:e.centerY-e.radiusY},{x:e.centerX+e.radiusX,y:e.centerY+e.radiusY});break;case 4:Ue._parsePathGeometry(e);break;case 0:case 1:e.bounds=ne.fromPoints.apply(this,e.pointsList);break;case 3:e.leftTop&&e.rightBottom&&(e.bounds=ne.fromPoints(e.leftTop,e.rightBottom))}return o=e.bounds,t=e.scale,o&&1!==t&&(n=o.minPoint,o=o.maxPoint,n.x*=t,n.y*=t,o.x*=t,o.y*=t),e.bounds||ne.empty()},Ue.prototype._prepareVectorData=function(e,t,n,o,r,a,i){void 0===r&&(r=1);var s,l,c,d=this._image,p=[],u=n,h=o;return n=Math.round(n),o=Math.round(o),d.records&&0<d.records.length&&(this._parseRecords(),s=t&&(Z.getValue(t,"name")||Z.getValue(t,"iconText")),c=(l=this._getMetrics(s)).scaleX*r,d=l.scaleY*r,c===this._cachedScaleX&&d===this._cachedScaleY&&e===this._cachedImageDPR||(this._cachedVectorImage=this._cacheRecords(this._vectorRecords,null,c,d),this._cachedImageDPR=e,this._cachedScaleX=c,this._cachedScaleY=d,this._cachedText=[],this._cachedTextImage=null),(s=this._getTextValues(t)).length&&!K._areArraysEqual(this._cachedText,s)&&(this._cachedTextImage=this._cacheRecords(this._textRecords,s,c,d),this._cachedText=s),r=n-l.anchorX*c,t=o-l.anchorY*d,s={deltaX:r=isNaN(r)?0:r,deltaY:t=isNaN(t)?0:t,scaleX:c,scaleY:d,renderingResult:{resultImages:p}},n=Ue._cachedImageBuffer,o=this._cachedVectorImage.width/Ue._cachedImageOversample,l=this._cachedVectorImage.height/Ue._cachedImageOversample,c=Math.round(r+c*this._bounds.minPoint.x-n/2),n=Math.round(t+d*this._bounds.minPoint.y-n/2),p.push({source:this._cachedVectorImage,width:o,height:l,drawX:c,drawY:n,anchorAdjustX:u=c+o/2/e-u,anchorAdjustY:h=n+l/2/e-h,shadow:this.shadowStyle}),this._cachedTextImage&&(o=this._cachedTextImage.width/Ue._cachedImageOversample,l=this._cachedTextImage.height/Ue._cachedImageOversample,p.push({source:this._cachedTextImage,width:o,height:l,drawX:c,drawY:n,anchorAdjustX:u,anchorAdjustY:h}))),a&&i&&H.getFunctionalTestHooksEnabled()&&this._vectorRecords.length&&H.logVectorImageTemplate(this._vectorRecords,this._textRecords),s},Ue.prototype.renderData=function(e,t,n,o,r,a,i){i=this._prepareVectorData(e,t,n,o,r,a,i);return i?i.renderingResult:null},Ue.prototype.renderCanvas=function(e,t,n,o,r,a,i){var s;return void 0===r&&(r=1),(a=this._prepareVectorData(e.getDevicePixelRatio(),t,n,o,r,a,i))&&(e.hasPrimitives()?this._renderRecord(e,null,this._vectorRecords[0],a.deltaX,a.deltaY,a.scaleX,a.scaleY):((i=a.renderingResult.resultImages[0]).shadow&&i.shadow.shadowColor&&(s=e.getStyle(),e.setStyle(i.shadow)),e.drawImage(i.source,i.drawX,i.drawY,i.width,i.height),s&&e.setStyle(s),(s=a.renderingResult.resultImages[1])&&e.drawImage(s.source,s.drawX,s.drawY,s.width,s.height))),a?a.renderingResult:null},Ue.prototype.renderIcon=function(e){var t=new F,n=this._getMetrics(e&&this.hasText?Z.getValue(e,"name"):""),o=this._bounds.minPoint;return t.setSize(Math.ceil(n.scaleX*n.width),Math.ceil(n.scaleY*n.height)),this.renderCanvas(t,e,n.scaleX*(n.anchorX-o.x),n.scaleY*(n.anchorY-o.y)),t.getRootElement()},Ue.prototype._cacheRecords=function(e,t,n,o){var r,a,i,s,l=this._bounds.getSize(),c=Ue._cachedImageOversample,d=n*c,p=o*c,n=Ue._cachedImageBuffer*c,o=Math.ceil(d*l.width)+n,c=Math.ceil(p*l.height)+n,u=new F,l=u.getRootElement();for(u.setSize(o,c),this._container&&(l.set_style({display:"none",outline:"none",position:"absolute",left:"-1000px",top:"-1000px"}),this._container.appendChild(l[0])),r=-d*this._bounds.minPoint.x,a=-p*this._bounds.minPoint.y,r=Math.round((isNaN(r)?0:r)+n/2),a=Math.round((isNaN(a)?0:a)+n/2),i=0,s=e.length;i<s;i++)this._renderRecord(u,t&&t[i],e[i],r,a,d,p);return this._container&&this._container.removeChild(l[0]),u.getRootElement()[0]},Ue.prototype._getTextValues=function(e){for(var t,n=[],o=0,r=this._textRecords.length;o<r;o++)t=this._textRecords[o],n.push(Ue._getText(t,Ue.placeholderText,e,["iconText","name"]));return n},Ue.prototype._renderRecord=function(e,t,n,o,r,a,i){if(n){var s=n.vectorType||0;switch(n.style&&e.setStyle(n.style,i),s){case 0:case 1:this._renderPolyRecord(e,n,o,r,a,i);break;case 2:this._renderEllipseRecord(e,n,o,r,a,i);break;case 4:this._renderPathRecord(e,n,o,r,a,i);break;case 3:this._renderTextRecord(e,n,t,o,r,a,i)}e.flush()}},Ue._getFontWeight=function(e){var t="";return 0!=(16&e)?t="600":0!=(1&e)?t="bold":0!=(32&e)&&(t="300"),t},Ue._getFontStyle=function(e){return 0!=(2&e)?"italic":""},Ue._processFontStyle=function(e){var t=e.style.fontStyle,t=Ue._getFontWeight(t)+" "+Ue._getFontStyle(t);(t=t.trim())&&(t+=" "),e.style.fontStyleString=t},Ue.prototype._renderTextRecord=function(e,t,n,o,r,a,i){var s=e.getRawContext(),l=t.anchor||{x:0,y:0};a*=t.scale,i*=t.scale,a=o+l.x*a,l=r+l.y*i,"string"!=typeof t.style.fontStyleString&&Ue._processFontStyle(t),i=t.style.fontStyleString+t.style.fontSize*i+"pt "+Ue.getDefaultFontFamily(t.style.font),t=0,this._iconTextYAdjust&&(t=F.getLineHeight(i)*this._iconTextYAdjust),e.setFont(i),s.fillText(n,a,l+t)},Ue.prototype._renderPathRecord=function(e,t,n,o,r,a){t.render&&(t.render(e,n,o,r*t.scale,a*t.scale),t.style.strokeStyle&&e.stroke(),t.style.fillStyle&&e.fill())},Ue.prototype._renderPolyRecord=function(e,t,n,o,r,a){H.assertNotNull(e,"drawingContext"),H.assertNotNull(t,"polyRecord");var i=e.getRawContext();this._renderLines(i,t.pointsList,n,o,r*t.scale,a*t.scale),0===t.vectorType&&i.closePath(),t.style.fillStyle&&e.fill(),t.style.strokeStyle&&e.stroke()},Ue.prototype._renderEllipseRecord=function(e,t,n,o,r,a){H.assertNotNull(e,"drawingContext"),H.assertNotNull(t,"ellipseRecord"),r*=t.scale,a*=t.scale,e.drawEllipse(t.centerX*r+n,t.centerY*a+o,t.radiusX*r,t.radiusY*a),t.style.fillStyle&&e.fill(),t.style.strokeStyle&&e.stroke()},Ue._getText=function(e,t,n,o){var r,a,i,e=e.text;if(e===t&&n){for(r=null,a=0,i=o.length;a<i&&!(r=Z.getValue(n,o[a]));a++);e=r||""}return e},Ue.prototype._renderLines=function(e,t,n,o,r,a){var i,s,l;if(!(e&&t&&t.length))throw new Error("raw context is null or points array is invalid");for(i=t[0],e.moveTo(i.x*r+n,i.y*a+o),s=1,l=t.length;s<l;s++)i=t[s],e.lineTo(i.x*r+n,i.y*a+o)},Ue._parsePathGeometry=function(e){function t(e,t){I=P(I,e),L=P(L,t),B=D(B,e),k=D(k,t)}var n,o,r,a,i,s,l,c=e&&e.pathData;if(!c)throw new Error("Invalid path geometry string");(n=[]).push("var rawContext = drawingContext.getRawContext();");for(var d=!1,p=0,u=0,h=0,_=0,g=0,m=0,f="",y=[],T=!1,v=0,x=0,C=0,b=0,w=0,S=0,P=Math.min,D=Math.max,I=Number.MAX_VALUE,L=I,B=-I,k=-L;!d;){switch(o=p<c.length?c.charAt(p):null,r=!1,u){case 0:if(o)if("0"<=o&&o<="9"||"."===o||"-"===o){if(0===_||2===_)throw new Error("Encountered value with no valid command");h=_,g=m}else if("a"<=o&&o<="z"||"A"<=o&&o<="Z"){if(m=g,"a"<=o&&o<="z"?(g=2,o=o.toUpperCase()):g=1,_=h,!(h=Ue._pathCommands[o]))throw h=_,new Error("Unknown command");2===h?n.push("rawContext.closePath();"):(u=1,y=[]),p++}else p++;else d=!0;break;case 1:o?"a"<=o&&o<="z"||"A"<=o&&o<="Z"?r=!(u=0):"0"<=o&&o<="9"||"."===o||"-"===o?(f="",u=2):p++:r=d=!0;break;case 2:o&&("0"<=o&&o<="9"||"."===o||"-"===o&&0===f.length)?(f+=o,p++):(y.push(parseFloat(f)),u=1);break;default:throw new Error("Invalid state in parsing path geometry")}if(r)switch(i=y.length,h){case 1:if(0===i||0!=(1&i))throw new Error("Invalid number of parameters for MoveTo command");switch(g){case 1:v=y[i-2],x=y[i-1];break;case 2:v+=y[i-2],x+=y[i-1];break;default:throw new Error("Unknown command type")}t(v,x),n.push("rawContext.moveTo("+v+" * scaleX + deltaX, "+x+" * scaleY + deltaY);"),T=!1;break;case 3:if(0===i||0!=(1&i))throw new Error("Invalid number of parameters for LineTo command");for(a=i/2,s=0;s<a;s++){switch(g){case 1:v=y[2*s],x=y[2*s+1];break;case 2:v+=y[2*s],x+=y[2*s+1];break;default:throw new Error("Unknown command type")}t(v,x),n.push("rawContext.lineTo("+v+" * scaleX + deltaX, "+x+" * scaleY + deltaY);"),T=!1}break;case 4:if(0===i)throw new Error("Invalid number of parameters for HorizontalLineTo command");for(s=0;s<i;s++){switch(g){case 1:v=y[s];break;case 2:v+=y[s];break;default:throw new Error("Unknown command type")}t(v,x),n.push("rawContext.lineTo("+v+" * scaleX + deltaX, "+x+" * scaleY + deltaY);"),T=!1}break;case 5:if(0===i)throw new Error("Invalid number of parameters for VerticalLineTo command");for(s=0;s<i;s++){switch(g){case 1:x=y[s];break;case 2:x+=y[s];break;default:throw new Error("Unknown command type")}t(v,x),n.push("rawContext.lineTo("+v+" * scaleX + deltaX, "+x+" * scaleY + deltaY);"),T=!1}break;case 6:if(0===i||i%6!=0)throw new Error("Invalid number of parameters for CurveTo command");for(a=i/6,s=0;s<a;s++){switch(l=6*s,g){case 1:C=y[l],b=y[l+1],w=y[l+2],S=y[l+3],v=y[l+4],x=y[l+5];break;case 2:C=v+y[l],b=x+y[l+1],w=v+y[l+2],S=x+y[l+3],v+=y[l+4],x+=y[l+5];break;default:throw new Error("Unknown command type")}t(C,b),t(w,S),t(v,x),n.push("rawContext.bezierCurveTo("+C+" * scaleX + deltaX, "+b+" * scaleY + deltaY, "+w+" * scaleX + deltaX, "+S+" * scaleY + deltaY, "+v+" * scaleX + deltaX, "+x+" * scaleY + deltaY);"),T=!0}break;case 7:if(0===i||i%4!=0)throw new Error("Invalid number of parameters for SmartCurveTo command");for(T||(w=v,S=x),a=i/4,s=0;s<a;s++){switch(C=2*v-w,b=2*x-S,l=4*s,g){case 1:w=y[l],S=y[l+1],v=y[l+2],x=y[l+3];break;case 2:w=v+y[l],S=x+y[l+1],v+=y[l+2],x+=y[l+3];break;default:throw new Error("Unknown command type")}t(C,b),t(w,S),t(v,x),n.push("rawContext.bezierCurveTo("+C+" * scaleX + deltaX, "+b+" * scaleY + deltaY, "+w+" * scaleX + deltaX, "+S+" * scaleY + deltaY, "+v+" * scaleX + deltaX, "+x+" * scaleY + deltaY);"),T=!0}break;case 2:throw new Error("Internal error in handling of Close command");default:throw new Error("Invalid command")}}e.render=new Function("drawingContext","deltaX","deltaY","scaleX","scaleY",n.join("\n")),e.bounds=new ne(new oe(I,L),new oe(B,k))},Ue._segoeFontStack='"Segoe UI", '+(Ue._reducedFontStack='Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif'),Ue.placeholderText="{MapDisplay}",Ue._cachedImageBuffer=4,Ue._cachedImageOversample=1,Ue._scratchContext=new F,Ue._pathCommands={M:1,Z:2,L:3,H:4,V:5,C:6,S:7,Q:8,T:9,A:10},Ue.defaultFont="SegoeBing",Ue),ge=(ce(ze,B=_e),ze.prototype._getMetrics=function(e){var t,n,o=B.prototype._getMetrics.call(this,e),r=this._parent.getBounds(e);switch(this._hAlign){case 1:t=r.minPoint.x;break;case 2:t=r.maxPoint.x;break;default:t=(r.minPoint.x+r.maxPoint.x)/2}switch(this._vAlign){case 0:n=r.minPoint.y;break;case 2:n=r.maxPoint.y;break;default:n=(r.minPoint.y+r.maxPoint.y)/2}return o.anchorX-=(t+this._offset.x)/o.scaleX,o.anchorY-=(n+this._offset.y)/o.scaleY,o},ze),me=(Ge.getDefaultOverlayTemplate=function(){return Ge._defaultOverlayTemplate=!Ge._defaultOverlayTemplate?new V(se):Ge._defaultOverlayTemplate},Ge),fe=(ce(Ke,L=J),Ke.prototype._render=function(){var e,t=null,n=null;this._root&&(t=this._root.getParent(),n=this._root.get_sibling(1),this._root.removeFromParent()),e=this.getTemplate(),this._root=e?e.applyControlTemplate(this,this._controlArgs):W(document.createElement("div")),t&&t.length&&(n&&n.length?t.insertBefore(this._root,n):t.append(this._root)),this.rendered.invoke()},Ke.prototype._onTemplateChanged=function(e){e&&e.dispose(),this._root&&this._root.getParent()&&this._render()},Ke._templateConverter=function(e){return e="string"==typeof e?new V(e):e},Ke.prototype.boolToDisplay=function(e){return e?"":"none"},Ke.prototype.boolToVisibility=function(e){return e?"":"hidden"},Ke.prototype.appendTo=function(e){e.append(this.getRootElement())},Ke.prototype.getRootElement=function(){return this._root||this._render(),this._root},Ke.prototype.dispose=function(){var e;!this.getTemplate||(e=this.getTemplate())&&e.dispose(),L.prototype.dispose.call(this),(e=this._root)&&e.removeFromParent&&e.removeFromParent(),this._root=null,K._clearDisposables(this.disposables),K._nullifyClass(this)},Ke.prototype.setVisible=function(e){this.getRootElement().set_style({display:this.boolToDisplay(e)})},Ke.prototype.isTabbable=function(e){var t=e.nodeName.toLowerCase(),n=_w.getComputedStyle(e);return"none"!==n.display&&"hidden"!==n.visibility&&(/input|select|textarea|button|object/.test(t)?!e.disabled:(n=parseInt(e.getAttribute("tabindex")),"a"===t&&e.getAttribute("href")?isNaN(n)||0<=n:!isNaN(n)&&0<=n))},Ke.prototype.getFirstTabbableChild=function(e){for(var t,n=e.getElementsByTagName("*"),o=0;o<n.length;o++)if(t=n[o],this.isTabbable(t))return t;return null},Ke),ye=(ce(We,I=fe),We.prototype._onButtonClick=function(e){this.click.invoke(e)},We.prototype._setClassName=function(e){return"commonButtonControl "+e},We.prototype._setIconClassName=function(e){return"buttonIcon "+e},We);V.registerControl("Button",ye),ce(je,D=fe),je.prototype._onContentTemplateChanged=function(e){e&&e.dispose()},je.prototype.dispose=function(){var e=this.getContentTemplate();e&&e.dispose(),D.prototype.dispose.call(this)},ce(He,P=e=je),V.registerControl("CheckBox",He),ce(Ve,S=fe),Ve.prototype._onItemTemplateChanged=function(e){e&&e.dispose()},Ve.prototype._onPanelTagNameChanged=function(e,t){this.setTemplate(this._defaultTemplate.replace(/{tag}/g,t))},Ve.prototype.dispose=function(){var e=this.getItemTemplate&&this.getItemTemplate();e&&e.dispose(),S.prototype.dispose.call(this)},t=Ve,V.registerControl("ItemsControl",t),ce(Fe,b=t),Fe.prototype.generateNext=function(e){var t=K._createElement("option");return e===this.getSelectedItem()&&(t[0].selected=!0),t},Fe.prototype._onSelectionChanged=function(){var e=this.getRootElement()[0].selectedIndex,t=this.getItemsSource();this.setSelectedItem(t[e])},Fe.prototype._onSelectedItemChanged=function(e,t){t=this.getItemsSource().indexOf(t);0<=t&&(this.getRootElement()[0].selectedIndex=t)},V.registerControl("ComboBox",Fe),ce(Xe,C=e),V.registerControl("ContainerControl",Xe),ce(Ye,x=fe),Ye.prototype._onBlockClick=function(e){e=W(e.currentTarget).get_attr("data-key");this.onBlockClicked.invoke(e)},Ye.prototype._updateTemplate=function(){var t=this,e=this.getDictionary(),n=this.getValueTemplate();e&&n&&this.setTemplate(new V(this._templateString,{Dictionary:e,ValueTemplate:n,NameClass:this.getNameClass(),ContainerClass:this.getContainerClass(),BlockClass:this.getBlockClass(),onBlockClick:function(e){t._onBlockClick(e)}}))},V.registerControl("DictionaryItemsControl",Ye),ce(Ne,v=t),Ne.prototype._getPositionFieldFromPointerArgs=function(e,t){var n,o=e.targetTouches,r=e.touches;if(o&&o[0])n=o[0][t];else if(r&&r[0])n=r[0][t];else if(e[t])n=e[t];else{if(!(e instanceof KeyboardEvent))return-1;if(e=e.currentTarget.getBoundingClientRect(),0<=t.indexOf("X"))return e.left;if(0<=t.indexOf("Y"))return e.top}return n},Ne.prototype.generateNext=function(){var e,t,n=this,o=K._createElement("li");return o.set_attr("data-draggable","draggable").set_attr("aria-grabbed","false").set_attr("aria-dropeffect","none").set_attr("aria-role","listitem").add_class("bm_draggableItem"),this.useWholeDrag&&this.noGrip||(e=K._createElement("span"),this.gripClass?e.add_class(this.gripClass):e.add_class("defaultGrip"),H.addDataTag(e,"defaultGrip"),this.tooltip&&e.set_attr("title",this.tooltip),e.set_attr("data-grip","grip").set_attr("tabindex","0").set_attr("role","button").add_event("focus",function(e){e.currentTarget.setAttribute("aria-label",te.L_DraggableList_Keyboard_Drag_Start_Hint)}).add_event("blur",function(e){e.currentTarget.removeAttribute("aria-label"),n._isDragging&&n._onDragEnd(e,!1)})),this.useWholeDrag?(t=function(e){e.target&&e.target.classList&&e.target.classList.contains("bm_noDrag")||n.getBlockDrag()||(n._dragFinished=!1,n._clickTimeoutId&&window.clearTimeout(n._clickTimeoutId),n._clickTimeoutId=Microsoft.Maps.setTimeout(function(){return n._onDragStart(e,o)},"touchstart"===e.type?1e3:150),"touchstart"===e.type||"pointerdown"===e.type&&"touch"===e.pointerType||e.preventDefault())},o.add_event("touchstart",function(e){t(e)}).add_event("mousedown",function(e){t(e)}).add_event("mouseup",function(){window.clearTimeout(n._clickTimeoutId)},!0).add_event("touchend",function(){window.clearTimeout(n._clickTimeoutId)},!0).add_event("click",function(e){window.clearTimeout(n._clickTimeoutId),n._dragFinished&&n._haltEvent(e),n._dragFinished=!1},!0).add_event("keydown",function(e){n.getBlockDrag()||n._onKeyDown(e,o)}),e&&e.add_event("keydown",function(e){n.getBlockDrag()||n._onKeyDown(e,o,!0)})):e.add_event("touchstart",function(e){n._onDragStart(e,o)}).add_event("mousedown",function(e){n._onDragStart(e,o)}).add_event("keydown",function(e){n.getBlockDrag()||n._onKeyDown(e,o,!0)}).add_event("click",function(e){n._haltEvent(e)}),e&&o.append(e),o},Ne.prototype._startMovePosition=function(e,t){this._moveStartX=this._getPositionFieldFromPointerArgs(e,"pageX"),this._moveStartY=this._getPositionFieldFromPointerArgs(e,"pageY"),t?(this._dragPositionX=t.x,this._dragPositionY=t.y):(this._dragPositionX=this._moveStartX,this._dragPositionY=this._moveStartY),this._isDragging=!0},Ne.prototype._updatePosition=function(e,t,n){var o;return!!this._isDragging&&(e instanceof KeyboardEvent?(this._dragPositionX=t,this._dragPositionY=n):(n=t=0,o=this._getPositionFieldFromPointerArgs(e,"pageX"),e=this._getPositionFieldFromPointerArgs(e,"pageY"),-1!==o&&-1!==e&&(t=o-this._moveStartX,n=e-this._moveStartY),this._moveStartX+=t,this._moveStartY+=n,this._dragPositionX+=t,this._dragPositionY+=n),!0)},Ne.prototype._onDragStart=function(e,t){this._isDragging||this._isMouseDisabled&&e instanceof MouseEvent||(e.preventDefault(),this._fixContainerHeight(),this._initializeDraggablesList(),this._draggedEntryIndex=this._getDragIndex(t),this._insertIndex=this._draggedEntryIndex,this.setDraggedEntry(t),this._setAriaGrabbed(!0),t=t[0],this._startMovePosition(e,new oe(t.offsetLeft,t.offsetTop)),this._startDraggingElement(),this._createPlaceholder(),this._insertPlaceholder(this._insertIndex),e instanceof KeyboardEvent&&(this._isMouseDisabled=!0,(t=this._getDefaultGripTargetOfDraggedEntry())&&(t.setAttribute("aria-label",te.L_DraggableList_Keyboard_Drag_Move_Hint),t.setAttribute("aria-selected","true"))),this.onDragBegin.hasHandlersRegistered&&this.onDragBegin.invoke()),this._haltEvent(e)},Ne.prototype._onDragMove=function(e,t){var n,o,r;!this._isDragging||this._isMouseDisabled&&e instanceof MouseEvent?"touchmove"===e.type&&window.clearTimeout(this._clickTimeoutId):(this._clearTimeOut(),e.preventDefault(),e instanceof KeyboardEvent&&((n=this._getDefaultGripTargetOfDraggedEntry())&&(n.setAttribute("aria-label",te.L_DraggableList_Keyboard_Drag_Move_Hint),n.setAttribute("aria-selected","true"))),this._determineNeedToAutoScroll(e),e instanceof KeyboardEvent?(this._updateKeyboardPosition(t),o=(r=this.getPlaceholderElement()[0]).offsetLeft,r=r.offsetTop):this._checkMouseOverNewEntry(e),this._updatePosition(e,o,r)&&(this._setDraggedElementPosition(),this._haltEvent(e)))},Ne.prototype._checkMouseOverNewEntry=function(e){for(var t,n,o,r=null,a=0,i=this._draggablesList.length;a<i;a++)if(!(t=this._draggablesList[a]).classList.contains("moving")&&(n=t.getBoundingClientRect(),e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom)){r=W(t);break}r&&((o=this._getDragIndex(r))===this._insertIndex?this._draggedEntryIndex<this._insertIndex?o++:o--:o>this._insertIndex&&o++,this._insertIndex=o,this._insertPlaceholder(this._insertIndex))},Ne.prototype._updateKeyboardPosition=function(e){var t=this._insertIndex+e;this._draggedEntryIndex===this._insertIndex&&1===e&&t++,0<=t&&t<=this._draggablesList.length&&(this._insertIndex=t,this._insertPlaceholder(this._insertIndex))},Ne.prototype._onDragEnd=function(e,t){var n,o;void 0===t&&(t=!0),!this._isDragging||this._isMouseDisabled&&e instanceof MouseEvent||(this._clearTimeOut(),e.preventDefault(),this._isDragging=!1,this._dragFinished=!0,n=this._draggedEntryIndex!==this._insertIndex&&t,t=null,this._stopDraggingElement(),this._removePlaceholder(),this._setAriaGrabbed(!1),n&&(t=this.getItemsSource()[this._draggedEntryIndex],this._reorderItemsList(),H.getFunctionalTestHooksEnabled()&&((o=W(W("[data-draggable=draggable]",this.getRootElement()[0])[this._draggedEntryIndex])).add_class("finishedDragging"),H.addDataTag(o,"finishedDragging"))),(e instanceof KeyboardEvent||e instanceof FocusEvent)&&(this._isMouseDisabled=!1,(o=this._getDefaultGripTargetOfDraggedEntry())&&(o.setAttribute("aria-label",te.L_DraggableList_Keyboard_Drag_Start_Hint),o.setAttribute("aria-selected","false"))),this._draggedEntryIndex=-1,this._insertIndex=-1,this._draggablesList=null,this._unfixContainerHeight(),this.onDragComplete.hasHandlersRegistered&&this.onDragComplete.invoke(t),this._haltEvent(e))},Ne.prototype._setAriaGrabbed=function(e){var t=this.getDraggedEntry()[0];t.classList.contains("bm_draggableItem")?(t.setAttribute("aria-grabbed",e.toString()),t.setAttribute("aria-dropeffect",e?"move":"none")):(t=t.parentElement).setAttribute("aria-grabbed",e.toString())},Ne.prototype._startDraggingElement=function(){var e=this.getDraggedEntry(),t=e.get_size();t&&e.set_style({width:t.width+"px"}),e.add_class("moving"),H.addDataTag(e,"moving"),this._setDraggedElementPosition()},Ne.prototype._createPlaceholder=function(){var e=K._createElement("div"),t=this.getDraggedEntry(),t=t&&t.get_size();t&&e.set_style({width:t.width+"px",height:t.height+"px"}),e.add_class("bm_placeholder"),this.setPlaceholderElement(e)},Ne.prototype._insertPlaceholder=function(e){var t,n=this.getPlaceholderElement();n.removeFromParent(),e<this._draggablesList.length?(t=this._draggablesList[e],W(t.parentElement).insertBefore(n,t)):(t=this._draggablesList[this._draggablesList.length-1],W(t.parentElement).append(n))},Ne.prototype._removePlaceholder=function(){this.getPlaceholderElement().removeFromParent(),this.setPlaceholderElement(null)},Ne.prototype._setDraggedElementPosition=function(){this.getDraggedEntry().set_style({top:this._dragPositionY+"px",left:this._dragPositionX+"px"})},Ne.prototype._stopDraggingElement=function(){var e=this.getDraggedEntry();e.remove_class("moving"),e.set_style({top:"",left:"",width:""}),H.getFunctionalTestHooksEnabled()&&e.remove_attr("data-tag")},Ne.prototype._getDragIndex=function(e){var t,n,o,r=e.length&&e[0];if(r)for(n=(t=this._draggablesList||this.getRootElement().select("[data-draggable=draggable]")).length,o=0;o<n;o++)if(t[o]===r)return o;return null},Ne.prototype._getDefaultGripTargetOfDraggedEntry=function(){var e=this.getDraggedEntry(),e=e&&e.select(".defaultGrip");return e&&0<e.length?e[0]:null},Ne.prototype._getDraggedElementHeight=function(){return this.getDraggedEntry().get_size().height},Ne.prototype._initializeDraggablesList=function(){this._draggablesList=this.getRootElement().select("[data-draggable=draggable]")},Ne.prototype._haltEvent=function(e){e.stopPropagation(),e.preventDefault()},Ne.prototype._reorderItemsList=function(){var e=this.getItemsSource(),t=e[this._draggedEntryIndex],n=this._insertIndex+(this._draggedEntryIndex<this._insertIndex?-1:0);e.removeAt(this._draggedEntryIndex),e.insert(t,n)},Ne.prototype._determineNeedToAutoScroll=function(e){var t=this,n=0,o=this._getScrollContainer().getBoundingClientRect(),r=this.getRootElement()[0].getBoundingClientRect();this._moveStartY>o.bottom-this._autoScrollBuffer&&this._moveStartY<=r.bottom?n=this._autoScrollStep:this._moveStartY<o.top+this._autoScrollBuffer&&this._moveStartY>=r.top&&(n=-1*this._autoScrollStep),0!==n&&0===this._timeoutId&&(this._timeoutId=Microsoft.Maps.setTimeout(function(){return t._updateAutoScroll(e,n)},this._timeoutLength))},Ne.prototype._updateAutoScroll=function(e,t){this._clearTimeOut();var n=this._getScrollContainer(),o=n.scrollTop+t;0<o&&o<n.scrollHeight-n.clientHeight&&(n.scrollTop=o,this._dragPositionY+=t,this._onDragMove(e))},Ne.prototype._getScrollContainer=function(){return this.scrollContainer||W("[data-containerareatype=cardsContainer]").getParent()[0]},Ne.prototype._clearTimeOut=function(){0!==this._timeoutId&&(window.clearTimeout(this._timeoutId),this._timeoutId=0)},Ne.prototype._onKeyDown=function(e,t,n){var o=e.keyCode||e.which,r=this.getDraggedEntry()&&this.getDraggedEntry()[0];"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&((n||this._isDragging)&&13===o||!n&&32===o?this._isDragging?this._onDragEnd(e):this._onDragStart(e,t):38===o&&this._isDragging?0<this._insertIndex?this._onDragMove(e,-1):r.setAttribute("aria-label",te.L_DraggableList_Keyboard_Drag_Top_Error_Hint):40===o&&this._isDragging&&(this._insertIndex<this.getItemsSource().length?this._onDragMove(e,1):r.setAttribute("aria-label",te.L_DraggableList_Keyboard_Drag_Bottom_Error_Hint)))},Ne.prototype._fixContainerHeight=function(){var e=this.getRootElement()[0];e&&(e.style.minHeight=e.clientHeight+"px")},Ne.prototype._unfixContainerHeight=function(){var e=this.getRootElement()[0];e&&(e.style.minHeight="0")},Ne._draggableListFlexTemplate='<div class="bm_draggableDisplay" event:touchmove="onDragMove" event:mousemove="onDragMove" event:pointermove="onDragMove"><ul role="list" class="{TemplateBinding ulClass}" event:touchend="onDragEnd" event:mouseup="onDragEnd"><ItemsPresenter /></ul></div>',V.registerControl("DraggableList",Ne),ce(Ae,T=t),Ae.prototype.generateNext=function(e){function t(e){o._entryClicked(e)}var n,o=this,r=this.getItemsSource().indexOf(e);return e.separator?n=K._createElement("div").add_class("dropdownSeparator"):(n=K._createElement("a").add_event("click",t).add_event("touchend",t).add_event("mouseover",function(e){o._entryMouseover(e)}).add_event("mouseout",function(e){o._entryMouseout(e)}).add_event("keydown",function(e){o._entryKeydown(e)}).add_class("dropdownEntry").set_attr("data-dropdown",""+r).set_attr("href","#").set_attr("role","button"),H.addDataTag(n,"dropdownEntry")),n},Ae.prototype._entryClicked=function(e){Ae._scrolling?Ae._scrolling=!1:(e.stopPropagation(),e.preventDefault(),"pointerup"===e.type&&(!W(".mapContainer .MicrosoftMap").has(e.target)||ie.isMapsAnswer)||(e=W(e.currentTarget))&&0<e.length&&e[0].hasAttribute("data-dropdown")&&(e=parseInt(e.get_attr("data-dropdown")),this.onEntryClicked.invoke(e)))},Ae.prototype._entryMouseover=function(e){var t=parseInt(W(e.currentTarget).get_attr("data-dropdown"));this.onEntryMouseover.invoke(t),e.stopPropagation(),e.preventDefault()},Ae.prototype._entryMouseout=function(e){var t=parseInt(W(e.currentTarget).get_attr("data-dropdown"));this.onEntryMouseout.invoke(t),e.stopPropagation(),e.preventDefault()},Ae.prototype._entryKeydown=function(e){var t;40===e.keyCode?(t=e.target.nextElementSibling)&&t.focus():38!==e.keyCode||(t=e.target.previousElementSibling)&&t.focus()},Ae._scrolling=!1,V.registerControl("Dropdown",Ae),ce(Re,y=fe),Re.prototype._onItemTemplateChanged=function(e){e&&e.dispose()},Re.prototype.dispose=function(){var e=this.getItemTemplate&&this.getItemTemplate();e&&e.dispose(),y.prototype.dispose.call(this)},V.registerControl("FlexItemsControl",Re),ce(Oe,f=J),Oe.prototype.getRootElement=function(){return W(this._root)},Oe.prototype.dispose=function(){f.prototype.dispose.call(this),this._root=null},Oe.prototype.onFormattedTextChanged=function(e,t){this.addFormattedResult(t,this._root)},Oe.prototype.addFormattedResult=function(e,t){var n,o,r,a,i;if(e&&0!=e.length){for(o=e.length-1,a=0;a<this._enabledTags.length;a++){var s="<"+this._enabledTags[a]+">",l="</"+this._enabledTags[a]+">",s=e.indexOf(s),l=e.indexOf(l);-1<s&&s<o&&-1<l&&(o=s,r=l,n=this._enabledTags[a])}n?(t.appendChild(document.createTextNode(e.substr(0,o))),i=document.createElement(n),this.addFormattedResult(e.substr(o+n.length+2,r-o-n.length-2),i),t.appendChild(i),this.addFormattedResult(e.substr(r+n.length+3),t)):t.appendChild(document.createTextNode(e))}},V.registerControl("FormattedTextBlock",Oe),ce(Me,m=t),Me.prototype._onSourceChanged=function(){var e=this.getSourceKey(),t=this.getSourceMap();e&&t&&this.setItemsSource(t[e])},V.registerControl("MappedItemsControl",Me),ce(Ee,g=fe),Ee.prototype._parseDate=function(e){e=e.target.value.split(/[^0-9]/),e=Date.parse(e[0]+"/"+e[1]+"/"+e[2]+" 00:00:00");this._ignoreDateTimeChanged=!0;try{this.setDate(e)}catch(e){}this._ignoreDateTimeChanged=!1},Ee.prototype._parseTime=function(e){e=e.target.valueAsNumber/1e3;this._ignoreDateTimeChanged=!0;try{this.setTime(e)}catch(e){}this._ignoreDateTimeChanged=!1},Ee.prototype.onTimeChanged=function(e,t){var n;this._ignoreDateTimeChanged||(n=(t%=86400)%3600,t=(t=Math.floor(t/3600))<10?"0"+t+":":t+":",this.setMobileTime(t+=(n/=60)<10?"0"+n:n))},Ee.prototype.onDateChanged=function(e,t){this._ignoreDateTimeChanged||(t=new Date(t),t=this._formatDate(t),this.setMobileDate(t))},Ee.prototype._getCurrentDate=function(){var e=new Date;return this._formatDate(e)},Ee.prototype._getCurrentTime=function(){return(new Date).toTimeString()},Ee.prototype._formatDate=function(e){var t=e.getFullYear(),n=e.getMonth()+1,e=e.getDate(),t=t+"-";return n<10&&(t+="0"),t+=n+"-",e<10&&(t+="0"),t+e},V.registerControl("MobileTimeControl",Ee),ce(ke,_=e),V.registerControl("PopOut",ke),ce(Be,h=fe),Be.prototype.displayPopOut=function(e){return e?"block":"none"},Be.prototype.dispose=function(){W(window).remove_event("click,contextmenu,keydown",this._windowClickOrKeyboardEventHandler),h.prototype.dispose.call(this)},Be.prototype._onButtonClick=function(e){this.setIsDisplayed(!this.getIsDisplayed()),e.preventDefault()},Be.prototype._onMouseWheel=function(e){e.stopPropagation()},Be.prototype._onDisplayChange=function(e,t){var n=this,o=W(window);t?Microsoft.Maps.setTimeout(function(){o.add_event("click,contextmenu,keydown",n._windowClickOrKeyboardEventHandler,!0)},1):e&&o.remove_event("click,contextmenu,keydown",this._windowClickOrKeyboardEventHandler)},Be.prototype._hidePopOut=function(){this.getRootElement()[0]?this.setIsDisplayed(!1):W(window).remove_event("click,contextmenu,keydown",this._windowClickOrKeyboardEventHandler)},V.registerControl("PopOutButton",Be),ce(Le,u=fe),Le.prototype._onSelectedItemChanged=function(e,t){for(var n=this.getItemsSource().indexOf(t),o=this.getRootElement().select("a"),r=0;r<o.length;r++)o[r].className=r===n?"selected":"",o[r].setAttribute("aria-current",r===n?"true":"false")},V.registerControl("RadioGroup",Le),ce(Ie,p=fe),Ie.prototype._handleSelectedItemChanged=function(e,t){e||!this.getIgnorePopOutButtonText()?e!=t&&(this.getIgnorePopOutButtonText()?this.setPopOutButtonText(""):(t=this.getSelectedItem(),this.setPopOutButtonText(t?t.text:""))):this.setPopOutButtonText("")},Ie.prototype._onDropdownOpenChanged=function(e,t){var n=this;t&&(window.clearTimeout(Ie.timeoutHandler),Ie.timeoutHandler=Microsoft.Maps.setTimeout(function(){var e,t=n.getItemsSource().indexOf(n.getSelectedItem());t<0&&(t=0),e=n.getRootElement().select(".dropdownEntry"),0<=t&&e[t]&&e[t].focus()},Ie.timeoutTime)),this.dropdown.hasHandlersRegistered&&this.dropdown.invoke(t)},Ie.timeoutTime=50,V.registerControl("SelectControl",Ie),ce(De,d=fe),De.prototype.onAttributeChanged=function(e,t,n){d.prototype.getRootElement.call(this).set_attr(e,n)},V.registerControl("Slider",De),ce(Pe,c=fe),Pe.prototype._invokeOpenEvent=function(){this.openEvent.hasHandlersRegistered&&this.openEvent.invoke()},Pe.prototype._onOpenChanged=function(e,t){t?this._setPos(this.getIndex()):this.setIndex(this._pos)},Pe.prototype._setPos=function(e){var t,n=this.getRootElement().select("li");e<0||e>=n.length||(t=n[e])&&(n[this._pos].className="",this._pos=e,t.className="selected",this._listElement||(this._listElement=this.getRootElement().select("ul")),this._listElement.set_style({top:26*(2-e)+"px"}))},Pe.prototype._scroll=function(e,t){var n;this._setPos(this._pos+e),(0<e&&this._pos<this.getItemsSource().length-1||e<0&&0<this._pos)&&(n=this,window.clearTimeout(this._timerId),this._timerId=Microsoft.Maps.setTimeout(function(){n._scroll(e,150)},t))},Pe.prototype._setActiveDescendentID=function(){var e=this.getItemsSource()[this._pos],t=this.getTaskId();this.setActiveId(e.itemId+(t||""))},V.registerControl("SpinBox",Pe),ce(Se,l=fe),V.registerControl("StarRating",Se),ce(we,s=fe),we.prototype.displayTab=function(e){return e?"block":"none"},we.prototype._onDisplayChange=function(){},V.registerControl("Tab",we),ce(be,i=J),be.prototype.getRootElement=function(){return W(this._root)},be.prototype.dispose=function(){i.prototype.dispose.call(this),this._root=null},be.prototype.onTextChanged=function(e,t){this._root.nodeValue=t},V.registerControl("TextBlock",be),ce(Ce,a=fe),Ce.prototype.toggleOpen=function(){var e,t,n=!this.getOpen();if(this.setOpen(n),n)e=this.getRootElement().select(".column");else{t=this._getTimeFromSource(),this._ignoreTimeChanged=!0;try{this.setTime(t)}catch(e){}this._ignoreTimeChanged=!1,e=this.getRootElement().select(".dropdown")}e&&e[0].focus(),this.setEditing(n)},Ce.prototype._onTimeChanged=function(e,t){var n,o;this._ignoreTimeChanged||(t%=86400,(n=0<=Ce._amPmCol)&&(this._setIndex(Ce._amPmCol,Math.floor(t/43200)),t%=43200),o=Math.floor(t/3600),n&&--o<0&&(o=11),this._setIndex(Ce._hoursCol,o),t%=3600,this._setIndex(Ce._minsCol,Math.floor(t/300)),this._convertTimeToAriaLabel())},Ce.prototype._getTimeFromSource=function(){var e=this.col0Source[this.getCol0Index()].value+this.col1Source[this.getCol1Index()].value;return this.col2Source&&(e+=this.col2Source[this.getCol2Index()].value),e},Ce.prototype._convertTimeToAriaLabel=function(){var e=this._getTimeFromSource();e&&this.setAriaLabel(K._formatUTCTimeString(new Date(1e3*e)))},Ce.prototype._onDisabledChanged=function(e,t){t&&this.getOpen()?this.toggleOpen():this.setOpen(!1)},Ce.prototype._setIndex=function(e,t){switch(e){case 0:this.setCol0Index(t);break;case 1:this.setCol1Index(t);break;case 2:this.setCol2Index(t)}},Ce.prototype._onEditingChanged=function(e,t){this.getOpen()!=t&&this.toggleOpen()},Ce.prototype._onOpenChanged=function(e,t){var n=this;t?Microsoft.Maps.setTimeout(function(){W(window).add_event("click,contextmenu",n._windowEventHandler),W(window).add_event("keydown",n._windowKeyEventHandler)},1):e&&this._removeWindowEvents()},Ce.prototype._onWindowEvent=function(){this.getRootElement()[0]?this.getOpen()&&this.toggleOpen():this._removeWindowEvents()},Ce.prototype._removeWindowEvents=function(){var e=W(window);e.remove_event("click,contextmenu",this._windowEventHandler),e.remove_event("keydown",this._windowKeyEventHandler)},Ce._getShortTimePattern=function(e){return(e.shortTimePattern+" ").replace(/'[a-zA-Z]*'/gi,"")},Ce._initializeData=function(){var e,t=N.GlobalConfig.dynamicProperties.cultureData,n=Ce._getShortTimePattern(t);Ce._amPmCol=-1;for(var o,r=[],a=0,i=0,s=0;s<n.length;s++){var l=n.charAt(s),c=null,d=!1;switch(l){case"h":case"H":case"m":case"t":l===o?(++i,d=!0):c=l}if(!d&&o){switch(o){case"h":(e=Ce._createArray(1,12,1,1<i,3600,3600,o))[11].value=0,r.push(e),Ce._hoursCol=a++;break;case"H":r.push(Ce._createArray(0,23,1,1<i,0,3600,o)),Ce._hoursCol=a++;break;case"m":r.push(Ce._createArray(0,55,5,1<i,0,300,o)),Ce._minsCol=a++;break;case"t":r.push([{text:t.amDesignator,value:0,itemId:"itemIdAM"},{text:t.pmDesignator,value:43200,itemId:"itemIdPM"}]),Ce._amPmCol=a++}o=null,i=0}c&&(o=c,i=1)}Ce._sourceData=r},Ce._createArray=function(e,t,n,o,r,a,i){for(var s=[],l=e,c=r;l<=t;l+=n,c+=a)s.push({text:(l<10&&o?"0":"")+l,value:c,itemId:"itemId"+l.toString()+i});return s},V.registerControl("TimeControl",Ce),ce(xe,r=fe),xe.prototype._onKeydown=function(e){this.onEnter.hasHandlersRegistered&&"keydown"===e.type&&(13!==e.keyCode&&13!==e.which||this.onEnter.invoke())},xe.prototype._onFocus=function(){this._isFocused=!0,this._showWatermark(!1)},xe.prototype._onBlur=function(){this._isFocused=!1,""===this.getValue()&&this._showWatermark(!0)},xe.prototype._onValueChanged=function(e,t){this._isFocused||this._showWatermark(!t)},xe.prototype._showWatermark=function(e){var t=this.getRootElement(),n=t[0],o=xe._className;e?(n.value=this.getWatermark(),t.add_class(o)):(n.value=this.getValue(),t.remove_class(o))},xe._supportsPlaceholder="placeholder"in document.createElement("input"),xe._commonTemplate='<input type="text" maxlength="{TemplateBinding maxLength}" title="{TemplateBinding watermark}" value="{TemplateBinding Value Mode=TwoWay}" event:keydown="onKeydown"',xe._placeholderTemplate=' placeholder="{TemplateBinding watermark}" />',xe._dataTagTemplate=' data-tag="watermarkInput"',xe._downlevelTemplate=' event:focus="onFocus" event:blur="onBlur" />',xe._className="watermarkText",n=xe,V.registerControl("WatermarkedTextInput",n),ve.prototype.project=function(e,t){this._project(e,t,!0,0)},ve.prototype._project=function(e,t,n,o){var r;this._matrix&&!o?(this.lastProjectedX=this._matrix.projectX(e,t),this.lastProjectedY=this._matrix.projectY(e,t)):(r=this._sourceCrs.toLatitude(e,t),t=this._sourceCrs.toLongitude(e,t),this.lastRawX=this.destinationCrs.projectToX(r,t,n),this.lastRawY=this.destinationCrs.projectToY(r,t),this._projectFromRawCoordinate(this.lastRawX,this.lastRawY,o))},ve.prototype._projectFromRawCoordinate=function(e,t,n){this.lastRawX=e,this.lastRawY=t,n=n&&(n*this._destinationCrsWidth||0),this.lastProjectedX=(e+this._xOffset+n)*this._xScale,this.lastProjectedY=(t+this._yOffset)*this._yScale},ve.prototype.getMatrix=function(){return this._matrix},ve.prototype.calculateProjectedCoordinates=function(e,t,n,o){var r;t.rawX[e]?this._projectFromRawCoordinate(t.rawX[e],t.rawY[e],n):(r=o?K._clamp(t.x[e],o.minPoint.x,o.maxPoint.x):t.x[e],o=o?K._clamp(t.y[e],o.minPoint.y,o.maxPoint.y):t.y[e],this._project(r,o,!1,n),t.rawX[e]=this.lastRawX,t.rawY[e]=this.lastRawY)},w=ve,Te.prototype.getMarkupStyle=function(e,t,n){var o;return void 0===n&&(n=1),o=e&&this._baseMapTemplateSelector?this._baseMapTemplateSelector.getMarkupStyle(e,t,2,n):o},Te.prototype.getTemplates=function(e){var t,n,o,r;if(e instanceof ae)(n=Z.getValue(e,"image"))||(n=K._getImageFromCss("defaultPushpinImg"),Z.setValue(e,"image",n)),n&&((r=n).records?t=new _e(r):((o=Z.getValue(e,"anchor"))?o instanceof oe?o=new ee(o.x,o.y):o instanceof ee||(o=new ee(0,0)):o=new ee(13,39),Z.setValue(e,"anchor",o),r=n instanceof HTMLImageElement?n.currentSrc:n,(t=this._cache.getItem(r))||(t=new ue(n,1,o,e),this._cache.addItem(r,t))));else{if(e.getTemplates)return e.getTemplates();e.getTemplate&&(t=e.getTemplate())}return[t]},Te.prototype.selectorReady=function(){var t=this;return!this._baseMapTemplateSelector||this._resetTemplateSelector?this._map.getTemplateSelector().then(function(e){return t._baseMapTemplateSelector=e,t._resetTemplateSelector=!1,t._baseMapTemplateSelector.selectorReady()}):this._baseMapTemplateSelector.selectorReady()},o=Te,Y.ContentControl=e,Y.Control=fe,Y.ControlTemplate=V,Y.InfoboxOverlayTemplate=se,Y.Template=de,N.BasicTemplate=pe,N.BitmapImageTemplate=ue,N.BucketPrimitiveTemplateSelector=he,N.ChildVectorImageTemplate=ge,N.CommonTemplates=me,N.CoordinateProjection=w,N.DefaultTemplateSelector=o,N.VectorImageTemplate=_e}catch(e){if(!N.logger)throw e;N.logger.logCriticalError(e)}function Te(e){var t=this;this._map=e,this._map.mapTypeChanged.add(function(e){e.newMapTypeId!==e.oldMapTypeId&&(t._resetTemplateSelector=!0)}),this._cache=new z(5)}function ve(e,t){H.assertNotNull(e,"sourceCrs"),H.assertNotNull(t,"destinationRegionId"),this._xOffset=-t.bounds[3],this._yOffset=-t.bounds[0],this._xScale=t.pixelWidth/(t.bounds[1]-t.bounds[3]),this._yScale=t.pixelHeight/(t.bounds[2]-t.bounds[0]),this._sourceCrs=e,this.destinationCrs=t.crs,t=this.destinationCrs.bounds,this._destinationCrsWidth=t[1]-t[3],(t=this._sourceCrs.getMatrix&&this._sourceCrs.getMatrix(this.destinationCrs))&&(this._matrix=t.translate(this._xOffset,this._yOffset).scale(this._xScale,this._yScale))}function xe(){var e,t,n,o=r.call(this)||this;return o._isFocused=!1,e=xe._supportsPlaceholder,o.defineProperty("watermark"),o.defineProperty("maxLength"),o.defineProperty("value",e?null:o._onValueChanged),o.onEnter=new G,t={onKeydown:function(e){return o._onKeydown(e)}},n=xe._commonTemplate,e?n+=xe._dataTagTemplate+=xe._placeholderTemplate:(n+=xe._dataTagTemplate+=xe._downlevelTemplate,t.onFocus=function(){return o._onFocus()},t.onBlur=function(){return o._onBlur()}),o.setTemplate(new V(n,t)),o}function Ce(){var e,t,o=a.call(this)||this;if(o._ignoreTimeChanged=!1,o.defineProperty("time",o._onTimeChanged),o.defineProperty("taskId"),o.defineProperty("disabled",o._onDisabledChanged,null,{defaultValue:!1}),o.defineProperty("open",o._onOpenChanged,null,{defaultValue:!1,isPrivate:!0}),o.defineProperty("editing",o._onEditingChanged,null,{defaultValue:!1}),o.defineProperty("col0Index",null,null,{defaultValue:0}),o.defineProperty("col1Index",null,null,{defaultValue:0}),o.defineProperty("col2Index",null,null,{defaultValue:0}),o.defineProperty("ariaLabel",null,null,{defaultValue:te?te.MapsTimeSelect:""}),Ce._sourceData||Ce._initializeData(),o.col0Source=Ce._sourceData[0],o.col1Source=Ce._sourceData[1],o.col2Source=Ce._sourceData[2],le,o.setTemplate(new V(le,{onDropdown:function(e){e.preventDefault(),o.getDisabled()||o.toggleOpen()},onOpen:function(){o.getDisabled()||o.toggleOpen()},onHover:function(){o._convertTimeToAriaLabel()},openToClass:function(e){return o.getDisabled()?"timeControl time_ctrl_disabled":"timeControl"+(e?" open":"")}})),e=o.getRootElement().select(".spinBox")){for(t=0;t<e.length;t++)Ce._sourceData[t]||(e[t].style.display="none"),e[t].getElementsByClassName("column")[0].classList.add("box"+t.toString());0<e.length&&(e[0]&&e[0].setAttribute("aria-label",te.SpinBoxHoursLabel),e[1]&&e[1].setAttribute("aria-label",te.SpinBoxMinutesLabel),e[2]&&e[2].setAttribute("aria-label",te.SpinBoxAmPmLabel))}return o._windowEventHandler=function(){o._onWindowEvent()},o._windowKeyEventHandler=function(e){var t,n;9===e.keyCode&&(t=(n=document.activeElement)&&n.classList,n="box2",e.shiftKey&&(n="box0"),(!t||t.contains("column")&&t.contains(n))&&(o._onWindowEvent(),Microsoft.Maps.setTimeout(function(){var e=W(".dirTimePopup"),e=0<e.length&&W(".timeControl",e[0]);0<e.length&&e[0].getElementsByClassName("dropdown")[0].focus()},100)))},o}function be(){var n=i.call(this)||this;return n.defineProperty("text",function(e,t){return n.onTextChanged(e,t)}),n._root=document.createTextNode(""),n}function we(){var n=s.call(this)||this;return n._templateString='<div class="tabTemplate" style:display="{TemplateBinding IsDisplayed Converter=displayTab}" ><TabbedPresenter /></div>',n.defineProperty("tabContent"),n.defineProperty("tabTemplate"),n.defineProperty("isDisplayed",function(e,t){return n._onDisplayChange(e,t)},null,{defaultValue:!1}),n.setTemplate(new V(n._templateString,{displayTab:function(e){return n.displayTab(e)}})),n}function Se(){var t=l.call(this)||this;return t.defineProperty("value",null,null,{defaultValue:0}),t.setTemplate(new V('<div class="starRate" event:click="onClick"><div style:width="{TemplateBinding Value Converter=valueToWidth}"></div></div>',{onClick:function(e){e=e.offsetX||e.layerX;t.setValue(Math.floor(e/40)+1)},valueToWidth:function(e){return 20*e+"%"}})),t}function Pe(){var a=c.call(this)||this;return a._timerId=0,a.defineProperty("itemsSource"),a.defineProperty("taskId"),a.defineProperty("index",null,null,{defaultValue:0}),a.defineProperty("open",a._onOpenChanged,null,{defaultValue:!1}),a.defineProperty("activeId"),a.openEvent=new G,a._pos=0,a.setTemplate(new V('<div class="spinBox bm_disable_highlighting" data-tag="spinBox">    <div class="cell" event:click="onCellClick"><TextBlock Text="{TemplateBinding index Converter=indexToValue}" /></div>    <div class="column" tabindex="0" role="list" aria-activedescendant="{TemplateBinding activeId}" style:display="{TemplateBinding open Converter=boolToDisplay}" event:click="onColumnClick" event:mouseover="onMouseOver" event:mousewheel="onMouseWheel" event:contextmenu="onContextMenu" event:keydown="onColumnKeyDown" event:keyup="endScroll">        <div class="spinBoxUpArrow" event:mousedown="onUpArrow" event:mouseup="endScroll" event:mouseout="endScroll" event:touchend="endScroll"></div>        <div class="scrollContainer">            <div class="selectedBg"></div>            <ItemsControl ItemsSource="{TemplateBinding itemsSource}" panelTagName="ul">                <ItemsControl.ItemTemplate>                    <DataTemplate>                        <li data-value="{Binding value}" id="{Binding itemId}" role="listitem" event:click="onItemClick" event:keydown="onColumnKeyDown" event:keyup="endScroll"><TextBlock Text="{Binding text}" /></li>                    </DataTemplate>                </ItemsControl.ItemTemplate>            </ItemsControl>        </div>        <div class="spinBoxDownArrow" event:mousedown="onDownArrow" event:mouseup="endScroll" event:mouseout="endScroll" event:touchend="endScroll"></div>    </div></div>',{onItemClick:function(e){e.preventDefault();for(var t=e.target.getAttribute("data-value"),n=-1,o=a.getItemsSource(),r=o.length-1;0<=r;r--)if(o[r].value==t){n=r;break}n===a._pos?a._invokeOpenEvent():a._setPos(n)},onMouseOver:function(e){e.preventDefault(),e.stopPropagation(),a._setActiveDescendentID()},onCellClick:function(e){e.stopPropagation(),a._invokeOpenEvent()},onUpArrow:function(){a._scroll(-1,500)},onDownArrow:function(){a._scroll(1,500)},onColumnKeyDown:function(e){var t=e.keyCode||e.which;38!==t&&40!==t&&13!==t||(e.stopPropagation(),e.preventDefault()),38===t?a._scroll(-1,500):40===t?a._scroll(1,500):13===t&&a._invokeOpenEvent()},endScroll:function(){window.clearTimeout(a._timerId),a._setActiveDescendentID()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault()},onColumnClick:function(e){e.stopPropagation()},onMouseWheel:function(e){e.stopPropagation(),e.preventDefault(),e.wheelDelta&&a._setPos(a._pos+(0<e.wheelDelta?-1:1))},indexToValue:function(e){var t=a.getItemsSource();return!t||e<0||e>=t.length?"":t[e].text},boolToDisplay:function(e){return e?"":"none"}})),a}function De(){var n=d.call(this)||this;return n.defineProperty("value",function(e,t){return n.onAttributeChanged("value",e,t)}),n.defineProperty("min",function(e,t){return n.onAttributeChanged("min",e,t)}),n.defineProperty("max",function(e,t){return n.onAttributeChanged("max",e,t)}),n.defineProperty("step",function(e,t){return n.onAttributeChanged("step",e,t)}),n.setTemplate('<input type="range" value="{TemplateBinding Value Mode=TwoWay}"/>'),n}function Ie(){var n=p.call(this)||this;return n.defineProperty("ignorePopOutButtonText"),n.defineProperty("popOutButtonText"),n.defineProperty("selectedItem",function(e,t){n._handleSelectedItemChanged(e,t)}),n.defineProperty("itemsSource",function(e,t){n.getPopOutContent().options=t}),n.defineProperty("dropdownOpen",n._onDropdownOpenChanged,null,{isPrivate:!0}),n.defineProperty("popOutContent",null,null,{defaultValue:{options:null},isPrivate:!0}),n.dropdown=new G,n.setTemplate(new V('<span class="{TemplateBinding DropdownOpen Converter=openToCssClass}" data-tag="selectControl"><PopOutButton PopOutContent="{TemplateBinding PopOutContent}" IsDisplayed="{TemplateBinding DropdownOpen Mode=TwoWay}" ButtonText="{TemplateBinding PopOutButtonText}" ButtonClass="popOutButton dropdownBtn" ><PopOutButton.PopOutTemplate><DataTemplate><div><Dropdown ItemsSource="{Binding options}" event:onEntryClicked="onEntryClicked" ><Dropdown.ItemTemplate><DataTemplate><TextBlock Text="{Binding text}" /></DataTemplate></Dropdown.ItemTemplate></Dropdown></div></DataTemplate></PopOutButton.PopOutTemplate></PopOutButton></span>',{onEntryClicked:function(e){n.setDropdownOpen(!1),n.setSelectedItem(n.getItemsSource()[e]),window.clearTimeout(Ie.timeoutHandler),Ie.timeoutHandler=Microsoft.Maps.setTimeout(function(){n.getRootElement().select(".popOutButton")[0].focus()},Ie.timeoutTime/5)},openToCssClass:function(e){return"selectControl"+(e?" dropdownOpen":"")}})),n}function Le(){var r=u.call(this)||this;return r.defineProperty("itemsSource"),r.defineProperty("selectedItem",r._onSelectedItemChanged),r.setTemplate(new V('<div class="radioGroup" data-tag="radioGroup"><ItemsControl ItemsSource="{TemplateBinding itemsSource}"><ItemsControl.ItemTemplate><DataTemplate><a href="#" data-value="{Binding value}" event:click="onClick" role="button" aria-current="false"><TextBlock Text="{Binding text}"/></a></DataTemplate></ItemsControl.ItemTemplate></ItemsControl></div>',{onClick:function(e){var t,n,o;for(e.preventDefault(),t=e.target.getAttribute("data-value"),n=r.getItemsSource(),o=0;o<n.length;o++)if(n[o].value==t){r.setSelectedItem(n[o]);break}}})),r}function Be(){var o=h.call(this)||this;return o._templateString='<div class="bm_popOutContainer" data-tag="popOutContainer"><a class="{TemplateBinding ButtonClass}" event:click="onButtonClick" href="#" role="button" aria-expanded="{TemplateBinding IsDisplayed}" ><TextBlock Text="{TemplateBinding ButtonText}" /></a><div class="popOutTemplate" data-tag="popOutTemplate" style:display="{TemplateBinding IsDisplayed Converter=displayPopOut}" event:click="onPopOutClick" event:touchend="onPopOutClick" event:mousewheel="onMouseWheel" ><PopOutPresenter /></div></div>',o.defineProperty("popOutContent"),o.defineProperty("popOutTemplate"),o.defineProperty("buttonText"),o.defineProperty("buttonClass",null,null,{defaultValue:"popOutButton"}),o.defineProperty("isDisplayed",function(e,t){return o._onDisplayChange(e,t)},null,{defaultValue:!1}),o.setTemplate(new V(o._templateString,{onButtonClick:function(e){return o._onButtonClick(e)},onPopOutClick:function(e){e.stopPropagation()},onMouseWheel:function(e){return o._onMouseWheel(e)},displayPopOut:function(e){return o.displayPopOut(e)}})),o._windowClickOrKeyboardEventHandler=function(e){var t,n=e?e.keyCode||e.which:null;n&&27===n?o._hidePopOut(e):(t=e.target,(n=o.getRootElement())&&n.has(t)||("dropdownEntry"===(n=t&&t.className.toString())&&0<t.childElementCount&&0<t.children[0].childElementCount&&(n=(t=t.children[0].childNodes[0]).className.toString()),t=t&&t.parentElement&&t.parentElement.className&&t.parentElement.className.toString(),n&&-1!==n.indexOf("feedbackMenuLink")||t&&-1!==t.indexOf("feedbackMenuLink")||o._hidePopOut(e)))},o}function ke(){var e=_.call(this)||this;return e._templateString='<div class="{TemplateBinding Class}" data-tag="popOutTop"><div class="popOutInner" data-tag="popOutInner"><ContentPresenter /></div></div>',e.defineProperty("class",null,null,{defaultValue:"popOutTop"}),e.setTemplate(new V(e._templateString,null)),e}function Ee(){var e,t,n=g.call(this)||this;return n._ignoreDateTimeChanged=!1,n.defineProperty("time",n.onTimeChanged),n.defineProperty("date",n.onDateChanged),n.defineProperty("mobileDate"),n.defineProperty("mobileTime"),n.setTemplate(new V(le,{onSetDate:function(e){n._parseDate(e)},onSetTime:function(e){n._parseTime(e)}})),e=n._getCurrentDate(),t=n._getCurrentTime(),n.setMobileDate(e),n.setMobileTime(t),n}function Me(){var e=m.call(this)||this;return e._templateString='<div class="{TemplateBinding ContainerClass}"><ItemsPresenter /></div>',e.defineProperty("sourceKey",function(){return e._onSourceChanged()}),e.defineProperty("sourceMap",function(){return e._onSourceChanged()}),e.defineProperty("containerClass"),e.setTemplate(new V(e._templateString,null)),e}function Oe(){var n=f.call(this)||this;return n._enabledTags=["b","strong"],n.defineProperty("formattedtext",function(e,t){return n.onFormattedTextChanged(e,t)}),n._root=document.createElement("span"),n}function Re(){var n=y.call(this)||this;return n._defaultTemplate="<div class='flexItems'><ItemsPresenter /></div>",n.defineProperty("itemsSource"),n.defineProperty("itemTemplate",function(e,t){return n._onItemTemplateChanged(e,t)}),n.setTemplate(n._defaultTemplate),n}function Ae(){var e=T.call(this)||this;return e._templateString='<div class="{TemplateBinding Class}" aria-label="{TemplateBinding AriaLabel}" event:mousemove="onScroll" event:touchmove="onScroll" event:pointermove="onScroll" data-tag="popOutTop"><div class="popOutInner" data-tag="popOutInner"><ItemsPresenter /></div></div>',e.defineProperty("class",null,null,{defaultValue:"popOutTop"}),e.defineProperty("ariaLabel"),(e.itemContainerGenerator=e).onEntryClicked=new G,e.onEntryMouseover=new G,e.onEntryMouseout=new G,e.setTemplate(new V(e._templateString,{onScroll:function(e){"touchmove"===e.type&&(Ae._scrolling=!0),e.stopPropagation(),e.cancelBubble=!0}})),e}function Ne(){var t=v.call(this)||this;return t._autoScrollBuffer=150,t._autoScrollStep=20,t._timeoutLength=100,(t.itemContainerGenerator=t).onDragBegin=new G,t.onDragComplete=new G,t._timeoutId=0,t.defineProperty("draggedEntry"),t.defineProperty("placeholderElement"),t.defineProperty("ulClass"),t.defineProperty("blockDrag"),t.setTemplate(new V(Ne._draggableListFlexTemplate,{onDragMove:function(e){return t._onDragMove(e)},onDragEnd:function(e){return t._onDragEnd(e)}})),t}function Ye(){var e=x.call(this)||this;return e._templateString='<div><ItemsControl ItemsSource="{TemplateBinding KeyList}" ><ItemsControl.ItemTemplate><DataTemplate><div class="{StaticBinding BlockClass}" data-key="{Binding key}" event:click="onBlockClick"><div class="{StaticBinding NameClass}"><TextBlock Text="{Binding key}" /></div><MappedItemsControl ContainerClass="{StaticBinding ContainerClass}" SourceKey="{Binding key}" SourceMap="{StaticBinding Dictionary}" ItemTemplate="{StaticBinding ValueTemplate}" /></div></DataTemplate></ItemsControl.ItemTemplate></ItemsControl></div>',e.defineProperty("keyList"),e.defineProperty("dictionary",function(){return e._updateTemplate()}),e.defineProperty("valueTemplate",function(){return e._updateTemplate()}),e.defineProperty("nameClass",function(){return e._updateTemplate()},null,{defaultValue:"hideName"}),e.defineProperty("containerClass"),e.defineProperty("blockClass"),e.onBlockClicked=new G,e.setTemplate(new V(e._templateString,null)),e}function Xe(){var n=C.call(this)||this;return n.defineProperty("containerClass"),n.defineProperty("controlName",function(e,t){n._control&&n._control.dispose(),n._control=null,t&&(n._control=V.createControl(t),n.rendered.addOne(function(){n._control.rendered.invoke(n),n.setControlRef(n._control)}),n.setContent(n._control),n.setContentTemplate(n._control.getTemplate()))}),n.defineProperty("controlRef"),n.setTemplate('<div class="{TemplateBinding containerClass}" ><ContentPresenter /></div>'),n}function Fe(){var n=b.call(this)||this;return(n.itemContainerGenerator=n).defineProperty("selectedItem",function(e,t){return n._onSelectedItemChanged(e,t)}),n.setTemplate(new V('<select event:change="onChange"><ItemsPresenter /></select>',{onChange:function(){return n._onSelectionChanged()}})),n}function Ve(){var n=S.call(this)||this;return n._defaultTemplate="<{tag}><ItemsPresenter /></{tag}>",n.defineProperty("panelTagName",function(e,t){return n._onPanelTagNameChanged(e,t)},null,{defaultValue:"div"}),n.defineProperty("itemsSource"),n.defineProperty("itemTemplate",function(e,t){return n._onItemTemplateChanged(e,t)}),n._onPanelTagNameChanged(null,n.getPanelTagName()),n}function He(){var o=P.call(this)||this;return o.defineProperty("checked",function(e,t){t=t?q.ClickToUnselect:q.ClickToSelect;o.setAriaLabel(t),o.setTitle(t)},null,{defaultValue:!1}),o.defineProperty("ariaLabel"),o.defineProperty("title"),o.defineProperty("ariaLabelBy"),o.defineProperty("disabled",function(e,t){var n=o.getRootElement().select("input");t?n.set_attr("disabled","disabled"):n.remove_attr("disabled")},null,{defaultValue:!1}),o.defineProperty("value"),o.setTemplate('<label><input type="checkbox" value="{TemplateBinding Value}" aria-checked="{TemplateBinding Checked}" checked="{TemplateBinding Checked Mode=TwoWay}" title="{TemplateBinding Title}" aria-labelledBy="{TemplateBinding ariaLabelBy}" data-tag="checkbox" /><ContentPresenter /></label>'),o}function je(e){var n=D.call(this,e)||this;return(e=e||n).defineProperty("content"),e.defineProperty("contentTemplate",function(e,t){return n._onContentTemplateChanged(e,t)}),n}function We(){var t=I.call(this)||this;return t._templateString='<a class="{TemplateBinding buttonClass Converter=setClassName}" data-tag="{TemplateBinding buttonClass}" title="{TemplateBinding hoverText}" event:click="onButtonClick" href="#"><span class="{TemplateBinding buttonIcon Converter=setIconClassName}"> </span><TextBlock Text="{TemplateBinding buttonText}" /></a>',t.defineProperty("buttonText"),t.defineProperty("buttonClass"),t.defineProperty("buttonIcon"),t.defineProperty("hoverText"),t.click=new G,t.setTemplate(new V(t._templateString,{onButtonClick:function(e){t._onButtonClick(e)},setClassName:function(e){return t._setClassName(e)},setIconClassName:function(e){return t._setIconClassName(e)}})),t}function Ke(e,t){var n=L.call(this,e)||this;return e=e||n,n.disposables=[],n._controlArgs=t||{},n.disposables.push(n.rendered=new G),e.defineProperty("template",function(e,t){return n._onTemplateChanged(e,t)},Ke._templateConverter),n}function Ge(){}function ze(e,t,n,o,r,a,i){i=B.call(this,t,a,i)||this;return i._parent=e,i._hAlign=n,i._vAlign=o,i._offset=r||{x:0,y:0},i.setHitTestShape(0),i}function Ue(e,t,n){var o,r,a=k.call(this)||this;a._image=e,a._hitTestShape=1,a._scale=t="number"!=typeof t?1:t,a._anchor=n,a._cachedTextScale={},n=void 0!==ie&&ie.features.labels||{},a._container=n.renderVectorImageOnDOM?document.body:null,a._iconTextYAdjust=n.iconTextYAdjust;for(var i=[],s=[],l=e.records||[],c=0,d=l.length;c<d;c++)(o=l[c]).scale=isFinite(o.scale)?o.scale:1,3===o.vectorType?(r=o,s.push(r),r.text===Ue.placeholderText&&(a.hasPlaceholderText=!0,a._templateTextRecord=r)):i.push(o);return a._vectorRecords=i,a._textRecords=s,a.hasText=!!s.length,a.shadowStyle={},a}function Ze(e){var t=this;this._map=e,this._map.mapTypeChanged.add(function(e){e.newMapTypeId!==e.oldMapTypeId&&(t._resetTemplateSelector=!0)})}function $e(e,t,n,o,r){var a=E.call(this)||this;return a._scale=t||1,a._anchor=n||new ee(0,0,1),a._hitTestShape=1,e&&(e instanceof HTMLImageElement?a._image=e:(a._image=document.createElement("img"),a._image.src=e),a._checkTainted(),K._renderAllPoiAndLabelsGL()&&((e=e.src||e)&&(a.id=K._getHash(e)+r))),a}function Je(e){var t=M.call(this)||this;return t._style=e,t}function qe(e,t){return O.call(this,e,t,qe.createControl)||this}function Qe(e,t,n){this._staticResources=t,this._controlFactory=n,this._disposables=[],this._parsed="string"==typeof e?Qe._parseTemplate(e):e}}.call(window);
