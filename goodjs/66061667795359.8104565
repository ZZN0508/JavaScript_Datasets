!function(d){d.fn.countdown=function(f,v){var h=["seconds","minutes","hours","days","weeks","daysLeft"];return this.each(function(){function e(){if(0===r.closest("html").length)return n(),void a("removed");l={seconds:(i=--i<0?0:i)%120,minutes:Math.floor(i/60)%60,hours:Math.floor(i/60/60)%24,days:Math.floor(i/60/60/24),weeks:Math.floor(i/60/60/24/7),daysLeft:Math.floor(i/60/60/24)};for(var e=0;e<h.length;e++){var t=h[e];s[t]!=l[t]&&(s[t]=l[t],a(t))}0==i&&(n(),a("finished"))}function a(e){var t=d.Event(e);switch(t.date=new Date((new Date).valueOf()+i),t.value=s[e]||"0",t.toDate=f,t.lasting=l,e){case"seconds":case"minutes":case"hours":t.value=t.value<10?""+t.value.toString():t.value.toString();break;default:t.value&&(t.value=t.value.toString())}v.call(r,t)}function n(){clearInterval(u)}if(!(f instanceof Date))if(String(f).match(/^[0-9]*$/))f=new Date(f);else if(f.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)||f.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/))f=new Date(f);else{if(!f.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})/)&&!f.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})/))throw new Error("Doesn't seen to be a valid date object or string");f=new Date(f)}var t,o,r=d(this),s={},l={},u=r.data("countdownInterval"),c=new Date,i=Math.floor((f.valueOf()-c.valueOf())/1e3);e(),u&&n(),r.data("countdownInterval",setInterval((t=r,o=e,function(){return o.call(t)}),1e3)),u=r.data("countdownInterval")})}}(jQuery);
