(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"0WSl":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r});var n=n("E9Wd"),a="".concat(n.U,"/account/messages"),i="".concat(n.U,"/upload"),r="https://help.imgur.com/hc/en-us/articles/360038529112"},"7tjL":function(e,t,n){},"92em":function(e,t,n){},"BuJ/":function(e,t,n){},Et25:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var a=n("b5GN"),i=n("GB65");function r(e,t,n){if(!e||!t)return null;var a=t.toJS();return e.map(function(e){var t=e.get("id");return e=e.set("voted_count",a[t]||0),e=n===t?e.set("user_selected",!0):e}).filter(function(e){return 0<e.get("voted_count")}).sort(function(e,t){return e.get("user_selected")?-1:t.get("user_selected")?1:t.get("voted_count")-e.get("voted_count")})}function o(){var e=Object(i.w)();return e&&e.startsWith("/".concat(a.f))}function c(e,t){e=e.filter(function(e){return e.type===t});return 0<e.length?e[0]:{}}},LZBw:function(e,t,n){"use strict";var a=n("lwsE"),c=n.n(a),i=n("W8MJ"),s=n.n(i),r=n("7W2i"),l=n.n(r),o=n("a1gu"),d=n.n(o),u=n("Nsbk"),p=n.n(u),a=n("q1tI"),m=n.n(a),h=(n("17x9"),n("/MKj")),f=n("WSv3"),g=n("E9Wd"),b=n("G5ih"),i=n("lSNA"),v=n.n(i),r=n("TSYQ"),y=n.n(r),N=n("0WSl"),k=n("7oyi"),E=n("BWa0");function C(e){var t=e.unseen,e=e.onClick,t=y()({NavbarMessageButton:!0,"notification-dot":0<t,"ProfileNavbar-item":!0,uScaleTransition:!0});return m.a.createElement(k.b,{className:t,href:N.b,onClick:e,title:Object(b.b)("labelChat"),image:m.a.createElement(E.cb,{title:Object(b.b)("labelChat"),name:E.f,width:"32",height:"32"})})}n("X+lB"),C.__docgenInfo={description:"",methods:[],displayName:"NavbarMessageButton",props:{unseen:{type:{name:"number"},required:!1,description:""},onClick:{type:{name:"func"},required:!1,description:""}}};var A=n("lZex"),o=n("ANjH"),S=n("55Ip"),u=n("987h"),w=n("QSMB"),O=n("PSaT"),i=n("jHDt"),q=n("MxOc"),R=n("GB65"),j=n("Dhp7"),r=(n("b1r/"),n("NTmO")),D=n.n(r);r=function(e){l()(i,e);var n,a,t=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function i(){return c()(this,i),t.apply(this,arguments)}return s()(i,[{key:"componentDidMount",value:function(){if(this.props.statusSS===O.G.NO_DATA&&this.props.fetchSecretSantaConfig(),this.props.isOpen)return Object(R.Bb)(this.props.markSantaTooltipAsViewed,7e3),this.props.markSantaTooltipAsRendered()}},{key:"componentDidUpdate",value:function(e){this.props.isCoverFixed&&!e.isCoverFixed&&this.props.markSantaTooltipAsViewed()}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.isOpen,a=e.isCoverFixed,i=e.isRegistrationOpen;if(e.statusSS!==O.G.READY)return null;e=t.get("status")===O.E.NOT_FOUND,t=t.get("status")>O.E.NOT_FOUND,a=i&&e&&!a,n="NavbarButtonSS-tooltip ".concat(n&&"NavbarButtonSS-tooltip--open");return m.a.createElement(S.b,{to:t?O.db:O.U,className:"NavbarButtonSS",title:Object(q.a)("navbarButtonLabel")},m.a.createElement(w.K,{name:w.p,className:"uScaleTransition ProfileNavbar-item"}),a&&m.a.createElement("img",{className:n,src:D.a}))}}]),i}(m.a.Component);r.__docgenInfo={description:"",methods:[],displayName:"NavbarButtonSS",props:{profile:{type:{name:"object"},required:!0,description:""},statusSS:{type:{name:"string"},required:!0,description:""},isOpen:{type:{name:"bool"},required:!1,description:""},isCoverFixed:{type:{name:"bool"},required:!1,description:""},isRegistrationOpen:{type:{name:"bool"},required:!1,description:""},markSantaTooltipAsRendered:{type:{name:"func"},required:!0,description:""},markSantaTooltipAsViewed:{type:{name:"func"},required:!0,description:""},fetchSecretSantaConfig:{type:{name:"func"},required:!0,description:""}}};var I=Object(o.d)(Object(h.b)(function(e){var t=e.ui,n=e.secretSanta,a=e.user,i=n.config,r=n.register,e=n.tooltip;return{statusSS:n.status,isCoverFixed:t.cover.get("fixed"),isRegistrationOpen:r.get("isOpen")&&Object(j.k)(i.get("registrationOpenDate"),i.get("registrationCloseDate")),isOpen:e.get("isOpen"),isUserLoggedIn:a.get("isLoggedIn")}},{markSantaTooltipAsRendered:i.h,markSantaTooltipAsViewed:i.i,fetchSecretSantaConfig:i.f}),u.a)(r),r=n("PJYZ"),U=n.n(r),P=n("zTH+");n("awMJ");r=function(e){l()(r,e);var n,a,i=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function r(){var t;c()(this,r);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=i.call.apply(i,[this].concat(n)),v()(U()(t),"confettiClass",y()({NavbarConfettiButton:!0,"ProfileNavbar-item":!0,uScaleTransition:!0})),v()(U()(t),"handleClick",function(e){e.preventDefault(),(0,t.props.confettiClickAnalytics)(),Object(R.Fb)("confetti")}),t}return s()(r,[{key:"render",value:function(){return m.a.createElement(k.b,{className:this.confettiClass,onClick:this.handleClick,image:m.a.createElement(E.cb,{name:E.e,width:"32",height:"32",viewBox:"3 2 26 27"})})}}]),r}(m.a.Component);r.__docgenInfo={description:"",methods:[{name:"handleClick",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"NavbarConfettiButton",props:{confettiClickAnalytics:{type:{name:"func"},required:!1,description:""}}};var M=Object(h.b)(null,{confettiClickAnalytics:P.f})(r),_=n("JzwX"),B=n("xypG"),x=n("qh6O"),T=n("VJ7e");function F(e){e=e.notification;if(!e)return null;var t,n,a=[],i=e.get("text"),r=e.get("id"),o=0,c=[];return e.getIn(["annotations","mention"]).forEach(function(e){c=e.get("indices"),t=i.substr(o,c.get(0)),n=i.substr(c.get(0),c.get(1)-c.get(0)),a.push(m.a.createElement("span",{key:"".concat(t,"-").concat(r)},t)),a.push(m.a.createElement("strong",{className:"NotificationCardText-annotation",key:"".concat(n,"-").concat(r)},n)),o=c.get(1)}),e=i.substr(o),a.push(m.a.createElement("span",{key:"".concat(e,"-").concat(r)},e)),m.a.createElement("div",{className:"NotificationCardText"},a)}function L(e){var t=e.notification,n=e.onClick;if(!t)return null;var a=new Date(1e3*t.get("updated_at")),i=t.getIn(["image","url"]),e=y()({"NotificationCard-thumb":!0,isUnread:t.get("state")!==T.b});return m.a.createElement(S.a,{to:function(e){var t=e.get("action");if(!t)return"";t=t.replace("imgur://","https://");return{pathname:new URL(t).pathname,search:"?nid=".concat(e.get("id")),state:{accoladeConfetti:e.get("type")===T.a,hash:e.getIn(["post_definition","post_hash"])}}}(t),className:"NotificationCard",onClick:n},m.a.createElement("div",{className:e},m.a.createElement("img",{className:"NotificationCard-dot",src:i})),m.a.createElement(F,{notification:t}),m.a.createElement(x.a,{className:"When--notificationCard",date:a}))}n("7tjL"),F.__docgenInfo={description:"",methods:[],displayName:"NotificationCardText",props:{notification:{type:{name:"object"},required:!1,description:""}}},n("BuJ/"),L.defaultProps={onClick:function(){}},L.__docgenInfo={description:"",methods:[],displayName:"NotificationCard",props:{onClick:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},notification:{type:{name:"object"},required:!1,description:""}}};var W=n("oHla");r=function(e){l()(r,e);var n,a,i=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function r(e){var t;return c()(this,r),t=i.call(this,e),v()(U()(t),"container",null),v()(U()(t),"isStyler",!1),v()(U()(t),"removeListenerResize",null),v()(U()(t),"getReference",function(e){(t.container=e)&&t.updateScrollStyler()}),v()(U()(t),"updateScrollStyler",function(){var e=t.container.offsetWidth-t.container.clientWidth;t.state.scrollBarWidth!==e&&t.container&&t.setState({scrollBarWidth:e})}),t.state={scrollBarWidth:0},t}return s()(r,[{key:"componentDidMount",value:function(){var e=this.props.userAgent;this.isStyler=Object(W.b)(e)||Object(W.a)(e)}},{key:"componentDidUpdate",value:function(e){this.isStyler&&e.width!==this.props.width&&this.updateScrollStyler()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.height,a=e.onWheel,i=e.onTouchMove,r=e.onScroll,e=this.state.scrollBarWidth;return m.a.createElement("div",{ref:this.getReference,className:"DropdownScrollbar Scrollbar",onWheel:a,onTouchMove:i,onScroll:r,style:{maxHeight:n}},t,this.isStyler&&m.a.createElement("div",{className:"styler",style:{width:e}}))}}]),r}(m.a.Component);r.defaultProps={height:0},r.__docgenInfo={description:"",methods:[{name:"getReference",docblock:null,modifiers:[],params:[{name:"element",type:null}],returns:null},{name:"updateScrollStyler",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DropdownScrollbar",props:{height:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},children:{type:{name:"instanceOf",value:"Object"},required:!1,description:""},onWheel:{type:{name:"func"},required:!1,description:""},onTouchMove:{type:{name:"func"},required:!1,description:""},onScroll:{type:{name:"func"},required:!1,description:""},userAgent:{type:{name:"string"},required:!1,description:""},width:{type:{name:"number"},required:!1,description:""}}};var H=Object(h.b)(function(e){var t=e.agent,e=e.display;return{userAgent:t.get("useragent"),width:e.getIn(["viewPort","width"])}})(r);function z(e){var t=e.height,e=Object(b.b)("noNotifications");return m.a.createElement("div",{className:"NotificationsEmpty",style:{lineHeight:"".concat(Math.min(150,t),"px"),textAlign:"center"}},e)}function J(e){e=e.markAllAsRead;return m.a.createElement("div",{className:"NotificationsHeader cf"},m.a.createElement("span",{className:"NotificationsHeader-title left"},Object(b.b)("notifications")),e&&m.a.createElement("span",{className:"NotificationsHeader-markall right",onClick:e},Object(b.b)("markAllAsRead")))}z.defaultProps={height:14},z.__docgenInfo={description:"",methods:[],displayName:"NotificationsEmpty",props:{height:{defaultValue:{value:"14",computed:!1},type:{name:"number"},required:!1,description:""}}},n("PJRO"),J.__docgenInfo={description:"",methods:[],displayName:"NotificationsHeader",props:{markAllAsRead:{type:{name:"func"},required:!1,description:""}}};var G=n("Cz+I");function V(e){var t=e.error,n=e.tryAgain,a=e.dismiss;if(!t)return null;var e=t.get("message"),i=t.get("meta").toJS(),r=t.get("type");return m.a.createElement("div",{className:"NotificationError"},m.a.createElement("div",{className:"NotificationError-message"},e,m.a.createElement("span",{className:"NotificationError-buttons"},m.a.createElement("a",{className:"Button ButtonLink icon-retry NotificationError-retry",onClick:function(){n(r,i)}},Object(b.b)("errorRetry")),m.a.createElement("span",{className:"NotificationError-divider"}," â€¢ "),m.a.createElement("a",{className:"Button ButtonLink NotificationError-dismiss",onClick:a},Object(b.b)("errorDismiss")))))}n("kacx"),V.__docgenInfo={description:"",methods:[],displayName:"NotificationError",props:{error:{type:{name:"object"},required:!1,description:""},tryAgain:{type:{name:"func"},required:!0,description:""},dismiss:{type:{name:"func"},required:!0,description:""}}};var Y=Object(h.b)(function(e){return{error:e.notifications.get("error")}},function(a){return{tryAgain:function(e,t){var n=Object(G.k)(e),t=t.options.params;n&&a(n(e=G.f&&t?t.pageToken:null))},dismiss:function(){return a(Object(G.i)())}}})(V);n("y6ID");var Z=function(e){l()(r,e);var n,a,i=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function r(){var a;c()(this,r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a=i.call.apply(i,[this].concat(t)),v()(U()(a),"onClick",function(e){var t=a.props,n=t.markAsRead,t=t.closeNotifications;e.get("state")!==T.b&&n(e.get("id")),t()}),a}return s()(r,[{key:"render",value:function(){var t=this,e=this.props,n=e.markAllAsRead,a=e.isFetching,i=e.onWheel,r=e.onScroll,o=e.height,e=e.notifications;return m.a.createElement("div",{className:"NotificationCards"},m.a.createElement(J,{markAllAsRead:0<e.size?n:void 0}),m.a.createElement(Y,null),0!==e.size||a?m.a.createElement(H,{onWheel:i,onScroll:r,height:o},e.map(function(e){return e&&m.a.createElement(L,{key:"notif-".concat(e.get("id"),"-").concat(e.get("state")),notification:e,onClick:function(){return t.onClick(e)}})}),a&&m.a.createElement(B.b,{model:"notifications",size:60,status:{loading:a},applyStyle:{position:"absolute",left:"calc(50% - 30px)",top:"calc(50% - 30px)"}})):m.a.createElement(z,{height:o}),m.a.createElement("div",{className:"NotificationCards-bottomGradient"}))}}]),r}(a.Component);Z.defaultProps={markAsRead:function(){},closeNotifications:function(){}},Z.__docgenInfo={description:"",methods:[{name:"onClick",docblock:null,modifiers:[],params:[{name:"notification",type:null}],returns:null}],displayName:"NotificationCards",props:{markAsRead:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},closeNotifications:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},notifications:{type:{name:"object"},required:!1,description:""},markAllAsRead:{type:{name:"func"},required:!1,description:""},isFetching:{type:{name:"bool"},required:!1,description:""},onWheel:{type:{name:"func"},required:!1,description:""},onScroll:{type:{name:"func"},required:!1,description:""},height:{type:{name:"number"},required:!1,description:""}}};var K=n("/PhX"),X=n("DUmG");function Q(e){var t=e.display,e=e.ui;return{height:t.getIn(["viewPort","height"]),positionY:t.get("positionY"),isOpen:e.notifications.get("open")}}function $(e){return Object(h.b)(Q,{closeNotifications:K.z,toggleNotifications:K.K})((u=e,(e=function(e){l()(i,e);var n,a,t=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function i(e){var r;return c()(this,i),r=t.call(this,e),v()(U()(r),"scrollElement",null),v()(U()(r),"dropdownHeight",0),v()(U()(r),"toggleDropdown",function(){var e=r.props,t=e.markAllAsSeen,n=e.isOpen,e=e.toggleNotifications;n||t(),e()}),v()(U()(r),"calculateDropdownHeight",function(e){r.dropdownHeight=e-X.$navbarHeight-100}),v()(U()(r),"handleWindowClick",function(e){var t=r.props,n=t.isOpen,a=t.closeNotifications,t=r.dropdown;return n&&t&&(t===e.target||t.contains(e.target)||a()),!0}),v()(U()(r),"handleNotificationPagination",function(e){r.scrollElement=e.target}),v()(U()(r),"wheelHandler",function(e){var t=r.props,n=t.isFetching,a=t.reachedEnd,i=t.requestNextNotificationPage;if(!r.scrollElement||e.deltaY<=0||!r.scrollElement.scrollHeight)return!0;t=r.dropdownHeight+r.scrollElement.scrollTop+100>r.scrollElement.scrollHeight;(n||t)&&(a||n||i(),e.preventDefault())}),r.calculateDropdownHeight(e.height),r}return s()(i,[{key:"closeDropdown",value:function(e,t){var n=this.props,a=n.isOpen,n=n.closeNotifications;if(!t&&a)return 100<e&&n()}},{key:"componentDidMount",value:function(){var e=this;this.autoCloser=Object(_.a)({el:function(){return e.dropdown},cb:this.handleWindowClick})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.height,a=t.positionY,t=t.isFetching;n!==e.height&&this.calculateDropdownHeight(n),a!==e.positionY&&this.closeDropdown(a,t)}},{key:"componentWillUnmount",value:function(){this.scrollElement=null,"function"==typeof this.autoCloser&&this.autoCloser()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.unseen,t=t.isOpen;return n!==e.unseen||t||e.isOpen}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,a=e.markAsRead,i=e.markAllAsRead,r=e.isFetching,o=e.notifications,c=e.isOpen,s=e.unseen,l=e.closeNotifications,e=y()((e={NotificationsDropdown:!0},v()(e,n,n),v()(e,"open",c),e));return m.a.createElement("div",{ref:function(e){t.dropdown=e},className:e},u&&m.a.createElement(u,{unseen:s,onClick:this.toggleDropdown}),c&&m.a.createElement(Z,{notifications:o,isFetching:r,markAllAsRead:i,markAsRead:a,closeNotifications:l,onWheel:this.wheelHandler,onScroll:this.handleNotificationPagination,height:this.dropdownHeight}))}}]),i}(m.a.Component)).defaultProps={isFetching:!1,reachedEnd:!1,className:""},e));var u}function ee(e){var t=e.unseen,e=e.onClick,t=y()({NotificationButton:!0,"notification-dot":0<t,"ProfileNavbar-item":!0,uScaleTransition:!0});return m.a.createElement(k.b,{className:t,onClick:e,title:Object(b.b)("notifications"),image:m.a.createElement(E.cb,{title:Object(b.b)("notifications"),name:E.y,width:"32",height:"32",viewBox:"0 -2 34 34"})})}n("NRal");var te=$(ee);ee.__docgenInfo={description:"",methods:[],displayName:"NavbarNotificationButton",props:{unseen:{type:{name:"number"},required:!1,description:""},onClick:{type:{name:"func"},required:!1,description:""}}};var ne=n("/iGR"),ae=n("Z6Av"),ie=n("Et25"),re="brazeNotificationSeen";function oe(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=n("rfzL");a.initialize(g.j,{enableHtmlInAppMessages:!0,noCookies:!0}),Object(ie.b)()||a.subscribeToInAppMessage(function(n){!function(){var e=function(e){var t=e.message.match(/\/\/ campaign ID: ([A-Za-z0-9-])+/);if(null!=t&&0<t.length)return t[0].substring("// campaign ID: ".length);e=e.extras;return e.hasOwnProperty("campaignID")?e.campaignID:null}(n);if(e){var t=Object(R.F)(re);return(!t||t!==e)&&(Object(R.zb)(re,e),1)}return 1}()||(function(){var e=n.extras;if(e.hasOwnProperty("updateCustomAttributeOnShow")){var t={};try{t=JSON.parse(e.updateCustomAttributeOnShow)}catch(e){}t.key&&a.getUser().setCustomUserAttribute(t.key,t.value||null)}}(),a.display.showInAppMessage(n))}),!Object(ae.b)()&&g.r!==g.O||a.registerAppboyPushMessages(),a.changeUser(e),a.getUser().setCustomUserAttribute("UsesLegacyPostPage",!!t),a.openSession()}function ce(e){var t=e.notifications,n=e.ui,e=e.user;return{unseenNotifications:t.get("unseenNotifications"),unseenConversations:t.get("unseenConversations"),notifications:t.get("notifications"),pageToken:t.get("pageToken"),reachedEnd:t.get("reachedEnd"),isUpdateRequired:t.get("isUpdateRequired"),isActive:!n.notifications.get("isSmallScreen")||n.notifications.get("open"),isFetching:n.spinner&&n.spinner.get("notifications")&&n.spinner.get("notifications").loading,userID:e.get("id")}}function se(t){return{handleFetchNotifications:function(e){t(Object(G.j)(e))},handleMarkAllAsSeen:function(){t(Object(G.m)())},handleMarkAllAsRead:function(){t(Object(G.l)())},handleMarkAsRead:function(e){t(Object(G.n)(e))},handleFireMessagingNavAnalytics:function(){t(Object(P.d)("topNavBar"))}}}function le(e){return Object(h.b)(ce,se)((f=e,i=oe,(e=function(e){l()(o,e);var n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function o(){var i;c()(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=r.call.apply(r,[this].concat(t)),v()(U()(i),"requestNextNotificationPage",function(){var e=i.props,t=e.reachedEnd,n=e.isFetching,a=e.pageToken,e=e.handleFetchNotifications;t||n||e(a)}),i}return s()(o,[{key:"componentDidMount",value:function(){var e=this.props.userID,t="1"!==Object(ne.a)(g.q,Object(R.y)("cookie"));this.requestNextNotificationPage(),i(e,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isUpdateRequired,t=t.handleFetchNotifications;e.isUpdateRequired!==n&&n&&t(null)}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.className,a=e.username,i=e.unseenConversations,r=e.unseenNotifications,o=e.isFetching,c=e.notifications,s=e.handleFireMessagingNavAnalytics,l=e.reachedEnd,u=e.handleMarkAllAsSeen,d=e.handleMarkAllAsRead,p=e.handleMarkAsRead,e=e.cakeIcon;if(!f||!t)return null;e={className:n,username:a,unseenConversations:i,unseenNotifications:r,isFetching:o,notifications:c,fireMessagingNavAnalytics:s,reachedEnd:l,markAllAsSeen:u,markAllAsRead:d,markAsRead:p,cakeIcon:e,requestNextNotificationPage:this.requestNextNotificationPage};return m.a.createElement(f,e)}}]),o}(m.a.Component)).defaultProps={isActive:!0},e));var f,i}n("fuAU"),n("m6gU");var ue=le($());n("p5h/");a=function(e){l()(r,e);var n,a,i=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function r(e){c()(this,r);var t=i.call(this,e),n=!1,e=Date.now();return Date.parse(O.l)<e&&e<Date.parse(O.k)&&(n=!0),t.state={giftIcon:n},t}return s()(r,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.unseenConversations,a=e.unseenNotifications,i=e.handleFireMessagingNavAnalytics,r=e.cakeIcon,o=e.isFetching,c=e.notifications,s=e.reachedEnd,l=e.markAllAsSeen,u=e.markAllAsRead,d=e.markAsRead,p=e.requestNextNotificationPage,e=this.state.giftIcon,t=y()(v()({NavbarNotifications:!0},t,t)),p={unseen:a,isFetching:o,notifications:c,reachedEnd:s,markAllAsSeen:l,markAllAsRead:u,markAsRead:d,requestNextNotificationPage:p};return m.a.createElement("div",{className:t},e&&m.a.createElement(I,null),r&&m.a.createElement(M,null),m.a.createElement(A.b,null),m.a.createElement(C,{unseen:n,onClick:i}),m.a.createElement(te,p))}}]),r}(m.a.Component);a.defaultProps={className:""},a.__docgenInfo={description:"",methods:[],displayName:"NavbarNotifications",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},unseenConversations:{type:{name:"number"},required:!1,description:""},unseenNotifications:{type:{name:"number"},required:!1,description:""},isFetching:{type:{name:"bool"},required:!1,description:""},notifications:{type:{name:"object"},required:!1,description:""},handleFireMessagingNavAnalytics:{type:{name:"func"},required:!1,description:""},reachedEnd:{type:{name:"bool"},required:!1,description:""},markAllAsSeen:{type:{name:"func"},required:!1,description:""},markAllAsRead:{type:{name:"func"},required:!1,description:""},markAsRead:{type:{name:"func"},required:!1,description:""},requestNextNotificationPage:{type:{name:"func"},required:!1,description:""},cakeIcon:{type:{name:"bool"},required:!1,description:""}}};var de=Object(h.b)(function(e){return{cakeIcon:e.config.getIn(["featureFlags","cakeIcon"])}},function(e){return{handleFireMessagingNavAnalytics:function(){e(Object(P.d)("topNavBar"))}}})(le(a)),pe=n("9rNq"),fe=n("y/zE");function me(e){var t=e.displayUsername,n=e.className,e=y()((e={},v()(e,n,n),v()(e,"NavbarAvatar",!0),e));return m.a.createElement(fe.b,{className:e,displayUsername:t})}n("ds3J"),me.defaultProps={className:""},me.__docgenInfo={description:"",methods:[],displayName:"NavbarAvatar",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},displayUsername:{type:{name:"string"},required:!1,description:""}}};var he=n("4TFA"),ge=n("pNV7");n("SINw");a=function(e){l()(i,e);var n,a,t=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function i(){return c()(this,i),t.apply(this,arguments)}return s()(i,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.unseenConversations,a=e.unseenNotifications,i=e.isLoggedIn,e=e.handleToggleNotifications,t=y()(v()({NavbarUserMenuNotifications:!0},t,!!t));return m.a.createElement("div",{className:t},i&&m.a.createElement(C,{unseen:n,onClick:P.d}),i&&m.a.createElement(ee,{markAllAsSeen:G.m,unseen:a,onClick:e}))}}]),i}(m.a.Component);a.defaultProps={className:""},a.__docgenInfo={description:"",methods:[],displayName:"NavbarUserMenuNotifications",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},unseenConversations:{type:{name:"number"},required:!1,description:""},unseenNotifications:{type:{name:"number"},required:!1,description:""},isLoggedIn:{type:{name:"bool"},required:!1,description:""},fireMessagingNavAnalytics:{type:{name:"func"},required:!1,description:""},handleToggleNotifications:{type:{name:"func"},required:!1,description:""}}};var be=Object(h.b)(function(e){var t=e.user,e=e.notifications;return{isLoggedIn:t.get("isLoggedIn"),unseenNotifications:e.get("unseenNotifications"),unseenConversations:e.get("unseenConversations")}},function(e){return{fireMessagingNavAnalytics:function(){e(Object(P.d)("topNavBar"))},handleToggleNotifications:function(){e(Object(G.m)()),e(Object(K.K)())}}})(a);function ve(e){var t=e.username,e=e.displayUsername;return m.a.createElement("div",{className:"NavbarUserMenuCover",style:{backgroundImage:"url(".concat(g.U,"/user/").concat(t,"/cover)")}},m.a.createElement("div",{className:"NavbarUserMenuCover-row"},m.a.createElement(fe.b,{className:"NavbarAvatar NavbarAvatar-menu",displayUsername:e}),m.a.createElement(be,{className:"NavbarNotifications-menu",username:t})),m.a.createElement("div",{className:"NavbarUserMenuCover-row NavbarUserMenuCover-user"},e||t))}function ye(e){function t(e){return function(){o(e)}}var n=e.username,a=e.displayUsername,i=e.logout,r=e.profileBeta,o=e.userMenuClickAnalytics,c=a||n,s=r?m.a.createElement(S.b,{className:"Dropdown-option",to:"/user/".concat(c,"/posts"),onClick:t(he.e)},Object(b.b)("navbarMenuPosts")):m.a.createElement("a",{className:"Dropdown-option",href:"/user/".concat(c,"/submitted"),onClick:t(he.e)},Object(b.b)("navbarMenuPosts")),e=r?m.a.createElement(S.b,{className:"Dropdown-option",to:"/user/".concat(c,"/comments"),onClick:t(he.b)},Object(b.b)("navbarMenuComments")):m.a.createElement("a",{className:"Dropdown-option",href:"/user/".concat(c),onClick:t(he.b)},Object(b.b)("navbarMenuComments"));return m.a.createElement("div",{className:"NavbarUserMenuBlock"},m.a.createElement(pe.d,{className:"NavbarUserMenu",value:c,dropdownIcon:m.a.createElement(me,{className:"NavbarAvatar-navbar"}),onClickDropdown:function(e,t){e&&e.target.classList.contains("NavbarAvatar")&&t&&(o(he.f),Object(R.db)("".concat(g.U,"/user/").concat(c)))},disableGravity:!0},m.a.createElement(ve,{username:n,displayUsername:a}),m.a.createElement("div",{className:"Dropdown-option-group"},s,m.a.createElement(S.b,{className:"Dropdown-option",to:"/user/".concat(c,"/favorites"),onClick:t(he.c)},Object(b.b)("navbarMenuFavorites")),e,r&&m.a.createElement(S.b,{className:"Dropdown-option",to:"/user/".concat(c,"/about")},Object(b.b)("navbarMenuAbout")),m.a.createElement("a",{className:"Dropdown-option",href:"https://".concat(c,".").concat(g.T,"/all"),onClick:t(he.d)},Object(b.b)("navbarMenuImages"))),m.a.createElement("div",{className:"Dropdown-option-group Dropdown-option-footer"},m.a.createElement("a",{className:"Dropdown-option",onClick:t(he.g),href:g.a},m.a.createElement(ge.Z,{name:ge.w}),m.a.createElement("span",null,Object(b.b)("navbarMenuSettings"))),m.a.createElement("div",{className:"Dropdown-option",onClick:i},m.a.createElement(ge.Z,{name:ge.x}),m.a.createElement("span",null,Object(b.b)("signOut"))))))}function Ne(){return m.a.createElement("a",{className:"EmeraldButton Button",href:"/".concat(Ee.f,"?source=").concat(Ce.u)},Object(Ae.a)("goAdFree"))}n("92em"),ve.__docgenInfo={description:"",methods:[],displayName:"NavbarUserMenuCover",props:{username:{type:{name:"string"},required:!0,description:""},displayUsername:{type:{name:"string"},required:!1,description:""}}},n("gAaL"),ye.__docgenInfo={description:"",methods:[],displayName:"NavbarUserMenu",props:{username:{type:{name:"string"},required:!0,description:""},displayUsername:{type:{name:"string"},required:!1,description:""},logout:{type:{name:"func"},required:!1,description:""},profileBeta:{type:{name:"bool"},required:!1,description:""},userMenuClickAnalytics:{type:{name:"func"},required:!0,description:""}}};var ke=n("bWDY"),Ee=n("b5GN"),Ce=n("OX3u"),Ae=n("AG5K");function Se(e){var t=e.username,n=e.displayUsername,a=e.handleLogout,i=e.userMenuClickAnalytics,r=e.profileBeta,o=e.isSmallScreen,c=e.adsEnabled,e=e.cakeIcon,c=c&&!Object(ie.b)();if(t)return m.a.createElement("div",{className:"ProfileNavbar ProfileNavbar-loggedIn"},c&&m.a.createElement(Ne,null),o?m.a.createElement(ue,{className:"NavbarNotifications-dropdown"}):m.a.createElement(de,null),m.a.createElement(ye,{username:t,displayUsername:n,logout:a,userMenuClickAnalytics:i,profileBeta:r,disableGravity:!0}));n="?redirect=".concat(encodeURIComponent(Object(R.w)())),a=Object(b.b)("navbarSignUp"),r=Object(b.b)("navbarSignIn");return m.a.createElement("div",{className:"ProfileNavbar ProfileNavbar-loggedOut"},m.a.createElement("div",{className:"NavbarNotifications NavbarNotifications-navbar"},e&&m.a.createElement(M,null),m.a.createElement("div",{className:"ProfileNavbar-item uScaleTransition"},m.a.createElement(A.b,null))),c&&m.a.createElement(Ne,null),m.a.createElement("a",{onClick:function(){i("sign in")},className:"Navbar-signin",href:"".concat(g.U,"/signin").concat(n)},r),m.a.createElement(k.b,{className:"Button Navbar-signup",label:a,title:a,onClick:function(){i("sign up")},href:"".concat(g.U,"/register").concat(n)}))}n("UuzF"),Ne.__docgenInfo={description:"",methods:[],displayName:"EmeraldButton"},n("o0ye");var we=Object(h.b)(function(e,t){var n=e.user,a=e.ui,i=e.ad,e=e.config;return{username:n.get("username"),displayUsername:n.get("displayUsername"),isSmallScreen:void 0===t.isSmallScreen?a.notifications.get("isSmallScreen"):t.isSmallScreen,profileBeta:n.getIn(["flags","desktopProfilePageBeta"]),adsEnabled:Object(ke.d)(i,n),cakeIcon:e.getIn(["featureFlags","cakeIcon"])}},function(t){return{userMenuClickAnalytics:function(e){t(Object(P.g)(e))},handleLogout:function(){t(Object(f.H)()),t(Object(P.g)("logout"))}}})(Se);Se.__docgenInfo={description:"",methods:[],displayName:"ProfileNavbar",props:{username:{type:{name:"string"},required:!1,description:""},displayUsername:{type:{name:"string"},required:!1,description:""},handleLogout:{type:{name:"func"},required:!0,description:""},profileBeta:{type:{name:"bool"},required:!1,description:""},userMenuClickAnalytics:{type:{name:"func"},required:!0,description:""},isSmallScreen:{type:{name:"bool"},required:!1,description:""},adsEnabled:{type:{name:"bool"},required:!1,description:""},cakeIcon:{type:{name:"bool"},required:!1,description:""}}};a=function(e){l()(i,e);var n,a,t=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(n);return t=a?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)});function i(){return c()(this,i),t.apply(this,arguments)}return s()(i,[{key:"componentDidMount",value:function(){this.props.isUserLoaded||this.props.fetchUserData()}},{key:"render",value:function(){return this.props.isUserLoaded?m.a.createElement(we,this.props):null}}]),i}(m.a.Component);a.__docgenInfo={description:"",methods:[],displayName:"ProfileNavbarContainer",props:{fetchUserData:{type:{name:"func"},required:!0,description:""},isUserLoaded:{type:{name:"bool"},required:!1,description:""}}},t.a=Object(h.b)(function(e){return{isUserLoaded:e.user.get("isLoaded")}},{fetchUserData:f.C})(a)},NRal:function(e,t,n){},NTmO:function(e,t,n){e.exports=n.p+"desktop-assets/ss-2020-tooltip.55c7e4767a08549eb6458f7833c98990.svg"},PJRO:function(e,t,n){},SINw:function(e,t,n){},UuzF:function(e,t,n){},"X+lB":function(e,t,n){},awMJ:function(e,t,n){},"b1r/":function(e,t,n){},ds3J:function(e,t,n){},fuAU:function(e,t,n){},gAaL:function(e,t,n){},kacx:function(e,t,n){},lZex:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var t=n("q1tI"),a=n.n(t),i=n("55Ip"),t=n("G5ih"),r=n("BWa0"),o=Object(t.b)("labelTopComments"),c="/leaderboard";function s(){return a.a.createElement(i.b,{to:c,title:o},a.a.createElement(r.cb,{name:r.h,width:"32",height:"32",viewBox:"0 -2 34 34",className:"uScaleTransition ProfileNavbar-item"}))}function l(){return a.a.createElement(i.b,{to:c},o)}s.__docgenInfo={description:"",methods:[],displayName:"NavbarLeaderboardButton"},l.__docgenInfo={description:"",methods:[],displayName:"NavbarLeaderboardMenuItem"}},m6gU:function(e,t,n){},o0ye:function(e,t,n){},oHla:function(e,t,n){"use strict";function a(e){return/firefox/.test(e.toLowerCase())}function i(e){return/edge/.test(e.toLowerCase())}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i}),n("aYmD")},"p5h/":function(e,t,n){},qh6O:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var t=n("lSNA"),i=n.n(t),t=n("q1tI"),r=n.n(t),t=n("TSYQ"),o=n.n(t),c=(n("17x9"),n("Nm7g"));function a(e){var t=e.date,n=e.datetime,a=e.timestamp,e=e.className,n=t||new Date(a||Date.parse(n)),e=o()(i()({When:!0},e,e));return r.a.createElement("span",{className:e,title:n},Object(c.c)(n.getTime()/1e3))}a.defaultProps={className:""},a.__docgenInfo={description:"TODO:\nfromNow, and utils/formatting is a problem. That code should not be there\nit should be in here. It's also not internationalized. Anytime at all that we\nwant to have a formatted datetime, it will be inside a React Component, so we should\njust have a react component that does the formatting, which is what this does. At somepoint\nwe should change over all uses of the `fromNow` code where ever it used to this component\nand then to also internationalize the component. Date formatting is a job of a view. It's\npresentation data, and it doesn't belong in utils.\n\nfromNow is also problematic in that it expects a PHP generated timestamp, which is seconds\nfrom UTC. It should have accepted a date object.\n\nAnother problem with the fromNow is that it shows plural s when there shouldn't be a plural s,\nlike \"1 days\" should be \"1 day\".\n\nBy it being in a react component we can also ensure that dates always look the same. Same CSS\nsame exact date format.",methods:[],displayName:"When",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},date:{type:{name:"instanceOf",value:"Date"},required:!1,description:""},datetime:{type:{name:"string"},required:!1,description:""},timestamp:{type:{name:"number"},required:!1,description:""}}}},y6ID:function(e,t,n){},ygTn:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("q1tI"),i=n.n(a),t=(n("17x9"),n("/MKj")),r=n("55Ip"),o=n("GB65"),a=n("zTH+"),c=n("BWa0");function s(e){var t=e.frontPageBeta,e=e.logoClicked,e=t?i.a.createElement(r.b,{className:"Navbar-logo",to:"/",onClick:function(){"/"===Object(o.w)()&&Object(o.ib)()}},i.a.createElement(c.cb,{className:"icon stroke fill",name:c.w,width:"94",height:"34",viewBox:"0 0 94 34",fillColor:"#ffffff",onClick:e})):i.a.createElement("a",{className:"Navbar-logo",href:"/"},i.a.createElement(c.cb,{className:"icon stroke fill",name:c.w,width:"94",height:"34",viewBox:"0 0 94 34",fillColor:"#ffffff",onClick:e}));return i.a.createElement("div",{className:"Navbar-logo-container"},e)}var l=Object(t.b)(function(e){return{frontPageBeta:e.user.getIn(["flags","desktopFrontPageBeta"])}},{logoClicked:a.e})(s);s.__docgenInfo={description:"",methods:[],displayName:"NavbarLogo",props:{frontPageBeta:{type:{name:"bool"},required:!1,description:""},logoClicked:{type:{name:"func"},required:!0,description:""}}}}}]);
