define("indexnew:component/feednews/feed.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:static/js/events.js","indexnew:static/js/pageEvents.js","indexnew:static/js/config.js","indexnew:static/js/recomlog.js","indexnew:static/js/log.js"],function(e,t,i,n,o,a,s,d,l,c){var p=o,r=a,f=s,m=d,g=l,h=c,u={init:function(e){try{var t=this;t.page=0,t.data=[],t.lock=!1,t.datalock=!1,t.ajaxlock=!1,t.top=!1,t.sec=!1,t.reload=1,t.options={defaultPageSize:e.defaultPageSize||20,pageSize:e.pageSize||e.defaultPageSize,tabData:e.tabData||[],$tabBoxObj:e.tabBoxObj,$feedBoxObj:e.feedBoxObj,$feedCtx:e.feedCtx,tabSelectClass:e.tabSelectClass||"selected",tabHoverClass:e.tabHoverClass||"hover",scrollDiffer:e.scrollDiffer||500,loadTimes:e.loadTimes||999,tabFixedClass:e.tabFixedClass||"",topBlank:e.topBlank||0,tabMap:e.tabMap,itemMap:e.itemMap,liveItemMap:e.liveItemMap,videoItemMap:e.videoItemMap,miniVideoItemMap:e.miniVideoItemMap,completion:e.completion||!1,liveCompletion:e.liveCompletion||!1,videoCompletion:e.videoCompletion||!1,miniVideoCompletion:e.miniVideoCompletion||!1,alreadyBottom:e.alreadyBottom||!1,unreachBottom:e.unreachBottom||!1,tabClickCallbaack:e.tabClickCallbaack||!1,beforeRender:e.beforeRender||!1,result:e.result||{from:"indexnew_feed",monkey:"recom"},isStatic:e.isStatic},t.hasTab=!!t.options.tabData.length,t.hasTab&&(t.currentType=e.tabData[0][e.urlTabtype],t.options.urlTabtype=e.urlTabtype),e.data&&(t.options.data=e.data,t.data=e.data,t.dataRender()),e.url&&(t.options.url=e.url,t.options.type=e.type,t.getData()),t.hasTab&&(t.tabRender(),t.bindTabEvent()),t.bindFeedEvent()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:86})}},getData:function(){try{var t=this;if(t.datalock||t.lock||t.ajaxlock)return!1;t.ajaxlock=!0,t.page++;var e=1===t.page?t.options.defaultPageSize:t.options.pageSize,i={pn:t.page,rn:e,ts:+new Date,app_from:"indexnew_feed"},n={tab:"yingshi_new",video_type:1,nums:1===t.page?20:12,mode:0},o={tab:"funny",video_type:3,nums:1===t.page?20:12,mode:0};p.ajax({url:t.options.url,type:"GET",data:"video"===t.options.type?n:"minivideo"===t.options.type?o:i,dataType:"jsonp",success:function(e){try{if("live"!==t.options.type&&"video"!==t.options.type&&"minivideo"!==t.options.type&&t.options.isStatic&&!e.data.length)return t.ajaxlock=!0,p("#feed_news_wrap .loadingfeed").hide(),void p("#feed_news_wrap .morefeed").html("<span>æ²¡æœ‰æ›´å¤šäº†~</span>").show();if("live"===t.options.type)t.liveDataRender(e);else if("video"===t.options.type)t.videoDataRender(e);else if("minivideo"===t.options.type)p("#feed_news_wrap .loadingfeed").hide(),t.miniVideoDataRender(e);else{if(t.data=e.data,t.qid=e.qid,t.tag=e.tag,!t.data.length&&1===t.reload)return t.reload++,t.page--,t.ajaxlock=!1,void setTimeout(function(){try{t.getData()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:157})}},300);if(0===t.data.length)return t.ajaxlock=!1,t.page--,t.options.completion&&t.options.completion(t.page,t.datalock,t.options.type,t.data),!1;t.dataRender()}}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:169})}},beforeSend:function(){try{t.options.beforeRender&&t.options.beforeRender()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:172})}}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:174})}},tabRender:function(){try{var i=this;p.each(i.options.tabData,function(e,t){try{i.options.$tabBoxObj.append(i.options.tabMap(e,t)),0===e&&i.options.$tabBoxObj.find('[data-hook="tab"]').eq(0).addClass(i.options.tabSelectClass)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:184})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:185})}},bindTabEvent:function(){try{var a=this;a.options.$tabBoxObj.find('[data-hook="tab"]').on("click",function(e){function t(){try{a.getData(),a.options.$feedBoxObj.attr("monkey",i.data("monkey")),a.lock=!0,a.options.tabClickCallbaack&&a.options.tabClickCallbaack(i,a.currentType)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:214})}}try{if(e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,a.lock)return!1;var i=p(this);a.currentType=i.data(a.options.urlTabtype),a.page=0,a.datalock=!1,a.options.$tabBoxObj.children().removeClass(a.options.tabSelectClass),i.addClass(a.options.tabSelectClass);var n=f.getViewport().scrollTop,o=a.options.$feedCtx.offset().top-a.options.topBlank;o<n?p("body,html").animate({scrollTop:o-13},400,function(){try{t()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:223})}}):t()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:227})}}),a.options.$tabBoxObj.find('[data-hook="tab"]').hover(function(){try{p(this).hasClass(a.options.tabSelectClass)||p(this).addClass(a.options.tabHoverClass)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:234})}},function(){try{p(this).removeClass(a.options.tabHoverClass)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:237})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:238})}},bindFeedEvent:function(){try{r.on("viewport.deferchange",this.listenScroll,this)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:243})}},dataRender:function(){try{var s=this;1===s.page&&s.options.$feedBoxObj.html(""),setTimeout(function(){try{var i,n="",o=[],a=[];p.each(s.data,function(e,t){try{if(!(i=s.options.itemMap(e,t)))return a.push(e),!0;n+=i}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:265})}}),n||h({type:"auto",k:"feed-no-data",v:m.__config__.pageId,t:s.options.type,q:s.qid}),s.options.$feedBoxObj.append(n),s.options.completion&&s.options.completion(s.page,s.datalock,s.options.type,s.data),s.lock=!1,s.ajaxlock=!1,p.each(a,function(e,t){try{s.data[t].isDel=1}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:283})}}),p.each(s.data,function(e,t){try{t.isDel||o.push(t)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:288})}}),s.options.result.data=o,s.options.result.qid=s.qid,s.options.result.tag=s.tag,g.show({el:s.options.$feedBoxObj,items:s.options.$feedBoxObj.find("li.feed_news_item"),result:s.options.result})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:320})}},10)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:322})}},liveDataRender:function(e){try{var i=this;if(1===i.page&&i.options.$feedBoxObj.html('<div class="live-inner"></div>'),0===e.errno&&e.data&&e.data.live_list&&"{}"!==JSON.stringify(e.data.live_list)&&"[]"!==JSON.stringify(e.data.live_list)){var t=+e.data.has_more;if(1===i.page&&0==t&&0===e.data.live_list.length)return i.options.$feedBoxObj.find("div.live-inner").html('<h3 class="no-live-data">ä¸»æ’­æ­£åœ¨ä¼‘æ¯ä¸­ï¼Œè¯·ç¨åŽè§‚çœ‹</h3>'),void(i.options.liveCompletion&&i.options.liveCompletion(i.page,i.datalock,i.options.type));if(0==t){if(i.options.$feedBoxObj.find("li.feed_live_item").length<=10)return i.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>å…¶ä»–ä¸»æ’­æ­£åœ¨ä¼‘æ¯ä¸­è¯·ç¨åŽè§‚çœ‹</h3></li>'),void(i.options.liveCompletion&&i.options.liveCompletion(i.page,i.datalock,i.options.type))}else i.options.$feedBoxObj.find("li.lesslive").remove();var e=e.data.live_list,n="",o=[];p.each(e,function(e,t){try{t.charm_count=i.formatLiveCharm(t.total_charm_count),t.formatname=7<t.user_name.length?t.user_name.substring(0,7)+"...":t.user_name,n+=i.options.liveItemMap(e,t),o.push(t)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:364})}}),n||h({type:"auto",k:"feed-no-live-data",v:m.__config__.pageId,t:i.options.type,q:e.qid}),i.options.$feedBoxObj.find("div.live-inner").append(n),i.lock=!1,i.ajaxlock=!1,i.options.liveCompletion&&i.options.liveCompletion(i.page,i.datalock,i.options.type)}else e.length||(i.options.$feedBoxObj.find("li.lesslive").remove(),i.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>å…¶ä»–ä¸»æ’­æ­£åœ¨ä¼‘æ¯ä¸­è¯·ç¨åŽè§‚çœ‹</h3></li>'),i.options.liveCompletion&&i.options.liveCompletion(i.page,i.datalock,i.options.type))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:394})}},videoDataRender:function(e){try{var i=this;if(1===i.page&&i.options.$feedBoxObj.html('<div class="video-inner"></div>'),0===e.errno&&e.data&&e.data.list&&"{}"!==JSON.stringify(e.data.list)&&"[]"!==JSON.stringify(e.data.list)){if(1===i.page&&0===e.data.list.length)return i.options.$feedBoxObj.find("div.video-inner").html('<h3 class="no-video-data">æš‚æ—¶æ²¡æœ‰è§†é¢‘å“¦~</h3>'),void(i.options.videoCompletion&&i.options.videoCompletion(i.page,i.datalock,i.options.type));var e=e.data.list,n="";p.each(e,function(e,t){try{n+=i.options.videoItemMap(e,t.content||{})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:418})}}),n||h({type:"auto",k:"feed-no-video-data",v:m.__config__.pageId,t:i.options.type,q:e.qid}),i.options.$feedBoxObj.find("div.video-inner").append(n),i.lock=!1,i.ajaxlock=!1,i.options.videoCompletion&&i.options.videoCompletion(i.page,i.datalock,i.options.type)}else e.length||(i.options.$feedBoxObj.find("li.lesslive").remove(),i.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>æ²¡æœ‰æ›´å¤šäº†~</h3></li>'),i.options.videoCompletion&&i.options.videoCompletion(i.page,i.datalock,i.options.type))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:448})}},miniVideoDataRender:function(e){try{var i=this;if(1===i.page&&i.options.$feedBoxObj.html('<div class="mini-video-inner"></div>'),0===e.errno&&e.data&&e.data.list.video_list&&"{}"!==JSON.stringify(e.data.list.video_list)&&"[]"!==JSON.stringify(e.data.list.video_list)){if(1===i.page&&0===e.data.list.video_list.length)return i.options.$feedBoxObj.find("div.mini-video-inner").html('<h3 class="no-video-data">æš‚æ—¶æ²¡æœ‰è§†é¢‘å“¦~</h3>'),void(i.options.miniVideoCompletion&&i.options.miniVideoCompletion(i.page,i.datalock,i.options.type));var e=e.data.list.video_list,n="";p.each(e,function(e,t){try{n+=i.options.miniVideoItemMap(e,t||{})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:472})}}),n||h({type:"auto",k:"feed-no-mini-video-data",v:m.__config__.pageId,t:i.options.type,q:e.qid}),i.options.$feedBoxObj.find("div.mini-video-inner").append(n),i.lock=!1,i.ajaxlock=!1,i.options.miniVideoCompletion&&i.options.miniVideoCompletion(i.page,i.datalock,i.options.type)}else e.length||(i.options.$feedBoxObj.find("li.lesslive").remove(),i.options.$feedBoxObj.find("div.mini-video-inner").append('<li class="feed_live_item lesslive"><h3>æ²¡æœ‰æ›´å¤šäº†~</h3></li>'),i.options.miniVideoCompletion&&i.options.miniVideoCompletion(i.page,i.datalock,i.options.type))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:494})}},formatLiveCharm:function(e){try{return 9999<(e=+e)?(e/9999).toFixed(2)+"ä¸‡":e+""}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:504})}},listenScroll:function(){try{var e=f.getViewport().scrollTop,t=this.options.$feedCtx,i=t.offset().top+t.height(),n=p(window).height();i<=e+n+200&&this.getData()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:537})}}};t.exports=function(e){try{u.init(e)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:542})}}}),define("indexnew:component/feednews/feednews.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:component/feednews/feed.js","indexnew:static/js/format.js","indexnew:static/js/store.js","indexnew:static/js/events.js","indexnew:static/js/pageEvents.js","indexnew:static/js/log.js","indexnew:static/js/config.js","indexnew:static/js/cookie.js","indexnew:static/js/browser.js","indexnew:static/js/util.js"],function(e,t,i,n,o,a,s,d,l,c,p,r,f,m,g){var h=o,u=a,v=s,y=d,w=l,x=p,b=r,_=g,g=parseInt(m.ie,10)<8,j="hao123-indexnunew16"===b.get("pageId"),k=['<li class="top-news fadeInDown animated" monkey="topNews">','<span class="first #{only}">','<a href="#{url0}" class="top-new" title="#{title0}">#{title0}</a>',"</span>",'<span class="second">','<a href="#{url1}" class="top-new" title="#{title1}">#{title1}</a>',"</span>","</li>"].join(""),C=['<li class="feed_news_item #{noimg} fadeInDown animated" #{monkey} #{hook}>','   <div class="item_cont #{noDesc}" #{monkey1}>','       <div class="feednews-header">','           <h3 class="g-ib"><a class="g-hu" title="#{title}" href="#{url}" target="_blank">#{title}</a></h3>',"       </div>",'       <div class="feednews-main">','           <a href="#{url}" target="_blank" alog-text="#{title}">','               <span class="g-ib f-14 description">#{desc}</span>','               <span class="g-ib thumbnail">#{img}</span>','               <div style="#{isVideo}" class="playicon-wrapper">','                   <i class="playicon"></i>','                   <p class="duration"><span>#{duration}</span></p>',"               </div>","           </a>","       </div>",'       <div class="feednews-footer">','           <span class="g-ib author">','               <a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>',"           </span>",'           <span class="g-ib news-dot"></span>','           <span class="g-ib">#{times}</span>',"       </div>","   </div>","</li>"].join(""),T=['<li class="feed_live_item" monkey="liveitem">','    <a href="http://www.hao123.com/video/news?rid=#{live_id}&zhibo=1" class="item-link">','        <div class="coverimg">','            <img src="#{cover}" />','            <div class="status #{isLiving}">Â·ç›´æ’­ä¸­</div>','            <div class="mask">','                <img class="play-btn" src="#{playbtn}"/>',"            </div>","        </div>",'        <div class="text">','            <span class="title" title="#{user_name}">#{formatname}</span>','            <span class="charm"><img src="#{liveCharmCount}" />#{charm_count}</span>',"        </div>","    </a>","</li>"].join(""),$=['<li class="feed_video_item" monkey="videoitem">','    <a href="https://haokan.baidu.com/v?vid=#{vid}&fr=hao123-tab" class="item-link" title="#{title}">','        <div class="coverimg">','            <img src="#{cover_src}" />','            <div class="duration"><span>#{duration}</span></div>',"        </div>",'        <div class="text">','           <div class="fl">','               <span class="title" title="#{title}">#{formatTitle}</span>',"           </div>",'           <div class="sl">','               <span title="æ’­æ”¾é‡">','                   <i class="icon play"></i>#{playcnt}',"               </span>",'               <span title="è¯„è®ºæ•°">','                   <i class="icon comment"></i>#{comment_cnt}',"               </span>","           </div>","        </div>","    </a>","</li>"].join(""),O=['<li class="mini-video-item" monkey="minivideoitem">','    <a href="https://quanmin.baidu.com/v/#{vid}?source=promo-1024312h-0&tab=promo&tag=hao123tab&pd=1024312h&autoplay=1" class="item-link" title="#{title}">','        <div class="coverimg">','            <img src="#{poster}" />','            <div class="duration"><span>#{time_length}</span></div>',"        </div>",'        <div class="text">','           <div class="fl">','               <span class="title" title="#{title}">#{formatTitle}</span>',"           </div>",'           <div class="sl">','               <span class="play-wrapper" title="æ’­æ”¾é‡">','                   <i class="icon play"></i>#{play_count}',"               </span>",'               <span class="comment-wrapper" title="ä½œè€…æ˜µç§°">','                   <i class="icon comment"></i>#{nick_name}',"               </span>","           </div>","        </div>","    </a>","</li>"].join(""),m=['<li class="feed_news_item #{noimg} fadeInDown animated" #{monkey} #{hook}>','   <div class="item_cont #{noDesc}" #{monkey1}>','       <div class="feednews-header">','           <h3 class="g-ib"><a class="g-hu" title="#{title}" href="#{url}" target="_blank">#{title}</a></h3>',"       </div>",'       <div class="feednews-main">','           <a href="#{url}" target="_blank" alog-text="#{title}">','               <span class="g-ib f-14 description">#{desc}</span>',"           </a>","       </div>",'       <div class="feednews-footer">','           <span class="g-ib author">','               <a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>',"           </span>",'           <span class="g-ib news-dot"></span>','           <span class="g-ib">#{times}</span>',"       </div>","   </div>","</li>"].join(""),B=['<li #{monkey} class="feed_news_item tuji fadeInDown animated">',"<h3>",'<a class="g-ib" title="#{title}" href="#{url}" alog-text="#{title}">#{title}</a>',"</h3>",'<a href="#{url}" alog-text="#{title}">','<img src="#{imgurl1}" />','<img src="#{imgurl2}" />','<img src="#{imgurl3}" />','<span class="g-ib more-img" >ç‚¹å‡»æ›´å¤š</span>',"</a>",'<div class="tip">','<a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>','<span class="g-ib g-fc2">#{times}</span>',"</div>","</li>"].join(""),C=g?m:C,B=g?m:B,D=['<li class="wm #{isFirst}" data-hook="wm">','<div id="#{id1}" class="cproad1">',"</div>","</li>"].join(""),S='<img src="#{imgurl}" />',I="",m={init:function(e,t,i,n){try{var o=this;o.$feedbox=h("#feed_news_wrap"),o.$refresh=h("a#feed_refresh"),o.newhottop=[],o.hottop=y.get("hottop"),o.$loading=h('[data-hook="loading"]',o.$feedbox),o.$liveLoading=h('[data-hook="liveLoading"]',o.$feedbox),o.$morefeed=h('[data-hook="morefeed"]',o.$feedbox),o.$tabBox=h("#feedTab"),o.index=0,o.topData=[],o.firstload=!1,o.url="live"===t||"video"===t||"minivideo"===t?e:e+t,o.type=t,o.isStatic=i,o.wmSlot=[],o.firstwm=!0,o.top=!1,o.sec=!1,o.cmsAd=n,o.feeder(o),o.bindEvent()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:216})}},bindEvent:function(){},feeder:function(l){try{new u({url:l.url,type:l.type,isStatic:l.isStatic,defaultPageSize:"live"===l.type?11:10,urlTabtype:"type",result:{from:"indexnew_feed",monkey:"recom"},loadTimes:50,scrollDiffer:500,tabFixedClass:"tabfixed",topBlank:97,feedBoxObj:h("#feed_news_list"),feedCtx:h("#feed_news_wrap"),tabMap:function(e,t){try{var i=['<a href="#" class="g-ib" data-type="#{key}" data-monkey="#{monkey}" data-hook="tab">',"#{title}","</a>"].join("");return v(i,{key:t.type,title:t.title,monkey:t.feedmonkey})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:281})}},itemMap:function(e,t){try{if((t.top||t.sec_fixed)&&e<2&&(l.topData.push(t),0===e))return"";if(l.topData.length&&1===e&&!l.top){var i=l.mergeTopData(l.topData);return 1===l.topData.length&&(i.only="onlyone"),l.top=!0,v(k,i)}if(t.top||t.sec_fixed)return"";l.index++;var n="",o=(t.ext.doc_domain,"hasimg"),a="video"===t.dataType?"":"display:none;";t.img0||t.img1?(I=v(S,{imgurl:HAO.httpsTrans(t.img0||t.img1),hottop:t.cms_id?'<span class="hottop">ç½®é¡¶</span>':""}),t.desc&&90<t.desc.length&&(t.desc=t.desc.substr(0,90)+"...")):(I="",o="noimg",t.desc&&120<t.desc.length&&(t.desc=t.desc.substr(0,120)+"..."));var s="";"video"!==l.type&&l.index%4==0?t.img0&&t.img1&&t.img2?s=v(B,{title:t.title,url:t.url,imgurl1:HAO.httpsTrans(t.img0),imgurl2:HAO.httpsTrans(t.img1),imgurl3:HAO.httpsTrans(t.img2),source:t.source,sourceurl:t.source_url||t.sourceUrl,sourceTag:t.source_url||t.sourceUrl?"haslink":"notlink",times:t.format_time||"",monkey:"answer"===t.dataType?'monkey="answer"':""}):l.index--:n=v(C,{url:t.url,img:I,noimg:o,isVideo:a,title:t.title,desc:t.desc,source:t.source,times:"video"===t.dataType?t.playcnt?_.formatNum(t.playcnt)+"æ¬¡æ’­æ”¾":"":t.format_time||"",sourceUrlColor:"g-gray",sourceurl:t.source_url||t.sourceUrl,sourceTag:t.source_url||t.sourceUrl?"haslink":"notlink",monkey:t.cms_id?'monkey="cms"':"video"===t.dataType?'monkey="video"':"answer"===t.dataType?'monkey="answer"':"",monkey1:1===l.index?'monkey="first"':"",hook:t.cms_id?'data-hook="cms"':"",noDesc:t.desc?"":"no-desc",duration:t.duration?_.formatDuration(t.duration):""}),t.cms_id&&(!l.hottop||-1===(e=h.inArray(t.cms_id,l.hottop))?l.newhottop.push(t.cms_id):n="");var d="";return l.preIndex!==l.index&&2<=l.index&&(l.index-2)%4==0&&(d=l.getWmHtml(),l.firstwm=!1),l.preIndex=l.index,n+s+d}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:410})}},liveItemMap:function(e,t){try{return v(T,{user_name:t.user_name,formatname:t.formatname,cover:HAO.httpsTrans(t.cover),live_id:t.live_id,isLiving:1==+t.live_status?"live":"",charm_count:t.charm_count,liveCharmCount:"https://dgss2.bdstatic.com/5eR1dDebRNRTm2_p8IuM_a/her/static/indexnew/component/feednews/huangguan.ed44fa1.png",playbtn:"https://dgss2.bdstatic.com/5eR1dDebRNRTm2_p8IuM_a/her/static/indexnew/component/feednews/play-btn.72c3579.png"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:430})}},videoItemMap:function(e,t){try{return v($,{vid:t.vid,cover_src:HAO.httpsTrans(t.cover_src),duration:_.formatDuration(t.duration),title:t.title,formatTitle:25<t.title.length?t.title.slice(0,25)+"...":t.title,playcnt:_.formatNum(t.playcnt),comment_cnt:_.formatNum(t.comment_cnt)})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:449})}},miniVideoItemMap:function(e,t){try{return v(O,{vid:t.vid,poster:HAO.httpsTrans(t.poster),time_length:t.time_length,title:t.title,formatTitle:24<t.title.length?t.title.slice(0,24)+"...":t.title,play_count:t.play_count,nick_name:t.author&&t.author.name})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:466})}},tabClickCallbaack:function(){},beforeRender:function(){try{l.$morefeed.hide(),("live"===l.type||"video"===l.type||"minivideo"===l.type?l.$liveLoading:l.$loading).css("display","block")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:487})}},completion:function(e,t,i){try{0!==l.newhottop.length&&(y.set("hottop",l.newhottop),l.newhottop=[]);var n=h("#feed_news_list"),o=h("li",n).length;l.$loading.hide(),e<4&&o<7&&l.$morefeed.css("display","block"),t||(x({type:"auto",k:"indexnew-feed-"+e,v:b.__config__.pageId,t:i}),1<e&&w.emit("hao123.feedbottom.next",i)),1<=e&&!l.firstload&&(l.firstload=!0),w.emit("hao123.feedbottom.update",i);var a="",s="",s=j?(a="//as1.m.hao123.com/common/9hspp.js?ni=ajhojek","//as1.m.hao123.com/production/js/p700.js?fasxixgx=g"):(a="//as1.m.hao123.com/site/api/6g5d5.js?nia=ffeoqq","//as1.m.hao123.com/production/ui7pr.js?xskpp=obyh");l.wmSlot&&l.wmSlot.length&&(h.each(l.wmSlot,function(){try{this.container=document.getElementById(this.container),(window.slotbydup=window.slotbydup||[]).push(this)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:550})}}),l.wmSlot=[]),window.slotbydup&&!window.slotbydup.load&&(window.slotbydup.load=!0,h.getScript(location.protocol+"//cpro.baidustatic.com/cpro/ui/c.js"),h.getScript(location.protocol+a),h.getScript(location.protocol+s))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:560})}},liveCompletion:function(e,t,i){try{h("#feed_news_list"),l.$liveLoading.hide(),t||x({type:"auto",k:"indexnew-live-feed-"+e,v:b.__config__.pageId,t:i})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:581})}},videoCompletion:function(e,t,i){try{h("#feed_news_list"),l.$liveLoading.hide(),t||x({type:"auto",k:"indexnew-video-feed-"+e,v:b.__config__.pageId,t:i})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:602})}},miniVideoCompletion:function(e,t,i){try{h("#feed_news_list"),l.$liveLoading.hide(),t||x({type:"auto",k:"indexnew-mini-video-feed-"+e,v:b.__config__.pageId,t:i})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:623})}},alreadyBottom:function(){},unreachBottom:function(){}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:645})}},getWmHtml:function(){try{var e=this;if(e.cmsAd.length&&1==+e.cmsAd[0].ison&&e.firstwm){var t=e.cmsAd[0],i="noimg",n="";return t.imgurl?(i="hasimg",t.desc&&90<t.desc.length&&(t.desc=t.desc.substr(0,90)+"..."),n=v(S,{imgurl:HAO.httpsTrans(t.imgurl)})):t.desc&&120<t.desc.length&&(t.desc=t.desc.substr(0,120)+"..."),v(C,{url:t.url,img:n,noimg:i,isVideo:"display:none;",title:t.title,desc:t.desc,source:t.source||"",times:t.times||"",sourceUrlColor:"g-gray",sourceurl:t.sourceurl||"#",sourceTag:t.sourceurl?"haslink":"notlink",monkey:'monkey="cms"',monkey1:'monkey="bc"',noDesc:t.desc?"":"no-desc"})}var o=e.firstwm?"u3554099":"u3554102";j&&(o=e.firstwm?"u3760748":"u3595050");var a=b.get("cproFeedIndex",-1)+1,s="_"+o+"_"+a;return this.wmSlot.push({id:o,container:s,async:!0}),b.set("cproFeedIndex",a),v(D,{isFirst:e.firstwm&&j?"firstwm":"",id1:s})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:708})}},mergeTopData:function(e){try{var i={};return e.forEach(function(e,t){try{i["title"+t]=e.title,i["url"+t]=e.url}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:714})}}),i}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:716})}}};t.exports=m});
