(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0031":function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}r=r("967c").default;e.exports=Ext.extend(i,r,{name:"CommercialModel",_overlayTypeKey:"overlayType",_overlayQueryParamsKey:"overlayQueryParams",_performerNameKey:"p_id",_promoCampaignNameKey:"campaign",getOverlayType:function(){return this.attributes[this._overlayTypeKey]},getOverlayQueryParams:function(){return this.attributes[this._overlayQueryParamsKey]||{}},getOverlayQueryParameter:function(e){return this.getOverlayQueryParams()[e]},getPromoCampaignName:function(){return this.attributes[this._promoCampaignNameKey]||null}})},"0619":function(e,t,r){function i(e){i.superclass.constructor.call(this,e)}var n=r("44ad"),o=r("d869"),a=r("7ab0");e.exports=Ext.extend(i,n.Plugin,{name:o.AutoShowMore.NAME,pageSelector:".page",maxAutoLoadNum:3,offset:100,clientHeight:0,_showMoreEnabled:!1,_tempScrollTop:0,_autoLoadNum:0,direction:o.AutoShowMore.DIRECTION_DOWN,forceShowMore:!1,init:function(e){this.selectElements(),i.superclass.init.call(this,e),this.host.addEvents(o.AutoShowMore.EVENT_SHOW_MORE,o.AutoShowMore.EVENT_NO_MORE_AUTO_SHOW_MORE),this._getClientHeight(),this.reset()},selectElements:function(){return!1},getScrollContainerEl:function(){return this.view.element},reset:function(){this.view.element.removeClass(o.AutoShowMore.CLASS_SHOW_MORE_BUTTON_VISIBLE),this._autoLoadNum=0,this._tempScrollTop=0,this._showMoreEnabled=!0},_checkTriggerPoint:function(){return this.direction===o.AutoShowMore.DIRECTION_DOWN?this.getScrollContainerEl().dom.getBoundingClientRect().bottom-this.clientHeight<=this.offset:this.getScrollContainerEl().dom.getBoundingClientRect().top>=-this.offset},_isShowMoreNeeded:function(){var e=parseInt(n.getMeta(o.AutoShowMore.META_IS_SINGLE_PAGE),10),e=this.forceShowMore||0===e;return this._showMoreEnabled&&e&&this.isScrollDirectionCorrect()&&this._checkTriggerPoint()},isScrollDirectionCorrect:function(){return this.direction===o.AutoShowMore.DIRECTION_DOWN?this._currentScrollTop>=this._tempScrollTop:this._currentScrollTop<=this._tempScrollTop},showMore:function(){this._autoLoadNum<this.maxAutoLoadNum?(this._autoLoadNum++,this.host.fireEvent(o.AutoShowMore.EVENT_SHOW_MORE,this,this.host)):(this.host.fireEvent(o.AutoShowMore.EVENT_NO_MORE_AUTO_SHOW_MORE,this,this.host),this.view.element.addClass(o.AutoShowMore.CLASS_SHOW_MORE_BUTTON_VISIBLE))},getScrollTop:function(){return a.getScrollTop()},setShowMoreEnabled:function(e){this._showMoreEnabled=e},_onScroll:function(){this._currentScrollTop=this.getScrollTop(),this._isShowMoreNeeded()&&this.showMore(),this._tempScrollTop=this._currentScrollTop},_onLoadingStarted:function(){this._showMoreEnabled=!1},_onLoadingFinished:function(e){this._showMoreEnabled=!(e&&e.isLastPage)},_onShowMoreButtonClick:function(){this.reset()},_onReset:function(){this.reset()},_getClientHeight:function(){this.clientHeight=document.documentElement.clientHeight},onWindowResize:function(){return this._getClientHeight()},getScrollEl:function(){return Ext.isIE8||Ext.isIE7?Ext.fly(window):Ext.fly(document)},_onResetElements:function(){this.reset(),this.unbind(),this.selectElements(),this.bind()},_bindElements:function(){n.on(Ext.fly(window),"resize",this.onWindowResize,this)},bind:function(){n.on([{element:this.getScrollEl(),event:"scroll",handler:this._onScroll},{element:this.model,event:this.resetEvent,handler:this._onReset},{element:this.model,event:this.loadingStartedEvent,handler:this._onLoadingStarted},{element:this.model,event:this.loadingFinishedEvent,handler:this._onLoadingFinished},{element:this.view,event:this.showMoreButtonClickEvent,handler:this._onShowMoreButtonClick}],this),this.resetElementsEvent&&n.on(this.view,this.resetElementsEvent,this._onResetElements,this),this._bindElements(),i.superclass.bind.call(this)}})},"1e4a":function(e,t,i){"use strict";i.r(t);function n(e,t){n.superclass.constructor.call(this,e,t)}var r=i("44ad"),o=i.n(r),r=i("7ab0"),a=i.n(r),r=i("d869"),s=i.n(r),l=i("0592"),r=i("d59f");Ext.extend(n,o.a.Page,{name:"listPageAbstract",layout:null,id:"",memberAppletContainerIsEmbedded:!1,embedListPagePlayerEmbedded:!1,freeChatId:"freechat",favoriteBtnId:"favorite_button",listpageId:"listpage",listpageContainerId:"listpage_container",chatAppletId:"chatapplet",dataAttributeForListPagePlayer:!1,listPageComponentName:r.default,forceDelayedLPPInit:!1,animateImageOnLoad:!1,isRandomPlayerEnabled:!1,isPerformerSwapEnabled:!1,freeChatContainerId:"freechat_container",freeChatOverlayName:"FreeChat",memberChatPerformerStatus:"memberChat",freeChatPerformerStatus:"freeChat",offlinePerformerStatus:"offline",paymentModalComponent:"PaymentModalComponent",overlayContainerId:"overlay_container",overlayId:"overlay",_ajaxListPageRefreshCounter:0,_showMoreJsonQueryParams:{},_onLogoClickRefresh:void 0,init:function(e,t){var r=this;n.superclass.init.call(this,e,t),Promise.resolve().then(i.bind(null,"ddd5")).then(function(e){e.default.getComponent().then(function(e){r._chatComponent=e}).catch(console.error)}),this.addEvents(s.a.ListPageAbstract.EVENT_SUCCESS_REFRESH_LISTPAGE,s.a.ListPageAbstract.EVENT_SHOW_ONLINE_FAVORITES_COUNT),o.a.addEvents(s.a.ListPageAbstract.GLOBALEVENT_DO_INIT_LISTPAGE,s.a.ListPageAbstract.GLOBALEVENT_REFRESH_LISTPAGE),this.isLogoutPopupNeeded()&&l.default.navigate("loggedout",{trigger:!0,replace:!1,preventNavigateBack:!0}),Ext.fly(this.listpageContainerId)&&this.initListPage(!1),this.searchAndDestroyToolbar()},isLogoutPopupNeeded:function(){return o.a.Config.get("isMobileLogoutOverlayEnabled",!0)&&1===parseInt(o.a.Cookie.get("logout"),10)},searchAndDestroyToolbar:function(){Ext.select(".apn-toolbar").item(0)&&(Ext.select("html").item(0).addClass("ask_killer"),Ext.select(".apn-toolbar").item(0).remove())},initListPage:function(e){!Ext.fly(this.listpageId)||this.listPage instanceof this.listPageComponentName?e&&(this.listPage.unbind(),delete this.listPage,this.initListPage(!1)):this.listPage=new this.listPageComponentName(this.listpageId,{contentId:"listpage_",showMoreBtnId:"show_more_btn",isRandomPlayerEnabled:this.isRandomPlayerEnabled})},onAppletTypeWillChange:function(){this.modelContentComponent&&(this.modelContentComponent.destroy(),delete this.modelContentComponent)},onStatusChange:function(e){e=e.header;o.a.fireEvent(s.a.BasicController.GLOBALEVENT_GLOBAL_STATUS_CHANGE,{statuses:e})},onVideocallChange:function(e){o.a.fireEvent(s.a.BasicController.GLOBALEVENT_GLOBAL_VIDEOCALL_CHANGE,e)},onVipshowChange:function(e){o.a.fireEvent(s.a.BasicController.GLOBALEVENT_GLOBAL_VIPSHOW_STATUS_CHANGE,e)},onModalClosed:function(e){e.scope.name===s.a.LoggedOutModalComponent.NAME&&setTimeout(function(){this.showFlashWarningPopup()}.bind(this),0)},onSetScroll:function(e){a.a.disableScroll(e.disable)},reloadPage:function(){window.location.reload()},bind:function(){n.superclass.bind.call(this),o.a.on([{element:o.a.Broadcaster,event:s.a.BasicLayout.GLOBALEVENT_SET_SCROLL,handler:this.onSetScroll},{element:o.a.Broadcaster,event:s.a.JawsNotificationsComponent.GLOBALEVENT_PERFORMER_STATUS_CHANGE,handler:this.onStatusChange},{element:o.a.Broadcaster,event:s.a.JawsNotificationsComponent.GLOBALEVENT_PERFORMER_VIDEOCALL_CHANGE,handler:this.onVideocallChange},{element:o.a.Broadcaster,event:s.a.JawsNotificationsComponent.GLOBALEVENT_VIPSHOW_CHANGE,handler:this.onVipshowChange},{element:o.a.Broadcaster,event:s.a.FlashChatPageControllerAbstract.GLOBALEVENT_APPLET_TYPE_WILL_CHANGE,handler:this.onAppletTypeWillChange}],this)}}),t.default=n},2809:function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r("d869");e.exports=Ext.extend(i,n.Component,{name:"PerformerSwapModel",swapRouteHandler:"",ajaxQueue:null,_swappedPerformers:[],init:function(e,t){i.superclass.init.call(this,e,t)},_onChangeListPageId:function(){this._swappedPerformers=[]},setSwappedPerformers:function(e){this._swappedPerformers=n.union(this._swappedPerformers,e)},sendRequest:function(e,t){t=t||{};var r=n.getMeta("listPageId"),i=n.getUrl(this.swapRouteHandler,{listPageId:r},{});this.ajaxQueue.request({type:"json",url:i,params:{performers:Ext.encode(e),swapped:Ext.encode(this._swappedPerformers),applyAdditionalFilters:t.applyAdditionalFilters?1:0},method:"POST",scope:this,success:function(e){if(e.json.data.listPage.id!==r.toString())return window.location.reload();this.fireEvent(o.PerformerSwapModel.EVENT_REQUEST_SUCCESS,{response:e,options:t})},error:function(e){this.fireEvent(o.PerformerSwapModel.EVENT_REQUEST_ERROR,{response:e,options:t})}})},bind:function(){i.superclass.bind.call(this),n.on(n.Broadcaster,o.ListPageModelAbstract.GLOBALEVENT_CHANGE_LIST_PAGE_ID,this._onChangeListPageId,this)}})},"3b17":function(e,t,r){function i(e){i.superclass.constructor.call(this,e)}r=r("7b09");e.exports=Ext.extend(i,r,{name:"ImageWithoutAnchorTemplate",commercialImageUrl:"listpage",commercialImageId:"commercial",tpl:'<div id="container_{id}" class="{containerClass} commercial_container"><img src="{src}" alt /></div>',_setTemplateParams:function(e){return{containerClass:e.size,id:e.id,src:e.commercialImageUrl}}})},"4daa":function(e,t,r){function i(e){i.superclass.constructor.call(this,e)}var n=r("44ad"),o=r("d869"),a=r("7ab0"),s=r("a9a1").store,l=r("870e").swapPerformers,c=r("9b2f").default;e.exports=Ext.extend(i,n.Plugin,{name:o.PerformerSwap.NAME,animDuration:200,animDelay:200,template:null,perfImgSel:"img",badImgWidth:2,badImgHeight:2,_prevHideAnimationEndTime:0,init:function(e){i.superclass.init.call(this,e),this.host.addEvents(o.PerformerSwap.EVENT_SWAPPED_PERFORMERS,o.PerformerSwap.DESTROY_PERFORMER)},_onPerformerSwap:function(e){e=n.map(e,function(e,t){var r=this.view.model.createPerformerModelFromData(e),i=this.view.createPerformerView(r).setZeroOpacity(),e={oldPerformerId:t,newPerformerView:i},r=r.getProfilePictureUrl();return n.isUndefined(i.element)?null:(r?((i=new Image).onload=n.bind(this._onPerformerImageLoaded,this,e,i),i.src=r):this._hideAndReplaceBoxesAnimated(e),t)},this);e.length&&this.host.fireEvent(o.PerformerSwap.EVENT_SWAPPED_PERFORMERS,e)},_onPerformerSwapWithLastPerformer:function(e){var t={oldPerformerId:e.swapPerformerID,newPerformerView:e.lastPerformerView,callback:function(){this.host.fireEvent(o.PerformerSwap.DESTROY_PERFORMER,e.swapPerformerID)}};this._hideAndReplaceBoxesAnimated(t)},_onPerformerImageLoaded:function(e,t){this._isGoodImgDimensions(t)&&this._hideAndReplaceBoxesAnimated(e)},_hideAndReplaceBoxesAnimated:function(t){var r,i;n.hasPath(t,"oldPerformerId")&&n.hasPath(t,"newPerformerView")&&(r=this.view.getPerformerViewById(t.oldPerformerId),n.isDefined(r)&&c({targets:r.element.dom,opacity:0,delay:(i=this)._setHideDelay(),duration:this.animDuration,easing:"linear",complete:function(e){r.setZeroOpacity().replaceWith(t.newPerformerView),i._showBoxAnimated(t.newPerformerView),a.updateLazy(),"function"==typeof t.callback&&t.callback.call(i),i.updateStore(t)}}))},updateStore:function(e){var t=parseInt(e.oldPerformerId,10),e=e.newPerformerView.model.attributes;s.dispatch(l({oldPerformerId:t,newPerformerData:e}))},_showBoxAnimated:function(e){e.element&&c({targets:e.element.dom,opacity:1,duration:this.animDuration,easing:"linear"})},_setHideDelay:function(){var e=(new Date).getTime(),t=e-this._prevHideAnimationEndTime,r=this.animDelay;return t>=this.animDelay?(this._prevHideAnimationEndTime=e,r):(this._prevHideAnimationEndTime+=this.animDelay,Math.abs(t)+r)},_isGoodImgDimensions:function(e){return!(e.width===this.badImgWidth&&e.height===this.badImgHeight)},bind:function(){i.superclass.bind.call(this),this.host.on(o.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,this._onPerformerSwap,this),this.host.on(o.ListPageControllerAbstract.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,this._onPerformerSwapWithLastPerformer,this)},unbind:function(){i.superclass.unbind.call(this),this.host.un(o.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,this._onPerformerSwap,this),this.host.on(o.ListPageControllerAbstract.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,this._onPerformerSwapWithLastPerformer,this)}})},"68b3":function(e,t,r){function i(e){i.superclass.constructor.call(this,e)}var n=r("44ad"),o=r("d869");e.exports=Ext.extend(i,n.View,{name:"ListPageItemViewAbstract",itemImageSel:"img",visibleListPageSel:"section.page.showless.visible",visibleListPageEl:null,init:function(){this.addEvents(o.ListPageItemViewAbstract.EVENT_VIEW_REPLACED),this.addEvents(o.ListPageItemViewAbstract.EVENT_VIEW_BEFORE_REPLACE),i.superclass.init.call(this),this.visibleListPageEl=Ext.select(this.visibleListPageSel).item(0),this.element&&(this._selectElements(),this._bindElements())},_selectElements:function(){},setCurrentOrder:function(e){this.element&&this.element.data("order",e)},setZeroOpacity:function(){return this.element&&this.element.setStyle("opacity",0),this},_checkInVisibleListPage:function(){this.element.dom.parentNode||this.visibleListPageEl.appendChild(this.element)},replaceWith:function(e){return this.element&&(this.fireEvent(o.ListPageItemViewAbstract.EVENT_VIEW_BEFORE_REPLACE,this),this._checkInVisibleListPage(),this.element.replaceWith(e.element),delete this.element,this.fireEvent(o.ListPageItemViewAbstract.EVENT_VIEW_REPLACED,{oldPerformerView:this,newPerformerView:e})),this},getItemImage:function(){return this._itemImage||(this._itemImage=this.select(this.itemImageSel).item(0)),this._itemImage},_bindElements:function(){},_unBindElements:function(){},bind:function(){i.superclass.bind.call(this)},unbind:function(){i.superclass.unbind.call(this),this._unBindElements()}})},"768e":function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r("d869"),a=r("7ab0"),s=r("1cab").default,l=r("38863").setSurveyPostponed,c=r("38863").resetPostponedSurvey;e.exports=Ext.extend(i,n.Controller,{name:"ListPageControllerAbstract",performersConfig:"listPagePerformers",newSorterId:"order_list",newSorterDataAttribute:"data-action",newSorterDataAction:"my_rating",_newSorterEl:void 0,_newSorterObject:{tag:"li",cls:"menu_item",children:[{tag:"a",cls:"item_text ordering filter_item",id:"order_my_rating",html:n.translate("My Rating")}]},init:function(e,t){i.superclass.init.call(this,e,t),this.getPerformerDataObject()&&this.ListPageModel.setPerformerDetailsOnInit(this.getPerformerDataObject()),this._newSorterEl=Ext.get(this.newSorterId),this.addEvents(o.ListPageModelAbstract.EVENT_DESTROY_ALL,o.ListPageControllerAbstract.EVENT_VISIBLE_FREE_MODELS_READY,o.ListPageControllerAbstract.EVENT_VISIBLE_MODELS_READY,o.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,o.ListPageControllerAbstract.EVENT_VIEW_MOUSEOVER,o.ListPageControllerAbstract.EVENT_VIEW_MOUSEOUT,o.ListPageControllerAbstract.GET_ALL_PERFORMERS_READY)},getPerformerDataObject:function(){return n.Config.get(this.performersConfig)},getVisibleFreeModels:function(){this.ListPageModel.getVisibleFreeModels()},getVisiblePerformers:function(){this.ListPageModel.getVisibleModels()},getAllPerformers:function(){this.ListPageModel.getAllPerformers()},onVisibleFreeModelsReady:function(e){e=n.map(e,function(e){return this.ListPageView.getPerformerViewById(e)},this);this.fireEvent(o.ListPageControllerAbstract.EVENT_VISIBLE_FREE_MODELS_READY,e)},onVisibleModelsReady:function(e){e=n.map(e,function(e){return this.ListPageView.getPerformerViewById(e.getId())},this);this.fireEvent(o.ListPageControllerAbstract.EVENT_VISIBLE_MODELS_READY,e)},onGetAllPerformersReady:function(e){e=n.map(e,function(e){return this.ListPageView.getPerformerViewById(e.getId())},this);this.fireEvent(o.ListPageControllerAbstract.GET_ALL_PERFORMERS_READY,e)},onPerformerViewMouseOver:function(e){this.fireEvent(o.ListPageControllerAbstract.EVENT_VIEW_MOUSEOVER,e)},onPerformerViewMouseOut:function(e){this.fireEvent(o.ListPageControllerAbstract.EVENT_VIEW_MOUSEOUT,e)},onShowMore:function(){this.ListPageModel.getNextPage()},onStatusChange:function(e){this.ListPageModel.setNewStatuses(e.statuses)},onVideocallChange:function(e){this.ListPageModel.setVideocallStatus(e)},onVipShowStatusChange:function(e){this.ListPageModel.setVipShowStatus(e)},onRefreshListPage:function(e){this.ListPagePlayer&&this.ListPagePlayer.resetRandomPlayer(),a.setCursor("wait"),this.ListPageModel.setShowMoreJsonQueryParams(e).refreshListPage()},onSearchResults:function(e){n.isObject(e)&&(this.ListPagePlayer&&this.ListPagePlayer.resetRandomPlayer(),this.ListPageModel.refreshListPageFromSearch(e))},onCleanListPage:function(){this.ListPageModel.cleanPage()},onPerformerSwap:function(e){this.fireEvent(o.ListPageControllerAbstract.EVENT_PERFORMER_SWAP,e)},onPerformerSwapLast:function(e){this.fireEvent(o.ListPageControllerAbstract.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,e)},onAjaxSearchPageOn:function(){n.isDefined(this.PerformerSwap)&&this.PerformerSwap.disableSwapping(),n.setMeta("isSearchPage",1)},onAjaxSearchPageOff:function(){n.setMeta("isSearchPage",0),n.isDefined(this.PerformerSwap)&&this.PerformerSwap.enableSwapping()},onFirstBillComplete:function(){},onLuckyWheelSpun:function(){},onCommercialCountdownEnd:function(){},onAppletQuickBuySuccess:function(){},onLoggedIn:function(){s.setUserAction(s.CONST.ACTION.LOGIN),this._setNewSorter(),c()},onSignUpSuccess:function(){s.setUserAction(s.CONST.ACTION.SIGNUP),this._setNewSorter(),l()},onQuickBuySuccess:function(){},onListPageCommercialABTest:function(){},_setNewSorter:function(){this._newSorterEl&&Ext.DomHelper.append(this._newSorterEl,this._newSorterObject).setAttribute(this.newSorterDataAttribute,this.newSorterDataAction)},onShowMoreError:function(){this.ListPageView.showMoreError()},onDestroyAll:function(){this.ListPagePlayer&&this.ListPagePlayer.resetRandomPlayer()},handleRefreshListpageFromData:function(e){this.ListPageModel.setPerformerDetailsOnInit(e)},bind:function(){i.superclass.bind.call(this),n.on([{element:this,event:o.AutoShowMore.EVENT_SHOW_MORE,handler:this.onShowMore},{element:n.Broadcaster,event:"GLOBALEVENT:refresh-listpage-from-data",handler:this.handleRefreshListpageFromData}],this)}})},"768e7":function(e,t,r){"use strict";var i=r("44ad"),k=r.n(i),N=r("8af1"),x=r.n(N),n=r("d869"),B=r.n(n),o=r("8a2d"),D=r("0a81"),j=r("3686"),F=r("6d88"),a=r("0b3c"),H=r("e6c0"),s=Object(a.e)(["0%,50%,100%{transform:scale(0.8);}17%{transform:scale(0.7);}33%,75%{transform:scale(1);}"]),i=(Object(a.e)(["0%,100%{transform:scale(0.8);}25%{transform:scale(0.7);}"]),Object(a.e)(["60%{transform:translate3d(-5px,0,0) rotate(-10deg);}65%{opacity:1;}100%{transform:translate3d(-6px,0,0) rotate(-15deg);opacity:0;}"])),n=Object(a.e)(["60%{transform:translate3d(5px,0,0) rotate(10deg);}65%{opacity:1;}100%{transform:translate3d(6px,0,0) rotate(15deg);opacity:0;}"]),l=Object(a.c)(["animation:"," 1s linear;"],s),c=Object(a.c)(["animation:heart-single-pulse 0.2s ease;.svgicon-heart-broken-left{animation:"," 3s ease 0.2s;}.svgicon-heart-broken-right{animation:"," 3s ease 0.2s;}"],i,n),u=Object(a.c)(["&:after{content:'';background:rgba(0,0,0,0.8);position:absolute;width:100%;height:100%;left:-2px;top:-2px;padding:2px;border-radius:4px;}"]),G=Object(a.d)(H.a)(["position:absolute;color:#ffcc00;"]),U=a.d.span(["visibility:",";backface-visibility:hidden;transform:scale(0.8);display:block;width:100%;height:100%;overflow:visible;position:absolute;",";.svgicon-heart-broken-right{left:9px;}.svgicon-heart-broken-left{left:0;}i{.svgicon-heart-broken-right,.svgicon-heart-broken-left{color:",";transition:color 1s ease-in;z-index:2;}}",""],function(e){return e.active?"visible!important":"hidden"},function(e){e=e.action;if("none"!==e)return"added"===e?l:c},function(e){return e.active?"#FFCC00":"#ffffff"},function(e){return e.background&&u}),W=a.d.span(["visibility:visible !important;width:100%;height:100%;z-index:",";color:",";font-size:20px;display:inline-block;> i{color:",";}"],function(e){return e.zIndex},function(e){return e.active?"#fc0!important":"#f99!important"},function(e){return e.active?"#fc0!important":"#f99!important"}),z=r("fb00"),K=r("e67d"),Y=r("c2d1"),q=r("791c"),d=r("4a85"),Q=r("dace"),a=function(e){var t=e.popoverPortalContainer,r=e.position,i=e.text,n=e.isOpen,o=e.target,e=e.onClick;return x.a.createElement(d.a,{isOpen:n,position:r,targetClassName:"favorites_popover",usePortal:null!==t,portalContainer:t,portalClassName:"favorites_popover_portal",popoverClassName:"favorites_popover_content",disabled:!i,"data-testid":"FavoritesPopoverPopover"},o,x.a.createElement("div",{onClick:e,dangerouslySetInnerHTML:{__html:i}}))};a.propTypes={popoverPortalContainer:Object(o.instanceOf)(Element),target:o.node.isRequired,text:o.string,position:o.string,isOpen:o.bool,onClick:o.func},a.defaultProps={popoverPortalContainer:null,position:Q.a.LEFT,text:null,isOpen:!1,onClick:function(){}};var J=a,X=r("ea3e"),Z=r("2931"),$=r("089a"),ee=r("0592");function h(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return r(e),0}s.done?t(l):Promise.resolve(l).then(i,n)}function te(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){h(i,t,r,n,o,"next",e)}function o(e){h(i,t,r,n,o,"throw",e)}n(void 0)})}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r=function(e){var t,a=e.performerId,s=e.performerNick,l=e.displayName,r=e.background,i=void 0!==r&&r,n=e.zIndex,o=void 0===n?100:n,c=e.withText,u=void 0!==c&&c,d=e.popoverPosition,h=void 0===d?Q.a.LEFT:d,f=e.hasPopover,r=void 0===f||f,n=e.popoverPortalContainer,p=e.trackOnClick,m=Object(D.d)(),g=Object(D.e)(Z.a),P=Object(D.e)(function(e){return e.user.favorites&&!!e.user.favorites[a]}),_=Object(D.e)(function(e){return Object(j.e)(e,a)}),E=Object(D.e)(Z.c),y=Object(D.e)(function(e){return e.elite}),c=re(Object(N.useState)("none"),2),d=c[0],v=c[1],f=re(Object(N.useState)(!1),2),e=f[0],b=f[1],c=re(Object(N.useState)(!1),2),w=c[0],S=c[1],f=re(Object(N.useState)(null),2),C=f[0],O=f[1],L=P?"Remove From Favorites":"Add to Favorites",T=Object(N.useRef)(!1),V=Object(N.useRef)(0),c=re(Object(X.a)(),2),A=c[0],R=c[1],f=Object(N.useCallback)(function(){!g&&T.current&&(S(!1),O(null),ee.default.navigate("signup",{trigger:!0,preventNavigateBack:!0},"favorites button signup to add more favorites tooltip click"))},[g]),I=(t=te(regeneratorRuntime.mark(function e(t){var r,i,n,o,a,s,l,c,u,d,h,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=P?z.b:z.a,a=P?"removed":"added",s=P?Object($.a)("Removed from favorites"):Object($.a)("Added to favorites"),l=g?Object($.a)("No more free slots"):Object($.a)("Sign up to Add more Favorites"),c=Object($.a)("There was an error"),u=Object($.a)("Only for Members"),d="active"!==(null==y||null===(r=y.profile)||void 0===r?void 0:r.status),h=(null==y||null===(i=y.profile)||void 0===i||null===(n=i.level)||void 0===n?void 0:n.id)===y.levels[y.levels.length-1].id,f=null==y?void 0:y.levels.find(function(e){return e.benefits.favorites_limit>E}),g||!F.isGuestOnboardingEnabled){e.next=18;break}if(E===B.a.GUEST_FAVORITE_LIMIT&&a===B.a.FavoritesComponent.CONST_COMMAND_ADD)return O(l),T.current=!0,e.abrupt("return",new Promise(function(e){e("full")}));e.next=14;break;case 14:return O(s),T.current=!1,k.a.fireEvent(B.a.FavoritesComponent.GLOBALEVENT_FAVORITE_UPDATE_SUCCESS,{command:a}),e.abrupt("return",new Promise(function(e){e(a)}));case 18:return e.next=20,o(t);case 20:return p=e.sent,e.abrupt("return",new Promise(function(e){switch(p.status){case B.a.FavoritesComponent.STATUS_OK:O(s),e(a),k.a.fireEvent(B.a.FavoritesComponent.GLOBALEVENT_FAVORITE_UPDATE_SUCCESS,{command:a});break;case B.a.FavoritesComponent.STATUS_ERROR_LOGIN:O(u),e(p.status);break;case B.a.FavoritesComponent.STATUS_FULL_LIST:if(e(p.status),!Object(Y.b)()||d||h){O(l);break}O(Object($.a)("Become {levelName} to add more favorites",{levelName:f.name}));break;default:O(c),e(p.status)}}));case 22:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});Object(N.useEffect)(function(){return function(){V.current&&clearTimeout(V.current)}},[]),Object(N.useEffect)(function(){C&&(R(3e3),S(!0))},[C]),Object(N.useEffect)(function(){w&&A&&(S(!1),O(null))},[A]);var M,c=(M=te(regeneratorRuntime.mark(function e(t){var r,i,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,b(!0),e.next=5,I(a);case 5:o=e.sent,p&&p({label:L,requestStatus:o,isUserLoggedIn:g}),i="removed"===o,n=(r="added"===o)?1e3:3e3,o=null==_?void 0:_.status,r?(m(Object(K.b)({performerId:a,performerNick:s,displayName:l,status:o,isUserLoggedIn:g})),v("added")):i&&(m(Object(K.e)({performerId:a})),v("removed")),V.current=setTimeout(function(){return b(!1)},n),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:case"end":return e.stop()}},e,null,[[1,15]])})),function(e){return M.apply(this,arguments)});return x.a.createElement(J,{isOpen:r&&w,text:C,position:h,popoverPortalContainer:n,onClick:f,target:x.a.createElement(x.a.Fragment,null,u?x.a.createElement(W,{onClick:c,active:P,action:d,zIndex:o,"data-testid":"FavoriteButtonHeartWithText"},x.a.createElement("i",null,x.a.createElement(H.a,{icon:"heart","data-testid":"FavoriteButtonIcon"})),x.a.createElement(q.a,null,L)):x.a.createElement(U,{className:"favorite_icon",background:i,onClick:c,active:P||e||w,action:d,"data-testid":"FavoriteButtonBrokenHeart"},x.a.createElement("i",null,x.a.createElement(G,{icon:"heart-broken-left","data-testid":"FavoriteButtonHeartIcon"})),x.a.createElement("i",null,x.a.createElement(G,{icon:"heart-broken-right","data-testid":"FavoriteButtonHeartIcon"})))),"data-testid":"FavoriteButtonFavoritesPopover"})};r.propTypes={performerId:o.number.isRequired,performerNick:o.string.isRequired,displayName:o.string.isRequired,withText:o.bool,background:o.bool,zIndex:o.number,popoverPosition:o.string,hasPopover:o.bool,trackOnClick:o.func,popoverPortalContainer:Object(o.instanceOf)(Element)},t.a=r},"7b09":function(e,t,r){r("44ad"),r("d869"),e.exports=Ext.extend(function(e){Ext.apply(this,e),this.init()},Ext.util.Observable,{name:"Template",tpl:"",validateData:!0,_tpl:void 0,init:function(){},getTemplate:function(){return this._tpl},_setTemplateParams:function(e){return e&&e!=={}&&null!==e?{id:e.id}:""},render:function(e){return this._tpl=new Ext.Template(this.tpl),this.validateData&&this._validateData(e),this._tpl.applyTemplate(this._setTemplateParams(e))},_validateData:function(e){if(void 0===e||e==={}||null===e)throw"Invalid data for template applying: "+e}})},"825c":function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}r=r("44ad");e.exports=Ext.extend(i,r.View,{name:"ListPagePlayerView",_defaultZIndex:110,init:function(){i.superclass.init.call(this)},setElements:function(){this.listPagePlayerDivEl=Ext.get("listpage_player")},getPerformerDetails:function(e){this.model.getPerformerDetails(e)}})},"8f76":function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r("d869"),a=r("e5b0").default;e.exports=Ext.extend(i,n.Model,{name:"StreamPlayerModel",init:function(){this.addEvents(o.StreamPlayerModel.EVENT_PERFORMER_DETAILS_SUCCESS,o.StreamPlayerModel.EVENT_PERFORMER_DETAILS_ERROR),i.superclass.init.call(this)},getPerformerDetails:function(e){var t;e.performerId&&(t={appletType:e.appletType,videoPreviewSize:e.videoPreviewSize,isOverlayChat:!1},a.get(e.performerId,t).then(n.bind(this._getPerformerDetailsSuccess,this)).catch(n.bind(this._getPerformerDetailsError,this)))},_getPerformerDetailsSuccess:function(e){try{this.fireEvent(o.StreamPlayerModel.EVENT_PERFORMER_DETAILS_SUCCESS,this.filterData(e))}catch(e){console.log("error: ",e)}},_getPerformerDetailsError:function(e){this.fireEvent(o.StreamPlayerModel.EVENT_PERFORMER_DETAILS_ERROR,this.filterData(e))},filterData:function(e){var t=Ext.decode(e.responseText).data||{},t={performer_id:t.performer_id,sb_hash:t.sb_hash,sb_ip:t.sb_ip,proxy_ip:t.proxy_ip,supercategory:t.category,has_channel:t.has_channel,ishostedchannel:t.ishostedchannel,channel_type:t.channel_type,pid:t.p_id,video:t.video};return Ext.encode(Object.assign(t,e.json.data))}})},9381:function(e,t,r){"use strict";r.r(t),r.d(t,"initCountdown",function(){return i});function n(e,t){return e.map(function(e){return e.toString().padStart(2,"0")}).join(t)}var o=r("44ad").Config.get("clientServerTimeDifference",0),i=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=new Date(t.getAttribute("data-count-to")).getTime()||(new Date).getTime(),n=t.getAttribute("data-delimiter")||":";t.innerHTML=a(i,n,r);var o=setInterval(function(){var e=a(i,n,r);e?t.innerHTML=e:clearInterval(o)},1e3);return function(){return clearInterval(o)}},a=function(e,t,r){var i=new Date;i.setTime(i.getTime()+o);e-=i;if(e<=0)return r(),n([0,0,0],t);i=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4),e=Math.floor(e%6e4/1e3);return n([i,r,e],t)}},"950c":function(e,t,r){"use strict";var i=r("44ad"),n=r.n(i),o=r("c25d"),a=r.n(o),i=r("d869"),s=r.n(i),o=r("7ab0"),l=r.n(o),c=r("0592"),u=r("ffe4"),d=r("1cab"),h=r("9381"),f=r("7b09");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_(r);return e=i?(e=_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==p(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r.n(f).a);var e=P(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return m(t.prototype,[{key:"name",get:function(){return"FavoritesBannerTemplate"}},{key:"tpl",get:function(){var e=n.a.getUrl("Index/IndexCategory",{category:"girl"});return'\n\t\t\t<article id="{id}" class="commercial is-favorites-banner block_loaded">\n\t\t\t\t<div class="banner-wrapper">\n\t\t\t\t\t<a href="'.concat(e,'">\n\t\t\t\t\t\t<h1 class="banner-title">').concat(n.a.translate("Favorites are offline?"),'</h1>\n\t\t\t\t\t\t<div class="banner-button first_button"><span>').concat(n.a.translate("Show Online Models"),"</span></div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t")}}]),t}(),o=r("68b3"),o=r.n(o);function E(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function y(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach(function(e){var t,r;t=i,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function v(e){v.superclass.constructor.call(this,e)}Ext.extend(v,o.a,{name:"CommercialItemView",_attributeOverlayType:"data-overlay-type",_attributeOverlayQueryParams:"data-overlay-query-params",_templates:n.a.object([[s.a.CommercialItemView.BLOCK_TYPE.FAVORITES_BANNER,i]]),_countdownIntervalUnbinder:function(){},init:function(){v.superclass.init.call(this),this.model.attributes.overlayType=this.element.dom.getAttribute(this._attributeOverlayType),this.model.attributes.overlayQueryParams=Ext.util.JSON.decode(this.element.dom.getAttribute(this._attributeOverlayQueryParams));var e=this.element.dom.querySelector(".countdown");e&&(this._countdownIntervalUnbinder=Object(h.initCountdown)(e,n.a.bind(this._onCountdownEnd,this)))},_getTemplate:function(){return this._templates[this.model.getBlockType()]},render:function(){!1===this.model.attributes.preRendered?this.element=this._createElementFromTemplateFromModel(this._getTemplate()):this.element=l.a.createElementFromHtmlString(this.model.getContent()),v.superclass.render.call(this)},_bindElements:function(){this.element&&this.element.on("click",this._onElementClick,this)},_unBindElements:function(){this.element&&this.element.un("click",this._onElementClick,this),this._countdownIntervalUnbinder()},_getBannerEventAction:function(e){if(e.stopEvent(),n.a.Config.get("navigateTo"))return!1;var t=this.model.getId(),e=this.model.getPromoCampaignName(),t=e?"".concat(t,"/").concat(e):t,r=null;switch(this.model.getOverlayType()){case s.a.CommercialItemView.OVERLAY_SIGNUP:this._doSignupTypeBannerClickAction();break;case s.a.CommercialItemView.OVERLAY_LOGIN:this._doLoginTypeBannerClickAction();break;case s.a.CommercialItemView.OVERLAY_QUICKBUY:this._doQuickbuyTypeBannerClickAction();break;case s.a.CommercialItemView.LIST_PAGE_FILTER:this._doListPageFilterTypeBannerClickAction();break;case s.a.CommercialItemView.OVERLAY_LUCKY_WHEEL:this._doLuckyWheelBannerClickAction();break;case s.a.CommercialItemView.OVERLAY_CAMPAIGN_PICKER:this._doCampaignPickerBannerClickAction();break;default:r=this._doDefaultBannerClickAction.bind(this)}this.sendGAEvent(t,r)},_doSignupTypeBannerClickAction:function(){var e=a.a.stringify(this.model.getOverlayQueryParams()),e="signup".concat(e&&"?".concat(e));c.default.navigate(e,{trigger:!0,replace:!1})},_doLoginTypeBannerClickAction:function(){c.default.navigate("login",{trigger:!0,preventNavigateBack:!0},"login type listpage commercial click")},_doQuickbuyTypeBannerClickAction:function(){c.default.navigate("payment",{trigger:!0,preventNavigateBack:!0,replace:!1})},_doListPageFilterTypeBannerClickAction:function(){n.a.fireEvent(s.a.SearchFilterComponent.GLOBALEVENT_FILTER_SELECT,{filterId:this.model.getOverlayQueryParameter("filter")})},_doLuckyWheelBannerClickAction:function(){u.default.openModal("wheel-of-fortune")},_doCampaignPickerBannerClickAction:function(){c.default.navigate("payment",{trigger:!0,preventNavigateBack:!0,replace:!1})},_doDefaultBannerClickAction:function(){var e=this.select("a").item(0).dom;e.getAttribute("href")&&(-1!==e.target.indexOf("blank")?window.open(e.href):window.location.href=e.href)},sendGAEvent:function(t,e){new Promise(function(e){d.default.push(y(y({event:d.default.CONST.EVENT.GENERIC,eventCategory:d.default.CONST.PAGE.LISTS,eventAction:d.default.CONST.ACTION.INTERNAL_BANNERS,eventLabel:t},e&&{eventCallback:e}),{},{eventValue:0,eventInteraction:!0}))}).then(e)},_onElementClick:function(e){this._getBannerEventAction(e)},_onCountdownEnd:function(){this._countdownIntervalUnbinder(),n.a.Broadcaster.fireEvent(s.a.CommercialItemView.GLOBALEVENT_COMMERCIAL_COUNTDOWN_END)}}),t.a=v},"967c":function(e,t,r){"use strict";r.r(t);function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r.n(n),n=r("d869"),a=r.n(n),n=r("4388"),s=r.n(n),l=r("a9a1"),c=r("ab2c");Ext.extend(i,o.a.Model,{name:"PerformerModel",_performerIdKey:"id",_performerNameKey:"pid",_blockTypeKey:"blockType",_sizeKey:"size",_gravityCategoryKey:"gravity_category",_flashDataKey:"flashInitData",_profilePictureUrlKey:"profilePictureUrl",_profileWebpPictureUrlKey:"profileWebpPictureUrl",_isOnViewPort:!1,_isFullyVisibleOnViewPort:!1,_isLppPlaying:!1,_isVideoCallAppended:!1,_isSendMessageAppended:!1,_chatRouting:"Chat/Performer",_isHovered:!1,init:function(){this.addEvents(a.a.PerformerModel.EVENT_STATUS_CHANGE,a.a.PerformerModel.EVENT_GETS_IN_VIEWPORT,a.a.PerformerModel.EVENT_LPP_STATUS_CHANGE),i.superclass.init.call(this)},getId:function(){return this.attributes[this._performerIdKey]},getName:function(){return this.attributes.performerNick||this.attributes[this._performerNameKey]},getDisplayName:function(){return this.attributes.displayName||this.attributes.display_name},getVideoCallPrice:function(){var e,t;return(null===(e=this.attributes)||void 0===e||null===(t=e.videoCall)||void 0===t?void 0:t.price)||this.attributes.video_call_charge_amount},getBlockType:function(){return this.attributes[this._blockTypeKey]},getUrl:function(){return this.attributes.href||o.a.getUrl(this._chatRouting,{performerId:this.getName()})},hasVideoCall:function(){var e,t;return o.a.Config.get("video_call_enabled")&&((null===(e=this.attributes)||void 0===e||null===(t=e.videoCall)||void 0===t?void 0:t.isEnabled)||1===parseInt(this.attributes.is_video_call_enabled,10))},getStatus:function(){try{var e,t,r=+this.attributes.id;return null!==(e=!Number.isNaN(r)&&(null===(t=l.store.getState().statuses.entities[r])||void 0===t?void 0:t.status))&&void 0!==e?e:0}catch(e){return console.error(e),0}},getFlashData:function(){return this.attributes[this._flashDataKey]},getIsFullyVisibleOnViewPort:function(){return this._isFullyVisibleOnViewPort},getIsOnViewPort:function(){return this._isOnViewPort},getSize:function(){return this.attributes[this._sizeKey]||a.a.ListPageModelAbstract.PERFORMER_SIZE_SMALL},getGravityCategory:function(){return this.attributes[this._gravityCategoryKey]},getProfilePictureUrl:function(){return this.attributes[this._profileWebpPictureUrlKey]&&s()()?this.attributes[this._profileWebpPictureUrlKey]:this.attributes[this._profilePictureUrlKey]},getIsLppPlaying:function(){return this._isLppPlaying},getIsVideoCallAppended:function(){return this._isVideoCallAppended},getIsSendMessageAppended:function(){return this._isSendMessageAppended},isHovered:function(){return this._isHovered},setHovered:function(e){this._isHovered=e},setStatus:function(e){this.fireEvent(a.a.PerformerModel.EVENT_STATUS_CHANGE,e)},setIsVideoCallAppended:function(){return this._isVideoCallAppended=!0,this},setIsSendMessageAppended:function(){return this._isSendMessageAppended=!0,this},setIsOnViewPort:function(e,t){return this._isOnViewPort!==t&&(this._isOnViewPort=t,this._isOnViewPort&&this.fireEvent(a.a.PerformerModel.EVENT_GETS_IN_VIEWPORT,this)),this._isFullyVisibleOnViewPort!==e&&(this._isFullyVisibleOnViewPort=e,this._isFullyVisibleOnViewPort&&this.fireEvent(a.a.PerformerModel.EVENT_GETS_FULLY_IN_VIEWPORT,this)),this},hasVipShow:function(){var e=parseInt(this.attributes.id,10);return(null===(e=l.store.getState().shows.entities[e])||void 0===e?void 0:e.status)===c.a.SCHEDULED},hasOngoingVipShow:function(){var e=parseInt(this.attributes.id,10);return(null===(e=l.store.getState().shows.entities[e])||void 0===e?void 0:e.status)===c.a.STARTED},setLppStatusPlaying:function(){this.hasOngoingVipShow()||(this._isLppPlaying=!0,this.fireEvent(a.a.PerformerModel.EVENT_LPP_STATUS_CHANGE))},setLppStatusStopped:function(){this.hasOngoingVipShow()||(this._isLppPlaying=!1,this.fireEvent(a.a.PerformerModel.EVENT_LPP_STATUS_CHANGE))}}),t.default=i},"9cb7":function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r("d869"),a=r("b356").default,s=r("7ab0"),l=r("6d88").isVipShowEnabled;e.exports=Ext.extend(i,n.Controller,{name:"PerformerSwapController",searchPageMeta:"isSearchPage",perfSwapDelay:3e3,perfSwapErrorLimit:5,perfSwapErrorDelay:6e4,isPerfSwapEnabled:!0,overlayId:"overlay",_perfSwapErrorCount:0,_performerSwapTask:null,_performerIdsWithEndedVIPShow:[],init:function(e,t){i.superclass.init.call(this,e,t),this._startPerformerCheckingTask()},_onPerformerCancelledVIPShow:function(e){this._isSwapEnabledForSearchPage()&&(this._performerIdsWithEndedVIPShow=[e.body.performerId.toString()],this.fireEvent(o.PerformerSwapController.GET_ALL_PERFORMERS))},onAllPerformersReady:function(e){this._isSwapEnabledForSearchPage()&&this._swapViPShowPerformers(e)},setVisiblePerformerViews:function(e){this._swapVisiblePerformers(n.filter(e,this._doesPerformerNeedToSwap,this))},_swapViPShowPerformers:function(e){e=n.map(e).filter(function(e){return e});var t,r,i=n.filter(e,function(e){return e&&e.model.getId()&&-1<this._performerIdsWithEndedVIPShow.indexOf(e.model.getId())},this);0!==i.length&&(t=i[0],r=n.map(i,this._getSwapDataFromPerformerBox,this),i=n.sortBy(e,function(e){return Math.min(e.element.data("order"))}),e=-1!==(e=n.findLastIndex(i,function(e){return e.model.getId()!==this._performerIdsWithEndedVIPShow[0]},this))?i[e]:t,this.PerformerSwapModel.sendRequest(r,{performerForSwap:t,lastPerformerView:e,swapPerformerID:t.model.getId(),isVIPShowCanceled:!0,applyAdditionalFilters:!1}),this._performerIdsWithEndedVIPShow=[])},_isSearchPage:function(){return 1===parseInt(n.getMeta(this.searchPageMeta),10)},_isSwapEnabledForSearchPage:function(){return this._isSearchPage()&&s.isSwappingForVIPShowEnabled()},_isPerformerSwapEnabledOnCurrentPage:function(){return!this._isSearchPage()},_startPerformerCheckingTask:function(){this._isPerformerSwapEnabledOnCurrentPage()&&(this._performerSwapTask=new Ext.util.DelayedTask(this._swapPerformers,this),this._performerSwapTask.delay(this.perfSwapDelay))},_restartPerformerCheckingTask:function(){if(this.isPerfSwapEnabled){if(this._performerSwapTask)return this._performerSwapTask.delay(this.perfSwapDelay);this._startPerformerCheckingTask()}},_stopPerformerCheckingTask:function(){this._performerSwapTask&&this._performerSwapTask.cancel()},_swapPerformers:function(){this._performerSwapTask.delay(this.perfSwapDelay),this.isPerfSwapEnabled&&!this._isOverlayVisible()&&this.fireEvent(o.PerformerSwapComponent.EVENT_GET_VISIBLE_PERFORMERS)},_swapVisiblePerformers:function(e){e.length&&(this._performerSwapTask.cancel(),e=n.map(e,this._getSwapDataFromPerformerBox,this),this.PerformerSwapModel.sendRequest(e,{applyAdditionalFilters:!0}))},_getSwapDataFromPerformerBox:function(e){return{id:e.model.getId(),size:e.model.getSize(),gravityCategory:e.model.getGravityCategory()}},_isOverlayVisible:function(){return Ext.get(this.overlayId).isVisible()},_doesPerformerNeedToSwap:function(e){try{if(!e||!e.model)return!1;var t=e.model.getStatus()===o.PerformerSwapController.STATUS_FREE,r=e.model.hasOngoingVipShow(),i=e.model.hasVipShow(),n=e.model.isHovered();return!(!i||l)||(!t||r)&&!n}catch(e){console.error(e)}},_onDocumentFocus:function(){this.enableSwapping()},_onDocumentBlur:function(){this.disableSwapping()},_onModelRequestSuccess:function(e){var t=n.getPath(e,"response.json.data.swapData")||[];if(n.keys(t).length)try{this.fireEvent(o.PerformerSwapController.EVENT_SWAP_PERFORMERS,t)}catch(e){console.error(e)}this._restartPerformerCheckingTask()},_onModelRequestError:function(e){e.options&&e.options.isVIPShowCanceled?this._swapPerformerWithLastPerformer(e.options):(this._perfSwapErrorCount++,this._perfSwapErrorCount===this.perfSwapErrorLimit?(this._perfSwapErrorCount=0,this._performerSwapTask.delay(this.perfSwapErrorDelay)):this._restartPerformerCheckingTask())},_swapPerformerWithLastPerformer:function(e){this.fireEvent(o.PerformerSwapController.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,e)},enableSwapping:function(){this._isSearchPage()||(this.isPerfSwapEnabled=!0,this._restartPerformerCheckingTask())},disableSwapping:function(){this.isPerfSwapEnabled&&(this.isPerfSwapEnabled=!1,this._stopPerformerCheckingTask())},bind:function(){i.superclass.bind.call(this),this._isPerformerSwapEnabledOnCurrentPage()&&Ext.fly(window).on({focus:this._onDocumentFocus,blur:this._onDocumentBlur,scope:this}),n.on([{element:a.getClient(),event:a.EVENT.PERFORMER.SHOW_CANCELLED,handler:n.bind(this._onPerformerCancelledVIPShow,this)},{element:a.getClient(),event:a.EVENT.PERFORMER.SHOW_ENDED,handler:n.bind(this._onPerformerCancelledVIPShow,this)}],this)},unbind:function(){i.superclass.unbind.call(this),this._isPerformerSwapEnabledOnCurrentPage()&&Ext.fly(window).un({focus:this._onDocumentFocus,blur:this._onDocumentBlur,scope:this})}})},a462:function(e,t,r){function i(e){i.superclass.constructor.call(this,e)}var n=r("d30b").default,r=r("7ab0");e.exports=Ext.extend(i,n,{name:"SnapshotTemplate",tpl:'<article id="{id}" class="{containerClass} {hasVideoCall} {lazyLoadClass}" data-status="{dataStatus}">{imageBlock}<div class="performerStatusContainer"></div><a href="{href}" rev="{rev}">{debugText}<span class="snapshot_counter">{snapshotCount}</span><span class="favorite {isFavorite}" data-model-id="{favoriteId}"><span class="broken-heart"><i>'+r.svgIconBlock("heart-broken-left")+"</i><i>"+r.svgIconBlock("heart-broken-right")+'</i></span></span>{rightBottomBadge}<span class="performer_name">{name}</span></a></article>',_setTemplateParams:function(e){return Ext.apply(i.superclass._setTemplateParams.call(this,e),{snapshotCount:e.snapshotCount,imageBlock:this.getImageBlock(e.profilePictureUrl,e.profileWebpPictureUrl,e.altText||e.pid)})}})},b07d:function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r("d869"),a=r("967c").default,s=r("0031"),l=r("7ab0"),c=r("a9a1").store,u=r("870e").addInitialPerformers,d=r("870e").clearListPage,h=r("6d88").isVipShowEnabled;e.exports=Ext.extend(i,n.Model,{name:"ListPageModel",commercialRefreshRouting:"Commercial/Refresh",isSearchPage:"isSearchPage",listPageId:"listPageId",listPageIdResponseKey:"listPageId",lastPageResponsePath:"json.data.content.isLastPage",bigPictureCount:0,_performerCollection:{},_showMoreJsonQueryParams:{wide:!0,layout:"layout-big"},_isLastPage:!1,_currentListPageRefreshByAjax:1,_maxListPageRefreshByAjax:5,init:function(){this.addEvents(o.ListPageModelAbstract.EVENT_PERFORMER_INIT,o.ListPageModelAbstract.EVENT_GET_NEXT_PAGE,o.ListPageModelAbstract.EVENT_DESTROY_ALL,o.ListPageModelAbstract.EVENT_VISIBLE_MODELS_READY,o.ListPageModelAbstract.EVENT_LOGGED_IN,o.ListPageModelAbstract.EVENT_SWAPPED_COMMERCIAL,o.ListPageModelAbstract.EVENT_SHOW_MORE_ERROR,o.ListPageModelAbstract.GET_ALL_PERFORMERS_READY,o.ListPageModelAbstract.EVENT_PRIVATE_STATUS_CHANGE),i.superclass.init.call(this)},getNumericValue:function(e){return void 0!==e?+e:0},setPerformerDetailsOnInit:function(e){c.dispatch(u(e)),this._setIsLastPage(n.getMeta(o.AutoShowMore.META_IS_SINGLE_PAGE)),this._parsePerformers(e,{isInit:!0})},refreshListPageFromSearch:function(e){this._refreshListPageFromResponse(e,0)},setNewStatuses:function(t){n.chain(t).keys().intersection(n.keys(this._performerCollection)).each(function(e){this._performerCollection[e].setStatus(t[e])},this)},setVideocallStatus:function(e){var t,r;n.Config.get("video_call_enabled")&&(!(t=this._performerCollection[e.body.performerId])||(r=document.getElementById("container_"+e.body.performerId))&&(e.body.isEnabled?(t.attributes.is_video_call_enabled="1",t.attributes.videoCall&&(t.attributes.videoCall.isEnabled=!0),r.classList.remove("sendMessageAllowed"),r.classList.add("hasvideocall"),r.querySelector(".videoCallBadge")||r.querySelector("a").insertAdjacentHTML("beforeend",'<span class="videoCallBadge">'+l.svgIconBlock("video-call")+"</span>")):(t.attributes.is_video_call_enabled="0",t.attributes.videoCall&&(t.attributes.videoCall.isEnabled=!1),r.classList.remove("hasvideocall"),r.classList.add("sendMessageAllowed"))))},setVipShowStatus:function(e){var t,r;h&&(t=e.performerId,!(r=this._performerCollection[t])||(t=document.getElementById("container_"+t))&&(e.isVipShow?(r.attributes.is_video_call_enabled="0",t.classList.add("vipshow"),e='<span class="vipshow_icon">'+l.svgIconBlock("vipshow")+"</span>",r='<span class="vipshow_text">'+n.translate("{name}'s VIP Show",{name:r.attributes.display_name})+"</span>",t.querySelector(".vipshow_icon")||t.querySelector(".performer_name").insertAdjacentHTML("beforeend",e+r)):t.classList.remove("vipshow")))},setShowMoreJsonQueryParams:function(e){return Object.assign(this._showMoreJsonQueryParams,e),this},getNextPage:function(){this._loadPage()},refreshListPage:function(){this._loadPage(0)},createPerformerModelFromData:function(e){e=new(this._getModelClass(e.blockType))(Object.assign({},e));return this._performerCollection[e.getId()]=e},getVisibleFreeModels:function(){var t=[];n.each(this._performerCollection,function(e){e instanceof s||e.getStatus()===o.ListPageModelAbstract.PERFORMER_STATUS_ONLINE&&e.getIsFullyVisibleOnViewPort()&&t.push(e.getId())},this),this.fireEvent(o.ListPageModelAbstract.EVENT_VISIBLE_FREE_MODELS_READY,t)},getVisibleModels:function(){var e=n.filter(this._performerCollection,function(e){return e.getIsOnViewPort()&&!e.getIsLppPlaying()},this);this.fireEvent(o.ListPageModelAbstract.EVENT_VISIBLE_MODELS_READY,e)},getAllPerformers:function(){this.fireEvent(o.ListPageModelAbstract.GET_ALL_PERFORMERS_READY,this._performerCollection)},_loadPage:function(e){var t=n.isDefined(e)?e:n.getMeta(this.listPageId),e=n.Config.get("isStoryPageFeed");this.isPageLoadingInProgress||e||(this.isPageLoadingInProgress=!0,this.fireEvent(o.ListPageModelAbstract.EVENT_START_LOADING),this.fetch({url:this._getNextPageUrl(t),error:n.bind(this._onLoadPageError,this),failure:n.bind(this._onLoadPageFailure,this),success:n.bind(this._onLoadPageSuccess,this,t)}))},_onLoadPageSuccess:function(e,t){this.isPageLoadingInProgress=!1;var r=e!==t.json.data.content[this.listPageIdResponseKey];this._refreshListPageFromResponse(t,r?0:e),l.setCursor("default")},needPageReload:function(){var e=!(this._currentListPageRefreshByAjax%this._maxListPageRefreshByAjax);return this._setCurrentListPageRefreshByAjax(),e},_setCurrentListPageRefreshByAjax:function(){this._currentListPageRefreshByAjax=this._currentListPageRefreshByAjax>=this._maxListPageRefreshByAjax?1:this._currentListPageRefreshByAjax+1},_setIsLastPage:function(e){this._isLastPage=1===parseInt(e,10)},_onLoadPageError:function(){this.isPageLoadingInProgress=!1,this.fireEvent(o.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:!0}),this.fireEvent(o.ListPageModelAbstract.EVENT_SHOW_MORE_ERROR),l.setCursor("default")},_onLoadPageFailure:function(){this.isPageLoadingInProgress=!1,this.fireEvent(o.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:!0}),this.fireEvent(o.ListPageModelAbstract.EVENT_SHOW_MORE_ERROR),l.setCursor("default")},_refreshListPageFromResponse:function(e,t){if(e&&n.hasPath(e,"json.data.redirectUrl")&&this._destroyAll(),e&&n.hasPath(e,"json.data.content")&&n.isArray(e.json.data.content.performers)){if(0===n.getMeta("isSearchPage")&&n.hasPath(e,"json.data.listPageOrderType")&&n.Config.set("listPageOrderType",e.json.data.listPageOrderType),!e.json.data.content.performers.length)return void this.fireEvent(o.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:!0});this.bigPictureCount=n.getPath(e,"json.data.content.bigPictureCount")||0,this._setIsLastPage(n.getPath(e,this.lastPageResponsePath)),0===t&&(this._setListPageId(n.getPath(e,"json.data.content."+this.listPageIdResponseKey)),this._destroyAll()),this._parsePerformers(e.json.data.content.performers,{isNextPage:!0})}this.fireEvent(o.ListPageModelAbstract.EVENT_FINISHED_LOADING,{isLastPage:this._isLastPage}),l.updateLazy()},_setListPageId:function(e){n.setMeta("listPageId",e),n.fireEvent(o.ListPageModelAbstract.GLOBALEVENT_CHANGE_LIST_PAGE_ID,{listPageId:e})},destroyPerformerById:function(e){this._performerCollection[e]&&(this._performerCollection[e].destroy(),delete this._performerCollection[e])},cleanPage:function(){this._destroyAll()},_destroyAll:function(){n.each(this._performerCollection,function(e,t){e.destroy(),delete this._performerCollection[t]},this),c.dispatch(d()),this.fireEvent(o.ListPageModelAbstract.EVENT_DESTROY_ALL)},_getNextPageUrl:function(e){var t={listPageId:function(){return e}};return n.getUrl(n.Config.get("listPageRoutes").showMoreJson,t,this._showMoreJsonQueryParams)},_parsePerformers:function(e,t){n.isArray(e)&&(e=n.map(e,this.createPerformerModelFromData,this),t.isInit?n.each(e,n.bind(this.fireEvent,this,o.ListPageModelAbstract.EVENT_PERFORMER_INIT)):t.isNextPage&&this.fireEvent(o.ListPageModelAbstract.EVENT_GET_NEXT_PAGE,e))},_getModelClass:function(e){return-1!==o.ListPageModelAbstract.BLOCK_TYPE_COMMERCIAL.indexOf(e)?s:a}})},b909:function(e,t,r){function i(e,t){i.superclass.constructor.call(this,e,t)}var n=r("44ad"),o=r("d869"),a=r("9cb7"),s=r("2809"),l=r("d30b").default;e.exports=Ext.extend(i,n.Component,{name:"PerformerSwapComponent",swapRouteHandler:"",ajaxQueue:null,template:null,init:function(e,t){i.superclass.init.call(this,e,t),this.template=this.template||l,this._setPerformerSwapController()},_setPerformerSwapController:function(){this._performerSwapController instanceof a||(this._performerSwapController=new a({items:{PerformerSwapModel:{component:this._setPerformerSwapModel(),listeners:{"request-success":"_onModelRequestSuccess","request-error":"_onModelRequestError"}}}}),this._performerSwapController.on(n.object([[o.PerformerSwapComponent.EVENT_GET_VISIBLE_PERFORMERS,this._onGetVisiblePerformers],[o.PerformerSwapController.EVENT_SWAP_PERFORMERS,this._onPerformerSwap],[o.PerformerSwapController.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,this._onPerformerSwapLast],[o.PerformerSwapController.GET_ALL_PERFORMERS,this._onGetAllPerformers],["scope",this]])))},_setPerformerSwapModel:function(){return this._performerSwapModel instanceof s||(this._performerSwapModel=new s(this.element,{swapRouteHandler:this.swapRouteHandler,ajaxQueue:this.ajaxQueue})),this._performerSwapModel},onAllPerformersReady:function(e){this._performerSwapController.onAllPerformersReady(e)},setVisibleViews:function(e){this._performerSwapController.setVisiblePerformerViews(e)},setSwappedPerformers:function(e){this._performerSwapModel.setSwappedPerformers(e)},enableSwapping:function(){this._performerSwapController.enableSwapping()},disableSwapping:function(){this._performerSwapController.disableSwapping()},_onGetVisiblePerformers:function(){this.fireEvent(o.PerformerSwapComponent.EVENT_GET_VISIBLE_PERFORMERS)},_onGetAllPerformers:function(){this.fireEvent(o.PerformerSwapComponent.GET_ALL_PERFORMERS)},_onPerformerSwapLast:function(e){this.fireEvent(o.PerformerSwapComponent.EVENT_SWAP_PERFORMER_WITH_LAST_PERFORMER,e)},_onPerformerSwap:function(e){this.fireEvent(o.PerformerSwapComponent.EVENT_SWAP_PERFORMERS,e)},bind:function(){i.superclass.bind.call(this)},unbind:function(){i.superclass.unbind.call(this)}})},bb1d:function(e,t,r){"use strict";var i=r("8af1"),u=r.n(i),d=r("0592");function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function h(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=i,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function f(e,t){if(null==e)return{};var r,i=function(e,t){if(null==e)return{};for(var r,i={},n=Object.keys(e),o=0;o<n.length;o++)r=n[o],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o++)r=n[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);return i}var p=Object(i.forwardRef)(function(e,t){var r=e.navigate,i=e.onClick,e=f(e,["navigate","onClick"]),n=e.target,e=h(h({},e),{},{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||n&&"_self"!==n||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(t.preventDefault(),r())}});return e.ref=t,u.a.createElement("a",e)}),i=Object(i.forwardRef)(function(e,t){var r=e.component,r=void 0===r?p:r,i=e.to,n=e.trigger,o=e.preventNavigateBack,a=e.keepActiveModal,s=e.lockActiveModal,l=e.onBeforeClick,c=e.gaOriginMeta,e=h(h({},f(e,["component","to","trigger","preventNavigateBack","keepActiveModal","lockActiveModal","onBeforeClick","gaOriginMeta"])),{},{navigate:function(){l&&"function"==typeof l&&l(),-1<i.indexOf("chat")?d.default.navigateToChatPage(i,{trigger:n,preventNavigateBack:o,keepActiveModal:a,lockActiveModal:s}):d.default.navigate(i,{trigger:n,preventNavigateBack:o,keepActiveModal:a,lockActiveModal:s},c)}});return e.ref=t,u.a.createElement(r,e)});i.displayName="RMLink",t.a=i},d30b:function(e,t,r){"use strict";r.r(t);var i=r("44ad"),u=r.n(i),i=r("7ab0"),n=r.n(i),d=r("6d88"),i=r("7b09"),r=r.n(i),i=function e(t){e.superclass.constructor.call(this,t)};Ext.extend(i,r.a,{name:"PerformerTemplate",tpl:'<article id="{id}" \n                class="{containerClass} {hasVipShow} {hasVideoCall} {hasStory}"\n                data-status="{dataStatus}"\n                data-langs="{language}"\n            >\n                {imageBlock}\n                <div class="performerStatusContainer"></div>\n                <a href="{href}" rev="{rev}">\n                    {debugText}\n                    <span class="favorite {isFavorite}" data-model-id="{favoriteId}"> </span>\n                    {rightBottomBadge}\n                    <span class="performer_name">{performerNameBlock}</span>\n                    {mobileBadgeBlock}\n                    {badgeBlock}\n                    {videoBadgeBlock}\n                </a>\n            </article>',idPrefix:"container_",perfContainerClass:"perf_container",chatRouting:"Chat/Performer",html5ChatPageRouting:"ChatHtml5/Performer",getBadge:function(e){return u.a.isString(e)?'<span class="badge '.concat(e,'">&nbsp;</span>'):""},getVideoCallBadge:function(e){return e?'<span class="videoCallBadge">'.concat(n.a.svgIconBlock("video-call"),"</span>"):""},getMobileBadge:function(e){return e?'<span class="mobile-badge">'.concat(n.a.svgIconBlock("mobile-badge"),"</span>"):""},getDebugBlock:function(e){return e&&e.title&&e.title.length?'<div class="recommender_debug">\n                        <span>'.concat(e.title,"</span>\n                        <pre>").concat(e.details,"</pre>\n                    </div>"):""},getImageBlock:function(e,t,r){return Ext.isIE11?'<picture class="cover">\n                      <img src="'.concat(e,'" class="cover performer-image" alt="').concat(r,'">\n                    </picture>'):d.isNativeLazyLoadEnabled?'<picture class="cover">\n                       '.concat(t?'<source srcset="'.concat(t,'" type="image/webp">'):"",'\n                      <img src="').concat(e,'" \n                        loading="lazy"\n                        class="cover performer-image" alt="').concat(r,'">\n                   </picture>'):'<picture class="cover">\n                   '.concat(t?'<source srcset="'.concat(t,'" type="image/webp">'):"",'\n                  <img src="/s.png" \n                    data-src="').concat(e,'" \n                    class="lazy cover performer-image" alt="').concat(r,'">\n                </picture>')},getPerformerNameBlock:function(e,t,r){var i='<span class="performer_name_simple"> '.concat(t," </span>");return i=e&&d.isVipShowEnabled?'<span class="vipshow_icon">'.concat(n.a.svgIconBlock("vipshow"),'</span>\n\t\t\t<span class="performer_name_simple"> ').concat(t,' </span>\n\t\t\t<span class="vipshow_text">').concat(r,"</span>"):i},_setTemplateParams:function(e){var t,r,i,n=e.displayName||e.display_name,o=e.hasStory||e.has_story,a=(null==e||null===(l=e.vipShow)||void 0===l?void 0:l.hasVipShow)||1===parseInt(e.has_vip_show,10),s=u.a.Config.get("video_call_enabled")&&((null==e||null===(c=e.videoCall)||void 0===c?void 0:c.isEnabled)||1===parseInt(e.is_video_call_enabled,10)),l=u.a.translate("{name}'s VIP Show",{name:n}),c="JasminCamMobile"===e.software;return{id:this.idPrefix+e.id,name:e.pid,displayName:n,altText:e.altText||e.pid||"".concat(n,"'s Profile Picture"),src:(null==e||null===(t=e.profilePictures)||void 0===t?void 0:t["576x324"])||e.profilePictureUrl,imageBlock:this.getImageBlock((null==e||null===(r=e.profilePictures)||void 0===r?void 0:r["576x324"])||e.profilePictureUrl,e.profileWebpPictureUrl||(null==e||null===(i=e.profilePicturesWebp)||void 0===i?void 0:i["576x324"]),e.altText||e.pid),defaultImage:u.a.Config.get("newPerformerImageSmall"),containerClass:this.perfContainerClass,hasVipShow:a&&d.isVipShowEnabled?"vipshow":"",hasVideoCall:s?"hasvideocall":"",hasStory:o?"has-story":"",dataStatus:e.originalStatus,rev:e.gravity_category,href:e.href||e.chatPageUrl||u.a.getUrl("Chat/Performer",{performerId:n}),badgeBlock:this.getBadge(e.active_badge),videoBadgeBlock:this.getVideoCallBadge(s),mobileBadgeBlock:this.getMobileBadge(c),rightBottomBadge:this.getBadge(e.right_bottom_badge),isFavorite:1===parseInt(e.isFavorite,10)?"remove":"add",favoriteId:e.id,profilePictureUrl:e.profilePictureUrl,profileWebpPictureUrl:e.profileWebpPictureUrl,debugText:this.getDebugBlock(e.debug),subscriptionStatus:e.isCanceledSubscription?"canceled":"subscribed",translatedVipShowText:l,performerNameBlock:this.getPerformerNameBlock(a,n,l),language:e.language||""}}}),t.default=i},d59f:function(e,t,i){"use strict";i.r(t);function o(e){b.default.trackGenericEvent({eventAction:b.GA_CONST.ACTION.CLICK,eventCategory:b.GA_CONST.PAGE.LISTS,eventLabel:"grid resize",gridSize:e})}function r(){var r=Object(c.e)(function(e){return e.listPage.gridLayout}),t=Object(c.d)(),i=Object(a.useRef)(document.getElementById("inner_container")),n=Object(a.useCallback)(function(e){return function(){try{r!==e&&(d.Broadcaster.fireEvent(g.a.IndexIndex.GLOBALEVENT_STOP_LISTPAGE_PLAYER),i.current.classList.remove("grid--".concat(r)),i.current.classList.add("grid--".concat(e)),d.Cookie.set("gridSize",e,"/"),t(Object(y.setGridLayout)(e)),o(e))}catch(e){d.Config.set("gridSize",window.initialGridSize),o(window.initialGridSize)}}},[t,r]);return w.map(function(e){var t=e.icon,e=e.gridSize;return s.a.createElement("span",{key:"gridSizeItem-".concat(e),id:"grid_size_button--".concat(e),className:_()("is-mounted",{selected:r===e}),onClick:n(e),role:"button"},s.a.createElement(v.a,{icon:t,"data-testid":"GridSizeSelectorIcon"}))})}var a=i("8af1"),s=i.n(a),n=i("63f1"),l=i.n(n),c=i("0a81"),u=i("a9a1"),d=i("44ad"),h=i.n(d),f=i("7ab0"),p=i.n(f),m=i("d869"),g=i.n(m),P=i("b912"),_=i.n(P),E=i("a532"),y=i("870e"),v=i("e6c0"),b=i("1cab"),w=[{icon:"thumbnail-small",gridSize:E.a.SMALL},{icon:"thumbnail-normal",gridSize:E.a.MEDIUM},{icon:"thumbnail-big",gridSize:E.a.LARGE}],S=i("768e"),n=i.n(S),f=i("e481"),m=i("b07d"),P=i.n(m),E=i("8f76"),C=i.n(E),O=i("0592"),S=i("ee27"),L=i.n(S),T=i("98d2"),V=i("6d88"),A=i("950c"),R=i("f94d");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=B(r);return e=i?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==I(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(r,h.a.Controller);var e,t=x(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return e=[{key:"name",get:function(){return"HTML5ListPagePlayerController"}},{key:"init",value:function(e,t){k(B(r.prototype),"init",this).call(this,e,t),this._createVideoContainer(),this.HTML5ListPagePlayerView.hideContainer()}},{key:"_createVideoContainer",value:function(){var e=this.OverlapView.createContainer();this.HTML5ListPagePlayerView.renderTo(e)}},{key:"getView",value:function(){return this.HTML5ListPagePlayerView}},{key:"stopVideo",value:function(){this.HTML5ListPagePlayerView.hideContainer(),this.OverlapView.hideContainer(),R.default.instance.hideChat()}},{key:"playVideo",value:function(e){R.default.instance.appletReady.then(function(){R.default.instance.playStreamByPerformerDetails(e,!0).catch(function(){})})}},{key:"playPreRollVideo",value:function(e,t,r){this.HTML5ListPagePlayerView.playPreRollVideo(e,t,r)}},{key:"stopPreRollVideo",value:function(){this.HTML5ListPagePlayerView.stopPreRollVideo()}},{key:"startPulse",value:function(e){this.OverlapView.showContainer(e),this.HTML5ListPagePlayerView.startPulse()}},{key:"stopPulse",value:function(){this.HTML5ListPagePlayerView.stopPulse()}},{key:"resetPulseLayer",value:function(){this.OverlapView.resetContainer()}},{key:"onFavoriteUpdateSuccess",value:function(e){e.command===g.a.FavoritesComponent.CONST_COMMAND_ADD?R.default.instance.markAsFavorite():R.default.instance.unmarkAsFavorite()}},{key:"getLayoutMode",value:function(){return R.default.instance.layoutMode}},{key:"handleAppletRecommenderClick",value:function(e){var t=e.performerId,e=e.performerName;!0===h.a.Config.get("featureFlags.enableLppPreRoll",!1)&&!0===h.a.Config.get("featureFlags.enableAppletRecommenderPreRoll",!1)?this.HTML5ListPagePlayerView.playPreRollVideo(t,e):this.HTML5ListPagePlayerView.playPreRollVideo(null)}},{key:"bind",value:function(){h.a.on([{element:h.a.Broadcaster,event:g.a.FavoritesComponent.GLOBALEVENT_FAVORITE_UPDATE_SUCCESS,handler:this.onFavoriteUpdateSuccess,scope:this},{element:h.a.Broadcaster,event:"GLOBALEVENT:applet-recommender-click",handler:this.handleAppletRecommenderClick,scope:this}])}}],M(r.prototype,e),r}(),m=i("0c3f"),j=i.n(m);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=W(r);return e=i?(e=W(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==F(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,d.View);var e=U(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return H(t.prototype,[{key:"name",get:function(){return"PulseView"}},{key:"pulseOverlayCls",get:function(){return"pulse-overlay"}},{key:"stopPulse",value:function(){this._pulsingLayoutEl.hide()}},{key:"startPulse",value:function(){this._pulsingLayoutEl.show()}},{key:"setPulseLayout",value:function(){return this._pulsingLayoutEl||(this._pulsingLayoutEl=Ext.select("."+this.pulseOverlayCls).item(0)),this.stopPulse(),this._pulsingLayoutEl}}]),t}(),K=i("cf97");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Q(e,t,r){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Z(r);return e=i?(e=Z(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Y(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=Symbol(),ee=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(r,z);var e,t=X(r);function r(e){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e))[$]=Ext.get(e.container),e}return e=[{key:"ratio",get:function(){return 16/9}},{key:"name",get:function(){return"HTML5ListPagePlayerView"}},{key:"container",get:function(){return"member_client_container"}},{key:"id",get:function(){return"list-page-html5-video-container"}},{key:"blankSrc",get:function(){return h.a.Config.get("testVideoUrl")}},{key:"blankImage",get:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}},{key:"preRollFadeDuration",get:function(){return 1}},{key:"preRollUrl",get:function(){return this._video.dom.currentSrc}},{key:"preRollProgress",get:function(){return this._video.dom.currentTime}},{key:"preRollDuration",get:function(){return this._video.dom.duration}},{key:"hasError",get:function(){return this._hasError}},{key:"videoElement",get:function(){return this._video.dom}},{key:"imageElement",get:function(){return this._image.dom}},{key:"imageContainerElement",get:function(){var e;return null===(e=this._imageContainer)||void 0===e?void 0:e.dom}},{key:"videoSrc",get:function(){return this._video.dom.currentSrc}},{key:"orientation",get:function(){return this._video.dom.videoWidth>this._video.dom.videoHeight?"landscape":"portrait"}},{key:"videoAspectRatioError",get:function(){return this._video.dom.videoWidth/this.ratio>this._video.dom.videoHeight?"height":"width"}},{key:"displayName",get:function(){return this._displayName}},{key:"canPlayOnApplet",get:function(){return this._asyncHelper}},{key:"selectElements",value:function(){this._video=this._player.select("video").item(0),this.source=this._video.select("source").item(0),this._image=this._player.select("img").item(0),this._imageContainer=this._player.select("figure").item(0)}},{key:"bindVideoEvents",value:function(){this._video.on("canplay",this.onVideoCanPlay.bind(this)),this._video.on("playing",this.onVideoPlaying.bind(this)),this._video.on("ended",this.onVideoEnded.bind(this)),this.source.on("error",this.onVideoPlayError.bind(this))}},{key:"onVideoCanPlay",value:function(){var e;this.videoSrc!==h.a.Config.get("testVideoUrl")&&("landscape"===this.orientation?(this.videoElement.classList.remove("width","height"),this.videoElement.classList.add("landscape",this.videoAspectRatioError),this.imageContainerElement.style.display="none"):this.videoElement.classList.remove("landscape","width","height"),null===(e=this._asyncResolver)||void 0===e||e.call(this,this._displayName),this.videoElement.play())}},{key:"onVideoEnded",value:function(){this.stopPreRollVideo()}},{key:"onVideoPlaying",value:function(){var e=this;this._player.show(),this._isPlaying=!0,this.stopPulse(),window.clearInterval(this.videoProgressInterval),this.videoProgressInterval=window.setInterval(function(){e.preRollDuration-e.preRollProgress<=e.preRollFadeDuration&&(window.clearInterval(e.videoProgressInterval),e.stopPulse(),e._isPlaying=!1,e.playLiveStream(!0))},100)}},{key:"onVideoPlayError",value:function(){var e;this._isClosestSegmentTried?(null===(e=this._asyncRejecter)||void 0===e||e.call(this,"No pre-roll video source for ".concat(this._displayName)),this._hasError=!0):(this._isClosestSegmentTried=!0,this._generateVideoSource(this.performerId,this._closestSegment))}},{key:"showContainer",value:function(e){K.default.isWin7IE11()?this[$].removeClass("minified"):(!0===e&&(this[$].dom.dataset.animation="fadeIn"),this[$].display("block"))}},{key:"hideContainer",value:function(){K.default.isWin7IE11()?this[$].addClass("minified"):(this[$].dom.dataset.animation="",this[$].display("none"))}},{key:"renderTo",value:function(e){var t,r,i,n,t=(t={src:this.blankSrc,imageSrc:this.blankImage,attributes:'muted preload="none"',badgeText:h.a.translate("LIVE")},r=t.src,i=t.imageSrc,n=t.attributes,t=t.badgeText,'<div class="html5-list-page-player">\n        <figure>\n            <img src="'.concat(i,'" alt="lpp bg" />\n        </figure>\n        <video ').concat(n,'>\n            <source src="').concat(r,'" />\n        </video>\n        <span class="html5-list-page-player__badge">').concat(t,"</span>\n    </div>"));this._player=Ext.DomHelper.append(e,t,!0),this._player.hide(),this.setPulseLayout(),this.selectElements(),this.bindVideoEvents()}},{key:"playLiveStream",value:function(e){this._isPlaying||(this.showContainer(e),e||this.stopPreRollVideo())}},{key:"playPreRollVideo",value:function(e,t,r){var i=this,n=h.a.Cookie.get("TZhj4ucp5N");if(!["one","two"].includes(window.AB_TEST_CONFIG.preRollVariant)&&!["CQSJBz0iA7","YqzKs9KEU4"].includes(n)){if(this._asyncHelper=new Promise(function(e,t){i._asyncResolver=e,i._asyncRejecter=t}).catch(function(){}),!e)return this._setVideoSource(this.blankSrc),this.performerId=null,void((this._displayName=null)===(o=this._asyncRejecter)||void 0===o||o.call(this));this.performerId=e,this._displayName=t,this._hasError=!1,this._type="pre-roll";var o=h.a.Config.get("clientServerTimeDifference",0),t=new Date(Date.now()-o).getUTCSeconds(),o=30<=t?"30":"00";this._setClosestSegment(t),this._generateVideoSource(e,o),r?(this._setImageSource(r),this.imageContainerElement.style.display="block"):this._setImageSource(this.blankImage),this.videoElement.load()}}},{key:"stopPreRollVideo",value:function(){window.clearInterval(this.videoProgressInterval),this.imageContainerElement.style.display="none",this._player.hide(),this._isPlaying=!1,this.videoElement.pause(),this._setImageSource(this.blankImage),this._setVideoSource(this.blankSrc),this._asyncHelper=Promise.reject().catch(function(){})}},{key:"_setClosestSegment",value:function(e){this._isClosestSegmentTried=!1;e=10*Math.floor(e/10);0===e?e=50:30===e&&(e=20),this._closestSegment=e}},{key:"_setVideoSource",value:function(e){this._video.select("source").item(0).dom.setAttribute("src",e),this.videoElement.load()}},{key:"_generateVideoSource",value:function(e,t){var r=h.a.Config.get("staticLppUrl"),i=j()(e)[0],t="".concat(r,"/").concat(i,"/").concat(e,"/").concat(e,".").concat(t,".mp4");this.videoElement.parentElement&&this.videoElement.parentElement.classList.contains("html5-list-page-player")||document.querySelector(".html5-list-page-player").appendChild(this.videoElement),this._setVideoSource(t)}},{key:"_setImageSource",value:function(e){this.imageElement.setAttribute("src",e)}},{key:"handleAppletStreamReady",value:function(){this.playLiveStream()}},{key:"bind",value:function(){h.a.on([{element:h.a.Broadcaster,event:g.a.FlashExternal.GLOBALEVENT_APPLET_STREAM_READY,handler:this.handleAppletStreamReady}],this),Q(Z(r.prototype),"bind",this).call(this)}}],q(r.prototype,e),r}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=oe(r);return e=i?(e=oe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==te(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,d.View);var e=ne(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return re(t.prototype,[{key:"name",get:function(){return"OverlapView"}},{key:"containerClass",get:function(){return"overlap-container"}},{key:"hideClass",get:function(){return K.default.isWin7IE11()?"minified":"hide"}},{key:"createContainer",value:function(){return this._container||(this._container=Ext.select(".".concat(this.containerClass)).item(0)),this._container}},{key:"showContainer",value:function(e){this.setContainerDimensions(e).setContainerStyle()}},{key:"resetContainer",value:function(){this.top=0,this.left=0,this.width=0,this.height=0,this.setContainerStyle()}},{key:"setContainerDimensions",value:function(e){e=e.getDimensions();return this.top=e.top+(window.scrollY||window.pageYOffset),this.left=e.left+(window.scrollX||window.pageXOffset),this.width=e.width,this.height=e.height,this}},{key:"setContainerStyle",value:function(){return this._container.removeClass(this.hideClass).setStyle({left:"".concat(this.left,"px"),top:"".concat(this.top,"px"),width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}),this}},{key:"hideContainer",value:function(){this._container.addClass(this.hideClass)}}]),t}();function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ce(e,t,r){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=he(r);return e=i?(e=he(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==se(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(r,h.a.Component);var e,t=de(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return e=[{key:"name",get:function(){return"HTML5ListPagePlayerComponent"}},{key:"listPagePlayerId",get:function(){return"listpage_player"}},{key:"init",value:function(e,t){ce(he(r.prototype),"init",this).call(this,e,t),this._createController()}},{key:"getLayoutMode",value:function(){return this.getController().getLayoutMode()}},{key:"_createController",value:function(){this._HTML5ListPagePlayerController=new D({el:this.element,items:{HTML5ListPagePlayerView:{component:this._createHTML5ListPagePlayerView()},OverlapView:{component:this._createOverlapView()}}})}},{key:"getController",value:function(){return this._HTML5ListPagePlayerController instanceof D||this._createController(),this._HTML5ListPagePlayerController}},{key:"_createOverlapView",value:function(){return this._OverlapView instanceof ae||(this._OverlapView=new ae({id:this.listPagePlayerId})),this._OverlapView}},{key:"_createHTML5ListPagePlayerView",value:function(){return this._HTML5ListPagePlayerView instanceof ee||(this._HTML5ListPagePlayerView=new ee({id:this.element.dom.id})),this._HTML5ListPagePlayerView}},{key:"getLppView",value:function(){return this.getController().getView()}},{key:"stopVideo",value:function(){this.getController().stopVideo()}},{key:"startPulse",value:function(e){this.getController().startPulse(e)}},{key:"stopPulse",value:function(){this.getController().stopPulse()}},{key:"resetPulseLayer",value:function(){this.getController().resetPulseLayer()}},{key:"playVideo",value:function(e){this.getController().playVideo(e)}},{key:"playPreRollVideo",value:function(e,t,r){this.getController().playPreRollVideo(e,t,r)}},{key:"stopPreRollVideo",value:function(){this.getController().stopPreRollVideo()}}],le(r.prototype,e),r}();function pe(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return r(e),0}s.done?t(l):Promise.resolve(l).then(i,n)}function me(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){pe(i,t,r,n,o,"next",e)}function o(e){pe(i,t,r,n,o,"throw",e)}n(void 0)})}}function ge(e,t){ge.superclass.constructor.call(this,e,t)}Ext.extend(ge,h.a.Controller,{name:"ListPagePlayerController",overlayId:"overlay",visibleFreeModels:[],isBigThumbsExists:!0,isRandomPlayerEnabled:!1,forceDelayedInit:!1,performer:void 0,_delayedTaskDelayInIE11:100,_delayedTaskDelay:200,_delayedTaskListPagePlayerInitDelay:250,_startLPPStreamDelay:1e4,_isWindowHasFocus:!0,_isPlayingAllowed:!0,_isCookieDisabled:h.a.Config.get("is-cookie-disabled"),_pulseDelay:200,init:function(e,t){this._isMouseOverWindow=!Ext.isIE,ge.superclass.init.call(this,e,t),this._overlayPlayerOpened=!1,this._isAppletVisible=!0,this.ListPagePlayerView.setElements(),this.isRandomPlayerEnabled&&this._startRandomPlayerOnInit(),this.addEvents(g.a.ListPagePlayerController.EVENT_GET_VISIBLE_FREE_MODELS,g.a.ListPagePlayerController.EVENT_MOUSE_OUT)},setVisibleFreeModels:function(e){this.visibleFreeModels=e},setListPagePlayerParams:function(e){e=h.a.extend({},this.loadDataObject,Ext.decode(e));this.performerName===e.performer_id&&!0===this.isPlaying&&this._selectPlayingProcess(e)},resetRandomPlayer:function(){this._stopRandomPlayer()},_setRandomPlayerTasks:function(){this._randomPlayerTask=new Ext.util.DelayedTask(this._startRandomPlayer,this)},_getVisibleFreeModels:function(){this.fireEvent(g.a.ListPagePlayerController.EVENT_GET_VISIBLE_FREE_MODELS,this)},_getRandomPerformer:function(){return this.visibleFreeModels[Math.floor(Math.random()*this.visibleFreeModels.length)]},_getListPagePlayerParams:function(){this.isPlaying||(this.isPlaying=!0,this.performer&&(this.startPulse(),this.ListPagePlayerView.getPerformerDetails({performerId:this.performerName,appletType:g.a.appletType.HTML5})))},startPulse:function(e){this.getHTML5VideoComponent().startPulse(e||this.performer)},stopPulse:function(e){e?this.getHTML5VideoComponent().stopPulse():setTimeout(function(){this.getHTML5VideoComponent().stopPulse()}.bind(this),this._pulseDelay)},resetPulseLayer:function(){this.getHTML5VideoComponent().resetPulseLayer()},_isPerformerFree:function(){return this.performerStatus===g.a.ListPageModelAbstract.PERFORMER_STATUS_ONLINE},_isRandomPlayerAllowed:function(){var e=!!L.a.getHashValue()&&""!==L.a.getHashValue()[1];return(this._isWindowHasFocus||!this._isWindowHasFocus&&this._isMouseOverWindow)&&this.isRandomPlayerEnabled&&this._isPlayingAllowed&&!Ext.fly(this.overlayId).isVisible()&&!p.a.isChatAppletOnPage()&&!e},_stopHTML5Video:function(){window.clearTimeout(this.playTimeout),this.getHTML5VideoComponent().stopVideo(),h.a.fireEvent(g.a.ListPagePlayerController.GLOBALEVENT_HTML5_PLAYER_STOPPED)},_startHTML5Video:function(t){var r=this;return me(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(i.bind(null,"f94d"));case 2:e.sent.default.instance.appletReady.then(function(){r.getHTML5VideoComponent().playVideo(t)});case 4:case"end":return e.stop()}},e)}))()},_startPreRollOnApplet:function(t){return me(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(i.bind(null,"f94d"));case 2:e.sent.default.instance.playPreRollVideo(t);case 4:case"end":return e.stop()}},e)}))()},getHTML5VideoComponent:function(){return this._html5video instanceof fe||(this._html5video=new fe(this.element,{})),this._html5video},_startLPPStream:function(){this.isRandomPlayerEnabled&&this._randomPlayerTask&&this._restartRandomPlayerTaskWithDelay(this._startLPPStreamDelay)},_startRandomPlayerOnInit:function(){this._stopRandomPlayerTask(),this._setRandomPlayerTasks(),this._randomPlayerTask.delay(this._delayedTaskDelay)},_stopRandomPlayerTask:function(){this._randomPlayerTask&&this._randomPlayerTask.cancel()},_stopRandomPlayer:function(){this._isPlayingWithRandomPlayer=!1,this._stopHTML5Video(),this._performerStopped(),delete this.performer,this.getHTML5VideoComponent().stopPreRollVideo(),this._randomPlayerTask&&(this._isPlayingAllowed=!0,this._randomPlayerTask.delay(1e3))},_startRandomPlayer:function(e){this._isRandomPlayerAllowed()&&(this._overlayPlayerOpened?this._stopRandomPlayerTask():(this._stopRandomPlayer(),this._getVisibleFreeModels(),0!==this.visibleFreeModels.length||e?(this._performerStopped(),this.performer=e||this._getRandomPerformer(),this.performer&&this.performer.model.getName()!==this.performerName?this._startRandomPlayerTaskOnNextPerformer():this._restartRandomPlayerTaskWithDelay(300)):this._restartRandomPlayerTaskWithDelay(3e3)))},_startRandomPlayerTaskOnNextPerformer:function(){this._isPlayingWithRandomPlayer=!0,this.initListPagePlayer(this._delayedTaskDelay),this._restartRandomPlayerTaskWithDelay(this._startLPPStreamDelay)},_performerStopped:function(){h.a.isDefined(this.performer)&&this.performer.model&&this.performer.model.setLppStatusStopped()},_restartRandomPlayerTaskWithDelay:function(e){this._stopRandomPlayerTask(),this._randomPlayerTask&&this._randomPlayerTask.delay(e)},_selectPlayingProcess:function(e){var t,r,i=this;this.isChatOpenedOverHtml5ListPagePlayer()||(window.clearTimeout(this.playTimeout),this.playTimeout=window.setTimeout(function(){i.isStreamReady||i._selectPlayingProcess(e)},7e3),e.teaser_type=e.teaser_type?e.teaser_type.toUpperCase():"",e.pid=this.performer?this.performer.model.getName():e.performer_id,e.perf_url=this.performer?this.performer.getAnchorElement().dom.href:h.a.getUrl("Chat/Performer",{performerId:e.performer_id},{}),e.playFreeChannel=0,e.ishostedchannel=0,e.thumbnailUrl=null!==(t=null===(t=this.performer)||void 0===t||null===(r=t.getThumbnailUrl)||void 0===r?void 0:r.call(t))&&void 0!==t&&t,T.default.isLoggedIn()||!V.isGuestOnboardingEnabled||Object.keys(u.store.getState().user.favorites).includes(e.p_id)&&(e.isFavorite=!0),this._isPerformerFree()?(this.playerType="html5",p.a.updateHTMLAppletVars(e),this._startHTML5Video(e)):(this.stopPulse(!0),this.getHTML5VideoComponent().stopPreRollVideo(),this._stopHTML5Video()))},initListPagePlayer:function(e){this.performer&&this.performer.model&&this.ListPagePlayerView.listPagePlayerDivEl&&(this.isStreamReady=!1,this.performer.model.setLppStatusPlaying(),this.isPlaying=!1,this.performerStatus=this.performer.model.getStatus(),this.performerName=this.performer.model.getName(),this.loadDataObject=this.performer.model.getFlashData(),this.requestTask&&this.requestTask.cancel(),this.requestTask=new Ext.util.DelayedTask(this._getListPagePlayerParams,this),this.requestTask.delay(e))},onPerformerViewMouseOver:function(e){var t=e.model.hasOngoingVipShow(),r=e.model.hasVipShow();this._overlayPlayerOpened||window.location.hash.match("messages|chat|story|modelgallery")||(this._isPerformerHovered=!0,this._stopRandomPlayerTask(),this.performer===e&&(this.performer!==e||this._isPlayingWithRandomPlayer)||(this.getHTML5VideoComponent().stopPreRollVideo(),this._stopHTML5Video(),this._stopRandomPlayer()),p.a.isPrivatePeekAllowedInThumbnail()&&(2===e.model.getStatus()||3===e.model.getStatus())||(t||r)&&!V.isVipShowEnabled||0===e.model.getStatus()||e instanceof A.a||this.performer&&this.performer===e&&(this.performer!==e||this._isPlayingWithRandomPlayer)||(!0===h.a.Config.get("featureFlags.enableLppPreRoll",!1)&&(this.startPulse(e),this.getHTML5VideoComponent().playPreRollVideo(e.model.getName(),e.model.getDisplayName(),e.getThumbnailUrl())),this.reInitListPagePlayerOnceStreamStop(e,this.forceDelayedInit?this._delayedTaskListPagePlayerInitDelay:this._delayedTaskDelay)))},reInitListPagePlayerOnceStreamStop:function(e,t){this._performerStopped(),this.performer=e,this._isPlayingAllowed=!1,this.isPlaying=!1,this._stopRandomPlayerTask(),this.initListPagePlayer(t)},onPerformerViewMouseOut:function(){this._isPerformerHovered=!1,this.isChatOpenedOverHtml5ListPagePlayer()||(this._isPlayingAllowed=!0,this._stopRandomPlayer(),this.isPlaying=!1)},_onWindowFocus:function(){this._isWindowHasFocus=!0},_onWindowBlur:function(){this._isWindowHasFocus=!1,this.isChatOpenedOverHtml5ListPagePlayer()||this._stopRandomPlayer()},_onBrowserMouseOver:function(e,t){h.a.Util.checkMouseCrossedWindowBorder(e,t)&&!this._isMouseOverWindow&&(this._isMouseOverWindow=!0,this._startRandomPlayer())},_onBrowserMouseOut:function(e,t){this.isChatOpenedOverHtml5ListPagePlayer()||h.a.Util.checkMouseCrossedWindowBorder(e,t)&&(this._isMouseOverWindow=!1,this._stopRandomPlayer())},_onWindowScroll:function(){this.isChatOpenedOverHtml5ListPagePlayer()||(h.a.isUndefined(this.performer)||this.performer.model&&!this.performer.model.getIsOnViewPort())&&this._stopRandomPlayer()},_onWindowResize:function(){this.isChatOpenedOverHtml5ListPagePlayer()||this._stopRandomPlayer()},_onOverlayMouseOver:function(){this.isChatOpenedOverHtml5ListPagePlayer()||this._stopRandomPlayer()},onWindowShow:function(e){this.isChatOpenedOverHtml5ListPagePlayer()||e&&e.window&&-1===["Tooltip","window","DropDownMenu","SearchFilterWindow"].indexOf(e.window.name)&&this._stopRandomPlayerTask()},onWindowHide:function(e){e&&e.window&&"Tooltip"!==e.window.name&&this._startLPPStream()},onOverlayOpen:function(t){var r=this;if(this._overlayPlayerOpened||(this._overlayPlayerOpened=t.scope.name===g.a.ChatModalComponent.NAME),this.stopPulse(!0),this.isChatOpenedOverHtml5ListPagePlayer()){var e=!0===h.a.Config.get("featureFlags.enableLppPreRoll",!1),i=e?this.getHTML5VideoComponent().getLppView():{},n=i.videoElement,i=i.canPlayOnApplet;return!this._overlayPlayerOpened&&this.performer&&h.a.hasPath(t,"scope.performerName")&&t.scope.performerName!==this.performer.model.getName()?(this._stopRandomPlayer(),this._stopRandomPlayerTask()):e&&i&&this._isAppletVisible&&i.then(function(e){e===t.scope.performerName&&r._startPreRollOnApplet(n)}).catch(function(){}),void(this.requestTask&&this.requestTask.cancel())}this._stopRandomPlayer(),this._stopRandomPlayerTask()},onOverlayClose:function(e){var t=L.a.getHashValue()?L.a.getHashValue()[1]:null;(e.scope&&e.scope.name===g.a.ChatModalComponent.NAME||null===t)&&(this._overlayPlayerOpened=!1),(e.scope&&e.scope.name===g.a.ChatModalComponent.NAME||null===t)&&!this._isPerformerHovered&&(this._stopRandomPlayer(),this._startLPPStream())},onPerformerDetailsSuccess:function(e){this.setListPagePlayerParams(e)},onPerformerDetailsError:function(){this.stopPulse(!0)},onStopListpagePlayer:function(){this._stopRandomPlayer()},onSidebarToggle:function(){this._stopRandomPlayer()},isChatOpenedOverHtml5ListPagePlayer:function(){return"html5"===this.playerType&&O.default.getActiveModal()&&O.default.getActiveModal().name===g.a.ChatModalComponent.NAME||this._overlayPlayerOpened},onAppletOutOfContent:function(){},handleAppletStreamReady:function(){this.isStreamReady=!0},onShowChatApplet:function(){this._isAppletVisible=!0},onHideChatApplet:function(){this._isAppletVisible=!1},bind:function(){Ext.fly(this.overlayId).on("mouseover",this._onOverlayMouseOver,this),this._bindedWindowEvents={resize:this._onWindowResize,blur:this._onWindowBlur,focus:this._onWindowFocus,scroll:this._onWindowScroll,scope:this},Ext.fly(window).on(this._bindedWindowEvents),Ext.fly(document).on({mouseover:this._onBrowserMouseOver,mouseout:this._onBrowserMouseOut,scope:this}),h.a.on([{element:h.a.Broadcaster,event:g.a.FlashExternal.GLOBALEVENT_APPLET_STREAM_READY,handler:this.handleAppletStreamReady},{element:h.a.Broadcaster,event:g.a.IndexIndex.GLOBALEVENT_STOP_LISTPAGE_PLAYER,handler:this.onStopListpagePlayer},{element:h.a.Broadcaster,event:g.a.IndexIndex.GLOBALEVENT_TOGGLE_SIDEBAR_BUTTON_CLICK,handler:this.onSidebarToggle},{element:h.a.Broadcaster,event:"GLOBALEVENT:show-chat",handler:this.onShowChatApplet},{element:h.a.Broadcaster,event:"GLOBALEVENT:hide-chat",handler:this.onHideChatApplet}],this)},unbind:function(){Ext.fly(this.overlayId).un("mouseover",this._onOverlayMouseOver,this),Ext.fly(window).un(this._bindedWindowEvents),Ext.fly(document).un({mouseover:this._onBrowserMouseOver,mouseout:this._onBrowserMouseOut,scope:this}),window.clearTimeout(this.playTimeout)}});var E=ge,S=i("825c"),m=i.n(S),S=i("b909"),Pe=i.n(S),S=i("0619"),_e=i.n(S),S=i("4daa"),Ee=i.n(S);function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e,t){ve.superclass.constructor.call(this,e,t)}t.default=Ext.extend(ve,h.a.Component,{name:"ListPageComponentAbstract",performersConfig:"listPagePerformers",controllerClassName:n.a,viewClassName:f.default,modelClassName:P.a,listPageControllerListeners:{},listPagePlayerControllerClassName:E,isRandomPlayerEnabled:!1,listPagePlayerViewClassName:m.a,isBigThumbsExists:!0,listPagePlayerForceDelayedInit:!1,init:function(e,t){ve.superclass.init.call(this,e,t),"visible"!==document.visibilityState&&!Ext.isIE9||this._setController();t=document.getElementById("grid-size-selector");t&&(l.a.render(s.a.createElement(c.a,{store:u.store,"data-testid":"ListPageComponentAbstractProvider"},s.a.createElement(r,{"data-testid":"ListPageComponentAbstractGridSizeSelector"})),t),this._setListPagePlayerController())},_setController:function(){var e=this.controllerClassName;!h.a.isFunction(e)||this._listPageController instanceof e||(this._listPageController=new e({items:Ext.apply({IndexBroadcaster:{component:h.a.Broadcaster,listeners:Ext.apply({},(ye(e={"global-status-change":"onStatusChange","global-videocall-change":"onVideocallChange","global-vipshow-status-change":"onVipShowStatusChange"},g.a.ListPageAbstract.GLOBALEVENT_REFRESH_LISTPAGE,"onRefreshListPage"),ye(e,g.a.ListPageComponentAbstract.GLOBALEVENT_SEARCH_RESULTS,"onSearchResults"),ye(e,"globalevent-clean-listpage","onCleanListPage"),ye(e,"logged-in","onLoggedIn"),ye(e,"after-signup-success","onSignUpSuccess"),ye(e,g.a.ListPageComponentAbstract.GLOBALEVENT_SEARCH_PAGE_OFF,"onAjaxSearchPageOff"),ye(e,g.a.ListPageComponentAbstract.GLOBALEVENT_SEARCH_PAGE_ON,"onAjaxSearchPageOn"),ye(e,"firstbill-complete","onFirstBillComplete"),ye(e,"purchase-success","onQuickBuySuccess"),ye(e,"LuckyWheelModal:wheel-spun","onLuckyWheelSpun"),ye(e,"WheelOfFortune:guest-wheel-spun","onGuestWheelOfFortuneSpun"),ye(e,"CommercialItemView:countdown-end","onCommercialCountdownEnd"),ye(e,"global-list-page-promo-ab-test","onListPageCommercialABTest"),ye(e,"Applet:quickbuy-success","onAppletQuickBuySuccess"),e),this.listPageControllerListeners.IndexBroadcaster)},ListPageView:{component:this.getView(),listeners:Ext.apply({},{"event-view-mouseover":"onPerformerViewMouseOver","event-view-mouseout":"onPerformerViewMouseOut"},this.listPageControllerListeners.ListPageView)},ListPageModel:{component:this._getListPageModel(),listeners:{"event-visible-free-models-ready":"onVisibleFreeModelsReady","event-visible-models-ready":"onVisibleModelsReady","event-swapped-commercial":"onPerformerSwap","event-show-more-error":"onShowMoreError","destroy-all":"onDestroyAll","ListPageModelAbstract:get-all-performers-ready":"onGetAllPerformersReady"}}}),plugins:h.a.object([g.a.AutoShowMore.NAME],[{component:_e.a,config:{direction:g.a.AutoShowMore.DIRECTION_DOWN,view:this.getView(),model:this._getListPageModel(),maxAutoLoadNum:3,resetEvent:g.a.ListPageModelAbstract.EVENT_DESTROY_ALL,loadingStartedEvent:g.a.ListPageModelAbstract.EVENT_START_LOADING,loadingFinishedEvent:g.a.ListPageModelAbstract.EVENT_FINISHED_LOADING,showMoreButtonClickEvent:g.a.ListPageViewAbstract.EVENT_SHOW_MORE_BUTTON_CLICK,offset:2500}}])}),this._listPageController.on(Ext.apply({},{"event-visible-free-models-ready":this.setVisibleFreeModelsReady,"event-view-mouseover":this.onPerformerViewMouseOver,"event-view-mouseout":this.onPerformerViewMouseOut,scope:this},this.listPageControllerListeners.ListPageController)))},enablePerformerSwap:function(){this.performerSwap instanceof Pe.a||!this._listPageController||(this.performerSwap=new Pe.a(this.element,{swapRouteHandler:"ListPageAjax/PerformersSwap",ajaxQueue:new h.a.AjaxQueue}),this._listPageController.addComponent({component:this.performerSwap,listeners:{"PerformerSwapComponent:get-all-performers":"getAllPerformers","get-visible-performers":"getVisiblePerformers","event-swap-performers":"onPerformerSwap","PerformerSwapComponent:swap-performer-with-last-performer":"onPerformerSwapLast"}},"PerformerSwap"),this._listPageController.addPlugin(g.a.PerformerSwap.NAME,{component:Ee.a,config:{view:this.getView()}}),this._listPageController.on({"PerformerSwap:destroy-performer":this.destroyPerformerById,"ListPageControllerAbstract:get-all-performers-ready":this.getAllPerformersReady,"event-swapped-performers":this.setSwappedPerformers,"event-visible-models-ready":this.setVisibleModelsReady,scope:this}),h.a.fireEvent("global-list-page-swap-ready"))},setVisibleFreeModelsReady:function(e){this._listPagePlayerController&&this._listPagePlayerController.setVisibleFreeModels(e)},onPerformerViewMouseOver:function(e){this._listPagePlayerController&&this._listPagePlayerController.onPerformerViewMouseOver(e)},onPerformerViewMouseOut:function(e){this._listPagePlayerController&&this._listPagePlayerController.onPerformerViewMouseOut(e)},setVisibleModelsReady:function(e){this.performerSwap.setVisibleViews(e)},getAllPerformersReady:function(e){this.performerSwap.onAllPerformersReady(e)},setSwappedPerformers:function(e){this.performerSwap.setSwappedPerformers(e)},destroyPerformerById:function(e){this._getListPageModel().destroyPerformerById(e)},getView:function(){var e=this.viewClassName;return!h.a.isFunction(e)||this._listPageView instanceof e||(this._listPageView=new e({element:this.element,model:this._getListPageModel()})),this._listPageView},getController:function(){return this._listPageController||this._setController(),this._listPageController},_getListPageModel:function(){return!h.a.isFunction(this.modelClassName)||this._listPageModel instanceof this.modelClassName||(this._listPageModel=new this.modelClassName),this._listPageModel},setStreamPlayerModel:function(){var e=C.a;return this._streamPlayerModel instanceof e||(this._streamPlayerModel=new e),this._streamPlayerModel},_setListPagePlayerController:function(){var e=this.listPagePlayerControllerClassName;!h.a.isFunction(e)||this._listPagePlayerController instanceof e||(this._listPagePlayerController=new e({items:{ListPagePlayerView:{component:this.getListPagePlayerView(),listeners:{}},StreamPlayerModel:{component:this.setStreamPlayerModel(),listeners:{"performer-details-success":"onPerformerDetailsSuccess","performer-details-error":"onPerformerDetailsError"}},IndexBroadcaster:{component:h.a.Broadcaster,listeners:h.a.object([["window-show","onWindowShow"],["window-hide","onWindowHide"],[g.a.ModalComponent.GLOBALEVENT_MODAL_OPENED,"onOverlayOpen"],[g.a.ModalComponent.GLOBALEVENT_MODAL_CLOSED,"onOverlayClose"],[g.a.FlashExternal.GLOBALEVENT_OUT_OF_CONTENT,"onAppletOutOfContent"]])}},isRandomPlayerEnabled:this.isRandomPlayerEnabled,isBigThumbsExists:this.isBigThumbsExists,forceDelayedInit:this.listPagePlayerForceDelayedInit}),this.getController().addComponent({component:this._listPagePlayerController,listeners:{"get-visible-free-models":"getVisibleFreeModels"}},"ListPagePlayer"))},getListPagePlayerView:function(){var e=this.listPagePlayerViewClassName;return!h.a.isFunction(e)||this._listPagePlayerView instanceof e||(this._listPagePlayerView=new e({element:this.element,model:this.setStreamPlayerModel()})),this._listPagePlayerView},onHashUpdate:function(){window.location.hash?p.a.saveScrollPosition():p.a.currentScrolling()},onVisibilityChange:function(){"visible"!==document.visibilityState||this._isTabActivated||(this._isTabActivated=!0,this._setController())},bind:function(){ve.superclass.bind.call(this),h.a.on([{element:h.a.Broadcaster,event:g.a.History.GLOBALEVENT_HASH_UPDATE,handler:this.onHashUpdate}],this),(Ext.isChrome||Ext.isSafari||Ext.isEdge)&&"visible"!==document.visibilityState&&Ext.fly(document).on(g.a.BrowserEvents.VISIBILITY_CHANGE,this.onVisibilityChange,this,{single:!0})}})},e1b0:function(e,t,r){"use strict";r.d(t,"e",function(){return l}),r.d(t,"f",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"d",function(){return s}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return n});var t=r("0b3c"),r=r("a022"),i=t.d.div(["display:none;top:0;color:rgb(255,255,255);width:100%;height:100%;cursor:pointer;z-index:130;position:absolute;font-size:12px;text-align:center;flex-direction:column;-webkit-box-pack:center;justify-content:center;background:rgba(0,0,0,0.8);"]),n=t.d.div(["display:block;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;"]),o=t.d.div(["display:flex;position:relative;width:100%;background:#7b0000;overflow:hidden;&:before{content:'';display:block;padding-top:56.25%;width:100%;}&:hover{","{display:flex;}","{display:none;}}"],i,n),a=t.d.div(["display:block;height:100%;left:0;position:absolute;top:0;width:100%;&:before{background:linear-gradient(180deg,rgba(0,0,0,0) 0%,#000000 100%);content:'';display:block;height:50%;width:100%;z-index:1;position:absolute;bottom:0;left:0;}"]),s=t.d.span(["bottom:0;box-sizing:border-box;display:block;font:700 11px/22px Arial,sans-serif;font-size:14px;height:32px;left:0;line-height:32px;padding:0 30px;position:absolute;text-align:left;text-shadow:1px 1px rgba(0,0,0,0.38);transition:bottom 0.2s linear 0s;width:100%;z-index:26;color:#ffffff;"]),l=Object(t.d)(r.a)(["bottom:7px;left:4px;position:absolute;visibility:visible;z-index:26;pointer-events:none;"])},e481:function(e,t,r){"use strict";r.r(t);function o(e){return(e=e.price)?p.a.createElement(b.a,{credit:e},1===e?"{credit} credit":"{credit} credits"):null}var i=r("44ad"),u=r.n(i),n=r("7ab0"),d=r.n(n),a=r("d869"),h=r.n(a),f=r("8af1"),p=r.n(f),c=r("63f1"),s=r.n(c),l=r("978c"),m=r("a9a1"),g=r("870e"),P=r("0a81"),_=r("be52"),E=r("ef59"),y=r("8a2d"),v=r.n(y),b=r("791c"),i=r("0b3c"),n=r("9ced"),w=i.d.div(["background:rgba(0,0,0,0.8);color:#fff;cursor:pointer;display:flex;flex-direction:column;font-size:12px;height:100%;justify-content:center;opacity:0;position:absolute;text-align:center;top:0;width:100%;z-index:25;&:hover{opacity:1;}"]),S=i.d.div(["font-size:",";font-weight:bold;text-shadow:1px 1px rgba(0,0,0,0.38);"],function(e){return"small"===e.size?"12px":"14px"}),C=i.d.div(["color:#ccc;font-size:10px;font-weight:bold;text-transform:capitalize;"]),O=Object(i.d)(n.a)(["align-self:center;margin:10px 0;"]),L=r("c33b"),T=r("0592"),a=function(e){var t=e.privatePeekPrice,r=e.displayName,i=e.small,e=Object(P.e)(function(e){return e.user._user.balances.freePeeks}),n=Object(P.d)();return p.a.createElement(p.a.Fragment,null,p.a.createElement(O,{small:i,onClick:function(){T.default.navigateToChatPage("chat/".concat(r),{trigger:!0}),n(Object(L.G)())},"data-testid":"TakeAPeekButton"},p.a.createElement(b.a,null,"Take a peek")),p.a.createElement(C,{"data-testid":"TakeAPeekPrice"},0<e?p.a.createElement(b.a,null,"Free"):p.a.createElement(o,{price:t,"data-testid":"TakeAPeekPrivatePeekPrice"})))};a.propTypes={privatePeekPrice:y.number,displayName:y.string.isRequired,small:y.bool.isRequired},a.defaultProps={privatePeekPrice:null};var V=a,A=r("2931"),a=function(e){var t=e.privatePrice,r=e.displayName,e=e.small,i=Object(P.e)(A.a);return p.a.createElement(p.a.Fragment,null,p.a.createElement(O,{small:e,onClick:function(){T.default.navigateToChatPage("chat/".concat(r),{trigger:!0}),i&&u.a.Broadcaster.fireEvent(h.a.ModelMessagesConversationController.GLOBALEVENT_PRIVATE_START,r)},"data-testid":"JoinPrivateButton"},p.a.createElement(b.a,null,"Join Private")),p.a.createElement(C,{"data-testid":"JoinPrivatePrice"},p.a.createElement(b.a,{credit:t},1===t?"{credit} credit":"{credit} credits")))};a.propTypes={privatePrice:y.number.isRequired,displayName:y.string.isRequired,small:y.bool.isRequired};var R=a,I=r("bb1d"),a=function(e){var t=e.privatePeekPrice,r=e.inExclusivePrivate,i=e.displayName,n=e.price,o=e.mainCategory,a=Object(P.e)(function(e){return e.listPage.gridLayout}),e=["soul_mate"].includes(o),o="string"==typeof n?n/100:n,n=r?"I'm in Exclusive Private Chat":"I'm in <strong>Private Chat</strong>";return p.a.createElement(I.a,{component:"span",to:u.a.getUrl("Chat/Performer",{performerId:i}),"data-testid":"PrivateChatMaskRouteManagerLink"},p.a.createElement(w,{"data-testid":"PrivateChatMaskContainer"},p.a.createElement(S,{size:a,"data-testid":"PrivateChatMaskTitle"},p.a.createElement(b.a,{as:"em"},n)),!r&&(e?p.a.createElement(R,{privatePrice:o,displayName:i,small:!0,"data-testid":"PrivateChatMaskJoinPrivate"}):p.a.createElement(V,{privatePeekPrice:t,displayName:i,small:!0,"data-testid":"PrivateChatMaskTakeAPeek"}))))};a.propTypes={privatePeekPrice:y.number,inExclusivePrivate:y.bool,displayName:y.string.isRequired,price:Object(y.oneOfType)([y.string,y.number]),mainCategory:y.string.isRequired},a.defaultProps={inExclusivePrivate:!1,price:null,privatePeekPrice:null};var M=a,k=r("e606"),N=r("1cab"),x=r("ab2c"),B=i.d.div(["background:rgba(0,0,0,0.8);color:#fff;cursor:pointer;display:flex;flex-direction:column;font-size:12px;height:100%;justify-content:center;position:absolute;text-align:center;top:0;width:100%;z-index:25;"]),D=i.d.div(["font-size:",";font-weight:bold;text-shadow:1px 1px rgba(0,0,0,0.38);span{color:#fc0;}"],function(e){return"small"===e.size?"12px":"14px"}),j=Object(i.d)(n.a)(["font-size:12px;line-height:12px;margin:",";padding:8px;"],function(e){return"small"===e.size?"8px auto":"12px auto"}),F=i.d.div(["color:#ccc;font-size:10px;font-weight:bold;text-transform:capitalize;"]),H=Object(i.d)(b.a)(["color:#85b400;"]);function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function U(e){var t=e.size,e=e.name;return"small"===t?p.a.createElement(b.a,{as:"p"},"I'm in [span]VIP Show[/span]"):p.a.createElement(b.a,{as:"p",name:e},"{name}'s [span]VIP Show[/span]")}U.propTypes={size:v.a.string.isRequired,name:v.a.string.isRequired};a=function(e){var t=e.show,r=Object(P.d)(),i=Object(P.e)(function(e){return e.listPage.entities[t.performer.id]}),n=Object(P.e)(function(e){return e.listPage.gridLayout}),o=Object(P.e)(function(e){return Object(k.c)(e,t.performer.id)}),a=Object(f.useRef)(!1),s=i.display_name||i.displayName,i=(l=Object(f.useState)(!1),e=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return r}}(l,e)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(l,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];Object(f.useEffect)(function(){a.current=!0;function e(e){return a.current&&c(s===e)}function t(){return a.current&&c(!1)}return u.a.Broadcaster.on(h.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_OVER,e),u.a.Broadcaster.on(h.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_LEAVE,t),function(){u.a.Broadcaster.un(h.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_OVER,t),u.a.Broadcaster.un(h.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_LEAVE,e),a.current=!1}},[s,l]);var e=t.status===x.a.STARTED,i=e||o&&!l,l=Object(f.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),r(Object(L.x)());e=d.a.isCurrentPage(h.a.PageId.FAVORITE_INDEX)?N.default.CONST.PAGE.FAVORITE:N.default.CONST.PAGE.LISTS;N.default.trackGenericEvent({eventCategory:e,eventAction:N.default.CONST.ACTION.CLICK,eventLabel:"join now vip show"})},[r]);return p.a.createElement(I.a,{href:u.a.getUrl("Chat/Performer",{performerId:s}),"data-testid":"VipShowMaskRouteManagerLink"},i&&p.a.createElement(B,{"data-testid":"VipShowMaskVipShowBoxContainer"},p.a.createElement(D,{size:n,"data-testid":"VipShowMaskTitle"},p.a.createElement(U,{size:n,name:s,"data-testid":"VipShowMaskTitleText"})),p.a.createElement(j,{onClick:l,size:n,theme:o?"lime":"primary","data-testid":"VipShowMaskJoinNowButton"},p.a.createElement(b.a,null,o||e?"Join the show":"Book your place")),p.a.createElement(F,{size:n,"data-testid":"VipShowMaskContainerFooter"},o?p.a.createElement(H,{as:"span","data-testid":"VipShowMaskTranslatedBooked"},"Booked"):p.a.createElement(b.a,{credit:t.minimumBuyInCredits},1===t.minimumBuyInCredits?"{credit} credit":"{credit} credits"))))};a.propTypes={show:v.a.shape({minimumBuyInCredits:v.a.number,viewer:v.a.shape({subscribed:v.a.bool}),performer:v.a.shape({id:v.a.number}),status:v.a.string}).isRequired};var W=a,z=r("3686"),K=r("e1b0"),Y=r("bd6a"),q=r("768e7"),Q=r("dace"),J=r("6d88");function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Z(e){var t=e.performerId,r=document.querySelector("#container_".concat(t," .favorite")),i=(n=Object(P.e)(function(e){return e.listPage.entities[t]})).displayName||n.display_name,e=n.performerNick||n.pid,n=Object(f.useCallback)(function(e){var t=e.isUserLoggedIn,e=e.requestStatus;t||"added"!==e||N.default.trackGenericEvent({eventAction:N.GA_CONST.ACTION.ADDED_FAVORITE,eventCategory:N.GA_CONST.PAGE.LISTS,eventLabel:"success"})},[]);return r?Object(c.createPortal)(p.a.createElement(q.a,{performerId:t,performerNick:e,displayName:i,background:!1,popoverPosition:Q.a.LEFT,popoverPortalContainer:document.body,trackOnClick:n,"data-testid":"PerformerViewMasksFavoriteButton"}),r):null}function $(e){var t=e.performerId,r=document.querySelector("#container_".concat(t)),e=Object(E.a)("#container_".concat(t," .performerStatusContainer"),[]);return r?(r=r.classList.contains("has-story"),Object(c.createPortal)(p.a.createElement(K.e,{performerId:t,hasStory:r,className:"status-indicator","data-testid":"PerformerViewMasksPerformerStatusIndicator"}),e)):null}function ee(e){var t=e.performerId,r=Object(P.e)(function(e){return Object(z.e)(e,t)}),i=Object(P.e)(function(e){return e.listPage.entities[t]}),n=i.sneak_peek_price,o=i.price,a=i.display_name||i.displayName,s=i.main_category||i.mainCategory,l=Object(E.a)("#container_".concat(t," a"),i),e=Object(P.e)(function(e){return Object(k.d)(e,t)});return r?(i=r.status,r=r.inExclusivePrivate,e?J.isVipShowEnabled?Object(c.createPortal)(p.a.createElement(W,{show:e,"data-testid":"PerformerViewMasksVipShowMask"}),l):Object(c.createPortal)(p.a.createElement(M,{privatePeekPrice:n,inExclusivePrivate:!0,displayName:a,price:o,mainCategory:s,"data-testid":"PerformerViewMasksPrivateChatMask"}),l):2===i?Object(c.createPortal)(p.a.createElement(M,{privatePeekPrice:n,inExclusivePrivate:!!r,displayName:a,price:o,mainCategory:s,"data-testid":"PerformerViewMasksPrivateChatMask"}),l):null):null}function te(){var e,t,r=Object(P.e)(function(e){return e.listPage.ids}),i=(e=Object(_.a)("performer-debug-status",!1),t=1,(function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]);return Object(f.useEffect)(function(){var e=Object(Y.a)(r,function(t){return 1<Object(Y.a)(r,function(e){return e===t}).length});0<e.length&&console.warn("Duplicated ids in list page reducer",[e])},[r]),0===r.length||u.a.Config.get("isStoryPageFeed")?null:r.map(function(e){return p.a.createElement(p.a.Fragment,{key:"mask-".concat(e)},p.a.createElement(f.Suspense,{fallback:null,"data-testid":"PerformerViewMasksSuspense"},i&&p.a.createElement(ie,{performerId:e,"data-testid":"PerformerViewMasksPerformerStatusDebug"})),p.a.createElement($,{performerId:e,"data-testid":"PerformerViewMasksPerformerViewStatusIndicator"}),p.a.createElement(Z,{performerId:e,"data-testid":"PerformerViewMasksPerformerViewFavoriteButton"}),p.a.createElement(ee,{performerId:e,"data-testid":"PerformerViewMasksPerformerViewMask"}))})}function re(e){var t=e.price;return(e=e.freeVideoCallSeconds)>h.a.MIN_VIDEO_CALL_SECONDS_TO_SHOW_INFO?p.a.createElement(b.a,{as:"em",value:e},"{value} Free Seconds"):p.a.createElement(b.a,{as:"em",credits:t},"{credits} Credits / minute")}var ie=Object(f.lazy)(function(){return r.e(107).then(r.bind(null,"58a7"))}),ne=r("9042"),n=r("0031"),oe=r.n(n),ae=r("98d2"),se=r("178a"),le=i.d.div(["font-family:Roboto,sans-serif;display:none;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);text-align:center;color:#fff;align-items:center;justify-content:center;flex-direction:column;z-index:25;button{margin:10px 0;font-size:12px;line-height:30px;height:30px;padding:0 8px;border-radius:3px;overflow:hidden;}span,em{display:block;}span{font-family:Arial,sans-serif;font-weight:bold;text-shadow:1px 1px rgba(0,0,0,0.38);}em{font-size:10px;color:#ccc;font-weight:bold;}",""],function(e){return"small"===e.size?"\n                span {\n                    padding: 0 10px;\n                    font-size: 12px;\n                }\n                button {\n                    margin: 8px 0;\n                }\n            ":"\n                span {\n                    padding: 0 15px;\n                    font-size: 14px;\n                }\n                button {\n                    margin: 12px 0;\n                }\n            "});re.propTypes={price:y.string,freeVideoCallSeconds:y.number},re.defaultProps={price:null,freeVideoCallSeconds:0};function ce(e){var t=e.size;return e.freeVideoCallSeconds>h.a.MIN_VIDEO_CALL_SECONDS_TO_SHOW_INFO&&"small"!==t?p.a.createElement(b.a,null,"Call me for Free"):p.a.createElement(b.a,null,"Call me")}ce.propTypes={size:y.string.isRequired,freeVideoCallSeconds:y.number},ce.defaultProps={freeVideoCallSeconds:0};v=function(e){var t=e.price,r=e.onButtonClick,i=Object(P.e)(function(e){return e.user._user.balances.freeVideoCallSecond}),e=Object(P.e)(function(e){return e.listPage.gridLayout});return p.a.createElement(le,{size:e,className:"video_call_container","data-testid":"VideoCallSpotBlockMaskSpotBlockMask"},p.a.createElement("span",null,p.a.createElement(b.a,null,"I'm available")),p.a.createElement(se.a,{type:"button",onClick:r,"data-testid":"VideoCallSpotBlockMaskButton"},p.a.createElement(ce,{size:e,freeVideoCallSeconds:i,"data-testid":"VideoCallSpotBlockMaskCta"})),p.a.createElement(re,{price:t,freeVideoCallSeconds:i,"data-testid":"VideoCallSpotBlockMaskAltText"}))};v.propTypes={price:y.string,onButtonClick:y.func.isRequired},v.defaultProps={price:null};function ue(e){ue.superclass.constructor.call(this,e)}var de=v,he=r("ffe4"),a=r("68b3"),n=r.n(a),i=r("d30b");Ext.extend(ue,i.default,{name:"HistoryTemplate",tpl:'<article id="{id}" class="{containerClass} {hasVideoCall} {lazyLoadClass}" data-status="{dataStatus}">\n            {imageBlock}\n            <div class="performerStatusContainer"></div>\n            <a href="{href}" rev="{rev}">\n                {debugText}\n                <span class="favorite {isFavorite}" data-model-id="{favoriteId}">\n                    <span class="broken-heart">\n                        <i>'.concat(d.a.svgIconBlock("heart-broken-left"),"</i>\n                        <i>").concat(d.a.svgIconBlock("heart-broken-right"),'</i>\n                    </span>\n                </span>\n                <span class="history_status history_type">{historyType}</span>\n                <span class="history_status history_time">{historyTime}</span>\n                {rightBottomBadge}\n                <span class="performer_name">\n                    {displayName}\n                </span>\n                {badgeBlock}\n                {videoBadgeBlock}\n            </a>\n        </article>'),_setTemplateParams:function(e){return Ext.apply(ue.superclass._setTemplateParams.call(this,e),{historyType:e.lastHistoryEventTimeMessage,historyTime:e.lastHistoryEventType})}});var y=ue,v=r("a462"),a=r.n(v),v=r("3b17"),v=r.n(v),fe=r("089a");function pe(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function me(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach(function(e){var t,r;t=i,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function ge(e){ge.superclass.constructor.call(this,e)}Ext.extend(ge,n.a,{name:"PerformerView",favoriteButtonSel:".favorite",hoverClass:"hover",lppPlayingClass:"lpp_playing",statusAttributeName:"data-status",_performerTemplates:u.a.object([[h.a.PerformerView.BLOCK_TYPE_PERFORMER,i.default],[h.a.PerformerView.BLOCK_TYPE_FAVORITES,i.default],[h.a.PerformerView.BLOCK_TYPE_HISTORY,y],[h.a.PerformerView.BLOCK_TYPE_SNAPSHOT,a.a],[h.a.PerformerView.BLOCK_TYPE_NEW_CATEGORIES,v.a]]),_itemMargin:0,_minImageSide:0,init:function(){this.addEvents(h.a.PerformerView.EVENT_VIEW_MOUSEOVER,h.a.PerformerView.EVENT_VIEW_MOUSEOUT),ge.superclass.init.call(this),this._createDebugLabels()},getAnchorElement:function(){return this.select("a").item(0)},getThumbnailUrl:function(){return this.select(".performer-image").item(0).dom.src},getDimensions:function(){var e=this.getItemImage().dom;return e?e.getBoundingClientRect():{width:0,height:0}},_createDebugLabels:function(){var t=this;1===parseInt(localStorage.getItem("performer-view-debug-labels-enabled"),10)&&r.e(26).then(r.bind(null,"aeed")).then(function(e){new e.default(t.element,t.model.attributes)}).catch(function(){return"An error occurred while loading the component"})},_getTemplate:function(){return this._performerTemplates[this.model.getBlockType()]},getVideoCallContainer:function(){var e=document.createElement("div");return this.element.select("a").item(0).dom.append(e),this.videoCallMaskContainer=e},_appendVideoCallTemplate:function(){var e=0===this.model.getStatus();return 0===parseInt(u.a.getMeta("isSearchPage"),10)&&d.a.isIndexPage()||!e||this.model.getIsVideoCallAppended()||(s.a.render(p.a.createElement(l.a,{store:m.store,"data-testid":"PerformerViewProvider"},p.a.createElement(de,{price:this.model.getVideoCallPrice(),onButtonClick:this.onVideoCallButtonClick,"data-testid":"PerformerViewVideoCallSpotBlockMask"})),this.getVideoCallContainer()),this.model.setIsVideoCallAppended()),this},_appendSendMessageTemplate:function(){var e=0===this.model.getStatus(),t=this.element.select("a").item(0),r=(r=Object(fe.a)("I'm available"),'<div class="send_message_container">\n\t\t\t\t<span>'.concat(r,'</span>\n\t\t\t\t<button class="send_message_button first_button">').concat(Object(fe.a)("Send me a message"),"</button>\n\t\t\t</div>"));return!e||this.model.hasVideoCall()||this.model.getIsSendMessageAppended()||(this.element.addClass("sendMessageAllowed"),Ext.DomHelper.append(t,r),this.model.setIsSendMessageAppended(),u.a.on([{element:this.element.select(".send_message_button"),event:"click",handler:this.onSendMessageButtonClick}],this)),this},_onStatusChange:function(e){this.element&&this.element.dom.setAttribute(this.statusAttributeName,e)},_onPerformerElementClick:function(e,t){e.preventDefault();var r=Ext.get(t).findParent(this.favoriteButtonSel,10,!0),i=t.classList.contains("videoCallBadge"),n=this.element.dom.classList.contains("has-story"),t=t.classList.contains("vipshow_icon");this._trackBadgeIconClick({isFavoriteBtn:!!r,isVideoCallBadge:i,isStoryCircle:n,isVipShowIcon:t}),d.a.getMouseButton(e)===h.a.Util.MIDDLE_MOUSE_BUTTON||e.ctrlKey||r||d.a.isModalOpenDenied()||(e=this.model.getDisplayName(),r=this.model.hasVipShow(),this._trackPerformerClick(r),"two"===window.AB_TEST_CONFIG.newMessage?window.top.document.location.href=u.a.getUrl("ChatHtml5/Performer",{performerId:e},{}):T.default.navigateToChatPage("chat/".concat(e)))},_trackPerformerClick:function(e){e&&N.default.trackGenericEvent({eventCategory:N.default.CONST.PAGE.LISTS,eventAction:N.default.CONST.ACTION.CLICK,eventLabel:"vip show room"})},_trackBadgeIconClick:function(e){var t=e.isFavoriteBtn,r=e.isVideoCallBadge,i=e.isStoryCircle,n=e.isVipShowIcon,e={eventCategory:N.default.CONST.PAGE.LISTS,eventAction:N.default.CONST.ACTION.BADGE_ICON_CLICK};return t?N.default.trackGenericEvent(me(me({},e),{},{eventLabel:"favorite icon"})):r?N.default.trackGenericEvent(me(me({},e),{},{eventLabel:"video call icon"})):i?N.default.trackGenericEvent(me(me({},e),{},{eventLabel:"story circle"})):n?N.default.trackGenericEvent(me(me({},e),{},{eventLabel:"vip badge"})):void 0},_onTouchEnd:function(){this.isTouchEvent=!0},_onMouseEnter:function(){var e,t,r;this.isTouchEvent?this.isTouchEvent=!1:(this.addHoverClass(),this.model.setHovered(!0),this.model.hasOngoingVipShow()||(this.model.hasVideoCall()&&this._appendVideoCallTemplate(),d.a.isSendMessageAllowedInThumbnail()&&this._appendSendMessageTemplate(),t=this.model.hasOngoingVipShow(),r=this.model.hasVipShow(),!t&&!r||J.isVipShowEnabled||null===(e=this.element)||void 0===e||e.addClass("vip_show_disabled"),this.fireEvent(h.a.PerformerView.EVENT_VIEW_MOUSEOVER,this),u.a.Broadcaster.fireEvent(h.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_OVER,this.model.getDisplayName())))},_onMouseLeave:function(){var e;null===(e=this.element)||void 0===e||e.removeClass("vip_show_disabled"),this.removeHoverClass(),this.model.setHovered(!1),this.model.hasOngoingVipShow()||(this.fireEvent(h.a.PerformerView.EVENT_VIEW_MOUSEOUT,this),u.a.Broadcaster.fireEvent(h.a.PerformerView.GLOBALEVENT_PERFORMER_MOUSE_LEAVE,this.model.getDisplayName()))},_onLppChange:function(){this.element&&this.element[this.model.getIsLppPlaying()?"addClass":"removeClass"](this.lppPlayingClass)},_onGetsFullyInViewPort:function(){this.model.un(h.a.PerformerModel.EVENT_GETS_FULLY_IN_VIEWPORT,this._onGetsFullyInViewPort,this),u.a.Broadcaster.fireEvent(h.a.PerformerView.GLOBALEVENT_GETS_FULLY_IN_VIEWPORT,{scope:this})},addHoverClass:function(){this.element&&this.getAnchorElement().addClass(this.hoverClass)},removeHoverClass:function(){this.element&&this.getAnchorElement().removeClass(this.hoverClass)},onVideoCallButtonClick:function(){u.a.fireEvent("PerformerView:videoCallButtonClick"),N.default.trackVideoCallClick({eventSource:d.a.isCurrentPage(h.a.PageId.FAVORITE_INDEX)?N.GA_CONST.PAGE.FAVORITE:N.GA_CONST.PAGE.LISTS})},onSendMessageButtonClick:function(e){e.stopEvent(),ae.default.isLoggedIn()||J.isGuestOnboardingEnabled?(N.default.trackGenericEvent({eventCategory:d.a.isCurrentPage(h.a.PageId.FAVORITE_INDEX)?N.default.CONST.PAGE.FAVORITE:N.default.CONST.PAGE.LISTS,eventAction:"click",eventLabel:"send message"}),he.default.openModal("messages/".concat(this.model.getDisplayName()))):T.default.navigate("signup",{trigger:!0,preventNavigateBack:!0},"listpage performer send message button click")},_bindElements:function(){this.element&&this.element.on({touchend:this._onTouchEnd,mouseenter:this._onMouseEnter,mouseleave:this._onMouseLeave,click:this._onPerformerElementClick,scope:this})},_unBindElements:function(){this.element&&this.element.un({touchend:this._onTouchEnd,mouseenter:this._onMouseEnter,mouseleave:this._onMouseLeave,click:this._onPerformerElementClick,scope:this}),this.videoCallMaskContainer&&s.a.unmountComponentAtNode(this.videoCallMaskContainer)},bind:function(){ge.superclass.bind.call(this),u.a.on([{element:this.model,event:h.a.PerformerModel.EVENT_STATUS_CHANGE,handler:this._onStatusChange},{element:this.model,event:h.a.PerformerModel.EVENT_LPP_STATUS_CHANGE,handler:this._onLppChange},{element:this.model,event:h.a.PerformerModel.EVENT_GETS_FULLY_IN_VIEWPORT,handler:this._onGetsFullyInViewPort}],this)}});var Pe=ge,_e=r("950c");function Ee(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function ye(e,t){ye.superclass.constructor.call(this,e,t)}t.default=Ext.extend(ye,u.a.View,{name:"ListPageView",_performerCollection:{},_containerIdPrefix:"container_",listpageId:"listpage",pageSelector:".page.showless",pageClass:"page showless",visiblePageSelector:".page.visible",visiblePageClass:"visible",_listPageCount:1,_showMoreBtnId:"show_more_btn",_noResultSelector:".no-result",_noResultHiddenClass:"is-hidden",_pageIdAttribute:"data-page-id",_errorTagTemplate:'<span id="error_hint"></span>',_listPageBtnCls:"first_button",_refreshPageBtnId:"refresh_page_btn",_scrollTopPos:0,_inViewportObserver:null,init:function(){ye.superclass.init.call(this),this._errorTagTemplate='<span id="error_hint">'.concat(u.a.translate("There are no more live performers at the moment... Please try again later"),"</span>"),this.element&&(this._selectElements(),this._bindElements()),this._createViewportObserver(),this.initializePerformerViewMasks()},_createViewportObserver:function(){var n=this;this._inViewportObserver=new IntersectionObserver(function(e,t){var i=t.thresholds;e.forEach(function(e){var t=+e.target.id.replace("container_",""),r=e.intersectionRatio>i[0],e=e.intersectionRatio===i[1];Number.isNaN(t)||(t=n._performerCollection[t])&&t.model.setIsOnViewPort(e,r)})},{threshold:[0,1]})},initializePerformerViewMasks:function(){this.performerViewMasksContainer=Ext.DomHelper.append(this.element,"<div></div>",!0),this.renderPerformerViewMasks()},renderPerformerViewMasks:function(){s.a.render(p.a.createElement(l.a,{store:m.store,"data-testid":"ListPageViewAbstractProvider"},p.a.createElement(te,{"data-testid":"ListPageViewAbstractPerformerViewMasks"})),this.performerViewMasksContainer.dom)},_selectElements:function(){this._listpageEl=Ext.get(this.listpageId),this._showMoreBtnEl=Ext.get(this._showMoreBtnId),this._noResultElement=this.element.select(this._noResultSelector)},updateNoResultBlockVisibility:function(){this._noResultElement&&(0<Object.keys(this._performerCollection).length?this._noResultElement.addClass(this._noResultHiddenClass):this._noResultElement.removeClass(this._noResultHiddenClass))},getPerformerViewById:function(e){return this._performerCollection[e]},createPerformerView:function(e,t){t=Ext.apply({model:e},t),t=new(this._getViewClass(e))(t);return this._inViewportObserver.observe(t.element.dom),this._addPerformerViewToCollection(e.getId(),t),t},showMoreError:function(){var e=this;this._listpageEl.addClass(h.a.AutoShowMore.CLASS_SHOW_MORE_BUTTON_VISIBLE),this.destroyErrorPopover();var t=document.createElement("div");t.className="listpage_showmore_popover_container",document.querySelector(".show_more_container").prepend(t),this.popoverContainer=document.querySelector(".listpage_showmore_popover_container"),s.a.render(p.a.createElement(ne.b,{autoHideDelay:7e3,isOpen:!0,usePortal:!1,onClosed:function(){return e.handlePopoverClose()},content:u.a.translate("There are no more live performers at the moment... Please try again later"),target:p.a.createElement("div",null),"data-testid":"ListPageViewAbstractCustomPopover"}),this.popoverContainer)},destroyErrorPopover:function(){this.popoverContainer&&(s.a.unmountComponentAtNode(this.popoverContainer),this.popoverContainer.parentNode.removeChild(this.popoverContainer),this.popoverContainer=null)},handlePopoverClose:function(){this.destroyErrorPopover(),this._createRefreshPageBtn()},removeShowMoreError:function(){this.destroyErrorPopover()},_createRefreshPageBtn:function(){Ext.fly(this._refreshPageBtnId)||Ext.DomHelper.insertAfter(this._showMoreBtnEl,{tag:"a",href:"javascript:window.location.reload();",cls:this._listPageBtnCls,id:this._refreshPageBtnId,html:u.a.translate("Refresh page")})},_getViewClass:function(e){return e instanceof oe.a?_e.a:Pe},_addPerformerViewToCollection:function(e,t){t.on(h.a.Chaos.View.EVENT_DESTROY,u.a.bind(this._onPerformerViewDestroy,this,e),this),t.on(h.a.ListPageItemViewAbstract.EVENT_VIEW_BEFORE_REPLACE,this._onPerformerViewBeforeReplace,this),t.on(h.a.ListPageItemViewAbstract.EVENT_VIEW_REPLACED,this._onPerformerViewReplaced,this),t.on(h.a.PerformerView.EVENT_VIEW_MOUSEOVER,this._onPerformerViewMouseOver,this),t.on(h.a.PerformerView.EVENT_VIEW_MOUSEOUT,this._onPerformerViewMouseOut,this),(this._performerCollection[e]=t).setCurrentOrder(Object.keys(this._performerCollection).length)},_appendPerformerViewToContainer:function(e,t){t.element&&e.appendChild(t.element)},_createNewListPage:function(){var e=this.select("".concat(this.pageSelector,":last")).item(0),t=u.a.object([["tag","section"],["cls",this.pageClass],[this._pageIdAttribute,this._listPageCount]]),t=u.a.isNull(e)?this._insertZeroPage(t):Ext.DomHelper.insertAfter(e,t,!0);return this._listPageCount++,t},_insertZeroPage:function(e){return Ext.DomHelper.insertFirst(this.element,e,!0)},_managePageVisibility:function(){u.a.each(this.select(this.pageSelector).elements,function(e){var t=Ext.get(e),e=d.a.isVerticallyInViewport(e,2500);e&&!t.hasClass(this.visiblePageClass)?t.addClass(this.visiblePageClass).setStyle({height:"auto"}):!e&&t.hasClass(this.visiblePageClass)&&1<this.select(this.visiblePageSelector).getCount()&&t.setStyle({height:"".concat(this.select(this.visiblePageSelector).item(0).dom.getBoundingClientRect().height,"px")}).removeClass(this.visiblePageClass)},this)},_onNextPage:function(e){var t=this._createNewListPage();u.a.chain(e).map(this.createPerformerView,this).each(u.a.bind(this._appendPerformerViewToContainer,this,t)),this.updateNoResultBlockVisibility()},addPerformerAttributesToStore:function(){var t=[];Object.values(this._performerCollection).forEach(function(e){return t.push(function(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach(function(e){var t,r;t=i,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}({},e.model.attributes))}),m.store.dispatch(Object(g.addMorePerformers)(t))},_onPerformerViewDestroy:function(e){e in this._performerCollection&&(this._performerCollection[e].purgeListeners(),delete this._performerCollection[e])},_onDestroyModels:function(){window.scrollTo(0,0),this._listPageCount=0,this.element.select(this.pageSelector).remove()},_onPerformerViewBeforeReplace:function(e){e.element&&this._inViewportObserver.unobserve(e.element.dom)},_onPerformerViewReplaced:function(e){u.a.hasPath(e,"newPerformerView")&&u.a.hasPath(e,"oldPerformerView")&&(e.oldPerformerView.model.destroy(),this._addPerformerViewToCollection(e.newPerformerView.model.getId(),e.newPerformerView))},_onPerformerInit:function(e){var t;!1===e.attributes.preRendered?(t=this.createPerformerView(e),this._appendPerformerViewToContainer(Ext.select(this.pageSelector),t),d.a.updateLazy()):(t=this._containerIdPrefix+e.getId(),this.createPerformerView(e,{id:t})),this.updateNoResultBlockVisibility()},_onPerformerViewMouseOver:function(e){this.fireEvent(h.a.ListPageViewAbstract.EVENT_VIEW_MOUSEOVER,e)},_onPerformerViewMouseOut:function(e){this.fireEvent(h.a.ListPageViewAbstract.EVENT_VIEW_MOUSEOUT,e)},_onStartLoading:function(){this.removeShowMoreError(),this.element.addClass(h.a.ListPageViewAbstract.CLASS_LOADING)},_onFinishedLoading:function(){this.element.removeClass(h.a.ListPageViewAbstract.CLASS_LOADING),this._managePageVisibility(),this.addPerformerAttributesToStore()},_onShowMoreButtonClick:function(e){e.stopPropagation(),e.preventDefault(),this.fireEvent(h.a.ListPageViewAbstract.EVENT_SHOW_MORE_BUTTON_CLICK),this.model.getNextPage()},_onViewPortChange:function(){this._managePageVisibility(),d.a.updateLazy()},bind:function(){ye.superclass.bind.call(this),this._bindedModelEvents=u.a.object([[h.a.ListPageModelAbstract.EVENT_PERFORMER_INIT,this._onPerformerInit],[h.a.ListPageModelAbstract.EVENT_GET_NEXT_PAGE,this._onNextPage],[h.a.ListPageModelAbstract.EVENT_START_LOADING,this._onStartLoading],[h.a.ListPageModelAbstract.EVENT_FINISHED_LOADING,this._onFinishedLoading],[h.a.ListPageModelAbstract.EVENT_DESTROY_ALL,this._onDestroyModels],["scope",this]]),this.model.on(this._bindedModelEvents),Ext.fly(window).on({scroll:this._onViewPortChange,resize:this._onViewPortChange,scope:this})},unbind:function(){ye.superclass.unbind.call(this),this.model.un(this._bindedModelEvents),Ext.fly(window).un({scroll:this._onViewPortChange,resize:this._onViewPortChange,scope:this}),this._unbindElements()},_bindElements:function(){this._showMoreBtnEl&&this._showMoreBtnEl.on("click",this._onShowMoreButtonClick,this)},_unbindElements:function(){this._showMoreBtnEl&&this._showMoreBtnEl.un("click",this._onShowMoreButtonClick,this)}})},ef59:function(e,t,r){"use strict";var i=r("8af1");t.a=function(t,e){var r=Object(i.useRef)(null);return Object(i.useEffect)(function(){var e=document.querySelector(t);if(e)return e.appendChild(r.current),function(){r.current.remove(),-1===e.childNodes.length&&e.remove()}},[e,t]),r.current||(r.current=document.createElement("div")),r.current}}}]);
