!function(){function t(i){var t;i.get&&i.set&&(this.clear(),t=i.get("buildHitTask"),i.set("buildHitTask",l(this,t)),i.set("_rlt",h(this,i.get("_rlt"))))}function n(i,t){this.name=i,this.source=t,this.e=[]}var o=window,e="push",a="length",c="prototype",s={action:"pa",promoAction:"promoa",id:"ti",affiliation:"ta",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",step:"cos",label:"col",option:"col",options:"col",list:"pal",listSource:"pls"},p={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",quantity:"qt",coupon:"cc","dimension(\\d+)":"cd","metric(\\d+)":"cm"},u={id:"id",name:"nm",creative:"cr",position:"ps"},r="detail checkout checkout_option click add remove purchase refund".split(" ");t[c].clear=function(){this.b=void 0,this.f=[],this.a=[],this.g=[],this.d=void 0},t[c].h=function(i,t){t=t||{};"promo_click"==i?t.promoAction="click":t.action=i,this.b=d(t)},t[c].j=function(i){(i=d(i))&&this.f[e](i)},t[c].i=function(i){var t=d(i);if(t){var o,r=i.list||"";i=i.listSource||"";for(var c=0;c<this.a[a];c++)if(this.a[c].name==r){o=this.a[c];break}o||(o=new n(r,i),this.a[e](o)),o.e[e](t)}},t[c].c=function(i){(i=d(i))&&this.g[e](i)};function f(i,t,o){if("[object Array]"==Object[c].toString.call(Object(i)))for(var r=0;r<i[a];r++)t.call(o,i[r])}t[c].data=function(i){if(i&&i.ecommerce){(i=i.ecommerce).promoView&&f(i.promoView.promotions,this.c,this),i.promoClick&&(this.h("promo_click",i.promoClick.actionField),f(i.promoClick.promotions,this.c,this));for(var t=0;t<r[a];t++){var o=i[r[t]];if(o){this.h(r[t],o.actionField),f(o.products,this.j,this);break}}f(i.impressions,this.i,this),i.currencyCode&&(this.d=i.currencyCode)}};var l=function(n,e){return function(i){var t,o,r;for(n.b&&m(s,n.b,i,"&"),t=0;t<n.f[a];t++)m(p,n.f[t],i,o="&pr"+(t+1));for(t=0;t<n.a[a];t++){o="&il"+(t+1),(r=n.a[t]).name&&i.set(o+"nm",r.name,!0),r.source&&i.set(o+"ls",r.source,!0);for(var c=0;c<r.e[a];c++)m(p,r.e[c],i,o+"pi"+(c+1))}for(t=0;t<n.g[a];t++)m(u,n.g[t],i,o="&promo"+(t+1));return n.d&&i.set("&cu",n.d,!0),n.clear(),e(i)}},h=function(o,r){return function(i){var t=o.b&&o.b.action;if("purchase"!=t&&"refund"!=t)return r(i)}},d=function(i){var t=0,o={};if(i&&"object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&(o[r]=i[r],t++);return t?o:void 0},m=function(i,t,o,r){for(var c in t)if(t.hasOwnProperty(c))for(var n in i){var e;!i.hasOwnProperty(n)||(e=c.match("^"+n+"$"))&&o.set(r+i[n]+e.slice(1).join(""),t[c],!0)}};!function(){o.gaplugins=o.gaplugins||{},(o.gaplugins.EC=t)[c].setAction=t[c].h,t[c].addProduct=t[c].j,t[c].addImpression=t[c].i,t[c].addPromo=t[c].c,t[c].clear=t[c].clear,t[c].data=t[c].data;var i=o.GoogleAnalyticsObject||"ga";o[i]=o[i]||function(){(o[i].q=o[i].q||[])[e](arguments)},o[i]("provide","ec",t)}()}();
