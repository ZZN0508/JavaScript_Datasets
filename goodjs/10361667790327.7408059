define(function(){"use strict";function u(e,t){if(e&&"object"==typeof e){if(e.default)return e.default;if(e[t])return e[t]}return e}function t(e,t){for(var n,i,a,r=d((e=e||f).getElementsByClassName("h-mod")),u=0;u<r.length;u+=1)(i=(n=r[u]).getAttribute("data-module"))&&(t?g:v)(n,i);if(o)for(r=d(e.getElementsByTagName("a")),u=0;u<r.length;u+=1)!(a=(n=r[u]).getAttribute("href"))||(a=l(a))&&(i=o[a])&&(t?g:v)(n,i)}function r(e){"interactive"===f.readyState||"complete"===f.readyState?t(e,!1):f.addEventListener("DOMContentLoaded",t)}var o,f=document,n=/(\?|\&)cmd=([^\&]+)/,c=null,d=function(e){return Array.prototype.slice.call(e)},l=function(e){e=e.match(n);if(e)return e[2]},v=function(e,t){var n,i,a,r="OK/"+t;null!==c&&-1===c.indexOf(t)||(i=t,a=(n=e).getAttribute("data-activate")||"activate",e=function(e){var t;"function"==typeof(e=u(e,i))?(t=new e(n.id,n),n.okReqModule=t):t=e,t[a](n)},require.defined(r)?e(require(r)):require([r],e))},g=function(e,t){var n,i,a="OK/"+t;null!==c&&-1===c.indexOf(t)||!require.defined(a)||(i=e.getAttribute("data-deactivate")||"deactivate",a=require(a),"function"==typeof(a=u(a,t))?(n=e.okReqModule,e.okReqModule=null):n=a,n&&n[i]&&n[i](e))};return{setWhiteList:function(e){c=e},activate:r,activateDocument:function(e,t){var n,i,a;if(e&&e.length)for(o={},n=0;n<e.length;n+=1)i=(a=e[n].split(":"))[0],a=1===a.length?a[0]:a[1],o[i]=a;r()},deactivate:function(e){"interactive"!==f.readyState&&"complete"!==f.readyState||t(e,!0)}}});
