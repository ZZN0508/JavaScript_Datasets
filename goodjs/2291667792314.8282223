!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-caas",[],t):"object"==typeof exports?exports["wafer-caas"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-caas"]=t())}("undefined"!=typeof self?self:this,function(){return a={"./src/base.js":function(e,t,a){"use strict";function u(){return f=a("./src/utils.js")}Object.defineProperty(t,"__esModule",{value:!0});var f,P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},A=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(e,t,a){return t&&c(e.prototype,t),a&&c(e,a),e},n=window.wafer,S=n.base,s=n.constants,i=n.utils,n=n.WaferBaseClass,k=s.ATTR_PREFIX,j=i.clearAndSetInnerHTML,o=i.clearTimeout,I=i.convertNodeListToArray,d=i.fetchWithCache,E=i.getConfigFromJSONScriptNode,h=i.getUrlParameterValueByName,O=i.setTimeout,N=["caas-collapsed","caas-url","caas-uuid"],m={},r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,n),r(T,[{key:"fetch",value:function(){var v=this,y=this._util["caas-url"],g=this._util["caas-uuid"];if(!y&&!g)return Promise.reject(new Error("uuid and url is missing"));var e=this._util,t=e.dependencyElem,_=e.successClass;if(t&&!t.classList.contains(_))return Promise.reject(new Error("dependency not yet complete"));var e=this._util,t=e.caasConfig,t=void 0===t?{}:t,s=e.cache,i=e.cacheStrategy,o=e.cacheTtl,b=e.elem,a=e.errorClass,C=e.secondNode,P=e.targetElem,c=e.timeout,k=e.type,l=g+":"+t.contextParams;if(b.classList.contains(_))return Promise.resolve(!0);if(0===this._state.status)return Promise.resolve(!1);var E=!1;return y=y?(e=-1===y.indexOf("?")?"?":"&",y+e+t.contextParams):(t.caasUrl||"https://www.yahoo.com/caas/content/article/")+"?uuid="+g+"&"+t.contextParams,y=(0,(f||u()).getCaaSUrlToUse)(y),b.classList.add("wafer-caas-trigger-inprogress"),this._state.status=0,new Promise(function(a,r){if("default"===k){var e=window.__waferCaasCollection.get(g);if(e)return E=!0,void a(e)}var n={cache:s,cacheKey:l,cacheStrategy:i,cacheTtl:o,timeout:c},t=!0;-1===y.indexOf("s.yimg.com")&&(n.credentials="include"),"sidekick"===k&&(!(e=h("uuid",y))||(e=e.split(",")[0])&&(t=!1,window.wafer.caas.getData([e]).then(function(){var e=A(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],1)[0]||{},t=e.adMeta,e=e.wikiids,t=t.site_attribute||"";n.body=JSON.stringify({wikis:e,siteAttribute:t}),d(y,n).then(function(e){a(e)}).catch(function(e){r(e)})}))),t&&d(y,n).then(function(e){a(e)}).catch(function(e){r(e)})}).then(function(e){var t=e.assets;if(!t.length)return e;if("sidekick"!==k&&window.CAAS)return e;var a=e.style;return m[k]||(m[k]=(0,(f||u()).loadCaaSAssets)(t,a,k).then(function(){return e}),m[k])}).then(function(e){var t=k.length?k[0].toUpperCase()+k.slice(1):"",a=v["handle"+t],r=e._fetchMeta||{},n=r.duration,t=r.source;S.destroy(b,{destroySelf:!1});r=void 0;if("default"===k){var s=e||{},i=s.assets,o=s.items,s=void 0===o?[]:o,c={};1<s.length?s.some(function(e){return((e||{}).data||{}).partnerData.uuid===g&&(c=e,!0)}):c=s[0],r=(c||{}).markup,j(P,r),E||window.__waferCaasCollection.set(g,{assets:i,items:[c]})}else if("sidekick"===k)if(r=e.markup,C){o=v._util.isItemCountBalanced,s=document.createElement("div"),i=document.createElement("div");s.innerHTML=r,i.innerHTML=r;for(var l=I(s.getElementsByClassName("sidekick-item")),u=l.length,f=Math.round(u/2)+ +!o,d=f;d<u;d++){var h=l[d].parentNode;h.parentNode.removeChild(h)}j(P,s.innerHTML);var m=I(i.getElementsByClassName("sidekick-item")),o=i.getElementsByClassName("caas-mobetta")[0];o&&o.parentNode.removeChild(o);for(var w=0;w<f;w++){var p=m[w].parentNode;p.parentNode.removeChild(p)}P.innerHTML=s.innerHTML,j(C,i.innerHTML)}else j(P,r);return!v._util["caas-collapsed"]||(r=I(P.getElementsByClassName("caas-body-wrapper"))[0])&&r.classList.add("caas-body-collapsed"),a&&a.call(v,b,e),b.classList.remove("wafer-caas-trigger-inprogress"),b.classList.add(_),S.emitLog({name:"WaferCaas",elem:b,meta:{duration:n,source:E?"MEMORY":t,url:y}}),"default"===k&&(e=e.items[0].data.partnerData,S.emitWaferEvent("caas:article:fetch",{elem:b,meta:{data:e,url:y}})),!0}).catch(function(e){return S.emitWaferEvent("caas:"+("default"===k?"article":k)+":error",{elem:b,meta:{url:y,uuid:g},stack:e.stack}),b.classList.remove("wafer-caas-trigger-inprogress"),b.classList.add(a),b.classList.remove(_),S.destroy(b),!(v._state.status=2)})}},{key:"handleSidekick",value:function(e){var t=this._util,a=t["caas-url"],r=t.elem,t=t.secondNode;(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).markup?(S.emitWaferEvent("caas:sidekick:init",{elem:r,meta:{url:a}}),this._state.status=1,S.sync(e),t&&S.sync(t)):S.emitWaferEvent("caas:sidekick:error",{elem:r,meta:{url:a}})}},{key:"handleRenderedArticle",value:function(e){var t,a=this._util,r=a["caas-uuid"],n=a.elem,s=a.successClass,a=a.targetElem;window.__waferCaasCollection.set(r,{items:[{data:{partnerData:P({},e,{uuid:r})}}]}),this.handleDefault(n),this._util["caas-collapsed"]&&(t=I(a.getElementsByClassName("caas-body-wrapper"))[0])&&t.classList.add("caas-body-collapsed"),n.classList.add(s),S.emitLog({name:"WaferCaas",elem:n,meta:{}})}},{key:"handleDefault",value:function(e){var n,s,t,a,r,i=this;this._destroyed||(a=this._util,n=a["caas-uuid"],s=a.elem,t=a.type,r=(window.__waferCaasCollection.get(n)||{}).items,r=(a=void 0===(a=A(void 0===r?[]:r,1)[0])?{}:a).data,a=a.markup,"renderedArticle"===t||a&&r?(a=r.partnerData,window._caasInstance?O(function(){i._destroyed||(window._caasInstance.sync(),S.sync(e))},window.__waferCaasRenderInProgress?300:0,this):(r=this._util.wrapper,window.wafer.base.pauseVideo("wafer-caas"),window._caasInstance=new window.CAAS.BASE({container:r}),window._caasInstance.on("yvideo:scriptLoadingError",function(e){S.emitError({name:"WaferCaas",elem:null,meta:{message:"Could not load js"},stack:e.stack})}),window._caasInstance.on("link:clicked",function(t){if(t.isYahoo){var e=i._util.caasConfig,a=void 0===e?{}:e,e=a.contextParams,r=void 0===e?{}:e,a=(a.caasUrl||"https://www.yahoo.com/caas/content/article/")+"?url="+t.href+"&"+r;return S.emitWaferEvent("caas:yahooLink:clicked",{elem:s,meta:{data:t,instance:window._caasInstance}}),d(a,{timeout:2e3}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.items,t=void 0===t?[]:t,e=e.assets;return(0,(f||u()).handlePrefetchedData)(t,e,r)}).then(function(e){e=A(e,1)[0],e=(e=void 0===e?{}:e).data.partnerData,e=(void 0===e?{}:e).uuid;S.emitWaferEvent("caas:yahooLink:fetched",{elem:s,meta:{data:Object.assign({parentUuid:n,uuid:e},t),instance:window._caasInstance}})}).catch(function(){S.emitWaferEvent("caas:link:clicked",{elem:s,meta:{data:t,instance:window._caasInstance}})})}S.emitWaferEvent("caas:link:clicked",{elem:s,meta:{data:t,instance:window._caasInstance}})}),this._state.status=1,S.emitWaferEvent("caas:article:init",{elem:s,meta:{data:a,instance:window._caasInstance}}),S.sync(e)),window.__waferCaasRenderInProgress=!0,o(window.__waferCaasRenderInProgressTimeout),window.__waferCaasRenderInProgressTimeout=O(function(){window.__waferCaasRenderInProgress=!1},300,this),this._state.status=1):S.emitWaferEvent("caas:article:error",{elem:s,meta:{uuid:n}}))}},{key:"handleArticleInViewport",value:function(){var e=this._util,t=e.elem,a=e.type,r=e["caas-uuid"],e=(window.__waferCaasCollection.get(r)||{}).items,r=A(void 0===e?[]:e,1)[0],e=(r=void 0===r?{}:r).data,r=r.markup;("renderedArticle"===a||r&&e)&&(e=e.partnerData,S.emitWaferEvent("caas:article:inview",{elem:t,meta:{data:e,instance:window._caasInstance}}))}},{key:"stateDidUpdate",value:function(){var e;"caas-collapsed"!==(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).stateAttr?"stateChange"===this._util.trigger&&this.fetch().catch(function(){}):this._util.targetElem&&(this._util["caas-collapsed"]=Number(this._util["caas-collapsed"]),this._util["caas-collapsed"]&&(e=I(this._util.targetElem.getElementsByClassName("caas-body-wrapper"))[0])&&e.classList.add("caas-body-collapsed"))}},{key:"config",get:function(){var e=this._util,t=e["caas-url"],a=e["caas-uuid"],r=e.caasConfig,n=e.elem,s=e.href,i=e.isPrefetch,o=e.offsetX,c=e.offsetY,l=e.selector,u=e.trigger,e=e.type;return{caasConfig:r,elem:n,href:s,isPrefetch:i,offsetX:o,offsetY:c,selector:l,shouldPrefetchForViewport:this._state.shouldPrefetchForViewport,trigger:u,type:e,url:t,uuid:a}}},{key:"shouldPrefetchForViewport",set:function(e){this._state.shouldPrefetchForViewport=e}}]),T);function T(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.caasConfig,r=e.errorClass,n=e.selector,s=e.successClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,t,{errorClass:r,selector:n,successClass:s},{STATE_ATTRS:N})),o=t.getAttribute(k+"caas-cache"),c=t.getAttribute(k+"caas-collapsed"),l=t.getAttribute(k+"caas-url"),u=t.getAttribute(k+"caas-uuid"),f=t.getAttribute(k+"caas-cache-strategy")||"cacheFirst",d=t.getAttribute(k+"caas-cache-ttl"),h=t.getAttribute("href"),m=t.getAttribute(k+"caas-prefetch"),w=t.getAttribute(k+"caas-timeout"),p=t.getAttribute(k+"caas-type")||"default",v=t.getAttribute(k+"caas-wrapper"),y=t.getAttribute(k+"caas-dependency"),g=y&&document.querySelector(y),_=(t.getAttribute(k+"caas-trigger-offset")||"").split(" "),b=A(_,2),C=b[0],e=b[1],y=t.getAttribute(k+"caas-item-count-balanced"),_=t.getAttribute(k+"caas-target"),b=_&&t.querySelector(_)||t,_=t.getAttribute(k+"caas-trigger")||"viewport";return i._util=P({},i._util,{"caas-collapsed":null==c?0:Number(c),"caas-url":l,"caas-uuid":u,cache:null==o?1:Number(o),caasConfig:a,cacheStrategy:f,cacheTtl:null==d?300:Number(d),dependencyElem:g,isPrefetch:null==m?0:Number(m),targetElem:b,timeout:null==w?6e3:Number(w),elem:t,errorClass:r,href:h,type:p,offsetX:Number(e)||0,offsetY:Number(C)||0,selector:n,successClass:s,trigger:_,wrapper:v,isItemCountBalanced:null==y?0:Number(y)}),i._state={shouldPrefetchForViewport:"viewportWithPrefetch"===_,status:status},"sidekick"===p?(_=(_=t.getAttribute(k+"caas-second-node"))&&document.getElementById(_))&&(i._util.secondNode=_):"renderedArticle"===p&&O(function(){var e=t.getElementsByClassName("wafer-caas-data")[0],e=e&&E(e);i.handleRenderedArticle(e)},0,i),i}function c(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.default=r,e.exports=t.default},"./src/controller.js":function(e,t,u){"use strict";function E(){return A=u("./src/utils.js")}Object.defineProperty(t,"__esModule",{value:!0});var f,A,a,r,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e},i=window.wafer,S=i.base,i=i.utils,d=i.elementInView,j=i.fetchWithCache,h=i.getConfigFromJSONScriptNode,m=i.getWaferInstanceForElem,w=i.throttle,I=void 0,i=window.wafer.controllers.WaferBaseController;function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.__waferCaasCollection=(a=[],r=new Map,{set:function(e,t){a.push(e),r.set(e,t)},freeMemory:function(e){var t;a.length<40||(t=a[0],window.wafer.db.get(t+":"+e,"fetch",{timeout:1e3}).then(function(e){e&&(e=a.indexOf(t),a.splice(e,1),r.delete(t))}).catch(function(){}))},get:function(e){return r.get(e)}});(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(p,i),s(p,[{key:"addPublicAPIs",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).contextParams,a=void 0===e?{}:e;window.wafer.caas||(window.wafer.caas={getData:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map(function(t){return new Promise(function(r){var e=window.__waferCaasCollection.get(t);if(e){e=n(e.items,1)[0].data;return r((void 0===e?{}:e).partnerData||{})}if(!window.wafer.db)return r({});window.wafer.db.get(t+":"+a,"fetch",{timeout:3e3}).then(function(e){try{var t=JSON.parse(e.value).items,a=n(t,1)[0].data;return r((void 0===a?{}:a).partnerData||{})}catch(e){return r({})}}).catch(function(e){r({})})})}))}})}},{key:"prefetch",value:function(){var e=this._state.elementInstances,t={},a=[],r=[],n=void 0,s=void 0,i=void 0,o=0,c=0,l=!0,u=!1,f=void 0;try{for(var d,h=e.values()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value;a[o]=a[o]||[];var w,p=m.instance,v=p.config,y=v.caasConfig,g=void 0===y?{}:y,_=v.elem,b=v.href,C=v.isPrefetch,P=v.shouldPrefetchForViewport,k=v.uuid,i=i||g.caasUrl,s=s||g.contextParams||"";(C||P)&&k&&((w=t[k])||a[o].push({href:b,uuid:k}),t[k]=!0,P?(_.classList.add("did-prefetch"),p.shouldPrefetchForViewport=!1):p.destroy(),!w&&10<=++c&&(c=0,o++))}}catch(e){u=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw f}}return Promise.all(a.map(function(a){var e=a.map(function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).uuid});if(e.length)return n=(i||"https://www.yahoo.com/caas/content/article/")+"?uuid="+e.join(",")+"&"+s,n=(0,(A||E()).getCaaSUrlToUse)(n),j(n,{cache:0}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.assets,e=e.items,a={items:void 0===e?[]:e,assets:t};return window.CAAS?a:I=I||(0,(A||E()).loadCaaSAssets)(t,"","default").then(function(){return a})}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.assets,e=e.items,e=void 0===e?[]:e;return(0,(A||E()).handlePrefetchedData)(e,t,s,function(e){e=a[e].href;e&&r.push(e)})})})).then(function(){if(r.length)return Promise.all(r.map(function(e){return j((i||"https://www.yahoo.com/caas/content/article/")+"?url="+e+"&"+s,{cache:0}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.items,t=void 0===t?[]:t,e=e.assets;return(0,(A||E()).handlePrefetchedData)(t,e,s)})}))}).then(function(){S.emitWaferEvent("caas:prefetch:success",{meta:{url:n}})}).catch(function(){S.emitWaferEvent("caas:prefetch:failed",{meta:{url:n}})})}},{key:"handleScroll",value:function(){this._validateWithThrottle()}},{key:"handleResize",value:function(){this._validateWithThrottle()}},{key:"didSync",value:function(){var e=this,t=this._state,a=t.elementInstances,t=t.mounted;0===a.size||t||(this._state.mounted=!0),setTimeout(function(){e.prefetch()},10)}},{key:"trigger",value:function(e){e=this._state.elementInstances.get(e);!e||"renderedArticle"!==(e=e.instance).config.type&&e.fetch()}},{key:"willValidate",value:function(e){var c=this,l=this._state.elementInstances;e.forEach(function(t){var e=l.get(t).instance;if(!e.config.isPrefetch){var a=e.config,r=a.offsetX,n=a.offsetY,s=a.selector,i=a.trigger,a=a.type,o=d(t,{offsetX:r,offsetY:n},S.viewport);if("renderedArticle"!==a)switch(i){case"viewport":case"viewportWithPrefetch":1!==e._state.status&&o&&e.fetch().then(function(e){e&&s&&t.classList.remove(s.replace(".",""))}).catch(function(){});break;case"onLoad":e.fetch().then(function(e){e&&s&&t.classList.remove(s.replace(".",""))}).catch(function(){})}o&&c._state.activeElem===t||c._state.activeElem&&d(c._state.activeElem,{offsetX:r,offsetY:n},S.viewport)||1!==e._state.status||!o||"default"!==a&&"renderedArticle"!==a||c._state.activeElem===t||((a=c._state.progressLoader)&&!a._destroyed||(c._state.progressLoader=m(document.getElementsByClassName("wafer-caas-progress-loader")[0],"wafer-progress-loader")),(a=c._state.progressLoader)&&(a.instance.target=t),e.handleArticleInViewport(),c._state.activeElem=t)}})}},{key:"didDestroy",value:function(e){this._state.activeElem===e&&(this._state.activeElem=null);var t=!0,a=this._state.elementInstances,r=!0,n=!1,s=void 0;try{for(var i,o=a.values()[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value.instance.config,l=c.isPrefetch;if("default"===c.type&&!l){t=!1;break}}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}t&&(window._caasInstance&&(window._caasInstance.destructor(),window._caasInstance=null),window.wafer.base.resumeVideo("wafer-caas"))}}]),s=p;function p(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.errorClass,a=void 0===t?"wafer-caas-error":t,r=e.root,n=void 0===r?document:r,s=e.selector,i=e.successClass,o=void 0===i?"wafer-caas-complete":i,c=e.validateDelay,t=void 0===c?25:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);r=h(document.getElementById("wafer-caas-config"));r.caasUrl&&(e=(i=location).hostname,c=i.port,i=i.protocol,"localhost"===e||"4443"===c||"https:"!==i||r.mock||(r.caasUrl="/caas/content/article/"));var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,{root:n,selector:s,props:{caasConfig:r,errorClass:a,selector:s,successClass:o},WaferClass:(f||(o=u("./src/base.js"),f=o&&o.__esModule?o:{default:o})).default}));return l._validateWithThrottle=w(function(){l.validate()},t,l),l._state=l._state||{},l._state.progressLoader=null,l.sync(),l.addPublicAPIs(r),l}t.default=s,e.exports=t.default},"./src/entry.js":function(e,t,a){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(r||(n=a("./src/controller.js"),r=n&&n.__esModule?n:{default:n})).default({selector:"wafer-caas"}),e.exports=t.default},"./src/utils.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.wafer,i=r.features,r=r.utils,o=r.getUrlParameterValueByName,c=r.loadCSSSync,l=r.loadScriptAsync,u=/^https:\/\/s.yimg.com\/(os|aaq)\/c/;t.handlePrefetchedData=function(e,r,n,s){return Promise.all(e.map(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.data,a=(void 0===e?{}:e).partnerData;if(!a)return s&&s(arguments[1]),Promise.resolve();e=a.uuid,a={assets:r,items:[t]};return window.__waferCaasCollection.set(e,a),window.wafer.db.set({cachedTime:Date.now(),key:e+":"+n,ttl:1200,value:JSON.stringify(a)},"fetch").then(function(e){return e&&window.__waferCaasCollection.freeMemory(n),t}).catch(function(){return t})}))},t.loadCaaSAssets=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",t=arguments[2];return new Promise(function(a){var r,n="sidekick"===t?"CAAS_SIDEKICK":"CAAS",s=!0,i=!0;window.__caasModules=window.__caasModules||{},e.forEach(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,e=e.asset;"js"===t&&e.value&&(s=!1),"css"===t&&(i=!1)}),e.forEach(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.type,e=e.asset;r=(void 0===e?{}:e).value,u.test(r)&&("js"===t?l({src:r},function(){s=!0,i&&a()},n):"css"===t&&(window.__caasModules[n]?(i=!0,s&&a()):(window.__caasModules[n]=!0,c({src:r,text:o},function(){i=!0,s&&a()}))))})})},t.getCaaSUrlToUse=function(e){var t,a,r,n,s;return i.isPWA&&(o("features",e)?(t=e,a="features",r=i+",pwa",n=new RegExp("([?&])"+a+"=.*?(&|$)","i"),s=-1!==t.indexOf("?")?"&":"?",e=t.match(n)?t.replace(n,"$1"+a+"="+r+"$2"):t+s+a+"="+r):e+="&features=pwa"),e}}},n={},r.m=a,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://s.yimg.com/aaq/wf/",r(r.s="./src/entry.js");function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var a,n});
